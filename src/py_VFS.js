__BRYTHON__.$py_VFS={
'/libs/_html.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmdW5jdGlvbiAkVGFnKHRhZ05hbWUsYXJncyl7dmFyIG9iaj0kRE9NTm9kZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpKTtvYmoucGFyZW50PXRoaXM7aWYoYXJncyE9dW5kZWZpbmVkJiZhcmdzLmxlbmd0aD4wKXskc3RhcnQ9MDskZmlyc3Q9YXJnc1swXTtpZigkZmlyc3QuX19jbGFzc19fIT09JEt3KXskc3RhcnQ9MTtpZihpc2luc3RhbmNlKCRmaXJzdCxbc3RyLGludCxmbG9hdF0pKXt0eHQ9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc3RyKCRmaXJzdCkpO29iai5lbHQuYXBwZW5kQ2hpbGQodHh0KTt9ZWxzZSBpZigkZmlyc3QuX19jbGFzc19fPT09JFRhZ1N1bURpY3QpZm9yKCRpPTA7JGk8JGZpcnN0LmNoaWxkcmVuLmxlbmd0aDskaSsrKW9iai5lbHQuYXBwZW5kQ2hpbGQoJGZpcnN0LmNoaWxkcmVuWyRpXS5lbHQpO2Vsc2UgdHJ5e29iai5lbHQuYXBwZW5kQ2hpbGQoJGZpcnN0LmVsdCk7fWNhdGNoKGVycil7Y29uc29sZS5sb2coJ2VycmV1ciAnK2Vycik7dGhyb3cgVmFsdWVFcnJvcignd3JvbmcgZWxlbWVudCAnKyRmaXJzdCk7fX1mb3IodmFyICRpPSRzdGFydDskaTxhcmdzLmxlbmd0aDskaSsrKXskYXJnPWFyZ3NbJGldO2lmKCRhcmcmJiRhcmcuX19jbGFzc19fPT09JEt3KWlmKCRhcmcubmFtZS50b0xvd2VyQ2FzZSgpLnN1YnN0cigwLDIpPT09Im9uIilldmFsKCdET01Ob2RlLmJpbmQob2JqLCInKyRhcmcubmFtZS50b0xvd2VyQ2FzZSgpLnN1YnN0cigyKSsnIixmdW5jdGlvbigpeycrJGFyZy52YWx1ZSsnfSknKTtlbHNlIGlmKCRhcmcubmFtZS50b0xvd2VyQ2FzZSgpPT0ic3R5bGUiKURPTU5vZGUuc2V0X3N0eWxlKG9iaiwkYXJnLnZhbHVlKTtlbHNlIGlmKCRhcmcudmFsdWUhPT1mYWxzZSl0cnl7dmFyIGFyZz0kYXJnLm5hbWUudG9Mb3dlckNhc2UoKTtvYmouZWx0LnNldEF0dHJpYnV0ZShhcmcsJGFyZy52YWx1ZSk7aWYoYXJnPT0iY2xhc3MiKW9iai5lbHQuc2V0QXR0cmlidXRlKCJjbGFzc05hbWUiLCRhcmcudmFsdWUpO31jYXRjaChlcnIpe2NvbnNvbGUubG9nKCdlcnJldXIgJytlcnIpO3Rocm93IFZhbHVlRXJyb3IoImNhbid0IHNldCBhdHRyaWJ1dGUgIiskYXJnLm5hbWUpO319fXJldHVybiBvYmo7fWZ1bmN0aW9uIEEoKXt2YXIgb2JqPSRUYWcoJ0EnLGFyZ3VtZW50cyk7cmV0dXJuIG9iajt9QS5fX25hbWVfXz0naHRtbC5BJzt2YXIgJHNyYz1BKycnOyR0YWdzPVsnQScsJ0FCQlInLCdBQ1JPTllNJywnQUREUkVTUycsJ0FQUExFVCcsJ0InLCdCRE8nLCdCSUcnLCdCTE9DS1FVT1RFJywnQlVUVE9OJywnQ0FQVElPTicsJ0NFTlRFUicsJ0NJVEUnLCdDT0RFJywnREVMJywnREZOJywnRElSJywnRElWJywnREwnLCdFTScsJ0ZJRUxEU0VUJywnRk9OVCcsJ0ZPUk0nLCdGUkFNRVNFVCcsJ0gxJywnSDInLCdIMycsJ0g0JywnSDUnLCdINicsJ0knLCdJRlJBTUUnLCdJTlMnLCdLQkQnLCdMQUJFTCcsJ0xFR0VORCcsJ01BUCcsJ01FTlUnLCdOT0ZSQU1FUycsJ05PU0NSSVBUJywnT0JKRUNUJywnT0wnLCdPUFRHUk9VUCcsJ1BSRScsJ1EnLCdTJywnU0FNUCcsJ1NDUklQVCcsJ1NFTEVDVCcsJ1NNQUxMJywnU1BBTicsJ1NUUklLRScsJ1NUUk9ORycsJ1NUWUxFJywnU1VCJywnU1VQJywnVEFCTEUnLCdURVhUQVJFQScsJ1RJVExFJywnVFQnLCdVJywnVUwnLCdWQVInLCdCT0RZJywnQ09MR1JPVVAnLCdERCcsJ0RUJywnSEVBRCcsJ0hUTUwnLCdMSScsJ1AnLCdUQk9EWScsJ09QVElPTicsJ1REJywnVEZPT1QnLCdUSCcsJ1RIRUFEJywnVFInLCdBUkVBJywnQkFTRScsJ0JBU0VGT05UJywnQlInLCdDT0wnLCdGUkFNRScsJ0hSJywnSU1HJywnSU5QVVQnLCdJU0lOREVYJywnTElOSycsJ01FVEEnLCdQQVJBTSddOyR0YWdzPSR0YWdzLmNvbmNhdChbJ0FSVElDTEUnLCdBU0lERScsJ0FVRElPJywnQkRJJywnQ0FOVkFTJywnQ09NTUFORCcsJ0RBVEFMSVNUJywnREVUQUlMUycsJ0RJQUxPRycsJ0VNQkVEJywnRklHQ0FQVElPTicsJ0ZJR1VSRScsJ0ZPT1RFUicsJ0hFQURFUicsJ0tFWUdFTicsJ01BUksnLCdNRVRFUicsJ05BVicsJ09VVFBVVCcsJ1BST0dSRVNTJywnUlAnLCdSVCcsJ1JVQlknLCdTRUNUSU9OJywnU09VUkNFJywnU1VNTUFSWScsJ1RJTUUnLCdUUkFDSycsJ1ZJREVPJywnV0JSJ10pO3ZhciBvYmo9bmV3IE9iamVjdCgpO2ZvcigkaT0wOyRpPCR0YWdzLmxlbmd0aDskaSsrKXskY29kZT0kc3JjLnJlcGxhY2UoL0EvZ20sJHRhZ3NbJGldKTtldmFsKCJvYmouIiskdGFnc1skaV0rIj0iKyRjb2RlKTtldmFsKCJvYmouIiskdGFnc1skaV0rJy5fX25hbWVfXz0iaHRtbC4nKyR0YWdzWyRpXSsnIicpO31vYmouX19nZXRhdHRyX189ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fTtyZXR1cm4gb2JqO30pKCk7',
'/libs/re.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtvYmo9e19fY2xhc3NfXzokbW9kdWxlLF9fc3RyX186ZnVuY3Rpb24oKXtyZXR1cm4gIjxtb2R1bGUgJ3JlJz4iO319O29iai5BPW9iai5BU0NJST0yNTY7b2JqLkk9b2JqLklHTk9SRUNBU0U9J2knO29iai5NPW9iai5NVUxUSUxJTkU9J20nOyRTUkVfUGF0dGVybkRpY3Q9e19fY2xhc3NfXzokdHlwZSxfX25hbWVfXzonU1JFX1BhdHRlcm4nfTskU1JFX1BhdHRlcm5EaWN0Lm1hdGNoPWZ1bmN0aW9uKHNlbGYsc3RyaW5nKXtyZXR1cm4gb2JqLm1hdGNoKHNlbGYucGF0dGVybixzdHJpbmcsc2VsZi5mbGFncyk7fTskU1JFX1BhdHRlcm5EaWN0LnNlYXJjaD1mdW5jdGlvbihzZWxmLHN0cmluZyl7cmV0dXJuIG9iai5vYmooc2VsZi5wYXR0ZXJuLHN0cmluZyxzZWxmLmZsYWdzKTt9O29iai5jb21waWxlPWZ1bmN0aW9uKHBhdHRlcm4sZmxhZ3Mpe3JldHVybntfX2NsYXNzX186JFNSRV9QYXR0ZXJuRGljdCxwYXR0ZXJuOnBhdHRlcm4sZmxhZ3M6ZmxhZ3N9O307b2JqLmZpbmRhbGw9ZnVuY3Rpb24ocGF0dGVybixzdHJpbmcsZmxhZ3Mpe3ZhciAkbnM9JE1ha2VBcmdzKCdyZS5zZWFyY2gnLGFyZ3VtZW50cyxbJ3BhdHRlcm4nLCdzdHJpbmcnXSx7fSwnYXJncycsJ2t3Jyk7dmFyIGFyZ3M9JG5zLmFyZ3M7aWYoYXJncy5sZW5ndGg+MCl2YXIgZmxhZ3M9YXJnc1swXTtlbHNlIHZhciBmbGFncz0kbnMua3cuZ2V0KCdmbGFncycsJycpO2ZsYWdzKz0nZ20nO3ZhciBqc3A9bmV3IFJlZ0V4cChwYXR0ZXJuLGZsYWdzKTt2YXIganNtYXRjaD1zdHJpbmcubWF0Y2goanNwKTtpZihqc21hdGNoPT09bnVsbClyZXR1cm4gW107cmV0dXJuIGpzbWF0Y2g7fTtvYmouc2VhcmNoPWZ1bmN0aW9uKHBhdHRlcm4sc3RyaW5nKXt2YXIgJG5zPSRNYWtlQXJncygncmUuc2VhcmNoJyxhcmd1bWVudHMsWydwYXR0ZXJuJywnc3RyaW5nJ10se30sJ2FyZ3MnLCdrdycpO3ZhciBhcmdzPSRucy5hcmdzO2lmKGFyZ3MubGVuZ3RoPjApdmFyIGZsYWdzPWFyZ3NbMF07ZWxzZSB2YXIgZmxhZ3M9Z2V0YXR0cigkbnMua3csJ2dldCcpKCdmbGFncycsJycpO3ZhciBqc3A9bmV3IFJlZ0V4cChwYXR0ZXJuLGZsYWdzKTt2YXIganNtYXRjaD1zdHJpbmcubWF0Y2goanNwKTtpZihqc21hdGNoPT09bnVsbClyZXR1cm4gTm9uZTt2YXIgbW89bmV3IE9iamVjdCgpO21vLmdyb3VwPWZ1bmN0aW9uKCl7dmFyIHJlcz1bXTtmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKWlmKGpzbWF0Y2hbYXJndW1lbnRzW2ldXT09PXVuZGVmaW5lZClyZXMucHVzaChOb25lKTtlbHNlIHJlcy5wdXNoKGpzbWF0Y2hbYXJndW1lbnRzW2ldXSk7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpcmV0dXJuIHJlc1swXTtyZXR1cm4gdHVwbGUocmVzKTt9O21vLmdyb3Vwcz1mdW5jdGlvbihfZGVmYXVsdCl7aWYoX2RlZmF1bHQ9PT11bmRlZmluZWQpX2RlZmF1bHQ9Tm9uZTt2YXIgcmVzPVtdO2Zvcih2YXIgaT0xO2k8anNtYXRjaC5sZW5ndGg7aSsrKWlmKGpzbWF0Y2hbaV09PT11bmRlZmluZWQpcmVzLnB1c2goX2RlZmF1bHQpO2Vsc2UgcmVzLnB1c2goanNtYXRjaFtpXSk7cmV0dXJuIHR1cGxlKHJlcyk7fTttby5zdGFydD1mdW5jdGlvbigpe3JldHVybiBqc21hdGNoLmluZGV4O307bW8uc3RyaW5nPXN0cmluZztyZXR1cm4gSlNPYmplY3QobW8pO307b2JqLnN1Yj1mdW5jdGlvbihwYXR0ZXJuLHJlcGwsc3RyaW5nKXt2YXIgJG5zPSRNYWtlQXJncygncmUuc2VhcmNoJyxhcmd1bWVudHMsWydwYXR0ZXJuJywncmVwbCcsJ3N0cmluZyddLHt9LCdhcmdzJywna3cnKTtmb3IoJHZhciBpbiAkbnMpZXZhbCgidmFyICIrJHZhcisiPSRuc1skdmFyXSIpO3ZhciBhcmdzPSRucy5hcmdzO3ZhciBjb3VudD0kRGljdERpY3QuZ2V0KCRucy5rdywnY291bnQnLDApO3ZhciBmbGFncz0kRGljdERpY3QuZ2V0KCRucy5rdywnZmxhZ3MnLCcnKTtpZihhcmdzLmxlbmd0aD4wKXZhciBjb3VudD1hcmdzWzBdO2lmKGFyZ3MubGVuZ3RoPjEpdmFyIGZsYWdzPWFyZ3NbMV07aWYodHlwZW9mIHJlcGw9PT0ic3RyaW5nIilyZXBsPXJlcGwucmVwbGFjZSgvXFwoXGQrKS9nLCckJCQxJyk7ZWxzZSBpZih0eXBlb2YgcmVwbD09PSJmdW5jdGlvbiIpdmFyICRyZXBsMT1mdW5jdGlvbigpe3ZhciBtbz1PYmplY3QoKTttby5zdHJpbmc9YXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV07dmFyIHN0YXJ0PWFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoLTJdO3ZhciBlbmQ9c3RhcnQrYXJndW1lbnRzWzBdLmxlbmd0aDttby5zdGFydD1mdW5jdGlvbigpe3JldHVybiBzdGFydDt9O21vLmVuZD1mdW5jdGlvbigpe3JldHVybiBlbmQ7fTtncm91cHM9W107Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoLTI7aSsrKWdyb3Vwcy5wdXNoKGFyZ3VtZW50c1tpXSk7bW8uZ3JvdXBzPWZ1bmN0aW9uKF9kZWZhdWx0KXtpZihfZGVmYXVsdD09PXVuZGVmaW5lZClfZGVmYXVsdD1Ob25lO3ZhciByZXM9W107Zm9yKHZhciBpPTA7aTxncm91cHMubGVuZ3RoO2krKylpZihncm91cHNbaV09PT11bmRlZmluZWQpcmVzLnB1c2goX2RlZmF1bHQpO2Vsc2UgcmVzLnB1c2goZ3JvdXBzW2ldKTtyZXR1cm4gcmVzO307cmV0dXJuIHJlcGwoSlNPYmplY3QobW8pKTt9O2lmKGNvdW50PT0wKWZsYWdzKz0nZyc7dmFyIGpzcD1uZXcgUmVnRXhwKHBhdHRlcm4sZmxhZ3MpO2lmKHR5cGVvZiByZXBsPT09J2Z1bmN0aW9uJylyZXR1cm4gc3RyaW5nLnJlcGxhY2UoanNwLCRyZXBsMSk7ZWxzZSByZXR1cm4gc3RyaW5nLnJlcGxhY2UoanNwLHJlcGwpO307b2JqLm1hdGNoPShmdW5jdGlvbihzZWFyY2hfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKCl7cGF0dGVybj1hcmd1bWVudHNbMF07aWYocGF0dGVybi5jaGFyQXQoMCkhPT0nXicpcGF0dGVybj0nXicrcGF0dGVybjt2YXIgYXJncz1bcGF0dGVybl07Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKylhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtyZXR1cm4gc2VhcmNoX2Z1bmMuYXBwbHkobnVsbCxhcmdzKTt9O30pKG9iai5zZWFyY2gpO3JldHVybiBvYmo7fSkoKTs=',
'/libs/builtins.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXt2YXIgb2JqPXtfX2NsYXNzX186JE1vZHVsZURpY3QsX19uYW1lX186J2J1aWx0aW5zJ307dmFyIGJ1aWx0aW5fbmFtZXM9WydBcml0aG1ldGljRXJyb3InLCdBc3NlcnRpb25FcnJvcicsJ0F0dHJpYnV0ZUVycm9yJywnQmFzZUV4Y2VwdGlvbicsJ0Jsb2NraW5nSU9FcnJvcicsJ0Jyb2tlblBpcGVFcnJvcicsJ0J1ZmZlckVycm9yJywnQnl0ZXNXYXJuaW5nJywnQ2hpbGRQcm9jZXNzRXJyb3InLCdDb25uZWN0aW9uQWJvcnRlZEVycm9yJywnQ29ubmVjdGlvbkVycm9yJywnQ29ubmVjdGlvblJlZnVzZWRFcnJvcicsJ0Nvbm5lY3Rpb25SZXNldEVycm9yJywnRGVwcmVjYXRpb25XYXJuaW5nJywnRU9GRXJyb3InLCdFbGxpcHNpcycsJ0Vudmlyb25tZW50RXJyb3InLCdFeGNlcHRpb24nLCdGYWxzZScsJ0ZpbGVFeGlzdHNFcnJvcicsJ0ZpbGVOb3RGb3VuZEVycm9yJywnRmxvYXRpbmdQb2ludEVycm9yJywnRnV0dXJlV2FybmluZycsJ0dlbmVyYXRvckV4aXQnLCdJT0Vycm9yJywnSW1wb3J0RXJyb3InLCdJbXBvcnRXYXJuaW5nJywnSW5kZW50YXRpb25FcnJvcicsJ0luZGV4RXJyb3InLCdJbnRlcnJ1cHRlZEVycm9yJywnSXNBRGlyZWN0b3J5RXJyb3InLCdLZXlFcnJvcicsJ0tleWJvYXJkSW50ZXJydXB0JywnTG9va3VwRXJyb3InLCdNZW1vcnlFcnJvcicsJ05hbWVFcnJvcicsJ05vbmUnLCdOb3RBRGlyZWN0b3J5RXJyb3InLCdOb3RJbXBsZW1lbnRlZCcsJ05vdEltcGxlbWVudGVkRXJyb3InLCdPU0Vycm9yJywnT3ZlcmZsb3dFcnJvcicsJ1BlbmRpbmdEZXByZWNhdGlvbldhcm5pbmcnLCdQZXJtaXNzaW9uRXJyb3InLCdQcm9jZXNzTG9va3VwRXJyb3InLCdSZWZlcmVuY2VFcnJvcicsJ1Jlc291cmNlV2FybmluZycsJ1J1bnRpbWVFcnJvcicsJ1J1bnRpbWVXYXJuaW5nJywnU3RvcEl0ZXJhdGlvbicsJ1N5bnRheEVycm9yJywnU3ludGF4V2FybmluZycsJ1N5c3RlbUVycm9yJywnU3lzdGVtRXhpdCcsJ1RhYkVycm9yJywnVGltZW91dEVycm9yJywnVHJ1ZScsJ1R5cGVFcnJvcicsJ1VuYm91bmRMb2NhbEVycm9yJywnVW5pY29kZURlY29kZUVycm9yJywnVW5pY29kZUVuY29kZUVycm9yJywnVW5pY29kZUVycm9yJywnVW5pY29kZVRyYW5zbGF0ZUVycm9yJywnVW5pY29kZVdhcm5pbmcnLCdVc2VyV2FybmluZycsJ1ZhbHVlRXJyb3InLCdXYXJuaW5nJywnV2luZG93c0Vycm9yJywnWmVyb0RpdmlzaW9uRXJyb3InLCdfJywnX19idWlsZF9jbGFzc19fJywnX19kZWJ1Z19fJywnX19kb2NfXycsJ19faW1wb3J0X18nLCdfX25hbWVfXycsJ19fcGFja2FnZV9fJywnYWJzJywnYWxsJywnYW55JywnYXNjaWknLCdiaW4nLCdib29sJywnYnl0ZWFycmF5JywnYnl0ZXMnLCdjYWxsYWJsZScsJ2NocicsJ2NsYXNzbWV0aG9kJywnY29tcGlsZScsJ2NvbXBsZXgnLCdjb3B5cmlnaHQnLCdjcmVkaXRzJywnZGVsYXR0cicsJ2RpY3QnLCdkaXInLCdkaXZtb2QnLCdlbnVtZXJhdGUnLCdldmFsJywnZXhlYycsJ2V4aXQnLCdmaWx0ZXInLCdmbG9hdCcsJ2Zvcm1hdCcsJ2Zyb3plbnNldCcsJ2dldGF0dHInLCdnbG9iYWxzJywnaGFzYXR0cicsJ2hhc2gnLCdoZWxwJywnaGV4JywnaWQnLCdpbnB1dCcsJ2ludCcsJ2lzaW5zdGFuY2UnLCdpc3N1YmNsYXNzJywnaXRlcicsJ2xlbicsJ2xpY2Vuc2UnLCdsaXN0JywnbG9jYWxzJywnbWFwJywnbWF4JywnbWVtb3J5dmlldycsJ21pbicsJ25leHQnLCdvYmplY3QnLCdvY3QnLCdvcGVuJywnb3JkJywncG93JywncHJpbnQnLCdwcm9wZXJ0eScsJ3F1aXQnLCdyYW5nZScsJ3JlcHInLCdyZXZlcnNlZCcsJ3JvdW5kJywnc2V0Jywnc2V0YXR0cicsJ3NsaWNlJywnc29ydGVkJywnc3RhdGljbWV0aG9kJywnc3RyJywnc3VtJywnc3VwZXInLCd0dXBsZScsJ3R5cGUnLCd2YXJzJywnemlwJ107Zm9yKHZhciBpPTA7aTxidWlsdGluX25hbWVzLmxlbmd0aDtpKyspdHJ5e29ialtidWlsdGluX25hbWVzW2ldXT1ldmFsKGJ1aWx0aW5fbmFtZXNbaV0pO31jYXRjaChlcnIpe31yZXR1cm4gb2JqO30pKCk7',
'/libs/json.js':'ZnVuY3Rpb24gX3B5KG9iail7aWYob2JqPT09bnVsbClyZXR1cm4gTm9uZTtpZihpc2luc3RhbmNlKG9iaixsaXN0KSl7dmFyIHJlcz1bXTtmb3IodmFyIGk9MDtpPG9iai5sZW5ndGg7aSsrKXJlcy5wdXNoKF9weShvYmpbaV0pKTtyZXR1cm4gcmVzO31pZihvYmouX19jbGFzc19fIT09dW5kZWZpbmVkKXtpZihvYmouX19jbGFzc19fPT09bGlzdClmb3IodmFyIGk9MDtpPG9iai5sZW5ndGg7aSsrKW9ialtpXT1fcHkob2JqW2ldKTtyZXR1cm4gb2JqO31pZih0eXBlb2Ygb2JqPT09J29iamVjdCcmJm9iai5fX2NsYXNzX189PT11bmRlZmluZWQpe3ZhciByZXM9ZGljdCgpO2Zvcih2YXIgYXR0ciBpbiBvYmopZ2V0YXR0cihyZXMsJ19fc2V0aXRlbV9fJykoYXR0cixfcHkob2JqW2F0dHJdKSk7cmV0dXJuIHJlczt9cmV0dXJuIEpTT2JqZWN0KG9iaik7fWZ1bmN0aW9uIF9qcyhvYmope2lmKGlzaW5zdGFuY2Uob2JqLFtpbnQsc3RyXSkpcmV0dXJuIG9iajtlbHNlIGlmKG9iaj09PU5vbmUpcmV0dXJuIG51bGw7ZWxzZSBpZihvYmo9PT1UcnVlKXJldHVybiB0cnVlO2Vsc2UgaWYob2JqPT09RmFsc2UpcmV0dXJuIGZhbHNlO2Vsc2UgaWYoaXNpbnN0YW5jZShvYmosZmxvYXQpKXJldHVybiBvYmoudmFsdWU7ZWxzZSBpZihpc2luc3RhbmNlKG9iaixbbGlzdCx0dXBsZV0pKXt2YXIgcmVzPVtdO2Zvcih2YXIgaT0wO2k8b2JqLmxlbmd0aDtpKyspcmVzLnB1c2goX2pzKG9ialtpXSkpO3JldHVybiByZXM7fWVsc2UgaWYoaXNpbnN0YW5jZShvYmosZGljdCkpe3ZhciByZXM9bmV3IE9iamVjdCgpO2Zvcih2YXIgaT0wO2k8b2JqLiRrZXlzLmxlbmd0aDtpKyspcmVzW19qcyhvYmouJGtleXNbaV0pXT1fanMob2JqLiR2YWx1ZXNbaV0pO3JldHVybiByZXM7fWVsc2UgdGhyb3cgVHlwZUVycm9yKHN0cihvYmopKycgaXMgbm90IEpTT04gc2VyaWFsaXphYmxlJyk7fSRtb2R1bGU9e2xvYWRzOmZ1bmN0aW9uKGpzb25fb2JqKXtyZXR1cm4gX3B5KEpTT04ucGFyc2UoanNvbl9vYmopKTt9LGR1bXBzOmZ1bmN0aW9uKG9iail7cmV0dXJuIEpTT04uc3RyaW5naWZ5KF9qcyhvYmopKTt9fTs=',
'/libs/_timer.js':'JG1vZHVsZT17X19uYW1lX186J3RpbWVyJyxjbGVhcl9pbnRlcnZhbDpmdW5jdGlvbihpbnRfaWQpe3dpbmRvdy5jbGVhckludGVydmFsKGludF9pZCk7fSxjbGVhcl90aW1lb3V0OmZ1bmN0aW9uKHRpbWVvdXRfaWQpe3dpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dF9pZCk7fSxzZXRfaW50ZXJ2YWw6ZnVuY3Rpb24oZnVuYyxpbnRlcnZhbCl7cmV0dXJuIGludCh3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuYyxpbnRlcnZhbCkpO30sc2V0X3RpbWVvdXQ6ZnVuY3Rpb24oZnVuYyxpbnRlcnZhbCl7d2luZG93LnNldFRpbWVvdXQoZnVuYyxpbnRlcnZhbCk7fX07',
'/libs/_svg.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXskc3ZnTlM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIjskeGxpbmtOUz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI7ZnVuY3Rpb24gJFNWR1RhZyh0YWdfbmFtZSxhcmdzKXt2YXIgJGk9bnVsbDt2YXIgJG9iaj10aGlzO3ZhciBvYmo9JERPTU5vZGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCRzdmdOUyx0YWdfbmFtZSkpO2lmKGFyZ3MhPXVuZGVmaW5lZCYmYXJncy5sZW5ndGg+MCl7JHN0YXJ0PTA7JGZpcnN0PWFyZ3NbMF07aWYoJGZpcnN0Ll9fY2xhc3NfXyE9PSRLdyl7JHN0YXJ0PTE7aWYoaXNpbnN0YW5jZSgkZmlyc3QsW3N0cixpbnQsZmxvYXRdKSl7dHh0PWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHN0cigkZmlyc3QpKTtvYmouZWx0LmFwcGVuZENoaWxkKHR4dCk7fWVsc2UgaWYoJGZpcnN0Ll9fY2xhc3NfXz09PSRUYWdTdW1EaWN0KWZvcigkaT0wOyRpPCRmaXJzdC5jaGlsZHJlbi5sZW5ndGg7JGkrKylvYmouZWx0LmFwcGVuZENoaWxkKCRmaXJzdC5jaGlsZHJlblskaV0pO2Vsc2UgdHJ5e29iai5lbHQuYXBwZW5kQ2hpbGQoJGZpcnN0LmVsdCk7fWNhdGNoKGVycil7JHJhaXNlKCdWYWx1ZUVycm9yJywnd3JvbmcgZWxlbWVudCAnKyRmaXJzdCk7fX1mb3IoJGk9JHN0YXJ0OyRpPGFyZ3MubGVuZ3RoOyRpKyspeyRhcmc9YXJnc1skaV07aWYoJGFyZyYmJGFyZy5fX2NsYXNzX189PT0kS3cpaWYoJGFyZy5uYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyKDAsMik9PSJvbiIpZXZhbCgnRE9NTm9kZS5iaW5kKG9iaiwiJyskYXJnLm5hbWUudG9Mb3dlckNhc2UoKS5zdWJzdHIoMikrJyIsZnVuY3Rpb24oKXsnKyRhcmcudmFsdWUrJ30pJyk7ZWxzZSBpZigkYXJnLm5hbWUudG9Mb3dlckNhc2UoKT09InN0eWxlIilET01Ob2RlLnNldF9zdHlsZShvYmosJGFyZy52YWx1ZSk7ZWxzZSBpZigkYXJnLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJocmVmIikhPT0tMSlvYmouZWx0LnNldEF0dHJpYnV0ZU5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwiaHJlZiIsJGFyZy52YWx1ZSk7ZWxzZSBpZigkYXJnLnZhbHVlIT09ZmFsc2Upb2JqLmVsdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCRhcmcubmFtZS5yZXBsYWNlKCdfJywnLScpLCRhcmcudmFsdWUpO319cmV0dXJuIG9iajt9dmFyICRzdmdfdGFncz1bJ2EnLCdhbHRHbHlwaCcsJ2FsdEdseXBoRGVmJywnYWx0R2x5cGhJdGVtJywnYW5pbWF0ZScsJ2FuaW1hdGVDb2xvcicsJ2FuaW1hdGVNb3Rpb24nLCdhbmltYXRlVHJhbnNmb3JtJywnY2lyY2xlJywnY2xpcFBhdGgnLCdjb2xvcl9wcm9maWxlJywnY3Vyc29yJywnZGVmcycsJ2Rlc2MnLCdlbGxpcHNlJywnZmVCbGVuZCcsJ2cnLCdpbWFnZScsJ2xpbmUnLCdsaW5lYXJHcmFkaWVudCcsJ21hcmtlcicsJ21hc2snLCdwYXRoJywncGF0dGVybicsJ3BvbHlnb24nLCdwb2x5bGluZScsJ3JhZGlhbEdyYWRpZW50JywncmVjdCcsJ3N0b3AnLCdzdmcnLCd0ZXh0JywndHJlZicsJ3RzcGFuJywndXNlJ107JHN2Zz1mdW5jdGlvbigpe3JldHVybiAkU1ZHVGFnKCdYJyxhcmd1bWVudHMpO307JHN2Zys9Jyc7dmFyIG9iaj1uZXcgT2JqZWN0KCk7Zm9yKHZhciBpPTA7aTwkc3ZnX3RhZ3MubGVuZ3RoO2krKyl7dmFyIHRhZz0kc3ZnX3RhZ3NbaV07ZXZhbCgnb2JqLicrdGFnKyc9Jyskc3ZnLnJlcGxhY2UoJ1gnLHRhZykpO31vYmouX19nZXRhdHRyX189ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fTtyZXR1cm4gb2JqO30pKCk7',
'/libs/javascript.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmdW5jdGlvbiAkYXBwbHlUb0NvbnN0cnVjdG9yKGNvbnN0cnVjdG9yLGFyZ0FycmF5KXt2YXIgYXJncz1bbnVsbF0uY29uY2F0KGFyZ0FycmF5KTt2YXIgZmFjdG9yeUZ1bmN0aW9uPWNvbnN0cnVjdG9yLmJpbmQuYXBwbHkoY29uc3RydWN0b3IsYXJncyk7cmV0dXJuIG5ldyBmYWN0b3J5RnVuY3Rpb24oKTt9JEpTQ29uc3RydWN0b3JEaWN0PXtfX2NsYXNzX186JHR5cGUsX19uYW1lX186J0pTQ29uc3RydWN0b3InfTskSlNDb25zdHJ1Y3RvckRpY3QuX19jYWxsX189ZnVuY3Rpb24oc2VsZil7dmFyIGFyZ3M9W107Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIGFyZz1hcmd1bWVudHNbaV07aWYoYXJnJiYoYXJnLl9fY2xhc3NfXz09PSRKU09iamVjdERpY3R8fGFyZy5fX2NsYXNzX189PT0kSlNDb25zdHJ1Y3RvckRpY3QpKWFyZ3MucHVzaChhcmcuanMpO2Vsc2UgaWYoaXNpbnN0YW5jZShhcmcsZGljdCkpe3ZhciBvYmo9bmV3IE9iamVjdCgpO2Zvcih2YXIgaj0wO2o8YXJnLiRrZXlzLmxlbmd0aDtqKyspb2JqW2FyZy4ka2V5c1tqXV09YXJnLiR2YWx1ZXNbal07YXJncy5wdXNoKG9iaik7fWVsc2UgYXJncy5wdXNoKGFyZyk7fXZhciByZXM9JGFwcGx5VG9Db25zdHJ1Y3RvcihzZWxmLmpzLGFyZ3MpO3JldHVybiBKU09iamVjdChyZXMpO307JEpTQ29uc3RydWN0b3JEaWN0Ll9fbXJvX189WyRKU0NvbnN0cnVjdG9yRGljdCwkT2JqZWN0RGljdF07ZnVuY3Rpb24gSlNDb25zdHJ1Y3RvcihvYmope3JldHVybntfX2NsYXNzX186JEpTQ29uc3RydWN0b3JEaWN0LGpzOm9ian07fUpTQ29uc3RydWN0b3IuX19jbGFzc19fPSRmYWN0b3J5O0pTQ29uc3RydWN0b3IuJGRpY3Q9JEpTQ29uc3RydWN0b3JEaWN0O2Z1bmN0aW9uICRKU09iamVjdChqcyl7dGhpcy5qcz1qczt0aGlzLiRkaWN0PWpzO3RoaXMuX19jbGFzc19fPSRKU09iamVjdERpY3Q7dGhpcy5fX3N0cl9fPWZ1bmN0aW9uKCl7cmV0dXJuICI8b2JqZWN0ICdKU09iamVjdCcgd3JhcHMgIit0aGlzLmpzKyI+Ijt9O3RoaXMudG9TdHJpbmc9dGhpcy5fX3N0cl9fO30kSlNPYmplY3REaWN0PXtfX2NsYXNzX186JHR5cGUsX19uYW1lX186J0pTT2JqZWN0Jyx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiAnKEpTT2JqZWN0KSc7fX07JEpTT2JqZWN0RGljdC5fX2Jvb2xfXz1mdW5jdGlvbihzZWxmKXtyZXR1cm4gbmV3IEJvb2xlYW4oc2VsZi5qcykudmFsdWVPZigpO307JEpTT2JqZWN0RGljdC5fX2dldGF0dHJpYnV0ZV9fPWZ1bmN0aW9uKG9iaixhdHRyKXtpZihvYmouanM9PT1udWxsKXJldHVybiAkT2JqZWN0RGljdC5fX2dldGF0dHJpYnV0ZV9fKE5vbmUsYXR0cik7aWYoYXR0cj09PSdfX2NsYXNzX18nKXJldHVybiAkSlNPYmplY3REaWN0O2lmKG9ialsnZ2V0XycrYXR0cl0hPT11bmRlZmluZWQpe3ZhciByZXM9b2JqWydnZXRfJythdHRyXTtpZih0eXBlb2YgcmVzPT09J2Z1bmN0aW9uJylyZXR1cm4oZnVuY3Rpb24ob2JqKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gb2JqWydnZXRfJythdHRyXS5hcHBseShvYmosYXJndW1lbnRzKTt9O30pKG9iaik7cmV0dXJuIG9ialsnZ2V0XycrYXR0cl07fWVsc2UgaWYob2JqLmpzW2F0dHJdIT09dW5kZWZpbmVkKWlmKHR5cGVvZiBvYmouanNbYXR0cl09PSdmdW5jdGlvbicpe3ZhciByZXM9ZnVuY3Rpb24oKXt2YXIgYXJncz1bXSxhcmc7Zm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7YXJnPWFyZ3VtZW50c1tpXTtpZihhcmcmJihhcmcuX19jbGFzc19fPT09JEpTT2JqZWN0RGljdHx8YXJnLl9fY2xhc3NfXz09PSRKU0NvbnN0cnVjdG9yRGljdCkpYXJncy5wdXNoKGFyZy5qcyk7ZWxzZSBhcmdzLnB1c2goYXJnKTt9dmFyIHJlcz1vYmouanNbYXR0cl0uYXBwbHkob2JqLmpzLGFyZ3MpO2lmKHR5cGVvZiByZXM9PSdvYmplY3QnKXJldHVybiBKU09iamVjdChyZXMpO2Vsc2UgaWYocmVzPT09dW5kZWZpbmVkKXJldHVybiBOb25lO2Vsc2UgcmV0dXJuICRKUzJQeShyZXMpO307cmVzLl9fcmVwcl9fPWZ1bmN0aW9uKCl7cmV0dXJuICc8ZnVuY3Rpb24gJythdHRyKyc+Jzt9O3Jlcy5fX3N0cl9fPWZ1bmN0aW9uKCl7cmV0dXJuICc8ZnVuY3Rpb24gJythdHRyKyc+Jzt9O3JldHVybiByZXM7fWVsc2UgcmV0dXJuICRKUzJQeShvYmouanNbYXR0cl0pO2Vsc2UgaWYob2JqLmpzPT09d2luZG93JiZhdHRyPT09JyQkbG9jYXRpb24nKXJldHVybiAkTG9jYXRpb24oKTt2YXIgcmVzO3ZhciBtcm89WyRKU09iamVjdERpY3QsJE9iamVjdERpY3RdO2Zvcih2YXIgaT0wO2k8bXJvLmxlbmd0aDtpKyspe3ZhciB2PW1yb1tpXVthdHRyXTtpZih2IT09dW5kZWZpbmVkKXtyZXM9djticmVhazt9fWlmKHJlcyE9PXVuZGVmaW5lZCl7aWYodHlwZW9mIHJlcz09PSdmdW5jdGlvbicpcmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGFyZ3M9W29ial0sYXJnO2Zvcih2YXIgaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe2FyZz1hcmd1bWVudHNbaV07aWYoYXJnJiYoYXJnLl9fY2xhc3NfXz09PSRKU09iamVjdERpY3R8fGFyZy5fX2NsYXNzX189PT0kSlNDb25zdHJ1Y3RvckRpY3QpKWFyZ3MucHVzaChhcmcuanMpO2Vsc2UgYXJncy5wdXNoKGFyZyk7fXJldHVybiByZXMuYXBwbHkob2JqLGFyZ3MpO307cmV0dXJuICRKUzJQeShyZXMpO31lbHNlIHRocm93IEF0dHJpYnV0ZUVycm9yKCJubyBhdHRyaWJ1dGUgIithdHRyKycgZm9yICcrdGhpcyk7fTskSlNPYmplY3REaWN0Ll9fZ2V0aXRlbV9fPWZ1bmN0aW9uKHNlbGYscmFuayl7dHJ5e3JldHVybiBnZXRhdHRyKHNlbGYuanMsJ19fZ2V0aXRlbV9fJykocmFuayk7fWNhdGNoKGVycil7Y29uc29sZS5sb2coJ2VyciBpbiBKU09iamVjdC5fX2dldGl0ZW1fXyA6ICcrZXJyKTt0aHJvdyBBdHRyaWJ1dGVFcnJvcihzZWxmKycgaGFzIG5vIGF0dHJpYnV0ZSBfX2dldGl0ZW1fXycpO319OyRKU09iamVjdERpY3QuX19pdGVyX189ZnVuY3Rpb24oc2VsZil7dmFyIHJlcz17X19jbGFzc19fOkpTT2JqZWN0LF9fZ2V0YXR0cl9fOmZ1bmN0aW9uKGF0dHIpe3JldHVybiByZXNbYXR0cl07fSxfX2l0ZXJfXzpmdW5jdGlvbigpe3JldHVybiByZXM7fSxfX25leHRfXzpmdW5jdGlvbigpe3Jlcy5jb3VudGVyKys7aWYocmVzLmNvdW50ZXI8c2VsZi5qcy5sZW5ndGgpcmV0dXJuIHNlbGYuanNbcmVzLmNvdW50ZXJdO2Vsc2UgdGhyb3cgU3RvcEl0ZXJhdGlvbigiU3RvcEl0ZXJhdGlvbiIpO30sX19yZXByX186ZnVuY3Rpb24oKXtyZXR1cm4gIjxKU09iamVjdCBpdGVyYXRvciBvYmplY3Q+Ijt9LF9fc3RyX186ZnVuY3Rpb24oKXtyZXR1cm4gIjxKU09iamVjdCBpdGVyYXRvciBvYmplY3Q+Ijt9LGNvdW50ZXI6LTF9O3JldHVybiByZXM7fTskSlNPYmplY3REaWN0Ll9fbGVuX189ZnVuY3Rpb24oc2VsZil7dHJ5e3JldHVybiBnZXRhdHRyKHNlbGYuanMsJ19fbGVuX18nKSgpO31jYXRjaChlcnIpe2NvbnNvbGUubG9nKCdlcnIgaW4gSlNPYmplY3QuX19sZW5fXyA6ICcrZXJyKTt0aHJvdyBBdHRyaWJ1dGVFcnJvcih0aGlzKycgaGFzIG5vIGF0dHJpYnV0ZSBfX2xlbl9fJyk7fX07JEpTT2JqZWN0RGljdC5fX21yb19fPVskSlNPYmplY3REaWN0LCRPYmplY3REaWN0XTskSlNPYmplY3REaWN0Ll9fc2V0YXR0cl9fPWZ1bmN0aW9uKHNlbGYsYXR0cix2YWx1ZSl7aWYoaXNpbnN0YW5jZSh2YWx1ZSxKU09iamVjdCkpc2VsZi5qc1thdHRyXT12YWx1ZS5qcztlbHNlIHNlbGYuanNbYXR0cl09dmFsdWU7fTtmdW5jdGlvbiBKU09iamVjdChvYmope2lmKG9iaj09PW51bGwpcmV0dXJuIG5ldyAkSlNPYmplY3Qob2JqKTtpZihvYmouX19jbGFzc19fPT09JExpc3REaWN0KWlmKG9iai5fX2JyeXRob25fXylyZXR1cm4gb2JqO2Vsc2UgcmV0dXJuIG5ldyAkSlNPYmplY3Qob2JqKTtpZihvYmouX19jbGFzc19fIT09dW5kZWZpbmVkJiYodHlwZW9mIG9iaiE9PSdmdW5jdGlvbicpKXJldHVybiBvYmo7cmV0dXJuIG5ldyAkSlNPYmplY3Qob2JqKTt9SlNPYmplY3QuX19jbGFzc19fPSRmYWN0b3J5O0pTT2JqZWN0LiRkaWN0PSRKU09iamVjdERpY3Q7cmV0dXJue0pTT2JqZWN0OkpTT2JqZWN0LEpTQ29uc3RydWN0b3I6SlNDb25zdHJ1Y3Rvcn07fSkoKTs=',
'/libs/time.js':'JG1vZHVsZT17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fSxfX25hbWVfXzondGltZScsY3RpbWU6ZnVuY3Rpb24odGltZXN0YW1wKXtpZih0aW1lc3RhbXA9PT11bmRlZmluZWQpdGltZXN0YW1wPWludChuZXcgRGF0ZSgpLmdldFRpbWUoKS8xMDAwKTt2YXIgZD1uZXcgRGF0ZSgwKTtkLnNldFVUQ1NlY29uZHModGltZXN0YW1wKTtyZXR1cm4gZC50b1VUQ1N0cmluZygpO30sZ210aW1lOmZ1bmN0aW9uKCl7dmFyIGQ9bmV3IERhdGUoKTtyZXR1cm4gbGlzdChbZC5nZXRGdWxsWWVhcigpLGQuZ2V0TW9udGgoKSsxLGQuZ2V0RGF0ZSgpLGQuZ2V0SG91cnMoKSxkLmdldE1pbnV0ZXMoKSxkLmdldFNlY29uZHMoKSxkLmdldERheSgpLDAsMF0pO30scGVyZl9jb3VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGZsb2F0KG5ldyBEYXRlKCkuZ2V0VGltZSgpLzEwMDAuMCk7fSxsb2NhbHRpbWU6ZnVuY3Rpb24oc2Vjcyl7dmFyIGQ9bmV3IERhdGUoKTtpZihzZWNzPT09dW5kZWZpbmVkfHxzZWNzPT09Tm9uZSlyZXR1cm4gZC5nZXRUaW1lKCk7dmFyIGphbj1uZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksMCwxKTt2YXIganVsPW5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSw2LDEpO3ZhciBkc3Q9aW50KGQuZ2V0VGltZXpvbmVPZmZzZXQoKTxNYXRoLm1heChqYW4uZ2V0VGltZXpvbmVPZmZzZXQoKSxqdWwuZ2V0VGltZXpvbmVPZmZzZXQoKSkpO3JldHVybiBsaXN0KFtkLmdldEZ1bGxZZWFyKCksZC5nZXRNb250aCgpKzEsZC5nZXREYXRlKCksZC5nZXRIb3VycygpLGQuZ2V0TWludXRlcygpLGQuZ2V0U2Vjb25kcygpLGQuZ2V0RGF5KCksMCxkc3RdKTt9LHRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4gZmxvYXQoKG5ldyBEYXRlKCkuZ2V0VGltZSgpKS8xMDAwKTt9LHN0cmZ0aW1lOmZ1bmN0aW9uKGZvcm1hdCxhcmcpe2Z1bmN0aW9uIG5zKGFyZyxuYil7dmFyIHJlcz1hcmcudG9TdHJpbmcoKTt3aGlsZShyZXMubGVuZ3RoPG5iKXJlcz0nMCcrcmVzO3JldHVybiByZXM7fWlmKGFyZyl2YXIgb2JqPW5ldyBEYXRlKGFyZ1swXSxhcmdbMV0tMSxhcmdbMl0sYXJnWzNdLGFyZ1s0XSxhcmdbNV0sYXJnWzZdKTtlbHNlIHZhciBvYmo9bmV3IERhdGUoKTt2YXIgYWJiX3dlZWtkYXlzPVsnU3UnLCdNbycsJ1R1JywnV2UnLCdUaCcsJ0ZyJywnU2EnXTt2YXIgZnVsbF93ZWVrZGF5cz1bJ1N1bmRheScsJ01vbmRheScsJ1R1ZXNkYXknLCdXZWRuZXNkYXknLCdUaHVyc2RheScsJ0ZyaWRheScsJ1NhdHVyZGF5J107dmFyIGFiYl9tb250aHM9WydKYW4nLCdGZWInLCdNYXInLCdBcHInLCdNYXknLCdKdW4nLCdKdWwnLCdBdWcnLCdTZXAnLCdPY3QnLCdOb3YnLCdEZWMnXTt2YXIgZnVsbF9tb250aHM9WydKYW51YXJ5JywnRmVicnVhcnknLCdNYXJjaCcsJ0FwcmlsJywnTWF5JywnSnVuZScsJ0p1bHknLCdBdWd1c3QnLCdTZXB0ZW1iZXInLCdPY3RvYmVyJywnTm92ZW1iZXInLCdEZWNlbWJlciddO3ZhciByZXM9Zm9ybWF0O3Jlcz1yZXMucmVwbGFjZSgvJUgvLG5zKG9iai5nZXRIb3VycygpLDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVNLyxucyhvYmouZ2V0TWludXRlcygpLDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVTLyxucyhvYmouZ2V0U2Vjb25kcygpLDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVZLyxucyhvYmouZ2V0RnVsbFllYXIoKSw0KSk7cmVzPXJlcy5yZXBsYWNlKC8leS8sbnMob2JqLmdldEZ1bGxZZWFyKCksNCkuc3Vic3RyKDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVtLyxucyhvYmouZ2V0TW9udGgoKSsxLDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVkLyxucyhvYmouZ2V0RGF0ZSgpLDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVhLyxhYmJfd2Vla2RheXNbb2JqLmdldERheSgpXSk7cmVzPXJlcy5yZXBsYWNlKC8lQS8sZnVsbF93ZWVrZGF5c1tvYmouZ2V0RGF5KCldKTtyZXM9cmVzLnJlcGxhY2UoLyViLyxhYmJfbW9udGhzW29iai5nZXRNb250aCgpXSk7cmVzPXJlcy5yZXBsYWNlKC8lQi8sZnVsbF9tb250aHNbb2JqLmdldE1vbnRoKCldKTtyZXR1cm4gcmVzO30sc3RydWN0X3RpbWU6ZnVuY3Rpb24oYXJnKXtpZighaXNpbnN0YW5jZShhcmcsW3R1cGxlLGxpc3RdKSl0aHJvdyBUeXBlRXJyb3IoJ2NvbnN0cnVjdG9yIHJlcXVpcmVzIGEgc2VxdWVuY2UnKTtpZihsZW4oYXJnKSE9OSl0aHJvdyBUeXBlRXJyb3IoInRpbWUuc3RydWN0X3RpbWUoKSB0YWtlcyBhIDktc2VxdWVuY2UgKCIrbGVuKGFyZykrIi1zZXF1ZW5jZSBnaXZlbiIpO3ZhciByZXM9YXJnO3ZhciBuYW1lcz1bJ3RtX3llYXInLCd0bV9tb24nLCd0bV9tZGF5JywndG1faG91cicsJ3RtX21pbicsJ3RtX3NlYycsJ3RtX3dkYXknLCd0bV95ZGF5JywndG1faXNkc3QnLCd0bV96b25lJywndG1fZ210b2ZmJ107cmVzLl9fZ2V0YXR0cl9fPWZ1bmN0aW9uKGF0dHIpe3ZhciBpeD1uYW1lcy5pbmRleE9mKGF0dHIpO2lmKGl4Pi0xKXJldHVybiBhcmcuX19nZXRpdGVtX18oaXgpO2lmKHR5cGVvZiByZXNbYXR0cl09PT0nZnVuY3Rpb24nKXJldHVybihmdW5jdGlvbihvYmope3JldHVybiBmdW5jdGlvbigpe3JldHVybiBvYmpbYXR0cl0uYXBwbHkob2JqLGFyZ3VtZW50cyk7fTt9KShyZXMpO2Vsc2UgaWYocmVzW2F0dHJdIT09dW5kZWZpbmVkKXJldHVybiByZXNbYXR0cl07ZWxzZSB0aHJvdyBBdHRyaWJ1dGVFcnJvcigib2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgJyIrYXR0cisiJyIpO307cmV0dXJuIHJlczt9fTs=',
'/libs/_websocket.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXskV2ViU29ja2V0RGljdD17X19jbGFzc19fOiR0eXBlLF9fbmFtZV9fOidXZWJTb2NrZXQnfTskV2ViU29ja2V0RGljdC5iaW5kPWZ1bmN0aW9uKHNlbGYsZXZlbnQsY2FsbGJhY2spe3NlbGYuJHdzWydvbicrZXZlbnRdPWNhbGxiYWNrO307JFdlYlNvY2tldERpY3Quc2VuZD1mdW5jdGlvbihzZWxmLGRhdGEpe3NlbGYuJHdzLnNlbmQoZGF0YSk7fTskV2ViU29ja2V0RGljdC5jbG9zZT1mdW5jdGlvbihzZWxmKXtzZWxmLiR3cy5jbG9zZSgpO307JFdlYlNvY2tldERpY3QuX19tcm9fXz1bJFdlYlNvY2tldERpY3QsJE9iamVjdERpY3RdO2Z1bmN0aW9uIHdlYnNvY2tldChob3N0KXt2YXIgJHNvY2tldD1uZXcgV2ViU29ja2V0KGhvc3QpO3ZhciByZXM9e19fY2xhc3NfXzokV2ViU29ja2V0RGljdCwkd3M6JHNvY2tldH07cmVzLiR3ZWJzb2NrZXQ9JHNvY2tldDtyZXR1cm4gcmVzO313ZWJzb2NrZXQuX19jbGFzc19fPSRmYWN0b3J5O3dlYnNvY2tldC4kZGljdD0kV2ViU29ja2V0RGljdDtyZXR1cm57d2Vic29ja2V0OndlYnNvY2tldH07fSkoKTs=',
'/libs/_ajax.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXskWE1MSHR0cERpY3Q9e19fY2xhc3NfXzokdHlwZSxfX25hbWVfXzonWE1MSHR0cCd9OyRYTUxIdHRwRGljdC5fX2dldGF0dHJpYnV0ZV9fPWZ1bmN0aW9uKHNlbGYsYXR0cil7aWYoWydoZWFkZXJzJywndGV4dCcsJ3htbCddLmluZGV4T2YoYXR0cik+LTEpcmV0dXJuICRYTUxIdHRwRGljdFthdHRyXShzZWxmKTtyZXR1cm4gJE9iamVjdERpY3QuX19nZXRhdHRyaWJ1dGVfXyhzZWxmLGF0dHIpO307JFhNTEh0dHBEaWN0Ll9fbXJvX189WyRYTUxIdHRwRGljdCwkT2JqZWN0RGljdF07JFhNTEh0dHBEaWN0Ll9fcmVwcl9fPWZ1bmN0aW9uKHNlbGYpe3JldHVybiAnPG9iamVjdCBYTUxIdHRwPic7fTskWE1MSHR0cERpY3QuX19zdHJfXz0kWE1MSHR0cERpY3QudG9TdHJpbmc9JFhNTEh0dHBEaWN0Ll9fcmVwcl9fOyRYTUxIdHRwRGljdC50ZXh0PWZ1bmN0aW9uKHNlbGYpe3JldHVybiBzZWxmLnJlc3BvbnNlVGV4dDt9OyRYTUxIdHRwRGljdC54bWw9ZnVuY3Rpb24oc2VsZil7cmV0dXJuICREb21PYmplY3Qoc2VsZi5yZXNwb25zZVhNTCk7fTskWE1MSHR0cERpY3QuaGVhZGVycz1mdW5jdGlvbihzZWxmKXtyZXR1cm4gbGlzdChzZWxmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnNwbGl0KCdcbicpKTt9OyRYTUxIdHRwRGljdC5nZXRfaGVhZGVyPWZ1bmN0aW9uKCl7dmFyIHJlcW9iaj1zZWxmO3JldHVybiBmdW5jdGlvbihoZWFkZXIpe3JldHVybiByZXFvYmouZ2V0UmVzcG9uc2VIZWFkZXIoaGVhZGVyKTt9O307JEFqYXhEaWN0PXtfX2NsYXNzX186JHR5cGUsX19uYW1lX186J2FqYXgnfTskQWpheERpY3QuX19tcm9fXz1bJEFqYXhEaWN0LCRPYmplY3REaWN0XTskQWpheERpY3QuX19yZXByX189ZnVuY3Rpb24oc2VsZil7cmV0dXJuICc8b2JqZWN0IEFqYXg+Jzt9OyRBamF4RGljdC5fX3N0cl9fPSRBamF4RGljdC50b1N0cmluZz0kQWpheERpY3QuX19yZXByX187JEFqYXhEaWN0LmJpbmQ9ZnVuY3Rpb24oc2VsZixldnQsZnVuYyl7c2VsZlsnb25fJytldnRdPWZ1bmM7fTskQWpheERpY3Qub3Blbj1mdW5jdGlvbihzZWxmLG1ldGhvZCx1cmwsYXN5bmMpe3NlbGYuJHhtbGh0dHAub3BlbihtZXRob2QsdXJsLGFzeW5jKTt9OyRBamF4RGljdC5zZW5kPWZ1bmN0aW9uKHNlbGYscGFyYW1zKXt2YXIgcmVzPScnO2lmKCFwYXJhbXN8fHBhcmFtcy4ka2V5cy5sZW5ndGg9PTApe3NlbGYuJHhtbGh0dHAuc2VuZCgpO3JldHVybjt9ZWxzZSBpZihpc2luc3RhbmNlKHBhcmFtcyxzdHIpKXJlcz1wYXJhbXM7ZWxzZSBpZihpc2luc3RhbmNlKHBhcmFtcyxkaWN0KSl7Zm9yKGk9MDtpPHBhcmFtcy4ka2V5cy5sZW5ndGg7aSsrKXJlcys9ZW5jb2RlVVJJQ29tcG9uZW50KHN0cihwYXJhbXMuJGtleXNbaV0pKSsnPScrZW5jb2RlVVJJQ29tcG9uZW50KHN0cihwYXJhbXMuJHZhbHVlc1tpXSkpKycmJztyZXM9cmVzLnN1YnN0cigwLHJlcy5sZW5ndGgtMSk7fWVsc2UgdGhyb3cgVHlwZUVycm9yKCJzZW5kKCkgYXJndW1lbnQgbXVzdCBiZSBzdHJpbmcgb3IgZGljdG9uYXJ5LCBub3QgJyIrc3RyKHBhcmFtcy5fX2NsYXNzX18pKyInIik7c2VsZi4keG1saHR0cC5zZW5kKHJlcyk7fTskQWpheERpY3Quc2V0X2hlYWRlcj1mdW5jdGlvbihzZWxmLGtleSx2YWx1ZSl7c2VsZi4keG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKGtleSx2YWx1ZSk7fTskQWpheERpY3Quc2V0X3RpbWVvdXQ9ZnVuY3Rpb24oc2VsZixzZWNvbmRzLGZ1bmMpe3NlbGYuJHhtbGh0dHAuJHJlcXVlc3RUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi4keG1saHR0cC5hYm9ydCgpO2Z1bmMoKTt9LHNlY29uZHMqMTAwMCk7fTtmdW5jdGlvbiBhamF4KCl7dmFyIHJlcz17X19jbGFzc19fOiRBamF4RGljdH07aWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KXZhciAkeG1saHR0cD1uZXcgWE1MSHR0cFJlcXVlc3QoKTtlbHNlIHZhciAkeG1saHR0cD1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKTskeG1saHR0cC4kcmVxdWVzdFRpbWVyPW51bGw7JHhtbGh0dHAuX19jbGFzc19fPSRYTUxIdHRwRGljdDskeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgc3RhdGU9dGhpcy5yZWFkeVN0YXRlO3ZhciByZXE9dGhpcy4kYWpheDt2YXIgdGltZXI9dGhpcy4kcmVxdWVzdFRpbWVyO3ZhciBvYmo9dGhpcztpZihzdGF0ZT09PTAmJidvbl91bmluaXRpYWxpemVkJyBpbiByZXEpcmVxLm9uX3VuaW5pdGlhbGl6ZWQob2JqKTtlbHNlIGlmKHN0YXRlPT09MSYmJ29uX2xvYWRpbmcnIGluIHJlcSlyZXEub25fbG9hZGluZyhvYmopO2Vsc2UgaWYoc3RhdGU9PT0yJiYnb25fbG9hZGVkJyBpbiByZXEpcmVxLm9uX2xvYWRlZChvYmopO2Vsc2UgaWYoc3RhdGU9PT0zJiYnb25faW50ZXJhY3RpdmUnIGluIHJlcSlyZXEub25faW50ZXJhY3RpdmUob2JqKTtlbHNlIGlmKHN0YXRlPT09NCYmJ29uX2NvbXBsZXRlJyBpbiByZXEpe2lmKHRpbWVyIT09bnVsbCl3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtyZXEub25fY29tcGxldGUob2JqKTt9fTskeG1saHR0cC4kYWpheD1yZXM7cmVzLiR4bWxodHRwPSR4bWxodHRwO3JldHVybiByZXM7fWFqYXguX19jbGFzc19fPSRmYWN0b3J5O2FqYXguJGRpY3Q9JEFqYXhEaWN0O3JldHVybnthamF4OmFqYXh9O30pKCk7',
'/libs/_browser.js':'JG1vZHVsZT17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fSxhbGVydDpmdW5jdGlvbihtZXNzYWdlKXt3aW5kb3cuYWxlcnQobWVzc2FnZSk7fSxjb25maXJtOmZ1bmN0aW9uKG1lc3NhZ2Upe3JldHVybiBKU09iamVjdCh3aW5kb3cuY29uZmlybShtZXNzYWdlKSk7fSxkb2M6JERPTU5vZGUoZG9jdW1lbnQpLG1vdXNlQ29vcmRzOmZ1bmN0aW9uKGV2KXtyZXR1cm4gSlNPYmplY3QoJG1vdXNlQ29vcmRzKGV2KSk7fSxwcm9tcHQ6ZnVuY3Rpb24obWVzc2FnZSxkZWZhdWx0X3ZhbHVlKXtyZXR1cm4gSlNPYmplY3Qod2luZG93LnByb21wdChtZXNzYWdlLGRlZmF1bHRfdmFsdWUpKTt9LHdpbjpKU09iamVjdCh3aW5kb3cpfTskbW9kdWxlLl9fY2xhc3NfXz0kbW9kdWxlOyRtb2R1bGUuX19zdHJfXz1mdW5jdGlvbigpe3JldHVybiAiPG1vZHVsZSAnYnJvd3Nlcic+Ijt9Ow==',
'/libs/random.js':'JG1vZHVsZT17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fSxyYW5kb206ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPjApdGhyb3cgVHlwZUVycm9yKCJyYW5kb20oKSB0YWtlcyBubyBhcmd1bWVudHMgKCIrYXJndW1lbnRzLmxlbmd0aCsiIGdpdmVuKSIpO2Vsc2UgcmV0dXJuIGZsb2F0KE1hdGgucmFuZG9tKCkpO30scmFuZGludDpmdW5jdGlvbihhLGIpe3JldHVybiBpbnQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihiLWErMSkrYSkpO30scmFuZHJhbmdlOmZ1bmN0aW9uKHN0YXJ0LHN0b3Asc3RlcCl7aWYoc3RlcD09PXVuZGVmaW5lZClzdGVwPTE7ZWxzZSBpZihzdGVwPT0wKXt9aWYoc3RvcD09PXVuZGVmaW5lZCl7c3RvcD1zdGFydDtzdGFydD0wO312YXIgd2lkdGg9c3RvcC1zdGFydDtpZihzdGVwPT0xJiZ3aWR0aD4wKXJldHVybiBzdGFydCtpbnQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKndpZHRoKSk7ZWxzZXt9dmFyIG47aWYoc3RlcD4wKW49TWF0aC5mbG9vcigod2lkdGgrc3RlcC0xKS9zdGVwKTtlbHNlIG49TWF0aC5mbG9vcigod2lkdGgrc3RlcCsxKS9zdGVwKTtyZXR1cm4gc3RhcnQrc3RlcCppbnQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKm4pKTt9LHNodWZmbGU6ZnVuY3Rpb24oeCxybmQpe2lmKHgubGVuZ3RoPD0xKXJldHVybiB4O2lmKHJuZD09PXVuZGVmaW5lZClybmQ9TWF0aC5yYW5kb207Zm9yKHZhciBqLG8saT14Lmxlbmd0aDtpO2o9cGFyc2VJbnQocm5kKCkqaSksbz14Wy0taV0seFtpXT14W2pdLHhbal09byk7fX07JG1vZHVsZS5fX2NsYXNzX189JG1vZHVsZTskbW9kdWxlLl9fc3RyX189ZnVuY3Rpb24oKXtyZXR1cm4gIjxtb2R1bGUgJ3JhbmRvbSc+Ijt9Ow==',
'/libs/math.js':'dmFyIGZsb2F0X2NoZWNrPWZ1bmN0aW9uKHgpe2lmKGlzaW5zdGFuY2UoeCxmbG9hdCkpcmV0dXJuIHgudmFsdWU7cmV0dXJuIHg7fTt2YXIgaXNpbmY9ZnVuY3Rpb24oeCl7dmFyIHgxPWZsb2F0X2NoZWNrKHgpO3JldHVybiB4MT09LUluZmluaXR5fHx4MT09SW5maW5pdHl8fHgxPT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl8fHgxPT1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7fTskbW9kdWxlPXtfX2dldGF0dHJfXzpmdW5jdGlvbihhdHRyKXt2YXIgcmVzPXRoaXNbYXR0cl07aWYocmVzPT09dW5kZWZpbmVkKSRyYWlzZSgnQXR0cmlidXRlRXJyb3InLCdtb2R1bGUgbWF0aCBoYXMgbm8gYXR0cmlidXRlICcrYXR0cik7cmV0dXJuIHJlczt9LGFjb3M6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGguYWNvcyhmbG9hdF9jaGVjayh4KSkpO30sYWNvc2g6ZnVuY3Rpb24oeCl7aWYoaXNpbmYoeCkpcmV0dXJuIGZsb2F0KCdpbmYnKTt2YXIgeT1mbG9hdF9jaGVjayh4KTtyZXR1cm4gZmxvYXQoTWF0aC5sb2coeStNYXRoLnNxcnQoeSp5LTEpKSk7fSxhc2luOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLmFzaW4oZmxvYXRfY2hlY2soeCkpKTt9LGFzaW5oOmZ1bmN0aW9uKHgpe2lmKGlzaW5mKHgpKXJldHVybiBmbG9hdCgnaW5mJyk7dmFyIHk9ZmxvYXRfY2hlY2soeCk7cmV0dXJuIGZsb2F0KE1hdGgubG9nKHkrTWF0aC5zcXJ0KHkqeSsxKSkpO30sYXRhbjpmdW5jdGlvbih4KXtpZihpc2luZih4KSlyZXR1cm4gZmxvYXQoTWF0aC5QSS8yKTtyZXR1cm4gZmxvYXQoTWF0aC5hdGFuKGZsb2F0X2NoZWNrKHgpKSk7fSxhdGFuMjpmdW5jdGlvbih5LHgpe3JldHVybiBmbG9hdChNYXRoLmF0YW4yKHkseCkpO30sYXRhbmg6ZnVuY3Rpb24oeCl7dmFyIHk9ZmxvYXRfY2hlY2soeCk7aWYoeT09MClyZXR1cm4gMDtyZXR1cm4gZmxvYXQoMC41Kk1hdGgubG9nKCgxL3krMSkvKDEveS0xKSkpO30sY2VpbDpmdW5jdGlvbih4KXt2YXIgeT1mbG9hdF9jaGVjayh4KTtpZighaXNOYU4ocGFyc2VGbG9hdCh5KSkmJmlzRmluaXRlKHkpKXJldHVybiBpbnQoTWF0aC5jZWlsKHkpKTt0cnl7cmV0dXJuIGdldGF0dHIoeSwnX19jZWlsX18nKSgpO31jYXRjaChlcnIpeyRwb3BfZXhjKCk7fSRyYWlzZSgnVmFsdWVFcnJvcicsJ29iamVjdCBpcyBub3QgYSBudW1iZXIgYW5kIGRvZXMgbm90IGNvbnRhaW4gX19jZWlsX18nKTt9LGNvcHlzaWduOmZ1bmN0aW9uKHgseSl7dmFyIHgxPU1hdGguYWJzKGZsb2F0X2NoZWNrKHgpKTt2YXIgeTE9ZmxvYXRfY2hlY2soeSk7dmFyIHNpZ249eTE/eTE8MD8tMToxOjE7aWYoaXNpbnN0YW5jZSh4LGludCkpcmV0dXJuIHgxKnNpZ247ZWxzZSByZXR1cm4gZmxvYXQoeDEqc2lnbik7fSxjb3M6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGguY29zKGZsb2F0X2NoZWNrKHgpKSk7fSxkZWdyZWVzOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChmbG9hdF9jaGVjayh4KSoxODAvTWF0aC5QSSk7fSxlOmZsb2F0KE1hdGguRSksZXJmOmZ1bmN0aW9uKHgpe3ZhciB5PWZsb2F0X2NoZWNrKHgpO3ZhciB0PTEuMC8oMS4wKzAuNSpNYXRoLmFicyh5KSk7dmFyIGFucz0xLXQqTWF0aC5leHAoLXkqeS0xLjI2NTUxMjIzK3QqKDEuMDAwMDIzNjgrdCooMC4zNzQwOTE5Nit0KigwLjA5Njc4NDE4K3QqKC0wLjE4NjI4ODA2K3QqKDAuMjc4ODY4MDcrdCooLTEuMTM1MjAzOTgrdCooMS40ODg1MTU4Nyt0KigtMC44MjIxNTIyMyt0KjAuMTcwODcyNzcpKSkpKSkpKSk7aWYoeT49MC4wKXJldHVybiBhbnM7cmV0dXJuIC1hbnM7fSxlcmZjOmZ1bmN0aW9uKHgpe3ZhciB5PWZsb2F0X2NoZWNrKHgpO3ZhciB0PTEuMC8oMS4wKzAuNSpNYXRoLmFicyh5KSk7dmFyIGFucz0xLXQqTWF0aC5leHAoLXkqeS0xLjI2NTUxMjIzK3QqKDEuMDAwMDIzNjgrdCooMC4zNzQwOTE5Nit0KigwLjA5Njc4NDE4K3QqKC0wLjE4NjI4ODA2K3QqKDAuMjc4ODY4MDcrdCooLTEuMTM1MjAzOTgrdCooMS40ODg1MTU4Nyt0KigtMC44MjIxNTIyMyt0KjAuMTcwODcyNzcpKSkpKSkpKSk7aWYoeT49MC4wKXJldHVybiAxLWFucztyZXR1cm4gMSthbnM7fSxleHA6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGguZXhwKGZsb2F0X2NoZWNrKHgpKSk7fSxleHBtMTpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5leHAoZmxvYXRfY2hlY2soeCkpLTEpO30sZmFiczpmdW5jdGlvbih4KXtyZXR1cm4geD4wP2Zsb2F0KHgpOmZsb2F0KC14KTt9LGZhY3RvcmlhbDpmdW5jdGlvbih4KXt2YXIgeT1mbG9hdF9jaGVjayh4KTt2YXIgcj0xO2Zvcih2YXIgaT0yO2k8PXk7aSsrKXIqPWk7cmV0dXJuIHI7fSxmbG9vcjpmdW5jdGlvbih4KXtyZXR1cm4gTWF0aC5mbG9vcihmbG9hdF9jaGVjayh4KSk7fSxmbW9kOmZ1bmN0aW9uKHgseSl7cmV0dXJuIGZsb2F0KGZsb2F0X2NoZWNrKHgpJWZsb2F0X2NoZWNrKHkpKTt9LGZyZXhwOmZ1bmN0aW9uKHgpe3ZhciB4MT1mbG9hdF9jaGVjayh4KTt2YXIgZXg9TWF0aC5mbG9vcihNYXRoLmxvZyh4MSkvTWF0aC5sb2coMikpKzE7ZnJhYz14MS9NYXRoLnBvdygyLGV4KTtyZXR1cm4gW2ZyYWMsZXhdO30sZ2FtbWE6ZnVuY3Rpb24oeCl7dmFyIHk9ZmxvYXRfY2hlY2soeCk7dmFyIHo9eSsxO3ZhciBkMT1NYXRoLnNxcnQoMipNYXRoLlBJKS96O3ZhciBkMj0xLjAwMDAwMDAwMDE5MDAxNTtkMis9NzYuMTgwMDkxNzI5NDcxNDYvKHorMSk7ZDIrPS04Ni41MDUzMjAzMjk0MTY3Ny8oeisyKTtkMis9MjQuMDE0MDk4MjQwODMwOTEvKHorMyk7ZDIrPS0xLjIzMTczOTU3MjQ1MDE1NS8oeis0KTtkMis9MS4yMDg2NTA5NzM4NjYxNzlFLTMvKHorNSk7ZDIrPS01LjM5NTIzOTM4NDk1M0UtNi8oeis2KTtyZXR1cm4gZDEqZDIqTWF0aC5wb3coeis1LjUseiswLjUpKk1hdGguZXhwKC0oeis1LjUpKTt9LGh5cG90OmZ1bmN0aW9uKHgseSl7dmFyIHgxPWZsb2F0X2NoZWNrKHgpO3ZhciB5MT1mbG9hdF9jaGVjayh5KTtyZXR1cm4gZmxvYXQoTWF0aC5zcXJ0KHgxKngxK3kxKnkxKSk7fSxpc2Zpbml0ZTpmdW5jdGlvbih4KXtyZXR1cm4gaXNGaW5pdGUoZmxvYXRfY2hlY2soeCkpO30saXNpbmY6ZnVuY3Rpb24oeCl7cmV0dXJuIGlzaW5mKHgpO30saXNuYW46ZnVuY3Rpb24oeCl7cmV0dXJuIGlzTmFOKGZsb2F0X2NoZWNrKHgpKTt9LGxkZXhwOmZ1bmN0aW9uKHgsaSl7dmFyIG11bD1NYXRoLnBvdygyLGZsb2F0X2NoZWNrKGkpKTtpZihpc2luc3RhbmNlKHgsaW50KSlyZXR1cm4geCptdWw7ZWxzZSByZXR1cm4gZmxvYXQoeC52YWx1ZSptdWwpO30sbGdhbW1hOmZ1bmN0aW9uKHgpe3ZhciB5PWZsb2F0X2NoZWNrKHgpO3ZhciB6PXkrMTt2YXIgZDE9TWF0aC5zcXJ0KDIqTWF0aC5QSSkvejt2YXIgZDI9MS4wMDAwMDAwMDAxOTAwMTU7ZDIrPTc2LjE4MDA5MTcyOTQ3MTQ2Lyh6KzEpO2QyKz0tODYuNTA1MzIwMzI5NDE2NzcvKHorMik7ZDIrPTI0LjAxNDA5ODI0MDgzMDkxLyh6KzMpO2QyKz0tMS4yMzE3Mzk1NzI0NTAxNTUvKHorNCk7ZDIrPTEuMjA4NjUwOTczODY2MTc5RS0zLyh6KzUpO2QyKz0tNS4zOTUyMzkzODQ5NTNFLTYvKHorNik7cmV0dXJuIGZsb2F0KE1hdGgubG9nKE1hdGguYWJzKGQxKmQyKk1hdGgucG93KHorNS41LHorMC41KSpNYXRoLmV4cCgtKHorNS41KSkpKSk7fSxsb2c6ZnVuY3Rpb24oeCxiYXNlKXt2YXIgeDE9ZmxvYXRfY2hlY2soeCk7aWYoYmFzZT09PXVuZGVmaW5lZClyZXR1cm4gZmxvYXQoTWF0aC5sb2coeDEpKTtyZXR1cm4gZmxvYXQoTWF0aC5sb2coeDEpL01hdGgubG9nKGZsb2F0X2NoZWNrKGJhc2UpKSk7fSxsb2cxcDpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5sb2coMS4wK2Zsb2F0X2NoZWNrKHgpKSk7fSxsb2cyOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLmxvZyhmbG9hdF9jaGVjayh4KSkvTWF0aC5MTjIpO30sbG9nMTA6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGgubG9nKGZsb2F0X2NoZWNrKHgpKS9NYXRoLkxOMTApO30sbW9kZjpmdW5jdGlvbih4KXt2YXIgeDE9ZmxvYXRfY2hlY2soeCk7aWYoeDE+MCl7dmFyIGk9ZmxvYXQoeDEtTWF0aC5mbG9vcih4MSkpO3JldHVybiBbaSxmbG9hdCh4MS1pKV07fXZhciBpPWZsb2F0KHgxLU1hdGguY2VpbCh4MSkpO3JldHVybiBbaSxmbG9hdChNYXRoLmNlaWwoeDEpKV07fSxwaTpmbG9hdChNYXRoLlBJKSxwb3c6ZnVuY3Rpb24oeCx5KXtpZihpc2luc3RhbmNlKHgsaW50KSlyZXR1cm4gTWF0aC5wb3coeCxmbG9hdF9jaGVjayh5KSk7ZWxzZSByZXR1cm4gZmxvYXQoTWF0aC5wb3coeC52YWx1ZSxmbG9hdF9jaGVjayh5KSkpO30scmFkaWFuczpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoZmxvYXRfY2hlY2soeCkqTWF0aC5QSS8xODApO30sc2luOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLnNpbihmbG9hdF9jaGVjayh4KSkpO30sc3FydDpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5zcXJ0KGZsb2F0X2NoZWNrKHgpKSk7fSx0cnVuYzpmdW5jdGlvbih4KXt0cnl7cmV0dXJuIGdldGF0dHIoeCwnX190cnVuY19fJykoKTt9Y2F0Y2goZXJyKXskcG9wX2V4YygpO312YXIgeDE9ZmxvYXRfY2hlY2soeCk7aWYoIWlzTmFOKHBhcnNlRmxvYXQoeDEpKSYmaXNGaW5pdGUoeDEpKXJldHVybiBpbnQoTWF0aC5mbG9vcih4MSkpOyRyYWlzZSgnVmFsdWVFcnJvcicsJ29iamVjdCBpcyBub3QgYSBudW1iZXIgYW5kIGRvZXMgbm90IGNvbnRhaW4gX190cnVuY19fJyk7fX07Zm9yKHZhciAkYXR0ciBpbiAkbW9kdWxlKWlmKHR5cGVvZiAkbW9kdWxlWyRhdHRyXT09PSdmdW5jdGlvbicpeyRtb2R1bGVbJGF0dHJdLl9fcmVwcl9fPShmdW5jdGlvbihmdW5jKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJzxidWlsdC1pbiBmdW5jdGlvbiAnK2Z1bmMrJz4nO307fSkoJGF0dHIpOyRtb2R1bGVbJGF0dHJdLl9fc3RyX189KGZ1bmN0aW9uKGZ1bmMpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiAnPGJ1aWx0LWluIGZ1bmN0aW9uICcrZnVuYysnPic7fTt9KSgkYXR0cik7fQ==',
'/libs/hashlib.js':'JG1vZHVsZT17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7aWYoYXR0cj09J25ldycpcmV0dXJuICRoYXNobGliX25ldztyZXR1cm4gdGhpc1thdHRyXTt9LG1kNTpmdW5jdGlvbigpe3JldHVybiAkaGFzaGxpYl9uZXcoJ21kNScpO30sc2hhMTpmdW5jdGlvbigpe3JldHVybiAkaGFzaGxpYl9uZXcoJ3NoYTEnKTt9LHNoYTIyNDpmdW5jdGlvbigpe3JldHVybiAkaGFzaGxpYl9uZXcoJ3NoYTIyNCcpO30sc2hhMjU2OmZ1bmN0aW9uKCl7cmV0dXJuICRoYXNobGliX25ldygnc2hhMjU2Jyk7fSxzaGEzODQ6ZnVuY3Rpb24oKXtyZXR1cm4gJGhhc2hsaWJfbmV3KCdzaGEzODQnKTt9LHNoYTUxMjpmdW5jdGlvbigpe3JldHVybiAkaGFzaGxpYl9uZXcoJ3NoYTUxMicpO30sYWxnb3JpdGhtc19ndWFyYW50ZWVkOlsnbWQ1Jywnc2hhMScsJ3NoYTIyNCcsJ3NoYTI1NicsJ3NoYTM4NCcsJ3NoYTUxMiddLGFsZ29yaXRobXNfYXZhaWxhYmxlOlsnbWQ1Jywnc2hhMScsJ3NoYTIyNCcsJ3NoYTI1NicsJ3NoYTM4NCcsJ3NoYTUxMiddfTtmdW5jdGlvbiAkZ2V0X0NyeXB0b0pTX2xpYihhbGcpe3ZhciBpbXA9JGltcG9ydGVyKCk7dmFyICR4bWxodHRwPWltcFswXSxmYWtlX3FzPWltcFsxXSx0aW1lcj1pbXBbMl0scmVzPW51bGw7JHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoJHhtbGh0dHAucmVhZHlTdGF0ZT09NCl7d2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7aWYoJHhtbGh0dHAuc3RhdHVzPT0yMDB8fCR4bWxodHRwLnN0YXR1cz09MClyZXM9JHhtbGh0dHAucmVzcG9uc2VUZXh0O2Vsc2V7cmVzPUVycm9yKCk7cmVzLm5hbWU9J05vdEZvdW5kRXJyb3InO3Jlcy5tZXNzYWdlPSJObyBDcnlwdG9KUyBsaWIgbmFtZWQgJyIrYWxnKyInIjt9fX07JHhtbGh0dHAub3BlbignR0VUJyxfX0JSWVRIT05fXy5icnl0aG9uX3BhdGgrJ2xpYnMvY3J5cHRvX2pzL3JvbGx1cHMvJythbGcrJy5qcycrZmFrZV9xcyxmYWxzZSk7aWYoJ292ZXJyaWRlTWltZVR5cGUnIGluICR4bWxodHRwKSR4bWxodHRwLm92ZXJyaWRlTWltZVR5cGUoInRleHQvcGxhaW4iKTskeG1saHR0cC5zZW5kKCk7aWYocmVzLmNvbnN0cnVjdG9yPT09RXJyb3IpdGhyb3cgcmVzO3RyeXtldmFsKHJlcysiOyBfX0JSWVRIT05fXy5DcnlwdG9KUz1DcnlwdG9KUzsiKTt9Y2F0Y2goZXJyKXt0aHJvdyBFcnJvcigiSlMgRXZhbCBFcnJvciIsIkNhbm5vdCBldmFsIENyeXB0b0pTIGFsZ29yaXRobSAnIithbGcrIicgOiBlcnJvcjoiK2Vycik7fX1mdW5jdGlvbiAkaGFzaGxpYl9uZXcoYWxnKXtpZihhbGc9PSdtZDUnKXtpZihfX0JSWVRIT05fXy5DcnlwdG89PT11bmRlZmluZWR8fF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uTUQ1PT09dW5kZWZpbmVkKSRnZXRfQ3J5cHRvSlNfbGliKCdtZDUnKTt0aGlzLmhhc2g9X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5NRDUuY3JlYXRlKCk7fWVsc2UgaWYoYWxnPT0nc2hhMScpe2lmKF9fQlJZVEhPTl9fLkNyeXB0bz09PXVuZGVmaW5lZHx8X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEExPT09dW5kZWZpbmVkKSRnZXRfQ3J5cHRvSlNfbGliKCdzaGExJyk7dGhpcy5oYXNoPV9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBMS5jcmVhdGUoKTt9ZWxzZSBpZihhbGc9PSdzaGEyMjQnKXtpZihfX0JSWVRIT05fXy5DcnlwdG89PT11bmRlZmluZWR8fF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBMjI0PT09dW5kZWZpbmVkKSRnZXRfQ3J5cHRvSlNfbGliKCdzaGEyMjQnKTt0aGlzLmhhc2g9X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEEyMjQuY3JlYXRlKCk7fWVsc2UgaWYoYWxnPT0nc2hhMjU2Jyl7aWYoX19CUllUSE9OX18uQ3J5cHRvPT09dW5kZWZpbmVkfHxfX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTI1Nj09PXVuZGVmaW5lZCkkZ2V0X0NyeXB0b0pTX2xpYignc2hhMjU2Jyk7dGhpcy5oYXNoPV9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBMjU2LmNyZWF0ZSgpO31lbHNlIGlmKGFsZz09J3NoYTM4NCcpe2lmKF9fQlJZVEhPTl9fLkNyeXB0bz09PXVuZGVmaW5lZHx8X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEEzODQ9PT11bmRlZmluZWQpJGdldF9DcnlwdG9KU19saWIoJ3NoYTM4NCcpO3RoaXMuaGFzaD1fX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTM4NC5jcmVhdGUoKTt9ZWxzZSBpZihhbGc9PSdzaGE1MTInKXtpZihfX0JSWVRIT05fXy5DcnlwdG89PT11bmRlZmluZWR8fF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBNTEyPT09dW5kZWZpbmVkKSRnZXRfQ3J5cHRvSlNfbGliKCdzaGE1MTInKTt0aGlzLmhhc2g9X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEE1MTIuY3JlYXRlKCk7fWVsc2UgJHJhaXNlKCdBdHRyaWJ1dGVFcnJvcicsJ0ludmFsaWQgaGFzaCBhbGdvcml0aG06JythbGcpO3RoaXMuX19jbGFzc19fPSR0eXBlO3RoaXMuX19nZXRhdHRyX189ZnVuY3Rpb24oYXR0cil7cmV0dXJuICRnZXRhdHRyKHRoaXMsYXR0cik7fTt0aGlzLl9fc3RyX189ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZXhkaWdlc3QoKTt9O3RoaXMudXBkYXRlPWZ1bmN0aW9uKG1zZyl7dGhpcy5oYXNoLnVwZGF0ZShtc2cpO307dGhpcy5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzaC5jbG9uZSgpO307dGhpcy5oZXhkaWdlc3Q9ZnVuY3Rpb24oKXt2YXIgdGVtcD10aGlzLmhhc2guY2xvbmUoKTt0ZW1wPXRlbXAuZmluYWxpemUoKTtyZXR1cm4gdGVtcC50b1N0cmluZygpO307cmV0dXJuIHRoaXM7fSRtb2R1bGUuX19jbGFzc19fPSRtb2R1bGU7JG1vZHVsZS5fX3N0cl9fPWZ1bmN0aW9uKCl7cmV0dXJuICI8bW9kdWxlICdoYXNobGliJz4iO307',
'/libs/_os.js':'JG1vZHVsZT17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fSxyYW5kb206ZnVuY3Rpb24oKXtyZXR1cm4gZmxvYXQoTWF0aC5yYW5kb20oKSk7fSxyYW5kaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGludChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGItYSkrYSkpO319OyRtb2R1bGUuX19jbGFzc19fPSRtb2R1bGU7JG1vZHVsZS5fX3N0cl9fPWZ1bmN0aW9uKCl7cmV0dXJuICI8bW9kdWxlICdfb3MnPiI7fTs=',
'/libs/crypto_js/rollups/sha1.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihlLG0pe3ZhciBwPXt9LGo9cC5saWI9e30sbD1mdW5jdGlvbigpe30sZj1qLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtsLnByb3RvdHlwZT10aGlzO3ZhciBjPW5ldyBsKCk7YSYmYy5taXhJbihhKTtjLmhhc093blByb3BlcnR5KCJpbml0Iil8fChjLmluaXQ9ZnVuY3Rpb24oKXtjLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtjLmluaXQucHJvdG90eXBlPWM7Yy4kc3VwZXI9dGhpcztyZXR1cm4gYzt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJih0aGlzW2NdPWFbY10pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0sbj1qLldvcmRBcnJheT1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGMpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWMhPW0/Yzo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fGgpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLndvcmRzLHE9YS53b3JkcyxkPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihkJTQpZm9yKHZhciBiPTA7YjxhO2IrKyljW2QrYj4+PjJdfD0ocVtiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NSk8PDI0LTgqKChkK2IpJTQpO2Vsc2UgaWYoNjU1MzU8cS5sZW5ndGgpZm9yKGI9MDtiPGE7Yis9NCljW2QrYj4+PjJdPXFbYj4+PjJdO2Vsc2UgYy5wdXNoLmFwcGx5KGMscSk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YVtjPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGMlNCk7YS5sZW5ndGg9ZS5jZWlsKGMvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVtdLGI9MDtiPGE7Yis9NCljLnB1c2goNDI5NDk2NzI5NiplLnJhbmRvbSgpfDApO3JldHVybiBuZXcgbi5pbml0KGMsYSk7fX0pLGI9cC5lbmM9e30saD1iLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgYj1bXSxkPTA7ZDxhO2QrKyl7dmFyIGY9Y1tkPj4+Ml0+Pj4yNC04KihkJTQpJjI1NTtiLnB1c2goKGY+Pj40KS50b1N0cmluZygxNikpO2IucHVzaCgoZiYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGIuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGM9YS5sZW5ndGgsYj1bXSxkPTA7ZDxjO2QrPTIpYltkPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGQsMiksMTYpPDwyNC00KihkJTgpO3JldHVybiBuZXcgbi5pbml0KGIsYy8yKTt9fSxnPWIuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGM9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBiPVtdLGQ9MDtkPGE7ZCsrKWIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGNbZD4+PjJdPj4+MjQtOCooZCU0KSYyNTUpKTtyZXR1cm4gYi5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1hLmxlbmd0aCxiPVtdLGQ9MDtkPGM7ZCsrKWJbZD4+PjJdfD0oYS5jaGFyQ29kZUF0KGQpJjI1NSk8PDI0LTgqKGQlNCk7cmV0dXJuIG5ldyBuLmluaXQoYixjKTt9fSxyPWIuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShnLnN0cmluZ2lmeShhKSkpO31jYXRjaChjKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gZy5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpKTt9fSxrPWouQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1mLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBuLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9ci5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuX2RhdGEsYj1jLndvcmRzLGQ9Yy5zaWdCeXRlcyxmPXRoaXMuYmxvY2tTaXplLGg9ZC8oNCpmKSxoPWE/ZS5jZWlsKGgpOmUubWF4KChofDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1oKmY7ZD1lLm1pbig0KmEsZCk7aWYoYSl7Zm9yKHZhciBnPTA7ZzxhO2crPWYpdGhpcy5fZG9Qcm9jZXNzQmxvY2soYixnKTtnPWIuc3BsaWNlKDAsYSk7Yy5zaWdCeXRlcy09ZDt9cmV0dXJuIG5ldyBuLmluaXQoZyxkKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Zi5jbG9uZS5jYWxsKHRoaXMpO2EuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBhO30sX21pbkJ1ZmZlclNpemU6MH0pO2ouSGFzaGVyPWsuZXh0ZW5kKHtjZmc6Zi5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe2sucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5fYXBwZW5kKGEpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsYil7cmV0dXJuIG5ldyBhLmluaXQoYikuZmluYWxpemUoYyk7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGYpe3JldHVybiBuZXcgcy5ITUFDLmluaXQoYSxmKS5maW5hbGl6ZShiKTt9O319KTt2YXIgcz1wLmFsZ289e307cmV0dXJuIHA7fShNYXRoKTsoZnVuY3Rpb24oKXt2YXIgZT1DcnlwdG9KUyxtPWUubGliLHA9bS5Xb3JkQXJyYXksaj1tLkhhc2hlcixsPVtdLG09ZS5hbGdvLlNIQTE9ai5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgcC5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pO30sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGYsbil7Zm9yKHZhciBiPXRoaXMuX2hhc2gud29yZHMsaD1iWzBdLGc9YlsxXSxlPWJbMl0saz1iWzNdLGo9Yls0XSxhPTA7ODA+YTthKyspe2lmKDE2PmEpbFthXT1mW24rYV18MDtlbHNle3ZhciBjPWxbYS0zXV5sW2EtOF1ebFthLTE0XV5sW2EtMTZdO2xbYV09Yzw8MXxjPj4+MzE7fWM9KGg8PDV8aD4+PjI3KStqK2xbYV07Yz0yMD5hP2MrKChnJmV8fmcmaykrMTUxODUwMDI0OSk6NDA+YT9jKygoZ15lXmspKzE4NTk3NzUzOTMpOjYwPmE/YysoKGcmZXxnJmt8ZSZrKS0xODk0MDA3NTg4KTpjKygoZ15lXmspLTg5OTQ5NzUxNCk7aj1rO2s9ZTtlPWc8PDMwfGc+Pj4yO2c9aDtoPWM7fWJbMF09YlswXStofDA7YlsxXT1iWzFdK2d8MDtiWzJdPWJbMl0rZXwwO2JbM109YlszXStrfDA7Yls0XT1iWzRdK2p8MDt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGY9dGhpcy5fZGF0YSxlPWYud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsaD04KmYuc2lnQnl0ZXM7ZVtoPj4+NV18PTEyODw8MjQtaCUzMjtlWyhoKzY0Pj4+OTw8NCkrMTRdPU1hdGguZmxvb3IoYi80Mjk0OTY3Mjk2KTtlWyhoKzY0Pj4+OTw8NCkrMTVdPWI7Zi5zaWdCeXRlcz00KmUubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaDt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGU9ai5jbG9uZS5jYWxsKHRoaXMpO2UuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBlO319KTtlLlNIQTE9ai5fY3JlYXRlSGVscGVyKG0pO2UuSG1hY1NIQTE9ai5fY3JlYXRlSG1hY0hlbHBlcihtKTt9KSgpOw==',
'/libs/crypto_js/rollups/sha3.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbih2LHApe3ZhciBkPXt9LHU9ZC5saWI9e30scj1mdW5jdGlvbigpe30sZj11LkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtyLnByb3RvdHlwZT10aGlzO3ZhciBiPW5ldyByKCk7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtiLmluaXQucHJvdG90eXBlPWI7Yi4kc3VwZXI9dGhpcztyZXR1cm4gYjt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scz11LldvcmRBcnJheT1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWIhPXA/Yjo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHkpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGM9YS53b3JkcyxqPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihqJTQpZm9yKHZhciBuPTA7bjxhO24rKyliW2orbj4+PjJdfD0oY1tuPj4+Ml0+Pj4yNC04KihuJTQpJjI1NSk8PDI0LTgqKChqK24pJTQpO2Vsc2UgaWYoNjU1MzU8Yy5sZW5ndGgpZm9yKG49MDtuPGE7bis9NCliW2orbj4+PjJdPWNbbj4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsYyk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7YVtiPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGIlNCk7YS5sZW5ndGg9di5jZWlsKGIvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MDtjPGE7Yys9NCliLnB1c2goNDI5NDk2NzI5Nip2LnJhbmRvbSgpfDApO3JldHVybiBuZXcgcy5pbml0KGIsYSk7fX0pLHg9ZC5lbmM9e30seT14LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgYz1bXSxqPTA7ajxhO2orKyl7dmFyIG49YltqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NTtjLnB1c2goKG4+Pj40KS50b1N0cmluZygxNikpO2MucHVzaCgobiYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGMuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1bXSxqPTA7ajxiO2orPTIpY1tqPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGosMiksMTYpPDwyNC00KihqJTgpO3JldHVybiBuZXcgcy5pbml0KGMsYi8yKTt9fSxlPXguTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBjPVtdLGo9MDtqPGE7aisrKWMucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJbaj4+PjJdPj4+MjQtOCooaiU0KSYyNTUpKTtyZXR1cm4gYy5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPVtdLGo9MDtqPGI7aisrKWNbaj4+PjJdfD0oYS5jaGFyQ29kZUF0KGopJjI1NSk8PDI0LTgqKGolNCk7cmV0dXJuIG5ldyBzLmluaXQoYyxiKTt9fSxxPXguVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShlLnN0cmluZ2lmeShhKSkpO31jYXRjaChiKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gZS5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpKTt9fSx0PXUuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1mLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBzLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9cS5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2RhdGEsYz1iLndvcmRzLGo9Yi5zaWdCeXRlcyxuPXRoaXMuYmxvY2tTaXplLGU9ai8oNCpuKSxlPWE/di5jZWlsKGUpOnYubWF4KChlfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1lKm47aj12Lm1pbig0KmEsaik7aWYoYSl7Zm9yKHZhciBmPTA7ZjxhO2YrPW4pdGhpcy5fZG9Qcm9jZXNzQmxvY2soYyxmKTtmPWMuc3BsaWNlKDAsYSk7Yi5zaWdCeXRlcy09ajt9cmV0dXJuIG5ldyBzLmluaXQoZixqKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Zi5jbG9uZS5jYWxsKHRoaXMpO2EuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBhO30sX21pbkJ1ZmZlclNpemU6MH0pO3UuSGFzaGVyPXQuZXh0ZW5kKHtjZmc6Zi5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe3QucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5fYXBwZW5kKGEpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7cmV0dXJuIG5ldyBhLmluaXQoYykuZmluYWxpemUoYik7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe3JldHVybiBuZXcgdy5ITUFDLmluaXQoYSxjKS5maW5hbGl6ZShiKTt9O319KTt2YXIgdz1kLmFsZ289e307cmV0dXJuIGQ7fShNYXRoKTsoZnVuY3Rpb24odil7dmFyIHA9Q3J5cHRvSlMsZD1wLmxpYix1PWQuQmFzZSxyPWQuV29yZEFycmF5LHA9cC54NjQ9e307cC5Xb3JkPXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGYscyl7dGhpcy5oaWdoPWY7dGhpcy5sb3c9czt9fSk7cC5Xb3JkQXJyYXk9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZixzKXtmPXRoaXMud29yZHM9Znx8W107dGhpcy5zaWdCeXRlcz1zIT12P3M6OCpmLmxlbmd0aDt9LHRvWDMyOmZ1bmN0aW9uKCl7Zm9yKHZhciBmPXRoaXMud29yZHMscz1mLmxlbmd0aCxkPVtdLHA9MDtwPHM7cCsrKXt2YXIgZT1mW3BdO2QucHVzaChlLmhpZ2gpO2QucHVzaChlLmxvdyk7fXJldHVybiByLmNyZWF0ZShkLHRoaXMuc2lnQnl0ZXMpO30sY2xvbmU6ZnVuY3Rpb24oKXtmb3IodmFyIGY9dS5jbG9uZS5jYWxsKHRoaXMpLGQ9Zi53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLHA9ZC5sZW5ndGgscj0wO3I8cDtyKyspZFtyXT1kW3JdLmNsb25lKCk7cmV0dXJuIGY7fX0pO30pKCk7KGZ1bmN0aW9uKHYpe2Zvcih2YXIgcD1DcnlwdG9KUyxkPXAubGliLHU9ZC5Xb3JkQXJyYXkscj1kLkhhc2hlcixmPXAueDY0LldvcmQsZD1wLmFsZ28scz1bXSx4PVtdLHk9W10sZT0xLHE9MCx0PTA7MjQ+dDt0Kyspe3NbZSs1KnFdPSh0KzEpKih0KzIpLzIlNjQ7dmFyIHc9KDIqZSszKnEpJTUsZT1xJTUscT13O31mb3IoZT0wOzU+ZTtlKyspZm9yKHE9MDs1PnE7cSsrKXhbZSs1KnFdPXErNSooKDIqZSszKnEpJTUpO2U9MTtmb3IocT0wOzI0PnE7cSsrKXtmb3IodmFyIGE9dz10PTA7Nz5hO2ErKyl7aWYoZSYxKXt2YXIgYj0oMTw8YSktMTszMj5iP3dePTE8PGI6dF49MTw8Yi0zMjt9ZT1lJjEyOD9lPDwxXjExMzplPDwxO315W3FdPWYuY3JlYXRlKHQsdyk7fWZvcih2YXIgYz1bXSxlPTA7MjU+ZTtlKyspY1tlXT1mLmNyZWF0ZSgpO2Q9ZC5TSEEzPXIuZXh0ZW5kKHtjZmc6ci5jZmcuZXh0ZW5kKHtvdXRwdXRMZW5ndGg6NTEyfSksX2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5fc3RhdGU9W10sYj0wOzI1PmI7YisrKWFbYl09bmV3IGYuaW5pdCgpO3RoaXMuYmxvY2tTaXplPSgxNjAwLTIqdGhpcy5jZmcub3V0cHV0TGVuZ3RoKS8zMjt9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZT10aGlzLl9zdGF0ZSxmPXRoaXMuYmxvY2tTaXplLzIsaD0wO2g8ZjtoKyspe3ZhciBsPWFbYisyKmhdLG09YVtiKzIqaCsxXSxsPShsPDw4fGw+Pj4yNCkmMTY3MTE5MzV8KGw8PDI0fGw+Pj44KSY0Mjc4MjU1MzYwLG09KG08PDh8bT4+PjI0KSYxNjcxMTkzNXwobTw8MjR8bT4+PjgpJjQyNzgyNTUzNjAsZz1lW2hdO2cuaGlnaF49bTtnLmxvd149bDt9Zm9yKGY9MDsyND5mO2YrKyl7Zm9yKGg9MDs1Pmg7aCsrKXtmb3IodmFyIGQ9bD0wLGs9MDs1Pms7aysrKWc9ZVtoKzUqa10sbF49Zy5oaWdoLGRePWcubG93O2c9Y1toXTtnLmhpZ2g9bDtnLmxvdz1kO31mb3IoaD0wOzU+aDtoKyspe2c9Y1soaCs0KSU1XTtsPWNbKGgrMSklNV07bT1sLmhpZ2g7az1sLmxvdztsPWcuaGlnaF4obTw8MXxrPj4+MzEpO2Q9Zy5sb3deKGs8PDF8bT4+PjMxKTtmb3Ioaz0wOzU+aztrKyspZz1lW2grNSprXSxnLmhpZ2hePWwsZy5sb3dePWQ7fWZvcihtPTE7MjU+bTttKyspZz1lW21dLGg9Zy5oaWdoLGc9Zy5sb3csaz1zW21dLDMyPms/KGw9aDw8a3xnPj4+MzItayxkPWc8PGt8aD4+PjMyLWspOihsPWc8PGstMzJ8aD4+PjY0LWssZD1oPDxrLTMyfGc+Pj42NC1rKSxnPWNbeFttXV0sZy5oaWdoPWwsZy5sb3c9ZDtnPWNbMF07aD1lWzBdO2cuaGlnaD1oLmhpZ2g7Zy5sb3c9aC5sb3c7Zm9yKGg9MDs1Pmg7aCsrKWZvcihrPTA7NT5rO2srKyltPWgrNSprLGc9ZVttXSxsPWNbbV0sbT1jWyhoKzEpJTUrNSprXSxkPWNbKGgrMiklNSs1KmtdLGcuaGlnaD1sLmhpZ2hefm0uaGlnaCZkLmhpZ2gsZy5sb3c9bC5sb3defm0ubG93JmQubG93O2c9ZVswXTtoPXlbZl07Zy5oaWdoXj1oLmhpZ2g7Zy5sb3dePWgubG93O319LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxiPWEud29yZHMsYz04KmEuc2lnQnl0ZXMsZT0zMip0aGlzLmJsb2NrU2l6ZTtiW2M+Pj41XXw9MTw8MjQtYyUzMjtiWyh2LmNlaWwoKGMrMSkvZSkqZT4+PjUpLTFdfD0xMjg7YS5zaWdCeXRlcz00KmIubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtmb3IodmFyIGE9dGhpcy5fc3RhdGUsYj10aGlzLmNmZy5vdXRwdXRMZW5ndGgvOCxjPWIvOCxlPVtdLGg9MDtoPGM7aCsrKXt2YXIgZD1hW2hdLGY9ZC5oaWdoLGQ9ZC5sb3csZj0oZjw8OHxmPj4+MjQpJjE2NzExOTM1fChmPDwyNHxmPj4+OCkmNDI3ODI1NTM2MCxkPShkPDw4fGQ+Pj4yNCkmMTY3MTE5MzV8KGQ8PDI0fGQ+Pj44KSY0Mjc4MjU1MzYwO2UucHVzaChkKTtlLnB1c2goZik7fXJldHVybiBuZXcgdS5pbml0KGUsYik7fSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1yLmNsb25lLmNhbGwodGhpcyksYj1hLl9zdGF0ZT10aGlzLl9zdGF0ZS5zbGljZSgwKSxjPTA7MjU+YztjKyspYltjXT1iW2NdLmNsb25lKCk7cmV0dXJuIGE7fX0pO3AuU0hBMz1yLl9jcmVhdGVIZWxwZXIoZCk7cC5IbWFjU0hBMz1yLl9jcmVhdGVIbWFjSGVscGVyKGQpO30pKE1hdGgpOw==',
'/libs/crypto_js/rollups/sha224.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihnLGwpe3ZhciBmPXt9LGs9Zi5saWI9e30saD1mdW5jdGlvbigpe30sbT1rLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtoLnByb3RvdHlwZT10aGlzO3ZhciBjPW5ldyBoKCk7YSYmYy5taXhJbihhKTtjLmhhc093blByb3BlcnR5KCJpbml0Iil8fChjLmluaXQ9ZnVuY3Rpb24oKXtjLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtjLmluaXQucHJvdG90eXBlPWM7Yy4kc3VwZXI9dGhpcztyZXR1cm4gYzt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJih0aGlzW2NdPWFbY10pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scT1rLldvcmRBcnJheT1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGMpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWMhPWw/Yzo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHMpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLndvcmRzLGQ9YS53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihiJTQpZm9yKHZhciBlPTA7ZTxhO2UrKyljW2IrZT4+PjJdfD0oZFtlPj4+Ml0+Pj4yNC04KihlJTQpJjI1NSk8PDI0LTgqKChiK2UpJTQpO2Vsc2UgaWYoNjU1MzU8ZC5sZW5ndGgpZm9yKGU9MDtlPGE7ZSs9NCljW2IrZT4+PjJdPWRbZT4+PjJdO2Vsc2UgYy5wdXNoLmFwcGx5KGMsZCk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YVtjPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGMlNCk7YS5sZW5ndGg9Zy5jZWlsKGMvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW0uY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVtdLGQ9MDtkPGE7ZCs9NCljLnB1c2goNDI5NDk2NzI5NipnLnJhbmRvbSgpfDApO3JldHVybiBuZXcgcS5pbml0KGMsYSk7fX0pLHQ9Zi5lbmM9e30scz10LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxiPTA7YjxhO2IrKyl7dmFyIGU9Y1tiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NTtkLnB1c2goKGU+Pj40KS50b1N0cmluZygxNikpO2QucHVzaCgoZSYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGQuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGM9YS5sZW5ndGgsZD1bXSxiPTA7YjxjO2IrPTIpZFtiPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGIsMiksMTYpPDwyNC00KihiJTgpO3JldHVybiBuZXcgcS5pbml0KGQsYy8yKTt9fSxuPXQuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGM9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBkPVtdLGI9MDtiPGE7YisrKWQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGNbYj4+PjJdPj4+MjQtOCooYiU0KSYyNTUpKTtyZXR1cm4gZC5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1hLmxlbmd0aCxkPVtdLGI9MDtiPGM7YisrKWRbYj4+PjJdfD0oYS5jaGFyQ29kZUF0KGIpJjI1NSk8PDI0LTgqKGIlNCk7cmV0dXJuIG5ldyBxLmluaXQoZCxjKTt9fSxqPXQuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShuLnN0cmluZ2lmeShhKSkpO31jYXRjaChjKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gbi5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpKTt9fSx3PWsuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1tLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBxLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9ai5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuX2RhdGEsZD1jLndvcmRzLGI9Yy5zaWdCeXRlcyxlPXRoaXMuYmxvY2tTaXplLGY9Yi8oNCplKSxmPWE/Zy5jZWlsKGYpOmcubWF4KChmfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1mKmU7Yj1nLm1pbig0KmEsYik7aWYoYSl7Zm9yKHZhciB1PTA7dTxhO3UrPWUpdGhpcy5fZG9Qcm9jZXNzQmxvY2soZCx1KTt1PWQuc3BsaWNlKDAsYSk7Yy5zaWdCeXRlcy09Yjt9cmV0dXJuIG5ldyBxLmluaXQodSxiKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bS5jbG9uZS5jYWxsKHRoaXMpO2EuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBhO30sX21pbkJ1ZmZlclNpemU6MH0pO2suSGFzaGVyPXcuZXh0ZW5kKHtjZmc6bS5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe3cucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5fYXBwZW5kKGEpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7cmV0dXJuIG5ldyBhLmluaXQoZCkuZmluYWxpemUoYyk7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjLGQpe3JldHVybiBuZXcgdi5ITUFDLmluaXQoYSxkKS5maW5hbGl6ZShjKTt9O319KTt2YXIgdj1mLmFsZ289e307cmV0dXJuIGY7fShNYXRoKTsoZnVuY3Rpb24oZyl7Zm9yKHZhciBsPUNyeXB0b0pTLGY9bC5saWIsaz1mLldvcmRBcnJheSxoPWYuSGFzaGVyLGY9bC5hbGdvLG09W10scT1bXSx0PWZ1bmN0aW9uKGEpe3JldHVybiA0Mjk0OTY3Mjk2KihhLShhfDApKXwwO30scz0yLG49MDs2ND5uOyl7dmFyIGo7YTp7aj1zO2Zvcih2YXIgdz1nLnNxcnQoaiksdj0yO3Y8PXc7disrKWlmKCEoaiV2KSl7aj0hMTticmVhayBhO31qPSEwO31qJiYoOD5uJiYobVtuXT10KGcucG93KHMsMC41KSkpLHFbbl09dChnLnBvdyhzLDEvMykpLG4rKyk7cysrO312YXIgYT1bXSxmPWYuU0hBMjU2PWguZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGsuaW5pdChtLnNsaWNlKDApKTt9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj10aGlzLl9oYXNoLndvcmRzLGU9YlswXSxmPWJbMV0sZz1iWzJdLGs9YlszXSxoPWJbNF0sbD1iWzVdLG09Yls2XSxuPWJbN10scD0wOzY0PnA7cCsrKXtpZigxNj5wKWFbcF09Y1tkK3BdfDA7ZWxzZXt2YXIgaj1hW3AtMTVdLHI9YVtwLTJdO2FbcF09KChqPDwyNXxqPj4+NyleKGo8PDE0fGo+Pj4xOCleaj4+PjMpK2FbcC03XSsoKHI8PDE1fHI+Pj4xNyleKHI8PDEzfHI+Pj4xOSlecj4+PjEwKSthW3AtMTZdO31qPW4rKChoPDwyNnxoPj4+NileKGg8PDIxfGg+Pj4xMSleKGg8PDd8aD4+PjI1KSkrKGgmbF5+aCZtKStxW3BdK2FbcF07cj0oKGU8PDMwfGU+Pj4yKV4oZTw8MTl8ZT4+PjEzKV4oZTw8MTB8ZT4+PjIyKSkrKGUmZl5lJmdeZiZnKTtuPW07bT1sO2w9aDtoPWsranwwO2s9ZztnPWY7Zj1lO2U9aityfDA7fWJbMF09YlswXStlfDA7YlsxXT1iWzFdK2Z8MDtiWzJdPWJbMl0rZ3wwO2JbM109YlszXStrfDA7Yls0XT1iWzRdK2h8MDtiWzVdPWJbNV0rbHwwO2JbNl09Yls2XSttfDA7Yls3XT1iWzddK258MDt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxkPWEud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsZT04KmEuc2lnQnl0ZXM7ZFtlPj4+NV18PTEyODw8MjQtZSUzMjtkWyhlKzY0Pj4+OTw8NCkrMTRdPWcuZmxvb3IoYi80Mjk0OTY3Mjk2KTtkWyhlKzY0Pj4+OTw8NCkrMTVdPWI7YS5zaWdCeXRlcz00KmQubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaDt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9aC5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhO319KTtsLlNIQTI1Nj1oLl9jcmVhdGVIZWxwZXIoZik7bC5IbWFjU0hBMjU2PWguX2NyZWF0ZUhtYWNIZWxwZXIoZik7fSkoTWF0aCk7KGZ1bmN0aW9uKCl7dmFyIGc9Q3J5cHRvSlMsbD1nLmxpYi5Xb3JkQXJyYXksZj1nLmFsZ28saz1mLlNIQTI1NixmPWYuU0hBMjI0PWsuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGwuaW5pdChbMzIzODM3MTAzMiw5MTQxNTA2NjMsODEyNzAyOTk5LDQxNDQ5MTI2OTcsNDI5MDc3NTg1NywxNzUwNjAzMDI1LDE2OTQwNzY4MzksMzIwNDA3NTQyOF0pO30sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZj1rLl9kb0ZpbmFsaXplLmNhbGwodGhpcyk7Zi5zaWdCeXRlcy09NDtyZXR1cm4gZjt9fSk7Zy5TSEEyMjQ9ay5fY3JlYXRlSGVscGVyKGYpO2cuSG1hY1NIQTIyND1rLl9jcmVhdGVIbWFjSGVscGVyKGYpO30pKCk7',
'/libs/crypto_js/rollups/sha512.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihhLG0pe3ZhciByPXt9LGY9ci5saWI9e30sZz1mdW5jdGlvbigpe30sbD1mLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtnLnByb3RvdHlwZT10aGlzO3ZhciBiPW5ldyBnKCk7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtiLmluaXQucHJvdG90eXBlPWI7Yi4kc3VwZXI9dGhpcztyZXR1cm4gYjt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scD1mLldvcmRBcnJheT1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWIhPW0/Yjo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHEpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGQ9YS53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihjJTQpZm9yKHZhciBqPTA7ajxhO2orKyliW2Mraj4+PjJdfD0oZFtqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NSk8PDI0LTgqKChjK2opJTQpO2Vsc2UgaWYoNjU1MzU8ZC5sZW5ndGgpZm9yKGo9MDtqPGE7ais9NCliW2Mraj4+PjJdPWRbaj4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsZCk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7bltiPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGIlNCk7bi5sZW5ndGg9YS5jZWlsKGIvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWwuY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24obil7Zm9yKHZhciBiPVtdLGQ9MDtkPG47ZCs9NCliLnB1c2goNDI5NDk2NzI5NiphLnJhbmRvbSgpfDApO3JldHVybiBuZXcgcC5pbml0KGIsbik7fX0pLHk9ci5lbmM9e30scT15LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxjPTA7YzxhO2MrKyl7dmFyIGo9YltjPj4+Ml0+Pj4yNC04KihjJTQpJjI1NTtkLnB1c2goKGo+Pj40KS50b1N0cmluZygxNikpO2QucHVzaCgoaiYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGQuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsZD1bXSxjPTA7YzxiO2MrPTIpZFtjPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGMsMiksMTYpPDwyNC00KihjJTgpO3JldHVybiBuZXcgcC5pbml0KGQsYi8yKTt9fSxHPXkuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBkPVtdLGM9MDtjPGE7YysrKWQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJbYz4+PjJdPj4+MjQtOCooYyU0KSYyNTUpKTtyZXR1cm4gZC5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxkPVtdLGM9MDtjPGI7YysrKWRbYz4+PjJdfD0oYS5jaGFyQ29kZUF0KGMpJjI1NSk8PDI0LTgqKGMlNCk7cmV0dXJuIG5ldyBwLmluaXQoZCxiKTt9fSxmYT15LlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoRy5zdHJpbmdpZnkoYSkpKTt9Y2F0Y2goYil7dGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIik7fX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIEcucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKSk7fX0saD1mLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09bC5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgcC5pbml0KCk7dGhpcy5fbkRhdGFCeXRlcz0wO30sX2FwcGVuZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPWZhLnBhcnNlKGEpKTt0aGlzLl9kYXRhLmNvbmNhdChhKTt0aGlzLl9uRGF0YUJ5dGVzKz1hLnNpZ0J5dGVzO30sX3Byb2Nlc3M6ZnVuY3Rpb24obil7dmFyIGI9dGhpcy5fZGF0YSxkPWIud29yZHMsYz1iLnNpZ0J5dGVzLGo9dGhpcy5ibG9ja1NpemUsbD1jLyg0KmopLGw9bj9hLmNlaWwobCk6YS5tYXgoKGx8MCktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKTtuPWwqajtjPWEubWluKDQqbixjKTtpZihuKXtmb3IodmFyIGg9MDtoPG47aCs9ail0aGlzLl9kb1Byb2Nlc3NCbG9jayhkLGgpO2g9ZC5zcGxpY2UoMCxuKTtiLnNpZ0J5dGVzLT1jO31yZXR1cm4gbmV3IHAuaW5pdChoLGMpO30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1sLmNsb25lLmNhbGwodGhpcyk7YS5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCk7cmV0dXJuIGE7fSxfbWluQnVmZmVyU2l6ZTowfSk7Zi5IYXNoZXI9aC5leHRlbmQoe2NmZzpsLmV4dGVuZCgpLGluaXQ6ZnVuY3Rpb24oYSl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGEpO3RoaXMucmVzZXQoKTt9LHJlc2V0OmZ1bmN0aW9uKCl7aC5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKTt9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzO30sZmluYWxpemU6ZnVuY3Rpb24oYSl7YSYmdGhpcy5fYXBwZW5kKGEpO3JldHVybiB0aGlzLl9kb0ZpbmFsaXplKCk7fSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixkKXtyZXR1cm4gbmV3IGEuaW5pdChkKS5maW5hbGl6ZShiKTt9O30sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsZCl7cmV0dXJuIG5ldyBnYS5ITUFDLmluaXQoYSxkKS5maW5hbGl6ZShiKTt9O319KTt2YXIgZ2E9ci5hbGdvPXt9O3JldHVybiByO30oTWF0aCk7KGZ1bmN0aW9uKGEpe3ZhciBtPUNyeXB0b0pTLHI9bS5saWIsZj1yLkJhc2UsZz1yLldvcmRBcnJheSxtPW0ueDY0PXt9O20uV29yZD1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLHApe3RoaXMuaGlnaD1hO3RoaXMubG93PXA7fX0pO20uV29yZEFycmF5PWYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGwscCl7bD10aGlzLndvcmRzPWx8fFtdO3RoaXMuc2lnQnl0ZXM9cCE9YT9wOjgqbC5sZW5ndGg7fSx0b1gzMjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLndvcmRzLHA9YS5sZW5ndGgsZj1bXSxxPTA7cTxwO3ErKyl7dmFyIEc9YVtxXTtmLnB1c2goRy5oaWdoKTtmLnB1c2goRy5sb3cpO31yZXR1cm4gZy5jcmVhdGUoZix0aGlzLnNpZ0J5dGVzKTt9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKSxwPWEud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxnPXAubGVuZ3RoLHE9MDtxPGc7cSsrKXBbcV09cFtxXS5jbG9uZSgpO3JldHVybiBhO319KTt9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gZy5jcmVhdGUuYXBwbHkoZyxhcmd1bWVudHMpO31mb3IodmFyIG09Q3J5cHRvSlMscj1tLmxpYi5IYXNoZXIsZj1tLng2NCxnPWYuV29yZCxsPWYuV29yZEFycmF5LGY9bS5hbGdvLHA9W2EoMTExNjM1MjQwOCwzNjA5NzY3NDU4KSxhKDE4OTk0NDc0NDEsNjAyODkxNzI1KSxhKDMwNDkzMjM0NzEsMzk2NDQ4NDM5OSksYSgzOTIxMDA5NTczLDIxNzMyOTU1NDgpLGEoOTYxOTg3MTYzLDQwODE2Mjg0NzIpLGEoMTUwODk3MDk5MywzMDUzODM0MjY1KSxhKDI0NTM2MzU3NDgsMjkzNzY3MTU3OSksYSgyODcwNzYzMjIxLDM2NjQ2MDk1NjApLGEoMzYyNDM4MTA4MCwyNzM0ODgzMzk0KSxhKDMxMDU5ODQwMSwxMTY0OTk2NTQyKSxhKDYwNzIyNTI3OCwxMzIzNjEwNzY0KSxhKDE0MjY4ODE5ODcsMzU5MDMwNDk5NCksYSgxOTI1MDc4Mzg4LDQwNjgxODIzODMpLGEoMjE2MjA3ODIwNiw5OTEzMzYxMTMpLGEoMjYxNDg4ODEwMyw2MzM4MDMzMTcpLGEoMzI0ODIyMjU4MCwzNDc5Nzc0ODY4KSxhKDM4MzUzOTA0MDEsMjY2NjYxMzQ1OCksYSg0MDIyMjI0Nzc0LDk0NDcxMTEzOSksYSgyNjQzNDcwNzgsMjM0MTI2Mjc3MyksYSg2MDQ4MDc2MjgsMjAwNzgwMDkzMyksYSg3NzAyNTU5ODMsMTQ5NTk5MDkwMSksYSgxMjQ5MTUwMTIyLDE4NTY0MzEyMzUpLGEoMTU1NTA4MTY5MiwzMTc1MjE4MTMyKSxhKDE5OTYwNjQ5ODYsMjE5ODk1MDgzNyksYSgyNTU0MjIwODgyLDM5OTk3MTkzMzkpLGEoMjgyMTgzNDM0OSw3NjY3ODQwMTYpLGEoMjk1Mjk5NjgwOCwyNTY2NTk0ODc5KSxhKDMyMTAzMTM2NzEsMzIwMzMzNzk1NiksYSgzMzM2NTcxODkxLDEwMzQ0NTcwMjYpLGEoMzU4NDUyODcxMSwyNDY2OTQ4OTAxKSxhKDExMzkyNjk5MywzNzU4MzI2MzgzKSxhKDMzODI0MTg5NSwxNjg3MTc5MzYpLGEoNjY2MzA3MjA1LDExODgxNzk5NjQpLGEoNzczNTI5OTEyLDE1NDYwNDU3MzQpLGEoMTI5NDc1NzM3MiwxNTIyODA1NDg1KSxhKDEzOTYxODIyOTEsMjY0MzgzMzgyMyksYSgxNjk1MTgzNzAwLDIzNDM1MjczOTApLGEoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSxhKDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksYSgyNDU2OTU2MDM3LDM0NDA3NzYyNyksYSgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLGEoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSxhKDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksYSgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksYSgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLGEoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSxhKDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksYSgyNzU0MjMzNDQsODUxMTY5NzIwKSxhKDQzMDIyNzczNCwzMTAwODIzNzUyKSxhKDUwNjk0ODYxNiwxMzYzMjU4MTk1KSxhKDY1OTA2MDU1NiwzNzUwNjg1NTkzKSxhKDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSxhKDk1ODEzOTU3MSwzMzE4MzA3NDI3KSxhKDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksYSgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLGEoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSxhKDE5NTU1NjIyMjIsMTU3NTk5MDAxMiksYSgyMDI0MTA0ODE1LDExMjU1OTI5MjgpLGEoMjIyNzczMDQ1MiwyNzE2OTA0MzA2KSxhKDIzNjE4NTI0MjQsNDQyNzc2MDQ0KSxhKDI0Mjg0MzY0NzQsNTkzNjk4MzQ0KSxhKDI3NTY3MzQxODcsMzczMzExMDI0OSksYSgzMjA0MDMxNDc5LDI5OTkzNTE1NzMpLGEoMzMyOTMyNTI5OCwzODE1OTIwNDI3KSxhKDMzOTE1Njk2MTQsMzkyODM4MzkwMCksYSgzNTE1MjY3MjcxLDU2NjI4MDcxMSksYSgzOTQwMTg3NjA2LDM0NTQwNjk1MzQpLGEoNDExODYzMDI3MSw0MDAwMjM5OTkyKSxhKDExNjQxODQ3NCwxOTE0MTM4NTU0KSxhKDE3NDI5MjQyMSwyNzMxMDU1MjcwKSxhKDI4OTM4MDM1NiwzMjAzOTkzMDA2KSxhKDQ2MDM5MzI2OSwzMjA2MjAzMTUpLGEoNjg1NDcxNzMzLDU4NzQ5NjgzNiksYSg4NTIxNDI5NzEsMTA4Njc5Mjg1MSksYSgxMDE3MDM2Mjk4LDM2NTU0MzEwMCksYSgxMTI2MDAwNTgwLDI2MTgyOTc2NzYpLGEoMTI4ODAzMzQ3MCwzNDA5ODU1MTU4KSxhKDE1MDE1MDU5NDgsNDIzNDUwOTg2NiksYSgxNjA3MTY3OTE1LDk4NzE2NzQ2OCksYSgxODE2NDAyMzE2LDEyNDYxODk1OTEpXSx5PVtdLHE9MDs4MD5xO3ErKyl5W3FdPWEoKTtmPWYuU0hBNTEyPXIuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGwuaW5pdChbbmV3IGcuaW5pdCgxNzc5MDMzNzAzLDQwODkyMzU3MjApLG5ldyBnLmluaXQoMzE0NDEzNDI3NywyMjI3ODczNTk1KSxuZXcgZy5pbml0KDEwMTM5MDQyNDIsNDI3MTE3NTcyMyksbmV3IGcuaW5pdCgyNzczNDgwNzYyLDE1OTU3NTAxMjkpLG5ldyBnLmluaXQoMTM1OTg5MzExOSwyOTE3NTY1MTM3KSxuZXcgZy5pbml0KDI2MDA4MjI5MjQsNzI1NTExMTk5KSxuZXcgZy5pbml0KDUyODczNDYzNSw0MjE1Mzg5NTQ3KSxuZXcgZy5pbml0KDE1NDE0NTkyMjUsMzI3MDMzMjA5KV0pO30sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsZil7Zm9yKHZhciBoPXRoaXMuX2hhc2gud29yZHMsZz1oWzBdLG49aFsxXSxiPWhbMl0sZD1oWzNdLGM9aFs0XSxqPWhbNV0sbD1oWzZdLGg9aFs3XSxxPWcuaGlnaCxtPWcubG93LHI9bi5oaWdoLE49bi5sb3csWj1iLmhpZ2gsTz1iLmxvdywkPWQuaGlnaCxQPWQubG93LGFhPWMuaGlnaCxRPWMubG93LGJhPWouaGlnaCxSPWoubG93LGNhPWwuaGlnaCxTPWwubG93LGRhPWguaGlnaCxUPWgubG93LHY9cSxzPW0sSD1yLEU9TixJPVosRj1PLFc9JCxKPVAsdz1hYSx0PVEsVT1iYSxLPVIsVj1jYSxMPVMsWD1kYSxNPVQseD0wOzgwPng7eCsrKXt2YXIgQj15W3hdO2lmKDE2PngpdmFyIHU9Qi5oaWdoPWFbZisyKnhdfDAsZT1CLmxvdz1hW2YrMip4KzFdfDA7ZWxzZXt2YXIgdT15W3gtMTVdLGU9dS5oaWdoLHo9dS5sb3csdT0oZT4+PjF8ejw8MzEpXihlPj4+OHx6PDwyNCleZT4+Pjcsej0oej4+PjF8ZTw8MzEpXih6Pj4+OHxlPDwyNCleKHo+Pj43fGU8PDI1KSxEPXlbeC0yXSxlPUQuaGlnaCxrPUQubG93LEQ9KGU+Pj4xOXxrPDwxMyleKGU8PDN8az4+PjI5KV5lPj4+NixrPShrPj4+MTl8ZTw8MTMpXihrPDwzfGU+Pj4yOSleKGs+Pj42fGU8PDI2KSxlPXlbeC03XSxZPWUuaGlnaCxDPXlbeC0xNl0sQT1DLmhpZ2gsQz1DLmxvdyxlPXorZS5sb3csdT11K1krKGU+Pj4wPHo+Pj4wPzE6MCksZT1lK2ssdT11K0QrKGU+Pj4wPGs+Pj4wPzE6MCksZT1lK0MsdT11K0ErKGU+Pj4wPEM+Pj4wPzE6MCk7Qi5oaWdoPXU7Qi5sb3c9ZTt9dmFyIFk9dyZVXn53JlYsQz10JktefnQmTCxCPXYmSF52JkleSCZJLGhhPXMmRV5zJkZeRSZGLHo9KHY+Pj4yOHxzPDw0KV4odjw8MzB8cz4+PjIpXih2PDwyNXxzPj4+NyksRD0ocz4+PjI4fHY8PDQpXihzPDwzMHx2Pj4+MileKHM8PDI1fHY+Pj43KSxrPXBbeF0saWE9ay5oaWdoLGVhPWsubG93LGs9TSsoKHQ+Pj4xNHx3PDwxOCleKHQ+Pj4xOHx3PDwxNCleKHQ8PDIzfHc+Pj45KSksQT1YKygodz4+PjE0fHQ8PDE4KV4odz4+PjE4fHQ8PDE0KV4odzw8MjN8dD4+PjkpKSsoaz4+PjA8TT4+PjA/MTowKSxrPWsrQyxBPUErWSsoaz4+PjA8Qz4+PjA/MTowKSxrPWsrZWEsQT1BK2lhKyhrPj4+MDxlYT4+PjA/MTowKSxrPWsrZSxBPUErdSsoaz4+PjA8ZT4+PjA/MTowKSxlPUQraGEsQj16K0IrKGU+Pj4wPEQ+Pj4wPzE6MCksWD1WLE09TCxWPVUsTD1LLFU9dyxLPXQsdD1KK2t8MCx3PVcrQSsodD4+PjA8Sj4+PjA/MTowKXwwLFc9SSxKPUYsST1ILEY9RSxIPXYsRT1zLHM9aytlfDAsdj1BK0IrKHM+Pj4wPGs+Pj4wPzE6MCl8MDt9bT1nLmxvdz1tK3M7Zy5oaWdoPXErdisobT4+PjA8cz4+PjA/MTowKTtOPW4ubG93PU4rRTtuLmhpZ2g9citIKyhOPj4+MDxFPj4+MD8xOjApO089Yi5sb3c9TytGO2IuaGlnaD1aK0krKE8+Pj4wPEY+Pj4wPzE6MCk7UD1kLmxvdz1QK0o7ZC5oaWdoPSQrVysoUD4+PjA8Sj4+PjA/MTowKTtRPWMubG93PVErdDtjLmhpZ2g9YWErdysoUT4+PjA8dD4+PjA/MTowKTtSPWoubG93PVIrSztqLmhpZ2g9YmErVSsoUj4+PjA8Sz4+PjA/MTowKTtTPWwubG93PVMrTDtsLmhpZ2g9Y2ErVisoUz4+PjA8TD4+PjA/MTowKTtUPWgubG93PVQrTTtoLmhpZ2g9ZGErWCsoVD4+PjA8TT4+PjA/MTowKTt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxmPWEud29yZHMsaD04KnRoaXMuX25EYXRhQnl0ZXMsZz04KmEuc2lnQnl0ZXM7ZltnPj4+NV18PTEyODw8MjQtZyUzMjtmWyhnKzEyOD4+PjEwPDw1KSszMF09TWF0aC5mbG9vcihoLzQyOTQ5NjcyOTYpO2ZbKGcrMTI4Pj4+MTA8PDUpKzMxXT1oO2Euc2lnQnl0ZXM9NCpmLmxlbmd0aDt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXMuX2hhc2gudG9YMzIoKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9ci5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhO30sYmxvY2tTaXplOjMyfSk7bS5TSEE1MTI9ci5fY3JlYXRlSGVscGVyKGYpO20uSG1hY1NIQTUxMj1yLl9jcmVhdGVIbWFjSGVscGVyKGYpO30pKCk7',
'/libs/crypto_js/rollups/sha384.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihhLGMpe3ZhciBkPXt9LGo9ZC5saWI9e30sZj1mdW5jdGlvbigpe30sbT1qLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtmLnByb3RvdHlwZT10aGlzO3ZhciBiPW5ldyBmKCk7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtiLmluaXQucHJvdG90eXBlPWI7Yi4kc3VwZXI9dGhpcztyZXR1cm4gYjt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0sQj1qLldvcmRBcnJheT1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWIhPWM/Yjo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHkpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGc9YS53b3JkcyxlPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihlJTQpZm9yKHZhciBrPTA7azxhO2srKyliW2Uraz4+PjJdfD0oZ1trPj4+Ml0+Pj4yNC04KihrJTQpJjI1NSk8PDI0LTgqKChlK2spJTQpO2Vsc2UgaWYoNjU1MzU8Zy5sZW5ndGgpZm9yKGs9MDtrPGE7ays9NCliW2Uraz4+PjJdPWdbaz4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsZyk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7bltiPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGIlNCk7bi5sZW5ndGg9YS5jZWlsKGIvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW0uY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24obil7Zm9yKHZhciBiPVtdLGc9MDtnPG47Zys9NCliLnB1c2goNDI5NDk2NzI5NiphLnJhbmRvbSgpfDApO3JldHVybiBuZXcgQi5pbml0KGIsbik7fX0pLHY9ZC5lbmM9e30seT12LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZz1bXSxlPTA7ZTxhO2UrKyl7dmFyIGs9YltlPj4+Ml0+Pj4yNC04KihlJTQpJjI1NTtnLnB1c2goKGs+Pj40KS50b1N0cmluZygxNikpO2cucHVzaCgoayYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGcuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsZz1bXSxlPTA7ZTxiO2UrPTIpZ1tlPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGUsMiksMTYpPDwyNC00KihlJTgpO3JldHVybiBuZXcgQi5pbml0KGcsYi8yKTt9fSxGPXYuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBnPVtdLGU9MDtlPGE7ZSsrKWcucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJbZT4+PjJdPj4+MjQtOCooZSU0KSYyNTUpKTtyZXR1cm4gZy5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxnPVtdLGU9MDtlPGI7ZSsrKWdbZT4+PjJdfD0oYS5jaGFyQ29kZUF0KGUpJjI1NSk8PDI0LTgqKGUlNCk7cmV0dXJuIG5ldyBCLmluaXQoZyxiKTt9fSxoYT12LlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoRi5zdHJpbmdpZnkoYSkpKTt9Y2F0Y2goYil7dGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIik7fX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIEYucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKSk7fX0sWj1qLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09bS5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgQi5pbml0KCk7dGhpcy5fbkRhdGFCeXRlcz0wO30sX2FwcGVuZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPWhhLnBhcnNlKGEpKTt0aGlzLl9kYXRhLmNvbmNhdChhKTt0aGlzLl9uRGF0YUJ5dGVzKz1hLnNpZ0J5dGVzO30sX3Byb2Nlc3M6ZnVuY3Rpb24obil7dmFyIGI9dGhpcy5fZGF0YSxnPWIud29yZHMsZT1iLnNpZ0J5dGVzLGs9dGhpcy5ibG9ja1NpemUsbT1lLyg0KmspLG09bj9hLmNlaWwobSk6YS5tYXgoKG18MCktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKTtuPW0qaztlPWEubWluKDQqbixlKTtpZihuKXtmb3IodmFyIGM9MDtjPG47Yys9ayl0aGlzLl9kb1Byb2Nlc3NCbG9jayhnLGMpO2M9Zy5zcGxpY2UoMCxuKTtiLnNpZ0J5dGVzLT1lO31yZXR1cm4gbmV3IEIuaW5pdChjLGUpO30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1tLmNsb25lLmNhbGwodGhpcyk7YS5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCk7cmV0dXJuIGE7fSxfbWluQnVmZmVyU2l6ZTowfSk7ai5IYXNoZXI9Wi5leHRlbmQoe2NmZzptLmV4dGVuZCgpLGluaXQ6ZnVuY3Rpb24oYSl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGEpO3RoaXMucmVzZXQoKTt9LHJlc2V0OmZ1bmN0aW9uKCl7Wi5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKTt9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzO30sZmluYWxpemU6ZnVuY3Rpb24oYSl7YSYmdGhpcy5fYXBwZW5kKGEpO3JldHVybiB0aGlzLl9kb0ZpbmFsaXplKCk7fSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixnKXtyZXR1cm4gbmV3IGEuaW5pdChnKS5maW5hbGl6ZShiKTt9O30sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsZyl7cmV0dXJuIG5ldyBpYS5ITUFDLmluaXQoYSxnKS5maW5hbGl6ZShiKTt9O319KTt2YXIgaWE9ZC5hbGdvPXt9O3JldHVybiBkO30oTWF0aCk7KGZ1bmN0aW9uKGEpe3ZhciBjPUNyeXB0b0pTLGQ9Yy5saWIsaj1kLkJhc2UsZj1kLldvcmRBcnJheSxjPWMueDY0PXt9O2MuV29yZD1qLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGMpe3RoaXMuaGlnaD1hO3RoaXMubG93PWM7fX0pO2MuV29yZEFycmF5PWouZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGMsZCl7Yz10aGlzLndvcmRzPWN8fFtdO3RoaXMuc2lnQnl0ZXM9ZCE9YT9kOjgqYy5sZW5ndGg7fSx0b1gzMjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLndvcmRzLGM9YS5sZW5ndGgsZD1bXSxqPTA7ajxjO2orKyl7dmFyIEY9YVtqXTtkLnB1c2goRi5oaWdoKTtkLnB1c2goRi5sb3cpO31yZXR1cm4gZi5jcmVhdGUoZCx0aGlzLnNpZ0J5dGVzKTt9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWouY2xvbmUuY2FsbCh0aGlzKSxjPWEud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxkPWMubGVuZ3RoLGY9MDtmPGQ7ZisrKWNbZl09Y1tmXS5jbG9uZSgpO3JldHVybiBhO319KTt9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gZi5jcmVhdGUuYXBwbHkoZixhcmd1bWVudHMpO31mb3IodmFyIGM9Q3J5cHRvSlMsZD1jLmxpYi5IYXNoZXIsaj1jLng2NCxmPWouV29yZCxtPWouV29yZEFycmF5LGo9Yy5hbGdvLEI9W2EoMTExNjM1MjQwOCwzNjA5NzY3NDU4KSxhKDE4OTk0NDc0NDEsNjAyODkxNzI1KSxhKDMwNDkzMjM0NzEsMzk2NDQ4NDM5OSksYSgzOTIxMDA5NTczLDIxNzMyOTU1NDgpLGEoOTYxOTg3MTYzLDQwODE2Mjg0NzIpLGEoMTUwODk3MDk5MywzMDUzODM0MjY1KSxhKDI0NTM2MzU3NDgsMjkzNzY3MTU3OSksYSgyODcwNzYzMjIxLDM2NjQ2MDk1NjApLGEoMzYyNDM4MTA4MCwyNzM0ODgzMzk0KSxhKDMxMDU5ODQwMSwxMTY0OTk2NTQyKSxhKDYwNzIyNTI3OCwxMzIzNjEwNzY0KSxhKDE0MjY4ODE5ODcsMzU5MDMwNDk5NCksYSgxOTI1MDc4Mzg4LDQwNjgxODIzODMpLGEoMjE2MjA3ODIwNiw5OTEzMzYxMTMpLGEoMjYxNDg4ODEwMyw2MzM4MDMzMTcpLGEoMzI0ODIyMjU4MCwzNDc5Nzc0ODY4KSxhKDM4MzUzOTA0MDEsMjY2NjYxMzQ1OCksYSg0MDIyMjI0Nzc0LDk0NDcxMTEzOSksYSgyNjQzNDcwNzgsMjM0MTI2Mjc3MyksYSg2MDQ4MDc2MjgsMjAwNzgwMDkzMyksYSg3NzAyNTU5ODMsMTQ5NTk5MDkwMSksYSgxMjQ5MTUwMTIyLDE4NTY0MzEyMzUpLGEoMTU1NTA4MTY5MiwzMTc1MjE4MTMyKSxhKDE5OTYwNjQ5ODYsMjE5ODk1MDgzNyksYSgyNTU0MjIwODgyLDM5OTk3MTkzMzkpLGEoMjgyMTgzNDM0OSw3NjY3ODQwMTYpLGEoMjk1Mjk5NjgwOCwyNTY2NTk0ODc5KSxhKDMyMTAzMTM2NzEsMzIwMzMzNzk1NiksYSgzMzM2NTcxODkxLDEwMzQ0NTcwMjYpLGEoMzU4NDUyODcxMSwyNDY2OTQ4OTAxKSxhKDExMzkyNjk5MywzNzU4MzI2MzgzKSxhKDMzODI0MTg5NSwxNjg3MTc5MzYpLGEoNjY2MzA3MjA1LDExODgxNzk5NjQpLGEoNzczNTI5OTEyLDE1NDYwNDU3MzQpLGEoMTI5NDc1NzM3MiwxNTIyODA1NDg1KSxhKDEzOTYxODIyOTEsMjY0MzgzMzgyMyksYSgxNjk1MTgzNzAwLDIzNDM1MjczOTApLGEoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSxhKDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksYSgyNDU2OTU2MDM3LDM0NDA3NzYyNyksYSgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLGEoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSxhKDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksYSgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksYSgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLGEoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSxhKDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksYSgyNzU0MjMzNDQsODUxMTY5NzIwKSxhKDQzMDIyNzczNCwzMTAwODIzNzUyKSxhKDUwNjk0ODYxNiwxMzYzMjU4MTk1KSxhKDY1OTA2MDU1NiwzNzUwNjg1NTkzKSxhKDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSxhKDk1ODEzOTU3MSwzMzE4MzA3NDI3KSxhKDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksYSgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLGEoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSxhKDE5NTU1NjIyMjIsMTU3NTk5MDAxMiksYSgyMDI0MTA0ODE1LDExMjU1OTI5MjgpLGEoMjIyNzczMDQ1MiwyNzE2OTA0MzA2KSxhKDIzNjE4NTI0MjQsNDQyNzc2MDQ0KSxhKDI0Mjg0MzY0NzQsNTkzNjk4MzQ0KSxhKDI3NTY3MzQxODcsMzczMzExMDI0OSksYSgzMjA0MDMxNDc5LDI5OTkzNTE1NzMpLGEoMzMyOTMyNTI5OCwzODE1OTIwNDI3KSxhKDMzOTE1Njk2MTQsMzkyODM4MzkwMCksYSgzNTE1MjY3MjcxLDU2NjI4MDcxMSksYSgzOTQwMTg3NjA2LDM0NTQwNjk1MzQpLGEoNDExODYzMDI3MSw0MDAwMjM5OTkyKSxhKDExNjQxODQ3NCwxOTE0MTM4NTU0KSxhKDE3NDI5MjQyMSwyNzMxMDU1MjcwKSxhKDI4OTM4MDM1NiwzMjAzOTkzMDA2KSxhKDQ2MDM5MzI2OSwzMjA2MjAzMTUpLGEoNjg1NDcxNzMzLDU4NzQ5NjgzNiksYSg4NTIxNDI5NzEsMTA4Njc5Mjg1MSksYSgxMDE3MDM2Mjk4LDM2NTU0MzEwMCksYSgxMTI2MDAwNTgwLDI2MTgyOTc2NzYpLGEoMTI4ODAzMzQ3MCwzNDA5ODU1MTU4KSxhKDE1MDE1MDU5NDgsNDIzNDUwOTg2NiksYSgxNjA3MTY3OTE1LDk4NzE2NzQ2OCksYSgxODE2NDAyMzE2LDEyNDYxODk1OTEpXSx2PVtdLHk9MDs4MD55O3krKyl2W3ldPWEoKTtqPWouU0hBNTEyPWQuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IG0uaW5pdChbbmV3IGYuaW5pdCgxNzc5MDMzNzAzLDQwODkyMzU3MjApLG5ldyBmLmluaXQoMzE0NDEzNDI3NywyMjI3ODczNTk1KSxuZXcgZi5pbml0KDEwMTM5MDQyNDIsNDI3MTE3NTcyMyksbmV3IGYuaW5pdCgyNzczNDgwNzYyLDE1OTU3NTAxMjkpLG5ldyBmLmluaXQoMTM1OTg5MzExOSwyOTE3NTY1MTM3KSxuZXcgZi5pbml0KDI2MDA4MjI5MjQsNzI1NTExMTk5KSxuZXcgZi5pbml0KDUyODczNDYzNSw0MjE1Mzg5NTQ3KSxuZXcgZi5pbml0KDE1NDE0NTkyMjUsMzI3MDMzMjA5KV0pO30sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkPXRoaXMuX2hhc2gud29yZHMsZj1kWzBdLGo9ZFsxXSxiPWRbMl0sZz1kWzNdLGU9ZFs0XSxrPWRbNV0sbT1kWzZdLGQ9ZFs3XSx5PWYuaGlnaCxNPWYubG93LCQ9ai5oaWdoLE49ai5sb3csYWE9Yi5oaWdoLE89Yi5sb3csYmE9Zy5oaWdoLFA9Zy5sb3csY2E9ZS5oaWdoLFE9ZS5sb3csZGE9ay5oaWdoLFI9ay5sb3csZWE9bS5oaWdoLFM9bS5sb3csZmE9ZC5oaWdoLFQ9ZC5sb3cscz15LHA9TSxHPSQsRD1OLEg9YWEsRT1PLFc9YmEsST1QLHQ9Y2EscT1RLFU9ZGEsSj1SLFY9ZWEsSz1TLFg9ZmEsTD1ULHU9MDs4MD51O3UrKyl7dmFyIHo9dlt1XTtpZigxNj51KXZhciByPXouaGlnaD1hW2MrMip1XXwwLGg9ei5sb3c9YVtjKzIqdSsxXXwwO2Vsc2V7dmFyIHI9dlt1LTE1XSxoPXIuaGlnaCx3PXIubG93LHI9KGg+Pj4xfHc8PDMxKV4oaD4+Pjh8dzw8MjQpXmg+Pj43LHc9KHc+Pj4xfGg8PDMxKV4odz4+Pjh8aDw8MjQpXih3Pj4+N3xoPDwyNSksQz12W3UtMl0saD1DLmhpZ2gsbD1DLmxvdyxDPShoPj4+MTl8bDw8MTMpXihoPDwzfGw+Pj4yOSleaD4+PjYsbD0obD4+PjE5fGg8PDEzKV4obDw8M3xoPj4+MjkpXihsPj4+NnxoPDwyNiksaD12W3UtN10sWT1oLmhpZ2gsQT12W3UtMTZdLHg9QS5oaWdoLEE9QS5sb3csaD13K2gubG93LHI9citZKyhoPj4+MDx3Pj4+MD8xOjApLGg9aCtsLHI9citDKyhoPj4+MDxsPj4+MD8xOjApLGg9aCtBLHI9cit4KyhoPj4+MDxBPj4+MD8xOjApO3ouaGlnaD1yO3oubG93PWg7fXZhciBZPXQmVV5+dCZWLEE9cSZKXn5xJkssej1zJkdecyZIXkcmSCxqYT1wJkRecCZFXkQmRSx3PShzPj4+Mjh8cDw8NCleKHM8PDMwfHA+Pj4yKV4oczw8MjV8cD4+PjcpLEM9KHA+Pj4yOHxzPDw0KV4ocDw8MzB8cz4+PjIpXihwPDwyNXxzPj4+NyksbD1CW3VdLGthPWwuaGlnaCxnYT1sLmxvdyxsPUwrKChxPj4+MTR8dDw8MTgpXihxPj4+MTh8dDw8MTQpXihxPDwyM3x0Pj4+OSkpLHg9WCsoKHQ+Pj4xNHxxPDwxOCleKHQ+Pj4xOHxxPDwxNCleKHQ8PDIzfHE+Pj45KSkrKGw+Pj4wPEw+Pj4wPzE6MCksbD1sK0EseD14K1krKGw+Pj4wPEE+Pj4wPzE6MCksbD1sK2dhLHg9eCtrYSsobD4+PjA8Z2E+Pj4wPzE6MCksbD1sK2gseD14K3IrKGw+Pj4wPGg+Pj4wPzE6MCksaD1DK2phLHo9dyt6KyhoPj4+MDxDPj4+MD8xOjApLFg9VixMPUssVj1VLEs9SixVPXQsSj1xLHE9SStsfDAsdD1XK3grKHE+Pj4wPEk+Pj4wPzE6MCl8MCxXPUgsST1FLEg9RyxFPUQsRz1zLEQ9cCxwPWwraHwwLHM9eCt6KyhwPj4+MDxsPj4+MD8xOjApfDA7fU09Zi5sb3c9TStwO2YuaGlnaD15K3MrKE0+Pj4wPHA+Pj4wPzE6MCk7Tj1qLmxvdz1OK0Q7ai5oaWdoPSQrRysoTj4+PjA8RD4+PjA/MTowKTtPPWIubG93PU8rRTtiLmhpZ2g9YWErSCsoTz4+PjA8RT4+PjA/MTowKTtQPWcubG93PVArSTtnLmhpZ2g9YmErVysoUD4+PjA8ST4+PjA/MTowKTtRPWUubG93PVErcTtlLmhpZ2g9Y2ErdCsoUT4+PjA8cT4+PjA/MTowKTtSPWsubG93PVIrSjtrLmhpZ2g9ZGErVSsoUj4+PjA8Sj4+PjA/MTowKTtTPW0ubG93PVMrSzttLmhpZ2g9ZWErVisoUz4+PjA8Sz4+PjA/MTowKTtUPWQubG93PVQrTDtkLmhpZ2g9ZmErWCsoVD4+PjA8TD4+PjA/MTowKTt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxjPWEud29yZHMsZD04KnRoaXMuX25EYXRhQnl0ZXMsZj04KmEuc2lnQnl0ZXM7Y1tmPj4+NV18PTEyODw8MjQtZiUzMjtjWyhmKzEyOD4+PjEwPDw1KSszMF09TWF0aC5mbG9vcihkLzQyOTQ5NjcyOTYpO2NbKGYrMTI4Pj4+MTA8PDUpKzMxXT1kO2Euc2lnQnl0ZXM9NCpjLmxlbmd0aDt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXMuX2hhc2gudG9YMzIoKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9ZC5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhO30sYmxvY2tTaXplOjMyfSk7Yy5TSEE1MTI9ZC5fY3JlYXRlSGVscGVyKGopO2MuSG1hY1NIQTUxMj1kLl9jcmVhdGVIbWFjSGVscGVyKGopO30pKCk7KGZ1bmN0aW9uKCl7dmFyIGE9Q3J5cHRvSlMsYz1hLng2NCxkPWMuV29yZCxqPWMuV29yZEFycmF5LGM9YS5hbGdvLGY9Yy5TSEE1MTIsYz1jLlNIQTM4ND1mLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBqLmluaXQoW25ldyBkLmluaXQoMzQxODA3MDM2NSwzMjM4MzcxMDMyKSxuZXcgZC5pbml0KDE2NTQyNzAyNTAsOTE0MTUwNjYzKSxuZXcgZC5pbml0KDI0Mzg1MjkzNzAsODEyNzAyOTk5KSxuZXcgZC5pbml0KDM1NTQ2MjM2MCw0MTQ0OTEyNjk3KSxuZXcgZC5pbml0KDE3MzE0MDU0MTUsNDI5MDc3NTg1NyksbmV3IGQuaW5pdCgyMzk0MTgwMjMxLDE3NTA2MDMwMjUpLG5ldyBkLmluaXQoMzY3NTAwODUyNSwxNjk0MDc2ODM5KSxuZXcgZC5pbml0KDEyMDMwNjI4MTMsMzIwNDA3NTQyOCldKTt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9Zi5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTE2O3JldHVybiBhO319KTthLlNIQTM4ND1mLl9jcmVhdGVIZWxwZXIoYyk7YS5IbWFjU0hBMzg0PWYuX2NyZWF0ZUhtYWNIZWxwZXIoYyk7fSkoKTs=',
'/libs/crypto_js/rollups/md5.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihzLHApe3ZhciBtPXt9LGw9bS5saWI9e30sbj1mdW5jdGlvbigpe30scj1sLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihiKXtuLnByb3RvdHlwZT10aGlzO3ZhciBoPW5ldyBuKCk7YiYmaC5taXhJbihiKTtoLmhhc093blByb3BlcnR5KCJpbml0Iil8fChoLmluaXQ9ZnVuY3Rpb24oKXtoLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtoLmluaXQucHJvdG90eXBlPWg7aC4kc3VwZXI9dGhpcztyZXR1cm4gaDt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZXh0ZW5kKCk7Yi5pbml0LmFwcGx5KGIsYXJndW1lbnRzKTtyZXR1cm4gYjt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGIpe2Zvcih2YXIgaCBpbiBiKWIuaGFzT3duUHJvcGVydHkoaCkmJih0aGlzW2hdPWJbaF0pO2IuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWIudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scT1sLldvcmRBcnJheT1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihiLGgpe2I9dGhpcy53b3Jkcz1ifHxbXTt0aGlzLnNpZ0J5dGVzPWghPXA/aDo0KmIubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYil7cmV0dXJuKGJ8fHQpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihiKXt2YXIgaD10aGlzLndvcmRzLGE9Yi53b3JkcyxqPXRoaXMuc2lnQnl0ZXM7Yj1iLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihqJTQpZm9yKHZhciBnPTA7ZzxiO2crKyloW2orZz4+PjJdfD0oYVtnPj4+Ml0+Pj4yNC04KihnJTQpJjI1NSk8PDI0LTgqKChqK2cpJTQpO2Vsc2UgaWYoNjU1MzU8YS5sZW5ndGgpZm9yKGc9MDtnPGI7Zys9NCloW2orZz4+PjJdPWFbZz4+PjJdO2Vsc2UgaC5wdXNoLmFwcGx5KGgsYSk7dGhpcy5zaWdCeXRlcys9YjtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy53b3JkcyxoPXRoaXMuc2lnQnl0ZXM7YltoPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGglNCk7Yi5sZW5ndGg9cy5jZWlsKGgvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBiPXIuY2xvbmUuY2FsbCh0aGlzKTtiLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGI7fSxyYW5kb206ZnVuY3Rpb24oYil7Zm9yKHZhciBoPVtdLGE9MDthPGI7YSs9NCloLnB1c2goNDI5NDk2NzI5NipzLnJhbmRvbSgpfDApO3JldHVybiBuZXcgcS5pbml0KGgsYik7fX0pLHY9bS5lbmM9e30sdD12LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGIpe3ZhciBhPWIud29yZHM7Yj1iLnNpZ0J5dGVzO2Zvcih2YXIgZz1bXSxqPTA7ajxiO2orKyl7dmFyIGs9YVtqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NTtnLnB1c2goKGs+Pj40KS50b1N0cmluZygxNikpO2cucHVzaCgoayYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGcuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihiKXtmb3IodmFyIGE9Yi5sZW5ndGgsZz1bXSxqPTA7ajxhO2orPTIpZ1tqPj4+M118PXBhcnNlSW50KGIuc3Vic3RyKGosMiksMTYpPDwyNC00KihqJTgpO3JldHVybiBuZXcgcS5pbml0KGcsYS8yKTt9fSxhPXYuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYil7dmFyIGE9Yi53b3JkcztiPWIuc2lnQnl0ZXM7Zm9yKHZhciBnPVtdLGo9MDtqPGI7aisrKWcucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGFbaj4+PjJdPj4+MjQtOCooaiU0KSYyNTUpKTtyZXR1cm4gZy5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYT1iLmxlbmd0aCxnPVtdLGo9MDtqPGE7aisrKWdbaj4+PjJdfD0oYi5jaGFyQ29kZUF0KGopJjI1NSk8PDI0LTgqKGolNCk7cmV0dXJuIG5ldyBxLmluaXQoZyxhKTt9fSx1PXYuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGIpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShhLnN0cmluZ2lmeShiKSkpO31jYXRjaChnKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihiKXtyZXR1cm4gYS5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYikpKTt9fSxnPWwuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1yLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBxLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGIpeyJzdHJpbmciPT10eXBlb2YgYiYmKGI9dS5wYXJzZShiKSk7dGhpcy5fZGF0YS5jb25jYXQoYik7dGhpcy5fbkRhdGFCeXRlcys9Yi5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuX2RhdGEsZz1hLndvcmRzLGo9YS5zaWdCeXRlcyxrPXRoaXMuYmxvY2tTaXplLG09ai8oNCprKSxtPWI/cy5jZWlsKG0pOnMubWF4KChtfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7Yj1tKms7aj1zLm1pbig0KmIsaik7aWYoYil7Zm9yKHZhciBsPTA7bDxiO2wrPWspdGhpcy5fZG9Qcm9jZXNzQmxvY2soZyxsKTtsPWcuc3BsaWNlKDAsYik7YS5zaWdCeXRlcy09ajt9cmV0dXJuIG5ldyBxLmluaXQobCxqKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGI9ci5jbG9uZS5jYWxsKHRoaXMpO2IuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBiO30sX21pbkJ1ZmZlclNpemU6MH0pO2wuSGFzaGVyPWcuZXh0ZW5kKHtjZmc6ci5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChiKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe2cucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYil7dGhpcy5fYXBwZW5kKGIpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGIpe2ImJnRoaXMuX2FwcGVuZChiKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGEsZyl7cmV0dXJuIG5ldyBiLmluaXQoZykuZmluYWxpemUoYSk7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihhLGcpe3JldHVybiBuZXcgay5ITUFDLmluaXQoYixnKS5maW5hbGl6ZShhKTt9O319KTt2YXIgaz1tLmFsZ289e307cmV0dXJuIG07fShNYXRoKTsoZnVuY3Rpb24ocyl7ZnVuY3Rpb24gcChhLGssYixoLGwsaixtKXthPWErKGsmYnx+ayZoKStsK207cmV0dXJuKGE8PGp8YT4+PjMyLWopK2s7fWZ1bmN0aW9uIG0oYSxrLGIsaCxsLGosbSl7YT1hKyhrJmh8YiZ+aCkrbCttO3JldHVybihhPDxqfGE+Pj4zMi1qKStrO31mdW5jdGlvbiBsKGEsayxiLGgsbCxqLG0pe2E9YSsoa15iXmgpK2wrbTtyZXR1cm4oYTw8anxhPj4+MzItaikrazt9ZnVuY3Rpb24gbihhLGssYixoLGwsaixtKXthPWErKGJeKGt8fmgpKStsK207cmV0dXJuKGE8PGp8YT4+PjMyLWopK2s7fWZvcih2YXIgcj1DcnlwdG9KUyxxPXIubGliLHY9cS5Xb3JkQXJyYXksdD1xLkhhc2hlcixxPXIuYWxnbyxhPVtdLHU9MDs2ND51O3UrKylhW3VdPTQyOTQ5NjcyOTYqcy5hYnMocy5zaW4odSsxKSl8MDtxPXEuTUQ1PXQuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IHYuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4XSk7fSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZyxrKXtmb3IodmFyIGI9MDsxNj5iO2IrKyl7dmFyIGg9aytiLHc9Z1toXTtnW2hdPSh3PDw4fHc+Pj4yNCkmMTY3MTE5MzV8KHc8PDI0fHc+Pj44KSY0Mjc4MjU1MzYwO312YXIgYj10aGlzLl9oYXNoLndvcmRzLGg9Z1trKzBdLHc9Z1trKzFdLGo9Z1trKzJdLHE9Z1trKzNdLHI9Z1trKzRdLHM9Z1trKzVdLHQ9Z1trKzZdLHU9Z1trKzddLHY9Z1trKzhdLHg9Z1trKzldLHk9Z1trKzEwXSx6PWdbaysxMV0sQT1nW2srMTJdLEI9Z1trKzEzXSxDPWdbaysxNF0sRD1nW2srMTVdLGM9YlswXSxkPWJbMV0sZT1iWzJdLGY9YlszXSxjPXAoYyxkLGUsZixoLDcsYVswXSksZj1wKGYsYyxkLGUsdywxMixhWzFdKSxlPXAoZSxmLGMsZCxqLDE3LGFbMl0pLGQ9cChkLGUsZixjLHEsMjIsYVszXSksYz1wKGMsZCxlLGYsciw3LGFbNF0pLGY9cChmLGMsZCxlLHMsMTIsYVs1XSksZT1wKGUsZixjLGQsdCwxNyxhWzZdKSxkPXAoZCxlLGYsYyx1LDIyLGFbN10pLGM9cChjLGQsZSxmLHYsNyxhWzhdKSxmPXAoZixjLGQsZSx4LDEyLGFbOV0pLGU9cChlLGYsYyxkLHksMTcsYVsxMF0pLGQ9cChkLGUsZixjLHosMjIsYVsxMV0pLGM9cChjLGQsZSxmLEEsNyxhWzEyXSksZj1wKGYsYyxkLGUsQiwxMixhWzEzXSksZT1wKGUsZixjLGQsQywxNyxhWzE0XSksZD1wKGQsZSxmLGMsRCwyMixhWzE1XSksYz1tKGMsZCxlLGYsdyw1LGFbMTZdKSxmPW0oZixjLGQsZSx0LDksYVsxN10pLGU9bShlLGYsYyxkLHosMTQsYVsxOF0pLGQ9bShkLGUsZixjLGgsMjAsYVsxOV0pLGM9bShjLGQsZSxmLHMsNSxhWzIwXSksZj1tKGYsYyxkLGUseSw5LGFbMjFdKSxlPW0oZSxmLGMsZCxELDE0LGFbMjJdKSxkPW0oZCxlLGYsYyxyLDIwLGFbMjNdKSxjPW0oYyxkLGUsZix4LDUsYVsyNF0pLGY9bShmLGMsZCxlLEMsOSxhWzI1XSksZT1tKGUsZixjLGQscSwxNCxhWzI2XSksZD1tKGQsZSxmLGMsdiwyMCxhWzI3XSksYz1tKGMsZCxlLGYsQiw1LGFbMjhdKSxmPW0oZixjLGQsZSxqLDksYVsyOV0pLGU9bShlLGYsYyxkLHUsMTQsYVszMF0pLGQ9bShkLGUsZixjLEEsMjAsYVszMV0pLGM9bChjLGQsZSxmLHMsNCxhWzMyXSksZj1sKGYsYyxkLGUsdiwxMSxhWzMzXSksZT1sKGUsZixjLGQseiwxNixhWzM0XSksZD1sKGQsZSxmLGMsQywyMyxhWzM1XSksYz1sKGMsZCxlLGYsdyw0LGFbMzZdKSxmPWwoZixjLGQsZSxyLDExLGFbMzddKSxlPWwoZSxmLGMsZCx1LDE2LGFbMzhdKSxkPWwoZCxlLGYsYyx5LDIzLGFbMzldKSxjPWwoYyxkLGUsZixCLDQsYVs0MF0pLGY9bChmLGMsZCxlLGgsMTEsYVs0MV0pLGU9bChlLGYsYyxkLHEsMTYsYVs0Ml0pLGQ9bChkLGUsZixjLHQsMjMsYVs0M10pLGM9bChjLGQsZSxmLHgsNCxhWzQ0XSksZj1sKGYsYyxkLGUsQSwxMSxhWzQ1XSksZT1sKGUsZixjLGQsRCwxNixhWzQ2XSksZD1sKGQsZSxmLGMsaiwyMyxhWzQ3XSksYz1uKGMsZCxlLGYsaCw2LGFbNDhdKSxmPW4oZixjLGQsZSx1LDEwLGFbNDldKSxlPW4oZSxmLGMsZCxDLDE1LGFbNTBdKSxkPW4oZCxlLGYsYyxzLDIxLGFbNTFdKSxjPW4oYyxkLGUsZixBLDYsYVs1Ml0pLGY9bihmLGMsZCxlLHEsMTAsYVs1M10pLGU9bihlLGYsYyxkLHksMTUsYVs1NF0pLGQ9bihkLGUsZixjLHcsMjEsYVs1NV0pLGM9bihjLGQsZSxmLHYsNixhWzU2XSksZj1uKGYsYyxkLGUsRCwxMCxhWzU3XSksZT1uKGUsZixjLGQsdCwxNSxhWzU4XSksZD1uKGQsZSxmLGMsQiwyMSxhWzU5XSksYz1uKGMsZCxlLGYsciw2LGFbNjBdKSxmPW4oZixjLGQsZSx6LDEwLGFbNjFdKSxlPW4oZSxmLGMsZCxqLDE1LGFbNjJdKSxkPW4oZCxlLGYsYyx4LDIxLGFbNjNdKTtiWzBdPWJbMF0rY3wwO2JbMV09YlsxXStkfDA7YlsyXT1iWzJdK2V8MDtiWzNdPWJbM10rZnwwO30sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9kYXRhLGs9YS53b3JkcyxiPTgqdGhpcy5fbkRhdGFCeXRlcyxoPTgqYS5zaWdCeXRlcztrW2g+Pj41XXw9MTI4PDwyNC1oJTMyO3ZhciBsPXMuZmxvb3IoYi80Mjk0OTY3Mjk2KTtrWyhoKzY0Pj4+OTw8NCkrMTVdPShsPDw4fGw+Pj4yNCkmMTY3MTE5MzV8KGw8PDI0fGw+Pj44KSY0Mjc4MjU1MzYwO2tbKGgrNjQ+Pj45PDw0KSsxNF09KGI8PDh8Yj4+PjI0KSYxNjcxMTkzNXwoYjw8MjR8Yj4+PjgpJjQyNzgyNTUzNjA7YS5zaWdCeXRlcz00KihrLmxlbmd0aCsxKTt0aGlzLl9wcm9jZXNzKCk7YT10aGlzLl9oYXNoO2s9YS53b3Jkcztmb3IoYj0wOzQ+YjtiKyspaD1rW2JdLGtbYl09KGg8PDh8aD4+PjI0KSYxNjcxMTkzNXwoaDw8MjR8aD4+PjgpJjQyNzgyNTUzNjA7cmV0dXJuIGE7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPXQuY2xvbmUuY2FsbCh0aGlzKTthLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKTtyZXR1cm4gYTt9fSk7ci5NRDU9dC5fY3JlYXRlSGVscGVyKHEpO3IuSG1hY01ENT10Ll9jcmVhdGVIbWFjSGVscGVyKHEpO30pKE1hdGgpOw==',
'/Lib/heapq.py':'IiIiSGVhcCBxdWV1ZSBhbGdvcml0aG0gKGEuay5hLiBwcmlvcml0eSBxdWV1ZSkuCgpIZWFwcyBhcmUgYXJyYXlzIGZvciB3aGljaCBhW2tdIDw9IGFbMiprKzFdIGFuZCBhW2tdIDw9IGFbMiprKzJdIGZvcgphbGwgaywgY291bnRpbmcgZWxlbWVudHMgZnJvbSAwLiAgRm9yIHRoZSBzYWtlIG9mIGNvbXBhcmlzb24sCm5vbi1leGlzdGluZyBlbGVtZW50cyBhcmUgY29uc2lkZXJlZCB0byBiZSBpbmZpbml0ZS4gIFRoZSBpbnRlcmVzdGluZwpwcm9wZXJ0eSBvZiBhIGhlYXAgaXMgdGhhdCBhWzBdIGlzIGFsd2F5cyBpdHMgc21hbGxlc3QgZWxlbWVudC4KClVzYWdlOgoKaGVhcCA9IFtdICAgICAgICAgICAgIyBjcmVhdGVzIGFuIGVtcHR5IGhlYXAKaGVhcHB1c2goaGVhcCwgaXRlbSkgIyBwdXNoZXMgYSBuZXcgaXRlbSBvbiB0aGUgaGVhcAppdGVtID0gaGVhcHBvcChoZWFwKSAjIHBvcHMgdGhlIHNtYWxsZXN0IGl0ZW0gZnJvbSB0aGUgaGVhcAppdGVtID0gaGVhcFswXSAgICAgICAjIHNtYWxsZXN0IGl0ZW0gb24gdGhlIGhlYXAgd2l0aG91dCBwb3BwaW5nIGl0CmhlYXBpZnkoeCkgICAgICAgICAgICMgdHJhbnNmb3JtcyBsaXN0IGludG8gYSBoZWFwLCBpbi1wbGFjZSwgaW4gbGluZWFyIHRpbWUKaXRlbSA9IGhlYXByZXBsYWNlKGhlYXAsIGl0ZW0pICMgcG9wcyBhbmQgcmV0dXJucyBzbWFsbGVzdCBpdGVtLCBhbmQgYWRkcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBuZXcgaXRlbTsgdGhlIGhlYXAgc2l6ZSBpcyB1bmNoYW5nZWQKCk91ciBBUEkgZGlmZmVycyBmcm9tIHRleHRib29rIGhlYXAgYWxnb3JpdGhtcyBhcyBmb2xsb3dzOgoKLSBXZSB1c2UgMC1iYXNlZCBpbmRleGluZy4gIFRoaXMgbWFrZXMgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZQogIGluZGV4IGZvciBhIG5vZGUgYW5kIHRoZSBpbmRleGVzIGZvciBpdHMgY2hpbGRyZW4gc2xpZ2h0bHkgbGVzcwogIG9idmlvdXMsIGJ1dCBpcyBtb3JlIHN1aXRhYmxlIHNpbmNlIFB5dGhvbiB1c2VzIDAtYmFzZWQgaW5kZXhpbmcuCgotIE91ciBoZWFwcG9wKCkgbWV0aG9kIHJldHVybnMgdGhlIHNtYWxsZXN0IGl0ZW0sIG5vdCB0aGUgbGFyZ2VzdC4KClRoZXNlIHR3byBtYWtlIGl0IHBvc3NpYmxlIHRvIHZpZXcgdGhlIGhlYXAgYXMgYSByZWd1bGFyIFB5dGhvbiBsaXN0CndpdGhvdXQgc3VycHJpc2VzOiBoZWFwWzBdIGlzIHRoZSBzbWFsbGVzdCBpdGVtLCBhbmQgaGVhcC5zb3J0KCkKbWFpbnRhaW5zIHRoZSBoZWFwIGludmFyaWFudCEKIiIiCgojIE9yaWdpbmFsIGNvZGUgYnkgS2V2aW4gTydDb25ub3IsIGF1Z21lbnRlZCBieSBUaW0gUGV0ZXJzIGFuZCBSYXltb25kIEhldHRpbmdlcgoKX19hYm91dF9fID0gIiIiSGVhcCBxdWV1ZXMKCltleHBsYW5hdGlvbiBieSBGcmFuw6dvaXMgUGluYXJkXQoKSGVhcHMgYXJlIGFycmF5cyBmb3Igd2hpY2ggYVtrXSA8PSBhWzIqaysxXSBhbmQgYVtrXSA8PSBhWzIqaysyXSBmb3IKYWxsIGssIGNvdW50aW5nIGVsZW1lbnRzIGZyb20gMC4gIEZvciB0aGUgc2FrZSBvZiBjb21wYXJpc29uLApub24tZXhpc3RpbmcgZWxlbWVudHMgYXJlIGNvbnNpZGVyZWQgdG8gYmUgaW5maW5pdGUuICBUaGUgaW50ZXJlc3RpbmcKcHJvcGVydHkgb2YgYSBoZWFwIGlzIHRoYXQgYVswXSBpcyBhbHdheXMgaXRzIHNtYWxsZXN0IGVsZW1lbnQuCgpUaGUgc3RyYW5nZSBpbnZhcmlhbnQgYWJvdmUgaXMgbWVhbnQgdG8gYmUgYW4gZWZmaWNpZW50IG1lbW9yeQpyZXByZXNlbnRhdGlvbiBmb3IgYSB0b3VybmFtZW50LiAgVGhlIG51bWJlcnMgYmVsb3cgYXJlIGBrJywgbm90IGFba106CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAKCiAgICAgICAgICAgICAgICAgIDEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyCgogICAgICAgICAgMyAgICAgICAgICAgICAgIDQgICAgICAgICAgICAgICAgNSAgICAgICAgICAgICAgIDYKCiAgICAgIDcgICAgICAgOCAgICAgICA5ICAgICAgIDEwICAgICAgMTEgICAgICAxMiAgICAgIDEzICAgICAgMTQKCiAgICAxNSAxNiAgIDE3IDE4ICAgMTkgMjAgICAyMSAyMiAgIDIzIDI0ICAgMjUgMjYgICAyNyAyOCAgIDI5IDMwCgoKSW4gdGhlIHRyZWUgYWJvdmUsIGVhY2ggY2VsbCBgaycgaXMgdG9wcGluZyBgMiprKzEnIGFuZCBgMiprKzInLiAgSW4KYW4gdXN1YWwgYmluYXJ5IHRvdXJuYW1lbnQgd2Ugc2VlIGluIHNwb3J0cywgZWFjaCBjZWxsIGlzIHRoZSB3aW5uZXIKb3ZlciB0aGUgdHdvIGNlbGxzIGl0IHRvcHMsIGFuZCB3ZSBjYW4gdHJhY2UgdGhlIHdpbm5lciBkb3duIHRoZSB0cmVlCnRvIHNlZSBhbGwgb3Bwb25lbnRzIHMvaGUgaGFkLiAgSG93ZXZlciwgaW4gbWFueSBjb21wdXRlciBhcHBsaWNhdGlvbnMKb2Ygc3VjaCB0b3VybmFtZW50cywgd2UgZG8gbm90IG5lZWQgdG8gdHJhY2UgdGhlIGhpc3Rvcnkgb2YgYSB3aW5uZXIuClRvIGJlIG1vcmUgbWVtb3J5IGVmZmljaWVudCwgd2hlbiBhIHdpbm5lciBpcyBwcm9tb3RlZCwgd2UgdHJ5IHRvCnJlcGxhY2UgaXQgYnkgc29tZXRoaW5nIGVsc2UgYXQgYSBsb3dlciBsZXZlbCwgYW5kIHRoZSBydWxlIGJlY29tZXMKdGhhdCBhIGNlbGwgYW5kIHRoZSB0d28gY2VsbHMgaXQgdG9wcyBjb250YWluIHRocmVlIGRpZmZlcmVudCBpdGVtcywKYnV0IHRoZSB0b3AgY2VsbCAid2lucyIgb3ZlciB0aGUgdHdvIHRvcHBlZCBjZWxscy4KCklmIHRoaXMgaGVhcCBpbnZhcmlhbnQgaXMgcHJvdGVjdGVkIGF0IGFsbCB0aW1lLCBpbmRleCAwIGlzIGNsZWFybHkKdGhlIG92ZXJhbGwgd2lubmVyLiAgVGhlIHNpbXBsZXN0IGFsZ29yaXRobWljIHdheSB0byByZW1vdmUgaXQgYW5kCmZpbmQgdGhlICJuZXh0IiB3aW5uZXIgaXMgdG8gbW92ZSBzb21lIGxvc2VyIChsZXQncyBzYXkgY2VsbCAzMCBpbiB0aGUKZGlhZ3JhbSBhYm92ZSkgaW50byB0aGUgMCBwb3NpdGlvbiwgYW5kIHRoZW4gcGVyY29sYXRlIHRoaXMgbmV3IDAgZG93bgp0aGUgdHJlZSwgZXhjaGFuZ2luZyB2YWx1ZXMsIHVudGlsIHRoZSBpbnZhcmlhbnQgaXMgcmUtZXN0YWJsaXNoZWQuClRoaXMgaXMgY2xlYXJseSBsb2dhcml0aG1pYyBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIGl0ZW1zIGluIHRoZSB0cmVlLgpCeSBpdGVyYXRpbmcgb3ZlciBhbGwgaXRlbXMsIHlvdSBnZXQgYW4gTyhuIGxuIG4pIHNvcnQuCgpBIG5pY2UgZmVhdHVyZSBvZiB0aGlzIHNvcnQgaXMgdGhhdCB5b3UgY2FuIGVmZmljaWVudGx5IGluc2VydCBuZXcKaXRlbXMgd2hpbGUgdGhlIHNvcnQgaXMgZ29pbmcgb24sIHByb3ZpZGVkIHRoYXQgdGhlIGluc2VydGVkIGl0ZW1zIGFyZQpub3QgImJldHRlciIgdGhhbiB0aGUgbGFzdCAwJ3RoIGVsZW1lbnQgeW91IGV4dHJhY3RlZC4gIFRoaXMgaXMKZXNwZWNpYWxseSB1c2VmdWwgaW4gc2ltdWxhdGlvbiBjb250ZXh0cywgd2hlcmUgdGhlIHRyZWUgaG9sZHMgYWxsCmluY29taW5nIGV2ZW50cywgYW5kIHRoZSAid2luIiBjb25kaXRpb24gbWVhbnMgdGhlIHNtYWxsZXN0IHNjaGVkdWxlZAp0aW1lLiAgV2hlbiBhbiBldmVudCBzY2hlZHVsZSBvdGhlciBldmVudHMgZm9yIGV4ZWN1dGlvbiwgdGhleSBhcmUKc2NoZWR1bGVkIGludG8gdGhlIGZ1dHVyZSwgc28gdGhleSBjYW4gZWFzaWx5IGdvIGludG8gdGhlIGhlYXAuICBTbywgYQpoZWFwIGlzIGEgZ29vZCBzdHJ1Y3R1cmUgZm9yIGltcGxlbWVudGluZyBzY2hlZHVsZXJzICh0aGlzIGlzIHdoYXQgSQp1c2VkIGZvciBteSBNSURJIHNlcXVlbmNlciA6LSkuCgpWYXJpb3VzIHN0cnVjdHVyZXMgZm9yIGltcGxlbWVudGluZyBzY2hlZHVsZXJzIGhhdmUgYmVlbiBleHRlbnNpdmVseQpzdHVkaWVkLCBhbmQgaGVhcHMgYXJlIGdvb2QgZm9yIHRoaXMsIGFzIHRoZXkgYXJlIHJlYXNvbmFibHkgc3BlZWR5LAp0aGUgc3BlZWQgaXMgYWxtb3N0IGNvbnN0YW50LCBhbmQgdGhlIHdvcnN0IGNhc2UgaXMgbm90IG11Y2ggZGlmZmVyZW50CnRoYW4gdGhlIGF2ZXJhZ2UgY2FzZS4gIEhvd2V2ZXIsIHRoZXJlIGFyZSBvdGhlciByZXByZXNlbnRhdGlvbnMgd2hpY2gKYXJlIG1vcmUgZWZmaWNpZW50IG92ZXJhbGwsIHlldCB0aGUgd29yc3QgY2FzZXMgbWlnaHQgYmUgdGVycmlibGUuCgpIZWFwcyBhcmUgYWxzbyB2ZXJ5IHVzZWZ1bCBpbiBiaWcgZGlzayBzb3J0cy4gIFlvdSBtb3N0IHByb2JhYmx5IGFsbAprbm93IHRoYXQgYSBiaWcgc29ydCBpbXBsaWVzIHByb2R1Y2luZyAicnVucyIgKHdoaWNoIGFyZSBwcmUtc29ydGVkCnNlcXVlbmNlcywgd2hpY2ggc2l6ZSBpcyB1c3VhbGx5IHJlbGF0ZWQgdG8gdGhlIGFtb3VudCBvZiBDUFUgbWVtb3J5KSwKZm9sbG93ZWQgYnkgYSBtZXJnaW5nIHBhc3NlcyBmb3IgdGhlc2UgcnVucywgd2hpY2ggbWVyZ2luZyBpcyBvZnRlbgp2ZXJ5IGNsZXZlcmx5IG9yZ2FuaXNlZFsxXS4gIEl0IGlzIHZlcnkgaW1wb3J0YW50IHRoYXQgdGhlIGluaXRpYWwKc29ydCBwcm9kdWNlcyB0aGUgbG9uZ2VzdCBydW5zIHBvc3NpYmxlLiAgVG91cm5hbWVudHMgYXJlIGEgZ29vZCB3YXkKdG8gdGhhdC4gIElmLCB1c2luZyBhbGwgdGhlIG1lbW9yeSBhdmFpbGFibGUgdG8gaG9sZCBhIHRvdXJuYW1lbnQsIHlvdQpyZXBsYWNlIGFuZCBwZXJjb2xhdGUgaXRlbXMgdGhhdCBoYXBwZW4gdG8gZml0IHRoZSBjdXJyZW50IHJ1biwgeW91J2xsCnByb2R1Y2UgcnVucyB3aGljaCBhcmUgdHdpY2UgdGhlIHNpemUgb2YgdGhlIG1lbW9yeSBmb3IgcmFuZG9tIGlucHV0LAphbmQgbXVjaCBiZXR0ZXIgZm9yIGlucHV0IGZ1enppbHkgb3JkZXJlZC4KCk1vcmVvdmVyLCBpZiB5b3Ugb3V0cHV0IHRoZSAwJ3RoIGl0ZW0gb24gZGlzayBhbmQgZ2V0IGFuIGlucHV0IHdoaWNoCm1heSBub3QgZml0IGluIHRoZSBjdXJyZW50IHRvdXJuYW1lbnQgKGJlY2F1c2UgdGhlIHZhbHVlICJ3aW5zIiBvdmVyCnRoZSBsYXN0IG91dHB1dCB2YWx1ZSksIGl0IGNhbm5vdCBmaXQgaW4gdGhlIGhlYXAsIHNvIHRoZSBzaXplIG9mIHRoZQpoZWFwIGRlY3JlYXNlcy4gIFRoZSBmcmVlZCBtZW1vcnkgY291bGQgYmUgY2xldmVybHkgcmV1c2VkIGltbWVkaWF0ZWx5CmZvciBwcm9ncmVzc2l2ZWx5IGJ1aWxkaW5nIGEgc2Vjb25kIGhlYXAsIHdoaWNoIGdyb3dzIGF0IGV4YWN0bHkgdGhlCnNhbWUgcmF0ZSB0aGUgZmlyc3QgaGVhcCBpcyBtZWx0aW5nLiAgV2hlbiB0aGUgZmlyc3QgaGVhcCBjb21wbGV0ZWx5CnZhbmlzaGVzLCB5b3Ugc3dpdGNoIGhlYXBzIGFuZCBzdGFydCBhIG5ldyBydW4uICBDbGV2ZXIgYW5kIHF1aXRlCmVmZmVjdGl2ZSEKCkluIGEgd29yZCwgaGVhcHMgYXJlIHVzZWZ1bCBtZW1vcnkgc3RydWN0dXJlcyB0byBrbm93LiAgSSB1c2UgdGhlbSBpbgphIGZldyBhcHBsaWNhdGlvbnMsIGFuZCBJIHRoaW5rIGl0IGlzIGdvb2QgdG8ga2VlcCBhIGBoZWFwJyBtb2R1bGUKYXJvdW5kLiA6LSkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tClsxXSBUaGUgZGlzayBiYWxhbmNpbmcgYWxnb3JpdGhtcyB3aGljaCBhcmUgY3VycmVudCwgbm93YWRheXMsIGFyZQptb3JlIGFubm95aW5nIHRoYW4gY2xldmVyLCBhbmQgdGhpcyBpcyBhIGNvbnNlcXVlbmNlIG9mIHRoZSBzZWVraW5nCmNhcGFiaWxpdGllcyBvZiB0aGUgZGlza3MuICBPbiBkZXZpY2VzIHdoaWNoIGNhbm5vdCBzZWVrLCBsaWtlIGJpZwp0YXBlIGRyaXZlcywgdGhlIHN0b3J5IHdhcyBxdWl0ZSBkaWZmZXJlbnQsIGFuZCBvbmUgaGFkIHRvIGJlIHZlcnkKY2xldmVyIHRvIGVuc3VyZSAoZmFyIGluIGFkdmFuY2UpIHRoYXQgZWFjaCB0YXBlIG1vdmVtZW50IHdpbGwgYmUgdGhlCm1vc3QgZWZmZWN0aXZlIHBvc3NpYmxlICh0aGF0IGlzLCB3aWxsIGJlc3QgcGFydGljaXBhdGUgYXQKInByb2dyZXNzaW5nIiB0aGUgbWVyZ2UpLiAgU29tZSB0YXBlcyB3ZXJlIGV2ZW4gYWJsZSB0byByZWFkCmJhY2t3YXJkcywgYW5kIHRoaXMgd2FzIGFsc28gdXNlZCB0byBhdm9pZCB0aGUgcmV3aW5kaW5nIHRpbWUuCkJlbGlldmUgbWUsIHJlYWwgZ29vZCB0YXBlIHNvcnRzIHdlcmUgcXVpdGUgc3BlY3RhY3VsYXIgdG8gd2F0Y2ghCkZyb20gYWxsIHRpbWVzLCBzb3J0aW5nIGhhcyBhbHdheXMgYmVlbiBhIEdyZWF0IEFydCEgOi0pCiIiIgoKX19hbGxfXyA9IFsnaGVhcHB1c2gnLCAnaGVhcHBvcCcsICdoZWFwaWZ5JywgJ2hlYXByZXBsYWNlJywgJ21lcmdlJywKICAgICAgICAgICAnbmxhcmdlc3QnLCAnbnNtYWxsZXN0JywgJ2hlYXBwdXNocG9wJ10KCmZyb20gaXRlcnRvb2xzIGltcG9ydCBpc2xpY2UsIHJlcGVhdCwgY291bnQsIHRlZSwgY2hhaW4KaW1wb3J0IGJpc2VjdAoKZGVmIGhlYXBwdXNoKGhlYXAsIGl0ZW0pOgogICAgIiIiUHVzaCBpdGVtIG9udG8gaGVhcCwgbWFpbnRhaW5pbmcgdGhlIGhlYXAgaW52YXJpYW50LiIiIgogICAgaGVhcC5hcHBlbmQoaXRlbSkKICAgIF9zaWZ0ZG93bihoZWFwLCAwLCBsZW4oaGVhcCktMSkKCmRlZiBoZWFwcG9wKGhlYXApOgogICAgIiIiUG9wIHRoZSBzbWFsbGVzdCBpdGVtIG9mZiB0aGUgaGVhcCwgbWFpbnRhaW5pbmcgdGhlIGhlYXAgaW52YXJpYW50LiIiIgogICAgbGFzdGVsdCA9IGhlYXAucG9wKCkgICAgIyByYWlzZXMgYXBwcm9wcmlhdGUgSW5kZXhFcnJvciBpZiBoZWFwIGlzIGVtcHR5CiAgICBpZiBoZWFwOgogICAgICAgIHJldHVybml0ZW0gPSBoZWFwWzBdCiAgICAgICAgaGVhcFswXSA9IGxhc3RlbHQKICAgICAgICBfc2lmdHVwKGhlYXAsIDApCiAgICBlbHNlOgogICAgICAgIHJldHVybml0ZW0gPSBsYXN0ZWx0CiAgICByZXR1cm4gcmV0dXJuaXRlbQoKZGVmIGhlYXByZXBsYWNlKGhlYXAsIGl0ZW0pOgogICAgIiIiUG9wIGFuZCByZXR1cm4gdGhlIGN1cnJlbnQgc21hbGxlc3QgdmFsdWUsIGFuZCBhZGQgdGhlIG5ldyBpdGVtLgoKICAgIFRoaXMgaXMgbW9yZSBlZmZpY2llbnQgdGhhbiBoZWFwcG9wKCkgZm9sbG93ZWQgYnkgaGVhcHB1c2goKSwgYW5kIGNhbiBiZQogICAgbW9yZSBhcHByb3ByaWF0ZSB3aGVuIHVzaW5nIGEgZml4ZWQtc2l6ZSBoZWFwLiAgTm90ZSB0aGF0IHRoZSB2YWx1ZQogICAgcmV0dXJuZWQgbWF5IGJlIGxhcmdlciB0aGFuIGl0ZW0hICBUaGF0IGNvbnN0cmFpbnMgcmVhc29uYWJsZSB1c2VzIG9mCiAgICB0aGlzIHJvdXRpbmUgdW5sZXNzIHdyaXR0ZW4gYXMgcGFydCBvZiBhIGNvbmRpdGlvbmFsIHJlcGxhY2VtZW50OgoKICAgICAgICBpZiBpdGVtID4gaGVhcFswXToKICAgICAgICAgICAgaXRlbSA9IGhlYXByZXBsYWNlKGhlYXAsIGl0ZW0pCiAgICAiIiIKICAgIHJldHVybml0ZW0gPSBoZWFwWzBdICAgICMgcmFpc2VzIGFwcHJvcHJpYXRlIEluZGV4RXJyb3IgaWYgaGVhcCBpcyBlbXB0eQogICAgaGVhcFswXSA9IGl0ZW0KICAgIF9zaWZ0dXAoaGVhcCwgMCkKICAgIHJldHVybiByZXR1cm5pdGVtCgpkZWYgaGVhcHB1c2hwb3AoaGVhcCwgaXRlbSk6CiAgICAiIiJGYXN0IHZlcnNpb24gb2YgYSBoZWFwcHVzaCBmb2xsb3dlZCBieSBhIGhlYXBwb3AuIiIiCiAgICBpZiBoZWFwIGFuZCBoZWFwWzBdIDwgaXRlbToKICAgICAgICBpdGVtLCBoZWFwWzBdID0gaGVhcFswXSwgaXRlbQogICAgICAgIF9zaWZ0dXAoaGVhcCwgMCkKICAgIHJldHVybiBpdGVtCgpkZWYgaGVhcGlmeSh4KToKICAgICIiIlRyYW5zZm9ybSBsaXN0IGludG8gYSBoZWFwLCBpbi1wbGFjZSwgaW4gTyhsZW4oeCkpIHRpbWUuIiIiCiAgICBuID0gbGVuKHgpCiAgICAjIFRyYW5zZm9ybSBib3R0b20tdXAuICBUaGUgbGFyZ2VzdCBpbmRleCB0aGVyZSdzIGFueSBwb2ludCB0byBsb29raW5nIGF0CiAgICAjIGlzIHRoZSBsYXJnZXN0IHdpdGggYSBjaGlsZCBpbmRleCBpbi1yYW5nZSwgc28gbXVzdCBoYXZlIDIqaSArIDEgPCBuLAogICAgIyBvciBpIDwgKG4tMSkvMi4gIElmIG4gaXMgZXZlbiA9IDIqaiwgdGhpcyBpcyAoMipqLTEpLzIgPSBqLTEvMiBzbwogICAgIyBqLTEgaXMgdGhlIGxhcmdlc3QsIHdoaWNoIGlzIG4vLzIgLSAxLiAgSWYgbiBpcyBvZGQgPSAyKmorMSwgdGhpcyBpcwogICAgIyAoMipqKzEtMSkvMiA9IGogc28gai0xIGlzIHRoZSBsYXJnZXN0LCBhbmQgdGhhdCdzIGFnYWluIG4vLzItMS4KICAgIGZvciBpIGluIHJldmVyc2VkKHJhbmdlKG4vLzIpKToKICAgICAgICBfc2lmdHVwKHgsIGkpCgpkZWYgbmxhcmdlc3QobiwgaXRlcmFibGUpOgogICAgIiIiRmluZCB0aGUgbiBsYXJnZXN0IGVsZW1lbnRzIGluIGEgZGF0YXNldC4KCiAgICBFcXVpdmFsZW50IHRvOiAgc29ydGVkKGl0ZXJhYmxlLCByZXZlcnNlPVRydWUpWzpuXQogICAgIiIiCiAgICBpZiBuIDwgMDoKICAgICAgICByZXR1cm4gW10KICAgIGl0ID0gaXRlcihpdGVyYWJsZSkKICAgIHJlc3VsdCA9IGxpc3QoaXNsaWNlKGl0LCBuKSkKICAgIGlmIG5vdCByZXN1bHQ6CiAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgaGVhcGlmeShyZXN1bHQpCiAgICBfaGVhcHB1c2hwb3AgPSBoZWFwcHVzaHBvcAogICAgZm9yIGVsZW0gaW4gaXQ6CiAgICAgICAgX2hlYXBwdXNocG9wKHJlc3VsdCwgZWxlbSkKICAgIHJlc3VsdC5zb3J0KHJldmVyc2U9VHJ1ZSkKICAgIHJldHVybiByZXN1bHQKCmRlZiBuc21hbGxlc3QobiwgaXRlcmFibGUpOgogICAgIiIiRmluZCB0aGUgbiBzbWFsbGVzdCBlbGVtZW50cyBpbiBhIGRhdGFzZXQuCgogICAgRXF1aXZhbGVudCB0bzogIHNvcnRlZChpdGVyYWJsZSlbOm5dCiAgICAiIiIKICAgIGlmIG4gPCAwOgogICAgICAgIHJldHVybiBbXQogICAgaWYgaGFzYXR0cihpdGVyYWJsZSwgJ19fbGVuX18nKSBhbmQgbiAqIDEwIDw9IGxlbihpdGVyYWJsZSk6CiAgICAgICAgIyBGb3Igc21hbGxlciB2YWx1ZXMgb2YgbiwgdGhlIGJpc2VjdCBtZXRob2QgaXMgZmFzdGVyIHRoYW4gYSBtaW5oZWFwLgogICAgICAgICMgSXQgaXMgYWxzbyBtZW1vcnkgZWZmaWNpZW50LCBjb25zdW1pbmcgb25seSBuIGVsZW1lbnRzIG9mIHNwYWNlLgogICAgICAgIGl0ID0gaXRlcihpdGVyYWJsZSkKICAgICAgICByZXN1bHQgPSBzb3J0ZWQoaXNsaWNlKGl0LCAwLCBuKSkKICAgICAgICBpZiBub3QgcmVzdWx0OgogICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgaW5zb3J0ID0gYmlzZWN0Lmluc29ydAogICAgICAgIHBvcCA9IHJlc3VsdC5wb3AKICAgICAgICBsb3MgPSByZXN1bHRbLTFdICAgICMgbG9zIC0tPiBMYXJnZXN0IG9mIHRoZSBuc21hbGxlc3QKICAgICAgICBmb3IgZWxlbSBpbiBpdDoKICAgICAgICAgICAgaWYgZWxlbSA8IGxvczoKICAgICAgICAgICAgICAgIGluc29ydChyZXN1bHQsIGVsZW0pCiAgICAgICAgICAgICAgICBwb3AoKQogICAgICAgICAgICAgICAgbG9zID0gcmVzdWx0Wy0xXQogICAgICAgIHJldHVybiByZXN1bHQKICAgICMgQW4gYWx0ZXJuYXRpdmUgYXBwcm9hY2ggbWFuaWZlc3RzIHRoZSB3aG9sZSBpdGVyYWJsZSBpbiBtZW1vcnkgYnV0CiAgICAjIHNhdmVzIGNvbXBhcmlzb25zIGJ5IGhlYXBpZnlpbmcgYWxsIGF0IG9uY2UuICBBbHNvLCBzYXZlcyB0aW1lCiAgICAjIG92ZXIgYmlzZWN0Lmluc29ydCgpIHdoaWNoIGhhcyBPKG4pIGRhdGEgbW92ZW1lbnQgdGltZSBmb3IgZXZlcnkKICAgICMgaW5zZXJ0aW9uLiAgRmluZGluZyB0aGUgbiBzbWFsbGVzdCBvZiBhbiBtIGxlbmd0aCBpdGVyYWJsZSByZXF1aXJlcwogICAgIyAgICBPKG0pICsgTyhuIGxvZyBtKSBjb21wYXJpc29ucy4KICAgIGggPSBsaXN0KGl0ZXJhYmxlKQogICAgaGVhcGlmeShoKQogICAgcmV0dXJuIGxpc3QobWFwKGhlYXBwb3AsIHJlcGVhdChoLCBtaW4obiwgbGVuKGgpKSkpKQoKIyAnaGVhcCcgaXMgYSBoZWFwIGF0IGFsbCBpbmRpY2VzID49IHN0YXJ0cG9zLCBleGNlcHQgcG9zc2libHkgZm9yIHBvcy4gIHBvcwojIGlzIHRoZSBpbmRleCBvZiBhIGxlYWYgd2l0aCBhIHBvc3NpYmx5IG91dC1vZi1vcmRlciB2YWx1ZS4gIFJlc3RvcmUgdGhlCiMgaGVhcCBpbnZhcmlhbnQuCmRlZiBfc2lmdGRvd24oaGVhcCwgc3RhcnRwb3MsIHBvcyk6CiAgICBuZXdpdGVtID0gaGVhcFtwb3NdCiAgICAjIEZvbGxvdyB0aGUgcGF0aCB0byB0aGUgcm9vdCwgbW92aW5nIHBhcmVudHMgZG93biB1bnRpbCBmaW5kaW5nIGEgcGxhY2UKICAgICMgbmV3aXRlbSBmaXRzLgogICAgd2hpbGUgcG9zID4gc3RhcnRwb3M6CiAgICAgICAgcGFyZW50cG9zID0gKHBvcyAtIDEpID4+IDEKICAgICAgICBwYXJlbnQgPSBoZWFwW3BhcmVudHBvc10KICAgICAgICBpZiBuZXdpdGVtIDwgcGFyZW50OgogICAgICAgICAgICBoZWFwW3Bvc10gPSBwYXJlbnQKICAgICAgICAgICAgcG9zID0gcGFyZW50cG9zCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgYnJlYWsKICAgIGhlYXBbcG9zXSA9IG5ld2l0ZW0KCiMgVGhlIGNoaWxkIGluZGljZXMgb2YgaGVhcCBpbmRleCBwb3MgYXJlIGFscmVhZHkgaGVhcHMsIGFuZCB3ZSB3YW50IHRvIG1ha2UKIyBhIGhlYXAgYXQgaW5kZXggcG9zIHRvby4gIFdlIGRvIHRoaXMgYnkgYnViYmxpbmcgdGhlIHNtYWxsZXIgY2hpbGQgb2YKIyBwb3MgdXAgKGFuZCBzbyBvbiB3aXRoIHRoYXQgY2hpbGQncyBjaGlsZHJlbiwgZXRjKSB1bnRpbCBoaXR0aW5nIGEgbGVhZiwKIyB0aGVuIHVzaW5nIF9zaWZ0ZG93biB0byBtb3ZlIHRoZSBvZGRiYWxsIG9yaWdpbmFsbHkgYXQgaW5kZXggcG9zIGludG8gcGxhY2UuCiMKIyBXZSAqY291bGQqIGJyZWFrIG91dCBvZiB0aGUgbG9vcCBhcyBzb29uIGFzIHdlIGZpbmQgYSBwb3Mgd2hlcmUgbmV3aXRlbSA8PQojIGJvdGggaXRzIGNoaWxkcmVuLCBidXQgdHVybnMgb3V0IHRoYXQncyBub3QgYSBnb29kIGlkZWEsIGFuZCBkZXNwaXRlIHRoYXQKIyBtYW55IGJvb2tzIHdyaXRlIHRoZSBhbGdvcml0aG0gdGhhdCB3YXkuICBEdXJpbmcgYSBoZWFwIHBvcCwgdGhlIGxhc3QgYXJyYXkKIyBlbGVtZW50IGlzIHNpZnRlZCBpbiwgYW5kIHRoYXQgdGVuZHMgdG8gYmUgbGFyZ2UsIHNvIHRoYXQgY29tcGFyaW5nIGl0CiMgYWdhaW5zdCB2YWx1ZXMgc3RhcnRpbmcgZnJvbSB0aGUgcm9vdCB1c3VhbGx5IGRvZXNuJ3QgcGF5ICg9IHVzdWFsbHkgZG9lc24ndAojIGdldCB1cyBvdXQgb2YgdGhlIGxvb3AgZWFybHkpLiAgU2VlIEtudXRoLCBWb2x1bWUgMywgd2hlcmUgdGhpcyBpcwojIGV4cGxhaW5lZCBhbmQgcXVhbnRpZmllZCBpbiBhbiBleGVyY2lzZS4KIwojIEN1dHRpbmcgdGhlICMgb2YgY29tcGFyaXNvbnMgaXMgaW1wb3J0YW50LCBzaW5jZSB0aGVzZSByb3V0aW5lcyBoYXZlIG5vCiMgd2F5IHRvIGV4dHJhY3QgInRoZSBwcmlvcml0eSIgZnJvbSBhbiBhcnJheSBlbGVtZW50LCBzbyB0aGF0IGludGVsbGlnZW5jZQojIGlzIGxpa2VseSB0byBiZSBoaWRpbmcgaW4gY3VzdG9tIGNvbXBhcmlzb24gbWV0aG9kcywgb3IgaW4gYXJyYXkgZWxlbWVudHMKIyBzdG9yaW5nIChwcmlvcml0eSwgcmVjb3JkKSB0dXBsZXMuICBDb21wYXJpc29ucyBhcmUgdGh1cyBwb3RlbnRpYWxseQojIGV4cGVuc2l2ZS4KIwojIE9uIHJhbmRvbSBhcnJheXMgb2YgbGVuZ3RoIDEwMDAsIG1ha2luZyB0aGlzIGNoYW5nZSBjdXQgdGhlIG51bWJlciBvZgojIGNvbXBhcmlzb25zIG1hZGUgYnkgaGVhcGlmeSgpIGEgbGl0dGxlLCBhbmQgdGhvc2UgbWFkZSBieSBleGhhdXN0aXZlCiMgaGVhcHBvcCgpIGEgbG90LCBpbiBhY2NvcmQgd2l0aCB0aGVvcnkuICBIZXJlIGFyZSB0eXBpY2FsIHJlc3VsdHMgZnJvbSAzCiMgcnVucyAoMyBqdXN0IHRvIGRlbW9uc3RyYXRlIGhvdyBzbWFsbCB0aGUgdmFyaWFuY2UgaXMpOgojCiMgQ29tcGFyZXMgbmVlZGVkIGJ5IGhlYXBpZnkgICAgIENvbXBhcmVzIG5lZWRlZCBieSAxMDAwIGhlYXBwb3BzCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgMTgzNyBjdXQgdG8gMTY2MyAgICAgICAgICAgICAgIDE0OTk2IGN1dCB0byA4NjgwCiMgMTg1NSBjdXQgdG8gMTY1OSAgICAgICAgICAgICAgIDE0OTY2IGN1dCB0byA4Njc4CiMgMTg0NyBjdXQgdG8gMTY2MCAgICAgICAgICAgICAgIDE1MDI0IGN1dCB0byA4NzAzCiMKIyBCdWlsZGluZyB0aGUgaGVhcCBieSB1c2luZyBoZWFwcHVzaCgpIDEwMDAgdGltZXMgaW5zdGVhZCByZXF1aXJlZAojIDIxOTgsIDIxNDgsIGFuZCAyMjE5IGNvbXBhcmVzOiAgaGVhcGlmeSgpIGlzIG1vcmUgZWZmaWNpZW50LCB3aGVuCiMgeW91IGNhbiB1c2UgaXQuCiMKIyBUaGUgdG90YWwgY29tcGFyZXMgbmVlZGVkIGJ5IGxpc3Quc29ydCgpIG9uIHRoZSBzYW1lIGxpc3RzIHdlcmUgODYyNywKIyA4NjI3LCBhbmQgODYzMiAodGhpcyBzaG91bGQgYmUgY29tcGFyZWQgdG8gdGhlIHN1bSBvZiBoZWFwaWZ5KCkgYW5kCiMgaGVhcHBvcCgpIGNvbXBhcmVzKTogIGxpc3Quc29ydCgpIGlzICh1bnN1cnByaXNpbmdseSEpIG1vcmUgZWZmaWNpZW50CiMgZm9yIHNvcnRpbmcuCgpkZWYgX3NpZnR1cChoZWFwLCBwb3MpOgogICAgZW5kcG9zID0gbGVuKGhlYXApCiAgICBzdGFydHBvcyA9IHBvcwogICAgbmV3aXRlbSA9IGhlYXBbcG9zXQogICAgIyBCdWJibGUgdXAgdGhlIHNtYWxsZXIgY2hpbGQgdW50aWwgaGl0dGluZyBhIGxlYWYuCiAgICBjaGlsZHBvcyA9IDIqcG9zICsgMSAgICAjIGxlZnRtb3N0IGNoaWxkIHBvc2l0aW9uCiAgICB3aGlsZSBjaGlsZHBvcyA8IGVuZHBvczoKICAgICAgICAjIFNldCBjaGlsZHBvcyB0byBpbmRleCBvZiBzbWFsbGVyIGNoaWxkLgogICAgICAgIHJpZ2h0cG9zID0gY2hpbGRwb3MgKyAxCiAgICAgICAgaWYgcmlnaHRwb3MgPCBlbmRwb3MgYW5kIG5vdCBoZWFwW2NoaWxkcG9zXSA8IGhlYXBbcmlnaHRwb3NdOgogICAgICAgICAgICBjaGlsZHBvcyA9IHJpZ2h0cG9zCiAgICAgICAgIyBNb3ZlIHRoZSBzbWFsbGVyIGNoaWxkIHVwLgogICAgICAgIGhlYXBbcG9zXSA9IGhlYXBbY2hpbGRwb3NdCiAgICAgICAgcG9zID0gY2hpbGRwb3MKICAgICAgICBjaGlsZHBvcyA9IDIqcG9zICsgMQogICAgIyBUaGUgbGVhZiBhdCBwb3MgaXMgZW1wdHkgbm93LiAgUHV0IG5ld2l0ZW0gdGhlcmUsIGFuZCBidWJibGUgaXQgdXAKICAgICMgdG8gaXRzIGZpbmFsIHJlc3RpbmcgcGxhY2UgKGJ5IHNpZnRpbmcgaXRzIHBhcmVudHMgZG93bikuCiAgICBoZWFwW3Bvc10gPSBuZXdpdGVtCiAgICBfc2lmdGRvd24oaGVhcCwgc3RhcnRwb3MsIHBvcykKCiMgbm90IGF2YWlsYWJsZSBpbiBicnl0aG9uCiMgSWYgYXZhaWxhYmxlLCB1c2UgQyBpbXBsZW1lbnRhdGlvbgojdHJ5OgojICAgIGZyb20gX2hlYXBxIGltcG9ydCAqCiNleGNlcHQgSW1wb3J0RXJyb3I6CiMgICAgcGFzcwoKZGVmIG1lcmdlKCppdGVyYWJsZXMpOgogICAgJycnTWVyZ2UgbXVsdGlwbGUgc29ydGVkIGlucHV0cyBpbnRvIGEgc2luZ2xlIHNvcnRlZCBvdXRwdXQuCgogICAgU2ltaWxhciB0byBzb3J0ZWQoaXRlcnRvb2xzLmNoYWluKCppdGVyYWJsZXMpKSBidXQgcmV0dXJucyBhIGdlbmVyYXRvciwKICAgIGRvZXMgbm90IHB1bGwgdGhlIGRhdGEgaW50byBtZW1vcnkgYWxsIGF0IG9uY2UsIGFuZCBhc3N1bWVzIHRoYXQgZWFjaCBvZgogICAgdGhlIGlucHV0IHN0cmVhbXMgaXMgYWxyZWFkeSBzb3J0ZWQgKHNtYWxsZXN0IHRvIGxhcmdlc3QpLgoKICAgID4+PiBsaXN0KG1lcmdlKFsxLDMsNSw3XSwgWzAsMiw0LDhdLCBbNSwxMCwxNSwyMF0sIFtdLCBbMjVdKSkKICAgIFswLCAxLCAyLCAzLCA0LCA1LCA1LCA3LCA4LCAxMCwgMTUsIDIwLCAyNV0KCiAgICAnJycKICAgIF9oZWFwcG9wLCBfaGVhcHJlcGxhY2UsIF9TdG9wSXRlcmF0aW9uID0gaGVhcHBvcCwgaGVhcHJlcGxhY2UsIFN0b3BJdGVyYXRpb24KCiAgICBoID0gW10KICAgIGhfYXBwZW5kID0gaC5hcHBlbmQKICAgIGZvciBpdG51bSwgaXQgaW4gZW51bWVyYXRlKG1hcChpdGVyLCBpdGVyYWJsZXMpKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG5leHQgPSBpdC5fX25leHRfXwogICAgICAgICAgICBoX2FwcGVuZChbbmV4dCgpLCBpdG51bSwgbmV4dF0pCiAgICAgICAgZXhjZXB0IF9TdG9wSXRlcmF0aW9uOgogICAgICAgICAgICBwYXNzCiAgICBoZWFwaWZ5KGgpCgogICAgd2hpbGUgMToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHdoaWxlIDE6CiAgICAgICAgICAgICAgICB2LCBpdG51bSwgbmV4dCA9IHMgPSBoWzBdICAgIyByYWlzZXMgSW5kZXhFcnJvciB3aGVuIGggaXMgZW1wdHkKICAgICAgICAgICAgICAgIHlpZWxkIHYKICAgICAgICAgICAgICAgIHNbMF0gPSBuZXh0KCkgICAgICAgICAgICAgICAjIHJhaXNlcyBTdG9wSXRlcmF0aW9uIHdoZW4gZXhoYXVzdGVkCiAgICAgICAgICAgICAgICBfaGVhcHJlcGxhY2UoaCwgcykgICAgICAgICAgIyByZXN0b3JlIGhlYXAgY29uZGl0aW9uCiAgICAgICAgZXhjZXB0IF9TdG9wSXRlcmF0aW9uOgogICAgICAgICAgICBfaGVhcHBvcChoKSAgICAgICAgICAgICAgICAgICAgICMgcmVtb3ZlIGVtcHR5IGl0ZXJhdG9yCiAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgIHJldHVybgoKIyBFeHRlbmQgdGhlIGltcGxlbWVudGF0aW9ucyBvZiBuc21hbGxlc3QgYW5kIG5sYXJnZXN0IHRvIHVzZSBhIGtleT0gYXJndW1lbnQKX25zbWFsbGVzdCA9IG5zbWFsbGVzdApkZWYgbnNtYWxsZXN0KG4sIGl0ZXJhYmxlLCBrZXk9Tm9uZSk6CiAgICAiIiJGaW5kIHRoZSBuIHNtYWxsZXN0IGVsZW1lbnRzIGluIGEgZGF0YXNldC4KCiAgICBFcXVpdmFsZW50IHRvOiAgc29ydGVkKGl0ZXJhYmxlLCBrZXk9a2V5KVs6bl0KICAgICIiIgogICAgIyBTaG9ydC1jdXQgZm9yIG49PTEgaXMgdG8gdXNlIG1pbigpIHdoZW4gbGVuKGl0ZXJhYmxlKT4wCiAgICBpZiBuID09IDE6CiAgICAgICAgaXQgPSBpdGVyKGl0ZXJhYmxlKQogICAgICAgIGhlYWQgPSBsaXN0KGlzbGljZShpdCwgMSkpCiAgICAgICAgaWYgbm90IGhlYWQ6CiAgICAgICAgICAgIHJldHVybiBbXQogICAgICAgIGlmIGtleSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gW21pbihjaGFpbihoZWFkLCBpdCkpXQogICAgICAgIHJldHVybiBbbWluKGNoYWluKGhlYWQsIGl0KSwga2V5PWtleSldCgogICAgIyBXaGVuIG4+PXNpemUsIGl0J3MgZmFzdGVyIHRvIHVzZSBzb3J0ZWQoKQogICAgdHJ5OgogICAgICAgIHNpemUgPSBsZW4oaXRlcmFibGUpCiAgICBleGNlcHQgKFR5cGVFcnJvciwgQXR0cmlidXRlRXJyb3IpOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgaWYgbiA+PSBzaXplOgogICAgICAgICAgICByZXR1cm4gc29ydGVkKGl0ZXJhYmxlLCBrZXk9a2V5KVs6bl0KCiAgICAjIFdoZW4ga2V5IGlzIG5vbmUsIHVzZSBzaW1wbGVyIGRlY29yYXRpb24KICAgIGlmIGtleSBpcyBOb25lOgogICAgICAgIGl0ID0gemlwKGl0ZXJhYmxlLCBjb3VudCgpKSAgICAgICAgICAgICAgICAgICAgICAgICAjIGRlY29yYXRlCiAgICAgICAgcmVzdWx0ID0gX25zbWFsbGVzdChuLCBpdCkKICAgICAgICByZXR1cm4gW3JbMF0gZm9yIHIgaW4gcmVzdWx0XSAgICAgICAgICAgICAgICAgICAgICAgIyB1bmRlY29yYXRlCgogICAgIyBHZW5lcmFsIGNhc2UsIHNsb3dlc3QgbWV0aG9kCiAgICBpbjEsIGluMiA9IHRlZShpdGVyYWJsZSkKICAgIGl0ID0gemlwKG1hcChrZXksIGluMSksIGNvdW50KCksIGluMikgICAgICAgICAgICAgICAgICAgIyBkZWNvcmF0ZQogICAgcmVzdWx0ID0gX25zbWFsbGVzdChuLCBpdCkKICAgIHJldHVybiBbclsyXSBmb3IgciBpbiByZXN1bHRdICAgICAgICAgICAgICAgICAgICAgICAgICAgIyB1bmRlY29yYXRlCgoKX25sYXJnZXN0ID0gbmxhcmdlc3QKZGVmIG5sYXJnZXN0KG4sIGl0ZXJhYmxlLCBrZXk9Tm9uZSk6CiAgICAiIiJGaW5kIHRoZSBuIGxhcmdlc3QgZWxlbWVudHMgaW4gYSBkYXRhc2V0LgogICAgCiAgICAgRXF1aXZhbGVudCB0bzogIHNvcnRlZChpdGVyYWJsZSwga2V5PWtleSwgcmV2ZXJzZT1UcnVlKVs6bl0KCiAgICAgU2hvcnQtY3V0IGZvciBuPT0xIGlzIHRvIHVzZSBtYXgoKSB3aGVuIGxlbihpdGVyYWJsZSk+MAogICAgIiIiCiAgICBpZiBuID09IDE6CiAgICAgICAgaXQgPSBpdGVyKGl0ZXJhYmxlKQogICAgICAgIGhlYWQgPSBsaXN0KGlzbGljZShpdCwgMSkpCiAgICAgICAgaWYgbm90IGhlYWQ6CiAgICAgICAgICAgIHJldHVybiBbXQogICAgICAgIGlmIGtleSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gW21heChjaGFpbihoZWFkLCBpdCkpXQogICAgICAgIHJldHVybiBbbWF4KGNoYWluKGhlYWQsIGl0KSwga2V5PWtleSldCgogICAgIyBXaGVuIG4+PXNpemUsIGl0J3MgZmFzdGVyIHRvIHVzZSBzb3J0ZWQoKQogICAgdHJ5OgogICAgICAgIHNpemUgPSBsZW4oaXRlcmFibGUpCiAgICBleGNlcHQgKFR5cGVFcnJvciwgQXR0cmlidXRlRXJyb3IpOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgaWYgbiA+PSBzaXplOgogICAgICAgICAgICByZXR1cm4gc29ydGVkKGl0ZXJhYmxlLCBrZXk9a2V5LCByZXZlcnNlPVRydWUpWzpuXQoKICAgICMgV2hlbiBrZXkgaXMgbm9uZSwgdXNlIHNpbXBsZXIgZGVjb3JhdGlvbgogICAgaWYga2V5IGlzIE5vbmU6CiAgICAgICAgaXQgPSB6aXAoaXRlcmFibGUsIGNvdW50KDAsLTEpKSAgICAgICAgICAgICAgICAgICAgICMgZGVjb3JhdGUKICAgICAgICByZXN1bHQgPSBfbmxhcmdlc3QobiwgaXQpCiAgICAgICAgcmV0dXJuIFtyWzBdIGZvciByIGluIHJlc3VsdF0gICAgICAgICAgICAgICAgICAgICAgICMgdW5kZWNvcmF0ZQoKICAgICMgR2VuZXJhbCBjYXNlLCBzbG93ZXN0IG1ldGhvZAogICAgaW4xLCBpbjIgPSB0ZWUoaXRlcmFibGUpCiAgICBpdCA9IHppcChtYXAoa2V5LCBpbjEpLCBjb3VudCgwLC0xKSwgaW4yKSAgICAgICAgICAgICAgICMgZGVjb3JhdGUKICAgIHJlc3VsdCA9IF9ubGFyZ2VzdChuLCBpdCkKICAgIHJldHVybiBbclsyXSBmb3IgciBpbiByZXN1bHRdICAgICAgICAgICAgICAgICAgICAgICAgICAgIyB1bmRlY29yYXRlCg==',
'/Lib/calendar.py':'IiIiQ2FsZW5kYXIgcHJpbnRpbmcgZnVuY3Rpb25zCgpOb3RlIHdoZW4gY29tcGFyaW5nIHRoZXNlIGNhbGVuZGFycyB0byB0aGUgb25lcyBwcmludGVkIGJ5IGNhbCgxKTogQnkKZGVmYXVsdCwgdGhlc2UgY2FsZW5kYXJzIGhhdmUgTW9uZGF5IGFzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWssIGFuZApTdW5kYXkgYXMgdGhlIGxhc3QgKHRoZSBFdXJvcGVhbiBjb252ZW50aW9uKS4gVXNlIHNldGZpcnN0d2Vla2RheSgpIHRvCnNldCB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwPU1vbmRheSwgNj1TdW5kYXkpLiIiIgoKaW1wb3J0IHN5cwppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGxvY2FsZSBhcyBfbG9jYWxlCgpfX2FsbF9fID0gWyJJbGxlZ2FsTW9udGhFcnJvciIsICJJbGxlZ2FsV2Vla2RheUVycm9yIiwgInNldGZpcnN0d2Vla2RheSIsCiAgICAgICAgICAgImZpcnN0d2Vla2RheSIsICJpc2xlYXAiLCAibGVhcGRheXMiLCAid2Vla2RheSIsICJtb250aHJhbmdlIiwKICAgICAgICAgICAibW9udGhjYWxlbmRhciIsICJwcm1vbnRoIiwgIm1vbnRoIiwgInByY2FsIiwgImNhbGVuZGFyIiwKICAgICAgICAgICAidGltZWdtIiwgIm1vbnRoX25hbWUiLCAibW9udGhfYWJiciIsICJkYXlfbmFtZSIsICJkYXlfYWJiciJdCgojIEV4Y2VwdGlvbiByYWlzZWQgZm9yIGJhZCBpbnB1dCAod2l0aCBzdHJpbmcgcGFyYW1ldGVyIGZvciBkZXRhaWxzKQplcnJvciA9IFZhbHVlRXJyb3IKCiMgRXhjZXB0aW9ucyByYWlzZWQgZm9yIGJhZCBpbnB1dApjbGFzcyBJbGxlZ2FsTW9udGhFcnJvcihWYWx1ZUVycm9yKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtb250aCk6CiAgICAgICAgc2VsZi5tb250aCA9IG1vbnRoCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gImJhZCBtb250aCBudW1iZXIgJXI7IG11c3QgYmUgMS0xMiIgJSBzZWxmLm1vbnRoCgoKY2xhc3MgSWxsZWdhbFdlZWtkYXlFcnJvcihWYWx1ZUVycm9yKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB3ZWVrZGF5KToKICAgICAgICBzZWxmLndlZWtkYXkgPSB3ZWVrZGF5CiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gImJhZCB3ZWVrZGF5IG51bWJlciAlcjsgbXVzdCBiZSAwIChNb25kYXkpIHRvIDYgKFN1bmRheSkiICUgc2VsZi53ZWVrZGF5CgoKIyBDb25zdGFudHMgZm9yIG1vbnRocyByZWZlcmVuY2VkIGxhdGVyCkphbnVhcnkgPSAxCkZlYnJ1YXJ5ID0gMgoKIyBOdW1iZXIgb2YgZGF5cyBwZXIgbW9udGggKGV4Y2VwdCBmb3IgRmVicnVhcnkgaW4gbGVhcCB5ZWFycykKbWRheXMgPSBbMCwgMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0KCiMgVGhpcyBtb2R1bGUgdXNlZCB0byBoYXZlIGhhcmQtY29kZWQgbGlzdHMgb2YgZGF5IGFuZCBtb250aCBuYW1lcywgYXMKIyBFbmdsaXNoIHN0cmluZ3MuICBUaGUgY2xhc3NlcyBmb2xsb3dpbmcgZW11bGF0ZSBhIHJlYWQtb25seSB2ZXJzaW9uIG9mCiMgdGhhdCwgYnV0IHN1cHBseSBsb2NhbGl6ZWQgbmFtZXMuICBOb3RlIHRoYXQgdGhlIHZhbHVlcyBhcmUgY29tcHV0ZWQKIyBmcmVzaCBvbiBlYWNoIGNhbGwsIGluIGNhc2UgdGhlIHVzZXIgY2hhbmdlcyBsb2NhbGUgYmV0d2VlbiBjYWxscy4KCmNsYXNzIF9sb2NhbGl6ZWRfbW9udGg6CgogICAgX21vbnRocyA9IFtkYXRldGltZS5kYXRlKDIwMDEsIGkrMSwgMSkuc3RyZnRpbWUgZm9yIGkgaW4gcmFuZ2UoMTIpXQogICAgX21vbnRocy5pbnNlcnQoMCwgbGFtYmRhIHg6ICIiKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmb3JtYXQpOgogICAgICAgIHNlbGYuZm9ybWF0ID0gZm9ybWF0CgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGkpOgogICAgICAgIGZ1bmNzID0gc2VsZi5fbW9udGhzW2ldCiAgICAgICAgaWYgaXNpbnN0YW5jZShpLCBzbGljZSk6CiAgICAgICAgICAgIHJldHVybiBbZihzZWxmLmZvcm1hdCkgZm9yIGYgaW4gZnVuY3NdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGZ1bmNzKHNlbGYuZm9ybWF0KQoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiAxMwoKCmNsYXNzIF9sb2NhbGl6ZWRfZGF5OgoKICAgICMgSmFudWFyeSAxLCAyMDAxLCB3YXMgYSBNb25kYXkuCiAgICBfZGF5cyA9IFtkYXRldGltZS5kYXRlKDIwMDEsIDEsIGkrMSkuc3RyZnRpbWUgZm9yIGkgaW4gcmFuZ2UoNyldCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZvcm1hdCk6CiAgICAgICAgc2VsZi5mb3JtYXQgPSBmb3JtYXQKCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaSk6CiAgICAgICAgZnVuY3MgPSBzZWxmLl9kYXlzW2ldCiAgICAgICAgaWYgaXNpbnN0YW5jZShpLCBzbGljZSk6CiAgICAgICAgICAgIHJldHVybiBbZihzZWxmLmZvcm1hdCkgZm9yIGYgaW4gZnVuY3NdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGZ1bmNzKHNlbGYuZm9ybWF0KQoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiA3CgoKIyBGdWxsIGFuZCBhYmJyZXZpYXRlZCBuYW1lcyBvZiB3ZWVrZGF5cwpkYXlfbmFtZSA9IF9sb2NhbGl6ZWRfZGF5KCclQScpCmRheV9hYmJyID0gX2xvY2FsaXplZF9kYXkoJyVhJykKCiMgRnVsbCBhbmQgYWJicmV2aWF0ZWQgbmFtZXMgb2YgbW9udGhzICgxLWJhc2VkIGFycmF5cyEhISkKbW9udGhfbmFtZSA9IF9sb2NhbGl6ZWRfbW9udGgoJyVCJykKbW9udGhfYWJiciA9IF9sb2NhbGl6ZWRfbW9udGgoJyViJykKCiMgQ29uc3RhbnRzIGZvciB3ZWVrZGF5cwooTU9OREFZLCBUVUVTREFZLCBXRURORVNEQVksIFRIVVJTREFZLCBGUklEQVksIFNBVFVSREFZLCBTVU5EQVkpID0gcmFuZ2UoNykKCgpkZWYgaXNsZWFwKHllYXIpOgogICAgIiIiUmV0dXJuIFRydWUgZm9yIGxlYXAgeWVhcnMsIEZhbHNlIGZvciBub24tbGVhcCB5ZWFycy4iIiIKICAgIHJldHVybiB5ZWFyICUgNCA9PSAwIGFuZCAoeWVhciAlIDEwMCAhPSAwIG9yIHllYXIgJSA0MDAgPT0gMCkKCgpkZWYgbGVhcGRheXMoeTEsIHkyKToKICAgICIiIlJldHVybiBudW1iZXIgb2YgbGVhcCB5ZWFycyBpbiByYW5nZSBbeTEsIHkyKS4KICAgICAgIEFzc3VtZSB5MSA8PSB5Mi4iIiIKICAgIHkxIC09IDEKICAgIHkyIC09IDEKICAgIHJldHVybiAoeTIvLzQgLSB5MS8vNCkgLSAoeTIvLzEwMCAtIHkxLy8xMDApICsgKHkyLy80MDAgLSB5MS8vNDAwKQoKCmRlZiB3ZWVrZGF5KHllYXIsIG1vbnRoLCBkYXkpOgogICAgIiIiUmV0dXJuIHdlZWtkYXkgKDAtNiB+IE1vbi1TdW4pIGZvciB5ZWFyICgxOTcwLS4uLiksIG1vbnRoICgxLTEyKSwKICAgICAgIGRheSAoMS0zMSkuIiIiCiAgICByZXR1cm4gZGF0ZXRpbWUuZGF0ZSh5ZWFyLCBtb250aCwgZGF5KS53ZWVrZGF5KCkKCgpkZWYgbW9udGhyYW5nZSh5ZWFyLCBtb250aCk6CiAgICAiIiJSZXR1cm4gd2Vla2RheSAoMC02IH4gTW9uLVN1bikgYW5kIG51bWJlciBvZiBkYXlzICgyOC0zMSkgZm9yCiAgICAgICB5ZWFyLCBtb250aC4iIiIKICAgIGlmIG5vdCAxIDw9IG1vbnRoIDw9IDEyOgogICAgICAgIHJhaXNlIElsbGVnYWxNb250aEVycm9yKG1vbnRoKQogICAgZGF5MSA9IHdlZWtkYXkoeWVhciwgbW9udGgsIDEpCiAgICBuZGF5cyA9IG1kYXlzW21vbnRoXSArIChtb250aCA9PSBGZWJydWFyeSBhbmQgaXNsZWFwKHllYXIpKQogICAgcmV0dXJuIGRheTEsIG5kYXlzCgoKY2xhc3MgQ2FsZW5kYXIob2JqZWN0KToKICAgICIiIgogICAgQmFzZSBjYWxlbmRhciBjbGFzcy4gVGhpcyBjbGFzcyBkb2Vzbid0IGRvIGFueSBmb3JtYXR0aW5nLiBJdCBzaW1wbHkKICAgIHByb3ZpZGVzIGRhdGEgdG8gc3ViY2xhc3Nlcy4KICAgICIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmaXJzdHdlZWtkYXk9MCk6CiAgICAgICAgc2VsZi5maXJzdHdlZWtkYXkgPSBmaXJzdHdlZWtkYXkgIyAwID0gTW9uZGF5LCA2ID0gU3VuZGF5CgogICAgZGVmIGdldGZpcnN0d2Vla2RheShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fZmlyc3R3ZWVrZGF5ICUgNwoKICAgIGRlZiBzZXRmaXJzdHdlZWtkYXkoc2VsZiwgZmlyc3R3ZWVrZGF5KToKICAgICAgICBzZWxmLl9maXJzdHdlZWtkYXkgPSBmaXJzdHdlZWtkYXkKCiAgICBmaXJzdHdlZWtkYXkgPSBwcm9wZXJ0eShnZXRmaXJzdHdlZWtkYXksIHNldGZpcnN0d2Vla2RheSkKCiAgICBkZWYgaXRlcndlZWtkYXlzKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGl0ZXJhdG9yIGZvciBvbmUgd2VlayBvZiB3ZWVrZGF5IG51bWJlcnMgc3RhcnRpbmcgd2l0aCB0aGUKICAgICAgICBjb25maWd1cmVkIGZpcnN0IG9uZS4KICAgICAgICAiIiIKICAgICAgICBmb3IgaSBpbiByYW5nZShzZWxmLmZpcnN0d2Vla2RheSwgc2VsZi5maXJzdHdlZWtkYXkgKyA3KToKICAgICAgICAgICAgeWllbGQgaSU3CgogICAgZGVmIGl0ZXJtb250aGRhdGVzKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYW4gaXRlcmF0b3IgZm9yIG9uZSBtb250aC4gVGhlIGl0ZXJhdG9yIHdpbGwgeWllbGQgZGF0ZXRpbWUuZGF0ZQogICAgICAgIHZhbHVlcyBhbmQgd2lsbCBhbHdheXMgaXRlcmF0ZSB0aHJvdWdoIGNvbXBsZXRlIHdlZWtzLCBzbyBpdCB3aWxsIHlpZWxkCiAgICAgICAgZGF0ZXMgb3V0c2lkZSB0aGUgc3BlY2lmaWVkIG1vbnRoLgogICAgICAgICIiIgogICAgICAgIGRhdGUgPSBkYXRldGltZS5kYXRlKHllYXIsIG1vbnRoLCAxKQogICAgICAgICMgR28gYmFjayB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSB3ZWVrCiAgICAgICAgZGF5cyA9IChkYXRlLndlZWtkYXkoKSAtIHNlbGYuZmlyc3R3ZWVrZGF5KSAlIDcKICAgICAgICBkYXRlIC09IGRhdGV0aW1lLnRpbWVkZWx0YShkYXlzPWRheXMpCiAgICAgICAgb25lZGF5ID0gZGF0ZXRpbWUudGltZWRlbHRhKGRheXM9MSkKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB5aWVsZCBkYXRlCiAgICAgICAgICAgIGRhdGUgKz0gb25lZGF5CiAgICAgICAgICAgIGlmIGRhdGUubW9udGggIT0gbW9udGggYW5kIGRhdGUud2Vla2RheSgpID09IHNlbGYuZmlyc3R3ZWVrZGF5OgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICBkZWYgaXRlcm1vbnRoZGF5czIoc2VsZiwgeWVhciwgbW9udGgpOgogICAgICAgICIiIgogICAgICAgIExpa2UgaXRlcm1vbnRoZGF0ZXMoKSwgYnV0IHdpbGwgeWllbGQgKGRheSBudW1iZXIsIHdlZWtkYXkgbnVtYmVyKQogICAgICAgIHR1cGxlcy4gRm9yIGRheXMgb3V0c2lkZSB0aGUgc3BlY2lmaWVkIG1vbnRoIHRoZSBkYXkgbnVtYmVyIGlzIDAuCiAgICAgICAgIiIiCiAgICAgICAgZm9yIGRhdGUgaW4gc2VsZi5pdGVybW9udGhkYXRlcyh5ZWFyLCBtb250aCk6CiAgICAgICAgICAgIGlmIGRhdGUubW9udGggIT0gbW9udGg6CiAgICAgICAgICAgICAgICB5aWVsZCAoMCwgZGF0ZS53ZWVrZGF5KCkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB5aWVsZCAoZGF0ZS5kYXksIGRhdGUud2Vla2RheSgpKQoKICAgIGRlZiBpdGVybW9udGhkYXlzKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBMaWtlIGl0ZXJtb250aGRhdGVzKCksIGJ1dCB3aWxsIHlpZWxkIGRheSBudW1iZXJzLiBGb3IgZGF5cyBvdXRzaWRlCiAgICAgICAgdGhlIHNwZWNpZmllZCBtb250aCB0aGUgZGF5IG51bWJlciBpcyAwLgogICAgICAgICIiIgogICAgICAgIGZvciBkYXRlIGluIHNlbGYuaXRlcm1vbnRoZGF0ZXMoeWVhciwgbW9udGgpOgogICAgICAgICAgICBpZiBkYXRlLm1vbnRoICE9IG1vbnRoOgogICAgICAgICAgICAgICAgeWllbGQgMAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgeWllbGQgZGF0ZS5kYXkKCiAgICBkZWYgbW9udGhkYXRlc2NhbGVuZGFyKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBtYXRyaXggKGxpc3Qgb2YgbGlzdHMpIHJlcHJlc2VudGluZyBhIG1vbnRoJ3MgY2FsZW5kYXIuCiAgICAgICAgRWFjaCByb3cgcmVwcmVzZW50cyBhIHdlZWs7IHdlZWsgZW50cmllcyBhcmUgZGF0ZXRpbWUuZGF0ZSB2YWx1ZXMuCiAgICAgICAgIiIiCiAgICAgICAgZGF0ZXMgPSBsaXN0KHNlbGYuaXRlcm1vbnRoZGF0ZXMoeWVhciwgbW9udGgpKQogICAgICAgIHJldHVybiBbIGRhdGVzW2k6aSs3XSBmb3IgaSBpbiByYW5nZSgwLCBsZW4oZGF0ZXMpLCA3KSBdCgogICAgZGVmIG1vbnRoZGF5czJjYWxlbmRhcihzZWxmLCB5ZWFyLCBtb250aCk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgbWF0cml4IHJlcHJlc2VudGluZyBhIG1vbnRoJ3MgY2FsZW5kYXIuCiAgICAgICAgRWFjaCByb3cgcmVwcmVzZW50cyBhIHdlZWs7IHdlZWsgZW50cmllcyBhcmUKICAgICAgICAoZGF5IG51bWJlciwgd2Vla2RheSBudW1iZXIpIHR1cGxlcy4gRGF5IG51bWJlcnMgb3V0c2lkZSB0aGlzIG1vbnRoCiAgICAgICAgYXJlIHplcm8uCiAgICAgICAgIiIiCiAgICAgICAgZGF5cyA9IGxpc3Qoc2VsZi5pdGVybW9udGhkYXlzMih5ZWFyLCBtb250aCkpCiAgICAgICAgcmV0dXJuIFsgZGF5c1tpOmkrN10gZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKGRheXMpLCA3KSBdCgogICAgZGVmIG1vbnRoZGF5c2NhbGVuZGFyKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBtYXRyaXggcmVwcmVzZW50aW5nIGEgbW9udGgncyBjYWxlbmRhci4KICAgICAgICBFYWNoIHJvdyByZXByZXNlbnRzIGEgd2VlazsgZGF5cyBvdXRzaWRlIHRoaXMgbW9udGggYXJlIHplcm8uCiAgICAgICAgIiIiCiAgICAgICAgZGF5cyA9IGxpc3Qoc2VsZi5pdGVybW9udGhkYXlzKHllYXIsIG1vbnRoKSkKICAgICAgICByZXR1cm4gWyBkYXlzW2k6aSs3XSBmb3IgaSBpbiByYW5nZSgwLCBsZW4oZGF5cyksIDcpIF0KCiAgICBkZWYgeWVhcmRhdGVzY2FsZW5kYXIoc2VsZiwgeWVhciwgd2lkdGg9Myk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIHRoZSBkYXRhIGZvciB0aGUgc3BlY2lmaWVkIHllYXIgcmVhZHkgZm9yIGZvcm1hdHRpbmcuIFRoZSByZXR1cm4KICAgICAgICB2YWx1ZSBpcyBhIGxpc3Qgb2YgbW9udGggcm93cy4gRWFjaCBtb250aCByb3cgY29udGFpbnMgdXB0byB3aWR0aCBtb250aHMuCiAgICAgICAgRWFjaCBtb250aCBjb250YWlucyBiZXR3ZWVuIDQgYW5kIDYgd2Vla3MgYW5kIGVhY2ggd2VlayBjb250YWlucyAxLTcKICAgICAgICBkYXlzLiBEYXlzIGFyZSBkYXRldGltZS5kYXRlIG9iamVjdHMuCiAgICAgICAgIiIiCiAgICAgICAgbW9udGhzID0gWwogICAgICAgICAgICBzZWxmLm1vbnRoZGF0ZXNjYWxlbmRhcih5ZWFyLCBpKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShKYW51YXJ5LCBKYW51YXJ5KzEyKQogICAgICAgIF0KICAgICAgICByZXR1cm4gW21vbnRoc1tpOmkrd2lkdGhdIGZvciBpIGluIHJhbmdlKDAsIGxlbihtb250aHMpLCB3aWR0aCkgXQoKICAgIGRlZiB5ZWFyZGF5czJjYWxlbmRhcihzZWxmLCB5ZWFyLCB3aWR0aD0zKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gdGhlIGRhdGEgZm9yIHRoZSBzcGVjaWZpZWQgeWVhciByZWFkeSBmb3IgZm9ybWF0dGluZyAoc2ltaWxhciB0bwogICAgICAgIHllYXJkYXRlc2NhbGVuZGFyKCkpLiBFbnRyaWVzIGluIHRoZSB3ZWVrIGxpc3RzIGFyZQogICAgICAgIChkYXkgbnVtYmVyLCB3ZWVrZGF5IG51bWJlcikgdHVwbGVzLiBEYXkgbnVtYmVycyBvdXRzaWRlIHRoaXMgbW9udGggYXJlCiAgICAgICAgemVyby4KICAgICAgICAiIiIKICAgICAgICBtb250aHMgPSBbCiAgICAgICAgICAgIHNlbGYubW9udGhkYXlzMmNhbGVuZGFyKHllYXIsIGkpCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKEphbnVhcnksIEphbnVhcnkrMTIpCiAgICAgICAgXQogICAgICAgIHJldHVybiBbbW9udGhzW2k6aSt3aWR0aF0gZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKG1vbnRocyksIHdpZHRoKSBdCgogICAgZGVmIHllYXJkYXlzY2FsZW5kYXIoc2VsZiwgeWVhciwgd2lkdGg9Myk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIHRoZSBkYXRhIGZvciB0aGUgc3BlY2lmaWVkIHllYXIgcmVhZHkgZm9yIGZvcm1hdHRpbmcgKHNpbWlsYXIgdG8KICAgICAgICB5ZWFyZGF0ZXNjYWxlbmRhcigpKS4gRW50cmllcyBpbiB0aGUgd2VlayBsaXN0cyBhcmUgZGF5IG51bWJlcnMuCiAgICAgICAgRGF5IG51bWJlcnMgb3V0c2lkZSB0aGlzIG1vbnRoIGFyZSB6ZXJvLgogICAgICAgICIiIgogICAgICAgIG1vbnRocyA9IFsKICAgICAgICAgICAgc2VsZi5tb250aGRheXNjYWxlbmRhcih5ZWFyLCBpKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShKYW51YXJ5LCBKYW51YXJ5KzEyKQogICAgICAgIF0KICAgICAgICByZXR1cm4gW21vbnRoc1tpOmkrd2lkdGhdIGZvciBpIGluIHJhbmdlKDAsIGxlbihtb250aHMpLCB3aWR0aCkgXQoKCmNsYXNzIFRleHRDYWxlbmRhcihDYWxlbmRhcik6CiAgICAiIiIKICAgIFN1YmNsYXNzIG9mIENhbGVuZGFyIHRoYXQgb3V0cHV0cyBhIGNhbGVuZGFyIGFzIGEgc2ltcGxlIHBsYWluIHRleHQKICAgIHNpbWlsYXIgdG8gdGhlIFVOSVggcHJvZ3JhbSBjYWwuCiAgICAiIiIKCiAgICBkZWYgcHJ3ZWVrKHNlbGYsIHRoZXdlZWssIHdpZHRoKToKICAgICAgICAiIiIKICAgICAgICBQcmludCBhIHNpbmdsZSB3ZWVrIChubyBuZXdsaW5lKS4KICAgICAgICAiIiIKICAgICAgICBwcmludChzZWxmLmZvcm1hdHdlZWsodGhld2Vlaywgd2lkdGgpLCBlbmQ9JyAnKQoKICAgIGRlZiBmb3JtYXRkYXkoc2VsZiwgZGF5LCB3ZWVrZGF5LCB3aWR0aCk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJucyBhIGZvcm1hdHRlZCBkYXkuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZGF5ID09IDA6CiAgICAgICAgICAgIHMgPSAnJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHMgPSAnJTJpJyAlIGRheSAgICAgICAgICAgICAjIHJpZ2h0LWFsaWduIHNpbmdsZS1kaWdpdCBkYXlzCiAgICAgICAgcmV0dXJuIHMuY2VudGVyKHdpZHRoKQoKICAgIGRlZiBmb3JtYXR3ZWVrKHNlbGYsIHRoZXdlZWssIHdpZHRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm5zIGEgc2luZ2xlIHdlZWsgaW4gYSBzdHJpbmcgKG5vIG5ld2xpbmUpLgogICAgICAgICIiIgogICAgICAgIHJldHVybiAnICcuam9pbihzZWxmLmZvcm1hdGRheShkLCB3ZCwgd2lkdGgpIGZvciAoZCwgd2QpIGluIHRoZXdlZWspCgogICAgZGVmIGZvcm1hdHdlZWtkYXkoc2VsZiwgZGF5LCB3aWR0aCk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJucyBhIGZvcm1hdHRlZCB3ZWVrIGRheSBuYW1lLgogICAgICAgICIiIgogICAgICAgIGlmIHdpZHRoID49IDk6CiAgICAgICAgICAgIG5hbWVzID0gZGF5X25hbWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBuYW1lcyA9IGRheV9hYmJyCiAgICAgICAgcmV0dXJuIG5hbWVzW2RheV1bOndpZHRoXS5jZW50ZXIod2lkdGgpCgogICAgZGVmIGZvcm1hdHdlZWtoZWFkZXIoc2VsZiwgd2lkdGgpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGhlYWRlciBmb3IgYSB3ZWVrLgogICAgICAgICIiIgogICAgICAgIHJldHVybiAnICcuam9pbihzZWxmLmZvcm1hdHdlZWtkYXkoaSwgd2lkdGgpIGZvciBpIGluIHNlbGYuaXRlcndlZWtkYXlzKCkpCgogICAgZGVmIGZvcm1hdG1vbnRobmFtZShzZWxmLCB0aGV5ZWFyLCB0aGVtb250aCwgd2lkdGgsIHdpdGh5ZWFyPVRydWUpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGZvcm1hdHRlZCBtb250aCBuYW1lLgogICAgICAgICIiIgogICAgICAgIHMgPSBtb250aF9uYW1lW3RoZW1vbnRoXQogICAgICAgIGlmIHdpdGh5ZWFyOgogICAgICAgICAgICBzID0gIiVzICVyIiAlIChzLCB0aGV5ZWFyKQogICAgICAgIHJldHVybiBzLmNlbnRlcih3aWR0aCkKCiAgICBkZWYgcHJtb250aChzZWxmLCB0aGV5ZWFyLCB0aGVtb250aCwgdz0wLCBsPTApOgogICAgICAgICIiIgogICAgICAgIFByaW50IGEgbW9udGgncyBjYWxlbmRhci4KICAgICAgICAiIiIKICAgICAgICBwcmludChzZWxmLmZvcm1hdG1vbnRoKHRoZXllYXIsIHRoZW1vbnRoLCB3LCBsKSwgZW5kPScgJykKCiAgICBkZWYgZm9ybWF0bW9udGgoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHc9MCwgbD0wKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBtb250aCdzIGNhbGVuZGFyIHN0cmluZyAobXVsdGktbGluZSkuCiAgICAgICAgIiIiCiAgICAgICAgdyA9IG1heCgyLCB3KQogICAgICAgIGwgPSBtYXgoMSwgbCkKICAgICAgICBzID0gc2VsZi5mb3JtYXRtb250aG5hbWUodGhleWVhciwgdGhlbW9udGgsIDcgKiAodyArIDEpIC0gMSkKICAgICAgICBzID0gcy5yc3RyaXAoKQogICAgICAgIHMgKz0gJ1xuJyAqIGwKICAgICAgICBzICs9IHNlbGYuZm9ybWF0d2Vla2hlYWRlcih3KS5yc3RyaXAoKQogICAgICAgIHMgKz0gJ1xuJyAqIGwKICAgICAgICBmb3Igd2VlayBpbiBzZWxmLm1vbnRoZGF5czJjYWxlbmRhcih0aGV5ZWFyLCB0aGVtb250aCk6CiAgICAgICAgICAgIHMgKz0gc2VsZi5mb3JtYXR3ZWVrKHdlZWssIHcpLnJzdHJpcCgpCiAgICAgICAgICAgIHMgKz0gJ1xuJyAqIGwKICAgICAgICByZXR1cm4gcwoKICAgIGRlZiBmb3JtYXR5ZWFyKHNlbGYsIHRoZXllYXIsIHc9MiwgbD0xLCBjPTYsIG09Myk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJucyBhIHllYXIncyBjYWxlbmRhciBhcyBhIG11bHRpLWxpbmUgc3RyaW5nLgogICAgICAgICIiIgogICAgICAgIHcgPSBtYXgoMiwgdykKICAgICAgICBsID0gbWF4KDEsIGwpCiAgICAgICAgYyA9IG1heCgyLCBjKQogICAgICAgIGNvbHdpZHRoID0gKHcgKyAxKSAqIDcgLSAxCiAgICAgICAgdiA9IFtdCiAgICAgICAgYSA9IHYuYXBwZW5kCiAgICAgICAgYShyZXByKHRoZXllYXIpLmNlbnRlcihjb2x3aWR0aCptK2MqKG0tMSkpLnJzdHJpcCgpKQogICAgICAgIGEoJ1xuJypsKQogICAgICAgIGhlYWRlciA9IHNlbGYuZm9ybWF0d2Vla2hlYWRlcih3KQogICAgICAgIGZvciAoaSwgcm93KSBpbiBlbnVtZXJhdGUoc2VsZi55ZWFyZGF5czJjYWxlbmRhcih0aGV5ZWFyLCBtKSk6CiAgICAgICAgICAgICMgbW9udGhzIGluIHRoaXMgcm93CiAgICAgICAgICAgIG1vbnRocyA9IHJhbmdlKG0qaSsxLCBtaW4obSooaSsxKSsxLCAxMykpCiAgICAgICAgICAgIGEoJ1xuJypsKQogICAgICAgICAgICBuYW1lcyA9IChzZWxmLmZvcm1hdG1vbnRobmFtZSh0aGV5ZWFyLCBrLCBjb2x3aWR0aCwgRmFsc2UpCiAgICAgICAgICAgICAgICAgICAgIGZvciBrIGluIG1vbnRocykKICAgICAgICAgICAgYShmb3JtYXRzdHJpbmcobmFtZXMsIGNvbHdpZHRoLCBjKS5yc3RyaXAoKSkKICAgICAgICAgICAgYSgnXG4nKmwpCiAgICAgICAgICAgIGhlYWRlcnMgPSAoaGVhZGVyIGZvciBrIGluIG1vbnRocykKICAgICAgICAgICAgYShmb3JtYXRzdHJpbmcoaGVhZGVycywgY29sd2lkdGgsIGMpLnJzdHJpcCgpKQogICAgICAgICAgICBhKCdcbicqbCkKICAgICAgICAgICAgIyBtYXggbnVtYmVyIG9mIHdlZWtzIGZvciB0aGlzIHJvdwogICAgICAgICAgICBoZWlnaHQgPSBtYXgobGVuKGNhbCkgZm9yIGNhbCBpbiByb3cpCiAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGhlaWdodCk6CiAgICAgICAgICAgICAgICB3ZWVrcyA9IFtdCiAgICAgICAgICAgICAgICBmb3IgY2FsIGluIHJvdzoKICAgICAgICAgICAgICAgICAgICBpZiBqID49IGxlbihjYWwpOgogICAgICAgICAgICAgICAgICAgICAgICB3ZWVrcy5hcHBlbmQoJycpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgd2Vla3MuYXBwZW5kKHNlbGYuZm9ybWF0d2VlayhjYWxbal0sIHcpKQogICAgICAgICAgICAgICAgYShmb3JtYXRzdHJpbmcod2Vla3MsIGNvbHdpZHRoLCBjKS5yc3RyaXAoKSkKICAgICAgICAgICAgICAgIGEoJ1xuJyAqIGwpCiAgICAgICAgcmV0dXJuICcnLmpvaW4odikKCiAgICBkZWYgcHJ5ZWFyKHNlbGYsIHRoZXllYXIsIHc9MCwgbD0wLCBjPTYsIG09Myk6CiAgICAgICAgIiIiUHJpbnQgYSB5ZWFyJ3MgY2FsZW5kYXIuIiIiCiAgICAgICAgcHJpbnQoc2VsZi5mb3JtYXR5ZWFyKHRoZXllYXIsIHcsIGwsIGMsIG0pKQoKCmNsYXNzIEhUTUxDYWxlbmRhcihDYWxlbmRhcik6CiAgICAiIiIKICAgIFRoaXMgY2FsZW5kYXIgcmV0dXJucyBjb21wbGV0ZSBIVE1MIHBhZ2VzLgogICAgIiIiCgogICAgIyBDU1MgY2xhc3NlcyBmb3IgdGhlIGRheSA8dGQ+cwogICAgY3NzY2xhc3NlcyA9IFsibW9uIiwgInR1ZSIsICJ3ZWQiLCAidGh1IiwgImZyaSIsICJzYXQiLCAic3VuIl0KCiAgICBkZWYgZm9ybWF0ZGF5KHNlbGYsIGRheSwgd2Vla2RheSk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgZGF5IGFzIGEgdGFibGUgY2VsbC4KICAgICAgICAiIiIKICAgICAgICBpZiBkYXkgPT0gMDoKICAgICAgICAgICAgcmV0dXJuICc8dGQgY2xhc3M9Im5vZGF5Ij4mbmJzcDs8L3RkPicgIyBkYXkgb3V0c2lkZSBtb250aAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAnPHRkIGNsYXNzPSIlcyI+JWQ8L3RkPicgJSAoc2VsZi5jc3NjbGFzc2VzW3dlZWtkYXldLCBkYXkpCgogICAgZGVmIGZvcm1hdHdlZWsoc2VsZiwgdGhld2Vlayk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgY29tcGxldGUgd2VlayBhcyBhIHRhYmxlIHJvdy4KICAgICAgICAiIiIKICAgICAgICBzID0gJycuam9pbihzZWxmLmZvcm1hdGRheShkLCB3ZCkgZm9yIChkLCB3ZCkgaW4gdGhld2VlaykKICAgICAgICByZXR1cm4gJzx0cj4lczwvdHI+JyAlIHMKCiAgICBkZWYgZm9ybWF0d2Vla2RheShzZWxmLCBkYXkpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIHdlZWtkYXkgbmFtZSBhcyBhIHRhYmxlIGhlYWRlci4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gJzx0aCBjbGFzcz0iJXMiPiVzPC90aD4nICUgKHNlbGYuY3NzY2xhc3Nlc1tkYXldLCBkYXlfYWJicltkYXldKQoKICAgIGRlZiBmb3JtYXR3ZWVraGVhZGVyKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGhlYWRlciBmb3IgYSB3ZWVrIGFzIGEgdGFibGUgcm93LgogICAgICAgICIiIgogICAgICAgIHMgPSAnJy5qb2luKHNlbGYuZm9ybWF0d2Vla2RheShpKSBmb3IgaSBpbiBzZWxmLml0ZXJ3ZWVrZGF5cygpKQogICAgICAgIHJldHVybiAnPHRyPiVzPC90cj4nICUgcwoKICAgIGRlZiBmb3JtYXRtb250aG5hbWUoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHdpdGh5ZWFyPVRydWUpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIG1vbnRoIG5hbWUgYXMgYSB0YWJsZSByb3cuCiAgICAgICAgIiIiCiAgICAgICAgaWYgd2l0aHllYXI6CiAgICAgICAgICAgIHMgPSAnJXMgJXMnICUgKG1vbnRoX25hbWVbdGhlbW9udGhdLCB0aGV5ZWFyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHMgPSAnJXMnICUgbW9udGhfbmFtZVt0aGVtb250aF0KICAgICAgICByZXR1cm4gJzx0cj48dGggY29sc3Bhbj0iNyIgY2xhc3M9Im1vbnRoIj4lczwvdGg+PC90cj4nICUgcwoKICAgIGRlZiBmb3JtYXRtb250aChzZWxmLCB0aGV5ZWFyLCB0aGVtb250aCwgd2l0aHllYXI9VHJ1ZSk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgZm9ybWF0dGVkIG1vbnRoIGFzIGEgdGFibGUuCiAgICAgICAgIiIiCiAgICAgICAgdiA9IFtdCiAgICAgICAgYSA9IHYuYXBwZW5kCiAgICAgICAgYSgnPHRhYmxlIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBjbGFzcz0ibW9udGgiPicpCiAgICAgICAgYSgnXG4nKQogICAgICAgIGEoc2VsZi5mb3JtYXRtb250aG5hbWUodGhleWVhciwgdGhlbW9udGgsIHdpdGh5ZWFyPXdpdGh5ZWFyKSkKICAgICAgICBhKCdcbicpCiAgICAgICAgYShzZWxmLmZvcm1hdHdlZWtoZWFkZXIoKSkKICAgICAgICBhKCdcbicpCiAgICAgICAgZm9yIHdlZWsgaW4gc2VsZi5tb250aGRheXMyY2FsZW5kYXIodGhleWVhciwgdGhlbW9udGgpOgogICAgICAgICAgICBhKHNlbGYuZm9ybWF0d2Vlayh3ZWVrKSkKICAgICAgICAgICAgYSgnXG4nKQogICAgICAgIGEoJzwvdGFibGU+JykKICAgICAgICBhKCdcbicpCiAgICAgICAgcmV0dXJuICcnLmpvaW4odikKCiAgICBkZWYgZm9ybWF0eWVhcihzZWxmLCB0aGV5ZWFyLCB3aWR0aD0zKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBmb3JtYXR0ZWQgeWVhciBhcyBhIHRhYmxlIG9mIHRhYmxlcy4KICAgICAgICAiIiIKICAgICAgICB2ID0gW10KICAgICAgICBhID0gdi5hcHBlbmQKICAgICAgICB3aWR0aCA9IG1heCh3aWR0aCwgMSkKICAgICAgICBhKCc8dGFibGUgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIGNsYXNzPSJ5ZWFyIj4nKQogICAgICAgIGEoJ1xuJykKICAgICAgICBhKCc8dHI+PHRoIGNvbHNwYW49IiVkIiBjbGFzcz0ieWVhciI+JXM8L3RoPjwvdHI+JyAlICh3aWR0aCwgdGhleWVhcikpCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoSmFudWFyeSwgSmFudWFyeSsxMiwgd2lkdGgpOgogICAgICAgICAgICAjIG1vbnRocyBpbiB0aGlzIHJvdwogICAgICAgICAgICBtb250aHMgPSByYW5nZShpLCBtaW4oaSt3aWR0aCwgMTMpKQogICAgICAgICAgICBhKCc8dHI+JykKICAgICAgICAgICAgZm9yIG0gaW4gbW9udGhzOgogICAgICAgICAgICAgICAgYSgnPHRkPicpCiAgICAgICAgICAgICAgICBhKHNlbGYuZm9ybWF0bW9udGgodGhleWVhciwgbSwgd2l0aHllYXI9RmFsc2UpKQogICAgICAgICAgICAgICAgYSgnPC90ZD4nKQogICAgICAgICAgICBhKCc8L3RyPicpCiAgICAgICAgYSgnPC90YWJsZT4nKQogICAgICAgIHJldHVybiAnJy5qb2luKHYpCgogICAgZGVmIGZvcm1hdHllYXJwYWdlKHNlbGYsIHRoZXllYXIsIHdpZHRoPTMsIGNzcz0nY2FsZW5kYXIuY3NzJywgZW5jb2Rpbmc9Tm9uZSk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgZm9ybWF0dGVkIHllYXIgYXMgYSBjb21wbGV0ZSBIVE1MIHBhZ2UuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZToKICAgICAgICAgICAgZW5jb2RpbmcgPSBzeXMuZ2V0ZGVmYXVsdGVuY29kaW5nKCkKICAgICAgICB2ID0gW10KICAgICAgICBhID0gdi5hcHBlbmQKICAgICAgICBhKCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSIlcyI/PlxuJyAlIGVuY29kaW5nKQogICAgICAgIGEoJzwhRE9DVFlQRSBodG1sIFBVQkxJQyAiLS8vVzNDLy9EVEQgWEhUTUwgMS4wIFN0cmljdC8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS1zdHJpY3QuZHRkIj5cbicpCiAgICAgICAgYSgnPGh0bWw+XG4nKQogICAgICAgIGEoJzxoZWFkPlxuJykKICAgICAgICBhKCc8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD0lcyIgLz5cbicgJSBlbmNvZGluZykKICAgICAgICBpZiBjc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGEoJzxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9IiVzIiAvPlxuJyAlIGNzcykKICAgICAgICBhKCc8dGl0bGU+Q2FsZW5kYXIgZm9yICVkPC90aXRsZT5cbicgJSB0aGV5ZWFyKQogICAgICAgIGEoJzwvaGVhZD5cbicpCiAgICAgICAgYSgnPGJvZHk+XG4nKQogICAgICAgIGEoc2VsZi5mb3JtYXR5ZWFyKHRoZXllYXIsIHdpZHRoKSkKICAgICAgICBhKCc8L2JvZHk+XG4nKQogICAgICAgIGEoJzwvaHRtbD5cbicpCiAgICAgICAgcmV0dXJuICcnLmpvaW4odikuZW5jb2RlKGVuY29kaW5nLCAieG1sY2hhcnJlZnJlcGxhY2UiKQoKCmNsYXNzIGRpZmZlcmVudF9sb2NhbGU6CiAgICBkZWYgX19pbml0X18oc2VsZiwgbG9jYWxlKToKICAgICAgICBzZWxmLmxvY2FsZSA9IGxvY2FsZQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgc2VsZi5vbGRsb2NhbGUgPSBfbG9jYWxlLmdldGxvY2FsZShfbG9jYWxlLkxDX1RJTUUpCiAgICAgICAgX2xvY2FsZS5zZXRsb2NhbGUoX2xvY2FsZS5MQ19USU1FLCBzZWxmLmxvY2FsZSkKCiAgICBkZWYgX19leGl0X18oc2VsZiwgKmFyZ3MpOgogICAgICAgIF9sb2NhbGUuc2V0bG9jYWxlKF9sb2NhbGUuTENfVElNRSwgc2VsZi5vbGRsb2NhbGUpCgoKY2xhc3MgTG9jYWxlVGV4dENhbGVuZGFyKFRleHRDYWxlbmRhcik6CiAgICAiIiIKICAgIFRoaXMgY2xhc3MgY2FuIGJlIHBhc3NlZCBhIGxvY2FsZSBuYW1lIGluIHRoZSBjb25zdHJ1Y3RvciBhbmQgd2lsbCByZXR1cm4KICAgIG1vbnRoIGFuZCB3ZWVrZGF5IG5hbWVzIGluIHRoZSBzcGVjaWZpZWQgbG9jYWxlLiBJZiB0aGlzIGxvY2FsZSBpbmNsdWRlcwogICAgYW4gZW5jb2RpbmcgYWxsIHN0cmluZ3MgY29udGFpbmluZyBtb250aCBhbmQgd2Vla2RheSBuYW1lcyB3aWxsIGJlIHJldHVybmVkCiAgICBhcyB1bmljb2RlLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZpcnN0d2Vla2RheT0wLCBsb2NhbGU9Tm9uZSk6CiAgICAgICAgVGV4dENhbGVuZGFyLl9faW5pdF9fKHNlbGYsIGZpcnN0d2Vla2RheSkKICAgICAgICBpZiBsb2NhbGUgaXMgTm9uZToKICAgICAgICAgICAgbG9jYWxlID0gX2xvY2FsZS5nZXRkZWZhdWx0bG9jYWxlKCkKICAgICAgICBzZWxmLmxvY2FsZSA9IGxvY2FsZQoKICAgIGRlZiBmb3JtYXR3ZWVrZGF5KHNlbGYsIGRheSwgd2lkdGgpOgogICAgICAgIHdpdGggZGlmZmVyZW50X2xvY2FsZShzZWxmLmxvY2FsZSk6CiAgICAgICAgICAgIGlmIHdpZHRoID49IDk6CiAgICAgICAgICAgICAgICBuYW1lcyA9IGRheV9uYW1lCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBuYW1lcyA9IGRheV9hYmJyCiAgICAgICAgICAgIG5hbWUgPSBuYW1lc1tkYXldCiAgICAgICAgICAgIHJldHVybiBuYW1lWzp3aWR0aF0uY2VudGVyKHdpZHRoKQoKICAgIGRlZiBmb3JtYXRtb250aG5hbWUoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHdpZHRoLCB3aXRoeWVhcj1UcnVlKToKICAgICAgICB3aXRoIGRpZmZlcmVudF9sb2NhbGUoc2VsZi5sb2NhbGUpOgogICAgICAgICAgICBzID0gbW9udGhfbmFtZVt0aGVtb250aF0KICAgICAgICAgICAgaWYgd2l0aHllYXI6CiAgICAgICAgICAgICAgICBzID0gIiVzICVyIiAlIChzLCB0aGV5ZWFyKQogICAgICAgICAgICByZXR1cm4gcy5jZW50ZXIod2lkdGgpCgoKY2xhc3MgTG9jYWxlSFRNTENhbGVuZGFyKEhUTUxDYWxlbmRhcik6CiAgICAiIiIKICAgIFRoaXMgY2xhc3MgY2FuIGJlIHBhc3NlZCBhIGxvY2FsZSBuYW1lIGluIHRoZSBjb25zdHJ1Y3RvciBhbmQgd2lsbCByZXR1cm4KICAgIG1vbnRoIGFuZCB3ZWVrZGF5IG5hbWVzIGluIHRoZSBzcGVjaWZpZWQgbG9jYWxlLiBJZiB0aGlzIGxvY2FsZSBpbmNsdWRlcwogICAgYW4gZW5jb2RpbmcgYWxsIHN0cmluZ3MgY29udGFpbmluZyBtb250aCBhbmQgd2Vla2RheSBuYW1lcyB3aWxsIGJlIHJldHVybmVkCiAgICBhcyB1bmljb2RlLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlyc3R3ZWVrZGF5PTAsIGxvY2FsZT1Ob25lKToKICAgICAgICBIVE1MQ2FsZW5kYXIuX19pbml0X18oc2VsZiwgZmlyc3R3ZWVrZGF5KQogICAgICAgIGlmIGxvY2FsZSBpcyBOb25lOgogICAgICAgICAgICBsb2NhbGUgPSBfbG9jYWxlLmdldGRlZmF1bHRsb2NhbGUoKQogICAgICAgIHNlbGYubG9jYWxlID0gbG9jYWxlCgogICAgZGVmIGZvcm1hdHdlZWtkYXkoc2VsZiwgZGF5KToKICAgICAgICB3aXRoIGRpZmZlcmVudF9sb2NhbGUoc2VsZi5sb2NhbGUpOgogICAgICAgICAgICBzID0gZGF5X2FiYnJbZGF5XQogICAgICAgICAgICByZXR1cm4gJzx0aCBjbGFzcz0iJXMiPiVzPC90aD4nICUgKHNlbGYuY3NzY2xhc3Nlc1tkYXldLCBzKQoKICAgIGRlZiBmb3JtYXRtb250aG5hbWUoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHdpdGh5ZWFyPVRydWUpOgogICAgICAgIHdpdGggZGlmZmVyZW50X2xvY2FsZShzZWxmLmxvY2FsZSk6CiAgICAgICAgICAgIHMgPSBtb250aF9uYW1lW3RoZW1vbnRoXQogICAgICAgICAgICBpZiB3aXRoeWVhcjoKICAgICAgICAgICAgICAgIHMgPSAnJXMgJXMnICUgKHMsIHRoZXllYXIpCiAgICAgICAgICAgIHJldHVybiAnPHRyPjx0aCBjb2xzcGFuPSI3IiBjbGFzcz0ibW9udGgiPiVzPC90aD48L3RyPicgJSBzCgoKIyBTdXBwb3J0IGZvciBvbGQgbW9kdWxlIGxldmVsIGludGVyZmFjZQpjID0gVGV4dENhbGVuZGFyKCkKCmZpcnN0d2Vla2RheSA9IGMuZ2V0Zmlyc3R3ZWVrZGF5CgpkZWYgc2V0Zmlyc3R3ZWVrZGF5KGZpcnN0d2Vla2RheSk6CiAgICBpZiBub3QgTU9OREFZIDw9IGZpcnN0d2Vla2RheSA8PSBTVU5EQVk6CiAgICAgICAgcmFpc2UgSWxsZWdhbFdlZWtkYXlFcnJvcihmaXJzdHdlZWtkYXkpCiAgICBjLmZpcnN0d2Vla2RheSA9IGZpcnN0d2Vla2RheQoKbW9udGhjYWxlbmRhciA9IGMubW9udGhkYXlzY2FsZW5kYXIKcHJ3ZWVrID0gYy5wcndlZWsKd2VlayA9IGMuZm9ybWF0d2Vlawp3ZWVraGVhZGVyID0gYy5mb3JtYXR3ZWVraGVhZGVyCnBybW9udGggPSBjLnBybW9udGgKbW9udGggPSBjLmZvcm1hdG1vbnRoCmNhbGVuZGFyID0gYy5mb3JtYXR5ZWFyCnByY2FsID0gYy5wcnllYXIKCgojIFNwYWNpbmcgb2YgbW9udGggY29sdW1ucyBmb3IgbXVsdGktY29sdW1uIHllYXIgY2FsZW5kYXIKX2NvbHdpZHRoID0gNyozIC0gMSAgICAgICAgICMgQW1vdW50IHByaW50ZWQgYnkgcHJ3ZWVrKCkKX3NwYWNpbmcgPSA2ICAgICAgICAgICAgICAgICMgTnVtYmVyIG9mIHNwYWNlcyBiZXR3ZWVuIGNvbHVtbnMKCgpkZWYgZm9ybWF0KGNvbHMsIGNvbHdpZHRoPV9jb2x3aWR0aCwgc3BhY2luZz1fc3BhY2luZyk6CiAgICAiIiJQcmludHMgbXVsdGktY29sdW1uIGZvcm1hdHRpbmcgZm9yIHllYXIgY2FsZW5kYXJzIiIiCiAgICBwcmludChmb3JtYXRzdHJpbmcoY29scywgY29sd2lkdGgsIHNwYWNpbmcpKQoKCmRlZiBmb3JtYXRzdHJpbmcoY29scywgY29sd2lkdGg9X2NvbHdpZHRoLCBzcGFjaW5nPV9zcGFjaW5nKToKICAgICIiIlJldHVybnMgYSBzdHJpbmcgZm9ybWF0dGVkIGZyb20gbiBzdHJpbmdzLCBjZW50ZXJlZCB3aXRoaW4gbiBjb2x1bW5zLiIiIgogICAgc3BhY2luZyAqPSAnICcKICAgIHJldHVybiBzcGFjaW5nLmpvaW4oYy5jZW50ZXIoY29sd2lkdGgpIGZvciBjIGluIGNvbHMpCgoKRVBPQ0ggPSAxOTcwCl9FUE9DSF9PUkQgPSBkYXRldGltZS5kYXRlKEVQT0NILCAxLCAxKS50b29yZGluYWwoKQoKCmRlZiB0aW1lZ20odHVwbGUpOgogICAgIiIiVW5yZWxhdGVkIGJ1dCBoYW5keSBmdW5jdGlvbiB0byBjYWxjdWxhdGUgVW5peCB0aW1lc3RhbXAgZnJvbSBHTVQuIiIiCiAgICB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCA9IHR1cGxlWzo2XQogICAgZGF5cyA9IGRhdGV0aW1lLmRhdGUoeWVhciwgbW9udGgsIDEpLnRvb3JkaW5hbCgpIC0gX0VQT0NIX09SRCArIGRheSAtIDEKICAgIGhvdXJzID0gZGF5cyoyNCArIGhvdXIKICAgIG1pbnV0ZXMgPSBob3Vycyo2MCArIG1pbnV0ZQogICAgc2Vjb25kcyA9IG1pbnV0ZXMqNjAgKyBzZWNvbmQKICAgIHJldHVybiBzZWNvbmRzCgoKZGVmIG1haW4oYXJncyk6CiAgICBpbXBvcnQgb3B0cGFyc2UKICAgIHBhcnNlciA9IG9wdHBhcnNlLk9wdGlvblBhcnNlcih1c2FnZT0idXNhZ2U6ICVwcm9nIFtvcHRpb25zXSBbeWVhciBbbW9udGhdXSIpCiAgICBwYXJzZXIuYWRkX29wdGlvbigKICAgICAgICAiLXciLCAiLS13aWR0aCIsCiAgICAgICAgZGVzdD0id2lkdGgiLCB0eXBlPSJpbnQiLCBkZWZhdWx0PTIsCiAgICAgICAgaGVscD0id2lkdGggb2YgZGF0ZSBjb2x1bW4gKGRlZmF1bHQgMiwgdGV4dCBvbmx5KSIKICAgICkKICAgIHBhcnNlci5hZGRfb3B0aW9uKAogICAgICAgICItbCIsICItLWxpbmVzIiwKICAgICAgICBkZXN0PSJsaW5lcyIsIHR5cGU9ImludCIsIGRlZmF1bHQ9MSwKICAgICAgICBoZWxwPSJudW1iZXIgb2YgbGluZXMgZm9yIGVhY2ggd2VlayAoZGVmYXVsdCAxLCB0ZXh0IG9ubHkpIgogICAgKQogICAgcGFyc2VyLmFkZF9vcHRpb24oCiAgICAgICAgIi1zIiwgIi0tc3BhY2luZyIsCiAgICAgICAgZGVzdD0ic3BhY2luZyIsIHR5cGU9ImludCIsIGRlZmF1bHQ9NiwKICAgICAgICBoZWxwPSJzcGFjaW5nIGJldHdlZW4gbW9udGhzIChkZWZhdWx0IDYsIHRleHQgb25seSkiCiAgICApCiAgICBwYXJzZXIuYWRkX29wdGlvbigKICAgICAgICAiLW0iLCAiLS1tb250aHMiLAogICAgICAgIGRlc3Q9Im1vbnRocyIsIHR5cGU9ImludCIsIGRlZmF1bHQ9MywKICAgICAgICBoZWxwPSJtb250aHMgcGVyIHJvdyAoZGVmYXVsdCAzLCB0ZXh0IG9ubHkpIgogICAgKQogICAgcGFyc2VyLmFkZF9vcHRpb24oCiAgICAgICAgIi1jIiwgIi0tY3NzIiwKICAgICAgICBkZXN0PSJjc3MiLCBkZWZhdWx0PSJjYWxlbmRhci5jc3MiLAogICAgICAgIGhlbHA9IkNTUyB0byB1c2UgZm9yIHBhZ2UgKGh0bWwgb25seSkiCiAgICApCiAgICBwYXJzZXIuYWRkX29wdGlvbigKICAgICAgICAiLUwiLCAiLS1sb2NhbGUiLAogICAgICAgIGRlc3Q9ImxvY2FsZSIsIGRlZmF1bHQ9Tm9uZSwKICAgICAgICBoZWxwPSJsb2NhbGUgdG8gYmUgdXNlZCBmcm9tIG1vbnRoIGFuZCB3ZWVrZGF5IG5hbWVzIgogICAgKQogICAgcGFyc2VyLmFkZF9vcHRpb24oCiAgICAgICAgIi1lIiwgIi0tZW5jb2RpbmciLAogICAgICAgIGRlc3Q9ImVuY29kaW5nIiwgZGVmYXVsdD1Ob25lLAogICAgICAgIGhlbHA9IkVuY29kaW5nIHRvIHVzZSBmb3Igb3V0cHV0LiIKICAgICkKICAgIHBhcnNlci5hZGRfb3B0aW9uKAogICAgICAgICItdCIsICItLXR5cGUiLAogICAgICAgIGRlc3Q9InR5cGUiLCBkZWZhdWx0PSJ0ZXh0IiwKICAgICAgICBjaG9pY2VzPSgidGV4dCIsICJodG1sIiksCiAgICAgICAgaGVscD0ib3V0cHV0IHR5cGUgKHRleHQgb3IgaHRtbCkiCiAgICApCgogICAgKG9wdGlvbnMsIGFyZ3MpID0gcGFyc2VyLnBhcnNlX2FyZ3MoYXJncykKCiAgICBpZiBvcHRpb25zLmxvY2FsZSBhbmQgbm90IG9wdGlvbnMuZW5jb2Rpbmc6CiAgICAgICAgcGFyc2VyLmVycm9yKCJpZiAtLWxvY2FsZSBpcyBzcGVjaWZpZWQgLS1lbmNvZGluZyBpcyByZXF1aXJlZCIpCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZSwgb3B0aW9ucy5lbmNvZGluZwoKICAgIGlmIG9wdGlvbnMudHlwZSA9PSAiaHRtbCI6CiAgICAgICAgaWYgb3B0aW9ucy5sb2NhbGU6CiAgICAgICAgICAgIGNhbCA9IExvY2FsZUhUTUxDYWxlbmRhcihsb2NhbGU9bG9jYWxlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNhbCA9IEhUTUxDYWxlbmRhcigpCiAgICAgICAgZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nCiAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZToKICAgICAgICAgICAgZW5jb2RpbmcgPSBzeXMuZ2V0ZGVmYXVsdGVuY29kaW5nKCkKICAgICAgICBvcHRkaWN0ID0gZGljdChlbmNvZGluZz1lbmNvZGluZywgY3NzPW9wdGlvbnMuY3NzKQogICAgICAgIHdyaXRlID0gc3lzLnN0ZG91dC5idWZmZXIud3JpdGUKICAgICAgICBpZiBsZW4oYXJncykgPT0gMToKICAgICAgICAgICAgd3JpdGUoY2FsLmZvcm1hdHllYXJwYWdlKGRhdGV0aW1lLmRhdGUudG9kYXkoKS55ZWFyLCAqKm9wdGRpY3QpKQogICAgICAgIGVsaWYgbGVuKGFyZ3MpID09IDI6CiAgICAgICAgICAgIHdyaXRlKGNhbC5mb3JtYXR5ZWFycGFnZShpbnQoYXJnc1sxXSksICoqb3B0ZGljdCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGFyc2VyLmVycm9yKCJpbmNvcnJlY3QgbnVtYmVyIG9mIGFyZ3VtZW50cyIpCiAgICAgICAgICAgIHN5cy5leGl0KDEpCiAgICBlbHNlOgogICAgICAgIGlmIG9wdGlvbnMubG9jYWxlOgogICAgICAgICAgICBjYWwgPSBMb2NhbGVUZXh0Q2FsZW5kYXIobG9jYWxlPWxvY2FsZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjYWwgPSBUZXh0Q2FsZW5kYXIoKQogICAgICAgIG9wdGRpY3QgPSBkaWN0KHc9b3B0aW9ucy53aWR0aCwgbD1vcHRpb25zLmxpbmVzKQogICAgICAgIGlmIGxlbihhcmdzKSAhPSAzOgogICAgICAgICAgICBvcHRkaWN0WyJjIl0gPSBvcHRpb25zLnNwYWNpbmcKICAgICAgICAgICAgb3B0ZGljdFsibSJdID0gb3B0aW9ucy5tb250aHMKICAgICAgICBpZiBsZW4oYXJncykgPT0gMToKICAgICAgICAgICAgcmVzdWx0ID0gY2FsLmZvcm1hdHllYXIoZGF0ZXRpbWUuZGF0ZS50b2RheSgpLnllYXIsICoqb3B0ZGljdCkKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAyOgogICAgICAgICAgICByZXN1bHQgPSBjYWwuZm9ybWF0eWVhcihpbnQoYXJnc1sxXSksICoqb3B0ZGljdCkKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAzOgogICAgICAgICAgICByZXN1bHQgPSBjYWwuZm9ybWF0bW9udGgoaW50KGFyZ3NbMV0pLCBpbnQoYXJnc1syXSksICoqb3B0ZGljdCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwYXJzZXIuZXJyb3IoImluY29ycmVjdCBudW1iZXIgb2YgYXJndW1lbnRzIikKICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgICAgICB3cml0ZSA9IHN5cy5zdGRvdXQud3JpdGUKICAgICAgICBpZiBvcHRpb25zLmVuY29kaW5nOgogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuZW5jb2RlKG9wdGlvbnMuZW5jb2RpbmcpCiAgICAgICAgICAgIHdyaXRlID0gc3lzLnN0ZG91dC5idWZmZXIud3JpdGUKICAgICAgICB3cml0ZShyZXN1bHQpCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oc3lzLmFyZ3YpCg==',
'/Lib/getopt.py':'IiIiUGFyc2VyIGZvciBjb21tYW5kIGxpbmUgb3B0aW9ucy4KClRoaXMgbW9kdWxlIGhlbHBzIHNjcmlwdHMgdG8gcGFyc2UgdGhlIGNvbW1hbmQgbGluZSBhcmd1bWVudHMgaW4Kc3lzLmFyZ3YuICBJdCBzdXBwb3J0cyB0aGUgc2FtZSBjb252ZW50aW9ucyBhcyB0aGUgVW5peCBnZXRvcHQoKQpmdW5jdGlvbiAoaW5jbHVkaW5nIHRoZSBzcGVjaWFsIG1lYW5pbmdzIG9mIGFyZ3VtZW50cyBvZiB0aGUgZm9ybSBgLScKYW5kIGAtLScpLiAgTG9uZyBvcHRpb25zIHNpbWlsYXIgdG8gdGhvc2Ugc3VwcG9ydGVkIGJ5IEdOVSBzb2Z0d2FyZQptYXkgYmUgdXNlZCBhcyB3ZWxsIHZpYSBhbiBvcHRpb25hbCB0aGlyZCBhcmd1bWVudC4gIFRoaXMgbW9kdWxlCnByb3ZpZGVzIHR3byBmdW5jdGlvbnMgYW5kIGFuIGV4Y2VwdGlvbjoKCmdldG9wdCgpIC0tIFBhcnNlIGNvbW1hbmQgbGluZSBvcHRpb25zCmdudV9nZXRvcHQoKSAtLSBMaWtlIGdldG9wdCgpLCBidXQgYWxsb3cgb3B0aW9uIGFuZCBub24tb3B0aW9uIGFyZ3VtZW50cwp0byBiZSBpbnRlcm1peGVkLgpHZXRvcHRFcnJvciAtLSBleGNlcHRpb24gKGNsYXNzKSByYWlzZWQgd2l0aCAnb3B0JyBhdHRyaWJ1dGUsIHdoaWNoIGlzIHRoZQpvcHRpb24gaW52b2x2ZWQgd2l0aCB0aGUgZXhjZXB0aW9uLgoiIiIKCiMgTG9uZyBvcHRpb24gc3VwcG9ydCBhZGRlZCBieSBMYXJzIFdpcnplbml1cyA8bGl3QGlraS5maT4uCiMKIyBHZXJyaXQgSG9sbCA8Z2Vycml0QG5sLmxpbnV4Lm9yZz4gbW92ZWQgdGhlIHN0cmluZy1iYXNlZCBleGNlcHRpb25zCiMgdG8gY2xhc3MtYmFzZWQgZXhjZXB0aW9ucy4KIwojIFBldGVyIMODwoVzdHJhbmQgPGFzdHJhbmRAbHlzYXRvci5saXUuc2U+IGFkZGVkIGdudV9nZXRvcHQoKS4KIwojIFRPRE8gZm9yIGdudV9nZXRvcHQoKToKIwojIC0gR05VIGdldG9wdF9sb25nX29ubHkgbWVjaGFuaXNtCiMgLSBhbGxvdyB0aGUgY2FsbGVyIHRvIHNwZWNpZnkgb3JkZXJpbmcKIyAtIFJFVFVSTl9JTl9PUkRFUiBvcHRpb24KIyAtIEdOVSBleHRlbnNpb24gd2l0aCAnLScgYXMgZmlyc3QgY2hhcmFjdGVyIG9mIG9wdGlvbiBzdHJpbmcKIyAtIG9wdGlvbmFsIGFyZ3VtZW50cywgc3BlY2lmaWVkIGJ5IGRvdWJsZSBjb2xvbnMKIyAtIGEgb3B0aW9uIHN0cmluZyB3aXRoIGEgVyBmb2xsb3dlZCBieSBzZW1pY29sb24gc2hvdWxkCiMgICB0cmVhdCAiLVcgZm9vIiBhcyAiLS1mb28iCgpfX2FsbF9fID0gWyJHZXRvcHRFcnJvciIsImVycm9yIiwiZ2V0b3B0IiwiZ251X2dldG9wdCJdCgppbXBvcnQgb3MKCmNsYXNzIEdldG9wdEVycm9yKEV4Y2VwdGlvbik6CiAgICBvcHQgPSAnJwogICAgbXNnID0gJycKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtc2csIG9wdD0nJyk6CiAgICAgICAgc2VsZi5tc2cgPSBtc2cKICAgICAgICBzZWxmLm9wdCA9IG9wdAogICAgICAgIEV4Y2VwdGlvbi5fX2luaXRfXyhzZWxmLCBtc2csIG9wdCkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5tc2cKCmVycm9yID0gR2V0b3B0RXJyb3IgIyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5CgpkZWYgZ2V0b3B0KGFyZ3MsIHNob3J0b3B0cywgbG9uZ29wdHMgPSBbXSk6CiAgICAiIiJnZXRvcHQoYXJncywgb3B0aW9uc1ssIGxvbmdfb3B0aW9uc10pIC0+IG9wdHMsIGFyZ3MKCiAgICBQYXJzZXMgY29tbWFuZCBsaW5lIG9wdGlvbnMgYW5kIHBhcmFtZXRlciBsaXN0LiAgYXJncyBpcyB0aGUKICAgIGFyZ3VtZW50IGxpc3QgdG8gYmUgcGFyc2VkLCB3aXRob3V0IHRoZSBsZWFkaW5nIHJlZmVyZW5jZSB0byB0aGUKICAgIHJ1bm5pbmcgcHJvZ3JhbS4gIFR5cGljYWxseSwgdGhpcyBtZWFucyAic3lzLmFyZ3ZbMTpdIi4gIHNob3J0b3B0cwogICAgaXMgdGhlIHN0cmluZyBvZiBvcHRpb24gbGV0dGVycyB0aGF0IHRoZSBzY3JpcHQgd2FudHMgdG8KICAgIHJlY29nbml6ZSwgd2l0aCBvcHRpb25zIHRoYXQgcmVxdWlyZSBhbiBhcmd1bWVudCBmb2xsb3dlZCBieSBhCiAgICBjb2xvbiAoaS5lLiwgdGhlIHNhbWUgZm9ybWF0IHRoYXQgVW5peCBnZXRvcHQoKSB1c2VzKS4gIElmCiAgICBzcGVjaWZpZWQsIGxvbmdvcHRzIGlzIGEgbGlzdCBvZiBzdHJpbmdzIHdpdGggdGhlIG5hbWVzIG9mIHRoZQogICAgbG9uZyBvcHRpb25zIHdoaWNoIHNob3VsZCBiZSBzdXBwb3J0ZWQuICBUaGUgbGVhZGluZyAnLS0nCiAgICBjaGFyYWN0ZXJzIHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIG9wdGlvbiBuYW1lLiAgT3B0aW9ucwogICAgd2hpY2ggcmVxdWlyZSBhbiBhcmd1bWVudCBzaG91bGQgYmUgZm9sbG93ZWQgYnkgYW4gZXF1YWwgc2lnbgogICAgKCc9JykuCgogICAgVGhlIHJldHVybiB2YWx1ZSBjb25zaXN0cyBvZiB0d28gZWxlbWVudHM6IHRoZSBmaXJzdCBpcyBhIGxpc3Qgb2YKICAgIChvcHRpb24sIHZhbHVlKSBwYWlyczsgdGhlIHNlY29uZCBpcyB0aGUgbGlzdCBvZiBwcm9ncmFtIGFyZ3VtZW50cwogICAgbGVmdCBhZnRlciB0aGUgb3B0aW9uIGxpc3Qgd2FzIHN0cmlwcGVkICh0aGlzIGlzIGEgdHJhaWxpbmcgc2xpY2UKICAgIG9mIHRoZSBmaXJzdCBhcmd1bWVudCkuICBFYWNoIG9wdGlvbi1hbmQtdmFsdWUgcGFpciByZXR1cm5lZCBoYXMKICAgIHRoZSBvcHRpb24gYXMgaXRzIGZpcnN0IGVsZW1lbnQsIHByZWZpeGVkIHdpdGggYSBoeXBoZW4gKGUuZy4sCiAgICAnLXgnKSwgYW5kIHRoZSBvcHRpb24gYXJndW1lbnQgYXMgaXRzIHNlY29uZCBlbGVtZW50LCBvciBhbiBlbXB0eQogICAgc3RyaW5nIGlmIHRoZSBvcHRpb24gaGFzIG5vIGFyZ3VtZW50LiAgVGhlIG9wdGlvbnMgb2NjdXIgaW4gdGhlCiAgICBsaXN0IGluIHRoZSBzYW1lIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBmb3VuZCwgdGh1cyBhbGxvd2luZwogICAgbXVsdGlwbGUgb2NjdXJyZW5jZXMuICBMb25nIGFuZCBzaG9ydCBvcHRpb25zIG1heSBiZSBtaXhlZC4KCiAgICAiIiIKCiAgICBvcHRzID0gW10KICAgIGlmIHR5cGUobG9uZ29wdHMpID09IHR5cGUoIiIpOgogICAgICAgIGxvbmdvcHRzID0gW2xvbmdvcHRzXQogICAgZWxzZToKICAgICAgICBsb25nb3B0cyA9IGxpc3QobG9uZ29wdHMpCiAgICB3aGlsZSBhcmdzIGFuZCBhcmdzWzBdLnN0YXJ0c3dpdGgoJy0nKSBhbmQgYXJnc1swXSAhPSAnLSc6CiAgICAgICAgaWYgYXJnc1swXSA9PSAnLS0nOgogICAgICAgICAgICBhcmdzID0gYXJnc1sxOl0KICAgICAgICAgICAgYnJlYWsKICAgICAgICBpZiBhcmdzWzBdLnN0YXJ0c3dpdGgoJy0tJyk6CiAgICAgICAgICAgIG9wdHMsIGFyZ3MgPSBkb19sb25ncyhvcHRzLCBhcmdzWzBdWzI6XSwgbG9uZ29wdHMsIGFyZ3NbMTpdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9wdHMsIGFyZ3MgPSBkb19zaG9ydHMob3B0cywgYXJnc1swXVsxOl0sIHNob3J0b3B0cywgYXJnc1sxOl0pCgogICAgcmV0dXJuIG9wdHMsIGFyZ3MKCmRlZiBnbnVfZ2V0b3B0KGFyZ3MsIHNob3J0b3B0cywgbG9uZ29wdHMgPSBbXSk6CiAgICAiIiJnZXRvcHQoYXJncywgb3B0aW9uc1ssIGxvbmdfb3B0aW9uc10pIC0+IG9wdHMsIGFyZ3MKCiAgICBUaGlzIGZ1bmN0aW9uIHdvcmtzIGxpa2UgZ2V0b3B0KCksIGV4Y2VwdCB0aGF0IEdOVSBzdHlsZSBzY2FubmluZwogICAgbW9kZSBpcyB1c2VkIGJ5IGRlZmF1bHQuIFRoaXMgbWVhbnMgdGhhdCBvcHRpb24gYW5kIG5vbi1vcHRpb24KICAgIGFyZ3VtZW50cyBtYXkgYmUgaW50ZXJtaXhlZC4gVGhlIGdldG9wdCgpIGZ1bmN0aW9uIHN0b3BzCiAgICBwcm9jZXNzaW5nIG9wdGlvbnMgYXMgc29vbiBhcyBhIG5vbi1vcHRpb24gYXJndW1lbnQgaXMKICAgIGVuY291bnRlcmVkLgoKICAgIElmIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgdGhlIG9wdGlvbiBzdHJpbmcgaXMgYCsnLCBvciBpZiB0aGUKICAgIGVudmlyb25tZW50IHZhcmlhYmxlIFBPU0lYTFlfQ09SUkVDVCBpcyBzZXQsIHRoZW4gb3B0aW9uCiAgICBwcm9jZXNzaW5nIHN0b3BzIGFzIHNvb24gYXMgYSBub24tb3B0aW9uIGFyZ3VtZW50IGlzIGVuY291bnRlcmVkLgoKICAgICIiIgoKICAgIG9wdHMgPSBbXQogICAgcHJvZ19hcmdzID0gW10KICAgIGlmIGlzaW5zdGFuY2UobG9uZ29wdHMsIHN0cik6CiAgICAgICAgbG9uZ29wdHMgPSBbbG9uZ29wdHNdCiAgICBlbHNlOgogICAgICAgIGxvbmdvcHRzID0gbGlzdChsb25nb3B0cykKCiAgICAjIEFsbG93IG9wdGlvbnMgYWZ0ZXIgbm9uLW9wdGlvbiBhcmd1bWVudHM/CiAgICBpZiBzaG9ydG9wdHMuc3RhcnRzd2l0aCgnKycpOgogICAgICAgIHNob3J0b3B0cyA9IHNob3J0b3B0c1sxOl0KICAgICAgICBhbGxfb3B0aW9uc19maXJzdCA9IFRydWUKICAgIGVsaWYgb3MuZW52aXJvbi5nZXQoIlBPU0lYTFlfQ09SUkVDVCIpOgogICAgICAgIGFsbF9vcHRpb25zX2ZpcnN0ID0gVHJ1ZQogICAgZWxzZToKICAgICAgICBhbGxfb3B0aW9uc19maXJzdCA9IEZhbHNlCgogICAgd2hpbGUgYXJnczoKICAgICAgICBpZiBhcmdzWzBdID09ICctLSc6CiAgICAgICAgICAgIHByb2dfYXJncyArPSBhcmdzWzE6XQogICAgICAgICAgICBicmVhawoKICAgICAgICBpZiBhcmdzWzBdWzoyXSA9PSAnLS0nOgogICAgICAgICAgICBvcHRzLCBhcmdzID0gZG9fbG9uZ3Mob3B0cywgYXJnc1swXVsyOl0sIGxvbmdvcHRzLCBhcmdzWzE6XSkKICAgICAgICBlbGlmIGFyZ3NbMF1bOjFdID09ICctJyBhbmQgYXJnc1swXSAhPSAnLSc6CiAgICAgICAgICAgIG9wdHMsIGFyZ3MgPSBkb19zaG9ydHMob3B0cywgYXJnc1swXVsxOl0sIHNob3J0b3B0cywgYXJnc1sxOl0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgYWxsX29wdGlvbnNfZmlyc3Q6CiAgICAgICAgICAgICAgICBwcm9nX2FyZ3MgKz0gYXJncwogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByb2dfYXJncy5hcHBlbmQoYXJnc1swXSkKICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmdzWzE6XQoKICAgIHJldHVybiBvcHRzLCBwcm9nX2FyZ3MKCmRlZiBkb19sb25ncyhvcHRzLCBvcHQsIGxvbmdvcHRzLCBhcmdzKToKICAgIHRyeToKICAgICAgICBpID0gb3B0LmluZGV4KCc9JykKICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIG9wdGFyZyA9IE5vbmUKICAgIGVsc2U6CiAgICAgICAgb3B0LCBvcHRhcmcgPSBvcHRbOmldLCBvcHRbaSsxOl0KCiAgICBoYXNfYXJnLCBvcHQgPSBsb25nX2hhc19hcmdzKG9wdCwgbG9uZ29wdHMpCiAgICBpZiBoYXNfYXJnOgogICAgICAgIGlmIG9wdGFyZyBpcyBOb25lOgogICAgICAgICAgICBpZiBub3QgYXJnczoKICAgICAgICAgICAgICAgIHJhaXNlIEdldG9wdEVycm9yKCdvcHRpb24gLS0lcyByZXF1aXJlcyBhcmd1bWVudCcgJSBvcHQsIG9wdCkKICAgICAgICAgICAgb3B0YXJnLCBhcmdzID0gYXJnc1swXSwgYXJnc1sxOl0KICAgIGVsaWYgb3B0YXJnIGlzIG5vdCBOb25lOgogICAgICAgIHJhaXNlIEdldG9wdEVycm9yKCdvcHRpb24gLS0lcyBtdXN0IG5vdCBoYXZlIGFuIGFyZ3VtZW50JyAlIG9wdCwgb3B0KQogICAgb3B0cy5hcHBlbmQoKCctLScgKyBvcHQsIG9wdGFyZyBvciAnJykpCiAgICByZXR1cm4gb3B0cywgYXJncwoKIyBSZXR1cm46CiMgICBoYXNfYXJnPwojICAgZnVsbCBvcHRpb24gbmFtZQpkZWYgbG9uZ19oYXNfYXJncyhvcHQsIGxvbmdvcHRzKToKICAgIHBvc3NpYmlsaXRpZXMgPSBbbyBmb3IgbyBpbiBsb25nb3B0cyBpZiBvLnN0YXJ0c3dpdGgob3B0KV0KICAgIGlmIG5vdCBwb3NzaWJpbGl0aWVzOgogICAgICAgIHJhaXNlIEdldG9wdEVycm9yKCdvcHRpb24gLS0lcyBub3QgcmVjb2duaXplZCcgJSBvcHQsIG9wdCkKICAgICMgSXMgdGhlcmUgYW4gZXhhY3QgbWF0Y2g/CiAgICBpZiBvcHQgaW4gcG9zc2liaWxpdGllczoKICAgICAgICByZXR1cm4gRmFsc2UsIG9wdAogICAgZWxpZiBvcHQgKyAnPScgaW4gcG9zc2liaWxpdGllczoKICAgICAgICByZXR1cm4gVHJ1ZSwgb3B0CiAgICAjIE5vIGV4YWN0IG1hdGNoLCBzbyBiZXR0ZXIgYmUgdW5pcXVlLgogICAgaWYgbGVuKHBvc3NpYmlsaXRpZXMpID4gMToKICAgICAgICAjIFhYWCBzaW5jZSBwb3NzaWJpbGl0aWVzIGNvbnRhaW5zIGFsbCB2YWxpZCBjb250aW51YXRpb25zLCBtaWdodCBiZQogICAgICAgICMgbmljZSB0byB3b3JrIHRoZW0gaW50byB0aGUgZXJyb3IgbXNnCiAgICAgICAgcmFpc2UgR2V0b3B0RXJyb3IoJ29wdGlvbiAtLSVzIG5vdCBhIHVuaXF1ZSBwcmVmaXgnICUgb3B0LCBvcHQpCiAgICBhc3NlcnQgbGVuKHBvc3NpYmlsaXRpZXMpID09IDEKICAgIHVuaXF1ZV9tYXRjaCA9IHBvc3NpYmlsaXRpZXNbMF0KICAgIGhhc19hcmcgPSB1bmlxdWVfbWF0Y2guZW5kc3dpdGgoJz0nKQogICAgaWYgaGFzX2FyZzoKICAgICAgICB1bmlxdWVfbWF0Y2ggPSB1bmlxdWVfbWF0Y2hbOi0xXQogICAgcmV0dXJuIGhhc19hcmcsIHVuaXF1ZV9tYXRjaAoKZGVmIGRvX3Nob3J0cyhvcHRzLCBvcHRzdHJpbmcsIHNob3J0b3B0cywgYXJncyk6CiAgICB3aGlsZSBvcHRzdHJpbmcgIT0gJyc6CiAgICAgICAgb3B0LCBvcHRzdHJpbmcgPSBvcHRzdHJpbmdbMF0sIG9wdHN0cmluZ1sxOl0KICAgICAgICBpZiBzaG9ydF9oYXNfYXJnKG9wdCwgc2hvcnRvcHRzKToKICAgICAgICAgICAgaWYgb3B0c3RyaW5nID09ICcnOgogICAgICAgICAgICAgICAgaWYgbm90IGFyZ3M6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgR2V0b3B0RXJyb3IoJ29wdGlvbiAtJXMgcmVxdWlyZXMgYXJndW1lbnQnICUgb3B0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdCkKICAgICAgICAgICAgICAgIG9wdHN0cmluZywgYXJncyA9IGFyZ3NbMF0sIGFyZ3NbMTpdCiAgICAgICAgICAgIG9wdGFyZywgb3B0c3RyaW5nID0gb3B0c3RyaW5nLCAnJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9wdGFyZyA9ICcnCiAgICAgICAgb3B0cy5hcHBlbmQoKCctJyArIG9wdCwgb3B0YXJnKSkKICAgIHJldHVybiBvcHRzLCBhcmdzCgpkZWYgc2hvcnRfaGFzX2FyZyhvcHQsIHNob3J0b3B0cyk6CiAgICBmb3IgaSBpbiByYW5nZShsZW4oc2hvcnRvcHRzKSk6CiAgICAgICAgaWYgb3B0ID09IHNob3J0b3B0c1tpXSAhPSAnOic6CiAgICAgICAgICAgIHJldHVybiBzaG9ydG9wdHMuc3RhcnRzd2l0aCgnOicsIGkrMSkKICAgIHJhaXNlIEdldG9wdEVycm9yKCdvcHRpb24gLSVzIG5vdCByZWNvZ25pemVkJyAlIG9wdCwgb3B0KQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGltcG9ydCBzeXMKICAgIHByaW50KGdldG9wdChzeXMuYXJndlsxOl0sICJhOmIiLCBbImFscGhhPSIsICJiZXRhIl0pKQo=',
'/Lib/_pyio.py':'IyAiUHl0aG9uIGltcGxlbWVudGF0aW9uIG9mIHRoZSBpbyBtb2R1bGUuIgoKaW1wb3J0IG9zCiNpbXBvcnQgYWJjCmltcG9ydCBjb2RlY3MKaW1wb3J0IHdhcm5pbmdzCmltcG9ydCBlcnJubwojIEltcG9ydCBfdGhyZWFkIGluc3RlYWQgb2YgdGhyZWFkaW5nIHRvIHJlZHVjZSBzdGFydHVwIGNvc3QKI3RyeToKIyAgICBmcm9tIF90aHJlYWQgaW1wb3J0IGFsbG9jYXRlX2xvY2sgYXMgTG9jawojZXhjZXB0IEltcG9ydEVycm9yOgpmcm9tIF9kdW1teV90aHJlYWQgaW1wb3J0IGFsbG9jYXRlX2xvY2sgYXMgTG9jawoKI2ltcG9ydCBpbwojZnJvbSBpbyBpbXBvcnQgKF9fYWxsX18sIFNFRUtfU0VULCBTRUVLX0NVUiwgU0VFS19FTkQpCmZyb20gZXJybm8gaW1wb3J0IEVJTlRSCgojIGZvciBzZWVrKCkgICAodGFrZW4gZnJvbSBpby5weSkKU0VFS19TRVQgPSAwClNFRUtfQ1VSID0gMQpTRUVLX0VORCA9IDIKCiMgb3BlbigpIHVzZXMgc3RfYmxrc2l6ZSB3aGVuZXZlciB3ZSBjYW4KREVGQVVMVF9CVUZGRVJfU0laRSA9IDggKiAxMDI0ICAjIGJ5dGVzCgojIE5PVEU6IEJhc2UgY2xhc3NlcyBkZWZpbmVkIGhlcmUgYXJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgIm9mZmljaWFsIiBBQkNzCiMgZGVmaW5lZCBpbiBpby5weS4gV2UgZG9uJ3QgdXNlIHJlYWwgaW5oZXJpdGFuY2UgdGhvdWdoLCBiZWNhdXNlIHdlIGRvbid0CiMgd2FudCB0byBpbmhlcml0IHRoZSBDIGltcGxlbWVudGF0aW9ucy4KCmNsYXNzIEJsb2NraW5nSU9FcnJvcihJT0Vycm9yKToKICAgICJFeGNlcHRpb24gcmFpc2VkIHdoZW4gSS9PIHdvdWxkIGJsb2NrIG9uIGEgbm9uLWJsb2NraW5nIEkvTyBzdHJlYW0uIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBlcnJubywgc3RyZXJyb3IsIGNoYXJhY3RlcnNfd3JpdHRlbj0wKToKICAgICAgICAjc3VwZXIoKS5fX2luaXRfXyhlcnJubywgc3RyZXJyb3IpICAgI2ZpeG1lCiAgICAgICAgSU9FcnJvci5fX2luaXRfXyhzZWxmLCBlcnJubywgc3RyZXJyb3IpCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY2hhcmFjdGVyc193cml0dGVuLCBpbnQpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNoYXJhY3RlcnNfd3JpdHRlbiBtdXN0IGJlIGEgaW50ZWdlciIpCiAgICAgICAgc2VsZi5jaGFyYWN0ZXJzX3dyaXR0ZW4gPSBjaGFyYWN0ZXJzX3dyaXR0ZW4KCgpkZWYgb3BlbihmaWxlLCBtb2RlPSJyIiwgYnVmZmVyaW5nPS0xLCBlbmNvZGluZz1Ob25lLCBlcnJvcnM9Tm9uZSxcCiAgICAgICAgIG5ld2xpbmU9Tm9uZSwgY2xvc2VmZD1UcnVlKToKCiAgICBpZiBub3QgaXNpbnN0YW5jZShmaWxlLCAoc3RyLCBieXRlcywgaW50KSk6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJpbnZhbGlkIGZpbGU6ICVyIiAlIGZpbGUpCiAgICBpZiBub3QgaXNpbnN0YW5jZShtb2RlLCBzdHIpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW52YWxpZCBtb2RlOiAlciIgJSBtb2RlKQogICAgaWYgbm90IGlzaW5zdGFuY2UoYnVmZmVyaW5nLCBpbnQpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW52YWxpZCBidWZmZXJpbmc6ICVyIiAlIGJ1ZmZlcmluZykKICAgIGlmIGVuY29kaW5nIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShlbmNvZGluZywgc3RyKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoImludmFsaWQgZW5jb2Rpbmc6ICVyIiAlIGVuY29kaW5nKQogICAgaWYgZXJyb3JzIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShlcnJvcnMsIHN0cik6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJpbnZhbGlkIGVycm9yczogJXIiICUgZXJyb3JzKQogICAgbW9kZXMgPSBzZXQobW9kZSkKICAgIGlmIG1vZGVzIC0gc2V0KCJhcndiK3RVIikgb3IgbGVuKG1vZGUpID4gbGVuKG1vZGVzKToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIG1vZGU6ICVyIiAlIG1vZGUpCiAgICByZWFkaW5nID0gInIiIGluIG1vZGVzCiAgICB3cml0aW5nID0gInciIGluIG1vZGVzCiAgICBhcHBlbmRpbmcgPSAiYSIgaW4gbW9kZXMKICAgIHVwZGF0aW5nID0gIisiIGluIG1vZGVzCiAgICB0ZXh0ID0gInQiIGluIG1vZGVzCiAgICBiaW5hcnkgPSAiYiIgaW4gbW9kZXMKICAgIGlmICJVIiBpbiBtb2RlczoKICAgICAgICBpZiB3cml0aW5nIG9yIGFwcGVuZGluZzoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiY2FuJ3QgdXNlIFUgYW5kIHdyaXRpbmcgbW9kZSBhdCBvbmNlIikKICAgICAgICByZWFkaW5nID0gVHJ1ZQogICAgaWYgdGV4dCBhbmQgYmluYXJ5OgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImNhbid0IGhhdmUgdGV4dCBhbmQgYmluYXJ5IG1vZGUgYXQgb25jZSIpCiAgICBpZiByZWFkaW5nICsgd3JpdGluZyArIGFwcGVuZGluZyA+IDE6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiY2FuJ3QgaGF2ZSByZWFkL3dyaXRlL2FwcGVuZCBtb2RlIGF0IG9uY2UiKQogICAgaWYgbm90IChyZWFkaW5nIG9yIHdyaXRpbmcgb3IgYXBwZW5kaW5nKToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJtdXN0IGhhdmUgZXhhY3RseSBvbmUgb2YgcmVhZC93cml0ZS9hcHBlbmQgbW9kZSIpCiAgICBpZiBiaW5hcnkgYW5kIGVuY29kaW5nIGlzIG5vdCBOb25lOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImJpbmFyeSBtb2RlIGRvZXNuJ3QgdGFrZSBhbiBlbmNvZGluZyBhcmd1bWVudCIpCiAgICBpZiBiaW5hcnkgYW5kIGVycm9ycyBpcyBub3QgTm9uZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJiaW5hcnkgbW9kZSBkb2Vzbid0IHRha2UgYW4gZXJyb3JzIGFyZ3VtZW50IikKICAgIGlmIGJpbmFyeSBhbmQgbmV3bGluZSBpcyBub3QgTm9uZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJiaW5hcnkgbW9kZSBkb2Vzbid0IHRha2UgYSBuZXdsaW5lIGFyZ3VtZW50IikKICAgIHJhdyA9IEZpbGVJTyhmaWxlLAogICAgICAgICAgICAgICAgIChyZWFkaW5nIGFuZCAiciIgb3IgIiIpICsKICAgICAgICAgICAgICAgICAod3JpdGluZyBhbmQgInciIG9yICIiKSArCiAgICAgICAgICAgICAgICAgKGFwcGVuZGluZyBhbmQgImEiIG9yICIiKSArCiAgICAgICAgICAgICAgICAgKHVwZGF0aW5nIGFuZCAiKyIgb3IgIiIpLAogICAgICAgICAgICAgICAgIGNsb3NlZmQpCiAgICBsaW5lX2J1ZmZlcmluZyA9IEZhbHNlCiAgICBpZiBidWZmZXJpbmcgPT0gMSBvciBidWZmZXJpbmcgPCAwIGFuZCByYXcuaXNhdHR5KCk6CiAgICAgICAgYnVmZmVyaW5nID0gLTEKICAgICAgICBsaW5lX2J1ZmZlcmluZyA9IFRydWUKICAgIGlmIGJ1ZmZlcmluZyA8IDA6CiAgICAgICAgYnVmZmVyaW5nID0gREVGQVVMVF9CVUZGRVJfU0laRQogICAgICAgIHRyeToKICAgICAgICAgICAgYnMgPSBvcy5mc3RhdChyYXcuZmlsZW5vKCkpLnN0X2Jsa3NpemUKICAgICAgICAjZXhjZXB0IChvcy5lcnJvciwgQXR0cmlidXRlRXJyb3IpOiAgICNmaXhtZQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGJzID4gMToKICAgICAgICAgICAgICAgIGJ1ZmZlcmluZyA9IGJzCiAgICBpZiBidWZmZXJpbmcgPCAwOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImludmFsaWQgYnVmZmVyaW5nIHNpemUiKQogICAgaWYgYnVmZmVyaW5nID09IDA6CiAgICAgICAgaWYgYmluYXJ5OgogICAgICAgICAgICByZXR1cm4gcmF3CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiY2FuJ3QgaGF2ZSB1bmJ1ZmZlcmVkIHRleHQgSS9PIikKICAgIGlmIHVwZGF0aW5nOgogICAgICAgIGJ1ZmZlciA9IEJ1ZmZlcmVkUmFuZG9tKHJhdywgYnVmZmVyaW5nKQogICAgZWxpZiB3cml0aW5nIG9yIGFwcGVuZGluZzoKICAgICAgICBidWZmZXIgPSBCdWZmZXJlZFdyaXRlcihyYXcsIGJ1ZmZlcmluZykKICAgIGVsaWYgcmVhZGluZzoKICAgICAgICBidWZmZXIgPSBCdWZmZXJlZFJlYWRlcihyYXcsIGJ1ZmZlcmluZykKICAgIGVsc2U6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidW5rbm93biBtb2RlOiAlciIgJSBtb2RlKQogICAgaWYgYmluYXJ5OgogICAgICAgIHJldHVybiBidWZmZXIKICAgIHRleHQgPSBUZXh0SU9XcmFwcGVyKGJ1ZmZlciwgZW5jb2RpbmcsIGVycm9ycywgbmV3bGluZSwgbGluZV9idWZmZXJpbmcpCiAgICB0ZXh0Lm1vZGUgPSBtb2RlCiAgICByZXR1cm4gdGV4dAoKCmNsYXNzIERvY0Rlc2NyaXB0b3I6CiAgICAiSGVscGVyIGZvciBidWlsdGlucy5vcGVuLl9fZG9jX18iCiAgICBkZWYgX19nZXRfXyhzZWxmLCBvYmosIHR5cCk6CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgIm9wZW4oZmlsZSwgbW9kZT0ncicsIGJ1ZmZlcmluZz0tMSwgZW5jb2Rpbmc9Tm9uZSwgIgogICAgICAgICAgICAgICAgICJlcnJvcnM9Tm9uZSwgbmV3bGluZT1Ob25lLCBjbG9zZWZkPVRydWUpXG5cbiIgKwogICAgICAgICAgICBvcGVuLl9fZG9jX18pCgpjbGFzcyBPcGVuV3JhcHBlcjoKICAgIF9fZG9jX18gPSBEb2NEZXNjcmlwdG9yKCkKCiAgICBkZWYgX19uZXdfXyhjbHMsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgcmV0dXJuIG9wZW4oKmFyZ3MsICoqa3dhcmdzKQoKCiMgSW4gbm9ybWFsIG9wZXJhdGlvbiwgYm90aCBgVW5zdXBwb3J0ZWRPcGVyYXRpb25gcyBzaG91bGQgYmUgYm91bmQgdG8gdGhlCiMgc2FtZSBvYmplY3QuCiN0cnk6CiAgICAjQkUgY29tbWVudGVkIHRoaXMgb3V0IHNpbmNlIHdlIGFyZSBub3QgaW1wb3J0aW5nIGlvIG1vZHVsZQogICAgI1Vuc3VwcG9ydGVkT3BlcmF0aW9uID0gaW8uVW5zdXBwb3J0ZWRPcGVyYXRpb24KICAgIHBhc3MKI2V4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKY2xhc3MgVW5zdXBwb3J0ZWRPcGVyYXRpb24oVmFsdWVFcnJvciwgSU9FcnJvcik6CiAgIHBhc3MKCgojY2xhc3MgSU9CYXNlKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6ICAgI2ZpeG1lCmNsYXNzIElPQmFzZToKCiAgICAjIyMgSW50ZXJuYWwgIyMjCgogICAgZGVmIF91bnN1cHBvcnRlZChzZWxmLCBuYW1lKToKICAgICAgICAiSW50ZXJuYWw6IHJhaXNlIGFuIElPRXJyb3IgZXhjZXB0aW9uIGZvciB1bnN1cHBvcnRlZCBvcGVyYXRpb25zLiIKICAgICAgICByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbigiJXMuJXMoKSBub3Qgc3VwcG9ydGVkIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBuYW1lKSkKCiAgICAjIyMgUG9zaXRpb25pbmcgIyMjCgogICAgZGVmIHNlZWsoc2VsZiwgcG9zLCB3aGVuY2U9MCk6CiAgICAgICAgc2VsZi5fdW5zdXBwb3J0ZWQoInNlZWsiKQoKICAgIGRlZiB0ZWxsKHNlbGYpOgogICAgICAgICJSZXR1cm4gYW4gaW50IGluZGljYXRpbmcgdGhlIGN1cnJlbnQgc3RyZWFtIHBvc2l0aW9uLiIKICAgICAgICByZXR1cm4gc2VsZi5zZWVrKDAsIDEpCgogICAgZGVmIHRydW5jYXRlKHNlbGYsIHBvcz1Ob25lKToKICAgICAgICAjIlRydW5jYXRlIGZpbGUgdG8gc2l6ZSBieXRlcy4KICAgICAgICAjCiAgICAgICAgI1NpemUgZGVmYXVsdHMgdG8gdGhlIGN1cnJlbnQgSU8gcG9zaXRpb24gYXMgcmVwb3J0ZWQgYnkgdGVsbCgpLiAgUmV0dXJuCiAgICAgICAgI3RoZSBuZXcgc2l6ZS4KICAgICAgICAjIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJ0cnVuY2F0ZSIpCgogICAgIyMjIEZsdXNoIGFuZCBjbG9zZSAjIyMKCiAgICBkZWYgZmx1c2goc2VsZik6CiAgICAgICAgIyJGbHVzaCB3cml0ZSBidWZmZXJzLCBpZiBhcHBsaWNhYmxlLgogICAgICAgICMKICAgICAgICAjVGhpcyBpcyBub3QgaW1wbGVtZW50ZWQgZm9yIHJlYWQtb25seSBhbmQgbm9uLWJsb2NraW5nIHN0cmVhbXMuCiAgICAgICAgIyIKICAgICAgICBzZWxmLl9jaGVja0Nsb3NlZCgpCiAgICAgICAgIyBYWFggU2hvdWxkIHRoaXMgcmV0dXJuIHRoZSBudW1iZXIgb2YgYnl0ZXMgd3JpdHRlbj8/PwoKICAgIF9fY2xvc2VkID0gRmFsc2UKCiAgICBkZWYgY2xvc2Uoc2VsZik6CiAgICAgICAgIyJGbHVzaCBhbmQgY2xvc2UgdGhlIElPIG9iamVjdC4KCiAgICAgICAgI1RoaXMgbWV0aG9kIGhhcyBubyBlZmZlY3QgaWYgdGhlIGZpbGUgaXMgYWxyZWFkeSBjbG9zZWQuCiAgICAgICAgIyIKICAgICAgICBpZiBub3Qgc2VsZi5fX2Nsb3NlZDoKICAgICAgICAgICAgc2VsZi5mbHVzaCgpCiAgICAgICAgICAgIHNlbGYuX19jbG9zZWQgPSBUcnVlCgogICAgZGVmIF9fZGVsX18oc2VsZik6CiAgICAgICAgIyJEZXN0cnVjdG9yLiAgQ2FsbHMgY2xvc2UoKS4iCiAgICAgICAgIyBUaGUgdHJ5L2V4Y2VwdCBibG9jayBpcyBpbiBjYXNlIHRoaXMgaXMgY2FsbGVkIGF0IHByb2dyYW0KICAgICAgICAjIGV4aXQgdGltZSwgd2hlbiBpdCdzIHBvc3NpYmxlIHRoYXQgZ2xvYmFscyBoYXZlIGFscmVhZHkgYmVlbgogICAgICAgICMgZGVsZXRlZCwgYW5kIHRoZW4gdGhlIGNsb3NlKCkgY2FsbCBtaWdodCBmYWlsLiAgU2luY2UKICAgICAgICAjIHRoZXJlJ3Mgbm90aGluZyB3ZSBjYW4gZG8gYWJvdXQgc3VjaCBmYWlsdXJlcyBhbmQgdGhleSBhbm5veQogICAgICAgICMgdGhlIGVuZCB1c2Vycywgd2Ugc3VwcHJlc3MgdGhlIHRyYWNlYmFjay4KICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuY2xvc2UoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKICAgICMjIyBJbnF1aXJpZXMgIyMjCgogICAgZGVmIHNlZWthYmxlKHNlbGYpOgogICAgICAgICMiUmV0dXJuIGEgYm9vbCBpbmRpY2F0aW5nIHdoZXRoZXIgb2JqZWN0IHN1cHBvcnRzIHJhbmRvbSBhY2Nlc3MuCiAgICAgICAgIwogICAgICAgICNJZiBGYWxzZSwgc2VlaygpLCB0ZWxsKCkgYW5kIHRydW5jYXRlKCkgd2lsbCByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbi4KICAgICAgICAjVGhpcyBtZXRob2QgbWF5IG5lZWQgdG8gZG8gYSB0ZXN0IHNlZWsoKS4KICAgICAgICAjIgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBfY2hlY2tTZWVrYWJsZShzZWxmLCBtc2c9Tm9uZSk6CiAgICAgICAgIyJJbnRlcm5hbDogcmFpc2UgVW5zdXBwb3J0ZWRPcGVyYXRpb24gaWYgZmlsZSBpcyBub3Qgc2Vla2FibGUKICAgICAgICAjIgogICAgICAgIGlmIG5vdCBzZWxmLnNlZWthYmxlKCk6CiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkT3BlcmF0aW9uKCJGaWxlIG9yIHN0cmVhbSBpcyBub3Qgc2Vla2FibGUuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtc2cgaXMgTm9uZSBlbHNlIG1zZykKCiAgICBkZWYgcmVhZGFibGUoc2VsZik6CiAgICAgICAgIyJSZXR1cm4gYSBib29sIGluZGljYXRpbmcgd2hldGhlciBvYmplY3Qgd2FzIG9wZW5lZCBmb3IgcmVhZGluZy4KCiAgICAgICAgI0lmIEZhbHNlLCByZWFkKCkgd2lsbCByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbi4KICAgICAgICAjIgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBfY2hlY2tSZWFkYWJsZShzZWxmLCBtc2c9Tm9uZSk6CiAgICAgICAgIyJJbnRlcm5hbDogcmFpc2UgVW5zdXBwb3J0ZWRPcGVyYXRpb24gaWYgZmlsZSBpcyBub3QgcmVhZGFibGUKICAgICAgICAjIgogICAgICAgIGlmIG5vdCBzZWxmLnJlYWRhYmxlKCk6CiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkT3BlcmF0aW9uKCJGaWxlIG9yIHN0cmVhbSBpcyBub3QgcmVhZGFibGUuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtc2cgaXMgTm9uZSBlbHNlIG1zZykKCiAgICBkZWYgd3JpdGFibGUoc2VsZik6CiAgICAgICAgIyJSZXR1cm4gYSBib29sIGluZGljYXRpbmcgd2hldGhlciBvYmplY3Qgd2FzIG9wZW5lZCBmb3Igd3JpdGluZy4KCiAgICAgICAgI0lmIEZhbHNlLCB3cml0ZSgpIGFuZCB0cnVuY2F0ZSgpIHdpbGwgcmFpc2UgVW5zdXBwb3J0ZWRPcGVyYXRpb24uCiAgICAgICAgIyIKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX2NoZWNrV3JpdGFibGUoc2VsZiwgbXNnPU5vbmUpOgogICAgICAgICMiSW50ZXJuYWw6IHJhaXNlIFVuc3VwcG9ydGVkT3BlcmF0aW9uIGlmIGZpbGUgaXMgbm90IHdyaXRhYmxlCiAgICAgICAgIyIKICAgICAgICBpZiBub3Qgc2VsZi53cml0YWJsZSgpOgogICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbigiRmlsZSBvciBzdHJlYW0gaXMgbm90IHdyaXRhYmxlLiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbXNnIGlzIE5vbmUgZWxzZSBtc2cpCgogICAgIyMgZml4bWUuLiAgd2UgbmVlZCB0byBpbXBsZW1lbnQgcHJvcGVydHkgdmlhIGRlY29yYXRvcnMuCiAgICAjIyBAcHJvcGVydHkKICAgIGRlZiBjbG9zZWQoc2VsZik6CiAgICAgICAgIyJjbG9zZWQ6IGJvb2wuICBUcnVlIGlmZiB0aGUgZmlsZSBoYXMgYmVlbiBjbG9zZWQuCgogICAgICAgICNGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIHRoaXMgaXMgYSBwcm9wZXJ0eSwgbm90IGEgcHJlZGljYXRlLgogICAgICAgICMiCiAgICAgICAgcmV0dXJuIHNlbGYuX19jbG9zZWQKCiAgICBkZWYgX2NoZWNrQ2xvc2VkKHNlbGYsIG1zZz1Ob25lKToKICAgICAgICAjIkludGVybmFsOiByYWlzZSBhbiBWYWx1ZUVycm9yIGlmIGZpbGUgaXMgY2xvc2VkCiAgICAgICAgIyIKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSS9PIG9wZXJhdGlvbiBvbiBjbG9zZWQgZmlsZS4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbXNnIGlzIE5vbmUgZWxzZSBtc2cpCgogICAgIyMjIENvbnRleHQgbWFuYWdlciAjIyMKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOiAgIyBUaGF0J3MgYSBmb3J3YXJkIHJlZmVyZW5jZQogICAgICAgICMiQ29udGV4dCBtYW5hZ2VtZW50IHByb3RvY29sLiAgUmV0dXJucyBzZWxmIChhbiBpbnN0YW5jZSBvZiBJT0Jhc2UpIgogICAgICAgIHNlbGYuX2NoZWNrQ2xvc2VkKCkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqYXJncyk6CiAgICAgICAgIyJDb250ZXh0IG1hbmFnZW1lbnQgcHJvdG9jb2wuICBDYWxscyBjbG9zZSgpIgogICAgICAgIHNlbGYuY2xvc2UoKQoKICAgICMjIyBMb3dlci1sZXZlbCBBUElzICMjIwoKICAgICMgWFhYIFNob3VsZCB0aGVzZSBiZSBwcmVzZW50IGV2ZW4gaWYgdW5pbXBsZW1lbnRlZD8KCiAgICBkZWYgZmlsZW5vKHNlbGYpOgogICAgICAgICMiUmV0dXJucyB1bmRlcmx5aW5nIGZpbGUgZGVzY3JpcHRvciAoYW4gaW50KSBpZiBvbmUgZXhpc3RzLgoKICAgICAgICAjQW4gSU9FcnJvciBpcyByYWlzZWQgaWYgdGhlIElPIG9iamVjdCBkb2VzIG5vdCB1c2UgYSBmaWxlIGRlc2NyaXB0b3IuCiAgICAgICAgIyIKICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgiZmlsZW5vIikKCiAgICBkZWYgaXNhdHR5KHNlbGYpOgogICAgICAgICMiUmV0dXJuIGEgYm9vbCBpbmRpY2F0aW5nIHdoZXRoZXIgdGhpcyBpcyBhbiAnaW50ZXJhY3RpdmUnIHN0cmVhbS4KCiAgICAgICAgI1JldHVybiBGYWxzZSBpZiBpdCBjYW4ndCBiZSBkZXRlcm1pbmVkLgogICAgICAgICMiCiAgICAgICAgc2VsZi5fY2hlY2tDbG9zZWQoKQogICAgICAgIHJldHVybiBGYWxzZQoKICAgICMjIyBSZWFkbGluZVtzXSBhbmQgd3JpdGVsaW5lcyAjIyMKCiAgICBkZWYgcmVhZGxpbmUoc2VsZiwgbGltaXQ9LTEpOgogICAgICAgICMgRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCBhIChzbG93aXNoKSByZWFkbGluZSgpLgogICAgICAgIGlmIGhhc2F0dHIoc2VsZiwgInBlZWsiKToKICAgICAgICAgICAgZGVmIG5yZWFkYWhlYWQoKToKICAgICAgICAgICAgICAgIHJlYWRhaGVhZCA9IHNlbGYucGVlaygxKQogICAgICAgICAgICAgICAgaWYgbm90IHJlYWRhaGVhZDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMQogICAgICAgICAgICAgICAgI24gPSAocmVhZGFoZWFkLmZpbmQoYiJcbiIpICsgMSkgb3IgbGVuKHJlYWRhaGVhZCkgI2ZpeG1lCiAgICAgICAgICAgICAgICBuID0gKHJlYWRhaGVhZC5maW5kKCJcbiIpICsgMSkgb3IgbGVuKHJlYWRhaGVhZCkKICAgICAgICAgICAgICAgIGlmIGxpbWl0ID49IDA6CiAgICAgICAgICAgICAgICAgICAgbiA9IG1pbihuLCBsaW1pdCkKICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGVmIG5yZWFkYWhlYWQoKToKICAgICAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgaWYgbGltaXQgaXMgTm9uZToKICAgICAgICAgICAgbGltaXQgPSAtMQogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2UobGltaXQsIGludCk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibGltaXQgbXVzdCBiZSBhbiBpbnRlZ2VyIikKICAgICAgICByZXMgPSBieXRlYXJyYXkoKQogICAgICAgIHdoaWxlIGxpbWl0IDwgMCBvciBsZW4ocmVzKSA8IGxpbWl0OgogICAgICAgICAgICBiID0gc2VsZi5yZWFkKG5yZWFkYWhlYWQoKSkKICAgICAgICAgICAgaWYgbm90IGI6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICByZXMgKz0gYgogICAgICAgICAgICAjaWYgcmVzLmVuZHN3aXRoKGIiXG4iKTogICNmaXhtZQogICAgICAgICAgICBpZiByZXMuZW5kc3dpdGgoIlxuIik6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIHJldHVybiBieXRlcyhyZXMpCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHNlbGYuX2NoZWNrQ2xvc2VkKCkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICBsaW5lID0gc2VsZi5yZWFkbGluZSgpCiAgICAgICAgaWYgbm90IGxpbmU6CiAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICByZXR1cm4gbGluZQoKICAgIGRlZiByZWFkbGluZXMoc2VsZiwgaGludD1Ob25lKToKICAgICAgICAjIlJldHVybiBhIGxpc3Qgb2YgbGluZXMgZnJvbSB0aGUgc3RyZWFtLgoKICAgICAgICAjaGludCBjYW4gYmUgc3BlY2lmaWVkIHRvIGNvbnRyb2wgdGhlIG51bWJlciBvZiBsaW5lcyByZWFkOiBubyBtb3JlCiAgICAgICAgI2xpbmVzIHdpbGwgYmUgcmVhZCBpZiB0aGUgdG90YWwgc2l6ZSAoaW4gYnl0ZXMvY2hhcmFjdGVycykgb2YgYWxsCiAgICAgICAgI2xpbmVzIHNvIGZhciBleGNlZWRzIGhpbnQuCiAgICAgICAgIyIKICAgICAgICBpZiBoaW50IGlzIE5vbmUgb3IgaGludCA8PSAwOgogICAgICAgICAgICByZXR1cm4gbGlzdChzZWxmKQogICAgICAgIG4gPSAwCiAgICAgICAgbGluZXMgPSBbXQogICAgICAgIGZvciBsaW5lIGluIHNlbGY6CiAgICAgICAgICAgIGxpbmVzLmFwcGVuZChsaW5lKQogICAgICAgICAgICBuICs9IGxlbihsaW5lKQogICAgICAgICAgICBpZiBuID49IGhpbnQ6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIHJldHVybiBsaW5lcwoKICAgIGRlZiB3cml0ZWxpbmVzKHNlbGYsIGxpbmVzKToKICAgICAgICBzZWxmLl9jaGVja0Nsb3NlZCgpCiAgICAgICAgZm9yIGxpbmUgaW4gbGluZXM6CiAgICAgICAgICAgIHNlbGYud3JpdGUobGluZSkKCiNCRSBjb21tZW50aW5nIHRoaXMgb3V0IGZvciBub3cuCiNpby5JT0Jhc2UucmVnaXN0ZXIoSU9CYXNlKQoKY2xhc3MgUmF3SU9CYXNlKElPQmFzZSk6CiAgICBkZWYgcmVhZChzZWxmLCBuPS0xKToKICAgICAgICAjIlJlYWQgYW5kIHJldHVybiB1cCB0byBuIGJ5dGVzLCB3aGVyZSBuIGlzIGFuIGludC4KCiAgICAgICAgI1JldHVybnMgYW4gZW1wdHkgYnl0ZXMgb2JqZWN0IG9uIEVPRiwgb3IgTm9uZSBpZiB0aGUgb2JqZWN0IGlzCiAgICAgICAgIyNzZXQgbm90IHRvIGJsb2NrIGFuZCBoYXMgbm8gZGF0YSB0byByZWFkLgogICAgICAgICMiCiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICBuID0gLTEKICAgICAgICBpZiBuIDwgMDoKICAgICAgICAgICAgcmV0dXJuIHNlbGYucmVhZGFsbCgpCiAgICAgICAgYiA9IGJ5dGVhcnJheShuLl9faW5kZXhfXygpKQogICAgICAgIG4gPSBzZWxmLnJlYWRpbnRvKGIpCiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGRlbCBiW246XQogICAgICAgIHJldHVybiBieXRlcyhiKQoKICAgIGRlZiByZWFkYWxsKHNlbGYpOgogICAgICAgICMiUmVhZCB1bnRpbCBFT0YsIHVzaW5nIG11bHRpcGxlIHJlYWQoKSBjYWxsLiIKICAgICAgICByZXMgPSBieXRlYXJyYXkoKQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIGRhdGEgPSBzZWxmLnJlYWQoREVGQVVMVF9CVUZGRVJfU0laRSkKICAgICAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICByZXMgKz0gZGF0YQogICAgICAgIGlmIHJlczoKICAgICAgICAgICAgcmV0dXJuIGJ5dGVzKHJlcykKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIGInJyBvciBOb25lCiAgICAgICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIHJlYWRpbnRvKHNlbGYsIGIpOgogICAgICAgICMiUmVhZCB1cCB0byBsZW4oYikgYnl0ZXMgaW50byBieXRlYXJyYXkgIgoKICAgICAgICAjUmV0dXJucyBhbiBpbnQgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVhZCAoMCBmb3IgRU9GKSwgb3IKICAgICAgICAjTm9uZSBpZiB0aGUgb2JqZWN0IGlzIHNldCBub3QgdG8gYmxvY2sgYW5kIGhhcyBubyBkYXRhIHRvIHJlYWQuCiAgICAgICAgIyIKICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgicmVhZGludG8iKQoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICAjIldyaXRlIHRoZSBnaXZlbiBidWZmZXIgdG8gdGhlIElPIHN0cmVhbS4KCiAgICAgICAgI1JldHVybnMgdGhlIG51bWJlciBvZiBieXRlcyB3cml0dGVuLCB3aGljaCBtYXkgYmUgbGVzcyB0aGFuIGxlbihiKS4KICAgICAgICAjIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJ3cml0ZSIpCgojQkUgY29tbWVudGluZyB0aGlzIG91dAojaW8uUmF3SU9CYXNlLnJlZ2lzdGVyKFJhd0lPQmFzZSkKI2Zyb20gX2lvIGltcG9ydCBGaWxlSU8KCmNsYXNzIEZpbGVJTyhSYXdJT0Jhc2UpOgogIHBhc3MKI1Jhd0lPQmFzZS5yZWdpc3RlcihGaWxlSU8pCgpjbGFzcyBCdWZmZXJlZElPQmFzZShJT0Jhc2UpOgoKICAgICMiQmFzZSBjbGFzcyBmb3IgYnVmZmVyZWQgSU8gb2JqZWN0cy4KCiAgICAjVGhlIG1haW4gZGlmZmVyZW5jZSB3aXRoIFJhd0lPQmFzZSBpcyB0aGF0IHRoZSByZWFkKCkgbWV0aG9kCiAgICAjc3VwcG9ydHMgb21pdHRpbmcgdGhlIHNpemUgYXJndW1lbnQsIGFuZCBkb2VzIG5vdCBoYXZlIGEgZGVmYXVsdAogICAgI2ltcGxlbWVudGF0aW9uIHRoYXQgZGVmZXJzIHRvIHJlYWRpbnRvKCkuCgogICAgI0luIGFkZGl0aW9uLCByZWFkKCksIHJlYWRpbnRvKCkgYW5kIHdyaXRlKCkgbWF5IHJhaXNlCiAgICAjQmxvY2tpbmdJT0Vycm9yIGlmIHRoZSB1bmRlcmx5aW5nIHJhdyBzdHJlYW0gaXMgaW4gbm9uLWJsb2NraW5nCiAgICAjbW9kZSBhbmQgbm90IHJlYWR5OyB1bmxpa2UgdGhlaXIgcmF3IGNvdW50ZXJwYXJ0cywgdGhleSB3aWxsIG5ldmVyCiAgICAjcmV0dXJuIE5vbmUuCgogICAgI0EgdHlwaWNhbCBpbXBsZW1lbnRhdGlvbiBzaG91bGQgbm90IGluaGVyaXQgZnJvbSBhIFJhd0lPQmFzZQogICAgI2ltcGxlbWVudGF0aW9uLCBidXQgd3JhcCBvbmUuCiAgICAjIgoKICAgIGRlZiByZWFkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgIyJSZWFkIGFuZCByZXR1cm4gdXAgdG8gbiBieXRlcywgd2hlcmUgbiBpcyBhbiBpbnQuCgogICAgICAgICNJZiB0aGUgYXJndW1lbnQgaXMgb21pdHRlZCwgTm9uZSwgb3IgbmVnYXRpdmUsIHJlYWRzIGFuZAogICAgICAgICNyZXR1cm5zIGFsbCBkYXRhIHVudGlsIEVPRi4KCiAgICAgICAgI0lmIHRoZSBhcmd1bWVudCBpcyBwb3NpdGl2ZSwgYW5kIHRoZSB1bmRlcmx5aW5nIHJhdyBzdHJlYW0gaXMKICAgICAgICAjbm90ICdpbnRlcmFjdGl2ZScsIG11bHRpcGxlIHJhdyByZWFkcyBtYXkgYmUgaXNzdWVkIHRvIHNhdGlzZnkKICAgICAgICAjdGhlIGJ5dGUgY291bnQgKHVubGVzcyBFT0YgaXMgcmVhY2hlZCBmaXJzdCkuICBCdXQgZm9yCiAgICAgICAgI2ludGVyYWN0aXZlIHJhdyBzdHJlYW1zIChYWFggYW5kIGZvciBwaXBlcz8pLCBhdCBtb3N0IG9uZSByYXcKICAgICAgICAjcmVhZCB3aWxsIGJlIGlzc3VlZCwgYW5kIGEgc2hvcnQgcmVzdWx0IGRvZXMgbm90IGltcGx5IHRoYXQKICAgICAgICAjRU9GIGlzIGltbWluZW50LgoKICAgICAgICAjUmV0dXJucyBhbiBlbXB0eSBieXRlcyBhcnJheSBvbiBFT0YuCgogICAgICAgICNSYWlzZXMgQmxvY2tpbmdJT0Vycm9yIGlmIHRoZSB1bmRlcmx5aW5nIHJhdyBzdHJlYW0gaGFzIG5vCiAgICAgICAgI2RhdGEgYXQgdGhlIG1vbWVudC4KICAgICAgICAjIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJyZWFkIikKCiAgICBkZWYgcmVhZDEoc2VsZiwgbj1Ob25lKToKICAgICAgICAjIlJlYWQgdXAgdG8gbiBieXRlcyB3aXRoIGF0IG1vc3Qgb25lIHJlYWQoKSBzeXN0ZW0gY2FsbCwKICAgICAgICAjd2hlcmUgbiBpcyBhbiBpbnQuCiAgICAgICAgIyIKICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgicmVhZDEiKQoKICAgIGRlZiByZWFkaW50byhzZWxmLCBiKToKICAgICAgICAjIlJlYWQgdXAgdG8gbGVuKGIpIGJ5dGVzIGludG8gYnl0ZWFycmF5IGIuCgogICAgICAgICNMaWtlIHJlYWQoKSwgdGhpcyBtYXkgaXNzdWUgbXVsdGlwbGUgcmVhZHMgdG8gdGhlIHVuZGVybHlpbmcgcmF3CiAgICAgICAgI3N0cmVhbSwgdW5sZXNzIHRoZSBsYXR0ZXIgaXMgJ2ludGVyYWN0aXZlJy4KCiAgICAgICAgI1JldHVybnMgYW4gaW50IHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHJlYWQgKDAgZm9yIEVPRikuCgogICAgICAgICNSYWlzZXMgQmxvY2tpbmdJT0Vycm9yIGlmIHRoZSB1bmRlcmx5aW5nIHJhdyBzdHJlYW0gaGFzIG5vCiAgICAgICAgI2RhdGEgYXQgdGhlIG1vbWVudC4KICAgICAgICAjIgogICAgICAgICMgWFhYIFRoaXMgb3VnaHQgdG8gd29yayB3aXRoIGFueXRoaW5nIHRoYXQgc3VwcG9ydHMgdGhlIGJ1ZmZlciBBUEkKICAgICAgICBkYXRhID0gc2VsZi5yZWFkKGxlbihiKSkKICAgICAgICBuID0gbGVuKGRhdGEpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBiWzpuXSA9IGRhdGEKICAgICAgICBleGNlcHQgVHlwZUVycm9yIGFzIGVycjoKICAgICAgICAgICAgaW1wb3J0IGFycmF5CiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGIsIGFycmF5LmFycmF5KToKICAgICAgICAgICAgICAgIHJhaXNlIGVycgogICAgICAgICAgICBiWzpuXSA9IGFycmF5LmFycmF5KCdiJywgZGF0YSkKICAgICAgICByZXR1cm4gbgoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICAjIldyaXRlIHRoZSBnaXZlbiBieXRlcyBidWZmZXIgdG8gdGhlIElPIHN0cmVhbS4KCiAgICAgICAgI1JldHVybiB0aGUgbnVtYmVyIG9mIGJ5dGVzIHdyaXR0ZW4sIHdoaWNoIGlzIG5ldmVyIGxlc3MgdGhhbgogICAgICAgICNsZW4oYikuCgogICAgICAgICNSYWlzZXMgQmxvY2tpbmdJT0Vycm9yIGlmIHRoZSBidWZmZXIgaXMgZnVsbCBhbmQgdGhlCiAgICAgICAgI3VuZGVybHlpbmcgcmF3IHN0cmVhbSBjYW5ub3QgYWNjZXB0IG1vcmUgZGF0YSBhdCB0aGUgbW9tZW50LgogICAgICAgICMiCiAgICAgICAgc2VsZi5fdW5zdXBwb3J0ZWQoIndyaXRlIikKCiAgICBkZWYgZGV0YWNoKHNlbGYpOgogICAgICAgICMiCiAgICAgICAgI1NlcGFyYXRlIHRoZSB1bmRlcmx5aW5nIHJhdyBzdHJlYW0gZnJvbSB0aGUgYnVmZmVyIGFuZCByZXR1cm4gaXQuCgogICAgICAgICNBZnRlciB0aGUgcmF3IHN0cmVhbSBoYXMgYmVlbiBkZXRhY2hlZCwgdGhlIGJ1ZmZlciBpcyBpbiBhbiB1bnVzYWJsZQogICAgICAgICNzdGF0ZS4KICAgICAgICAjIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJkZXRhY2giKQoKI0JFIGNvbW1lbnRpbmcgdGhpcyBvdXQKI2lvLkJ1ZmZlcmVkSU9CYXNlLnJlZ2lzdGVyKEJ1ZmZlcmVkSU9CYXNlKQoKCmNsYXNzIF9CdWZmZXJlZElPTWl4aW4oQnVmZmVyZWRJT0Jhc2UpOgoKICAgICMiQSBtaXhpbiBpbXBsZW1lbnRhdGlvbiBvZiBCdWZmZXJlZElPQmFzZSB3aXRoIGFuIHVuZGVybHlpbmcgcmF3IHN0cmVhbS4KCiAgICAjVGhpcyBwYXNzZXMgbW9zdCByZXF1ZXN0cyBvbiB0byB0aGUgdW5kZXJseWluZyByYXcgc3RyZWFtLiAgSXQKICAgICNkb2VzICpub3QqIHByb3ZpZGUgaW1wbGVtZW50YXRpb25zIG9mIHJlYWQoKSwgcmVhZGludG8oKSBvcgogICAgI3dyaXRlKCkuCiAgICAjIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCByYXcpOgogICAgICAgIHNlbGYuX3JhdyA9IHJhdwoKICAgICMjIyBQb3NpdGlvbmluZyAjIyMKCiAgICBkZWYgc2VlayhzZWxmLCBwb3MsIHdoZW5jZT0wKToKICAgICAgICBuZXdfcG9zaXRpb24gPSBzZWxmLnJhdy5zZWVrKHBvcywgd2hlbmNlKQogICAgICAgIGlmIG5ld19wb3NpdGlvbiA8IDA6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoInNlZWsoKSByZXR1cm5lZCBhbiBpbnZhbGlkIHBvc2l0aW9uIikKICAgICAgICByZXR1cm4gbmV3X3Bvc2l0aW9uCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgcG9zID0gc2VsZi5yYXcudGVsbCgpCiAgICAgICAgaWYgcG9zIDwgMDoKICAgICAgICAgICAgcmFpc2UgSU9FcnJvcigidGVsbCgpIHJldHVybmVkIGFuIGludmFsaWQgcG9zaXRpb24iKQogICAgICAgIHJldHVybiBwb3MKCiAgICBkZWYgdHJ1bmNhdGUoc2VsZiwgcG9zPU5vbmUpOgogICAgICAgICMgRmx1c2ggdGhlIHN0cmVhbS4gIFdlJ3JlIG1peGluZyBidWZmZXJlZCBJL08gd2l0aCBsb3dlci1sZXZlbCBJL08sCiAgICAgICAgIyBhbmQgYSBmbHVzaCBtYXkgYmUgbmVjZXNzYXJ5IHRvIHN5bmNoIGJvdGggdmlld3Mgb2YgdGhlIGN1cnJlbnQKICAgICAgICAjIGZpbGUgc3RhdGUuCiAgICAgICAgc2VsZi5mbHVzaCgpCgogICAgICAgIGlmIHBvcyBpcyBOb25lOgogICAgICAgICAgICBwb3MgPSBzZWxmLnRlbGwoKQogICAgICAgICMgWFhYOiBTaG91bGQgc2VlaygpIGJlIHVzZWQsIGluc3RlYWQgb2YgcGFzc2luZyB0aGUgcG9zaXRpb24KICAgICAgICAjIFhYWCAgZGlyZWN0bHkgdG8gdHJ1bmNhdGU/CiAgICAgICAgcmV0dXJuIHNlbGYucmF3LnRydW5jYXRlKHBvcykKCiAgICAjIyMgRmx1c2ggYW5kIGNsb3NlICMjIwoKICAgIGRlZiBmbHVzaChzZWxmKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZmx1c2ggb2YgY2xvc2VkIGZpbGUiKQogICAgICAgIHNlbGYucmF3LmZsdXNoKCkKCiAgICBkZWYgY2xvc2Uoc2VsZik6CiAgICAgICAgaWYgc2VsZi5yYXcgaXMgbm90IE5vbmUgYW5kIG5vdCBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5mbHVzaCgpICAgI2ZpeCBtZQogICAgICAgICAgICAgICAgIyBtYXkgcmFpc2UgQmxvY2tpbmdJT0Vycm9yIG9yIEJyb2tlblBpcGVFcnJvciBldGMKICAgICAgICAgICAgI2V4Y2VwdDogICAgI2ZpeG1lCQkKICAgICAgICAgICAgIyAgICBhPTEgICAgI2ZpeG1lCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBzZWxmLnJhdy5jbG9zZSgpCgogICAgZGVmIGRldGFjaChzZWxmKToKICAgICAgICBpZiBzZWxmLnJhdyBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJyYXcgc3RyZWFtIGFscmVhZHkgZGV0YWNoZWQiKQogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHJhdyA9IHNlbGYuX3JhdwogICAgICAgIHNlbGYuX3JhdyA9IE5vbmUKICAgICAgICByZXR1cm4gcmF3CgogICAgIyMjIElucXVpcmllcyAjIyMKCiAgICBkZWYgc2Vla2FibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmF3LnNlZWthYmxlKCkKCiAgICBkZWYgcmVhZGFibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmF3LnJlYWRhYmxlKCkKCiAgICBkZWYgd3JpdGFibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmF3LndyaXRhYmxlKCkKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgcmF3KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9yYXcKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgY2xvc2VkKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnJhdy5jbG9zZWQKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgbmFtZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5yYXcubmFtZQoKICAgICNAcHJvcGVydHkKICAgIGRlZiBtb2RlKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnJhdy5tb2RlCgogICAgZGVmIF9fZ2V0c3RhdGVfXyhzZWxmKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhbiBub3Qgc2VyaWFsaXplIGEgJ3swfScgb2JqZWN0IgogICAgICAgICAgICAgICAgICAgICAgICAuZm9ybWF0KHNlbGYuX19jbGFzc19fLl9fbmFtZV9fKSkKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgY2xzbmFtZSA9IHNlbGYuX19jbGFzc19fLl9fbmFtZV9fCiAgICAgICAgdHJ5OgogICAgICAgICAgICBuYW1lID0gc2VsZi5uYW1lCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICByZXR1cm4gIjxfcHlpby57MH0+Ii5mb3JtYXQoY2xzbmFtZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIjxfcHlpby57MH0gbmFtZT17MSFyfT4iLmZvcm1hdChjbHNuYW1lLCBuYW1lKQoKICAgICMjIyBMb3dlci1sZXZlbCBBUElzICMjIwoKICAgIGRlZiBmaWxlbm8oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmF3LmZpbGVubygpCgogICAgZGVmIGlzYXR0eShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5yYXcuaXNhdHR5KCkKCmNsYXNzIEJ5dGVzSU8oQnVmZmVyZWRJT0Jhc2UpOgoKICAgICMiQnVmZmVyZWQgSS9PIGltcGxlbWVudGF0aW9uIHVzaW5nIGFuIGluLW1lbW9yeSBieXRlcyBidWZmZXIuIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbml0aWFsX2J5dGVzPU5vbmUpOgogICAgICAgIGJ1ZiA9IGJ5dGVhcnJheSgpCiAgICAgICAgaWYgaW5pdGlhbF9ieXRlcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgYnVmICs9IGluaXRpYWxfYnl0ZXMKICAgICAgICBzZWxmLl9idWZmZXIgPSBidWYKICAgICAgICBzZWxmLl9wb3MgPSAwCgogICAgZGVmIF9fZ2V0c3RhdGVfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiX19nZXRzdGF0ZV9fIG9uIGNsb3NlZCBmaWxlIikKICAgICAgICByZXR1cm4gc2VsZi5fX2RpY3RfXy5jb3B5KCkKCiAgICBkZWYgZ2V0dmFsdWUoc2VsZik6CiAgICAgICAgIyJSZXR1cm4gdGhlIGJ5dGVzIHZhbHVlIChjb250ZW50cykgb2YgdGhlIGJ1ZmZlcgogICAgICAgICMiCiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImdldHZhbHVlIG9uIGNsb3NlZCBmaWxlIikKICAgICAgICByZXR1cm4gYnl0ZXMoc2VsZi5fYnVmZmVyKQoKICAgIGRlZiBnZXRidWZmZXIoc2VsZik6CiAgICAgICAgIyJSZXR1cm4gYSByZWFkYWJsZSBhbmQgd3JpdGFibGUgdmlldyBvZiB0aGUgYnVmZmVyLgogICAgICAgICMiCiAgICAgICAgcmV0dXJuIG1lbW9yeXZpZXcoc2VsZi5fYnVmZmVyKQoKICAgIGRlZiByZWFkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInJlYWQgZnJvbSBjbG9zZWQgZmlsZSIpCiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICBuID0gLTEKICAgICAgICBpZiBuIDwgMDoKICAgICAgICAgICAgbiA9IGxlbihzZWxmLl9idWZmZXIpCiAgICAgICAgaWYgbGVuKHNlbGYuX2J1ZmZlcikgPD0gc2VsZi5fcG9zOgogICAgICAgICAgICByZXR1cm4gIiIKICAgICAgICBuZXdwb3MgPSBtaW4obGVuKHNlbGYuX2J1ZmZlciksIHNlbGYuX3BvcyArIG4pCiAgICAgICAgYiA9IHNlbGYuX2J1ZmZlcltzZWxmLl9wb3MgOiBuZXdwb3NdCiAgICAgICAgc2VsZi5fcG9zID0gbmV3cG9zCiAgICAgICAgcmV0dXJuIGJ5dGVzKGIpCgogICAgZGVmIHJlYWQxKHNlbGYsIG4pOgogICAgICAgICMiVGhpcyBpcyB0aGUgc2FtZSBhcyByZWFkLgogICAgICAgICMiCiAgICAgICAgcmV0dXJuIHNlbGYucmVhZChuKQoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JpdGUgdG8gY2xvc2VkIGZpbGUiKQogICAgICAgIGlmIGlzaW5zdGFuY2UoYiwgc3RyKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYW4ndCB3cml0ZSBzdHIgdG8gYmluYXJ5IHN0cmVhbSIpCiAgICAgICAgbiA9IGxlbihiKQogICAgICAgIGlmIG4gPT0gMDoKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICBwb3MgPSBzZWxmLl9wb3MKICAgICAgICBpZiBwb3MgPiBsZW4oc2VsZi5fYnVmZmVyKToKICAgICAgICAgICAgIyBJbnNlcnRzIG51bGwgYnl0ZXMgYmV0d2VlbiB0aGUgY3VycmVudCBlbmQgb2YgdGhlIGZpbGUKICAgICAgICAgICAgIyBhbmQgdGhlIG5ldyB3cml0ZSBwb3NpdGlvbi4KICAgICAgICAgICAgI3BhZGRpbmcgPSBiJ1x4MDAnICogKHBvcyAtIGxlbihzZWxmLl9idWZmZXIpKSAgICNmaXhtZQogICAgICAgICAgICBwYWRkaW5nID0gJ1x4MDAnICogKHBvcyAtIGxlbihzZWxmLl9idWZmZXIpKQogICAgICAgICAgICBzZWxmLl9idWZmZXIgKz0gcGFkZGluZwogICAgICAgIHNlbGYuX2J1ZmZlcltwb3M6cG9zICsgbl0gPSBiCiAgICAgICAgc2VsZi5fcG9zICs9IG4KICAgICAgICByZXR1cm4gbgoKICAgIGRlZiBzZWVrKHNlbGYsIHBvcywgd2hlbmNlPTApOgogICAgICAgIGlmIHNlbGYuY2xvc2VkOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJzZWVrIG9uIGNsb3NlZCBmaWxlIikKICAgICAgICB0cnk6CiAgICAgICAgICAgIHBvcy5fX2luZGV4X18KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZXJyOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImFuIGludGVnZXIgaXMgcmVxdWlyZWQiKSAjZnJvbSBlcnIgZml4bWUKICAgICAgICBpZiB3aGVuY2UgPT0gMDoKICAgICAgICAgICAgaWYgcG9zIDwgMDoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5lZ2F0aXZlIHNlZWsgcG9zaXRpb24gJXIiICUgKHBvcywpKQogICAgICAgICAgICBzZWxmLl9wb3MgPSBwb3MKICAgICAgICBlbGlmIHdoZW5jZSA9PSAxOgogICAgICAgICAgICBzZWxmLl9wb3MgPSBtYXgoMCwgc2VsZi5fcG9zICsgcG9zKQogICAgICAgIGVsaWYgd2hlbmNlID09IDI6CiAgICAgICAgICAgIHNlbGYuX3BvcyA9IG1heCgwLCBsZW4oc2VsZi5fYnVmZmVyKSArIHBvcykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHdoZW5jZSB2YWx1ZSIpCiAgICAgICAgcmV0dXJuIHNlbGYuX3BvcwoKICAgIGRlZiB0ZWxsKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY2xvc2VkOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ0ZWxsIG9uIGNsb3NlZCBmaWxlIikKICAgICAgICByZXR1cm4gc2VsZi5fcG9zCgogICAgZGVmIHRydW5jYXRlKHNlbGYsIHBvcz1Ob25lKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidHJ1bmNhdGUgb24gY2xvc2VkIGZpbGUiKQogICAgICAgIGlmIHBvcyBpcyBOb25lOgogICAgICAgICAgICBwb3MgPSBzZWxmLl9wb3MKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBwb3MuX19pbmRleF9fCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlcnI6CiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImFuIGludGVnZXIgaXMgcmVxdWlyZWQiKSAjZnJvbSBlcnIgI2ZpeG1lCiAgICAgICAgICAgIGlmIHBvcyA8IDA6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJuZWdhdGl2ZSB0cnVuY2F0ZSBwb3NpdGlvbiAlciIgJSAocG9zLCkpCiAgICAgICAgZGVsIHNlbGYuX2J1ZmZlcltwb3M6XQogICAgICAgIHJldHVybiBwb3MKCiAgICBkZWYgcmVhZGFibGUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkkvTyBvcGVyYXRpb24gb24gY2xvc2VkIGZpbGUuIikKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiB3cml0YWJsZShzZWxmKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSS9PIG9wZXJhdGlvbiBvbiBjbG9zZWQgZmlsZS4iKQogICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIHNlZWthYmxlKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY2xvc2VkOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJL08gb3BlcmF0aW9uIG9uIGNsb3NlZCBmaWxlLiIpCiAgICAgICAgcmV0dXJuIFRydWUKCgpjbGFzcyBCdWZmZXJlZFJlYWRlcihfQnVmZmVyZWRJT01peGluKToKCiAgICAjIkJ1ZmZlcmVkUmVhZGVyKHJhd1ssIGJ1ZmZlcl9zaXplXSkKCiAgICAjQSBidWZmZXIgZm9yIGEgcmVhZGFibGUsIHNlcXVlbnRpYWwgQmFzZVJhd0lPIG9iamVjdC4KCiAgICAjVGhlIGNvbnN0cnVjdG9yIGNyZWF0ZXMgYSBCdWZmZXJlZFJlYWRlciBmb3IgdGhlIGdpdmVuIHJlYWRhYmxlIHJhdwogICAgI3N0cmVhbSBhbmQgYnVmZmVyX3NpemUuIElmIGJ1ZmZlcl9zaXplIGlzIG9taXR0ZWQsIERFRkFVTFRfQlVGRkVSX1NJWkUKICAgICNpcyB1c2VkLgogICAgIyIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcmF3LCBidWZmZXJfc2l6ZT1ERUZBVUxUX0JVRkZFUl9TSVpFKToKICAgICAgICAjIkNyZWF0ZSBhIG5ldyBidWZmZXJlZCByZWFkZXIgdXNpbmcgdGhlIGdpdmVuIHJlYWRhYmxlIHJhdyBJTyBvYmplY3QuCiAgICAgICAgIyIKICAgICAgICBpZiBub3QgcmF3LnJlYWRhYmxlKCk6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoJyJyYXciIGFyZ3VtZW50IG11c3QgYmUgcmVhZGFibGUuJykKCiAgICAgICAgX0J1ZmZlcmVkSU9NaXhpbi5fX2luaXRfXyhzZWxmLCByYXcpCiAgICAgICAgaWYgYnVmZmVyX3NpemUgPD0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCBidWZmZXIgc2l6ZSIpCiAgICAgICAgc2VsZi5idWZmZXJfc2l6ZSA9IGJ1ZmZlcl9zaXplCiAgICAgICAgc2VsZi5fcmVzZXRfcmVhZF9idWYoKQogICAgICAgIHNlbGYuX3JlYWRfbG9jayA9IExvY2soKQoKICAgIGRlZiBfcmVzZXRfcmVhZF9idWYoc2VsZik6CiAgICAgICAgI3NlbGYuX3JlYWRfYnVmID0gYiIiICAgI2ZpeG1lCiAgICAgICAgc2VsZi5fcmVhZF9idWYgPSAiIgogICAgICAgIHNlbGYuX3JlYWRfcG9zID0gMAoKICAgIGRlZiByZWFkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgIyJSZWFkIG4gYnl0ZXMuCgogICAgICAgICNSZXR1cm5zIGV4YWN0bHkgbiBieXRlcyBvZiBkYXRhIHVubGVzcyB0aGUgdW5kZXJseWluZyByYXcgSU8KICAgICAgICAjc3RyZWFtIHJlYWNoZXMgRU9GIG9yIGlmIHRoZSBjYWxsIHdvdWxkIGJsb2NrIGluIG5vbi1ibG9ja2luZwogICAgICAgICNtb2RlLiBJZiBuIGlzIG5lZ2F0aXZlLCByZWFkIHVudGlsIEVPRiBvciB1bnRpbCByZWFkKCkgd291bGQKICAgICAgICAjYmxvY2suCiAgICAgICAgIyIKICAgICAgICBpZiBuIGlzIG5vdCBOb25lIGFuZCBuIDwgLTE6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIHRvIHJlYWQiKQogICAgICAgICN3aXRoIHNlbGYuX3JlYWRfbG9jazogICAgIyBmaXhtZQogICAgICAgIHJldHVybiBzZWxmLl9yZWFkX3VubG9ja2VkKG4pCgogICAgZGVmIF9yZWFkX3VubG9ja2VkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgI25vZGF0YV92YWwgPSBiIiIgICAjZml4bWUKICAgICAgICBub2RhdGFfdmFsID0gIiIKICAgICAgICAjZW1wdHlfdmFsdWVzID0gKGIiIiwgTm9uZSkgICNmaXhtZQogICAgICAgIGVtcHR5X3ZhbHVlcyA9ICgiIiwgTm9uZSkKICAgICAgICBidWYgPSBzZWxmLl9yZWFkX2J1ZgogICAgICAgIHBvcyA9IHNlbGYuX3JlYWRfcG9zCgogICAgICAgICMgU3BlY2lhbCBjYXNlIGZvciB3aGVuIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gcmVhZCBpcyB1bnNwZWNpZmllZC4KICAgICAgICBpZiBuIGlzIE5vbmUgb3IgbiA9PSAtMToKICAgICAgICAgICAgc2VsZi5fcmVzZXRfcmVhZF9idWYoKQogICAgICAgICAgICBjaHVua3MgPSBbYnVmW3BvczpdXSAgIyBTdHJpcCB0aGUgY29uc3VtZWQgYnl0ZXMuCiAgICAgICAgICAgIGN1cnJlbnRfc2l6ZSA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgICMgUmVhZCB1bnRpbCBFT0Ygb3IgdW50aWwgcmVhZCgpIHdvdWxkIGJsb2NrLgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGNodW5rID0gc2VsZi5yYXcucmVhZCgpCiAgICAgICAgICAgICAgICBleGNlcHQgSU9FcnJvciBhcyBlOgogICAgICAgICAgICAgICAgICAgIGlmIGUuZXJybm8gIT0gRUlOVFI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGlmIGNodW5rIGluIGVtcHR5X3ZhbHVlczoKICAgICAgICAgICAgICAgICAgICBub2RhdGFfdmFsID0gY2h1bmsKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY3VycmVudF9zaXplICs9IGxlbihjaHVuaykKICAgICAgICAgICAgICAgIGNodW5rcy5hcHBlbmQoY2h1bmspCiAgICAgICAgICAgIHJldHVybiAiIi5qb2luKGNodW5rcykgb3Igbm9kYXRhX3ZhbAoKICAgICAgICAjIFRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gcmVhZCBpcyBzcGVjaWZpZWQsIHJldHVybiBhdCBtb3N0IG4gYnl0ZXMuCiAgICAgICAgYXZhaWwgPSBsZW4oYnVmKSAtIHBvcyAgIyBMZW5ndGggb2YgdGhlIGF2YWlsYWJsZSBidWZmZXJlZCBkYXRhLgogICAgICAgIGlmIG4gPD0gYXZhaWw6CiAgICAgICAgICAgICMgRmFzdCBwYXRoOiB0aGUgZGF0YSB0byByZWFkIGlzIGZ1bGx5IGJ1ZmZlcmVkLgogICAgICAgICAgICBzZWxmLl9yZWFkX3BvcyArPSBuCiAgICAgICAgICAgIHJldHVybiBidWZbcG9zOnBvcytuXQogICAgICAgICMgU2xvdyBwYXRoOiByZWFkIGZyb20gdGhlIHN0cmVhbSB1bnRpbCBlbm91Z2ggYnl0ZXMgYXJlIHJlYWQsCiAgICAgICAgIyBvciB1bnRpbCBhbiBFT0Ygb2NjdXJzIG9yIHVudGlsIHJlYWQoKSB3b3VsZCBibG9jay4KICAgICAgICBjaHVua3MgPSBbYnVmW3BvczpdXQogICAgICAgIHdhbnRlZCA9IG1heChzZWxmLmJ1ZmZlcl9zaXplLCBuKQogICAgICAgIHdoaWxlIGF2YWlsIDwgbjoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgY2h1bmsgPSBzZWxmLnJhdy5yZWFkKHdhbnRlZCkKICAgICAgICAgICAgZXhjZXB0IElPRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgIGlmIGUuZXJybm8gIT0gRUlOVFI6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGNodW5rIGluIGVtcHR5X3ZhbHVlczoKICAgICAgICAgICAgICAgIG5vZGF0YV92YWwgPSBjaHVuawogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgYXZhaWwgKz0gbGVuKGNodW5rKQogICAgICAgICAgICBjaHVua3MuYXBwZW5kKGNodW5rKQogICAgICAgICMgbiBpcyBtb3JlIHRoZW4gYXZhaWwgb25seSB3aGVuIGFuIEVPRiBvY2N1cnJlZCBvciB3aGVuCiAgICAgICAgIyByZWFkKCkgd291bGQgaGF2ZSBibG9ja2VkLgogICAgICAgIG4gPSBtaW4obiwgYXZhaWwpCiAgICAgICAgI291dCA9IGIiIi5qb2luKGNodW5rcykgICAjZml4bWUKICAgICAgICBvdXQgPSAiIi5qb2luKGNodW5rcykKICAgICAgICBzZWxmLl9yZWFkX2J1ZiA9IG91dFtuOl0gICMgU2F2ZSB0aGUgZXh0cmEgZGF0YSBpbiB0aGUgYnVmZmVyLgogICAgICAgIHNlbGYuX3JlYWRfcG9zID0gMAogICAgICAgIHJldHVybiBvdXRbOm5dIGlmIG91dCBlbHNlIG5vZGF0YV92YWwKCiAgICBkZWYgcGVlayhzZWxmLCBuPTApOgogICAgICAgICMiUmV0dXJucyBidWZmZXJlZCBieXRlcyB3aXRob3V0IGFkdmFuY2luZyB0aGUgcG9zaXRpb24uCgogICAgICAgICNUaGUgYXJndW1lbnQgaW5kaWNhdGVzIGEgZGVzaXJlZCBtaW5pbWFsIG51bWJlciBvZiBieXRlczsgd2UKICAgICAgICAjZG8gYXQgbW9zdCBvbmUgcmF3IHJlYWQgdG8gc2F0aXNmeSBpdC4gIFdlIG5ldmVyIHJldHVybiBtb3JlCiAgICAgICAgI3RoYW4gc2VsZi5idWZmZXJfc2l6ZS4KICAgICAgICAjIgogICAgICAgICN3aXRoIHNlbGYuX3JlYWRfbG9jazogICAgICNmaXhtZQogICAgICAgIHJldHVybiBzZWxmLl9wZWVrX3VubG9ja2VkKG4pCgogICAgZGVmIF9wZWVrX3VubG9ja2VkKHNlbGYsIG49MCk6CiAgICAgICAgd2FudCA9IG1pbihuLCBzZWxmLmJ1ZmZlcl9zaXplKQogICAgICAgIGhhdmUgPSBsZW4oc2VsZi5fcmVhZF9idWYpIC0gc2VsZi5fcmVhZF9wb3MKICAgICAgICBpZiBoYXZlIDwgd2FudCBvciBoYXZlIDw9IDA6CiAgICAgICAgICAgIHRvX3JlYWQgPSBzZWxmLmJ1ZmZlcl9zaXplIC0gaGF2ZQogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBzZWxmLnJhdy5yZWFkKHRvX3JlYWQpCiAgICAgICAgICAgICAgICBleGNlcHQgSU9FcnJvciBhcyBlOgogICAgICAgICAgICAgICAgICAgIGlmIGUuZXJybm8gIT0gRUlOVFI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGlmIGN1cnJlbnQ6CiAgICAgICAgICAgICAgICBzZWxmLl9yZWFkX2J1ZiA9IHNlbGYuX3JlYWRfYnVmW3NlbGYuX3JlYWRfcG9zOl0gKyBjdXJyZW50CiAgICAgICAgICAgICAgICBzZWxmLl9yZWFkX3BvcyA9IDAKICAgICAgICByZXR1cm4gc2VsZi5fcmVhZF9idWZbc2VsZi5fcmVhZF9wb3M6XQoKICAgIGRlZiByZWFkMShzZWxmLCBuKToKICAgICAgICAjIlJlYWRzIHVwIHRvIG4gYnl0ZXMsIHdpdGggYXQgbW9zdCBvbmUgcmVhZCgpIHN5c3RlbSBjYWxsLiIKICAgICAgICAjIFJldHVybnMgdXAgdG8gbiBieXRlcy4gIElmIGF0IGxlYXN0IG9uZSBieXRlIGlzIGJ1ZmZlcmVkLCB3ZQogICAgICAgICMgb25seSByZXR1cm4gYnVmZmVyZWQgYnl0ZXMuICBPdGhlcndpc2UsIHdlIGRvIG9uZSByYXcgcmVhZC4KICAgICAgICBpZiBuIDwgMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibnVtYmVyIG9mIGJ5dGVzIHRvIHJlYWQgbXVzdCBiZSBwb3NpdGl2ZSIpCiAgICAgICAgaWYgbiA9PSAwOgogICAgICAgICAgICAjcmV0dXJuIGIiIgogICAgICAgICAgICByZXR1cm4gIiIKICAgICAgICAjd2l0aCBzZWxmLl9yZWFkX2xvY2s6ICAgI2ZpeG1lCiAgICAgICAgc2VsZi5fcGVla191bmxvY2tlZCgxKQogICAgICAgIHJldHVybiBzZWxmLl9yZWFkX3VubG9ja2VkKAogICAgICAgICAgICAgICAgbWluKG4sIGxlbihzZWxmLl9yZWFkX2J1ZikgLSBzZWxmLl9yZWFkX3BvcykpCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgcmV0dXJuIF9CdWZmZXJlZElPTWl4aW4udGVsbChzZWxmKSAtIGxlbihzZWxmLl9yZWFkX2J1ZikgKyBzZWxmLl9yZWFkX3BvcwoKICAgIGRlZiBzZWVrKHNlbGYsIHBvcywgd2hlbmNlPTApOgogICAgICAgIGlmIG5vdCAoMCA8PSB3aGVuY2UgPD0gMik6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImludmFsaWQgd2hlbmNlIHZhbHVlIikKICAgICAgICAjd2l0aCBzZWxmLl9yZWFkX2xvY2s6ICAgI2ZpeG1lCiAgICAgICAgaWYgMToKICAgICAgICAgICAgaWYgd2hlbmNlID09IDE6CiAgICAgICAgICAgICAgICBwb3MgLT0gbGVuKHNlbGYuX3JlYWRfYnVmKSAtIHNlbGYuX3JlYWRfcG9zCiAgICAgICAgICAgIHBvcyA9IF9CdWZmZXJlZElPTWl4aW4uc2VlayhzZWxmLCBwb3MsIHdoZW5jZSkKICAgICAgICAgICAgc2VsZi5fcmVzZXRfcmVhZF9idWYoKQogICAgICAgICAgICByZXR1cm4gcG9zCgpjbGFzcyBCdWZmZXJlZFdyaXRlcihfQnVmZmVyZWRJT01peGluKToKCiAgICAjIkEgYnVmZmVyIGZvciBhIHdyaXRlYWJsZSBzZXF1ZW50aWFsIFJhd0lPIG9iamVjdC4KCiAgICAjVGhlIGNvbnN0cnVjdG9yIGNyZWF0ZXMgYSBCdWZmZXJlZFdyaXRlciBmb3IgdGhlIGdpdmVuIHdyaXRlYWJsZSByYXcKICAgICNzdHJlYW0uIElmIHRoZSBidWZmZXJfc2l6ZSBpcyBub3QgZ2l2ZW4sIGl0IGRlZmF1bHRzIHRvCiAgICAjREVGQVVMVF9CVUZGRVJfU0laRS4KICAgICMiCgogICAgX3dhcm5pbmdfc3RhY2tfb2Zmc2V0ID0gMgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCByYXcsCiAgICAgICAgICAgICAgICAgYnVmZmVyX3NpemU9REVGQVVMVF9CVUZGRVJfU0laRSwgbWF4X2J1ZmZlcl9zaXplPU5vbmUpOgogICAgICAgIGlmIG5vdCByYXcud3JpdGFibGUoKToKICAgICAgICAgICAgcmFpc2UgSU9FcnJvcignInJhdyIgYXJndW1lbnQgbXVzdCBiZSB3cml0YWJsZS4nKQoKICAgICAgICBfQnVmZmVyZWRJT01peGluLl9faW5pdF9fKHNlbGYsIHJhdykKICAgICAgICBpZiBidWZmZXJfc2l6ZSA8PSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIGJ1ZmZlciBzaXplIikKICAgICAgICBpZiBtYXhfYnVmZmVyX3NpemUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oIm1heF9idWZmZXJfc2l6ZSBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3dhcm5pbmdfc3RhY2tfb2Zmc2V0KQogICAgICAgIHNlbGYuYnVmZmVyX3NpemUgPSBidWZmZXJfc2l6ZQogICAgICAgIHNlbGYuX3dyaXRlX2J1ZiA9IGJ5dGVhcnJheSgpCiAgICAgICAgc2VsZi5fd3JpdGVfbG9jayA9IExvY2soKQoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JpdGUgdG8gY2xvc2VkIGZpbGUiKQogICAgICAgIGlmIGlzaW5zdGFuY2UoYiwgc3RyKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYW4ndCB3cml0ZSBzdHIgdG8gYmluYXJ5IHN0cmVhbSIpCiAgICAgICAgI3dpdGggc2VsZi5fd3JpdGVfbG9jazogICAjZml4bWUKICAgICAgICBpZiAxOgogICAgICAgICAgICAjIFhYWCB3ZSBjYW4gaW1wbGVtZW50IHNvbWUgbW9yZSB0cmlja3MgdG8gdHJ5IGFuZCBhdm9pZAogICAgICAgICAgICAjIHBhcnRpYWwgd3JpdGVzCiAgICAgICAgICAgIGlmIGxlbihzZWxmLl93cml0ZV9idWYpID4gc2VsZi5idWZmZXJfc2l6ZToKICAgICAgICAgICAgICAgICMgV2UncmUgZnVsbCwgc28gbGV0J3MgcHJlLWZsdXNoIHRoZSBidWZmZXIuICAoVGhpcyBtYXkKICAgICAgICAgICAgICAgICMgcmFpc2UgQmxvY2tpbmdJT0Vycm9yIHdpdGggY2hhcmFjdGVyc193cml0dGVuID09IDAuKQogICAgICAgICAgICAgICAgc2VsZi5fZmx1c2hfdW5sb2NrZWQoKQogICAgICAgICAgICBiZWZvcmUgPSBsZW4oc2VsZi5fd3JpdGVfYnVmKQogICAgICAgICAgICBzZWxmLl93cml0ZV9idWYuZXh0ZW5kKGIpCiAgICAgICAgICAgIHdyaXR0ZW4gPSBsZW4oc2VsZi5fd3JpdGVfYnVmKSAtIGJlZm9yZQogICAgICAgICAgICBpZiBsZW4oc2VsZi5fd3JpdGVfYnVmKSA+IHNlbGYuYnVmZmVyX3NpemU6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZmx1c2hfdW5sb2NrZWQoKQogICAgICAgICAgICAgICAgZXhjZXB0IEJsb2NraW5nSU9FcnJvciBhcyBlOgogICAgICAgICAgICAgICAgICAgIGlmIGxlbihzZWxmLl93cml0ZV9idWYpID4gc2VsZi5idWZmZXJfc2l6ZToKICAgICAgICAgICAgICAgICAgICAgICAgIyBXZSd2ZSBoaXQgdGhlIGJ1ZmZlcl9zaXplLiBXZSBoYXZlIHRvIGFjY2VwdCBhIHBhcnRpYWwKICAgICAgICAgICAgICAgICAgICAgICAgIyB3cml0ZSBhbmQgY3V0IGJhY2sgb3VyIGJ1ZmZlci4KICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmFnZSA9IGxlbihzZWxmLl93cml0ZV9idWYpIC0gc2VsZi5idWZmZXJfc2l6ZQogICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuIC09IG92ZXJhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fd3JpdGVfYnVmID0gc2VsZi5fd3JpdGVfYnVmWzpzZWxmLmJ1ZmZlcl9zaXplXQogICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBCbG9ja2luZ0lPRXJyb3IoZS5lcnJubywgZS5zdHJlcnJvciwgd3JpdHRlbikKICAgICAgICAgICAgcmV0dXJuIHdyaXR0ZW4KCiAgICBkZWYgdHJ1bmNhdGUoc2VsZiwgcG9zPU5vbmUpOgogICAgICAgICN3aXRoIHNlbGYuX3dyaXRlX2xvY2s6ICAgICNmaXhtZQogICAgICAgIGlmIDE6CiAgICAgICAgICAgIHNlbGYuX2ZsdXNoX3VubG9ja2VkKCkKICAgICAgICAgICAgaWYgcG9zIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBwb3MgPSBzZWxmLnJhdy50ZWxsKCkKICAgICAgICAgICAgcmV0dXJuIHNlbGYucmF3LnRydW5jYXRlKHBvcykKCiAgICBkZWYgZmx1c2goc2VsZik6CiAgICAgICAgI3dpdGggc2VsZi5fd3JpdGVfbG9jazogICNmaXhtZQogICAgICAgIHNlbGYuX2ZsdXNoX3VubG9ja2VkKCkKCiAgICBkZWYgX2ZsdXNoX3VubG9ja2VkKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY2xvc2VkOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJmbHVzaCBvZiBjbG9zZWQgZmlsZSIpCiAgICAgICAgd2hpbGUgc2VsZi5fd3JpdGVfYnVmOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBuID0gc2VsZi5yYXcud3JpdGUoc2VsZi5fd3JpdGVfYnVmKQogICAgICAgICAgICBleGNlcHQgQmxvY2tpbmdJT0Vycm9yOgogICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJzZWxmLnJhdyBzaG91bGQgaW1wbGVtZW50IFJhd0lPQmFzZTogaXQgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG91bGQgbm90IHJhaXNlIEJsb2NraW5nSU9FcnJvciIpCiAgICAgICAgICAgIGV4Y2VwdCBJT0Vycm9yIGFzIGU6CiAgICAgICAgICAgICAgICBpZiBlLmVycm5vICE9IEVJTlRSOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBuIGlzIE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBCbG9ja2luZ0lPRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgZXJybm8uRUFHQUlOLAogICAgICAgICAgICAgICAgICAgICJ3cml0ZSBjb3VsZCBub3QgY29tcGxldGUgd2l0aG91dCBibG9ja2luZyIsIDApCiAgICAgICAgICAgIGlmIG4gPiBsZW4oc2VsZi5fd3JpdGVfYnVmKSBvciBuIDwgMDoKICAgICAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoIndyaXRlKCkgcmV0dXJuZWQgaW5jb3JyZWN0IG51bWJlciBvZiBieXRlcyIpCiAgICAgICAgICAgIGRlbCBzZWxmLl93cml0ZV9idWZbOm5dCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgcmV0dXJuIF9CdWZmZXJlZElPTWl4aW4udGVsbChzZWxmKSArIGxlbihzZWxmLl93cml0ZV9idWYpCgogICAgZGVmIHNlZWsoc2VsZiwgcG9zLCB3aGVuY2U9MCk6CiAgICAgICAgaWYgbm90ICgwIDw9IHdoZW5jZSA8PSAyKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCB3aGVuY2UiKQogICAgICAgICN3aXRoIHNlbGYuX3dyaXRlX2xvY2s6ICAgI2ZpeG1lCiAgICAgICAgaWYgMToKICAgICAgICAgICAgc2VsZi5fZmx1c2hfdW5sb2NrZWQoKQogICAgICAgICAgICByZXR1cm4gX0J1ZmZlcmVkSU9NaXhpbi5zZWVrKHNlbGYsIHBvcywgd2hlbmNlKQoKCmNsYXNzIEJ1ZmZlcmVkUldQYWlyKEJ1ZmZlcmVkSU9CYXNlKToKCiAgICAjIkEgYnVmZmVyZWQgcmVhZGVyIGFuZCB3cml0ZXIgb2JqZWN0IHRvZ2V0aGVyLgoKICAgICNBIGJ1ZmZlcmVkIHJlYWRlciBvYmplY3QgYW5kIGJ1ZmZlcmVkIHdyaXRlciBvYmplY3QgcHV0IHRvZ2V0aGVyIHRvCiAgICAjZm9ybSBhIHNlcXVlbnRpYWwgSU8gb2JqZWN0IHRoYXQgY2FuIHJlYWQgYW5kIHdyaXRlLiBUaGlzIGlzIHR5cGljYWxseQogICAgI3VzZWQgd2l0aCBhIHNvY2tldCBvciB0d28td2F5IHBpcGUuCgogICAgI3JlYWRlciBhbmQgd3JpdGVyIGFyZSBSYXdJT0Jhc2Ugb2JqZWN0cyB0aGF0IGFyZSByZWFkYWJsZSBhbmQKICAgICN3cml0ZWFibGUgcmVzcGVjdGl2ZWx5LiBJZiB0aGUgYnVmZmVyX3NpemUgaXMgb21pdHRlZCBpdCBkZWZhdWx0cyB0bwogICAgI0RFRkFVTFRfQlVGRkVSX1NJWkUuCiAgICAjIgoKICAgICMgWFhYIFRoZSB1c2VmdWxuZXNzIG9mIHRoaXMgKGNvbXBhcmVkIHRvIGhhdmluZyB0d28gc2VwYXJhdGUgSU8KICAgICMgb2JqZWN0cykgaXMgcXVlc3Rpb25hYmxlLgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCByZWFkZXIsIHdyaXRlciwKICAgICAgICAgICAgICAgICBidWZmZXJfc2l6ZT1ERUZBVUxUX0JVRkZFUl9TSVpFLCBtYXhfYnVmZmVyX3NpemU9Tm9uZSk6CiAgICAgICAgIyJDb25zdHJ1Y3Rvci4KCiAgICAgICAgI1RoZSBhcmd1bWVudHMgYXJlIHR3byBSYXdJTyBpbnN0YW5jZXMuCiAgICAgICAgIyIKICAgICAgICBpZiBtYXhfYnVmZmVyX3NpemUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oIm1heF9idWZmZXJfc2l6ZSBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nLCAyKQoKICAgICAgICBpZiBub3QgcmVhZGVyLnJlYWRhYmxlKCk6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoJyJyZWFkZXIiIGFyZ3VtZW50IG11c3QgYmUgcmVhZGFibGUuJykKCiAgICAgICAgaWYgbm90IHdyaXRlci53cml0YWJsZSgpOgogICAgICAgICAgICByYWlzZSBJT0Vycm9yKCcid3JpdGVyIiBhcmd1bWVudCBtdXN0IGJlIHdyaXRhYmxlLicpCgogICAgICAgIHNlbGYucmVhZGVyID0gQnVmZmVyZWRSZWFkZXIocmVhZGVyLCBidWZmZXJfc2l6ZSkKICAgICAgICBzZWxmLndyaXRlciA9IEJ1ZmZlcmVkV3JpdGVyKHdyaXRlciwgYnVmZmVyX3NpemUpCgogICAgZGVmIHJlYWQoc2VsZiwgbj1Ob25lKToKICAgICAgICBpZiBuIGlzIE5vbmU6CiAgICAgICAgICAgIG4gPSAtMQogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5yZWFkKG4pCgogICAgZGVmIHJlYWRpbnRvKHNlbGYsIGIpOgogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5yZWFkaW50byhiKQoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIud3JpdGUoYikKCiAgICBkZWYgcGVlayhzZWxmLCBuPTApOgogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5wZWVrKG4pCgogICAgZGVmIHJlYWQxKHNlbGYsIG4pOgogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5yZWFkMShuKQoKICAgIGRlZiByZWFkYWJsZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5yZWFkZXIucmVhZGFibGUoKQoKICAgIGRlZiB3cml0YWJsZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIud3JpdGFibGUoKQoKICAgIGRlZiBmbHVzaChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIuZmx1c2goKQoKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICBzZWxmLndyaXRlci5jbG9zZSgpCiAgICAgICAgc2VsZi5yZWFkZXIuY2xvc2UoKQoKICAgIGRlZiBpc2F0dHkoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmVhZGVyLmlzYXR0eSgpIG9yIHNlbGYud3JpdGVyLmlzYXR0eSgpCgogICAgI0Bwcm9wZXJ0eQogICAgZGVmIGNsb3NlZChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIuY2xvc2VkCgoKY2xhc3MgQnVmZmVyZWRSYW5kb20oQnVmZmVyZWRXcml0ZXIsIEJ1ZmZlcmVkUmVhZGVyKToKCiAgICAjIkEgYnVmZmVyZWQgaW50ZXJmYWNlIHRvIHJhbmRvbSBhY2Nlc3Mgc3RyZWFtcy4KCiAgICAjVGhlIGNvbnN0cnVjdG9yIGNyZWF0ZXMgYSByZWFkZXIgYW5kIHdyaXRlciBmb3IgYSBzZWVrYWJsZSBzdHJlYW0sCiAgICAjcmF3LCBnaXZlbiBpbiB0aGUgZmlyc3QgYXJndW1lbnQuIElmIHRoZSBidWZmZXJfc2l6ZSBpcyBvbWl0dGVkIGl0CiAgICAjZGVmYXVsdHMgdG8gREVGQVVMVF9CVUZGRVJfU0laRS4KICAgICMiCgogICAgX3dhcm5pbmdfc3RhY2tfb2Zmc2V0ID0gMwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCByYXcsCiAgICAgICAgICAgICAgICAgYnVmZmVyX3NpemU9REVGQVVMVF9CVUZGRVJfU0laRSwgbWF4X2J1ZmZlcl9zaXplPU5vbmUpOgogICAgICAgIHJhdy5fY2hlY2tTZWVrYWJsZSgpCiAgICAgICAgQnVmZmVyZWRSZWFkZXIuX19pbml0X18oc2VsZiwgcmF3LCBidWZmZXJfc2l6ZSkKICAgICAgICBCdWZmZXJlZFdyaXRlci5fX2luaXRfXyhzZWxmLCByYXcsIGJ1ZmZlcl9zaXplLCBtYXhfYnVmZmVyX3NpemUpCgogICAgZGVmIHNlZWsoc2VsZiwgcG9zLCB3aGVuY2U9MCk6CiAgICAgICAgaWYgbm90ICgwIDw9IHdoZW5jZSA8PSAyKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCB3aGVuY2UiKQogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIGlmIHNlbGYuX3JlYWRfYnVmOgogICAgICAgICAgICAjIFVuZG8gcmVhZCBhaGVhZC4KICAgICAgICAgICAgI3dpdGggc2VsZi5fcmVhZF9sb2NrOiAgICNmaXhtZQogICAgICAgICAgICBzZWxmLnJhdy5zZWVrKHNlbGYuX3JlYWRfcG9zIC0gbGVuKHNlbGYuX3JlYWRfYnVmKSwgMSkKICAgICAgICAjIEZpcnN0IGRvIHRoZSByYXcgc2VlaywgdGhlbiBlbXB0eSB0aGUgcmVhZCBidWZmZXIsIHNvIHRoYXQKICAgICAgICAjIGlmIHRoZSByYXcgc2VlayBmYWlscywgd2UgZG9uJ3QgbG9zZSBidWZmZXJlZCBkYXRhIGZvcmV2ZXIuCiAgICAgICAgcG9zID0gc2VsZi5yYXcuc2Vlayhwb3MsIHdoZW5jZSkKICAgICAgICAjd2l0aCBzZWxmLl9yZWFkX2xvY2s6ICAgI2ZpeG1lCiAgICAgICAgc2VsZi5fcmVzZXRfcmVhZF9idWYoKQogICAgICAgIGlmIHBvcyA8IDA6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoInNlZWsoKSByZXR1cm5lZCBpbnZhbGlkIHBvc2l0aW9uIikKICAgICAgICByZXR1cm4gcG9zCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fd3JpdGVfYnVmOgogICAgICAgICAgICByZXR1cm4gQnVmZmVyZWRXcml0ZXIudGVsbChzZWxmKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBCdWZmZXJlZFJlYWRlci50ZWxsKHNlbGYpCgogICAgZGVmIHRydW5jYXRlKHNlbGYsIHBvcz1Ob25lKToKICAgICAgICBpZiBwb3MgaXMgTm9uZToKICAgICAgICAgICAgcG9zID0gc2VsZi50ZWxsKCkKICAgICAgICAjIFVzZSBzZWVrIHRvIGZsdXNoIHRoZSByZWFkIGJ1ZmZlci4KICAgICAgICByZXR1cm4gQnVmZmVyZWRXcml0ZXIudHJ1bmNhdGUoc2VsZiwgcG9zKQoKICAgIGRlZiByZWFkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICBuID0gLTEKICAgICAgICBzZWxmLmZsdXNoKCkKICAgICAgICByZXR1cm4gQnVmZmVyZWRSZWFkZXIucmVhZChzZWxmLCBuKQoKICAgIGRlZiByZWFkaW50byhzZWxmLCBiKToKICAgICAgICBzZWxmLmZsdXNoKCkKICAgICAgICByZXR1cm4gQnVmZmVyZWRSZWFkZXIucmVhZGludG8oc2VsZiwgYikKCiAgICBkZWYgcGVlayhzZWxmLCBuPTApOgogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHJldHVybiBCdWZmZXJlZFJlYWRlci5wZWVrKHNlbGYsIG4pCgogICAgZGVmIHJlYWQxKHNlbGYsIG4pOgogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHJldHVybiBCdWZmZXJlZFJlYWRlci5yZWFkMShzZWxmLCBuKQoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICBpZiBzZWxmLl9yZWFkX2J1ZjoKICAgICAgICAgICAgIyBVbmRvIHJlYWRhaGVhZAogICAgICAgICAgICAjd2l0aCBzZWxmLl9yZWFkX2xvY2s6ICAjZml4bWUKICAgICAgICAgICAgc2VsZi5yYXcuc2VlayhzZWxmLl9yZWFkX3BvcyAtIGxlbihzZWxmLl9yZWFkX2J1ZiksIDEpCiAgICAgICAgICAgIHNlbGYuX3Jlc2V0X3JlYWRfYnVmKCkKICAgICAgICByZXR1cm4gQnVmZmVyZWRXcml0ZXIud3JpdGUoc2VsZiwgYikKCgpjbGFzcyBUZXh0SU9CYXNlKElPQmFzZSk6CgogICAgIyJCYXNlIGNsYXNzIGZvciB0ZXh0IEkvTy4KCiAgICAjVGhpcyBjbGFzcyBwcm92aWRlcyBhIGNoYXJhY3RlciBhbmQgbGluZSBiYXNlZCBpbnRlcmZhY2UgdG8gc3RyZWFtCiAgICAjSS9PLiBUaGVyZSBpcyBubyByZWFkaW50byBtZXRob2QgYmVjYXVzZSBQeXRob24ncyBjaGFyYWN0ZXIgc3RyaW5ncwogICAgI2FyZSBpbW11dGFibGUuIFRoZXJlIGlzIG5vIHB1YmxpYyBjb25zdHJ1Y3Rvci4KICAgICMiCgogICAgZGVmIHJlYWQoc2VsZiwgbj0tMSk6CiAgICAgICAgIyJSZWFkIGF0IG1vc3QgbiBjaGFyYWN0ZXJzIGZyb20gc3RyZWFtLCB3aGVyZSBuIGlzIGFuIGludC4KCiAgICAgICAgI1JlYWQgZnJvbSB1bmRlcmx5aW5nIGJ1ZmZlciB1bnRpbCB3ZSBoYXZlIG4gY2hhcmFjdGVycyBvciB3ZSBoaXQgRU9GLgogICAgICAgICNJZiBuIGlzIG5lZ2F0aXZlIG9yIG9taXR0ZWQsIHJlYWQgdW50aWwgRU9GLgoKICAgICAgICAjUmV0dXJucyBhIHN0cmluZy4KICAgICAgICAjIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJyZWFkIikKCiAgICBkZWYgd3JpdGUoc2VsZiwgcyk6CiAgICAgICAgIyJXcml0ZSBzdHJpbmcgcyB0byBzdHJlYW0gYW5kIHJldHVybmluZyBhbiBpbnQuIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJ3cml0ZSIpCgogICAgZGVmIHRydW5jYXRlKHNlbGYsIHBvcz1Ob25lKToKICAgICAgICAjIlRydW5jYXRlIHNpemUgdG8gcG9zLCB3aGVyZSBwb3MgaXMgYW4gaW50LiIKICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgidHJ1bmNhdGUiKQoKICAgIGRlZiByZWFkbGluZShzZWxmKToKICAgICAgICAjIlJlYWQgdW50aWwgbmV3bGluZSBvciBFT0YuCgogICAgICAgICNSZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBpZiBFT0YgaXMgaGl0IGltbWVkaWF0ZWx5LgogICAgICAgICMiCiAgICAgICAgc2VsZi5fdW5zdXBwb3J0ZWQoInJlYWRsaW5lIikKCiAgICBkZWYgZGV0YWNoKHNlbGYpOgogICAgICAgICMiCiAgICAgICAgI1NlcGFyYXRlIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlciBmcm9tIHRoZSBUZXh0SU9CYXNlIGFuZCByZXR1cm4gaXQuCgogICAgICAgICNBZnRlciB0aGUgdW5kZXJseWluZyBidWZmZXIgaGFzIGJlZW4gZGV0YWNoZWQsIHRoZSBUZXh0SU8gaXMgaW4gYW4KICAgICAgICAjdW51c2FibGUgc3RhdGUuCiAgICAgICAgIyIKICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgiZGV0YWNoIikKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgZW5jb2Rpbmcoc2VsZik6CiAgICAgICAgIyJTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZS4iCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgbmV3bGluZXMoc2VsZik6CiAgICAgICAgIyJMaW5lIGVuZGluZ3MgdHJhbnNsYXRlZCBzbyBmYXIuCgogICAgICAgICNPbmx5IGxpbmUgZW5kaW5ncyB0cmFuc2xhdGVkIGR1cmluZyByZWFkaW5nIGFyZSBjb25zaWRlcmVkLgoKICAgICAgICAjU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUuCiAgICAgICAgIyIKICAgICAgICByZXR1cm4gTm9uZQoKICAgICNAcHJvcGVydHkKICAgIGRlZiBlcnJvcnMoc2VsZik6CiAgICAgICAgIyIiRXJyb3Igc2V0dGluZyBvZiB0aGUgZGVjb2RlciBvciBlbmNvZGVyLgoKICAgICAgICAjU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUuIgogICAgICAgIHJldHVybiBOb25lCgojQkUgY29tbWVudGluZyB0aHNpIG91dAojaW8uVGV4dElPQmFzZS5yZWdpc3RlcihUZXh0SU9CYXNlKQoKCmNsYXNzIEluY3JlbWVudGFsTmV3bGluZURlY29kZXIoY29kZWNzLkluY3JlbWVudGFsRGVjb2Rlcik6CgogICAgIyAiQ29kZWMgdXNlZCB3aGVuIHJlYWRpbmcgYSBmaWxlIGluIHVuaXZlcnNhbCBuZXdsaW5lcyBtb2RlLiAgSXQgd3JhcHMKICAgICMgYW5vdGhlciBpbmNyZW1lbnRhbCBkZWNvZGVyLCB0cmFuc2xhdGluZyBcclxuIGFuZCBcciBpbnRvIFxuLiAgSXQgYWxzbwogICAgI3JlY29yZHMgdGhlIHR5cGVzIG9mIG5ld2xpbmVzIGVuY291bnRlcmVkLiAgV2hlbiB1c2VkIHdpdGgKICAgICN0cmFuc2xhdGU9RmFsc2UsIGl0IGVuc3VyZXMgdGhhdCB0aGUgbmV3bGluZSBzZXF1ZW5jZSBpcyByZXR1cm5lZCBpbgogICAgI29uZSBwaWVjZS4KICAgICMgIgogICAgCiAgICBkZWYgX19pbml0X18oc2VsZiwgZGVjb2RlciwgdHJhbnNsYXRlLCBlcnJvcnM9J3N0cmljdCcpOgogICAgICAgIGNvZGVjcy5JbmNyZW1lbnRhbERlY29kZXIuX19pbml0X18oc2VsZiwgZXJyb3JzPWVycm9ycykKICAgICAgICBzZWxmLnRyYW5zbGF0ZSA9IHRyYW5zbGF0ZQogICAgICAgIHNlbGYuZGVjb2RlciA9IGRlY29kZXIKICAgICAgICBzZWxmLnNlZW5ubCA9IDAKICAgICAgICBzZWxmLnBlbmRpbmdjciA9IEZhbHNlCiAgICBkZWYgZGVjb2RlKHNlbGYsIGlucHV0LCBmaW5hbD1GYWxzZSk6CiAgICAgICAgIyBkZWNvZGUgaW5wdXQgKHdpdGggdGhlIGV2ZW50dWFsIFxyIGZyb20gYSBwcmV2aW91cyBwYXNzKQogICAgICAgIGlmIHNlbGYuZGVjb2RlciBpcyBOb25lOgogICAgICAgICAgICBvdXRwdXQgPSBpbnB1dAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG91dHB1dCA9IHNlbGYuZGVjb2Rlci5kZWNvZGUoaW5wdXQsIGZpbmFsPWZpbmFsKQogICAgICAgIGlmIHNlbGYucGVuZGluZ2NyIGFuZCAob3V0cHV0IG9yIGZpbmFsKToKICAgICAgICAgICAgb3V0cHV0ID0gIlxyIiArIG91dHB1dAogICAgICAgICAgICBzZWxmLnBlbmRpbmdjciA9IEZhbHNlCgogICAgICAgICMgcmV0YWluIGxhc3QgXHIgZXZlbiB3aGVuIG5vdCB0cmFuc2xhdGluZyBkYXRhOgogICAgICAgICMgdGhlbiByZWFkbGluZSgpIGlzIHN1cmUgdG8gZ2V0IFxyXG4gaW4gb25lIHBhc3MKICAgICAgICBpZiBvdXRwdXQuZW5kc3dpdGgoIlxyIikgYW5kIG5vdCBmaW5hbDoKICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0WzotMV0KICAgICAgICAgICAgc2VsZi5wZW5kaW5nY3IgPSBUcnVlCgogICAgICAgICMgUmVjb3JkIHdoaWNoIG5ld2xpbmVzIGFyZSByZWFkCiAgICAgICAgY3JsZiA9IG91dHB1dC5jb3VudCgnXHJcbicpCiAgICAgICAgY3IgPSBvdXRwdXQuY291bnQoJ1xyJykgLSBjcmxmCiAgICAgICAgbGYgPSBvdXRwdXQuY291bnQoJ1xuJykgLSBjcmxmCiAgICAgICAgc2VsZi5zZWVubmwgfD0gKGxmIGFuZCBzZWxmLl9MRikgfCAoY3IgYW5kIHNlbGYuX0NSKSBcCiAgICAgICAgICAgICAgICAgICAgfCAoY3JsZiBhbmQgc2VsZi5fQ1JMRikKCiAgICAgICAgaWYgc2VsZi50cmFuc2xhdGU6CiAgICAgICAgICAgIGlmIGNybGY6CiAgICAgICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQucmVwbGFjZSgiXHJcbiIsICJcbiIpCiAgICAgICAgICAgIGlmIGNyOgogICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoIlxyIiwgIlxuIikKCiAgICAgICAgcmV0dXJuIG91dHB1dAoKICAgIGRlZiBnZXRzdGF0ZShzZWxmKToKICAgICAgICBpZiBzZWxmLmRlY29kZXIgaXMgTm9uZToKICAgICAgICAgICAgI2J1ZiA9IGIiIiAgICNmaXhtZQogICAgICAgICAgICBidWYgPSAiIgogICAgICAgICAgICBmbGFnID0gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGJ1ZiwgZmxhZyA9IHNlbGYuZGVjb2Rlci5nZXRzdGF0ZSgpCiAgICAgICAgZmxhZyA8PD0gMQogICAgICAgIGlmIHNlbGYucGVuZGluZ2NyOgogICAgICAgICAgICBmbGFnIHw9IDEKICAgICAgICByZXR1cm4gYnVmLCBmbGFnCgogICAgZGVmIHNldHN0YXRlKHNlbGYsIHN0YXRlKToKICAgICAgICBidWYsIGZsYWcgPSBzdGF0ZQogICAgICAgIHNlbGYucGVuZGluZ2NyID0gYm9vbChmbGFnICYgMSkKICAgICAgICBpZiBzZWxmLmRlY29kZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuZGVjb2Rlci5zZXRzdGF0ZSgoYnVmLCBmbGFnID4+IDEpKQoKICAgIGRlZiByZXNldChzZWxmKToKICAgICAgICBzZWxmLnNlZW5ubCA9IDAKICAgICAgICBzZWxmLnBlbmRpbmdjciA9IEZhbHNlCiAgICAgICAgaWYgc2VsZi5kZWNvZGVyIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmRlY29kZXIucmVzZXQoKQoKICAgIF9MRiA9IDEKICAgIF9DUiA9IDIKICAgIF9DUkxGID0gNAogICAgCiAgICAjQHByb3BlcnR5CiAgICBkZWYgbmV3bGluZXMoc2VsZik6CiAgICAgICAgcmV0dXJuIChOb25lLAogICAgICAgICAgICAgICAgIlxuIiwKICAgICAgICAgICAgICAgICJcciIsCiAgICAgICAgICAgICAgICAoIlxyIiwgIlxuIiksCiAgICAgICAgICAgICAgICAiXHJcbiIsCiAgICAgICAgICAgICAgICAoIlxuIiwgIlxyXG4iKSwKICAgICAgICAgICAgICAgICgiXHIiLCAiXHJcbiIpLAogICAgICAgICAgICAgICAgKCJcciIsICJcbiIsICJcclxuIikKICAgICAgICAgICAgICAgKVtzZWxmLnNlZW5ubF0KCgpjbGFzcyBUZXh0SU9XcmFwcGVyKFRleHRJT0Jhc2UpOgogICAgX0NIVU5LX1NJWkUgPSAyMDQ4CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGJ1ZmZlciwgZW5jb2Rpbmc9Tm9uZSwgZXJyb3JzPU5vbmUsIG5ld2xpbmU9Tm9uZSwKICAgICAgICAgICAgICAgICBsaW5lX2J1ZmZlcmluZz1GYWxzZSwgd3JpdGVfdGhyb3VnaD1GYWxzZSk6CiAgICAgICAgaWYgbmV3bGluZSBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UobmV3bGluZSwgc3RyKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJpbGxlZ2FsIG5ld2xpbmUgdHlwZTogJXIiICUgKHR5cGUobmV3bGluZSksKSkKICAgICAgICBpZiBuZXdsaW5lIG5vdCBpbiAoTm9uZSwgIiIsICJcbiIsICJcciIsICJcclxuIik6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImlsbGVnYWwgbmV3bGluZSB2YWx1ZTogJXIiICUgKG5ld2xpbmUsKSkKICAgICAgICBpZiBlbmNvZGluZyBpcyBOb25lOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBlbmNvZGluZyA9IG9zLmRldmljZV9lbmNvZGluZyhidWZmZXIuZmlsZW5vKCkpCiAgICAgICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIFVuc3VwcG9ydGVkT3BlcmF0aW9uKToKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBpbXBvcnQgbG9jYWxlCiAgICAgICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgIyBJbXBvcnRpbmcgbG9jYWxlIG1heSBmYWlsIGlmIFB5dGhvbiBpcyBiZWluZyBidWlsdAogICAgICAgICAgICAgICAgICAgIGVuY29kaW5nID0gImFzY2lpIgogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBlbmNvZGluZyA9IGxvY2FsZS5nZXRwcmVmZXJyZWRlbmNvZGluZygpCgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGVuY29kaW5nLCBzdHIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIGVuY29kaW5nOiAlciIgJSBlbmNvZGluZykKCiAgICAgICAgaWYgZXJyb3JzIGlzIE5vbmU6CiAgICAgICAgICAgIGVycm9ycyA9ICJzdHJpY3QiCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZXJyb3JzLCBzdHIpOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCBlcnJvcnM6ICVyIiAlIGVycm9ycykKCiAgICAgICAgc2VsZi5fYnVmZmVyID0gYnVmZmVyCiAgICAgICAgc2VsZi5fbGluZV9idWZmZXJpbmcgPSBsaW5lX2J1ZmZlcmluZwogICAgICAgIHNlbGYuX2VuY29kaW5nID0gZW5jb2RpbmcKICAgICAgICBzZWxmLl9lcnJvcnMgPSBlcnJvcnMKICAgICAgICBzZWxmLl9yZWFkdW5pdmVyc2FsID0gbm90IG5ld2xpbmUKICAgICAgICBzZWxmLl9yZWFkdHJhbnNsYXRlID0gbmV3bGluZSBpcyBOb25lCiAgICAgICAgc2VsZi5fcmVhZG5sID0gbmV3bGluZQogICAgICAgIHNlbGYuX3dyaXRldHJhbnNsYXRlID0gbmV3bGluZSAhPSAnJwogICAgICAgIHNlbGYuX3dyaXRlbmwgPSBuZXdsaW5lIG9yIG9zLmxpbmVzZXAKICAgICAgICBzZWxmLl9lbmNvZGVyID0gTm9uZQogICAgICAgIHNlbGYuX2RlY29kZXIgPSBOb25lCiAgICAgICAgc2VsZi5fZGVjb2RlZF9jaGFycyA9ICcnICAjIGJ1ZmZlciBmb3IgdGV4dCByZXR1cm5lZCBmcm9tIGRlY29kZXIKICAgICAgICBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQgPSAwICAjIG9mZnNldCBpbnRvIF9kZWNvZGVkX2NoYXJzIGZvciByZWFkKCkKICAgICAgICBzZWxmLl9zbmFwc2hvdCA9IE5vbmUgICMgaW5mbyBmb3IgcmVjb25zdHJ1Y3RpbmcgZGVjb2RlciBzdGF0ZQogICAgICAgIHNlbGYuX3NlZWthYmxlID0gc2VsZi5fdGVsbGluZyA9IHNlbGYuYnVmZmVyLnNlZWthYmxlKCkKICAgICAgICBzZWxmLl9oYXNfcmVhZDEgPSBoYXNhdHRyKHNlbGYuYnVmZmVyLCAncmVhZDEnKQoKICAgICAgICBpZiBzZWxmLl9zZWVrYWJsZSBhbmQgc2VsZi53cml0YWJsZSgpOgogICAgICAgICAgICBwb3NpdGlvbiA9IHNlbGYuYnVmZmVyLnRlbGwoKQogICAgICAgICAgICBpZiBwb3NpdGlvbiAhPSAwOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2dldF9lbmNvZGVyKCkuc2V0c3RhdGUoMCkKICAgICAgICAgICAgICAgIGV4Y2VwdCBMb29rdXBFcnJvcjoKICAgICAgICAgICAgICAgICAgICAjIFNvbWV0aW1lcyB0aGUgZW5jb2RlciBkb2Vzbid0IGV4aXN0CiAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICMgc2VsZi5fc25hcHNob3QgaXMgZWl0aGVyIE5vbmUsIG9yIGEgdHVwbGUgKGRlY19mbGFncywgbmV4dF9pbnB1dCkKICAgICMgd2hlcmUgZGVjX2ZsYWdzIGlzIHRoZSBzZWNvbmQgKGludGVnZXIpIGl0ZW0gb2YgdGhlIGRlY29kZXIgc3RhdGUKICAgICMgYW5kIG5leHRfaW5wdXQgaXMgdGhlIGNodW5rIG9mIGlucHV0IGJ5dGVzIHRoYXQgY29tZXMgbmV4dCBhZnRlciB0aGUKICAgICMgc25hcHNob3QgcG9pbnQuICBXZSB1c2UgdGhpcyB0byByZWNvbnN0cnVjdCBkZWNvZGVyIHN0YXRlcyBpbiB0ZWxsKCkuCgogICAgIyBOYW1pbmcgY29udmVudGlvbjoKICAgICMgICAtICJieXRlc18uLi4iIGZvciBpbnRlZ2VyIHZhcmlhYmxlcyB0aGF0IGNvdW50IGlucHV0IGJ5dGVzCiAgICAjICAgLSAiY2hhcnNfLi4uIiBmb3IgaW50ZWdlciB2YXJpYWJsZXMgdGhhdCBjb3VudCBkZWNvZGVkIGNoYXJhY3RlcnMKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmVzdWx0ID0gIjxfcHlpby5UZXh0SU9XcmFwcGVyIgogICAgICAgIHRyeToKICAgICAgICAgICAgbmFtZSA9IHNlbGYubmFtZQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3VsdCArPSAiIG5hbWU9ezAhcn0iLmZvcm1hdChuYW1lKQogICAgICAgIHRyeToKICAgICAgICAgICAgbW9kZSA9IHNlbGYubW9kZQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3VsdCArPSAiIG1vZGU9ezAhcn0iLmZvcm1hdChtb2RlKQogICAgICAgIHJldHVybiByZXN1bHQgKyAiIGVuY29kaW5nPXswIXJ9PiIuZm9ybWF0KHNlbGYuZW5jb2RpbmcpCgogICAgI0Bwcm9wZXJ0eQogICAgZGVmIGVuY29kaW5nKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9lbmNvZGluZwoKICAgICNAcHJvcGVydHkKICAgIGRlZiBlcnJvcnMoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX2Vycm9ycwoKICAgICNAcHJvcGVydHkKICAgIGRlZiBsaW5lX2J1ZmZlcmluZyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fbGluZV9idWZmZXJpbmcKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgYnVmZmVyKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9idWZmZXIKCiAgICBkZWYgc2Vla2FibGUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkkvTyBvcGVyYXRpb24gb24gY2xvc2VkIGZpbGUuIikKICAgICAgICByZXR1cm4gc2VsZi5fc2Vla2FibGUKCiAgICBkZWYgcmVhZGFibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuYnVmZmVyLnJlYWRhYmxlKCkKCiAgICBkZWYgd3JpdGFibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuYnVmZmVyLndyaXRhYmxlKCkKCiAgICBkZWYgZmx1c2goc2VsZik6CiAgICAgICAgc2VsZi5idWZmZXIuZmx1c2goKQogICAgICAgIHNlbGYuX3RlbGxpbmcgPSBzZWxmLl9zZWVrYWJsZQoKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICBpZiBzZWxmLmJ1ZmZlciBpcyBub3QgTm9uZSBhbmQgbm90IHNlbGYuY2xvc2VkOgogICAgICAgICAgICBzZWxmLmZsdXNoKCkKICAgICAgICAgICAgc2VsZi5idWZmZXIuY2xvc2UoKQoKICAgICNAcHJvcGVydHkKICAgIGRlZiBjbG9zZWQoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuYnVmZmVyLmNsb3NlZAoKICAgICNAcHJvcGVydHkKICAgIGRlZiBuYW1lKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlci5uYW1lCgogICAgZGVmIGZpbGVubyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5idWZmZXIuZmlsZW5vKCkKCiAgICBkZWYgaXNhdHR5KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlci5pc2F0dHkoKQoKICAgIGRlZiB3cml0ZShzZWxmLCBzKToKICAgICAgICAnV3JpdGUgZGF0YSwgd2hlcmUgcyBpcyBhIHN0cicKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JpdGUgdG8gY2xvc2VkIGZpbGUiKQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHMsIHN0cik6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY2FuJ3Qgd3JpdGUgJXMgdG8gdGV4dCBzdHJlYW0iICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuX19jbGFzc19fLl9fbmFtZV9fKQogICAgICAgIGxlbmd0aCA9IGxlbihzKQogICAgICAgIGhhc2xmID0gKHNlbGYuX3dyaXRldHJhbnNsYXRlIG9yIHNlbGYuX2xpbmVfYnVmZmVyaW5nKSBhbmQgIlxuIiBpbiBzCiAgICAgICAgaWYgaGFzbGYgYW5kIHNlbGYuX3dyaXRldHJhbnNsYXRlIGFuZCBzZWxmLl93cml0ZW5sICE9ICJcbiI6CiAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoIlxuIiwgc2VsZi5fd3JpdGVubCkKICAgICAgICBlbmNvZGVyID0gc2VsZi5fZW5jb2RlciBvciBzZWxmLl9nZXRfZW5jb2RlcigpCiAgICAgICAgIyBYWFggV2hhdCBpZiB3ZSB3ZXJlIGp1c3QgcmVhZGluZz8KICAgICAgICBiID0gZW5jb2Rlci5lbmNvZGUocykKICAgICAgICBzZWxmLmJ1ZmZlci53cml0ZShiKQogICAgICAgIGlmIHNlbGYuX2xpbmVfYnVmZmVyaW5nIGFuZCAoaGFzbGYgb3IgIlxyIiBpbiBzKToKICAgICAgICAgICAgc2VsZi5mbHVzaCgpCiAgICAgICAgc2VsZi5fc25hcHNob3QgPSBOb25lCiAgICAgICAgaWYgc2VsZi5fZGVjb2RlcjoKICAgICAgICAgICAgc2VsZi5fZGVjb2Rlci5yZXNldCgpCiAgICAgICAgcmV0dXJuIGxlbmd0aAoKICAgIGRlZiBfZ2V0X2VuY29kZXIoc2VsZik6CiAgICAgICAgbWFrZV9lbmNvZGVyID0gY29kZWNzLmdldGluY3JlbWVudGFsZW5jb2RlcihzZWxmLl9lbmNvZGluZykKICAgICAgICBzZWxmLl9lbmNvZGVyID0gbWFrZV9lbmNvZGVyKHNlbGYuX2Vycm9ycykKICAgICAgICByZXR1cm4gc2VsZi5fZW5jb2RlcgoKICAgIGRlZiBfZ2V0X2RlY29kZXIoc2VsZik6CiAgICAgICAgbWFrZV9kZWNvZGVyID0gY29kZWNzLmdldGluY3JlbWVudGFsZGVjb2RlcihzZWxmLl9lbmNvZGluZykKICAgICAgICBkZWNvZGVyID0gbWFrZV9kZWNvZGVyKHNlbGYuX2Vycm9ycykKICAgICAgICBpZiBzZWxmLl9yZWFkdW5pdmVyc2FsOgogICAgICAgICAgICBkZWNvZGVyID0gSW5jcmVtZW50YWxOZXdsaW5lRGVjb2RlcihkZWNvZGVyLCBzZWxmLl9yZWFkdHJhbnNsYXRlKQogICAgICAgIHNlbGYuX2RlY29kZXIgPSBkZWNvZGVyCiAgICAgICAgcmV0dXJuIGRlY29kZXIKCiAgICAjIFRoZSBmb2xsb3dpbmcgdGhyZWUgbWV0aG9kcyBpbXBsZW1lbnQgYW4gQURUIGZvciBfZGVjb2RlZF9jaGFycy4KICAgICMgVGV4dCByZXR1cm5lZCBmcm9tIHRoZSBkZWNvZGVyIGlzIGJ1ZmZlcmVkIGhlcmUgdW50aWwgdGhlIGNsaWVudAogICAgIyByZXF1ZXN0cyBpdCBieSBjYWxsaW5nIG91ciByZWFkKCkgb3IgcmVhZGxpbmUoKSBtZXRob2QuCiAgICBkZWYgX3NldF9kZWNvZGVkX2NoYXJzKHNlbGYsIGNoYXJzKToKICAgICAgICAiU2V0IHRoZSBfZGVjb2RlZF9jaGFycyBidWZmZXIuIgogICAgICAgIHNlbGYuX2RlY29kZWRfY2hhcnMgPSBjaGFycwogICAgICAgIHNlbGYuX2RlY29kZWRfY2hhcnNfdXNlZCA9IDAKCiAgICBkZWYgX2dldF9kZWNvZGVkX2NoYXJzKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgIkFkdmFuY2UgaW50byB0aGUgX2RlY29kZWRfY2hhcnMgYnVmZmVyLiIKICAgICAgICBvZmZzZXQgPSBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQKICAgICAgICBpZiBuIGlzIE5vbmU6CiAgICAgICAgICAgIGNoYXJzID0gc2VsZi5fZGVjb2RlZF9jaGFyc1tvZmZzZXQ6XQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNoYXJzID0gc2VsZi5fZGVjb2RlZF9jaGFyc1tvZmZzZXQ6b2Zmc2V0ICsgbl0KICAgICAgICBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQgKz0gbGVuKGNoYXJzKQogICAgICAgIHJldHVybiBjaGFycwoKICAgIGRlZiBfcmV3aW5kX2RlY29kZWRfY2hhcnMoc2VsZiwgbik6CiAgICAgICAgIlJld2luZCB0aGUgX2RlY29kZWRfY2hhcnMgYnVmZmVyLiIKICAgICAgICBpZiBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQgPCBuOgogICAgICAgICAgICByYWlzZSBBc3NlcnRpb25FcnJvcigicmV3aW5kIGRlY29kZWRfY2hhcnMgb3V0IG9mIGJvdW5kcyIpCiAgICAgICAgc2VsZi5fZGVjb2RlZF9jaGFyc191c2VkIC09IG4KCiAgICBkZWYgX3JlYWRfY2h1bmsoc2VsZik6CiAgICAgICAgIlJlYWQgYW5kIGRlY29kZSB0aGUgbmV4dCBjaHVuayBvZiBkYXRhIGZyb20gdGhlIEJ1ZmZlcmVkUmVhZGVyLiIKCiAgICAgICAgIyBUaGUgcmV0dXJuIHZhbHVlIGlzIFRydWUgdW5sZXNzIEVPRiB3YXMgcmVhY2hlZC4gIFRoZSBkZWNvZGVkCiAgICAgICAgIyBzdHJpbmcgaXMgcGxhY2VkIGluIHNlbGYuX2RlY29kZWRfY2hhcnMgKHJlcGxhY2luZyBpdHMgcHJldmlvdXMKICAgICAgICAjIHZhbHVlKS4gIFRoZSBlbnRpcmUgaW5wdXQgY2h1bmsgaXMgc2VudCB0byB0aGUgZGVjb2RlciwgdGhvdWdoCiAgICAgICAgIyBzb21lIG9mIGl0IG1heSByZW1haW4gYnVmZmVyZWQgaW4gdGhlIGRlY29kZXIsIHlldCB0byBiZQogICAgICAgICMgY29udmVydGVkLgoKICAgICAgICBpZiBzZWxmLl9kZWNvZGVyIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5vIGRlY29kZXIiKQoKICAgICAgICBpZiBzZWxmLl90ZWxsaW5nOgogICAgICAgICAgICAjIFRvIHByZXBhcmUgZm9yIHRlbGwoKSwgd2UgbmVlZCB0byBzbmFwc2hvdCBhIHBvaW50IGluIHRoZQogICAgICAgICAgICAjIGZpbGUgd2hlcmUgdGhlIGRlY29kZXIncyBpbnB1dCBidWZmZXIgaXMgZW1wdHkuCgogICAgICAgICAgICBkZWNfYnVmZmVyLCBkZWNfZmxhZ3MgPSBzZWxmLl9kZWNvZGVyLmdldHN0YXRlKCkKICAgICAgICAgICAgIyBHaXZlbiB0aGlzLCB3ZSBrbm93IHRoZXJlIHdhcyBhIHZhbGlkIHNuYXBzaG90IHBvaW50CiAgICAgICAgICAgICMgbGVuKGRlY19idWZmZXIpIGJ5dGVzIGFnbyB3aXRoIGRlY29kZXIgc3RhdGUgKGInJywgZGVjX2ZsYWdzKS4KCiAgICAgICAgIyBSZWFkIGEgY2h1bmssIGRlY29kZSBpdCwgYW5kIHB1dCB0aGUgcmVzdWx0IGluIHNlbGYuX2RlY29kZWRfY2hhcnMuCiAgICAgICAgaWYgc2VsZi5faGFzX3JlYWQxOgogICAgICAgICAgICBpbnB1dF9jaHVuayA9IHNlbGYuYnVmZmVyLnJlYWQxKHNlbGYuX0NIVU5LX1NJWkUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaW5wdXRfY2h1bmsgPSBzZWxmLmJ1ZmZlci5yZWFkKHNlbGYuX0NIVU5LX1NJWkUpCiAgICAgICAgZW9mID0gbm90IGlucHV0X2NodW5rCiAgICAgICAgc2VsZi5fc2V0X2RlY29kZWRfY2hhcnMoc2VsZi5fZGVjb2Rlci5kZWNvZGUoaW5wdXRfY2h1bmssIGVvZikpCgogICAgICAgIGlmIHNlbGYuX3RlbGxpbmc6CiAgICAgICAgICAgICMgQXQgdGhlIHNuYXBzaG90IHBvaW50LCBsZW4oZGVjX2J1ZmZlcikgYnl0ZXMgYmVmb3JlIHRoZSByZWFkLAogICAgICAgICAgICAjIHRoZSBuZXh0IGlucHV0IHRvIGJlIGRlY29kZWQgaXMgZGVjX2J1ZmZlciArIGlucHV0X2NodW5rLgogICAgICAgICAgICBzZWxmLl9zbmFwc2hvdCA9IChkZWNfZmxhZ3MsIGRlY19idWZmZXIgKyBpbnB1dF9jaHVuaykKCiAgICAgICAgcmV0dXJuIG5vdCBlb2YKCiAgICBkZWYgX3BhY2tfY29va2llKHNlbGYsIHBvc2l0aW9uLCBkZWNfZmxhZ3M9MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXNfdG9fZmVlZD0wLCBuZWVkX2VvZj0wLCBjaGFyc190b19za2lwPTApOgogICAgICAgICMgVGhlIG1lYW5pbmcgb2YgYSB0ZWxsKCkgY29va2llIGlzOiBzZWVrIHRvIHBvc2l0aW9uLCBzZXQgdGhlCiAgICAgICAgIyBkZWNvZGVyIGZsYWdzIHRvIGRlY19mbGFncywgcmVhZCBieXRlc190b19mZWVkIGJ5dGVzLCBmZWVkIHRoZW0KICAgICAgICAjIGludG8gdGhlIGRlY29kZXIgd2l0aCBuZWVkX2VvZiBhcyB0aGUgRU9GIGZsYWcsIHRoZW4gc2tpcAogICAgICAgICMgY2hhcnNfdG9fc2tpcCBjaGFyYWN0ZXJzIG9mIHRoZSBkZWNvZGVkIHJlc3VsdC4gIEZvciBtb3N0IHNpbXBsZQogICAgICAgICMgZGVjb2RlcnMsIHRlbGwoKSB3aWxsIG9mdGVuIGp1c3QgZ2l2ZSBhIGJ5dGUgb2Zmc2V0IGluIHRoZSBmaWxlLgogICAgICAgIHJldHVybiAocG9zaXRpb24gfCAoZGVjX2ZsYWdzPDw2NCkgfCAoYnl0ZXNfdG9fZmVlZDw8MTI4KSB8CiAgICAgICAgICAgICAgIChjaGFyc190b19za2lwPDwxOTIpIHwgYm9vbChuZWVkX2VvZik8PDI1NikKCiAgICBkZWYgX3VucGFja19jb29raWUoc2VsZiwgYmlnaW50KToKICAgICAgICByZXN0LCBwb3NpdGlvbiA9IGRpdm1vZChiaWdpbnQsIDE8PDY0KQogICAgICAgIHJlc3QsIGRlY19mbGFncyA9IGRpdm1vZChyZXN0LCAxPDw2NCkKICAgICAgICByZXN0LCBieXRlc190b19mZWVkID0gZGl2bW9kKHJlc3QsIDE8PDY0KQogICAgICAgIG5lZWRfZW9mLCBjaGFyc190b19za2lwID0gZGl2bW9kKHJlc3QsIDE8PDY0KQogICAgICAgIHJldHVybiBwb3NpdGlvbiwgZGVjX2ZsYWdzLCBieXRlc190b19mZWVkLCBuZWVkX2VvZiwgY2hhcnNfdG9fc2tpcAogICAgIiIiCiAgICAjIyAjZml4bWUgSSBkaWRuJ3Qga25vdyB0aGF0IGZvci4uIGVsc2UgY291bGQgZXZlbiBvY2N1ciEgOigKICAgIGRlZiB0ZWxsKHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmLl9zZWVrYWJsZToKICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRPcGVyYXRpb24oInVuZGVybHlpbmcgc3RyZWFtIGlzIG5vdCBzZWVrYWJsZSIpCiAgICAgICAgaWYgbm90IHNlbGYuX3RlbGxpbmc6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoInRlbGxpbmcgcG9zaXRpb24gZGlzYWJsZWQgYnkgbmV4dCgpIGNhbGwiKQogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHBvc2l0aW9uID0gc2VsZi5idWZmZXIudGVsbCgpCiAgICAgICAgZGVjb2RlciA9IHNlbGYuX2RlY29kZXIKICAgICAgICBpZiBkZWNvZGVyIGlzIE5vbmUgb3Igc2VsZi5fc25hcHNob3QgaXMgTm9uZToKICAgICAgICAgICAgaWYgc2VsZi5fZGVjb2RlZF9jaGFyczoKICAgICAgICAgICAgICAgICMgVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuLgogICAgICAgICAgICAgICAgcmFpc2UgQXNzZXJ0aW9uRXJyb3IoInBlbmRpbmcgZGVjb2RlZCB0ZXh0IikKICAgICAgICAgICAgcmV0dXJuIHBvc2l0aW9uCgogICAgICAgICMgU2tpcCBiYWNrd2FyZCB0byB0aGUgc25hcHNob3QgcG9pbnQgKHNlZSBfcmVhZF9jaHVuaykuCiAgICAgICAgZGVjX2ZsYWdzLCBuZXh0X2lucHV0ID0gc2VsZi5fc25hcHNob3QKICAgICAgICBwb3NpdGlvbiAtPSBsZW4obmV4dF9pbnB1dCkKCiAgICAgICAgIyBIb3cgbWFueSBkZWNvZGVkIGNoYXJhY3RlcnMgaGF2ZSBiZWVuIHVzZWQgdXAgc2luY2UgdGhlIHNuYXBzaG90PwogICAgICAgIGNoYXJzX3RvX3NraXAgPSBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQKICAgICAgICBpZiBjaGFyc190b19za2lwID09IDA6CiAgICAgICAgICAgICMgV2UgaGF2ZW4ndCBtb3ZlZCBmcm9tIHRoZSBzbmFwc2hvdCBwb2ludC4KICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3BhY2tfY29va2llKHBvc2l0aW9uLCBkZWNfZmxhZ3MpCgogICAgICAgICMgU3RhcnRpbmcgZnJvbSB0aGUgc25hcHNob3QgcG9zaXRpb24sIHdlIHdpbGwgd2FsayB0aGUgZGVjb2RlcgogICAgICAgICMgZm9yd2FyZCB1bnRpbCBpdCBnaXZlcyB1cyBlbm91Z2ggZGVjb2RlZCBjaGFyYWN0ZXJzLgogICAgICAgIHNhdmVkX3N0YXRlID0gZGVjb2Rlci5nZXRzdGF0ZSgpCiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIE5vdGUgb3VyIGluaXRpYWwgc3RhcnQgcG9pbnQuCiAgICAgICAgICAgICNkZWNvZGVyLnNldHN0YXRlKChiJycsIGRlY19mbGFncykpICAjZml4bWUKICAgICAgICAgICAgZGVjb2Rlci5zZXRzdGF0ZSgoJycsIGRlY19mbGFncykpCiAgICAgICAgICAgIHN0YXJ0X3BvcyA9IHBvc2l0aW9uCiAgICAgICAgICAgIHN0YXJ0X2ZsYWdzLCBieXRlc19mZWQsIGNoYXJzX2RlY29kZWQgPSBkZWNfZmxhZ3MsIDAsIDAKICAgICAgICAgICAgbmVlZF9lb2YgPSAwCgogICAgICAgICAgICAjIEZlZWQgdGhlIGRlY29kZXIgb25lIGJ5dGUgYXQgYSB0aW1lLiAgQXMgd2UgZ28sIG5vdGUgdGhlCiAgICAgICAgICAgICMgbmVhcmVzdCAic2FmZSBzdGFydCBwb2ludCIgYmVmb3JlIHRoZSBjdXJyZW50IGxvY2F0aW9uCiAgICAgICAgICAgICMgKGEgcG9pbnQgd2hlcmUgdGhlIGRlY29kZXIgaGFzIG5vdGhpbmcgYnVmZmVyZWQsIHNvIHNlZWsoKQogICAgICAgICAgICAjIGNhbiBzYWZlbHkgc3RhcnQgZnJvbSB0aGVyZSBhbmQgYWR2YW5jZSB0byB0aGlzIGxvY2F0aW9uKS4KICAgICAgICAgICAgbmV4dF9ieXRlID0gYnl0ZWFycmF5KDEpCiAgICAgICAgICAgICNmb3IgbmV4dF9ieXRlWzBdIGluIG5leHRfaW5wdXQ6ICAgI2ZpeG1lCiAgICAgICAgICAgIGZvciBfaSBpbiBuZXh0X2lucHV0OgogICAgICAgICAgICAgICAgbmV4dF9ieXRlWzBdPV9pCiAgICAgICAgICAgICAgICBieXRlc19mZWQgKz0gMQogICAgICAgICAgICAgICAgY2hhcnNfZGVjb2RlZCArPSBsZW4oZGVjb2Rlci5kZWNvZGUobmV4dF9ieXRlKSkKICAgICAgICAgICAgICAgIGRlY19idWZmZXIsIGRlY19mbGFncyA9IGRlY29kZXIuZ2V0c3RhdGUoKQogICAgICAgICAgICAgICAgaWYgbm90IGRlY19idWZmZXIgYW5kIGNoYXJzX2RlY29kZWQgPD0gY2hhcnNfdG9fc2tpcDoKICAgICAgICAgICAgICAgICAgICAjIERlY29kZXIgYnVmZmVyIGlzIGVtcHR5LCBzbyB0aGlzIGlzIGEgc2FmZSBzdGFydCBwb2ludC4KICAgICAgICAgICAgICAgICAgICBzdGFydF9wb3MgKz0gYnl0ZXNfZmVkCiAgICAgICAgICAgICAgICAgICAgY2hhcnNfdG9fc2tpcCAtPSBjaGFyc19kZWNvZGVkCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfZmxhZ3MsIGJ5dGVzX2ZlZCwgY2hhcnNfZGVjb2RlZCA9IGRlY19mbGFncywgMCwgMAogICAgICAgICAgICAgICAgaWYgY2hhcnNfZGVjb2RlZCA+PSBjaGFyc190b19za2lwOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIFdlIGRpZG4ndCBnZXQgZW5vdWdoIGRlY29kZWQgZGF0YTsgc2lnbmFsIEVPRiB0byBnZXQgbW9yZS4KICAgICAgICAgICAgICAgICNjaGFyc19kZWNvZGVkICs9IGxlbihkZWNvZGVyLmRlY29kZShiJycsIGZpbmFsPVRydWUpKQogICAgICAgICAgICAgICAgY2hhcnNfZGVjb2RlZCArPSBsZW4oZGVjb2Rlci5kZWNvZGUoJycsIGZpbmFsPVRydWUpKSAgI2ZpeG1lCiAgICAgICAgICAgICAgICBuZWVkX2VvZiA9IDEKICAgICAgICAgICAgICAgIGlmIGNoYXJzX2RlY29kZWQgPCBjaGFyc190b19za2lwOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoImNhbid0IHJlY29uc3RydWN0IGxvZ2ljYWwgZmlsZSBwb3NpdGlvbiIpCgogICAgICAgICAgICAjIFRoZSByZXR1cm5lZCBjb29raWUgY29ycmVzcG9uZHMgdG8gdGhlIGxhc3Qgc2FmZSBzdGFydCBwb2ludC4KICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3BhY2tfY29va2llKAogICAgICAgICAgICAgICAgc3RhcnRfcG9zLCBzdGFydF9mbGFncywgYnl0ZXNfZmVkLCBuZWVkX2VvZiwgY2hhcnNfdG9fc2tpcCkKICAgICAgICAjZXhjZXB0OiAgI2ZpeG1lCiAgICAgICAgIyAgICBhPTEgICMgcGFzcyAjZml4bWUKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICBkZWNvZGVyLnNldHN0YXRlKHNhdmVkX3N0YXRlKQogICAgIiIiCiAgICBkZWYgdHJ1bmNhdGUoc2VsZiwgcG9zPU5vbmUpOgogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIGlmIHBvcyBpcyBOb25lOgogICAgICAgICAgICBwb3MgPSBzZWxmLnRlbGwoKQogICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlci50cnVuY2F0ZShwb3MpCgogICAgZGVmIGRldGFjaChzZWxmKToKICAgICAgICBpZiBzZWxmLmJ1ZmZlciBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJidWZmZXIgaXMgYWxyZWFkeSBkZXRhY2hlZCIpCiAgICAgICAgc2VsZi5mbHVzaCgpCiAgICAgICAgYnVmZmVyID0gc2VsZi5fYnVmZmVyCiAgICAgICAgc2VsZi5fYnVmZmVyID0gTm9uZQogICAgICAgIHJldHVybiBidWZmZXIKCiAgICBkZWYgc2VlayhzZWxmLCBjb29raWUsIHdoZW5jZT0wKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidGVsbCBvbiBjbG9zZWQgZmlsZSIpCiAgICAgICAgaWYgbm90IHNlbGYuX3NlZWthYmxlOgogICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbigidW5kZXJseWluZyBzdHJlYW0gaXMgbm90IHNlZWthYmxlIikKICAgICAgICBpZiB3aGVuY2UgPT0gMTogIyBzZWVrIHJlbGF0aXZlIHRvIGN1cnJlbnQgcG9zaXRpb24KICAgICAgICAgICAgaWYgY29va2llICE9IDA6CiAgICAgICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbigiY2FuJ3QgZG8gbm9uemVybyBjdXItcmVsYXRpdmUgc2Vla3MiKQogICAgICAgICAgICAjIFNlZWtpbmcgdG8gdGhlIGN1cnJlbnQgcG9zaXRpb24gc2hvdWxkIGF0dGVtcHQgdG8KICAgICAgICAgICAgIyBzeW5jIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlciB3aXRoIHRoZSBjdXJyZW50IHBvc2l0aW9uLgogICAgICAgICAgICB3aGVuY2UgPSAwCiAgICAgICAgICAgIGNvb2tpZSA9IHNlbGYudGVsbCgpCiAgICAgICAgaWYgd2hlbmNlID09IDI6ICMgc2VlayByZWxhdGl2ZSB0byBlbmQgb2YgZmlsZQogICAgICAgICAgICBpZiBjb29raWUgIT0gMDoKICAgICAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkT3BlcmF0aW9uKCJjYW4ndCBkbyBub256ZXJvIGVuZC1yZWxhdGl2ZSBzZWVrcyIpCiAgICAgICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgICAgICBwb3NpdGlvbiA9IHNlbGYuYnVmZmVyLnNlZWsoMCwgMikKICAgICAgICAgICAgc2VsZi5fc2V0X2RlY29kZWRfY2hhcnMoJycpCiAgICAgICAgICAgIHNlbGYuX3NuYXBzaG90ID0gTm9uZQogICAgICAgICAgICBpZiBzZWxmLl9kZWNvZGVyOgogICAgICAgICAgICAgICAgc2VsZi5fZGVjb2Rlci5yZXNldCgpCiAgICAgICAgICAgIHJldHVybiBwb3NpdGlvbgogICAgICAgIGlmIHdoZW5jZSAhPSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHdoZW5jZSAoJXIsIHNob3VsZCBiZSAwLCAxIG9yIDIpIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHdoZW5jZSwpKQogICAgICAgIGlmIGNvb2tpZSA8IDA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5lZ2F0aXZlIHNlZWsgcG9zaXRpb24gJXIiICUgKGNvb2tpZSwpKQogICAgICAgIHNlbGYuZmx1c2goKQoKICAgICAgICAjIFRoZSBzdHJhdGVneSBvZiBzZWVrKCkgaXMgdG8gZ28gYmFjayB0byB0aGUgc2FmZSBzdGFydCBwb2ludAogICAgICAgICMgYW5kIHJlcGxheSB0aGUgZWZmZWN0IG9mIHJlYWQoY2hhcnNfdG9fc2tpcCkgZnJvbSB0aGVyZS4KICAgICAgICBzdGFydF9wb3MsIGRlY19mbGFncywgYnl0ZXNfdG9fZmVlZCwgbmVlZF9lb2YsIGNoYXJzX3RvX3NraXAgPSBcCiAgICAgICAgICAgIHNlbGYuX3VucGFja19jb29raWUoY29va2llKQoKICAgICAgICAjIFNlZWsgYmFjayB0byB0aGUgc2FmZSBzdGFydCBwb2ludC4KICAgICAgICBzZWxmLmJ1ZmZlci5zZWVrKHN0YXJ0X3BvcykKICAgICAgICBzZWxmLl9zZXRfZGVjb2RlZF9jaGFycygnJykKICAgICAgICBzZWxmLl9zbmFwc2hvdCA9IE5vbmUKCiAgICAgICAgIyBSZXN0b3JlIHRoZSBkZWNvZGVyIHRvIGl0cyBzdGF0ZSBmcm9tIHRoZSBzYWZlIHN0YXJ0IHBvaW50LgogICAgICAgIGlmIGNvb2tpZSA9PSAwIGFuZCBzZWxmLl9kZWNvZGVyOgogICAgICAgICAgICBzZWxmLl9kZWNvZGVyLnJlc2V0KCkKICAgICAgICBlbGlmIHNlbGYuX2RlY29kZXIgb3IgZGVjX2ZsYWdzIG9yIGNoYXJzX3RvX3NraXA6CiAgICAgICAgICAgIHNlbGYuX2RlY29kZXIgPSBzZWxmLl9kZWNvZGVyIG9yIHNlbGYuX2dldF9kZWNvZGVyKCkKICAgICAgICAgICAgI3NlbGYuX2RlY29kZXIuc2V0c3RhdGUoKGInJywgZGVjX2ZsYWdzKSkgI2ZpeG1lCiAgICAgICAgICAgIHNlbGYuX2RlY29kZXIuc2V0c3RhdGUoKCcnLCBkZWNfZmxhZ3MpKQogICAgICAgICAgICAjc2VsZi5fc25hcHNob3QgPSAoZGVjX2ZsYWdzLCBiJycpICAgI2ZpeG1lCiAgICAgICAgICAgIHNlbGYuX3NuYXBzaG90ID0gKGRlY19mbGFncywgJycpICAgCgogICAgICAgIGlmIGNoYXJzX3RvX3NraXA6CiAgICAgICAgICAgICMgSnVzdCBsaWtlIF9yZWFkX2NodW5rLCBmZWVkIHRoZSBkZWNvZGVyIGFuZCBzYXZlIGEgc25hcHNob3QuCiAgICAgICAgICAgIGlucHV0X2NodW5rID0gc2VsZi5idWZmZXIucmVhZChieXRlc190b19mZWVkKQogICAgICAgICAgICBzZWxmLl9zZXRfZGVjb2RlZF9jaGFycygKICAgICAgICAgICAgICAgIHNlbGYuX2RlY29kZXIuZGVjb2RlKGlucHV0X2NodW5rLCBuZWVkX2VvZikpCiAgICAgICAgICAgIHNlbGYuX3NuYXBzaG90ID0gKGRlY19mbGFncywgaW5wdXRfY2h1bmspCgogICAgICAgICAgICAjIFNraXAgY2hhcnNfdG9fc2tpcCBvZiB0aGUgZGVjb2RlZCBjaGFyYWN0ZXJzLgogICAgICAgICAgICBpZiBsZW4oc2VsZi5fZGVjb2RlZF9jaGFycykgPCBjaGFyc190b19za2lwOgogICAgICAgICAgICAgICAgcmFpc2UgSU9FcnJvcigiY2FuJ3QgcmVzdG9yZSBsb2dpY2FsIGZpbGUgcG9zaXRpb24iKQogICAgICAgICAgICBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQgPSBjaGFyc190b19za2lwCgogICAgICAgICMgRmluYWxseSwgcmVzZXQgdGhlIGVuY29kZXIgKG1lcmVseSB1c2VmdWwgZm9yIHByb3BlciBCT00gaGFuZGxpbmcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBlbmNvZGVyID0gc2VsZi5fZW5jb2RlciBvciBzZWxmLl9nZXRfZW5jb2RlcigpCiAgICAgICAgZXhjZXB0IExvb2t1cEVycm9yOgogICAgICAgICAgICAjIFNvbWV0aW1lcyB0aGUgZW5jb2RlciBkb2Vzbid0IGV4aXN0CiAgICAgICAgICAgIGE9MSAgICNmaXhtZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGNvb2tpZSAhPSAwOgogICAgICAgICAgICAgICAgZW5jb2Rlci5zZXRzdGF0ZSgwKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZW5jb2Rlci5yZXNldCgpCiAgICAgICAgcmV0dXJuIGNvb2tpZQoKICAgIGRlZiByZWFkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgc2VsZi5fY2hlY2tSZWFkYWJsZSgpCiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICBuID0gLTEKICAgICAgICBkZWNvZGVyID0gc2VsZi5fZGVjb2RlciBvciBzZWxmLl9nZXRfZGVjb2RlcigpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBuLl9faW5kZXhfXwogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlcnI6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYW4gaW50ZWdlciBpcyByZXF1aXJlZCIpICNmcm9tIGVyciAgI2ZpeG1lCiAgICAgICAgaWYgbiA8IDA6CiAgICAgICAgICAgICMgUmVhZCBldmVyeXRoaW5nLgogICAgICAgICAgICByZXN1bHQgPSAoc2VsZi5fZ2V0X2RlY29kZWRfY2hhcnMoKSArCiAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVyLmRlY29kZShzZWxmLmJ1ZmZlci5yZWFkKCksIGZpbmFsPVRydWUpKQogICAgICAgICAgICBzZWxmLl9zZXRfZGVjb2RlZF9jaGFycygnJykKICAgICAgICAgICAgc2VsZi5fc25hcHNob3QgPSBOb25lCiAgICAgICAgICAgIHJldHVybiByZXN1bHQKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIEtlZXAgcmVhZGluZyBjaHVua3MgdW50aWwgd2UgaGF2ZSBuIGNoYXJhY3RlcnMgdG8gcmV0dXJuLgogICAgICAgICAgICBlb2YgPSBGYWxzZQogICAgICAgICAgICByZXN1bHQgPSBzZWxmLl9nZXRfZGVjb2RlZF9jaGFycyhuKQogICAgICAgICAgICB3aGlsZSBsZW4ocmVzdWx0KSA8IG4gYW5kIG5vdCBlb2Y6CiAgICAgICAgICAgICAgICBlb2YgPSBub3Qgc2VsZi5fcmVhZF9jaHVuaygpCiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc2VsZi5fZ2V0X2RlY29kZWRfY2hhcnMobiAtIGxlbihyZXN1bHQpKQogICAgICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHNlbGYuX3RlbGxpbmcgPSBGYWxzZQogICAgICAgIGxpbmUgPSBzZWxmLnJlYWRsaW5lKCkKICAgICAgICBpZiBub3QgbGluZToKICAgICAgICAgICAgc2VsZi5fc25hcHNob3QgPSBOb25lCiAgICAgICAgICAgIHNlbGYuX3RlbGxpbmcgPSBzZWxmLl9zZWVrYWJsZQogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgcmV0dXJuIGxpbmUKCiAgICBkZWYgcmVhZGxpbmUoc2VsZiwgbGltaXQ9Tm9uZSk6CiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInJlYWQgZnJvbSBjbG9zZWQgZmlsZSIpCiAgICAgICAgaWYgbGltaXQgaXMgTm9uZToKICAgICAgICAgICAgbGltaXQgPSAtMQogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2UobGltaXQsIGludCk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibGltaXQgbXVzdCBiZSBhbiBpbnRlZ2VyIikKCiAgICAgICAgIyBHcmFiIGFsbCB0aGUgZGVjb2RlZCB0ZXh0ICh3ZSB3aWxsIHJld2luZCBhbnkgZXh0cmEgYml0cyBsYXRlcikuCiAgICAgICAgbGluZSA9IHNlbGYuX2dldF9kZWNvZGVkX2NoYXJzKCkKCiAgICAgICAgc3RhcnQgPSAwCiAgICAgICAgIyBNYWtlIHRoZSBkZWNvZGVyIGlmIGl0IGRvZXNuJ3QgYWxyZWFkeSBleGlzdC4KICAgICAgICBpZiBub3Qgc2VsZi5fZGVjb2RlcjoKICAgICAgICAgICAgc2VsZi5fZ2V0X2RlY29kZXIoKQoKICAgICAgICBwb3MgPSBlbmRwb3MgPSBOb25lCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgaWYgc2VsZi5fcmVhZHRyYW5zbGF0ZToKICAgICAgICAgICAgICAgICMgTmV3bGluZXMgYXJlIGFscmVhZHkgdHJhbnNsYXRlZCwgb25seSBzZWFyY2ggZm9yIFxuCiAgICAgICAgICAgICAgICBwb3MgPSBsaW5lLmZpbmQoJ1xuJywgc3RhcnQpCiAgICAgICAgICAgICAgICBpZiBwb3MgPj0gMDoKICAgICAgICAgICAgICAgICAgICBlbmRwb3MgPSBwb3MgKyAxCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBsZW4obGluZSkKCiAgICAgICAgICAgIGVsaWYgc2VsZi5fcmVhZHVuaXZlcnNhbDoKICAgICAgICAgICAgICAgICMgVW5pdmVyc2FsIG5ld2xpbmUgc2VhcmNoLiBGaW5kIGFueSBvZiBcciwgXHJcbiwgXG4KICAgICAgICAgICAgICAgICMgVGhlIGRlY29kZXIgZW5zdXJlcyB0aGF0IFxyXG4gYXJlIG5vdCBzcGxpdCBpbiB0d28gcGllY2VzCgogICAgICAgICAgICAgICAgIyBJbiBDIHdlJ2QgbG9vayBmb3IgdGhlc2UgaW4gcGFyYWxsZWwgb2YgY291cnNlLgogICAgICAgICAgICAgICAgbmxwb3MgPSBsaW5lLmZpbmQoIlxuIiwgc3RhcnQpCiAgICAgICAgICAgICAgICBjcnBvcyA9IGxpbmUuZmluZCgiXHIiLCBzdGFydCkKICAgICAgICAgICAgICAgIGlmIGNycG9zID09IC0xOgogICAgICAgICAgICAgICAgICAgIGlmIG5scG9zID09IC0xOgogICAgICAgICAgICAgICAgICAgICAgICAjIE5vdGhpbmcgZm91bmQKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBsZW4obGluZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAjIEZvdW5kIFxuCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvcyA9IG5scG9zICsgMQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBubHBvcyA9PSAtMToKICAgICAgICAgICAgICAgICAgICAjIEZvdW5kIGxvbmUgXHIKICAgICAgICAgICAgICAgICAgICBlbmRwb3MgPSBjcnBvcyArIDEKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBubHBvcyA8IGNycG9zOgogICAgICAgICAgICAgICAgICAgICMgRm91bmQgXG4KICAgICAgICAgICAgICAgICAgICBlbmRwb3MgPSBubHBvcyArIDEKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBubHBvcyA9PSBjcnBvcyArIDE6CiAgICAgICAgICAgICAgICAgICAgIyBGb3VuZCBcclxuCiAgICAgICAgICAgICAgICAgICAgZW5kcG9zID0gY3Jwb3MgKyAyCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIyBGb3VuZCBccgogICAgICAgICAgICAgICAgICAgIGVuZHBvcyA9IGNycG9zICsgMQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIG5vbi11bml2ZXJzYWwKICAgICAgICAgICAgICAgIHBvcyA9IGxpbmUuZmluZChzZWxmLl9yZWFkbmwpCiAgICAgICAgICAgICAgICBpZiBwb3MgPj0gMDoKICAgICAgICAgICAgICAgICAgICBlbmRwb3MgPSBwb3MgKyBsZW4oc2VsZi5fcmVhZG5sKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICBpZiBsaW1pdCA+PSAwIGFuZCBsZW4obGluZSkgPj0gbGltaXQ6CiAgICAgICAgICAgICAgICBlbmRwb3MgPSBsaW1pdCAgIyByZWFjaGVkIGxlbmd0aCBsaW1pdAogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICMgTm8gbGluZSBlbmRpbmcgc2VlbiB5ZXQgLSBnZXQgbW9yZSBkYXRhJwogICAgICAgICAgICB3aGlsZSBzZWxmLl9yZWFkX2NodW5rKCk6CiAgICAgICAgICAgICAgICBpZiBzZWxmLl9kZWNvZGVkX2NoYXJzOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGlmIHNlbGYuX2RlY29kZWRfY2hhcnM6CiAgICAgICAgICAgICAgICBsaW5lICs9IHNlbGYuX2dldF9kZWNvZGVkX2NoYXJzKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMgZW5kIG9mIGZpbGUKICAgICAgICAgICAgICAgIHNlbGYuX3NldF9kZWNvZGVkX2NoYXJzKCcnKQogICAgICAgICAgICAgICAgc2VsZi5fc25hcHNob3QgPSBOb25lCiAgICAgICAgICAgICAgICByZXR1cm4gbGluZQoKICAgICAgICBpZiBsaW1pdCA+PSAwIGFuZCBlbmRwb3MgPiBsaW1pdDoKICAgICAgICAgICAgZW5kcG9zID0gbGltaXQgICMgZG9uJ3QgZXhjZWVkIGxpbWl0CgogICAgICAgICMgUmV3aW5kIF9kZWNvZGVkX2NoYXJzIHRvIGp1c3QgYWZ0ZXIgdGhlIGxpbmUgZW5kaW5nIHdlIGZvdW5kLgogICAgICAgIHNlbGYuX3Jld2luZF9kZWNvZGVkX2NoYXJzKGxlbihsaW5lKSAtIGVuZHBvcykKICAgICAgICByZXR1cm4gbGluZVs6ZW5kcG9zXQoKICAgICNAcHJvcGVydHkKICAgIGRlZiBuZXdsaW5lcyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fZGVjb2Rlci5uZXdsaW5lcyBpZiBzZWxmLl9kZWNvZGVyIGVsc2UgTm9uZQoKCmNsYXNzIFN0cmluZ0lPKFRleHRJT1dyYXBwZXIpOgogICAgIyJUZXh0IEkvTyBpbXBsZW1lbnRhdGlvbiB1c2luZyBhbiBpbi1tZW1vcnkgYnVmZmVyLgoKICAgICNUaGUgaW5pdGlhbF92YWx1ZSBhcmd1bWVudCBzZXRzIHRoZSB2YWx1ZSBvZiBvYmplY3QuICBUaGUgbmV3bGluZQogICAgI2FyZ3VtZW50IGlzIGxpa2UgdGhlIG9uZSBvZiBUZXh0SU9XcmFwcGVyJ3MgY29uc3RydWN0b3IuCiAgICAjIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbml0aWFsX3ZhbHVlPSIiLCBuZXdsaW5lPSJcbiIpOgogICAgICAgICNzdXBlcihTdHJpbmdJTywgc2VsZikuX19pbml0X18oQnl0ZXNJTygpLCAgICAjZml4bWUKICAgICAgICBUZXh0SU9XcmFwcGVyLl9faW5pdF9fKHNlbGYsIEJ5dGVzSU8oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc9InV0Zi04IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzPSJzdHJpY3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdsaW5lPW5ld2xpbmUpCiAgICAgICAgIyBJc3N1ZSAjNTY0NTogbWFrZSB1bml2ZXJzYWwgbmV3bGluZXMgc2VtYW50aWNzIHRoZSBzYW1lIGFzIGluIHRoZQogICAgICAgICMgQyB2ZXJzaW9uLCBldmVuIHVuZGVyIFdpbmRvd3MuCiAgICAgICAgaWYgbmV3bGluZSBpcyBOb25lOgogICAgICAgICAgICBzZWxmLl93cml0ZXRyYW5zbGF0ZSA9IEZhbHNlCiAgICAgICAgaWYgaW5pdGlhbF92YWx1ZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoaW5pdGlhbF92YWx1ZSwgc3RyKToKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW5pdGlhbF92YWx1ZSBtdXN0IGJlIHN0ciBvciBOb25lLCBub3QgezB9IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JtYXQodHlwZShpbml0aWFsX3ZhbHVlKS5fX25hbWVfXykpCiAgICAgICAgICAgICAgICBpbml0aWFsX3ZhbHVlID0gc3RyKGluaXRpYWxfdmFsdWUpCiAgICAgICAgICAgIHNlbGYud3JpdGUoaW5pdGlhbF92YWx1ZSkKICAgICAgICAgICAgc2VsZi5zZWVrKDApCgogICAgZGVmIGdldHZhbHVlKHNlbGYpOgogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlci5nZXR2YWx1ZSgpLmRlY29kZShzZWxmLl9lbmNvZGluZywgc2VsZi5fZXJyb3JzKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICAjIFRleHRJT1dyYXBwZXIgdGVsbHMgdGhlIGVuY29kaW5nIGluIGl0cyByZXByLiBJbiBTdHJpbmdJTywKICAgICAgICAjIHRoYXQncyBhIGltcGxlbWVudGF0aW9uIGRldGFpbC4KICAgICAgICByZXR1cm4gb2JqZWN0Ll9fcmVwcl9fKHNlbGYpCgogICAgI0Bwcm9wZXJ0eQogICAgZGVmIGVycm9ycyhzZWxmKToKICAgICAgICByZXR1cm4gTm9uZQoKICAgICNAcHJvcGVydHkKICAgIGRlZiBlbmNvZGluZyhzZWxmKToKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBkZXRhY2goc2VsZik6CiAgICAgICAgIyBUaGlzIGRvZXNuJ3QgbWFrZSBzZW5zZSBvbiBTdHJpbmdJTy4KICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgiZGV0YWNoIikK',
'/Lib/_functools.py':'ZGVmIHBhcnRpYWwoZnVuYywgKmFyZ3MsICoqa2V5d29yZHMpOgogICAgZGVmIG5ld2Z1bmMoKmZhcmdzLCAqKmZrZXl3b3Jkcyk6CiAgICAgICAgbmV3a2V5d29yZHMgPSBrZXl3b3Jkcy5jb3B5KCkKICAgICAgICBuZXdrZXl3b3Jkcy51cGRhdGUoZmtleXdvcmRzKQogICAgICAgIHJldHVybiBmdW5jKCooYXJncyArIGZhcmdzKSwgKipuZXdrZXl3b3JkcykKICAgIG5ld2Z1bmMuZnVuYyA9IGZ1bmMKICAgIG5ld2Z1bmMuYXJncyA9IGFyZ3MKICAgIG5ld2Z1bmMua2V5d29yZHMgPSBrZXl3b3JkcwogICAgcmV0dXJuIG5ld2Z1bmMKCmRlZiByZWR1Y2UoZnVuYyxpdGVyYWJsZSxpbml0aWFsaXplcj1Ob25lKToKICAgIGFyZ3MgPSBpdGVyKGl0ZXJhYmxlKQogICAgaWYgaW5pdGlhbGl6ZXIgaXMgbm90IE5vbmU6CiAgICAgICAgcmVzID0gaW5pdGlhbGl6ZXIKICAgIGVsc2U6CiAgICAgICAgcmVzID0gbmV4dChhcmcpCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzID0gZnVuYyhyZXMsbmV4dChhcmdzKSkKICAgICAgICBleGNlcHQgU3RvcEl0ZXJhdGlvbjoKICAgICAgICAgICAgcmV0dXJuIHJlcwo=',
'/Lib/fnmatch.py':'IiIiRmlsZW5hbWUgbWF0Y2hpbmcgd2l0aCBzaGVsbCBwYXR0ZXJucy4NCg0KZm5tYXRjaChGSUxFTkFNRSwgUEFUVEVSTikgbWF0Y2hlcyBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsIGNvbnZlbnRpb24uDQpmbm1hdGNoY2FzZShGSUxFTkFNRSwgUEFUVEVSTikgYWx3YXlzIHRha2VzIGNhc2UgaW4gYWNjb3VudC4NCg0KVGhlIGZ1bmN0aW9ucyBvcGVyYXRlIGJ5IHRyYW5zbGF0aW5nIHRoZSBwYXR0ZXJuIGludG8gYSByZWd1bGFyDQpleHByZXNzaW9uLiAgVGhleSBjYWNoZSB0aGUgY29tcGlsZWQgcmVndWxhciBleHByZXNzaW9ucyBmb3Igc3BlZWQuDQoNClRoZSBmdW5jdGlvbiB0cmFuc2xhdGUoUEFUVEVSTikgcmV0dXJucyBhIHJlZ3VsYXIgZXhwcmVzc2lvbg0KY29ycmVzcG9uZGluZyB0byBQQVRURVJOLiAgKEl0IGRvZXMgbm90IGNvbXBpbGUgaXQuKQ0KIiIiDQppbXBvcnQgb3MNCmltcG9ydCBwb3NpeHBhdGgNCmltcG9ydCByZQ0KaW1wb3J0IGZ1bmN0b29scw0KDQpfX2FsbF9fID0gWyJmaWx0ZXIiLCAiZm5tYXRjaCIsICJmbm1hdGNoY2FzZSIsICJ0cmFuc2xhdGUiXQ0KDQpkZWYgZm5tYXRjaChuYW1lLCBwYXQpOg0KICAgICIiIlRlc3Qgd2hldGhlciBGSUxFTkFNRSBtYXRjaGVzIFBBVFRFUk4uDQoNCiAgICBQYXR0ZXJucyBhcmUgVW5peCBzaGVsbCBzdHlsZToNCg0KICAgICogICAgICAgbWF0Y2hlcyBldmVyeXRoaW5nDQogICAgPyAgICAgICBtYXRjaGVzIGFueSBzaW5nbGUgY2hhcmFjdGVyDQogICAgW3NlcV0gICBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgaW4gc2VxDQogICAgWyFzZXFdICBtYXRjaGVzIGFueSBjaGFyIG5vdCBpbiBzZXENCg0KICAgIEFuIGluaXRpYWwgcGVyaW9kIGluIEZJTEVOQU1FIGlzIG5vdCBzcGVjaWFsLg0KICAgIEJvdGggRklMRU5BTUUgYW5kIFBBVFRFUk4gYXJlIGZpcnN0IGNhc2Utbm9ybWFsaXplZA0KICAgIGlmIHRoZSBvcGVyYXRpbmcgc3lzdGVtIHJlcXVpcmVzIGl0Lg0KICAgIElmIHlvdSBkb24ndCB3YW50IHRoaXMsIHVzZSBmbm1hdGNoY2FzZShGSUxFTkFNRSwgUEFUVEVSTikuDQogICAgIiIiDQogICAgbmFtZSA9IG9zLnBhdGgubm9ybWNhc2UobmFtZSkNCiAgICBwYXQgPSBvcy5wYXRoLm5vcm1jYXNlKHBhdCkNCiAgICByZXR1cm4gZm5tYXRjaGNhc2UobmFtZSwgcGF0KQ0KDQpAZnVuY3Rvb2xzLmxydV9jYWNoZShtYXhzaXplPTI1MCwgdHlwZWQ9VHJ1ZSkNCmRlZiBfY29tcGlsZV9wYXR0ZXJuKHBhdCk6DQogICAgaWYgaXNpbnN0YW5jZShwYXQsIGJ5dGVzKToNCiAgICAgICAgcGF0X3N0ciA9IHN0cihwYXQsICdJU08tODg1OS0xJykNCiAgICAgICAgcmVzX3N0ciA9IHRyYW5zbGF0ZShwYXRfc3RyKQ0KICAgICAgICByZXMgPSBieXRlcyhyZXNfc3RyLCAnSVNPLTg4NTktMScpDQogICAgZWxzZToNCiAgICAgICAgcmVzID0gdHJhbnNsYXRlKHBhdCkNCiAgICByZXR1cm4gcmUuY29tcGlsZShyZXMpLm1hdGNoDQoNCmRlZiBmaWx0ZXIobmFtZXMsIHBhdCk6DQogICAgIiIiUmV0dXJuIHRoZSBzdWJzZXQgb2YgdGhlIGxpc3QgTkFNRVMgdGhhdCBtYXRjaCBQQVQuIiIiDQogICAgcmVzdWx0ID0gW10NCiAgICBwYXQgPSBvcy5wYXRoLm5vcm1jYXNlKHBhdCkNCiAgICBtYXRjaCA9IF9jb21waWxlX3BhdHRlcm4ocGF0KQ0KICAgIGlmIG9zLnBhdGggaXMgcG9zaXhwYXRoOg0KICAgICAgICAjIG5vcm1jYXNlIG9uIHBvc2l4IGlzIE5PUC4gT3B0aW1pemUgaXQgYXdheSBmcm9tIHRoZSBsb29wLg0KICAgICAgICBmb3IgbmFtZSBpbiBuYW1lczoNCiAgICAgICAgICAgIGlmIG1hdGNoKG5hbWUpOg0KICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobmFtZSkNCiAgICBlbHNlOg0KICAgICAgICBmb3IgbmFtZSBpbiBuYW1lczoNCiAgICAgICAgICAgIGlmIG1hdGNoKG9zLnBhdGgubm9ybWNhc2UobmFtZSkpOg0KICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobmFtZSkNCiAgICByZXR1cm4gcmVzdWx0DQoNCmRlZiBmbm1hdGNoY2FzZShuYW1lLCBwYXQpOg0KICAgICIiIlRlc3Qgd2hldGhlciBGSUxFTkFNRSBtYXRjaGVzIFBBVFRFUk4sIGluY2x1ZGluZyBjYXNlLg0KDQogICAgVGhpcyBpcyBhIHZlcnNpb24gb2YgZm5tYXRjaCgpIHdoaWNoIGRvZXNuJ3QgY2FzZS1ub3JtYWxpemUNCiAgICBpdHMgYXJndW1lbnRzLg0KICAgICIiIg0KICAgIG1hdGNoID0gX2NvbXBpbGVfcGF0dGVybihwYXQpDQogICAgcmV0dXJuIG1hdGNoKG5hbWUpIGlzIG5vdCBOb25lDQoNCg0KZGVmIHRyYW5zbGF0ZShwYXQpOg0KICAgICIiIlRyYW5zbGF0ZSBhIHNoZWxsIFBBVFRFUk4gdG8gYSByZWd1bGFyIGV4cHJlc3Npb24uDQoNCiAgICBUaGVyZSBpcyBubyB3YXkgdG8gcXVvdGUgbWV0YS1jaGFyYWN0ZXJzLg0KICAgICIiIg0KDQogICAgaSwgbiA9IDAsIGxlbihwYXQpDQogICAgcmVzID0gJycNCiAgICB3aGlsZSBpIDwgbjoNCiAgICAgICAgYyA9IHBhdFtpXQ0KICAgICAgICBpID0gaSsxDQogICAgICAgIGlmIGMgPT0gJyonOg0KICAgICAgICAgICAgcmVzID0gcmVzICsgJy4qJw0KICAgICAgICBlbGlmIGMgPT0gJz8nOg0KICAgICAgICAgICAgcmVzID0gcmVzICsgJy4nDQogICAgICAgIGVsaWYgYyA9PSAnWyc6DQogICAgICAgICAgICBqID0gaQ0KICAgICAgICAgICAgaWYgaiA8IG4gYW5kIHBhdFtqXSA9PSAnISc6DQogICAgICAgICAgICAgICAgaiA9IGorMQ0KICAgICAgICAgICAgaWYgaiA8IG4gYW5kIHBhdFtqXSA9PSAnXSc6DQogICAgICAgICAgICAgICAgaiA9IGorMQ0KICAgICAgICAgICAgd2hpbGUgaiA8IG4gYW5kIHBhdFtqXSAhPSAnXSc6DQogICAgICAgICAgICAgICAgaiA9IGorMQ0KICAgICAgICAgICAgaWYgaiA+PSBuOg0KICAgICAgICAgICAgICAgIHJlcyA9IHJlcyArICdcXFsnDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHN0dWZmID0gcGF0W2k6al0ucmVwbGFjZSgnXFwnLCdcXFxcJykNCiAgICAgICAgICAgICAgICBpID0gaisxDQogICAgICAgICAgICAgICAgaWYgc3R1ZmZbMF0gPT0gJyEnOg0KICAgICAgICAgICAgICAgICAgICBzdHVmZiA9ICdeJyArIHN0dWZmWzE6XQ0KICAgICAgICAgICAgICAgIGVsaWYgc3R1ZmZbMF0gPT0gJ14nOg0KICAgICAgICAgICAgICAgICAgICBzdHVmZiA9ICdcXCcgKyBzdHVmZg0KICAgICAgICAgICAgICAgIHJlcyA9ICclc1slc10nICUgKHJlcywgc3R1ZmYpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXMgPSByZXMgKyByZS5lc2NhcGUoYykNCiAgICByZXR1cm4gcmVzICsgJ1xaKD9tcyknDQo=',
'/Lib/errno.py':'IlRoaXMgbW9kdWxlIG1ha2VzIGF2YWlsYWJsZSBzdGFuZGFyZCBlcnJubyBzeXN0ZW0gc3ltYm9scy5cblxuVGhlIHZhbHVlIG9mIGVhY2ggc3ltYm9sIGlzIHRoZSBjb3JyZXNwb25kaW5nIGludGVnZXIgdmFsdWUsXG5lLmcuLCBvbiBtb3N0IHN5c3RlbXMsIGVycm5vLkVOT0VOVCBlcXVhbHMgdGhlIGludGVnZXIgMi5cblxuVGhlIGRpY3Rpb25hcnkgZXJybm8uZXJyb3Jjb2RlIG1hcHMgbnVtZXJpYyBjb2RlcyB0byBzeW1ib2wgbmFtZXMsXG5lLmcuLCBlcnJuby5lcnJvcmNvZGVbMl0gY291bGQgYmUgdGhlIHN0cmluZyAnRU5PRU5UJy5cblxuU3ltYm9scyB0aGF0IGFyZSBub3QgcmVsZXZhbnQgdG8gdGhlIHVuZGVybHlpbmcgc3lzdGVtIGFyZSBub3QgZGVmaW5lZC5cblxuVG8gbWFwIGVycm9yIGNvZGVzIHRvIGVycm9yIG1lc3NhZ2VzLCB1c2UgdGhlIGZ1bmN0aW9uIG9zLnN0cmVycm9yKCksXG5lLmcuIG9zLnN0cmVycm9yKDIpIGNvdWxkIHJldHVybiAnTm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeScuIgoKRTJCSUcgPSA3CkVBQ0NFUyA9IDEzCkVBRERSSU5VU0UgPSA5OApFQUREUk5PVEFWQUlMID0gOTkKRUFEViA9IDY4CkVBRk5PU1VQUE9SVCA9IDk3CkVBR0FJTiA9IDExCkVBTFJFQURZID0gMTE0CkVCQURFID0gNTIKRUJBREYgPSA5CkVCQURGRCA9IDc3CkVCQURNU0cgPSA3NApFQkFEUiA9IDUzCkVCQURSUUMgPSA1NgpFQkFEU0xUID0gNTcKRUJGT05UID0gNTkKRUJVU1kgPSAxNgpFQ0hJTEQgPSAxMApFQ0hSTkcgPSA0NApFQ09NTSA9IDcwCkVDT05OQUJPUlRFRCA9IDEwMwpFQ09OTlJFRlVTRUQgPSAxMTEKRUNPTk5SRVNFVCA9IDEwNApFREVBRExLID0gMzUKRURFQURMT0NLID0gMzUKRURFU1RBRERSUkVRID0gODkKRURPTSA9IDMzCkVET1RET1QgPSA3MwpFRFFVT1QgPSAxMjIKRUVYSVNUID0gMTcKRUZBVUxUID0gMTQKRUZCSUcgPSAyNwpFSE9TVERPV04gPSAxMTIKRUhPU1RVTlJFQUNIID0gMTEzCkVJRFJNID0gNDMKRUlMU0VRID0gODQKRUlOUFJPR1JFU1MgPSAxMTUKRUlOVFIgPSA0CkVJTlZBTCA9IDIyCkVJTyA9IDUKRUlTQ09OTiA9IDEwNgpFSVNESVIgPSAyMQpFSVNOQU0gPSAxMjAKRUwySExUID0gNTEKRUwyTlNZTkMgPSA0NQpFTDNITFQgPSA0NgpFTDNSU1QgPSA0NwpFTElCQUNDID0gNzkKRUxJQkJBRCA9IDgwCkVMSUJFWEVDID0gODMKRUxJQk1BWCA9IDgyCkVMSUJTQ04gPSA4MQpFTE5STkcgPSA0OApFTE9PUCA9IDQwCkVNRklMRSA9IDI0CkVNTElOSyA9IDMxCkVNU0dTSVpFID0gOTAKRU1VTFRJSE9QID0gNzIKRU5BTUVUT09MT05HID0gMzYKRU5BVkFJTCA9IDExOQpFTkVURE9XTiA9IDEwMApFTkVUUkVTRVQgPSAxMDIKRU5FVFVOUkVBQ0ggPSAxMDEKRU5GSUxFID0gMjMKRU5PQU5PID0gNTUKRU5PQlVGUyA9IDEwNQpFTk9DU0kgPSA1MApFTk9EQVRBID0gNjEKRU5PREVWID0gMTkKRU5PRU5UID0gMgpFTk9FWEVDID0gOApFTk9MQ0sgPSAzNwpFTk9MSU5LID0gNjcKRU5PTUVNID0gMTIKRU5PTVNHID0gNDIKRU5PTkVUID0gNjQKRU5PUEtHID0gNjUKRU5PUFJPVE9PUFQgPSA5MgpFTk9TUEMgPSAyOApFTk9TUiA9IDYzCkVOT1NUUiA9IDYwCkVOT1NZUyA9IDM4CkVOT1RCTEsgPSAxNQpFTk9UQ09OTiA9IDEwNwpFTk9URElSID0gMjAKRU5PVEVNUFRZID0gMzkKRU5PVE5BTSA9IDExOApFTk9UU09DSyA9IDg4CkVOT1RUWSA9IDI1CkVOT1RVTklRID0gNzYKRU5YSU8gPSA2CkVPUE5PVFNVUFAgPSA5NQpFT1ZFUkZMT1cgPSA3NQpFUEVSTSA9IDEKRVBGTk9TVVBQT1JUID0gOTYKRVBJUEUgPSAzMgpFUFJPVE8gPSA3MQpFUFJPVE9OT1NVUFBPUlQgPSA5MwpFUFJPVE9UWVBFID0gOTEKRVJBTkdFID0gMzQKRVJFTUNIRyA9IDc4CkVSRU1PVEUgPSA2NgpFUkVNT1RFSU8gPSAxMjEKRVJFU1RBUlQgPSA4NQpFUk9GUyA9IDMwCkVTSFVURE9XTiA9IDEwOApFU09DS1ROT1NVUFBPUlQgPSA5NApFU1BJUEUgPSAyOQpFU1JDSCA9IDMKRVNSTU5UID0gNjkKRVNUQUxFID0gMTE2CkVTVFJQSVBFID0gODYKRVRJTUUgPSA2MgpFVElNRURPVVQgPSAxMTAKRVRPT01BTllSRUZTID0gMTA5CkVUWFRCU1kgPSAyNgpFVUNMRUFOID0gMTE3CkVVTkFUQ0ggPSA0OQpFVVNFUlMgPSA4NwpFV09VTERCTE9DSyA9IDExCkVYREVWID0gMTgKRVhGVUxMID0gNTQKIyBlcnJvcmNvZGUK',
'/Lib/itertools.py':'aW1wb3J0IG9wZXJhdG9yCgpjbGFzcyBhY2N1bXVsYXRlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZXJhYmxlLCBmdW5jID0gb3BlcmF0b3IuYWRkKToKICAgICAgICBzZWxmLml0ID0gaXRlcihpdGVyYWJsZSkKICAgICAgICBzZWxmLl90b3RhbCA9IE5vbmUKICAgICAgICBzZWxmLmZ1bmMgPSBmdW5jCiAgICAgICAgCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYuX3RvdGFsOgogICAgICAgICAgICBzZWxmLl90b3RhbCA9IG5leHQoc2VsZi5pdCkKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3RvdGFsCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZWxlbWVudCA9IG5leHQoc2VsZi5pdCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5fdG90YWwgPSBzZWxmLmZ1bmMoc2VsZi5fdG90YWwsIGVsZW1lbnQpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidW5zdXBwb3J0ZWQgb3BlcmFuZCB0eXBlIikKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3RvdGFsCiAgICAgICAgICAgICAgICAKIyMgQWRhcHRlZCBmcm9tOgojIyBodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTM0CmNsYXNzIGNoYWluOgogICAgZGVmIF9faW5pdF9fKHNlbGYsICppdGVyYWJsZXMpOgogICAgICAgIHNlbGYuX2l0ZXJhYmxlc19pdGVyID0gaXRlcihtYXAoaXRlciwgaXRlcmFibGVzKSkKICAgICAgICAjIGxpdHRsZSB0cmljayBmb3IgdGhlIGZpcnN0IGNoYWluLl9fbmV4dF9fKCkgY2FsbAogICAgICAgIHNlbGYuX2N1cl9pdGVyYWJsZV9pdGVyID0gaXRlcihbXSkKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKICAgIAogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KHNlbGYuX2N1cl9pdGVyYWJsZV9pdGVyKQogICAgICAgICAgICBleGNlcHQgU3RvcEl0ZXJhdGlvbjoKICAgICAgICAgICAgICAgIHNlbGYuX2N1cl9pdGVyYWJsZV9pdGVyID0gbmV4dChzZWxmLl9pdGVyYWJsZXNfaXRlcikKICAgIAogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbV9pdGVyYWJsZShjbHMsIGl0ZXJhYmxlKToKICAgICAgICBmb3IgaXQgaW4gaXRlcmFibGU6CiAgICAgICAgICAgIGZvciBlbGVtZW50IGluIGl0OgogICAgICAgICAgICAgICAgeWllbGQgZWxlbWVudAogICAgICAgICAgICAgICAgCmNsYXNzIGNvbWJpbmF0aW9uczoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZSwgcik6CiAgICAgICAgc2VsZi5wb29sID0gdHVwbGUoaXRlcmFibGUpCiAgICAgICAgc2VsZi5uID0gbGVuKHNlbGYucG9vbCkKICAgICAgICBzZWxmLnIgPSByCiAgICAgICAgc2VsZi5pbmRpY2VzID0gbGlzdChyYW5nZShzZWxmLnIpKQogICAgICAgIHNlbGYuemVybyA9IEZhbHNlCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYuciA+IHNlbGYubjoKICAgICAgICAgICAgcmFpc2UgU3RvcEl0ZXJhdGlvbgogICAgICAgIGlmIG5vdCBzZWxmLnplcm86CiAgICAgICAgICAgIHNlbGYuemVybyA9IFRydWUKICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYucG9vbFtpXSBmb3IgaSBpbiBzZWxmLmluZGljZXMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZm9yIGkgaW4gcmV2ZXJzZWQocmFuZ2Uoc2VsZi5yKSk6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5pbmRpY2VzW2ldICE9IGkgKyBzZWxmLm4gLSBzZWxmLnI6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBzZWxmLmluZGljZXNbaV0gKz0gMQogICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UoaSsxLCBzZWxmLnIpOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kaWNlc1tqXSA9IHNlbGYuaW5kaWNlc1tqLTFdICsgMQogICAgICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYucG9vbFtpXSBmb3IgaSBpbiBzZWxmLmluZGljZXMpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICAgICAgICAgIApjbGFzcyBjb21iaW5hdGlvbnNfd2l0aF9yZXBsYWNlbWVudDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZSwgcik6CiAgICAgICAgc2VsZi5wb29sID0gdHVwbGUoaXRlcmFibGUpCiAgICAgICAgc2VsZi5uID0gbGVuKHNlbGYucG9vbCkKICAgICAgICBzZWxmLnIgPSByCiAgICAgICAgc2VsZi5pbmRpY2VzID0gWzBdICogc2VsZi5yCiAgICAgICAgc2VsZi56ZXJvID0gRmFsc2UKICAgICAgICAKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgogICAgCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYubiBhbmQgc2VsZi5yOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgaWYgbm90IHNlbGYuemVybzoKICAgICAgICAgICAgc2VsZi56ZXJvID0gVHJ1ZQogICAgICAgICAgICByZXR1cm4gdHVwbGUoc2VsZi5wb29sW2ldIGZvciBpIGluIHNlbGYuaW5kaWNlcykKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmb3IgaSBpbiByZXZlcnNlZChyYW5nZShzZWxmLnIpKToKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLmluZGljZXNbaV0gIT0gc2VsZi5uIC0gMToKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIHNlbGYuaW5kaWNlc1tpOl0gPSBbc2VsZi5pbmRpY2VzW2ldICsgMV0gKiAoc2VsZi5yIC0gaSkKICAgICAgICAgICAgICAgIHJldHVybiB0dXBsZShzZWxmLnBvb2xbaV0gZm9yIGkgaW4gc2VsZi5pbmRpY2VzKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgICAgICAgICAKIyMgTGl0ZXJhbGx5IGNvcGllZCBmcm9tCiMjaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvYzFhYTc0YzA2ZTg2L2xpYl9weXB5L2l0ZXJ0b29scy5weSNjbC02MyAKY2xhc3MgY29tcHJlc3M6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZGF0YSwgc2VsZWN0b3JzKToKICAgICAgICBzZWxmLmRhdGEgPSBpdGVyKGRhdGEpCiAgICAgICAgc2VsZi5zZWxlY3RvcnMgPSBpdGVyKHNlbGVjdG9ycykKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgbmV4dF9pdGVtID0gbmV4dChzZWxmLmRhdGEpCiAgICAgICAgICAgIG5leHRfc2VsZWN0b3IgPSBuZXh0KHNlbGYuc2VsZWN0b3JzKQogICAgICAgICAgICBpZiBib29sKG5leHRfc2VsZWN0b3IpOgogICAgICAgICAgICAgICAgcmV0dXJuIG5leHRfaXRlbQogICAgICAgICAgICAgICAgCiMjIEFkYXB0ZWQgZnJvbQojI2h0dHBzOi8vYml0YnVja2V0Lm9yZy9weXB5L3B5cHkvc3JjL2MxYWE3NGMwNmU4Ni9saWJfcHlweS9pdGVydG9vbHMucHkjY2wtNzkKIyMgSSBtaW1pY2tlZCB0aGUgPiBweXRob24zLjEgYmVoYXZpb3IKY2xhc3MgY291bnQ6CiAgICAiIiIKICAgIElucHV0IGlzIGFuIGludCBvciBhIGZsb2F0LiBUaGUgb3JpZ2luYWwgUHl0aG9uIDMgaW1wbGVtZW50YXRpb24KICAgIGluY2x1ZGVzIGFsc28gY29tcGxleCBudW1iZXJzLi4uIGJ1dCBpdCBzdGlsbCBpcyBub3QgaW1wbGVtZW50ZWQgCiAgICBpbiBCcnl0aG9uIGFzIGNvbXBsZXggdHlwZSBpcyBOb3RJbXBsZW1lbnRlZAogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RhcnQgPSAwLCBzdGVwID0gMSk6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc3RhcnQsIChpbnQsIGZsb2F0KSk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignYSBudW1iZXIgaXMgcmVxdWlyZWQnKQogICAgICAgIHNlbGYudGltZXMgPSBzdGFydCAtIHN0ZXAKICAgICAgICBzZWxmLnN0ZXAgPSBzdGVwCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHNlbGYudGltZXMgKz0gc2VsZi5zdGVwCiAgICAgICAgcmV0dXJuIHNlbGYudGltZXMKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICdjb3VudCglZCknICUgKHNlbGYudGltZXMgKyBzZWxmLnN0ZXApCgojIyBMaXRlcmFsbHkgY29waWVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTExMiAgICAgICAgCmNsYXNzIGN5Y2xlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZXJhYmxlKToKICAgICAgICBzZWxmLl9jdXJfaXRlciA9IGl0ZXIoaXRlcmFibGUpCiAgICAgICAgc2VsZi5fc2F2ZWQgPSBbXQogICAgICAgIHNlbGYuX211c3Rfc2F2ZSA9IFRydWUKICAgICAgICAKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG5leHRfZWx0ID0gbmV4dChzZWxmLl9jdXJfaXRlcikKICAgICAgICAgICAgaWYgc2VsZi5fbXVzdF9zYXZlOgogICAgICAgICAgICAgICAgc2VsZi5fc2F2ZWQuYXBwZW5kKG5leHRfZWx0KQogICAgICAgIGV4Y2VwdCBTdG9wSXRlcmF0aW9uOgogICAgICAgICAgICBzZWxmLl9jdXJfaXRlciA9IGl0ZXIoc2VsZi5fc2F2ZWQpCiAgICAgICAgICAgIG5leHRfZWx0ID0gbmV4dChzZWxmLl9jdXJfaXRlcikKICAgICAgICAgICAgc2VsZi5fbXVzdF9zYXZlID0gRmFsc2UKICAgICAgICByZXR1cm4gbmV4dF9lbHQKICAgICAgICAKIyMgTGl0ZXJhbGx5IGNvcGllZCBmcm9tCiMjaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvYzFhYTc0YzA2ZTg2L2xpYl9weXB5L2l0ZXJ0b29scy5weSNjbC0xNDkKY2xhc3MgZHJvcHdoaWxlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHByZWRpY2F0ZSwgaXRlcmFibGUpOgogICAgICAgIHNlbGYuX3ByZWRpY2F0ZSA9IHByZWRpY2F0ZQogICAgICAgIHNlbGYuX2l0ZXIgPSBpdGVyKGl0ZXJhYmxlKQogICAgICAgIHNlbGYuX2Ryb3BwZWQgPSBGYWxzZQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICB2YWx1ZSA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICBpZiBzZWxmLl9kcm9wcGVkOgogICAgICAgICAgICByZXR1cm4gdmFsdWUKICAgICAgICB3aGlsZSBzZWxmLl9wcmVkaWNhdGUodmFsdWUpOgogICAgICAgICAgICB2YWx1ZSA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICBzZWxmLl9kcm9wcGVkID0gVHJ1ZQogICAgICAgIHJldHVybiB2YWx1ZQogICAgICAgIAojIyBBZGFwdGVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTI2MQpjbGFzcyBmaWx0ZXJmYWxzZToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwcmVkaWNhdGUsIGl0ZXJhYmxlKToKICAgICAgICAjIE1ha2Ugc3VyZSBpdGVyYWJsZSAqSVMqIGl0ZXJhYmxlCiAgICAgICAgc2VsZi5faXRlciA9IGl0ZXIoaXRlcmFibGUpCiAgICAgICAgaWYgcHJlZGljYXRlIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuX3ByZWRpY2F0ZSA9IGJvb2wKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9wcmVkaWNhdGUgPSBwcmVkaWNhdGUKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICBuZXh0X2VsdCA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5fcHJlZGljYXRlKG5leHRfZWx0KToKICAgICAgICAgICAgICAgIHJldHVybiBuZXh0X2VsdAogICAgICAgICAgICBuZXh0X2VsdCA9IG5leHQoc2VsZi5faXRlcikKCmNsYXNzIGdyb3VwYnk6CiAgICAjIyBUTy1ETwogICAgcGFzcwogICAgICAgICAgCiMjIGFkYXB0ZWQgZnJvbQojI2h0dHBzOi8vYml0YnVja2V0Lm9yZy9weXB5L3B5cHkvc3JjL2MxYWE3NGMwNmU4Ni9saWJfcHlweS9pdGVydG9vbHMucHkjY2wtMzIzCmNsYXNzIGlzbGljZToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZSwgKmFyZ3MpOgogICAgICAgIHMgPSBzbGljZSgqYXJncykKICAgICAgICBzZWxmLnN0YXJ0LCBzZWxmLnN0b3AsIHNlbGYuc3RlcCA9IHMuc3RhcnQgb3IgMCwgcy5zdG9wLCBzLnN0ZXAKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShzZWxmLnN0YXJ0LCBpbnQpOgogICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlN0YXJ0IGFyZ3VtZW50IG11c3QgYmUgYW4gaW50ZWdlciIpCiAgICAgICAgaWYgc2VsZi5zdG9wICE9IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKHNlbGYuc3RvcCwgaW50KToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiU3RvcCBhcmd1bWVudCBtdXN0IGJlIGFuIGludGVnZXIgb3IgTm9uZSIpCiAgICAgICAgaWYgc2VsZi5zdGVwIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuc3RlcCA9IDEKICAgICAgICBpZiBzZWxmLnN0YXJ0PDAgb3IgKHNlbGYuc3RvcCAhPSBOb25lIGFuZCBzZWxmLnN0b3A8MAogICAgICAgICAgICkgb3Igc2VsZi5zdGVwPD0wOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbmRpY2VzIGZvciBpc2xpY2UoKSBtdXN0IGJlIHBvc2l0aXZlIikKICAgICAgICBzZWxmLml0ID0gaXRlcihpdGVyYWJsZSkKICAgICAgICBzZWxmLmRvbmV4dCA9IE5vbmUKICAgICAgICBzZWxmLmNudCA9IDAKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgbmV4dGluZGV4ID0gc2VsZi5zdGFydAogICAgICAgIGlmIHNlbGYuc3RvcCAhPSBOb25lIGFuZCBuZXh0aW5kZXggPj0gc2VsZi5zdG9wOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgd2hpbGUgc2VsZi5jbnQgPD0gbmV4dGluZGV4OgogICAgICAgICAgICBuZXh0aXRlbSA9IG5leHQoc2VsZi5pdCkKICAgICAgICAgICAgc2VsZi5jbnQgKz0gMQogICAgICAgIHNlbGYuc3RhcnQgKz0gc2VsZi5zdGVwIAogICAgICAgIHJldHVybiBuZXh0aXRlbQogICAgICAgIApjbGFzcyBwZXJtdXRhdGlvbnM6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlcmFibGUsIHIgPSBOb25lKToKICAgICAgICBzZWxmLnBvb2wgPSB0dXBsZShpdGVyYWJsZSkKICAgICAgICBzZWxmLm4gPSBsZW4oc2VsZi5wb29sKQogICAgICAgIHNlbGYuciA9IHNlbGYubiBpZiByIGlzIE5vbmUgZWxzZSByCiAgICAgICAgc2VsZi5pbmRpY2VzID0gbGlzdChyYW5nZShzZWxmLm4pKQogICAgICAgIHNlbGYuY3ljbGVzID0gbGlzdChyYW5nZShzZWxmLm4sIHNlbGYubiAtIHIsIC0xKSkKICAgICAgICBzZWxmLnplcm8gPSBGYWxzZQogICAgICAgIHNlbGYuc3RvcCA9IEZhbHNlCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIGluZGljZXMgPSBzZWxmLmluZGljZXMKICAgICAgICBpZiBzZWxmLnIgPiBzZWxmLm46CiAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICBpZiBub3Qgc2VsZi56ZXJvOgogICAgICAgICAgICBzZWxmLnplcm8gPSBUcnVlCiAgICAgICAgICAgIHJldHVybiB0dXBsZShzZWxmLnBvb2xbaV0gZm9yIGkgaW4gaW5kaWNlc1s6c2VsZi5yXSkKICAgICAgICAKICAgICAgICBpID0gc2VsZi5yIC0gMQogICAgICAgIHdoaWxlIGkgPj0gMDoKICAgICAgICAgICAgaiA9IHNlbGYuY3ljbGVzW2ldIC0gMQogICAgICAgICAgICBpZiBqID4gMDoKICAgICAgICAgICAgICAgIHNlbGYuY3ljbGVzW2ldID0gagogICAgICAgICAgICAgICAgaW5kaWNlc1tpXSwgaW5kaWNlc1stal0gPSBpbmRpY2VzWy1qXSwgaW5kaWNlc1tpXQogICAgICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYucG9vbFtpXSBmb3IgaSBpbiBpbmRpY2VzWzpzZWxmLnJdKQogICAgICAgICAgICBzZWxmLmN5Y2xlc1tpXSA9IGxlbihpbmRpY2VzKSAtIGkKICAgICAgICAgICAgbjEgPSBsZW4oaW5kaWNlcykgLSAxCiAgICAgICAgICAgIGFzc2VydCBuMSA+PSAwCiAgICAgICAgICAgIG51bSA9IGluZGljZXNbaV0KICAgICAgICAgICAgZm9yIGsgaW4gcmFuZ2UoaSwgbjEpOgogICAgICAgICAgICAgICAgaW5kaWNlc1trXSA9IGluZGljZXNbaysxXQogICAgICAgICAgICBpbmRpY2VzW24xXSA9IG51bQogICAgICAgICAgICBpIC09IDEKICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCgojIyBhZGFwdGVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTM5MiAgICAgICAgCmNsYXNzIHByb2R1Y3Q6CiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3cpOgogICAgICAgIGlmIGxlbihrdykgPiAxOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInByb2R1Y3QoKSB0YWtlcyBhdCBtb3N0IDEgYXJndW1lbnQgKCVkIGdpdmVuKSIgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbihrdykpCiAgICAgICAgc2VsZi5yZXBlYXQgPSBrdy5nZXQoJ3JlcGVhdCcsIDEpCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc2VsZi5yZXBlYXQsIGludCk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW50ZWdlciBhcmd1bWVudCBleHBlY3RlZCwgZ290ICVzIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZShzZWxmLnJlcGVhdCkpCiAgICAgICAgc2VsZi5nZWFycyA9IFt4IGZvciB4IGluIGFyZ3NdICogc2VsZi5yZXBlYXQKICAgICAgICBzZWxmLm51bV9nZWFycyA9IGxlbihzZWxmLmdlYXJzKQogICAgICAgICMgaW5pdGlhbGl6YXRpb24gb2YgaW5kaWNpZXMgdG8gbG9vcCBvdmVyCiAgICAgICAgc2VsZi5pbmRpY2llcyA9IFsoMCwgbGVuKHNlbGYuZ2VhcnNbeF0pKQogICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gcmFuZ2UoMCwgc2VsZi5udW1fZ2VhcnMpXQogICAgICAgIHNlbGYuY29udCA9IFRydWUKICAgICAgICBzZWxmLnplcm8gPSBGYWxzZQoKICAgIGRlZiByb2xsX2dlYXJzKHNlbGYpOgogICAgICAgICMgU3RhcnRpbmcgZnJvbSB0aGUgZW5kIG9mIHRoZSBnZWFyIGluZGljaWVzIHdvcmsgdG8gdGhlIGZyb250CiAgICAgICAgIyBpbmNyZW1lbnRpbmcgdGhlIGdlYXIgdW50aWwgdGhlIGxpbWl0IGlzIHJlYWNoZWQuIFdoZW4gdGhlIGxpbWl0CiAgICAgICAgIyBpcyByZWFjaGVkIGNhcnJ5IG9wZXJhdGlvbiB0byB0aGUgbmV4dCBnZWFyCiAgICAgICAgc2hvdWxkX2NhcnJ5ID0gVHJ1ZQogICAgICAgIGZvciBuIGluIHJhbmdlKDAsIHNlbGYubnVtX2dlYXJzKToKICAgICAgICAgICAgbnRoX2dlYXIgPSBzZWxmLm51bV9nZWFycyAtIG4gLSAxCiAgICAgICAgICAgIGlmIHNob3VsZF9jYXJyeToKICAgICAgICAgICAgICAgIGNvdW50LCBsaW0gPSBzZWxmLmluZGljaWVzW250aF9nZWFyXQogICAgICAgICAgICAgICAgY291bnQgKz0gMQogICAgICAgICAgICAgICAgaWYgY291bnQgPT0gbGltIGFuZCBudGhfZ2VhciA9PSAwOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY29udCA9IEZhbHNlCiAgICAgICAgICAgICAgICBpZiBjb3VudCA9PSBsaW06CiAgICAgICAgICAgICAgICAgICAgc2hvdWxkX2NhcnJ5ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMAogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzaG91bGRfY2FycnkgPSBGYWxzZQogICAgICAgICAgICAgICAgc2VsZi5pbmRpY2llc1tudGhfZ2Vhcl0gPSAoY291bnQsIGxpbSkgIAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgaWYgc2VsZi56ZXJvOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgaWYgc2VsZi5yZXBlYXQgPiAwOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5jb250OgogICAgICAgICAgICAgICAgcmFpc2UgU3RvcEl0ZXJhdGlvbgogICAgICAgICAgICBsID0gW10KICAgICAgICAgICAgZm9yIHggaW4gcmFuZ2UoMCwgc2VsZi5udW1fZ2VhcnMpOgogICAgICAgICAgICAgICAgaW5kZXgsIGxpbWl0ID0gc2VsZi5pbmRpY2llc1t4XQogICAgICAgICAgICAgICAgbC5hcHBlbmQoc2VsZi5nZWFyc1t4XVtpbmRleF0pCiAgICAgICAgICAgIHNlbGYucm9sbF9nZWFycygpCiAgICAgICAgICAgIHJldHVybiB0dXBsZShsKQogICAgICAgIGVsaWYgc2VsZi5yZXBlYXQgPT0gMDoKICAgICAgICAgICAgc2VsZi56ZXJvID0gVHJ1ZQogICAgICAgICAgICByZXR1cm4gKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJyZXBlYXQgYXJndW1lbnQgY2Fubm90IGJlIG5lZ2F0aXZlIikKICAgICAgICAgICAgCiMjIExpdGVyYWxseSBjb3BpZWQgZnJvbQojI2h0dHBzOi8vYml0YnVja2V0Lm9yZy9weXB5L3B5cHkvc3JjL2MxYWE3NGMwNmU4Ni9saWJfcHlweS9pdGVydG9vbHMucHkjY2wtNDQxCmNsYXNzIHJlcGVhdDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvYmosIHRpbWVzPU5vbmUpOgogICAgICAgIHNlbGYuX29iaiA9IG9iagogICAgICAgIGlmIHRpbWVzIGlzIG5vdCBOb25lOgogICAgICAgICAgICByYW5nZSh0aW1lcykgIyBSYWlzZSBhIFR5cGVFcnJvcgogICAgICAgICAgICBpZiB0aW1lcyA8IDA6CiAgICAgICAgICAgICAgICB0aW1lcyA9IDAKICAgICAgICBzZWxmLl90aW1lcyA9IHRpbWVzCiAgICAgICAgCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgIyBfX25leHRfXygpICpuZWVkKiB0byBkZWNyZW1lbnQgc2VsZi5fdGltZXMgd2hlbiBjb25zdW1lZAogICAgICAgIGlmIHNlbGYuX3RpbWVzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBzZWxmLl90aW1lcyA8PSAwOiAKICAgICAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24oKQogICAgICAgICAgICBzZWxmLl90aW1lcyAtPSAxCiAgICAgICAgcmV0dXJuIHNlbGYuX29iagoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLl90aW1lcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmV0dXJuICdyZXBlYXQoJXIsICVyKScgJSAoc2VsZi5fb2JqLCBzZWxmLl90aW1lcykKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gJ3JlcGVhdCglciknICUgKHNlbGYuX29iaiwpCgogICAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgICAgaWYgc2VsZi5fdGltZXMgPT0gLTEgb3Igc2VsZi5fdGltZXMgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJsZW4oKSBvZiB1bmlzemVkIG9iamVjdCIpCiAgICAgICAgcmV0dXJuIHNlbGYuX3RpbWVzCgojIyBBZGFwdGVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTQ4OQpjbGFzcyBzdGFybWFwKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZnVuY3Rpb24sIGl0ZXJhYmxlKToKICAgICAgICBzZWxmLl9mdW5jID0gZnVuY3Rpb24KICAgICAgICBzZWxmLl9pdGVyID0gaXRlcihpdGVyYWJsZSkKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgdCA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICByZXR1cm4gc2VsZi5fZnVuYygqdCkKICAgICAgICAKIyMgTGl0ZXJhbGx5IGNvcGllZCBmcm9tCiMjaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvYzFhYTc0YzA2ZTg2L2xpYl9weXB5L2l0ZXJ0b29scy5weSNjbC01MjAKY2xhc3MgdGFrZXdoaWxlKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgcHJlZGljYXRlLCBpdGVyYWJsZSk6CiAgICAgICAgc2VsZi5fcHJlZGljYXRlID0gcHJlZGljYXRlCiAgICAgICAgc2VsZi5faXRlciA9IGl0ZXIoaXRlcmFibGUpCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHZhbHVlID0gbmV4dChzZWxmLl9pdGVyKQogICAgICAgIGlmIG5vdCBzZWxmLl9wcmVkaWNhdGUodmFsdWUpOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uKCkKICAgICAgICByZXR1cm4gdmFsdWUKCiMjIEFsbW9zdCBsaXRlcmFsIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTU0NwpjbGFzcyBUZWVEYXRhKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlcmF0b3IpOgogICAgICAgIHNlbGYuZGF0YSA9IFtdCiAgICAgICAgc2VsZi5faXRlciA9IGl0ZXJhdG9yCgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGkpOgogICAgICAgICMgaXRlcmF0ZXMgdW50aWwgJ2knIGlmIG5vdCBkb25lIHlldAogICAgICAgIHdoaWxlIGk+PSBsZW4oc2VsZi5kYXRhKToKICAgICAgICAgICAgc2VsZi5kYXRhLmFwcGVuZChuZXh0KHNlbGYuX2l0ZXIpKQogICAgICAgIHJldHVybiBzZWxmLmRhdGFbaV0KCgpjbGFzcyBUZWVPYmplY3Qob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZT1Ob25lLCB0ZWVfZGF0YT1Ob25lKToKICAgICAgICBpZiB0ZWVfZGF0YToKICAgICAgICAgICAgc2VsZi50ZWVfZGF0YSA9IHRlZV9kYXRhCiAgICAgICAgICAgIHNlbGYucG9zID0gMAogICAgICAgICMgPD0+IENvcHkgY29uc3RydWN0b3IKICAgICAgICBlbGlmIGlzaW5zdGFuY2UoaXRlcmFibGUsIFRlZU9iamVjdCk6CiAgICAgICAgICAgIHNlbGYudGVlX2RhdGEgPSBpdGVyYWJsZS50ZWVfZGF0YQogICAgICAgICAgICBzZWxmLnBvcyA9IGl0ZXJhYmxlLnBvcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYudGVlX2RhdGEgPSBUZWVEYXRhKGl0ZXIoaXRlcmFibGUpKQogICAgICAgICAgICBzZWxmLnBvcyA9IDAKICAgICAgICAgICAgCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgZGF0YSA9IHNlbGYudGVlX2RhdGFbc2VsZi5wb3NdCiAgICAgICAgc2VsZi5wb3MgKz0gMQogICAgICAgIHJldHVybiBkYXRhCiAgICAKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKCmRlZiB0ZWUoaXRlcmFibGUsIG49Mik6CiAgICBpZiBpc2luc3RhbmNlKGl0ZXJhYmxlLCBUZWVPYmplY3QpOgogICAgICAgIHJldHVybiB0dXBsZShbaXRlcmFibGVdICsKICAgICAgICBbVGVlT2JqZWN0KHRlZV9kYXRhPWl0ZXJhYmxlLnRlZV9kYXRhKSBmb3IgaSBpbiByYW5nZShuIC0gMSldKQogICAgdGVlX2RhdGEgPSBUZWVEYXRhKGl0ZXIoaXRlcmFibGUpKQogICAgcmV0dXJuIHR1cGxlKFtUZWVPYmplY3QodGVlX2RhdGE9dGVlX2RhdGEpIGZvciBpIGluIHJhbmdlKG4pXSkKCmNsYXNzIHppcF9sb25nZXN0OgogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCBmaWxsdmFsdWUgPSBOb25lKToKICAgICAgICBzZWxmLmFyZ3MgPSBhcmdzCiAgICAgICAgc2VsZi5maWxsdmFsdWUgPSBmaWxsdmFsdWUKICAgICAgICBzZWxmLm1heF9sZW5ndGggPSBtYXgoW2xlbihhcmcpIGZvciBhcmcgaW4gc2VsZi5hcmdzXSkKICAgICAgICBzZWxmLnVuaXRzID0gbGVuKGFyZ3MpCiAgICAgICAgc2VsZi5jb3VudGVyID0gMAogICAgCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKICAgIAogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY291bnRlciA9PSBzZWxmLm1heF9sZW5ndGg6CiAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICBlbHNlOgogICAgICAgICAgICB0ZW1wID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2Uoc2VsZi51bml0cyk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgdGVtcC5hcHBlbmQoc2VsZi5hcmdzW2ldW3NlbGYuY291bnRlcl0pCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgdGVtcC5hcHBlbmQoc2VsZi5maWxsdmFsdWUpCiAgICAgICAgICAgIHNlbGYuY291bnRlciA9IHNlbGYuY291bnRlciArIDEKICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHRlbXAp',
'/Lib/random.py':'IiIiUmFuZG9tIHZhcmlhYmxlIGdlbmVyYXRvcnMuCgogICAgaW50ZWdlcnMKICAgIC0tLS0tLS0tCiAgICAgICAgICAgdW5pZm9ybSB3aXRoaW4gcmFuZ2UKCiAgICBzZXF1ZW5jZXMKICAgIC0tLS0tLS0tLQogICAgICAgICAgIHBpY2sgcmFuZG9tIGVsZW1lbnQKICAgICAgICAgICBwaWNrIHJhbmRvbSBzYW1wbGUKICAgICAgICAgICBnZW5lcmF0ZSByYW5kb20gcGVybXV0YXRpb24KCiAgICBkaXN0cmlidXRpb25zIG9uIHRoZSByZWFsIGxpbmU6CiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICB1bmlmb3JtCiAgICAgICAgICAgdHJpYW5ndWxhcgogICAgICAgICAgIG5vcm1hbCAoR2F1c3NpYW4pCiAgICAgICAgICAgbG9nbm9ybWFsCiAgICAgICAgICAgbmVnYXRpdmUgZXhwb25lbnRpYWwKICAgICAgICAgICBnYW1tYQogICAgICAgICAgIGJldGEKICAgICAgICAgICBwYXJldG8KICAgICAgICAgICBXZWlidWxsCgogICAgZGlzdHJpYnV0aW9ucyBvbiB0aGUgY2lyY2xlIChhbmdsZXMgMCB0byAycGkpCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICBjaXJjdWxhciB1bmlmb3JtCiAgICAgICAgICAgdm9uIE1pc2VzCgpHZW5lcmFsIG5vdGVzIG9uIHRoZSB1bmRlcmx5aW5nIE1lcnNlbm5lIFR3aXN0ZXIgY29yZSBnZW5lcmF0b3I6CgoqIFRoZSBwZXJpb2QgaXMgMioqMTk5MzctMS4KKiBJdCBpcyBvbmUgb2YgdGhlIG1vc3QgZXh0ZW5zaXZlbHkgdGVzdGVkIGdlbmVyYXRvcnMgaW4gZXhpc3RlbmNlLgoqIFRoZSByYW5kb20oKSBtZXRob2QgaXMgaW1wbGVtZW50ZWQgaW4gQywgZXhlY3V0ZXMgaW4gYSBzaW5nbGUgUHl0aG9uIHN0ZXAsCiAgYW5kIGlzLCB0aGVyZWZvcmUsIHRocmVhZHNhZmUuCgoiIiIKCmZyb20gd2FybmluZ3MgaW1wb3J0IHdhcm4gYXMgX3dhcm4KZnJvbSB0eXBlcyBpbXBvcnQgTWV0aG9kVHlwZSBhcyBfTWV0aG9kVHlwZSwgQnVpbHRpbk1ldGhvZFR5cGUgYXMgX0J1aWx0aW5NZXRob2RUeXBlCmZyb20gbWF0aCBpbXBvcnQgbG9nIGFzIF9sb2csIGV4cCBhcyBfZXhwLCBwaSBhcyBfcGksIGUgYXMgX2UsIGNlaWwgYXMgX2NlaWwKZnJvbSBtYXRoIGltcG9ydCBzcXJ0IGFzIF9zcXJ0LCBhY29zIGFzIF9hY29zLCBjb3MgYXMgX2Nvcywgc2luIGFzIF9zaW4KZnJvbSBvcyBpbXBvcnQgdXJhbmRvbSBhcyBfdXJhbmRvbQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBTZXQgYXMgX1NldCwgU2VxdWVuY2UgYXMgX1NlcXVlbmNlCmZyb20gaGFzaGxpYiBpbXBvcnQgc2hhNTEyIGFzIF9zaGE1MTIKCl9fYWxsX18gPSBbIlJhbmRvbSIsInNlZWQiLCJyYW5kb20iLCJ1bmlmb3JtIiwicmFuZGludCIsImNob2ljZSIsInNhbXBsZSIsCiAgICAgICAgICAgInJhbmRyYW5nZSIsInNodWZmbGUiLCJub3JtYWx2YXJpYXRlIiwibG9nbm9ybXZhcmlhdGUiLAogICAgICAgICAgICJleHBvdmFyaWF0ZSIsInZvbm1pc2VzdmFyaWF0ZSIsImdhbW1hdmFyaWF0ZSIsInRyaWFuZ3VsYXIiLAogICAgICAgICAgICJnYXVzcyIsImJldGF2YXJpYXRlIiwicGFyZXRvdmFyaWF0ZSIsIndlaWJ1bGx2YXJpYXRlIiwKICAgICAgICAgICAiZ2V0c3RhdGUiLCJzZXRzdGF0ZSIsICJnZXRyYW5kYml0cyIsCiAgICAgICAgICAgIlN5c3RlbVJhbmRvbSJdCgpOVl9NQUdJQ0NPTlNUID0gNCAqIF9leHAoLTAuNSkvX3NxcnQoMi4wKQpUV09QSSA9IDIuMCpfcGkKTE9HNCA9IF9sb2coNC4wKQpTR19NQUdJQ0NPTlNUID0gMS4wICsgX2xvZyg0LjUpCkJQRiA9IDUzICAgICAgICAjIE51bWJlciBvZiBiaXRzIGluIGEgZmxvYXQKUkVDSVBfQlBGID0gMioqLUJQRgoKCiMgVHJhbnNsYXRlZCBieSBHdWlkbyB2YW4gUm9zc3VtIGZyb20gQyBzb3VyY2UgcHJvdmlkZWQgYnkKIyBBZHJpYW4gQmFkZGVsZXkuICBBZGFwdGVkIGJ5IFJheW1vbmQgSGV0dGluZ2VyIGZvciB1c2Ugd2l0aAojIHRoZSBNZXJzZW5uZSBUd2lzdGVyICBhbmQgb3MudXJhbmRvbSgpIGNvcmUgZ2VuZXJhdG9ycy4KCmltcG9ydCBfcmFuZG9tCgpjbGFzcyBSYW5kb20oX3JhbmRvbS5SYW5kb20pOgogICAgIiIiUmFuZG9tIG51bWJlciBnZW5lcmF0b3IgYmFzZSBjbGFzcyB1c2VkIGJ5IGJvdW5kIG1vZHVsZSBmdW5jdGlvbnMuCgogICAgVXNlZCB0byBpbnN0YW50aWF0ZSBpbnN0YW5jZXMgb2YgUmFuZG9tIHRvIGdldCBnZW5lcmF0b3JzIHRoYXQgZG9uJ3QKICAgIHNoYXJlIHN0YXRlLgoKICAgIENsYXNzIFJhbmRvbSBjYW4gYWxzbyBiZSBzdWJjbGFzc2VkIGlmIHlvdSB3YW50IHRvIHVzZSBhIGRpZmZlcmVudCBiYXNpYwogICAgZ2VuZXJhdG9yIG9mIHlvdXIgb3duIGRldmlzaW5nOiBpbiB0aGF0IGNhc2UsIG92ZXJyaWRlIHRoZSBmb2xsb3dpbmcKICAgIG1ldGhvZHM6ICByYW5kb20oKSwgc2VlZCgpLCBnZXRzdGF0ZSgpLCBhbmQgc2V0c3RhdGUoKS4KICAgIE9wdGlvbmFsbHksIGltcGxlbWVudCBhIGdldHJhbmRiaXRzKCkgbWV0aG9kIHNvIHRoYXQgcmFuZHJhbmdlKCkKICAgIGNhbiBjb3ZlciBhcmJpdHJhcmlseSBsYXJnZSByYW5nZXMuCgogICAgIiIiCgogICAgVkVSU0lPTiA9IDMgICAgICMgdXNlZCBieSBnZXRzdGF0ZS9zZXRzdGF0ZQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB4PU5vbmUpOgogICAgICAgICIiIkluaXRpYWxpemUgYW4gaW5zdGFuY2UuCgogICAgICAgIE9wdGlvbmFsIGFyZ3VtZW50IHggY29udHJvbHMgc2VlZGluZywgYXMgZm9yIFJhbmRvbS5zZWVkKCkuCiAgICAgICAgIiIiCgogICAgICAgIHNlbGYuc2VlZCh4KQogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKCiAgICBkZWYgc2VlZChzZWxmLCBhPU5vbmUsIHZlcnNpb249Mik6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSBpbnRlcm5hbCBzdGF0ZSBmcm9tIGhhc2hhYmxlIG9iamVjdC4KCiAgICAgICAgTm9uZSBvciBubyBhcmd1bWVudCBzZWVkcyBmcm9tIGN1cnJlbnQgdGltZSBvciBmcm9tIGFuIG9wZXJhdGluZwogICAgICAgIHN5c3RlbSBzcGVjaWZpYyByYW5kb21uZXNzIHNvdXJjZSBpZiBhdmFpbGFibGUuCgogICAgICAgIEZvciB2ZXJzaW9uIDIgKHRoZSBkZWZhdWx0KSwgYWxsIG9mIHRoZSBiaXRzIGFyZSB1c2VkIGlmICphKiBpcyBhIHN0ciwKICAgICAgICBieXRlcywgb3IgYnl0ZWFycmF5LiAgRm9yIHZlcnNpb24gMSwgdGhlIGhhc2goKSBvZiAqYSogaXMgdXNlZCBpbnN0ZWFkLgoKICAgICAgICBJZiAqYSogaXMgYW4gaW50LCBhbGwgYml0cyBhcmUgdXNlZC4KCiAgICAgICAgIiIiCgogICAgICAgIGlmIGEgaXMgTm9uZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYSA9IGludC5mcm9tX2J5dGVzKF91cmFuZG9tKDMyKSwgJ2JpZycpCiAgICAgICAgICAgIGV4Y2VwdCBOb3RJbXBsZW1lbnRlZEVycm9yOgogICAgICAgICAgICAgICAgaW1wb3J0IHRpbWUKICAgICAgICAgICAgICAgIGEgPSBpbnQodGltZS50aW1lKCkgKiAyNTYpICMgdXNlIGZyYWN0aW9uYWwgc2Vjb25kcwoKICAgICAgICBpZiB2ZXJzaW9uID09IDI6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYSwgKHN0ciwgYnl0ZXMsIGJ5dGVhcnJheSkpOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShhLCBzdHIpOgogICAgICAgICAgICAgICAgICAgIGEgPSBhLmVuY29kZSgpCiAgICAgICAgICAgICAgICBhICs9IF9zaGE1MTIoYSkuZGlnZXN0KCkKICAgICAgICAgICAgICAgIGEgPSBpbnQuZnJvbV9ieXRlcyhhLCAnYmlnJykKCiAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAjc3VwZXIoKS5zZWVkKGEpCiAgICAgICAgX3JhbmRvbS5SYW5kb20uc2VlZChzZWxmLCBhKQogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKCiAgICBkZWYgZ2V0c3RhdGUoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGludGVybmFsIHN0YXRlOyBjYW4gYmUgcGFzc2VkIHRvIHNldHN0YXRlKCkgbGF0ZXIuIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuVkVSU0lPTiwgc3VwZXIoKS5nZXRzdGF0ZSgpLCBzZWxmLmdhdXNzX25leHQKCiAgICBkZWYgc2V0c3RhdGUoc2VsZiwgc3RhdGUpOgogICAgICAgICIiIlJlc3RvcmUgaW50ZXJuYWwgc3RhdGUgZnJvbSBvYmplY3QgcmV0dXJuZWQgYnkgZ2V0c3RhdGUoKS4iIiIKICAgICAgICB2ZXJzaW9uID0gc3RhdGVbMF0KICAgICAgICBpZiB2ZXJzaW9uID09IDM6CiAgICAgICAgICAgIHZlcnNpb24sIGludGVybmFsc3RhdGUsIHNlbGYuZ2F1c3NfbmV4dCA9IHN0YXRlCiAgICAgICAgICAgIHN1cGVyKCkuc2V0c3RhdGUoaW50ZXJuYWxzdGF0ZSkKICAgICAgICBlbGlmIHZlcnNpb24gPT0gMjoKICAgICAgICAgICAgdmVyc2lvbiwgaW50ZXJuYWxzdGF0ZSwgc2VsZi5nYXVzc19uZXh0ID0gc3RhdGUKICAgICAgICAgICAgIyBJbiB2ZXJzaW9uIDIsIHRoZSBzdGF0ZSB3YXMgc2F2ZWQgYXMgc2lnbmVkIGludHMsIHdoaWNoIGNhdXNlcwogICAgICAgICAgICAjICAgaW5jb25zaXN0ZW5jaWVzIGJldHdlZW4gMzIvNjQtYml0IHN5c3RlbXMuIFRoZSBzdGF0ZSBpcwogICAgICAgICAgICAjICAgcmVhbGx5IHVuc2lnbmVkIDMyLWJpdCBpbnRzLCBzbyB3ZSBjb252ZXJ0IG5lZ2F0aXZlIGludHMgZnJvbQogICAgICAgICAgICAjICAgdmVyc2lvbiAyIHRvIHBvc2l0aXZlIGxvbmdzIGZvciB2ZXJzaW9uIDMuCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGludGVybmFsc3RhdGUgPSB0dXBsZSh4ICUgKDIqKjMyKSBmb3IgeCBpbiBpbnRlcm5hbHN0YXRlKQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihlKQogICAgICAgICAgICAgICAgI3JhaXNlIFR5cGVFcnJvciBmcm9tIGUKICAgICAgICAgICAgc3VwZXIoKS5zZXRzdGF0ZShpbnRlcm5hbHN0YXRlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInN0YXRlIHdpdGggdmVyc2lvbiAlcyBwYXNzZWQgdG8gIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSYW5kb20uc2V0c3RhdGUoKSBvZiB2ZXJzaW9uICVzIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZlcnNpb24sIHNlbGYuVkVSU0lPTikpCgojIyAtLS0tIE1ldGhvZHMgYmVsb3cgdGhpcyBwb2ludCBkbyBub3QgbmVlZCB0byBiZSBvdmVycmlkZGVuIHdoZW4KIyMgLS0tLSBzdWJjbGFzc2luZyBmb3IgdGhlIHB1cnBvc2Ugb2YgdXNpbmcgYSBkaWZmZXJlbnQgY29yZSBnZW5lcmF0b3IuCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBwaWNrbGUgc3VwcG9ydCAgLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfX2dldHN0YXRlX18oc2VsZik6ICMgZm9yIHBpY2tsZQogICAgICAgIHJldHVybiBzZWxmLmdldHN0YXRlKCkKCiAgICBkZWYgX19zZXRzdGF0ZV9fKHNlbGYsIHN0YXRlKTogICMgZm9yIHBpY2tsZQogICAgICAgIHNlbGYuc2V0c3RhdGUoc3RhdGUpCgogICAgZGVmIF9fcmVkdWNlX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fLCAoKSwgc2VsZi5nZXRzdGF0ZSgpCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBpbnRlZ2VyIG1ldGhvZHMgIC0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgcmFuZHJhbmdlKHNlbGYsIHN0YXJ0LCBzdG9wPU5vbmUsIHN0ZXA9MSwgaW50PWludCk6CiAgICAgICAgIiIiQ2hvb3NlIGEgcmFuZG9tIGl0ZW0gZnJvbSByYW5nZShzdGFydCwgc3RvcFssIHN0ZXBdKS4KCiAgICAgICAgVGhpcyBmaXhlcyB0aGUgcHJvYmxlbSB3aXRoIHJhbmRpbnQoKSB3aGljaCBpbmNsdWRlcyB0aGUKICAgICAgICBlbmRwb2ludDsgaW4gUHl0aG9uIHRoaXMgaXMgdXN1YWxseSBub3Qgd2hhdCB5b3Ugd2FudC4KCiAgICAgICAgRG8gbm90IHN1cHBseSB0aGUgJ2ludCcgYXJndW1lbnQuCiAgICAgICAgIiIiCgogICAgICAgICMgVGhpcyBjb2RlIGlzIGEgYml0IG1lc3N5IHRvIG1ha2UgaXQgZmFzdCBmb3IgdGhlCiAgICAgICAgIyBjb21tb24gY2FzZSB3aGlsZSBzdGlsbCBkb2luZyBhZGVxdWF0ZSBlcnJvciBjaGVja2luZy4KICAgICAgICBpc3RhcnQgPSBpbnQoc3RhcnQpCiAgICAgICAgaWYgaXN0YXJ0ICE9IHN0YXJ0OgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJub24taW50ZWdlciBhcmcgMSBmb3IgcmFuZHJhbmdlKCkiKQogICAgICAgIGlmIHN0b3AgaXMgTm9uZToKICAgICAgICAgICAgaWYgaXN0YXJ0ID4gMDoKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9yYW5kYmVsb3coaXN0YXJ0KQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJlbXB0eSByYW5nZSBmb3IgcmFuZHJhbmdlKCkiKQoKICAgICAgICAjIHN0b3AgYXJndW1lbnQgc3VwcGxpZWQuCiAgICAgICAgaXN0b3AgPSBpbnQoc3RvcCkKICAgICAgICBpZiBpc3RvcCAhPSBzdG9wOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJub24taW50ZWdlciBzdG9wIGZvciByYW5kcmFuZ2UoKSIpCiAgICAgICAgd2lkdGggPSBpc3RvcCAtIGlzdGFydAogICAgICAgIGlmIHN0ZXAgPT0gMSBhbmQgd2lkdGggPiAwOgogICAgICAgICAgICByZXR1cm4gaXN0YXJ0ICsgc2VsZi5fcmFuZGJlbG93KHdpZHRoKQogICAgICAgIGlmIHN0ZXAgPT0gMToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZW1wdHkgcmFuZ2UgZm9yIHJhbmRyYW5nZSgpICglZCwlZCwgJWQpIiAlIChpc3RhcnQsIGlzdG9wLCB3aWR0aCkpCgogICAgICAgICMgTm9uLXVuaXQgc3RlcCBhcmd1bWVudCBzdXBwbGllZC4KICAgICAgICBpc3RlcCA9IGludChzdGVwKQogICAgICAgIGlmIGlzdGVwICE9IHN0ZXA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5vbi1pbnRlZ2VyIHN0ZXAgZm9yIHJhbmRyYW5nZSgpIikKICAgICAgICBpZiBpc3RlcCA+IDA6CiAgICAgICAgICAgIG4gPSAod2lkdGggKyBpc3RlcCAtIDEpIC8vIGlzdGVwCiAgICAgICAgZWxpZiBpc3RlcCA8IDA6CiAgICAgICAgICAgIG4gPSAod2lkdGggKyBpc3RlcCArIDEpIC8vIGlzdGVwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiemVybyBzdGVwIGZvciByYW5kcmFuZ2UoKSIpCgogICAgICAgIGlmIG4gPD0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZW1wdHkgcmFuZ2UgZm9yIHJhbmRyYW5nZSgpIikKCiAgICAgICAgcmV0dXJuIGlzdGFydCArIGlzdGVwKnNlbGYuX3JhbmRiZWxvdyhuKQoKICAgIGRlZiByYW5kaW50KHNlbGYsIGEsIGIpOgogICAgICAgICIiIlJldHVybiByYW5kb20gaW50ZWdlciBpbiByYW5nZSBbYSwgYl0sIGluY2x1ZGluZyBib3RoIGVuZCBwb2ludHMuCiAgICAgICAgIiIiCgogICAgICAgIHJldHVybiBzZWxmLnJhbmRyYW5nZShhLCBiKzEpCgogICAgZGVmIF9yYW5kYmVsb3coc2VsZiwgbiwgaW50PWludCwgbWF4c2l6ZT0xPDxCUEYsIHR5cGU9dHlwZSwKICAgICAgICAgICAgICAgICAgIE1ldGhvZD1fTWV0aG9kVHlwZSwgQnVpbHRpbk1ldGhvZD1fQnVpbHRpbk1ldGhvZFR5cGUpOgogICAgICAgICJSZXR1cm4gYSByYW5kb20gaW50IGluIHRoZSByYW5nZSBbMCxuKS4gIFJhaXNlcyBWYWx1ZUVycm9yIGlmIG49PTAuIgoKICAgICAgICBnZXRyYW5kYml0cyA9IHNlbGYuZ2V0cmFuZGJpdHMKICAgICAgICAjIE9ubHkgY2FsbCBzZWxmLmdldHJhbmRiaXRzIGlmIHRoZSBvcmlnaW5hbCByYW5kb20oKSBidWlsdGluIG1ldGhvZAogICAgICAgICMgaGFzIG5vdCBiZWVuIG92ZXJyaWRkZW4gb3IgaWYgYSBuZXcgZ2V0cmFuZGJpdHMoKSB3YXMgc3VwcGxpZWQuCiAgICAgICAgaWYgdHlwZShzZWxmLnJhbmRvbSkgaXMgQnVpbHRpbk1ldGhvZCBvciB0eXBlKGdldHJhbmRiaXRzKSBpcyBNZXRob2Q6CiAgICAgICAgICAgIGsgPSBuLmJpdF9sZW5ndGgoKSAgIyBkb24ndCB1c2UgKG4tMSkgaGVyZSBiZWNhdXNlIG4gY2FuIGJlIDEKICAgICAgICAgICAgciA9IGdldHJhbmRiaXRzKGspICAgICAgICAgICMgMCA8PSByIDwgMioqawogICAgICAgICAgICB3aGlsZSByID49IG46CiAgICAgICAgICAgICAgICByID0gZ2V0cmFuZGJpdHMoaykKICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAjIFRoZXJlJ3MgYW4gb3ZlcnJpZGVuIHJhbmRvbSgpIG1ldGhvZCBidXQgbm8gbmV3IGdldHJhbmRiaXRzKCkgbWV0aG9kLAogICAgICAgICMgc28gd2UgY2FuIG9ubHkgdXNlIHJhbmRvbSgpIGZyb20gaGVyZS4KICAgICAgICByYW5kb20gPSBzZWxmLnJhbmRvbQogICAgICAgIGlmIG4gPj0gbWF4c2l6ZToKICAgICAgICAgICAgX3dhcm4oIlVuZGVybHlpbmcgcmFuZG9tKCkgZ2VuZXJhdG9yIGRvZXMgbm90IHN1cHBseSBcbiIKICAgICAgICAgICAgICAgICJlbm91Z2ggYml0cyB0byBjaG9vc2UgZnJvbSBhIHBvcHVsYXRpb24gcmFuZ2UgdGhpcyBsYXJnZS5cbiIKICAgICAgICAgICAgICAgICJUbyByZW1vdmUgdGhlIHJhbmdlIGxpbWl0YXRpb24sIGFkZCBhIGdldHJhbmRiaXRzKCkgbWV0aG9kLiIpCiAgICAgICAgICAgIHJldHVybiBpbnQocmFuZG9tKCkgKiBuKQogICAgICAgIHJlbSA9IG1heHNpemUgJSBuCiAgICAgICAgbGltaXQgPSAobWF4c2l6ZSAtIHJlbSkgLyBtYXhzaXplICAgIyBpbnQobGltaXQgKiBtYXhzaXplKSAlIG4gPT0gMAogICAgICAgIHIgPSByYW5kb20oKQogICAgICAgIHdoaWxlIHIgPj0gbGltaXQ6CiAgICAgICAgICAgIHIgPSByYW5kb20oKQogICAgICAgIHJldHVybiBpbnQociptYXhzaXplKSAlIG4KCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIHNlcXVlbmNlIG1ldGhvZHMgIC0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgY2hvaWNlKHNlbGYsIHNlcSk6CiAgICAgICAgIiIiQ2hvb3NlIGEgcmFuZG9tIGVsZW1lbnQgZnJvbSBhIG5vbi1lbXB0eSBzZXF1ZW5jZS4iIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGkgPSBzZWxmLl9yYW5kYmVsb3cobGVuKHNlcSkpCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoJ0Nhbm5vdCBjaG9vc2UgZnJvbSBhbiBlbXB0eSBzZXF1ZW5jZScpCiAgICAgICAgcmV0dXJuIHNlcVtpXQoKICAgIGRlZiBzaHVmZmxlKHNlbGYsIHgsIHJhbmRvbT1Ob25lLCBpbnQ9aW50KToKICAgICAgICAiIiJ4LCByYW5kb209cmFuZG9tLnJhbmRvbSAtPiBzaHVmZmxlIGxpc3QgeCBpbiBwbGFjZTsgcmV0dXJuIE5vbmUuCgogICAgICAgIE9wdGlvbmFsIGFyZyByYW5kb20gaXMgYSAwLWFyZ3VtZW50IGZ1bmN0aW9uIHJldHVybmluZyBhIHJhbmRvbQogICAgICAgIGZsb2F0IGluIFswLjAsIDEuMCk7IGJ5IGRlZmF1bHQsIHRoZSBzdGFuZGFyZCByYW5kb20ucmFuZG9tLgogICAgICAgICIiIgoKICAgICAgICByYW5kYmVsb3cgPSBzZWxmLl9yYW5kYmVsb3cKICAgICAgICBmb3IgaSBpbiByZXZlcnNlZChyYW5nZSgxLCBsZW4oeCkpKToKICAgICAgICAgICAgIyBwaWNrIGFuIGVsZW1lbnQgaW4geFs6aSsxXSB3aXRoIHdoaWNoIHRvIGV4Y2hhbmdlIHhbaV0KICAgICAgICAgICAgaiA9IHJhbmRiZWxvdyhpKzEpIGlmIHJhbmRvbSBpcyBOb25lIGVsc2UgaW50KHJhbmRvbSgpICogKGkrMSkpCiAgICAgICAgICAgIHhbaV0sIHhbal0gPSB4W2pdLCB4W2ldCgogICAgZGVmIHNhbXBsZShzZWxmLCBwb3B1bGF0aW9uLCBrKToKICAgICAgICAiIiJDaG9vc2VzIGsgdW5pcXVlIHJhbmRvbSBlbGVtZW50cyBmcm9tIGEgcG9wdWxhdGlvbiBzZXF1ZW5jZSBvciBzZXQuCgogICAgICAgIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIGVsZW1lbnRzIGZyb20gdGhlIHBvcHVsYXRpb24gd2hpbGUKICAgICAgICBsZWF2aW5nIHRoZSBvcmlnaW5hbCBwb3B1bGF0aW9uIHVuY2hhbmdlZC4gIFRoZSByZXN1bHRpbmcgbGlzdCBpcwogICAgICAgIGluIHNlbGVjdGlvbiBvcmRlciBzbyB0aGF0IGFsbCBzdWItc2xpY2VzIHdpbGwgYWxzbyBiZSB2YWxpZCByYW5kb20KICAgICAgICBzYW1wbGVzLiAgVGhpcyBhbGxvd3MgcmFmZmxlIHdpbm5lcnMgKHRoZSBzYW1wbGUpIHRvIGJlIHBhcnRpdGlvbmVkCiAgICAgICAgaW50byBncmFuZCBwcml6ZSBhbmQgc2Vjb25kIHBsYWNlIHdpbm5lcnMgKHRoZSBzdWJzbGljZXMpLgoKICAgICAgICBNZW1iZXJzIG9mIHRoZSBwb3B1bGF0aW9uIG5lZWQgbm90IGJlIGhhc2hhYmxlIG9yIHVuaXF1ZS4gIElmIHRoZQogICAgICAgIHBvcHVsYXRpb24gY29udGFpbnMgcmVwZWF0cywgdGhlbiBlYWNoIG9jY3VycmVuY2UgaXMgYSBwb3NzaWJsZQogICAgICAgIHNlbGVjdGlvbiBpbiB0aGUgc2FtcGxlLgoKICAgICAgICBUbyBjaG9vc2UgYSBzYW1wbGUgaW4gYSByYW5nZSBvZiBpbnRlZ2VycywgdXNlIHJhbmdlIGFzIGFuIGFyZ3VtZW50LgogICAgICAgIFRoaXMgaXMgZXNwZWNpYWxseSBmYXN0IGFuZCBzcGFjZSBlZmZpY2llbnQgZm9yIHNhbXBsaW5nIGZyb20gYQogICAgICAgIGxhcmdlIHBvcHVsYXRpb246ICAgc2FtcGxlKHJhbmdlKDEwMDAwMDAwKSwgNjApCiAgICAgICAgIiIiCgogICAgICAgICMgU2FtcGxpbmcgd2l0aG91dCByZXBsYWNlbWVudCBlbnRhaWxzIHRyYWNraW5nIGVpdGhlciBwb3RlbnRpYWwKICAgICAgICAjIHNlbGVjdGlvbnMgKHRoZSBwb29sKSBpbiBhIGxpc3Qgb3IgcHJldmlvdXMgc2VsZWN0aW9ucyBpbiBhIHNldC4KCiAgICAgICAgIyBXaGVuIHRoZSBudW1iZXIgb2Ygc2VsZWN0aW9ucyBpcyBzbWFsbCBjb21wYXJlZCB0byB0aGUKICAgICAgICAjIHBvcHVsYXRpb24sIHRoZW4gdHJhY2tpbmcgc2VsZWN0aW9ucyBpcyBlZmZpY2llbnQsIHJlcXVpcmluZwogICAgICAgICMgb25seSBhIHNtYWxsIHNldCBhbmQgYW4gb2NjYXNpb25hbCByZXNlbGVjdGlvbi4gIEZvcgogICAgICAgICMgYSBsYXJnZXIgbnVtYmVyIG9mIHNlbGVjdGlvbnMsIHRoZSBwb29sIHRyYWNraW5nIG1ldGhvZCBpcwogICAgICAgICMgcHJlZmVycmVkIHNpbmNlIHRoZSBsaXN0IHRha2VzIGxlc3Mgc3BhY2UgdGhhbiB0aGUKICAgICAgICAjIHNldCBhbmQgaXQgZG9lc24ndCBzdWZmZXIgZnJvbSBmcmVxdWVudCByZXNlbGVjdGlvbnMuCgogICAgICAgIGlmIGlzaW5zdGFuY2UocG9wdWxhdGlvbiwgX1NldCk6CiAgICAgICAgICAgIHBvcHVsYXRpb24gPSB0dXBsZShwb3B1bGF0aW9uKQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBvcHVsYXRpb24sIF9TZXF1ZW5jZSk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiUG9wdWxhdGlvbiBtdXN0IGJlIGEgc2VxdWVuY2Ugb3Igc2V0LiAgRm9yIGRpY3RzLCB1c2UgbGlzdChkKS4iKQogICAgICAgIHJhbmRiZWxvdyA9IHNlbGYuX3JhbmRiZWxvdwogICAgICAgIG4gPSBsZW4ocG9wdWxhdGlvbikKICAgICAgICBpZiBub3QgMCA8PSBrIDw9IG46CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlNhbXBsZSBsYXJnZXIgdGhhbiBwb3B1bGF0aW9uIikKICAgICAgICByZXN1bHQgPSBbTm9uZV0gKiBrCiAgICAgICAgc2V0c2l6ZSA9IDIxICAgICAgICAjIHNpemUgb2YgYSBzbWFsbCBzZXQgbWludXMgc2l6ZSBvZiBhbiBlbXB0eSBsaXN0CiAgICAgICAgaWYgayA+IDU6CiAgICAgICAgICAgIHNldHNpemUgKz0gNCAqKiBfY2VpbChfbG9nKGsgKiAzLCA0KSkgIyB0YWJsZSBzaXplIGZvciBiaWcgc2V0cwogICAgICAgIGlmIG4gPD0gc2V0c2l6ZToKICAgICAgICAgICAgIyBBbiBuLWxlbmd0aCBsaXN0IGlzIHNtYWxsZXIgdGhhbiBhIGstbGVuZ3RoIHNldAogICAgICAgICAgICBwb29sID0gbGlzdChwb3B1bGF0aW9uKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShrKTogICAgICAgICAjIGludmFyaWFudDogIG5vbi1zZWxlY3RlZCBhdCBbMCxuLWkpCiAgICAgICAgICAgICAgICBqID0gcmFuZGJlbG93KG4taSkKICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IHBvb2xbal0KICAgICAgICAgICAgICAgIHBvb2xbal0gPSBwb29sW24taS0xXSAgICMgbW92ZSBub24tc2VsZWN0ZWQgaXRlbSBpbnRvIHZhY2FuY3kKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxlY3RlZCA9IHNldCgpCiAgICAgICAgICAgIHNlbGVjdGVkX2FkZCA9IHNlbGVjdGVkLmFkZAogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShrKToKICAgICAgICAgICAgICAgIGogPSByYW5kYmVsb3cobikKICAgICAgICAgICAgICAgIHdoaWxlIGogaW4gc2VsZWN0ZWQ6CiAgICAgICAgICAgICAgICAgICAgaiA9IHJhbmRiZWxvdyhuKQogICAgICAgICAgICAgICAgc2VsZWN0ZWRfYWRkKGopCiAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSBwb3B1bGF0aW9uW2pdCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gcmVhbC12YWx1ZWQgZGlzdHJpYnV0aW9ucyAgLS0tLS0tLS0tLS0tLS0tLS0tLQoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gdW5pZm9ybSBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiB1bmlmb3JtKHNlbGYsIGEsIGIpOgogICAgICAgICJHZXQgYSByYW5kb20gbnVtYmVyIGluIHRoZSByYW5nZSBbYSwgYikgb3IgW2EsIGJdIGRlcGVuZGluZyBvbiByb3VuZGluZy4iCiAgICAgICAgcmV0dXJuIGEgKyAoYi1hKSAqIHNlbGYucmFuZG9tKCkKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIHRyaWFuZ3VsYXIgLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgdHJpYW5ndWxhcihzZWxmLCBsb3c9MC4wLCBoaWdoPTEuMCwgbW9kZT1Ob25lKToKICAgICAgICAiIiJUcmlhbmd1bGFyIGRpc3RyaWJ1dGlvbi4KCiAgICAgICAgQ29udGludW91cyBkaXN0cmlidXRpb24gYm91bmRlZCBieSBnaXZlbiBsb3dlciBhbmQgdXBwZXIgbGltaXRzLAogICAgICAgIGFuZCBoYXZpbmcgYSBnaXZlbiBtb2RlIHZhbHVlIGluLWJldHdlZW4uCgogICAgICAgIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJpYW5ndWxhcl9kaXN0cmlidXRpb24KCiAgICAgICAgIiIiCiAgICAgICAgdSA9IHNlbGYucmFuZG9tKCkKICAgICAgICBjID0gMC41IGlmIG1vZGUgaXMgTm9uZSBlbHNlIChtb2RlIC0gbG93KSAvIChoaWdoIC0gbG93KQogICAgICAgIGlmIHUgPiBjOgogICAgICAgICAgICB1ID0gMS4wIC0gdQogICAgICAgICAgICBjID0gMS4wIC0gYwogICAgICAgICAgICBsb3csIGhpZ2ggPSBoaWdoLCBsb3cKICAgICAgICByZXR1cm4gbG93ICsgKGhpZ2ggLSBsb3cpICogKHUgKiBjKSAqKiAwLjUKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIG5vcm1hbCBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgbm9ybWFsdmFyaWF0ZShzZWxmLCBtdSwgc2lnbWEpOgogICAgICAgICIiIk5vcm1hbCBkaXN0cmlidXRpb24uCgogICAgICAgIG11IGlzIHRoZSBtZWFuLCBhbmQgc2lnbWEgaXMgdGhlIHN0YW5kYXJkIGRldmlhdGlvbi4KCiAgICAgICAgIiIiCiAgICAgICAgIyBtdSA9IG1lYW4sIHNpZ21hID0gc3RhbmRhcmQgZGV2aWF0aW9uCgogICAgICAgICMgVXNlcyBLaW5kZXJtYW4gYW5kIE1vbmFoYW4gbWV0aG9kLiBSZWZlcmVuY2U6IEtpbmRlcm1hbiwKICAgICAgICAjIEEuSi4gYW5kIE1vbmFoYW4sIEouRi4sICJDb21wdXRlciBnZW5lcmF0aW9uIG9mIHJhbmRvbQogICAgICAgICMgdmFyaWFibGVzIHVzaW5nIHRoZSByYXRpbyBvZiB1bmlmb3JtIGRldmlhdGVzIiwgQUNNIFRyYW5zCiAgICAgICAgIyBNYXRoIFNvZnR3YXJlLCAzLCAoMTk3NyksIHBwMjU3LTI2MC4KCiAgICAgICAgcmFuZG9tID0gc2VsZi5yYW5kb20KICAgICAgICB3aGlsZSAxOgogICAgICAgICAgICB1MSA9IHJhbmRvbSgpCiAgICAgICAgICAgIHUyID0gMS4wIC0gcmFuZG9tKCkKICAgICAgICAgICAgeiA9IE5WX01BR0lDQ09OU1QqKHUxLTAuNSkvdTIKICAgICAgICAgICAgenogPSB6KnovNC4wCiAgICAgICAgICAgIGlmIHp6IDw9IC1fbG9nKHUyKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgcmV0dXJuIG11ICsgeipzaWdtYQoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gbG9nbm9ybWFsIGRpc3RyaWJ1dGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBsb2dub3JtdmFyaWF0ZShzZWxmLCBtdSwgc2lnbWEpOgogICAgICAgICIiIkxvZyBub3JtYWwgZGlzdHJpYnV0aW9uLgoKICAgICAgICBJZiB5b3UgdGFrZSB0aGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgdGhpcyBkaXN0cmlidXRpb24sIHlvdSdsbCBnZXQgYQogICAgICAgIG5vcm1hbCBkaXN0cmlidXRpb24gd2l0aCBtZWFuIG11IGFuZCBzdGFuZGFyZCBkZXZpYXRpb24gc2lnbWEuCiAgICAgICAgbXUgY2FuIGhhdmUgYW55IHZhbHVlLCBhbmQgc2lnbWEgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby4KCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIF9leHAoc2VsZi5ub3JtYWx2YXJpYXRlKG11LCBzaWdtYSkpCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBleHBvbmVudGlhbCBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgZXhwb3ZhcmlhdGUoc2VsZiwgbGFtYmQpOgogICAgICAgICIiIkV4cG9uZW50aWFsIGRpc3RyaWJ1dGlvbi4KCiAgICAgICAgbGFtYmQgaXMgMS4wIGRpdmlkZWQgYnkgdGhlIGRlc2lyZWQgbWVhbi4gIEl0IHNob3VsZCBiZQogICAgICAgIG5vbnplcm8uICAoVGhlIHBhcmFtZXRlciB3b3VsZCBiZSBjYWxsZWQgImxhbWJkYSIsIGJ1dCB0aGF0IGlzCiAgICAgICAgYSByZXNlcnZlZCB3b3JkIGluIFB5dGhvbi4pICBSZXR1cm5lZCB2YWx1ZXMgcmFuZ2UgZnJvbSAwIHRvCiAgICAgICAgcG9zaXRpdmUgaW5maW5pdHkgaWYgbGFtYmQgaXMgcG9zaXRpdmUsIGFuZCBmcm9tIG5lZ2F0aXZlCiAgICAgICAgaW5maW5pdHkgdG8gMCBpZiBsYW1iZCBpcyBuZWdhdGl2ZS4KCiAgICAgICAgIiIiCiAgICAgICAgIyBsYW1iZDogcmF0ZSBsYW1iZCA9IDEvbWVhbgogICAgICAgICMgKCdsYW1iZGEnIGlzIGEgUHl0aG9uIHJlc2VydmVkIHdvcmQpCgogICAgICAgICMgd2UgdXNlIDEtcmFuZG9tKCkgaW5zdGVhZCBvZiByYW5kb20oKSB0byBwcmVjbHVkZSB0aGUKICAgICAgICAjIHBvc3NpYmlsaXR5IG9mIHRha2luZyB0aGUgbG9nIG9mIHplcm8uCiAgICAgICAgcmV0dXJuIC1fbG9nKDEuMCAtIHNlbGYucmFuZG9tKCkpL2xhbWJkCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSB2b24gTWlzZXMgZGlzdHJpYnV0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIHZvbm1pc2VzdmFyaWF0ZShzZWxmLCBtdSwga2FwcGEpOgogICAgICAgICIiIkNpcmN1bGFyIGRhdGEgZGlzdHJpYnV0aW9uLgoKICAgICAgICBtdSBpcyB0aGUgbWVhbiBhbmdsZSwgZXhwcmVzc2VkIGluIHJhZGlhbnMgYmV0d2VlbiAwIGFuZCAyKnBpLCBhbmQKICAgICAgICBrYXBwYSBpcyB0aGUgY29uY2VudHJhdGlvbiBwYXJhbWV0ZXIsIHdoaWNoIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yCiAgICAgICAgZXF1YWwgdG8gemVyby4gIElmIGthcHBhIGlzIGVxdWFsIHRvIHplcm8sIHRoaXMgZGlzdHJpYnV0aW9uIHJlZHVjZXMKICAgICAgICB0byBhIHVuaWZvcm0gcmFuZG9tIGFuZ2xlIG92ZXIgdGhlIHJhbmdlIDAgdG8gMipwaS4KCiAgICAgICAgIiIiCiAgICAgICAgIyBtdTogICAgbWVhbiBhbmdsZSAoaW4gcmFkaWFucyBiZXR3ZWVuIDAgYW5kIDIqcGkpCiAgICAgICAgIyBrYXBwYTogY29uY2VudHJhdGlvbiBwYXJhbWV0ZXIga2FwcGEgKD49IDApCiAgICAgICAgIyBpZiBrYXBwYSA9IDAgZ2VuZXJhdGUgdW5pZm9ybSByYW5kb20gYW5nbGUKCiAgICAgICAgIyBCYXNlZCB1cG9uIGFuIGFsZ29yaXRobSBwdWJsaXNoZWQgaW46IEZpc2hlciwgTi5JLiwKICAgICAgICAjICJTdGF0aXN0aWNhbCBBbmFseXNpcyBvZiBDaXJjdWxhciBEYXRhIiwgQ2FtYnJpZGdlCiAgICAgICAgIyBVbml2ZXJzaXR5IFByZXNzLCAxOTkzLgoKICAgICAgICAjIFRoYW5rcyB0byBNYWdudXMgS2Vzc2xlciBmb3IgYSBjb3JyZWN0aW9uIHRvIHRoZQogICAgICAgICMgaW1wbGVtZW50YXRpb24gb2Ygc3RlcCA0LgoKICAgICAgICByYW5kb20gPSBzZWxmLnJhbmRvbQogICAgICAgIGlmIGthcHBhIDw9IDFlLTY6CiAgICAgICAgICAgIHJldHVybiBUV09QSSAqIHJhbmRvbSgpCgogICAgICAgIGEgPSAxLjAgKyBfc3FydCgxLjAgKyA0LjAgKiBrYXBwYSAqIGthcHBhKQogICAgICAgIGIgPSAoYSAtIF9zcXJ0KDIuMCAqIGEpKS8oMi4wICoga2FwcGEpCiAgICAgICAgciA9ICgxLjAgKyBiICogYikvKDIuMCAqIGIpCgogICAgICAgIHdoaWxlIDE6CiAgICAgICAgICAgIHUxID0gcmFuZG9tKCkKCiAgICAgICAgICAgIHogPSBfY29zKF9waSAqIHUxKQogICAgICAgICAgICBmID0gKDEuMCArIHIgKiB6KS8ociArIHopCiAgICAgICAgICAgIGMgPSBrYXBwYSAqIChyIC0gZikKCiAgICAgICAgICAgIHUyID0gcmFuZG9tKCkKCiAgICAgICAgICAgIGlmIHUyIDwgYyAqICgyLjAgLSBjKSBvciB1MiA8PSBjICogX2V4cCgxLjAgLSBjKToKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHUzID0gcmFuZG9tKCkKICAgICAgICBpZiB1MyA+IDAuNToKICAgICAgICAgICAgdGhldGEgPSAobXUgJSBUV09QSSkgKyBfYWNvcyhmKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRoZXRhID0gKG11ICUgVFdPUEkpIC0gX2Fjb3MoZikKCiAgICAgICAgcmV0dXJuIHRoZXRhCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBnYW1tYSBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgZ2FtbWF2YXJpYXRlKHNlbGYsIGFscGhhLCBiZXRhKToKICAgICAgICAiIiJHYW1tYSBkaXN0cmlidXRpb24uICBOb3QgdGhlIGdhbW1hIGZ1bmN0aW9uIQoKICAgICAgICBDb25kaXRpb25zIG9uIHRoZSBwYXJhbWV0ZXJzIGFyZSBhbHBoYSA+IDAgYW5kIGJldGEgPiAwLgoKICAgICAgICBUaGUgcHJvYmFiaWxpdHkgZGlzdHJpYnV0aW9uIGZ1bmN0aW9uIGlzOgoKICAgICAgICAgICAgICAgICAgICB4ICoqIChhbHBoYSAtIDEpICogbWF0aC5leHAoLXggLyBiZXRhKQogICAgICAgICAgcGRmKHgpID0gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICAgICAgICBtYXRoLmdhbW1hKGFscGhhKSAqIGJldGEgKiogYWxwaGEKCiAgICAgICAgIiIiCgogICAgICAgICMgYWxwaGEgPiAwLCBiZXRhID4gMCwgbWVhbiBpcyBhbHBoYSpiZXRhLCB2YXJpYW5jZSBpcyBhbHBoYSpiZXRhKioyCgogICAgICAgICMgV2FybmluZzogYSBmZXcgb2xkZXIgc291cmNlcyBkZWZpbmUgdGhlIGdhbW1hIGRpc3RyaWJ1dGlvbiBpbiB0ZXJtcwogICAgICAgICMgb2YgYWxwaGEgPiAtMS4wCiAgICAgICAgaWYgYWxwaGEgPD0gMC4wIG9yIGJldGEgPD0gMC4wOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdnYW1tYXZhcmlhdGU6IGFscGhhIGFuZCBiZXRhIG11c3QgYmUgPiAwLjAnKQoKICAgICAgICByYW5kb20gPSBzZWxmLnJhbmRvbQogICAgICAgIGlmIGFscGhhID4gMS4wOgoKICAgICAgICAgICAgIyBVc2VzIFIuQy5ILiBDaGVuZywgIlRoZSBnZW5lcmF0aW9uIG9mIEdhbW1hCiAgICAgICAgICAgICMgdmFyaWFibGVzIHdpdGggbm9uLWludGVncmFsIHNoYXBlIHBhcmFtZXRlcnMiLAogICAgICAgICAgICAjIEFwcGxpZWQgU3RhdGlzdGljcywgKDE5NzcpLCAyNiwgTm8uIDEsIHA3MS03NAoKICAgICAgICAgICAgYWludiA9IF9zcXJ0KDIuMCAqIGFscGhhIC0gMS4wKQogICAgICAgICAgICBiYmIgPSBhbHBoYSAtIExPRzQKICAgICAgICAgICAgY2NjID0gYWxwaGEgKyBhaW52CgogICAgICAgICAgICB3aGlsZSAxOgogICAgICAgICAgICAgICAgdTEgPSByYW5kb20oKQogICAgICAgICAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAgICAgICAgICNpZiBub3QgMWUtNyA8IHUxIDwgLjk5OTk5OTk6CiAgICAgICAgICAgICAgICBpZiBub3QgMWUtNyA8IHUxIDwgMC45OTk5OTk5OgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICB1MiA9IDEuMCAtIHJhbmRvbSgpCiAgICAgICAgICAgICAgICB2ID0gX2xvZyh1MS8oMS4wLXUxKSkvYWludgogICAgICAgICAgICAgICAgeCA9IGFscGhhKl9leHAodikKICAgICAgICAgICAgICAgIHogPSB1MSp1MSp1MgogICAgICAgICAgICAgICAgciA9IGJiYitjY2Mqdi14CiAgICAgICAgICAgICAgICBpZiByICsgU0dfTUFHSUNDT05TVCAtIDQuNSp6ID49IDAuMCBvciByID49IF9sb2coeik6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHggKiBiZXRhCgogICAgICAgIGVsaWYgYWxwaGEgPT0gMS4wOgogICAgICAgICAgICAjIGV4cG92YXJpYXRlKDEpCiAgICAgICAgICAgIHUgPSByYW5kb20oKQogICAgICAgICAgICB3aGlsZSB1IDw9IDFlLTc6CiAgICAgICAgICAgICAgICB1ID0gcmFuZG9tKCkKICAgICAgICAgICAgcmV0dXJuIC1fbG9nKHUpICogYmV0YQoKICAgICAgICBlbHNlOiAgICMgYWxwaGEgaXMgYmV0d2VlbiAwIGFuZCAxIChleGNsdXNpdmUpCgogICAgICAgICAgICAjIFVzZXMgQUxHT1JJVEhNIEdTIG9mIFN0YXRpc3RpY2FsIENvbXB1dGluZyAtIEtlbm5lZHkgJiBHZW50bGUKCiAgICAgICAgICAgIHdoaWxlIDE6CiAgICAgICAgICAgICAgICB1ID0gcmFuZG9tKCkKICAgICAgICAgICAgICAgIGIgPSAoX2UgKyBhbHBoYSkvX2UKICAgICAgICAgICAgICAgIHAgPSBiKnUKICAgICAgICAgICAgICAgIGlmIHAgPD0gMS4wOgogICAgICAgICAgICAgICAgICAgIHggPSBwICoqICgxLjAvYWxwaGEpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHggPSAtX2xvZygoYi1wKS9hbHBoYSkKICAgICAgICAgICAgICAgIHUxID0gcmFuZG9tKCkKICAgICAgICAgICAgICAgIGlmIHAgPiAxLjA6CiAgICAgICAgICAgICAgICAgICAgaWYgdTEgPD0geCAqKiAoYWxwaGEgLSAxLjApOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiB1MSA8PSBfZXhwKC14KToKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICByZXR1cm4geCAqIGJldGEKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIEdhdXNzIChmYXN0ZXIgYWx0ZXJuYXRpdmUpIC0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGdhdXNzKHNlbGYsIG11LCBzaWdtYSk6CiAgICAgICAgIiIiR2F1c3NpYW4gZGlzdHJpYnV0aW9uLgoKICAgICAgICBtdSBpcyB0aGUgbWVhbiwgYW5kIHNpZ21hIGlzIHRoZSBzdGFuZGFyZCBkZXZpYXRpb24uICBUaGlzIGlzCiAgICAgICAgc2xpZ2h0bHkgZmFzdGVyIHRoYW4gdGhlIG5vcm1hbHZhcmlhdGUoKSBmdW5jdGlvbi4KCiAgICAgICAgTm90IHRocmVhZC1zYWZlIHdpdGhvdXQgYSBsb2NrIGFyb3VuZCBjYWxscy4KCiAgICAgICAgIiIiCgogICAgICAgICMgV2hlbiB4IGFuZCB5IGFyZSB0d28gdmFyaWFibGVzIGZyb20gWzAsIDEpLCB1bmlmb3JtbHkKICAgICAgICAjIGRpc3RyaWJ1dGVkLCB0aGVuCiAgICAgICAgIwogICAgICAgICMgICAgY29zKDIqcGkqeCkqc3FydCgtMipsb2coMS15KSkKICAgICAgICAjICAgIHNpbigyKnBpKngpKnNxcnQoLTIqbG9nKDEteSkpCiAgICAgICAgIwogICAgICAgICMgYXJlIHR3byAqaW5kZXBlbmRlbnQqIHZhcmlhYmxlcyB3aXRoIG5vcm1hbCBkaXN0cmlidXRpb24KICAgICAgICAjIChtdSA9IDAsIHNpZ21hID0gMSkuCiAgICAgICAgIyAoTGFtYmVydCBNZWVydGVucykKICAgICAgICAjIChjb3JyZWN0ZWQgdmVyc2lvbjsgYnVnIGRpc2NvdmVyZWQgYnkgTWlrZSBNaWxsZXIsIGZpeGVkIGJ5IExNKQoKICAgICAgICAjIE11bHRpdGhyZWFkaW5nIG5vdGU6IFdoZW4gdHdvIHRocmVhZHMgY2FsbCB0aGlzIGZ1bmN0aW9uCiAgICAgICAgIyBzaW11bHRhbmVvdXNseSwgaXQgaXMgcG9zc2libGUgdGhhdCB0aGV5IHdpbGwgcmVjZWl2ZSB0aGUKICAgICAgICAjIHNhbWUgcmV0dXJuIHZhbHVlLiAgVGhlIHdpbmRvdyBpcyB2ZXJ5IHNtYWxsIHRob3VnaC4gIFRvCiAgICAgICAgIyBhdm9pZCB0aGlzLCB5b3UgaGF2ZSB0byB1c2UgYSBsb2NrIGFyb3VuZCBhbGwgY2FsbHMuICAoSQogICAgICAgICMgZGlkbid0IHdhbnQgdG8gc2xvdyB0aGlzIGRvd24gaW4gdGhlIHNlcmlhbCBjYXNlIGJ5IHVzaW5nIGEKICAgICAgICAjIGxvY2sgaGVyZS4pCgogICAgICAgIHJhbmRvbSA9IHNlbGYucmFuZG9tCiAgICAgICAgeiA9IHNlbGYuZ2F1c3NfbmV4dAogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKICAgICAgICBpZiB6IGlzIE5vbmU6CiAgICAgICAgICAgIHgycGkgPSByYW5kb20oKSAqIFRXT1BJCiAgICAgICAgICAgIGcycmFkID0gX3NxcnQoLTIuMCAqIF9sb2coMS4wIC0gcmFuZG9tKCkpKQogICAgICAgICAgICB6ID0gX2Nvcyh4MnBpKSAqIGcycmFkCiAgICAgICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IF9zaW4oeDJwaSkgKiBnMnJhZAoKICAgICAgICByZXR1cm4gbXUgKyB6KnNpZ21hCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBiZXRhIC0tLS0tLS0tLS0tLS0tLS0tLS0tCiMjIFNlZQojIyBodHRwOi8vbWFpbC5weXRob24ub3JnL3BpcGVybWFpbC9weXRob24tYnVncy1saXN0LzIwMDEtSmFudWFyeS8wMDM3NTIuaHRtbAojIyBmb3IgSXZhbiBGcm9obmUncyBpbnNpZ2h0ZnVsIGFuYWx5c2lzIG9mIHdoeSB0aGUgb3JpZ2luYWwgaW1wbGVtZW50YXRpb246CiMjCiMjICAgIGRlZiBiZXRhdmFyaWF0ZShzZWxmLCBhbHBoYSwgYmV0YSk6CiMjICAgICAgICAjIERpc2NyZXRlIEV2ZW50IFNpbXVsYXRpb24gaW4gQywgcHAgODctODguCiMjCiMjICAgICAgICB5ID0gc2VsZi5leHBvdmFyaWF0ZShhbHBoYSkKIyMgICAgICAgIHogPSBzZWxmLmV4cG92YXJpYXRlKDEuMC9iZXRhKQojIyAgICAgICAgcmV0dXJuIHovKHkreikKIyMKIyMgd2FzIGRlYWQgd3JvbmcsIGFuZCBob3cgaXQgcHJvYmFibHkgZ290IHRoYXQgd2F5LgoKICAgIGRlZiBiZXRhdmFyaWF0ZShzZWxmLCBhbHBoYSwgYmV0YSk6CiAgICAgICAgIiIiQmV0YSBkaXN0cmlidXRpb24uCgogICAgICAgIENvbmRpdGlvbnMgb24gdGhlIHBhcmFtZXRlcnMgYXJlIGFscGhhID4gMCBhbmQgYmV0YSA+IDAuCiAgICAgICAgUmV0dXJuZWQgdmFsdWVzIHJhbmdlIGJldHdlZW4gMCBhbmQgMS4KCiAgICAgICAgIiIiCgogICAgICAgICMgVGhpcyB2ZXJzaW9uIGR1ZSB0byBKYW5uZSBTaW5ra29uZW4sIGFuZCBtYXRjaGVzIGFsbCB0aGUgc3RkCiAgICAgICAgIyB0ZXh0cyAoZS5nLiwgS251dGggVm9sIDIgRWQgMyBwZyAxMzQgInRoZSBiZXRhIGRpc3RyaWJ1dGlvbiIpLgogICAgICAgIHkgPSBzZWxmLmdhbW1hdmFyaWF0ZShhbHBoYSwgMS4pCiAgICAgICAgaWYgeSA9PSAwOgogICAgICAgICAgICByZXR1cm4gMC4wCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHkgLyAoeSArIHNlbGYuZ2FtbWF2YXJpYXRlKGJldGEsIDEuKSkKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIFBhcmV0byAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBwYXJldG92YXJpYXRlKHNlbGYsIGFscGhhKToKICAgICAgICAiIiJQYXJldG8gZGlzdHJpYnV0aW9uLiAgYWxwaGEgaXMgdGhlIHNoYXBlIHBhcmFtZXRlci4iIiIKICAgICAgICAjIEphaW4sIHBnLiA0OTUKCiAgICAgICAgdSA9IDEuMCAtIHNlbGYucmFuZG9tKCkKICAgICAgICByZXR1cm4gMS4wIC8gdSAqKiAoMS4wL2FscGhhKQoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gV2VpYnVsbCAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiB3ZWlidWxsdmFyaWF0ZShzZWxmLCBhbHBoYSwgYmV0YSk6CiAgICAgICAgIiIiV2VpYnVsbCBkaXN0cmlidXRpb24uCgogICAgICAgIGFscGhhIGlzIHRoZSBzY2FsZSBwYXJhbWV0ZXIgYW5kIGJldGEgaXMgdGhlIHNoYXBlIHBhcmFtZXRlci4KCiAgICAgICAgIiIiCiAgICAgICAgIyBKYWluLCBwZy4gNDk5OyBidWcgZml4IGNvdXJ0ZXN5IEJpbGwgQXJtcwoKICAgICAgICB1ID0gMS4wIC0gc2VsZi5yYW5kb20oKQogICAgICAgIHJldHVybiBhbHBoYSAqICgtX2xvZyh1KSkgKiogKDEuMC9iZXRhKQoKCiMjIC0tLS0tLS0tLS0tLS0tLSBPcGVyYXRpbmcgU3lzdGVtIFJhbmRvbSBTb3VyY2UgIC0tLS0tLS0tLS0tLS0tLS0tLQoKY2xhc3MgU3lzdGVtUmFuZG9tKFJhbmRvbSk6CiAgICAiIiJBbHRlcm5hdGUgcmFuZG9tIG51bWJlciBnZW5lcmF0b3IgdXNpbmcgc291cmNlcyBwcm92aWRlZAogICAgYnkgdGhlIG9wZXJhdGluZyBzeXN0ZW0gKHN1Y2ggYXMgL2Rldi91cmFuZG9tIG9uIFVuaXggb3IKICAgIENyeXB0R2VuUmFuZG9tIG9uIFdpbmRvd3MpLgoKICAgICBOb3QgYXZhaWxhYmxlIG9uIGFsbCBzeXN0ZW1zIChzZWUgb3MudXJhbmRvbSgpIGZvciBkZXRhaWxzKS4KICAgICIiIgoKICAgIGRlZiByYW5kb20oc2VsZik6CiAgICAgICAgIiIiR2V0IHRoZSBuZXh0IHJhbmRvbSBudW1iZXIgaW4gdGhlIHJhbmdlIFswLjAsIDEuMCkuIiIiCiAgICAgICAgcmV0dXJuIChpbnQuZnJvbV9ieXRlcyhfdXJhbmRvbSg3KSwgJ2JpZycpID4+IDMpICogUkVDSVBfQlBGCgogICAgZGVmIGdldHJhbmRiaXRzKHNlbGYsIGspOgogICAgICAgICIiImdldHJhbmRiaXRzKGspIC0+IHguICBHZW5lcmF0ZXMgYSBsb25nIGludCB3aXRoIGsgcmFuZG9tIGJpdHMuIiIiCiAgICAgICAgaWYgayA8PSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdudW1iZXIgb2YgYml0cyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvJykKICAgICAgICBpZiBrICE9IGludChrKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdudW1iZXIgb2YgYml0cyBzaG91bGQgYmUgYW4gaW50ZWdlcicpCiAgICAgICAgbnVtYnl0ZXMgPSAoayArIDcpIC8vIDggICAgICAgICAgICAgICAgICAgICAgICMgYml0cyAvIDggYW5kIHJvdW5kZWQgdXAKICAgICAgICB4ID0gaW50LmZyb21fYnl0ZXMoX3VyYW5kb20obnVtYnl0ZXMpLCAnYmlnJykKICAgICAgICByZXR1cm4geCA+PiAobnVtYnl0ZXMgKiA4IC0gaykgICAgICAgICAgICAgICAgIyB0cmltIGV4Y2VzcyBiaXRzCgogICAgZGVmIHNlZWQoc2VsZiwgKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgIlN0dWIgbWV0aG9kLiAgTm90IHVzZWQgZm9yIGEgc3lzdGVtIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yLiIKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBfbm90aW1wbGVtZW50ZWQoc2VsZiwgKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgIk1ldGhvZCBzaG91bGQgbm90IGJlIGNhbGxlZCBmb3IgYSBzeXN0ZW0gcmFuZG9tIG51bWJlciBnZW5lcmF0b3IuIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoJ1N5c3RlbSBlbnRyb3B5IHNvdXJjZSBkb2VzIG5vdCBoYXZlIHN0YXRlLicpCiAgICBnZXRzdGF0ZSA9IHNldHN0YXRlID0gX25vdGltcGxlbWVudGVkCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSB0ZXN0IHByb2dyYW0gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfdGVzdF9nZW5lcmF0b3IobiwgZnVuYywgYXJncyk6CiAgICBpbXBvcnQgdGltZQogICAgcHJpbnQobiwgJ3RpbWVzJywgZnVuYy5fX25hbWVfXykKICAgIHRvdGFsID0gMC4wCiAgICBzcXN1bSA9IDAuMAogICAgc21hbGxlc3QgPSAxZTEwCiAgICBsYXJnZXN0ID0gLTFlMTAKICAgIHQwID0gdGltZS50aW1lKCkKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIHggPSBmdW5jKCphcmdzKQogICAgICAgIHRvdGFsICs9IHgKICAgICAgICBzcXN1bSA9IHNxc3VtICsgeCp4CiAgICAgICAgc21hbGxlc3QgPSBtaW4oeCwgc21hbGxlc3QpCiAgICAgICAgbGFyZ2VzdCA9IG1heCh4LCBsYXJnZXN0KQogICAgdDEgPSB0aW1lLnRpbWUoKQogICAgcHJpbnQocm91bmQodDEtdDAsIDMpLCAnc2VjLCcsIGVuZD0nICcpCiAgICBhdmcgPSB0b3RhbC9uCiAgICBzdGRkZXYgPSBfc3FydChzcXN1bS9uIC0gYXZnKmF2ZykKICAgIHByaW50KCdhdmcgJWcsIHN0ZGRldiAlZywgbWluICVnLCBtYXggJWcnICUgXAogICAgICAgICAgICAgIChhdmcsIHN0ZGRldiwgc21hbGxlc3QsIGxhcmdlc3QpKQoKCmRlZiBfdGVzdChOPTIwMDApOgogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIHJhbmRvbSwgKCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgbm9ybWFsdmFyaWF0ZSwgKDAuMCwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBsb2dub3JtdmFyaWF0ZSwgKDAuMCwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCB2b25taXNlc3ZhcmlhdGUsICgwLjAsIDEuMCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgZ2FtbWF2YXJpYXRlLCAoMC4wMSwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBnYW1tYXZhcmlhdGUsICgwLjEsIDEuMCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgZ2FtbWF2YXJpYXRlLCAoMC4xLCAyLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhbW1hdmFyaWF0ZSwgKDAuNSwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBnYW1tYXZhcmlhdGUsICgwLjksIDEuMCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgZ2FtbWF2YXJpYXRlLCAoMS4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhbW1hdmFyaWF0ZSwgKDIuMCwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBnYW1tYXZhcmlhdGUsICgyMC4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhbW1hdmFyaWF0ZSwgKDIwMC4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhdXNzLCAoMC4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGJldGF2YXJpYXRlLCAoMy4wLCAzLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIHRyaWFuZ3VsYXIsICgwLjAsIDEuMCwgMS4wLzMuMCkpCgojIENyZWF0ZSBvbmUgaW5zdGFuY2UsIHNlZWRlZCBmcm9tIGN1cnJlbnQgdGltZSwgYW5kIGV4cG9ydCBpdHMgbWV0aG9kcwojIGFzIG1vZHVsZS1sZXZlbCBmdW5jdGlvbnMuICBUaGUgZnVuY3Rpb25zIHNoYXJlIHN0YXRlIGFjcm9zcyBhbGwgdXNlcwojKGJvdGggaW4gdGhlIHVzZXIncyBjb2RlIGFuZCBpbiB0aGUgUHl0aG9uIGxpYnJhcmllcyksIGJ1dCB0aGF0J3MgZmluZQojIGZvciBtb3N0IHByb2dyYW1zIGFuZCBpcyBlYXNpZXIgZm9yIHRoZSBjYXN1YWwgdXNlciB0aGFuIG1ha2luZyB0aGVtCiMgaW5zdGFudGlhdGUgdGhlaXIgb3duIFJhbmRvbSgpIGluc3RhbmNlLgoKX2luc3QgPSBSYW5kb20oKQpzZWVkID0gX2luc3Quc2VlZApyYW5kb20gPSBfaW5zdC5yYW5kb20KdW5pZm9ybSA9IF9pbnN0LnVuaWZvcm0KdHJpYW5ndWxhciA9IF9pbnN0LnRyaWFuZ3VsYXIKcmFuZGludCA9IF9pbnN0LnJhbmRpbnQKY2hvaWNlID0gX2luc3QuY2hvaWNlCnJhbmRyYW5nZSA9IF9pbnN0LnJhbmRyYW5nZQpzYW1wbGUgPSBfaW5zdC5zYW1wbGUKc2h1ZmZsZSA9IF9pbnN0LnNodWZmbGUKbm9ybWFsdmFyaWF0ZSA9IF9pbnN0Lm5vcm1hbHZhcmlhdGUKbG9nbm9ybXZhcmlhdGUgPSBfaW5zdC5sb2dub3JtdmFyaWF0ZQpleHBvdmFyaWF0ZSA9IF9pbnN0LmV4cG92YXJpYXRlCnZvbm1pc2VzdmFyaWF0ZSA9IF9pbnN0LnZvbm1pc2VzdmFyaWF0ZQpnYW1tYXZhcmlhdGUgPSBfaW5zdC5nYW1tYXZhcmlhdGUKZ2F1c3MgPSBfaW5zdC5nYXVzcwpiZXRhdmFyaWF0ZSA9IF9pbnN0LmJldGF2YXJpYXRlCnBhcmV0b3ZhcmlhdGUgPSBfaW5zdC5wYXJldG92YXJpYXRlCndlaWJ1bGx2YXJpYXRlID0gX2luc3Qud2VpYnVsbHZhcmlhdGUKZ2V0c3RhdGUgPSBfaW5zdC5nZXRzdGF0ZQpzZXRzdGF0ZSA9IF9pbnN0LnNldHN0YXRlCmdldHJhbmRiaXRzID0gX2luc3QuZ2V0cmFuZGJpdHMKCiNpZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgojICAgIF90ZXN0KCkKCg==',
'/Lib/pprint.py':'IyAgQXV0aG9yOiAgICAgIEZyZWQgTC4gRHJha2UsIEpyLg0KIyAgICAgICAgICAgICAgIGZkcmFrZUBhY20ub3JnDQojDQojICBUaGlzIGlzIGEgc2ltcGxlIGxpdHRsZSBtb2R1bGUgSSB3cm90ZSB0byBtYWtlIGxpZmUgZWFzaWVyLiAgSSBkaWRuJ3QNCiMgIHNlZSBhbnl0aGluZyBxdWl0ZSBsaWtlIGl0IGluIHRoZSBsaWJyYXJ5LCB0aG91Z2ggSSBtYXkgaGF2ZSBvdmVybG9va2VkDQojICBzb21ldGhpbmcuICBJIHdyb3RlIHRoaXMgd2hlbiBJIHdhcyB0cnlpbmcgdG8gcmVhZCBzb21lIGhlYXZpbHkgbmVzdGVkDQojICB0dXBsZXMgd2l0aCBmYWlybHkgbm9uLWRlc2NyaXB0aXZlIGNvbnRlbnQuICBUaGlzIGlzIG1vZGVsZWQgdmVyeSBtdWNoDQojICBhZnRlciBMaXNwL1NjaGVtZSAtIHN0eWxlIHByZXR0eS1wcmludGluZyBvZiBsaXN0cy4gIElmIHlvdSBmaW5kIGl0DQojICB1c2VmdWwsIHRoYW5rIHNtYWxsIGNoaWxkcmVuIHdobyBzbGVlcCBhdCBuaWdodC4NCg0KIiIiU3VwcG9ydCB0byBwcmV0dHktcHJpbnQgbGlzdHMsIHR1cGxlcywgJiBkaWN0aW9uYXJpZXMgcmVjdXJzaXZlbHkuDQoNClZlcnkgc2ltcGxlLCBidXQgdXNlZnVsLCBlc3BlY2lhbGx5IGluIGRlYnVnZ2luZyBkYXRhIHN0cnVjdHVyZXMuDQoNCkNsYXNzZXMNCi0tLS0tLS0NCg0KUHJldHR5UHJpbnRlcigpDQogICAgSGFuZGxlIHByZXR0eS1wcmludGluZyBvcGVyYXRpb25zIG9udG8gYSBzdHJlYW0gdXNpbmcgYSBjb25maWd1cmVkDQogICAgc2V0IG9mIGZvcm1hdHRpbmcgcGFyYW1ldGVycy4NCg0KRnVuY3Rpb25zDQotLS0tLS0tLS0NCg0KcGZvcm1hdCgpDQogICAgRm9ybWF0IGEgUHl0aG9uIG9iamVjdCBpbnRvIGEgcHJldHR5LXByaW50ZWQgcmVwcmVzZW50YXRpb24uDQoNCnBwcmludCgpDQogICAgUHJldHR5LXByaW50IGEgUHl0aG9uIG9iamVjdCB0byBhIHN0cmVhbSBbZGVmYXVsdCBpcyBzeXMuc3Rkb3V0XS4NCg0Kc2FmZXJlcHIoKQ0KICAgIEdlbmVyYXRlIGEgJ3N0YW5kYXJkJyByZXByKCktbGlrZSB2YWx1ZSwgYnV0IHByb3RlY3QgYWdhaW5zdCByZWN1cnNpdmUNCiAgICBkYXRhIHN0cnVjdHVyZXMuDQoNCiIiIg0KDQppbXBvcnQgc3lzIGFzIF9zeXMNCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE9yZGVyZWREaWN0IGFzIF9PcmRlcmVkRGljdA0KZnJvbSBpbyBpbXBvcnQgU3RyaW5nSU8gYXMgX1N0cmluZ0lPDQoNCl9fYWxsX18gPSBbInBwcmludCIsInBmb3JtYXQiLCJpc3JlYWRhYmxlIiwiaXNyZWN1cnNpdmUiLCJzYWZlcmVwciIsDQogICAgICAgICAgICJQcmV0dHlQcmludGVyIl0NCg0KIyBjYWNoZSB0aGVzZSBmb3IgZmFzdGVyIGFjY2VzczoNCl9jb21tYWpvaW4gPSAiLCAiLmpvaW4NCl9pZCA9IGlkDQpfbGVuID0gbGVuDQpfdHlwZSA9IHR5cGUNCg0KDQpkZWYgcHByaW50KG9iamVjdCwgc3RyZWFtPU5vbmUsIGluZGVudD0xLCB3aWR0aD04MCwgZGVwdGg9Tm9uZSk6DQogICAgIiIiUHJldHR5LXByaW50IGEgUHl0aG9uIG9iamVjdCB0byBhIHN0cmVhbSBbZGVmYXVsdCBpcyBzeXMuc3Rkb3V0XS4iIiINCiAgICBwcmludGVyID0gUHJldHR5UHJpbnRlcigNCiAgICAgICAgc3RyZWFtPXN0cmVhbSwgaW5kZW50PWluZGVudCwgd2lkdGg9d2lkdGgsIGRlcHRoPWRlcHRoKQ0KICAgIHByaW50ZXIucHByaW50KG9iamVjdCkNCg0KZGVmIHBmb3JtYXQob2JqZWN0LCBpbmRlbnQ9MSwgd2lkdGg9ODAsIGRlcHRoPU5vbmUpOg0KICAgICIiIkZvcm1hdCBhIFB5dGhvbiBvYmplY3QgaW50byBhIHByZXR0eS1wcmludGVkIHJlcHJlc2VudGF0aW9uLiIiIg0KICAgIHJldHVybiBQcmV0dHlQcmludGVyKGluZGVudD1pbmRlbnQsIHdpZHRoPXdpZHRoLCBkZXB0aD1kZXB0aCkucGZvcm1hdChvYmplY3QpDQoNCmRlZiBzYWZlcmVwcihvYmplY3QpOg0KICAgICIiIlZlcnNpb24gb2YgcmVwcigpIHdoaWNoIGNhbiBoYW5kbGUgcmVjdXJzaXZlIGRhdGEgc3RydWN0dXJlcy4iIiINCiAgICByZXR1cm4gX3NhZmVfcmVwcihvYmplY3QsIHt9LCBOb25lLCAwKVswXQ0KDQpkZWYgaXNyZWFkYWJsZShvYmplY3QpOg0KICAgICIiIkRldGVybWluZSBpZiBzYWZlcmVwcihvYmplY3QpIGlzIHJlYWRhYmxlIGJ5IGV2YWwoKS4iIiINCiAgICByZXR1cm4gX3NhZmVfcmVwcihvYmplY3QsIHt9LCBOb25lLCAwKVsxXQ0KDQpkZWYgaXNyZWN1cnNpdmUob2JqZWN0KToNCiAgICAiIiJEZXRlcm1pbmUgaWYgb2JqZWN0IHJlcXVpcmVzIGEgcmVjdXJzaXZlIHJlcHJlc2VudGF0aW9uLiIiIg0KICAgIHJldHVybiBfc2FmZV9yZXByKG9iamVjdCwge30sIE5vbmUsIDApWzJdDQoNCmNsYXNzIF9zYWZlX2tleToNCiAgICAiIiJIZWxwZXIgZnVuY3Rpb24gZm9yIGtleSBmdW5jdGlvbnMgd2hlbiBzb3J0aW5nIHVub3JkZXJhYmxlIG9iamVjdHMuDQoNCiAgICBUaGUgd3JhcHBlZC1vYmplY3Qgd2lsbCBmYWxsYmFjayB0byBhbiBQeTIueCBzdHlsZSBjb21wYXJpc29uIGZvcg0KICAgIHVub3JkZXJhYmxlIHR5cGVzIChzb3J0aW5nIGZpcnN0IGNvbXBhcmluZyB0aGUgdHlwZSBuYW1lIGFuZCB0aGVuIGJ5DQogICAgdGhlIG9iaiBpZHMpLiAgRG9lcyBub3Qgd29yayByZWN1cnNpdmVseSwgc28gZGljdC5pdGVtcygpIG11c3QgaGF2ZQ0KICAgIF9zYWZlX2tleSBhcHBsaWVkIHRvIGJvdGggdGhlIGtleSBhbmQgdGhlIHZhbHVlLg0KDQogICAgIiIiDQoNCiAgICBfX3Nsb3RzX18gPSBbJ29iaiddDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgb2JqKToNCiAgICAgICAgc2VsZi5vYmogPSBvYmoNCg0KICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBydiA9IHNlbGYub2JqLl9fbHRfXyhvdGhlci5vYmopDQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgICAgICBydiA9IE5vdEltcGxlbWVudGVkDQoNCiAgICAgICAgaWYgcnYgaXMgTm90SW1wbGVtZW50ZWQ6DQogICAgICAgICAgICBydiA9IChzdHIodHlwZShzZWxmLm9iaikpLCBpZChzZWxmLm9iaikpIDwgXA0KICAgICAgICAgICAgICAgICAoc3RyKHR5cGUob3RoZXIub2JqKSksIGlkKG90aGVyLm9iaikpDQogICAgICAgIHJldHVybiBydg0KDQpkZWYgX3NhZmVfdHVwbGUodCk6DQogICAgIkhlbHBlciBmdW5jdGlvbiBmb3IgY29tcGFyaW5nIDItdHVwbGVzIg0KICAgIHJldHVybiBfc2FmZV9rZXkodFswXSksIF9zYWZlX2tleSh0WzFdKQ0KDQpjbGFzcyBQcmV0dHlQcmludGVyOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbmRlbnQ9MSwgd2lkdGg9ODAsIGRlcHRoPU5vbmUsIHN0cmVhbT1Ob25lKToNCiAgICAgICAgIiIiSGFuZGxlIHByZXR0eSBwcmludGluZyBvcGVyYXRpb25zIG9udG8gYSBzdHJlYW0gdXNpbmcgYSBzZXQgb2YNCiAgICAgICAgY29uZmlndXJlZCBwYXJhbWV0ZXJzLg0KDQogICAgICAgIGluZGVudA0KICAgICAgICAgICAgTnVtYmVyIG9mIHNwYWNlcyB0byBpbmRlbnQgZm9yIGVhY2ggbGV2ZWwgb2YgbmVzdGluZy4NCg0KICAgICAgICB3aWR0aA0KICAgICAgICAgICAgQXR0ZW1wdGVkIG1heGltdW0gbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIG91dHB1dC4NCg0KICAgICAgICBkZXB0aA0KICAgICAgICAgICAgVGhlIG1heGltdW0gZGVwdGggdG8gcHJpbnQgb3V0IG5lc3RlZCBzdHJ1Y3R1cmVzLg0KDQogICAgICAgIHN0cmVhbQ0KICAgICAgICAgICAgVGhlIGRlc2lyZWQgb3V0cHV0IHN0cmVhbS4gIElmIG9taXR0ZWQgKG9yIGZhbHNlKSwgdGhlIHN0YW5kYXJkDQogICAgICAgICAgICBvdXRwdXQgc3RyZWFtIGF2YWlsYWJsZSBhdCBjb25zdHJ1Y3Rpb24gd2lsbCBiZSB1c2VkLg0KDQogICAgICAgICIiIg0KICAgICAgICBpbmRlbnQgPSBpbnQoaW5kZW50KQ0KICAgICAgICB3aWR0aCA9IGludCh3aWR0aCkNCiAgICAgICAgYXNzZXJ0IGluZGVudCA+PSAwLCAiaW5kZW50IG11c3QgYmUgPj0gMCINCiAgICAgICAgYXNzZXJ0IGRlcHRoIGlzIE5vbmUgb3IgZGVwdGggPiAwLCAiZGVwdGggbXVzdCBiZSA+IDAiDQogICAgICAgIGFzc2VydCB3aWR0aCwgIndpZHRoIG11c3QgYmUgIT0gMCINCiAgICAgICAgc2VsZi5fZGVwdGggPSBkZXB0aA0KICAgICAgICBzZWxmLl9pbmRlbnRfcGVyX2xldmVsID0gaW5kZW50DQogICAgICAgIHNlbGYuX3dpZHRoID0gd2lkdGgNCiAgICAgICAgaWYgc3RyZWFtIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgc2VsZi5fc3RyZWFtID0gc3RyZWFtDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLl9zdHJlYW0gPSBfc3lzLnN0ZG91dA0KDQogICAgZGVmIHBwcmludChzZWxmLCBvYmplY3QpOg0KICAgICAgICBzZWxmLl9mb3JtYXQob2JqZWN0LCBzZWxmLl9zdHJlYW0sIDAsIDAsIHt9LCAwKQ0KICAgICAgICBzZWxmLl9zdHJlYW0ud3JpdGUoIlxuIikNCg0KICAgIGRlZiBwZm9ybWF0KHNlbGYsIG9iamVjdCk6DQogICAgICAgIHNpbyA9IF9TdHJpbmdJTygpDQogICAgICAgIHNlbGYuX2Zvcm1hdChvYmplY3QsIHNpbywgMCwgMCwge30sIDApDQogICAgICAgIHJldHVybiBzaW8uZ2V0dmFsdWUoKQ0KDQogICAgZGVmIGlzcmVjdXJzaXZlKHNlbGYsIG9iamVjdCk6DQogICAgICAgIHJldHVybiBzZWxmLmZvcm1hdChvYmplY3QsIHt9LCAwLCAwKVsyXQ0KDQogICAgZGVmIGlzcmVhZGFibGUoc2VsZiwgb2JqZWN0KToNCiAgICAgICAgcywgcmVhZGFibGUsIHJlY3Vyc2l2ZSA9IHNlbGYuZm9ybWF0KG9iamVjdCwge30sIDAsIDApDQogICAgICAgIHJldHVybiByZWFkYWJsZSBhbmQgbm90IHJlY3Vyc2l2ZQ0KDQogICAgZGVmIF9mb3JtYXQoc2VsZiwgb2JqZWN0LCBzdHJlYW0sIGluZGVudCwgYWxsb3dhbmNlLCBjb250ZXh0LCBsZXZlbCk6DQogICAgICAgIGxldmVsID0gbGV2ZWwgKyAxDQogICAgICAgIG9iamlkID0gX2lkKG9iamVjdCkNCiAgICAgICAgaWYgb2JqaWQgaW4gY29udGV4dDoNCiAgICAgICAgICAgIHN0cmVhbS53cml0ZShfcmVjdXJzaW9uKG9iamVjdCkpDQogICAgICAgICAgICBzZWxmLl9yZWN1cnNpdmUgPSBUcnVlDQogICAgICAgICAgICBzZWxmLl9yZWFkYWJsZSA9IEZhbHNlDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgcmVwID0gc2VsZi5fcmVwcihvYmplY3QsIGNvbnRleHQsIGxldmVsIC0gMSkNCiAgICAgICAgdHlwID0gX3R5cGUob2JqZWN0KQ0KICAgICAgICBzZXBMaW5lcyA9IF9sZW4ocmVwKSA+IChzZWxmLl93aWR0aCAtIDEgLSBpbmRlbnQgLSBhbGxvd2FuY2UpDQogICAgICAgIHdyaXRlID0gc3RyZWFtLndyaXRlDQoNCiAgICAgICAgaWYgc2VsZi5fZGVwdGggYW5kIGxldmVsID4gc2VsZi5fZGVwdGg6DQogICAgICAgICAgICB3cml0ZShyZXApDQogICAgICAgICAgICByZXR1cm4NCg0KICAgICAgICBpZiBzZXBMaW5lczoNCiAgICAgICAgICAgIHIgPSBnZXRhdHRyKHR5cCwgIl9fcmVwcl9fIiwgTm9uZSkNCiAgICAgICAgICAgIGlmIGlzc3ViY2xhc3ModHlwLCBkaWN0KToNCiAgICAgICAgICAgICAgICB3cml0ZSgneycpDQogICAgICAgICAgICAgICAgaWYgc2VsZi5faW5kZW50X3Blcl9sZXZlbCA+IDE6DQogICAgICAgICAgICAgICAgICAgIHdyaXRlKChzZWxmLl9pbmRlbnRfcGVyX2xldmVsIC0gMSkgKiAnICcpDQogICAgICAgICAgICAgICAgbGVuZ3RoID0gX2xlbihvYmplY3QpDQogICAgICAgICAgICAgICAgaWYgbGVuZ3RoOg0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0W29iamlkXSA9IDENCiAgICAgICAgICAgICAgICAgICAgaW5kZW50ID0gaW5kZW50ICsgc2VsZi5faW5kZW50X3Blcl9sZXZlbA0KICAgICAgICAgICAgICAgICAgICBpZiBpc3N1YmNsYXNzKHR5cCwgX09yZGVyZWREaWN0KToNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gbGlzdChvYmplY3QuaXRlbXMoKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gc29ydGVkKG9iamVjdC5pdGVtcygpLCBrZXk9X3NhZmVfdHVwbGUpDQogICAgICAgICAgICAgICAgICAgIGtleSwgZW50ID0gaXRlbXNbMF0NCiAgICAgICAgICAgICAgICAgICAgcmVwID0gc2VsZi5fcmVwcihrZXksIGNvbnRleHQsIGxldmVsKQ0KICAgICAgICAgICAgICAgICAgICB3cml0ZShyZXApDQogICAgICAgICAgICAgICAgICAgIHdyaXRlKCc6ICcpDQogICAgICAgICAgICAgICAgICAgIHNlbGYuX2Zvcm1hdChlbnQsIHN0cmVhbSwgaW5kZW50ICsgX2xlbihyZXApICsgMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd2FuY2UgKyAxLCBjb250ZXh0LCBsZXZlbCkNCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuZ3RoID4gMToNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBrZXksIGVudCBpbiBpdGVtc1sxOl06DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwID0gc2VsZi5fcmVwcihrZXksIGNvbnRleHQsIGxldmVsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlKCcsXG4lcyVzOiAnICUgKCcgJyppbmRlbnQsIHJlcCkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZm9ybWF0KGVudCwgc3RyZWFtLCBpbmRlbnQgKyBfbGVuKHJlcCkgKyAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dhbmNlICsgMSwgY29udGV4dCwgbGV2ZWwpDQogICAgICAgICAgICAgICAgICAgIGluZGVudCA9IGluZGVudCAtIHNlbGYuX2luZGVudF9wZXJfbGV2ZWwNCiAgICAgICAgICAgICAgICAgICAgZGVsIGNvbnRleHRbb2JqaWRdDQogICAgICAgICAgICAgICAgd3JpdGUoJ30nKQ0KICAgICAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgICAgICBpZiAoKGlzc3ViY2xhc3ModHlwLCBsaXN0KSBhbmQgciBpcyBsaXN0Ll9fcmVwcl9fKSBvcg0KICAgICAgICAgICAgICAgIChpc3N1YmNsYXNzKHR5cCwgdHVwbGUpIGFuZCByIGlzIHR1cGxlLl9fcmVwcl9fKSBvcg0KICAgICAgICAgICAgICAgIChpc3N1YmNsYXNzKHR5cCwgc2V0KSBhbmQgciBpcyBzZXQuX19yZXByX18pIG9yDQogICAgICAgICAgICAgICAgKGlzc3ViY2xhc3ModHlwLCBmcm96ZW5zZXQpIGFuZCByIGlzIGZyb3plbnNldC5fX3JlcHJfXykNCiAgICAgICAgICAgICAgICk6DQogICAgICAgICAgICAgICAgbGVuZ3RoID0gX2xlbihvYmplY3QpDQogICAgICAgICAgICAgICAgaWYgaXNzdWJjbGFzcyh0eXAsIGxpc3QpOg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgnWycpDQogICAgICAgICAgICAgICAgICAgIGVuZGNoYXIgPSAnXScNCiAgICAgICAgICAgICAgICBlbGlmIGlzc3ViY2xhc3ModHlwLCBzZXQpOg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgbGVuZ3RoOg0KICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUoJ3NldCgpJykNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgneycpDQogICAgICAgICAgICAgICAgICAgIGVuZGNoYXIgPSAnfScNCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0gc29ydGVkKG9iamVjdCwga2V5PV9zYWZlX2tleSkNCiAgICAgICAgICAgICAgICBlbGlmIGlzc3ViY2xhc3ModHlwLCBmcm96ZW5zZXQpOg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgbGVuZ3RoOg0KICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUoJ2Zyb3plbnNldCgpJykNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgnZnJvemVuc2V0KHsnKQ0KICAgICAgICAgICAgICAgICAgICBlbmRjaGFyID0gJ30pJw0KICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBzb3J0ZWQob2JqZWN0LCBrZXk9X3NhZmVfa2V5KQ0KICAgICAgICAgICAgICAgICAgICBpbmRlbnQgKz0gMTANCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgnKCcpDQogICAgICAgICAgICAgICAgICAgIGVuZGNoYXIgPSAnKScNCiAgICAgICAgICAgICAgICBpZiBzZWxmLl9pbmRlbnRfcGVyX2xldmVsID4gMToNCiAgICAgICAgICAgICAgICAgICAgd3JpdGUoKHNlbGYuX2luZGVudF9wZXJfbGV2ZWwgLSAxKSAqICcgJykNCiAgICAgICAgICAgICAgICBpZiBsZW5ndGg6DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHRbb2JqaWRdID0gMQ0KICAgICAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgKyBzZWxmLl9pbmRlbnRfcGVyX2xldmVsDQogICAgICAgICAgICAgICAgICAgIHNlbGYuX2Zvcm1hdChvYmplY3RbMF0sIHN0cmVhbSwgaW5kZW50LCBhbGxvd2FuY2UgKyAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCwgbGV2ZWwpDQogICAgICAgICAgICAgICAgICAgIGlmIGxlbmd0aCA+IDE6DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgZW50IGluIG9iamVjdFsxOl06DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUoJyxcbicgKyAnICcqaW5kZW50KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2Zvcm1hdChlbnQsIHN0cmVhbSwgaW5kZW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dhbmNlICsgMSwgY29udGV4dCwgbGV2ZWwpDQogICAgICAgICAgICAgICAgICAgIGluZGVudCA9IGluZGVudCAtIHNlbGYuX2luZGVudF9wZXJfbGV2ZWwNCiAgICAgICAgICAgICAgICAgICAgZGVsIGNvbnRleHRbb2JqaWRdDQogICAgICAgICAgICAgICAgaWYgaXNzdWJjbGFzcyh0eXAsIHR1cGxlKSBhbmQgbGVuZ3RoID09IDE6DQogICAgICAgICAgICAgICAgICAgIHdyaXRlKCcsJykNCiAgICAgICAgICAgICAgICB3cml0ZShlbmRjaGFyKQ0KICAgICAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgIHdyaXRlKHJlcCkNCg0KICAgIGRlZiBfcmVwcihzZWxmLCBvYmplY3QsIGNvbnRleHQsIGxldmVsKToNCiAgICAgICAgcmVwciwgcmVhZGFibGUsIHJlY3Vyc2l2ZSA9IHNlbGYuZm9ybWF0KG9iamVjdCwgY29udGV4dC5jb3B5KCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kZXB0aCwgbGV2ZWwpDQogICAgICAgIGlmIG5vdCByZWFkYWJsZToNCiAgICAgICAgICAgIHNlbGYuX3JlYWRhYmxlID0gRmFsc2UNCiAgICAgICAgaWYgcmVjdXJzaXZlOg0KICAgICAgICAgICAgc2VsZi5fcmVjdXJzaXZlID0gVHJ1ZQ0KICAgICAgICByZXR1cm4gcmVwcg0KDQogICAgZGVmIGZvcm1hdChzZWxmLCBvYmplY3QsIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpOg0KICAgICAgICAiIiJGb3JtYXQgb2JqZWN0IGZvciBhIHNwZWNpZmljIGNvbnRleHQsIHJldHVybmluZyBhIHN0cmluZw0KICAgICAgICBhbmQgZmxhZ3MgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSByZXByZXNlbnRhdGlvbiBpcyAncmVhZGFibGUnDQogICAgICAgIGFuZCB3aGV0aGVyIHRoZSBvYmplY3QgcmVwcmVzZW50cyBhIHJlY3Vyc2l2ZSBjb25zdHJ1Y3QuDQogICAgICAgICIiIg0KICAgICAgICByZXR1cm4gX3NhZmVfcmVwcihvYmplY3QsIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpDQoNCg0KIyBSZXR1cm4gdHJpcGxlIChyZXByX3N0cmluZywgaXNyZWFkYWJsZSwgaXNyZWN1cnNpdmUpLg0KDQpkZWYgX3NhZmVfcmVwcihvYmplY3QsIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpOg0KICAgIHR5cCA9IF90eXBlKG9iamVjdCkNCiAgICBpZiB0eXAgaXMgc3RyOg0KICAgICAgICBpZiAnbG9jYWxlJyBub3QgaW4gX3N5cy5tb2R1bGVzOg0KICAgICAgICAgICAgcmV0dXJuIHJlcHIob2JqZWN0KSwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgaWYgIiciIGluIG9iamVjdCBhbmQgJyInIG5vdCBpbiBvYmplY3Q6DQogICAgICAgICAgICBjbG9zdXJlID0gJyInDQogICAgICAgICAgICBxdW90ZXMgPSB7JyInOiAnXFwiJ30NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGNsb3N1cmUgPSAiJyINCiAgICAgICAgICAgIHF1b3RlcyA9IHsiJyI6ICJcXCcifQ0KICAgICAgICBxZ2V0ID0gcXVvdGVzLmdldA0KICAgICAgICBzaW8gPSBfU3RyaW5nSU8oKQ0KICAgICAgICB3cml0ZSA9IHNpby53cml0ZQ0KICAgICAgICBmb3IgY2hhciBpbiBvYmplY3Q6DQogICAgICAgICAgICBpZiBjaGFyLmlzYWxwaGEoKToNCiAgICAgICAgICAgICAgICB3cml0ZShjaGFyKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICB3cml0ZShxZ2V0KGNoYXIsIHJlcHIoY2hhcilbMTotMV0pKQ0KICAgICAgICByZXR1cm4gKCIlcyVzJXMiICUgKGNsb3N1cmUsIHNpby5nZXR2YWx1ZSgpLCBjbG9zdXJlKSksIFRydWUsIEZhbHNlDQoNCiAgICByID0gZ2V0YXR0cih0eXAsICJfX3JlcHJfXyIsIE5vbmUpDQogICAgaWYgaXNzdWJjbGFzcyh0eXAsIGRpY3QpIGFuZCByIGlzIGRpY3QuX19yZXByX186DQogICAgICAgIGlmIG5vdCBvYmplY3Q6DQogICAgICAgICAgICByZXR1cm4gInt9IiwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgb2JqaWQgPSBfaWQob2JqZWN0KQ0KICAgICAgICBpZiBtYXhsZXZlbHMgYW5kIGxldmVsID49IG1heGxldmVsczoNCiAgICAgICAgICAgIHJldHVybiAiey4uLn0iLCBGYWxzZSwgb2JqaWQgaW4gY29udGV4dA0KICAgICAgICBpZiBvYmppZCBpbiBjb250ZXh0Og0KICAgICAgICAgICAgcmV0dXJuIF9yZWN1cnNpb24ob2JqZWN0KSwgRmFsc2UsIFRydWUNCiAgICAgICAgY29udGV4dFtvYmppZF0gPSAxDQogICAgICAgIHJlYWRhYmxlID0gVHJ1ZQ0KICAgICAgICByZWN1cnNpdmUgPSBGYWxzZQ0KICAgICAgICBjb21wb25lbnRzID0gW10NCiAgICAgICAgYXBwZW5kID0gY29tcG9uZW50cy5hcHBlbmQNCiAgICAgICAgbGV2ZWwgKz0gMQ0KICAgICAgICBzYWZlcmVwciA9IF9zYWZlX3JlcHINCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQob2JqZWN0Lml0ZW1zKCksIGtleT1fc2FmZV90dXBsZSkNCiAgICAgICAgZm9yIGssIHYgaW4gaXRlbXM6DQogICAgICAgICAgICBrcmVwciwga3JlYWRhYmxlLCBrcmVjdXIgPSBzYWZlcmVwcihrLCBjb250ZXh0LCBtYXhsZXZlbHMsIGxldmVsKQ0KICAgICAgICAgICAgdnJlcHIsIHZyZWFkYWJsZSwgdnJlY3VyID0gc2FmZXJlcHIodiwgY29udGV4dCwgbWF4bGV2ZWxzLCBsZXZlbCkNCiAgICAgICAgICAgIGFwcGVuZCgiJXM6ICVzIiAlIChrcmVwciwgdnJlcHIpKQ0KICAgICAgICAgICAgcmVhZGFibGUgPSByZWFkYWJsZSBhbmQga3JlYWRhYmxlIGFuZCB2cmVhZGFibGUNCiAgICAgICAgICAgIGlmIGtyZWN1ciBvciB2cmVjdXI6DQogICAgICAgICAgICAgICAgcmVjdXJzaXZlID0gVHJ1ZQ0KICAgICAgICBkZWwgY29udGV4dFtvYmppZF0NCiAgICAgICAgcmV0dXJuICJ7JXN9IiAlIF9jb21tYWpvaW4oY29tcG9uZW50cyksIHJlYWRhYmxlLCByZWN1cnNpdmUNCg0KICAgIGlmIChpc3N1YmNsYXNzKHR5cCwgbGlzdCkgYW5kIHIgaXMgbGlzdC5fX3JlcHJfXykgb3IgXA0KICAgICAgIChpc3N1YmNsYXNzKHR5cCwgdHVwbGUpIGFuZCByIGlzIHR1cGxlLl9fcmVwcl9fKToNCiAgICAgICAgaWYgaXNzdWJjbGFzcyh0eXAsIGxpc3QpOg0KICAgICAgICAgICAgaWYgbm90IG9iamVjdDoNCiAgICAgICAgICAgICAgICByZXR1cm4gIltdIiwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgICAgIGZvcm1hdCA9ICJbJXNdIg0KICAgICAgICBlbGlmIF9sZW4ob2JqZWN0KSA9PSAxOg0KICAgICAgICAgICAgZm9ybWF0ID0gIiglcywpIg0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaWYgbm90IG9iamVjdDoNCiAgICAgICAgICAgICAgICByZXR1cm4gIigpIiwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgICAgIGZvcm1hdCA9ICIoJXMpIg0KICAgICAgICBvYmppZCA9IF9pZChvYmplY3QpDQogICAgICAgIGlmIG1heGxldmVscyBhbmQgbGV2ZWwgPj0gbWF4bGV2ZWxzOg0KICAgICAgICAgICAgcmV0dXJuIGZvcm1hdCAlICIuLi4iLCBGYWxzZSwgb2JqaWQgaW4gY29udGV4dA0KICAgICAgICBpZiBvYmppZCBpbiBjb250ZXh0Og0KICAgICAgICAgICAgcmV0dXJuIF9yZWN1cnNpb24ob2JqZWN0KSwgRmFsc2UsIFRydWUNCiAgICAgICAgY29udGV4dFtvYmppZF0gPSAxDQogICAgICAgIHJlYWRhYmxlID0gVHJ1ZQ0KICAgICAgICByZWN1cnNpdmUgPSBGYWxzZQ0KICAgICAgICBjb21wb25lbnRzID0gW10NCiAgICAgICAgYXBwZW5kID0gY29tcG9uZW50cy5hcHBlbmQNCiAgICAgICAgbGV2ZWwgKz0gMQ0KICAgICAgICBmb3IgbyBpbiBvYmplY3Q6DQogICAgICAgICAgICBvcmVwciwgb3JlYWRhYmxlLCBvcmVjdXIgPSBfc2FmZV9yZXByKG8sIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpDQogICAgICAgICAgICBhcHBlbmQob3JlcHIpDQogICAgICAgICAgICBpZiBub3Qgb3JlYWRhYmxlOg0KICAgICAgICAgICAgICAgIHJlYWRhYmxlID0gRmFsc2UNCiAgICAgICAgICAgIGlmIG9yZWN1cjoNCiAgICAgICAgICAgICAgICByZWN1cnNpdmUgPSBUcnVlDQogICAgICAgIGRlbCBjb250ZXh0W29iamlkXQ0KICAgICAgICByZXR1cm4gZm9ybWF0ICUgX2NvbW1ham9pbihjb21wb25lbnRzKSwgcmVhZGFibGUsIHJlY3Vyc2l2ZQ0KDQogICAgcmVwID0gcmVwcihvYmplY3QpDQogICAgcmV0dXJuIHJlcCwgKHJlcCBhbmQgbm90IHJlcC5zdGFydHN3aXRoKCc8JykpLCBGYWxzZQ0KDQoNCmRlZiBfcmVjdXJzaW9uKG9iamVjdCk6DQogICAgcmV0dXJuICgiPFJlY3Vyc2lvbiBvbiAlcyB3aXRoIGlkPSVzPiINCiAgICAgICAgICAgICUgKF90eXBlKG9iamVjdCkuX19uYW1lX18sIF9pZChvYmplY3QpKSkNCg0KDQpkZWYgX3BlcmZjaGVjayhvYmplY3Q9Tm9uZSk6DQogICAgaW1wb3J0IHRpbWUNCiAgICBpZiBvYmplY3QgaXMgTm9uZToNCiAgICAgICAgb2JqZWN0ID0gWygic3RyaW5nIiwgKDEsIDIpLCBbMywgNF0sIHs1OiA2LCA3OiA4fSldICogMTAwMDAwDQogICAgcCA9IFByZXR0eVByaW50ZXIoKQ0KICAgIHQxID0gdGltZS50aW1lKCkNCiAgICBfc2FmZV9yZXByKG9iamVjdCwge30sIE5vbmUsIDApDQogICAgdDIgPSB0aW1lLnRpbWUoKQ0KICAgIHAucGZvcm1hdChvYmplY3QpDQogICAgdDMgPSB0aW1lLnRpbWUoKQ0KICAgIHByaW50KCJfc2FmZV9yZXByOiIsIHQyIC0gdDEpDQogICAgcHJpbnQoInBmb3JtYXQ6IiwgdDMgLSB0MikNCg0KaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoNCiAgICBfcGVyZmNoZWNrKCkNCg==',
'/Lib/textwrap.py':'IiIiVGV4dCB3cmFwcGluZyBhbmQgZmlsbGluZy4KIiIiCgojIENvcHlyaWdodCAoQykgMTk5OS0yMDAxIEdyZWdvcnkgUC4gV2FyZC4KIyBDb3B5cmlnaHQgKEMpIDIwMDIsIDIwMDMgUHl0aG9uIFNvZnR3YXJlIEZvdW5kYXRpb24uCiMgV3JpdHRlbiBieSBHcmVnIFdhcmQgPGd3YXJkQHB5dGhvbi5uZXQ+CgppbXBvcnQgcmUKCl9fYWxsX18gPSBbJ1RleHRXcmFwcGVyJywgJ3dyYXAnLCAnZmlsbCcsICdkZWRlbnQnLCAnaW5kZW50J10KCiMgSGFyZGNvZGUgdGhlIHJlY29nbml6ZWQgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHRvIHRoZSBVUy1BU0NJSQojIHdoaXRlc3BhY2UgY2hhcmFjdGVycy4gIFRoZSBtYWluIHJlYXNvbiBmb3IgZG9pbmcgdGhpcyBpcyB0aGF0IGluCiMgSVNPLTg4NTktMSwgMHhhMCBpcyBub24tYnJlYWtpbmcgd2hpdGVzcGFjZSwgc28gaW4gY2VydGFpbiBsb2NhbGVzCiMgdGhhdCBjaGFyYWN0ZXIgd2luZHMgdXAgaW4gc3RyaW5nLndoaXRlc3BhY2UuICBSZXNwZWN0aW5nCiMgc3RyaW5nLndoaXRlc3BhY2UgaW4gdGhvc2UgY2FzZXMgd291bGQgMSkgbWFrZSB0ZXh0d3JhcCB0cmVhdCAweGEwIHRoZQojIHNhbWUgYXMgYW55IG90aGVyIHdoaXRlc3BhY2UgY2hhciwgd2hpY2ggaXMgY2xlYXJseSB3cm9uZyAoaXQncyBhCiMgKm5vbi1icmVha2luZyogc3BhY2UpLCAyKSBwb3NzaWJseSBjYXVzZSBwcm9ibGVtcyB3aXRoIFVuaWNvZGUsCiMgc2luY2UgMHhhMCBpcyBub3QgaW4gcmFuZ2UoMTI4KS4KX3doaXRlc3BhY2UgPSAnXHRcblx4MGJceDBjXHIgJwoKY2xhc3MgVGV4dFdyYXBwZXI6CiAgICAiIiIKICAgIE9iamVjdCBmb3Igd3JhcHBpbmcvZmlsbGluZyB0ZXh0LiAgVGhlIHB1YmxpYyBpbnRlcmZhY2UgY29uc2lzdHMgb2YKICAgIHRoZSB3cmFwKCkgYW5kIGZpbGwoKSBtZXRob2RzOyB0aGUgb3RoZXIgbWV0aG9kcyBhcmUganVzdCB0aGVyZSBmb3IKICAgIHN1YmNsYXNzZXMgdG8gb3ZlcnJpZGUgaW4gb3JkZXIgdG8gdHdlYWsgdGhlIGRlZmF1bHQgYmVoYXZpb3VyLgogICAgSWYgeW91IHdhbnQgdG8gY29tcGxldGVseSByZXBsYWNlIHRoZSBtYWluIHdyYXBwaW5nIGFsZ29yaXRobSwKICAgIHlvdSdsbCBwcm9iYWJseSBoYXZlIHRvIG92ZXJyaWRlIF93cmFwX2NodW5rcygpLgoKICAgIFNldmVyYWwgaW5zdGFuY2UgYXR0cmlidXRlcyBjb250cm9sIHZhcmlvdXMgYXNwZWN0cyBvZiB3cmFwcGluZzoKICAgICAgd2lkdGggKGRlZmF1bHQ6IDcwKQogICAgICAgIHRoZSBtYXhpbXVtIHdpZHRoIG9mIHdyYXBwZWQgbGluZXMgKHVubGVzcyBicmVha19sb25nX3dvcmRzCiAgICAgICAgaXMgZmFsc2UpCiAgICAgIGluaXRpYWxfaW5kZW50IChkZWZhdWx0OiAiIikKICAgICAgICBzdHJpbmcgdGhhdCB3aWxsIGJlIHByZXBlbmRlZCB0byB0aGUgZmlyc3QgbGluZSBvZiB3cmFwcGVkCiAgICAgICAgb3V0cHV0LiAgQ291bnRzIHRvd2FyZHMgdGhlIGxpbmUncyB3aWR0aC4KICAgICAgc3Vic2VxdWVudF9pbmRlbnQgKGRlZmF1bHQ6ICIiKQogICAgICAgIHN0cmluZyB0aGF0IHdpbGwgYmUgcHJlcGVuZGVkIHRvIGFsbCBsaW5lcyBzYXZlIHRoZSBmaXJzdAogICAgICAgIG9mIHdyYXBwZWQgb3V0cHV0OyBhbHNvIGNvdW50cyB0b3dhcmRzIGVhY2ggbGluZSdzIHdpZHRoLgogICAgICBleHBhbmRfdGFicyAoZGVmYXVsdDogdHJ1ZSkKICAgICAgICBFeHBhbmQgdGFicyBpbiBpbnB1dCB0ZXh0IHRvIHNwYWNlcyBiZWZvcmUgZnVydGhlciBwcm9jZXNzaW5nLgogICAgICAgIEVhY2ggdGFiIHdpbGwgYmVjb21lIDAgLi4gJ3RhYnNpemUnIHNwYWNlcywgZGVwZW5kaW5nIG9uIGl0cyBwb3NpdGlvbgogICAgICAgIGluIGl0cyBsaW5lLiAgSWYgZmFsc2UsIGVhY2ggdGFiIGlzIHRyZWF0ZWQgYXMgYSBzaW5nbGUgY2hhcmFjdGVyLgogICAgICB0YWJzaXplIChkZWZhdWx0OiA4KQogICAgICAgIEV4cGFuZCB0YWJzIGluIGlucHV0IHRleHQgdG8gMCAuLiAndGFic2l6ZScgc3BhY2VzLCB1bmxlc3MKICAgICAgICAnZXhwYW5kX3RhYnMnIGlzIGZhbHNlLgogICAgICByZXBsYWNlX3doaXRlc3BhY2UgKGRlZmF1bHQ6IHRydWUpCiAgICAgICAgUmVwbGFjZSBhbGwgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGluIHRoZSBpbnB1dCB0ZXh0IGJ5IHNwYWNlcwogICAgICAgIGFmdGVyIHRhYiBleHBhbnNpb24uICBOb3RlIHRoYXQgaWYgZXhwYW5kX3RhYnMgaXMgZmFsc2UgYW5kCiAgICAgICAgcmVwbGFjZV93aGl0ZXNwYWNlIGlzIHRydWUsIGV2ZXJ5IHRhYiB3aWxsIGJlIGNvbnZlcnRlZCB0byBhCiAgICAgICAgc2luZ2xlIHNwYWNlIQogICAgICBmaXhfc2VudGVuY2VfZW5kaW5ncyAoZGVmYXVsdDogZmFsc2UpCiAgICAgICAgRW5zdXJlIHRoYXQgc2VudGVuY2UtZW5kaW5nIHB1bmN0dWF0aW9uIGlzIGFsd2F5cyBmb2xsb3dlZAogICAgICAgIGJ5IHR3byBzcGFjZXMuICBPZmYgYnkgZGVmYXVsdCBiZWNhdXNlIHRoZSBhbGdvcml0aG0gaXMKICAgICAgICAodW5hdm9pZGFibHkpIGltcGVyZmVjdC4KICAgICAgYnJlYWtfbG9uZ193b3JkcyAoZGVmYXVsdDogdHJ1ZSkKICAgICAgICBCcmVhayB3b3JkcyBsb25nZXIgdGhhbiAnd2lkdGgnLiAgSWYgZmFsc2UsIHRob3NlIHdvcmRzIHdpbGwgbm90CiAgICAgICAgYmUgYnJva2VuLCBhbmQgc29tZSBsaW5lcyBtaWdodCBiZSBsb25nZXIgdGhhbiAnd2lkdGgnLgogICAgICBicmVha19vbl9oeXBoZW5zIChkZWZhdWx0OiB0cnVlKQogICAgICAgIEFsbG93IGJyZWFraW5nIGh5cGhlbmF0ZWQgd29yZHMuIElmIHRydWUsIHdyYXBwaW5nIHdpbGwgb2NjdXIKICAgICAgICBwcmVmZXJhYmx5IG9uIHdoaXRlc3BhY2VzIGFuZCByaWdodCBhZnRlciBoeXBoZW5zIHBhcnQgb2YKICAgICAgICBjb21wb3VuZCB3b3Jkcy4KICAgICAgZHJvcF93aGl0ZXNwYWNlIChkZWZhdWx0OiB0cnVlKQogICAgICAgIERyb3AgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBmcm9tIGxpbmVzLgogICAgIiIiCgogICAgdW5pY29kZV93aGl0ZXNwYWNlX3RyYW5zID0ge30KICAgIHVzcGFjZSA9IG9yZCgnICcpCiAgICBmb3IgeCBpbiBfd2hpdGVzcGFjZToKICAgICAgICB1bmljb2RlX3doaXRlc3BhY2VfdHJhbnNbb3JkKHgpXSA9IHVzcGFjZQoKICAgICMgVGhpcyBmdW5reSBsaXR0bGUgcmVnZXggaXMganVzdCB0aGUgdHJpY2sgZm9yIHNwbGl0dGluZwogICAgIyB0ZXh0IHVwIGludG8gd29yZC13cmFwcGFibGUgY2h1bmtzLiAgRS5nLgogICAgIyAgICJIZWxsbyB0aGVyZSAtLSB5b3UgZ29vZi1iYWxsLCB1c2UgdGhlIC1iIG9wdGlvbiEiCiAgICAjIHNwbGl0cyBpbnRvCiAgICAjICAgSGVsbG8vIC90aGVyZS8gLy0tLyAveW91LyAvZ29vZi0vYmFsbCwvIC91c2UvIC90aGUvIC8tYi8gL29wdGlvbiEKICAgICMgKGFmdGVyIHN0cmlwcGluZyBvdXQgZW1wdHkgc3RyaW5ncykuCiAgICB3b3Jkc2VwX3JlID0gcmUuY29tcGlsZSgKICAgICAgICByJyhccyt8JyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGFueSB3aGl0ZXNwYWNlCiAgICAgICAgcidbXlxzXHddKlx3K1teMC05XFddLSg/PVx3K1teMC05XFddKXwnICAgIyBoeXBoZW5hdGVkIHdvcmRzCiAgICAgICAgcicoPzw9W1x3XCFcIlwnXCZcLlwsXD9dKS17Mix9KD89XHcpKScpICAgIyBlbS1kYXNoCgogICAgIyBUaGlzIGxlc3MgZnVua3kgbGl0dGxlIHJlZ2V4IGp1c3Qgc3BsaXQgb24gcmVjb2duaXplZCBzcGFjZXMuIEUuZy4KICAgICMgICAiSGVsbG8gdGhlcmUgLS0geW91IGdvb2YtYmFsbCwgdXNlIHRoZSAtYiBvcHRpb24hIgogICAgIyBzcGxpdHMgaW50bwogICAgIyAgIEhlbGxvLyAvdGhlcmUvIC8tLS8gL3lvdS8gL2dvb2YtYmFsbCwvIC91c2UvIC90aGUvIC8tYi8gL29wdGlvbiEvCiAgICB3b3Jkc2VwX3NpbXBsZV9yZSA9IHJlLmNvbXBpbGUocicoXHMrKScpCgogICAgIyBYWFggdGhpcyBpcyBub3QgbG9jYWxlLSBvciBjaGFyc2V0LWF3YXJlIC0tIHN0cmluZy5sb3dlcmNhc2UKICAgICMgaXMgVVMtQVNDSUkgb25seSAoYW5kIHRoZXJlZm9yZSBFbmdsaXNoLW9ubHkpCiAgICBzZW50ZW5jZV9lbmRfcmUgPSByZS5jb21waWxlKHInW2Etel0nICAgICAgICAgICAgICMgbG93ZXJjYXNlIGxldHRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByJ1tcLlwhXD9dJyAgICAgICAgICAjIHNlbnRlbmNlLWVuZGluZyBwdW5jdC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcidbXCJcJ10/JyAgICAgICAgICAgIyBvcHRpb25hbCBlbmQtb2YtcXVvdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcidcWicpICAgICAgICAgICAgICAgIyBlbmQgb2YgY2h1bmsKCgogICAgZGVmIF9faW5pdF9fKHNlbGYsCiAgICAgICAgICAgICAgICAgd2lkdGg9NzAsCiAgICAgICAgICAgICAgICAgaW5pdGlhbF9pbmRlbnQ9IiIsCiAgICAgICAgICAgICAgICAgc3Vic2VxdWVudF9pbmRlbnQ9IiIsCiAgICAgICAgICAgICAgICAgZXhwYW5kX3RhYnM9VHJ1ZSwKICAgICAgICAgICAgICAgICByZXBsYWNlX3doaXRlc3BhY2U9VHJ1ZSwKICAgICAgICAgICAgICAgICBmaXhfc2VudGVuY2VfZW5kaW5ncz1GYWxzZSwKICAgICAgICAgICAgICAgICBicmVha19sb25nX3dvcmRzPVRydWUsCiAgICAgICAgICAgICAgICAgZHJvcF93aGl0ZXNwYWNlPVRydWUsCiAgICAgICAgICAgICAgICAgYnJlYWtfb25faHlwaGVucz1UcnVlLAogICAgICAgICAgICAgICAgIHRhYnNpemU9OCk6CiAgICAgICAgc2VsZi53aWR0aCA9IHdpZHRoCiAgICAgICAgc2VsZi5pbml0aWFsX2luZGVudCA9IGluaXRpYWxfaW5kZW50CiAgICAgICAgc2VsZi5zdWJzZXF1ZW50X2luZGVudCA9IHN1YnNlcXVlbnRfaW5kZW50CiAgICAgICAgc2VsZi5leHBhbmRfdGFicyA9IGV4cGFuZF90YWJzCiAgICAgICAgc2VsZi5yZXBsYWNlX3doaXRlc3BhY2UgPSByZXBsYWNlX3doaXRlc3BhY2UKICAgICAgICBzZWxmLmZpeF9zZW50ZW5jZV9lbmRpbmdzID0gZml4X3NlbnRlbmNlX2VuZGluZ3MKICAgICAgICBzZWxmLmJyZWFrX2xvbmdfd29yZHMgPSBicmVha19sb25nX3dvcmRzCiAgICAgICAgc2VsZi5kcm9wX3doaXRlc3BhY2UgPSBkcm9wX3doaXRlc3BhY2UKICAgICAgICBzZWxmLmJyZWFrX29uX2h5cGhlbnMgPSBicmVha19vbl9oeXBoZW5zCiAgICAgICAgc2VsZi50YWJzaXplID0gdGFic2l6ZQoKCiAgICAjIC0tIFByaXZhdGUgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyAocG9zc2libHkgdXNlZnVsIGZvciBzdWJjbGFzc2VzIHRvIG92ZXJyaWRlKQoKICAgIGRlZiBfbXVuZ2Vfd2hpdGVzcGFjZShzZWxmLCB0ZXh0KToKICAgICAgICAiIiJfbXVuZ2Vfd2hpdGVzcGFjZSh0ZXh0IDogc3RyaW5nKSAtPiBzdHJpbmcKCiAgICAgICAgTXVuZ2Ugd2hpdGVzcGFjZSBpbiB0ZXh0OiBleHBhbmQgdGFicyBhbmQgY29udmVydCBhbGwgb3RoZXIKICAgICAgICB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgdG8gc3BhY2VzLiAgRWcuICIgZm9vXHRiYXJcblxuYmF6IgogICAgICAgIGJlY29tZXMgIiBmb28gICAgYmFyICBiYXoiLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuZXhwYW5kX3RhYnM6CiAgICAgICAgICAgIHRleHQgPSB0ZXh0LmV4cGFuZHRhYnMoc2VsZi50YWJzaXplKQogICAgICAgIGlmIHNlbGYucmVwbGFjZV93aGl0ZXNwYWNlOgogICAgICAgICAgICB0ZXh0ID0gdGV4dC50cmFuc2xhdGUoc2VsZi51bmljb2RlX3doaXRlc3BhY2VfdHJhbnMpCiAgICAgICAgcmV0dXJuIHRleHQKCgogICAgZGVmIF9zcGxpdChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJfc3BsaXQodGV4dCA6IHN0cmluZykgLT4gW3N0cmluZ10KCiAgICAgICAgU3BsaXQgdGhlIHRleHQgdG8gd3JhcCBpbnRvIGluZGl2aXNpYmxlIGNodW5rcy4gIENodW5rcyBhcmUKICAgICAgICBub3QgcXVpdGUgdGhlIHNhbWUgYXMgd29yZHM7IHNlZSBfd3JhcF9jaHVua3MoKSBmb3IgZnVsbAogICAgICAgIGRldGFpbHMuICBBcyBhbiBleGFtcGxlLCB0aGUgdGV4dAogICAgICAgICAgTG9vaywgZ29vZi1iYWxsIC0tIHVzZSB0aGUgLWIgb3B0aW9uIQogICAgICAgIGJyZWFrcyBpbnRvIHRoZSBmb2xsb3dpbmcgY2h1bmtzOgogICAgICAgICAgJ0xvb2ssJywgJyAnLCAnZ29vZi0nLCAnYmFsbCcsICcgJywgJy0tJywgJyAnLAogICAgICAgICAgJ3VzZScsICcgJywgJ3RoZScsICcgJywgJy1iJywgJyAnLCAnb3B0aW9uIScKICAgICAgICBpZiBicmVha19vbl9oeXBoZW5zIGlzIFRydWUsIG9yIGluOgogICAgICAgICAgJ0xvb2ssJywgJyAnLCAnZ29vZi1iYWxsJywgJyAnLCAnLS0nLCAnICcsCiAgICAgICAgICAndXNlJywgJyAnLCAndGhlJywgJyAnLCAnLWInLCAnICcsIG9wdGlvbiEnCiAgICAgICAgb3RoZXJ3aXNlLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuYnJlYWtfb25faHlwaGVucyBpcyBUcnVlOgogICAgICAgICAgICBjaHVua3MgPSBzZWxmLndvcmRzZXBfcmUuc3BsaXQodGV4dCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjaHVua3MgPSBzZWxmLndvcmRzZXBfc2ltcGxlX3JlLnNwbGl0KHRleHQpCiAgICAgICAgY2h1bmtzID0gW2MgZm9yIGMgaW4gY2h1bmtzIGlmIGNdCiAgICAgICAgcmV0dXJuIGNodW5rcwoKICAgIGRlZiBfZml4X3NlbnRlbmNlX2VuZGluZ3Moc2VsZiwgY2h1bmtzKToKICAgICAgICAiIiJfZml4X3NlbnRlbmNlX2VuZGluZ3MoY2h1bmtzIDogW3N0cmluZ10pCgogICAgICAgIENvcnJlY3QgZm9yIHNlbnRlbmNlIGVuZGluZ3MgYnVyaWVkIGluICdjaHVua3MnLiAgRWcuIHdoZW4gdGhlCiAgICAgICAgb3JpZ2luYWwgdGV4dCBjb250YWlucyAiLi4uIGZvby5cbkJhciAuLi4iLCBtdW5nZV93aGl0ZXNwYWNlKCkKICAgICAgICBhbmQgc3BsaXQoKSB3aWxsIGNvbnZlcnQgdGhhdCB0byBbLi4uLCAiZm9vLiIsICIgIiwgIkJhciIsIC4uLl0KICAgICAgICB3aGljaCBoYXMgb25lIHRvbyBmZXcgc3BhY2VzOyB0aGlzIG1ldGhvZCBzaW1wbHkgY2hhbmdlcyB0aGUgb25lCiAgICAgICAgc3BhY2UgdG8gdHdvLgogICAgICAgICIiIgogICAgICAgIGkgPSAwCiAgICAgICAgcGF0c2VhcmNoID0gc2VsZi5zZW50ZW5jZV9lbmRfcmUuc2VhcmNoCiAgICAgICAgd2hpbGUgaSA8IGxlbihjaHVua3MpLTE6CiAgICAgICAgICAgIGlmIGNodW5rc1tpKzFdID09ICIgIiBhbmQgcGF0c2VhcmNoKGNodW5rc1tpXSk6CiAgICAgICAgICAgICAgICBjaHVua3NbaSsxXSA9ICIgICIKICAgICAgICAgICAgICAgIGkgKz0gMgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaSArPSAxCgogICAgZGVmIF9oYW5kbGVfbG9uZ193b3JkKHNlbGYsIHJldmVyc2VkX2NodW5rcywgY3VyX2xpbmUsIGN1cl9sZW4sIHdpZHRoKToKICAgICAgICAiIiJfaGFuZGxlX2xvbmdfd29yZChjaHVua3MgOiBbc3RyaW5nXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJfbGluZSA6IFtzdHJpbmddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cl9sZW4gOiBpbnQsIHdpZHRoIDogaW50KQoKICAgICAgICBIYW5kbGUgYSBjaHVuayBvZiB0ZXh0IChtb3N0IGxpa2VseSBhIHdvcmQsIG5vdCB3aGl0ZXNwYWNlKSB0aGF0CiAgICAgICAgaXMgdG9vIGxvbmcgdG8gZml0IGluIGFueSBsaW5lLgogICAgICAgICIiIgogICAgICAgICMgRmlndXJlIG91dCB3aGVuIGluZGVudCBpcyBsYXJnZXIgdGhhbiB0aGUgc3BlY2lmaWVkIHdpZHRoLCBhbmQgbWFrZQogICAgICAgICMgc3VyZSBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyIGlzIHN0cmlwcGVkIG9mZiBvbiBldmVyeSBwYXNzCiAgICAgICAgaWYgd2lkdGggPCAxOgogICAgICAgICAgICBzcGFjZV9sZWZ0ID0gMQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNwYWNlX2xlZnQgPSB3aWR0aCAtIGN1cl9sZW4KCiAgICAgICAgIyBJZiB3ZSdyZSBhbGxvd2VkIHRvIGJyZWFrIGxvbmcgd29yZHMsIHRoZW4gZG8gc286IHB1dCBhcyBtdWNoCiAgICAgICAgIyBvZiB0aGUgbmV4dCBjaHVuayBvbnRvIHRoZSBjdXJyZW50IGxpbmUgYXMgd2lsbCBmaXQuCiAgICAgICAgaWYgc2VsZi5icmVha19sb25nX3dvcmRzOgogICAgICAgICAgICBjdXJfbGluZS5hcHBlbmQocmV2ZXJzZWRfY2h1bmtzWy0xXVs6c3BhY2VfbGVmdF0pCiAgICAgICAgICAgIHJldmVyc2VkX2NodW5rc1stMV0gPSByZXZlcnNlZF9jaHVua3NbLTFdW3NwYWNlX2xlZnQ6XQoKICAgICAgICAjIE90aGVyd2lzZSwgd2UgaGF2ZSB0byBwcmVzZXJ2ZSB0aGUgbG9uZyB3b3JkIGludGFjdC4gIE9ubHkgYWRkCiAgICAgICAgIyBpdCB0byB0aGUgY3VycmVudCBsaW5lIGlmIHRoZXJlJ3Mgbm90aGluZyBhbHJlYWR5IHRoZXJlIC0tCiAgICAgICAgIyB0aGF0IG1pbmltaXplcyBob3cgbXVjaCB3ZSB2aW9sYXRlIHRoZSB3aWR0aCBjb25zdHJhaW50LgogICAgICAgIGVsaWYgbm90IGN1cl9saW5lOgogICAgICAgICAgICBjdXJfbGluZS5hcHBlbmQocmV2ZXJzZWRfY2h1bmtzLnBvcCgpKQoKICAgICAgICAjIElmIHdlJ3JlIG5vdCBhbGxvd2VkIHRvIGJyZWFrIGxvbmcgd29yZHMsIGFuZCB0aGVyZSdzIGFscmVhZHkKICAgICAgICAjIHRleHQgb24gdGhlIGN1cnJlbnQgbGluZSwgZG8gbm90aGluZy4gIE5leHQgdGltZSB0aHJvdWdoIHRoZQogICAgICAgICMgbWFpbiBsb29wIG9mIF93cmFwX2NodW5rcygpLCB3ZSdsbCB3aW5kIHVwIGhlcmUgYWdhaW4sIGJ1dAogICAgICAgICMgY3VyX2xlbiB3aWxsIGJlIHplcm8sIHNvIHRoZSBuZXh0IGxpbmUgd2lsbCBiZSBlbnRpcmVseQogICAgICAgICMgZGV2b3RlZCB0byB0aGUgbG9uZyB3b3JkIHRoYXQgd2UgY2FuJ3QgaGFuZGxlIHJpZ2h0IG5vdy4KCiAgICBkZWYgX3dyYXBfY2h1bmtzKHNlbGYsIGNodW5rcyk6CiAgICAgICAgIiIiX3dyYXBfY2h1bmtzKGNodW5rcyA6IFtzdHJpbmddKSAtPiBbc3RyaW5nXQoKICAgICAgICBXcmFwIGEgc2VxdWVuY2Ugb2YgdGV4dCBjaHVua3MgYW5kIHJldHVybiBhIGxpc3Qgb2YgbGluZXMgb2YKICAgICAgICBsZW5ndGggJ3NlbGYud2lkdGgnIG9yIGxlc3MuICAoSWYgJ2JyZWFrX2xvbmdfd29yZHMnIGlzIGZhbHNlLAogICAgICAgIHNvbWUgbGluZXMgbWF5IGJlIGxvbmdlciB0aGFuIHRoaXMuKSAgQ2h1bmtzIGNvcnJlc3BvbmQgcm91Z2hseQogICAgICAgIHRvIHdvcmRzIGFuZCB0aGUgd2hpdGVzcGFjZSBiZXR3ZWVuIHRoZW06IGVhY2ggY2h1bmsgaXMKICAgICAgICBpbmRpdmlzaWJsZSAobW9kdWxvICdicmVha19sb25nX3dvcmRzJyksIGJ1dCBhIGxpbmUgYnJlYWsgY2FuCiAgICAgICAgY29tZSBiZXR3ZWVuIGFueSB0d28gY2h1bmtzLiAgQ2h1bmtzIHNob3VsZCBub3QgaGF2ZSBpbnRlcm5hbAogICAgICAgIHdoaXRlc3BhY2U7IGllLiBhIGNodW5rIGlzIGVpdGhlciBhbGwgd2hpdGVzcGFjZSBvciBhICJ3b3JkIi4KICAgICAgICBXaGl0ZXNwYWNlIGNodW5rcyB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YKICAgICAgICBsaW5lcywgYnV0IGFwYXJ0IGZyb20gdGhhdCB3aGl0ZXNwYWNlIGlzIHByZXNlcnZlZC4KICAgICAgICAiIiIKICAgICAgICBsaW5lcyA9IFtdCiAgICAgICAgaWYgc2VsZi53aWR0aCA8PSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHdpZHRoICVyIChtdXN0IGJlID4gMCkiICUgc2VsZi53aWR0aCkKCiAgICAgICAgIyBBcnJhbmdlIGluIHJldmVyc2Ugb3JkZXIgc28gaXRlbXMgY2FuIGJlIGVmZmljaWVudGx5IHBvcHBlZAogICAgICAgICMgZnJvbSBhIHN0YWNrIG9mIGNodWNrcy4KICAgICAgICBjaHVua3MucmV2ZXJzZSgpCgogICAgICAgIHdoaWxlIGNodW5rczoKCiAgICAgICAgICAgICMgU3RhcnQgdGhlIGxpc3Qgb2YgY2h1bmtzIHRoYXQgd2lsbCBtYWtlIHVwIHRoZSBjdXJyZW50IGxpbmUuCiAgICAgICAgICAgICMgY3VyX2xlbiBpcyBqdXN0IHRoZSBsZW5ndGggb2YgYWxsIHRoZSBjaHVua3MgaW4gY3VyX2xpbmUuCiAgICAgICAgICAgIGN1cl9saW5lID0gW10KICAgICAgICAgICAgY3VyX2xlbiA9IDAKCiAgICAgICAgICAgICMgRmlndXJlIG91dCB3aGljaCBzdGF0aWMgc3RyaW5nIHdpbGwgcHJlZml4IHRoaXMgbGluZS4KICAgICAgICAgICAgaWYgbGluZXM6CiAgICAgICAgICAgICAgICBpbmRlbnQgPSBzZWxmLnN1YnNlcXVlbnRfaW5kZW50CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpbmRlbnQgPSBzZWxmLmluaXRpYWxfaW5kZW50CgogICAgICAgICAgICAjIE1heGltdW0gd2lkdGggZm9yIHRoaXMgbGluZS4KICAgICAgICAgICAgd2lkdGggPSBzZWxmLndpZHRoIC0gbGVuKGluZGVudCkKCiAgICAgICAgICAgICMgRmlyc3QgY2h1bmsgb24gbGluZSBpcyB3aGl0ZXNwYWNlIC0tIGRyb3AgaXQsIHVubGVzcyB0aGlzCiAgICAgICAgICAgICMgaXMgdGhlIHZlcnkgYmVnaW5uaW5nIG9mIHRoZSB0ZXh0IChpZS4gbm8gbGluZXMgc3RhcnRlZCB5ZXQpLgogICAgICAgICAgICBpZiBzZWxmLmRyb3Bfd2hpdGVzcGFjZSBhbmQgY2h1bmtzWy0xXS5zdHJpcCgpID09ICcnIGFuZCBsaW5lczoKICAgICAgICAgICAgICAgIGRlbCBjaHVua3NbLTFdCgogICAgICAgICAgICB3aGlsZSBjaHVua3M6CiAgICAgICAgICAgICAgICBsID0gbGVuKGNodW5rc1stMV0pCgogICAgICAgICAgICAgICAgIyBDYW4gYXQgbGVhc3Qgc3F1ZWV6ZSB0aGlzIGNodW5rIG9udG8gdGhlIGN1cnJlbnQgbGluZS4KICAgICAgICAgICAgICAgIGlmIGN1cl9sZW4gKyBsIDw9IHdpZHRoOgogICAgICAgICAgICAgICAgICAgIGN1cl9saW5lLmFwcGVuZChjaHVua3MucG9wKCkpCiAgICAgICAgICAgICAgICAgICAgY3VyX2xlbiArPSBsCgogICAgICAgICAgICAgICAgIyBOb3BlLCB0aGlzIGxpbmUgaXMgZnVsbC4KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICMgVGhlIGN1cnJlbnQgbGluZSBpcyBmdWxsLCBhbmQgdGhlIG5leHQgY2h1bmsgaXMgdG9vIGJpZyB0bwogICAgICAgICAgICAjIGZpdCBvbiAqYW55KiBsaW5lIChub3QganVzdCB0aGlzIG9uZSkuCiAgICAgICAgICAgIGlmIGNodW5rcyBhbmQgbGVuKGNodW5rc1stMV0pID4gd2lkdGg6CiAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVfbG9uZ193b3JkKGNodW5rcywgY3VyX2xpbmUsIGN1cl9sZW4sIHdpZHRoKQoKICAgICAgICAgICAgIyBJZiB0aGUgbGFzdCBjaHVuayBvbiB0aGlzIGxpbmUgaXMgYWxsIHdoaXRlc3BhY2UsIGRyb3AgaXQuCiAgICAgICAgICAgIGlmIHNlbGYuZHJvcF93aGl0ZXNwYWNlIGFuZCBjdXJfbGluZSBhbmQgY3VyX2xpbmVbLTFdLnN0cmlwKCkgPT0gJyc6CiAgICAgICAgICAgICAgICBkZWwgY3VyX2xpbmVbLTFdCgogICAgICAgICAgICAjIENvbnZlcnQgY3VycmVudCBsaW5lIGJhY2sgdG8gYSBzdHJpbmcgYW5kIHN0b3JlIGl0IGluIGxpc3QKICAgICAgICAgICAgIyBvZiBhbGwgbGluZXMgKHJldHVybiB2YWx1ZSkuCiAgICAgICAgICAgIGlmIGN1cl9saW5lOgogICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKGluZGVudCArICcnLmpvaW4oY3VyX2xpbmUpKQoKICAgICAgICByZXR1cm4gbGluZXMKCgogICAgIyAtLSBQdWJsaWMgaW50ZXJmYWNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgd3JhcChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJ3cmFwKHRleHQgOiBzdHJpbmcpIC0+IFtzdHJpbmddCgogICAgICAgIFJlZm9ybWF0IHRoZSBzaW5nbGUgcGFyYWdyYXBoIGluICd0ZXh0JyBzbyBpdCBmaXRzIGluIGxpbmVzIG9mCiAgICAgICAgbm8gbW9yZSB0aGFuICdzZWxmLndpZHRoJyBjb2x1bW5zLCBhbmQgcmV0dXJuIGEgbGlzdCBvZiB3cmFwcGVkCiAgICAgICAgbGluZXMuICBUYWJzIGluICd0ZXh0JyBhcmUgZXhwYW5kZWQgd2l0aCBzdHJpbmcuZXhwYW5kdGFicygpLAogICAgICAgIGFuZCBhbGwgb3RoZXIgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIChpbmNsdWRpbmcgbmV3bGluZSkgYXJlCiAgICAgICAgY29udmVydGVkIHRvIHNwYWNlLgogICAgICAgICIiIgogICAgICAgIHRleHQgPSBzZWxmLl9tdW5nZV93aGl0ZXNwYWNlKHRleHQpCiAgICAgICAgY2h1bmtzID0gc2VsZi5fc3BsaXQodGV4dCkKICAgICAgICBpZiBzZWxmLmZpeF9zZW50ZW5jZV9lbmRpbmdzOgogICAgICAgICAgICBzZWxmLl9maXhfc2VudGVuY2VfZW5kaW5ncyhjaHVua3MpCiAgICAgICAgcmV0dXJuIHNlbGYuX3dyYXBfY2h1bmtzKGNodW5rcykKCiAgICBkZWYgZmlsbChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJmaWxsKHRleHQgOiBzdHJpbmcpIC0+IHN0cmluZwoKICAgICAgICBSZWZvcm1hdCB0aGUgc2luZ2xlIHBhcmFncmFwaCBpbiAndGV4dCcgdG8gZml0IGluIGxpbmVzIG9mIG5vCiAgICAgICAgbW9yZSB0aGFuICdzZWxmLndpZHRoJyBjb2x1bW5zLCBhbmQgcmV0dXJuIGEgbmV3IHN0cmluZwogICAgICAgIGNvbnRhaW5pbmcgdGhlIGVudGlyZSB3cmFwcGVkIHBhcmFncmFwaC4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gIlxuIi5qb2luKHNlbGYud3JhcCh0ZXh0KSkKCgojIC0tIENvbnZlbmllbmNlIGludGVyZmFjZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiB3cmFwKHRleHQsIHdpZHRoPTcwLCAqKmt3YXJncyk6CiAgICAiIiJXcmFwIGEgc2luZ2xlIHBhcmFncmFwaCBvZiB0ZXh0LCByZXR1cm5pbmcgYSBsaXN0IG9mIHdyYXBwZWQgbGluZXMuCgogICAgUmVmb3JtYXQgdGhlIHNpbmdsZSBwYXJhZ3JhcGggaW4gJ3RleHQnIHNvIGl0IGZpdHMgaW4gbGluZXMgb2Ygbm8KICAgIG1vcmUgdGhhbiAnd2lkdGgnIGNvbHVtbnMsIGFuZCByZXR1cm4gYSBsaXN0IG9mIHdyYXBwZWQgbGluZXMuICBCeQogICAgZGVmYXVsdCwgdGFicyBpbiAndGV4dCcgYXJlIGV4cGFuZGVkIHdpdGggc3RyaW5nLmV4cGFuZHRhYnMoKSwgYW5kCiAgICBhbGwgb3RoZXIgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIChpbmNsdWRpbmcgbmV3bGluZSkgYXJlIGNvbnZlcnRlZCB0bwogICAgc3BhY2UuICBTZWUgVGV4dFdyYXBwZXIgY2xhc3MgZm9yIGF2YWlsYWJsZSBrZXl3b3JkIGFyZ3MgdG8gY3VzdG9taXplCiAgICB3cmFwcGluZyBiZWhhdmlvdXIuCiAgICAiIiIKICAgIHcgPSBUZXh0V3JhcHBlcih3aWR0aD13aWR0aCwgKiprd2FyZ3MpCiAgICByZXR1cm4gdy53cmFwKHRleHQpCgpkZWYgZmlsbCh0ZXh0LCB3aWR0aD03MCwgKiprd2FyZ3MpOgogICAgIiIiRmlsbCBhIHNpbmdsZSBwYXJhZ3JhcGggb2YgdGV4dCwgcmV0dXJuaW5nIGEgbmV3IHN0cmluZy4KCiAgICBSZWZvcm1hdCB0aGUgc2luZ2xlIHBhcmFncmFwaCBpbiAndGV4dCcgdG8gZml0IGluIGxpbmVzIG9mIG5vIG1vcmUKICAgIHRoYW4gJ3dpZHRoJyBjb2x1bW5zLCBhbmQgcmV0dXJuIGEgbmV3IHN0cmluZyBjb250YWluaW5nIHRoZSBlbnRpcmUKICAgIHdyYXBwZWQgcGFyYWdyYXBoLiAgQXMgd2l0aCB3cmFwKCksIHRhYnMgYXJlIGV4cGFuZGVkIGFuZCBvdGhlcgogICAgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGNvbnZlcnRlZCB0byBzcGFjZS4gIFNlZSBUZXh0V3JhcHBlciBjbGFzcyBmb3IKICAgIGF2YWlsYWJsZSBrZXl3b3JkIGFyZ3MgdG8gY3VzdG9taXplIHdyYXBwaW5nIGJlaGF2aW91ci4KICAgICIiIgogICAgdyA9IFRleHRXcmFwcGVyKHdpZHRoPXdpZHRoLCAqKmt3YXJncykKICAgIHJldHVybiB3LmZpbGwodGV4dCkKCgojIC0tIExvb3NlbHkgcmVsYXRlZCBmdW5jdGlvbmFsaXR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCl93aGl0ZXNwYWNlX29ubHlfcmUgPSByZS5jb21waWxlKCdeWyBcdF0rJCcsIHJlLk1VTFRJTElORSkKX2xlYWRpbmdfd2hpdGVzcGFjZV9yZSA9IHJlLmNvbXBpbGUoJyheWyBcdF0qKSg/OlteIFx0XG5dKScsIHJlLk1VTFRJTElORSkKCmRlZiBkZWRlbnQodGV4dCk6CiAgICAiIiJSZW1vdmUgYW55IGNvbW1vbiBsZWFkaW5nIHdoaXRlc3BhY2UgZnJvbSBldmVyeSBsaW5lIGluIGB0ZXh0YC4KCiAgICBUaGlzIGNhbiBiZSB1c2VkIHRvIG1ha2UgdHJpcGxlLXF1b3RlZCBzdHJpbmdzIGxpbmUgdXAgd2l0aCB0aGUgbGVmdAogICAgZWRnZSBvZiB0aGUgZGlzcGxheSwgd2hpbGUgc3RpbGwgcHJlc2VudGluZyB0aGVtIGluIHRoZSBzb3VyY2UgY29kZQogICAgaW4gaW5kZW50ZWQgZm9ybS4KCiAgICBOb3RlIHRoYXQgdGFicyBhbmQgc3BhY2VzIGFyZSBib3RoIHRyZWF0ZWQgYXMgd2hpdGVzcGFjZSwgYnV0IHRoZXkKICAgIGFyZSBub3QgZXF1YWw6IHRoZSBsaW5lcyAiICBoZWxsbyIgYW5kICJcdGhlbGxvIiBhcmUKICAgIGNvbnNpZGVyZWQgdG8gaGF2ZSBubyBjb21tb24gbGVhZGluZyB3aGl0ZXNwYWNlLiAgKFRoaXMgYmVoYXZpb3VyIGlzCiAgICBuZXcgaW4gUHl0aG9uIDIuNTsgb2xkZXIgdmVyc2lvbnMgb2YgdGhpcyBtb2R1bGUgaW5jb3JyZWN0bHkKICAgIGV4cGFuZGVkIHRhYnMgYmVmb3JlIHNlYXJjaGluZyBmb3IgY29tbW9uIGxlYWRpbmcgd2hpdGVzcGFjZS4pCiAgICAiIiIKICAgICMgTG9vayBmb3IgdGhlIGxvbmdlc3QgbGVhZGluZyBzdHJpbmcgb2Ygc3BhY2VzIGFuZCB0YWJzIGNvbW1vbiB0bwogICAgIyBhbGwgbGluZXMuCiAgICBtYXJnaW4gPSBOb25lCiAgICB0ZXh0ID0gX3doaXRlc3BhY2Vfb25seV9yZS5zdWIoJycsIHRleHQpCiAgICBpbmRlbnRzID0gX2xlYWRpbmdfd2hpdGVzcGFjZV9yZS5maW5kYWxsKHRleHQpCiAgICBmb3IgaW5kZW50IGluIGluZGVudHM6CiAgICAgICAgaWYgbWFyZ2luIGlzIE5vbmU6CiAgICAgICAgICAgIG1hcmdpbiA9IGluZGVudAoKICAgICAgICAjIEN1cnJlbnQgbGluZSBtb3JlIGRlZXBseSBpbmRlbnRlZCB0aGFuIHByZXZpb3VzIHdpbm5lcjoKICAgICAgICAjIG5vIGNoYW5nZSAocHJldmlvdXMgd2lubmVyIGlzIHN0aWxsIG9uIHRvcCkuCiAgICAgICAgZWxpZiBpbmRlbnQuc3RhcnRzd2l0aChtYXJnaW4pOgogICAgICAgICAgICBwYXNzCgogICAgICAgICMgQ3VycmVudCBsaW5lIGNvbnNpc3RlbnQgd2l0aCBhbmQgbm8gZGVlcGVyIHRoYW4gcHJldmlvdXMgd2lubmVyOgogICAgICAgICMgaXQncyB0aGUgbmV3IHdpbm5lci4KICAgICAgICBlbGlmIG1hcmdpbi5zdGFydHN3aXRoKGluZGVudCk6CiAgICAgICAgICAgIG1hcmdpbiA9IGluZGVudAoKICAgICAgICAjIEN1cnJlbnQgbGluZSBhbmQgcHJldmlvdXMgd2lubmVyIGhhdmUgbm8gY29tbW9uIHdoaXRlc3BhY2U6CiAgICAgICAgIyB0aGVyZSBpcyBubyBtYXJnaW4uCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbWFyZ2luID0gIiIKICAgICAgICAgICAgYnJlYWsKCiAgICAjIHNhbml0eSBjaGVjayAodGVzdGluZy9kZWJ1Z2dpbmcgb25seSkKICAgIGlmIDAgYW5kIG1hcmdpbjoKICAgICAgICBmb3IgbGluZSBpbiB0ZXh0LnNwbGl0KCJcbiIpOgogICAgICAgICAgICBhc3NlcnQgbm90IGxpbmUgb3IgbGluZS5zdGFydHN3aXRoKG1hcmdpbiksIFwKICAgICAgICAgICAgICAgICAgICJsaW5lID0gJXIsIG1hcmdpbiA9ICVyIiAlIChsaW5lLCBtYXJnaW4pCgogICAgaWYgbWFyZ2luOgogICAgICAgIHRleHQgPSByZS5zdWIocicoP20pXicgKyBtYXJnaW4sICcnLCB0ZXh0KQogICAgcmV0dXJuIHRleHQKCgpkZWYgaW5kZW50KHRleHQsIHByZWZpeCwgcHJlZGljYXRlPU5vbmUpOgogICAgIiIiQWRkcyAncHJlZml4JyB0byB0aGUgYmVnaW5uaW5nIG9mIHNlbGVjdGVkIGxpbmVzIGluICd0ZXh0Jy4KCiAgICBJZiAncHJlZGljYXRlJyBpcyBwcm92aWRlZCwgJ3ByZWZpeCcgd2lsbCBvbmx5IGJlIGFkZGVkIHRvIHRoZSBsaW5lcwogICAgd2hlcmUgJ3ByZWRpY2F0ZShsaW5lKScgaXMgVHJ1ZS4gSWYgJ3ByZWRpY2F0ZScgaXMgbm90IHByb3ZpZGVkLAogICAgaXQgd2lsbCBkZWZhdWx0IHRvIGFkZGluZyAncHJlZml4JyB0byBhbGwgbm9uLWVtcHR5IGxpbmVzIHRoYXQgZG8gbm90CiAgICBjb25zaXN0IHNvbGVseSBvZiB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMuCiAgICAiIiIKICAgIGlmIHByZWRpY2F0ZSBpcyBOb25lOgogICAgICAgIGRlZiBwcmVkaWNhdGUobGluZSk6CiAgICAgICAgICAgIHJldHVybiBsaW5lLnN0cmlwKCkKCiAgICBkZWYgcHJlZml4ZWRfbGluZXMoKToKICAgICAgICBmb3IgbGluZSBpbiB0ZXh0LnNwbGl0bGluZXMoVHJ1ZSk6CiAgICAgICAgICAgIHlpZWxkIChwcmVmaXggKyBsaW5lIGlmIHByZWRpY2F0ZShsaW5lKSBlbHNlIGxpbmUpCiAgICByZXR1cm4gJycuam9pbihwcmVmaXhlZF9saW5lcygpKQoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICAjcHJpbnQgZGVkZW50KCJcdGZvb1xuXHRiYXIiKQogICAgI3ByaW50IGRlZGVudCgiICBcdGhlbGxvIHRoZXJlXG4gIFx0ICBob3cgYXJlIHlvdT8iKQogICAgcHJpbnQoZGVkZW50KCJIZWxsbyB0aGVyZS5cbiAgVGhpcyBpcyBpbmRlbnRlZC4iKSkK',
'/Lib/posixpath.py':'IiIiQ29tbW9uIG9wZXJhdGlvbnMgb24gUG9zaXggcGF0aG5hbWVzLgoKSW5zdGVhZCBvZiBpbXBvcnRpbmcgdGhpcyBtb2R1bGUgZGlyZWN0bHksIGltcG9ydCBvcyBhbmQgcmVmZXIgdG8KdGhpcyBtb2R1bGUgYXMgb3MucGF0aC4gIFRoZSAib3MucGF0aCIgbmFtZSBpcyBhbiBhbGlhcyBmb3IgdGhpcwptb2R1bGUgb24gUG9zaXggc3lzdGVtczsgb24gb3RoZXIgc3lzdGVtcyAoZS5nLiBNYWMsIFdpbmRvd3MpLApvcy5wYXRoIHByb3ZpZGVzIHRoZSBzYW1lIG9wZXJhdGlvbnMgaW4gYSBtYW5uZXIgc3BlY2lmaWMgdG8gdGhhdApwbGF0Zm9ybSwgYW5kIGlzIGFuIGFsaWFzIHRvIGFub3RoZXIgbW9kdWxlIChlLmcuIG1hY3BhdGgsIG50cGF0aCkuCgpTb21lIG9mIHRoaXMgY2FuIGFjdHVhbGx5IGJlIHVzZWZ1bCBvbiBub24tUG9zaXggc3lzdGVtcyB0b28sIGUuZy4KZm9yIG1hbmlwdWxhdGlvbiBvZiB0aGUgcGF0aG5hbWUgY29tcG9uZW50IG9mIFVSTHMuCiIiIgoKaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHN0YXQKaW1wb3J0IGdlbmVyaWNwYXRoCmZyb20gZ2VuZXJpY3BhdGggaW1wb3J0ICoKCl9fYWxsX18gPSBbIm5vcm1jYXNlIiwiaXNhYnMiLCJqb2luIiwic3BsaXRkcml2ZSIsInNwbGl0Iiwic3BsaXRleHQiLAogICAgICAgICAgICJiYXNlbmFtZSIsImRpcm5hbWUiLCJjb21tb25wcmVmaXgiLCJnZXRzaXplIiwiZ2V0bXRpbWUiLAogICAgICAgICAgICJnZXRhdGltZSIsImdldGN0aW1lIiwiaXNsaW5rIiwiZXhpc3RzIiwibGV4aXN0cyIsImlzZGlyIiwiaXNmaWxlIiwKICAgICAgICAgICAiaXNtb3VudCIsICJleHBhbmR1c2VyIiwiZXhwYW5kdmFycyIsIm5vcm1wYXRoIiwiYWJzcGF0aCIsCiAgICAgICAgICAgInNhbWVmaWxlIiwic2FtZW9wZW5maWxlIiwic2FtZXN0YXQiLAogICAgICAgICAgICJjdXJkaXIiLCJwYXJkaXIiLCJzZXAiLCJwYXRoc2VwIiwiZGVmcGF0aCIsImFsdHNlcCIsImV4dHNlcCIsCiAgICAgICAgICAgImRldm51bGwiLCJyZWFscGF0aCIsInN1cHBvcnRzX3VuaWNvZGVfZmlsZW5hbWVzIiwicmVscGF0aCJdCgojIFN0cmluZ3MgcmVwcmVzZW50aW5nIHZhcmlvdXMgcGF0aC1yZWxhdGVkIGJpdHMgYW5kIHBpZWNlcy4KIyBUaGVzZSBhcmUgcHJpbWFyaWx5IGZvciBleHBvcnQ7IGludGVybmFsbHksIHRoZXkgYXJlIGhhcmRjb2RlZC4KY3VyZGlyID0gJy4nCnBhcmRpciA9ICcuLicKZXh0c2VwID0gJy4nCnNlcCA9ICcvJwpwYXRoc2VwID0gJzonCmRlZnBhdGggPSAnOi9iaW46L3Vzci9iaW4nCmFsdHNlcCA9IE5vbmUKZGV2bnVsbCA9ICcvZGV2L251bGwnCgpkZWYgX2dldF9zZXAocGF0aCk6CiAgICBpZiBpc2luc3RhbmNlKHBhdGgsIGJ5dGVzKToKICAgICAgICByZXR1cm4gYicvJwogICAgZWxzZToKICAgICAgICByZXR1cm4gJy8nCgojIE5vcm1hbGl6ZSB0aGUgY2FzZSBvZiBhIHBhdGhuYW1lLiAgVHJpdmlhbCBpbiBQb3NpeCwgc3RyaW5nLmxvd2VyIG9uIE1hYy4KIyBPbiBNUy1ET1MgdGhpcyBtYXkgYWxzbyB0dXJuIHNsYXNoZXMgaW50byBiYWNrc2xhc2hlczsgaG93ZXZlciwgb3RoZXIKIyBub3JtYWxpemF0aW9ucyAoc3VjaCBhcyBvcHRpbWl6aW5nICcuLi8nIGF3YXkpIGFyZSBub3QgYWxsb3dlZAojIChhbm90aGVyIGZ1bmN0aW9uIHNob3VsZCBiZSBkZWZpbmVkIHRvIGRvIHRoYXQpLgoKZGVmIG5vcm1jYXNlKHMpOgogICAgIiIiTm9ybWFsaXplIGNhc2Ugb2YgcGF0aG5hbWUuICBIYXMgbm8gZWZmZWN0IHVuZGVyIFBvc2l4IiIiCiAgICAjIFRPRE86IG9uIE1hYyBPUyBYLCB0aGlzIHNob3VsZCByZWFsbHkgcmV0dXJuIHMubG93ZXIoKS4KICAgIGlmIG5vdCBpc2luc3RhbmNlKHMsIChieXRlcywgc3RyKSk6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJub3JtY2FzZSgpIGFyZ3VtZW50IG11c3QgYmUgc3RyIG9yIGJ5dGVzLCAiCiAgICAgICAgICAgICAgICAgICAgICAgICJub3QgJ3t9JyIuZm9ybWF0KHMuX19jbGFzc19fLl9fbmFtZV9fKSkKICAgIHJldHVybiBzCgoKIyBSZXR1cm4gd2hldGhlciBhIHBhdGggaXMgYWJzb2x1dGUuCiMgVHJpdmlhbCBpbiBQb3NpeCwgaGFyZGVyIG9uIHRoZSBNYWMgb3IgTVMtRE9TLgoKZGVmIGlzYWJzKHMpOgogICAgIiIiVGVzdCB3aGV0aGVyIGEgcGF0aCBpcyBhYnNvbHV0ZSIiIgogICAgc2VwID0gX2dldF9zZXAocykKICAgIHJldHVybiBzLnN0YXJ0c3dpdGgoc2VwKQoKCiMgSm9pbiBwYXRobmFtZXMuCiMgSWdub3JlIHRoZSBwcmV2aW91cyBwYXJ0cyBpZiBhIHBhcnQgaXMgYWJzb2x1dGUuCiMgSW5zZXJ0IGEgJy8nIHVubGVzcyB0aGUgZmlyc3QgcGFydCBpcyBlbXB0eSBvciBhbHJlYWR5IGVuZHMgaW4gJy8nLgoKZGVmIGpvaW4oYSwgKnApOgogICAgIiIiSm9pbiB0d28gb3IgbW9yZSBwYXRobmFtZSBjb21wb25lbnRzLCBpbnNlcnRpbmcgJy8nIGFzIG5lZWRlZC4KICAgIElmIGFueSBjb21wb25lbnQgaXMgYW4gYWJzb2x1dGUgcGF0aCwgYWxsIHByZXZpb3VzIHBhdGggY29tcG9uZW50cwogICAgd2lsbCBiZSBkaXNjYXJkZWQuICBBbiBlbXB0eSBsYXN0IHBhcnQgd2lsbCByZXN1bHQgaW4gYSBwYXRoIHRoYXQKICAgIGVuZHMgd2l0aCBhIHNlcGFyYXRvci4iIiIKICAgIHNlcCA9IF9nZXRfc2VwKGEpCiAgICBwYXRoID0gYQogICAgdHJ5OgogICAgICAgIGZvciBiIGluIHA6CiAgICAgICAgICAgIGlmIGIuc3RhcnRzd2l0aChzZXApOgogICAgICAgICAgICAgICAgcGF0aCA9IGIKICAgICAgICAgICAgZWxpZiBub3QgcGF0aCBvciBwYXRoLmVuZHN3aXRoKHNlcCk6CiAgICAgICAgICAgICAgICBwYXRoICs9IGIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHBhdGggKz0gc2VwICsgYgogICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICB2YWxpZF90eXBlcyA9IGFsbChpc2luc3RhbmNlKHMsIChzdHIsIGJ5dGVzLCBieXRlYXJyYXkpKQogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBzIGluIChhLCApICsgcCkKICAgICAgICBpZiB2YWxpZF90eXBlczoKICAgICAgICAgICAgIyBNdXN0IGhhdmUgYSBtaXh0dXJlIG9mIHRleHQgYW5kIGJpbmFyeSBkYXRhCiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiQ2FuJ3QgbWl4IHN0cmluZ3MgYW5kIGJ5dGVzIGluIHBhdGggY29tcG9uZW50cy4iKQogICAgICAgIHJhaXNlCiAgICByZXR1cm4gcGF0aAoKCiMgU3BsaXQgYSBwYXRoIGluIGhlYWQgKGV2ZXJ5dGhpbmcgdXAgdG8gdGhlIGxhc3QgJy8nKSBhbmQgdGFpbCAodGhlCiMgcmVzdCkuICBJZiB0aGUgcGF0aCBlbmRzIGluICcvJywgdGFpbCB3aWxsIGJlIGVtcHR5LiAgSWYgdGhlcmUgaXMgbm8KIyAnLycgaW4gdGhlIHBhdGgsIGhlYWQgIHdpbGwgYmUgZW1wdHkuCiMgVHJhaWxpbmcgJy8nZXMgYXJlIHN0cmlwcGVkIGZyb20gaGVhZCB1bmxlc3MgaXQgaXMgdGhlIHJvb3QuCgpkZWYgc3BsaXQocCk6CiAgICAiIiJTcGxpdCBhIHBhdGhuYW1lLiAgUmV0dXJucyB0dXBsZSAiKGhlYWQsIHRhaWwpIiB3aGVyZSAidGFpbCIgaXMKICAgIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpbmFsIHNsYXNoLiAgRWl0aGVyIHBhcnQgbWF5IGJlIGVtcHR5LiIiIgogICAgc2VwID0gX2dldF9zZXAocCkKICAgIGkgPSBwLnJmaW5kKHNlcCkgKyAxCiAgICBoZWFkLCB0YWlsID0gcFs6aV0sIHBbaTpdCiAgICBpZiBoZWFkIGFuZCBoZWFkICE9IHNlcCpsZW4oaGVhZCk6CiAgICAgICAgaGVhZCA9IGhlYWQucnN0cmlwKHNlcCkKICAgIHJldHVybiBoZWFkLCB0YWlsCgoKIyBTcGxpdCBhIHBhdGggaW4gcm9vdCBhbmQgZXh0ZW5zaW9uLgojIFRoZSBleHRlbnNpb24gaXMgZXZlcnl0aGluZyBzdGFydGluZyBhdCB0aGUgbGFzdCBkb3QgaW4gdGhlIGxhc3QKIyBwYXRobmFtZSBjb21wb25lbnQ7IHRoZSByb290IGlzIGV2ZXJ5dGhpbmcgYmVmb3JlIHRoYXQuCiMgSXQgaXMgYWx3YXlzIHRydWUgdGhhdCByb290ICsgZXh0ID09IHAuCgpkZWYgc3BsaXRleHQocCk6CiAgICBpZiBpc2luc3RhbmNlKHAsIGJ5dGVzKToKICAgICAgICBzZXAgPSBiJy8nCiAgICAgICAgZXh0c2VwID0gYicuJwogICAgZWxzZToKICAgICAgICBzZXAgPSAnLycKICAgICAgICBleHRzZXAgPSAnLicKICAgIHJldHVybiBnZW5lcmljcGF0aC5fc3BsaXRleHQocCwgc2VwLCBOb25lLCBleHRzZXApCnNwbGl0ZXh0Ll9fZG9jX18gPSBnZW5lcmljcGF0aC5fc3BsaXRleHQuX19kb2NfXwoKIyBTcGxpdCBhIHBhdGhuYW1lIGludG8gYSBkcml2ZSBzcGVjaWZpY2F0aW9uIGFuZCB0aGUgcmVzdCBvZiB0aGUKIyBwYXRoLiAgVXNlZnVsIG9uIERPUy9XaW5kb3dzL05UOyBvbiBVbml4LCB0aGUgZHJpdmUgaXMgYWx3YXlzIGVtcHR5LgoKZGVmIHNwbGl0ZHJpdmUocCk6CiAgICAiIiJTcGxpdCBhIHBhdGhuYW1lIGludG8gZHJpdmUgYW5kIHBhdGguIE9uIFBvc2l4LCBkcml2ZSBpcyBhbHdheXMKICAgIGVtcHR5LiIiIgogICAgcmV0dXJuIHBbOjBdLCBwCgoKIyBSZXR1cm4gdGhlIHRhaWwgKGJhc2VuYW1lKSBwYXJ0IG9mIGEgcGF0aCwgc2FtZSBhcyBzcGxpdChwYXRoKVsxXS4KCmRlZiBiYXNlbmFtZShwKToKICAgICIiIlJldHVybnMgdGhlIGZpbmFsIGNvbXBvbmVudCBvZiBhIHBhdGhuYW1lIiIiCiAgICBzZXAgPSBfZ2V0X3NlcChwKQogICAgaSA9IHAucmZpbmQoc2VwKSArIDEKICAgIHJldHVybiBwW2k6XQoKCiMgUmV0dXJuIHRoZSBoZWFkIChkaXJuYW1lKSBwYXJ0IG9mIGEgcGF0aCwgc2FtZSBhcyBzcGxpdChwYXRoKVswXS4KCmRlZiBkaXJuYW1lKHApOgogICAgIiIiUmV0dXJucyB0aGUgZGlyZWN0b3J5IGNvbXBvbmVudCBvZiBhIHBhdGhuYW1lIiIiCiAgICBzZXAgPSBfZ2V0X3NlcChwKQogICAgaSA9IHAucmZpbmQoc2VwKSArIDEKICAgIGhlYWQgPSBwWzppXQogICAgaWYgaGVhZCBhbmQgaGVhZCAhPSBzZXAqbGVuKGhlYWQpOgogICAgICAgIGhlYWQgPSBoZWFkLnJzdHJpcChzZXApCiAgICByZXR1cm4gaGVhZAoKCiMgSXMgYSBwYXRoIGEgc3ltYm9saWMgbGluaz8KIyBUaGlzIHdpbGwgYWx3YXlzIHJldHVybiBmYWxzZSBvbiBzeXN0ZW1zIHdoZXJlIG9zLmxzdGF0IGRvZXNuJ3QgZXhpc3QuCgpkZWYgaXNsaW5rKHBhdGgpOgogICAgIiIiVGVzdCB3aGV0aGVyIGEgcGF0aCBpcyBhIHN5bWJvbGljIGxpbmsiIiIKICAgIHRyeToKICAgICAgICBzdCA9IG9zLmxzdGF0KHBhdGgpCiAgICBleGNlcHQgKG9zLmVycm9yLCBBdHRyaWJ1dGVFcnJvcik6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICByZXR1cm4gc3RhdC5TX0lTTE5LKHN0LnN0X21vZGUpCgojIEJlaW5nIHRydWUgZm9yIGRhbmdsaW5nIHN5bWJvbGljIGxpbmtzIGlzIGFsc28gdXNlZnVsLgoKZGVmIGxleGlzdHMocGF0aCk6CiAgICAiIiJUZXN0IHdoZXRoZXIgYSBwYXRoIGV4aXN0cy4gIFJldHVybnMgVHJ1ZSBmb3IgYnJva2VuIHN5bWJvbGljIGxpbmtzIiIiCiAgICB0cnk6CiAgICAgICAgb3MubHN0YXQocGF0aCkKICAgIGV4Y2VwdCBvcy5lcnJvcjoKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiBUcnVlCgoKIyBBcmUgdHdvIGZpbGVuYW1lcyByZWFsbHkgcG9pbnRpbmcgdG8gdGhlIHNhbWUgZmlsZT8KCmRlZiBzYW1lZmlsZShmMSwgZjIpOgogICAgIiIiVGVzdCB3aGV0aGVyIHR3byBwYXRobmFtZXMgcmVmZXJlbmNlIHRoZSBzYW1lIGFjdHVhbCBmaWxlIiIiCiAgICBzMSA9IG9zLnN0YXQoZjEpCiAgICBzMiA9IG9zLnN0YXQoZjIpCiAgICByZXR1cm4gc2FtZXN0YXQoczEsIHMyKQoKCiMgQXJlIHR3byBvcGVuIGZpbGVzIHJlYWxseSByZWZlcmVuY2luZyB0aGUgc2FtZSBmaWxlPwojIChOb3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgZmlsZSBkZXNjcmlwdG9yISkKCmRlZiBzYW1lb3BlbmZpbGUoZnAxLCBmcDIpOgogICAgIiIiVGVzdCB3aGV0aGVyIHR3byBvcGVuIGZpbGUgb2JqZWN0cyByZWZlcmVuY2UgdGhlIHNhbWUgZmlsZSIiIgogICAgczEgPSBvcy5mc3RhdChmcDEpCiAgICBzMiA9IG9zLmZzdGF0KGZwMikKICAgIHJldHVybiBzYW1lc3RhdChzMSwgczIpCgoKIyBBcmUgdHdvIHN0YXQgYnVmZmVycyAob2J0YWluZWQgZnJvbSBzdGF0LCBmc3RhdCBvciBsc3RhdCkKIyBkZXNjcmliaW5nIHRoZSBzYW1lIGZpbGU/CgpkZWYgc2FtZXN0YXQoczEsIHMyKToKICAgICIiIlRlc3Qgd2hldGhlciB0d28gc3RhdCBidWZmZXJzIHJlZmVyZW5jZSB0aGUgc2FtZSBmaWxlIiIiCiAgICByZXR1cm4gczEuc3RfaW5vID09IHMyLnN0X2lubyBhbmQgXAogICAgICAgICAgIHMxLnN0X2RldiA9PSBzMi5zdF9kZXYKCgojIElzIGEgcGF0aCBhIG1vdW50IHBvaW50PwojIChEb2VzIHRoaXMgd29yayBmb3IgYWxsIFVOSVhlcz8gIElzIGl0IGV2ZW4gZ3VhcmFudGVlZCB0byB3b3JrIGJ5IFBvc2l4PykKCmRlZiBpc21vdW50KHBhdGgpOgogICAgIiIiVGVzdCB3aGV0aGVyIGEgcGF0aCBpcyBhIG1vdW50IHBvaW50IiIiCiAgICBpZiBpc2xpbmsocGF0aCk6CiAgICAgICAgIyBBIHN5bWxpbmsgY2FuIG5ldmVyIGJlIGEgbW91bnQgcG9pbnQKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHRyeToKICAgICAgICBzMSA9IG9zLmxzdGF0KHBhdGgpCiAgICAgICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6CiAgICAgICAgICAgIHBhcmVudCA9IGpvaW4ocGF0aCwgYicuLicpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGFyZW50ID0gam9pbihwYXRoLCAnLi4nKQogICAgICAgIHMyID0gb3MubHN0YXQocGFyZW50KQogICAgZXhjZXB0IG9zLmVycm9yOgogICAgICAgIHJldHVybiBGYWxzZSAjIEl0IGRvZXNuJ3QgZXhpc3QgLS0gc28gbm90IGEgbW91bnQgcG9pbnQgOi0pCiAgICBkZXYxID0gczEuc3RfZGV2CiAgICBkZXYyID0gczIuc3RfZGV2CiAgICBpZiBkZXYxICE9IGRldjI6CiAgICAgICAgcmV0dXJuIFRydWUgICAgICMgcGF0aC8uLiBvbiBhIGRpZmZlcmVudCBkZXZpY2UgYXMgcGF0aAogICAgaW5vMSA9IHMxLnN0X2lubwogICAgaW5vMiA9IHMyLnN0X2lubwogICAgaWYgaW5vMSA9PSBpbm8yOgogICAgICAgIHJldHVybiBUcnVlICAgICAjIHBhdGgvLi4gaXMgdGhlIHNhbWUgaS1ub2RlIGFzIHBhdGgKICAgIHJldHVybiBGYWxzZQoKCiMgRXhwYW5kIHBhdGhzIGJlZ2lubmluZyB3aXRoICd+JyBvciAnfnVzZXInLgojICd+JyBtZWFucyAkSE9NRTsgJ351c2VyJyBtZWFucyB0aGF0IHVzZXIncyBob21lIGRpcmVjdG9yeS4KIyBJZiB0aGUgcGF0aCBkb2Vzbid0IGJlZ2luIHdpdGggJ34nLCBvciBpZiB0aGUgdXNlciBvciAkSE9NRSBpcyB1bmtub3duLAojIHRoZSBwYXRoIGlzIHJldHVybmVkIHVuY2hhbmdlZCAobGVhdmluZyBlcnJvciByZXBvcnRpbmcgdG8gd2hhdGV2ZXIKIyBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCB0aGUgZXhwYW5kZWQgcGF0aCBhcyBhcmd1bWVudCkuCiMgU2VlIGFsc28gbW9kdWxlICdnbG9iJyBmb3IgZXhwYW5zaW9uIG9mICosID8gYW5kIFsuLi5dIGluIHBhdGhuYW1lcy4KIyAoQSBmdW5jdGlvbiBzaG91bGQgYWxzbyBiZSBkZWZpbmVkIHRvIGRvIGZ1bGwgKnNoLXN0eWxlIGVudmlyb25tZW50CiMgdmFyaWFibGUgZXhwYW5zaW9uLikKCmRlZiBleHBhbmR1c2VyKHBhdGgpOgogICAgIiIiRXhwYW5kIH4gYW5kIH51c2VyIGNvbnN0cnVjdGlvbnMuICBJZiB1c2VyIG9yICRIT01FIGlzIHVua25vd24sCiAgICBkbyBub3RoaW5nLiIiIgogICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6CiAgICAgICAgdGlsZGUgPSBiJ34nCiAgICBlbHNlOgogICAgICAgIHRpbGRlID0gJ34nCiAgICBpZiBub3QgcGF0aC5zdGFydHN3aXRoKHRpbGRlKToKICAgICAgICByZXR1cm4gcGF0aAogICAgc2VwID0gX2dldF9zZXAocGF0aCkKICAgIGkgPSBwYXRoLmZpbmQoc2VwLCAxKQogICAgaWYgaSA8IDA6CiAgICAgICAgaSA9IGxlbihwYXRoKQogICAgaWYgaSA9PSAxOgogICAgICAgIGlmICdIT01FJyBub3QgaW4gb3MuZW52aXJvbjoKICAgICAgICAgICAgaW1wb3J0IHB3ZAogICAgICAgICAgICB1c2VyaG9tZSA9IHB3ZC5nZXRwd3VpZChvcy5nZXR1aWQoKSkucHdfZGlyCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdXNlcmhvbWUgPSBvcy5lbnZpcm9uWydIT01FJ10KICAgIGVsc2U6CiAgICAgICAgaW1wb3J0IHB3ZAogICAgICAgIG5hbWUgPSBwYXRoWzE6aV0KICAgICAgICBpZiBpc2luc3RhbmNlKG5hbWUsIGJ5dGVzKToKICAgICAgICAgICAgbmFtZSA9IHN0cihuYW1lLCAnQVNDSUknKQogICAgICAgIHRyeToKICAgICAgICAgICAgcHdlbnQgPSBwd2QuZ2V0cHduYW0obmFtZSkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJldHVybiBwYXRoCiAgICAgICAgdXNlcmhvbWUgPSBwd2VudC5wd19kaXIKICAgIGlmIGlzaW5zdGFuY2UocGF0aCwgYnl0ZXMpOgogICAgICAgIHVzZXJob21lID0gb3MuZnNlbmNvZGUodXNlcmhvbWUpCiAgICAgICAgcm9vdCA9IGInLycKICAgIGVsc2U6CiAgICAgICAgcm9vdCA9ICcvJwogICAgdXNlcmhvbWUgPSB1c2VyaG9tZS5yc3RyaXAocm9vdCkKICAgIHJldHVybiAodXNlcmhvbWUgKyBwYXRoW2k6XSkgb3Igcm9vdAoKCiMgRXhwYW5kIHBhdGhzIGNvbnRhaW5pbmcgc2hlbGwgdmFyaWFibGUgc3Vic3RpdHV0aW9ucy4KIyBUaGlzIGV4cGFuZHMgdGhlIGZvcm1zICR2YXJpYWJsZSBhbmQgJHt2YXJpYWJsZX0gb25seS4KIyBOb24tZXhpc3RlbnQgdmFyaWFibGVzIGFyZSBsZWZ0IHVuY2hhbmdlZC4KCl92YXJwcm9nID0gTm9uZQpfdmFycHJvZ2IgPSBOb25lCgpkZWYgZXhwYW5kdmFycyhwYXRoKToKICAgICIiIkV4cGFuZCBzaGVsbCB2YXJpYWJsZXMgb2YgZm9ybSAkdmFyIGFuZCAke3Zhcn0uICBVbmtub3duIHZhcmlhYmxlcwogICAgYXJlIGxlZnQgdW5jaGFuZ2VkLiIiIgogICAgZ2xvYmFsIF92YXJwcm9nLCBfdmFycHJvZ2IKICAgIGlmIGlzaW5zdGFuY2UocGF0aCwgYnl0ZXMpOgogICAgICAgIGlmIGInJCcgbm90IGluIHBhdGg6CiAgICAgICAgICAgIHJldHVybiBwYXRoCiAgICAgICAgaWYgbm90IF92YXJwcm9nYjoKICAgICAgICAgICAgaW1wb3J0IHJlCiAgICAgICAgICAgIF92YXJwcm9nYiA9IHJlLmNvbXBpbGUoYnInXCQoXHcrfFx7W159XSpcfSknLCByZS5BU0NJSSkKICAgICAgICBzZWFyY2ggPSBfdmFycHJvZ2Iuc2VhcmNoCiAgICAgICAgc3RhcnQgPSBiJ3snCiAgICAgICAgZW5kID0gYid9JwogICAgZWxzZToKICAgICAgICBpZiAnJCcgbm90IGluIHBhdGg6CiAgICAgICAgICAgIHJldHVybiBwYXRoCiAgICAgICAgaWYgbm90IF92YXJwcm9nOgogICAgICAgICAgICBpbXBvcnQgcmUKICAgICAgICAgICAgX3ZhcnByb2cgPSByZS5jb21waWxlKHInXCQoXHcrfFx7W159XSpcfSknLCByZS5BU0NJSSkKICAgICAgICBzZWFyY2ggPSBfdmFycHJvZy5zZWFyY2gKICAgICAgICBzdGFydCA9ICd7JwogICAgICAgIGVuZCA9ICd9JwogICAgaSA9IDAKICAgIHdoaWxlIFRydWU6CiAgICAgICAgbSA9IHNlYXJjaChwYXRoLCBpKQogICAgICAgIGlmIG5vdCBtOgogICAgICAgICAgICBicmVhawogICAgICAgIGksIGogPSBtLnNwYW4oMCkKICAgICAgICBuYW1lID0gbS5ncm91cCgxKQogICAgICAgIGlmIG5hbWUuc3RhcnRzd2l0aChzdGFydCkgYW5kIG5hbWUuZW5kc3dpdGgoZW5kKToKICAgICAgICAgICAgbmFtZSA9IG5hbWVbMTotMV0KICAgICAgICBpZiBpc2luc3RhbmNlKG5hbWUsIGJ5dGVzKToKICAgICAgICAgICAgbmFtZSA9IHN0cihuYW1lLCAnQVNDSUknKQogICAgICAgIGlmIG5hbWUgaW4gb3MuZW52aXJvbjoKICAgICAgICAgICAgdGFpbCA9IHBhdGhbajpdCiAgICAgICAgICAgIHZhbHVlID0gb3MuZW52aXJvbltuYW1lXQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHBhdGgsIGJ5dGVzKToKICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuZW5jb2RlKCdBU0NJSScpCiAgICAgICAgICAgIHBhdGggPSBwYXRoWzppXSArIHZhbHVlCiAgICAgICAgICAgIGkgPSBsZW4ocGF0aCkKICAgICAgICAgICAgcGF0aCArPSB0YWlsCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaSA9IGoKICAgIHJldHVybiBwYXRoCgoKIyBOb3JtYWxpemUgYSBwYXRoLCBlLmcuIEEvL0IsIEEvLi9CIGFuZCBBL2Zvby8uLi9CIGFsbCBiZWNvbWUgQS9CLgojIEl0IHNob3VsZCBiZSB1bmRlcnN0b29kIHRoYXQgdGhpcyBtYXkgY2hhbmdlIHRoZSBtZWFuaW5nIG9mIHRoZSBwYXRoCiMgaWYgaXQgY29udGFpbnMgc3ltYm9saWMgbGlua3MhCgpkZWYgbm9ybXBhdGgocGF0aCk6CiAgICAiIiJOb3JtYWxpemUgcGF0aCwgZWxpbWluYXRpbmcgZG91YmxlIHNsYXNoZXMsIGV0Yy4iIiIKICAgIGlmIGlzaW5zdGFuY2UocGF0aCwgYnl0ZXMpOgogICAgICAgIHNlcCA9IGInLycKICAgICAgICBlbXB0eSA9IGInJwogICAgICAgIGRvdCA9IGInLicKICAgICAgICBkb3Rkb3QgPSBiJy4uJwogICAgZWxzZToKICAgICAgICBzZXAgPSAnLycKICAgICAgICBlbXB0eSA9ICcnCiAgICAgICAgZG90ID0gJy4nCiAgICAgICAgZG90ZG90ID0gJy4uJwogICAgaWYgcGF0aCA9PSBlbXB0eToKICAgICAgICByZXR1cm4gZG90CiAgICBpbml0aWFsX3NsYXNoZXMgPSBwYXRoLnN0YXJ0c3dpdGgoc2VwKQogICAgIyBQT1NJWCBhbGxvd3Mgb25lIG9yIHR3byBpbml0aWFsIHNsYXNoZXMsIGJ1dCB0cmVhdHMgdGhyZWUgb3IgbW9yZQogICAgIyBhcyBzaW5nbGUgc2xhc2guCiAgICBpZiAoaW5pdGlhbF9zbGFzaGVzIGFuZAogICAgICAgIHBhdGguc3RhcnRzd2l0aChzZXAqMikgYW5kIG5vdCBwYXRoLnN0YXJ0c3dpdGgoc2VwKjMpKToKICAgICAgICBpbml0aWFsX3NsYXNoZXMgPSAyCiAgICBjb21wcyA9IHBhdGguc3BsaXQoc2VwKQogICAgbmV3X2NvbXBzID0gW10KICAgIGZvciBjb21wIGluIGNvbXBzOgogICAgICAgIGlmIGNvbXAgaW4gKGVtcHR5LCBkb3QpOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGlmIChjb21wICE9IGRvdGRvdCBvciAobm90IGluaXRpYWxfc2xhc2hlcyBhbmQgbm90IG5ld19jb21wcykgb3IKICAgICAgICAgICAgIChuZXdfY29tcHMgYW5kIG5ld19jb21wc1stMV0gPT0gZG90ZG90KSk6CiAgICAgICAgICAgIG5ld19jb21wcy5hcHBlbmQoY29tcCkKICAgICAgICBlbGlmIG5ld19jb21wczoKICAgICAgICAgICAgbmV3X2NvbXBzLnBvcCgpCiAgICBjb21wcyA9IG5ld19jb21wcwogICAgcGF0aCA9IHNlcC5qb2luKGNvbXBzKQogICAgaWYgaW5pdGlhbF9zbGFzaGVzOgogICAgICAgICNmaXhtZSBieXRob24KICAgICAgICAjcGF0aCA9IHNlcCppbml0aWFsX3NsYXNoZXMgKyBwYXRoCiAgICAgICAgcGF0aCA9IHNlcCppbnQoaW5pdGlhbF9zbGFzaGVzKSArIHBhdGgKICAgIHJldHVybiBwYXRoIG9yIGRvdAoKCmRlZiBhYnNwYXRoKHBhdGgpOgogICAgIiIiUmV0dXJuIGFuIGFic29sdXRlIHBhdGguIiIiCiAgICBpZiBub3QgaXNhYnMocGF0aCk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6CiAgICAgICAgICAgIGN3ZCA9IG9zLmdldGN3ZGIoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGN3ZCA9IG9zLmdldGN3ZCgpCiAgICAgICAgcGF0aCA9IGpvaW4oY3dkLCBwYXRoKQogICAgcmV0dXJuIG5vcm1wYXRoKHBhdGgpCgoKIyBSZXR1cm4gYSBjYW5vbmljYWwgcGF0aCAoaS5lLiB0aGUgYWJzb2x1dGUgbG9jYXRpb24gb2YgYSBmaWxlIG9uIHRoZQojIGZpbGVzeXN0ZW0pLgoKZGVmIHJlYWxwYXRoKGZpbGVuYW1lKToKICAgICIiIlJldHVybiB0aGUgY2Fub25pY2FsIHBhdGggb2YgdGhlIHNwZWNpZmllZCBmaWxlbmFtZSwgZWxpbWluYXRpbmcgYW55CnN5bWJvbGljIGxpbmtzIGVuY291bnRlcmVkIGluIHRoZSBwYXRoLiIiIgogICAgaWYgaXNpbnN0YW5jZShmaWxlbmFtZSwgYnl0ZXMpOgogICAgICAgIHNlcCA9IGInLycKICAgICAgICBlbXB0eSA9IGInJwogICAgZWxzZToKICAgICAgICBzZXAgPSAnLycKICAgICAgICBlbXB0eSA9ICcnCiAgICBpZiBpc2FicyhmaWxlbmFtZSk6CiAgICAgICAgYml0cyA9IFtzZXBdICsgZmlsZW5hbWUuc3BsaXQoc2VwKVsxOl0KICAgIGVsc2U6CiAgICAgICAgYml0cyA9IFtlbXB0eV0gKyBmaWxlbmFtZS5zcGxpdChzZXApCgogICAgZm9yIGkgaW4gcmFuZ2UoMiwgbGVuKGJpdHMpKzEpOgogICAgICAgIGNvbXBvbmVudCA9IGpvaW4oKmJpdHNbMDppXSkKICAgICAgICAjIFJlc29sdmUgc3ltYm9saWMgbGlua3MuCiAgICAgICAgaWYgaXNsaW5rKGNvbXBvbmVudCk6CiAgICAgICAgICAgIHJlc29sdmVkID0gX3Jlc29sdmVfbGluayhjb21wb25lbnQpCiAgICAgICAgICAgIGlmIHJlc29sdmVkIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjIEluZmluaXRlIGxvb3AgLS0gcmV0dXJuIG9yaWdpbmFsIGNvbXBvbmVudCArIHJlc3Qgb2YgdGhlIHBhdGgKICAgICAgICAgICAgICAgIHJldHVybiBhYnNwYXRoKGpvaW4oKihbY29tcG9uZW50XSArIGJpdHNbaTpdKSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBuZXdwYXRoID0gam9pbigqKFtyZXNvbHZlZF0gKyBiaXRzW2k6XSkpCiAgICAgICAgICAgICAgICByZXR1cm4gcmVhbHBhdGgobmV3cGF0aCkKCiAgICByZXR1cm4gYWJzcGF0aChmaWxlbmFtZSkKCgpkZWYgX3Jlc29sdmVfbGluayhwYXRoKToKICAgICIiIkludGVybmFsIGhlbHBlciBmdW5jdGlvbi4gIFRha2VzIGEgcGF0aCBhbmQgZm9sbG93cyBzeW1saW5rcwogICAgdW50aWwgd2UgZWl0aGVyIGFycml2ZSBhdCBzb21ldGhpbmcgdGhhdCBpc24ndCBhIHN5bWxpbmssIG9yCiAgICBlbmNvdW50ZXIgYSBwYXRoIHdlJ3ZlIHNlZW4gYmVmb3JlIChtZWFuaW5nIHRoYXQgdGhlcmUncyBhIGxvb3ApLgogICAgIiIiCiAgICBwYXRoc19zZWVuID0gc2V0KCkKICAgIHdoaWxlIGlzbGluayhwYXRoKToKICAgICAgICBpZiBwYXRoIGluIHBhdGhzX3NlZW46CiAgICAgICAgICAgICMgQWxyZWFkeSBzZWVuIHRoaXMgcGF0aCwgc28gd2UgbXVzdCBoYXZlIGEgc3ltbGluayBsb29wCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgcGF0aHNfc2Vlbi5hZGQocGF0aCkKICAgICAgICAjIFJlc29sdmUgd2hlcmUgdGhlIGxpbmsgcG9pbnRzIHRvCiAgICAgICAgcmVzb2x2ZWQgPSBvcy5yZWFkbGluayhwYXRoKQogICAgICAgIGlmIG5vdCBpc2FicyhyZXNvbHZlZCk6CiAgICAgICAgICAgIGRpciA9IGRpcm5hbWUocGF0aCkKICAgICAgICAgICAgcGF0aCA9IG5vcm1wYXRoKGpvaW4oZGlyLCByZXNvbHZlZCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGF0aCA9IG5vcm1wYXRoKHJlc29sdmVkKQogICAgcmV0dXJuIHBhdGgKCnN1cHBvcnRzX3VuaWNvZGVfZmlsZW5hbWVzID0gKHN5cy5wbGF0Zm9ybSA9PSAnZGFyd2luJykKCmRlZiByZWxwYXRoKHBhdGgsIHN0YXJ0PU5vbmUpOgogICAgIiIiUmV0dXJuIGEgcmVsYXRpdmUgdmVyc2lvbiBvZiBhIHBhdGgiIiIKCiAgICBpZiBub3QgcGF0aDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJubyBwYXRoIHNwZWNpZmllZCIpCgogICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6CiAgICAgICAgY3VyZGlyID0gYicuJwogICAgICAgIHNlcCA9IGInLycKICAgICAgICBwYXJkaXIgPSBiJy4uJwogICAgZWxzZToKICAgICAgICBjdXJkaXIgPSAnLicKICAgICAgICBzZXAgPSAnLycKICAgICAgICBwYXJkaXIgPSAnLi4nCgogICAgaWYgc3RhcnQgaXMgTm9uZToKICAgICAgICBzdGFydCA9IGN1cmRpcgoKICAgIHN0YXJ0X2xpc3QgPSBbeCBmb3IgeCBpbiBhYnNwYXRoKHN0YXJ0KS5zcGxpdChzZXApIGlmIHhdCiAgICBwYXRoX2xpc3QgPSBbeCBmb3IgeCBpbiBhYnNwYXRoKHBhdGgpLnNwbGl0KHNlcCkgaWYgeF0KCiAgICAjIFdvcmsgb3V0IGhvdyBtdWNoIG9mIHRoZSBmaWxlcGF0aCBpcyBzaGFyZWQgYnkgc3RhcnQgYW5kIHBhdGguCiAgICBpID0gbGVuKGNvbW1vbnByZWZpeChbc3RhcnRfbGlzdCwgcGF0aF9saXN0XSkpCgogICAgcmVsX2xpc3QgPSBbcGFyZGlyXSAqIChsZW4oc3RhcnRfbGlzdCktaSkgKyBwYXRoX2xpc3RbaTpdCiAgICBpZiBub3QgcmVsX2xpc3Q6CiAgICAgICAgcmV0dXJuIGN1cmRpcgogICAgcmV0dXJuIGpvaW4oKnJlbF9saXN0KQo=',
'/Lib/struct.py':'X19hbGxfXyA9IFsKICAgICMgRnVuY3Rpb25zCiAgICAnY2FsY3NpemUnLCAncGFjaycsICdwYWNrX2ludG8nLCAndW5wYWNrJywgJ3VucGFja19mcm9tJywKCiAgICAjIENsYXNzZXMKICAgICdTdHJ1Y3QnLAoKICAgICMgRXhjZXB0aW9ucwogICAgJ2Vycm9yJwogICAgXQoKZnJvbSBfc3RydWN0IGltcG9ydCAqCmZyb20gX3N0cnVjdCBpbXBvcnQgX2NsZWFyY2FjaGUKZnJvbSBfc3RydWN0IGltcG9ydCBfX2RvY19fCg==',
'/Lib/_weakref.py':'Y2xhc3MgUHJveHlUeXBlOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLG9iaik6CiAgICAgICAgc2VsZi5vYmogPSBvYmoKCkNhbGxhYmxlUHJveHlUeXBlID0gUHJveHlUeXBlClByb3h5VHlwZXMgPSBbUHJveHlUeXBlLENhbGxhYmxlUHJveHlUeXBlXQoKY2xhc3MgUmVmZXJlbmNlVHlwZToKCiAgICBkZWYgX19pbml0X18oc2VsZixvYmosY2FsbGJhY2spOgogICAgICAgIHNlbGYub2JqID0gb2JqCiAgICAgICAgc2VsZi5jYWxsYmFjayA9IGNhbGxiYWNrCgpjbGFzcyByZWY6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsb2JqLGNhbGxiYWNrPU5vbmUpOgogICAgICAgIHNlbGYub2JqID0gUmVmZXJlbmNlVHlwZShvYmosY2FsbGJhY2spCiAgICAgICAgc2VsZi5jYWxsYmFjaz1jYWxsYmFjawoKZGVmIGdldHdlYWtyZWZjb3VudChvYmopOgogICAgcmV0dXJuIDEKCmRlZiBnZXR3ZWFrcmVmcyhvYmopOgogICAgcmV0dXJuIG9iagoKCmRlZiBwcm94eShvYmosY2FsbGJhY2spOgogICAgcmV0dXJuIFByb3h5VHlwZShvYmopCgo=',
'/Lib/_collections.py':'IyAiSGlnaCBwZXJmb3JtYW5jZSBkYXRhIHN0cnVjdHVyZXMKIyAiCiMgY29waWVkIGZyb20gcHlweSByZXBvCgojCiMgQ29waWVkIGFuZCBjb21wbGV0ZWQgZnJvbSB0aGUgc2FuZGJveCBvZiBDUHl0aG9uCiMgICAobm9uZGlzdC9zYW5kYm94L2NvbGxlY3Rpb25zL3B5ZGVxdWUucHkgcmV2IDEuMSwgUmF5bW9uZCBIZXR0aW5nZXIpCiMKIyBlZGl0ZWQgZm9yIEJyeXRob24gbGluZSA1NTggOiBjYXRjaCBJbXBvcnRFcnJvciBpbnN0ZWFkIG9mIEF0dHJpYnV0ZUVycm9yCgppbXBvcnQgb3BlcmF0b3IKI3RyeToKIyAgICBmcm9tIHRocmVhZCBpbXBvcnQgZ2V0X2lkZW50IGFzIF90aHJlYWRfaWRlbnQKI2V4Y2VwdCBJbXBvcnRFcnJvcjoKZGVmIF90aHJlYWRfaWRlbnQoKToKICAgIHJldHVybiAtMQoKCm4gPSAzMApMRlRMTksgPSBuClJHVExOSyA9IG4rMQpCTE9DS1NJWiA9IG4rMgoKIyBUaGUgZGVxdWUncyBzaXplIGxpbWl0IGlzIGQubWF4bGVuLiAgVGhlIGxpbWl0IGNhbiBiZSB6ZXJvIG9yIHBvc2l0aXZlLCBvcgojIE5vbmUuICBBZnRlciBhbiBpdGVtIGlzIGFkZGVkIHRvIGEgZGVxdWUsIHdlIGNoZWNrIHRvIHNlZSBpZiB0aGUgc2l6ZSBoYXMKIyBncm93biBwYXN0IHRoZSBsaW1pdC4gSWYgaXQgaGFzLCB3ZSBnZXQgdGhlIHNpemUgYmFjayBkb3duIHRvIHRoZSBsaW1pdCBieQojIHBvcHBpbmcgYW4gaXRlbSBvZmYgb2YgdGhlIG9wcG9zaXRlIGVuZC4gIFRoZSBtZXRob2RzIHRoYXQgY2FuIHRyaWdnZXIgdGhpcwojIGFyZSBhcHBlbmQoKSwgYXBwZW5kbGVmdCgpLCBleHRlbmQoKSwgYW5kIGV4dGVuZGxlZnQoKS4KCiNjbGFzcyBkZXF1ZShvYmplY3QpOgpjbGFzcyBkZXF1ZToKCiAgICBkZWYgX19uZXdfXyhjbHMsIGl0ZXJhYmxlPSgpLCAqYXJncywgKiprdyk6CiAgICAgICAgI2ZpeG1lCiAgICAgICAgI3NlbGYgPSBzdXBlcihkZXF1ZSwgY2xzKS5fX25ld19fKGNscywgKmFyZ3MsICoqa3cpCiAgICAgICAgc2VsZj1vYmplY3QuX19uZXdfXyhjbHMsICphcmdzLCAqKmt3KQogICAgICAgIHNlbGYuY2xlYXIoKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZXJhYmxlPSgpLCBtYXhsZW49Tm9uZSk6CiAgICAgICAgb2JqZWN0Ll9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5jbGVhcigpCiAgICAgICAgaWYgbWF4bGVuIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBtYXhsZW4gPCAwOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibWF4bGVuIG11c3QgYmUgbm9uLW5lZ2F0aXZlIikKICAgICAgICBzZWxmLl9tYXhsZW4gPSBtYXhsZW4KICAgICAgICBhZGQgPSBzZWxmLmFwcGVuZAogICAgICAgIGZvciBlbGVtIGluIGl0ZXJhYmxlOgogICAgICAgICAgICBhZGQoZWxlbSkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBtYXhsZW4oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX21heGxlbgoKICAgIGRlZiBjbGVhcihzZWxmKToKICAgICAgICBzZWxmLnJpZ2h0ID0gc2VsZi5sZWZ0ID0gW05vbmVdICogQkxPQ0tTSVoKICAgICAgICBzZWxmLnJpZ2h0bmR4ID0gbi8vMiAgICMgcG9pbnRzIHRvIGxhc3Qgd3JpdHRlbiBlbGVtZW50CiAgICAgICAgc2VsZi5sZWZ0bmR4ID0gbi8vMisxCiAgICAgICAgc2VsZi5sZW5ndGggPSAwCiAgICAgICAgc2VsZi5zdGF0ZSA9IDAKCiAgICBkZWYgYXBwZW5kKHNlbGYsIHgpOgogICAgICAgIHNlbGYuc3RhdGUgKz0gMQogICAgICAgIHNlbGYucmlnaHRuZHggKz0gMQogICAgICAgIGlmIHNlbGYucmlnaHRuZHggPT0gbjoKICAgICAgICAgICAgbmV3YmxvY2sgPSBbTm9uZV0gKiBCTE9DS1NJWgogICAgICAgICAgICBzZWxmLnJpZ2h0W1JHVExOS10gPSBuZXdibG9jawogICAgICAgICAgICBuZXdibG9ja1tMRlRMTktdID0gc2VsZi5yaWdodAogICAgICAgICAgICBzZWxmLnJpZ2h0ID0gbmV3YmxvY2sKICAgICAgICAgICAgc2VsZi5yaWdodG5keCA9IDAKICAgICAgICBzZWxmLmxlbmd0aCArPSAxCiAgICAgICAgc2VsZi5yaWdodFtzZWxmLnJpZ2h0bmR4XSA9IHgKICAgICAgICBpZiBzZWxmLm1heGxlbiBpcyBub3QgTm9uZSBhbmQgc2VsZi5sZW5ndGggPiBzZWxmLm1heGxlbjoKICAgICAgICAgICAgc2VsZi5wb3BsZWZ0KCkKCiAgICBkZWYgYXBwZW5kbGVmdChzZWxmLCB4KToKICAgICAgICBzZWxmLnN0YXRlICs9IDEKICAgICAgICBzZWxmLmxlZnRuZHggLT0gMQogICAgICAgIGlmIHNlbGYubGVmdG5keCA9PSAtMToKICAgICAgICAgICAgbmV3YmxvY2sgPSBbTm9uZV0gKiBCTE9DS1NJWgogICAgICAgICAgICBzZWxmLmxlZnRbTEZUTE5LXSA9IG5ld2Jsb2NrCiAgICAgICAgICAgIG5ld2Jsb2NrW1JHVExOS10gPSBzZWxmLmxlZnQKICAgICAgICAgICAgc2VsZi5sZWZ0ID0gbmV3YmxvY2sKICAgICAgICAgICAgc2VsZi5sZWZ0bmR4ID0gbi0xCiAgICAgICAgc2VsZi5sZW5ndGggKz0gMQogICAgICAgIHNlbGYubGVmdFtzZWxmLmxlZnRuZHhdID0geAogICAgICAgIGlmIHNlbGYubWF4bGVuIGlzIG5vdCBOb25lIGFuZCBzZWxmLmxlbmd0aCA+IHNlbGYubWF4bGVuOgogICAgICAgICAgICBzZWxmLnBvcCgpCgogICAgZGVmIGV4dGVuZChzZWxmLCBpdGVyYWJsZSk6CiAgICAgICAgaWYgaXRlcmFibGUgaXMgc2VsZjoKICAgICAgICAgICAgaXRlcmFibGUgPSBsaXN0KGl0ZXJhYmxlKQogICAgICAgIGZvciBlbGVtIGluIGl0ZXJhYmxlOgogICAgICAgICAgICBzZWxmLmFwcGVuZChlbGVtKQoKICAgIGRlZiBleHRlbmRsZWZ0KHNlbGYsIGl0ZXJhYmxlKToKICAgICAgICBpZiBpdGVyYWJsZSBpcyBzZWxmOgogICAgICAgICAgICBpdGVyYWJsZSA9IGxpc3QoaXRlcmFibGUpCiAgICAgICAgZm9yIGVsZW0gaW4gaXRlcmFibGU6CiAgICAgICAgICAgIHNlbGYuYXBwZW5kbGVmdChlbGVtKQoKICAgIGRlZiBwb3Aoc2VsZik6CiAgICAgICAgaWYgc2VsZi5sZWZ0IGlzIHNlbGYucmlnaHQgYW5kIHNlbGYubGVmdG5keCA+IHNlbGYucmlnaHRuZHg6CiAgICAgICAgICAgICNyYWlzZSBJbmRleEVycm9yLCAicG9wIGZyb20gYW4gZW1wdHkgZGVxdWUiICAjIGRvZXMgbm90IHdvcmsgaW4gYnJ5dGhvbgogICAgICAgICAgICByYWlzZSBJbmRleEVycm9yKCJwb3AgZnJvbSBhbiBlbXB0eSBkZXF1ZSIpCiAgICAgICAgeCA9IHNlbGYucmlnaHRbc2VsZi5yaWdodG5keF0KICAgICAgICBzZWxmLnJpZ2h0W3NlbGYucmlnaHRuZHhdID0gTm9uZQogICAgICAgIHNlbGYubGVuZ3RoIC09IDEKICAgICAgICBzZWxmLnJpZ2h0bmR4IC09IDEKICAgICAgICBzZWxmLnN0YXRlICs9IDEKICAgICAgICBpZiBzZWxmLnJpZ2h0bmR4ID09IC0xOgogICAgICAgICAgICBwcmV2YmxvY2sgPSBzZWxmLnJpZ2h0W0xGVExOS10KICAgICAgICAgICAgaWYgcHJldmJsb2NrIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjIHRoZSBkZXF1ZSBoYXMgYmVjb21lIGVtcHR5OyByZWNlbnRlciBpbnN0ZWFkIG9mIGZyZWVpbmcgYmxvY2sKICAgICAgICAgICAgICAgIHNlbGYucmlnaHRuZHggPSBuLy8yCiAgICAgICAgICAgICAgICBzZWxmLmxlZnRuZHggPSBuLy8yKzEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByZXZibG9ja1tSR1RMTktdID0gTm9uZQogICAgICAgICAgICAgICAgc2VsZi5yaWdodFtMRlRMTktdID0gTm9uZQogICAgICAgICAgICAgICAgc2VsZi5yaWdodCA9IHByZXZibG9jawogICAgICAgICAgICAgICAgc2VsZi5yaWdodG5keCA9IG4tMQogICAgICAgIHJldHVybiB4CgogICAgZGVmIHBvcGxlZnQoc2VsZik6CiAgICAgICAgaWYgc2VsZi5sZWZ0IGlzIHNlbGYucmlnaHQgYW5kIHNlbGYubGVmdG5keCA+IHNlbGYucmlnaHRuZHg6CiAgICAgICAgICAgICNyYWlzZSBJbmRleEVycm9yLCAicG9wIGZyb20gYW4gZW1wdHkgZGVxdWUiCiAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoInBvcCBmcm9tIGFuIGVtcHR5IGRlcXVlIikKICAgICAgICB4ID0gc2VsZi5sZWZ0W3NlbGYubGVmdG5keF0KICAgICAgICBzZWxmLmxlZnRbc2VsZi5sZWZ0bmR4XSA9IE5vbmUKICAgICAgICBzZWxmLmxlbmd0aCAtPSAxCiAgICAgICAgc2VsZi5sZWZ0bmR4ICs9IDEKICAgICAgICBzZWxmLnN0YXRlICs9IDEKICAgICAgICBpZiBzZWxmLmxlZnRuZHggPT0gbjoKICAgICAgICAgICAgcHJldmJsb2NrID0gc2VsZi5sZWZ0W1JHVExOS10KICAgICAgICAgICAgaWYgcHJldmJsb2NrIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjIHRoZSBkZXF1ZSBoYXMgYmVjb21lIGVtcHR5OyByZWNlbnRlciBpbnN0ZWFkIG9mIGZyZWVpbmcgYmxvY2sKICAgICAgICAgICAgICAgIHNlbGYucmlnaHRuZHggPSBuLy8yCiAgICAgICAgICAgICAgICBzZWxmLmxlZnRuZHggPSBuLy8yKzEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByZXZibG9ja1tMRlRMTktdID0gTm9uZQogICAgICAgICAgICAgICAgc2VsZi5sZWZ0W1JHVExOS10gPSBOb25lCiAgICAgICAgICAgICAgICBzZWxmLmxlZnQgPSBwcmV2YmxvY2sKICAgICAgICAgICAgICAgIHNlbGYubGVmdG5keCA9IDAKICAgICAgICByZXR1cm4geAoKICAgIGRlZiBjb3VudChzZWxmLCB2YWx1ZSk6CiAgICAgICAgYyA9IDAKICAgICAgICBmb3IgaXRlbSBpbiBzZWxmOgogICAgICAgICAgICBpZiBpdGVtID09IHZhbHVlOgogICAgICAgICAgICAgICAgYyArPSAxCiAgICAgICAgcmV0dXJuIGMKCiAgICBkZWYgcmVtb3ZlKHNlbGYsIHZhbHVlKToKICAgICAgICAjIE5lZWQgdG8gYmUgZGVmZW5zaXZlIGZvciBtdXRhdGluZyBjb21wYXJpc29ucwogICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihzZWxmKSk6CiAgICAgICAgICAgIGlmIHNlbGZbaV0gPT0gdmFsdWU6CiAgICAgICAgICAgICAgICBkZWwgc2VsZltpXQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZGVxdWUucmVtb3ZlKHgpOiB4IG5vdCBpbiBkZXF1ZSIpCgogICAgZGVmIHJvdGF0ZShzZWxmLCBuPTEpOgogICAgICAgIGxlbmd0aCA9IGxlbihzZWxmKQogICAgICAgIGlmIGxlbmd0aCA9PSAwOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBoYWxmbGVuID0gKGxlbmd0aCsxKSA+PiAxCiAgICAgICAgaWYgbiA+IGhhbGZsZW4gb3IgbiA8IC1oYWxmbGVuOgogICAgICAgICAgICBuICU9IGxlbmd0aAogICAgICAgICAgICBpZiBuID4gaGFsZmxlbjoKICAgICAgICAgICAgICAgIG4gLT0gbGVuZ3RoCiAgICAgICAgICAgIGVsaWYgbiA8IC1oYWxmbGVuOgogICAgICAgICAgICAgICAgbiArPSBsZW5ndGgKICAgICAgICB3aGlsZSBuID4gMDoKICAgICAgICAgICAgc2VsZi5hcHBlbmRsZWZ0KHNlbGYucG9wKCkpCiAgICAgICAgICAgIG4gLT0gMQogICAgICAgIHdoaWxlIG4gPCAwOgogICAgICAgICAgICBzZWxmLmFwcGVuZChzZWxmLnBvcGxlZnQoKSkKICAgICAgICAgICAgbiArPSAxCgogICAgZGVmIHJldmVyc2Uoc2VsZik6CiAgICAgICAgInJldmVyc2UgKklOIFBMQUNFKiIKICAgICAgICBsZWZ0YmxvY2sgPSBzZWxmLmxlZnQKICAgICAgICByaWdodGJsb2NrID0gc2VsZi5yaWdodAogICAgICAgIGxlZnRpbmRleCA9IHNlbGYubGVmdG5keAogICAgICAgIHJpZ2h0aW5kZXggPSBzZWxmLnJpZ2h0bmR4CiAgICAgICAgZm9yIGkgaW4gcmFuZ2Uoc2VsZi5sZW5ndGggLy8gMik6CiAgICAgICAgICAgICMgVmFsaWRhdGUgdGhhdCBwb2ludGVycyBoYXZlbid0IG1ldCBpbiB0aGUgbWlkZGxlCiAgICAgICAgICAgIGFzc2VydCBsZWZ0YmxvY2sgIT0gcmlnaHRibG9jayBvciBsZWZ0aW5kZXggPCByaWdodGluZGV4CgogICAgICAgICAgICAjIFN3YXAKICAgICAgICAgICAgKHJpZ2h0YmxvY2tbcmlnaHRpbmRleF0sIGxlZnRibG9ja1tsZWZ0aW5kZXhdKSA9ICgKICAgICAgICAgICAgICAgIGxlZnRibG9ja1tsZWZ0aW5kZXhdLCByaWdodGJsb2NrW3JpZ2h0aW5kZXhdKQoKICAgICAgICAgICAgIyBBZHZhbmNlIGxlZnQgYmxvY2svaW5kZXggcGFpcgogICAgICAgICAgICBsZWZ0aW5kZXggKz0gMQogICAgICAgICAgICBpZiBsZWZ0aW5kZXggPT0gbjoKICAgICAgICAgICAgICAgIGxlZnRibG9jayA9IGxlZnRibG9ja1tSR1RMTktdCiAgICAgICAgICAgICAgICBhc3NlcnQgbGVmdGJsb2NrIGlzIG5vdCBOb25lCiAgICAgICAgICAgICAgICBsZWZ0aW5kZXggPSAwCgogICAgICAgICAgICAjIFN0ZXAgYmFja3dhcmRzIHdpdGggdGhlIHJpZ2h0IGJsb2NrL2luZGV4IHBhaXIKICAgICAgICAgICAgcmlnaHRpbmRleCAtPSAxCiAgICAgICAgICAgIGlmIHJpZ2h0aW5kZXggPT0gLTE6CiAgICAgICAgICAgICAgICByaWdodGJsb2NrID0gcmlnaHRibG9ja1tMRlRMTktdCiAgICAgICAgICAgICAgICBhc3NlcnQgcmlnaHRibG9jayBpcyBub3QgTm9uZQogICAgICAgICAgICAgICAgcmlnaHRpbmRleCA9IG4gLSAxCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHRocmVhZGxvY2FsYXR0ciA9ICdfX3JlcHInICsgc3RyKF90aHJlYWRfaWRlbnQoKSkKICAgICAgICBpZiB0aHJlYWRsb2NhbGF0dHIgaW4gc2VsZi5fX2RpY3RfXzoKICAgICAgICAgICAgcmV0dXJuICdkZXF1ZShbLi4uXSknCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5fX2RpY3RfX1t0aHJlYWRsb2NhbGF0dHJdID0gVHJ1ZQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiBzZWxmLm1heGxlbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2RlcXVlKCVyLCBtYXhsZW49JXMpJyAlIChsaXN0KHNlbGYpLCBzZWxmLm1heGxlbikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdkZXF1ZSglciknICUgKGxpc3Qoc2VsZiksKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgZGVsIHNlbGYuX19kaWN0X19bdGhyZWFkbG9jYWxhdHRyXQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gZGVxdWVfaXRlcmF0b3Ioc2VsZiwgc2VsZi5faXRlcl9pbXBsKQoKICAgIGRlZiBfaXRlcl9pbXBsKHNlbGYsIG9yaWdpbmFsX3N0YXRlLCBnaXZldXApOgogICAgICAgIGlmIHNlbGYuc3RhdGUgIT0gb3JpZ2luYWxfc3RhdGU6CiAgICAgICAgICAgIGdpdmV1cCgpCiAgICAgICAgYmxvY2sgPSBzZWxmLmxlZnQKICAgICAgICB3aGlsZSBibG9jazoKICAgICAgICAgICAgbCwgciA9IDAsIG4KICAgICAgICAgICAgaWYgYmxvY2sgaXMgc2VsZi5sZWZ0OgogICAgICAgICAgICAgICAgbCA9IHNlbGYubGVmdG5keAogICAgICAgICAgICBpZiBibG9jayBpcyBzZWxmLnJpZ2h0OgogICAgICAgICAgICAgICAgciA9IHNlbGYucmlnaHRuZHggKyAxCiAgICAgICAgICAgIGZvciBlbGVtIGluIGJsb2NrW2w6cl06CiAgICAgICAgICAgICAgICB5aWVsZCBlbGVtCiAgICAgICAgICAgICAgICBpZiBzZWxmLnN0YXRlICE9IG9yaWdpbmFsX3N0YXRlOgogICAgICAgICAgICAgICAgICAgIGdpdmV1cCgpCiAgICAgICAgICAgIGJsb2NrID0gYmxvY2tbUkdUTE5LXQoKICAgIGRlZiBfX3JldmVyc2VkX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGRlcXVlX2l0ZXJhdG9yKHNlbGYsIHNlbGYuX3JldmVyc2VkX2ltcGwpCgogICAgZGVmIF9yZXZlcnNlZF9pbXBsKHNlbGYsIG9yaWdpbmFsX3N0YXRlLCBnaXZldXApOgogICAgICAgIGlmIHNlbGYuc3RhdGUgIT0gb3JpZ2luYWxfc3RhdGU6CiAgICAgICAgICAgIGdpdmV1cCgpCiAgICAgICAgYmxvY2sgPSBzZWxmLnJpZ2h0CiAgICAgICAgd2hpbGUgYmxvY2s6CiAgICAgICAgICAgIGwsIHIgPSAwLCBuCiAgICAgICAgICAgIGlmIGJsb2NrIGlzIHNlbGYubGVmdDoKICAgICAgICAgICAgICAgIGwgPSBzZWxmLmxlZnRuZHgKICAgICAgICAgICAgaWYgYmxvY2sgaXMgc2VsZi5yaWdodDoKICAgICAgICAgICAgICAgIHIgPSBzZWxmLnJpZ2h0bmR4ICsgMQogICAgICAgICAgICBmb3IgZWxlbSBpbiByZXZlcnNlZChibG9ja1tsOnJdKToKICAgICAgICAgICAgICAgIHlpZWxkIGVsZW0KICAgICAgICAgICAgICAgIGlmIHNlbGYuc3RhdGUgIT0gb3JpZ2luYWxfc3RhdGU6CiAgICAgICAgICAgICAgICAgICAgZ2l2ZXVwKCkKICAgICAgICAgICAgYmxvY2sgPSBibG9ja1tMRlRMTktdCgogICAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgICAgI3N1bSA9IDAKICAgICAgICAjYmxvY2sgPSBzZWxmLmxlZnQKICAgICAgICAjd2hpbGUgYmxvY2s6CiAgICAgICAgIyAgICBzdW0gKz0gbgogICAgICAgICMgICAgYmxvY2sgPSBibG9ja1tSR1RMTktdCiAgICAgICAgI3JldHVybiBzdW0gKyBzZWxmLnJpZ2h0bmR4IC0gc2VsZi5sZWZ0bmR4ICsgMSAtIG4KICAgICAgICByZXR1cm4gc2VsZi5sZW5ndGgKCiAgICBkZWYgX19nZXRyZWYoc2VsZiwgaW5kZXgpOgogICAgICAgIGlmIGluZGV4ID49IDA6CiAgICAgICAgICAgIGJsb2NrID0gc2VsZi5sZWZ0CiAgICAgICAgICAgIHdoaWxlIGJsb2NrOgogICAgICAgICAgICAgICAgbCwgciA9IDAsIG4KICAgICAgICAgICAgICAgIGlmIGJsb2NrIGlzIHNlbGYubGVmdDoKICAgICAgICAgICAgICAgICAgICBsID0gc2VsZi5sZWZ0bmR4CiAgICAgICAgICAgICAgICBpZiBibG9jayBpcyBzZWxmLnJpZ2h0OgogICAgICAgICAgICAgICAgICAgIHIgPSBzZWxmLnJpZ2h0bmR4ICsgMQogICAgICAgICAgICAgICAgc3BhbiA9IHItbAogICAgICAgICAgICAgICAgaWYgaW5kZXggPCBzcGFuOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBibG9jaywgbCtpbmRleAogICAgICAgICAgICAgICAgaW5kZXggLT0gc3BhbgogICAgICAgICAgICAgICAgYmxvY2sgPSBibG9ja1tSR1RMTktdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYmxvY2sgPSBzZWxmLnJpZ2h0CiAgICAgICAgICAgIHdoaWxlIGJsb2NrOgogICAgICAgICAgICAgICAgbCwgciA9IDAsIG4KICAgICAgICAgICAgICAgIGlmIGJsb2NrIGlzIHNlbGYubGVmdDoKICAgICAgICAgICAgICAgICAgICBsID0gc2VsZi5sZWZ0bmR4CiAgICAgICAgICAgICAgICBpZiBibG9jayBpcyBzZWxmLnJpZ2h0OgogICAgICAgICAgICAgICAgICAgIHIgPSBzZWxmLnJpZ2h0bmR4ICsgMQogICAgICAgICAgICAgICAgbmVnYXRpdmVfc3BhbiA9IGwtcgogICAgICAgICAgICAgICAgaWYgaW5kZXggPj0gbmVnYXRpdmVfc3BhbjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2ssIHIraW5kZXgKICAgICAgICAgICAgICAgIGluZGV4IC09IG5lZ2F0aXZlX3NwYW4KICAgICAgICAgICAgICAgIGJsb2NrID0gYmxvY2tbTEZUTE5LXQogICAgICAgIHJhaXNlIEluZGV4RXJyb3IoImRlcXVlIGluZGV4IG91dCBvZiByYW5nZSIpCgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGluZGV4KToKICAgICAgICBibG9jaywgaW5kZXggPSBzZWxmLl9fZ2V0cmVmKGluZGV4KQogICAgICAgIHJldHVybiBibG9ja1tpbmRleF0KCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwgaW5kZXgsIHZhbHVlKToKICAgICAgICBibG9jaywgaW5kZXggPSBzZWxmLl9fZ2V0cmVmKGluZGV4KQogICAgICAgIGJsb2NrW2luZGV4XSA9IHZhbHVlCgogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGluZGV4KToKICAgICAgICBsZW5ndGggPSBsZW4oc2VsZikKICAgICAgICBpZiBpbmRleCA+PSAwOgogICAgICAgICAgICBpZiBpbmRleCA+PSBsZW5ndGg6CiAgICAgICAgICAgICAgICByYWlzZSBJbmRleEVycm9yKCJkZXF1ZSBpbmRleCBvdXQgb2YgcmFuZ2UiKQogICAgICAgICAgICBzZWxmLnJvdGF0ZSgtaW5kZXgpCiAgICAgICAgICAgIHNlbGYucG9wbGVmdCgpCiAgICAgICAgICAgIHNlbGYucm90YXRlKGluZGV4KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICNpbmRleCA9IH5pbmRleCAgICAgICN0b2RvIHVudGlsIGJpdCB3aXNlIG9wZXJhdG9ycyBhcmUgaW4gYnl0aG9uCiAgICAgICAgICAgIGluZGV4PSBpbmRleF4oMioqMzEpCiAgICAgICAgICAgIGlmIGluZGV4ID49IGxlbmd0aDoKICAgICAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoImRlcXVlIGluZGV4IG91dCBvZiByYW5nZSIpCiAgICAgICAgICAgIHNlbGYucm90YXRlKGluZGV4KQogICAgICAgICAgICBzZWxmLnBvcCgpCiAgICAgICAgICAgIHNlbGYucm90YXRlKC1pbmRleCkKCiAgICBkZWYgX19yZWR1Y2VfZXhfXyhzZWxmLCBwcm90byk6CiAgICAgICAgcmV0dXJuIHR5cGUoc2VsZiksIChsaXN0KHNlbGYpLCBzZWxmLm1heGxlbikKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgI3JhaXNlIFR5cGVFcnJvciwgImRlcXVlIG9iamVjdHMgYXJlIHVuaGFzaGFibGUiCiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJkZXF1ZSBvYmplY3RzIGFyZSB1bmhhc2hhYmxlIikKCiAgICBkZWYgX19jb3B5X18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKHNlbGYsIHNlbGYubWF4bGVuKQoKICAgICMgWFhYIG1ha2UgY29tcGFyaXNvbiBtb3JlIGVmZmljaWVudAogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgZGVxdWUpOgogICAgICAgICAgICByZXR1cm4gbGlzdChzZWxmKSA9PSBsaXN0KG90aGVyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX25lX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRlcXVlKToKICAgICAgICAgICAgcmV0dXJuIGxpc3Qoc2VsZikgIT0gbGlzdChvdGhlcikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19sdF9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkZXF1ZSk6CiAgICAgICAgICAgIHJldHVybiBsaXN0KHNlbGYpIDwgbGlzdChvdGhlcikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkZXF1ZSk6CiAgICAgICAgICAgIHJldHVybiBsaXN0KHNlbGYpIDw9IGxpc3Qob3RoZXIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fZ3RfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgZGVxdWUpOgogICAgICAgICAgICByZXR1cm4gbGlzdChzZWxmKSA+IGxpc3Qob3RoZXIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fZ2VfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgZGVxdWUpOgogICAgICAgICAgICByZXR1cm4gbGlzdChzZWxmKSA+PSBsaXN0KG90aGVyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX2lhZGRfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgc2VsZi5leHRlbmQob3RoZXIpCiAgICAgICAgcmV0dXJuIHNlbGYKCgpjbGFzcyBkZXF1ZV9pdGVyYXRvcihvYmplY3QpOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkZXEsIGl0ZXJnZW4pOgogICAgICAgIHNlbGYuY291bnRlciA9IGxlbihkZXEpCiAgICAgICAgZGVmIGdpdmV1cCgpOgogICAgICAgICAgICBzZWxmLmNvdW50ZXIgPSAwCiAgICAgICAgICAgICNyYWlzZSBSdW50aW1lRXJyb3IsICJkZXF1ZSBtdXRhdGVkIGR1cmluZyBpdGVyYXRpb24iCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiZGVxdWUgbXV0YXRlZCBkdXJpbmcgaXRlcmF0aW9uIikKICAgICAgICBzZWxmLl9nZW4gPSBpdGVyZ2VuKGRlcS5zdGF0ZSwgZ2l2ZXVwKQoKICAgIGRlZiBuZXh0KHNlbGYpOgogICAgICAgIHJlcyA9ICBzZWxmLl9nZW4ubmV4dCgpCiAgICAgICAgc2VsZi5jb3VudGVyIC09IDEKICAgICAgICByZXR1cm4gcmVzCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgpjbGFzcyBkZWZhdWx0ZGljdChkaWN0KToKICAgIAogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3ZHMpOgogICAgICAgIGlmIGxlbihhcmdzKSA+IDA6CiAgICAgICAgICAgIGRlZmF1bHRfZmFjdG9yeSA9IGFyZ3NbMF0KICAgICAgICAgICAgYXJncyA9IGFyZ3NbMTpdCiAgICAgICAgICAgIGlmIG5vdCBjYWxsYWJsZShkZWZhdWx0X2ZhY3RvcnkpIGFuZCBkZWZhdWx0X2ZhY3RvcnkgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImZpcnN0IGFyZ3VtZW50IG11c3QgYmUgY2FsbGFibGUiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlZmF1bHRfZmFjdG9yeSA9IE5vbmUKICAgICAgICBkaWN0Ll9faW5pdF9fKHNlbGYsIGFyZ3MsIGt3ZHMpCiAgICAgICAgc2VsZi5kZWZhdWx0X2ZhY3RvcnkgPSBkZWZhdWx0X2ZhY3RvcnkKICAgICAgICBzZWxmLnVwZGF0ZShhcmdzLCBrd2RzKQogICAgICAgICNzdXBlcihkZWZhdWx0ZGljdCwgc2VsZikuX19pbml0X18oKmFyZ3MsICoqa3dkcykKCiAgICAjZml4bWUuLiAgaGFkIHRvIGFkZCB0aGlzIGZ1bmN0aW9uIHRvIGdldCBkZWZhdWx0ZGljdCB3b3JraW5nIHdpdGggYnJ5dGhvbiBjb3JyZWN0bHkKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIGlmIHNlbGYuX19jb250YWluc19fKGtleSk6ICAKICAgICAgICAgICByZXR1cm4gZGljdC5fX2dldGl0ZW1fXyhzZWxmLGtleSkKICAgIAogICAgICAgIHJldHVybiBzZWxmLl9fbWlzc2luZ19fKGtleSkKCiAgICBkZWYgX19taXNzaW5nX18oc2VsZiwga2V5KToKICAgICAgICAjIGZyb20gZGVmYXVsdGRpY3QgZG9jcwogICAgICAgIGlmIHNlbGYuZGVmYXVsdF9mYWN0b3J5IGlzIE5vbmU6IAogICAgICAgICAgICByYWlzZSBLZXlFcnJvcihrZXkpCiAgICAgICAgc2VsZltrZXldID0gdmFsdWUgPSBzZWxmLmRlZmF1bHRfZmFjdG9yeSgpCiAgICAgICAgcmV0dXJuIHZhbHVlCgogICAgZGVmIF9fcmVwcl9fKHNlbGYsIHJlY3Vyc2U9c2V0KCkpOgogICAgICAgIGlmIGlkKHNlbGYpIGluIHJlY3Vyc2U6CiAgICAgICAgICAgIHJldHVybiAiZGVmYXVsdGRpY3QoLi4uKSIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlY3Vyc2UuYWRkKGlkKHNlbGYpKQogICAgICAgICAgICByZXR1cm4gImRlZmF1bHRkaWN0KCVzLCAlcykiICUgKHJlcHIoc2VsZi5kZWZhdWx0X2ZhY3RvcnkpLCBzdXBlcihkZWZhdWx0ZGljdCwgc2VsZikuX19yZXByX18oKSkKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICByZWN1cnNlLnJlbW92ZShpZChzZWxmKSkKCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICByZXR1cm4gdHlwZShzZWxmKShzZWxmLmRlZmF1bHRfZmFjdG9yeSwgc2VsZikKICAgIAogICAgZGVmIF9fY29weV9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmNvcHkoKQoKICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYpOgogICAgICAgICMKICAgICAgICAjX19yZWR1Y2VfXyBtdXN0IHJldHVybiBhIDUtdHVwbGUgYXMgZm9sbG93czoKICAgICAgICAjCiAgICAgICAgIyAgIC0gZmFjdG9yeSBmdW5jdGlvbgogICAgICAgICMgICAtIHR1cGxlIG9mIGFyZ3MgZm9yIHRoZSBmYWN0b3J5IGZ1bmN0aW9uCiAgICAgICAgIyAgIC0gYWRkaXRpb25hbCBzdGF0ZSAoaGVyZSBOb25lKQogICAgICAgICMgICAtIHNlcXVlbmNlIGl0ZXJhdG9yIChoZXJlIE5vbmUpCiAgICAgICAgIyAgIC0gZGljdGlvbmFyeSBpdGVyYXRvciAoeWllbGRpbmcgc3VjY2Vzc2l2ZSAoa2V5LCB2YWx1ZSkgcGFpcnMKCiAgICAgICAgIyAgIFRoaXMgQVBJIGlzIHVzZWQgYnkgcGlja2xlLnB5IGFuZCBjb3B5LnB5LgogICAgICAgICMKICAgICAgICByZXR1cm4gKHR5cGUoc2VsZiksIChzZWxmLmRlZmF1bHRfZmFjdG9yeSwpLCBOb25lLCBOb25lLCBzZWxmLml0ZXJpdGVtcygpKQoKZnJvbSBvcGVyYXRvciBpbXBvcnQgaXRlbWdldHRlciBhcyBfaXRlbWdldHRlcgpmcm9tIGtleXdvcmQgaW1wb3J0IGlza2V5d29yZCBhcyBfaXNrZXl3b3JkCmltcG9ydCBzeXMgYXMgX3N5cwoKZGVmIG5hbWVkdHVwbGUodHlwZW5hbWUsIGZpZWxkX25hbWVzLCB2ZXJib3NlPUZhbHNlLCByZW5hbWU9RmFsc2UpOgogICAgIiIiUmV0dXJucyBhIG5ldyBzdWJjbGFzcyBvZiB0dXBsZSB3aXRoIG5hbWVkIGZpZWxkcy4KCiAgICA+Pj4gUG9pbnQgPSBuYW1lZHR1cGxlKCdQb2ludCcsICd4IHknKQogICAgPj4+IFBvaW50Ll9fZG9jX18gICAgICAgICAgICAgICAgICAgIyBkb2NzdHJpbmcgZm9yIHRoZSBuZXcgY2xhc3MKICAgICdQb2ludCh4LCB5KScKICAgID4+PiBwID0gUG9pbnQoMTEsIHk9MjIpICAgICAgICAgICAgICMgaW5zdGFudGlhdGUgd2l0aCBwb3NpdGlvbmFsIGFyZ3Mgb3Iga2V5d29yZHMKICAgID4+PiBwWzBdICsgcFsxXSAgICAgICAgICAgICAgICAgICAgICMgaW5kZXhhYmxlIGxpa2UgYSBwbGFpbiB0dXBsZQogICAgMzMKICAgID4+PiB4LCB5ID0gcCAgICAgICAgICAgICAgICAgICAgICAgICMgdW5wYWNrIGxpa2UgYSByZWd1bGFyIHR1cGxlCiAgICA+Pj4geCwgeQogICAgKDExLCAyMikKICAgID4+PiBwLnggKyBwLnkgICAgICAgICAgICAgICAgICAgICAgICMgZmllbGRzIGFsc28gYWNjZXNzYWJsZSBieSBuYW1lCiAgICAzMwogICAgPj4+IGQgPSBwLl9hc2RpY3QoKSAgICAgICAgICAgICAgICAgIyBjb252ZXJ0IHRvIGEgZGljdGlvbmFyeQogICAgPj4+IGRbJ3gnXQogICAgMTEKICAgID4+PiBQb2ludCgqKmQpICAgICAgICAgICAgICAgICAgICAgICMgY29udmVydCBmcm9tIGEgZGljdGlvbmFyeQogICAgUG9pbnQoeD0xMSwgeT0yMikKICAgID4+PiBwLl9yZXBsYWNlKHg9MTAwKSAgICAgICAgICAgICAgICMgX3JlcGxhY2UoKSBpcyBsaWtlIHN0ci5yZXBsYWNlKCkgYnV0IHRhcmdldHMgbmFtZWQgZmllbGRzCiAgICBQb2ludCh4PTEwMCwgeT0yMikKCiAgICAiIiIKCiAgICAjIFBhcnNlIGFuZCB2YWxpZGF0ZSB0aGUgZmllbGQgbmFtZXMuICBWYWxpZGF0aW9uIHNlcnZlcyB0d28gcHVycG9zZXMsCiAgICAjIGdlbmVyYXRpbmcgaW5mb3JtYXRpdmUgZXJyb3IgbWVzc2FnZXMgYW5kIHByZXZlbnRpbmcgdGVtcGxhdGUgaW5qZWN0aW9uIGF0dGFja3MuCiAgICBpZiBpc2luc3RhbmNlKGZpZWxkX25hbWVzLCBzdHIpOgogICAgICAgIGZpZWxkX25hbWVzID0gZmllbGRfbmFtZXMucmVwbGFjZSgnLCcsICcgJykuc3BsaXQoKSAjIG5hbWVzIHNlcGFyYXRlZCBieSB3aGl0ZXNwYWNlIGFuZC9vciBjb21tYXMKICAgIGZpZWxkX25hbWVzID0gdHVwbGUobWFwKHN0ciwgZmllbGRfbmFtZXMpKQogICAgaWYgcmVuYW1lOgogICAgICAgIG5hbWVzID0gbGlzdChmaWVsZF9uYW1lcykKICAgICAgICBzZWVuID0gc2V0KCkKICAgICAgICBmb3IgaSwgbmFtZSBpbiBlbnVtZXJhdGUobmFtZXMpOgogICAgICAgICAgICBpZiAobm90IG1pbihjLmlzYWxudW0oKSBvciBjPT0nXycgZm9yIGMgaW4gbmFtZSkgb3IgX2lza2V5d29yZChuYW1lKQogICAgICAgICAgICAgICAgb3Igbm90IG5hbWUgb3IgbmFtZVswXS5pc2RpZ2l0KCkgb3IgbmFtZS5zdGFydHN3aXRoKCdfJykKICAgICAgICAgICAgICAgIG9yIG5hbWUgaW4gc2Vlbik6CiAgICAgICAgICAgICAgICAgICAgbmFtZXNbaV0gPSAnXyVkJyAlIGkKICAgICAgICAgICAgc2Vlbi5hZGQobmFtZSkKICAgICAgICBmaWVsZF9uYW1lcyA9IHR1cGxlKG5hbWVzKQogICAgZm9yIG5hbWUgaW4gKHR5cGVuYW1lLCkgKyBmaWVsZF9uYW1lczoKICAgICAgICBpZiBub3QgbWluKGMuaXNhbG51bSgpIG9yIGM9PSdfJyBmb3IgYyBpbiBuYW1lKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVHlwZSBuYW1lcyBhbmQgZmllbGQgbmFtZXMgY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhbmQgdW5kZXJzY29yZXM6ICVyJyAlIG5hbWUpCiAgICAgICAgaWYgX2lza2V5d29yZChuYW1lKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVHlwZSBuYW1lcyBhbmQgZmllbGQgbmFtZXMgY2Fubm90IGJlIGEga2V5d29yZDogJXInICUgbmFtZSkKICAgICAgICBpZiBuYW1lWzBdLmlzZGlnaXQoKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVHlwZSBuYW1lcyBhbmQgZmllbGQgbmFtZXMgY2Fubm90IHN0YXJ0IHdpdGggYSBudW1iZXI6ICVyJyAlIG5hbWUpCiAgICBzZWVuX25hbWVzID0gc2V0KCkKICAgIGZvciBuYW1lIGluIGZpZWxkX25hbWVzOgogICAgICAgIGlmIG5hbWUuc3RhcnRzd2l0aCgnXycpIGFuZCBub3QgcmVuYW1lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdGaWVsZCBuYW1lcyBjYW5ub3Qgc3RhcnQgd2l0aCBhbiB1bmRlcnNjb3JlOiAlcicgJSBuYW1lKQogICAgICAgIGlmIG5hbWUgaW4gc2Vlbl9uYW1lczoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignRW5jb3VudGVyZWQgZHVwbGljYXRlIGZpZWxkIG5hbWU6ICVyJyAlIG5hbWUpCiAgICAgICAgc2Vlbl9uYW1lcy5hZGQobmFtZSkKCiAgICAjIENyZWF0ZSBhbmQgZmlsbC1pbiB0aGUgY2xhc3MgdGVtcGxhdGUKICAgIG51bWZpZWxkcyA9IGxlbihmaWVsZF9uYW1lcykKICAgIGFyZ3R4dCA9IHJlcHIoZmllbGRfbmFtZXMpLnJlcGxhY2UoIiciLCAiIilbMTotMV0gICAjIHR1cGxlIHJlcHIgd2l0aG91dCBwYXJlbnMgb3IgcXVvdGVzCiAgICByZXBydHh0ID0gJywgJy5qb2luKCclcz0lJXInICUgbmFtZSBmb3IgbmFtZSBpbiBmaWVsZF9uYW1lcykKICAgIHRlbXBsYXRlID0gJycnY2xhc3MgJSh0eXBlbmFtZSlzKHR1cGxlKToKICAgICAgICAnJSh0eXBlbmFtZSlzKCUoYXJndHh0KXMpJyBcbgogICAgICAgIF9fc2xvdHNfXyA9ICgpIFxuCiAgICAgICAgX2ZpZWxkcyA9ICUoZmllbGRfbmFtZXMpciBcbgogICAgICAgIGRlZiBfX25ld19fKF9jbHMsICUoYXJndHh0KXMpOgogICAgICAgICAgICByZXR1cm4gX3R1cGxlLl9fbmV3X18oX2NscywgKCUoYXJndHh0KXMpKSBcbgogICAgICAgIEBjbGFzc21ldGhvZAogICAgICAgIGRlZiBfbWFrZShjbHMsIGl0ZXJhYmxlLCBuZXc9dHVwbGUuX19uZXdfXywgbGVuPWxlbik6CiAgICAgICAgICAgICdNYWtlIGEgbmV3ICUodHlwZW5hbWUpcyBvYmplY3QgZnJvbSBhIHNlcXVlbmNlIG9yIGl0ZXJhYmxlJwogICAgICAgICAgICByZXN1bHQgPSBuZXcoY2xzLCBpdGVyYWJsZSkKICAgICAgICAgICAgaWYgbGVuKHJlc3VsdCkgIT0gJShudW1maWVsZHMpZDoKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignRXhwZWN0ZWQgJShudW1maWVsZHMpZCBhcmd1bWVudHMsIGdvdCAlJWQnICUlIGxlbihyZXN1bHQpKQogICAgICAgICAgICByZXR1cm4gcmVzdWx0IFxuCiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgICAgICByZXR1cm4gJyUodHlwZW5hbWUpcyglKHJlcHJ0eHQpcyknICUlIHNlbGYgXG4KICAgICAgICBkZWYgX2FzZGljdChzZWxmKToKICAgICAgICAgICAgJ1JldHVybiBhIG5ldyBkaWN0IHdoaWNoIG1hcHMgZmllbGQgbmFtZXMgdG8gdGhlaXIgdmFsdWVzJwogICAgICAgICAgICByZXR1cm4gZGljdCh6aXAoc2VsZi5fZmllbGRzLCBzZWxmKSkgXG4KICAgICAgICBkZWYgX3JlcGxhY2UoX3NlbGYsICoqa3dkcyk6CiAgICAgICAgICAgICdSZXR1cm4gYSBuZXcgJSh0eXBlbmFtZSlzIG9iamVjdCByZXBsYWNpbmcgc3BlY2lmaWVkIGZpZWxkcyB3aXRoIG5ldyB2YWx1ZXMnCiAgICAgICAgICAgIHJlc3VsdCA9IF9zZWxmLl9tYWtlKG1hcChrd2RzLnBvcCwgJShmaWVsZF9uYW1lcylyLCBfc2VsZikpCiAgICAgICAgICAgIGlmIGt3ZHM6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdHb3QgdW5leHBlY3RlZCBmaWVsZCBuYW1lczogJSVyJyAlJSBrd2RzLmtleXMoKSkKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCBcbgogICAgICAgIGRlZiBfX2dldG5ld2FyZ3NfXyhzZWxmKToKICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYpIFxuXG4nJycgJSBsb2NhbHMoKQogICAgZm9yIGksIG5hbWUgaW4gZW51bWVyYXRlKGZpZWxkX25hbWVzKToKICAgICAgICB0ZW1wbGF0ZSArPSAnICAgICAgICAlcyA9IF9wcm9wZXJ0eShfaXRlbWdldHRlciglZCkpXG4nICUgKG5hbWUsIGkpCiAgICAKICAgIGlmIHZlcmJvc2U6CiAgICAgICAgcHJpbnQodGVtcGxhdGUpCgogICAgIyBFeGVjdXRlIHRoZSB0ZW1wbGF0ZSBzdHJpbmcgaW4gYSB0ZW1wb3JhcnkgbmFtZXNwYWNlCiAgICBuYW1lc3BhY2UgPSBkaWN0KF9pdGVtZ2V0dGVyPV9pdGVtZ2V0dGVyLCBfX25hbWVfXz0nbmFtZWR0dXBsZV8lcycgJSB0eXBlbmFtZSwKICAgICAgICAgICAgICAgICAgICAgX3Byb3BlcnR5PXByb3BlcnR5LCBfdHVwbGU9dHVwbGUpCiAgICB0cnk6CiAgICAgICAgZXhlYyh0ZW1wbGF0ZSxuYW1lc3BhY2UpCiAgICBleGNlcHQgU3ludGF4RXJyb3IgYXMgZToKICAgICAgICByYWlzZSBTeW50YXhFcnJvcihlLm1lc3NhZ2UgKyAnOlxuJyArIHRlbXBsYXRlKQogICAgcmVzdWx0ID0gbmFtZXNwYWNlW3R5cGVuYW1lXQoKICAgICMgRm9yIHBpY2tsaW5nIHRvIHdvcmssIHRoZSBfX21vZHVsZV9fIHZhcmlhYmxlIG5lZWRzIHRvIGJlIHNldCB0byB0aGUgZnJhbWUKICAgICMgd2hlcmUgdGhlIG5hbWVkIHR1cGxlIGlzIGNyZWF0ZWQuICBCeXBhc3MgdGhpcyBzdGVwIGluIGVudmlyb21lbnRzIHdoZXJlCiAgICAjIHN5cy5fZ2V0ZnJhbWUgaXMgbm90IGRlZmluZWQgKEp5dGhvbiBmb3IgZXhhbXBsZSkgb3Igc3lzLl9nZXRmcmFtZSBpcyBub3QKICAgICMgZGVmaW5lZCBmb3IgYXJndW1lbnRzIGdyZWF0ZXIgdGhhbiAwIChJcm9uUHl0aG9uKS4KICAgIHRyeToKICAgICAgICByZXN1bHQuX19tb2R1bGVfXyA9IF9zeXMuX2dldGZyYW1lKDEpLmZfZ2xvYmFscy5nZXQoJ19fbmFtZV9fJywgJ19fbWFpbl9fJykKICAgIGV4Y2VwdCAoSW1wb3J0RXJyb3IsIFZhbHVlRXJyb3IpOgogICAgICAgIHBhc3MKCiAgICByZXR1cm4gcmVzdWx0CgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgUG9pbnQgPSBuYW1lZHR1cGxlKCdQb2ludCcsIFsneCcsICd5J10pCiAgICBwID0gUG9pbnQoMTEsIHk9MjIpCiAgICBwcmludChwWzBdK3BbMV0pCiAgICB4LHk9cAogICAgcHJpbnQoeCx5KQogICAgcHJpbnQocC54K3AueSkKICAgIHByaW50KHApCg==',
'/Lib/binascii.py':'IiIiQSBwdXJlIFB5dGhvbiBpbXBsZW1lbnRhdGlvbiBvZiBiaW5hc2NpaS4KClJhdGhlciBzbG93IGFuZCBidWdneSBpbiBjb3JuZXIgY2FzZXMuClB5UHkgcHJvdmlkZXMgYW4gUlB5dGhvbiB2ZXJzaW9uIHRvby4KIiIiCgojIGJvcnJvd2VkIGZyb20gaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvZjJiZjk0OTQzYTQxL2xpYl9weXB5L2JpbmFzY2lpLnB5CgpjbGFzcyBFcnJvcihFeGNlcHRpb24pOgogICAgcGFzcwoKY2xhc3MgRG9uZShFeGNlcHRpb24pOgogICAgcGFzcwoKY2xhc3MgSW5jb21wbGV0ZShFeGNlcHRpb24pOgogICAgcGFzcwoKZGVmIGEyYl91dShzKToKICAgIGlmIG5vdCBzOgogICAgICAgIHJldHVybiAnJwogICAgCiAgICBsZW5ndGggPSAob3JkKHNbMF0pIC0gMHgyMCkgJSA2NAoKICAgIGRlZiBxdWFkcnVwbGV0c19nZW4ocyk6CiAgICAgICAgd2hpbGUgczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgeWllbGQgb3JkKHNbMF0pLCBvcmQoc1sxXSksIG9yZChzWzJdKSwgb3JkKHNbM10pCiAgICAgICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOgogICAgICAgICAgICAgICAgcyArPSAnICAgJwogICAgICAgICAgICAgICAgeWllbGQgb3JkKHNbMF0pLCBvcmQoc1sxXSksIG9yZChzWzJdKSwgb3JkKHNbM10pCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgcyA9IHNbNDpdCgogICAgdHJ5OgogICAgICAgIHJlc3VsdCA9IFsnJy5qb2luKAogICAgICAgICAgICBbY2hyKChBIC0gMHgyMCkgPDwgMiB8ICgoKEIgLSAweDIwKSA+PiA0KSAmIDB4MykpLAogICAgICAgICAgICBjaHIoKChCIC0gMHgyMCkgJiAweGYpIDw8IDQgfCAoKChDIC0gMHgyMCkgPj4gMikgJiAweGYpKSwKICAgICAgICAgICAgY2hyKCgoQyAtIDB4MjApICYgMHgzKSA8PCA2IHwgKChEIC0gMHgyMCkgJiAweDNmKSkKICAgICAgICAgICAgXSkgZm9yIEEsIEIsIEMsIEQgaW4gcXVhZHJ1cGxldHNfZ2VuKHNbMTpdLnJzdHJpcCgpKV0KICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIHJhaXNlIEVycm9yKCdJbGxlZ2FsIGNoYXInKQogICAgcmVzdWx0ID0gJycuam9pbihyZXN1bHQpCiAgICB0cmFpbGluZ2RhdGEgPSByZXN1bHRbbGVuZ3RoOl0KICAgIGlmIHRyYWlsaW5nZGF0YS5zdHJpcCgnXHgwMCcpOgogICAgICAgIHJhaXNlIEVycm9yKCdUcmFpbGluZyBnYXJiYWdlJykKICAgIHJlc3VsdCA9IHJlc3VsdFs6bGVuZ3RoXQogICAgaWYgbGVuKHJlc3VsdCkgPCBsZW5ndGg6CiAgICAgICAgcmVzdWx0ICs9ICgobGVuZ3RoIC0gbGVuKHJlc3VsdCkpICogJ1x4MDAnKQogICAgcmV0dXJuIHJlc3VsdAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIApkZWYgYjJhX3V1KHMpOgogICAgbGVuZ3RoID0gbGVuKHMpCiAgICBpZiBsZW5ndGggPiA0NToKICAgICAgICByYWlzZSBFcnJvcignQXQgbW9zdCA0NSBieXRlcyBhdCBvbmNlJykKCiAgICBkZWYgdHJpcGxlc19nZW4ocyk6CiAgICAgICAgd2hpbGUgczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgeWllbGQgb3JkKHNbMF0pLCBvcmQoc1sxXSksIG9yZChzWzJdKQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgICAgIHMgKz0gJ1wwXDAnCiAgICAgICAgICAgICAgICB5aWVsZCBvcmQoc1swXSksIG9yZChzWzFdKSwgb3JkKHNbMl0pCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgcyA9IHNbMzpdCgogICAgcmVzdWx0ID0gWycnLmpvaW4oCiAgICAgICAgW2NocigweDIwICsgKCggQSA+PiAyICAgICAgICAgICAgICAgICAgICApICYgMHgzRikpLAogICAgICAgICBjaHIoMHgyMCArICgoKEEgPDwgNCkgfCAoKEIgPj4gNCkgJiAweEYpKSAmIDB4M0YpKSwKICAgICAgICAgY2hyKDB4MjAgKyAoKChCIDw8IDIpIHwgKChDID4+IDYpICYgMHgzKSkgJiAweDNGKSksCiAgICAgICAgIGNocigweDIwICsgKCggQyAgICAgICAgICAgICAgICAgICAgICAgICApICYgMHgzRikpXSkKICAgICAgICAgICAgICBmb3IgQSwgQiwgQyBpbiB0cmlwbGVzX2dlbihzKV0KICAgIHJldHVybiBjaHIob3JkKCcgJykgKyAobGVuZ3RoICYgMDc3KSkgKyAnJy5qb2luKHJlc3VsdCkgKyAnXG4nCgoKdGFibGVfYTJiX2Jhc2U2NCA9IHsKICAgICdBJzogMCwKICAgICdCJzogMSwKICAgICdDJzogMiwKICAgICdEJzogMywKICAgICdFJzogNCwKICAgICdGJzogNSwKICAgICdHJzogNiwKICAgICdIJzogNywKICAgICdJJzogOCwKICAgICdKJzogOSwKICAgICdLJzogMTAsCiAgICAnTCc6IDExLAogICAgJ00nOiAxMiwKICAgICdOJzogMTMsCiAgICAnTyc6IDE0LAogICAgJ1AnOiAxNSwKICAgICdRJzogMTYsCiAgICAnUic6IDE3LAogICAgJ1MnOiAxOCwKICAgICdUJzogMTksCiAgICAnVSc6IDIwLAogICAgJ1YnOiAyMSwKICAgICdXJzogMjIsCiAgICAnWCc6IDIzLAogICAgJ1knOiAyNCwKICAgICdaJzogMjUsCiAgICAnYSc6IDI2LAogICAgJ2InOiAyNywKICAgICdjJzogMjgsCiAgICAnZCc6IDI5LAogICAgJ2UnOiAzMCwKICAgICdmJzogMzEsCiAgICAnZyc6IDMyLAogICAgJ2gnOiAzMywKICAgICdpJzogMzQsCiAgICAnaic6IDM1LAogICAgJ2snOiAzNiwKICAgICdsJzogMzcsCiAgICAnbSc6IDM4LAogICAgJ24nOiAzOSwKICAgICdvJzogNDAsCiAgICAncCc6IDQxLAogICAgJ3EnOiA0MiwKICAgICdyJzogNDMsCiAgICAncyc6IDQ0LAogICAgJ3QnOiA0NSwKICAgICd1JzogNDYsCiAgICAndic6IDQ3LAogICAgJ3cnOiA0OCwKICAgICd4JzogNDksCiAgICAneSc6IDUwLAogICAgJ3onOiA1MSwKICAgICcwJzogNTIsCiAgICAnMSc6IDUzLAogICAgJzInOiA1NCwKICAgICczJzogNTUsCiAgICAnNCc6IDU2LAogICAgJzUnOiA1NywKICAgICc2JzogNTgsCiAgICAnNyc6IDU5LAogICAgJzgnOiA2MCwKICAgICc5JzogNjEsCiAgICAnKyc6IDYyLAogICAgJy8nOiA2MywKICAgICc9JzogMCwKfQoKCmRlZiBhMmJfYmFzZTY0KHMpOgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgKHN0ciwgdW5pY29kZSkpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgc3RyaW5nIG9yIHVuaWNvZGUsIGdvdCAlciIgJSAocywpKQogICAgcyA9IHMucnN0cmlwKCkKICAgICMgY2xlYW4gb3V0IGFsbCBpbnZhbGlkIGNoYXJhY3RlcnMsIHRoaXMgYWxzbyBzdHJpcHMgdGhlIGZpbmFsICc9JyBwYWRkaW5nCiAgICAjIGNoZWNrIGZvciBjb3JyZWN0IHBhZGRpbmcKCiAgICBkZWYgbmV4dF92YWxpZF9jaGFyKHMsIHBvcyk6CiAgICAgICAgZm9yIGkgaW4gcmFuZ2UocG9zICsgMSwgbGVuKHMpKToKICAgICAgICAgICAgYyA9IHNbaV0KICAgICAgICAgICAgaWYgYyA8ICdceDdmJzoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICB0YWJsZV9hMmJfYmFzZTY0W2NdCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMKICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgcmV0dXJuIE5vbmUKICAgIAogICAgcXVhZF9wb3MgPSAwCiAgICBsZWZ0Yml0cyA9IDAKICAgIGxlZnRjaGFyID0gMAogICAgcmVzID0gW10KICAgIGZvciBpLCBjIGluIGVudW1lcmF0ZShzKToKICAgICAgICBpZiBjID4gJ1x4N2YnIG9yIGMgPT0gJ1xuJyBvciBjID09ICdccicgb3IgYyA9PSAnICc6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgaWYgYyA9PSAnPSc6CiAgICAgICAgICAgIGlmIHF1YWRfcG9zIDwgMiBvciAocXVhZF9wb3MgPT0gMiBhbmQgbmV4dF92YWxpZF9jaGFyKHMsIGkpICE9ICc9Jyk6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbGVmdGJpdHMgPSAwCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIHRyeToKICAgICAgICAgICAgbmV4dF9jID0gdGFibGVfYTJiX2Jhc2U2NFtjXQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgY29udGludWUKICAgICAgICBxdWFkX3BvcyA9IChxdWFkX3BvcyArIDEpICYgMHgwMwogICAgICAgIGxlZnRjaGFyID0gKGxlZnRjaGFyIDw8IDYpIHwgbmV4dF9jCiAgICAgICAgbGVmdGJpdHMgKz0gNgogICAgICAgIGlmIGxlZnRiaXRzID49IDg6CiAgICAgICAgICAgIGxlZnRiaXRzIC09IDgKICAgICAgICAgICAgcmVzLmFwcGVuZCgobGVmdGNoYXIgPj4gbGVmdGJpdHMgJiAweGZmKSkKICAgICAgICAgICAgbGVmdGNoYXIgJj0gKCgxIDw8IGxlZnRiaXRzKSAtIDEpCiAgICBpZiBsZWZ0Yml0cyAhPSAwOgogICAgICAgIHJhaXNlIEVycm9yKCdJbmNvcnJlY3QgcGFkZGluZycpCiAgICAKICAgIHJldHVybiAnJy5qb2luKFtjaHIoaSkgZm9yIGkgaW4gcmVzXSkKICAgIAp0YWJsZV9iMmFfYmFzZTY0ID0gXAoiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyIKCmRlZiBiMmFfYmFzZTY0KHMpOgogICAgbGVuZ3RoID0gbGVuKHMpCiAgICBmaW5hbF9sZW5ndGggPSBsZW5ndGggJSAzCgogICAgZGVmIHRyaXBsZXNfZ2VuKHMpOgogICAgICAgIHdoaWxlIHM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHlpZWxkIG9yZChzWzBdKSwgb3JkKHNbMV0pLCBvcmQoc1syXSkKICAgICAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgICAgICBzICs9ICdcMFwwJwogICAgICAgICAgICAgICAgeWllbGQgb3JkKHNbMF0pLCBvcmQoc1sxXSksIG9yZChzWzJdKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIHMgPSBzWzM6XQoKICAgIAogICAgYSA9IHRyaXBsZXNfZ2VuKHNbIDpsZW5ndGggLSBmaW5hbF9sZW5ndGhdKQoKICAgIHJlc3VsdCA9IFsnJy5qb2luKAogICAgICAgIFt0YWJsZV9iMmFfYmFzZTY0WyggQSA+PiAyICAgICAgICAgICAgICAgICAgICApICYgMHgzRl0sCiAgICAgICAgIHRhYmxlX2IyYV9iYXNlNjRbKChBIDw8IDQpIHwgKChCID4+IDQpICYgMHhGKSkgJiAweDNGXSwKICAgICAgICAgdGFibGVfYjJhX2Jhc2U2NFsoKEIgPDwgMikgfCAoKEMgPj4gNikgJiAweDMpKSAmIDB4M0ZdLAogICAgICAgICB0YWJsZV9iMmFfYmFzZTY0WyggQyAgICAgICAgICAgICAgICAgICAgICAgICApICYgMHgzRl1dKQogICAgICAgICAgICAgIGZvciBBLCBCLCBDIGluIGFdCgogICAgZmluYWwgPSBzW2xlbmd0aCAtIGZpbmFsX2xlbmd0aDpdCiAgICBpZiBmaW5hbF9sZW5ndGggPT0gMDoKICAgICAgICBzbmlwcGV0ID0gJycKICAgIGVsaWYgZmluYWxfbGVuZ3RoID09IDE6CiAgICAgICAgYSA9IG9yZChmaW5hbFswXSkKICAgICAgICBzbmlwcGV0ID0gdGFibGVfYjJhX2Jhc2U2NFsoYSA+PiAyICkgJiAweDNGXSArIFwKICAgICAgICAgICAgICAgICAgdGFibGVfYjJhX2Jhc2U2NFsoYSA8PCA0ICkgJiAweDNGXSArICc9PScKICAgIGVsc2U6CiAgICAgICAgYSA9IG9yZChmaW5hbFswXSkKICAgICAgICBiID0gb3JkKGZpbmFsWzFdKQogICAgICAgIHNuaXBwZXQgPSB0YWJsZV9iMmFfYmFzZTY0WyhhID4+IDIpICYgMHgzRl0gKyBcCiAgICAgICAgICAgICAgICAgIHRhYmxlX2IyYV9iYXNlNjRbKChhIDw8IDQpIHwgKGIgPj4gNCkgJiAweEYpICYgMHgzRl0gKyBcCiAgICAgICAgICAgICAgICAgIHRhYmxlX2IyYV9iYXNlNjRbKGIgPDwgMikgJiAweDNGXSArICc9JwogICAgcmV0dXJuICcnLmpvaW4ocmVzdWx0KSArIHNuaXBwZXQgKyAnXG4nCgpkZWYgYTJiX3FwKHMsIGhlYWRlcj1GYWxzZSk6CiAgICBpbnAgPSAwCiAgICBvZGF0YSA9IFtdCiAgICB3aGlsZSBpbnAgPCBsZW4ocyk6CiAgICAgICAgaWYgc1tpbnBdID09ICc9JzoKICAgICAgICAgICAgaW5wICs9IDEKICAgICAgICAgICAgaWYgaW5wID49IGxlbihzKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICMgU29mdCBsaW5lIGJyZWFrcwogICAgICAgICAgICBpZiAoc1tpbnBdID09ICdcbicpIG9yIChzW2lucF0gPT0gJ1xyJyk6CiAgICAgICAgICAgICAgICBpZiBzW2lucF0gIT0gJ1xuJzoKICAgICAgICAgICAgICAgICAgICB3aGlsZSBpbnAgPCBsZW4ocykgYW5kIHNbaW5wXSAhPSAnXG4nOgogICAgICAgICAgICAgICAgICAgICAgICBpbnAgKz0gMQogICAgICAgICAgICAgICAgaWYgaW5wIDwgbGVuKHMpOgogICAgICAgICAgICAgICAgICAgIGlucCArPSAxCiAgICAgICAgICAgIGVsaWYgc1tpbnBdID09ICc9JzoKICAgICAgICAgICAgICAgICMgYnJva2VuIGNhc2UgZnJvbSBicm9rZW4gcHl0aG9uIHFwCiAgICAgICAgICAgICAgICBvZGF0YS5hcHBlbmQoJz0nKQogICAgICAgICAgICAgICAgaW5wICs9IDEKICAgICAgICAgICAgZWxpZiBzW2lucF0gaW4gaGV4X251bWJlcnMgYW5kIHNbaW5wICsgMV0gaW4gaGV4X251bWJlcnM6CiAgICAgICAgICAgICAgICBjaCA9IGNocihpbnQoc1tpbnA6aW5wKzJdLCAxNikpCiAgICAgICAgICAgICAgICBpbnAgKz0gMgogICAgICAgICAgICAgICAgb2RhdGEuYXBwZW5kKGNoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgb2RhdGEuYXBwZW5kKCc9JykKICAgICAgICBlbGlmIGhlYWRlciBhbmQgc1tpbnBdID09ICdfJzoKICAgICAgICAgICAgb2RhdGEuYXBwZW5kKCcgJykKICAgICAgICAgICAgaW5wICs9IDEKICAgICAgICBlbHNlOgogICAgICAgICAgICBvZGF0YS5hcHBlbmQoc1tpbnBdKQogICAgICAgICAgICBpbnAgKz0gMQogICAgcmV0dXJuICcnLmpvaW4ob2RhdGEpCgpkZWYgYjJhX3FwKGRhdGEsIHF1b3RldGFicz1GYWxzZSwgaXN0ZXh0PVRydWUsIGhlYWRlcj1GYWxzZSk6CiAgICAiIiJxdW90ZXRhYnM9VHJ1ZSBtZWFucyB0aGF0IHRhYiBhbmQgc3BhY2UgY2hhcmFjdGVycyBhcmUgYWx3YXlzCiAgICAgICBxdW90ZWQuCiAgICAgICBpc3RleHQ9RmFsc2UgbWVhbnMgdGhhdCBcciBhbmQgXG4gYXJlIHRyZWF0ZWQgYXMgcmVndWxhciBjaGFyYWN0ZXJzCiAgICAgICBoZWFkZXI9VHJ1ZSBlbmNvZGVzIHNwYWNlIGNoYXJhY3RlcnMgd2l0aCAnXycgYW5kIHJlcXVpcmVzCiAgICAgICByZWFsICdfJyBjaGFyYWN0ZXJzIHRvIGJlIHF1b3RlZC4KICAgICIiIgogICAgTUFYTElORVNJWkUgPSA3NgoKICAgICMgU2VlIGlmIHRoaXMgc3RyaW5nIGlzIHVzaW5nIENSTEYgbGluZSBlbmRzCiAgICBsZiA9IGRhdGEuZmluZCgnXG4nKQogICAgY3JsZiA9IGxmID4gMCBhbmQgZGF0YVtsZi0xXSA9PSAnXHInCgogICAgaW5wID0gMAogICAgbGluZWxlbiA9IDAKICAgIG9kYXRhID0gW10KICAgIHdoaWxlIGlucCA8IGxlbihkYXRhKToKICAgICAgICBjID0gZGF0YVtpbnBdCiAgICAgICAgaWYgKGMgPiAnficgb3IKICAgICAgICAgICAgYyA9PSAnPScgb3IKICAgICAgICAgICAgKGhlYWRlciBhbmQgYyA9PSAnXycpIG9yCiAgICAgICAgICAgIChjID09ICcuJyBhbmQgbGluZWxlbiA9PSAwIGFuZCAoaW5wKzEgPT0gbGVuKGRhdGEpIG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtpbnArMV0gPT0gJ1xuJyBvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaW5wKzFdID09ICdccicpKSBvcgogICAgICAgICAgICAobm90IGlzdGV4dCBhbmQgKGMgPT0gJ1xyJyBvciBjID09ICdcbicpKSBvcgogICAgICAgICAgICAoKGMgPT0gJ1x0JyBvciBjID09ICcgJykgYW5kIChpbnAgKyAxID09IGxlbihkYXRhKSkpIG9yCiAgICAgICAgICAgIChjIDw9ICcgJyBhbmQgYyAhPSAnXHInIGFuZCBjICE9ICdcbicgYW5kCiAgICAgICAgICAgICAocXVvdGV0YWJzIG9yIChub3QgcXVvdGV0YWJzIGFuZCAoYyAhPSAnXHQnIGFuZCBjICE9ICcgJykpKSkpOgogICAgICAgICAgICBsaW5lbGVuICs9IDMKICAgICAgICAgICAgaWYgbGluZWxlbiA+PSBNQVhMSU5FU0laRToKICAgICAgICAgICAgICAgIG9kYXRhLmFwcGVuZCgnPScpCiAgICAgICAgICAgICAgICBpZiBjcmxmOiBvZGF0YS5hcHBlbmQoJ1xyJykKICAgICAgICAgICAgICAgIG9kYXRhLmFwcGVuZCgnXG4nKQogICAgICAgICAgICAgICAgbGluZWxlbiA9IDMKICAgICAgICAgICAgb2RhdGEuYXBwZW5kKCc9JyArIHR3b19oZXhfZGlnaXRzKG9yZChjKSkpCiAgICAgICAgICAgIGlucCArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgKGlzdGV4dCBhbmQKICAgICAgICAgICAgICAgIChjID09ICdcbicgb3IgKGlucCsxIDwgbGVuKGRhdGEpIGFuZCBjID09ICdccicgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2lucCsxXSA9PSAnXG4nKSkpOgogICAgICAgICAgICAgICAgbGluZWxlbiA9IDAKICAgICAgICAgICAgICAgICMgUHJvdGVjdCBhZ2FpbnN0IHdoaXRlc3BhY2Ugb24gZW5kIG9mIGxpbmUKICAgICAgICAgICAgICAgIGlmIChsZW4ob2RhdGEpID4gMCBhbmQKICAgICAgICAgICAgICAgICAgICAob2RhdGFbLTFdID09ICcgJyBvciBvZGF0YVstMV0gPT0gJ1x0JykpOgogICAgICAgICAgICAgICAgICAgIGNoID0gb3JkKG9kYXRhWy0xXSkKICAgICAgICAgICAgICAgICAgICBvZGF0YVstMV0gPSAnPScKICAgICAgICAgICAgICAgICAgICBvZGF0YS5hcHBlbmQodHdvX2hleF9kaWdpdHMoY2gpKQoKICAgICAgICAgICAgICAgIGlmIGNybGY6IG9kYXRhLmFwcGVuZCgnXHInKQogICAgICAgICAgICAgICAgb2RhdGEuYXBwZW5kKCdcbicpCiAgICAgICAgICAgICAgICBpZiBjID09ICdccic6CiAgICAgICAgICAgICAgICAgICAgaW5wICs9IDIKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaW5wICs9IDEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIChpbnAgKyAxIDwgbGVuKGRhdGEpIGFuZAogICAgICAgICAgICAgICAgICAgIGRhdGFbaW5wKzFdICE9ICdcbicgYW5kCiAgICAgICAgICAgICAgICAgICAgKGxpbmVsZW4gKyAxKSA+PSBNQVhMSU5FU0laRSk6CiAgICAgICAgICAgICAgICAgICAgb2RhdGEuYXBwZW5kKCc9JykKICAgICAgICAgICAgICAgICAgICBpZiBjcmxmOiBvZGF0YS5hcHBlbmQoJ1xyJykKICAgICAgICAgICAgICAgICAgICBvZGF0YS5hcHBlbmQoJ1xuJykKICAgICAgICAgICAgICAgICAgICBsaW5lbGVuID0gMAoKICAgICAgICAgICAgICAgIGxpbmVsZW4gKz0gMQogICAgICAgICAgICAgICAgaWYgaGVhZGVyIGFuZCBjID09ICcgJzoKICAgICAgICAgICAgICAgICAgICBjID0gJ18nCiAgICAgICAgICAgICAgICBvZGF0YS5hcHBlbmQoYykKICAgICAgICAgICAgICAgIGlucCArPSAxCiAgICByZXR1cm4gJycuam9pbihvZGF0YSkKCmhleF9udW1iZXJzID0gJzAxMjM0NTY3ODlBQkNERUYnCmRlZiBoZXgobik6CiAgICBpZiBuID09IDA6CiAgICAgICAgcmV0dXJuICcwJwogICAgCiAgICBpZiBuIDwgMDoKICAgICAgICBuID0gLW4KICAgICAgICBzaWduID0gJy0nCiAgICBlbHNlOgogICAgICAgIHNpZ24gPSAnJwogICAgYXJyID0gW10KCiAgICBkZWYgaGV4X2dlbihuKToKICAgICAgICAiIiIgWWllbGQgYSBuaWJibGUgYXQgYSB0aW1lLiAiIiIKICAgICAgICB3aGlsZSBuOgogICAgICAgICAgICB5aWVsZCBuICUgMHgxMAogICAgICAgICAgICBuID0gbiAvIDB4MTAKCiAgICBmb3IgbmliYmxlIGluIGhleF9nZW4obik6CiAgICAgICAgYXJyID0gW2hleF9udW1iZXJzW25pYmJsZV1dICsgYXJyCiAgICByZXR1cm4gc2lnbiArICcnLmpvaW4oYXJyKQoKZGVmIHR3b19oZXhfZGlnaXRzKG4pOgogICAgcmV0dXJuIGhleF9udW1iZXJzW24gLyAweDEwXSArIGhleF9udW1iZXJzW24gJSAweDEwXQogICAgCgpkZWYgc3RyaGV4X3RvX2ludChzKToKICAgIGkgPSAwCiAgICBmb3IgYyBpbiBzOgogICAgICAgIGkgPSBpICogMHgxMCArIGhleF9udW1iZXJzLmluZGV4KGMpCiAgICByZXR1cm4gaQoKaHF4X2VuY29kaW5nID0gJyEiIyQlJlwnKCkqKywtMDEyMzQ1Njg5QEFCQ0RFRkdISUpLTE1OUFFSU1RVVlhZWltgYWJjZGVmaGlqa2xtcHFyJwoKRE9ORSA9IDB4N2YKU0tJUCA9IDB4N2UKRkFJTCA9IDB4N2QKICAgIAp0YWJsZV9hMmJfaHF4ID0gWwogICAgI15AICAgIF5BICAgIF5CICAgIF5DICAgIF5EICAgIF5FICAgIF5GICAgIF5HICAgCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgI1xiICAgIFx0ICAgIFxuICAgIF5LICAgIF5MICAgIFxyICAgIF5OICAgIF5PICAgCiAgICBGQUlMLCBGQUlMLCBTS0lQLCBGQUlMLCBGQUlMLCBTS0lQLCBGQUlMLCBGQUlMLAogICAgI15QICAgIF5RICAgIF5SICAgIF5TICAgIF5UICAgIF5VICAgIF5WICAgIF5XICAgCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgI15YICAgIF5ZICAgIF5aICAgIF5bICAgIF5cICAgIF5dICAgIF5eICAgIF5fICAgCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgIyAgICAgICEgICAgICIgICAgICMgICAgICQgICAgICUgICAgICYgICAgICcgICAKICAgIEZBSUwsIDB4MDAsIDB4MDEsIDB4MDIsIDB4MDMsIDB4MDQsIDB4MDUsIDB4MDYsCiAgICAjKCAgICAgKSAgICAgKiAgICAgKyAgICAgLCAgICAgLSAgICAgLiAgICAgLyAgIAogICAgMHgwNywgMHgwOCwgMHgwOSwgMHgwQSwgMHgwQiwgMHgwQywgRkFJTCwgRkFJTCwKICAgICMwICAgICAxICAgICAyICAgICAzICAgICA0ICAgICA1ICAgICA2ICAgICA3ICAgCiAgICAweDBELCAweDBFLCAweDBGLCAweDEwLCAweDExLCAweDEyLCAweDEzLCBGQUlMLAogICAgIzggICAgIDkgICAgIDogICAgIDsgICAgIDwgICAgID0gICAgID4gICAgID8gICAKICAgIDB4MTQsIDB4MTUsIERPTkUsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICAjQCAgICAgQSAgICAgQiAgICAgQyAgICAgRCAgICAgRSAgICAgRiAgICAgRyAgIAogICAgMHgxNiwgMHgxNywgMHgxOCwgMHgxOSwgMHgxQSwgMHgxQiwgMHgxQywgMHgxRCwKICAgICNIICAgICBJICAgICBKICAgICBLICAgICBMICAgICBNICAgICBOICAgICBPICAgCiAgICAweDFFLCAweDFGLCAweDIwLCAweDIxLCAweDIyLCAweDIzLCAweDI0LCBGQUlMLAogICAgI1AgICAgIFEgICAgIFIgICAgIFMgICAgIFQgICAgIFUgICAgIFYgICAgIFcgICAKICAgIDB4MjUsIDB4MjYsIDB4MjcsIDB4MjgsIDB4MjksIDB4MkEsIDB4MkIsIEZBSUwsCiAgICAjWCAgICAgWSAgICAgWiAgICAgWyAgICAgXCAgICAgXSAgICAgXiAgICAgXyAgIAogICAgMHgyQywgMHgyRCwgMHgyRSwgMHgyRiwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgICNgICAgICBhICAgICBiICAgICBjICAgICBkICAgICBlICAgICBmICAgICBnICAgCiAgICAweDMwLCAweDMxLCAweDMyLCAweDMzLCAweDM0LCAweDM1LCAweDM2LCBGQUlMLAogICAgI2ggICAgIGkgICAgIGogICAgIGsgICAgIGwgICAgIG0gICAgIG4gICAgIG8gICAKICAgIDB4MzcsIDB4MzgsIDB4MzksIDB4M0EsIDB4M0IsIDB4M0MsIEZBSUwsIEZBSUwsCiAgICAjcCAgICAgcSAgICAgciAgICAgcyAgICAgdCAgICAgdSAgICAgdiAgICAgdyAgIAogICAgMHgzRCwgMHgzRSwgMHgzRiwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgICN4ICAgICB5ICAgICB6ICAgICB7ICAgICB8ICAgICB9ICAgICB+ICAgIF4/ICAgCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKXQoKZGVmIGEyYl9ocXgocyk6CiAgICByZXN1bHQgPSBbXQoKICAgIGRlZiBxdWFkcnVwbGVzX2dlbihzKToKICAgICAgICB0ID0gW10KICAgICAgICBmb3IgYyBpbiBzOgogICAgICAgICAgICByZXMgPSB0YWJsZV9hMmJfaHF4W29yZChjKV0KICAgICAgICAgICAgaWYgcmVzID09IFNLSVA6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHJlcyA9PSBGQUlMOgogICAgICAgICAgICAgICAgcmFpc2UgRXJyb3IoJ0lsbGVnYWwgY2hhcmFjdGVyJykKICAgICAgICAgICAgZWxpZiByZXMgPT0gRE9ORToKICAgICAgICAgICAgICAgIHlpZWxkIHQKICAgICAgICAgICAgICAgIHJhaXNlIERvbmUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHQuYXBwZW5kKHJlcykKICAgICAgICAgICAgaWYgbGVuKHQpID09IDQ6CiAgICAgICAgICAgICAgICB5aWVsZCB0CiAgICAgICAgICAgICAgICB0ID0gW10KICAgICAgICB5aWVsZCB0CiAgICAgICAgCiAgICBkb25lID0gMAogICAgdHJ5OgogICAgICAgIGZvciBzbmlwcGV0IGluIHF1YWRydXBsZXNfZ2VuKHMpOgogICAgICAgICAgICBsZW5ndGggPSBsZW4oc25pcHBldCkKICAgICAgICAgICAgaWYgbGVuZ3RoID09IDQ6CiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGNocigoKHNuaXBwZXRbMF0gJiAweDNmKSA8PCAyKSB8IChzbmlwcGV0WzFdID4+IDQpKSkgCiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGNocigoKHNuaXBwZXRbMV0gJiAweDBmKSA8PCA0KSB8IChzbmlwcGV0WzJdID4+IDIpKSkgCiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGNocigoKHNuaXBwZXRbMl0gJiAweDAzKSA8PCA2KSB8IChzbmlwcGV0WzNdKSkpIAogICAgICAgICAgICBlbGlmIGxlbmd0aCA9PSAzOgogICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoKChzbmlwcGV0WzBdICYgMHgzZikgPDwgMikgfCAoc25pcHBldFsxXSA+PiA0KSkpIAogICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoKChzbmlwcGV0WzFdICYgMHgwZikgPDwgNCkgfCAoc25pcHBldFsyXSA+PiAyKSkpIAogICAgICAgICAgICBlbGlmIGxlbmd0aCA9PSAyOgogICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoKChzbmlwcGV0WzBdICYgMHgzZikgPDwgMikgfCAoc25pcHBldFsxXSA+PiA0KSkpIAogICAgZXhjZXB0IERvbmU6CiAgICAgICAgZG9uZSA9IDEKICAgIGV4Y2VwdCBFcnJvcjoKICAgICAgICByYWlzZQogICAgcmV0dXJuICgnJy5qb2luKHJlc3VsdCksIGRvbmUpCgpkZWYgYjJhX2hxeChzKToKICAgIHJlc3VsdCA9W10KCiAgICBkZWYgdHJpcGxlc19nZW4ocyk6CiAgICAgICAgd2hpbGUgczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgeWllbGQgb3JkKHNbMF0pLCBvcmQoc1sxXSksIG9yZChzWzJdKQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgICAgIHlpZWxkIHR1cGxlKFtvcmQoYykgZm9yIGMgaW4gc10pCiAgICAgICAgICAgIHMgPSBzWzM6XQoKICAgIGZvciBzbmlwcGV0IGluIHRyaXBsZXNfZ2VuKHMpOgogICAgICAgIGxlbmd0aCA9IGxlbihzbmlwcGV0KQogICAgICAgIGlmIGxlbmd0aCA9PSAzOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKAogICAgICAgICAgICAgICAgaHF4X2VuY29kaW5nWyhzbmlwcGV0WzBdICYgMHhmYykgPj4gMl0pCiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoaHF4X2VuY29kaW5nWwogICAgICAgICAgICAgICAgKChzbmlwcGV0WzBdICYgMHgwMykgPDwgNCkgfCAoKHNuaXBwZXRbMV0gJiAweGYwKSA+PiA0KV0pCiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoaHF4X2VuY29kaW5nWwogICAgICAgICAgICAgICAgKHNuaXBwZXRbMV0gJiAweDBmKSA8PCAyIHwgKChzbmlwcGV0WzJdICYgMHhjMCkgPj4gNildKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGhxeF9lbmNvZGluZ1tzbmlwcGV0WzJdICYgMHgzZl0pCiAgICAgICAgZWxpZiBsZW5ndGggPT0gMjoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgKICAgICAgICAgICAgICAgIGhxeF9lbmNvZGluZ1soc25pcHBldFswXSAmIDB4ZmMpID4+IDJdKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGhxeF9lbmNvZGluZ1sKICAgICAgICAgICAgICAgICgoc25pcHBldFswXSAmIDB4MDMpIDw8IDQpIHwgKChzbmlwcGV0WzFdICYgMHhmMCkgPj4gNCldKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGhxeF9lbmNvZGluZ1sKICAgICAgICAgICAgICAgIChzbmlwcGV0WzFdICYgMHgwZikgPDwgMl0pCiAgICAgICAgZWxpZiBsZW5ndGggPT0gMToKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgKICAgICAgICAgICAgICAgIGhxeF9lbmNvZGluZ1soc25pcHBldFswXSAmIDB4ZmMpID4+IDJdKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGhxeF9lbmNvZGluZ1sKICAgICAgICAgICAgICAgICgoc25pcHBldFswXSAmIDB4MDMpIDw8IDQpXSkKICAgIHJldHVybiAnJy5qb2luKHJlc3VsdCkKCmNyY3RhYl9ocXggPSBbCiAgICAgICAgMHgwMDAwLCAweDEwMjEsIDB4MjA0MiwgMHgzMDYzLCAweDQwODQsIDB4NTBhNSwgMHg2MGM2LCAweDcwZTcsCiAgICAgICAgMHg4MTA4LCAweDkxMjksIDB4YTE0YSwgMHhiMTZiLCAweGMxOGMsIDB4ZDFhZCwgMHhlMWNlLCAweGYxZWYsCiAgICAgICAgMHgxMjMxLCAweDAyMTAsIDB4MzI3MywgMHgyMjUyLCAweDUyYjUsIDB4NDI5NCwgMHg3MmY3LCAweDYyZDYsCiAgICAgICAgMHg5MzM5LCAweDgzMTgsIDB4YjM3YiwgMHhhMzVhLCAweGQzYmQsIDB4YzM5YywgMHhmM2ZmLCAweGUzZGUsCiAgICAgICAgMHgyNDYyLCAweDM0NDMsIDB4MDQyMCwgMHgxNDAxLCAweDY0ZTYsIDB4NzRjNywgMHg0NGE0LCAweDU0ODUsCiAgICAgICAgMHhhNTZhLCAweGI1NGIsIDB4ODUyOCwgMHg5NTA5LCAweGU1ZWUsIDB4ZjVjZiwgMHhjNWFjLCAweGQ1OGQsCiAgICAgICAgMHgzNjUzLCAweDI2NzIsIDB4MTYxMSwgMHgwNjMwLCAweDc2ZDcsIDB4NjZmNiwgMHg1Njk1LCAweDQ2YjQsCiAgICAgICAgMHhiNzViLCAweGE3N2EsIDB4OTcxOSwgMHg4NzM4LCAweGY3ZGYsIDB4ZTdmZSwgMHhkNzlkLCAweGM3YmMsCiAgICAgICAgMHg0OGM0LCAweDU4ZTUsIDB4Njg4NiwgMHg3OGE3LCAweDA4NDAsIDB4MTg2MSwgMHgyODAyLCAweDM4MjMsCiAgICAgICAgMHhjOWNjLCAweGQ5ZWQsIDB4ZTk4ZSwgMHhmOWFmLCAweDg5NDgsIDB4OTk2OSwgMHhhOTBhLCAweGI5MmIsCiAgICAgICAgMHg1YWY1LCAweDRhZDQsIDB4N2FiNywgMHg2YTk2LCAweDFhNzEsIDB4MGE1MCwgMHgzYTMzLCAweDJhMTIsCiAgICAgICAgMHhkYmZkLCAweGNiZGMsIDB4ZmJiZiwgMHhlYjllLCAweDliNzksIDB4OGI1OCwgMHhiYjNiLCAweGFiMWEsCiAgICAgICAgMHg2Y2E2LCAweDdjODcsIDB4NGNlNCwgMHg1Y2M1LCAweDJjMjIsIDB4M2MwMywgMHgwYzYwLCAweDFjNDEsCiAgICAgICAgMHhlZGFlLCAweGZkOGYsIDB4Y2RlYywgMHhkZGNkLCAweGFkMmEsIDB4YmQwYiwgMHg4ZDY4LCAweDlkNDksCiAgICAgICAgMHg3ZTk3LCAweDZlYjYsIDB4NWVkNSwgMHg0ZWY0LCAweDNlMTMsIDB4MmUzMiwgMHgxZTUxLCAweDBlNzAsCiAgICAgICAgMHhmZjlmLCAweGVmYmUsIDB4ZGZkZCwgMHhjZmZjLCAweGJmMWIsIDB4YWYzYSwgMHg5ZjU5LCAweDhmNzgsCiAgICAgICAgMHg5MTg4LCAweDgxYTksIDB4YjFjYSwgMHhhMWViLCAweGQxMGMsIDB4YzEyZCwgMHhmMTRlLCAweGUxNmYsCiAgICAgICAgMHgxMDgwLCAweDAwYTEsIDB4MzBjMiwgMHgyMGUzLCAweDUwMDQsIDB4NDAyNSwgMHg3MDQ2LCAweDYwNjcsCiAgICAgICAgMHg4M2I5LCAweDkzOTgsIDB4YTNmYiwgMHhiM2RhLCAweGMzM2QsIDB4ZDMxYywgMHhlMzdmLCAweGYzNWUsCiAgICAgICAgMHgwMmIxLCAweDEyOTAsIDB4MjJmMywgMHgzMmQyLCAweDQyMzUsIDB4NTIxNCwgMHg2Mjc3LCAweDcyNTYsCiAgICAgICAgMHhiNWVhLCAweGE1Y2IsIDB4OTVhOCwgMHg4NTg5LCAweGY1NmUsIDB4ZTU0ZiwgMHhkNTJjLCAweGM1MGQsCiAgICAgICAgMHgzNGUyLCAweDI0YzMsIDB4MTRhMCwgMHgwNDgxLCAweDc0NjYsIDB4NjQ0NywgMHg1NDI0LCAweDQ0MDUsCiAgICAgICAgMHhhN2RiLCAweGI3ZmEsIDB4ODc5OSwgMHg5N2I4LCAweGU3NWYsIDB4Zjc3ZSwgMHhjNzFkLCAweGQ3M2MsCiAgICAgICAgMHgyNmQzLCAweDM2ZjIsIDB4MDY5MSwgMHgxNmIwLCAweDY2NTcsIDB4NzY3NiwgMHg0NjE1LCAweDU2MzQsCiAgICAgICAgMHhkOTRjLCAweGM5NmQsIDB4ZjkwZSwgMHhlOTJmLCAweDk5YzgsIDB4ODllOSwgMHhiOThhLCAweGE5YWIsCiAgICAgICAgMHg1ODQ0LCAweDQ4NjUsIDB4NzgwNiwgMHg2ODI3LCAweDE4YzAsIDB4MDhlMSwgMHgzODgyLCAweDI4YTMsCiAgICAgICAgMHhjYjdkLCAweGRiNWMsIDB4ZWIzZiwgMHhmYjFlLCAweDhiZjksIDB4OWJkOCwgMHhhYmJiLCAweGJiOWEsCiAgICAgICAgMHg0YTc1LCAweDVhNTQsIDB4NmEzNywgMHg3YTE2LCAweDBhZjEsIDB4MWFkMCwgMHgyYWIzLCAweDNhOTIsCiAgICAgICAgMHhmZDJlLCAweGVkMGYsIDB4ZGQ2YywgMHhjZDRkLCAweGJkYWEsIDB4YWQ4YiwgMHg5ZGU4LCAweDhkYzksCiAgICAgICAgMHg3YzI2LCAweDZjMDcsIDB4NWM2NCwgMHg0YzQ1LCAweDNjYTIsIDB4MmM4MywgMHgxY2UwLCAweDBjYzEsCiAgICAgICAgMHhlZjFmLCAweGZmM2UsIDB4Y2Y1ZCwgMHhkZjdjLCAweGFmOWIsIDB4YmZiYSwgMHg4ZmQ5LCAweDlmZjgsCiAgICAgICAgMHg2ZTE3LCAweDdlMzYsIDB4NGU1NSwgMHg1ZTc0LCAweDJlOTMsIDB4M2ViMiwgMHgwZWQxLCAweDFlZjAsCl0KCmRlZiBjcmNfaHF4KHMsIGNyYyk6CiAgICBmb3IgYyBpbiBzOgogICAgICAgIGNyYyA9ICgoY3JjIDw8IDgpICYgMHhmZjAwKSBeIGNyY3RhYl9ocXhbKChjcmMgPj4gOCkgJiAweGZmKSBeIG9yZChjKV0KCiAgICByZXR1cm4gY3JjCgpkZWYgcmxlY29kZV9ocXgocyk6CiAgICAiIiIKICAgIFJ1biBsZW5ndGggZW5jb2RpbmcgZm9yIGJpbmhleDQuCiAgICBUaGUgQ1B5dGhvbiBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdCBkbyBydW4gbGVuZ3RoIGVuY29kaW5nCiAgICBvZiBceDkwIGNoYXJhY3RlcnMuIFRoaXMgaW1wbGVtZW50YXRpb24gZG9lcy4KICAgICIiIgogICAgaWYgbm90IHM6CiAgICAgICAgcmV0dXJuICcnCiAgICByZXN1bHQgPSBbXQogICAgcHJldiA9IHNbMF0KICAgIGNvdW50ID0gMQogICAgIyBBZGQgYSBkdW1teSBjaGFyYWN0ZXIgdG8gZ2V0IHRoZSBsb29wIHRvIGdvIG9uZSBleHRyYSByb3VuZC4KICAgICMgVGhlIGR1bW15IG11c3QgYmUgZGlmZmVyZW50IGZyb20gdGhlIGxhc3QgY2hhcmFjdGVyIG9mIHMuCiAgICAjIEluIHRoZSBzYW1lIHN0ZXAgd2UgcmVtb3ZlIHRoZSBmaXJzdCBjaGFyYWN0ZXIsIHdoaWNoIGhhcwogICAgIyBhbHJlYWR5IGJlZW4gc3RvcmVkIGluIHByZXYuCiAgICBpZiBzWy0xXSA9PSAnISc6CiAgICAgICAgcyA9IHNbMTpdICsgJz8nCiAgICBlbHNlOgogICAgICAgIHMgPSBzWzE6XSArICchJwogICAgICAgIAogICAgZm9yIGMgaW4gczoKICAgICAgICBpZiBjID09IHByZXYgYW5kIGNvdW50IDwgMjU1OgogICAgICAgICAgICBjb3VudCArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgY291bnQgPT0gMToKICAgICAgICAgICAgICAgIGlmIHByZXYgIT0gJ1x4OTAnOgogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQocHJldikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmV4dGVuZChbJ1x4OTAnLCAnXHgwMCddKQogICAgICAgICAgICBlbGlmIGNvdW50IDwgNDoKICAgICAgICAgICAgICAgIGlmIHByZXYgIT0gJ1x4OTAnOgogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5leHRlbmQoW3ByZXZdICogY291bnQpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5leHRlbmQoWydceDkwJywgJ1x4MDAnXSAqIGNvdW50KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgcHJldiAhPSAnXHg5MCc6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmV4dGVuZChbcHJldiwgJ1x4OTAnLCBjaHIoY291bnQpXSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmV4dGVuZChbJ1x4OTAnLCAnXHgwMCcsICdceDkwJywgY2hyKGNvdW50KV0pIAogICAgICAgICAgICBjb3VudCA9IDEKICAgICAgICAgICAgcHJldiA9IGMKICAgICAgICAKICAgIHJldHVybiAnJy5qb2luKHJlc3VsdCkKCmRlZiBybGVkZWNvZGVfaHF4KHMpOgogICAgcyA9IHMuc3BsaXQoJ1x4OTAnKQogICAgcmVzdWx0ID0gW3NbMF1dCiAgICBwcmV2ID0gc1swXQogICAgZm9yIHNuaXBwZXQgaW4gc1sxOl06CiAgICAgICAgY291bnQgPSBvcmQoc25pcHBldFswXSkKICAgICAgICBpZiBjb3VudCA+IDA6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQocHJldlstMV0gKiAoY291bnQtMSkpCiAgICAgICAgICAgIHByZXYgPSBzbmlwcGV0CiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXHg5MCcpCiAgICAgICAgICAgIHByZXYgPSAnXHg5MCcKICAgICAgICByZXN1bHQuYXBwZW5kKHNuaXBwZXRbMTpdKQoKICAgIHJldHVybiAnJy5qb2luKHJlc3VsdCkKCmNyY18zMl90YWIgPSBbCiAgICAweDAwMDAwMDAwLCAweDc3MDczMDk2LCAweGVlMGU2MTJjLCAweDk5MDk1MWJhLCAweDA3NmRjNDE5LAogICAgMHg3MDZhZjQ4ZiwgMHhlOTYzYTUzNSwgMHg5ZTY0OTVhMywgMHgwZWRiODgzMiwgMHg3OWRjYjhhNCwKICAgIDB4ZTBkNWU5MWUsIDB4OTdkMmQ5ODgsIDB4MDliNjRjMmIsIDB4N2ViMTdjYmQsIDB4ZTdiODJkMDcsCiAgICAweDkwYmYxZDkxLCAweDFkYjcxMDY0LCAweDZhYjAyMGYyLCAweGYzYjk3MTQ4LCAweDg0YmU0MWRlLAogICAgMHgxYWRhZDQ3ZCwgMHg2ZGRkZTRlYiwgMHhmNGQ0YjU1MSwgMHg4M2QzODVjNywgMHgxMzZjOTg1NiwKICAgIDB4NjQ2YmE4YzAsIDB4ZmQ2MmY5N2EsIDB4OGE2NWM5ZWMsIDB4MTQwMTVjNGYsIDB4NjMwNjZjZDksCiAgICAweGZhMGYzZDYzLCAweDhkMDgwZGY1LCAweDNiNmUyMGM4LCAweDRjNjkxMDVlLCAweGQ1NjA0MWU0LAogICAgMHhhMjY3NzE3MiwgMHgzYzAzZTRkMSwgMHg0YjA0ZDQ0NywgMHhkMjBkODVmZCwgMHhhNTBhYjU2YiwKICAgIDB4MzViNWE4ZmEsIDB4NDJiMjk4NmMsIDB4ZGJiYmM5ZDYsIDB4YWNiY2Y5NDAsIDB4MzJkODZjZTMsCiAgICAweDQ1ZGY1Yzc1LCAweGRjZDYwZGNmLCAweGFiZDEzZDU5LCAweDI2ZDkzMGFjLCAweDUxZGUwMDNhLAogICAgMHhjOGQ3NTE4MCwgMHhiZmQwNjExNiwgMHgyMWI0ZjRiNSwgMHg1NmIzYzQyMywgMHhjZmJhOTU5OSwKICAgIDB4YjhiZGE1MGYsIDB4MjgwMmI4OWUsIDB4NWYwNTg4MDgsIDB4YzYwY2Q5YjIsIDB4YjEwYmU5MjQsCiAgICAweDJmNmY3Yzg3LCAweDU4Njg0YzExLCAweGMxNjExZGFiLCAweGI2NjYyZDNkLCAweDc2ZGM0MTkwLAogICAgMHgwMWRiNzEwNiwgMHg5OGQyMjBiYywgMHhlZmQ1MTAyYSwgMHg3MWIxODU4OSwgMHgwNmI2YjUxZiwKICAgIDB4OWZiZmU0YTUsIDB4ZThiOGQ0MzMsIDB4NzgwN2M5YTIsIDB4MGYwMGY5MzQsIDB4OTYwOWE4OGUsCiAgICAweGUxMGU5ODE4LCAweDdmNmEwZGJiLCAweDA4NmQzZDJkLCAweDkxNjQ2Yzk3LCAweGU2NjM1YzAxLAogICAgMHg2YjZiNTFmNCwgMHgxYzZjNjE2MiwgMHg4NTY1MzBkOCwgMHhmMjYyMDA0ZSwgMHg2YzA2OTVlZCwKICAgIDB4MWIwMWE1N2IsIDB4ODIwOGY0YzEsIDB4ZjUwZmM0NTcsIDB4NjViMGQ5YzYsIDB4MTJiN2U5NTAsCiAgICAweDhiYmViOGVhLCAweGZjYjk4ODdjLCAweDYyZGQxZGRmLCAweDE1ZGEyZDQ5LCAweDhjZDM3Y2YzLAogICAgMHhmYmQ0NGM2NSwgMHg0ZGIyNjE1OCwgMHgzYWI1NTFjZSwgMHhhM2JjMDA3NCwgMHhkNGJiMzBlMiwKICAgIDB4NGFkZmE1NDEsIDB4M2RkODk1ZDcsIDB4YTRkMWM0NmQsIDB4ZDNkNmY0ZmIsIDB4NDM2OWU5NmEsCiAgICAweDM0NmVkOWZjLCAweGFkNjc4ODQ2LCAweGRhNjBiOGQwLCAweDQ0MDQyZDczLCAweDMzMDMxZGU1LAogICAgMHhhYTBhNGM1ZiwgMHhkZDBkN2NjOSwgMHg1MDA1NzEzYywgMHgyNzAyNDFhYSwgMHhiZTBiMTAxMCwKICAgIDB4YzkwYzIwODYsIDB4NTc2OGI1MjUsIDB4MjA2Zjg1YjMsIDB4Yjk2NmQ0MDksIDB4Y2U2MWU0OWYsCiAgICAweDVlZGVmOTBlLCAweDI5ZDljOTk4LCAweGIwZDA5ODIyLCAweGM3ZDdhOGI0LCAweDU5YjMzZDE3LAogICAgMHgyZWI0MGQ4MSwgMHhiN2JkNWMzYiwgMHhjMGJhNmNhZCwgMHhlZGI4ODMyMCwgMHg5YWJmYjNiNiwKICAgIDB4MDNiNmUyMGMsIDB4NzRiMWQyOWEsIDB4ZWFkNTQ3MzksIDB4OWRkMjc3YWYsIDB4MDRkYjI2MTUsCiAgICAweDczZGMxNjgzLCAweGUzNjMwYjEyLCAweDk0NjQzYjg0LCAweDBkNmQ2YTNlLCAweDdhNmE1YWE4LAogICAgMHhlNDBlY2YwYiwgMHg5MzA5ZmY5ZCwgMHgwYTAwYWUyNywgMHg3ZDA3OWViMSwgMHhmMDBmOTM0NCwKICAgIDB4ODcwOGEzZDIsIDB4MWUwMWYyNjgsIDB4NjkwNmMyZmUsIDB4Zjc2MjU3NWQsIDB4ODA2NTY3Y2IsCiAgICAweDE5NmMzNjcxLCAweDZlNmIwNmU3LCAweGZlZDQxYjc2LCAweDg5ZDMyYmUwLCAweDEwZGE3YTVhLAogICAgMHg2N2RkNGFjYywgMHhmOWI5ZGY2ZiwgMHg4ZWJlZWZmOSwgMHgxN2I3YmU0MywgMHg2MGIwOGVkNSwKICAgIDB4ZDZkNmEzZTgsIDB4YTFkMTkzN2UsIDB4MzhkOGMyYzQsIDB4NGZkZmYyNTIsIDB4ZDFiYjY3ZjEsCiAgICAweGE2YmM1NzY3LCAweDNmYjUwNmRkLCAweDQ4YjIzNjRiLCAweGQ4MGQyYmRhLCAweGFmMGExYjRjLAogICAgMHgzNjAzNGFmNiwgMHg0MTA0N2E2MCwgMHhkZjYwZWZjMywgMHhhODY3ZGY1NSwgMHgzMTZlOGVlZiwKICAgIDB4NDY2OWJlNzksIDB4Y2I2MWIzOGMsIDB4YmM2NjgzMWEsIDB4MjU2ZmQyYTAsIDB4NTI2OGUyMzYsCiAgICAweGNjMGM3Nzk1LCAweGJiMGI0NzAzLCAweDIyMDIxNmI5LCAweDU1MDUyNjJmLCAweGM1YmEzYmJlLAogICAgMHhiMmJkMGIyOCwgMHgyYmI0NWE5MiwgMHg1Y2IzNmEwNCwgMHhjMmQ3ZmZhNywgMHhiNWQwY2YzMSwKICAgIDB4MmNkOTllOGIsIDB4NWJkZWFlMWQsIDB4OWI2NGMyYjAsIDB4ZWM2M2YyMjYsIDB4NzU2YWEzOWMsCiAgICAweDAyNmQ5MzBhLCAweDljMDkwNmE5LCAweGViMGUzNjNmLCAweDcyMDc2Nzg1LCAweDA1MDA1NzEzLAogICAgMHg5NWJmNGE4MiwgMHhlMmI4N2ExNCwgMHg3YmIxMmJhZSwgMHgwY2I2MWIzOCwgMHg5MmQyOGU5YiwKICAgIDB4ZTVkNWJlMGQsIDB4N2NkY2VmYjcsIDB4MGJkYmRmMjEsIDB4ODZkM2QyZDQsIDB4ZjFkNGUyNDIsCiAgICAweDY4ZGRiM2Y4LCAweDFmZGE4MzZlLCAweDgxYmUxNmNkLCAweGY2YjkyNjViLCAweDZmYjA3N2UxLAogICAgMHgxOGI3NDc3NywgMHg4ODA4NWFlNiwgMHhmZjBmNmE3MCwgMHg2NjA2M2JjYSwgMHgxMTAxMGI1YywKICAgIDB4OGY2NTllZmYsIDB4Zjg2MmFlNjksIDB4NjE2YmZmZDMsIDB4MTY2Y2NmNDUsIDB4YTAwYWUyNzgsCiAgICAweGQ3MGRkMmVlLCAweDRlMDQ4MzU0LCAweDM5MDNiM2MyLCAweGE3NjcyNjYxLCAweGQwNjAxNmY3LAogICAgMHg0OTY5NDc0ZCwgMHgzZTZlNzdkYiwgMHhhZWQxNmE0YSwgMHhkOWQ2NWFkYywgMHg0MGRmMGI2NiwKICAgIDB4MzdkODNiZjAsIDB4YTliY2FlNTMsIDB4ZGViYjllYzUsIDB4NDdiMmNmN2YsIDB4MzBiNWZmZTksCiAgICAweGJkYmRmMjFjLCAweGNhYmFjMjhhLCAweDUzYjM5MzMwLCAweDI0YjRhM2E2LCAweGJhZDAzNjA1LAogICAgMHhjZGQ3MDY5MywgMHg1NGRlNTcyOSwgMHgyM2Q5NjdiZiwgMHhiMzY2N2EyZSwgMHhjNDYxNGFiOCwKICAgIDB4NWQ2ODFiMDIsIDB4MmE2ZjJiOTQsIDB4YjQwYmJlMzcsIDB4YzMwYzhlYTEsIDB4NWEwNWRmMWIsCiAgICAweDJkMDJlZjhkCl0KCmRlZiBjcmMzMihzLCBjcmM9MCk6CiAgICByZXN1bHQgPSAwCiAgICBjcmMgPSB+aW50KGNyYykgJiAweGZmZmZmZmZmCiAgICAjY3JjID0gfmxvbmcoY3JjKSAmIDB4ZmZmZmZmZmZMCiAgICBmb3IgYyBpbiBzOgogICAgICAgIGNyYyA9IGNyY18zMl90YWJbKGNyYyBeIGludChvcmQoYykpKSAmIDB4ZmZdIF4gKGNyYyA+PiA4KQogICAgICAgICNjcmMgPSBjcmNfMzJfdGFiWyhjcmMgXiBsb25nKG9yZChjKSkpICYgMHhmZkxdIF4gKGNyYyA+PiA4KQogICAgICAgICMvKiBOb3RlOiAgKGNyYyA+PiA4KSBNVVNUIHplcm8gZmlsbCBvbiBsZWZ0CgogICAgcmVzdWx0ID0gY3JjIF4gMHhmZmZmZmZmZgogICAgCiAgICBpZiByZXN1bHQgPiAyKiozMToKICAgICAgICByZXN1bHQgPSAoKHJlc3VsdCArIDIqKjMxKSAlIDIqKjMyKSAtIDIqKjMxCgogICAgcmV0dXJuIHJlc3VsdAoKZGVmIGIyYV9oZXgocyk6CiAgICByZXN1bHQgPSBbXQogICAgZm9yIGNoYXIgaW4gczoKICAgICAgICBjID0gKG9yZChjaGFyKSA+PiA0KSAmIDB4ZgogICAgICAgIGlmIGMgPiA5OgogICAgICAgICAgICBjID0gYyArIG9yZCgnYScpIC0gMTAKICAgICAgICBlbHNlOgogICAgICAgICAgICBjID0gYyArIG9yZCgnMCcpCiAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoYykpCiAgICAgICAgYyA9IG9yZChjaGFyKSAmIDB4ZgogICAgICAgIGlmIGMgPiA5OgogICAgICAgICAgICBjID0gYyArIG9yZCgnYScpIC0gMTAKICAgICAgICBlbHNlOgogICAgICAgICAgICBjID0gYyArIG9yZCgnMCcpCiAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoYykpCiAgICByZXR1cm4gJycuam9pbihyZXN1bHQpCgpoZXhsaWZ5ID0gYjJhX2hleAoKdGFibGVfaGV4ID0gWwogICAgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsCiAgICAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwKICAgIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLAogICAgMCwgMSwgMiwgMywgIDQsIDUsIDYsIDcsICA4LCA5LC0xLC0xLCAtMSwtMSwtMSwtMSwKICAgIC0xLDEwLDExLDEyLCAxMywxNCwxNSwtMSwgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLAogICAgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsCiAgICAtMSwxMCwxMSwxMiwgMTMsMTQsMTUsLTEsIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwKICAgIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xCl0KCgpkZWYgYTJiX2hleCh0KToKICAgIHJlc3VsdCA9IFtdCgogICAgZGVmIHBhaXJzX2dlbihzKToKICAgICAgICB3aGlsZSBzOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB5aWVsZCB0YWJsZV9oZXhbb3JkKHNbMF0pXSwgdGFibGVfaGV4W29yZChzWzFdKV0KICAgICAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgICAgICBpZiBsZW4ocyk6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdPZGQtbGVuZ3RoIHN0cmluZycpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgcyA9IHNbMjpdCgogICAgZm9yIGEsIGIgaW4gcGFpcnNfZ2VuKHQpOgogICAgICAgIGlmIGEgPCAwIG9yIGIgPCAwOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ05vbi1oZXhhZGVjaW1hbCBkaWdpdCBmb3VuZCcpCiAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoKGEgPDwgNCkgKyBiKSkKICAgIHJldHVybiAnJy5qb2luKHJlc3VsdCkKICAgIAoKdW5oZXhsaWZ5ID0gYTJiX2hleAo=',
'/Lib/antigravity.py':'aW1wb3J0IHdlYmJyb3dzZXIKaW1wb3J0IGhhc2hsaWIKCndlYmJyb3dzZXIub3BlbigiaHR0cDovL3hrY2QuY29tLzM1My8iKQoKZGVmIGdlb2hhc2gobGF0aXR1ZGUsIGxvbmdpdHVkZSwgZGF0ZWRvdyk6CiAgICAnJydDb21wdXRlIGdlb2hhc2goKSB1c2luZyB0aGUgTXVucm9lIGFsZ29yaXRobS4KCiAgICA+Pj4gZ2VvaGFzaCgzNy40MjE1NDIsIC0xMjIuMDg1NTg5LCBiJzIwMDUtMDUtMjYtMTA0NTguNjgnKQogICAgMzcuODU3NzEzIC0xMjIuNTQ0NTQzCgogICAgJycnCiAgICAjIGh0dHA6Ly94a2NkLmNvbS80MjYvCiAgICBoID0gaGFzaGxpYi5tZDUoZGF0ZWRvdykuaGV4ZGlnZXN0KCkKICAgIHAsIHEgPSBbKCclZicgJSBmbG9hdC5mcm9taGV4KCcwLicgKyB4KSkgZm9yIHggaW4gKGhbOjE2XSwgaFsxNjozMl0pXQogICAgcHJpbnQoJyVkJXMgJWQlcycgJSAobGF0aXR1ZGUsIHBbMTpdLCBsb25naXR1ZGUsIHFbMTpdKSkK',
'/Lib/optparse.py':'IiIiQSBwb3dlcmZ1bCwgZXh0ZW5zaWJsZSwgYW5kIGVhc3ktdG8tdXNlIG9wdGlvbiBwYXJzZXIuCgpCeSBHcmVnIFdhcmQgPGd3YXJkQHB5dGhvbi5uZXQ+CgpPcmlnaW5hbGx5IGRpc3RyaWJ1dGVkIGFzIE9wdGlrLgoKRm9yIHN1cHBvcnQsIHVzZSB0aGUgb3B0aWstdXNlcnNAbGlzdHMuc291cmNlZm9yZ2UubmV0IG1haWxpbmcgbGlzdAooaHR0cDovL2xpc3RzLnNvdXJjZWZvcmdlLm5ldC9saXN0cy9saXN0aW5mby9vcHRpay11c2VycykuCgpTaW1wbGUgdXNhZ2UgZXhhbXBsZToKCiAgIGZyb20gb3B0cGFyc2UgaW1wb3J0IE9wdGlvblBhcnNlcgoKICAgcGFyc2VyID0gT3B0aW9uUGFyc2VyKCkKICAgcGFyc2VyLmFkZF9vcHRpb24oIi1mIiwgIi0tZmlsZSIsIGRlc3Q9ImZpbGVuYW1lIiwKICAgICAgICAgICAgICAgICAgICAgaGVscD0id3JpdGUgcmVwb3J0IHRvIEZJTEUiLCBtZXRhdmFyPSJGSUxFIikKICAgcGFyc2VyLmFkZF9vcHRpb24oIi1xIiwgIi0tcXVpZXQiLAogICAgICAgICAgICAgICAgICAgICBhY3Rpb249InN0b3JlX2ZhbHNlIiwgZGVzdD0idmVyYm9zZSIsIGRlZmF1bHQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgaGVscD0iZG9uJ3QgcHJpbnQgc3RhdHVzIG1lc3NhZ2VzIHRvIHN0ZG91dCIpCgogICAob3B0aW9ucywgYXJncykgPSBwYXJzZXIucGFyc2VfYXJncygpCiIiIgoKX192ZXJzaW9uX18gPSAiMS41LjMiCgpfX2FsbF9fID0gWydPcHRpb24nLAogICAgICAgICAgICdtYWtlX29wdGlvbicsCiAgICAgICAgICAgJ1NVUFBSRVNTX0hFTFAnLAogICAgICAgICAgICdTVVBQUkVTU19VU0FHRScsCiAgICAgICAgICAgJ1ZhbHVlcycsCiAgICAgICAgICAgJ09wdGlvbkNvbnRhaW5lcicsCiAgICAgICAgICAgJ09wdGlvbkdyb3VwJywKICAgICAgICAgICAnT3B0aW9uUGFyc2VyJywKICAgICAgICAgICAnSGVscEZvcm1hdHRlcicsCiAgICAgICAgICAgJ0luZGVudGVkSGVscEZvcm1hdHRlcicsCiAgICAgICAgICAgJ1RpdGxlZEhlbHBGb3JtYXR0ZXInLAogICAgICAgICAgICdPcHRQYXJzZUVycm9yJywKICAgICAgICAgICAnT3B0aW9uRXJyb3InLAogICAgICAgICAgICdPcHRpb25Db25mbGljdEVycm9yJywKICAgICAgICAgICAnT3B0aW9uVmFsdWVFcnJvcicsCiAgICAgICAgICAgJ0JhZE9wdGlvbkVycm9yJ10KCl9fY29weXJpZ2h0X18gPSAiIiIKQ29weXJpZ2h0IChjKSAyMDAxLTIwMDYgR3JlZ29yeSBQLiBXYXJkLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC4KQ29weXJpZ2h0IChjKSAyMDAyLTIwMDYgUHl0aG9uIFNvZnR3YXJlIEZvdW5kYXRpb24uICBBbGwgcmlnaHRzIHJlc2VydmVkLgoKUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0Cm1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUKbWV0OgoKICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0CiAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCgogICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQKICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCgogICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgYXV0aG9yIG5vciB0aGUgbmFtZXMgb2YgaXRzCiAgICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbQogICAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KClRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTCklTIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRApUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEKUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIE9SCkNPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLApFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sClBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUgpQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GCkxJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HCk5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUwpTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KIiIiCgppbXBvcnQgc3lzLCBvcwppbXBvcnQgdGV4dHdyYXAKCmRlZiBfcmVwcihzZWxmKToKICAgIHJldHVybiAiPCVzIGF0IDB4JXg6ICVzPiIgJSAoc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIGlkKHNlbGYpLCBzZWxmKQoKCiMgVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgZnJvbToKIyAgIElkOiBvcHRpb25fcGFyc2VyLnB5IDUyNyAyMDA2LTA3LTIzIDE1OjIxOjMwWiBncmVnCiMgICBJZDogb3B0aW9uLnB5IDUyMiAyMDA2LTA2LTExIDE2OjIyOjAzWiBnd2FyZAojICAgSWQ6IGhlbHAucHkgNTI3IDIwMDYtMDctMjMgMTU6MjE6MzBaIGdyZWcKIyAgIElkOiBlcnJvcnMucHkgNTA5IDIwMDYtMDQtMjAgMDA6NTg6MjRaIGd3YXJkCgp0cnk6CiAgICBmcm9tIGdldHRleHQgaW1wb3J0IGdldHRleHQsIG5nZXR0ZXh0CmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGRlZiBnZXR0ZXh0KG1lc3NhZ2UpOgogICAgICAgIHJldHVybiBtZXNzYWdlCgogICAgZGVmIG5nZXR0ZXh0KHNpbmd1bGFyLCBwbHVyYWwsIG4pOgogICAgICAgIGlmIG4gPT0gMToKICAgICAgICAgICAgcmV0dXJuIHNpbmd1bGFyCiAgICAgICAgcmV0dXJuIHBsdXJhbAoKXyA9IGdldHRleHQKCgpjbGFzcyBPcHRQYXJzZUVycm9yIChFeGNlcHRpb24pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1zZyk6CiAgICAgICAgc2VsZi5tc2cgPSBtc2cKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5tc2cKCgpjbGFzcyBPcHRpb25FcnJvciAoT3B0UGFyc2VFcnJvcik6CiAgICAiIiIKICAgIFJhaXNlZCBpZiBhbiBPcHRpb24gaW5zdGFuY2UgaXMgY3JlYXRlZCB3aXRoIGludmFsaWQgb3IKICAgIGluY29uc2lzdGVudCBhcmd1bWVudHMuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbXNnLCBvcHRpb24pOgogICAgICAgIHNlbGYubXNnID0gbXNnCiAgICAgICAgc2VsZi5vcHRpb25faWQgPSBzdHIob3B0aW9uKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYub3B0aW9uX2lkOgogICAgICAgICAgICByZXR1cm4gIm9wdGlvbiAlczogJXMiICUgKHNlbGYub3B0aW9uX2lkLCBzZWxmLm1zZykKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2VsZi5tc2cKCmNsYXNzIE9wdGlvbkNvbmZsaWN0RXJyb3IgKE9wdGlvbkVycm9yKToKICAgICIiIgogICAgUmFpc2VkIGlmIGNvbmZsaWN0aW5nIG9wdGlvbnMgYXJlIGFkZGVkIHRvIGFuIE9wdGlvblBhcnNlci4KICAgICIiIgoKY2xhc3MgT3B0aW9uVmFsdWVFcnJvciAoT3B0UGFyc2VFcnJvcik6CiAgICAiIiIKICAgIFJhaXNlZCBpZiBhbiBpbnZhbGlkIG9wdGlvbiB2YWx1ZSBpcyBlbmNvdW50ZXJlZCBvbiB0aGUgY29tbWFuZAogICAgbGluZS4KICAgICIiIgoKY2xhc3MgQmFkT3B0aW9uRXJyb3IgKE9wdFBhcnNlRXJyb3IpOgogICAgIiIiCiAgICBSYWlzZWQgaWYgYW4gaW52YWxpZCBvcHRpb24gaXMgc2VlbiBvbiB0aGUgY29tbWFuZCBsaW5lLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgb3B0X3N0cik6CiAgICAgICAgc2VsZi5vcHRfc3RyID0gb3B0X3N0cgoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiBfKCJubyBzdWNoIG9wdGlvbjogJXMiKSAlIHNlbGYub3B0X3N0cgoKY2xhc3MgQW1iaWd1b3VzT3B0aW9uRXJyb3IgKEJhZE9wdGlvbkVycm9yKToKICAgICIiIgogICAgUmFpc2VkIGlmIGFuIGFtYmlndW91cyBvcHRpb24gaXMgc2VlbiBvbiB0aGUgY29tbWFuZCBsaW5lLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgb3B0X3N0ciwgcG9zc2liaWxpdGllcyk6CiAgICAgICAgQmFkT3B0aW9uRXJyb3IuX19pbml0X18oc2VsZiwgb3B0X3N0cikKICAgICAgICBzZWxmLnBvc3NpYmlsaXRpZXMgPSBwb3NzaWJpbGl0aWVzCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIChfKCJhbWJpZ3VvdXMgb3B0aW9uOiAlcyAoJXM/KSIpCiAgICAgICAgICAgICAgICAlIChzZWxmLm9wdF9zdHIsICIsICIuam9pbihzZWxmLnBvc3NpYmlsaXRpZXMpKSkKCgpjbGFzcyBIZWxwRm9ybWF0dGVyOgoKICAgICIiIgogICAgQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgZm9ybWF0dGluZyBvcHRpb24gaGVscC4gIE9wdGlvblBhcnNlcgogICAgaW5zdGFuY2VzIHNob3VsZCB1c2Ugb25lIG9mIHRoZSBIZWxwRm9ybWF0dGVyIHN1YmNsYXNzZXMgZm9yCiAgICBmb3JtYXR0aW5nIGhlbHA7IGJ5IGRlZmF1bHQgSW5kZW50ZWRIZWxwRm9ybWF0dGVyIGlzIHVzZWQuCgogICAgSW5zdGFuY2UgYXR0cmlidXRlczoKICAgICAgcGFyc2VyIDogT3B0aW9uUGFyc2VyCiAgICAgICAgdGhlIGNvbnRyb2xsaW5nIE9wdGlvblBhcnNlciBpbnN0YW5jZQogICAgICBpbmRlbnRfaW5jcmVtZW50IDogaW50CiAgICAgICAgdGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIGluZGVudCBwZXIgbmVzdGluZyBsZXZlbAogICAgICBtYXhfaGVscF9wb3NpdGlvbiA6IGludAogICAgICAgIHRoZSBtYXhpbXVtIHN0YXJ0aW5nIGNvbHVtbiBmb3Igb3B0aW9uIGhlbHAgdGV4dAogICAgICBoZWxwX3Bvc2l0aW9uIDogaW50CiAgICAgICAgdGhlIGNhbGN1bGF0ZWQgc3RhcnRpbmcgY29sdW1uIGZvciBvcHRpb24gaGVscCB0ZXh0OwogICAgICAgIGluaXRpYWxseSB0aGUgc2FtZSBhcyB0aGUgbWF4aW11bQogICAgICB3aWR0aCA6IGludAogICAgICAgIHRvdGFsIG51bWJlciBvZiBjb2x1bW5zIGZvciBvdXRwdXQgKHBhc3MgTm9uZSB0byBjb25zdHJ1Y3RvciBmb3IKICAgICAgICB0aGlzIHZhbHVlIHRvIGJlIHRha2VuIGZyb20gdGhlICRDT0xVTU5TIGVudmlyb25tZW50IHZhcmlhYmxlKQogICAgICBsZXZlbCA6IGludAogICAgICAgIGN1cnJlbnQgaW5kZW50YXRpb24gbGV2ZWwKICAgICAgY3VycmVudF9pbmRlbnQgOiBpbnQKICAgICAgICBjdXJyZW50IGluZGVudGF0aW9uIGxldmVsIChpbiBjb2x1bW5zKQogICAgICBoZWxwX3dpZHRoIDogaW50CiAgICAgICAgbnVtYmVyIG9mIGNvbHVtbnMgYXZhaWxhYmxlIGZvciBvcHRpb24gaGVscCB0ZXh0IChjYWxjdWxhdGVkKQogICAgICBkZWZhdWx0X3RhZyA6IHN0cgogICAgICAgIHRleHQgdG8gcmVwbGFjZSB3aXRoIGVhY2ggb3B0aW9uJ3MgZGVmYXVsdCB2YWx1ZSwgIiVkZWZhdWx0IgogICAgICAgIGJ5IGRlZmF1bHQuICBTZXQgdG8gZmFsc2UgdmFsdWUgdG8gZGlzYWJsZSBkZWZhdWx0IHZhbHVlIGV4cGFuc2lvbi4KICAgICAgb3B0aW9uX3N0cmluZ3MgOiB7IE9wdGlvbiA6IHN0ciB9CiAgICAgICAgbWFwcyBPcHRpb24gaW5zdGFuY2VzIHRvIHRoZSBzbmlwcGV0IG9mIGhlbHAgdGV4dCBleHBsYWluaW5nCiAgICAgICAgdGhlIHN5bnRheCBvZiB0aGF0IG9wdGlvbiwgZS5nLiAiLWgsIC0taGVscCIgb3IKICAgICAgICAiLWZGSUxFLCAtLWZpbGU9RklMRSIKICAgICAgX3Nob3J0X29wdF9mbXQgOiBzdHIKICAgICAgICBmb3JtYXQgc3RyaW5nIGNvbnRyb2xsaW5nIGhvdyBzaG9ydCBvcHRpb25zIHdpdGggdmFsdWVzIGFyZQogICAgICAgIHByaW50ZWQgaW4gaGVscCB0ZXh0LiAgTXVzdCBiZSBlaXRoZXIgIiVzJXMiICgiLWZGSUxFIikgb3IKICAgICAgICAiJXMgJXMiICgiLWYgRklMRSIpLCBiZWNhdXNlIHRob3NlIGFyZSB0aGUgdHdvIHN5bnRheGVzIHRoYXQKICAgICAgICBPcHRpayBzdXBwb3J0cy4KICAgICAgX2xvbmdfb3B0X2ZtdCA6IHN0cgogICAgICAgIHNpbWlsYXIgYnV0IGZvciBsb25nIG9wdGlvbnM7IG11c3QgYmUgZWl0aGVyICIlcyAlcyIgKCItLWZpbGUgRklMRSIpCiAgICAgICAgb3IgIiVzPSVzIiAoIi0tZmlsZT1GSUxFIikuCiAgICAiIiIKCiAgICBOT19ERUZBVUxUX1ZBTFVFID0gIm5vbmUiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsCiAgICAgICAgICAgICAgICAgaW5kZW50X2luY3JlbWVudCwKICAgICAgICAgICAgICAgICBtYXhfaGVscF9wb3NpdGlvbiwKICAgICAgICAgICAgICAgICB3aWR0aCwKICAgICAgICAgICAgICAgICBzaG9ydF9maXJzdCk6CiAgICAgICAgc2VsZi5wYXJzZXIgPSBOb25lCiAgICAgICAgc2VsZi5pbmRlbnRfaW5jcmVtZW50ID0gaW5kZW50X2luY3JlbWVudAogICAgICAgIHNlbGYuaGVscF9wb3NpdGlvbiA9IHNlbGYubWF4X2hlbHBfcG9zaXRpb24gPSBtYXhfaGVscF9wb3NpdGlvbgogICAgICAgIGlmIHdpZHRoIGlzIE5vbmU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHdpZHRoID0gaW50KG9zLmVudmlyb25bJ0NPTFVNTlMnXSkKICAgICAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgVmFsdWVFcnJvcik6CiAgICAgICAgICAgICAgICB3aWR0aCA9IDgwCiAgICAgICAgICAgIHdpZHRoIC09IDIKICAgICAgICBzZWxmLndpZHRoID0gd2lkdGgKICAgICAgICBzZWxmLmN1cnJlbnRfaW5kZW50ID0gMAogICAgICAgIHNlbGYubGV2ZWwgPSAwCiAgICAgICAgc2VsZi5oZWxwX3dpZHRoID0gTm9uZSAgICAgICAgICAjIGNvbXB1dGVkIGxhdGVyCiAgICAgICAgc2VsZi5zaG9ydF9maXJzdCA9IHNob3J0X2ZpcnN0CiAgICAgICAgc2VsZi5kZWZhdWx0X3RhZyA9ICIlZGVmYXVsdCIKICAgICAgICBzZWxmLm9wdGlvbl9zdHJpbmdzID0ge30KICAgICAgICBzZWxmLl9zaG9ydF9vcHRfZm10ID0gIiVzICVzIgogICAgICAgIHNlbGYuX2xvbmdfb3B0X2ZtdCA9ICIlcz0lcyIKCiAgICBkZWYgc2V0X3BhcnNlcihzZWxmLCBwYXJzZXIpOgogICAgICAgIHNlbGYucGFyc2VyID0gcGFyc2VyCgogICAgZGVmIHNldF9zaG9ydF9vcHRfZGVsaW1pdGVyKHNlbGYsIGRlbGltKToKICAgICAgICBpZiBkZWxpbSBub3QgaW4gKCIiLCAiICIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgImludmFsaWQgbWV0YXZhciBkZWxpbWl0ZXIgZm9yIHNob3J0IG9wdGlvbnM6ICVyIiAlIGRlbGltKQogICAgICAgIHNlbGYuX3Nob3J0X29wdF9mbXQgPSAiJXMiICsgZGVsaW0gKyAiJXMiCgogICAgZGVmIHNldF9sb25nX29wdF9kZWxpbWl0ZXIoc2VsZiwgZGVsaW0pOgogICAgICAgIGlmIGRlbGltIG5vdCBpbiAoIj0iLCAiICIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgImludmFsaWQgbWV0YXZhciBkZWxpbWl0ZXIgZm9yIGxvbmcgb3B0aW9uczogJXIiICUgZGVsaW0pCiAgICAgICAgc2VsZi5fbG9uZ19vcHRfZm10ID0gIiVzIiArIGRlbGltICsgIiVzIgoKICAgIGRlZiBpbmRlbnQoc2VsZik6CiAgICAgICAgc2VsZi5jdXJyZW50X2luZGVudCArPSBzZWxmLmluZGVudF9pbmNyZW1lbnQKICAgICAgICBzZWxmLmxldmVsICs9IDEKCiAgICBkZWYgZGVkZW50KHNlbGYpOgogICAgICAgIHNlbGYuY3VycmVudF9pbmRlbnQgLT0gc2VsZi5pbmRlbnRfaW5jcmVtZW50CiAgICAgICAgYXNzZXJ0IHNlbGYuY3VycmVudF9pbmRlbnQgPj0gMCwgIkluZGVudCBkZWNyZWFzZWQgYmVsb3cgMC4iCiAgICAgICAgc2VsZi5sZXZlbCAtPSAxCgogICAgZGVmIGZvcm1hdF91c2FnZShzZWxmLCB1c2FnZSk6CiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigic3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudCIpCgogICAgZGVmIGZvcm1hdF9oZWFkaW5nKHNlbGYsIGhlYWRpbmcpOgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoInN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnQiKQoKICAgIGRlZiBfZm9ybWF0X3RleHQoc2VsZiwgdGV4dCk6CiAgICAgICAgIiIiCiAgICAgICAgRm9ybWF0IGEgcGFyYWdyYXBoIG9mIGZyZWUtZm9ybSB0ZXh0IGZvciBpbmNsdXNpb24gaW4gdGhlCiAgICAgICAgaGVscCBvdXRwdXQgYXQgdGhlIGN1cnJlbnQgaW5kZW50YXRpb24gbGV2ZWwuCiAgICAgICAgIiIiCiAgICAgICAgdGV4dF93aWR0aCA9IHNlbGYud2lkdGggLSBzZWxmLmN1cnJlbnRfaW5kZW50CiAgICAgICAgaW5kZW50ID0gIiAiKnNlbGYuY3VycmVudF9pbmRlbnQKICAgICAgICByZXR1cm4gdGV4dHdyYXAuZmlsbCh0ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRfd2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbF9pbmRlbnQ9aW5kZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNlcXVlbnRfaW5kZW50PWluZGVudCkKCiAgICBkZWYgZm9ybWF0X2Rlc2NyaXB0aW9uKHNlbGYsIGRlc2NyaXB0aW9uKToKICAgICAgICBpZiBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2Zvcm1hdF90ZXh0KGRlc2NyaXB0aW9uKSArICJcbiIKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIiIKCiAgICBkZWYgZm9ybWF0X2VwaWxvZyhzZWxmLCBlcGlsb2cpOgogICAgICAgIGlmIGVwaWxvZzoKICAgICAgICAgICAgcmV0dXJuICJcbiIgKyBzZWxmLl9mb3JtYXRfdGV4dChlcGlsb2cpICsgIlxuIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAiIgoKCiAgICBkZWYgZXhwYW5kX2RlZmF1bHQoc2VsZiwgb3B0aW9uKToKICAgICAgICBpZiBzZWxmLnBhcnNlciBpcyBOb25lIG9yIG5vdCBzZWxmLmRlZmF1bHRfdGFnOgogICAgICAgICAgICByZXR1cm4gb3B0aW9uLmhlbHAKCiAgICAgICAgZGVmYXVsdF92YWx1ZSA9IHNlbGYucGFyc2VyLmRlZmF1bHRzLmdldChvcHRpb24uZGVzdCkKICAgICAgICBpZiBkZWZhdWx0X3ZhbHVlIGlzIE5PX0RFRkFVTFQgb3IgZGVmYXVsdF92YWx1ZSBpcyBOb25lOgogICAgICAgICAgICBkZWZhdWx0X3ZhbHVlID0gc2VsZi5OT19ERUZBVUxUX1ZBTFVFCgogICAgICAgIHJldHVybiBvcHRpb24uaGVscC5yZXBsYWNlKHNlbGYuZGVmYXVsdF90YWcsIHN0cihkZWZhdWx0X3ZhbHVlKSkKCiAgICBkZWYgZm9ybWF0X29wdGlvbihzZWxmLCBvcHRpb24pOgogICAgICAgICMgVGhlIGhlbHAgZm9yIGVhY2ggb3B0aW9uIGNvbnNpc3RzIG9mIHR3byBwYXJ0czoKICAgICAgICAjICAgKiB0aGUgb3B0IHN0cmluZ3MgYW5kIG1ldGF2YXJzCiAgICAgICAgIyAgICAgZWcuICgiLXgiLCBvciAiLWZGSUxFTkFNRSwgLS1maWxlPUZJTEVOQU1FIikKICAgICAgICAjICAgKiB0aGUgdXNlci1zdXBwbGllZCBoZWxwIHN0cmluZwogICAgICAgICMgICAgIGVnLiAoInR1cm4gb24gZXhwZXJ0IG1vZGUiLCAicmVhZCBkYXRhIGZyb20gRklMRU5BTUUiKQogICAgICAgICMKICAgICAgICAjIElmIHBvc3NpYmxlLCB3ZSB3cml0ZSBib3RoIG9mIHRoZXNlIG9uIHRoZSBzYW1lIGxpbmU6CiAgICAgICAgIyAgIC14ICAgICAgdHVybiBvbiBleHBlcnQgbW9kZQogICAgICAgICMKICAgICAgICAjIEJ1dCBpZiB0aGUgb3B0IHN0cmluZyBsaXN0IGlzIHRvbyBsb25nLCB3ZSBwdXQgdGhlIGhlbHAKICAgICAgICAjIHN0cmluZyBvbiBhIHNlY29uZCBsaW5lLCBpbmRlbnRlZCB0byB0aGUgc2FtZSBjb2x1bW4gaXQgd291bGQKICAgICAgICAjIHN0YXJ0IGluIGlmIGl0IGZpdCBvbiB0aGUgZmlyc3QgbGluZS4KICAgICAgICAjICAgLWZGSUxFTkFNRSwgLS1maWxlPUZJTEVOQU1FCiAgICAgICAgIyAgICAgICAgICAgcmVhZCBkYXRhIGZyb20gRklMRU5BTUUKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIG9wdHMgPSBzZWxmLm9wdGlvbl9zdHJpbmdzW29wdGlvbl0KICAgICAgICBvcHRfd2lkdGggPSBzZWxmLmhlbHBfcG9zaXRpb24gLSBzZWxmLmN1cnJlbnRfaW5kZW50IC0gMgogICAgICAgIGlmIGxlbihvcHRzKSA+IG9wdF93aWR0aDoKICAgICAgICAgICAgb3B0cyA9ICIlKnMlc1xuIiAlIChzZWxmLmN1cnJlbnRfaW5kZW50LCAiIiwgb3B0cykKICAgICAgICAgICAgaW5kZW50X2ZpcnN0ID0gc2VsZi5oZWxwX3Bvc2l0aW9uCiAgICAgICAgZWxzZTogICAgICAgICAgICAgICAgICAgICAgICMgc3RhcnQgaGVscCBvbiBzYW1lIGxpbmUgYXMgb3B0cwogICAgICAgICAgICBvcHRzID0gIiUqcyUtKnMgICIgJSAoc2VsZi5jdXJyZW50X2luZGVudCwgIiIsIG9wdF93aWR0aCwgb3B0cykKICAgICAgICAgICAgaW5kZW50X2ZpcnN0ID0gMAogICAgICAgIHJlc3VsdC5hcHBlbmQob3B0cykKICAgICAgICBpZiBvcHRpb24uaGVscDoKICAgICAgICAgICAgaGVscF90ZXh0ID0gc2VsZi5leHBhbmRfZGVmYXVsdChvcHRpb24pCiAgICAgICAgICAgIGhlbHBfbGluZXMgPSB0ZXh0d3JhcC53cmFwKGhlbHBfdGV4dCwgc2VsZi5oZWxwX3dpZHRoKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKCIlKnMlc1xuIiAlIChpbmRlbnRfZmlyc3QsICIiLCBoZWxwX2xpbmVzWzBdKSkKICAgICAgICAgICAgcmVzdWx0LmV4dGVuZChbIiUqcyVzXG4iICUgKHNlbGYuaGVscF9wb3NpdGlvbiwgIiIsIGxpbmUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGhlbHBfbGluZXNbMTpdXSkKICAgICAgICBlbGlmIG9wdHNbLTFdICE9ICJcbiI6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoIlxuIikKICAgICAgICByZXR1cm4gIiIuam9pbihyZXN1bHQpCgogICAgZGVmIHN0b3JlX29wdGlvbl9zdHJpbmdzKHNlbGYsIHBhcnNlcik6CiAgICAgICAgc2VsZi5pbmRlbnQoKQogICAgICAgIG1heF9sZW4gPSAwCiAgICAgICAgZm9yIG9wdCBpbiBwYXJzZXIub3B0aW9uX2xpc3Q6CiAgICAgICAgICAgIHN0cmluZ3MgPSBzZWxmLmZvcm1hdF9vcHRpb25fc3RyaW5ncyhvcHQpCiAgICAgICAgICAgIHNlbGYub3B0aW9uX3N0cmluZ3Nbb3B0XSA9IHN0cmluZ3MKICAgICAgICAgICAgbWF4X2xlbiA9IG1heChtYXhfbGVuLCBsZW4oc3RyaW5ncykgKyBzZWxmLmN1cnJlbnRfaW5kZW50KQogICAgICAgIHNlbGYuaW5kZW50KCkKICAgICAgICBmb3IgZ3JvdXAgaW4gcGFyc2VyLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIGZvciBvcHQgaW4gZ3JvdXAub3B0aW9uX2xpc3Q6CiAgICAgICAgICAgICAgICBzdHJpbmdzID0gc2VsZi5mb3JtYXRfb3B0aW9uX3N0cmluZ3Mob3B0KQogICAgICAgICAgICAgICAgc2VsZi5vcHRpb25fc3RyaW5nc1tvcHRdID0gc3RyaW5ncwogICAgICAgICAgICAgICAgbWF4X2xlbiA9IG1heChtYXhfbGVuLCBsZW4oc3RyaW5ncykgKyBzZWxmLmN1cnJlbnRfaW5kZW50KQogICAgICAgIHNlbGYuZGVkZW50KCkKICAgICAgICBzZWxmLmRlZGVudCgpCiAgICAgICAgc2VsZi5oZWxwX3Bvc2l0aW9uID0gbWluKG1heF9sZW4gKyAyLCBzZWxmLm1heF9oZWxwX3Bvc2l0aW9uKQogICAgICAgIHNlbGYuaGVscF93aWR0aCA9IHNlbGYud2lkdGggLSBzZWxmLmhlbHBfcG9zaXRpb24KCiAgICBkZWYgZm9ybWF0X29wdGlvbl9zdHJpbmdzKHNlbGYsIG9wdGlvbik6CiAgICAgICAgIiIiUmV0dXJuIGEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2Ygb3B0aW9uIHN0cmluZ3MgJiBtZXRhdmFyaWFibGVzLiIiIgogICAgICAgIGlmIG9wdGlvbi50YWtlc192YWx1ZSgpOgogICAgICAgICAgICBtZXRhdmFyID0gb3B0aW9uLm1ldGF2YXIgb3Igb3B0aW9uLmRlc3QudXBwZXIoKQogICAgICAgICAgICBzaG9ydF9vcHRzID0gW3NlbGYuX3Nob3J0X29wdF9mbXQgJSAoc29wdCwgbWV0YXZhcikKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3Igc29wdCBpbiBvcHRpb24uX3Nob3J0X29wdHNdCiAgICAgICAgICAgIGxvbmdfb3B0cyA9IFtzZWxmLl9sb25nX29wdF9mbXQgJSAobG9wdCwgbWV0YXZhcikKICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBsb3B0IGluIG9wdGlvbi5fbG9uZ19vcHRzXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNob3J0X29wdHMgPSBvcHRpb24uX3Nob3J0X29wdHMKICAgICAgICAgICAgbG9uZ19vcHRzID0gb3B0aW9uLl9sb25nX29wdHMKCiAgICAgICAgaWYgc2VsZi5zaG9ydF9maXJzdDoKICAgICAgICAgICAgb3B0cyA9IHNob3J0X29wdHMgKyBsb25nX29wdHMKICAgICAgICBlbHNlOgogICAgICAgICAgICBvcHRzID0gbG9uZ19vcHRzICsgc2hvcnRfb3B0cwoKICAgICAgICByZXR1cm4gIiwgIi5qb2luKG9wdHMpCgpjbGFzcyBJbmRlbnRlZEhlbHBGb3JtYXR0ZXIgKEhlbHBGb3JtYXR0ZXIpOgogICAgIiIiRm9ybWF0IGhlbHAgd2l0aCBpbmRlbnRlZCBzZWN0aW9uIGJvZGllcy4KICAgICIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLAogICAgICAgICAgICAgICAgIGluZGVudF9pbmNyZW1lbnQ9MiwKICAgICAgICAgICAgICAgICBtYXhfaGVscF9wb3NpdGlvbj0yNCwKICAgICAgICAgICAgICAgICB3aWR0aD1Ob25lLAogICAgICAgICAgICAgICAgIHNob3J0X2ZpcnN0PTEpOgogICAgICAgIEhlbHBGb3JtYXR0ZXIuX19pbml0X18oCiAgICAgICAgICAgIHNlbGYsIGluZGVudF9pbmNyZW1lbnQsIG1heF9oZWxwX3Bvc2l0aW9uLCB3aWR0aCwgc2hvcnRfZmlyc3QpCgogICAgZGVmIGZvcm1hdF91c2FnZShzZWxmLCB1c2FnZSk6CiAgICAgICAgcmV0dXJuIF8oIlVzYWdlOiAlc1xuIikgJSB1c2FnZQoKICAgIGRlZiBmb3JtYXRfaGVhZGluZyhzZWxmLCBoZWFkaW5nKToKICAgICAgICByZXR1cm4gIiUqcyVzOlxuIiAlIChzZWxmLmN1cnJlbnRfaW5kZW50LCAiIiwgaGVhZGluZykKCgpjbGFzcyBUaXRsZWRIZWxwRm9ybWF0dGVyIChIZWxwRm9ybWF0dGVyKToKICAgICIiIkZvcm1hdCBoZWxwIHdpdGggdW5kZXJsaW5lZCBzZWN0aW9uIGhlYWRlcnMuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwKICAgICAgICAgICAgICAgICBpbmRlbnRfaW5jcmVtZW50PTAsCiAgICAgICAgICAgICAgICAgbWF4X2hlbHBfcG9zaXRpb249MjQsCiAgICAgICAgICAgICAgICAgd2lkdGg9Tm9uZSwKICAgICAgICAgICAgICAgICBzaG9ydF9maXJzdD0wKToKICAgICAgICBIZWxwRm9ybWF0dGVyLl9faW5pdF9fICgKICAgICAgICAgICAgc2VsZiwgaW5kZW50X2luY3JlbWVudCwgbWF4X2hlbHBfcG9zaXRpb24sIHdpZHRoLCBzaG9ydF9maXJzdCkKCiAgICBkZWYgZm9ybWF0X3VzYWdlKHNlbGYsIHVzYWdlKToKICAgICAgICByZXR1cm4gIiVzICAlc1xuIiAlIChzZWxmLmZvcm1hdF9oZWFkaW5nKF8oIlVzYWdlIikpLCB1c2FnZSkKCiAgICBkZWYgZm9ybWF0X2hlYWRpbmcoc2VsZiwgaGVhZGluZyk6CiAgICAgICAgcmV0dXJuICIlc1xuJXNcbiIgJSAoaGVhZGluZywgIj0tIltzZWxmLmxldmVsXSAqIGxlbihoZWFkaW5nKSkKCgpkZWYgX3BhcnNlX251bSh2YWwsIHR5cGUpOgogICAgaWYgdmFsWzoyXS5sb3dlcigpID09ICIweCI6ICAgICAgICAgIyBoZXhhZGVjaW1hbAogICAgICAgIHJhZGl4ID0gMTYKICAgIGVsaWYgdmFsWzoyXS5sb3dlcigpID09ICIwYiI6ICAgICAgICMgYmluYXJ5CiAgICAgICAgcmFkaXggPSAyCiAgICAgICAgdmFsID0gdmFsWzI6XSBvciAiMCIgICAgICAgICAgICAjIGhhdmUgdG8gcmVtb3ZlICIwYiIgcHJlZml4CiAgICBlbGlmIHZhbFs6MV0gPT0gIjAiOiAgICAgICAgICAgICAgICAjIG9jdGFsCiAgICAgICAgcmFkaXggPSA4CiAgICBlbHNlOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGRlY2ltYWwKICAgICAgICByYWRpeCA9IDEwCgogICAgcmV0dXJuIHR5cGUodmFsLCByYWRpeCkKCmRlZiBfcGFyc2VfaW50KHZhbCk6CiAgICByZXR1cm4gX3BhcnNlX251bSh2YWwsIGludCkKCl9idWlsdGluX2N2dCA9IHsgImludCIgOiAoX3BhcnNlX2ludCwgXygiaW50ZWdlciIpKSwKICAgICAgICAgICAgICAgICAibG9uZyIgOiAoX3BhcnNlX2ludCwgXygiaW50ZWdlciIpKSwKICAgICAgICAgICAgICAgICAiZmxvYXQiIDogKGZsb2F0LCBfKCJmbG9hdGluZy1wb2ludCIpKSwKICAgICAgICAgICAgICAgICAiY29tcGxleCIgOiAoY29tcGxleCwgXygiY29tcGxleCIpKSB9CgpkZWYgY2hlY2tfYnVpbHRpbihvcHRpb24sIG9wdCwgdmFsdWUpOgogICAgKGN2dCwgd2hhdCkgPSBfYnVpbHRpbl9jdnRbb3B0aW9uLnR5cGVdCiAgICB0cnk6CiAgICAgICAgcmV0dXJuIGN2dCh2YWx1ZSkKICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIHJhaXNlIE9wdGlvblZhbHVlRXJyb3IoCiAgICAgICAgICAgIF8oIm9wdGlvbiAlczogaW52YWxpZCAlcyB2YWx1ZTogJXIiKSAlIChvcHQsIHdoYXQsIHZhbHVlKSkKCmRlZiBjaGVja19jaG9pY2Uob3B0aW9uLCBvcHQsIHZhbHVlKToKICAgIGlmIHZhbHVlIGluIG9wdGlvbi5jaG9pY2VzOgogICAgICAgIHJldHVybiB2YWx1ZQogICAgZWxzZToKICAgICAgICBjaG9pY2VzID0gIiwgIi5qb2luKG1hcChyZXByLCBvcHRpb24uY2hvaWNlcykpCiAgICAgICAgcmFpc2UgT3B0aW9uVmFsdWVFcnJvcigKICAgICAgICAgICAgXygib3B0aW9uICVzOiBpbnZhbGlkIGNob2ljZTogJXIgKGNob29zZSBmcm9tICVzKSIpCiAgICAgICAgICAgICUgKG9wdCwgdmFsdWUsIGNob2ljZXMpKQoKIyBOb3Qgc3VwcGx5aW5nIGEgZGVmYXVsdCBpcyBkaWZmZXJlbnQgZnJvbSBhIGRlZmF1bHQgb2YgTm9uZSwKIyBzbyB3ZSBuZWVkIGFuIGV4cGxpY2l0ICJub3Qgc3VwcGxpZWQiIHZhbHVlLgpOT19ERUZBVUxUID0gKCJOTyIsICJERUZBVUxUIikKCgpjbGFzcyBPcHRpb246CiAgICAiIiIKICAgIEluc3RhbmNlIGF0dHJpYnV0ZXM6CiAgICAgIF9zaG9ydF9vcHRzIDogW3N0cmluZ10KICAgICAgX2xvbmdfb3B0cyA6IFtzdHJpbmddCgogICAgICBhY3Rpb24gOiBzdHJpbmcKICAgICAgdHlwZSA6IHN0cmluZwogICAgICBkZXN0IDogc3RyaW5nCiAgICAgIGRlZmF1bHQgOiBhbnkKICAgICAgbmFyZ3MgOiBpbnQKICAgICAgY29uc3QgOiBhbnkKICAgICAgY2hvaWNlcyA6IFtzdHJpbmddCiAgICAgIGNhbGxiYWNrIDogZnVuY3Rpb24KICAgICAgY2FsbGJhY2tfYXJncyA6IChhbnkqKQogICAgICBjYWxsYmFja19rd2FyZ3MgOiB7IHN0cmluZyA6IGFueSB9CiAgICAgIGhlbHAgOiBzdHJpbmcKICAgICAgbWV0YXZhciA6IHN0cmluZwogICAgIiIiCgogICAgIyBUaGUgbGlzdCBvZiBpbnN0YW5jZSBhdHRyaWJ1dGVzIHRoYXQgbWF5IGJlIHNldCB0aHJvdWdoCiAgICAjIGtleXdvcmQgYXJncyB0byB0aGUgY29uc3RydWN0b3IuCiAgICBBVFRSUyA9IFsnYWN0aW9uJywKICAgICAgICAgICAgICd0eXBlJywKICAgICAgICAgICAgICdkZXN0JywKICAgICAgICAgICAgICdkZWZhdWx0JywKICAgICAgICAgICAgICduYXJncycsCiAgICAgICAgICAgICAnY29uc3QnLAogICAgICAgICAgICAgJ2Nob2ljZXMnLAogICAgICAgICAgICAgJ2NhbGxiYWNrJywKICAgICAgICAgICAgICdjYWxsYmFja19hcmdzJywKICAgICAgICAgICAgICdjYWxsYmFja19rd2FyZ3MnLAogICAgICAgICAgICAgJ2hlbHAnLAogICAgICAgICAgICAgJ21ldGF2YXInXQoKICAgICMgVGhlIHNldCBvZiBhY3Rpb25zIGFsbG93ZWQgYnkgb3B0aW9uIHBhcnNlcnMuICBFeHBsaWNpdGx5IGxpc3RlZAogICAgIyBoZXJlIHNvIHRoZSBjb25zdHJ1Y3RvciBjYW4gdmFsaWRhdGUgaXRzIGFyZ3VtZW50cy4KICAgIEFDVElPTlMgPSAoInN0b3JlIiwKICAgICAgICAgICAgICAgInN0b3JlX2NvbnN0IiwKICAgICAgICAgICAgICAgInN0b3JlX3RydWUiLAogICAgICAgICAgICAgICAic3RvcmVfZmFsc2UiLAogICAgICAgICAgICAgICAiYXBwZW5kIiwKICAgICAgICAgICAgICAgImFwcGVuZF9jb25zdCIsCiAgICAgICAgICAgICAgICJjb3VudCIsCiAgICAgICAgICAgICAgICJjYWxsYmFjayIsCiAgICAgICAgICAgICAgICJoZWxwIiwKICAgICAgICAgICAgICAgInZlcnNpb24iKQoKICAgICMgVGhlIHNldCBvZiBhY3Rpb25zIHRoYXQgaW52b2x2ZSBzdG9yaW5nIGEgdmFsdWUgc29tZXdoZXJlOwogICAgIyBhbHNvIGxpc3RlZCBqdXN0IGZvciBjb25zdHJ1Y3RvciBhcmd1bWVudCB2YWxpZGF0aW9uLiAgKElmCiAgICAjIHRoZSBhY3Rpb24gaXMgb25lIG9mIHRoZXNlLCB0aGVyZSBtdXN0IGJlIGEgZGVzdGluYXRpb24uKQogICAgU1RPUkVfQUNUSU9OUyA9ICgic3RvcmUiLAogICAgICAgICAgICAgICAgICAgICAic3RvcmVfY29uc3QiLAogICAgICAgICAgICAgICAgICAgICAic3RvcmVfdHJ1ZSIsCiAgICAgICAgICAgICAgICAgICAgICJzdG9yZV9mYWxzZSIsCiAgICAgICAgICAgICAgICAgICAgICJhcHBlbmQiLAogICAgICAgICAgICAgICAgICAgICAiYXBwZW5kX2NvbnN0IiwKICAgICAgICAgICAgICAgICAgICAgImNvdW50IikKCiAgICAjIFRoZSBzZXQgb2YgYWN0aW9ucyBmb3Igd2hpY2ggaXQgbWFrZXMgc2Vuc2UgdG8gc3VwcGx5IGEgdmFsdWUKICAgICMgdHlwZSwgaWUuIHdoaWNoIG1heSBjb25zdW1lIGFuIGFyZ3VtZW50IGZyb20gdGhlIGNvbW1hbmQgbGluZS4KICAgIFRZUEVEX0FDVElPTlMgPSAoInN0b3JlIiwKICAgICAgICAgICAgICAgICAgICAgImFwcGVuZCIsCiAgICAgICAgICAgICAgICAgICAgICJjYWxsYmFjayIpCgogICAgIyBUaGUgc2V0IG9mIGFjdGlvbnMgd2hpY2ggKnJlcXVpcmUqIGEgdmFsdWUgdHlwZSwgaWUuIHRoYXQKICAgICMgYWx3YXlzIGNvbnN1bWUgYW4gYXJndW1lbnQgZnJvbSB0aGUgY29tbWFuZCBsaW5lLgogICAgQUxXQVlTX1RZUEVEX0FDVElPTlMgPSAoInN0b3JlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcHBlbmQiKQoKICAgICMgVGhlIHNldCBvZiBhY3Rpb25zIHdoaWNoIHRha2UgYSAnY29uc3QnIGF0dHJpYnV0ZS4KICAgIENPTlNUX0FDVElPTlMgPSAoInN0b3JlX2NvbnN0IiwKICAgICAgICAgICAgICAgICAgICAgImFwcGVuZF9jb25zdCIpCgogICAgIyBUaGUgc2V0IG9mIGtub3duIHR5cGVzIGZvciBvcHRpb24gcGFyc2Vycy4gIEFnYWluLCBsaXN0ZWQgaGVyZSBmb3IKICAgICMgY29uc3RydWN0b3IgYXJndW1lbnQgdmFsaWRhdGlvbi4KICAgIFRZUEVTID0gKCJzdHJpbmciLCAiaW50IiwgImxvbmciLCAiZmxvYXQiLCAiY29tcGxleCIsICJjaG9pY2UiKQoKICAgICMgRGljdGlvbmFyeSBvZiBhcmd1bWVudCBjaGVja2luZyBmdW5jdGlvbnMsIHdoaWNoIGNvbnZlcnQgYW5kCiAgICAjIHZhbGlkYXRlIG9wdGlvbiBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZSBvcHRpb24gdHlwZS4KICAgICMKICAgICMgU2lnbmF0dXJlIG9mIGNoZWNraW5nIGZ1bmN0aW9ucyBpczoKICAgICMgICBjaGVjayhvcHRpb24gOiBPcHRpb24sIG9wdCA6IHN0cmluZywgdmFsdWUgOiBzdHJpbmcpIC0+IGFueQogICAgIyB3aGVyZQogICAgIyAgIG9wdGlvbiBpcyB0aGUgT3B0aW9uIGluc3RhbmNlIGNhbGxpbmcgdGhlIGNoZWNrZXIKICAgICMgICBvcHQgaXMgdGhlIGFjdHVhbCBvcHRpb24gc2VlbiBvbiB0aGUgY29tbWFuZC1saW5lCiAgICAjICAgICAoZWcuICItYSIsICItLWZpbGUiKQogICAgIyAgIHZhbHVlIGlzIHRoZSBvcHRpb24gYXJndW1lbnQgc2VlbiBvbiB0aGUgY29tbWFuZC1saW5lCiAgICAjCiAgICAjIFRoZSByZXR1cm4gdmFsdWUgc2hvdWxkIGJlIGluIHRoZSBhcHByb3ByaWF0ZSBQeXRob24gdHlwZQogICAgIyBmb3Igb3B0aW9uLnR5cGUgLS0gZWcuIGFuIGludGVnZXIgaWYgb3B0aW9uLnR5cGUgPT0gImludCIuCiAgICAjCiAgICAjIElmIG5vIGNoZWNrZXIgaXMgZGVmaW5lZCBmb3IgYSB0eXBlLCBhcmd1bWVudHMgd2lsbCBiZQogICAgIyB1bmNoZWNrZWQgYW5kIHJlbWFpbiBzdHJpbmdzLgogICAgVFlQRV9DSEVDS0VSID0geyAiaW50IiAgICA6IGNoZWNrX2J1aWx0aW4sCiAgICAgICAgICAgICAgICAgICAgICJsb25nIiAgIDogY2hlY2tfYnVpbHRpbiwKICAgICAgICAgICAgICAgICAgICAgImZsb2F0IiAgOiBjaGVja19idWlsdGluLAogICAgICAgICAgICAgICAgICAgICAiY29tcGxleCI6IGNoZWNrX2J1aWx0aW4sCiAgICAgICAgICAgICAgICAgICAgICJjaG9pY2UiIDogY2hlY2tfY2hvaWNlLAogICAgICAgICAgICAgICAgICAgfQoKCiAgICAjIENIRUNLX01FVEhPRFMgaXMgYSBsaXN0IG9mIHVuYm91bmQgbWV0aG9kIG9iamVjdHM7IHRoZXkgYXJlIGNhbGxlZAogICAgIyBieSB0aGUgY29uc3RydWN0b3IsIGluIG9yZGVyLCBhZnRlciBhbGwgYXR0cmlidXRlcyBhcmUKICAgICMgaW5pdGlhbGl6ZWQuICBUaGUgbGlzdCBpcyBjcmVhdGVkIGFuZCBmaWxsZWQgaW4gbGF0ZXIsIGFmdGVyIGFsbAogICAgIyB0aGUgbWV0aG9kcyBhcmUgYWN0dWFsbHkgZGVmaW5lZC4gIChJIGp1c3QgcHV0IGl0IGhlcmUgYmVjYXVzZSBJCiAgICAjIGxpa2UgdG8gZGVmaW5lIGFuZCBkb2N1bWVudCBhbGwgY2xhc3MgYXR0cmlidXRlcyBpbiB0aGUgc2FtZQogICAgIyBwbGFjZS4pICBTdWJjbGFzc2VzIHRoYXQgYWRkIGFub3RoZXIgX2NoZWNrXyooKSBtZXRob2Qgc2hvdWxkCiAgICAjIGRlZmluZSB0aGVpciBvd24gQ0hFQ0tfTUVUSE9EUyBsaXN0IHRoYXQgYWRkcyB0aGVpciBjaGVjayBtZXRob2QKICAgICMgdG8gdGhvc2UgZnJvbSB0aGlzIGNsYXNzLgogICAgQ0hFQ0tfTUVUSE9EUyA9IE5vbmUKCgogICAgIyAtLSBDb25zdHJ1Y3Rvci9pbml0aWFsaXphdGlvbiBtZXRob2RzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX19pbml0X18oc2VsZiwgKm9wdHMsICoqYXR0cnMpOgogICAgICAgICMgU2V0IF9zaG9ydF9vcHRzLCBfbG9uZ19vcHRzIGF0dHJzIGZyb20gJ29wdHMnIHR1cGxlLgogICAgICAgICMgSGF2ZSB0byBiZSBzZXQgbm93LCBpbiBjYXNlIG5vIG9wdGlvbiBzdHJpbmdzIGFyZSBzdXBwbGllZC4KICAgICAgICBzZWxmLl9zaG9ydF9vcHRzID0gW10KICAgICAgICBzZWxmLl9sb25nX29wdHMgPSBbXQogICAgICAgIG9wdHMgPSBzZWxmLl9jaGVja19vcHRfc3RyaW5ncyhvcHRzKQogICAgICAgIHNlbGYuX3NldF9vcHRfc3RyaW5ncyhvcHRzKQoKICAgICAgICAjIFNldCBhbGwgb3RoZXIgYXR0cnMgKGFjdGlvbiwgdHlwZSwgZXRjLikgZnJvbSAnYXR0cnMnIGRpY3QKICAgICAgICBzZWxmLl9zZXRfYXR0cnMoYXR0cnMpCgogICAgICAgICMgQ2hlY2sgYWxsIHRoZSBhdHRyaWJ1dGVzIHdlIGp1c3Qgc2V0LiAgVGhlcmUgYXJlIGxvdHMgb2YKICAgICAgICAjIGNvbXBsaWNhdGVkIGludGVyZGVwZW5kZW5jaWVzLCBidXQgbHVja2lseSB0aGV5IGNhbiBiZSBmYXJtZWQKICAgICAgICAjIG91dCB0byB0aGUgX2NoZWNrXyooKSBtZXRob2RzIGxpc3RlZCBpbiBDSEVDS19NRVRIT0RTIC0tIHdoaWNoCiAgICAgICAgIyBjb3VsZCBiZSBoYW5keSBmb3Igc3ViY2xhc3NlcyEgIFRoZSBvbmUgdGhpbmcgdGhlc2UgYWxsIHNoYXJlCiAgICAgICAgIyBpcyB0aGF0IHRoZXkgcmFpc2UgT3B0aW9uRXJyb3IgaWYgdGhleSBkaXNjb3ZlciBhIHByb2JsZW0uCiAgICAgICAgZm9yIGNoZWNrZXIgaW4gc2VsZi5DSEVDS19NRVRIT0RTOgogICAgICAgICAgICBjaGVja2VyKHNlbGYpCgogICAgZGVmIF9jaGVja19vcHRfc3RyaW5ncyhzZWxmLCBvcHRzKToKICAgICAgICAjIEZpbHRlciBvdXQgTm9uZSBiZWNhdXNlIGVhcmx5IHZlcnNpb25zIG9mIE9wdGlrIGhhZCBleGFjdGx5CiAgICAgICAgIyBvbmUgc2hvcnQgb3B0aW9uIGFuZCBvbmUgbG9uZyBvcHRpb24sIGVpdGhlciBvZiB3aGljaAogICAgICAgICMgY291bGQgYmUgTm9uZS4KICAgICAgICBvcHRzID0gW29wdCBmb3Igb3B0IGluIG9wdHMgaWYgb3B0XQogICAgICAgIGlmIG5vdCBvcHRzOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImF0IGxlYXN0IG9uZSBvcHRpb24gc3RyaW5nIG11c3QgYmUgc3VwcGxpZWQiKQogICAgICAgIHJldHVybiBvcHRzCgogICAgZGVmIF9zZXRfb3B0X3N0cmluZ3Moc2VsZiwgb3B0cyk6CiAgICAgICAgZm9yIG9wdCBpbiBvcHRzOgogICAgICAgICAgICBpZiBsZW4ob3B0KSA8IDI6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAiaW52YWxpZCBvcHRpb24gc3RyaW5nICVyOiAiCiAgICAgICAgICAgICAgICAgICAgIm11c3QgYmUgYXQgbGVhc3QgdHdvIGNoYXJhY3RlcnMgbG9uZyIgJSBvcHQsIHNlbGYpCiAgICAgICAgICAgIGVsaWYgbGVuKG9wdCkgPT0gMjoKICAgICAgICAgICAgICAgIGlmIG5vdCAob3B0WzBdID09ICItIiBhbmQgb3B0WzFdICE9ICItIik6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICJpbnZhbGlkIHNob3J0IG9wdGlvbiBzdHJpbmcgJXI6ICIKICAgICAgICAgICAgICAgICAgICAgICAgIm11c3QgYmUgb2YgdGhlIGZvcm0gLXgsICh4IGFueSBub24tZGFzaCBjaGFyKSIgJSBvcHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYpCiAgICAgICAgICAgICAgICBzZWxmLl9zaG9ydF9vcHRzLmFwcGVuZChvcHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBub3QgKG9wdFswOjJdID09ICItLSIgYW5kIG9wdFsyXSAhPSAiLSIpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAiaW52YWxpZCBsb25nIG9wdGlvbiBzdHJpbmcgJXI6ICIKICAgICAgICAgICAgICAgICAgICAgICAgIm11c3Qgc3RhcnQgd2l0aCAtLSwgZm9sbG93ZWQgYnkgbm9uLWRhc2giICUgb3B0LAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmKQogICAgICAgICAgICAgICAgc2VsZi5fbG9uZ19vcHRzLmFwcGVuZChvcHQpCgogICAgZGVmIF9zZXRfYXR0cnMoc2VsZiwgYXR0cnMpOgogICAgICAgIGZvciBhdHRyIGluIHNlbGYuQVRUUlM6CiAgICAgICAgICAgIGlmIGF0dHIgaW4gYXR0cnM6CiAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIGF0dHJzW2F0dHJdKQogICAgICAgICAgICAgICAgZGVsIGF0dHJzW2F0dHJdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBhdHRyID09ICdkZWZhdWx0JzoKICAgICAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIE5PX0RFRkFVTFQpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNldGF0dHIoc2VsZiwgYXR0ciwgTm9uZSkKICAgICAgICBpZiBhdHRyczoKICAgICAgICAgICAgYXR0cnMgPSBzb3J0ZWQoYXR0cnMua2V5cygpKQogICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICJpbnZhbGlkIGtleXdvcmQgYXJndW1lbnRzOiAlcyIgJSAiLCAiLmpvaW4oYXR0cnMpLAogICAgICAgICAgICAgICAgc2VsZikKCgogICAgIyAtLSBDb25zdHJ1Y3RvciB2YWxpZGF0aW9uIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX2NoZWNrX2FjdGlvbihzZWxmKToKICAgICAgICBpZiBzZWxmLmFjdGlvbiBpcyBOb25lOgogICAgICAgICAgICBzZWxmLmFjdGlvbiA9ICJzdG9yZSIKICAgICAgICBlbGlmIHNlbGYuYWN0aW9uIG5vdCBpbiBzZWxmLkFDVElPTlM6CiAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKCJpbnZhbGlkIGFjdGlvbjogJXIiICUgc2VsZi5hY3Rpb24sIHNlbGYpCgogICAgZGVmIF9jaGVja190eXBlKHNlbGYpOgogICAgICAgIGlmIHNlbGYudHlwZSBpcyBOb25lOgogICAgICAgICAgICBpZiBzZWxmLmFjdGlvbiBpbiBzZWxmLkFMV0FZU19UWVBFRF9BQ1RJT05TOgogICAgICAgICAgICAgICAgaWYgc2VsZi5jaG9pY2VzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICMgVGhlICJjaG9pY2VzIiBhdHRyaWJ1dGUgaW1wbGllcyAiY2hvaWNlIiB0eXBlLgogICAgICAgICAgICAgICAgICAgIHNlbGYudHlwZSA9ICJjaG9pY2UiCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgTm8gdHlwZSBnaXZlbj8gICJzdHJpbmciIGlzIHRoZSBtb3N0IHNlbnNpYmxlIGRlZmF1bHQuCiAgICAgICAgICAgICAgICAgICAgc2VsZi50eXBlID0gInN0cmluZyIKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIEFsbG93IHR5cGUgb2JqZWN0cyBvciBidWlsdGluIHR5cGUgY29udmVyc2lvbiBmdW5jdGlvbnMKICAgICAgICAgICAgIyAoaW50LCBzdHIsIGV0Yy4pIGFzIGFuIGFsdGVybmF0aXZlIHRvIHRoZWlyIG5hbWVzLiAgKFRoZQogICAgICAgICAgICAjIGNvbXBsaWNhdGVkIGNoZWNrIG9mIGJ1aWx0aW5zIGlzIG9ubHkgbmVjZXNzYXJ5IGZvcgogICAgICAgICAgICAjIFB5dGhvbiAyLjEgYW5kIGVhcmxpZXIsIGFuZCBpcyBzaG9ydC1jaXJjdWl0ZWQgYnkgdGhlCiAgICAgICAgICAgICMgZmlyc3QgY2hlY2sgb24gbW9kZXJuIFB5dGhvbnMuKQogICAgICAgICAgICBpbXBvcnQgYnVpbHRpbnMKICAgICAgICAgICAgaWYgKCBpc2luc3RhbmNlKHNlbGYudHlwZSwgdHlwZSkgb3IKICAgICAgICAgICAgICAgICAoaGFzYXR0cihzZWxmLnR5cGUsICJfX25hbWVfXyIpIGFuZAogICAgICAgICAgICAgICAgICBnZXRhdHRyKGJ1aWx0aW5zLCBzZWxmLnR5cGUuX19uYW1lX18sIE5vbmUpIGlzIHNlbGYudHlwZSkgKToKICAgICAgICAgICAgICAgIHNlbGYudHlwZSA9IHNlbGYudHlwZS5fX25hbWVfXwoKICAgICAgICAgICAgaWYgc2VsZi50eXBlID09ICJzdHIiOgogICAgICAgICAgICAgICAgc2VsZi50eXBlID0gInN0cmluZyIKCiAgICAgICAgICAgIGlmIHNlbGYudHlwZSBub3QgaW4gc2VsZi5UWVBFUzoKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKCJpbnZhbGlkIG9wdGlvbiB0eXBlOiAlciIgJSBzZWxmLnR5cGUsIHNlbGYpCiAgICAgICAgICAgIGlmIHNlbGYuYWN0aW9uIG5vdCBpbiBzZWxmLlRZUEVEX0FDVElPTlM6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAibXVzdCBub3Qgc3VwcGx5IGEgdHlwZSBmb3IgYWN0aW9uICVyIiAlIHNlbGYuYWN0aW9uLCBzZWxmKQoKICAgIGRlZiBfY2hlY2tfY2hvaWNlKHNlbGYpOgogICAgICAgIGlmIHNlbGYudHlwZSA9PSAiY2hvaWNlIjoKICAgICAgICAgICAgaWYgc2VsZi5jaG9pY2VzIGlzIE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAibXVzdCBzdXBwbHkgYSBsaXN0IG9mIGNob2ljZXMgZm9yIHR5cGUgJ2Nob2ljZSciLCBzZWxmKQogICAgICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKHNlbGYuY2hvaWNlcywgKHR1cGxlLCBsaXN0KSk6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAiY2hvaWNlcyBtdXN0IGJlIGEgbGlzdCBvZiBzdHJpbmdzICgnJXMnIHN1cHBsaWVkKSIKICAgICAgICAgICAgICAgICAgICAlIHN0cih0eXBlKHNlbGYuY2hvaWNlcykpLnNwbGl0KCInIilbMV0sIHNlbGYpCiAgICAgICAgZWxpZiBzZWxmLmNob2ljZXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgIm11c3Qgbm90IHN1cHBseSBjaG9pY2VzIGZvciB0eXBlICVyIiAlIHNlbGYudHlwZSwgc2VsZikKCiAgICBkZWYgX2NoZWNrX2Rlc3Qoc2VsZik6CiAgICAgICAgIyBObyBkZXN0aW5hdGlvbiBnaXZlbiwgYW5kIHdlIG5lZWQgb25lIGZvciB0aGlzIGFjdGlvbi4gIFRoZQogICAgICAgICMgc2VsZi50eXBlIGNoZWNrIGlzIGZvciBjYWxsYmFja3MgdGhhdCB0YWtlIGEgdmFsdWUuCiAgICAgICAgdGFrZXNfdmFsdWUgPSAoc2VsZi5hY3Rpb24gaW4gc2VsZi5TVE9SRV9BQ1RJT05TIG9yCiAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50eXBlIGlzIG5vdCBOb25lKQogICAgICAgIGlmIHNlbGYuZGVzdCBpcyBOb25lIGFuZCB0YWtlc192YWx1ZToKCiAgICAgICAgICAgICMgR2xlYW4gYSBkZXN0aW5hdGlvbiBmcm9tIHRoZSBmaXJzdCBsb25nIG9wdGlvbiBzdHJpbmcsCiAgICAgICAgICAgICMgb3IgZnJvbSB0aGUgZmlyc3Qgc2hvcnQgb3B0aW9uIHN0cmluZyBpZiBubyBsb25nIG9wdGlvbnMuCiAgICAgICAgICAgIGlmIHNlbGYuX2xvbmdfb3B0czoKICAgICAgICAgICAgICAgICMgZWcuICItLWZvby1iYXIiIC0+ICJmb29fYmFyIgogICAgICAgICAgICAgICAgc2VsZi5kZXN0ID0gc2VsZi5fbG9uZ19vcHRzWzBdWzI6XS5yZXBsYWNlKCctJywgJ18nKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5kZXN0ID0gc2VsZi5fc2hvcnRfb3B0c1swXVsxXQoKICAgIGRlZiBfY2hlY2tfY29uc3Qoc2VsZik6CiAgICAgICAgaWYgc2VsZi5hY3Rpb24gbm90IGluIHNlbGYuQ09OU1RfQUNUSU9OUyBhbmQgc2VsZi5jb25zdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAiJ2NvbnN0JyBtdXN0IG5vdCBiZSBzdXBwbGllZCBmb3IgYWN0aW9uICVyIiAlIHNlbGYuYWN0aW9uLAogICAgICAgICAgICAgICAgc2VsZikKCiAgICBkZWYgX2NoZWNrX25hcmdzKHNlbGYpOgogICAgICAgIGlmIHNlbGYuYWN0aW9uIGluIHNlbGYuVFlQRURfQUNUSU9OUzoKICAgICAgICAgICAgaWYgc2VsZi5uYXJncyBpcyBOb25lOgogICAgICAgICAgICAgICAgc2VsZi5uYXJncyA9IDEKICAgICAgICBlbGlmIHNlbGYubmFyZ3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgIiduYXJncycgbXVzdCBub3QgYmUgc3VwcGxpZWQgZm9yIGFjdGlvbiAlciIgJSBzZWxmLmFjdGlvbiwKICAgICAgICAgICAgICAgIHNlbGYpCgogICAgZGVmIF9jaGVja19jYWxsYmFjayhzZWxmKToKICAgICAgICBpZiBzZWxmLmFjdGlvbiA9PSAiY2FsbGJhY2siOgogICAgICAgICAgICBpZiBub3QgY2FsbGFibGUoc2VsZi5jYWxsYmFjayk6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAiY2FsbGJhY2sgbm90IGNhbGxhYmxlOiAlciIgJSBzZWxmLmNhbGxiYWNrLCBzZWxmKQogICAgICAgICAgICBpZiAoc2VsZi5jYWxsYmFja19hcmdzIGlzIG5vdCBOb25lIGFuZAogICAgICAgICAgICAgICAgbm90IGlzaW5zdGFuY2Uoc2VsZi5jYWxsYmFja19hcmdzLCB0dXBsZSkpOgogICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgImNhbGxiYWNrX2FyZ3MsIGlmIHN1cHBsaWVkLCBtdXN0IGJlIGEgdHVwbGU6IG5vdCAlciIKICAgICAgICAgICAgICAgICAgICAlIHNlbGYuY2FsbGJhY2tfYXJncywgc2VsZikKICAgICAgICAgICAgaWYgKHNlbGYuY2FsbGJhY2tfa3dhcmdzIGlzIG5vdCBOb25lIGFuZAogICAgICAgICAgICAgICAgbm90IGlzaW5zdGFuY2Uoc2VsZi5jYWxsYmFja19rd2FyZ3MsIGRpY3QpKToKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICJjYWxsYmFja19rd2FyZ3MsIGlmIHN1cHBsaWVkLCBtdXN0IGJlIGEgZGljdDogbm90ICVyIgogICAgICAgICAgICAgICAgICAgICUgc2VsZi5jYWxsYmFja19rd2FyZ3MsIHNlbGYpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgc2VsZi5jYWxsYmFjayBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICJjYWxsYmFjayBzdXBwbGllZCAoJXIpIGZvciBub24tY2FsbGJhY2sgb3B0aW9uIgogICAgICAgICAgICAgICAgICAgICUgc2VsZi5jYWxsYmFjaywgc2VsZikKICAgICAgICAgICAgaWYgc2VsZi5jYWxsYmFja19hcmdzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgImNhbGxiYWNrX2FyZ3Mgc3VwcGxpZWQgZm9yIG5vbi1jYWxsYmFjayBvcHRpb24iLCBzZWxmKQogICAgICAgICAgICBpZiBzZWxmLmNhbGxiYWNrX2t3YXJncyBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICJjYWxsYmFja19rd2FyZ3Mgc3VwcGxpZWQgZm9yIG5vbi1jYWxsYmFjayBvcHRpb24iLCBzZWxmKQoKCiAgICBDSEVDS19NRVRIT0RTID0gW19jaGVja19hY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgIF9jaGVja190eXBlLAogICAgICAgICAgICAgICAgICAgICBfY2hlY2tfY2hvaWNlLAogICAgICAgICAgICAgICAgICAgICBfY2hlY2tfZGVzdCwKICAgICAgICAgICAgICAgICAgICAgX2NoZWNrX2NvbnN0LAogICAgICAgICAgICAgICAgICAgICBfY2hlY2tfbmFyZ3MsCiAgICAgICAgICAgICAgICAgICAgIF9jaGVja19jYWxsYmFja10KCgogICAgIyAtLSBNaXNjZWxsYW5lb3VzIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIi8iLmpvaW4oc2VsZi5fc2hvcnRfb3B0cyArIHNlbGYuX2xvbmdfb3B0cykKCiAgICBfX3JlcHJfXyA9IF9yZXByCgogICAgZGVmIHRha2VzX3ZhbHVlKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnR5cGUgaXMgbm90IE5vbmUKCiAgICBkZWYgZ2V0X29wdF9zdHJpbmcoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fbG9uZ19vcHRzOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fbG9uZ19vcHRzWzBdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Nob3J0X29wdHNbMF0KCgogICAgIyAtLSBQcm9jZXNzaW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgY2hlY2tfdmFsdWUoc2VsZiwgb3B0LCB2YWx1ZSk6CiAgICAgICAgY2hlY2tlciA9IHNlbGYuVFlQRV9DSEVDS0VSLmdldChzZWxmLnR5cGUpCiAgICAgICAgaWYgY2hlY2tlciBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gdmFsdWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gY2hlY2tlcihzZWxmLCBvcHQsIHZhbHVlKQoKICAgIGRlZiBjb252ZXJ0X3ZhbHVlKHNlbGYsIG9wdCwgdmFsdWUpOgogICAgICAgIGlmIHZhbHVlIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBzZWxmLm5hcmdzID09IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5jaGVja192YWx1ZShvcHQsIHZhbHVlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIHR1cGxlKFtzZWxmLmNoZWNrX3ZhbHVlKG9wdCwgdikgZm9yIHYgaW4gdmFsdWVdKQoKICAgIGRlZiBwcm9jZXNzKHNlbGYsIG9wdCwgdmFsdWUsIHZhbHVlcywgcGFyc2VyKToKCiAgICAgICAgIyBGaXJzdCwgY29udmVydCB0aGUgdmFsdWUocykgdG8gdGhlIHJpZ2h0IHR5cGUuICBIb3dsIGlmIGFueQogICAgICAgICMgdmFsdWUocykgYXJlIGJvZ3VzLgogICAgICAgIHZhbHVlID0gc2VsZi5jb252ZXJ0X3ZhbHVlKG9wdCwgdmFsdWUpCgogICAgICAgICMgQW5kIHRoZW4gdGFrZSB3aGF0ZXZlciBhY3Rpb24gaXMgZXhwZWN0ZWQgb2YgdXMuCiAgICAgICAgIyBUaGlzIGlzIGEgc2VwYXJhdGUgbWV0aG9kIHRvIG1ha2UgbGlmZSBlYXNpZXIgZm9yCiAgICAgICAgIyBzdWJjbGFzc2VzIHRvIGFkZCBuZXcgYWN0aW9ucy4KICAgICAgICByZXR1cm4gc2VsZi50YWtlX2FjdGlvbigKICAgICAgICAgICAgc2VsZi5hY3Rpb24sIHNlbGYuZGVzdCwgb3B0LCB2YWx1ZSwgdmFsdWVzLCBwYXJzZXIpCgogICAgZGVmIHRha2VfYWN0aW9uKHNlbGYsIGFjdGlvbiwgZGVzdCwgb3B0LCB2YWx1ZSwgdmFsdWVzLCBwYXJzZXIpOgogICAgICAgIGlmIGFjdGlvbiA9PSAic3RvcmUiOgogICAgICAgICAgICBzZXRhdHRyKHZhbHVlcywgZGVzdCwgdmFsdWUpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gInN0b3JlX2NvbnN0IjoKICAgICAgICAgICAgc2V0YXR0cih2YWx1ZXMsIGRlc3QsIHNlbGYuY29uc3QpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gInN0b3JlX3RydWUiOgogICAgICAgICAgICBzZXRhdHRyKHZhbHVlcywgZGVzdCwgVHJ1ZSkKICAgICAgICBlbGlmIGFjdGlvbiA9PSAic3RvcmVfZmFsc2UiOgogICAgICAgICAgICBzZXRhdHRyKHZhbHVlcywgZGVzdCwgRmFsc2UpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gImFwcGVuZCI6CiAgICAgICAgICAgIHZhbHVlcy5lbnN1cmVfdmFsdWUoZGVzdCwgW10pLmFwcGVuZCh2YWx1ZSkKICAgICAgICBlbGlmIGFjdGlvbiA9PSAiYXBwZW5kX2NvbnN0IjoKICAgICAgICAgICAgdmFsdWVzLmVuc3VyZV92YWx1ZShkZXN0LCBbXSkuYXBwZW5kKHNlbGYuY29uc3QpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gImNvdW50IjoKICAgICAgICAgICAgc2V0YXR0cih2YWx1ZXMsIGRlc3QsIHZhbHVlcy5lbnN1cmVfdmFsdWUoZGVzdCwgMCkgKyAxKQogICAgICAgIGVsaWYgYWN0aW9uID09ICJjYWxsYmFjayI6CiAgICAgICAgICAgIGFyZ3MgPSBzZWxmLmNhbGxiYWNrX2FyZ3Mgb3IgKCkKICAgICAgICAgICAga3dhcmdzID0gc2VsZi5jYWxsYmFja19rd2FyZ3Mgb3Ige30KICAgICAgICAgICAgc2VsZi5jYWxsYmFjayhzZWxmLCBvcHQsIHZhbHVlLCBwYXJzZXIsICphcmdzLCAqKmt3YXJncykKICAgICAgICBlbGlmIGFjdGlvbiA9PSAiaGVscCI6CiAgICAgICAgICAgIHBhcnNlci5wcmludF9oZWxwKCkKICAgICAgICAgICAgcGFyc2VyLmV4aXQoKQogICAgICAgIGVsaWYgYWN0aW9uID09ICJ2ZXJzaW9uIjoKICAgICAgICAgICAgcGFyc2VyLnByaW50X3ZlcnNpb24oKQogICAgICAgICAgICBwYXJzZXIuZXhpdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidW5rbm93biBhY3Rpb24gJXIiICUgc2VsZi5hY3Rpb24pCgogICAgICAgIHJldHVybiAxCgojIGNsYXNzIE9wdGlvbgoKClNVUFBSRVNTX0hFTFAgPSAiU1VQUFJFU1MiKyJIRUxQIgpTVVBQUkVTU19VU0FHRSA9ICJTVVBQUkVTUyIrIlVTQUdFIgoKY2xhc3MgVmFsdWVzOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkZWZhdWx0cz1Ob25lKToKICAgICAgICBpZiBkZWZhdWx0czoKICAgICAgICAgICAgZm9yIChhdHRyLCB2YWwpIGluIGRlZmF1bHRzLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIHZhbCkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc3RyKHNlbGYuX19kaWN0X18pCgogICAgX19yZXByX18gPSBfcmVwcgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIFZhbHVlcyk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9fZGljdF9fID09IG90aGVyLl9fZGljdF9fCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKG90aGVyLCBkaWN0KToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19kaWN0X18gPT0gb3RoZXIKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX3VwZGF0ZV9jYXJlZnVsKHNlbGYsIGRpY3QpOgogICAgICAgICIiIgogICAgICAgIFVwZGF0ZSB0aGUgb3B0aW9uIHZhbHVlcyBmcm9tIGFuIGFyYml0cmFyeSBkaWN0aW9uYXJ5LCBidXQgb25seQogICAgICAgIHVzZSBrZXlzIGZyb20gZGljdCB0aGF0IGFscmVhZHkgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlCiAgICAgICAgaW4gc2VsZi4gIEFueSBrZXlzIGluIGRpY3Qgd2l0aG91dCBhIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlCiAgICAgICAgYXJlIHNpbGVudGx5IGlnbm9yZWQuCiAgICAgICAgIiIiCiAgICAgICAgZm9yIGF0dHIgaW4gZGlyKHNlbGYpOgogICAgICAgICAgICBpZiBhdHRyIGluIGRpY3Q6CiAgICAgICAgICAgICAgICBkdmFsID0gZGljdFthdHRyXQogICAgICAgICAgICAgICAgaWYgZHZhbCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIGR2YWwpCgogICAgZGVmIF91cGRhdGVfbG9vc2Uoc2VsZiwgZGljdCk6CiAgICAgICAgIiIiCiAgICAgICAgVXBkYXRlIHRoZSBvcHRpb24gdmFsdWVzIGZyb20gYW4gYXJiaXRyYXJ5IGRpY3Rpb25hcnksCiAgICAgICAgdXNpbmcgYWxsIGtleXMgZnJvbSB0aGUgZGljdGlvbmFyeSByZWdhcmRsZXNzIG9mIHdoZXRoZXIKICAgICAgICB0aGV5IGhhdmUgYSBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZSBpbiBzZWxmIG9yIG5vdC4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9fZGljdF9fLnVwZGF0ZShkaWN0KQoKICAgIGRlZiBfdXBkYXRlKHNlbGYsIGRpY3QsIG1vZGUpOgogICAgICAgIGlmIG1vZGUgPT0gImNhcmVmdWwiOgogICAgICAgICAgICBzZWxmLl91cGRhdGVfY2FyZWZ1bChkaWN0KQogICAgICAgIGVsaWYgbW9kZSA9PSAibG9vc2UiOgogICAgICAgICAgICBzZWxmLl91cGRhdGVfbG9vc2UoZGljdCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHVwZGF0ZSBtb2RlOiAlciIgJSBtb2RlKQoKICAgIGRlZiByZWFkX21vZHVsZShzZWxmLCBtb2RuYW1lLCBtb2RlPSJjYXJlZnVsIik6CiAgICAgICAgX19pbXBvcnRfXyhtb2RuYW1lKQogICAgICAgIG1vZCA9IHN5cy5tb2R1bGVzW21vZG5hbWVdCiAgICAgICAgc2VsZi5fdXBkYXRlKHZhcnMobW9kKSwgbW9kZSkKCiAgICBkZWYgcmVhZF9maWxlKHNlbGYsIGZpbGVuYW1lLCBtb2RlPSJjYXJlZnVsIik6CiAgICAgICAgdmFycyA9IHt9CiAgICAgICAgZXhlYyhvcGVuKGZpbGVuYW1lKS5yZWFkKCksIHZhcnMpCiAgICAgICAgc2VsZi5fdXBkYXRlKHZhcnMsIG1vZGUpCgogICAgZGVmIGVuc3VyZV92YWx1ZShzZWxmLCBhdHRyLCB2YWx1ZSk6CiAgICAgICAgaWYgbm90IGhhc2F0dHIoc2VsZiwgYXR0cikgb3IgZ2V0YXR0cihzZWxmLCBhdHRyKSBpcyBOb25lOgogICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIHZhbHVlKQogICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYsIGF0dHIpCgoKY2xhc3MgT3B0aW9uQ29udGFpbmVyOgoKICAgICIiIgogICAgQWJzdHJhY3QgYmFzZSBjbGFzcy4KCiAgICBDbGFzcyBhdHRyaWJ1dGVzOgogICAgICBzdGFuZGFyZF9vcHRpb25fbGlzdCA6IFtPcHRpb25dCiAgICAgICAgbGlzdCBvZiBzdGFuZGFyZCBvcHRpb25zIHRoYXQgd2lsbCBiZSBhY2NlcHRlZCBieSBhbGwgaW5zdGFuY2VzCiAgICAgICAgb2YgdGhpcyBwYXJzZXIgY2xhc3MgKGludGVuZGVkIHRvIGJlIG92ZXJyaWRkZW4gYnkgc3ViY2xhc3NlcykuCgogICAgSW5zdGFuY2UgYXR0cmlidXRlczoKICAgICAgb3B0aW9uX2xpc3QgOiBbT3B0aW9uXQogICAgICAgIHRoZSBsaXN0IG9mIE9wdGlvbiBvYmplY3RzIGNvbnRhaW5lZCBieSB0aGlzIE9wdGlvbkNvbnRhaW5lcgogICAgICBfc2hvcnRfb3B0IDogeyBzdHJpbmcgOiBPcHRpb24gfQogICAgICAgIGRpY3Rpb25hcnkgbWFwcGluZyBzaG9ydCBvcHRpb24gc3RyaW5ncywgZWcuICItZiIgb3IgIi1YIiwKICAgICAgICB0byB0aGUgT3B0aW9uIGluc3RhbmNlcyB0aGF0IGltcGxlbWVudCB0aGVtLiAgSWYgYW4gT3B0aW9uCiAgICAgICAgaGFzIG11bHRpcGxlIHNob3J0IG9wdGlvbiBzdHJpbmdzLCBpdCB3aWxsIGFwcGVhcnMgaW4gdGhpcwogICAgICAgIGRpY3Rpb25hcnkgbXVsdGlwbGUgdGltZXMuIFsxXQogICAgICBfbG9uZ19vcHQgOiB7IHN0cmluZyA6IE9wdGlvbiB9CiAgICAgICAgZGljdGlvbmFyeSBtYXBwaW5nIGxvbmcgb3B0aW9uIHN0cmluZ3MsIGVnLiAiLS1maWxlIiBvcgogICAgICAgICItLWV4Y2x1ZGUiLCB0byB0aGUgT3B0aW9uIGluc3RhbmNlcyB0aGF0IGltcGxlbWVudCB0aGVtLgogICAgICAgIEFnYWluLCBhIGdpdmVuIE9wdGlvbiBjYW4gb2NjdXIgbXVsdGlwbGUgdGltZXMgaW4gdGhpcwogICAgICAgIGRpY3Rpb25hcnkuIFsxXQogICAgICBkZWZhdWx0cyA6IHsgc3RyaW5nIDogYW55IH0KICAgICAgICBkaWN0aW9uYXJ5IG1hcHBpbmcgb3B0aW9uIGRlc3RpbmF0aW9uIG5hbWVzIHRvIGRlZmF1bHQKICAgICAgICB2YWx1ZXMgZm9yIGVhY2ggZGVzdGluYXRpb24gWzFdCgogICAgWzFdIFRoZXNlIG1hcHBpbmdzIGFyZSBjb21tb24gdG8gKHNoYXJlZCBieSkgYWxsIGNvbXBvbmVudHMgb2YgdGhlCiAgICAgICAgY29udHJvbGxpbmcgT3B0aW9uUGFyc2VyLCB3aGVyZSB0aGV5IGFyZSBpbml0aWFsbHkgY3JlYXRlZC4KCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgb3B0aW9uX2NsYXNzLCBjb25mbGljdF9oYW5kbGVyLCBkZXNjcmlwdGlvbik6CiAgICAgICAgIyBJbml0aWFsaXplIHRoZSBvcHRpb24gbGlzdCBhbmQgcmVsYXRlZCBkYXRhIHN0cnVjdHVyZXMuCiAgICAgICAgIyBUaGlzIG1ldGhvZCBtdXN0IGJlIHByb3ZpZGVkIGJ5IHN1YmNsYXNzZXMsIGFuZCBpdCBtdXN0CiAgICAgICAgIyBpbml0aWFsaXplIGF0IGxlYXN0IHRoZSBmb2xsb3dpbmcgaW5zdGFuY2UgYXR0cmlidXRlczoKICAgICAgICAjIG9wdGlvbl9saXN0LCBfc2hvcnRfb3B0LCBfbG9uZ19vcHQsIGRlZmF1bHRzLgogICAgICAgIHNlbGYuX2NyZWF0ZV9vcHRpb25fbGlzdCgpCgogICAgICAgIHNlbGYub3B0aW9uX2NsYXNzID0gb3B0aW9uX2NsYXNzCiAgICAgICAgc2VsZi5zZXRfY29uZmxpY3RfaGFuZGxlcihjb25mbGljdF9oYW5kbGVyKQogICAgICAgIHNlbGYuc2V0X2Rlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKQoKICAgIGRlZiBfY3JlYXRlX29wdGlvbl9tYXBwaW5ncyhzZWxmKToKICAgICAgICAjIEZvciB1c2UgYnkgT3B0aW9uUGFyc2VyIGNvbnN0cnVjdG9yIC0tIGNyZWF0ZSB0aGUgbWFzdGVyCiAgICAgICAgIyBvcHRpb24gbWFwcGluZ3MgdXNlZCBieSB0aGlzIE9wdGlvblBhcnNlciBhbmQgYWxsCiAgICAgICAgIyBPcHRpb25Hcm91cHMgdGhhdCBpdCBvd25zLgogICAgICAgIHNlbGYuX3Nob3J0X29wdCA9IHt9ICAgICAgICAgICAgIyBzaW5nbGUgbGV0dGVyIC0+IE9wdGlvbiBpbnN0YW5jZQogICAgICAgIHNlbGYuX2xvbmdfb3B0ID0ge30gICAgICAgICAgICAgIyBsb25nIG9wdGlvbiAtPiBPcHRpb24gaW5zdGFuY2UKICAgICAgICBzZWxmLmRlZmF1bHRzID0ge30gICAgICAgICAgICAgICMgbWFwcyBvcHRpb24gZGVzdCAtPiBkZWZhdWx0IHZhbHVlCgoKICAgIGRlZiBfc2hhcmVfb3B0aW9uX21hcHBpbmdzKHNlbGYsIHBhcnNlcik6CiAgICAgICAgIyBGb3IgdXNlIGJ5IE9wdGlvbkdyb3VwIGNvbnN0cnVjdG9yIC0tIHVzZSBzaGFyZWQgb3B0aW9uCiAgICAgICAgIyBtYXBwaW5ncyBmcm9tIHRoZSBPcHRpb25QYXJzZXIgdGhhdCBvd25zIHRoaXMgT3B0aW9uR3JvdXAuCiAgICAgICAgc2VsZi5fc2hvcnRfb3B0ID0gcGFyc2VyLl9zaG9ydF9vcHQKICAgICAgICBzZWxmLl9sb25nX29wdCA9IHBhcnNlci5fbG9uZ19vcHQKICAgICAgICBzZWxmLmRlZmF1bHRzID0gcGFyc2VyLmRlZmF1bHRzCgogICAgZGVmIHNldF9jb25mbGljdF9oYW5kbGVyKHNlbGYsIGhhbmRsZXIpOgogICAgICAgIGlmIGhhbmRsZXIgbm90IGluICgiZXJyb3IiLCAicmVzb2x2ZSIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIGNvbmZsaWN0X3Jlc29sdXRpb24gdmFsdWUgJXIiICUgaGFuZGxlcikKICAgICAgICBzZWxmLmNvbmZsaWN0X2hhbmRsZXIgPSBoYW5kbGVyCgogICAgZGVmIHNldF9kZXNjcmlwdGlvbihzZWxmLCBkZXNjcmlwdGlvbik6CiAgICAgICAgc2VsZi5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uCgogICAgZGVmIGdldF9kZXNjcmlwdGlvbihzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5kZXNjcmlwdGlvbgoKCiAgICBkZWYgZGVzdHJveShzZWxmKToKICAgICAgICAiIiJzZWUgT3B0aW9uUGFyc2VyLmRlc3Ryb3koKS4iIiIKICAgICAgICBkZWwgc2VsZi5fc2hvcnRfb3B0CiAgICAgICAgZGVsIHNlbGYuX2xvbmdfb3B0CiAgICAgICAgZGVsIHNlbGYuZGVmYXVsdHMKCgogICAgIyAtLSBPcHRpb24tYWRkaW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX2NoZWNrX2NvbmZsaWN0KHNlbGYsIG9wdGlvbik6CiAgICAgICAgY29uZmxpY3Rfb3B0cyA9IFtdCiAgICAgICAgZm9yIG9wdCBpbiBvcHRpb24uX3Nob3J0X29wdHM6CiAgICAgICAgICAgIGlmIG9wdCBpbiBzZWxmLl9zaG9ydF9vcHQ6CiAgICAgICAgICAgICAgICBjb25mbGljdF9vcHRzLmFwcGVuZCgob3B0LCBzZWxmLl9zaG9ydF9vcHRbb3B0XSkpCiAgICAgICAgZm9yIG9wdCBpbiBvcHRpb24uX2xvbmdfb3B0czoKICAgICAgICAgICAgaWYgb3B0IGluIHNlbGYuX2xvbmdfb3B0OgogICAgICAgICAgICAgICAgY29uZmxpY3Rfb3B0cy5hcHBlbmQoKG9wdCwgc2VsZi5fbG9uZ19vcHRbb3B0XSkpCgogICAgICAgIGlmIGNvbmZsaWN0X29wdHM6CiAgICAgICAgICAgIGhhbmRsZXIgPSBzZWxmLmNvbmZsaWN0X2hhbmRsZXIKICAgICAgICAgICAgaWYgaGFuZGxlciA9PSAiZXJyb3IiOgogICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uQ29uZmxpY3RFcnJvcigKICAgICAgICAgICAgICAgICAgICAiY29uZmxpY3Rpbmcgb3B0aW9uIHN0cmluZyhzKTogJXMiCiAgICAgICAgICAgICAgICAgICAgJSAiLCAiLmpvaW4oW2NvWzBdIGZvciBjbyBpbiBjb25mbGljdF9vcHRzXSksCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uKQogICAgICAgICAgICBlbGlmIGhhbmRsZXIgPT0gInJlc29sdmUiOgogICAgICAgICAgICAgICAgZm9yIChvcHQsIGNfb3B0aW9uKSBpbiBjb25mbGljdF9vcHRzOgogICAgICAgICAgICAgICAgICAgIGlmIG9wdC5zdGFydHN3aXRoKCItLSIpOgogICAgICAgICAgICAgICAgICAgICAgICBjX29wdGlvbi5fbG9uZ19vcHRzLnJlbW92ZShvcHQpCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLl9sb25nX29wdFtvcHRdCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgY19vcHRpb24uX3Nob3J0X29wdHMucmVtb3ZlKG9wdCkKICAgICAgICAgICAgICAgICAgICAgICAgZGVsIHNlbGYuX3Nob3J0X29wdFtvcHRdCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IChjX29wdGlvbi5fc2hvcnRfb3B0cyBvciBjX29wdGlvbi5fbG9uZ19vcHRzKToKICAgICAgICAgICAgICAgICAgICAgICAgY19vcHRpb24uY29udGFpbmVyLm9wdGlvbl9saXN0LnJlbW92ZShjX29wdGlvbikKCiAgICBkZWYgYWRkX29wdGlvbihzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgICIiImFkZF9vcHRpb24oT3B0aW9uKQogICAgICAgICAgIGFkZF9vcHRpb24ob3B0X3N0ciwgLi4uLCBrd2FyZz12YWwsIC4uLikKICAgICAgICAiIiIKICAgICAgICBpZiBpc2luc3RhbmNlKGFyZ3NbMF0sIHN0cik6CiAgICAgICAgICAgIG9wdGlvbiA9IHNlbGYub3B0aW9uX2NsYXNzKCphcmdzLCAqKmt3YXJncykKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAxIGFuZCBub3Qga3dhcmdzOgogICAgICAgICAgICBvcHRpb24gPSBhcmdzWzBdCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG9wdGlvbiwgT3B0aW9uKToKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibm90IGFuIE9wdGlvbiBpbnN0YW5jZTogJXIiICUgb3B0aW9uKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW52YWxpZCBhcmd1bWVudHMiKQoKICAgICAgICBzZWxmLl9jaGVja19jb25mbGljdChvcHRpb24pCgogICAgICAgIHNlbGYub3B0aW9uX2xpc3QuYXBwZW5kKG9wdGlvbikKICAgICAgICBvcHRpb24uY29udGFpbmVyID0gc2VsZgogICAgICAgIGZvciBvcHQgaW4gb3B0aW9uLl9zaG9ydF9vcHRzOgogICAgICAgICAgICBzZWxmLl9zaG9ydF9vcHRbb3B0XSA9IG9wdGlvbgogICAgICAgIGZvciBvcHQgaW4gb3B0aW9uLl9sb25nX29wdHM6CiAgICAgICAgICAgIHNlbGYuX2xvbmdfb3B0W29wdF0gPSBvcHRpb24KCiAgICAgICAgaWYgb3B0aW9uLmRlc3QgaXMgbm90IE5vbmU6ICAgICAjIG9wdGlvbiBoYXMgYSBkZXN0LCB3ZSBuZWVkIGEgZGVmYXVsdAogICAgICAgICAgICBpZiBvcHRpb24uZGVmYXVsdCBpcyBub3QgTk9fREVGQVVMVDoKICAgICAgICAgICAgICAgIHNlbGYuZGVmYXVsdHNbb3B0aW9uLmRlc3RdID0gb3B0aW9uLmRlZmF1bHQKICAgICAgICAgICAgZWxpZiBvcHRpb24uZGVzdCBub3QgaW4gc2VsZi5kZWZhdWx0czoKICAgICAgICAgICAgICAgIHNlbGYuZGVmYXVsdHNbb3B0aW9uLmRlc3RdID0gTm9uZQoKICAgICAgICByZXR1cm4gb3B0aW9uCgogICAgZGVmIGFkZF9vcHRpb25zKHNlbGYsIG9wdGlvbl9saXN0KToKICAgICAgICBmb3Igb3B0aW9uIGluIG9wdGlvbl9saXN0OgogICAgICAgICAgICBzZWxmLmFkZF9vcHRpb24ob3B0aW9uKQoKICAgICMgLS0gT3B0aW9uIHF1ZXJ5L3JlbW92YWwgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGdldF9vcHRpb24oc2VsZiwgb3B0X3N0cik6CiAgICAgICAgcmV0dXJuIChzZWxmLl9zaG9ydF9vcHQuZ2V0KG9wdF9zdHIpIG9yCiAgICAgICAgICAgICAgICBzZWxmLl9sb25nX29wdC5nZXQob3B0X3N0cikpCgogICAgZGVmIGhhc19vcHRpb24oc2VsZiwgb3B0X3N0cik6CiAgICAgICAgcmV0dXJuIChvcHRfc3RyIGluIHNlbGYuX3Nob3J0X29wdCBvcgogICAgICAgICAgICAgICAgb3B0X3N0ciBpbiBzZWxmLl9sb25nX29wdCkKCiAgICBkZWYgcmVtb3ZlX29wdGlvbihzZWxmLCBvcHRfc3RyKToKICAgICAgICBvcHRpb24gPSBzZWxmLl9zaG9ydF9vcHQuZ2V0KG9wdF9zdHIpCiAgICAgICAgaWYgb3B0aW9uIGlzIE5vbmU6CiAgICAgICAgICAgIG9wdGlvbiA9IHNlbGYuX2xvbmdfb3B0LmdldChvcHRfc3RyKQogICAgICAgIGlmIG9wdGlvbiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJubyBzdWNoIG9wdGlvbiAlciIgJSBvcHRfc3RyKQoKICAgICAgICBmb3Igb3B0IGluIG9wdGlvbi5fc2hvcnRfb3B0czoKICAgICAgICAgICAgZGVsIHNlbGYuX3Nob3J0X29wdFtvcHRdCiAgICAgICAgZm9yIG9wdCBpbiBvcHRpb24uX2xvbmdfb3B0czoKICAgICAgICAgICAgZGVsIHNlbGYuX2xvbmdfb3B0W29wdF0KICAgICAgICBvcHRpb24uY29udGFpbmVyLm9wdGlvbl9saXN0LnJlbW92ZShvcHRpb24pCgoKICAgICMgLS0gSGVscC1mb3JtYXR0aW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGZvcm1hdF9vcHRpb25faGVscChzZWxmLCBmb3JtYXR0ZXIpOgogICAgICAgIGlmIG5vdCBzZWxmLm9wdGlvbl9saXN0OgogICAgICAgICAgICByZXR1cm4gIiIKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIGZvciBvcHRpb24gaW4gc2VsZi5vcHRpb25fbGlzdDoKICAgICAgICAgICAgaWYgbm90IG9wdGlvbi5oZWxwIGlzIFNVUFBSRVNTX0hFTFA6CiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGZvcm1hdHRlci5mb3JtYXRfb3B0aW9uKG9wdGlvbikpCiAgICAgICAgcmV0dXJuICIiLmpvaW4ocmVzdWx0KQoKICAgIGRlZiBmb3JtYXRfZGVzY3JpcHRpb24oc2VsZiwgZm9ybWF0dGVyKToKICAgICAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdF9kZXNjcmlwdGlvbihzZWxmLmdldF9kZXNjcmlwdGlvbigpKQoKICAgIGRlZiBmb3JtYXRfaGVscChzZWxmLCBmb3JtYXR0ZXIpOgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaWYgc2VsZi5kZXNjcmlwdGlvbjoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChzZWxmLmZvcm1hdF9kZXNjcmlwdGlvbihmb3JtYXR0ZXIpKQogICAgICAgIGlmIHNlbGYub3B0aW9uX2xpc3Q6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoc2VsZi5mb3JtYXRfb3B0aW9uX2hlbHAoZm9ybWF0dGVyKSkKICAgICAgICByZXR1cm4gIlxuIi5qb2luKHJlc3VsdCkKCgpjbGFzcyBPcHRpb25Hcm91cCAoT3B0aW9uQ29udGFpbmVyKToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcGFyc2VyLCB0aXRsZSwgZGVzY3JpcHRpb249Tm9uZSk6CiAgICAgICAgc2VsZi5wYXJzZXIgPSBwYXJzZXIKICAgICAgICBPcHRpb25Db250YWluZXIuX19pbml0X18oCiAgICAgICAgICAgIHNlbGYsIHBhcnNlci5vcHRpb25fY2xhc3MsIHBhcnNlci5jb25mbGljdF9oYW5kbGVyLCBkZXNjcmlwdGlvbikKICAgICAgICBzZWxmLnRpdGxlID0gdGl0bGUKCiAgICBkZWYgX2NyZWF0ZV9vcHRpb25fbGlzdChzZWxmKToKICAgICAgICBzZWxmLm9wdGlvbl9saXN0ID0gW10KICAgICAgICBzZWxmLl9zaGFyZV9vcHRpb25fbWFwcGluZ3Moc2VsZi5wYXJzZXIpCgogICAgZGVmIHNldF90aXRsZShzZWxmLCB0aXRsZSk6CiAgICAgICAgc2VsZi50aXRsZSA9IHRpdGxlCgogICAgZGVmIGRlc3Ryb3koc2VsZik6CiAgICAgICAgIiIic2VlIE9wdGlvblBhcnNlci5kZXN0cm95KCkuIiIiCiAgICAgICAgT3B0aW9uQ29udGFpbmVyLmRlc3Ryb3koc2VsZikKICAgICAgICBkZWwgc2VsZi5vcHRpb25fbGlzdAoKICAgICMgLS0gSGVscC1mb3JtYXR0aW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGZvcm1hdF9oZWxwKHNlbGYsIGZvcm1hdHRlcik6CiAgICAgICAgcmVzdWx0ID0gZm9ybWF0dGVyLmZvcm1hdF9oZWFkaW5nKHNlbGYudGl0bGUpCiAgICAgICAgZm9ybWF0dGVyLmluZGVudCgpCiAgICAgICAgcmVzdWx0ICs9IE9wdGlvbkNvbnRhaW5lci5mb3JtYXRfaGVscChzZWxmLCBmb3JtYXR0ZXIpCiAgICAgICAgZm9ybWF0dGVyLmRlZGVudCgpCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKCmNsYXNzIE9wdGlvblBhcnNlciAoT3B0aW9uQ29udGFpbmVyKToKCiAgICAiIiIKICAgIENsYXNzIGF0dHJpYnV0ZXM6CiAgICAgIHN0YW5kYXJkX29wdGlvbl9saXN0IDogW09wdGlvbl0KICAgICAgICBsaXN0IG9mIHN0YW5kYXJkIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGFjY2VwdGVkIGJ5IGFsbCBpbnN0YW5jZXMKICAgICAgICBvZiB0aGlzIHBhcnNlciBjbGFzcyAoaW50ZW5kZWQgdG8gYmUgb3ZlcnJpZGRlbiBieSBzdWJjbGFzc2VzKS4KCiAgICBJbnN0YW5jZSBhdHRyaWJ1dGVzOgogICAgICB1c2FnZSA6IHN0cmluZwogICAgICAgIGEgdXNhZ2Ugc3RyaW5nIGZvciB5b3VyIHByb2dyYW0uICBCZWZvcmUgaXQgaXMgZGlzcGxheWVkCiAgICAgICAgdG8gdGhlIHVzZXIsICIlcHJvZyIgd2lsbCBiZSBleHBhbmRlZCB0byB0aGUgbmFtZSBvZgogICAgICAgIHlvdXIgcHJvZ3JhbSAoc2VsZi5wcm9nIG9yIG9zLnBhdGguYmFzZW5hbWUoc3lzLmFyZ3ZbMF0pKS4KICAgICAgcHJvZyA6IHN0cmluZwogICAgICAgIHRoZSBuYW1lIG9mIHRoZSBjdXJyZW50IHByb2dyYW0gKHRvIG92ZXJyaWRlCiAgICAgICAgb3MucGF0aC5iYXNlbmFtZShzeXMuYXJndlswXSkpLgogICAgICBkZXNjcmlwdGlvbiA6IHN0cmluZwogICAgICAgIEEgcGFyYWdyYXBoIG9mIHRleHQgZ2l2aW5nIGEgYnJpZWYgb3ZlcnZpZXcgb2YgeW91ciBwcm9ncmFtLgogICAgICAgIG9wdHBhcnNlIHJlZm9ybWF0cyB0aGlzIHBhcmFncmFwaCB0byBmaXQgdGhlIGN1cnJlbnQgdGVybWluYWwKICAgICAgICB3aWR0aCBhbmQgcHJpbnRzIGl0IHdoZW4gdGhlIHVzZXIgcmVxdWVzdHMgaGVscCAoYWZ0ZXIgdXNhZ2UsCiAgICAgICAgYnV0IGJlZm9yZSB0aGUgbGlzdCBvZiBvcHRpb25zKS4KICAgICAgZXBpbG9nIDogc3RyaW5nCiAgICAgICAgcGFyYWdyYXBoIG9mIGhlbHAgdGV4dCB0byBwcmludCBhZnRlciBvcHRpb24gaGVscAoKICAgICAgb3B0aW9uX2dyb3VwcyA6IFtPcHRpb25Hcm91cF0KICAgICAgICBsaXN0IG9mIG9wdGlvbiBncm91cHMgaW4gdGhpcyBwYXJzZXIgKG9wdGlvbiBncm91cHMgYXJlCiAgICAgICAgaXJyZWxldmFudCBmb3IgcGFyc2luZyB0aGUgY29tbWFuZC1saW5lLCBidXQgdmVyeSB1c2VmdWwKICAgICAgICBmb3IgZ2VuZXJhdGluZyBoZWxwKQoKICAgICAgYWxsb3dfaW50ZXJzcGVyc2VkX2FyZ3MgOiBib29sID0gdHJ1ZQogICAgICAgIGlmIHRydWUsIHBvc2l0aW9uYWwgYXJndW1lbnRzIG1heSBiZSBpbnRlcnNwZXJzZWQgd2l0aCBvcHRpb25zLgogICAgICAgIEFzc3VtaW5nIC1hIGFuZCAtYiBlYWNoIHRha2UgYSBzaW5nbGUgYXJndW1lbnQsIHRoZSBjb21tYW5kLWxpbmUKICAgICAgICAgIC1hYmxhaCBmb28gYmFyIC1iYm9vIGJhegogICAgICAgIHdpbGwgYmUgaW50ZXJwcmV0ZWQgdGhlIHNhbWUgYXMKICAgICAgICAgIC1hYmxhaCAtYmJvbyAtLSBmb28gYmFyIGJhegogICAgICAgIElmIHRoaXMgZmxhZyB3ZXJlIGZhbHNlLCB0aGF0IGNvbW1hbmQgbGluZSB3b3VsZCBiZSBpbnRlcnByZXRlZCBhcwogICAgICAgICAgLWFibGFoIC0tIGZvbyBiYXIgLWJib28gYmF6CiAgICAgICAgLS0gaWUuIHdlIHN0b3AgcHJvY2Vzc2luZyBvcHRpb25zIGFzIHNvb24gYXMgd2Ugc2VlIHRoZSBmaXJzdAogICAgICAgIG5vbi1vcHRpb24gYXJndW1lbnQuICAoVGhpcyBpcyB0aGUgdHJhZGl0aW9uIGZvbGxvd2VkIGJ5CiAgICAgICAgUHl0aG9uJ3MgZ2V0b3B0IG1vZHVsZSwgUGVybCdzIEdldG9wdDo6U3RkLCBhbmQgb3RoZXIgYXJndW1lbnQtCiAgICAgICAgcGFyc2luZyBsaWJyYXJpZXMsIGJ1dCBpdCBpcyBnZW5lcmFsbHkgYW5ub3lpbmcgdG8gdXNlcnMuKQoKICAgICAgcHJvY2Vzc19kZWZhdWx0X3ZhbHVlcyA6IGJvb2wgPSB0cnVlCiAgICAgICAgaWYgdHJ1ZSwgb3B0aW9uIGRlZmF1bHQgdmFsdWVzIGFyZSBwcm9jZXNzZWQgc2ltaWxhcmx5IHRvIG9wdGlvbgogICAgICAgIHZhbHVlcyBmcm9tIHRoZSBjb21tYW5kIGxpbmU6IHRoYXQgaXMsIHRoZXkgYXJlIHBhc3NlZCB0byB0aGUKICAgICAgICB0eXBlLWNoZWNraW5nIGZ1bmN0aW9uIGZvciB0aGUgb3B0aW9uJ3MgdHlwZSAoYXMgbG9uZyBhcyB0aGUKICAgICAgICBkZWZhdWx0IHZhbHVlIGlzIGEgc3RyaW5nKS4gIChUaGlzIHJlYWxseSBvbmx5IG1hdHRlcnMgaWYgeW91CiAgICAgICAgaGF2ZSBkZWZpbmVkIGN1c3RvbSB0eXBlczsgc2VlIFNGIGJ1ZyAjOTU1ODg5LikgIFNldCBpdCB0byBmYWxzZQogICAgICAgIHRvIHJlc3RvcmUgdGhlIGJlaGF2aW91ciBvZiBPcHRpayAxLjQuMSBhbmQgZWFybGllci4KCiAgICAgIHJhcmdzIDogW3N0cmluZ10KICAgICAgICB0aGUgYXJndW1lbnQgbGlzdCBjdXJyZW50bHkgYmVpbmcgcGFyc2VkLiAgT25seSBzZXQgd2hlbgogICAgICAgIHBhcnNlX2FyZ3MoKSBpcyBhY3RpdmUsIGFuZCBjb250aW51YWxseSB0cmltbWVkIGRvd24gYXMKICAgICAgICB3ZSBjb25zdW1lIGFyZ3VtZW50cy4gIE1haW5seSB0aGVyZSBmb3IgdGhlIGJlbmVmaXQgb2YKICAgICAgICBjYWxsYmFjayBvcHRpb25zLgogICAgICBsYXJncyA6IFtzdHJpbmddCiAgICAgICAgdGhlIGxpc3Qgb2YgbGVmdG92ZXIgYXJndW1lbnRzIHRoYXQgd2UgaGF2ZSBza2lwcGVkIHdoaWxlCiAgICAgICAgcGFyc2luZyBvcHRpb25zLiAgSWYgYWxsb3dfaW50ZXJzcGVyc2VkX2FyZ3MgaXMgZmFsc2UsIHRoaXMKICAgICAgICBsaXN0IGlzIGFsd2F5cyBlbXB0eS4KICAgICAgdmFsdWVzIDogVmFsdWVzCiAgICAgICAgdGhlIHNldCBvZiBvcHRpb24gdmFsdWVzIGN1cnJlbnRseSBiZWluZyBhY2N1bXVsYXRlZC4gIE9ubHkKICAgICAgICBzZXQgd2hlbiBwYXJzZV9hcmdzKCkgaXMgYWN0aXZlLiAgQWxzbyBtYWlubHkgZm9yIGNhbGxiYWNrcy4KCiAgICBCZWNhdXNlIG9mIHRoZSAncmFyZ3MnLCAnbGFyZ3MnLCBhbmQgJ3ZhbHVlcycgYXR0cmlidXRlcywKICAgIE9wdGlvblBhcnNlciBpcyBub3QgdGhyZWFkLXNhZmUuICBJZiwgZm9yIHNvbWUgcGVydmVyc2UgcmVhc29uLCB5b3UKICAgIG5lZWQgdG8gcGFyc2UgY29tbWFuZC1saW5lIGFyZ3VtZW50cyBzaW11bHRhbmVvdXNseSBpbiBkaWZmZXJlbnQKICAgIHRocmVhZHMsIHVzZSBkaWZmZXJlbnQgT3B0aW9uUGFyc2VyIGluc3RhbmNlcy4KCiAgICAiIiIKCiAgICBzdGFuZGFyZF9vcHRpb25fbGlzdCA9IFtdCgogICAgZGVmIF9faW5pdF9fKHNlbGYsCiAgICAgICAgICAgICAgICAgdXNhZ2U9Tm9uZSwKICAgICAgICAgICAgICAgICBvcHRpb25fbGlzdD1Ob25lLAogICAgICAgICAgICAgICAgIG9wdGlvbl9jbGFzcz1PcHRpb24sCiAgICAgICAgICAgICAgICAgdmVyc2lvbj1Ob25lLAogICAgICAgICAgICAgICAgIGNvbmZsaWN0X2hhbmRsZXI9ImVycm9yIiwKICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj1Ob25lLAogICAgICAgICAgICAgICAgIGZvcm1hdHRlcj1Ob25lLAogICAgICAgICAgICAgICAgIGFkZF9oZWxwX29wdGlvbj1UcnVlLAogICAgICAgICAgICAgICAgIHByb2c9Tm9uZSwKICAgICAgICAgICAgICAgICBlcGlsb2c9Tm9uZSk6CiAgICAgICAgT3B0aW9uQ29udGFpbmVyLl9faW5pdF9fKAogICAgICAgICAgICBzZWxmLCBvcHRpb25fY2xhc3MsIGNvbmZsaWN0X2hhbmRsZXIsIGRlc2NyaXB0aW9uKQogICAgICAgIHNlbGYuc2V0X3VzYWdlKHVzYWdlKQogICAgICAgIHNlbGYucHJvZyA9IHByb2cKICAgICAgICBzZWxmLnZlcnNpb24gPSB2ZXJzaW9uCiAgICAgICAgc2VsZi5hbGxvd19pbnRlcnNwZXJzZWRfYXJncyA9IFRydWUKICAgICAgICBzZWxmLnByb2Nlc3NfZGVmYXVsdF92YWx1ZXMgPSBUcnVlCiAgICAgICAgaWYgZm9ybWF0dGVyIGlzIE5vbmU6CiAgICAgICAgICAgIGZvcm1hdHRlciA9IEluZGVudGVkSGVscEZvcm1hdHRlcigpCiAgICAgICAgc2VsZi5mb3JtYXR0ZXIgPSBmb3JtYXR0ZXIKICAgICAgICBzZWxmLmZvcm1hdHRlci5zZXRfcGFyc2VyKHNlbGYpCiAgICAgICAgc2VsZi5lcGlsb2cgPSBlcGlsb2cKCiAgICAgICAgIyBQb3B1bGF0ZSB0aGUgb3B0aW9uIGxpc3Q7IGluaXRpYWwgc291cmNlcyBhcmUgdGhlCiAgICAgICAgIyBzdGFuZGFyZF9vcHRpb25fbGlzdCBjbGFzcyBhdHRyaWJ1dGUsIHRoZSAnb3B0aW9uX2xpc3QnCiAgICAgICAgIyBhcmd1bWVudCwgYW5kIChpZiBhcHBsaWNhYmxlKSB0aGUgX2FkZF92ZXJzaW9uX29wdGlvbigpIGFuZAogICAgICAgICMgX2FkZF9oZWxwX29wdGlvbigpIG1ldGhvZHMuCiAgICAgICAgc2VsZi5fcG9wdWxhdGVfb3B0aW9uX2xpc3Qob3B0aW9uX2xpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkX2hlbHA9YWRkX2hlbHBfb3B0aW9uKQoKICAgICAgICBzZWxmLl9pbml0X3BhcnNpbmdfc3RhdGUoKQoKCiAgICBkZWYgZGVzdHJveShzZWxmKToKICAgICAgICAiIiIKICAgICAgICBEZWNsYXJlIHRoYXQgeW91IGFyZSBkb25lIHdpdGggdGhpcyBPcHRpb25QYXJzZXIuICBUaGlzIGNsZWFucyB1cAogICAgICAgIHJlZmVyZW5jZSBjeWNsZXMgc28gdGhlIE9wdGlvblBhcnNlciAoYW5kIGFsbCBvYmplY3RzIHJlZmVyZW5jZWQgYnkKICAgICAgICBpdCkgY2FuIGJlIGdhcmJhZ2UtY29sbGVjdGVkIHByb21wdGx5LiAgQWZ0ZXIgY2FsbGluZyBkZXN0cm95KCksIHRoZQogICAgICAgIE9wdGlvblBhcnNlciBpcyB1bnVzYWJsZS4KICAgICAgICAiIiIKICAgICAgICBPcHRpb25Db250YWluZXIuZGVzdHJveShzZWxmKQogICAgICAgIGZvciBncm91cCBpbiBzZWxmLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIGdyb3VwLmRlc3Ryb3koKQogICAgICAgIGRlbCBzZWxmLm9wdGlvbl9saXN0CiAgICAgICAgZGVsIHNlbGYub3B0aW9uX2dyb3VwcwogICAgICAgIGRlbCBzZWxmLmZvcm1hdHRlcgoKCiAgICAjIC0tIFByaXZhdGUgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyAodXNlZCBieSBvdXIgb3IgT3B0aW9uQ29udGFpbmVyJ3MgY29uc3RydWN0b3IpCgogICAgZGVmIF9jcmVhdGVfb3B0aW9uX2xpc3Qoc2VsZik6CiAgICAgICAgc2VsZi5vcHRpb25fbGlzdCA9IFtdCiAgICAgICAgc2VsZi5vcHRpb25fZ3JvdXBzID0gW10KICAgICAgICBzZWxmLl9jcmVhdGVfb3B0aW9uX21hcHBpbmdzKCkKCiAgICBkZWYgX2FkZF9oZWxwX29wdGlvbihzZWxmKToKICAgICAgICBzZWxmLmFkZF9vcHRpb24oIi1oIiwgIi0taGVscCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj0iaGVscCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9Xygic2hvdyB0aGlzIGhlbHAgbWVzc2FnZSBhbmQgZXhpdCIpKQoKICAgIGRlZiBfYWRkX3ZlcnNpb25fb3B0aW9uKHNlbGYpOgogICAgICAgIHNlbGYuYWRkX29wdGlvbigiLS12ZXJzaW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPSJ2ZXJzaW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgaGVscD1fKCJzaG93IHByb2dyYW0ncyB2ZXJzaW9uIG51bWJlciBhbmQgZXhpdCIpKQoKICAgIGRlZiBfcG9wdWxhdGVfb3B0aW9uX2xpc3Qoc2VsZiwgb3B0aW9uX2xpc3QsIGFkZF9oZWxwPVRydWUpOgogICAgICAgIGlmIHNlbGYuc3RhbmRhcmRfb3B0aW9uX2xpc3Q6CiAgICAgICAgICAgIHNlbGYuYWRkX29wdGlvbnMoc2VsZi5zdGFuZGFyZF9vcHRpb25fbGlzdCkKICAgICAgICBpZiBvcHRpb25fbGlzdDoKICAgICAgICAgICAgc2VsZi5hZGRfb3B0aW9ucyhvcHRpb25fbGlzdCkKICAgICAgICBpZiBzZWxmLnZlcnNpb246CiAgICAgICAgICAgIHNlbGYuX2FkZF92ZXJzaW9uX29wdGlvbigpCiAgICAgICAgaWYgYWRkX2hlbHA6CiAgICAgICAgICAgIHNlbGYuX2FkZF9oZWxwX29wdGlvbigpCgogICAgZGVmIF9pbml0X3BhcnNpbmdfc3RhdGUoc2VsZik6CiAgICAgICAgIyBUaGVzZSBhcmUgc2V0IGluIHBhcnNlX2FyZ3MoKSBmb3IgdGhlIGNvbnZlbmllbmNlIG9mIGNhbGxiYWNrcy4KICAgICAgICBzZWxmLnJhcmdzID0gTm9uZQogICAgICAgIHNlbGYubGFyZ3MgPSBOb25lCiAgICAgICAgc2VsZi52YWx1ZXMgPSBOb25lCgoKICAgICMgLS0gU2ltcGxlIG1vZGlmaWVyIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIHNldF91c2FnZShzZWxmLCB1c2FnZSk6CiAgICAgICAgaWYgdXNhZ2UgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi51c2FnZSA9IF8oIiVwcm9nIFtvcHRpb25zXSIpCiAgICAgICAgZWxpZiB1c2FnZSBpcyBTVVBQUkVTU19VU0FHRToKICAgICAgICAgICAgc2VsZi51c2FnZSA9IE5vbmUKICAgICAgICAjIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIE9wdGlrIDEuMyBhbmQgZWFybGllci4KICAgICAgICBlbGlmIHVzYWdlLmxvd2VyKCkuc3RhcnRzd2l0aCgidXNhZ2U6ICIpOgogICAgICAgICAgICBzZWxmLnVzYWdlID0gdXNhZ2VbNzpdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi51c2FnZSA9IHVzYWdlCgogICAgZGVmIGVuYWJsZV9pbnRlcnNwZXJzZWRfYXJncyhzZWxmKToKICAgICAgICAiIiJTZXQgcGFyc2luZyB0byBub3Qgc3RvcCBvbiB0aGUgZmlyc3Qgbm9uLW9wdGlvbiwgYWxsb3dpbmcKICAgICAgICBpbnRlcnNwZXJzaW5nIHN3aXRjaGVzIHdpdGggY29tbWFuZCBhcmd1bWVudHMuIFRoaXMgaXMgdGhlCiAgICAgICAgZGVmYXVsdCBiZWhhdmlvci4gU2VlIGFsc28gZGlzYWJsZV9pbnRlcnNwZXJzZWRfYXJncygpIGFuZCB0aGUKICAgICAgICBjbGFzcyBkb2N1bWVudGF0aW9uIGRlc2NyaXB0aW9uIG9mIHRoZSBhdHRyaWJ1dGUKICAgICAgICBhbGxvd19pbnRlcnNwZXJzZWRfYXJncy4iIiIKICAgICAgICBzZWxmLmFsbG93X2ludGVyc3BlcnNlZF9hcmdzID0gVHJ1ZQoKICAgIGRlZiBkaXNhYmxlX2ludGVyc3BlcnNlZF9hcmdzKHNlbGYpOgogICAgICAgICIiIlNldCBwYXJzaW5nIHRvIHN0b3Agb24gdGhlIGZpcnN0IG5vbi1vcHRpb24uIFVzZSB0aGlzIGlmCiAgICAgICAgeW91IGhhdmUgYSBjb21tYW5kIHByb2Nlc3NvciB3aGljaCBydW5zIGFub3RoZXIgY29tbWFuZCB0aGF0CiAgICAgICAgaGFzIG9wdGlvbnMgb2YgaXRzIG93biBhbmQgeW91IHdhbnQgdG8gbWFrZSBzdXJlIHRoZXNlIG9wdGlvbnMKICAgICAgICBkb24ndCBnZXQgY29uZnVzZWQuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5hbGxvd19pbnRlcnNwZXJzZWRfYXJncyA9IEZhbHNlCgogICAgZGVmIHNldF9wcm9jZXNzX2RlZmF1bHRfdmFsdWVzKHNlbGYsIHByb2Nlc3MpOgogICAgICAgIHNlbGYucHJvY2Vzc19kZWZhdWx0X3ZhbHVlcyA9IHByb2Nlc3MKCiAgICBkZWYgc2V0X2RlZmF1bHQoc2VsZiwgZGVzdCwgdmFsdWUpOgogICAgICAgIHNlbGYuZGVmYXVsdHNbZGVzdF0gPSB2YWx1ZQoKICAgIGRlZiBzZXRfZGVmYXVsdHMoc2VsZiwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuZGVmYXVsdHMudXBkYXRlKGt3YXJncykKCiAgICBkZWYgX2dldF9hbGxfb3B0aW9ucyhzZWxmKToKICAgICAgICBvcHRpb25zID0gc2VsZi5vcHRpb25fbGlzdFs6XQogICAgICAgIGZvciBncm91cCBpbiBzZWxmLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIG9wdGlvbnMuZXh0ZW5kKGdyb3VwLm9wdGlvbl9saXN0KQogICAgICAgIHJldHVybiBvcHRpb25zCgogICAgZGVmIGdldF9kZWZhdWx0X3ZhbHVlcyhzZWxmKToKICAgICAgICBpZiBub3Qgc2VsZi5wcm9jZXNzX2RlZmF1bHRfdmFsdWVzOgogICAgICAgICAgICAjIE9sZCwgcHJlLU9wdGlrIDEuNSBiZWhhdmlvdXIuCiAgICAgICAgICAgIHJldHVybiBWYWx1ZXMoc2VsZi5kZWZhdWx0cykKCiAgICAgICAgZGVmYXVsdHMgPSBzZWxmLmRlZmF1bHRzLmNvcHkoKQogICAgICAgIGZvciBvcHRpb24gaW4gc2VsZi5fZ2V0X2FsbF9vcHRpb25zKCk6CiAgICAgICAgICAgIGRlZmF1bHQgPSBkZWZhdWx0cy5nZXQob3B0aW9uLmRlc3QpCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZGVmYXVsdCwgc3RyKToKICAgICAgICAgICAgICAgIG9wdF9zdHIgPSBvcHRpb24uZ2V0X29wdF9zdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmYXVsdHNbb3B0aW9uLmRlc3RdID0gb3B0aW9uLmNoZWNrX3ZhbHVlKG9wdF9zdHIsIGRlZmF1bHQpCgogICAgICAgIHJldHVybiBWYWx1ZXMoZGVmYXVsdHMpCgoKICAgICMgLS0gT3B0aW9uR3JvdXAgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGFkZF9vcHRpb25fZ3JvdXAoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAjIFhYWCBsb3RzIG9mIG92ZXJsYXAgd2l0aCBPcHRpb25Db250YWluZXIuYWRkX29wdGlvbigpCiAgICAgICAgaWYgaXNpbnN0YW5jZShhcmdzWzBdLCBzdHIpOgogICAgICAgICAgICBncm91cCA9IE9wdGlvbkdyb3VwKHNlbGYsICphcmdzLCAqKmt3YXJncykKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAxIGFuZCBub3Qga3dhcmdzOgogICAgICAgICAgICBncm91cCA9IGFyZ3NbMF0KICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZ3JvdXAsIE9wdGlvbkdyb3VwKToKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibm90IGFuIE9wdGlvbkdyb3VwIGluc3RhbmNlOiAlciIgJSBncm91cCkKICAgICAgICAgICAgaWYgZ3JvdXAucGFyc2VyIGlzIG5vdCBzZWxmOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCBPcHRpb25Hcm91cCAod3JvbmcgcGFyc2VyKSIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJpbnZhbGlkIGFyZ3VtZW50cyIpCgogICAgICAgIHNlbGYub3B0aW9uX2dyb3Vwcy5hcHBlbmQoZ3JvdXApCiAgICAgICAgcmV0dXJuIGdyb3VwCgogICAgZGVmIGdldF9vcHRpb25fZ3JvdXAoc2VsZiwgb3B0X3N0cik6CiAgICAgICAgb3B0aW9uID0gKHNlbGYuX3Nob3J0X29wdC5nZXQob3B0X3N0cikgb3IKICAgICAgICAgICAgICAgICAgc2VsZi5fbG9uZ19vcHQuZ2V0KG9wdF9zdHIpKQogICAgICAgIGlmIG9wdGlvbiBhbmQgb3B0aW9uLmNvbnRhaW5lciBpcyBub3Qgc2VsZjoKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5jb250YWluZXIKICAgICAgICByZXR1cm4gTm9uZQoKCiAgICAjIC0tIE9wdGlvbi1wYXJzaW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfZ2V0X2FyZ3Moc2VsZiwgYXJncyk6CiAgICAgICAgaWYgYXJncyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gc3lzLmFyZ3ZbMTpdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGFyZ3NbOl0gICAgICAgICAgICAgICMgZG9uJ3QgbW9kaWZ5IGNhbGxlcidzIGxpc3QKCiAgICBkZWYgcGFyc2VfYXJncyhzZWxmLCBhcmdzPU5vbmUsIHZhbHVlcz1Ob25lKToKICAgICAgICAiIiIKICAgICAgICBwYXJzZV9hcmdzKGFyZ3MgOiBbc3RyaW5nXSA9IHN5cy5hcmd2WzE6XSwKICAgICAgICAgICAgICAgICAgIHZhbHVlcyA6IFZhbHVlcyA9IE5vbmUpCiAgICAgICAgLT4gKHZhbHVlcyA6IFZhbHVlcywgYXJncyA6IFtzdHJpbmddKQoKICAgICAgICBQYXJzZSB0aGUgY29tbWFuZC1saW5lIG9wdGlvbnMgZm91bmQgaW4gJ2FyZ3MnIChkZWZhdWx0OgogICAgICAgIHN5cy5hcmd2WzE6XSkuICBBbnkgZXJyb3JzIHJlc3VsdCBpbiBhIGNhbGwgdG8gJ2Vycm9yKCknLCB3aGljaAogICAgICAgIGJ5IGRlZmF1bHQgcHJpbnRzIHRoZSB1c2FnZSBtZXNzYWdlIHRvIHN0ZGVyciBhbmQgY2FsbHMKICAgICAgICBzeXMuZXhpdCgpIHdpdGggYW4gZXJyb3IgbWVzc2FnZS4gIE9uIHN1Y2Nlc3MgcmV0dXJucyBhIHBhaXIKICAgICAgICAodmFsdWVzLCBhcmdzKSB3aGVyZSAndmFsdWVzJyBpcyBhbiBWYWx1ZXMgaW5zdGFuY2UgKHdpdGggYWxsCiAgICAgICAgeW91ciBvcHRpb24gdmFsdWVzKSBhbmQgJ2FyZ3MnIGlzIHRoZSBsaXN0IG9mIGFyZ3VtZW50cyBsZWZ0CiAgICAgICAgb3ZlciBhZnRlciBwYXJzaW5nIG9wdGlvbnMuCiAgICAgICAgIiIiCiAgICAgICAgcmFyZ3MgPSBzZWxmLl9nZXRfYXJncyhhcmdzKQogICAgICAgIGlmIHZhbHVlcyBpcyBOb25lOgogICAgICAgICAgICB2YWx1ZXMgPSBzZWxmLmdldF9kZWZhdWx0X3ZhbHVlcygpCgogICAgICAgICMgU3RvcmUgdGhlIGhhbHZlcyBvZiB0aGUgYXJndW1lbnQgbGlzdCBhcyBhdHRyaWJ1dGVzIGZvciB0aGUKICAgICAgICAjIGNvbnZlbmllbmNlIG9mIGNhbGxiYWNrczoKICAgICAgICAjICAgcmFyZ3MKICAgICAgICAjICAgICB0aGUgcmVzdCBvZiB0aGUgY29tbWFuZC1saW5lICh0aGUgInIiIHN0YW5kcyBmb3IKICAgICAgICAjICAgICAicmVtYWluaW5nIiBvciAicmlnaHQtaGFuZCIpCiAgICAgICAgIyAgIGxhcmdzCiAgICAgICAgIyAgICAgdGhlIGxlZnRvdmVyIGFyZ3VtZW50cyAtLSBpZS4gd2hhdCdzIGxlZnQgYWZ0ZXIgcmVtb3ZpbmcKICAgICAgICAjICAgICBvcHRpb25zIGFuZCB0aGVpciBhcmd1bWVudHMgKHRoZSAibCIgc3RhbmRzIGZvciAibGVmdG92ZXIiCiAgICAgICAgIyAgICAgb3IgImxlZnQtaGFuZCIpCiAgICAgICAgc2VsZi5yYXJncyA9IHJhcmdzCiAgICAgICAgc2VsZi5sYXJncyA9IGxhcmdzID0gW10KICAgICAgICBzZWxmLnZhbHVlcyA9IHZhbHVlcwoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHN0b3AgPSBzZWxmLl9wcm9jZXNzX2FyZ3MobGFyZ3MsIHJhcmdzLCB2YWx1ZXMpCiAgICAgICAgZXhjZXB0IChCYWRPcHRpb25FcnJvciwgT3B0aW9uVmFsdWVFcnJvcikgYXMgZXJyOgogICAgICAgICAgICBzZWxmLmVycm9yKHN0cihlcnIpKQoKICAgICAgICBhcmdzID0gbGFyZ3MgKyByYXJncwogICAgICAgIHJldHVybiBzZWxmLmNoZWNrX3ZhbHVlcyh2YWx1ZXMsIGFyZ3MpCgogICAgZGVmIGNoZWNrX3ZhbHVlcyhzZWxmLCB2YWx1ZXMsIGFyZ3MpOgogICAgICAgICIiIgogICAgICAgIGNoZWNrX3ZhbHVlcyh2YWx1ZXMgOiBWYWx1ZXMsIGFyZ3MgOiBbc3RyaW5nXSkKICAgICAgICAtPiAodmFsdWVzIDogVmFsdWVzLCBhcmdzIDogW3N0cmluZ10pCgogICAgICAgIENoZWNrIHRoYXQgdGhlIHN1cHBsaWVkIG9wdGlvbiB2YWx1ZXMgYW5kIGxlZnRvdmVyIGFyZ3VtZW50cyBhcmUKICAgICAgICB2YWxpZC4gIFJldHVybnMgdGhlIG9wdGlvbiB2YWx1ZXMgYW5kIGxlZnRvdmVyIGFyZ3VtZW50cwogICAgICAgIChwb3NzaWJseSBhZGp1c3RlZCwgcG9zc2libHkgY29tcGxldGVseSBuZXcgLS0gd2hhdGV2ZXIgeW91CiAgICAgICAgbGlrZSkuICBEZWZhdWx0IGltcGxlbWVudGF0aW9uIGp1c3QgcmV0dXJucyB0aGUgcGFzc2VkLWluCiAgICAgICAgdmFsdWVzOyBzdWJjbGFzc2VzIG1heSBvdmVycmlkZSBhcyBkZXNpcmVkLgogICAgICAgICIiIgogICAgICAgIHJldHVybiAodmFsdWVzLCBhcmdzKQoKICAgIGRlZiBfcHJvY2Vzc19hcmdzKHNlbGYsIGxhcmdzLCByYXJncywgdmFsdWVzKToKICAgICAgICAiIiJfcHJvY2Vzc19hcmdzKGxhcmdzIDogW3N0cmluZ10sCiAgICAgICAgICAgICAgICAgICAgICAgICByYXJncyA6IFtzdHJpbmddLAogICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzIDogVmFsdWVzKQoKICAgICAgICBQcm9jZXNzIGNvbW1hbmQtbGluZSBhcmd1bWVudHMgYW5kIHBvcHVsYXRlICd2YWx1ZXMnLCBjb25zdW1pbmcKICAgICAgICBvcHRpb25zIGFuZCBhcmd1bWVudHMgZnJvbSAncmFyZ3MnLiAgSWYgJ2FsbG93X2ludGVyc3BlcnNlZF9hcmdzJyBpcwogICAgICAgIGZhbHNlLCBzdG9wIGF0IHRoZSBmaXJzdCBub24tb3B0aW9uIGFyZ3VtZW50LiAgSWYgdHJ1ZSwgYWNjdW11bGF0ZSBhbnkKICAgICAgICBpbnRlcnNwZXJzZWQgbm9uLW9wdGlvbiBhcmd1bWVudHMgaW4gJ2xhcmdzJy4KICAgICAgICAiIiIKICAgICAgICB3aGlsZSByYXJnczoKICAgICAgICAgICAgYXJnID0gcmFyZ3NbMF0KICAgICAgICAgICAgIyBXZSBoYW5kbGUgYmFyZSAiLS0iIGV4cGxpY2l0bHksIGFuZCBiYXJlICItIiBpcyBoYW5kbGVkIGJ5IHRoZQogICAgICAgICAgICAjIHN0YW5kYXJkIGFyZyBoYW5kbGVyIHNpbmNlIHRoZSBzaG9ydCBhcmcgY2FzZSBlbnN1cmVzIHRoYXQgdGhlCiAgICAgICAgICAgICMgbGVuIG9mIHRoZSBvcHQgc3RyaW5nIGlzIGdyZWF0ZXIgdGhhbiAxLgogICAgICAgICAgICBpZiBhcmcgPT0gIi0tIjoKICAgICAgICAgICAgICAgIGRlbCByYXJnc1swXQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVsaWYgYXJnWzA6Ml0gPT0gIi0tIjoKICAgICAgICAgICAgICAgICMgcHJvY2VzcyBhIHNpbmdsZSBsb25nIG9wdGlvbiAocG9zc2libHkgd2l0aCB2YWx1ZShzKSkKICAgICAgICAgICAgICAgIHNlbGYuX3Byb2Nlc3NfbG9uZ19vcHQocmFyZ3MsIHZhbHVlcykKICAgICAgICAgICAgZWxpZiBhcmdbOjFdID09ICItIiBhbmQgbGVuKGFyZykgPiAxOgogICAgICAgICAgICAgICAgIyBwcm9jZXNzIGEgY2x1c3RlciBvZiBzaG9ydCBvcHRpb25zIChwb3NzaWJseSB3aXRoCiAgICAgICAgICAgICAgICAjIHZhbHVlKHMpIGZvciB0aGUgbGFzdCBvbmUgb25seSkKICAgICAgICAgICAgICAgIHNlbGYuX3Byb2Nlc3Nfc2hvcnRfb3B0cyhyYXJncywgdmFsdWVzKQogICAgICAgICAgICBlbGlmIHNlbGYuYWxsb3dfaW50ZXJzcGVyc2VkX2FyZ3M6CiAgICAgICAgICAgICAgICBsYXJncy5hcHBlbmQoYXJnKQogICAgICAgICAgICAgICAgZGVsIHJhcmdzWzBdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gICAgICAgICAgICAgICAgICAjIHN0b3Agbm93LCBsZWF2ZSB0aGlzIGFyZyBpbiByYXJncwoKICAgICAgICAjIFNheSB0aGlzIGlzIHRoZSBvcmlnaW5hbCBhcmd1bWVudCBsaXN0OgogICAgICAgICMgW2FyZzAsIGFyZzEsIC4uLiwgYXJnKGktMSksIGFyZyhpKSwgYXJnKGkrMSksIC4uLiwgYXJnKE4tMSldCiAgICAgICAgIyAgICAgICAgICAgICAgICAgICAgICAgICAgICBeCiAgICAgICAgIyAod2UgYXJlIGFib3V0IHRvIHByb2Nlc3MgYXJnKGkpKS4KICAgICAgICAjCiAgICAgICAgIyBUaGVuIHJhcmdzIGlzIFthcmcoaSksIC4uLiwgYXJnKE4tMSldIGFuZCBsYXJncyBpcyBhICpzdWJzZXQqIG9mCiAgICAgICAgIyBbYXJnMCwgLi4uLCBhcmcoaS0xKV0gKGFueSBvcHRpb25zIGFuZCB0aGVpciBhcmd1bWVudHMgd2lsbCBoYXZlCiAgICAgICAgIyBiZWVuIHJlbW92ZWQgZnJvbSBsYXJncykuCiAgICAgICAgIwogICAgICAgICMgVGhlIHdoaWxlIGxvb3Agd2lsbCB1c3VhbGx5IGNvbnN1bWUgMSBvciBtb3JlIGFyZ3VtZW50cyBwZXIgcGFzcy4KICAgICAgICAjIElmIGl0IGNvbnN1bWVzIDEgKGVnLiBhcmcgaXMgYW4gb3B0aW9uIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRzKSwKICAgICAgICAjIHRoZW4gYWZ0ZXIgX3Byb2Nlc3NfYXJnKCkgaXMgZG9uZSB0aGUgc2l0dWF0aW9uIGlzOgogICAgICAgICMKICAgICAgICAjICAgbGFyZ3MgPSBzdWJzZXQgb2YgW2FyZzAsIC4uLiwgYXJnKGkpXQogICAgICAgICMgICByYXJncyA9IFthcmcoaSsxKSwgLi4uLCBhcmcoTi0xKV0KICAgICAgICAjCiAgICAgICAgIyBJZiBhbGxvd19pbnRlcnNwZXJzZWRfYXJncyBpcyBmYWxzZSwgbGFyZ3Mgd2lsbCBhbHdheXMgYmUKICAgICAgICAjICplbXB0eSogLS0gc3RpbGwgYSBzdWJzZXQgb2YgW2FyZzAsIC4uLiwgYXJnKGktMSldLCBidXQKICAgICAgICAjIG5vdCBhIHZlcnkgaW50ZXJlc3Rpbmcgc3Vic2V0IQoKICAgIGRlZiBfbWF0Y2hfbG9uZ19vcHQoc2VsZiwgb3B0KToKICAgICAgICAiIiJfbWF0Y2hfbG9uZ19vcHQob3B0IDogc3RyaW5nKSAtPiBzdHJpbmcKCiAgICAgICAgRGV0ZXJtaW5lIHdoaWNoIGxvbmcgb3B0aW9uIHN0cmluZyAnb3B0JyBtYXRjaGVzLCBpZS4gd2hpY2ggb25lCiAgICAgICAgaXQgaXMgYW4gdW5hbWJpZ3VvdXMgYWJicmV2YXRpb24gZm9yLiAgUmFpc2VzIEJhZE9wdGlvbkVycm9yIGlmCiAgICAgICAgJ29wdCcgZG9lc24ndCB1bmFtYmlndW91c2x5IG1hdGNoIGFueSBsb25nIG9wdGlvbiBzdHJpbmcuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIF9tYXRjaF9hYmJyZXYob3B0LCBzZWxmLl9sb25nX29wdCkKCiAgICBkZWYgX3Byb2Nlc3NfbG9uZ19vcHQoc2VsZiwgcmFyZ3MsIHZhbHVlcyk6CiAgICAgICAgYXJnID0gcmFyZ3MucG9wKDApCgogICAgICAgICMgVmFsdWUgZXhwbGljaXRseSBhdHRhY2hlZCB0byBhcmc/ICBQcmV0ZW5kIGl0J3MgdGhlIG5leHQKICAgICAgICAjIGFyZ3VtZW50LgogICAgICAgIGlmICI9IiBpbiBhcmc6CiAgICAgICAgICAgIChvcHQsIG5leHRfYXJnKSA9IGFyZy5zcGxpdCgiPSIsIDEpCiAgICAgICAgICAgIHJhcmdzLmluc2VydCgwLCBuZXh0X2FyZykKICAgICAgICAgICAgaGFkX2V4cGxpY2l0X3ZhbHVlID0gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9wdCA9IGFyZwogICAgICAgICAgICBoYWRfZXhwbGljaXRfdmFsdWUgPSBGYWxzZQoKICAgICAgICBvcHQgPSBzZWxmLl9tYXRjaF9sb25nX29wdChvcHQpCiAgICAgICAgb3B0aW9uID0gc2VsZi5fbG9uZ19vcHRbb3B0XQogICAgICAgIGlmIG9wdGlvbi50YWtlc192YWx1ZSgpOgogICAgICAgICAgICBuYXJncyA9IG9wdGlvbi5uYXJncwogICAgICAgICAgICBpZiBsZW4ocmFyZ3MpIDwgbmFyZ3M6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yKG5nZXR0ZXh0KAogICAgICAgICAgICAgICAgICAgICIlKG9wdGlvbilzIG9wdGlvbiByZXF1aXJlcyAlKG51bWJlcilkIGFyZ3VtZW50IiwKICAgICAgICAgICAgICAgICAgICAiJShvcHRpb24pcyBvcHRpb24gcmVxdWlyZXMgJShudW1iZXIpZCBhcmd1bWVudHMiLAogICAgICAgICAgICAgICAgICAgIG5hcmdzKSAlIHsib3B0aW9uIjogb3B0LCAibnVtYmVyIjogbmFyZ3N9KQogICAgICAgICAgICBlbGlmIG5hcmdzID09IDE6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhcmdzLnBvcCgwKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdmFsdWUgPSB0dXBsZShyYXJnc1swOm5hcmdzXSkKICAgICAgICAgICAgICAgIGRlbCByYXJnc1swOm5hcmdzXQoKICAgICAgICBlbGlmIGhhZF9leHBsaWNpdF92YWx1ZToKICAgICAgICAgICAgc2VsZi5lcnJvcihfKCIlcyBvcHRpb24gZG9lcyBub3QgdGFrZSBhIHZhbHVlIikgJSBvcHQpCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHZhbHVlID0gTm9uZQoKICAgICAgICBvcHRpb24ucHJvY2VzcyhvcHQsIHZhbHVlLCB2YWx1ZXMsIHNlbGYpCgogICAgZGVmIF9wcm9jZXNzX3Nob3J0X29wdHMoc2VsZiwgcmFyZ3MsIHZhbHVlcyk6CiAgICAgICAgYXJnID0gcmFyZ3MucG9wKDApCiAgICAgICAgc3RvcCA9IEZhbHNlCiAgICAgICAgaSA9IDEKICAgICAgICBmb3IgY2ggaW4gYXJnWzE6XToKICAgICAgICAgICAgb3B0ID0gIi0iICsgY2gKICAgICAgICAgICAgb3B0aW9uID0gc2VsZi5fc2hvcnRfb3B0LmdldChvcHQpCiAgICAgICAgICAgIGkgKz0gMSAgICAgICAgICAgICAgICAgICAgICAjIHdlIGhhdmUgY29uc3VtZWQgYSBjaGFyYWN0ZXIKCiAgICAgICAgICAgIGlmIG5vdCBvcHRpb246CiAgICAgICAgICAgICAgICByYWlzZSBCYWRPcHRpb25FcnJvcihvcHQpCiAgICAgICAgICAgIGlmIG9wdGlvbi50YWtlc192YWx1ZSgpOgogICAgICAgICAgICAgICAgIyBBbnkgY2hhcmFjdGVycyBsZWZ0IGluIGFyZz8gIFByZXRlbmQgdGhleSdyZSB0aGUKICAgICAgICAgICAgICAgICMgbmV4dCBhcmcsIGFuZCBzdG9wIGNvbnN1bWluZyBjaGFyYWN0ZXJzIG9mIGFyZy4KICAgICAgICAgICAgICAgIGlmIGkgPCBsZW4oYXJnKToKICAgICAgICAgICAgICAgICAgICByYXJncy5pbnNlcnQoMCwgYXJnW2k6XSkKICAgICAgICAgICAgICAgICAgICBzdG9wID0gVHJ1ZQoKICAgICAgICAgICAgICAgIG5hcmdzID0gb3B0aW9uLm5hcmdzCiAgICAgICAgICAgICAgICBpZiBsZW4ocmFyZ3MpIDwgbmFyZ3M6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvcihuZ2V0dGV4dCgKICAgICAgICAgICAgICAgICAgICAgICAgIiUob3B0aW9uKXMgb3B0aW9uIHJlcXVpcmVzICUobnVtYmVyKWQgYXJndW1lbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiJShvcHRpb24pcyBvcHRpb24gcmVxdWlyZXMgJShudW1iZXIpZCBhcmd1bWVudHMiLAogICAgICAgICAgICAgICAgICAgICAgICBuYXJncykgJSB7Im9wdGlvbiI6IG9wdCwgIm51bWJlciI6IG5hcmdzfSkKICAgICAgICAgICAgICAgIGVsaWYgbmFyZ3MgPT0gMToKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhcmdzLnBvcCgwKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHR1cGxlKHJhcmdzWzA6bmFyZ3NdKQogICAgICAgICAgICAgICAgICAgIGRlbCByYXJnc1swOm5hcmdzXQoKICAgICAgICAgICAgZWxzZTogICAgICAgICAgICAgICAgICAgICAgICMgb3B0aW9uIGRvZXNuJ3QgdGFrZSBhIHZhbHVlCiAgICAgICAgICAgICAgICB2YWx1ZSA9IE5vbmUKCiAgICAgICAgICAgIG9wdGlvbi5wcm9jZXNzKG9wdCwgdmFsdWUsIHZhbHVlcywgc2VsZikKCiAgICAgICAgICAgIGlmIHN0b3A6CiAgICAgICAgICAgICAgICBicmVhawoKCiAgICAjIC0tIEZlZWRiYWNrIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBnZXRfcHJvZ19uYW1lKHNlbGYpOgogICAgICAgIGlmIHNlbGYucHJvZyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gb3MucGF0aC5iYXNlbmFtZShzeXMuYXJndlswXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2VsZi5wcm9nCgogICAgZGVmIGV4cGFuZF9wcm9nX25hbWUoc2VsZiwgcyk6CiAgICAgICAgcmV0dXJuIHMucmVwbGFjZSgiJXByb2ciLCBzZWxmLmdldF9wcm9nX25hbWUoKSkKCiAgICBkZWYgZ2V0X2Rlc2NyaXB0aW9uKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmV4cGFuZF9wcm9nX25hbWUoc2VsZi5kZXNjcmlwdGlvbikKCiAgICBkZWYgZXhpdChzZWxmLCBzdGF0dXM9MCwgbXNnPU5vbmUpOgogICAgICAgIGlmIG1zZzoKICAgICAgICAgICAgc3lzLnN0ZGVyci53cml0ZShtc2cpCiAgICAgICAgc3lzLmV4aXQoc3RhdHVzKQoKICAgIGRlZiBlcnJvcihzZWxmLCBtc2cpOgogICAgICAgICIiImVycm9yKG1zZyA6IHN0cmluZykKCiAgICAgICAgUHJpbnQgYSB1c2FnZSBtZXNzYWdlIGluY29ycG9yYXRpbmcgJ21zZycgdG8gc3RkZXJyIGFuZCBleGl0LgogICAgICAgIElmIHlvdSBvdmVycmlkZSB0aGlzIGluIGEgc3ViY2xhc3MsIGl0IHNob3VsZCBub3QgcmV0dXJuIC0tIGl0CiAgICAgICAgc2hvdWxkIGVpdGhlciBleGl0IG9yIHJhaXNlIGFuIGV4Y2VwdGlvbi4KICAgICAgICAiIiIKICAgICAgICBzZWxmLnByaW50X3VzYWdlKHN5cy5zdGRlcnIpCiAgICAgICAgc2VsZi5leGl0KDIsICIlczogZXJyb3I6ICVzXG4iICUgKHNlbGYuZ2V0X3Byb2dfbmFtZSgpLCBtc2cpKQoKICAgIGRlZiBnZXRfdXNhZ2Uoc2VsZik6CiAgICAgICAgaWYgc2VsZi51c2FnZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZm9ybWF0dGVyLmZvcm1hdF91c2FnZSgKICAgICAgICAgICAgICAgIHNlbGYuZXhwYW5kX3Byb2dfbmFtZShzZWxmLnVzYWdlKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIiIKCiAgICBkZWYgcHJpbnRfdXNhZ2Uoc2VsZiwgZmlsZT1Ob25lKToKICAgICAgICAiIiJwcmludF91c2FnZShmaWxlIDogZmlsZSA9IHN0ZG91dCkKCiAgICAgICAgUHJpbnQgdGhlIHVzYWdlIG1lc3NhZ2UgZm9yIHRoZSBjdXJyZW50IHByb2dyYW0gKHNlbGYudXNhZ2UpIHRvCiAgICAgICAgJ2ZpbGUnIChkZWZhdWx0IHN0ZG91dCkuICBBbnkgb2NjdXJyZW5jZSBvZiB0aGUgc3RyaW5nICIlcHJvZyIgaW4KICAgICAgICBzZWxmLnVzYWdlIGlzIHJlcGxhY2VkIHdpdGggdGhlIG5hbWUgb2YgdGhlIGN1cnJlbnQgcHJvZ3JhbQogICAgICAgIChiYXNlbmFtZSBvZiBzeXMuYXJndlswXSkuICBEb2VzIG5vdGhpbmcgaWYgc2VsZi51c2FnZSBpcyBlbXB0eQogICAgICAgIG9yIG5vdCBkZWZpbmVkLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYudXNhZ2U6CiAgICAgICAgICAgIHByaW50KHNlbGYuZ2V0X3VzYWdlKCksIGZpbGU9ZmlsZSkKCiAgICBkZWYgZ2V0X3ZlcnNpb24oc2VsZik6CiAgICAgICAgaWYgc2VsZi52ZXJzaW9uOgogICAgICAgICAgICByZXR1cm4gc2VsZi5leHBhbmRfcHJvZ19uYW1lKHNlbGYudmVyc2lvbikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIiIKCiAgICBkZWYgcHJpbnRfdmVyc2lvbihzZWxmLCBmaWxlPU5vbmUpOgogICAgICAgICIiInByaW50X3ZlcnNpb24oZmlsZSA6IGZpbGUgPSBzdGRvdXQpCgogICAgICAgIFByaW50IHRoZSB2ZXJzaW9uIG1lc3NhZ2UgZm9yIHRoaXMgcHJvZ3JhbSAoc2VsZi52ZXJzaW9uKSB0bwogICAgICAgICdmaWxlJyAoZGVmYXVsdCBzdGRvdXQpLiAgQXMgd2l0aCBwcmludF91c2FnZSgpLCBhbnkgb2NjdXJyZW5jZQogICAgICAgIG9mICIlcHJvZyIgaW4gc2VsZi52ZXJzaW9uIGlzIHJlcGxhY2VkIGJ5IHRoZSBjdXJyZW50IHByb2dyYW0ncwogICAgICAgIG5hbWUuICBEb2VzIG5vdGhpbmcgaWYgc2VsZi52ZXJzaW9uIGlzIGVtcHR5IG9yIHVuZGVmaW5lZC4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLnZlcnNpb246CiAgICAgICAgICAgIHByaW50KHNlbGYuZ2V0X3ZlcnNpb24oKSwgZmlsZT1maWxlKQoKICAgIGRlZiBmb3JtYXRfb3B0aW9uX2hlbHAoc2VsZiwgZm9ybWF0dGVyPU5vbmUpOgogICAgICAgIGlmIGZvcm1hdHRlciBpcyBOb25lOgogICAgICAgICAgICBmb3JtYXR0ZXIgPSBzZWxmLmZvcm1hdHRlcgogICAgICAgIGZvcm1hdHRlci5zdG9yZV9vcHRpb25fc3RyaW5ncyhzZWxmKQogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgcmVzdWx0LmFwcGVuZChmb3JtYXR0ZXIuZm9ybWF0X2hlYWRpbmcoXygiT3B0aW9ucyIpKSkKICAgICAgICBmb3JtYXR0ZXIuaW5kZW50KCkKICAgICAgICBpZiBzZWxmLm9wdGlvbl9saXN0OgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKE9wdGlvbkNvbnRhaW5lci5mb3JtYXRfb3B0aW9uX2hlbHAoc2VsZiwgZm9ybWF0dGVyKSkKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgiXG4iKQogICAgICAgIGZvciBncm91cCBpbiBzZWxmLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoZ3JvdXAuZm9ybWF0X2hlbHAoZm9ybWF0dGVyKSkKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgiXG4iKQogICAgICAgIGZvcm1hdHRlci5kZWRlbnQoKQogICAgICAgICMgRHJvcCB0aGUgbGFzdCAiXG4iLCBvciB0aGUgaGVhZGVyIGlmIG5vIG9wdGlvbnMgb3Igb3B0aW9uIGdyb3VwczoKICAgICAgICByZXR1cm4gIiIuam9pbihyZXN1bHRbOi0xXSkKCiAgICBkZWYgZm9ybWF0X2VwaWxvZyhzZWxmLCBmb3JtYXR0ZXIpOgogICAgICAgIHJldHVybiBmb3JtYXR0ZXIuZm9ybWF0X2VwaWxvZyhzZWxmLmVwaWxvZykKCiAgICBkZWYgZm9ybWF0X2hlbHAoc2VsZiwgZm9ybWF0dGVyPU5vbmUpOgogICAgICAgIGlmIGZvcm1hdHRlciBpcyBOb25lOgogICAgICAgICAgICBmb3JtYXR0ZXIgPSBzZWxmLmZvcm1hdHRlcgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaWYgc2VsZi51c2FnZToKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChzZWxmLmdldF91c2FnZSgpICsgIlxuIikKICAgICAgICBpZiBzZWxmLmRlc2NyaXB0aW9uOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKHNlbGYuZm9ybWF0X2Rlc2NyaXB0aW9uKGZvcm1hdHRlcikgKyAiXG4iKQogICAgICAgIHJlc3VsdC5hcHBlbmQoc2VsZi5mb3JtYXRfb3B0aW9uX2hlbHAoZm9ybWF0dGVyKSkKICAgICAgICByZXN1bHQuYXBwZW5kKHNlbGYuZm9ybWF0X2VwaWxvZyhmb3JtYXR0ZXIpKQogICAgICAgIHJldHVybiAiIi5qb2luKHJlc3VsdCkKCiAgICBkZWYgcHJpbnRfaGVscChzZWxmLCBmaWxlPU5vbmUpOgogICAgICAgICIiInByaW50X2hlbHAoZmlsZSA6IGZpbGUgPSBzdGRvdXQpCgogICAgICAgIFByaW50IGFuIGV4dGVuZGVkIGhlbHAgbWVzc2FnZSwgbGlzdGluZyBhbGwgb3B0aW9ucyBhbmQgYW55CiAgICAgICAgaGVscCB0ZXh0IHByb3ZpZGVkIHdpdGggdGhlbSwgdG8gJ2ZpbGUnIChkZWZhdWx0IHN0ZG91dCkuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZmlsZSBpcyBOb25lOgogICAgICAgICAgICBmaWxlID0gc3lzLnN0ZG91dAogICAgICAgIGZpbGUud3JpdGUoc2VsZi5mb3JtYXRfaGVscCgpKQoKIyBjbGFzcyBPcHRpb25QYXJzZXIKCgpkZWYgX21hdGNoX2FiYnJldihzLCB3b3JkbWFwKToKICAgICIiIl9tYXRjaF9hYmJyZXYocyA6IHN0cmluZywgd29yZG1hcCA6IHtzdHJpbmcgOiBPcHRpb259KSAtPiBzdHJpbmcKCiAgICBSZXR1cm4gdGhlIHN0cmluZyBrZXkgaW4gJ3dvcmRtYXAnIGZvciB3aGljaCAncycgaXMgYW4gdW5hbWJpZ3VvdXMKICAgIGFiYnJldmlhdGlvbi4gIElmICdzJyBpcyBmb3VuZCB0byBiZSBhbWJpZ3VvdXMgb3IgZG9lc24ndCBtYXRjaCBhbnkgb2YKICAgICd3b3JkcycsIHJhaXNlIEJhZE9wdGlvbkVycm9yLgogICAgIiIiCiAgICAjIElzIHRoZXJlIGFuIGV4YWN0IG1hdGNoPwogICAgaWYgcyBpbiB3b3JkbWFwOgogICAgICAgIHJldHVybiBzCiAgICBlbHNlOgogICAgICAgICMgSXNvbGF0ZSBhbGwgd29yZHMgd2l0aCBzIGFzIGEgcHJlZml4LgogICAgICAgIHBvc3NpYmlsaXRpZXMgPSBbd29yZCBmb3Igd29yZCBpbiB3b3JkbWFwLmtleXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgaWYgd29yZC5zdGFydHN3aXRoKHMpXQogICAgICAgICMgTm8gZXhhY3QgbWF0Y2gsIHNvIHRoZXJlIGhhZCBiZXR0ZXIgYmUganVzdCBvbmUgcG9zc2liaWxpdHkuCiAgICAgICAgaWYgbGVuKHBvc3NpYmlsaXRpZXMpID09IDE6CiAgICAgICAgICAgIHJldHVybiBwb3NzaWJpbGl0aWVzWzBdCiAgICAgICAgZWxpZiBub3QgcG9zc2liaWxpdGllczoKICAgICAgICAgICAgcmFpc2UgQmFkT3B0aW9uRXJyb3IocykKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIE1vcmUgdGhhbiBvbmUgcG9zc2libGUgY29tcGxldGlvbjogYW1iaWd1b3VzIHByZWZpeC4KICAgICAgICAgICAgcG9zc2liaWxpdGllcy5zb3J0KCkKICAgICAgICAgICAgcmFpc2UgQW1iaWd1b3VzT3B0aW9uRXJyb3IocywgcG9zc2liaWxpdGllcykKCgojIFNvbWUgZGF5LCB0aGVyZSBtaWdodCBiZSBtYW55IE9wdGlvbiBjbGFzc2VzLiAgQXMgb2YgT3B0aWsgMS4zLCB0aGUKIyBwcmVmZXJyZWQgd2F5IHRvIGluc3RhbnRpYXRlIE9wdGlvbnMgaXMgaW5kaXJlY3RseSwgdmlhIG1ha2Vfb3B0aW9uKCksCiMgd2hpY2ggd2lsbCBiZWNvbWUgYSBmYWN0b3J5IGZ1bmN0aW9uIHdoZW4gdGhlcmUgYXJlIG1hbnkgT3B0aW9uCiMgY2xhc3Nlcy4KbWFrZV9vcHRpb24gPSBPcHRpb24K',
'/Lib/base64.py':'IyEgL3Vzci9iaW4vcHl0aG9uMy4zCgoiIiJSRkMgMzU0ODogQmFzZTE2LCBCYXNlMzIsIEJhc2U2NCBEYXRhIEVuY29kaW5ncyIiIgoKIyBNb2RpZmllZCAwNC1PY3QtMTk5NSBieSBKYWNrIEphbnNlbiB0byB1c2UgYmluYXNjaWkgbW9kdWxlCiMgTW9kaWZpZWQgMzAtRGVjLTIwMDMgYnkgQmFycnkgV2Fyc2F3IHRvIGFkZCBmdWxsIFJGQyAzNTQ4IHN1cHBvcnQKIyBNb2RpZmllZCAyMi1NYXktMjAwNyBieSBHdWlkbyB2YW4gUm9zc3VtIHRvIHVzZSBieXRlcyBldmVyeXdoZXJlCgppbXBvcnQgcmUKaW1wb3J0IHN0cnVjdAppbXBvcnQgYmluYXNjaWkKCgpfX2FsbF9fID0gWwogICAgIyBMZWdhY3kgaW50ZXJmYWNlIGV4cG9ydHMgdHJhZGl0aW9uYWwgUkZDIDE1MjEgQmFzZTY0IGVuY29kaW5ncwogICAgJ2VuY29kZScsICdkZWNvZGUnLCAnZW5jb2RlYnl0ZXMnLCAnZGVjb2RlYnl0ZXMnLAogICAgIyBHZW5lcmFsaXplZCBpbnRlcmZhY2UgZm9yIG90aGVyIGVuY29kaW5ncwogICAgJ2I2NGVuY29kZScsICdiNjRkZWNvZGUnLCAnYjMyZW5jb2RlJywgJ2IzMmRlY29kZScsCiAgICAnYjE2ZW5jb2RlJywgJ2IxNmRlY29kZScsCiAgICAjIFN0YW5kYXJkIEJhc2U2NCBlbmNvZGluZwogICAgJ3N0YW5kYXJkX2I2NGVuY29kZScsICdzdGFuZGFyZF9iNjRkZWNvZGUnLAogICAgIyBTb21lIGNvbW1vbiBCYXNlNjQgYWx0ZXJuYXRpdmVzLiAgQXMgcmVmZXJlbmNlZCBieSBSRkMgMzQ1OCwgc2VlIHRocmVhZAogICAgIyBzdGFydGluZyBhdDoKICAgICMKICAgICMgaHR0cDovL3pncC5vcmcvcGlwZXJtYWlsL3AycC1oYWNrZXJzLzIwMDEtU2VwdGVtYmVyLzAwMDMxNi5odG1sCiAgICAndXJsc2FmZV9iNjRlbmNvZGUnLCAndXJsc2FmZV9iNjRkZWNvZGUnLAogICAgXQoKCmJ5dGVzX3R5cGVzID0gKGJ5dGVzLCBieXRlYXJyYXkpICAjIFR5cGVzIGFjY2VwdGFibGUgYXMgYmluYXJ5IGRhdGEKCmRlZiBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShzKToKICAgIGlmIGlzaW5zdGFuY2Uocywgc3RyKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBzLmVuY29kZSgnYXNjaWknKQogICAgICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ3N0cmluZyBhcmd1bWVudCBzaG91bGQgY29udGFpbiBvbmx5IEFTQ0lJIGNoYXJhY3RlcnMnKQogICAgZWxpZiBpc2luc3RhbmNlKHMsIGJ5dGVzX3R5cGVzKToKICAgICAgICByZXR1cm4gcwogICAgZWxzZToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoImFyZ3VtZW50IHNob3VsZCBiZSBieXRlcyBvciBBU0NJSSBzdHJpbmcsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKCgoKIyBCYXNlNjQgZW5jb2RpbmcvZGVjb2RpbmcgdXNlcyBiaW5hc2NpaQoKZGVmIGI2NGVuY29kZShzLCBhbHRjaGFycz1Ob25lKToKICAgICIiIkVuY29kZSBhIGJ5dGUgc3RyaW5nIHVzaW5nIEJhc2U2NC4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBlbmNvZGUuICBPcHRpb25hbCBhbHRjaGFycyBtdXN0IGJlIGEgYnl0ZQogICAgc3RyaW5nIG9mIGxlbmd0aCAyIHdoaWNoIHNwZWNpZmllcyBhbiBhbHRlcm5hdGl2ZSBhbHBoYWJldCBmb3IgdGhlCiAgICAnKycgYW5kICcvJyBjaGFyYWN0ZXJzLiAgVGhpcyBhbGxvd3MgYW4gYXBwbGljYXRpb24gdG8KICAgIGUuZy4gZ2VuZXJhdGUgdXJsIG9yIGZpbGVzeXN0ZW0gc2FmZSBCYXNlNjQgc3RyaW5ncy4KCiAgICBUaGUgZW5jb2RlZCBieXRlIHN0cmluZyBpcyByZXR1cm5lZC4KICAgICIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgICMgU3RyaXAgb2ZmIHRoZSB0cmFpbGluZyBuZXdsaW5lCiAgICBlbmNvZGVkID0gYmluYXNjaWkuYjJhX2Jhc2U2NChzKVs6LTFdCiAgICBpZiBhbHRjaGFycyBpcyBub3QgTm9uZToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhbHRjaGFycywgYnl0ZXNfdHlwZXMpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImV4cGVjdGVkIGJ5dGVzLCBub3QgJXMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAlIGFsdGNoYXJzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgICAgICBhc3NlcnQgbGVuKGFsdGNoYXJzKSA9PSAyLCByZXByKGFsdGNoYXJzKQogICAgICAgIHJldHVybiBlbmNvZGVkLnRyYW5zbGF0ZShieXRlcy5tYWtldHJhbnMoYicrLycsIGFsdGNoYXJzKSkKICAgIHJldHVybiBlbmNvZGVkCgoKZGVmIGI2NGRlY29kZShzLCBhbHRjaGFycz1Ob25lLCB2YWxpZGF0ZT1GYWxzZSk6CiAgICAiIiJEZWNvZGUgYSBCYXNlNjQgZW5jb2RlZCBieXRlIHN0cmluZy4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBkZWNvZGUuICBPcHRpb25hbCBhbHRjaGFycyBtdXN0IGJlIGEKICAgIHN0cmluZyBvZiBsZW5ndGggMiB3aGljaCBzcGVjaWZpZXMgdGhlIGFsdGVybmF0aXZlIGFscGhhYmV0IHVzZWQKICAgIGluc3RlYWQgb2YgdGhlICcrJyBhbmQgJy8nIGNoYXJhY3RlcnMuCgogICAgVGhlIGRlY29kZWQgc3RyaW5nIGlzIHJldHVybmVkLiAgQSBiaW5hc2NpaS5FcnJvciBpcyByYWlzZWQgaWYgcyBpcwogICAgaW5jb3JyZWN0bHkgcGFkZGVkLgoKICAgIElmIHZhbGlkYXRlIGlzIEZhbHNlICh0aGUgZGVmYXVsdCksIG5vbi1iYXNlNjQtYWxwaGFiZXQgY2hhcmFjdGVycyBhcmUKICAgIGRpc2NhcmRlZCBwcmlvciB0byB0aGUgcGFkZGluZyBjaGVjay4gIElmIHZhbGlkYXRlIGlzIFRydWUsCiAgICBub24tYmFzZTY0LWFscGhhYmV0IGNoYXJhY3RlcnMgaW4gdGhlIGlucHV0IHJlc3VsdCBpbiBhIGJpbmFzY2lpLkVycm9yLgogICAgIiIiCiAgICBzID0gX2J5dGVzX2Zyb21fZGVjb2RlX2RhdGEocykKICAgIGlmIGFsdGNoYXJzIGlzIG5vdCBOb25lOgogICAgICAgIGFsdGNoYXJzID0gX2J5dGVzX2Zyb21fZGVjb2RlX2RhdGEoYWx0Y2hhcnMpCiAgICAgICAgYXNzZXJ0IGxlbihhbHRjaGFycykgPT0gMiwgcmVwcihhbHRjaGFycykKICAgICAgICBzID0gcy50cmFuc2xhdGUoYnl0ZXMubWFrZXRyYW5zKGFsdGNoYXJzLCBiJysvJykpCiAgICBpZiB2YWxpZGF0ZSBhbmQgbm90IHJlLm1hdGNoKGInXltBLVphLXowLTkrL10qPXswLDJ9JCcsIHMpOgogICAgICAgIHJhaXNlIGJpbmFzY2lpLkVycm9yKCdOb24tYmFzZTY0IGRpZ2l0IGZvdW5kJykKICAgIHJldHVybiBiaW5hc2NpaS5hMmJfYmFzZTY0KHMpCgoKZGVmIHN0YW5kYXJkX2I2NGVuY29kZShzKToKICAgICIiIkVuY29kZSBhIGJ5dGUgc3RyaW5nIHVzaW5nIHRoZSBzdGFuZGFyZCBCYXNlNjQgYWxwaGFiZXQuCgogICAgcyBpcyB0aGUgYnl0ZSBzdHJpbmcgdG8gZW5jb2RlLiAgVGhlIGVuY29kZWQgYnl0ZSBzdHJpbmcgaXMgcmV0dXJuZWQuCiAgICAiIiIKICAgIHJldHVybiBiNjRlbmNvZGUocykKCmRlZiBzdGFuZGFyZF9iNjRkZWNvZGUocyk6CiAgICAiIiJEZWNvZGUgYSBieXRlIHN0cmluZyBlbmNvZGVkIHdpdGggdGhlIHN0YW5kYXJkIEJhc2U2NCBhbHBoYWJldC4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBkZWNvZGUuICBUaGUgZGVjb2RlZCBieXRlIHN0cmluZyBpcwogICAgcmV0dXJuZWQuICBiaW5hc2NpaS5FcnJvciBpcyByYWlzZWQgaWYgdGhlIGlucHV0IGlzIGluY29ycmVjdGx5CiAgICBwYWRkZWQgb3IgaWYgdGhlcmUgYXJlIG5vbi1hbHBoYWJldCBjaGFyYWN0ZXJzIHByZXNlbnQgaW4gdGhlCiAgICBpbnB1dC4KICAgICIiIgogICAgcmV0dXJuIGI2NGRlY29kZShzKQoKI2ZpeG1lIGJyeXRob24KI191cmxzYWZlX2VuY29kZV90cmFuc2xhdGlvbiA9IGJ5dGVzLm1ha2V0cmFucyhiJysvJywgYictXycpCiNfdXJsc2FmZV9kZWNvZGVfdHJhbnNsYXRpb24gPSBieXRlcy5tYWtldHJhbnMoYictXycsIGInKy8nKQoKZGVmIHVybHNhZmVfYjY0ZW5jb2RlKHMpOgogICAgIiIiRW5jb2RlIGEgYnl0ZSBzdHJpbmcgdXNpbmcgYSB1cmwtc2FmZSBCYXNlNjQgYWxwaGFiZXQuCgogICAgcyBpcyB0aGUgYnl0ZSBzdHJpbmcgdG8gZW5jb2RlLiAgVGhlIGVuY29kZWQgYnl0ZSBzdHJpbmcgaXMKICAgIHJldHVybmVkLiAgVGhlIGFscGhhYmV0IHVzZXMgJy0nIGluc3RlYWQgb2YgJysnIGFuZCAnXycgaW5zdGVhZCBvZgogICAgJy8nLgogICAgIiIiCiAgICByZXR1cm4gYjY0ZW5jb2RlKHMpLnRyYW5zbGF0ZShfdXJsc2FmZV9lbmNvZGVfdHJhbnNsYXRpb24pCgpkZWYgdXJsc2FmZV9iNjRkZWNvZGUocyk6CiAgICAiIiJEZWNvZGUgYSBieXRlIHN0cmluZyBlbmNvZGVkIHdpdGggdGhlIHN0YW5kYXJkIEJhc2U2NCBhbHBoYWJldC4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBkZWNvZGUuICBUaGUgZGVjb2RlZCBieXRlIHN0cmluZyBpcwogICAgcmV0dXJuZWQuICBiaW5hc2NpaS5FcnJvciBpcyByYWlzZWQgaWYgdGhlIGlucHV0IGlzIGluY29ycmVjdGx5CiAgICBwYWRkZWQgb3IgaWYgdGhlcmUgYXJlIG5vbi1hbHBoYWJldCBjaGFyYWN0ZXJzIHByZXNlbnQgaW4gdGhlCiAgICBpbnB1dC4KCiAgICBUaGUgYWxwaGFiZXQgdXNlcyAnLScgaW5zdGVhZCBvZiAnKycgYW5kICdfJyBpbnN0ZWFkIG9mICcvJy4KICAgICIiIgogICAgcyA9IF9ieXRlc19mcm9tX2RlY29kZV9kYXRhKHMpCiAgICBzID0gcy50cmFuc2xhdGUoX3VybHNhZmVfZGVjb2RlX3RyYW5zbGF0aW9uKQogICAgcmV0dXJuIGI2NGRlY29kZShzKQoKCgojIEJhc2UzMiBlbmNvZGluZy9kZWNvZGluZyBtdXN0IGJlIGRvbmUgaW4gUHl0aG9uCl9iMzJhbHBoYWJldCA9IHsKICAgIDA6IGInQScsICA5OiBiJ0onLCAxODogYidTJywgMjc6IGInMycsCiAgICAxOiBiJ0InLCAxMDogYidLJywgMTk6IGInVCcsIDI4OiBiJzQnLAogICAgMjogYidDJywgMTE6IGInTCcsIDIwOiBiJ1UnLCAyOTogYic1JywKICAgIDM6IGInRCcsIDEyOiBiJ00nLCAyMTogYidWJywgMzA6IGInNicsCiAgICA0OiBiJ0UnLCAxMzogYidOJywgMjI6IGInVycsIDMxOiBiJzcnLAogICAgNTogYidGJywgMTQ6IGInTycsIDIzOiBiJ1gnLAogICAgNjogYidHJywgMTU6IGInUCcsIDI0OiBiJ1knLAogICAgNzogYidIJywgMTY6IGInUScsIDI1OiBiJ1onLAogICAgODogYidJJywgMTc6IGInUicsIDI2OiBiJzInLAogICAgfQoKI2ZpeG1lIGJyeXRob24KI19iMzJ0YWIgPSBbdlswXSBmb3IgaywgdiBpbiBzb3J0ZWQoX2IzMmFscGhhYmV0Lml0ZW1zKCkpXQojX2IzMnJldiA9IGRpY3QoWyh2WzBdLCBrKSBmb3IgaywgdiBpbiBfYjMyYWxwaGFiZXQuaXRlbXMoKV0pCgoKZGVmIGIzMmVuY29kZShzKToKICAgICIiIkVuY29kZSBhIGJ5dGUgc3RyaW5nIHVzaW5nIEJhc2UzMi4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBlbmNvZGUuICBUaGUgZW5jb2RlZCBieXRlIHN0cmluZyBpcyByZXR1cm5lZC4KICAgICIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgIHF1YW50YSwgbGVmdG92ZXIgPSBkaXZtb2QobGVuKHMpLCA1KQogICAgIyBQYWQgdGhlIGxhc3QgcXVhbnR1bSB3aXRoIHplcm8gYml0cyBpZiBuZWNlc3NhcnkKICAgIGlmIGxlZnRvdmVyOgogICAgICAgIHMgPSBzICsgYnl0ZXMoNSAtIGxlZnRvdmVyKSAgIyBEb24ndCB1c2UgKz0gIQogICAgICAgIHF1YW50YSArPSAxCiAgICBlbmNvZGVkID0gYnl0ZXMoKQogICAgZm9yIGkgaW4gcmFuZ2UocXVhbnRhKToKICAgICAgICAjIGMxIGFuZCBjMiBhcmUgMTYgYml0cyB3aWRlLCBjMyBpcyA4IGJpdHMgd2lkZS4gIFRoZSBpbnRlbnQgb2YgdGhpcwogICAgICAgICMgY29kZSBpcyB0byBwcm9jZXNzIHRoZSA0MCBiaXRzIGluIHVuaXRzIG9mIDUgYml0cy4gIFNvIHdlIHRha2UgdGhlIDEKICAgICAgICAjIGxlZnRvdmVyIGJpdCBvZiBjMSBhbmQgdGFjayBpdCBvbnRvIGMyLiAgVGhlbiB3ZSB0YWtlIHRoZSAyIGxlZnRvdmVyCiAgICAgICAgIyBiaXRzIG9mIGMyIGFuZCB0YWNrIHRoZW0gb250byBjMy4gIFRoZSBzaGlmdHMgYW5kIG1hc2tzIGFyZSBpbnRlbmRlZAogICAgICAgICMgdG8gZ2l2ZSB1cyB2YWx1ZXMgb2YgZXhhY3RseSA1IGJpdHMgaW4gd2lkdGguCiAgICAgICAgYzEsIGMyLCBjMyA9IHN0cnVjdC51bnBhY2soJyFISEInLCBzW2kqNTooaSsxKSo1XSkKICAgICAgICBjMiArPSAoYzEgJiAxKSA8PCAxNiAjIDE3IGJpdHMgd2lkZQogICAgICAgIGMzICs9IChjMiAmIDMpIDw8IDggICMgMTAgYml0cyB3aWRlCiAgICAgICAgZW5jb2RlZCArPSBieXRlcyhbX2IzMnRhYltjMSA+PiAxMV0sICAgICAgICAgIyBiaXRzIDEgLSA1CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2IzMnRhYlsoYzEgPj4gNikgJiAweDFmXSwgIyBiaXRzIDYgLSAxMAogICAgICAgICAgICAgICAgICAgICAgICAgIF9iMzJ0YWJbKGMxID4+IDEpICYgMHgxZl0sICMgYml0cyAxMSAtIDE1CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2IzMnRhYltjMiA+PiAxMl0sICAgICAgICAgIyBiaXRzIDE2IC0gMjAgKDEgLSA1KQogICAgICAgICAgICAgICAgICAgICAgICAgIF9iMzJ0YWJbKGMyID4+IDcpICYgMHgxZl0sICMgYml0cyAyMSAtIDI1ICg2IC0gMTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2IzMnRhYlsoYzIgPj4gMikgJiAweDFmXSwgIyBiaXRzIDI2IC0gMzAgKDExIC0gMTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2IzMnRhYltjMyA+PiA1XSwgICAgICAgICAgIyBiaXRzIDMxIC0gMzUgKDEgLSA1KQogICAgICAgICAgICAgICAgICAgICAgICAgIF9iMzJ0YWJbYzMgJiAweDFmXSwgICAgICAgICMgYml0cyAzNiAtIDQwICgxIC0gNSkKICAgICAgICAgICAgICAgICAgICAgICAgICBdKQogICAgIyBBZGp1c3QgZm9yIGFueSBsZWZ0b3ZlciBwYXJ0aWFsIHF1YW50YQogICAgaWYgbGVmdG92ZXIgPT0gMToKICAgICAgICByZXR1cm4gZW5jb2RlZFs6LTZdICsgYic9PT09PT0nCiAgICBlbGlmIGxlZnRvdmVyID09IDI6CiAgICAgICAgcmV0dXJuIGVuY29kZWRbOi00XSArIGInPT09PScKICAgIGVsaWYgbGVmdG92ZXIgPT0gMzoKICAgICAgICByZXR1cm4gZW5jb2RlZFs6LTNdICsgYic9PT0nCiAgICBlbGlmIGxlZnRvdmVyID09IDQ6CiAgICAgICAgcmV0dXJuIGVuY29kZWRbOi0xXSArIGInPScKICAgIHJldHVybiBlbmNvZGVkCgoKZGVmIGIzMmRlY29kZShzLCBjYXNlZm9sZD1GYWxzZSwgbWFwMDE9Tm9uZSk6CiAgICAiIiJEZWNvZGUgYSBCYXNlMzIgZW5jb2RlZCBieXRlIHN0cmluZy4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBkZWNvZGUuICBPcHRpb25hbCBjYXNlZm9sZCBpcyBhIGZsYWcKICAgIHNwZWNpZnlpbmcgd2hldGhlciBhIGxvd2VyY2FzZSBhbHBoYWJldCBpcyBhY2NlcHRhYmxlIGFzIGlucHV0LgogICAgRm9yIHNlY3VyaXR5IHB1cnBvc2VzLCB0aGUgZGVmYXVsdCBpcyBGYWxzZS4KCiAgICBSRkMgMzU0OCBhbGxvd3MgZm9yIG9wdGlvbmFsIG1hcHBpbmcgb2YgdGhlIGRpZ2l0IDAgKHplcm8pIHRvIHRoZQogICAgbGV0dGVyIE8gKG9oKSwgYW5kIGZvciBvcHRpb25hbCBtYXBwaW5nIG9mIHRoZSBkaWdpdCAxIChvbmUpIHRvCiAgICBlaXRoZXIgdGhlIGxldHRlciBJIChleWUpIG9yIGxldHRlciBMIChlbCkuICBUaGUgb3B0aW9uYWwgYXJndW1lbnQKICAgIG1hcDAxIHdoZW4gbm90IE5vbmUsIHNwZWNpZmllcyB3aGljaCBsZXR0ZXIgdGhlIGRpZ2l0IDEgc2hvdWxkIGJlCiAgICBtYXBwZWQgdG8gKHdoZW4gbWFwMDEgaXMgbm90IE5vbmUsIHRoZSBkaWdpdCAwIGlzIGFsd2F5cyBtYXBwZWQgdG8KICAgIHRoZSBsZXR0ZXIgTykuICBGb3Igc2VjdXJpdHkgcHVycG9zZXMgdGhlIGRlZmF1bHQgaXMgTm9uZSwgc28gdGhhdAogICAgMCBhbmQgMSBhcmUgbm90IGFsbG93ZWQgaW4gdGhlIGlucHV0LgoKICAgIFRoZSBkZWNvZGVkIGJ5dGUgc3RyaW5nIGlzIHJldHVybmVkLiAgYmluYXNjaWkuRXJyb3IgaXMgcmFpc2VkIGlmCiAgICB0aGUgaW5wdXQgaXMgaW5jb3JyZWN0bHkgcGFkZGVkIG9yIGlmIHRoZXJlIGFyZSBub24tYWxwaGFiZXQKICAgIGNoYXJhY3RlcnMgcHJlc2VudCBpbiB0aGUgaW5wdXQuCiAgICAiIiIKICAgIHMgPSBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShzKQogICAgcXVhbnRhLCBsZWZ0b3ZlciA9IGRpdm1vZChsZW4ocyksIDgpCiAgICBpZiBsZWZ0b3ZlcjoKICAgICAgICByYWlzZSBiaW5hc2NpaS5FcnJvcignSW5jb3JyZWN0IHBhZGRpbmcnKQogICAgIyBIYW5kbGUgc2VjdGlvbiAyLjQgemVybyBhbmQgb25lIG1hcHBpbmcuICBUaGUgZmxhZyBtYXAwMSB3aWxsIGJlIGVpdGhlcgogICAgIyBGYWxzZSwgb3IgdGhlIGNoYXJhY3RlciB0byBtYXAgdGhlIGRpZ2l0IDEgKG9uZSkgdG8uICBJdCBzaG91bGQgYmUKICAgICMgZWl0aGVyIEwgKGVsKSBvciBJIChleWUpLgogICAgaWYgbWFwMDEgaXMgbm90IE5vbmU6CiAgICAgICAgbWFwMDEgPSBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShtYXAwMSkKICAgICAgICBhc3NlcnQgbGVuKG1hcDAxKSA9PSAxLCByZXByKG1hcDAxKQogICAgICAgIHMgPSBzLnRyYW5zbGF0ZShieXRlcy5tYWtldHJhbnMoYicwMScsIGInTycgKyBtYXAwMSkpCiAgICBpZiBjYXNlZm9sZDoKICAgICAgICBzID0gcy51cHBlcigpCiAgICAjIFN0cmlwIG9mZiBwYWQgY2hhcmFjdGVycyBmcm9tIHRoZSByaWdodC4gIFdlIG5lZWQgdG8gY291bnQgdGhlIHBhZAogICAgIyBjaGFyYWN0ZXJzIGJlY2F1c2UgdGhpcyB3aWxsIHRlbGwgdXMgaG93IG1hbnkgbnVsbCBieXRlcyB0byByZW1vdmUgZnJvbQogICAgIyB0aGUgZW5kIG9mIHRoZSBkZWNvZGVkIHN0cmluZy4KICAgIHBhZGNoYXJzID0gMAogICAgbW8gPSByZS5zZWFyY2goYicoP1A8cGFkPls9XSopJCcsIHMpCiAgICBpZiBtbzoKICAgICAgICBwYWRjaGFycyA9IGxlbihtby5ncm91cCgncGFkJykpCiAgICAgICAgaWYgcGFkY2hhcnMgPiAwOgogICAgICAgICAgICBzID0gc1s6LXBhZGNoYXJzXQogICAgIyBOb3cgZGVjb2RlIHRoZSBmdWxsIHF1YW50YQogICAgcGFydHMgPSBbXQogICAgYWNjID0gMAogICAgc2hpZnQgPSAzNQogICAgZm9yIGMgaW4gczoKICAgICAgICB2YWwgPSBfYjMycmV2LmdldChjKQogICAgICAgIGlmIHZhbCBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ05vbi1iYXNlMzIgZGlnaXQgZm91bmQnKQogICAgICAgIGFjYyArPSBfYjMycmV2W2NdIDw8IHNoaWZ0CiAgICAgICAgc2hpZnQgLT0gNQogICAgICAgIGlmIHNoaWZ0IDwgMDoKICAgICAgICAgICAgcGFydHMuYXBwZW5kKGJpbmFzY2lpLnVuaGV4bGlmeShieXRlcygnJTAxMHgnICUgYWNjLCAiYXNjaWkiKSkpCiAgICAgICAgICAgIGFjYyA9IDAKICAgICAgICAgICAgc2hpZnQgPSAzNQogICAgIyBQcm9jZXNzIHRoZSBsYXN0LCBwYXJ0aWFsIHF1YW50YQogICAgbGFzdCA9IGJpbmFzY2lpLnVuaGV4bGlmeShieXRlcygnJTAxMHgnICUgYWNjLCAiYXNjaWkiKSkKICAgIGlmIHBhZGNoYXJzID09IDA6CiAgICAgICAgbGFzdCA9IGInJyAgICAgICAgICAgICAgICAgICAgICAjIE5vIGNoYXJhY3RlcnMKICAgIGVsaWYgcGFkY2hhcnMgPT0gMToKICAgICAgICBsYXN0ID0gbGFzdFs6LTFdCiAgICBlbGlmIHBhZGNoYXJzID09IDM6CiAgICAgICAgbGFzdCA9IGxhc3RbOi0yXQogICAgZWxpZiBwYWRjaGFycyA9PSA0OgogICAgICAgIGxhc3QgPSBsYXN0WzotM10KICAgIGVsaWYgcGFkY2hhcnMgPT0gNjoKICAgICAgICBsYXN0ID0gbGFzdFs6LTRdCiAgICBlbHNlOgogICAgICAgIHJhaXNlIGJpbmFzY2lpLkVycm9yKCdJbmNvcnJlY3QgcGFkZGluZycpCiAgICBwYXJ0cy5hcHBlbmQobGFzdCkKICAgIHJldHVybiBiJycuam9pbihwYXJ0cykKCgoKIyBSRkMgMzU0OCwgQmFzZSAxNiBBbHBoYWJldCBzcGVjaWZpZXMgdXBwZXJjYXNlLCBidXQgaGV4bGlmeSgpIHJldHVybnMKIyBsb3dlcmNhc2UuICBUaGUgUkZDIGFsc28gcmVjb21tZW5kcyBhZ2FpbnN0IGFjY2VwdGluZyBpbnB1dCBjYXNlCiMgaW5zZW5zaXRpdmVseS4KZGVmIGIxNmVuY29kZShzKToKICAgICIiIkVuY29kZSBhIGJ5dGUgc3RyaW5nIHVzaW5nIEJhc2UxNi4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBlbmNvZGUuICBUaGUgZW5jb2RlZCBieXRlIHN0cmluZyBpcyByZXR1cm5lZC4KICAgICIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgIHJldHVybiBiaW5hc2NpaS5oZXhsaWZ5KHMpLnVwcGVyKCkKCgpkZWYgYjE2ZGVjb2RlKHMsIGNhc2Vmb2xkPUZhbHNlKToKICAgICIiIkRlY29kZSBhIEJhc2UxNiBlbmNvZGVkIGJ5dGUgc3RyaW5nLgoKICAgIHMgaXMgdGhlIGJ5dGUgc3RyaW5nIHRvIGRlY29kZS4gIE9wdGlvbmFsIGNhc2Vmb2xkIGlzIGEgZmxhZwogICAgc3BlY2lmeWluZyB3aGV0aGVyIGEgbG93ZXJjYXNlIGFscGhhYmV0IGlzIGFjY2VwdGFibGUgYXMgaW5wdXQuCiAgICBGb3Igc2VjdXJpdHkgcHVycG9zZXMsIHRoZSBkZWZhdWx0IGlzIEZhbHNlLgoKICAgIFRoZSBkZWNvZGVkIGJ5dGUgc3RyaW5nIGlzIHJldHVybmVkLiAgYmluYXNjaWkuRXJyb3IgaXMgcmFpc2VkIGlmCiAgICBzIHdlcmUgaW5jb3JyZWN0bHkgcGFkZGVkIG9yIGlmIHRoZXJlIGFyZSBub24tYWxwaGFiZXQgY2hhcmFjdGVycwogICAgcHJlc2VudCBpbiB0aGUgc3RyaW5nLgogICAgIiIiCiAgICBzID0gX2J5dGVzX2Zyb21fZGVjb2RlX2RhdGEocykKICAgIGlmIGNhc2Vmb2xkOgogICAgICAgIHMgPSBzLnVwcGVyKCkKICAgIGlmIHJlLnNlYXJjaChiJ1teMC05QS1GXScsIHMpOgogICAgICAgIHJhaXNlIGJpbmFzY2lpLkVycm9yKCdOb24tYmFzZTE2IGRpZ2l0IGZvdW5kJykKICAgIHJldHVybiBiaW5hc2NpaS51bmhleGxpZnkocykKCgoKIyBMZWdhY3kgaW50ZXJmYWNlLiAgVGhpcyBjb2RlIGNvdWxkIGJlIGNsZWFuZWQgdXAgc2luY2UgSSBkb24ndCBiZWxpZXZlCiMgYmluYXNjaWkgaGFzIGFueSBsaW5lIGxlbmd0aCBsaW1pdGF0aW9ucy4gIEl0IGp1c3QgZG9lc24ndCBzZWVtIHdvcnRoIGl0CiMgdGhvdWdoLiAgVGhlIGZpbGVzIHNob3VsZCBiZSBvcGVuZWQgaW4gYmluYXJ5IG1vZGUuCgpNQVhMSU5FU0laRSA9IDc2ICMgRXhjbHVkaW5nIHRoZSBDUkxGCk1BWEJJTlNJWkUgPSAoTUFYTElORVNJWkUvLzQpKjMKCmRlZiBlbmNvZGUoaW5wdXQsIG91dHB1dCk6CiAgICAiIiJFbmNvZGUgYSBmaWxlOyBpbnB1dCBhbmQgb3V0cHV0IGFyZSBiaW5hcnkgZmlsZXMuIiIiCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHMgPSBpbnB1dC5yZWFkKE1BWEJJTlNJWkUpCiAgICAgICAgaWYgbm90IHM6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgd2hpbGUgbGVuKHMpIDwgTUFYQklOU0laRToKICAgICAgICAgICAgbnMgPSBpbnB1dC5yZWFkKE1BWEJJTlNJWkUtbGVuKHMpKQogICAgICAgICAgICBpZiBub3QgbnM6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBzICs9IG5zCiAgICAgICAgbGluZSA9IGJpbmFzY2lpLmIyYV9iYXNlNjQocykKICAgICAgICBvdXRwdXQud3JpdGUobGluZSkKCgpkZWYgZGVjb2RlKGlucHV0LCBvdXRwdXQpOgogICAgIiIiRGVjb2RlIGEgZmlsZTsgaW5wdXQgYW5kIG91dHB1dCBhcmUgYmluYXJ5IGZpbGVzLiIiIgogICAgd2hpbGUgVHJ1ZToKICAgICAgICBsaW5lID0gaW5wdXQucmVhZGxpbmUoKQogICAgICAgIGlmIG5vdCBsaW5lOgogICAgICAgICAgICBicmVhawogICAgICAgIHMgPSBiaW5hc2NpaS5hMmJfYmFzZTY0KGxpbmUpCiAgICAgICAgb3V0cHV0LndyaXRlKHMpCgoKZGVmIGVuY29kZWJ5dGVzKHMpOgogICAgIiIiRW5jb2RlIGEgYnl0ZXN0cmluZyBpbnRvIGEgYnl0ZXN0cmluZyBjb250YWluaW5nIG11bHRpcGxlIGxpbmVzCiAgICBvZiBiYXNlLTY0IGRhdGEuIiIiCiAgICBpZiBub3QgaXNpbnN0YW5jZShzLCBieXRlc190eXBlcyk6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJleHBlY3RlZCBieXRlcywgbm90ICVzIiAlIHMuX19jbGFzc19fLl9fbmFtZV9fKQogICAgcGllY2VzID0gW10KICAgIGZvciBpIGluIHJhbmdlKDAsIGxlbihzKSwgTUFYQklOU0laRSk6CiAgICAgICAgY2h1bmsgPSBzW2kgOiBpICsgTUFYQklOU0laRV0KICAgICAgICBwaWVjZXMuYXBwZW5kKGJpbmFzY2lpLmIyYV9iYXNlNjQoY2h1bmspKQogICAgcmV0dXJuIGIiIi5qb2luKHBpZWNlcykKCmRlZiBlbmNvZGVzdHJpbmcocyk6CiAgICAiIiJMZWdhY3kgYWxpYXMgb2YgZW5jb2RlYnl0ZXMoKS4iIiIKICAgIGltcG9ydCB3YXJuaW5ncwogICAgd2FybmluZ3Mud2FybigiZW5jb2Rlc3RyaW5nKCkgaXMgYSBkZXByZWNhdGVkIGFsaWFzLCB1c2UgZW5jb2RlYnl0ZXMoKSIsCiAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgIHJldHVybiBlbmNvZGVieXRlcyhzKQoKCmRlZiBkZWNvZGVieXRlcyhzKToKICAgICIiIkRlY29kZSBhIGJ5dGVzdHJpbmcgb2YgYmFzZS02NCBkYXRhIGludG8gYSBieXRlc3RyaW5nLiIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgIHJldHVybiBiaW5hc2NpaS5hMmJfYmFzZTY0KHMpCgpkZWYgZGVjb2Rlc3RyaW5nKHMpOgogICAgIiIiTGVnYWN5IGFsaWFzIG9mIGRlY29kZWJ5dGVzKCkuIiIiCiAgICBpbXBvcnQgd2FybmluZ3MKICAgIHdhcm5pbmdzLndhcm4oImRlY29kZXN0cmluZygpIGlzIGEgZGVwcmVjYXRlZCBhbGlhcywgdXNlIGRlY29kZWJ5dGVzKCkiLAogICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsIDIpCiAgICByZXR1cm4gZGVjb2RlYnl0ZXMocykKCgojIFVzYWJsZSBhcyBhIHNjcmlwdC4uLgpkZWYgbWFpbigpOgogICAgIiIiU21hbGwgbWFpbiBwcm9ncmFtIiIiCiAgICBpbXBvcnQgc3lzLCBnZXRvcHQKICAgIHRyeToKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChzeXMuYXJndlsxOl0sICdkZXV0JykKICAgIGV4Y2VwdCBnZXRvcHQuZXJyb3IgYXMgbXNnOgogICAgICAgIHN5cy5zdGRvdXQgPSBzeXMuc3RkZXJyCiAgICAgICAgcHJpbnQobXNnKQogICAgICAgIHByaW50KCIiInVzYWdlOiAlcyBbLWR8LWV8LXV8LXRdIFtmaWxlfC1dCiAgICAgICAgLWQsIC11OiBkZWNvZGUKICAgICAgICAtZTogZW5jb2RlIChkZWZhdWx0KQogICAgICAgIC10OiBlbmNvZGUgYW5kIGRlY29kZSBzdHJpbmcgJ0FsYWRkaW46b3BlbiBzZXNhbWUnIiIiJXN5cy5hcmd2WzBdKQogICAgICAgIHN5cy5leGl0KDIpCiAgICBmdW5jID0gZW5jb2RlCiAgICBmb3IgbywgYSBpbiBvcHRzOgogICAgICAgIGlmIG8gPT0gJy1lJzogZnVuYyA9IGVuY29kZQogICAgICAgIGlmIG8gPT0gJy1kJzogZnVuYyA9IGRlY29kZQogICAgICAgIGlmIG8gPT0gJy11JzogZnVuYyA9IGRlY29kZQogICAgICAgIGlmIG8gPT0gJy10JzogdGVzdCgpOyByZXR1cm4KICAgIGlmIGFyZ3MgYW5kIGFyZ3NbMF0gIT0gJy0nOgogICAgICAgIHdpdGggb3BlbihhcmdzWzBdLCAncmInKSBhcyBmOgogICAgICAgICAgICBmdW5jKGYsIHN5cy5zdGRvdXQuYnVmZmVyKQogICAgZWxzZToKICAgICAgICBmdW5jKHN5cy5zdGRpbi5idWZmZXIsIHN5cy5zdGRvdXQuYnVmZmVyKQoKCmRlZiB0ZXN0KCk6CiAgICBzMCA9IGIiQWxhZGRpbjpvcGVuIHNlc2FtZSIKICAgIHByaW50KHJlcHIoczApKQogICAgczEgPSBlbmNvZGVieXRlcyhzMCkKICAgIHByaW50KHJlcHIoczEpKQogICAgczIgPSBkZWNvZGVieXRlcyhzMSkKICAgIHByaW50KHJlcHIoczIpKQogICAgYXNzZXJ0IHMwID09IHMyCgoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIG1haW4oKQo=',
'/Lib/locale.py':'ZGVmIGdldGRlZmF1bHRsb2NhbGUoKToKICAgIHJldHVybiBfX0JSWVRIT05fXy5sYW5ndWFnZSxOb25l',
'/Lib/dis.py':'ZGVmIGRpcyhzcmMpOgogICAgcmV0dXJuIEpTT2JqZWN0KF9fQlJZVEhPTl9fLnB5MmpzKHNyYykpLnRvX2pzKCkK',
'/Lib/types.py':'IiIiCkRlZmluZSBuYW1lcyBmb3IgYnVpbHQtaW4gdHlwZXMgdGhhdCBhcmVuJ3QgZGlyZWN0bHkgYWNjZXNzaWJsZSBhcyBhIGJ1aWx0aW4uCiIiIgppbXBvcnQgc3lzCgojIEl0ZXJhdG9ycyBpbiBQeXRob24gYXJlbid0IGEgbWF0dGVyIG9mIHR5cGUgYnV0IG9mIHByb3RvY29sLiAgQSBsYXJnZQojIGFuZCBjaGFuZ2luZyBudW1iZXIgb2YgYnVpbHRpbiB0eXBlcyBpbXBsZW1lbnQgKnNvbWUqIGZsYXZvciBvZgojIGl0ZXJhdG9yLiAgRG9uJ3QgY2hlY2sgdGhlIHR5cGUhICBVc2UgaGFzYXR0ciB0byBjaGVjayBmb3IgYm90aAojICJfX2l0ZXJfXyIgYW5kICJfX25leHRfXyIgYXR0cmlidXRlcyBpbnN0ZWFkLgoKI2RlZiBfZigpOiBwYXNzCiNGdW5jdGlvblR5cGUgPSB0eXBlKF9mKQojTGFtYmRhVHlwZSA9IHR5cGUobGFtYmRhOiBOb25lKSAgICAgICAgICMgU2FtZSBhcyBGdW5jdGlvblR5cGUKI0NvZGVUeXBlID0gdHlwZShfZi5fX2NvZGVfXykKCiNkZWYgX2coKToKIyAgICB5aWVsZCAxCiNHZW5lcmF0b3JUeXBlID0gdHlwZShfZygpKQoKY2xhc3MgX0M6CiAgICBkZWYgX20oc2VsZik6IHBhc3MKTWV0aG9kVHlwZSA9IHR5cGUoX0MoKS5fbSkKCkJ1aWx0aW5GdW5jdGlvblR5cGUgPSB0eXBlKGxlbikKQnVpbHRpbk1ldGhvZFR5cGUgPSB0eXBlKFtdLmFwcGVuZCkgICAgICMgU2FtZSBhcyBCdWlsdGluRnVuY3Rpb25UeXBlCgpNb2R1bGVUeXBlID0gdHlwZShzeXMpCgojdHJ5OgojICAgIHJhaXNlIFR5cGVFcnJvcgojZXhjZXB0IFR5cGVFcnJvcjoKIyAgICB0YiA9IHN5cy5leGNfaW5mbygpWzJdCiMgICAgVHJhY2ViYWNrVHlwZSA9IHR5cGUodGIpCiMgICAgRnJhbWVUeXBlID0gdHlwZSh0Yi50Yl9mcmFtZSkKIyAgICB0YiA9IE5vbmU7IGRlbCB0YgoKIyBGb3IgSnl0aG9uLCB0aGUgZm9sbG93aW5nIHR3byB0eXBlcyBhcmUgaWRlbnRpY2FsCiNHZXRTZXREZXNjcmlwdG9yVHlwZSA9IHR5cGUoRnVuY3Rpb25UeXBlLl9fY29kZV9fKQojTWVtYmVyRGVzY3JpcHRvclR5cGUgPSB0eXBlKEZ1bmN0aW9uVHlwZS5fX2dsb2JhbHNfXykKCiNmaXhtZSBicnl0aG9uCiNkZWwgc3lzLCBfZiwgX2csIF9DLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTm90IGZvciBleHBvcnQK',
'/Lib/_weakrefset.py':'IyBBY2Nlc3MgV2Vha1NldCB0aHJvdWdoIHRoZSB3ZWFrcmVmIG1vZHVsZS4KIyBUaGlzIGNvZGUgaXMgc2VwYXJhdGVkLW91dCBiZWNhdXNlIGl0IGlzIG5lZWRlZAojIGJ5IGFiYy5weSB0byBsb2FkIGV2ZXJ5dGhpbmcgZWxzZSBhdCBzdGFydHVwLgoKZnJvbSBfd2Vha3JlZiBpbXBvcnQgcmVmCgpfX2FsbF9fID0gWydXZWFrU2V0J10KCgpjbGFzcyBfSXRlcmF0aW9uR3VhcmQ6CiAgICAjIFRoaXMgY29udGV4dCBtYW5hZ2VyIHJlZ2lzdGVycyBpdHNlbGYgaW4gdGhlIGN1cnJlbnQgaXRlcmF0b3JzIG9mIHRoZQogICAgIyB3ZWFrIGNvbnRhaW5lciwgc3VjaCBhcyB0byBkZWxheSBhbGwgcmVtb3ZhbHMgdW50aWwgdGhlIGNvbnRleHQgbWFuYWdlcgogICAgIyBleGl0cy4KICAgICMgVGhpcyB0ZWNobmlxdWUgc2hvdWxkIGJlIHJlbGF0aXZlbHkgdGhyZWFkLXNhZmUgKHNpbmNlIHNldHMgYXJlKS4KCiAgICBkZWYgX19pbml0X18oc2VsZiwgd2Vha2NvbnRhaW5lcik6CiAgICAgICAgIyBEb24ndCBjcmVhdGUgY3ljbGVzCiAgICAgICAgcHJpbnQoJ2NyZWF0ZSBpdGVyYXRpb24gZ3VhcmQnLCB3ZWFrY29udGFpbmVyKQogICAgICAgIHNlbGYud2Vha2NvbnRhaW5lciA9IHJlZih3ZWFrY29udGFpbmVyKQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgcHJpbnQoJ2VudGVyIGl0ZXJhdGlvbiBndWFyZCcpCiAgICAgICAgdyA9IHNlbGYud2Vha2NvbnRhaW5lcigpCiAgICAgICAgaWYgdyBpcyBub3QgTm9uZToKICAgICAgICAgICAgdy5faXRlcmF0aW5nLmFkZChzZWxmKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIGUsIHQsIGIpOgogICAgICAgIHcgPSBzZWxmLndlYWtjb250YWluZXIoKQogICAgICAgIGlmIHcgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHMgPSB3Ll9pdGVyYXRpbmcKICAgICAgICAgICAgcy5yZW1vdmUoc2VsZikKICAgICAgICAgICAgaWYgbm90IHM6CiAgICAgICAgICAgICAgICB3Ll9jb21taXRfcmVtb3ZhbHMoKQoKCmNsYXNzIFdlYWtTZXQ6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZGF0YT1Ob25lKToKICAgICAgICBzZWxmLmRhdGEgPSBzZXQoKQogICAgICAgIGRlZiBfcmVtb3ZlKGl0ZW0sIHNlbGZyZWY9cmVmKHNlbGYpKToKICAgICAgICAgICAgc2VsZiA9IHNlbGZyZWYoKQogICAgICAgICAgICBpZiBzZWxmIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgaWYgc2VsZi5faXRlcmF0aW5nOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMuYXBwZW5kKGl0ZW0pCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuZGF0YS5kaXNjYXJkKGl0ZW0pCiAgICAgICAgc2VsZi5fcmVtb3ZlID0gX3JlbW92ZQogICAgICAgICMgQSBsaXN0IG9mIGtleXMgdG8gYmUgcmVtb3ZlZAogICAgICAgIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMgPSBbXQogICAgICAgIHNlbGYuX2l0ZXJhdGluZyA9IHNldCgpCiAgICAgICAgaWYgZGF0YSBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi51cGRhdGUoZGF0YSkKCiAgICBkZWYgX2NvbW1pdF9yZW1vdmFscyhzZWxmKToKICAgICAgICBsID0gc2VsZi5fcGVuZGluZ19yZW1vdmFscwogICAgICAgIGRpc2NhcmQgPSBzZWxmLmRhdGEuZGlzY2FyZAogICAgICAgIHdoaWxlIGw6CiAgICAgICAgICAgIGRpc2NhcmQobC5wb3AoKSkKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgd2l0aCBfSXRlcmF0aW9uR3VhcmQoc2VsZik6CiAgICAgICAgICAgIGZvciBpdGVtcmVmIGluIHNlbGYuZGF0YToKICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtcmVmKCkKICAgICAgICAgICAgICAgIGlmIGl0ZW0gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgeWllbGQgaXRlbQoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiBsZW4oc2VsZi5kYXRhKSAtIGxlbihzZWxmLl9wZW5kaW5nX3JlbW92YWxzKQoKICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwgaXRlbSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB3ciA9IHJlZihpdGVtKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIHJldHVybiB3ciBpbiBzZWxmLmRhdGEKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCAobGlzdChzZWxmKSwpLAogICAgICAgICAgICAgICAgZ2V0YXR0cihzZWxmLCAnX19kaWN0X18nLCBOb25lKSkKCiAgICBkZWYgYWRkKHNlbGYsIGl0ZW0pOgogICAgICAgIGlmIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHM6CiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpCiAgICAgICAgc2VsZi5kYXRhLmFkZChyZWYoaXRlbSwgc2VsZi5fcmVtb3ZlKSkKCiAgICBkZWYgY2xlYXIoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoKICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkKICAgICAgICBzZWxmLmRhdGEuY2xlYXIoKQoKICAgIGRlZiBjb3B5KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXyhzZWxmKQoKICAgIGRlZiBwb3Aoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoKICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpdGVtcmVmID0gc2VsZi5kYXRhLnBvcCgpCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKCdwb3AgZnJvbSBlbXB0eSBXZWFrU2V0JykKICAgICAgICAgICAgaXRlbSA9IGl0ZW1yZWYoKQogICAgICAgICAgICBpZiBpdGVtIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0KCiAgICBkZWYgcmVtb3ZlKHNlbGYsIGl0ZW0pOgogICAgICAgIGlmIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHM6CiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpCiAgICAgICAgc2VsZi5kYXRhLnJlbW92ZShyZWYoaXRlbSkpCgogICAgZGVmIGRpc2NhcmQoc2VsZiwgaXRlbSk6CiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoKICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkKICAgICAgICBzZWxmLmRhdGEuZGlzY2FyZChyZWYoaXRlbSkpCgogICAgZGVmIHVwZGF0ZShzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoKICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkKICAgICAgICBmb3IgZWxlbWVudCBpbiBvdGhlcjoKICAgICAgICAgICAgc2VsZi5hZGQoZWxlbWVudCkKCiAgICBkZWYgX19pb3JfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgc2VsZi51cGRhdGUob3RoZXIpCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgZGlmZmVyZW5jZShzZWxmLCBvdGhlcik6CiAgICAgICAgbmV3c2V0ID0gc2VsZi5jb3B5KCkKICAgICAgICBuZXdzZXQuZGlmZmVyZW5jZV91cGRhdGUob3RoZXIpCiAgICAgICAgcmV0dXJuIG5ld3NldAogICAgX19zdWJfXyA9IGRpZmZlcmVuY2UKCiAgICBkZWYgZGlmZmVyZW5jZV91cGRhdGUoc2VsZiwgb3RoZXIpOgogICAgICAgIHNlbGYuX19pc3ViX18ob3RoZXIpCiAgICBkZWYgX19pc3ViX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHM6CiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpCiAgICAgICAgaWYgc2VsZiBpcyBvdGhlcjoKICAgICAgICAgICAgc2VsZi5kYXRhLmNsZWFyKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmRhdGEuZGlmZmVyZW5jZV91cGRhdGUocmVmKGl0ZW0pIGZvciBpdGVtIGluIG90aGVyKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIGludGVyc2VjdGlvbihzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKGl0ZW0gZm9yIGl0ZW0gaW4gb3RoZXIgaWYgaXRlbSBpbiBzZWxmKQogICAgX19hbmRfXyA9IGludGVyc2VjdGlvbgoKICAgIGRlZiBpbnRlcnNlY3Rpb25fdXBkYXRlKHNlbGYsIG90aGVyKToKICAgICAgICBzZWxmLl9faWFuZF9fKG90aGVyKQogICAgZGVmIF9faWFuZF9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBzZWxmLl9wZW5kaW5nX3JlbW92YWxzOgogICAgICAgICAgICBzZWxmLl9jb21taXRfcmVtb3ZhbHMoKQogICAgICAgIHNlbGYuZGF0YS5pbnRlcnNlY3Rpb25fdXBkYXRlKHJlZihpdGVtKSBmb3IgaXRlbSBpbiBvdGhlcikKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBpc3N1YnNldChzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIHNlbGYuZGF0YS5pc3N1YnNldChyZWYoaXRlbSkgZm9yIGl0ZW0gaW4gb3RoZXIpCiAgICBfX2xlX18gPSBpc3N1YnNldAoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIHJldHVybiBzZWxmLmRhdGEgPCBzZXQocmVmKGl0ZW0pIGZvciBpdGVtIGluIG90aGVyKQoKICAgIGRlZiBpc3N1cGVyc2V0KHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gc2VsZi5kYXRhLmlzc3VwZXJzZXQocmVmKGl0ZW0pIGZvciBpdGVtIGluIG90aGVyKQogICAgX19nZV9fID0gaXNzdXBlcnNldAoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIHJldHVybiBzZWxmLmRhdGEgPiBzZXQocmVmKGl0ZW0pIGZvciBpdGVtIGluIG90aGVyKQoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBzZWxmLl9fY2xhc3NfXyk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJldHVybiBzZWxmLmRhdGEgPT0gc2V0KHJlZihpdGVtKSBmb3IgaXRlbSBpbiBvdGhlcikKCiAgICBkZWYgc3ltbWV0cmljX2RpZmZlcmVuY2Uoc2VsZiwgb3RoZXIpOgogICAgICAgIG5ld3NldCA9IHNlbGYuY29weSgpCiAgICAgICAgbmV3c2V0LnN5bW1ldHJpY19kaWZmZXJlbmNlX3VwZGF0ZShvdGhlcikKICAgICAgICByZXR1cm4gbmV3c2V0CiAgICBfX3hvcl9fID0gc3ltbWV0cmljX2RpZmZlcmVuY2UKCiAgICBkZWYgc3ltbWV0cmljX2RpZmZlcmVuY2VfdXBkYXRlKHNlbGYsIG90aGVyKToKICAgICAgICBzZWxmLl9faXhvcl9fKG90aGVyKQogICAgZGVmIF9faXhvcl9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBzZWxmLl9wZW5kaW5nX3JlbW92YWxzOgogICAgICAgICAgICBzZWxmLl9jb21taXRfcmVtb3ZhbHMoKQogICAgICAgIGlmIHNlbGYgaXMgb3RoZXI6CiAgICAgICAgICAgIHNlbGYuZGF0YS5jbGVhcigpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5kYXRhLnN5bW1ldHJpY19kaWZmZXJlbmNlX3VwZGF0ZShyZWYoaXRlbSwgc2VsZi5fcmVtb3ZlKSBmb3IgaXRlbSBpbiBvdGhlcikKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiB1bmlvbihzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKGUgZm9yIHMgaW4gKHNlbGYsIG90aGVyKSBmb3IgZSBpbiBzKQogICAgX19vcl9fID0gdW5pb24KCiAgICBkZWYgaXNkaXNqb2ludChzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmludGVyc2VjdGlvbihvdGhlcikpID09IDAK',
'/Lib/warnings.py':'IiIiUHl0aG9uIHBhcnQgb2YgdGhlIHdhcm5pbmdzIHN1YnN5c3RlbS4iIiINCg0KIyBOb3RlOiBmdW5jdGlvbiBsZXZlbCBpbXBvcnRzIHNob3VsZCAqbm90KiBiZSB1c2VkDQojIGluIHRoaXMgbW9kdWxlIGFzIGl0IG1heSBjYXVzZSBpbXBvcnQgbG9jayBkZWFkbG9jay4NCiMgU2VlIGJ1ZyA2ODM2NTguDQppbXBvcnQgbGluZWNhY2hlDQppbXBvcnQgc3lzDQoNCl9fYWxsX18gPSBbIndhcm4iLCAic2hvd3dhcm5pbmciLCAiZm9ybWF0d2FybmluZyIsICJmaWx0ZXJ3YXJuaW5ncyIsDQogICAgICAgICAgICJyZXNldHdhcm5pbmdzIiwgImNhdGNoX3dhcm5pbmdzIl0NCg0KDQpkZWYgc2hvd3dhcm5pbmcobWVzc2FnZSwgY2F0ZWdvcnksIGZpbGVuYW1lLCBsaW5lbm8sIGZpbGU9Tm9uZSwgbGluZT1Ob25lKToNCiAgICAiIiJIb29rIHRvIHdyaXRlIGEgd2FybmluZyB0byBhIGZpbGU7IHJlcGxhY2UgaWYgeW91IGxpa2UuIiIiDQogICAgaWYgZmlsZSBpcyBOb25lOg0KICAgICAgICBmaWxlID0gc3lzLnN0ZGVycg0KICAgIHRyeToNCiAgICAgICAgZmlsZS53cml0ZShmb3JtYXR3YXJuaW5nKG1lc3NhZ2UsIGNhdGVnb3J5LCBmaWxlbmFtZSwgbGluZW5vLCBsaW5lKSkNCiAgICBleGNlcHQgSU9FcnJvcjoNCiAgICAgICAgcGFzcyAjIHRoZSBmaWxlIChwcm9iYWJseSBzdGRlcnIpIGlzIGludmFsaWQgLSB0aGlzIHdhcm5pbmcgZ2V0cyBsb3N0Lg0KDQpkZWYgZm9ybWF0d2FybmluZyhtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubywgbGluZT1Ob25lKToNCiAgICAiIiJGdW5jdGlvbiB0byBmb3JtYXQgYSB3YXJuaW5nIHRoZSBzdGFuZGFyZCB3YXkuIiIiDQogICAgcyA9ICAiJXM6JXM6ICVzOiAlc1xuIiAlIChmaWxlbmFtZSwgbGluZW5vLCBjYXRlZ29yeS5fX25hbWVfXywgbWVzc2FnZSkNCiAgICBsaW5lID0gbGluZWNhY2hlLmdldGxpbmUoZmlsZW5hbWUsIGxpbmVubykgaWYgbGluZSBpcyBOb25lIGVsc2UgbGluZQ0KICAgIGlmIGxpbmU6DQogICAgICAgIGxpbmUgPSBsaW5lLnN0cmlwKCkNCiAgICAgICAgcyArPSAiICAlc1xuIiAlIGxpbmUNCiAgICByZXR1cm4gcw0KDQpkZWYgZmlsdGVyd2FybmluZ3MoYWN0aW9uLCBtZXNzYWdlPSIiLCBjYXRlZ29yeT1XYXJuaW5nLCBtb2R1bGU9IiIsIGxpbmVubz0wLA0KICAgICAgICAgICAgICAgICAgIGFwcGVuZD1GYWxzZSk6DQogICAgIiIiSW5zZXJ0IGFuIGVudHJ5IGludG8gdGhlIGxpc3Qgb2Ygd2FybmluZ3MgZmlsdGVycyAoYXQgdGhlIGZyb250KS4NCg0KICAgICdhY3Rpb24nIC0tIG9uZSBvZiAiZXJyb3IiLCAiaWdub3JlIiwgImFsd2F5cyIsICJkZWZhdWx0IiwgIm1vZHVsZSIsDQogICAgICAgICAgICAgICAgb3IgIm9uY2UiDQogICAgJ21lc3NhZ2UnIC0tIGEgcmVnZXggdGhhdCB0aGUgd2FybmluZyBtZXNzYWdlIG11c3QgbWF0Y2gNCiAgICAnY2F0ZWdvcnknIC0tIGEgY2xhc3MgdGhhdCB0aGUgd2FybmluZyBtdXN0IGJlIGEgc3ViY2xhc3Mgb2YNCiAgICAnbW9kdWxlJyAtLSBhIHJlZ2V4IHRoYXQgdGhlIG1vZHVsZSBuYW1lIG11c3QgbWF0Y2gNCiAgICAnbGluZW5vJyAtLSBhbiBpbnRlZ2VyIGxpbmUgbnVtYmVyLCAwIG1hdGNoZXMgYWxsIHdhcm5pbmdzDQogICAgJ2FwcGVuZCcgLS0gaWYgdHJ1ZSwgYXBwZW5kIHRvIHRoZSBsaXN0IG9mIGZpbHRlcnMNCiAgICAiIiINCiAgICBpbXBvcnQgcmUNCiAgICBhc3NlcnQgYWN0aW9uIGluICgiZXJyb3IiLCAiaWdub3JlIiwgImFsd2F5cyIsICJkZWZhdWx0IiwgIm1vZHVsZSIsDQogICAgICAgICAgICAgICAgICAgICAgIm9uY2UiKSwgImludmFsaWQgYWN0aW9uOiAlciIgJSAoYWN0aW9uLCkNCiAgICBhc3NlcnQgaXNpbnN0YW5jZShtZXNzYWdlLCBzdHIpLCAibWVzc2FnZSBtdXN0IGJlIGEgc3RyaW5nIg0KICAgIGFzc2VydCBpc2luc3RhbmNlKGNhdGVnb3J5LCB0eXBlKSwgImNhdGVnb3J5IG11c3QgYmUgYSBjbGFzcyINCiAgICBhc3NlcnQgaXNzdWJjbGFzcyhjYXRlZ29yeSwgV2FybmluZyksICJjYXRlZ29yeSBtdXN0IGJlIGEgV2FybmluZyBzdWJjbGFzcyINCiAgICBhc3NlcnQgaXNpbnN0YW5jZShtb2R1bGUsIHN0ciksICJtb2R1bGUgbXVzdCBiZSBhIHN0cmluZyINCiAgICBhc3NlcnQgaXNpbnN0YW5jZShsaW5lbm8sIGludCkgYW5kIGxpbmVubyA+PSAwLCBcDQogICAgICAgICAgICJsaW5lbm8gbXVzdCBiZSBhbiBpbnQgPj0gMCINCiAgICBpdGVtID0gKGFjdGlvbiwgcmUuY29tcGlsZShtZXNzYWdlLCByZS5JKSwgY2F0ZWdvcnksDQogICAgICAgICAgICByZS5jb21waWxlKG1vZHVsZSksIGxpbmVubykNCiAgICBpZiBhcHBlbmQ6DQogICAgICAgIGZpbHRlcnMuYXBwZW5kKGl0ZW0pDQogICAgZWxzZToNCiAgICAgICAgZmlsdGVycy5pbnNlcnQoMCwgaXRlbSkNCg0KZGVmIHNpbXBsZWZpbHRlcihhY3Rpb24sIGNhdGVnb3J5PVdhcm5pbmcsIGxpbmVubz0wLCBhcHBlbmQ9RmFsc2UpOg0KICAgICIiIkluc2VydCBhIHNpbXBsZSBlbnRyeSBpbnRvIHRoZSBsaXN0IG9mIHdhcm5pbmdzIGZpbHRlcnMgKGF0IHRoZSBmcm9udCkuDQoNCiAgICBBIHNpbXBsZSBmaWx0ZXIgbWF0Y2hlcyBhbGwgbW9kdWxlcyBhbmQgbWVzc2FnZXMuDQogICAgJ2FjdGlvbicgLS0gb25lIG9mICJlcnJvciIsICJpZ25vcmUiLCAiYWx3YXlzIiwgImRlZmF1bHQiLCAibW9kdWxlIiwNCiAgICAgICAgICAgICAgICBvciAib25jZSINCiAgICAnY2F0ZWdvcnknIC0tIGEgY2xhc3MgdGhhdCB0aGUgd2FybmluZyBtdXN0IGJlIGEgc3ViY2xhc3Mgb2YNCiAgICAnbGluZW5vJyAtLSBhbiBpbnRlZ2VyIGxpbmUgbnVtYmVyLCAwIG1hdGNoZXMgYWxsIHdhcm5pbmdzDQogICAgJ2FwcGVuZCcgLS0gaWYgdHJ1ZSwgYXBwZW5kIHRvIHRoZSBsaXN0IG9mIGZpbHRlcnMNCiAgICAiIiINCiAgICBhc3NlcnQgYWN0aW9uIGluICgiZXJyb3IiLCAiaWdub3JlIiwgImFsd2F5cyIsICJkZWZhdWx0IiwgIm1vZHVsZSIsDQogICAgICAgICAgICAgICAgICAgICAgIm9uY2UiKSwgImludmFsaWQgYWN0aW9uOiAlciIgJSAoYWN0aW9uLCkNCiAgICBhc3NlcnQgaXNpbnN0YW5jZShsaW5lbm8sIGludCkgYW5kIGxpbmVubyA+PSAwLCBcDQogICAgICAgICAgICJsaW5lbm8gbXVzdCBiZSBhbiBpbnQgPj0gMCINCiAgICBpdGVtID0gKGFjdGlvbiwgTm9uZSwgY2F0ZWdvcnksIE5vbmUsIGxpbmVubykNCiAgICBpZiBhcHBlbmQ6DQogICAgICAgIGZpbHRlcnMuYXBwZW5kKGl0ZW0pDQogICAgZWxzZToNCiAgICAgICAgZmlsdGVycy5pbnNlcnQoMCwgaXRlbSkNCg0KZGVmIHJlc2V0d2FybmluZ3MoKToNCiAgICAiIiJDbGVhciB0aGUgbGlzdCBvZiB3YXJuaW5nIGZpbHRlcnMsIHNvIHRoYXQgbm8gZmlsdGVycyBhcmUgYWN0aXZlLiIiIg0KICAgIGZpbHRlcnNbOl0gPSBbXQ0KDQpjbGFzcyBfT3B0aW9uRXJyb3IoRXhjZXB0aW9uKToNCiAgICAiIiJFeGNlcHRpb24gdXNlZCBieSBvcHRpb24gcHJvY2Vzc2luZyBoZWxwZXJzLiIiIg0KICAgIHBhc3MNCg0KIyBIZWxwZXIgdG8gcHJvY2VzcyAtVyBvcHRpb25zIHBhc3NlZCB2aWEgc3lzLndhcm5vcHRpb25zDQpkZWYgX3Byb2Nlc3NvcHRpb25zKGFyZ3MpOg0KICAgIGZvciBhcmcgaW4gYXJnczoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgX3NldG9wdGlvbihhcmcpDQogICAgICAgIGV4Y2VwdCBfT3B0aW9uRXJyb3IgYXMgbXNnOg0KICAgICAgICAgICAgcHJpbnQoIkludmFsaWQgLVcgb3B0aW9uIGlnbm9yZWQ6IiwgbXNnLCBmaWxlPXN5cy5zdGRlcnIpDQoNCiMgSGVscGVyIGZvciBfcHJvY2Vzc29wdGlvbnMoKQ0KZGVmIF9zZXRvcHRpb24oYXJnKToNCiAgICBpbXBvcnQgcmUNCiAgICBwYXJ0cyA9IGFyZy5zcGxpdCgnOicpDQogICAgaWYgbGVuKHBhcnRzKSA+IDU6DQogICAgICAgIHJhaXNlIF9PcHRpb25FcnJvcigidG9vIG1hbnkgZmllbGRzIChtYXggNSk6ICVyIiAlIChhcmcsKSkNCiAgICB3aGlsZSBsZW4ocGFydHMpIDwgNToNCiAgICAgICAgcGFydHMuYXBwZW5kKCcnKQ0KICAgIGFjdGlvbiwgbWVzc2FnZSwgY2F0ZWdvcnksIG1vZHVsZSwgbGluZW5vID0gW3Muc3RyaXAoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBzIGluIHBhcnRzXQ0KICAgIGFjdGlvbiA9IF9nZXRhY3Rpb24oYWN0aW9uKQ0KICAgIG1lc3NhZ2UgPSByZS5lc2NhcGUobWVzc2FnZSkNCiAgICBjYXRlZ29yeSA9IF9nZXRjYXRlZ29yeShjYXRlZ29yeSkNCiAgICBtb2R1bGUgPSByZS5lc2NhcGUobW9kdWxlKQ0KICAgIGlmIG1vZHVsZToNCiAgICAgICAgbW9kdWxlID0gbW9kdWxlICsgJyQnDQogICAgaWYgbGluZW5vOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsaW5lbm8gPSBpbnQobGluZW5vKQ0KICAgICAgICAgICAgaWYgbGluZW5vIDwgMDoNCiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yDQogICAgICAgIGV4Y2VwdCAoVmFsdWVFcnJvciwgT3ZlcmZsb3dFcnJvcik6DQogICAgICAgICAgICByYWlzZSBfT3B0aW9uRXJyb3IoImludmFsaWQgbGluZW5vICVyIiAlIChsaW5lbm8sKSkNCiAgICBlbHNlOg0KICAgICAgICBsaW5lbm8gPSAwDQogICAgZmlsdGVyd2FybmluZ3MoYWN0aW9uLCBtZXNzYWdlLCBjYXRlZ29yeSwgbW9kdWxlLCBsaW5lbm8pDQoNCiMgSGVscGVyIGZvciBfc2V0b3B0aW9uKCkNCmRlZiBfZ2V0YWN0aW9uKGFjdGlvbik6DQogICAgaWYgbm90IGFjdGlvbjoNCiAgICAgICAgcmV0dXJuICJkZWZhdWx0Ig0KICAgIGlmIGFjdGlvbiA9PSAiYWxsIjogcmV0dXJuICJhbHdheXMiICMgQWxpYXMNCiAgICBmb3IgYSBpbiAoJ2RlZmF1bHQnLCAnYWx3YXlzJywgJ2lnbm9yZScsICdtb2R1bGUnLCAnb25jZScsICdlcnJvcicpOg0KICAgICAgICBpZiBhLnN0YXJ0c3dpdGgoYWN0aW9uKToNCiAgICAgICAgICAgIHJldHVybiBhDQogICAgcmFpc2UgX09wdGlvbkVycm9yKCJpbnZhbGlkIGFjdGlvbjogJXIiICUgKGFjdGlvbiwpKQ0KDQojIEhlbHBlciBmb3IgX3NldG9wdGlvbigpDQpkZWYgX2dldGNhdGVnb3J5KGNhdGVnb3J5KToNCiAgICBpbXBvcnQgcmUNCiAgICBpZiBub3QgY2F0ZWdvcnk6DQogICAgICAgIHJldHVybiBXYXJuaW5nDQogICAgaWYgcmUubWF0Y2goIl5bYS16QS1aMC05X10rJCIsIGNhdGVnb3J5KToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgY2F0ID0gZXZhbChjYXRlZ29yeSkNCiAgICAgICAgZXhjZXB0IE5hbWVFcnJvcjoNCiAgICAgICAgICAgIHJhaXNlIF9PcHRpb25FcnJvcigidW5rbm93biB3YXJuaW5nIGNhdGVnb3J5OiAlciIgJSAoY2F0ZWdvcnksKSkNCiAgICBlbHNlOg0KICAgICAgICBpID0gY2F0ZWdvcnkucmZpbmQoIi4iKQ0KICAgICAgICBtb2R1bGUgPSBjYXRlZ29yeVs6aV0NCiAgICAgICAga2xhc3MgPSBjYXRlZ29yeVtpKzE6XQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBtID0gX19pbXBvcnRfXyhtb2R1bGUsIE5vbmUsIE5vbmUsIFtrbGFzc10pDQogICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgICAgICAgICAgIHJhaXNlIF9PcHRpb25FcnJvcigiaW52YWxpZCBtb2R1bGUgbmFtZTogJXIiICUgKG1vZHVsZSwpKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjYXQgPSBnZXRhdHRyKG0sIGtsYXNzKQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICByYWlzZSBfT3B0aW9uRXJyb3IoInVua25vd24gd2FybmluZyBjYXRlZ29yeTogJXIiICUgKGNhdGVnb3J5LCkpDQogICAgaWYgbm90IGlzc3ViY2xhc3MoY2F0LCBXYXJuaW5nKToNCiAgICAgICAgcmFpc2UgX09wdGlvbkVycm9yKCJpbnZhbGlkIHdhcm5pbmcgY2F0ZWdvcnk6ICVyIiAlIChjYXRlZ29yeSwpKQ0KICAgIHJldHVybiBjYXQNCg0KDQojIENvZGUgdHlwaWNhbGx5IHJlcGxhY2VkIGJ5IF93YXJuaW5ncw0KZGVmIHdhcm4obWVzc2FnZSwgY2F0ZWdvcnk9Tm9uZSwgc3RhY2tsZXZlbD0xKToNCiAgICAiIiJJc3N1ZSBhIHdhcm5pbmcsIG9yIG1heWJlIGlnbm9yZSBpdCBvciByYWlzZSBhbiBleGNlcHRpb24uIiIiDQogICAgIyBDaGVjayBpZiBtZXNzYWdlIGlzIGFscmVhZHkgYSBXYXJuaW5nIG9iamVjdA0KICAgIGlmIGlzaW5zdGFuY2UobWVzc2FnZSwgV2FybmluZyk6DQogICAgICAgIGNhdGVnb3J5ID0gbWVzc2FnZS5fX2NsYXNzX18NCiAgICAjIENoZWNrIGNhdGVnb3J5IGFyZ3VtZW50DQogICAgaWYgY2F0ZWdvcnkgaXMgTm9uZToNCiAgICAgICAgY2F0ZWdvcnkgPSBVc2VyV2FybmluZw0KICAgIGFzc2VydCBpc3N1YmNsYXNzKGNhdGVnb3J5LCBXYXJuaW5nKQ0KICAgICMgR2V0IGNvbnRleHQgaW5mb3JtYXRpb24NCiAgICB0cnk6DQogICAgICAgIGNhbGxlciA9IHN5cy5fZ2V0ZnJhbWUoc3RhY2tsZXZlbCkNCiAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgZ2xvYmFscyA9IHN5cy5fX2RpY3RfXw0KICAgICAgICBsaW5lbm8gPSAxDQogICAgZWxzZToNCiAgICAgICAgZ2xvYmFscyA9IGNhbGxlci5mX2dsb2JhbHMNCiAgICAgICAgbGluZW5vID0gY2FsbGVyLmZfbGluZW5vDQogICAgaWYgJ19fbmFtZV9fJyBpbiBnbG9iYWxzOg0KICAgICAgICBtb2R1bGUgPSBnbG9iYWxzWydfX25hbWVfXyddDQogICAgZWxzZToNCiAgICAgICAgbW9kdWxlID0gIjxzdHJpbmc+Ig0KICAgIGZpbGVuYW1lID0gZ2xvYmFscy5nZXQoJ19fZmlsZV9fJykNCiAgICBpZiBmaWxlbmFtZToNCiAgICAgICAgZm5sID0gZmlsZW5hbWUubG93ZXIoKQ0KICAgICAgICBpZiBmbmwuZW5kc3dpdGgoKCIucHljIiwgIi5weW8iKSk6DQogICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVuYW1lWzotMV0NCiAgICBlbHNlOg0KICAgICAgICBpZiBtb2R1bGUgPT0gIl9fbWFpbl9fIjoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IHN5cy5hcmd2WzBdDQogICAgICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICAgICAgIyBlbWJlZGRlZCBpbnRlcnByZXRlcnMgZG9uJ3QgaGF2ZSBzeXMuYXJndiwgc2VlIGJ1ZyAjODM5MTUxDQogICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAnX19tYWluX18nDQogICAgICAgIGlmIG5vdCBmaWxlbmFtZToNCiAgICAgICAgICAgIGZpbGVuYW1lID0gbW9kdWxlDQogICAgcmVnaXN0cnkgPSBnbG9iYWxzLnNldGRlZmF1bHQoIl9fd2FybmluZ3JlZ2lzdHJ5X18iLCB7fSkNCiAgICB3YXJuX2V4cGxpY2l0KG1lc3NhZ2UsIGNhdGVnb3J5LCBmaWxlbmFtZSwgbGluZW5vLCBtb2R1bGUsIHJlZ2lzdHJ5LA0KICAgICAgICAgICAgICAgICAgZ2xvYmFscykNCg0KZGVmIHdhcm5fZXhwbGljaXQobWVzc2FnZSwgY2F0ZWdvcnksIGZpbGVuYW1lLCBsaW5lbm8sDQogICAgICAgICAgICAgICAgICBtb2R1bGU9Tm9uZSwgcmVnaXN0cnk9Tm9uZSwgbW9kdWxlX2dsb2JhbHM9Tm9uZSk6DQogICAgbGluZW5vID0gaW50KGxpbmVubykNCiAgICBpZiBtb2R1bGUgaXMgTm9uZToNCiAgICAgICAgbW9kdWxlID0gZmlsZW5hbWUgb3IgIjx1bmtub3duPiINCiAgICAgICAgaWYgbW9kdWxlWy0zOl0ubG93ZXIoKSA9PSAiLnB5IjoNCiAgICAgICAgICAgIG1vZHVsZSA9IG1vZHVsZVs6LTNdICMgWFhYIFdoYXQgYWJvdXQgbGVhZGluZyBwYXRobmFtZT8NCiAgICBpZiByZWdpc3RyeSBpcyBOb25lOg0KICAgICAgICByZWdpc3RyeSA9IHt9DQogICAgaWYgaXNpbnN0YW5jZShtZXNzYWdlLCBXYXJuaW5nKToNCiAgICAgICAgdGV4dCA9IHN0cihtZXNzYWdlKQ0KICAgICAgICBjYXRlZ29yeSA9IG1lc3NhZ2UuX19jbGFzc19fDQogICAgZWxzZToNCiAgICAgICAgdGV4dCA9IG1lc3NhZ2UNCiAgICAgICAgbWVzc2FnZSA9IGNhdGVnb3J5KG1lc3NhZ2UpDQogICAga2V5ID0gKHRleHQsIGNhdGVnb3J5LCBsaW5lbm8pDQogICAgIyBRdWljayB0ZXN0IGZvciBjb21tb24gY2FzZQ0KICAgIGlmIHJlZ2lzdHJ5LmdldChrZXkpOg0KICAgICAgICByZXR1cm4NCiAgICAjIFNlYXJjaCB0aGUgZmlsdGVycw0KICAgIGZvciBpdGVtIGluIGZpbHRlcnM6DQogICAgICAgIGFjdGlvbiwgbXNnLCBjYXQsIG1vZCwgbG4gPSBpdGVtDQogICAgICAgIGlmICgobXNnIGlzIE5vbmUgb3IgbXNnLm1hdGNoKHRleHQpKSBhbmQNCiAgICAgICAgICAgIGlzc3ViY2xhc3MoY2F0ZWdvcnksIGNhdCkgYW5kDQogICAgICAgICAgICAobW9kIGlzIE5vbmUgb3IgbW9kLm1hdGNoKG1vZHVsZSkpIGFuZA0KICAgICAgICAgICAgKGxuID09IDAgb3IgbGluZW5vID09IGxuKSk6DQogICAgICAgICAgICBicmVhaw0KICAgIGVsc2U6DQogICAgICAgIGFjdGlvbiA9IGRlZmF1bHRhY3Rpb24NCiAgICAjIEVhcmx5IGV4aXQgYWN0aW9ucw0KICAgIGlmIGFjdGlvbiA9PSAiaWdub3JlIjoNCiAgICAgICAgcmVnaXN0cnlba2V5XSA9IDENCiAgICAgICAgcmV0dXJuDQoNCiAgICAjIFByaW1lIHRoZSBsaW5lY2FjaGUgZm9yIGZvcm1hdHRpbmcsIGluIGNhc2UgdGhlDQogICAgIyAiZmlsZSIgaXMgYWN0dWFsbHkgaW4gYSB6aXBmaWxlIG9yIHNvbWV0aGluZy4NCiAgICBsaW5lY2FjaGUuZ2V0bGluZXMoZmlsZW5hbWUsIG1vZHVsZV9nbG9iYWxzKQ0KDQogICAgaWYgYWN0aW9uID09ICJlcnJvciI6DQogICAgICAgIHJhaXNlIG1lc3NhZ2UNCiAgICAjIE90aGVyIGFjdGlvbnMNCiAgICBpZiBhY3Rpb24gPT0gIm9uY2UiOg0KICAgICAgICByZWdpc3RyeVtrZXldID0gMQ0KICAgICAgICBvbmNla2V5ID0gKHRleHQsIGNhdGVnb3J5KQ0KICAgICAgICBpZiBvbmNlcmVnaXN0cnkuZ2V0KG9uY2VrZXkpOg0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIG9uY2VyZWdpc3RyeVtvbmNla2V5XSA9IDENCiAgICBlbGlmIGFjdGlvbiA9PSAiYWx3YXlzIjoNCiAgICAgICAgcGFzcw0KICAgIGVsaWYgYWN0aW9uID09ICJtb2R1bGUiOg0KICAgICAgICByZWdpc3RyeVtrZXldID0gMQ0KICAgICAgICBhbHRrZXkgPSAodGV4dCwgY2F0ZWdvcnksIDApDQogICAgICAgIGlmIHJlZ2lzdHJ5LmdldChhbHRrZXkpOg0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIHJlZ2lzdHJ5W2FsdGtleV0gPSAxDQogICAgZWxpZiBhY3Rpb24gPT0gImRlZmF1bHQiOg0KICAgICAgICByZWdpc3RyeVtrZXldID0gMQ0KICAgIGVsc2U6DQogICAgICAgICMgVW5yZWNvZ25pemVkIGFjdGlvbnMgYXJlIGVycm9ycw0KICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoDQogICAgICAgICAgICAgICJVbnJlY29nbml6ZWQgYWN0aW9uICglcikgaW4gd2FybmluZ3MuZmlsdGVyczpcbiAlcyIgJQ0KICAgICAgICAgICAgICAoYWN0aW9uLCBpdGVtKSkNCiAgICBpZiBub3QgY2FsbGFibGUoc2hvd3dhcm5pbmcpOg0KICAgICAgICByYWlzZSBUeXBlRXJyb3IoIndhcm5pbmdzLnNob3d3YXJuaW5nKCkgbXVzdCBiZSBzZXQgdG8gYSAiDQogICAgICAgICAgICAgICAgICAgICAgICAiZnVuY3Rpb24gb3IgbWV0aG9kIikNCiAgICAjIFByaW50IG1lc3NhZ2UgYW5kIGNvbnRleHQNCiAgICBzaG93d2FybmluZyhtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubykNCg0KDQpjbGFzcyBXYXJuaW5nTWVzc2FnZShvYmplY3QpOg0KDQogICAgIiIiSG9sZHMgdGhlIHJlc3VsdCBvZiBhIHNpbmdsZSBzaG93d2FybmluZygpIGNhbGwuIiIiDQoNCiAgICBfV0FSTklOR19ERVRBSUxTID0gKCJtZXNzYWdlIiwgImNhdGVnb3J5IiwgImZpbGVuYW1lIiwgImxpbmVubyIsICJmaWxlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJsaW5lIikNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubywgZmlsZT1Ob25lLA0KICAgICAgICAgICAgICAgICAgICBsaW5lPU5vbmUpOg0KICAgICAgICBsb2NhbF92YWx1ZXMgPSBsb2NhbHMoKQ0KICAgICAgICBmb3IgYXR0ciBpbiBzZWxmLl9XQVJOSU5HX0RFVEFJTFM6DQogICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIGxvY2FsX3ZhbHVlc1thdHRyXSkNCiAgICAgICAgc2VsZi5fY2F0ZWdvcnlfbmFtZSA9IGNhdGVnb3J5Ll9fbmFtZV9fIGlmIGNhdGVnb3J5IGVsc2UgTm9uZQ0KDQogICAgZGVmIF9fc3RyX18oc2VsZik6DQogICAgICAgIHJldHVybiAoInttZXNzYWdlIDogJXIsIGNhdGVnb3J5IDogJXIsIGZpbGVuYW1lIDogJXIsIGxpbmVubyA6ICVzLCAiDQogICAgICAgICAgICAgICAgICAgICJsaW5lIDogJXJ9IiAlIChzZWxmLm1lc3NhZ2UsIHNlbGYuX2NhdGVnb3J5X25hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpbGVuYW1lLCBzZWxmLmxpbmVubywgc2VsZi5saW5lKSkNCg0KDQpjbGFzcyBjYXRjaF93YXJuaW5ncyhvYmplY3QpOg0KDQogICAgIiIiQSBjb250ZXh0IG1hbmFnZXIgdGhhdCBjb3BpZXMgYW5kIHJlc3RvcmVzIHRoZSB3YXJuaW5ncyBmaWx0ZXIgdXBvbg0KICAgIGV4aXRpbmcgdGhlIGNvbnRleHQuDQoNCiAgICBUaGUgJ3JlY29yZCcgYXJndW1lbnQgc3BlY2lmaWVzIHdoZXRoZXIgd2FybmluZ3Mgc2hvdWxkIGJlIGNhcHR1cmVkIGJ5IGENCiAgICBjdXN0b20gaW1wbGVtZW50YXRpb24gb2Ygd2FybmluZ3Muc2hvd3dhcm5pbmcoKSBhbmQgYmUgYXBwZW5kZWQgdG8gYSBsaXN0DQogICAgcmV0dXJuZWQgYnkgdGhlIGNvbnRleHQgbWFuYWdlci4gT3RoZXJ3aXNlIE5vbmUgaXMgcmV0dXJuZWQgYnkgdGhlIGNvbnRleHQNCiAgICBtYW5hZ2VyLiBUaGUgb2JqZWN0cyBhcHBlbmRlZCB0byB0aGUgbGlzdCBhcmUgYXJndW1lbnRzIHdob3NlIGF0dHJpYnV0ZXMNCiAgICBtaXJyb3IgdGhlIGFyZ3VtZW50cyB0byBzaG93d2FybmluZygpLg0KDQogICAgVGhlICdtb2R1bGUnIGFyZ3VtZW50IGlzIHRvIHNwZWNpZnkgYW4gYWx0ZXJuYXRpdmUgbW9kdWxlIHRvIHRoZSBtb2R1bGUNCiAgICBuYW1lZCAnd2FybmluZ3MnIGFuZCBpbXBvcnRlZCB1bmRlciB0aGF0IG5hbWUuIFRoaXMgYXJndW1lbnQgaXMgb25seSB1c2VmdWwNCiAgICB3aGVuIHRlc3RpbmcgdGhlIHdhcm5pbmdzIG1vZHVsZSBpdHNlbGYuDQoNCiAgICAiIiINCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqLCByZWNvcmQ9RmFsc2UsIG1vZHVsZT1Ob25lKToNCiAgICAgICAgIiIiU3BlY2lmeSB3aGV0aGVyIHRvIHJlY29yZCB3YXJuaW5ncyBhbmQgaWYgYW4gYWx0ZXJuYXRpdmUgbW9kdWxlDQogICAgICAgIHNob3VsZCBiZSB1c2VkIG90aGVyIHRoYW4gc3lzLm1vZHVsZXNbJ3dhcm5pbmdzJ10uDQoNCiAgICAgICAgRm9yIGNvbXBhdGliaWxpdHkgd2l0aCBQeXRob24gMy4wLCBwbGVhc2UgY29uc2lkZXIgYWxsIGFyZ3VtZW50cyB0byBiZQ0KICAgICAgICBrZXl3b3JkLW9ubHkuDQoNCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuX3JlY29yZCA9IHJlY29yZA0KICAgICAgICBzZWxmLl9tb2R1bGUgPSBzeXMubW9kdWxlc1snd2FybmluZ3MnXSBpZiBtb2R1bGUgaXMgTm9uZSBlbHNlIG1vZHVsZQ0KICAgICAgICBzZWxmLl9lbnRlcmVkID0gRmFsc2UNCg0KICAgIGRlZiBfX3JlcHJfXyhzZWxmKToNCiAgICAgICAgYXJncyA9IFtdDQogICAgICAgIGlmIHNlbGYuX3JlY29yZDoNCiAgICAgICAgICAgIGFyZ3MuYXBwZW5kKCJyZWNvcmQ9VHJ1ZSIpDQogICAgICAgIGlmIHNlbGYuX21vZHVsZSBpcyBub3Qgc3lzLm1vZHVsZXNbJ3dhcm5pbmdzJ106DQogICAgICAgICAgICBhcmdzLmFwcGVuZCgibW9kdWxlPSVyIiAlIHNlbGYuX21vZHVsZSkNCiAgICAgICAgbmFtZSA9IHR5cGUoc2VsZikuX19uYW1lX18NCiAgICAgICAgcmV0dXJuICIlcyglcykiICUgKG5hbWUsICIsICIuam9pbihhcmdzKSkNCg0KICAgIGRlZiBfX2VudGVyX18oc2VsZik6DQogICAgICAgIGlmIHNlbGYuX2VudGVyZWQ6DQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBlbnRlciAlciB0d2ljZSIgJSBzZWxmKQ0KICAgICAgICBzZWxmLl9lbnRlcmVkID0gVHJ1ZQ0KICAgICAgICBzZWxmLl9maWx0ZXJzID0gc2VsZi5fbW9kdWxlLmZpbHRlcnMNCiAgICAgICAgc2VsZi5fbW9kdWxlLmZpbHRlcnMgPSBzZWxmLl9maWx0ZXJzWzpdDQogICAgICAgIHNlbGYuX3Nob3d3YXJuaW5nID0gc2VsZi5fbW9kdWxlLnNob3d3YXJuaW5nDQogICAgICAgIGlmIHNlbGYuX3JlY29yZDoNCiAgICAgICAgICAgIGxvZyA9IFtdDQogICAgICAgICAgICBkZWYgc2hvd3dhcm5pbmcoKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgICAgICAgICBsb2cuYXBwZW5kKFdhcm5pbmdNZXNzYWdlKCphcmdzLCAqKmt3YXJncykpDQogICAgICAgICAgICBzZWxmLl9tb2R1bGUuc2hvd3dhcm5pbmcgPSBzaG93d2FybmluZw0KICAgICAgICAgICAgcmV0dXJuIGxvZw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcmV0dXJuIE5vbmUNCg0KICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqZXhjX2luZm8pOg0KICAgICAgICBpZiBub3Qgc2VsZi5fZW50ZXJlZDoNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IGV4aXQgJXIgd2l0aG91dCBlbnRlcmluZyBmaXJzdCIgJSBzZWxmKQ0KICAgICAgICBzZWxmLl9tb2R1bGUuZmlsdGVycyA9IHNlbGYuX2ZpbHRlcnMNCiAgICAgICAgc2VsZi5fbW9kdWxlLnNob3d3YXJuaW5nID0gc2VsZi5fc2hvd3dhcm5pbmcNCg0KDQojIGZpbHRlcnMgY29udGFpbnMgYSBzZXF1ZW5jZSBvZiBmaWx0ZXIgNS10dXBsZXMNCiMgVGhlIGNvbXBvbmVudHMgb2YgdGhlIDUtdHVwbGUgYXJlOg0KIyAtIGFuIGFjdGlvbjogZXJyb3IsIGlnbm9yZSwgYWx3YXlzLCBkZWZhdWx0LCBtb2R1bGUsIG9yIG9uY2UNCiMgLSBhIGNvbXBpbGVkIHJlZ2V4IHRoYXQgbXVzdCBtYXRjaCB0aGUgd2FybmluZyBtZXNzYWdlDQojIC0gYSBjbGFzcyByZXByZXNlbnRpbmcgdGhlIHdhcm5pbmcgY2F0ZWdvcnkNCiMgLSBhIGNvbXBpbGVkIHJlZ2V4IHRoYXQgbXVzdCBtYXRjaCB0aGUgbW9kdWxlIHRoYXQgaXMgYmVpbmcgd2FybmVkDQojIC0gYSBsaW5lIG51bWJlciBmb3IgdGhlIGxpbmUgYmVpbmcgd2FybmluZywgb3IgMCB0byBtZWFuIGFueSBsaW5lDQojIElmIGVpdGhlciBpZiB0aGUgY29tcGlsZWQgcmVnZXhzIGFyZSBOb25lLCBtYXRjaCBhbnl0aGluZy4NCl93YXJuaW5nc19kZWZhdWx0cyA9IEZhbHNlDQp0cnk6DQogICAgZnJvbSBfd2FybmluZ3MgaW1wb3J0IChmaWx0ZXJzLCBfZGVmYXVsdGFjdGlvbiwgX29uY2VyZWdpc3RyeSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuLCB3YXJuX2V4cGxpY2l0KQ0KICAgIGRlZmF1bHRhY3Rpb24gPSBfZGVmYXVsdGFjdGlvbg0KICAgIG9uY2VyZWdpc3RyeSA9IF9vbmNlcmVnaXN0cnkNCiAgICBfd2FybmluZ3NfZGVmYXVsdHMgPSBUcnVlDQpleGNlcHQgSW1wb3J0RXJyb3I6DQogICAgZmlsdGVycyA9IFtdDQogICAgZGVmYXVsdGFjdGlvbiA9ICJkZWZhdWx0Ig0KICAgIG9uY2VyZWdpc3RyeSA9IHt9DQoNCg0KIyBNb2R1bGUgaW5pdGlhbGl6YXRpb24NCl9wcm9jZXNzb3B0aW9ucyhzeXMud2Fybm9wdGlvbnMpDQppZiBub3QgX3dhcm5pbmdzX2RlZmF1bHRzOg0KICAgIHNpbGVuY2UgPSBbSW1wb3J0V2FybmluZywgUGVuZGluZ0RlcHJlY2F0aW9uV2FybmluZ10NCiAgICBzaWxlbmNlLmFwcGVuZChEZXByZWNhdGlvbldhcm5pbmcpDQogICAgZm9yIGNscyBpbiBzaWxlbmNlOg0KICAgICAgICBzaW1wbGVmaWx0ZXIoImlnbm9yZSIsIGNhdGVnb3J5PWNscykNCiAgICBieXRlc193YXJuaW5nID0gc3lzLmZsYWdzLmJ5dGVzX3dhcm5pbmcNCiAgICBpZiBieXRlc193YXJuaW5nID4gMToNCiAgICAgICAgYnl0ZXNfYWN0aW9uID0gImVycm9yIg0KICAgIGVsaWYgYnl0ZXNfd2FybmluZzoNCiAgICAgICAgYnl0ZXNfYWN0aW9uID0gImRlZmF1bHQiDQogICAgZWxzZToNCiAgICAgICAgYnl0ZXNfYWN0aW9uID0gImlnbm9yZSINCiAgICBzaW1wbGVmaWx0ZXIoYnl0ZXNfYWN0aW9uLCBjYXRlZ29yeT1CeXRlc1dhcm5pbmcsIGFwcGVuZD0xKQ0KICAgICMgcmVzb3VyY2UgdXNhZ2Ugd2FybmluZ3MgYXJlIGVuYWJsZWQgYnkgZGVmYXVsdCBpbiBweWRlYnVnIG1vZGUNCiAgICBpZiBoYXNhdHRyKHN5cywgJ2dldHRvdGFscmVmY291bnQnKToNCiAgICAgICAgcmVzb3VyY2VfYWN0aW9uID0gImFsd2F5cyINCiAgICBlbHNlOg0KICAgICAgICByZXNvdXJjZV9hY3Rpb24gPSAiaWdub3JlIg0KICAgIHNpbXBsZWZpbHRlcihyZXNvdXJjZV9hY3Rpb24sIGNhdGVnb3J5PVJlc291cmNlV2FybmluZywgYXBwZW5kPTEpDQoNCmRlbCBfd2FybmluZ3NfZGVmYXVsdHMNCg==',
'/Lib/_struct.py':'IwojIFRoaXMgbW9kdWxlIGlzIGEgcHVyZSBQeXRob24gdmVyc2lvbiBvZiBweXB5Lm1vZHVsZS5zdHJ1Y3QuCiMgSXQgaXMgb25seSBpbXBvcnRlZCBpZiB0aGUgdmFzdGx5IGZhc3RlciBweXB5Lm1vZHVsZS5zdHJ1Y3QgaXMgbm90CiMgY29tcGlsZWQgaW4uICBGb3Igbm93IHdlIGtlZXAgdGhpcyB2ZXJzaW9uIGZvciByZWZlcmVuY2UgYW5kCiMgYmVjYXVzZSBweXB5Lm1vZHVsZS5zdHJ1Y3QgaXMgbm90IG9vdHlwZS1iYWNrZW5kLWZyaWVuZGx5IHlldC4KIwoKIyB0aGlzIG1vZHVsZSAnYm9ycm93ZWQnIGZyb20gCiMgaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvMTg2MjY0NTlhOWIyL2xpYl9weXB5L19zdHJ1Y3QucHk/YXQ9cHkzay1saXN0dmlld19zdHIKCiIiIkZ1bmN0aW9ucyB0byBjb252ZXJ0IGJldHdlZW4gUHl0aG9uIHZhbHVlcyBhbmQgQyBzdHJ1Y3RzLgpQeXRob24gc3RyaW5ncyBhcmUgdXNlZCB0byBob2xkIHRoZSBkYXRhIHJlcHJlc2VudGluZyB0aGUgQyBzdHJ1Y3QKYW5kIGFsc28gYXMgZm9ybWF0IHN0cmluZ3MgdG8gZGVzY3JpYmUgdGhlIGxheW91dCBvZiBkYXRhIGluIHRoZSBDIHN0cnVjdC4KClRoZSBvcHRpb25hbCBmaXJzdCBmb3JtYXQgY2hhciBpbmRpY2F0ZXMgYnl0ZSBvcmRlciwgc2l6ZSBhbmQgYWxpZ25tZW50OgogQDogbmF0aXZlIG9yZGVyLCBzaXplICYgYWxpZ25tZW50IChkZWZhdWx0KQogPTogbmF0aXZlIG9yZGVyLCBzdGQuIHNpemUgJiBhbGlnbm1lbnQKIDw6IGxpdHRsZS1lbmRpYW4sIHN0ZC4gc2l6ZSAmIGFsaWdubWVudAogPjogYmlnLWVuZGlhbiwgc3RkLiBzaXplICYgYWxpZ25tZW50CiAhOiBzYW1lIGFzID4KClRoZSByZW1haW5pbmcgY2hhcnMgaW5kaWNhdGUgdHlwZXMgb2YgYXJncyBhbmQgbXVzdCBtYXRjaCBleGFjdGx5Owp0aGVzZSBjYW4gYmUgcHJlY2VkZWQgYnkgYSBkZWNpbWFsIHJlcGVhdCBjb3VudDoKICAgeDogcGFkIGJ5dGUgKG5vIGRhdGEpOwogICBjOmNoYXI7CiAgIGI6c2lnbmVkIGJ5dGU7CiAgIEI6dW5zaWduZWQgYnl0ZTsKICAgaDpzaG9ydDsKICAgSDp1bnNpZ25lZCBzaG9ydDsKICAgaTppbnQ7CiAgIEk6dW5zaWduZWQgaW50OwogICBsOmxvbmc7CiAgIEw6dW5zaWduZWQgbG9uZzsKICAgZjpmbG9hdDsKICAgZDpkb3VibGUuClNwZWNpYWwgY2FzZXMgKHByZWNlZGluZyBkZWNpbWFsIGNvdW50IGluZGljYXRlcyBsZW5ndGgpOgogICBzOnN0cmluZyAoYXJyYXkgb2YgY2hhcik7IHA6IHBhc2NhbCBzdHJpbmcgKHdpdGggY291bnQgYnl0ZSkuClNwZWNpYWwgY2FzZSAob25seSBhdmFpbGFibGUgaW4gbmF0aXZlIGZvcm1hdCk6CiAgIFA6YW4gaW50ZWdlciB0eXBlIHRoYXQgaXMgd2lkZSBlbm91Z2ggdG8gaG9sZCBhIHBvaW50ZXIuClNwZWNpYWwgY2FzZSAobm90IGluIG5hdGl2ZSBtb2RlIHVubGVzcyAnbG9uZyBsb25nJyBpbiBwbGF0Zm9ybSBDKToKICAgcTpsb25nIGxvbmc7CiAgIFE6dW5zaWduZWQgbG9uZyBsb25nCldoaXRlc3BhY2UgYmV0d2VlbiBmb3JtYXRzIGlzIGlnbm9yZWQuCgpUaGUgdmFyaWFibGUgc3RydWN0LmVycm9yIGlzIGFuIGV4Y2VwdGlvbiByYWlzZWQgb24gZXJyb3JzLiIiIgoKaW1wb3J0IG1hdGgsIHN5cwoKIyBUT0RPOiBYWFggRmluZCBhIHdheSB0byBnZXQgaW5mb3JtYXRpb24gb24gbmF0aXZlIHNpemVzIGFuZCBhbGlnbm1lbnRzCmNsYXNzIFN0cnVjdEVycm9yKEV4Y2VwdGlvbik6CiAgICBwYXNzCmVycm9yID0gU3RydWN0RXJyb3IKZGVmIHVucGFja19pbnQoZGF0YSxpbmRleCxzaXplLGxlKToKICAgIGJ5dGVzID0gW2IgZm9yIGIgaW4gZGF0YVtpbmRleDppbmRleCtzaXplXV0KICAgIGlmIGxlID09ICdsaXR0bGUnOgogICAgICAgIGJ5dGVzLnJldmVyc2UoKQogICAgbnVtYmVyID0gMAogICAgZm9yIGIgaW4gYnl0ZXM6CiAgICAgICAgbnVtYmVyID0gbnVtYmVyIDw8IDggfCBiCiAgICByZXR1cm4gaW50KG51bWJlcikKCmRlZiB1bnBhY2tfc2lnbmVkX2ludChkYXRhLGluZGV4LHNpemUsbGUpOgogICAgbnVtYmVyID0gdW5wYWNrX2ludChkYXRhLGluZGV4LHNpemUsbGUpCiAgICBtYXggPSAyKiooc2l6ZSo4KQogICAgaWYgbnVtYmVyID4gMioqKHNpemUqOCAtIDEpIC0gMToKICAgICAgICBudW1iZXIgPSBpbnQoLTEqKG1heCAtIG51bWJlcikpCiAgICByZXR1cm4gbnVtYmVyCgpJTkZJTklUWSA9IDFlMjAwICogMWUyMDAKTkFOID0gSU5GSU5JVFkgLyBJTkZJTklUWQoKZGVmIHVucGFja19jaGFyKGRhdGEsaW5kZXgsc2l6ZSxsZSk6CiAgICByZXR1cm4gZGF0YVtpbmRleDppbmRleCtzaXplXQoKZGVmIHBhY2tfaW50KG51bWJlcixzaXplLGxlKToKICAgIHg9bnVtYmVyCiAgICByZXM9W10KICAgIGZvciBpIGluIHJhbmdlKHNpemUpOgogICAgICAgIHJlcy5hcHBlbmQoeCYweGZmKQogICAgICAgIHggPj49IDgKICAgIGlmIGxlID09ICdiaWcnOgogICAgICAgIHJlcy5yZXZlcnNlKCkKICAgIHJldHVybiBieXRlcyhyZXMpCgpkZWYgcGFja19zaWduZWRfaW50KG51bWJlcixzaXplLGxlKToKICAgIGlmIG5vdCBpc2luc3RhbmNlKG51bWJlciwgaW50KToKICAgICAgICByYWlzZSBTdHJ1Y3RFcnJvcigiYXJndW1lbnQgZm9yIGksSSxsLEwscSxRLGgsSCBtdXN0IGJlIGludGVnZXIiKQogICAgaWYgIG51bWJlciA+IDIqKig4KnNpemUtMSktMSBvciBudW1iZXIgPCAtMSoyKiooOCpzaXplLTEpOgogICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoIk51bWJlcjolaSB0b28gbGFyZ2UgdG8gY29udmVydCIgJSBudW1iZXIpCiAgICByZXR1cm4gcGFja19pbnQobnVtYmVyLHNpemUsbGUpCgpkZWYgcGFja191bnNpZ25lZF9pbnQobnVtYmVyLHNpemUsbGUpOgogICAgaWYgbm90IGlzaW5zdGFuY2UobnVtYmVyLCBpbnQpOgogICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCJhcmd1bWVudCBmb3IgaSxJLGwsTCxxLFEsaCxIIG11c3QgYmUgaW50ZWdlciIpCiAgICBpZiBudW1iZXIgPCAwOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY2FuJ3QgY29udmVydCBuZWdhdGl2ZSBsb25nIHRvIHVuc2lnbmVkIikKICAgIGlmIG51bWJlciA+IDIqKig4KnNpemUpLTE6CiAgICAgICAgcmFpc2UgT3ZlcmZsb3dFcnJvcigiTnVtYmVyOiVpIHRvbyBsYXJnZSB0byBjb252ZXJ0IiAlIG51bWJlcikKICAgIHJldHVybiBwYWNrX2ludChudW1iZXIsc2l6ZSxsZSkKCmRlZiBwYWNrX2NoYXIoY2hhcixzaXplLGxlKToKICAgIHJldHVybiBieXRlcyhjaGFyKQoKZGVmIGlzaW5mKHgpOgogICAgcmV0dXJuIHggIT0gMC4wIGFuZCB4IC8gMiA9PSB4CmRlZiBpc25hbih2KToKICAgIHJldHVybiB2ICE9IHYqMS4wIG9yICh2ID09IDEuMCBhbmQgdiA9PSAyLjApCgpkZWYgcGFja19mbG9hdCh4LCBzaXplLCBsZSk6CiAgICB1bnNpZ25lZCA9IGZsb2F0X3BhY2soeCwgc2l6ZSkKICAgIHJlc3VsdCA9IFtdCiAgICBmb3IgaSBpbiByYW5nZSg4KToKICAgICAgICByZXN1bHQuYXBwZW5kKCh1bnNpZ25lZCA+PiAoaSAqIDgpKSAmIDB4RkYpCiAgICBpZiBsZSA9PSAiYmlnIjoKICAgICAgICByZXN1bHQucmV2ZXJzZSgpCiAgICByZXR1cm4gYnl0ZXMocmVzdWx0KQoKZGVmIHVucGFja19mbG9hdChkYXRhLCBpbmRleCwgc2l6ZSwgbGUpOgogICAgYmluYXJ5ID0gW2RhdGFbaV0gZm9yIGkgaW4gcmFuZ2UoaW5kZXgsIGluZGV4ICsgOCldCiAgICBpZiBsZSA9PSAiYmlnIjoKICAgICAgICBiaW5hcnkucmV2ZXJzZSgpCiAgICB1bnNpZ25lZCA9IDAKICAgIGZvciBpIGluIHJhbmdlKDgpOgogICAgICAgIHVuc2lnbmVkIHw9IGJpbmFyeVtpXSA8PCAoaSAqIDgpCiAgICByZXR1cm4gZmxvYXRfdW5wYWNrKHVuc2lnbmVkLCBzaXplLCBsZSkKCmRlZiByb3VuZF90b19uZWFyZXN0KHgpOgogICAgIiIiUHl0aG9uIDMgc3R5bGUgcm91bmQ6ICByb3VuZCBhIGZsb2F0IHggdG8gdGhlIG5lYXJlc3QgaW50LCBidXQKICAgIHVubGlrZSB0aGUgYnVpbHRpbiBQeXRob24gMi54IHJvdW5kIGZ1bmN0aW9uOgoKICAgICAgLSByZXR1cm4gYW4gaW50LCBub3QgYSBmbG9hdAogICAgICAtIGRvIHJvdW5kLWhhbGYtdG8tZXZlbiwgbm90IHJvdW5kLWhhbGYtYXdheS1mcm9tLXplcm8uCgogICAgV2UgYXNzdW1lIHRoYXQgeCBpcyBmaW5pdGUgYW5kIG5vbm5lZ2F0aXZlOyBleGNlcHQgd3JvbmcgcmVzdWx0cwogICAgaWYgeW91IHVzZSB0aGlzIGZvciBuZWdhdGl2ZSB4LgoKICAgICIiIgogICAgaW50X3BhcnQgPSBpbnQoeCkKICAgIGZyYWNfcGFydCA9IHggLSBpbnRfcGFydAogICAgaWYgZnJhY19wYXJ0ID4gMC41IG9yIGZyYWNfcGFydCA9PSAwLjUgYW5kIGludF9wYXJ0ICYgMSA9PSAxOgogICAgICAgIGludF9wYXJ0ICs9IDEKICAgIHJldHVybiBpbnRfcGFydAoKZGVmIGZsb2F0X3VucGFjayhRLCBzaXplLCBsZSk6CiAgICAiIiJDb252ZXJ0IGEgMzItYml0IG9yIDY0LWJpdCBpbnRlZ2VyIGNyZWF0ZWQKICAgIGJ5IGZsb2F0X3BhY2sgaW50byBhIFB5dGhvbiBmbG9hdC4iIiIKCiAgICBpZiBzaXplID09IDg6CiAgICAgICAgTUlOX0VYUCA9IC0xMDIxICAjID0gc3lzLmZsb2F0X2luZm8ubWluX2V4cAogICAgICAgIE1BWF9FWFAgPSAxMDI0ICAgIyA9IHN5cy5mbG9hdF9pbmZvLm1heF9leHAKICAgICAgICBNQU5UX0RJRyA9IDUzICAgICMgPSBzeXMuZmxvYXRfaW5mby5tYW50X2RpZwogICAgICAgIEJJVFMgPSA2NAogICAgZWxpZiBzaXplID09IDQ6CiAgICAgICAgTUlOX0VYUCA9IC0xMjUgICAjIEMncyBGTFRfTUlOX0VYUAogICAgICAgIE1BWF9FWFAgPSAxMjggICAgIyBGTFRfTUFYX0VYUAogICAgICAgIE1BTlRfRElHID0gMjQgICAgIyBGTFRfTUFOVF9ESUcKICAgICAgICBCSVRTID0gMzIKICAgIGVsc2U6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCBzaXplIHZhbHVlIikKCiAgICBpZiBRID4+IEJJVFM6CiAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImlucHV0IG91dCBvZiByYW5nZSIpCgogICAgIyBleHRyYWN0IHBpZWNlcwogICAgc2lnbiA9IFEgPj4gQklUUyAtIDEKICAgIGV4cCA9IChRICYgKCgxIDw8IEJJVFMgLSAxKSAtICgxIDw8IE1BTlRfRElHIC0gMSkpKSA+PiBNQU5UX0RJRyAtIDEKICAgIG1hbnQgPSBRICYgKCgxIDw8IE1BTlRfRElHIC0gMSkgLSAxKQoKICAgIGlmIGV4cCA9PSBNQVhfRVhQIC0gTUlOX0VYUCArIDI6CiAgICAgICAgIyBuYW4gb3IgaW5maW5pdHkKICAgICAgICByZXN1bHQgPSBmbG9hdCgnbmFuJykgaWYgbWFudCBlbHNlIGZsb2F0KCdpbmYnKQogICAgZWxpZiBleHAgPT0gMDoKICAgICAgICAjIHN1Ym5vcm1hbCBvciB6ZXJvCiAgICAgICAgcmVzdWx0ID0gbWF0aC5sZGV4cChmbG9hdChtYW50KSwgTUlOX0VYUCAtIE1BTlRfRElHKQogICAgZWxzZToKICAgICAgICAjIG5vcm1hbAogICAgICAgIG1hbnQgKz0gMSA8PCBNQU5UX0RJRyAtIDEKICAgICAgICByZXN1bHQgPSBtYXRoLmxkZXhwKGZsb2F0KG1hbnQpLCBleHAgKyBNSU5fRVhQIC0gTUFOVF9ESUcgLSAxKQogICAgcmV0dXJuIC1yZXN1bHQgaWYgc2lnbiBlbHNlIHJlc3VsdAoKCmRlZiBmbG9hdF9wYWNrKHgsIHNpemUpOgogICAgIiIiQ29udmVydCBhIFB5dGhvbiBmbG9hdCB4IGludG8gYSA2NC1iaXQgdW5zaWduZWQgaW50ZWdlcgogICAgd2l0aCB0aGUgc2FtZSBieXRlIHJlcHJlc2VudGF0aW9uLiIiIgoKICAgIGlmIHNpemUgPT0gODoKICAgICAgICBNSU5fRVhQID0gLTEwMjEgICMgPSBzeXMuZmxvYXRfaW5mby5taW5fZXhwCiAgICAgICAgTUFYX0VYUCA9IDEwMjQgICAjID0gc3lzLmZsb2F0X2luZm8ubWF4X2V4cAogICAgICAgIE1BTlRfRElHID0gNTMgICAgIyA9IHN5cy5mbG9hdF9pbmZvLm1hbnRfZGlnCiAgICAgICAgQklUUyA9IDY0CiAgICBlbGlmIHNpemUgPT0gNDoKICAgICAgICBNSU5fRVhQID0gLTEyNSAgICMgQydzIEZMVF9NSU5fRVhQCiAgICAgICAgTUFYX0VYUCA9IDEyOCAgICAjIEZMVF9NQVhfRVhQCiAgICAgICAgTUFOVF9ESUcgPSAyNCAgICAjIEZMVF9NQU5UX0RJRwogICAgICAgIEJJVFMgPSAzMgogICAgZWxzZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHNpemUgdmFsdWUiKQoKICAgIHNpZ24gPSBtYXRoLmNvcHlzaWduKDEuMCwgeCkgPCAwLjAKICAgIGlmIG1hdGguaXNpbmYoeCk6CiAgICAgICAgbWFudCA9IDAKICAgICAgICBleHAgPSBNQVhfRVhQIC0gTUlOX0VYUCArIDIKICAgIGVsaWYgbWF0aC5pc25hbih4KToKICAgICAgICBtYW50ID0gMSA8PCAoTUFOVF9ESUctMikgIyBvdGhlciB2YWx1ZXMgcG9zc2libGUKICAgICAgICBleHAgPSBNQVhfRVhQIC0gTUlOX0VYUCArIDIKICAgIGVsaWYgeCA9PSAwLjA6CiAgICAgICAgbWFudCA9IDAKICAgICAgICBleHAgPSAwCiAgICBlbHNlOgogICAgICAgIG0sIGUgPSBtYXRoLmZyZXhwKGFicyh4KSkgICMgYWJzKHgpID09IG0gKiAyKiplCiAgICAgICAgZXhwID0gZSAtIChNSU5fRVhQIC0gMSkKICAgICAgICBpZiBleHAgPiAwOgogICAgICAgICAgICAjIE5vcm1hbCBjYXNlLgogICAgICAgICAgICBtYW50ID0gcm91bmRfdG9fbmVhcmVzdChtICogKDEgPDwgTUFOVF9ESUcpKQogICAgICAgICAgICBtYW50IC09IDEgPDwgTUFOVF9ESUcgLSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBTdWJub3JtYWwgY2FzZS4KICAgICAgICAgICAgaWYgZXhwICsgTUFOVF9ESUcgLSAxID49IDA6CiAgICAgICAgICAgICAgICBtYW50ID0gcm91bmRfdG9fbmVhcmVzdChtICogKDEgPDwgZXhwICsgTUFOVF9ESUcgLSAxKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG1hbnQgPSAwCiAgICAgICAgICAgIGV4cCA9IDAKCiAgICAgICAgIyBTcGVjaWFsIGNhc2U6IHJvdW5kaW5nIHByb2R1Y2VkIGEgTUFOVF9ESUctYml0IG1hbnRpc3NhLgogICAgICAgIGFzc2VydCAwIDw9IG1hbnQgPD0gMSA8PCBNQU5UX0RJRyAtIDEKICAgICAgICBpZiBtYW50ID09IDEgPDwgTUFOVF9ESUcgLSAxOgogICAgICAgICAgICBtYW50ID0gMAogICAgICAgICAgICBleHAgKz0gMQoKICAgICAgICAjIFJhaXNlIG9uIG92ZXJmbG93IChpbiBzb21lIGNpcmN1bXN0YW5jZXMsIG1heSB3YW50IHRvIHJldHVybgogICAgICAgICMgaW5maW5pdHkgaW5zdGVhZCkuCiAgICAgICAgaWYgZXhwID49IE1BWF9FWFAgLSBNSU5fRVhQICsgMjoKICAgICAgICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoImZsb2F0IHRvbyBsYXJnZSB0byBwYWNrIGluIHRoaXMgZm9ybWF0IikKCiAgICAjIGNoZWNrIGNvbnN0cmFpbnRzCiAgICBhc3NlcnQgMCA8PSBtYW50IDwgMSA8PCBNQU5UX0RJRyAtIDEKICAgIGFzc2VydCAwIDw9IGV4cCA8PSBNQVhfRVhQIC0gTUlOX0VYUCArIDIKICAgIGFzc2VydCAwIDw9IHNpZ24gPD0gMQogICAgcmV0dXJuICgoc2lnbiA8PCBCSVRTIC0gMSkgfCAoZXhwIDw8IE1BTlRfRElHIC0gMSkpIHwgbWFudAoKCmJpZ19lbmRpYW5fZm9ybWF0ID0gewogICAgJ3gnOnsgJ3NpemUnIDogMSwgJ2FsaWdubWVudCcgOiAwLCAncGFjaycgOiBOb25lLCAndW5wYWNrJyA6IE5vbmV9LAogICAgJ2InOnsgJ3NpemUnIDogMSwgJ2FsaWdubWVudCcgOiAwLCAncGFjaycgOiBwYWNrX3NpZ25lZF9pbnQsICd1bnBhY2snIDogdW5wYWNrX3NpZ25lZF9pbnR9LAogICAgJ0InOnsgJ3NpemUnIDogMSwgJ2FsaWdubWVudCcgOiAwLCAncGFjaycgOiBwYWNrX3Vuc2lnbmVkX2ludCwgJ3VucGFjaycgOiB1bnBhY2tfaW50fSwKICAgICdjJzp7ICdzaXplJyA6IDEsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja19jaGFyLCAndW5wYWNrJyA6IHVucGFja19jaGFyfSwKICAgICdzJzp7ICdzaXplJyA6IDEsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogTm9uZSwgJ3VucGFjaycgOiBOb25lfSwKICAgICdwJzp7ICdzaXplJyA6IDEsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogTm9uZSwgJ3VucGFjaycgOiBOb25lfSwKICAgICdoJzp7ICdzaXplJyA6IDIsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja19zaWduZWRfaW50LCAndW5wYWNrJyA6IHVucGFja19zaWduZWRfaW50fSwKICAgICdIJzp7ICdzaXplJyA6IDIsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja191bnNpZ25lZF9pbnQsICd1bnBhY2snIDogdW5wYWNrX2ludH0sCiAgICAnaSc6eyAnc2l6ZScgOiA0LCAnYWxpZ25tZW50JyA6IDAsICdwYWNrJyA6IHBhY2tfc2lnbmVkX2ludCwgJ3VucGFjaycgOiB1bnBhY2tfc2lnbmVkX2ludH0sCiAgICAnSSc6eyAnc2l6ZScgOiA0LCAnYWxpZ25tZW50JyA6IDAsICdwYWNrJyA6IHBhY2tfdW5zaWduZWRfaW50LCAndW5wYWNrJyA6IHVucGFja19pbnR9LAogICAgJ2wnOnsgJ3NpemUnIDogNCwgJ2FsaWdubWVudCcgOiAwLCAncGFjaycgOiBwYWNrX3NpZ25lZF9pbnQsICd1bnBhY2snIDogdW5wYWNrX3NpZ25lZF9pbnR9LAogICAgJ0wnOnsgJ3NpemUnIDogNCwgJ2FsaWdubWVudCcgOiAwLCAncGFjaycgOiBwYWNrX3Vuc2lnbmVkX2ludCwgJ3VucGFjaycgOiB1bnBhY2tfaW50fSwKICAgICdxJzp7ICdzaXplJyA6IDgsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja19zaWduZWRfaW50LCAndW5wYWNrJyA6IHVucGFja19zaWduZWRfaW50fSwKICAgICdRJzp7ICdzaXplJyA6IDgsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja191bnNpZ25lZF9pbnQsICd1bnBhY2snIDogdW5wYWNrX2ludH0sCiAgICAnZic6eyAnc2l6ZScgOiA0LCAnYWxpZ25tZW50JyA6IDAsICdwYWNrJyA6IHBhY2tfZmxvYXQsICd1bnBhY2snIDogdW5wYWNrX2Zsb2F0fSwKICAgICdkJzp7ICdzaXplJyA6IDgsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja19mbG9hdCwgJ3VucGFjaycgOiB1bnBhY2tfZmxvYXR9LAogICAgfQpkZWZhdWx0ID0gYmlnX2VuZGlhbl9mb3JtYXQKZm9ybWF0bW9kZT17ICc8JyA6IChkZWZhdWx0LCAnbGl0dGxlJyksCiAgICAgICAgICAgICAnPicgOiAoZGVmYXVsdCwgJ2JpZycpLAogICAgICAgICAgICAgJyEnIDogKGRlZmF1bHQsICdiaWcnKSwKICAgICAgICAgICAgICc9JyA6IChkZWZhdWx0LCBzeXMuYnl0ZW9yZGVyKSwKICAgICAgICAgICAgICdAJyA6IChkZWZhdWx0LCBzeXMuYnl0ZW9yZGVyKQogICAgICAgICAgICB9CgpkZWYgZ2V0bW9kZShmbXQpOgogICAgdHJ5OgogICAgICAgIGZvcm1hdGRlZixlbmRpYW5uZXNzID0gZm9ybWF0bW9kZVtmbXRbMF1dCiAgICAgICAgaW5kZXggPSAxCiAgICBleGNlcHQgKEluZGV4RXJyb3IsIEtleUVycm9yKToKICAgICAgICBmb3JtYXRkZWYsZW5kaWFubmVzcyA9IGZvcm1hdG1vZGVbJ0AnXQogICAgICAgIGluZGV4ID0gMAogICAgcmV0dXJuIGZvcm1hdGRlZixlbmRpYW5uZXNzLGluZGV4CmRlZiBnZXROdW0oZm10LGkpOgogICAgbnVtPU5vbmUKICAgIGN1ciA9IGZtdFtpXQogICAgd2hpbGUgKCcwJzw9IGN1ciApIGFuZCAoIGN1ciA8PSAnOScpOgogICAgICAgIGlmIG51bSA9PSBOb25lOgogICAgICAgICAgICBudW0gPSBpbnQoY3VyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG51bSA9IDEwKm51bSArIGludChjdXIpCiAgICAgICAgaSArPSAxCiAgICAgICAgY3VyID0gZm10W2ldCiAgICByZXR1cm4gbnVtLGkKCmRlZiBjYWxjc2l6ZShmbXQpOgogICAgIiIiY2FsY3NpemUoZm10KSAtPiBpbnQKICAgIFJldHVybiBzaXplIG9mIEMgc3RydWN0IGRlc2NyaWJlZCBieSBmb3JtYXQgc3RyaW5nIGZtdC4KICAgIFNlZSBzdHJ1Y3QuX19kb2NfXyBmb3IgbW9yZSBvbiBmb3JtYXQgc3RyaW5ncy4iIiIKCiAgICBmb3JtYXRkZWYsZW5kaWFubmVzcyxpID0gZ2V0bW9kZShmbXQpCiAgICBudW0gPSAwCiAgICByZXN1bHQgPSAwCiAgICB3aGlsZSBpPGxlbihmbXQpOgogICAgICAgIG51bSxpID0gZ2V0TnVtKGZtdCxpKQogICAgICAgIGN1ciA9IGZtdFtpXQogICAgICAgIHRyeToKICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0ZGVmW2N1cl0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCIlcyBpcyBub3QgYSB2YWxpZCBmb3JtYXQiICUgY3VyKQogICAgICAgIGlmIG51bSAhPSBOb25lIDoKICAgICAgICAgICAgcmVzdWx0ICs9IG51bSpmb3JtYXRbJ3NpemUnXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3VsdCArPSBmb3JtYXRbJ3NpemUnXQogICAgICAgIG51bSA9IDAKICAgICAgICBpICs9IDEKICAgIHJldHVybiByZXN1bHQKCmRlZiBwYWNrKGZtdCwqYXJncyk6CiAgICAiIiJwYWNrKGZtdCwgdjEsIHYyLCAuLi4pIC0+IHN0cmluZwogICAgICAgUmV0dXJuIHN0cmluZyBjb250YWluaW5nIHZhbHVlcyB2MSwgdjIsIC4uLiBwYWNrZWQgYWNjb3JkaW5nIHRvIGZtdC4KICAgICAgIFNlZSBzdHJ1Y3QuX19kb2NfXyBmb3IgbW9yZSBvbiBmb3JtYXQgc3RyaW5ncy4iIiIKICAgIGZvcm1hdGRlZixlbmRpYW5uZXNzLGkgPSBnZXRtb2RlKGZtdCkKICAgIGFyZ3MgPSBsaXN0KGFyZ3MpCiAgICBuX2FyZ3MgPSBsZW4oYXJncykKICAgIHJlc3VsdCA9IFtdCiAgICB3aGlsZSBpPGxlbihmbXQpOgogICAgICAgIG51bSxpID0gZ2V0TnVtKGZtdCxpKQogICAgICAgIGN1ciA9IGZtdFtpXQogICAgICAgIHRyeToKICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0ZGVmW2N1cl0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCIlcyBpcyBub3QgYSB2YWxpZCBmb3JtYXQiICUgY3VyKQogICAgICAgIGlmIG51bSA9PSBOb25lIDoKICAgICAgICAgICAgbnVtX3MgPSAwCiAgICAgICAgICAgIG51bSA9IDEKICAgICAgICBlbHNlOgogICAgICAgICAgICBudW1fcyA9IG51bQoKICAgICAgICBpZiBjdXIgPT0gJ3gnOgogICAgICAgICAgICByZXN1bHQgKz0gW2InXDAnKm51bV0KICAgICAgICBlbGlmIGN1ciA9PSAncyc6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYXJnc1swXSwgYnl0ZXMpOgogICAgICAgICAgICAgICAgcGFkZGluZyA9IG51bSAtIGxlbihhcmdzWzBdKQogICAgICAgICAgICAgICAgcmVzdWx0ICs9IFthcmdzWzBdWzpudW1dICsgYidcMCcqcGFkZGluZ10KICAgICAgICAgICAgICAgIGFyZ3MucG9wKDApCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBTdHJ1Y3RFcnJvcigiYXJnIGZvciBzdHJpbmcgZm9ybWF0IG5vdCBhIHN0cmluZyIpCiAgICAgICAgZWxpZiBjdXIgPT0gJ3AnOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGFyZ3NbMF0sIGJ5dGVzKToKICAgICAgICAgICAgICAgIHBhZGRpbmcgPSBudW0gLSBsZW4oYXJnc1swXSkgLSAxCgogICAgICAgICAgICAgICAgaWYgcGFkZGluZyA+IDA6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IFtieXRlcyhbbGVuKGFyZ3NbMF0pXSkgKyBhcmdzWzBdWzpudW0tMV0gKyBiJ1wwJypwYWRkaW5nXQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBudW08MjU1OgogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gW2J5dGVzKFtudW0tMV0pICsgYXJnc1swXVs6bnVtLTFdXQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBbYnl0ZXMoWzI1NV0pICsgYXJnc1swXVs6bnVtLTFdXQogICAgICAgICAgICAgICAgYXJncy5wb3AoMCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCJhcmcgZm9yIHN0cmluZyBmb3JtYXQgbm90IGEgc3RyaW5nIikKCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgbGVuKGFyZ3MpIDwgbnVtOgogICAgICAgICAgICAgICAgcmFpc2UgU3RydWN0RXJyb3IoImluc3VmZmljaWVudCBhcmd1bWVudHMgdG8gcGFjayIpCiAgICAgICAgICAgIGZvciB2YXIgaW4gYXJnc1s6bnVtXToKICAgICAgICAgICAgICAgIHJlc3VsdCArPSBbZm9ybWF0WydwYWNrJ10odmFyLGZvcm1hdFsnc2l6ZSddLGVuZGlhbm5lc3MpXQogICAgICAgICAgICBhcmdzPWFyZ3NbbnVtOl0KICAgICAgICBudW0gPSBOb25lCiAgICAgICAgaSArPSAxCiAgICBpZiBsZW4oYXJncykgIT0gMDoKICAgICAgICByYWlzZSBTdHJ1Y3RFcnJvcigidG9vIG1hbnkgYXJndW1lbnRzIGZvciBwYWNrIGZvcm1hdCIpCiAgICByZXR1cm4gYicnLmpvaW4ocmVzdWx0KQoKZGVmIHVucGFjayhmbXQsZGF0YSk6CiAgICAiIiJ1bnBhY2soZm10LCBzdHJpbmcpIC0+ICh2MSwgdjIsIC4uLikKICAgICAgIFVucGFjayB0aGUgc3RyaW5nLCBjb250YWluaW5nIHBhY2tlZCBDIHN0cnVjdHVyZSBkYXRhLCBhY2NvcmRpbmcKICAgICAgIHRvIGZtdC4gIFJlcXVpcmVzIGxlbihzdHJpbmcpPT1jYWxjc2l6ZShmbXQpLgogICAgICAgU2VlIHN0cnVjdC5fX2RvY19fIGZvciBtb3JlIG9uIGZvcm1hdCBzdHJpbmdzLiIiIgogICAgZm9ybWF0ZGVmLGVuZGlhbm5lc3MsaSA9IGdldG1vZGUoZm10KQogICAgaiA9IDAKICAgIG51bSA9IDAKICAgIHJlc3VsdCA9IFtdCiAgICBsZW5ndGg9IGNhbGNzaXplKGZtdCkKICAgIGlmIGxlbmd0aCAhPSBsZW4gKGRhdGEpOgogICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCJ1bnBhY2sgc3RyIHNpemUgZG9lcyBub3QgbWF0Y2ggZm9ybWF0IikKICAgIHdoaWxlIGk8bGVuKGZtdCk6CiAgICAgICAgbnVtLGk9Z2V0TnVtKGZtdCxpKQogICAgICAgIGN1ciA9IGZtdFtpXQogICAgICAgIGkgKz0gMQogICAgICAgIHRyeToKICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0ZGVmW2N1cl0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCIlcyBpcyBub3QgYSB2YWxpZCBmb3JtYXQiICUgY3VyKQoKICAgICAgICBpZiBub3QgbnVtIDoKICAgICAgICAgICAgbnVtID0gMQoKICAgICAgICBpZiBjdXIgPT0gJ3gnOgogICAgICAgICAgICBqICs9IG51bQogICAgICAgIGVsaWYgY3VyID09ICdzJzoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChkYXRhW2o6aitudW1dKQogICAgICAgICAgICBqICs9IG51bQogICAgICAgIGVsaWYgY3VyID09ICdwJzoKICAgICAgICAgICAgbj1kYXRhW2pdCiAgICAgICAgICAgIGlmIG4gPj0gbnVtOgogICAgICAgICAgICAgICAgbiA9IG51bS0xCiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoZGF0YVtqKzE6aituKzFdKQogICAgICAgICAgICBqICs9IG51bQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGZvciBuIGluIHJhbmdlKG51bSk6CiAgICAgICAgICAgICAgICByZXN1bHQgKz0gW2Zvcm1hdFsndW5wYWNrJ10oZGF0YSxqLGZvcm1hdFsnc2l6ZSddLGVuZGlhbm5lc3MpXQogICAgICAgICAgICAgICAgaiArPSBmb3JtYXRbJ3NpemUnXQoKICAgIHJldHVybiB0dXBsZShyZXN1bHQpCgpkZWYgcGFja19pbnRvKGZtdCwgYnVmLCBvZmZzZXQsICphcmdzKToKICAgIGRhdGEgPSBwYWNrKGZtdCwgKmFyZ3MpCiAgICBidWZmZXIoYnVmKVtvZmZzZXQ6b2Zmc2V0K2xlbihkYXRhKV0gPSBkYXRhCgpkZWYgdW5wYWNrX2Zyb20oZm10LCBidWYsIG9mZnNldD0wKToKICAgIHNpemUgPSBjYWxjc2l6ZShmbXQpCiAgICBkYXRhID0gYnVmZmVyKGJ1Zilbb2Zmc2V0Om9mZnNldCtzaXplXQogICAgaWYgbGVuKGRhdGEpICE9IHNpemU6CiAgICAgICAgcmFpc2UgZXJyb3IoInVucGFja19mcm9tIHJlcXVpcmVzIGEgYnVmZmVyIG9mIGF0IGxlYXN0ICVkIGJ5dGVzIgogICAgICAgICAgICAgICAgICAgICUgKHNpemUsKSkKICAgIHJldHVybiB1bnBhY2soZm10LCBkYXRhKQoKZGVmIF9jbGVhcmNhY2hlKCk6CiAgICAiQ2xlYXIgdGhlIGludGVybmFsIGNhY2hlLiIKICAgICMgTm8gY2FjaGUgaW4gdGhpcyBpbXBsZW1lbnRhdGlvbgo=',
'/Lib/difflib.py':'IyEgL3Vzci9iaW4vZW52IHB5dGhvbjMKCiIiIgpNb2R1bGUgZGlmZmxpYiAtLSBoZWxwZXJzIGZvciBjb21wdXRpbmcgZGVsdGFzIGJldHdlZW4gb2JqZWN0cy4KCkZ1bmN0aW9uIGdldF9jbG9zZV9tYXRjaGVzKHdvcmQsIHBvc3NpYmlsaXRpZXMsIG49MywgY3V0b2ZmPTAuNik6CiAgICBVc2UgU2VxdWVuY2VNYXRjaGVyIHRvIHJldHVybiBsaXN0IG9mIHRoZSBiZXN0ICJnb29kIGVub3VnaCIgbWF0Y2hlcy4KCkZ1bmN0aW9uIGNvbnRleHRfZGlmZihhLCBiKToKICAgIEZvciB0d28gbGlzdHMgb2Ygc3RyaW5ncywgcmV0dXJuIGEgZGVsdGEgaW4gY29udGV4dCBkaWZmIGZvcm1hdC4KCkZ1bmN0aW9uIG5kaWZmKGEsIGIpOgogICAgUmV0dXJuIGEgZGVsdGE6IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gYGFgIGFuZCBgYmAgKGxpc3RzIG9mIHN0cmluZ3MpLgoKRnVuY3Rpb24gcmVzdG9yZShkZWx0YSwgd2hpY2gpOgogICAgUmV0dXJuIG9uZSBvZiB0aGUgdHdvIHNlcXVlbmNlcyB0aGF0IGdlbmVyYXRlZCBhbiBuZGlmZiBkZWx0YS4KCkZ1bmN0aW9uIHVuaWZpZWRfZGlmZihhLCBiKToKICAgIEZvciB0d28gbGlzdHMgb2Ygc3RyaW5ncywgcmV0dXJuIGEgZGVsdGEgaW4gdW5pZmllZCBkaWZmIGZvcm1hdC4KCkNsYXNzIFNlcXVlbmNlTWF0Y2hlcjoKICAgIEEgZmxleGlibGUgY2xhc3MgZm9yIGNvbXBhcmluZyBwYWlycyBvZiBzZXF1ZW5jZXMgb2YgYW55IHR5cGUuCgpDbGFzcyBEaWZmZXI6CiAgICBGb3IgcHJvZHVjaW5nIGh1bWFuLXJlYWRhYmxlIGRlbHRhcyBmcm9tIHNlcXVlbmNlcyBvZiBsaW5lcyBvZiB0ZXh0LgoKQ2xhc3MgSHRtbERpZmY6CiAgICBGb3IgcHJvZHVjaW5nIEhUTUwgc2lkZSBieSBzaWRlIGNvbXBhcmlzb24gd2l0aCBjaGFuZ2UgaGlnaGxpZ2h0cy4KIiIiCgpfX2FsbF9fID0gWydnZXRfY2xvc2VfbWF0Y2hlcycsICduZGlmZicsICdyZXN0b3JlJywgJ1NlcXVlbmNlTWF0Y2hlcicsCiAgICAgICAgICAgJ0RpZmZlcicsJ0lTX0NIQVJBQ1RFUl9KVU5LJywgJ0lTX0xJTkVfSlVOSycsICdjb250ZXh0X2RpZmYnLAogICAgICAgICAgICd1bmlmaWVkX2RpZmYnLCAnSHRtbERpZmYnLCAnTWF0Y2gnXQoKaW1wb3J0IHdhcm5pbmdzCmltcG9ydCBoZWFwcQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBuYW1lZHR1cGxlIGFzIF9uYW1lZHR1cGxlCgpNYXRjaCA9IF9uYW1lZHR1cGxlKCdNYXRjaCcsICdhIGIgc2l6ZScpCgpkZWYgX2NhbGN1bGF0ZV9yYXRpbyhtYXRjaGVzLCBsZW5ndGgpOgogICAgaWYgbGVuZ3RoOgogICAgICAgIHJldHVybiAyLjAgKiBtYXRjaGVzIC8gbGVuZ3RoCiAgICByZXR1cm4gMS4wCgpjbGFzcyBTZXF1ZW5jZU1hdGNoZXI6CgogICAgIiIiCiAgICBTZXF1ZW5jZU1hdGNoZXIgaXMgYSBmbGV4aWJsZSBjbGFzcyBmb3IgY29tcGFyaW5nIHBhaXJzIG9mIHNlcXVlbmNlcyBvZgogICAgYW55IHR5cGUsIHNvIGxvbmcgYXMgdGhlIHNlcXVlbmNlIGVsZW1lbnRzIGFyZSBoYXNoYWJsZS4gIFRoZSBiYXNpYwogICAgYWxnb3JpdGhtIHByZWRhdGVzLCBhbmQgaXMgYSBsaXR0bGUgZmFuY2llciB0aGFuLCBhbiBhbGdvcml0aG0KICAgIHB1Ymxpc2hlZCBpbiB0aGUgbGF0ZSAxOTgwJ3MgYnkgUmF0Y2xpZmYgYW5kIE9iZXJzaGVscCB1bmRlciB0aGUKICAgIGh5cGVyYm9saWMgbmFtZSAiZ2VzdGFsdCBwYXR0ZXJuIG1hdGNoaW5nIi4gIFRoZSBiYXNpYyBpZGVhIGlzIHRvIGZpbmQKICAgIHRoZSBsb25nZXN0IGNvbnRpZ3VvdXMgbWF0Y2hpbmcgc3Vic2VxdWVuY2UgdGhhdCBjb250YWlucyBubyAianVuayIKICAgIGVsZW1lbnRzIChSLU8gZG9lc24ndCBhZGRyZXNzIGp1bmspLiAgVGhlIHNhbWUgaWRlYSBpcyB0aGVuIGFwcGxpZWQKICAgIHJlY3Vyc2l2ZWx5IHRvIHRoZSBwaWVjZXMgb2YgdGhlIHNlcXVlbmNlcyB0byB0aGUgbGVmdCBhbmQgdG8gdGhlIHJpZ2h0CiAgICBvZiB0aGUgbWF0Y2hpbmcgc3Vic2VxdWVuY2UuICBUaGlzIGRvZXMgbm90IHlpZWxkIG1pbmltYWwgZWRpdAogICAgc2VxdWVuY2VzLCBidXQgZG9lcyB0ZW5kIHRvIHlpZWxkIG1hdGNoZXMgdGhhdCAibG9vayByaWdodCIgdG8gcGVvcGxlLgoKICAgIFNlcXVlbmNlTWF0Y2hlciB0cmllcyB0byBjb21wdXRlIGEgImh1bWFuLWZyaWVuZGx5IGRpZmYiIGJldHdlZW4gdHdvCiAgICBzZXF1ZW5jZXMuICBVbmxpa2UgZS5nLiBVTklYKHRtKSBkaWZmLCB0aGUgZnVuZGFtZW50YWwgbm90aW9uIGlzIHRoZQogICAgbG9uZ2VzdCAqY29udGlndW91cyogJiBqdW5rLWZyZWUgbWF0Y2hpbmcgc3Vic2VxdWVuY2UuICBUaGF0J3Mgd2hhdAogICAgY2F0Y2hlcyBwZW9wbGVzJyBleWVzLiAgVGhlIFdpbmRvd3ModG0pIHdpbmRpZmYgaGFzIGFub3RoZXIgaW50ZXJlc3RpbmcKICAgIG5vdGlvbiwgcGFpcmluZyB1cCBlbGVtZW50cyB0aGF0IGFwcGVhciB1bmlxdWVseSBpbiBlYWNoIHNlcXVlbmNlLgogICAgVGhhdCwgYW5kIHRoZSBtZXRob2QgaGVyZSwgYXBwZWFyIHRvIHlpZWxkIG1vcmUgaW50dWl0aXZlIGRpZmZlcmVuY2UKICAgIHJlcG9ydHMgdGhhbiBkb2VzIGRpZmYuICBUaGlzIG1ldGhvZCBhcHBlYXJzIHRvIGJlIHRoZSBsZWFzdCB2dWxuZXJhYmxlCiAgICB0byBzeW5jaGluZyB1cCBvbiBibG9ja3Mgb2YgImp1bmsgbGluZXMiLCB0aG91Z2ggKGxpa2UgYmxhbmsgbGluZXMgaW4KICAgIG9yZGluYXJ5IHRleHQgZmlsZXMsIG9yIG1heWJlICI8UD4iIGxpbmVzIGluIEhUTUwgZmlsZXMpLiAgVGhhdCBtYXkgYmUKICAgIGJlY2F1c2UgdGhpcyBpcyB0aGUgb25seSBtZXRob2Qgb2YgdGhlIDMgdGhhdCBoYXMgYSAqY29uY2VwdCogb2YKICAgICJqdW5rIiA8d2luaz4uCgogICAgRXhhbXBsZSwgY29tcGFyaW5nIHR3byBzdHJpbmdzLCBhbmQgY29uc2lkZXJpbmcgYmxhbmtzIHRvIGJlICJqdW5rIjoKCiAgICA+Pj4gcyA9IFNlcXVlbmNlTWF0Y2hlcihsYW1iZGEgeDogeCA9PSAiICIsCiAgICAuLi4gICAgICAgICAgICAgICAgICAgICAicHJpdmF0ZSBUaHJlYWQgY3VycmVudFRocmVhZDsiLAogICAgLi4uICAgICAgICAgICAgICAgICAgICAgInByaXZhdGUgdm9sYXRpbGUgVGhyZWFkIGN1cnJlbnRUaHJlYWQ7IikKICAgID4+PgoKICAgIC5yYXRpbygpIHJldHVybnMgYSBmbG9hdCBpbiBbMCwgMV0sIG1lYXN1cmluZyB0aGUgInNpbWlsYXJpdHkiIG9mIHRoZQogICAgc2VxdWVuY2VzLiAgQXMgYSBydWxlIG9mIHRodW1iLCBhIC5yYXRpbygpIHZhbHVlIG92ZXIgMC42IG1lYW5zIHRoZQogICAgc2VxdWVuY2VzIGFyZSBjbG9zZSBtYXRjaGVzOgoKICAgID4+PiBwcmludChyb3VuZChzLnJhdGlvKCksIDMpKQogICAgMC44NjYKICAgID4+PgoKICAgIElmIHlvdSdyZSBvbmx5IGludGVyZXN0ZWQgaW4gd2hlcmUgdGhlIHNlcXVlbmNlcyBtYXRjaCwKICAgIC5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkgaXMgaGFuZHk6CgogICAgPj4+IGZvciBibG9jayBpbiBzLmdldF9tYXRjaGluZ19ibG9ja3MoKToKICAgIC4uLiAgICAgcHJpbnQoImFbJWRdIGFuZCBiWyVkXSBtYXRjaCBmb3IgJWQgZWxlbWVudHMiICUgYmxvY2spCiAgICBhWzBdIGFuZCBiWzBdIG1hdGNoIGZvciA4IGVsZW1lbnRzCiAgICBhWzhdIGFuZCBiWzE3XSBtYXRjaCBmb3IgMjEgZWxlbWVudHMKICAgIGFbMjldIGFuZCBiWzM4XSBtYXRjaCBmb3IgMCBlbGVtZW50cwoKICAgIE5vdGUgdGhhdCB0aGUgbGFzdCB0dXBsZSByZXR1cm5lZCBieSAuZ2V0X21hdGNoaW5nX2Jsb2NrcygpIGlzIGFsd2F5cyBhCiAgICBkdW1teSwgKGxlbihhKSwgbGVuKGIpLCAwKSwgYW5kIHRoaXMgaXMgdGhlIG9ubHkgY2FzZSBpbiB3aGljaCB0aGUgbGFzdAogICAgdHVwbGUgZWxlbWVudCAobnVtYmVyIG9mIGVsZW1lbnRzIG1hdGNoZWQpIGlzIDAuCgogICAgSWYgeW91IHdhbnQgdG8ga25vdyBob3cgdG8gY2hhbmdlIHRoZSBmaXJzdCBzZXF1ZW5jZSBpbnRvIHRoZSBzZWNvbmQsCiAgICB1c2UgLmdldF9vcGNvZGVzKCk6CgogICAgPj4+IGZvciBvcGNvZGUgaW4gcy5nZXRfb3Bjb2RlcygpOgogICAgLi4uICAgICBwcmludCgiJTZzIGFbJWQ6JWRdIGJbJWQ6JWRdIiAlIG9wY29kZSkKICAgICBlcXVhbCBhWzA6OF0gYlswOjhdCiAgICBpbnNlcnQgYVs4OjhdIGJbODoxN10KICAgICBlcXVhbCBhWzg6MjldIGJbMTc6MzhdCgogICAgU2VlIHRoZSBEaWZmZXIgY2xhc3MgZm9yIGEgZmFuY3kgaHVtYW4tZnJpZW5kbHkgZmlsZSBkaWZmZXJlbmNlciwgd2hpY2gKICAgIHVzZXMgU2VxdWVuY2VNYXRjaGVyIGJvdGggdG8gY29tcGFyZSBzZXF1ZW5jZXMgb2YgbGluZXMsIGFuZCB0byBjb21wYXJlCiAgICBzZXF1ZW5jZXMgb2YgY2hhcmFjdGVycyB3aXRoaW4gc2ltaWxhciAobmVhci1tYXRjaGluZykgbGluZXMuCgogICAgU2VlIGFsc28gZnVuY3Rpb24gZ2V0X2Nsb3NlX21hdGNoZXMoKSBpbiB0aGlzIG1vZHVsZSwgd2hpY2ggc2hvd3MgaG93CiAgICBzaW1wbGUgY29kZSBidWlsZGluZyBvbiBTZXF1ZW5jZU1hdGNoZXIgY2FuIGJlIHVzZWQgdG8gZG8gdXNlZnVsIHdvcmsuCgogICAgVGltaW5nOiAgQmFzaWMgUi1PIGlzIGN1YmljIHRpbWUgd29yc3QgY2FzZSBhbmQgcXVhZHJhdGljIHRpbWUgZXhwZWN0ZWQKICAgIGNhc2UuICBTZXF1ZW5jZU1hdGNoZXIgaXMgcXVhZHJhdGljIHRpbWUgZm9yIHRoZSB3b3JzdCBjYXNlIGFuZCBoYXMKICAgIGV4cGVjdGVkLWNhc2UgYmVoYXZpb3IgZGVwZW5kZW50IGluIGEgY29tcGxpY2F0ZWQgd2F5IG9uIGhvdyBtYW55CiAgICBlbGVtZW50cyB0aGUgc2VxdWVuY2VzIGhhdmUgaW4gY29tbW9uOyBiZXN0IGNhc2UgdGltZSBpcyBsaW5lYXIuCgogICAgTWV0aG9kczoKCiAgICBfX2luaXRfXyhpc2p1bms9Tm9uZSwgYT0nJywgYj0nJykKICAgICAgICBDb25zdHJ1Y3QgYSBTZXF1ZW5jZU1hdGNoZXIuCgogICAgc2V0X3NlcXMoYSwgYikKICAgICAgICBTZXQgdGhlIHR3byBzZXF1ZW5jZXMgdG8gYmUgY29tcGFyZWQuCgogICAgc2V0X3NlcTEoYSkKICAgICAgICBTZXQgdGhlIGZpcnN0IHNlcXVlbmNlIHRvIGJlIGNvbXBhcmVkLgoKICAgIHNldF9zZXEyKGIpCiAgICAgICAgU2V0IHRoZSBzZWNvbmQgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQuCgogICAgZmluZF9sb25nZXN0X21hdGNoKGFsbywgYWhpLCBibG8sIGJoaSkKICAgICAgICBGaW5kIGxvbmdlc3QgbWF0Y2hpbmcgYmxvY2sgaW4gYVthbG86YWhpXSBhbmQgYltibG86YmhpXS4KCiAgICBnZXRfbWF0Y2hpbmdfYmxvY2tzKCkKICAgICAgICBSZXR1cm4gbGlzdCBvZiB0cmlwbGVzIGRlc2NyaWJpbmcgbWF0Y2hpbmcgc3Vic2VxdWVuY2VzLgoKICAgIGdldF9vcGNvZGVzKCkKICAgICAgICBSZXR1cm4gbGlzdCBvZiA1LXR1cGxlcyBkZXNjcmliaW5nIGhvdyB0byB0dXJuIGEgaW50byBiLgoKICAgIHJhdGlvKCkKICAgICAgICBSZXR1cm4gYSBtZWFzdXJlIG9mIHRoZSBzZXF1ZW5jZXMnIHNpbWlsYXJpdHkgKGZsb2F0IGluIFswLDFdKS4KCiAgICBxdWlja19yYXRpbygpCiAgICAgICAgUmV0dXJuIGFuIHVwcGVyIGJvdW5kIG9uIC5yYXRpbygpIHJlbGF0aXZlbHkgcXVpY2tseS4KCiAgICByZWFsX3F1aWNrX3JhdGlvKCkKICAgICAgICBSZXR1cm4gYW4gdXBwZXIgYm91bmQgb24gcmF0aW8oKSB2ZXJ5IHF1aWNrbHkuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaXNqdW5rPU5vbmUsIGE9JycsIGI9JycsIGF1dG9qdW5rPVRydWUpOgogICAgICAgICIiIkNvbnN0cnVjdCBhIFNlcXVlbmNlTWF0Y2hlci4KCiAgICAgICAgT3B0aW9uYWwgYXJnIGlzanVuayBpcyBOb25lICh0aGUgZGVmYXVsdCksIG9yIGEgb25lLWFyZ3VtZW50CiAgICAgICAgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHNlcXVlbmNlIGVsZW1lbnQgYW5kIHJldHVybnMgdHJ1ZSBpZmYgdGhlCiAgICAgICAgZWxlbWVudCBpcyBqdW5rLiAgTm9uZSBpcyBlcXVpdmFsZW50IHRvIHBhc3NpbmcgImxhbWJkYSB4OiAwIiwgaS5lLgogICAgICAgIG5vIGVsZW1lbnRzIGFyZSBjb25zaWRlcmVkIHRvIGJlIGp1bmsuICBGb3IgZXhhbXBsZSwgcGFzcwogICAgICAgICAgICBsYW1iZGEgeDogeCBpbiAiIFxcdCIKICAgICAgICBpZiB5b3UncmUgY29tcGFyaW5nIGxpbmVzIGFzIHNlcXVlbmNlcyBvZiBjaGFyYWN0ZXJzLCBhbmQgZG9uJ3QKICAgICAgICB3YW50IHRvIHN5bmNoIHVwIG9uIGJsYW5rcyBvciBoYXJkIHRhYnMuCgogICAgICAgIE9wdGlvbmFsIGFyZyBhIGlzIHRoZSBmaXJzdCBvZiB0d28gc2VxdWVuY2VzIHRvIGJlIGNvbXBhcmVkLiAgQnkKICAgICAgICBkZWZhdWx0LCBhbiBlbXB0eSBzdHJpbmcuICBUaGUgZWxlbWVudHMgb2YgYSBtdXN0IGJlIGhhc2hhYmxlLiAgU2VlCiAgICAgICAgYWxzbyAuc2V0X3NlcXMoKSBhbmQgLnNldF9zZXExKCkuCgogICAgICAgIE9wdGlvbmFsIGFyZyBiIGlzIHRoZSBzZWNvbmQgb2YgdHdvIHNlcXVlbmNlcyB0byBiZSBjb21wYXJlZC4gIEJ5CiAgICAgICAgZGVmYXVsdCwgYW4gZW1wdHkgc3RyaW5nLiAgVGhlIGVsZW1lbnRzIG9mIGIgbXVzdCBiZSBoYXNoYWJsZS4gU2VlCiAgICAgICAgYWxzbyAuc2V0X3NlcXMoKSBhbmQgLnNldF9zZXEyKCkuCgogICAgICAgIE9wdGlvbmFsIGFyZyBhdXRvanVuayBzaG91bGQgYmUgc2V0IHRvIEZhbHNlIHRvIGRpc2FibGUgdGhlCiAgICAgICAgImF1dG9tYXRpYyBqdW5rIGhldXJpc3RpYyIgdGhhdCB0cmVhdHMgcG9wdWxhciBlbGVtZW50cyBhcyBqdW5rCiAgICAgICAgKHNlZSBtb2R1bGUgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbikuCiAgICAgICAgIiIiCgogICAgICAgICMgTWVtYmVyczoKICAgICAgICAjIGEKICAgICAgICAjICAgICAgZmlyc3Qgc2VxdWVuY2UKICAgICAgICAjIGIKICAgICAgICAjICAgICAgc2Vjb25kIHNlcXVlbmNlOyBkaWZmZXJlbmNlcyBhcmUgY29tcHV0ZWQgYXMgIndoYXQgZG8KICAgICAgICAjICAgICAgd2UgbmVlZCB0byBkbyB0byAnYScgdG8gY2hhbmdlIGl0IGludG8gJ2InPyIKICAgICAgICAjIGIyagogICAgICAgICMgICAgICBmb3IgeCBpbiBiLCBiMmpbeF0gaXMgYSBsaXN0IG9mIHRoZSBpbmRpY2VzIChpbnRvIGIpCiAgICAgICAgIyAgICAgIGF0IHdoaWNoIHggYXBwZWFyczsganVuayBhbmQgcG9wdWxhciBlbGVtZW50cyBkbyBub3QgYXBwZWFyCiAgICAgICAgIyBmdWxsYmNvdW50CiAgICAgICAgIyAgICAgIGZvciB4IGluIGIsIGZ1bGxiY291bnRbeF0gPT0gdGhlIG51bWJlciBvZiB0aW1lcyB4CiAgICAgICAgIyAgICAgIGFwcGVhcnMgaW4gYjsgb25seSBtYXRlcmlhbGl6ZWQgaWYgcmVhbGx5IG5lZWRlZCAodXNlZAogICAgICAgICMgICAgICBvbmx5IGZvciBjb21wdXRpbmcgcXVpY2tfcmF0aW8oKSkKICAgICAgICAjIG1hdGNoaW5nX2Jsb2NrcwogICAgICAgICMgICAgICBhIGxpc3Qgb2YgKGksIGosIGspIHRyaXBsZXMsIHdoZXJlIGFbaTppK2tdID09IGJbajpqK2tdOwogICAgICAgICMgICAgICBhc2NlbmRpbmcgJiBub24tb3ZlcmxhcHBpbmcgaW4gaSBhbmQgaW4gajsgdGVybWluYXRlZCBieQogICAgICAgICMgICAgICBhIGR1bW15IChsZW4oYSksIGxlbihiKSwgMCkgc2VudGluZWwKICAgICAgICAjIG9wY29kZXMKICAgICAgICAjICAgICAgYSBsaXN0IG9mICh0YWcsIGkxLCBpMiwgajEsIGoyKSB0dXBsZXMsIHdoZXJlIHRhZyBpcwogICAgICAgICMgICAgICBvbmUgb2YKICAgICAgICAjICAgICAgICAgICdyZXBsYWNlJyAgIGFbaTE6aTJdIHNob3VsZCBiZSByZXBsYWNlZCBieSBiW2oxOmoyXQogICAgICAgICMgICAgICAgICAgJ2RlbGV0ZScgICAgYVtpMTppMl0gc2hvdWxkIGJlIGRlbGV0ZWQKICAgICAgICAjICAgICAgICAgICdpbnNlcnQnICAgIGJbajE6ajJdIHNob3VsZCBiZSBpbnNlcnRlZAogICAgICAgICMgICAgICAgICAgJ2VxdWFsJyAgICAgYVtpMTppMl0gPT0gYltqMTpqMl0KICAgICAgICAjIGlzanVuawogICAgICAgICMgICAgICBhIHVzZXItc3VwcGxpZWQgZnVuY3Rpb24gdGFraW5nIGEgc2VxdWVuY2UgZWxlbWVudCBhbmQKICAgICAgICAjICAgICAgcmV0dXJuaW5nIHRydWUgaWZmIHRoZSBlbGVtZW50IGlzICJqdW5rIiAtLSB0aGlzIGhhcwogICAgICAgICMgICAgICBzdWJ0bGUgYnV0IGhlbHBmdWwgZWZmZWN0cyBvbiB0aGUgYWxnb3JpdGhtLCB3aGljaCBJJ2xsCiAgICAgICAgIyAgICAgIGdldCBhcm91bmQgdG8gd3JpdGluZyB1cCBzb21lZGF5IDwwLjkgd2luaz4uCiAgICAgICAgIyAgICAgIERPTidUIFVTRSEgIE9ubHkgX19jaGFpbl9iIHVzZXMgdGhpcy4gIFVzZSAiaW4gc2VsZi5ianVuayIuCiAgICAgICAgIyBianVuawogICAgICAgICMgICAgICB0aGUgaXRlbXMgaW4gYiBmb3Igd2hpY2ggaXNqdW5rIGlzIFRydWUuCiAgICAgICAgIyBicG9wdWxhcgogICAgICAgICMgICAgICBub25qdW5rIGl0ZW1zIGluIGIgdHJlYXRlZCBhcyBqdW5rIGJ5IHRoZSBoZXVyaXN0aWMgKGlmIHVzZWQpLgoKICAgICAgICBzZWxmLmlzanVuayA9IGlzanVuawogICAgICAgIHNlbGYuYSA9IHNlbGYuYiA9IE5vbmUKICAgICAgICBzZWxmLmF1dG9qdW5rID0gYXV0b2p1bmsKICAgICAgICBzZWxmLnNldF9zZXFzKGEsIGIpCgogICAgZGVmIHNldF9zZXFzKHNlbGYsIGEsIGIpOgogICAgICAgICIiIlNldCB0aGUgdHdvIHNlcXVlbmNlcyB0byBiZSBjb21wYXJlZC4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoKQogICAgICAgID4+PiBzLnNldF9zZXFzKCJhYmNkIiwgImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAwLjc1CiAgICAgICAgIiIiCgogICAgICAgIHNlbGYuc2V0X3NlcTEoYSkKICAgICAgICBzZWxmLnNldF9zZXEyKGIpCgogICAgZGVmIHNldF9zZXExKHNlbGYsIGEpOgogICAgICAgICIiIlNldCB0aGUgZmlyc3Qgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQuCgogICAgICAgIFRoZSBzZWNvbmQgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQgaXMgbm90IGNoYW5nZWQuCgogICAgICAgID4+PiBzID0gU2VxdWVuY2VNYXRjaGVyKE5vbmUsICJhYmNkIiwgImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAwLjc1CiAgICAgICAgPj4+IHMuc2V0X3NlcTEoImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAxLjAKICAgICAgICA+Pj4KCiAgICAgICAgU2VxdWVuY2VNYXRjaGVyIGNvbXB1dGVzIGFuZCBjYWNoZXMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgdGhlCiAgICAgICAgc2Vjb25kIHNlcXVlbmNlLCBzbyBpZiB5b3Ugd2FudCB0byBjb21wYXJlIG9uZSBzZXF1ZW5jZSBTIGFnYWluc3QKICAgICAgICBtYW55IHNlcXVlbmNlcywgdXNlIC5zZXRfc2VxMihTKSBvbmNlIGFuZCBjYWxsIC5zZXRfc2VxMSh4KQogICAgICAgIHJlcGVhdGVkbHkgZm9yIGVhY2ggb2YgdGhlIG90aGVyIHNlcXVlbmNlcy4KCiAgICAgICAgU2VlIGFsc28gc2V0X3NlcXMoKSBhbmQgc2V0X3NlcTIoKS4KICAgICAgICAiIiIKCiAgICAgICAgaWYgYSBpcyBzZWxmLmE6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHNlbGYuYSA9IGEKICAgICAgICBzZWxmLm1hdGNoaW5nX2Jsb2NrcyA9IHNlbGYub3Bjb2RlcyA9IE5vbmUKCiAgICBkZWYgc2V0X3NlcTIoc2VsZiwgYik6CiAgICAgICAgIiIiU2V0IHRoZSBzZWNvbmQgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQuCgogICAgICAgIFRoZSBmaXJzdCBzZXF1ZW5jZSB0byBiZSBjb21wYXJlZCBpcyBub3QgY2hhbmdlZC4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoTm9uZSwgImFiY2QiLCAiYmNkZSIpCiAgICAgICAgPj4+IHMucmF0aW8oKQogICAgICAgIDAuNzUKICAgICAgICA+Pj4gcy5zZXRfc2VxMigiYWJjZCIpCiAgICAgICAgPj4+IHMucmF0aW8oKQogICAgICAgIDEuMAogICAgICAgID4+PgoKICAgICAgICBTZXF1ZW5jZU1hdGNoZXIgY29tcHV0ZXMgYW5kIGNhY2hlcyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUKICAgICAgICBzZWNvbmQgc2VxdWVuY2UsIHNvIGlmIHlvdSB3YW50IHRvIGNvbXBhcmUgb25lIHNlcXVlbmNlIFMgYWdhaW5zdAogICAgICAgIG1hbnkgc2VxdWVuY2VzLCB1c2UgLnNldF9zZXEyKFMpIG9uY2UgYW5kIGNhbGwgLnNldF9zZXExKHgpCiAgICAgICAgcmVwZWF0ZWRseSBmb3IgZWFjaCBvZiB0aGUgb3RoZXIgc2VxdWVuY2VzLgoKICAgICAgICBTZWUgYWxzbyBzZXRfc2VxcygpIGFuZCBzZXRfc2VxMSgpLgogICAgICAgICIiIgoKICAgICAgICBpZiBiIGlzIHNlbGYuYjoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgc2VsZi5iID0gYgogICAgICAgIHNlbGYubWF0Y2hpbmdfYmxvY2tzID0gc2VsZi5vcGNvZGVzID0gTm9uZQogICAgICAgIHNlbGYuZnVsbGJjb3VudCA9IE5vbmUKICAgICAgICBzZWxmLl9fY2hhaW5fYigpCgogICAgIyBGb3IgZWFjaCBlbGVtZW50IHggaW4gYiwgc2V0IGIyalt4XSB0byBhIGxpc3Qgb2YgdGhlIGluZGljZXMgaW4KICAgICMgYiB3aGVyZSB4IGFwcGVhcnM7IHRoZSBpbmRpY2VzIGFyZSBpbiBpbmNyZWFzaW5nIG9yZGVyOyBub3RlIHRoYXQKICAgICMgdGhlIG51bWJlciBvZiB0aW1lcyB4IGFwcGVhcnMgaW4gYiBpcyBsZW4oYjJqW3hdKSAuLi4KICAgICMgd2hlbiBzZWxmLmlzanVuayBpcyBkZWZpbmVkLCBqdW5rIGVsZW1lbnRzIGRvbid0IHNob3cgdXAgaW4gdGhpcwogICAgIyBtYXAgYXQgYWxsLCB3aGljaCBzdG9wcyB0aGUgY2VudHJhbCBmaW5kX2xvbmdlc3RfbWF0Y2ggbWV0aG9kCiAgICAjIGZyb20gc3RhcnRpbmcgYW55IG1hdGNoaW5nIGJsb2NrIGF0IGEganVuayBlbGVtZW50IC4uLgogICAgIyBiMmogYWxzbyBkb2VzIG5vdCBjb250YWluIGVudHJpZXMgZm9yICJwb3B1bGFyIiBlbGVtZW50cywgbWVhbmluZwogICAgIyBlbGVtZW50cyB0aGF0IGFjY291bnQgZm9yIG1vcmUgdGhhbiAxICsgMSUgb2YgdGhlIHRvdGFsIGVsZW1lbnRzLCBhbmQKICAgICMgd2hlbiB0aGUgc2VxdWVuY2UgaXMgcmVhc29uYWJseSBsYXJnZSAoPj0gMjAwIGVsZW1lbnRzKTsgdGhpcyBjYW4KICAgICMgYmUgdmlld2VkIGFzIGFuIGFkYXB0aXZlIG5vdGlvbiBvZiBzZW1pLWp1bmssIGFuZCB5aWVsZHMgYW4gZW5vcm1vdXMKICAgICMgc3BlZWR1cCB3aGVuLCBlLmcuLCBjb21wYXJpbmcgcHJvZ3JhbSBmaWxlcyB3aXRoIGh1bmRyZWRzIG9mCiAgICAjIGluc3RhbmNlcyBvZiAicmV0dXJuIE5VTEw7IiAuLi4KICAgICMgbm90ZSB0aGF0IHRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiBiIGNoYW5nZXM7IHNvIGZvciBjcm9zcy1wcm9kdWN0CiAgICAjIGtpbmRzIG9mIG1hdGNoZXMsIGl0J3MgYmVzdCB0byBjYWxsIHNldF9zZXEyIG9uY2UsIHRoZW4gc2V0X3NlcTEKICAgICMgcmVwZWF0ZWRseQoKICAgIGRlZiBfX2NoYWluX2Ioc2VsZik6CiAgICAgICAgIyBCZWNhdXNlIGlzanVuayBpcyBhIHVzZXItZGVmaW5lZCAobm90IEMpIGZ1bmN0aW9uLCBhbmQgd2UgdGVzdAogICAgICAgICMgZm9yIGp1bmsgYSBMT1QsIGl0J3MgaW1wb3J0YW50IHRvIG1pbmltaXplIHRoZSBudW1iZXIgb2YgY2FsbHMuCiAgICAgICAgIyBCZWZvcmUgdGhlIHRyaWNrcyBkZXNjcmliZWQgaGVyZSwgX19jaGFpbl9iIHdhcyBieSBmYXIgdGhlIG1vc3QKICAgICAgICAjIHRpbWUtY29uc3VtaW5nIHJvdXRpbmUgaW4gdGhlIHdob2xlIG1vZHVsZSEgIElmIGFueW9uZSBzZWVzCiAgICAgICAgIyBKaW0gUm9za2luZCwgdGhhbmsgaGltIGFnYWluIGZvciBwcm9maWxlLnB5IC0tIEkgbmV2ZXIgd291bGQKICAgICAgICAjIGhhdmUgZ3Vlc3NlZCB0aGF0LgogICAgICAgICMgVGhlIGZpcnN0IHRyaWNrIGlzIHRvIGJ1aWxkIGIyaiBpZ25vcmluZyB0aGUgcG9zc2liaWxpdHkKICAgICAgICAjIG9mIGp1bmsuICBJLmUuLCB3ZSBkb24ndCBjYWxsIGlzanVuayBhdCBhbGwgeWV0LiAgVGhyb3dpbmcKICAgICAgICAjIG91dCB0aGUganVuayBsYXRlciBpcyBtdWNoIGNoZWFwZXIgdGhhbiBidWlsZGluZyBiMmogInJpZ2h0IgogICAgICAgICMgZnJvbSB0aGUgc3RhcnQuCiAgICAgICAgYiA9IHNlbGYuYgogICAgICAgIHNlbGYuYjJqID0gYjJqID0ge30KCiAgICAgICAgZm9yIGksIGVsdCBpbiBlbnVtZXJhdGUoYik6CiAgICAgICAgICAgIGluZGljZXMgPSBiMmouc2V0ZGVmYXVsdChlbHQsIFtdKQogICAgICAgICAgICBpbmRpY2VzLmFwcGVuZChpKQoKICAgICAgICAjIFB1cmdlIGp1bmsgZWxlbWVudHMKICAgICAgICBzZWxmLmJqdW5rID0ganVuayA9IHNldCgpCiAgICAgICAgaXNqdW5rID0gc2VsZi5pc2p1bmsKICAgICAgICBpZiBpc2p1bms6CiAgICAgICAgICAgIGZvciBlbHQgaW4gYjJqLmtleXMoKToKICAgICAgICAgICAgICAgIGlmIGlzanVuayhlbHQpOgogICAgICAgICAgICAgICAgICAgIGp1bmsuYWRkKGVsdCkKICAgICAgICAgICAgZm9yIGVsdCBpbiBqdW5rOiAjIHNlcGFyYXRlIGxvb3AgYXZvaWRzIHNlcGFyYXRlIGxpc3Qgb2Yga2V5cwogICAgICAgICAgICAgICAgZGVsIGIyaltlbHRdCgogICAgICAgICMgUHVyZ2UgcG9wdWxhciBlbGVtZW50cyB0aGF0IGFyZSBub3QganVuawogICAgICAgIHNlbGYuYnBvcHVsYXIgPSBwb3B1bGFyID0gc2V0KCkKICAgICAgICBuID0gbGVuKGIpCiAgICAgICAgaWYgc2VsZi5hdXRvanVuayBhbmQgbiA+PSAyMDA6CiAgICAgICAgICAgIG50ZXN0ID0gbiAvLyAxMDAgKyAxCiAgICAgICAgICAgIGZvciBlbHQsIGlkeHMgaW4gYjJqLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBpZiBsZW4oaWR4cykgPiBudGVzdDoKICAgICAgICAgICAgICAgICAgICBwb3B1bGFyLmFkZChlbHQpCiAgICAgICAgICAgIGZvciBlbHQgaW4gcG9wdWxhcjogIyBkaXR0bzsgYXMgZmFzdCBmb3IgMSUgZGVsZXRpb24KICAgICAgICAgICAgICAgIGRlbCBiMmpbZWx0XQoKICAgIGRlZiBpc2JqdW5rKHNlbGYsIGl0ZW0pOgogICAgICAgICJEZXByZWNhdGVkOyB1c2UgJ2l0ZW0gaW4gU2VxdWVuY2VNYXRjaGVyKCkuYmp1bmsnLiIKICAgICAgICB3YXJuaW5ncy53YXJuKCInU2VxdWVuY2VNYXRjaGVyKCkuaXNianVuayhpdGVtKScgaXMgZGVwcmVjYXRlZDtcbiIKICAgICAgICAgICAgICAgICAgICAgICJ1c2UgJ2l0ZW0gaW4gU01pbnN0YW5jZS5ianVuaycgaW5zdGVhZC4iLAogICAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLCAyKQogICAgICAgIHJldHVybiBpdGVtIGluIHNlbGYuYmp1bmsKCiAgICBkZWYgaXNicG9wdWxhcihzZWxmLCBpdGVtKToKICAgICAgICAiRGVwcmVjYXRlZDsgdXNlICdpdGVtIGluIFNlcXVlbmNlTWF0Y2hlcigpLmJwb3B1bGFyJy4iCiAgICAgICAgd2FybmluZ3Mud2FybigiJ1NlcXVlbmNlTWF0Y2hlcigpLmlzYnBvcHVsYXIoaXRlbSknIGlzIGRlcHJlY2F0ZWQ7XG4iCiAgICAgICAgICAgICAgICAgICAgICAidXNlICdpdGVtIGluIFNNaW5zdGFuY2UuYnBvcHVsYXInIGluc3RlYWQuIiwKICAgICAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgICAgICByZXR1cm4gaXRlbSBpbiBzZWxmLmJwb3B1bGFyCgogICAgZGVmIGZpbmRfbG9uZ2VzdF9tYXRjaChzZWxmLCBhbG8sIGFoaSwgYmxvLCBiaGkpOgogICAgICAgICIiIkZpbmQgbG9uZ2VzdCBtYXRjaGluZyBibG9jayBpbiBhW2FsbzphaGldIGFuZCBiW2JsbzpiaGldLgoKICAgICAgICBJZiBpc2p1bmsgaXMgbm90IGRlZmluZWQ6CgogICAgICAgIFJldHVybiAoaSxqLGspIHN1Y2ggdGhhdCBhW2k6aStrXSBpcyBlcXVhbCB0byBiW2o6aitrXSwgd2hlcmUKICAgICAgICAgICAgYWxvIDw9IGkgPD0gaStrIDw9IGFoaQogICAgICAgICAgICBibG8gPD0gaiA8PSBqK2sgPD0gYmhpCiAgICAgICAgYW5kIGZvciBhbGwgKGknLGonLGsnKSBtZWV0aW5nIHRob3NlIGNvbmRpdGlvbnMsCiAgICAgICAgICAgIGsgPj0gaycKICAgICAgICAgICAgaSA8PSBpJwogICAgICAgICAgICBhbmQgaWYgaSA9PSBpJywgaiA8PSBqJwoKICAgICAgICBJbiBvdGhlciB3b3Jkcywgb2YgYWxsIG1heGltYWwgbWF0Y2hpbmcgYmxvY2tzLCByZXR1cm4gb25lIHRoYXQKICAgICAgICBzdGFydHMgZWFybGllc3QgaW4gYSwgYW5kIG9mIGFsbCB0aG9zZSBtYXhpbWFsIG1hdGNoaW5nIGJsb2NrcyB0aGF0CiAgICAgICAgc3RhcnQgZWFybGllc3QgaW4gYSwgcmV0dXJuIHRoZSBvbmUgdGhhdCBzdGFydHMgZWFybGllc3QgaW4gYi4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoTm9uZSwgIiBhYmNkIiwgImFiY2QgYWJjZCIpCiAgICAgICAgPj4+IHMuZmluZF9sb25nZXN0X21hdGNoKDAsIDUsIDAsIDkpCiAgICAgICAgTWF0Y2goYT0wLCBiPTQsIHNpemU9NSkKCiAgICAgICAgSWYgaXNqdW5rIGlzIGRlZmluZWQsIGZpcnN0IHRoZSBsb25nZXN0IG1hdGNoaW5nIGJsb2NrIGlzCiAgICAgICAgZGV0ZXJtaW5lZCBhcyBhYm92ZSwgYnV0IHdpdGggdGhlIGFkZGl0aW9uYWwgcmVzdHJpY3Rpb24gdGhhdCBubwogICAgICAgIGp1bmsgZWxlbWVudCBhcHBlYXJzIGluIHRoZSBibG9jay4gIFRoZW4gdGhhdCBibG9jayBpcyBleHRlbmRlZCBhcwogICAgICAgIGZhciBhcyBwb3NzaWJsZSBieSBtYXRjaGluZyAob25seSkganVuayBlbGVtZW50cyBvbiBib3RoIHNpZGVzLiAgU28KICAgICAgICB0aGUgcmVzdWx0aW5nIGJsb2NrIG5ldmVyIG1hdGNoZXMgb24ganVuayBleGNlcHQgYXMgaWRlbnRpY2FsIGp1bmsKICAgICAgICBoYXBwZW5zIHRvIGJlIGFkamFjZW50IHRvIGFuICJpbnRlcmVzdGluZyIgbWF0Y2guCgogICAgICAgIEhlcmUncyB0aGUgc2FtZSBleGFtcGxlIGFzIGJlZm9yZSwgYnV0IGNvbnNpZGVyaW5nIGJsYW5rcyB0byBiZQogICAgICAgIGp1bmsuICBUaGF0IHByZXZlbnRzICIgYWJjZCIgZnJvbSBtYXRjaGluZyB0aGUgIiBhYmNkIiBhdCB0aGUgdGFpbAogICAgICAgIGVuZCBvZiB0aGUgc2Vjb25kIHNlcXVlbmNlIGRpcmVjdGx5LiAgSW5zdGVhZCBvbmx5IHRoZSAiYWJjZCIgY2FuCiAgICAgICAgbWF0Y2gsIGFuZCBtYXRjaGVzIHRoZSBsZWZ0bW9zdCAiYWJjZCIgaW4gdGhlIHNlY29uZCBzZXF1ZW5jZToKCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIobGFtYmRhIHg6IHg9PSIgIiwgIiBhYmNkIiwgImFiY2QgYWJjZCIpCiAgICAgICAgPj4+IHMuZmluZF9sb25nZXN0X21hdGNoKDAsIDUsIDAsIDkpCiAgICAgICAgTWF0Y2goYT0xLCBiPTAsIHNpemU9NCkKCiAgICAgICAgSWYgbm8gYmxvY2tzIG1hdGNoLCByZXR1cm4gKGFsbywgYmxvLCAwKS4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoTm9uZSwgImFiIiwgImMiKQogICAgICAgID4+PiBzLmZpbmRfbG9uZ2VzdF9tYXRjaCgwLCAyLCAwLCAxKQogICAgICAgIE1hdGNoKGE9MCwgYj0wLCBzaXplPTApCiAgICAgICAgIiIiCgogICAgICAgICMgQ0FVVElPTjogIHN0cmlwcGluZyBjb21tb24gcHJlZml4IG9yIHN1ZmZpeCB3b3VsZCBiZSBpbmNvcnJlY3QuCiAgICAgICAgIyBFLmcuLAogICAgICAgICMgICAgYWIKICAgICAgICAjICAgIGFjYWIKICAgICAgICAjIExvbmdlc3QgbWF0Y2hpbmcgYmxvY2sgaXMgImFiIiwgYnV0IGlmIGNvbW1vbiBwcmVmaXggaXMKICAgICAgICAjIHN0cmlwcGVkLCBpdCdzICJhIiAodGllZCB3aXRoICJiIikuICBVTklYKHRtKSBkaWZmIGRvZXMgc28KICAgICAgICAjIHN0cmlwLCBzbyBlbmRzIHVwIGNsYWltaW5nIHRoYXQgYWIgaXMgY2hhbmdlZCB0byBhY2FiIGJ5CiAgICAgICAgIyBpbnNlcnRpbmcgImNhIiBpbiB0aGUgbWlkZGxlLiAgVGhhdCdzIG1pbmltYWwgYnV0IHVuaW50dWl0aXZlOgogICAgICAgICMgIml0J3Mgb2J2aW91cyIgdGhhdCBzb21lb25lIGluc2VydGVkICJhYyIgYXQgdGhlIGZyb250LgogICAgICAgICMgV2luZGlmZiBlbmRzIHVwIGF0IHRoZSBzYW1lIHBsYWNlIGFzIGRpZmYsIGJ1dCBieSBwYWlyaW5nIHVwCiAgICAgICAgIyB0aGUgdW5pcXVlICdiJ3MgYW5kIHRoZW4gbWF0Y2hpbmcgdGhlIGZpcnN0IHR3byAnYSdzLgoKICAgICAgICBhLCBiLCBiMmosIGlzYmp1bmsgPSBzZWxmLmEsIHNlbGYuYiwgc2VsZi5iMmosIHNlbGYuYmp1bmsuX19jb250YWluc19fCiAgICAgICAgYmVzdGksIGJlc3RqLCBiZXN0c2l6ZSA9IGFsbywgYmxvLCAwCiAgICAgICAgIyBmaW5kIGxvbmdlc3QganVuay1mcmVlIG1hdGNoCiAgICAgICAgIyBkdXJpbmcgYW4gaXRlcmF0aW9uIG9mIHRoZSBsb29wLCBqMmxlbltqXSA9IGxlbmd0aCBvZiBsb25nZXN0CiAgICAgICAgIyBqdW5rLWZyZWUgbWF0Y2ggZW5kaW5nIHdpdGggYVtpLTFdIGFuZCBiW2pdCiAgICAgICAgajJsZW4gPSB7fQogICAgICAgIG5vdGhpbmcgPSBbXQogICAgICAgIGZvciBpIGluIHJhbmdlKGFsbywgYWhpKToKICAgICAgICAgICAgIyBsb29rIGF0IGFsbCBpbnN0YW5jZXMgb2YgYVtpXSBpbiBiOyBub3RlIHRoYXQgYmVjYXVzZQogICAgICAgICAgICAjIGIyaiBoYXMgbm8ganVuayBrZXlzLCB0aGUgbG9vcCBpcyBza2lwcGVkIGlmIGFbaV0gaXMganVuawogICAgICAgICAgICBqMmxlbmdldCA9IGoybGVuLmdldAogICAgICAgICAgICBuZXdqMmxlbiA9IHt9CiAgICAgICAgICAgIGZvciBqIGluIGIyai5nZXQoYVtpXSwgbm90aGluZyk6CiAgICAgICAgICAgICAgICAjIGFbaV0gbWF0Y2hlcyBiW2pdCiAgICAgICAgICAgICAgICBpZiBqIDwgYmxvOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBpZiBqID49IGJoaToKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgayA9IG5ld2oybGVuW2pdID0gajJsZW5nZXQoai0xLCAwKSArIDEKICAgICAgICAgICAgICAgIGlmIGsgPiBiZXN0c2l6ZToKICAgICAgICAgICAgICAgICAgICBiZXN0aSwgYmVzdGosIGJlc3RzaXplID0gaS1rKzEsIGotaysxLCBrCiAgICAgICAgICAgIGoybGVuID0gbmV3ajJsZW4KCiAgICAgICAgIyBFeHRlbmQgdGhlIGJlc3QgYnkgbm9uLWp1bmsgZWxlbWVudHMgb24gZWFjaCBlbmQuICBJbiBwYXJ0aWN1bGFyLAogICAgICAgICMgInBvcHVsYXIiIG5vbi1qdW5rIGVsZW1lbnRzIGFyZW4ndCBpbiBiMmosIHdoaWNoIGdyZWF0bHkgc3BlZWRzCiAgICAgICAgIyB0aGUgaW5uZXIgbG9vcCBhYm92ZSwgYnV0IGFsc28gbWVhbnMgInRoZSBiZXN0IiBtYXRjaCBzbyBmYXIKICAgICAgICAjIGRvZXNuJ3QgY29udGFpbiBhbnkganVuayAqb3IqIHBvcHVsYXIgbm9uLWp1bmsgZWxlbWVudHMuCiAgICAgICAgd2hpbGUgYmVzdGkgPiBhbG8gYW5kIGJlc3RqID4gYmxvIGFuZCBcCiAgICAgICAgICAgICAgbm90IGlzYmp1bmsoYltiZXN0ai0xXSkgYW5kIFwKICAgICAgICAgICAgICBhW2Jlc3RpLTFdID09IGJbYmVzdGotMV06CiAgICAgICAgICAgIGJlc3RpLCBiZXN0aiwgYmVzdHNpemUgPSBiZXN0aS0xLCBiZXN0ai0xLCBiZXN0c2l6ZSsxCiAgICAgICAgd2hpbGUgYmVzdGkrYmVzdHNpemUgPCBhaGkgYW5kIGJlc3RqK2Jlc3RzaXplIDwgYmhpIGFuZCBcCiAgICAgICAgICAgICAgbm90IGlzYmp1bmsoYltiZXN0aitiZXN0c2l6ZV0pIGFuZCBcCiAgICAgICAgICAgICAgYVtiZXN0aStiZXN0c2l6ZV0gPT0gYltiZXN0aitiZXN0c2l6ZV06CiAgICAgICAgICAgIGJlc3RzaXplICs9IDEKCiAgICAgICAgIyBOb3cgdGhhdCB3ZSBoYXZlIGEgd2hvbGx5IGludGVyZXN0aW5nIG1hdGNoIChhbGJlaXQgcG9zc2libHkKICAgICAgICAjIGVtcHR5ISksIHdlIG1heSBhcyB3ZWxsIHN1Y2sgdXAgdGhlIG1hdGNoaW5nIGp1bmsgb24gZWFjaAogICAgICAgICMgc2lkZSBvZiBpdCB0b28uICBDYW4ndCB0aGluayBvZiBhIGdvb2QgcmVhc29uIG5vdCB0bywgYW5kIGl0CiAgICAgICAgIyBzYXZlcyBwb3N0LXByb2Nlc3NpbmcgdGhlIChwb3NzaWJseSBjb25zaWRlcmFibGUpIGV4cGVuc2Ugb2YKICAgICAgICAjIGZpZ3VyaW5nIG91dCB3aGF0IHRvIGRvIHdpdGggaXQuICBJbiB0aGUgY2FzZSBvZiBhbiBlbXB0eQogICAgICAgICMgaW50ZXJlc3RpbmcgbWF0Y2gsIHRoaXMgaXMgY2xlYXJseSB0aGUgcmlnaHQgdGhpbmcgdG8gZG8sCiAgICAgICAgIyBiZWNhdXNlIG5vIG90aGVyIGtpbmQgb2YgbWF0Y2ggaXMgcG9zc2libGUgaW4gdGhlIHJlZ2lvbnMuCiAgICAgICAgd2hpbGUgYmVzdGkgPiBhbG8gYW5kIGJlc3RqID4gYmxvIGFuZCBcCiAgICAgICAgICAgICAgaXNianVuayhiW2Jlc3RqLTFdKSBhbmQgXAogICAgICAgICAgICAgIGFbYmVzdGktMV0gPT0gYltiZXN0ai0xXToKICAgICAgICAgICAgYmVzdGksIGJlc3RqLCBiZXN0c2l6ZSA9IGJlc3RpLTEsIGJlc3RqLTEsIGJlc3RzaXplKzEKICAgICAgICB3aGlsZSBiZXN0aStiZXN0c2l6ZSA8IGFoaSBhbmQgYmVzdGorYmVzdHNpemUgPCBiaGkgYW5kIFwKICAgICAgICAgICAgICBpc2JqdW5rKGJbYmVzdGorYmVzdHNpemVdKSBhbmQgXAogICAgICAgICAgICAgIGFbYmVzdGkrYmVzdHNpemVdID09IGJbYmVzdGorYmVzdHNpemVdOgogICAgICAgICAgICBiZXN0c2l6ZSA9IGJlc3RzaXplICsgMQoKICAgICAgICByZXR1cm4gTWF0Y2goYmVzdGksIGJlc3RqLCBiZXN0c2l6ZSkKCiAgICBkZWYgZ2V0X21hdGNoaW5nX2Jsb2NrcyhzZWxmKToKICAgICAgICAiIiJSZXR1cm4gbGlzdCBvZiB0cmlwbGVzIGRlc2NyaWJpbmcgbWF0Y2hpbmcgc3Vic2VxdWVuY2VzLgoKICAgICAgICBFYWNoIHRyaXBsZSBpcyBvZiB0aGUgZm9ybSAoaSwgaiwgbiksIGFuZCBtZWFucyB0aGF0CiAgICAgICAgYVtpOmkrbl0gPT0gYltqOmorbl0uICBUaGUgdHJpcGxlcyBhcmUgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIGluCiAgICAgICAgaSBhbmQgaW4gai4gIE5ldyBpbiBQeXRob24gMi41LCBpdCdzIGFsc28gZ3VhcmFudGVlZCB0aGF0IGlmCiAgICAgICAgKGksIGosIG4pIGFuZCAoaScsIGonLCBuJykgYXJlIGFkamFjZW50IHRyaXBsZXMgaW4gdGhlIGxpc3QsIGFuZAogICAgICAgIHRoZSBzZWNvbmQgaXMgbm90IHRoZSBsYXN0IHRyaXBsZSBpbiB0aGUgbGlzdCwgdGhlbiBpK24gIT0gaScgb3IKICAgICAgICBqK24gIT0gaicuICBJT1csIGFkamFjZW50IHRyaXBsZXMgbmV2ZXIgZGVzY3JpYmUgYWRqYWNlbnQgZXF1YWwKICAgICAgICBibG9ja3MuCgogICAgICAgIFRoZSBsYXN0IHRyaXBsZSBpcyBhIGR1bW15LCAobGVuKGEpLCBsZW4oYiksIDApLCBhbmQgaXMgdGhlIG9ubHkKICAgICAgICB0cmlwbGUgd2l0aCBuPT0wLgoKICAgICAgICA+Pj4gcyA9IFNlcXVlbmNlTWF0Y2hlcihOb25lLCAiYWJ4Y2QiLCAiYWJjZCIpCiAgICAgICAgPj4+IGxpc3Qocy5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkpCiAgICAgICAgW01hdGNoKGE9MCwgYj0wLCBzaXplPTIpLCBNYXRjaChhPTMsIGI9Miwgc2l6ZT0yKSwgTWF0Y2goYT01LCBiPTQsIHNpemU9MCldCiAgICAgICAgIiIiCgogICAgICAgIGlmIHNlbGYubWF0Y2hpbmdfYmxvY2tzIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gc2VsZi5tYXRjaGluZ19ibG9ja3MKICAgICAgICBsYSwgbGIgPSBsZW4oc2VsZi5hKSwgbGVuKHNlbGYuYikKCiAgICAgICAgIyBUaGlzIGlzIG1vc3QgbmF0dXJhbGx5IGV4cHJlc3NlZCBhcyBhIHJlY3Vyc2l2ZSBhbGdvcml0aG0sIGJ1dAogICAgICAgICMgYXQgbGVhc3Qgb25lIHVzZXIgYnVtcGVkIGludG8gZXh0cmVtZSB1c2UgY2FzZXMgdGhhdCBleGNlZWRlZAogICAgICAgICMgdGhlIHJlY3Vyc2lvbiBsaW1pdCBvbiB0aGVpciBib3guICBTbywgbm93IHdlIG1haW50YWluIGEgbGlzdAogICAgICAgICMgKCdxdWV1ZWApIG9mIGJsb2NrcyB3ZSBzdGlsbCBuZWVkIHRvIGxvb2sgYXQsIGFuZCBhcHBlbmQgcGFydGlhbAogICAgICAgICMgcmVzdWx0cyB0byBgbWF0Y2hpbmdfYmxvY2tzYCBpbiBhIGxvb3A7IHRoZSBtYXRjaGVzIGFyZSBzb3J0ZWQKICAgICAgICAjIGF0IHRoZSBlbmQuCiAgICAgICAgcXVldWUgPSBbKDAsIGxhLCAwLCBsYildCiAgICAgICAgbWF0Y2hpbmdfYmxvY2tzID0gW10KICAgICAgICB3aGlsZSBxdWV1ZToKICAgICAgICAgICAgYWxvLCBhaGksIGJsbywgYmhpID0gcXVldWUucG9wKCkKICAgICAgICAgICAgaSwgaiwgayA9IHggPSBzZWxmLmZpbmRfbG9uZ2VzdF9tYXRjaChhbG8sIGFoaSwgYmxvLCBiaGkpCiAgICAgICAgICAgICMgYVthbG86aV0gdnMgYltibG86al0gdW5rbm93bgogICAgICAgICAgICAjIGFbaTppK2tdIHNhbWUgYXMgYltqOmora10KICAgICAgICAgICAgIyBhW2krazphaGldIHZzIGJbaitrOmJoaV0gdW5rbm93bgogICAgICAgICAgICBpZiBrOiAgICMgaWYgayBpcyAwLCB0aGVyZSB3YXMgbm8gbWF0Y2hpbmcgYmxvY2sKICAgICAgICAgICAgICAgIG1hdGNoaW5nX2Jsb2Nrcy5hcHBlbmQoeCkKICAgICAgICAgICAgICAgIGlmIGFsbyA8IGkgYW5kIGJsbyA8IGo6CiAgICAgICAgICAgICAgICAgICAgcXVldWUuYXBwZW5kKChhbG8sIGksIGJsbywgaikpCiAgICAgICAgICAgICAgICBpZiBpK2sgPCBhaGkgYW5kIGorayA8IGJoaToKICAgICAgICAgICAgICAgICAgICBxdWV1ZS5hcHBlbmQoKGkraywgYWhpLCBqK2ssIGJoaSkpCiAgICAgICAgbWF0Y2hpbmdfYmxvY2tzLnNvcnQoKQoKICAgICAgICAjIEl0J3MgcG9zc2libGUgdGhhdCB3ZSBoYXZlIGFkamFjZW50IGVxdWFsIGJsb2NrcyBpbiB0aGUKICAgICAgICAjIG1hdGNoaW5nX2Jsb2NrcyBsaXN0IG5vdy4gIFN0YXJ0aW5nIHdpdGggMi41LCB0aGlzIGNvZGUgd2FzIGFkZGVkCiAgICAgICAgIyB0byBjb2xsYXBzZSB0aGVtLgogICAgICAgIGkxID0gajEgPSBrMSA9IDAKICAgICAgICBub25fYWRqYWNlbnQgPSBbXQogICAgICAgIGZvciBpMiwgajIsIGsyIGluIG1hdGNoaW5nX2Jsb2NrczoKICAgICAgICAgICAgIyBJcyB0aGlzIGJsb2NrIGFkamFjZW50IHRvIGkxLCBqMSwgazE/CiAgICAgICAgICAgIGlmIGkxICsgazEgPT0gaTIgYW5kIGoxICsgazEgPT0gajI6CiAgICAgICAgICAgICAgICAjIFllcywgc28gY29sbGFwc2UgdGhlbSAtLSB0aGlzIGp1c3QgaW5jcmVhc2VzIHRoZSBsZW5ndGggb2YKICAgICAgICAgICAgICAgICMgdGhlIGZpcnN0IGJsb2NrIGJ5IHRoZSBsZW5ndGggb2YgdGhlIHNlY29uZCwgYW5kIHRoZSBmaXJzdAogICAgICAgICAgICAgICAgIyBibG9jayBzbyBsZW5ndGhlbmVkIHJlbWFpbnMgdGhlIGJsb2NrIHRvIGNvbXBhcmUgYWdhaW5zdC4KICAgICAgICAgICAgICAgIGsxICs9IGsyCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIE5vdCBhZGphY2VudC4gIFJlbWVtYmVyIHRoZSBmaXJzdCBibG9jayAoazE9PTAgbWVhbnMgaXQncwogICAgICAgICAgICAgICAgIyB0aGUgZHVtbXkgd2Ugc3RhcnRlZCB3aXRoKSwgYW5kIG1ha2UgdGhlIHNlY29uZCBibG9jayB0aGUKICAgICAgICAgICAgICAgICMgbmV3IGJsb2NrIHRvIGNvbXBhcmUgYWdhaW5zdC4KICAgICAgICAgICAgICAgIGlmIGsxOgogICAgICAgICAgICAgICAgICAgIG5vbl9hZGphY2VudC5hcHBlbmQoKGkxLCBqMSwgazEpKQogICAgICAgICAgICAgICAgaTEsIGoxLCBrMSA9IGkyLCBqMiwgazIKICAgICAgICBpZiBrMToKICAgICAgICAgICAgbm9uX2FkamFjZW50LmFwcGVuZCgoaTEsIGoxLCBrMSkpCgogICAgICAgIG5vbl9hZGphY2VudC5hcHBlbmQoIChsYSwgbGIsIDApICkKICAgICAgICBzZWxmLm1hdGNoaW5nX2Jsb2NrcyA9IG5vbl9hZGphY2VudAogICAgICAgIHJldHVybiBtYXAoTWF0Y2guX21ha2UsIHNlbGYubWF0Y2hpbmdfYmxvY2tzKQoKICAgIGRlZiBnZXRfb3Bjb2RlcyhzZWxmKToKICAgICAgICAiIiJSZXR1cm4gbGlzdCBvZiA1LXR1cGxlcyBkZXNjcmliaW5nIGhvdyB0byB0dXJuIGEgaW50byBiLgoKICAgICAgICBFYWNoIHR1cGxlIGlzIG9mIHRoZSBmb3JtICh0YWcsIGkxLCBpMiwgajEsIGoyKS4gIFRoZSBmaXJzdCB0dXBsZQogICAgICAgIGhhcyBpMSA9PSBqMSA9PSAwLCBhbmQgcmVtYWluaW5nIHR1cGxlcyBoYXZlIGkxID09IHRoZSBpMiBmcm9tIHRoZQogICAgICAgIHR1cGxlIHByZWNlZGluZyBpdCwgYW5kIGxpa2V3aXNlIGZvciBqMSA9PSB0aGUgcHJldmlvdXMgajIuCgogICAgICAgIFRoZSB0YWdzIGFyZSBzdHJpbmdzLCB3aXRoIHRoZXNlIG1lYW5pbmdzOgoKICAgICAgICAncmVwbGFjZSc6ICBhW2kxOmkyXSBzaG91bGQgYmUgcmVwbGFjZWQgYnkgYltqMTpqMl0KICAgICAgICAnZGVsZXRlJzogICBhW2kxOmkyXSBzaG91bGQgYmUgZGVsZXRlZC4KICAgICAgICAgICAgICAgICAgICBOb3RlIHRoYXQgajE9PWoyIGluIHRoaXMgY2FzZS4KICAgICAgICAnaW5zZXJ0JzogICBiW2oxOmoyXSBzaG91bGQgYmUgaW5zZXJ0ZWQgYXQgYVtpMTppMV0uCiAgICAgICAgICAgICAgICAgICAgTm90ZSB0aGF0IGkxPT1pMiBpbiB0aGlzIGNhc2UuCiAgICAgICAgJ2VxdWFsJzogICAgYVtpMTppMl0gPT0gYltqMTpqMl0KCiAgICAgICAgPj4+IGEgPSAicWFieGNkIgogICAgICAgID4+PiBiID0gImFieWNkZiIKICAgICAgICA+Pj4gcyA9IFNlcXVlbmNlTWF0Y2hlcihOb25lLCBhLCBiKQogICAgICAgID4+PiBmb3IgdGFnLCBpMSwgaTIsIGoxLCBqMiBpbiBzLmdldF9vcGNvZGVzKCk6CiAgICAgICAgLi4uICAgIHByaW50KCgiJTdzIGFbJWQ6JWRdICglcykgYlslZDolZF0gKCVzKSIgJQogICAgICAgIC4uLiAgICAgICAgICAgKHRhZywgaTEsIGkyLCBhW2kxOmkyXSwgajEsIGoyLCBiW2oxOmoyXSkpKQogICAgICAgICBkZWxldGUgYVswOjFdIChxKSBiWzA6MF0gKCkKICAgICAgICAgIGVxdWFsIGFbMTozXSAoYWIpIGJbMDoyXSAoYWIpCiAgICAgICAgcmVwbGFjZSBhWzM6NF0gKHgpIGJbMjozXSAoeSkKICAgICAgICAgIGVxdWFsIGFbNDo2XSAoY2QpIGJbMzo1XSAoY2QpCiAgICAgICAgIGluc2VydCBhWzY6Nl0gKCkgYls1OjZdIChmKQogICAgICAgICIiIgoKICAgICAgICBpZiBzZWxmLm9wY29kZXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLm9wY29kZXMKICAgICAgICBpID0gaiA9IDAKICAgICAgICBzZWxmLm9wY29kZXMgPSBhbnN3ZXIgPSBbXQogICAgICAgIGZvciBhaSwgYmosIHNpemUgaW4gc2VsZi5nZXRfbWF0Y2hpbmdfYmxvY2tzKCk6CiAgICAgICAgICAgICMgaW52YXJpYW50OiAgd2UndmUgcHVtcGVkIG91dCBjb3JyZWN0IGRpZmZzIHRvIGNoYW5nZQogICAgICAgICAgICAjIGFbOmldIGludG8gYls6al0sIGFuZCB0aGUgbmV4dCBtYXRjaGluZyBibG9jayBpcwogICAgICAgICAgICAjIGFbYWk6YWkrc2l6ZV0gPT0gYltiajpiaitzaXplXS4gIFNvIHdlIG5lZWQgdG8gcHVtcAogICAgICAgICAgICAjIG91dCBhIGRpZmYgdG8gY2hhbmdlIGFbaTphaV0gaW50byBiW2o6YmpdLCBwdW1wIG91dAogICAgICAgICAgICAjIHRoZSBtYXRjaGluZyBibG9jaywgYW5kIG1vdmUgKGksaikgYmV5b25kIHRoZSBtYXRjaAogICAgICAgICAgICB0YWcgPSAnJwogICAgICAgICAgICBpZiBpIDwgYWkgYW5kIGogPCBiajoKICAgICAgICAgICAgICAgIHRhZyA9ICdyZXBsYWNlJwogICAgICAgICAgICBlbGlmIGkgPCBhaToKICAgICAgICAgICAgICAgIHRhZyA9ICdkZWxldGUnCiAgICAgICAgICAgIGVsaWYgaiA8IGJqOgogICAgICAgICAgICAgICAgdGFnID0gJ2luc2VydCcKICAgICAgICAgICAgaWYgdGFnOgogICAgICAgICAgICAgICAgYW5zd2VyLmFwcGVuZCggKHRhZywgaSwgYWksIGosIGJqKSApCiAgICAgICAgICAgIGksIGogPSBhaStzaXplLCBiaitzaXplCiAgICAgICAgICAgICMgdGhlIGxpc3Qgb2YgbWF0Y2hpbmcgYmxvY2tzIGlzIHRlcm1pbmF0ZWQgYnkgYQogICAgICAgICAgICAjIHNlbnRpbmVsIHdpdGggc2l6ZSAwCiAgICAgICAgICAgIGlmIHNpemU6CiAgICAgICAgICAgICAgICBhbnN3ZXIuYXBwZW5kKCAoJ2VxdWFsJywgYWksIGksIGJqLCBqKSApCiAgICAgICAgcmV0dXJuIGFuc3dlcgoKICAgIGRlZiBnZXRfZ3JvdXBlZF9vcGNvZGVzKHNlbGYsIG49Myk6CiAgICAgICAgIiIiIElzb2xhdGUgY2hhbmdlIGNsdXN0ZXJzIGJ5IGVsaW1pbmF0aW5nIHJhbmdlcyB3aXRoIG5vIGNoYW5nZXMuCgogICAgICAgIFJldHVybiBhIGdlbmVyYXRvciBvZiBncm91cHMgd2l0aCB1cHRvIG4gbGluZXMgb2YgY29udGV4dC4KICAgICAgICBFYWNoIGdyb3VwIGlzIGluIHRoZSBzYW1lIGZvcm1hdCBhcyByZXR1cm5lZCBieSBnZXRfb3Bjb2RlcygpLgoKICAgICAgICA+Pj4gZnJvbSBwcHJpbnQgaW1wb3J0IHBwcmludAogICAgICAgID4+PiBhID0gbGlzdChtYXAoc3RyLCByYW5nZSgxLDQwKSkpCiAgICAgICAgPj4+IGIgPSBhWzpdCiAgICAgICAgPj4+IGJbODo4XSA9IFsnaSddICAgICAjIE1ha2UgYW4gaW5zZXJ0aW9uCiAgICAgICAgPj4+IGJbMjBdICs9ICd4JyAgICAgICAjIE1ha2UgYSByZXBsYWNlbWVudAogICAgICAgID4+PiBiWzIzOjI4XSA9IFtdICAgICAgIyBNYWtlIGEgZGVsZXRpb24KICAgICAgICA+Pj4gYlszMF0gKz0gJ3knICAgICAgICMgTWFrZSBhbm90aGVyIHJlcGxhY2VtZW50CiAgICAgICAgPj4+IHBwcmludChsaXN0KFNlcXVlbmNlTWF0Y2hlcihOb25lLGEsYikuZ2V0X2dyb3VwZWRfb3Bjb2RlcygpKSkKICAgICAgICBbWygnZXF1YWwnLCA1LCA4LCA1LCA4KSwgKCdpbnNlcnQnLCA4LCA4LCA4LCA5KSwgKCdlcXVhbCcsIDgsIDExLCA5LCAxMildLAogICAgICAgICBbKCdlcXVhbCcsIDE2LCAxOSwgMTcsIDIwKSwKICAgICAgICAgICgncmVwbGFjZScsIDE5LCAyMCwgMjAsIDIxKSwKICAgICAgICAgICgnZXF1YWwnLCAyMCwgMjIsIDIxLCAyMyksCiAgICAgICAgICAoJ2RlbGV0ZScsIDIyLCAyNywgMjMsIDIzKSwKICAgICAgICAgICgnZXF1YWwnLCAyNywgMzAsIDIzLCAyNildLAogICAgICAgICBbKCdlcXVhbCcsIDMxLCAzNCwgMjcsIDMwKSwKICAgICAgICAgICgncmVwbGFjZScsIDM0LCAzNSwgMzAsIDMxKSwKICAgICAgICAgICgnZXF1YWwnLCAzNSwgMzgsIDMxLCAzNCldXQogICAgICAgICIiIgoKICAgICAgICBjb2RlcyA9IHNlbGYuZ2V0X29wY29kZXMoKQogICAgICAgIGlmIG5vdCBjb2RlczoKICAgICAgICAgICAgY29kZXMgPSBbKCJlcXVhbCIsIDAsIDEsIDAsIDEpXQogICAgICAgICMgRml4dXAgbGVhZGluZyBhbmQgdHJhaWxpbmcgZ3JvdXBzIGlmIHRoZXkgc2hvdyBubyBjaGFuZ2VzLgogICAgICAgIGlmIGNvZGVzWzBdWzBdID09ICdlcXVhbCc6CiAgICAgICAgICAgIHRhZywgaTEsIGkyLCBqMSwgajIgPSBjb2Rlc1swXQogICAgICAgICAgICBjb2Rlc1swXSA9IHRhZywgbWF4KGkxLCBpMi1uKSwgaTIsIG1heChqMSwgajItbiksIGoyCiAgICAgICAgaWYgY29kZXNbLTFdWzBdID09ICdlcXVhbCc6CiAgICAgICAgICAgIHRhZywgaTEsIGkyLCBqMSwgajIgPSBjb2Rlc1stMV0KICAgICAgICAgICAgY29kZXNbLTFdID0gdGFnLCBpMSwgbWluKGkyLCBpMStuKSwgajEsIG1pbihqMiwgajErbikKCiAgICAgICAgbm4gPSBuICsgbgogICAgICAgIGdyb3VwID0gW10KICAgICAgICBmb3IgdGFnLCBpMSwgaTIsIGoxLCBqMiBpbiBjb2RlczoKICAgICAgICAgICAgIyBFbmQgdGhlIGN1cnJlbnQgZ3JvdXAgYW5kIHN0YXJ0IGEgbmV3IG9uZSB3aGVuZXZlcgogICAgICAgICAgICAjIHRoZXJlIGlzIGEgbGFyZ2UgcmFuZ2Ugd2l0aCBubyBjaGFuZ2VzLgogICAgICAgICAgICBpZiB0YWcgPT0gJ2VxdWFsJyBhbmQgaTItaTEgPiBubjoKICAgICAgICAgICAgICAgIGdyb3VwLmFwcGVuZCgodGFnLCBpMSwgbWluKGkyLCBpMStuKSwgajEsIG1pbihqMiwgajErbikpKQogICAgICAgICAgICAgICAgeWllbGQgZ3JvdXAKICAgICAgICAgICAgICAgIGdyb3VwID0gW10KICAgICAgICAgICAgICAgIGkxLCBqMSA9IG1heChpMSwgaTItbiksIG1heChqMSwgajItbikKICAgICAgICAgICAgZ3JvdXAuYXBwZW5kKCh0YWcsIGkxLCBpMiwgajEgLGoyKSkKICAgICAgICBpZiBncm91cCBhbmQgbm90IChsZW4oZ3JvdXApPT0xIGFuZCBncm91cFswXVswXSA9PSAnZXF1YWwnKToKICAgICAgICAgICAgeWllbGQgZ3JvdXAKCiAgICBkZWYgcmF0aW8oc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGEgbWVhc3VyZSBvZiB0aGUgc2VxdWVuY2VzJyBzaW1pbGFyaXR5IChmbG9hdCBpbiBbMCwxXSkuCgogICAgICAgIFdoZXJlIFQgaXMgdGhlIHRvdGFsIG51bWJlciBvZiBlbGVtZW50cyBpbiBib3RoIHNlcXVlbmNlcywgYW5kCiAgICAgICAgTSBpcyB0aGUgbnVtYmVyIG9mIG1hdGNoZXMsIHRoaXMgaXMgMi4wKk0gLyBULgogICAgICAgIE5vdGUgdGhhdCB0aGlzIGlzIDEgaWYgdGhlIHNlcXVlbmNlcyBhcmUgaWRlbnRpY2FsLCBhbmQgMCBpZgogICAgICAgIHRoZXkgaGF2ZSBub3RoaW5nIGluIGNvbW1vbi4KCiAgICAgICAgLnJhdGlvKCkgaXMgZXhwZW5zaXZlIHRvIGNvbXB1dGUgaWYgeW91IGhhdmVuJ3QgYWxyZWFkeSBjb21wdXRlZAogICAgICAgIC5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkgb3IgLmdldF9vcGNvZGVzKCksIGluIHdoaWNoIGNhc2UgeW91IG1heQogICAgICAgIHdhbnQgdG8gdHJ5IC5xdWlja19yYXRpbygpIG9yIC5yZWFsX3F1aWNrX3JhdGlvKCkgZmlyc3QgdG8gZ2V0IGFuCiAgICAgICAgdXBwZXIgYm91bmQuCgogICAgICAgID4+PiBzID0gU2VxdWVuY2VNYXRjaGVyKE5vbmUsICJhYmNkIiwgImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAwLjc1CiAgICAgICAgPj4+IHMucXVpY2tfcmF0aW8oKQogICAgICAgIDAuNzUKICAgICAgICA+Pj4gcy5yZWFsX3F1aWNrX3JhdGlvKCkKICAgICAgICAxLjAKICAgICAgICAiIiIKCiAgICAgICAgbWF0Y2hlcyA9IHN1bSh0cmlwbGVbLTFdIGZvciB0cmlwbGUgaW4gc2VsZi5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkpCiAgICAgICAgcmV0dXJuIF9jYWxjdWxhdGVfcmF0aW8obWF0Y2hlcywgbGVuKHNlbGYuYSkgKyBsZW4oc2VsZi5iKSkKCiAgICBkZWYgcXVpY2tfcmF0aW8oc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGFuIHVwcGVyIGJvdW5kIG9uIHJhdGlvKCkgcmVsYXRpdmVseSBxdWlja2x5LgoKICAgICAgICBUaGlzIGlzbid0IGRlZmluZWQgYmV5b25kIHRoYXQgaXQgaXMgYW4gdXBwZXIgYm91bmQgb24gLnJhdGlvKCksIGFuZAogICAgICAgIGlzIGZhc3RlciB0byBjb21wdXRlLgogICAgICAgICIiIgoKICAgICAgICAjIHZpZXdpbmcgYSBhbmQgYiBhcyBtdWx0aXNldHMsIHNldCBtYXRjaGVzIHRvIHRoZSBjYXJkaW5hbGl0eQogICAgICAgICMgb2YgdGhlaXIgaW50ZXJzZWN0aW9uOyB0aGlzIGNvdW50cyB0aGUgbnVtYmVyIG9mIG1hdGNoZXMKICAgICAgICAjIHdpdGhvdXQgcmVnYXJkIHRvIG9yZGVyLCBzbyBpcyBjbGVhcmx5IGFuIHVwcGVyIGJvdW5kCiAgICAgICAgaWYgc2VsZi5mdWxsYmNvdW50IGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuZnVsbGJjb3VudCA9IGZ1bGxiY291bnQgPSB7fQogICAgICAgICAgICBmb3IgZWx0IGluIHNlbGYuYjoKICAgICAgICAgICAgICAgIGZ1bGxiY291bnRbZWx0XSA9IGZ1bGxiY291bnQuZ2V0KGVsdCwgMCkgKyAxCiAgICAgICAgZnVsbGJjb3VudCA9IHNlbGYuZnVsbGJjb3VudAogICAgICAgICMgYXZhaWxbeF0gaXMgdGhlIG51bWJlciBvZiB0aW1lcyB4IGFwcGVhcnMgaW4gJ2InIGxlc3MgdGhlCiAgICAgICAgIyBudW1iZXIgb2YgdGltZXMgd2UndmUgc2VlbiBpdCBpbiAnYScgc28gZmFyIC4uLiBraW5kYQogICAgICAgIGF2YWlsID0ge30KICAgICAgICBhdmFpbGhhcywgbWF0Y2hlcyA9IGF2YWlsLl9fY29udGFpbnNfXywgMAogICAgICAgIGZvciBlbHQgaW4gc2VsZi5hOgogICAgICAgICAgICBpZiBhdmFpbGhhcyhlbHQpOgogICAgICAgICAgICAgICAgbnVtYiA9IGF2YWlsW2VsdF0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG51bWIgPSBmdWxsYmNvdW50LmdldChlbHQsIDApCiAgICAgICAgICAgIGF2YWlsW2VsdF0gPSBudW1iIC0gMQogICAgICAgICAgICBpZiBudW1iID4gMDoKICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBtYXRjaGVzICsgMQogICAgICAgIHJldHVybiBfY2FsY3VsYXRlX3JhdGlvKG1hdGNoZXMsIGxlbihzZWxmLmEpICsgbGVuKHNlbGYuYikpCgogICAgZGVmIHJlYWxfcXVpY2tfcmF0aW8oc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGFuIHVwcGVyIGJvdW5kIG9uIHJhdGlvKCkgdmVyeSBxdWlja2x5LgoKICAgICAgICBUaGlzIGlzbid0IGRlZmluZWQgYmV5b25kIHRoYXQgaXQgaXMgYW4gdXBwZXIgYm91bmQgb24gLnJhdGlvKCksIGFuZAogICAgICAgIGlzIGZhc3RlciB0byBjb21wdXRlIHRoYW4gZWl0aGVyIC5yYXRpbygpIG9yIC5xdWlja19yYXRpbygpLgogICAgICAgICIiIgoKICAgICAgICBsYSwgbGIgPSBsZW4oc2VsZi5hKSwgbGVuKHNlbGYuYikKICAgICAgICAjIGNhbid0IGhhdmUgbW9yZSBtYXRjaGVzIHRoYW4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUKICAgICAgICAjIHNob3J0ZXIgc2VxdWVuY2UKICAgICAgICByZXR1cm4gX2NhbGN1bGF0ZV9yYXRpbyhtaW4obGEsIGxiKSwgbGEgKyBsYikKCmRlZiBnZXRfY2xvc2VfbWF0Y2hlcyh3b3JkLCBwb3NzaWJpbGl0aWVzLCBuPTMsIGN1dG9mZj0wLjYpOgogICAgIiIiVXNlIFNlcXVlbmNlTWF0Y2hlciB0byByZXR1cm4gbGlzdCBvZiB0aGUgYmVzdCAiZ29vZCBlbm91Z2giIG1hdGNoZXMuCgogICAgd29yZCBpcyBhIHNlcXVlbmNlIGZvciB3aGljaCBjbG9zZSBtYXRjaGVzIGFyZSBkZXNpcmVkICh0eXBpY2FsbHkgYQogICAgc3RyaW5nKS4KCiAgICBwb3NzaWJpbGl0aWVzIGlzIGEgbGlzdCBvZiBzZXF1ZW5jZXMgYWdhaW5zdCB3aGljaCB0byBtYXRjaCB3b3JkCiAgICAodHlwaWNhbGx5IGEgbGlzdCBvZiBzdHJpbmdzKS4KCiAgICBPcHRpb25hbCBhcmcgbiAoZGVmYXVsdCAzKSBpcyB0aGUgbWF4aW11bSBudW1iZXIgb2YgY2xvc2UgbWF0Y2hlcyB0bwogICAgcmV0dXJuLiAgbiBtdXN0IGJlID4gMC4KCiAgICBPcHRpb25hbCBhcmcgY3V0b2ZmIChkZWZhdWx0IDAuNikgaXMgYSBmbG9hdCBpbiBbMCwgMV0uICBQb3NzaWJpbGl0aWVzCiAgICB0aGF0IGRvbid0IHNjb3JlIGF0IGxlYXN0IHRoYXQgc2ltaWxhciB0byB3b3JkIGFyZSBpZ25vcmVkLgoKICAgIFRoZSBiZXN0IChubyBtb3JlIHRoYW4gbikgbWF0Y2hlcyBhbW9uZyB0aGUgcG9zc2liaWxpdGllcyBhcmUgcmV0dXJuZWQKICAgIGluIGEgbGlzdCwgc29ydGVkIGJ5IHNpbWlsYXJpdHkgc2NvcmUsIG1vc3Qgc2ltaWxhciBmaXJzdC4KCiAgICA+Pj4gZ2V0X2Nsb3NlX21hdGNoZXMoImFwcGVsIiwgWyJhcGUiLCAiYXBwbGUiLCAicGVhY2giLCAicHVwcHkiXSkKICAgIFsnYXBwbGUnLCAnYXBlJ10KICAgID4+PiBpbXBvcnQga2V5d29yZCBhcyBfa2V5d29yZAogICAgPj4+IGdldF9jbG9zZV9tYXRjaGVzKCJ3aGVlbCIsIF9rZXl3b3JkLmt3bGlzdCkKICAgIFsnd2hpbGUnXQogICAgPj4+IGdldF9jbG9zZV9tYXRjaGVzKCJBcHBsZSIsIF9rZXl3b3JkLmt3bGlzdCkKICAgIFtdCiAgICA+Pj4gZ2V0X2Nsb3NlX21hdGNoZXMoImFjY2VwdCIsIF9rZXl3b3JkLmt3bGlzdCkKICAgIFsnZXhjZXB0J10KICAgICIiIgoKICAgIGlmIG5vdCBuID4gIDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibiBtdXN0IGJlID4gMDogJXIiICUgKG4sKSkKICAgIGlmIG5vdCAwLjAgPD0gY3V0b2ZmIDw9IDEuMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJjdXRvZmYgbXVzdCBiZSBpbiBbMC4wLCAxLjBdOiAlciIgJSAoY3V0b2ZmLCkpCiAgICByZXN1bHQgPSBbXQogICAgcyA9IFNlcXVlbmNlTWF0Y2hlcigpCiAgICBzLnNldF9zZXEyKHdvcmQpCiAgICBmb3IgeCBpbiBwb3NzaWJpbGl0aWVzOgogICAgICAgIHMuc2V0X3NlcTEoeCkKICAgICAgICBpZiBzLnJlYWxfcXVpY2tfcmF0aW8oKSA+PSBjdXRvZmYgYW5kIFwKICAgICAgICAgICBzLnF1aWNrX3JhdGlvKCkgPj0gY3V0b2ZmIGFuZCBcCiAgICAgICAgICAgcy5yYXRpbygpID49IGN1dG9mZjoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgocy5yYXRpbygpLCB4KSkKCiAgICAjIE1vdmUgdGhlIGJlc3Qgc2NvcmVycyB0byBoZWFkIG9mIGxpc3QKICAgIHJlc3VsdCA9IGhlYXBxLm5sYXJnZXN0KG4sIHJlc3VsdCkKICAgICMgU3RyaXAgc2NvcmVzIGZvciB0aGUgYmVzdCBuIG1hdGNoZXMKICAgIHJldHVybiBbeCBmb3Igc2NvcmUsIHggaW4gcmVzdWx0XQoKZGVmIF9jb3VudF9sZWFkaW5nKGxpbmUsIGNoKToKICAgICIiIgogICAgUmV0dXJuIG51bWJlciBvZiBgY2hgIGNoYXJhY3RlcnMgYXQgdGhlIHN0YXJ0IG9mIGBsaW5lYC4KCiAgICBFeGFtcGxlOgoKICAgID4+PiBfY291bnRfbGVhZGluZygnICAgYWJjJywgJyAnKQogICAgMwogICAgIiIiCgogICAgaSwgbiA9IDAsIGxlbihsaW5lKQogICAgd2hpbGUgaSA8IG4gYW5kIGxpbmVbaV0gPT0gY2g6CiAgICAgICAgaSArPSAxCiAgICByZXR1cm4gaQoKY2xhc3MgRGlmZmVyOgogICAgciIiIgogICAgRGlmZmVyIGlzIGEgY2xhc3MgZm9yIGNvbXBhcmluZyBzZXF1ZW5jZXMgb2YgbGluZXMgb2YgdGV4dCwgYW5kCiAgICBwcm9kdWNpbmcgaHVtYW4tcmVhZGFibGUgZGlmZmVyZW5jZXMgb3IgZGVsdGFzLiAgRGlmZmVyIHVzZXMKICAgIFNlcXVlbmNlTWF0Y2hlciBib3RoIHRvIGNvbXBhcmUgc2VxdWVuY2VzIG9mIGxpbmVzLCBhbmQgdG8gY29tcGFyZQogICAgc2VxdWVuY2VzIG9mIGNoYXJhY3RlcnMgd2l0aGluIHNpbWlsYXIgKG5lYXItbWF0Y2hpbmcpIGxpbmVzLgoKICAgIEVhY2ggbGluZSBvZiBhIERpZmZlciBkZWx0YSBiZWdpbnMgd2l0aCBhIHR3by1sZXR0ZXIgY29kZToKCiAgICAgICAgJy0gJyAgICBsaW5lIHVuaXF1ZSB0byBzZXF1ZW5jZSAxCiAgICAgICAgJysgJyAgICBsaW5lIHVuaXF1ZSB0byBzZXF1ZW5jZSAyCiAgICAgICAgJyAgJyAgICBsaW5lIGNvbW1vbiB0byBib3RoIHNlcXVlbmNlcwogICAgICAgICc/ICcgICAgbGluZSBub3QgcHJlc2VudCBpbiBlaXRoZXIgaW5wdXQgc2VxdWVuY2UKCiAgICBMaW5lcyBiZWdpbm5pbmcgd2l0aCAnPyAnIGF0dGVtcHQgdG8gZ3VpZGUgdGhlIGV5ZSB0byBpbnRyYWxpbmUKICAgIGRpZmZlcmVuY2VzLCBhbmQgd2VyZSBub3QgcHJlc2VudCBpbiBlaXRoZXIgaW5wdXQgc2VxdWVuY2UuICBUaGVzZSBsaW5lcwogICAgY2FuIGJlIGNvbmZ1c2luZyBpZiB0aGUgc2VxdWVuY2VzIGNvbnRhaW4gdGFiIGNoYXJhY3RlcnMuCgogICAgTm90ZSB0aGF0IERpZmZlciBtYWtlcyBubyBjbGFpbSB0byBwcm9kdWNlIGEgKm1pbmltYWwqIGRpZmYuICBUbyB0aGUKICAgIGNvbnRyYXJ5LCBtaW5pbWFsIGRpZmZzIGFyZSBvZnRlbiBjb3VudGVyLWludHVpdGl2ZSwgYmVjYXVzZSB0aGV5IHN5bmNoCiAgICB1cCBhbnl3aGVyZSBwb3NzaWJsZSwgc29tZXRpbWVzIGFjY2lkZW50YWwgbWF0Y2hlcyAxMDAgcGFnZXMgYXBhcnQuCiAgICBSZXN0cmljdGluZyBzeW5jaCBwb2ludHMgdG8gY29udGlndW91cyBtYXRjaGVzIHByZXNlcnZlcyBzb21lIG5vdGlvbiBvZgogICAgbG9jYWxpdHksIGF0IHRoZSBvY2Nhc2lvbmFsIGNvc3Qgb2YgcHJvZHVjaW5nIGEgbG9uZ2VyIGRpZmYuCgogICAgRXhhbXBsZTogQ29tcGFyaW5nIHR3byB0ZXh0cy4KCiAgICBGaXJzdCB3ZSBzZXQgdXAgdGhlIHRleHRzLCBzZXF1ZW5jZXMgb2YgaW5kaXZpZHVhbCBzaW5nbGUtbGluZSBzdHJpbmdzCiAgICBlbmRpbmcgd2l0aCBuZXdsaW5lcyAoc3VjaCBzZXF1ZW5jZXMgY2FuIGFsc28gYmUgb2J0YWluZWQgZnJvbSB0aGUKICAgIGByZWFkbGluZXMoKWAgbWV0aG9kIG9mIGZpbGUtbGlrZSBvYmplY3RzKToKCiAgICA+Pj4gdGV4dDEgPSAnJycgIDEuIEJlYXV0aWZ1bCBpcyBiZXR0ZXIgdGhhbiB1Z2x5LgogICAgLi4uICAgMi4gRXhwbGljaXQgaXMgYmV0dGVyIHRoYW4gaW1wbGljaXQuCiAgICAuLi4gICAzLiBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgIC4uLiAgIDQuIENvbXBsZXggaXMgYmV0dGVyIHRoYW4gY29tcGxpY2F0ZWQuCiAgICAuLi4gJycnLnNwbGl0bGluZXMoa2VlcGVuZHM9VHJ1ZSkKICAgID4+PiBsZW4odGV4dDEpCiAgICA0CiAgICA+Pj4gdGV4dDFbMF1bLTFdCiAgICAnXG4nCiAgICA+Pj4gdGV4dDIgPSAnJycgIDEuIEJlYXV0aWZ1bCBpcyBiZXR0ZXIgdGhhbiB1Z2x5LgogICAgLi4uICAgMy4gICBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgIC4uLiAgIDQuIENvbXBsaWNhdGVkIGlzIGJldHRlciB0aGFuIGNvbXBsZXguCiAgICAuLi4gICA1LiBGbGF0IGlzIGJldHRlciB0aGFuIG5lc3RlZC4KICAgIC4uLiAnJycuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKQoKICAgIE5leHQgd2UgaW5zdGFudGlhdGUgYSBEaWZmZXIgb2JqZWN0OgoKICAgID4+PiBkID0gRGlmZmVyKCkKCiAgICBOb3RlIHRoYXQgd2hlbiBpbnN0YW50aWF0aW5nIGEgRGlmZmVyIG9iamVjdCB3ZSBtYXkgcGFzcyBmdW5jdGlvbnMgdG8KICAgIGZpbHRlciBvdXQgbGluZSBhbmQgY2hhcmFjdGVyICdqdW5rJy4gIFNlZSBEaWZmZXIuX19pbml0X18gZm9yIGRldGFpbHMuCgogICAgRmluYWxseSwgd2UgY29tcGFyZSB0aGUgdHdvOgoKICAgID4+PiByZXN1bHQgPSBsaXN0KGQuY29tcGFyZSh0ZXh0MSwgdGV4dDIpKQoKICAgICdyZXN1bHQnIGlzIGEgbGlzdCBvZiBzdHJpbmdzLCBzbyBsZXQncyBwcmV0dHktcHJpbnQgaXQ6CgogICAgPj4+IGZyb20gcHByaW50IGltcG9ydCBwcHJpbnQgYXMgX3BwcmludAogICAgPj4+IF9wcHJpbnQocmVzdWx0KQogICAgWycgICAgMS4gQmVhdXRpZnVsIGlzIGJldHRlciB0aGFuIHVnbHkuXG4nLAogICAgICctICAgMi4gRXhwbGljaXQgaXMgYmV0dGVyIHRoYW4gaW1wbGljaXQuXG4nLAogICAgICctICAgMy4gU2ltcGxlIGlzIGJldHRlciB0aGFuIGNvbXBsZXguXG4nLAogICAgICcrICAgMy4gICBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC5cbicsCiAgICAgJz8gICAgICsrXG4nLAogICAgICctICAgNC4gQ29tcGxleCBpcyBiZXR0ZXIgdGhhbiBjb21wbGljYXRlZC5cbicsCiAgICAgJz8gICAgICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgLS0tLSBeXG4nLAogICAgICcrICAgNC4gQ29tcGxpY2F0ZWQgaXMgYmV0dGVyIHRoYW4gY29tcGxleC5cbicsCiAgICAgJz8gICAgICAgICAgICsrKysgXiAgICAgICAgICAgICAgICAgICAgICBeXG4nLAogICAgICcrICAgNS4gRmxhdCBpcyBiZXR0ZXIgdGhhbiBuZXN0ZWQuXG4nXQoKICAgIEFzIGEgc2luZ2xlIG11bHRpLWxpbmUgc3RyaW5nIGl0IGxvb2tzIGxpa2UgdGhpczoKCiAgICA+Pj4gcHJpbnQoJycuam9pbihyZXN1bHQpLCBlbmQ9IiIpCiAgICAgICAgMS4gQmVhdXRpZnVsIGlzIGJldHRlciB0aGFuIHVnbHkuCiAgICAtICAgMi4gRXhwbGljaXQgaXMgYmV0dGVyIHRoYW4gaW1wbGljaXQuCiAgICAtICAgMy4gU2ltcGxlIGlzIGJldHRlciB0aGFuIGNvbXBsZXguCiAgICArICAgMy4gICBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgID8gICAgICsrCiAgICAtICAgNC4gQ29tcGxleCBpcyBiZXR0ZXIgdGhhbiBjb21wbGljYXRlZC4KICAgID8gICAgICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgLS0tLSBeCiAgICArICAgNC4gQ29tcGxpY2F0ZWQgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgID8gICAgICAgICAgICsrKysgXiAgICAgICAgICAgICAgICAgICAgICBeCiAgICArICAgNS4gRmxhdCBpcyBiZXR0ZXIgdGhhbiBuZXN0ZWQuCgogICAgTWV0aG9kczoKCiAgICBfX2luaXRfXyhsaW5lanVuaz1Ob25lLCBjaGFyanVuaz1Ob25lKQogICAgICAgIENvbnN0cnVjdCBhIHRleHQgZGlmZmVyZW5jZXIsIHdpdGggb3B0aW9uYWwgZmlsdGVycy4KCiAgICBjb21wYXJlKGEsIGIpCiAgICAgICAgQ29tcGFyZSB0d28gc2VxdWVuY2VzIG9mIGxpbmVzOyBnZW5lcmF0ZSB0aGUgcmVzdWx0aW5nIGRlbHRhLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGxpbmVqdW5rPU5vbmUsIGNoYXJqdW5rPU5vbmUpOgogICAgICAgICIiIgogICAgICAgIENvbnN0cnVjdCBhIHRleHQgZGlmZmVyZW5jZXIsIHdpdGggb3B0aW9uYWwgZmlsdGVycy4KCiAgICAgICAgVGhlIHR3byBvcHRpb25hbCBrZXl3b3JkIHBhcmFtZXRlcnMgYXJlIGZvciBmaWx0ZXIgZnVuY3Rpb25zOgoKICAgICAgICAtIGBsaW5lanVua2A6IEEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYWNjZXB0IGEgc2luZ2xlIHN0cmluZyBhcmd1bWVudCwKICAgICAgICAgIGFuZCByZXR1cm4gdHJ1ZSBpZmYgdGhlIHN0cmluZyBpcyBqdW5rLiBUaGUgbW9kdWxlLWxldmVsIGZ1bmN0aW9uCiAgICAgICAgICBgSVNfTElORV9KVU5LYCBtYXkgYmUgdXNlZCB0byBmaWx0ZXIgb3V0IGxpbmVzIHdpdGhvdXQgdmlzaWJsZQogICAgICAgICAgY2hhcmFjdGVycywgZXhjZXB0IGZvciBhdCBtb3N0IG9uZSBzcGxhdCAoJyMnKS4gIEl0IGlzIHJlY29tbWVuZGVkCiAgICAgICAgICB0byBsZWF2ZSBsaW5lanVuayBOb25lOyBhcyBvZiBQeXRob24gMi4zLCB0aGUgdW5kZXJseWluZwogICAgICAgICAgU2VxdWVuY2VNYXRjaGVyIGNsYXNzIGhhcyBncm93biBhbiBhZGFwdGl2ZSBub3Rpb24gb2YgIm5vaXNlIiBsaW5lcwogICAgICAgICAgdGhhdCdzIGJldHRlciB0aGFuIGFueSBzdGF0aWMgZGVmaW5pdGlvbiB0aGUgYXV0aG9yIGhhcyBldmVyIGJlZW4KICAgICAgICAgIGFibGUgdG8gY3JhZnQuCgogICAgICAgIC0gYGNoYXJqdW5rYDogQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBhY2NlcHQgYSBzdHJpbmcgb2YgbGVuZ3RoIDEuIFRoZQogICAgICAgICAgbW9kdWxlLWxldmVsIGZ1bmN0aW9uIGBJU19DSEFSQUNURVJfSlVOS2AgbWF5IGJlIHVzZWQgdG8gZmlsdGVyIG91dAogICAgICAgICAgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIChhIGJsYW5rIG9yIHRhYjsgKipub3RlKio6IGJhZCBpZGVhIHRvIGluY2x1ZGUKICAgICAgICAgIG5ld2xpbmUgaW4gdGhpcyEpLiAgVXNlIG9mIElTX0NIQVJBQ1RFUl9KVU5LIGlzIHJlY29tbWVuZGVkLgogICAgICAgICIiIgoKICAgICAgICBzZWxmLmxpbmVqdW5rID0gbGluZWp1bmsKICAgICAgICBzZWxmLmNoYXJqdW5rID0gY2hhcmp1bmsKCiAgICBkZWYgY29tcGFyZShzZWxmLCBhLCBiKToKICAgICAgICByIiIiCiAgICAgICAgQ29tcGFyZSB0d28gc2VxdWVuY2VzIG9mIGxpbmVzOyBnZW5lcmF0ZSB0aGUgcmVzdWx0aW5nIGRlbHRhLgoKICAgICAgICBFYWNoIHNlcXVlbmNlIG11c3QgY29udGFpbiBpbmRpdmlkdWFsIHNpbmdsZS1saW5lIHN0cmluZ3MgZW5kaW5nIHdpdGgKICAgICAgICBuZXdsaW5lcy4gU3VjaCBzZXF1ZW5jZXMgY2FuIGJlIG9idGFpbmVkIGZyb20gdGhlIGByZWFkbGluZXMoKWAgbWV0aG9kCiAgICAgICAgb2YgZmlsZS1saWtlIG9iamVjdHMuICBUaGUgZGVsdGEgZ2VuZXJhdGVkIGFsc28gY29uc2lzdHMgb2YgbmV3bGluZS0KICAgICAgICB0ZXJtaW5hdGVkIHN0cmluZ3MsIHJlYWR5IHRvIGJlIHByaW50ZWQgYXMtaXMgdmlhIHRoZSB3cml0ZWxpbmUoKQogICAgICAgIG1ldGhvZCBvZiBhIGZpbGUtbGlrZSBvYmplY3QuCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgID4+PiBwcmludCgnJy5qb2luKERpZmZlcigpLmNvbXBhcmUoJ29uZVxudHdvXG50aHJlZVxuJy5zcGxpdGxpbmVzKFRydWUpLAogICAgICAgIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29yZVxudHJlZVxuZW11XG4nLnNwbGl0bGluZXMoVHJ1ZSkpKSwKICAgICAgICAuLi4gICAgICAgZW5kPSIiKQogICAgICAgIC0gb25lCiAgICAgICAgPyAgXgogICAgICAgICsgb3JlCiAgICAgICAgPyAgXgogICAgICAgIC0gdHdvCiAgICAgICAgLSB0aHJlZQogICAgICAgID8gIC0KICAgICAgICArIHRyZWUKICAgICAgICArIGVtdQogICAgICAgICIiIgoKICAgICAgICBjcnVuY2hlciA9IFNlcXVlbmNlTWF0Y2hlcihzZWxmLmxpbmVqdW5rLCBhLCBiKQogICAgICAgIGZvciB0YWcsIGFsbywgYWhpLCBibG8sIGJoaSBpbiBjcnVuY2hlci5nZXRfb3Bjb2RlcygpOgogICAgICAgICAgICBpZiB0YWcgPT0gJ3JlcGxhY2UnOgogICAgICAgICAgICAgICAgZyA9IHNlbGYuX2ZhbmN5X3JlcGxhY2UoYSwgYWxvLCBhaGksIGIsIGJsbywgYmhpKQogICAgICAgICAgICBlbGlmIHRhZyA9PSAnZGVsZXRlJzoKICAgICAgICAgICAgICAgIGcgPSBzZWxmLl9kdW1wKCctJywgYSwgYWxvLCBhaGkpCiAgICAgICAgICAgIGVsaWYgdGFnID09ICdpbnNlcnQnOgogICAgICAgICAgICAgICAgZyA9IHNlbGYuX2R1bXAoJysnLCBiLCBibG8sIGJoaSkKICAgICAgICAgICAgZWxpZiB0YWcgPT0gJ2VxdWFsJzoKICAgICAgICAgICAgICAgIGcgPSBzZWxmLl9kdW1wKCcgJywgYSwgYWxvLCBhaGkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCd1bmtub3duIHRhZyAlcicgJSAodGFnLCkpCgogICAgICAgICAgICBmb3IgbGluZSBpbiBnOgogICAgICAgICAgICAgICAgeWllbGQgbGluZQoKICAgIGRlZiBfZHVtcChzZWxmLCB0YWcsIHgsIGxvLCBoaSk6CiAgICAgICAgIiIiR2VuZXJhdGUgY29tcGFyaXNvbiByZXN1bHRzIGZvciBhIHNhbWUtdGFnZ2VkIHJhbmdlLiIiIgogICAgICAgIGZvciBpIGluIHJhbmdlKGxvLCBoaSk6CiAgICAgICAgICAgIHlpZWxkICclcyAlcycgJSAodGFnLCB4W2ldKQoKICAgIGRlZiBfcGxhaW5fcmVwbGFjZShzZWxmLCBhLCBhbG8sIGFoaSwgYiwgYmxvLCBiaGkpOgogICAgICAgIGFzc2VydCBhbG8gPCBhaGkgYW5kIGJsbyA8IGJoaQogICAgICAgICMgZHVtcCB0aGUgc2hvcnRlciBibG9jayBmaXJzdCAtLSByZWR1Y2VzIHRoZSBidXJkZW4gb24gc2hvcnQtdGVybQogICAgICAgICMgbWVtb3J5IGlmIHRoZSBibG9ja3MgYXJlIG9mIHZlcnkgZGlmZmVyZW50IHNpemVzCiAgICAgICAgaWYgYmhpIC0gYmxvIDwgYWhpIC0gYWxvOgogICAgICAgICAgICBmaXJzdCAgPSBzZWxmLl9kdW1wKCcrJywgYiwgYmxvLCBiaGkpCiAgICAgICAgICAgIHNlY29uZCA9IHNlbGYuX2R1bXAoJy0nLCBhLCBhbG8sIGFoaSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBmaXJzdCAgPSBzZWxmLl9kdW1wKCctJywgYSwgYWxvLCBhaGkpCiAgICAgICAgICAgIHNlY29uZCA9IHNlbGYuX2R1bXAoJysnLCBiLCBibG8sIGJoaSkKCiAgICAgICAgZm9yIGcgaW4gZmlyc3QsIHNlY29uZDoKICAgICAgICAgICAgZm9yIGxpbmUgaW4gZzoKICAgICAgICAgICAgICAgIHlpZWxkIGxpbmUKCiAgICBkZWYgX2ZhbmN5X3JlcGxhY2Uoc2VsZiwgYSwgYWxvLCBhaGksIGIsIGJsbywgYmhpKToKICAgICAgICByIiIiCiAgICAgICAgV2hlbiByZXBsYWNpbmcgb25lIGJsb2NrIG9mIGxpbmVzIHdpdGggYW5vdGhlciwgc2VhcmNoIHRoZSBibG9ja3MKICAgICAgICBmb3IgKnNpbWlsYXIqIGxpbmVzOyB0aGUgYmVzdC1tYXRjaGluZyBwYWlyIChpZiBhbnkpIGlzIHVzZWQgYXMgYQogICAgICAgIHN5bmNoIHBvaW50LCBhbmQgaW50cmFsaW5lIGRpZmZlcmVuY2UgbWFya2luZyBpcyBkb25lIG9uIHRoZQogICAgICAgIHNpbWlsYXIgcGFpci4gTG90cyBvZiB3b3JrLCBidXQgb2Z0ZW4gd29ydGggaXQuCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgID4+PiBkID0gRGlmZmVyKCkKICAgICAgICA+Pj4gcmVzdWx0cyA9IGQuX2ZhbmN5X3JlcGxhY2UoWydhYmNEZWZnaGlKa2xcbiddLCAwLCAxLAogICAgICAgIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ2FiY2RlZkdoaWprbFxuJ10sIDAsIDEpCiAgICAgICAgPj4+IHByaW50KCcnLmpvaW4ocmVzdWx0cyksIGVuZD0iIikKICAgICAgICAtIGFiY0RlZmdoaUprbAogICAgICAgID8gICAgXiAgXiAgXgogICAgICAgICsgYWJjZGVmR2hpamtsCiAgICAgICAgPyAgICBeICBeICBeCiAgICAgICAgIiIiCgogICAgICAgICMgZG9uJ3Qgc3luY2ggdXAgdW5sZXNzIHRoZSBsaW5lcyBoYXZlIGEgc2ltaWxhcml0eSBzY29yZSBvZiBhdAogICAgICAgICMgbGVhc3QgY3V0b2ZmOyBiZXN0X3JhdGlvIHRyYWNrcyB0aGUgYmVzdCBzY29yZSBzZWVuIHNvIGZhcgogICAgICAgIGJlc3RfcmF0aW8sIGN1dG9mZiA9IDAuNzQsIDAuNzUKICAgICAgICBjcnVuY2hlciA9IFNlcXVlbmNlTWF0Y2hlcihzZWxmLmNoYXJqdW5rKQogICAgICAgIGVxaSwgZXFqID0gTm9uZSwgTm9uZSAgICMgMXN0IGluZGljZXMgb2YgZXF1YWwgbGluZXMgKGlmIGFueSkKCiAgICAgICAgIyBzZWFyY2ggZm9yIHRoZSBwYWlyIHRoYXQgbWF0Y2hlcyBiZXN0IHdpdGhvdXQgYmVpbmcgaWRlbnRpY2FsCiAgICAgICAgIyAoaWRlbnRpY2FsIGxpbmVzIG11c3QgYmUganVuayBsaW5lcywgJiB3ZSBkb24ndCB3YW50IHRvIHN5bmNoIHVwCiAgICAgICAgIyBvbiBqdW5rIC0tIHVubGVzcyB3ZSBoYXZlIHRvKQogICAgICAgIGZvciBqIGluIHJhbmdlKGJsbywgYmhpKToKICAgICAgICAgICAgYmogPSBiW2pdCiAgICAgICAgICAgIGNydW5jaGVyLnNldF9zZXEyKGJqKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShhbG8sIGFoaSk6CiAgICAgICAgICAgICAgICBhaSA9IGFbaV0KICAgICAgICAgICAgICAgIGlmIGFpID09IGJqOgogICAgICAgICAgICAgICAgICAgIGlmIGVxaSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBlcWksIGVxaiA9IGksIGoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgY3J1bmNoZXIuc2V0X3NlcTEoYWkpCiAgICAgICAgICAgICAgICAjIGNvbXB1dGluZyBzaW1pbGFyaXR5IGlzIGV4cGVuc2l2ZSwgc28gdXNlIHRoZSBxdWljawogICAgICAgICAgICAgICAgIyB1cHBlciBib3VuZHMgZmlyc3QgLS0gaGF2ZSBzZWVuIHRoaXMgc3BlZWQgdXAgbWVzc3kKICAgICAgICAgICAgICAgICMgY29tcGFyZXMgYnkgYSBmYWN0b3Igb2YgMy4KICAgICAgICAgICAgICAgICMgbm90ZSB0aGF0IHJhdGlvKCkgaXMgb25seSBleHBlbnNpdmUgdG8gY29tcHV0ZSB0aGUgZmlyc3QKICAgICAgICAgICAgICAgICMgdGltZSBpdCdzIGNhbGxlZCBvbiBhIHNlcXVlbmNlIHBhaXI7IHRoZSBleHBlbnNpdmUgcGFydAogICAgICAgICAgICAgICAgIyBvZiB0aGUgY29tcHV0YXRpb24gaXMgY2FjaGVkIGJ5IGNydW5jaGVyCiAgICAgICAgICAgICAgICBpZiBjcnVuY2hlci5yZWFsX3F1aWNrX3JhdGlvKCkgPiBiZXN0X3JhdGlvIGFuZCBcCiAgICAgICAgICAgICAgICAgICAgICBjcnVuY2hlci5xdWlja19yYXRpbygpID4gYmVzdF9yYXRpbyBhbmQgXAogICAgICAgICAgICAgICAgICAgICAgY3J1bmNoZXIucmF0aW8oKSA+IGJlc3RfcmF0aW86CiAgICAgICAgICAgICAgICAgICAgYmVzdF9yYXRpbywgYmVzdF9pLCBiZXN0X2ogPSBjcnVuY2hlci5yYXRpbygpLCBpLCBqCiAgICAgICAgaWYgYmVzdF9yYXRpbyA8IGN1dG9mZjoKICAgICAgICAgICAgIyBubyBub24taWRlbnRpY2FsICJwcmV0dHkgY2xvc2UiIHBhaXIKICAgICAgICAgICAgaWYgZXFpIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjIG5vIGlkZW50aWNhbCBwYWlyIGVpdGhlciAtLSB0cmVhdCBpdCBhcyBhIHN0cmFpZ2h0IHJlcGxhY2UKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIHNlbGYuX3BsYWluX3JlcGxhY2UoYSwgYWxvLCBhaGksIGIsIGJsbywgYmhpKToKICAgICAgICAgICAgICAgICAgICB5aWVsZCBsaW5lCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgIyBubyBjbG9zZSBwYWlyLCBidXQgYW4gaWRlbnRpY2FsIHBhaXIgLS0gc3luY2ggdXAgb24gdGhhdAogICAgICAgICAgICBiZXN0X2ksIGJlc3RfaiwgYmVzdF9yYXRpbyA9IGVxaSwgZXFqLCAxLjAKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIHRoZXJlJ3MgYSBjbG9zZSBwYWlyLCBzbyBmb3JnZXQgdGhlIGlkZW50aWNhbCBwYWlyIChpZiBhbnkpCiAgICAgICAgICAgIGVxaSA9IE5vbmUKCiAgICAgICAgIyBhW2Jlc3RfaV0gdmVyeSBzaW1pbGFyIHRvIGJbYmVzdF9qXTsgZXFpIGlzIE5vbmUgaWZmIHRoZXkncmUgbm90CiAgICAgICAgIyBpZGVudGljYWwKCiAgICAgICAgIyBwdW1wIG91dCBkaWZmcyBmcm9tIGJlZm9yZSB0aGUgc3luY2ggcG9pbnQKICAgICAgICBmb3IgbGluZSBpbiBzZWxmLl9mYW5jeV9oZWxwZXIoYSwgYWxvLCBiZXN0X2ksIGIsIGJsbywgYmVzdF9qKToKICAgICAgICAgICAgeWllbGQgbGluZQoKICAgICAgICAjIGRvIGludHJhbGluZSBtYXJraW5nIG9uIHRoZSBzeW5jaCBwYWlyCiAgICAgICAgYWVsdCwgYmVsdCA9IGFbYmVzdF9pXSwgYltiZXN0X2pdCiAgICAgICAgaWYgZXFpIGlzIE5vbmU6CiAgICAgICAgICAgICMgcHVtcCBvdXQgYSAnLScsICc/JywgJysnLCAnPycgcXVhZCBmb3IgdGhlIHN5bmNoZWQgbGluZXMKICAgICAgICAgICAgYXRhZ3MgPSBidGFncyA9ICIiCiAgICAgICAgICAgIGNydW5jaGVyLnNldF9zZXFzKGFlbHQsIGJlbHQpCiAgICAgICAgICAgIGZvciB0YWcsIGFpMSwgYWkyLCBiajEsIGJqMiBpbiBjcnVuY2hlci5nZXRfb3Bjb2RlcygpOgogICAgICAgICAgICAgICAgbGEsIGxiID0gYWkyIC0gYWkxLCBiajIgLSBiajEKICAgICAgICAgICAgICAgIGlmIHRhZyA9PSAncmVwbGFjZSc6CiAgICAgICAgICAgICAgICAgICAgYXRhZ3MgKz0gJ14nICogbGEKICAgICAgICAgICAgICAgICAgICBidGFncyArPSAnXicgKiBsYgogICAgICAgICAgICAgICAgZWxpZiB0YWcgPT0gJ2RlbGV0ZSc6CiAgICAgICAgICAgICAgICAgICAgYXRhZ3MgKz0gJy0nICogbGEKICAgICAgICAgICAgICAgIGVsaWYgdGFnID09ICdpbnNlcnQnOgogICAgICAgICAgICAgICAgICAgIGJ0YWdzICs9ICcrJyAqIGxiCiAgICAgICAgICAgICAgICBlbGlmIHRhZyA9PSAnZXF1YWwnOgogICAgICAgICAgICAgICAgICAgIGF0YWdzICs9ICcgJyAqIGxhCiAgICAgICAgICAgICAgICAgICAgYnRhZ3MgKz0gJyAnICogbGIKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigndW5rbm93biB0YWcgJXInICUgKHRhZywpKQogICAgICAgICAgICBmb3IgbGluZSBpbiBzZWxmLl9xZm9ybWF0KGFlbHQsIGJlbHQsIGF0YWdzLCBidGFncyk6CiAgICAgICAgICAgICAgICB5aWVsZCBsaW5lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyB0aGUgc3luY2ggcGFpciBpcyBpZGVudGljYWwKICAgICAgICAgICAgeWllbGQgJyAgJyArIGFlbHQKCiAgICAgICAgIyBwdW1wIG91dCBkaWZmcyBmcm9tIGFmdGVyIHRoZSBzeW5jaCBwb2ludAogICAgICAgIGZvciBsaW5lIGluIHNlbGYuX2ZhbmN5X2hlbHBlcihhLCBiZXN0X2krMSwgYWhpLCBiLCBiZXN0X2orMSwgYmhpKToKICAgICAgICAgICAgeWllbGQgbGluZQoKICAgIGRlZiBfZmFuY3lfaGVscGVyKHNlbGYsIGEsIGFsbywgYWhpLCBiLCBibG8sIGJoaSk6CiAgICAgICAgZyA9IFtdCiAgICAgICAgaWYgYWxvIDwgYWhpOgogICAgICAgICAgICBpZiBibG8gPCBiaGk6CiAgICAgICAgICAgICAgICBnID0gc2VsZi5fZmFuY3lfcmVwbGFjZShhLCBhbG8sIGFoaSwgYiwgYmxvLCBiaGkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBnID0gc2VsZi5fZHVtcCgnLScsIGEsIGFsbywgYWhpKQogICAgICAgIGVsaWYgYmxvIDwgYmhpOgogICAgICAgICAgICBnID0gc2VsZi5fZHVtcCgnKycsIGIsIGJsbywgYmhpKQoKICAgICAgICBmb3IgbGluZSBpbiBnOgogICAgICAgICAgICB5aWVsZCBsaW5lCgogICAgZGVmIF9xZm9ybWF0KHNlbGYsIGFsaW5lLCBibGluZSwgYXRhZ3MsIGJ0YWdzKToKICAgICAgICByIiIiCiAgICAgICAgRm9ybWF0ICI/IiBvdXRwdXQgYW5kIGRlYWwgd2l0aCBsZWFkaW5nIHRhYnMuCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgID4+PiBkID0gRGlmZmVyKCkKICAgICAgICA+Pj4gcmVzdWx0cyA9IGQuX3Fmb3JtYXQoJ1x0YWJjRGVmZ2hpSmtsXG4nLCAnXHRhYmNkZWZHaGlqa2xcbicsCiAgICAgICAgLi4uICAgICAgICAgICAgICAgICAgICAgICcgIF4gXiAgXiAgICAgICcsICcgIF4gXiAgXiAgICAgICcpCiAgICAgICAgPj4+IGZvciBsaW5lIGluIHJlc3VsdHM6IHByaW50KHJlcHIobGluZSkpCiAgICAgICAgLi4uCiAgICAgICAgJy0gXHRhYmNEZWZnaGlKa2xcbicKICAgICAgICAnPyBcdCBeIF4gIF5cbicKICAgICAgICAnKyBcdGFiY2RlZkdoaWprbFxuJwogICAgICAgICc/IFx0IF4gXiAgXlxuJwogICAgICAgICIiIgoKICAgICAgICAjIENhbiBodXJ0LCBidXQgd2lsbCBwcm9iYWJseSBoZWxwIG1vc3Qgb2YgdGhlIHRpbWUuCiAgICAgICAgY29tbW9uID0gbWluKF9jb3VudF9sZWFkaW5nKGFsaW5lLCAiXHQiKSwKICAgICAgICAgICAgICAgICAgICAgX2NvdW50X2xlYWRpbmcoYmxpbmUsICJcdCIpKQogICAgICAgIGNvbW1vbiA9IG1pbihjb21tb24sIF9jb3VudF9sZWFkaW5nKGF0YWdzWzpjb21tb25dLCAiICIpKQogICAgICAgIGNvbW1vbiA9IG1pbihjb21tb24sIF9jb3VudF9sZWFkaW5nKGJ0YWdzWzpjb21tb25dLCAiICIpKQogICAgICAgIGF0YWdzID0gYXRhZ3NbY29tbW9uOl0ucnN0cmlwKCkKICAgICAgICBidGFncyA9IGJ0YWdzW2NvbW1vbjpdLnJzdHJpcCgpCgogICAgICAgIHlpZWxkICItICIgKyBhbGluZQogICAgICAgIGlmIGF0YWdzOgogICAgICAgICAgICB5aWVsZCAiPyAlcyVzXG4iICUgKCJcdCIgKiBjb21tb24sIGF0YWdzKQoKICAgICAgICB5aWVsZCAiKyAiICsgYmxpbmUKICAgICAgICBpZiBidGFnczoKICAgICAgICAgICAgeWllbGQgIj8gJXMlc1xuIiAlICgiXHQiICogY29tbW9uLCBidGFncykKCiMgV2l0aCByZXNwZWN0IHRvIGp1bmssIGFuIGVhcmxpZXIgdmVyc2lvbiBvZiBuZGlmZiBzaW1wbHkgcmVmdXNlZCB0bwojICpzdGFydCogYSBtYXRjaCB3aXRoIGEganVuayBlbGVtZW50LiAgVGhlIHJlc3VsdCB3YXMgY2FzZXMgbGlrZSB0aGlzOgojICAgICBiZWZvcmU6IHByaXZhdGUgVGhyZWFkIGN1cnJlbnRUaHJlYWQ7CiMgICAgIGFmdGVyOiAgcHJpdmF0ZSB2b2xhdGlsZSBUaHJlYWQgY3VycmVudFRocmVhZDsKIyBJZiB5b3UgY29uc2lkZXIgd2hpdGVzcGFjZSB0byBiZSBqdW5rLCB0aGUgbG9uZ2VzdCBjb250aWd1b3VzIG1hdGNoCiMgbm90IHN0YXJ0aW5nIHdpdGgganVuayBpcyAiZSBUaHJlYWQgY3VycmVudFRocmVhZCIuICBTbyBuZGlmZiByZXBvcnRlZAojIHRoYXQgImUgdm9sYXRpbCIgd2FzIGluc2VydGVkIGJldHdlZW4gdGhlICd0JyBhbmQgdGhlICdlJyBpbiAicHJpdmF0ZSIuCiMgV2hpbGUgYW4gYWNjdXJhdGUgdmlldywgdG8gcGVvcGxlIHRoYXQncyBhYnN1cmQuICBUaGUgY3VycmVudCB2ZXJzaW9uCiMgbG9va3MgZm9yIG1hdGNoaW5nIGJsb2NrcyB0aGF0IGFyZSBlbnRpcmVseSBqdW5rLWZyZWUsIHRoZW4gZXh0ZW5kcyB0aGUKIyBsb25nZXN0IG9uZSBvZiB0aG9zZSBhcyBmYXIgYXMgcG9zc2libGUgYnV0IG9ubHkgd2l0aCBtYXRjaGluZyBqdW5rLgojIFNvIG5vdyAiY3VycmVudFRocmVhZCIgaXMgbWF0Y2hlZCwgdGhlbiBleHRlbmRlZCB0byBzdWNrIHVwIHRoZQojIHByZWNlZGluZyBibGFuazsgdGhlbiAicHJpdmF0ZSIgaXMgbWF0Y2hlZCwgYW5kIGV4dGVuZGVkIHRvIHN1Y2sgdXAgdGhlCiMgZm9sbG93aW5nIGJsYW5rOyB0aGVuICJUaHJlYWQiIGlzIG1hdGNoZWQ7IGFuZCBmaW5hbGx5IG5kaWZmIHJlcG9ydHMKIyB0aGF0ICJ2b2xhdGlsZSAiIHdhcyBpbnNlcnRlZCBiZWZvcmUgIlRocmVhZCIuICBUaGUgb25seSBxdWliYmxlCiMgcmVtYWluaW5nIGlzIHRoYXQgcGVyaGFwcyBpdCB3YXMgcmVhbGx5IHRoZSBjYXNlIHRoYXQgIiB2b2xhdGlsZSIKIyB3YXMgaW5zZXJ0ZWQgYWZ0ZXIgInByaXZhdGUiLiAgSSBjYW4gbGl2ZSB3aXRoIHRoYXQgPHdpbms+LgoKaW1wb3J0IHJlCgpkZWYgSVNfTElORV9KVU5LKGxpbmUsIHBhdD1yZS5jb21waWxlKHIiXHMqIz9ccyokIikubWF0Y2gpOgogICAgciIiIgogICAgUmV0dXJuIDEgZm9yIGlnbm9yYWJsZSBsaW5lOiBpZmYgYGxpbmVgIGlzIGJsYW5rIG9yIGNvbnRhaW5zIGEgc2luZ2xlICcjJy4KCiAgICBFeGFtcGxlczoKCiAgICA+Pj4gSVNfTElORV9KVU5LKCdcbicpCiAgICBUcnVlCiAgICA+Pj4gSVNfTElORV9KVU5LKCcgICMgICBcbicpCiAgICBUcnVlCiAgICA+Pj4gSVNfTElORV9KVU5LKCdoZWxsb1xuJykKICAgIEZhbHNlCiAgICAiIiIKCiAgICByZXR1cm4gcGF0KGxpbmUpIGlzIG5vdCBOb25lCgpkZWYgSVNfQ0hBUkFDVEVSX0pVTksoY2gsIHdzPSIgXHQiKToKICAgIHIiIiIKICAgIFJldHVybiAxIGZvciBpZ25vcmFibGUgY2hhcmFjdGVyOiBpZmYgYGNoYCBpcyBhIHNwYWNlIG9yIHRhYi4KCiAgICBFeGFtcGxlczoKCiAgICA+Pj4gSVNfQ0hBUkFDVEVSX0pVTksoJyAnKQogICAgVHJ1ZQogICAgPj4+IElTX0NIQVJBQ1RFUl9KVU5LKCdcdCcpCiAgICBUcnVlCiAgICA+Pj4gSVNfQ0hBUkFDVEVSX0pVTksoJ1xuJykKICAgIEZhbHNlCiAgICA+Pj4gSVNfQ0hBUkFDVEVSX0pVTksoJ3gnKQogICAgRmFsc2UKICAgICIiIgoKICAgIHJldHVybiBjaCBpbiB3cwoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgIFVuaWZpZWQgRGlmZgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZiBfZm9ybWF0X3JhbmdlX3VuaWZpZWQoc3RhcnQsIHN0b3ApOgogICAgJ0NvbnZlcnQgcmFuZ2UgdG8gdGhlICJlZCIgZm9ybWF0JwogICAgIyBQZXIgdGhlIGRpZmYgc3BlYyBhdCBodHRwOi8vd3d3LnVuaXgub3JnL3NpbmdsZV91bml4X3NwZWNpZmljYXRpb24vCiAgICBiZWdpbm5pbmcgPSBzdGFydCArIDEgICAgICMgbGluZXMgc3RhcnQgbnVtYmVyaW5nIHdpdGggb25lCiAgICBsZW5ndGggPSBzdG9wIC0gc3RhcnQKICAgIGlmIGxlbmd0aCA9PSAxOgogICAgICAgIHJldHVybiAne30nLmZvcm1hdChiZWdpbm5pbmcpCiAgICBpZiBub3QgbGVuZ3RoOgogICAgICAgIGJlZ2lubmluZyAtPSAxICAgICAgICAjIGVtcHR5IHJhbmdlcyBiZWdpbiBhdCBsaW5lIGp1c3QgYmVmb3JlIHRoZSByYW5nZQogICAgcmV0dXJuICd7fSx7fScuZm9ybWF0KGJlZ2lubmluZywgbGVuZ3RoKQoKZGVmIHVuaWZpZWRfZGlmZihhLCBiLCBmcm9tZmlsZT0nJywgdG9maWxlPScnLCBmcm9tZmlsZWRhdGU9JycsCiAgICAgICAgICAgICAgICAgdG9maWxlZGF0ZT0nJywgbj0zLCBsaW5ldGVybT0nXG4nKToKICAgIHIiIiIKICAgIENvbXBhcmUgdHdvIHNlcXVlbmNlcyBvZiBsaW5lczsgZ2VuZXJhdGUgdGhlIGRlbHRhIGFzIGEgdW5pZmllZCBkaWZmLgoKICAgIFVuaWZpZWQgZGlmZnMgYXJlIGEgY29tcGFjdCB3YXkgb2Ygc2hvd2luZyBsaW5lIGNoYW5nZXMgYW5kIGEgZmV3CiAgICBsaW5lcyBvZiBjb250ZXh0LiAgVGhlIG51bWJlciBvZiBjb250ZXh0IGxpbmVzIGlzIHNldCBieSAnbicgd2hpY2gKICAgIGRlZmF1bHRzIHRvIHRocmVlLgoKICAgIEJ5IGRlZmF1bHQsIHRoZSBkaWZmIGNvbnRyb2wgbGluZXMgKHRob3NlIHdpdGggLS0tLCArKyssIG9yIEBAKSBhcmUKICAgIGNyZWF0ZWQgd2l0aCBhIHRyYWlsaW5nIG5ld2xpbmUuICBUaGlzIGlzIGhlbHBmdWwgc28gdGhhdCBpbnB1dHMKICAgIGNyZWF0ZWQgZnJvbSBmaWxlLnJlYWRsaW5lcygpIHJlc3VsdCBpbiBkaWZmcyB0aGF0IGFyZSBzdWl0YWJsZSBmb3IKICAgIGZpbGUud3JpdGVsaW5lcygpIHNpbmNlIGJvdGggdGhlIGlucHV0cyBhbmQgb3V0cHV0cyBoYXZlIHRyYWlsaW5nCiAgICBuZXdsaW5lcy4KCiAgICBGb3IgaW5wdXRzIHRoYXQgZG8gbm90IGhhdmUgdHJhaWxpbmcgbmV3bGluZXMsIHNldCB0aGUgbGluZXRlcm0KICAgIGFyZ3VtZW50IHRvICIiIHNvIHRoYXQgdGhlIG91dHB1dCB3aWxsIGJlIHVuaWZvcm1seSBuZXdsaW5lIGZyZWUuCgogICAgVGhlIHVuaWRpZmYgZm9ybWF0IG5vcm1hbGx5IGhhcyBhIGhlYWRlciBmb3IgZmlsZW5hbWVzIGFuZCBtb2RpZmljYXRpb24KICAgIHRpbWVzLiAgQW55IG9yIGFsbCBvZiB0aGVzZSBtYXkgYmUgc3BlY2lmaWVkIHVzaW5nIHN0cmluZ3MgZm9yCiAgICAnZnJvbWZpbGUnLCAndG9maWxlJywgJ2Zyb21maWxlZGF0ZScsIGFuZCAndG9maWxlZGF0ZScuCiAgICBUaGUgbW9kaWZpY2F0aW9uIHRpbWVzIGFyZSBub3JtYWxseSBleHByZXNzZWQgaW4gdGhlIElTTyA4NjAxIGZvcm1hdC4KCiAgICBFeGFtcGxlOgoKICAgID4+PiBmb3IgbGluZSBpbiB1bmlmaWVkX2RpZmYoJ29uZSB0d28gdGhyZWUgZm91cicuc3BsaXQoKSwKICAgIC4uLiAgICAgICAgICAgICAnemVybyBvbmUgdHJlZSBmb3VyJy5zcGxpdCgpLCAnT3JpZ2luYWwnLCAnQ3VycmVudCcsCiAgICAuLi4gICAgICAgICAgICAgJzIwMDUtMDEtMjYgMjM6MzA6NTAnLCAnMjAxMC0wNC0wMiAxMDoyMDo1MicsCiAgICAuLi4gICAgICAgICAgICAgbGluZXRlcm09JycpOgogICAgLi4uICAgICBwcmludChsaW5lKSAgICAgICAgICAgICAgICAgIyBkb2N0ZXN0OiArTk9STUFMSVpFX1dISVRFU1BBQ0UKICAgIC0tLSBPcmlnaW5hbCAgICAgICAgMjAwNS0wMS0yNiAyMzozMDo1MAogICAgKysrIEN1cnJlbnQgICAgICAgICAyMDEwLTA0LTAyIDEwOjIwOjUyCiAgICBAQCAtMSw0ICsxLDQgQEAKICAgICt6ZXJvCiAgICAgb25lCiAgICAtdHdvCiAgICAtdGhyZWUKICAgICt0cmVlCiAgICAgZm91cgogICAgIiIiCgogICAgc3RhcnRlZCA9IEZhbHNlCiAgICBmb3IgZ3JvdXAgaW4gU2VxdWVuY2VNYXRjaGVyKE5vbmUsYSxiKS5nZXRfZ3JvdXBlZF9vcGNvZGVzKG4pOgogICAgICAgIGlmIG5vdCBzdGFydGVkOgogICAgICAgICAgICBzdGFydGVkID0gVHJ1ZQogICAgICAgICAgICBmcm9tZGF0ZSA9ICdcdHt9Jy5mb3JtYXQoZnJvbWZpbGVkYXRlKSBpZiBmcm9tZmlsZWRhdGUgZWxzZSAnJwogICAgICAgICAgICB0b2RhdGUgPSAnXHR7fScuZm9ybWF0KHRvZmlsZWRhdGUpIGlmIHRvZmlsZWRhdGUgZWxzZSAnJwogICAgICAgICAgICB5aWVsZCAnLS0tIHt9e317fScuZm9ybWF0KGZyb21maWxlLCBmcm9tZGF0ZSwgbGluZXRlcm0pCiAgICAgICAgICAgIHlpZWxkICcrKysge317fXt9Jy5mb3JtYXQodG9maWxlLCB0b2RhdGUsIGxpbmV0ZXJtKQoKICAgICAgICBmaXJzdCwgbGFzdCA9IGdyb3VwWzBdLCBncm91cFstMV0KICAgICAgICBmaWxlMV9yYW5nZSA9IF9mb3JtYXRfcmFuZ2VfdW5pZmllZChmaXJzdFsxXSwgbGFzdFsyXSkKICAgICAgICBmaWxlMl9yYW5nZSA9IF9mb3JtYXRfcmFuZ2VfdW5pZmllZChmaXJzdFszXSwgbGFzdFs0XSkKICAgICAgICB5aWVsZCAnQEAgLXt9ICt7fSBAQHt9Jy5mb3JtYXQoZmlsZTFfcmFuZ2UsIGZpbGUyX3JhbmdlLCBsaW5ldGVybSkKCiAgICAgICAgZm9yIHRhZywgaTEsIGkyLCBqMSwgajIgaW4gZ3JvdXA6CiAgICAgICAgICAgIGlmIHRhZyA9PSAnZXF1YWwnOgogICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gYVtpMTppMl06CiAgICAgICAgICAgICAgICAgICAgeWllbGQgJyAnICsgbGluZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgaWYgdGFnIGluIHsncmVwbGFjZScsICdkZWxldGUnfToKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGFbaTE6aTJdOgogICAgICAgICAgICAgICAgICAgIHlpZWxkICctJyArIGxpbmUKICAgICAgICAgICAgaWYgdGFnIGluIHsncmVwbGFjZScsICdpbnNlcnQnfToKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGJbajE6ajJdOgogICAgICAgICAgICAgICAgICAgIHlpZWxkICcrJyArIGxpbmUKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjICBDb250ZXh0IERpZmYKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWYgX2Zvcm1hdF9yYW5nZV9jb250ZXh0KHN0YXJ0LCBzdG9wKToKICAgICdDb252ZXJ0IHJhbmdlIHRvIHRoZSAiZWQiIGZvcm1hdCcKICAgICMgUGVyIHRoZSBkaWZmIHNwZWMgYXQgaHR0cDovL3d3dy51bml4Lm9yZy9zaW5nbGVfdW5peF9zcGVjaWZpY2F0aW9uLwogICAgYmVnaW5uaW5nID0gc3RhcnQgKyAxICAgICAjIGxpbmVzIHN0YXJ0IG51bWJlcmluZyB3aXRoIG9uZQogICAgbGVuZ3RoID0gc3RvcCAtIHN0YXJ0CiAgICBpZiBub3QgbGVuZ3RoOgogICAgICAgIGJlZ2lubmluZyAtPSAxICAgICAgICAjIGVtcHR5IHJhbmdlcyBiZWdpbiBhdCBsaW5lIGp1c3QgYmVmb3JlIHRoZSByYW5nZQogICAgaWYgbGVuZ3RoIDw9IDE6CiAgICAgICAgcmV0dXJuICd7fScuZm9ybWF0KGJlZ2lubmluZykKICAgIHJldHVybiAne30se30nLmZvcm1hdChiZWdpbm5pbmcsIGJlZ2lubmluZyArIGxlbmd0aCAtIDEpCgojIFNlZSBodHRwOi8vd3d3LnVuaXgub3JnL3NpbmdsZV91bml4X3NwZWNpZmljYXRpb24vCmRlZiBjb250ZXh0X2RpZmYoYSwgYiwgZnJvbWZpbGU9JycsIHRvZmlsZT0nJywKICAgICAgICAgICAgICAgICBmcm9tZmlsZWRhdGU9JycsIHRvZmlsZWRhdGU9JycsIG49MywgbGluZXRlcm09J1xuJyk6CiAgICByIiIiCiAgICBDb21wYXJlIHR3byBzZXF1ZW5jZXMgb2YgbGluZXM7IGdlbmVyYXRlIHRoZSBkZWx0YSBhcyBhIGNvbnRleHQgZGlmZi4KCiAgICBDb250ZXh0IGRpZmZzIGFyZSBhIGNvbXBhY3Qgd2F5IG9mIHNob3dpbmcgbGluZSBjaGFuZ2VzIGFuZCBhIGZldwogICAgbGluZXMgb2YgY29udGV4dC4gIFRoZSBudW1iZXIgb2YgY29udGV4dCBsaW5lcyBpcyBzZXQgYnkgJ24nIHdoaWNoCiAgICBkZWZhdWx0cyB0byB0aHJlZS4KCiAgICBCeSBkZWZhdWx0LCB0aGUgZGlmZiBjb250cm9sIGxpbmVzICh0aG9zZSB3aXRoICoqKiBvciAtLS0pIGFyZQogICAgY3JlYXRlZCB3aXRoIGEgdHJhaWxpbmcgbmV3bGluZS4gIFRoaXMgaXMgaGVscGZ1bCBzbyB0aGF0IGlucHV0cwogICAgY3JlYXRlZCBmcm9tIGZpbGUucmVhZGxpbmVzKCkgcmVzdWx0IGluIGRpZmZzIHRoYXQgYXJlIHN1aXRhYmxlIGZvcgogICAgZmlsZS53cml0ZWxpbmVzKCkgc2luY2UgYm90aCB0aGUgaW5wdXRzIGFuZCBvdXRwdXRzIGhhdmUgdHJhaWxpbmcKICAgIG5ld2xpbmVzLgoKICAgIEZvciBpbnB1dHMgdGhhdCBkbyBub3QgaGF2ZSB0cmFpbGluZyBuZXdsaW5lcywgc2V0IHRoZSBsaW5ldGVybQogICAgYXJndW1lbnQgdG8gIiIgc28gdGhhdCB0aGUgb3V0cHV0IHdpbGwgYmUgdW5pZm9ybWx5IG5ld2xpbmUgZnJlZS4KCiAgICBUaGUgY29udGV4dCBkaWZmIGZvcm1hdCBub3JtYWxseSBoYXMgYSBoZWFkZXIgZm9yIGZpbGVuYW1lcyBhbmQKICAgIG1vZGlmaWNhdGlvbiB0aW1lcy4gIEFueSBvciBhbGwgb2YgdGhlc2UgbWF5IGJlIHNwZWNpZmllZCB1c2luZwogICAgc3RyaW5ncyBmb3IgJ2Zyb21maWxlJywgJ3RvZmlsZScsICdmcm9tZmlsZWRhdGUnLCBhbmQgJ3RvZmlsZWRhdGUnLgogICAgVGhlIG1vZGlmaWNhdGlvbiB0aW1lcyBhcmUgbm9ybWFsbHkgZXhwcmVzc2VkIGluIHRoZSBJU08gODYwMSBmb3JtYXQuCiAgICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgc3RyaW5ncyBkZWZhdWx0IHRvIGJsYW5rcy4KCiAgICBFeGFtcGxlOgoKICAgID4+PiBwcmludCgnJy5qb2luKGNvbnRleHRfZGlmZignb25lXG50d29cbnRocmVlXG5mb3VyXG4nLnNwbGl0bGluZXMoVHJ1ZSksCiAgICAuLi4gICAgICAgJ3plcm9cbm9uZVxudHJlZVxuZm91clxuJy5zcGxpdGxpbmVzKFRydWUpLCAnT3JpZ2luYWwnLCAnQ3VycmVudCcpKSwKICAgIC4uLiAgICAgICBlbmQ9IiIpCiAgICAqKiogT3JpZ2luYWwKICAgIC0tLSBDdXJyZW50CiAgICAqKioqKioqKioqKioqKioKICAgICoqKiAxLDQgKioqKgogICAgICBvbmUKICAgICEgdHdvCiAgICAhIHRocmVlCiAgICAgIGZvdXIKICAgIC0tLSAxLDQgLS0tLQogICAgKyB6ZXJvCiAgICAgIG9uZQogICAgISB0cmVlCiAgICAgIGZvdXIKICAgICIiIgoKICAgIHByZWZpeCA9IGRpY3QoaW5zZXJ0PScrICcsIGRlbGV0ZT0nLSAnLCByZXBsYWNlPSchICcsIGVxdWFsPScgICcpCiAgICBzdGFydGVkID0gRmFsc2UKICAgIGZvciBncm91cCBpbiBTZXF1ZW5jZU1hdGNoZXIoTm9uZSxhLGIpLmdldF9ncm91cGVkX29wY29kZXMobik6CiAgICAgICAgaWYgbm90IHN0YXJ0ZWQ6CiAgICAgICAgICAgIHN0YXJ0ZWQgPSBUcnVlCiAgICAgICAgICAgIGZyb21kYXRlID0gJ1x0e30nLmZvcm1hdChmcm9tZmlsZWRhdGUpIGlmIGZyb21maWxlZGF0ZSBlbHNlICcnCiAgICAgICAgICAgIHRvZGF0ZSA9ICdcdHt9Jy5mb3JtYXQodG9maWxlZGF0ZSkgaWYgdG9maWxlZGF0ZSBlbHNlICcnCiAgICAgICAgICAgIHlpZWxkICcqKioge317fXt9Jy5mb3JtYXQoZnJvbWZpbGUsIGZyb21kYXRlLCBsaW5ldGVybSkKICAgICAgICAgICAgeWllbGQgJy0tLSB7fXt9e30nLmZvcm1hdCh0b2ZpbGUsIHRvZGF0ZSwgbGluZXRlcm0pCgogICAgICAgIGZpcnN0LCBsYXN0ID0gZ3JvdXBbMF0sIGdyb3VwWy0xXQogICAgICAgIHlpZWxkICcqKioqKioqKioqKioqKionICsgbGluZXRlcm0KCiAgICAgICAgZmlsZTFfcmFuZ2UgPSBfZm9ybWF0X3JhbmdlX2NvbnRleHQoZmlyc3RbMV0sIGxhc3RbMl0pCiAgICAgICAgeWllbGQgJyoqKiB7fSAqKioqe30nLmZvcm1hdChmaWxlMV9yYW5nZSwgbGluZXRlcm0pCgogICAgICAgIGlmIGFueSh0YWcgaW4geydyZXBsYWNlJywgJ2RlbGV0ZSd9IGZvciB0YWcsIF8sIF8sIF8sIF8gaW4gZ3JvdXApOgogICAgICAgICAgICBmb3IgdGFnLCBpMSwgaTIsIF8sIF8gaW4gZ3JvdXA6CiAgICAgICAgICAgICAgICBpZiB0YWcgIT0gJ2luc2VydCc6CiAgICAgICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gYVtpMTppMl06CiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHByZWZpeFt0YWddICsgbGluZQoKICAgICAgICBmaWxlMl9yYW5nZSA9IF9mb3JtYXRfcmFuZ2VfY29udGV4dChmaXJzdFszXSwgbGFzdFs0XSkKICAgICAgICB5aWVsZCAnLS0tIHt9IC0tLS17fScuZm9ybWF0KGZpbGUyX3JhbmdlLCBsaW5ldGVybSkKCiAgICAgICAgaWYgYW55KHRhZyBpbiB7J3JlcGxhY2UnLCAnaW5zZXJ0J30gZm9yIHRhZywgXywgXywgXywgXyBpbiBncm91cCk6CiAgICAgICAgICAgIGZvciB0YWcsIF8sIF8sIGoxLCBqMiBpbiBncm91cDoKICAgICAgICAgICAgICAgIGlmIHRhZyAhPSAnZGVsZXRlJzoKICAgICAgICAgICAgICAgICAgICBmb3IgbGluZSBpbiBiW2oxOmoyXToKICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcHJlZml4W3RhZ10gKyBsaW5lCgpkZWYgbmRpZmYoYSwgYiwgbGluZWp1bms9Tm9uZSwgY2hhcmp1bms9SVNfQ0hBUkFDVEVSX0pVTkspOgogICAgciIiIgogICAgQ29tcGFyZSBgYWAgYW5kIGBiYCAobGlzdHMgb2Ygc3RyaW5ncyk7IHJldHVybiBhIGBEaWZmZXJgLXN0eWxlIGRlbHRhLgoKICAgIE9wdGlvbmFsIGtleXdvcmQgcGFyYW1ldGVycyBgbGluZWp1bmtgIGFuZCBgY2hhcmp1bmtgIGFyZSBmb3IgZmlsdGVyCiAgICBmdW5jdGlvbnMgKG9yIE5vbmUpOgoKICAgIC0gbGluZWp1bms6IEEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYWNjZXB0IGEgc2luZ2xlIHN0cmluZyBhcmd1bWVudCwgYW5kCiAgICAgIHJldHVybiB0cnVlIGlmZiB0aGUgc3RyaW5nIGlzIGp1bmsuICBUaGUgZGVmYXVsdCBpcyBOb25lLCBhbmQgaXMKICAgICAgcmVjb21tZW5kZWQ7IGFzIG9mIFB5dGhvbiAyLjMsIGFuIGFkYXB0aXZlIG5vdGlvbiBvZiAibm9pc2UiIGxpbmVzIGlzCiAgICAgIHVzZWQgdGhhdCBkb2VzIGEgZ29vZCBqb2Igb24gaXRzIG93bi4KCiAgICAtIGNoYXJqdW5rOiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGFjY2VwdCBhIHN0cmluZyBvZiBsZW5ndGggMS4gVGhlCiAgICAgIGRlZmF1bHQgaXMgbW9kdWxlLWxldmVsIGZ1bmN0aW9uIElTX0NIQVJBQ1RFUl9KVU5LLCB3aGljaCBmaWx0ZXJzIG91dAogICAgICB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgKGEgYmxhbmsgb3IgdGFiOyBub3RlOiBiYWQgaWRlYSB0byBpbmNsdWRlIG5ld2xpbmUKICAgICAgaW4gdGhpcyEpLgoKICAgIFRvb2xzL3NjcmlwdHMvbmRpZmYucHkgaXMgYSBjb21tYW5kLWxpbmUgZnJvbnQtZW5kIHRvIHRoaXMgZnVuY3Rpb24uCgogICAgRXhhbXBsZToKCiAgICA+Pj4gZGlmZiA9IG5kaWZmKCdvbmVcbnR3b1xudGhyZWVcbicuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKSwKICAgIC4uLiAgICAgICAgICAgICAgJ29yZVxudHJlZVxuZW11XG4nLnNwbGl0bGluZXMoa2VlcGVuZHM9VHJ1ZSkpCiAgICA+Pj4gcHJpbnQoJycuam9pbihkaWZmKSwgZW5kPSIiKQogICAgLSBvbmUKICAgID8gIF4KICAgICsgb3JlCiAgICA/ICBeCiAgICAtIHR3bwogICAgLSB0aHJlZQogICAgPyAgLQogICAgKyB0cmVlCiAgICArIGVtdQogICAgIiIiCiAgICByZXR1cm4gRGlmZmVyKGxpbmVqdW5rLCBjaGFyanVuaykuY29tcGFyZShhLCBiKQoKZGVmIF9tZGlmZihmcm9tbGluZXMsIHRvbGluZXMsIGNvbnRleHQ9Tm9uZSwgbGluZWp1bms9Tm9uZSwKICAgICAgICAgICBjaGFyanVuaz1JU19DSEFSQUNURVJfSlVOSyk6CiAgICByIiIiUmV0dXJucyBnZW5lcmF0b3IgeWllbGRpbmcgbWFya2VkIHVwIGZyb20vdG8gc2lkZSBieSBzaWRlIGRpZmZlcmVuY2VzLgoKICAgIEFyZ3VtZW50czoKICAgIGZyb21saW5lcyAtLSBsaXN0IG9mIHRleHQgbGluZXMgdG8gY29tcGFyZWQgdG8gdG9saW5lcwogICAgdG9saW5lcyAtLSBsaXN0IG9mIHRleHQgbGluZXMgdG8gYmUgY29tcGFyZWQgdG8gZnJvbWxpbmVzCiAgICBjb250ZXh0IC0tIG51bWJlciBvZiBjb250ZXh0IGxpbmVzIHRvIGRpc3BsYXkgb24gZWFjaCBzaWRlIG9mIGRpZmZlcmVuY2UsCiAgICAgICAgICAgICAgIGlmIE5vbmUsIGFsbCBmcm9tL3RvIHRleHQgbGluZXMgd2lsbCBiZSBnZW5lcmF0ZWQuCiAgICBsaW5lanVuayAtLSBwYXNzZWQgb24gdG8gbmRpZmYgKHNlZSBuZGlmZiBkb2N1bWVudGF0aW9uKQogICAgY2hhcmp1bmsgLS0gcGFzc2VkIG9uIHRvIG5kaWZmIChzZWUgbmRpZmYgZG9jdW1lbnRhdGlvbikKCiAgICBUaGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gaW50ZXJhdG9yIHdoaWNoIHJldHVybnMgYSB0dXBsZToKICAgIChmcm9tIGxpbmUgdHVwbGUsIHRvIGxpbmUgdHVwbGUsIGJvb2xlYW4gZmxhZykKCiAgICBmcm9tL3RvIGxpbmUgdHVwbGUgLS0gKGxpbmUgbnVtLCBsaW5lIHRleHQpCiAgICAgICAgbGluZSBudW0gLS0gaW50ZWdlciBvciBOb25lICh0byBpbmRpY2F0ZSBhIGNvbnRleHQgc2VwYXJhdGlvbikKICAgICAgICBsaW5lIHRleHQgLS0gb3JpZ2luYWwgbGluZSB0ZXh0IHdpdGggZm9sbG93aW5nIG1hcmtlcnMgaW5zZXJ0ZWQ6CiAgICAgICAgICAgICdcMCsnIC0tIG1hcmtzIHN0YXJ0IG9mIGFkZGVkIHRleHQKICAgICAgICAgICAgJ1wwLScgLS0gbWFya3Mgc3RhcnQgb2YgZGVsZXRlZCB0ZXh0CiAgICAgICAgICAgICdcMF4nIC0tIG1hcmtzIHN0YXJ0IG9mIGNoYW5nZWQgdGV4dAogICAgICAgICAgICAnXDEnIC0tIG1hcmtzIGVuZCBvZiBhZGRlZC9kZWxldGVkL2NoYW5nZWQgdGV4dAoKICAgIGJvb2xlYW4gZmxhZyAtLSBOb25lIGluZGljYXRlcyBjb250ZXh0IHNlcGFyYXRpb24sIFRydWUgaW5kaWNhdGVzCiAgICAgICAgZWl0aGVyICJmcm9tIiBvciAidG8iIGxpbmUgY29udGFpbnMgYSBjaGFuZ2UsIG90aGVyd2lzZSBGYWxzZS4KCiAgICBUaGlzIGZ1bmN0aW9uL2l0ZXJhdG9yIHdhcyBvcmlnaW5hbGx5IGRldmVsb3BlZCB0byBnZW5lcmF0ZSBzaWRlIGJ5IHNpZGUKICAgIGZpbGUgZGlmZmVyZW5jZSBmb3IgbWFraW5nIEhUTUwgcGFnZXMgKHNlZSBIdG1sRGlmZiBjbGFzcyBmb3IgZXhhbXBsZQogICAgdXNhZ2UpLgoKICAgIE5vdGUsIHRoaXMgZnVuY3Rpb24gdXRpbGl6ZXMgdGhlIG5kaWZmIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBzaWRlIGJ5CiAgICBzaWRlIGRpZmZlcmVuY2UgbWFya3VwLiAgT3B0aW9uYWwgbmRpZmYgYXJndW1lbnRzIG1heSBiZSBwYXNzZWQgdG8gdGhpcwogICAgZnVuY3Rpb24gYW5kIHRoZXkgaW4gdHVybiB3aWxsIGJlIHBhc3NlZCB0byBuZGlmZi4KICAgICIiIgogICAgaW1wb3J0IHJlCgogICAgIyByZWd1bGFyIGV4cHJlc3Npb24gZm9yIGZpbmRpbmcgaW50cmFsaW5lIGNoYW5nZSBpbmRpY2VzCiAgICBjaGFuZ2VfcmUgPSByZS5jb21waWxlKCcoXCsrfFwtK3xcXispJykKCiAgICAjIGNyZWF0ZSB0aGUgZGlmZmVyZW5jZSBpdGVyYXRvciB0byBnZW5lcmF0ZSB0aGUgZGlmZmVyZW5jZXMKICAgIGRpZmZfbGluZXNfaXRlcmF0b3IgPSBuZGlmZihmcm9tbGluZXMsdG9saW5lcyxsaW5lanVuayxjaGFyanVuaykKCiAgICBkZWYgX21ha2VfbGluZShsaW5lcywgZm9ybWF0X2tleSwgc2lkZSwgbnVtX2xpbmVzPVswLDBdKToKICAgICAgICAiIiJSZXR1cm5zIGxpbmUgb2YgdGV4dCB3aXRoIHVzZXIncyBjaGFuZ2UgbWFya3VwIGFuZCBsaW5lIGZvcm1hdHRpbmcuCgogICAgICAgIGxpbmVzIC0tIGxpc3Qgb2YgbGluZXMgZnJvbSB0aGUgbmRpZmYgZ2VuZXJhdG9yIHRvIHByb2R1Y2UgYSBsaW5lIG9mCiAgICAgICAgICAgICAgICAgdGV4dCBmcm9tLiAgV2hlbiBwcm9kdWNpbmcgdGhlIGxpbmUgb2YgdGV4dCB0byByZXR1cm4sIHRoZQogICAgICAgICAgICAgICAgIGxpbmVzIHVzZWQgYXJlIHJlbW92ZWQgZnJvbSB0aGlzIGxpc3QuCiAgICAgICAgZm9ybWF0X2tleSAtLSAnKycgcmV0dXJuIGZpcnN0IGxpbmUgaW4gbGlzdCB3aXRoICJhZGQiIG1hcmt1cCBhcm91bmQKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZW50aXJlIGxpbmUuCiAgICAgICAgICAgICAgICAgICAgICAnLScgcmV0dXJuIGZpcnN0IGxpbmUgaW4gbGlzdCB3aXRoICJkZWxldGUiIG1hcmt1cCBhcm91bmQKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZW50aXJlIGxpbmUuCiAgICAgICAgICAgICAgICAgICAgICAnPycgcmV0dXJuIGZpcnN0IGxpbmUgaW4gbGlzdCB3aXRoIGFkZC9kZWxldGUvY2hhbmdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW50cmFsaW5lIG1hcmt1cCAoaW5kaWNlcyBvYnRhaW5lZCBmcm9tIHNlY29uZCBsaW5lKQogICAgICAgICAgICAgICAgICAgICAgTm9uZSByZXR1cm4gZmlyc3QgbGluZSBpbiBsaXN0IHdpdGggbm8gbWFya3VwCiAgICAgICAgc2lkZSAtLSBpbmRpY2UgaW50byB0aGUgbnVtX2xpbmVzIGxpc3QgKDA9ZnJvbSwxPXRvKQogICAgICAgIG51bV9saW5lcyAtLSBmcm9tL3RvIGN1cnJlbnQgbGluZSBudW1iZXIuICBUaGlzIGlzIE5PVCBpbnRlbmRlZCB0byBiZSBhCiAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCBwYXJhbWV0ZXIuICBJdCBpcyBwcmVzZW50IGFzIGEga2V5d29yZCBhcmd1bWVudCB0bwogICAgICAgICAgICAgICAgICAgICBtYWludGFpbiBtZW1vcnkgb2YgdGhlIGN1cnJlbnQgbGluZSBudW1iZXJzIGJldHdlZW4gY2FsbHMKICAgICAgICAgICAgICAgICAgICAgb2YgdGhpcyBmdW5jdGlvbi4KCiAgICAgICAgTm90ZSwgdGhpcyBmdW5jdGlvbiBpcyBwdXJwb3NlZnVsbHkgbm90IGRlZmluZWQgYXQgdGhlIG1vZHVsZSBzY29wZSBzbwogICAgICAgIHRoYXQgZGF0YSBpdCBuZWVkcyBmcm9tIGl0cyBwYXJlbnQgZnVuY3Rpb24gKHdpdGhpbiB3aG9zZSBjb250ZXh0IGl0CiAgICAgICAgaXMgZGVmaW5lZCkgZG9lcyBub3QgbmVlZCB0byBiZSBvZiBtb2R1bGUgc2NvcGUuCiAgICAgICAgIiIiCiAgICAgICAgbnVtX2xpbmVzW3NpZGVdICs9IDEKICAgICAgICAjIEhhbmRsZSBjYXNlIHdoZXJlIG5vIHVzZXIgbWFya3VwIGlzIHRvIGJlIGFkZGVkLCBqdXN0IHJldHVybiBsaW5lIG9mCiAgICAgICAgIyB0ZXh0IHdpdGggdXNlcidzIGxpbmUgZm9ybWF0IHRvIGFsbG93IGZvciB1c2FnZSBvZiB0aGUgbGluZSBudW1iZXIuCiAgICAgICAgaWYgZm9ybWF0X2tleSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKG51bV9saW5lc1tzaWRlXSxsaW5lcy5wb3AoMClbMjpdKQogICAgICAgICMgSGFuZGxlIGNhc2Ugb2YgaW50cmFsaW5lIGNoYW5nZXMKICAgICAgICBpZiBmb3JtYXRfa2V5ID09ICc/JzoKICAgICAgICAgICAgdGV4dCwgbWFya2VycyA9IGxpbmVzLnBvcCgwKSwgbGluZXMucG9wKDApCiAgICAgICAgICAgICMgZmluZCBpbnRyYWxpbmUgY2hhbmdlcyAoc3RvcmUgY2hhbmdlIHR5cGUgYW5kIGluZGljZXMgaW4gdHVwbGVzKQogICAgICAgICAgICBzdWJfaW5mbyA9IFtdCiAgICAgICAgICAgIGRlZiByZWNvcmRfc3ViX2luZm8obWF0Y2hfb2JqZWN0LHN1Yl9pbmZvPXN1Yl9pbmZvKToKICAgICAgICAgICAgICAgIHN1Yl9pbmZvLmFwcGVuZChbbWF0Y2hfb2JqZWN0Lmdyb3VwKDEpWzBdLG1hdGNoX29iamVjdC5zcGFuKCldKQogICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoX29iamVjdC5ncm91cCgxKQogICAgICAgICAgICBjaGFuZ2VfcmUuc3ViKHJlY29yZF9zdWJfaW5mbyxtYXJrZXJzKQogICAgICAgICAgICAjIHByb2Nlc3MgZWFjaCB0dXBsZSBpbnNlcnRpbmcgb3VyIHNwZWNpYWwgbWFya3MgdGhhdCB3b24ndCBiZQogICAgICAgICAgICAjIG5vdGljZWQgYnkgYW4geG1sL2h0bWwgZXNjYXBlci4KICAgICAgICAgICAgZm9yIGtleSwoYmVnaW4sZW5kKSBpbiBzdWJfaW5mb1s6Oi0xXToKICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0WzA6YmVnaW5dKydcMCcra2V5K3RleHRbYmVnaW46ZW5kXSsnXDEnK3RleHRbZW5kOl0KICAgICAgICAgICAgdGV4dCA9IHRleHRbMjpdCiAgICAgICAgIyBIYW5kbGUgY2FzZSBvZiBhZGQvZGVsZXRlIGVudGlyZSBsaW5lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdGV4dCA9IGxpbmVzLnBvcCgwKVsyOl0KICAgICAgICAgICAgIyBpZiBsaW5lIG9mIHRleHQgaXMganVzdCBhIG5ld2xpbmUsIGluc2VydCBhIHNwYWNlIHNvIHRoZXJlIGlzCiAgICAgICAgICAgICMgc29tZXRoaW5nIGZvciB0aGUgdXNlciB0byBoaWdobGlnaHQgYW5kIHNlZS4KICAgICAgICAgICAgaWYgbm90IHRleHQ6CiAgICAgICAgICAgICAgICB0ZXh0ID0gJyAnCiAgICAgICAgICAgICMgaW5zZXJ0IG1hcmtzIHRoYXQgd29uJ3QgYmUgbm90aWNlZCBieSBhbiB4bWwvaHRtbCBlc2NhcGVyLgogICAgICAgICAgICB0ZXh0ID0gJ1wwJyArIGZvcm1hdF9rZXkgKyB0ZXh0ICsgJ1wxJwogICAgICAgICMgUmV0dXJuIGxpbmUgb2YgdGV4dCwgZmlyc3QgYWxsb3cgdXNlcidzIGxpbmUgZm9ybWF0dGVyIHRvIGRvIGl0cwogICAgICAgICMgdGhpbmcgKHN1Y2ggYXMgYWRkaW5nIHRoZSBsaW5lIG51bWJlcikgdGhlbiByZXBsYWNlIHRoZSBzcGVjaWFsCiAgICAgICAgIyBtYXJrcyB3aXRoIHdoYXQgdGhlIHVzZXIncyBjaGFuZ2UgbWFya3VwLgogICAgICAgIHJldHVybiAobnVtX2xpbmVzW3NpZGVdLHRleHQpCgogICAgZGVmIF9saW5lX2l0ZXJhdG9yKCk6CiAgICAgICAgIiIiWWllbGRzIGZyb20vdG8gbGluZXMgb2YgdGV4dCB3aXRoIGEgY2hhbmdlIGluZGljYXRpb24uCgogICAgICAgIFRoaXMgZnVuY3Rpb24gaXMgYW4gaXRlcmF0b3IuICBJdCBpdHNlbGYgcHVsbHMgbGluZXMgZnJvbSBhCiAgICAgICAgZGlmZmVyZW5jaW5nIGl0ZXJhdG9yLCBwcm9jZXNzZXMgdGhlbSBhbmQgeWllbGRzIHRoZW0uICBXaGVuIGl0IGNhbgogICAgICAgIGl0IHlpZWxkcyBib3RoIGEgImZyb20iIGFuZCBhICJ0byIgbGluZSwgb3RoZXJ3aXNlIGl0IHdpbGwgeWllbGQgb25lCiAgICAgICAgb3IgdGhlIG90aGVyLiAgSW4gYWRkaXRpb24gdG8geWllbGRpbmcgdGhlIGxpbmVzIG9mIGZyb20vdG8gdGV4dCwgYQogICAgICAgIGJvb2xlYW4gZmxhZyBpcyB5aWVsZGVkIHRvIGluZGljYXRlIGlmIHRoZSB0ZXh0IGxpbmUocykgaGF2ZQogICAgICAgIGRpZmZlcmVuY2VzIGluIHRoZW0uCgogICAgICAgIE5vdGUsIHRoaXMgZnVuY3Rpb24gaXMgcHVycG9zZWZ1bGx5IG5vdCBkZWZpbmVkIGF0IHRoZSBtb2R1bGUgc2NvcGUgc28KICAgICAgICB0aGF0IGRhdGEgaXQgbmVlZHMgZnJvbSBpdHMgcGFyZW50IGZ1bmN0aW9uICh3aXRoaW4gd2hvc2UgY29udGV4dCBpdAogICAgICAgIGlzIGRlZmluZWQpIGRvZXMgbm90IG5lZWQgdG8gYmUgb2YgbW9kdWxlIHNjb3BlLgogICAgICAgICIiIgogICAgICAgIGxpbmVzID0gW10KICAgICAgICBudW1fYmxhbmtzX3BlbmRpbmcsIG51bV9ibGFua3NfdG9feWllbGQgPSAwLCAwCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgIyBMb2FkIHVwIG5leHQgNCBsaW5lcyBzbyB3ZSBjYW4gbG9vayBhaGVhZCwgY3JlYXRlIHN0cmluZ3Mgd2hpY2gKICAgICAgICAgICAgIyBhcmUgYSBjb25jYXRlbmF0aW9uIG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgZWFjaCBvZiB0aGUgNCBsaW5lcwogICAgICAgICAgICAjIHNvIHdlIGNhbiBkbyBzb21lIHZlcnkgcmVhZGFibGUgY29tcGFyaXNvbnMuCiAgICAgICAgICAgIHdoaWxlIGxlbihsaW5lcykgPCA0OgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChuZXh0KGRpZmZfbGluZXNfaXRlcmF0b3IpKQogICAgICAgICAgICAgICAgZXhjZXB0IFN0b3BJdGVyYXRpb246CiAgICAgICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKCdYJykKICAgICAgICAgICAgcyA9ICcnLmpvaW4oW2xpbmVbMF0gZm9yIGxpbmUgaW4gbGluZXNdKQogICAgICAgICAgICBpZiBzLnN0YXJ0c3dpdGgoJ1gnKToKICAgICAgICAgICAgICAgICMgV2hlbiBubyBtb3JlIGxpbmVzLCBwdW1wIG91dCBhbnkgcmVtYWluaW5nIGJsYW5rIGxpbmVzIHNvIHRoZQogICAgICAgICAgICAgICAgIyBjb3JyZXNwb25kaW5nIGFkZC9kZWxldGUgbGluZXMgZ2V0IGEgbWF0Y2hpbmcgYmxhbmsgbGluZSBzbwogICAgICAgICAgICAgICAgIyBhbGwgbGluZSBwYWlycyBnZXQgeWllbGRlZCBhdCB0aGUgbmV4dCBsZXZlbC4KICAgICAgICAgICAgICAgIG51bV9ibGFua3NfdG9feWllbGQgPSBudW1fYmxhbmtzX3BlbmRpbmcKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJy0/Kz8nKToKICAgICAgICAgICAgICAgICMgc2ltcGxlIGludHJhbGluZSBjaGFuZ2UKICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2xpbmUobGluZXMsJz8nLDApLCBfbWFrZV9saW5lKGxpbmVzLCc/JywxKSwgVHJ1ZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJy0tKysnKToKICAgICAgICAgICAgICAgICMgaW4gZGVsZXRlIGJsb2NrLCBhZGQgYmxvY2sgY29taW5nOiB3ZSBkbyBOT1Qgd2FudCB0byBnZXQKICAgICAgICAgICAgICAgICMgY2F1Z2h0IHVwIG9uIGJsYW5rIGxpbmVzIHlldCwganVzdCBwcm9jZXNzIHRoZSBkZWxldGUgbGluZQogICAgICAgICAgICAgICAgbnVtX2JsYW5rc19wZW5kaW5nIC09IDEKICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2xpbmUobGluZXMsJy0nLDApLCBOb25lLCBUcnVlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHMuc3RhcnRzd2l0aCgoJy0tPysnLCAnLS0rJywgJy0gJykpOgogICAgICAgICAgICAgICAgIyBpbiBkZWxldGUgYmxvY2sgYW5kIHNlZSBhIGludHJhbGluZSBjaGFuZ2Ugb3IgdW5jaGFuZ2VkIGxpbmUKICAgICAgICAgICAgICAgICMgY29taW5nOiB5aWVsZCB0aGUgZGVsZXRlIGxpbmUgYW5kIHRoZW4gYmxhbmtzCiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsdG9fbGluZSA9IF9tYWtlX2xpbmUobGluZXMsJy0nLDApLCBOb25lCiAgICAgICAgICAgICAgICBudW1fYmxhbmtzX3RvX3lpZWxkLG51bV9ibGFua3NfcGVuZGluZyA9IG51bV9ibGFua3NfcGVuZGluZy0xLDAKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJy0rPycpOgogICAgICAgICAgICAgICAgIyBpbnRyYWxpbmUgY2hhbmdlCiAgICAgICAgICAgICAgICB5aWVsZCBfbWFrZV9saW5lKGxpbmVzLE5vbmUsMCksIF9tYWtlX2xpbmUobGluZXMsJz8nLDEpLCBUcnVlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHMuc3RhcnRzd2l0aCgnLT8rJyk6CiAgICAgICAgICAgICAgICAjIGludHJhbGluZSBjaGFuZ2UKICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2xpbmUobGluZXMsJz8nLDApLCBfbWFrZV9saW5lKGxpbmVzLE5vbmUsMSksIFRydWUKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsaWYgcy5zdGFydHN3aXRoKCctJyk6CiAgICAgICAgICAgICAgICAjIGRlbGV0ZSBGUk9NIGxpbmUKICAgICAgICAgICAgICAgIG51bV9ibGFua3NfcGVuZGluZyAtPSAxCiAgICAgICAgICAgICAgICB5aWVsZCBfbWFrZV9saW5lKGxpbmVzLCctJywwKSwgTm9uZSwgVHJ1ZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJystLScpOgogICAgICAgICAgICAgICAgIyBpbiBhZGQgYmxvY2ssIGRlbGV0ZSBibG9jayBjb21pbmc6IHdlIGRvIE5PVCB3YW50IHRvIGdldAogICAgICAgICAgICAgICAgIyBjYXVnaHQgdXAgb24gYmxhbmsgbGluZXMgeWV0LCBqdXN0IHByb2Nlc3MgdGhlIGFkZCBsaW5lCiAgICAgICAgICAgICAgICBudW1fYmxhbmtzX3BlbmRpbmcgKz0gMQogICAgICAgICAgICAgICAgeWllbGQgTm9uZSwgX21ha2VfbGluZShsaW5lcywnKycsMSksIFRydWUKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsaWYgcy5zdGFydHN3aXRoKCgnKyAnLCAnKy0nKSk6CiAgICAgICAgICAgICAgICAjIHdpbGwgYmUgbGVhdmluZyBhbiBhZGQgYmxvY2s6IHlpZWxkIGJsYW5rcyB0aGVuIGFkZCBsaW5lCiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUgPSBOb25lLCBfbWFrZV9saW5lKGxpbmVzLCcrJywxKQogICAgICAgICAgICAgICAgbnVtX2JsYW5rc190b195aWVsZCxudW1fYmxhbmtzX3BlbmRpbmcgPSBudW1fYmxhbmtzX3BlbmRpbmcrMSwwCiAgICAgICAgICAgIGVsaWYgcy5zdGFydHN3aXRoKCcrJyk6CiAgICAgICAgICAgICAgICAjIGluc2lkZSBhbiBhZGQgYmxvY2ssIHlpZWxkIHRoZSBhZGQgbGluZQogICAgICAgICAgICAgICAgbnVtX2JsYW5rc19wZW5kaW5nICs9IDEKICAgICAgICAgICAgICAgIHlpZWxkIE5vbmUsIF9tYWtlX2xpbmUobGluZXMsJysnLDEpLCBUcnVlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHMuc3RhcnRzd2l0aCgnICcpOgogICAgICAgICAgICAgICAgIyB1bmNoYW5nZWQgdGV4dCwgeWllbGQgaXQgdG8gYm90aCBzaWRlcwogICAgICAgICAgICAgICAgeWllbGQgX21ha2VfbGluZShsaW5lc1s6XSxOb25lLDApLF9tYWtlX2xpbmUobGluZXMsTm9uZSwxKSxGYWxzZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIyBDYXRjaCB1cCBvbiB0aGUgYmxhbmsgbGluZXMgc28gd2hlbiB3ZSB5aWVsZCB0aGUgbmV4dCBmcm9tL3RvCiAgICAgICAgICAgICMgcGFpciwgdGhleSBhcmUgbGluZWQgdXAuCiAgICAgICAgICAgIHdoaWxlKG51bV9ibGFua3NfdG9feWllbGQgPCAwKToKICAgICAgICAgICAgICAgIG51bV9ibGFua3NfdG9feWllbGQgKz0gMQogICAgICAgICAgICAgICAgeWllbGQgTm9uZSwoJycsJ1xuJyksVHJ1ZQogICAgICAgICAgICB3aGlsZShudW1fYmxhbmtzX3RvX3lpZWxkID4gMCk6CiAgICAgICAgICAgICAgICBudW1fYmxhbmtzX3RvX3lpZWxkIC09IDEKICAgICAgICAgICAgICAgIHlpZWxkICgnJywnXG4nKSxOb25lLFRydWUKICAgICAgICAgICAgaWYgcy5zdGFydHN3aXRoKCdYJyk6CiAgICAgICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB5aWVsZCBmcm9tX2xpbmUsdG9fbGluZSxUcnVlCgogICAgZGVmIF9saW5lX3BhaXJfaXRlcmF0b3IoKToKICAgICAgICAiIiJZaWVsZHMgZnJvbS90byBsaW5lcyBvZiB0ZXh0IHdpdGggYSBjaGFuZ2UgaW5kaWNhdGlvbi4KCiAgICAgICAgVGhpcyBmdW5jdGlvbiBpcyBhbiBpdGVyYXRvci4gIEl0IGl0c2VsZiBwdWxscyBsaW5lcyBmcm9tIHRoZSBsaW5lCiAgICAgICAgaXRlcmF0b3IuICBJdHMgZGlmZmVyZW5jZSBmcm9tIHRoYXQgaXRlcmF0b3IgaXMgdGhhdCB0aGlzIGZ1bmN0aW9uCiAgICAgICAgYWx3YXlzIHlpZWxkcyBhIHBhaXIgb2YgZnJvbS90byB0ZXh0IGxpbmVzICh3aXRoIHRoZSBjaGFuZ2UKICAgICAgICBpbmRpY2F0aW9uKS4gIElmIG5lY2Vzc2FyeSBpdCB3aWxsIGNvbGxlY3Qgc2luZ2xlIGZyb20vdG8gbGluZXMKICAgICAgICB1bnRpbCBpdCBoYXMgYSBtYXRjaGluZyBwYWlyIGZyb20vdG8gcGFpciB0byB5aWVsZC4KCiAgICAgICAgTm90ZSwgdGhpcyBmdW5jdGlvbiBpcyBwdXJwb3NlZnVsbHkgbm90IGRlZmluZWQgYXQgdGhlIG1vZHVsZSBzY29wZSBzbwogICAgICAgIHRoYXQgZGF0YSBpdCBuZWVkcyBmcm9tIGl0cyBwYXJlbnQgZnVuY3Rpb24gKHdpdGhpbiB3aG9zZSBjb250ZXh0IGl0CiAgICAgICAgaXMgZGVmaW5lZCkgZG9lcyBub3QgbmVlZCB0byBiZSBvZiBtb2R1bGUgc2NvcGUuCiAgICAgICAgIiIiCiAgICAgICAgbGluZV9pdGVyYXRvciA9IF9saW5lX2l0ZXJhdG9yKCkKICAgICAgICBmcm9tbGluZXMsdG9saW5lcz1bXSxbXQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICMgQ29sbGVjdGluZyBsaW5lcyBvZiB0ZXh0IHVudGlsIHdlIGhhdmUgYSBmcm9tL3RvIHBhaXIKICAgICAgICAgICAgd2hpbGUgKGxlbihmcm9tbGluZXMpPT0wIG9yIGxlbih0b2xpbmVzKT09MCk6CiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYgPSBuZXh0KGxpbmVfaXRlcmF0b3IpCiAgICAgICAgICAgICAgICBpZiBmcm9tX2xpbmUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgZnJvbWxpbmVzLmFwcGVuZCgoZnJvbV9saW5lLGZvdW5kX2RpZmYpKQogICAgICAgICAgICAgICAgaWYgdG9fbGluZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICB0b2xpbmVzLmFwcGVuZCgodG9fbGluZSxmb3VuZF9kaWZmKSkKICAgICAgICAgICAgIyBPbmNlIHdlIGhhdmUgYSBwYWlyLCByZW1vdmUgdGhlbSBmcm9tIHRoZSBjb2xsZWN0aW9uIGFuZCB5aWVsZCBpdAogICAgICAgICAgICBmcm9tX2xpbmUsIGZyb21EaWZmID0gZnJvbWxpbmVzLnBvcCgwKQogICAgICAgICAgICB0b19saW5lLCB0b19kaWZmID0gdG9saW5lcy5wb3AoMCkKICAgICAgICAgICAgeWllbGQgKGZyb21fbGluZSx0b19saW5lLGZyb21EaWZmIG9yIHRvX2RpZmYpCgogICAgIyBIYW5kbGUgY2FzZSB3aGVyZSB1c2VyIGRvZXMgbm90IHdhbnQgY29udGV4dCBkaWZmZXJlbmNpbmcsIGp1c3QgeWllbGQKICAgICMgdGhlbSB1cCB3aXRob3V0IGRvaW5nIGFueXRoaW5nIGVsc2Ugd2l0aCB0aGVtLgogICAgbGluZV9wYWlyX2l0ZXJhdG9yID0gX2xpbmVfcGFpcl9pdGVyYXRvcigpCiAgICBpZiBjb250ZXh0IGlzIE5vbmU6CiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgeWllbGQgbmV4dChsaW5lX3BhaXJfaXRlcmF0b3IpCiAgICAjIEhhbmRsZSBjYXNlIHdoZXJlIHVzZXIgd2FudHMgY29udGV4dCBkaWZmZXJlbmNpbmcuICBXZSBtdXN0IGRvIHNvbWUKICAgICMgc3RvcmFnZSBvZiBsaW5lcyB1bnRpbCB3ZSBrbm93IGZvciBzdXJlIHRoYXQgdGhleSBhcmUgdG8gYmUgeWllbGRlZC4KICAgIGVsc2U6CiAgICAgICAgY29udGV4dCArPSAxCiAgICAgICAgbGluZXNfdG9fd3JpdGUgPSAwCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgIyBTdG9yZSBsaW5lcyB1cCB1bnRpbCB3ZSBmaW5kIGEgZGlmZmVyZW5jZSwgbm90ZSB1c2Ugb2YgYQogICAgICAgICAgICAjIGNpcmN1bGFyIHF1ZXVlIGJlY2F1c2Ugd2Ugb25seSBuZWVkIHRvIGtlZXAgYXJvdW5kIHdoYXQKICAgICAgICAgICAgIyB3ZSBuZWVkIGZvciBjb250ZXh0LgogICAgICAgICAgICBpbmRleCwgY29udGV4dExpbmVzID0gMCwgW05vbmVdKihjb250ZXh0KQogICAgICAgICAgICBmb3VuZF9kaWZmID0gRmFsc2UKICAgICAgICAgICAgd2hpbGUoZm91bmRfZGlmZiBpcyBGYWxzZSk6CiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYgPSBuZXh0KGxpbmVfcGFpcl9pdGVyYXRvcikKICAgICAgICAgICAgICAgIGkgPSBpbmRleCAlIGNvbnRleHQKICAgICAgICAgICAgICAgIGNvbnRleHRMaW5lc1tpXSA9IChmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYpCiAgICAgICAgICAgICAgICBpbmRleCArPSAxCiAgICAgICAgICAgICMgWWllbGQgbGluZXMgdGhhdCB3ZSBoYXZlIGNvbGxlY3RlZCBzbyBmYXIsIGJ1dCBmaXJzdCB5aWVsZAogICAgICAgICAgICAjIHRoZSB1c2VyJ3Mgc2VwYXJhdG9yLgogICAgICAgICAgICBpZiBpbmRleCA+IGNvbnRleHQ6CiAgICAgICAgICAgICAgICB5aWVsZCBOb25lLCBOb25lLCBOb25lCiAgICAgICAgICAgICAgICBsaW5lc190b193cml0ZSA9IGNvbnRleHQKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGxpbmVzX3RvX3dyaXRlID0gaW5kZXgKICAgICAgICAgICAgICAgIGluZGV4ID0gMAogICAgICAgICAgICB3aGlsZShsaW5lc190b193cml0ZSk6CiAgICAgICAgICAgICAgICBpID0gaW5kZXggJSBjb250ZXh0CiAgICAgICAgICAgICAgICBpbmRleCArPSAxCiAgICAgICAgICAgICAgICB5aWVsZCBjb250ZXh0TGluZXNbaV0KICAgICAgICAgICAgICAgIGxpbmVzX3RvX3dyaXRlIC09IDEKICAgICAgICAgICAgIyBOb3cgeWllbGQgdGhlIGNvbnRleHQgbGluZXMgYWZ0ZXIgdGhlIGNoYW5nZQogICAgICAgICAgICBsaW5lc190b193cml0ZSA9IGNvbnRleHQtMQogICAgICAgICAgICB3aGlsZShsaW5lc190b193cml0ZSk6CiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYgPSBuZXh0KGxpbmVfcGFpcl9pdGVyYXRvcikKICAgICAgICAgICAgICAgICMgSWYgYW5vdGhlciBjaGFuZ2Ugd2l0aGluIHRoZSBjb250ZXh0LCBleHRlbmQgdGhlIGNvbnRleHQKICAgICAgICAgICAgICAgIGlmIGZvdW5kX2RpZmY6CiAgICAgICAgICAgICAgICAgICAgbGluZXNfdG9fd3JpdGUgPSBjb250ZXh0LTEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbGluZXNfdG9fd3JpdGUgLT0gMQogICAgICAgICAgICAgICAgeWllbGQgZnJvbV9saW5lLCB0b19saW5lLCBmb3VuZF9kaWZmCgoKX2ZpbGVfdGVtcGxhdGUgPSAiIiIKPCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgVHJhbnNpdGlvbmFsLy9FTiIKICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS10cmFuc2l0aW9uYWwuZHRkIj4KCjxodG1sPgoKPGhlYWQ+CiAgICA8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiCiAgICAgICAgICBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9SVNPLTg4NTktMSIgLz4KICAgIDx0aXRsZT48L3RpdGxlPgogICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4lKHN0eWxlcylzCiAgICA8L3N0eWxlPgo8L2hlYWQ+Cgo8Ym9keT4KICAgICUodGFibGUpcyUobGVnZW5kKXMKPC9ib2R5PgoKPC9odG1sPiIiIgoKX3N0eWxlcyA9ICIiIgogICAgICAgIHRhYmxlLmRpZmYge2ZvbnQtZmFtaWx5OkNvdXJpZXI7IGJvcmRlcjptZWRpdW07fQogICAgICAgIC5kaWZmX2hlYWRlciB7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfQogICAgICAgIHRkLmRpZmZfaGVhZGVyIHt0ZXh0LWFsaWduOnJpZ2h0fQogICAgICAgIC5kaWZmX25leHQge2JhY2tncm91bmQtY29sb3I6I2MwYzBjMH0KICAgICAgICAuZGlmZl9hZGQge2JhY2tncm91bmQtY29sb3I6I2FhZmZhYX0KICAgICAgICAuZGlmZl9jaGcge2JhY2tncm91bmQtY29sb3I6I2ZmZmY3N30KICAgICAgICAuZGlmZl9zdWIge2JhY2tncm91bmQtY29sb3I6I2ZmYWFhYX0iIiIKCl90YWJsZV90ZW1wbGF0ZSA9ICIiIgogICAgPHRhYmxlIGNsYXNzPSJkaWZmIiBpZD0iZGlmZmxpYl9jaGdfJShwcmVmaXgpc190b3AiCiAgICAgICAgICAgY2VsbHNwYWNpbmc9IjAiIGNlbGxwYWRkaW5nPSIwIiBydWxlcz0iZ3JvdXBzIiA+CiAgICAgICAgPGNvbGdyb3VwPjwvY29sZ3JvdXA+IDxjb2xncm91cD48L2NvbGdyb3VwPiA8Y29sZ3JvdXA+PC9jb2xncm91cD4KICAgICAgICA8Y29sZ3JvdXA+PC9jb2xncm91cD4gPGNvbGdyb3VwPjwvY29sZ3JvdXA+IDxjb2xncm91cD48L2NvbGdyb3VwPgogICAgICAgICUoaGVhZGVyX3JvdylzCiAgICAgICAgPHRib2R5PgolKGRhdGFfcm93cylzICAgICAgICA8L3Rib2R5PgogICAgPC90YWJsZT4iIiIKCl9sZWdlbmQgPSAiIiIKICAgIDx0YWJsZSBjbGFzcz0iZGlmZiIgc3VtbWFyeT0iTGVnZW5kcyI+CiAgICAgICAgPHRyPiA8dGggY29sc3Bhbj0iMiI+IExlZ2VuZHMgPC90aD4gPC90cj4KICAgICAgICA8dHI+IDx0ZD4gPHRhYmxlIGJvcmRlcj0iIiBzdW1tYXJ5PSJDb2xvcnMiPgogICAgICAgICAgICAgICAgICAgICAgPHRyPjx0aD4gQ29sb3JzIDwvdGg+IDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJkaWZmX2FkZCI+Jm5ic3A7QWRkZWQmbmJzcDs8L3RkPjwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJkaWZmX2NoZyI+Q2hhbmdlZDwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJkaWZmX3N1YiI+RGVsZXRlZDwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgIDwvdGFibGU+PC90ZD4KICAgICAgICAgICAgIDx0ZD4gPHRhYmxlIGJvcmRlcj0iIiBzdW1tYXJ5PSJMaW5rcyI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRoIGNvbHNwYW49IjIiPiBMaW5rcyA8L3RoPiA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZD4oZilpcnN0IGNoYW5nZTwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkPihuKWV4dCBjaGFuZ2U8L3RkPiA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZD4odClvcDwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgIDwvdGFibGU+PC90ZD4gPC90cj4KICAgIDwvdGFibGU+IiIiCgpjbGFzcyBIdG1sRGlmZihvYmplY3QpOgogICAgIiIiRm9yIHByb2R1Y2luZyBIVE1MIHNpZGUgYnkgc2lkZSBjb21wYXJpc29uIHdpdGggY2hhbmdlIGhpZ2hsaWdodHMuCgogICAgVGhpcyBjbGFzcyBjYW4gYmUgdXNlZCB0byBjcmVhdGUgYW4gSFRNTCB0YWJsZSAob3IgYSBjb21wbGV0ZSBIVE1MIGZpbGUKICAgIGNvbnRhaW5pbmcgdGhlIHRhYmxlKSBzaG93aW5nIGEgc2lkZSBieSBzaWRlLCBsaW5lIGJ5IGxpbmUgY29tcGFyaXNvbgogICAgb2YgdGV4dCB3aXRoIGludGVyLWxpbmUgYW5kIGludHJhLWxpbmUgY2hhbmdlIGhpZ2hsaWdodHMuICBUaGUgdGFibGUgY2FuCiAgICBiZSBnZW5lcmF0ZWQgaW4gZWl0aGVyIGZ1bGwgb3IgY29udGV4dHVhbCBkaWZmZXJlbmNlIG1vZGUuCgogICAgVGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSBwcm92aWRlZCBmb3IgSFRNTCBnZW5lcmF0aW9uOgoKICAgIG1ha2VfdGFibGUgLS0gZ2VuZXJhdGVzIEhUTUwgZm9yIGEgc2luZ2xlIHNpZGUgYnkgc2lkZSB0YWJsZQogICAgbWFrZV9maWxlIC0tIGdlbmVyYXRlcyBjb21wbGV0ZSBIVE1MIGZpbGUgd2l0aCBhIHNpbmdsZSBzaWRlIGJ5IHNpZGUgdGFibGUKCiAgICBTZWUgdG9vbHMvc2NyaXB0cy9kaWZmLnB5IGZvciBhbiBleGFtcGxlIHVzYWdlIG9mIHRoaXMgY2xhc3MuCiAgICAiIiIKCiAgICBfZmlsZV90ZW1wbGF0ZSA9IF9maWxlX3RlbXBsYXRlCiAgICBfc3R5bGVzID0gX3N0eWxlcwogICAgX3RhYmxlX3RlbXBsYXRlID0gX3RhYmxlX3RlbXBsYXRlCiAgICBfbGVnZW5kID0gX2xlZ2VuZAogICAgX2RlZmF1bHRfcHJlZml4ID0gMAoKICAgIGRlZiBfX2luaXRfXyhzZWxmLHRhYnNpemU9OCx3cmFwY29sdW1uPU5vbmUsbGluZWp1bms9Tm9uZSwKICAgICAgICAgICAgICAgICBjaGFyanVuaz1JU19DSEFSQUNURVJfSlVOSyk6CiAgICAgICAgIiIiSHRtbERpZmYgaW5zdGFuY2UgaW5pdGlhbGl6ZXIKCiAgICAgICAgQXJndW1lbnRzOgogICAgICAgIHRhYnNpemUgLS0gdGFiIHN0b3Agc3BhY2luZywgZGVmYXVsdHMgdG8gOC4KICAgICAgICB3cmFwY29sdW1uIC0tIGNvbHVtbiBudW1iZXIgd2hlcmUgbGluZXMgYXJlIGJyb2tlbiBhbmQgd3JhcHBlZCwKICAgICAgICAgICAgZGVmYXVsdHMgdG8gTm9uZSB3aGVyZSBsaW5lcyBhcmUgbm90IHdyYXBwZWQuCiAgICAgICAgbGluZWp1bmssY2hhcmp1bmsgLS0ga2V5d29yZCBhcmd1bWVudHMgcGFzc2VkIGludG8gbmRpZmYoKSAodXNlZCB0byBieQogICAgICAgICAgICBIdG1sRGlmZigpIHRvIGdlbmVyYXRlIHRoZSBzaWRlIGJ5IHNpZGUgSFRNTCBkaWZmZXJlbmNlcykuICBTZWUKICAgICAgICAgICAgbmRpZmYoKSBkb2N1bWVudGF0aW9uIGZvciBhcmd1bWVudCBkZWZhdWx0IHZhbHVlcyBhbmQgZGVzY3JpcHRpb25zLgogICAgICAgICIiIgogICAgICAgIHNlbGYuX3RhYnNpemUgPSB0YWJzaXplCiAgICAgICAgc2VsZi5fd3JhcGNvbHVtbiA9IHdyYXBjb2x1bW4KICAgICAgICBzZWxmLl9saW5lanVuayA9IGxpbmVqdW5rCiAgICAgICAgc2VsZi5fY2hhcmp1bmsgPSBjaGFyanVuawoKICAgIGRlZiBtYWtlX2ZpbGUoc2VsZixmcm9tbGluZXMsdG9saW5lcyxmcm9tZGVzYz0nJyx0b2Rlc2M9JycsY29udGV4dD1GYWxzZSwKICAgICAgICAgICAgICAgICAgbnVtbGluZXM9NSk6CiAgICAgICAgIiIiUmV0dXJucyBIVE1MIGZpbGUgb2Ygc2lkZSBieSBzaWRlIGNvbXBhcmlzb24gd2l0aCBjaGFuZ2UgaGlnaGxpZ2h0cwoKICAgICAgICBBcmd1bWVudHM6CiAgICAgICAgZnJvbWxpbmVzIC0tIGxpc3Qgb2YgImZyb20iIGxpbmVzCiAgICAgICAgdG9saW5lcyAtLSBsaXN0IG9mICJ0byIgbGluZXMKICAgICAgICBmcm9tZGVzYyAtLSAiZnJvbSIgZmlsZSBjb2x1bW4gaGVhZGVyIHN0cmluZwogICAgICAgIHRvZGVzYyAtLSAidG8iIGZpbGUgY29sdW1uIGhlYWRlciBzdHJpbmcKICAgICAgICBjb250ZXh0IC0tIHNldCB0byBUcnVlIGZvciBjb250ZXh0dWFsIGRpZmZlcmVuY2VzIChkZWZhdWx0cyB0byBGYWxzZQogICAgICAgICAgICB3aGljaCBzaG93cyBmdWxsIGRpZmZlcmVuY2VzKS4KICAgICAgICBudW1saW5lcyAtLSBudW1iZXIgb2YgY29udGV4dCBsaW5lcy4gIFdoZW4gY29udGV4dCBpcyBzZXQgVHJ1ZSwKICAgICAgICAgICAgY29udHJvbHMgbnVtYmVyIG9mIGxpbmVzIGRpc3BsYXllZCBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjaGFuZ2UuCiAgICAgICAgICAgIFdoZW4gY29udGV4dCBpcyBGYWxzZSwgY29udHJvbHMgdGhlIG51bWJlciBvZiBsaW5lcyB0byBwbGFjZQogICAgICAgICAgICB0aGUgIm5leHQiIGxpbmsgYW5jaG9ycyBiZWZvcmUgdGhlIG5leHQgY2hhbmdlIChzbyBjbGljayBvZgogICAgICAgICAgICAibmV4dCIgbGluayBqdW1wcyB0byBqdXN0IGJlZm9yZSB0aGUgY2hhbmdlKS4KICAgICAgICAiIiIKCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbGVfdGVtcGxhdGUgJSBkaWN0KAogICAgICAgICAgICBzdHlsZXMgPSBzZWxmLl9zdHlsZXMsCiAgICAgICAgICAgIGxlZ2VuZCA9IHNlbGYuX2xlZ2VuZCwKICAgICAgICAgICAgdGFibGUgPSBzZWxmLm1ha2VfdGFibGUoZnJvbWxpbmVzLHRvbGluZXMsZnJvbWRlc2MsdG9kZXNjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0PWNvbnRleHQsbnVtbGluZXM9bnVtbGluZXMpKQoKICAgIGRlZiBfdGFiX25ld2xpbmVfcmVwbGFjZShzZWxmLGZyb21saW5lcyx0b2xpbmVzKToKICAgICAgICAiIiJSZXR1cm5zIGZyb20vdG8gbGluZSBsaXN0cyB3aXRoIHRhYnMgZXhwYW5kZWQgYW5kIG5ld2xpbmVzIHJlbW92ZWQuCgogICAgICAgIEluc3RlYWQgb2YgdGFiIGNoYXJhY3RlcnMgYmVpbmcgcmVwbGFjZWQgYnkgdGhlIG51bWJlciBvZiBzcGFjZXMKICAgICAgICBuZWVkZWQgdG8gZmlsbCBpbiB0byB0aGUgbmV4dCB0YWIgc3RvcCwgdGhpcyBmdW5jdGlvbiB3aWxsIGZpbGwKICAgICAgICB0aGUgc3BhY2Ugd2l0aCB0YWIgY2hhcmFjdGVycy4gIFRoaXMgaXMgZG9uZSBzbyB0aGF0IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgYWxnb3JpdGhtcyBjYW4gaWRlbnRpZnkgY2hhbmdlcyBpbiBhIGZpbGUgd2hlbiB0YWJzIGFyZSByZXBsYWNlZCBieQogICAgICAgIHNwYWNlcyBhbmQgdmljZSB2ZXJzYS4gIEF0IHRoZSBlbmQgb2YgdGhlIEhUTUwgZ2VuZXJhdGlvbiwgdGhlIHRhYgogICAgICAgIGNoYXJhY3RlcnMgd2lsbCBiZSByZXBsYWNlZCB3aXRoIGEgbm9uYnJlYWthYmxlIHNwYWNlLgogICAgICAgICIiIgogICAgICAgIGRlZiBleHBhbmRfdGFicyhsaW5lKToKICAgICAgICAgICAgIyBoaWRlIHJlYWwgc3BhY2VzCiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnJlcGxhY2UoJyAnLCdcMCcpCiAgICAgICAgICAgICMgZXhwYW5kIHRhYnMgaW50byBzcGFjZXMKICAgICAgICAgICAgbGluZSA9IGxpbmUuZXhwYW5kdGFicyhzZWxmLl90YWJzaXplKQogICAgICAgICAgICAjIHJlcGxhY2Ugc3BhY2VzIGZyb20gZXhwYW5kZWQgdGFicyBiYWNrIGludG8gdGFiIGNoYXJhY3RlcnMKICAgICAgICAgICAgIyAod2UnbGwgcmVwbGFjZSB0aGVtIHdpdGggbWFya3VwIGFmdGVyIHdlIGRvIGRpZmZlcmVuY2luZykKICAgICAgICAgICAgbGluZSA9IGxpbmUucmVwbGFjZSgnICcsJ1x0JykKICAgICAgICAgICAgcmV0dXJuIGxpbmUucmVwbGFjZSgnXDAnLCcgJykucnN0cmlwKCdcbicpCiAgICAgICAgZnJvbWxpbmVzID0gW2V4cGFuZF90YWJzKGxpbmUpIGZvciBsaW5lIGluIGZyb21saW5lc10KICAgICAgICB0b2xpbmVzID0gW2V4cGFuZF90YWJzKGxpbmUpIGZvciBsaW5lIGluIHRvbGluZXNdCiAgICAgICAgcmV0dXJuIGZyb21saW5lcyx0b2xpbmVzCgogICAgZGVmIF9zcGxpdF9saW5lKHNlbGYsZGF0YV9saXN0LGxpbmVfbnVtLHRleHQpOgogICAgICAgICIiIkJ1aWxkcyBsaXN0IG9mIHRleHQgbGluZXMgYnkgc3BsaXR0aW5nIHRleHQgbGluZXMgYXQgd3JhcCBwb2ludAoKICAgICAgICBUaGlzIGZ1bmN0aW9uIHdpbGwgZGV0ZXJtaW5lIGlmIHRoZSBpbnB1dCB0ZXh0IGxpbmUgbmVlZHMgdG8gYmUKICAgICAgICB3cmFwcGVkIChzcGxpdCkgaW50byBzZXBhcmF0ZSBsaW5lcy4gIElmIHNvLCB0aGUgZmlyc3Qgd3JhcCBwb2ludAogICAgICAgIHdpbGwgYmUgZGV0ZXJtaW5lZCBhbmQgdGhlIGZpcnN0IGxpbmUgYXBwZW5kZWQgdG8gdGhlIG91dHB1dAogICAgICAgIHRleHQgbGluZSBsaXN0LiAgVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHJlY3Vyc2l2ZWx5IHRvIGhhbmRsZQogICAgICAgIHRoZSBzZWNvbmQgcGFydCBvZiB0aGUgc3BsaXQgbGluZSB0byBmdXJ0aGVyIHNwbGl0IGl0LgogICAgICAgICIiIgogICAgICAgICMgaWYgYmxhbmsgbGluZSBvciBjb250ZXh0IHNlcGFyYXRvciwganVzdCBhZGQgaXQgdG8gdGhlIG91dHB1dCBsaXN0CiAgICAgICAgaWYgbm90IGxpbmVfbnVtOgogICAgICAgICAgICBkYXRhX2xpc3QuYXBwZW5kKChsaW5lX251bSx0ZXh0KSkKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgaWYgbGluZSB0ZXh0IGRvZXNuJ3QgbmVlZCB3cmFwcGluZywganVzdCBhZGQgaXQgdG8gdGhlIG91dHB1dCBsaXN0CiAgICAgICAgc2l6ZSA9IGxlbih0ZXh0KQogICAgICAgIG1heCA9IHNlbGYuX3dyYXBjb2x1bW4KICAgICAgICBpZiAoc2l6ZSA8PSBtYXgpIG9yICgoc2l6ZSAtKHRleHQuY291bnQoJ1wwJykqMykpIDw9IG1heCk6CiAgICAgICAgICAgIGRhdGFfbGlzdC5hcHBlbmQoKGxpbmVfbnVtLHRleHQpKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgIyBzY2FuIHRleHQgbG9va2luZyBmb3IgdGhlIHdyYXAgcG9pbnQsIGtlZXBpbmcgdHJhY2sgaWYgdGhlIHdyYXAKICAgICAgICAjIHBvaW50IGlzIGluc2lkZSBtYXJrZXJzCiAgICAgICAgaSA9IDAKICAgICAgICBuID0gMAogICAgICAgIG1hcmsgPSAnJwogICAgICAgIHdoaWxlIG4gPCBtYXggYW5kIGkgPCBzaXplOgogICAgICAgICAgICBpZiB0ZXh0W2ldID09ICdcMCc6CiAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgICAgIG1hcmsgPSB0ZXh0W2ldCiAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgZWxpZiB0ZXh0W2ldID09ICdcMSc6CiAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgICAgIG1hcmsgPSAnJwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaSArPSAxCiAgICAgICAgICAgICAgICBuICs9IDEKCiAgICAgICAgIyB3cmFwIHBvaW50IGlzIGluc2lkZSB0ZXh0LCBicmVhayBpdCB1cCBpbnRvIHNlcGFyYXRlIGxpbmVzCiAgICAgICAgbGluZTEgPSB0ZXh0WzppXQogICAgICAgIGxpbmUyID0gdGV4dFtpOl0KCiAgICAgICAgIyBpZiB3cmFwIHBvaW50IGlzIGluc2lkZSBtYXJrZXJzLCBwbGFjZSBlbmQgbWFya2VyIGF0IGVuZCBvZiBmaXJzdAogICAgICAgICMgbGluZSBhbmQgc3RhcnQgbWFya2VyIGF0IGJlZ2lubmluZyBvZiBzZWNvbmQgbGluZSBiZWNhdXNlIGVhY2gKICAgICAgICAjIGxpbmUgd2lsbCBoYXZlIGl0cyBvd24gdGFibGUgdGFnIG1hcmt1cCBhcm91bmQgaXQuCiAgICAgICAgaWYgbWFyazoKICAgICAgICAgICAgbGluZTEgPSBsaW5lMSArICdcMScKICAgICAgICAgICAgbGluZTIgPSAnXDAnICsgbWFyayArIGxpbmUyCgogICAgICAgICMgdGFjayBvbiBmaXJzdCBsaW5lIG9udG8gdGhlIG91dHB1dCBsaXN0CiAgICAgICAgZGF0YV9saXN0LmFwcGVuZCgobGluZV9udW0sbGluZTEpKQoKICAgICAgICAjIHVzZSB0aGlzIHJvdXRpbmUgYWdhaW4gdG8gd3JhcCB0aGUgcmVtYWluaW5nIHRleHQKICAgICAgICBzZWxmLl9zcGxpdF9saW5lKGRhdGFfbGlzdCwnPicsbGluZTIpCgogICAgZGVmIF9saW5lX3dyYXBwZXIoc2VsZixkaWZmcyk6CiAgICAgICAgIiIiUmV0dXJucyBpdGVyYXRvciB0aGF0IHNwbGl0cyAod3JhcHMpIG1kaWZmIHRleHQgbGluZXMiIiIKCiAgICAgICAgIyBwdWxsIGZyb20vdG8gZGF0YSBhbmQgZmxhZ3MgZnJvbSBtZGlmZiBpdGVyYXRvcgogICAgICAgIGZvciBmcm9tZGF0YSx0b2RhdGEsZmxhZyBpbiBkaWZmczoKICAgICAgICAgICAgIyBjaGVjayBmb3IgY29udGV4dCBzZXBhcmF0b3JzIGFuZCBwYXNzIHRoZW0gdGhyb3VnaAogICAgICAgICAgICBpZiBmbGFnIGlzIE5vbmU6CiAgICAgICAgICAgICAgICB5aWVsZCBmcm9tZGF0YSx0b2RhdGEsZmxhZwogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgKGZyb21saW5lLGZyb210ZXh0KSwodG9saW5lLHRvdGV4dCkgPSBmcm9tZGF0YSx0b2RhdGEKICAgICAgICAgICAgIyBmb3IgZWFjaCBmcm9tL3RvIGxpbmUgc3BsaXQgaXQgYXQgdGhlIHdyYXAgY29sdW1uIHRvIGZvcm0KICAgICAgICAgICAgIyBsaXN0IG9mIHRleHQgbGluZXMuCiAgICAgICAgICAgIGZyb21saXN0LHRvbGlzdCA9IFtdLFtdCiAgICAgICAgICAgIHNlbGYuX3NwbGl0X2xpbmUoZnJvbWxpc3QsZnJvbWxpbmUsZnJvbXRleHQpCiAgICAgICAgICAgIHNlbGYuX3NwbGl0X2xpbmUodG9saXN0LHRvbGluZSx0b3RleHQpCiAgICAgICAgICAgICMgeWllbGQgZnJvbS90byBsaW5lIGluIHBhaXJzIGluc2VydGluZyBibGFuayBsaW5lcyBhcwogICAgICAgICAgICAjIG5lY2Vzc2FyeSB3aGVuIG9uZSBzaWRlIGhhcyBtb3JlIHdyYXBwZWQgbGluZXMKICAgICAgICAgICAgd2hpbGUgZnJvbWxpc3Qgb3IgdG9saXN0OgogICAgICAgICAgICAgICAgaWYgZnJvbWxpc3Q6CiAgICAgICAgICAgICAgICAgICAgZnJvbWRhdGEgPSBmcm9tbGlzdC5wb3AoMCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZnJvbWRhdGEgPSAoJycsJyAnKQogICAgICAgICAgICAgICAgaWYgdG9saXN0OgogICAgICAgICAgICAgICAgICAgIHRvZGF0YSA9IHRvbGlzdC5wb3AoMCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdG9kYXRhID0gKCcnLCcgJykKICAgICAgICAgICAgICAgIHlpZWxkIGZyb21kYXRhLHRvZGF0YSxmbGFnCgogICAgZGVmIF9jb2xsZWN0X2xpbmVzKHNlbGYsZGlmZnMpOgogICAgICAgICIiIkNvbGxlY3RzIG1kaWZmIG91dHB1dCBpbnRvIHNlcGFyYXRlIGxpc3RzCgogICAgICAgIEJlZm9yZSBzdG9yaW5nIHRoZSBtZGlmZiBmcm9tL3RvIGRhdGEgaW50byBhIGxpc3QsIGl0IGlzIGNvbnZlcnRlZAogICAgICAgIGludG8gYSBzaW5nbGUgbGluZSBvZiB0ZXh0IHdpdGggSFRNTCBtYXJrdXAuCiAgICAgICAgIiIiCgogICAgICAgIGZyb21saXN0LHRvbGlzdCxmbGFnbGlzdCA9IFtdLFtdLFtdCiAgICAgICAgIyBwdWxsIGZyb20vdG8gZGF0YSBhbmQgZmxhZ3MgZnJvbSBtZGlmZiBzdHlsZSBpdGVyYXRvcgogICAgICAgIGZvciBmcm9tZGF0YSx0b2RhdGEsZmxhZyBpbiBkaWZmczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgIyBzdG9yZSBIVE1MIG1hcmt1cCBvZiB0aGUgbGluZXMgaW50byB0aGUgbGlzdHMKICAgICAgICAgICAgICAgIGZyb21saXN0LmFwcGVuZChzZWxmLl9mb3JtYXRfbGluZSgwLGZsYWcsKmZyb21kYXRhKSkKICAgICAgICAgICAgICAgIHRvbGlzdC5hcHBlbmQoc2VsZi5fZm9ybWF0X2xpbmUoMSxmbGFnLCp0b2RhdGEpKQogICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAgICAgIyBleGNlcHRpb25zIG9jY3VyIGZvciBsaW5lcyB3aGVyZSBjb250ZXh0IHNlcGFyYXRvcnMgZ28KICAgICAgICAgICAgICAgIGZyb21saXN0LmFwcGVuZChOb25lKQogICAgICAgICAgICAgICAgdG9saXN0LmFwcGVuZChOb25lKQogICAgICAgICAgICBmbGFnbGlzdC5hcHBlbmQoZmxhZykKICAgICAgICByZXR1cm4gZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0CgogICAgZGVmIF9mb3JtYXRfbGluZShzZWxmLHNpZGUsZmxhZyxsaW5lbnVtLHRleHQpOgogICAgICAgICIiIlJldHVybnMgSFRNTCBtYXJrdXAgb2YgImZyb20iIC8gInRvIiB0ZXh0IGxpbmVzCgogICAgICAgIHNpZGUgLS0gMCBvciAxIGluZGljYXRpbmcgImZyb20iIG9yICJ0byIgdGV4dAogICAgICAgIGZsYWcgLS0gaW5kaWNhdGVzIGlmIGRpZmZlcmVuY2Ugb24gbGluZQogICAgICAgIGxpbmVudW0gLS0gbGluZSBudW1iZXIgKHVzZWQgZm9yIGxpbmUgbnVtYmVyIGNvbHVtbikKICAgICAgICB0ZXh0IC0tIGxpbmUgdGV4dCB0byBiZSBtYXJrZWQgdXAKICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGxpbmVudW0gPSAnJWQnICUgbGluZW51bQogICAgICAgICAgICBpZCA9ICcgaWQ9IiVzJXMiJyAlIChzZWxmLl9wcmVmaXhbc2lkZV0sbGluZW51bSkKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAjIGhhbmRsZSBibGFuayBsaW5lcyB3aGVyZSBsaW5lbnVtIGlzICc+JyBvciAnJwogICAgICAgICAgICBpZCA9ICcnCiAgICAgICAgIyByZXBsYWNlIHRob3NlIHRoaW5ncyB0aGF0IHdvdWxkIGdldCBjb25mdXNlZCB3aXRoIEhUTUwgc3ltYm9scwogICAgICAgIHRleHQ9dGV4dC5yZXBsYWNlKCImIiwiJmFtcDsiKS5yZXBsYWNlKCI+IiwiJmd0OyIpLnJlcGxhY2UoIjwiLCImbHQ7IikKCiAgICAgICAgIyBtYWtlIHNwYWNlIG5vbi1icmVha2FibGUgc28gdGhleSBkb24ndCBnZXQgY29tcHJlc3NlZCBvciBsaW5lIHdyYXBwZWQKICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCcgJywnJm5ic3A7JykucnN0cmlwKCkKCiAgICAgICAgcmV0dXJuICc8dGQgY2xhc3M9ImRpZmZfaGVhZGVyIiVzPiVzPC90ZD48dGQgbm93cmFwPSJub3dyYXAiPiVzPC90ZD4nIFwKICAgICAgICAgICAgICAgJSAoaWQsbGluZW51bSx0ZXh0KQoKICAgIGRlZiBfbWFrZV9wcmVmaXgoc2VsZik6CiAgICAgICAgIiIiQ3JlYXRlIHVuaXF1ZSBhbmNob3IgcHJlZml4ZXMiIiIKCiAgICAgICAgIyBHZW5lcmF0ZSBhIHVuaXF1ZSBhbmNob3IgcHJlZml4IHNvIG11bHRpcGxlIHRhYmxlcwogICAgICAgICMgY2FuIGV4aXN0IG9uIHRoZSBzYW1lIEhUTUwgcGFnZSB3aXRob3V0IGNvbmZsaWN0cy4KICAgICAgICBmcm9tcHJlZml4ID0gImZyb20lZF8iICUgSHRtbERpZmYuX2RlZmF1bHRfcHJlZml4CiAgICAgICAgdG9wcmVmaXggPSAidG8lZF8iICUgSHRtbERpZmYuX2RlZmF1bHRfcHJlZml4CiAgICAgICAgSHRtbERpZmYuX2RlZmF1bHRfcHJlZml4ICs9IDEKICAgICAgICAjIHN0b3JlIHByZWZpeGVzIHNvIGxpbmUgZm9ybWF0IG1ldGhvZCBoYXMgYWNjZXNzCiAgICAgICAgc2VsZi5fcHJlZml4ID0gW2Zyb21wcmVmaXgsdG9wcmVmaXhdCgogICAgZGVmIF9jb252ZXJ0X2ZsYWdzKHNlbGYsZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0LGNvbnRleHQsbnVtbGluZXMpOgogICAgICAgICIiIk1ha2VzIGxpc3Qgb2YgIm5leHQiIGxpbmtzIiIiCgogICAgICAgICMgYWxsIGFuY2hvciBuYW1lcyB3aWxsIGJlIGdlbmVyYXRlZCB1c2luZyB0aGUgdW5pcXVlICJ0byIgcHJlZml4CiAgICAgICAgdG9wcmVmaXggPSBzZWxmLl9wcmVmaXhbMV0KCiAgICAgICAgIyBwcm9jZXNzIGNoYW5nZSBmbGFncywgZ2VuZXJhdGluZyBtaWRkbGUgY29sdW1uIG9mIG5leHQgYW5jaG9ycy9saW5rcwogICAgICAgIG5leHRfaWQgPSBbJyddKmxlbihmbGFnbGlzdCkKICAgICAgICBuZXh0X2hyZWYgPSBbJyddKmxlbihmbGFnbGlzdCkKICAgICAgICBudW1fY2hnLCBpbl9jaGFuZ2UgPSAwLCBGYWxzZQogICAgICAgIGxhc3QgPSAwCiAgICAgICAgZm9yIGksZmxhZyBpbiBlbnVtZXJhdGUoZmxhZ2xpc3QpOgogICAgICAgICAgICBpZiBmbGFnOgogICAgICAgICAgICAgICAgaWYgbm90IGluX2NoYW5nZToKICAgICAgICAgICAgICAgICAgICBpbl9jaGFuZ2UgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgbGFzdCA9IGkKICAgICAgICAgICAgICAgICAgICAjIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBjaGFuZ2UsIGRyb3AgYW4gYW5jaG9yIGEgZmV3IGxpbmVzCiAgICAgICAgICAgICAgICAgICAgIyAodGhlIGNvbnRleHQgbGluZXMpIGJlZm9yZSB0aGUgY2hhbmdlIGZvciB0aGUgcHJldmlvdXMKICAgICAgICAgICAgICAgICAgICAjIGxpbmsKICAgICAgICAgICAgICAgICAgICBpID0gbWF4KFswLGktbnVtbGluZXNdKQogICAgICAgICAgICAgICAgICAgIG5leHRfaWRbaV0gPSAnIGlkPSJkaWZmbGliX2NoZ18lc18lZCInICUgKHRvcHJlZml4LG51bV9jaGcpCiAgICAgICAgICAgICAgICAgICAgIyBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgY2hhbmdlLCBkcm9wIGEgbGluayB0byB0aGUgbmV4dAogICAgICAgICAgICAgICAgICAgICMgY2hhbmdlCiAgICAgICAgICAgICAgICAgICAgbnVtX2NoZyArPSAxCiAgICAgICAgICAgICAgICAgICAgbmV4dF9ocmVmW2xhc3RdID0gJzxhIGhyZWY9IiNkaWZmbGliX2NoZ18lc18lZCI+bjwvYT4nICUgKAogICAgICAgICAgICAgICAgICAgICAgICAgdG9wcmVmaXgsbnVtX2NoZykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGluX2NoYW5nZSA9IEZhbHNlCiAgICAgICAgIyBjaGVjayBmb3IgY2FzZXMgd2hlcmUgdGhlcmUgaXMgbm8gY29udGVudCB0byBhdm9pZCBleGNlcHRpb25zCiAgICAgICAgaWYgbm90IGZsYWdsaXN0OgogICAgICAgICAgICBmbGFnbGlzdCA9IFtGYWxzZV0KICAgICAgICAgICAgbmV4dF9pZCA9IFsnJ10KICAgICAgICAgICAgbmV4dF9ocmVmID0gWycnXQogICAgICAgICAgICBsYXN0ID0gMAogICAgICAgICAgICBpZiBjb250ZXh0OgogICAgICAgICAgICAgICAgZnJvbWxpc3QgPSBbJzx0ZD48L3RkPjx0ZD4mbmJzcDtObyBEaWZmZXJlbmNlcyBGb3VuZCZuYnNwOzwvdGQ+J10KICAgICAgICAgICAgICAgIHRvbGlzdCA9IGZyb21saXN0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBmcm9tbGlzdCA9IHRvbGlzdCA9IFsnPHRkPjwvdGQ+PHRkPiZuYnNwO0VtcHR5IEZpbGUmbmJzcDs8L3RkPiddCiAgICAgICAgIyBpZiBub3QgYSBjaGFuZ2Ugb24gZmlyc3QgbGluZSwgZHJvcCBhIGxpbmsKICAgICAgICBpZiBub3QgZmxhZ2xpc3RbMF06CiAgICAgICAgICAgIG5leHRfaHJlZlswXSA9ICc8YSBocmVmPSIjZGlmZmxpYl9jaGdfJXNfMCI+ZjwvYT4nICUgdG9wcmVmaXgKICAgICAgICAjIHJlZG8gdGhlIGxhc3QgbGluayB0byBsaW5rIHRvIHRoZSB0b3AKICAgICAgICBuZXh0X2hyZWZbbGFzdF0gPSAnPGEgaHJlZj0iI2RpZmZsaWJfY2hnXyVzX3RvcCI+dDwvYT4nICUgKHRvcHJlZml4KQoKICAgICAgICByZXR1cm4gZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0LG5leHRfaHJlZixuZXh0X2lkCgogICAgZGVmIG1ha2VfdGFibGUoc2VsZixmcm9tbGluZXMsdG9saW5lcyxmcm9tZGVzYz0nJyx0b2Rlc2M9JycsY29udGV4dD1GYWxzZSwKICAgICAgICAgICAgICAgICAgIG51bWxpbmVzPTUpOgogICAgICAgICIiIlJldHVybnMgSFRNTCB0YWJsZSBvZiBzaWRlIGJ5IHNpZGUgY29tcGFyaXNvbiB3aXRoIGNoYW5nZSBoaWdobGlnaHRzCgogICAgICAgIEFyZ3VtZW50czoKICAgICAgICBmcm9tbGluZXMgLS0gbGlzdCBvZiAiZnJvbSIgbGluZXMKICAgICAgICB0b2xpbmVzIC0tIGxpc3Qgb2YgInRvIiBsaW5lcwogICAgICAgIGZyb21kZXNjIC0tICJmcm9tIiBmaWxlIGNvbHVtbiBoZWFkZXIgc3RyaW5nCiAgICAgICAgdG9kZXNjIC0tICJ0byIgZmlsZSBjb2x1bW4gaGVhZGVyIHN0cmluZwogICAgICAgIGNvbnRleHQgLS0gc2V0IHRvIFRydWUgZm9yIGNvbnRleHR1YWwgZGlmZmVyZW5jZXMgKGRlZmF1bHRzIHRvIEZhbHNlCiAgICAgICAgICAgIHdoaWNoIHNob3dzIGZ1bGwgZGlmZmVyZW5jZXMpLgogICAgICAgIG51bWxpbmVzIC0tIG51bWJlciBvZiBjb250ZXh0IGxpbmVzLiAgV2hlbiBjb250ZXh0IGlzIHNldCBUcnVlLAogICAgICAgICAgICBjb250cm9scyBudW1iZXIgb2YgbGluZXMgZGlzcGxheWVkIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIGNoYW5nZS4KICAgICAgICAgICAgV2hlbiBjb250ZXh0IGlzIEZhbHNlLCBjb250cm9scyB0aGUgbnVtYmVyIG9mIGxpbmVzIHRvIHBsYWNlCiAgICAgICAgICAgIHRoZSAibmV4dCIgbGluayBhbmNob3JzIGJlZm9yZSB0aGUgbmV4dCBjaGFuZ2UgKHNvIGNsaWNrIG9mCiAgICAgICAgICAgICJuZXh0IiBsaW5rIGp1bXBzIHRvIGp1c3QgYmVmb3JlIHRoZSBjaGFuZ2UpLgogICAgICAgICIiIgoKICAgICAgICAjIG1ha2UgdW5pcXVlIGFuY2hvciBwcmVmaXhlcyBzbyB0aGF0IG11bHRpcGxlIHRhYmxlcyBtYXkgZXhpc3QKICAgICAgICAjIG9uIHRoZSBzYW1lIHBhZ2Ugd2l0aG91dCBjb25mbGljdC4KICAgICAgICBzZWxmLl9tYWtlX3ByZWZpeCgpCgogICAgICAgICMgY2hhbmdlIHRhYnMgdG8gc3BhY2VzIGJlZm9yZSBpdCBnZXRzIG1vcmUgZGlmZmljdWx0IGFmdGVyIHdlIGluc2VydAogICAgICAgICMgbWFya2t1cAogICAgICAgIGZyb21saW5lcyx0b2xpbmVzID0gc2VsZi5fdGFiX25ld2xpbmVfcmVwbGFjZShmcm9tbGluZXMsdG9saW5lcykKCiAgICAgICAgIyBjcmVhdGUgZGlmZnMgaXRlcmF0b3Igd2hpY2ggZ2VuZXJhdGVzIHNpZGUgYnkgc2lkZSBmcm9tL3RvIGRhdGEKICAgICAgICBpZiBjb250ZXh0OgogICAgICAgICAgICBjb250ZXh0X2xpbmVzID0gbnVtbGluZXMKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb250ZXh0X2xpbmVzID0gTm9uZQogICAgICAgIGRpZmZzID0gX21kaWZmKGZyb21saW5lcyx0b2xpbmVzLGNvbnRleHRfbGluZXMsbGluZWp1bms9c2VsZi5fbGluZWp1bmssCiAgICAgICAgICAgICAgICAgICAgICBjaGFyanVuaz1zZWxmLl9jaGFyanVuaykKCiAgICAgICAgIyBzZXQgdXAgaXRlcmF0b3IgdG8gd3JhcCBsaW5lcyB0aGF0IGV4Y2VlZCBkZXNpcmVkIHdpZHRoCiAgICAgICAgaWYgc2VsZi5fd3JhcGNvbHVtbjoKICAgICAgICAgICAgZGlmZnMgPSBzZWxmLl9saW5lX3dyYXBwZXIoZGlmZnMpCgogICAgICAgICMgY29sbGVjdCB1cCBmcm9tL3RvIGxpbmVzIGFuZCBmbGFncyBpbnRvIGxpc3RzIChhbHNvIGZvcm1hdCB0aGUgbGluZXMpCiAgICAgICAgZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0ID0gc2VsZi5fY29sbGVjdF9saW5lcyhkaWZmcykKCiAgICAgICAgIyBwcm9jZXNzIGNoYW5nZSBmbGFncywgZ2VuZXJhdGluZyBtaWRkbGUgY29sdW1uIG9mIG5leHQgYW5jaG9ycy9saW5rcwogICAgICAgIGZyb21saXN0LHRvbGlzdCxmbGFnbGlzdCxuZXh0X2hyZWYsbmV4dF9pZCA9IHNlbGYuX2NvbnZlcnRfZmxhZ3MoCiAgICAgICAgICAgIGZyb21saXN0LHRvbGlzdCxmbGFnbGlzdCxjb250ZXh0LG51bWxpbmVzKQoKICAgICAgICBzID0gW10KICAgICAgICBmbXQgPSAnICAgICAgICAgICAgPHRyPjx0ZCBjbGFzcz0iZGlmZl9uZXh0IiVzPiVzPC90ZD4lcycgKyBcCiAgICAgICAgICAgICAgJzx0ZCBjbGFzcz0iZGlmZl9uZXh0Ij4lczwvdGQ+JXM8L3RyPlxuJwogICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihmbGFnbGlzdCkpOgogICAgICAgICAgICBpZiBmbGFnbGlzdFtpXSBpcyBOb25lOgogICAgICAgICAgICAgICAgIyBtZGlmZiB5aWVsZHMgTm9uZSBvbiBzZXBhcmF0b3IgbGluZXMgc2tpcCB0aGUgYm9ndXMgb25lcwogICAgICAgICAgICAgICAgIyBnZW5lcmF0ZWQgZm9yIHRoZSBmaXJzdCBsaW5lCiAgICAgICAgICAgICAgICBpZiBpID4gMDoKICAgICAgICAgICAgICAgICAgICBzLmFwcGVuZCgnICAgICAgICA8L3Rib2R5PiAgICAgICAgXG4gICAgICAgIDx0Ym9keT5cbicpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzLmFwcGVuZCggZm10ICUgKG5leHRfaWRbaV0sbmV4dF9ocmVmW2ldLGZyb21saXN0W2ldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dF9ocmVmW2ldLHRvbGlzdFtpXSkpCiAgICAgICAgaWYgZnJvbWRlc2Mgb3IgdG9kZXNjOgogICAgICAgICAgICBoZWFkZXJfcm93ID0gJzx0aGVhZD48dHI+JXMlcyVzJXM8L3RyPjwvdGhlYWQ+JyAlICgKICAgICAgICAgICAgICAgICc8dGggY2xhc3M9ImRpZmZfbmV4dCI+PGJyIC8+PC90aD4nLAogICAgICAgICAgICAgICAgJzx0aCBjb2xzcGFuPSIyIiBjbGFzcz0iZGlmZl9oZWFkZXIiPiVzPC90aD4nICUgZnJvbWRlc2MsCiAgICAgICAgICAgICAgICAnPHRoIGNsYXNzPSJkaWZmX25leHQiPjxiciAvPjwvdGg+JywKICAgICAgICAgICAgICAgICc8dGggY29sc3Bhbj0iMiIgY2xhc3M9ImRpZmZfaGVhZGVyIj4lczwvdGg+JyAlIHRvZGVzYykKICAgICAgICBlbHNlOgogICAgICAgICAgICBoZWFkZXJfcm93ID0gJycKCiAgICAgICAgdGFibGUgPSBzZWxmLl90YWJsZV90ZW1wbGF0ZSAlIGRpY3QoCiAgICAgICAgICAgIGRhdGFfcm93cz0nJy5qb2luKHMpLAogICAgICAgICAgICBoZWFkZXJfcm93PWhlYWRlcl9yb3csCiAgICAgICAgICAgIHByZWZpeD1zZWxmLl9wcmVmaXhbMV0pCgogICAgICAgIHJldHVybiB0YWJsZS5yZXBsYWNlKCdcMCsnLCc8c3BhbiBjbGFzcz0iZGlmZl9hZGQiPicpLiBcCiAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2UoJ1wwLScsJzxzcGFuIGNsYXNzPSJkaWZmX3N1YiI+JykuIFwKICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZSgnXDBeJywnPHNwYW4gY2xhc3M9ImRpZmZfY2hnIj4nKS4gXAogICAgICAgICAgICAgICAgICAgICByZXBsYWNlKCdcMScsJzwvc3Bhbj4nKS4gXAogICAgICAgICAgICAgICAgICAgICByZXBsYWNlKCdcdCcsJyZuYnNwOycpCgpkZWwgcmUKCmRlZiByZXN0b3JlKGRlbHRhLCB3aGljaCk6CiAgICByIiIiCiAgICBHZW5lcmF0ZSBvbmUgb2YgdGhlIHR3byBzZXF1ZW5jZXMgdGhhdCBnZW5lcmF0ZWQgYSBkZWx0YS4KCiAgICBHaXZlbiBhIGBkZWx0YWAgcHJvZHVjZWQgYnkgYERpZmZlci5jb21wYXJlKClgIG9yIGBuZGlmZigpYCwgZXh0cmFjdAogICAgbGluZXMgb3JpZ2luYXRpbmcgZnJvbSBmaWxlIDEgb3IgMiAocGFyYW1ldGVyIGB3aGljaGApLCBzdHJpcHBpbmcgb2ZmIGxpbmUKICAgIHByZWZpeGVzLgoKICAgIEV4YW1wbGVzOgoKICAgID4+PiBkaWZmID0gbmRpZmYoJ29uZVxudHdvXG50aHJlZVxuJy5zcGxpdGxpbmVzKGtlZXBlbmRzPVRydWUpLAogICAgLi4uICAgICAgICAgICAgICAnb3JlXG50cmVlXG5lbXVcbicuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKSkKICAgID4+PiBkaWZmID0gbGlzdChkaWZmKQogICAgPj4+IHByaW50KCcnLmpvaW4ocmVzdG9yZShkaWZmLCAxKSksIGVuZD0iIikKICAgIG9uZQogICAgdHdvCiAgICB0aHJlZQogICAgPj4+IHByaW50KCcnLmpvaW4ocmVzdG9yZShkaWZmLCAyKSksIGVuZD0iIikKICAgIG9yZQogICAgdHJlZQogICAgZW11CiAgICAiIiIKICAgIHRyeToKICAgICAgICB0YWcgPSB7MTogIi0gIiwgMjogIisgIn1baW50KHdoaWNoKV0KICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCd1bmtub3duIGRlbHRhIGNob2ljZSAobXVzdCBiZSAxIG9yIDIpOiAlcicKICAgICAgICAgICAgICAgICAgICAgICAgICAgJSB3aGljaCkKICAgIHByZWZpeGVzID0gKCIgICIsIHRhZykKICAgIGZvciBsaW5lIGluIGRlbHRhOgogICAgICAgIGlmIGxpbmVbOjJdIGluIHByZWZpeGVzOgogICAgICAgICAgICB5aWVsZCBsaW5lWzI6XQoKZGVmIF90ZXN0KCk6CiAgICBpbXBvcnQgZG9jdGVzdCwgZGlmZmxpYgogICAgcmV0dXJuIGRvY3Rlc3QudGVzdG1vZChkaWZmbGliKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIF90ZXN0KCkK',
'/Lib/string.py':'IyBTb21lIHN0cmluZ3MgZm9yIGN0eXBlLXN0eWxlIGNoYXJhY3RlciBjbGFzc2lmaWNhdGlvbgp3aGl0ZXNwYWNlID0gJyBcdFxuXHJcdlxmJwphc2NpaV9sb3dlcmNhc2UgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonCmFzY2lpX3VwcGVyY2FzZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicKYXNjaWlfbGV0dGVycyA9IGFzY2lpX2xvd2VyY2FzZSArIGFzY2lpX3VwcGVyY2FzZQpkaWdpdHMgPSAnMDEyMzQ1Njc4OScKaGV4ZGlnaXRzID0gZGlnaXRzICsgJ2FiY2RlZicgKyAnQUJDREVGJwpvY3RkaWdpdHMgPSAnMDEyMzQ1NjcnCnB1bmN0dWF0aW9uID0gIiIiISIjJCUmJygpKissLS4vOjs8PT4/QFtcXV5fYHt8fX4iIiIKcHJpbnRhYmxlID0gZGlnaXRzICsgYXNjaWlfbGV0dGVycyArIHB1bmN0dWF0aW9uICsgd2hpdGVzcGFjZQoKIyBGdW5jdGlvbnMgd2hpY2ggYXJlbid0IGF2YWlsYWJsZSBhcyBzdHJpbmcgbWV0aG9kcy4KCiMgQ2FwaXRhbGl6ZSB0aGUgd29yZHMgaW4gYSBzdHJpbmcsIGUuZy4gIiBhQmMgIGRFZiAiIC0+ICJBYmMgRGVmIi4KZGVmIGNhcHdvcmRzKHMsIHNlcD1Ob25lKToKICAgICIiImNhcHdvcmRzKHMgWyxzZXBdKSAtPiBzdHJpbmcKCiAgICBTcGxpdCB0aGUgYXJndW1lbnQgaW50byB3b3JkcyB1c2luZyBzcGxpdCwgY2FwaXRhbGl6ZSBlYWNoCiAgICB3b3JkIHVzaW5nIGNhcGl0YWxpemUsIGFuZCBqb2luIHRoZSBjYXBpdGFsaXplZCB3b3JkcyB1c2luZwogICAgam9pbi4gIElmIHRoZSBvcHRpb25hbCBzZWNvbmQgYXJndW1lbnQgc2VwIGlzIGFic2VudCBvciBOb25lLAogICAgcnVucyBvZiB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgYXJlIHJlcGxhY2VkIGJ5IGEgc2luZ2xlIHNwYWNlCiAgICBhbmQgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBhcmUgcmVtb3ZlZCwgb3RoZXJ3aXNlCiAgICBzZXAgaXMgdXNlZCB0byBzcGxpdCBhbmQgam9pbiB0aGUgd29yZHMuCgogICAgIiIiCiAgICByZXR1cm4gKHNlcCBvciAnICcpLmpvaW4oeC5jYXBpdGFsaXplKCkgZm9yIHggaW4gcy5zcGxpdChzZXApKQo=',
'/Lib/genericpath.py':'IiIiDQpQYXRoIG9wZXJhdGlvbnMgY29tbW9uIHRvIG1vcmUgdGhhbiBvbmUgT1MNCkRvIG5vdCB1c2UgZGlyZWN0bHkuICBUaGUgT1Mgc3BlY2lmaWMgbW9kdWxlcyBpbXBvcnQgdGhlIGFwcHJvcHJpYXRlDQpmdW5jdGlvbnMgZnJvbSB0aGlzIG1vZHVsZSB0aGVtc2VsdmVzLg0KIiIiDQppbXBvcnQgb3MNCmltcG9ydCBzdGF0DQoNCl9fYWxsX18gPSBbJ2NvbW1vbnByZWZpeCcsICdleGlzdHMnLCAnZ2V0YXRpbWUnLCAnZ2V0Y3RpbWUnLCAnZ2V0bXRpbWUnLA0KICAgICAgICAgICAnZ2V0c2l6ZScsICdpc2RpcicsICdpc2ZpbGUnXQ0KDQoNCiMgRG9lcyBhIHBhdGggZXhpc3Q/DQojIFRoaXMgaXMgZmFsc2UgZm9yIGRhbmdsaW5nIHN5bWJvbGljIGxpbmtzIG9uIHN5c3RlbXMgdGhhdCBzdXBwb3J0IHRoZW0uDQpkZWYgZXhpc3RzKHBhdGgpOg0KICAgICIiIlRlc3Qgd2hldGhlciBhIHBhdGggZXhpc3RzLiAgUmV0dXJucyBGYWxzZSBmb3IgYnJva2VuIHN5bWJvbGljIGxpbmtzIiIiDQogICAgdHJ5Og0KICAgICAgICBvcy5zdGF0KHBhdGgpDQogICAgZXhjZXB0IG9zLmVycm9yOg0KICAgICAgICByZXR1cm4gRmFsc2UNCiAgICByZXR1cm4gVHJ1ZQ0KDQoNCiMgVGhpcyBmb2xsb3dzIHN5bWJvbGljIGxpbmtzLCBzbyBib3RoIGlzbGluaygpIGFuZCBpc2RpcigpIGNhbiBiZSB0cnVlDQojIGZvciB0aGUgc2FtZSBwYXRoIG9ubyBzeXN0ZW1zIHRoYXQgc3VwcG9ydCBzeW1saW5rcw0KZGVmIGlzZmlsZShwYXRoKToNCiAgICAiIiJUZXN0IHdoZXRoZXIgYSBwYXRoIGlzIGEgcmVndWxhciBmaWxlIiIiDQogICAgdHJ5Og0KICAgICAgICBzdCA9IG9zLnN0YXQocGF0aCkNCiAgICBleGNlcHQgb3MuZXJyb3I6DQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIHJldHVybiBzdGF0LlNfSVNSRUcoc3Quc3RfbW9kZSkNCg0KDQojIElzIGEgcGF0aCBhIGRpcmVjdG9yeT8NCiMgVGhpcyBmb2xsb3dzIHN5bWJvbGljIGxpbmtzLCBzbyBib3RoIGlzbGluaygpIGFuZCBpc2RpcigpDQojIGNhbiBiZSB0cnVlIGZvciB0aGUgc2FtZSBwYXRoIG9uIHN5c3RlbXMgdGhhdCBzdXBwb3J0IHN5bWxpbmtzDQpkZWYgaXNkaXIocyk6DQogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIHBhdGhuYW1lIHJlZmVycyB0byBhbiBleGlzdGluZyBkaXJlY3RvcnkuIiIiDQogICAgdHJ5Og0KICAgICAgICBzdCA9IG9zLnN0YXQocykNCiAgICBleGNlcHQgb3MuZXJyb3I6DQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIHJldHVybiBzdGF0LlNfSVNESVIoc3Quc3RfbW9kZSkNCg0KDQpkZWYgZ2V0c2l6ZShmaWxlbmFtZSk6DQogICAgIiIiUmV0dXJuIHRoZSBzaXplIG9mIGEgZmlsZSwgcmVwb3J0ZWQgYnkgb3Muc3RhdCgpLiIiIg0KICAgIHJldHVybiBvcy5zdGF0KGZpbGVuYW1lKS5zdF9zaXplDQoNCg0KZGVmIGdldG10aW1lKGZpbGVuYW1lKToNCiAgICAiIiJSZXR1cm4gdGhlIGxhc3QgbW9kaWZpY2F0aW9uIHRpbWUgb2YgYSBmaWxlLCByZXBvcnRlZCBieSBvcy5zdGF0KCkuIiIiDQogICAgcmV0dXJuIG9zLnN0YXQoZmlsZW5hbWUpLnN0X210aW1lDQoNCg0KZGVmIGdldGF0aW1lKGZpbGVuYW1lKToNCiAgICAiIiJSZXR1cm4gdGhlIGxhc3QgYWNjZXNzIHRpbWUgb2YgYSBmaWxlLCByZXBvcnRlZCBieSBvcy5zdGF0KCkuIiIiDQogICAgcmV0dXJuIG9zLnN0YXQoZmlsZW5hbWUpLnN0X2F0aW1lDQoNCg0KZGVmIGdldGN0aW1lKGZpbGVuYW1lKToNCiAgICAiIiJSZXR1cm4gdGhlIG1ldGFkYXRhIGNoYW5nZSB0aW1lIG9mIGEgZmlsZSwgcmVwb3J0ZWQgYnkgb3Muc3RhdCgpLiIiIg0KICAgIHJldHVybiBvcy5zdGF0KGZpbGVuYW1lKS5zdF9jdGltZQ0KDQoNCiMgUmV0dXJuIHRoZSBsb25nZXN0IHByZWZpeCBvZiBhbGwgbGlzdCBlbGVtZW50cy4NCmRlZiBjb21tb25wcmVmaXgobSk6DQogICAgIkdpdmVuIGEgbGlzdCBvZiBwYXRobmFtZXMsIHJldHVybnMgdGhlIGxvbmdlc3QgY29tbW9uIGxlYWRpbmcgY29tcG9uZW50Ig0KICAgIGlmIG5vdCBtOiByZXR1cm4gJycNCiAgICBzMSA9IG1pbihtKQ0KICAgIHMyID0gbWF4KG0pDQogICAgZm9yIGksIGMgaW4gZW51bWVyYXRlKHMxKToNCiAgICAgICAgaWYgYyAhPSBzMltpXToNCiAgICAgICAgICAgIHJldHVybiBzMVs6aV0NCiAgICByZXR1cm4gczENCg0KIyBTcGxpdCBhIHBhdGggaW4gcm9vdCBhbmQgZXh0ZW5zaW9uLg0KIyBUaGUgZXh0ZW5zaW9uIGlzIGV2ZXJ5dGhpbmcgc3RhcnRpbmcgYXQgdGhlIGxhc3QgZG90IGluIHRoZSBsYXN0DQojIHBhdGhuYW1lIGNvbXBvbmVudDsgdGhlIHJvb3QgaXMgZXZlcnl0aGluZyBiZWZvcmUgdGhhdC4NCiMgSXQgaXMgYWx3YXlzIHRydWUgdGhhdCByb290ICsgZXh0ID09IHAuDQoNCiMgR2VuZXJpYyBpbXBsZW1lbnRhdGlvbiBvZiBzcGxpdGV4dCwgdG8gYmUgcGFyYW1ldHJpemVkIHdpdGgNCiMgdGhlIHNlcGFyYXRvcnMNCmRlZiBfc3BsaXRleHQocCwgc2VwLCBhbHRzZXAsIGV4dHNlcCk6DQogICAgIiIiU3BsaXQgdGhlIGV4dGVuc2lvbiBmcm9tIGEgcGF0aG5hbWUuDQoNCiAgICBFeHRlbnNpb24gaXMgZXZlcnl0aGluZyBmcm9tIHRoZSBsYXN0IGRvdCB0byB0aGUgZW5kLCBpZ25vcmluZw0KICAgIGxlYWRpbmcgZG90cy4gIFJldHVybnMgIihyb290LCBleHQpIjsgZXh0IG1heSBiZSBlbXB0eS4iIiINCiAgICAjIE5PVEU6IFRoaXMgY29kZSBtdXN0IHdvcmsgZm9yIHRleHQgYW5kIGJ5dGVzIHN0cmluZ3MuDQoNCiAgICBzZXBJbmRleCA9IHAucmZpbmQoc2VwKQ0KICAgIGlmIGFsdHNlcDoNCiAgICAgICAgYWx0c2VwSW5kZXggPSBwLnJmaW5kKGFsdHNlcCkNCiAgICAgICAgc2VwSW5kZXggPSBtYXgoc2VwSW5kZXgsIGFsdHNlcEluZGV4KQ0KDQogICAgZG90SW5kZXggPSBwLnJmaW5kKGV4dHNlcCkNCiAgICBpZiBkb3RJbmRleCA+IHNlcEluZGV4Og0KICAgICAgICAjIHNraXAgYWxsIGxlYWRpbmcgZG90cw0KICAgICAgICBmaWxlbmFtZUluZGV4ID0gc2VwSW5kZXggKyAxDQogICAgICAgIHdoaWxlIGZpbGVuYW1lSW5kZXggPCBkb3RJbmRleDoNCiAgICAgICAgICAgIGlmIHBbZmlsZW5hbWVJbmRleDpmaWxlbmFtZUluZGV4KzFdICE9IGV4dHNlcDoNCiAgICAgICAgICAgICAgICByZXR1cm4gcFs6ZG90SW5kZXhdLCBwW2RvdEluZGV4Ol0NCiAgICAgICAgICAgIGZpbGVuYW1lSW5kZXggKz0gMQ0KDQogICAgcmV0dXJuIHAsIHBbOjBdDQo=',
'/Lib/webbrowser.py':'X19hbGxfXyA9IFsiRXJyb3IiLCAib3BlbiIsICJvcGVuX25ldyIsICJvcGVuX25ld190YWIiXQoKY2xhc3MgRXJyb3IoRXhjZXB0aW9uKToKICAgIHBhc3MKCl90YXJnZXQgPSB7IDA6ICcnLCAxOiAnX2JsYW5rJywgMjogJ19uZXcnIH0gICMgaGFjay4uLgoKCmRlZiBvcGVuKHVybCwgbmV3PTAsIGF1dG9yYWlzZT1UcnVlKToKICAgICIiIiAKICAgIG5ldyB3aW5kb3cgb3IgdGFiIGlzIG5vdCBjb250cm9sbGFibGUKICAgIG9uIHRoZSBjbGllbnQgc2lkZS4gYXV0b3JhaXNlIG5vdCBhdmFpbGFibGUuCiAgICAiIiIKICAgIGlmIHdpbi5vcGVuKHVybCwgX3RhcmdldFtuZXddKToKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQoKZGVmIG9wZW5fbmV3KHVybCk6CiAgICByZXR1cm4gb3Blbih1cmwsIDEpCgpkZWYgb3Blbl9uZXdfdGFiKHVybCk6CiAgICByZXR1cm4gb3Blbih1cmwsIDIpCgoK',
'/Lib/this.py':'cyA9ICIiIkd1ciBNcmEgYnMgQ2xndWJhLCBvbCBHdnogQ3JncmVmCgpPcm5oZ3ZzaHkgdmYgb3JnZ3JlIGd1bmEgaHR5bC4KUmtjeXZwdmcgdmYgb3JnZ3JlIGd1bmEgdnpjeXZwdmcuCkZ2emN5ciB2ZiBvcmdncmUgZ3VuYSBwYnpjeXJrLgpQYnpjeXJrIHZmIG9yZ2dyZSBndW5hIHBiemN5dnBuZ3JxLgpTeW5nIHZmIG9yZ2dyZSBndW5hIGFyZmdycS4KRmNuZWZyIHZmIG9yZ2dyZSBndW5hIHFyYWZyLgpFcm5xbm92eXZnbCBwYmhhZ2YuCkZjcnB2bnkgcG5mcmYgbmVyYSdnIGZjcnB2bnkgcmFiaHR1IGdiIG9lcm54IGd1ciBlaHlyZi4KTnlndWJodHUgY2VucGd2cG55dmdsIG9ybmdmIGNoZXZnbC4KUmVlYmVmIGZ1Ymh5cSBhcmlyZSBjbmZmIGZ2eXJhZ3lsLgpIYXlyZmYgcmtjeXZwdmd5bCBmdnlyYXBycS4KVmEgZ3VyIHNucHIgYnMgbnpvdnRodmdsLCBlcnNoZnIgZ3VyIGdyemNnbmd2YmEgZ2IgdGhyZmYuCkd1cmVyIGZ1Ymh5cSBvciBiYXItLSBuYXEgY2Vyc3Jlbm95bCBiYXlsIGJhciAtLWJvaXZiaGYgam5sIGdiIHFiIHZnLgpOeWd1Ymh0dSBndW5nIGpubCB6bmwgYWJnIG9yIGJvaXZiaGYgbmcgc3ZlZmcgaGF5cmZmIGxiaCdlciBRaGdwdS4KQWJqIHZmIG9yZ2dyZSBndW5hIGFyaXJlLgpOeWd1Ymh0dSBhcmlyZSB2ZiBic2dyYSBvcmdncmUgZ3VuYSAqZXZ0dWcqIGFiai4KVnMgZ3VyIHZ6Y3lyenJhZ25ndmJhIHZmIHVuZXEgZ2IgcmtjeW52YSwgdmcnZiBuIG9ucSB2cXJuLgpWcyBndXIgdnpjeXJ6cmFnbmd2YmEgdmYgcm5mbCBnYiBya2N5bnZhLCB2ZyB6bmwgb3IgbiB0YmJxIHZxcm4uCkFuenJmY25wcmYgbmVyIGJhciB1YmF4dmF0IHRlcm5nIHZxcm4gLS0geXJnJ2YgcWIgemJlciBicyBndWJmciEiIiIKCmQgPSB7fQpmb3IgYyBpbiAoNjUsIDk3KToKICAgIGZvciBpIGluIHJhbmdlKDI2KToKICAgICAgICBkW2NocihpK2MpXSA9IGNocigoaSsxMykgJSAyNiArIGMpCgpwcmludCgiIi5qb2luKFtkLmdldChjLCBjKSBmb3IgYyBpbiBzXSkpCg==',
'/Lib/datetime.py':'IiIiQ29uY3JldGUgZGF0ZS90aW1lIGFuZCByZWxhdGVkIHR5cGVzIC0tIHByb3RvdHlwZSBpbXBsZW1lbnRlZCBpbiBQeXRob24uCgpTZWUgaHR0cDovL3d3dy56b3BlLm9yZy9NZW1iZXJzL2ZkcmFrZS9EYXRlVGltZVdpa2kvRnJvbnRQYWdlCgpTZWUgYWxzbyBodHRwOi8vZGlyLnlhaG9vLmNvbS9SZWZlcmVuY2UvY2FsZW5kYXJzLwoKRm9yIGEgcHJpbWVyIG9uIERTVCwgaW5jbHVkaW5nIG1hbnkgY3VycmVudCBEU1QgcnVsZXMsIHNlZQpodHRwOi8vd2ViZXhoaWJpdHMub3JnL2RheWxpZ2h0c2F2aW5nLwoKRm9yIG1vcmUgYWJvdXQgRFNUIHRoYW4geW91IGV2ZXIgd2FudGVkIHRvIGtub3csIHNlZQpmdHA6Ly9lbHNpZS5uY2kubmloLmdvdi9wdWIvCgpTb3VyY2VzIGZvciB0aW1lIHpvbmUgYW5kIERTVCBkYXRhOiBodHRwOi8vd3d3LnR3aW5zdW4uY29tL3R6L3R6LWxpbmsuaHRtCgpUaGlzIHdhcyBvcmlnaW5hbGx5IGNvcGllZCBmcm9tIHRoZSBzYW5kYm94IG9mIHRoZSBDUHl0aG9uIENWUyByZXBvc2l0b3J5LgpUaGFua3MgdG8gVGltIFBldGVycyBmb3Igc3VnZ2VzdGluZyB1c2luZyBpdC4KIiIiCgppbXBvcnQgdGltZSBhcyBfdGltZQppbXBvcnQgbWF0aCBhcyBfbWF0aAoKZGVmIF9zdGF0ZV9jbXAoeCwgeSk6CiAgICByZXR1cm4gMCBpZiB4ID09IHkgZWxzZSAxIGlmIHggPiB5IGVsc2UgLTEKCmRlZiBfdHVwbGVfY21wKHgsIHkpOgogICAgcmV0dXJuIDAgaWYgeCA9PSB5IGVsc2UgMSBpZiB4ID4geSBlbHNlIC0xCgpNSU5ZRUFSID0gMQpNQVhZRUFSID0gOTk5OQpfTUFYT1JESU5BTCA9IDM2NTIwNTkgIyBkYXRlLm1heC50b29yZGluYWwoKQoKIyBVdGlsaXR5IGZ1bmN0aW9ucywgYWRhcHRlZCBmcm9tIFB5dGhvbidzIERlbW8vY2xhc3Nlcy9EYXRlcy5weSwgd2hpY2gKIyBhbHNvIGFzc3VtZXMgdGhlIGN1cnJlbnQgR3JlZ29yaWFuIGNhbGVuZGFyIGluZGVmaW5pdGVseSBleHRlbmRlZCBpbgojIGJvdGggZGlyZWN0aW9ucy4gIERpZmZlcmVuY2U6ICBEYXRlcy5weSBjYWxscyBKYW51YXJ5IDEgb2YgeWVhciAwIGRheQojIG51bWJlciAxLiAgVGhlIGNvZGUgaGVyZSBjYWxscyBKYW51YXJ5IDEgb2YgeWVhciAxIGRheSBudW1iZXIgMS4gIFRoaXMgaXMKIyB0byBtYXRjaCB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgInByb2xlcHRpYyBHcmVnb3JpYW4iIGNhbGVuZGFyIGluIERlcnNob3dpdHoKIyBhbmQgUmVpbmdvbGQncyAiQ2FsZW5kcmljYWwgQ2FsY3VsYXRpb25zIiwgd2hlcmUgaXQncyB0aGUgYmFzZSBjYWxlbmRhcgojIGZvciBhbGwgY29tcHV0YXRpb25zLiAgU2VlIHRoZSBib29rIGZvciBhbGdvcml0aG1zIGZvciBjb252ZXJ0aW5nIGJldHdlZW4KIyBwcm9sZXB0aWMgR3JlZ29yaWFuIG9yZGluYWxzIGFuZCBtYW55IG90aGVyIGNhbGVuZGFyIHN5c3RlbXMuCgpfREFZU19JTl9NT05USCA9IFtOb25lLCAzMSwgMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXQoKX0RBWVNfQkVGT1JFX01PTlRIID0gW05vbmVdCmRibSA9IDAKZm9yIGRpbSBpbiBfREFZU19JTl9NT05USFsxOl06CiAgICBfREFZU19CRUZPUkVfTU9OVEguYXBwZW5kKGRibSkKICAgIGRibSArPSBkaW0KI2RlbCBkYm0sIGRpbQoKZGVmIF9pc19sZWFwKHllYXIpOgogICAgInllYXIgLT4gMSBpZiBsZWFwIHllYXIsIGVsc2UgMC4iCiAgICByZXR1cm4geWVhciAlIDQgPT0gMCBhbmQgKHllYXIgJSAxMDAgIT0gMCBvciB5ZWFyICUgNDAwID09IDApCgpkZWYgX2RheXNfYmVmb3JlX3llYXIoeWVhcik6CiAgICAieWVhciAtPiBudW1iZXIgb2YgZGF5cyBiZWZvcmUgSmFudWFyeSAxc3Qgb2YgeWVhci4iCiAgICB5ID0geWVhciAtIDEKICAgIHJldHVybiB5KjM2NSArIHkvLzQgLSB5Ly8xMDAgKyB5Ly80MDAKCmRlZiBfZGF5c19pbl9tb250aCh5ZWFyLCBtb250aCk6CiAgICAieWVhciwgbW9udGggLT4gbnVtYmVyIG9mIGRheXMgaW4gdGhhdCBtb250aCBpbiB0aGF0IHllYXIuIgogICAgYXNzZXJ0IDEgPD0gbW9udGggPD0gMTIsIG1vbnRoCiAgICBpZiBtb250aCA9PSAyIGFuZCBfaXNfbGVhcCh5ZWFyKToKICAgICAgICByZXR1cm4gMjkKICAgIHJldHVybiBfREFZU19JTl9NT05USFttb250aF0KCmRlZiBfZGF5c19iZWZvcmVfbW9udGgoeWVhciwgbW9udGgpOgogICAgInllYXIsIG1vbnRoIC0+IG51bWJlciBvZiBkYXlzIGluIHllYXIgcHJlY2VlZGluZyBmaXJzdCBkYXkgb2YgbW9udGguIgogICAgYXNzZXJ0IDEgPD0gbW9udGggPD0gMTIsICdtb250aCBtdXN0IGJlIGluIDEuLjEyJwogICAgcmV0dXJuIF9EQVlTX0JFRk9SRV9NT05USFttb250aF0gKyAobW9udGggPiAyIGFuZCBfaXNfbGVhcCh5ZWFyKSkKCmRlZiBfeW1kMm9yZCh5ZWFyLCBtb250aCwgZGF5KToKICAgICJ5ZWFyLCBtb250aCwgZGF5IC0+IG9yZGluYWwsIGNvbnNpZGVyaW5nIDAxLUphbi0wMDAxIGFzIGRheSAxLiIKICAgIGFzc2VydCAxIDw9IG1vbnRoIDw9IDEyLCAnbW9udGggbXVzdCBiZSBpbiAxLi4xMicKICAgIGRpbSA9IF9kYXlzX2luX21vbnRoKHllYXIsIG1vbnRoKQogICAgYXNzZXJ0IDEgPD0gZGF5IDw9IGRpbSwgKCdkYXkgbXVzdCBiZSBpbiAxLi4lZCcgJSBkaW0pCiAgICByZXR1cm4gKF9kYXlzX2JlZm9yZV95ZWFyKHllYXIpICsKICAgICAgICAgICAgX2RheXNfYmVmb3JlX21vbnRoKHllYXIsIG1vbnRoKSArCiAgICAgICAgICAgIGRheSkKCl9ESTQwMFkgPSBfZGF5c19iZWZvcmVfeWVhcig0MDEpICAgICMgbnVtYmVyIG9mIGRheXMgaW4gNDAwIHllYXJzCl9ESTEwMFkgPSBfZGF5c19iZWZvcmVfeWVhcigxMDEpICAgICMgICAgIiAgICAiICAgIiAgICIgMTAwICAgIgpfREk0WSAgID0gX2RheXNfYmVmb3JlX3llYXIoNSkgICAgICAjICAgICIgICAgIiAgICIgICAiICAgNCAgICIKCiMgQSA0LXllYXIgY3ljbGUgaGFzIGFuIGV4dHJhIGxlYXAgZGF5IG92ZXIgd2hhdCB3ZSdkIGdldCBmcm9tIHBhc3RpbmcKIyB0b2dldGhlciA0IHNpbmdsZSB5ZWFycy4KYXNzZXJ0IF9ESTRZID09IDQgKiAzNjUgKyAxCgojIFNpbWlsYXJseSwgYSA0MDAteWVhciBjeWNsZSBoYXMgYW4gZXh0cmEgbGVhcCBkYXkgb3ZlciB3aGF0IHdlJ2QgZ2V0IGZyb20KIyBwYXN0aW5nIHRvZ2V0aGVyIDQgMTAwLXllYXIgY3ljbGVzLgphc3NlcnQgX0RJNDAwWSA9PSA0ICogX0RJMTAwWSArIDEKCiMgT1RPSCwgYSAxMDAteWVhciBjeWNsZSBoYXMgb25lIGZld2VyIGxlYXAgZGF5IHRoYW4gd2UnZCBnZXQgZnJvbQojIHBhc3RpbmcgdG9nZXRoZXIgMjUgNC15ZWFyIGN5Y2xlcy4KYXNzZXJ0IF9ESTEwMFkgPT0gMjUgKiBfREk0WSAtIDEKCmRlZiBfb3JkMnltZChuKToKICAgICJvcmRpbmFsIC0+ICh5ZWFyLCBtb250aCwgZGF5KSwgY29uc2lkZXJpbmcgMDEtSmFuLTAwMDEgYXMgZGF5IDEuIgoKICAgICMgbiBpcyBhIDEtYmFzZWQgaW5kZXgsIHN0YXJ0aW5nIGF0IDEtSmFuLTEuICBUaGUgcGF0dGVybiBvZiBsZWFwIHllYXJzCiAgICAjIHJlcGVhdHMgZXhhY3RseSBldmVyeSA0MDAgeWVhcnMuICBUaGUgYmFzaWMgc3RyYXRlZ3kgaXMgdG8gZmluZCB0aGUKICAgICMgY2xvc2VzdCA0MDAteWVhciBib3VuZGFyeSBhdCBvciBiZWZvcmUgbiwgdGhlbiB3b3JrIHdpdGggdGhlIG9mZnNldAogICAgIyBmcm9tIHRoYXQgYm91bmRhcnkgdG8gbi4gIExpZmUgaXMgbXVjaCBjbGVhcmVyIGlmIHdlIHN1YnRyYWN0IDEgZnJvbQogICAgIyBuIGZpcnN0IC0tIHRoZW4gdGhlIHZhbHVlcyBvZiBuIGF0IDQwMC15ZWFyIGJvdW5kYXJpZXMgYXJlIGV4YWN0bHkKICAgICMgdGhvc2UgZGl2aXNpYmxlIGJ5IF9ESTQwMFk6CiAgICAjCiAgICAjICAgICBEICBNICAgWSAgICAgICAgICAgIG4gICAgICAgICAgICAgIG4tMQogICAgIyAgICAgLS0gLS0tIC0tLS0gICAgICAgIC0tLS0tLS0tLS0gICAgIC0tLS0tLS0tLS0tLS0tLS0KICAgICMgICAgIDMxIERlYyAtNDAwICAgICAgICAtX0RJNDAwWSAgICAgICAtX0RJNDAwWSAtMQogICAgIyAgICAgIDEgSmFuIC0zOTkgICAgICAgICAtX0RJNDAwWSArMSAgIC1fREk0MDBZICAgICAgNDAwLXllYXIgYm91bmRhcnkKICAgICMgICAgIC4uLgogICAgIyAgICAgMzAgRGVjICAwMDAgICAgICAgIC0xICAgICAgICAgICAgIC0yCiAgICAjICAgICAzMSBEZWMgIDAwMCAgICAgICAgIDAgICAgICAgICAgICAgLTEKICAgICMgICAgICAxIEphbiAgMDAxICAgICAgICAgMSAgICAgICAgICAgICAgMCAgICAgICAgICAgIDQwMC15ZWFyIGJvdW5kYXJ5CiAgICAjICAgICAgMiBKYW4gIDAwMSAgICAgICAgIDIgICAgICAgICAgICAgIDEKICAgICMgICAgICAzIEphbiAgMDAxICAgICAgICAgMyAgICAgICAgICAgICAgMgogICAgIyAgICAgLi4uCiAgICAjICAgICAzMSBEZWMgIDQwMCAgICAgICAgIF9ESTQwMFkgICAgICAgIF9ESTQwMFkgLTEKICAgICMgICAgICAxIEphbiAgNDAxICAgICAgICAgX0RJNDAwWSArMSAgICAgX0RJNDAwWSAgICAgIDQwMC15ZWFyIGJvdW5kYXJ5CiAgICBuIC09IDEKICAgIG40MDAsIG4gPSBkaXZtb2QobiwgX0RJNDAwWSkKICAgIHllYXIgPSBuNDAwICogNDAwICsgMSAgICMgLi4uLCAtMzk5LCAxLCA0MDEsIC4uLgoKICAgICMgTm93IG4gaXMgdGhlIChub24tbmVnYXRpdmUpIG9mZnNldCwgaW4gZGF5cywgZnJvbSBKYW51YXJ5IDEgb2YgeWVhciwgdG8KICAgICMgdGhlIGRlc2lyZWQgZGF0ZS4gIE5vdyBjb21wdXRlIGhvdyBtYW55IDEwMC15ZWFyIGN5Y2xlcyBwcmVjZWRlIG4uCiAgICAjIE5vdGUgdGhhdCBpdCdzIHBvc3NpYmxlIGZvciBuMTAwIHRvIGVxdWFsIDQhICBJbiB0aGF0IGNhc2UgNCBmdWxsCiAgICAjIDEwMC15ZWFyIGN5Y2xlcyBwcmVjZWRlIHRoZSBkZXNpcmVkIGRheSwgd2hpY2ggaW1wbGllcyB0aGUgZGVzaXJlZAogICAgIyBkYXkgaXMgRGVjZW1iZXIgMzEgYXQgdGhlIGVuZCBvZiBhIDQwMC15ZWFyIGN5Y2xlLgogICAgbjEwMCwgbiA9IGRpdm1vZChuLCBfREkxMDBZKQoKICAgICMgTm93IGNvbXB1dGUgaG93IG1hbnkgNC15ZWFyIGN5Y2xlcyBwcmVjZWRlIGl0LgogICAgbjQsIG4gPSBkaXZtb2QobiwgX0RJNFkpCgogICAgIyBBbmQgbm93IGhvdyBtYW55IHNpbmdsZSB5ZWFycy4gIEFnYWluIG4xIGNhbiBiZSA0LCBhbmQgYWdhaW4gbWVhbmluZwogICAgIyB0aGF0IHRoZSBkZXNpcmVkIGRheSBpcyBEZWNlbWJlciAzMSBhdCB0aGUgZW5kIG9mIHRoZSA0LXllYXIgY3ljbGUuCiAgICBuMSwgbiA9IGRpdm1vZChuLCAzNjUpCgogICAgeWVhciArPSBuMTAwICogMTAwICsgbjQgKiA0ICsgbjEKICAgIGlmIG4xID09IDQgb3IgbjEwMCA9PSA0OgogICAgICAgIGFzc2VydCBuID09IDAKICAgICAgICByZXR1cm4geWVhci0xLCAxMiwgMzEKCiAgICAjIE5vdyB0aGUgeWVhciBpcyBjb3JyZWN0LCBhbmQgbiBpcyB0aGUgb2Zmc2V0IGZyb20gSmFudWFyeSAxLiAgV2UgZmluZAogICAgIyB0aGUgbW9udGggdmlhIGFuIGVzdGltYXRlIHRoYXQncyBlaXRoZXIgZXhhY3Qgb3Igb25lIHRvbyBsYXJnZS4KICAgIGxlYXB5ZWFyID0gbjEgPT0gMyBhbmQgKG40ICE9IDI0IG9yIG4xMDAgPT0gMykKICAgIGFzc2VydCBsZWFweWVhciA9PSBfaXNfbGVhcCh5ZWFyKQogICAgbW9udGggPSAobiArIDUwKSA+PiA1CiAgICBwcmVjZWRpbmcgPSBfREFZU19CRUZPUkVfTU9OVEhbbW9udGhdICsgKG1vbnRoID4gMiBhbmQgbGVhcHllYXIpCiAgICBpZiBwcmVjZWRpbmcgPiBuOiAgIyBlc3RpbWF0ZSBpcyB0b28gbGFyZ2UKICAgICAgICBtb250aCAtPSAxCiAgICAgICAgcHJlY2VkaW5nIC09IF9EQVlTX0lOX01PTlRIW21vbnRoXSArIChtb250aCA9PSAyIGFuZCBsZWFweWVhcikKICAgIG4gLT0gcHJlY2VkaW5nCiAgICBhc3NlcnQgMCA8PSBuIDwgX2RheXNfaW5fbW9udGgoeWVhciwgbW9udGgpCgogICAgIyBOb3cgdGhlIHllYXIgYW5kIG1vbnRoIGFyZSBjb3JyZWN0LCBhbmQgbiBpcyB0aGUgb2Zmc2V0IGZyb20gdGhlCiAgICAjIHN0YXJ0IG9mIHRoYXQgbW9udGg6ICB3ZSdyZSBkb25lIQogICAgcmV0dXJuIHllYXIsIG1vbnRoLCBuKzEKCiMgTW9udGggYW5kIGRheSBuYW1lcy4gIEZvciBsb2NhbGl6ZWQgdmVyc2lvbnMsIHNlZSB0aGUgY2FsZW5kYXIgbW9kdWxlLgpfTU9OVEhOQU1FUyA9IFtOb25lLCAiSmFuIiwgIkZlYiIsICJNYXIiLCAiQXByIiwgIk1heSIsICJKdW4iLAogICAgICAgICAgICAgICAgICAgICAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiXQpfREFZTkFNRVMgPSBbTm9uZSwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0IiwgIlN1biJdCgoKZGVmIF9idWlsZF9zdHJ1Y3RfdGltZSh5LCBtLCBkLCBoaCwgbW0sIHNzLCBkc3RmbGFnKToKICAgIHdkYXkgPSAoX3ltZDJvcmQoeSwgbSwgZCkgKyA2KSAlIDcKICAgIGRudW0gPSBfZGF5c19iZWZvcmVfbW9udGgoeSwgbSkgKyBkCiAgICByZXR1cm4gX3RpbWUuc3RydWN0X3RpbWUoKHksIG0sIGQsIGhoLCBtbSwgc3MsIHdkYXksIGRudW0sIGRzdGZsYWcpKQoKZGVmIF9mb3JtYXRfdGltZShoaCwgbW0sIHNzLCB1cyk6CiAgICAjIFNraXAgdHJhaWxpbmcgbWljcm9zZWNvbmRzIHdoZW4gdXM9PTAuCiAgICByZXN1bHQgPSAiJTAyZDolMDJkOiUwMmQiICUgKGhoLCBtbSwgc3MpCiAgICBpZiB1czoKICAgICAgICByZXN1bHQgKz0gIi4lMDZkIiAlIHVzCiAgICByZXR1cm4gcmVzdWx0CgojIENvcnJlY3RseSBzdWJzdGl0dXRlIGZvciAleiBhbmQgJVogZXNjYXBlcyBpbiBzdHJmdGltZSBmb3JtYXRzLgpkZWYgX3dyYXBfc3RyZnRpbWUob2JqZWN0LCBmb3JtYXQsIHRpbWV0dXBsZSk6CiAgICB5ZWFyID0gdGltZXR1cGxlWzBdCiAgICBpZiB5ZWFyIDwgMTAwMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ5ZWFyPSVkIGlzIGJlZm9yZSAxMDAwOyB0aGUgZGF0ZXRpbWUgc3RyZnRpbWUoKSAiCiAgICAgICAgICAgICAgICAgICAgICAgICAibWV0aG9kcyByZXF1aXJlIHllYXIgPj0gMTAwMCIgJSB5ZWFyKQogICAgIyBEb24ndCBjYWxsIHV0Y29mZnNldCgpIG9yIHR6bmFtZSgpIHVubGVzcyBhY3R1YWxseSBuZWVkZWQuCiAgICBmcmVwbGFjZSA9IE5vbmUgIyB0aGUgc3RyaW5nIHRvIHVzZSBmb3IgJWYKICAgIHpyZXBsYWNlID0gTm9uZSAjIHRoZSBzdHJpbmcgdG8gdXNlIGZvciAlegogICAgWnJlcGxhY2UgPSBOb25lICMgdGhlIHN0cmluZyB0byB1c2UgZm9yICVaCgogICAgIyBTY2FuIGZvcm1hdCBmb3IgJXogYW5kICVaIGVzY2FwZXMsIHJlcGxhY2luZyBhcyBuZWVkZWQuCiAgICBuZXdmb3JtYXQgPSBbXQogICAgcHVzaCA9IG5ld2Zvcm1hdC5hcHBlbmQKICAgIGksIG4gPSAwLCBsZW4oZm9ybWF0KQogICAgd2hpbGUgaSA8IG46CiAgICAgICAgY2ggPSBmb3JtYXRbaV0KICAgICAgICBpICs9IDEKICAgICAgICBpZiBjaCA9PSAnJSc6CiAgICAgICAgICAgIGlmIGkgPCBuOgogICAgICAgICAgICAgICAgY2ggPSBmb3JtYXRbaV0KICAgICAgICAgICAgICAgIGkgKz0gMQogICAgICAgICAgICAgICAgaWYgY2ggPT0gJ2YnOgogICAgICAgICAgICAgICAgICAgIGlmIGZyZXBsYWNlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGZyZXBsYWNlID0gJyUwNmQnICUgZ2V0YXR0cihvYmplY3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWljcm9zZWNvbmQnLCAwKQogICAgICAgICAgICAgICAgICAgIG5ld2Zvcm1hdC5hcHBlbmQoZnJlcGxhY2UpCiAgICAgICAgICAgICAgICBlbGlmIGNoID09ICd6JzoKICAgICAgICAgICAgICAgICAgICBpZiB6cmVwbGFjZSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICB6cmVwbGFjZSA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAidXRjb2Zmc2V0Iik6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBvYmplY3QudXRjb2Zmc2V0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9mZnNldCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gJysnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgb2Zmc2V0LmRheXMgPCAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAtb2Zmc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ24gPSAnLScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLCBtID0gZGl2bW9kKG9mZnNldCwgdGltZWRlbHRhKGhvdXJzPTEpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBub3QgbSAlIHRpbWVkZWx0YShtaW51dGVzPTEpLCAid2hvbGUgbWludXRlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gLy89IHRpbWVkZWx0YShtaW51dGVzPTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgenJlcGxhY2UgPSAnJWMlMDJkJTAyZCcgJSAoc2lnbiwgaCwgbSkKICAgICAgICAgICAgICAgICAgICBhc3NlcnQgJyUnIG5vdCBpbiB6cmVwbGFjZQogICAgICAgICAgICAgICAgICAgIG5ld2Zvcm1hdC5hcHBlbmQoenJlcGxhY2UpCiAgICAgICAgICAgICAgICBlbGlmIGNoID09ICdaJzoKICAgICAgICAgICAgICAgICAgICBpZiBacmVwbGFjZSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBacmVwbGFjZSA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAidHpuYW1lIik6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gb2JqZWN0LnR6bmFtZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgc3RyZnRpbWUgaXMgZ29pbmcgdG8gaGF2ZSBhdCB0aGlzOiBlc2NhcGUgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFpyZXBsYWNlID0gcy5yZXBsYWNlKCclJywgJyUlJykKICAgICAgICAgICAgICAgICAgICBuZXdmb3JtYXQuYXBwZW5kKFpyZXBsYWNlKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwdXNoKCclJykKICAgICAgICAgICAgICAgICAgICBwdXNoKGNoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHVzaCgnJScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHVzaChjaCkKICAgIG5ld2Zvcm1hdCA9ICIiLmpvaW4obmV3Zm9ybWF0KQogICAgcmV0dXJuIF90aW1lLnN0cmZ0aW1lKG5ld2Zvcm1hdCwgdGltZXR1cGxlKQoKZGVmIF9jYWxsX3R6aW5mb19tZXRob2QodHppbmZvLCBtZXRobmFtZSwgdHppbmZvYXJnKToKICAgIGlmIHR6aW5mbyBpcyBOb25lOgogICAgICAgIHJldHVybiBOb25lCiAgICByZXR1cm4gZ2V0YXR0cih0emluZm8sIG1ldGhuYW1lKSh0emluZm9hcmcpCgojIEp1c3QgcmFpc2UgVHlwZUVycm9yIGlmIHRoZSBhcmcgaXNuJ3QgTm9uZSBvciBhIHN0cmluZy4KZGVmIF9jaGVja190em5hbWUobmFtZSk6CiAgICBpZiBuYW1lIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShuYW1lLCBzdHIpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigidHppbmZvLnR6bmFtZSgpIG11c3QgcmV0dXJuIE5vbmUgb3Igc3RyaW5nLCAiCiAgICAgICAgICAgICAgICAgICAgICAgICJub3QgJyVzJyIgJSB0eXBlKG5hbWUpKQoKIyBuYW1lIGlzIHRoZSBvZmZzZXQtcHJvZHVjaW5nIG1ldGhvZCwgInV0Y29mZnNldCIgb3IgImRzdCIuCiMgb2Zmc2V0IGlzIHdoYXQgaXQgcmV0dXJuZWQuCiMgSWYgb2Zmc2V0IGlzbid0IE5vbmUgb3IgdGltZWRlbHRhLCByYWlzZXMgVHlwZUVycm9yLgojIElmIG9mZnNldCBpcyBOb25lLCByZXR1cm5zIE5vbmUuCiMgRWxzZSBvZmZzZXQgaXMgY2hlY2tlZCBmb3IgYmVpbmcgaW4gcmFuZ2UsIGFuZCBhIHdob2xlICMgb2YgbWludXRlcy4KIyBJZiBpdCBpcywgaXRzIGludGVnZXIgdmFsdWUgaXMgcmV0dXJuZWQuICBFbHNlIFZhbHVlRXJyb3IgaXMgcmFpc2VkLgpkZWYgX2NoZWNrX3V0Y19vZmZzZXQobmFtZSwgb2Zmc2V0KToKICAgIGFzc2VydCBuYW1lIGluICgidXRjb2Zmc2V0IiwgImRzdCIpCiAgICBpZiBvZmZzZXQgaXMgTm9uZToKICAgICAgICByZXR1cm4KICAgIGlmIG5vdCBpc2luc3RhbmNlKG9mZnNldCwgdGltZWRlbHRhKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoInR6aW5mby4lcygpIG11c3QgcmV0dXJuIE5vbmUgIgogICAgICAgICAgICAgICAgICAgICAgICAib3IgdGltZWRlbHRhLCBub3QgJyVzJyIgJSAobmFtZSwgdHlwZShvZmZzZXQpKSkKICAgIGlmIG9mZnNldCAlIHRpbWVkZWx0YShtaW51dGVzPTEpIG9yIG9mZnNldC5taWNyb3NlY29uZHM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidHppbmZvLiVzKCkgbXVzdCByZXR1cm4gYSB3aG9sZSBudW1iZXIgIgogICAgICAgICAgICAgICAgICAgICAgICAgIm9mIG1pbnV0ZXMsIGdvdCAlcyIgJSAobmFtZSwgb2Zmc2V0KSkKICAgIGlmIG5vdCAtdGltZWRlbHRhKDEpIDwgb2Zmc2V0IDwgdGltZWRlbHRhKDEpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIiVzKCk9JXMsIG11c3QgYmUgbXVzdCBiZSBzdHJpY3RseSBiZXR3ZWVuIgogICAgICAgICAgICAgICAgICAgICAgICAgIiAtdGltZWRlbHRhKGhvdXJzPTI0KSBhbmQgdGltZWRlbHRhKGhvdXJzPTI0KSIKICAgICAgICAgICAgICAgICAgICAgICAgICUgKG5hbWUsIG9mZnNldCkpCgpkZWYgX2NoZWNrX2RhdGVfZmllbGRzKHllYXIsIG1vbnRoLCBkYXkpOgogICAgaWYgbm90IGlzaW5zdGFuY2UoeWVhciwgaW50KToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ludCBleHBlY3RlZCcpCiAgICBpZiBub3QgTUlOWUVBUiA8PSB5ZWFyIDw9IE1BWFlFQVI6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigneWVhciBtdXN0IGJlIGluICVkLi4lZCcgJSAoTUlOWUVBUiwgTUFYWUVBUiksIHllYXIpCiAgICBpZiBub3QgMSA8PSBtb250aCA8PSAxMjoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdtb250aCBtdXN0IGJlIGluIDEuLjEyJywgbW9udGgpCiAgICBkaW0gPSBfZGF5c19pbl9tb250aCh5ZWFyLCBtb250aCkKICAgIGlmIG5vdCAxIDw9IGRheSA8PSBkaW06CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignZGF5IG11c3QgYmUgaW4gMS4uJWQnICUgZGltLCBkYXkpCgpkZWYgX2NoZWNrX3RpbWVfZmllbGRzKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWNyb3NlY29uZCk6CiAgICBpZiBub3QgaXNpbnN0YW5jZShob3VyLCBpbnQpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcignaW50IGV4cGVjdGVkJykKICAgIGlmIG5vdCAwIDw9IGhvdXIgPD0gMjM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignaG91ciBtdXN0IGJlIGluIDAuLjIzJywgaG91cikKICAgIGlmIG5vdCAwIDw9IG1pbnV0ZSA8PSA1OToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdtaW51dGUgbXVzdCBiZSBpbiAwLi41OScsIG1pbnV0ZSkKICAgIGlmIG5vdCAwIDw9IHNlY29uZCA8PSA1OToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdzZWNvbmQgbXVzdCBiZSBpbiAwLi41OScsIHNlY29uZCkKICAgIGlmIG5vdCAwIDw9IG1pY3Jvc2Vjb25kIDw9IDk5OTk5OToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdtaWNyb3NlY29uZCBtdXN0IGJlIGluIDAuLjk5OTk5OScsIG1pY3Jvc2Vjb25kKQoKZGVmIF9jaGVja190emluZm9fYXJnKHR6KToKICAgIGlmIHR6IGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZSh0eiwgdHppbmZvKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoInR6aW5mbyBhcmd1bWVudCBtdXN0IGJlIE5vbmUgb3Igb2YgYSB0emluZm8gc3ViY2xhc3MiKQoKZGVmIF9jbXBlcnJvcih4LCB5KToKICAgIHJhaXNlIFR5cGVFcnJvcigiY2FuJ3QgY29tcGFyZSAnJXMnIHRvICclcyciICUgKAogICAgICAgICAgICAgICAgICAgIHR5cGUoeCkuX19uYW1lX18sIHR5cGUoeSkuX19uYW1lX18pKQoKY2xhc3MgdGltZWRlbHRhOgogICAgIiIiUmVwcmVzZW50IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdHdvIGRhdGV0aW1lIG9iamVjdHMuCgogICAgU3VwcG9ydGVkIG9wZXJhdG9yczoKCiAgICAtIGFkZCwgc3VidHJhY3QgdGltZWRlbHRhCiAgICAtIHVuYXJ5IHBsdXMsIG1pbnVzLCBhYnMKICAgIC0gY29tcGFyZSB0byB0aW1lZGVsdGEKICAgIC0gbXVsdGlwbHksIGRpdmlkZSBieSBpbnQvbG9uZwoKICAgIEluIGFkZGl0aW9uLCBkYXRldGltZSBzdXBwb3J0cyBzdWJ0cmFjdGlvbiBvZiB0d28gZGF0ZXRpbWUgb2JqZWN0cwogICAgcmV0dXJuaW5nIGEgdGltZWRlbHRhLCBhbmQgYWRkaXRpb24gb3Igc3VidHJhY3Rpb24gb2YgYSBkYXRldGltZQogICAgYW5kIGEgdGltZWRlbHRhIGdpdmluZyBhIGRhdGV0aW1lLgoKICAgIFJlcHJlc2VudGF0aW9uOiAoZGF5cywgc2Vjb25kcywgbWljcm9zZWNvbmRzKS4gIFdoeT8gIEJlY2F1c2UgSQogICAgZmVsdCBsaWtlIGl0LgogICAgIiIiCiAgICBfX3Nsb3RzX18gPSAnX2RheXMnLCAnX3NlY29uZHMnLCAnX21pY3Jvc2Vjb25kcycKCiAgICBkZWYgX19uZXdfXyhjbHMsIGRheXM9MCwgc2Vjb25kcz0wLCBtaWNyb3NlY29uZHM9MCwKICAgICAgICAgICAgICAgIG1pbGxpc2Vjb25kcz0wLCBtaW51dGVzPTAsIGhvdXJzPTAsIHdlZWtzPTApOgogICAgICAgICMgRG9pbmcgdGhpcyBlZmZpY2llbnRseSBhbmQgYWNjdXJhdGVseSBpbiBDIGlzIGdvaW5nIHRvIGJlIGRpZmZpY3VsdAogICAgICAgICMgYW5kIGVycm9yLXByb25lLCBkdWUgdG8gdWJpcXVpdG91cyBvdmVyZmxvdyBwb3NzaWJpbGl0aWVzLCBhbmQgdGhhdAogICAgICAgICMgQyBkb3VibGUgZG9lc24ndCBoYXZlIGVub3VnaCBiaXRzIG9mIHByZWNpc2lvbiB0byByZXByZXNlbnQKICAgICAgICAjIG1pY3Jvc2Vjb25kcyBvdmVyIDEwSyB5ZWFycyBmYWl0aGZ1bGx5LiAgVGhlIGNvZGUgaGVyZSB0cmllcyB0byBtYWtlCiAgICAgICAgIyBleHBsaWNpdCB3aGVyZSBnby1mYXN0IGFzc3VtcHRpb25zIGNhbiBiZSByZWxpZWQgb24sIGluIG9yZGVyIHRvCiAgICAgICAgIyBndWlkZSB0aGUgQyBpbXBsZW1lbnRhdGlvbjsgaXQncyB3YXkgbW9yZSBjb252b2x1dGVkIHRoYW4gc3BlZWQtCiAgICAgICAgIyBpZ25vcmluZyBhdXRvLW92ZXJmbG93LXRvLWxvbmcgaWRpb21hdGljIFB5dGhvbiBjb3VsZCBiZS4KCiAgICAgICAgIyBYWFggQ2hlY2sgdGhhdCBhbGwgaW5wdXRzIGFyZSBpbnRzIG9yIGZsb2F0cy4KCiAgICAgICAgIyBGaW5hbCB2YWx1ZXMsIGFsbCBpbnRlZ2VyLgogICAgICAgICMgcyBhbmQgdXMgZml0IGluIDMyLWJpdCBzaWduZWQgaW50czsgZCBpc24ndCBib3VuZGVkLgogICAgICAgIGQgPSBzID0gdXMgPSAwCgogICAgICAgICMgTm9ybWFsaXplIGV2ZXJ5dGhpbmcgdG8gZGF5cywgc2Vjb25kcywgbWljcm9zZWNvbmRzLgogICAgICAgIGRheXMgKz0gd2Vla3MqNwogICAgICAgIHNlY29uZHMgKz0gbWludXRlcyo2MCArIGhvdXJzKjM2MDAKICAgICAgICBtaWNyb3NlY29uZHMgKz0gbWlsbGlzZWNvbmRzKjEwMDAKCiAgICAgICAgIyBHZXQgcmlkIG9mIGFsbCBmcmFjdGlvbnMsIGFuZCBub3JtYWxpemUgcyBhbmQgdXMuCiAgICAgICAgIyBUYWtlIGEgZGVlcCBicmVhdGggPHdpbms+LgogICAgICAgIGlmIGlzaW5zdGFuY2UoZGF5cywgZmxvYXQpOgogICAgICAgICAgICBkYXlmcmFjLCBkYXlzID0gX21hdGgubW9kZihkYXlzKQogICAgICAgICAgICBkYXlzZWNvbmRzZnJhYywgZGF5c2Vjb25kc3dob2xlID0gX21hdGgubW9kZihkYXlmcmFjICogKDI0LiozNjAwLikpCiAgICAgICAgICAgIGFzc2VydCBkYXlzZWNvbmRzd2hvbGUgPT0gaW50KGRheXNlY29uZHN3aG9sZSkgICMgY2FuJ3Qgb3ZlcmZsb3cKICAgICAgICAgICAgcyA9IGludChkYXlzZWNvbmRzd2hvbGUpCiAgICAgICAgICAgIGFzc2VydCBkYXlzID09IGludChkYXlzKQogICAgICAgICAgICBkID0gaW50KGRheXMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGF5c2Vjb25kc2ZyYWMgPSAwLjAKICAgICAgICAgICAgZCA9IGRheXMKICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShkYXlzZWNvbmRzZnJhYywgZmxvYXQpCiAgICAgICAgYXNzZXJ0IGFicyhkYXlzZWNvbmRzZnJhYykgPD0gMS4wCiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoZCwgaW50KQogICAgICAgIGFzc2VydCBhYnMocykgPD0gMjQgKiAzNjAwCiAgICAgICAgIyBkYXlzIGlzbid0IHJlZmVyZW5jZWQgYWdhaW4gYmVmb3JlIHJlZGVmaW5pdGlvbgoKICAgICAgICBpZiBpc2luc3RhbmNlKHNlY29uZHMsIGZsb2F0KToKICAgICAgICAgICAgc2Vjb25kc2ZyYWMsIHNlY29uZHMgPSBfbWF0aC5tb2RmKHNlY29uZHMpCiAgICAgICAgICAgIGFzc2VydCBzZWNvbmRzID09IGludChzZWNvbmRzKQogICAgICAgICAgICBzZWNvbmRzID0gaW50KHNlY29uZHMpCiAgICAgICAgICAgIHNlY29uZHNmcmFjICs9IGRheXNlY29uZHNmcmFjCiAgICAgICAgICAgIGFzc2VydCBhYnMoc2Vjb25kc2ZyYWMpIDw9IDIuMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlY29uZHNmcmFjID0gZGF5c2Vjb25kc2ZyYWMKICAgICAgICAjIGRheXNlY29uZHNmcmFjIGlzbid0IHJlZmVyZW5jZWQgYWdhaW4KICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShzZWNvbmRzZnJhYywgZmxvYXQpCiAgICAgICAgYXNzZXJ0IGFicyhzZWNvbmRzZnJhYykgPD0gMi4wCgogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHNlY29uZHMsIGludCkKICAgICAgICBkYXlzLCBzZWNvbmRzID0gZGl2bW9kKHNlY29uZHMsIDI0KjM2MDApCiAgICAgICAgZCArPSBkYXlzCiAgICAgICAgcyArPSBpbnQoc2Vjb25kcykgICAgIyBjYW4ndCBvdmVyZmxvdwogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHMsIGludCkKICAgICAgICBhc3NlcnQgYWJzKHMpIDw9IDIgKiAyNCAqIDM2MDAKICAgICAgICAjIHNlY29uZHMgaXNuJ3QgcmVmZXJlbmNlZCBhZ2FpbiBiZWZvcmUgcmVkZWZpbml0aW9uCgogICAgICAgIHVzZG91YmxlID0gc2Vjb25kc2ZyYWMgKiAxZTYKICAgICAgICBhc3NlcnQgYWJzKHVzZG91YmxlKSA8IDIuMWU2ICAgICMgZXhhY3QgdmFsdWUgbm90IGNyaXRpY2FsCiAgICAgICAgIyBzZWNvbmRzZnJhYyBpc24ndCByZWZlcmVuY2VkIGFnYWluCiAgICAgICAgCiAgICAgICAgaWYgaXNpbnN0YW5jZShtaWNyb3NlY29uZHMsIGZsb2F0KToKICAgICAgICAgICAgbWljcm9zZWNvbmRzICs9IHVzZG91YmxlCiAgICAgICAgICAgIG1pY3Jvc2Vjb25kcyA9IHJvdW5kKG1pY3Jvc2Vjb25kcywgMCkKICAgICAgICAgICAgc2Vjb25kcywgbWljcm9zZWNvbmRzID0gZGl2bW9kKG1pY3Jvc2Vjb25kcywgMWU2KQogICAgICAgICAgICBhc3NlcnQgbWljcm9zZWNvbmRzID09IGludChtaWNyb3NlY29uZHMpCiAgICAgICAgICAgIGFzc2VydCBzZWNvbmRzID09IGludChzZWNvbmRzKQogICAgICAgICAgICBkYXlzLCBzZWNvbmRzID0gZGl2bW9kKHNlY29uZHMsIDI0LiozNjAwLikKICAgICAgICAgICAgYXNzZXJ0IGRheXMgPT0gaW50KGRheXMpCiAgICAgICAgICAgIGFzc2VydCBzZWNvbmRzID09IGludChzZWNvbmRzKQogICAgICAgICAgICBkICs9IGludChkYXlzKQogICAgICAgICAgICBzICs9IGludChzZWNvbmRzKSAgICMgY2FuJ3Qgb3ZlcmZsb3cKICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UocywgaW50KQogICAgICAgICAgICBhc3NlcnQgYWJzKHMpIDw9IDMgKiAyNCAqIDM2MDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWNvbmRzLCBtaWNyb3NlY29uZHMgPSBkaXZtb2QobWljcm9zZWNvbmRzLCAxMDAwMDAwKQogICAgICAgICAgICBkYXlzLCBzZWNvbmRzID0gZGl2bW9kKHNlY29uZHMsIDI0KjM2MDApCiAgICAgICAgICAgIGQgKz0gZGF5cwogICAgICAgICAgICBzICs9IGludChzZWNvbmRzKSAgICAjIGNhbid0IG92ZXJmbG93CiAgICAgICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHMsIGludCkKICAgICAgICAgICAgYXNzZXJ0IGFicyhzKSA8PSAzICogMjQgKiAzNjAwCiAgICAgICAgICAgIG1pY3Jvc2Vjb25kcyA9IGZsb2F0KG1pY3Jvc2Vjb25kcykKICAgICAgICAgICAgbWljcm9zZWNvbmRzICs9IHVzZG91YmxlCiAgICAgICAgICAgIG1pY3Jvc2Vjb25kcyA9IHJvdW5kKG1pY3Jvc2Vjb25kcywgMCkKICAgICAgICBhc3NlcnQgYWJzKHMpIDw9IDMgKiAyNCAqIDM2MDAKICAgICAgICBhc3NlcnQgYWJzKG1pY3Jvc2Vjb25kcykgPCAzLjFlNgoKICAgICAgICAjIEp1c3QgYSBsaXR0bGUgYml0IG9mIGNhcnJ5aW5nIHBvc3NpYmxlIGZvciBtaWNyb3NlY29uZHMgYW5kIHNlY29uZHMuCiAgICAgICAgI2lzIHRoZSBiZWxvdyB0d28gc3RhdGVtZW50cyBldmVuIHBvc3NpYmxlPwogICAgICAgICNhc3NlcnQgaXNpbnN0YW5jZShtaWNyb3NlY29uZHMsIGZsb2F0KQogICAgICAgICNhc3NlcnQgaW50KG1pY3Jvc2Vjb25kcykgPT0gbWljcm9zZWNvbmRzCiAgICAgICAgdXMgPSBpbnQobWljcm9zZWNvbmRzKQogICAgICAgIHNlY29uZHMsIHVzID0gZGl2bW9kKHVzLCAxMDAwMDAwKQogICAgICAgIHMgKz0gc2Vjb25kcyAgICAjIGNhbnQndCBvdmVyZmxvdwogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHMsIGludCkKICAgICAgICBkYXlzLCBzID0gZGl2bW9kKHMsIDI0KjM2MDApCiAgICAgICAgZCArPSBkYXlzCgogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKGQsIGludCkKICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShzLCBpbnQpIGFuZCAwIDw9IHMgPCAyNCozNjAwCiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UodXMsIGludCkgYW5kIDAgPD0gdXMgPCAxMDAwMDAwCgogICAgICAgIHNlbGYgPSBvYmplY3QuX19uZXdfXyhjbHMpCgogICAgICAgIHNlbGYuX2RheXMgPSBkCiAgICAgICAgc2VsZi5fc2Vjb25kcyA9IHMKICAgICAgICBzZWxmLl9taWNyb3NlY29uZHMgPSB1cwoKICAgICAgICBpZiBhYnMoZCkgPiA5OTk5OTk5OTk6CiAgICAgICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoInRpbWVkZWx0YSAjIG9mIGRheXMgaXMgdG9vIGxhcmdlOiAlZCIgJSBkKQoKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9taWNyb3NlY29uZHM6CiAgICAgICAgICAgIHJldHVybiAiJXMoJWQsICVkLCAlZCkiICUgKCdkYXRldGltZS4nICsgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RheXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX21pY3Jvc2Vjb25kcykKICAgICAgICBpZiBzZWxmLl9zZWNvbmRzOgogICAgICAgICAgICByZXR1cm4gIiVzKCVkLCAlZCkiICUgKCdkYXRldGltZS4nICsgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGF5cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZWNvbmRzKQogICAgICAgIHJldHVybiAiJXMoJWQpIiAlICgnZGF0ZXRpbWUuJyArIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBzZWxmLl9kYXlzKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIG1tLCBzcyA9IGRpdm1vZChzZWxmLl9zZWNvbmRzLCA2MCkKICAgICAgICBoaCwgbW0gPSBkaXZtb2QobW0sIDYwKQogICAgICAgIHMgPSAiJWQ6JTAyZDolMDJkIiAlIChoaCwgbW0sIHNzKQogICAgICAgIGlmIHNlbGYuX2RheXM6CiAgICAgICAgICAgIGRlZiBwbHVyYWwobik6CiAgICAgICAgICAgICAgICByZXR1cm4gbiwgYWJzKG4pICE9IDEgYW5kICJzIiBvciAiIgogICAgICAgICAgICBzID0gKCIlZCBkYXklcywgIiAlIHBsdXJhbChzZWxmLl9kYXlzKSkgKyBzCiAgICAgICAgaWYgc2VsZi5fbWljcm9zZWNvbmRzOgogICAgICAgICAgICBzID0gcyArICIuJTA2ZCIgJSBzZWxmLl9taWNyb3NlY29uZHMKICAgICAgICByZXR1cm4gcwoKICAgIGRlZiB0b3RhbF9zZWNvbmRzKHNlbGYpOgogICAgICAgICIiIlRvdGFsIHNlY29uZHMgaW4gdGhlIGR1cmF0aW9uLiIiIgogICAgICAgIHJldHVybiAoKHNlbGYuZGF5cyAqIDg2NDAwICsgc2VsZi5zZWNvbmRzKSoxMCoqNiArCiAgICAgICAgICAgICAgICBzZWxmLm1pY3Jvc2Vjb25kcykgLyAxMCoqNgoKICAgICMgUmVhZC1vbmx5IGZpZWxkIGFjY2Vzc29ycwogICAgQHByb3BlcnR5CiAgICBkZWYgZGF5cyhzZWxmKToKICAgICAgICAiIiJkYXlzIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX2RheXMKCiAgICBAcHJvcGVydHkKICAgIGRlZiBzZWNvbmRzKHNlbGYpOgogICAgICAgICIiInNlY29uZHMiIiIKICAgICAgICByZXR1cm4gc2VsZi5fc2Vjb25kcwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1pY3Jvc2Vjb25kcyhzZWxmKToKICAgICAgICAiIiJtaWNyb3NlY29uZHMiIiIKICAgICAgICByZXR1cm4gc2VsZi5fbWljcm9zZWNvbmRzCgogICAgZGVmIF9fYWRkX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgICMgZm9yIENQeXRob24gY29tcGF0aWJpbGl0eSwgd2UgY2Fubm90IHVzZQogICAgICAgICAgICAjIG91ciBfX2NsYXNzX18gaGVyZSwgYnV0IG5lZWQgYSByZWFsIHRpbWVkZWx0YQogICAgICAgICAgICByZXR1cm4gdGltZWRlbHRhKHNlbGYuX2RheXMgKyBvdGhlci5fZGF5cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZWNvbmRzICsgb3RoZXIuX3NlY29uZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmRzICsgb3RoZXIuX21pY3Jvc2Vjb25kcykKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBfX3JhZGRfXyA9IF9fYWRkX18KCiAgICBkZWYgX19zdWJfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgIyBmb3IgQ1B5dGhvbiBjb21wYXRpYmlsaXR5LCB3ZSBjYW5ub3QgdXNlCiAgICAgICAgICAgICMgb3VyIF9fY2xhc3NfXyBoZXJlLCBidXQgbmVlZCBhIHJlYWwgdGltZWRlbHRhCiAgICAgICAgICAgIHJldHVybiB0aW1lZGVsdGEoc2VsZi5fZGF5cyAtIG90aGVyLl9kYXlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMgLSBvdGhlci5fc2Vjb25kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZHMgLSBvdGhlci5fbWljcm9zZWNvbmRzKQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX3JzdWJfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIC1zZWxmICsgb3RoZXIKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19uZWdfXyhzZWxmKToKICAgICAgICAjIGZvciBDUHl0aG9uIGNvbXBhdGliaWxpdHksIHdlIGNhbm5vdCB1c2UKICAgICAgICAjIG91ciBfX2NsYXNzX18gaGVyZSwgYnV0IG5lZWQgYSByZWFsIHRpbWVkZWx0YQogICAgICAgIHJldHVybiB0aW1lZGVsdGEoLXNlbGYuX2RheXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAtc2VsZi5fc2Vjb25kcywKICAgICAgICAgICAgICAgICAgICAgICAgIC1zZWxmLl9taWNyb3NlY29uZHMpCgogICAgZGVmIF9fcG9zX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19hYnNfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9kYXlzIDwgMDoKICAgICAgICAgICAgcmV0dXJuIC1zZWxmCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19tdWxfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgaW50KToKICAgICAgICAgICAgIyBmb3IgQ1B5dGhvbiBjb21wYXRpYmlsaXR5LCB3ZSBjYW5ub3QgdXNlCiAgICAgICAgICAgICMgb3VyIF9fY2xhc3NfXyBoZXJlLCBidXQgbmVlZCBhIHJlYWwgdGltZWRlbHRhCiAgICAgICAgICAgIHJldHVybiB0aW1lZGVsdGEoc2VsZi5fZGF5cyAqIG90aGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMgKiBvdGhlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZHMgKiBvdGhlcikKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBmbG9hdCk6CiAgICAgICAgICAgIGEsIGIgPSBvdGhlci5hc19pbnRlZ2VyX3JhdGlvKCkKICAgICAgICAgICAgcmV0dXJuIHNlbGYgKiBhIC8gYgogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIF9fcm11bF9fID0gX19tdWxfXwoKICAgIGRlZiBfdG9fbWljcm9zZWNvbmRzKHNlbGYpOgogICAgICAgIHJldHVybiAoKHNlbGYuX2RheXMgKiAoMjQqMzYwMCkgKyBzZWxmLl9zZWNvbmRzKSAqIDEwMDAwMDAgKwogICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmRzKQoKICAgIGRlZiBfX2Zsb29yZGl2X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCAoaW50LCB0aW1lZGVsdGEpKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgdXNlYyA9IHNlbGYuX3RvX21pY3Jvc2Vjb25kcygpCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIHVzZWMgLy8gb3RoZXIuX3RvX21pY3Jvc2Vjb25kcygpCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgaW50KToKICAgICAgICAgICAgcmV0dXJuIHRpbWVkZWx0YSgwLCAwLCB1c2VjIC8vIG90aGVyKQoKICAgIGRlZiBfX3RydWVkaXZfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIChpbnQsIGZsb2F0LCB0aW1lZGVsdGEpKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgdXNlYyA9IHNlbGYuX3RvX21pY3Jvc2Vjb25kcygpCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIHVzZWMgLyBvdGhlci5fdG9fbWljcm9zZWNvbmRzKCkKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBpbnQpOgogICAgICAgICAgICByZXR1cm4gdGltZWRlbHRhKDAsIDAsIHVzZWMgLyBvdGhlcikKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBmbG9hdCk6CiAgICAgICAgICAgIGEsIGIgPSBvdGhlci5hc19pbnRlZ2VyX3JhdGlvKCkKICAgICAgICAgICAgcmV0dXJuIHRpbWVkZWx0YSgwLCAwLCBiICogdXNlYyAvIGEpCgogICAgZGVmIF9fbW9kX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHIgPSBzZWxmLl90b19taWNyb3NlY29uZHMoKSAlIG90aGVyLl90b19taWNyb3NlY29uZHMoKQogICAgICAgICAgICByZXR1cm4gdGltZWRlbHRhKDAsIDAsIHIpCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fZGl2bW9kX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHEsIHIgPSBkaXZtb2Qoc2VsZi5fdG9fbWljcm9zZWNvbmRzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXIuX3RvX21pY3Jvc2Vjb25kcygpKQogICAgICAgICAgICByZXR1cm4gcSwgdGltZWRlbHRhKDAsIDAsIHIpCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgIyBDb21wYXJpc29ucyBvZiB0aW1lZGVsdGEgb2JqZWN0cyB3aXRoIG90aGVyLgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID09IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSAhPSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA8PSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDwgMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA+PSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID4gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX2NtcChzZWxmLCBvdGhlcik6CiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSkKICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICNyZXR1cm4gX2NtcChzZWxmLl9nZXRzdGF0ZSgpLCBvdGhlci5fZ2V0c3RhdGUoKSkKICAgICAgICByZXR1cm4gX3N0YXRlX2NtcChzZWxmLl9nZXRzdGF0ZSgpLCBvdGhlci5fZ2V0c3RhdGUoKSkKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fZ2V0c3RhdGUoKSkKCiAgICBkZWYgX19ib29sX18oc2VsZik6CiAgICAgICAgcmV0dXJuIChzZWxmLl9kYXlzICE9IDAgb3IKICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMgIT0gMCBvcgogICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmRzICE9IDApCgogICAgIyBQaWNrbGUgc3VwcG9ydC4KCiAgICBkZWYgX2dldHN0YXRlKHNlbGYpOgogICAgICAgIHJldHVybiAoc2VsZi5fZGF5cywgc2VsZi5fc2Vjb25kcywgc2VsZi5fbWljcm9zZWNvbmRzKQoKICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYpOgogICAgICAgIHJldHVybiAoc2VsZi5fX2NsYXNzX18sIHNlbGYuX2dldHN0YXRlKCkpCgp0aW1lZGVsdGEubWluID0gdGltZWRlbHRhKC05OTk5OTk5OTkpCnRpbWVkZWx0YS5tYXggPSB0aW1lZGVsdGEoZGF5cz05OTk5OTk5OTksIGhvdXJzPTIzLCBtaW51dGVzPTU5LCBzZWNvbmRzPTU5LAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kcz05OTk5OTkpCnRpbWVkZWx0YS5yZXNvbHV0aW9uID0gdGltZWRlbHRhKG1pY3Jvc2Vjb25kcz0xKQoKY2xhc3MgZGF0ZToKICAgICIiIkNvbmNyZXRlIGRhdGUgdHlwZS4KCiAgICBDb25zdHJ1Y3RvcnM6CgogICAgX19uZXdfXygpCiAgICBmcm9tdGltZXN0YW1wKCkKICAgIHRvZGF5KCkKICAgIGZyb21vcmRpbmFsKCkKCiAgICBPcGVyYXRvcnM6CgogICAgX19yZXByX18sIF9fc3RyX18KICAgIF9fY21wX18sIF9faGFzaF9fCiAgICBfX2FkZF9fLCBfX3JhZGRfXywgX19zdWJfXyAoYWRkL3JhZGQgb25seSB3aXRoIHRpbWVkZWx0YSBhcmcpCgogICAgTWV0aG9kczoKCiAgICB0aW1ldHVwbGUoKQogICAgdG9vcmRpbmFsKCkKICAgIHdlZWtkYXkoKQogICAgaXNvd2Vla2RheSgpLCBpc29jYWxlbmRhcigpLCBpc29mb3JtYXQoKQogICAgY3RpbWUoKQogICAgc3RyZnRpbWUoKQoKICAgIFByb3BlcnRpZXMgKHJlYWRvbmx5KToKICAgIHllYXIsIG1vbnRoLCBkYXkKICAgICIiIgogICAgX19zbG90c19fID0gJ195ZWFyJywgJ19tb250aCcsICdfZGF5JwoKICAgIGRlZiBfX25ld19fKGNscywgeWVhciwgbW9udGg9Tm9uZSwgZGF5PU5vbmUpOgogICAgICAgICIiIkNvbnN0cnVjdG9yLgoKICAgICAgICBBcmd1bWVudHM6CgogICAgICAgIHllYXIsIG1vbnRoLCBkYXkgKHJlcXVpcmVkLCBiYXNlIDEpCiAgICAgICAgIiIiCiAgICAgICAgaWYgKGlzaW5zdGFuY2UoeWVhciwgYnl0ZXMpIGFuZCBsZW4oeWVhcikgPT0gNCBhbmQKICAgICAgICAgICAgMSA8PSB5ZWFyWzJdIDw9IDEyIGFuZCBtb250aCBpcyBOb25lKTogICMgTW9udGggaXMgc2FuZQogICAgICAgICAgICAjIFBpY2tsZSBzdXBwb3J0CiAgICAgICAgICAgIHNlbGYgPSBvYmplY3QuX19uZXdfXyhjbHMpCiAgICAgICAgICAgIHNlbGYuX19zZXRzdGF0ZSh5ZWFyKQogICAgICAgICAgICByZXR1cm4gc2VsZgogICAgICAgIF9jaGVja19kYXRlX2ZpZWxkcyh5ZWFyLCBtb250aCwgZGF5KQogICAgICAgIHNlbGYgPSBvYmplY3QuX19uZXdfXyhjbHMpCiAgICAgICAgc2VsZi5feWVhciA9IHllYXIKICAgICAgICBzZWxmLl9tb250aCA9IG1vbnRoCiAgICAgICAgc2VsZi5fZGF5ID0gZGF5CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICAjIEFkZGl0aW9uYWwgY29uc3RydWN0b3JzCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbXRpbWVzdGFtcChjbHMsIHQpOgogICAgICAgICJDb25zdHJ1Y3QgYSBkYXRlIGZyb20gYSBQT1NJWCB0aW1lc3RhbXAgKGxpa2UgdGltZS50aW1lKCkpLiIKICAgICAgICB5LCBtLCBkLCBoaCwgbW0sIHNzLCB3ZWVrZGF5LCBqZGF5LCBkc3QgPSBfdGltZS5sb2NhbHRpbWUodCkKICAgICAgICByZXR1cm4gY2xzKHksIG0sIGQpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgdG9kYXkoY2xzKToKICAgICAgICAiQ29uc3RydWN0IGEgZGF0ZSBmcm9tIHRpbWUudGltZSgpLiIKICAgICAgICB0ID0gX3RpbWUudGltZSgpCiAgICAgICAgcmV0dXJuIGNscy5mcm9tdGltZXN0YW1wKHQpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbW9yZGluYWwoY2xzLCBuKToKICAgICAgICAiIiJDb250cnVjdCBhIGRhdGUgZnJvbSBhIHByb2xlcHRpYyBHcmVnb3JpYW4gb3JkaW5hbC4KCiAgICAgICAgSmFudWFyeSAxIG9mIHllYXIgMSBpcyBkYXkgMS4gIE9ubHkgdGhlIHllYXIsIG1vbnRoIGFuZCBkYXkgYXJlCiAgICAgICAgbm9uLXplcm8gaW4gdGhlIHJlc3VsdC4KICAgICAgICAiIiIKICAgICAgICB5LCBtLCBkID0gX29yZDJ5bWQobikKICAgICAgICByZXR1cm4gY2xzKHksIG0sIGQpCgogICAgIyBDb252ZXJzaW9ucyB0byBzdHJpbmcKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgIiIiQ29udmVydCB0byBmb3JtYWwgc3RyaW5nLCBmb3IgcmVwcigpLgoKICAgICAgICA+Pj4gZHQgPSBkYXRldGltZSgyMDEwLCAxLCAxKQogICAgICAgID4+PiByZXByKGR0KQogICAgICAgICdkYXRldGltZS5kYXRldGltZSgyMDEwLCAxLCAxLCAwLCAwKScKCiAgICAgICAgPj4+IGR0ID0gZGF0ZXRpbWUoMjAxMCwgMSwgMSwgdHppbmZvPXRpbWV6b25lLnV0YykKICAgICAgICA+Pj4gcmVwcihkdCkKICAgICAgICAnZGF0ZXRpbWUuZGF0ZXRpbWUoMjAxMCwgMSwgMSwgMCwgMCwgdHppbmZvPWRhdGV0aW1lLnRpbWV6b25lLnV0YyknCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuICIlcyglZCwgJWQsICVkKSIgJSAoJ2RhdGV0aW1lLicgKyBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl95ZWFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX21vbnRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RheSkKICAgICMgWFhYIFRoZXNlIHNob3VsZG4ndCBkZXBlbmQgb24gdGltZS5sb2NhbHRpbWUoKSwgYmVjYXVzZSB0aGF0CiAgICAjIGNsaXBzIHRoZSB1c2FibGUgZGF0ZXMgdG8gWzE5NzAgLi4gMjAzOCkuICBBdCBsZWFzdCBjdGltZSgpIGlzCiAgICAjIGVhc2lseSBkb25lIHdpdGhvdXQgdXNpbmcgc3RyZnRpbWUoKSAtLSB0aGF0J3MgYmV0dGVyIHRvbyBiZWNhdXNlCiAgICAjIHN0cmZ0aW1lKCIlYyIsIC4uLikgaXMgbG9jYWxlIHNwZWNpZmljLgoKCiAgICBkZWYgY3RpbWUoc2VsZik6CiAgICAgICAgIlJldHVybiBjdGltZSgpIHN0eWxlIHN0cmluZy4iCiAgICAgICAgd2Vla2RheSA9IHNlbGYudG9vcmRpbmFsKCkgJSA3IG9yIDcKICAgICAgICByZXR1cm4gIiVzICVzICUyZCAwMDowMDowMCAlMDRkIiAlICgKICAgICAgICAgICAgX0RBWU5BTUVTW3dlZWtkYXldLAogICAgICAgICAgICBfTU9OVEhOQU1FU1tzZWxmLl9tb250aF0sCiAgICAgICAgICAgIHNlbGYuX2RheSwgc2VsZi5feWVhcikKCiAgICBkZWYgc3RyZnRpbWUoc2VsZiwgZm10KToKICAgICAgICAiRm9ybWF0IHVzaW5nIHN0cmZ0aW1lKCkuIgogICAgICAgIHJldHVybiBfd3JhcF9zdHJmdGltZShzZWxmLCBmbXQsIHNlbGYudGltZXR1cGxlKCkpCgogICAgZGVmIF9fZm9ybWF0X18oc2VsZiwgZm10KToKICAgICAgICBpZiBsZW4oZm10KSAhPSAwOgogICAgICAgICAgICByZXR1cm4gc2VsZi5zdHJmdGltZShmbXQpCiAgICAgICAgcmV0dXJuIHN0cihzZWxmKQoKICAgIGRlZiBpc29mb3JtYXQoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBkYXRlIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gSVNPLgoKICAgICAgICBUaGlzIGlzICdZWVlZLU1NLUREJy4KCiAgICAgICAgUmVmZXJlbmNlczoKICAgICAgICAtIGh0dHA6Ly93d3cudzMub3JnL1RSL05PVEUtZGF0ZXRpbWUKICAgICAgICAtIGh0dHA6Ly93d3cuY2wuY2FtLmFjLnVrL35tZ2syNS9pc28tdGltZS5odG1sCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuICIlMDRkLSUwMmQtJTAyZCIgJSAoc2VsZi5feWVhciwgc2VsZi5fbW9udGgsIHNlbGYuX2RheSkKCiAgICBfX3N0cl9fID0gaXNvZm9ybWF0CgogICAgIyBSZWFkLW9ubHkgZmllbGQgYWNjZXNzb3JzCiAgICBAcHJvcGVydHkKICAgIGRlZiB5ZWFyKHNlbGYpOgogICAgICAgICIiInllYXIgKDEtOTk5OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5feWVhcgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1vbnRoKHNlbGYpOgogICAgICAgICIiIm1vbnRoICgxLTEyKSIiIgogICAgICAgIHJldHVybiBzZWxmLl9tb250aAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGRheShzZWxmKToKICAgICAgICAiIiJkYXkgKDEtMzEpIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX2RheQoKICAgICMgU3RhbmRhcmQgY29udmVyc2lvbnMsIF9fY21wX18sIF9faGFzaF9fIChhbmQgaGVscGVycykKCiAgICBkZWYgdGltZXR1cGxlKHNlbGYpOgogICAgICAgICJSZXR1cm4gbG9jYWwgdGltZSB0dXBsZSBjb21wYXRpYmxlIHdpdGggdGltZS5sb2NhbHRpbWUoKS4iCiAgICAgICAgcmV0dXJuIF9idWlsZF9zdHJ1Y3RfdGltZShzZWxmLl95ZWFyLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwgMCwgMCwgLTEpCgogICAgZGVmIHRvb3JkaW5hbChzZWxmKToKICAgICAgICAiIiJSZXR1cm4gcHJvbGVwdGljIEdyZWdvcmlhbiBvcmRpbmFsIGZvciB0aGUgeWVhciwgbW9udGggYW5kIGRheS4KCiAgICAgICAgSmFudWFyeSAxIG9mIHllYXIgMSBpcyBkYXkgMS4gIE9ubHkgdGhlIHllYXIsIG1vbnRoIGFuZCBkYXkgdmFsdWVzCiAgICAgICAgY29udHJpYnV0ZSB0byB0aGUgcmVzdWx0LgogICAgICAgICIiIgogICAgICAgIHJldHVybiBfeW1kMm9yZChzZWxmLl95ZWFyLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5KQoKICAgIGRlZiByZXBsYWNlKHNlbGYsIHllYXI9Tm9uZSwgbW9udGg9Tm9uZSwgZGF5PU5vbmUpOgogICAgICAgICIiIlJldHVybiBhIG5ldyBkYXRlIHdpdGggbmV3IHZhbHVlcyBmb3IgdGhlIHNwZWNpZmllZCBmaWVsZHMuIiIiCiAgICAgICAgaWYgeWVhciBpcyBOb25lOgogICAgICAgICAgICB5ZWFyID0gc2VsZi5feWVhcgogICAgICAgIGlmIG1vbnRoIGlzIE5vbmU6CiAgICAgICAgICAgIG1vbnRoID0gc2VsZi5fbW9udGgKICAgICAgICBpZiBkYXkgaXMgTm9uZToKICAgICAgICAgICAgZGF5ID0gc2VsZi5fZGF5CiAgICAgICAgX2NoZWNrX2RhdGVfZmllbGRzKHllYXIsIG1vbnRoLCBkYXkpCiAgICAgICAgcmV0dXJuIGRhdGUoeWVhciwgbW9udGgsIGRheSkKCiAgICAjIENvbXBhcmlzb25zIG9mIGRhdGUgb2JqZWN0cyB3aXRoIG90aGVyLgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA9PSAwCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgZGF0ZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpICE9IDAKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPD0gMAogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA8IDAKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPj0gMAogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA+IDAKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX2NtcChzZWxmLCBvdGhlcik6CiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpCiAgICAgICAgeSwgbSwgZCA9IHNlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXkKICAgICAgICB5MiwgbTIsIGQyID0gb3RoZXIuX3llYXIsIG90aGVyLl9tb250aCwgb3RoZXIuX2RheQogICAgICAgICNmaXhtZSBicnl0aG9uCiAgICAgICAgI3JldHVybiBfY21wKCh5LCBtLCBkKSwgKHkyLCBtMiwgZDIpKQogICAgICAgIHJldHVybiBfc3RhdGVfY21wKCh5LCBtLCBkKSwgKHkyLCBtMiwgZDIpKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICAiSGFzaC4iCiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fZ2V0c3RhdGUoKSkKCiAgICAjIENvbXB1dGF0aW9ucwoKICAgIGRlZiBfX2FkZF9fKHNlbGYsIG90aGVyKToKICAgICAgICAiQWRkIGEgZGF0ZSB0byBhIHRpbWVkZWx0YS4iCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgbyA9IHNlbGYudG9vcmRpbmFsKCkgKyBvdGhlci5kYXlzCiAgICAgICAgICAgIGlmIDAgPCBvIDw9IF9NQVhPUkRJTkFMOgogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGUuZnJvbW9yZGluYWwobykKICAgICAgICAgICAgcmFpc2UgT3ZlcmZsb3dFcnJvcigicmVzdWx0IG91dCBvZiByYW5nZSIpCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgX19yYWRkX18gPSBfX2FkZF9fCgogICAgZGVmIF9fc3ViX18oc2VsZiwgb3RoZXIpOgogICAgICAgICIiIlN1YnRyYWN0IHR3byBkYXRlcywgb3IgYSBkYXRlIGFuZCBhIHRpbWVkZWx0YS4iIiIKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZiArIHRpbWVkZWx0YSgtb3RoZXIuZGF5cykKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgZGF5czEgPSBzZWxmLnRvb3JkaW5hbCgpCiAgICAgICAgICAgIGRheXMyID0gb3RoZXIudG9vcmRpbmFsKCkKICAgICAgICAgICAgcmV0dXJuIHRpbWVkZWx0YShkYXlzMSAtIGRheXMyKQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiB3ZWVrZGF5KHNlbGYpOgogICAgICAgICJSZXR1cm4gZGF5IG9mIHRoZSB3ZWVrLCB3aGVyZSBNb25kYXkgPT0gMCAuLi4gU3VuZGF5ID09IDYuIgogICAgICAgIHJldHVybiAoc2VsZi50b29yZGluYWwoKSArIDYpICUgNwoKICAgICMgRGF5LW9mLXRoZS13ZWVrIGFuZCB3ZWVrLW9mLXRoZS15ZWFyLCBhY2NvcmRpbmcgdG8gSVNPCgogICAgZGVmIGlzb3dlZWtkYXkoc2VsZik6CiAgICAgICAgIlJldHVybiBkYXkgb2YgdGhlIHdlZWssIHdoZXJlIE1vbmRheSA9PSAxIC4uLiBTdW5kYXkgPT0gNy4iCiAgICAgICAgIyAxLUphbi0wMDAxIGlzIGEgTW9uZGF5CiAgICAgICAgcmV0dXJuIHNlbGYudG9vcmRpbmFsKCkgJSA3IG9yIDcKCiAgICBkZWYgaXNvY2FsZW5kYXIoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGEgMy10dXBsZSBjb250YWluaW5nIElTTyB5ZWFyLCB3ZWVrIG51bWJlciwgYW5kIHdlZWtkYXkuCgogICAgICAgIFRoZSBmaXJzdCBJU08gd2VlayBvZiB0aGUgeWVhciBpcyB0aGUgKE1vbi1TdW4pIHdlZWsKICAgICAgICBjb250YWluaW5nIHRoZSB5ZWFyJ3MgZmlyc3QgVGh1cnNkYXk7IGV2ZXJ5dGhpbmcgZWxzZSBkZXJpdmVzCiAgICAgICAgZnJvbSB0aGF0LgoKICAgICAgICBUaGUgZmlyc3Qgd2VlayBpcyAxOyBNb25kYXkgaXMgMSAuLi4gU3VuZGF5IGlzIDcuCgogICAgICAgIElTTyBjYWxlbmRhciBhbGdvcml0aG0gdGFrZW4gZnJvbQogICAgICAgIGh0dHA6Ly93d3cucGh5cy51dS5ubC9+dmdlbnQvY2FsZW5kYXIvaXNvY2FsZW5kYXIuaHRtCiAgICAgICAgIiIiCiAgICAgICAgeWVhciA9IHNlbGYuX3llYXIKICAgICAgICB3ZWVrMW1vbmRheSA9IF9pc293ZWVrMW1vbmRheSh5ZWFyKQogICAgICAgIHRvZGF5ID0gX3ltZDJvcmQoc2VsZi5feWVhciwgc2VsZi5fbW9udGgsIHNlbGYuX2RheSkKICAgICAgICAjIEludGVybmFsbHksIHdlZWsgYW5kIGRheSBoYXZlIG9yaWdpbiAwCiAgICAgICAgd2VlaywgZGF5ID0gZGl2bW9kKHRvZGF5IC0gd2VlazFtb25kYXksIDcpCiAgICAgICAgaWYgd2VlayA8IDA6CiAgICAgICAgICAgIHllYXIgLT0gMQogICAgICAgICAgICB3ZWVrMW1vbmRheSA9IF9pc293ZWVrMW1vbmRheSh5ZWFyKQogICAgICAgICAgICB3ZWVrLCBkYXkgPSBkaXZtb2QodG9kYXkgLSB3ZWVrMW1vbmRheSwgNykKICAgICAgICBlbGlmIHdlZWsgPj0gNTI6CiAgICAgICAgICAgIGlmIHRvZGF5ID49IF9pc293ZWVrMW1vbmRheSh5ZWFyKzEpOgogICAgICAgICAgICAgICAgeWVhciArPSAxCiAgICAgICAgICAgICAgICB3ZWVrID0gMAogICAgICAgIHJldHVybiB5ZWFyLCB3ZWVrKzEsIGRheSsxCgogICAgIyBQaWNrbGUgc3VwcG9ydC4KCiAgICBkZWYgX2dldHN0YXRlKHNlbGYpOgogICAgICAgIHloaSwgeWxvID0gZGl2bW9kKHNlbGYuX3llYXIsIDI1NikKICAgICAgICByZXR1cm4gYnl0ZXMoW3loaSwgeWxvLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5XSksCgogICAgZGVmIF9fc2V0c3RhdGUoc2VsZiwgc3RyaW5nKToKICAgICAgICBpZiBsZW4oc3RyaW5nKSAhPSA0IG9yIG5vdCAoMSA8PSBzdHJpbmdbMl0gPD0gMTIpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm5vdCBlbm91Z2ggYXJndW1lbnRzIikKICAgICAgICB5aGksIHlsbywgc2VsZi5fbW9udGgsIHNlbGYuX2RheSA9IHN0cmluZwogICAgICAgIHNlbGYuX3llYXIgPSB5aGkgKiAyNTYgKyB5bG8KCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCBzZWxmLl9nZXRzdGF0ZSgpKQoKX2RhdGVfY2xhc3MgPSBkYXRlICAjIHNvIGZ1bmN0aW9ucyB3LyBhcmdzIG5hbWVkICJkYXRlIiBjYW4gZ2V0IGF0IHRoZSBjbGFzcwoKZGF0ZS5taW4gPSBkYXRlKDEsIDEsIDEpCmRhdGUubWF4ID0gZGF0ZSg5OTk5LCAxMiwgMzEpCmRhdGUucmVzb2x1dGlvbiA9IHRpbWVkZWx0YShkYXlzPTEpCgpjbGFzcyB0emluZm86CiAgICAiIiJBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciB0aW1lIHpvbmUgaW5mbyBjbGFzc2VzLgoKICAgIFN1YmNsYXNzZXMgbXVzdCBvdmVycmlkZSB0aGUgbmFtZSgpLCB1dGNvZmZzZXQoKSBhbmQgZHN0KCkgbWV0aG9kcy4KICAgICIiIgogICAgX19zbG90c19fID0gKCkKICAgIGRlZiB0em5hbWUoc2VsZiwgZHQpOgogICAgICAgICJkYXRldGltZSAtPiBzdHJpbmcgbmFtZSBvZiB0aW1lIHpvbmUuIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoInR6aW5mbyBzdWJjbGFzcyBtdXN0IG92ZXJyaWRlIHR6bmFtZSgpIikKCiAgICBkZWYgdXRjb2Zmc2V0KHNlbGYsIGR0KToKICAgICAgICAiZGF0ZXRpbWUgLT4gbWludXRlcyBlYXN0IG9mIFVUQyAobmVnYXRpdmUgZm9yIHdlc3Qgb2YgVVRDKSIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJ0emluZm8gc3ViY2xhc3MgbXVzdCBvdmVycmlkZSB1dGNvZmZzZXQoKSIpCgogICAgZGVmIGRzdChzZWxmLCBkdCk6CiAgICAgICAgIiIiZGF0ZXRpbWUgLT4gRFNUIG9mZnNldCBpbiBtaW51dGVzIGVhc3Qgb2YgVVRDLgoKICAgICAgICBSZXR1cm4gMCBpZiBEU1Qgbm90IGluIGVmZmVjdC4gIHV0Y29mZnNldCgpIG11c3QgaW5jbHVkZSB0aGUgRFNUCiAgICAgICAgb2Zmc2V0LgogICAgICAgICIiIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoInR6aW5mbyBzdWJjbGFzcyBtdXN0IG92ZXJyaWRlIGRzdCgpIikKCiAgICBkZWYgZnJvbXV0YyhzZWxmLCBkdCk6CiAgICAgICAgImRhdGV0aW1lIGluIFVUQyAtPiBkYXRldGltZSBpbiBsb2NhbCB0aW1lLiIKCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZHQsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJmcm9tdXRjKCkgcmVxdWlyZXMgYSBkYXRldGltZSBhcmd1bWVudCIpCiAgICAgICAgaWYgZHQudHppbmZvIGlzIG5vdCBzZWxmOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkdC50emluZm8gaXMgbm90IHNlbGYiKQoKICAgICAgICBkdG9mZiA9IGR0LnV0Y29mZnNldCgpCiAgICAgICAgaWYgZHRvZmYgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZnJvbXV0YygpIHJlcXVpcmVzIGEgbm9uLU5vbmUgdXRjb2Zmc2V0KCkgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJyZXN1bHQiKQoKICAgICAgICAjIFNlZSB0aGUgbG9uZyBjb21tZW50IGJsb2NrIGF0IHRoZSBlbmQgb2YgdGhpcyBmaWxlIGZvciBhbgogICAgICAgICMgZXhwbGFuYXRpb24gb2YgdGhpcyBhbGdvcml0aG0uCiAgICAgICAgZHRkc3QgPSBkdC5kc3QoKQogICAgICAgIGlmIGR0ZHN0IGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImZyb211dGMoKSByZXF1aXJlcyBhIG5vbi1Ob25lIGRzdCgpIHJlc3VsdCIpCiAgICAgICAgZGVsdGEgPSBkdG9mZiAtIGR0ZHN0CiAgICAgICAgaWYgZGVsdGE6CiAgICAgICAgICAgIGR0ICs9IGRlbHRhCiAgICAgICAgICAgIGR0ZHN0ID0gZHQuZHN0KCkKICAgICAgICAgICAgaWYgZHRkc3QgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImZyb211dGMoKTogZHQuZHN0IGdhdmUgaW5jb25zaXN0ZW50ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInJlc3VsdHM7IGNhbm5vdCBjb252ZXJ0IikKICAgICAgICByZXR1cm4gZHQgKyBkdGRzdAoKICAgICMgUGlja2xlIHN1cHBvcnQuCgogICAgZGVmIF9fcmVkdWNlX18oc2VsZik6CiAgICAgICAgZ2V0aW5pdGFyZ3MgPSBnZXRhdHRyKHNlbGYsICJfX2dldGluaXRhcmdzX18iLCBOb25lKQogICAgICAgIGlmIGdldGluaXRhcmdzOgogICAgICAgICAgICBhcmdzID0gZ2V0aW5pdGFyZ3MoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFyZ3MgPSAoKQogICAgICAgIGdldHN0YXRlID0gZ2V0YXR0cihzZWxmLCAiX19nZXRzdGF0ZV9fIiwgTm9uZSkKICAgICAgICBpZiBnZXRzdGF0ZToKICAgICAgICAgICAgc3RhdGUgPSBnZXRzdGF0ZSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc3RhdGUgPSBnZXRhdHRyKHNlbGYsICJfX2RpY3RfXyIsIE5vbmUpIG9yIE5vbmUKICAgICAgICBpZiBzdGF0ZSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCBhcmdzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAoc2VsZi5fX2NsYXNzX18sIGFyZ3MsIHN0YXRlKQoKX3R6aW5mb19jbGFzcyA9IHR6aW5mbwoKY2xhc3MgdGltZToKICAgICIiIlRpbWUgd2l0aCB0aW1lIHpvbmUuCgogICAgQ29uc3RydWN0b3JzOgoKICAgIF9fbmV3X18oKQoKICAgIE9wZXJhdG9yczoKCiAgICBfX3JlcHJfXywgX19zdHJfXwogICAgX19jbXBfXywgX19oYXNoX18KCiAgICBNZXRob2RzOgoKICAgIHN0cmZ0aW1lKCkKICAgIGlzb2Zvcm1hdCgpCiAgICB1dGNvZmZzZXQoKQogICAgdHpuYW1lKCkKICAgIGRzdCgpCgogICAgUHJvcGVydGllcyAocmVhZG9ubHkpOgogICAgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pY3Jvc2Vjb25kLCB0emluZm8KICAgICIiIgoKICAgIGRlZiBfX25ld19fKGNscywgaG91cj0wLCBtaW51dGU9MCwgc2Vjb25kPTAsIG1pY3Jvc2Vjb25kPTAsIHR6aW5mbz1Ob25lKToKICAgICAgICAiIiJDb25zdHJ1Y3Rvci4KCiAgICAgICAgQXJndW1lbnRzOgoKICAgICAgICBob3VyLCBtaW51dGUgKHJlcXVpcmVkKQogICAgICAgIHNlY29uZCwgbWljcm9zZWNvbmQgKGRlZmF1bHQgdG8gemVybykKICAgICAgICB0emluZm8gKGRlZmF1bHQgdG8gTm9uZSkKICAgICAgICAiIiIKICAgICAgICBzZWxmID0gb2JqZWN0Ll9fbmV3X18oY2xzKQogICAgICAgIGlmIGlzaW5zdGFuY2UoaG91ciwgYnl0ZXMpIGFuZCBsZW4oaG91cikgPT0gNjoKICAgICAgICAgICAgIyBQaWNrbGUgc3VwcG9ydAogICAgICAgICAgICBzZWxmLl9fc2V0c3RhdGUoaG91ciwgbWludXRlIG9yIE5vbmUpCiAgICAgICAgICAgIHJldHVybiBzZWxmCiAgICAgICAgX2NoZWNrX3R6aW5mb19hcmcodHppbmZvKQogICAgICAgIF9jaGVja190aW1lX2ZpZWxkcyhob3VyLCBtaW51dGUsIHNlY29uZCwgbWljcm9zZWNvbmQpCiAgICAgICAgc2VsZi5faG91ciA9IGhvdXIKICAgICAgICBzZWxmLl9taW51dGUgPSBtaW51dGUKICAgICAgICBzZWxmLl9zZWNvbmQgPSBzZWNvbmQKICAgICAgICBzZWxmLl9taWNyb3NlY29uZCA9IG1pY3Jvc2Vjb25kCiAgICAgICAgc2VsZi5fdHppbmZvID0gdHppbmZvCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICAjIFJlYWQtb25seSBmaWVsZCBhY2Nlc3NvcnMKICAgIEBwcm9wZXJ0eQogICAgZGVmIGhvdXIoc2VsZik6CiAgICAgICAgIiIiaG91ciAoMC0yMykiIiIKICAgICAgICByZXR1cm4gc2VsZi5faG91cgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1pbnV0ZShzZWxmKToKICAgICAgICAiIiJtaW51dGUgKDAtNTkpIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX21pbnV0ZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHNlY29uZChzZWxmKToKICAgICAgICAiIiJzZWNvbmQgKDAtNTkpIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX3NlY29uZAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1pY3Jvc2Vjb25kKHNlbGYpOgogICAgICAgICIiIm1pY3Jvc2Vjb25kICgwLTk5OTk5OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5fbWljcm9zZWNvbmQKCiAgICBAcHJvcGVydHkKICAgIGRlZiB0emluZm8oc2VsZik6CiAgICAgICAgIiIidGltZXpvbmUgaW5mbyBvYmplY3QiIiIKICAgICAgICByZXR1cm4gc2VsZi5fdHppbmZvCgogICAgIyBTdGFuZGFyZCBjb252ZXJzaW9ucywgX19oYXNoX18gKGFuZCBoZWxwZXJzKQoKICAgICMgQ29tcGFyaXNvbnMgb2YgdGltZSBvYmplY3RzIHdpdGggb3RoZXIuCgogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID09IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgIT0gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIF9fbGVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDw9IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBfY21wZXJyb3Ioc2VsZiwgb3RoZXIpCgogICAgZGVmIF9fbHRfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDwgMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPj0gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19ndF9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPiAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfY21wKHNlbGYsIG90aGVyKToKICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShvdGhlciwgdGltZSkKICAgICAgICBteXR6ID0gc2VsZi5fdHppbmZvCiAgICAgICAgb3R0eiA9IG90aGVyLl90emluZm8KICAgICAgICBteW9mZiA9IG90b2ZmID0gTm9uZQoKICAgICAgICBpZiBteXR6IGlzIG90dHo6CiAgICAgICAgICAgIGJhc2VfY29tcGFyZSA9IFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBteW9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICAgICAgb3RvZmYgPSBvdGhlci51dGNvZmZzZXQoKQogICAgICAgICAgICBiYXNlX2NvbXBhcmUgPSBteW9mZiA9PSBvdG9mZgoKICAgICAgICBpZiBiYXNlX2NvbXBhcmU6CiAgICAgICAgICAgICNmaXhtZSBicnl0aG9uCiAgICAgICAgICAgICNyZXR1cm4gX2NtcCgoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICMgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpLAogICAgICAgICAgICAjICAgICAgICAgICAob3RoZXIuX2hvdXIsIG90aGVyLl9taW51dGUsIG90aGVyLl9zZWNvbmQsCiAgICAgICAgICAgICMgICAgICAgICAgICBvdGhlci5fbWljcm9zZWNvbmQpKQogICAgICAgICAgICByZXR1cm4gX3R1cGxlX2NtcCgoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZCksCiAgICAgICAgICAgICAgICAgICAgICAgKG90aGVyLl9ob3VyLCBvdGhlci5fbWludXRlLCBvdGhlci5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICBvdGhlci5fbWljcm9zZWNvbmQpKQogICAgICAgIGlmIG15b2ZmIGlzIE5vbmUgb3Igb3RvZmYgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYW5ub3QgY29tcGFyZSBuYWl2ZSBhbmQgYXdhcmUgdGltZXMiKQogICAgICAgIG15aGhtbSA9IHNlbGYuX2hvdXIgKiA2MCArIHNlbGYuX21pbnV0ZSAtIG15b2ZmLy90aW1lZGVsdGEobWludXRlcz0xKQogICAgICAgIG90aGhtbSA9IG90aGVyLl9ob3VyICogNjAgKyBvdGhlci5fbWludXRlIC0gb3RvZmYvL3RpbWVkZWx0YShtaW51dGVzPTEpCiAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAjcmV0dXJuIF9jbXAoKG15aGhtbSwgc2VsZi5fc2Vjb25kLCBzZWxmLl9taWNyb3NlY29uZCksCiAgICAgICAgIyAgICAgICAgICAgIChvdGhobW0sIG90aGVyLl9zZWNvbmQsIG90aGVyLl9taWNyb3NlY29uZCkpCiAgICAgICAgcmV0dXJuIF90dXBsZV9jbXAoKG15aGhtbSwgc2VsZi5fc2Vjb25kLCBzZWxmLl9taWNyb3NlY29uZCksCiAgICAgICAgICAgICAgICAgICAgKG90aGhtbSwgb3RoZXIuX3NlY29uZCwgb3RoZXIuX21pY3Jvc2Vjb25kKSkKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgIiIiSGFzaC4iIiIKICAgICAgICB0em9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBpZiBub3QgdHpvZmY6ICMgemVybyBvciBOb25lCiAgICAgICAgICAgIHJldHVybiBoYXNoKHNlbGYuX2dldHN0YXRlKClbMF0pCiAgICAgICAgaCwgbSA9IGRpdm1vZCh0aW1lZGVsdGEoaG91cnM9c2VsZi5ob3VyLCBtaW51dGVzPXNlbGYubWludXRlKSAtIHR6b2ZmLAogICAgICAgICAgICAgICAgICAgICAgdGltZWRlbHRhKGhvdXJzPTEpKQogICAgICAgIGFzc2VydCBub3QgbSAlIHRpbWVkZWx0YShtaW51dGVzPTEpLCAid2hvbGUgbWludXRlIgogICAgICAgIG0gLy89IHRpbWVkZWx0YShtaW51dGVzPTEpCiAgICAgICAgaWYgMCA8PSBoIDwgMjQ6CiAgICAgICAgICAgIHJldHVybiBoYXNoKHRpbWUoaCwgbSwgc2VsZi5zZWNvbmQsIHNlbGYubWljcm9zZWNvbmQpKQogICAgICAgIHJldHVybiBoYXNoKChoLCBtLCBzZWxmLnNlY29uZCwgc2VsZi5taWNyb3NlY29uZCkpCgogICAgIyBDb252ZXJzaW9uIHRvIHN0cmluZwoKICAgIGRlZiBfdHpzdHIoc2VsZiwgc2VwPSI6Iik6CiAgICAgICAgIiIiUmV0dXJuIGZvcm1hdHRlZCB0aW1lem9uZSBvZmZzZXQgKCt4eDp4eCkgb3IgTm9uZS4iIiIKICAgICAgICBvZmYgPSBzZWxmLnV0Y29mZnNldCgpCiAgICAgICAgaWYgb2ZmIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBvZmYuZGF5cyA8IDA6CiAgICAgICAgICAgICAgICBzaWduID0gIi0iCiAgICAgICAgICAgICAgICBvZmYgPSAtb2ZmCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzaWduID0gIisiCiAgICAgICAgICAgIGhoLCBtbSA9IGRpdm1vZChvZmYsIHRpbWVkZWx0YShob3Vycz0xKSkKICAgICAgICAgICAgYXNzZXJ0IG5vdCBtbSAlIHRpbWVkZWx0YShtaW51dGVzPTEpLCAid2hvbGUgbWludXRlIgogICAgICAgICAgICBtbSAvLz0gdGltZWRlbHRhKG1pbnV0ZXM9MSkKICAgICAgICAgICAgYXNzZXJ0IDAgPD0gaGggPCAyNAogICAgICAgICAgICBvZmYgPSAiJXMlMDJkJXMlMDJkIiAlIChzaWduLCBoaCwgc2VwLCBtbSkKICAgICAgICByZXR1cm4gb2ZmCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgICIiIkNvbnZlcnQgdG8gZm9ybWFsIHN0cmluZywgZm9yIHJlcHIoKS4iIiIKICAgICAgICBpZiBzZWxmLl9taWNyb3NlY29uZCAhPSAwOgogICAgICAgICAgICBzID0gIiwgJWQsICVkIiAlIChzZWxmLl9zZWNvbmQsIHNlbGYuX21pY3Jvc2Vjb25kKQogICAgICAgIGVsaWYgc2VsZi5fc2Vjb25kICE9IDA6CiAgICAgICAgICAgIHMgPSAiLCAlZCIgJSBzZWxmLl9zZWNvbmQKICAgICAgICBlbHNlOgogICAgICAgICAgICBzID0gIiIKICAgICAgICBzPSAiJXMoJWQsICVkJXMpIiAlICgnZGF0ZXRpbWUuJyArIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgcykKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGFzc2VydCBzWy0xOl0gPT0gIikiCiAgICAgICAgICAgIHMgPSBzWzotMV0gKyAiLCB0emluZm89JXIiICUgc2VsZi5fdHppbmZvICsgIikiCiAgICAgICAgcmV0dXJuIHMKCiAgICBkZWYgaXNvZm9ybWF0KHNlbGYpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZSBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIElTTy4KCiAgICAgICAgVGhpcyBpcyAnSEg6TU06U1MubW1tbW1tK3p6Onp6Jywgb3IgJ0hIOk1NOlNTK3p6Onp6JyBpZgogICAgICAgIHNlbGYubWljcm9zZWNvbmQgPT0gMC4KICAgICAgICAiIiIKICAgICAgICBzID0gX2Zvcm1hdF90aW1lKHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgc2VsZi5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpCiAgICAgICAgdHogPSBzZWxmLl90enN0cigpCiAgICAgICAgaWYgdHo6CiAgICAgICAgICAgIHMgKz0gdHoKICAgICAgICByZXR1cm4gcwoKICAgIF9fc3RyX18gPSBpc29mb3JtYXQKCiAgICBkZWYgc3RyZnRpbWUoc2VsZiwgZm10KToKICAgICAgICAiIiJGb3JtYXQgdXNpbmcgc3RyZnRpbWUoKS4gIFRoZSBkYXRlIHBhcnQgb2YgdGhlIHRpbWVzdGFtcCBwYXNzZWQKICAgICAgICB0byB1bmRlcmx5aW5nIHN0cmZ0aW1lIHNob3VsZCBub3QgYmUgdXNlZC4KICAgICAgICAiIiIKICAgICAgICAjIFRoZSB5ZWFyIG11c3QgYmUgPj0gMTAwMCBlbHNlIFB5dGhvbidzIHN0cmZ0aW1lIGltcGxlbWVudGF0aW9uCiAgICAgICAgIyBjYW4gcmFpc2UgYSBib2d1cyBleGNlcHRpb24uCiAgICAgICAgdGltZXR1cGxlID0gKDE5MDAsIDEsIDEsCiAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgc2VsZi5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAwLCAxLCAtMSkKICAgICAgICByZXR1cm4gX3dyYXBfc3RyZnRpbWUoc2VsZiwgZm10LCB0aW1ldHVwbGUpCgogICAgZGVmIF9fZm9ybWF0X18oc2VsZiwgZm10KToKICAgICAgICBpZiBsZW4oZm10KSAhPSAwOgogICAgICAgICAgICByZXR1cm4gc2VsZi5zdHJmdGltZShmbXQpCiAgICAgICAgcmV0dXJuIHN0cihzZWxmKQoKICAgICMgVGltZXpvbmUgZnVuY3Rpb25zCgogICAgZGVmIHV0Y29mZnNldChzZWxmKToKICAgICAgICAiIiJSZXR1cm4gdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaW51dGVzIGVhc3Qgb2YgVVRDIChuZWdhdGl2ZSB3ZXN0IG9mCiAgICAgICAgVVRDKS4iIiIKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBvZmZzZXQgPSBzZWxmLl90emluZm8udXRjb2Zmc2V0KE5vbmUpCiAgICAgICAgX2NoZWNrX3V0Y19vZmZzZXQoInV0Y29mZnNldCIsIG9mZnNldCkKICAgICAgICByZXR1cm4gb2Zmc2V0CgogICAgZGVmIHR6bmFtZShzZWxmKToKICAgICAgICAiIiJSZXR1cm4gdGhlIHRpbWV6b25lIG5hbWUuCgogICAgICAgIE5vdGUgdGhhdCB0aGUgbmFtZSBpcyAxMDAlIGluZm9ybWF0aW9uYWwgLS0gdGhlcmUncyBubyByZXF1aXJlbWVudCB0aGF0CiAgICAgICAgaXQgbWVhbiBhbnl0aGluZyBpbiBwYXJ0aWN1bGFyLiBGb3IgZXhhbXBsZSwgIkdNVCIsICJVVEMiLCAiLTUwMCIsCiAgICAgICAgIi01OjAwIiwgIkVEVCIsICJVUy9FYXN0ZXJuIiwgIkFtZXJpY2EvTmV3IFlvcmsiIGFyZSBhbGwgdmFsaWQgcmVwbGllcy4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBuYW1lID0gc2VsZi5fdHppbmZvLnR6bmFtZShOb25lKQogICAgICAgIF9jaGVja190em5hbWUobmFtZSkKICAgICAgICByZXR1cm4gbmFtZQoKICAgIGRlZiBkc3Qoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIDAgaWYgRFNUIGlzIG5vdCBpbiBlZmZlY3QsIG9yIHRoZSBEU1Qgb2Zmc2V0IChpbiBtaW51dGVzCiAgICAgICAgZWFzdHdhcmQpIGlmIERTVCBpcyBpbiBlZmZlY3QuCgogICAgICAgIFRoaXMgaXMgcHVyZWx5IGluZm9ybWF0aW9uYWw7IHRoZSBEU1Qgb2Zmc2V0IGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQgdG8KICAgICAgICB0aGUgVVRDIG9mZnNldCByZXR1cm5lZCBieSB1dGNvZmZzZXQoKSBpZiBhcHBsaWNhYmxlLCBzbyB0aGVyZSdzIG5vCiAgICAgICAgbmVlZCB0byBjb25zdWx0IGRzdCgpIHVubGVzcyB5b3UncmUgaW50ZXJlc3RlZCBpbiBkaXNwbGF5aW5nIHRoZSBEU1QKICAgICAgICBpbmZvLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIG9mZnNldCA9IHNlbGYuX3R6aW5mby5kc3QoTm9uZSkKICAgICAgICBfY2hlY2tfdXRjX29mZnNldCgiZHN0Iiwgb2Zmc2V0KQogICAgICAgIHJldHVybiBvZmZzZXQKCiAgICBkZWYgcmVwbGFjZShzZWxmLCBob3VyPU5vbmUsIG1pbnV0ZT1Ob25lLCBzZWNvbmQ9Tm9uZSwgbWljcm9zZWNvbmQ9Tm9uZSwKICAgICAgICAgICAgICAgIHR6aW5mbz1UcnVlKToKICAgICAgICAiIiJSZXR1cm4gYSBuZXcgdGltZSB3aXRoIG5ldyB2YWx1ZXMgZm9yIHRoZSBzcGVjaWZpZWQgZmllbGRzLiIiIgogICAgICAgIGlmIGhvdXIgaXMgTm9uZToKICAgICAgICAgICAgaG91ciA9IHNlbGYuaG91cgogICAgICAgIGlmIG1pbnV0ZSBpcyBOb25lOgogICAgICAgICAgICBtaW51dGUgPSBzZWxmLm1pbnV0ZQogICAgICAgIGlmIHNlY29uZCBpcyBOb25lOgogICAgICAgICAgICBzZWNvbmQgPSBzZWxmLnNlY29uZAogICAgICAgIGlmIG1pY3Jvc2Vjb25kIGlzIE5vbmU6CiAgICAgICAgICAgIG1pY3Jvc2Vjb25kID0gc2VsZi5taWNyb3NlY29uZAogICAgICAgIGlmIHR6aW5mbyBpcyBUcnVlOgogICAgICAgICAgICB0emluZm8gPSBzZWxmLnR6aW5mbwogICAgICAgIF9jaGVja190aW1lX2ZpZWxkcyhob3VyLCBtaW51dGUsIHNlY29uZCwgbWljcm9zZWNvbmQpCiAgICAgICAgX2NoZWNrX3R6aW5mb19hcmcodHppbmZvKQogICAgICAgIHJldHVybiB0aW1lKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWNyb3NlY29uZCwgdHppbmZvKQoKICAgIGRlZiBfX2Jvb2xfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLnNlY29uZCBvciBzZWxmLm1pY3Jvc2Vjb25kOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIG9mZnNldCA9IHNlbGYudXRjb2Zmc2V0KCkgb3IgdGltZWRlbHRhKDApCiAgICAgICAgcmV0dXJuIHRpbWVkZWx0YShob3Vycz1zZWxmLmhvdXIsIG1pbnV0ZXM9c2VsZi5taW51dGUpICE9IG9mZnNldAoKICAgICMgUGlja2xlIHN1cHBvcnQuCgogICAgZGVmIF9nZXRzdGF0ZShzZWxmKToKICAgICAgICB1czIsIHVzMyA9IGRpdm1vZChzZWxmLl9taWNyb3NlY29uZCwgMjU2KQogICAgICAgIHVzMSwgdXMyID0gZGl2bW9kKHVzMiwgMjU2KQogICAgICAgIGJhc2VzdGF0ZSA9IGJ5dGVzKFtzZWxmLl9ob3VyLCBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgdXMxLCB1czIsIHVzM10pCiAgICAgICAgaWYgc2VsZi5fdHppbmZvIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiAoYmFzZXN0YXRlLCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gKGJhc2VzdGF0ZSwgc2VsZi5fdHppbmZvKQoKICAgIGRlZiBfX3NldHN0YXRlKHNlbGYsIHN0cmluZywgdHppbmZvKToKICAgICAgICBpZiBsZW4oc3RyaW5nKSAhPSA2IG9yIHN0cmluZ1swXSA+PSAyNDoKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJhbiBpbnRlZ2VyIGlzIHJlcXVpcmVkIikKICAgICAgICAoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgIHVzMSwgdXMyLCB1czMpID0gc3RyaW5nCiAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQgPSAoKCh1czEgPDwgOCkgfCB1czIpIDw8IDgpIHwgdXMzCiAgICAgICAgaWYgdHppbmZvIGlzIE5vbmUgb3IgaXNpbnN0YW5jZSh0emluZm8sIF90emluZm9fY2xhc3MpOgogICAgICAgICAgICBzZWxmLl90emluZm8gPSB0emluZm8KICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImJhZCB0emluZm8gc3RhdGUgYXJnICVyIiAlIHR6aW5mbykKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHRpbWUsIHNlbGYuX2dldHN0YXRlKCkpCgpfdGltZV9jbGFzcyA9IHRpbWUgICMgc28gZnVuY3Rpb25zIHcvIGFyZ3MgbmFtZWQgInRpbWUiIGNhbiBnZXQgYXQgdGhlIGNsYXNzCgp0aW1lLm1pbiA9IHRpbWUoMCwgMCwgMCkKdGltZS5tYXggPSB0aW1lKDIzLCA1OSwgNTksIDk5OTk5OSkKdGltZS5yZXNvbHV0aW9uID0gdGltZWRlbHRhKG1pY3Jvc2Vjb25kcz0xKQoKY2xhc3MgZGF0ZXRpbWUoZGF0ZSk6CiAgICAiIiJkYXRldGltZSh5ZWFyLCBtb250aCwgZGF5WywgaG91clssIG1pbnV0ZVssIHNlY29uZFssIG1pY3Jvc2Vjb25kWyx0emluZm9dXV1dXSkKCiAgICBUaGUgeWVhciwgbW9udGggYW5kIGRheSBhcmd1bWVudHMgYXJlIHJlcXVpcmVkLiB0emluZm8gbWF5IGJlIE5vbmUsIG9yIGFuCiAgICBpbnN0YW5jZSBvZiBhIHR6aW5mbyBzdWJjbGFzcy4gVGhlIHJlbWFpbmluZyBhcmd1bWVudHMgbWF5IGJlIGludHMgb3IgbG9uZ3MuCiAgICAiIiIKCiAgICAjZml4bWUgYnJ5dGhvbgogICAgI19fc2xvdHNfXyA9IGRhdGUuX19zbG90c19fICsgKAogICAgX19zbG90c19fID0gKCdfeWVhcicsICdfbW9udGgnLCAnX2RheScsIAogICAgICAgICAgICAgICAgICdfaG91cicsJ19taW51dGUnLCdfc2Vjb25kJywnX21pY3Jvc2Vjb25kJywnX3R6aW5mbycpCiAgICBkZWYgX19uZXdfXyhjbHMsIHllYXIsIG1vbnRoPU5vbmUsIGRheT1Ob25lLCBob3VyPTAsIG1pbnV0ZT0wLCBzZWNvbmQ9MCwKICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kPTAsIHR6aW5mbz1Ob25lKToKICAgICAgICAgICAgIAogICAgICAgIGlmIGlzaW5zdGFuY2UoeWVhciwgYnl0ZXMpIGFuZCBsZW4oeWVhcikgPT0gMTA6CiAgICAgICAgICAgICMgUGlja2xlIHN1cHBvcnQKICAgICAgICAgICAgc2VsZiA9IGRhdGUuX19uZXdfXyhjbHMsIHllYXJbOjRdKQogICAgICAgICAgICBzZWxmLl9fc2V0c3RhdGUoeWVhciwgbW9udGgpCiAgICAgICAgICAgIHJldHVybiBzZWxmCiAgICAgICAgX2NoZWNrX3R6aW5mb19hcmcodHppbmZvKQogICAgICAgIF9jaGVja190aW1lX2ZpZWxkcyhob3VyLCBtaW51dGUsIHNlY29uZCwgbWljcm9zZWNvbmQpCiAgICAgICAgI3ByaW50KGRpcihkYXRlKSkKICAgICAgICBzZWxmID0gZGF0ZS5fX25ld19fKGNscywgeWVhciwgbW9udGgsIGRheSkKICAgICAgICBzZWxmLl9ob3VyID0gaG91cgogICAgICAgIHNlbGYuX21pbnV0ZSA9IG1pbnV0ZQogICAgICAgIHNlbGYuX3NlY29uZCA9IHNlY29uZAogICAgICAgIHNlbGYuX21pY3Jvc2Vjb25kID0gbWljcm9zZWNvbmQKICAgICAgICBzZWxmLl90emluZm8gPSB0emluZm8KICAgICAgICByZXR1cm4gc2VsZgoKICAgICMgUmVhZC1vbmx5IGZpZWxkIGFjY2Vzc29ycwogICAgQHByb3BlcnR5CiAgICBkZWYgaG91cihzZWxmKToKICAgICAgICAiIiJob3VyICgwLTIzKSIiIgogICAgICAgIHJldHVybiBzZWxmLl9ob3VyCgogICAgQHByb3BlcnR5CiAgICBkZWYgbWludXRlKHNlbGYpOgogICAgICAgICIiIm1pbnV0ZSAoMC01OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5fbWludXRlCgogICAgQHByb3BlcnR5CiAgICBkZWYgc2Vjb25kKHNlbGYpOgogICAgICAgICIiInNlY29uZCAoMC01OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5fc2Vjb25kCgogICAgQHByb3BlcnR5CiAgICBkZWYgbWljcm9zZWNvbmQoc2VsZik6CiAgICAgICAgIiIibWljcm9zZWNvbmQgKDAtOTk5OTk5KSIiIgogICAgICAgIHJldHVybiBzZWxmLl9taWNyb3NlY29uZAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHR6aW5mbyhzZWxmKToKICAgICAgICAiIiJ0aW1lem9uZSBpbmZvIG9iamVjdCIiIgogICAgICAgIHJldHVybiBzZWxmLl90emluZm8KCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tdGltZXN0YW1wKGNscywgdCwgdHo9Tm9uZSk6CiAgICAgICAgIiIiQ29uc3RydWN0IGEgZGF0ZXRpbWUgZnJvbSBhIFBPU0lYIHRpbWVzdGFtcCAobGlrZSB0aW1lLnRpbWUoKSkuCgogICAgICAgIEEgdGltZXpvbmUgaW5mbyBvYmplY3QgbWF5IGJlIHBhc3NlZCBpbiBhcyB3ZWxsLgogICAgICAgICIiIgogICAgICAgIF9jaGVja190emluZm9fYXJnKHR6KQoKICAgICAgICBjb252ZXJ0ZXIgPSBfdGltZS5sb2NhbHRpbWUgaWYgdHogaXMgTm9uZSBlbHNlIF90aW1lLmdtdGltZQoKICAgICAgICB0LCBmcmFjID0gZGl2bW9kKHQsIDEuMCkKICAgICAgICB1cyA9IHJvdW5kKGZyYWMgKiAxZTYpCgogICAgICAgICMgSWYgdGltZXN0YW1wIGlzIGxlc3MgdGhhbiBvbmUgbWljcm9zZWNvbmQgc21hbGxlciB0aGFuIGEKICAgICAgICAjIGZ1bGwgc2Vjb25kLCB1cyBjYW4gYmUgcm91bmRlZCB1cCB0byAxMDAwMDAwLiAgSW4gdGhpcyBjYXNlLAogICAgICAgICMgcm9sbCBvdmVyIHRvIHNlY29uZHMsIG90aGVyd2lzZSwgVmFsdWVFcnJvciBpcyByYWlzZWQKICAgICAgICAjIGJ5IHRoZSBjb25zdHJ1Y3Rvci4KICAgICAgICBpZiB1cyA9PSAxMDAwMDAwOgogICAgICAgICAgICB0ICs9IDEKICAgICAgICAgICAgdXMgPSAwCiAgICAgICAgeSwgbSwgZCwgaGgsIG1tLCBzcywgd2Vla2RheSwgamRheSwgZHN0ID0gY29udmVydGVyKHQpCiAgICAgICAgc3MgPSBtaW4oc3MsIDU5KSAgICAjIGNsYW1wIG91dCBsZWFwIHNlY29uZHMgaWYgdGhlIHBsYXRmb3JtIGhhcyB0aGVtCiAgICAgICAgcmVzdWx0ID0gY2xzKHksIG0sIGQsIGhoLCBtbSwgc3MsIHVzLCB0eikKICAgICAgICBpZiB0eiBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmVzdWx0ID0gdHouZnJvbXV0YyhyZXN1bHQpCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHV0Y2Zyb210aW1lc3RhbXAoY2xzLCB0KToKICAgICAgICAiQ29uc3RydWN0IGEgVVRDIGRhdGV0aW1lIGZyb20gYSBQT1NJWCB0aW1lc3RhbXAgKGxpa2UgdGltZS50aW1lKCkpLiIKICAgICAgICB0LCBmcmFjID0gZGl2bW9kKHQsIDEuMCkKICAgICAgICB1cyA9IHJvdW5kKGZyYWMgKiAxZTYpCgogICAgICAgICMgSWYgdGltZXN0YW1wIGlzIGxlc3MgdGhhbiBvbmUgbWljcm9zZWNvbmQgc21hbGxlciB0aGFuIGEKICAgICAgICAjIGZ1bGwgc2Vjb25kLCB1cyBjYW4gYmUgcm91bmRlZCB1cCB0byAxMDAwMDAwLiAgSW4gdGhpcyBjYXNlLAogICAgICAgICMgcm9sbCBvdmVyIHRvIHNlY29uZHMsIG90aGVyd2lzZSwgVmFsdWVFcnJvciBpcyByYWlzZWQKICAgICAgICAjIGJ5IHRoZSBjb25zdHJ1Y3Rvci4KICAgICAgICBpZiB1cyA9PSAxMDAwMDAwOgogICAgICAgICAgICB0ICs9IDEKICAgICAgICAgICAgdXMgPSAwCiAgICAgICAgeSwgbSwgZCwgaGgsIG1tLCBzcywgd2Vla2RheSwgamRheSwgZHN0ID0gX3RpbWUuZ210aW1lKHQpCiAgICAgICAgc3MgPSBtaW4oc3MsIDU5KSAgICAjIGNsYW1wIG91dCBsZWFwIHNlY29uZHMgaWYgdGhlIHBsYXRmb3JtIGhhcyB0aGVtCiAgICAgICAgcmV0dXJuIGNscyh5LCBtLCBkLCBoaCwgbW0sIHNzLCB1cykKCiAgICAjIFhYWCBUaGlzIGlzIHN1cHBvc2VkIHRvIGRvIGJldHRlciB0aGFuIHdlICpjYW4qIGRvIGJ5IHVzaW5nIHRpbWUudGltZSgpLAogICAgIyBYWFggaWYgdGhlIHBsYXRmb3JtIHN1cHBvcnRzIGEgbW9yZSBhY2N1cmF0ZSB3YXkuICBUaGUgQyBpbXBsZW1lbnRhdGlvbgogICAgIyBYWFggdXNlcyBnZXR0aW1lb2ZkYXkgb24gcGxhdGZvcm1zIHRoYXQgaGF2ZSBpdCwgYnV0IHRoYXQgaXNuJ3QKICAgICMgWFhYIGF2YWlsYWJsZSBmcm9tIFB5dGhvbi4gIFNvIG5vdygpIG1heSByZXR1cm4gZGlmZmVyZW50IHJlc3VsdHMKICAgICMgWFhYIGFjcm9zcyB0aGUgaW1wbGVtZW50YXRpb25zLgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgbm93KGNscywgdHo9Tm9uZSk6CiAgICAgICAgIkNvbnN0cnVjdCBhIGRhdGV0aW1lIGZyb20gdGltZS50aW1lKCkgYW5kIG9wdGlvbmFsIHRpbWUgem9uZSBpbmZvLiIKICAgICAgICB0ID0gX3RpbWUudGltZSgpCiAgICAgICAgcmV0dXJuIGNscy5mcm9tdGltZXN0YW1wKHQsIHR6KQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHV0Y25vdyhjbHMpOgogICAgICAgICJDb25zdHJ1Y3QgYSBVVEMgZGF0ZXRpbWUgZnJvbSB0aW1lLnRpbWUoKS4iCiAgICAgICAgdCA9IF90aW1lLnRpbWUoKQogICAgICAgIHJldHVybiBjbHMudXRjZnJvbXRpbWVzdGFtcCh0KQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGNvbWJpbmUoY2xzLCBkYXRlLCB0aW1lKToKICAgICAgICAiQ29uc3RydWN0IGEgZGF0ZXRpbWUgZnJvbSBhIGdpdmVuIGRhdGUgYW5kIGEgZ2l2ZW4gdGltZS4iCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZGF0ZSwgX2RhdGVfY2xhc3MpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImRhdGUgYXJndW1lbnQgbXVzdCBiZSBhIGRhdGUgaW5zdGFuY2UiKQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHRpbWUsIF90aW1lX2NsYXNzKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ0aW1lIGFyZ3VtZW50IG11c3QgYmUgYSB0aW1lIGluc3RhbmNlIikKICAgICAgICByZXR1cm4gY2xzKGRhdGUueWVhciwgZGF0ZS5tb250aCwgZGF0ZS5kYXksCiAgICAgICAgICAgICAgICAgICB0aW1lLmhvdXIsIHRpbWUubWludXRlLCB0aW1lLnNlY29uZCwgdGltZS5taWNyb3NlY29uZCwKICAgICAgICAgICAgICAgICAgIHRpbWUudHppbmZvKQoKICAgIGRlZiB0aW1ldHVwbGUoc2VsZik6CiAgICAgICAgIlJldHVybiBsb2NhbCB0aW1lIHR1cGxlIGNvbXBhdGlibGUgd2l0aCB0aW1lLmxvY2FsdGltZSgpLiIKICAgICAgICBkc3QgPSBzZWxmLmRzdCgpCiAgICAgICAgaWYgZHN0IGlzIE5vbmU6CiAgICAgICAgICAgIGRzdCA9IC0xCiAgICAgICAgZWxpZiBkc3Q6CiAgICAgICAgICAgIGRzdCA9IDEKICAgICAgICBlbHNlOgogICAgICAgICAgICBkc3QgPSAwCiAgICAgICAgcmV0dXJuIF9idWlsZF9zdHJ1Y3RfdGltZShzZWxmLnllYXIsIHNlbGYubW9udGgsIHNlbGYuZGF5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyLCBzZWxmLm1pbnV0ZSwgc2VsZi5zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3QpCgogICAgZGVmIHV0Y3RpbWV0dXBsZShzZWxmKToKICAgICAgICAiUmV0dXJuIFVUQyB0aW1lIHR1cGxlIGNvbXBhdGlibGUgd2l0aCB0aW1lLmdtdGltZSgpLiIKICAgICAgICBvZmZzZXQgPSBzZWxmLnV0Y29mZnNldCgpCiAgICAgICAgaWYgb2Zmc2V0OgogICAgICAgICAgICBzZWxmIC09IG9mZnNldAogICAgICAgIHksIG0sIGQgPSBzZWxmLnllYXIsIHNlbGYubW9udGgsIHNlbGYuZGF5CiAgICAgICAgaGgsIG1tLCBzcyA9IHNlbGYuaG91ciwgc2VsZi5taW51dGUsIHNlbGYuc2Vjb25kCiAgICAgICAgcmV0dXJuIF9idWlsZF9zdHJ1Y3RfdGltZSh5LCBtLCBkLCBoaCwgbW0sIHNzLCAwKQoKICAgIGRlZiBkYXRlKHNlbGYpOgogICAgICAgICJSZXR1cm4gdGhlIGRhdGUgcGFydC4iCiAgICAgICAgcmV0dXJuIGRhdGUoc2VsZi5feWVhciwgc2VsZi5fbW9udGgsIHNlbGYuX2RheSkKCiAgICBkZWYgdGltZShzZWxmKToKICAgICAgICAiUmV0dXJuIHRoZSB0aW1lIHBhcnQsIHdpdGggdHppbmZvIE5vbmUuIgogICAgICAgIHJldHVybiB0aW1lKHNlbGYuaG91ciwgc2VsZi5taW51dGUsIHNlbGYuc2Vjb25kLCBzZWxmLm1pY3Jvc2Vjb25kKQoKICAgIGRlZiB0aW1ldHooc2VsZik6CiAgICAgICAgIlJldHVybiB0aGUgdGltZSBwYXJ0LCB3aXRoIHNhbWUgdHppbmZvLiIKICAgICAgICByZXR1cm4gdGltZShzZWxmLmhvdXIsIHNlbGYubWludXRlLCBzZWxmLnNlY29uZCwgc2VsZi5taWNyb3NlY29uZCwKICAgICAgICAgICAgICAgICAgICBzZWxmLl90emluZm8pCgogICAgZGVmIHJlcGxhY2Uoc2VsZiwgeWVhcj1Ob25lLCBtb250aD1Ob25lLCBkYXk9Tm9uZSwgaG91cj1Ob25lLAogICAgICAgICAgICAgICAgbWludXRlPU5vbmUsIHNlY29uZD1Ob25lLCBtaWNyb3NlY29uZD1Ob25lLCB0emluZm89VHJ1ZSk6CiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IGRhdGV0aW1lIHdpdGggbmV3IHZhbHVlcyBmb3IgdGhlIHNwZWNpZmllZCBmaWVsZHMuIiIiCiAgICAgICAgaWYgeWVhciBpcyBOb25lOgogICAgICAgICAgICB5ZWFyID0gc2VsZi55ZWFyCiAgICAgICAgaWYgbW9udGggaXMgTm9uZToKICAgICAgICAgICAgbW9udGggPSBzZWxmLm1vbnRoCiAgICAgICAgaWYgZGF5IGlzIE5vbmU6CiAgICAgICAgICAgIGRheSA9IHNlbGYuZGF5CiAgICAgICAgaWYgaG91ciBpcyBOb25lOgogICAgICAgICAgICBob3VyID0gc2VsZi5ob3VyCiAgICAgICAgaWYgbWludXRlIGlzIE5vbmU6CiAgICAgICAgICAgIG1pbnV0ZSA9IHNlbGYubWludXRlCiAgICAgICAgaWYgc2Vjb25kIGlzIE5vbmU6CiAgICAgICAgICAgIHNlY29uZCA9IHNlbGYuc2Vjb25kCiAgICAgICAgaWYgbWljcm9zZWNvbmQgaXMgTm9uZToKICAgICAgICAgICAgbWljcm9zZWNvbmQgPSBzZWxmLm1pY3Jvc2Vjb25kCiAgICAgICAgaWYgdHppbmZvIGlzIFRydWU6CiAgICAgICAgICAgIHR6aW5mbyA9IHNlbGYudHppbmZvCiAgICAgICAgX2NoZWNrX2RhdGVfZmllbGRzKHllYXIsIG1vbnRoLCBkYXkpCiAgICAgICAgX2NoZWNrX3RpbWVfZmllbGRzKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWNyb3NlY29uZCkKICAgICAgICBfY2hlY2tfdHppbmZvX2FyZyh0emluZm8pCiAgICAgICAgcmV0dXJuIGRhdGV0aW1lKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kLCB0emluZm8pCgogICAgZGVmIGFzdGltZXpvbmUoc2VsZiwgdHopOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHR6LCB0emluZm8pOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInR6IGFyZ3VtZW50IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgdHppbmZvIikKCiAgICAgICAgbXl0eiA9IHNlbGYudHppbmZvCiAgICAgICAgaWYgbXl0eiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJhc3RpbWV6b25lKCkgcmVxdWlyZXMgYW4gYXdhcmUgZGF0ZXRpbWUiKQoKICAgICAgICBpZiB0eiBpcyBteXR6OgogICAgICAgICAgICByZXR1cm4gc2VsZgoKICAgICAgICAjIENvbnZlcnQgc2VsZiB0byBVVEMsIGFuZCBhdHRhY2ggdGhlIG5ldyB0aW1lIHpvbmUgb2JqZWN0LgogICAgICAgIG15b2Zmc2V0ID0gc2VsZi51dGNvZmZzZXQoKQogICAgICAgIGlmIG15b2Zmc2V0IGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImFzdGltZXpvbmUoKSByZXF1aXJlcyBhbiBhd2FyZSBkYXRldGltZSIpCiAgICAgICAgdXRjID0gKHNlbGYgLSBteW9mZnNldCkucmVwbGFjZSh0emluZm89dHopCgogICAgICAgICMgQ29udmVydCBmcm9tIFVUQyB0byB0eidzIGxvY2FsIHRpbWUuCiAgICAgICAgcmV0dXJuIHR6LmZyb211dGModXRjKQoKICAgICMgV2F5cyB0byBwcm9kdWNlIGEgc3RyaW5nLgoKICAgIGRlZiBjdGltZShzZWxmKToKICAgICAgICAiUmV0dXJuIGN0aW1lKCkgc3R5bGUgc3RyaW5nLiIKICAgICAgICB3ZWVrZGF5ID0gc2VsZi50b29yZGluYWwoKSAlIDcgb3IgNwogICAgICAgIHJldHVybiAiJXMgJXMgJTJkICUwMmQ6JTAyZDolMDJkICUwNGQiICUgKAogICAgICAgICAgICBfREFZTkFNRVNbd2Vla2RheV0sCiAgICAgICAgICAgIF9NT05USE5BTUVTW3NlbGYuX21vbnRoXSwKICAgICAgICAgICAgc2VsZi5fZGF5LAogICAgICAgICAgICBzZWxmLl9ob3VyLCBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwKICAgICAgICAgICAgc2VsZi5feWVhcikKCiAgICBkZWYgaXNvZm9ybWF0KHNlbGYsIHNlcD0nVCcpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZSBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIElTTy4KCiAgICAgICAgVGhpcyBpcyAnWVlZWS1NTS1ERCBISDpNTTpTUy5tbW1tbW0nLCBvciAnWVlZWS1NTS1ERCBISDpNTTpTUycgaWYKICAgICAgICBzZWxmLm1pY3Jvc2Vjb25kID09IDAuCgogICAgICAgIElmIHNlbGYudHppbmZvIGlzIG5vdCBOb25lLCB0aGUgVVRDIG9mZnNldCBpcyBhbHNvIGF0dGFjaGVkLCBnaXZpbmcKICAgICAgICAnWVlZWS1NTS1ERCBISDpNTTpTUy5tbW1tbW0rSEg6TU0nIG9yICdZWVlZLU1NLUREIEhIOk1NOlNTK0hIOk1NJy4KCiAgICAgICAgT3B0aW9uYWwgYXJndW1lbnQgc2VwIHNwZWNpZmllcyB0aGUgc2VwYXJhdG9yIGJldHdlZW4gZGF0ZSBhbmQKICAgICAgICB0aW1lLCBkZWZhdWx0ICdUJy4KICAgICAgICAiIiIKICAgICAgICBzID0gKCIlMDRkLSUwMmQtJTAyZCVjIiAlIChzZWxmLl95ZWFyLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwKSArCiAgICAgICAgICAgICAgICBfZm9ybWF0X3RpbWUoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpKQogICAgICAgIG9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBpZiBvZmYgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIG9mZi5kYXlzIDwgMDoKICAgICAgICAgICAgICAgIHNpZ24gPSAiLSIKICAgICAgICAgICAgICAgIG9mZiA9IC1vZmYKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNpZ24gPSAiKyIKICAgICAgICAgICAgaGgsIG1tID0gZGl2bW9kKG9mZiwgdGltZWRlbHRhKGhvdXJzPTEpKQogICAgICAgICAgICBhc3NlcnQgbm90IG1tICUgdGltZWRlbHRhKG1pbnV0ZXM9MSksICJ3aG9sZSBtaW51dGUiCiAgICAgICAgICAgIG1tIC8vPSB0aW1lZGVsdGEobWludXRlcz0xKQogICAgICAgICAgICBzICs9ICIlcyUwMmQ6JTAyZCIgJSAoc2lnbiwgaGgsIG1tKQogICAgICAgIHJldHVybiBzCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgICIiIkNvbnZlcnQgdG8gZm9ybWFsIHN0cmluZywgZm9yIHJlcHIoKS4iIiIKICAgICAgICBMID0gW3NlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXksICMgVGhlc2UgYXJlIG5ldmVyIHplcm8KICAgICAgICAgICAgIHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgc2VsZi5fc2Vjb25kLCBzZWxmLl9taWNyb3NlY29uZF0KICAgICAgICBpZiBMWy0xXSA9PSAwOgogICAgICAgICAgICBkZWwgTFstMV0KICAgICAgICBpZiBMWy0xXSA9PSAwOgogICAgICAgICAgICBkZWwgTFstMV0KICAgICAgICBzID0gIiwgIi5qb2luKG1hcChzdHIsIEwpKQogICAgICAgIHMgPSAiJXMoJXMpIiAlICgnZGF0ZXRpbWUuJyArIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBzKQogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBub3QgTm9uZToKICAgICAgICAgICAgYXNzZXJ0IHNbLTE6XSA9PSAiKSIKICAgICAgICAgICAgcyA9IHNbOi0xXSArICIsIHR6aW5mbz0lciIgJSBzZWxmLl90emluZm8gKyAiKSIKICAgICAgICByZXR1cm4gcwoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgICJDb252ZXJ0IHRvIHN0cmluZywgZm9yIHN0cigpLiIKICAgICAgICByZXR1cm4gc2VsZi5pc29mb3JtYXQoc2VwPScgJykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBzdHJwdGltZShjbHMsIGRhdGVfc3RyaW5nLCBmb3JtYXQpOgogICAgICAgICdzdHJpbmcsIGZvcm1hdCAtPiBuZXcgZGF0ZXRpbWUgcGFyc2VkIGZyb20gYSBzdHJpbmcgKGxpa2UgdGltZS5zdHJwdGltZSgpKS4nCiAgICAgICAgaW1wb3J0IF9zdHJwdGltZQogICAgICAgIHJldHVybiBfc3RycHRpbWUuX3N0cnB0aW1lX2RhdGV0aW1lKGNscywgZGF0ZV9zdHJpbmcsIGZvcm1hdCkKCiAgICBkZWYgdXRjb2Zmc2V0KHNlbGYpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZXpvbmUgb2Zmc2V0IGluIG1pbnV0ZXMgZWFzdCBvZiBVVEMgKG5lZ2F0aXZlIHdlc3Qgb2YKICAgICAgICBVVEMpLiIiIgogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIG9mZnNldCA9IHNlbGYuX3R6aW5mby51dGNvZmZzZXQoc2VsZikKICAgICAgICBfY2hlY2tfdXRjX29mZnNldCgidXRjb2Zmc2V0Iiwgb2Zmc2V0KQogICAgICAgIHJldHVybiBvZmZzZXQKCiAgICBkZWYgdHpuYW1lKHNlbGYpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZXpvbmUgbmFtZS4KCiAgICAgICAgTm90ZSB0aGF0IHRoZSBuYW1lIGlzIDEwMCUgaW5mb3JtYXRpb25hbCAtLSB0aGVyZSdzIG5vIHJlcXVpcmVtZW50IHRoYXQKICAgICAgICBpdCBtZWFuIGFueXRoaW5nIGluIHBhcnRpY3VsYXIuIEZvciBleGFtcGxlLCAiR01UIiwgIlVUQyIsICItNTAwIiwKICAgICAgICAiLTU6MDAiLCAiRURUIiwgIlVTL0Vhc3Rlcm4iLCAiQW1lcmljYS9OZXcgWW9yayIgYXJlIGFsbCB2YWxpZCByZXBsaWVzLgogICAgICAgICIiIgogICAgICAgIG5hbWUgPSBfY2FsbF90emluZm9fbWV0aG9kKHNlbGYuX3R6aW5mbywgInR6bmFtZSIsIHNlbGYpCiAgICAgICAgX2NoZWNrX3R6bmFtZShuYW1lKQogICAgICAgIHJldHVybiBuYW1lCgogICAgZGVmIGRzdChzZWxmKToKICAgICAgICAiIiJSZXR1cm4gMCBpZiBEU1QgaXMgbm90IGluIGVmZmVjdCwgb3IgdGhlIERTVCBvZmZzZXQgKGluIG1pbnV0ZXMKICAgICAgICBlYXN0d2FyZCkgaWYgRFNUIGlzIGluIGVmZmVjdC4KCiAgICAgICAgVGhpcyBpcyBwdXJlbHkgaW5mb3JtYXRpb25hbDsgdGhlIERTVCBvZmZzZXQgaGFzIGFscmVhZHkgYmVlbiBhZGRlZCB0bwogICAgICAgIHRoZSBVVEMgb2Zmc2V0IHJldHVybmVkIGJ5IHV0Y29mZnNldCgpIGlmIGFwcGxpY2FibGUsIHNvIHRoZXJlJ3Mgbm8KICAgICAgICBuZWVkIHRvIGNvbnN1bHQgZHN0KCkgdW5sZXNzIHlvdSdyZSBpbnRlcmVzdGVkIGluIGRpc3BsYXlpbmcgdGhlIERTVAogICAgICAgIGluZm8uCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VsZi5fdHppbmZvIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgb2Zmc2V0ID0gc2VsZi5fdHppbmZvLmRzdChzZWxmKQogICAgICAgIF9jaGVja191dGNfb2Zmc2V0KCJkc3QiLCBvZmZzZXQpCiAgICAgICAgcmV0dXJuIG9mZnNldAoKICAgICMgQ29tcGFyaXNvbnMgb2YgZGF0ZXRpbWUgb2JqZWN0cyB3aXRoIG90aGVyLgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPT0gMAogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpICE9IDAKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDw9IDAKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPCAwCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgZGF0ZSk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID49IDAKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPiAwCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgZGF0ZSk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX2NtcChzZWxmLCBvdGhlcik6CiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKQogICAgICAgIG15dHogPSBzZWxmLl90emluZm8KICAgICAgICBvdHR6ID0gb3RoZXIuX3R6aW5mbwogICAgICAgIG15b2ZmID0gb3RvZmYgPSBOb25lCgogICAgICAgIGlmIG15dHogaXMgb3R0ejoKICAgICAgICAgICAgYmFzZV9jb21wYXJlID0gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIG15dHogaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBteW9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICAgICAgaWYgb3R0eiBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIG90b2ZmID0gb3RoZXIudXRjb2Zmc2V0KCkKICAgICAgICAgICAgYmFzZV9jb21wYXJlID0gbXlvZmYgPT0gb3RvZmYKCiAgICAgICAgaWYgYmFzZV9jb21wYXJlOgogICAgICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICAgICAjcmV0dXJuIF9jbXAoKHNlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXksCiAgICAgICAgICAgICMgICAgICAgICAgICAgc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICMgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpLAogICAgICAgICAgICAjICAgICAgICAgICAob3RoZXIuX3llYXIsIG90aGVyLl9tb250aCwgb3RoZXIuX2RheSwKICAgICAgICAgICAgIyAgICAgICAgICAgIG90aGVyLl9ob3VyLCBvdGhlci5fbWludXRlLCBvdGhlci5fc2Vjb25kLAogICAgICAgICAgICAjICAgICAgICAgICAgb3RoZXIuX21pY3Jvc2Vjb25kKSkKICAgICAgICAgICAgcmV0dXJuIF90dXBsZV9jbXAoKHNlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXksCiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9ob3VyLCBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwKICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX21pY3Jvc2Vjb25kKSwKICAgICAgICAgICAgICAgICAgICAgICAob3RoZXIuX3llYXIsIG90aGVyLl9tb250aCwgb3RoZXIuX2RheSwKICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXIuX2hvdXIsIG90aGVyLl9taW51dGUsIG90aGVyLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyLl9taWNyb3NlY29uZCkpCiAgICAgICAgaWYgbXlvZmYgaXMgTm9uZSBvciBvdG9mZiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhbm5vdCBjb21wYXJlIG5haXZlIGFuZCBhd2FyZSBkYXRldGltZXMiKQogICAgICAgICMgWFhYIFdoYXQgZm9sbG93cyBjb3VsZCBiZSBkb25lIG1vcmUgZWZmaWNpZW50bHkuLi4KICAgICAgICBkaWZmID0gc2VsZiAtIG90aGVyICAgICAjIHRoaXMgd2lsbCB0YWtlIG9mZnNldHMgaW50byBhY2NvdW50CiAgICAgICAgaWYgZGlmZi5kYXlzIDwgMDoKICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgcmV0dXJuIGRpZmYgYW5kIDEgb3IgMAoKICAgIGRlZiBfX2FkZF9fKHNlbGYsIG90aGVyKToKICAgICAgICAiQWRkIGEgZGF0ZXRpbWUgYW5kIGEgdGltZWRlbHRhLiIKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZGVsdGEgPSB0aW1lZGVsdGEoc2VsZi50b29yZGluYWwoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBob3Vycz1zZWxmLl9ob3VyLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXM9c2VsZi5fbWludXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM9c2VsZi5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kcz1zZWxmLl9taWNyb3NlY29uZCkKICAgICAgICBkZWx0YSArPSBvdGhlcgogICAgICAgIGhvdXIsIHJlbSA9IGRpdm1vZChkZWx0YS5zZWNvbmRzLCAzNjAwKQogICAgICAgIG1pbnV0ZSwgc2Vjb25kID0gZGl2bW9kKHJlbSwgNjApCiAgICAgICAgaWYgMCA8IGRlbHRhLmRheXMgPD0gX01BWE9SRElOQUw6CiAgICAgICAgICAgIHJldHVybiBkYXRldGltZS5jb21iaW5lKGRhdGUuZnJvbW9yZGluYWwoZGVsdGEuZGF5cyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUoaG91ciwgbWludXRlLCBzZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGEubWljcm9zZWNvbmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR6aW5mbz1zZWxmLl90emluZm8pKQogICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoInJlc3VsdCBvdXQgb2YgcmFuZ2UiKQoKICAgIF9fcmFkZF9fID0gX19hZGRfXwoKICAgIGRlZiBfX3N1Yl9fKHNlbGYsIG90aGVyKToKICAgICAgICAiU3VidHJhY3QgdHdvIGRhdGV0aW1lcywgb3IgYSBkYXRldGltZSBhbmQgYSB0aW1lZGVsdGEuIgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZiArIC1vdGhlcgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICAgICAgZGF5czEgPSBzZWxmLnRvb3JkaW5hbCgpCiAgICAgICAgZGF5czIgPSBvdGhlci50b29yZGluYWwoKQogICAgICAgIHNlY3MxID0gc2VsZi5fc2Vjb25kICsgc2VsZi5fbWludXRlICogNjAgKyBzZWxmLl9ob3VyICogMzYwMAogICAgICAgIHNlY3MyID0gb3RoZXIuX3NlY29uZCArIG90aGVyLl9taW51dGUgKiA2MCArIG90aGVyLl9ob3VyICogMzYwMAogICAgICAgIGJhc2UgPSB0aW1lZGVsdGEoZGF5czEgLSBkYXlzMiwKICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3MxIC0gc2VjczIsCiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZCAtIG90aGVyLl9taWNyb3NlY29uZCkKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgb3RoZXIuX3R6aW5mbzoKICAgICAgICAgICAgcmV0dXJuIGJhc2UKICAgICAgICBteW9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBvdG9mZiA9IG90aGVyLnV0Y29mZnNldCgpCiAgICAgICAgaWYgbXlvZmYgPT0gb3RvZmY6CiAgICAgICAgICAgIHJldHVybiBiYXNlCiAgICAgICAgaWYgbXlvZmYgaXMgTm9uZSBvciBvdG9mZiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhbm5vdCBtaXggbmFpdmUgYW5kIHRpbWV6b25lLWF3YXJlIHRpbWUiKQogICAgICAgIHJldHVybiBiYXNlICsgb3RvZmYgLSBteW9mZgoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICB0em9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBpZiB0em9mZiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gaGFzaChzZWxmLl9nZXRzdGF0ZSgpWzBdKQogICAgICAgIGRheXMgPSBfeW1kMm9yZChzZWxmLnllYXIsIHNlbGYubW9udGgsIHNlbGYuZGF5KQogICAgICAgIHNlY29uZHMgPSBzZWxmLmhvdXIgKiAzNjAwICsgc2VsZi5taW51dGUgKiA2MCArIHNlbGYuc2Vjb25kCiAgICAgICAgcmV0dXJuIGhhc2godGltZWRlbHRhKGRheXMsIHNlY29uZHMsIHNlbGYubWljcm9zZWNvbmQpIC0gdHpvZmYpCgogICAgIyBQaWNrbGUgc3VwcG9ydC4KCiAgICBkZWYgX2dldHN0YXRlKHNlbGYpOgogICAgICAgIHloaSwgeWxvID0gZGl2bW9kKHNlbGYuX3llYXIsIDI1NikKICAgICAgICB1czIsIHVzMyA9IGRpdm1vZChzZWxmLl9taWNyb3NlY29uZCwgMjU2KQogICAgICAgIHVzMSwgdXMyID0gZGl2bW9kKHVzMiwgMjU2KQogICAgICAgIGJhc2VzdGF0ZSA9IGJ5dGVzKFt5aGksIHlsbywgc2VsZi5fbW9udGgsIHNlbGYuX2RheSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzMSwgdXMyLCB1czNdKQogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKGJhc2VzdGF0ZSwpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIChiYXNlc3RhdGUsIHNlbGYuX3R6aW5mbykKCiAgICBkZWYgX19zZXRzdGF0ZShzZWxmLCBzdHJpbmcsIHR6aW5mbyk6CiAgICAgICAgKHloaSwgeWxvLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5LCBzZWxmLl9ob3VyLAogICAgICAgICBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwgdXMxLCB1czIsIHVzMykgPSBzdHJpbmcKICAgICAgICBzZWxmLl95ZWFyID0geWhpICogMjU2ICsgeWxvCiAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQgPSAoKCh1czEgPDwgOCkgfCB1czIpIDw8IDgpIHwgdXMzCiAgICAgICAgaWYgdHppbmZvIGlzIE5vbmUgb3IgaXNpbnN0YW5jZSh0emluZm8sIF90emluZm9fY2xhc3MpOgogICAgICAgICAgICBzZWxmLl90emluZm8gPSB0emluZm8KICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImJhZCB0emluZm8gc3RhdGUgYXJnICVyIiAlIHR6aW5mbykKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCBzZWxmLl9nZXRzdGF0ZSgpKQoKI2ZpeG1lIGJyeXRob24KI2RhdGV0aW1lLm1pbiA9IGRhdGV0aW1lKDEsIDEsIDEpCiNkYXRldGltZS5tYXggPSBkYXRldGltZSg5OTk5LCAxMiwgMzEsIDIzLCA1OSwgNTksIDk5OTk5OSkKI2RhdGV0aW1lLnJlc29sdXRpb24gPSB0aW1lZGVsdGEobWljcm9zZWNvbmRzPTEpCgoKZGVmIF9pc293ZWVrMW1vbmRheSh5ZWFyKToKICAgICMgSGVscGVyIHRvIGNhbGN1bGF0ZSB0aGUgZGF5IG51bWJlciBvZiB0aGUgTW9uZGF5IHN0YXJ0aW5nIHdlZWsgMQogICAgIyBYWFggVGhpcyBjb3VsZCBiZSBkb25lIG1vcmUgZWZmaWNpZW50bHkKICAgIFRIVVJTREFZID0gMwogICAgZmlyc3RkYXkgPSBfeW1kMm9yZCh5ZWFyLCAxLCAxKQogICAgZmlyc3R3ZWVrZGF5ID0gKGZpcnN0ZGF5ICsgNikgJSA3ICMgU2VlIHdlZWtkYXkoKSBhYm92ZQogICAgd2VlazFtb25kYXkgPSBmaXJzdGRheSAtIGZpcnN0d2Vla2RheQogICAgaWYgZmlyc3R3ZWVrZGF5ID4gVEhVUlNEQVk6CiAgICAgICAgd2VlazFtb25kYXkgKz0gNwogICAgcmV0dXJuIHdlZWsxbW9uZGF5CgpjbGFzcyB0aW1lem9uZSh0emluZm8pOgogICAgX19zbG90c19fID0gJ19vZmZzZXQnLCAnX25hbWUnCgogICAgIyBTZW50aW5lbCB2YWx1ZSB0byBkaXNhbGxvdyBOb25lCiAgICBfT21pdHRlZCA9IG9iamVjdCgpCiAgICAjZml4bWUgYnJ5dGhvbgogICAgI2RlZiBfX25ld19fKGNscywgb2Zmc2V0LCBuYW1lPV9PbWl0dGVkKToKICAgIGRlZiBfX25ld19fKGNscywgb2Zmc2V0LCBuYW1lPU5vbmUpOgogICAgICAgIGlmIG5hbWUgaXMgTm9uZToKICAgICAgICAgICBuYW1lPV9PbWl0dGVkCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob2Zmc2V0LCB0aW1lZGVsdGEpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm9mZnNldCBtdXN0IGJlIGEgdGltZWRlbHRhIikKICAgICAgICBpZiBuYW1lIGlzIGNscy5fT21pdHRlZDoKICAgICAgICAgICAgaWYgbm90IG9mZnNldDoKICAgICAgICAgICAgICAgIHJldHVybiBjbHMudXRjCiAgICAgICAgICAgIG5hbWUgPSBOb25lCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShuYW1lLCBzdHIpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm5hbWUgbXVzdCBiZSBhIHN0cmluZyIpCiAgICAgICAgaWYgbm90IGNscy5fbWlub2Zmc2V0IDw9IG9mZnNldCA8PSBjbHMuX21heG9mZnNldDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigib2Zmc2V0IG11c3QgYmUgYSB0aW1lZGVsdGEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBzdHJpY3RseSBiZXR3ZWVuIC10aW1lZGVsdGEoaG91cnM9MjQpIGFuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIHRpbWVkZWx0YShob3Vycz0yNCkuIikKICAgICAgICBpZiAob2Zmc2V0Lm1pY3Jvc2Vjb25kcyAhPSAwIG9yCiAgICAgICAgICAgIG9mZnNldC5zZWNvbmRzICUgNjAgIT0gMCk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm9mZnNldCBtdXN0IGJlIGEgdGltZWRlbHRhIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgcmVwcmVzZW50aW5nIGEgd2hvbGUgbnVtYmVyIG9mIG1pbnV0ZXMiKQogICAgICAgIHJldHVybiBjbHMuX2NyZWF0ZShvZmZzZXQsIG5hbWUpCgogICAgI0BjbGFzc21ldGhvZAogICAgZGVmIF9jcmVhdGUoY2xzLCBvZmZzZXQsIG5hbWU9Tm9uZSk6CiAgICAgICAgc2VsZiA9IHR6aW5mby5fX25ld19fKGNscykKICAgICAgICBzZWxmLl9vZmZzZXQgPSBvZmZzZXQKICAgICAgICBzZWxmLl9uYW1lID0gbmFtZQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZ2V0aW5pdGFyZ3NfXyhzZWxmKToKICAgICAgICAiIiJwaWNrbGUgc3VwcG9ydCIiIgogICAgICAgIGlmIHNlbGYuX25hbWUgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIChzZWxmLl9vZmZzZXQsKQogICAgICAgIHJldHVybiAoc2VsZi5fb2Zmc2V0LCBzZWxmLl9uYW1lKQoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIHR5cGUob3RoZXIpICE9IHRpbWV6b25lOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gc2VsZi5fb2Zmc2V0ID09IG90aGVyLl9vZmZzZXQKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fb2Zmc2V0KQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICAiIiJDb252ZXJ0IHRvIGZvcm1hbCBzdHJpbmcsIGZvciByZXByKCkuCgogICAgICAgID4+PiB0eiA9IHRpbWV6b25lLnV0YwogICAgICAgID4+PiByZXByKHR6KQogICAgICAgICdkYXRldGltZS50aW1lem9uZS51dGMnCiAgICAgICAgPj4+IHR6ID0gdGltZXpvbmUodGltZWRlbHRhKGhvdXJzPS01KSwgJ0VTVCcpCiAgICAgICAgPj4+IHJlcHIodHopCiAgICAgICAgImRhdGV0aW1lLnRpbWV6b25lKGRhdGV0aW1lLnRpbWVkZWx0YSgtMSwgNjg0MDApLCAnRVNUJykiCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VsZiBpcyBzZWxmLnV0YzoKICAgICAgICAgICAgcmV0dXJuICdkYXRldGltZS50aW1lem9uZS51dGMnCiAgICAgICAgaWYgc2VsZi5fbmFtZSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gIiVzKCVyKSIgJSAoJ2RhdGV0aW1lLicgKyBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX29mZnNldCkKICAgICAgICByZXR1cm4gIiVzKCVyLCAlcikiICUgKCdkYXRldGltZS4nICsgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9vZmZzZXQsIHNlbGYuX25hbWUpCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYudHpuYW1lKE5vbmUpCgogICAgZGVmIHV0Y29mZnNldChzZWxmLCBkdCk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShkdCwgZGF0ZXRpbWUpIG9yIGR0IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9vZmZzZXQKICAgICAgICByYWlzZSBUeXBlRXJyb3IoInV0Y29mZnNldCgpIGFyZ3VtZW50IG11c3QgYmUgYSBkYXRldGltZSBpbnN0YW5jZSIKICAgICAgICAgICAgICAgICAgICAgICAgIiBvciBOb25lIikKCiAgICBkZWYgdHpuYW1lKHNlbGYsIGR0KToKICAgICAgICBpZiBpc2luc3RhbmNlKGR0LCBkYXRldGltZSkgb3IgZHQgaXMgTm9uZToKICAgICAgICAgICAgaWYgc2VsZi5fbmFtZSBpcyBOb25lOgogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX25hbWVfZnJvbV9vZmZzZXQoc2VsZi5fb2Zmc2V0KQogICAgICAgICAgICByZXR1cm4gc2VsZi5fbmFtZQogICAgICAgIHJhaXNlIFR5cGVFcnJvcigidHpuYW1lKCkgYXJndW1lbnQgbXVzdCBiZSBhIGRhdGV0aW1lIGluc3RhbmNlIgogICAgICAgICAgICAgICAgICAgICAgICAiIG9yIE5vbmUiKQoKICAgIGRlZiBkc3Qoc2VsZiwgZHQpOgogICAgICAgIGlmIGlzaW5zdGFuY2UoZHQsIGRhdGV0aW1lKSBvciBkdCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZHN0KCkgYXJndW1lbnQgbXVzdCBiZSBhIGRhdGV0aW1lIGluc3RhbmNlIgogICAgICAgICAgICAgICAgICAgICAgICAiIG9yIE5vbmUiKQoKICAgIGRlZiBmcm9tdXRjKHNlbGYsIGR0KToKICAgICAgICBpZiBpc2luc3RhbmNlKGR0LCBkYXRldGltZSk6CiAgICAgICAgICAgIGlmIGR0LnR6aW5mbyBpcyBub3Qgc2VsZjoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImZyb211dGM6IGR0LnR6aW5mbyAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJpcyBub3Qgc2VsZiIpCiAgICAgICAgICAgIHJldHVybiBkdCArIHNlbGYuX29mZnNldAogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZnJvbXV0YygpIGFyZ3VtZW50IG11c3QgYmUgYSBkYXRldGltZSBpbnN0YW5jZSIKICAgICAgICAgICAgICAgICAgICAgICAgIiBvciBOb25lIikKCiAgICAjX21heG9mZnNldCA9IHRpbWVkZWx0YShob3Vycz0yMywgbWludXRlcz01OSkKICAgICNfbWlub2Zmc2V0ID0gLV9tYXhvZmZzZXQKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgX25hbWVfZnJvbV9vZmZzZXQoZGVsdGEpOgogICAgICAgIGlmIGRlbHRhIDwgdGltZWRlbHRhKDApOgogICAgICAgICAgICBzaWduID0gJy0nCiAgICAgICAgICAgIGRlbHRhID0gLWRlbHRhCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2lnbiA9ICcrJwogICAgICAgIGhvdXJzLCByZXN0ID0gZGl2bW9kKGRlbHRhLCB0aW1lZGVsdGEoaG91cnM9MSkpCiAgICAgICAgbWludXRlcyA9IHJlc3QgLy8gdGltZWRlbHRhKG1pbnV0ZXM9MSkKICAgICAgICByZXR1cm4gJ1VUQ3t9ezowMmR9Ons6MDJkfScuZm9ybWF0KHNpZ24sIGhvdXJzLCBtaW51dGVzKQoKI2ZpeG1lIGJyeXRob24KI3RpbWV6b25lLnV0YyA9IHRpbWV6b25lLl9jcmVhdGUodGltZWRlbHRhKDApKQojdGltZXpvbmUubWluID0gdGltZXpvbmUuX2NyZWF0ZSh0aW1lem9uZS5fbWlub2Zmc2V0KQojdGltZXpvbmUubWF4ID0gdGltZXpvbmUuX2NyZWF0ZSh0aW1lem9uZS5fbWF4b2Zmc2V0KQoK',
'/Lib/colorsys.py':'IiIiQ29udmVyc2lvbiBmdW5jdGlvbnMgYmV0d2VlbiBSR0IgYW5kIG90aGVyIGNvbG9yIHN5c3RlbXMuCgpUaGlzIG1vZHVsZXMgcHJvdmlkZXMgdHdvIGZ1bmN0aW9ucyBmb3IgZWFjaCBjb2xvciBzeXN0ZW0gQUJDOgoKICByZ2JfdG9fYWJjKHIsIGcsIGIpIC0tPiBhLCBiLCBjCiAgYWJjX3RvX3JnYihhLCBiLCBjKSAtLT4gciwgZywgYgoKQWxsIGlucHV0cyBhbmQgb3V0cHV0cyBhcmUgdHJpcGxlcyBvZiBmbG9hdHMgaW4gdGhlIHJhbmdlIFswLjAuLi4xLjBdCih3aXRoIHRoZSBleGNlcHRpb24gb2YgSSBhbmQgUSwgd2hpY2ggY292ZXJzIGEgc2xpZ2h0bHkgbGFyZ2VyIHJhbmdlKS4KSW5wdXRzIG91dHNpZGUgdGhlIHZhbGlkIHJhbmdlIG1heSBjYXVzZSBleGNlcHRpb25zIG9yIGludmFsaWQgb3V0cHV0cy4KClN1cHBvcnRlZCBjb2xvciBzeXN0ZW1zOgpSR0I6IFJlZCwgR3JlZW4sIEJsdWUgY29tcG9uZW50cwpZSVE6IEx1bWluYW5jZSwgQ2hyb21pbmFuY2UgKHVzZWQgYnkgY29tcG9zaXRlIHZpZGVvIHNpZ25hbHMpCkhMUzogSHVlLCBMdW1pbmFuY2UsIFNhdHVyYXRpb24KSFNWOiBIdWUsIFNhdHVyYXRpb24sIFZhbHVlCiIiIgoKIyBSZWZlcmVuY2VzOgojIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvWUlRCiMgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9ITFNfY29sb3Jfc3BhY2UKIyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hTVl9jb2xvcl9zcGFjZQoKX19hbGxfXyA9IFsicmdiX3RvX3lpcSIsInlpcV90b19yZ2IiLCJyZ2JfdG9faGxzIiwiaGxzX3RvX3JnYiIsCiAgICAgICAgICAgInJnYl90b19oc3YiLCJoc3ZfdG9fcmdiIl0KCiMgU29tZSBmbG9hdGluZyBwb2ludCBjb25zdGFudHMKCk9ORV9USElSRCA9IDEuMC8zLjAKT05FX1NJWFRIID0gMS4wLzYuMApUV09fVEhJUkQgPSAyLjAvMy4wCgojIFlJUTogdXNlZCBieSBjb21wb3NpdGUgdmlkZW8gc2lnbmFscyAobGluZWFyIGNvbWJpbmF0aW9ucyBvZiBSR0IpCiMgWTogcGVyY2VpdmVkIGdyZXkgbGV2ZWwgKDAuMCA9PSBibGFjaywgMS4wID09IHdoaXRlKQojIEksIFE6IGNvbG9yIGNvbXBvbmVudHMKCmRlZiByZ2JfdG9feWlxKHIsIGcsIGIpOgogICAgeSA9IDAuMzAqciArIDAuNTkqZyArIDAuMTEqYgogICAgaSA9IDAuNjAqciAtIDAuMjgqZyAtIDAuMzIqYgogICAgcSA9IDAuMjEqciAtIDAuNTIqZyArIDAuMzEqYgogICAgcmV0dXJuICh5LCBpLCBxKQoKZGVmIHlpcV90b19yZ2IoeSwgaSwgcSk6CiAgICByID0geSArIDAuOTQ4MjYyKmkgKyAwLjYyNDAxMypxCiAgICBnID0geSAtIDAuMjc2MDY2KmkgLSAwLjYzOTgxMCpxCiAgICBiID0geSAtIDEuMTA1NDUwKmkgKyAxLjcyOTg2MCpxCiAgICBpZiByIDwgMC4wOgogICAgICAgIHIgPSAwLjAKICAgIGlmIGcgPCAwLjA6CiAgICAgICAgZyA9IDAuMAogICAgaWYgYiA8IDAuMDoKICAgICAgICBiID0gMC4wCiAgICBpZiByID4gMS4wOgogICAgICAgIHIgPSAxLjAKICAgIGlmIGcgPiAxLjA6CiAgICAgICAgZyA9IDEuMAogICAgaWYgYiA+IDEuMDoKICAgICAgICBiID0gMS4wCiAgICByZXR1cm4gKHIsIGcsIGIpCgoKIyBITFM6IEh1ZSwgTHVtaW5hbmNlLCBTYXR1cmF0aW9uCiMgSDogcG9zaXRpb24gaW4gdGhlIHNwZWN0cnVtCiMgTDogY29sb3IgbGlnaHRuZXNzCiMgUzogY29sb3Igc2F0dXJhdGlvbgoKZGVmIHJnYl90b19obHMociwgZywgYik6CiAgICBtYXhjID0gbWF4KHIsIGcsIGIpCiAgICBtaW5jID0gbWluKHIsIGcsIGIpCiAgICAjIFhYWCBDYW4gb3B0aW1pemUgKG1heGMrbWluYykgYW5kIChtYXhjLW1pbmMpCiAgICBsID0gKG1pbmMrbWF4YykvMi4wCiAgICBpZiBtaW5jID09IG1heGM6CiAgICAgICAgcmV0dXJuIDAuMCwgbCwgMC4wCiAgICBpZiBsIDw9IDAuNToKICAgICAgICBzID0gKG1heGMtbWluYykgLyAobWF4YyttaW5jKQogICAgZWxzZToKICAgICAgICBzID0gKG1heGMtbWluYykgLyAoMi4wLW1heGMtbWluYykKICAgIHJjID0gKG1heGMtcikgLyAobWF4Yy1taW5jKQogICAgZ2MgPSAobWF4Yy1nKSAvIChtYXhjLW1pbmMpCiAgICBiYyA9IChtYXhjLWIpIC8gKG1heGMtbWluYykKICAgIGlmIHIgPT0gbWF4YzoKICAgICAgICBoID0gYmMtZ2MKICAgIGVsaWYgZyA9PSBtYXhjOgogICAgICAgIGggPSAyLjArcmMtYmMKICAgIGVsc2U6CiAgICAgICAgaCA9IDQuMCtnYy1yYwogICAgaCA9IChoLzYuMCkgJSAxLjAKICAgIHJldHVybiBoLCBsLCBzCgpkZWYgaGxzX3RvX3JnYihoLCBsLCBzKToKICAgIGlmIHMgPT0gMC4wOgogICAgICAgIHJldHVybiBsLCBsLCBsCiAgICBpZiBsIDw9IDAuNToKICAgICAgICBtMiA9IGwgKiAoMS4wK3MpCiAgICBlbHNlOgogICAgICAgIG0yID0gbCtzLShsKnMpCiAgICBtMSA9IDIuMCpsIC0gbTIKICAgIHJldHVybiAoX3YobTEsIG0yLCBoK09ORV9USElSRCksIF92KG0xLCBtMiwgaCksIF92KG0xLCBtMiwgaC1PTkVfVEhJUkQpKQoKZGVmIF92KG0xLCBtMiwgaHVlKToKICAgIGh1ZSA9IGh1ZSAlIDEuMAogICAgaWYgaHVlIDwgT05FX1NJWFRIOgogICAgICAgIHJldHVybiBtMSArIChtMi1tMSkqaHVlKjYuMAogICAgaWYgaHVlIDwgMC41OgogICAgICAgIHJldHVybiBtMgogICAgaWYgaHVlIDwgVFdPX1RISVJEOgogICAgICAgIHJldHVybiBtMSArIChtMi1tMSkqKFRXT19USElSRC1odWUpKjYuMAogICAgcmV0dXJuIG0xCgoKIyBIU1Y6IEh1ZSwgU2F0dXJhdGlvbiwgVmFsdWUKIyBIOiBwb3NpdGlvbiBpbiB0aGUgc3BlY3RydW0KIyBTOiBjb2xvciBzYXR1cmF0aW9uICgicHVyaXR5IikKIyBWOiBjb2xvciBicmlnaHRuZXNzCgpkZWYgcmdiX3RvX2hzdihyLCBnLCBiKToKICAgIG1heGMgPSBtYXgociwgZywgYikKICAgIG1pbmMgPSBtaW4ociwgZywgYikKICAgIHYgPSBtYXhjCiAgICBpZiBtaW5jID09IG1heGM6CiAgICAgICAgcmV0dXJuIDAuMCwgMC4wLCB2CiAgICBzID0gKG1heGMtbWluYykgLyBtYXhjCiAgICByYyA9IChtYXhjLXIpIC8gKG1heGMtbWluYykKICAgIGdjID0gKG1heGMtZykgLyAobWF4Yy1taW5jKQogICAgYmMgPSAobWF4Yy1iKSAvIChtYXhjLW1pbmMpCiAgICBpZiByID09IG1heGM6CiAgICAgICAgaCA9IGJjLWdjCiAgICBlbGlmIGcgPT0gbWF4YzoKICAgICAgICBoID0gMi4wK3JjLWJjCiAgICBlbHNlOgogICAgICAgIGggPSA0LjArZ2MtcmMKICAgIGggPSAoaC82LjApICUgMS4wCiAgICByZXR1cm4gaCwgcywgdgoKZGVmIGhzdl90b19yZ2IoaCwgcywgdik6CiAgICBpZiBzID09IDAuMDoKICAgICAgICByZXR1cm4gdiwgdiwgdgogICAgaSA9IGludChoKjYuMCkgIyBYWFggYXNzdW1lIGludCgpIHRydW5jYXRlcyEKICAgIGYgPSAoaCo2LjApIC0gaQogICAgcCA9IHYqKDEuMCAtIHMpCiAgICBxID0gdiooMS4wIC0gcypmKQogICAgdCA9IHYqKDEuMCAtIHMqKDEuMC1mKSkKICAgIGkgPSBpJTYKICAgIGlmIGkgPT0gMDoKICAgICAgICByZXR1cm4gdiwgdCwgcAogICAgaWYgaSA9PSAxOgogICAgICAgIHJldHVybiBxLCB2LCBwCiAgICBpZiBpID09IDI6CiAgICAgICAgcmV0dXJuIHAsIHYsIHQKICAgIGlmIGkgPT0gMzoKICAgICAgICByZXR1cm4gcCwgcSwgdgogICAgaWYgaSA9PSA0OgogICAgICAgIHJldHVybiB0LCBwLCB2CiAgICBpZiBpID09IDU6CiAgICAgICAgcmV0dXJuIHYsIHAsIHEKICAgICMgQ2Fubm90IGdldCBoZXJlCg==',
'/Lib/traceback.py':'aW1wb3J0IHN5cwpkZWYgcHJpbnRfZXhjKGZpbGU9c3lzLnN0ZGVycik6CiAgICBleGMgPSBfX0JSWVRIT05fXy5leGNlcHRpb25fc3RhY2tbLTFdCiAgICBmaWxlLndyaXRlKGV4Yy5pbmZvKQogICAgZmlsZS53cml0ZSgnXG4nK2V4Yy5fX25hbWVfXykKICAgIGlmIGV4Yy5tZXNzYWdlOgogICAgICAgIGZpbGUud3JpdGUoJzogJytleGMubWVzc2FnZSkKICAgIGZpbGUud3JpdGUoJ1xuJykK',
'/Lib/_random.py':'aW1wb3J0IF9vcwpjbGFzcyBSYW5kb206CiAgICAiIiJSYW5kb20gbnVtYmVyIGdlbmVyYXRvciBiYXNlIGNsYXNzIHVzZWQgYnkgYm91bmQgbW9kdWxlIGZ1bmN0aW9ucy4KCiAgICBVc2VkIHRvIGluc3RhbnRpYXRlIGluc3RhbmNlcyBvZiBSYW5kb20gdG8gZ2V0IGdlbmVyYXRvcnMgdGhhdCBkb24ndAogICAgc2hhcmUgc3RhdGUuCgogICAgQ2xhc3MgUmFuZG9tIGNhbiBhbHNvIGJlIHN1YmNsYXNzZWQgaWYgeW91IHdhbnQgdG8gdXNlIGEgZGlmZmVyZW50IGJhc2ljCiAgICBnZW5lcmF0b3Igb2YgeW91ciBvd24gZGV2aXNpbmc6IGluIHRoYXQgY2FzZSwgb3ZlcnJpZGUgdGhlIGZvbGxvd2luZwogICAgbWV0aG9kczogIHJhbmRvbSgpLCBzZWVkKCksIGdldHN0YXRlKCksIGFuZCBzZXRzdGF0ZSgpLgogICAgT3B0aW9uYWxseSwgaW1wbGVtZW50IGEgZ2V0cmFuZGJpdHMoKSBtZXRob2Qgc28gdGhhdCByYW5kcmFuZ2UoKQogICAgY2FuIGNvdmVyIGFyYml0cmFyaWx5IGxhcmdlIHJhbmdlcy4KCiAgICAiIiIKICAgICNyYW5kb20KICAgICNzZWVkCiAgICAjZ2V0c3RhdGUKICAgICNzZXRzdGF0ZQoKCiAgICBWRVJTSU9OID0gMyAgICAgIyB1c2VkIGJ5IGdldHN0YXRlL3NldHN0YXRlCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHg9Tm9uZSk6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSBhbiBpbnN0YW5jZS4KCiAgICAgICAgT3B0aW9uYWwgYXJndW1lbnQgeCBjb250cm9scyBzZWVkaW5nLCBhcyBmb3IgUmFuZG9tLnNlZWQoKS4KICAgICAgICAiIiIKCiAgICAgICAgc2VsZi5fc3RhdGU9eAoKICAgIGRlZiBzZWVkKHNlbGYsIGE9Tm9uZSwgdmVyc2lvbj0yKToKICAgICAgICAiIiJJbml0aWFsaXplIGludGVybmFsIHN0YXRlIGZyb20gaGFzaGFibGUgb2JqZWN0LgoKICAgICAgICBOb25lIG9yIG5vIGFyZ3VtZW50IHNlZWRzIGZyb20gY3VycmVudCB0aW1lIG9yIGZyb20gYW4gb3BlcmF0aW5nCiAgICAgICAgc3lzdGVtIHNwZWNpZmljIHJhbmRvbW5lc3Mgc291cmNlIGlmIGF2YWlsYWJsZS4KCiAgICAgICAgRm9yIHZlcnNpb24gMiAodGhlIGRlZmF1bHQpLCBhbGwgb2YgdGhlIGJpdHMgYXJlIHVzZWQgaWYgKmEqIGlzIGEgc3RyLAogICAgICAgIGJ5dGVzLCBvciBieXRlYXJyYXkuICBGb3IgdmVyc2lvbiAxLCB0aGUgaGFzaCgpIG9mICphKiBpcyB1c2VkIGluc3RlYWQuCgogICAgICAgIElmICphKiBpcyBhbiBpbnQsIGFsbCBiaXRzIGFyZSB1c2VkLgoKICAgICAgICAiIiIKCiAgICAgICAgc2VsZi5fc3RhdGU9YQogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKCiAgICBkZWYgZ2V0c3RhdGUoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGludGVybmFsIHN0YXRlOyBjYW4gYmUgcGFzc2VkIHRvIHNldHN0YXRlKCkgbGF0ZXIuIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX3N0YXRlCgogICAgZGVmIHNldHN0YXRlKHNlbGYsIHN0YXRlKToKICAgICAgICAiIiJSZXN0b3JlIGludGVybmFsIHN0YXRlIGZyb20gb2JqZWN0IHJldHVybmVkIGJ5IGdldHN0YXRlKCkuIiIiCiAgICAgICAgc2VsZi5fc3RhdGU9c3RhdGUKCiAgICBkZWYgcmFuZG9tKHNlbGYpOgogICAgICAgICIiIkdldCB0aGUgbmV4dCByYW5kb20gbnVtYmVyIGluIHRoZSByYW5nZSBbMC4wLCAxLjApLiIiIgogICAgICAgIHJldHVybiBfb3MucmFuZG9tKCkKCiAgICBkZWYgZ2V0cmFuZGJpdHMoc2VsZiwgayk6CiAgICAgICAgIiIiZ2V0cmFuZGJpdHMoaykgLT4geC4gIEdlbmVyYXRlcyBhIGxvbmcgaW50IHdpdGggayByYW5kb20gYml0cy4iIiIKICAgICAgICBpZiBrIDw9IDA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ251bWJlciBvZiBiaXRzIG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8nKQogICAgICAgIGlmIGsgIT0gaW50KGspOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ251bWJlciBvZiBiaXRzIHNob3VsZCBiZSBhbiBpbnRlZ2VyJykKICAgICAgICBudW1ieXRlcyA9IChrICsgNykgLy8gOCAgICAgICAgICAgICAgICAgICAgICAgIyBiaXRzIC8gOCBhbmQgcm91bmRlZCB1cAogICAgICAgIHggPSBpbnQuZnJvbV9ieXRlcyhfdXJhbmRvbShudW1ieXRlcyksICdiaWcnKQogICAgICAgIHJldHVybiB4ID4+IChudW1ieXRlcyAqIDggLSBrKSAgICAgICAgICAgICAgICAjIHRyaW0gZXhjZXNzIGJpdHMK',
'/Lib/signal.py':'IiIiVGhpcyBtb2R1bGUgcHJvdmlkZXMgbWVjaGFuaXNtcyB0byB1c2Ugc2lnbmFsIGhhbmRsZXJzIGluIFB5dGhvbi4KCkZ1bmN0aW9uczoKCmFsYXJtKCkgLS0gY2F1c2UgU0lHQUxSTSBhZnRlciBhIHNwZWNpZmllZCB0aW1lIFtVbml4IG9ubHldCnNldGl0aW1lcigpIC0tIGNhdXNlIGEgc2lnbmFsIChkZXNjcmliZWQgYmVsb3cpIGFmdGVyIGEgc3BlY2lmaWVkCiAgICAgICAgICAgICAgIGZsb2F0IHRpbWUgYW5kIHRoZSB0aW1lciBtYXkgcmVzdGFydCB0aGVuIFtVbml4IG9ubHldCmdldGl0aW1lcigpIC0tIGdldCBjdXJyZW50IHZhbHVlIG9mIHRpbWVyIFtVbml4IG9ubHldCnNpZ25hbCgpIC0tIHNldCB0aGUgYWN0aW9uIGZvciBhIGdpdmVuIHNpZ25hbApnZXRzaWduYWwoKSAtLSBnZXQgdGhlIHNpZ25hbCBhY3Rpb24gZm9yIGEgZ2l2ZW4gc2lnbmFsCnBhdXNlKCkgLS0gd2FpdCB1bnRpbCBhIHNpZ25hbCBhcnJpdmVzIFtVbml4IG9ubHldCmRlZmF1bHRfaW50X2hhbmRsZXIoKSAtLSBkZWZhdWx0IFNJR0lOVCBoYW5kbGVyCgpzaWduYWwgY29uc3RhbnRzOgpTSUdfREZMIC0tIHVzZWQgdG8gcmVmZXIgdG8gdGhlIHN5c3RlbSBkZWZhdWx0IGhhbmRsZXIKU0lHX0lHTiAtLSB1c2VkIHRvIGlnbm9yZSB0aGUgc2lnbmFsCk5TSUcgLS0gbnVtYmVyIG9mIGRlZmluZWQgc2lnbmFscwpTSUdJTlQsIFNJR1RFUk0sIGV0Yy4gLS0gc2lnbmFsIG51bWJlcnMKCml0aW1lciBjb25zdGFudHM6CklUSU1FUl9SRUFMIC0tIGRlY3JlbWVudHMgaW4gcmVhbCB0aW1lLCBhbmQgZGVsaXZlcnMgU0lHQUxSTSB1cG9uCiAgICAgICAgICAgICAgIGV4cGlyYXRpb24KSVRJTUVSX1ZJUlRVQUwgLS0gZGVjcmVtZW50cyBvbmx5IHdoZW4gdGhlIHByb2Nlc3MgaXMgZXhlY3V0aW5nLAogICAgICAgICAgICAgICBhbmQgZGVsaXZlcnMgU0lHVlRBTFJNIHVwb24gZXhwaXJhdGlvbgpJVElNRVJfUFJPRiAtLSBkZWNyZW1lbnRzIGJvdGggd2hlbiB0aGUgcHJvY2VzcyBpcyBleGVjdXRpbmcgYW5kCiAgICAgICAgICAgICAgIHdoZW4gdGhlIHN5c3RlbSBpcyBleGVjdXRpbmcgb24gYmVoYWxmIG9mIHRoZSBwcm9jZXNzLgogICAgICAgICAgICAgICBDb3VwbGVkIHdpdGggSVRJTUVSX1ZJUlRVQUwsIHRoaXMgdGltZXIgaXMgdXN1YWxseQogICAgICAgICAgICAgICB1c2VkIHRvIHByb2ZpbGUgdGhlIHRpbWUgc3BlbnQgYnkgdGhlIGFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgIGluIHVzZXIgYW5kIGtlcm5lbCBzcGFjZS4gU0lHUFJPRiBpcyBkZWxpdmVyZWQgdXBvbgogICAgICAgICAgICAgICBleHBpcmF0aW9uLgoKCioqKiBJTVBPUlRBTlQgTk9USUNFICoqKgpBIHNpZ25hbCBoYW5kbGVyIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIHR3byBhcmd1bWVudHM6CnRoZSBmaXJzdCBpcyB0aGUgc2lnbmFsIG51bWJlciwgdGhlIHNlY29uZCBpcyB0aGUgaW50ZXJydXB0ZWQgc3RhY2sgZnJhbWUuIiIiCgpDVFJMX0JSRUFLX0VWRU5UPTEKQ1RSTF9DX0VWRU5UPTAKTlNJRz0yMwpTSUdBQlJUPTIyClNJR0JSRUFLPTIxClNJR0ZQRT04ClNJR0lMTD00ClNJR0lOVD0yClNJR1NFR1Y9MTEKU0lHVEVSTT0xNQpTSUdfREZMPTAKU0lHX0lHTj0xCgpkZWYgc2lnbmFsKHNpZ25hbG51bSwgaGFuZGxlcikgOgogICAgcGFzcwo=',
'/Lib/bisect.py':'IiIiQmlzZWN0aW9uIGFsZ29yaXRobXMuIiIiCgpkZWYgaW5zb3J0X3JpZ2h0KGEsIHgsIGxvPTAsIGhpPU5vbmUpOgogICAgIiIiSW5zZXJ0IGl0ZW0geCBpbiBsaXN0IGEsIGFuZCBrZWVwIGl0IHNvcnRlZCBhc3N1bWluZyBhIGlzIHNvcnRlZC4KCiAgICBJZiB4IGlzIGFscmVhZHkgaW4gYSwgaW5zZXJ0IGl0IHRvIHRoZSByaWdodCBvZiB0aGUgcmlnaHRtb3N0IHguCgogICAgT3B0aW9uYWwgYXJncyBsbyAoZGVmYXVsdCAwKSBhbmQgaGkgKGRlZmF1bHQgbGVuKGEpKSBib3VuZCB0aGUKICAgIHNsaWNlIG9mIGEgdG8gYmUgc2VhcmNoZWQuCiAgICAiIiIKCiAgICBpZiBsbyA8IDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbG8gbXVzdCBiZSBub24tbmVnYXRpdmUnKQogICAgaWYgaGkgaXMgTm9uZToKICAgICAgICBoaSA9IGxlbihhKQogICAgd2hpbGUgbG8gPCBoaToKICAgICAgICBtaWQgPSAobG8raGkpLy8yCiAgICAgICAgaWYgeCA8IGFbbWlkXTogaGkgPSBtaWQKICAgICAgICBlbHNlOiBsbyA9IG1pZCsxCiAgICBhLmluc2VydChsbywgeCkKCmluc29ydCA9IGluc29ydF9yaWdodCAgICMgYmFja3dhcmQgY29tcGF0aWJpbGl0eQoKZGVmIGJpc2VjdF9yaWdodChhLCB4LCBsbz0wLCBoaT1Ob25lKToKICAgICIiIlJldHVybiB0aGUgaW5kZXggd2hlcmUgdG8gaW5zZXJ0IGl0ZW0geCBpbiBsaXN0IGEsIGFzc3VtaW5nIGEgaXMgc29ydGVkLgoKICAgIFRoZSByZXR1cm4gdmFsdWUgaSBpcyBzdWNoIHRoYXQgYWxsIGUgaW4gYVs6aV0gaGF2ZSBlIDw9IHgsIGFuZCBhbGwgZSBpbgogICAgYVtpOl0gaGF2ZSBlID4geC4gIFNvIGlmIHggYWxyZWFkeSBhcHBlYXJzIGluIHRoZSBsaXN0LCBhLmluc2VydCh4KSB3aWxsCiAgICBpbnNlcnQganVzdCBhZnRlciB0aGUgcmlnaHRtb3N0IHggYWxyZWFkeSB0aGVyZS4KCiAgICBPcHRpb25hbCBhcmdzIGxvIChkZWZhdWx0IDApIGFuZCBoaSAoZGVmYXVsdCBsZW4oYSkpIGJvdW5kIHRoZQogICAgc2xpY2Ugb2YgYSB0byBiZSBzZWFyY2hlZC4KICAgICIiIgoKICAgIGlmIGxvIDwgMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdsbyBtdXN0IGJlIG5vbi1uZWdhdGl2ZScpCiAgICBpZiBoaSBpcyBOb25lOgogICAgICAgIGhpID0gbGVuKGEpCiAgICB3aGlsZSBsbyA8IGhpOgogICAgICAgIG1pZCA9IChsbytoaSkvLzIKICAgICAgICBpZiB4IDwgYVttaWRdOiBoaSA9IG1pZAogICAgICAgIGVsc2U6IGxvID0gbWlkKzEKICAgIHJldHVybiBsbwoKYmlzZWN0ID0gYmlzZWN0X3JpZ2h0ICAgIyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5CgpkZWYgaW5zb3J0X2xlZnQoYSwgeCwgbG89MCwgaGk9Tm9uZSk6CiAgICAiIiJJbnNlcnQgaXRlbSB4IGluIGxpc3QgYSwgYW5kIGtlZXAgaXQgc29ydGVkIGFzc3VtaW5nIGEgaXMgc29ydGVkLgoKICAgIElmIHggaXMgYWxyZWFkeSBpbiBhLCBpbnNlcnQgaXQgdG8gdGhlIGxlZnQgb2YgdGhlIGxlZnRtb3N0IHguCgogICAgT3B0aW9uYWwgYXJncyBsbyAoZGVmYXVsdCAwKSBhbmQgaGkgKGRlZmF1bHQgbGVuKGEpKSBib3VuZCB0aGUKICAgIHNsaWNlIG9mIGEgdG8gYmUgc2VhcmNoZWQuCiAgICAiIiIKCiAgICBpZiBsbyA8IDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbG8gbXVzdCBiZSBub24tbmVnYXRpdmUnKQogICAgaWYgaGkgaXMgTm9uZToKICAgICAgICBoaSA9IGxlbihhKQogICAgd2hpbGUgbG8gPCBoaToKICAgICAgICBtaWQgPSAobG8raGkpLy8yCiAgICAgICAgaWYgYVttaWRdIDwgeDogbG8gPSBtaWQrMQogICAgICAgIGVsc2U6IGhpID0gbWlkCiAgICBhLmluc2VydChsbywgeCkKCgpkZWYgYmlzZWN0X2xlZnQoYSwgeCwgbG89MCwgaGk9Tm9uZSk6CiAgICAiIiJSZXR1cm4gdGhlIGluZGV4IHdoZXJlIHRvIGluc2VydCBpdGVtIHggaW4gbGlzdCBhLCBhc3N1bWluZyBhIGlzIHNvcnRlZC4KCiAgICBUaGUgcmV0dXJuIHZhbHVlIGkgaXMgc3VjaCB0aGF0IGFsbCBlIGluIGFbOmldIGhhdmUgZSA8IHgsIGFuZCBhbGwgZSBpbgogICAgYVtpOl0gaGF2ZSBlID49IHguICBTbyBpZiB4IGFscmVhZHkgYXBwZWFycyBpbiB0aGUgbGlzdCwgYS5pbnNlcnQoeCkgd2lsbAogICAgaW5zZXJ0IGp1c3QgYmVmb3JlIHRoZSBsZWZ0bW9zdCB4IGFscmVhZHkgdGhlcmUuCgogICAgT3B0aW9uYWwgYXJncyBsbyAoZGVmYXVsdCAwKSBhbmQgaGkgKGRlZmF1bHQgbGVuKGEpKSBib3VuZCB0aGUKICAgIHNsaWNlIG9mIGEgdG8gYmUgc2VhcmNoZWQuCiAgICAiIiIKCiAgICBpZiBsbyA8IDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbG8gbXVzdCBiZSBub24tbmVnYXRpdmUnKQogICAgaWYgaGkgaXMgTm9uZToKICAgICAgICBoaSA9IGxlbihhKQogICAgd2hpbGUgbG8gPCBoaToKICAgICAgICBtaWQgPSAobG8raGkpLy8yCiAgICAgICAgaWYgYVttaWRdIDwgeDogbG8gPSBtaWQrMQogICAgICAgIGVsc2U6IGhpID0gbWlkCiAgICByZXR1cm4gbG8KCiMgZG9udCcgbmVlZCB0aGlzIGZvciBicnl0aG9uCiMgT3ZlcndyaXRlIGFib3ZlIGRlZmluaXRpb25zIHdpdGggYSBmYXN0IEMgaW1wbGVtZW50YXRpb24KI3RyeToKIyAgICBmcm9tIF9iaXNlY3QgaW1wb3J0ICoKI2V4Y2VwdCBJbXBvcnRFcnJvcjoKIyAgICBwYXNzCg==',
'/Lib/collections.py':'I19fYWxsX18gPSBbJ2RlcXVlJywgJ2RlZmF1bHRkaWN0JywgJ0NvdW50ZXInXQoKZnJvbSBfY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlLCBkZWZhdWx0ZGljdAoKI2Zyb20gaXRlcnRvb2xzIGltcG9ydCByZXBlYXQgYXMgX3JlcGVhdCwgY2hhaW4gYXMgX2NoYWluLCBzdGFybWFwIGFzIF9zdGFybWFwCgpfX2FsbF9fID0gWydkZXF1ZScsICdkZWZhdWx0ZGljdCcsICduYW1lZHR1cGxlJywgJ1VzZXJEaWN0JywgJ1VzZXJMaXN0JywKICAgICAgICAgICAgJ1VzZXJTdHJpbmcnLCAnQ291bnRlcicsICdPcmRlcmVkRGljdCddCiMgRm9yIGJvb3RzdHJhcHBpbmcgcmVhc29ucywgdGhlIGNvbGxlY3Rpb24gQUJDcyBhcmUgZGVmaW5lZCBpbiBfYWJjb2xsLnB5LgojIFRoZXkgc2hvdWxkIGhvd2V2ZXIgYmUgY29uc2lkZXJlZCBhbiBpbnRlZ3JhbCBwYXJ0IG9mIGNvbGxlY3Rpb25zLnB5LgoKIyBmaXhtZSBicnl0aG9uLi4gdGhlcmUgaXMgYW4gaXNzdWUgd2l0aCBfYWJjb2xsCiNmcm9tIF9hYmNvbGwgaW1wb3J0ICoKI2Zyb20gX2FiY29sbCBpbXBvcnQgU2V0CmZyb20gX2FiY29sbCBpbXBvcnQgTXV0YWJsZU1hcHBpbmcKI2ltcG9ydCBfYWJjb2xsCiNfX2FsbF9fICs9IF9hYmNvbGwuX19hbGxfXwoKZnJvbSBfY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlLCBkZWZhdWx0ZGljdCwgbmFtZWR0dXBsZQojZml4bWUsIGJyeXRob24uICBUaGlzIGNhdXNlcyBhIFJlZmVyZW5jZUVycm9yOiBpdGVtZ2V0dGVyIGlzIG5vdCBkZWZpbmVkCmZyb20gb3BlcmF0b3IgaW1wb3J0IGl0ZW1nZXR0ZXIgYXMgX2l0ZW1nZXR0ZXIKZnJvbSBrZXl3b3JkIGltcG9ydCBpc2tleXdvcmQgYXMgX2lza2V5d29yZAppbXBvcnQgc3lzIGFzIF9zeXMKaW1wb3J0IGhlYXBxIGFzIF9oZWFwcQojZml4bWUgYnJ5dGhvbgojZnJvbSB3ZWFrcmVmIGltcG9ydCBwcm94eSBhcyBfcHJveHkKZnJvbSBpdGVydG9vbHMgaW1wb3J0IHJlcGVhdCBhcyBfcmVwZWF0LCBjaGFpbiBhcyBfY2hhaW4sIHN0YXJtYXAgYXMgX3N0YXJtYXAKI2ZpeG1lIGJyeXRob24gCmZyb20gcmVwcmxpYiBpbXBvcnQgcmVjdXJzaXZlX3JlcHIgYXMgX3JlY3Vyc2l2ZV9yZXByCgpjbGFzcyBTZXQoc2V0KToKICAgIHBhc3MKCmNsYXNzIFNlcXVlbmNlKGxpc3QpOgogICAgcGFzcwoKZGVmIF9wcm94eShvYmopOgogICAgcmV0dXJuIG9iagoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIE9yZGVyZWREaWN0CiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpjbGFzcyBfTGluayhvYmplY3QpOgogICAgX19zbG90c19fID0gJ3ByZXYnLCAnbmV4dCcsICdrZXknLCAnX193ZWFrcmVmX18nCgpjbGFzcyBPcmRlcmVkRGljdChkaWN0KToKICAgICdEaWN0aW9uYXJ5IHRoYXQgcmVtZW1iZXJzIGluc2VydGlvbiBvcmRlcicKICAgICMgQW4gaW5oZXJpdGVkIGRpY3QgbWFwcyBrZXlzIHRvIHZhbHVlcy4KICAgICMgVGhlIGluaGVyaXRlZCBkaWN0IHByb3ZpZGVzIF9fZ2V0aXRlbV9fLCBfX2xlbl9fLCBfX2NvbnRhaW5zX18sIGFuZCBnZXQuCiAgICAjIFRoZSByZW1haW5pbmcgbWV0aG9kcyBhcmUgb3JkZXItYXdhcmUuCiAgICAjIEJpZy1PIHJ1bm5pbmcgdGltZXMgZm9yIGFsbCBtZXRob2RzIGFyZSB0aGUgc2FtZSBhcyByZWd1bGFyIGRpY3Rpb25hcmllcy4KCiAgICAjIFRoZSBpbnRlcm5hbCBzZWxmLl9fbWFwIGRpY3QgbWFwcyBrZXlzIHRvIGxpbmtzIGluIGEgZG91Ymx5IGxpbmtlZCBsaXN0LgogICAgIyBUaGUgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0IHN0YXJ0cyBhbmQgZW5kcyB3aXRoIGEgc2VudGluZWwgZWxlbWVudC4KICAgICMgVGhlIHNlbnRpbmVsIGVsZW1lbnQgbmV2ZXIgZ2V0cyBkZWxldGVkICh0aGlzIHNpbXBsaWZpZXMgdGhlIGFsZ29yaXRobSkuCiAgICAjIFRoZSBzZW50aW5lbCBpcyBpbiBzZWxmLl9faGFyZHJvb3Qgd2l0aCBhIHdlYWtyZWYgcHJveHkgaW4gc2VsZi5fX3Jvb3QuCiAgICAjIFRoZSBwcmV2IGxpbmtzIGFyZSB3ZWFrcmVmIHByb3hpZXMgKHRvIHByZXZlbnQgY2lyY3VsYXIgcmVmZXJlbmNlcykuCiAgICAjIEluZGl2aWR1YWwgbGlua3MgYXJlIGtlcHQgYWxpdmUgYnkgdGhlIGhhcmQgcmVmZXJlbmNlIGluIHNlbGYuX19tYXAuCiAgICAjIFRob3NlIGhhcmQgcmVmZXJlbmNlcyBkaXNhcHBlYXIgd2hlbiBhIGtleSBpcyBkZWxldGVkIGZyb20gYW4gT3JkZXJlZERpY3QuCgogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3ZHMpOgogICAgICAgICcnJ0luaXRpYWxpemUgYW4gb3JkZXJlZCBkaWN0aW9uYXJ5LiAgVGhlIHNpZ25hdHVyZSBpcyB0aGUgc2FtZSBhcwogICAgICAgIHJlZ3VsYXIgZGljdGlvbmFyaWVzLCBidXQga2V5d29yZCBhcmd1bWVudHMgYXJlIG5vdCByZWNvbW1lbmRlZCBiZWNhdXNlCiAgICAgICAgdGhlaXIgaW5zZXJ0aW9uIG9yZGVyIGlzIGFyYml0cmFyeS4KCiAgICAgICAgJycnCiAgICAgICAgaWYgbGVuKGFyZ3MpID4gMToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdleHBlY3RlZCBhdCBtb3N0IDEgYXJndW1lbnRzLCBnb3QgJWQnICUgbGVuKGFyZ3MpKQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5fX3Jvb3QKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIHNlbGYuX19oYXJkcm9vdCA9IF9MaW5rKCkKICAgICAgICAgICAgc2VsZi5fX3Jvb3QgPSByb290ID0gX3Byb3h5KHNlbGYuX19oYXJkcm9vdCkKICAgICAgICAgICAgcm9vdC5wcmV2ID0gcm9vdC5uZXh0ID0gcm9vdAogICAgICAgICAgICBzZWxmLl9fbWFwID0ge30KICAgICAgICBzZWxmLl9fdXBkYXRlKCphcmdzLCAqKmt3ZHMpCgogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgZGljdF9zZXRpdGVtPWRpY3QuX19zZXRpdGVtX18sIHByb3h5PV9wcm94eSwgTGluaz1fTGluayk6CiAgICAgICAgJ29kLl9fc2V0aXRlbV9fKGksIHkpIDw9PT4gb2RbaV09eScKICAgICAgICAjIFNldHRpbmcgYSBuZXcgaXRlbSBjcmVhdGVzIGEgbmV3IGxpbmsgYXQgdGhlIGVuZCBvZiB0aGUgbGlua2VkIGxpc3QsCiAgICAgICAgIyBhbmQgdGhlIGluaGVyaXRlZCBkaWN0aW9uYXJ5IGlzIHVwZGF0ZWQgd2l0aCB0aGUgbmV3IGtleS92YWx1ZSBwYWlyLgogICAgICAgIGlmIGtleSBub3QgaW4gc2VsZjoKICAgICAgICAgICAgc2VsZi5fX21hcFtrZXldID0gbGluayA9IExpbmsoKQogICAgICAgICAgICByb290ID0gc2VsZi5fX3Jvb3QKICAgICAgICAgICAgbGFzdCA9IHJvb3QucHJldgogICAgICAgICAgICBsaW5rLnByZXYsIGxpbmsubmV4dCwgbGluay5rZXkgPSBsYXN0LCByb290LCBrZXkKICAgICAgICAgICAgbGFzdC5uZXh0ID0gbGluawogICAgICAgICAgICByb290LnByZXYgPSBwcm94eShsaW5rKQogICAgICAgIGRpY3Rfc2V0aXRlbShzZWxmLCBrZXksIHZhbHVlKQoKICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXksIGRpY3RfZGVsaXRlbT1kaWN0Ll9fZGVsaXRlbV9fKToKICAgICAgICAnb2QuX19kZWxpdGVtX18oeSkgPD09PiBkZWwgb2RbeV0nCiAgICAgICAgIyBEZWxldGluZyBhbiBleGlzdGluZyBpdGVtIHVzZXMgc2VsZi5fX21hcCB0byBmaW5kIHRoZSBsaW5rIHdoaWNoIGdldHMKICAgICAgICAjIHJlbW92ZWQgYnkgdXBkYXRpbmcgdGhlIGxpbmtzIGluIHRoZSBwcmVkZWNlc3NvciBhbmQgc3VjY2Vzc29yIG5vZGVzLgogICAgICAgIGRpY3RfZGVsaXRlbShzZWxmLCBrZXkpCiAgICAgICAgbGluayA9IHNlbGYuX19tYXAucG9wKGtleSkKICAgICAgICBsaW5rX3ByZXYgPSBsaW5rLnByZXYKICAgICAgICBsaW5rX25leHQgPSBsaW5rLm5leHQKICAgICAgICBsaW5rX3ByZXYubmV4dCA9IGxpbmtfbmV4dAogICAgICAgIGxpbmtfbmV4dC5wcmV2ID0gbGlua19wcmV2CgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgICdvZC5fX2l0ZXJfXygpIDw9PT4gaXRlcihvZCknCiAgICAgICAgIyBUcmF2ZXJzZSB0aGUgbGlua2VkIGxpc3QgaW4gb3JkZXIuCiAgICAgICAgcm9vdCA9IHNlbGYuX19yb290CiAgICAgICAgY3VyciA9IHJvb3QubmV4dAogICAgICAgIHdoaWxlIGN1cnIgaXMgbm90IHJvb3Q6CiAgICAgICAgICAgIHlpZWxkIGN1cnIua2V5CiAgICAgICAgICAgIGN1cnIgPSBjdXJyLm5leHQKCiAgICBkZWYgX19yZXZlcnNlZF9fKHNlbGYpOgogICAgICAgICdvZC5fX3JldmVyc2VkX18oKSA8PT0+IHJldmVyc2VkKG9kKScKICAgICAgICAjIFRyYXZlcnNlIHRoZSBsaW5rZWQgbGlzdCBpbiByZXZlcnNlIG9yZGVyLgogICAgICAgIHJvb3QgPSBzZWxmLl9fcm9vdAogICAgICAgIGN1cnIgPSByb290LnByZXYKICAgICAgICB3aGlsZSBjdXJyIGlzIG5vdCByb290OgogICAgICAgICAgICB5aWVsZCBjdXJyLmtleQogICAgICAgICAgICBjdXJyID0gY3Vyci5wcmV2CgogICAgZGVmIGNsZWFyKHNlbGYpOgogICAgICAgICdvZC5jbGVhcigpIC0+IE5vbmUuICBSZW1vdmUgYWxsIGl0ZW1zIGZyb20gb2QuJwogICAgICAgIHJvb3QgPSBzZWxmLl9fcm9vdAogICAgICAgIHJvb3QucHJldiA9IHJvb3QubmV4dCA9IHJvb3QKICAgICAgICBzZWxmLl9fbWFwLmNsZWFyKCkKICAgICAgICBkaWN0LmNsZWFyKHNlbGYpCgogICAgZGVmIHBvcGl0ZW0oc2VsZiwgbGFzdD1UcnVlKToKICAgICAgICAnJydvZC5wb3BpdGVtKCkgLT4gKGssIHYpLCByZXR1cm4gYW5kIHJlbW92ZSBhIChrZXksIHZhbHVlKSBwYWlyLgogICAgICAgIFBhaXJzIGFyZSByZXR1cm5lZCBpbiBMSUZPIG9yZGVyIGlmIGxhc3QgaXMgdHJ1ZSBvciBGSUZPIG9yZGVyIGlmIGZhbHNlLgoKICAgICAgICAnJycKICAgICAgICBpZiBub3Qgc2VsZjoKICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3IoJ2RpY3Rpb25hcnkgaXMgZW1wdHknKQogICAgICAgIHJvb3QgPSBzZWxmLl9fcm9vdAogICAgICAgIGlmIGxhc3Q6CiAgICAgICAgICAgIGxpbmsgPSByb290LnByZXYKICAgICAgICAgICAgbGlua19wcmV2ID0gbGluay5wcmV2CiAgICAgICAgICAgIGxpbmtfcHJldi5uZXh0ID0gcm9vdAogICAgICAgICAgICByb290LnByZXYgPSBsaW5rX3ByZXYKICAgICAgICBlbHNlOgogICAgICAgICAgICBsaW5rID0gcm9vdC5uZXh0CiAgICAgICAgICAgIGxpbmtfbmV4dCA9IGxpbmsubmV4dAogICAgICAgICAgICByb290Lm5leHQgPSBsaW5rX25leHQKICAgICAgICAgICAgbGlua19uZXh0LnByZXYgPSByb290CiAgICAgICAga2V5ID0gbGluay5rZXkKICAgICAgICBkZWwgc2VsZi5fX21hcFtrZXldCiAgICAgICAgdmFsdWUgPSBkaWN0LnBvcChzZWxmLCBrZXkpCiAgICAgICAgcmV0dXJuIGtleSwgdmFsdWUKCiAgICBkZWYgbW92ZV90b19lbmQoc2VsZiwga2V5LCBsYXN0PVRydWUpOgogICAgICAgICcnJ01vdmUgYW4gZXhpc3RpbmcgZWxlbWVudCB0byB0aGUgZW5kIChvciBiZWdpbm5pbmcgaWYgbGFzdD09RmFsc2UpLgoKICAgICAgICBSYWlzZXMgS2V5RXJyb3IgaWYgdGhlIGVsZW1lbnQgZG9lcyBub3QgZXhpc3QuCiAgICAgICAgV2hlbiBsYXN0PVRydWUsIGFjdHMgbGlrZSBhIGZhc3QgdmVyc2lvbiBvZiBzZWxmW2tleV09c2VsZi5wb3Aoa2V5KS4KCiAgICAgICAgJycnCiAgICAgICAgbGluayA9IHNlbGYuX19tYXBba2V5XQogICAgICAgIGxpbmtfcHJldiA9IGxpbmsucHJldgogICAgICAgIGxpbmtfbmV4dCA9IGxpbmsubmV4dAogICAgICAgIGxpbmtfcHJldi5uZXh0ID0gbGlua19uZXh0CiAgICAgICAgbGlua19uZXh0LnByZXYgPSBsaW5rX3ByZXYKICAgICAgICByb290ID0gc2VsZi5fX3Jvb3QKICAgICAgICBpZiBsYXN0OgogICAgICAgICAgICBsYXN0ID0gcm9vdC5wcmV2CiAgICAgICAgICAgIGxpbmsucHJldiA9IGxhc3QKICAgICAgICAgICAgbGluay5uZXh0ID0gcm9vdAogICAgICAgICAgICBsYXN0Lm5leHQgPSByb290LnByZXYgPSBsaW5rCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZmlyc3QgPSByb290Lm5leHQKICAgICAgICAgICAgbGluay5wcmV2ID0gcm9vdAogICAgICAgICAgICBsaW5rLm5leHQgPSBmaXJzdAogICAgICAgICAgICByb290Lm5leHQgPSBmaXJzdC5wcmV2ID0gbGluawoKICAgIGRlZiBfX3NpemVvZl9fKHNlbGYpOgogICAgICAgIHNpemVvZiA9IF9zeXMuZ2V0c2l6ZW9mCiAgICAgICAgbiA9IGxlbihzZWxmKSArIDEgICAgICAgICAgICAgICAgICAgICAgICMgbnVtYmVyIG9mIGxpbmtzIGluY2x1ZGluZyByb290CiAgICAgICAgc2l6ZSA9IHNpemVvZihzZWxmLl9fZGljdF9fKSAgICAgICAgICAgICMgaW5zdGFuY2UgZGljdGlvbmFyeQogICAgICAgIHNpemUgKz0gc2l6ZW9mKHNlbGYuX19tYXApICogMiAgICAgICAgICAjIGludGVybmFsIGRpY3QgYW5kIGluaGVyaXRlZCBkaWN0CiAgICAgICAgc2l6ZSArPSBzaXplb2Yoc2VsZi5fX2hhcmRyb290KSAqIG4gICAgICMgbGluayBvYmplY3RzCiAgICAgICAgc2l6ZSArPSBzaXplb2Yoc2VsZi5fX3Jvb3QpICogbiAgICAgICAgICMgcHJveHkgb2JqZWN0cwogICAgICAgIHJldHVybiBzaXplCgogICAgI2ZpeG1lIGJyeXRob24uLiAgSXNzdWUgd2l0aCBfYWJjb2xsLCB3aGljaCBjb250YWlucyBNdXRhYmxlTWFwcGluZwogICAgdXBkYXRlID0gX191cGRhdGUgPSBNdXRhYmxlTWFwcGluZy51cGRhdGUKICAgIGtleXMgPSBNdXRhYmxlTWFwcGluZy5rZXlzCiAgICB2YWx1ZXMgPSBNdXRhYmxlTWFwcGluZy52YWx1ZXMKICAgIGl0ZW1zID0gTXV0YWJsZU1hcHBpbmcuaXRlbXMKICAgIF9fbmVfXyA9IE11dGFibGVNYXBwaW5nLl9fbmVfXwoKICAgIF9fbWFya2VyID0gb2JqZWN0KCkKCiAgICBkZWYgcG9wKHNlbGYsIGtleSwgZGVmYXVsdD1fX21hcmtlcik6CiAgICAgICAgJycnb2QucG9wKGtbLGRdKSAtPiB2LCByZW1vdmUgc3BlY2lmaWVkIGtleSBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nCiAgICAgICAgdmFsdWUuICBJZiBrZXkgaXMgbm90IGZvdW5kLCBkIGlzIHJldHVybmVkIGlmIGdpdmVuLCBvdGhlcndpc2UgS2V5RXJyb3IKICAgICAgICBpcyByYWlzZWQuCgogICAgICAgICcnJwogICAgICAgIGlmIGtleSBpbiBzZWxmOgogICAgICAgICAgICByZXN1bHQgPSBzZWxmW2tleV0KICAgICAgICAgICAgZGVsIHNlbGZba2V5XQogICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgaWYgZGVmYXVsdCBpcyBzZWxmLl9fbWFya2VyOgogICAgICAgICAgICByYWlzZSBLZXlFcnJvcihrZXkpCiAgICAgICAgcmV0dXJuIGRlZmF1bHQKCiAgICBkZWYgc2V0ZGVmYXVsdChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6CiAgICAgICAgJ29kLnNldGRlZmF1bHQoa1ssZF0pIC0+IG9kLmdldChrLGQpLCBhbHNvIHNldCBvZFtrXT1kIGlmIGsgbm90IGluIG9kJwogICAgICAgIGlmIGtleSBpbiBzZWxmOgogICAgICAgICAgICByZXR1cm4gc2VsZltrZXldCiAgICAgICAgc2VsZltrZXldID0gZGVmYXVsdAogICAgICAgIHJldHVybiBkZWZhdWx0CgogICAgI2ZpeG1lLCBicnl0aG9uIGlzc3VlCiAgICAjQF9yZWN1cnNpdmVfcmVwcigpCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgJ29kLl9fcmVwcl9fKCkgPD09PiByZXByKG9kKScKICAgICAgICBpZiBub3Qgc2VsZjoKICAgICAgICAgICAgcmV0dXJuICclcygpJyAlIChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywpCiAgICAgICAgcmV0dXJuICclcyglciknICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBsaXN0KHNlbGYuaXRlbXMoKSkpCgogICAgZGVmIF9fcmVkdWNlX18oc2VsZik6CiAgICAgICAgJ1JldHVybiBzdGF0ZSBpbmZvcm1hdGlvbiBmb3IgcGlja2xpbmcnCiAgICAgICAgaXRlbXMgPSBbW2ssIHNlbGZba11dIGZvciBrIGluIHNlbGZdCiAgICAgICAgaW5zdF9kaWN0ID0gdmFycyhzZWxmKS5jb3B5KCkKICAgICAgICBmb3IgayBpbiB2YXJzKE9yZGVyZWREaWN0KCkpOgogICAgICAgICAgICBpbnN0X2RpY3QucG9wKGssIE5vbmUpCiAgICAgICAgaWYgaW5zdF9kaWN0OgogICAgICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCAoaXRlbXMsKSwgaW5zdF9kaWN0KQogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXywgKGl0ZW1zLCkKCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICAnb2QuY29weSgpIC0+IGEgc2hhbGxvdyBjb3B5IG9mIG9kJwogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXyhzZWxmKQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZyb21rZXlzKGNscywgaXRlcmFibGUsIHZhbHVlPU5vbmUpOgogICAgICAgICcnJ09ELmZyb21rZXlzKFNbLCB2XSkgLT4gTmV3IG9yZGVyZWQgZGljdGlvbmFyeSB3aXRoIGtleXMgZnJvbSBTLgogICAgICAgIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB2YWx1ZSBkZWZhdWx0cyB0byBOb25lLgoKICAgICAgICAnJycKICAgICAgICBzZWxmID0gY2xzKCkKICAgICAgICBmb3Iga2V5IGluIGl0ZXJhYmxlOgogICAgICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgJycnb2QuX19lcV9fKHkpIDw9PT4gb2Q9PXkuICBDb21wYXJpc29uIHRvIGFub3RoZXIgT0QgaXMgb3JkZXItc2Vuc2l0aXZlCiAgICAgICAgd2hpbGUgY29tcGFyaXNvbiB0byBhIHJlZ3VsYXIgbWFwcGluZyBpcyBvcmRlci1pbnNlbnNpdGl2ZS4KCiAgICAgICAgJycnCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgT3JkZXJlZERpY3QpOgogICAgICAgICAgICByZXR1cm4gbGVuKHNlbGYpPT1sZW4ob3RoZXIpIGFuZCBcCiAgICAgICAgICAgICAgICAgICBhbGwocD09cSBmb3IgcCwgcSBpbiB6aXAoc2VsZi5pdGVtcygpLCBvdGhlci5pdGVtcygpKSkKICAgICAgICByZXR1cm4gZGljdC5fX2VxX18oc2VsZiwgb3RoZXIpCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyAgQ291bnRlcgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgpkZWYgX2NvdW50X2VsZW1lbnRzKG1hcHBpbmcsIGl0ZXJhYmxlKToKICAgICdUYWxseSBlbGVtZW50cyBmcm9tIHRoZSBpdGVyYWJsZS4nCiAgICBtYXBwaW5nX2dldCA9IG1hcHBpbmcuZ2V0CiAgICBmb3IgZWxlbSBpbiBpdGVyYWJsZToKICAgICAgICBtYXBwaW5nW2VsZW1dID0gbWFwcGluZ19nZXQoZWxlbSwgMCkgKyAxCgojdHJ5OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTG9hZCBDIGhlbHBlciBmdW5jdGlvbiBpZiBhdmFpbGFibGUKIyAgICBmcm9tIF9jb2xsZWN0aW9ucyBpbXBvcnQgX2NvdW50X2VsZW1lbnRzCiNleGNlcHQgSW1wb3J0RXJyb3I6CiMgICAgcGFzcwoKY2xhc3MgQ291bnRlcihkaWN0KToKICAgICcnJ0RpY3Qgc3ViY2xhc3MgZm9yIGNvdW50aW5nIGhhc2hhYmxlIGl0ZW1zLiAgU29tZXRpbWVzIGNhbGxlZCBhIGJhZwogICAgb3IgbXVsdGlzZXQuICBFbGVtZW50cyBhcmUgc3RvcmVkIGFzIGRpY3Rpb25hcnkga2V5cyBhbmQgdGhlaXIgY291bnRzCiAgICBhcmUgc3RvcmVkIGFzIGRpY3Rpb25hcnkgdmFsdWVzLgoKICAgID4+PiBjID0gQ291bnRlcignYWJjZGVhYmNkYWJjYWJhJykgICMgY291bnQgZWxlbWVudHMgZnJvbSBhIHN0cmluZwoKICAgID4+PiBjLm1vc3RfY29tbW9uKDMpICAgICAgICAgICAgICAgICMgdGhyZWUgbW9zdCBjb21tb24gZWxlbWVudHMKICAgIFsoJ2EnLCA1KSwgKCdiJywgNCksICgnYycsIDMpXQogICAgPj4+IHNvcnRlZChjKSAgICAgICAgICAgICAgICAgICAgICAgIyBsaXN0IGFsbCB1bmlxdWUgZWxlbWVudHMKICAgIFsnYScsICdiJywgJ2MnLCAnZCcsICdlJ10KICAgID4+PiAnJy5qb2luKHNvcnRlZChjLmVsZW1lbnRzKCkpKSAgICMgbGlzdCBlbGVtZW50cyB3aXRoIHJlcGV0aXRpb25zCiAgICAnYWFhYWFiYmJiY2NjZGRlJwogICAgPj4+IHN1bShjLnZhbHVlcygpKSAgICAgICAgICAgICAgICAgIyB0b3RhbCBvZiBhbGwgY291bnRzCiAgICAxNQoKICAgID4+PiBjWydhJ10gICAgICAgICAgICAgICAgICAgICAgICAgICMgY291bnQgb2YgbGV0dGVyICdhJwogICAgNQogICAgPj4+IGZvciBlbGVtIGluICdzaGF6YW0nOiAgICAgICAgICAgIyB1cGRhdGUgY291bnRzIGZyb20gYW4gaXRlcmFibGUKICAgIC4uLiAgICAgY1tlbGVtXSArPSAxICAgICAgICAgICAgICAgICMgYnkgYWRkaW5nIDEgdG8gZWFjaCBlbGVtZW50J3MgY291bnQKICAgID4+PiBjWydhJ10gICAgICAgICAgICAgICAgICAgICAgICAgICMgbm93IHRoZXJlIGFyZSBzZXZlbiAnYScKICAgIDcKICAgID4+PiBkZWwgY1snYiddICAgICAgICAgICAgICAgICAgICAgICMgcmVtb3ZlIGFsbCAnYicKICAgID4+PiBjWydiJ10gICAgICAgICAgICAgICAgICAgICAgICAgICMgbm93IHRoZXJlIGFyZSB6ZXJvICdiJwogICAgMAoKICAgID4+PiBkID0gQ291bnRlcignc2ltc2FsYWJpbScpICAgICAgICMgbWFrZSBhbm90aGVyIGNvdW50ZXIKICAgID4+PiBjLnVwZGF0ZShkKSAgICAgICAgICAgICAgICAgICAgICMgYWRkIGluIHRoZSBzZWNvbmQgY291bnRlcgogICAgPj4+IGNbJ2EnXSAgICAgICAgICAgICAgICAgICAgICAgICAgIyBub3cgdGhlcmUgYXJlIG5pbmUgJ2EnCiAgICA5CgogICAgPj4+IGMuY2xlYXIoKSAgICAgICAgICAgICAgICAgICAgICAgIyBlbXB0eSB0aGUgY291bnRlcgogICAgPj4+IGMKICAgIENvdW50ZXIoKQoKICAgIE5vdGU6ICBJZiBhIGNvdW50IGlzIHNldCB0byB6ZXJvIG9yIHJlZHVjZWQgdG8gemVybywgaXQgd2lsbCByZW1haW4KICAgIGluIHRoZSBjb3VudGVyIHVudGlsIHRoZSBlbnRyeSBpcyBkZWxldGVkIG9yIHRoZSBjb3VudGVyIGlzIGNsZWFyZWQ6CgogICAgPj4+IGMgPSBDb3VudGVyKCdhYWFiYmMnKQogICAgPj4+IGNbJ2InXSAtPSAyICAgICAgICAgICAgICAgICAgICAgIyByZWR1Y2UgdGhlIGNvdW50IG9mICdiJyBieSB0d28KICAgID4+PiBjLm1vc3RfY29tbW9uKCkgICAgICAgICAgICAgICAgICMgJ2InIGlzIHN0aWxsIGluLCBidXQgaXRzIGNvdW50IGlzIHplcm8KICAgIFsoJ2EnLCAzKSwgKCdjJywgMSksICgnYicsIDApXQoKICAgICcnJwogICAgIyBSZWZlcmVuY2VzOgogICAgIyAgIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTXVsdGlzZXQKICAgICMgICBodHRwOi8vd3d3LmdudS5vcmcvc29mdHdhcmUvc21hbGx0YWxrL21hbnVhbC1iYXNlL2h0bWxfbm9kZS9CYWcuaHRtbAogICAgIyAgIGh0dHA6Ly93d3cuZGVtbzJzLmNvbS9UdXRvcmlhbC9DcHAvMDM4MF9fc2V0LW11bHRpc2V0L0NhdGFsb2cwMzgwX19zZXQtbXVsdGlzZXQuaHRtCiAgICAjICAgaHR0cDovL2NvZGUuYWN0aXZlc3RhdGUuY29tL3JlY2lwZXMvMjU5MTc0LwogICAgIyAgIEtudXRoLCBUQU9DUCBWb2wuIElJIHNlY3Rpb24gNC42LjMKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlcmFibGU9Tm9uZSwgKiprd2RzKToKICAgICAgICAnJydDcmVhdGUgYSBuZXcsIGVtcHR5IENvdW50ZXIgb2JqZWN0LiAgQW5kIGlmIGdpdmVuLCBjb3VudCBlbGVtZW50cwogICAgICAgIGZyb20gYW4gaW5wdXQgaXRlcmFibGUuICBPciwgaW5pdGlhbGl6ZSB0aGUgY291bnQgZnJvbSBhbm90aGVyIG1hcHBpbmcKICAgICAgICBvZiBlbGVtZW50cyB0byB0aGVpciBjb3VudHMuCgogICAgICAgID4+PiBjID0gQ291bnRlcigpICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBhIG5ldywgZW1wdHkgY291bnRlcgogICAgICAgID4+PiBjID0gQ291bnRlcignZ2FsbGFoYWQnKSAgICAgICAgICAgICAgICAgIyBhIG5ldyBjb3VudGVyIGZyb20gYW4gaXRlcmFibGUKICAgICAgICA+Pj4gYyA9IENvdW50ZXIoeydhJzogNCwgJ2InOiAyfSkgICAgICAgICAgICMgYSBuZXcgY291bnRlciBmcm9tIGEgbWFwcGluZwogICAgICAgID4+PiBjID0gQ291bnRlcihhPTQsIGI9MikgICAgICAgICAgICAgICAgICAgIyBhIG5ldyBjb3VudGVyIGZyb20ga2V5d29yZCBhcmdzCgogICAgICAgICcnJwogICAgICAgICNzdXBlcigpLl9faW5pdF9fKCkgICNCRSBtb2RpZmllZCBzaW5jZSBzdXBlciBub3Qgc3VwcG9ydGVkCiAgICAgICAgZGljdC5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYudXBkYXRlKGl0ZXJhYmxlLCAqKmt3ZHMpCgogICAgZGVmIF9fbWlzc2luZ19fKHNlbGYsIGtleSk6CiAgICAgICAgJ1RoZSBjb3VudCBvZiBlbGVtZW50cyBub3QgaW4gdGhlIENvdW50ZXIgaXMgemVyby4nCiAgICAgICAgIyBOZWVkZWQgc28gdGhhdCBzZWxmW21pc3NpbmdfaXRlbV0gZG9lcyBub3QgcmFpc2UgS2V5RXJyb3IKICAgICAgICByZXR1cm4gMAoKICAgIGRlZiBtb3N0X2NvbW1vbihzZWxmLCBuPU5vbmUpOgogICAgICAgICcnJ0xpc3QgdGhlIG4gbW9zdCBjb21tb24gZWxlbWVudHMgYW5kIHRoZWlyIGNvdW50cyBmcm9tIHRoZSBtb3N0CiAgICAgICAgY29tbW9uIHRvIHRoZSBsZWFzdC4gIElmIG4gaXMgTm9uZSwgdGhlbiBsaXN0IGFsbCBlbGVtZW50IGNvdW50cy4KCiAgICAgICAgPj4+IENvdW50ZXIoJ2FiY2RlYWJjZGFiY2FiYScpLm1vc3RfY29tbW9uKDMpCiAgICAgICAgWygnYScsIDUpLCAoJ2InLCA0KSwgKCdjJywgMyldCgogICAgICAgICcnJwogICAgICAgICMgRW11bGF0ZSBCYWcuc29ydGVkQnlDb3VudCBmcm9tIFNtYWxsdGFsawogICAgICAgIGlmIG4gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIHNvcnRlZChzZWxmLml0ZW1zKCksIGtleT1faXRlbWdldHRlcigxKSwgcmV2ZXJzZT1UcnVlKQogICAgICAgIHJldHVybiBfaGVhcHEubmxhcmdlc3Qobiwgc2VsZi5pdGVtcygpLCBrZXk9X2l0ZW1nZXR0ZXIoMSkpCgogICAgZGVmIGVsZW1lbnRzKHNlbGYpOgogICAgICAgICcnJ0l0ZXJhdG9yIG92ZXIgZWxlbWVudHMgcmVwZWF0aW5nIGVhY2ggYXMgbWFueSB0aW1lcyBhcyBpdHMgY291bnQuCgogICAgICAgID4+PiBjID0gQ291bnRlcignQUJDQUJDJykKICAgICAgICA+Pj4gc29ydGVkKGMuZWxlbWVudHMoKSkKICAgICAgICBbJ0EnLCAnQScsICdCJywgJ0InLCAnQycsICdDJ10KCiAgICAgICAgIyBLbnV0aCdzIGV4YW1wbGUgZm9yIHByaW1lIGZhY3RvcnMgb2YgMTgzNjogIDIqKjIgKiAzKiozICogMTcqKjEKICAgICAgICA+Pj4gcHJpbWVfZmFjdG9ycyA9IENvdW50ZXIoezI6IDIsIDM6IDMsIDE3OiAxfSkKICAgICAgICA+Pj4gcHJvZHVjdCA9IDEKICAgICAgICA+Pj4gZm9yIGZhY3RvciBpbiBwcmltZV9mYWN0b3JzLmVsZW1lbnRzKCk6ICAgICAjIGxvb3Agb3ZlciBmYWN0b3JzCiAgICAgICAgLi4uICAgICBwcm9kdWN0ICo9IGZhY3RvciAgICAgICAgICAgICAgICAgICAgICAgIyBhbmQgbXVsdGlwbHkgdGhlbQogICAgICAgID4+PiBwcm9kdWN0CiAgICAgICAgMTgzNgoKICAgICAgICBOb3RlLCBpZiBhbiBlbGVtZW50J3MgY291bnQgaGFzIGJlZW4gc2V0IHRvIHplcm8gb3IgaXMgYSBuZWdhdGl2ZQogICAgICAgIG51bWJlciwgZWxlbWVudHMoKSB3aWxsIGlnbm9yZSBpdC4KCiAgICAgICAgJycnCiAgICAgICAgIyBFbXVsYXRlIEJhZy5kbyBmcm9tIFNtYWxsdGFsayBhbmQgTXVsdGlzZXQuYmVnaW4gZnJvbSBDKysuCiAgICAgICAgcmV0dXJuIF9jaGFpbi5mcm9tX2l0ZXJhYmxlKF9zdGFybWFwKF9yZXBlYXQsIHNlbGYuaXRlbXMoKSkpCgogICAgIyBPdmVycmlkZSBkaWN0IG1ldGhvZHMgd2hlcmUgbmVjZXNzYXJ5CgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbWtleXMoY2xzLCBpdGVyYWJsZSwgdj1Ob25lKToKICAgICAgICAjIFRoZXJlIGlzIG5vIGVxdWl2YWxlbnQgbWV0aG9kIGZvciBjb3VudGVycyBiZWNhdXNlIHNldHRpbmcgdj0xCiAgICAgICAgIyBtZWFucyB0aGF0IG5vIGVsZW1lbnQgY2FuIGhhdmUgYSBjb3VudCBncmVhdGVyIHRoYW4gb25lLgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoCiAgICAgICAgICAgICdDb3VudGVyLmZyb21rZXlzKCkgaXMgdW5kZWZpbmVkLiAgVXNlIENvdW50ZXIoaXRlcmFibGUpIGluc3RlYWQuJykKCiAgICBkZWYgdXBkYXRlKHNlbGYsIGl0ZXJhYmxlPU5vbmUsICoqa3dkcyk6CiAgICAgICAgJycnTGlrZSBkaWN0LnVwZGF0ZSgpIGJ1dCBhZGQgY291bnRzIGluc3RlYWQgb2YgcmVwbGFjaW5nIHRoZW0uCgogICAgICAgIFNvdXJjZSBjYW4gYmUgYW4gaXRlcmFibGUsIGEgZGljdGlvbmFyeSwgb3IgYW5vdGhlciBDb3VudGVyIGluc3RhbmNlLgoKICAgICAgICA+Pj4gYyA9IENvdW50ZXIoJ3doaWNoJykKICAgICAgICA+Pj4gYy51cGRhdGUoJ3dpdGNoJykgICAgICAgICAgICMgYWRkIGVsZW1lbnRzIGZyb20gYW5vdGhlciBpdGVyYWJsZQogICAgICAgID4+PiBkID0gQ291bnRlcignd2F0Y2gnKQogICAgICAgID4+PiBjLnVwZGF0ZShkKSAgICAgICAgICAgICAgICAgIyBhZGQgZWxlbWVudHMgZnJvbSBhbm90aGVyIGNvdW50ZXIKICAgICAgICA+Pj4gY1snaCddICAgICAgICAgICAgICAgICAgICAgICMgZm91ciAnaCcgaW4gd2hpY2gsIHdpdGNoLCBhbmQgd2F0Y2gKICAgICAgICA0CgogICAgICAgICcnJwogICAgICAgICMgVGhlIHJlZ3VsYXIgZGljdC51cGRhdGUoKSBvcGVyYXRpb24gbWFrZXMgbm8gc2Vuc2UgaGVyZSBiZWNhdXNlIHRoZQogICAgICAgICMgcmVwbGFjZSBiZWhhdmlvciByZXN1bHRzIGluIHRoZSBzb21lIG9mIG9yaWdpbmFsIHVudG91Y2hlZCBjb3VudHMKICAgICAgICAjIGJlaW5nIG1peGVkLWluIHdpdGggYWxsIG9mIHRoZSBvdGhlciBjb3VudHMgZm9yIGEgbWlzbWFzaCB0aGF0CiAgICAgICAgIyBkb2Vzbid0IGhhdmUgYSBzdHJhaWdodC1mb3J3YXJkIGludGVycHJldGF0aW9uIGluIG1vc3QgY291bnRpbmcKICAgICAgICAjIGNvbnRleHRzLiAgSW5zdGVhZCwgd2UgaW1wbGVtZW50IHN0cmFpZ2h0LWFkZGl0aW9uLiAgQm90aCB0aGUgaW5wdXRzCiAgICAgICAgIyBhbmQgb3V0cHV0cyBhcmUgYWxsb3dlZCB0byBjb250YWluIHplcm8gYW5kIG5lZ2F0aXZlIGNvdW50cy4KCiAgICAgICAgaWYgaXRlcmFibGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoaXRlcmFibGUsIE1hcHBpbmcpOgogICAgICAgICAgICAgICAgaWYgc2VsZjoKICAgICAgICAgICAgICAgICAgICBzZWxmX2dldCA9IHNlbGYuZ2V0CiAgICAgICAgICAgICAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIGl0ZXJhYmxlLml0ZW1zKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGZbZWxlbV0gPSBjb3VudCArIHNlbGZfZ2V0KGVsZW0sIDApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHN1cGVyKCkudXBkYXRlKGl0ZXJhYmxlKSAjIGZhc3QgcGF0aCB3aGVuIGNvdW50ZXIgaXMgZW1wdHkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIF9jb3VudF9lbGVtZW50cyhzZWxmLCBpdGVyYWJsZSkKICAgICAgICBpZiBrd2RzOgogICAgICAgICAgICBzZWxmLnVwZGF0ZShrd2RzKQoKICAgIGRlZiBzdWJ0cmFjdChzZWxmLCBpdGVyYWJsZT1Ob25lLCAqKmt3ZHMpOgogICAgICAgICcnJ0xpa2UgZGljdC51cGRhdGUoKSBidXQgc3VidHJhY3RzIGNvdW50cyBpbnN0ZWFkIG9mIHJlcGxhY2luZyB0aGVtLgogICAgICAgIENvdW50cyBjYW4gYmUgcmVkdWNlZCBiZWxvdyB6ZXJvLiAgQm90aCB0aGUgaW5wdXRzIGFuZCBvdXRwdXRzIGFyZQogICAgICAgIGFsbG93ZWQgdG8gY29udGFpbiB6ZXJvIGFuZCBuZWdhdGl2ZSBjb3VudHMuCgogICAgICAgIFNvdXJjZSBjYW4gYmUgYW4gaXRlcmFibGUsIGEgZGljdGlvbmFyeSwgb3IgYW5vdGhlciBDb3VudGVyIGluc3RhbmNlLgoKICAgICAgICA+Pj4gYyA9IENvdW50ZXIoJ3doaWNoJykKICAgICAgICA+Pj4gYy5zdWJ0cmFjdCgnd2l0Y2gnKSAgICAgICAgICAgICAjIHN1YnRyYWN0IGVsZW1lbnRzIGZyb20gYW5vdGhlciBpdGVyYWJsZQogICAgICAgID4+PiBjLnN1YnRyYWN0KENvdW50ZXIoJ3dhdGNoJykpICAgICMgc3VidHJhY3QgZWxlbWVudHMgZnJvbSBhbm90aGVyIGNvdW50ZXIKICAgICAgICA+Pj4gY1snaCddICAgICAgICAgICAgICAgICAgICAgICAgICAjIDIgaW4gd2hpY2gsIG1pbnVzIDEgaW4gd2l0Y2gsIG1pbnVzIDEgaW4gd2F0Y2gKICAgICAgICAwCiAgICAgICAgPj4+IGNbJ3cnXSAgICAgICAgICAgICAgICAgICAgICAgICAgIyAxIGluIHdoaWNoLCBtaW51cyAxIGluIHdpdGNoLCBtaW51cyAxIGluIHdhdGNoCiAgICAgICAgLTEKCiAgICAgICAgJycnCiAgICAgICAgaWYgaXRlcmFibGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGZfZ2V0ID0gc2VsZi5nZXQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShpdGVyYWJsZSwgTWFwcGluZyk6CiAgICAgICAgICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gaXRlcmFibGUuaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICBzZWxmW2VsZW1dID0gc2VsZl9nZXQoZWxlbSwgMCkgLSBjb3VudAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZm9yIGVsZW0gaW4gaXRlcmFibGU6CiAgICAgICAgICAgICAgICAgICAgc2VsZltlbGVtXSA9IHNlbGZfZ2V0KGVsZW0sIDApIC0gMQogICAgICAgIGlmIGt3ZHM6CiAgICAgICAgICAgIHNlbGYuc3VidHJhY3Qoa3dkcykKCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICAnUmV0dXJuIGEgc2hhbGxvdyBjb3B5LicKICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18oc2VsZikKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18sIChkaWN0KHNlbGYpLCkKCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwgZWxlbSk6CiAgICAgICAgJ0xpa2UgZGljdC5fX2RlbGl0ZW1fXygpIGJ1dCBkb2VzIG5vdCByYWlzZSBLZXlFcnJvciBmb3IgbWlzc2luZyB2YWx1ZXMuJwogICAgICAgIGlmIGVsZW0gaW4gc2VsZjoKICAgICAgICAgICAgc3VwZXIoKS5fX2RlbGl0ZW1fXyhlbGVtKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICBpZiBub3Qgc2VsZjoKICAgICAgICAgICAgcmV0dXJuICclcygpJyAlIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpdGVtcyA9ICcsICcuam9pbihtYXAoJyVyOiAlcicuX19tb2RfXywgc2VsZi5tb3N0X2NvbW1vbigpKSkKICAgICAgICAgICAgcmV0dXJuICclcyh7JXN9KScgJSAoc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIGl0ZW1zKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgICAgICMgaGFuZGxlIGNhc2Ugd2hlcmUgdmFsdWVzIGFyZSBub3Qgb3JkZXJhYmxlCiAgICAgICAgICAgIHJldHVybiAnezB9KHsxIXJ9KScuZm9ybWF0KHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBkaWN0KHNlbGYpKQoKICAgICMgTXVsdGlzZXQtc3R5bGUgbWF0aGVtYXRpY2FsIG9wZXJhdGlvbnMgZGlzY3Vzc2VkIGluOgogICAgIyAgICAgICBLbnV0aCBUQU9DUCBWb2x1bWUgSUkgc2VjdGlvbiA0LjYuMyBleGVyY2lzZSAxOQogICAgIyAgICAgICBhbmQgYXQgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NdWx0aXNldAogICAgIwogICAgIyBPdXRwdXRzIGd1YXJhbnRlZWQgdG8gb25seSBpbmNsdWRlIHBvc2l0aXZlIGNvdW50cy4KICAgICMKICAgICMgVG8gc3RyaXAgbmVnYXRpdmUgYW5kIHplcm8gY291bnRzLCBhZGQtaW4gYW4gZW1wdHkgY291bnRlcjoKICAgICMgICAgICAgYyArPSBDb3VudGVyKCkKCiAgICBkZWYgX19hZGRfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgJycnQWRkIGNvdW50cyBmcm9tIHR3byBjb3VudGVycy4KCiAgICAgICAgPj4+IENvdW50ZXIoJ2FiYmInKSArIENvdW50ZXIoJ2JjYycpCiAgICAgICAgQ291bnRlcih7J2InOiA0LCAnYyc6IDIsICdhJzogMX0pCgogICAgICAgICcnJwogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBDb3VudGVyKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgcmVzdWx0ID0gQ291bnRlcigpCiAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIHNlbGYuaXRlbXMoKToKICAgICAgICAgICAgbmV3Y291bnQgPSBjb3VudCArIG90aGVyW2VsZW1dCiAgICAgICAgICAgIGlmIG5ld2NvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IG5ld2NvdW50CiAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIG90aGVyLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGVsZW0gbm90IGluIHNlbGYgYW5kIGNvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IGNvdW50CiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBfX3N1Yl9fKHNlbGYsIG90aGVyKToKICAgICAgICAnJycgU3VidHJhY3QgY291bnQsIGJ1dCBrZWVwIG9ubHkgcmVzdWx0cyB3aXRoIHBvc2l0aXZlIGNvdW50cy4KCiAgICAgICAgPj4+IENvdW50ZXIoJ2FiYmJjJykgLSBDb3VudGVyKCdiY2NkJykKICAgICAgICBDb3VudGVyKHsnYic6IDIsICdhJzogMX0pCgogICAgICAgICcnJwogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBDb3VudGVyKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgcmVzdWx0ID0gQ291bnRlcigpCiAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIHNlbGYuaXRlbXMoKToKICAgICAgICAgICAgbmV3Y291bnQgPSBjb3VudCAtIG90aGVyW2VsZW1dCiAgICAgICAgICAgIGlmIG5ld2NvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IG5ld2NvdW50CiAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIG90aGVyLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGVsZW0gbm90IGluIHNlbGYgYW5kIGNvdW50IDwgMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IDAgLSBjb3VudAogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgX19vcl9fKHNlbGYsIG90aGVyKToKICAgICAgICAnJydVbmlvbiBpcyB0aGUgbWF4aW11bSBvZiB2YWx1ZSBpbiBlaXRoZXIgb2YgdGhlIGlucHV0IGNvdW50ZXJzLgoKICAgICAgICA+Pj4gQ291bnRlcignYWJiYicpIHwgQ291bnRlcignYmNjJykKICAgICAgICBDb3VudGVyKHsnYic6IDMsICdjJzogMiwgJ2EnOiAxfSkKCiAgICAgICAgJycnCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENvdW50ZXIpOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKICAgICAgICByZXN1bHQgPSBDb3VudGVyKCkKICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gc2VsZi5pdGVtcygpOgogICAgICAgICAgICBvdGhlcl9jb3VudCA9IG90aGVyW2VsZW1dCiAgICAgICAgICAgIG5ld2NvdW50ID0gb3RoZXJfY291bnQgaWYgY291bnQgPCBvdGhlcl9jb3VudCBlbHNlIGNvdW50CiAgICAgICAgICAgIGlmIG5ld2NvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IG5ld2NvdW50CiAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIG90aGVyLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGVsZW0gbm90IGluIHNlbGYgYW5kIGNvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IGNvdW50CiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBfX2FuZF9fKHNlbGYsIG90aGVyKToKICAgICAgICAnJycgSW50ZXJzZWN0aW9uIGlzIHRoZSBtaW5pbXVtIG9mIGNvcnJlc3BvbmRpbmcgY291bnRzLgogICAgCiAgICAgICAgPj4+IENvdW50ZXIoJ2FiYmInKSAmIENvdW50ZXIoJ2JjYycpCiAgICAgICAgQ291bnRlcih7J2InOiAxfSkKCiAgICAgICAgJycnCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENvdW50ZXIpOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKICAgICAgICByZXN1bHQgPSBDb3VudGVyKCkKICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gc2VsZi5pdGVtcygpOgogICAgICAgICAgICBvdGhlcl9jb3VudCA9IG90aGVyW2VsZW1dCiAgICAgICAgICAgIG5ld2NvdW50ID0gY291bnQgaWYgY291bnQgPCBvdGhlcl9jb3VudCBlbHNlIG90aGVyX2NvdW50CiAgICAgICAgICAgIGlmIG5ld2NvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IG5ld2NvdW50CiAgICAgICAgcmV0dXJuIHJlc3VsdAoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgIENoYWluTWFwIChoZWxwZXIgZm9yIGNvbmZpZ3BhcnNlcikKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpjbGFzcyBDaGFpbk1hcChNdXRhYmxlTWFwcGluZyk6CiAgICAnJycgQSBDaGFpbk1hcCBncm91cHMgbXVsdGlwbGUgZGljdHMgKG9yIG90aGVyIG1hcHBpbmdzKSB0b2dldGhlcgogICAgdG8gY3JlYXRlIGEgc2luZ2xlLCB1cGRhdGVhYmxlIHZpZXcuCgogICAgVGhlIHVuZGVybHlpbmcgbWFwcGluZ3MgYXJlIHN0b3JlZCBpbiBhIGxpc3QuICBUaGF0IGxpc3QgaXMgcHVibGljIGFuZCBjYW4KICAgIGFjY2Vzc2VkIG9yIHVwZGF0ZWQgdXNpbmcgdGhlICptYXBzKiBhdHRyaWJ1dGUuICBUaGVyZSBpcyBubyBvdGhlciBzdGF0ZS4KCiAgICBMb29rdXBzIHNlYXJjaCB0aGUgdW5kZXJseWluZyBtYXBwaW5ncyBzdWNjZXNzaXZlbHkgdW50aWwgYSBrZXkgaXMgZm91bmQuCiAgICBJbiBjb250cmFzdCwgd3JpdGVzLCB1cGRhdGVzLCBhbmQgZGVsZXRpb25zIG9ubHkgb3BlcmF0ZSBvbiB0aGUgZmlyc3QKICAgIG1hcHBpbmcuCgogICAgJycnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsICptYXBzKToKICAgICAgICAnJydJbml0aWFsaXplIGEgQ2hhaW5NYXAgYnkgc2V0dGluZyAqbWFwcyogdG8gdGhlIGdpdmVuIG1hcHBpbmdzLgogICAgICAgIElmIG5vIG1hcHBpbmdzIGFyZSBwcm92aWRlZCwgYSBzaW5nbGUgZW1wdHkgZGljdGlvbmFyeSBpcyB1c2VkLgoKICAgICAgICAnJycKICAgICAgICBzZWxmLm1hcHMgPSBsaXN0KG1hcHMpIG9yIFt7fV0gICAgICAgICAgIyBhbHdheXMgYXQgbGVhc3Qgb25lIG1hcAoKICAgIGRlZiBfX21pc3NpbmdfXyhzZWxmLCBrZXkpOgogICAgICAgIHJhaXNlIEtleUVycm9yKGtleSkKCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KToKICAgICAgICBmb3IgbWFwcGluZyBpbiBzZWxmLm1hcHM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJldHVybiBtYXBwaW5nW2tleV0gICAgICAgICAgICAgIyBjYW4ndCB1c2UgJ2tleSBpbiBtYXBwaW5nJyB3aXRoIGRlZmF1bHRkaWN0CiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICByZXR1cm4gc2VsZi5fX21pc3NpbmdfXyhrZXkpICAgICAgICAgICAgIyBzdXBwb3J0IHN1YmNsYXNzZXMgdGhhdCBkZWZpbmUgX19taXNzaW5nX18KCiAgICBkZWYgZ2V0KHNlbGYsIGtleSwgZGVmYXVsdD1Ob25lKToKICAgICAgICByZXR1cm4gc2VsZltrZXldIGlmIGtleSBpbiBzZWxmIGVsc2UgZGVmYXVsdAoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiBsZW4oc2V0KCkudW5pb24oKnNlbGYubWFwcykpICAgICAjIHJldXNlcyBzdG9yZWQgaGFzaCB2YWx1ZXMgaWYgcG9zc2libGUKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGl0ZXIoc2V0KCkudW5pb24oKnNlbGYubWFwcykpCgogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOgogICAgICAgIHJldHVybiBhbnkoa2V5IGluIG0gZm9yIG0gaW4gc2VsZi5tYXBzKQoKICAgIGRlZiBfX2Jvb2xfXyhzZWxmKToKICAgICAgICByZXR1cm4gYW55KHNlbGYubWFwcykKCiAgICAjZml4bWUsIGJyeXRob24KICAgICNAX3JlY3Vyc2l2ZV9yZXByKCkKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gJ3swLl9fY2xhc3NfXy5fX25hbWVfX30oezF9KScuZm9ybWF0KAogICAgICAgICAgICBzZWxmLCAnLCAnLmpvaW4obWFwKHJlcHIsIHNlbGYubWFwcykpKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gJywnLmpvaW4oc3RyKF9tYXApIGZvciBfbWFwIGluIHNlbGYubWFwcykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9ta2V5cyhjbHMsIGl0ZXJhYmxlLCAqYXJncyk6CiAgICAgICAgJ0NyZWF0ZSBhIENoYWluTWFwIHdpdGggYSBzaW5nbGUgZGljdCBjcmVhdGVkIGZyb20gdGhlIGl0ZXJhYmxlLicKICAgICAgICByZXR1cm4gY2xzKGRpY3QuZnJvbWtleXMoaXRlcmFibGUsICphcmdzKSkKCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICAnTmV3IENoYWluTWFwIG9yIHN1YmNsYXNzIHdpdGggYSBuZXcgY29weSBvZiBtYXBzWzBdIGFuZCByZWZzIHRvIG1hcHNbMTpdJwogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXyhzZWxmLm1hcHNbMF0uY29weSgpLCAqc2VsZi5tYXBzWzE6XSkKCiAgICBfX2NvcHlfXyA9IGNvcHkKCiAgICBkZWYgbmV3X2NoaWxkKHNlbGYpOiAgICAgICAgICAgICAgICAgICAgICAgICMgbGlrZSBEamFuZ28ncyBDb250ZXh0LnB1c2goKQogICAgICAgICdOZXcgQ2hhaW5NYXAgd2l0aCBhIG5ldyBkaWN0IGZvbGxvd2VkIGJ5IGFsbCBwcmV2aW91cyBtYXBzLicKICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18oe30sICpzZWxmLm1hcHMpCgogICAgQHByb3BlcnR5CiAgICBkZWYgcGFyZW50cyhzZWxmKTogICAgICAgICAgICAgICAgICAgICAgICAgICMgbGlrZSBEamFuZ28ncyBDb250ZXh0LnBvcCgpCiAgICAgICAgJ05ldyBDaGFpbk1hcCBmcm9tIG1hcHNbMTpdLicKICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18oKnNlbGYubWFwc1sxOl0pCgogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgdmFsdWUpOgogICAgICAgIHNlbGYubWFwc1swXVtrZXldID0gdmFsdWUKCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRlbCBzZWxmLm1hcHNbMF1ba2V5XQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3IoJ0tleSBub3QgZm91bmQgaW4gdGhlIGZpcnN0IG1hcHBpbmc6IHshcn0nLmZvcm1hdChrZXkpKQoKICAgIGRlZiBwb3BpdGVtKHNlbGYpOgogICAgICAgICdSZW1vdmUgYW5kIHJldHVybiBhbiBpdGVtIHBhaXIgZnJvbSBtYXBzWzBdLiBSYWlzZSBLZXlFcnJvciBpcyBtYXBzWzBdIGlzIGVtcHR5LicKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLm1hcHNbMF0ucG9waXRlbSgpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICByYWlzZSBLZXlFcnJvcignTm8ga2V5cyBmb3VuZCBpbiB0aGUgZmlyc3QgbWFwcGluZy4nKQoKICAgIGRlZiBwb3Aoc2VsZiwga2V5LCAqYXJncyk6CiAgICAgICAgJ1JlbW92ZSAqa2V5KiBmcm9tIG1hcHNbMF0gYW5kIHJldHVybiBpdHMgdmFsdWUuIFJhaXNlIEtleUVycm9yIGlmICprZXkqIG5vdCBpbiBtYXBzWzBdLicKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLm1hcHNbMF0ucG9wKGtleSwgKmFyZ3MpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAjcmFpc2UgS2V5RXJyb3IoJ0tleSBub3QgZm91bmQgaW4gdGhlIGZpcnN0IG1hcHBpbmc6IHshcn0nLmZvcm1hdChrZXkpKQogICAgICAgICAgICByYWlzZSBLZXlFcnJvcignS2V5IG5vdCBmb3VuZCBpbiB0aGUgZmlyc3QgbWFwcGluZzogJXMnICUga2V5KQoKICAgIGRlZiBjbGVhcihzZWxmKToKICAgICAgICAnQ2xlYXIgbWFwc1swXSwgbGVhdmluZyBtYXBzWzE6XSBpbnRhY3QuJwogICAgICAgIHNlbGYubWFwc1swXS5jbGVhcigpCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIFVzZXJEaWN0CiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpjbGFzcyBVc2VyRGljdChNdXRhYmxlTWFwcGluZyk6CgogICAgIyBTdGFydCBieSBmaWxsaW5nLW91dCB0aGUgYWJzdHJhY3QgbWV0aG9kcwogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRpY3Q9Tm9uZSwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuZGF0YSA9IHt9CiAgICAgICAgaWYgZGljdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi51cGRhdGUoZGljdCkKICAgICAgICBpZiBsZW4oa3dhcmdzKToKICAgICAgICAgICAgc2VsZi51cGRhdGUoa3dhcmdzKQogICAgZGVmIF9fbGVuX18oc2VsZik6IHJldHVybiBsZW4oc2VsZi5kYXRhKQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6CiAgICAgICAgaWYga2V5IGluIHNlbGYuZGF0YToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZGF0YVtrZXldCiAgICAgICAgaWYgaGFzYXR0cihzZWxmLl9fY2xhc3NfXywgIl9fbWlzc2luZ19fIik6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXy5fX21pc3NpbmdfXyhzZWxmLCBrZXkpCiAgICAgICAgcmFpc2UgS2V5RXJyb3Ioa2V5KQogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgaXRlbSk6IHNlbGYuZGF0YVtrZXldID0gaXRlbQogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGtleSk6IGRlbCBzZWxmLmRhdGFba2V5XQogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBpdGVyKHNlbGYuZGF0YSkKCiAgICAjIE1vZGlmeSBfX2NvbnRhaW5zX18gdG8gd29yayBjb3JyZWN0bHkgd2hlbiBfX21pc3NpbmdfXyBpcyBwcmVzZW50CiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGtleSk6CiAgICAgICAgcmV0dXJuIGtleSBpbiBzZWxmLmRhdGEKCiAgICAjIE5vdywgYWRkIHRoZSBtZXRob2RzIGluIGRpY3RzIGJ1dCBub3QgaW4gTXV0YWJsZU1hcHBpbmcKICAgIGRlZiBfX3JlcHJfXyhzZWxmKTogcmV0dXJuIHJlcHIoc2VsZi5kYXRhKQogICAgZGVmIGNvcHkoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fX2NsYXNzX18gaXMgVXNlckRpY3Q6CiAgICAgICAgICAgIHJldHVybiBVc2VyRGljdChzZWxmLmRhdGEuY29weSgpKQogICAgICAgIGltcG9ydCBjb3B5CiAgICAgICAgZGF0YSA9IHNlbGYuZGF0YQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5kYXRhID0ge30KICAgICAgICAgICAgYyA9IGNvcHkuY29weShzZWxmKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHNlbGYuZGF0YSA9IGRhdGEKICAgICAgICBjLnVwZGF0ZShzZWxmKQogICAgICAgIHJldHVybiBjCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9ta2V5cyhjbHMsIGl0ZXJhYmxlLCB2YWx1ZT1Ob25lKToKICAgICAgICBkID0gY2xzKCkKICAgICAgICBmb3Iga2V5IGluIGl0ZXJhYmxlOgogICAgICAgICAgICBkW2tleV0gPSB2YWx1ZQogICAgICAgIHJldHVybiBkCgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyBVc2VyTGlzdAojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgVXNlclN0cmluZwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwo=',
'/Lib/functools.py':'IiIiZnVuY3Rvb2xzLnB5IC0gVG9vbHMgZm9yIHdvcmtpbmcgd2l0aCBmdW5jdGlvbnMgYW5kIGNhbGxhYmxlIG9iamVjdHMKIiIiCiMgUHl0aG9uIG1vZHVsZSB3cmFwcGVyIGZvciBfZnVuY3Rvb2xzIEMgbW9kdWxlCiMgdG8gYWxsb3cgdXRpbGl0aWVzIHdyaXR0ZW4gaW4gUHl0aG9uIHRvIGJlIGFkZGVkCiMgdG8gdGhlIGZ1bmN0b29scyBtb2R1bGUuCiMgV3JpdHRlbiBieSBOaWNrIENvZ2hsYW4gPG5jb2dobGFuIGF0IGdtYWlsLmNvbT4KIyBhbmQgUmF5bW9uZCBIZXR0aW5nZXIgPHB5dGhvbiBhdCByY24uY29tPgojICAgQ29weXJpZ2h0IChDKSAyMDA2LTIwMTAgUHl0aG9uIFNvZnR3YXJlIEZvdW5kYXRpb24uCiMgU2VlIEMgc291cmNlIGNvZGUgZm9yIF9mdW5jdG9vbHMgY3JlZGl0cy9jb3B5cmlnaHQKCl9fYWxsX18gPSBbJ3VwZGF0ZV93cmFwcGVyJywgJ3dyYXBzJywgJ1dSQVBQRVJfQVNTSUdOTUVOVFMnLCAnV1JBUFBFUl9VUERBVEVTJywKICAgICAgICAgICAndG90YWxfb3JkZXJpbmcnLCAnY21wX3RvX2tleScsICdscnVfY2FjaGUnLCAncmVkdWNlJywgJ3BhcnRpYWwnXQoKZnJvbSBfZnVuY3Rvb2xzIGltcG9ydCBwYXJ0aWFsLCByZWR1Y2UKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgbmFtZWR0dXBsZQp0cnk6CiAgICBmcm9tIF90aHJlYWQgaW1wb3J0IGFsbG9jYXRlX2xvY2sgYXMgTG9jawpleGNlcHQ6CiAgICBmcm9tIF9kdW1teV90aHJlYWQgaW1wb3J0IGFsbG9jYXRlX2xvY2sgYXMgTG9jawoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyB1cGRhdGVfd3JhcHBlcigpIGFuZCB3cmFwcygpIGRlY29yYXRvcgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyB1cGRhdGVfd3JhcHBlcigpIGFuZCB3cmFwcygpIGFyZSB0b29scyB0byBoZWxwIHdyaXRlCiMgd3JhcHBlciBmdW5jdGlvbnMgdGhhdCBjYW4gaGFuZGxlIG5haXZlIGludHJvc3BlY3Rpb24KCldSQVBQRVJfQVNTSUdOTUVOVFMgPSAoJ19fbW9kdWxlX18nLCAnX19uYW1lX18nLCAnX19xdWFsbmFtZV9fJywgJ19fZG9jX18nLAogICAgICAgICAgICAgICAgICAgICAgICdfX2Fubm90YXRpb25zX18nKQpXUkFQUEVSX1VQREFURVMgPSAoJ19fZGljdF9fJywpCmRlZiB1cGRhdGVfd3JhcHBlcih3cmFwcGVyLAogICAgICAgICAgICAgICAgICAgd3JhcHBlZCwKICAgICAgICAgICAgICAgICAgIGFzc2lnbmVkID0gV1JBUFBFUl9BU1NJR05NRU5UUywKICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQgPSBXUkFQUEVSX1VQREFURVMpOgogICAgIiIiVXBkYXRlIGEgd3JhcHBlciBmdW5jdGlvbiB0byBsb29rIGxpa2UgdGhlIHdyYXBwZWQgZnVuY3Rpb24KCiAgICAgICB3cmFwcGVyIGlzIHRoZSBmdW5jdGlvbiB0byBiZSB1cGRhdGVkCiAgICAgICB3cmFwcGVkIGlzIHRoZSBvcmlnaW5hbCBmdW5jdGlvbgogICAgICAgYXNzaWduZWQgaXMgYSB0dXBsZSBuYW1pbmcgdGhlIGF0dHJpYnV0ZXMgYXNzaWduZWQgZGlyZWN0bHkKICAgICAgIGZyb20gdGhlIHdyYXBwZWQgZnVuY3Rpb24gdG8gdGhlIHdyYXBwZXIgZnVuY3Rpb24gKGRlZmF1bHRzIHRvCiAgICAgICBmdW5jdG9vbHMuV1JBUFBFUl9BU1NJR05NRU5UUykKICAgICAgIHVwZGF0ZWQgaXMgYSB0dXBsZSBuYW1pbmcgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIHdyYXBwZXIgdGhhdAogICAgICAgYXJlIHVwZGF0ZWQgd2l0aCB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGUgZnJvbSB0aGUgd3JhcHBlZAogICAgICAgZnVuY3Rpb24gKGRlZmF1bHRzIHRvIGZ1bmN0b29scy5XUkFQUEVSX1VQREFURVMpCiAgICAiIiIKICAgIHdyYXBwZXIuX193cmFwcGVkX18gPSB3cmFwcGVkCiAgICBmb3IgYXR0ciBpbiBhc3NpZ25lZDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHZhbHVlID0gZ2V0YXR0cih3cmFwcGVkLCBhdHRyKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNldGF0dHIod3JhcHBlciwgYXR0ciwgdmFsdWUpCiAgICBmb3IgYXR0ciBpbiB1cGRhdGVkOgogICAgICAgIGdldGF0dHIod3JhcHBlciwgYXR0cikudXBkYXRlKGdldGF0dHIod3JhcHBlZCwgYXR0ciwge30pKQogICAgIyBSZXR1cm4gdGhlIHdyYXBwZXIgc28gdGhpcyBjYW4gYmUgdXNlZCBhcyBhIGRlY29yYXRvciB2aWEgcGFydGlhbCgpCiAgICByZXR1cm4gd3JhcHBlcgoKZGVmIHdyYXBzKHdyYXBwZWQsCiAgICAgICAgICBhc3NpZ25lZCA9IFdSQVBQRVJfQVNTSUdOTUVOVFMsCiAgICAgICAgICB1cGRhdGVkID0gV1JBUFBFUl9VUERBVEVTKToKICAgICIiIkRlY29yYXRvciBmYWN0b3J5IHRvIGFwcGx5IHVwZGF0ZV93cmFwcGVyKCkgdG8gYSB3cmFwcGVyIGZ1bmN0aW9uCgogICAgICAgUmV0dXJucyBhIGRlY29yYXRvciB0aGF0IGludm9rZXMgdXBkYXRlX3dyYXBwZXIoKSB3aXRoIHRoZSBkZWNvcmF0ZWQKICAgICAgIGZ1bmN0aW9uIGFzIHRoZSB3cmFwcGVyIGFyZ3VtZW50IGFuZCB0aGUgYXJndW1lbnRzIHRvIHdyYXBzKCkgYXMgdGhlCiAgICAgICByZW1haW5pbmcgYXJndW1lbnRzLiBEZWZhdWx0IGFyZ3VtZW50cyBhcmUgYXMgZm9yIHVwZGF0ZV93cmFwcGVyKCkuCiAgICAgICBUaGlzIGlzIGEgY29udmVuaWVuY2UgZnVuY3Rpb24gdG8gc2ltcGxpZnkgYXBwbHlpbmcgcGFydGlhbCgpIHRvCiAgICAgICB1cGRhdGVfd3JhcHBlcigpLgogICAgIiIiCiAgICByZXR1cm4gcGFydGlhbCh1cGRhdGVfd3JhcHBlciwgd3JhcHBlZD13cmFwcGVkLAogICAgICAgICAgICAgICAgICAgYXNzaWduZWQ9YXNzaWduZWQsIHVwZGF0ZWQ9dXBkYXRlZCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgdG90YWxfb3JkZXJpbmcgY2xhc3MgZGVjb3JhdG9yCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWYgdG90YWxfb3JkZXJpbmcoY2xzKToKICAgICIiIkNsYXNzIGRlY29yYXRvciB0aGF0IGZpbGxzIGluIG1pc3Npbmcgb3JkZXJpbmcgbWV0aG9kcyIiIgogICAgY29udmVydCA9IHsKICAgICAgICAnX19sdF9fJzogWygnX19ndF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3QgKHNlbGYgPCBvdGhlciBvciBzZWxmID09IG90aGVyKSksCiAgICAgICAgICAgICAgICAgICAoJ19fbGVfXycsIGxhbWJkYSBzZWxmLCBvdGhlcjogc2VsZiA8IG90aGVyIG9yIHNlbGYgPT0gb3RoZXIpLAogICAgICAgICAgICAgICAgICAgKCdfX2dlX18nLCBsYW1iZGEgc2VsZiwgb3RoZXI6IG5vdCBzZWxmIDwgb3RoZXIpXSwKICAgICAgICAnX19sZV9fJzogWygnX19nZV9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3Qgc2VsZiA8PSBvdGhlciBvciBzZWxmID09IG90aGVyKSwKICAgICAgICAgICAgICAgICAgICgnX19sdF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBzZWxmIDw9IG90aGVyIGFuZCBub3Qgc2VsZiA9PSBvdGhlciksCiAgICAgICAgICAgICAgICAgICAoJ19fZ3RfXycsIGxhbWJkYSBzZWxmLCBvdGhlcjogbm90IHNlbGYgPD0gb3RoZXIpXSwKICAgICAgICAnX19ndF9fJzogWygnX19sdF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3QgKHNlbGYgPiBvdGhlciBvciBzZWxmID09IG90aGVyKSksCiAgICAgICAgICAgICAgICAgICAoJ19fZ2VfXycsIGxhbWJkYSBzZWxmLCBvdGhlcjogc2VsZiA+IG90aGVyIG9yIHNlbGYgPT0gb3RoZXIpLAogICAgICAgICAgICAgICAgICAgKCdfX2xlX18nLCBsYW1iZGEgc2VsZiwgb3RoZXI6IG5vdCBzZWxmID4gb3RoZXIpXSwKICAgICAgICAnX19nZV9fJzogWygnX19sZV9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiAobm90IHNlbGYgPj0gb3RoZXIpIG9yIHNlbGYgPT0gb3RoZXIpLAogICAgICAgICAgICAgICAgICAgKCdfX2d0X18nLCBsYW1iZGEgc2VsZiwgb3RoZXI6IHNlbGYgPj0gb3RoZXIgYW5kIG5vdCBzZWxmID09IG90aGVyKSwKICAgICAgICAgICAgICAgICAgICgnX19sdF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3Qgc2VsZiA+PSBvdGhlcildCiAgICB9CiAgICAjIEZpbmQgdXNlci1kZWZpbmVkIGNvbXBhcmlzb25zIChub3QgdGhvc2UgaW5oZXJpdGVkIGZyb20gb2JqZWN0KS4KICAgIHJvb3RzID0gW29wIGZvciBvcCBpbiBjb252ZXJ0IGlmIGdldGF0dHIoY2xzLCBvcCwgTm9uZSkgaXMgbm90IGdldGF0dHIob2JqZWN0LCBvcCwgTm9uZSldCiAgICBpZiBub3Qgcm9vdHM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbXVzdCBkZWZpbmUgYXQgbGVhc3Qgb25lIG9yZGVyaW5nIG9wZXJhdGlvbjogPCA+IDw9ID49JykKICAgIHJvb3QgPSBtYXgocm9vdHMpICAgICAgICMgcHJlZmVyIF9fbHRfXyB0byBfX2xlX18gdG8gX19ndF9fIHRvIF9fZ2VfXwogICAgZm9yIG9wbmFtZSwgb3BmdW5jIGluIGNvbnZlcnRbcm9vdF06CiAgICAgICAgaWYgb3BuYW1lIG5vdCBpbiByb290czoKICAgICAgICAgICAgb3BmdW5jLl9fbmFtZV9fID0gb3BuYW1lCiAgICAgICAgICAgIG9wZnVuYy5fX2RvY19fID0gZ2V0YXR0cihpbnQsIG9wbmFtZSkuX19kb2NfXwogICAgICAgICAgICBzZXRhdHRyKGNscywgb3BuYW1lLCBvcGZ1bmMpCiAgICByZXR1cm4gY2xzCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIGNtcF90b19rZXkoKSBmdW5jdGlvbiBjb252ZXJ0ZXIKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZiBjbXBfdG9fa2V5KG15Y21wKToKICAgICIiIkNvbnZlcnQgYSBjbXA9IGZ1bmN0aW9uIGludG8gYSBrZXk9IGZ1bmN0aW9uIiIiCiAgICBjbGFzcyBLKG9iamVjdCk6CiAgICAgICAgX19zbG90c19fID0gWydvYmonXQogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvYmopOgogICAgICAgICAgICBzZWxmLm9iaiA9IG9iagogICAgICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgICAgICByZXR1cm4gbXljbXAoc2VsZi5vYmosIG90aGVyLm9iaikgPCAwCiAgICAgICAgZGVmIF9fZ3RfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgICAgIHJldHVybiBteWNtcChzZWxmLm9iaiwgb3RoZXIub2JqKSA+IDAKICAgICAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopID09IDAKICAgICAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopIDw9IDAKICAgICAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopID49IDAKICAgICAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopICE9IDAKICAgICAgICBfX2hhc2hfXyA9IE5vbmUKICAgIHJldHVybiBLCgp0cnk6CiAgICBmcm9tIF9mdW5jdG9vbHMgaW1wb3J0IGNtcF90b19rZXkKZXhjZXB0IEltcG9ydEVycm9yOgogICAgcGFzcwoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyBMUlUgQ2FjaGUgZnVuY3Rpb24gZGVjb3JhdG9yCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpfQ2FjaGVJbmZvID0gbmFtZWR0dXBsZSgiQ2FjaGVJbmZvIiwgWyJoaXRzIiwgIm1pc3NlcyIsICJtYXhzaXplIiwgImN1cnJzaXplIl0pCgpjbGFzcyBfSGFzaGVkU2VxKGxpc3QpOgogICAgX19zbG90c19fID0gJ2hhc2h2YWx1ZScKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdHVwLCBoYXNoPWhhc2gpOgogICAgICAgIHNlbGZbOl0gPSB0dXAKICAgICAgICBzZWxmLmhhc2h2YWx1ZSA9IGhhc2godHVwKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5oYXNodmFsdWUKCmRlZiBfbWFrZV9rZXkoYXJncywga3dkcywgdHlwZWQsCiAgICAgICAgICAgICBrd2RfbWFyayA9IChvYmplY3QoKSwpLAogICAgICAgICAgICAgZmFzdHR5cGVzID0ge2ludCwgc3RyLCBmcm96ZW5zZXQsIHR5cGUoTm9uZSl9LAogICAgICAgICAgICAgc29ydGVkPXNvcnRlZCwgdHVwbGU9dHVwbGUsIHR5cGU9dHlwZSwgbGVuPWxlbik6CiAgICAnTWFrZSBhIGNhY2hlIGtleSBmcm9tIG9wdGlvbmFsbHkgdHlwZWQgcG9zaXRpb25hbCBhbmQga2V5d29yZCBhcmd1bWVudHMnCiAgICBrZXkgPSBhcmdzCiAgICBpZiBrd2RzOgogICAgICAgIHNvcnRlZF9pdGVtcyA9IHNvcnRlZChrd2RzLml0ZW1zKCkpCiAgICAgICAga2V5ICs9IGt3ZF9tYXJrCiAgICAgICAgZm9yIGl0ZW0gaW4gc29ydGVkX2l0ZW1zOgogICAgICAgICAgICBrZXkgKz0gaXRlbQogICAgaWYgdHlwZWQ6CiAgICAgICAga2V5ICs9IHR1cGxlKHR5cGUodikgZm9yIHYgaW4gYXJncykKICAgICAgICBpZiBrd2RzOgogICAgICAgICAgICBrZXkgKz0gdHVwbGUodHlwZSh2KSBmb3IgaywgdiBpbiBzb3J0ZWRfaXRlbXMpCiAgICBlbGlmIGxlbihrZXkpID09IDEgYW5kIHR5cGUoa2V5WzBdKSBpbiBmYXN0dHlwZXM6CiAgICAgICAgcmV0dXJuIGtleVswXQogICAgcmV0dXJuIF9IYXNoZWRTZXEoa2V5KQoKZGVmIGxydV9jYWNoZShtYXhzaXplPTEyOCwgdHlwZWQ9RmFsc2UpOgogICAgIiIiTGVhc3QtcmVjZW50bHktdXNlZCBjYWNoZSBkZWNvcmF0b3IuCgogICAgSWYgKm1heHNpemUqIGlzIHNldCB0byBOb25lLCB0aGUgTFJVIGZlYXR1cmVzIGFyZSBkaXNhYmxlZCBhbmQgdGhlIGNhY2hlCiAgICBjYW4gZ3JvdyB3aXRob3V0IGJvdW5kLgoKICAgIElmICp0eXBlZCogaXMgVHJ1ZSwgYXJndW1lbnRzIG9mIGRpZmZlcmVudCB0eXBlcyB3aWxsIGJlIGNhY2hlZCBzZXBhcmF0ZWx5LgogICAgRm9yIGV4YW1wbGUsIGYoMy4wKSBhbmQgZigzKSB3aWxsIGJlIHRyZWF0ZWQgYXMgZGlzdGluY3QgY2FsbHMgd2l0aAogICAgZGlzdGluY3QgcmVzdWx0cy4KCiAgICBBcmd1bWVudHMgdG8gdGhlIGNhY2hlZCBmdW5jdGlvbiBtdXN0IGJlIGhhc2hhYmxlLgoKICAgIFZpZXcgdGhlIGNhY2hlIHN0YXRpc3RpY3MgbmFtZWQgdHVwbGUgKGhpdHMsIG1pc3NlcywgbWF4c2l6ZSwgY3VycnNpemUpCiAgICB3aXRoIGYuY2FjaGVfaW5mbygpLiAgQ2xlYXIgdGhlIGNhY2hlIGFuZCBzdGF0aXN0aWNzIHdpdGggZi5jYWNoZV9jbGVhcigpLgogICAgQWNjZXNzIHRoZSB1bmRlcmx5aW5nIGZ1bmN0aW9uIHdpdGggZi5fX3dyYXBwZWRfXy4KCiAgICBTZWU6ICBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NhY2hlX2FsZ29yaXRobXMjTGVhc3RfUmVjZW50bHlfVXNlZAoKICAgICIiIgoKICAgICMgVXNlcnMgc2hvdWxkIG9ubHkgYWNjZXNzIHRoZSBscnVfY2FjaGUgdGhyb3VnaCBpdHMgcHVibGljIEFQSToKICAgICMgICAgICAgY2FjaGVfaW5mbywgY2FjaGVfY2xlYXIsIGFuZCBmLl9fd3JhcHBlZF9fCiAgICAjIFRoZSBpbnRlcm5hbHMgb2YgdGhlIGxydV9jYWNoZSBhcmUgZW5jYXBzdWxhdGVkIGZvciB0aHJlYWQgc2FmZXR5IGFuZAogICAgIyB0byBhbGxvdyB0aGUgaW1wbGVtZW50YXRpb24gdG8gY2hhbmdlIChpbmNsdWRpbmcgYSBwb3NzaWJsZSBDIHZlcnNpb24pLgoKICAgICMgQ29uc3RhbnRzIHNoYXJlZCBieSBhbGwgbHJ1IGNhY2hlIGluc3RhbmNlczoKICAgIHNlbnRpbmVsID0gb2JqZWN0KCkgICAgICAgICAgIyB1bmlxdWUgb2JqZWN0IHVzZWQgdG8gc2lnbmFsIGNhY2hlIG1pc3NlcwogICAgbWFrZV9rZXkgPSBfbWFrZV9rZXkgICAgICAgICAjIGJ1aWxkIGEga2V5IGZyb20gdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cwogICAgUFJFViwgTkVYVCwgS0VZLCBSRVNVTFQgPSAwLCAxLCAyLCAzICAgIyBuYW1lcyBmb3IgdGhlIGxpbmsgZmllbGRzCgogICAgZGVmIGRlY29yYXRpbmdfZnVuY3Rpb24odXNlcl9mdW5jdGlvbik6CgogICAgICAgIGNhY2hlID0ge30KICAgICAgICBoaXRzID0gbWlzc2VzID0gY3VycnNpemUgPSAwCiAgICAgICAgZnVsbCA9IEZhbHNlCiAgICAgICAgY2FjaGVfZ2V0ID0gY2FjaGUuZ2V0ICAgICMgYm91bmQgbWV0aG9kIHRvIGxvb2t1cCBhIGtleSBvciByZXR1cm4gTm9uZQogICAgICAgIGxvY2sgPSBMb2NrKCkgICAgICAgICAgICAjIGJlY2F1c2UgbGlua2VkbGlzdCB1cGRhdGVzIGFyZW4ndCB0aHJlYWRzYWZlCiAgICAgICAgcm9vdCA9IFtdICAgICAgICAgICAgICAgICMgcm9vdCBvZiB0aGUgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0CiAgICAgICAgcm9vdFs6XSA9IFtyb290LCByb290LCBOb25lLCBOb25lXSAgICAgIyBpbml0aWFsaXplIGJ5IHBvaW50aW5nIHRvIHNlbGYKCiAgICAgICAgaWYgbWF4c2l6ZSA9PSAwOgoKICAgICAgICAgICAgZGVmIHdyYXBwZXIoKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgICAgICAgICAjIG5vIGNhY2hpbmcsIGp1c3QgYSBzdGF0aXN0aWNzIHVwZGF0ZSBhZnRlciBhIHN1Y2Nlc3NmdWwgY2FsbAogICAgICAgICAgICAgICAgbm9ubG9jYWwgbWlzc2VzCiAgICAgICAgICAgICAgICByZXN1bHQgPSB1c2VyX2Z1bmN0aW9uKCphcmdzLCAqKmt3ZHMpCiAgICAgICAgICAgICAgICBtaXNzZXMgKz0gMQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgICAgICBlbGlmIG1heHNpemUgaXMgTm9uZToKCiAgICAgICAgICAgIGRlZiB3cmFwcGVyKCphcmdzLCAqKmt3ZHMpOgogICAgICAgICAgICAgICAgIyBzaW1wbGUgY2FjaGluZyB3aXRob3V0IG9yZGVyaW5nIG9yIHNpemUgbGltaXQKICAgICAgICAgICAgICAgIG5vbmxvY2FsIGhpdHMsIG1pc3NlcywgY3VycnNpemUKICAgICAgICAgICAgICAgIGtleSA9IG1ha2Vfa2V5KGFyZ3MsIGt3ZHMsIHR5cGVkKQogICAgICAgICAgICAgICAgcmVzdWx0ID0gY2FjaGVfZ2V0KGtleSwgc2VudGluZWwpCiAgICAgICAgICAgICAgICBpZiByZXN1bHQgaXMgbm90IHNlbnRpbmVsOgogICAgICAgICAgICAgICAgICAgIGhpdHMgKz0gMQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHVzZXJfZnVuY3Rpb24oKmFyZ3MsICoqa3dkcykKICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSByZXN1bHQKICAgICAgICAgICAgICAgIG1pc3NlcyArPSAxCiAgICAgICAgICAgICAgICBjdXJyc2l6ZSArPSAxCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgICAgIGVsc2U6CgogICAgICAgICAgICBkZWYgd3JhcHBlcigqYXJncywgKiprd2RzKToKICAgICAgICAgICAgICAgICMgc2l6ZSBsaW1pdGVkIGNhY2hpbmcgdGhhdCB0cmFja3MgYWNjZXNzZXMgYnkgcmVjZW5jeQogICAgICAgICAgICAgICAgbm9ubG9jYWwgcm9vdCwgaGl0cywgbWlzc2VzLCBjdXJyc2l6ZSwgZnVsbAogICAgICAgICAgICAgICAga2V5ID0gbWFrZV9rZXkoYXJncywga3dkcywgdHlwZWQpCiAgICAgICAgICAgICAgICB3aXRoIGxvY2s6CiAgICAgICAgICAgICAgICAgICAgbGluayA9IGNhY2hlX2dldChrZXkpCiAgICAgICAgICAgICAgICAgICAgaWYgbGluayBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgIyBtb3ZlIHRoZSBsaW5rIHRvIHRoZSBmcm9udCBvZiB0aGUgY2lyY3VsYXIgcXVldWUKICAgICAgICAgICAgICAgICAgICAgICAgbGlua19wcmV2LCBsaW5rX25leHQsIGtleSwgcmVzdWx0ID0gbGluawogICAgICAgICAgICAgICAgICAgICAgICBsaW5rX3ByZXZbTkVYVF0gPSBsaW5rX25leHQKICAgICAgICAgICAgICAgICAgICAgICAgbGlua19uZXh0W1BSRVZdID0gbGlua19wcmV2CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSByb290W1BSRVZdCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RbTkVYVF0gPSByb290W1BSRVZdID0gbGluawogICAgICAgICAgICAgICAgICAgICAgICBsaW5rW1BSRVZdID0gbGFzdAogICAgICAgICAgICAgICAgICAgICAgICBsaW5rW05FWFRdID0gcm9vdAogICAgICAgICAgICAgICAgICAgICAgICBoaXRzICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgICAgICAgICAgICAgcmVzdWx0ID0gdXNlcl9mdW5jdGlvbigqYXJncywgKiprd2RzKQogICAgICAgICAgICAgICAgd2l0aCBsb2NrOgogICAgICAgICAgICAgICAgICAgIGlmIGtleSBpbiBjYWNoZToKICAgICAgICAgICAgICAgICAgICAgICAgIyBnZXR0aW5nIGhlcmUgbWVhbnMgdGhhdCB0aGlzIHNhbWUga2V5IHdhcyBhZGRlZCB0byB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgIyBjYWNoZSB3aGlsZSB0aGUgbG9jayB3YXMgcmVsZWFzZWQuICBzaW5jZSB0aGUgbGluawogICAgICAgICAgICAgICAgICAgICAgICAjIHVwZGF0ZSBpcyBhbHJlYWR5IGRvbmUsIHdlIG5lZWQgb25seSByZXR1cm4gdGhlCiAgICAgICAgICAgICAgICAgICAgICAgICMgY29tcHV0ZWQgcmVzdWx0IGFuZCB1cGRhdGUgdGhlIGNvdW50IG9mIG1pc3Nlcy4KICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgICAgIGVsaWYgZnVsbDoKICAgICAgICAgICAgICAgICAgICAgICAgIyB1c2Ugcm9vdCB0byBzdG9yZSB0aGUgbmV3IGtleSBhbmQgcmVzdWx0CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RbS0VZXSA9IGtleQogICAgICAgICAgICAgICAgICAgICAgICByb290W1JFU1VMVF0gPSByZXN1bHQKICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVba2V5XSA9IHJvb3QKICAgICAgICAgICAgICAgICAgICAgICAgIyBlbXB0eSB0aGUgb2xkZXN0IGxpbmsgYW5kIG1ha2UgaXQgdGhlIG5ldyByb290CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QgPSByb290W05FWFRdCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbCBjYWNoZVtyb290W0tFWV1dCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RbS0VZXSA9IHJvb3RbUkVTVUxUXSA9IE5vbmUKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAjIHB1dCByZXN1bHQgaW4gYSBuZXcgbGluayBhdCB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSByb290W1BSRVZdCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSBbbGFzdCwgcm9vdCwga2V5LCByZXN1bHRdCiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSBsYXN0W05FWFRdID0gcm9vdFtQUkVWXSA9IGxpbmsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycnNpemUgKz0gMQogICAgICAgICAgICAgICAgICAgICAgICBmdWxsID0gKGN1cnJzaXplID09IG1heHNpemUpCiAgICAgICAgICAgICAgICAgICAgbWlzc2VzICs9IDEKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKCiAgICAgICAgZGVmIGNhY2hlX2luZm8oKToKICAgICAgICAgICAgIiIiUmVwb3J0IGNhY2hlIHN0YXRpc3RpY3MiIiIKICAgICAgICAgICAgd2l0aCBsb2NrOgogICAgICAgICAgICAgICAgcmV0dXJuIF9DYWNoZUluZm8oaGl0cywgbWlzc2VzLCBtYXhzaXplLCBjdXJyc2l6ZSkKCiAgICAgICAgZGVmIGNhY2hlX2NsZWFyKCk6CiAgICAgICAgICAgICIiIkNsZWFyIHRoZSBjYWNoZSBhbmQgY2FjaGUgc3RhdGlzdGljcyIiIgogICAgICAgICAgICBub25sb2NhbCBoaXRzLCBtaXNzZXMsIGN1cnJzaXplLCBmdWxsCiAgICAgICAgICAgIHdpdGggbG9jazoKICAgICAgICAgICAgICAgIGNhY2hlLmNsZWFyKCkKICAgICAgICAgICAgICAgIHJvb3RbOl0gPSBbcm9vdCwgcm9vdCwgTm9uZSwgTm9uZV0KICAgICAgICAgICAgICAgIGhpdHMgPSBtaXNzZXMgPSBjdXJyc2l6ZSA9IDAKICAgICAgICAgICAgICAgIGZ1bGwgPSBGYWxzZQoKICAgICAgICB3cmFwcGVyLmNhY2hlX2luZm8gPSBjYWNoZV9pbmZvCiAgICAgICAgd3JhcHBlci5jYWNoZV9jbGVhciA9IGNhY2hlX2NsZWFyCiAgICAgICAgcmV0dXJuIHVwZGF0ZV93cmFwcGVyKHdyYXBwZXIsIHVzZXJfZnVuY3Rpb24pCgogICAgcmV0dXJuIGRlY29yYXRpbmdfZnVuY3Rpb24K',
'/Lib/weakref.py':'IiIiV2VhayByZWZlcmVuY2Ugc3VwcG9ydCBmb3IgUHl0aG9uLg0KDQpUaGlzIG1vZHVsZSBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBQRVAgMjA1Og0KDQpodHRwOi8vd3d3LnB5dGhvbi5vcmcvZGV2L3BlcHMvcGVwLTAyMDUvDQoiIiINCg0KIyBOYW1pbmcgY29udmVudGlvbjogVmFyaWFibGVzIG5hbWVkICJ3ciIgYXJlIHdlYWsgcmVmZXJlbmNlIG9iamVjdHM7DQojIHRoZXkgYXJlIGNhbGxlZCB0aGlzIGluc3RlYWQgb2YgInJlZiIgdG8gYXZvaWQgbmFtZSBjb2xsaXNpb25zIHdpdGgNCiMgdGhlIG1vZHVsZS1nbG9iYWwgcmVmKCkgZnVuY3Rpb24gaW1wb3J0ZWQgZnJvbSBfd2Vha3JlZi4NCg0KZnJvbSBfd2Vha3JlZiBpbXBvcnQgKA0KICAgICBnZXR3ZWFrcmVmY291bnQsDQogICAgIGdldHdlYWtyZWZzLA0KICAgICByZWYsDQogICAgIHByb3h5LA0KICAgICBDYWxsYWJsZVByb3h5VHlwZSwNCiAgICAgUHJveHlUeXBlLA0KICAgICBSZWZlcmVuY2VUeXBlKQ0KDQpmcm9tIF93ZWFrcmVmc2V0IGltcG9ydCBXZWFrU2V0LCBfSXRlcmF0aW9uR3VhcmQNCg0KaW1wb3J0IGNvbGxlY3Rpb25zICAjIEltcG9ydCBhZnRlciBfd2Vha3JlZiB0byBhdm9pZCBjaXJjdWxhciBpbXBvcnQuDQoNClByb3h5VHlwZXMgPSAoUHJveHlUeXBlLCBDYWxsYWJsZVByb3h5VHlwZSkNCg0KX19hbGxfXyA9IFsicmVmIiwgInByb3h5IiwgImdldHdlYWtyZWZjb3VudCIsICJnZXR3ZWFrcmVmcyIsDQogICAgICAgICAgICJXZWFrS2V5RGljdGlvbmFyeSIsICJSZWZlcmVuY2VUeXBlIiwgIlByb3h5VHlwZSIsDQogICAgICAgICAgICJDYWxsYWJsZVByb3h5VHlwZSIsICJQcm94eVR5cGVzIiwgIldlYWtWYWx1ZURpY3Rpb25hcnkiLA0KICAgICAgICAgICAiV2Vha1NldCJdDQoNCg0KY2xhc3MgV2Vha1ZhbHVlRGljdGlvbmFyeShjb2xsZWN0aW9ucy5NdXRhYmxlTWFwcGluZyk6DQogICAgIiIiTWFwcGluZyBjbGFzcyB0aGF0IHJlZmVyZW5jZXMgdmFsdWVzIHdlYWtseS4NCg0KICAgIEVudHJpZXMgaW4gdGhlIGRpY3Rpb25hcnkgd2lsbCBiZSBkaXNjYXJkZWQgd2hlbiBubyBzdHJvbmcNCiAgICByZWZlcmVuY2UgdG8gdGhlIHZhbHVlIGV4aXN0cyBhbnltb3JlDQogICAgIiIiDQogICAgIyBXZSBpbmhlcml0IHRoZSBjb25zdHJ1Y3RvciB3aXRob3V0IHdvcnJ5aW5nIGFib3V0IHRoZSBpbnB1dA0KICAgICMgZGljdGlvbmFyeTsgc2luY2UgaXQgdXNlcyBvdXIgLnVwZGF0ZSgpIG1ldGhvZCwgd2UgZ2V0IHRoZSByaWdodA0KICAgICMgY2hlY2tzIChpZiB0aGUgb3RoZXIgZGljdGlvbmFyeSBpcyBhIFdlYWtWYWx1ZURpY3Rpb25hcnksDQogICAgIyBvYmplY3RzIGFyZSB1bndyYXBwZWQgb24gdGhlIHdheSBvdXQsIGFuZCB3ZSBhbHdheXMgd3JhcCBvbiB0aGUNCiAgICAjIHdheSBpbikuDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3cpOg0KICAgICAgICBkZWYgcmVtb3ZlKHdyLCBzZWxmcmVmPXJlZihzZWxmKSk6DQogICAgICAgICAgICBzZWxmID0gc2VsZnJlZigpDQogICAgICAgICAgICBpZiBzZWxmIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIGlmIHNlbGYuX2l0ZXJhdGluZzoNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGVuZGluZ19yZW1vdmFscy5hcHBlbmQod3Iua2V5KQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLmRhdGFbd3Iua2V5XQ0KICAgICAgICBzZWxmLl9yZW1vdmUgPSByZW1vdmUNCiAgICAgICAgIyBBIGxpc3Qgb2Yga2V5cyB0byBiZSByZW1vdmVkDQogICAgICAgIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMgPSBbXQ0KICAgICAgICBzZWxmLl9pdGVyYXRpbmcgPSBzZXQoKQ0KICAgICAgICBzZWxmLmRhdGEgPSBkID0ge30NCiAgICAgICAgc2VsZi51cGRhdGUoKmFyZ3MsICoqa3cpDQoNCiAgICBkZWYgX2NvbW1pdF9yZW1vdmFscyhzZWxmKToNCiAgICAgICAgbCA9IHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMNCiAgICAgICAgZCA9IHNlbGYuZGF0YQ0KICAgICAgICAjIFdlIHNob3VsZG4ndCBlbmNvdW50ZXIgYW55IEtleUVycm9yLCBiZWNhdXNlIHRoaXMgbWV0aG9kIHNob3VsZA0KICAgICAgICAjIGFsd2F5cyBiZSBjYWxsZWQgKmJlZm9yZSogbXV0YXRpbmcgdGhlIGRpY3QuDQogICAgICAgIHdoaWxlIGw6DQogICAgICAgICAgICBkZWwgZFtsLnBvcCgpXQ0KDQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6DQogICAgICAgIG8gPSBzZWxmLmRhdGFba2V5XSgpDQogICAgICAgIGlmIG8gaXMgTm9uZToNCiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBvDQoNCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5KToNCiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpDQogICAgICAgIGRlbCBzZWxmLmRhdGFba2V5XQ0KDQogICAgZGVmIF9fbGVuX18oc2VsZik6DQogICAgICAgIHJldHVybiBsZW4oc2VsZi5kYXRhKSAtIGxlbihzZWxmLl9wZW5kaW5nX3JlbW92YWxzKQ0KDQogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBvID0gc2VsZi5kYXRhW2tleV0oKQ0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgcmV0dXJuIG8gaXMgbm90IE5vbmUNCg0KICAgIGRlZiBfX3JlcHJfXyhzZWxmKToNCiAgICAgICAgcmV0dXJuICI8V2Vha1ZhbHVlRGljdGlvbmFyeSBhdCAlcz4iICUgaWQoc2VsZikNCg0KICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXksIHZhbHVlKToNCiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpDQogICAgICAgIHNlbGYuZGF0YVtrZXldID0gS2V5ZWRSZWYodmFsdWUsIHNlbGYuX3JlbW92ZSwga2V5KQ0KDQogICAgZGVmIGNvcHkoc2VsZik6DQogICAgICAgIG5ldyA9IFdlYWtWYWx1ZURpY3Rpb25hcnkoKQ0KICAgICAgICBmb3Iga2V5LCB3ciBpbiBzZWxmLmRhdGEuaXRlbXMoKToNCiAgICAgICAgICAgIG8gPSB3cigpDQogICAgICAgICAgICBpZiBvIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIG5ld1trZXldID0gbw0KICAgICAgICByZXR1cm4gbmV3DQoNCiAgICBfX2NvcHlfXyA9IGNvcHkNCg0KICAgIGRlZiBfX2RlZXBjb3B5X18oc2VsZiwgbWVtbyk6DQogICAgICAgIGZyb20gY29weSBpbXBvcnQgZGVlcGNvcHkNCiAgICAgICAgbmV3ID0gc2VsZi5fX2NsYXNzX18oKQ0KICAgICAgICBmb3Iga2V5LCB3ciBpbiBzZWxmLmRhdGEuaXRlbXMoKToNCiAgICAgICAgICAgIG8gPSB3cigpDQogICAgICAgICAgICBpZiBvIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIG5ld1tkZWVwY29weShrZXksIG1lbW8pXSA9IG8NCiAgICAgICAgcmV0dXJuIG5ldw0KDQogICAgZGVmIGdldChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdyID0gc2VsZi5kYXRhW2tleV0NCiAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHQNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIG8gPSB3cigpDQogICAgICAgICAgICBpZiBvIGlzIE5vbmU6DQogICAgICAgICAgICAgICAgIyBUaGlzIHNob3VsZCBvbmx5IGhhcHBlbg0KICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0DQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHJldHVybiBvDQoNCiAgICBkZWYgaXRlbXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIGssIHdyIGluIHNlbGYuZGF0YS5pdGVtcygpOg0KICAgICAgICAgICAgICAgIHYgPSB3cigpDQogICAgICAgICAgICAgICAgaWYgdiBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgeWllbGQgaywgdg0KDQogICAgZGVmIGtleXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIGssIHdyIGluIHNlbGYuZGF0YS5pdGVtcygpOg0KICAgICAgICAgICAgICAgIGlmIHdyKCkgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgICAgIHlpZWxkIGsNCg0KICAgIF9faXRlcl9fID0ga2V5cw0KDQogICAgZGVmIGl0ZXJ2YWx1ZXJlZnMoc2VsZik6DQogICAgICAgICIiIlJldHVybiBhbiBpdGVyYXRvciB0aGF0IHlpZWxkcyB0aGUgd2VhayByZWZlcmVuY2VzIHRvIHRoZSB2YWx1ZXMuDQoNCiAgICAgICAgVGhlIHJlZmVyZW5jZXMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlICdsaXZlJyBhdCB0aGUgdGltZQ0KICAgICAgICB0aGV5IGFyZSB1c2VkLCBzbyB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIHJlZmVyZW5jZXMgbmVlZHMNCiAgICAgICAgdG8gYmUgY2hlY2tlZCBiZWZvcmUgYmVpbmcgdXNlZC4gIFRoaXMgY2FuIGJlIHVzZWQgdG8gYXZvaWQNCiAgICAgICAgY3JlYXRpbmcgcmVmZXJlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvDQogICAgICAgIGtlZXAgdGhlIHZhbHVlcyBhcm91bmQgbG9uZ2VyIHRoYW4gbmVlZGVkLg0KDQogICAgICAgICIiIg0KICAgICAgICB3aXRoIF9JdGVyYXRpb25HdWFyZChzZWxmKToNCiAgICAgICAgICAgIGZvciB3ciBpbiBzZWxmLmRhdGEudmFsdWVzKCk6DQogICAgICAgICAgICAgICAgeWllbGQgd3INCg0KICAgIGRlZiB2YWx1ZXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIHdyIGluIHNlbGYuZGF0YS52YWx1ZXMoKToNCiAgICAgICAgICAgICAgICBvYmogPSB3cigpDQogICAgICAgICAgICAgICAgaWYgb2JqIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICAgICB5aWVsZCBvYmoNCg0KICAgIGRlZiBwb3BpdGVtKHNlbGYpOg0KICAgICAgICBpZiBzZWxmLl9wZW5kaW5nX3JlbW92YWxzOg0KICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkNCiAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIGtleSwgd3IgPSBzZWxmLmRhdGEucG9waXRlbSgpDQogICAgICAgICAgICBvID0gd3IoKQ0KICAgICAgICAgICAgaWYgbyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICByZXR1cm4ga2V5LCBvDQoNCiAgICBkZWYgcG9wKHNlbGYsIGtleSwgKmFyZ3MpOg0KICAgICAgICBpZiBzZWxmLl9wZW5kaW5nX3JlbW92YWxzOg0KICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbyA9IHNlbGYuZGF0YS5wb3Aoa2V5KSgpDQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgICAgIGlmIGFyZ3M6DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3NbMF0NCiAgICAgICAgICAgIHJhaXNlDQogICAgICAgIGlmIG8gaXMgTm9uZToNCiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBvDQoNCiAgICBkZWYgc2V0ZGVmYXVsdChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdyID0gc2VsZi5kYXRhW2tleV0NCiAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgICAgICBzZWxmLl9jb21taXRfcmVtb3ZhbHMoKQ0KICAgICAgICAgICAgc2VsZi5kYXRhW2tleV0gPSBLZXllZFJlZihkZWZhdWx0LCBzZWxmLl9yZW1vdmUsIGtleSkNCiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0DQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXR1cm4gd3IoKQ0KDQogICAgZGVmIHVwZGF0ZShzZWxmLCBkaWN0PU5vbmUsICoqa3dhcmdzKToNCiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpDQogICAgICAgIGQgPSBzZWxmLmRhdGENCiAgICAgICAgaWYgZGljdCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIGlmIG5vdCBoYXNhdHRyKGRpY3QsICJpdGVtcyIpOg0KICAgICAgICAgICAgICAgIGRpY3QgPSB0eXBlKHt9KShkaWN0KQ0KICAgICAgICAgICAgZm9yIGtleSwgbyBpbiBkaWN0Lml0ZW1zKCk6DQogICAgICAgICAgICAgICAgZFtrZXldID0gS2V5ZWRSZWYobywgc2VsZi5fcmVtb3ZlLCBrZXkpDQogICAgICAgIGlmIGxlbihrd2FyZ3MpOg0KICAgICAgICAgICAgc2VsZi51cGRhdGUoa3dhcmdzKQ0KDQogICAgZGVmIHZhbHVlcmVmcyhzZWxmKToNCiAgICAgICAgIiIiUmV0dXJuIGEgbGlzdCBvZiB3ZWFrIHJlZmVyZW5jZXMgdG8gdGhlIHZhbHVlcy4NCg0KICAgICAgICBUaGUgcmVmZXJlbmNlcyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgJ2xpdmUnIGF0IHRoZSB0aW1lDQogICAgICAgIHRoZXkgYXJlIHVzZWQsIHNvIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgcmVmZXJlbmNlcyBuZWVkcw0KICAgICAgICB0byBiZSBjaGVja2VkIGJlZm9yZSBiZWluZyB1c2VkLiAgVGhpcyBjYW4gYmUgdXNlZCB0byBhdm9pZA0KICAgICAgICBjcmVhdGluZyByZWZlcmVuY2VzIHRoYXQgd2lsbCBjYXVzZSB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IgdG8NCiAgICAgICAga2VlcCB0aGUgdmFsdWVzIGFyb3VuZCBsb25nZXIgdGhhbiBuZWVkZWQuDQoNCiAgICAgICAgIiIiDQogICAgICAgIHJldHVybiBsaXN0KHNlbGYuZGF0YS52YWx1ZXMoKSkNCg0KDQpjbGFzcyBLZXllZFJlZihyZWYpOg0KICAgICIiIlNwZWNpYWxpemVkIHJlZmVyZW5jZSB0aGF0IGluY2x1ZGVzIGEga2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHZhbHVlLg0KDQogICAgVGhpcyBpcyB1c2VkIGluIHRoZSBXZWFrVmFsdWVEaWN0aW9uYXJ5IHRvIGF2b2lkIGhhdmluZyB0byBjcmVhdGUNCiAgICBhIGZ1bmN0aW9uIG9iamVjdCBmb3IgZWFjaCBrZXkgc3RvcmVkIGluIHRoZSBtYXBwaW5nLiAgQSBzaGFyZWQNCiAgICBjYWxsYmFjayBvYmplY3QgY2FuIHVzZSB0aGUgJ2tleScgYXR0cmlidXRlIG9mIGEgS2V5ZWRSZWYgaW5zdGVhZA0KICAgIG9mIGdldHRpbmcgYSByZWZlcmVuY2UgdG8gdGhlIGtleSBmcm9tIGFuIGVuY2xvc2luZyBzY29wZS4NCg0KICAgICIiIg0KDQogICAgX19zbG90c19fID0gImtleSIsDQoNCiAgICBkZWYgX19uZXdfXyh0eXBlLCBvYiwgY2FsbGJhY2ssIGtleSk6DQogICAgICAgIHNlbGYgPSByZWYuX19uZXdfXyh0eXBlLCBvYiwgY2FsbGJhY2spDQogICAgICAgIHNlbGYua2V5ID0ga2V5DQogICAgICAgIHJldHVybiBzZWxmDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgb2IsIGNhbGxiYWNrLCBrZXkpOg0KICAgICAgICBzdXBlcigpLl9faW5pdF9fKG9iLCBjYWxsYmFjaykNCg0KDQpjbGFzcyBXZWFrS2V5RGljdGlvbmFyeShjb2xsZWN0aW9ucy5NdXRhYmxlTWFwcGluZyk6DQogICAgIiIiIE1hcHBpbmcgY2xhc3MgdGhhdCByZWZlcmVuY2VzIGtleXMgd2Vha2x5Lg0KDQogICAgRW50cmllcyBpbiB0aGUgZGljdGlvbmFyeSB3aWxsIGJlIGRpc2NhcmRlZCB3aGVuIHRoZXJlIGlzIG5vDQogICAgbG9uZ2VyIGEgc3Ryb25nIHJlZmVyZW5jZSB0byB0aGUga2V5LiBUaGlzIGNhbiBiZSB1c2VkIHRvDQogICAgYXNzb2NpYXRlIGFkZGl0aW9uYWwgZGF0YSB3aXRoIGFuIG9iamVjdCBvd25lZCBieSBvdGhlciBwYXJ0cyBvZg0KICAgIGFuIGFwcGxpY2F0aW9uIHdpdGhvdXQgYWRkaW5nIGF0dHJpYnV0ZXMgdG8gdGhvc2Ugb2JqZWN0cy4gVGhpcw0KICAgIGNhbiBiZSBlc3BlY2lhbGx5IHVzZWZ1bCB3aXRoIG9iamVjdHMgdGhhdCBvdmVycmlkZSBhdHRyaWJ1dGUNCiAgICBhY2Nlc3Nlcy4NCiAgICAiIiINCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkaWN0PU5vbmUpOg0KICAgICAgICBzZWxmLmRhdGEgPSB7fQ0KICAgICAgICBkZWYgcmVtb3ZlKGssIHNlbGZyZWY9cmVmKHNlbGYpKToNCiAgICAgICAgICAgIHNlbGYgPSBzZWxmcmVmKCkNCiAgICAgICAgICAgIGlmIHNlbGYgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgaWYgc2VsZi5faXRlcmF0aW5nOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLl9wZW5kaW5nX3JlbW92YWxzLmFwcGVuZChrKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLmRhdGFba10NCiAgICAgICAgc2VsZi5fcmVtb3ZlID0gcmVtb3ZlDQogICAgICAgICMgQSBsaXN0IG9mIGRlYWQgd2Vha3JlZnMgKGtleXMgdG8gYmUgcmVtb3ZlZCkNCiAgICAgICAgc2VsZi5fcGVuZGluZ19yZW1vdmFscyA9IFtdDQogICAgICAgIHNlbGYuX2l0ZXJhdGluZyA9IHNldCgpDQogICAgICAgIGlmIGRpY3QgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBzZWxmLnVwZGF0ZShkaWN0KQ0KDQogICAgZGVmIF9jb21taXRfcmVtb3ZhbHMoc2VsZik6DQogICAgICAgICMgTk9URTogV2UgZG9uJ3QgbmVlZCB0byBjYWxsIHRoaXMgbWV0aG9kIGJlZm9yZSBtdXRhdGluZyB0aGUgZGljdCwNCiAgICAgICAgIyBiZWNhdXNlIGEgZGVhZCB3ZWFrcmVmIG5ldmVyIGNvbXBhcmVzIGVxdWFsIHRvIGEgbGl2ZSB3ZWFrcmVmLA0KICAgICAgICAjIGV2ZW4gaWYgdGhleSBoYXBwZW5lZCB0byByZWZlciB0byBlcXVhbCBvYmplY3RzLg0KICAgICAgICAjIEhvd2V2ZXIsIGl0IG1lYW5zIGtleXMgbWF5IGFscmVhZHkgaGF2ZSBiZWVuIHJlbW92ZWQuDQogICAgICAgIGwgPSBzZWxmLl9wZW5kaW5nX3JlbW92YWxzDQogICAgICAgIGQgPSBzZWxmLmRhdGENCiAgICAgICAgd2hpbGUgbDoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBkZWwgZFtsLnBvcCgpXQ0KICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXkpOg0KICAgICAgICBkZWwgc2VsZi5kYXRhW3JlZihrZXkpXQ0KDQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6DQogICAgICAgIHJldHVybiBzZWxmLmRhdGFbcmVmKGtleSldDQoNCiAgICBkZWYgX19sZW5fXyhzZWxmKToNCiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmRhdGEpIC0gbGVuKHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMpDQoNCiAgICBkZWYgX19yZXByX18oc2VsZik6DQogICAgICAgIHJldHVybiAiPFdlYWtLZXlEaWN0aW9uYXJ5IGF0ICVzPiIgJSBpZChzZWxmKQ0KDQogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgdmFsdWUpOg0KICAgICAgICBzZWxmLmRhdGFbcmVmKGtleSwgc2VsZi5fcmVtb3ZlKV0gPSB2YWx1ZQ0KDQogICAgZGVmIGNvcHkoc2VsZik6DQogICAgICAgIG5ldyA9IFdlYWtLZXlEaWN0aW9uYXJ5KCkNCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gc2VsZi5kYXRhLml0ZW1zKCk6DQogICAgICAgICAgICBvID0ga2V5KCkNCiAgICAgICAgICAgIGlmIG8gaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgbmV3W29dID0gdmFsdWUNCiAgICAgICAgcmV0dXJuIG5ldw0KDQogICAgX19jb3B5X18gPSBjb3B5DQoNCiAgICBkZWYgX19kZWVwY29weV9fKHNlbGYsIG1lbW8pOg0KICAgICAgICBmcm9tIGNvcHkgaW1wb3J0IGRlZXBjb3B5DQogICAgICAgIG5ldyA9IHNlbGYuX19jbGFzc19fKCkNCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gc2VsZi5kYXRhLml0ZW1zKCk6DQogICAgICAgICAgICBvID0ga2V5KCkNCiAgICAgICAgICAgIGlmIG8gaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgbmV3W29dID0gZGVlcGNvcHkodmFsdWUsIG1lbW8pDQogICAgICAgIHJldHVybiBuZXcNCg0KICAgIGRlZiBnZXQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOg0KICAgICAgICByZXR1cm4gc2VsZi5kYXRhLmdldChyZWYoa2V5KSxkZWZhdWx0KQ0KDQogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB3ciA9IHJlZihrZXkpDQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgcmV0dXJuIHdyIGluIHNlbGYuZGF0YQ0KDQogICAgZGVmIGl0ZW1zKHNlbGYpOg0KICAgICAgICB3aXRoIF9JdGVyYXRpb25HdWFyZChzZWxmKToNCiAgICAgICAgICAgIGZvciB3ciwgdmFsdWUgaW4gc2VsZi5kYXRhLml0ZW1zKCk6DQogICAgICAgICAgICAgICAga2V5ID0gd3IoKQ0KICAgICAgICAgICAgICAgIGlmIGtleSBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgeWllbGQga2V5LCB2YWx1ZQ0KDQogICAgZGVmIGtleXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIHdyIGluIHNlbGYuZGF0YToNCiAgICAgICAgICAgICAgICBvYmogPSB3cigpDQogICAgICAgICAgICAgICAgaWYgb2JqIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICAgICB5aWVsZCBvYmoNCg0KICAgIF9faXRlcl9fID0ga2V5cw0KDQogICAgZGVmIHZhbHVlcyhzZWxmKToNCiAgICAgICAgd2l0aCBfSXRlcmF0aW9uR3VhcmQoc2VsZik6DQogICAgICAgICAgICBmb3Igd3IsIHZhbHVlIGluIHNlbGYuZGF0YS5pdGVtcygpOg0KICAgICAgICAgICAgICAgIGlmIHdyKCkgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgICAgIHlpZWxkIHZhbHVlDQoNCiAgICBkZWYga2V5cmVmcyhzZWxmKToNCiAgICAgICAgIiIiUmV0dXJuIGEgbGlzdCBvZiB3ZWFrIHJlZmVyZW5jZXMgdG8gdGhlIGtleXMuDQoNCiAgICAgICAgVGhlIHJlZmVyZW5jZXMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlICdsaXZlJyBhdCB0aGUgdGltZQ0KICAgICAgICB0aGV5IGFyZSB1c2VkLCBzbyB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIHJlZmVyZW5jZXMgbmVlZHMNCiAgICAgICAgdG8gYmUgY2hlY2tlZCBiZWZvcmUgYmVpbmcgdXNlZC4gIFRoaXMgY2FuIGJlIHVzZWQgdG8gYXZvaWQNCiAgICAgICAgY3JlYXRpbmcgcmVmZXJlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvDQogICAgICAgIGtlZXAgdGhlIGtleXMgYXJvdW5kIGxvbmdlciB0aGFuIG5lZWRlZC4NCg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIGxpc3Qoc2VsZi5kYXRhKQ0KDQogICAgZGVmIHBvcGl0ZW0oc2VsZik6DQogICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICBrZXksIHZhbHVlID0gc2VsZi5kYXRhLnBvcGl0ZW0oKQ0KICAgICAgICAgICAgbyA9IGtleSgpDQogICAgICAgICAgICBpZiBvIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIHJldHVybiBvLCB2YWx1ZQ0KDQogICAgZGVmIHBvcChzZWxmLCBrZXksICphcmdzKToNCiAgICAgICAgcmV0dXJuIHNlbGYuZGF0YS5wb3AocmVmKGtleSksICphcmdzKQ0KDQogICAgZGVmIHNldGRlZmF1bHQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOg0KICAgICAgICByZXR1cm4gc2VsZi5kYXRhLnNldGRlZmF1bHQocmVmKGtleSwgc2VsZi5fcmVtb3ZlKSxkZWZhdWx0KQ0KDQogICAgZGVmIHVwZGF0ZShzZWxmLCBkaWN0PU5vbmUsICoqa3dhcmdzKToNCiAgICAgICAgZCA9IHNlbGYuZGF0YQ0KICAgICAgICBpZiBkaWN0IGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgaWYgbm90IGhhc2F0dHIoZGljdCwgIml0ZW1zIik6DQogICAgICAgICAgICAgICAgZGljdCA9IHR5cGUoe30pKGRpY3QpDQogICAgICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBkaWN0Lml0ZW1zKCk6DQogICAgICAgICAgICAgICAgZFtyZWYoa2V5LCBzZWxmLl9yZW1vdmUpXSA9IHZhbHVlDQogICAgICAgIGlmIGxlbihrd2FyZ3MpOg0KICAgICAgICAgICAgc2VsZi51cGRhdGUoa3dhcmdzKQ0K',
'/Lib/codecs.py':'IyAiIiIgY29kZWNzIC0tIFB5dGhvbiBDb2RlYyBSZWdpc3RyeSwgQVBJIGFuZCBoZWxwZXJzLgojCiMKI1dyaXR0ZW4gYnkgTWFyYy1BbmRyZSBMZW1idXJnIChtYWxAbGVtYnVyZy5jb20pLgojCiMoYykgQ29weXJpZ2h0IENOUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQuIE5PIFdBUlJBTlRZLgojCiMgIiIiCgojaW1wb3J0IGJ1aWx0aW5zLCBzeXMKaW1wb3J0IHN5cwoKIyMjIFJlZ2lzdHJ5IGFuZCBidWlsdGluIHN0YXRlbGVzcyBjb2RlYyBmdW5jdGlvbnMKCiN0cnk6CiMgICAgI2Zyb20gX2NvZGVjcyBpbXBvcnQgKgojICAgICNmcm9tIGludGVycF9jb2RlY3MgaW1wb3J0ICoKI2V4Y2VwdCBJbXBvcnRFcnJvciBhcyB3aHk6CiMgICAgcmFpc2UgU3lzdGVtRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHRoZSBidWlsdGluIGNvZGVjczogJXMnICUgd2h5KQoKX19hbGxfXyA9IFsicmVnaXN0ZXIiLCAibG9va3VwIiwgIm9wZW4iLCAiRW5jb2RlZEZpbGUiLCAiQk9NIiwgIkJPTV9CRSIsCiAgICAgICAgICAgIkJPTV9MRSIsICJCT00zMl9CRSIsICJCT00zMl9MRSIsICJCT002NF9CRSIsICJCT002NF9MRSIsCiAgICAgICAgICAgIkJPTV9VVEY4IiwgIkJPTV9VVEYxNiIsICJCT01fVVRGMTZfTEUiLCAiQk9NX1VURjE2X0JFIiwKICAgICAgICAgICAiQk9NX1VURjMyIiwgIkJPTV9VVEYzMl9MRSIsICJCT01fVVRGMzJfQkUiLAogICAgICAgICAgICJzdHJpY3RfZXJyb3JzIiwgImlnbm9yZV9lcnJvcnMiLCAicmVwbGFjZV9lcnJvcnMiLAogICAgICAgICAgICJ4bWxjaGFycmVmcmVwbGFjZV9lcnJvcnMiLAogICAgICAgICAgICJyZWdpc3Rlcl9lcnJvciIsICJsb29rdXBfZXJyb3IiXQoKIyMjIENvbnN0YW50cwoKIwojIEJ5dGUgT3JkZXIgTWFyayAoQk9NID0gWkVSTyBXSURUSCBOTy1CUkVBSyBTUEFDRSA9IFUrRkVGRikKIyBhbmQgaXRzIHBvc3NpYmxlIGJ5dGUgc3RyaW5nIHZhbHVlcwojIGZvciBVVEY4L1VURjE2L1VURjMyIG91dHB1dCBhbmQgbGl0dGxlL2JpZyBlbmRpYW4gbWFjaGluZXMKIwoKIyBVVEYtOAojIEJPTV9VVEY4ID0gYidceGVmXHhiYlx4YmYnCkJPTV9VVEY4ID0gJ1x4ZWZceGJiXHhiZicKCiMgVVRGLTE2LCBsaXR0bGUgZW5kaWFuCiMgQk9NX0xFID0gQk9NX1VURjE2X0xFID0gYidceGZmXHhmZScKQk9NX0xFID0gQk9NX1VURjE2X0xFID0gJ1x4ZmZceGZlJwoKIyBVVEYtMTYsIGJpZyBlbmRpYW4KIyBCT01fQkUgPSBCT01fVVRGMTZfQkUgPSBiJ1x4ZmVceGZmJwpCT01fQkUgPSBCT01fVVRGMTZfQkUgPSAnXHhmZVx4ZmYnCgojIFVURi0zMiwgbGl0dGxlIGVuZGlhbgojIEJPTV9VVEYzMl9MRSA9IGInXHhmZlx4ZmVceDAwXHgwMCcKQk9NX1VURjMyX0xFID0gJ1x4ZmZceGZlXHgwMFx4MDAnCgojIFVURi0zMiwgYmlnIGVuZGlhbgojIEJPTV9VVEYzMl9CRSA9IGInXHgwMFx4MDBceGZlXHhmZicKQk9NX1VURjMyX0JFID0gJ1x4MDBceDAwXHhmZVx4ZmYnCgppZiBzeXMuYnl0ZW9yZGVyID09ICdsaXR0bGUnOgoKICAgICMgVVRGLTE2LCBuYXRpdmUgZW5kaWFubmVzcwogICAgQk9NID0gQk9NX1VURjE2ID0gQk9NX1VURjE2X0xFCgogICAgIyBVVEYtMzIsIG5hdGl2ZSBlbmRpYW5uZXNzCiAgICBCT01fVVRGMzIgPSBCT01fVVRGMzJfTEUKCmVsc2U6CgogICAgIyBVVEYtMTYsIG5hdGl2ZSBlbmRpYW5uZXNzCiAgICBCT00gPSBCT01fVVRGMTYgPSBCT01fVVRGMTZfQkUKCiAgICAjIFVURi0zMiwgbmF0aXZlIGVuZGlhbm5lc3MKICAgIEJPTV9VVEYzMiA9IEJPTV9VVEYzMl9CRQoKIyBPbGQgYnJva2VuIG5hbWVzIChkb24ndCB1c2UgaW4gbmV3IGNvZGUpCkJPTTMyX0xFID0gQk9NX1VURjE2X0xFCkJPTTMyX0JFID0gQk9NX1VURjE2X0JFCkJPTTY0X0xFID0gQk9NX1VURjMyX0xFCkJPTTY0X0JFID0gQk9NX1VURjMyX0JFCgoKIyMjIENvZGVjIGJhc2UgY2xhc3NlcyAoZGVmaW5pbmcgdGhlIEFQSSkKCmNsYXNzIENvZGVjSW5mbyh0dXBsZSk6CgogICAgZGVmIF9fbmV3X18oY2xzLCBlbmNvZGUsIGRlY29kZSwgc3RyZWFtcmVhZGVyPU5vbmUsIHN0cmVhbXdyaXRlcj1Ob25lLAogICAgICAgIGluY3JlbWVudGFsZW5jb2Rlcj1Ob25lLCBpbmNyZW1lbnRhbGRlY29kZXI9Tm9uZSwgbmFtZT1Ob25lKToKICAgICAgICBzZWxmID0gdHVwbGUuX19uZXdfXyhjbHMsIChlbmNvZGUsIGRlY29kZSwgc3RyZWFtcmVhZGVyLCBzdHJlYW13cml0ZXIpKQogICAgICAgIHNlbGYubmFtZSA9IG5hbWUKICAgICAgICBzZWxmLmVuY29kZSA9IGVuY29kZQogICAgICAgIHNlbGYuZGVjb2RlID0gZGVjb2RlCiAgICAgICAgc2VsZi5pbmNyZW1lbnRhbGVuY29kZXIgPSBpbmNyZW1lbnRhbGVuY29kZXIKICAgICAgICBzZWxmLmluY3JlbWVudGFsZGVjb2RlciA9IGluY3JlbWVudGFsZGVjb2RlcgogICAgICAgIHNlbGYuc3RyZWFtd3JpdGVyID0gc3RyZWFtd3JpdGVyCiAgICAgICAgc2VsZi5zdHJlYW1yZWFkZXIgPSBzdHJlYW1yZWFkZXIKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIjwlcy4lcyBvYmplY3QgZm9yIGVuY29kaW5nICVzIGF0IDB4JXg+IiAlIFwKICAgICAgICAgICAgICAgIChzZWxmLl9fY2xhc3NfXy5fX21vZHVsZV9fLCBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgICAgICBzZWxmLm5hbWUsIGlkKHNlbGYpKQoKY2xhc3MgQ29kZWM6CgogICAgIiIiIERlZmluZXMgdGhlIGludGVyZmFjZSBmb3Igc3RhdGVsZXNzIGVuY29kZXJzL2RlY29kZXJzLgoKICAgICAgICBUaGUgLmVuY29kZSgpLy5kZWNvZGUoKSBtZXRob2RzIG1heSB1c2UgZGlmZmVyZW50IGVycm9yCiAgICAgICAgaGFuZGxpbmcgc2NoZW1lcyBieSBwcm92aWRpbmcgdGhlIGVycm9ycyBhcmd1bWVudC4gVGhlc2UKICAgICAgICBzdHJpbmcgdmFsdWVzIGFyZSBwcmVkZWZpbmVkOgoKICAgICAgICAgJ3N0cmljdCcgLSByYWlzZSBhIFZhbHVlRXJyb3IgZXJyb3IgKG9yIGEgc3ViY2xhc3MpCiAgICAgICAgICdpZ25vcmUnIC0gaWdub3JlIHRoZSBjaGFyYWN0ZXIgYW5kIGNvbnRpbnVlIHdpdGggdGhlIG5leHQKICAgICAgICAgJ3JlcGxhY2UnIC0gcmVwbGFjZSB3aXRoIGEgc3VpdGFibGUgcmVwbGFjZW1lbnQgY2hhcmFjdGVyOwogICAgICAgICAgICAgICAgICAgIFB5dGhvbiB3aWxsIHVzZSB0aGUgb2ZmaWNpYWwgVStGRkZEIFJFUExBQ0VNRU5UCiAgICAgICAgICAgICAgICAgICAgQ0hBUkFDVEVSIGZvciB0aGUgYnVpbHRpbiBVbmljb2RlIGNvZGVjcyBvbgogICAgICAgICAgICAgICAgICAgIGRlY29kaW5nIGFuZCAnPycgb24gZW5jb2RpbmcuCiAgICAgICAgICd4bWxjaGFycmVmcmVwbGFjZScgLSBSZXBsYWNlIHdpdGggdGhlIGFwcHJvcHJpYXRlIFhNTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyIHJlZmVyZW5jZSAob25seSBmb3IgZW5jb2RpbmcpLgogICAgICAgICAnYmFja3NsYXNocmVwbGFjZScgIC0gUmVwbGFjZSB3aXRoIGJhY2tzbGFzaGVkIGVzY2FwZSBzZXF1ZW5jZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvbmx5IGZvciBlbmNvZGluZykuCgogICAgICAgIFRoZSBzZXQgb2YgYWxsb3dlZCB2YWx1ZXMgY2FuIGJlIGV4dGVuZGVkIHZpYSByZWdpc3Rlcl9lcnJvci4KCiAgICAiIiIKICAgIGRlZiBlbmNvZGUoc2VsZiwgaW5wdXQsIGVycm9ycz0nc3RyaWN0Jyk6CgogICAgICAgICIiIiBFbmNvZGVzIHRoZSBvYmplY3QgaW5wdXQgYW5kIHJldHVybnMgYSB0dXBsZSAob3V0cHV0CiAgICAgICAgICAgIG9iamVjdCwgbGVuZ3RoIGNvbnN1bWVkKS4KCiAgICAgICAgICAgIGVycm9ycyBkZWZpbmVzIHRoZSBlcnJvciBoYW5kbGluZyB0byBhcHBseS4gSXQgZGVmYXVsdHMgdG8KICAgICAgICAgICAgJ3N0cmljdCcgaGFuZGxpbmcuCgogICAgICAgICAgICBUaGUgbWV0aG9kIG1heSBub3Qgc3RvcmUgc3RhdGUgaW4gdGhlIENvZGVjIGluc3RhbmNlLiBVc2UKICAgICAgICAgICAgU3RyZWFtQ29kZWMgZm9yIGNvZGVjcyB3aGljaCBoYXZlIHRvIGtlZXAgc3RhdGUgaW4gb3JkZXIgdG8KICAgICAgICAgICAgbWFrZSBlbmNvZGluZy9kZWNvZGluZyBlZmZpY2llbnQuCgogICAgICAgICAgICBUaGUgZW5jb2RlciBtdXN0IGJlIGFibGUgdG8gaGFuZGxlIHplcm8gbGVuZ3RoIGlucHV0IGFuZAogICAgICAgICAgICByZXR1cm4gYW4gZW1wdHkgb2JqZWN0IG9mIHRoZSBvdXRwdXQgb2JqZWN0IHR5cGUgaW4gdGhpcwogICAgICAgICAgICBzaXR1YXRpb24uCgogICAgICAgICIiIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IKCiAgICBkZWYgZGVjb2RlKHNlbGYsIGlucHV0LCBlcnJvcnM9J3N0cmljdCcpOgoKICAgICAgICAiIiIgRGVjb2RlcyB0aGUgb2JqZWN0IGlucHV0IGFuZCByZXR1cm5zIGEgdHVwbGUgKG91dHB1dAogICAgICAgICAgICBvYmplY3QsIGxlbmd0aCBjb25zdW1lZCkuCgogICAgICAgICAgICBpbnB1dCBtdXN0IGJlIGFuIG9iamVjdCB3aGljaCBwcm92aWRlcyB0aGUgYmZfZ2V0cmVhZGJ1ZgogICAgICAgICAgICBidWZmZXIgc2xvdC4gUHl0aG9uIHN0cmluZ3MsIGJ1ZmZlciBvYmplY3RzIGFuZCBtZW1vcnkKICAgICAgICAgICAgbWFwcGVkIGZpbGVzIGFyZSBleGFtcGxlcyBvZiBvYmplY3RzIHByb3ZpZGluZyB0aGlzIHNsb3QuCgogICAgICAgICAgICBlcnJvcnMgZGVmaW5lcyB0aGUgZXJyb3IgaGFuZGxpbmcgdG8gYXBwbHkuIEl0IGRlZmF1bHRzIHRvCiAgICAgICAgICAgICdzdHJpY3QnIGhhbmRsaW5nLgoKICAgICAgICAgICAgVGhlIG1ldGhvZCBtYXkgbm90IHN0b3JlIHN0YXRlIGluIHRoZSBDb2RlYyBpbnN0YW5jZS4gVXNlCiAgICAgICAgICAgIFN0cmVhbUNvZGVjIGZvciBjb2RlY3Mgd2hpY2ggaGF2ZSB0byBrZWVwIHN0YXRlIGluIG9yZGVyIHRvCiAgICAgICAgICAgIG1ha2UgZW5jb2RpbmcvZGVjb2RpbmcgZWZmaWNpZW50LgoKICAgICAgICAgICAgVGhlIGRlY29kZXIgbXVzdCBiZSBhYmxlIHRvIGhhbmRsZSB6ZXJvIGxlbmd0aCBpbnB1dCBhbmQKICAgICAgICAgICAgcmV0dXJuIGFuIGVtcHR5IG9iamVjdCBvZiB0aGUgb3V0cHV0IG9iamVjdCB0eXBlIGluIHRoaXMKICAgICAgICAgICAgc2l0dWF0aW9uLgoKICAgICAgICAiIiIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yCgpjbGFzcyBJbmNyZW1lbnRhbEVuY29kZXIob2JqZWN0KToKICAgICIiIgogICAgQW4gSW5jcmVtZW50YWxFbmNvZGVyIGVuY29kZXMgYW4gaW5wdXQgaW4gbXVsdGlwbGUgc3RlcHMuIFRoZSBpbnB1dCBjYW4KICAgIGJlIHBhc3NlZCBwaWVjZSBieSBwaWVjZSB0byB0aGUgZW5jb2RlKCkgbWV0aG9kLiBUaGUgSW5jcmVtZW50YWxFbmNvZGVyCiAgICByZW1lbWJlcnMgdGhlIHN0YXRlIG9mIHRoZSBlbmNvZGluZyBwcm9jZXNzIGJldHdlZW4gY2FsbHMgdG8gZW5jb2RlKCkuCiAgICAiIiIKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBlcnJvcnM9J3N0cmljdCcpOgogICAgICAgICIiIgogICAgICAgIENyZWF0ZXMgYW4gSW5jcmVtZW50YWxFbmNvZGVyIGluc3RhbmNlLgoKICAgICAgICBUaGUgSW5jcmVtZW50YWxFbmNvZGVyIG1heSB1c2UgZGlmZmVyZW50IGVycm9yIGhhbmRsaW5nIHNjaGVtZXMgYnkKICAgICAgICBwcm92aWRpbmcgdGhlIGVycm9ycyBrZXl3b3JkIGFyZ3VtZW50LiBTZWUgdGhlIG1vZHVsZSBkb2NzdHJpbmcKICAgICAgICBmb3IgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcy4KICAgICAgICAiIiIKICAgICAgICBzZWxmLmVycm9ycyA9IGVycm9ycwogICAgICAgIHNlbGYuYnVmZmVyID0gIiIKCiAgICBkZWYgZW5jb2RlKHNlbGYsIGlucHV0LCBmaW5hbD1GYWxzZSk6CiAgICAgICAgIiIiCiAgICAgICAgRW5jb2RlcyBpbnB1dCBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIG9iamVjdC4KICAgICAgICAiIiIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yCgogICAgZGVmIHJlc2V0KHNlbGYpOgogICAgICAgICIiIgogICAgICAgIFJlc2V0cyB0aGUgZW5jb2RlciB0byB0aGUgaW5pdGlhbCBzdGF0ZS4KICAgICAgICAiIiIKCiAgICBkZWYgZ2V0c3RhdGUoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBlbmNvZGVyLgogICAgICAgICIiIgogICAgICAgIHJldHVybiAwCgogICAgZGVmIHNldHN0YXRlKHNlbGYsIHN0YXRlKToKICAgICAgICAiIiIKICAgICAgICBTZXQgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGVuY29kZXIuIHN0YXRlIG11c3QgaGF2ZSBiZWVuCiAgICAgICAgcmV0dXJuZWQgYnkgZ2V0c3RhdGUoKS4KICAgICAgICAiIiIKCmNsYXNzIEJ1ZmZlcmVkSW5jcmVtZW50YWxFbmNvZGVyKEluY3JlbWVudGFsRW5jb2Rlcik6CiAgICAiIiIKICAgIFRoaXMgc3ViY2xhc3Mgb2YgSW5jcmVtZW50YWxFbmNvZGVyIGNhbiBiZSB1c2VkIGFzIHRoZSBiYXNlY2xhc3MgZm9yIGFuCiAgICBpbmNyZW1lbnRhbCBlbmNvZGVyIGlmIHRoZSBlbmNvZGVyIG11c3Qga2VlcCBzb21lIG9mIHRoZSBvdXRwdXQgaW4gYQogICAgYnVmZmVyIGJldHdlZW4gY2FsbHMgdG8gZW5jb2RlKCkuCiAgICAiIiIKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBlcnJvcnM9J3N0cmljdCcpOgogICAgICAgIEluY3JlbWVudGFsRW5jb2Rlci5fX2luaXRfXyhzZWxmLCBlcnJvcnMpCiAgICAgICAgIyB1bmVuY29kZWQgaW5wdXQgdGhhdCBpcyBrZXB0IGJldHdlZW4gY2FsbHMgdG8gZW5jb2RlKCkKICAgICAgICBzZWxmLmJ1ZmZlciA9ICIiCgogICAgZGVmIF9idWZmZXJfZW5jb2RlKHNlbGYsIGlucHV0LCBlcnJvcnMsIGZpbmFsKToKICAgICAgICAjIE92ZXJ3cml0ZSB0aGlzIG1ldGhvZCBpbiBzdWJjbGFzc2VzOiBJdCBtdXN0IGVuY29kZSBpbnB1dAogICAgICAgICMgYW5kIHJldHVybiBhbiAob3V0cHV0LCBsZW5ndGggY29uc3VtZWQpIHR1cGxlCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcgoKICAgIGRlZiBlbmNvZGUoc2VsZiwgaW5wdXQsIGZpbmFsPUZhbHNlKToKICAgICAgICAjIGVuY29kZSBpbnB1dCAodGFraW5nIHRoZSBidWZmZXIgaW50byBhY2NvdW50KQogICAgICAgIGRhdGEgPSBzZWxmLmJ1ZmZlciArIGlucHV0CiAgICAgICAgKHJlc3VsdCwgY29uc3VtZWQpID0gc2VsZi5fYnVmZmVyX2VuY29kZShkYXRhLCBzZWxmLmVycm9ycywgZmluYWwpCiAgICAgICAgIyBrZWVwIHVuZW5jb2RlZCBpbnB1dCB1bnRpbCB0aGUgbmV4dCBjYWxsCiAgICAgICAgc2VsZi5idWZmZXIgPSBkYXRhW2NvbnN1bWVkOl0KICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIHJlc2V0KHNlbGYpOgogICAgICAgIEluY3JlbWVudGFsRW5jb2Rlci5yZXNldChzZWxmKQogICAgICAgIHNlbGYuYnVmZmVyID0gIiIKCiAgICBkZWYgZ2V0c3RhdGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuYnVmZmVyIG9yIDAKCiAgICBkZWYgc2V0c3RhdGUoc2VsZiwgc3RhdGUpOgogICAgICAgIHNlbGYuYnVmZmVyID0gc3RhdGUgb3IgIiIKCmNsYXNzIEluY3JlbWVudGFsRGVjb2RlcihvYmplY3QpOgogICAgIiIiCiAgICBBbiBJbmNyZW1lbnRhbERlY29kZXIgZGVjb2RlcyBhbiBpbnB1dCBpbiBtdWx0aXBsZSBzdGVwcy4gVGhlIGlucHV0IGNhbgogICAgYmUgcGFzc2VkIHBpZWNlIGJ5IHBpZWNlIHRvIHRoZSBkZWNvZGUoKSBtZXRob2QuIFRoZSBJbmNyZW1lbnRhbERlY29kZXIKICAgIHJlbWVtYmVycyB0aGUgc3RhdGUgb2YgdGhlIGRlY29kaW5nIHByb2Nlc3MgYmV0d2VlbiBjYWxscyB0byBkZWNvZGUoKS4KICAgICIiIgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGVycm9ycz0nc3RyaWN0Jyk6CiAgICAgICAgIiIiCiAgICAgICAgQ3JlYXRlIGEgSW5jcmVtZW50YWxEZWNvZGVyIGluc3RhbmNlLgoKICAgICAgICBUaGUgSW5jcmVtZW50YWxEZWNvZGVyIG1heSB1c2UgZGlmZmVyZW50IGVycm9yIGhhbmRsaW5nIHNjaGVtZXMgYnkKICAgICAgICBwcm92aWRpbmcgdGhlIGVycm9ycyBrZXl3b3JkIGFyZ3VtZW50LiBTZWUgdGhlIG1vZHVsZSBkb2NzdHJpbmcKICAgICAgICBmb3IgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcy4KICAgICAgICAiIiIKICAgICAgICBzZWxmLmVycm9ycyA9IGVycm9ycwoKICAgIGRlZiBkZWNvZGUoc2VsZiwgaW5wdXQsIGZpbmFsPUZhbHNlKToKICAgICAgICAiIiIKICAgICAgICBEZWNvZGUgaW5wdXQgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBvYmplY3QuCiAgICAgICAgIiIiCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcgoKICAgIGRlZiByZXNldChzZWxmKToKICAgICAgICAiIiIKICAgICAgICBSZXNldCB0aGUgZGVjb2RlciB0byB0aGUgaW5pdGlhbCBzdGF0ZS4KICAgICAgICAiIiIKCiAgICBkZWYgZ2V0c3RhdGUoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkZWNvZGVyLgoKICAgICAgICBUaGlzIG11c3QgYmUgYSAoYnVmZmVyZWRfaW5wdXQsIGFkZGl0aW9uYWxfc3RhdGVfaW5mbykgdHVwbGUuCiAgICAgICAgYnVmZmVyZWRfaW5wdXQgbXVzdCBiZSBhIGJ5dGVzIG9iamVjdCBjb250YWluaW5nIGJ5dGVzIHRoYXQKICAgICAgICB3ZXJlIHBhc3NlZCB0byBkZWNvZGUoKSB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGNvbnZlcnRlZC4KICAgICAgICBhZGRpdGlvbmFsX3N0YXRlX2luZm8gbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyCiAgICAgICAgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSBvZiB0aGUgZGVjb2RlciBXSVRIT1VUIHlldCBoYXZpbmcKICAgICAgICBwcm9jZXNzZWQgdGhlIGNvbnRlbnRzIG9mIGJ1ZmZlcmVkX2lucHV0LiAgSW4gdGhlIGluaXRpYWwgc3RhdGUKICAgICAgICBhbmQgYWZ0ZXIgcmVzZXQoKSwgZ2V0c3RhdGUoKSBtdXN0IHJldHVybiAoYiIiLCAwKS4KICAgICAgICAiIiIKICAgICAgICAjcmV0dXJuIChiIiIsIDApCiAgICAgICAgcmV0dXJuICgiIiwgMCkKCiAgICBkZWYgc2V0c3RhdGUoc2VsZiwgc3RhdGUpOgogICAgICAgICIiIgogICAgICAgIFNldCB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZGVjb2Rlci4KCiAgICAgICAgc3RhdGUgbXVzdCBoYXZlIGJlZW4gcmV0dXJuZWQgYnkgZ2V0c3RhdGUoKS4gIFRoZSBlZmZlY3Qgb2YKICAgICAgICBzZXRzdGF0ZSgoYiIiLCAwKSkgbXVzdCBiZSBlcXVpdmFsZW50IHRvIHJlc2V0KCkuCiAgICAgICAgIiIiCiAgICAgICAgcGFzcwoKY2xhc3MgQnVmZmVyZWRJbmNyZW1lbnRhbERlY29kZXIoSW5jcmVtZW50YWxEZWNvZGVyKToKICAgICIiIgogICAgVGhpcyBzdWJjbGFzcyBvZiBJbmNyZW1lbnRhbERlY29kZXIgY2FuIGJlIHVzZWQgYXMgdGhlIGJhc2VjbGFzcyBmb3IgYW4KICAgIGluY3JlbWVudGFsIGRlY29kZXIgaWYgdGhlIGRlY29kZXIgbXVzdCBiZSBhYmxlIHRvIGhhbmRsZSBpbmNvbXBsZXRlCiAgICBieXRlIHNlcXVlbmNlcy4KICAgICIiIgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGVycm9ycz0nc3RyaWN0Jyk6CiAgICAgICAgSW5jcmVtZW50YWxEZWNvZGVyLl9faW5pdF9fKHNlbGYsIGVycm9ycykKICAgICAgICAjIHVuZGVjb2RlZCBpbnB1dCB0aGF0IGlzIGtlcHQgYmV0d2VlbiBjYWxscyB0byBkZWNvZGUoKQogICAgICAgICNzZWxmLmJ1ZmZlciA9IGIiIgogICAgICAgIHNlbGYuYnVmZmVyID0gIiIKCiAgICBkZWYgX2J1ZmZlcl9kZWNvZGUoc2VsZiwgaW5wdXQsIGVycm9ycywgZmluYWwpOgogICAgICAgICMgT3ZlcndyaXRlIHRoaXMgbWV0aG9kIGluIHN1YmNsYXNzZXM6IEl0IG11c3QgZGVjb2RlIGlucHV0CiAgICAgICAgIyBhbmQgcmV0dXJuIGFuIChvdXRwdXQsIGxlbmd0aCBjb25zdW1lZCkgdHVwbGUKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yCgogICAgZGVmIGRlY29kZShzZWxmLCBpbnB1dCwgZmluYWw9RmFsc2UpOgogICAgICAgICMgZGVjb2RlIGlucHV0ICh0YWtpbmcgdGhlIGJ1ZmZlciBpbnRvIGFjY291bnQpCiAgICAgICAgZGF0YSA9IHNlbGYuYnVmZmVyICsgaW5wdXQKICAgICAgICAocmVzdWx0LCBjb25zdW1lZCkgPSBzZWxmLl9idWZmZXJfZGVjb2RlKGRhdGEsIHNlbGYuZXJyb3JzLCBmaW5hbCkKICAgICAgICAjIGtlZXAgdW5kZWNvZGVkIGlucHV0IHVudGlsIHRoZSBuZXh0IGNhbGwKICAgICAgICBzZWxmLmJ1ZmZlciA9IGRhdGFbY29uc3VtZWQ6XQogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgcmVzZXQoc2VsZik6CiAgICAgICAgSW5jcmVtZW50YWxEZWNvZGVyLnJlc2V0KHNlbGYpCiAgICAgICAgI3NlbGYuYnVmZmVyID0gYiIiCiAgICAgICAgc2VsZi5idWZmZXIgPSAiIgoKICAgIGRlZiBnZXRzdGF0ZShzZWxmKToKICAgICAgICAjIGFkZGl0aW9uYWwgc3RhdGUgaW5mbyBpcyBhbHdheXMgMAogICAgICAgIHJldHVybiAoc2VsZi5idWZmZXIsIDApCgogICAgZGVmIHNldHN0YXRlKHNlbGYsIHN0YXRlKToKICAgICAgICAjIGlnbm9yZSBhZGRpdGlvbmFsIHN0YXRlIGluZm8KICAgICAgICBzZWxmLmJ1ZmZlciA9IHN0YXRlWzBdCgojCiMgVGhlIFN0cmVhbVdyaXRlciBhbmQgU3RyZWFtUmVhZGVyIGNsYXNzIHByb3ZpZGUgZ2VuZXJpYyB3b3JraW5nCiMgaW50ZXJmYWNlcyB3aGljaCBjYW4gYmUgdXNlZCB0byBpbXBsZW1lbnQgbmV3IGVuY29kaW5nIHN1Ym1vZHVsZXMKIyB2ZXJ5IGVhc2lseS4gU2VlIGVuY29kaW5ncy91dGZfOC5weSBmb3IgYW4gZXhhbXBsZSBvbiBob3cgdGhpcyBpcwojIGRvbmUuCiMKCmNsYXNzIFN0cmVhbVdyaXRlcihDb2RlYyk6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbSwgZXJyb3JzPSdzdHJpY3QnKToKCiAgICAgICAgIiIiIENyZWF0ZXMgYSBTdHJlYW1Xcml0ZXIgaW5zdGFuY2UuCgogICAgICAgICAgICBzdHJlYW0gbXVzdCBiZSBhIGZpbGUtbGlrZSBvYmplY3Qgb3BlbiBmb3Igd3JpdGluZwogICAgICAgICAgICAoYmluYXJ5KSBkYXRhLgoKICAgICAgICAgICAgVGhlIFN0cmVhbVdyaXRlciBtYXkgdXNlIGRpZmZlcmVudCBlcnJvciBoYW5kbGluZwogICAgICAgICAgICBzY2hlbWVzIGJ5IHByb3ZpZGluZyB0aGUgZXJyb3JzIGtleXdvcmQgYXJndW1lbnQuIFRoZXNlCiAgICAgICAgICAgIHBhcmFtZXRlcnMgYXJlIHByZWRlZmluZWQ6CgogICAgICAgICAgICAgJ3N0cmljdCcgLSByYWlzZSBhIFZhbHVlRXJyb3IgKG9yIGEgc3ViY2xhc3MpCiAgICAgICAgICAgICAnaWdub3JlJyAtIGlnbm9yZSB0aGUgY2hhcmFjdGVyIGFuZCBjb250aW51ZSB3aXRoIHRoZSBuZXh0CiAgICAgICAgICAgICAncmVwbGFjZSctIHJlcGxhY2Ugd2l0aCBhIHN1aXRhYmxlIHJlcGxhY2VtZW50IGNoYXJhY3RlcgogICAgICAgICAgICAgJ3htbGNoYXJyZWZyZXBsYWNlJyAtIFJlcGxhY2Ugd2l0aCB0aGUgYXBwcm9wcmlhdGUgWE1MCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyIHJlZmVyZW5jZS4KICAgICAgICAgICAgICdiYWNrc2xhc2hyZXBsYWNlJyAgLSBSZXBsYWNlIHdpdGggYmFja3NsYXNoZWQgZXNjYXBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VzIChvbmx5IGZvciBlbmNvZGluZykuCgogICAgICAgICAgICBUaGUgc2V0IG9mIGFsbG93ZWQgcGFyYW1ldGVyIHZhbHVlcyBjYW4gYmUgZXh0ZW5kZWQgdmlhCiAgICAgICAgICAgIHJlZ2lzdGVyX2Vycm9yLgogICAgICAgICIiIgogICAgICAgIHNlbGYuc3RyZWFtID0gc3RyZWFtCiAgICAgICAgc2VsZi5lcnJvcnMgPSBlcnJvcnMKCiAgICBkZWYgd3JpdGUoc2VsZiwgb2JqZWN0KToKCiAgICAgICAgIiIiIFdyaXRlcyB0aGUgb2JqZWN0J3MgY29udGVudHMgZW5jb2RlZCB0byBzZWxmLnN0cmVhbS4KICAgICAgICAiIiIKICAgICAgICBkYXRhLCBjb25zdW1lZCA9IHNlbGYuZW5jb2RlKG9iamVjdCwgc2VsZi5lcnJvcnMpCiAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoZGF0YSkKCiAgICBkZWYgd3JpdGVsaW5lcyhzZWxmLCBsaXN0KToKCiAgICAgICAgIiIiIFdyaXRlcyB0aGUgY29uY2F0ZW5hdGVkIGxpc3Qgb2Ygc3RyaW5ncyB0byB0aGUgc3RyZWFtCiAgICAgICAgICAgIHVzaW5nIC53cml0ZSgpLgogICAgICAgICIiIgogICAgICAgIHNlbGYud3JpdGUoJycuam9pbihsaXN0KSkKCiAgICBkZWYgcmVzZXQoc2VsZik6CgogICAgICAgICIiIiBGbHVzaGVzIGFuZCByZXNldHMgdGhlIGNvZGVjIGJ1ZmZlcnMgdXNlZCBmb3Iga2VlcGluZyBzdGF0ZS4KCiAgICAgICAgICAgIENhbGxpbmcgdGhpcyBtZXRob2Qgc2hvdWxkIGVuc3VyZSB0aGF0IHRoZSBkYXRhIG9uIHRoZQogICAgICAgICAgICBvdXRwdXQgaXMgcHV0IGludG8gYSBjbGVhbiBzdGF0ZSwgdGhhdCBhbGxvd3MgYXBwZW5kaW5nCiAgICAgICAgICAgIG9mIG5ldyBmcmVzaCBkYXRhIHdpdGhvdXQgaGF2aW5nIHRvIHJlc2NhbiB0aGUgd2hvbGUKICAgICAgICAgICAgc3RyZWFtIHRvIHJlY292ZXIgc3RhdGUuCgogICAgICAgICIiIgogICAgICAgIHBhc3MKCiAgICBkZWYgc2VlayhzZWxmLCBvZmZzZXQsIHdoZW5jZT0wKToKICAgICAgICBzZWxmLnN0cmVhbS5zZWVrKG9mZnNldCwgd2hlbmNlKQogICAgICAgIGlmIHdoZW5jZSA9PSAwIGFuZCBvZmZzZXQgPT0gMDoKICAgICAgICAgICAgc2VsZi5yZXNldCgpCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIG5hbWUsCiAgICAgICAgICAgICAgICAgICAgZ2V0YXR0cj1nZXRhdHRyKToKCiAgICAgICAgIiIiIEluaGVyaXQgYWxsIG90aGVyIG1ldGhvZHMgZnJvbSB0aGUgdW5kZXJseWluZyBzdHJlYW0uCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5zdHJlYW0sIG5hbWUpCgogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCB0eXBlLCB2YWx1ZSwgdGIpOgogICAgICAgIHNlbGYuc3RyZWFtLmNsb3NlKCkKCiMjIwoKY2xhc3MgU3RyZWFtUmVhZGVyKENvZGVjKToKCiAgICBjaGFyYnVmZmVydHlwZSA9IHN0cgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzdHJlYW0sIGVycm9ycz0nc3RyaWN0Jyk6CgogICAgICAgICIiIiBDcmVhdGVzIGEgU3RyZWFtUmVhZGVyIGluc3RhbmNlLgoKICAgICAgICAgICAgc3RyZWFtIG11c3QgYmUgYSBmaWxlLWxpa2Ugb2JqZWN0IG9wZW4gZm9yIHJlYWRpbmcKICAgICAgICAgICAgKGJpbmFyeSkgZGF0YS4KCiAgICAgICAgICAgIFRoZSBTdHJlYW1SZWFkZXIgbWF5IHVzZSBkaWZmZXJlbnQgZXJyb3IgaGFuZGxpbmcKICAgICAgICAgICAgc2NoZW1lcyBieSBwcm92aWRpbmcgdGhlIGVycm9ycyBrZXl3b3JkIGFyZ3VtZW50LiBUaGVzZQogICAgICAgICAgICBwYXJhbWV0ZXJzIGFyZSBwcmVkZWZpbmVkOgoKICAgICAgICAgICAgICdzdHJpY3QnIC0gcmFpc2UgYSBWYWx1ZUVycm9yIChvciBhIHN1YmNsYXNzKQogICAgICAgICAgICAgJ2lnbm9yZScgLSBpZ25vcmUgdGhlIGNoYXJhY3RlciBhbmQgY29udGludWUgd2l0aCB0aGUgbmV4dAogICAgICAgICAgICAgJ3JlcGxhY2UnLSByZXBsYWNlIHdpdGggYSBzdWl0YWJsZSByZXBsYWNlbWVudCBjaGFyYWN0ZXI7CgogICAgICAgICAgICBUaGUgc2V0IG9mIGFsbG93ZWQgcGFyYW1ldGVyIHZhbHVlcyBjYW4gYmUgZXh0ZW5kZWQgdmlhCiAgICAgICAgICAgIHJlZ2lzdGVyX2Vycm9yLgogICAgICAgICIiIgogICAgICAgIHNlbGYuc3RyZWFtID0gc3RyZWFtCiAgICAgICAgc2VsZi5lcnJvcnMgPSBlcnJvcnMKICAgICAgICAjc2VsZi5ieXRlYnVmZmVyID0gYiIiCiAgICAgICAgc2VsZi5ieXRlYnVmZmVyID0gIiIKICAgICAgICBzZWxmLl9lbXB0eV9jaGFyYnVmZmVyID0gc2VsZi5jaGFyYnVmZmVydHlwZSgpCiAgICAgICAgc2VsZi5jaGFyYnVmZmVyID0gc2VsZi5fZW1wdHlfY2hhcmJ1ZmZlcgogICAgICAgIHNlbGYubGluZWJ1ZmZlciA9IE5vbmUKCiAgICBkZWYgZGVjb2RlKHNlbGYsIGlucHV0LCBlcnJvcnM9J3N0cmljdCcpOgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IKCiAgICBkZWYgcmVhZChzZWxmLCBzaXplPS0xLCBjaGFycz0tMSwgZmlyc3RsaW5lPUZhbHNlKToKCiAgICAgICAgIiIiIERlY29kZXMgZGF0YSBmcm9tIHRoZSBzdHJlYW0gc2VsZi5zdHJlYW0gYW5kIHJldHVybnMgdGhlCiAgICAgICAgICAgIHJlc3VsdGluZyBvYmplY3QuCgogICAgICAgICAgICBjaGFycyBpbmRpY2F0ZXMgdGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIHRvIHJlYWQgZnJvbSB0aGUKICAgICAgICAgICAgc3RyZWFtLiByZWFkKCkgd2lsbCBuZXZlciByZXR1cm4gbW9yZSB0aGFuIGNoYXJzCiAgICAgICAgICAgIGNoYXJhY3RlcnMsIGJ1dCBpdCBtaWdodCByZXR1cm4gbGVzcywgaWYgdGhlcmUgYXJlIG5vdCBlbm91Z2gKICAgICAgICAgICAgY2hhcmFjdGVycyBhdmFpbGFibGUuCgogICAgICAgICAgICBzaXplIGluZGljYXRlcyB0aGUgYXBwcm94aW1hdGUgbWF4aW11bSBudW1iZXIgb2YgYnl0ZXMgdG8KICAgICAgICAgICAgcmVhZCBmcm9tIHRoZSBzdHJlYW0gZm9yIGRlY29kaW5nIHB1cnBvc2VzLiBUaGUgZGVjb2RlcgogICAgICAgICAgICBjYW4gbW9kaWZ5IHRoaXMgc2V0dGluZyBhcyBhcHByb3ByaWF0ZS4gVGhlIGRlZmF1bHQgdmFsdWUKICAgICAgICAgICAgLTEgaW5kaWNhdGVzIHRvIHJlYWQgYW5kIGRlY29kZSBhcyBtdWNoIGFzIHBvc3NpYmxlLiAgc2l6ZQogICAgICAgICAgICBpcyBpbnRlbmRlZCB0byBwcmV2ZW50IGhhdmluZyB0byBkZWNvZGUgaHVnZSBmaWxlcyBpbiBvbmUKICAgICAgICAgICAgc3RlcC4KCiAgICAgICAgICAgIElmIGZpcnN0bGluZSBpcyB0cnVlLCBhbmQgYSBVbmljb2RlRGVjb2RlRXJyb3IgaGFwcGVucwogICAgICAgICAgICBhZnRlciB0aGUgZmlyc3QgbGluZSB0ZXJtaW5hdG9yIGluIHRoZSBpbnB1dCBvbmx5IHRoZSBmaXJzdCBsaW5lCiAgICAgICAgICAgIHdpbGwgYmUgcmV0dXJuZWQsIHRoZSByZXN0IG9mIHRoZSBpbnB1dCB3aWxsIGJlIGtlcHQgdW50aWwgdGhlCiAgICAgICAgICAgIG5leHQgY2FsbCB0byByZWFkKCkuCgogICAgICAgICAgICBUaGUgbWV0aG9kIHNob3VsZCB1c2UgYSBncmVlZHkgcmVhZCBzdHJhdGVneSBtZWFuaW5nIHRoYXQKICAgICAgICAgICAgaXQgc2hvdWxkIHJlYWQgYXMgbXVjaCBkYXRhIGFzIGlzIGFsbG93ZWQgd2l0aGluIHRoZQogICAgICAgICAgICBkZWZpbml0aW9uIG9mIHRoZSBlbmNvZGluZyBhbmQgdGhlIGdpdmVuIHNpemUsIGUuZy4gIGlmCiAgICAgICAgICAgIG9wdGlvbmFsIGVuY29kaW5nIGVuZGluZ3Mgb3Igc3RhdGUgbWFya2VycyBhcmUgYXZhaWxhYmxlCiAgICAgICAgICAgIG9uIHRoZSBzdHJlYW0sIHRoZXNlIHNob3VsZCBiZSByZWFkIHRvby4KICAgICAgICAiIiIKICAgICAgICAjIElmIHdlIGhhdmUgbGluZXMgY2FjaGVkLCBmaXJzdCBtZXJnZSB0aGVtIGJhY2sgaW50byBjaGFyYWN0ZXJzCiAgICAgICAgaWYgc2VsZi5saW5lYnVmZmVyOgogICAgICAgICAgICBzZWxmLmNoYXJidWZmZXIgPSBzZWxmLl9lbXB0eV9jaGFyYnVmZmVyLmpvaW4oc2VsZi5saW5lYnVmZmVyKQogICAgICAgICAgICBzZWxmLmxpbmVidWZmZXIgPSBOb25lCgogICAgICAgICMgcmVhZCB1bnRpbCB3ZSBnZXQgdGhlIHJlcXVpcmVkIG51bWJlciBvZiBjaGFyYWN0ZXJzIChpZiBhdmFpbGFibGUpCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgIyBjYW4gdGhlIHJlcXVlc3QgY2FuIGJlIHNhdGlzZmllZCBmcm9tIHRoZSBjaGFyYWN0ZXIgYnVmZmVyPwogICAgICAgICAgICBpZiBjaGFycyA8IDA6CiAgICAgICAgICAgICAgICBpZiBzaXplIDwgMDoKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLmNoYXJidWZmZXI6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbGlmIGxlbihzZWxmLmNoYXJidWZmZXIpID49IHNpemU6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGxlbihzZWxmLmNoYXJidWZmZXIpID49IGNoYXJzOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICMgd2UgbmVlZCBtb3JlIGRhdGEKICAgICAgICAgICAgaWYgc2l6ZSA8IDA6CiAgICAgICAgICAgICAgICBuZXdkYXRhID0gc2VsZi5zdHJlYW0ucmVhZCgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBuZXdkYXRhID0gc2VsZi5zdHJlYW0ucmVhZChzaXplKQogICAgICAgICAgICAjIGRlY29kZSBieXRlcyAodGhvc2UgcmVtYWluaW5nIGZyb20gdGhlIGxhc3QgY2FsbCBpbmNsdWRlZCkKICAgICAgICAgICAgZGF0YSA9IHNlbGYuYnl0ZWJ1ZmZlciArIG5ld2RhdGEKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbmV3Y2hhcnMsIGRlY29kZWRieXRlcyA9IHNlbGYuZGVjb2RlKGRhdGEsIHNlbGYuZXJyb3JzKQogICAgICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yIGFzIGV4YzoKICAgICAgICAgICAgICAgIGlmIGZpcnN0bGluZToKICAgICAgICAgICAgICAgICAgICBuZXdjaGFycywgZGVjb2RlZGJ5dGVzID0gXAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRlY29kZShkYXRhWzpleGMuc3RhcnRdLCBzZWxmLmVycm9ycykKICAgICAgICAgICAgICAgICAgICBsaW5lcyA9IG5ld2NoYXJzLnNwbGl0bGluZXMoVHJ1ZSkKICAgICAgICAgICAgICAgICAgICBpZiBsZW4obGluZXMpPD0xOgogICAgICAgICAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICAjIGtlZXAgdW5kZWNvZGVkIGJ5dGVzIHVudGlsIHRoZSBuZXh0IGNhbGwKICAgICAgICAgICAgc2VsZi5ieXRlYnVmZmVyID0gZGF0YVtkZWNvZGVkYnl0ZXM6XQogICAgICAgICAgICAjIHB1dCBuZXcgY2hhcmFjdGVycyBpbiB0aGUgY2hhcmFjdGVyIGJ1ZmZlcgogICAgICAgICAgICBzZWxmLmNoYXJidWZmZXIgKz0gbmV3Y2hhcnMKICAgICAgICAgICAgIyB0aGVyZSB3YXMgbm8gZGF0YSBhdmFpbGFibGUKICAgICAgICAgICAgaWYgbm90IG5ld2RhdGE6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIGlmIGNoYXJzIDwgMDoKICAgICAgICAgICAgIyBSZXR1cm4gZXZlcnl0aGluZyB3ZSd2ZSBnb3QKICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5jaGFyYnVmZmVyCiAgICAgICAgICAgIHNlbGYuY2hhcmJ1ZmZlciA9IHNlbGYuX2VtcHR5X2NoYXJidWZmZXIKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIFJldHVybiB0aGUgZmlyc3QgY2hhcnMgY2hhcmFjdGVycwogICAgICAgICAgICByZXN1bHQgPSBzZWxmLmNoYXJidWZmZXJbOmNoYXJzXQogICAgICAgICAgICBzZWxmLmNoYXJidWZmZXIgPSBzZWxmLmNoYXJidWZmZXJbY2hhcnM6XQogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgcmVhZGxpbmUoc2VsZiwgc2l6ZT1Ob25lLCBrZWVwZW5kcz1UcnVlKToKCiAgICAgICAgIiIiIFJlYWQgb25lIGxpbmUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtIGFuZCByZXR1cm4gdGhlCiAgICAgICAgICAgIGRlY29kZWQgZGF0YS4KCiAgICAgICAgICAgIHNpemUsIGlmIGdpdmVuLCBpcyBwYXNzZWQgYXMgc2l6ZSBhcmd1bWVudCB0byB0aGUKICAgICAgICAgICAgcmVhZCgpIG1ldGhvZC4KCiAgICAgICAgIiIiCiAgICAgICAgIyBJZiB3ZSBoYXZlIGxpbmVzIGNhY2hlZCBmcm9tIGFuIGVhcmxpZXIgcmVhZCwgcmV0dXJuCiAgICAgICAgIyB0aGVtIHVuY29uZGl0aW9uYWxseQogICAgICAgIGlmIHNlbGYubGluZWJ1ZmZlcjoKICAgICAgICAgICAgbGluZSA9IHNlbGYubGluZWJ1ZmZlclswXQogICAgICAgICAgICBkZWwgc2VsZi5saW5lYnVmZmVyWzBdCiAgICAgICAgICAgIGlmIGxlbihzZWxmLmxpbmVidWZmZXIpID09IDE6CiAgICAgICAgICAgICAgICAjIHJldmVydCB0byBjaGFyYnVmZmVyIG1vZGU7IHdlIG1pZ2h0IG5lZWQgbW9yZSBkYXRhCiAgICAgICAgICAgICAgICAjIG5leHQgdGltZQogICAgICAgICAgICAgICAgc2VsZi5jaGFyYnVmZmVyID0gc2VsZi5saW5lYnVmZmVyWzBdCiAgICAgICAgICAgICAgICBzZWxmLmxpbmVidWZmZXIgPSBOb25lCiAgICAgICAgICAgIGlmIG5vdCBrZWVwZW5kczoKICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNwbGl0bGluZXMoRmFsc2UpWzBdCiAgICAgICAgICAgIHJldHVybiBsaW5lCgogICAgICAgIHJlYWRzaXplID0gc2l6ZSBvciA3MgogICAgICAgIGxpbmUgPSBzZWxmLl9lbXB0eV9jaGFyYnVmZmVyCiAgICAgICAgIyBJZiBzaXplIGlzIGdpdmVuLCB3ZSBjYWxsIHJlYWQoKSBvbmx5IG9uY2UKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICBkYXRhID0gc2VsZi5yZWFkKHJlYWRzaXplLCBmaXJzdGxpbmU9VHJ1ZSkKICAgICAgICAgICAgaWYgZGF0YToKICAgICAgICAgICAgICAgICMgSWYgd2UncmUgYXQgYSAiXHIiIHJlYWQgb25lIGV4dHJhIGNoYXJhY3RlciAod2hpY2ggbWlnaHQKICAgICAgICAgICAgICAgICMgYmUgYSAiXG4iKSB0byBnZXQgYSBwcm9wZXIgbGluZSBlbmRpbmcuIElmIHRoZSBzdHJlYW0gaXMKICAgICAgICAgICAgICAgICMgdGVtcG9yYXJpbHkgZXhoYXVzdGVkIHdlIHJldHVybiB0aGUgd3JvbmcgbGluZSBlbmRpbmcuCiAgICAgICAgICAgICAgICAjaWYgKGlzaW5zdGFuY2UoZGF0YSwgc3RyKSBhbmQgZGF0YS5lbmRzd2l0aCgiXHIiKSkgb3IgXAogICAgICAgICAgICAgICAgIyAgIChpc2luc3RhbmNlKGRhdGEsIGJ5dGVzKSBhbmQgZGF0YS5lbmRzd2l0aChiIlxyIikpOgogICAgICAgICAgICAgICAgaWYgKGlzaW5zdGFuY2UoZGF0YSwgc3RyKSBhbmQgZGF0YS5lbmRzd2l0aCgiXHIiKSkgb3IgXAogICAgICAgICAgICAgICAgICAgKGlzaW5zdGFuY2UoZGF0YSwgYnl0ZXMpIGFuZCBkYXRhLmVuZHN3aXRoKCJcciIpKToKICAgICAgICAgICAgICAgICAgICBkYXRhICs9IHNlbGYucmVhZChzaXplPTEsIGNoYXJzPTEpCgogICAgICAgICAgICBsaW5lICs9IGRhdGEKICAgICAgICAgICAgbGluZXMgPSBsaW5lLnNwbGl0bGluZXMoVHJ1ZSkKICAgICAgICAgICAgaWYgbGluZXM6CiAgICAgICAgICAgICAgICBpZiBsZW4obGluZXMpID4gMToKICAgICAgICAgICAgICAgICAgICAjIE1vcmUgdGhhbiBvbmUgbGluZSByZXN1bHQ7IHRoZSBmaXJzdCBsaW5lIGlzIGEgZnVsbCBsaW5lCiAgICAgICAgICAgICAgICAgICAgIyB0byByZXR1cm4KICAgICAgICAgICAgICAgICAgICBsaW5lID0gbGluZXNbMF0KICAgICAgICAgICAgICAgICAgICBkZWwgbGluZXNbMF0KICAgICAgICAgICAgICAgICAgICBpZiBsZW4obGluZXMpID4gMToKICAgICAgICAgICAgICAgICAgICAgICAgIyBjYWNoZSB0aGUgcmVtYWluaW5nIGxpbmVzCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzWy0xXSArPSBzZWxmLmNoYXJidWZmZXIKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5saW5lYnVmZmVyID0gbGluZXMKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGFyYnVmZmVyID0gTm9uZQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICMgb25seSBvbmUgcmVtYWluaW5nIGxpbmUsIHB1dCBpdCBiYWNrIGludG8gY2hhcmJ1ZmZlcgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYXJidWZmZXIgPSBsaW5lc1swXSArIHNlbGYuY2hhcmJ1ZmZlcgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBrZWVwZW5kczoKICAgICAgICAgICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc3BsaXRsaW5lcyhGYWxzZSlbMF0KICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgbGluZTB3aXRoZW5kID0gbGluZXNbMF0KICAgICAgICAgICAgICAgIGxpbmUwd2l0aG91dGVuZCA9IGxpbmVzWzBdLnNwbGl0bGluZXMoRmFsc2UpWzBdCiAgICAgICAgICAgICAgICBpZiBsaW5lMHdpdGhlbmQgIT0gbGluZTB3aXRob3V0ZW5kOiAjIFdlIHJlYWxseSBoYXZlIGEgbGluZSBlbmQKICAgICAgICAgICAgICAgICAgICAjIFB1dCB0aGUgcmVzdCBiYWNrIHRvZ2V0aGVyIGFuZCBrZWVwIGl0IHVudGlsIHRoZSBuZXh0IGNhbGwKICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYXJidWZmZXIgPSBzZWxmLl9lbXB0eV9jaGFyYnVmZmVyLmpvaW4obGluZXNbMTpdKSArIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYXJidWZmZXIKICAgICAgICAgICAgICAgICAgICBpZiBrZWVwZW5kczoKICAgICAgICAgICAgICAgICAgICAgICAgbGluZSA9IGxpbmUwd2l0aGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lMHdpdGhvdXRlbmQKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAjIHdlIGRpZG4ndCBnZXQgYW55dGhpbmcgb3IgdGhpcyB3YXMgb3VyIG9ubHkgdHJ5CiAgICAgICAgICAgIGlmIG5vdCBkYXRhIG9yIHNpemUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBpZiBsaW5lIGFuZCBub3Qga2VlcGVuZHM6CiAgICAgICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc3BsaXRsaW5lcyhGYWxzZSlbMF0KICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGlmIHJlYWRzaXplIDwgODAwMDoKICAgICAgICAgICAgICAgIHJlYWRzaXplICo9IDIKICAgICAgICByZXR1cm4gbGluZQoKICAgIGRlZiByZWFkbGluZXMoc2VsZiwgc2l6ZWhpbnQ9Tm9uZSwga2VlcGVuZHM9VHJ1ZSk6CgogICAgICAgICIiIiBSZWFkIGFsbCBsaW5lcyBhdmFpbGFibGUgb24gdGhlIGlucHV0IHN0cmVhbQogICAgICAgICAgICBhbmQgcmV0dXJuIHRoZW0gYXMgbGlzdCBvZiBsaW5lcy4KCiAgICAgICAgICAgIExpbmUgYnJlYWtzIGFyZSBpbXBsZW1lbnRlZCB1c2luZyB0aGUgY29kZWMncyBkZWNvZGVyCiAgICAgICAgICAgIG1ldGhvZCBhbmQgYXJlIGluY2x1ZGVkIGluIHRoZSBsaXN0IGVudHJpZXMuCgogICAgICAgICAgICBzaXplaGludCwgaWYgZ2l2ZW4sIGlzIGlnbm9yZWQgc2luY2UgdGhlcmUgaXMgbm8gZWZmaWNpZW50CiAgICAgICAgICAgIHdheSB0byBmaW5kaW5nIHRoZSB0cnVlIGVuZC1vZi1saW5lLgoKICAgICAgICAiIiIKICAgICAgICBkYXRhID0gc2VsZi5yZWFkKCkKICAgICAgICByZXR1cm4gZGF0YS5zcGxpdGxpbmVzKGtlZXBlbmRzKQoKICAgIGRlZiByZXNldChzZWxmKToKCiAgICAgICAgIiIiIFJlc2V0cyB0aGUgY29kZWMgYnVmZmVycyB1c2VkIGZvciBrZWVwaW5nIHN0YXRlLgoKICAgICAgICAgICAgTm90ZSB0aGF0IG5vIHN0cmVhbSByZXBvc2l0aW9uaW5nIHNob3VsZCB0YWtlIHBsYWNlLgogICAgICAgICAgICBUaGlzIG1ldGhvZCBpcyBwcmltYXJpbHkgaW50ZW5kZWQgdG8gYmUgYWJsZSB0byByZWNvdmVyCiAgICAgICAgICAgIGZyb20gZGVjb2RpbmcgZXJyb3JzLgoKICAgICAgICAiIiIKICAgICAgICAjc2VsZi5ieXRlYnVmZmVyID0gYiIiCiAgICAgICAgc2VsZi5ieXRlYnVmZmVyID0gIiIKICAgICAgICBzZWxmLmNoYXJidWZmZXIgPSBzZWxmLl9lbXB0eV9jaGFyYnVmZmVyCiAgICAgICAgc2VsZi5saW5lYnVmZmVyID0gTm9uZQoKICAgIGRlZiBzZWVrKHNlbGYsIG9mZnNldCwgd2hlbmNlPTApOgogICAgICAgICIiIiBTZXQgdGhlIGlucHV0IHN0cmVhbSdzIGN1cnJlbnQgcG9zaXRpb24uCgogICAgICAgICAgICBSZXNldHMgdGhlIGNvZGVjIGJ1ZmZlcnMgdXNlZCBmb3Iga2VlcGluZyBzdGF0ZS4KICAgICAgICAiIiIKICAgICAgICBzZWxmLnN0cmVhbS5zZWVrKG9mZnNldCwgd2hlbmNlKQogICAgICAgIHNlbGYucmVzZXQoKQoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKCiAgICAgICAgIiIiIFJldHVybiB0aGUgbmV4dCBkZWNvZGVkIGxpbmUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtLiIiIgogICAgICAgIGxpbmUgPSBzZWxmLnJlYWRsaW5lKCkKICAgICAgICBpZiBsaW5lOgogICAgICAgICAgICByZXR1cm4gbGluZQogICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgbmFtZSwKICAgICAgICAgICAgICAgICAgICBnZXRhdHRyPWdldGF0dHIpOgoKICAgICAgICAiIiIgSW5oZXJpdCBhbGwgb3RoZXIgbWV0aG9kcyBmcm9tIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gZ2V0YXR0cihzZWxmLnN0cmVhbSwgbmFtZSkKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIHR5cGUsIHZhbHVlLCB0Yik6CiAgICAgICAgc2VsZi5zdHJlYW0uY2xvc2UoKQoKIyMjCgpjbGFzcyBTdHJlYW1SZWFkZXJXcml0ZXI6CgogICAgIiIiIFN0cmVhbVJlYWRlcldyaXRlciBpbnN0YW5jZXMgYWxsb3cgd3JhcHBpbmcgc3RyZWFtcyB3aGljaAogICAgICAgIHdvcmsgaW4gYm90aCByZWFkIGFuZCB3cml0ZSBtb2Rlcy4KCiAgICAgICAgVGhlIGRlc2lnbiBpcyBzdWNoIHRoYXQgb25lIGNhbiB1c2UgdGhlIGZhY3RvcnkgZnVuY3Rpb25zCiAgICAgICAgcmV0dXJuZWQgYnkgdGhlIGNvZGVjLmxvb2t1cCgpIGZ1bmN0aW9uIHRvIGNvbnN0cnVjdCB0aGUKICAgICAgICBpbnN0YW5jZS4KCiAgICAiIiIKICAgICMgT3B0aW9uYWwgYXR0cmlidXRlcyBzZXQgYnkgdGhlIGZpbGUgd3JhcHBlcnMgYmVsb3cKICAgIGVuY29kaW5nID0gJ3Vua25vd24nCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbSwgUmVhZGVyLCBXcml0ZXIsIGVycm9ycz0nc3RyaWN0Jyk6CgogICAgICAgICIiIiBDcmVhdGVzIGEgU3RyZWFtUmVhZGVyV3JpdGVyIGluc3RhbmNlLgoKICAgICAgICAgICAgc3RyZWFtIG11c3QgYmUgYSBTdHJlYW0tbGlrZSBvYmplY3QuCgogICAgICAgICAgICBSZWFkZXIsIFdyaXRlciBtdXN0IGJlIGZhY3RvcnkgZnVuY3Rpb25zIG9yIGNsYXNzZXMKICAgICAgICAgICAgcHJvdmlkaW5nIHRoZSBTdHJlYW1SZWFkZXIsIFN0cmVhbVdyaXRlciBpbnRlcmZhY2UgcmVzcC4KCiAgICAgICAgICAgIEVycm9yIGhhbmRsaW5nIGlzIGRvbmUgaW4gdGhlIHNhbWUgd2F5IGFzIGRlZmluZWQgZm9yIHRoZQogICAgICAgICAgICBTdHJlYW1Xcml0ZXIvUmVhZGVycy4KCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5zdHJlYW0gPSBzdHJlYW0KICAgICAgICBzZWxmLnJlYWRlciA9IFJlYWRlcihzdHJlYW0sIGVycm9ycykKICAgICAgICBzZWxmLndyaXRlciA9IFdyaXRlcihzdHJlYW0sIGVycm9ycykKICAgICAgICBzZWxmLmVycm9ycyA9IGVycm9ycwoKICAgIGRlZiByZWFkKHNlbGYsIHNpemU9LTEpOgoKICAgICAgICByZXR1cm4gc2VsZi5yZWFkZXIucmVhZChzaXplKQoKICAgIGRlZiByZWFkbGluZShzZWxmLCBzaXplPU5vbmUpOgoKICAgICAgICByZXR1cm4gc2VsZi5yZWFkZXIucmVhZGxpbmUoc2l6ZSkKCiAgICBkZWYgcmVhZGxpbmVzKHNlbGYsIHNpemVoaW50PU5vbmUpOgoKICAgICAgICByZXR1cm4gc2VsZi5yZWFkZXIucmVhZGxpbmVzKHNpemVoaW50KQoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKCiAgICAgICAgIiIiIFJldHVybiB0aGUgbmV4dCBkZWNvZGVkIGxpbmUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtLiIiIgogICAgICAgIHJldHVybiBuZXh0KHNlbGYucmVhZGVyKQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiB3cml0ZShzZWxmLCBkYXRhKToKCiAgICAgICAgcmV0dXJuIHNlbGYud3JpdGVyLndyaXRlKGRhdGEpCgogICAgZGVmIHdyaXRlbGluZXMoc2VsZiwgbGlzdCk6CgogICAgICAgIHJldHVybiBzZWxmLndyaXRlci53cml0ZWxpbmVzKGxpc3QpCgogICAgZGVmIHJlc2V0KHNlbGYpOgoKICAgICAgICBzZWxmLnJlYWRlci5yZXNldCgpCiAgICAgICAgc2VsZi53cml0ZXIucmVzZXQoKQoKICAgIGRlZiBzZWVrKHNlbGYsIG9mZnNldCwgd2hlbmNlPTApOgogICAgICAgIHNlbGYuc3RyZWFtLnNlZWsob2Zmc2V0LCB3aGVuY2UpCiAgICAgICAgc2VsZi5yZWFkZXIucmVzZXQoKQogICAgICAgIGlmIHdoZW5jZSA9PSAwIGFuZCBvZmZzZXQgPT0gMDoKICAgICAgICAgICAgc2VsZi53cml0ZXIucmVzZXQoKQoKICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBuYW1lLAogICAgICAgICAgICAgICAgICAgIGdldGF0dHI9Z2V0YXR0cik6CgogICAgICAgICIiIiBJbmhlcml0IGFsbCBvdGhlciBtZXRob2RzIGZyb20gdGhlIHVuZGVybHlpbmcgc3RyZWFtLgogICAgICAgICIiIgogICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYuc3RyZWFtLCBuYW1lKQoKICAgICMgdGhlc2UgYXJlIG5lZWRlZCB0byBtYWtlICJ3aXRoIGNvZGVjcy5vcGVuKC4uLikiIHdvcmsgcHJvcGVybHkKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIHR5cGUsIHZhbHVlLCB0Yik6CiAgICAgICAgc2VsZi5zdHJlYW0uY2xvc2UoKQoKIyMjCgpjbGFzcyBTdHJlYW1SZWNvZGVyOgoKICAgICIiIiBTdHJlYW1SZWNvZGVyIGluc3RhbmNlcyBwcm92aWRlIGEgZnJvbnRlbmQgLSBiYWNrZW5kCiAgICAgICAgdmlldyBvZiBlbmNvZGluZyBkYXRhLgoKICAgICAgICBUaGV5IHVzZSB0aGUgY29tcGxldGUgc2V0IG9mIEFQSXMgcmV0dXJuZWQgYnkgdGhlCiAgICAgICAgY29kZWNzLmxvb2t1cCgpIGZ1bmN0aW9uIHRvIGltcGxlbWVudCB0aGVpciB0YXNrLgoKICAgICAgICBEYXRhIHdyaXR0ZW4gdG8gdGhlIHN0cmVhbSBpcyBmaXJzdCBkZWNvZGVkIGludG8gYW4KICAgICAgICBpbnRlcm1lZGlhdGUgZm9ybWF0ICh3aGljaCBpcyBkZXBlbmRlbnQgb24gdGhlIGdpdmVuIGNvZGVjCiAgICAgICAgY29tYmluYXRpb24pIGFuZCB0aGVuIHdyaXR0ZW4gdG8gdGhlIHN0cmVhbSB1c2luZyBhbiBpbnN0YW5jZQogICAgICAgIG9mIHRoZSBwcm92aWRlZCBXcml0ZXIgY2xhc3MuCgogICAgICAgIEluIHRoZSBvdGhlciBkaXJlY3Rpb24sIGRhdGEgaXMgcmVhZCBmcm9tIHRoZSBzdHJlYW0gdXNpbmcgYQogICAgICAgIFJlYWRlciBpbnN0YW5jZSBhbmQgdGhlbiByZXR1cm4gZW5jb2RlZCBkYXRhIHRvIHRoZSBjYWxsZXIuCgogICAgIiIiCiAgICAjIE9wdGlvbmFsIGF0dHJpYnV0ZXMgc2V0IGJ5IHRoZSBmaWxlIHdyYXBwZXJzIGJlbG93CiAgICBkYXRhX2VuY29kaW5nID0gJ3Vua25vd24nCiAgICBmaWxlX2VuY29kaW5nID0gJ3Vua25vd24nCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbSwgZW5jb2RlLCBkZWNvZGUsIFJlYWRlciwgV3JpdGVyLAogICAgICAgICAgICAgICAgIGVycm9ycz0nc3RyaWN0Jyk6CgogICAgICAgICIiIiBDcmVhdGVzIGEgU3RyZWFtUmVjb2RlciBpbnN0YW5jZSB3aGljaCBpbXBsZW1lbnRzIGEgdHdvLXdheQogICAgICAgICAgICBjb252ZXJzaW9uOiBlbmNvZGUgYW5kIGRlY29kZSB3b3JrIG9uIHRoZSBmcm9udGVuZCAodGhlCiAgICAgICAgICAgIGlucHV0IHRvIC5yZWFkKCkgYW5kIG91dHB1dCBvZiAud3JpdGUoKSkgd2hpbGUKICAgICAgICAgICAgUmVhZGVyIGFuZCBXcml0ZXIgd29yayBvbiB0aGUgYmFja2VuZCAocmVhZGluZyBhbmQKICAgICAgICAgICAgd3JpdGluZyB0byB0aGUgc3RyZWFtKS4KCiAgICAgICAgICAgIFlvdSBjYW4gdXNlIHRoZXNlIG9iamVjdHMgdG8gZG8gdHJhbnNwYXJlbnQgZGlyZWN0CiAgICAgICAgICAgIHJlY29kaW5ncyBmcm9tIGUuZy4gbGF0aW4tMSB0byB1dGYtOCBhbmQgYmFjay4KCiAgICAgICAgICAgIHN0cmVhbSBtdXN0IGJlIGEgZmlsZS1saWtlIG9iamVjdC4KCiAgICAgICAgICAgIGVuY29kZSwgZGVjb2RlIG11c3QgYWRoZXJlIHRvIHRoZSBDb2RlYyBpbnRlcmZhY2UsIFJlYWRlciwKICAgICAgICAgICAgV3JpdGVyIG11c3QgYmUgZmFjdG9yeSBmdW5jdGlvbnMgb3IgY2xhc3NlcyBwcm92aWRpbmcgdGhlCiAgICAgICAgICAgIFN0cmVhbVJlYWRlciwgU3RyZWFtV3JpdGVyIGludGVyZmFjZSByZXNwLgoKICAgICAgICAgICAgZW5jb2RlIGFuZCBkZWNvZGUgYXJlIG5lZWRlZCBmb3IgdGhlIGZyb250ZW5kIHRyYW5zbGF0aW9uLAogICAgICAgICAgICBSZWFkZXIgYW5kIFdyaXRlciBmb3IgdGhlIGJhY2tlbmQgdHJhbnNsYXRpb24uIFVuaWNvZGUgaXMKICAgICAgICAgICAgdXNlZCBhcyBpbnRlcm1lZGlhdGUgZW5jb2RpbmcuCgogICAgICAgICAgICBFcnJvciBoYW5kbGluZyBpcyBkb25lIGluIHRoZSBzYW1lIHdheSBhcyBkZWZpbmVkIGZvciB0aGUKICAgICAgICAgICAgU3RyZWFtV3JpdGVyL1JlYWRlcnMuCgogICAgICAgICIiIgogICAgICAgIHNlbGYuc3RyZWFtID0gc3RyZWFtCiAgICAgICAgc2VsZi5lbmNvZGUgPSBlbmNvZGUKICAgICAgICBzZWxmLmRlY29kZSA9IGRlY29kZQogICAgICAgIHNlbGYucmVhZGVyID0gUmVhZGVyKHN0cmVhbSwgZXJyb3JzKQogICAgICAgIHNlbGYud3JpdGVyID0gV3JpdGVyKHN0cmVhbSwgZXJyb3JzKQogICAgICAgIHNlbGYuZXJyb3JzID0gZXJyb3JzCgogICAgZGVmIHJlYWQoc2VsZiwgc2l6ZT0tMSk6CgogICAgICAgIGRhdGEgPSBzZWxmLnJlYWRlci5yZWFkKHNpemUpCiAgICAgICAgZGF0YSwgYnl0ZXNlbmNvZGVkID0gc2VsZi5lbmNvZGUoZGF0YSwgc2VsZi5lcnJvcnMpCiAgICAgICAgcmV0dXJuIGRhdGEKCiAgICBkZWYgcmVhZGxpbmUoc2VsZiwgc2l6ZT1Ob25lKToKCiAgICAgICAgaWYgc2l6ZSBpcyBOb25lOgogICAgICAgICAgICBkYXRhID0gc2VsZi5yZWFkZXIucmVhZGxpbmUoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRhdGEgPSBzZWxmLnJlYWRlci5yZWFkbGluZShzaXplKQogICAgICAgIGRhdGEsIGJ5dGVzZW5jb2RlZCA9IHNlbGYuZW5jb2RlKGRhdGEsIHNlbGYuZXJyb3JzKQogICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIHJlYWRsaW5lcyhzZWxmLCBzaXplaGludD1Ob25lKToKCiAgICAgICAgZGF0YSA9IHNlbGYucmVhZGVyLnJlYWQoKQogICAgICAgIGRhdGEsIGJ5dGVzZW5jb2RlZCA9IHNlbGYuZW5jb2RlKGRhdGEsIHNlbGYuZXJyb3JzKQogICAgICAgIHJldHVybiBkYXRhLnNwbGl0bGluZXMoMSkKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CgogICAgICAgICIiIiBSZXR1cm4gdGhlIG5leHQgZGVjb2RlZCBsaW5lIGZyb20gdGhlIGlucHV0IHN0cmVhbS4iIiIKICAgICAgICBkYXRhID0gbmV4dChzZWxmLnJlYWRlcikKICAgICAgICBkYXRhLCBieXRlc2VuY29kZWQgPSBzZWxmLmVuY29kZShkYXRhLCBzZWxmLmVycm9ycykKICAgICAgICByZXR1cm4gZGF0YQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiB3cml0ZShzZWxmLCBkYXRhKToKCiAgICAgICAgZGF0YSwgYnl0ZXNkZWNvZGVkID0gc2VsZi5kZWNvZGUoZGF0YSwgc2VsZi5lcnJvcnMpCiAgICAgICAgcmV0dXJuIHNlbGYud3JpdGVyLndyaXRlKGRhdGEpCgogICAgZGVmIHdyaXRlbGluZXMoc2VsZiwgbGlzdCk6CgogICAgICAgIGRhdGEgPSAnJy5qb2luKGxpc3QpCiAgICAgICAgZGF0YSwgYnl0ZXNkZWNvZGVkID0gc2VsZi5kZWNvZGUoZGF0YSwgc2VsZi5lcnJvcnMpCiAgICAgICAgcmV0dXJuIHNlbGYud3JpdGVyLndyaXRlKGRhdGEpCgogICAgZGVmIHJlc2V0KHNlbGYpOgoKICAgICAgICBzZWxmLnJlYWRlci5yZXNldCgpCiAgICAgICAgc2VsZi53cml0ZXIucmVzZXQoKQoKICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBuYW1lLAogICAgICAgICAgICAgICAgICAgIGdldGF0dHI9Z2V0YXR0cik6CgogICAgICAgICIiIiBJbmhlcml0IGFsbCBvdGhlciBtZXRob2RzIGZyb20gdGhlIHVuZGVybHlpbmcgc3RyZWFtLgogICAgICAgICIiIgogICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYuc3RyZWFtLCBuYW1lKQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19leGl0X18oc2VsZiwgdHlwZSwgdmFsdWUsIHRiKToKICAgICAgICBzZWxmLnN0cmVhbS5jbG9zZSgpCgojIyMgU2hvcnRjdXRzCgpkZWYgb3BlbihmaWxlbmFtZSwgbW9kZT0ncmInLCBlbmNvZGluZz1Ob25lLCBlcnJvcnM9J3N0cmljdCcsIGJ1ZmZlcmluZz0xKToKCiAgICAiIiIgT3BlbiBhbiBlbmNvZGVkIGZpbGUgdXNpbmcgdGhlIGdpdmVuIG1vZGUgYW5kIHJldHVybgogICAgICAgIGEgd3JhcHBlZCB2ZXJzaW9uIHByb3ZpZGluZyB0cmFuc3BhcmVudCBlbmNvZGluZy9kZWNvZGluZy4KCiAgICAgICAgTm90ZTogVGhlIHdyYXBwZWQgdmVyc2lvbiB3aWxsIG9ubHkgYWNjZXB0IHRoZSBvYmplY3QgZm9ybWF0CiAgICAgICAgZGVmaW5lZCBieSB0aGUgY29kZWNzLCBpLmUuIFVuaWNvZGUgb2JqZWN0cyBmb3IgbW9zdCBidWlsdGluCiAgICAgICAgY29kZWNzLiBPdXRwdXQgaXMgYWxzbyBjb2RlYyBkZXBlbmRlbnQgYW5kIHdpbGwgdXN1YWxseSBiZQogICAgICAgIFVuaWNvZGUgYXMgd2VsbC4KCiAgICAgICAgRmlsZXMgYXJlIGFsd2F5cyBvcGVuZWQgaW4gYmluYXJ5IG1vZGUsIGV2ZW4gaWYgbm8gYmluYXJ5IG1vZGUKICAgICAgICB3YXMgc3BlY2lmaWVkLiBUaGlzIGlzIGRvbmUgdG8gYXZvaWQgZGF0YSBsb3NzIGR1ZSB0byBlbmNvZGluZ3MKICAgICAgICB1c2luZyA4LWJpdCB2YWx1ZXMuIFRoZSBkZWZhdWx0IGZpbGUgbW9kZSBpcyAncmInIG1lYW5pbmcgdG8KICAgICAgICBvcGVuIHRoZSBmaWxlIGluIGJpbmFyeSByZWFkIG1vZGUuCgogICAgICAgIGVuY29kaW5nIHNwZWNpZmllcyB0aGUgZW5jb2Rpbmcgd2hpY2ggaXMgdG8gYmUgdXNlZCBmb3IgdGhlCiAgICAgICAgZmlsZS4KCiAgICAgICAgZXJyb3JzIG1heSBiZSBnaXZlbiB0byBkZWZpbmUgdGhlIGVycm9yIGhhbmRsaW5nLiBJdCBkZWZhdWx0cwogICAgICAgIHRvICdzdHJpY3QnIHdoaWNoIGNhdXNlcyBWYWx1ZUVycm9ycyB0byBiZSByYWlzZWQgaW4gY2FzZSBhbgogICAgICAgIGVuY29kaW5nIGVycm9yIG9jY3Vycy4KCiAgICAgICAgYnVmZmVyaW5nIGhhcyB0aGUgc2FtZSBtZWFuaW5nIGFzIGZvciB0aGUgYnVpbHRpbiBvcGVuKCkgQVBJLgogICAgICAgIEl0IGRlZmF1bHRzIHRvIGxpbmUgYnVmZmVyZWQuCgogICAgICAgIFRoZSByZXR1cm5lZCB3cmFwcGVkIGZpbGUgb2JqZWN0IHByb3ZpZGVzIGFuIGV4dHJhIGF0dHJpYnV0ZQogICAgICAgIC5lbmNvZGluZyB3aGljaCBhbGxvd3MgcXVlcnlpbmcgdGhlIHVzZWQgZW5jb2RpbmcuIFRoaXMKICAgICAgICBhdHRyaWJ1dGUgaXMgb25seSBhdmFpbGFibGUgaWYgYW4gZW5jb2Rpbmcgd2FzIHNwZWNpZmllZCBhcwogICAgICAgIHBhcmFtZXRlci4KCiAgICAiIiIKICAgIGlmIGVuY29kaW5nIGlzIG5vdCBOb25lIGFuZCBcCiAgICAgICAnYicgbm90IGluIG1vZGU6CiAgICAgICAgIyBGb3JjZSBvcGVuaW5nIG9mIHRoZSBmaWxlIGluIGJpbmFyeSBtb2RlCiAgICAgICAgbW9kZSA9IG1vZGUgKyAnYicKICAgIGZpbGUgPSBidWlsdGlucy5vcGVuKGZpbGVuYW1lLCBtb2RlLCBidWZmZXJpbmcpCiAgICBpZiBlbmNvZGluZyBpcyBOb25lOgogICAgICAgIHJldHVybiBmaWxlCiAgICBpbmZvID0gbG9va3VwKGVuY29kaW5nKQogICAgc3J3ID0gU3RyZWFtUmVhZGVyV3JpdGVyKGZpbGUsIGluZm8uc3RyZWFtcmVhZGVyLCBpbmZvLnN0cmVhbXdyaXRlciwgZXJyb3JzKQogICAgIyBBZGQgYXR0cmlidXRlcyB0byBzaW1wbGlmeSBpbnRyb3NwZWN0aW9uCiAgICBzcncuZW5jb2RpbmcgPSBlbmNvZGluZwogICAgcmV0dXJuIHNydwoKZGVmIEVuY29kZWRGaWxlKGZpbGUsIGRhdGFfZW5jb2RpbmcsIGZpbGVfZW5jb2Rpbmc9Tm9uZSwgZXJyb3JzPSdzdHJpY3QnKToKCiAgICAiIiIgUmV0dXJuIGEgd3JhcHBlZCB2ZXJzaW9uIG9mIGZpbGUgd2hpY2ggcHJvdmlkZXMgdHJhbnNwYXJlbnQKICAgICAgICBlbmNvZGluZyB0cmFuc2xhdGlvbi4KCiAgICAgICAgU3RyaW5ncyB3cml0dGVuIHRvIHRoZSB3cmFwcGVkIGZpbGUgYXJlIGludGVycHJldGVkIGFjY29yZGluZwogICAgICAgIHRvIHRoZSBnaXZlbiBkYXRhX2VuY29kaW5nIGFuZCB0aGVuIHdyaXR0ZW4gdG8gdGhlIG9yaWdpbmFsCiAgICAgICAgZmlsZSBhcyBzdHJpbmcgdXNpbmcgZmlsZV9lbmNvZGluZy4gVGhlIGludGVybWVkaWF0ZSBlbmNvZGluZwogICAgICAgIHdpbGwgdXN1YWxseSBiZSBVbmljb2RlIGJ1dCBkZXBlbmRzIG9uIHRoZSBzcGVjaWZpZWQgY29kZWNzLgoKICAgICAgICBTdHJpbmdzIGFyZSByZWFkIGZyb20gdGhlIGZpbGUgdXNpbmcgZmlsZV9lbmNvZGluZyBhbmQgdGhlbgogICAgICAgIHBhc3NlZCBiYWNrIHRvIHRoZSBjYWxsZXIgYXMgc3RyaW5nIHVzaW5nIGRhdGFfZW5jb2RpbmcuCgogICAgICAgIElmIGZpbGVfZW5jb2RpbmcgaXMgbm90IGdpdmVuLCBpdCBkZWZhdWx0cyB0byBkYXRhX2VuY29kaW5nLgoKICAgICAgICBlcnJvcnMgbWF5IGJlIGdpdmVuIHRvIGRlZmluZSB0aGUgZXJyb3IgaGFuZGxpbmcuIEl0IGRlZmF1bHRzCiAgICAgICAgdG8gJ3N0cmljdCcgd2hpY2ggY2F1c2VzIFZhbHVlRXJyb3JzIHRvIGJlIHJhaXNlZCBpbiBjYXNlIGFuCiAgICAgICAgZW5jb2RpbmcgZXJyb3Igb2NjdXJzLgoKICAgICAgICBUaGUgcmV0dXJuZWQgd3JhcHBlZCBmaWxlIG9iamVjdCBwcm92aWRlcyB0d28gZXh0cmEgYXR0cmlidXRlcwogICAgICAgIC5kYXRhX2VuY29kaW5nIGFuZCAuZmlsZV9lbmNvZGluZyB3aGljaCByZWZsZWN0IHRoZSBnaXZlbgogICAgICAgIHBhcmFtZXRlcnMgb2YgdGhlIHNhbWUgbmFtZS4gVGhlIGF0dHJpYnV0ZXMgY2FuIGJlIHVzZWQgZm9yCiAgICAgICAgaW50cm9zcGVjdGlvbiBieSBQeXRob24gcHJvZ3JhbXMuCgogICAgIiIiCiAgICBpZiBmaWxlX2VuY29kaW5nIGlzIE5vbmU6CiAgICAgICAgZmlsZV9lbmNvZGluZyA9IGRhdGFfZW5jb2RpbmcKICAgIGRhdGFfaW5mbyA9IGxvb2t1cChkYXRhX2VuY29kaW5nKQogICAgZmlsZV9pbmZvID0gbG9va3VwKGZpbGVfZW5jb2RpbmcpCiAgICBzciA9IFN0cmVhbVJlY29kZXIoZmlsZSwgZGF0YV9pbmZvLmVuY29kZSwgZGF0YV9pbmZvLmRlY29kZSwKICAgICAgICAgICAgICAgICAgICAgICBmaWxlX2luZm8uc3RyZWFtcmVhZGVyLCBmaWxlX2luZm8uc3RyZWFtd3JpdGVyLCBlcnJvcnMpCiAgICAjIEFkZCBhdHRyaWJ1dGVzIHRvIHNpbXBsaWZ5IGludHJvc3BlY3Rpb24KICAgIHNyLmRhdGFfZW5jb2RpbmcgPSBkYXRhX2VuY29kaW5nCiAgICBzci5maWxlX2VuY29kaW5nID0gZmlsZV9lbmNvZGluZwogICAgcmV0dXJuIHNyCgojIyMgSGVscGVycyBmb3IgY29kZWMgbG9va3VwCgpkZWYgZ2V0ZW5jb2RlcihlbmNvZGluZyk6CgogICAgIiIiIExvb2t1cCB1cCB0aGUgY29kZWMgZm9yIHRoZSBnaXZlbiBlbmNvZGluZyBhbmQgcmV0dXJuCiAgICAgICAgaXRzIGVuY29kZXIgZnVuY3Rpb24uCgogICAgICAgIFJhaXNlcyBhIExvb2t1cEVycm9yIGluIGNhc2UgdGhlIGVuY29kaW5nIGNhbm5vdCBiZSBmb3VuZC4KCiAgICAiIiIKICAgIHJldHVybiBsb29rdXAoZW5jb2RpbmcpLmVuY29kZQoKZGVmIGdldGRlY29kZXIoZW5jb2RpbmcpOgoKICAgICIiIiBMb29rdXAgdXAgdGhlIGNvZGVjIGZvciB0aGUgZ2l2ZW4gZW5jb2RpbmcgYW5kIHJldHVybgogICAgICAgIGl0cyBkZWNvZGVyIGZ1bmN0aW9uLgoKICAgICAgICBSYWlzZXMgYSBMb29rdXBFcnJvciBpbiBjYXNlIHRoZSBlbmNvZGluZyBjYW5ub3QgYmUgZm91bmQuCgogICAgIiIiCiAgICByZXR1cm4gbG9va3VwKGVuY29kaW5nKS5kZWNvZGUKCmRlZiBnZXRpbmNyZW1lbnRhbGVuY29kZXIoZW5jb2RpbmcpOgoKICAgICIiIiBMb29rdXAgdXAgdGhlIGNvZGVjIGZvciB0aGUgZ2l2ZW4gZW5jb2RpbmcgYW5kIHJldHVybgogICAgICAgIGl0cyBJbmNyZW1lbnRhbEVuY29kZXIgY2xhc3Mgb3IgZmFjdG9yeSBmdW5jdGlvbi4KCiAgICAgICAgUmFpc2VzIGEgTG9va3VwRXJyb3IgaW4gY2FzZSB0aGUgZW5jb2RpbmcgY2Fubm90IGJlIGZvdW5kCiAgICAgICAgb3IgdGhlIGNvZGVjcyBkb2Vzbid0IHByb3ZpZGUgYW4gaW5jcmVtZW50YWwgZW5jb2Rlci4KCiAgICAiIiIKICAgIGVuY29kZXIgPSBsb29rdXAoZW5jb2RpbmcpLmluY3JlbWVudGFsZW5jb2RlcgogICAgaWYgZW5jb2RlciBpcyBOb25lOgogICAgICAgIHJhaXNlIExvb2t1cEVycm9yKGVuY29kaW5nKQogICAgcmV0dXJuIGVuY29kZXIKCmRlZiBnZXRpbmNyZW1lbnRhbGRlY29kZXIoZW5jb2RpbmcpOgoKICAgICIiIiBMb29rdXAgdXAgdGhlIGNvZGVjIGZvciB0aGUgZ2l2ZW4gZW5jb2RpbmcgYW5kIHJldHVybgogICAgICAgIGl0cyBJbmNyZW1lbnRhbERlY29kZXIgY2xhc3Mgb3IgZmFjdG9yeSBmdW5jdGlvbi4KCiAgICAgICAgUmFpc2VzIGEgTG9va3VwRXJyb3IgaW4gY2FzZSB0aGUgZW5jb2RpbmcgY2Fubm90IGJlIGZvdW5kCiAgICAgICAgb3IgdGhlIGNvZGVjcyBkb2Vzbid0IHByb3ZpZGUgYW4gaW5jcmVtZW50YWwgZGVjb2Rlci4KCiAgICAiIiIKICAgIGRlY29kZXIgPSBsb29rdXAoZW5jb2RpbmcpLmluY3JlbWVudGFsZGVjb2RlcgogICAgaWYgZGVjb2RlciBpcyBOb25lOgogICAgICAgIHJhaXNlIExvb2t1cEVycm9yKGVuY29kaW5nKQogICAgcmV0dXJuIGRlY29kZXIKCmRlZiBnZXRyZWFkZXIoZW5jb2RpbmcpOgoKICAgICIiIiBMb29rdXAgdXAgdGhlIGNvZGVjIGZvciB0aGUgZ2l2ZW4gZW5jb2RpbmcgYW5kIHJldHVybgogICAgICAgIGl0cyBTdHJlYW1SZWFkZXIgY2xhc3Mgb3IgZmFjdG9yeSBmdW5jdGlvbi4KCiAgICAgICAgUmFpc2VzIGEgTG9va3VwRXJyb3IgaW4gY2FzZSB0aGUgZW5jb2RpbmcgY2Fubm90IGJlIGZvdW5kLgoKICAgICIiIgogICAgcmV0dXJuIGxvb2t1cChlbmNvZGluZykuc3RyZWFtcmVhZGVyCgpkZWYgZ2V0d3JpdGVyKGVuY29kaW5nKToKCiAgICAiIiIgTG9va3VwIHVwIHRoZSBjb2RlYyBmb3IgdGhlIGdpdmVuIGVuY29kaW5nIGFuZCByZXR1cm4KICAgICAgICBpdHMgU3RyZWFtV3JpdGVyIGNsYXNzIG9yIGZhY3RvcnkgZnVuY3Rpb24uCgogICAgICAgIFJhaXNlcyBhIExvb2t1cEVycm9yIGluIGNhc2UgdGhlIGVuY29kaW5nIGNhbm5vdCBiZSBmb3VuZC4KCiAgICAiIiIKICAgIHJldHVybiBsb29rdXAoZW5jb2RpbmcpLnN0cmVhbXdyaXRlcgoKZGVmIGl0ZXJlbmNvZGUoaXRlcmF0b3IsIGVuY29kaW5nLCBlcnJvcnM9J3N0cmljdCcsICoqa3dhcmdzKToKICAgICIiIgogICAgRW5jb2RpbmcgaXRlcmF0b3IuCgogICAgRW5jb2RlcyB0aGUgaW5wdXQgc3RyaW5ncyBmcm9tIHRoZSBpdGVyYXRvciB1c2luZyBhIEluY3JlbWVudGFsRW5jb2Rlci4KCiAgICBlcnJvcnMgYW5kIGt3YXJncyBhcmUgcGFzc2VkIHRocm91Z2ggdG8gdGhlIEluY3JlbWVudGFsRW5jb2RlcgogICAgY29uc3RydWN0b3IuCiAgICAiIiIKICAgIGVuY29kZXIgPSBnZXRpbmNyZW1lbnRhbGVuY29kZXIoZW5jb2RpbmcpKGVycm9ycywgKiprd2FyZ3MpCiAgICBmb3IgaW5wdXQgaW4gaXRlcmF0b3I6CiAgICAgICAgb3V0cHV0ID0gZW5jb2Rlci5lbmNvZGUoaW5wdXQpCiAgICAgICAgaWYgb3V0cHV0OgogICAgICAgICAgICB5aWVsZCBvdXRwdXQKICAgIG91dHB1dCA9IGVuY29kZXIuZW5jb2RlKCIiLCBUcnVlKQogICAgaWYgb3V0cHV0OgogICAgICAgIHlpZWxkIG91dHB1dAoKZGVmIGl0ZXJkZWNvZGUoaXRlcmF0b3IsIGVuY29kaW5nLCBlcnJvcnM9J3N0cmljdCcsICoqa3dhcmdzKToKICAgICIiIgogICAgRGVjb2RpbmcgaXRlcmF0b3IuCgogICAgRGVjb2RlcyB0aGUgaW5wdXQgc3RyaW5ncyBmcm9tIHRoZSBpdGVyYXRvciB1c2luZyBhIEluY3JlbWVudGFsRGVjb2Rlci4KCiAgICBlcnJvcnMgYW5kIGt3YXJncyBhcmUgcGFzc2VkIHRocm91Z2ggdG8gdGhlIEluY3JlbWVudGFsRGVjb2RlcgogICAgY29uc3RydWN0b3IuCiAgICAiIiIKICAgIGRlY29kZXIgPSBnZXRpbmNyZW1lbnRhbGRlY29kZXIoZW5jb2RpbmcpKGVycm9ycywgKiprd2FyZ3MpCiAgICBmb3IgaW5wdXQgaW4gaXRlcmF0b3I6CiAgICAgICAgb3V0cHV0ID0gZGVjb2Rlci5kZWNvZGUoaW5wdXQpCiAgICAgICAgaWYgb3V0cHV0OgogICAgICAgICAgICB5aWVsZCBvdXRwdXQKICAgICNvdXRwdXQgPSBkZWNvZGVyLmRlY29kZShiIiIsIFRydWUpCiAgICBvdXRwdXQgPSBkZWNvZGVyLmRlY29kZSgiIiwgVHJ1ZSkKICAgIGlmIG91dHB1dDoKICAgICAgICB5aWVsZCBvdXRwdXQKCiMjIyBIZWxwZXJzIGZvciBjaGFybWFwLWJhc2VkIGNvZGVjcwoKZGVmIG1ha2VfaWRlbnRpdHlfZGljdChybmcpOgoKICAgICIiIiBtYWtlX2lkZW50aXR5X2RpY3Qocm5nKSAtPiBkaWN0CgogICAgICAgIFJldHVybiBhIGRpY3Rpb25hcnkgd2hlcmUgZWxlbWVudHMgb2YgdGhlIHJuZyBzZXF1ZW5jZSBhcmUKICAgICAgICBtYXBwZWQgdG8gdGhlbXNlbHZlcy4KCiAgICAiIiIKICAgIHJlcyA9IHt9CiAgICBmb3IgaSBpbiBybmc6CiAgICAgICAgcmVzW2ldPWkKICAgIHJldHVybiByZXMKCmRlZiBtYWtlX2VuY29kaW5nX21hcChkZWNvZGluZ19tYXApOgoKICAgICIiIiBDcmVhdGVzIGFuIGVuY29kaW5nIG1hcCBmcm9tIGEgZGVjb2RpbmcgbWFwLgoKICAgICAgICBJZiBhIHRhcmdldCBtYXBwaW5nIGluIHRoZSBkZWNvZGluZyBtYXAgb2NjdXJzIG11bHRpcGxlCiAgICAgICAgdGltZXMsIHRoZW4gdGhhdCB0YXJnZXQgaXMgbWFwcGVkIHRvIE5vbmUgKHVuZGVmaW5lZCBtYXBwaW5nKSwKICAgICAgICBjYXVzaW5nIGFuIGV4Y2VwdGlvbiB3aGVuIGVuY291bnRlcmVkIGJ5IHRoZSBjaGFybWFwIGNvZGVjCiAgICAgICAgZHVyaW5nIHRyYW5zbGF0aW9uLgoKICAgICAgICBPbmUgZXhhbXBsZSB3aGVyZSB0aGlzIGhhcHBlbnMgaXMgY3A4NzUucHkgd2hpY2ggZGVjb2RlcwogICAgICAgIG11bHRpcGxlIGNoYXJhY3RlciB0byBcdTAwMWEuCgogICAgIiIiCiAgICBtID0ge30KICAgIGZvciBrLHYgaW4gZGVjb2RpbmdfbWFwLml0ZW1zKCk6CiAgICAgICAgaWYgbm90IHYgaW4gbToKICAgICAgICAgICAgbVt2XSA9IGsKICAgICAgICBlbHNlOgogICAgICAgICAgICBtW3ZdID0gTm9uZQogICAgcmV0dXJuIG0KCiMjIyBlcnJvciBoYW5kbGVycwoKdHJ5OgogICAgc3RyaWN0X2Vycm9ycyA9IGxvb2t1cF9lcnJvcigic3RyaWN0IikKICAgIGlnbm9yZV9lcnJvcnMgPSBsb29rdXBfZXJyb3IoImlnbm9yZSIpCiAgICByZXBsYWNlX2Vycm9ycyA9IGxvb2t1cF9lcnJvcigicmVwbGFjZSIpCiAgICB4bWxjaGFycmVmcmVwbGFjZV9lcnJvcnMgPSBsb29rdXBfZXJyb3IoInhtbGNoYXJyZWZyZXBsYWNlIikKICAgIGJhY2tzbGFzaHJlcGxhY2VfZXJyb3JzID0gbG9va3VwX2Vycm9yKCJiYWNrc2xhc2hyZXBsYWNlIikKI2V4Y2VwdCBMb29rdXBFcnJvcjoKZXhjZXB0OgogICAgIyBJbiAtLWRpc2FibGUtdW5pY29kZSBidWlsZHMsIHRoZXNlIGVycm9yIGhhbmRsZXIgYXJlIG1pc3NpbmcKICAgIHN0cmljdF9lcnJvcnMgPSBOb25lCiAgICBpZ25vcmVfZXJyb3JzID0gTm9uZQogICAgcmVwbGFjZV9lcnJvcnMgPSBOb25lCiAgICB4bWxjaGFycmVmcmVwbGFjZV9lcnJvcnMgPSBOb25lCiAgICBiYWNrc2xhc2hyZXBsYWNlX2Vycm9ycyA9IE5vbmUKCiMgVGVsbCBtb2R1bGVmaW5kZXIgdGhhdCB1c2luZyBjb2RlY3MgcHJvYmFibHkgbmVlZHMgdGhlIGVuY29kaW5ncwojIHBhY2thZ2UKX2ZhbHNlID0gMAppZiBfZmFsc2U6CiAgICBpbXBvcnQgZW5jb2RpbmdzCgojIyMgVGVzdHMKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CgogICAgIyBNYWtlIHN0ZG91dCB0cmFuc2xhdGUgTGF0aW4tMSBvdXRwdXQgaW50byBVVEYtOCBvdXRwdXQKICAgIHN5cy5zdGRvdXQgPSBFbmNvZGVkRmlsZShzeXMuc3Rkb3V0LCAnbGF0aW4tMScsICd1dGYtOCcpCgogICAgIyBIYXZlIHN0ZGluIHRyYW5zbGF0ZSBMYXRpbi0xIGlucHV0IGludG8gVVRGLTggaW5wdXQKICAgIHN5cy5zdGRpbiA9IEVuY29kZWRGaWxlKHN5cy5zdGRpbiwgJ3V0Zi04JywgJ2xhdGluLTEnKQo=',
'/Lib/linecache.py':'IiIiQ2FjaGUgbGluZXMgZnJvbSBmaWxlcy4KClRoaXMgaXMgaW50ZW5kZWQgdG8gcmVhZCBsaW5lcyBmcm9tIG1vZHVsZXMgaW1wb3J0ZWQgLS0gaGVuY2UgaWYgYSBmaWxlbmFtZQppcyBub3QgZm91bmQsIGl0IHdpbGwgbG9vayBkb3duIHRoZSBtb2R1bGUgc2VhcmNoIHBhdGggZm9yIGEgZmlsZSBieQp0aGF0IG5hbWUuCiIiIgoKaW1wb3J0IHN5cwppbXBvcnQgb3MKI2ZpeG1lIGJyeXRob24KI2ltcG9ydCB0b2tlbml6ZQoKX19hbGxfXyA9IFsiZ2V0bGluZSIsICJjbGVhcmNhY2hlIiwgImNoZWNrY2FjaGUiXQoKZGVmIGdldGxpbmUoZmlsZW5hbWUsIGxpbmVubywgbW9kdWxlX2dsb2JhbHM9Tm9uZSk6CiAgICBsaW5lcyA9IGdldGxpbmVzKGZpbGVuYW1lLCBtb2R1bGVfZ2xvYmFscykKICAgIGlmIDEgPD0gbGluZW5vIDw9IGxlbihsaW5lcyk6CiAgICAgICAgcmV0dXJuIGxpbmVzW2xpbmVuby0xXQogICAgZWxzZToKICAgICAgICByZXR1cm4gJycKCgojIFRoZSBjYWNoZQoKY2FjaGUgPSB7fSAjIFRoZSBjYWNoZQoKCmRlZiBjbGVhcmNhY2hlKCk6CiAgICAiIiJDbGVhciB0aGUgY2FjaGUgZW50aXJlbHkuIiIiCgogICAgZ2xvYmFsIGNhY2hlCiAgICBjYWNoZSA9IHt9CgoKZGVmIGdldGxpbmVzKGZpbGVuYW1lLCBtb2R1bGVfZ2xvYmFscz1Ob25lKToKICAgICIiIkdldCB0aGUgbGluZXMgZm9yIGEgZmlsZSBmcm9tIHRoZSBjYWNoZS4KICAgIFVwZGF0ZSB0aGUgY2FjaGUgaWYgaXQgZG9lc24ndCBjb250YWluIGFuIGVudHJ5IGZvciB0aGlzIGZpbGUgYWxyZWFkeS4iIiIKCiAgICBpZiBmaWxlbmFtZSBpbiBjYWNoZToKICAgICAgICByZXR1cm4gY2FjaGVbZmlsZW5hbWVdWzJdCiAgICBlbHNlOgogICAgICAgIHJldHVybiB1cGRhdGVjYWNoZShmaWxlbmFtZSwgbW9kdWxlX2dsb2JhbHMpCgoKZGVmIGNoZWNrY2FjaGUoZmlsZW5hbWU9Tm9uZSk6CiAgICAiIiJEaXNjYXJkIGNhY2hlIGVudHJpZXMgdGhhdCBhcmUgb3V0IG9mIGRhdGUuCiAgICAoVGhpcyBpcyBub3QgY2hlY2tlZCB1cG9uIGVhY2ggY2FsbCEpIiIiCgogICAgaWYgZmlsZW5hbWUgaXMgTm9uZToKICAgICAgICBmaWxlbmFtZXMgPSBsaXN0KGNhY2hlLmtleXMoKSkKICAgIGVsc2U6CiAgICAgICAgaWYgZmlsZW5hbWUgaW4gY2FjaGU6CiAgICAgICAgICAgIGZpbGVuYW1lcyA9IFtmaWxlbmFtZV0KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4KCiAgICBmb3IgZmlsZW5hbWUgaW4gZmlsZW5hbWVzOgogICAgICAgIHNpemUsIG10aW1lLCBsaW5lcywgZnVsbG5hbWUgPSBjYWNoZVtmaWxlbmFtZV0KICAgICAgICBpZiBtdGltZSBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZSAgICMgbm8tb3AgZm9yIGZpbGVzIGxvYWRlZCB2aWEgYSBfX2xvYWRlcl9fCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzdGF0ID0gb3Muc3RhdChmdWxsbmFtZSkKICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICNleGNlcHQgb3MuZXJyb3I6CiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBkZWwgY2FjaGVbZmlsZW5hbWVdCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgaWYgc2l6ZSAhPSBzdGF0LnN0X3NpemUgb3IgbXRpbWUgIT0gc3RhdC5zdF9tdGltZToKICAgICAgICAgICAgZGVsIGNhY2hlW2ZpbGVuYW1lXQoKCmRlZiB1cGRhdGVjYWNoZShmaWxlbmFtZSwgbW9kdWxlX2dsb2JhbHM9Tm9uZSk6CiAgICAiIiJVcGRhdGUgYSBjYWNoZSBlbnRyeSBhbmQgcmV0dXJuIGl0cyBsaXN0IG9mIGxpbmVzLgogICAgSWYgc29tZXRoaW5nJ3Mgd3JvbmcsIHByaW50IGEgbWVzc2FnZSwgZGlzY2FyZCB0aGUgY2FjaGUgZW50cnksCiAgICBhbmQgcmV0dXJuIGFuIGVtcHR5IGxpc3QuIiIiCgogICAgaWYgZmlsZW5hbWUgaW4gY2FjaGU6CiAgICAgICAgZGVsIGNhY2hlW2ZpbGVuYW1lXQogICAgaWYgbm90IGZpbGVuYW1lIG9yIChmaWxlbmFtZS5zdGFydHN3aXRoKCc8JykgYW5kIGZpbGVuYW1lLmVuZHN3aXRoKCc+JykpOgogICAgICAgIHJldHVybiBbXQoKICAgIGZ1bGxuYW1lID0gZmlsZW5hbWUKICAgIHRyeToKICAgICAgICBzdGF0ID0gb3Muc3RhdChmdWxsbmFtZSkKICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgIGJhc2VuYW1lID0gZmlsZW5hbWUKCiAgICAgICAgIyBUcnkgZm9yIGEgX19sb2FkZXJfXywgaWYgYXZhaWxhYmxlCiAgICAgICAgaWYgbW9kdWxlX2dsb2JhbHMgYW5kICdfX2xvYWRlcl9fJyBpbiBtb2R1bGVfZ2xvYmFsczoKICAgICAgICAgICAgbmFtZSA9IG1vZHVsZV9nbG9iYWxzLmdldCgnX19uYW1lX18nKQogICAgICAgICAgICBsb2FkZXIgPSBtb2R1bGVfZ2xvYmFsc1snX19sb2FkZXJfXyddCiAgICAgICAgICAgIGdldF9zb3VyY2UgPSBnZXRhdHRyKGxvYWRlciwgJ2dldF9zb3VyY2UnLCBOb25lKQoKICAgICAgICAgICAgaWYgbmFtZSBhbmQgZ2V0X3NvdXJjZToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBkYXRhID0gZ2V0X3NvdXJjZShuYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0IChJbXBvcnRFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBkYXRhIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICMgTm8gbHVjaywgdGhlIFBFUDMwMiBsb2FkZXIgY2Fubm90IGZpbmQgdGhlIHNvdXJjZQogICAgICAgICAgICAgICAgICAgICAgICAjIGZvciB0aGlzIG1vZHVsZS4KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdCiAgICAgICAgICAgICAgICAgICAgY2FjaGVbZmlsZW5hbWVdID0gKAogICAgICAgICAgICAgICAgICAgICAgICBsZW4oZGF0YSksIE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgIFtsaW5lKydcbicgZm9yIGxpbmUgaW4gZGF0YS5zcGxpdGxpbmVzKCldLCBmdWxsbmFtZQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVbZmlsZW5hbWVdWzJdCgogICAgICAgICMgVHJ5IGxvb2tpbmcgdGhyb3VnaCB0aGUgbW9kdWxlIHNlYXJjaCBwYXRoLCB3aGljaCBpcyBvbmx5IHVzZWZ1bAogICAgICAgICMgd2hlbiBoYW5kbGluZyBhIHJlbGF0aXZlIGZpbGVuYW1lLgogICAgICAgIGlmIG9zLnBhdGguaXNhYnMoZmlsZW5hbWUpOgogICAgICAgICAgICByZXR1cm4gW10KCiAgICAgICAgIyBUYWtlIGNhcmUgdG8gaGFuZGxlIHBhY2thZ2VzLgogICAgICAgIGlmIGJhc2VuYW1lID09ICdfX2luaXRfXy5weSc6CiAgICAgICAgICAgICMgZmlsZW5hbWUgcmVmZXJlcyB0byBhIHBhY2thZ2UKICAgICAgICAgICAgYmFzZW5hbWUgPSBmaWxlbmFtZQoKICAgICAgICBmb3IgZGlybmFtZSBpbiBzeXMucGF0aDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZnVsbG5hbWUgPSBvcy5wYXRoLmpvaW4oZGlybmFtZSwgYmFzZW5hbWUpCiAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBBdHRyaWJ1dGVFcnJvcik6CiAgICAgICAgICAgICAgICAjIE5vdCBzdWZmaWNpZW50bHkgc3RyaW5nLWxpa2UgdG8gZG8gYW55dGhpbmcgdXNlZnVsIHdpdGguCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzdGF0ID0gb3Muc3RhdChmdWxsbmFtZSkKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICNmaXhtZSBicnl0aG9uLCBpbnZhbGlkIHN5bnRheCAKICAgICAgICAgICAgI2V4Y2VwdCBvcy5lcnJvcjoKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICNmaXhtZSBicnl0aG9uIHVuZXhwZWN0ZWQgdG9rZW4gZWxzZQogICAgICAgICNlbHNlOgogICAgICAgICMgICAgcmV0dXJuIFtdCiAgICB0cnk6CiAgICAgICAgZnA9b3BlbihmdWxsbmFtZSkKICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICN3aXRoIHRva2VuaXplLm9wZW4oZnVsbG5hbWUpIGFzIGZwOgogICAgICAgIGxpbmVzID0gZnAucmVhZGxpbmVzKCkKICAgICAgICBmcC5jbG9zZSgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICByZXR1cm4gW10KICAgIGlmIGxpbmVzIGFuZCBub3QgbGluZXNbLTFdLmVuZHN3aXRoKCdcbicpOgogICAgICAgIGxpbmVzWy0xXSArPSAnXG4nCiAgICBzaXplLCBtdGltZSA9IHN0YXQuc3Rfc2l6ZSwgc3RhdC5zdF9tdGltZQogICAgY2FjaGVbZmlsZW5hbWVdID0gc2l6ZSwgbXRpbWUsIGxpbmVzLCBmdWxsbmFtZQogICAgcmV0dXJuIGxpbmVzCg==',
'/Lib/_abcoll.py':'IyBDb3B5cmlnaHQgMjAwNyBHb29nbGUsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KIyBMaWNlbnNlZCB0byBQU0YgdW5kZXIgYSBDb250cmlidXRvciBBZ3JlZW1lbnQuCgoiIiJBYnN0cmFjdCBCYXNlIENsYXNzZXMgKEFCQ3MpIGZvciBjb2xsZWN0aW9ucywgYWNjb3JkaW5nIHRvIFBFUCAzMTE5LgoKRE9OJ1QgVVNFIFRISVMgTU9EVUxFIERJUkVDVExZISAgVGhlIGNsYXNzZXMgaGVyZSBzaG91bGQgYmUgaW1wb3J0ZWQKdmlhIGNvbGxlY3Rpb25zOyB0aGV5IGFyZSBkZWZpbmVkIGhlcmUgb25seSB0byBhbGxldmlhdGUgY2VydGFpbgpib290c3RyYXBwaW5nIGlzc3Vlcy4gIFVuaXQgdGVzdHMgYXJlIGluIHRlc3RfY29sbGVjdGlvbnMuCiIiIgoKI2Zyb20gYWJjIGltcG9ydCBBQkNNZXRhLCBhYnN0cmFjdG1ldGhvZAppbXBvcnQgc3lzCgpfX2FsbF9fID0gWyJIYXNoYWJsZSIsICJJdGVyYWJsZSIsICJJdGVyYXRvciIsCiAgICAgICAgICAgIlNpemVkIiwgIkNvbnRhaW5lciIsICJDYWxsYWJsZSIsCiAgICAgICAgICAgIlNldCIsICJNdXRhYmxlU2V0IiwKICAgICAgICAgICAiTWFwcGluZyIsICJNdXRhYmxlTWFwcGluZyIsCiAgICAgICAgICAgIk1hcHBpbmdWaWV3IiwgIktleXNWaWV3IiwgIkl0ZW1zVmlldyIsICJWYWx1ZXNWaWV3IiwKICAgICAgICAgICAiU2VxdWVuY2UiLCAiTXV0YWJsZVNlcXVlbmNlIiwKICAgICAgICAgICAiQnl0ZVN0cmluZyIsCiAgICAgICAgICAgXQoKIiIiCiMjIyBjb2xsZWN0aW9uIHJlbGF0ZWQgdHlwZXMgd2hpY2ggYXJlIG5vdCBleHBvc2VkIHRocm91Z2ggYnVpbHRpbiAjIyMKIyMgaXRlcmF0b3JzICMjCiNmaXhtZSBicnl0aG9uCiNieXRlc19pdGVyYXRvciA9IHR5cGUoaXRlcihiJycpKQpieXRlc19pdGVyYXRvciA9IHR5cGUoaXRlcignJykpCiNmaXhtZSBicnl0aG9uCiNieXRlYXJyYXlfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoYnl0ZWFycmF5KCkpKQojY2FsbGFibGVfaXRlcmF0b3IgPSA/Pz8KZGljdF9rZXlpdGVyYXRvciA9IHR5cGUoaXRlcih7fS5rZXlzKCkpKQpkaWN0X3ZhbHVlaXRlcmF0b3IgPSB0eXBlKGl0ZXIoe30udmFsdWVzKCkpKQpkaWN0X2l0ZW1pdGVyYXRvciA9IHR5cGUoaXRlcih7fS5pdGVtcygpKSkKbGlzdF9pdGVyYXRvciA9IHR5cGUoaXRlcihbXSkpCmxpc3RfcmV2ZXJzZWl0ZXJhdG9yID0gdHlwZShpdGVyKHJldmVyc2VkKFtdKSkpCnJhbmdlX2l0ZXJhdG9yID0gdHlwZShpdGVyKHJhbmdlKDApKSkKc2V0X2l0ZXJhdG9yID0gdHlwZShpdGVyKHNldCgpKSkKc3RyX2l0ZXJhdG9yID0gdHlwZShpdGVyKCIiKSkKdHVwbGVfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoKCkpKQp6aXBfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoemlwKCkpKQojIyB2aWV3cyAjIwpkaWN0X2tleXMgPSB0eXBlKHt9LmtleXMoKSkKZGljdF92YWx1ZXMgPSB0eXBlKHt9LnZhbHVlcygpKQpkaWN0X2l0ZW1zID0gdHlwZSh7fS5pdGVtcygpKQojIyBtaXNjICMjCmRpY3RfcHJveHkgPSB0eXBlKHR5cGUuX19kaWN0X18pCiIiIgoKZGVmIGFic3RyYWN0bWV0aG9kKHNlbGYpOgogICAgcmV0dXJuIHNlbGYKCiMjIyBPTkUtVFJJQ0sgUE9OSUVTICMjIwoKCiNjbGFzcyBJdGVyYWJsZShtZXRhY2xhc3M9QUJDTWV0YSk6CmNsYXNzIEl0ZXJhYmxlOgoKICAgIEBhYnN0cmFjdG1ldGhvZAogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHdoaWxlIEZhbHNlOgogICAgICAgICAgICB5aWVsZCBOb25lCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX19zdWJjbGFzc2hvb2tfXyhjbHMsIEMpOgogICAgICAgIGlmIGNscyBpcyBJdGVyYWJsZToKICAgICAgICAgICAgaWYgYW55KCJfX2l0ZXJfXyIgaW4gQi5fX2RpY3RfXyBmb3IgQiBpbiBDLl9fbXJvX18pOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCgojY2xhc3MgU2l6ZWQobWV0YWNsYXNzPUFCQ01ldGEpOgpjbGFzcyBTaXplZDoKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiAwCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX19zdWJjbGFzc2hvb2tfXyhjbHMsIEMpOgogICAgICAgIGlmIGNscyBpcyBTaXplZDoKICAgICAgICAgICAgaWYgYW55KCJfX2xlbl9fIiBpbiBCLl9fZGljdF9fIGZvciBCIGluIEMuX19tcm9fXyk6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKCiNjbGFzcyBDb250YWluZXIobWV0YWNsYXNzPUFCQ01ldGEpOgpjbGFzcyBDb250YWluZXI6CgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIHgpOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIF9fc3ViY2xhc3Nob29rX18oY2xzLCBDKToKICAgICAgICBpZiBjbHMgaXMgQ29udGFpbmVyOgogICAgICAgICAgICBpZiBhbnkoIl9fY29udGFpbnNfXyIgaW4gQi5fX2RpY3RfXyBmb3IgQiBpbiBDLl9fbXJvX18pOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiMjIyBNQVBQSU5HUyAjIyMKCgpjbGFzcyBNYXBwaW5nKFNpemVkLCBJdGVyYWJsZSwgQ29udGFpbmVyKToKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIHJhaXNlIEtleUVycm9yCgogICAgZGVmIGdldChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZltrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICByZXR1cm4gZGVmYXVsdAoKICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwga2V5KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGZba2V5XQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYga2V5cyhzZWxmKToKICAgICAgICByZXR1cm4gS2V5c1ZpZXcoc2VsZikKCiAgICBkZWYgaXRlbXMoc2VsZik6CiAgICAgICAgcmV0dXJuIEl0ZW1zVmlldyhzZWxmKQoKICAgIGRlZiB2YWx1ZXMoc2VsZik6CiAgICAgICAgcmV0dXJuIFZhbHVlc1ZpZXcoc2VsZikKCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgTWFwcGluZyk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJldHVybiBkaWN0KHNlbGYuaXRlbXMoKSkgPT0gZGljdChvdGhlci5pdGVtcygpKQoKICAgIGRlZiBfX25lX18oc2VsZiwgb3RoZXIpOgogICAgICAgIHJldHVybiBub3QgKHNlbGYgPT0gb3RoZXIpCgoKY2xhc3MgTXV0YWJsZU1hcHBpbmcoTWFwcGluZyk6CgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWx1ZSk6CiAgICAgICAgcmFpc2UgS2V5RXJyb3IKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIHJhaXNlIEtleUVycm9yCgogICAgX19tYXJrZXIgPSBvYmplY3QoKQoKICAgIGRlZiBwb3Aoc2VsZiwga2V5LCBkZWZhdWx0PV9fbWFya2VyKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHZhbHVlID0gc2VsZltrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBpZiBkZWZhdWx0IGlzIHNlbGYuX19tYXJrZXI6CiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlbCBzZWxmW2tleV0KICAgICAgICAgICAgcmV0dXJuIHZhbHVlCgogICAgZGVmIHBvcGl0ZW0oc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBrZXkgPSBuZXh0KGl0ZXIoc2VsZikpCiAgICAgICAgZXhjZXB0IFN0b3BJdGVyYXRpb246CiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yCiAgICAgICAgdmFsdWUgPSBzZWxmW2tleV0KICAgICAgICBkZWwgc2VsZltrZXldCiAgICAgICAgcmV0dXJuIGtleSwgdmFsdWUKCiAgICBkZWYgY2xlYXIoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgc2VsZi5wb3BpdGVtKCkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHBhc3MKCiAgICBkZWYgdXBkYXRlKCphcmdzLCAqKmt3ZHMpOgogICAgICAgIGlmIGxlbihhcmdzKSA+IDI6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidXBkYXRlKCkgdGFrZXMgYXQgbW9zdCAyIHBvc2l0aW9uYWwgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyZ3VtZW50cyAoe30gZ2l2ZW4pIi5mb3JtYXQobGVuKGFyZ3MpKSkKICAgICAgICBlbGlmIG5vdCBhcmdzOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInVwZGF0ZSgpIHRha2VzIGF0IGxlYXN0IDEgYXJndW1lbnQgKDAgZ2l2ZW4pIikKICAgICAgICBzZWxmID0gYXJnc1swXQogICAgICAgIG90aGVyID0gYXJnc1sxXSBpZiBsZW4oYXJncykgPj0gMiBlbHNlICgpCgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIE1hcHBpbmcpOgogICAgICAgICAgICBmb3Iga2V5IGluIG90aGVyOgogICAgICAgICAgICAgICAgc2VsZltrZXldID0gb3RoZXJba2V5XQogICAgICAgIGVsaWYgaGFzYXR0cihvdGhlciwgImtleXMiKToKICAgICAgICAgICAgZm9yIGtleSBpbiBvdGhlci5rZXlzKCk6CiAgICAgICAgICAgICAgICBzZWxmW2tleV0gPSBvdGhlcltrZXldCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gb3RoZXI6CiAgICAgICAgICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGt3ZHMuaXRlbXMoKToKICAgICAgICAgICAgc2VsZltrZXldID0gdmFsdWUKCiAgICBkZWYgc2V0ZGVmYXVsdChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZltrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBzZWxmW2tleV0gPSBkZWZhdWx0CiAgICAgICAgcmV0dXJuIGRlZmF1bHQKCiNNdXRhYmxlTWFwcGluZy5yZWdpc3RlcihkaWN0KQo=',
'/Lib/copy.py':'IiIiR2VuZXJpYyAoc2hhbGxvdyBhbmQgZGVlcCkgY29weWluZyBvcGVyYXRpb25zLgoKSW50ZXJmYWNlIHN1bW1hcnk6CgogICAgICAgIGltcG9ydCBjb3B5CgogICAgICAgIHggPSBjb3B5LmNvcHkoeSkgICAgICAgICMgbWFrZSBhIHNoYWxsb3cgY29weSBvZiB5CiAgICAgICAgeCA9IGNvcHkuZGVlcGNvcHkoeSkgICAgIyBtYWtlIGEgZGVlcCBjb3B5IG9mIHkKCkZvciBtb2R1bGUgc3BlY2lmaWMgZXJyb3JzLCBjb3B5LkVycm9yIGlzIHJhaXNlZC4KClRoZSBkaWZmZXJlbmNlIGJldHdlZW4gc2hhbGxvdyBhbmQgZGVlcCBjb3B5aW5nIGlzIG9ubHkgcmVsZXZhbnQgZm9yCmNvbXBvdW5kIG9iamVjdHMgKG9iamVjdHMgdGhhdCBjb250YWluIG90aGVyIG9iamVjdHMsIGxpa2UgbGlzdHMgb3IKY2xhc3MgaW5zdGFuY2VzKS4KCi0gQSBzaGFsbG93IGNvcHkgY29uc3RydWN0cyBhIG5ldyBjb21wb3VuZCBvYmplY3QgYW5kIHRoZW4gKHRvIHRoZQogIGV4dGVudCBwb3NzaWJsZSkgaW5zZXJ0cyAqdGhlIHNhbWUgb2JqZWN0cyogaW50byBpdCB0aGF0IHRoZQogIG9yaWdpbmFsIGNvbnRhaW5zLgoKLSBBIGRlZXAgY29weSBjb25zdHJ1Y3RzIGEgbmV3IGNvbXBvdW5kIG9iamVjdCBhbmQgdGhlbiwgcmVjdXJzaXZlbHksCiAgaW5zZXJ0cyAqY29waWVzKiBpbnRvIGl0IG9mIHRoZSBvYmplY3RzIGZvdW5kIGluIHRoZSBvcmlnaW5hbC4KClR3byBwcm9ibGVtcyBvZnRlbiBleGlzdCB3aXRoIGRlZXAgY29weSBvcGVyYXRpb25zIHRoYXQgZG9uJ3QgZXhpc3QKd2l0aCBzaGFsbG93IGNvcHkgb3BlcmF0aW9uczoKCiBhKSByZWN1cnNpdmUgb2JqZWN0cyAoY29tcG91bmQgb2JqZWN0cyB0aGF0LCBkaXJlY3RseSBvciBpbmRpcmVjdGx5LAogICAgY29udGFpbiBhIHJlZmVyZW5jZSB0byB0aGVtc2VsdmVzKSBtYXkgY2F1c2UgYSByZWN1cnNpdmUgbG9vcAoKIGIpIGJlY2F1c2UgZGVlcCBjb3B5IGNvcGllcyAqZXZlcnl0aGluZyogaXQgbWF5IGNvcHkgdG9vIG11Y2gsIGUuZy4KICAgIGFkbWluaXN0cmF0aXZlIGRhdGEgc3RydWN0dXJlcyB0aGF0IHNob3VsZCBiZSBzaGFyZWQgZXZlbiBiZXR3ZWVuCiAgICBjb3BpZXMKClB5dGhvbidzIGRlZXAgY29weSBvcGVyYXRpb24gYXZvaWRzIHRoZXNlIHByb2JsZW1zIGJ5OgoKIGEpIGtlZXBpbmcgYSB0YWJsZSBvZiBvYmplY3RzIGFscmVhZHkgY29waWVkIGR1cmluZyB0aGUgY3VycmVudAogICAgY29weWluZyBwYXNzCgogYikgbGV0dGluZyB1c2VyLWRlZmluZWQgY2xhc3NlcyBvdmVycmlkZSB0aGUgY29weWluZyBvcGVyYXRpb24gb3IgdGhlCiAgICBzZXQgb2YgY29tcG9uZW50cyBjb3BpZWQKClRoaXMgdmVyc2lvbiBkb2VzIG5vdCBjb3B5IHR5cGVzIGxpa2UgbW9kdWxlLCBjbGFzcywgZnVuY3Rpb24sIG1ldGhvZCwKbm9yIHN0YWNrIHRyYWNlLCBzdGFjayBmcmFtZSwgbm9yIGZpbGUsIHNvY2tldCwgd2luZG93LCBub3IgYXJyYXksIG5vcgphbnkgc2ltaWxhciB0eXBlcy4KCkNsYXNzZXMgY2FuIHVzZSB0aGUgc2FtZSBpbnRlcmZhY2VzIHRvIGNvbnRyb2wgY29weWluZyB0aGF0IHRoZXkgdXNlCnRvIGNvbnRyb2wgcGlja2xpbmc6IHRoZXkgY2FuIGRlZmluZSBtZXRob2RzIGNhbGxlZCBfX2dldGluaXRhcmdzX18oKSwKX19nZXRzdGF0ZV9fKCkgYW5kIF9fc2V0c3RhdGVfXygpLiAgU2VlIHRoZSBkb2N1bWVudGF0aW9uIGZvciBtb2R1bGUKInBpY2tsZSIgZm9yIGluZm9ybWF0aW9uIG9uIHRoZXNlIG1ldGhvZHMuCiIiIgoKaW1wb3J0IHR5cGVzCmltcG9ydCB3ZWFrcmVmCiMgQkUsIGNvcHlyZWcgaXMgZm9yIEMgY2xhc3NlcywgZXRjLCBzbyBtYXliZSBub3QgbmVlZCBpdCBmb3IgYnJ5dGhvbgojZnJvbSBjb3B5cmVnIGltcG9ydCBkaXNwYXRjaF90YWJsZQpkaXNwYXRjaF90YWJsZT17fQppbXBvcnQgYnVpbHRpbnMKCmNsYXNzIEVycm9yKEV4Y2VwdGlvbik6CiAgICBwYXNzCmVycm9yID0gRXJyb3IgICAjIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkKCiN0cnk6CiMgICAgZnJvbSBvcmcucHl0aG9uLmNvcmUgaW1wb3J0IFB5U3RyaW5nTWFwCiNleGNlcHQgSW1wb3J0RXJyb3I6CiMgICAgUHlTdHJpbmdNYXAgPSBOb25lClB5U3RyaW5nTWFwID0gTm9uZQoKX19hbGxfXyA9IFsiRXJyb3IiLCAiY29weSIsICJkZWVwY29weSJdCgpkZWYgY29weSh4KToKICAgICIiIlNoYWxsb3cgY29weSBvcGVyYXRpb24gb24gYXJiaXRyYXJ5IFB5dGhvbiBvYmplY3RzLgoKICAgIFNlZSB0aGUgbW9kdWxlJ3MgX19kb2NfXyBzdHJpbmcgZm9yIG1vcmUgaW5mby4KICAgICIiIgoKICAgIGNscyA9IHR5cGUoeCkKCiAgICBjb3BpZXIgPSBfY29weV9kaXNwYXRjaC5nZXQoY2xzKQogICAgaWYgY29waWVyOgogICAgICAgIHJldHVybiBjb3BpZXIoeCkKCiAgICBjb3BpZXIgPSBnZXRhdHRyKGNscywgIl9fY29weV9fIiwgTm9uZSkKICAgIGlmIGNvcGllcjoKICAgICAgICByZXR1cm4gY29waWVyKHgpCgogICAgcmVkdWN0b3IgPSBkaXNwYXRjaF90YWJsZS5nZXQoY2xzKQogICAgaWYgcmVkdWN0b3I6CiAgICAgICAgcnYgPSByZWR1Y3Rvcih4KQogICAgZWxzZToKICAgICAgICByZWR1Y3RvciA9IGdldGF0dHIoeCwgIl9fcmVkdWNlX2V4X18iLCBOb25lKQogICAgICAgIGlmIHJlZHVjdG9yOgogICAgICAgICAgICBydiA9IHJlZHVjdG9yKDIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVkdWN0b3IgPSBnZXRhdHRyKHgsICJfX3JlZHVjZV9fIiwgTm9uZSkKICAgICAgICAgICAgaWYgcmVkdWN0b3I6CiAgICAgICAgICAgICAgICBydiA9IHJlZHVjdG9yKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlIEVycm9yKCJ1bihzaGFsbG93KWNvcHlhYmxlIG9iamVjdCBvZiB0eXBlICVzIiAlIGNscykKCiAgICByZXR1cm4gX3JlY29uc3RydWN0KHgsIHJ2LCAwKQoKCl9jb3B5X2Rpc3BhdGNoID0gZCA9IHt9CgpkZWYgX2NvcHlfaW1tdXRhYmxlKHgpOgogICAgcmV0dXJuIHgKZm9yIHQgaW4gKHR5cGUoTm9uZSksIGludCwgZmxvYXQsIGJvb2wsIHN0ciwgdHVwbGUsCiAgICAgICAgICBmcm96ZW5zZXQsIHR5cGUsIHJhbmdlLAogICAgICAgICAgdHlwZXMuQnVpbHRpbkZ1bmN0aW9uVHlwZSwgdHlwZShFbGxpcHNpcyksCiAgICAgICAgICB0eXBlcy5GdW5jdGlvblR5cGUsIHdlYWtyZWYucmVmKToKICAgIGRbdF0gPSBfY29weV9pbW11dGFibGUKdCA9IGdldGF0dHIodHlwZXMsICJDb2RlVHlwZSIsIE5vbmUpCmlmIHQgaXMgbm90IE5vbmU6CiAgICBkW3RdID0gX2NvcHlfaW1tdXRhYmxlCmZvciBuYW1lIGluICgiY29tcGxleCIsICJ1bmljb2RlIik6CiAgICB0ID0gZ2V0YXR0cihidWlsdGlucywgbmFtZSwgTm9uZSkKICAgIGlmIHQgaXMgbm90IE5vbmU6CiAgICAgICAgZFt0XSA9IF9jb3B5X2ltbXV0YWJsZQoKZGVmIF9jb3B5X3dpdGhfY29uc3RydWN0b3IoeCk6CiAgICByZXR1cm4gdHlwZSh4KSh4KQpmb3IgdCBpbiAobGlzdCwgZGljdCwgc2V0KToKICAgIGRbdF0gPSBfY29weV93aXRoX2NvbnN0cnVjdG9yCgpkZWYgX2NvcHlfd2l0aF9jb3B5X21ldGhvZCh4KToKICAgIHJldHVybiB4LmNvcHkoKQppZiBQeVN0cmluZ01hcCBpcyBub3QgTm9uZToKICAgIGRbUHlTdHJpbmdNYXBdID0gX2NvcHlfd2l0aF9jb3B5X21ldGhvZAoKZGVsIGQKCmRlZiBkZWVwY29weSh4LCBtZW1vPU5vbmUsIF9uaWw9W10pOgogICAgIiIiRGVlcCBjb3B5IG9wZXJhdGlvbiBvbiBhcmJpdHJhcnkgUHl0aG9uIG9iamVjdHMuCgogICAgU2VlIHRoZSBtb2R1bGUncyBfX2RvY19fIHN0cmluZyBmb3IgbW9yZSBpbmZvLgogICAgIiIiCgogICAgaWYgbWVtbyBpcyBOb25lOgogICAgICAgIG1lbW8gPSB7fQoKICAgIGQgPSBpZCh4KQogICAgeSA9IG1lbW8uZ2V0KGQsIF9uaWwpCiAgICBpZiB5IGlzIG5vdCBfbmlsOgogICAgICAgIHJldHVybiB5CgogICAgY2xzID0gdHlwZSh4KQoKICAgIGNvcGllciA9IF9kZWVwY29weV9kaXNwYXRjaC5nZXQoY2xzKQogICAgaWYgY29waWVyOgogICAgICAgIHkgPSBjb3BpZXIoeCwgbWVtbykKICAgIGVsc2U6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpc3NjID0gaXNzdWJjbGFzcyhjbHMsIHR5cGUpCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjogIyBjbHMgaXMgbm90IGEgY2xhc3MgKG9sZCBCb29zdDsgc2VlIFNGICM1MDIwODUpCiAgICAgICAgICAgIGlzc2MgPSAwCiAgICAgICAgaWYgaXNzYzoKICAgICAgICAgICAgeSA9IF9kZWVwY29weV9hdG9taWMoeCwgbWVtbykKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb3BpZXIgPSBnZXRhdHRyKHgsICJfX2RlZXBjb3B5X18iLCBOb25lKQogICAgICAgICAgICBpZiBjb3BpZXI6CiAgICAgICAgICAgICAgICB5ID0gY29waWVyKG1lbW8pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZWR1Y3RvciA9IGRpc3BhdGNoX3RhYmxlLmdldChjbHMpCiAgICAgICAgICAgICAgICBpZiByZWR1Y3RvcjoKICAgICAgICAgICAgICAgICAgICBydiA9IHJlZHVjdG9yKHgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJlZHVjdG9yID0gZ2V0YXR0cih4LCAiX19yZWR1Y2VfZXhfXyIsIE5vbmUpCiAgICAgICAgICAgICAgICAgICAgaWYgcmVkdWN0b3I6CiAgICAgICAgICAgICAgICAgICAgICAgIHJ2ID0gcmVkdWN0b3IoMikKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICByZWR1Y3RvciA9IGdldGF0dHIoeCwgIl9fcmVkdWNlX18iLCBOb25lKQogICAgICAgICAgICAgICAgICAgICAgICBpZiByZWR1Y3RvcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ2ID0gcmVkdWN0b3IoKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInVuKGRlZXApY29weWFibGUgb2JqZWN0IG9mIHR5cGUgJXMiICUgY2xzKQogICAgICAgICAgICAgICAgeSA9IF9yZWNvbnN0cnVjdCh4LCBydiwgMSwgbWVtbykKCiAgICAjIElmIGlzIGl0cyBvd24gY29weSwgZG9uJ3QgbWVtb2l6ZS4KICAgIGlmIHkgaXMgbm90IHg6CiAgICAgICAgbWVtb1tkXSA9IHkKICAgICAgICBfa2VlcF9hbGl2ZSh4LCBtZW1vKSAjIE1ha2Ugc3VyZSB4IGxpdmVzIGF0IGxlYXN0IGFzIGxvbmcgYXMgZAogICAgcmV0dXJuIHkKCl9kZWVwY29weV9kaXNwYXRjaCA9IGQgPSB7fQoKZGVmIF9kZWVwY29weV9hdG9taWMoeCwgbWVtbyk6CiAgICByZXR1cm4geApkW3R5cGUoTm9uZSldID0gX2RlZXBjb3B5X2F0b21pYwpkW3R5cGUoRWxsaXBzaXMpXSA9IF9kZWVwY29weV9hdG9taWMKZFtpbnRdID0gX2RlZXBjb3B5X2F0b21pYwpkW2Zsb2F0XSA9IF9kZWVwY29weV9hdG9taWMKZFtib29sXSA9IF9kZWVwY29weV9hdG9taWMKdHJ5OgogICAgZFtjb21wbGV4XSA9IF9kZWVwY29weV9hdG9taWMKZXhjZXB0IE5hbWVFcnJvcjoKICAgIHBhc3MKZFtieXRlc10gPSBfZGVlcGNvcHlfYXRvbWljCmRbc3RyXSA9IF9kZWVwY29weV9hdG9taWMKdHJ5OgogICAgZFt0eXBlcy5Db2RlVHlwZV0gPSBfZGVlcGNvcHlfYXRvbWljCmV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgIHBhc3MKZFt0eXBlXSA9IF9kZWVwY29weV9hdG9taWMKZFtyYW5nZV0gPSBfZGVlcGNvcHlfYXRvbWljCmRbdHlwZXMuQnVpbHRpbkZ1bmN0aW9uVHlwZV0gPSBfZGVlcGNvcHlfYXRvbWljCmRbdHlwZXMuRnVuY3Rpb25UeXBlXSA9IF9kZWVwY29weV9hdG9taWMKZFt3ZWFrcmVmLnJlZl0gPSBfZGVlcGNvcHlfYXRvbWljCgpkZWYgX2RlZXBjb3B5X2xpc3QoeCwgbWVtbyk6CiAgICB5ID0gW10KICAgIG1lbW9baWQoeCldID0geQogICAgZm9yIGEgaW4geDoKICAgICAgICB5LmFwcGVuZChkZWVwY29weShhLCBtZW1vKSkKICAgIHJldHVybiB5CmRbbGlzdF0gPSBfZGVlcGNvcHlfbGlzdAoKZGVmIF9kZWVwY29weV90dXBsZSh4LCBtZW1vKToKICAgIHkgPSBbXQogICAgZm9yIGEgaW4geDoKICAgICAgICB5LmFwcGVuZChkZWVwY29weShhLCBtZW1vKSkKICAgICMgV2UncmUgbm90IGdvaW5nIHRvIHB1dCB0aGUgdHVwbGUgaW4gdGhlIG1lbW8sIGJ1dCBpdCdzIHN0aWxsIGltcG9ydGFudCB3ZQogICAgIyBjaGVjayBmb3IgaXQsIGluIGNhc2UgdGhlIHR1cGxlIGNvbnRhaW5zIHJlY3Vyc2l2ZSBtdXRhYmxlIHN0cnVjdHVyZXMuCiAgICB0cnk6CiAgICAgICAgcmV0dXJuIG1lbW9baWQoeCldCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgcGFzcwogICAgZm9yIGkgaW4gcmFuZ2UobGVuKHgpKToKICAgICAgICBpZiB4W2ldIGlzIG5vdCB5W2ldOgogICAgICAgICAgICB5ID0gdHVwbGUoeSkKICAgICAgICAgICAgYnJlYWsKICAgIGVsc2U6CiAgICAgICAgeSA9IHgKICAgIHJldHVybiB5CmRbdHVwbGVdID0gX2RlZXBjb3B5X3R1cGxlCgpkZWYgX2RlZXBjb3B5X2RpY3QoeCwgbWVtbyk6CiAgICB5ID0ge30KICAgIG1lbW9baWQoeCldID0geQogICAgZm9yIGtleSwgdmFsdWUgaW4geC5pdGVtcygpOgogICAgICAgIHlbZGVlcGNvcHkoa2V5LCBtZW1vKV0gPSBkZWVwY29weSh2YWx1ZSwgbWVtbykKICAgIHJldHVybiB5CmRbZGljdF0gPSBfZGVlcGNvcHlfZGljdAppZiBQeVN0cmluZ01hcCBpcyBub3QgTm9uZToKICAgIGRbUHlTdHJpbmdNYXBdID0gX2RlZXBjb3B5X2RpY3QKCmRlZiBfZGVlcGNvcHlfbWV0aG9kKHgsIG1lbW8pOiAjIENvcHkgaW5zdGFuY2UgbWV0aG9kcwogICAgcmV0dXJuIHR5cGUoeCkoeC5fX2Z1bmNfXywgZGVlcGNvcHkoeC5fX3NlbGZfXywgbWVtbykpCl9kZWVwY29weV9kaXNwYXRjaFt0eXBlcy5NZXRob2RUeXBlXSA9IF9kZWVwY29weV9tZXRob2QKCmRlZiBfa2VlcF9hbGl2ZSh4LCBtZW1vKToKICAgICIiIktlZXBzIGEgcmVmZXJlbmNlIHRvIHRoZSBvYmplY3QgeCBpbiB0aGUgbWVtby4KCiAgICBCZWNhdXNlIHdlIHJlbWVtYmVyIG9iamVjdHMgYnkgdGhlaXIgaWQsIHdlIGhhdmUKICAgIHRvIGFzc3VyZSB0aGF0IHBvc3NpYmx5IHRlbXBvcmFyeSBvYmplY3RzIGFyZSBrZXB0CiAgICBhbGl2ZSBieSByZWZlcmVuY2luZyB0aGVtLgogICAgV2Ugc3RvcmUgYSByZWZlcmVuY2UgYXQgdGhlIGlkIG9mIHRoZSBtZW1vLCB3aGljaCBzaG91bGQKICAgIG5vcm1hbGx5IG5vdCBiZSB1c2VkIHVubGVzcyBzb21lb25lIHRyaWVzIHRvIGRlZXBjb3B5CiAgICB0aGUgbWVtbyBpdHNlbGYuLi4KICAgICIiIgogICAgdHJ5OgogICAgICAgIG1lbW9baWQobWVtbyldLmFwcGVuZCh4KQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICMgYWhhLCB0aGlzIGlzIHRoZSBmaXJzdCBvbmUgOi0pCiAgICAgICAgbWVtb1tpZChtZW1vKV09W3hdCgpkZWYgX3JlY29uc3RydWN0KHgsIGluZm8sIGRlZXAsIG1lbW89Tm9uZSk6CiAgICBpZiBpc2luc3RhbmNlKGluZm8sIHN0cik6CiAgICAgICAgcmV0dXJuIHgKICAgIGFzc2VydCBpc2luc3RhbmNlKGluZm8sIHR1cGxlKQogICAgaWYgbWVtbyBpcyBOb25lOgogICAgICAgIG1lbW8gPSB7fQogICAgbiA9IGxlbihpbmZvKQogICAgYXNzZXJ0IG4gaW4gKDIsIDMsIDQsIDUpCiAgICBjYWxsYWJsZSwgYXJncyA9IGluZm9bOjJdCiAgICBpZiBuID4gMjoKICAgICAgICBzdGF0ZSA9IGluZm9bMl0KICAgIGVsc2U6CiAgICAgICAgc3RhdGUgPSB7fQogICAgaWYgbiA+IDM6CiAgICAgICAgbGlzdGl0ZXIgPSBpbmZvWzNdCiAgICBlbHNlOgogICAgICAgIGxpc3RpdGVyID0gTm9uZQogICAgaWYgbiA+IDQ6CiAgICAgICAgZGljdGl0ZXIgPSBpbmZvWzRdCiAgICBlbHNlOgogICAgICAgIGRpY3RpdGVyID0gTm9uZQogICAgaWYgZGVlcDoKICAgICAgICBhcmdzID0gZGVlcGNvcHkoYXJncywgbWVtbykKICAgIHkgPSBjYWxsYWJsZSgqYXJncykKICAgIG1lbW9baWQoeCldID0geQoKICAgIGlmIHN0YXRlOgogICAgICAgIGlmIGRlZXA6CiAgICAgICAgICAgIHN0YXRlID0gZGVlcGNvcHkoc3RhdGUsIG1lbW8pCiAgICAgICAgaWYgaGFzYXR0cih5LCAnX19zZXRzdGF0ZV9fJyk6CiAgICAgICAgICAgIHkuX19zZXRzdGF0ZV9fKHN0YXRlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uoc3RhdGUsIHR1cGxlKSBhbmQgbGVuKHN0YXRlKSA9PSAyOgogICAgICAgICAgICAgICAgc3RhdGUsIHNsb3RzdGF0ZSA9IHN0YXRlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzbG90c3RhdGUgPSBOb25lCiAgICAgICAgICAgIGlmIHN0YXRlIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgeS5fX2RpY3RfXy51cGRhdGUoc3RhdGUpCiAgICAgICAgICAgIGlmIHNsb3RzdGF0ZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIHNsb3RzdGF0ZS5pdGVtcygpOgogICAgICAgICAgICAgICAgICAgIHNldGF0dHIoeSwga2V5LCB2YWx1ZSkKCiAgICBpZiBsaXN0aXRlciBpcyBub3QgTm9uZToKICAgICAgICBmb3IgaXRlbSBpbiBsaXN0aXRlcjoKICAgICAgICAgICAgaWYgZGVlcDoKICAgICAgICAgICAgICAgIGl0ZW0gPSBkZWVwY29weShpdGVtLCBtZW1vKQogICAgICAgICAgICB5LmFwcGVuZChpdGVtKQogICAgaWYgZGljdGl0ZXIgaXMgbm90IE5vbmU6CiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZGljdGl0ZXI6CiAgICAgICAgICAgIGlmIGRlZXA6CiAgICAgICAgICAgICAgICBrZXkgPSBkZWVwY29weShrZXksIG1lbW8pCiAgICAgICAgICAgICAgICB2YWx1ZSA9IGRlZXBjb3B5KHZhbHVlLCBtZW1vKQogICAgICAgICAgICB5W2tleV0gPSB2YWx1ZQogICAgcmV0dXJuIHkKCmRlbCBkCgpkZWwgdHlwZXMKCiMgSGVscGVyIGZvciBpbnN0YW5jZSBjcmVhdGlvbiB3aXRob3V0IGNhbGxpbmcgX19pbml0X18KY2xhc3MgX0VtcHR5Q2xhc3M6CiAgICBwYXNzCg==',
'/Lib/keyword.py':'a3dsaXN0ID0gWwojLS1zdGFydCBrZXl3b3Jkcy0tCiAgICAgICAgJ0ZhbHNlJywKICAgICAgICAnTm9uZScsCiAgICAgICAgJ1RydWUnLAogICAgICAgICdhbmQnLAogICAgICAgICdhcycsCiAgICAgICAgJ2Fzc2VydCcsCiAgICAgICAgJ2JyZWFrJywKICAgICAgICAnY2xhc3MnLAogICAgICAgICdjb250aW51ZScsCiAgICAgICAgJ2RlZicsCiAgICAgICAgJ2RlbCcsCiAgICAgICAgJ2VsaWYnLAogICAgICAgICdlbHNlJywKICAgICAgICAnZXhjZXB0JywKICAgICAgICAnZmluYWxseScsCiAgICAgICAgJ2ZvcicsCiAgICAgICAgJ2Zyb20nLAogICAgICAgICdnbG9iYWwnLAogICAgICAgICdpZicsCiAgICAgICAgJ2ltcG9ydCcsCiAgICAgICAgJ2luJywKICAgICAgICAnaXMnLAogICAgICAgICdsYW1iZGEnLAogICAgICAgICdub25sb2NhbCcsCiAgICAgICAgJ25vdCcsCiAgICAgICAgJ29yJywKICAgICAgICAncGFzcycsCiAgICAgICAgJ3JhaXNlJywKICAgICAgICAncmV0dXJuJywKICAgICAgICAndHJ5JywKICAgICAgICAnd2hpbGUnLAogICAgICAgICd3aXRoJywKICAgICAgICAneWllbGQnLAojLS1lbmQga2V5d29yZHMtLQogICAgICAgIF0KCmRlZiBpc2tleXdvcmQod29yZCk6CiAgICByZXR1cm4gd29yZCBpbiBrd2xpc3QK',
'/Lib/stat.py':'IiIiQ29uc3RhbnRzL2Z1bmN0aW9ucyBmb3IgaW50ZXJwcmV0aW5nIHJlc3VsdHMgb2Ygb3Muc3RhdCgpIGFuZCBvcy5sc3RhdCgpLg0KDQpTdWdnZXN0ZWQgdXNhZ2U6IGZyb20gc3RhdCBpbXBvcnQgKg0KIiIiDQoNCiMgSW5kaWNlcyBmb3Igc3RhdCBzdHJ1Y3QgbWVtYmVycyBpbiB0aGUgdHVwbGUgcmV0dXJuZWQgYnkgb3Muc3RhdCgpDQoNClNUX01PREUgID0gMA0KU1RfSU5PICAgPSAxDQpTVF9ERVYgICA9IDINClNUX05MSU5LID0gMw0KU1RfVUlEICAgPSA0DQpTVF9HSUQgICA9IDUNClNUX1NJWkUgID0gNg0KU1RfQVRJTUUgPSA3DQpTVF9NVElNRSA9IDgNClNUX0NUSU1FID0gOQ0KDQojIEV4dHJhY3QgYml0cyBmcm9tIHRoZSBtb2RlDQoNCmRlZiBTX0lNT0RFKG1vZGUpOg0KICAgICIiIlJldHVybiB0aGUgcG9ydGlvbiBvZiB0aGUgZmlsZSdzIG1vZGUgdGhhdCBjYW4gYmUgc2V0IGJ5DQogICAgb3MuY2htb2QoKS4NCiAgICAiIiINCiAgICByZXR1cm4gbW9kZSAmIDBvNzc3Nw0KDQpkZWYgU19JRk1UKG1vZGUpOg0KICAgICIiIlJldHVybiB0aGUgcG9ydGlvbiBvZiB0aGUgZmlsZSdzIG1vZGUgdGhhdCBkZXNjcmliZXMgdGhlDQogICAgZmlsZSB0eXBlLg0KICAgICIiIg0KICAgIHJldHVybiBtb2RlICYgMG8xNzAwMDANCg0KIyBDb25zdGFudHMgdXNlZCBhcyBTX0lGTVQoKSBmb3IgdmFyaW91cyBmaWxlIHR5cGVzDQojIChub3QgYWxsIGFyZSBpbXBsZW1lbnRlZCBvbiBhbGwgc3lzdGVtcykNCg0KU19JRkRJUiAgPSAwbzA0MDAwMCAgIyBkaXJlY3RvcnkNClNfSUZDSFIgID0gMG8wMjAwMDAgICMgY2hhcmFjdGVyIGRldmljZQ0KU19JRkJMSyAgPSAwbzA2MDAwMCAgIyBibG9jayBkZXZpY2UNClNfSUZSRUcgID0gMG8xMDAwMDAgICMgcmVndWxhciBmaWxlDQpTX0lGSUZPICA9IDBvMDEwMDAwICAjIGZpZm8gKG5hbWVkIHBpcGUpDQpTX0lGTE5LICA9IDBvMTIwMDAwICAjIHN5bWJvbGljIGxpbmsNClNfSUZTT0NLID0gMG8xNDAwMDAgICMgc29ja2V0IGZpbGUNCg0KIyBGdW5jdGlvbnMgdG8gdGVzdCBmb3IgZWFjaCBmaWxlIHR5cGUNCg0KZGVmIFNfSVNESVIobW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgZGlyZWN0b3J5LiIiIg0KICAgIHJldHVybiBTX0lGTVQobW9kZSkgPT0gU19JRkRJUg0KDQpkZWYgU19JU0NIUihtb2RlKToNCiAgICAiIiJSZXR1cm4gVHJ1ZSBpZiBtb2RlIGlzIGZyb20gYSBjaGFyYWN0ZXIgc3BlY2lhbCBkZXZpY2UgZmlsZS4iIiINCiAgICByZXR1cm4gU19JRk1UKG1vZGUpID09IFNfSUZDSFINCg0KZGVmIFNfSVNCTEsobW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgYmxvY2sgc3BlY2lhbCBkZXZpY2UgZmlsZS4iIiINCiAgICByZXR1cm4gU19JRk1UKG1vZGUpID09IFNfSUZCTEsNCg0KZGVmIFNfSVNSRUcobW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgcmVndWxhciBmaWxlLiIiIg0KICAgIHJldHVybiBTX0lGTVQobW9kZSkgPT0gU19JRlJFRw0KDQpkZWYgU19JU0ZJRk8obW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgRklGTyAobmFtZWQgcGlwZSkuIiIiDQogICAgcmV0dXJuIFNfSUZNVChtb2RlKSA9PSBTX0lGSUZPDQoNCmRlZiBTX0lTTE5LKG1vZGUpOg0KICAgICIiIlJldHVybiBUcnVlIGlmIG1vZGUgaXMgZnJvbSBhIHN5bWJvbGljIGxpbmsuIiIiDQogICAgcmV0dXJuIFNfSUZNVChtb2RlKSA9PSBTX0lGTE5LDQoNCmRlZiBTX0lTU09DSyhtb2RlKToNCiAgICAiIiJSZXR1cm4gVHJ1ZSBpZiBtb2RlIGlzIGZyb20gYSBzb2NrZXQuIiIiDQogICAgcmV0dXJuIFNfSUZNVChtb2RlKSA9PSBTX0lGU09DSw0KDQojIE5hbWVzIGZvciBwZXJtaXNzaW9uIGJpdHMNCg0KU19JU1VJRCA9IDBvNDAwMCAgIyBzZXQgVUlEIGJpdA0KU19JU0dJRCA9IDBvMjAwMCAgIyBzZXQgR0lEIGJpdA0KU19FTkZNVCA9IFNfSVNHSUQgIyBmaWxlIGxvY2tpbmcgZW5mb3JjZW1lbnQNClNfSVNWVFggPSAwbzEwMDAgICMgc3RpY2t5IGJpdA0KU19JUkVBRCA9IDBvMDQwMCAgIyBVbml4IFY3IHN5bm9ueW0gZm9yIFNfSVJVU1INClNfSVdSSVRFID0gMG8wMjAwICMgVW5peCBWNyBzeW5vbnltIGZvciBTX0lXVVNSDQpTX0lFWEVDID0gMG8wMTAwICAjIFVuaXggVjcgc3lub255bSBmb3IgU19JWFVTUg0KU19JUldYVSA9IDBvMDcwMCAgIyBtYXNrIGZvciBvd25lciBwZXJtaXNzaW9ucw0KU19JUlVTUiA9IDBvMDQwMCAgIyByZWFkIGJ5IG93bmVyDQpTX0lXVVNSID0gMG8wMjAwICAjIHdyaXRlIGJ5IG93bmVyDQpTX0lYVVNSID0gMG8wMTAwICAjIGV4ZWN1dGUgYnkgb3duZXINClNfSVJXWEcgPSAwbzAwNzAgICMgbWFzayBmb3IgZ3JvdXAgcGVybWlzc2lvbnMNClNfSVJHUlAgPSAwbzAwNDAgICMgcmVhZCBieSBncm91cA0KU19JV0dSUCA9IDBvMDAyMCAgIyB3cml0ZSBieSBncm91cA0KU19JWEdSUCA9IDBvMDAxMCAgIyBleGVjdXRlIGJ5IGdyb3VwDQpTX0lSV1hPID0gMG8wMDA3ICAjIG1hc2sgZm9yIG90aGVycyAobm90IGluIGdyb3VwKSBwZXJtaXNzaW9ucw0KU19JUk9USCA9IDBvMDAwNCAgIyByZWFkIGJ5IG90aGVycw0KU19JV09USCA9IDBvMDAwMiAgIyB3cml0ZSBieSBvdGhlcnMNClNfSVhPVEggPSAwbzAwMDEgICMgZXhlY3V0ZSBieSBvdGhlcnMNCg0KIyBOYW1lcyBmb3IgZmlsZSBmbGFncw0KDQpVRl9OT0RVTVAgICAgPSAweDAwMDAwMDAxICAjIGRvIG5vdCBkdW1wIGZpbGUNClVGX0lNTVVUQUJMRSA9IDB4MDAwMDAwMDIgICMgZmlsZSBtYXkgbm90IGJlIGNoYW5nZWQNClVGX0FQUEVORCAgICA9IDB4MDAwMDAwMDQgICMgZmlsZSBtYXkgb25seSBiZSBhcHBlbmRlZCB0bw0KVUZfT1BBUVVFICAgID0gMHgwMDAwMDAwOCAgIyBkaXJlY3RvcnkgaXMgb3BhcXVlIHdoZW4gdmlld2VkIHRocm91Z2ggYSB1bmlvbiBzdGFjaw0KVUZfTk9VTkxJTksgID0gMHgwMDAwMDAxMCAgIyBmaWxlIG1heSBub3QgYmUgcmVuYW1lZCBvciBkZWxldGVkDQpVRl9DT01QUkVTU0VEID0gMHgwMDAwMDAyMCAjIE9TIFg6IGZpbGUgaXMgaGZzLWNvbXByZXNzZWQNClVGX0hJRERFTiAgICA9IDB4MDAwMDgwMDAgICMgT1MgWDogZmlsZSBzaG91bGQgbm90IGJlIGRpc3BsYXllZA0KU0ZfQVJDSElWRUQgID0gMHgwMDAxMDAwMCAgIyBmaWxlIG1heSBiZSBhcmNoaXZlZA0KU0ZfSU1NVVRBQkxFID0gMHgwMDAyMDAwMCAgIyBmaWxlIG1heSBub3QgYmUgY2hhbmdlZA0KU0ZfQVBQRU5EICAgID0gMHgwMDA0MDAwMCAgIyBmaWxlIG1heSBvbmx5IGJlIGFwcGVuZGVkIHRvDQpTRl9OT1VOTElOSyAgPSAweDAwMTAwMDAwICAjIGZpbGUgbWF5IG5vdCBiZSByZW5hbWVkIG9yIGRlbGV0ZWQNClNGX1NOQVBTSE9UICA9IDB4MDAyMDAwMDAgICMgZmlsZSBpcyBhIHNuYXBzaG90IGZpbGUNCg0KDQpfZmlsZW1vZGVfdGFibGUgPSAoDQogICAgKChTX0lGTE5LLCAgICAgICAgICJsIiksDQogICAgIChTX0lGUkVHLCAgICAgICAgICItIiksDQogICAgIChTX0lGQkxLLCAgICAgICAgICJiIiksDQogICAgIChTX0lGRElSLCAgICAgICAgICJkIiksDQogICAgIChTX0lGQ0hSLCAgICAgICAgICJjIiksDQogICAgIChTX0lGSUZPLCAgICAgICAgICJwIikpLA0KDQogICAgKChTX0lSVVNSLCAgICAgICAgICJyIiksKSwNCiAgICAoKFNfSVdVU1IsICAgICAgICAgInciKSwpLA0KICAgICgoU19JWFVTUnxTX0lTVUlELCAicyIpLA0KICAgICAoU19JU1VJRCwgICAgICAgICAiUyIpLA0KICAgICAoU19JWFVTUiwgICAgICAgICAieCIpKSwNCg0KICAgICgoU19JUkdSUCwgICAgICAgICAiciIpLCksDQogICAgKChTX0lXR1JQLCAgICAgICAgICJ3IiksKSwNCiAgICAoKFNfSVhHUlB8U19JU0dJRCwgInMiKSwNCiAgICAgKFNfSVNHSUQsICAgICAgICAgIlMiKSwNCiAgICAgKFNfSVhHUlAsICAgICAgICAgIngiKSksDQoNCiAgICAoKFNfSVJPVEgsICAgICAgICAgInIiKSwpLA0KICAgICgoU19JV09USCwgICAgICAgICAidyIpLCksDQogICAgKChTX0lYT1RIfFNfSVNWVFgsICJ0IiksDQogICAgIChTX0lTVlRYLCAgICAgICAgICJUIiksDQogICAgIChTX0lYT1RILCAgICAgICAgICJ4IikpDQopDQoNCmRlZiBmaWxlbW9kZShtb2RlKToNCiAgICAiIiJDb252ZXJ0IGEgZmlsZSdzIG1vZGUgdG8gYSBzdHJpbmcgb2YgdGhlIGZvcm0gJy1yd3hyd3hyd3gnLiIiIg0KICAgIHBlcm0gPSBbXQ0KICAgIGZvciB0YWJsZSBpbiBfZmlsZW1vZGVfdGFibGU6DQogICAgICAgIGZvciBiaXQsIGNoYXIgaW4gdGFibGU6DQogICAgICAgICAgICBpZiBtb2RlICYgYml0ID09IGJpdDoNCiAgICAgICAgICAgICAgICBwZXJtLmFwcGVuZChjaGFyKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwZXJtLmFwcGVuZCgiLSIpDQogICAgcmV0dXJuICIiLmpvaW4ocGVybSkNCg==',
'/Lib/_dummy_thread.py':'IiIiRHJvcC1pbiByZXBsYWNlbWVudCBmb3IgdGhlIHRocmVhZCBtb2R1bGUuCgpNZWFudCB0byBiZSB1c2VkIGFzIGEgYnJhaW4tZGVhZCBzdWJzdGl0dXRlIHNvIHRoYXQgdGhyZWFkZWQgY29kZSBkb2VzCm5vdCBuZWVkIHRvIGJlIHJld3JpdHRlbiBmb3Igd2hlbiB0aGUgdGhyZWFkIG1vZHVsZSBpcyBub3QgcHJlc2VudC4KClN1Z2dlc3RlZCB1c2FnZSBpczo6CgogICAgdHJ5OgogICAgICAgIGltcG9ydCBfdGhyZWFkCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgaW1wb3J0IF9kdW1teV90aHJlYWQgYXMgX3RocmVhZAoKIiIiCiMgRXhwb3J0cyBvbmx5IHRoaW5ncyBzcGVjaWZpZWQgYnkgdGhyZWFkIGRvY3VtZW50YXRpb247CiMgc2tpcHBpbmcgb2Jzb2xldGUgc3lub255bXMgYWxsb2NhdGUoKSwgc3RhcnRfbmV3KCksIGV4aXRfdGhyZWFkKCkuCl9fYWxsX18gPSBbJ2Vycm9yJywgJ3N0YXJ0X25ld190aHJlYWQnLCAnZXhpdCcsICdnZXRfaWRlbnQnLCAnYWxsb2NhdGVfbG9jaycsCiAgICAgICAgICAgJ2ludGVycnVwdF9tYWluJywgJ0xvY2tUeXBlJ10KCiMgQSBkdW1teSB2YWx1ZQpUSU1FT1VUX01BWCA9IDIqKjMxCgojIE5PVEU6IHRoaXMgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBlYXJseSBpbiB0aGUgZXh0ZW5zaW9uIGJ1aWxkaW5nIHByb2Nlc3MsCiMgYW5kIHNvIHRvcCBsZXZlbCBpbXBvcnRzIG9mIG90aGVyIG1vZHVsZXMgc2hvdWxkIGJlIGF2b2lkZWQuICBJbnN0ZWFkLCBhbGwKIyBpbXBvcnRzIGFyZSBkb25lIHdoZW4gbmVlZGVkIG9uIGEgZnVuY3Rpb24tYnktZnVuY3Rpb24gYmFzaXMuICBTaW5jZSB0aHJlYWRzCiMgYXJlIGRpc2FibGVkLCB0aGUgaW1wb3J0IGxvY2sgc2hvdWxkIG5vdCBiZSBhbiBpc3N1ZSBhbnl3YXkgKD8/KS4KCmVycm9yID0gUnVudGltZUVycm9yCgpkZWYgc3RhcnRfbmV3X3RocmVhZChmdW5jdGlvbiwgYXJncywga3dhcmdzPXt9KToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuc3RhcnRfbmV3X3RocmVhZCgpLgoKICAgIENvbXBhdGliaWxpdHkgaXMgbWFpbnRhaW5lZCBieSBtYWtpbmcgc3VyZSB0aGF0IGBgYXJnc2BgIGlzIGEKICAgIHR1cGxlIGFuZCBgYGt3YXJnc2BgIGlzIGEgZGljdGlvbmFyeS4gIElmIGFuIGV4Y2VwdGlvbiBpcyByYWlzZWQKICAgIGFuZCBpdCBpcyBTeXN0ZW1FeGl0ICh3aGljaCBjYW4gYmUgZG9uZSBieSBfdGhyZWFkLmV4aXQoKSkgaXQgaXMKICAgIGNhdWdodCBhbmQgbm90aGluZyBpcyBkb25lOyBhbGwgb3RoZXIgZXhjZXB0aW9ucyBhcmUgcHJpbnRlZCBvdXQKICAgIGJ5IHVzaW5nIHRyYWNlYmFjay5wcmludF9leGMoKS4KCiAgICBJZiB0aGUgZXhlY3V0ZWQgZnVuY3Rpb24gY2FsbHMgaW50ZXJydXB0X21haW4gdGhlIEtleWJvYXJkSW50ZXJydXB0IHdpbGwgYmUKICAgIHJhaXNlZCB3aGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zLgoKICAgICIiIgogICAgaWYgdHlwZShhcmdzKSAhPSB0eXBlKHR1cGxlKCkpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiMm5kIGFyZyBtdXN0IGJlIGEgdHVwbGUiKQogICAgaWYgdHlwZShrd2FyZ3MpICE9IHR5cGUoZGljdCgpKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoIjNyZCBhcmcgbXVzdCBiZSBhIGRpY3QiKQogICAgZ2xvYmFsIF9tYWluCiAgICBfbWFpbiA9IEZhbHNlCiAgICB0cnk6CiAgICAgICAgZnVuY3Rpb24oKmFyZ3MsICoqa3dhcmdzKQogICAgZXhjZXB0IFN5c3RlbUV4aXQ6CiAgICAgICAgcGFzcwogICAgZXhjZXB0OgogICAgICAgIGltcG9ydCB0cmFjZWJhY2sKICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkKICAgIF9tYWluID0gVHJ1ZQogICAgZ2xvYmFsIF9pbnRlcnJ1cHQKICAgIGlmIF9pbnRlcnJ1cHQ6CiAgICAgICAgX2ludGVycnVwdCA9IEZhbHNlCiAgICAgICAgcmFpc2UgS2V5Ym9hcmRJbnRlcnJ1cHQKCmRlZiBleGl0KCk6CiAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLmV4aXQoKS4iIiIKICAgIHJhaXNlIFN5c3RlbUV4aXQKCmRlZiBnZXRfaWRlbnQoKToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuZ2V0X2lkZW50KCkuCgogICAgU2luY2UgdGhpcyBtb2R1bGUgc2hvdWxkIG9ubHkgYmUgdXNlZCB3aGVuIF90aHJlYWRtb2R1bGUgaXMgbm90CiAgICBhdmFpbGFibGUsIGl0IGlzIHNhZmUgdG8gYXNzdW1lIHRoYXQgdGhlIGN1cnJlbnQgcHJvY2VzcyBpcyB0aGUKICAgIG9ubHkgdGhyZWFkLiAgVGh1cyBhIGNvbnN0YW50IGNhbiBiZSBzYWZlbHkgcmV0dXJuZWQuCiAgICAiIiIKICAgIHJldHVybiAtMQoKZGVmIGFsbG9jYXRlX2xvY2soKToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuYWxsb2NhdGVfbG9jaygpLiIiIgogICAgcmV0dXJuIExvY2tUeXBlKCkKCmRlZiBzdGFja19zaXplKHNpemU9Tm9uZSk6CiAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLnN0YWNrX3NpemUoKS4iIiIKICAgIGlmIHNpemUgaXMgbm90IE5vbmU6CiAgICAgICAgcmFpc2UgZXJyb3IoInNldHRpbmcgdGhyZWFkIHN0YWNrIHNpemUgbm90IHN1cHBvcnRlZCIpCiAgICByZXR1cm4gMAoKY2xhc3MgTG9ja1R5cGUob2JqZWN0KToKICAgICIiIkNsYXNzIGltcGxlbWVudGluZyBkdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLkxvY2tUeXBlLgoKICAgIENvbXBhdGliaWxpdHkgaXMgbWFpbnRhaW5lZCBieSBtYWludGFpbmluZyBzZWxmLmxvY2tlZF9zdGF0dXMKICAgIHdoaWNoIGlzIGEgYm9vbGVhbiB0aGF0IHN0b3JlcyB0aGUgc3RhdGUgb2YgdGhlIGxvY2suICBQaWNrbGluZyBvZgogICAgdGhlIGxvY2ssIHRob3VnaCwgc2hvdWxkIG5vdCBiZSBkb25lIHNpbmNlIGlmIHRoZSBfdGhyZWFkIG1vZHVsZSBpcwogICAgdGhlbiB1c2VkIHdpdGggYW4gdW5waWNrbGVkIGBgbG9jaygpYGAgZnJvbSBoZXJlIHByb2JsZW1zIGNvdWxkCiAgICBvY2N1ciBmcm9tIHRoaXMgY2xhc3Mgbm90IGhhdmluZyBhdG9taWMgbWV0aG9kcy4KCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5sb2NrZWRfc3RhdHVzID0gRmFsc2UKCiAgICBkZWYgYWNxdWlyZShzZWxmLCB3YWl0ZmxhZz1Ob25lLCB0aW1lb3V0PS0xKToKICAgICAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBhY3F1aXJlKCkuCgogICAgICAgIEZvciBibG9ja2luZyBjYWxscywgc2VsZi5sb2NrZWRfc3RhdHVzIGlzIGF1dG9tYXRpY2FsbHkgc2V0IHRvCiAgICAgICAgVHJ1ZSBhbmQgcmV0dXJuZWQgYXBwcm9wcmlhdGVseSBiYXNlZCBvbiB2YWx1ZSBvZgogICAgICAgIGBgd2FpdGZsYWdgYC4gIElmIGl0IGlzIG5vbi1ibG9ja2luZywgdGhlbiB0aGUgdmFsdWUgaXMKICAgICAgICBhY3R1YWxseSBjaGVja2VkIGFuZCBub3Qgc2V0IGlmIGl0IGlzIGFscmVhZHkgYWNxdWlyZWQuICBUaGlzCiAgICAgICAgaXMgYWxsIGRvbmUgc28gdGhhdCB0aHJlYWRpbmcuQ29uZGl0aW9uJ3MgYXNzZXJ0IHN0YXRlbWVudHMKICAgICAgICBhcmVuJ3QgdHJpZ2dlcmVkIGFuZCB0aHJvdyBhIGxpdHRsZSBmaXQuCgogICAgICAgICIiIgogICAgICAgIGlmIHdhaXRmbGFnIGlzIE5vbmUgb3Igd2FpdGZsYWc6CiAgICAgICAgICAgIHNlbGYubG9ja2VkX3N0YXR1cyA9IFRydWUKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5sb2NrZWRfc3RhdHVzOgogICAgICAgICAgICAgICAgc2VsZi5sb2NrZWRfc3RhdHVzID0gVHJ1ZQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIHRpbWVvdXQgPiAwOgogICAgICAgICAgICAgICAgICAgIGltcG9ydCB0aW1lCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCh0aW1lb3V0KQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgX19lbnRlcl9fID0gYWNxdWlyZQoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCB0eXAsIHZhbCwgdGIpOgogICAgICAgIHNlbGYucmVsZWFzZSgpCgogICAgZGVmIHJlbGVhc2Uoc2VsZik6CiAgICAgICAgIiIiUmVsZWFzZSB0aGUgZHVtbXkgbG9jay4iIiIKICAgICAgICAjIFhYWCBQZXJoYXBzIHNob3VsZG4ndCBhY3R1YWxseSBib3RoZXIgdG8gdGVzdD8gIENvdWxkIGxlYWQKICAgICAgICAjICAgICB0byBwcm9ibGVtcyBmb3IgY29tcGxleCwgdGhyZWFkZWQgY29kZS4KICAgICAgICBpZiBub3Qgc2VsZi5sb2NrZWRfc3RhdHVzOgogICAgICAgICAgICByYWlzZSBlcnJvcgogICAgICAgIHNlbGYubG9ja2VkX3N0YXR1cyA9IEZhbHNlCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgbG9ja2VkKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmxvY2tlZF9zdGF0dXMKCiMgVXNlZCB0byBzaWduYWwgdGhhdCBpbnRlcnJ1cHRfbWFpbiB3YXMgY2FsbGVkIGluIGEgInRocmVhZCIKX2ludGVycnVwdCA9IEZhbHNlCiMgVHJ1ZSB3aGVuIG5vdCBleGVjdXRpbmcgaW4gYSAidGhyZWFkIgpfbWFpbiA9IFRydWUKCmRlZiBpbnRlcnJ1cHRfbWFpbigpOgogICAgIiIiU2V0IF9pbnRlcnJ1cHQgZmxhZyB0byBUcnVlIHRvIGhhdmUgc3RhcnRfbmV3X3RocmVhZCByYWlzZQogICAgS2V5Ym9hcmRJbnRlcnJ1cHQgdXBvbiBleGl0aW5nLiIiIgogICAgaWYgX21haW46CiAgICAgICAgcmFpc2UgS2V5Ym9hcmRJbnRlcnJ1cHQKICAgIGVsc2U6CiAgICAgICAgZ2xvYmFsIF9pbnRlcnJ1cHQKICAgICAgICBfaW50ZXJydXB0ID0gVHJ1ZQo=',
'/Lib/reprlib.py':'IiIiUmVkbyB0aGUgYnVpbHRpbiByZXByKCkgKHJlcHJlc2VudGF0aW9uKSBidXQgd2l0aCBsaW1pdHMgb24gbW9zdCBzaXplcy4iIiINCg0KX19hbGxfXyA9IFsiUmVwciIsICJyZXByIiwgInJlY3Vyc2l2ZV9yZXByIl0NCg0KaW1wb3J0IGJ1aWx0aW5zDQpmcm9tIGl0ZXJ0b29scyBpbXBvcnQgaXNsaWNlDQp0cnk6DQogICAgZnJvbSBfdGhyZWFkIGltcG9ydCBnZXRfaWRlbnQNCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgICBmcm9tIF9kdW1teV90aHJlYWQgaW1wb3J0IGdldF9pZGVudA0KDQpkZWYgcmVjdXJzaXZlX3JlcHIoZmlsbHZhbHVlPScuLi4nKToNCiAgICAnRGVjb3JhdG9yIHRvIG1ha2UgYSByZXByIGZ1bmN0aW9uIHJldHVybiBmaWxsdmFsdWUgZm9yIGEgcmVjdXJzaXZlIGNhbGwnDQoNCiAgICBkZWYgZGVjb3JhdGluZ19mdW5jdGlvbih1c2VyX2Z1bmN0aW9uKToNCiAgICAgICAgcmVwcl9ydW5uaW5nID0gc2V0KCkNCg0KICAgICAgICBkZWYgd3JhcHBlcihzZWxmKToNCiAgICAgICAgICAgIGtleSA9IGlkKHNlbGYpLCBnZXRfaWRlbnQoKQ0KICAgICAgICAgICAgaWYga2V5IGluIHJlcHJfcnVubmluZzoNCiAgICAgICAgICAgICAgICByZXR1cm4gZmlsbHZhbHVlDQogICAgICAgICAgICByZXByX3J1bm5pbmcuYWRkKGtleSkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICByZXN1bHQgPSB1c2VyX2Z1bmN0aW9uKHNlbGYpDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHJlcHJfcnVubmluZy5kaXNjYXJkKGtleSkNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgICAgICAjIENhbid0IHVzZSBmdW5jdG9vbHMud3JhcHMoKSBoZXJlIGJlY2F1c2Ugb2YgYm9vdHN0cmFwIGlzc3Vlcw0KICAgICAgICB3cmFwcGVyLl9fbW9kdWxlX18gPSBnZXRhdHRyKHVzZXJfZnVuY3Rpb24sICdfX21vZHVsZV9fJykNCiAgICAgICAgd3JhcHBlci5fX2RvY19fID0gZ2V0YXR0cih1c2VyX2Z1bmN0aW9uLCAnX19kb2NfXycpDQogICAgICAgIHdyYXBwZXIuX19uYW1lX18gPSBnZXRhdHRyKHVzZXJfZnVuY3Rpb24sICdfX25hbWVfXycpDQogICAgICAgIHdyYXBwZXIuX19hbm5vdGF0aW9uc19fID0gZ2V0YXR0cih1c2VyX2Z1bmN0aW9uLCAnX19hbm5vdGF0aW9uc19fJywge30pDQogICAgICAgIHJldHVybiB3cmFwcGVyDQoNCiAgICByZXR1cm4gZGVjb3JhdGluZ19mdW5jdGlvbg0KDQpjbGFzcyBSZXByOg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBzZWxmLm1heGxldmVsID0gNg0KICAgICAgICBzZWxmLm1heHR1cGxlID0gNg0KICAgICAgICBzZWxmLm1heGxpc3QgPSA2DQogICAgICAgIHNlbGYubWF4YXJyYXkgPSA1DQogICAgICAgIHNlbGYubWF4ZGljdCA9IDQNCiAgICAgICAgc2VsZi5tYXhzZXQgPSA2DQogICAgICAgIHNlbGYubWF4ZnJvemVuc2V0ID0gNg0KICAgICAgICBzZWxmLm1heGRlcXVlID0gNg0KICAgICAgICBzZWxmLm1heHN0cmluZyA9IDMwDQogICAgICAgIHNlbGYubWF4bG9uZyA9IDQwDQogICAgICAgIHNlbGYubWF4b3RoZXIgPSAzMA0KDQogICAgZGVmIHJlcHIoc2VsZiwgeCk6DQogICAgICAgIHJldHVybiBzZWxmLnJlcHIxKHgsIHNlbGYubWF4bGV2ZWwpDQoNCiAgICBkZWYgcmVwcjEoc2VsZiwgeCwgbGV2ZWwpOg0KICAgICAgICB0eXBlbmFtZSA9IHR5cGUoeCkuX19uYW1lX18NCiAgICAgICAgaWYgJyAnIGluIHR5cGVuYW1lOg0KICAgICAgICAgICAgcGFydHMgPSB0eXBlbmFtZS5zcGxpdCgpDQogICAgICAgICAgICB0eXBlbmFtZSA9ICdfJy5qb2luKHBhcnRzKQ0KICAgICAgICBpZiBoYXNhdHRyKHNlbGYsICdyZXByXycgKyB0eXBlbmFtZSk6DQogICAgICAgICAgICByZXR1cm4gZ2V0YXR0cihzZWxmLCAncmVwcl8nICsgdHlwZW5hbWUpKHgsIGxldmVsKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcmV0dXJuIHNlbGYucmVwcl9pbnN0YW5jZSh4LCBsZXZlbCkNCg0KICAgIGRlZiBfcmVwcl9pdGVyYWJsZShzZWxmLCB4LCBsZXZlbCwgbGVmdCwgcmlnaHQsIG1heGl0ZXIsIHRyYWlsPScnKToNCiAgICAgICAgbiA9IGxlbih4KQ0KICAgICAgICBpZiBsZXZlbCA8PSAwIGFuZCBuOg0KICAgICAgICAgICAgcyA9ICcuLi4nDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBuZXdsZXZlbCA9IGxldmVsIC0gMQ0KICAgICAgICAgICAgcmVwcjEgPSBzZWxmLnJlcHIxDQogICAgICAgICAgICBwaWVjZXMgPSBbcmVwcjEoZWxlbSwgbmV3bGV2ZWwpIGZvciBlbGVtIGluIGlzbGljZSh4LCBtYXhpdGVyKV0NCiAgICAgICAgICAgIGlmIG4gPiBtYXhpdGVyOiAgcGllY2VzLmFwcGVuZCgnLi4uJykNCiAgICAgICAgICAgIHMgPSAnLCAnLmpvaW4ocGllY2VzKQ0KICAgICAgICAgICAgaWYgbiA9PSAxIGFuZCB0cmFpbDogIHJpZ2h0ID0gdHJhaWwgKyByaWdodA0KICAgICAgICByZXR1cm4gJyVzJXMlcycgJSAobGVmdCwgcywgcmlnaHQpDQoNCiAgICBkZWYgcmVwcl90dXBsZShzZWxmLCB4LCBsZXZlbCk6DQogICAgICAgIHJldHVybiBzZWxmLl9yZXByX2l0ZXJhYmxlKHgsIGxldmVsLCAnKCcsICcpJywgc2VsZi5tYXh0dXBsZSwgJywnKQ0KDQogICAgZGVmIHJlcHJfbGlzdChzZWxmLCB4LCBsZXZlbCk6DQogICAgICAgIHJldHVybiBzZWxmLl9yZXByX2l0ZXJhYmxlKHgsIGxldmVsLCAnWycsICddJywgc2VsZi5tYXhsaXN0KQ0KDQogICAgZGVmIHJlcHJfYXJyYXkoc2VsZiwgeCwgbGV2ZWwpOg0KICAgICAgICBoZWFkZXIgPSAiYXJyYXkoJyVzJywgWyIgJSB4LnR5cGVjb2RlDQogICAgICAgIHJldHVybiBzZWxmLl9yZXByX2l0ZXJhYmxlKHgsIGxldmVsLCBoZWFkZXIsICddKScsIHNlbGYubWF4YXJyYXkpDQoNCiAgICBkZWYgcmVwcl9zZXQoc2VsZiwgeCwgbGV2ZWwpOg0KICAgICAgICB4ID0gX3Bvc3NpYmx5X3NvcnRlZCh4KQ0KICAgICAgICByZXR1cm4gc2VsZi5fcmVwcl9pdGVyYWJsZSh4LCBsZXZlbCwgJ3NldChbJywgJ10pJywgc2VsZi5tYXhzZXQpDQoNCiAgICBkZWYgcmVwcl9mcm96ZW5zZXQoc2VsZiwgeCwgbGV2ZWwpOg0KICAgICAgICB4ID0gX3Bvc3NpYmx5X3NvcnRlZCh4KQ0KICAgICAgICByZXR1cm4gc2VsZi5fcmVwcl9pdGVyYWJsZSh4LCBsZXZlbCwgJ2Zyb3plbnNldChbJywgJ10pJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXhmcm96ZW5zZXQpDQoNCiAgICBkZWYgcmVwcl9kZXF1ZShzZWxmLCB4LCBsZXZlbCk6DQogICAgICAgIHJldHVybiBzZWxmLl9yZXByX2l0ZXJhYmxlKHgsIGxldmVsLCAnZGVxdWUoWycsICddKScsIHNlbGYubWF4ZGVxdWUpDQoNCiAgICBkZWYgcmVwcl9kaWN0KHNlbGYsIHgsIGxldmVsKToNCiAgICAgICAgbiA9IGxlbih4KQ0KICAgICAgICBpZiBuID09IDA6IHJldHVybiAne30nDQogICAgICAgIGlmIGxldmVsIDw9IDA6IHJldHVybiAney4uLn0nDQogICAgICAgIG5ld2xldmVsID0gbGV2ZWwgLSAxDQogICAgICAgIHJlcHIxID0gc2VsZi5yZXByMQ0KICAgICAgICBwaWVjZXMgPSBbXQ0KICAgICAgICBmb3Iga2V5IGluIGlzbGljZShfcG9zc2libHlfc29ydGVkKHgpLCBzZWxmLm1heGRpY3QpOg0KICAgICAgICAgICAga2V5cmVwciA9IHJlcHIxKGtleSwgbmV3bGV2ZWwpDQogICAgICAgICAgICB2YWxyZXByID0gcmVwcjEoeFtrZXldLCBuZXdsZXZlbCkNCiAgICAgICAgICAgIHBpZWNlcy5hcHBlbmQoJyVzOiAlcycgJSAoa2V5cmVwciwgdmFscmVwcikpDQogICAgICAgIGlmIG4gPiBzZWxmLm1heGRpY3Q6IHBpZWNlcy5hcHBlbmQoJy4uLicpDQogICAgICAgIHMgPSAnLCAnLmpvaW4ocGllY2VzKQ0KICAgICAgICByZXR1cm4gJ3slc30nICUgKHMsKQ0KDQogICAgZGVmIHJlcHJfc3RyKHNlbGYsIHgsIGxldmVsKToNCiAgICAgICAgcyA9IGJ1aWx0aW5zLnJlcHIoeFs6c2VsZi5tYXhzdHJpbmddKQ0KICAgICAgICBpZiBsZW4ocykgPiBzZWxmLm1heHN0cmluZzoNCiAgICAgICAgICAgIGkgPSBtYXgoMCwgKHNlbGYubWF4c3RyaW5nLTMpLy8yKQ0KICAgICAgICAgICAgaiA9IG1heCgwLCBzZWxmLm1heHN0cmluZy0zLWkpDQogICAgICAgICAgICBzID0gYnVpbHRpbnMucmVwcih4WzppXSArIHhbbGVuKHgpLWo6XSkNCiAgICAgICAgICAgIHMgPSBzWzppXSArICcuLi4nICsgc1tsZW4ocyktajpdDQogICAgICAgIHJldHVybiBzDQoNCiAgICBkZWYgcmVwcl9pbnQoc2VsZiwgeCwgbGV2ZWwpOg0KICAgICAgICBzID0gYnVpbHRpbnMucmVwcih4KSAjIFhYWCBIb3BlIHRoaXMgaXNuJ3QgdG9vIHNsb3cuLi4NCiAgICAgICAgaWYgbGVuKHMpID4gc2VsZi5tYXhsb25nOg0KICAgICAgICAgICAgaSA9IG1heCgwLCAoc2VsZi5tYXhsb25nLTMpLy8yKQ0KICAgICAgICAgICAgaiA9IG1heCgwLCBzZWxmLm1heGxvbmctMy1pKQ0KICAgICAgICAgICAgcyA9IHNbOmldICsgJy4uLicgKyBzW2xlbihzKS1qOl0NCiAgICAgICAgcmV0dXJuIHMNCg0KICAgIGRlZiByZXByX2luc3RhbmNlKHNlbGYsIHgsIGxldmVsKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgcyA9IGJ1aWx0aW5zLnJlcHIoeCkNCiAgICAgICAgICAgICMgQnVncyBpbiB4Ll9fcmVwcl9fKCkgY2FuIGNhdXNlIGFyYml0cmFyeQ0KICAgICAgICAgICAgIyBleGNlcHRpb25zIC0tIHRoZW4gbWFrZSB1cCBzb21ldGhpbmcNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgICAgIHJldHVybiAnPCVzIGluc3RhbmNlIGF0ICV4PicgJSAoeC5fX2NsYXNzX18uX19uYW1lX18sIGlkKHgpKQ0KICAgICAgICBpZiBsZW4ocykgPiBzZWxmLm1heG90aGVyOg0KICAgICAgICAgICAgaSA9IG1heCgwLCAoc2VsZi5tYXhvdGhlci0zKS8vMikNCiAgICAgICAgICAgIGogPSBtYXgoMCwgc2VsZi5tYXhvdGhlci0zLWkpDQogICAgICAgICAgICBzID0gc1s6aV0gKyAnLi4uJyArIHNbbGVuKHMpLWo6XQ0KICAgICAgICByZXR1cm4gcw0KDQoNCmRlZiBfcG9zc2libHlfc29ydGVkKHgpOg0KICAgICMgU2luY2Ugbm90IGFsbCBzZXF1ZW5jZXMgb2YgaXRlbXMgY2FuIGJlIHNvcnRlZCBhbmQgY29tcGFyaXNvbg0KICAgICMgZnVuY3Rpb25zIG1heSByYWlzZSBhcmJpdHJhcnkgZXhjZXB0aW9ucywgcmV0dXJuIGFuIHVuc29ydGVkDQogICAgIyBzZXF1ZW5jZSBpbiB0aGF0IGNhc2UuDQogICAgdHJ5Og0KICAgICAgICByZXR1cm4gc29ydGVkKHgpDQogICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgcmV0dXJuIGxpc3QoeCkNCg0KYVJlcHIgPSBSZXByKCkNCnJlcHIgPSBhUmVwci5yZXByDQo=',
'/Lib/operator.py':'IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMw0KIiIiDQpPcGVyYXRvciBJbnRlcmZhY2UNCg0KVGhpcyBtb2R1bGUgZXhwb3J0cyBhIHNldCBvZiBmdW5jdGlvbnMgY29ycmVzcG9uZGluZyB0byB0aGUgaW50cmluc2ljIA0Kb3BlcmF0b3JzIG9mIFB5dGhvbi4gIEZvciBleGFtcGxlLCBvcGVyYXRvci5hZGQoeCwgeSkgaXMgZXF1aXZhbGVudCANCnRvIHRoZSBleHByZXNzaW9uIHgreS4gIFRoZSBmdW5jdGlvbiBuYW1lcyBhcmUgdGhvc2UgdXNlZCBmb3Igc3BlY2lhbCANCm1ldGhvZHM7IHZhcmlhbnRzIHdpdGhvdXQgbGVhZGluZyBhbmQgdHJhaWxpbmcgJ19fJyBhcmUgYWxzbyBwcm92aWRlZCANCmZvciBjb252ZW5pZW5jZS4NCg0KVGhpcyBpcyB0aGUgcHVyZSBQeXRob24gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1vZHVsZS4NCiIiIg0KDQojIGRvd25sb2FkZWQgZnJvbSBodHRwOi8vYnVncy5weXRob24ub3JnL2ZpbGUyODMyNy9vcGVyYXRvci5weQ0KDQojaW1wb3J0IGJ1aWx0aW5zIGFzIF9iaSAgI3RoZXJlIGlzIG5vIGJ1aWx0aW5zIG1vZHVsZQ0KDQpkZWYgbHQoYSwgYik6DQogICAgIlNhbWUgYXMgYSA8IGIuIg0KICAgIHJldHVybiBhIDwgYg0KX19sdF9fID0gbHQNCg0KZGVmIGxlKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPD0gYi4iDQogICAgcmV0dXJuIGEgPD0gYg0KX19sZV9fID0gbGUNCg0KZGVmIGVxKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPT0gYi4iDQogICAgcmV0dXJuIGEgPT0gYg0KX19lcV9fID0gZXENCg0KZGVmIG5lKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgIT0gYi4iDQogICAgcmV0dXJuIGEgIT0gYg0KX19uZV9fID0gbmUNCg0KZGVmIGdlKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPj0gYi4iDQogICAgcmV0dXJuIGEgPj0gYg0KX19nZV9fID0gZ2UNCg0KZGVmIGd0KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPiBiLiINCiAgICByZXR1cm4gYSA+IGINCl9fZ3RfXyA9IGd0DQoNCmRlZiBub3RfKGEpOg0KICAgICJTYW1lIGFzIG5vdCBhLiINCiAgICByZXR1cm4gbm90IGENCl9fbm90X18gPSBub3RfDQoNCmRlZiB0cnV0aChhKToNCiAgICAiUmV0dXJuIFRydWUgaWYgYSBpcyB0cnVlLCBGYWxzZSBvdGhlcndpc2UuIg0KICAgICNyZXR1cm4gX2JpLmJvb2woYSkNCiAgICByZXR1cm4gYm9vbChhKQ0KDQpkZWYgaXNfKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgaXMgYi4iDQogICAgcmV0dXJuIGEgaXMgYg0KDQojIGJyeXRob24gZG9lcyBub3QgbGlrZSAgKGNhdXNlcyBzeW50YXggZXJyb3IpDQojZGVmIGlzX25vdChhLCBiKToNCiMgICAgIlNhbWUgYXMgYSBpcyBub3QgYi4iDQojICAgIHJldHVybiBhIGlzIG5vdCBiDQoNCiNyZWN1cnNpb24gZXJyb3Igb3IganVzdCBjb21tZW50IG91dCBhbmQgYWRkIGNvZGUgYmVsb3cgZnVuY3Rpb24NCiNkZWYgYWJzKGEpOg0KIyAgICAiU2FtZSBhcyBhYnMoYSkuIg0KIyAgICAjcmV0dXJuIF9iaS5hYnMoYSkNCiMgICAgcmV0dXJuIGFicyhhKQ0KX19hYnNfXyA9IGFicw0KYWJzPWFicw0KDQoNCmRlZiBhZGQoYSwgYik6DQogICAgIlNhbWUgYXMgYSArIGIuIg0KICAgIHJldHVybiBhICsgYg0KX19hZGRfXyA9IGFkZA0KDQpkZWYgYW5kXyhhLCBiKToNCiAgICAiU2FtZSBhcyBhICYgYi4iDQogICAgcmV0dXJuIGEgJiBiDQpfX2FuZF9fID0gYW5kXw0KDQpkZWYgZmxvb3JkaXYoYSwgYik6DQogICAgIlNhbWUgYXMgYSAvLyBiLiINCiAgICByZXR1cm4gYSAvLyBiDQpfX2Zsb29yZGl2X18gPSBmbG9vcmRpdg0KDQpkZWYgaW5kZXgoYSk6DQogICAgIlNhbWUgYXMgYS5fX2luZGV4X18oKS4iDQogICAgcmV0dXJuIGEuX19pbmRleF9fKCkNCl9faW5kZXhfXyA9IGluZGV4DQoNCmRlZiBpbnYoYSk6DQogICAgIlNhbWUgYXMgfmEuIg0KICAgICNyZXR1cm4gfmEgICAgI2JyeXRob24gZG9lcyBub3QgbGlrZQ0KICAgIHJldHVybiBhXigyKiozMSkNCmludmVydCA9IF9faW52X18gPSBfX2ludmVydF9fID0gaW52DQoNCmRlZiBsc2hpZnQoYSwgYik6DQogICAgIlNhbWUgYXMgYSA8PCBiLiINCiAgICByZXR1cm4gYSA8PCBiDQpfX2xzaGlmdF9fID0gbHNoaWZ0DQoNCmRlZiBtb2QoYSwgYik6DQogICAgIlNhbWUgYXMgYSAlIGIuIg0KICAgIHJldHVybiBhICUgYg0KX19tb2RfXyA9IG1vZA0KDQpkZWYgbXVsKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgKiBiLiINCiAgICByZXR1cm4gYSAqIGINCl9fbXVsX18gPSBtdWwNCg0KZGVmIG5lZyhhKToNCiAgICAiU2FtZSBhcyAtYS4iDQogICAgcmV0dXJuIC1hDQpfX25lZ19fID0gbmVnDQoNCmRlZiBvcl8oYSwgYik6DQogICAgIlNhbWUgYXMgYSB8IGIuIg0KICAgIHJldHVybiBhIHwgYg0KX19vcl9fID0gb3JfDQoNCmRlZiBwb3MoYSk6DQogICAgIlNhbWUgYXMgK2EuIg0KICAgICNyZXR1cm4gK2EgICAgI2JyeXRob24gZG9lcyBub3QgbGlrZQ0KICAgIGlmIGEgPj0gMDogcmV0dXJuIGENCiAgICByZXR1cm4gLWENCl9fcG9zX18gPSBwb3MNCg0KZGVmIHBvdyhhLCBiKToNCiAgICAiU2FtZSBhcyBhICoqIGIuIg0KICAgIHJldHVybiBhICoqIGINCl9fcG93X18gPSBwb3cNCg0KZGVmIHJzaGlmdChhLCBiKToNCiAgICAiU2FtZSBhcyBhID4+IGIuIg0KICAgIHJldHVybiBhID4+IGINCl9fcnNoaWZ0X18gPSByc2hpZnQNCg0KZGVmIHN1YihhLCBiKToNCiAgICAiU2FtZSBhcyBhIC0gYi4iDQogICAgcmV0dXJuIGEgLSBiDQpfX3N1Yl9fID0gc3ViDQoNCmRlZiB0cnVlZGl2KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgLyBiLiINCiAgICByZXR1cm4gYSAvIGINCl9fdHJ1ZWRpdl9fID0gdHJ1ZWRpdg0KDQpkZWYgeG9yKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgXiBiLiINCiAgICByZXR1cm4gYSBeIGINCl9feG9yX18gPSB4b3INCg0KZGVmIGNvbmNhdChhLCBiKToNCiAgICAiU2FtZSBhcyBhICsgYiwgZm9yIGEgYW5kIGIgc2VxdWVuY2VzLiINCiAgICBpZiBub3QgKGhhc2F0dHIoYSwgJ19fZ2V0aXRlbV9fJykgYW5kIGhhc2F0dHIoYiwgJ19fZ2V0aXRlbV9fJykpOg0KICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2EgYW5kIGIgbXVzdCBiZSBzZXF1ZW5jZXMnKQ0KICAgIHJldHVybiBhICsgYg0KX19jb25jYXRfXyA9IGNvbmNhdA0KDQpkZWYgY29udGFpbnMoYSwgYik6DQogICAgIlNhbWUgYXMgYiBpbiBhIChub3RlIHJldmVyc2VkIG9wZXJhbmRzKS4iDQogICAgcmV0dXJuIGIgaW4gYQ0KX19jb250YWluc19fID0gY29udGFpbnMNCg0KZGVmIGNvdW50T2YoYSwgYik6DQogICAgIlJldHVybiB0aGUgbnVtYmVyIG9mIHRpbWVzIGIgb2NjdXJzIGluIGEuIg0KICAgIGNvdW50ID0gMA0KICAgIGZvciBpIGluIGE6DQogICAgICAgIGlmIGkgPT0gYjoNCiAgICAgICAgICAgIGNvdW50ICs9IDENCiAgICByZXR1cm4gY291bnQNCg0KZGVmIGRlbGl0ZW0oYSwgYik6DQogICAgIlNhbWUgYXMgZGVsIGFbYl0uIg0KICAgIGRlbCBhW2JdDQpfX2RlbGl0ZW1fXyA9IGRlbGl0ZW0NCg0KZGVmIGdldGl0ZW0oYSwgYik6DQogICAgIlNhbWUgYXMgYVtiXS4iDQogICAgcmV0dXJuIGFbYl0NCl9fZ2V0aXRlbV9fID0gZ2V0aXRlbQ0KDQojZml4bWUgIGJyeXRob24gZG9lc24ndCBsaWtlIHRoaXMgZnVuY3Rpb24NCiNkZWYgaW5kZXhPZihhLCBiKToNCiMgICAgIlJldHVybiB0aGUgZmlyc3QgaW5kZXggb2YgYiBpbiBhLiINCiMgICAgZm9yIGksIGogaW4gX2JpLmVudW1lcmF0ZShhKToNCiMgICAgICAgIGlmIGogPT0gYjoNCiMgICAgICAgICAgICByZXR1cm4gaQ0KIyAgICBlbHNlOg0KIyAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignYiBub3QgZm91bmQgaW4gYScpDQoNCmRlZiBzZXRpdGVtKGEsIGIsIGMpOg0KICAgICJTYW1lIGFzIGFbYl0gPSBjLiINCiAgICBhW2JdID0gYw0KX19zZXRpdGVtX18gPSBzZXRpdGVtDQoNCg0KDQpjbGFzcyBhdHRyZ2V0dGVyOg0KICAgICIiIg0KICAgIFJldHVybiBhIGNhbGxhYmxlIG9iamVjdCB0aGF0IGZldGNoZXMgdGhlIGdpdmVuIGF0dHJpYnV0ZShzKSBmcm9tIGl0cyBvcGVyYW5kLg0KICAgIEFmdGVyIGY9YXR0cmdldHRlcignbmFtZScpLCB0aGUgY2FsbCBmKHIpIHJldHVybnMgci5uYW1lLg0KICAgIEFmdGVyIGc9YXR0cmdldHRlcignbmFtZScsICdkYXRlJyksIHRoZSBjYWxsIGcocikgcmV0dXJucyAoci5uYW1lLCByLmRhdGUpLg0KICAgIEFmdGVyIGg9YXR0cmdldHRlcignbmFtZS5maXJzdCcsICduYW1lLmxhc3QnKSwgdGhlIGNhbGwgaChyKSByZXR1cm5zDQogICAgKHIubmFtZS5maXJzdCwgci5uYW1lLmxhc3QpLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhdHRyLCAqYXR0cnMpOg0KICAgICAgICBzZWxmLl9hdHRycyA9IChhdHRyLCkNCiAgICAgICAgc2VsZi5fYXR0cnMgKz0gYXR0cnMNCiAgICAgICAgaWYgYW55KG5vdCBpc2luc3RhbmNlKGF0dHIsIHN0cikgZm9yIGF0dHIgaW4gc2VsZi5fYXR0cnMpOg0KICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdhdHRyaWJ1dGUgbmFtZSBtdXN0IGJlIGEgc3RyaW5nJykNCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgX3Jlc29sdmVfYXR0cihvYmosIGF0dHIpOg0KICAgICAgICBmb3IgbmFtZSBpbiBhdHRyLnNwbGl0KCcuJyk6DQogICAgICAgICAgICAjb2JqID0gX2JpLmdldGF0dHIob2JqLCBuYW1lKQ0KICAgICAgICAgICAgb2JqID0gZ2V0YXR0cihvYmosIG5hbWUpDQogICAgICAgIHJldHVybiBvYmoNCg0KICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBvYmopOg0KICAgICAgICBpZiBsZW4oc2VsZi5fYXR0cnMpID09IDE6DQogICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVzb2x2ZV9hdHRyKG9iaiwgc2VsZi5fYXR0cnNbMF0pDQogICAgICAgIHJldHVybiB0dXBsZShzZWxmLl9yZXNvbHZlX2F0dHIob2JqLCBhdHRyKSBmb3IgYXR0ciBpbiBzZWxmLl9hdHRycykNCg0KY2xhc3MgaXRlbWdldHRlcjoNCiAgICAiIiINCiAgICBSZXR1cm4gYSBjYWxsYWJsZSBvYmplY3QgdGhhdCBmZXRjaGVzIHRoZSBnaXZlbiBpdGVtKHMpIGZyb20gaXRzIG9wZXJhbmQuDQogICAgQWZ0ZXIgZj1pdGVtZ2V0dGVyKDIpLCB0aGUgY2FsbCBmKHIpIHJldHVybnMgclsyXS4NCiAgICBBZnRlciBnPWl0ZW1nZXR0ZXIoMiw1LDMpLCB0aGUgY2FsbCBnKHIpIHJldHVybnMgKHJbMl0sIHJbNV0sIHJbM10pDQogICAgIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZW0sICppdGVtcyk6DQogICAgICAgIHNlbGYuX2l0ZW1zID0gKGl0ZW0sKQ0KICAgICAgICBzZWxmLl9pdGVtcyArPSBpdGVtcw0KDQogICAgZGVmIF9fY2FsbF9fKHNlbGYsIG9iaik6DQogICAgICAgIGlmIGxlbihzZWxmLl9pdGVtcykgPT0gMToNCiAgICAgICAgICAgIHJldHVybiBvYmpbc2VsZi5faXRlbXNbMF1dDQogICAgICAgIHJldHVybiB0dXBsZShvYmpbaXRlbV0gZm9yIGl0ZW0gaW4gc2VsZi5faXRlbXMpDQoNCmNsYXNzIG1ldGhvZGNhbGxlcjoNCiAgICAiIiINCiAgICBSZXR1cm4gYSBjYWxsYWJsZSBvYmplY3QgdGhhdCBjYWxscyB0aGUgZ2l2ZW4gbWV0aG9kIG9uIGl0cyBvcGVyYW5kLg0KICAgIEFmdGVyIGYgPSBtZXRob2RjYWxsZXIoJ25hbWUnKSwgdGhlIGNhbGwgZihyKSByZXR1cm5zIHIubmFtZSgpLg0KICAgIEFmdGVyIGcgPSBtZXRob2RjYWxsZXIoJ25hbWUnLCAnZGF0ZScsIGZvbz0xKSwgdGhlIGNhbGwgZyhyKSByZXR1cm5zDQogICAgci5uYW1lKCdkYXRlJywgZm9vPTEpLg0KICAgICIiIg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgIHNlbGYuX25hbWUgPSBuYW1lDQogICAgICAgIHNlbGYuX2FyZ3MgPSBhcmdzDQogICAgICAgIHNlbGYuX2t3YXJncyA9IGt3YXJncw0KDQogICAgZGVmIF9fY2FsbF9fKHNlbGYsIG9iaik6DQogICAgICAgIHJldHVybiBnZXRhdHRyKG9iaiwgc2VsZi5fbmFtZSkoKnNlbGYuX2FyZ3MsICoqc2VsZi5fa3dhcmdzKQ0KDQoNCmRlZiBpYWRkKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgKz0gYi4iDQogICAgYSArPSBiDQogICAgcmV0dXJuIGENCl9faWFkZF9fID0gaWFkZA0KDQpkZWYgaWFuZChhLCBiKToNCiAgICAiU2FtZSBhcyBhICY9IGIuIg0KICAgIGEgJj0gYg0KICAgIHJldHVybiBhDQpfX2lhbmRfXyA9IGlhbmQNCg0KZGVmIGljb25jYXQoYSwgYik6DQogICAgIlNhbWUgYXMgYSArPSBiLCBmb3IgYSBhbmQgYiBzZXF1ZW5jZXMuIg0KICAgIGlmIG5vdCAoaGFzYXR0cihhLCAnX19nZXRpdGVtX18nKSBhbmQgaGFzYXR0cihiLCAnX19nZXRpdGVtX18nKSk6DQogICAgICAgIHJhaXNlIFR5cGVFcnJvcignYSBhbmQgYiBtdXN0IGJlIHNlcXVlbmNlcycpDQogICAgYSArPSBiDQogICAgcmV0dXJuIGENCl9faWNvbmNhdF9fID0gaWNvbmNhdA0KDQpkZWYgaWZsb29yZGl2KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgLy89IGIuIg0KICAgIGEgLy89IGINCiAgICByZXR1cm4gYQ0KX19pZmxvb3JkaXZfXyA9IGlmbG9vcmRpdg0KDQpkZWYgaWxzaGlmdChhLCBiKToNCiAgICAiU2FtZSBhcyBhIDw8PSBiLiINCiAgICBhIDw8PSBiDQogICAgcmV0dXJuIGENCl9faWxzaGlmdF9fID0gaWxzaGlmdA0KDQpkZWYgaW1vZChhLCBiKToNCiAgICAiU2FtZSBhcyBhICU9IGIuIg0KICAgIGEgJT0gYg0KICAgIHJldHVybiBhDQpfX2ltb2RfXyA9IGltb2QNCg0KZGVmIGltdWwoYSwgYik6DQogICAgIlNhbWUgYXMgYSAqPSBiLiINCiAgICBhICo9IGINCiAgICByZXR1cm4gYQ0KX19pbXVsX18gPSBpbXVsDQoNCmRlZiBpb3IoYSwgYik6DQogICAgIlNhbWUgYXMgYSB8PSBiLiINCiAgICBhIHw9IGINCiAgICByZXR1cm4gYQ0KX19pb3JfXyA9IGlvcg0KDQpkZWYgaXBvdyhhLCBiKToNCiAgICAiU2FtZSBhcyBhICoqPSBiLiINCiAgICBhICoqPWINCiAgICByZXR1cm4gYQ0KX19pcG93X18gPSBpcG93DQoNCmRlZiBpcnNoaWZ0KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPj49IGIuIg0KICAgIGEgPj49IGINCiAgICByZXR1cm4gYQ0KX19pcnNoaWZ0X18gPSBpcnNoaWZ0DQoNCmRlZiBpc3ViKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgLT0gYi4iDQogICAgYSAtPSBiDQogICAgcmV0dXJuIGENCl9faXN1Yl9fID0gaXN1Yg0KDQpkZWYgaXRydWVkaXYoYSwgYik6DQogICAgIlNhbWUgYXMgYSAvPSBiLiINCiAgICBhIC89IGINCiAgICByZXR1cm4gYQ0KX19pdHJ1ZWRpdl9fID0gaXRydWVkaXYNCg0KZGVmIGl4b3IoYSwgYik6DQogICAgIlNhbWUgYXMgYSBePSBiLiINCiAgICBhIF49IGINCiAgICByZXR1cm4gYQ0KX19peG9yX18gPSBpeG9yDQoNCmRlZiBsZW5ndGhfaGludChvYmosIGRlZmF1bHQ9MCk6DQogICAgIiIiDQogICAgUmV0dXJuIGFuIGVzdGltYXRlIG9mIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gb2JqLg0KICAgIFRoaXMgaXMgdXNlZnVsIGZvciBwcmVzaXppbmcgY29udGFpbmVycyB3aGVuIGJ1aWxkaW5nIGZyb20gYW4gaXRlcmFibGUuDQoNCiAgICBJZiB0aGUgb2JqZWN0IHN1cHBvcnRzIGxlbigpLCB0aGUgcmVzdWx0IHdpbGwgYmUgZXhhY3QuIE90aGVyd2lzZSwgaXQgbWF5DQogICAgb3Zlci0gb3IgdW5kZXItZXN0aW1hdGUgYnkgYW4gYXJiaXRyYXJ5IGFtb3VudC4gVGhlIHJlc3VsdCB3aWxsIGJlIGFuDQogICAgaW50ZWdlciA+PSAwLg0KICAgICIiIg0KICAgIHRyeToNCiAgICAgICAgcmV0dXJuIGxlbihvYmopDQogICAgZXhjZXB0IFR5cGVFcnJvcjoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdmFsID0gb2JqLl9fbGVuZ3RoX2hpbnRfXygpDQogICAgICAgICAgICBpZiB2YWwgaXMgTm90SW1wbGVtZW50ZWQ6DQogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yDQogICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIFR5cGVFcnJvcik6DQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdA0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaWYgbm90IHZhbCA+IDA6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignZGVmYXVsdCBtdXN0IGJlID4gMCcpDQogICAgICAgICAgICByZXR1cm4gdmFsDQoNCiN0cnk6DQojICAgIGZyb20gX29wZXJhdG9yIGltcG9ydCAqDQojICAgIGZyb20gX29wZXJhdG9yIGltcG9ydCBfX2RvY19fDQojZXhjZXB0IEltcG9ydEVycm9yOg0KIyAgIHBhc3MNCg==',
'/Lib/sys.py':'IyBoYWNrIHRvIHJldHVybiBzcGVjaWFsIGF0dHJpYnV0ZXMKZGVmIF9fZ2V0YXR0cl9fKE5vbmUsYXR0cik6CiAgICBpZiBhdHRyPT0nbW9kdWxlcyc6CiAgICAgICAgcmV0dXJuIGRpY3QoSlNPYmplY3QoX19CUllUSE9OX18uaW1wb3J0ZWQpKQogICAgZWxzZToKICAgICAgICByYWlzZSBJbXBvcnRFcnJvcigiY2Fubm90IGltcG9ydCBuYW1lICIrYXR0cikKCmZyb20gYnJvd3NlciBpbXBvcnQgZG9jCl9fc3Rkb3V0X189Z2V0YXR0cihkb2MsIiRzdGRvdXQiKQpfX3N0ZGVycl9fPWdldGF0dHIoZG9jLCIkc3RkZXJyIikKCnN0ZG91dCA9IGdldGF0dHIoZG9jLCIkc3Rkb3V0IikKc3RkZXJyID0gZ2V0YXR0cihkb2MsIiRzdGRlcnIiKQoKaGFzX2xvY2FsX3N0b3JhZ2U9X19CUllUSE9OX18uaGFzX2xvY2FsX3N0b3JhZ2UKaGFzX2pzb249X19CUllUSE9OX18uaGFzX2pzb24KCmFyZ3YgPSBbJ19fbWFpbl9fJ10KCmNsYXNzIF9fdmVyc2lvbl9pbmZvKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgdmVyc2lvbl9pbmZvKToKICAgICAgICBzZWxmLnZlcnNpb25faW5mbyA9IHZlcnNpb25faW5mbwogICAgICAgIHNlbGYubWFqb3IgPSB2ZXJzaW9uX2luZm9bMF0KICAgICAgICBzZWxmLm1pbm9yID0gdmVyc2lvbl9pbmZvWzFdCiAgICAgICAgc2VsZi5taWNybyA9IHZlcnNpb25faW5mb1syXQogICAgICAgIHNlbGYucmVsZWFzZWxldmVsID0gdmVyc2lvbl9pbmZvWzNdCiAgICAgICAgc2VsZi5zZXJpYWwgPSB2ZXJzaW9uX2luZm9bNF0KCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaW5kZXgpOgogICAgICAgIHJldHVybiBzZWxmLnZlcnNpb25faW5mb1tpbmRleF0KCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc3RyKHNlbGYudmVyc2lvbl9pbmZvKQogICAgIAp2ZXJzaW9uX2luZm89X192ZXJzaW9uX2luZm8oX19CUllUSE9OX18udmVyc2lvbl9pbmZvKQpwYXRoPV9fQlJZVEhPTl9fLnBhdGgKYnVpbHRpbl9tb2R1bGVfbmFtZXM9Wydwb3NpeCddCgpieXRlb3JkZXI9J2xpdHRsZScKbWF4c2l6ZT05MDA3MTk5MjU0NzQwOTkyICAgI2xhcmdlc3QgaW50ZWdlci4uCm1heGludD05MDA3MTk5MjU0NzQwOTkyICAgI2xhcmdlc3QgaW50ZWdlci4uCm1heHVuaWNvZGU9MTExNDExMQoKcGxhdGZvcm09ImJyeXRob24iCndhcm5vcHRpb25zPVtdCgpjbGFzcyBmbGFnX2NsYXNzOgogIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgc2VsZi5kZWJ1Zz0wCiAgICAgIHNlbGYuaW5zcGVjdD0wCiAgICAgIHNlbGYuaW50ZXJhY3RpdmU9MAogICAgICBzZWxmLm9wdGltaXplPTAKICAgICAgc2VsZi5kb250X3dyaXRlX2J5dGVjb2RlPTAKICAgICAgc2VsZi5ub191c2VyX3NpdGU9MAogICAgICBzZWxmLm5vX3NpdGU9MAogICAgICBzZWxmLmlnbm9yZV9lbnZpcm9ubWVudD0wCiAgICAgIHNlbGYudmVyYm9zZT0wCiAgICAgIHNlbGYuYnl0ZXNfd2FybmluZz0wCiAgICAgIHNlbGYucXVpZXQ9MAogICAgICBzZWxmLmhhc2hfcmFuZG9taXphdGlvbj0xCgpmbGFncz1mbGFnX2NsYXNzKCkKCmRlZiBleGl0KGk9Tm9uZSk6CiAgICByYWlzZSBTeXN0ZW1FeGl0KCcnKQo=',
'/Lib/io.py':'aW1wb3J0IGJ1aWx0aW5zCgpvcGVuID0gYnVpbHRpbnMub3BlbgoKY2xhc3MgU3RyaW5nSU86CgogICAgZGVmIF9faW5pdF9fKHNlbGYsaW5pdGlhbF92YWx1ZT0nJyxuZXdsaW5lPU5vbmUpOgogICAgICAgIHNlbGYudmFsdWUgPSBpbml0aWFsX3ZhbHVlCiAgICAgICAgc2VsZi5uZXdsaW5lID0gbmV3bGluZQogICAgICAgIHNlbGYuX3BvcyA9IGxlbihpbml0aWFsX3ZhbHVlKQogICAgCiAgICBkZWYgd3JpdGUoc2VsZixkYXRhKToKICAgICAgICBzZWxmLnZhbHVlICs9IGRhdGEKICAgIAogICAgZGVmIHJlYWQoc2VsZixuYj0tMSk6CiAgICAgICAgaWYgbmIhPS0xOgogICAgICAgICAgICByZXMgPSBzZWxmLnZhbHVlW3NlbGYuX3BvczpzZWxmLl9wb3MrbmJdCiAgICAgICAgICAgIHNlbGYuX3BvcyA9IG1pbihzZWxmLl9wb3MrbmIsbGVuKHNlbGYudmFsdWUpLTEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVzID0gc2VsZi52YWx1ZVtzZWxmLl9wb3M6XQogICAgICAgICAgICBzZWxmLl9wb3MgPSBsZW4oc2VsZi52YWx1ZSktMQogICAgICAgIHJldHVybiByZXMK',
'/Lib/os.py':'aW1wb3J0IF9vcwoKaW1wb3J0IHBvc2l4cGF0aCBhcyBwYXRoCgpuYW1lPSJicnl0aG9uIgoKI2FsdHNlcD1Ob25lCiNjdXJkaXI9Ii4iCgpkZWYgZGV2bnVsbCgpOgogICAgT1NFcnJvcignRnVuY3Rpb24gZGV2bnVsbCBub3Qgc3VwcG9ydGVkJykKCiNleHRzZXA9Jy4nCgpkZWYgZ2V0bG9hZGF2ZygpOgogICAgT1NFcnJvcignRnVuY3Rpb24gZ2V0bG9hZGF2ZyBub3Qgc3VwcG9ydGVkJykKCiNsaW5lc2VwPSJcbiIKI3BhdGhzZXA9IjsiCiNwYXJkaXI9Ii4uIgojc2VwPScvJwoKZGVmIHVyYW5kb20obGVuZ3RoKToKICAgIF9jPVtdCiAgICBmb3IgX2kgaW4gcmFuZ2UobGVuZ3RoKToKICAgICAgICBfYy5hcHBlbmQoY2hyKF9vcy5yYW5kaW50KDAsMjU1KSkpCiAgICAgICAgCiAgICByZXR1cm4gJycuam9pbihfYykKCiNpbXBvcnQgcG9zaXhwYXRoIGFzIHBhdGgKI3N5cy5tb2R1bGVzWydvcy5wYXRoJ10gPSBwYXRoCgojZnJvbSBvcy5wYXRoIGltcG9ydCAoY3VyZGlyLCBwYXJkaXIsIHNlcCwgcGF0aHNlcCwgZGVmcGF0aCwgZXh0c2VwLCBhbHRzZXApCgojIFB5dGhvbiB1c2VzIGZpeGVkIHZhbHVlcyBmb3IgdGhlIFNFRUtfIGNvbnN0YW50czsgdGhleSBhcmUgbWFwcGVkCiMgdG8gbmF0aXZlIGNvbnN0YW50cyBpZiBuZWNlc3NhcnkgaW4gcG9zaXhtb2R1bGUuYwpTRUVLX1NFVCA9IDAKU0VFS19DVVIgPSAxClNFRUtfRU5EID0gMgoKZGVmIHdhbGsodG9wLCB0b3Bkb3duPVRydWUsIG9uZXJyb3I9Tm9uZSwgZm9sbG93bGlua3M9RmFsc2UpOgogICAgI3JlY2VpdmUgc2NvcGUgZXJyb3IgaW4gYnJ5dGhvbgogICAgIyB3aHkgaGF2ZSBvcy53YWxrIGluIGJyeXRob24/ICBzZXJ2ZXIgc2lkZSBqYXZhc2NyaXB0IChub2RlanMpCiAgICAjIGltbWVkaWF0ZWx5IGNhbiB1c2Ugb3Mud2FsayB0byBjb21waWxlIGxpYnMgYW5kIExpYiBtb2R1bGVzCiAgICAjIHRvIGphdmFzY3JpcHQgZXF1aXZhbGVudC4uCiAgICBPU0Vycm9yKCdGdW5jdGlvbiBvcy53YWxrIG5vdCBzdXBwb3J0ZWQgeWV0JykKICAgIHJldHVybgoKICAgICIiIkRpcmVjdG9yeSB0cmVlIGdlbmVyYXRvci4KCiAgICBGb3IgZWFjaCBkaXJlY3RvcnkgaW4gdGhlIGRpcmVjdG9yeSB0cmVlIHJvb3RlZCBhdCB0b3AgKGluY2x1ZGluZyB0b3AKICAgIGl0c2VsZiwgYnV0IGV4Y2x1ZGluZyAnLicgYW5kICcuLicpLCB5aWVsZHMgYSAzLXR1cGxlCgogICAgICAgIGRpcnBhdGgsIGRpcm5hbWVzLCBmaWxlbmFtZXMKCiAgICBkaXJwYXRoIGlzIGEgc3RyaW5nLCB0aGUgcGF0aCB0byB0aGUgZGlyZWN0b3J5LiAgZGlybmFtZXMgaXMgYSBsaXN0IG9mCiAgICB0aGUgbmFtZXMgb2YgdGhlIHN1YmRpcmVjdG9yaWVzIGluIGRpcnBhdGggKGV4Y2x1ZGluZyAnLicgYW5kICcuLicpLgogICAgZmlsZW5hbWVzIGlzIGEgbGlzdCBvZiB0aGUgbmFtZXMgb2YgdGhlIG5vbi1kaXJlY3RvcnkgZmlsZXMgaW4gZGlycGF0aC4KICAgIE5vdGUgdGhhdCB0aGUgbmFtZXMgaW4gdGhlIGxpc3RzIGFyZSBqdXN0IG5hbWVzLCB3aXRoIG5vIHBhdGggY29tcG9uZW50cy4KICAgIFRvIGdldCBhIGZ1bGwgcGF0aCAod2hpY2ggYmVnaW5zIHdpdGggdG9wKSB0byBhIGZpbGUgb3IgZGlyZWN0b3J5IGluCiAgICBkaXJwYXRoLCBkbyBvcy5wYXRoLmpvaW4oZGlycGF0aCwgbmFtZSkuCgogICAgSWYgb3B0aW9uYWwgYXJnICd0b3Bkb3duJyBpcyB0cnVlIG9yIG5vdCBzcGVjaWZpZWQsIHRoZSB0cmlwbGUgZm9yIGEKICAgIGRpcmVjdG9yeSBpcyBnZW5lcmF0ZWQgYmVmb3JlIHRoZSB0cmlwbGVzIGZvciBhbnkgb2YgaXRzIHN1YmRpcmVjdG9yaWVzCiAgICAoZGlyZWN0b3JpZXMgYXJlIGdlbmVyYXRlZCB0b3AgZG93bikuICBJZiB0b3Bkb3duIGlzIGZhbHNlLCB0aGUgdHJpcGxlCiAgICBmb3IgYSBkaXJlY3RvcnkgaXMgZ2VuZXJhdGVkIGFmdGVyIHRoZSB0cmlwbGVzIGZvciBhbGwgb2YgaXRzCiAgICBzdWJkaXJlY3RvcmllcyAoZGlyZWN0b3JpZXMgYXJlIGdlbmVyYXRlZCBib3R0b20gdXApLgoKICAgIFdoZW4gdG9wZG93biBpcyB0cnVlLCB0aGUgY2FsbGVyIGNhbiBtb2RpZnkgdGhlIGRpcm5hbWVzIGxpc3QgaW4tcGxhY2UKICAgIChlLmcuLCB2aWEgZGVsIG9yIHNsaWNlIGFzc2lnbm1lbnQpLCBhbmQgd2FsayB3aWxsIG9ubHkgcmVjdXJzZSBpbnRvIHRoZQogICAgc3ViZGlyZWN0b3JpZXMgd2hvc2UgbmFtZXMgcmVtYWluIGluIGRpcm5hbWVzOyB0aGlzIGNhbiBiZSB1c2VkIHRvIHBydW5lCiAgICB0aGUgc2VhcmNoLCBvciB0byBpbXBvc2UgYSBzcGVjaWZpYyBvcmRlciBvZiB2aXNpdGluZy4gIE1vZGlmeWluZwogICAgZGlybmFtZXMgd2hlbiB0b3Bkb3duIGlzIGZhbHNlIGlzIGluZWZmZWN0aXZlLCBzaW5jZSB0aGUgZGlyZWN0b3JpZXMgaW4KICAgIGRpcm5hbWVzIGhhdmUgYWxyZWFkeSBiZWVuIGdlbmVyYXRlZCBieSB0aGUgdGltZSBkaXJuYW1lcyBpdHNlbGYgaXMKICAgIGdlbmVyYXRlZC4KCiAgICBCeSBkZWZhdWx0IGVycm9ycyBmcm9tIHRoZSBvcy5saXN0ZGlyKCkgY2FsbCBhcmUgaWdub3JlZC4gIElmCiAgICBvcHRpb25hbCBhcmcgJ29uZXJyb3InIGlzIHNwZWNpZmllZCwgaXQgc2hvdWxkIGJlIGEgZnVuY3Rpb247IGl0CiAgICB3aWxsIGJlIGNhbGxlZCB3aXRoIG9uZSBhcmd1bWVudCwgYW4gb3MuZXJyb3IgaW5zdGFuY2UuICBJdCBjYW4KICAgIHJlcG9ydCB0aGUgZXJyb3IgdG8gY29udGludWUgd2l0aCB0aGUgd2Fsaywgb3IgcmFpc2UgdGhlIGV4Y2VwdGlvbgogICAgdG8gYWJvcnQgdGhlIHdhbGsuICBOb3RlIHRoYXQgdGhlIGZpbGVuYW1lIGlzIGF2YWlsYWJsZSBhcyB0aGUKICAgIGZpbGVuYW1lIGF0dHJpYnV0ZSBvZiB0aGUgZXhjZXB0aW9uIG9iamVjdC4KCiAgICBCeSBkZWZhdWx0LCBvcy53YWxrIGRvZXMgbm90IGZvbGxvdyBzeW1ib2xpYyBsaW5rcyB0byBzdWJkaXJlY3RvcmllcyBvbgogICAgc3lzdGVtcyB0aGF0IHN1cHBvcnQgdGhlbS4gIEluIG9yZGVyIHRvIGdldCB0aGlzIGZ1bmN0aW9uYWxpdHksIHNldCB0aGUKICAgIG9wdGlvbmFsIGFyZ3VtZW50ICdmb2xsb3dsaW5rcycgdG8gdHJ1ZS4KCiAgICBDYXV0aW9uOiAgaWYgeW91IHBhc3MgYSByZWxhdGl2ZSBwYXRobmFtZSBmb3IgdG9wLCBkb24ndCBjaGFuZ2UgdGhlCiAgICBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5IGJldHdlZW4gcmVzdW1wdGlvbnMgb2Ygd2Fsay4gIHdhbGsgbmV2ZXIKICAgIGNoYW5nZXMgdGhlIGN1cnJlbnQgZGlyZWN0b3J5LCBhbmQgYXNzdW1lcyB0aGF0IHRoZSBjbGllbnQgZG9lc24ndAogICAgZWl0aGVyLgoKICAgIEV4YW1wbGU6CgogICAgaW1wb3J0IG9zCiAgICBmcm9tIG9zLnBhdGggaW1wb3J0IGpvaW4sIGdldHNpemUKICAgIGZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKCdweXRob24vTGliL2VtYWlsJyk6CiAgICAgICAgcHJpbnQocm9vdCwgImNvbnN1bWVzIiwgZW5kPSIiKQogICAgICAgIHByaW50KHN1bShbZ2V0c2l6ZShqb2luKHJvb3QsIG5hbWUpKSBmb3IgbmFtZSBpbiBmaWxlc10pLCBlbmQ9IiIpCiAgICAgICAgcHJpbnQoImJ5dGVzIGluIiwgbGVuKGZpbGVzKSwgIm5vbi1kaXJlY3RvcnkgZmlsZXMiKQogICAgICAgIGlmICdDVlMnIGluIGRpcnM6CiAgICAgICAgICAgIGRpcnMucmVtb3ZlKCdDVlMnKSAgIyBkb24ndCB2aXNpdCBDVlMgZGlyZWN0b3JpZXMKICAgICIiIgogICAgIiIiCiAgICAKICAgIGlzbGluaywgam9pbiwgaXNkaXIgPSBwYXRoLmlzbGluaywgcGF0aC5qb2luLCBwYXRoLmlzZGlyCgogICAgIyBXZSBtYXkgbm90IGhhdmUgcmVhZCBwZXJtaXNzaW9uIGZvciB0b3AsIGluIHdoaWNoIGNhc2Ugd2UgY2FuJ3QKICAgICMgZ2V0IGEgbGlzdCBvZiB0aGUgZmlsZXMgdGhlIGRpcmVjdG9yeSBjb250YWlucy4gIG9zLndhbGsKICAgICMgYWx3YXlzIHN1cHByZXNzZWQgdGhlIGV4Y2VwdGlvbiB0aGVuLCByYXRoZXIgdGhhbiBibG93IHVwIGZvciBhCiAgICAjIG1pbm9yIHJlYXNvbiB3aGVuIChzYXkpIGEgdGhvdXNhbmQgcmVhZGFibGUgZGlyZWN0b3JpZXMgYXJlIHN0aWxsCiAgICAjIGxlZnQgdG8gdmlzaXQuICBUaGF0IGxvZ2ljIGlzIGNvcGllZCBoZXJlLgogICAgdHJ5OgogICAgICAgICMgTm90ZSB0aGF0IGxpc3RkaXIgYW5kIGVycm9yIGFyZSBnbG9iYWxzIGluIHRoaXMgbW9kdWxlIGR1ZQogICAgICAgICMgdG8gZWFybGllciBpbXBvcnQtKi4KICAgICAgICBuYW1lcyA9IGxpc3RkaXIodG9wKQogICAgZXhjZXB0IGVycm9yIGFzIGVycjoKICAgICAgICBpZiBvbmVycm9yIGlzIG5vdCBOb25lOgogICAgICAgICAgICBvbmVycm9yKGVycikKICAgICAgICByZXR1cm4KICAgIAogICAgZGlycywgbm9uZGlycyA9IFtdLCBbXQogICAgZm9yIG5hbWUgaW4gbmFtZXM6CiAgICAgICAgaWYgaXNkaXIoam9pbih0b3AsIG5hbWUpKToKICAgICAgICAgICAgZGlycy5hcHBlbmQobmFtZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBub25kaXJzLmFwcGVuZChuYW1lKQogICAgCiAgICBpZiB0b3Bkb3duOgogICAgICAgIHlpZWxkIHRvcCwgZGlycywgbm9uZGlycwogICAgCiAgICBmb3IgbmFtZSBpbiBkaXJzOgogICAgICAgIG5ld19wYXRoID0gam9pbih0b3AsIG5hbWUpCiAgICAgICAgaWYgZm9sbG93bGlua3Mgb3Igbm90IGlzbGluayhuZXdfcGF0aCk6CiAgICAgICAgICAgIGZvciB4IGluIHdhbGsobmV3X3BhdGgsIHRvcGRvd24sIG9uZXJyb3IsIGZvbGxvd2xpbmtzKToKICAgICAgICAgICAgICAgIHlpZWxkIHgKICAgIGlmIG5vdCB0b3Bkb3duOgogICAgICAgIHlpZWxkIHRvcCwgZGlycywgbm9uZGlycwogICAgIiIiCgojY2xhc3MgX3BhdGg6CgojICAgIGRlZiBiYXNlbmFtZShzZWxmLGFyZyk6CiMgICAgICAgIHJldHVybiBhcmcKCiNwYXRoID0gX3BhdGgoKQplbnZpcm9uID0ge30K',
'/Lib/browser/markdown.py':'aW1wb3J0IGJyb3dzZXIuaHRtbAppbXBvcnQgcmUKCmNsYXNzIFVSTDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLHNyYyk6CiAgICAgICAgZWx0cyA9IHNyYy5zcGxpdChtYXhzcGxpdD0xKQogICAgICAgIHNlbGYuaHJlZiA9IGVsdHNbMF0KICAgICAgICBzZWxmLmFsdCA9ICcnCiAgICAgICAgaWYgbGVuKGVsdHMpPT0yOgogICAgICAgICAgICBhbHQgPSBlbHRzWzFdCiAgICAgICAgICAgIGlmIGFsdFswXT09JyInIGFuZCBhbHRbLTFdPT0nIic6c2VsZi5hbHQ9YWx0WzE6LTFdCiAgICAgICAgICAgIGVsaWYgYWx0WzBdPT0iJyIgYW5kIGFsdFstMV09PSInIjpzZWxmLmFsdD1hbHRbMTotMV0KICAgICAgICAgICAgZWxpZiBhbHRbMF09PSIoIiBhbmQgYWx0Wy0xXT09IikiOnNlbGYuYWx0PWFsdFsxOi0xXQogICAgICAgIApjbGFzcyBDb2RlQmxvY2s6CiAgICBkZWYgX19pbml0X18oc2VsZixsaW5lKToKICAgICAgICBzZWxmLmxpbmVzID0gW2xpbmVdCiAgICAKICAgIGRlZiB0b19odG1sKHNlbGYpOgogICAgICAgIHJlcyA9IGVzY2FwZSgnXG4nLmpvaW4oc2VsZi5saW5lcykpCiAgICAgICAgcmVzID0gdW5tYXJrKHJlcykKICAgICAgICByZXMgPSAnPHByZSBjbGFzcz0ibWFya2VkIj4lczwvcHJlPlxuJyAlcmVzCiAgICAgICAgcmV0dXJuIHJlcyxbXQoKY2xhc3MgTWFya2VkOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYubGluZXMgPSBbXQogICAgICAgIHNlbGYuY2hpbGRyZW4gPSBbXQoKICAgIGRlZiB0b19odG1sKHNlbGYpOgogICAgICAgIHJldHVybiBhcHBseV9tYXJrZG93bignXG4nLmpvaW4oc2VsZi5saW5lcykpCiAgICAgICAgCiMgZ2V0IHJlZmVyZW5jZXMKcmVmcyA9IHt9CnJlZl9wYXR0ZXJuID0gciJeXFsoLiopXF06XHMrKC4qKSIKCmRlZiBtYXJrKHNyYyk6CgogICAgZ2xvYmFsIHJlZnMKICAgIHJlZnMgPSB7fQogICAgIyBzcGxpdCBzb3VyY2UgaW4gc2VjdGlvbnMKICAgICMgc2VjdGlvbnMgY2FuIGJlIDoKICAgICMgLSBhIGJsb2NrLWxldmVsIEhUTUwgZWxlbWVudCAobWFya2Rvd24gc3ludGF4IHdpbGwgbm90IGJlIHByb2Nlc3NlZCkKICAgICMgLSBhIHNjcmlwdAogICAgIyAtIGEgc3Bhbi1sZXZlbCBIVE1MIHRhZyAobWFya2Rvd24gc3ludGF4IHdpbGwgYmUgcHJvY2Vzc2VkKQogICAgIyAtIGEgY29kZSBibG9jawogICAgCiAgICBsaW5lcyA9IHNyYy5zcGxpdCgnXG4nKQogICAgCiAgICBzZWN0aW9ucyA9IFtdCiAgICBzY3JpcHRzID0gW10KICAgIHNlY3Rpb24gPSBNYXJrZWQoKQoKICAgIGkgPSAwCiAgICB3aGlsZSBpPGxlbihsaW5lcyk6CiAgICAgICAgbGluZSA9IGxpbmVzW2ldCiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWN0aW9uLE1hcmtlZCk6CiAgICAgICAgICAgIGlmIGxpbmUubG93ZXIoKS5zdGFydHN3aXRoKCc8c2NyaXB0Jyk6CiAgICAgICAgICAgICAgICBqID0gaSsxCiAgICAgICAgICAgICAgICB3aGlsZSBqPGxlbihsaW5lcyk6CiAgICAgICAgICAgICAgICAgICAgaWYgbGluZXNbal0ubG93ZXIoKS5zdGFydHN3aXRoKCc8L3NjcmlwdD4nKToKICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0cy5hcHBlbmQoJ1xuJy5qb2luKGxpbmVzW2krMTpqXSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBrIGluIHJhbmdlKGksaisxKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzW2tdID0gJycKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgIGkgPSBqKzEKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGxpbmUuc3RyaXAoKSBhbmQgbGluZS5zdGFydHN3aXRoKCcgICAgJyk6CiAgICAgICAgICAgICAgICBpZiBzZWN0aW9uLmxpbmVzOgogICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zLmFwcGVuZChzZWN0aW9uKQogICAgICAgICAgICAgICAgc2VjdGlvbiA9IENvZGVCbG9jayhsaW5lWzQ6XSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG1vID0gcmUuc2VhcmNoKHJlZl9wYXR0ZXJuLGxpbmUpCiAgICAgICAgICAgICAgICBpZiBtbyBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBrZXkgPSBtby5ncm91cHMoKVswXQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gVVJMKG1vLmdyb3VwcygpWzFdKQogICAgICAgICAgICAgICAgICAgIHJlZnNba2V5Lmxvd2VyKCldID0gdmFsdWUKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5saW5lcy5hcHBlbmQobGluZSkKICAgICAgICBlbGlmIGlzaW5zdGFuY2Uoc2VjdGlvbixDb2RlQmxvY2spOgogICAgICAgICAgICBpZiBsaW5lLnN0YXJ0c3dpdGgoJyAgICAnKSBvciBub3QgbGluZS5zdHJpcCgpOgogICAgICAgICAgICAgICAgc2VjdGlvbi5saW5lcy5hcHBlbmQobGluZVs0Ol0pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWN0aW9ucy5hcHBlbmQoc2VjdGlvbikKICAgICAgICAgICAgICAgIHNlY3Rpb24gPSBNYXJrZWQoKSAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHNlY3Rpb24ubGluZXMuYXBwZW5kKGxpbmUpCiAgICAgICAgaSArPSAxCiAgICBpZiBzZWN0aW9uLmxpbmVzOgogICAgICAgIHNlY3Rpb25zLmFwcGVuZChzZWN0aW9uKQoKICAgIHJlcyA9ICcnCiAgICBmb3Igc2VjdGlvbiBpbiBzZWN0aW9uczoKICAgICAgICBtayxfc2NyaXB0cyA9IHNlY3Rpb24udG9faHRtbCgpCiAgICAgICAgcmVzICs9IG1rCiAgICAgICAgc2NyaXB0cyArPSBfc2NyaXB0cwogICAgcmV0dXJuIHJlcyxzY3JpcHRzCgpkZWYgZXNjYXBlKGN6b25lKToKICAgIGN6b25lID0gY3pvbmUucmVwbGFjZSgnJicsJyZhbXA7JykKICAgIGN6b25lID0gY3pvbmUucmVwbGFjZSgnPCcsJyZsdDsnKQogICAgY3pvbmUgPSBjem9uZS5yZXBsYWNlKCc+JywnJmd0OycpCiAgICByZXR1cm4gY3pvbmUKCmRlZiBzX2VzY2FwZShtbyk6CiAgICAjIHVzZWQgaW4gcmUuc3ViCiAgICBjem9uZSA9IG1vLnN0cmluZ1ttby5zdGFydCgpOm1vLmVuZCgpXQogICAgcmV0dXJuIGVzY2FwZShjem9uZSkKCmRlZiB1bm1hcmsoY29kZV96b25lKToKICAgICMgY29udmVydCBfIHRvICYjOTU7IGluc2lkZSBpbmxpbmUgY29kZQogICAgY29kZV96b25lID0gY29kZV96b25lLnJlcGxhY2UoJ18nLCcmIzk1OycpCiAgICByZXR1cm4gY29kZV96b25lCgpkZWYgc191bm1hcmsobW8pOgogICAgIyBjb252ZXJ0IF8gdG8gJiM5NTsgaW5zaWRlIGlubGluZSBjb2RlCiAgICBjb2RlX3pvbmUgPSBtby5zdHJpbmdbbW8uc3RhcnQoKTptby5lbmQoKV0KICAgIGNvZGVfem9uZSA9IGNvZGVfem9uZS5yZXBsYWNlKCdfJywnJiM5NTsnKQogICAgcmV0dXJuIGNvZGVfem9uZQoKZGVmIGFwcGx5X21hcmtkb3duKHNyYyk6CgogICAgc2NyaXB0cyA9IFtdCgogICAgIyBibG9ja3F1b3RlcwogICAgbGluZXMgPSBzcmMuc3BsaXQoJ1xuJykKICAgIHdoaWxlIFRydWU6CiAgICAgICAgbmIgPSAwCiAgICAgICAgaSA9IDAKICAgICAgICB3aGlsZSBpPGxlbihsaW5lcyk6CiAgICAgICAgICAgIGlmIGxpbmVzW2ldLnN0YXJ0c3dpdGgoJz4nKToKICAgICAgICAgICAgICAgIGhlYWQgPSAnXG4nLmpvaW4obGluZXNbOmldKQogICAgICAgICAgICAgICAgYnFsaW5lcyA9IFtdCiAgICAgICAgICAgICAgICBuYiArPSAxCiAgICAgICAgICAgICAgICByZXN0ID0gbGluZXNbaV1bMTpdCiAgICAgICAgICAgICAgICBpZiByZXN0LmxzdHJpcCgpLnN0YXJ0c3dpdGgoJz4nKToKICAgICAgICAgICAgICAgICAgICByZXN0ID0gcmVzdC5sc3RyaXAoKQogICAgICAgICAgICAgICAgYnFsaW5lcy5hcHBlbmQocmVzdCkKICAgICAgICAgICAgICAgIGogPSBpKzEKICAgICAgICAgICAgICAgIHdoaWxlIGo8bGVuKGxpbmVzKToKICAgICAgICAgICAgICAgICAgICBpZiBsaW5lc1tqXS5zdGFydHN3aXRoKCc+Jyk6CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3QgPSBsaW5lc1tqXVsxOl0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVzdC5sc3RyaXAoKS5zdGFydHN3aXRoKCc+Jyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN0ID0gcmVzdC5sc3RyaXAoKQogICAgICAgICAgICAgICAgICAgICAgICBicWxpbmVzLmFwcGVuZChyZXN0KQogICAgICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgICAgICBlbGlmIGxpbmVzW2pdLnN0cmlwKCkgYW5kIGxpbmVzW2pdWzBdIT0nICc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJxbGluZXMuYXBwZW5kKGxpbmVzW2pdKQogICAgICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgIyBicWxpbmVzIGhvbGRzIHRoZSBsaW5lcyBpbiB0aGUgYmxvY2txdW90ZSwgc3RyaXBwZWQgb2YKICAgICAgICAgICAgICAgICMgdGhlIGxlYWRpbmcgPgogICAgICAgICAgICAgICAgIyB3ZSBhcHBseSB0aGUgd2hvbGUgbWFya2Rvd24gcHJvY2VzcyB0byB0aGVzZSBsaW5lcwogICAgICAgICAgICAgICAgbWssX3NjcmlwdHMgPSBtYXJrKCdcbicuam9pbihicWxpbmVzKSkKICAgICAgICAgICAgICAgIHNjcmlwdHMgKz0gX3NjcmlwdHMKICAgICAgICAgICAgICAgIHNyYyA9IGhlYWQKICAgICAgICAgICAgICAgIHNyYyArPSAnXG48YmxvY2txdW90ZT4nICsgbWsgKyAnPC9ibG9ja3F1b3RlPicKICAgICAgICAgICAgICAgIHNyYyArPSAnXG4nLmpvaW4obGluZXNbajpdKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgaSArPSAxCiAgICAgICAgaWYgbmI9PTA6YnJlYWsKICAgICAgICBsaW5lcyA9IHNyYy5zcGxpdGxpbmVzKCkKCiAgICAjIHJlcGxhY2UgXGAgYnkgJiM5NjsKICAgIHNyYyA9IHJlLnN1YihyJ1xcXGAnLCcmIzk2Oycsc3JjKQoKICAgICMgZXNjYXBlIDwgPiAmIGluIGlubGluZSBjb2RlCiAgICBjb2RlX3BhdHRlcm4gPSByJ1xgKFxTLio/XFMpXGAnCiAgICBzcmMgPSByZS5zdWIoY29kZV9wYXR0ZXJuLHNfZXNjYXBlLHNyYykKICAgICMgYWxzbyBjb252ZXJ0IF8KICAgIHNyYyA9IHJlLnN1Yihjb2RlX3BhdHRlcm4sc191bm1hcmssc3JjKQogICAgCiAgICAjIGlubGluZSBsaW5rcwogICAgbGlua19wYXR0ZXJuMSA9IHInXFsoLis/KVxdXHM/XCgoLis/KVwpJwogICAgZGVmIHJlcGwobW8pOgogICAgICAgIGcxLGcyID0gbW8uZ3JvdXBzKCkKICAgICAgICBnMiA9IHJlLnN1YignXycsJyYjOTU7JyxnMikKICAgICAgICByZXR1cm4gJzxhIGhyZWY9IiVzIj4lczwvYT4nICUoZzIsZzEpCiAgICBzcmMgPSByZS5zdWIobGlua19wYXR0ZXJuMSxyZXBsLHNyYykKCiAgICAjIHJlZmVyZW5jZSBsaW5rcwogICAgbGlua19wYXR0ZXJuMiA9IHInXFsoLis/KVxdXHM/XFsoLio/KVxdJwogICAgd2hpbGUgVHJ1ZToKICAgICAgICBtbyA9IHJlLnNlYXJjaChsaW5rX3BhdHRlcm4yLHNyYykKICAgICAgICBpZiBtbyBpcyBOb25lOmJyZWFrCiAgICAgICAgdGV4dCxrZXkgPSBtby5ncm91cHMoKQogICAgICAgIHByaW50KHRleHQsa2V5KQogICAgICAgIGlmIG5vdCBrZXk6a2V5PXRleHQgIyBpbXBsaWNpdCBsaW5rIG5hbWUKICAgICAgICBpZiBrZXkubG93ZXIoKSBub3QgaW4gcmVmczoKICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3IoJ3Vua25vdyByZWZlcmVuY2UgJXMnICVrZXkpCiAgICAgICAgdXJsID0gcmVmc1trZXkubG93ZXIoKV0KICAgICAgICByZXBsID0gJzxhIGhyZWY9IicrdXJsLmhyZWYrJyInCiAgICAgICAgaWYgdXJsLmFsdDoKICAgICAgICAgICAgcmVwbCArPSAnIHRpdGxlPSInK3VybC5hbHQrJyInCiAgICAgICAgcmVwbCArPSAnPiVzPC9hPicgJXRleHQKICAgICAgICBzcmMgPSByZS5zdWIobGlua19wYXR0ZXJuMixyZXBsLHNyYyxjb3VudD0xKQoKICAgICMgZW1waGFzaXMKCiAgICAjIHJlcGxhY2UgXCogYnkgJiM0MjsKICAgIHNyYyA9IHJlLnN1YihyJ1xcXConLCcmIzQyOycsc3JjKQogICAgIyByZXBsYWNlIFxfIGJ5ICYjOTU7CiAgICBzcmMgPSByZS5zdWIocidcXFxfJywnJiM5NTsnLHNyYykKICAgICMgXyBhbmQgKiBzdXJyb3VuZGVkIGJ5IHNwYWNlcyBhcmUgbm90IG1hcmt1cAogICAgc3JjID0gcmUuc3ViKHInIF8gJywnICYjOTU7ICcsc3JjKQogICAgc3JjID0gcmUuc3ViKHInIFwqICcsJyAmIzQyOyAnLHNyYykKCiAgICBzdHJvbmdfcGF0dGVybnMgPSBbKCdTVFJPTkcnLHInXCpcKiguKj8pXCpcKicpLCgnQicscidfXyguKj8pX18nKV0KICAgIGZvciB0YWcsc3Ryb25nX3BhdHRlcm4gaW4gc3Ryb25nX3BhdHRlcm5zOgogICAgICAgIHNyYyA9IHJlLnN1YihzdHJvbmdfcGF0dGVybixyJzwlcz5cMTwvJXM+JyAlKHRhZyx0YWcpLHNyYykKCiAgICBlbV9wYXR0ZXJucyA9IFsoJ0VNJyxyJ1wqKC4qPylcKicpLCgnSScscidcXyguKj8pXF8nKV0KICAgIGZvciB0YWcsZW1fcGF0dGVybiBpbiBlbV9wYXR0ZXJuczoKICAgICAgICBzcmMgPSByZS5zdWIoZW1fcGF0dGVybixyJzwlcz5cMTwvJXM+JyAlKHRhZyx0YWcpLHNyYykKCiAgICAjIGlubGluZSBjb2RlCiAgICAjIHJlcGxhY2UgXGAgYnkgJiM5NjsKICAgIHNyYyA9IHJlLnN1YihyJ1xcXGAnLCcmIzk2Oycsc3JjKQoKICAgIGNvZGVfcGF0dGVybiA9IHInXGAoLio/KVxgJwogICAgc3JjID0gcmUuc3ViKGNvZGVfcGF0dGVybixyJzxjb2RlPlwxPC9jb2RlPicsc3JjKQoKICAgICMgdW5vcmRlcmVkIGxpc3RzCiAgICBsaW5lcyA9IHNyYy5zcGxpdCgnXG4nKQogICAgd2hpbGUgVHJ1ZToKICAgICAgICBuYiA9IDAKICAgICAgICBpID0gMAogICAgICAgIHdoaWxlIGk8bGVuKGxpbmVzKToKICAgICAgICAgICAgbW8gPSByZS5zZWFyY2gocideKCAqWysqLV0pJyxsaW5lc1tpXSkKICAgICAgICAgICAgaWYgbW86CiAgICAgICAgICAgICAgICBzdGFydGVyID0gbW8uZ3JvdXBzKClbMF0KICAgICAgICAgICAgICAgIGlmIG5vdCBsaW5lc1tpXS5zdHJpcChzdGFydGVyKToKICAgICAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgbmIgKz0gMQogICAgICAgICAgICAgICAgbGluZXNbaV0gPSAnPHVsPlxuPGxpPicrbGluZXNbaV1bbGVuKHN0YXJ0ZXIpOl0KICAgICAgICAgICAgICAgIGogPSBpKzEKICAgICAgICAgICAgICAgIHdoaWxlIGo8bGVuKGxpbmVzKToKICAgICAgICAgICAgICAgICAgICBpZiBsaW5lc1tqXS5zdGFydHN3aXRoKHN0YXJ0ZXIpOgogICAgICAgICAgICAgICAgICAgICAgICBsaW5lc1tqXSA9ICc8bGk+JytsaW5lc1tqXVtsZW4oc3RhcnRlcik6XQogICAgICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgICAgICBlbGlmIGxpbmVzW2pdLnN0YXJ0c3dpdGgoJyAnKSBhbmQgbGluZXNbal0ubHN0cmlwKCkuc3RhcnRzd2l0aChzdGFydGVyKToKICAgICAgICAgICAgICAgICAgICAgICAgaiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxpZiBub3QgbGluZXNbal0uc3RyaXAoKToKICAgICAgICAgICAgICAgICAgICAgICAgais9MQogICAgICAgICAgICAgICAgICAgIGVsaWYgbGluZXNbal0uc3RhcnRzd2l0aCgnICcqbGVuKHN0YXJ0ZXIpKToKICAgICAgICAgICAgICAgICAgICAgICAgais9MQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBsaW5lc1tqLTFdICs9ICdcbjwvdWw+JwogICAgICAgICAgICBpICs9IDEKICAgICAgICBzcmMgPSAnXG4nLmpvaW4obGluZXMpCiAgICAgICAgaWYgbmI9PTA6YnJlYWsKICAgICAgICBsaW5lcyA9IHNyYy5zcGxpdGxpbmVzKCkKCiAgICAjIG9yZGVyZWQgbGlzdHMKICAgIGxpbmVzID0gc3JjLnNwbGl0KCdcbicpCiAgICB3aGlsZSBUcnVlOgogICAgICAgIG5iID0gMAogICAgICAgIGkgPSAwCiAgICAgICAgd2hpbGUgaTxsZW4obGluZXMpOgogICAgICAgICAgICBpZiByZS5zZWFyY2gocideXGQrXC4nLGxpbmVzW2ldKToKICAgICAgICAgICAgICAgIG5iICs9IDEKICAgICAgICAgICAgICAgIGxpbmVzW2ldID0gJzxvbD5cbjxsaT4nK2xpbmVzW2ldW2xpbmVzW2ldLmZpbmQoJy4nKSsxOl0KICAgICAgICAgICAgICAgIGogPSBpKzEKICAgICAgICAgICAgICAgIHdoaWxlIGo8bGVuKGxpbmVzKToKICAgICAgICAgICAgICAgICAgICBpZiByZS5zZWFyY2gocideXGQrXC4nLGxpbmVzW2pdKToKICAgICAgICAgICAgICAgICAgICAgICAgbGluZXNbal0gPSAnPGxpPicrbGluZXNbal1bbGluZXNbal0uZmluZCgnLicpKzE6XQogICAgICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgbGluZXNbai0xXSArPSAnXG48L29sPicKICAgICAgICAgICAgaSArPSAxCiAgICAgICAgc3JjID0gJ1xuJy5qb2luKGxpbmVzKQogICAgICAgIGlmIG5iPT0wOmJyZWFrCiAgICAgICAgbGluZXMgPSBzcmMuc3BsaXRsaW5lcygpCgogICAgIyBoZWFkZXJzCiAgICBpID0gMQogICAgd2hpbGUgaTxsZW4obGluZXMpOgogICAgICAgIGxpbmUgPSBsaW5lc1tpXQogICAgICAgIGlmIGxpbmUuc3RhcnRzd2l0aCgnPScpIGFuZCBub3QgbGluZS5zdHJpcCgnPScpLnN0cmlwKCk6CiAgICAgICAgICAgIGxpbmVzW2ktMV0gPSAnPEgxPiVzPC9IMT4nICVsaW5lc1tpLTFdCiAgICAgICAgICAgIGRlbCBsaW5lc1tpXQogICAgICAgIGVsaWYgbGluZS5zdGFydHN3aXRoKCctJykgYW5kIG5vdCBsaW5lLnN0cmlwKCctJykuc3RyaXAoKToKICAgICAgICAgICAgbGluZXNbaS0xXSA9ICc8SDI+JXM8L0gyPicgJWxpbmVzW2ktMV0KICAgICAgICAgICAgZGVsIGxpbmVzW2ldCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaSArPSAxCiAgICAgICAgICAgCiAgICBhdHhfaGVhZGVyX3BhdHRlcm4gPSAnXigjKykoLiopKCMqKScKICAgIGZvciBpLGxpbmUgaW4gZW51bWVyYXRlKGxpbmVzKToKICAgICAgICBtbyA9IHJlLnNlYXJjaChhdHhfaGVhZGVyX3BhdHRlcm4sbGluZSkKICAgICAgICBpZiBub3QgbW86Y29udGludWUKICAgICAgICBsZXZlbCA9IGxlbihtby5ncm91cHMoKVswXSkKICAgICAgICBsaW5lc1tpXSA9IHJlLnN1YihhdHhfaGVhZGVyX3BhdHRlcm4sCiAgICAgICAgICAgICc8SCVzPiVzPC9IJXM+XG4nICUobGV2ZWwsbW8uZ3JvdXBzKClbMV0sbGV2ZWwpLAogICAgICAgICAgICBsaW5lLGNvdW50PTEpCgogICAgc3JjID0gJ1xuJy5qb2luKGxpbmVzKSAgICAgIAogICAgc3JjID0gcmUuc3ViKCdcblxuKycsJ1xuPHA+JyxzcmMpKydcbicKCiAgICByZXR1cm4gc3JjLHNjcmlwdHMK',
'/Lib/browser/timer.py':'ZnJvbSBfdGltZXIgaW1wb3J0ICo=',
'/Lib/browser/svg.py':'ZnJvbSBfc3ZnIGltcG9ydCAq',
'/Lib/browser/websocket.py':'ZnJvbSBfd2Vic29ja2V0IGltcG9ydCAq',
'/Lib/browser/local_storage.py':'IyBsb2NhbCBzdG9yYWdlIGluIGJyb3dzZXIKCmNsYXNzIExvY2FsU3RvcmFnZToKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgaWYgbm90IF9fQlJZVEhPTl9fLmhhc19sb2NhbF9zdG9yYWdlOgogICAgICAgICAgICByYWlzZSBOYW1lRXJyb3IoJ2xvY2FsIHN0b3JhZ2UgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlcicpCiAgICAgICAgc2VsZi5zdG9yZSA9IF9fQlJZVEhPTl9fLmxvY2FsX3N0b3JhZ2UoKQogICAgICAgIAogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsa2V5KToKICAgICAgICBzZWxmLnN0b3JlLnJlbW92ZUl0ZW0oa2V5KQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLGtleSk6CiAgICAgICAgcmVzPXNlbGYuc3RvcmUuZ2V0SXRlbShrZXkpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgIHJldHVybiByZXMKICAgICAgICByYWlzZSBLZXlFcnJvcihrZXkpCgogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsa2V5LHZhbHVlKToKICAgICAgICBzZWxmLnN0b3JlLnNldEl0ZW0oa2V5LHZhbHVlKQoKICAgICNpbXBsZW1lbnQgImluIiBmdW5jdGlvbmFsaXR5CiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGtleSk6CiAgICAgICAgcmVzPXNlbGYuc3RvcmUuZ2V0SXRlbShrZXkpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBrZXlzKHNlbGYpOgogICAgICAgIHJldHVybiBsaXN0KHNlbGYuc3RvcmUpCgogICAgZGVmIHZhbHVlcyhzZWxmKToKICAgICAgICByZXR1cm4gW3NlbGYuX19nZXRpdGVtX18oaykgZm9yIGsgaW4gc2VsZi5rZXlzKCldCgogICAgZGVmIGl0ZW1zKHNlbGYpOgogICAgICAgIHJldHVybiB6aXAoc2VsZi5rZXlzKCksc2VsZi52YWx1ZXMoKSkKCnN0b3JhZ2UgPSBMb2NhbFN0b3JhZ2UoKQoK',
'/Lib/browser/indexed_db.py':'Y2xhc3MgRXZlbnRMaXN0ZW5lcjoKICBkZWYgX19pbml0X18oc2VsZiwgZXZlbnRzPVtdKToKICAgICAgc2VsZi5fZXZlbnRzPWV2ZW50cwoKICBkZWYgYXBwZW5kKHNlbGYsIGV2ZW50KToKICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZChldmVudCkKCiAgZGVmIGZpcmUoc2VsZiwgZSk6CiAgICAgIGZvciBfZXZlbnQgaW4gc2VsZi5fZXZlbnRzOgogICAgICAgICAgX2V2ZW50KGUpCgpjbGFzcyBJbmRleGVkREI6CiAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICBpZiBub3QgX19CUllUSE9OX18uaGFzX2luZGV4ZWREQjoKICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJOb3RJbXBsZW1lbnRlZEVycm9yIiwgIllvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgaW5kZXhlZERCIikKICAgICAgICAgcmV0dXJuCgogICAgICBzZWxmLl9pbmRleGVkREI9X19CUllUSE9OX18uaW5kZXhlZERCKCkKICAgICAgc2VsZi5fZGI9Tm9uZQogICAgICBzZWxmLl92ZXJzaW9uPU5vbmUKCiAgZGVmIF9vbnN1Y2Nlc3Moc2VsZiwgZXZlbnQpOgogICAgICBzZWxmLl9kYj1ldmVudC50YXJnZXQucmVzdWx0CgogIGRlZiBvcGVuKHNlbGYsIG5hbWUsIG9uc3VjY2VzcywgdmVyc2lvbj0xLjAsIG9uZXJyb3I9Tm9uZSwgCiAgICAgICAgICAgb251cGdyYWRlbmVlZGVkPU5vbmUpOgogICAgICBzZWxmLl92ZXJzaW9uPXZlcnNpb24KICAgICAgX3Jlc3VsdD1zZWxmLl9pbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKQogICAgICBfc3VjY2Vzcz1FdmVudExpc3RlbmVyKFtzZWxmLl9vbnN1Y2Nlc3MsIG9uc3VjY2Vzc10pCiAgICAgIF9yZXN1bHQub25zdWNjZXNzPV9zdWNjZXNzLmZpcmUKICAgICAgX3Jlc3VsdC5vbnVwZ3JhZGVuZWVkZWQ9b251cGdyYWRlbmVlZGVkCgogICAgICAjaWYgb25lcnJvciBpcyBOb25lOgogICAgICBkZWYgb25lcnJvcihlKToKICAgICAgICAgIHByaW50KCJvbmVycm9yOiAlczolcyIgJSAgKGUudHlwZSwgZS50YXJnZXQucmVzdWx0KSkKCiAgICAgIGRlZiBvbmJsb2NrZWQoZSk6CiAgICAgICAgICBwcmludCgiYmxvY2tlZDogJXM6JXMiICUgIChlLnR5cGUsIGUucmVzdWx0KSkKCiAgICAgIF9yZXN1bHQub25lcnJvcj1vbmVycm9yCiAgICAgIF9yZXN1bHQub25ibG9ja2VkPW9uYmxvY2tlZAoKICBkZWYgdHJhbnNhY3Rpb24oc2VsZiwgZW50aXRpZXMsIG1vZGU9J3JlYWQnKToKICAgICAgcmV0dXJuIFRyYW5zYWN0aW9uKHNlbGYuX2RiLnRyYW5zYWN0aW9uKGVudGl0aWVzLCBtb2RlKSkKCmNsYXNzIFRyYW5zYWN0aW9uOgogIGRlZiBfX2luaXRfXyhzZWxmLCB0cmFuc2FjdGlvbik6CiAgICAgIHNlbGYuX3RyYW5zYWN0aW9uPXRyYW5zYWN0aW9uCgogIGRlZiBvYmplY3RTdG9yZShzZWxmLCBuYW1lKToKICAgICAgcmV0dXJuIE9iamVjdFN0b3JlKHNlbGYuX3RyYW5zYWN0aW9uLm9iamVjdFN0b3JlKG5hbWUpKQoKY2xhc3MgT2JqZWN0U3RvcmU6CiAgZGVmIF9faW5pdF9fKHNlbGYsIG9iamVjdFN0b3JlKToKICAgICAgc2VsZi5fb2JqZWN0U3RvcmU9b2JqZWN0U3RvcmUKICAgICAgc2VsZi5fZGF0YT1bXQoKICBkZWYgY2xlYXIoc2VsZiwgb25zdWNjZXNzPU5vbmUsIG9uZXJyb3I9Tm9uZSk6CiAgICAgIF9yZXN1bHQ9c2VsZi5fb2JqZWN0U3RvcmUuY2xlYXIoKQoKICAgICAgaWYgb25zdWNjZXNzIGlzIG5vdCBOb25lOgogICAgICAgICBfcmVzdWx0Lm9uc3VjY2Vzcz1vbnN1Y2Nlc3MKCiAgICAgIGlmIG9uZXJyb3IgaXMgbm90IE5vbmU6CiAgICAgICAgIF9yZXN1bHQub25lcnJvcj1vbmVycm9yCgogIGRlZiBfaGVscGVyKHNlbGYsIGZ1bmMsIG9iamVjdCwgb25zdWNjZXNzPU5vbmUsIG9uZXJyb3I9Tm9uZSk6CiAgICAgIF9yZXN1bHQ9ZnVuYyhvYmplY3QpCgogICAgICBpZiBvbnN1Y2Nlc3MgaXMgbm90IE5vbmU6CiAgICAgICAgIF9yZXN1bHQub25zdWNjZXNzPW9uc3VjY2VzcwoKICAgICAgaWYgb25lcnJvciBpcyBub3QgTm9uZToKICAgICAgICAgX3Jlc3VsdC5vbmVycm9yPW9uZXJyb3IKCiAgZGVmIHB1dChzZWxmLCBvYmplY3QsIGtleT1Ob25lLCBvbnN1Y2Nlc3M9Tm9uZSwgb25lcnJvcj1Ob25lKToKICAgICAgX3I9c2VsZi5fb2JqZWN0U3RvcmUucHV0KG9iamVjdCwga2V5KQogICAgICBfci5vbnN1Y2Nlc3M9b25zdWNjZXNzCiAgICAgIF9yLm9uZXJyb3I9b25lcnJvcgoKICBkZWYgYWRkKHNlbGYsIG9iamVjdCwgb25zdWNjZXNzPU5vbmUsIG9uZXJyb3I9Tm9uZSk6CiAgICAgIHNlbGYuX2hlbHBlcihzZWxmLl9vYmplY3RTdG9yZS5hZGQsIG9iamVjdCwgb25zdWNjZXNzLCBvbmVycm9yKQoKICBkZWYgZGVsZXRlKHNlbGYsIGluZGV4LCBvbnN1Y2Nlc3M9Tm9uZSwgb25lcnJvcj1Ob25lKTogCiAgICAgIHNlbGYuX2hlbHBlcihzZWxmLl9vYmplY3RTdG9yZS5kZWxldGUsIGluZGV4LCBvbnN1Y2Nlc3MsIG9uZXJyb3IpCiAgICAgCiAgZGVmIHF1ZXJ5KHNlbGYsICphcmdzKToKICAgICAgc2VsZi5fZGF0YT1bXQogICAgICBkZWYgb25zdWNjZXNzKGV2ZW50KToKICAgICAgICAgIGN1cnNvcj1ldmVudC50YXJnZXQucmVzdWx0CiAgICAgICAgICBpZiBjdXJzb3IgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICBzZWxmLl9kYXRhLmFwcGVuZChjdXJzb3IudmFsdWUpCiAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKQoKICAgICAgc2VsZi5fb2JqZWN0U3RvcmUub3BlbkN1cnNvcihhcmdzKS5vbnN1Y2Nlc3M9b25zdWNjZXNzCgogIGRlZiBmZXRjaGFsbChzZWxmKToKICAgICAgeWllbGQgc2VsZi5fZGF0YQoKICBkZWYgZ2V0KHNlbGYsIGtleSwgb25zdWNjZXNzPU5vbmUsIG9uZXJyb3I9Tm9uZSk6CiAgICAgIHNlbGYuX2hlbHBlcihzZWxmLl9vYmplY3RTdG9yZS5nZXQsIGtleSwgb25zdWNjZXNzLCBvbmVycm9yKQo=',
'/Lib/browser/__init__.py':'ZnJvbSBfYnJvd3NlciBpbXBvcnQgKgo=',
'/Lib/browser/ajax.py':'ZnJvbSBfYWpheCBpbXBvcnQgKg==',
'/Lib/browser/html.py':'ZnJvbSBfaHRtbCBpbXBvcnQgKg==',
'/Lib/browser/pydom.py':'ZnJvbSBicm93c2VyIGltcG9ydCBkb2MKCmNsYXNzIE5vZGVDb2xsZWN0aW9uU2VsZWN0b3IoU2VsZWN0b3IpOgogIGRlZiBfX2luaXRfXyhzZWxmLCBzZWxlY3RvciwgY29sbGVjdGlvbik6CiAgICAgIFNlbGVjdG9yLl9faW5pdF9fKHNlbGYsIHNlbGVjdG9yKQogICAgICBzZWxmLl9jb2xsZWN0aW9uPWNvbGxlY3Rpb24KCiAgICAgIGlmIHNlbGYuX3NlbGVjdG9yX3R5cGUgPT0gJ2lkJzoKICAgICAgICAgc2VsZi5fbWF0Y2g9c2VsZi5fbWF0Y2hfaWQKICAgICAgZWxpZiBzZWxmLl9zZWxlY3Rvcl90eXBlID09J3RhZyc6CiAgICAgICAgIHNlbGYuX21hdGNoPXNlbGYuX21hdGNoX3RhZwogICAgICBlbGlmIHNlbGYuX3NlbGVjdG9yX3R5cGUgPT0gJ2NsYXNzbmFtZSc6CiAgICAgICAgIHNlbGYuX21hdGNoPXNlbGYuX21hdGNoX2NsYXNzbmFtZQoKICBkZWYgX21hdGNoX2lkKHNlbGYsIG5vZGUpOgogICAgICBpZiBub2RlLmlkIGlzIE5vbmU6IHJldHVybiBGYWxzZQogICAgICByZXR1cm4gbm9kZS5pZCA9PSBzZWxmLl9zZWxlY3RvcgoKICBkZWYgX21hdGNoX3RhZyhzZWxmLCBub2RlKToKICAgICAgcmV0dXJuIG5vZGUudGFnTmFtZSA9PSBzZWxmLl9zZWxlY3RvcgoKICBkZWYgX21hdGNoX2NsYXNzbmFtZShzZWxmLCBub2RlKToKICAgICAgcmV0dXJuIHNlbGYuX3NlbGVjdG9yIGluIG5vZGUuY2xhc3NuYW1lCgogIGRlZiBnZXQoc2VsZik6CiAgICAgIF9jMT1Ob2RlQ29sbGVjdGlvbigpCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9jb2xsZWN0aW9uOgogICAgICAgICAgaWYgc2VsZi5fbWF0Y2goX25vZGUpOgogICAgICAgICAgICAgX2MxLmFwcGVuZChfbm9kZSkKCiAgICAgIHJldHVybiBfYzEKCmNsYXNzIFNlbGVjdG9yOgogIHRhZ3M9WydBJywnQUJCUicsJ0FDUk9OWU0nLCdBRERSRVNTJywnQVBQTEVUJywnQicsJ0JETycsJ0JJRycsJ0JMT0NLUVVPVEUnLAogICAgICAgICdCVVRUT04nLCdDQVBUSU9OJywnQ0VOVEVSJywnQ0lURScsJ0NPREUnLCdERUwnLCdERk4nLCdESVInLCdESVYnLCdETCcsCiAgICAgICAgJ0VNJywnRklFTERTRVQnLCdGT05UJywnRk9STScsJ0ZSQU1FU0VUJywnSDEnLCdIMicsJ0gzJywnSDQnLCdINScsJ0g2JywKICAgICAgICAnSScsJ0lGUkFNRScsJ0lOUycsJ0tCRCcsJ0xBQkVMJywnTEVHRU5EJywnTUFQJywnTUVOVScsJ05PRlJBTUVTJywgCiAgICAgICAgJ05PU0NSSVBUJywnT0JKRUNUJywnT0wnLCdPUFRHUk9VUCcsJ1BSRScsJ1EnLCdTJywnU0FNUCcsJ1NDUklQVCcsIAogICAgICAgICdTRUxFQ1QnLCdTTUFMTCcsJ1NQQU4nLCdTVFJJS0UnLCdTVFJPTkcnLCdTVFlMRScsJ1NVQicsJ1NVUCcsJ1RBQkxFJywKICAgICAgICAnVEVYVEFSRUEnLCdUSVRMRScsJ1RUJywnVScsJ1VMJywnVkFSJywnQk9EWScsJ0NPTEdST1VQJywnREQnLCdEVCcsCiAgICAgICAgJ0hFQUQnLCdIVE1MJywnTEknLCdQJywnVEJPRFknLCdPUFRJT04nLCdURCcsJ1RGT09UJywnVEgnLCdUSEVBRCcsJ1RSJywKICAgICAgICAnQVJFQScsJ0JBU0UnLCdCQVNFRk9OVCcsJ0JSJywnQ09MJywnRlJBTUUnLCdIUicsJ0lNRycsJ0lOUFVUJywKICAgICAgICAnSVNJTkRFWCcsJ0xJTksnLCdNRVRBJywnUEFSQU0nLCAgI0hUTUwgNSBlbGVtZW50cy4uLgogICAgICAgICdBUlRJQ0xFJywnQVNJREUnLCdBVURJTycsJ0JESScsJ0NBTlZBUycsJ0NPTU1BTkQnLCdEQVRBTElTVCcsCiAgICAgICAgJ0RFVEFJTFMnLCdESUFMT0cnLCdFTUJFRCcsJ0ZJR0NBUFRJT04nLCdGSUdVUkUnLCdGT09URVInLCdIRUFERVInLAogICAgICAgICdLRVlHRU4nLCdNQVJLJywnTUVURVInLCdOQVYnLCdPVVRQVVQnLCdQUk9HUkVTUycsJ1JQJywnUlQnLAogICAgICAgICdSVUJZJywnU0VDVElPTicsJ1NPVVJDRScsJ1NVTU1BUlknLCdUSU1FJywnVFJBQ0snLCdWSURFTycsJ1dCUiddCgogIGRlZiBfX2luaXRfXyhzZWxmLCBzZWxlY3Rvciwgc3RhcnRfbm9kZT1kb2MpOgogICAgICBzZWxmLl9kb2M9c3RhcnRfbm9kZQoKICAgICAgaWYgKGlzaW5zdGFuY2Uoc2VsZWN0b3IsIHN0cikpOgogICAgICAgICBpZiBzZWxlY3Rvci5zdGFydHN3aXRoKCIuIik6ICAgI2NsYXNzIHNlbGVjdG9yCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yPXNlbGVjdG9yWzE6XQogICAgICAgICAgICBzZWxmLl9zZWxlY3Rvcl90eXBlPSJjbGFzc25hbWUiCiAgICAgICAgIGVsaWYgc2VsZWN0b3Iuc3RhcnRzd2l0aCgiIyIpOiAgI2lkIHNlbGVjdG9yCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yPXNlbGVjdG9yWzE6XQogICAgICAgICAgICBzZWxmLl9zZWxlY3Rvcl90eXBlPSJpZCIKICAgICAgICAgZWxpZiBzZWxlY3Rvci51cHBlcigpIGluIHRhZ3M6CiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yPXNlbGVjdG9yLnVwcGVyKCkKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3JfdHlwZT0idGFnIgogICAgICAgICBlbHNlOiAgCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yPXNlbGVjdG9yCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yX3R5cGU9InNlbGVjdG9yIgogICAgICBlbHNlOiAgI3RoaXMgaXMgYSBmdW5jdGlvbgogICAgICAgICBzZWxmLl9zZWxlY3Rvcl90eXBlPSJzZWxlY3RvciIKICAgICAgICAgc2VsZi5fZnVuY3Rpb249c2VsZWN0b3IKICAgICAgICAgc2VsZi5nZXQ9c2VsZi5fZnVuY3Rpb25fZ2V0CgogIGRlZiBfZnVuY3Rpb25fZ2V0KHNlbGYpOgogICAgICBkZWYgcmVjdXJzZShub2RlKToKICAgICAgICAgIF9saXN0PVtdCiAgICAgICAgICBpZiBzZWxmLl9mdW5jdGlvbihub2RlKToKICAgICAgICAgICAgIF9saXN0LmFwcGVuZChub2RlKQoKICAgICAgICAgIGZvciBfbm9kZSBpbiBub2RlLmNoaWxkTm9kZXM6CiAgICAgICAgICAgICAgX2xpc3QrPXJlY3Vyc2UoX25vZGUpCgogICAgICAgICAgcmV0dXJuIF9saXN0CgogICAgICBfbWF0Y2hlZF9ub2Rlcz1yZWN1cnNlKHNlbGYuX2RvYykKICAgICAgcmV0dXJuIE5vZGVDb2xsZWN0aW9uKF9tYXRjaGVkX25vZGVzKQoKICBkZWYgZ2V0KHNlbGYpOgogICAgICBpZiBzZWxmLl9zZWxlY3Rvcl90eXBlPT0iaWQiOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KGlkPXNlbGYuX3NlbGVjdG9yKQogICAgICBlbGlmIHNlbGYuX3NlbGVjdG9yX3R5cGU9PSJjbGFzc25hbWUiOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KGNsYXNzbmFtZT1zZWxmLl9zZWxlY3RvcikKICAgICAgZWxpZiBzZWxmLl9zZWxlY3Rvcl90eXBlID09ICJ0YWciOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KHRhZz1zZWxmLl9zZWxlY3RvcikKICAgICAgZWxpZiBzZWxmLl9zZWxlY3Rvcl90eXBlPT0ic2VsZWN0b3IiOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KHNlbGVjdG9yPXNlbGYuX3NlbGVjdG9yKQogICAgICBlbHNlOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1bXQogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oX21hdGNoZWRfbm9kZXMpCgpjbGFzcyBOb2RlQ29sbGVjdGlvbjoKICBkZWYgX19pbml0X18oc2VsZiwgbm9kZXM9W10pOgogICAgICBzZWxmLl9ub2Rlcz1ub2RlcwoKICBkZWYgX19sZW5fXyhzZWxmKToKICAgICAgcmV0dXJuIGxlbihzZWxmLl9ub2RlcykKCiAgZGVmIF9faXRlbV9fKHNlbGYsIGkpOgogICAgICByZXR1cm4gc2VsZi5fbm9kZXNbaV0KCiAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGkpOgogICAgICByZXR1cm4gc2VsZi5fbm9kZXNbaV0KCiAgZGVmIF9fYWRkX18oc2VsZiwgbm9kZXMpOgogICAgICBzZWxmLl9ub2Rlcys9bm9kZXMKCiAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgIF9zdHI9W10KICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX3N0ci5hcHBlbmQoX25vZGUuX19zdHJfXygpKQoKICAgICAgcmV0dXJuICc8YnI+Jy5qb2luKF9zdHIpCgogIGRlZiBhcHBlbmQoc2VsZiwgbm9kZSk6ICAgICAgICAKICAgICAgc2VsZi5fbm9kZXMuYXBwZW5kKG5vZGUpCgogIGRlZiBuZXh0KHNlbGYpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICB5aWVsZCBfbm9kZQoKICBkZWYgYWRkKHNlbGYsIHNlbGVjdG9yLCBjb250ZXh0KToKICAgICAgX25zPU5vZGVDb2xsZWN0aW9uU2VsZWN0b3Ioc2VsZWN0b3IsIHNlbGYpCiAgICAgIHNlbGYuX25vZGVzKz1fbnMuZ2V0KCkKCiAgZGVmIGFkZEJhY2soc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIGFkZENsYXNzKHNlbGYsIGNsYXNzbmFtZSk6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmFkZENsYXNzKGNsYXNzbmFtZSkKCiAgZGVmIGFmdGVyKHNlbGYsIGNvbnRlbnQpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5hZnRlcihjb250ZW50KQoKICBkZWYgYXBwZW5kX2NvbnRlbnQoc2VsZiwgY29udGVudCk6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmFwcGVuZChjb250ZW50KQoKICBkZWYgYXBwZW5kVG8oc2VsZiwgc2VsZWN0b3IpOgogICAgICBfcz1TZWxlY3RvcihzZWxlY3RvcikKCiAgICAgIGZvciBfbm9kZSBpbiBfcy5nZXQoKToKICAgICAgICAgIF9ub2RlLmFwcGVuZChzZWxmLl9ub2RlWzBdLmNsb25lKCkpCgogIGRlZiBhdHRyKHNlbGYsIHByb3BlcnR5LCB2YWx1ZT1Ob25lKToKICAgICAgaWYgdmFsdWUgaXMgTm9uZToKICAgICAgICAgcmV0dXJuIHNlbGYuX25vZGVzWzBdW3Byb3BlcnR5XQoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGVbcHJvcGVydHldPXZhbHVlCgogIGRlZiBiZWZvcmUoc2VsZiwgY29udGVudCk6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmJlZm9yZShjb250ZW50KQoKICBkZWYgYmluZChzZWxmLCBldmVudCwgaGFuZGxlcik6CiAgICAgIGlmICcgJyBpbiBldmVudDoKICAgICAgICAgX2V2ZW50cz0nICcuc3BsaXQoZXZlbnQpCiAgICAgICAgIGZvciBfZXZlbnQgaW4gX2V2ZW50czoKICAgICAgICAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgICAgICAgICBfbm9kZVsnb24lcycgJSBldmVudF09aGFuZGxlcgogICAgICAgICByZXR1cm4KCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlWydvbiVzJyAlIGV2ZW50XT1oYW5kbGVyCgogIGRlZiBibHVyKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGNoYW5nZShzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBjaGlsZHJlbihzZWxmLCBzZWxlY3Rvcj1Ob25lKToKICAgICAgX2M9Tm9kZUNvbGxlY3Rpb24oKQogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBmb3IgX2NoaWxkIGluIF9ub2RlLmdldF9jaGlsZHJlbigpOgogICAgICAgICAgICAgIF9jLmFwcGVuZChfY2hpbGQpCgogICAgICBpZiBzZWxlY3RvciBpcyBOb25lOgogICAgICAgICByZXR1cm4gX2MKCiAgICAgICNzZWxlY3RvciBpcyBub3QgTm9uZQogICAgICBfbnM9Tm9kZUNvbGxlY3Rpb25TZWxlY3RvcihzZWxlY3RvciwgX2MpCiAgICAgIHJldHVybiBfbnMuZ2V0KCkKCiAgZGVmIGNsaWNrKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGNsb25lKHNlbGYpOgogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oW19ub2RlLmNsb25lKCkgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzXSkKCiAgZGVmIGNsb3Nlc3Qoc2VsZiwgc2VsZWN0b3IpOgogICAgICBpZiBpc2luc3RhbmNlKHNlbGVjdG9yLCBzdHIpOgogICAgICAgICBfbnM9U2VsZWN0b3Ioc2VsZWN0b3IpCiAgICAgICAgIHNlbGVjdG9yPV9ucy5nZXQoKQoKICAgICAgX2M9Tm9kZUNvbGxlY3Rpb24oKQogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfYy5hcHBlbmQoX25vZGUuY2xvc2VzdChzZWxlY3RvcikpCgogICAgICByZXR1cm4gX2MKCiAgZGVmIGNvbnRhaW5zKHNlbGYsIHRleHQpOgogICAgICBwYXNzCgogIGRlZiBjb250ZW50cyhzZWxmKToKICAgICAgcGFzcwoKICBkZWYgY3NzKHNlbGYsIHByb3BlcnR5LCB2YWx1ZT1Ob25lKToKICAgICAgaWYgdmFsdWUgaXMgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UocHJvcGVydHksIGRpY3QpOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF0uY3NzKHByb3BlcnR5KQoKICAgICAgaWYgaXNpbnN0YW5jZShwcm9wZXJ0eSwgZGljdCk6CiAgICAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgICAgIF9ub2RlLmNzcyhwcm9wZXJ0eSkKICAgICAgZWxzZToKICAgICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgICAgX25vZGUuY3NzKHByb3BlcnR5LCB2YWx1ZSkKCiAgZGVmIGRhdGEoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIGRibGNsaWNrKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGRldGFjaChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgZWFjaChzZWxmLCBmdW5jKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgZnVuYyhfbm9kZSkKCiAgZGVmIGVtcHR5KHNlbGYpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5lbXB0eSgpCgogIGRlZiBlcShzZWxmLCBpbmRleCk6CiAgICAgIGlmIGluZGV4IDwgbGVuKHNlbGYuX25vZGVzKToKICAgICAgICAgcmV0dXJuIE5vZGVDb2xsZWN0aW9ucyhzZWxmLl9ub2Rlc1tpbmRleF0pCgogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb25zKCkKCiAgZGVmIGVycm9yKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGZhZGVJbihzZWxmKToKICAgICAgcGFzcwoKICBkZWYgZmFkZU91dChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgZmFkZVRvKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBmYWRlVG9nZ2xlKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBmaWx0ZXIoc2VsZiwgc2VsZWN0b3IpOgogICAgICBfbnM9Tm9kZUNvbGxlY3Rpb25TZWxlY3RvcihzZWxlY3Rvciwgc2VsZikKICAgICAgcmV0dXJuIF9ucy5nZXQoKQoKICBkZWYgZmluZChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgZmlyc3Qoc2VsZik6CiAgICAgIGlmIGxlbihzZWxmLl9ub2RlcykgPT0gMDoKICAgICAgICAgcmV0dXJuIE5vZGVDb2xsZWN0aW9uKCkKCiAgICAgIHJldHVybiBOb2RlQ29sbGVjdGlvbihbc2VsZi5fbm9kZXNbMF1dKQoKICBkZWYgZm9jdXMoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgZm9jdXNpbihzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBmb2N1c291dChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBnZXQoc2VsZiwgaW5kZXg9Tm9uZSk6CiAgICAgIGlmIGluZGV4IGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBbX25vZGUgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzXQoKICAgICAgcmV0dXJuIHNlbGYuX25vZGVzW2luZGV4XQoKICBkZWYgZ3Qoc2VsZiwgaW5kZXgpOgogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oW3NlbGYuX25vZGVzW2luZGV4Ol1dKQoKICBkZWYgaGFzKHNlbGYsIHNlbGVjdG9yKToKICAgICAgcGFzcwogIAogIGRlZiBoYXNDbGFzcyhzZWxmLCBuYW1lKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgaWYgX25vZGUuaGFzQ2xhc3MobmFtZSk6CiAgICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgICAgcmV0dXJuIEZhbHNlCgogIGRlZiBoZWlnaHQoc2VsZiwgdmFsdWU9Tm9uZSk6CiAgICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1swXS5jc3MoJ2hlaWdodCcpCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydoZWlnaHQnOiB2YWx1ZX0pCgogIGRlZiBoaWRlKHNlbGYpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ25vbmUnfSkKCiAgZGVmIGhvdmVyKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGh0bWwoc2VsZiwgY29udGVudD1Ob25lKToKICAgICAgaWYgY29udGVudCBpcyBOb25lOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF0uZ2V0X2h0bWwoKQoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuc2V0X2h0bWwoY29udGVudCkKCiAgZGVmIGlubmVySGVpZ2h0KHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBpbm5lcldpZHRoKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBpbnNlcnRBZnRlcihzZWxmLCB0YXJnZXQpOgogICAgICBwYXNzCgogIGRlZiBpbnNlcnRCZWZvcmUoc2VsZiwgdGFyZ2V0KToKICAgICAgcGFzcwoKICAjZGVmIGlzKHNlbGYsIHNlbGVjdG9yKToKICAjICAgIHBhc3MKCiAgZGVmIGtleWRvd24oc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYga2V5cHJlc3Moc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYga2V5dXAoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbGFzdChzZWxmKToKICAgICAgcmV0dXJuIHNlbGYuX25vZGVzWy0xXQoKICBAcHJvcGVydHkKICBkZWYgbGVuZ3RoKHNlbGYpOgogICAgICByZXR1cm4gbGVuKHNlbGYuX25vZGVzKQoKICBkZWYgbW91c2Vkb3duKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIG1vdXNlZW50ZXIoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbW91c2VsZWF2ZShzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBtb3VzZW1vdmUoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbW91c2VvdXQoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbW91c2VvdmVyKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIG1vdXNldXAoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbmV4dChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgbmV4dEFsbChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgbmV4dFV0aWwoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIG9mZihzZWxmLCBoYW5kbGVyKToKICAgICAgcGFzcwoKICBkZWYgb2Zmc2V0KHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBvZmZzZXRQYXJlbnQoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIG9uKHNlbGYsIGhhbmRsZXIpOgogICAgICBwYXNzCgogIGRlZiBvdXRlckhlaWdodChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgb3V0ZXJXaWR0aChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgcGFyZW50KHNlbGYpOgogICAgICBfcD1Ob2RlQ29sbGVjdGlvbigpCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9wLmFwcGVuZChfbm9kZS5nZXRfcGFyZW50KCkpCgogIGRlZiBwYXJlbnRzKHNlbGYsIHNlbGVjdG9yPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBwYXJlbnRzVW50aWwoc2VsZiwgc2VsZWN0b3I9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHBvc2l0aW9uKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBwcmVwZW5kKHNlbGYsIGNvbnRlbnQpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5wcmVwZW5kKGNvbnRlbnQpCgogIGRlZiBwcmVwZW5kVG8oc2VsZiwgdGFyZ2V0KToKICAgICAgcGFzcwoKICBkZWYgcHJldihzZWxmKToKICAgICAgX3AxPU5vZGVDb2xsZWN0aW9uKCkKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX3BhcmVudD1fbm9kZS5nZXRfcGFyZW50KCkKICAgICAgICAgIGZvciBfaSBpbiByYW5nZShsZW4oX3BhcmVudC5jaGlsZE5vZGVzKSk6CiAgICAgICAgICAgICAgaWYgX3BhcmVudC5jaGlsZE5vZGVzW19pXSA9PSBfbm9kZToKICAgICAgICAgICAgICAgICBpZiBfaSA+IDA6CiAgICAgICAgICAgICAgICAgICAgX3AxLmFwcGVuZChfcGFyZW50LmNoaWxkTm9kZXNbX2ktMV0pCiAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgIHJldHVybiBfcDEKCiAgZGVmIHByZXZBbGwoc2VsZiwgc2VsZWN0b3I9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHByZXZVbnRpbChzZWxmLCBzZWxlY3Rvcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgcHJvcChzZWxmLCBwcm9wZXJ0eSwgdmFsdWU9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHJlYWR5KHNlbGYsIGZ1bmMpOgogICAgICBwYXNzCgogIGRlZiByZW1vdmUoc2VsZik6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmdldF9wYXJlbnQoKS5yZW1vdmVDaGlsZChfbm9kZSkgCgogIGRlZiByZW1vdmVBdHRyKHNlbGYsIGF0dHIpOgogICAgICBwYXNzCgogIGRlZiByZW1vdmVDbGFzcyhzZWxmLCBuYW1lKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUucmVtb3ZlQ2xhc3MobmFtZSkKCiAgZGVmIHJlbW92ZVByb3Aoc2VsZiwgcHJvcGVydHkpOgogICAgICBwYXNzCgogIGRlZiByZXBsYWNlQWxsKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiByZXBsYWNlV2l0aChzZWxmLCBjb250ZW50KToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuZ2V0X3BhcmVudCgpLnJlcGxhY2VXaXRoKGNvbnRlbnQsIF9ub2RlKQoKICBkZWYgcmVzaXplKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHNjcm9sbChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBzY3JvbGxMZWZ0KHNlbGYsIHZhbHVlPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBzY3JvbGxUb3Aoc2VsZiwgdmFsdWU9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHNlbGVjdChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBzaG93KHNlbGYpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ2Jsb2NrJ30pCgogIGRlZiBzaWJsaW5ncyhzZWxmLCBzZWxlY3Rvcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgc2l6ZShzZWxmKToKICAgICAgcGFzcwoKICBkZWYgc2xpY2Uoc2VsZiwgaW5kZXgxPU5vbmUsIGluZGV4Mj1Ob25lKToKICAgICAgaWYgaW5kZXgxIGlzIE5vbmUgYW5kIGluZGV4MiBpcyBOb25lOgogICAgICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oKQoKICAgICAgcmV0dXJuIE5vZGVDb2xsZWN0aW9uKHNlbGYuX25vZGVzW2luZGV4MTppbmRleDJdKQoKICBkZWYgc2xpZGVEb3duKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBzbGlkZVRvZ2dsZShzZWxmKToKICAgICAgcGFzcwoKICBkZWYgc2xpZGVVcChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgc3VibWl0KHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHRleHQoc2VsZiwgY29udGVudD1Ob25lKToKICAgICAgaWYgY29udGVudCBpcyBOb25lOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF0uZ2V0X3RleHQoKQoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuc2V0X3RleHQoY29udGVudCkgCgogIGRlZiB0b2dnbGUoc2VsZiwgRnVuY3Rpb249Tm9uZSk6CiAgICAgIGlmIEZ1bmN0aW9uIGlzIE5vbmU6CiAgICAgICAgIF9zaG93PVRydWUKICAgICAgICAgaWYgc2VsZi5fbm9kZXNbMF0uY3NzKCdkaXNwbGF5JykgIT0gJ25vbmUnOgogICAgICAgICAgICBfc2hvdz1GYWxzZQogICAgICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICAgICBpZiBfc2hvdzoKICAgICAgICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J2Rpc3BsYXknOiAnYmxvY2snfSkKICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ25vbmUnfSkKICAKICAgICAgICAgICAgIF9zaG93PW5vdCBfc2hvdwoKICAgICAgICAgcmV0dXJuCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBpZiBGdW5jdGlvbihfbm9kZSk6CiAgICAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ2Jsb2NrJ30pCiAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgX25vZGUuc2V0X3N0eWxlKHsnZGlzcGxheSc6ICdub25lJ30pCgogIGRlZiB0b2dnbGVDbGFzcyhzZWxmKToKICAgICAgcGFzcwoKICBkZWYgdG9MaXN0KHNlbGYpOgogICAgICByZXR1cm4gc2VsZi5fbm9kZXMKCiAgdG9BcnJheT10b0xpc3QgICAjZm9yIGpRdWVyeSBjb21wYXRpYmlsaXR5CgogIGRlZiB0b3VjaGVuZChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiB0b3VjaG1vdmUoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgdG91Y2hzdGFydChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiB0cmlnZ2VyKHNlbGYsIGV2ZW50X3R5cGUpOgogICAgICBwYXNzCgogIGRlZiB0cmlnZ2VySGFuZGxlcihzZWxmLCBldmVudF90eXBlKToKICAgICAgcGFzcwoKCiAgZGVmIHVuYmluZChzZWxmLCBldmVudCwgaGFuZGxlcik6CiAgICAgIGlmICcgJyBpbiBldmVudDoKICAgICAgICAgX2V2ZW50cz0nICcuc3BsaXQoZXZlbnQpCiAgICAgICAgIGZvciBfZXZlbnQgaW4gX2V2ZW50czoKICAgICAgICAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgICAgICAgICBwcmludCgiZml4IG1lISIpCiAgICAgICAgIHJldHVybgoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgI2xvb2sgaW50byBob3cgdG8gZGV0YWNoIGFuIGV2ZW50CiAgICAgICAgICBwcmludCgiZml4IG1lIikKCgogIGRlZiB1bmxvYWQoc2VsZiwgaGFuZGxlcik6CiAgICAgIHBhc3MKCiAgZGVmIHVud3JhcChzZWxmKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX3BhcmVudD1fbm9kZS5nZXRfcGFyZW50KCkKICAgICAgICAgIF9ncmFuZHBhcmVudD1fcGFyZW50LmdldF9wYXJlbnQoKQogICAgICAgICAgX2dyYW5kcGFyZW50LnJlcGxhY2VDaGlsZChfbm9kZSwgX3BhcmVudCkKCiAgICAgICAgICBfcGFyZW50LnJlbW92ZSgpCgogIGRlZiB2YWwoc2VsZiwgdmFsdWU9Tm9uZSk6CiAgICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1swXVsndGV4dCddICAgI2lzIHRleHQgdGhlIGJlc3QgaGVyZT8KCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlWyd0ZXh0J109dmFsdWUKCiAgZGVmIHdpZHRoKHNlbGYsIHdpZHRoPU5vbmUpOgogICAgICBpZiB3aWR0aCBpcyBOb25lOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF0uY3NzKCd3aWR0aCcpCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeyd3aWR0aCc6IHdpZHRofSkKCiAgZGVmIHdyYXAoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIHdyYXBBbGwoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIHdyYXBJbm5lcihzZWxmKToKICAgICAgcGFzcwoKZGVmIGJ5SWQoaWQpOgogICAgX3Jlc3VsdD1kb2MuZ2V0KGlkPWlkKQogICAgcmV0dXJuIF9yZXN1bHRbMF0KCmRlZiBjcmVhdGVDU1NDbGFzcyhjc3N0ZXh0KToKICAgIF9zdHlsZT1kb2MuY3JlYXRlRWxlbWVudCgnc3R5bGUnKQogICAgX3N0eWxlLnR5cGU9J3RleHQvY3NzJwogICAgX3N0eWxlLmlubmVySFRNTCA9IGNzc3RleHQKICAgIGRvYy5nZXQodGFnPSdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoX3N0eWxlKQo=',
'/Lib/unittest/mock.py':'IyBtb2NrLnB5DQojIFRlc3QgdG9vbHMgZm9yIG1vY2tpbmcgYW5kIHBhdGNoaW5nLg0KIyBNYWludGFpbmVkIGJ5IE1pY2hhZWwgRm9vcmQNCiMgQmFja3BvcnQgZm9yIG90aGVyIHZlcnNpb25zIG9mIFB5dGhvbiBhdmFpbGFibGUgZnJvbQ0KIyBodHRwOi8vcHlwaS5weXRob24ub3JnL3B5cGkvbW9jaw0KDQpfX2FsbF9fID0gKA0KICAgICdNb2NrJywNCiAgICAnTWFnaWNNb2NrJywNCiAgICAncGF0Y2gnLA0KICAgICdzZW50aW5lbCcsDQogICAgJ0RFRkFVTFQnLA0KICAgICdBTlknLA0KICAgICdjYWxsJywNCiAgICAnY3JlYXRlX2F1dG9zcGVjJywNCiAgICAnRklMVEVSX0RJUicsDQogICAgJ05vbkNhbGxhYmxlTW9jaycsDQogICAgJ05vbkNhbGxhYmxlTWFnaWNNb2NrJywNCiAgICAnbW9ja19vcGVuJywNCiAgICAnUHJvcGVydHlNb2NrJywNCikNCg0KDQpfX3ZlcnNpb25fXyA9ICcxLjAnDQoNCg0KaW1wb3J0IGluc3BlY3QNCmltcG9ydCBwcHJpbnQNCmltcG9ydCBzeXMNCmZyb20gZnVuY3Rvb2xzIGltcG9ydCB3cmFwcw0KDQoNCkJhc2VFeGNlcHRpb25zID0gKEJhc2VFeGNlcHRpb24sKQ0KaWYgJ2phdmEnIGluIHN5cy5wbGF0Zm9ybToNCiAgICAjIGp5dGhvbg0KICAgIGltcG9ydCBqYXZhDQogICAgQmFzZUV4Y2VwdGlvbnMgPSAoQmFzZUV4Y2VwdGlvbiwgamF2YS5sYW5nLlRocm93YWJsZSkNCg0KDQpGSUxURVJfRElSID0gVHJ1ZQ0KDQojIFdvcmthcm91bmQgZm9yIGlzc3VlICMxMjM3MA0KIyBXaXRob3V0IHRoaXMsIHRoZSBfX2NsYXNzX18gcHJvcGVydGllcyB3b3VsZG4ndCBiZSBzZXQgY29ycmVjdGx5DQpfc2FmZV9zdXBlciA9IHN1cGVyDQoNCmRlZiBfaXNfaW5zdGFuY2VfbW9jayhvYmopOg0KICAgICMgY2FuJ3QgdXNlIGlzaW5zdGFuY2Ugb24gTW9jayBvYmplY3RzIGJlY2F1c2UgdGhleSBvdmVycmlkZSBfX2NsYXNzX18NCiAgICAjIFRoZSBiYXNlIGNsYXNzIGZvciBhbGwgbW9ja3MgaXMgTm9uQ2FsbGFibGVNb2NrDQogICAgcmV0dXJuIGlzc3ViY2xhc3ModHlwZShvYmopLCBOb25DYWxsYWJsZU1vY2spDQoNCg0KZGVmIF9pc19leGNlcHRpb24ob2JqKToNCiAgICByZXR1cm4gKA0KICAgICAgICBpc2luc3RhbmNlKG9iaiwgQmFzZUV4Y2VwdGlvbnMpIG9yDQogICAgICAgIGlzaW5zdGFuY2Uob2JqLCB0eXBlKSBhbmQgaXNzdWJjbGFzcyhvYmosIEJhc2VFeGNlcHRpb25zKQ0KICAgICkNCg0KDQpjbGFzcyBfc2xvdHRlZChvYmplY3QpOg0KICAgIF9fc2xvdHNfXyA9IFsnYSddDQoNCg0KRGVzY3JpcHRvclR5cGVzID0gKA0KICAgIHR5cGUoX3Nsb3R0ZWQuYSksDQogICAgcHJvcGVydHksDQopDQoNCg0KZGVmIF9nZXRzaWduYXR1cmUoZnVuYywgc2tpcGZpcnN0LCBpbnN0YW5jZT1GYWxzZSk6DQogICAgaWYgaXNpbnN0YW5jZShmdW5jLCB0eXBlKSBhbmQgbm90IGluc3RhbmNlOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBmdW5jID0gZnVuYy5fX2luaXRfXw0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgc2tpcGZpcnN0ID0gVHJ1ZQ0KICAgIGVsaWYgbm90IGlzaW5zdGFuY2UoZnVuYywgRnVuY3Rpb25UeXBlcyk6DQogICAgICAgICMgZm9yIGNsYXNzZXMgd2hlcmUgaW5zdGFuY2UgaXMgVHJ1ZSB3ZSBlbmQgdXAgaGVyZSB0b28NCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZnVuYyA9IGZ1bmMuX19jYWxsX18NCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgcmV0dXJuDQoNCiAgICB0cnk6DQogICAgICAgIGFyZ3NwZWMgPSBpbnNwZWN0LmdldGZ1bGxhcmdzcGVjKGZ1bmMpDQogICAgZXhjZXB0IFR5cGVFcnJvcjoNCiAgICAgICAgIyBDIGZ1bmN0aW9uIC8gbWV0aG9kLCBwb3NzaWJseSBpbmhlcml0ZWQgb2JqZWN0KCkuX19pbml0X18NCiAgICAgICAgcmV0dXJuDQoNCiAgICByZWdhcmdzLCB2YXJhcmdzLCB2YXJrdywgZGVmYXVsdHMsIGt3b25seSwga3dvbmx5ZGVmLCBhbm4gPSBhcmdzcGVjDQoNCg0KICAgICMgaW5zdGFuY2UgbWV0aG9kcyBhbmQgY2xhc3NtZXRob2RzIG5lZWQgdG8gbG9zZSB0aGUgc2VsZiBhcmd1bWVudA0KICAgIGlmIGdldGF0dHIoZnVuYywgJ19fc2VsZl9fJywgTm9uZSkgaXMgbm90IE5vbmU6DQogICAgICAgIHJlZ2FyZ3MgPSByZWdhcmdzWzE6XQ0KICAgIGlmIHNraXBmaXJzdDoNCiAgICAgICAgIyB0aGlzIGNvbmRpdGlvbiBhbmQgdGhlIGFib3ZlIG9uZSBhcmUgbmV2ZXIgYm90aCBUcnVlIC0gd2h5Pw0KICAgICAgICByZWdhcmdzID0gcmVnYXJnc1sxOl0NCg0KICAgIHNpZ25hdHVyZSA9IGluc3BlY3QuZm9ybWF0YXJnc3BlYygNCiAgICAgICAgcmVnYXJncywgdmFyYXJncywgdmFya3csIGRlZmF1bHRzLA0KICAgICAgICBrd29ubHksIGt3b25seWRlZiwgYW5uLCBmb3JtYXR2YWx1ZT1sYW1iZGEgdmFsdWU6ICIiKQ0KICAgIHJldHVybiBzaWduYXR1cmVbMTotMV0sIGZ1bmMNCg0KDQpkZWYgX2NoZWNrX3NpZ25hdHVyZShmdW5jLCBtb2NrLCBza2lwZmlyc3QsIGluc3RhbmNlPUZhbHNlKToNCiAgICBpZiBub3QgX2NhbGxhYmxlKGZ1bmMpOg0KICAgICAgICByZXR1cm4NCg0KICAgIHJlc3VsdCA9IF9nZXRzaWduYXR1cmUoZnVuYywgc2tpcGZpcnN0LCBpbnN0YW5jZSkNCiAgICBpZiByZXN1bHQgaXMgTm9uZToNCiAgICAgICAgcmV0dXJuDQogICAgc2lnbmF0dXJlLCBmdW5jID0gcmVzdWx0DQoNCiAgICAjIGNhbid0IHVzZSBzZWxmIGJlY2F1c2UgInNlbGYiIGlzIGNvbW1vbiBhcyBhbiBhcmd1bWVudCBuYW1lDQogICAgIyB1bmZvcnR1bmF0ZWx5IGV2ZW4gbm90IGluIHRoZSBmaXJzdCBwbGFjZQ0KICAgIHNyYyA9ICJsYW1iZGEgX21vY2tfc2VsZiwgJXM6IE5vbmUiICUgc2lnbmF0dXJlDQogICAgY2hlY2tzaWcgPSBldmFsKHNyYywge30pDQogICAgX2NvcHlfZnVuY19kZXRhaWxzKGZ1bmMsIGNoZWNrc2lnKQ0KICAgIHR5cGUobW9jaykuX21vY2tfY2hlY2tfc2lnID0gY2hlY2tzaWcNCg0KDQpkZWYgX2NvcHlfZnVuY19kZXRhaWxzKGZ1bmMsIGZ1bmNvcHkpOg0KICAgIGZ1bmNvcHkuX19uYW1lX18gPSBmdW5jLl9fbmFtZV9fDQogICAgZnVuY29weS5fX2RvY19fID0gZnVuYy5fX2RvY19fDQogICAgIyB3ZSBleHBsaWNpdGx5IGRvbid0IGNvcHkgZnVuYy5fX2RpY3RfXyBpbnRvIHRoaXMgY29weSBhcyBpdCB3b3VsZA0KICAgICMgZXhwb3NlIG9yaWdpbmFsIGF0dHJpYnV0ZXMgdGhhdCBzaG91bGQgYmUgbW9ja2VkDQogICAgZnVuY29weS5fX21vZHVsZV9fID0gZnVuYy5fX21vZHVsZV9fDQogICAgZnVuY29weS5fX2RlZmF1bHRzX18gPSBmdW5jLl9fZGVmYXVsdHNfXw0KICAgIGZ1bmNvcHkuX19rd2RlZmF1bHRzX18gPSBmdW5jLl9fa3dkZWZhdWx0c19fDQoNCg0KZGVmIF9jYWxsYWJsZShvYmopOg0KICAgIGlmIGlzaW5zdGFuY2Uob2JqLCB0eXBlKToNCiAgICAgICAgcmV0dXJuIFRydWUNCiAgICBpZiBnZXRhdHRyKG9iaiwgJ19fY2FsbF9fJywgTm9uZSkgaXMgbm90IE5vbmU6DQogICAgICAgIHJldHVybiBUcnVlDQogICAgcmV0dXJuIEZhbHNlDQoNCg0KZGVmIF9pc19saXN0KG9iaik6DQogICAgIyBjaGVja3MgZm9yIGxpc3Qgb3IgdHVwbGVzDQogICAgIyBYWFhYIGJhZGx5IG5hbWVkIQ0KICAgIHJldHVybiB0eXBlKG9iaikgaW4gKGxpc3QsIHR1cGxlKQ0KDQoNCmRlZiBfaW5zdGFuY2VfY2FsbGFibGUob2JqKToNCiAgICAiIiJHaXZlbiBhbiBvYmplY3QsIHJldHVybiBUcnVlIGlmIHRoZSBvYmplY3QgaXMgY2FsbGFibGUuDQogICAgRm9yIGNsYXNzZXMsIHJldHVybiBUcnVlIGlmIGluc3RhbmNlcyB3b3VsZCBiZSBjYWxsYWJsZS4iIiINCiAgICBpZiBub3QgaXNpbnN0YW5jZShvYmosIHR5cGUpOg0KICAgICAgICAjIGFscmVhZHkgYW4gaW5zdGFuY2UNCiAgICAgICAgcmV0dXJuIGdldGF0dHIob2JqLCAnX19jYWxsX18nLCBOb25lKSBpcyBub3QgTm9uZQ0KDQogICAgIyAqY291bGQqIGJlIGJyb2tlbiBieSBhIGNsYXNzIG92ZXJyaWRpbmcgX19tcm9fXyBvciBfX2RpY3RfXyB2aWENCiAgICAjIGEgbWV0YWNsYXNzDQogICAgZm9yIGJhc2UgaW4gKG9iaiwpICsgb2JqLl9fbXJvX186DQogICAgICAgIGlmIGJhc2UuX19kaWN0X18uZ2V0KCdfX2NhbGxfXycpIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICByZXR1cm4gRmFsc2UNCg0KDQpkZWYgX3NldF9zaWduYXR1cmUobW9jaywgb3JpZ2luYWwsIGluc3RhbmNlPUZhbHNlKToNCiAgICAjIGNyZWF0ZXMgYSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSAoKmFyZ3MsICoqa3dhcmdzKSB0aGF0IGRlbGVnYXRlcyB0byBhDQogICAgIyBtb2NrLiBJdCBzdGlsbCBkb2VzIHNpZ25hdHVyZSBjaGVja2luZyBieSBjYWxsaW5nIGEgbGFtYmRhIHdpdGggdGhlIHNhbWUNCiAgICAjIHNpZ25hdHVyZSBhcyB0aGUgb3JpZ2luYWwuDQogICAgaWYgbm90IF9jYWxsYWJsZShvcmlnaW5hbCk6DQogICAgICAgIHJldHVybg0KDQogICAgc2tpcGZpcnN0ID0gaXNpbnN0YW5jZShvcmlnaW5hbCwgdHlwZSkNCiAgICByZXN1bHQgPSBfZ2V0c2lnbmF0dXJlKG9yaWdpbmFsLCBza2lwZmlyc3QsIGluc3RhbmNlKQ0KICAgIGlmIHJlc3VsdCBpcyBOb25lOg0KICAgICAgICAjIHdhcyBhIEMgZnVuY3Rpb24gKGUuZy4gb2JqZWN0KCkuX19pbml0X18gKSB0aGF0IGNhbid0IGJlIG1vY2tlZA0KICAgICAgICByZXR1cm4NCg0KICAgIHNpZ25hdHVyZSwgZnVuYyA9IHJlc3VsdA0KDQogICAgc3JjID0gImxhbWJkYSAlczogTm9uZSIgJSBzaWduYXR1cmUNCiAgICBjaGVja3NpZyA9IGV2YWwoc3JjLCB7fSkNCiAgICBfY29weV9mdW5jX2RldGFpbHMoZnVuYywgY2hlY2tzaWcpDQoNCiAgICBuYW1lID0gb3JpZ2luYWwuX19uYW1lX18NCiAgICBpZiBub3QgbmFtZS5pc2lkZW50aWZpZXIoKToNCiAgICAgICAgbmFtZSA9ICdmdW5jb3B5Jw0KICAgIGNvbnRleHQgPSB7J19jaGVja3NpZ18nOiBjaGVja3NpZywgJ21vY2snOiBtb2NrfQ0KICAgIHNyYyA9ICIiImRlZiAlcygqYXJncywgKiprd2FyZ3MpOg0KICAgIF9jaGVja3NpZ18oKmFyZ3MsICoqa3dhcmdzKQ0KICAgIHJldHVybiBtb2NrKCphcmdzLCAqKmt3YXJncykiIiIgJSBuYW1lDQogICAgZXhlYyAoc3JjLCBjb250ZXh0KQ0KICAgIGZ1bmNvcHkgPSBjb250ZXh0W25hbWVdDQogICAgX3NldHVwX2Z1bmMoZnVuY29weSwgbW9jaykNCiAgICByZXR1cm4gZnVuY29weQ0KDQoNCmRlZiBfc2V0dXBfZnVuYyhmdW5jb3B5LCBtb2NrKToNCiAgICBmdW5jb3B5Lm1vY2sgPSBtb2NrDQoNCiAgICAjIGNhbid0IHVzZSBpc2luc3RhbmNlIHdpdGggbW9ja3MNCiAgICBpZiBub3QgX2lzX2luc3RhbmNlX21vY2sobW9jayk6DQogICAgICAgIHJldHVybg0KDQogICAgZGVmIGFzc2VydF9jYWxsZWRfd2l0aCgqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICByZXR1cm4gbW9jay5hc3NlcnRfY2FsbGVkX3dpdGgoKmFyZ3MsICoqa3dhcmdzKQ0KICAgIGRlZiBhc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICByZXR1cm4gbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgqYXJncywgKiprd2FyZ3MpDQogICAgZGVmIGFzc2VydF9oYXNfY2FsbHMoKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgcmV0dXJuIG1vY2suYXNzZXJ0X2hhc19jYWxscygqYXJncywgKiprd2FyZ3MpDQogICAgZGVmIGFzc2VydF9hbnlfY2FsbCgqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICByZXR1cm4gbW9jay5hc3NlcnRfYW55X2NhbGwoKmFyZ3MsICoqa3dhcmdzKQ0KICAgIGRlZiByZXNldF9tb2NrKCk6DQogICAgICAgIGZ1bmNvcHkubWV0aG9kX2NhbGxzID0gX0NhbGxMaXN0KCkNCiAgICAgICAgZnVuY29weS5tb2NrX2NhbGxzID0gX0NhbGxMaXN0KCkNCiAgICAgICAgbW9jay5yZXNldF9tb2NrKCkNCiAgICAgICAgcmV0ID0gZnVuY29weS5yZXR1cm5fdmFsdWUNCiAgICAgICAgaWYgX2lzX2luc3RhbmNlX21vY2socmV0KSBhbmQgbm90IHJldCBpcyBtb2NrOg0KICAgICAgICAgICAgcmV0LnJlc2V0X21vY2soKQ0KDQogICAgZnVuY29weS5jYWxsZWQgPSBGYWxzZQ0KICAgIGZ1bmNvcHkuY2FsbF9jb3VudCA9IDANCiAgICBmdW5jb3B5LmNhbGxfYXJncyA9IE5vbmUNCiAgICBmdW5jb3B5LmNhbGxfYXJnc19saXN0ID0gX0NhbGxMaXN0KCkNCiAgICBmdW5jb3B5Lm1ldGhvZF9jYWxscyA9IF9DYWxsTGlzdCgpDQogICAgZnVuY29weS5tb2NrX2NhbGxzID0gX0NhbGxMaXN0KCkNCg0KICAgIGZ1bmNvcHkucmV0dXJuX3ZhbHVlID0gbW9jay5yZXR1cm5fdmFsdWUNCiAgICBmdW5jb3B5LnNpZGVfZWZmZWN0ID0gbW9jay5zaWRlX2VmZmVjdA0KICAgIGZ1bmNvcHkuX21vY2tfY2hpbGRyZW4gPSBtb2NrLl9tb2NrX2NoaWxkcmVuDQoNCiAgICBmdW5jb3B5LmFzc2VydF9jYWxsZWRfd2l0aCA9IGFzc2VydF9jYWxsZWRfd2l0aA0KICAgIGZ1bmNvcHkuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGggPSBhc3NlcnRfY2FsbGVkX29uY2Vfd2l0aA0KICAgIGZ1bmNvcHkuYXNzZXJ0X2hhc19jYWxscyA9IGFzc2VydF9oYXNfY2FsbHMNCiAgICBmdW5jb3B5LmFzc2VydF9hbnlfY2FsbCA9IGFzc2VydF9hbnlfY2FsbA0KICAgIGZ1bmNvcHkucmVzZXRfbW9jayA9IHJlc2V0X21vY2sNCg0KICAgIG1vY2suX21vY2tfZGVsZWdhdGUgPSBmdW5jb3B5DQoNCg0KZGVmIF9pc19tYWdpYyhuYW1lKToNCiAgICByZXR1cm4gJ19fJXNfXycgJSBuYW1lWzI6LTJdID09IG5hbWUNCg0KDQpjbGFzcyBfU2VudGluZWxPYmplY3Qob2JqZWN0KToNCiAgICAiQSB1bmlxdWUsIG5hbWVkLCBzZW50aW5lbCBvYmplY3QuIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lKToNCiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQ0KDQogICAgZGVmIF9fcmVwcl9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gJ3NlbnRpbmVsLiVzJyAlIHNlbGYubmFtZQ0KDQoNCmNsYXNzIF9TZW50aW5lbChvYmplY3QpOg0KICAgICIiIkFjY2VzcyBhdHRyaWJ1dGVzIHRvIHJldHVybiBhIG5hbWVkIG9iamVjdCwgdXNhYmxlIGFzIGEgc2VudGluZWwuIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBzZWxmLl9zZW50aW5lbHMgPSB7fQ0KDQogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIG5hbWUpOg0KICAgICAgICBpZiBuYW1lID09ICdfX2Jhc2VzX18nOg0KICAgICAgICAgICAgIyBXaXRob3V0IHRoaXMgaGVscCh1bml0dGVzdC5tb2NrKSByYWlzZXMgYW4gZXhjZXB0aW9uDQogICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcg0KICAgICAgICByZXR1cm4gc2VsZi5fc2VudGluZWxzLnNldGRlZmF1bHQobmFtZSwgX1NlbnRpbmVsT2JqZWN0KG5hbWUpKQ0KDQoNCnNlbnRpbmVsID0gX1NlbnRpbmVsKCkNCg0KREVGQVVMVCA9IHNlbnRpbmVsLkRFRkFVTFQNCl9taXNzaW5nID0gc2VudGluZWwuTUlTU0lORw0KX2RlbGV0ZWQgPSBzZW50aW5lbC5ERUxFVEVEDQoNCg0KZGVmIF9jb3B5KHZhbHVlKToNCiAgICBpZiB0eXBlKHZhbHVlKSBpbiAoZGljdCwgbGlzdCwgdHVwbGUsIHNldCk6DQogICAgICAgIHJldHVybiB0eXBlKHZhbHVlKSh2YWx1ZSkNCiAgICByZXR1cm4gdmFsdWUNCg0KDQpfYWxsb3dlZF9uYW1lcyA9IHNldCgNCiAgICBbDQogICAgICAgICdyZXR1cm5fdmFsdWUnLCAnX21vY2tfcmV0dXJuX3ZhbHVlJywgJ3NpZGVfZWZmZWN0JywNCiAgICAgICAgJ19tb2NrX3NpZGVfZWZmZWN0JywgJ19tb2NrX3BhcmVudCcsICdfbW9ja19uZXdfcGFyZW50JywNCiAgICAgICAgJ19tb2NrX25hbWUnLCAnX21vY2tfbmV3X25hbWUnDQogICAgXQ0KKQ0KDQoNCmRlZiBfZGVsZWdhdGluZ19wcm9wZXJ0eShuYW1lKToNCiAgICBfYWxsb3dlZF9uYW1lcy5hZGQobmFtZSkNCiAgICBfdGhlX25hbWUgPSAnX21vY2tfJyArIG5hbWUNCiAgICBkZWYgX2dldChzZWxmLCBuYW1lPW5hbWUsIF90aGVfbmFtZT1fdGhlX25hbWUpOg0KICAgICAgICBzaWcgPSBzZWxmLl9tb2NrX2RlbGVnYXRlDQogICAgICAgIGlmIHNpZyBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZiwgX3RoZV9uYW1lKQ0KICAgICAgICByZXR1cm4gZ2V0YXR0cihzaWcsIG5hbWUpDQogICAgZGVmIF9zZXQoc2VsZiwgdmFsdWUsIG5hbWU9bmFtZSwgX3RoZV9uYW1lPV90aGVfbmFtZSk6DQogICAgICAgIHNpZyA9IHNlbGYuX21vY2tfZGVsZWdhdGUNCiAgICAgICAgaWYgc2lnIGlzIE5vbmU6DQogICAgICAgICAgICBzZWxmLl9fZGljdF9fW190aGVfbmFtZV0gPSB2YWx1ZQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2V0YXR0cihzaWcsIG5hbWUsIHZhbHVlKQ0KDQogICAgcmV0dXJuIHByb3BlcnR5KF9nZXQsIF9zZXQpDQoNCg0KDQpjbGFzcyBfQ2FsbExpc3QobGlzdCk6DQoNCiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIHZhbHVlKToNCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodmFsdWUsIGxpc3QpOg0KICAgICAgICAgICAgcmV0dXJuIGxpc3QuX19jb250YWluc19fKHNlbGYsIHZhbHVlKQ0KICAgICAgICBsZW5fdmFsdWUgPSBsZW4odmFsdWUpDQogICAgICAgIGxlbl9zZWxmID0gbGVuKHNlbGYpDQogICAgICAgIGlmIGxlbl92YWx1ZSA+IGxlbl9zZWxmOg0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuX3NlbGYgLSBsZW5fdmFsdWUgKyAxKToNCiAgICAgICAgICAgIHN1Yl9saXN0ID0gc2VsZltpOmkrbGVuX3ZhbHVlXQ0KICAgICAgICAgICAgaWYgc3ViX2xpc3QgPT0gdmFsdWU6DQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICBkZWYgX19yZXByX18oc2VsZik6DQogICAgICAgIHJldHVybiBwcHJpbnQucGZvcm1hdChsaXN0KHNlbGYpKQ0KDQoNCmRlZiBfY2hlY2tfYW5kX3NldF9wYXJlbnQocGFyZW50LCB2YWx1ZSwgbmFtZSwgbmV3X25hbWUpOg0KICAgIGlmIG5vdCBfaXNfaW5zdGFuY2VfbW9jayh2YWx1ZSk6DQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIGlmICgodmFsdWUuX21vY2tfbmFtZSBvciB2YWx1ZS5fbW9ja19uZXdfbmFtZSkgb3INCiAgICAgICAgKHZhbHVlLl9tb2NrX3BhcmVudCBpcyBub3QgTm9uZSkgb3INCiAgICAgICAgKHZhbHVlLl9tb2NrX25ld19wYXJlbnQgaXMgbm90IE5vbmUpKToNCiAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICBfcGFyZW50ID0gcGFyZW50DQogICAgd2hpbGUgX3BhcmVudCBpcyBub3QgTm9uZToNCiAgICAgICAgIyBzZXR0aW5nIGEgbW9jayAodmFsdWUpIGFzIGEgY2hpbGQgb3IgcmV0dXJuIHZhbHVlIG9mIGl0c2VsZg0KICAgICAgICAjIHNob3VsZCBub3QgbW9kaWZ5IHRoZSBtb2NrDQogICAgICAgIGlmIF9wYXJlbnQgaXMgdmFsdWU6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgX3BhcmVudCA9IF9wYXJlbnQuX21vY2tfbmV3X3BhcmVudA0KDQogICAgaWYgbmV3X25hbWU6DQogICAgICAgIHZhbHVlLl9tb2NrX25ld19wYXJlbnQgPSBwYXJlbnQNCiAgICAgICAgdmFsdWUuX21vY2tfbmV3X25hbWUgPSBuZXdfbmFtZQ0KICAgIGlmIG5hbWU6DQogICAgICAgIHZhbHVlLl9tb2NrX3BhcmVudCA9IHBhcmVudA0KICAgICAgICB2YWx1ZS5fbW9ja19uYW1lID0gbmFtZQ0KICAgIHJldHVybiBUcnVlDQoNCg0KDQpjbGFzcyBCYXNlKG9iamVjdCk6DQogICAgX21vY2tfcmV0dXJuX3ZhbHVlID0gREVGQVVMVA0KICAgIF9tb2NrX3NpZGVfZWZmZWN0ID0gTm9uZQ0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICBwYXNzDQoNCg0KDQpjbGFzcyBOb25DYWxsYWJsZU1vY2soQmFzZSk6DQogICAgIiIiQSBub24tY2FsbGFibGUgdmVyc2lvbiBvZiBgTW9ja2AiIiINCg0KICAgIGRlZiBfX25ld19fKGNscywgKmFyZ3MsICoqa3cpOg0KICAgICAgICAjIGV2ZXJ5IGluc3RhbmNlIGhhcyBpdHMgb3duIGNsYXNzDQogICAgICAgICMgc28gd2UgY2FuIGNyZWF0ZSBtYWdpYyBtZXRob2RzIG9uIHRoZQ0KICAgICAgICAjIGNsYXNzIHdpdGhvdXQgc3RvbXBpbmcgb24gb3RoZXIgbW9ja3MNCiAgICAgICAgbmV3ID0gdHlwZShjbHMuX19uYW1lX18sIChjbHMsKSwgeydfX2RvY19fJzogY2xzLl9fZG9jX199KQ0KICAgICAgICBpbnN0YW5jZSA9IG9iamVjdC5fX25ld19fKG5ldykNCiAgICAgICAgcmV0dXJuIGluc3RhbmNlDQoNCg0KICAgIGRlZiBfX2luaXRfXygNCiAgICAgICAgICAgIHNlbGYsIHNwZWM9Tm9uZSwgd3JhcHM9Tm9uZSwgbmFtZT1Ob25lLCBzcGVjX3NldD1Ob25lLA0KICAgICAgICAgICAgcGFyZW50PU5vbmUsIF9zcGVjX3N0YXRlPU5vbmUsIF9uZXdfbmFtZT0nJywgX25ld19wYXJlbnQ9Tm9uZSwNCiAgICAgICAgICAgICoqa3dhcmdzDQogICAgICAgICk6DQogICAgICAgIGlmIF9uZXdfcGFyZW50IGlzIE5vbmU6DQogICAgICAgICAgICBfbmV3X3BhcmVudCA9IHBhcmVudA0KDQogICAgICAgIF9fZGljdF9fID0gc2VsZi5fX2RpY3RfXw0KICAgICAgICBfX2RpY3RfX1snX21vY2tfcGFyZW50J10gPSBwYXJlbnQNCiAgICAgICAgX19kaWN0X19bJ19tb2NrX25hbWUnXSA9IG5hbWUNCiAgICAgICAgX19kaWN0X19bJ19tb2NrX25ld19uYW1lJ10gPSBfbmV3X25hbWUNCiAgICAgICAgX19kaWN0X19bJ19tb2NrX25ld19wYXJlbnQnXSA9IF9uZXdfcGFyZW50DQoNCiAgICAgICAgaWYgc3BlY19zZXQgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBzcGVjID0gc3BlY19zZXQNCiAgICAgICAgICAgIHNwZWNfc2V0ID0gVHJ1ZQ0KDQogICAgICAgIHNlbGYuX21vY2tfYWRkX3NwZWMoc3BlYywgc3BlY19zZXQpDQoNCiAgICAgICAgX19kaWN0X19bJ19tb2NrX2NoaWxkcmVuJ10gPSB7fQ0KICAgICAgICBfX2RpY3RfX1snX21vY2tfd3JhcHMnXSA9IHdyYXBzDQogICAgICAgIF9fZGljdF9fWydfbW9ja19kZWxlZ2F0ZSddID0gTm9uZQ0KDQogICAgICAgIF9fZGljdF9fWydfbW9ja19jYWxsZWQnXSA9IEZhbHNlDQogICAgICAgIF9fZGljdF9fWydfbW9ja19jYWxsX2FyZ3MnXSA9IE5vbmUNCiAgICAgICAgX19kaWN0X19bJ19tb2NrX2NhbGxfY291bnQnXSA9IDANCiAgICAgICAgX19kaWN0X19bJ19tb2NrX2NhbGxfYXJnc19saXN0J10gPSBfQ2FsbExpc3QoKQ0KICAgICAgICBfX2RpY3RfX1snX21vY2tfbW9ja19jYWxscyddID0gX0NhbGxMaXN0KCkNCg0KICAgICAgICBfX2RpY3RfX1snbWV0aG9kX2NhbGxzJ10gPSBfQ2FsbExpc3QoKQ0KDQogICAgICAgIGlmIGt3YXJnczoNCiAgICAgICAgICAgIHNlbGYuY29uZmlndXJlX21vY2soKiprd2FyZ3MpDQoNCiAgICAgICAgX3NhZmVfc3VwZXIoTm9uQ2FsbGFibGVNb2NrLCBzZWxmKS5fX2luaXRfXygNCiAgICAgICAgICAgIHNwZWMsIHdyYXBzLCBuYW1lLCBzcGVjX3NldCwgcGFyZW50LA0KICAgICAgICAgICAgX3NwZWNfc3RhdGUNCiAgICAgICAgKQ0KDQoNCiAgICBkZWYgYXR0YWNoX21vY2soc2VsZiwgbW9jaywgYXR0cmlidXRlKToNCiAgICAgICAgIiIiDQogICAgICAgIEF0dGFjaCBhIG1vY2sgYXMgYW4gYXR0cmlidXRlIG9mIHRoaXMgb25lLCByZXBsYWNpbmcgaXRzIG5hbWUgYW5kDQogICAgICAgIHBhcmVudC4gQ2FsbHMgdG8gdGhlIGF0dGFjaGVkIG1vY2sgd2lsbCBiZSByZWNvcmRlZCBpbiB0aGUNCiAgICAgICAgYG1ldGhvZF9jYWxsc2AgYW5kIGBtb2NrX2NhbGxzYCBhdHRyaWJ1dGVzIG9mIHRoaXMgb25lLiIiIg0KICAgICAgICBtb2NrLl9tb2NrX3BhcmVudCA9IE5vbmUNCiAgICAgICAgbW9jay5fbW9ja19uZXdfcGFyZW50ID0gTm9uZQ0KICAgICAgICBtb2NrLl9tb2NrX25hbWUgPSAnJw0KICAgICAgICBtb2NrLl9tb2NrX25ld19uYW1lID0gTm9uZQ0KDQogICAgICAgIHNldGF0dHIoc2VsZiwgYXR0cmlidXRlLCBtb2NrKQ0KDQoNCiAgICBkZWYgbW9ja19hZGRfc3BlYyhzZWxmLCBzcGVjLCBzcGVjX3NldD1GYWxzZSk6DQogICAgICAgICIiIkFkZCBhIHNwZWMgdG8gYSBtb2NrLiBgc3BlY2AgY2FuIGVpdGhlciBiZSBhbiBvYmplY3Qgb3IgYQ0KICAgICAgICBsaXN0IG9mIHN0cmluZ3MuIE9ubHkgYXR0cmlidXRlcyBvbiB0aGUgYHNwZWNgIGNhbiBiZSBmZXRjaGVkIGFzDQogICAgICAgIGF0dHJpYnV0ZXMgZnJvbSB0aGUgbW9jay4NCg0KICAgICAgICBJZiBgc3BlY19zZXRgIGlzIFRydWUgdGhlbiBvbmx5IGF0dHJpYnV0ZXMgb24gdGhlIHNwZWMgY2FuIGJlIHNldC4iIiINCiAgICAgICAgc2VsZi5fbW9ja19hZGRfc3BlYyhzcGVjLCBzcGVjX3NldCkNCg0KDQogICAgZGVmIF9tb2NrX2FkZF9zcGVjKHNlbGYsIHNwZWMsIHNwZWNfc2V0KToNCiAgICAgICAgX3NwZWNfY2xhc3MgPSBOb25lDQoNCiAgICAgICAgaWYgc3BlYyBpcyBub3QgTm9uZSBhbmQgbm90IF9pc19saXN0KHNwZWMpOg0KICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShzcGVjLCB0eXBlKToNCiAgICAgICAgICAgICAgICBfc3BlY19jbGFzcyA9IHNwZWMNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgX3NwZWNfY2xhc3MgPSBfZ2V0X2NsYXNzKHNwZWMpDQoNCiAgICAgICAgICAgIHNwZWMgPSBkaXIoc3BlYykNCg0KICAgICAgICBfX2RpY3RfXyA9IHNlbGYuX19kaWN0X18NCiAgICAgICAgX19kaWN0X19bJ19zcGVjX2NsYXNzJ10gPSBfc3BlY19jbGFzcw0KICAgICAgICBfX2RpY3RfX1snX3NwZWNfc2V0J10gPSBzcGVjX3NldA0KICAgICAgICBfX2RpY3RfX1snX21vY2tfbWV0aG9kcyddID0gc3BlYw0KDQoNCiAgICBkZWYgX19nZXRfcmV0dXJuX3ZhbHVlKHNlbGYpOg0KICAgICAgICByZXQgPSBzZWxmLl9tb2NrX3JldHVybl92YWx1ZQ0KICAgICAgICBpZiBzZWxmLl9tb2NrX2RlbGVnYXRlIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgcmV0ID0gc2VsZi5fbW9ja19kZWxlZ2F0ZS5yZXR1cm5fdmFsdWUNCg0KICAgICAgICBpZiByZXQgaXMgREVGQVVMVDoNCiAgICAgICAgICAgIHJldCA9IHNlbGYuX2dldF9jaGlsZF9tb2NrKA0KICAgICAgICAgICAgICAgIF9uZXdfcGFyZW50PXNlbGYsIF9uZXdfbmFtZT0nKCknDQogICAgICAgICAgICApDQogICAgICAgICAgICBzZWxmLnJldHVybl92YWx1ZSA9IHJldA0KICAgICAgICByZXR1cm4gcmV0DQoNCg0KICAgIGRlZiBfX3NldF9yZXR1cm5fdmFsdWUoc2VsZiwgdmFsdWUpOg0KICAgICAgICBpZiBzZWxmLl9tb2NrX2RlbGVnYXRlIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgc2VsZi5fbW9ja19kZWxlZ2F0ZS5yZXR1cm5fdmFsdWUgPSB2YWx1ZQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5fbW9ja19yZXR1cm5fdmFsdWUgPSB2YWx1ZQ0KICAgICAgICAgICAgX2NoZWNrX2FuZF9zZXRfcGFyZW50KHNlbGYsIHZhbHVlLCBOb25lLCAnKCknKQ0KDQogICAgX19yZXR1cm5fdmFsdWVfZG9jID0gIlRoZSB2YWx1ZSB0byBiZSByZXR1cm5lZCB3aGVuIHRoZSBtb2NrIGlzIGNhbGxlZC4iDQogICAgcmV0dXJuX3ZhbHVlID0gcHJvcGVydHkoX19nZXRfcmV0dXJuX3ZhbHVlLCBfX3NldF9yZXR1cm5fdmFsdWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX19yZXR1cm5fdmFsdWVfZG9jKQ0KDQoNCiAgICBAcHJvcGVydHkNCiAgICBkZWYgX19jbGFzc19fKHNlbGYpOg0KICAgICAgICBpZiBzZWxmLl9zcGVjX2NsYXNzIGlzIE5vbmU6DQogICAgICAgICAgICByZXR1cm4gdHlwZShzZWxmKQ0KICAgICAgICByZXR1cm4gc2VsZi5fc3BlY19jbGFzcw0KDQogICAgY2FsbGVkID0gX2RlbGVnYXRpbmdfcHJvcGVydHkoJ2NhbGxlZCcpDQogICAgY2FsbF9jb3VudCA9IF9kZWxlZ2F0aW5nX3Byb3BlcnR5KCdjYWxsX2NvdW50JykNCiAgICBjYWxsX2FyZ3MgPSBfZGVsZWdhdGluZ19wcm9wZXJ0eSgnY2FsbF9hcmdzJykNCiAgICBjYWxsX2FyZ3NfbGlzdCA9IF9kZWxlZ2F0aW5nX3Byb3BlcnR5KCdjYWxsX2FyZ3NfbGlzdCcpDQogICAgbW9ja19jYWxscyA9IF9kZWxlZ2F0aW5nX3Byb3BlcnR5KCdtb2NrX2NhbGxzJykNCg0KDQogICAgZGVmIF9fZ2V0X3NpZGVfZWZmZWN0KHNlbGYpOg0KICAgICAgICBkZWxlZ2F0ZWQgPSBzZWxmLl9tb2NrX2RlbGVnYXRlDQogICAgICAgIGlmIGRlbGVnYXRlZCBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIHNlbGYuX21vY2tfc2lkZV9lZmZlY3QNCiAgICAgICAgcmV0dXJuIGRlbGVnYXRlZC5zaWRlX2VmZmVjdA0KDQogICAgZGVmIF9fc2V0X3NpZGVfZWZmZWN0KHNlbGYsIHZhbHVlKToNCiAgICAgICAgdmFsdWUgPSBfdHJ5X2l0ZXIodmFsdWUpDQogICAgICAgIGRlbGVnYXRlZCA9IHNlbGYuX21vY2tfZGVsZWdhdGUNCiAgICAgICAgaWYgZGVsZWdhdGVkIGlzIE5vbmU6DQogICAgICAgICAgICBzZWxmLl9tb2NrX3NpZGVfZWZmZWN0ID0gdmFsdWUNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGRlbGVnYXRlZC5zaWRlX2VmZmVjdCA9IHZhbHVlDQoNCiAgICBzaWRlX2VmZmVjdCA9IHByb3BlcnR5KF9fZ2V0X3NpZGVfZWZmZWN0LCBfX3NldF9zaWRlX2VmZmVjdCkNCg0KDQogICAgZGVmIHJlc2V0X21vY2soc2VsZik6DQogICAgICAgICJSZXN0b3JlIHRoZSBtb2NrIG9iamVjdCB0byBpdHMgaW5pdGlhbCBzdGF0ZS4iDQogICAgICAgIHNlbGYuY2FsbGVkID0gRmFsc2UNCiAgICAgICAgc2VsZi5jYWxsX2FyZ3MgPSBOb25lDQogICAgICAgIHNlbGYuY2FsbF9jb3VudCA9IDANCiAgICAgICAgc2VsZi5tb2NrX2NhbGxzID0gX0NhbGxMaXN0KCkNCiAgICAgICAgc2VsZi5jYWxsX2FyZ3NfbGlzdCA9IF9DYWxsTGlzdCgpDQogICAgICAgIHNlbGYubWV0aG9kX2NhbGxzID0gX0NhbGxMaXN0KCkNCg0KICAgICAgICBmb3IgY2hpbGQgaW4gc2VsZi5fbW9ja19jaGlsZHJlbi52YWx1ZXMoKToNCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY2hpbGQsIF9TcGVjU3RhdGUpOg0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBjaGlsZC5yZXNldF9tb2NrKCkNCg0KICAgICAgICByZXQgPSBzZWxmLl9tb2NrX3JldHVybl92YWx1ZQ0KICAgICAgICBpZiBfaXNfaW5zdGFuY2VfbW9jayhyZXQpIGFuZCByZXQgaXMgbm90IHNlbGY6DQogICAgICAgICAgICByZXQucmVzZXRfbW9jaygpDQoNCg0KICAgIGRlZiBjb25maWd1cmVfbW9jayhzZWxmLCAqKmt3YXJncyk6DQogICAgICAgICIiIlNldCBhdHRyaWJ1dGVzIG9uIHRoZSBtb2NrIHRocm91Z2gga2V5d29yZCBhcmd1bWVudHMuDQoNCiAgICAgICAgQXR0cmlidXRlcyBwbHVzIHJldHVybiB2YWx1ZXMgYW5kIHNpZGUgZWZmZWN0cyBjYW4gYmUgc2V0IG9uIGNoaWxkDQogICAgICAgIG1vY2tzIHVzaW5nIHN0YW5kYXJkIGRvdCBub3RhdGlvbiBhbmQgdW5wYWNraW5nIGEgZGljdGlvbmFyeSBpbiB0aGUNCiAgICAgICAgbWV0aG9kIGNhbGw6DQoNCiAgICAgICAgPj4+IGF0dHJzID0geydtZXRob2QucmV0dXJuX3ZhbHVlJzogMywgJ290aGVyLnNpZGVfZWZmZWN0JzogS2V5RXJyb3J9DQogICAgICAgID4+PiBtb2NrLmNvbmZpZ3VyZV9tb2NrKCoqYXR0cnMpIiIiDQogICAgICAgIGZvciBhcmcsIHZhbCBpbiBzb3J0ZWQoa3dhcmdzLml0ZW1zKCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyB3ZSBzb3J0IG9uIHRoZSBudW1iZXIgb2YgZG90cyBzbyB0aGF0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBhdHRyaWJ1dGVzIGFyZSBzZXQgYmVmb3JlIHdlIHNldCBhdHRyaWJ1dGVzIG9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBhdHRyaWJ1dGVzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PWxhbWJkYSBlbnRyeTogZW50cnlbMF0uY291bnQoJy4nKSk6DQogICAgICAgICAgICBhcmdzID0gYXJnLnNwbGl0KCcuJykNCiAgICAgICAgICAgIGZpbmFsID0gYXJncy5wb3AoKQ0KICAgICAgICAgICAgb2JqID0gc2VsZg0KICAgICAgICAgICAgZm9yIGVudHJ5IGluIGFyZ3M6DQogICAgICAgICAgICAgICAgb2JqID0gZ2V0YXR0cihvYmosIGVudHJ5KQ0KICAgICAgICAgICAgc2V0YXR0cihvYmosIGZpbmFsLCB2YWwpDQoNCg0KICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBuYW1lKToNCiAgICAgICAgaWYgbmFtZSA9PSAnX21vY2tfbWV0aG9kcyc6DQogICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihuYW1lKQ0KICAgICAgICBlbGlmIHNlbGYuX21vY2tfbWV0aG9kcyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIGlmIG5hbWUgbm90IGluIHNlbGYuX21vY2tfbWV0aG9kcyBvciBuYW1lIGluIF9hbGxfbWFnaWNzOg0KICAgICAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKCJNb2NrIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICVyIiAlIG5hbWUpDQogICAgICAgIGVsaWYgX2lzX21hZ2ljKG5hbWUpOg0KICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IobmFtZSkNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLl9tb2NrX2NoaWxkcmVuLmdldChuYW1lKQ0KICAgICAgICBpZiByZXN1bHQgaXMgX2RlbGV0ZWQ6DQogICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihuYW1lKQ0KICAgICAgICBlbGlmIHJlc3VsdCBpcyBOb25lOg0KICAgICAgICAgICAgd3JhcHMgPSBOb25lDQogICAgICAgICAgICBpZiBzZWxmLl9tb2NrX3dyYXBzIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICMgWFhYWCBzaG91bGQgd2UgZ2V0IHRoZSBhdHRyaWJ1dGUgd2l0aG91dCB0cmlnZ2VyaW5nIGNvZGUNCiAgICAgICAgICAgICAgICAjIGV4ZWN1dGlvbj8NCiAgICAgICAgICAgICAgICB3cmFwcyA9IGdldGF0dHIoc2VsZi5fbW9ja193cmFwcywgbmFtZSkNCg0KICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5fZ2V0X2NoaWxkX21vY2soDQogICAgICAgICAgICAgICAgcGFyZW50PXNlbGYsIG5hbWU9bmFtZSwgd3JhcHM9d3JhcHMsIF9uZXdfbmFtZT1uYW1lLA0KICAgICAgICAgICAgICAgIF9uZXdfcGFyZW50PXNlbGYNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIHNlbGYuX21vY2tfY2hpbGRyZW5bbmFtZV0gID0gcmVzdWx0DQoNCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHJlc3VsdCwgX1NwZWNTdGF0ZSk6DQogICAgICAgICAgICByZXN1bHQgPSBjcmVhdGVfYXV0b3NwZWMoDQogICAgICAgICAgICAgICAgcmVzdWx0LnNwZWMsIHJlc3VsdC5zcGVjX3NldCwgcmVzdWx0Lmluc3RhbmNlLA0KICAgICAgICAgICAgICAgIHJlc3VsdC5wYXJlbnQsIHJlc3VsdC5uYW1lDQogICAgICAgICAgICApDQogICAgICAgICAgICBzZWxmLl9tb2NrX2NoaWxkcmVuW25hbWVdICA9IHJlc3VsdA0KDQogICAgICAgIHJldHVybiByZXN1bHQNCg0KDQogICAgZGVmIF9fcmVwcl9fKHNlbGYpOg0KICAgICAgICBfbmFtZV9saXN0ID0gW3NlbGYuX21vY2tfbmV3X25hbWVdDQogICAgICAgIF9wYXJlbnQgPSBzZWxmLl9tb2NrX25ld19wYXJlbnQNCiAgICAgICAgbGFzdCA9IHNlbGYNCg0KICAgICAgICBkb3QgPSAnLicNCiAgICAgICAgaWYgX25hbWVfbGlzdCA9PSBbJygpJ106DQogICAgICAgICAgICBkb3QgPSAnJw0KICAgICAgICBzZWVuID0gc2V0KCkNCiAgICAgICAgd2hpbGUgX3BhcmVudCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIGxhc3QgPSBfcGFyZW50DQoNCiAgICAgICAgICAgIF9uYW1lX2xpc3QuYXBwZW5kKF9wYXJlbnQuX21vY2tfbmV3X25hbWUgKyBkb3QpDQogICAgICAgICAgICBkb3QgPSAnLicNCiAgICAgICAgICAgIGlmIF9wYXJlbnQuX21vY2tfbmV3X25hbWUgPT0gJygpJzoNCiAgICAgICAgICAgICAgICBkb3QgPSAnJw0KDQogICAgICAgICAgICBfcGFyZW50ID0gX3BhcmVudC5fbW9ja19uZXdfcGFyZW50DQoNCiAgICAgICAgICAgICMgdXNlIGlkcyBoZXJlIHNvIGFzIG5vdCB0byBjYWxsIF9faGFzaF9fIG9uIHRoZSBtb2Nrcw0KICAgICAgICAgICAgaWYgaWQoX3BhcmVudCkgaW4gc2VlbjoNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgc2Vlbi5hZGQoaWQoX3BhcmVudCkpDQoNCiAgICAgICAgX25hbWVfbGlzdCA9IGxpc3QocmV2ZXJzZWQoX25hbWVfbGlzdCkpDQogICAgICAgIF9maXJzdCA9IGxhc3QuX21vY2tfbmFtZSBvciAnbW9jaycNCiAgICAgICAgaWYgbGVuKF9uYW1lX2xpc3QpID4gMToNCiAgICAgICAgICAgIGlmIF9uYW1lX2xpc3RbMV0gbm90IGluICgnKCknLCAnKCkuJyk6DQogICAgICAgICAgICAgICAgX2ZpcnN0ICs9ICcuJw0KICAgICAgICBfbmFtZV9saXN0WzBdID0gX2ZpcnN0DQogICAgICAgIG5hbWUgPSAnJy5qb2luKF9uYW1lX2xpc3QpDQoNCiAgICAgICAgbmFtZV9zdHJpbmcgPSAnJw0KICAgICAgICBpZiBuYW1lIG5vdCBpbiAoJ21vY2snLCAnbW9jay4nKToNCiAgICAgICAgICAgIG5hbWVfc3RyaW5nID0gJyBuYW1lPSVyJyAlIG5hbWUNCg0KICAgICAgICBzcGVjX3N0cmluZyA9ICcnDQogICAgICAgIGlmIHNlbGYuX3NwZWNfY2xhc3MgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBzcGVjX3N0cmluZyA9ICcgc3BlYz0lcicNCiAgICAgICAgICAgIGlmIHNlbGYuX3NwZWNfc2V0Og0KICAgICAgICAgICAgICAgIHNwZWNfc3RyaW5nID0gJyBzcGVjX3NldD0lcicNCiAgICAgICAgICAgIHNwZWNfc3RyaW5nID0gc3BlY19zdHJpbmcgJSBzZWxmLl9zcGVjX2NsYXNzLl9fbmFtZV9fDQogICAgICAgIHJldHVybiAiPCVzJXMlcyBpZD0nJXMnPiIgJSAoDQogICAgICAgICAgICB0eXBlKHNlbGYpLl9fbmFtZV9fLA0KICAgICAgICAgICAgbmFtZV9zdHJpbmcsDQogICAgICAgICAgICBzcGVjX3N0cmluZywNCiAgICAgICAgICAgIGlkKHNlbGYpDQogICAgICAgICkNCg0KDQogICAgZGVmIF9fZGlyX18oc2VsZik6DQogICAgICAgICIiIkZpbHRlciB0aGUgb3V0cHV0IG9mIGBkaXIobW9jaylgIHRvIG9ubHkgdXNlZnVsIG1lbWJlcnMuIiIiDQogICAgICAgIGlmIG5vdCBGSUxURVJfRElSOg0KICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5fX2Rpcl9fKHNlbGYpDQoNCiAgICAgICAgZXh0cmFzID0gc2VsZi5fbW9ja19tZXRob2RzIG9yIFtdDQogICAgICAgIGZyb21fdHlwZSA9IGRpcih0eXBlKHNlbGYpKQ0KICAgICAgICBmcm9tX2RpY3QgPSBsaXN0KHNlbGYuX19kaWN0X18pDQoNCiAgICAgICAgZnJvbV90eXBlID0gW2UgZm9yIGUgaW4gZnJvbV90eXBlIGlmIG5vdCBlLnN0YXJ0c3dpdGgoJ18nKV0NCiAgICAgICAgZnJvbV9kaWN0ID0gW2UgZm9yIGUgaW4gZnJvbV9kaWN0IGlmIG5vdCBlLnN0YXJ0c3dpdGgoJ18nKSBvcg0KICAgICAgICAgICAgICAgICAgICAgX2lzX21hZ2ljKGUpXQ0KICAgICAgICByZXR1cm4gc29ydGVkKHNldChleHRyYXMgKyBmcm9tX3R5cGUgKyBmcm9tX2RpY3QgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0KHNlbGYuX21vY2tfY2hpbGRyZW4pKSkNCg0KDQogICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIG5hbWUsIHZhbHVlKToNCiAgICAgICAgaWYgbmFtZSBpbiBfYWxsb3dlZF9uYW1lczoNCiAgICAgICAgICAgICMgcHJvcGVydHkgc2V0dGVycyBnbyB0aHJvdWdoIGhlcmUNCiAgICAgICAgICAgIHJldHVybiBvYmplY3QuX19zZXRhdHRyX18oc2VsZiwgbmFtZSwgdmFsdWUpDQogICAgICAgIGVsaWYgKHNlbGYuX3NwZWNfc2V0IGFuZCBzZWxmLl9tb2NrX21ldGhvZHMgaXMgbm90IE5vbmUgYW5kDQogICAgICAgICAgICBuYW1lIG5vdCBpbiBzZWxmLl9tb2NrX21ldGhvZHMgYW5kDQogICAgICAgICAgICBuYW1lIG5vdCBpbiBzZWxmLl9fZGljdF9fKToNCiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKCJNb2NrIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICclcyciICUgbmFtZSkNCiAgICAgICAgZWxpZiBuYW1lIGluIF91bnN1cHBvcnRlZF9tYWdpY3M6DQogICAgICAgICAgICBtc2cgPSAnQXR0ZW1wdGluZyB0byBzZXQgdW5zdXBwb3J0ZWQgbWFnaWMgbWV0aG9kICVyLicgJSBuYW1lDQogICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihtc2cpDQogICAgICAgIGVsaWYgbmFtZSBpbiBfYWxsX21hZ2ljczoNCiAgICAgICAgICAgIGlmIHNlbGYuX21vY2tfbWV0aG9kcyBpcyBub3QgTm9uZSBhbmQgbmFtZSBub3QgaW4gc2VsZi5fbW9ja19tZXRob2RzOg0KICAgICAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKCJNb2NrIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICclcyciICUgbmFtZSkNCg0KICAgICAgICAgICAgaWYgbm90IF9pc19pbnN0YW5jZV9tb2NrKHZhbHVlKToNCiAgICAgICAgICAgICAgICBzZXRhdHRyKHR5cGUoc2VsZiksIG5hbWUsIF9nZXRfbWV0aG9kKG5hbWUsIHZhbHVlKSkNCiAgICAgICAgICAgICAgICBvcmlnaW5hbCA9IHZhbHVlDQogICAgICAgICAgICAgICAgdmFsdWUgPSBsYW1iZGEgKmFyZ3MsICoqa3c6IG9yaWdpbmFsKHNlbGYsICphcmdzLCAqKmt3KQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAjIG9ubHkgc2V0IF9uZXdfbmFtZSBhbmQgbm90IG5hbWUgc28gdGhhdCBtb2NrX2NhbGxzIGlzIHRyYWNrZWQNCiAgICAgICAgICAgICAgICAjIGJ1dCBub3QgbWV0aG9kIGNhbGxzDQogICAgICAgICAgICAgICAgX2NoZWNrX2FuZF9zZXRfcGFyZW50KHNlbGYsIHZhbHVlLCBOb25lLCBuYW1lKQ0KICAgICAgICAgICAgICAgIHNldGF0dHIodHlwZShzZWxmKSwgbmFtZSwgdmFsdWUpDQogICAgICAgICAgICAgICAgc2VsZi5fbW9ja19jaGlsZHJlbltuYW1lXSA9IHZhbHVlDQogICAgICAgIGVsaWYgbmFtZSA9PSAnX19jbGFzc19fJzoNCiAgICAgICAgICAgIHNlbGYuX3NwZWNfY2xhc3MgPSB2YWx1ZQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBpZiBfY2hlY2tfYW5kX3NldF9wYXJlbnQoc2VsZiwgdmFsdWUsIG5hbWUsIG5hbWUpOg0KICAgICAgICAgICAgICAgIHNlbGYuX21vY2tfY2hpbGRyZW5bbmFtZV0gPSB2YWx1ZQ0KICAgICAgICByZXR1cm4gb2JqZWN0Ll9fc2V0YXR0cl9fKHNlbGYsIG5hbWUsIHZhbHVlKQ0KDQoNCiAgICBkZWYgX19kZWxhdHRyX18oc2VsZiwgbmFtZSk6DQogICAgICAgIGlmIG5hbWUgaW4gX2FsbF9tYWdpY3MgYW5kIG5hbWUgaW4gdHlwZShzZWxmKS5fX2RpY3RfXzoNCiAgICAgICAgICAgIGRlbGF0dHIodHlwZShzZWxmKSwgbmFtZSkNCiAgICAgICAgICAgIGlmIG5hbWUgbm90IGluIHNlbGYuX19kaWN0X186DQogICAgICAgICAgICAgICAgIyBmb3IgbWFnaWMgbWV0aG9kcyB0aGF0IGFyZSBzdGlsbCBNYWdpY1Byb3h5IG9iamVjdHMgYW5kDQogICAgICAgICAgICAgICAgIyBub3Qgc2V0IG9uIHRoZSBpbnN0YW5jZSBpdHNlbGYNCiAgICAgICAgICAgICAgICByZXR1cm4NCg0KICAgICAgICBpZiBuYW1lIGluIHNlbGYuX19kaWN0X186DQogICAgICAgICAgICBvYmplY3QuX19kZWxhdHRyX18oc2VsZiwgbmFtZSkNCg0KICAgICAgICBvYmogPSBzZWxmLl9tb2NrX2NoaWxkcmVuLmdldChuYW1lLCBfbWlzc2luZykNCiAgICAgICAgaWYgb2JqIGlzIF9kZWxldGVkOg0KICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IobmFtZSkNCiAgICAgICAgaWYgb2JqIGlzIG5vdCBfbWlzc2luZzoNCiAgICAgICAgICAgIGRlbCBzZWxmLl9tb2NrX2NoaWxkcmVuW25hbWVdDQogICAgICAgIHNlbGYuX21vY2tfY2hpbGRyZW5bbmFtZV0gPSBfZGVsZXRlZA0KDQoNCg0KICAgIGRlZiBfZm9ybWF0X21vY2tfY2FsbF9zaWduYXR1cmUoc2VsZiwgYXJncywga3dhcmdzKToNCiAgICAgICAgbmFtZSA9IHNlbGYuX21vY2tfbmFtZSBvciAnbW9jaycNCiAgICAgICAgcmV0dXJuIF9mb3JtYXRfY2FsbF9zaWduYXR1cmUobmFtZSwgYXJncywga3dhcmdzKQ0KDQoNCiAgICBkZWYgX2Zvcm1hdF9tb2NrX2ZhaWx1cmVfbWVzc2FnZShzZWxmLCBhcmdzLCBrd2FyZ3MpOg0KICAgICAgICBtZXNzYWdlID0gJ0V4cGVjdGVkIGNhbGw6ICVzXG5BY3R1YWwgY2FsbDogJXMnDQogICAgICAgIGV4cGVjdGVkX3N0cmluZyA9IHNlbGYuX2Zvcm1hdF9tb2NrX2NhbGxfc2lnbmF0dXJlKGFyZ3MsIGt3YXJncykNCiAgICAgICAgY2FsbF9hcmdzID0gc2VsZi5jYWxsX2FyZ3MNCiAgICAgICAgaWYgbGVuKGNhbGxfYXJncykgPT0gMzoNCiAgICAgICAgICAgIGNhbGxfYXJncyA9IGNhbGxfYXJnc1sxOl0NCiAgICAgICAgYWN0dWFsX3N0cmluZyA9IHNlbGYuX2Zvcm1hdF9tb2NrX2NhbGxfc2lnbmF0dXJlKCpjYWxsX2FyZ3MpDQogICAgICAgIHJldHVybiBtZXNzYWdlICUgKGV4cGVjdGVkX3N0cmluZywgYWN0dWFsX3N0cmluZykNCg0KDQogICAgZGVmIGFzc2VydF9jYWxsZWRfd2l0aChfbW9ja19zZWxmLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAiIiJhc3NlcnQgdGhhdCB0aGUgbW9jayB3YXMgY2FsbGVkIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuDQoNCiAgICAgICAgUmFpc2VzIGFuIEFzc2VydGlvbkVycm9yIGlmIHRoZSBhcmdzIGFuZCBrZXl3b3JkIGFyZ3MgcGFzc2VkIGluIGFyZQ0KICAgICAgICBkaWZmZXJlbnQgdG8gdGhlIGxhc3QgY2FsbCB0byB0aGUgbW9jay4iIiINCiAgICAgICAgc2VsZiA9IF9tb2NrX3NlbGYNCiAgICAgICAgaWYgc2VsZi5jYWxsX2FyZ3MgaXMgTm9uZToNCiAgICAgICAgICAgIGV4cGVjdGVkID0gc2VsZi5fZm9ybWF0X21vY2tfY2FsbF9zaWduYXR1cmUoYXJncywga3dhcmdzKQ0KICAgICAgICAgICAgcmFpc2UgQXNzZXJ0aW9uRXJyb3IoJ0V4cGVjdGVkIGNhbGw6ICVzXG5Ob3QgY2FsbGVkJyAlIChleHBlY3RlZCwpKQ0KDQogICAgICAgIGlmIHNlbGYuY2FsbF9hcmdzICE9IChhcmdzLCBrd2FyZ3MpOg0KICAgICAgICAgICAgbXNnID0gc2VsZi5fZm9ybWF0X21vY2tfZmFpbHVyZV9tZXNzYWdlKGFyZ3MsIGt3YXJncykNCiAgICAgICAgICAgIHJhaXNlIEFzc2VydGlvbkVycm9yKG1zZykNCg0KDQogICAgZGVmIGFzc2VydF9jYWxsZWRfb25jZV93aXRoKF9tb2NrX3NlbGYsICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICIiImFzc2VydCB0aGF0IHRoZSBtb2NrIHdhcyBjYWxsZWQgZXhhY3RseSBvbmNlIGFuZCB3aXRoIHRoZSBzcGVjaWZpZWQNCiAgICAgICAgYXJndW1lbnRzLiIiIg0KICAgICAgICBzZWxmID0gX21vY2tfc2VsZg0KICAgICAgICBpZiBub3Qgc2VsZi5jYWxsX2NvdW50ID09IDE6DQogICAgICAgICAgICBtc2cgPSAoIkV4cGVjdGVkIHRvIGJlIGNhbGxlZCBvbmNlLiBDYWxsZWQgJXMgdGltZXMuIiAlDQogICAgICAgICAgICAgICAgICAgc2VsZi5jYWxsX2NvdW50KQ0KICAgICAgICAgICAgcmFpc2UgQXNzZXJ0aW9uRXJyb3IobXNnKQ0KICAgICAgICByZXR1cm4gc2VsZi5hc3NlcnRfY2FsbGVkX3dpdGgoKmFyZ3MsICoqa3dhcmdzKQ0KDQoNCiAgICBkZWYgYXNzZXJ0X2hhc19jYWxscyhzZWxmLCBjYWxscywgYW55X29yZGVyPUZhbHNlKToNCiAgICAgICAgIiIiYXNzZXJ0IHRoZSBtb2NrIGhhcyBiZWVuIGNhbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgY2FsbHMuDQogICAgICAgIFRoZSBgbW9ja19jYWxsc2AgbGlzdCBpcyBjaGVja2VkIGZvciB0aGUgY2FsbHMuDQoNCiAgICAgICAgSWYgYGFueV9vcmRlcmAgaXMgRmFsc2UgKHRoZSBkZWZhdWx0KSB0aGVuIHRoZSBjYWxscyBtdXN0IGJlDQogICAgICAgIHNlcXVlbnRpYWwuIFRoZXJlIGNhbiBiZSBleHRyYSBjYWxscyBiZWZvcmUgb3IgYWZ0ZXIgdGhlDQogICAgICAgIHNwZWNpZmllZCBjYWxscy4NCg0KICAgICAgICBJZiBgYW55X29yZGVyYCBpcyBUcnVlIHRoZW4gdGhlIGNhbGxzIGNhbiBiZSBpbiBhbnkgb3JkZXIsIGJ1dA0KICAgICAgICB0aGV5IG11c3QgYWxsIGFwcGVhciBpbiBgbW9ja19jYWxsc2AuIiIiDQogICAgICAgIGlmIG5vdCBhbnlfb3JkZXI6DQogICAgICAgICAgICBpZiBjYWxscyBub3QgaW4gc2VsZi5tb2NrX2NhbGxzOg0KICAgICAgICAgICAgICAgIHJhaXNlIEFzc2VydGlvbkVycm9yKA0KICAgICAgICAgICAgICAgICAgICAnQ2FsbHMgbm90IGZvdW5kLlxuRXhwZWN0ZWQ6ICVyXG4nDQogICAgICAgICAgICAgICAgICAgICdBY3R1YWw6ICVyJyAlIChjYWxscywgc2VsZi5tb2NrX2NhbGxzKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgIGFsbF9jYWxscyA9IGxpc3Qoc2VsZi5tb2NrX2NhbGxzKQ0KDQogICAgICAgIG5vdF9mb3VuZCA9IFtdDQogICAgICAgIGZvciBrYWxsIGluIGNhbGxzOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGFsbF9jYWxscy5yZW1vdmUoa2FsbCkNCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgICAgIG5vdF9mb3VuZC5hcHBlbmQoa2FsbCkNCiAgICAgICAgaWYgbm90X2ZvdW5kOg0KICAgICAgICAgICAgcmFpc2UgQXNzZXJ0aW9uRXJyb3IoDQogICAgICAgICAgICAgICAgJyVyIG5vdCBhbGwgZm91bmQgaW4gY2FsbCBsaXN0JyAlICh0dXBsZShub3RfZm91bmQpLCkNCiAgICAgICAgICAgICkNCg0KDQogICAgZGVmIGFzc2VydF9hbnlfY2FsbChzZWxmLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAiIiJhc3NlcnQgdGhlIG1vY2sgaGFzIGJlZW4gY2FsbGVkIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuDQoNCiAgICAgICAgVGhlIGFzc2VydCBwYXNzZXMgaWYgdGhlIG1vY2sgaGFzICpldmVyKiBiZWVuIGNhbGxlZCwgdW5saWtlDQogICAgICAgIGBhc3NlcnRfY2FsbGVkX3dpdGhgIGFuZCBgYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGhgIHRoYXQgb25seSBwYXNzIGlmDQogICAgICAgIHRoZSBjYWxsIGlzIHRoZSBtb3N0IHJlY2VudCBvbmUuIiIiDQogICAgICAgIGthbGwgPSBjYWxsKCphcmdzLCAqKmt3YXJncykNCiAgICAgICAgaWYga2FsbCBub3QgaW4gc2VsZi5jYWxsX2FyZ3NfbGlzdDoNCiAgICAgICAgICAgIGV4cGVjdGVkX3N0cmluZyA9IHNlbGYuX2Zvcm1hdF9tb2NrX2NhbGxfc2lnbmF0dXJlKGFyZ3MsIGt3YXJncykNCiAgICAgICAgICAgIHJhaXNlIEFzc2VydGlvbkVycm9yKA0KICAgICAgICAgICAgICAgICclcyBjYWxsIG5vdCBmb3VuZCcgJSBleHBlY3RlZF9zdHJpbmcNCiAgICAgICAgICAgICkNCg0KDQogICAgZGVmIF9nZXRfY2hpbGRfbW9jayhzZWxmLCAqKmt3KToNCiAgICAgICAgIiIiQ3JlYXRlIHRoZSBjaGlsZCBtb2NrcyBmb3IgYXR0cmlidXRlcyBhbmQgcmV0dXJuIHZhbHVlLg0KICAgICAgICBCeSBkZWZhdWx0IGNoaWxkIG1vY2tzIHdpbGwgYmUgdGhlIHNhbWUgdHlwZSBhcyB0aGUgcGFyZW50Lg0KICAgICAgICBTdWJjbGFzc2VzIG9mIE1vY2sgbWF5IHdhbnQgdG8gb3ZlcnJpZGUgdGhpcyB0byBjdXN0b21pemUgdGhlIHdheQ0KICAgICAgICBjaGlsZCBtb2NrcyBhcmUgbWFkZS4NCg0KICAgICAgICBGb3Igbm9uLWNhbGxhYmxlIG1vY2tzIHRoZSBjYWxsYWJsZSB2YXJpYW50IHdpbGwgYmUgdXNlZCAocmF0aGVyIHRoYW4NCiAgICAgICAgYW55IGN1c3RvbSBzdWJjbGFzcykuIiIiDQogICAgICAgIF90eXBlID0gdHlwZShzZWxmKQ0KICAgICAgICBpZiBub3QgaXNzdWJjbGFzcyhfdHlwZSwgQ2FsbGFibGVNaXhpbik6DQogICAgICAgICAgICBpZiBpc3N1YmNsYXNzKF90eXBlLCBOb25DYWxsYWJsZU1hZ2ljTW9jayk6DQogICAgICAgICAgICAgICAga2xhc3MgPSBNYWdpY01vY2sNCiAgICAgICAgICAgIGVsaWYgaXNzdWJjbGFzcyhfdHlwZSwgTm9uQ2FsbGFibGVNb2NrKSA6DQogICAgICAgICAgICAgICAga2xhc3MgPSBNb2NrDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBrbGFzcyA9IF90eXBlLl9fbXJvX19bMV0NCiAgICAgICAgcmV0dXJuIGtsYXNzKCoqa3cpDQoNCg0KDQpkZWYgX3RyeV9pdGVyKG9iaik6DQogICAgaWYgb2JqIGlzIE5vbmU6DQogICAgICAgIHJldHVybiBvYmoNCiAgICBpZiBfaXNfZXhjZXB0aW9uKG9iaik6DQogICAgICAgIHJldHVybiBvYmoNCiAgICBpZiBfY2FsbGFibGUob2JqKToNCiAgICAgICAgcmV0dXJuIG9iag0KICAgIHRyeToNCiAgICAgICAgcmV0dXJuIGl0ZXIob2JqKQ0KICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgICMgWFhYWCBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQ0KICAgICAgICAjIGJ1dCB0aGlzIHdpbGwgYmxvdyB1cCBvbiBmaXJzdCBjYWxsIC0gc28gbWF5YmUgd2Ugc2hvdWxkIGZhaWwgZWFybHk/DQogICAgICAgIHJldHVybiBvYmoNCg0KDQoNCmNsYXNzIENhbGxhYmxlTWl4aW4oQmFzZSk6DQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3BlYz1Ob25lLCBzaWRlX2VmZmVjdD1Ob25lLCByZXR1cm5fdmFsdWU9REVGQVVMVCwNCiAgICAgICAgICAgICAgICAgd3JhcHM9Tm9uZSwgbmFtZT1Ob25lLCBzcGVjX3NldD1Ob25lLCBwYXJlbnQ9Tm9uZSwNCiAgICAgICAgICAgICAgICAgX3NwZWNfc3RhdGU9Tm9uZSwgX25ld19uYW1lPScnLCBfbmV3X3BhcmVudD1Ob25lLCAqKmt3YXJncyk6DQogICAgICAgIHNlbGYuX19kaWN0X19bJ19tb2NrX3JldHVybl92YWx1ZSddID0gcmV0dXJuX3ZhbHVlDQoNCiAgICAgICAgX3NhZmVfc3VwZXIoQ2FsbGFibGVNaXhpbiwgc2VsZikuX19pbml0X18oDQogICAgICAgICAgICBzcGVjLCB3cmFwcywgbmFtZSwgc3BlY19zZXQsIHBhcmVudCwNCiAgICAgICAgICAgIF9zcGVjX3N0YXRlLCBfbmV3X25hbWUsIF9uZXdfcGFyZW50LCAqKmt3YXJncw0KICAgICAgICApDQoNCiAgICAgICAgc2VsZi5zaWRlX2VmZmVjdCA9IHNpZGVfZWZmZWN0DQoNCg0KICAgIGRlZiBfbW9ja19jaGVja19zaWcoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgIyBzdHViIG1ldGhvZCB0aGF0IGNhbiBiZSByZXBsYWNlZCB3aXRoIG9uZSB3aXRoIGEgc3BlY2lmaWMgc2lnbmF0dXJlDQogICAgICAgIHBhc3MNCg0KDQogICAgZGVmIF9fY2FsbF9fKF9tb2NrX3NlbGYsICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICMgY2FuJ3QgdXNlIHNlbGYgaW4tY2FzZSBhIGZ1bmN0aW9uIC8gbWV0aG9kIHdlIGFyZSBtb2NraW5nIHVzZXMgc2VsZg0KICAgICAgICAjIGluIHRoZSBzaWduYXR1cmUNCiAgICAgICAgX21vY2tfc2VsZi5fbW9ja19jaGVja19zaWcoKmFyZ3MsICoqa3dhcmdzKQ0KICAgICAgICByZXR1cm4gX21vY2tfc2VsZi5fbW9ja19jYWxsKCphcmdzLCAqKmt3YXJncykNCg0KDQogICAgZGVmIF9tb2NrX2NhbGwoX21vY2tfc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgc2VsZiA9IF9tb2NrX3NlbGYNCiAgICAgICAgc2VsZi5jYWxsZWQgPSBUcnVlDQogICAgICAgIHNlbGYuY2FsbF9jb3VudCArPSAxDQogICAgICAgIHNlbGYuY2FsbF9hcmdzID0gX0NhbGwoKGFyZ3MsIGt3YXJncyksIHR3bz1UcnVlKQ0KICAgICAgICBzZWxmLmNhbGxfYXJnc19saXN0LmFwcGVuZChfQ2FsbCgoYXJncywga3dhcmdzKSwgdHdvPVRydWUpKQ0KDQogICAgICAgIF9uZXdfbmFtZSA9IHNlbGYuX21vY2tfbmV3X25hbWUNCiAgICAgICAgX25ld19wYXJlbnQgPSBzZWxmLl9tb2NrX25ld19wYXJlbnQNCiAgICAgICAgc2VsZi5tb2NrX2NhbGxzLmFwcGVuZChfQ2FsbCgoJycsIGFyZ3MsIGt3YXJncykpKQ0KDQogICAgICAgIHNlZW4gPSBzZXQoKQ0KICAgICAgICBza2lwX25leHRfZG90ID0gX25ld19uYW1lID09ICcoKScNCiAgICAgICAgZG9fbWV0aG9kX2NhbGxzID0gc2VsZi5fbW9ja19wYXJlbnQgaXMgbm90IE5vbmUNCiAgICAgICAgbmFtZSA9IHNlbGYuX21vY2tfbmFtZQ0KICAgICAgICB3aGlsZSBfbmV3X3BhcmVudCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIHRoaXNfbW9ja19jYWxsID0gX0NhbGwoKF9uZXdfbmFtZSwgYXJncywga3dhcmdzKSkNCiAgICAgICAgICAgIGlmIF9uZXdfcGFyZW50Ll9tb2NrX25ld19uYW1lOg0KICAgICAgICAgICAgICAgIGRvdCA9ICcuJw0KICAgICAgICAgICAgICAgIGlmIHNraXBfbmV4dF9kb3Q6DQogICAgICAgICAgICAgICAgICAgIGRvdCA9ICcnDQoNCiAgICAgICAgICAgICAgICBza2lwX25leHRfZG90ID0gRmFsc2UNCiAgICAgICAgICAgICAgICBpZiBfbmV3X3BhcmVudC5fbW9ja19uZXdfbmFtZSA9PSAnKCknOg0KICAgICAgICAgICAgICAgICAgICBza2lwX25leHRfZG90ID0gVHJ1ZQ0KDQogICAgICAgICAgICAgICAgX25ld19uYW1lID0gX25ld19wYXJlbnQuX21vY2tfbmV3X25hbWUgKyBkb3QgKyBfbmV3X25hbWUNCg0KICAgICAgICAgICAgaWYgZG9fbWV0aG9kX2NhbGxzOg0KICAgICAgICAgICAgICAgIGlmIF9uZXdfbmFtZSA9PSBuYW1lOg0KICAgICAgICAgICAgICAgICAgICB0aGlzX21ldGhvZF9jYWxsID0gdGhpc19tb2NrX2NhbGwNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICB0aGlzX21ldGhvZF9jYWxsID0gX0NhbGwoKG5hbWUsIGFyZ3MsIGt3YXJncykpDQogICAgICAgICAgICAgICAgX25ld19wYXJlbnQubWV0aG9kX2NhbGxzLmFwcGVuZCh0aGlzX21ldGhvZF9jYWxsKQ0KDQogICAgICAgICAgICAgICAgZG9fbWV0aG9kX2NhbGxzID0gX25ld19wYXJlbnQuX21vY2tfcGFyZW50IGlzIG5vdCBOb25lDQogICAgICAgICAgICAgICAgaWYgZG9fbWV0aG9kX2NhbGxzOg0KICAgICAgICAgICAgICAgICAgICBuYW1lID0gX25ld19wYXJlbnQuX21vY2tfbmFtZSArICcuJyArIG5hbWUNCg0KICAgICAgICAgICAgX25ld19wYXJlbnQubW9ja19jYWxscy5hcHBlbmQodGhpc19tb2NrX2NhbGwpDQogICAgICAgICAgICBfbmV3X3BhcmVudCA9IF9uZXdfcGFyZW50Ll9tb2NrX25ld19wYXJlbnQNCg0KICAgICAgICAgICAgIyB1c2UgaWRzIGhlcmUgc28gYXMgbm90IHRvIGNhbGwgX19oYXNoX18gb24gdGhlIG1vY2tzDQogICAgICAgICAgICBfbmV3X3BhcmVudF9pZCA9IGlkKF9uZXdfcGFyZW50KQ0KICAgICAgICAgICAgaWYgX25ld19wYXJlbnRfaWQgaW4gc2VlbjoNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgc2Vlbi5hZGQoX25ld19wYXJlbnRfaWQpDQoNCiAgICAgICAgcmV0X3ZhbCA9IERFRkFVTFQNCiAgICAgICAgZWZmZWN0ID0gc2VsZi5zaWRlX2VmZmVjdA0KICAgICAgICBpZiBlZmZlY3QgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBpZiBfaXNfZXhjZXB0aW9uKGVmZmVjdCk6DQogICAgICAgICAgICAgICAgcmFpc2UgZWZmZWN0DQoNCiAgICAgICAgICAgIGlmIG5vdCBfY2FsbGFibGUoZWZmZWN0KToNCiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXh0KGVmZmVjdCkNCiAgICAgICAgICAgICAgICBpZiBfaXNfZXhjZXB0aW9uKHJlc3VsdCk6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIHJlc3VsdA0KICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgICAgICAgICAgcmV0X3ZhbCA9IGVmZmVjdCgqYXJncywgKiprd2FyZ3MpDQogICAgICAgICAgICBpZiByZXRfdmFsIGlzIERFRkFVTFQ6DQogICAgICAgICAgICAgICAgcmV0X3ZhbCA9IHNlbGYucmV0dXJuX3ZhbHVlDQoNCiAgICAgICAgaWYgKHNlbGYuX21vY2tfd3JhcHMgaXMgbm90IE5vbmUgYW5kDQogICAgICAgICAgICAgc2VsZi5fbW9ja19yZXR1cm5fdmFsdWUgaXMgREVGQVVMVCk6DQogICAgICAgICAgICByZXR1cm4gc2VsZi5fbW9ja193cmFwcygqYXJncywgKiprd2FyZ3MpDQogICAgICAgIGlmIHJldF92YWwgaXMgREVGQVVMVDoNCiAgICAgICAgICAgIHJldF92YWwgPSBzZWxmLnJldHVybl92YWx1ZQ0KICAgICAgICByZXR1cm4gcmV0X3ZhbA0KDQoNCg0KY2xhc3MgTW9jayhDYWxsYWJsZU1peGluLCBOb25DYWxsYWJsZU1vY2spOg0KICAgICIiIg0KICAgIENyZWF0ZSBhIG5ldyBgTW9ja2Agb2JqZWN0LiBgTW9ja2AgdGFrZXMgc2V2ZXJhbCBvcHRpb25hbCBhcmd1bWVudHMNCiAgICB0aGF0IHNwZWNpZnkgdGhlIGJlaGF2aW91ciBvZiB0aGUgTW9jayBvYmplY3Q6DQoNCiAgICAqIGBzcGVjYDogVGhpcyBjYW4gYmUgZWl0aGVyIGEgbGlzdCBvZiBzdHJpbmdzIG9yIGFuIGV4aXN0aW5nIG9iamVjdCAoYQ0KICAgICAgY2xhc3Mgb3IgaW5zdGFuY2UpIHRoYXQgYWN0cyBhcyB0aGUgc3BlY2lmaWNhdGlvbiBmb3IgdGhlIG1vY2sgb2JqZWN0LiBJZg0KICAgICAgeW91IHBhc3MgaW4gYW4gb2JqZWN0IHRoZW4gYSBsaXN0IG9mIHN0cmluZ3MgaXMgZm9ybWVkIGJ5IGNhbGxpbmcgZGlyIG9uDQogICAgICB0aGUgb2JqZWN0IChleGNsdWRpbmcgdW5zdXBwb3J0ZWQgbWFnaWMgYXR0cmlidXRlcyBhbmQgbWV0aG9kcykuIEFjY2Vzc2luZw0KICAgICAgYW55IGF0dHJpYnV0ZSBub3QgaW4gdGhpcyBsaXN0IHdpbGwgcmFpc2UgYW4gYEF0dHJpYnV0ZUVycm9yYC4NCg0KICAgICAgSWYgYHNwZWNgIGlzIGFuIG9iamVjdCAocmF0aGVyIHRoYW4gYSBsaXN0IG9mIHN0cmluZ3MpIHRoZW4NCiAgICAgIGBtb2NrLl9fY2xhc3NfX2AgcmV0dXJucyB0aGUgY2xhc3Mgb2YgdGhlIHNwZWMgb2JqZWN0LiBUaGlzIGFsbG93cyBtb2Nrcw0KICAgICAgdG8gcGFzcyBgaXNpbnN0YW5jZWAgdGVzdHMuDQoNCiAgICAqIGBzcGVjX3NldGA6IEEgc3RyaWN0ZXIgdmFyaWFudCBvZiBgc3BlY2AuIElmIHVzZWQsIGF0dGVtcHRpbmcgdG8gKnNldCoNCiAgICAgIG9yIGdldCBhbiBhdHRyaWJ1dGUgb24gdGhlIG1vY2sgdGhhdCBpc24ndCBvbiB0aGUgb2JqZWN0IHBhc3NlZCBhcw0KICAgICAgYHNwZWNfc2V0YCB3aWxsIHJhaXNlIGFuIGBBdHRyaWJ1dGVFcnJvcmAuDQoNCiAgICAqIGBzaWRlX2VmZmVjdGA6IEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW5ldmVyIHRoZSBNb2NrIGlzIGNhbGxlZC4gU2VlDQogICAgICB0aGUgYHNpZGVfZWZmZWN0YCBhdHRyaWJ1dGUuIFVzZWZ1bCBmb3IgcmFpc2luZyBleGNlcHRpb25zIG9yDQogICAgICBkeW5hbWljYWxseSBjaGFuZ2luZyByZXR1cm4gdmFsdWVzLiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIHNhbWUNCiAgICAgIGFyZ3VtZW50cyBhcyB0aGUgbW9jaywgYW5kIHVubGVzcyBpdCByZXR1cm5zIGBERUZBVUxUYCwgdGhlIHJldHVybg0KICAgICAgdmFsdWUgb2YgdGhpcyBmdW5jdGlvbiBpcyB1c2VkIGFzIHRoZSByZXR1cm4gdmFsdWUuDQoNCiAgICAgIElmIGBzaWRlX2VmZmVjdGAgaXMgYW4gaXRlcmFibGUgdGhlbiBlYWNoIGNhbGwgdG8gdGhlIG1vY2sgd2lsbCByZXR1cm4NCiAgICAgIHRoZSBuZXh0IHZhbHVlIGZyb20gdGhlIGl0ZXJhYmxlLiBJZiBhbnkgb2YgdGhlIG1lbWJlcnMgb2YgdGhlIGl0ZXJhYmxlDQogICAgICBhcmUgZXhjZXB0aW9ucyB0aGV5IHdpbGwgYmUgcmFpc2VkIGluc3RlYWQgb2YgcmV0dXJuZWQuDQoNCiAgICAgIElmIGBzaWRlX2VmZmVjdGAgaXMgYW4gaXRlcmFibGUgdGhlbiBlYWNoIGNhbGwgdG8gdGhlIG1vY2sgd2lsbCByZXR1cm4NCiAgICAgIHRoZSBuZXh0IHZhbHVlIGZyb20gdGhlIGl0ZXJhYmxlLg0KDQogICAgKiBgcmV0dXJuX3ZhbHVlYDogVGhlIHZhbHVlIHJldHVybmVkIHdoZW4gdGhlIG1vY2sgaXMgY2FsbGVkLiBCeSBkZWZhdWx0DQogICAgICB0aGlzIGlzIGEgbmV3IE1vY2sgKGNyZWF0ZWQgb24gZmlyc3QgYWNjZXNzKS4gU2VlIHRoZQ0KICAgICAgYHJldHVybl92YWx1ZWAgYXR0cmlidXRlLg0KDQogICAgKiBgd3JhcHNgOiBJdGVtIGZvciB0aGUgbW9jayBvYmplY3QgdG8gd3JhcC4gSWYgYHdyYXBzYCBpcyBub3QgTm9uZSB0aGVuDQogICAgICBjYWxsaW5nIHRoZSBNb2NrIHdpbGwgcGFzcyB0aGUgY2FsbCB0aHJvdWdoIHRvIHRoZSB3cmFwcGVkIG9iamVjdA0KICAgICAgKHJldHVybmluZyB0aGUgcmVhbCByZXN1bHQpLiBBdHRyaWJ1dGUgYWNjZXNzIG9uIHRoZSBtb2NrIHdpbGwgcmV0dXJuIGENCiAgICAgIE1vY2sgb2JqZWN0IHRoYXQgd3JhcHMgdGhlIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlIG9mIHRoZSB3cmFwcGVkIG9iamVjdA0KICAgICAgKHNvIGF0dGVtcHRpbmcgdG8gYWNjZXNzIGFuIGF0dHJpYnV0ZSB0aGF0IGRvZXNuJ3QgZXhpc3Qgd2lsbCByYWlzZSBhbg0KICAgICAgYEF0dHJpYnV0ZUVycm9yYCkuDQoNCiAgICAgIElmIHRoZSBtb2NrIGhhcyBhbiBleHBsaWNpdCBgcmV0dXJuX3ZhbHVlYCBzZXQgdGhlbiBjYWxscyBhcmUgbm90IHBhc3NlZA0KICAgICAgdG8gdGhlIHdyYXBwZWQgb2JqZWN0IGFuZCB0aGUgYHJldHVybl92YWx1ZWAgaXMgcmV0dXJuZWQgaW5zdGVhZC4NCg0KICAgICogYG5hbWVgOiBJZiB0aGUgbW9jayBoYXMgYSBuYW1lIHRoZW4gaXQgd2lsbCBiZSB1c2VkIGluIHRoZSByZXByIG9mIHRoZQ0KICAgICAgbW9jay4gVGhpcyBjYW4gYmUgdXNlZnVsIGZvciBkZWJ1Z2dpbmcuIFRoZSBuYW1lIGlzIHByb3BhZ2F0ZWQgdG8gY2hpbGQNCiAgICAgIG1vY2tzLg0KDQogICAgTW9ja3MgY2FuIGFsc28gYmUgY2FsbGVkIHdpdGggYXJiaXRyYXJ5IGtleXdvcmQgYXJndW1lbnRzLiBUaGVzZSB3aWxsIGJlDQogICAgdXNlZCB0byBzZXQgYXR0cmlidXRlcyBvbiB0aGUgbW9jayBhZnRlciBpdCBpcyBjcmVhdGVkLg0KICAgICIiIg0KDQoNCg0KZGVmIF9kb3RfbG9va3VwKHRoaW5nLCBjb21wLCBpbXBvcnRfcGF0aCk6DQogICAgdHJ5Og0KICAgICAgICByZXR1cm4gZ2V0YXR0cih0aGluZywgY29tcCkNCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgIF9faW1wb3J0X18oaW1wb3J0X3BhdGgpDQogICAgICAgIHJldHVybiBnZXRhdHRyKHRoaW5nLCBjb21wKQ0KDQoNCmRlZiBfaW1wb3J0ZXIodGFyZ2V0KToNCiAgICBjb21wb25lbnRzID0gdGFyZ2V0LnNwbGl0KCcuJykNCiAgICBpbXBvcnRfcGF0aCA9IGNvbXBvbmVudHMucG9wKDApDQogICAgdGhpbmcgPSBfX2ltcG9ydF9fKGltcG9ydF9wYXRoKQ0KDQogICAgZm9yIGNvbXAgaW4gY29tcG9uZW50czoNCiAgICAgICAgaW1wb3J0X3BhdGggKz0gIi4lcyIgJSBjb21wDQogICAgICAgIHRoaW5nID0gX2RvdF9sb29rdXAodGhpbmcsIGNvbXAsIGltcG9ydF9wYXRoKQ0KICAgIHJldHVybiB0aGluZw0KDQoNCmRlZiBfaXNfc3RhcnRlZChwYXRjaGVyKToNCiAgICAjIFhYWFggaG9ycmlibGUNCiAgICByZXR1cm4gaGFzYXR0cihwYXRjaGVyLCAnaXNfbG9jYWwnKQ0KDQoNCmNsYXNzIF9wYXRjaChvYmplY3QpOg0KDQogICAgYXR0cmlidXRlX25hbWUgPSBOb25lDQogICAgX2FjdGl2ZV9wYXRjaGVzID0gc2V0KCkNCg0KICAgIGRlZiBfX2luaXRfXygNCiAgICAgICAgICAgIHNlbGYsIGdldHRlciwgYXR0cmlidXRlLCBuZXcsIHNwZWMsIGNyZWF0ZSwNCiAgICAgICAgICAgIHNwZWNfc2V0LCBhdXRvc3BlYywgbmV3X2NhbGxhYmxlLCBrd2FyZ3MNCiAgICAgICAgKToNCiAgICAgICAgaWYgbmV3X2NhbGxhYmxlIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgaWYgbmV3IGlzIG5vdCBERUZBVUxUOg0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoDQogICAgICAgICAgICAgICAgICAgICJDYW5ub3QgdXNlICduZXcnIGFuZCAnbmV3X2NhbGxhYmxlJyB0b2dldGhlciINCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICBpZiBhdXRvc3BlYyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKA0KICAgICAgICAgICAgICAgICAgICAiQ2Fubm90IHVzZSAnYXV0b3NwZWMnIGFuZCAnbmV3X2NhbGxhYmxlJyB0b2dldGhlciINCiAgICAgICAgICAgICAgICApDQoNCiAgICAgICAgc2VsZi5nZXR0ZXIgPSBnZXR0ZXINCiAgICAgICAgc2VsZi5hdHRyaWJ1dGUgPSBhdHRyaWJ1dGUNCiAgICAgICAgc2VsZi5uZXcgPSBuZXcNCiAgICAgICAgc2VsZi5uZXdfY2FsbGFibGUgPSBuZXdfY2FsbGFibGUNCiAgICAgICAgc2VsZi5zcGVjID0gc3BlYw0KICAgICAgICBzZWxmLmNyZWF0ZSA9IGNyZWF0ZQ0KICAgICAgICBzZWxmLmhhc19sb2NhbCA9IEZhbHNlDQogICAgICAgIHNlbGYuc3BlY19zZXQgPSBzcGVjX3NldA0KICAgICAgICBzZWxmLmF1dG9zcGVjID0gYXV0b3NwZWMNCiAgICAgICAgc2VsZi5rd2FyZ3MgPSBrd2FyZ3MNCiAgICAgICAgc2VsZi5hZGRpdGlvbmFsX3BhdGNoZXJzID0gW10NCg0KDQogICAgZGVmIGNvcHkoc2VsZik6DQogICAgICAgIHBhdGNoZXIgPSBfcGF0Y2goDQogICAgICAgICAgICBzZWxmLmdldHRlciwgc2VsZi5hdHRyaWJ1dGUsIHNlbGYubmV3LCBzZWxmLnNwZWMsDQogICAgICAgICAgICBzZWxmLmNyZWF0ZSwgc2VsZi5zcGVjX3NldCwNCiAgICAgICAgICAgIHNlbGYuYXV0b3NwZWMsIHNlbGYubmV3X2NhbGxhYmxlLCBzZWxmLmt3YXJncw0KICAgICAgICApDQogICAgICAgIHBhdGNoZXIuYXR0cmlidXRlX25hbWUgPSBzZWxmLmF0dHJpYnV0ZV9uYW1lDQogICAgICAgIHBhdGNoZXIuYWRkaXRpb25hbF9wYXRjaGVycyA9IFsNCiAgICAgICAgICAgIHAuY29weSgpIGZvciBwIGluIHNlbGYuYWRkaXRpb25hbF9wYXRjaGVycw0KICAgICAgICBdDQogICAgICAgIHJldHVybiBwYXRjaGVyDQoNCg0KICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBmdW5jKToNCiAgICAgICAgaWYgaXNpbnN0YW5jZShmdW5jLCB0eXBlKToNCiAgICAgICAgICAgIHJldHVybiBzZWxmLmRlY29yYXRlX2NsYXNzKGZ1bmMpDQogICAgICAgIHJldHVybiBzZWxmLmRlY29yYXRlX2NhbGxhYmxlKGZ1bmMpDQoNCg0KICAgIGRlZiBkZWNvcmF0ZV9jbGFzcyhzZWxmLCBrbGFzcyk6DQogICAgICAgIGZvciBhdHRyIGluIGRpcihrbGFzcyk6DQogICAgICAgICAgICBpZiBub3QgYXR0ci5zdGFydHN3aXRoKHBhdGNoLlRFU1RfUFJFRklYKToNCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KDQogICAgICAgICAgICBhdHRyX3ZhbHVlID0gZ2V0YXR0cihrbGFzcywgYXR0cikNCiAgICAgICAgICAgIGlmIG5vdCBoYXNhdHRyKGF0dHJfdmFsdWUsICJfX2NhbGxfXyIpOg0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQoNCiAgICAgICAgICAgIHBhdGNoZXIgPSBzZWxmLmNvcHkoKQ0KICAgICAgICAgICAgc2V0YXR0cihrbGFzcywgYXR0ciwgcGF0Y2hlcihhdHRyX3ZhbHVlKSkNCiAgICAgICAgcmV0dXJuIGtsYXNzDQoNCg0KICAgIGRlZiBkZWNvcmF0ZV9jYWxsYWJsZShzZWxmLCBmdW5jKToNCiAgICAgICAgaWYgaGFzYXR0cihmdW5jLCAncGF0Y2hpbmdzJyk6DQogICAgICAgICAgICBmdW5jLnBhdGNoaW5ncy5hcHBlbmQoc2VsZikNCiAgICAgICAgICAgIHJldHVybiBmdW5jDQoNCiAgICAgICAgQHdyYXBzKGZ1bmMpDQogICAgICAgIGRlZiBwYXRjaGVkKCphcmdzLCAqKmtleXdhcmdzKToNCiAgICAgICAgICAgIGV4dHJhX2FyZ3MgPSBbXQ0KICAgICAgICAgICAgZW50ZXJlZF9wYXRjaGVycyA9IFtdDQoNCiAgICAgICAgICAgIGV4Y19pbmZvID0gdHVwbGUoKQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGZvciBwYXRjaGluZyBpbiBwYXRjaGVkLnBhdGNoaW5nczoNCiAgICAgICAgICAgICAgICAgICAgYXJnID0gcGF0Y2hpbmcuX19lbnRlcl9fKCkNCiAgICAgICAgICAgICAgICAgICAgZW50ZXJlZF9wYXRjaGVycy5hcHBlbmQocGF0Y2hpbmcpDQogICAgICAgICAgICAgICAgICAgIGlmIHBhdGNoaW5nLmF0dHJpYnV0ZV9uYW1lIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICAgICAgICAga2V5d2FyZ3MudXBkYXRlKGFyZykNCiAgICAgICAgICAgICAgICAgICAgZWxpZiBwYXRjaGluZy5uZXcgaXMgREVGQVVMVDoNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhX2FyZ3MuYXBwZW5kKGFyZykNCg0KICAgICAgICAgICAgICAgIGFyZ3MgKz0gdHVwbGUoZXh0cmFfYXJncykNCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYygqYXJncywgKiprZXl3YXJncykNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBpZiAocGF0Y2hpbmcgbm90IGluIGVudGVyZWRfcGF0Y2hlcnMgYW5kDQogICAgICAgICAgICAgICAgICAgIF9pc19zdGFydGVkKHBhdGNoaW5nKSk6DQogICAgICAgICAgICAgICAgICAgICMgdGhlIHBhdGNoZXIgbWF5IGhhdmUgYmVlbiBzdGFydGVkLCBidXQgYW4gZXhjZXB0aW9uDQogICAgICAgICAgICAgICAgICAgICMgcmFpc2VkIHdoaWxzdCBlbnRlcmluZyBvbmUgb2YgaXRzIGFkZGl0aW9uYWxfcGF0Y2hlcnMNCiAgICAgICAgICAgICAgICAgICAgZW50ZXJlZF9wYXRjaGVycy5hcHBlbmQocGF0Y2hpbmcpDQogICAgICAgICAgICAgICAgIyBQYXNzIHRoZSBleGNlcHRpb24gdG8gX19leGl0X18NCiAgICAgICAgICAgICAgICBleGNfaW5mbyA9IHN5cy5leGNfaW5mbygpDQogICAgICAgICAgICAgICAgIyByZS1yYWlzZSB0aGUgZXhjZXB0aW9uDQogICAgICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgZm9yIHBhdGNoaW5nIGluIHJldmVyc2VkKGVudGVyZWRfcGF0Y2hlcnMpOg0KICAgICAgICAgICAgICAgICAgICBwYXRjaGluZy5fX2V4aXRfXygqZXhjX2luZm8pDQoNCiAgICAgICAgcGF0Y2hlZC5wYXRjaGluZ3MgPSBbc2VsZl0NCiAgICAgICAgcmV0dXJuIHBhdGNoZWQNCg0KDQogICAgZGVmIGdldF9vcmlnaW5hbChzZWxmKToNCiAgICAgICAgdGFyZ2V0ID0gc2VsZi5nZXR0ZXIoKQ0KICAgICAgICBuYW1lID0gc2VsZi5hdHRyaWJ1dGUNCg0KICAgICAgICBvcmlnaW5hbCA9IERFRkFVTFQNCiAgICAgICAgbG9jYWwgPSBGYWxzZQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIG9yaWdpbmFsID0gdGFyZ2V0Ll9fZGljdF9fW25hbWVdDQogICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIEtleUVycm9yKToNCiAgICAgICAgICAgIG9yaWdpbmFsID0gZ2V0YXR0cih0YXJnZXQsIG5hbWUsIERFRkFVTFQpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBsb2NhbCA9IFRydWUNCg0KICAgICAgICBpZiBub3Qgc2VsZi5jcmVhdGUgYW5kIG9yaWdpbmFsIGlzIERFRkFVTFQ6DQogICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcigNCiAgICAgICAgICAgICAgICAiJXMgZG9lcyBub3QgaGF2ZSB0aGUgYXR0cmlidXRlICVyIiAlICh0YXJnZXQsIG5hbWUpDQogICAgICAgICAgICApDQogICAgICAgIHJldHVybiBvcmlnaW5hbCwgbG9jYWwNCg0KDQogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToNCiAgICAgICAgIiIiUGVyZm9ybSB0aGUgcGF0Y2guIiIiDQogICAgICAgIG5ldywgc3BlYywgc3BlY19zZXQgPSBzZWxmLm5ldywgc2VsZi5zcGVjLCBzZWxmLnNwZWNfc2V0DQogICAgICAgIGF1dG9zcGVjLCBrd2FyZ3MgPSBzZWxmLmF1dG9zcGVjLCBzZWxmLmt3YXJncw0KICAgICAgICBuZXdfY2FsbGFibGUgPSBzZWxmLm5ld19jYWxsYWJsZQ0KICAgICAgICBzZWxmLnRhcmdldCA9IHNlbGYuZ2V0dGVyKCkNCg0KICAgICAgICAjIG5vcm1hbGlzZSBGYWxzZSB0byBOb25lDQogICAgICAgIGlmIHNwZWMgaXMgRmFsc2U6DQogICAgICAgICAgICBzcGVjID0gTm9uZQ0KICAgICAgICBpZiBzcGVjX3NldCBpcyBGYWxzZToNCiAgICAgICAgICAgIHNwZWNfc2V0ID0gTm9uZQ0KICAgICAgICBpZiBhdXRvc3BlYyBpcyBGYWxzZToNCiAgICAgICAgICAgIGF1dG9zcGVjID0gTm9uZQ0KDQogICAgICAgIGlmIHNwZWMgaXMgbm90IE5vbmUgYW5kIGF1dG9zcGVjIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJDYW4ndCBzcGVjaWZ5IHNwZWMgYW5kIGF1dG9zcGVjIikNCiAgICAgICAgaWYgKChzcGVjIGlzIG5vdCBOb25lIG9yIGF1dG9zcGVjIGlzIG5vdCBOb25lKSBhbmQNCiAgICAgICAgICAgIHNwZWNfc2V0IG5vdCBpbiAoVHJ1ZSwgTm9uZSkpOg0KICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJDYW4ndCBwcm92aWRlIGV4cGxpY2l0IHNwZWNfc2V0ICphbmQqIHNwZWMgb3IgYXV0b3NwZWMiKQ0KDQogICAgICAgIG9yaWdpbmFsLCBsb2NhbCA9IHNlbGYuZ2V0X29yaWdpbmFsKCkNCg0KICAgICAgICBpZiBuZXcgaXMgREVGQVVMVCBhbmQgYXV0b3NwZWMgaXMgTm9uZToNCiAgICAgICAgICAgIGluaGVyaXQgPSBGYWxzZQ0KICAgICAgICAgICAgaWYgc3BlYyBpcyBUcnVlOg0KICAgICAgICAgICAgICAgICMgc2V0IHNwZWMgdG8gdGhlIG9iamVjdCB3ZSBhcmUgcmVwbGFjaW5nDQogICAgICAgICAgICAgICAgc3BlYyA9IG9yaWdpbmFsDQogICAgICAgICAgICAgICAgaWYgc3BlY19zZXQgaXMgVHJ1ZToNCiAgICAgICAgICAgICAgICAgICAgc3BlY19zZXQgPSBvcmlnaW5hbA0KICAgICAgICAgICAgICAgICAgICBzcGVjID0gTm9uZQ0KICAgICAgICAgICAgZWxpZiBzcGVjIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIGlmIHNwZWNfc2V0IGlzIFRydWU6DQogICAgICAgICAgICAgICAgICAgIHNwZWNfc2V0ID0gc3BlYw0KICAgICAgICAgICAgICAgICAgICBzcGVjID0gTm9uZQ0KICAgICAgICAgICAgZWxpZiBzcGVjX3NldCBpcyBUcnVlOg0KICAgICAgICAgICAgICAgIHNwZWNfc2V0ID0gb3JpZ2luYWwNCg0KICAgICAgICAgICAgaWYgc3BlYyBpcyBub3QgTm9uZSBvciBzcGVjX3NldCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICBpZiBvcmlnaW5hbCBpcyBERUZBVUxUOg0KICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbid0IHVzZSAnc3BlYycgd2l0aCBjcmVhdGU9VHJ1ZSIpDQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShvcmlnaW5hbCwgdHlwZSk6DQogICAgICAgICAgICAgICAgICAgICMgSWYgd2UncmUgcGF0Y2hpbmcgb3V0IGEgY2xhc3MgYW5kIHRoZXJlIGlzIGEgc3BlYw0KICAgICAgICAgICAgICAgICAgICBpbmhlcml0ID0gVHJ1ZQ0KDQogICAgICAgICAgICBLbGFzcyA9IE1hZ2ljTW9jaw0KICAgICAgICAgICAgX2t3YXJncyA9IHt9DQogICAgICAgICAgICBpZiBuZXdfY2FsbGFibGUgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgS2xhc3MgPSBuZXdfY2FsbGFibGUNCiAgICAgICAgICAgIGVsaWYgc3BlYyBpcyBub3QgTm9uZSBvciBzcGVjX3NldCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICB0aGlzX3NwZWMgPSBzcGVjDQogICAgICAgICAgICAgICAgaWYgc3BlY19zZXQgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgICAgIHRoaXNfc3BlYyA9IHNwZWNfc2V0DQogICAgICAgICAgICAgICAgaWYgX2lzX2xpc3QodGhpc19zcGVjKToNCiAgICAgICAgICAgICAgICAgICAgbm90X2NhbGxhYmxlID0gJ19fY2FsbF9fJyBub3QgaW4gdGhpc19zcGVjDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgbm90X2NhbGxhYmxlID0gbm90IGNhbGxhYmxlKHRoaXNfc3BlYykNCiAgICAgICAgICAgICAgICBpZiBub3RfY2FsbGFibGU6DQogICAgICAgICAgICAgICAgICAgIEtsYXNzID0gTm9uQ2FsbGFibGVNYWdpY01vY2sNCg0KICAgICAgICAgICAgaWYgc3BlYyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICBfa3dhcmdzWydzcGVjJ10gPSBzcGVjDQogICAgICAgICAgICBpZiBzcGVjX3NldCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICBfa3dhcmdzWydzcGVjX3NldCddID0gc3BlY19zZXQNCg0KICAgICAgICAgICAgIyBhZGQgYSBuYW1lIHRvIG1vY2tzDQogICAgICAgICAgICBpZiAoaXNpbnN0YW5jZShLbGFzcywgdHlwZSkgYW5kDQogICAgICAgICAgICAgICAgaXNzdWJjbGFzcyhLbGFzcywgTm9uQ2FsbGFibGVNb2NrKSBhbmQgc2VsZi5hdHRyaWJ1dGUpOg0KICAgICAgICAgICAgICAgIF9rd2FyZ3NbJ25hbWUnXSA9IHNlbGYuYXR0cmlidXRlDQoNCiAgICAgICAgICAgIF9rd2FyZ3MudXBkYXRlKGt3YXJncykNCiAgICAgICAgICAgIG5ldyA9IEtsYXNzKCoqX2t3YXJncykNCg0KICAgICAgICAgICAgaWYgaW5oZXJpdCBhbmQgX2lzX2luc3RhbmNlX21vY2sobmV3KToNCiAgICAgICAgICAgICAgICAjIHdlIGNhbiBvbmx5IHRlbGwgaWYgdGhlIGluc3RhbmNlIHNob3VsZCBiZSBjYWxsYWJsZSBpZiB0aGUNCiAgICAgICAgICAgICAgICAjIHNwZWMgaXMgbm90IGEgbGlzdA0KICAgICAgICAgICAgICAgIHRoaXNfc3BlYyA9IHNwZWMNCiAgICAgICAgICAgICAgICBpZiBzcGVjX3NldCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgdGhpc19zcGVjID0gc3BlY19zZXQNCiAgICAgICAgICAgICAgICBpZiAobm90IF9pc19saXN0KHRoaXNfc3BlYykgYW5kIG5vdA0KICAgICAgICAgICAgICAgICAgICBfaW5zdGFuY2VfY2FsbGFibGUodGhpc19zcGVjKSk6DQogICAgICAgICAgICAgICAgICAgIEtsYXNzID0gTm9uQ2FsbGFibGVNYWdpY01vY2sNCg0KICAgICAgICAgICAgICAgIF9rd2FyZ3MucG9wKCduYW1lJykNCiAgICAgICAgICAgICAgICBuZXcucmV0dXJuX3ZhbHVlID0gS2xhc3MoX25ld19wYXJlbnQ9bmV3LCBfbmV3X25hbWU9JygpJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKipfa3dhcmdzKQ0KICAgICAgICBlbGlmIGF1dG9zcGVjIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgIyBzcGVjIGlzIGlnbm9yZWQsIG5ldyAqbXVzdCogYmUgZGVmYXVsdCwgc3BlY19zZXQgaXMgdHJlYXRlZA0KICAgICAgICAgICAgIyBhcyBhIGJvb2xlYW4uIFNob3VsZCB3ZSBjaGVjayBzcGVjIGlzIG5vdCBOb25lIGFuZCB0aGF0IHNwZWNfc2V0DQogICAgICAgICAgICAjIGlzIGEgYm9vbD8NCiAgICAgICAgICAgIGlmIG5ldyBpcyBub3QgREVGQVVMVDoNCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoDQogICAgICAgICAgICAgICAgICAgICJhdXRvc3BlYyBjcmVhdGVzIHRoZSBtb2NrIGZvciB5b3UuIENhbid0IHNwZWNpZnkgIg0KICAgICAgICAgICAgICAgICAgICAiYXV0b3NwZWMgYW5kIG5ldy4iDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgaWYgb3JpZ2luYWwgaXMgREVGQVVMVDoNCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbid0IHVzZSAnYXV0b3NwZWMnIHdpdGggY3JlYXRlPVRydWUiKQ0KICAgICAgICAgICAgc3BlY19zZXQgPSBib29sKHNwZWNfc2V0KQ0KICAgICAgICAgICAgaWYgYXV0b3NwZWMgaXMgVHJ1ZToNCiAgICAgICAgICAgICAgICBhdXRvc3BlYyA9IG9yaWdpbmFsDQoNCiAgICAgICAgICAgIG5ldyA9IGNyZWF0ZV9hdXRvc3BlYyhhdXRvc3BlYywgc3BlY19zZXQ9c3BlY19zZXQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX25hbWU9c2VsZi5hdHRyaWJ1dGUsICoqa3dhcmdzKQ0KICAgICAgICBlbGlmIGt3YXJnczoNCiAgICAgICAgICAgICMgY2FuJ3Qgc2V0IGtleXdvcmQgYXJncyB3aGVuIHdlIGFyZW4ndCBjcmVhdGluZyB0aGUgbW9jaw0KICAgICAgICAgICAgIyBYWFhYIElmIG5ldyBpcyBhIE1vY2sgd2UgY291bGQgY2FsbCBuZXcuY29uZmlndXJlX21vY2soKiprd2FyZ3MpDQogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbid0IHBhc3Mga3dhcmdzIHRvIGEgbW9jayB3ZSBhcmVuJ3QgY3JlYXRpbmciKQ0KDQogICAgICAgIG5ld19hdHRyID0gbmV3DQoNCiAgICAgICAgc2VsZi50ZW1wX29yaWdpbmFsID0gb3JpZ2luYWwNCiAgICAgICAgc2VsZi5pc19sb2NhbCA9IGxvY2FsDQogICAgICAgIHNldGF0dHIoc2VsZi50YXJnZXQsIHNlbGYuYXR0cmlidXRlLCBuZXdfYXR0cikNCiAgICAgICAgaWYgc2VsZi5hdHRyaWJ1dGVfbmFtZSBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIGV4dHJhX2FyZ3MgPSB7fQ0KICAgICAgICAgICAgaWYgc2VsZi5uZXcgaXMgREVGQVVMVDoNCiAgICAgICAgICAgICAgICBleHRyYV9hcmdzW3NlbGYuYXR0cmlidXRlX25hbWVdID0gIG5ldw0KICAgICAgICAgICAgZm9yIHBhdGNoaW5nIGluIHNlbGYuYWRkaXRpb25hbF9wYXRjaGVyczoNCiAgICAgICAgICAgICAgICBhcmcgPSBwYXRjaGluZy5fX2VudGVyX18oKQ0KICAgICAgICAgICAgICAgIGlmIHBhdGNoaW5nLm5ldyBpcyBERUZBVUxUOg0KICAgICAgICAgICAgICAgICAgICBleHRyYV9hcmdzLnVwZGF0ZShhcmcpDQogICAgICAgICAgICByZXR1cm4gZXh0cmFfYXJncw0KDQogICAgICAgIHJldHVybiBuZXcNCg0KDQogICAgZGVmIF9fZXhpdF9fKHNlbGYsICpleGNfaW5mbyk6DQogICAgICAgICIiIlVuZG8gdGhlIHBhdGNoLiIiIg0KICAgICAgICBpZiBub3QgX2lzX3N0YXJ0ZWQoc2VsZik6DQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoJ3N0b3AgY2FsbGVkIG9uIHVuc3RhcnRlZCBwYXRjaGVyJykNCg0KICAgICAgICBpZiBzZWxmLmlzX2xvY2FsIGFuZCBzZWxmLnRlbXBfb3JpZ2luYWwgaXMgbm90IERFRkFVTFQ6DQogICAgICAgICAgICBzZXRhdHRyKHNlbGYudGFyZ2V0LCBzZWxmLmF0dHJpYnV0ZSwgc2VsZi50ZW1wX29yaWdpbmFsKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgZGVsYXR0cihzZWxmLnRhcmdldCwgc2VsZi5hdHRyaWJ1dGUpDQogICAgICAgICAgICBpZiBub3Qgc2VsZi5jcmVhdGUgYW5kIG5vdCBoYXNhdHRyKHNlbGYudGFyZ2V0LCBzZWxmLmF0dHJpYnV0ZSk6DQogICAgICAgICAgICAgICAgIyBuZWVkZWQgZm9yIHByb3h5IG9iamVjdHMgbGlrZSBkamFuZ28gc2V0dGluZ3MNCiAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYudGFyZ2V0LCBzZWxmLmF0dHJpYnV0ZSwgc2VsZi50ZW1wX29yaWdpbmFsKQ0KDQogICAgICAgIGRlbCBzZWxmLnRlbXBfb3JpZ2luYWwNCiAgICAgICAgZGVsIHNlbGYuaXNfbG9jYWwNCiAgICAgICAgZGVsIHNlbGYudGFyZ2V0DQogICAgICAgIGZvciBwYXRjaGVyIGluIHJldmVyc2VkKHNlbGYuYWRkaXRpb25hbF9wYXRjaGVycyk6DQogICAgICAgICAgICBpZiBfaXNfc3RhcnRlZChwYXRjaGVyKToNCiAgICAgICAgICAgICAgICBwYXRjaGVyLl9fZXhpdF9fKCpleGNfaW5mbykNCg0KDQogICAgZGVmIHN0YXJ0KHNlbGYpOg0KICAgICAgICAiIiJBY3RpdmF0ZSBhIHBhdGNoLCByZXR1cm5pbmcgYW55IGNyZWF0ZWQgbW9jay4iIiINCiAgICAgICAgcmVzdWx0ID0gc2VsZi5fX2VudGVyX18oKQ0KICAgICAgICBzZWxmLl9hY3RpdmVfcGF0Y2hlcy5hZGQoc2VsZikNCiAgICAgICAgcmV0dXJuIHJlc3VsdA0KDQoNCiAgICBkZWYgc3RvcChzZWxmKToNCiAgICAgICAgIiIiU3RvcCBhbiBhY3RpdmUgcGF0Y2guIiIiDQogICAgICAgIHNlbGYuX2FjdGl2ZV9wYXRjaGVzLmRpc2NhcmQoc2VsZikNCiAgICAgICAgcmV0dXJuIHNlbGYuX19leGl0X18oKQ0KDQoNCg0KZGVmIF9nZXRfdGFyZ2V0KHRhcmdldCk6DQogICAgdHJ5Og0KICAgICAgICB0YXJnZXQsIGF0dHJpYnV0ZSA9IHRhcmdldC5yc3BsaXQoJy4nLCAxKQ0KICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBWYWx1ZUVycm9yKToNCiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJOZWVkIGEgdmFsaWQgdGFyZ2V0IHRvIHBhdGNoLiBZb3Ugc3VwcGxpZWQ6ICVyIiAlDQogICAgICAgICAgICAgICAgICAgICAgICAodGFyZ2V0LCkpDQogICAgZ2V0dGVyID0gbGFtYmRhOiBfaW1wb3J0ZXIodGFyZ2V0KQ0KICAgIHJldHVybiBnZXR0ZXIsIGF0dHJpYnV0ZQ0KDQoNCmRlZiBfcGF0Y2hfb2JqZWN0KA0KICAgICAgICB0YXJnZXQsIGF0dHJpYnV0ZSwgbmV3PURFRkFVTFQsIHNwZWM9Tm9uZSwNCiAgICAgICAgY3JlYXRlPUZhbHNlLCBzcGVjX3NldD1Ob25lLCBhdXRvc3BlYz1Ob25lLA0KICAgICAgICBuZXdfY2FsbGFibGU9Tm9uZSwgKiprd2FyZ3MNCiAgICApOg0KICAgICIiIg0KICAgIHBhdGNoIHRoZSBuYW1lZCBtZW1iZXIgKGBhdHRyaWJ1dGVgKSBvbiBhbiBvYmplY3QgKGB0YXJnZXRgKSB3aXRoIGEgbW9jaw0KICAgIG9iamVjdC4NCg0KICAgIGBwYXRjaC5vYmplY3RgIGNhbiBiZSB1c2VkIGFzIGEgZGVjb3JhdG9yLCBjbGFzcyBkZWNvcmF0b3Igb3IgYSBjb250ZXh0DQogICAgbWFuYWdlci4gQXJndW1lbnRzIGBuZXdgLCBgc3BlY2AsIGBjcmVhdGVgLCBgc3BlY19zZXRgLA0KICAgIGBhdXRvc3BlY2AgYW5kIGBuZXdfY2FsbGFibGVgIGhhdmUgdGhlIHNhbWUgbWVhbmluZyBhcyBmb3IgYHBhdGNoYC4gTGlrZQ0KICAgIGBwYXRjaGAsIGBwYXRjaC5vYmplY3RgIHRha2VzIGFyYml0cmFyeSBrZXl3b3JkIGFyZ3VtZW50cyBmb3IgY29uZmlndXJpbmcNCiAgICB0aGUgbW9jayBvYmplY3QgaXQgY3JlYXRlcy4NCg0KICAgIFdoZW4gdXNlZCBhcyBhIGNsYXNzIGRlY29yYXRvciBgcGF0Y2gub2JqZWN0YCBob25vdXJzIGBwYXRjaC5URVNUX1BSRUZJWGANCiAgICBmb3IgY2hvb3Npbmcgd2hpY2ggbWV0aG9kcyB0byB3cmFwLg0KICAgICIiIg0KICAgIGdldHRlciA9IGxhbWJkYTogdGFyZ2V0DQogICAgcmV0dXJuIF9wYXRjaCgNCiAgICAgICAgZ2V0dGVyLCBhdHRyaWJ1dGUsIG5ldywgc3BlYywgY3JlYXRlLA0KICAgICAgICBzcGVjX3NldCwgYXV0b3NwZWMsIG5ld19jYWxsYWJsZSwga3dhcmdzDQogICAgKQ0KDQoNCmRlZiBfcGF0Y2hfbXVsdGlwbGUodGFyZ2V0LCBzcGVjPU5vbmUsIGNyZWF0ZT1GYWxzZSwgc3BlY19zZXQ9Tm9uZSwNCiAgICAgICAgICAgICAgICAgICAgYXV0b3NwZWM9Tm9uZSwgbmV3X2NhbGxhYmxlPU5vbmUsICoqa3dhcmdzKToNCiAgICAiIiJQZXJmb3JtIG11bHRpcGxlIHBhdGNoZXMgaW4gYSBzaW5nbGUgY2FsbC4gSXQgdGFrZXMgdGhlIG9iamVjdCB0byBiZQ0KICAgIHBhdGNoZWQgKGVpdGhlciBhcyBhbiBvYmplY3Qgb3IgYSBzdHJpbmcgdG8gZmV0Y2ggdGhlIG9iamVjdCBieSBpbXBvcnRpbmcpDQogICAgYW5kIGtleXdvcmQgYXJndW1lbnRzIGZvciB0aGUgcGF0Y2hlczo6DQoNCiAgICAgICAgd2l0aCBwYXRjaC5tdWx0aXBsZShzZXR0aW5ncywgRklSU1RfUEFUQ0g9J29uZScsIFNFQ09ORF9QQVRDSD0ndHdvJyk6DQogICAgICAgICAgICAuLi4NCg0KICAgIFVzZSBgREVGQVVMVGAgYXMgdGhlIHZhbHVlIGlmIHlvdSB3YW50IGBwYXRjaC5tdWx0aXBsZWAgdG8gY3JlYXRlDQogICAgbW9ja3MgZm9yIHlvdS4gSW4gdGhpcyBjYXNlIHRoZSBjcmVhdGVkIG1vY2tzIGFyZSBwYXNzZWQgaW50byBhIGRlY29yYXRlZA0KICAgIGZ1bmN0aW9uIGJ5IGtleXdvcmQsIGFuZCBhIGRpY3Rpb25hcnkgaXMgcmV0dXJuZWQgd2hlbiBgcGF0Y2gubXVsdGlwbGVgIGlzDQogICAgdXNlZCBhcyBhIGNvbnRleHQgbWFuYWdlci4NCg0KICAgIGBwYXRjaC5tdWx0aXBsZWAgY2FuIGJlIHVzZWQgYXMgYSBkZWNvcmF0b3IsIGNsYXNzIGRlY29yYXRvciBvciBhIGNvbnRleHQNCiAgICBtYW5hZ2VyLiBUaGUgYXJndW1lbnRzIGBzcGVjYCwgYHNwZWNfc2V0YCwgYGNyZWF0ZWAsDQogICAgYGF1dG9zcGVjYCBhbmQgYG5ld19jYWxsYWJsZWAgaGF2ZSB0aGUgc2FtZSBtZWFuaW5nIGFzIGZvciBgcGF0Y2hgLiBUaGVzZQ0KICAgIGFyZ3VtZW50cyB3aWxsIGJlIGFwcGxpZWQgdG8gKmFsbCogcGF0Y2hlcyBkb25lIGJ5IGBwYXRjaC5tdWx0aXBsZWAuDQoNCiAgICBXaGVuIHVzZWQgYXMgYSBjbGFzcyBkZWNvcmF0b3IgYHBhdGNoLm11bHRpcGxlYCBob25vdXJzIGBwYXRjaC5URVNUX1BSRUZJWGANCiAgICBmb3IgY2hvb3Npbmcgd2hpY2ggbWV0aG9kcyB0byB3cmFwLg0KICAgICIiIg0KICAgIGlmIHR5cGUodGFyZ2V0KSBpcyBzdHI6DQogICAgICAgIGdldHRlciA9IGxhbWJkYTogX2ltcG9ydGVyKHRhcmdldCkNCiAgICBlbHNlOg0KICAgICAgICBnZXR0ZXIgPSBsYW1iZGE6IHRhcmdldA0KDQogICAgaWYgbm90IGt3YXJnczoNCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigNCiAgICAgICAgICAgICdNdXN0IHN1cHBseSBhdCBsZWFzdCBvbmUga2V5d29yZCBhcmd1bWVudCB3aXRoIHBhdGNoLm11bHRpcGxlJw0KICAgICAgICApDQogICAgIyBuZWVkIHRvIHdyYXAgaW4gYSBsaXN0IGZvciBweXRob24gMywgd2hlcmUgaXRlbXMgaXMgYSB2aWV3DQogICAgaXRlbXMgPSBsaXN0KGt3YXJncy5pdGVtcygpKQ0KICAgIGF0dHJpYnV0ZSwgbmV3ID0gaXRlbXNbMF0NCiAgICBwYXRjaGVyID0gX3BhdGNoKA0KICAgICAgICBnZXR0ZXIsIGF0dHJpYnV0ZSwgbmV3LCBzcGVjLCBjcmVhdGUsIHNwZWNfc2V0LA0KICAgICAgICBhdXRvc3BlYywgbmV3X2NhbGxhYmxlLCB7fQ0KICAgICkNCiAgICBwYXRjaGVyLmF0dHJpYnV0ZV9uYW1lID0gYXR0cmlidXRlDQogICAgZm9yIGF0dHJpYnV0ZSwgbmV3IGluIGl0ZW1zWzE6XToNCiAgICAgICAgdGhpc19wYXRjaGVyID0gX3BhdGNoKA0KICAgICAgICAgICAgZ2V0dGVyLCBhdHRyaWJ1dGUsIG5ldywgc3BlYywgY3JlYXRlLCBzcGVjX3NldCwNCiAgICAgICAgICAgIGF1dG9zcGVjLCBuZXdfY2FsbGFibGUsIHt9DQogICAgICAgICkNCiAgICAgICAgdGhpc19wYXRjaGVyLmF0dHJpYnV0ZV9uYW1lID0gYXR0cmlidXRlDQogICAgICAgIHBhdGNoZXIuYWRkaXRpb25hbF9wYXRjaGVycy5hcHBlbmQodGhpc19wYXRjaGVyKQ0KICAgIHJldHVybiBwYXRjaGVyDQoNCg0KZGVmIHBhdGNoKA0KICAgICAgICB0YXJnZXQsIG5ldz1ERUZBVUxULCBzcGVjPU5vbmUsIGNyZWF0ZT1GYWxzZSwNCiAgICAgICAgc3BlY19zZXQ9Tm9uZSwgYXV0b3NwZWM9Tm9uZSwgbmV3X2NhbGxhYmxlPU5vbmUsICoqa3dhcmdzDQogICAgKToNCiAgICAiIiINCiAgICBgcGF0Y2hgIGFjdHMgYXMgYSBmdW5jdGlvbiBkZWNvcmF0b3IsIGNsYXNzIGRlY29yYXRvciBvciBhIGNvbnRleHQNCiAgICBtYW5hZ2VyLiBJbnNpZGUgdGhlIGJvZHkgb2YgdGhlIGZ1bmN0aW9uIG9yIHdpdGggc3RhdGVtZW50LCB0aGUgYHRhcmdldGANCiAgICBpcyBwYXRjaGVkIHdpdGggYSBgbmV3YCBvYmplY3QuIFdoZW4gdGhlIGZ1bmN0aW9uL3dpdGggc3RhdGVtZW50IGV4aXRzDQogICAgdGhlIHBhdGNoIGlzIHVuZG9uZS4NCg0KICAgIElmIGBuZXdgIGlzIG9taXR0ZWQsIHRoZW4gdGhlIHRhcmdldCBpcyByZXBsYWNlZCB3aXRoIGENCiAgICBgTWFnaWNNb2NrYC4gSWYgYHBhdGNoYCBpcyB1c2VkIGFzIGEgZGVjb3JhdG9yIGFuZCBgbmV3YCBpcw0KICAgIG9taXR0ZWQsIHRoZSBjcmVhdGVkIG1vY2sgaXMgcGFzc2VkIGluIGFzIGFuIGV4dHJhIGFyZ3VtZW50IHRvIHRoZQ0KICAgIGRlY29yYXRlZCBmdW5jdGlvbi4gSWYgYHBhdGNoYCBpcyB1c2VkIGFzIGEgY29udGV4dCBtYW5hZ2VyIHRoZSBjcmVhdGVkDQogICAgbW9jayBpcyByZXR1cm5lZCBieSB0aGUgY29udGV4dCBtYW5hZ2VyLg0KDQogICAgYHRhcmdldGAgc2hvdWxkIGJlIGEgc3RyaW5nIGluIHRoZSBmb3JtIGAncGFja2FnZS5tb2R1bGUuQ2xhc3NOYW1lJ2AuIFRoZQ0KICAgIGB0YXJnZXRgIGlzIGltcG9ydGVkIGFuZCB0aGUgc3BlY2lmaWVkIG9iamVjdCByZXBsYWNlZCB3aXRoIHRoZSBgbmV3YA0KICAgIG9iamVjdCwgc28gdGhlIGB0YXJnZXRgIG11c3QgYmUgaW1wb3J0YWJsZSBmcm9tIHRoZSBlbnZpcm9ubWVudCB5b3UgYXJlDQogICAgY2FsbGluZyBgcGF0Y2hgIGZyb20uIFRoZSB0YXJnZXQgaXMgaW1wb3J0ZWQgd2hlbiB0aGUgZGVjb3JhdGVkIGZ1bmN0aW9uDQogICAgaXMgZXhlY3V0ZWQsIG5vdCBhdCBkZWNvcmF0aW9uIHRpbWUuDQoNCiAgICBUaGUgYHNwZWNgIGFuZCBgc3BlY19zZXRgIGtleXdvcmQgYXJndW1lbnRzIGFyZSBwYXNzZWQgdG8gdGhlIGBNYWdpY01vY2tgDQogICAgaWYgcGF0Y2ggaXMgY3JlYXRpbmcgb25lIGZvciB5b3UuDQoNCiAgICBJbiBhZGRpdGlvbiB5b3UgY2FuIHBhc3MgYHNwZWM9VHJ1ZWAgb3IgYHNwZWNfc2V0PVRydWVgLCB3aGljaCBjYXVzZXMNCiAgICBwYXRjaCB0byBwYXNzIGluIHRoZSBvYmplY3QgYmVpbmcgbW9ja2VkIGFzIHRoZSBzcGVjL3NwZWNfc2V0IG9iamVjdC4NCg0KICAgIGBuZXdfY2FsbGFibGVgIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBhIGRpZmZlcmVudCBjbGFzcywgb3IgY2FsbGFibGUgb2JqZWN0LA0KICAgIHRoYXQgd2lsbCBiZSBjYWxsZWQgdG8gY3JlYXRlIHRoZSBgbmV3YCBvYmplY3QuIEJ5IGRlZmF1bHQgYE1hZ2ljTW9ja2AgaXMNCiAgICB1c2VkLg0KDQogICAgQSBtb3JlIHBvd2VyZnVsIGZvcm0gb2YgYHNwZWNgIGlzIGBhdXRvc3BlY2AuIElmIHlvdSBzZXQgYGF1dG9zcGVjPVRydWVgDQogICAgdGhlbiB0aGUgbW9jayB3aXRoIGJlIGNyZWF0ZWQgd2l0aCBhIHNwZWMgZnJvbSB0aGUgb2JqZWN0IGJlaW5nIHJlcGxhY2VkLg0KICAgIEFsbCBhdHRyaWJ1dGVzIG9mIHRoZSBtb2NrIHdpbGwgYWxzbyBoYXZlIHRoZSBzcGVjIG9mIHRoZSBjb3JyZXNwb25kaW5nDQogICAgYXR0cmlidXRlIG9mIHRoZSBvYmplY3QgYmVpbmcgcmVwbGFjZWQuIE1ldGhvZHMgYW5kIGZ1bmN0aW9ucyBiZWluZw0KICAgIG1vY2tlZCB3aWxsIGhhdmUgdGhlaXIgYXJndW1lbnRzIGNoZWNrZWQgYW5kIHdpbGwgcmFpc2UgYSBgVHlwZUVycm9yYCBpZg0KICAgIHRoZXkgYXJlIGNhbGxlZCB3aXRoIHRoZSB3cm9uZyBzaWduYXR1cmUuIEZvciBtb2NrcyByZXBsYWNpbmcgYSBjbGFzcywNCiAgICB0aGVpciByZXR1cm4gdmFsdWUgKHRoZSAnaW5zdGFuY2UnKSB3aWxsIGhhdmUgdGhlIHNhbWUgc3BlYyBhcyB0aGUgY2xhc3MuDQoNCiAgICBJbnN0ZWFkIG9mIGBhdXRvc3BlYz1UcnVlYCB5b3UgY2FuIHBhc3MgYGF1dG9zcGVjPXNvbWVfb2JqZWN0YCB0byB1c2UgYW4NCiAgICBhcmJpdHJhcnkgb2JqZWN0IGFzIHRoZSBzcGVjIGluc3RlYWQgb2YgdGhlIG9uZSBiZWluZyByZXBsYWNlZC4NCg0KICAgIEJ5IGRlZmF1bHQgYHBhdGNoYCB3aWxsIGZhaWwgdG8gcmVwbGFjZSBhdHRyaWJ1dGVzIHRoYXQgZG9uJ3QgZXhpc3QuIElmDQogICAgeW91IHBhc3MgaW4gYGNyZWF0ZT1UcnVlYCwgYW5kIHRoZSBhdHRyaWJ1dGUgZG9lc24ndCBleGlzdCwgcGF0Y2ggd2lsbA0KICAgIGNyZWF0ZSB0aGUgYXR0cmlidXRlIGZvciB5b3Ugd2hlbiB0aGUgcGF0Y2hlZCBmdW5jdGlvbiBpcyBjYWxsZWQsIGFuZA0KICAgIGRlbGV0ZSBpdCBhZ2FpbiBhZnRlcndhcmRzLiBUaGlzIGlzIHVzZWZ1bCBmb3Igd3JpdGluZyB0ZXN0cyBhZ2FpbnN0DQogICAgYXR0cmlidXRlcyB0aGF0IHlvdXIgcHJvZHVjdGlvbiBjb2RlIGNyZWF0ZXMgYXQgcnVudGltZS4gSXQgaXMgb2ZmIGJ5IGJ5DQogICAgZGVmYXVsdCBiZWNhdXNlIGl0IGNhbiBiZSBkYW5nZXJvdXMuIFdpdGggaXQgc3dpdGNoZWQgb24geW91IGNhbiB3cml0ZQ0KICAgIHBhc3NpbmcgdGVzdHMgYWdhaW5zdCBBUElzIHRoYXQgZG9uJ3QgYWN0dWFsbHkgZXhpc3QhDQoNCiAgICBQYXRjaCBjYW4gYmUgdXNlZCBhcyBhIGBUZXN0Q2FzZWAgY2xhc3MgZGVjb3JhdG9yLiBJdCB3b3JrcyBieQ0KICAgIGRlY29yYXRpbmcgZWFjaCB0ZXN0IG1ldGhvZCBpbiB0aGUgY2xhc3MuIFRoaXMgcmVkdWNlcyB0aGUgYm9pbGVycGxhdGUNCiAgICBjb2RlIHdoZW4geW91ciB0ZXN0IG1ldGhvZHMgc2hhcmUgYSBjb21tb24gcGF0Y2hpbmdzIHNldC4gYHBhdGNoYCBmaW5kcw0KICAgIHRlc3RzIGJ5IGxvb2tpbmcgZm9yIG1ldGhvZCBuYW1lcyB0aGF0IHN0YXJ0IHdpdGggYHBhdGNoLlRFU1RfUFJFRklYYC4NCiAgICBCeSBkZWZhdWx0IHRoaXMgaXMgYHRlc3RgLCB3aGljaCBtYXRjaGVzIHRoZSB3YXkgYHVuaXR0ZXN0YCBmaW5kcyB0ZXN0cy4NCiAgICBZb3UgY2FuIHNwZWNpZnkgYW4gYWx0ZXJuYXRpdmUgcHJlZml4IGJ5IHNldHRpbmcgYHBhdGNoLlRFU1RfUFJFRklYYC4NCg0KICAgIFBhdGNoIGNhbiBiZSB1c2VkIGFzIGEgY29udGV4dCBtYW5hZ2VyLCB3aXRoIHRoZSB3aXRoIHN0YXRlbWVudC4gSGVyZSB0aGUNCiAgICBwYXRjaGluZyBhcHBsaWVzIHRvIHRoZSBpbmRlbnRlZCBibG9jayBhZnRlciB0aGUgd2l0aCBzdGF0ZW1lbnQuIElmIHlvdQ0KICAgIHVzZSAiYXMiIHRoZW4gdGhlIHBhdGNoZWQgb2JqZWN0IHdpbGwgYmUgYm91bmQgdG8gdGhlIG5hbWUgYWZ0ZXIgdGhlDQogICAgImFzIjsgdmVyeSB1c2VmdWwgaWYgYHBhdGNoYCBpcyBjcmVhdGluZyBhIG1vY2sgb2JqZWN0IGZvciB5b3UuDQoNCiAgICBgcGF0Y2hgIHRha2VzIGFyYml0cmFyeSBrZXl3b3JkIGFyZ3VtZW50cy4gVGhlc2Ugd2lsbCBiZSBwYXNzZWQgdG8NCiAgICB0aGUgYE1vY2tgIChvciBgbmV3X2NhbGxhYmxlYCkgb24gY29uc3RydWN0aW9uLg0KDQogICAgYHBhdGNoLmRpY3QoLi4uKWAsIGBwYXRjaC5tdWx0aXBsZSguLi4pYCBhbmQgYHBhdGNoLm9iamVjdCguLi4pYCBhcmUNCiAgICBhdmFpbGFibGUgZm9yIGFsdGVybmF0ZSB1c2UtY2FzZXMuDQogICAgIiIiDQogICAgZ2V0dGVyLCBhdHRyaWJ1dGUgPSBfZ2V0X3RhcmdldCh0YXJnZXQpDQogICAgcmV0dXJuIF9wYXRjaCgNCiAgICAgICAgZ2V0dGVyLCBhdHRyaWJ1dGUsIG5ldywgc3BlYywgY3JlYXRlLA0KICAgICAgICBzcGVjX3NldCwgYXV0b3NwZWMsIG5ld19jYWxsYWJsZSwga3dhcmdzDQogICAgKQ0KDQoNCmNsYXNzIF9wYXRjaF9kaWN0KG9iamVjdCk6DQogICAgIiIiDQogICAgUGF0Y2ggYSBkaWN0aW9uYXJ5LCBvciBkaWN0aW9uYXJ5IGxpa2Ugb2JqZWN0LCBhbmQgcmVzdG9yZSB0aGUgZGljdGlvbmFyeQ0KICAgIHRvIGl0cyBvcmlnaW5hbCBzdGF0ZSBhZnRlciB0aGUgdGVzdC4NCg0KICAgIGBpbl9kaWN0YCBjYW4gYmUgYSBkaWN0aW9uYXJ5IG9yIGEgbWFwcGluZyBsaWtlIGNvbnRhaW5lci4gSWYgaXQgaXMgYQ0KICAgIG1hcHBpbmcgdGhlbiBpdCBtdXN0IGF0IGxlYXN0IHN1cHBvcnQgZ2V0dGluZywgc2V0dGluZyBhbmQgZGVsZXRpbmcgaXRlbXMNCiAgICBwbHVzIGl0ZXJhdGluZyBvdmVyIGtleXMuDQoNCiAgICBgaW5fZGljdGAgY2FuIGFsc28gYmUgYSBzdHJpbmcgc3BlY2lmeWluZyB0aGUgbmFtZSBvZiB0aGUgZGljdGlvbmFyeSwgd2hpY2gNCiAgICB3aWxsIHRoZW4gYmUgZmV0Y2hlZCBieSBpbXBvcnRpbmcgaXQuDQoNCiAgICBgdmFsdWVzYCBjYW4gYmUgYSBkaWN0aW9uYXJ5IG9mIHZhbHVlcyB0byBzZXQgaW4gdGhlIGRpY3Rpb25hcnkuIGB2YWx1ZXNgDQogICAgY2FuIGFsc28gYmUgYW4gaXRlcmFibGUgb2YgYChrZXksIHZhbHVlKWAgcGFpcnMuDQoNCiAgICBJZiBgY2xlYXJgIGlzIFRydWUgdGhlbiB0aGUgZGljdGlvbmFyeSB3aWxsIGJlIGNsZWFyZWQgYmVmb3JlIHRoZSBuZXcNCiAgICB2YWx1ZXMgYXJlIHNldC4NCg0KICAgIGBwYXRjaC5kaWN0YCBjYW4gYWxzbyBiZSBjYWxsZWQgd2l0aCBhcmJpdHJhcnkga2V5d29yZCBhcmd1bWVudHMgdG8gc2V0DQogICAgdmFsdWVzIGluIHRoZSBkaWN0aW9uYXJ5OjoNCg0KICAgICAgICB3aXRoIHBhdGNoLmRpY3QoJ3N5cy5tb2R1bGVzJywgbXltb2R1bGU9TW9jaygpLCBvdGhlcl9tb2R1bGU9TW9jaygpKToNCiAgICAgICAgICAgIC4uLg0KDQogICAgYHBhdGNoLmRpY3RgIGNhbiBiZSB1c2VkIGFzIGEgY29udGV4dCBtYW5hZ2VyLCBkZWNvcmF0b3Igb3IgY2xhc3MNCiAgICBkZWNvcmF0b3IuIFdoZW4gdXNlZCBhcyBhIGNsYXNzIGRlY29yYXRvciBgcGF0Y2guZGljdGAgaG9ub3Vycw0KICAgIGBwYXRjaC5URVNUX1BSRUZJWGAgZm9yIGNob29zaW5nIHdoaWNoIG1ldGhvZHMgdG8gd3JhcC4NCiAgICAiIiINCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbl9kaWN0LCB2YWx1ZXM9KCksIGNsZWFyPUZhbHNlLCAqKmt3YXJncyk6DQogICAgICAgIGlmIGlzaW5zdGFuY2UoaW5fZGljdCwgc3RyKToNCiAgICAgICAgICAgIGluX2RpY3QgPSBfaW1wb3J0ZXIoaW5fZGljdCkNCiAgICAgICAgc2VsZi5pbl9kaWN0ID0gaW5fZGljdA0KICAgICAgICAjIHN1cHBvcnQgYW55IGFyZ3VtZW50IHN1cHBvcnRlZCBieSBkaWN0KC4uLikgY29uc3RydWN0b3INCiAgICAgICAgc2VsZi52YWx1ZXMgPSBkaWN0KHZhbHVlcykNCiAgICAgICAgc2VsZi52YWx1ZXMudXBkYXRlKGt3YXJncykNCiAgICAgICAgc2VsZi5jbGVhciA9IGNsZWFyDQogICAgICAgIHNlbGYuX29yaWdpbmFsID0gTm9uZQ0KDQoNCiAgICBkZWYgX19jYWxsX18oc2VsZiwgZik6DQogICAgICAgIGlmIGlzaW5zdGFuY2UoZiwgdHlwZSk6DQogICAgICAgICAgICByZXR1cm4gc2VsZi5kZWNvcmF0ZV9jbGFzcyhmKQ0KICAgICAgICBAd3JhcHMoZikNCiAgICAgICAgZGVmIF9pbm5lcigqYXJncywgKiprdyk6DQogICAgICAgICAgICBzZWxmLl9wYXRjaF9kaWN0KCkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICByZXR1cm4gZigqYXJncywgKiprdykNCiAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgc2VsZi5fdW5wYXRjaF9kaWN0KCkNCg0KICAgICAgICByZXR1cm4gX2lubmVyDQoNCg0KICAgIGRlZiBkZWNvcmF0ZV9jbGFzcyhzZWxmLCBrbGFzcyk6DQogICAgICAgIGZvciBhdHRyIGluIGRpcihrbGFzcyk6DQogICAgICAgICAgICBhdHRyX3ZhbHVlID0gZ2V0YXR0cihrbGFzcywgYXR0cikNCiAgICAgICAgICAgIGlmIChhdHRyLnN0YXJ0c3dpdGgocGF0Y2guVEVTVF9QUkVGSVgpIGFuZA0KICAgICAgICAgICAgICAgICBoYXNhdHRyKGF0dHJfdmFsdWUsICJfX2NhbGxfXyIpKToNCiAgICAgICAgICAgICAgICBkZWNvcmF0b3IgPSBfcGF0Y2hfZGljdChzZWxmLmluX2RpY3QsIHNlbGYudmFsdWVzLCBzZWxmLmNsZWFyKQ0KICAgICAgICAgICAgICAgIGRlY29yYXRlZCA9IGRlY29yYXRvcihhdHRyX3ZhbHVlKQ0KICAgICAgICAgICAgICAgIHNldGF0dHIoa2xhc3MsIGF0dHIsIGRlY29yYXRlZCkNCiAgICAgICAgcmV0dXJuIGtsYXNzDQoNCg0KICAgIGRlZiBfX2VudGVyX18oc2VsZik6DQogICAgICAgICIiIlBhdGNoIHRoZSBkaWN0LiIiIg0KICAgICAgICBzZWxmLl9wYXRjaF9kaWN0KCkNCg0KDQogICAgZGVmIF9wYXRjaF9kaWN0KHNlbGYpOg0KICAgICAgICB2YWx1ZXMgPSBzZWxmLnZhbHVlcw0KICAgICAgICBpbl9kaWN0ID0gc2VsZi5pbl9kaWN0DQogICAgICAgIGNsZWFyID0gc2VsZi5jbGVhcg0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIG9yaWdpbmFsID0gaW5fZGljdC5jb3B5KCkNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgIyBkaWN0IGxpa2Ugb2JqZWN0IHdpdGggbm8gY29weSBtZXRob2QNCiAgICAgICAgICAgICMgbXVzdCBzdXBwb3J0IGl0ZXJhdGlvbiBvdmVyIGtleXMNCiAgICAgICAgICAgIG9yaWdpbmFsID0ge30NCiAgICAgICAgICAgIGZvciBrZXkgaW4gaW5fZGljdDoNCiAgICAgICAgICAgICAgICBvcmlnaW5hbFtrZXldID0gaW5fZGljdFtrZXldDQogICAgICAgIHNlbGYuX29yaWdpbmFsID0gb3JpZ2luYWwNCg0KICAgICAgICBpZiBjbGVhcjoNCiAgICAgICAgICAgIF9jbGVhcl9kaWN0KGluX2RpY3QpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaW5fZGljdC51cGRhdGUodmFsdWVzKQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICAjIGRpY3QgbGlrZSBvYmplY3Qgd2l0aCBubyB1cGRhdGUgbWV0aG9kDQogICAgICAgICAgICBmb3Iga2V5IGluIHZhbHVlczoNCiAgICAgICAgICAgICAgICBpbl9kaWN0W2tleV0gPSB2YWx1ZXNba2V5XQ0KDQoNCiAgICBkZWYgX3VucGF0Y2hfZGljdChzZWxmKToNCiAgICAgICAgaW5fZGljdCA9IHNlbGYuaW5fZGljdA0KICAgICAgICBvcmlnaW5hbCA9IHNlbGYuX29yaWdpbmFsDQoNCiAgICAgICAgX2NsZWFyX2RpY3QoaW5fZGljdCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBpbl9kaWN0LnVwZGF0ZShvcmlnaW5hbCkNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgZm9yIGtleSBpbiBvcmlnaW5hbDoNCiAgICAgICAgICAgICAgICBpbl9kaWN0W2tleV0gPSBvcmlnaW5hbFtrZXldDQoNCg0KICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqYXJncyk6DQogICAgICAgICIiIlVucGF0Y2ggdGhlIGRpY3QuIiIiDQogICAgICAgIHNlbGYuX3VucGF0Y2hfZGljdCgpDQogICAgICAgIHJldHVybiBGYWxzZQ0KDQogICAgc3RhcnQgPSBfX2VudGVyX18NCiAgICBzdG9wID0gX19leGl0X18NCg0KDQpkZWYgX2NsZWFyX2RpY3QoaW5fZGljdCk6DQogICAgdHJ5Og0KICAgICAgICBpbl9kaWN0LmNsZWFyKCkNCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgIGtleXMgPSBsaXN0KGluX2RpY3QpDQogICAgICAgIGZvciBrZXkgaW4ga2V5czoNCiAgICAgICAgICAgIGRlbCBpbl9kaWN0W2tleV0NCg0KDQpkZWYgX3BhdGNoX3N0b3BhbGwoKToNCiAgICAiIiJTdG9wIGFsbCBhY3RpdmUgcGF0Y2hlcy4iIiINCiAgICBmb3IgcGF0Y2ggaW4gbGlzdChfcGF0Y2guX2FjdGl2ZV9wYXRjaGVzKToNCiAgICAgICAgcGF0Y2guc3RvcCgpDQoNCg0KcGF0Y2gub2JqZWN0ID0gX3BhdGNoX29iamVjdA0KcGF0Y2guZGljdCA9IF9wYXRjaF9kaWN0DQpwYXRjaC5tdWx0aXBsZSA9IF9wYXRjaF9tdWx0aXBsZQ0KcGF0Y2guc3RvcGFsbCA9IF9wYXRjaF9zdG9wYWxsDQpwYXRjaC5URVNUX1BSRUZJWCA9ICd0ZXN0Jw0KDQptYWdpY19tZXRob2RzID0gKA0KICAgICJsdCBsZSBndCBnZSBlcSBuZSAiDQogICAgImdldGl0ZW0gc2V0aXRlbSBkZWxpdGVtICINCiAgICAibGVuIGNvbnRhaW5zIGl0ZXIgIg0KICAgICJoYXNoIHN0ciBzaXplb2YgIg0KICAgICJlbnRlciBleGl0ICINCiAgICAiZGl2bW9kIG5lZyBwb3MgYWJzIGludmVydCAiDQogICAgImNvbXBsZXggaW50IGZsb2F0IGluZGV4ICINCiAgICAidHJ1bmMgZmxvb3IgY2VpbCAiDQogICAgImJvb2wgbmV4dCAiDQopDQoNCm51bWVyaWNzID0gImFkZCBzdWIgbXVsIGRpdiBmbG9vcmRpdiBtb2QgbHNoaWZ0IHJzaGlmdCBhbmQgeG9yIG9yIHBvdyAiDQppbnBsYWNlID0gJyAnLmpvaW4oJ2klcycgJSBuIGZvciBuIGluIG51bWVyaWNzLnNwbGl0KCkpDQpyaWdodCA9ICcgJy5qb2luKCdyJXMnICUgbiBmb3IgbiBpbiBudW1lcmljcy5zcGxpdCgpKQ0KDQojIG5vdCBpbmNsdWRpbmcgX19wcmVwYXJlX18sIF9faW5zdGFuY2VjaGVja19fLCBfX3N1YmNsYXNzY2hlY2tfXw0KIyAoYXMgdGhleSBhcmUgbWV0YWNsYXNzIG1ldGhvZHMpDQojIF9fZGVsX18gaXMgbm90IHN1cHBvcnRlZCBhdCBhbGwgYXMgaXQgY2F1c2VzIHByb2JsZW1zIGlmIGl0IGV4aXN0cw0KDQpfbm9uX2RlZmF1bHRzID0gc2V0KCdfXyVzX18nICUgbWV0aG9kIGZvciBtZXRob2QgaW4gWw0KICAgICdnZXQnLCAnc2V0JywgJ2RlbGV0ZScsICdyZXZlcnNlZCcsICdtaXNzaW5nJywgJ3JlZHVjZScsICdyZWR1Y2VfZXgnLA0KICAgICdnZXRpbml0YXJncycsICdnZXRuZXdhcmdzJywgJ2dldHN0YXRlJywgJ3NldHN0YXRlJywgJ2dldGZvcm1hdCcsDQogICAgJ3NldGZvcm1hdCcsICdyZXByJywgJ2RpcicsICdzdWJjbGFzc2VzJywgJ2Zvcm1hdCcsDQpdKQ0KDQoNCmRlZiBfZ2V0X21ldGhvZChuYW1lLCBmdW5jKToNCiAgICAiVHVybnMgYSBjYWxsYWJsZSBvYmplY3QgKGxpa2UgYSBtb2NrKSBpbnRvIGEgcmVhbCBmdW5jdGlvbiINCiAgICBkZWYgbWV0aG9kKHNlbGYsICphcmdzLCAqKmt3KToNCiAgICAgICAgcmV0dXJuIGZ1bmMoc2VsZiwgKmFyZ3MsICoqa3cpDQogICAgbWV0aG9kLl9fbmFtZV9fID0gbmFtZQ0KICAgIHJldHVybiBtZXRob2QNCg0KDQpfbWFnaWNzID0gc2V0KA0KICAgICdfXyVzX18nICUgbWV0aG9kIGZvciBtZXRob2QgaW4NCiAgICAnICcuam9pbihbbWFnaWNfbWV0aG9kcywgbnVtZXJpY3MsIGlucGxhY2UsIHJpZ2h0XSkuc3BsaXQoKQ0KKQ0KDQpfYWxsX21hZ2ljcyA9IF9tYWdpY3MgfCBfbm9uX2RlZmF1bHRzDQoNCl91bnN1cHBvcnRlZF9tYWdpY3MgPSBzZXQoWw0KICAgICdfX2dldGF0dHJfXycsICdfX3NldGF0dHJfXycsDQogICAgJ19faW5pdF9fJywgJ19fbmV3X18nLCAnX19wcmVwYXJlX18nDQogICAgJ19faW5zdGFuY2VjaGVja19fJywgJ19fc3ViY2xhc3NjaGVja19fJywNCiAgICAnX19kZWxfXycNCl0pDQoNCl9jYWxjdWxhdGVfcmV0dXJuX3ZhbHVlID0gew0KICAgICdfX2hhc2hfXyc6IGxhbWJkYSBzZWxmOiBvYmplY3QuX19oYXNoX18oc2VsZiksDQogICAgJ19fc3RyX18nOiBsYW1iZGEgc2VsZjogb2JqZWN0Ll9fc3RyX18oc2VsZiksDQogICAgJ19fc2l6ZW9mX18nOiBsYW1iZGEgc2VsZjogb2JqZWN0Ll9fc2l6ZW9mX18oc2VsZiksDQp9DQoNCl9yZXR1cm5fdmFsdWVzID0gew0KICAgICdfX2x0X18nOiBOb3RJbXBsZW1lbnRlZCwNCiAgICAnX19ndF9fJzogTm90SW1wbGVtZW50ZWQsDQogICAgJ19fbGVfXyc6IE5vdEltcGxlbWVudGVkLA0KICAgICdfX2dlX18nOiBOb3RJbXBsZW1lbnRlZCwNCiAgICAnX19pbnRfXyc6IDEsDQogICAgJ19fY29udGFpbnNfXyc6IEZhbHNlLA0KICAgICdfX2xlbl9fJzogMCwNCiAgICAnX19leGl0X18nOiBGYWxzZSwNCiAgICAnX19jb21wbGV4X18nOiAxaiwNCiAgICAnX19mbG9hdF9fJzogMS4wLA0KICAgICdfX2Jvb2xfXyc6IFRydWUsDQogICAgJ19faW5kZXhfXyc6IDEsDQp9DQoNCg0KZGVmIF9nZXRfZXEoc2VsZik6DQogICAgZGVmIF9fZXFfXyhvdGhlcik6DQogICAgICAgIHJldF92YWwgPSBzZWxmLl9fZXFfXy5fbW9ja19yZXR1cm5fdmFsdWUNCiAgICAgICAgaWYgcmV0X3ZhbCBpcyBub3QgREVGQVVMVDoNCiAgICAgICAgICAgIHJldHVybiByZXRfdmFsDQogICAgICAgIHJldHVybiBzZWxmIGlzIG90aGVyDQogICAgcmV0dXJuIF9fZXFfXw0KDQpkZWYgX2dldF9uZShzZWxmKToNCiAgICBkZWYgX19uZV9fKG90aGVyKToNCiAgICAgICAgaWYgc2VsZi5fX25lX18uX21vY2tfcmV0dXJuX3ZhbHVlIGlzIG5vdCBERUZBVUxUOg0KICAgICAgICAgICAgcmV0dXJuIERFRkFVTFQNCiAgICAgICAgcmV0dXJuIHNlbGYgaXMgbm90IG90aGVyDQogICAgcmV0dXJuIF9fbmVfXw0KDQpkZWYgX2dldF9pdGVyKHNlbGYpOg0KICAgIGRlZiBfX2l0ZXJfXygpOg0KICAgICAgICByZXRfdmFsID0gc2VsZi5fX2l0ZXJfXy5fbW9ja19yZXR1cm5fdmFsdWUNCiAgICAgICAgaWYgcmV0X3ZhbCBpcyBERUZBVUxUOg0KICAgICAgICAgICAgcmV0dXJuIGl0ZXIoW10pDQogICAgICAgICMgaWYgcmV0X3ZhbCB3YXMgYWxyZWFkeSBhbiBpdGVyYXRvciwgdGhlbiBjYWxsaW5nIGl0ZXIgb24gaXQgc2hvdWxkDQogICAgICAgICMgcmV0dXJuIHRoZSBpdGVyYXRvciB1bmNoYW5nZWQNCiAgICAgICAgcmV0dXJuIGl0ZXIocmV0X3ZhbCkNCiAgICByZXR1cm4gX19pdGVyX18NCg0KX3NpZGVfZWZmZWN0X21ldGhvZHMgPSB7DQogICAgJ19fZXFfXyc6IF9nZXRfZXEsDQogICAgJ19fbmVfXyc6IF9nZXRfbmUsDQogICAgJ19faXRlcl9fJzogX2dldF9pdGVyLA0KfQ0KDQoNCg0KZGVmIF9zZXRfcmV0dXJuX3ZhbHVlKG1vY2ssIG1ldGhvZCwgbmFtZSk6DQogICAgZml4ZWQgPSBfcmV0dXJuX3ZhbHVlcy5nZXQobmFtZSwgREVGQVVMVCkNCiAgICBpZiBmaXhlZCBpcyBub3QgREVGQVVMVDoNCiAgICAgICAgbWV0aG9kLnJldHVybl92YWx1ZSA9IGZpeGVkDQogICAgICAgIHJldHVybg0KDQogICAgcmV0dXJuX2NhbHVsYXRvciA9IF9jYWxjdWxhdGVfcmV0dXJuX3ZhbHVlLmdldChuYW1lKQ0KICAgIGlmIHJldHVybl9jYWx1bGF0b3IgaXMgbm90IE5vbmU6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJldHVybl92YWx1ZSA9IHJldHVybl9jYWx1bGF0b3IobW9jaykNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgIyBYWFhYIHdoeSBkbyB3ZSByZXR1cm4gQXR0cmlidXRlRXJyb3IgaGVyZT8NCiAgICAgICAgICAgICMgICAgICBzZXQgaXQgYXMgYSBzaWRlX2VmZmVjdCBpbnN0ZWFkPw0KICAgICAgICAgICAgcmV0dXJuX3ZhbHVlID0gQXR0cmlidXRlRXJyb3IobmFtZSkNCiAgICAgICAgbWV0aG9kLnJldHVybl92YWx1ZSA9IHJldHVybl92YWx1ZQ0KICAgICAgICByZXR1cm4NCg0KICAgIHNpZGVfZWZmZWN0b3IgPSBfc2lkZV9lZmZlY3RfbWV0aG9kcy5nZXQobmFtZSkNCiAgICBpZiBzaWRlX2VmZmVjdG9yIGlzIG5vdCBOb25lOg0KICAgICAgICBtZXRob2Quc2lkZV9lZmZlY3QgPSBzaWRlX2VmZmVjdG9yKG1vY2spDQoNCg0KDQpjbGFzcyBNYWdpY01peGluKG9iamVjdCk6DQogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3KToNCiAgICAgICAgX3NhZmVfc3VwZXIoTWFnaWNNaXhpbiwgc2VsZikuX19pbml0X18oKmFyZ3MsICoqa3cpDQogICAgICAgIHNlbGYuX21vY2tfc2V0X21hZ2ljcygpDQoNCg0KICAgIGRlZiBfbW9ja19zZXRfbWFnaWNzKHNlbGYpOg0KICAgICAgICB0aGVzZV9tYWdpY3MgPSBfbWFnaWNzDQoNCiAgICAgICAgaWYgc2VsZi5fbW9ja19tZXRob2RzIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgdGhlc2VfbWFnaWNzID0gX21hZ2ljcy5pbnRlcnNlY3Rpb24oc2VsZi5fbW9ja19tZXRob2RzKQ0KDQogICAgICAgICAgICByZW1vdmVfbWFnaWNzID0gc2V0KCkNCiAgICAgICAgICAgIHJlbW92ZV9tYWdpY3MgPSBfbWFnaWNzIC0gdGhlc2VfbWFnaWNzDQoNCiAgICAgICAgICAgIGZvciBlbnRyeSBpbiByZW1vdmVfbWFnaWNzOg0KICAgICAgICAgICAgICAgIGlmIGVudHJ5IGluIHR5cGUoc2VsZikuX19kaWN0X186DQogICAgICAgICAgICAgICAgICAgICMgcmVtb3ZlIHVubmVlZGVkIG1hZ2ljIG1ldGhvZHMNCiAgICAgICAgICAgICAgICAgICAgZGVsYXR0cihzZWxmLCBlbnRyeSkNCg0KICAgICAgICAjIGRvbid0IG92ZXJ3cml0ZSBleGlzdGluZyBhdHRyaWJ1dGVzIGlmIGNhbGxlZCBhIHNlY29uZCB0aW1lDQogICAgICAgIHRoZXNlX21hZ2ljcyA9IHRoZXNlX21hZ2ljcyAtIHNldCh0eXBlKHNlbGYpLl9fZGljdF9fKQ0KDQogICAgICAgIF90eXBlID0gdHlwZShzZWxmKQ0KICAgICAgICBmb3IgZW50cnkgaW4gdGhlc2VfbWFnaWNzOg0KICAgICAgICAgICAgc2V0YXR0cihfdHlwZSwgZW50cnksIE1hZ2ljUHJveHkoZW50cnksIHNlbGYpKQ0KDQoNCg0KY2xhc3MgTm9uQ2FsbGFibGVNYWdpY01vY2soTWFnaWNNaXhpbiwgTm9uQ2FsbGFibGVNb2NrKToNCiAgICAiIiJBIHZlcnNpb24gb2YgYE1hZ2ljTW9ja2AgdGhhdCBpc24ndCBjYWxsYWJsZS4iIiINCiAgICBkZWYgbW9ja19hZGRfc3BlYyhzZWxmLCBzcGVjLCBzcGVjX3NldD1GYWxzZSk6DQogICAgICAgICIiIkFkZCBhIHNwZWMgdG8gYSBtb2NrLiBgc3BlY2AgY2FuIGVpdGhlciBiZSBhbiBvYmplY3Qgb3IgYQ0KICAgICAgICBsaXN0IG9mIHN0cmluZ3MuIE9ubHkgYXR0cmlidXRlcyBvbiB0aGUgYHNwZWNgIGNhbiBiZSBmZXRjaGVkIGFzDQogICAgICAgIGF0dHJpYnV0ZXMgZnJvbSB0aGUgbW9jay4NCg0KICAgICAgICBJZiBgc3BlY19zZXRgIGlzIFRydWUgdGhlbiBvbmx5IGF0dHJpYnV0ZXMgb24gdGhlIHNwZWMgY2FuIGJlIHNldC4iIiINCiAgICAgICAgc2VsZi5fbW9ja19hZGRfc3BlYyhzcGVjLCBzcGVjX3NldCkNCiAgICAgICAgc2VsZi5fbW9ja19zZXRfbWFnaWNzKCkNCg0KDQoNCmNsYXNzIE1hZ2ljTW9jayhNYWdpY01peGluLCBNb2NrKToNCiAgICAiIiINCiAgICBNYWdpY01vY2sgaXMgYSBzdWJjbGFzcyBvZiBNb2NrIHdpdGggZGVmYXVsdCBpbXBsZW1lbnRhdGlvbnMNCiAgICBvZiBtb3N0IG9mIHRoZSBtYWdpYyBtZXRob2RzLiBZb3UgY2FuIHVzZSBNYWdpY01vY2sgd2l0aG91dCBoYXZpbmcgdG8NCiAgICBjb25maWd1cmUgdGhlIG1hZ2ljIG1ldGhvZHMgeW91cnNlbGYuDQoNCiAgICBJZiB5b3UgdXNlIHRoZSBgc3BlY2Agb3IgYHNwZWNfc2V0YCBhcmd1bWVudHMgdGhlbiAqb25seSogbWFnaWMNCiAgICBtZXRob2RzIHRoYXQgZXhpc3QgaW4gdGhlIHNwZWMgd2lsbCBiZSBjcmVhdGVkLg0KDQogICAgQXR0cmlidXRlcyBhbmQgdGhlIHJldHVybiB2YWx1ZSBvZiBhIGBNYWdpY01vY2tgIHdpbGwgYWxzbyBiZSBgTWFnaWNNb2Nrc2AuDQogICAgIiIiDQogICAgZGVmIG1vY2tfYWRkX3NwZWMoc2VsZiwgc3BlYywgc3BlY19zZXQ9RmFsc2UpOg0KICAgICAgICAiIiJBZGQgYSBzcGVjIHRvIGEgbW9jay4gYHNwZWNgIGNhbiBlaXRoZXIgYmUgYW4gb2JqZWN0IG9yIGENCiAgICAgICAgbGlzdCBvZiBzdHJpbmdzLiBPbmx5IGF0dHJpYnV0ZXMgb24gdGhlIGBzcGVjYCBjYW4gYmUgZmV0Y2hlZCBhcw0KICAgICAgICBhdHRyaWJ1dGVzIGZyb20gdGhlIG1vY2suDQoNCiAgICAgICAgSWYgYHNwZWNfc2V0YCBpcyBUcnVlIHRoZW4gb25seSBhdHRyaWJ1dGVzIG9uIHRoZSBzcGVjIGNhbiBiZSBzZXQuIiIiDQogICAgICAgIHNlbGYuX21vY2tfYWRkX3NwZWMoc3BlYywgc3BlY19zZXQpDQogICAgICAgIHNlbGYuX21vY2tfc2V0X21hZ2ljcygpDQoNCg0KDQpjbGFzcyBNYWdpY1Byb3h5KG9iamVjdCk6DQogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIHBhcmVudCk6DQogICAgICAgIHNlbGYubmFtZSA9IG5hbWUNCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQNCg0KICAgIGRlZiBfX2NhbGxfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICBtID0gc2VsZi5jcmVhdGVfbW9jaygpDQogICAgICAgIHJldHVybiBtKCphcmdzLCAqKmt3YXJncykNCg0KICAgIGRlZiBjcmVhdGVfbW9jayhzZWxmKToNCiAgICAgICAgZW50cnkgPSBzZWxmLm5hbWUNCiAgICAgICAgcGFyZW50ID0gc2VsZi5wYXJlbnQNCiAgICAgICAgbSA9IHBhcmVudC5fZ2V0X2NoaWxkX21vY2sobmFtZT1lbnRyeSwgX25ld19uYW1lPWVudHJ5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbmV3X3BhcmVudD1wYXJlbnQpDQogICAgICAgIHNldGF0dHIocGFyZW50LCBlbnRyeSwgbSkNCiAgICAgICAgX3NldF9yZXR1cm5fdmFsdWUocGFyZW50LCBtLCBlbnRyeSkNCiAgICAgICAgcmV0dXJuIG0NCg0KICAgIGRlZiBfX2dldF9fKHNlbGYsIG9iaiwgX3R5cGU9Tm9uZSk6DQogICAgICAgIHJldHVybiBzZWxmLmNyZWF0ZV9tb2NrKCkNCg0KDQoNCmNsYXNzIF9BTlkob2JqZWN0KToNCiAgICAiQSBoZWxwZXIgb2JqZWN0IHRoYXQgY29tcGFyZXMgZXF1YWwgdG8gZXZlcnl0aGluZy4iDQoNCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgcmV0dXJuIFRydWUNCg0KICAgIGRlZiBfX25lX18oc2VsZiwgb3RoZXIpOg0KICAgICAgICByZXR1cm4gRmFsc2UNCg0KICAgIGRlZiBfX3JlcHJfXyhzZWxmKToNCiAgICAgICAgcmV0dXJuICc8QU5ZPicNCg0KQU5ZID0gX0FOWSgpDQoNCg0KDQpkZWYgX2Zvcm1hdF9jYWxsX3NpZ25hdHVyZShuYW1lLCBhcmdzLCBrd2FyZ3MpOg0KICAgIG1lc3NhZ2UgPSAnJXMoJSVzKScgJSBuYW1lDQogICAgZm9ybWF0dGVkX2FyZ3MgPSAnJw0KICAgIGFyZ3Nfc3RyaW5nID0gJywgJy5qb2luKFtyZXByKGFyZykgZm9yIGFyZyBpbiBhcmdzXSkNCiAgICBrd2FyZ3Nfc3RyaW5nID0gJywgJy5qb2luKFsNCiAgICAgICAgJyVzPSVyJyAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiBrd2FyZ3MuaXRlbXMoKQ0KICAgIF0pDQogICAgaWYgYXJnc19zdHJpbmc6DQogICAgICAgIGZvcm1hdHRlZF9hcmdzID0gYXJnc19zdHJpbmcNCiAgICBpZiBrd2FyZ3Nfc3RyaW5nOg0KICAgICAgICBpZiBmb3JtYXR0ZWRfYXJnczoNCiAgICAgICAgICAgIGZvcm1hdHRlZF9hcmdzICs9ICcsICcNCiAgICAgICAgZm9ybWF0dGVkX2FyZ3MgKz0ga3dhcmdzX3N0cmluZw0KDQogICAgcmV0dXJuIG1lc3NhZ2UgJSBmb3JtYXR0ZWRfYXJncw0KDQoNCg0KY2xhc3MgX0NhbGwodHVwbGUpOg0KICAgICIiIg0KICAgIEEgdHVwbGUgZm9yIGhvbGRpbmcgdGhlIHJlc3VsdHMgb2YgYSBjYWxsIHRvIGEgbW9jaywgZWl0aGVyIGluIHRoZSBmb3JtDQogICAgYChhcmdzLCBrd2FyZ3MpYCBvciBgKG5hbWUsIGFyZ3MsIGt3YXJncylgLg0KDQogICAgSWYgYXJncyBvciBrd2FyZ3MgYXJlIGVtcHR5IHRoZW4gYSBjYWxsIHR1cGxlIHdpbGwgY29tcGFyZSBlcXVhbCB0bw0KICAgIGEgdHVwbGUgd2l0aG91dCB0aG9zZSB2YWx1ZXMuIFRoaXMgbWFrZXMgY29tcGFyaXNvbnMgbGVzcyB2ZXJib3NlOjoNCg0KICAgICAgICBfQ2FsbCgoJ25hbWUnLCAoKSwge30pKSA9PSAoJ25hbWUnLCkNCiAgICAgICAgX0NhbGwoKCduYW1lJywgKDEsKSwge30pKSA9PSAoJ25hbWUnLCAoMSwpKQ0KICAgICAgICBfQ2FsbCgoKCksIHsnYSc6ICdiJ30pKSA9PSAoeydhJzogJ2InfSwpDQoNCiAgICBUaGUgYF9DYWxsYCBvYmplY3QgcHJvdmlkZXMgYSB1c2VmdWwgc2hvcnRjdXQgZm9yIGNvbXBhcmluZyB3aXRoIGNhbGw6Og0KDQogICAgICAgIF9DYWxsKCgoMSwgMiksIHsnYSc6IDN9KSkgPT0gY2FsbCgxLCAyLCBhPTMpDQogICAgICAgIF9DYWxsKCgnZm9vJywgKDEsIDIpLCB7J2EnOiAzfSkpID09IGNhbGwuZm9vKDEsIDIsIGE9MykNCg0KICAgIElmIHRoZSBfQ2FsbCBoYXMgbm8gbmFtZSB0aGVuIGl0IHdpbGwgbWF0Y2ggYW55IG5hbWUuDQogICAgIiIiDQogICAgZGVmIF9fbmV3X18oY2xzLCB2YWx1ZT0oKSwgbmFtZT1Ob25lLCBwYXJlbnQ9Tm9uZSwgdHdvPUZhbHNlLA0KICAgICAgICAgICAgICAgIGZyb21fa2FsbD1UcnVlKToNCiAgICAgICAgbmFtZSA9ICcnDQogICAgICAgIGFyZ3MgPSAoKQ0KICAgICAgICBrd2FyZ3MgPSB7fQ0KICAgICAgICBfbGVuID0gbGVuKHZhbHVlKQ0KICAgICAgICBpZiBfbGVuID09IDM6DQogICAgICAgICAgICBuYW1lLCBhcmdzLCBrd2FyZ3MgPSB2YWx1ZQ0KICAgICAgICBlbGlmIF9sZW4gPT0gMjoNCiAgICAgICAgICAgIGZpcnN0LCBzZWNvbmQgPSB2YWx1ZQ0KICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShmaXJzdCwgc3RyKToNCiAgICAgICAgICAgICAgICBuYW1lID0gZmlyc3QNCiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHNlY29uZCwgdHVwbGUpOg0KICAgICAgICAgICAgICAgICAgICBhcmdzID0gc2Vjb25kDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAga3dhcmdzID0gc2Vjb25kDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGFyZ3MsIGt3YXJncyA9IGZpcnN0LCBzZWNvbmQNCiAgICAgICAgZWxpZiBfbGVuID09IDE6DQogICAgICAgICAgICB2YWx1ZSwgPSB2YWx1ZQ0KICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWx1ZSwgc3RyKToNCiAgICAgICAgICAgICAgICBuYW1lID0gdmFsdWUNCiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2YWx1ZSwgdHVwbGUpOg0KICAgICAgICAgICAgICAgIGFyZ3MgPSB2YWx1ZQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBrd2FyZ3MgPSB2YWx1ZQ0KDQogICAgICAgIGlmIHR3bzoNCiAgICAgICAgICAgIHJldHVybiB0dXBsZS5fX25ld19fKGNscywgKGFyZ3MsIGt3YXJncykpDQoNCiAgICAgICAgcmV0dXJuIHR1cGxlLl9fbmV3X18oY2xzLCAobmFtZSwgYXJncywga3dhcmdzKSkNCg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlPSgpLCBuYW1lPU5vbmUsIHBhcmVudD1Ob25lLCB0d289RmFsc2UsDQogICAgICAgICAgICAgICAgIGZyb21fa2FsbD1UcnVlKToNCiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQ0KICAgICAgICBzZWxmLnBhcmVudCA9IHBhcmVudA0KICAgICAgICBzZWxmLmZyb21fa2FsbCA9IGZyb21fa2FsbA0KDQoNCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgaWYgb3RoZXIgaXMgQU5ZOg0KICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbGVuX290aGVyID0gbGVuKG90aGVyKQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICAgICAgc2VsZl9uYW1lID0gJycNCiAgICAgICAgaWYgbGVuKHNlbGYpID09IDI6DQogICAgICAgICAgICBzZWxmX2FyZ3MsIHNlbGZfa3dhcmdzID0gc2VsZg0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZl9uYW1lLCBzZWxmX2FyZ3MsIHNlbGZfa3dhcmdzID0gc2VsZg0KDQogICAgICAgIG90aGVyX25hbWUgPSAnJw0KICAgICAgICBpZiBsZW5fb3RoZXIgPT0gMDoNCiAgICAgICAgICAgIG90aGVyX2FyZ3MsIG90aGVyX2t3YXJncyA9ICgpLCB7fQ0KICAgICAgICBlbGlmIGxlbl9vdGhlciA9PSAzOg0KICAgICAgICAgICAgb3RoZXJfbmFtZSwgb3RoZXJfYXJncywgb3RoZXJfa3dhcmdzID0gb3RoZXINCiAgICAgICAgZWxpZiBsZW5fb3RoZXIgPT0gMToNCiAgICAgICAgICAgIHZhbHVlLCA9IG90aGVyDQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCB0dXBsZSk6DQogICAgICAgICAgICAgICAgb3RoZXJfYXJncyA9IHZhbHVlDQogICAgICAgICAgICAgICAgb3RoZXJfa3dhcmdzID0ge30NCiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2YWx1ZSwgc3RyKToNCiAgICAgICAgICAgICAgICBvdGhlcl9uYW1lID0gdmFsdWUNCiAgICAgICAgICAgICAgICBvdGhlcl9hcmdzLCBvdGhlcl9rd2FyZ3MgPSAoKSwge30NCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgb3RoZXJfYXJncyA9ICgpDQogICAgICAgICAgICAgICAgb3RoZXJfa3dhcmdzID0gdmFsdWUNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgICMgbGVuIDINCiAgICAgICAgICAgICMgY291bGQgYmUgKG5hbWUsIGFyZ3MpIG9yIChuYW1lLCBrd2FyZ3MpIG9yIChhcmdzLCBrd2FyZ3MpDQogICAgICAgICAgICBmaXJzdCwgc2Vjb25kID0gb3RoZXINCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZmlyc3QsIHN0cik6DQogICAgICAgICAgICAgICAgb3RoZXJfbmFtZSA9IGZpcnN0DQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShzZWNvbmQsIHR1cGxlKToNCiAgICAgICAgICAgICAgICAgICAgb3RoZXJfYXJncywgb3RoZXJfa3dhcmdzID0gc2Vjb25kLCB7fQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIG90aGVyX2FyZ3MsIG90aGVyX2t3YXJncyA9ICgpLCBzZWNvbmQNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgb3RoZXJfYXJncywgb3RoZXJfa3dhcmdzID0gZmlyc3QsIHNlY29uZA0KDQogICAgICAgIGlmIHNlbGZfbmFtZSBhbmQgb3RoZXJfbmFtZSAhPSBzZWxmX25hbWU6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCg0KICAgICAgICAjIHRoaXMgb3JkZXIgaXMgaW1wb3J0YW50IGZvciBBTlkgdG8gd29yayENCiAgICAgICAgcmV0dXJuIChvdGhlcl9hcmdzLCBvdGhlcl9rd2FyZ3MpID09IChzZWxmX2FyZ3MsIHNlbGZfa3dhcmdzKQ0KDQoNCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgcmV0dXJuIG5vdCBzZWxmLl9fZXFfXyhvdGhlcikNCg0KDQogICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgIGlmIHNlbGYubmFtZSBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIF9DYWxsKCgnJywgYXJncywga3dhcmdzKSwgbmFtZT0nKCknKQ0KDQogICAgICAgIG5hbWUgPSBzZWxmLm5hbWUgKyAnKCknDQogICAgICAgIHJldHVybiBfQ2FsbCgoc2VsZi5uYW1lLCBhcmdzLCBrd2FyZ3MpLCBuYW1lPW5hbWUsIHBhcmVudD1zZWxmKQ0KDQoNCiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgYXR0cik6DQogICAgICAgIGlmIHNlbGYubmFtZSBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIF9DYWxsKG5hbWU9YXR0ciwgZnJvbV9rYWxsPUZhbHNlKQ0KICAgICAgICBuYW1lID0gJyVzLiVzJyAlIChzZWxmLm5hbWUsIGF0dHIpDQogICAgICAgIHJldHVybiBfQ2FsbChuYW1lPW5hbWUsIHBhcmVudD1zZWxmLCBmcm9tX2thbGw9RmFsc2UpDQoNCg0KICAgIGRlZiBfX3JlcHJfXyhzZWxmKToNCiAgICAgICAgaWYgbm90IHNlbGYuZnJvbV9rYWxsOg0KICAgICAgICAgICAgbmFtZSA9IHNlbGYubmFtZSBvciAnY2FsbCcNCiAgICAgICAgICAgIGlmIG5hbWUuc3RhcnRzd2l0aCgnKCknKToNCiAgICAgICAgICAgICAgICBuYW1lID0gJ2NhbGwlcycgJSBuYW1lDQogICAgICAgICAgICByZXR1cm4gbmFtZQ0KDQogICAgICAgIGlmIGxlbihzZWxmKSA9PSAyOg0KICAgICAgICAgICAgbmFtZSA9ICdjYWxsJw0KICAgICAgICAgICAgYXJncywga3dhcmdzID0gc2VsZg0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgbmFtZSwgYXJncywga3dhcmdzID0gc2VsZg0KICAgICAgICAgICAgaWYgbm90IG5hbWU6DQogICAgICAgICAgICAgICAgbmFtZSA9ICdjYWxsJw0KICAgICAgICAgICAgZWxpZiBub3QgbmFtZS5zdGFydHN3aXRoKCcoKScpOg0KICAgICAgICAgICAgICAgIG5hbWUgPSAnY2FsbC4lcycgJSBuYW1lDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIG5hbWUgPSAnY2FsbCVzJyAlIG5hbWUNCiAgICAgICAgcmV0dXJuIF9mb3JtYXRfY2FsbF9zaWduYXR1cmUobmFtZSwgYXJncywga3dhcmdzKQ0KDQoNCiAgICBkZWYgY2FsbF9saXN0KHNlbGYpOg0KICAgICAgICAiIiJGb3IgYSBjYWxsIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgbXVsdGlwbGUgY2FsbHMsIGBjYWxsX2xpc3RgDQogICAgICAgIHJldHVybnMgYSBsaXN0IG9mIGFsbCB0aGUgaW50ZXJtZWRpYXRlIGNhbGxzIGFzIHdlbGwgYXMgdGhlDQogICAgICAgIGZpbmFsIGNhbGwuIiIiDQogICAgICAgIHZhbHMgPSBbXQ0KICAgICAgICB0aGluZyA9IHNlbGYNCiAgICAgICAgd2hpbGUgdGhpbmcgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBpZiB0aGluZy5mcm9tX2thbGw6DQogICAgICAgICAgICAgICAgdmFscy5hcHBlbmQodGhpbmcpDQogICAgICAgICAgICB0aGluZyA9IHRoaW5nLnBhcmVudA0KICAgICAgICByZXR1cm4gX0NhbGxMaXN0KHJldmVyc2VkKHZhbHMpKQ0KDQoNCmNhbGwgPSBfQ2FsbChmcm9tX2thbGw9RmFsc2UpDQoNCg0KDQpkZWYgY3JlYXRlX2F1dG9zcGVjKHNwZWMsIHNwZWNfc2V0PUZhbHNlLCBpbnN0YW5jZT1GYWxzZSwgX3BhcmVudD1Ob25lLA0KICAgICAgICAgICAgICAgICAgICBfbmFtZT1Ob25lLCAqKmt3YXJncyk6DQogICAgIiIiQ3JlYXRlIGEgbW9jayBvYmplY3QgdXNpbmcgYW5vdGhlciBvYmplY3QgYXMgYSBzcGVjLiBBdHRyaWJ1dGVzIG9uIHRoZQ0KICAgIG1vY2sgd2lsbCB1c2UgdGhlIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlIG9uIHRoZSBgc3BlY2Agb2JqZWN0IGFzIHRoZWlyDQogICAgc3BlYy4NCg0KICAgIEZ1bmN0aW9ucyBvciBtZXRob2RzIGJlaW5nIG1vY2tlZCB3aWxsIGhhdmUgdGhlaXIgYXJndW1lbnRzIGNoZWNrZWQNCiAgICB0byBjaGVjayB0aGF0IHRoZXkgYXJlIGNhbGxlZCB3aXRoIHRoZSBjb3JyZWN0IHNpZ25hdHVyZS4NCg0KICAgIElmIGBzcGVjX3NldGAgaXMgVHJ1ZSB0aGVuIGF0dGVtcHRpbmcgdG8gc2V0IGF0dHJpYnV0ZXMgdGhhdCBkb24ndCBleGlzdA0KICAgIG9uIHRoZSBzcGVjIG9iamVjdCB3aWxsIHJhaXNlIGFuIGBBdHRyaWJ1dGVFcnJvcmAuDQoNCiAgICBJZiBhIGNsYXNzIGlzIHVzZWQgYXMgYSBzcGVjIHRoZW4gdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgbW9jayAodGhlDQogICAgaW5zdGFuY2Ugb2YgdGhlIGNsYXNzKSB3aWxsIGhhdmUgdGhlIHNhbWUgc3BlYy4gWW91IGNhbiB1c2UgYSBjbGFzcyBhcyB0aGUNCiAgICBzcGVjIGZvciBhbiBpbnN0YW5jZSBvYmplY3QgYnkgcGFzc2luZyBgaW5zdGFuY2U9VHJ1ZWAuIFRoZSByZXR1cm5lZCBtb2NrDQogICAgd2lsbCBvbmx5IGJlIGNhbGxhYmxlIGlmIGluc3RhbmNlcyBvZiB0aGUgbW9jayBhcmUgY2FsbGFibGUuDQoNCiAgICBgY3JlYXRlX2F1dG9zcGVjYCBhbHNvIHRha2VzIGFyYml0cmFyeSBrZXl3b3JkIGFyZ3VtZW50cyB0aGF0IGFyZSBwYXNzZWQgdG8NCiAgICB0aGUgY29uc3RydWN0b3Igb2YgdGhlIGNyZWF0ZWQgbW9jay4iIiINCiAgICBpZiBfaXNfbGlzdChzcGVjKToNCiAgICAgICAgIyBjYW4ndCBwYXNzIGEgbGlzdCBpbnN0YW5jZSB0byB0aGUgbW9jayBjb25zdHJ1Y3RvciBhcyBpdCB3aWxsIGJlDQogICAgICAgICMgaW50ZXJwcmV0ZWQgYXMgYSBsaXN0IG9mIHN0cmluZ3MNCiAgICAgICAgc3BlYyA9IHR5cGUoc3BlYykNCg0KICAgIGlzX3R5cGUgPSBpc2luc3RhbmNlKHNwZWMsIHR5cGUpDQoNCiAgICBfa3dhcmdzID0geydzcGVjJzogc3BlY30NCiAgICBpZiBzcGVjX3NldDoNCiAgICAgICAgX2t3YXJncyA9IHsnc3BlY19zZXQnOiBzcGVjfQ0KICAgIGVsaWYgc3BlYyBpcyBOb25lOg0KICAgICAgICAjIE5vbmUgd2UgbW9jayB3aXRoIGEgbm9ybWFsIG1vY2sgd2l0aG91dCBhIHNwZWMNCiAgICAgICAgX2t3YXJncyA9IHt9DQoNCiAgICBfa3dhcmdzLnVwZGF0ZShrd2FyZ3MpDQoNCiAgICBLbGFzcyA9IE1hZ2ljTW9jaw0KICAgIGlmIHR5cGUoc3BlYykgaW4gRGVzY3JpcHRvclR5cGVzOg0KICAgICAgICAjIGRlc2NyaXB0b3JzIGRvbid0IGhhdmUgYSBzcGVjDQogICAgICAgICMgYmVjYXVzZSB3ZSBkb24ndCBrbm93IHdoYXQgdHlwZSB0aGV5IHJldHVybg0KICAgICAgICBfa3dhcmdzID0ge30NCiAgICBlbGlmIG5vdCBfY2FsbGFibGUoc3BlYyk6DQogICAgICAgIEtsYXNzID0gTm9uQ2FsbGFibGVNYWdpY01vY2sNCiAgICBlbGlmIGlzX3R5cGUgYW5kIGluc3RhbmNlIGFuZCBub3QgX2luc3RhbmNlX2NhbGxhYmxlKHNwZWMpOg0KICAgICAgICBLbGFzcyA9IE5vbkNhbGxhYmxlTWFnaWNNb2NrDQoNCiAgICBfbmV3X25hbWUgPSBfbmFtZQ0KICAgIGlmIF9wYXJlbnQgaXMgTm9uZToNCiAgICAgICAgIyBmb3IgYSB0b3AgbGV2ZWwgb2JqZWN0IG5vIF9uZXdfbmFtZSBzaG91bGQgYmUgc2V0DQogICAgICAgIF9uZXdfbmFtZSA9ICcnDQoNCiAgICBtb2NrID0gS2xhc3MocGFyZW50PV9wYXJlbnQsIF9uZXdfcGFyZW50PV9wYXJlbnQsIF9uZXdfbmFtZT1fbmV3X25hbWUsDQogICAgICAgICAgICAgICAgIG5hbWU9X25hbWUsICoqX2t3YXJncykNCg0KICAgIGlmIGlzaW5zdGFuY2Uoc3BlYywgRnVuY3Rpb25UeXBlcyk6DQogICAgICAgICMgc2hvdWxkIG9ubHkgaGFwcGVuIGF0IHRoZSB0b3AgbGV2ZWwgYmVjYXVzZSB3ZSBkb24ndA0KICAgICAgICAjIHJlY3Vyc2UgZm9yIGZ1bmN0aW9ucw0KICAgICAgICBtb2NrID0gX3NldF9zaWduYXR1cmUobW9jaywgc3BlYykNCiAgICBlbHNlOg0KICAgICAgICBfY2hlY2tfc2lnbmF0dXJlKHNwZWMsIG1vY2ssIGlzX3R5cGUsIGluc3RhbmNlKQ0KDQogICAgaWYgX3BhcmVudCBpcyBub3QgTm9uZSBhbmQgbm90IGluc3RhbmNlOg0KICAgICAgICBfcGFyZW50Ll9tb2NrX2NoaWxkcmVuW19uYW1lXSA9IG1vY2sNCg0KICAgIGlmIGlzX3R5cGUgYW5kIG5vdCBpbnN0YW5jZSBhbmQgJ3JldHVybl92YWx1ZScgbm90IGluIGt3YXJnczoNCiAgICAgICAgbW9jay5yZXR1cm5fdmFsdWUgPSBjcmVhdGVfYXV0b3NwZWMoc3BlYywgc3BlY19zZXQsIGluc3RhbmNlPVRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9uYW1lPScoKScsIF9wYXJlbnQ9bW9jaykNCg0KICAgIGZvciBlbnRyeSBpbiBkaXIoc3BlYyk6DQogICAgICAgIGlmIF9pc19tYWdpYyhlbnRyeSk6DQogICAgICAgICAgICAjIE1hZ2ljTW9jayBhbHJlYWR5IGRvZXMgdGhlIHVzZWZ1bCBtYWdpYyBtZXRob2RzIGZvciB1cw0KICAgICAgICAgICAgY29udGludWUNCg0KICAgICAgICAjIFhYWFggZG8gd2UgbmVlZCBhIGJldHRlciB3YXkgb2YgZ2V0dGluZyBhdHRyaWJ1dGVzIHdpdGhvdXQNCiAgICAgICAgIyB0cmlnZ2VyaW5nIGNvZGUgZXhlY3V0aW9uICg/KSBQcm9iYWJseSBub3QgLSB3ZSBuZWVkIHRoZSBhY3R1YWwNCiAgICAgICAgIyBvYmplY3QgdG8gbW9jayBpdCBzbyB3ZSB3b3VsZCByYXRoZXIgdHJpZ2dlciBhIHByb3BlcnR5IHRoYW4gbW9jaw0KICAgICAgICAjIHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yLiBMaWtld2lzZSB3ZSB3YW50IHRvIG1vY2sgb3V0IGR5bmFtaWNhbGx5DQogICAgICAgICMgcHJvdmlkZWQgYXR0cmlidXRlcy4NCiAgICAgICAgIyBYWFhYIHdoYXQgYWJvdXQgYXR0cmlidXRlcyB0aGF0IHJhaXNlIGV4Y2VwdGlvbnMgb3RoZXIgdGhhbg0KICAgICAgICAjIEF0dHJpYnV0ZUVycm9yIG9uIGJlaW5nIGZldGNoZWQ/DQogICAgICAgICMgd2UgY291bGQgYmUgcmVzaWxpZW50IGFnYWluc3QgaXQsIG9yIGNhdGNoIGFuZCBwcm9wYWdhdGUgdGhlDQogICAgICAgICMgZXhjZXB0aW9uIHdoZW4gdGhlIGF0dHJpYnV0ZSBpcyBmZXRjaGVkIGZyb20gdGhlIG1vY2sNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgb3JpZ2luYWwgPSBnZXRhdHRyKHNwZWMsIGVudHJ5KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBjb250aW51ZQ0KDQogICAgICAgIGt3YXJncyA9IHsnc3BlYyc6IG9yaWdpbmFsfQ0KICAgICAgICBpZiBzcGVjX3NldDoNCiAgICAgICAgICAgIGt3YXJncyA9IHsnc3BlY19zZXQnOiBvcmlnaW5hbH0NCg0KICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvcmlnaW5hbCwgRnVuY3Rpb25UeXBlcyk6DQogICAgICAgICAgICBuZXcgPSBfU3BlY1N0YXRlKG9yaWdpbmFsLCBzcGVjX3NldCwgbW9jaywgZW50cnksIGluc3RhbmNlKQ0KICAgICAgICAgICAgbW9jay5fbW9ja19jaGlsZHJlbltlbnRyeV0gPSBuZXcNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHBhcmVudCA9IG1vY2sNCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uoc3BlYywgRnVuY3Rpb25UeXBlcyk6DQogICAgICAgICAgICAgICAgcGFyZW50ID0gbW9jay5tb2NrDQoNCiAgICAgICAgICAgIG5ldyA9IE1hZ2ljTW9jayhwYXJlbnQ9cGFyZW50LCBuYW1lPWVudHJ5LCBfbmV3X25hbWU9ZW50cnksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX25ld19wYXJlbnQ9cGFyZW50LCAqKmt3YXJncykNCiAgICAgICAgICAgIG1vY2suX21vY2tfY2hpbGRyZW5bZW50cnldID0gbmV3DQogICAgICAgICAgICBza2lwZmlyc3QgPSBfbXVzdF9za2lwKHNwZWMsIGVudHJ5LCBpc190eXBlKQ0KICAgICAgICAgICAgX2NoZWNrX3NpZ25hdHVyZShvcmlnaW5hbCwgbmV3LCBza2lwZmlyc3Q9c2tpcGZpcnN0KQ0KDQogICAgICAgICMgc28gZnVuY3Rpb25zIGNyZWF0ZWQgd2l0aCBfc2V0X3NpZ25hdHVyZSBiZWNvbWUgaW5zdGFuY2UgYXR0cmlidXRlcywNCiAgICAgICAgIyAqcGx1cyogdGhlaXIgdW5kZXJseWluZyBtb2NrIGV4aXN0cyBpbiBfbW9ja19jaGlsZHJlbiBvZiB0aGUgcGFyZW50DQogICAgICAgICMgbW9jay4gQWRkaW5nIHRvIF9tb2NrX2NoaWxkcmVuIG1heSBiZSB1bm5lY2Vzc2FyeSB3aGVyZSB3ZSBhcmUgYWxzbw0KICAgICAgICAjIHNldHRpbmcgYXMgYW4gaW5zdGFuY2UgYXR0cmlidXRlPw0KICAgICAgICBpZiBpc2luc3RhbmNlKG5ldywgRnVuY3Rpb25UeXBlcyk6DQogICAgICAgICAgICBzZXRhdHRyKG1vY2ssIGVudHJ5LCBuZXcpDQoNCiAgICByZXR1cm4gbW9jaw0KDQoNCmRlZiBfbXVzdF9za2lwKHNwZWMsIGVudHJ5LCBpc190eXBlKToNCiAgICBpZiBub3QgaXNpbnN0YW5jZShzcGVjLCB0eXBlKToNCiAgICAgICAgaWYgZW50cnkgaW4gZ2V0YXR0cihzcGVjLCAnX19kaWN0X18nLCB7fSk6DQogICAgICAgICAgICAjIGluc3RhbmNlIGF0dHJpYnV0ZSAtIHNob3VsZG4ndCBza2lwDQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgc3BlYyA9IHNwZWMuX19jbGFzc19fDQoNCiAgICBmb3Iga2xhc3MgaW4gc3BlYy5fX21yb19fOg0KICAgICAgICByZXN1bHQgPSBrbGFzcy5fX2RpY3RfXy5nZXQoZW50cnksIERFRkFVTFQpDQogICAgICAgIGlmIHJlc3VsdCBpcyBERUZBVUxUOg0KICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgaWYgaXNpbnN0YW5jZShyZXN1bHQsIChzdGF0aWNtZXRob2QsIGNsYXNzbWV0aG9kKSk6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgcmV0dXJuIGlzX3R5cGUNCg0KICAgICMgc2hvdWxkbid0IGdldCBoZXJlIHVubGVzcyBmdW5jdGlvbiBpcyBhIGR5bmFtaWNhbGx5IHByb3ZpZGVkIGF0dHJpYnV0ZQ0KICAgICMgWFhYWCB1bnRlc3RlZCBiZWhhdmlvdXINCiAgICByZXR1cm4gaXNfdHlwZQ0KDQoNCmRlZiBfZ2V0X2NsYXNzKG9iaik6DQogICAgdHJ5Og0KICAgICAgICByZXR1cm4gb2JqLl9fY2xhc3NfXw0KICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoNCiAgICAgICAgIyBpdCBpcyBwb3NzaWJsZSBmb3Igb2JqZWN0cyB0byBoYXZlIG5vIF9fY2xhc3NfXw0KICAgICAgICByZXR1cm4gdHlwZShvYmopDQoNCg0KY2xhc3MgX1NwZWNTdGF0ZShvYmplY3QpOg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIHNwZWMsIHNwZWNfc2V0PUZhbHNlLCBwYXJlbnQ9Tm9uZSwNCiAgICAgICAgICAgICAgICAgbmFtZT1Ob25lLCBpZHM9Tm9uZSwgaW5zdGFuY2U9RmFsc2UpOg0KICAgICAgICBzZWxmLnNwZWMgPSBzcGVjDQogICAgICAgIHNlbGYuaWRzID0gaWRzDQogICAgICAgIHNlbGYuc3BlY19zZXQgPSBzcGVjX3NldA0KICAgICAgICBzZWxmLnBhcmVudCA9IHBhcmVudA0KICAgICAgICBzZWxmLmluc3RhbmNlID0gaW5zdGFuY2UNCiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQ0KDQoNCkZ1bmN0aW9uVHlwZXMgPSAoDQogICAgIyBweXRob24gZnVuY3Rpb24NCiAgICB0eXBlKGNyZWF0ZV9hdXRvc3BlYyksDQogICAgIyBpbnN0YW5jZSBtZXRob2QNCiAgICB0eXBlKEFOWS5fX2VxX18pLA0KKQ0KDQoNCmZpbGVfc3BlYyA9IE5vbmUNCg0KDQpkZWYgbW9ja19vcGVuKG1vY2s9Tm9uZSwgcmVhZF9kYXRhPScnKToNCiAgICAiIiINCiAgICBBIGhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBtb2NrIHRvIHJlcGxhY2UgdGhlIHVzZSBvZiBgb3BlbmAuIEl0IHdvcmtzDQogICAgZm9yIGBvcGVuYCBjYWxsZWQgZGlyZWN0bHkgb3IgdXNlZCBhcyBhIGNvbnRleHQgbWFuYWdlci4NCg0KICAgIFRoZSBgbW9ja2AgYXJndW1lbnQgaXMgdGhlIG1vY2sgb2JqZWN0IHRvIGNvbmZpZ3VyZS4gSWYgYE5vbmVgICh0aGUNCiAgICBkZWZhdWx0KSB0aGVuIGEgYE1hZ2ljTW9ja2Agd2lsbCBiZSBjcmVhdGVkIGZvciB5b3UsIHdpdGggdGhlIEFQSSBsaW1pdGVkDQogICAgdG8gbWV0aG9kcyBvciBhdHRyaWJ1dGVzIGF2YWlsYWJsZSBvbiBzdGFuZGFyZCBmaWxlIGhhbmRsZXMuDQoNCiAgICBgcmVhZF9kYXRhYCBpcyBhIHN0cmluZyBmb3IgdGhlIGByZWFkYCBtZXRob2Qgb2YgdGhlIGZpbGUgaGFuZGxlIHRvIHJldHVybi4NCiAgICBUaGlzIGlzIGFuIGVtcHR5IHN0cmluZyBieSBkZWZhdWx0Lg0KICAgICIiIg0KICAgIGdsb2JhbCBmaWxlX3NwZWMNCiAgICBpZiBmaWxlX3NwZWMgaXMgTm9uZToNCiAgICAgICAgaW1wb3J0IF9pbw0KICAgICAgICBmaWxlX3NwZWMgPSBsaXN0KHNldChkaXIoX2lvLlRleHRJT1dyYXBwZXIpKS51bmlvbihzZXQoZGlyKF9pby5CeXRlc0lPKSkpKQ0KDQogICAgaWYgbW9jayBpcyBOb25lOg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKG5hbWU9J29wZW4nLCBzcGVjPW9wZW4pDQoNCiAgICBoYW5kbGUgPSBNYWdpY01vY2soc3BlYz1maWxlX3NwZWMpDQogICAgaGFuZGxlLndyaXRlLnJldHVybl92YWx1ZSA9IE5vbmUNCiAgICBoYW5kbGUuX19lbnRlcl9fLnJldHVybl92YWx1ZSA9IGhhbmRsZQ0KICAgIGhhbmRsZS5yZWFkLnJldHVybl92YWx1ZSA9IHJlYWRfZGF0YQ0KDQogICAgbW9jay5yZXR1cm5fdmFsdWUgPSBoYW5kbGUNCiAgICByZXR1cm4gbW9jaw0KDQoNCmNsYXNzIFByb3BlcnR5TW9jayhNb2NrKToNCiAgICAiIiINCiAgICBBIG1vY2sgaW50ZW5kZWQgdG8gYmUgdXNlZCBhcyBhIHByb3BlcnR5LCBvciBvdGhlciBkZXNjcmlwdG9yLCBvbiBhIGNsYXNzLg0KICAgIGBQcm9wZXJ0eU1vY2tgIHByb3ZpZGVzIGBfX2dldF9fYCBhbmQgYF9fc2V0X19gIG1ldGhvZHMgc28geW91IGNhbiBzcGVjaWZ5DQogICAgYSByZXR1cm4gdmFsdWUgd2hlbiBpdCBpcyBmZXRjaGVkLg0KDQogICAgRmV0Y2hpbmcgYSBgUHJvcGVydHlNb2NrYCBpbnN0YW5jZSBmcm9tIGFuIG9iamVjdCBjYWxscyB0aGUgbW9jaywgd2l0aA0KICAgIG5vIGFyZ3MuIFNldHRpbmcgaXQgY2FsbHMgdGhlIG1vY2sgd2l0aCB0aGUgdmFsdWUgYmVpbmcgc2V0Lg0KICAgICIiIg0KICAgIGRlZiBfZ2V0X2NoaWxkX21vY2soc2VsZiwgKiprd2FyZ3MpOg0KICAgICAgICByZXR1cm4gTWFnaWNNb2NrKCoqa3dhcmdzKQ0KDQogICAgZGVmIF9fZ2V0X18oc2VsZiwgb2JqLCBvYmpfdHlwZSk6DQogICAgICAgIHJldHVybiBzZWxmKCkNCiAgICBkZWYgX19zZXRfXyhzZWxmLCBvYmosIHZhbCk6DQogICAgICAgIHNlbGYodmFsKQ0K',
'/Lib/unittest/suite.py':'IiIiVGVzdFN1aXRlIiIiCgppbXBvcnQgc3lzCgpmcm9tIC4gaW1wb3J0IGNhc2UKZnJvbSAuIGltcG9ydCB1dGlsCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKCmRlZiBfY2FsbF9pZl9leGlzdHMocGFyZW50LCBhdHRyKToKICAgIGZ1bmMgPSBnZXRhdHRyKHBhcmVudCwgYXR0ciwgbGFtYmRhOiBOb25lKQogICAgZnVuYygpCgoKY2xhc3MgQmFzZVRlc3RTdWl0ZShvYmplY3QpOgogICAgIiIiQSBzaW1wbGUgdGVzdCBzdWl0ZSB0aGF0IGRvZXNuJ3QgcHJvdmlkZSBjbGFzcyBvciBtb2R1bGUgc2hhcmVkIGZpeHR1cmVzLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGVzdHM9KCkpOgogICAgICAgIHNlbGYuX3Rlc3RzID0gW10KICAgICAgICBzZWxmLmFkZFRlc3RzKHRlc3RzKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIjwlcyB0ZXN0cz0lcz4iICUgKHV0aWwuc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pLCBsaXN0KHNlbGYpKQoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBzZWxmLl9fY2xhc3NfXyk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJldHVybiBsaXN0KHNlbGYpID09IGxpc3Qob3RoZXIpCgogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIG5vdCBzZWxmID09IG90aGVyCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBpdGVyKHNlbGYuX3Rlc3RzKQoKICAgIGRlZiBjb3VudFRlc3RDYXNlcyhzZWxmKToKICAgICAgICBjYXNlcyA9IDAKICAgICAgICBmb3IgdGVzdCBpbiBzZWxmOgogICAgICAgICAgICBjYXNlcyArPSB0ZXN0LmNvdW50VGVzdENhc2VzKCkKICAgICAgICByZXR1cm4gY2FzZXMKCiAgICBkZWYgYWRkVGVzdChzZWxmLCB0ZXN0KToKICAgICAgICAjIHNhbml0eSBjaGVja3MKICAgICAgICBpZiBub3QgY2FsbGFibGUodGVzdCk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigie30gaXMgbm90IGNhbGxhYmxlIi5mb3JtYXQocmVwcih0ZXN0KSkpCiAgICAgICAgaWYgaXNpbnN0YW5jZSh0ZXN0LCB0eXBlKSBhbmQgaXNzdWJjbGFzcyh0ZXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNhc2UuVGVzdENhc2UsIFRlc3RTdWl0ZSkpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlRlc3RDYXNlcyBhbmQgVGVzdFN1aXRlcyBtdXN0IGJlIGluc3RhbnRpYXRlZCAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYmVmb3JlIHBhc3NpbmcgdGhlbSB0byBhZGRUZXN0KCkiKQogICAgICAgIHNlbGYuX3Rlc3RzLmFwcGVuZCh0ZXN0KQoKICAgIGRlZiBhZGRUZXN0cyhzZWxmLCB0ZXN0cyk6CiAgICAgICAgaWYgaXNpbnN0YW5jZSh0ZXN0cywgc3RyKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ0ZXN0cyBtdXN0IGJlIGFuIGl0ZXJhYmxlIG9mIHRlc3RzLCBub3QgYSBzdHJpbmciKQogICAgICAgIGZvciB0ZXN0IGluIHRlc3RzOgogICAgICAgICAgICBzZWxmLmFkZFRlc3QodGVzdCkKCiAgICBkZWYgcnVuKHNlbGYsIHJlc3VsdCk6CiAgICAgICAgZm9yIHRlc3QgaW4gc2VsZjoKICAgICAgICAgICAgaWYgcmVzdWx0LnNob3VsZFN0b3A6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB0ZXN0KHJlc3VsdCkKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3ZHMpOgogICAgICAgIHJldHVybiBzZWxmLnJ1bigqYXJncywgKiprd2RzKQoKICAgIGRlZiBkZWJ1ZyhzZWxmKToKICAgICAgICAiIiJSdW4gdGhlIHRlc3RzIHdpdGhvdXQgY29sbGVjdGluZyBlcnJvcnMgaW4gYSBUZXN0UmVzdWx0IiIiCiAgICAgICAgZm9yIHRlc3QgaW4gc2VsZjoKICAgICAgICAgICAgdGVzdC5kZWJ1ZygpCgoKY2xhc3MgVGVzdFN1aXRlKEJhc2VUZXN0U3VpdGUpOgogICAgIiIiQSB0ZXN0IHN1aXRlIGlzIGEgY29tcG9zaXRlIHRlc3QgY29uc2lzdGluZyBvZiBhIG51bWJlciBvZiBUZXN0Q2FzZXMuCgogICAgRm9yIHVzZSwgY3JlYXRlIGFuIGluc3RhbmNlIG9mIFRlc3RTdWl0ZSwgdGhlbiBhZGQgdGVzdCBjYXNlIGluc3RhbmNlcy4KICAgIFdoZW4gYWxsIHRlc3RzIGhhdmUgYmVlbiBhZGRlZCwgdGhlIHN1aXRlIGNhbiBiZSBwYXNzZWQgdG8gYSB0ZXN0CiAgICBydW5uZXIsIHN1Y2ggYXMgVGV4dFRlc3RSdW5uZXIuIEl0IHdpbGwgcnVuIHRoZSBpbmRpdmlkdWFsIHRlc3QgY2FzZXMKICAgIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IHdlcmUgYWRkZWQsIGFnZ3JlZ2F0aW5nIHRoZSByZXN1bHRzLiBXaGVuCiAgICBzdWJjbGFzc2luZywgZG8gbm90IGZvcmdldCB0byBjYWxsIHRoZSBiYXNlIGNsYXNzIGNvbnN0cnVjdG9yLgogICAgIiIiCgogICAgZGVmIHJ1bihzZWxmLCByZXN1bHQsIGRlYnVnPUZhbHNlKToKICAgICAgICB0b3BMZXZlbCA9IEZhbHNlCiAgICAgICAgaWYgZ2V0YXR0cihyZXN1bHQsICdfdGVzdFJ1bkVudGVyZWQnLCBGYWxzZSkgaXMgRmFsc2U6CiAgICAgICAgICAgIHJlc3VsdC5fdGVzdFJ1bkVudGVyZWQgPSB0b3BMZXZlbCA9IFRydWUKCiAgICAgICAgZm9yIHRlc3QgaW4gc2VsZjoKICAgICAgICAgICAgaWYgcmVzdWx0LnNob3VsZFN0b3A6CiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgaWYgX2lzbm90c3VpdGUodGVzdCk6CiAgICAgICAgICAgICAgICBzZWxmLl90ZWFyRG93blByZXZpb3VzQ2xhc3ModGVzdCwgcmVzdWx0KQogICAgICAgICAgICAgICAgc2VsZi5faGFuZGxlTW9kdWxlRml4dHVyZSh0ZXN0LCByZXN1bHQpCiAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVDbGFzc1NldFVwKHRlc3QsIHJlc3VsdCkKICAgICAgICAgICAgICAgIHJlc3VsdC5fcHJldmlvdXNUZXN0Q2xhc3MgPSB0ZXN0Ll9fY2xhc3NfXwoKICAgICAgICAgICAgICAgIGlmIChnZXRhdHRyKHRlc3QuX19jbGFzc19fLCAnX2NsYXNzU2V0dXBGYWlsZWQnLCBGYWxzZSkgb3IKICAgICAgICAgICAgICAgICAgICBnZXRhdHRyKHJlc3VsdCwgJ19tb2R1bGVTZXRVcEZhaWxlZCcsIEZhbHNlKSk6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIGlmIG5vdCBkZWJ1ZzoKICAgICAgICAgICAgICAgIHRlc3QocmVzdWx0KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdGVzdC5kZWJ1ZygpCgogICAgICAgIGlmIHRvcExldmVsOgogICAgICAgICAgICBzZWxmLl90ZWFyRG93blByZXZpb3VzQ2xhc3MoTm9uZSwgcmVzdWx0KQogICAgICAgICAgICBzZWxmLl9oYW5kbGVNb2R1bGVUZWFyRG93bihyZXN1bHQpCiAgICAgICAgICAgIHJlc3VsdC5fdGVzdFJ1bkVudGVyZWQgPSBGYWxzZQogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgZGVidWcoc2VsZik6CiAgICAgICAgIiIiUnVuIHRoZSB0ZXN0cyB3aXRob3V0IGNvbGxlY3RpbmcgZXJyb3JzIGluIGEgVGVzdFJlc3VsdCIiIgogICAgICAgIGRlYnVnID0gX0RlYnVnUmVzdWx0KCkKICAgICAgICBzZWxmLnJ1bihkZWJ1ZywgVHJ1ZSkKCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAgIGRlZiBfaGFuZGxlQ2xhc3NTZXRVcChzZWxmLCB0ZXN0LCByZXN1bHQpOgogICAgICAgIHByZXZpb3VzQ2xhc3MgPSBnZXRhdHRyKHJlc3VsdCwgJ19wcmV2aW91c1Rlc3RDbGFzcycsIE5vbmUpCiAgICAgICAgY3VycmVudENsYXNzID0gdGVzdC5fX2NsYXNzX18KICAgICAgICBpZiBjdXJyZW50Q2xhc3MgPT0gcHJldmlvdXNDbGFzczoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgcmVzdWx0Ll9tb2R1bGVTZXRVcEZhaWxlZDoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgZ2V0YXR0cihjdXJyZW50Q2xhc3MsICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRyeToKICAgICAgICAgICAgY3VycmVudENsYXNzLl9jbGFzc1NldHVwRmFpbGVkID0gRmFsc2UKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAjIHRlc3QgbWF5IGFjdHVhbGx5IGJlIGEgZnVuY3Rpb24KICAgICAgICAgICAgIyBzbyBpdHMgY2xhc3Mgd2lsbCBiZSBhIGJ1aWx0aW4tdHlwZQogICAgICAgICAgICBwYXNzCgogICAgICAgIHNldFVwQ2xhc3MgPSBnZXRhdHRyKGN1cnJlbnRDbGFzcywgJ3NldFVwQ2xhc3MnLCBOb25lKQogICAgICAgIGlmIHNldFVwQ2xhc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfc2V0dXBTdGRvdXQnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZXRVcENsYXNzKCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShyZXN1bHQsIF9EZWJ1Z1Jlc3VsdCk6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgICAgIGN1cnJlbnRDbGFzcy5fY2xhc3NTZXR1cEZhaWxlZCA9IFRydWUKICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IHV0aWwuc3RyY2xhc3MoY3VycmVudENsYXNzKQogICAgICAgICAgICAgICAgZXJyb3JOYW1lID0gJ3NldFVwQ2xhc3MgKCVzKScgJSBjbGFzc05hbWUKICAgICAgICAgICAgICAgIHNlbGYuX2FkZENsYXNzT3JNb2R1bGVMZXZlbEV4Y2VwdGlvbihyZXN1bHQsIGUsIGVycm9yTmFtZSkKICAgICAgICAgICAgZmluYWxseToKICAgICAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfcmVzdG9yZVN0ZG91dCcpCgogICAgZGVmIF9nZXRfcHJldmlvdXNfbW9kdWxlKHNlbGYsIHJlc3VsdCk6CiAgICAgICAgcHJldmlvdXNNb2R1bGUgPSBOb25lCiAgICAgICAgcHJldmlvdXNDbGFzcyA9IGdldGF0dHIocmVzdWx0LCAnX3ByZXZpb3VzVGVzdENsYXNzJywgTm9uZSkKICAgICAgICBpZiBwcmV2aW91c0NsYXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBwcmV2aW91c01vZHVsZSA9IHByZXZpb3VzQ2xhc3MuX19tb2R1bGVfXwogICAgICAgIHJldHVybiBwcmV2aW91c01vZHVsZQoKCiAgICBkZWYgX2hhbmRsZU1vZHVsZUZpeHR1cmUoc2VsZiwgdGVzdCwgcmVzdWx0KToKICAgICAgICBwcmV2aW91c01vZHVsZSA9IHNlbGYuX2dldF9wcmV2aW91c19tb2R1bGUocmVzdWx0KQogICAgICAgIGN1cnJlbnRNb2R1bGUgPSB0ZXN0Ll9fY2xhc3NfXy5fX21vZHVsZV9fCiAgICAgICAgaWYgY3VycmVudE1vZHVsZSA9PSBwcmV2aW91c01vZHVsZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYuX2hhbmRsZU1vZHVsZVRlYXJEb3duKHJlc3VsdCkKCgogICAgICAgIHJlc3VsdC5fbW9kdWxlU2V0VXBGYWlsZWQgPSBGYWxzZQogICAgICAgIHRyeToKICAgICAgICAgICAgbW9kdWxlID0gc3lzLm1vZHVsZXNbY3VycmVudE1vZHVsZV0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHNldFVwTW9kdWxlID0gZ2V0YXR0cihtb2R1bGUsICdzZXRVcE1vZHVsZScsIE5vbmUpCiAgICAgICAgaWYgc2V0VXBNb2R1bGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfc2V0dXBTdGRvdXQnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZXRVcE1vZHVsZSgpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocmVzdWx0LCBfRGVidWdSZXN1bHQpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICByZXN1bHQuX21vZHVsZVNldFVwRmFpbGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgZXJyb3JOYW1lID0gJ3NldFVwTW9kdWxlICglcyknICUgY3VycmVudE1vZHVsZQogICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NPck1vZHVsZUxldmVsRXhjZXB0aW9uKHJlc3VsdCwgZSwgZXJyb3JOYW1lKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgX2NhbGxfaWZfZXhpc3RzKHJlc3VsdCwgJ19yZXN0b3JlU3Rkb3V0JykKCiAgICBkZWYgX2FkZENsYXNzT3JNb2R1bGVMZXZlbEV4Y2VwdGlvbihzZWxmLCByZXN1bHQsIGV4Y2VwdGlvbiwgZXJyb3JOYW1lKToKICAgICAgICBlcnJvciA9IF9FcnJvckhvbGRlcihlcnJvck5hbWUpCiAgICAgICAgYWRkU2tpcCA9IGdldGF0dHIocmVzdWx0LCAnYWRkU2tpcCcsIE5vbmUpCiAgICAgICAgaWYgYWRkU2tpcCBpcyBub3QgTm9uZSBhbmQgaXNpbnN0YW5jZShleGNlcHRpb24sIGNhc2UuU2tpcFRlc3QpOgogICAgICAgICAgICBhZGRTa2lwKGVycm9yLCBzdHIoZXhjZXB0aW9uKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXN1bHQuYWRkRXJyb3IoZXJyb3IsIHN5cy5leGNfaW5mbygpKQoKICAgIGRlZiBfaGFuZGxlTW9kdWxlVGVhckRvd24oc2VsZiwgcmVzdWx0KToKICAgICAgICBwcmV2aW91c01vZHVsZSA9IHNlbGYuX2dldF9wcmV2aW91c19tb2R1bGUocmVzdWx0KQogICAgICAgIGlmIHByZXZpb3VzTW9kdWxlIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGlmIHJlc3VsdC5fbW9kdWxlU2V0VXBGYWlsZWQ6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW3ByZXZpb3VzTW9kdWxlXQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRlYXJEb3duTW9kdWxlID0gZ2V0YXR0cihtb2R1bGUsICd0ZWFyRG93bk1vZHVsZScsIE5vbmUpCiAgICAgICAgaWYgdGVhckRvd25Nb2R1bGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfc2V0dXBTdGRvdXQnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB0ZWFyRG93bk1vZHVsZSgpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocmVzdWx0LCBfRGVidWdSZXN1bHQpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBlcnJvck5hbWUgPSAndGVhckRvd25Nb2R1bGUgKCVzKScgJSBwcmV2aW91c01vZHVsZQogICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NPck1vZHVsZUxldmVsRXhjZXB0aW9uKHJlc3VsdCwgZSwgZXJyb3JOYW1lKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgX2NhbGxfaWZfZXhpc3RzKHJlc3VsdCwgJ19yZXN0b3JlU3Rkb3V0JykKCiAgICBkZWYgX3RlYXJEb3duUHJldmlvdXNDbGFzcyhzZWxmLCB0ZXN0LCByZXN1bHQpOgogICAgICAgIHByZXZpb3VzQ2xhc3MgPSBnZXRhdHRyKHJlc3VsdCwgJ19wcmV2aW91c1Rlc3RDbGFzcycsIE5vbmUpCiAgICAgICAgY3VycmVudENsYXNzID0gdGVzdC5fX2NsYXNzX18KICAgICAgICBpZiBjdXJyZW50Q2xhc3MgPT0gcHJldmlvdXNDbGFzczoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgZ2V0YXR0cihwcmV2aW91c0NsYXNzLCAnX2NsYXNzU2V0dXBGYWlsZWQnLCBGYWxzZSk6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGlmIGdldGF0dHIocmVzdWx0LCAnX21vZHVsZVNldFVwRmFpbGVkJywgRmFsc2UpOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBpZiBnZXRhdHRyKHByZXZpb3VzQ2xhc3MsICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRlYXJEb3duQ2xhc3MgPSBnZXRhdHRyKHByZXZpb3VzQ2xhc3MsICd0ZWFyRG93bkNsYXNzJywgTm9uZSkKICAgICAgICBpZiB0ZWFyRG93bkNsYXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBfY2FsbF9pZl9leGlzdHMocmVzdWx0LCAnX3NldHVwU3Rkb3V0JykKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdGVhckRvd25DbGFzcygpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocmVzdWx0LCBfRGVidWdSZXN1bHQpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSB1dGlsLnN0cmNsYXNzKHByZXZpb3VzQ2xhc3MpCiAgICAgICAgICAgICAgICBlcnJvck5hbWUgPSAndGVhckRvd25DbGFzcyAoJXMpJyAlIGNsYXNzTmFtZQogICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NPck1vZHVsZUxldmVsRXhjZXB0aW9uKHJlc3VsdCwgZSwgZXJyb3JOYW1lKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgX2NhbGxfaWZfZXhpc3RzKHJlc3VsdCwgJ19yZXN0b3JlU3Rkb3V0JykKCgpjbGFzcyBfRXJyb3JIb2xkZXIob2JqZWN0KToKICAgICIiIgogICAgUGxhY2Vob2xkZXIgZm9yIGEgVGVzdENhc2UgaW5zaWRlIGEgcmVzdWx0LiBBcyBmYXIgYXMgYSBUZXN0UmVzdWx0CiAgICBpcyBjb25jZXJuZWQsIHRoaXMgbG9va3MgZXhhY3RseSBsaWtlIGEgdW5pdCB0ZXN0LiBVc2VkIHRvIGluc2VydAogICAgYXJiaXRyYXJ5IGVycm9ycyBpbnRvIGEgdGVzdCBzdWl0ZSBydW4uCiAgICAiIiIKICAgICMgSW5zcGlyZWQgYnkgdGhlIEVycm9ySG9sZGVyIGZyb20gVHdpc3RlZDoKICAgICMgaHR0cDovL3R3aXN0ZWRtYXRyaXguY29tL3RyYWMvYnJvd3Nlci90cnVuay90d2lzdGVkL3RyaWFsL3J1bm5lci5weQoKICAgICMgYXR0cmlidXRlIHVzZWQgYnkgVGVzdFJlc3VsdC5fZXhjX2luZm9fdG9fc3RyaW5nCiAgICBmYWlsdXJlRXhjZXB0aW9uID0gTm9uZQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkZXNjcmlwdGlvbik6CiAgICAgICAgc2VsZi5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uCgogICAgZGVmIGlkKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmRlc2NyaXB0aW9uCgogICAgZGVmIHNob3J0RGVzY3JpcHRpb24oc2VsZik6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICI8RXJyb3JIb2xkZXIgZGVzY3JpcHRpb249JXI+IiAlIChzZWxmLmRlc2NyaXB0aW9uLCkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5pZCgpCgogICAgZGVmIHJ1bihzZWxmLCByZXN1bHQpOgogICAgICAgICMgY291bGQgY2FsbCByZXN1bHQuYWRkRXJyb3IoLi4uKSAtIGJ1dCB0aGlzIHRlc3QtbGlrZSBvYmplY3QKICAgICAgICAjIHNob3VsZG4ndCBiZSBydW4gYW55d2F5CiAgICAgICAgcGFzcwoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCByZXN1bHQpOgogICAgICAgIHJldHVybiBzZWxmLnJ1bihyZXN1bHQpCgogICAgZGVmIGNvdW50VGVzdENhc2VzKHNlbGYpOgogICAgICAgIHJldHVybiAwCgpkZWYgX2lzbm90c3VpdGUodGVzdCk6CiAgICAiQSBjcnVkZSB3YXkgdG8gdGVsbCBhcGFydCB0ZXN0Y2FzZXMgYW5kIHN1aXRlcyB3aXRoIGR1Y2stdHlwaW5nIgogICAgdHJ5OgogICAgICAgIGl0ZXIodGVzdCkKICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQoKCmNsYXNzIF9EZWJ1Z1Jlc3VsdChvYmplY3QpOgogICAgIlVzZWQgYnkgdGhlIFRlc3RTdWl0ZSB0byBob2xkIHByZXZpb3VzIGNsYXNzIHdoZW4gcnVubmluZyBpbiBkZWJ1Zy4iCiAgICBfcHJldmlvdXNUZXN0Q2xhc3MgPSBOb25lCiAgICBfbW9kdWxlU2V0VXBGYWlsZWQgPSBGYWxzZQogICAgc2hvdWxkU3RvcCA9IEZhbHNlCg==',
'/Lib/unittest/runner.py':'IiIiUnVubmluZyB0ZXN0cyIiIgoKaW1wb3J0IHN5cwppbXBvcnQgdGltZQppbXBvcnQgd2FybmluZ3MKCmZyb20gLiBpbXBvcnQgcmVzdWx0CmZyb20gLnNpZ25hbHMgaW1wb3J0IHJlZ2lzdGVyUmVzdWx0CgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKCmNsYXNzIF9Xcml0ZWxuRGVjb3JhdG9yKG9iamVjdCk6CiAgICAiIiJVc2VkIHRvIGRlY29yYXRlIGZpbGUtbGlrZSBvYmplY3RzIHdpdGggYSBoYW5keSAnd3JpdGVsbicgbWV0aG9kIiIiCiAgICBkZWYgX19pbml0X18oc2VsZixzdHJlYW0pOgogICAgICAgIHNlbGYuc3RyZWFtID0gc3RyZWFtCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHIpOgogICAgICAgIGlmIGF0dHIgaW4gKCdzdHJlYW0nLCAnX19nZXRzdGF0ZV9fJyk6CiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKGF0dHIpCiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5zdHJlYW0sYXR0cikKCiAgICBkZWYgd3JpdGVsbihzZWxmLCBhcmc9Tm9uZSk6CiAgICAgICAgaWYgYXJnOgogICAgICAgICAgICBzZWxmLndyaXRlKGFyZykKICAgICAgICBzZWxmLndyaXRlKCdcbicpICMgdGV4dC1tb2RlIHN0cmVhbXMgdHJhbnNsYXRlIHRvIFxyXG4gaWYgbmVlZGVkCgoKY2xhc3MgVGV4dFRlc3RSZXN1bHQocmVzdWx0LlRlc3RSZXN1bHQpOgogICAgIiIiQSB0ZXN0IHJlc3VsdCBjbGFzcyB0aGF0IGNhbiBwcmludCBmb3JtYXR0ZWQgdGV4dCByZXN1bHRzIHRvIGEgc3RyZWFtLgoKICAgIFVzZWQgYnkgVGV4dFRlc3RSdW5uZXIuCiAgICAiIiIKICAgIHNlcGFyYXRvcjEgPSAnPScgKiA3MAogICAgc2VwYXJhdG9yMiA9ICctJyAqIDcwCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbSwgZGVzY3JpcHRpb25zLCB2ZXJib3NpdHkpOgogICAgICAgIHN1cGVyKFRleHRUZXN0UmVzdWx0LCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5zdHJlYW0gPSBzdHJlYW0KICAgICAgICBzZWxmLnNob3dBbGwgPSB2ZXJib3NpdHkgPiAxCiAgICAgICAgc2VsZi5kb3RzID0gdmVyYm9zaXR5ID09IDEKICAgICAgICBzZWxmLmRlc2NyaXB0aW9ucyA9IGRlc2NyaXB0aW9ucwoKICAgIGRlZiBnZXREZXNjcmlwdGlvbihzZWxmLCB0ZXN0KToKICAgICAgICBkb2NfZmlyc3RfbGluZSA9IHRlc3Quc2hvcnREZXNjcmlwdGlvbigpCiAgICAgICAgaWYgc2VsZi5kZXNjcmlwdGlvbnMgYW5kIGRvY19maXJzdF9saW5lOgogICAgICAgICAgICByZXR1cm4gJ1xuJy5qb2luKChzdHIodGVzdCksIGRvY19maXJzdF9saW5lKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc3RyKHRlc3QpCgogICAgZGVmIHN0YXJ0VGVzdChzZWxmLCB0ZXN0KToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuc3RhcnRUZXN0KHRlc3QpCiAgICAgICAgaWYgc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZShzZWxmLmdldERlc2NyaXB0aW9uKHRlc3QpKQogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZSgiIC4uLiAiKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZFN1Y2Nlc3Moc2VsZiwgdGVzdCk6CiAgICAgICAgc3VwZXIoVGV4dFRlc3RSZXN1bHQsIHNlbGYpLmFkZFN1Y2Nlc3ModGVzdCkKICAgICAgICBpZiBzZWxmLnNob3dBbGw6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oIm9rIikKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoJy4nKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZEVycm9yKHNlbGYsIHRlc3QsIGVycik6CiAgICAgICAgc3VwZXIoVGV4dFRlc3RSZXN1bHQsIHNlbGYpLmFkZEVycm9yKHRlc3QsIGVycikKICAgICAgICBpZiBzZWxmLnNob3dBbGw6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oIkVSUk9SIikKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoJ0UnKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZEZhaWx1cmUoc2VsZiwgdGVzdCwgZXJyKToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuYWRkRmFpbHVyZSh0ZXN0LCBlcnIpCiAgICAgICAgaWYgc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCJGQUlMIikKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoJ0YnKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZFNraXAoc2VsZiwgdGVzdCwgcmVhc29uKToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuYWRkU2tpcCh0ZXN0LCByZWFzb24pCiAgICAgICAgaWYgc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCJza2lwcGVkIHswIXJ9Ii5mb3JtYXQocmVhc29uKSkKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoInMiKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZEV4cGVjdGVkRmFpbHVyZShzZWxmLCB0ZXN0LCBlcnIpOgogICAgICAgIHN1cGVyKFRleHRUZXN0UmVzdWx0LCBzZWxmKS5hZGRFeHBlY3RlZEZhaWx1cmUodGVzdCwgZXJyKQogICAgICAgIGlmIHNlbGYuc2hvd0FsbDoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbigiZXhwZWN0ZWQgZmFpbHVyZSIpCiAgICAgICAgZWxpZiBzZWxmLmRvdHM6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlKCJ4IikKICAgICAgICAgICAgc2VsZi5zdHJlYW0uZmx1c2goKQoKICAgIGRlZiBhZGRVbmV4cGVjdGVkU3VjY2VzcyhzZWxmLCB0ZXN0KToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuYWRkVW5leHBlY3RlZFN1Y2Nlc3ModGVzdCkKICAgICAgICBpZiBzZWxmLnNob3dBbGw6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oInVuZXhwZWN0ZWQgc3VjY2VzcyIpCiAgICAgICAgZWxpZiBzZWxmLmRvdHM6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlKCJ1IikKICAgICAgICAgICAgc2VsZi5zdHJlYW0uZmx1c2goKQoKICAgIGRlZiBwcmludEVycm9ycyhzZWxmKToKICAgICAgICBpZiBzZWxmLmRvdHMgb3Igc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCkKICAgICAgICBzZWxmLnByaW50RXJyb3JMaXN0KCdFUlJPUicsIHNlbGYuZXJyb3JzKQogICAgICAgIHNlbGYucHJpbnRFcnJvckxpc3QoJ0ZBSUwnLCBzZWxmLmZhaWx1cmVzKQoKICAgIGRlZiBwcmludEVycm9yTGlzdChzZWxmLCBmbGF2b3VyLCBlcnJvcnMpOgogICAgICAgIGZvciB0ZXN0LCBlcnIgaW4gZXJyb3JzOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKHNlbGYuc2VwYXJhdG9yMSkKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbigiJXM6ICVzIiAlIChmbGF2b3VyLHNlbGYuZ2V0RGVzY3JpcHRpb24odGVzdCkpKQogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKHNlbGYuc2VwYXJhdG9yMikKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbigiJXMiICUgZXJyKQoKCmNsYXNzIFRleHRUZXN0UnVubmVyKG9iamVjdCk6CiAgICAiIiJBIHRlc3QgcnVubmVyIGNsYXNzIHRoYXQgZGlzcGxheXMgcmVzdWx0cyBpbiB0ZXh0dWFsIGZvcm0uCgogICAgSXQgcHJpbnRzIG91dCB0aGUgbmFtZXMgb2YgdGVzdHMgYXMgdGhleSBhcmUgcnVuLCBlcnJvcnMgYXMgdGhleQogICAgb2NjdXIsIGFuZCBhIHN1bW1hcnkgb2YgdGhlIHJlc3VsdHMgYXQgdGhlIGVuZCBvZiB0aGUgdGVzdCBydW4uCiAgICAiIiIKICAgIHJlc3VsdGNsYXNzID0gVGV4dFRlc3RSZXN1bHQKCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RyZWFtPU5vbmUsIGRlc2NyaXB0aW9ucz1UcnVlLCB2ZXJib3NpdHk9MSwKICAgICAgICAgICAgICAgICBmYWlsZmFzdD1GYWxzZSwgYnVmZmVyPUZhbHNlLCByZXN1bHRjbGFzcz1Ob25lLCB3YXJuaW5ncz1Ob25lKToKICAgICAgICBpZiBzdHJlYW0gaXMgTm9uZToKICAgICAgICAgICAgc3RyZWFtID0gc3lzLnN0ZGVycgogICAgICAgIHNlbGYuc3RyZWFtID0gX1dyaXRlbG5EZWNvcmF0b3Ioc3RyZWFtKQogICAgICAgIHNlbGYuZGVzY3JpcHRpb25zID0gZGVzY3JpcHRpb25zCiAgICAgICAgc2VsZi52ZXJib3NpdHkgPSB2ZXJib3NpdHkKICAgICAgICBzZWxmLmZhaWxmYXN0ID0gZmFpbGZhc3QKICAgICAgICBzZWxmLmJ1ZmZlciA9IGJ1ZmZlcgogICAgICAgIHNlbGYud2FybmluZ3MgPSB3YXJuaW5ncwogICAgICAgIGlmIHJlc3VsdGNsYXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLnJlc3VsdGNsYXNzID0gcmVzdWx0Y2xhc3MKCiAgICBkZWYgX21ha2VSZXN1bHQoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmVzdWx0Y2xhc3Moc2VsZi5zdHJlYW0sIHNlbGYuZGVzY3JpcHRpb25zLCBzZWxmLnZlcmJvc2l0eSkKCiAgICBkZWYgcnVuKHNlbGYsIHRlc3QpOgogICAgICAgICJSdW4gdGhlIGdpdmVuIHRlc3QgY2FzZSBvciB0ZXN0IHN1aXRlLiIKICAgICAgICByZXN1bHQgPSBzZWxmLl9tYWtlUmVzdWx0KCkKICAgICAgICByZWdpc3RlclJlc3VsdChyZXN1bHQpCiAgICAgICAgcmVzdWx0LmZhaWxmYXN0ID0gc2VsZi5mYWlsZmFzdAogICAgICAgIHJlc3VsdC5idWZmZXIgPSBzZWxmLmJ1ZmZlcgogICAgICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKToKICAgICAgICAgICAgaWYgc2VsZi53YXJuaW5nczoKICAgICAgICAgICAgICAgICMgaWYgc2VsZi53YXJuaW5ncyBpcyBzZXQsIHVzZSBpdCB0byBmaWx0ZXIgYWxsIHRoZSB3YXJuaW5ncwogICAgICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKHNlbGYud2FybmluZ3MpCiAgICAgICAgICAgICAgICAjIGlmIHRoZSBmaWx0ZXIgaXMgJ2RlZmF1bHQnIG9yICdhbHdheXMnLCBzcGVjaWFsLWNhc2UgdGhlCiAgICAgICAgICAgICAgICAjIHdhcm5pbmdzIGZyb20gdGhlIGRlcHJlY2F0ZWQgdW5pdHRlc3QgbWV0aG9kcyB0byBzaG93IHRoZW0KICAgICAgICAgICAgICAgICMgbm8gbW9yZSB0aGFuIG9uY2UgcGVyIG1vZHVsZSwgYmVjYXVzZSB0aGV5IGNhbiBiZSBmYWlybHkKICAgICAgICAgICAgICAgICMgbm9pc3kuICBUaGUgLVdkIGFuZCAtV2EgZmxhZ3MgY2FuIGJlIHVzZWQgdG8gYnlwYXNzIHRoaXMKICAgICAgICAgICAgICAgICMgb25seSB3aGVuIHNlbGYud2FybmluZ3MgaXMgTm9uZS4KICAgICAgICAgICAgICAgIGlmIHNlbGYud2FybmluZ3MgaW4gWydkZWZhdWx0JywgJ2Fsd2F5cyddOgogICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzLmZpbHRlcndhcm5pbmdzKCdtb2R1bGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk9RGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT0nUGxlYXNlIHVzZSBhc3NlcnRcdysgaW5zdGVhZC4nKQogICAgICAgICAgICBzdGFydFRpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgICAgICBzdGFydFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0YXJ0VGVzdFJ1bicsIE5vbmUpCiAgICAgICAgICAgIGlmIHN0YXJ0VGVzdFJ1biBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHN0YXJ0VGVzdFJ1bigpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRlc3QocmVzdWx0KQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgc3RvcFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0b3BUZXN0UnVuJywgTm9uZSkKICAgICAgICAgICAgICAgIGlmIHN0b3BUZXN0UnVuIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHN0b3BUZXN0UnVuKCkKICAgICAgICAgICAgc3RvcFRpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgIHRpbWVUYWtlbiA9IHN0b3BUaW1lIC0gc3RhcnRUaW1lCiAgICAgICAgcmVzdWx0LnByaW50RXJyb3JzKCkKICAgICAgICBpZiBoYXNhdHRyKHJlc3VsdCwgJ3NlcGFyYXRvcjInKToKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbihyZXN1bHQuc2VwYXJhdG9yMikKICAgICAgICBydW4gPSByZXN1bHQudGVzdHNSdW4KICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCJSYW4gJWQgdGVzdCVzIGluICUuM2ZzIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocnVuLCBydW4gIT0gMSBhbmQgInMiIG9yICIiLCB0aW1lVGFrZW4pKQogICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oKQoKICAgICAgICBleHBlY3RlZEZhaWxzID0gdW5leHBlY3RlZFN1Y2Nlc3NlcyA9IHNraXBwZWQgPSAwCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXN1bHRzID0gbWFwKGxlbiwgKHJlc3VsdC5leHBlY3RlZEZhaWx1cmVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC51bmV4cGVjdGVkU3VjY2Vzc2VzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5za2lwcGVkKSkKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBlbHNlOgogICAgICAgICAgICBleHBlY3RlZEZhaWxzLCB1bmV4cGVjdGVkU3VjY2Vzc2VzLCBza2lwcGVkID0gcmVzdWx0cwoKICAgICAgICBpbmZvcyA9IFtdCiAgICAgICAgaWYgbm90IHJlc3VsdC53YXNTdWNjZXNzZnVsKCk6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlKCJGQUlMRUQiKQogICAgICAgICAgICBmYWlsZWQsIGVycm9yZWQgPSBsZW4ocmVzdWx0LmZhaWx1cmVzKSwgbGVuKHJlc3VsdC5lcnJvcnMpCiAgICAgICAgICAgIGlmIGZhaWxlZDoKICAgICAgICAgICAgICAgIGluZm9zLmFwcGVuZCgiZmFpbHVyZXM9JWQiICUgZmFpbGVkKQogICAgICAgICAgICBpZiBlcnJvcmVkOgogICAgICAgICAgICAgICAgaW5mb3MuYXBwZW5kKCJlcnJvcnM9JWQiICUgZXJyb3JlZCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZSgiT0siKQogICAgICAgIGlmIHNraXBwZWQ6CiAgICAgICAgICAgIGluZm9zLmFwcGVuZCgic2tpcHBlZD0lZCIgJSBza2lwcGVkKQogICAgICAgIGlmIGV4cGVjdGVkRmFpbHM6CiAgICAgICAgICAgIGluZm9zLmFwcGVuZCgiZXhwZWN0ZWQgZmFpbHVyZXM9JWQiICUgZXhwZWN0ZWRGYWlscykKICAgICAgICBpZiB1bmV4cGVjdGVkU3VjY2Vzc2VzOgogICAgICAgICAgICBpbmZvcy5hcHBlbmQoInVuZXhwZWN0ZWQgc3VjY2Vzc2VzPSVkIiAlIHVuZXhwZWN0ZWRTdWNjZXNzZXMpCiAgICAgICAgaWYgaW5mb3M6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oIiAoJXMpIiAlICgiLCAiLmpvaW4oaW5mb3MpLCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoIlxuIikKICAgICAgICByZXR1cm4gcmVzdWx0Cg==',
'/Lib/unittest/result.py':'IiIiVGVzdCByZXN1bHQgb2JqZWN0IiIiDQoNCmltcG9ydCBpbw0KaW1wb3J0IHN5cw0KaW1wb3J0IHRyYWNlYmFjaw0KDQpmcm9tIC4gaW1wb3J0IHV0aWwNCmZyb20gZnVuY3Rvb2xzIGltcG9ydCB3cmFwcw0KDQpfX3VuaXR0ZXN0ID0gVHJ1ZQ0KDQpkZWYgZmFpbGZhc3QobWV0aG9kKToNCiAgICBAd3JhcHMobWV0aG9kKQ0KICAgIGRlZiBpbm5lcihzZWxmLCAqYXJncywgKiprdyk6DQogICAgICAgIGlmIGdldGF0dHIoc2VsZiwgJ2ZhaWxmYXN0JywgRmFsc2UpOg0KICAgICAgICAgICAgc2VsZi5zdG9wKCkNCiAgICAgICAgcmV0dXJuIG1ldGhvZChzZWxmLCAqYXJncywgKiprdykNCiAgICByZXR1cm4gaW5uZXINCg0KU1RET1VUX0xJTkUgPSAnXG5TdGRvdXQ6XG4lcycNClNUREVSUl9MSU5FID0gJ1xuU3RkZXJyOlxuJXMnDQoNCg0KY2xhc3MgVGVzdFJlc3VsdChvYmplY3QpOg0KICAgICIiIkhvbGRlciBmb3IgdGVzdCByZXN1bHQgaW5mb3JtYXRpb24uDQoNCiAgICBUZXN0IHJlc3VsdHMgYXJlIGF1dG9tYXRpY2FsbHkgbWFuYWdlZCBieSB0aGUgVGVzdENhc2UgYW5kIFRlc3RTdWl0ZQ0KICAgIGNsYXNzZXMsIGFuZCBkbyBub3QgbmVlZCB0byBiZSBleHBsaWNpdGx5IG1hbmlwdWxhdGVkIGJ5IHdyaXRlcnMgb2YgdGVzdHMuDQoNCiAgICBFYWNoIGluc3RhbmNlIGhvbGRzIHRoZSB0b3RhbCBudW1iZXIgb2YgdGVzdHMgcnVuLCBhbmQgY29sbGVjdGlvbnMgb2YNCiAgICBmYWlsdXJlcyBhbmQgZXJyb3JzIHRoYXQgb2NjdXJyZWQgYW1vbmcgdGhvc2UgdGVzdCBydW5zLiBUaGUgY29sbGVjdGlvbnMNCiAgICBjb250YWluIHR1cGxlcyBvZiAodGVzdGNhc2UsIGV4Y2VwdGlvbmluZm8pLCB3aGVyZSBleGNlcHRpb25pbmZvIGlzIHRoZQ0KICAgIGZvcm1hdHRlZCB0cmFjZWJhY2sgb2YgdGhlIGVycm9yIHRoYXQgb2NjdXJyZWQuDQogICAgIiIiDQogICAgX3ByZXZpb3VzVGVzdENsYXNzID0gTm9uZQ0KICAgIF90ZXN0UnVuRW50ZXJlZCA9IEZhbHNlDQogICAgX21vZHVsZVNldFVwRmFpbGVkID0gRmFsc2UNCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RyZWFtPU5vbmUsIGRlc2NyaXB0aW9ucz1Ob25lLCB2ZXJib3NpdHk9Tm9uZSk6DQogICAgICAgIHNlbGYuZmFpbGZhc3QgPSBGYWxzZQ0KICAgICAgICBzZWxmLmZhaWx1cmVzID0gW10NCiAgICAgICAgc2VsZi5lcnJvcnMgPSBbXQ0KICAgICAgICBzZWxmLnRlc3RzUnVuID0gMA0KICAgICAgICBzZWxmLnNraXBwZWQgPSBbXQ0KICAgICAgICBzZWxmLmV4cGVjdGVkRmFpbHVyZXMgPSBbXQ0KICAgICAgICBzZWxmLnVuZXhwZWN0ZWRTdWNjZXNzZXMgPSBbXQ0KICAgICAgICBzZWxmLnNob3VsZFN0b3AgPSBGYWxzZQ0KICAgICAgICBzZWxmLmJ1ZmZlciA9IEZhbHNlDQogICAgICAgIHNlbGYuX3N0ZG91dF9idWZmZXIgPSBOb25lDQogICAgICAgIHNlbGYuX3N0ZGVycl9idWZmZXIgPSBOb25lDQogICAgICAgIHNlbGYuX29yaWdpbmFsX3N0ZG91dCA9IHN5cy5zdGRvdXQNCiAgICAgICAgc2VsZi5fb3JpZ2luYWxfc3RkZXJyID0gc3lzLnN0ZGVycg0KICAgICAgICBzZWxmLl9taXJyb3JPdXRwdXQgPSBGYWxzZQ0KDQogICAgZGVmIHByaW50RXJyb3JzKHNlbGYpOg0KICAgICAgICAiQ2FsbGVkIGJ5IFRlc3RSdW5uZXIgYWZ0ZXIgdGVzdCBydW4iDQoNCiAgICBkZWYgc3RhcnRUZXN0KHNlbGYsIHRlc3QpOg0KICAgICAgICAiQ2FsbGVkIHdoZW4gdGhlIGdpdmVuIHRlc3QgaXMgYWJvdXQgdG8gYmUgcnVuIg0KICAgICAgICBzZWxmLnRlc3RzUnVuICs9IDENCiAgICAgICAgc2VsZi5fbWlycm9yT3V0cHV0ID0gRmFsc2UNCiAgICAgICAgc2VsZi5fc2V0dXBTdGRvdXQoKQ0KDQogICAgZGVmIF9zZXR1cFN0ZG91dChzZWxmKToNCiAgICAgICAgaWYgc2VsZi5idWZmZXI6DQogICAgICAgICAgICBpZiBzZWxmLl9zdGRlcnJfYnVmZmVyIGlzIE5vbmU6DQogICAgICAgICAgICAgICAgc2VsZi5fc3RkZXJyX2J1ZmZlciA9IGlvLlN0cmluZ0lPKCkNCiAgICAgICAgICAgICAgICBzZWxmLl9zdGRvdXRfYnVmZmVyID0gaW8uU3RyaW5nSU8oKQ0KICAgICAgICAgICAgc3lzLnN0ZG91dCA9IHNlbGYuX3N0ZG91dF9idWZmZXINCiAgICAgICAgICAgIHN5cy5zdGRlcnIgPSBzZWxmLl9zdGRlcnJfYnVmZmVyDQoNCiAgICBkZWYgc3RhcnRUZXN0UnVuKHNlbGYpOg0KICAgICAgICAiIiJDYWxsZWQgb25jZSBiZWZvcmUgYW55IHRlc3RzIGFyZSBleGVjdXRlZC4NCg0KICAgICAgICBTZWUgc3RhcnRUZXN0IGZvciBhIG1ldGhvZCBjYWxsZWQgYmVmb3JlIGVhY2ggdGVzdC4NCiAgICAgICAgIiIiDQoNCiAgICBkZWYgc3RvcFRlc3Qoc2VsZiwgdGVzdCk6DQogICAgICAgICIiIkNhbGxlZCB3aGVuIHRoZSBnaXZlbiB0ZXN0IGhhcyBiZWVuIHJ1biIiIg0KICAgICAgICBzZWxmLl9yZXN0b3JlU3Rkb3V0KCkNCiAgICAgICAgc2VsZi5fbWlycm9yT3V0cHV0ID0gRmFsc2UNCg0KICAgIGRlZiBfcmVzdG9yZVN0ZG91dChzZWxmKToNCiAgICAgICAgaWYgc2VsZi5idWZmZXI6DQogICAgICAgICAgICBpZiBzZWxmLl9taXJyb3JPdXRwdXQ6DQogICAgICAgICAgICAgICAgb3V0cHV0ID0gc3lzLnN0ZG91dC5nZXR2YWx1ZSgpDQogICAgICAgICAgICAgICAgZXJyb3IgPSBzeXMuc3RkZXJyLmdldHZhbHVlKCkNCiAgICAgICAgICAgICAgICBpZiBvdXRwdXQ6DQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBvdXRwdXQuZW5kc3dpdGgoJ1xuJyk6DQogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gJ1xuJw0KICAgICAgICAgICAgICAgICAgICBzZWxmLl9vcmlnaW5hbF9zdGRvdXQud3JpdGUoU1RET1VUX0xJTkUgJSBvdXRwdXQpDQogICAgICAgICAgICAgICAgaWYgZXJyb3I6DQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBlcnJvci5lbmRzd2l0aCgnXG4nKToNCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yICs9ICdcbicNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fb3JpZ2luYWxfc3RkZXJyLndyaXRlKFNUREVSUl9MSU5FICUgZXJyb3IpDQoNCiAgICAgICAgICAgIHN5cy5zdGRvdXQgPSBzZWxmLl9vcmlnaW5hbF9zdGRvdXQNCiAgICAgICAgICAgIHN5cy5zdGRlcnIgPSBzZWxmLl9vcmlnaW5hbF9zdGRlcnINCiAgICAgICAgICAgIHNlbGYuX3N0ZG91dF9idWZmZXIuc2VlaygwKQ0KICAgICAgICAgICAgc2VsZi5fc3Rkb3V0X2J1ZmZlci50cnVuY2F0ZSgpDQogICAgICAgICAgICBzZWxmLl9zdGRlcnJfYnVmZmVyLnNlZWsoMCkNCiAgICAgICAgICAgIHNlbGYuX3N0ZGVycl9idWZmZXIudHJ1bmNhdGUoKQ0KDQogICAgZGVmIHN0b3BUZXN0UnVuKHNlbGYpOg0KICAgICAgICAiIiJDYWxsZWQgb25jZSBhZnRlciBhbGwgdGVzdHMgYXJlIGV4ZWN1dGVkLg0KDQogICAgICAgIFNlZSBzdG9wVGVzdCBmb3IgYSBtZXRob2QgY2FsbGVkIGFmdGVyIGVhY2ggdGVzdC4NCiAgICAgICAgIiIiDQoNCiAgICBAZmFpbGZhc3QNCiAgICBkZWYgYWRkRXJyb3Ioc2VsZiwgdGVzdCwgZXJyKToNCiAgICAgICAgIiIiQ2FsbGVkIHdoZW4gYW4gZXJyb3IgaGFzIG9jY3VycmVkLiAnZXJyJyBpcyBhIHR1cGxlIG9mIHZhbHVlcyBhcw0KICAgICAgICByZXR1cm5lZCBieSBzeXMuZXhjX2luZm8oKS4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuZXJyb3JzLmFwcGVuZCgodGVzdCwgc2VsZi5fZXhjX2luZm9fdG9fc3RyaW5nKGVyciwgdGVzdCkpKQ0KICAgICAgICBzZWxmLl9taXJyb3JPdXRwdXQgPSBUcnVlDQoNCiAgICBAZmFpbGZhc3QNCiAgICBkZWYgYWRkRmFpbHVyZShzZWxmLCB0ZXN0LCBlcnIpOg0KICAgICAgICAiIiJDYWxsZWQgd2hlbiBhbiBlcnJvciBoYXMgb2NjdXJyZWQuICdlcnInIGlzIGEgdHVwbGUgb2YgdmFsdWVzIGFzDQogICAgICAgIHJldHVybmVkIGJ5IHN5cy5leGNfaW5mbygpLiIiIg0KICAgICAgICBzZWxmLmZhaWx1cmVzLmFwcGVuZCgodGVzdCwgc2VsZi5fZXhjX2luZm9fdG9fc3RyaW5nKGVyciwgdGVzdCkpKQ0KICAgICAgICBzZWxmLl9taXJyb3JPdXRwdXQgPSBUcnVlDQoNCiAgICBkZWYgYWRkU3VjY2VzcyhzZWxmLCB0ZXN0KToNCiAgICAgICAgIkNhbGxlZCB3aGVuIGEgdGVzdCBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseSINCiAgICAgICAgcGFzcw0KDQogICAgZGVmIGFkZFNraXAoc2VsZiwgdGVzdCwgcmVhc29uKToNCiAgICAgICAgIiIiQ2FsbGVkIHdoZW4gYSB0ZXN0IGlzIHNraXBwZWQuIiIiDQogICAgICAgIHNlbGYuc2tpcHBlZC5hcHBlbmQoKHRlc3QsIHJlYXNvbikpDQoNCiAgICBkZWYgYWRkRXhwZWN0ZWRGYWlsdXJlKHNlbGYsIHRlc3QsIGVycik6DQogICAgICAgICIiIkNhbGxlZCB3aGVuIGFuIGV4cGVjdGVkIGZhaWx1cmUvZXJyb3Igb2NjdXJlZC4iIiINCiAgICAgICAgc2VsZi5leHBlY3RlZEZhaWx1cmVzLmFwcGVuZCgNCiAgICAgICAgICAgICh0ZXN0LCBzZWxmLl9leGNfaW5mb190b19zdHJpbmcoZXJyLCB0ZXN0KSkpDQoNCiAgICBAZmFpbGZhc3QNCiAgICBkZWYgYWRkVW5leHBlY3RlZFN1Y2Nlc3Moc2VsZiwgdGVzdCk6DQogICAgICAgICIiIkNhbGxlZCB3aGVuIGEgdGVzdCB3YXMgZXhwZWN0ZWQgdG8gZmFpbCwgYnV0IHN1Y2NlZWQuIiIiDQogICAgICAgIHNlbGYudW5leHBlY3RlZFN1Y2Nlc3Nlcy5hcHBlbmQodGVzdCkNCg0KICAgIGRlZiB3YXNTdWNjZXNzZnVsKHNlbGYpOg0KICAgICAgICAiVGVsbHMgd2hldGhlciBvciBub3QgdGhpcyByZXN1bHQgd2FzIGEgc3VjY2VzcyINCiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmZhaWx1cmVzKSA9PSBsZW4oc2VsZi5lcnJvcnMpID09IDANCg0KICAgIGRlZiBzdG9wKHNlbGYpOg0KICAgICAgICAiSW5kaWNhdGVzIHRoYXQgdGhlIHRlc3RzIHNob3VsZCBiZSBhYm9ydGVkIg0KICAgICAgICBzZWxmLnNob3VsZFN0b3AgPSBUcnVlDQoNCiAgICBkZWYgX2V4Y19pbmZvX3RvX3N0cmluZyhzZWxmLCBlcnIsIHRlc3QpOg0KICAgICAgICAiIiJDb252ZXJ0cyBhIHN5cy5leGNfaW5mbygpLXN0eWxlIHR1cGxlIG9mIHZhbHVlcyBpbnRvIGEgc3RyaW5nLiIiIg0KICAgICAgICBleGN0eXBlLCB2YWx1ZSwgdGIgPSBlcnINCiAgICAgICAgIyBTa2lwIHRlc3QgcnVubmVyIHRyYWNlYmFjayBsZXZlbHMNCiAgICAgICAgd2hpbGUgdGIgYW5kIHNlbGYuX2lzX3JlbGV2YW50X3RiX2xldmVsKHRiKToNCiAgICAgICAgICAgIHRiID0gdGIudGJfbmV4dA0KDQogICAgICAgIGlmIGV4Y3R5cGUgaXMgdGVzdC5mYWlsdXJlRXhjZXB0aW9uOg0KICAgICAgICAgICAgIyBTa2lwIGFzc2VydCooKSB0cmFjZWJhY2sgbGV2ZWxzDQogICAgICAgICAgICBsZW5ndGggPSBzZWxmLl9jb3VudF9yZWxldmFudF90Yl9sZXZlbHModGIpDQogICAgICAgICAgICBtc2dMaW5lcyA9IHRyYWNlYmFjay5mb3JtYXRfZXhjZXB0aW9uKGV4Y3R5cGUsIHZhbHVlLCB0YiwgbGVuZ3RoKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgbXNnTGluZXMgPSB0cmFjZWJhY2suZm9ybWF0X2V4Y2VwdGlvbihleGN0eXBlLCB2YWx1ZSwgdGIpDQoNCiAgICAgICAgaWYgc2VsZi5idWZmZXI6DQogICAgICAgICAgICBvdXRwdXQgPSBzeXMuc3Rkb3V0LmdldHZhbHVlKCkNCiAgICAgICAgICAgIGVycm9yID0gc3lzLnN0ZGVyci5nZXR2YWx1ZSgpDQogICAgICAgICAgICBpZiBvdXRwdXQ6DQogICAgICAgICAgICAgICAgaWYgbm90IG91dHB1dC5lbmRzd2l0aCgnXG4nKToNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9ICdcbicNCiAgICAgICAgICAgICAgICBtc2dMaW5lcy5hcHBlbmQoU1RET1VUX0xJTkUgJSBvdXRwdXQpDQogICAgICAgICAgICBpZiBlcnJvcjoNCiAgICAgICAgICAgICAgICBpZiBub3QgZXJyb3IuZW5kc3dpdGgoJ1xuJyk6DQogICAgICAgICAgICAgICAgICAgIGVycm9yICs9ICdcbicNCiAgICAgICAgICAgICAgICBtc2dMaW5lcy5hcHBlbmQoU1RERVJSX0xJTkUgJSBlcnJvcikNCiAgICAgICAgcmV0dXJuICcnLmpvaW4obXNnTGluZXMpDQoNCg0KICAgIGRlZiBfaXNfcmVsZXZhbnRfdGJfbGV2ZWwoc2VsZiwgdGIpOg0KICAgICAgICByZXR1cm4gJ19fdW5pdHRlc3QnIGluIHRiLnRiX2ZyYW1lLmZfZ2xvYmFscw0KDQogICAgZGVmIF9jb3VudF9yZWxldmFudF90Yl9sZXZlbHMoc2VsZiwgdGIpOg0KICAgICAgICBsZW5ndGggPSAwDQogICAgICAgIHdoaWxlIHRiIGFuZCBub3Qgc2VsZi5faXNfcmVsZXZhbnRfdGJfbGV2ZWwodGIpOg0KICAgICAgICAgICAgbGVuZ3RoICs9IDENCiAgICAgICAgICAgIHRiID0gdGIudGJfbmV4dA0KICAgICAgICByZXR1cm4gbGVuZ3RoDQoNCiAgICBkZWYgX19yZXByX18oc2VsZik6DQogICAgICAgIHJldHVybiAoIjwlcyBydW49JWkgZXJyb3JzPSVpIGZhaWx1cmVzPSVpPiIgJQ0KICAgICAgICAgICAgICAgKHV0aWwuc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pLCBzZWxmLnRlc3RzUnVuLCBsZW4oc2VsZi5lcnJvcnMpLA0KICAgICAgICAgICAgICAgIGxlbihzZWxmLmZhaWx1cmVzKSkpDQo=',
'/Lib/unittest/__init__.py':'IiIiDQpQeXRob24gdW5pdCB0ZXN0aW5nIGZyYW1ld29yaywgYmFzZWQgb24gRXJpY2ggR2FtbWEncyBKVW5pdCBhbmQgS2VudCBCZWNrJ3MNClNtYWxsdGFsayB0ZXN0aW5nIGZyYW1ld29yay4NCg0KVGhpcyBtb2R1bGUgY29udGFpbnMgdGhlIGNvcmUgZnJhbWV3b3JrIGNsYXNzZXMgdGhhdCBmb3JtIHRoZSBiYXNpcyBvZg0Kc3BlY2lmaWMgdGVzdCBjYXNlcyBhbmQgc3VpdGVzIChUZXN0Q2FzZSwgVGVzdFN1aXRlIGV0Yy4pLCBhbmQgYWxzbyBhDQp0ZXh0LWJhc2VkIHV0aWxpdHkgY2xhc3MgZm9yIHJ1bm5pbmcgdGhlIHRlc3RzIGFuZCByZXBvcnRpbmcgdGhlIHJlc3VsdHMNCiAoVGV4dFRlc3RSdW5uZXIpLg0KDQpTaW1wbGUgdXNhZ2U6DQoNCiAgICBpbXBvcnQgdW5pdHRlc3QNCg0KICAgIGNsYXNzIEludGVnZXJBcml0aG1lbnRpY1Rlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgZGVmIHRlc3RBZGQoc2VsZik6ICAjIyB0ZXN0IG1ldGhvZCBuYW1lcyBiZWdpbiAndGVzdConDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKCgxICsgMiksIDMpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKDAgKyAxLCAxKQ0KICAgICAgICBkZWYgdGVzdE11bHRpcGx5KHNlbGYpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgoMCAqIDEwKSwgMCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoKDUgKiA4KSwgNDApDQoNCiAgICBpZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgICAgICB1bml0dGVzdC5tYWluKCkNCg0KRnVydGhlciBpbmZvcm1hdGlvbiBpcyBhdmFpbGFibGUgaW4gdGhlIGJ1bmRsZWQgZG9jdW1lbnRhdGlvbiwgYW5kIGZyb20NCg0KICBodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvdW5pdHRlc3QuaHRtbA0KDQpDb3B5cmlnaHQgKGMpIDE5OTktMjAwMyBTdGV2ZSBQdXJjZWxsDQpDb3B5cmlnaHQgKGMpIDIwMDMtMjAxMCBQeXRob24gU29mdHdhcmUgRm91bmRhdGlvbg0KVGhpcyBtb2R1bGUgaXMgZnJlZSBzb2Z0d2FyZSwgYW5kIHlvdSBtYXkgcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkNCml0IHVuZGVyIHRoZSBzYW1lIHRlcm1zIGFzIFB5dGhvbiBpdHNlbGYsIHNvIGxvbmcgYXMgdGhpcyBjb3B5cmlnaHQgbWVzc2FnZQ0KYW5kIGRpc2NsYWltZXIgYXJlIHJldGFpbmVkIGluIHRoZWlyIG9yaWdpbmFsIGZvcm0uDQoNCklOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIFRPIEFOWSBQQVJUWSBGT1IgRElSRUNULCBJTkRJUkVDVCwNClNQRUNJQUwsIElOQ0lERU5UQUwsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBBUklTSU5HIE9VVCBPRiBUSEUgVVNFIE9GDQpUSElTIENPREUsIEVWRU4gSUYgVEhFIEFVVEhPUiBIQVMgQkVFTiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIDQpEQU1BR0UuDQoNClRIRSBBVVRIT1IgU1BFQ0lGSUNBTExZIERJU0NMQUlNUyBBTlkgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UDQpMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQQ0KUEFSVElDVUxBUiBQVVJQT1NFLiAgVEhFIENPREUgUFJPVklERUQgSEVSRVVOREVSIElTIE9OIEFOICJBUyBJUyIgQkFTSVMsDQpBTkQgVEhFUkUgSVMgTk8gT0JMSUdBVElPTiBXSEFUU09FVkVSIFRPIFBST1ZJREUgTUFJTlRFTkFOQ0UsDQpTVVBQT1JULCBVUERBVEVTLCBFTkhBTkNFTUVOVFMsIE9SIE1PRElGSUNBVElPTlMuDQoiIiINCg0KX19hbGxfXyA9IFsnVGVzdFJlc3VsdCcsICdUZXN0Q2FzZScsICdUZXN0U3VpdGUnLA0KICAgICAgICAgICAnVGV4dFRlc3RSdW5uZXInLCAnVGVzdExvYWRlcicsICdGdW5jdGlvblRlc3RDYXNlJywgJ21haW4nLA0KICAgICAgICAgICAnZGVmYXVsdFRlc3RMb2FkZXInLCAnU2tpcFRlc3QnLCAnc2tpcCcsICdza2lwSWYnLCAnc2tpcFVubGVzcycsDQogICAgICAgICAgICdleHBlY3RlZEZhaWx1cmUnLCAnVGV4dFRlc3RSZXN1bHQnLCAnaW5zdGFsbEhhbmRsZXInLA0KICAgICAgICAgICAncmVnaXN0ZXJSZXN1bHQnLCAncmVtb3ZlUmVzdWx0JywgJ3JlbW92ZUhhbmRsZXInXQ0KDQojIEV4cG9zZSBvYnNvbGV0ZSBmdW5jdGlvbnMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5DQpfX2FsbF9fLmV4dGVuZChbJ2dldFRlc3RDYXNlTmFtZXMnLCAnbWFrZVN1aXRlJywgJ2ZpbmRUZXN0Q2FzZXMnXSkNCg0KX191bml0dGVzdCA9IFRydWUNCg0KZnJvbSAucmVzdWx0IGltcG9ydCBUZXN0UmVzdWx0DQpmcm9tIC5jYXNlIGltcG9ydCAoVGVzdENhc2UsIEZ1bmN0aW9uVGVzdENhc2UsIFNraXBUZXN0LCBza2lwLCBza2lwSWYsDQogICAgICAgICAgICAgICAgICAgc2tpcFVubGVzcywgZXhwZWN0ZWRGYWlsdXJlKQ0KZnJvbSAuc3VpdGUgaW1wb3J0IEJhc2VUZXN0U3VpdGUsIFRlc3RTdWl0ZQ0KZnJvbSAubG9hZGVyIGltcG9ydCAoVGVzdExvYWRlciwgZGVmYXVsdFRlc3RMb2FkZXIsIG1ha2VTdWl0ZSwgZ2V0VGVzdENhc2VOYW1lcywNCiAgICAgICAgICAgICAgICAgICAgIGZpbmRUZXN0Q2FzZXMpDQpmcm9tIC5tYWluIGltcG9ydCBUZXN0UHJvZ3JhbSwgbWFpbg0KZnJvbSAucnVubmVyIGltcG9ydCBUZXh0VGVzdFJ1bm5lciwgVGV4dFRlc3RSZXN1bHQNCmZyb20gLnNpZ25hbHMgaW1wb3J0IGluc3RhbGxIYW5kbGVyLCByZWdpc3RlclJlc3VsdCwgcmVtb3ZlUmVzdWx0LCByZW1vdmVIYW5kbGVyDQoNCiMgZGVwcmVjYXRlZA0KX1RleHRUZXN0UmVzdWx0ID0gVGV4dFRlc3RSZXN1bHQNCg==',
'/Lib/unittest/__main__.py':'IiIiTWFpbiBlbnRyeSBwb2ludCIiIg0KDQppbXBvcnQgc3lzDQppZiBzeXMuYXJndlswXS5lbmRzd2l0aCgiX19tYWluX18ucHkiKToNCiAgICBzeXMuYXJndlswXSA9ICJweXRob24gLW0gdW5pdHRlc3QiDQoNCl9fdW5pdHRlc3QgPSBUcnVlDQoNCmZyb20gLm1haW4gaW1wb3J0IG1haW4sIFRlc3RQcm9ncmFtLCBVU0FHRV9BU19NQUlODQpUZXN0UHJvZ3JhbS5VU0FHRSA9IFVTQUdFX0FTX01BSU4NCg0KbWFpbihtb2R1bGU9Tm9uZSkNCg==',
'/Lib/unittest/util.py':'IiIiVmFyaW91cyB1dGlsaXR5IGZ1bmN0aW9ucy4iIiINCg0KZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgbmFtZWR0dXBsZSwgT3JkZXJlZERpY3QNCg0KX191bml0dGVzdCA9IFRydWUNCg0KX01BWF9MRU5HVEggPSA4MA0KZGVmIHNhZmVfcmVwcihvYmosIHNob3J0PUZhbHNlKToNCiAgICB0cnk6DQogICAgICAgIHJlc3VsdCA9IHJlcHIob2JqKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb246DQogICAgICAgIHJlc3VsdCA9IG9iamVjdC5fX3JlcHJfXyhvYmopDQogICAgaWYgbm90IHNob3J0IG9yIGxlbihyZXN1bHQpIDwgX01BWF9MRU5HVEg6DQogICAgICAgIHJldHVybiByZXN1bHQNCiAgICByZXR1cm4gcmVzdWx0WzpfTUFYX0xFTkdUSF0gKyAnIFt0cnVuY2F0ZWRdLi4uJw0KDQpkZWYgc3RyY2xhc3MoY2xzKToNCiAgICByZXR1cm4gIiVzLiVzIiAlIChjbHMuX19tb2R1bGVfXywgY2xzLl9fbmFtZV9fKQ0KDQpkZWYgc29ydGVkX2xpc3RfZGlmZmVyZW5jZShleHBlY3RlZCwgYWN0dWFsKToNCiAgICAiIiJGaW5kcyBlbGVtZW50cyBpbiBvbmx5IG9uZSBvciB0aGUgb3RoZXIgb2YgdHdvLCBzb3J0ZWQgaW5wdXQgbGlzdHMuDQoNCiAgICBSZXR1cm5zIGEgdHdvLWVsZW1lbnQgdHVwbGUgb2YgbGlzdHMuICAgIFRoZSBmaXJzdCBsaXN0IGNvbnRhaW5zIHRob3NlDQogICAgZWxlbWVudHMgaW4gdGhlICJleHBlY3RlZCIgbGlzdCBidXQgbm90IGluIHRoZSAiYWN0dWFsIiBsaXN0LCBhbmQgdGhlDQogICAgc2Vjb25kIGNvbnRhaW5zIHRob3NlIGVsZW1lbnRzIGluIHRoZSAiYWN0dWFsIiBsaXN0IGJ1dCBub3QgaW4gdGhlDQogICAgImV4cGVjdGVkIiBsaXN0LiAgICBEdXBsaWNhdGUgZWxlbWVudHMgaW4gZWl0aGVyIGlucHV0IGxpc3QgYXJlIGlnbm9yZWQuDQogICAgIiIiDQogICAgaSA9IGogPSAwDQogICAgbWlzc2luZyA9IFtdDQogICAgdW5leHBlY3RlZCA9IFtdDQogICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZSA9IGV4cGVjdGVkW2ldDQogICAgICAgICAgICBhID0gYWN0dWFsW2pdDQogICAgICAgICAgICBpZiBlIDwgYToNCiAgICAgICAgICAgICAgICBtaXNzaW5nLmFwcGVuZChlKQ0KICAgICAgICAgICAgICAgIGkgKz0gMQ0KICAgICAgICAgICAgICAgIHdoaWxlIGV4cGVjdGVkW2ldID09IGU6DQogICAgICAgICAgICAgICAgICAgIGkgKz0gMQ0KICAgICAgICAgICAgZWxpZiBlID4gYToNCiAgICAgICAgICAgICAgICB1bmV4cGVjdGVkLmFwcGVuZChhKQ0KICAgICAgICAgICAgICAgIGogKz0gMQ0KICAgICAgICAgICAgICAgIHdoaWxlIGFjdHVhbFtqXSA9PSBhOg0KICAgICAgICAgICAgICAgICAgICBqICs9IDENCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgaSArPSAxDQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICB3aGlsZSBleHBlY3RlZFtpXSA9PSBlOg0KICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAxDQogICAgICAgICAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgICAgICAgICAgaiArPSAxDQogICAgICAgICAgICAgICAgICAgIHdoaWxlIGFjdHVhbFtqXSA9PSBhOg0KICAgICAgICAgICAgICAgICAgICAgICAgaiArPSAxDQogICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOg0KICAgICAgICAgICAgbWlzc2luZy5leHRlbmQoZXhwZWN0ZWRbaTpdKQ0KICAgICAgICAgICAgdW5leHBlY3RlZC5leHRlbmQoYWN0dWFsW2o6XSkNCiAgICAgICAgICAgIGJyZWFrDQogICAgcmV0dXJuIG1pc3NpbmcsIHVuZXhwZWN0ZWQNCg0KDQpkZWYgdW5vcmRlcmFibGVfbGlzdF9kaWZmZXJlbmNlKGV4cGVjdGVkLCBhY3R1YWwpOg0KICAgICIiIlNhbWUgYmVoYXZpb3IgYXMgc29ydGVkX2xpc3RfZGlmZmVyZW5jZSBidXQNCiAgICBmb3IgbGlzdHMgb2YgdW5vcmRlcmFibGUgaXRlbXMgKGxpa2UgZGljdHMpLg0KDQogICAgQXMgaXQgZG9lcyBhIGxpbmVhciBzZWFyY2ggcGVyIGl0ZW0gKHJlbW92ZSkgaXQNCiAgICBoYXMgTyhuKm4pIHBlcmZvcm1hbmNlLiIiIg0KICAgIG1pc3NpbmcgPSBbXQ0KICAgIHdoaWxlIGV4cGVjdGVkOg0KICAgICAgICBpdGVtID0gZXhwZWN0ZWQucG9wKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgYWN0dWFsLnJlbW92ZShpdGVtKQ0KICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgICAgIG1pc3NpbmcuYXBwZW5kKGl0ZW0pDQoNCiAgICAjIGFueXRoaW5nIGxlZnQgaW4gYWN0dWFsIGlzIHVuZXhwZWN0ZWQNCiAgICByZXR1cm4gbWlzc2luZywgYWN0dWFsDQoNCmRlZiB0aHJlZV93YXlfY21wKHgsIHkpOg0KICAgICIiIlJldHVybiAtMSBpZiB4IDwgeSwgMCBpZiB4ID09IHkgYW5kIDEgaWYgeCA+IHkiIiINCiAgICByZXR1cm4gKHggPiB5KSAtICh4IDwgeSkNCg0KX01pc21hdGNoID0gbmFtZWR0dXBsZSgnTWlzbWF0Y2gnLCAnYWN0dWFsIGV4cGVjdGVkIHZhbHVlJykNCg0KZGVmIF9jb3VudF9kaWZmX2FsbF9wdXJwb3NlKGFjdHVhbCwgZXhwZWN0ZWQpOg0KICAgICdSZXR1cm5zIGxpc3Qgb2YgKGNudF9hY3QsIGNudF9leHAsIGVsZW0pIHRyaXBsZXMgd2hlcmUgdGhlIGNvdW50cyBkaWZmZXInDQogICAgIyBlbGVtZW50cyBuZWVkIG5vdCBiZSBoYXNoYWJsZQ0KICAgIHMsIHQgPSBsaXN0KGFjdHVhbCksIGxpc3QoZXhwZWN0ZWQpDQogICAgbSwgbiA9IGxlbihzKSwgbGVuKHQpDQogICAgTlVMTCA9IG9iamVjdCgpDQogICAgcmVzdWx0ID0gW10NCiAgICBmb3IgaSwgZWxlbSBpbiBlbnVtZXJhdGUocyk6DQogICAgICAgIGlmIGVsZW0gaXMgTlVMTDoNCiAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIGNudF9zID0gY250X3QgPSAwDQogICAgICAgIGZvciBqIGluIHJhbmdlKGksIG0pOg0KICAgICAgICAgICAgaWYgc1tqXSA9PSBlbGVtOg0KICAgICAgICAgICAgICAgIGNudF9zICs9IDENCiAgICAgICAgICAgICAgICBzW2pdID0gTlVMTA0KICAgICAgICBmb3Igaiwgb3RoZXJfZWxlbSBpbiBlbnVtZXJhdGUodCk6DQogICAgICAgICAgICBpZiBvdGhlcl9lbGVtID09IGVsZW06DQogICAgICAgICAgICAgICAgY250X3QgKz0gMQ0KICAgICAgICAgICAgICAgIHRbal0gPSBOVUxMDQogICAgICAgIGlmIGNudF9zICE9IGNudF90Og0KICAgICAgICAgICAgZGlmZiA9IF9NaXNtYXRjaChjbnRfcywgY250X3QsIGVsZW0pDQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGRpZmYpDQoNCiAgICBmb3IgaSwgZWxlbSBpbiBlbnVtZXJhdGUodCk6DQogICAgICAgIGlmIGVsZW0gaXMgTlVMTDoNCiAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIGNudF90ID0gMA0KICAgICAgICBmb3IgaiBpbiByYW5nZShpLCBuKToNCiAgICAgICAgICAgIGlmIHRbal0gPT0gZWxlbToNCiAgICAgICAgICAgICAgICBjbnRfdCArPSAxDQogICAgICAgICAgICAgICAgdFtqXSA9IE5VTEwNCiAgICAgICAgZGlmZiA9IF9NaXNtYXRjaCgwLCBjbnRfdCwgZWxlbSkNCiAgICAgICAgcmVzdWx0LmFwcGVuZChkaWZmKQ0KICAgIHJldHVybiByZXN1bHQNCg0KZGVmIF9vcmRlcmVkX2NvdW50KGl0ZXJhYmxlKToNCiAgICAnUmV0dXJuIGRpY3Qgb2YgZWxlbWVudCBjb3VudHMsIGluIHRoZSBvcmRlciB0aGV5IHdlcmUgZmlyc3Qgc2VlbicNCiAgICBjID0gT3JkZXJlZERpY3QoKQ0KICAgIGZvciBlbGVtIGluIGl0ZXJhYmxlOg0KICAgICAgICBjW2VsZW1dID0gYy5nZXQoZWxlbSwgMCkgKyAxDQogICAgcmV0dXJuIGMNCg0KZGVmIF9jb3VudF9kaWZmX2hhc2hhYmxlKGFjdHVhbCwgZXhwZWN0ZWQpOg0KICAgICdSZXR1cm5zIGxpc3Qgb2YgKGNudF9hY3QsIGNudF9leHAsIGVsZW0pIHRyaXBsZXMgd2hlcmUgdGhlIGNvdW50cyBkaWZmZXInDQogICAgIyBlbGVtZW50cyBtdXN0IGJlIGhhc2hhYmxlDQogICAgcywgdCA9IF9vcmRlcmVkX2NvdW50KGFjdHVhbCksIF9vcmRlcmVkX2NvdW50KGV4cGVjdGVkKQ0KICAgIHJlc3VsdCA9IFtdDQogICAgZm9yIGVsZW0sIGNudF9zIGluIHMuaXRlbXMoKToNCiAgICAgICAgY250X3QgPSB0LmdldChlbGVtLCAwKQ0KICAgICAgICBpZiBjbnRfcyAhPSBjbnRfdDoNCiAgICAgICAgICAgIGRpZmYgPSBfTWlzbWF0Y2goY250X3MsIGNudF90LCBlbGVtKQ0KICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChkaWZmKQ0KICAgIGZvciBlbGVtLCBjbnRfdCBpbiB0Lml0ZW1zKCk6DQogICAgICAgIGlmIGVsZW0gbm90IGluIHM6DQogICAgICAgICAgICBkaWZmID0gX01pc21hdGNoKDAsIGNudF90LCBlbGVtKQ0KICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChkaWZmKQ0KICAgIHJldHVybiByZXN1bHQNCg==',
'/Lib/unittest/loader.py':'IiIiTG9hZGluZyB1bml0dGVzdHMuIiIiCgppbXBvcnQgb3MKaW1wb3J0IHJlCmltcG9ydCBzeXMKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgdHlwZXMKaW1wb3J0IGZ1bmN0b29scwoKZnJvbSBmbm1hdGNoIGltcG9ydCBmbm1hdGNoCgpmcm9tIC4gaW1wb3J0IGNhc2UsIHN1aXRlLCB1dGlsCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKIyB3aGF0IGFib3V0IC5weWMgb3IgLnB5byAoZXRjKQojIHdlIHdvdWxkIG5lZWQgdG8gYXZvaWQgbG9hZGluZyB0aGUgc2FtZSB0ZXN0cyBtdWx0aXBsZSB0aW1lcwojIGZyb20gJy5weScsICcucHljJyAqYW5kKiAnLnB5bycKVkFMSURfTU9EVUxFX05BTUUgPSByZS5jb21waWxlKHInW19hLXpdXHcqXC5weSQnLCByZS5JR05PUkVDQVNFKQoKCmRlZiBfbWFrZV9mYWlsZWRfaW1wb3J0X3Rlc3QobmFtZSwgc3VpdGVDbGFzcyk6CiAgICBtZXNzYWdlID0gJ0ZhaWxlZCB0byBpbXBvcnQgdGVzdCBtb2R1bGU6ICVzXG4lcycgJSAobmFtZSwgdHJhY2ViYWNrLmZvcm1hdF9leGMoKSkKICAgIHJldHVybiBfbWFrZV9mYWlsZWRfdGVzdCgnTW9kdWxlSW1wb3J0RmFpbHVyZScsIG5hbWUsIEltcG9ydEVycm9yKG1lc3NhZ2UpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1aXRlQ2xhc3MpCgpkZWYgX21ha2VfZmFpbGVkX2xvYWRfdGVzdHMobmFtZSwgZXhjZXB0aW9uLCBzdWl0ZUNsYXNzKToKICAgIHJldHVybiBfbWFrZV9mYWlsZWRfdGVzdCgnTG9hZFRlc3RzRmFpbHVyZScsIG5hbWUsIGV4Y2VwdGlvbiwgc3VpdGVDbGFzcykKCmRlZiBfbWFrZV9mYWlsZWRfdGVzdChjbGFzc25hbWUsIG1ldGhvZG5hbWUsIGV4Y2VwdGlvbiwgc3VpdGVDbGFzcyk6CiAgICBkZWYgdGVzdEZhaWx1cmUoc2VsZik6CiAgICAgICAgcmFpc2UgZXhjZXB0aW9uCiAgICBhdHRycyA9IHttZXRob2RuYW1lOiB0ZXN0RmFpbHVyZX0KICAgIFRlc3RDbGFzcyA9IHR5cGUoY2xhc3NuYW1lLCAoY2FzZS5UZXN0Q2FzZSwpLCBhdHRycykKICAgIHJldHVybiBzdWl0ZUNsYXNzKChUZXN0Q2xhc3MobWV0aG9kbmFtZSksKSkKCmRlZiBfanl0aG9uX2F3YXJlX3NwbGl0ZXh0KHBhdGgpOgogICAgaWYgcGF0aC5sb3dlcigpLmVuZHN3aXRoKCckcHkuY2xhc3MnKToKICAgICAgICByZXR1cm4gcGF0aFs6LTldCiAgICByZXR1cm4gb3MucGF0aC5zcGxpdGV4dChwYXRoKVswXQoKCmNsYXNzIFRlc3RMb2FkZXIob2JqZWN0KToKICAgICIiIgogICAgVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgbG9hZGluZyB0ZXN0cyBhY2NvcmRpbmcgdG8gdmFyaW91cyBjcml0ZXJpYQogICAgYW5kIHJldHVybmluZyB0aGVtIHdyYXBwZWQgaW4gYSBUZXN0U3VpdGUKICAgICIiIgogICAgdGVzdE1ldGhvZFByZWZpeCA9ICd0ZXN0JwogICAgc29ydFRlc3RNZXRob2RzVXNpbmcgPSBzdGF0aWNtZXRob2QodXRpbC50aHJlZV93YXlfY21wKQogICAgc3VpdGVDbGFzcyA9IHN1aXRlLlRlc3RTdWl0ZQogICAgX3RvcF9sZXZlbF9kaXIgPSBOb25lCgogICAgZGVmIGxvYWRUZXN0c0Zyb21UZXN0Q2FzZShzZWxmLCB0ZXN0Q2FzZUNsYXNzKToKICAgICAgICAiIiJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgY29udGFpbmVkIGluIHRlc3RDYXNlQ2xhc3MiIiIKICAgICAgICBpZiBpc3N1YmNsYXNzKHRlc3RDYXNlQ2xhc3MsIHN1aXRlLlRlc3RTdWl0ZSk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVGVzdCBjYXNlcyBzaG91bGQgbm90IGJlIGRlcml2ZWQgZnJvbSBUZXN0U3VpdGUuIiBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBNYXliZSB5b3UgbWVhbnQgdG8gZGVyaXZlIGZyb20gVGVzdENhc2U/IikKICAgICAgICB0ZXN0Q2FzZU5hbWVzID0gc2VsZi5nZXRUZXN0Q2FzZU5hbWVzKHRlc3RDYXNlQ2xhc3MpCiAgICAgICAgaWYgbm90IHRlc3RDYXNlTmFtZXMgYW5kIGhhc2F0dHIodGVzdENhc2VDbGFzcywgJ3J1blRlc3QnKToKICAgICAgICAgICAgdGVzdENhc2VOYW1lcyA9IFsncnVuVGVzdCddCiAgICAgICAgbG9hZGVkX3N1aXRlID0gc2VsZi5zdWl0ZUNsYXNzKG1hcCh0ZXN0Q2FzZUNsYXNzLCB0ZXN0Q2FzZU5hbWVzKSkKICAgICAgICByZXR1cm4gbG9hZGVkX3N1aXRlCgogICAgZGVmIGxvYWRUZXN0c0Zyb21Nb2R1bGUoc2VsZiwgbW9kdWxlLCB1c2VfbG9hZF90ZXN0cz1UcnVlKToKICAgICAgICAiIiJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgY29udGFpbmVkIGluIHRoZSBnaXZlbiBtb2R1bGUiIiIKICAgICAgICB0ZXN0cyA9IFtdCiAgICAgICAgZm9yIG5hbWUgaW4gZGlyKG1vZHVsZSk6CiAgICAgICAgICAgIG9iaiA9IGdldGF0dHIobW9kdWxlLCBuYW1lKQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgdHlwZSkgYW5kIGlzc3ViY2xhc3Mob2JqLCBjYXNlLlRlc3RDYXNlKToKICAgICAgICAgICAgICAgIHRlc3RzLmFwcGVuZChzZWxmLmxvYWRUZXN0c0Zyb21UZXN0Q2FzZShvYmopKQoKICAgICAgICBsb2FkX3Rlc3RzID0gZ2V0YXR0cihtb2R1bGUsICdsb2FkX3Rlc3RzJywgTm9uZSkKICAgICAgICB0ZXN0cyA9IHNlbGYuc3VpdGVDbGFzcyh0ZXN0cykKICAgICAgICBpZiB1c2VfbG9hZF90ZXN0cyBhbmQgbG9hZF90ZXN0cyBpcyBub3QgTm9uZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIGxvYWRfdGVzdHMoc2VsZiwgdGVzdHMsIE5vbmUpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHJldHVybiBfbWFrZV9mYWlsZWRfbG9hZF90ZXN0cyhtb2R1bGUuX19uYW1lX18sIGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdWl0ZUNsYXNzKQogICAgICAgIHJldHVybiB0ZXN0cwoKICAgIGRlZiBsb2FkVGVzdHNGcm9tTmFtZShzZWxmLCBuYW1lLCBtb2R1bGU9Tm9uZSk6CiAgICAgICAgIiIiUmV0dXJuIGEgc3VpdGUgb2YgYWxsIHRlc3RzIGNhc2VzIGdpdmVuIGEgc3RyaW5nIHNwZWNpZmllci4KCiAgICAgICAgVGhlIG5hbWUgbWF5IHJlc29sdmUgZWl0aGVyIHRvIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYQogICAgICAgIHRlc3QgbWV0aG9kIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2gKICAgICAgICByZXR1cm5zIGEgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLgoKICAgICAgICBUaGUgbWV0aG9kIG9wdGlvbmFsbHkgcmVzb2x2ZXMgdGhlIG5hbWVzIHJlbGF0aXZlIHRvIGEgZ2l2ZW4gbW9kdWxlLgogICAgICAgICIiIgogICAgICAgIHBhcnRzID0gbmFtZS5zcGxpdCgnLicpCiAgICAgICAgaWYgbW9kdWxlIGlzIE5vbmU6CiAgICAgICAgICAgIHBhcnRzX2NvcHkgPSBwYXJ0c1s6XQogICAgICAgICAgICB3aGlsZSBwYXJ0c19jb3B5OgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIG1vZHVsZSA9IF9faW1wb3J0X18oJy4nLmpvaW4ocGFydHNfY29weSkpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgICAgICBkZWwgcGFydHNfY29weVstMV0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgcGFydHNfY29weToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgcGFydHMgPSBwYXJ0c1sxOl0KICAgICAgICBvYmogPSBtb2R1bGUKICAgICAgICBmb3IgcGFydCBpbiBwYXJ0czoKICAgICAgICAgICAgcGFyZW50LCBvYmogPSBvYmosIGdldGF0dHIob2JqLCBwYXJ0KQoKICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgdHlwZXMuTW9kdWxlVHlwZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmxvYWRUZXN0c0Zyb21Nb2R1bGUob2JqKQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShvYmosIHR5cGUpIGFuZCBpc3N1YmNsYXNzKG9iaiwgY2FzZS5UZXN0Q2FzZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmxvYWRUZXN0c0Zyb21UZXN0Q2FzZShvYmopCiAgICAgICAgZWxpZiAoaXNpbnN0YW5jZShvYmosIHR5cGVzLkZ1bmN0aW9uVHlwZSkgYW5kCiAgICAgICAgICAgICAgaXNpbnN0YW5jZShwYXJlbnQsIHR5cGUpIGFuZAogICAgICAgICAgICAgIGlzc3ViY2xhc3MocGFyZW50LCBjYXNlLlRlc3RDYXNlKSk6CiAgICAgICAgICAgIG5hbWUgPSBvYmouX19uYW1lX18KICAgICAgICAgICAgaW5zdCA9IHBhcmVudChuYW1lKQogICAgICAgICAgICAjIHN0YXRpYyBtZXRob2RzIGZvbGxvdyBhIGRpZmZlcmVudCBwYXRoCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGdldGF0dHIoaW5zdCwgbmFtZSksIHR5cGVzLkZ1bmN0aW9uVHlwZSk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5zdWl0ZUNsYXNzKFtpbnN0XSkKICAgICAgICBlbGlmIGlzaW5zdGFuY2Uob2JqLCBzdWl0ZS5UZXN0U3VpdGUpOgogICAgICAgICAgICByZXR1cm4gb2JqCiAgICAgICAgaWYgY2FsbGFibGUob2JqKToKICAgICAgICAgICAgdGVzdCA9IG9iaigpCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodGVzdCwgc3VpdGUuVGVzdFN1aXRlKToKICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0CiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZSh0ZXN0LCBjYXNlLlRlc3RDYXNlKToKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnN1aXRlQ2xhc3MoW3Rlc3RdKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYWxsaW5nICVzIHJldHVybmVkICVzLCBub3QgYSB0ZXN0IiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9iaiwgdGVzdCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJkb24ndCBrbm93IGhvdyB0byBtYWtlIHRlc3QgZnJvbTogJXMiICUgb2JqKQoKICAgIGRlZiBsb2FkVGVzdHNGcm9tTmFtZXMoc2VsZiwgbmFtZXMsIG1vZHVsZT1Ob25lKToKICAgICAgICAiIiJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgZm91bmQgdXNpbmcgdGhlIGdpdmVuIHNlcXVlbmNlCiAgICAgICAgb2Ygc3RyaW5nIHNwZWNpZmllcnMuIFNlZSAnbG9hZFRlc3RzRnJvbU5hbWUoKScuCiAgICAgICAgIiIiCiAgICAgICAgc3VpdGVzID0gW3NlbGYubG9hZFRlc3RzRnJvbU5hbWUobmFtZSwgbW9kdWxlKSBmb3IgbmFtZSBpbiBuYW1lc10KICAgICAgICByZXR1cm4gc2VsZi5zdWl0ZUNsYXNzKHN1aXRlcykKCiAgICBkZWYgZ2V0VGVzdENhc2VOYW1lcyhzZWxmLCB0ZXN0Q2FzZUNsYXNzKToKICAgICAgICAiIiJSZXR1cm4gYSBzb3J0ZWQgc2VxdWVuY2Ugb2YgbWV0aG9kIG5hbWVzIGZvdW5kIHdpdGhpbiB0ZXN0Q2FzZUNsYXNzCiAgICAgICAgIiIiCiAgICAgICAgZGVmIGlzVGVzdE1ldGhvZChhdHRybmFtZSwgdGVzdENhc2VDbGFzcz10ZXN0Q2FzZUNsYXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4PXNlbGYudGVzdE1ldGhvZFByZWZpeCk6CiAgICAgICAgICAgIHJldHVybiBhdHRybmFtZS5zdGFydHN3aXRoKHByZWZpeCkgYW5kIFwKICAgICAgICAgICAgICAgIGNhbGxhYmxlKGdldGF0dHIodGVzdENhc2VDbGFzcywgYXR0cm5hbWUpKQogICAgICAgIHRlc3RGbk5hbWVzID0gbGlzdChmaWx0ZXIoaXNUZXN0TWV0aG9kLCBkaXIodGVzdENhc2VDbGFzcykpKQogICAgICAgIGlmIHNlbGYuc29ydFRlc3RNZXRob2RzVXNpbmc6CiAgICAgICAgICAgIHRlc3RGbk5hbWVzLnNvcnQoa2V5PWZ1bmN0b29scy5jbXBfdG9fa2V5KHNlbGYuc29ydFRlc3RNZXRob2RzVXNpbmcpKQogICAgICAgIHJldHVybiB0ZXN0Rm5OYW1lcwoKICAgIGRlZiBkaXNjb3ZlcihzZWxmLCBzdGFydF9kaXIsIHBhdHRlcm49J3Rlc3QqLnB5JywgdG9wX2xldmVsX2Rpcj1Ob25lKToKICAgICAgICAiIiJGaW5kIGFuZCByZXR1cm4gYWxsIHRlc3QgbW9kdWxlcyBmcm9tIHRoZSBzcGVjaWZpZWQgc3RhcnQKICAgICAgICBkaXJlY3RvcnksIHJlY3Vyc2luZyBpbnRvIHN1YmRpcmVjdG9yaWVzIHRvIGZpbmQgdGhlbSBhbmQgcmV0dXJuIGFsbAogICAgICAgIHRlc3RzIGZvdW5kIHdpdGhpbiB0aGVtLiBPbmx5IHRlc3QgZmlsZXMgdGhhdCBtYXRjaCB0aGUgcGF0dGVybiB3aWxsCiAgICAgICAgYmUgbG9hZGVkLiAoVXNpbmcgc2hlbGwgc3R5bGUgcGF0dGVybiBtYXRjaGluZy4pCgogICAgICAgIEFsbCB0ZXN0IG1vZHVsZXMgbXVzdCBiZSBpbXBvcnRhYmxlIGZyb20gdGhlIHRvcCBsZXZlbCBvZiB0aGUgcHJvamVjdC4KICAgICAgICBJZiB0aGUgc3RhcnQgZGlyZWN0b3J5IGlzIG5vdCB0aGUgdG9wIGxldmVsIGRpcmVjdG9yeSB0aGVuIHRoZSB0b3AKICAgICAgICBsZXZlbCBkaXJlY3RvcnkgbXVzdCBiZSBzcGVjaWZpZWQgc2VwYXJhdGVseS4KCiAgICAgICAgSWYgYSB0ZXN0IHBhY2thZ2UgbmFtZSAoZGlyZWN0b3J5IHdpdGggJ19faW5pdF9fLnB5JykgbWF0Y2hlcyB0aGUKICAgICAgICBwYXR0ZXJuIHRoZW4gdGhlIHBhY2thZ2Ugd2lsbCBiZSBjaGVja2VkIGZvciBhICdsb2FkX3Rlc3RzJyBmdW5jdGlvbi4gSWYKICAgICAgICB0aGlzIGV4aXN0cyB0aGVuIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggbG9hZGVyLCB0ZXN0cywgcGF0dGVybi4KCiAgICAgICAgSWYgbG9hZF90ZXN0cyBleGlzdHMgdGhlbiBkaXNjb3ZlcnkgZG9lcyAgKm5vdCogcmVjdXJzZSBpbnRvIHRoZSBwYWNrYWdlLAogICAgICAgIGxvYWRfdGVzdHMgaXMgcmVzcG9uc2libGUgZm9yIGxvYWRpbmcgYWxsIHRlc3RzIGluIHRoZSBwYWNrYWdlLgoKICAgICAgICBUaGUgcGF0dGVybiBpcyBkZWxpYmVyYXRlbHkgbm90IHN0b3JlZCBhcyBhIGxvYWRlciBhdHRyaWJ1dGUgc28gdGhhdAogICAgICAgIHBhY2thZ2VzIGNhbiBjb250aW51ZSBkaXNjb3ZlcnkgdGhlbXNlbHZlcy4gdG9wX2xldmVsX2RpciBpcyBzdG9yZWQgc28KICAgICAgICBsb2FkX3Rlc3RzIGRvZXMgbm90IG5lZWQgdG8gcGFzcyB0aGlzIGFyZ3VtZW50IGluIHRvIGxvYWRlci5kaXNjb3ZlcigpLgogICAgICAgICIiIgogICAgICAgIHNldF9pbXBsaWNpdF90b3AgPSBGYWxzZQogICAgICAgIGlmIHRvcF9sZXZlbF9kaXIgaXMgTm9uZSBhbmQgc2VsZi5fdG9wX2xldmVsX2RpciBpcyBub3QgTm9uZToKICAgICAgICAgICAgIyBtYWtlIHRvcF9sZXZlbF9kaXIgb3B0aW9uYWwgaWYgY2FsbGVkIGZyb20gbG9hZF90ZXN0cyBpbiBhIHBhY2thZ2UKICAgICAgICAgICAgdG9wX2xldmVsX2RpciA9IHNlbGYuX3RvcF9sZXZlbF9kaXIKICAgICAgICBlbGlmIHRvcF9sZXZlbF9kaXIgaXMgTm9uZToKICAgICAgICAgICAgc2V0X2ltcGxpY2l0X3RvcCA9IFRydWUKICAgICAgICAgICAgdG9wX2xldmVsX2RpciA9IHN0YXJ0X2RpcgoKICAgICAgICB0b3BfbGV2ZWxfZGlyID0gb3MucGF0aC5hYnNwYXRoKHRvcF9sZXZlbF9kaXIpCgogICAgICAgIGlmIG5vdCB0b3BfbGV2ZWxfZGlyIGluIHN5cy5wYXRoOgogICAgICAgICAgICAjIGFsbCB0ZXN0IG1vZHVsZXMgbXVzdCBiZSBpbXBvcnRhYmxlIGZyb20gdGhlIHRvcCBsZXZlbCBkaXJlY3RvcnkKICAgICAgICAgICAgIyBzaG91bGQgd2UgKnVuY29uZGl0aW9uYWxseSogcHV0IHRoZSBzdGFydCBkaXJlY3RvcnkgaW4gZmlyc3QKICAgICAgICAgICAgIyBpbiBzeXMucGF0aCB0byBtaW5pbWlzZSBsaWtlbGlob29kIG9mIGNvbmZsaWN0cyBiZXR3ZWVuIGluc3RhbGxlZAogICAgICAgICAgICAjIG1vZHVsZXMgYW5kIGRldmVsb3BtZW50IHZlcnNpb25zPwogICAgICAgICAgICBzeXMucGF0aC5pbnNlcnQoMCwgdG9wX2xldmVsX2RpcikKICAgICAgICBzZWxmLl90b3BfbGV2ZWxfZGlyID0gdG9wX2xldmVsX2RpcgoKICAgICAgICBpc19ub3RfaW1wb3J0YWJsZSA9IEZhbHNlCiAgICAgICAgaWYgb3MucGF0aC5pc2Rpcihvcy5wYXRoLmFic3BhdGgoc3RhcnRfZGlyKSk6CiAgICAgICAgICAgIHN0YXJ0X2RpciA9IG9zLnBhdGguYWJzcGF0aChzdGFydF9kaXIpCiAgICAgICAgICAgIGlmIHN0YXJ0X2RpciAhPSB0b3BfbGV2ZWxfZGlyOgogICAgICAgICAgICAgICAgaXNfbm90X2ltcG9ydGFibGUgPSBub3Qgb3MucGF0aC5pc2ZpbGUob3MucGF0aC5qb2luKHN0YXJ0X2RpciwgJ19faW5pdF9fLnB5JykpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBzdXBwb3J0IGZvciBkaXNjb3ZlcnkgZnJvbSBkb3R0ZWQgbW9kdWxlIG5hbWVzCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIF9faW1wb3J0X18oc3RhcnRfZGlyKQogICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICBpc19ub3RfaW1wb3J0YWJsZSA9IFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRoZV9tb2R1bGUgPSBzeXMubW9kdWxlc1tzdGFydF9kaXJdCiAgICAgICAgICAgICAgICB0b3BfcGFydCA9IHN0YXJ0X2Rpci5zcGxpdCgnLicpWzBdCiAgICAgICAgICAgICAgICBzdGFydF9kaXIgPSBvcy5wYXRoLmFic3BhdGgob3MucGF0aC5kaXJuYW1lKCh0aGVfbW9kdWxlLl9fZmlsZV9fKSkpCiAgICAgICAgICAgICAgICBpZiBzZXRfaW1wbGljaXRfdG9wOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX3RvcF9sZXZlbF9kaXIgPSBzZWxmLl9nZXRfZGlyZWN0b3J5X2NvbnRhaW5pbmdfbW9kdWxlKHRvcF9wYXJ0KQogICAgICAgICAgICAgICAgICAgIHN5cy5wYXRoLnJlbW92ZSh0b3BfbGV2ZWxfZGlyKQoKICAgICAgICBpZiBpc19ub3RfaW1wb3J0YWJsZToKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoJ1N0YXJ0IGRpcmVjdG9yeSBpcyBub3QgaW1wb3J0YWJsZTogJXInICUgc3RhcnRfZGlyKQoKICAgICAgICB0ZXN0cyA9IGxpc3Qoc2VsZi5fZmluZF90ZXN0cyhzdGFydF9kaXIsIHBhdHRlcm4pKQogICAgICAgIHJldHVybiBzZWxmLnN1aXRlQ2xhc3ModGVzdHMpCgogICAgZGVmIF9nZXRfZGlyZWN0b3J5X2NvbnRhaW5pbmdfbW9kdWxlKHNlbGYsIG1vZHVsZV9uYW1lKToKICAgICAgICBtb2R1bGUgPSBzeXMubW9kdWxlc1ttb2R1bGVfbmFtZV0KICAgICAgICBmdWxsX3BhdGggPSBvcy5wYXRoLmFic3BhdGgobW9kdWxlLl9fZmlsZV9fKQoKICAgICAgICBpZiBvcy5wYXRoLmJhc2VuYW1lKGZ1bGxfcGF0aCkubG93ZXIoKS5zdGFydHN3aXRoKCdfX2luaXRfXy5weScpOgogICAgICAgICAgICByZXR1cm4gb3MucGF0aC5kaXJuYW1lKG9zLnBhdGguZGlybmFtZShmdWxsX3BhdGgpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgaGVyZSB3ZSBoYXZlIGJlZW4gZ2l2ZW4gYSBtb2R1bGUgcmF0aGVyIHRoYW4gYSBwYWNrYWdlIC0gc28KICAgICAgICAgICAgIyBhbGwgd2UgY2FuIGRvIGlzIHNlYXJjaCB0aGUgKnNhbWUqIGRpcmVjdG9yeSB0aGUgbW9kdWxlIGlzIGluCiAgICAgICAgICAgICMgc2hvdWxkIGFuIGV4Y2VwdGlvbiBiZSByYWlzZWQgaW5zdGVhZAogICAgICAgICAgICByZXR1cm4gb3MucGF0aC5kaXJuYW1lKGZ1bGxfcGF0aCkKCiAgICBkZWYgX2dldF9uYW1lX2Zyb21fcGF0aChzZWxmLCBwYXRoKToKICAgICAgICBwYXRoID0gX2p5dGhvbl9hd2FyZV9zcGxpdGV4dChvcy5wYXRoLm5vcm1wYXRoKHBhdGgpKQoKICAgICAgICBfcmVscGF0aCA9IG9zLnBhdGgucmVscGF0aChwYXRoLCBzZWxmLl90b3BfbGV2ZWxfZGlyKQogICAgICAgIGFzc2VydCBub3Qgb3MucGF0aC5pc2FicyhfcmVscGF0aCksICJQYXRoIG11c3QgYmUgd2l0aGluIHRoZSBwcm9qZWN0IgogICAgICAgIGFzc2VydCBub3QgX3JlbHBhdGguc3RhcnRzd2l0aCgnLi4nKSwgIlBhdGggbXVzdCBiZSB3aXRoaW4gdGhlIHByb2plY3QiCgogICAgICAgIG5hbWUgPSBfcmVscGF0aC5yZXBsYWNlKG9zLnBhdGguc2VwLCAnLicpCiAgICAgICAgcmV0dXJuIG5hbWUKCiAgICBkZWYgX2dldF9tb2R1bGVfZnJvbV9uYW1lKHNlbGYsIG5hbWUpOgogICAgICAgIF9faW1wb3J0X18obmFtZSkKICAgICAgICByZXR1cm4gc3lzLm1vZHVsZXNbbmFtZV0KCiAgICBkZWYgX21hdGNoX3BhdGgoc2VsZiwgcGF0aCwgZnVsbF9wYXRoLCBwYXR0ZXJuKToKICAgICAgICAjIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIHVzZSBhbHRlcm5hdGl2ZSBtYXRjaGluZyBzdHJhdGVneQogICAgICAgIHJldHVybiBmbm1hdGNoKHBhdGgsIHBhdHRlcm4pCgogICAgZGVmIF9maW5kX3Rlc3RzKHNlbGYsIHN0YXJ0X2RpciwgcGF0dGVybik6CiAgICAgICAgIiIiVXNlZCBieSBkaXNjb3ZlcnkuIFlpZWxkcyB0ZXN0IHN1aXRlcyBpdCBsb2Fkcy4iIiIKICAgICAgICBwYXRocyA9IG9zLmxpc3RkaXIoc3RhcnRfZGlyKQoKICAgICAgICBmb3IgcGF0aCBpbiBwYXRoczoKICAgICAgICAgICAgZnVsbF9wYXRoID0gb3MucGF0aC5qb2luKHN0YXJ0X2RpciwgcGF0aCkKICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUoZnVsbF9wYXRoKToKICAgICAgICAgICAgICAgIGlmIG5vdCBWQUxJRF9NT0RVTEVfTkFNRS5tYXRjaChwYXRoKToKICAgICAgICAgICAgICAgICAgICAjIHZhbGlkIFB5dGhvbiBpZGVudGlmaWVycyBvbmx5CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9tYXRjaF9wYXRoKHBhdGgsIGZ1bGxfcGF0aCwgcGF0dGVybik6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICMgaWYgdGhlIHRlc3QgZmlsZSBtYXRjaGVzLCBsb2FkIGl0CiAgICAgICAgICAgICAgICBuYW1lID0gc2VsZi5fZ2V0X25hbWVfZnJvbV9wYXRoKGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBtb2R1bGUgPSBzZWxmLl9nZXRfbW9kdWxlX2Zyb21fbmFtZShuYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2ZhaWxlZF9pbXBvcnRfdGVzdChuYW1lLCBzZWxmLnN1aXRlQ2xhc3MpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG1vZF9maWxlID0gb3MucGF0aC5hYnNwYXRoKGdldGF0dHIobW9kdWxlLCAnX19maWxlX18nLCBmdWxsX3BhdGgpKQogICAgICAgICAgICAgICAgICAgIHJlYWxwYXRoID0gX2p5dGhvbl9hd2FyZV9zcGxpdGV4dChtb2RfZmlsZSkKICAgICAgICAgICAgICAgICAgICBmdWxscGF0aF9ub2V4dCA9IF9qeXRob25fYXdhcmVfc3BsaXRleHQoZnVsbF9wYXRoKQogICAgICAgICAgICAgICAgICAgIGlmIHJlYWxwYXRoLmxvd2VyKCkgIT0gZnVsbHBhdGhfbm9leHQubG93ZXIoKToKICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlX2RpciA9IG9zLnBhdGguZGlybmFtZShyZWFscGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgbW9kX25hbWUgPSBfanl0aG9uX2F3YXJlX3NwbGl0ZXh0KG9zLnBhdGguYmFzZW5hbWUoZnVsbF9wYXRoKSkKICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfZGlyID0gb3MucGF0aC5kaXJuYW1lKGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gKCIlciBtb2R1bGUgaW5jb3JyZWN0bHkgaW1wb3J0ZWQgZnJvbSAlci4gRXhwZWN0ZWQgJXIuICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJcyB0aGlzIG1vZHVsZSBnbG9iYWxseSBpbnN0YWxsZWQ/IikKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IobXNnICUgKG1vZF9uYW1lLCBtb2R1bGVfZGlyLCBleHBlY3RlZF9kaXIpKQogICAgICAgICAgICAgICAgICAgIHlpZWxkIHNlbGYubG9hZFRlc3RzRnJvbU1vZHVsZShtb2R1bGUpCiAgICAgICAgICAgIGVsaWYgb3MucGF0aC5pc2RpcihmdWxsX3BhdGgpOgogICAgICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguaXNmaWxlKG9zLnBhdGguam9pbihmdWxsX3BhdGgsICdfX2luaXRfXy5weScpKToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIGxvYWRfdGVzdHMgPSBOb25lCiAgICAgICAgICAgICAgICB0ZXN0cyA9IE5vbmUKICAgICAgICAgICAgICAgIGlmIGZubWF0Y2gocGF0aCwgcGF0dGVybik6CiAgICAgICAgICAgICAgICAgICAgIyBvbmx5IGNoZWNrIGxvYWRfdGVzdHMgaWYgdGhlIHBhY2thZ2UgZGlyZWN0b3J5IGl0c2VsZiBtYXRjaGVzIHRoZSBmaWx0ZXIKICAgICAgICAgICAgICAgICAgICBuYW1lID0gc2VsZi5fZ2V0X25hbWVfZnJvbV9wYXRoKGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgICAgICBwYWNrYWdlID0gc2VsZi5fZ2V0X21vZHVsZV9mcm9tX25hbWUobmFtZSkKICAgICAgICAgICAgICAgICAgICBsb2FkX3Rlc3RzID0gZ2V0YXR0cihwYWNrYWdlLCAnbG9hZF90ZXN0cycsIE5vbmUpCiAgICAgICAgICAgICAgICAgICAgdGVzdHMgPSBzZWxmLmxvYWRUZXN0c0Zyb21Nb2R1bGUocGFja2FnZSwgdXNlX2xvYWRfdGVzdHM9RmFsc2UpCgogICAgICAgICAgICAgICAgaWYgbG9hZF90ZXN0cyBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgIGlmIHRlc3RzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAjIHRlc3RzIGxvYWRlZCBmcm9tIHBhY2thZ2UgZmlsZQogICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0ZXN0cwogICAgICAgICAgICAgICAgICAgICMgcmVjdXJzZSBpbnRvIHRoZSBwYWNrYWdlCiAgICAgICAgICAgICAgICAgICAgZm9yIHRlc3QgaW4gc2VsZi5fZmluZF90ZXN0cyhmdWxsX3BhdGgsIHBhdHRlcm4pOgogICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0ZXN0CiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgbG9hZF90ZXN0cyhzZWxmLCB0ZXN0cywgcGF0dGVybikKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2ZhaWxlZF9sb2FkX3Rlc3RzKHBhY2thZ2UuX19uYW1lX18sIGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3VpdGVDbGFzcykKCmRlZmF1bHRUZXN0TG9hZGVyID0gVGVzdExvYWRlcigpCgoKZGVmIF9tYWtlTG9hZGVyKHByZWZpeCwgc29ydFVzaW5nLCBzdWl0ZUNsYXNzPU5vbmUpOgogICAgbG9hZGVyID0gVGVzdExvYWRlcigpCiAgICBsb2FkZXIuc29ydFRlc3RNZXRob2RzVXNpbmcgPSBzb3J0VXNpbmcKICAgIGxvYWRlci50ZXN0TWV0aG9kUHJlZml4ID0gcHJlZml4CiAgICBpZiBzdWl0ZUNsYXNzOgogICAgICAgIGxvYWRlci5zdWl0ZUNsYXNzID0gc3VpdGVDbGFzcwogICAgcmV0dXJuIGxvYWRlcgoKZGVmIGdldFRlc3RDYXNlTmFtZXModGVzdENhc2VDbGFzcywgcHJlZml4LCBzb3J0VXNpbmc9dXRpbC50aHJlZV93YXlfY21wKToKICAgIHJldHVybiBfbWFrZUxvYWRlcihwcmVmaXgsIHNvcnRVc2luZykuZ2V0VGVzdENhc2VOYW1lcyh0ZXN0Q2FzZUNsYXNzKQoKZGVmIG1ha2VTdWl0ZSh0ZXN0Q2FzZUNsYXNzLCBwcmVmaXg9J3Rlc3QnLCBzb3J0VXNpbmc9dXRpbC50aHJlZV93YXlfY21wLAogICAgICAgICAgICAgIHN1aXRlQ2xhc3M9c3VpdGUuVGVzdFN1aXRlKToKICAgIHJldHVybiBfbWFrZUxvYWRlcihwcmVmaXgsIHNvcnRVc2luZywgc3VpdGVDbGFzcykubG9hZFRlc3RzRnJvbVRlc3RDYXNlKAogICAgICAgIHRlc3RDYXNlQ2xhc3MpCgpkZWYgZmluZFRlc3RDYXNlcyhtb2R1bGUsIHByZWZpeD0ndGVzdCcsIHNvcnRVc2luZz11dGlsLnRocmVlX3dheV9jbXAsCiAgICAgICAgICAgICAgICAgIHN1aXRlQ2xhc3M9c3VpdGUuVGVzdFN1aXRlKToKICAgIHJldHVybiBfbWFrZUxvYWRlcihwcmVmaXgsIHNvcnRVc2luZywgc3VpdGVDbGFzcykubG9hZFRlc3RzRnJvbU1vZHVsZShcCiAgICAgICAgbW9kdWxlKQo=',
'/Lib/unittest/signals.py':'aW1wb3J0IHNpZ25hbA0KaW1wb3J0IHdlYWtyZWYNCg0KZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHdyYXBzDQoNCl9fdW5pdHRlc3QgPSBUcnVlDQoNCg0KY2xhc3MgX0ludGVycnVwdEhhbmRsZXIob2JqZWN0KToNCiAgICBkZWYgX19pbml0X18oc2VsZiwgZGVmYXVsdF9oYW5kbGVyKToNCiAgICAgICAgc2VsZi5jYWxsZWQgPSBGYWxzZQ0KICAgICAgICBzZWxmLmRlZmF1bHRfaGFuZGxlciA9IGRlZmF1bHRfaGFuZGxlcg0KDQogICAgZGVmIF9fY2FsbF9fKHNlbGYsIHNpZ251bSwgZnJhbWUpOg0KICAgICAgICBpbnN0YWxsZWRfaGFuZGxlciA9IHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCkNCiAgICAgICAgaWYgaW5zdGFsbGVkX2hhbmRsZXIgaXMgbm90IHNlbGY6DQogICAgICAgICAgICAjIGlmIHdlIGFyZW4ndCB0aGUgaW5zdGFsbGVkIGhhbmRsZXIsIHRoZW4gZGVsZWdhdGUgaW1tZWRpYXRlbHkNCiAgICAgICAgICAgICMgdG8gdGhlIGRlZmF1bHQgaGFuZGxlcg0KICAgICAgICAgICAgc2VsZi5kZWZhdWx0X2hhbmRsZXIoc2lnbnVtLCBmcmFtZSkNCg0KICAgICAgICBpZiBzZWxmLmNhbGxlZDoNCiAgICAgICAgICAgIHNlbGYuZGVmYXVsdF9oYW5kbGVyKHNpZ251bSwgZnJhbWUpDQogICAgICAgIHNlbGYuY2FsbGVkID0gVHJ1ZQ0KICAgICAgICBmb3IgcmVzdWx0IGluIF9yZXN1bHRzLmtleXMoKToNCiAgICAgICAgICAgIHJlc3VsdC5zdG9wKCkNCg0KX3Jlc3VsdHMgPSB3ZWFrcmVmLldlYWtLZXlEaWN0aW9uYXJ5KCkNCmRlZiByZWdpc3RlclJlc3VsdChyZXN1bHQpOg0KICAgIF9yZXN1bHRzW3Jlc3VsdF0gPSAxDQoNCmRlZiByZW1vdmVSZXN1bHQocmVzdWx0KToNCiAgICByZXR1cm4gYm9vbChfcmVzdWx0cy5wb3AocmVzdWx0LCBOb25lKSkNCg0KX2ludGVycnVwdF9oYW5kbGVyID0gTm9uZQ0KZGVmIGluc3RhbGxIYW5kbGVyKCk6DQogICAgZ2xvYmFsIF9pbnRlcnJ1cHRfaGFuZGxlcg0KICAgIGlmIF9pbnRlcnJ1cHRfaGFuZGxlciBpcyBOb25lOg0KICAgICAgICBkZWZhdWx0X2hhbmRsZXIgPSBzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpDQogICAgICAgIF9pbnRlcnJ1cHRfaGFuZGxlciA9IF9JbnRlcnJ1cHRIYW5kbGVyKGRlZmF1bHRfaGFuZGxlcikNCiAgICAgICAgc2lnbmFsLnNpZ25hbChzaWduYWwuU0lHSU5ULCBfaW50ZXJydXB0X2hhbmRsZXIpDQoNCg0KZGVmIHJlbW92ZUhhbmRsZXIobWV0aG9kPU5vbmUpOg0KICAgIGlmIG1ldGhvZCBpcyBub3QgTm9uZToNCiAgICAgICAgQHdyYXBzKG1ldGhvZCkNCiAgICAgICAgZGVmIGlubmVyKCphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICAgICBpbml0aWFsID0gc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKQ0KICAgICAgICAgICAgcmVtb3ZlSGFuZGxlcigpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgcmV0dXJuIG1ldGhvZCgqYXJncywgKiprd2FyZ3MpDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHNpZ25hbC5zaWduYWwoc2lnbmFsLlNJR0lOVCwgaW5pdGlhbCkNCiAgICAgICAgcmV0dXJuIGlubmVyDQoNCiAgICBnbG9iYWwgX2ludGVycnVwdF9oYW5kbGVyDQogICAgaWYgX2ludGVycnVwdF9oYW5kbGVyIGlzIG5vdCBOb25lOg0KICAgICAgICBzaWduYWwuc2lnbmFsKHNpZ25hbC5TSUdJTlQsIF9pbnRlcnJ1cHRfaGFuZGxlci5kZWZhdWx0X2hhbmRsZXIpDQo=',
'/Lib/unittest/case.py':'IiIiVGVzdCBjYXNlIGltcGxlbWVudGF0aW9uIiIiCgppbXBvcnQgc3lzCmltcG9ydCBmdW5jdG9vbHMKaW1wb3J0IGRpZmZsaWIKaW1wb3J0IHBwcmludAppbXBvcnQgcmUKaW1wb3J0IHdhcm5pbmdzCmltcG9ydCBjb2xsZWN0aW9ucwoKZnJvbSAuIGltcG9ydCByZXN1bHQKZnJvbSAudXRpbCBpbXBvcnQgKHN0cmNsYXNzLCBzYWZlX3JlcHIsIF9jb3VudF9kaWZmX2FsbF9wdXJwb3NlLAogICAgICAgICAgICAgICAgICAgX2NvdW50X2RpZmZfaGFzaGFibGUpCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKCkRJRkZfT01JVFRFRCA9ICgnXG5EaWZmIGlzICVzIGNoYXJhY3RlcnMgbG9uZy4gJwogICAgICAgICAgICAgICAgICdTZXQgc2VsZi5tYXhEaWZmIHRvIE5vbmUgdG8gc2VlIGl0LicpCgpjbGFzcyBTa2lwVGVzdChFeGNlcHRpb24pOgogICAgIiIiCiAgICBSYWlzZSB0aGlzIGV4Y2VwdGlvbiBpbiBhIHRlc3QgdG8gc2tpcCBpdC4KCiAgICBVc3VhbGx5IHlvdSBjYW4gdXNlIFRlc3RSZXN1bHQuc2tpcCgpIG9yIG9uZSBvZiB0aGUgc2tpcHBpbmcgZGVjb3JhdG9ycwogICAgaW5zdGVhZCBvZiByYWlzaW5nIHRoaXMgZGlyZWN0bHkuCiAgICAiIiIKCmNsYXNzIF9FeHBlY3RlZEZhaWx1cmUoRXhjZXB0aW9uKToKICAgICIiIgogICAgUmFpc2UgdGhpcyB3aGVuIGEgdGVzdCBpcyBleHBlY3RlZCB0byBmYWlsLgoKICAgIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlsLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGV4Y19pbmZvKToKICAgICAgICBzdXBlcihfRXhwZWN0ZWRGYWlsdXJlLCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5leGNfaW5mbyA9IGV4Y19pbmZvCgpjbGFzcyBfVW5leHBlY3RlZFN1Y2Nlc3MoRXhjZXB0aW9uKToKICAgICIiIgogICAgVGhlIHRlc3Qgd2FzIHN1cHBvc2VkIHRvIGZhaWwsIGJ1dCBpdCBkaWRuJ3QhCiAgICAiIiIKCgpjbGFzcyBfT3V0Y29tZShvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuc3VjY2VzcyA9IFRydWUKICAgICAgICBzZWxmLnNraXBwZWQgPSBOb25lCiAgICAgICAgc2VsZi51bmV4cGVjdGVkU3VjY2VzcyA9IE5vbmUKICAgICAgICBzZWxmLmV4cGVjdGVkRmFpbHVyZSA9IE5vbmUKICAgICAgICBzZWxmLmVycm9ycyA9IFtdCiAgICAgICAgc2VsZi5mYWlsdXJlcyA9IFtdCgoKZGVmIF9pZChvYmopOgogICAgcmV0dXJuIG9iagoKZGVmIHNraXAocmVhc29uKToKICAgICIiIgogICAgVW5jb25kaXRpb25hbGx5IHNraXAgYSB0ZXN0LgogICAgIiIiCiAgICBkZWYgZGVjb3JhdG9yKHRlc3RfaXRlbSk6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodGVzdF9pdGVtLCB0eXBlKToKICAgICAgICAgICAgQGZ1bmN0b29scy53cmFwcyh0ZXN0X2l0ZW0pCiAgICAgICAgICAgIGRlZiBza2lwX3dyYXBwZXIoKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAgICAgICAgIHJhaXNlIFNraXBUZXN0KHJlYXNvbikKICAgICAgICAgICAgdGVzdF9pdGVtID0gc2tpcF93cmFwcGVyCgogICAgICAgIHRlc3RfaXRlbS5fX3VuaXR0ZXN0X3NraXBfXyA9IFRydWUKICAgICAgICB0ZXN0X2l0ZW0uX191bml0dGVzdF9za2lwX3doeV9fID0gcmVhc29uCiAgICAgICAgcmV0dXJuIHRlc3RfaXRlbQogICAgcmV0dXJuIGRlY29yYXRvcgoKZGVmIHNraXBJZihjb25kaXRpb24sIHJlYXNvbik6CiAgICAiIiIKICAgIFNraXAgYSB0ZXN0IGlmIHRoZSBjb25kaXRpb24gaXMgdHJ1ZS4KICAgICIiIgogICAgaWYgY29uZGl0aW9uOgogICAgICAgIHJldHVybiBza2lwKHJlYXNvbikKICAgIHJldHVybiBfaWQKCmRlZiBza2lwVW5sZXNzKGNvbmRpdGlvbiwgcmVhc29uKToKICAgICIiIgogICAgU2tpcCBhIHRlc3QgdW5sZXNzIHRoZSBjb25kaXRpb24gaXMgdHJ1ZS4KICAgICIiIgogICAgaWYgbm90IGNvbmRpdGlvbjoKICAgICAgICByZXR1cm4gc2tpcChyZWFzb24pCiAgICByZXR1cm4gX2lkCgoKZGVmIGV4cGVjdGVkRmFpbHVyZShmdW5jKToKICAgIEBmdW5jdG9vbHMud3JhcHMoZnVuYykKICAgIGRlZiB3cmFwcGVyKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmdW5jKCphcmdzLCAqKmt3YXJncykKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByYWlzZSBfRXhwZWN0ZWRGYWlsdXJlKHN5cy5leGNfaW5mbygpKQogICAgICAgIHJhaXNlIF9VbmV4cGVjdGVkU3VjY2VzcwogICAgcmV0dXJuIHdyYXBwZXIKCgpjbGFzcyBfQXNzZXJ0UmFpc2VzQmFzZUNvbnRleHQob2JqZWN0KToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgZXhwZWN0ZWQsIHRlc3RfY2FzZSwgY2FsbGFibGVfb2JqPU5vbmUsCiAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXg9Tm9uZSk6CiAgICAgICAgc2VsZi5leHBlY3RlZCA9IGV4cGVjdGVkCiAgICAgICAgc2VsZi50ZXN0X2Nhc2UgPSB0ZXN0X2Nhc2UKICAgICAgICBpZiBjYWxsYWJsZV9vYmogaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYub2JqX25hbWUgPSBjYWxsYWJsZV9vYmouX19uYW1lX18KICAgICAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICAgICAgc2VsZi5vYmpfbmFtZSA9IHN0cihjYWxsYWJsZV9vYmopCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5vYmpfbmFtZSA9IE5vbmUKICAgICAgICBpZiBpc2luc3RhbmNlKGV4cGVjdGVkX3JlZ2V4LCAoYnl0ZXMsIHN0cikpOgogICAgICAgICAgICBleHBlY3RlZF9yZWdleCA9IHJlLmNvbXBpbGUoZXhwZWN0ZWRfcmVnZXgpCiAgICAgICAgc2VsZi5leHBlY3RlZF9yZWdleCA9IGV4cGVjdGVkX3JlZ2V4CiAgICAgICAgc2VsZi5tc2cgPSBOb25lCgogICAgZGVmIF9yYWlzZUZhaWx1cmUoc2VsZiwgc3RhbmRhcmRNc2cpOgogICAgICAgIG1zZyA9IHNlbGYudGVzdF9jYXNlLl9mb3JtYXRNZXNzYWdlKHNlbGYubXNnLCBzdGFuZGFyZE1zZykKICAgICAgICByYWlzZSBzZWxmLnRlc3RfY2FzZS5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgaGFuZGxlKHNlbGYsIG5hbWUsIGNhbGxhYmxlX29iaiwgYXJncywga3dhcmdzKToKICAgICAgICAiIiIKICAgICAgICBJZiBjYWxsYWJsZV9vYmogaXMgTm9uZSwgYXNzZXJ0UmFpc2VzL1dhcm5zIGlzIGJlaW5nIHVzZWQgYXMgYQogICAgICAgIGNvbnRleHQgbWFuYWdlciwgc28gY2hlY2sgZm9yIGEgJ21zZycga3dhcmcgYW5kIHJldHVybiBzZWxmLgogICAgICAgIElmIGNhbGxhYmxlX29iaiBpcyBub3QgTm9uZSwgY2FsbCBpdCBwYXNzaW5nIGFyZ3MgYW5kIGt3YXJncy4KICAgICAgICAiIiIKICAgICAgICBpZiBjYWxsYWJsZV9vYmogaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5tc2cgPSBrd2FyZ3MucG9wKCdtc2cnLCBOb25lKQogICAgICAgICAgICByZXR1cm4gc2VsZgogICAgICAgIHdpdGggc2VsZjoKICAgICAgICAgICAgY2FsbGFibGVfb2JqKCphcmdzLCAqKmt3YXJncykKCgoKY2xhc3MgX0Fzc2VydFJhaXNlc0NvbnRleHQoX0Fzc2VydFJhaXNlc0Jhc2VDb250ZXh0KToKICAgICIiIkEgY29udGV4dCBtYW5hZ2VyIHVzZWQgdG8gaW1wbGVtZW50IFRlc3RDYXNlLmFzc2VydFJhaXNlcyogbWV0aG9kcy4iIiIKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIGV4Y190eXBlLCBleGNfdmFsdWUsIHRiKToKICAgICAgICBpZiBleGNfdHlwZSBpcyBOb25lOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBleGNfbmFtZSA9IHNlbGYuZXhwZWN0ZWQuX19uYW1lX18KICAgICAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICAgICAgZXhjX25hbWUgPSBzdHIoc2VsZi5leHBlY3RlZCkKICAgICAgICAgICAgaWYgc2VsZi5vYmpfbmFtZToKICAgICAgICAgICAgICAgIHNlbGYuX3JhaXNlRmFpbHVyZSgie30gbm90IHJhaXNlZCBieSB7fSIuZm9ybWF0KGV4Y19uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vYmpfbmFtZSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLl9yYWlzZUZhaWx1cmUoInt9IG5vdCByYWlzZWQiLmZvcm1hdChleGNfbmFtZSkpCiAgICAgICAgaWYgbm90IGlzc3ViY2xhc3MoZXhjX3R5cGUsIHNlbGYuZXhwZWN0ZWQpOgogICAgICAgICAgICAjIGxldCB1bmV4cGVjdGVkIGV4Y2VwdGlvbnMgcGFzcyB0aHJvdWdoCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICMgc3RvcmUgZXhjZXB0aW9uLCB3aXRob3V0IHRyYWNlYmFjaywgZm9yIGxhdGVyIHJldHJpZXZhbAogICAgICAgIHNlbGYuZXhjZXB0aW9uID0gZXhjX3ZhbHVlLndpdGhfdHJhY2ViYWNrKE5vbmUpCiAgICAgICAgaWYgc2VsZi5leHBlY3RlZF9yZWdleCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgICAgICBleHBlY3RlZF9yZWdleCA9IHNlbGYuZXhwZWN0ZWRfcmVnZXgKICAgICAgICBpZiBub3QgZXhwZWN0ZWRfcmVnZXguc2VhcmNoKHN0cihleGNfdmFsdWUpKToKICAgICAgICAgICAgc2VsZi5fcmFpc2VGYWlsdXJlKCcie30iIGRvZXMgbm90IG1hdGNoICJ7fSInLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXgucGF0dGVybiwgc3RyKGV4Y192YWx1ZSkpKQogICAgICAgIHJldHVybiBUcnVlCgoKY2xhc3MgX0Fzc2VydFdhcm5zQ29udGV4dChfQXNzZXJ0UmFpc2VzQmFzZUNvbnRleHQpOgogICAgIiIiQSBjb250ZXh0IG1hbmFnZXIgdXNlZCB0byBpbXBsZW1lbnQgVGVzdENhc2UuYXNzZXJ0V2FybnMqIG1ldGhvZHMuIiIiCgogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToKICAgICAgICAjIFRoZSBfX3dhcm5pbmdyZWdpc3RyeV9fJ3MgbmVlZCB0byBiZSBpbiBhIHByaXN0aW5lIHN0YXRlIGZvciB0ZXN0cwogICAgICAgICMgdG8gd29yayBwcm9wZXJseS4KICAgICAgICBmb3IgdiBpbiBzeXMubW9kdWxlcy52YWx1ZXMoKToKICAgICAgICAgICAgaWYgZ2V0YXR0cih2LCAnX193YXJuaW5ncmVnaXN0cnlfXycsIE5vbmUpOgogICAgICAgICAgICAgICAgdi5fX3dhcm5pbmdyZWdpc3RyeV9fID0ge30KICAgICAgICBzZWxmLndhcm5pbmdzX21hbmFnZXIgPSB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncyhyZWNvcmQ9VHJ1ZSkKICAgICAgICBzZWxmLndhcm5pbmdzID0gc2VsZi53YXJuaW5nc19tYW5hZ2VyLl9fZW50ZXJfXygpCiAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJhbHdheXMiLCBzZWxmLmV4cGVjdGVkKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIGV4Y190eXBlLCBleGNfdmFsdWUsIHRiKToKICAgICAgICBzZWxmLndhcm5pbmdzX21hbmFnZXIuX19leGl0X18oZXhjX3R5cGUsIGV4Y192YWx1ZSwgdGIpCiAgICAgICAgaWYgZXhjX3R5cGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICMgbGV0IHVuZXhwZWN0ZWQgZXhjZXB0aW9ucyBwYXNzIHRocm91Z2gKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgdHJ5OgogICAgICAgICAgICBleGNfbmFtZSA9IHNlbGYuZXhwZWN0ZWQuX19uYW1lX18KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIGV4Y19uYW1lID0gc3RyKHNlbGYuZXhwZWN0ZWQpCiAgICAgICAgZmlyc3RfbWF0Y2hpbmcgPSBOb25lCiAgICAgICAgZm9yIG0gaW4gc2VsZi53YXJuaW5nczoKICAgICAgICAgICAgdyA9IG0ubWVzc2FnZQogICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh3LCBzZWxmLmV4cGVjdGVkKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGZpcnN0X21hdGNoaW5nIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBmaXJzdF9tYXRjaGluZyA9IHcKICAgICAgICAgICAgaWYgKHNlbGYuZXhwZWN0ZWRfcmVnZXggaXMgbm90IE5vbmUgYW5kCiAgICAgICAgICAgICAgICBub3Qgc2VsZi5leHBlY3RlZF9yZWdleC5zZWFyY2goc3RyKHcpKSk6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAjIHN0b3JlIHdhcm5pbmcgZm9yIGxhdGVyIHJldHJpZXZhbAogICAgICAgICAgICBzZWxmLndhcm5pbmcgPSB3CiAgICAgICAgICAgIHNlbGYuZmlsZW5hbWUgPSBtLmZpbGVuYW1lCiAgICAgICAgICAgIHNlbGYubGluZW5vID0gbS5saW5lbm8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgIyBOb3cgd2Ugc2ltcGx5IHRyeSB0byBjaG9vc2UgYSBoZWxwZnVsIGZhaWx1cmUgbWVzc2FnZQogICAgICAgIGlmIGZpcnN0X21hdGNoaW5nIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLl9yYWlzZUZhaWx1cmUoJyJ7fSIgZG9lcyBub3QgbWF0Y2ggInt9IicuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICBzZWxmLmV4cGVjdGVkX3JlZ2V4LnBhdHRlcm4sIHN0cihmaXJzdF9tYXRjaGluZykpKQogICAgICAgIGlmIHNlbGYub2JqX25hbWU6CiAgICAgICAgICAgIHNlbGYuX3JhaXNlRmFpbHVyZSgie30gbm90IHRyaWdnZXJlZCBieSB7fSIuZm9ybWF0KGV4Y19uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9ial9uYW1lKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9yYWlzZUZhaWx1cmUoInt9IG5vdCB0cmlnZ2VyZWQiLmZvcm1hdChleGNfbmFtZSkpCgoKY2xhc3MgVGVzdENhc2Uob2JqZWN0KToKICAgICIiIkEgY2xhc3Mgd2hvc2UgaW5zdGFuY2VzIGFyZSBzaW5nbGUgdGVzdCBjYXNlcy4KCiAgICBCeSBkZWZhdWx0LCB0aGUgdGVzdCBjb2RlIGl0c2VsZiBzaG91bGQgYmUgcGxhY2VkIGluIGEgbWV0aG9kIG5hbWVkCiAgICAncnVuVGVzdCcuCgogICAgSWYgdGhlIGZpeHR1cmUgbWF5IGJlIHVzZWQgZm9yIG1hbnkgdGVzdCBjYXNlcywgY3JlYXRlIGFzCiAgICBtYW55IHRlc3QgbWV0aG9kcyBhcyBhcmUgbmVlZGVkLiBXaGVuIGluc3RhbnRpYXRpbmcgc3VjaCBhIFRlc3RDYXNlCiAgICBzdWJjbGFzcywgc3BlY2lmeSBpbiB0aGUgY29uc3RydWN0b3IgYXJndW1lbnRzIHRoZSBuYW1lIG9mIHRoZSB0ZXN0IG1ldGhvZAogICAgdGhhdCB0aGUgaW5zdGFuY2UgaXMgdG8gZXhlY3V0ZS4KCiAgICBUZXN0IGF1dGhvcnMgc2hvdWxkIHN1YmNsYXNzIFRlc3RDYXNlIGZvciB0aGVpciBvd24gdGVzdHMuIENvbnN0cnVjdGlvbgogICAgYW5kIGRlY29uc3RydWN0aW9uIG9mIHRoZSB0ZXN0J3MgZW52aXJvbm1lbnQgKCdmaXh0dXJlJykgY2FuIGJlCiAgICBpbXBsZW1lbnRlZCBieSBvdmVycmlkaW5nIHRoZSAnc2V0VXAnIGFuZCAndGVhckRvd24nIG1ldGhvZHMgcmVzcGVjdGl2ZWx5LgoKICAgIElmIGl0IGlzIG5lY2Vzc2FyeSB0byBvdmVycmlkZSB0aGUgX19pbml0X18gbWV0aG9kLCB0aGUgYmFzZSBjbGFzcwogICAgX19pbml0X18gbWV0aG9kIG11c3QgYWx3YXlzIGJlIGNhbGxlZC4gSXQgaXMgaW1wb3J0YW50IHRoYXQgc3ViY2xhc3NlcwogICAgc2hvdWxkIG5vdCBjaGFuZ2UgdGhlIHNpZ25hdHVyZSBvZiB0aGVpciBfX2luaXRfXyBtZXRob2QsIHNpbmNlIGluc3RhbmNlcwogICAgb2YgdGhlIGNsYXNzZXMgYXJlIGluc3RhbnRpYXRlZCBhdXRvbWF0aWNhbGx5IGJ5IHBhcnRzIG9mIHRoZSBmcmFtZXdvcmsKICAgIGluIG9yZGVyIHRvIGJlIHJ1bi4KICAgICIiIgoKICAgICMgVGhpcyBhdHRyaWJ1dGUgZGV0ZXJtaW5lcyB3aGljaCBleGNlcHRpb24gd2lsbCBiZSByYWlzZWQgd2hlbgogICAgIyB0aGUgaW5zdGFuY2UncyBhc3NlcnRpb24gbWV0aG9kcyBmYWlsOyB0ZXN0IG1ldGhvZHMgcmFpc2luZyB0aGlzCiAgICAjIGV4Y2VwdGlvbiB3aWxsIGJlIGRlZW1lZCB0byBoYXZlICdmYWlsZWQnIHJhdGhlciB0aGFuICdlcnJvcmVkJwoKICAgIGZhaWx1cmVFeGNlcHRpb24gPSBBc3NlcnRpb25FcnJvcgoKICAgICMgVGhpcyBhdHRyaWJ1dGUgZGV0ZXJtaW5lcyB3aGV0aGVyIGxvbmcgbWVzc2FnZXMgKGluY2x1ZGluZyByZXByIG9mCiAgICAjIG9iamVjdHMgdXNlZCBpbiBhc3NlcnQgbWV0aG9kcykgd2lsbCBiZSBwcmludGVkIG9uIGZhaWx1cmUgaW4gKmFkZGl0aW9uKgogICAgIyB0byBhbnkgZXhwbGljaXQgbWVzc2FnZSBwYXNzZWQuCgogICAgbG9uZ01lc3NhZ2UgPSBUcnVlCgogICAgIyBUaGlzIGF0dHJpYnV0ZSBzZXRzIHRoZSBtYXhpbXVtIGxlbmd0aCBvZiBhIGRpZmYgaW4gZmFpbHVyZSBtZXNzYWdlcwogICAgIyBieSBhc3NlcnQgbWV0aG9kcyB1c2luZyBkaWZmbGliLiBJdCBpcyBsb29rZWQgdXAgYXMgYW4gaW5zdGFuY2UgYXR0cmlidXRlCiAgICAjIHNvIGNhbiBiZSBjb25maWd1cmVkIGJ5IGluZGl2aWR1YWwgdGVzdHMgaWYgcmVxdWlyZWQuCgogICAgbWF4RGlmZiA9IDgwKjgKCiAgICAjIElmIGEgc3RyaW5nIGlzIGxvbmdlciB0aGFuIF9kaWZmVGhyZXNob2xkLCB1c2Ugbm9ybWFsIGNvbXBhcmlzb24gaW5zdGVhZAogICAgIyBvZiBkaWZmbGliLiAgU2VlICMxMTc2My4KICAgIF9kaWZmVGhyZXNob2xkID0gMioqMTYKCiAgICAjIEF0dHJpYnV0ZSB1c2VkIGJ5IFRlc3RTdWl0ZSBmb3IgY2xhc3NTZXRVcAoKICAgIF9jbGFzc1NldHVwRmFpbGVkID0gRmFsc2UKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbWV0aG9kTmFtZT0ncnVuVGVzdCcpOgogICAgICAgICIiIkNyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgY2xhc3MgdGhhdCB3aWxsIHVzZSB0aGUgbmFtZWQgdGVzdAogICAgICAgICAgIG1ldGhvZCB3aGVuIGV4ZWN1dGVkLiBSYWlzZXMgYSBWYWx1ZUVycm9yIGlmIHRoZSBpbnN0YW5jZSBkb2VzCiAgICAgICAgICAgbm90IGhhdmUgYSBtZXRob2Qgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fdGVzdE1ldGhvZE5hbWUgPSBtZXRob2ROYW1lCiAgICAgICAgc2VsZi5fb3V0Y29tZUZvckRvQ2xlYW51cHMgPSBOb25lCiAgICAgICAgc2VsZi5fdGVzdE1ldGhvZERvYyA9ICdObyB0ZXN0JwogICAgICAgIHRyeToKICAgICAgICAgICAgdGVzdE1ldGhvZCA9IGdldGF0dHIoc2VsZiwgbWV0aG9kTmFtZSkKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIGlmIG1ldGhvZE5hbWUgIT0gJ3J1blRlc3QnOgogICAgICAgICAgICAgICAgIyB3ZSBhbGxvdyBpbnN0YW50aWF0aW9uIHdpdGggbm8gZXhwbGljaXQgbWV0aG9kIG5hbWUKICAgICAgICAgICAgICAgICMgYnV0IG5vdCBhbiAqaW5jb3JyZWN0KiBvciBtaXNzaW5nIG1ldGhvZCBuYW1lCiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJubyBzdWNoIHRlc3QgbWV0aG9kIGluICVzOiAlcyIgJQogICAgICAgICAgICAgICAgICAgICAgKHNlbGYuX19jbGFzc19fLCBtZXRob2ROYW1lKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl90ZXN0TWV0aG9kRG9jID0gdGVzdE1ldGhvZC5fX2RvY19fCiAgICAgICAgc2VsZi5fY2xlYW51cHMgPSBbXQoKICAgICAgICAjIE1hcCB0eXBlcyB0byBjdXN0b20gYXNzZXJ0RXF1YWwgZnVuY3Rpb25zIHRoYXQgd2lsbCBjb21wYXJlCiAgICAgICAgIyBpbnN0YW5jZXMgb2Ygc2FpZCB0eXBlIGluIG1vcmUgZGV0YWlsIHRvIGdlbmVyYXRlIGEgbW9yZSB1c2VmdWwKICAgICAgICAjIGVycm9yIG1lc3NhZ2UuCiAgICAgICAgc2VsZi5fdHlwZV9lcXVhbGl0eV9mdW5jcyA9IHt9CiAgICAgICAgc2VsZi5hZGRUeXBlRXF1YWxpdHlGdW5jKGRpY3QsICdhc3NlcnREaWN0RXF1YWwnKQogICAgICAgIHNlbGYuYWRkVHlwZUVxdWFsaXR5RnVuYyhsaXN0LCAnYXNzZXJ0TGlzdEVxdWFsJykKICAgICAgICBzZWxmLmFkZFR5cGVFcXVhbGl0eUZ1bmModHVwbGUsICdhc3NlcnRUdXBsZUVxdWFsJykKICAgICAgICBzZWxmLmFkZFR5cGVFcXVhbGl0eUZ1bmMoc2V0LCAnYXNzZXJ0U2V0RXF1YWwnKQogICAgICAgIHNlbGYuYWRkVHlwZUVxdWFsaXR5RnVuYyhmcm96ZW5zZXQsICdhc3NlcnRTZXRFcXVhbCcpCiAgICAgICAgc2VsZi5hZGRUeXBlRXF1YWxpdHlGdW5jKHN0ciwgJ2Fzc2VydE11bHRpTGluZUVxdWFsJykKCiAgICBkZWYgYWRkVHlwZUVxdWFsaXR5RnVuYyhzZWxmLCB0eXBlb2JqLCBmdW5jdGlvbik6CiAgICAgICAgIiIiQWRkIGEgdHlwZSBzcGVjaWZpYyBhc3NlcnRFcXVhbCBzdHlsZSBmdW5jdGlvbiB0byBjb21wYXJlIGEgdHlwZS4KCiAgICAgICAgVGhpcyBtZXRob2QgaXMgZm9yIHVzZSBieSBUZXN0Q2FzZSBzdWJjbGFzc2VzIHRoYXQgbmVlZCB0byByZWdpc3RlcgogICAgICAgIHRoZWlyIG93biB0eXBlIGVxdWFsaXR5IGZ1bmN0aW9ucyB0byBwcm92aWRlIG5pY2VyIGVycm9yIG1lc3NhZ2VzLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICB0eXBlb2JqOiBUaGUgZGF0YSB0eXBlIHRvIGNhbGwgdGhpcyBmdW5jdGlvbiBvbiB3aGVuIGJvdGggdmFsdWVzCiAgICAgICAgICAgICAgICAgICAgYXJlIG9mIHRoZSBzYW1lIHR5cGUgaW4gYXNzZXJ0RXF1YWwoKS4KICAgICAgICAgICAgZnVuY3Rpb246IFRoZSBjYWxsYWJsZSB0YWtpbmcgdHdvIGFyZ3VtZW50cyBhbmQgYW4gb3B0aW9uYWwKICAgICAgICAgICAgICAgICAgICBtc2c9IGFyZ3VtZW50IHRoYXQgcmFpc2VzIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiB3aXRoIGEKICAgICAgICAgICAgICAgICAgICB1c2VmdWwgZXJyb3IgbWVzc2FnZSB3aGVuIHRoZSB0d28gYXJndW1lbnRzIGFyZSBub3QgZXF1YWwuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fdHlwZV9lcXVhbGl0eV9mdW5jc1t0eXBlb2JqXSA9IGZ1bmN0aW9uCgogICAgZGVmIGFkZENsZWFudXAoc2VsZiwgZnVuY3Rpb24sICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgIiIiQWRkIGEgZnVuY3Rpb24sIHdpdGggYXJndW1lbnRzLCB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdGVzdCBpcwogICAgICAgIGNvbXBsZXRlZC4gRnVuY3Rpb25zIGFkZGVkIGFyZSBjYWxsZWQgb24gYSBMSUZPIGJhc2lzIGFuZCBhcmUKICAgICAgICBjYWxsZWQgYWZ0ZXIgdGVhckRvd24gb24gdGVzdCBmYWlsdXJlIG9yIHN1Y2Nlc3MuCgogICAgICAgIENsZWFudXAgaXRlbXMgYXJlIGNhbGxlZCBldmVuIGlmIHNldFVwIGZhaWxzICh1bmxpa2UgdGVhckRvd24pLiIiIgogICAgICAgIHNlbGYuX2NsZWFudXBzLmFwcGVuZCgoZnVuY3Rpb24sIGFyZ3MsIGt3YXJncykpCgogICAgZGVmIHNldFVwKHNlbGYpOgogICAgICAgICJIb29rIG1ldGhvZCBmb3Igc2V0dGluZyB1cCB0aGUgdGVzdCBmaXh0dXJlIGJlZm9yZSBleGVyY2lzaW5nIGl0LiIKICAgICAgICBwYXNzCgogICAgZGVmIHRlYXJEb3duKHNlbGYpOgogICAgICAgICJIb29rIG1ldGhvZCBmb3IgZGVjb25zdHJ1Y3RpbmcgdGhlIHRlc3QgZml4dHVyZSBhZnRlciB0ZXN0aW5nIGl0LiIKICAgICAgICBwYXNzCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgc2V0VXBDbGFzcyhjbHMpOgogICAgICAgICJIb29rIG1ldGhvZCBmb3Igc2V0dGluZyB1cCBjbGFzcyBmaXh0dXJlIGJlZm9yZSBydW5uaW5nIHRlc3RzIGluIHRoZSBjbGFzcy4iCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgdGVhckRvd25DbGFzcyhjbHMpOgogICAgICAgICJIb29rIG1ldGhvZCBmb3IgZGVjb25zdHJ1Y3RpbmcgdGhlIGNsYXNzIGZpeHR1cmUgYWZ0ZXIgcnVubmluZyBhbGwgdGVzdHMgaW4gdGhlIGNsYXNzLiIKCiAgICBkZWYgY291bnRUZXN0Q2FzZXMoc2VsZik6CiAgICAgICAgcmV0dXJuIDEKCiAgICBkZWYgZGVmYXVsdFRlc3RSZXN1bHQoc2VsZik6CiAgICAgICAgcmV0dXJuIHJlc3VsdC5UZXN0UmVzdWx0KCkKCiAgICBkZWYgc2hvcnREZXNjcmlwdGlvbihzZWxmKToKICAgICAgICAiIiJSZXR1cm5zIGEgb25lLWxpbmUgZGVzY3JpcHRpb24gb2YgdGhlIHRlc3QsIG9yIE5vbmUgaWYgbm8KICAgICAgICBkZXNjcmlwdGlvbiBoYXMgYmVlbiBwcm92aWRlZC4KCiAgICAgICAgVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgbGluZSBvZgogICAgICAgIHRoZSBzcGVjaWZpZWQgdGVzdCBtZXRob2QncyBkb2NzdHJpbmcuCiAgICAgICAgIiIiCiAgICAgICAgZG9jID0gc2VsZi5fdGVzdE1ldGhvZERvYwogICAgICAgIHJldHVybiBkb2MgYW5kIGRvYy5zcGxpdCgiXG4iKVswXS5zdHJpcCgpIG9yIE5vbmUKCgogICAgZGVmIGlkKHNlbGYpOgogICAgICAgIHJldHVybiAiJXMuJXMiICUgKHN0cmNsYXNzKHNlbGYuX19jbGFzc19fKSwgc2VsZi5fdGVzdE1ldGhvZE5hbWUpCgogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgdHlwZShzZWxmKSBpcyBub3QgdHlwZShvdGhlcik6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgICAgICByZXR1cm4gc2VsZi5fdGVzdE1ldGhvZE5hbWUgPT0gb3RoZXIuX3Rlc3RNZXRob2ROYW1lCgogICAgZGVmIF9faGFzaF9fKHNlbGYpOgogICAgICAgIHJldHVybiBoYXNoKCh0eXBlKHNlbGYpLCBzZWxmLl90ZXN0TWV0aG9kTmFtZSkpCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuICIlcyAoJXMpIiAlIChzZWxmLl90ZXN0TWV0aG9kTmFtZSwgc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIjwlcyB0ZXN0TWV0aG9kPSVzPiIgJSBcCiAgICAgICAgICAgICAgIChzdHJjbGFzcyhzZWxmLl9fY2xhc3NfXyksIHNlbGYuX3Rlc3RNZXRob2ROYW1lKQoKICAgIGRlZiBfYWRkU2tpcChzZWxmLCByZXN1bHQsIHJlYXNvbik6CiAgICAgICAgYWRkU2tpcCA9IGdldGF0dHIocmVzdWx0LCAnYWRkU2tpcCcsIE5vbmUpCiAgICAgICAgaWYgYWRkU2tpcCBpcyBub3QgTm9uZToKICAgICAgICAgICAgYWRkU2tpcChzZWxmLCByZWFzb24pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgd2FybmluZ3Mud2FybigiVGVzdFJlc3VsdCBoYXMgbm8gYWRkU2tpcCBtZXRob2QsIHNraXBzIG5vdCByZXBvcnRlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgUnVudGltZVdhcm5pbmcsIDIpCiAgICAgICAgICAgIHJlc3VsdC5hZGRTdWNjZXNzKHNlbGYpCgogICAgZGVmIF9leGVjdXRlVGVzdFBhcnQoc2VsZiwgZnVuY3Rpb24sIG91dGNvbWUsIGlzVGVzdD1GYWxzZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmdW5jdGlvbigpCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgICAgICByYWlzZQogICAgICAgIGV4Y2VwdCBTa2lwVGVzdCBhcyBlOgogICAgICAgICAgICBvdXRjb21lLnN1Y2Nlc3MgPSBGYWxzZQogICAgICAgICAgICBvdXRjb21lLnNraXBwZWQgPSBzdHIoZSkKICAgICAgICBleGNlcHQgX1VuZXhwZWN0ZWRTdWNjZXNzOgogICAgICAgICAgICBleGNfaW5mbyA9IHN5cy5leGNfaW5mbygpCiAgICAgICAgICAgIG91dGNvbWUuc3VjY2VzcyA9IEZhbHNlCiAgICAgICAgICAgIGlmIGlzVGVzdDoKICAgICAgICAgICAgICAgIG91dGNvbWUudW5leHBlY3RlZFN1Y2Nlc3MgPSBleGNfaW5mbwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgb3V0Y29tZS5lcnJvcnMuYXBwZW5kKGV4Y19pbmZvKQogICAgICAgIGV4Y2VwdCBfRXhwZWN0ZWRGYWlsdXJlOgogICAgICAgICAgICBvdXRjb21lLnN1Y2Nlc3MgPSBGYWxzZQogICAgICAgICAgICBleGNfaW5mbyA9IHN5cy5leGNfaW5mbygpCiAgICAgICAgICAgIGlmIGlzVGVzdDoKICAgICAgICAgICAgICAgIG91dGNvbWUuZXhwZWN0ZWRGYWlsdXJlID0gZXhjX2luZm8KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG91dGNvbWUuZXJyb3JzLmFwcGVuZChleGNfaW5mbykKICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uOgogICAgICAgICAgICBvdXRjb21lLnN1Y2Nlc3MgPSBGYWxzZQogICAgICAgICAgICBvdXRjb21lLmZhaWx1cmVzLmFwcGVuZChzeXMuZXhjX2luZm8oKSkKICAgICAgICAgICAgZXhjX2luZm8gPSBzeXMuZXhjX2luZm8oKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgb3V0Y29tZS5zdWNjZXNzID0gRmFsc2UKICAgICAgICAgICAgb3V0Y29tZS5lcnJvcnMuYXBwZW5kKHN5cy5leGNfaW5mbygpKQoKICAgIGRlZiBydW4oc2VsZiwgcmVzdWx0PU5vbmUpOgogICAgICAgIG9yaWdfcmVzdWx0ID0gcmVzdWx0CiAgICAgICAgaWYgcmVzdWx0IGlzIE5vbmU6CiAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYuZGVmYXVsdFRlc3RSZXN1bHQoKQogICAgICAgICAgICBzdGFydFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0YXJ0VGVzdFJ1bicsIE5vbmUpCiAgICAgICAgICAgIGlmIHN0YXJ0VGVzdFJ1biBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHN0YXJ0VGVzdFJ1bigpCgogICAgICAgIHJlc3VsdC5zdGFydFRlc3Qoc2VsZikKCiAgICAgICAgdGVzdE1ldGhvZCA9IGdldGF0dHIoc2VsZiwgc2VsZi5fdGVzdE1ldGhvZE5hbWUpCiAgICAgICAgaWYgKGdldGF0dHIoc2VsZi5fX2NsYXNzX18sICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKSBvcgogICAgICAgICAgICBnZXRhdHRyKHRlc3RNZXRob2QsICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKSk6CiAgICAgICAgICAgICMgSWYgdGhlIGNsYXNzIG9yIG1ldGhvZCB3YXMgc2tpcHBlZC4KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2tpcF93aHkgPSAoZ2V0YXR0cihzZWxmLl9fY2xhc3NfXywgJ19fdW5pdHRlc3Rfc2tpcF93aHlfXycsICcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgZ2V0YXR0cih0ZXN0TWV0aG9kLCAnX191bml0dGVzdF9za2lwX3doeV9fJywgJycpKQogICAgICAgICAgICAgICAgc2VsZi5fYWRkU2tpcChyZXN1bHQsIHNraXBfd2h5KQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgcmVzdWx0LnN0b3BUZXN0KHNlbGYpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIHRyeToKICAgICAgICAgICAgb3V0Y29tZSA9IF9PdXRjb21lKCkKICAgICAgICAgICAgc2VsZi5fb3V0Y29tZUZvckRvQ2xlYW51cHMgPSBvdXRjb21lCgogICAgICAgICAgICBzZWxmLl9leGVjdXRlVGVzdFBhcnQoc2VsZi5zZXRVcCwgb3V0Y29tZSkKICAgICAgICAgICAgaWYgb3V0Y29tZS5zdWNjZXNzOgogICAgICAgICAgICAgICAgc2VsZi5fZXhlY3V0ZVRlc3RQYXJ0KHRlc3RNZXRob2QsIG91dGNvbWUsIGlzVGVzdD1UcnVlKQogICAgICAgICAgICAgICAgc2VsZi5fZXhlY3V0ZVRlc3RQYXJ0KHNlbGYudGVhckRvd24sIG91dGNvbWUpCgogICAgICAgICAgICBzZWxmLmRvQ2xlYW51cHMoKQogICAgICAgICAgICBpZiBvdXRjb21lLnN1Y2Nlc3M6CiAgICAgICAgICAgICAgICByZXN1bHQuYWRkU3VjY2VzcyhzZWxmKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgb3V0Y29tZS5za2lwcGVkIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2FkZFNraXAocmVzdWx0LCBvdXRjb21lLnNraXBwZWQpCiAgICAgICAgICAgICAgICBmb3IgZXhjX2luZm8gaW4gb3V0Y29tZS5lcnJvcnM6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFkZEVycm9yKHNlbGYsIGV4Y19pbmZvKQogICAgICAgICAgICAgICAgZm9yIGV4Y19pbmZvIGluIG91dGNvbWUuZmFpbHVyZXM6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFkZEZhaWx1cmUoc2VsZiwgZXhjX2luZm8pCiAgICAgICAgICAgICAgICBpZiBvdXRjb21lLnVuZXhwZWN0ZWRTdWNjZXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIGFkZFVuZXhwZWN0ZWRTdWNjZXNzID0gZ2V0YXR0cihyZXN1bHQsICdhZGRVbmV4cGVjdGVkU3VjY2VzcycsIE5vbmUpCiAgICAgICAgICAgICAgICAgICAgaWYgYWRkVW5leHBlY3RlZFN1Y2Nlc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFVuZXhwZWN0ZWRTdWNjZXNzKHNlbGYpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybigiVGVzdFJlc3VsdCBoYXMgbm8gYWRkVW5leHBlY3RlZFN1Y2Nlc3MgbWV0aG9kLCByZXBvcnRpbmcgYXMgZmFpbHVyZXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJ1bnRpbWVXYXJuaW5nKQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYWRkRmFpbHVyZShzZWxmLCBvdXRjb21lLnVuZXhwZWN0ZWRTdWNjZXNzKQoKICAgICAgICAgICAgICAgIGlmIG91dGNvbWUuZXhwZWN0ZWRGYWlsdXJlIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIGFkZEV4cGVjdGVkRmFpbHVyZSA9IGdldGF0dHIocmVzdWx0LCAnYWRkRXhwZWN0ZWRGYWlsdXJlJywgTm9uZSkKICAgICAgICAgICAgICAgICAgICBpZiBhZGRFeHBlY3RlZEZhaWx1cmUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV4cGVjdGVkRmFpbHVyZShzZWxmLCBvdXRjb21lLmV4cGVjdGVkRmFpbHVyZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJUZXN0UmVzdWx0IGhhcyBubyBhZGRFeHBlY3RlZEZhaWx1cmUgbWV0aG9kLCByZXBvcnRpbmcgYXMgcGFzc2VzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSdW50aW1lV2FybmluZykKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFkZFN1Y2Nlc3Moc2VsZikKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHJlc3VsdC5zdG9wVGVzdChzZWxmKQogICAgICAgICAgICBpZiBvcmlnX3Jlc3VsdCBpcyBOb25lOgogICAgICAgICAgICAgICAgc3RvcFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0b3BUZXN0UnVuJywgTm9uZSkKICAgICAgICAgICAgICAgIGlmIHN0b3BUZXN0UnVuIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHN0b3BUZXN0UnVuKCkKCiAgICBkZWYgZG9DbGVhbnVwcyhzZWxmKToKICAgICAgICAiIiJFeGVjdXRlIGFsbCBjbGVhbnVwIGZ1bmN0aW9ucy4gTm9ybWFsbHkgY2FsbGVkIGZvciB5b3UgYWZ0ZXIKICAgICAgICB0ZWFyRG93bi4iIiIKICAgICAgICBvdXRjb21lID0gc2VsZi5fb3V0Y29tZUZvckRvQ2xlYW51cHMgb3IgX091dGNvbWUoKQogICAgICAgIHdoaWxlIHNlbGYuX2NsZWFudXBzOgogICAgICAgICAgICBmdW5jdGlvbiwgYXJncywga3dhcmdzID0gc2VsZi5fY2xlYW51cHMucG9wKCkKICAgICAgICAgICAgcGFydCA9IGxhbWJkYTogZnVuY3Rpb24oKmFyZ3MsICoqa3dhcmdzKQogICAgICAgICAgICBzZWxmLl9leGVjdXRlVGVzdFBhcnQocGFydCwgb3V0Y29tZSkKCiAgICAgICAgIyByZXR1cm4gdGhpcyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkKICAgICAgICAjIGV2ZW4gdGhvdWdoIHdlIG5vIGxvbmdlciB1cyBpdCBpbnRlcm5hbGx5CiAgICAgICAgcmV0dXJuIG91dGNvbWUuc3VjY2VzcwoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCAqYXJncywgKiprd2RzKToKICAgICAgICByZXR1cm4gc2VsZi5ydW4oKmFyZ3MsICoqa3dkcykKCiAgICBkZWYgZGVidWcoc2VsZik6CiAgICAgICAgIiIiUnVuIHRoZSB0ZXN0IHdpdGhvdXQgY29sbGVjdGluZyBlcnJvcnMgaW4gYSBUZXN0UmVzdWx0IiIiCiAgICAgICAgc2VsZi5zZXRVcCgpCiAgICAgICAgZ2V0YXR0cihzZWxmLCBzZWxmLl90ZXN0TWV0aG9kTmFtZSkoKQogICAgICAgIHNlbGYudGVhckRvd24oKQogICAgICAgIHdoaWxlIHNlbGYuX2NsZWFudXBzOgogICAgICAgICAgICBmdW5jdGlvbiwgYXJncywga3dhcmdzID0gc2VsZi5fY2xlYW51cHMucG9wKC0xKQogICAgICAgICAgICBmdW5jdGlvbigqYXJncywgKiprd2FyZ3MpCgogICAgZGVmIHNraXBUZXN0KHNlbGYsIHJlYXNvbik6CiAgICAgICAgIiIiU2tpcCB0aGlzIHRlc3QuIiIiCiAgICAgICAgcmFpc2UgU2tpcFRlc3QocmVhc29uKQoKICAgIGRlZiBmYWlsKHNlbGYsIG1zZz1Ob25lKToKICAgICAgICAiIiJGYWlsIGltbWVkaWF0ZWx5LCB3aXRoIHRoZSBnaXZlbiBtZXNzYWdlLiIiIgogICAgICAgIHJhaXNlIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbihtc2cpCgogICAgZGVmIGFzc2VydEZhbHNlKHNlbGYsIGV4cHIsIG1zZz1Ob25lKToKICAgICAgICAiIiJDaGVjayB0aGF0IHRoZSBleHByZXNzaW9uIGlzIGZhbHNlLiIiIgogICAgICAgIGlmIGV4cHI6CiAgICAgICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCAiJXMgaXMgbm90IGZhbHNlIiAlIHNhZmVfcmVwcihleHByKSkKICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgYXNzZXJ0VHJ1ZShzZWxmLCBleHByLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiQ2hlY2sgdGhhdCB0aGUgZXhwcmVzc2lvbiBpcyB0cnVlLiIiIgogICAgICAgIGlmIG5vdCBleHByOgogICAgICAgICAgICBtc2cgPSBzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgIiVzIGlzIG5vdCB0cnVlIiAlIHNhZmVfcmVwcihleHByKSkKICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgX2Zvcm1hdE1lc3NhZ2Uoc2VsZiwgbXNnLCBzdGFuZGFyZE1zZyk6CiAgICAgICAgIiIiSG9ub3VyIHRoZSBsb25nTWVzc2FnZSBhdHRyaWJ1dGUgd2hlbiBnZW5lcmF0aW5nIGZhaWx1cmUgbWVzc2FnZXMuCiAgICAgICAgSWYgbG9uZ01lc3NhZ2UgaXMgRmFsc2UgdGhpcyBtZWFuczoKICAgICAgICAqIFVzZSBvbmx5IGFuIGV4cGxpY2l0IG1lc3NhZ2UgaWYgaXQgaXMgcHJvdmlkZWQKICAgICAgICAqIE90aGVyd2lzZSB1c2UgdGhlIHN0YW5kYXJkIG1lc3NhZ2UgZm9yIHRoZSBhc3NlcnQKCiAgICAgICAgSWYgbG9uZ01lc3NhZ2UgaXMgVHJ1ZToKICAgICAgICAqIFVzZSB0aGUgc3RhbmRhcmQgbWVzc2FnZQogICAgICAgICogSWYgYW4gZXhwbGljaXQgbWVzc2FnZSBpcyBwcm92aWRlZCwgcGx1cyAnIDogJyBhbmQgdGhlIGV4cGxpY2l0IG1lc3NhZ2UKICAgICAgICAiIiIKICAgICAgICBpZiBub3Qgc2VsZi5sb25nTWVzc2FnZToKICAgICAgICAgICAgcmV0dXJuIG1zZyBvciBzdGFuZGFyZE1zZwogICAgICAgIGlmIG1zZyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRNc2cKICAgICAgICB0cnk6CiAgICAgICAgICAgICMgZG9uJ3Qgc3dpdGNoIHRvICd7fScgZm9ybWF0dGluZyBpbiBQeXRob24gMi5YCiAgICAgICAgICAgICMgaXQgY2hhbmdlcyB0aGUgd2F5IHVuaWNvZGUgaW5wdXQgaXMgaGFuZGxlZAogICAgICAgICAgICByZXR1cm4gJyVzIDogJXMnICUgKHN0YW5kYXJkTXNnLCBtc2cpCiAgICAgICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvcjoKICAgICAgICAgICAgcmV0dXJuICAnJXMgOiAlcycgJSAoc2FmZV9yZXByKHN0YW5kYXJkTXNnKSwgc2FmZV9yZXByKG1zZykpCgogICAgZGVmIGFzc2VydFJhaXNlcyhzZWxmLCBleGNDbGFzcywgY2FsbGFibGVPYmo9Tm9uZSwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAiIiJGYWlsIHVubGVzcyBhbiBleGNlcHRpb24gb2YgY2xhc3MgZXhjQ2xhc3MgaXMgdGhyb3duCiAgICAgICAgICAgYnkgY2FsbGFibGVPYmogd2hlbiBpbnZva2VkIHdpdGggYXJndW1lbnRzIGFyZ3MgYW5kIGtleXdvcmQKICAgICAgICAgICBhcmd1bWVudHMga3dhcmdzLiBJZiBhIGRpZmZlcmVudCB0eXBlIG9mIGV4Y2VwdGlvbiBpcwogICAgICAgICAgIHRocm93biwgaXQgd2lsbCBub3QgYmUgY2F1Z2h0LCBhbmQgdGhlIHRlc3QgY2FzZSB3aWxsIGJlCiAgICAgICAgICAgZGVlbWVkIHRvIGhhdmUgc3VmZmVyZWQgYW4gZXJyb3IsIGV4YWN0bHkgYXMgZm9yIGFuCiAgICAgICAgICAgdW5leHBlY3RlZCBleGNlcHRpb24uCgogICAgICAgICAgIElmIGNhbGxlZCB3aXRoIGNhbGxhYmxlT2JqIG9taXR0ZWQgb3IgTm9uZSwgd2lsbCByZXR1cm4gYQogICAgICAgICAgIGNvbnRleHQgb2JqZWN0IHVzZWQgbGlrZSB0aGlzOjoKCiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKFNvbWVFeGNlcHRpb24pOgogICAgICAgICAgICAgICAgICAgIGRvX3NvbWV0aGluZygpCgogICAgICAgICAgIEFuIG9wdGlvbmFsIGtleXdvcmQgYXJndW1lbnQgJ21zZycgY2FuIGJlIHByb3ZpZGVkIHdoZW4gYXNzZXJ0UmFpc2VzCiAgICAgICAgICAgaXMgdXNlZCBhcyBhIGNvbnRleHQgb2JqZWN0LgoKICAgICAgICAgICBUaGUgY29udGV4dCBtYW5hZ2VyIGtlZXBzIGEgcmVmZXJlbmNlIHRvIHRoZSBleGNlcHRpb24gYXMKICAgICAgICAgICB0aGUgJ2V4Y2VwdGlvbicgYXR0cmlidXRlLiBUaGlzIGFsbG93cyB5b3UgdG8gaW5zcGVjdCB0aGUKICAgICAgICAgICBleGNlcHRpb24gYWZ0ZXIgdGhlIGFzc2VydGlvbjo6CgogICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKFNvbWVFeGNlcHRpb24pIGFzIGNtOgogICAgICAgICAgICAgICAgICAgZG9fc29tZXRoaW5nKCkKICAgICAgICAgICAgICAgdGhlX2V4Y2VwdGlvbiA9IGNtLmV4Y2VwdGlvbgogICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRoZV9leGNlcHRpb24uZXJyb3JfY29kZSwgMykKICAgICAgICAiIiIKICAgICAgICBjb250ZXh0ID0gX0Fzc2VydFJhaXNlc0NvbnRleHQoZXhjQ2xhc3MsIHNlbGYsIGNhbGxhYmxlT2JqKQogICAgICAgIHJldHVybiBjb250ZXh0LmhhbmRsZSgnYXNzZXJ0UmFpc2VzJywgY2FsbGFibGVPYmosIGFyZ3MsIGt3YXJncykKCiAgICBkZWYgYXNzZXJ0V2FybnMoc2VsZiwgZXhwZWN0ZWRfd2FybmluZywgY2FsbGFibGVfb2JqPU5vbmUsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgIiIiRmFpbCB1bmxlc3MgYSB3YXJuaW5nIG9mIGNsYXNzIHdhcm5DbGFzcyBpcyB0cmlnZ2VyZWQKICAgICAgICAgICBieSBjYWxsYWJsZV9vYmogd2hlbiBpbnZva2VkIHdpdGggYXJndW1lbnRzIGFyZ3MgYW5kIGtleXdvcmQKICAgICAgICAgICBhcmd1bWVudHMga3dhcmdzLiAgSWYgYSBkaWZmZXJlbnQgdHlwZSBvZiB3YXJuaW5nIGlzCiAgICAgICAgICAgdHJpZ2dlcmVkLCBpdCB3aWxsIG5vdCBiZSBoYW5kbGVkOiBkZXBlbmRpbmcgb24gdGhlIG90aGVyCiAgICAgICAgICAgd2FybmluZyBmaWx0ZXJpbmcgcnVsZXMgaW4gZWZmZWN0LCBpdCBtaWdodCBiZSBzaWxlbmNlZCwgcHJpbnRlZAogICAgICAgICAgIG91dCwgb3IgcmFpc2VkIGFzIGFuIGV4Y2VwdGlvbi4KCiAgICAgICAgICAgSWYgY2FsbGVkIHdpdGggY2FsbGFibGVfb2JqIG9taXR0ZWQgb3IgTm9uZSwgd2lsbCByZXR1cm4gYQogICAgICAgICAgIGNvbnRleHQgb2JqZWN0IHVzZWQgbGlrZSB0aGlzOjoKCiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnMoU29tZVdhcm5pbmcpOgogICAgICAgICAgICAgICAgICAgIGRvX3NvbWV0aGluZygpCgogICAgICAgICAgIEFuIG9wdGlvbmFsIGtleXdvcmQgYXJndW1lbnQgJ21zZycgY2FuIGJlIHByb3ZpZGVkIHdoZW4gYXNzZXJ0V2FybnMKICAgICAgICAgICBpcyB1c2VkIGFzIGEgY29udGV4dCBvYmplY3QuCgogICAgICAgICAgIFRoZSBjb250ZXh0IG1hbmFnZXIga2VlcHMgYSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IG1hdGNoaW5nCiAgICAgICAgICAgd2FybmluZyBhcyB0aGUgJ3dhcm5pbmcnIGF0dHJpYnV0ZTsgc2ltaWxhcmx5LCB0aGUgJ2ZpbGVuYW1lJwogICAgICAgICAgIGFuZCAnbGluZW5vJyBhdHRyaWJ1dGVzIGdpdmUgeW91IGluZm9ybWF0aW9uIGFib3V0IHRoZSBsaW5lCiAgICAgICAgICAgb2YgUHl0aG9uIGNvZGUgZnJvbSB3aGljaCB0aGUgd2FybmluZyB3YXMgdHJpZ2dlcmVkLgogICAgICAgICAgIFRoaXMgYWxsb3dzIHlvdSB0byBpbnNwZWN0IHRoZSB3YXJuaW5nIGFmdGVyIHRoZSBhc3NlcnRpb246OgoKICAgICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKFNvbWVXYXJuaW5nKSBhcyBjbToKICAgICAgICAgICAgICAgICAgIGRvX3NvbWV0aGluZygpCiAgICAgICAgICAgICAgIHRoZV93YXJuaW5nID0gY20ud2FybmluZwogICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRoZV93YXJuaW5nLnNvbWVfYXR0cmlidXRlLCAxNDcpCiAgICAgICAgIiIiCiAgICAgICAgY29udGV4dCA9IF9Bc3NlcnRXYXJuc0NvbnRleHQoZXhwZWN0ZWRfd2FybmluZywgc2VsZiwgY2FsbGFibGVfb2JqKQogICAgICAgIHJldHVybiBjb250ZXh0LmhhbmRsZSgnYXNzZXJ0V2FybnMnLCBjYWxsYWJsZV9vYmosIGFyZ3MsIGt3YXJncykKCiAgICBkZWYgX2dldEFzc2VydEVxdWFsaXR5RnVuYyhzZWxmLCBmaXJzdCwgc2Vjb25kKToKICAgICAgICAiIiJHZXQgYSBkZXRhaWxlZCBjb21wYXJpc29uIGZ1bmN0aW9uIGZvciB0aGUgdHlwZXMgb2YgdGhlIHR3byBhcmdzLgoKICAgICAgICBSZXR1cm5zOiBBIGNhbGxhYmxlIGFjY2VwdGluZyAoZmlyc3QsIHNlY29uZCwgbXNnPU5vbmUpIHRoYXQgd2lsbAogICAgICAgIHJhaXNlIGEgZmFpbHVyZSBleGNlcHRpb24gaWYgZmlyc3QgIT0gc2Vjb25kIHdpdGggYSB1c2VmdWwgaHVtYW4KICAgICAgICByZWFkYWJsZSBlcnJvciBtZXNzYWdlIGZvciB0aG9zZSB0eXBlcy4KICAgICAgICAiIiIKICAgICAgICAjCiAgICAgICAgIyBOT1RFKGdyZWdvcnkucC5zbWl0aCk6IEkgY29uc2lkZXJlZCBpc2luc3RhbmNlKGZpcnN0LCB0eXBlKHNlY29uZCkpCiAgICAgICAgIyBhbmQgdmljZSB2ZXJzYS4gIEkgb3B0ZWQgZm9yIHRoZSBjb25zZXJ2YXRpdmUgYXBwcm9hY2ggaW4gY2FzZQogICAgICAgICMgc3ViY2xhc3NlcyBhcmUgbm90IGludGVuZGVkIHRvIGJlIGNvbXBhcmVkIGluIGRldGFpbCB0byB0aGVpciBzdXBlcgogICAgICAgICMgY2xhc3MgaW5zdGFuY2VzIHVzaW5nIGEgdHlwZSBlcXVhbGl0eSBmdW5jLiAgVGhpcyBtZWFucyB0ZXN0aW5nCiAgICAgICAgIyBzdWJ0eXBlcyB3b24ndCBhdXRvbWFnaWNhbGx5IHVzZSB0aGUgZGV0YWlsZWQgY29tcGFyaXNvbi4gIENhbGxlcnMKICAgICAgICAjIHNob3VsZCB1c2UgdGhlaXIgdHlwZSBzcGVjaWZpYyBhc3NlcnRTcGFtRXF1YWwgbWV0aG9kIHRvIGNvbXBhcmUKICAgICAgICAjIHN1YmNsYXNzZXMgaWYgdGhlIGRldGFpbGVkIGNvbXBhcmlzb24gaXMgZGVzaXJlZCBhbmQgYXBwcm9wcmlhdGUuCiAgICAgICAgIyBTZWUgdGhlIGRpc2N1c3Npb24gaW4gaHR0cDovL2J1Z3MucHl0aG9uLm9yZy9pc3N1ZTI1NzguCiAgICAgICAgIwogICAgICAgIGlmIHR5cGUoZmlyc3QpIGlzIHR5cGUoc2Vjb25kKToKICAgICAgICAgICAgYXNzZXJ0ZXIgPSBzZWxmLl90eXBlX2VxdWFsaXR5X2Z1bmNzLmdldCh0eXBlKGZpcnN0KSkKICAgICAgICAgICAgaWYgYXNzZXJ0ZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGFzc2VydGVyLCBzdHIpOgogICAgICAgICAgICAgICAgICAgIGFzc2VydGVyID0gZ2V0YXR0cihzZWxmLCBhc3NlcnRlcikKICAgICAgICAgICAgICAgIHJldHVybiBhc3NlcnRlcgoKICAgICAgICByZXR1cm4gc2VsZi5fYmFzZUFzc2VydEVxdWFsCgogICAgZGVmIF9iYXNlQXNzZXJ0RXF1YWwoc2VsZiwgZmlyc3QsIHNlY29uZCwgbXNnPU5vbmUpOgogICAgICAgICIiIlRoZSBkZWZhdWx0IGFzc2VydEVxdWFsIGltcGxlbWVudGF0aW9uLCBub3QgdHlwZSBzcGVjaWZpYy4iIiIKICAgICAgICBpZiBub3QgZmlyc3QgPT0gc2Vjb25kOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyAhPSAlcycgJSAoc2FmZV9yZXByKGZpcnN0KSwgc2FmZV9yZXByKHNlY29uZCkpCiAgICAgICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykKICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgYXNzZXJ0RXF1YWwoc2VsZiwgZmlyc3QsIHNlY29uZCwgbXNnPU5vbmUpOgogICAgICAgICIiIkZhaWwgaWYgdGhlIHR3byBvYmplY3RzIGFyZSB1bmVxdWFsIGFzIGRldGVybWluZWQgYnkgdGhlICc9PScKICAgICAgICAgICBvcGVyYXRvci4KICAgICAgICAiIiIKICAgICAgICBhc3NlcnRpb25fZnVuYyA9IHNlbGYuX2dldEFzc2VydEVxdWFsaXR5RnVuYyhmaXJzdCwgc2Vjb25kKQogICAgICAgIGFzc2VydGlvbl9mdW5jKGZpcnN0LCBzZWNvbmQsIG1zZz1tc2cpCgogICAgZGVmIGFzc2VydE5vdEVxdWFsKHNlbGYsIGZpcnN0LCBzZWNvbmQsIG1zZz1Ob25lKToKICAgICAgICAiIiJGYWlsIGlmIHRoZSB0d28gb2JqZWN0cyBhcmUgZXF1YWwgYXMgZGV0ZXJtaW5lZCBieSB0aGUgJz09JwogICAgICAgICAgIG9wZXJhdG9yLgogICAgICAgICIiIgogICAgICAgIGlmIG5vdCBmaXJzdCAhPSBzZWNvbmQ6CiAgICAgICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCAnJXMgPT0gJXMnICUgKHNhZmVfcmVwcihmaXJzdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoc2Vjb25kKSkpCiAgICAgICAgICAgIHJhaXNlIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbihtc2cpCgogICAgZGVmIGFzc2VydEFsbW9zdEVxdWFsKHNlbGYsIGZpcnN0LCBzZWNvbmQsIHBsYWNlcz1Ob25lLCBtc2c9Tm9uZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YT1Ob25lKToKICAgICAgICAiIiJGYWlsIGlmIHRoZSB0d28gb2JqZWN0cyBhcmUgdW5lcXVhbCBhcyBkZXRlcm1pbmVkIGJ5IHRoZWlyCiAgICAgICAgICAgZGlmZmVyZW5jZSByb3VuZGVkIHRvIHRoZSBnaXZlbiBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMKICAgICAgICAgICAoZGVmYXVsdCA3KSBhbmQgY29tcGFyaW5nIHRvIHplcm8sIG9yIGJ5IGNvbXBhcmluZyB0aGF0IHRoZQogICAgICAgICAgIGJldHdlZW4gdGhlIHR3byBvYmplY3RzIGlzIG1vcmUgdGhhbiB0aGUgZ2l2ZW4gZGVsdGEuCgogICAgICAgICAgIE5vdGUgdGhhdCBkZWNpbWFsIHBsYWNlcyAoZnJvbSB6ZXJvKSBhcmUgdXN1YWxseSBub3QgdGhlIHNhbWUKICAgICAgICAgICBhcyBzaWduaWZpY2FudCBkaWdpdHMgKG1lYXN1cmVkIGZyb20gdGhlIG1vc3Qgc2lnbmZpY2FudCBkaWdpdCkuCgogICAgICAgICAgIElmIHRoZSB0d28gb2JqZWN0cyBjb21wYXJlIGVxdWFsIHRoZW4gdGhleSB3aWxsIGF1dG9tYXRpY2FsbHkKICAgICAgICAgICBjb21wYXJlIGFsbW9zdCBlcXVhbC4KICAgICAgICAiIiIKICAgICAgICBpZiBmaXJzdCA9PSBzZWNvbmQ6CiAgICAgICAgICAgICMgc2hvcnRjdXQKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgZGVsdGEgaXMgbm90IE5vbmUgYW5kIHBsYWNlcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJzcGVjaWZ5IGRlbHRhIG9yIHBsYWNlcyBub3QgYm90aCIpCgogICAgICAgIGlmIGRlbHRhIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBhYnMoZmlyc3QgLSBzZWNvbmQpIDw9IGRlbHRhOgogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyAhPSAlcyB3aXRoaW4gJXMgZGVsdGEnICUgKHNhZmVfcmVwcihmaXJzdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKHNlY29uZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKGRlbHRhKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBwbGFjZXMgaXMgTm9uZToKICAgICAgICAgICAgICAgIHBsYWNlcyA9IDcKCiAgICAgICAgICAgIGlmIHJvdW5kKGFicyhzZWNvbmQtZmlyc3QpLCBwbGFjZXMpID09IDA6CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzICE9ICVzIHdpdGhpbiAlciBwbGFjZXMnICUgKHNhZmVfcmVwcihmaXJzdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoc2Vjb25kKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlcykKICAgICAgICBtc2cgPSBzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpCiAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgYXNzZXJ0Tm90QWxtb3N0RXF1YWwoc2VsZiwgZmlyc3QsIHNlY29uZCwgcGxhY2VzPU5vbmUsIG1zZz1Ob25lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhPU5vbmUpOgogICAgICAgICIiIkZhaWwgaWYgdGhlIHR3byBvYmplY3RzIGFyZSBlcXVhbCBhcyBkZXRlcm1pbmVkIGJ5IHRoZWlyCiAgICAgICAgICAgZGlmZmVyZW5jZSByb3VuZGVkIHRvIHRoZSBnaXZlbiBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMKICAgICAgICAgICAoZGVmYXVsdCA3KSBhbmQgY29tcGFyaW5nIHRvIHplcm8sIG9yIGJ5IGNvbXBhcmluZyB0aGF0IHRoZQogICAgICAgICAgIGJldHdlZW4gdGhlIHR3byBvYmplY3RzIGlzIGxlc3MgdGhhbiB0aGUgZ2l2ZW4gZGVsdGEuCgogICAgICAgICAgIE5vdGUgdGhhdCBkZWNpbWFsIHBsYWNlcyAoZnJvbSB6ZXJvKSBhcmUgdXN1YWxseSBub3QgdGhlIHNhbWUKICAgICAgICAgICBhcyBzaWduaWZpY2FudCBkaWdpdHMgKG1lYXN1cmVkIGZyb20gdGhlIG1vc3Qgc2lnbmZpY2FudCBkaWdpdCkuCgogICAgICAgICAgIE9iamVjdHMgdGhhdCBhcmUgZXF1YWwgYXV0b21hdGljYWxseSBmYWlsLgogICAgICAgICIiIgogICAgICAgIGlmIGRlbHRhIGlzIG5vdCBOb25lIGFuZCBwbGFjZXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigic3BlY2lmeSBkZWx0YSBvciBwbGFjZXMgbm90IGJvdGgiKQogICAgICAgIGlmIGRlbHRhIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBub3QgKGZpcnN0ID09IHNlY29uZCkgYW5kIGFicyhmaXJzdCAtIHNlY29uZCkgPiBkZWx0YToKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyA9PSAlcyB3aXRoaW4gJXMgZGVsdGEnICUgKHNhZmVfcmVwcihmaXJzdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKHNlY29uZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKGRlbHRhKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBwbGFjZXMgaXMgTm9uZToKICAgICAgICAgICAgICAgIHBsYWNlcyA9IDcKICAgICAgICAgICAgaWYgbm90IChmaXJzdCA9PSBzZWNvbmQpIGFuZCByb3VuZChhYnMoc2Vjb25kLWZpcnN0KSwgcGxhY2VzKSAhPSAwOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzID09ICVzIHdpdGhpbiAlciBwbGFjZXMnICUgKHNhZmVfcmVwcihmaXJzdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfcmVwcihzZWNvbmQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZXMpCgogICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykKICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKCiAgICBkZWYgYXNzZXJ0U2VxdWVuY2VFcXVhbChzZWxmLCBzZXExLCBzZXEyLCBtc2c9Tm9uZSwgc2VxX3R5cGU9Tm9uZSk6CiAgICAgICAgIiIiQW4gZXF1YWxpdHkgYXNzZXJ0aW9uIGZvciBvcmRlcmVkIHNlcXVlbmNlcyAobGlrZSBsaXN0cyBhbmQgdHVwbGVzKS4KCiAgICAgICAgRm9yIHRoZSBwdXJwb3NlcyBvZiB0aGlzIGZ1bmN0aW9uLCBhIHZhbGlkIG9yZGVyZWQgc2VxdWVuY2UgdHlwZSBpcyBvbmUKICAgICAgICB3aGljaCBjYW4gYmUgaW5kZXhlZCwgaGFzIGEgbGVuZ3RoLCBhbmQgaGFzIGFuIGVxdWFsaXR5IG9wZXJhdG9yLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBzZXExOiBUaGUgZmlyc3Qgc2VxdWVuY2UgdG8gY29tcGFyZS4KICAgICAgICAgICAgc2VxMjogVGhlIHNlY29uZCBzZXF1ZW5jZSB0byBjb21wYXJlLgogICAgICAgICAgICBzZXFfdHlwZTogVGhlIGV4cGVjdGVkIGRhdGF0eXBlIG9mIHRoZSBzZXF1ZW5jZXMsIG9yIE5vbmUgaWYgbm8KICAgICAgICAgICAgICAgICAgICBkYXRhdHlwZSBzaG91bGQgYmUgZW5mb3JjZWQuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB0byB1c2Ugb24gZmFpbHVyZSBpbnN0ZWFkIG9mIGEgbGlzdCBvZgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLgogICAgICAgICIiIgogICAgICAgIGlmIHNlcV90eXBlICE9IE5vbmU6CiAgICAgICAgICAgIHNlcV90eXBlX25hbWUgPSBzZXFfdHlwZS5fX25hbWVfXwogICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShzZXExLCBzZXFfdHlwZSk6CiAgICAgICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24oJ0ZpcnN0IHNlcXVlbmNlIGlzIG5vdCBhICVzOiAlcycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICUgKHNlcV90eXBlX25hbWUsIHNhZmVfcmVwcihzZXExKSkpCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHNlcTIsIHNlcV90eXBlKToKICAgICAgICAgICAgICAgIHJhaXNlIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbignU2Vjb25kIHNlcXVlbmNlIGlzIG5vdCBhICVzOiAlcycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICUgKHNlcV90eXBlX25hbWUsIHNhZmVfcmVwcihzZXEyKSkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VxX3R5cGVfbmFtZSA9ICJzZXF1ZW5jZSIKCiAgICAgICAgZGlmZmVyaW5nID0gTm9uZQogICAgICAgIHRyeToKICAgICAgICAgICAgbGVuMSA9IGxlbihzZXExKQogICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yKToKICAgICAgICAgICAgZGlmZmVyaW5nID0gJ0ZpcnN0ICVzIGhhcyBubyBsZW5ndGguICAgIE5vbi1zZXF1ZW5jZT8nICUgKAogICAgICAgICAgICAgICAgICAgIHNlcV90eXBlX25hbWUpCgogICAgICAgIGlmIGRpZmZlcmluZyBpcyBOb25lOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBsZW4yID0gbGVuKHNlcTIpCiAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yKToKICAgICAgICAgICAgICAgIGRpZmZlcmluZyA9ICdTZWNvbmQgJXMgaGFzIG5vIGxlbmd0aC4gICAgTm9uLXNlcXVlbmNlPycgJSAoCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcV90eXBlX25hbWUpCgogICAgICAgIGlmIGRpZmZlcmluZyBpcyBOb25lOgogICAgICAgICAgICBpZiBzZXExID09IHNlcTI6CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIHNlcTFfcmVwciA9IHNhZmVfcmVwcihzZXExKQogICAgICAgICAgICBzZXEyX3JlcHIgPSBzYWZlX3JlcHIoc2VxMikKICAgICAgICAgICAgaWYgbGVuKHNlcTFfcmVwcikgPiAzMDoKICAgICAgICAgICAgICAgIHNlcTFfcmVwciA9IHNlcTFfcmVwcls6MzBdICsgJy4uLicKICAgICAgICAgICAgaWYgbGVuKHNlcTJfcmVwcikgPiAzMDoKICAgICAgICAgICAgICAgIHNlcTJfcmVwciA9IHNlcTJfcmVwcls6MzBdICsgJy4uLicKICAgICAgICAgICAgZWxlbWVudHMgPSAoc2VxX3R5cGVfbmFtZS5jYXBpdGFsaXplKCksIHNlcTFfcmVwciwgc2VxMl9yZXByKQogICAgICAgICAgICBkaWZmZXJpbmcgPSAnJXNzIGRpZmZlcjogJXMgIT0gJXNcbicgJSBlbGVtZW50cwoKICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobWluKGxlbjEsIGxlbjIpKToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBpdGVtMSA9IHNlcTFbaV0KICAgICAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBJbmRleEVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yKToKICAgICAgICAgICAgICAgICAgICBkaWZmZXJpbmcgKz0gKCdcblVuYWJsZSB0byBpbmRleCBlbGVtZW50ICVkIG9mIGZpcnN0ICVzXG4nICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGksIHNlcV90eXBlX25hbWUpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGl0ZW0yID0gc2VxMltpXQogICAgICAgICAgICAgICAgZXhjZXB0IChUeXBlRXJyb3IsIEluZGV4RXJyb3IsIE5vdEltcGxlbWVudGVkRXJyb3IpOgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmluZyArPSAoJ1xuVW5hYmxlIHRvIGluZGV4IGVsZW1lbnQgJWQgb2Ygc2Vjb25kICVzXG4nICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGksIHNlcV90eXBlX25hbWUpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgaWYgaXRlbTEgIT0gaXRlbTI6CiAgICAgICAgICAgICAgICAgICAgZGlmZmVyaW5nICs9ICgnXG5GaXJzdCBkaWZmZXJpbmcgZWxlbWVudCAlZDpcbiVzXG4lc1xuJyAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpLCBpdGVtMSwgaXRlbTIpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiAobGVuMSA9PSBsZW4yIGFuZCBzZXFfdHlwZSBpcyBOb25lIGFuZAogICAgICAgICAgICAgICAgICAgIHR5cGUoc2VxMSkgIT0gdHlwZShzZXEyKSk6CiAgICAgICAgICAgICAgICAgICAgIyBUaGUgc2VxdWVuY2VzIGFyZSB0aGUgc2FtZSwgYnV0IGhhdmUgZGlmZmVyaW5nIHR5cGVzLgogICAgICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgaWYgbGVuMSA+IGxlbjI6CiAgICAgICAgICAgICAgICBkaWZmZXJpbmcgKz0gKCdcbkZpcnN0ICVzIGNvbnRhaW5zICVkIGFkZGl0aW9uYWwgJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlbGVtZW50cy5cbicgJSAoc2VxX3R5cGVfbmFtZSwgbGVuMSAtIGxlbjIpKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmluZyArPSAoJ0ZpcnN0IGV4dHJhIGVsZW1lbnQgJWQ6XG4lc1xuJyAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobGVuMiwgc2VxMVtsZW4yXSkpCiAgICAgICAgICAgICAgICBleGNlcHQgKFR5cGVFcnJvciwgSW5kZXhFcnJvciwgTm90SW1wbGVtZW50ZWRFcnJvcik6CiAgICAgICAgICAgICAgICAgICAgZGlmZmVyaW5nICs9ICgnVW5hYmxlIHRvIGluZGV4IGVsZW1lbnQgJWQgJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29mIGZpcnN0ICVzXG4nICUgKGxlbjIsIHNlcV90eXBlX25hbWUpKQogICAgICAgICAgICBlbGlmIGxlbjEgPCBsZW4yOgogICAgICAgICAgICAgICAgZGlmZmVyaW5nICs9ICgnXG5TZWNvbmQgJXMgY29udGFpbnMgJWQgYWRkaXRpb25hbCAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VsZW1lbnRzLlxuJyAlIChzZXFfdHlwZV9uYW1lLCBsZW4yIC0gbGVuMSkpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgZGlmZmVyaW5nICs9ICgnRmlyc3QgZXh0cmEgZWxlbWVudCAlZDpcbiVzXG4nICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsZW4xLCBzZXEyW2xlbjFdKSkKICAgICAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBJbmRleEVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yKToKICAgICAgICAgICAgICAgICAgICBkaWZmZXJpbmcgKz0gKCdVbmFibGUgdG8gaW5kZXggZWxlbWVudCAlZCAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb2Ygc2Vjb25kICVzXG4nICUgKGxlbjEsIHNlcV90eXBlX25hbWUpKQogICAgICAgIHN0YW5kYXJkTXNnID0gZGlmZmVyaW5nCiAgICAgICAgZGlmZk1zZyA9ICdcbicgKyAnXG4nLmpvaW4oCiAgICAgICAgICAgIGRpZmZsaWIubmRpZmYocHByaW50LnBmb3JtYXQoc2VxMSkuc3BsaXRsaW5lcygpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBwcmludC5wZm9ybWF0KHNlcTIpLnNwbGl0bGluZXMoKSkpCgogICAgICAgIHN0YW5kYXJkTXNnID0gc2VsZi5fdHJ1bmNhdGVNZXNzYWdlKHN0YW5kYXJkTXNnLCBkaWZmTXNnKQogICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykKICAgICAgICBzZWxmLmZhaWwobXNnKQoKICAgIGRlZiBfdHJ1bmNhdGVNZXNzYWdlKHNlbGYsIG1lc3NhZ2UsIGRpZmYpOgogICAgICAgIG1heF9kaWZmID0gc2VsZi5tYXhEaWZmCiAgICAgICAgaWYgbWF4X2RpZmYgaXMgTm9uZSBvciBsZW4oZGlmZikgPD0gbWF4X2RpZmY6CiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlICsgZGlmZgogICAgICAgIHJldHVybiBtZXNzYWdlICsgKERJRkZfT01JVFRFRCAlIGxlbihkaWZmKSkKCiAgICBkZWYgYXNzZXJ0TGlzdEVxdWFsKHNlbGYsIGxpc3QxLCBsaXN0MiwgbXNnPU5vbmUpOgogICAgICAgICIiIkEgbGlzdC1zcGVjaWZpYyBlcXVhbGl0eSBhc3NlcnRpb24uCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGxpc3QxOiBUaGUgZmlyc3QgbGlzdCB0byBjb21wYXJlLgogICAgICAgICAgICBsaXN0MjogVGhlIHNlY29uZCBsaXN0IHRvIGNvbXBhcmUuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB0byB1c2Ugb24gZmFpbHVyZSBpbnN0ZWFkIG9mIGEgbGlzdCBvZgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLgoKICAgICAgICAiIiIKICAgICAgICBzZWxmLmFzc2VydFNlcXVlbmNlRXF1YWwobGlzdDEsIGxpc3QyLCBtc2csIHNlcV90eXBlPWxpc3QpCgogICAgZGVmIGFzc2VydFR1cGxlRXF1YWwoc2VsZiwgdHVwbGUxLCB0dXBsZTIsIG1zZz1Ob25lKToKICAgICAgICAiIiJBIHR1cGxlLXNwZWNpZmljIGVxdWFsaXR5IGFzc2VydGlvbi4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgdHVwbGUxOiBUaGUgZmlyc3QgdHVwbGUgdG8gY29tcGFyZS4KICAgICAgICAgICAgdHVwbGUyOiBUaGUgc2Vjb25kIHR1cGxlIHRvIGNvbXBhcmUuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB0byB1c2Ugb24gZmFpbHVyZSBpbnN0ZWFkIG9mIGEgbGlzdCBvZgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLgogICAgICAgICIiIgogICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbCh0dXBsZTEsIHR1cGxlMiwgbXNnLCBzZXFfdHlwZT10dXBsZSkKCiAgICBkZWYgYXNzZXJ0U2V0RXF1YWwoc2VsZiwgc2V0MSwgc2V0MiwgbXNnPU5vbmUpOgogICAgICAgICIiIkEgc2V0LXNwZWNpZmljIGVxdWFsaXR5IGFzc2VydGlvbi4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgc2V0MTogVGhlIGZpcnN0IHNldCB0byBjb21wYXJlLgogICAgICAgICAgICBzZXQyOiBUaGUgc2Vjb25kIHNldCB0byBjb21wYXJlLgogICAgICAgICAgICBtc2c6IE9wdGlvbmFsIG1lc3NhZ2UgdG8gdXNlIG9uIGZhaWx1cmUgaW5zdGVhZCBvZiBhIGxpc3Qgb2YKICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy4KCiAgICAgICAgYXNzZXJ0U2V0RXF1YWwgdXNlcyBkdWNrdHlwaW5nIHRvIHN1cHBvcnQgZGlmZmVyZW50IHR5cGVzIG9mIHNldHMsIGFuZAogICAgICAgIGlzIG9wdGltaXplZCBmb3Igc2V0cyBzcGVjaWZpY2FsbHkgKHBhcmFtZXRlcnMgbXVzdCBzdXBwb3J0IGEKICAgICAgICBkaWZmZXJlbmNlIG1ldGhvZCkuCiAgICAgICAgIiIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICBkaWZmZXJlbmNlMSA9IHNldDEuZGlmZmVyZW5jZShzZXQyKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3IgYXMgZToKICAgICAgICAgICAgc2VsZi5mYWlsKCdpbnZhbGlkIHR5cGUgd2hlbiBhdHRlbXB0aW5nIHNldCBkaWZmZXJlbmNlOiAlcycgJSBlKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlOgogICAgICAgICAgICBzZWxmLmZhaWwoJ2ZpcnN0IGFyZ3VtZW50IGRvZXMgbm90IHN1cHBvcnQgc2V0IGRpZmZlcmVuY2U6ICVzJyAlIGUpCgogICAgICAgIHRyeToKICAgICAgICAgICAgZGlmZmVyZW5jZTIgPSBzZXQyLmRpZmZlcmVuY2Uoc2V0MSkKICAgICAgICBleGNlcHQgVHlwZUVycm9yIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZmFpbCgnaW52YWxpZCB0eXBlIHdoZW4gYXR0ZW1wdGluZyBzZXQgZGlmZmVyZW5jZTogJXMnICUgZSkKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToKICAgICAgICAgICAgc2VsZi5mYWlsKCdzZWNvbmQgYXJndW1lbnQgZG9lcyBub3Qgc3VwcG9ydCBzZXQgZGlmZmVyZW5jZTogJXMnICUgZSkKCiAgICAgICAgaWYgbm90IChkaWZmZXJlbmNlMSBvciBkaWZmZXJlbmNlMik6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBsaW5lcyA9IFtdCiAgICAgICAgaWYgZGlmZmVyZW5jZTE6CiAgICAgICAgICAgIGxpbmVzLmFwcGVuZCgnSXRlbXMgaW4gdGhlIGZpcnN0IHNldCBidXQgbm90IHRoZSBzZWNvbmQ6JykKICAgICAgICAgICAgZm9yIGl0ZW0gaW4gZGlmZmVyZW5jZTE6CiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQocmVwcihpdGVtKSkKICAgICAgICBpZiBkaWZmZXJlbmNlMjoKICAgICAgICAgICAgbGluZXMuYXBwZW5kKCdJdGVtcyBpbiB0aGUgc2Vjb25kIHNldCBidXQgbm90IHRoZSBmaXJzdDonKQogICAgICAgICAgICBmb3IgaXRlbSBpbiBkaWZmZXJlbmNlMjoKICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChyZXByKGl0ZW0pKQoKICAgICAgICBzdGFuZGFyZE1zZyA9ICdcbicuam9pbihsaW5lcykKICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0SW4oc2VsZiwgbWVtYmVyLCBjb250YWluZXIsIG1zZz1Ob25lKToKICAgICAgICAiIiJKdXN0IGxpa2Ugc2VsZi5hc3NlcnRUcnVlKGEgaW4gYiksIGJ1dCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIG1lbWJlciBub3QgaW4gY29udGFpbmVyOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyBub3QgZm91bmQgaW4gJXMnICUgKHNhZmVfcmVwcihtZW1iZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfcmVwcihjb250YWluZXIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0Tm90SW4oc2VsZiwgbWVtYmVyLCBjb250YWluZXIsIG1zZz1Ob25lKToKICAgICAgICAiIiJKdXN0IGxpa2Ugc2VsZi5hc3NlcnRUcnVlKGEgbm90IGluIGIpLCBidXQgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBtZW1iZXIgaW4gY29udGFpbmVyOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyB1bmV4cGVjdGVkbHkgZm91bmQgaW4gJXMnICUgKHNhZmVfcmVwcihtZW1iZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfcmVwcihjb250YWluZXIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0SXMoc2VsZiwgZXhwcjEsIGV4cHIyLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiSnVzdCBsaWtlIHNlbGYuYXNzZXJ0VHJ1ZShhIGlzIGIpLCBidXQgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBleHByMSBpcyBub3QgZXhwcjI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIGlzIG5vdCAlcycgJSAoc2FmZV9yZXByKGV4cHIxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKGV4cHIyKSkKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydElzTm90KHNlbGYsIGV4cHIxLCBleHByMiwgbXNnPU5vbmUpOgogICAgICAgICIiIkp1c3QgbGlrZSBzZWxmLmFzc2VydFRydWUoYSBpcyBub3QgYiksIGJ1dCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIGV4cHIxIGlzIGV4cHIyOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICd1bmV4cGVjdGVkbHkgaWRlbnRpY2FsOiAlcycgJSAoc2FmZV9yZXByKGV4cHIxKSwpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnREaWN0RXF1YWwoc2VsZiwgZDEsIGQyLCBtc2c9Tm9uZSk6CiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGQxLCBkaWN0LCAnRmlyc3QgYXJndW1lbnQgaXMgbm90IGEgZGljdGlvbmFyeScpCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGQyLCBkaWN0LCAnU2Vjb25kIGFyZ3VtZW50IGlzIG5vdCBhIGRpY3Rpb25hcnknKQoKICAgICAgICBpZiBkMSAhPSBkMjoKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnJXMgIT0gJXMnICUgKHNhZmVfcmVwcihkMSwgVHJ1ZSksIHNhZmVfcmVwcihkMiwgVHJ1ZSkpCiAgICAgICAgICAgIGRpZmYgPSAoJ1xuJyArICdcbicuam9pbihkaWZmbGliLm5kaWZmKAogICAgICAgICAgICAgICAgICAgICAgICAgICBwcHJpbnQucGZvcm1hdChkMSkuc3BsaXRsaW5lcygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICBwcHJpbnQucGZvcm1hdChkMikuc3BsaXRsaW5lcygpKSkpCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gc2VsZi5fdHJ1bmNhdGVNZXNzYWdlKHN0YW5kYXJkTXNnLCBkaWZmKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0KHNlbGYsIHN1YnNldCwgZGljdGlvbmFyeSwgbXNnPU5vbmUpOgogICAgICAgICIiIkNoZWNrcyB3aGV0aGVyIGRpY3Rpb25hcnkgaXMgYSBzdXBlcnNldCBvZiBzdWJzZXQuIiIiCiAgICAgICAgd2FybmluZ3Mud2FybignYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0IGlzIGRlcHJlY2F0ZWQnLAogICAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nKQogICAgICAgIG1pc3NpbmcgPSBbXQogICAgICAgIG1pc21hdGNoZWQgPSBbXQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIHN1YnNldC5pdGVtcygpOgogICAgICAgICAgICBpZiBrZXkgbm90IGluIGRpY3Rpb25hcnk6CiAgICAgICAgICAgICAgICBtaXNzaW5nLmFwcGVuZChrZXkpCiAgICAgICAgICAgIGVsaWYgdmFsdWUgIT0gZGljdGlvbmFyeVtrZXldOgogICAgICAgICAgICAgICAgbWlzbWF0Y2hlZC5hcHBlbmQoJyVzLCBleHBlY3RlZDogJXMsIGFjdHVhbDogJXMnICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzYWZlX3JlcHIoa2V5KSwgc2FmZV9yZXByKHZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoZGljdGlvbmFyeVtrZXldKSkpCgogICAgICAgIGlmIG5vdCAobWlzc2luZyBvciBtaXNtYXRjaGVkKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHN0YW5kYXJkTXNnID0gJycKICAgICAgICBpZiBtaXNzaW5nOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICdNaXNzaW5nOiAlcycgJSAnLCcuam9pbihzYWZlX3JlcHIobSkgZm9yIG0gaW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pc3NpbmcpCiAgICAgICAgaWYgbWlzbWF0Y2hlZDoKICAgICAgICAgICAgaWYgc3RhbmRhcmRNc2c6CiAgICAgICAgICAgICAgICBzdGFuZGFyZE1zZyArPSAnOyAnCiAgICAgICAgICAgIHN0YW5kYXJkTXNnICs9ICdNaXNtYXRjaGVkIHZhbHVlczogJXMnICUgJywnLmpvaW4obWlzbWF0Y2hlZCkKCiAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgoKICAgIGRlZiBhc3NlcnRDb3VudEVxdWFsKHNlbGYsIGZpcnN0LCBzZWNvbmQsIG1zZz1Ob25lKToKICAgICAgICAiIiJBbiB1bm9yZGVyZWQgc2VxdWVuY2UgY29tcGFyaXNvbiBhc3NlcnRpbmcgdGhhdCB0aGUgc2FtZSBlbGVtZW50cywKICAgICAgICByZWdhcmRsZXNzIG9mIG9yZGVyLiAgSWYgdGhlIHNhbWUgZWxlbWVudCBvY2N1cnMgbW9yZSB0aGFuIG9uY2UsCiAgICAgICAgaXQgdmVyaWZpZXMgdGhhdCB0aGUgZWxlbWVudHMgb2NjdXIgdGhlIHNhbWUgbnVtYmVyIG9mIHRpbWVzLgoKICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChDb3VudGVyKGxpc3QoZmlyc3QpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb3VudGVyKGxpc3Qoc2Vjb25kKSkpCgogICAgICAgICBFeGFtcGxlOgogICAgICAgICAgICAtIFswLCAxLCAxXSBhbmQgWzEsIDAsIDFdIGNvbXBhcmUgZXF1YWwuCiAgICAgICAgICAgIC0gWzAsIDAsIDFdIGFuZCBbMCwgMV0gY29tcGFyZSB1bmVxdWFsLgoKICAgICAgICAiIiIKICAgICAgICBmaXJzdF9zZXEsIHNlY29uZF9zZXEgPSBsaXN0KGZpcnN0KSwgbGlzdChzZWNvbmQpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmaXJzdCA9IGNvbGxlY3Rpb25zLkNvdW50ZXIoZmlyc3Rfc2VxKQogICAgICAgICAgICBzZWNvbmQgPSBjb2xsZWN0aW9ucy5Db3VudGVyKHNlY29uZF9zZXEpCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICAgICAgIyBIYW5kbGUgY2FzZSB3aXRoIHVuaGFzaGFibGUgZWxlbWVudHMKICAgICAgICAgICAgZGlmZmVyZW5jZXMgPSBfY291bnRfZGlmZl9hbGxfcHVycG9zZShmaXJzdF9zZXEsIHNlY29uZF9zZXEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgZmlyc3QgPT0gc2Vjb25kOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGRpZmZlcmVuY2VzID0gX2NvdW50X2RpZmZfaGFzaGFibGUoZmlyc3Rfc2VxLCBzZWNvbmRfc2VxKQoKICAgICAgICBpZiBkaWZmZXJlbmNlczoKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnRWxlbWVudCBjb3VudHMgd2VyZSBub3QgZXF1YWw6XG4nCiAgICAgICAgICAgIGxpbmVzID0gWydGaXJzdCBoYXMgJWQsIFNlY29uZCBoYXMgJWQ6ICAlcicgJSBkaWZmIGZvciBkaWZmIGluIGRpZmZlcmVuY2VzXQogICAgICAgICAgICBkaWZmTXNnID0gJ1xuJy5qb2luKGxpbmVzKQogICAgICAgICAgICBzdGFuZGFyZE1zZyA9IHNlbGYuX3RydW5jYXRlTWVzc2FnZShzdGFuZGFyZE1zZywgZGlmZk1zZykKICAgICAgICAgICAgbXNnID0gc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKQogICAgICAgICAgICBzZWxmLmZhaWwobXNnKQoKICAgIGRlZiBhc3NlcnRNdWx0aUxpbmVFcXVhbChzZWxmLCBmaXJzdCwgc2Vjb25kLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiQXNzZXJ0IHRoYXQgdHdvIG11bHRpLWxpbmUgc3RyaW5ncyBhcmUgZXF1YWwuIiIiCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGZpcnN0LCBzdHIsICdGaXJzdCBhcmd1bWVudCBpcyBub3QgYSBzdHJpbmcnKQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzZWNvbmQsIHN0ciwgJ1NlY29uZCBhcmd1bWVudCBpcyBub3QgYSBzdHJpbmcnKQoKICAgICAgICBpZiBmaXJzdCAhPSBzZWNvbmQ6CiAgICAgICAgICAgICMgZG9uJ3QgdXNlIGRpZmZsaWIgaWYgdGhlIHN0cmluZ3MgYXJlIHRvbyBsb25nCiAgICAgICAgICAgIGlmIChsZW4oZmlyc3QpID4gc2VsZi5fZGlmZlRocmVzaG9sZCBvcgogICAgICAgICAgICAgICAgbGVuKHNlY29uZCkgPiBzZWxmLl9kaWZmVGhyZXNob2xkKToKICAgICAgICAgICAgICAgIHNlbGYuX2Jhc2VBc3NlcnRFcXVhbChmaXJzdCwgc2Vjb25kLCBtc2cpCiAgICAgICAgICAgIGZpcnN0bGluZXMgPSBmaXJzdC5zcGxpdGxpbmVzKGtlZXBlbmRzPVRydWUpCiAgICAgICAgICAgIHNlY29uZGxpbmVzID0gc2Vjb25kLnNwbGl0bGluZXMoa2VlcGVuZHM9VHJ1ZSkKICAgICAgICAgICAgaWYgbGVuKGZpcnN0bGluZXMpID09IDEgYW5kIGZpcnN0LnN0cmlwKCdcclxuJykgPT0gZmlyc3Q6CiAgICAgICAgICAgICAgICBmaXJzdGxpbmVzID0gW2ZpcnN0ICsgJ1xuJ10KICAgICAgICAgICAgICAgIHNlY29uZGxpbmVzID0gW3NlY29uZCArICdcbiddCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzICE9ICVzJyAlIChzYWZlX3JlcHIoZmlyc3QsIFRydWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKHNlY29uZCwgVHJ1ZSkpCiAgICAgICAgICAgIGRpZmYgPSAnXG4nICsgJycuam9pbihkaWZmbGliLm5kaWZmKGZpcnN0bGluZXMsIHNlY29uZGxpbmVzKSkKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSBzZWxmLl90cnVuY2F0ZU1lc3NhZ2Uoc3RhbmRhcmRNc2csIGRpZmYpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnRMZXNzKHNlbGYsIGEsIGIsIG1zZz1Ob25lKToKICAgICAgICAiIiJKdXN0IGxpa2Ugc2VsZi5hc3NlcnRUcnVlKGEgPCBiKSwgYnV0IHdpdGggYSBuaWNlciBkZWZhdWx0IG1lc3NhZ2UuIiIiCiAgICAgICAgaWYgbm90IGEgPCBiOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyBub3QgbGVzcyB0aGFuICVzJyAlIChzYWZlX3JlcHIoYSksIHNhZmVfcmVwcihiKSkKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydExlc3NFcXVhbChzZWxmLCBhLCBiLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiSnVzdCBsaWtlIHNlbGYuYXNzZXJ0VHJ1ZShhIDw9IGIpLCBidXQgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBub3QgYSA8PSBiOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyBub3QgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJyAlIChzYWZlX3JlcHIoYSksIHNhZmVfcmVwcihiKSkKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydEdyZWF0ZXIoc2VsZiwgYSwgYiwgbXNnPU5vbmUpOgogICAgICAgICIiIkp1c3QgbGlrZSBzZWxmLmFzc2VydFRydWUoYSA+IGIpLCBidXQgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBub3QgYSA+IGI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIG5vdCBncmVhdGVyIHRoYW4gJXMnICUgKHNhZmVfcmVwcihhKSwgc2FmZV9yZXByKGIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0R3JlYXRlckVxdWFsKHNlbGYsIGEsIGIsIG1zZz1Ob25lKToKICAgICAgICAiIiJKdXN0IGxpa2Ugc2VsZi5hc3NlcnRUcnVlKGEgPj0gYiksIGJ1dCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIG5vdCBhID49IGI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIG5vdCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMnICUgKHNhZmVfcmVwcihhKSwgc2FmZV9yZXByKGIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0SXNOb25lKHNlbGYsIG9iaiwgbXNnPU5vbmUpOgogICAgICAgICIiIlNhbWUgYXMgc2VsZi5hc3NlcnRUcnVlKG9iaiBpcyBOb25lKSwgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBvYmogaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIGlzIG5vdCBOb25lJyAlIChzYWZlX3JlcHIob2JqKSwpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnRJc05vdE5vbmUoc2VsZiwgb2JqLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiSW5jbHVkZWQgZm9yIHN5bW1ldHJ5IHdpdGggYXNzZXJ0SXNOb25lLiIiIgogICAgICAgIGlmIG9iaiBpcyBOb25lOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICd1bmV4cGVjdGVkbHkgTm9uZScKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydElzSW5zdGFuY2Uoc2VsZiwgb2JqLCBjbHMsIG1zZz1Ob25lKToKICAgICAgICAiIiJTYW1lIGFzIHNlbGYuYXNzZXJ0VHJ1ZShpc2luc3RhbmNlKG9iaiwgY2xzKSksIHdpdGggYSBuaWNlcgogICAgICAgIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvYmosIGNscyk6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiAlcicgJSAoc2FmZV9yZXByKG9iaiksIGNscykKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydE5vdElzSW5zdGFuY2Uoc2VsZiwgb2JqLCBjbHMsIG1zZz1Ob25lKToKICAgICAgICAiIiJJbmNsdWRlZCBmb3Igc3ltbWV0cnkgd2l0aCBhc3NlcnRJc0luc3RhbmNlLiIiIgogICAgICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBjbHMpOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyBpcyBhbiBpbnN0YW5jZSBvZiAlcicgJSAoc2FmZV9yZXByKG9iaiksIGNscykKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydFJhaXNlc1JlZ2V4KHNlbGYsIGV4cGVjdGVkX2V4Y2VwdGlvbiwgZXhwZWN0ZWRfcmVnZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGFibGVfb2JqPU5vbmUsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgIiIiQXNzZXJ0cyB0aGF0IHRoZSBtZXNzYWdlIGluIGEgcmFpc2VkIGV4Y2VwdGlvbiBtYXRjaGVzIGEgcmVnZXguCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGV4cGVjdGVkX2V4Y2VwdGlvbjogRXhjZXB0aW9uIGNsYXNzIGV4cGVjdGVkIHRvIGJlIHJhaXNlZC4KICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXg6IFJlZ2V4IChyZSBwYXR0ZXJuIG9iamVjdCBvciBzdHJpbmcpIGV4cGVjdGVkCiAgICAgICAgICAgICAgICAgICAgdG8gYmUgZm91bmQgaW4gZXJyb3IgbWVzc2FnZS4KICAgICAgICAgICAgY2FsbGFibGVfb2JqOiBGdW5jdGlvbiB0byBiZSBjYWxsZWQuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB1c2VkIGluIGNhc2Ugb2YgZmFpbHVyZS4gQ2FuIG9ubHkgYmUgdXNlZAogICAgICAgICAgICAgICAgICAgIHdoZW4gYXNzZXJ0UmFpc2VzUmVnZXggaXMgdXNlZCBhcyBhIGNvbnRleHQgbWFuYWdlci4KICAgICAgICAgICAgYXJnczogRXh0cmEgYXJncy4KICAgICAgICAgICAga3dhcmdzOiBFeHRyYSBrd2FyZ3MuCiAgICAgICAgIiIiCiAgICAgICAgY29udGV4dCA9IF9Bc3NlcnRSYWlzZXNDb250ZXh0KGV4cGVjdGVkX2V4Y2VwdGlvbiwgc2VsZiwgY2FsbGFibGVfb2JqLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZF9yZWdleCkKCiAgICAgICAgcmV0dXJuIGNvbnRleHQuaGFuZGxlKCdhc3NlcnRSYWlzZXNSZWdleCcsIGNhbGxhYmxlX29iaiwgYXJncywga3dhcmdzKQoKICAgIGRlZiBhc3NlcnRXYXJuc1JlZ2V4KHNlbGYsIGV4cGVjdGVkX3dhcm5pbmcsIGV4cGVjdGVkX3JlZ2V4LAogICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGFibGVfb2JqPU5vbmUsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgIiIiQXNzZXJ0cyB0aGF0IHRoZSBtZXNzYWdlIGluIGEgdHJpZ2dlcmVkIHdhcm5pbmcgbWF0Y2hlcyBhIHJlZ2V4cC4KICAgICAgICBCYXNpYyBmdW5jdGlvbmluZyBpcyBzaW1pbGFyIHRvIGFzc2VydFdhcm5zKCkgd2l0aCB0aGUgYWRkaXRpb24KICAgICAgICB0aGF0IG9ubHkgd2FybmluZ3Mgd2hvc2UgbWVzc2FnZXMgYWxzbyBtYXRjaCB0aGUgcmVndWxhciBleHByZXNzaW9uCiAgICAgICAgYXJlIGNvbnNpZGVyZWQgc3VjY2Vzc2Z1bCBtYXRjaGVzLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBleHBlY3RlZF93YXJuaW5nOiBXYXJuaW5nIGNsYXNzIGV4cGVjdGVkIHRvIGJlIHRyaWdnZXJlZC4KICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXg6IFJlZ2V4IChyZSBwYXR0ZXJuIG9iamVjdCBvciBzdHJpbmcpIGV4cGVjdGVkCiAgICAgICAgICAgICAgICAgICAgdG8gYmUgZm91bmQgaW4gZXJyb3IgbWVzc2FnZS4KICAgICAgICAgICAgY2FsbGFibGVfb2JqOiBGdW5jdGlvbiB0byBiZSBjYWxsZWQuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB1c2VkIGluIGNhc2Ugb2YgZmFpbHVyZS4gQ2FuIG9ubHkgYmUgdXNlZAogICAgICAgICAgICAgICAgICAgIHdoZW4gYXNzZXJ0V2FybnNSZWdleCBpcyB1c2VkIGFzIGEgY29udGV4dCBtYW5hZ2VyLgogICAgICAgICAgICBhcmdzOiBFeHRyYSBhcmdzLgogICAgICAgICAgICBrd2FyZ3M6IEV4dHJhIGt3YXJncy4KICAgICAgICAiIiIKICAgICAgICBjb250ZXh0ID0gX0Fzc2VydFdhcm5zQ29udGV4dChleHBlY3RlZF93YXJuaW5nLCBzZWxmLCBjYWxsYWJsZV9vYmosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXgpCiAgICAgICAgcmV0dXJuIGNvbnRleHQuaGFuZGxlKCdhc3NlcnRXYXJuc1JlZ2V4JywgY2FsbGFibGVfb2JqLCBhcmdzLCBrd2FyZ3MpCgogICAgZGVmIGFzc2VydFJlZ2V4KHNlbGYsIHRleHQsIGV4cGVjdGVkX3JlZ2V4LCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiRmFpbCB0aGUgdGVzdCB1bmxlc3MgdGhlIHRleHQgbWF0Y2hlcyB0aGUgcmVndWxhciBleHByZXNzaW9uLiIiIgogICAgICAgIGlmIGlzaW5zdGFuY2UoZXhwZWN0ZWRfcmVnZXgsIChzdHIsIGJ5dGVzKSk6CiAgICAgICAgICAgIGFzc2VydCBleHBlY3RlZF9yZWdleCwgImV4cGVjdGVkX3JlZ2V4IG11c3Qgbm90IGJlIGVtcHR5LiIKICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXggPSByZS5jb21waWxlKGV4cGVjdGVkX3JlZ2V4KQogICAgICAgIGlmIG5vdCBleHBlY3RlZF9yZWdleC5zZWFyY2godGV4dCk6CiAgICAgICAgICAgIG1zZyA9IG1zZyBvciAiUmVnZXggZGlkbid0IG1hdGNoIgogICAgICAgICAgICBtc2cgPSAnJXM6ICVyIG5vdCBmb3VuZCBpbiAlcicgJSAobXNnLCBleHBlY3RlZF9yZWdleC5wYXR0ZXJuLCB0ZXh0KQogICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKICAgIGRlZiBhc3NlcnROb3RSZWdleChzZWxmLCB0ZXh0LCB1bmV4cGVjdGVkX3JlZ2V4LCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiRmFpbCB0aGUgdGVzdCBpZiB0aGUgdGV4dCBtYXRjaGVzIHRoZSByZWd1bGFyIGV4cHJlc3Npb24uIiIiCiAgICAgICAgaWYgaXNpbnN0YW5jZSh1bmV4cGVjdGVkX3JlZ2V4LCAoc3RyLCBieXRlcykpOgogICAgICAgICAgICB1bmV4cGVjdGVkX3JlZ2V4ID0gcmUuY29tcGlsZSh1bmV4cGVjdGVkX3JlZ2V4KQogICAgICAgIG1hdGNoID0gdW5leHBlY3RlZF9yZWdleC5zZWFyY2godGV4dCkKICAgICAgICBpZiBtYXRjaDoKICAgICAgICAgICAgbXNnID0gbXNnIG9yICJSZWdleCBtYXRjaGVkIgogICAgICAgICAgICBtc2cgPSAnJXM6ICVyIG1hdGNoZXMgJXIgaW4gJXInICUgKG1zZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0W21hdGNoLnN0YXJ0KCk6bWF0Y2guZW5kKCldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZXhwZWN0ZWRfcmVnZXgucGF0dGVybiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0KQogICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKCiAgICBkZWYgX2RlcHJlY2F0ZShvcmlnaW5hbF9mdW5jKToKICAgICAgICBkZWYgZGVwcmVjYXRlZF9mdW5jKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgICAgICAnUGxlYXNlIHVzZSB7MH0gaW5zdGVhZC4nLmZvcm1hdChvcmlnaW5hbF9mdW5jLl9fbmFtZV9fKSwKICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsX2Z1bmMoKmFyZ3MsICoqa3dhcmdzKQogICAgICAgIHJldHVybiBkZXByZWNhdGVkX2Z1bmMKCiAgICAjIHNlZSAjOTQyNAogICAgZmFpbFVubGVzc0VxdWFsID0gYXNzZXJ0RXF1YWxzID0gX2RlcHJlY2F0ZShhc3NlcnRFcXVhbCkKICAgIGZhaWxJZkVxdWFsID0gYXNzZXJ0Tm90RXF1YWxzID0gX2RlcHJlY2F0ZShhc3NlcnROb3RFcXVhbCkKICAgIGZhaWxVbmxlc3NBbG1vc3RFcXVhbCA9IGFzc2VydEFsbW9zdEVxdWFscyA9IF9kZXByZWNhdGUoYXNzZXJ0QWxtb3N0RXF1YWwpCiAgICBmYWlsSWZBbG1vc3RFcXVhbCA9IGFzc2VydE5vdEFsbW9zdEVxdWFscyA9IF9kZXByZWNhdGUoYXNzZXJ0Tm90QWxtb3N0RXF1YWwpCiAgICBmYWlsVW5sZXNzID0gYXNzZXJ0XyA9IF9kZXByZWNhdGUoYXNzZXJ0VHJ1ZSkKICAgIGZhaWxVbmxlc3NSYWlzZXMgPSBfZGVwcmVjYXRlKGFzc2VydFJhaXNlcykKICAgIGZhaWxJZiA9IF9kZXByZWNhdGUoYXNzZXJ0RmFsc2UpCiAgICBhc3NlcnRSYWlzZXNSZWdleHAgPSBfZGVwcmVjYXRlKGFzc2VydFJhaXNlc1JlZ2V4KQogICAgYXNzZXJ0UmVnZXhwTWF0Y2hlcyA9IF9kZXByZWNhdGUoYXNzZXJ0UmVnZXgpCgoKCmNsYXNzIEZ1bmN0aW9uVGVzdENhc2UoVGVzdENhc2UpOgogICAgIiIiQSB0ZXN0IGNhc2UgdGhhdCB3cmFwcyBhIHRlc3QgZnVuY3Rpb24uCgogICAgVGhpcyBpcyB1c2VmdWwgZm9yIHNsaXBwaW5nIHByZS1leGlzdGluZyB0ZXN0IGZ1bmN0aW9ucyBpbnRvIHRoZQogICAgdW5pdHRlc3QgZnJhbWV3b3JrLiBPcHRpb25hbGx5LCBzZXQtdXAgYW5kIHRpZHktdXAgZnVuY3Rpb25zIGNhbiBiZQogICAgc3VwcGxpZWQuIEFzIHdpdGggVGVzdENhc2UsIHRoZSB0aWR5LXVwICgndGVhckRvd24nKSBmdW5jdGlvbiB3aWxsCiAgICBhbHdheXMgYmUgY2FsbGVkIGlmIHRoZSBzZXQtdXAgKCdzZXRVcCcpIGZ1bmN0aW9uIHJhbiBzdWNjZXNzZnVsbHkuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGVzdEZ1bmMsIHNldFVwPU5vbmUsIHRlYXJEb3duPU5vbmUsIGRlc2NyaXB0aW9uPU5vbmUpOgogICAgICAgIHN1cGVyKEZ1bmN0aW9uVGVzdENhc2UsIHNlbGYpLl9faW5pdF9fKCkKICAgICAgICBzZWxmLl9zZXRVcEZ1bmMgPSBzZXRVcAogICAgICAgIHNlbGYuX3RlYXJEb3duRnVuYyA9IHRlYXJEb3duCiAgICAgICAgc2VsZi5fdGVzdEZ1bmMgPSB0ZXN0RnVuYwogICAgICAgIHNlbGYuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24KCiAgICBkZWYgc2V0VXAoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fc2V0VXBGdW5jIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLl9zZXRVcEZ1bmMoKQoKICAgIGRlZiB0ZWFyRG93bihzZWxmKToKICAgICAgICBpZiBzZWxmLl90ZWFyRG93bkZ1bmMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuX3RlYXJEb3duRnVuYygpCgogICAgZGVmIHJ1blRlc3Qoc2VsZik6CiAgICAgICAgc2VsZi5fdGVzdEZ1bmMoKQoKICAgIGRlZiBpZChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fdGVzdEZ1bmMuX19uYW1lX18KCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgc2VsZi5fX2NsYXNzX18pOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICAgICAgcmV0dXJuIHNlbGYuX3NldFVwRnVuYyA9PSBvdGhlci5fc2V0VXBGdW5jIGFuZCBcCiAgICAgICAgICAgICAgIHNlbGYuX3RlYXJEb3duRnVuYyA9PSBvdGhlci5fdGVhckRvd25GdW5jIGFuZCBcCiAgICAgICAgICAgICAgIHNlbGYuX3Rlc3RGdW5jID09IG90aGVyLl90ZXN0RnVuYyBhbmQgXAogICAgICAgICAgICAgICBzZWxmLl9kZXNjcmlwdGlvbiA9PSBvdGhlci5fZGVzY3JpcHRpb24KCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gbm90IHNlbGYgPT0gb3RoZXIKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2goKHR5cGUoc2VsZiksIHNlbGYuX3NldFVwRnVuYywgc2VsZi5fdGVhckRvd25GdW5jLAogICAgICAgICAgICAgICAgICAgICBzZWxmLl90ZXN0RnVuYywgc2VsZi5fZGVzY3JpcHRpb24pKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiAiJXMgKCVzKSIgJSAoc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fdGVzdEZ1bmMuX19uYW1lX18pCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAiPCVzIHRlYz0lcz4iICUgKHN0cmNsYXNzKHNlbGYuX19jbGFzc19fKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3Rlc3RGdW5jKQoKICAgIGRlZiBzaG9ydERlc2NyaXB0aW9uKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX2Rlc2NyaXB0aW9uIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fZGVzY3JpcHRpb24KICAgICAgICBkb2MgPSBzZWxmLl90ZXN0RnVuYy5fX2RvY19fCiAgICAgICAgcmV0dXJuIGRvYyBhbmQgZG9jLnNwbGl0KCJcbiIpWzBdLnN0cmlwKCkgb3IgTm9uZQo=',
'/Lib/unittest/main.py':'IiIiVW5pdHRlc3QgbWFpbiBwcm9ncmFtIiIiCgppbXBvcnQgc3lzCmltcG9ydCBvcHRwYXJzZQppbXBvcnQgb3MKCmZyb20gLiBpbXBvcnQgbG9hZGVyLCBydW5uZXIKZnJvbSAuc2lnbmFscyBpbXBvcnQgaW5zdGFsbEhhbmRsZXIKCl9fdW5pdHRlc3QgPSBUcnVlCgpGQUlMRkFTVCAgICAgPSAiICAtZiwgLS1mYWlsZmFzdCAgIFN0b3Agb24gZmlyc3QgZmFpbHVyZVxuIgpDQVRDSEJSRUFLICAgPSAiICAtYywgLS1jYXRjaCAgICAgIENhdGNoIGNvbnRyb2wtQyBhbmQgZGlzcGxheSByZXN1bHRzXG4iCkJVRkZFUk9VVFBVVCA9ICIgIC1iLCAtLWJ1ZmZlciAgICAgQnVmZmVyIHN0ZG91dCBhbmQgc3RkZXJyIGR1cmluZyB0ZXN0IHJ1bnNcbiIKClVTQUdFX0FTX01BSU4gPSAiIiJcClVzYWdlOiAlKHByb2dOYW1lKXMgW29wdGlvbnNdIFt0ZXN0c10KCk9wdGlvbnM6CiAgLWgsIC0taGVscCAgICAgICBTaG93IHRoaXMgbWVzc2FnZQogIC12LCAtLXZlcmJvc2UgICAgVmVyYm9zZSBvdXRwdXQKICAtcSwgLS1xdWlldCAgICAgIE1pbmltYWwgb3V0cHV0CiUoZmFpbGZhc3QpcyUoY2F0Y2hicmVhaylzJShidWZmZXIpcwpFeGFtcGxlczoKICAlKHByb2dOYW1lKXMgdGVzdF9tb2R1bGUgICAgICAgICAgICAgICAtIHJ1biB0ZXN0cyBmcm9tIHRlc3RfbW9kdWxlCiAgJShwcm9nTmFtZSlzIG1vZHVsZS5UZXN0Q2xhc3MgICAgICAgICAgLSBydW4gdGVzdHMgZnJvbSBtb2R1bGUuVGVzdENsYXNzCiAgJShwcm9nTmFtZSlzIG1vZHVsZS5DbGFzcy50ZXN0X21ldGhvZCAgLSBydW4gc3BlY2lmaWVkIHRlc3QgbWV0aG9kCgpbdGVzdHNdIGNhbiBiZSBhIGxpc3Qgb2YgYW55IG51bWJlciBvZiB0ZXN0IG1vZHVsZXMsIGNsYXNzZXMgYW5kIHRlc3QKbWV0aG9kcy4KCkFsdGVybmF0aXZlIFVzYWdlOiAlKHByb2dOYW1lKXMgZGlzY292ZXIgW29wdGlvbnNdCgpPcHRpb25zOgogIC12LCAtLXZlcmJvc2UgICAgVmVyYm9zZSBvdXRwdXQKJShmYWlsZmFzdClzJShjYXRjaGJyZWFrKXMlKGJ1ZmZlcilzICAtcyBkaXJlY3RvcnkgICAgIERpcmVjdG9yeSB0byBzdGFydCBkaXNjb3ZlcnkgKCcuJyBkZWZhdWx0KQogIC1wIHBhdHRlcm4gICAgICAgUGF0dGVybiB0byBtYXRjaCB0ZXN0IGZpbGVzICgndGVzdCoucHknIGRlZmF1bHQpCiAgLXQgZGlyZWN0b3J5ICAgICBUb3AgbGV2ZWwgZGlyZWN0b3J5IG9mIHByb2plY3QgKGRlZmF1bHQgdG8KICAgICAgICAgICAgICAgICAgIHN0YXJ0IGRpcmVjdG9yeSkKCkZvciB0ZXN0IGRpc2NvdmVyeSBhbGwgdGVzdCBtb2R1bGVzIG11c3QgYmUgaW1wb3J0YWJsZSBmcm9tIHRoZSB0b3AKbGV2ZWwgZGlyZWN0b3J5IG9mIHRoZSBwcm9qZWN0LgoiIiIKClVTQUdFX0ZST01fTU9EVUxFID0gIiIiXApVc2FnZTogJShwcm9nTmFtZSlzIFtvcHRpb25zXSBbdGVzdF0gWy4uLl0KCk9wdGlvbnM6CiAgLWgsIC0taGVscCAgICAgICBTaG93IHRoaXMgbWVzc2FnZQogIC12LCAtLXZlcmJvc2UgICAgVmVyYm9zZSBvdXRwdXQKICAtcSwgLS1xdWlldCAgICAgIE1pbmltYWwgb3V0cHV0CiUoZmFpbGZhc3QpcyUoY2F0Y2hicmVhaylzJShidWZmZXIpcwpFeGFtcGxlczoKICAlKHByb2dOYW1lKXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBydW4gZGVmYXVsdCBzZXQgb2YgdGVzdHMKICAlKHByb2dOYW1lKXMgTXlUZXN0U3VpdGUgICAgICAgICAgICAgICAgICAgLSBydW4gc3VpdGUgJ015VGVzdFN1aXRlJwogICUocHJvZ05hbWUpcyBNeVRlc3RDYXNlLnRlc3RTb21ldGhpbmcgICAgICAtIHJ1biBNeVRlc3RDYXNlLnRlc3RTb21ldGhpbmcKICAlKHByb2dOYW1lKXMgTXlUZXN0Q2FzZSAgICAgICAgICAgICAgICAgICAgLSBydW4gYWxsICd0ZXN0KicgdGVzdCBtZXRob2RzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gTXlUZXN0Q2FzZQoiIiIKCmRlZiBfY29udmVydF9uYW1lKG5hbWUpOgogICAgIyBvbiBMaW51eCAvIE1hYyBPUyBYICdmb28uUFknIGlzIG5vdCBpbXBvcnRhYmxlLCBidXQgb24KICAgICMgV2luZG93cyBpdCBpcy4gU2ltcGxlciB0byBkbyBhIGNhc2UgaW5zZW5zaXRpdmUgbWF0Y2gKICAgICMgYSBiZXR0ZXIgY2hlY2sgd291bGQgYmUgdG8gY2hlY2sgdGhhdCB0aGUgbmFtZSBpcyBhCiAgICAjIHZhbGlkIFB5dGhvbiBtb2R1bGUgbmFtZS4KICAgIGlmIG9zLnBhdGguaXNmaWxlKG5hbWUpIGFuZCBuYW1lLmxvd2VyKCkuZW5kc3dpdGgoJy5weScpOgogICAgICAgIGlmIG9zLnBhdGguaXNhYnMobmFtZSk6CiAgICAgICAgICAgIHJlbF9wYXRoID0gb3MucGF0aC5yZWxwYXRoKG5hbWUsIG9zLmdldGN3ZCgpKQogICAgICAgICAgICBpZiBvcy5wYXRoLmlzYWJzKHJlbF9wYXRoKSBvciByZWxfcGF0aC5zdGFydHN3aXRoKG9zLnBhcmRpcik6CiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZQogICAgICAgICAgICBuYW1lID0gcmVsX3BhdGgKICAgICAgICAjIG9uIFdpbmRvd3MgYm90aCAnXCcgYW5kICcvJyBhcmUgdXNlZCBhcyBwYXRoCiAgICAgICAgIyBzZXBhcmF0b3JzLiBCZXR0ZXIgdG8gcmVwbGFjZSBib3RoIHRoYW4gcmVseSBvbiBvcy5wYXRoLnNlcAogICAgICAgIHJldHVybiBuYW1lWzotM10ucmVwbGFjZSgnXFwnLCAnLicpLnJlcGxhY2UoJy8nLCAnLicpCiAgICByZXR1cm4gbmFtZQoKZGVmIF9jb252ZXJ0X25hbWVzKG5hbWVzKToKICAgIHJldHVybiBbX2NvbnZlcnRfbmFtZShuYW1lKSBmb3IgbmFtZSBpbiBuYW1lc10KCgpjbGFzcyBUZXN0UHJvZ3JhbShvYmplY3QpOgogICAgIiIiQSBjb21tYW5kLWxpbmUgcHJvZ3JhbSB0aGF0IHJ1bnMgYSBzZXQgb2YgdGVzdHM7IHRoaXMgaXMgcHJpbWFyaWx5CiAgICAgICBmb3IgbWFraW5nIHRlc3QgbW9kdWxlcyBjb252ZW5pZW50bHkgZXhlY3V0YWJsZS4KICAgICIiIgogICAgVVNBR0UgPSBVU0FHRV9GUk9NX01PRFVMRQoKICAgICMgZGVmYXVsdHMgZm9yIHRlc3RpbmcKICAgIGZhaWxmYXN0ID0gY2F0Y2hicmVhayA9IGJ1ZmZlciA9IHByb2dOYW1lID0gd2FybmluZ3MgPSBOb25lCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1vZHVsZT0nX19tYWluX18nLCBkZWZhdWx0VGVzdD1Ob25lLCBhcmd2PU5vbmUsCiAgICAgICAgICAgICAgICAgICAgdGVzdFJ1bm5lcj1Ob25lLCB0ZXN0TG9hZGVyPWxvYWRlci5kZWZhdWx0VGVzdExvYWRlciwKICAgICAgICAgICAgICAgICAgICBleGl0PVRydWUsIHZlcmJvc2l0eT0xLCBmYWlsZmFzdD1Ob25lLCBjYXRjaGJyZWFrPU5vbmUsCiAgICAgICAgICAgICAgICAgICAgYnVmZmVyPU5vbmUsIHdhcm5pbmdzPU5vbmUpOgogICAgICAgIGlmIGlzaW5zdGFuY2UobW9kdWxlLCBzdHIpOgogICAgICAgICAgICBzZWxmLm1vZHVsZSA9IF9faW1wb3J0X18obW9kdWxlKQogICAgICAgICAgICBmb3IgcGFydCBpbiBtb2R1bGUuc3BsaXQoJy4nKVsxOl06CiAgICAgICAgICAgICAgICBzZWxmLm1vZHVsZSA9IGdldGF0dHIoc2VsZi5tb2R1bGUsIHBhcnQpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5tb2R1bGUgPSBtb2R1bGUKICAgICAgICBpZiBhcmd2IGlzIE5vbmU6CiAgICAgICAgICAgIGFyZ3YgPSBzeXMuYXJndgoKICAgICAgICBzZWxmLmV4aXQgPSBleGl0CiAgICAgICAgc2VsZi5mYWlsZmFzdCA9IGZhaWxmYXN0CiAgICAgICAgc2VsZi5jYXRjaGJyZWFrID0gY2F0Y2hicmVhawogICAgICAgIHNlbGYudmVyYm9zaXR5ID0gdmVyYm9zaXR5CiAgICAgICAgc2VsZi5idWZmZXIgPSBidWZmZXIKICAgICAgICBpZiB3YXJuaW5ncyBpcyBOb25lIGFuZCBub3Qgc3lzLndhcm5vcHRpb25zOgogICAgICAgICAgICAjIGV2ZW4gaWYgRHJlcHJlY2F0aW9uV2FybmluZ3MgYXJlIGlnbm9yZWQgYnkgZGVmYXVsdAogICAgICAgICAgICAjIHByaW50IHRoZW0gYW55d2F5IHVubGVzcyBvdGhlciB3YXJuaW5ncyBzZXR0aW5ncyBhcmUKICAgICAgICAgICAgIyBzcGVjaWZpZWQgYnkgdGhlIHdhcm5pbmdzIGFyZyBvciB0aGUgLVcgcHl0aG9uIGZsYWcKICAgICAgICAgICAgc2VsZi53YXJuaW5ncyA9ICdkZWZhdWx0JwogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgaGVyZSBzZWxmLndhcm5pbmdzIGlzIHNldCBlaXRoZXIgdG8gdGhlIHZhbHVlIHBhc3NlZAogICAgICAgICAgICAjIHRvIHRoZSB3YXJuaW5ncyBhcmdzIG9yIHRvIE5vbmUuCiAgICAgICAgICAgICMgSWYgdGhlIHVzZXIgZGlkbid0IHBhc3MgYSB2YWx1ZSBzZWxmLndhcm5pbmdzIHdpbGwKICAgICAgICAgICAgIyBiZSBOb25lLiBUaGlzIG1lYW5zIHRoYXQgdGhlIGJlaGF2aW9yIGlzIHVuY2hhbmdlZAogICAgICAgICAgICAjIGFuZCBkZXBlbmRzIG9uIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIC1XLgogICAgICAgICAgICBzZWxmLndhcm5pbmdzID0gd2FybmluZ3MKICAgICAgICBzZWxmLmRlZmF1bHRUZXN0ID0gZGVmYXVsdFRlc3QKICAgICAgICBzZWxmLnRlc3RSdW5uZXIgPSB0ZXN0UnVubmVyCiAgICAgICAgc2VsZi50ZXN0TG9hZGVyID0gdGVzdExvYWRlcgogICAgICAgIHNlbGYucHJvZ05hbWUgPSBvcy5wYXRoLmJhc2VuYW1lKGFyZ3ZbMF0pCiAgICAgICAgc2VsZi5wYXJzZUFyZ3MoYXJndikKICAgICAgICBzZWxmLnJ1blRlc3RzKCkKCiAgICBkZWYgdXNhZ2VFeGl0KHNlbGYsIG1zZz1Ob25lKToKICAgICAgICBpZiBtc2c6CiAgICAgICAgICAgIHByaW50KG1zZykKICAgICAgICB1c2FnZSA9IHsncHJvZ05hbWUnOiBzZWxmLnByb2dOYW1lLCAnY2F0Y2hicmVhayc6ICcnLCAnZmFpbGZhc3QnOiAnJywKICAgICAgICAgICAgICAgICAnYnVmZmVyJzogJyd9CiAgICAgICAgaWYgc2VsZi5mYWlsZmFzdCAhPSBGYWxzZToKICAgICAgICAgICAgdXNhZ2VbJ2ZhaWxmYXN0J10gPSBGQUlMRkFTVAogICAgICAgIGlmIHNlbGYuY2F0Y2hicmVhayAhPSBGYWxzZToKICAgICAgICAgICAgdXNhZ2VbJ2NhdGNoYnJlYWsnXSA9IENBVENIQlJFQUsKICAgICAgICBpZiBzZWxmLmJ1ZmZlciAhPSBGYWxzZToKICAgICAgICAgICAgdXNhZ2VbJ2J1ZmZlciddID0gQlVGRkVST1VUUFVUCiAgICAgICAgcHJpbnQoc2VsZi5VU0FHRSAlIHVzYWdlKQogICAgICAgIHN5cy5leGl0KDIpCgogICAgZGVmIHBhcnNlQXJncyhzZWxmLCBhcmd2KToKICAgICAgICBpZiAoKGxlbihhcmd2KSA+IDEgYW5kIGFyZ3ZbMV0ubG93ZXIoKSA9PSAnZGlzY292ZXInKSBvcgogICAgICAgICAgICAobGVuKGFyZ3YpID09IDEgYW5kIHNlbGYubW9kdWxlIGlzIE5vbmUpKToKICAgICAgICAgICAgc2VsZi5fZG9fZGlzY292ZXJ5KGFyZ3ZbMjpdKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgcGFyc2VyID0gc2VsZi5fZ2V0T3B0UGFyc2VyKCkKICAgICAgICBvcHRpb25zLCBhcmdzID0gcGFyc2VyLnBhcnNlX2FyZ3MoYXJndlsxOl0pCiAgICAgICAgc2VsZi5fc2V0QXR0cmlidXRlc0Zyb21PcHRpb25zKG9wdGlvbnMpCgogICAgICAgIGlmIGxlbihhcmdzKSA9PSAwIGFuZCBzZWxmLm1vZHVsZSBpcyBOb25lOgogICAgICAgICAgICAjIHRoaXMgYWxsb3dzICJweXRob24gLW0gdW5pdHRlc3QgLXYiIHRvIHN0aWxsIHdvcmsgZm9yCiAgICAgICAgICAgICMgdGVzdCBkaXNjb3ZlcnkuIFRoaXMgbWVhbnMgLWMgLyAtYiAvIC12IC8gLWYgb3B0aW9ucyB3aWxsCiAgICAgICAgICAgICMgYmUgaGFuZGxlZCB0d2ljZSwgd2hpY2ggaXMgaGFybWxlc3MgYnV0IG5vdCBpZGVhbC4KICAgICAgICAgICAgc2VsZi5fZG9fZGlzY292ZXJ5KGFyZ3ZbMTpdKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgbGVuKGFyZ3MpID09IDAgYW5kIHNlbGYuZGVmYXVsdFRlc3QgaXMgTm9uZToKICAgICAgICAgICAgIyBjcmVhdGVUZXN0cyB3aWxsIGxvYWQgdGVzdHMgZnJvbSBzZWxmLm1vZHVsZQogICAgICAgICAgICBzZWxmLnRlc3ROYW1lcyA9IE5vbmUKICAgICAgICBlbGlmIGxlbihhcmdzKSA+IDA6CiAgICAgICAgICAgIHNlbGYudGVzdE5hbWVzID0gX2NvbnZlcnRfbmFtZXMoYXJncykKICAgICAgICAgICAgaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgICAgICAgICAgICAgICMgdG8gc3VwcG9ydCBweXRob24gLW0gdW5pdHRlc3QgLi4uCiAgICAgICAgICAgICAgICBzZWxmLm1vZHVsZSA9IE5vbmUKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnRlc3ROYW1lcyA9IChzZWxmLmRlZmF1bHRUZXN0LCkKICAgICAgICBzZWxmLmNyZWF0ZVRlc3RzKCkKCiAgICBkZWYgY3JlYXRlVGVzdHMoc2VsZik6CiAgICAgICAgaWYgc2VsZi50ZXN0TmFtZXMgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi50ZXN0ID0gc2VsZi50ZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21Nb2R1bGUoc2VsZi5tb2R1bGUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi50ZXN0ID0gc2VsZi50ZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhzZWxmLnRlc3ROYW1lcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1vZHVsZSkKCiAgICBkZWYgX2dldE9wdFBhcnNlcihzZWxmKToKICAgICAgICBwYXJzZXIgPSBvcHRwYXJzZS5PcHRpb25QYXJzZXIoKQogICAgICAgIHBhcnNlci5wcm9nID0gc2VsZi5wcm9nTmFtZQogICAgICAgIHBhcnNlci5hZGRfb3B0aW9uKCctdicsICctLXZlcmJvc2UnLCBkZXN0PSd2ZXJib3NlJywgZGVmYXVsdD1GYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSdWZXJib3NlIG91dHB1dCcsIGFjdGlvbj0nc3RvcmVfdHJ1ZScpCiAgICAgICAgcGFyc2VyLmFkZF9vcHRpb24oJy1xJywgJy0tcXVpZXQnLCBkZXN0PSdxdWlldCcsIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nUXVpZXQgb3V0cHV0JywgYWN0aW9uPSdzdG9yZV90cnVlJykKCiAgICAgICAgaWYgc2VsZi5mYWlsZmFzdCAhPSBGYWxzZToKICAgICAgICAgICAgcGFyc2VyLmFkZF9vcHRpb24oJy1mJywgJy0tZmFpbGZhc3QnLCBkZXN0PSdmYWlsZmFzdCcsIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9J1N0b3Agb24gZmlyc3QgZmFpbCBvciBlcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj0nc3RvcmVfdHJ1ZScpCiAgICAgICAgaWYgc2VsZi5jYXRjaGJyZWFrICE9IEZhbHNlOgogICAgICAgICAgICBwYXJzZXIuYWRkX29wdGlvbignLWMnLCAnLS1jYXRjaCcsIGRlc3Q9J2NhdGNoYnJlYWsnLCBkZWZhdWx0PUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSdDYXRjaCBjdHJsLUMgYW5kIGRpc3BsYXkgcmVzdWx0cyBzbyBmYXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249J3N0b3JlX3RydWUnKQogICAgICAgIGlmIHNlbGYuYnVmZmVyICE9IEZhbHNlOgogICAgICAgICAgICBwYXJzZXIuYWRkX29wdGlvbignLWInLCAnLS1idWZmZXInLCBkZXN0PSdidWZmZXInLCBkZWZhdWx0PUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSdCdWZmZXIgc3Rkb3V0IGFuZCBzdGRlcnIgZHVyaW5nIHRlc3RzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPSdzdG9yZV90cnVlJykKICAgICAgICByZXR1cm4gcGFyc2VyCgogICAgZGVmIF9zZXRBdHRyaWJ1dGVzRnJvbU9wdGlvbnMoc2VsZiwgb3B0aW9ucyk6CiAgICAgICAgIyBvbmx5IHNldCBvcHRpb25zIGZyb20gdGhlIHBhcnNpbmcgaGVyZQogICAgICAgICMgaWYgdGhleSB3ZXJlbid0IHNldCBleHBsaWNpdGx5IGluIHRoZSBjb25zdHJ1Y3RvcgogICAgICAgIGlmIHNlbGYuZmFpbGZhc3QgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5mYWlsZmFzdCA9IG9wdGlvbnMuZmFpbGZhc3QKICAgICAgICBpZiBzZWxmLmNhdGNoYnJlYWsgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5jYXRjaGJyZWFrID0gb3B0aW9ucy5jYXRjaGJyZWFrCiAgICAgICAgaWYgc2VsZi5idWZmZXIgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5idWZmZXIgPSBvcHRpb25zLmJ1ZmZlcgoKICAgICAgICBpZiBvcHRpb25zLnZlcmJvc2U6CiAgICAgICAgICAgIHNlbGYudmVyYm9zaXR5ID0gMgogICAgICAgIGVsaWYgb3B0aW9ucy5xdWlldDoKICAgICAgICAgICAgc2VsZi52ZXJib3NpdHkgPSAwCgogICAgZGVmIF9hZGREaXNjb3ZlcnlPcHRpb25zKHNlbGYsIHBhcnNlcik6CiAgICAgICAgcGFyc2VyLmFkZF9vcHRpb24oJy1zJywgJy0tc3RhcnQtZGlyZWN0b3J5JywgZGVzdD0nc3RhcnQnLCBkZWZhdWx0PScuJywKICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJEaXJlY3RvcnkgdG8gc3RhcnQgZGlzY292ZXJ5ICgnLicgZGVmYXVsdCkiKQogICAgICAgIHBhcnNlci5hZGRfb3B0aW9uKCctcCcsICctLXBhdHRlcm4nLCBkZXN0PSdwYXR0ZXJuJywgZGVmYXVsdD0ndGVzdCoucHknLAogICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9IlBhdHRlcm4gdG8gbWF0Y2ggdGVzdHMgKCd0ZXN0Ki5weScgZGVmYXVsdCkiKQogICAgICAgIHBhcnNlci5hZGRfb3B0aW9uKCctdCcsICctLXRvcC1sZXZlbC1kaXJlY3RvcnknLCBkZXN0PSd0b3AnLCBkZWZhdWx0PU5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nVG9wIGxldmVsIGRpcmVjdG9yeSBvZiBwcm9qZWN0IChkZWZhdWx0cyB0byBzdGFydCBkaXJlY3RvcnkpJykKCiAgICBkZWYgX2RvX2Rpc2NvdmVyeShzZWxmLCBhcmd2LCBMb2FkZXI9bG9hZGVyLlRlc3RMb2FkZXIpOgogICAgICAgICMgaGFuZGxlIGNvbW1hbmQgbGluZSBhcmdzIGZvciB0ZXN0IGRpc2NvdmVyeQogICAgICAgIHNlbGYucHJvZ05hbWUgPSAnJXMgZGlzY292ZXInICUgc2VsZi5wcm9nTmFtZQogICAgICAgIHBhcnNlciA9IHNlbGYuX2dldE9wdFBhcnNlcigpCiAgICAgICAgc2VsZi5fYWRkRGlzY292ZXJ5T3B0aW9ucyhwYXJzZXIpCgogICAgICAgIG9wdGlvbnMsIGFyZ3MgPSBwYXJzZXIucGFyc2VfYXJncyhhcmd2KQogICAgICAgIGlmIGxlbihhcmdzKSA+IDM6CiAgICAgICAgICAgIHNlbGYudXNhZ2VFeGl0KCkKCiAgICAgICAgZm9yIG5hbWUsIHZhbHVlIGluIHppcCgoJ3N0YXJ0JywgJ3BhdHRlcm4nLCAndG9wJyksIGFyZ3MpOgogICAgICAgICAgICBzZXRhdHRyKG9wdGlvbnMsIG5hbWUsIHZhbHVlKQoKICAgICAgICBzZWxmLl9zZXRBdHRyaWJ1dGVzRnJvbU9wdGlvbnMob3B0aW9ucykKCiAgICAgICAgc3RhcnRfZGlyID0gb3B0aW9ucy5zdGFydAogICAgICAgIHBhdHRlcm4gPSBvcHRpb25zLnBhdHRlcm4KICAgICAgICB0b3BfbGV2ZWxfZGlyID0gb3B0aW9ucy50b3AKCiAgICAgICAgbG9hZGVyID0gTG9hZGVyKCkKICAgICAgICBzZWxmLnRlc3QgPSBsb2FkZXIuZGlzY292ZXIoc3RhcnRfZGlyLCBwYXR0ZXJuLCB0b3BfbGV2ZWxfZGlyKQoKICAgIGRlZiBydW5UZXN0cyhzZWxmKToKICAgICAgICBpZiBzZWxmLmNhdGNoYnJlYWs6CiAgICAgICAgICAgIGluc3RhbGxIYW5kbGVyKCkKICAgICAgICBpZiBzZWxmLnRlc3RSdW5uZXIgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi50ZXN0UnVubmVyID0gcnVubmVyLlRleHRUZXN0UnVubmVyCiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLnRlc3RSdW5uZXIsIHR5cGUpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB0ZXN0UnVubmVyID0gc2VsZi50ZXN0UnVubmVyKHZlcmJvc2l0eT1zZWxmLnZlcmJvc2l0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGZhc3Q9c2VsZi5mYWlsZmFzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyPXNlbGYuYnVmZmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz1zZWxmLndhcm5pbmdzKQogICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAgICAgIyBkaWRuJ3QgYWNjZXB0IHRoZSB2ZXJib3NpdHksIGJ1ZmZlciBvciBmYWlsZmFzdCBhcmd1bWVudHMKICAgICAgICAgICAgICAgIHRlc3RSdW5uZXIgPSBzZWxmLnRlc3RSdW5uZXIoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgaXQgaXMgYXNzdW1lZCB0byBiZSBhIFRlc3RSdW5uZXIgaW5zdGFuY2UKICAgICAgICAgICAgdGVzdFJ1bm5lciA9IHNlbGYudGVzdFJ1bm5lcgogICAgICAgIHNlbGYucmVzdWx0ID0gdGVzdFJ1bm5lci5ydW4oc2VsZi50ZXN0KQogICAgICAgIGlmIHNlbGYuZXhpdDoKICAgICAgICAgICAgc3lzLmV4aXQobm90IHNlbGYucmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkKCm1haW4gPSBUZXN0UHJvZ3JhbQo=',
'/Lib/unittest/test/support.py':'aW1wb3J0IHVuaXR0ZXN0DQoNCg0KY2xhc3MgVGVzdEVxdWFsaXR5KG9iamVjdCk6DQogICAgIiIiVXNlZCBhcyBhIG1peGluIGZvciBUZXN0Q2FzZSIiIg0KDQogICAgIyBDaGVjayBmb3IgYSB2YWxpZCBfX2VxX18gaW1wbGVtZW50YXRpb24NCiAgICBkZWYgdGVzdF9lcShzZWxmKToNCiAgICAgICAgZm9yIG9ial8xLCBvYmpfMiBpbiBzZWxmLmVxX3BhaXJzOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvYmpfMSwgb2JqXzIpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG9ial8yLCBvYmpfMSkNCg0KICAgICMgQ2hlY2sgZm9yIGEgdmFsaWQgX19uZV9fIGltcGxlbWVudGF0aW9uDQogICAgZGVmIHRlc3RfbmUoc2VsZik6DQogICAgICAgIGZvciBvYmpfMSwgb2JqXzIgaW4gc2VsZi5uZV9wYWlyczoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwob2JqXzEsIG9ial8yKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChvYmpfMiwgb2JqXzEpDQoNCmNsYXNzIFRlc3RIYXNoaW5nKG9iamVjdCk6DQogICAgIiIiVXNlZCBhcyBhIG1peGluIGZvciBUZXN0Q2FzZSIiIg0KDQogICAgIyBDaGVjayBmb3IgYSB2YWxpZCBfX2hhc2hfXyBpbXBsZW1lbnRhdGlvbg0KICAgIGRlZiB0ZXN0X2hhc2goc2VsZik6DQogICAgICAgIGZvciBvYmpfMSwgb2JqXzIgaW4gc2VsZi5lcV9wYWlyczoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBpZiBub3QgaGFzaChvYmpfMSkgPT0gaGFzaChvYmpfMik6DQogICAgICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgiJXIgYW5kICVyIGRvIG5vdCBoYXNoIGVxdWFsIiAlIChvYmpfMSwgb2JqXzIpKQ0KICAgICAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgICAgIHJhaXNlDQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCJQcm9ibGVtIGhhc2hpbmcgJXIgYW5kICVyOiAlcyIgJSAob2JqXzEsIG9ial8yLCBlKSkNCg0KICAgICAgICBmb3Igb2JqXzEsIG9ial8yIGluIHNlbGYubmVfcGFpcnM6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaWYgaGFzaChvYmpfMSkgPT0gaGFzaChvYmpfMik6DQogICAgICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgiJXMgYW5kICVzIGhhc2ggZXF1YWwsIGJ1dCBzaG91bGRuJ3QiICUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvYmpfMSwgb2JqXzIpKQ0KICAgICAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgICAgIHJhaXNlDQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCJQcm9ibGVtIGhhc2hpbmcgJXMgYW5kICVzOiAlcyIgJSAob2JqXzEsIG9ial8yLCBlKSkNCg0KDQpjbGFzcyBMb2dnaW5nUmVzdWx0KHVuaXR0ZXN0LlRlc3RSZXN1bHQpOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsb2cpOg0KICAgICAgICBzZWxmLl9ldmVudHMgPSBsb2cNCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpDQoNCiAgICBkZWYgc3RhcnRUZXN0KHNlbGYsIHRlc3QpOg0KICAgICAgICBzZWxmLl9ldmVudHMuYXBwZW5kKCdzdGFydFRlc3QnKQ0KICAgICAgICBzdXBlcigpLnN0YXJ0VGVzdCh0ZXN0KQ0KDQogICAgZGVmIHN0YXJ0VGVzdFJ1bihzZWxmKToNCiAgICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZCgnc3RhcnRUZXN0UnVuJykNCiAgICAgICAgc3VwZXIoTG9nZ2luZ1Jlc3VsdCwgc2VsZikuc3RhcnRUZXN0UnVuKCkNCg0KICAgIGRlZiBzdG9wVGVzdChzZWxmLCB0ZXN0KToNCiAgICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZCgnc3RvcFRlc3QnKQ0KICAgICAgICBzdXBlcigpLnN0b3BUZXN0KHRlc3QpDQoNCiAgICBkZWYgc3RvcFRlc3RSdW4oc2VsZik6DQogICAgICAgIHNlbGYuX2V2ZW50cy5hcHBlbmQoJ3N0b3BUZXN0UnVuJykNCiAgICAgICAgc3VwZXIoTG9nZ2luZ1Jlc3VsdCwgc2VsZikuc3RvcFRlc3RSdW4oKQ0KDQogICAgZGVmIGFkZEZhaWx1cmUoc2VsZiwgKmFyZ3MpOg0KICAgICAgICBzZWxmLl9ldmVudHMuYXBwZW5kKCdhZGRGYWlsdXJlJykNCiAgICAgICAgc3VwZXIoKS5hZGRGYWlsdXJlKCphcmdzKQ0KDQogICAgZGVmIGFkZFN1Y2Nlc3Moc2VsZiwgKmFyZ3MpOg0KICAgICAgICBzZWxmLl9ldmVudHMuYXBwZW5kKCdhZGRTdWNjZXNzJykNCiAgICAgICAgc3VwZXIoTG9nZ2luZ1Jlc3VsdCwgc2VsZikuYWRkU3VjY2VzcygqYXJncykNCg0KICAgIGRlZiBhZGRFcnJvcihzZWxmLCAqYXJncyk6DQogICAgICAgIHNlbGYuX2V2ZW50cy5hcHBlbmQoJ2FkZEVycm9yJykNCiAgICAgICAgc3VwZXIoKS5hZGRFcnJvcigqYXJncykNCg0KICAgIGRlZiBhZGRTa2lwKHNlbGYsICphcmdzKToNCiAgICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZCgnYWRkU2tpcCcpDQogICAgICAgIHN1cGVyKExvZ2dpbmdSZXN1bHQsIHNlbGYpLmFkZFNraXAoKmFyZ3MpDQoNCiAgICBkZWYgYWRkRXhwZWN0ZWRGYWlsdXJlKHNlbGYsICphcmdzKToNCiAgICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZCgnYWRkRXhwZWN0ZWRGYWlsdXJlJykNCiAgICAgICAgc3VwZXIoTG9nZ2luZ1Jlc3VsdCwgc2VsZikuYWRkRXhwZWN0ZWRGYWlsdXJlKCphcmdzKQ0KDQogICAgZGVmIGFkZFVuZXhwZWN0ZWRTdWNjZXNzKHNlbGYsICphcmdzKToNCiAgICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZCgnYWRkVW5leHBlY3RlZFN1Y2Nlc3MnKQ0KICAgICAgICBzdXBlcihMb2dnaW5nUmVzdWx0LCBzZWxmKS5hZGRVbmV4cGVjdGVkU3VjY2VzcygqYXJncykNCg0KDQpjbGFzcyBSZXN1bHRXaXRoTm9TdGFydFRlc3RSdW5TdG9wVGVzdFJ1bihvYmplY3QpOg0KICAgICIiIkFuIG9iamVjdCBob25vdXJpbmcgVGVzdFJlc3VsdCBiZWZvcmUgc3RhcnRUZXN0UnVuL3N0b3BUZXN0UnVuLiIiIg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBzZWxmLmZhaWx1cmVzID0gW10NCiAgICAgICAgc2VsZi5lcnJvcnMgPSBbXQ0KICAgICAgICBzZWxmLnRlc3RzUnVuID0gMA0KICAgICAgICBzZWxmLnNraXBwZWQgPSBbXQ0KICAgICAgICBzZWxmLmV4cGVjdGVkRmFpbHVyZXMgPSBbXQ0KICAgICAgICBzZWxmLnVuZXhwZWN0ZWRTdWNjZXNzZXMgPSBbXQ0KICAgICAgICBzZWxmLnNob3VsZFN0b3AgPSBGYWxzZQ0KDQogICAgZGVmIHN0YXJ0VGVzdChzZWxmLCB0ZXN0KToNCiAgICAgICAgcGFzcw0KDQogICAgZGVmIHN0b3BUZXN0KHNlbGYsIHRlc3QpOg0KICAgICAgICBwYXNzDQoNCiAgICBkZWYgYWRkRXJyb3Ioc2VsZiwgdGVzdCk6DQogICAgICAgIHBhc3MNCg0KICAgIGRlZiBhZGRGYWlsdXJlKHNlbGYsIHRlc3QpOg0KICAgICAgICBwYXNzDQoNCiAgICBkZWYgYWRkU3VjY2VzcyhzZWxmLCB0ZXN0KToNCiAgICAgICAgcGFzcw0KDQogICAgZGVmIHdhc1N1Y2Nlc3NmdWwoc2VsZik6DQogICAgICAgIHJldHVybiBUcnVlDQo=',
'/Lib/unittest/test/test_case.py':'aW1wb3J0IGRpZmZsaWINCmltcG9ydCBwcHJpbnQNCmltcG9ydCBwaWNrbGUNCmltcG9ydCByZQ0KaW1wb3J0IHN5cw0KaW1wb3J0IHdhcm5pbmdzDQppbXBvcnQgd2Vha3JlZg0KaW1wb3J0IGluc3BlY3QNCg0KZnJvbSBjb3B5IGltcG9ydCBkZWVwY29weQ0KZnJvbSB0ZXN0IGltcG9ydCBzdXBwb3J0DQoNCmltcG9ydCB1bml0dGVzdA0KDQpmcm9tIC5zdXBwb3J0IGltcG9ydCAoDQogICAgVGVzdEVxdWFsaXR5LCBUZXN0SGFzaGluZywgTG9nZ2luZ1Jlc3VsdCwNCiAgICBSZXN1bHRXaXRoTm9TdGFydFRlc3RSdW5TdG9wVGVzdFJ1bg0KKQ0KDQoNCmNsYXNzIFRlc3Qob2JqZWN0KToNCiAgICAiS2VlcCB0aGVzZSBUZXN0Q2FzZSBjbGFzc2VzIG91dCBvZiB0aGUgbWFpbiBuYW1lc3BhY2UiDQoNCiAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICBkZWYgcnVuVGVzdChzZWxmKTogcGFzcw0KICAgICAgICBkZWYgdGVzdDEoc2VsZik6IHBhc3MNCg0KICAgIGNsYXNzIEJhcihGb28pOg0KICAgICAgICBkZWYgdGVzdDIoc2VsZik6IHBhc3MNCg0KICAgIGNsYXNzIExvZ2dpbmdUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICIiIkEgdGVzdCBjYXNlIHdoaWNoIGxvZ3MgaXRzIGNhbGxzLiIiIg0KDQogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBldmVudHMpOg0KICAgICAgICAgICAgc3VwZXIoVGVzdC5Mb2dnaW5nVGVzdENhc2UsIHNlbGYpLl9faW5pdF9fKCd0ZXN0JykNCiAgICAgICAgICAgIHNlbGYuZXZlbnRzID0gZXZlbnRzDQoNCiAgICAgICAgZGVmIHNldFVwKHNlbGYpOg0KICAgICAgICAgICAgc2VsZi5ldmVudHMuYXBwZW5kKCdzZXRVcCcpDQoNCiAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICBzZWxmLmV2ZW50cy5hcHBlbmQoJ3Rlc3QnKQ0KDQogICAgICAgIGRlZiB0ZWFyRG93bihzZWxmKToNCiAgICAgICAgICAgIHNlbGYuZXZlbnRzLmFwcGVuZCgndGVhckRvd24nKQ0KDQoNCmNsYXNzIFRlc3RfVGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UsIFRlc3RFcXVhbGl0eSwgVGVzdEhhc2hpbmcpOg0KDQogICAgIyMjIFNldCB1cCBhdHRyaWJ1dGVzIHVzZWQgYnkgaW5oZXJpdGVkIHRlc3RzDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgIyBVc2VkIGJ5IFRlc3RIYXNoaW5nLnRlc3RfaGFzaCBhbmQgVGVzdEVxdWFsaXR5LnRlc3RfZXENCiAgICBlcV9wYWlycyA9IFsoVGVzdC5Gb28oJ3Rlc3QxJyksIFRlc3QuRm9vKCd0ZXN0MScpKV0NCg0KICAgICMgVXNlZCBieSBUZXN0RXF1YWxpdHkudGVzdF9uZQ0KICAgIG5lX3BhaXJzID0gWyhUZXN0LkZvbygndGVzdDEnKSwgVGVzdC5Gb28oJ3J1blRlc3QnKSksDQogICAgICAgICAgICAgICAgKFRlc3QuRm9vKCd0ZXN0MScpLCBUZXN0LkJhcigndGVzdDEnKSksDQogICAgICAgICAgICAgICAgKFRlc3QuRm9vKCd0ZXN0MScpLCBUZXN0LkJhcigndGVzdDInKSldDQoNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyMjIC9TZXQgdXAgYXR0cmlidXRlcyB1c2VkIGJ5IGluaGVyaXRlZCB0ZXN0cw0KDQoNCiAgICAjICJjbGFzcyBUZXN0Q2FzZShbbWV0aG9kTmFtZV0pIg0KICAgICMgLi4uDQogICAgIyAiRWFjaCBpbnN0YW5jZSBvZiBUZXN0Q2FzZSB3aWxsIHJ1biBhIHNpbmdsZSB0ZXN0IG1ldGhvZDogdGhlDQogICAgIyBtZXRob2QgbmFtZWQgbWV0aG9kTmFtZS4iDQogICAgIyAuLi4NCiAgICAjICJtZXRob2ROYW1lIGRlZmF1bHRzIHRvICJydW5UZXN0Ii4iDQogICAgIw0KICAgICMgTWFrZSBzdXJlIGl0IHJlYWxseSBpcyBvcHRpb25hbCwgYW5kIHRoYXQgaXQgZGVmYXVsdHMgdG8gdGhlIHByb3Blcg0KICAgICMgdGhpbmcuDQogICAgZGVmIHRlc3RfaW5pdF9fbm9fdGVzdF9uYW1lKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW5UZXN0KHNlbGYpOiByYWlzZSBNeUV4Y2VwdGlvbigpDQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKTogcGFzcw0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoVGVzdCgpLmlkKClbLTEzOl0sICcuVGVzdC5ydW5UZXN0JykNCg0KICAgICAgICAjIHRlc3QgdGhhdCBUZXN0Q2FzZSBjYW4gYmUgaW5zdGFudGlhdGVkIHdpdGggbm8gYXJncw0KICAgICAgICAjIHByaW1hcmlseSBmb3IgdXNlIGF0IHRoZSBpbnRlcmFjdGl2ZSBpbnRlcnByZXRlcg0KICAgICAgICB0ZXN0ID0gdW5pdHRlc3QuVGVzdENhc2UoKQ0KICAgICAgICB0ZXN0LmFzc2VydEVxdWFsKDMsIDMpDQogICAgICAgIHdpdGggdGVzdC5hc3NlcnRSYWlzZXModGVzdC5mYWlsdXJlRXhjZXB0aW9uKToNCiAgICAgICAgICAgIHRlc3QuYXNzZXJ0RXF1YWwoMywgMikNCg0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yKToNCiAgICAgICAgICAgIHRlc3QucnVuKCkNCg0KICAgICMgImNsYXNzIFRlc3RDYXNlKFttZXRob2ROYW1lXSkiDQogICAgIyAuLi4NCiAgICAjICJFYWNoIGluc3RhbmNlIG9mIFRlc3RDYXNlIHdpbGwgcnVuIGEgc2luZ2xlIHRlc3QgbWV0aG9kOiB0aGUNCiAgICAjIG1ldGhvZCBuYW1lZCBtZXRob2ROYW1lLiINCiAgICBkZWYgdGVzdF9pbml0X190ZXN0X25hbWVfX3ZhbGlkKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW5UZXN0KHNlbGYpOiByYWlzZSBNeUV4Y2VwdGlvbigpDQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKTogcGFzcw0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoVGVzdCgndGVzdCcpLmlkKClbLTEwOl0sICcuVGVzdC50ZXN0JykNCg0KICAgICMgImNsYXNzIFRlc3RDYXNlKFttZXRob2ROYW1lXSkiDQogICAgIyAuLi4NCiAgICAjICJFYWNoIGluc3RhbmNlIG9mIFRlc3RDYXNlIHdpbGwgcnVuIGEgc2luZ2xlIHRlc3QgbWV0aG9kOiB0aGUNCiAgICAjIG1ldGhvZCBuYW1lZCBtZXRob2ROYW1lLiINCiAgICBkZWYgdGVzdF9pbml0X190ZXN0X25hbWVfX2ludmFsaWQoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHJ1blRlc3Qoc2VsZik6IHJhaXNlIE15RXhjZXB0aW9uKCkNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOiBwYXNzDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgVGVzdCgndGVzdGZvbycpDQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJGYWlsZWQgdG8gcmFpc2UgVmFsdWVFcnJvciIpDQoNCiAgICAjICJSZXR1cm4gdGhlIG51bWJlciBvZiB0ZXN0cyByZXByZXNlbnRlZCBieSB0aGUgdGhpcyB0ZXN0IG9iamVjdC4gRm9yDQogICAgIyBUZXN0Q2FzZSBpbnN0YW5jZXMsIHRoaXMgd2lsbCBhbHdheXMgYmUgMSINCiAgICBkZWYgdGVzdF9jb3VudFRlc3RDYXNlcyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOiBwYXNzDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28oJ3Rlc3QnKS5jb3VudFRlc3RDYXNlcygpLCAxKQ0KDQogICAgIyAiUmV0dXJuIHRoZSBkZWZhdWx0IHR5cGUgb2YgdGVzdCByZXN1bHQgb2JqZWN0IHRvIGJlIHVzZWQgdG8gcnVuIHRoaXMNCiAgICAjIHRlc3QuIEZvciBUZXN0Q2FzZSBpbnN0YW5jZXMsIHRoaXMgd2lsbCBhbHdheXMgYmUNCiAgICAjIHVuaXR0ZXN0LlRlc3RSZXN1bHQ7ICBzdWJjbGFzc2VzIG9mIFRlc3RDYXNlIHNob3VsZA0KICAgICMgb3ZlcnJpZGUgdGhpcyBhcyBuZWNlc3NhcnkuIg0KICAgIGRlZiB0ZXN0X2RlZmF1bHRUZXN0UmVzdWx0KHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHJ1blRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHJlc3VsdCA9IEZvbygpLmRlZmF1bHRUZXN0UmVzdWx0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCh0eXBlKHJlc3VsdCksIHVuaXR0ZXN0LlRlc3RSZXN1bHQpDQoNCiAgICAjICJXaGVuIGEgc2V0VXAoKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlIHRlc3QgcnVubmVyIHdpbGwgcnVuIHRoYXQgbWV0aG9kDQogICAgIyBwcmlvciB0byBlYWNoIHRlc3QuIExpa2V3aXNlLCBpZiBhIHRlYXJEb3duKCkgbWV0aG9kIGlzIGRlZmluZWQsIHRoZQ0KICAgICMgdGVzdCBydW5uZXIgd2lsbCBpbnZva2UgdGhhdCBtZXRob2QgYWZ0ZXIgZWFjaCB0ZXN0LiBJbiB0aGUgZXhhbXBsZSwNCiAgICAjIHNldFVwKCkgd2FzIHVzZWQgdG8gY3JlYXRlIGEgZnJlc2ggc2VxdWVuY2UgZm9yIGVhY2ggdGVzdC4iDQogICAgIw0KICAgICMgTWFrZSBzdXJlIHRoZSBwcm9wZXIgY2FsbCBvcmRlciBpcyBtYWludGFpbmVkLCBldmVuIGlmIHNldFVwKCkgcmFpc2VzDQogICAgIyBhbiBleGNlcHRpb24uDQogICAgZGVmIHRlc3RfcnVuX2NhbGxfb3JkZXJfX2Vycm9yX2luX3NldFVwKHNlbGYpOg0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICByZXN1bHQgPSBMb2dnaW5nUmVzdWx0KGV2ZW50cykNCg0KICAgICAgICBjbGFzcyBGb28oVGVzdC5Mb2dnaW5nVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHNldFVwKHNlbGYpOg0KICAgICAgICAgICAgICAgIHN1cGVyKEZvbywgc2VsZikuc2V0VXAoKQ0KICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigncmFpc2VkIGJ5IEZvby5zZXRVcCcpDQoNCiAgICAgICAgRm9vKGV2ZW50cykucnVuKHJlc3VsdCkNCiAgICAgICAgZXhwZWN0ZWQgPSBbJ3N0YXJ0VGVzdCcsICdzZXRVcCcsICdhZGRFcnJvcicsICdzdG9wVGVzdCddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldpdGggYSB0ZW1wb3JhcnkgcmVzdWx0IHN0b3BUZXN0UnVuIGlzIGNhbGxlZCB3aGVuIHNldFVwIGVycm9ycy4NCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fc2V0VXBfZGVmYXVsdF9yZXN1bHQoc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQoNCiAgICAgICAgY2xhc3MgRm9vKFRlc3QuTG9nZ2luZ1Rlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBkZWZhdWx0VGVzdFJlc3VsdChzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTG9nZ2luZ1Jlc3VsdChzZWxmLmV2ZW50cykNCg0KICAgICAgICAgICAgZGVmIHNldFVwKHNlbGYpOg0KICAgICAgICAgICAgICAgIHN1cGVyKEZvbywgc2VsZikuc2V0VXAoKQ0KICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigncmFpc2VkIGJ5IEZvby5zZXRVcCcpDQoNCiAgICAgICAgRm9vKGV2ZW50cykucnVuKCkNCiAgICAgICAgZXhwZWN0ZWQgPSBbJ3N0YXJ0VGVzdFJ1bicsICdzdGFydFRlc3QnLCAnc2V0VXAnLCAnYWRkRXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAnc3RvcFRlc3QnLCAnc3RvcFRlc3RSdW4nXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgZXhwZWN0ZWQpDQoNCiAgICAjICJXaGVuIGEgc2V0VXAoKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlIHRlc3QgcnVubmVyIHdpbGwgcnVuIHRoYXQgbWV0aG9kDQogICAgIyBwcmlvciB0byBlYWNoIHRlc3QuIExpa2V3aXNlLCBpZiBhIHRlYXJEb3duKCkgbWV0aG9kIGlzIGRlZmluZWQsIHRoZQ0KICAgICMgdGVzdCBydW5uZXIgd2lsbCBpbnZva2UgdGhhdCBtZXRob2QgYWZ0ZXIgZWFjaCB0ZXN0LiBJbiB0aGUgZXhhbXBsZSwNCiAgICAjIHNldFVwKCkgd2FzIHVzZWQgdG8gY3JlYXRlIGEgZnJlc2ggc2VxdWVuY2UgZm9yIGVhY2ggdGVzdC4iDQogICAgIw0KICAgICMgTWFrZSBzdXJlIHRoZSBwcm9wZXIgY2FsbCBvcmRlciBpcyBtYWludGFpbmVkLCBldmVuIGlmIHRoZSB0ZXN0IHJhaXNlcw0KICAgICMgYW4gZXJyb3IgKGFzIG9wcG9zZWQgdG8gYSBmYWlsdXJlKS4NCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fdGVzdChzZWxmKToNCiAgICAgICAgZXZlbnRzID0gW10NCiAgICAgICAgcmVzdWx0ID0gTG9nZ2luZ1Jlc3VsdChldmVudHMpDQoNCiAgICAgICAgY2xhc3MgRm9vKFRlc3QuTG9nZ2luZ1Rlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHN1cGVyKEZvbywgc2VsZikudGVzdCgpDQogICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCdyYWlzZWQgYnkgRm9vLnRlc3QnKQ0KDQogICAgICAgIGV4cGVjdGVkID0gWydzdGFydFRlc3QnLCAnc2V0VXAnLCAndGVzdCcsICd0ZWFyRG93bicsDQogICAgICAgICAgICAgICAgICAgICdhZGRFcnJvcicsICdzdG9wVGVzdCddDQogICAgICAgIEZvbyhldmVudHMpLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldpdGggYSBkZWZhdWx0IHJlc3VsdCwgYW4gZXJyb3IgaW4gdGhlIHRlc3Qgc3RpbGwgcmVzdWx0cyBpbiBzdG9wVGVzdFJ1bg0KICAgICMgYmVpbmcgY2FsbGVkLiINCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fdGVzdF9kZWZhdWx0X3Jlc3VsdChzZWxmKToNCiAgICAgICAgZXZlbnRzID0gW10NCg0KICAgICAgICBjbGFzcyBGb28oVGVzdC5Mb2dnaW5nVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIGRlZmF1bHRUZXN0UmVzdWx0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiBMb2dnaW5nUmVzdWx0KHNlbGYuZXZlbnRzKQ0KDQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBzdXBlcihGb28sIHNlbGYpLnRlc3QoKQ0KICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigncmFpc2VkIGJ5IEZvby50ZXN0JykNCg0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0UnVuJywgJ3N0YXJ0VGVzdCcsICdzZXRVcCcsICd0ZXN0JywNCiAgICAgICAgICAgICAgICAgICAgJ3RlYXJEb3duJywgJ2FkZEVycm9yJywgJ3N0b3BUZXN0JywgJ3N0b3BUZXN0UnVuJ10NCiAgICAgICAgRm9vKGV2ZW50cykucnVuKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIGV4cGVjdGVkKQ0KDQogICAgIyAiV2hlbiBhIHNldFVwKCkgbWV0aG9kIGlzIGRlZmluZWQsIHRoZSB0ZXN0IHJ1bm5lciB3aWxsIHJ1biB0aGF0IG1ldGhvZA0KICAgICMgcHJpb3IgdG8gZWFjaCB0ZXN0LiBMaWtld2lzZSwgaWYgYSB0ZWFyRG93bigpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUNCiAgICAjIHRlc3QgcnVubmVyIHdpbGwgaW52b2tlIHRoYXQgbWV0aG9kIGFmdGVyIGVhY2ggdGVzdC4gSW4gdGhlIGV4YW1wbGUsDQogICAgIyBzZXRVcCgpIHdhcyB1c2VkIHRvIGNyZWF0ZSBhIGZyZXNoIHNlcXVlbmNlIGZvciBlYWNoIHRlc3QuIg0KICAgICMNCiAgICAjIE1ha2Ugc3VyZSB0aGUgcHJvcGVyIGNhbGwgb3JkZXIgaXMgbWFpbnRhaW5lZCwgZXZlbiBpZiB0aGUgdGVzdCBzaWduYWxzDQogICAgIyBhIGZhaWx1cmUgKGFzIG9wcG9zZWQgdG8gYW4gZXJyb3IpLg0KICAgIGRlZiB0ZXN0X3J1bl9jYWxsX29yZGVyX19mYWlsdXJlX2luX3Rlc3Qoc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGNsYXNzIEZvbyhUZXN0LkxvZ2dpbmdUZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBzdXBlcihGb28sIHNlbGYpLnRlc3QoKQ0KICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgncmFpc2VkIGJ5IEZvby50ZXN0JykNCg0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLA0KICAgICAgICAgICAgICAgICAgICAnYWRkRmFpbHVyZScsICdzdG9wVGVzdCddDQogICAgICAgIEZvbyhldmVudHMpLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldoZW4gYSB0ZXN0IGZhaWxzIHdpdGggYSBkZWZhdWx0IHJlc3VsdCBzdG9wVGVzdFJ1biBpcyBzdGlsbCBjYWxsZWQuIg0KICAgIGRlZiB0ZXN0X3J1bl9jYWxsX29yZGVyX19mYWlsdXJlX2luX3Rlc3RfZGVmYXVsdF9yZXN1bHQoc2VsZik6DQoNCiAgICAgICAgY2xhc3MgRm9vKFRlc3QuTG9nZ2luZ1Rlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBkZWZhdWx0VGVzdFJlc3VsdChzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTG9nZ2luZ1Jlc3VsdChzZWxmLmV2ZW50cykNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHN1cGVyKEZvbywgc2VsZikudGVzdCgpDQogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCdyYWlzZWQgYnkgRm9vLnRlc3QnKQ0KDQogICAgICAgIGV4cGVjdGVkID0gWydzdGFydFRlc3RSdW4nLCAnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLA0KICAgICAgICAgICAgICAgICAgICAndGVhckRvd24nLCAnYWRkRmFpbHVyZScsICdzdG9wVGVzdCcsICdzdG9wVGVzdFJ1biddDQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIEZvbyhldmVudHMpLnJ1bigpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldoZW4gYSBzZXRVcCgpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUgdGVzdCBydW5uZXIgd2lsbCBydW4gdGhhdCBtZXRob2QNCiAgICAjIHByaW9yIHRvIGVhY2ggdGVzdC4gTGlrZXdpc2UsIGlmIGEgdGVhckRvd24oKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlDQogICAgIyB0ZXN0IHJ1bm5lciB3aWxsIGludm9rZSB0aGF0IG1ldGhvZCBhZnRlciBlYWNoIHRlc3QuIEluIHRoZSBleGFtcGxlLA0KICAgICMgc2V0VXAoKSB3YXMgdXNlZCB0byBjcmVhdGUgYSBmcmVzaCBzZXF1ZW5jZSBmb3IgZWFjaCB0ZXN0LiINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgdGhlIHByb3BlciBjYWxsIG9yZGVyIGlzIG1haW50YWluZWQsIGV2ZW4gaWYgdGVhckRvd24oKSByYWlzZXMNCiAgICAjIGFuIGV4Y2VwdGlvbi4NCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fdGVhckRvd24oc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGNsYXNzIEZvbyhUZXN0LkxvZ2dpbmdUZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVhckRvd24oc2VsZik6DQogICAgICAgICAgICAgICAgc3VwZXIoRm9vLCBzZWxmKS50ZWFyRG93bigpDQogICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCdyYWlzZWQgYnkgRm9vLnRlYXJEb3duJykNCg0KICAgICAgICBGb28oZXZlbnRzKS5ydW4ocmVzdWx0KQ0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLCAnYWRkRXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAnc3RvcFRlc3QnXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgZXhwZWN0ZWQpDQoNCiAgICAjICJXaGVuIHRlYXJEb3duIGVycm9ycyB3aXRoIGEgZGVmYXVsdCByZXN1bHQgc3RvcFRlc3RSdW4gaXMgc3RpbGwgY2FsbGVkLiINCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fdGVhckRvd25fZGVmYXVsdF9yZXN1bHQoc2VsZik6DQoNCiAgICAgICAgY2xhc3MgRm9vKFRlc3QuTG9nZ2luZ1Rlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBkZWZhdWx0VGVzdFJlc3VsdChzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTG9nZ2luZ1Jlc3VsdChzZWxmLmV2ZW50cykNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bihzZWxmKToNCiAgICAgICAgICAgICAgICBzdXBlcihGb28sIHNlbGYpLnRlYXJEb3duKCkNCiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoJ3JhaXNlZCBieSBGb28udGVhckRvd24nKQ0KDQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIEZvbyhldmVudHMpLnJ1bigpDQogICAgICAgIGV4cGVjdGVkID0gWydzdGFydFRlc3RSdW4nLCAnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLA0KICAgICAgICAgICAgICAgICAgICAnYWRkRXJyb3InLCAnc3RvcFRlc3QnLCAnc3RvcFRlc3RSdW4nXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgZXhwZWN0ZWQpDQoNCiAgICAjICJUZXN0Q2FzZS5ydW4oKSBzdGlsbCB3b3JrcyB3aGVuIHRoZSBkZWZhdWx0VGVzdFJlc3VsdCBpcyBhIFRlc3RSZXN1bHQNCiAgICAjIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBzdGFydFRlc3RSdW4gYW5kIHN0b3BUZXN0UnVuLg0KICAgIGRlZiB0ZXN0X3J1bl9jYWxsX29yZGVyX2RlZmF1bHRfcmVzdWx0KHNlbGYpOg0KDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgZGVmYXVsdFRlc3RSZXN1bHQoc2VsZik6DQogICAgICAgICAgICAgICAgcmV0dXJuIFJlc3VsdFdpdGhOb1N0YXJ0VGVzdFJ1blN0b3BUZXN0UnVuKCkNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBGb28oJ3Rlc3QnKS5ydW4oKQ0KDQogICAgIyAiVGhpcyBjbGFzcyBhdHRyaWJ1dGUgZ2l2ZXMgdGhlIGV4Y2VwdGlvbiByYWlzZWQgYnkgdGhlIHRlc3QoKSBtZXRob2QuDQogICAgIyBJZiBhIHRlc3QgZnJhbWV3b3JrIG5lZWRzIHRvIHVzZSBhIHNwZWNpYWxpemVkIGV4Y2VwdGlvbiwgcG9zc2libHkgdG8NCiAgICAjIGNhcnJ5IGFkZGl0aW9uYWwgaW5mb3JtYXRpb24sIGl0IG11c3Qgc3ViY2xhc3MgdGhpcyBleGNlcHRpb24gaW4NCiAgICAjIG9yZGVyIHRvIGBgcGxheSBmYWlyJycgd2l0aCB0aGUgZnJhbWV3b3JrLiAgVGhlIGluaXRpYWwgdmFsdWUgb2YgdGhpcw0KICAgICMgYXR0cmlidXRlIGlzIEFzc2VydGlvbkVycm9yIg0KICAgIGRlZiB0ZXN0X2ZhaWx1cmVFeGNlcHRpb25fX2RlZmF1bHQoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKEZvbygndGVzdCcpLmZhaWx1cmVFeGNlcHRpb24gaXMgQXNzZXJ0aW9uRXJyb3IpDQoNCiAgICAjICJUaGlzIGNsYXNzIGF0dHJpYnV0ZSBnaXZlcyB0aGUgZXhjZXB0aW9uIHJhaXNlZCBieSB0aGUgdGVzdCgpIG1ldGhvZC4NCiAgICAjIElmIGEgdGVzdCBmcmFtZXdvcmsgbmVlZHMgdG8gdXNlIGEgc3BlY2lhbGl6ZWQgZXhjZXB0aW9uLCBwb3NzaWJseSB0bw0KICAgICMgY2FycnkgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiwgaXQgbXVzdCBzdWJjbGFzcyB0aGlzIGV4Y2VwdGlvbiBpbg0KICAgICMgb3JkZXIgdG8gYGBwbGF5IGZhaXInJyB3aXRoIHRoZSBmcmFtZXdvcmsuIg0KICAgICMNCiAgICAjIE1ha2Ugc3VyZSBUZXN0Q2FzZS5ydW4oKSByZXNwZWN0cyB0aGUgZGVzaWduYXRlZCBmYWlsdXJlRXhjZXB0aW9uDQogICAgZGVmIHRlc3RfZmFpbHVyZUV4Y2VwdGlvbl9fc3ViY2xhc3NpbmdfX2V4cGxpY2l0X3JhaXNlKHNlbGYpOg0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICByZXN1bHQgPSBMb2dnaW5nUmVzdWx0KGV2ZW50cykNCg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCkNCg0KICAgICAgICAgICAgZmFpbHVyZUV4Y2VwdGlvbiA9IFJ1bnRpbWVFcnJvcg0KDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShGb28oJ3Rlc3QnKS5mYWlsdXJlRXhjZXB0aW9uIGlzIFJ1bnRpbWVFcnJvcikNCg0KDQogICAgICAgIEZvbygndGVzdCcpLnJ1bihyZXN1bHQpDQogICAgICAgIGV4cGVjdGVkID0gWydzdGFydFRlc3QnLCAnYWRkRmFpbHVyZScsICdzdG9wVGVzdCddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIlRoaXMgY2xhc3MgYXR0cmlidXRlIGdpdmVzIHRoZSBleGNlcHRpb24gcmFpc2VkIGJ5IHRoZSB0ZXN0KCkgbWV0aG9kLg0KICAgICMgSWYgYSB0ZXN0IGZyYW1ld29yayBuZWVkcyB0byB1c2UgYSBzcGVjaWFsaXplZCBleGNlcHRpb24sIHBvc3NpYmx5IHRvDQogICAgIyBjYXJyeSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLCBpdCBtdXN0IHN1YmNsYXNzIHRoaXMgZXhjZXB0aW9uIGluDQogICAgIyBvcmRlciB0byBgYHBsYXkgZmFpcicnIHdpdGggdGhlIGZyYW1ld29yay4iDQogICAgIw0KICAgICMgTWFrZSBzdXJlIFRlc3RDYXNlLnJ1bigpIHJlc3BlY3RzIHRoZSBkZXNpZ25hdGVkIGZhaWx1cmVFeGNlcHRpb24NCiAgICBkZWYgdGVzdF9mYWlsdXJlRXhjZXB0aW9uX19zdWJjbGFzc2luZ19faW1wbGljaXRfcmFpc2Uoc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBzZWxmLmZhaWwoImZvbyIpDQoNCiAgICAgICAgICAgIGZhaWx1cmVFeGNlcHRpb24gPSBSdW50aW1lRXJyb3INCg0KICAgICAgICBzZWxmLmFzc2VydFRydWUoRm9vKCd0ZXN0JykuZmFpbHVyZUV4Y2VwdGlvbiBpcyBSdW50aW1lRXJyb3IpDQoNCg0KICAgICAgICBGb28oJ3Rlc3QnKS5ydW4ocmVzdWx0KQ0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ2FkZEZhaWx1cmUnLCAnc3RvcFRlc3QnXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgZXhwZWN0ZWQpDQoNCiAgICAjICJUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdGhpbmcuIg0KICAgIGRlZiB0ZXN0X3NldFVwKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHJ1blRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgICMgLi4uIGFuZCBub3RoaW5nIHNob3VsZCBoYXBwZW4NCiAgICAgICAgRm9vKCkuc2V0VXAoKQ0KDQogICAgIyAiVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gZG9lcyBub3RoaW5nLiINCiAgICBkZWYgdGVzdF90ZWFyRG93bihzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW5UZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICAjIC4uLiBhbmQgbm90aGluZyBzaG91bGQgaGFwcGVuDQogICAgICAgIEZvbygpLnRlYXJEb3duKCkNCg0KICAgICMgIlJldHVybiBhIHN0cmluZyBpZGVudGlmeWluZyB0aGUgc3BlY2lmaWMgdGVzdCBjYXNlLiINCiAgICAjDQogICAgIyBCZWNhdXNlIG9mIHRoZSB2YWd1ZSBuYXR1cmUgb2YgdGhlIGRvY3MsIEknbSBub3QgZ29pbmcgdG8gbG9jayB0aGlzDQogICAgIyB0ZXN0IGRvd24gdG9vIG11Y2guIFJlYWxseSBhbGwgdGhhdCBjYW4gYmUgYXNzZXJ0ZWQgaXMgdGhhdCB0aGUgaWQoKQ0KICAgICMgd2lsbCBiZSBhIHN0cmluZyAoZWl0aGVyIDgtYnl0ZSBvciB1bmljb2RlIC0tIGFnYWluLCBiZWNhdXNlIHRoZSBkb2NzDQogICAgIyBqdXN0IHNheSAic3RyaW5nIikNCiAgICBkZWYgdGVzdF9pZChzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW5UZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoRm9vKCkuaWQoKSwgc3RyKQ0KDQoNCiAgICAjICJJZiByZXN1bHQgaXMgb21pdHRlZCBvciBOb25lLCBhIHRlbXBvcmFyeSByZXN1bHQgb2JqZWN0IGlzIGNyZWF0ZWQsDQogICAgIyB1c2VkLCBhbmQgaXMgbWFkZSBhdmFpbGFibGUgdG8gdGhlIGNhbGxlci4gQXMgVGVzdENhc2Ugb3ducyB0aGUNCiAgICAjIHRlbXBvcmFyeSByZXN1bHQgc3RhcnRUZXN0UnVuIGFuZCBzdG9wVGVzdFJ1biBhcmUgY2FsbGVkLg0KDQogICAgZGVmIHRlc3RfcnVuX191c2VzX2RlZmF1bHRUZXN0UmVzdWx0KHNlbGYpOg0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICBkZWZhdWx0UmVzdWx0ID0gTG9nZ2luZ1Jlc3VsdChldmVudHMpDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIGV2ZW50cy5hcHBlbmQoJ3Rlc3QnKQ0KDQogICAgICAgICAgICBkZWYgZGVmYXVsdFRlc3RSZXN1bHQoc2VsZik6DQogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRSZXN1bHQNCg0KICAgICAgICAjIE1ha2UgcnVuKCkgZmluZCBhIHJlc3VsdCBvYmplY3Qgb24gaXRzIG93bg0KICAgICAgICByZXN1bHQgPSBGb28oJ3Rlc3QnKS5ydW4oKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmVzdWx0LCBkZWZhdWx0UmVzdWx0KQ0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0UnVuJywgJ3N0YXJ0VGVzdCcsICd0ZXN0JywgJ2FkZFN1Y2Nlc3MnLA0KICAgICAgICAgICAgJ3N0b3BUZXN0JywgJ3N0b3BUZXN0UnVuJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIGV4cGVjdGVkKQ0KDQoNCiAgICAjICJUaGUgcmVzdWx0IG9iamVjdCBpcyByZXR1cm5lZCB0byBydW4ncyBjYWxsZXIiDQogICAgZGVmIHRlc3RfcnVuX19yZXR1cm5zX2dpdmVuX3Jlc3VsdChzZWxmKToNCg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KDQogICAgICAgIHJldHZhbCA9IEZvbygndGVzdCcpLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmV0dmFsLCByZXN1bHQpDQoNCg0KICAgICMgIlRoZSBzYW1lIGVmZmVjdCBbYXMgbWV0aG9kIHJ1bl0gbWF5IGJlIGhhZCBieSBzaW1wbHkgY2FsbGluZyB0aGUNCiAgICAjIFRlc3RDYXNlIGluc3RhbmNlLiINCiAgICBkZWYgdGVzdF9jYWxsX19pbnZva2luZ19hbl9pbnN0YW5jZV9kZWxlZ2F0ZXNfdG9fcnVuKHNlbGYpOg0KICAgICAgICByZXN1bHRJbiA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICByZXN1bHRPdXQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgICAgICBkZWYgcnVuKHNlbGYsIHJlc3VsdCk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhyZXN1bHQsIHJlc3VsdEluKQ0KICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPdXQNCg0KICAgICAgICByZXR2YWwgPSBGb28oJ3Rlc3QnKShyZXN1bHRJbikNCg0KICAgICAgICBzZWxmLmFzc2VydElzKHJldHZhbCwgcmVzdWx0T3V0KQ0KDQoNCiAgICBkZWYgdGVzdFNob3J0RGVzY3JpcHRpb25XaXRob3V0RG9jc3RyaW5nKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydElzTm9uZShzZWxmLnNob3J0RGVzY3JpcHRpb24oKSkNCg0KICAgIEB1bml0dGVzdC5za2lwSWYoc3lzLmZsYWdzLm9wdGltaXplID49IDIsDQogICAgICAgICAgICAgICAgICAgICAiRG9jc3RyaW5ncyBhcmUgb21pdHRlZCB3aXRoIC1PMiBhbmQgYWJvdmUiKQ0KICAgIGRlZiB0ZXN0U2hvcnREZXNjcmlwdGlvbldpdGhPbmVMaW5lRG9jc3RyaW5nKHNlbGYpOg0KICAgICAgICAiIiJUZXN0cyBzaG9ydERlc2NyaXB0aW9uKCkgZm9yIGEgbWV0aG9kIHdpdGggYSBkb2NzdHJpbmcuIiIiDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICAgICAgc2VsZi5zaG9ydERlc2NyaXB0aW9uKCksDQogICAgICAgICAgICAgICAgJ1Rlc3RzIHNob3J0RGVzY3JpcHRpb24oKSBmb3IgYSBtZXRob2Qgd2l0aCBhIGRvY3N0cmluZy4nKQ0KDQogICAgQHVuaXR0ZXN0LnNraXBJZihzeXMuZmxhZ3Mub3B0aW1pemUgPj0gMiwNCiAgICAgICAgICAgICAgICAgICAgICJEb2NzdHJpbmdzIGFyZSBvbWl0dGVkIHdpdGggLU8yIGFuZCBhYm92ZSIpDQogICAgZGVmIHRlc3RTaG9ydERlc2NyaXB0aW9uV2l0aE11bHRpTGluZURvY3N0cmluZyhzZWxmKToNCiAgICAgICAgIiIiVGVzdHMgc2hvcnREZXNjcmlwdGlvbigpIGZvciBhIG1ldGhvZCB3aXRoIGEgbG9uZ2VyIGRvY3N0cmluZy4NCg0KICAgICAgICBUaGlzIG1ldGhvZCBlbnN1cmVzIHRoYXQgb25seSB0aGUgZmlyc3QgbGluZSBvZiBhIGRvY3N0cmluZyBpcw0KICAgICAgICByZXR1cm5lZCB1c2VkIGluIHRoZSBzaG9ydCBkZXNjcmlwdGlvbiwgbm8gbWF0dGVyIGhvdyBsb25nIHRoZQ0KICAgICAgICB3aG9sZSB0aGluZyBpcy4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICAgICAgc2VsZi5zaG9ydERlc2NyaXB0aW9uKCksDQogICAgICAgICAgICAgICAgICdUZXN0cyBzaG9ydERlc2NyaXB0aW9uKCkgZm9yIGEgbWV0aG9kIHdpdGggYSBsb25nZXIgJw0KICAgICAgICAgICAgICAgICAnZG9jc3RyaW5nLicpDQoNCiAgICBkZWYgdGVzdEFkZFR5cGVFcXVhbGl0eUZ1bmMoc2VsZik6DQogICAgICAgIGNsYXNzIFNhZFNuYWtlKG9iamVjdCk6DQogICAgICAgICAgICAiIiJEdW1teSBjbGFzcyBmb3IgdGVzdF9hZGRUeXBlRXF1YWxpdHlGdW5jLiIiIg0KICAgICAgICBzMSwgczIgPSBTYWRTbmFrZSgpLCBTYWRTbmFrZSgpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoczEgPT0gczIpDQogICAgICAgIGRlZiBBbGxTbmFrZXNDcmVhdGVkRXF1YWwoYSwgYiwgbXNnPU5vbmUpOg0KICAgICAgICAgICAgcmV0dXJuIHR5cGUoYSkgPT0gdHlwZShiKSA9PSBTYWRTbmFrZQ0KICAgICAgICBzZWxmLmFkZFR5cGVFcXVhbGl0eUZ1bmMoU2FkU25ha2UsIEFsbFNuYWtlc0NyZWF0ZWRFcXVhbCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzMSwgczIpDQogICAgICAgICMgTm8gdGhpcyBkb2Vzbid0IGNsZWFuIHVwIGFuZCByZW1vdmUgdGhlIFNhZFNuYWtlIGVxdWFsaXR5IGZ1bmMNCiAgICAgICAgIyBmcm9tIHRoaXMgVGVzdENhc2UgaW5zdGFuY2UgYnV0IHNpbmNlIGl0cyBhIGxvY2FsIG5vdGhpbmcgZWxzZQ0KICAgICAgICAjIHdpbGwgZXZlciBub3RpY2UgdGhhdC4NCg0KICAgIGRlZiB0ZXN0QXNzZXJ0SXMoc2VsZik6DQogICAgICAgIHRoaW5nID0gb2JqZWN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRJcyh0aGluZywgdGhpbmcpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRJcywgdGhpbmcsIG9iamVjdCgpKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRJc05vdChzZWxmKToNCiAgICAgICAgdGhpbmcgPSBvYmplY3QoKQ0KICAgICAgICBzZWxmLmFzc2VydElzTm90KHRoaW5nLCBvYmplY3QoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydElzTm90LCB0aGluZywgdGhpbmcpDQoNCiAgICBkZWYgdGVzdEFzc2VydElzSW5zdGFuY2Uoc2VsZik6DQogICAgICAgIHRoaW5nID0gW10NCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHRoaW5nLCBsaXN0KQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmcsIGRpY3QpDQoNCiAgICBkZWYgdGVzdEFzc2VydE5vdElzSW5zdGFuY2Uoc2VsZik6DQogICAgICAgIHRoaW5nID0gW10NCiAgICAgICAgc2VsZi5hc3NlcnROb3RJc0luc3RhbmNlKHRoaW5nLCBkaWN0KQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Tm90SXNJbnN0YW5jZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmcsIGxpc3QpDQoNCiAgICBkZWYgdGVzdEFzc2VydEluKHNlbGYpOg0KICAgICAgICBhbmltYWxzID0geydtb25rZXknOiAnYmFuYW5hJywgJ2Nvdyc6ICdncmFzcycsICdzZWFsJzogJ2Zpc2gnfQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oJ2EnLCAnYWJjJykNCiAgICAgICAgc2VsZi5hc3NlcnRJbigyLCBbMSwgMiwgM10pDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oJ21vbmtleScsIGFuaW1hbHMpDQoNCiAgICAgICAgc2VsZi5hc3NlcnROb3RJbignZCcsICdhYmMnKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKDAsIFsxLCAyLCAzXSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RJbignb3R0ZXInLCBhbmltYWxzKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRJbiwgJ3gnLCAnYWJjJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydEluLCA0LCBbMSwgMiwgM10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRJbiwgJ2VsZXBoYW50JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWFscykNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Tm90SW4sICdjJywgJ2FiYycpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnROb3RJbiwgMSwgWzEsIDIsIDNdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Tm90SW4sICdjb3cnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYWxzKQ0KDQogICAgZGVmIHRlc3RBc3NlcnREaWN0Q29udGFpbnNTdWJzZXQoc2VsZik6DQogICAgICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKToNCiAgICAgICAgICAgIHdhcm5pbmdzLnNpbXBsZWZpbHRlcigiaWdub3JlIiwgRGVwcmVjYXRpb25XYXJuaW5nKQ0KDQogICAgICAgICAgICBzZWxmLmFzc2VydERpY3RDb250YWluc1N1YnNldCh7fSwge30pDQogICAgICAgICAgICBzZWxmLmFzc2VydERpY3RDb250YWluc1N1YnNldCh7fSwgeydhJzogMX0pDQogICAgICAgICAgICBzZWxmLmFzc2VydERpY3RDb250YWluc1N1YnNldCh7J2EnOiAxfSwgeydhJzogMX0pDQogICAgICAgICAgICBzZWxmLmFzc2VydERpY3RDb250YWluc1N1YnNldCh7J2EnOiAxfSwgeydhJzogMSwgJ2InOiAyfSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0KHsnYSc6IDEsICdiJzogMn0sIHsnYSc6IDEsICdiJzogMn0pDQoNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydERpY3RDb250YWluc1N1YnNldCh7MTogIm9uZSJ9LCB7fSkNCg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0KHsnYSc6IDJ9LCB7J2EnOiAxfSkNCg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0KHsnYyc6IDF9LCB7J2EnOiAxfSkNCg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0KHsnYSc6IDEsICdjJzogMX0sIHsnYSc6IDF9KQ0KDQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnREaWN0Q29udGFpbnNTdWJzZXQoeydhJzogMSwgJ2MnOiAxfSwgeydhJzogMX0pDQoNCiAgICAgICAgICAgIG9uZSA9ICcnLmpvaW4oY2hyKGkpIGZvciBpIGluIHJhbmdlKDI1NSkpDQogICAgICAgICAgICAjIHRoaXMgdXNlZCB0byBjYXVzZSBhIFVuaWNvZGVEZWNvZGVFcnJvciBjb25zdHJ1Y3RpbmcgdGhlIGZhaWx1cmUgbXNnDQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnREaWN0Q29udGFpbnNTdWJzZXQoeydmb28nOiBvbmV9LCB7J2Zvbyc6ICdcdUZGRkQnfSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0RXF1YWwoc2VsZik6DQogICAgICAgIGVxdWFsX3BhaXJzID0gWw0KICAgICAgICAgICAgICAgICgoKSwgKCkpLA0KICAgICAgICAgICAgICAgICh7fSwge30pLA0KICAgICAgICAgICAgICAgIChbXSwgW10pLA0KICAgICAgICAgICAgICAgIChzZXQoKSwgc2V0KCkpLA0KICAgICAgICAgICAgICAgIChmcm96ZW5zZXQoKSwgZnJvemVuc2V0KCkpXQ0KICAgICAgICBmb3IgYSwgYiBpbiBlcXVhbF9wYWlyczoNCiAgICAgICAgICAgICMgVGhpcyBtZXNzIG9mIHRyeSBleGNlcHRzIGlzIHRvIHRlc3QgdGhlIGFzc2VydEVxdWFsIGJlaGF2aW9yDQogICAgICAgICAgICAjIGl0c2VsZi4NCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGEsIGIpDQogICAgICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uOg0KICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgnYXNzZXJ0RXF1YWwoJXIsICVyKSBmYWlsZWQnICUgKGEsIGIpKQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYSwgYiwgbXNnPSdmb28nKQ0KICAgICAgICAgICAgZXhjZXB0IHNlbGYuZmFpbHVyZUV4Y2VwdGlvbjoNCiAgICAgICAgICAgICAgICBzZWxmLmZhaWwoJ2Fzc2VydEVxdWFsKCVyLCAlcikgd2l0aCBtc2c9IGZhaWxlZCcgJSAoYSwgYikpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhLCBiLCAnZm9vJykNCiAgICAgICAgICAgIGV4Y2VwdCBzZWxmLmZhaWx1cmVFeGNlcHRpb246DQogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCdhc3NlcnRFcXVhbCglciwgJXIpIHdpdGggdGhpcmQgcGFyYW1ldGVyIGZhaWxlZCcgJQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAoYSwgYikpDQoNCiAgICAgICAgdW5lcXVhbF9wYWlycyA9IFsNCiAgICAgICAgICAgICAgICgoKSwgW10pLA0KICAgICAgICAgICAgICAgKHt9LCBzZXQoKSksDQogICAgICAgICAgICAgICAoc2V0KFs0LDFdKSwgZnJvemVuc2V0KFs0LDJdKSksDQogICAgICAgICAgICAgICAoZnJvemVuc2V0KFs0LDVdKSwgc2V0KFsyLDNdKSksDQogICAgICAgICAgICAgICAoc2V0KFszLDRdKSwgc2V0KFs1LDRdKSldDQogICAgICAgIGZvciBhLCBiIGluIHVuZXF1YWxfcGFpcnM6DQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0RXF1YWwsIGEsIGIpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0RXF1YWwsIGEsIGIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9vJykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRFcXVhbCwgYSwgYiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZz0nZm9vJykNCg0KICAgIGRlZiB0ZXN0RXF1YWxpdHkoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TGlzdEVxdWFsKFtdLCBbXSkNCiAgICAgICAgc2VsZi5hc3NlcnRUdXBsZUVxdWFsKCgpLCAoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRTZXF1ZW5jZUVxdWFsKFtdLCAoKSkNCg0KICAgICAgICBhID0gWzAsICdhJywgW11dDQogICAgICAgIGIgPSBbXQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyh1bml0dGVzdC5UZXN0Q2FzZS5mYWlsdXJlRXhjZXB0aW9uLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydExpc3RFcXVhbCwgYSwgYikNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXModW5pdHRlc3QuVGVzdENhc2UuZmFpbHVyZUV4Y2VwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRMaXN0RXF1YWwsIHR1cGxlKGEpLCB0dXBsZShiKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXModW5pdHRlc3QuVGVzdENhc2UuZmFpbHVyZUV4Y2VwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRTZXF1ZW5jZUVxdWFsLCBhLCB0dXBsZShiKSkNCg0KICAgICAgICBiLmV4dGVuZChhKQ0KICAgICAgICBzZWxmLmFzc2VydExpc3RFcXVhbChhLCBiKQ0KICAgICAgICBzZWxmLmFzc2VydFR1cGxlRXF1YWwodHVwbGUoYSksIHR1cGxlKGIpKQ0KICAgICAgICBzZWxmLmFzc2VydFNlcXVlbmNlRXF1YWwoYSwgdHVwbGUoYikpDQogICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbCh0dXBsZShhKSwgYikNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0TGlzdEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBhLCB0dXBsZShiKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFR1cGxlRXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIHR1cGxlKGEpLCBiKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0TGlzdEVxdWFsLCBOb25lLCBiKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0VHVwbGVFcXVhbCwgTm9uZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGUoYikpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRTZXF1ZW5jZUVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBOb25lLCB0dXBsZShiKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydExpc3RFcXVhbCwgMSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFR1cGxlRXF1YWwsIDEsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRTZXF1ZW5jZUVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAxLCAxKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RGljdEVxdWFsKHt9LCB7fSkNCg0KICAgICAgICBjID0geyAneCc6IDEgfQ0KICAgICAgICBkID0ge30NCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXModW5pdHRlc3QuVGVzdENhc2UuZmFpbHVyZUV4Y2VwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnREaWN0RXF1YWwsIGMsIGQpDQoNCiAgICAgICAgZC51cGRhdGUoYykNCiAgICAgICAgc2VsZi5hc3NlcnREaWN0RXF1YWwoYywgZCkNCg0KICAgICAgICBkWyd4J10gPSAwDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHVuaXR0ZXN0LlRlc3RDYXNlLmZhaWx1cmVFeGNlcHRpb24sDQogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RGljdEVxdWFsLCBjLCBkLCAnVGhlc2UgYXJlIHVuZXF1YWwnKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnREaWN0RXF1YWwsIE5vbmUsIGQpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnREaWN0RXF1YWwsIFtdLCBkKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0RGljdEVxdWFsLCAxLCAxKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRTZXF1ZW5jZUVxdWFsTWF4RGlmZihzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzZWxmLm1heERpZmYsIDgwKjgpDQogICAgICAgIHNlcTEgPSAnYScgKyAneCcgKiA4MCoqMg0KICAgICAgICBzZXEyID0gJ2InICsgJ3gnICogODAqKjINCiAgICAgICAgZGlmZiA9ICdcbicuam9pbihkaWZmbGliLm5kaWZmKHBwcmludC5wZm9ybWF0KHNlcTEpLnNwbGl0bGluZXMoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBwcmludC5wZm9ybWF0KHNlcTIpLnNwbGl0bGluZXMoKSkpDQogICAgICAgICMgdGhlICsxIGlzIHRoZSBsZWFkaW5nIFxuIGFkZGVkIGJ5IGFzc2VydFNlcXVlbmNlRXF1YWwNCiAgICAgICAgb21pdHRlZCA9IHVuaXR0ZXN0LmNhc2UuRElGRl9PTUlUVEVEICUgKGxlbihkaWZmKSArIDEsKQ0KDQogICAgICAgIHNlbGYubWF4RGlmZiA9IGxlbihkaWZmKS8vMg0KICAgICAgICB0cnk6DQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbChzZXExLCBzZXEyKQ0KICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBtc2cgPSBlLmFyZ3NbMF0NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgnYXNzZXJ0U2VxdWVuY2VFcXVhbCBkaWQgbm90IGZhaWwuJykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGxlbihtc2cpIDwgbGVuKGRpZmYpKQ0KICAgICAgICBzZWxmLmFzc2VydEluKG9taXR0ZWQsIG1zZykNCg0KICAgICAgICBzZWxmLm1heERpZmYgPSBsZW4oZGlmZikgKiAyDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbChzZXExLCBzZXEyKQ0KICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBtc2cgPSBlLmFyZ3NbMF0NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgnYXNzZXJ0U2VxdWVuY2VFcXVhbCBkaWQgbm90IGZhaWwuJykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGxlbihtc2cpID4gbGVuKGRpZmYpKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKG9taXR0ZWQsIG1zZykNCg0KICAgICAgICBzZWxmLm1heERpZmYgPSBOb25lDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbChzZXExLCBzZXEyKQ0KICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBtc2cgPSBlLmFyZ3NbMF0NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgnYXNzZXJ0U2VxdWVuY2VFcXVhbCBkaWQgbm90IGZhaWwuJykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGxlbihtc2cpID4gbGVuKGRpZmYpKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKG9taXR0ZWQsIG1zZykNCg0KICAgIGRlZiB0ZXN0VHJ1bmNhdGVNZXNzYWdlKHNlbGYpOg0KICAgICAgICBzZWxmLm1heERpZmYgPSAxDQogICAgICAgIG1lc3NhZ2UgPSBzZWxmLl90cnVuY2F0ZU1lc3NhZ2UoJ2ZvbycsICdiYXInKQ0KICAgICAgICBvbWl0dGVkID0gdW5pdHRlc3QuY2FzZS5ESUZGX09NSVRURUQgJSBsZW4oJ2JhcicpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobWVzc2FnZSwgJ2ZvbycgKyBvbWl0dGVkKQ0KDQogICAgICAgIHNlbGYubWF4RGlmZiA9IE5vbmUNCiAgICAgICAgbWVzc2FnZSA9IHNlbGYuX3RydW5jYXRlTWVzc2FnZSgnZm9vJywgJ2JhcicpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobWVzc2FnZSwgJ2Zvb2JhcicpDQoNCiAgICAgICAgc2VsZi5tYXhEaWZmID0gNA0KICAgICAgICBtZXNzYWdlID0gc2VsZi5fdHJ1bmNhdGVNZXNzYWdlKCdmb28nLCAnYmFyJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtZXNzYWdlLCAnZm9vYmFyJykNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0RGljdEVxdWFsVHJ1bmNhdGVzKHNlbGYpOg0KICAgICAgICB0ZXN0ID0gdW5pdHRlc3QuVGVzdENhc2UoJ2Fzc2VydEVxdWFsJykNCiAgICAgICAgZGVmIHRydW5jYXRlKG1zZywgZGlmZik6DQogICAgICAgICAgICByZXR1cm4gJ2ZvbycNCiAgICAgICAgdGVzdC5fdHJ1bmNhdGVNZXNzYWdlID0gdHJ1bmNhdGUNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGVzdC5hc3NlcnREaWN0RXF1YWwoe30sIHsxOiAwfSkNCiAgICAgICAgZXhjZXB0IHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksICdmb28nKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCdhc3NlcnREaWN0RXF1YWwgZGlkIG5vdCBmYWlsJykNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0TXVsdGlMaW5lRXF1YWxUcnVuY2F0ZXMoc2VsZik6DQogICAgICAgIHRlc3QgPSB1bml0dGVzdC5UZXN0Q2FzZSgnYXNzZXJ0RXF1YWwnKQ0KICAgICAgICBkZWYgdHJ1bmNhdGUobXNnLCBkaWZmKToNCiAgICAgICAgICAgIHJldHVybiAnZm9vJw0KICAgICAgICB0ZXN0Ll90cnVuY2F0ZU1lc3NhZ2UgPSB0cnVuY2F0ZQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0ZXN0LmFzc2VydE11bHRpTGluZUVxdWFsKCdmb28nLCAnYmFyJykNCiAgICAgICAgZXhjZXB0IHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksICdmb28nKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCdhc3NlcnRNdWx0aUxpbmVFcXVhbCBkaWQgbm90IGZhaWwnKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRFcXVhbF9kaWZmVGhyZXNob2xkKHNlbGYpOg0KICAgICAgICAjIGNoZWNrIHRocmVzaG9sZCB2YWx1ZQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNlbGYuX2RpZmZUaHJlc2hvbGQsIDIqKjE2KQ0KICAgICAgICAjIGRpc2FibGUgbWFkRGlmZiB0byBnZXQgZGlmZiBtYXJrZXJzDQogICAgICAgIHNlbGYubWF4RGlmZiA9IE5vbmUNCg0KICAgICAgICAjIHNldCBhIGxvd2VyIHRocmVzaG9sZCB2YWx1ZSBhbmQgYWRkIGEgY2xlYW51cCB0byByZXN0b3JlIGl0DQogICAgICAgIG9sZF90aHJlc2hvbGQgPSBzZWxmLl9kaWZmVGhyZXNob2xkDQogICAgICAgIHNlbGYuX2RpZmZUaHJlc2hvbGQgPSAyKio4DQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChsYW1iZGE6IHNldGF0dHIoc2VsZiwgJ19kaWZmVGhyZXNob2xkJywgb2xkX3RocmVzaG9sZCkpDQoNCiAgICAgICAgIyB1bmRlciB0aGUgdGhyZXNob2xkOiBkaWZmIG1hcmtlciAoXikgaW4gZXJyb3IgbWVzc2FnZQ0KICAgICAgICBzID0gJ3gnICogKDIqKjcpDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKSBhcyBjbToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocyArICdhJywgcyArICdiJykNCiAgICAgICAgc2VsZi5hc3NlcnRJbignXicsIHN0cihjbS5leGNlcHRpb24pKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHMgKyAnYScsIHMgKyAnYScpDQoNCiAgICAgICAgIyBvdmVyIHRoZSB0aHJlc2hvbGQ6IGRpZmYgbm90IHVzZWQgYW5kIG1hcmtlciAoXikgbm90IGluIGVycm9yIG1lc3NhZ2UNCiAgICAgICAgcyA9ICd4JyAqICgyKio5KQ0KICAgICAgICAjIGlmIHRoZSBwYXRoIHRoYXQgdXNlcyBkaWZmbGliIGlzIHRha2VuLCBfdHJ1bmNhdGVNZXNzYWdlIHdpbGwgYmUNCiAgICAgICAgIyBjYWxsZWQgLS0gcmVwbGFjZSBpdCB3aXRoIGV4cGxvZGluZ1RydW5jYXRpb24gdG8gdmVyaWZ5IHRoYXQgdGhpcw0KICAgICAgICAjIGRvZXNuJ3QgaGFwcGVuDQogICAgICAgIGRlZiBleHBsb2RpbmdUcnVuY2F0aW9uKG1lc3NhZ2UsIGRpZmYpOg0KICAgICAgICAgICAgcmFpc2UgU3lzdGVtRXJyb3IoJ3RoaXMgc2hvdWxkIG5vdCBiZSByYWlzZWQnKQ0KICAgICAgICBvbGRfdHJ1bmNhdGUgPSBzZWxmLl90cnVuY2F0ZU1lc3NhZ2UNCiAgICAgICAgc2VsZi5fdHJ1bmNhdGVNZXNzYWdlID0gZXhwbG9kaW5nVHJ1bmNhdGlvbg0KICAgICAgICBzZWxmLmFkZENsZWFudXAobGFtYmRhOiBzZXRhdHRyKHNlbGYsICdfdHJ1bmNhdGVNZXNzYWdlJywgb2xkX3RydW5jYXRlKSkNCg0KICAgICAgICBzMSwgczIgPSBzICsgJ2EnLCBzICsgJ2InDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKSBhcyBjbToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoczEsIHMyKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKCdeJywgc3RyKGNtLmV4Y2VwdGlvbikpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKGNtLmV4Y2VwdGlvbiksICclciAhPSAlcicgJSAoczEsIHMyKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzICsgJ2EnLCBzICsgJ2EnKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRDb3VudEVxdWFsKHNlbGYpOg0KICAgICAgICBhID0gb2JqZWN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRDb3VudEVxdWFsKFsxLCAyLCAzXSwgWzMsIDIsIDFdKQ0KICAgICAgICBzZWxmLmFzc2VydENvdW50RXF1YWwoWydmb28nLCAnYmFyJywgJ2JheiddLCBbJ2JhcicsICdiYXonLCAnZm9vJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0Q291bnRFcXVhbChbYSwgYSwgMiwgMiwgM10sIChhLCAyLCAzLCBhLCAyKSkNCiAgICAgICAgc2VsZi5hc3NlcnRDb3VudEVxdWFsKFsxLCAiMiIsICJhIiwgImEiXSwgWyJhIiwgIjIiLCBUcnVlLCAiYSJdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Q291bnRFcXVhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgWzEsIDJdICsgWzNdICogMTAwLCBbMV0gKiAxMDAgKyBbMiwgM10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRDb3VudEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBbMSwgIjIiLCAiYSIsICJhIl0sIFsiYSIsICIyIiwgVHJ1ZSwgMV0pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRDb3VudEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBbMTBdLCBbMTAsIDExXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydENvdW50RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIFsxMCwgMTFdLCBbMTBdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Q291bnRFcXVhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgWzEwLCAxMSwgMTBdLCBbMTAsIDExXSkNCg0KICAgICAgICAjIFRlc3QgdGhhdCBzZXF1ZW5jZXMgb2YgdW5oYXNoYWJsZSBvYmplY3RzIGNhbiBiZSB0ZXN0ZWQgZm9yIHNhbWVuZXNzOg0KICAgICAgICBzZWxmLmFzc2VydENvdW50RXF1YWwoW1sxLCAyXSwgWzMsIDRdLCAwXSwgW0ZhbHNlLCBbMywgNF0sIFsxLCAyXV0pDQogICAgICAgICMgVGVzdCB0aGF0IGl0ZXJhdG9yIG9mIHVuaGFzaGFibGUgb2JqZWN0cyBjYW4gYmUgdGVzdGVkIGZvciBzYW1lbmVzczoNCiAgICAgICAgc2VsZi5hc3NlcnRDb3VudEVxdWFsKGl0ZXIoWzEsIDIsIFtdLCAzLCA0XSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyKFsxLCAyLCBbXSwgMywgNF0pKQ0KDQogICAgICAgICMgaGFzaGFibGUgdHlwZXMsIGJ1dCBub3Qgb3JkZXJhYmxlDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRDb3VudEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBbXSwgW2Rpdm1vZCwgJ3gnLCAxLCA1aiwgMmosIGZyb3plbnNldCgpXSkNCiAgICAgICAgIyBjb21wYXJpbmcgZGljdHMNCiAgICAgICAgc2VsZi5hc3NlcnRDb3VudEVxdWFsKFt7J2EnOiAxfSwgeydiJzogMn1dLCBbeydiJzogMn0sIHsnYSc6IDF9XSkNCiAgICAgICAgIyBjb21wYXJpbmcgaGV0ZXJvZ2Vub3VzIG5vbi1oYXNoYWJsZSBzZXF1ZW5jZXMNCiAgICAgICAgc2VsZi5hc3NlcnRDb3VudEVxdWFsKFsxLCAneCcsIGRpdm1vZCwgW11dLCBbZGl2bW9kLCBbXSwgJ3gnLCAxXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydENvdW50RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIFtdLCBbZGl2bW9kLCBbXSwgJ3gnLCAxLCA1aiwgMmosIHNldCgpXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydENvdW50RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIFtbMV1dLCBbWzJdXSkNCg0KICAgICAgICAjIFNhbWUgZWxlbWVudHMsIGJ1dCBub3Qgc2FtZSBzZXF1ZW5jZSBsZW5ndGgNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydENvdW50RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIFsxLCAxLCAyXSwgWzIsIDFdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Q291bnRFcXVhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgWzEsIDEsICIyIiwgImEiLCAiYSJdLCBbIjIiLCAiMiIsIFRydWUsICJhIl0pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRDb3VudEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBbMSwgeydiJzogMn0sIE5vbmUsIFRydWVdLCBbeydiJzogMn0sIFRydWUsIE5vbmVdKQ0KDQogICAgICAgICMgU2FtZSBlbGVtZW50cyB3aGljaCBkb24ndCByZWxpYWJseSBjb21wYXJlLCBpbg0KICAgICAgICAjIGRpZmZlcmVudCBvcmRlciwgc2VlIGlzc3VlIDEwMjQyDQogICAgICAgIGEgPSBbezIsNH0sIHsxLDJ9XQ0KICAgICAgICBiID0gYVs6Oi0xXQ0KICAgICAgICBzZWxmLmFzc2VydENvdW50RXF1YWwoYSwgYikNCg0KICAgICAgICAjIHRlc3QgdXRpbGl0eSBmdW5jdGlvbnMgc3VwcG9ydGluZyBhc3NlcnRDb3VudEVxdWFsKCkNCg0KICAgICAgICBkaWZmcyA9IHNldCh1bml0dGVzdC51dGlsLl9jb3VudF9kaWZmX2FsbF9wdXJwb3NlKCdhYWFiY2NkJywgJ2FiYmJjY2UnKSkNCiAgICAgICAgZXhwZWN0ZWQgPSB7KDMsMSwnYScpLCAoMSwzLCdiJyksICgxLDAsJ2QnKSwgKDAsMSwnZScpfQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGRpZmZzLCBleHBlY3RlZCkNCg0KICAgICAgICBkaWZmcyA9IHVuaXR0ZXN0LnV0aWwuX2NvdW50X2RpZmZfYWxsX3B1cnBvc2UoW1tdXSwgW10pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZGlmZnMsIFsoMSwgMCwgW10pXSkNCg0KICAgICAgICBkaWZmcyA9IHNldCh1bml0dGVzdC51dGlsLl9jb3VudF9kaWZmX2hhc2hhYmxlKCdhYWFiY2NkJywgJ2FiYmJjY2UnKSkNCiAgICAgICAgZXhwZWN0ZWQgPSB7KDMsMSwnYScpLCAoMSwzLCdiJyksICgxLDAsJ2QnKSwgKDAsMSwnZScpfQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGRpZmZzLCBleHBlY3RlZCkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0U2V0RXF1YWwoc2VsZik6DQogICAgICAgIHNldDEgPSBzZXQoKQ0KICAgICAgICBzZXQyID0gc2V0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRTZXRFcXVhbChzZXQxLCBzZXQyKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRTZXRFcXVhbCwgTm9uZSwgc2V0MikNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFNldEVxdWFsLCBbXSwgc2V0MikNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFNldEVxdWFsLCBzZXQxLCBOb25lKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0U2V0RXF1YWwsIHNldDEsIFtdKQ0KDQogICAgICAgIHNldDEgPSBzZXQoWydhJ10pDQogICAgICAgIHNldDIgPSBzZXQoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0U2V0RXF1YWwsIHNldDEsIHNldDIpDQoNCiAgICAgICAgc2V0MSA9IHNldChbJ2EnXSkNCiAgICAgICAgc2V0MiA9IHNldChbJ2EnXSkNCiAgICAgICAgc2VsZi5hc3NlcnRTZXRFcXVhbChzZXQxLCBzZXQyKQ0KDQogICAgICAgIHNldDEgPSBzZXQoWydhJ10pDQogICAgICAgIHNldDIgPSBzZXQoWydhJywgJ2InXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFNldEVxdWFsLCBzZXQxLCBzZXQyKQ0KDQogICAgICAgIHNldDEgPSBzZXQoWydhJ10pDQogICAgICAgIHNldDIgPSBmcm96ZW5zZXQoWydhJywgJ2InXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFNldEVxdWFsLCBzZXQxLCBzZXQyKQ0KDQogICAgICAgIHNldDEgPSBzZXQoWydhJywgJ2InXSkNCiAgICAgICAgc2V0MiA9IGZyb3plbnNldChbJ2EnLCAnYiddKQ0KICAgICAgICBzZWxmLmFzc2VydFNldEVxdWFsKHNldDEsIHNldDIpDQoNCiAgICAgICAgc2V0MSA9IHNldCgpDQogICAgICAgIHNldDIgPSAiZm9vIg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0U2V0RXF1YWwsIHNldDEsIHNldDIpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRTZXRFcXVhbCwgc2V0Miwgc2V0MSkNCg0KICAgICAgICAjIG1ha2Ugc3VyZSBhbnkgc3RyaW5nIGZvcm1hdHRpbmcgaXMgdHVwbGUtc2FmZQ0KICAgICAgICBzZXQxID0gc2V0KFsoMCwgMSksICgyLCAzKV0pDQogICAgICAgIHNldDIgPSBzZXQoWyg0LCA1KV0pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRTZXRFcXVhbCwgc2V0MSwgc2V0MikNCg0KICAgIGRlZiB0ZXN0SW5lcXVhbGl0eShzZWxmKToNCiAgICAgICAgIyBUcnkgaW50cw0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXIoMiwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRHcmVhdGVyRXF1YWwoMiwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRHcmVhdGVyRXF1YWwoMSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzKDEsIDIpDQogICAgICAgIHNlbGYuYXNzZXJ0TGVzc0VxdWFsKDEsIDIpDQogICAgICAgIHNlbGYuYXNzZXJ0TGVzc0VxdWFsKDEsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRHcmVhdGVyLCAxLCAyKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlciwgMSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydEdyZWF0ZXJFcXVhbCwgMSwgMikNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydExlc3MsIDIsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzLCAxLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0TGVzc0VxdWFsLCAyLCAxKQ0KDQogICAgICAgICMgVHJ5IEZsb2F0cw0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXIoMS4xLCAxLjApDQogICAgICAgIHNlbGYuYXNzZXJ0R3JlYXRlckVxdWFsKDEuMSwgMS4wKQ0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXJFcXVhbCgxLjAsIDEuMCkNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzKDEuMCwgMS4xKQ0KICAgICAgICBzZWxmLmFzc2VydExlc3NFcXVhbCgxLjAsIDEuMSkNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzRXF1YWwoMS4wLCAxLjApDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRHcmVhdGVyLCAxLjAsIDEuMSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydEdyZWF0ZXIsIDEuMCwgMS4wKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlckVxdWFsLCAxLjAsIDEuMSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydExlc3MsIDEuMSwgMS4wKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0TGVzcywgMS4wLCAxLjApDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzRXF1YWwsIDEuMSwgMS4wKQ0KDQogICAgICAgICMgVHJ5IFN0cmluZ3MNCiAgICAgICAgc2VsZi5hc3NlcnRHcmVhdGVyKCdidWcnLCAnYW50JykNCiAgICAgICAgc2VsZi5hc3NlcnRHcmVhdGVyRXF1YWwoJ2J1ZycsICdhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXJFcXVhbCgnYW50JywgJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0TGVzcygnYW50JywgJ2J1ZycpDQogICAgICAgIHNlbGYuYXNzZXJ0TGVzc0VxdWFsKCdhbnQnLCAnYnVnJykNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzRXF1YWwoJ2FudCcsICdhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlciwgJ2FudCcsICdidWcnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlciwgJ2FudCcsICdhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlckVxdWFsLCAnYW50JywgJ2J1ZycpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzLCAnYnVnJywgJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzLCAnYW50JywgJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzRXF1YWwsICdidWcnLCAnYW50JykNCg0KICAgICAgICAjIFRyeSBieXRlcw0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXIoYididWcnLCBiJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0R3JlYXRlckVxdWFsKGInYnVnJywgYidhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXJFcXVhbChiJ2FudCcsIGInYW50JykNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzKGInYW50JywgYididWcnKQ0KICAgICAgICBzZWxmLmFzc2VydExlc3NFcXVhbChiJ2FudCcsIGInYnVnJykNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzRXF1YWwoYidhbnQnLCBiJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRHcmVhdGVyLCBiJ2FudCcsIGInYnVnJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydEdyZWF0ZXIsIGInYW50JywgYidhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlckVxdWFsLCBiJ2FudCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgIGInYnVnJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydExlc3MsIGInYnVnJywgYidhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0TGVzcywgYidhbnQnLCBiJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzRXF1YWwsIGInYnVnJywgYidhbnQnKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRNdWx0aUxpbmVFcXVhbChzZWxmKToNCiAgICAgICAgc2FtcGxlX3RleHQgPSAiIiJcDQpodHRwOi8vd3d3LnB5dGhvbi5vcmcvZG9jLzIuMy9saWIvbW9kdWxlLXVuaXR0ZXN0Lmh0bWwNCnRlc3QgY2FzZQ0KICAgIEEgdGVzdCBjYXNlIGlzIHRoZSBzbWFsbGVzdCB1bml0IG9mIHRlc3RpbmcuIFsuLi5dDQoiIiINCiAgICAgICAgcmV2aXNlZF9zYW1wbGVfdGV4dCA9ICIiIlwNCmh0dHA6Ly93d3cucHl0aG9uLm9yZy9kb2MvMi40LjEvbGliL21vZHVsZS11bml0dGVzdC5odG1sDQp0ZXN0IGNhc2UNCiAgICBBIHRlc3QgY2FzZSBpcyB0aGUgc21hbGxlc3QgdW5pdCBvZiB0ZXN0aW5nLiBbLi4uXSBZb3UgbWF5IHByb3ZpZGUgeW91cg0KICAgIG93biBpbXBsZW1lbnRhdGlvbiB0aGF0IGRvZXMgbm90IHN1YmNsYXNzIGZyb20gVGVzdENhc2UsIG9mIGNvdXJzZS4NCiIiIg0KICAgICAgICBzYW1wbGVfdGV4dF9lcnJvciA9ICIiIlwNCi0gaHR0cDovL3d3dy5weXRob24ub3JnL2RvYy8yLjMvbGliL21vZHVsZS11bml0dGVzdC5odG1sDQo/ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeDQorIGh0dHA6Ly93d3cucHl0aG9uLm9yZy9kb2MvMi40LjEvbGliL21vZHVsZS11bml0dGVzdC5odG1sDQo/ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl4NCiAgdGVzdCBjYXNlDQotICAgICBBIHRlc3QgY2FzZSBpcyB0aGUgc21hbGxlc3QgdW5pdCBvZiB0ZXN0aW5nLiBbLi4uXQ0KKyAgICAgQSB0ZXN0IGNhc2UgaXMgdGhlIHNtYWxsZXN0IHVuaXQgb2YgdGVzdGluZy4gWy4uLl0gWW91IG1heSBwcm92aWRlIHlvdXINCj8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKysrKysrKysrKysrKysrKysrKysrDQorICAgICBvd24gaW1wbGVtZW50YXRpb24gdGhhdCBkb2VzIG5vdCBzdWJjbGFzcyBmcm9tIFRlc3RDYXNlLCBvZiBjb3Vyc2UuDQoiIiINCiAgICAgICAgc2VsZi5tYXhEaWZmID0gTm9uZQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydE11bHRpTGluZUVxdWFsKHNhbXBsZV90ZXh0LCByZXZpc2VkX3NhbXBsZV90ZXh0KQ0KICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICAjIG5lZWQgdG8gcmVtb3ZlIHRoZSBmaXJzdCBsaW5lIG9mIHRoZSBlcnJvciBtZXNzYWdlDQogICAgICAgICAgICBlcnJvciA9IHN0cihlKS5zcGxpdCgnXG4nLCAxKVsxXQ0KDQogICAgICAgICAgICAjIG5vIGZhaXIgdGVzdGluZyBvdXJzZWxmIHdpdGggb3Vyc2VsZiwgYW5kIGFzc2VydEVxdWFsIGlzIHVzZWQgZm9yIHN0cmluZ3MNCiAgICAgICAgICAgICMgc28gY2FuJ3QgdXNlIGFzc2VydEVxdWFsIGVpdGhlci4gSnVzdCB1c2UgYXNzZXJ0VHJ1ZS4NCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShzYW1wbGVfdGV4dF9lcnJvciA9PSBlcnJvcikNCg0KICAgIGRlZiB0ZXN0QXNlcnRFcXVhbFNpbmdsZUxpbmUoc2VsZik6DQogICAgICAgIHNhbXBsZV90ZXh0ID0gImxhZGVuIHN3YWxsb3dzIGZseSBzbG93bHkiDQogICAgICAgIHJldmlzZWRfc2FtcGxlX3RleHQgPSAidW5sYWRlbiBzd2FsbG93cyBmbHkgcXVpY2tseSINCiAgICAgICAgc2FtcGxlX3RleHRfZXJyb3IgPSAiIiJcDQotIGxhZGVuIHN3YWxsb3dzIGZseSBzbG93bHkNCj8gICAgICAgICAgICAgICAgICAgIF5eXl4NCisgdW5sYWRlbiBzd2FsbG93cyBmbHkgcXVpY2tseQ0KPyArKyAgICAgICAgICAgICAgICAgICBeXl5eXg0KIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2FtcGxlX3RleHQsIHJldmlzZWRfc2FtcGxlX3RleHQpDQogICAgICAgIGV4Y2VwdCBzZWxmLmZhaWx1cmVFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIGVycm9yID0gc3RyKGUpLnNwbGl0KCdcbicsIDEpWzFdDQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoc2FtcGxlX3RleHRfZXJyb3IgPT0gZXJyb3IpDQoNCiAgICBkZWYgdGVzdEFzc2VydElzTm9uZShzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vbmUoTm9uZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydElzTm9uZSwgRmFsc2UpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb3ROb25lKCdEalpvUGxvR2VhcnMgb24gUmFpbHMnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0SXNOb3ROb25lLCBOb25lKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRSZWdleChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRSZWdleCgnYXNkZmFiYXNkZicsIHInYWIrJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFJlZ2V4LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAnc2FhYXMnLCByJ2FhYWEnKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRSYWlzZXNSZWdleChzZWxmKToNCiAgICAgICAgY2xhc3MgRXhjZXB0aW9uTW9jayhFeGNlcHRpb24pOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGRlZiBTdHViKCk6DQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb25Nb2NrKCdXZSBleHBlY3QnKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgoRXhjZXB0aW9uTW9jaywgcmUuY29tcGlsZSgnZXhwZWN0JCcpLCBTdHViKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KEV4Y2VwdGlvbk1vY2ssICdleHBlY3QkJywgU3R1YikNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0Tm90UmFpc2VzUmVnZXgoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgoDQogICAgICAgICAgICAgICAgc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCAnXkV4Y2VwdGlvbiBub3QgcmFpc2VkIGJ5IDxsYW1iZGE+JCcsDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXNSZWdleCwgRXhjZXB0aW9uLCByZS5jb21waWxlKCd4JyksDQogICAgICAgICAgICAgICAgbGFtYmRhOiBOb25lKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KA0KICAgICAgICAgICAgICAgIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgJ15FeGNlcHRpb24gbm90IHJhaXNlZCBieSA8bGFtYmRhPiQnLA0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgsIEV4Y2VwdGlvbiwgJ3gnLA0KICAgICAgICAgICAgICAgIGxhbWJkYTogTm9uZSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0UmFpc2VzUmVnZXhNaXNtYXRjaChzZWxmKToNCiAgICAgICAgZGVmIFN0dWIoKToNCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbignVW5leHBlY3RlZCcpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXNSZWdleCgNCiAgICAgICAgICAgICAgICBzZWxmLmZhaWx1cmVFeGNlcHRpb24sDQogICAgICAgICAgICAgICAgciciXF5FeHBlY3RlZFwkIiBkb2VzIG5vdCBtYXRjaCAiVW5leHBlY3RlZCInLA0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgsIEV4Y2VwdGlvbiwgJ15FeHBlY3RlZCQnLA0KICAgICAgICAgICAgICAgIFN0dWIpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgoDQogICAgICAgICAgICAgICAgc2VsZi5mYWlsdXJlRXhjZXB0aW9uLA0KICAgICAgICAgICAgICAgIHInIlxeRXhwZWN0ZWRcJCIgZG9lcyBub3QgbWF0Y2ggIlVuZXhwZWN0ZWQiJywNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4LCBFeGNlcHRpb24sDQogICAgICAgICAgICAgICAgcmUuY29tcGlsZSgnXkV4cGVjdGVkJCcpLCBTdHViKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRSYWlzZXNFeGNWYWx1ZShzZWxmKToNCiAgICAgICAgY2xhc3MgRXhjZXB0aW9uTW9jayhFeGNlcHRpb24pOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGRlZiBTdHViKGZvbyk6DQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb25Nb2NrKGZvbykNCiAgICAgICAgdiA9ICJwYXJ0aWN1bGFyIHZhbHVlIg0KDQogICAgICAgIGN0eCA9IHNlbGYuYXNzZXJ0UmFpc2VzKEV4Y2VwdGlvbk1vY2spDQogICAgICAgIHdpdGggY3R4Og0KICAgICAgICAgICAgU3R1Yih2KQ0KICAgICAgICBlID0gY3R4LmV4Y2VwdGlvbg0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoZSwgRXhjZXB0aW9uTW9jaykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChlLmFyZ3NbMF0sIHYpDQoNCiAgICBkZWYgdGVzdEFzc2VydFdhcm5zQ2FsbGFibGUoc2VsZik6DQogICAgICAgIGRlZiBfcnVudGltZV93YXJuKCk6DQogICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJmb28iLCBSdW50aW1lV2FybmluZykNCiAgICAgICAgIyBTdWNjZXNzIHdoZW4gdGhlIHJpZ2h0IHdhcm5pbmcgaXMgdHJpZ2dlcmVkLCBldmVuIHNldmVyYWwgdGltZXMNCiAgICAgICAgc2VsZi5hc3NlcnRXYXJucyhSdW50aW1lV2FybmluZywgX3J1bnRpbWVfd2FybikNCiAgICAgICAgc2VsZi5hc3NlcnRXYXJucyhSdW50aW1lV2FybmluZywgX3J1bnRpbWVfd2FybikNCiAgICAgICAgIyBBIHR1cGxlIG9mIHdhcm5pbmcgY2xhc3NlcyBpcyBhY2NlcHRlZA0KICAgICAgICBzZWxmLmFzc2VydFdhcm5zKChEZXByZWNhdGlvbldhcm5pbmcsIFJ1bnRpbWVXYXJuaW5nKSwgX3J1bnRpbWVfd2FybikNCiAgICAgICAgIyAqYXJncyBhbmQgKiprd2FyZ3MgYWxzbyB3b3JrDQogICAgICAgIHNlbGYuYXNzZXJ0V2FybnMoUnVudGltZVdhcm5pbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybiwgImZvbyIsIGNhdGVnb3J5PVJ1bnRpbWVXYXJuaW5nKQ0KICAgICAgICAjIEZhaWx1cmUgd2hlbiBubyB3YXJuaW5nIGlzIHRyaWdnZXJlZA0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICBzZWxmLmFzc2VydFdhcm5zKFJ1bnRpbWVXYXJuaW5nLCBsYW1iZGE6IDApDQogICAgICAgICMgRmFpbHVyZSB3aGVuIGFub3RoZXIgd2FybmluZyBpcyB0cmlnZ2VyZWQNCiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOg0KICAgICAgICAgICAgIyBGb3JjZSBkZWZhdWx0IGZpbHRlciAoaW4gY2FzZSB0ZXN0cyBhcmUgcnVuIHdpdGggLVdlKQ0KICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJkZWZhdWx0IiwgUnVudGltZVdhcm5pbmcpDQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRXYXJucyhEZXByZWNhdGlvbldhcm5pbmcsIF9ydW50aW1lX3dhcm4pDQogICAgICAgICMgRmlsdGVycyBmb3Igb3RoZXIgd2FybmluZ3MgYXJlIG5vdCBtb2RpZmllZA0KICAgICAgICB3aXRoIHdhcm5pbmdzLmNhdGNoX3dhcm5pbmdzKCk6DQogICAgICAgICAgICB3YXJuaW5ncy5zaW1wbGVmaWx0ZXIoImVycm9yIiwgUnVudGltZVdhcm5pbmcpDQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKFJ1bnRpbWVXYXJuaW5nKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFdhcm5zKERlcHJlY2F0aW9uV2FybmluZywgX3J1bnRpbWVfd2FybikNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0V2FybnNDb250ZXh0KHNlbGYpOg0KICAgICAgICAjIEJlbGlldmUgaXQgb3Igbm90LCBpdCBpcyBwcmVmZXJyYWJsZSB0byBkdXBsaWNhdGUgYWxsIHRlc3RzIGFib3ZlLA0KICAgICAgICAjIHRvIG1ha2Ugc3VyZSB0aGUgX193YXJuaW5ncmVnaXN0cnlfXyAkQCBpcyBjaXJjdW12ZW50ZWQgY29ycmVjdGx5Lg0KICAgICAgICBkZWYgX3J1bnRpbWVfd2FybigpOg0KICAgICAgICAgICAgd2FybmluZ3Mud2FybigiZm9vIiwgUnVudGltZVdhcm5pbmcpDQogICAgICAgIF9ydW50aW1lX3dhcm5fbGluZW5vID0gaW5zcGVjdC5nZXRzb3VyY2VsaW5lcyhfcnVudGltZV93YXJuKVsxXQ0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnMoUnVudGltZVdhcm5pbmcpIGFzIGNtOg0KICAgICAgICAgICAgX3J1bnRpbWVfd2FybigpDQogICAgICAgICMgQSB0dXBsZSBvZiB3YXJuaW5nIGNsYXNzZXMgaXMgYWNjZXB0ZWQNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKChEZXByZWNhdGlvbldhcm5pbmcsIFJ1bnRpbWVXYXJuaW5nKSkgYXMgY206DQogICAgICAgICAgICBfcnVudGltZV93YXJuKCkNCiAgICAgICAgIyBUaGUgY29udGV4dCBtYW5hZ2VyIGV4cG9zZXMgdmFyaW91cyB1c2VmdWwgYXR0cmlidXRlcw0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoY20ud2FybmluZywgUnVudGltZVdhcm5pbmcpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoY20ud2FybmluZy5hcmdzWzBdLCAiZm9vIikNCiAgICAgICAgc2VsZi5hc3NlcnRJbigidGVzdF9jYXNlLnB5IiwgY20uZmlsZW5hbWUpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoY20ubGluZW5vLCBfcnVudGltZV93YXJuX2xpbmVubyArIDEpDQogICAgICAgICMgU2FtZSB3aXRoIHNldmVyYWwgd2FybmluZ3MNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKFJ1bnRpbWVXYXJuaW5nKToNCiAgICAgICAgICAgIF9ydW50aW1lX3dhcm4oKQ0KICAgICAgICAgICAgX3J1bnRpbWVfd2FybigpDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRXYXJucyhSdW50aW1lV2FybmluZyk6DQogICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJmb28iLCBjYXRlZ29yeT1SdW50aW1lV2FybmluZykNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gbm8gd2FybmluZyBpcyB0cmlnZ2VyZWQNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKFJ1bnRpbWVXYXJuaW5nKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICMgRmFpbHVyZSB3aGVuIGFub3RoZXIgd2FybmluZyBpcyB0cmlnZ2VyZWQNCiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOg0KICAgICAgICAgICAgIyBGb3JjZSBkZWZhdWx0IGZpbHRlciAoaW4gY2FzZSB0ZXN0cyBhcmUgcnVuIHdpdGggLVdlKQ0KICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJkZWZhdWx0IiwgUnVudGltZVdhcm5pbmcpDQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKERlcHJlY2F0aW9uV2FybmluZyk6DQogICAgICAgICAgICAgICAgICAgIF9ydW50aW1lX3dhcm4oKQ0KICAgICAgICAjIEZpbHRlcnMgZm9yIG90aGVyIHdhcm5pbmdzIGFyZSBub3QgbW9kaWZpZWQNCiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOg0KICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJlcnJvciIsIFJ1bnRpbWVXYXJuaW5nKQ0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhSdW50aW1lV2FybmluZyk6DQogICAgICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKERlcHJlY2F0aW9uV2FybmluZyk6DQogICAgICAgICAgICAgICAgICAgIF9ydW50aW1lX3dhcm4oKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRXYXJuc1JlZ2V4Q2FsbGFibGUoc2VsZik6DQogICAgICAgIGRlZiBfcnVudGltZV93YXJuKG1zZyk6DQogICAgICAgICAgICB3YXJuaW5ncy53YXJuKG1zZywgUnVudGltZVdhcm5pbmcpDQogICAgICAgIHNlbGYuYXNzZXJ0V2FybnNSZWdleChSdW50aW1lV2FybmluZywgIm8rIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ydW50aW1lX3dhcm4sICJmb294IikNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gbm8gd2FybmluZyBpcyB0cmlnZ2VyZWQNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRXYXJuc1JlZ2V4KFJ1bnRpbWVXYXJuaW5nLCAibysiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbWJkYTogMCkNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gYW5vdGhlciB3YXJuaW5nIGlzIHRyaWdnZXJlZA0KICAgICAgICB3aXRoIHdhcm5pbmdzLmNhdGNoX3dhcm5pbmdzKCk6DQogICAgICAgICAgICAjIEZvcmNlIGRlZmF1bHQgZmlsdGVyIChpbiBjYXNlIHRlc3RzIGFyZSBydW4gd2l0aCAtV2UpDQogICAgICAgICAgICB3YXJuaW5ncy5zaW1wbGVmaWx0ZXIoImRlZmF1bHQiLCBSdW50aW1lV2FybmluZykNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFdhcm5zUmVnZXgoRGVwcmVjYXRpb25XYXJuaW5nLCAibysiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcnVudGltZV93YXJuLCAiZm9veCIpDQogICAgICAgICMgRmFpbHVyZSB3aGVuIG1lc3NhZ2UgZG9lc24ndCBtYXRjaA0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICBzZWxmLmFzc2VydFdhcm5zUmVnZXgoUnVudGltZVdhcm5pbmcsICJvKyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3J1bnRpbWVfd2FybiwgImJhcnoiKQ0KICAgICAgICAjIEEgbGl0dGxlIHRyaWNraWVyOiB3ZSBhc2sgUnVudGltZVdhcm5pbmdzIHRvIGJlIHJhaXNlZCwgYW5kIHRoZW4NCiAgICAgICAgIyBjaGVjayBmb3Igc29tZSBvZiB0aGVtLiAgSXQgaXMgaW1wbGVtZW50YXRpb24tZGVmaW5lZCB3aGV0aGVyDQogICAgICAgICMgbm9uLW1hdGNoaW5nIFJ1bnRpbWVXYXJuaW5ncyBhcmUgc2ltcGx5IHJlLXJhaXNlZCwgb3IgcHJvZHVjZSBhDQogICAgICAgICMgZmFpbHVyZUV4Y2VwdGlvbi4NCiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOg0KICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJlcnJvciIsIFJ1bnRpbWVXYXJuaW5nKQ0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcygoUnVudGltZVdhcm5pbmcsIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbikpOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0V2FybnNSZWdleChSdW50aW1lV2FybmluZywgIm8rIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3J1bnRpbWVfd2FybiwgImJhcnoiKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRXYXJuc1JlZ2V4Q29udGV4dChzZWxmKToNCiAgICAgICAgIyBTYW1lIGFzIGFib3ZlLCBidXQgd2l0aCBhc3NlcnRXYXJuc1JlZ2V4IGFzIGEgY29udGV4dCBtYW5hZ2VyDQogICAgICAgIGRlZiBfcnVudGltZV93YXJuKG1zZyk6DQogICAgICAgICAgICB3YXJuaW5ncy53YXJuKG1zZywgUnVudGltZVdhcm5pbmcpDQogICAgICAgIF9ydW50aW1lX3dhcm5fbGluZW5vID0gaW5zcGVjdC5nZXRzb3VyY2VsaW5lcyhfcnVudGltZV93YXJuKVsxXQ0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnNSZWdleChSdW50aW1lV2FybmluZywgIm8rIikgYXMgY206DQogICAgICAgICAgICBfcnVudGltZV93YXJuKCJmb294IikNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGNtLndhcm5pbmcsIFJ1bnRpbWVXYXJuaW5nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGNtLndhcm5pbmcuYXJnc1swXSwgImZvb3giKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCJ0ZXN0X2Nhc2UucHkiLCBjbS5maWxlbmFtZSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjbS5saW5lbm8sIF9ydW50aW1lX3dhcm5fbGluZW5vICsgMSkNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gbm8gd2FybmluZyBpcyB0cmlnZ2VyZWQNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zUmVnZXgoUnVudGltZVdhcm5pbmcsICJvKyIpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gYW5vdGhlciB3YXJuaW5nIGlzIHRyaWdnZXJlZA0KICAgICAgICB3aXRoIHdhcm5pbmdzLmNhdGNoX3dhcm5pbmdzKCk6DQogICAgICAgICAgICAjIEZvcmNlIGRlZmF1bHQgZmlsdGVyIChpbiBjYXNlIHRlc3RzIGFyZSBydW4gd2l0aCAtV2UpDQogICAgICAgICAgICB3YXJuaW5ncy5zaW1wbGVmaWx0ZXIoImRlZmF1bHQiLCBSdW50aW1lV2FybmluZykNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKToNCiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnNSZWdleChEZXByZWNhdGlvbldhcm5pbmcsICJvKyIpOg0KICAgICAgICAgICAgICAgICAgICBfcnVudGltZV93YXJuKCJmb294IikNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gbWVzc2FnZSBkb2Vzbid0IG1hdGNoDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKToNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRXYXJuc1JlZ2V4KFJ1bnRpbWVXYXJuaW5nLCAibysiKToNCiAgICAgICAgICAgICAgICBfcnVudGltZV93YXJuKCJiYXJ6IikNCiAgICAgICAgIyBBIGxpdHRsZSB0cmlja2llcjogd2UgYXNrIFJ1bnRpbWVXYXJuaW5ncyB0byBiZSByYWlzZWQsIGFuZCB0aGVuDQogICAgICAgICMgY2hlY2sgZm9yIHNvbWUgb2YgdGhlbS4gIEl0IGlzIGltcGxlbWVudGF0aW9uLWRlZmluZWQgd2hldGhlcg0KICAgICAgICAjIG5vbi1tYXRjaGluZyBSdW50aW1lV2FybmluZ3MgYXJlIHNpbXBseSByZS1yYWlzZWQsIG9yIHByb2R1Y2UgYQ0KICAgICAgICAjIGZhaWx1cmVFeGNlcHRpb24uDQogICAgICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKToNCiAgICAgICAgICAgIHdhcm5pbmdzLnNpbXBsZWZpbHRlcigiZXJyb3IiLCBSdW50aW1lV2FybmluZykNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoKFJ1bnRpbWVXYXJuaW5nLCBzZWxmLmZhaWx1cmVFeGNlcHRpb24pKToNCiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnNSZWdleChSdW50aW1lV2FybmluZywgIm8rIik6DQogICAgICAgICAgICAgICAgICAgIF9ydW50aW1lX3dhcm4oImJhcnoiKQ0KDQogICAgZGVmIHRlc3REZXByZWNhdGVkTWV0aG9kTmFtZXMoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBUZXN0IHRoYXQgdGhlIGRlcHJlY2F0ZWQgbWV0aG9kcyByYWlzZSBhIERlcHJlY2F0aW9uV2FybmluZy4gU2VlICM5NDI0Lg0KICAgICAgICAiIiINCiAgICAgICAgb2xkID0gKA0KICAgICAgICAgICAgKHNlbGYuZmFpbElmRXF1YWwsICgzLCA1KSksDQogICAgICAgICAgICAoc2VsZi5hc3NlcnROb3RFcXVhbHMsICgzLCA1KSksDQogICAgICAgICAgICAoc2VsZi5mYWlsVW5sZXNzRXF1YWwsICgzLCAzKSksDQogICAgICAgICAgICAoc2VsZi5hc3NlcnRFcXVhbHMsICgzLCAzKSksDQogICAgICAgICAgICAoc2VsZi5mYWlsVW5sZXNzQWxtb3N0RXF1YWwsICgyLjAsIDIuMCkpLA0KICAgICAgICAgICAgKHNlbGYuYXNzZXJ0QWxtb3N0RXF1YWxzLCAoMi4wLCAyLjApKSwNCiAgICAgICAgICAgIChzZWxmLmZhaWxJZkFsbW9zdEVxdWFsLCAoMy4wLCA1LjApKSwNCiAgICAgICAgICAgIChzZWxmLmFzc2VydE5vdEFsbW9zdEVxdWFscywgKDMuMCwgNS4wKSksDQogICAgICAgICAgICAoc2VsZi5mYWlsVW5sZXNzLCAoVHJ1ZSwpKSwNCiAgICAgICAgICAgIChzZWxmLmFzc2VydF8sIChUcnVlLCkpLA0KICAgICAgICAgICAgKHNlbGYuZmFpbFVubGVzc1JhaXNlcywgKFR5cGVFcnJvciwgbGFtYmRhIF86IDMuMTQgKyAnc3BhbScpKSwNCiAgICAgICAgICAgIChzZWxmLmZhaWxJZiwgKEZhbHNlLCkpLA0KICAgICAgICAgICAgKHNlbGYuYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0LCAoZGljdChhPTEsIGI9MiksIGRpY3QoYT0xLCBiPTIsIGM9MykpKSwNCiAgICAgICAgICAgIChzZWxmLmFzc2VydFJhaXNlc1JlZ2V4cCwgKEtleUVycm9yLCAnZm9vJywgbGFtYmRhOiB7fVsnZm9vJ10pKSwNCiAgICAgICAgICAgIChzZWxmLmFzc2VydFJlZ2V4cE1hdGNoZXMsICgnYmFyJywgJ2JhcicpKSwNCiAgICAgICAgKQ0KICAgICAgICBmb3IgbWV0aCwgYXJncyBpbiBvbGQ6DQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnMoRGVwcmVjYXRpb25XYXJuaW5nKToNCiAgICAgICAgICAgICAgICBtZXRoKCphcmdzKQ0KDQogICAgIyBkaXNhYmxlIHRoaXMgdGVzdCBmb3Igbm93LiBXaGVuIHRoZSB2ZXJzaW9uIHdoZXJlIHRoZSBmYWlsKiBtZXRob2RzIHdpbGwNCiAgICAjIGJlIHJlbW92ZWQgaXMgZGVjaWRlZCwgcmUtZW5hYmxlIGl0IGFuZCB1cGRhdGUgdGhlIHZlcnNpb24NCiAgICBkZWYgX3Rlc3REZXByZWNhdGVkRmFpbE1ldGhvZHMoc2VsZik6DQogICAgICAgICIiIlRlc3QgdGhhdCB0aGUgZGVwcmVjYXRlZCBmYWlsKiBtZXRob2RzIGdldCByZW1vdmVkIGluIDMueCIiIg0KICAgICAgICBpZiBzeXMudmVyc2lvbl9pbmZvWzoyXSA8ICgzLCAzKToNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBkZXByZWNhdGVkX25hbWVzID0gWw0KICAgICAgICAgICAgJ2ZhaWxJZkVxdWFsJywgJ2ZhaWxVbmxlc3NFcXVhbCcsICdmYWlsVW5sZXNzQWxtb3N0RXF1YWwnLA0KICAgICAgICAgICAgJ2ZhaWxJZkFsbW9zdEVxdWFsJywgJ2ZhaWxVbmxlc3MnLCAnZmFpbFVubGVzc1JhaXNlcycsICdmYWlsSWYnLA0KICAgICAgICAgICAgJ2Fzc2VydERpY3RDb250YWluc1N1YnNldCcsDQogICAgICAgIF0NCiAgICAgICAgZm9yIGRlcHJlY2F0ZWRfbmFtZSBpbiBkZXByZWNhdGVkX25hbWVzOg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvcik6DQogICAgICAgICAgICAgICAgZ2V0YXR0cihzZWxmLCBkZXByZWNhdGVkX25hbWUpICAjIHJlbW92ZSB0aGVzZSBpbiAzLngNCg0KICAgIGRlZiB0ZXN0RGVlcGNvcHkoc2VsZik6DQogICAgICAgICMgSXNzdWU6IDU2NjANCiAgICAgICAgY2xhc3MgVGVzdGFibGVUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0Tm90aGluZyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgdGVzdCA9IFRlc3RhYmxlVGVzdCgndGVzdE5vdGhpbmcnKQ0KDQogICAgICAgICMgVGhpcyBzaG91bGRuJ3QgYmxvdyB1cA0KICAgICAgICBkZWVwY29weSh0ZXN0KQ0KDQogICAgZGVmIHRlc3RQaWNrbGUoc2VsZik6DQogICAgICAgICMgSXNzdWUgMTAzMjYNCg0KICAgICAgICAjIENhbid0IHVzZSBUZXN0Q2FzZSBjbGFzc2VzIGRlZmluZWQgaW4gVGVzdCBjbGFzcyBhcw0KICAgICAgICAjIHBpY2tsZSBkb2VzIG5vdCB3b3JrIHdpdGggaW5uZXIgY2xhc3Nlcw0KICAgICAgICB0ZXN0ID0gdW5pdHRlc3QuVGVzdENhc2UoJ3J1bicpDQogICAgICAgIGZvciBwcm90b2NvbCBpbiByYW5nZShwaWNrbGUuSElHSEVTVF9QUk9UT0NPTCArIDEpOg0KDQogICAgICAgICAgICAjIGJsZXcgdXAgcHJpb3IgdG8gZml4DQogICAgICAgICAgICBwaWNrbGVkX3Rlc3QgPSBwaWNrbGUuZHVtcHModGVzdCwgcHJvdG9jb2w9cHJvdG9jb2wpDQogICAgICAgICAgICB1bnBpY2tsZWRfdGVzdCA9IHBpY2tsZS5sb2FkcyhwaWNrbGVkX3Rlc3QpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRlc3QsIHVucGlja2xlZF90ZXN0KQ0KDQogICAgICAgICAgICAjIGV4ZXJjaXNlIHRoZSBUZXN0Q2FzZSBpbnN0YW5jZSBpbiBhIHdheSB0aGF0IHdpbGwgaW52b2tlDQogICAgICAgICAgICAjIHRoZSB0eXBlIGVxdWFsaXR5IGxvb2t1cCBtZWNoYW5pc20NCiAgICAgICAgICAgIHVucGlja2xlZF90ZXN0LmFzc2VydEVxdWFsKHNldCgpLCBzZXQoKSkNCg0KICAgIGRlZiB0ZXN0S2V5Ym9hcmRJbnRlcnJ1cHQoc2VsZik6DQogICAgICAgIGRlZiBfcmFpc2Uoc2VsZj1Ob25lKToNCiAgICAgICAgICAgIHJhaXNlIEtleWJvYXJkSW50ZXJydXB0DQogICAgICAgIGRlZiBub3RoaW5nKHNlbGYpOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIFRlc3QxKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gX3JhaXNlDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgc2V0VXAgPSBfcmFpc2UNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gbm90aGluZw0KDQogICAgICAgIGNsYXNzIFRlc3QzKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gbm90aGluZw0KICAgICAgICAgICAgdGVhckRvd24gPSBfcmFpc2UNCg0KICAgICAgICBjbGFzcyBUZXN0NCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF9zb21ldGhpbmcoc2VsZik6DQogICAgICAgICAgICAgICAgc2VsZi5hZGRDbGVhbnVwKF9yYWlzZSkNCg0KICAgICAgICBmb3Iga2xhc3MgaW4gKFRlc3QxLCBUZXN0MiwgVGVzdDMsIFRlc3Q0KToNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoS2V5Ym9hcmRJbnRlcnJ1cHQpOg0KICAgICAgICAgICAgICAgIGtsYXNzKCd0ZXN0X3NvbWV0aGluZycpLnJ1bigpDQoNCiAgICBkZWYgdGVzdFNraXBwaW5nRXZlcnl3aGVyZShzZWxmKToNCiAgICAgICAgZGVmIF9za2lwKHNlbGY9Tm9uZSk6DQogICAgICAgICAgICByYWlzZSB1bml0dGVzdC5Ta2lwVGVzdCgnc29tZSByZWFzb24nKQ0KICAgICAgICBkZWYgbm90aGluZyhzZWxmKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBUZXN0MSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICB0ZXN0X3NvbWV0aGluZyA9IF9za2lwDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgc2V0VXAgPSBfc2tpcA0KICAgICAgICAgICAgdGVzdF9zb21ldGhpbmcgPSBub3RoaW5nDQoNCiAgICAgICAgY2xhc3MgVGVzdDModW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgdGVzdF9zb21ldGhpbmcgPSBub3RoaW5nDQogICAgICAgICAgICB0ZWFyRG93biA9IF9za2lwDQoNCiAgICAgICAgY2xhc3MgVGVzdDQodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Rfc29tZXRoaW5nKHNlbGYpOg0KICAgICAgICAgICAgICAgIHNlbGYuYWRkQ2xlYW51cChfc2tpcCkNCg0KICAgICAgICBmb3Iga2xhc3MgaW4gKFRlc3QxLCBUZXN0MiwgVGVzdDMsIFRlc3Q0KToNCiAgICAgICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICAgICAga2xhc3MoJ3Rlc3Rfc29tZXRoaW5nJykucnVuKHJlc3VsdCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5za2lwcGVkKSwgMSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAxKQ0KDQogICAgZGVmIHRlc3RTeXN0ZW1FeGl0KHNlbGYpOg0KICAgICAgICBkZWYgX3JhaXNlKHNlbGY9Tm9uZSk6DQogICAgICAgICAgICByYWlzZSBTeXN0ZW1FeGl0DQogICAgICAgIGRlZiBub3RoaW5nKHNlbGYpOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIFRlc3QxKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gX3JhaXNlDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgc2V0VXAgPSBfcmFpc2UNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gbm90aGluZw0KDQogICAgICAgIGNsYXNzIFRlc3QzKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gbm90aGluZw0KICAgICAgICAgICAgdGVhckRvd24gPSBfcmFpc2UNCg0KICAgICAgICBjbGFzcyBUZXN0NCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF9zb21ldGhpbmcoc2VsZik6DQogICAgICAgICAgICAgICAgc2VsZi5hZGRDbGVhbnVwKF9yYWlzZSkNCg0KICAgICAgICBmb3Iga2xhc3MgaW4gKFRlc3QxLCBUZXN0MiwgVGVzdDMsIFRlc3Q0KToNCiAgICAgICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICAgICAga2xhc3MoJ3Rlc3Rfc29tZXRoaW5nJykucnVuKHJlc3VsdCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDEpDQoNCiAgICBAc3VwcG9ydC5jcHl0aG9uX29ubHkNCiAgICBkZWYgdGVzdE5vQ3ljbGVzKHNlbGYpOg0KICAgICAgICBjYXNlID0gdW5pdHRlc3QuVGVzdENhc2UoKQ0KICAgICAgICB3ciA9IHdlYWtyZWYucmVmKGNhc2UpDQogICAgICAgIHdpdGggc3VwcG9ydC5kaXNhYmxlX2djKCk6DQogICAgICAgICAgICBkZWwgY2FzZQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRGYWxzZSh3cigpKQ0K',
'/Lib/unittest/test/test_skipping.py':'aW1wb3J0IHVuaXR0ZXN0DQoNCmZyb20gLnN1cHBvcnQgaW1wb3J0IExvZ2dpbmdSZXN1bHQNCg0KDQpjbGFzcyBUZXN0X1Rlc3RTa2lwcGluZyh1bml0dGVzdC5UZXN0Q2FzZSk6DQoNCiAgICBkZWYgdGVzdF9za2lwcGluZyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0X3NraXBfbWUoc2VsZik6DQogICAgICAgICAgICAgICAgc2VsZi5za2lwVGVzdCgic2tpcCIpDQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KICAgICAgICB0ZXN0ID0gRm9vKCJ0ZXN0X3NraXBfbWUiKQ0KICAgICAgICB0ZXN0LnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBbJ3N0YXJ0VGVzdCcsICdhZGRTa2lwJywgJ3N0b3BUZXN0J10pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNraXBwZWQsIFsodGVzdCwgInNraXAiKV0pDQoNCiAgICAgICAgIyBUcnkgbGV0dGluZyBzZXRVcCBza2lwIHRoZSB0ZXN0IG5vdy4NCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBzZXRVcChzZWxmKToNCiAgICAgICAgICAgICAgICBzZWxmLnNraXBUZXN0KCJ0ZXN0aW5nIikNCiAgICAgICAgICAgIGRlZiB0ZXN0X25vdGhpbmcoc2VsZik6IHBhc3MNCiAgICAgICAgZXZlbnRzID0gW10NCiAgICAgICAgcmVzdWx0ID0gTG9nZ2luZ1Jlc3VsdChldmVudHMpDQogICAgICAgIHRlc3QgPSBGb28oInRlc3Rfbm90aGluZyIpDQogICAgICAgIHRlc3QucnVuKHJlc3VsdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIFsnc3RhcnRUZXN0JywgJ2FkZFNraXAnLCAnc3RvcFRlc3QnXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuc2tpcHBlZCwgWyh0ZXN0LCAidGVzdGluZyIpXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDEpDQoNCiAgICBkZWYgdGVzdF9za2lwcGluZ19kZWNvcmF0b3JzKHNlbGYpOg0KICAgICAgICBvcF90YWJsZSA9ICgodW5pdHRlc3Quc2tpcFVubGVzcywgRmFsc2UsIFRydWUpLA0KICAgICAgICAgICAgICAgICAgICAodW5pdHRlc3Quc2tpcElmLCBUcnVlLCBGYWxzZSkpDQogICAgICAgIGZvciBkZWNvLCBkb19za2lwLCBkb250X3NraXAgaW4gb3BfdGFibGU6DQogICAgICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgICAgIEBkZWNvKGRvX3NraXAsICJ0ZXN0aW5nIikNCiAgICAgICAgICAgICAgICBkZWYgdGVzdF9za2lwKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgICAgICAgICBAZGVjbyhkb250X3NraXAsICJ0ZXN0aW5nIikNCiAgICAgICAgICAgICAgICBkZWYgdGVzdF9kb250X3NraXAoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIHRlc3RfZG9fc2tpcCA9IEZvbygidGVzdF9za2lwIikNCiAgICAgICAgICAgIHRlc3RfZG9udF9za2lwID0gRm9vKCJ0ZXN0X2RvbnRfc2tpcCIpDQogICAgICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbdGVzdF9kb19za2lwLCB0ZXN0X2RvbnRfc2tpcF0pDQogICAgICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICAgICAgcmVzdWx0ID0gTG9nZ2luZ1Jlc3VsdChldmVudHMpDQogICAgICAgICAgICBzdWl0ZS5ydW4ocmVzdWx0KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LnNraXBwZWQpLCAxKQ0KICAgICAgICAgICAgZXhwZWN0ZWQgPSBbJ3N0YXJ0VGVzdCcsICdhZGRTa2lwJywgJ3N0b3BUZXN0JywNCiAgICAgICAgICAgICAgICAgICAgICAgICdzdGFydFRlc3QnLCAnYWRkU3VjY2VzcycsICdzdG9wVGVzdCddDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgZXhwZWN0ZWQpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNraXBwZWQsIFsodGVzdF9kb19za2lwLCAidGVzdGluZyIpXSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQud2FzU3VjY2Vzc2Z1bCgpKQ0KDQogICAgZGVmIHRlc3Rfc2tpcF9jbGFzcyhzZWxmKToNCiAgICAgICAgQHVuaXR0ZXN0LnNraXAoInRlc3RpbmciKQ0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RfMShzZWxmKToNCiAgICAgICAgICAgICAgICByZWNvcmQuYXBwZW5kKDEpDQogICAgICAgIHJlY29yZCA9IFtdDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB0ZXN0ID0gRm9vKCJ0ZXN0XzEiKQ0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbdGVzdF0pDQogICAgICAgIHN1aXRlLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNraXBwZWQsIFsodGVzdCwgInRlc3RpbmciKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVjb3JkLCBbXSkNCg0KICAgIGRlZiB0ZXN0X3NraXBfbm9uX3VuaXR0ZXN0X2NsYXNzKHNlbGYpOg0KICAgICAgICBAdW5pdHRlc3Quc2tpcCgidGVzdGluZyIpDQogICAgICAgIGNsYXNzIE1peGluOg0KICAgICAgICAgICAgZGVmIHRlc3RfMShzZWxmKToNCiAgICAgICAgICAgICAgICByZWNvcmQuYXBwZW5kKDEpDQogICAgICAgIGNsYXNzIEZvbyhNaXhpbiwgdW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICByZWNvcmQgPSBbXQ0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgdGVzdCA9IEZvbygidGVzdF8xIikNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW3Rlc3RdKQ0KICAgICAgICBzdWl0ZS5ydW4ocmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5za2lwcGVkLCBbKHRlc3QsICJ0ZXN0aW5nIildKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlY29yZCwgW10pDQoNCiAgICBkZWYgdGVzdF9leHBlY3RlZF9mYWlsdXJlKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgQHVuaXR0ZXN0LmV4cGVjdGVkRmFpbHVyZQ0KICAgICAgICAgICAgZGVmIHRlc3RfZGllKHNlbGYpOg0KICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgiaGVscCBtZSEiKQ0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICByZXN1bHQgPSBMb2dnaW5nUmVzdWx0KGV2ZW50cykNCiAgICAgICAgdGVzdCA9IEZvbygidGVzdF9kaWUiKQ0KICAgICAgICB0ZXN0LnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLA0KICAgICAgICAgICAgICAgICAgICAgICAgIFsnc3RhcnRUZXN0JywgJ2FkZEV4cGVjdGVkRmFpbHVyZScsICdzdG9wVGVzdCddKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5leHBlY3RlZEZhaWx1cmVzWzBdWzBdLCB0ZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkNCg0KICAgIGRlZiB0ZXN0X3VuZXhwZWN0ZWRfc3VjY2VzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIEB1bml0dGVzdC5leHBlY3RlZEZhaWx1cmUNCiAgICAgICAgICAgIGRlZiB0ZXN0X2RpZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KICAgICAgICB0ZXN0ID0gRm9vKCJ0ZXN0X2RpZSIpDQogICAgICAgIHRlc3QucnVuKHJlc3VsdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgWydzdGFydFRlc3QnLCAnYWRkVW5leHBlY3RlZFN1Y2Nlc3MnLCAnc3RvcFRlc3QnXSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShyZXN1bHQuZmFpbHVyZXMpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnVuZXhwZWN0ZWRTdWNjZXNzZXMsIFt0ZXN0XSkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC53YXNTdWNjZXNzZnVsKCkpDQoNCiAgICBkZWYgdGVzdF9za2lwX2RvZXNudF9ydW5fc2V0dXAoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICB3YXNTZXRVcCA9IEZhbHNlDQogICAgICAgICAgICB3YXNUb3JuRG93biA9IEZhbHNlDQogICAgICAgICAgICBkZWYgc2V0VXAoc2VsZik6DQogICAgICAgICAgICAgICAgRm9vLndhc1NldFVwID0gVHJ1ZQ0KICAgICAgICAgICAgZGVmIHRvcm5Eb3duKHNlbGYpOg0KICAgICAgICAgICAgICAgIEZvby53YXNUb3JuRG93biA9IFRydWUNCiAgICAgICAgICAgIEB1bml0dGVzdC5za2lwKCd0ZXN0aW5nJykNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB0ZXN0ID0gRm9vKCJ0ZXN0XzEiKQ0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbdGVzdF0pDQogICAgICAgIHN1aXRlLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNraXBwZWQsIFsodGVzdCwgInRlc3RpbmciKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoRm9vLndhc1NldFVwKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKEZvby53YXNUb3JuRG93bikNCg0KICAgIGRlZiB0ZXN0X2RlY29yYXRlZF9za2lwKHNlbGYpOg0KICAgICAgICBkZWYgZGVjb3JhdG9yKGZ1bmMpOg0KICAgICAgICAgICAgZGVmIGlubmVyKCphKToNCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYygqYSkNCiAgICAgICAgICAgIHJldHVybiBpbm5lcg0KDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBAZGVjb3JhdG9yDQogICAgICAgICAgICBAdW5pdHRlc3Quc2tpcCgndGVzdGluZycpDQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgdGVzdCA9IEZvbygidGVzdF8xIikNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW3Rlc3RdKQ0KICAgICAgICBzdWl0ZS5ydW4ocmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5za2lwcGVkLCBbKHRlc3QsICJ0ZXN0aW5nIildKQ0K',
'/Lib/unittest/test/test_program.py':'aW1wb3J0IGlvDQoNCmltcG9ydCBvcw0KaW1wb3J0IHN5cw0KaW1wb3J0IHVuaXR0ZXN0DQoNCg0KY2xhc3MgVGVzdF9UZXN0UHJvZ3JhbSh1bml0dGVzdC5UZXN0Q2FzZSk6DQoNCiAgICBkZWYgdGVzdF9kaXNjb3ZlcnlfZnJvbV9kb3R0ZWRfcGF0aChzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgdGVzdHMgPSBbc2VsZl0NCiAgICAgICAgZXhwZWN0ZWRQYXRoID0gb3MucGF0aC5hYnNwYXRoKG9zLnBhdGguZGlybmFtZSh1bml0dGVzdC50ZXN0Ll9fZmlsZV9fKSkNCg0KICAgICAgICBzZWxmLndhc1J1biA9IEZhbHNlDQogICAgICAgIGRlZiBfZmluZF90ZXN0cyhzdGFydF9kaXIsIHBhdHRlcm4pOg0KICAgICAgICAgICAgc2VsZi53YXNSdW4gPSBUcnVlDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0YXJ0X2RpciwgZXhwZWN0ZWRQYXRoKQ0KICAgICAgICAgICAgcmV0dXJuIHRlc3RzDQogICAgICAgIGxvYWRlci5fZmluZF90ZXN0cyA9IF9maW5kX3Rlc3RzDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmRpc2NvdmVyKCd1bml0dGVzdC50ZXN0JykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHNlbGYud2FzUnVuKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLl90ZXN0cywgdGVzdHMpDQoNCiAgICAjIEhvcnJpYmxlIHdoaXRlIGJveCB0ZXN0DQogICAgZGVmIHRlc3ROb0V4aXQoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IG9iamVjdCgpDQogICAgICAgIHRlc3QgPSBvYmplY3QoKQ0KDQogICAgICAgIGNsYXNzIEZha2VSdW5uZXIob2JqZWN0KToNCiAgICAgICAgICAgIGRlZiBydW4oc2VsZiwgdGVzdCk6DQogICAgICAgICAgICAgICAgc2VsZi50ZXN0ID0gdGVzdA0KICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgICAgICBydW5uZXIgPSBGYWtlUnVubmVyKCkNCg0KICAgICAgICBvbGRQYXJzZUFyZ3MgPSB1bml0dGVzdC5UZXN0UHJvZ3JhbS5wYXJzZUFyZ3MNCiAgICAgICAgZGVmIHJlc3RvcmVQYXJzZUFyZ3MoKToNCiAgICAgICAgICAgIHVuaXR0ZXN0LlRlc3RQcm9ncmFtLnBhcnNlQXJncyA9IG9sZFBhcnNlQXJncw0KICAgICAgICB1bml0dGVzdC5UZXN0UHJvZ3JhbS5wYXJzZUFyZ3MgPSBsYW1iZGEgKmFyZ3M6IE5vbmUNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHJlc3RvcmVQYXJzZUFyZ3MpDQoNCiAgICAgICAgZGVmIHJlbW92ZVRlc3QoKToNCiAgICAgICAgICAgIGRlbCB1bml0dGVzdC5UZXN0UHJvZ3JhbS50ZXN0DQogICAgICAgIHVuaXR0ZXN0LlRlc3RQcm9ncmFtLnRlc3QgPSB0ZXN0DQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChyZW1vdmVUZXN0KQ0KDQogICAgICAgIHByb2dyYW0gPSB1bml0dGVzdC5UZXN0UHJvZ3JhbSh0ZXN0UnVubmVyPXJ1bm5lciwgZXhpdD1GYWxzZSwgdmVyYm9zaXR5PTIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnJlc3VsdCwgcmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJ1bm5lci50ZXN0LCB0ZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udmVyYm9zaXR5LCAyKQ0KDQogICAgY2xhc3MgRm9vQmFyKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgZGVmIHRlc3RQYXNzKHNlbGYpOg0KICAgICAgICAgICAgYXNzZXJ0IFRydWUNCiAgICAgICAgZGVmIHRlc3RGYWlsKHNlbGYpOg0KICAgICAgICAgICAgYXNzZXJ0IEZhbHNlDQoNCiAgICBjbGFzcyBGb29CYXJMb2FkZXIodW5pdHRlc3QuVGVzdExvYWRlcik6DQogICAgICAgICIiIlRlc3QgbG9hZGVyIHRoYXQgcmV0dXJucyBhIHN1aXRlIGNvbnRhaW5pbmcgRm9vQmFyLiIiIg0KICAgICAgICBkZWYgbG9hZFRlc3RzRnJvbU1vZHVsZShzZWxmLCBtb2R1bGUpOg0KICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3VpdGVDbGFzcygNCiAgICAgICAgICAgICAgICBbc2VsZi5sb2FkVGVzdHNGcm9tVGVzdENhc2UoVGVzdF9UZXN0UHJvZ3JhbS5Gb29CYXIpXSkNCg0KDQogICAgZGVmIHRlc3RfTm9uRXhpdChzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IHVuaXR0ZXN0Lm1haW4oZXhpdD1GYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndj1bImZvb2JhciJdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0UnVubmVyPXVuaXR0ZXN0LlRleHRUZXN0UnVubmVyKHN0cmVhbT1pby5TdHJpbmdJTygpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdExvYWRlcj1zZWxmLkZvb0JhckxvYWRlcigpKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoaGFzYXR0cihwcm9ncmFtLCAncmVzdWx0JykpDQoNCg0KICAgIGRlZiB0ZXN0X0V4aXQoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKA0KICAgICAgICAgICAgU3lzdGVtRXhpdCwNCiAgICAgICAgICAgIHVuaXR0ZXN0Lm1haW4sDQogICAgICAgICAgICBhcmd2PVsiZm9vYmFyIl0sDQogICAgICAgICAgICB0ZXN0UnVubmVyPXVuaXR0ZXN0LlRleHRUZXN0UnVubmVyKHN0cmVhbT1pby5TdHJpbmdJTygpKSwNCiAgICAgICAgICAgIGV4aXQ9VHJ1ZSwNCiAgICAgICAgICAgIHRlc3RMb2FkZXI9c2VsZi5Gb29CYXJMb2FkZXIoKSkNCg0KDQogICAgZGVmIHRlc3RfRXhpdEFzRGVmYXVsdChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoDQogICAgICAgICAgICBTeXN0ZW1FeGl0LA0KICAgICAgICAgICAgdW5pdHRlc3QubWFpbiwNCiAgICAgICAgICAgIGFyZ3Y9WyJmb29iYXIiXSwNCiAgICAgICAgICAgIHRlc3RSdW5uZXI9dW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoc3RyZWFtPWlvLlN0cmluZ0lPKCkpLA0KICAgICAgICAgICAgdGVzdExvYWRlcj1zZWxmLkZvb0JhckxvYWRlcigpKQ0KDQoNCmNsYXNzIEluaXRpYWxpc2FibGVQcm9ncmFtKHVuaXR0ZXN0LlRlc3RQcm9ncmFtKToNCiAgICBleGl0ID0gRmFsc2UNCiAgICByZXN1bHQgPSBOb25lDQogICAgdmVyYm9zaXR5ID0gMQ0KICAgIGRlZmF1bHRUZXN0ID0gTm9uZQ0KICAgIHRlc3RSdW5uZXIgPSBOb25lDQogICAgdGVzdExvYWRlciA9IHVuaXR0ZXN0LmRlZmF1bHRUZXN0TG9hZGVyDQogICAgbW9kdWxlID0gJ19fbWFpbl9fJw0KICAgIHByb2dOYW1lID0gJ3Rlc3QnDQogICAgdGVzdCA9ICd0ZXN0Jw0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncyk6DQogICAgICAgIHBhc3MNCg0KUkVTVUxUID0gb2JqZWN0KCkNCg0KY2xhc3MgRmFrZVJ1bm5lcihvYmplY3QpOg0KICAgIGluaXRBcmdzID0gTm9uZQ0KICAgIHRlc3QgPSBOb25lDQogICAgcmFpc2VFcnJvciA9IEZhbHNlDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgKiprd2FyZ3MpOg0KICAgICAgICBGYWtlUnVubmVyLmluaXRBcmdzID0ga3dhcmdzDQogICAgICAgIGlmIEZha2VSdW5uZXIucmFpc2VFcnJvcjoNCiAgICAgICAgICAgIEZha2VSdW5uZXIucmFpc2VFcnJvciA9IEZhbHNlDQogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3INCg0KICAgIGRlZiBydW4oc2VsZiwgdGVzdCk6DQogICAgICAgIEZha2VSdW5uZXIudGVzdCA9IHRlc3QNCiAgICAgICAgcmV0dXJuIFJFU1VMVA0KDQpjbGFzcyBUZXN0Q29tbWFuZExpbmVBcmdzKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiBzZXRVcChzZWxmKToNCiAgICAgICAgc2VsZi5wcm9ncmFtID0gSW5pdGlhbGlzYWJsZVByb2dyYW0oKQ0KICAgICAgICBzZWxmLnByb2dyYW0uY3JlYXRlVGVzdHMgPSBsYW1iZGE6IE5vbmUNCiAgICAgICAgRmFrZVJ1bm5lci5pbml0QXJncyA9IE5vbmUNCiAgICAgICAgRmFrZVJ1bm5lci50ZXN0ID0gTm9uZQ0KICAgICAgICBGYWtlUnVubmVyLnJhaXNlRXJyb3IgPSBGYWxzZQ0KDQogICAgZGVmIHRlc3RWZXJib3NpdHkoc2VsZik6DQogICAgICAgIHByb2dyYW0gPSBzZWxmLnByb2dyYW0NCg0KICAgICAgICBmb3Igb3B0IGluICctcScsICctLXF1aWV0JzoNCiAgICAgICAgICAgIHByb2dyYW0udmVyYm9zaXR5ID0gMQ0KICAgICAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoW05vbmUsIG9wdF0pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udmVyYm9zaXR5LCAwKQ0KDQogICAgICAgIGZvciBvcHQgaW4gJy12JywgJy0tdmVyYm9zZSc6DQogICAgICAgICAgICBwcm9ncmFtLnZlcmJvc2l0eSA9IDENCiAgICAgICAgICAgIHByb2dyYW0ucGFyc2VBcmdzKFtOb25lLCBvcHRdKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnZlcmJvc2l0eSwgMikNCg0KICAgIGRlZiB0ZXN0QnVmZmVyQ2F0Y2hGYWlsZmFzdChzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IHNlbGYucHJvZ3JhbQ0KICAgICAgICBmb3IgYXJnLCBhdHRyIGluICgoJ2J1ZmZlcicsICdidWZmZXInKSwgKCdmYWlsZmFzdCcsICdmYWlsZmFzdCcpLA0KICAgICAgICAgICAgICAgICAgICAgICgnY2F0Y2gnLCAnY2F0Y2hicmVhaycpKToNCiAgICAgICAgICAgIGlmIGF0dHIgPT0gJ2NhdGNoJyBhbmQgbm90IGhhc0luc3RhbGxIYW5kbGVyOg0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQoNCiAgICAgICAgICAgIHNob3J0X29wdCA9ICctJXMnICUgYXJnWzBdDQogICAgICAgICAgICBsb25nX29wdCA9ICctLSVzJyAlIGFyZw0KICAgICAgICAgICAgZm9yIG9wdCBpbiBzaG9ydF9vcHQsIGxvbmdfb3B0Og0KICAgICAgICAgICAgICAgIHNldGF0dHIocHJvZ3JhbSwgYXR0ciwgTm9uZSkNCg0KICAgICAgICAgICAgICAgIHByb2dyYW0ucGFyc2VBcmdzKFtOb25lLCBvcHRdKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShnZXRhdHRyKHByb2dyYW0sIGF0dHIpKQ0KDQogICAgICAgICAgICBmb3Igb3B0IGluIHNob3J0X29wdCwgbG9uZ19vcHQ6DQogICAgICAgICAgICAgICAgbm90X25vbmUgPSBvYmplY3QoKQ0KICAgICAgICAgICAgICAgIHNldGF0dHIocHJvZ3JhbSwgYXR0ciwgbm90X25vbmUpDQoNCiAgICAgICAgICAgICAgICBwcm9ncmFtLnBhcnNlQXJncyhbTm9uZSwgb3B0XSkNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGdldGF0dHIocHJvZ3JhbSwgYXR0ciksIG5vdF9ub25lKQ0KDQogICAgZGVmIHRlc3RXYXJuaW5nKHNlbGYpOg0KICAgICAgICAiIiJUZXN0IHRoZSB3YXJuaW5ncyBhcmd1bWVudCIiIg0KICAgICAgICAjIHNlZSAjMTA1MzUNCiAgICAgICAgY2xhc3MgRmFrZVRQKHVuaXR0ZXN0LlRlc3RQcm9ncmFtKToNCiAgICAgICAgICAgIGRlZiBwYXJzZUFyZ3Moc2VsZiwgKmFyZ3MsICoqa3cpOiBwYXNzDQogICAgICAgICAgICBkZWYgcnVuVGVzdHMoc2VsZiwgKmFyZ3MsICoqa3cpOiBwYXNzDQogICAgICAgIHdhcm5vcHRpb25zID0gc3lzLndhcm5vcHRpb25zWzpdDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHN5cy53YXJub3B0aW9uc1s6XSA9IFtdDQogICAgICAgICAgICAjIG5vIHdhcm4gb3B0aW9ucywgbm8gYXJnIC0+IGRlZmF1bHQNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRmFrZVRQKCkud2FybmluZ3MsICdkZWZhdWx0JykNCiAgICAgICAgICAgICMgbm8gd2FybiBvcHRpb25zLCB3LyBhcmcgLT4gYXJnIHZhbHVlDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZha2VUUCh3YXJuaW5ncz0naWdub3JlJykud2FybmluZ3MsICdpZ25vcmUnKQ0KICAgICAgICAgICAgc3lzLndhcm5vcHRpb25zWzpdID0gWydzb21ldmFsdWUnXQ0KICAgICAgICAgICAgIyB3YXJuIG9wdGlvbnMsIG5vIGFyZyAtPiBOb25lDQogICAgICAgICAgICAjIHdhcm4gb3B0aW9ucywgdy8gYXJnIC0+IGFyZyB2YWx1ZQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGYWtlVFAoKS53YXJuaW5ncywgTm9uZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRmFrZVRQKHdhcm5pbmdzPSdpZ25vcmUnKS53YXJuaW5ncywgJ2lnbm9yZScpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBzeXMud2Fybm9wdGlvbnNbOl0gPSB3YXJub3B0aW9ucw0KDQogICAgZGVmIHRlc3RSdW5UZXN0c1J1bm5lckNsYXNzKHNlbGYpOg0KICAgICAgICBwcm9ncmFtID0gc2VsZi5wcm9ncmFtDQoNCiAgICAgICAgcHJvZ3JhbS50ZXN0UnVubmVyID0gRmFrZVJ1bm5lcg0KICAgICAgICBwcm9ncmFtLnZlcmJvc2l0eSA9ICd2ZXJib3NpdHknDQogICAgICAgIHByb2dyYW0uZmFpbGZhc3QgPSAnZmFpbGZhc3QnDQogICAgICAgIHByb2dyYW0uYnVmZmVyID0gJ2J1ZmZlcicNCiAgICAgICAgcHJvZ3JhbS53YXJuaW5ncyA9ICd3YXJuaW5ncycNCg0KICAgICAgICBwcm9ncmFtLnJ1blRlc3RzKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZha2VSdW5uZXIuaW5pdEFyZ3MsIHsndmVyYm9zaXR5JzogJ3ZlcmJvc2l0eScsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmFpbGZhc3QnOiAnZmFpbGZhc3QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1ZmZlcic6ICdidWZmZXInLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmdzJzogJ3dhcm5pbmdzJ30pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRmFrZVJ1bm5lci50ZXN0LCAndGVzdCcpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocHJvZ3JhbS5yZXN1bHQsIFJFU1VMVCkNCg0KICAgIGRlZiB0ZXN0UnVuVGVzdHNSdW5uZXJJbnN0YW5jZShzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IHNlbGYucHJvZ3JhbQ0KDQogICAgICAgIHByb2dyYW0udGVzdFJ1bm5lciA9IEZha2VSdW5uZXIoKQ0KICAgICAgICBGYWtlUnVubmVyLmluaXRBcmdzID0gTm9uZQ0KDQogICAgICAgIHByb2dyYW0ucnVuVGVzdHMoKQ0KDQogICAgICAgICMgQSBuZXcgRmFrZVJ1bm5lciBzaG91bGQgbm90IGhhdmUgYmVlbiBpbnN0YW50aWF0ZWQNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vbmUoRmFrZVJ1bm5lci5pbml0QXJncykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZha2VSdW5uZXIudGVzdCwgJ3Rlc3QnKQ0KICAgICAgICBzZWxmLmFzc2VydElzKHByb2dyYW0ucmVzdWx0LCBSRVNVTFQpDQoNCiAgICBkZWYgdGVzdFJ1blRlc3RzT2xkUnVubmVyQ2xhc3Moc2VsZik6DQogICAgICAgIHByb2dyYW0gPSBzZWxmLnByb2dyYW0NCg0KICAgICAgICBGYWtlUnVubmVyLnJhaXNlRXJyb3IgPSBUcnVlDQogICAgICAgIHByb2dyYW0udGVzdFJ1bm5lciA9IEZha2VSdW5uZXINCiAgICAgICAgcHJvZ3JhbS52ZXJib3NpdHkgPSAndmVyYm9zaXR5Jw0KICAgICAgICBwcm9ncmFtLmZhaWxmYXN0ID0gJ2ZhaWxmYXN0Jw0KICAgICAgICBwcm9ncmFtLmJ1ZmZlciA9ICdidWZmZXInDQogICAgICAgIHByb2dyYW0udGVzdCA9ICd0ZXN0Jw0KDQogICAgICAgIHByb2dyYW0ucnVuVGVzdHMoKQ0KDQogICAgICAgICMgSWYgaW5pdGlhbGlzaW5nIHJhaXNlcyBhIHR5cGUgZXJyb3IgaXQgc2hvdWxkIGJlIHJldHJpZWQNCiAgICAgICAgIyB3aXRob3V0IHRoZSBuZXcga2V5d29yZCBhcmd1bWVudHMNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGYWtlUnVubmVyLmluaXRBcmdzLCB7fSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGYWtlUnVubmVyLnRlc3QsICd0ZXN0JykNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhwcm9ncmFtLnJlc3VsdCwgUkVTVUxUKQ0KDQogICAgZGVmIHRlc3RDYXRjaEJyZWFrSW5zdGFsbHNIYW5kbGVyKHNlbGYpOg0KICAgICAgICBtb2R1bGUgPSBzeXMubW9kdWxlc1sndW5pdHRlc3QubWFpbiddDQogICAgICAgIG9yaWdpbmFsID0gbW9kdWxlLmluc3RhbGxIYW5kbGVyDQogICAgICAgIGRlZiByZXN0b3JlKCk6DQogICAgICAgICAgICBtb2R1bGUuaW5zdGFsbEhhbmRsZXIgPSBvcmlnaW5hbA0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZSkNCg0KICAgICAgICBzZWxmLmluc3RhbGxlZCA9IEZhbHNlDQogICAgICAgIGRlZiBmYWtlSW5zdGFsbEhhbmRsZXIoKToNCiAgICAgICAgICAgIHNlbGYuaW5zdGFsbGVkID0gVHJ1ZQ0KICAgICAgICBtb2R1bGUuaW5zdGFsbEhhbmRsZXIgPSBmYWtlSW5zdGFsbEhhbmRsZXINCg0KICAgICAgICBwcm9ncmFtID0gc2VsZi5wcm9ncmFtDQogICAgICAgIHByb2dyYW0uY2F0Y2hicmVhayA9IFRydWUNCg0KICAgICAgICBwcm9ncmFtLnRlc3RSdW5uZXIgPSBGYWtlUnVubmVyDQoNCiAgICAgICAgcHJvZ3JhbS5ydW5UZXN0cygpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShzZWxmLmluc3RhbGxlZCkNCg0KICAgIGRlZiBfcGF0Y2hfaXNmaWxlKHNlbGYsIG5hbWVzLCBleGlzdHM9VHJ1ZSk6DQogICAgICAgIGRlZiBpc2ZpbGUocGF0aCk6DQogICAgICAgICAgICByZXR1cm4gcGF0aCBpbiBuYW1lcw0KICAgICAgICBvcmlnaW5hbCA9IG9zLnBhdGguaXNmaWxlDQogICAgICAgIG9zLnBhdGguaXNmaWxlID0gaXNmaWxlDQogICAgICAgIGRlZiByZXN0b3JlKCk6DQogICAgICAgICAgICBvcy5wYXRoLmlzZmlsZSA9IG9yaWdpbmFsDQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChyZXN0b3JlKQ0KDQoNCiAgICBkZWYgdGVzdFBhcnNlQXJnc0ZpbGVOYW1lcyhzZWxmKToNCiAgICAgICAgIyBydW5uaW5nIHRlc3RzIHdpdGggZmlsZW5hbWVzIGluc3RlYWQgb2YgbW9kdWxlIG5hbWVzDQogICAgICAgIHByb2dyYW0gPSBzZWxmLnByb2dyYW0NCiAgICAgICAgYXJndiA9IFsncHJvZ25hbWUnLCAnZm9vLnB5JywgJ2Jhci5QeScsICdiYXouUFknLCAnd2luZy50eHQnXQ0KICAgICAgICBzZWxmLl9wYXRjaF9pc2ZpbGUoYXJndikNCg0KICAgICAgICBwcm9ncmFtLmNyZWF0ZVRlc3RzID0gbGFtYmRhOiBOb25lDQogICAgICAgIHByb2dyYW0ucGFyc2VBcmdzKGFyZ3YpDQoNCiAgICAgICAgIyBub3RlIHRoYXQgJ3dpbmcudHh0JyBpcyBub3QgYSBQeXRob24gZmlsZSBzbyB0aGUgbmFtZSBzaG91bGQNCiAgICAgICAgIyAqbm90KiBiZSBjb252ZXJ0ZWQgdG8gYSBtb2R1bGUgbmFtZQ0KICAgICAgICBleHBlY3RlZCA9IFsnZm9vJywgJ2JhcicsICdiYXonLCAnd2luZy50eHQnXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdE5hbWVzLCBleHBlY3RlZCkNCg0KDQogICAgZGVmIHRlc3RQYXJzZUFyZ3NGaWxlUGF0aHMoc2VsZik6DQogICAgICAgIHByb2dyYW0gPSBzZWxmLnByb2dyYW0NCiAgICAgICAgYXJndiA9IFsncHJvZ25hbWUnLCAnZm9vL2Jhci9iYXoucHknLCAnZ3JlZW5cXHJlZC5weSddDQogICAgICAgIHNlbGYuX3BhdGNoX2lzZmlsZShhcmd2KQ0KDQogICAgICAgIHByb2dyYW0uY3JlYXRlVGVzdHMgPSBsYW1iZGE6IE5vbmUNCiAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoYXJndikNCg0KICAgICAgICBleHBlY3RlZCA9IFsnZm9vLmJhci5iYXonLCAnZ3JlZW4ucmVkJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnRlc3ROYW1lcywgZXhwZWN0ZWQpDQoNCg0KICAgIGRlZiB0ZXN0UGFyc2VBcmdzTm9uRXhpc3RlbnRGaWxlcyhzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IHNlbGYucHJvZ3JhbQ0KICAgICAgICBhcmd2ID0gWydwcm9nbmFtZScsICdmb28vYmFyL2Jhei5weScsICdncmVlblxccmVkLnB5J10NCiAgICAgICAgc2VsZi5fcGF0Y2hfaXNmaWxlKFtdKQ0KDQogICAgICAgIHByb2dyYW0uY3JlYXRlVGVzdHMgPSBsYW1iZGE6IE5vbmUNCiAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoYXJndikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdE5hbWVzLCBhcmd2WzE6XSkNCg0KICAgIGRlZiB0ZXN0UGFyc2VBcmdzQWJzb2x1dGVQYXRoc1RoYXRDYW5CZUNvbnZlcnRlZChzZWxmKToNCiAgICAgICAgY3VyX2RpciA9IG9zLmdldGN3ZCgpDQogICAgICAgIHByb2dyYW0gPSBzZWxmLnByb2dyYW0NCiAgICAgICAgZGVmIF9qb2luKG5hbWUpOg0KICAgICAgICAgICAgcmV0dXJuIG9zLnBhdGguam9pbihjdXJfZGlyLCBuYW1lKQ0KICAgICAgICBhcmd2ID0gWydwcm9nbmFtZScsIF9qb2luKCdmb28vYmFyL2Jhei5weScpLCBfam9pbignZ3JlZW5cXHJlZC5weScpXQ0KICAgICAgICBzZWxmLl9wYXRjaF9pc2ZpbGUoYXJndikNCg0KICAgICAgICBwcm9ncmFtLmNyZWF0ZVRlc3RzID0gbGFtYmRhOiBOb25lDQogICAgICAgIHByb2dyYW0ucGFyc2VBcmdzKGFyZ3YpDQoNCiAgICAgICAgZXhwZWN0ZWQgPSBbJ2Zvby5iYXIuYmF6JywgJ2dyZWVuLnJlZCddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJvZ3JhbS50ZXN0TmFtZXMsIGV4cGVjdGVkKQ0KDQogICAgZGVmIHRlc3RQYXJzZUFyZ3NBYnNvbHV0ZVBhdGhzVGhhdENhbm5vdEJlQ29udmVydGVkKHNlbGYpOg0KICAgICAgICBwcm9ncmFtID0gc2VsZi5wcm9ncmFtDQogICAgICAgICMgZXZlbiBvbiBXaW5kb3dzICcvLi4uJyBpcyBjb25zaWRlcmVkIGFic29sdXRlIGJ5IG9zLnBhdGguYWJzcGF0aA0KICAgICAgICBhcmd2ID0gWydwcm9nbmFtZScsICcvZm9vL2Jhci9iYXoucHknLCAnL2dyZWVuL3JlZC5weSddDQogICAgICAgIHNlbGYuX3BhdGNoX2lzZmlsZShhcmd2KQ0KDQogICAgICAgIHByb2dyYW0uY3JlYXRlVGVzdHMgPSBsYW1iZGE6IE5vbmUNCiAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoYXJndikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdE5hbWVzLCBhcmd2WzE6XSkNCg0KICAgICAgICAjIGl0IG1heSBiZSBiZXR0ZXIgdG8gdXNlIHBsYXRmb3JtIHNwZWNpZmljIGZ1bmN0aW9ucyB0byBub3JtYWxpc2UgcGF0aHMNCiAgICAgICAgIyByYXRoZXIgdGhhbiBhY2NlcHRpbmcgJy5QWScgYW5kICdcJyBhcyBmaWxlIHNlcHJhdG9yIG9uIExpbnV4IC8gTWFjDQogICAgICAgICMgaXQgd291bGQgYWxzbyBiZSBiZXR0ZXIgdG8gY2hlY2sgdGhhdCBhIGZpbGVuYW1lIGlzIGEgdmFsaWQgbW9kdWxlDQogICAgICAgICMgaWRlbnRpZmllciAod2UgaGF2ZSBhIHJlZ2V4IGZvciB0aGlzIGluIGxvYWRlci5weSkNCiAgICAgICAgIyBmb3IgaW52YWxpZCBmaWxlbmFtZXMgc2hvdWxkIHdlIHJhaXNlIGEgdXNlZnVsIGVycm9yIHJhdGhlciB0aGFuDQogICAgICAgICMgbGVhdmluZyB0aGUgY3VycmVudCBlcnJvciBtZXNzYWdlIChpbXBvcnQgb2YgZmlsZW5hbWUgZmFpbHMpIGluIHBsYWNlPw0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/unittest/test/test_assertions.py':'aW1wb3J0IGRhdGV0aW1lDQppbXBvcnQgd2FybmluZ3MNCmltcG9ydCB1bml0dGVzdA0KZnJvbSBpdGVydG9vbHMgaW1wb3J0IHByb2R1Y3QNCg0KDQpjbGFzcyBUZXN0X0Fzc2VydGlvbnModW5pdHRlc3QuVGVzdENhc2UpOg0KICAgIGRlZiB0ZXN0X0FsbW9zdEVxdWFsKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydEFsbW9zdEVxdWFsKDEuMDAwMDAwMDEsIDEuMCkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RBbG1vc3RFcXVhbCgxLjAwMDAwMDEsIDEuMCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEFsbW9zdEVxdWFsLCAxLjAwMDAwMDEsIDEuMCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydE5vdEFsbW9zdEVxdWFsLCAxLjAwMDAwMDAxLCAxLjApDQoNCiAgICAgICAgc2VsZi5hc3NlcnRBbG1vc3RFcXVhbCgxLjEsIDEuMCwgcGxhY2VzPTApDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRBbG1vc3RFcXVhbCwgMS4xLCAxLjAsIHBsYWNlcz0xKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0QWxtb3N0RXF1YWwoMCwgLjErLjFqLCBwbGFjZXM9MCkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RBbG1vc3RFcXVhbCgwLCAuMSsuMWosIHBsYWNlcz0xKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sDQogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0QWxtb3N0RXF1YWwsIDAsIC4xKy4xaiwgcGxhY2VzPTEpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnROb3RBbG1vc3RFcXVhbCwgMCwgLjErLjFqLCBwbGFjZXM9MCkNCg0KICAgICAgICBzZWxmLmFzc2VydEFsbW9zdEVxdWFsKGZsb2F0KCdpbmYnKSwgZmxvYXQoJ2luZicpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Tm90QWxtb3N0RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0KCdpbmYnKSwgZmxvYXQoJ2luZicpKQ0KDQogICAgZGVmIHRlc3RfQW1vc3RFcXVhbFdpdGhEZWx0YShzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRBbG1vc3RFcXVhbCgxLjEsIDEuMCwgZGVsdGE9MC41KQ0KICAgICAgICBzZWxmLmFzc2VydEFsbW9zdEVxdWFsKDEuMCwgMS4xLCBkZWx0YT0wLjUpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90QWxtb3N0RXF1YWwoMS4xLCAxLjAsIGRlbHRhPTAuMDUpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90QWxtb3N0RXF1YWwoMS4wLCAxLjEsIGRlbHRhPTAuMDUpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydEFsbW9zdEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAxLjEsIDEuMCwgZGVsdGE9MC4wNSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydE5vdEFsbW9zdEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAxLjEsIDEuMCwgZGVsdGE9MC41KQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgc2VsZi5hc3NlcnRBbG1vc3RFcXVhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgMS4xLCAxLjAsIHBsYWNlcz0yLCBkZWx0YT0yKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIHNlbGYuYXNzZXJ0Tm90QWxtb3N0RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIDEuMSwgMS4wLCBwbGFjZXM9MiwgZGVsdGE9MikNCg0KICAgICAgICBmaXJzdCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpDQogICAgICAgIHNlY29uZCA9IGZpcnN0ICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9MTApDQogICAgICAgIHNlbGYuYXNzZXJ0QWxtb3N0RXF1YWwoZmlyc3QsIHNlY29uZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YT1kYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz0yMCkpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90QWxtb3N0RXF1YWwoZmlyc3QsIHNlY29uZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YT1kYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz01KSkNCg0KICAgIGRlZiB0ZXN0X2Fzc2VydFJhaXNlcyhzZWxmKToNCiAgICAgICAgZGVmIF9yYWlzZShlKToNCiAgICAgICAgICAgIHJhaXNlIGUNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoS2V5RXJyb3IsIF9yYWlzZSwgS2V5RXJyb3IpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yLCBfcmFpc2UsIEtleUVycm9yKCJrZXkiKSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoS2V5RXJyb3IsIGxhbWJkYTogTm9uZSkNCiAgICAgICAgZXhjZXB0IHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiS2V5RXJyb3Igbm90IHJhaXNlZCIsIHN0cihlKSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiYXNzZXJ0UmFpc2VzKCkgZGlkbid0IGZhaWwiKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhLZXlFcnJvciwgX3JhaXNlLCBWYWx1ZUVycm9yKQ0KICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiYXNzZXJ0UmFpc2VzKCkgZGlkbid0IGxldCBleGNlcHRpb24gcGFzcyB0aHJvdWdoIikNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhLZXlFcnJvcikgYXMgY206DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3INCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgICBleGMgPSBlDQogICAgICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhjbS5leGNlcHRpb24sIGV4YykNCg0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yKToNCiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKCJrZXkiKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIGV4Y2VwdCBzZWxmLmZhaWx1cmVFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIktleUVycm9yIG5vdCByYWlzZWQiLCBzdHIoZSkpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoImFzc2VydFJhaXNlcygpIGRpZG4ndCBmYWlsIikNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhLZXlFcnJvcik6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcg0KICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiYXNzZXJ0UmFpc2VzKCkgZGlkbid0IGxldCBleGNlcHRpb24gcGFzcyB0aHJvdWdoIikNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0Tm90UmVnZXgoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0Tm90UmVnZXgoJ0FsYSBtYSBrb3RhJywgcidyKycpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90UmVnZXgoJ0FsYSBtYSBrb3RhJywgcidrLnQnLCAnTWVzc2FnZScpDQogICAgICAgIGV4Y2VwdCBzZWxmLmZhaWx1cmVFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIidrb3QnIiwgZS5hcmdzWzBdKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbignTWVzc2FnZScsIGUuYXJnc1swXSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgnYXNzZXJ0Tm90UmVnZXggc2hvdWxkIGhhdmUgZmFpbGVkLicpDQoNCg0KY2xhc3MgVGVzdExvbmdNZXNzYWdlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAiIiJUZXN0IHRoYXQgdGhlIGluZGl2aWR1YWwgYXNzZXJ0cyBob25vdXIgbG9uZ01lc3NhZ2UuDQogICAgVGhpcyBhY3R1YWxseSB0ZXN0cyBhbGwgdGhlIG1lc3NhZ2UgYmVoYXZpb3VyIGZvcg0KICAgIGFzc2VydHMgdGhhdCB1c2UgbG9uZ01lc3NhZ2UuIiIiDQoNCiAgICBkZWYgc2V0VXAoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3RhYmxlVGVzdEZhbHNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGxvbmdNZXNzYWdlID0gRmFsc2UNCiAgICAgICAgICAgIGZhaWx1cmVFeGNlcHRpb24gPSBzZWxmLmZhaWx1cmVFeGNlcHRpb24NCg0KICAgICAgICAgICAgZGVmIHRlc3RUZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBUZXN0YWJsZVRlc3RUcnVlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGxvbmdNZXNzYWdlID0gVHJ1ZQ0KICAgICAgICAgICAgZmFpbHVyZUV4Y2VwdGlvbiA9IHNlbGYuZmFpbHVyZUV4Y2VwdGlvbg0KDQogICAgICAgICAgICBkZWYgdGVzdFRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHNlbGYudGVzdGFibGVUcnVlID0gVGVzdGFibGVUZXN0VHJ1ZSgndGVzdFRlc3QnKQ0KICAgICAgICBzZWxmLnRlc3RhYmxlRmFsc2UgPSBUZXN0YWJsZVRlc3RGYWxzZSgndGVzdFRlc3QnKQ0KDQogICAgZGVmIHRlc3REZWZhdWx0KHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydFRydWUodW5pdHRlc3QuVGVzdENhc2UubG9uZ01lc3NhZ2UpDQoNCiAgICBkZWYgdGVzdF9mb3JtYXRNc2coc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2VsZi50ZXN0YWJsZUZhbHNlLl9mb3JtYXRNZXNzYWdlKE5vbmUsICJmb28iKSwgImZvbyIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2VsZi50ZXN0YWJsZUZhbHNlLl9mb3JtYXRNZXNzYWdlKCJmb28iLCAiYmFyIiksICJmb28iKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2VsZi50ZXN0YWJsZVRydWUuX2Zvcm1hdE1lc3NhZ2UoTm9uZSwgImZvbyIpLCAiZm9vIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzZWxmLnRlc3RhYmxlVHJ1ZS5fZm9ybWF0TWVzc2FnZSgiZm9vIiwgImJhciIpLCAiYmFyIDogZm9vIikNCg0KICAgICAgICAjIFRoaXMgYmxvd3MgdXAgaWYgX2Zvcm1hdE1lc3NhZ2UgdXNlcyBzdHJpbmcgY29uY2F0ZW5hdGlvbg0KICAgICAgICBzZWxmLnRlc3RhYmxlVHJ1ZS5fZm9ybWF0TWVzc2FnZShvYmplY3QoKSwgJ2ZvbycpDQoNCiAgICBkZWYgdGVzdF9mb3JtYXRNZXNzYWdlX3VuaWNvZGVfZXJyb3Ioc2VsZik6DQogICAgICAgIG9uZSA9ICcnLmpvaW4oY2hyKGkpIGZvciBpIGluIHJhbmdlKDI1NSkpDQogICAgICAgICMgdGhpcyB1c2VkIHRvIGNhdXNlIGEgVW5pY29kZURlY29kZUVycm9yIGNvbnN0cnVjdGluZyBtc2cNCiAgICAgICAgc2VsZi50ZXN0YWJsZVRydWUuX2Zvcm1hdE1lc3NhZ2Uob25lLCAnXHVGRkZEJykNCg0KICAgIGRlZiBhc3NlcnRNZXNzYWdlcyhzZWxmLCBtZXRob2ROYW1lLCBhcmdzLCBlcnJvcnMpOg0KICAgICAgICAiIiINCiAgICAgICAgQ2hlY2sgdGhhdCBtZXRob2ROYW1lKCphcmdzKSByYWlzZXMgdGhlIGNvcnJlY3QgZXJyb3IgbWVzc2FnZXMuDQogICAgICAgIGVycm9ycyBzaG91bGQgYmUgYSBsaXN0IG9mIDQgcmVnZXggdGhhdCBtYXRjaCB0aGUgZXJyb3Igd2hlbjoNCiAgICAgICAgICAxKSBsb25nTWVzc2FnZSA9IEZhbHNlIGFuZCBubyBtc2cgcGFzc2VkOw0KICAgICAgICAgIDIpIGxvbmdNZXNzYWdlID0gRmFsc2UgYW5kIG1zZyBwYXNzZWQ7DQogICAgICAgICAgMykgbG9uZ01lc3NhZ2UgPSBUcnVlIGFuZCBubyBtc2cgcGFzc2VkOw0KICAgICAgICAgIDQpIGxvbmdNZXNzYWdlID0gVHJ1ZSBhbmQgbXNnIHBhc3NlZDsNCiAgICAgICAgIiIiDQogICAgICAgIGRlZiBnZXRNZXRob2QoaSk6DQogICAgICAgICAgICB1c2VUZXN0YWJsZUZhbHNlICA9IGkgPCAyDQogICAgICAgICAgICBpZiB1c2VUZXN0YWJsZUZhbHNlOg0KICAgICAgICAgICAgICAgIHRlc3QgPSBzZWxmLnRlc3RhYmxlRmFsc2UNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgdGVzdCA9IHNlbGYudGVzdGFibGVUcnVlDQogICAgICAgICAgICByZXR1cm4gZ2V0YXR0cih0ZXN0LCBtZXRob2ROYW1lKQ0KDQogICAgICAgIGZvciBpLCBleHBlY3RlZF9yZWdleCBpbiBlbnVtZXJhdGUoZXJyb3JzKToNCiAgICAgICAgICAgIHRlc3RNZXRob2QgPSBnZXRNZXRob2QoaSkNCiAgICAgICAgICAgIGt3YXJncyA9IHt9DQogICAgICAgICAgICB3aXRoTXNnID0gaSAlIDINCiAgICAgICAgICAgIGlmIHdpdGhNc2c6DQogICAgICAgICAgICAgICAga3dhcmdzID0geyJtc2ciOiAib29wcyJ9DQoNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXNSZWdleChzZWxmLmZhaWx1cmVFeGNlcHRpb24sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXg9ZXhwZWN0ZWRfcmVnZXgpOg0KICAgICAgICAgICAgICAgIHRlc3RNZXRob2QoKmFyZ3MsICoqa3dhcmdzKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRUcnVlKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRUcnVlJywgKEZhbHNlLCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJeRmFsc2UgaXMgbm90IHRydWUkIiwgIl5vb3BzJCIsICJeRmFsc2UgaXMgbm90IHRydWUkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl5GYWxzZSBpcyBub3QgdHJ1ZSA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdEFzc2VydEZhbHNlKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRGYWxzZScsIChUcnVlLCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJeVHJ1ZSBpcyBub3QgZmFsc2UkIiwgIl5vb3BzJCIsICJeVHJ1ZSBpcyBub3QgZmFsc2UkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl5UcnVlIGlzIG5vdCBmYWxzZSA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdE5vdEVxdWFsKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnROb3RFcXVhbCcsICgxLCAxKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIl4xID09IDEkIiwgIl5vb3BzJCIsICJeMSA9PSAxJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJeMSA9PSAxIDogb29wcyQiXSkNCg0KICAgIGRlZiB0ZXN0QWxtb3N0RXF1YWwoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ2Fzc2VydEFsbW9zdEVxdWFsJywgKDEsIDIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiXjEgIT0gMiB3aXRoaW4gNyBwbGFjZXMkIiwgIl5vb3BzJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJeMSAhPSAyIHdpdGhpbiA3IHBsYWNlcyQiLCAiXjEgIT0gMiB3aXRoaW4gNyBwbGFjZXMgOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3ROb3RBbG1vc3RFcXVhbChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0Tm90QWxtb3N0RXF1YWwnLCAoMSwgMSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJeMSA9PSAxIHdpdGhpbiA3IHBsYWNlcyQiLCAiXm9vcHMkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4xID09IDEgd2l0aGluIDcgcGxhY2VzJCIsICJeMSA9PSAxIHdpdGhpbiA3IHBsYWNlcyA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdF9iYXNlQXNzZXJ0RXF1YWwoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ19iYXNlQXNzZXJ0RXF1YWwnLCAoMSwgMiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJeMSAhPSAyJCIsICJeb29wcyQiLCAiXjEgIT0gMiQiLCAiXjEgIT0gMiA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdEFzc2VydFNlcXVlbmNlRXF1YWwoc2VsZik6DQogICAgICAgICMgRXJyb3IgbWVzc2FnZXMgYXJlIG11bHRpbGluZSBzbyBub3QgdGVzdGluZyBvbiBmdWxsIG1lc3NhZ2UNCiAgICAgICAgIyBhc3NlcnRUdXBsZUVxdWFsIGFuZCBhc3NlcnRMaXN0RXF1YWwgZGVsZWdhdGUgdG8gdGhpcyBtZXRob2QNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0U2VxdWVuY2VFcXVhbCcsIChbXSwgW05vbmVdKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIlwrIFxbTm9uZVxdJCIsICJeb29wcyQiLCByIlwrIFxbTm9uZVxdJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIiXCsgXFtOb25lXF0gOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRTZXRFcXVhbChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0U2V0RXF1YWwnLCAoc2V0KCksIHNldChbTm9uZV0pKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIk5vbmUkIiwgIl5vb3BzJCIsICJOb25lJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb25lIDogb29wcyQiXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0SW4oc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ2Fzc2VydEluJywgKE5vbmUsIFtdKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ15Ob25lIG5vdCBmb3VuZCBpbiBcW1xdJCcsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXk5vbmUgbm90IGZvdW5kIGluIFxbXF0kJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15Ob25lIG5vdCBmb3VuZCBpbiBcW1xdIDogb29wcyQnXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0Tm90SW4oc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ2Fzc2VydE5vdEluJywgKE5vbmUsIFtOb25lXSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWydeTm9uZSB1bmV4cGVjdGVkbHkgZm91bmQgaW4gXFtOb25lXF0kJywgIl5vb3BzJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeTm9uZSB1bmV4cGVjdGVkbHkgZm91bmQgaW4gXFtOb25lXF0kJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15Ob25lIHVuZXhwZWN0ZWRseSBmb3VuZCBpbiBcW05vbmVcXSA6IG9vcHMkJ10pDQoNCiAgICBkZWYgdGVzdEFzc2VydERpY3RFcXVhbChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0RGljdEVxdWFsJywgKHt9LCB7J2tleSc6ICd2YWx1ZSd9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbciJcKyBceydrZXknOiAndmFsdWUnXH0kIiwgIl5vb3BzJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJcKyBceydrZXknOiAndmFsdWUnXH0kIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlwrIFx7J2tleSc6ICd2YWx1ZSdcfSA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdEFzc2VydERpY3RDb250YWluc1N1YnNldChzZWxmKToNCiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOg0KICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJpZ25vcmUiLCBEZXByZWNhdGlvbldhcm5pbmcpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ2Fzc2VydERpY3RDb250YWluc1N1YnNldCcsICh7J2tleSc6ICd2YWx1ZSd9LCB7fSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiXk1pc3Npbmc6ICdrZXknJCIsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl5NaXNzaW5nOiAna2V5JyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl5NaXNzaW5nOiAna2V5JyA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdEFzc2VydE11bHRpTGluZUVxdWFsKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRNdWx0aUxpbmVFcXVhbCcsICgiIiwgImZvbyIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtyIlwrIGZvbyQiLCAiXm9vcHMkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciJcKyBmb28kIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciJcKyBmb28gOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRMZXNzKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRMZXNzJywgKDIsIDEpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiXjIgbm90IGxlc3MgdGhhbiAxJCIsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXjIgbm90IGxlc3MgdGhhbiAxJCIsICJeMiBub3QgbGVzcyB0aGFuIDEgOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRMZXNzRXF1YWwoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ2Fzc2VydExlc3NFcXVhbCcsICgyLCAxKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIl4yIG5vdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMSQiLCAiXm9vcHMkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4yIG5vdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMSQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXjIgbm90IGxlc3MgdGhhbiBvciBlcXVhbCB0byAxIDogb29wcyQiXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0R3JlYXRlcihzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0R3JlYXRlcicsICgxLCAyKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIl4xIG5vdCBncmVhdGVyIHRoYW4gMiQiLCAiXm9vcHMkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4xIG5vdCBncmVhdGVyIHRoYW4gMiQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXjEgbm90IGdyZWF0ZXIgdGhhbiAyIDogb29wcyQiXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0R3JlYXRlckVxdWFsKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRHcmVhdGVyRXF1YWwnLCAoMSwgMiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJeMSBub3QgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDIkIiwgIl5vb3BzJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJeMSBub3QgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDIkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4xIG5vdCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMiA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdEFzc2VydElzTm9uZShzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0SXNOb25lJywgKCdub3QgTm9uZScsKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIl4nbm90IE5vbmUnIGlzIG5vdCBOb25lJCIsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXidub3QgTm9uZScgaXMgbm90IE5vbmUkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4nbm90IE5vbmUnIGlzIG5vdCBOb25lIDogb29wcyQiXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0SXNOb3ROb25lKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRJc05vdE5vbmUnLCAoTm9uZSwpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiXnVuZXhwZWN0ZWRseSBOb25lJCIsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXnVuZXhwZWN0ZWRseSBOb25lJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJedW5leHBlY3RlZGx5IE5vbmUgOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRJcyhzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0SXMnLCAoTm9uZSwgJ2ZvbycpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiXk5vbmUgaXMgbm90ICdmb28nJCIsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXk5vbmUgaXMgbm90ICdmb28nJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJeTm9uZSBpcyBub3QgJ2ZvbycgOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRJc05vdChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0SXNOb3QnLCAoTm9uZSwgTm9uZSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJedW5leHBlY3RlZGx5IGlkZW50aWNhbDogTm9uZSQiLCAiXm9vcHMkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl51bmV4cGVjdGVkbHkgaWRlbnRpY2FsOiBOb25lJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJedW5leHBlY3RlZGx5IGlkZW50aWNhbDogTm9uZSA6IG9vcHMkIl0pDQoNCg0KICAgIGRlZiBhc3NlcnRNZXNzYWdlc0NNKHNlbGYsIG1ldGhvZE5hbWUsIGFyZ3MsIGZ1bmMsIGVycm9ycyk6DQogICAgICAgICIiIg0KICAgICAgICBDaGVjayB0aGF0IHRoZSBjb3JyZWN0IGVycm9yIG1lc3NhZ2VzIGFyZSByYWlzZWQgd2hpbGUgZXhlY3V0aW5nOg0KICAgICAgICAgIHdpdGggbWV0aG9kKCphcmdzKToNCiAgICAgICAgICAgICAgZnVuYygpDQogICAgICAgICplcnJvcnMqIHNob3VsZCBiZSBhIGxpc3Qgb2YgNCByZWdleCB0aGF0IG1hdGNoIHRoZSBlcnJvciB3aGVuOg0KICAgICAgICAgIDEpIGxvbmdNZXNzYWdlID0gRmFsc2UgYW5kIG5vIG1zZyBwYXNzZWQ7DQogICAgICAgICAgMikgbG9uZ01lc3NhZ2UgPSBGYWxzZSBhbmQgbXNnIHBhc3NlZDsNCiAgICAgICAgICAzKSBsb25nTWVzc2FnZSA9IFRydWUgYW5kIG5vIG1zZyBwYXNzZWQ7DQogICAgICAgICAgNCkgbG9uZ01lc3NhZ2UgPSBUcnVlIGFuZCBtc2cgcGFzc2VkOw0KICAgICAgICAiIiINCiAgICAgICAgcCA9IHByb2R1Y3QoKHNlbGYudGVzdGFibGVGYWxzZSwgc2VsZi50ZXN0YWJsZVRydWUpLA0KICAgICAgICAgICAgICAgICAgICAoe30sIHsibXNnIjogIm9vcHMifSkpDQogICAgICAgIGZvciAoY2xzLCBrd2FyZ3MpLCBlcnIgaW4gemlwKHAsIGVycm9ycyk6DQogICAgICAgICAgICBtZXRob2QgPSBnZXRhdHRyKGNscywgbWV0aG9kTmFtZSkNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXNSZWdleChjbHMuZmFpbHVyZUV4Y2VwdGlvbiwgZXJyKToNCiAgICAgICAgICAgICAgICB3aXRoIG1ldGhvZCgqYXJncywgKiprd2FyZ3MpIGFzIGNtOg0KICAgICAgICAgICAgICAgICAgICBmdW5jKCkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0UmFpc2VzKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzQ00oJ2Fzc2VydFJhaXNlcycsIChUeXBlRXJyb3IsKSwgbGFtYmRhOiBOb25lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydeVHlwZUVycm9yIG5vdCByYWlzZWQkJywgJ15vb3BzJCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15UeXBlRXJyb3Igbm90IHJhaXNlZCQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeVHlwZUVycm9yIG5vdCByYWlzZWQgOiBvb3BzJCddKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRSYWlzZXNSZWdleChzZWxmKToNCiAgICAgICAgIyB0ZXN0IGVycm9yIG5vdCByYWlzZWQNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlc0NNKCdhc3NlcnRSYWlzZXNSZWdleCcsIChUeXBlRXJyb3IsICd1bnVzZWQgcmVnZXgnKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbWJkYTogTm9uZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnXlR5cGVFcnJvciBub3QgcmFpc2VkJCcsICdeb29wcyQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeVHlwZUVycm9yIG5vdCByYWlzZWQkJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXlR5cGVFcnJvciBub3QgcmFpc2VkIDogb29wcyQnXSkNCiAgICAgICAgIyB0ZXN0IGVycm9yIHJhaXNlZCBidXQgd2l0aCB3cm9uZyBtZXNzYWdlDQogICAgICAgIGRlZiByYWlzZV93cm9uZ19tZXNzYWdlKCk6DQogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ZvbycpDQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXNDTSgnYXNzZXJ0UmFpc2VzUmVnZXgnLCAoVHlwZUVycm9yLCAncmVnZXgnKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlX3dyb25nX21lc3NhZ2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ14icmVnZXgiIGRvZXMgbm90IG1hdGNoICJmb28iJCcsICdeb29wcyQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeInJlZ2V4IiBkb2VzIG5vdCBtYXRjaCAiZm9vIiQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeInJlZ2V4IiBkb2VzIG5vdCBtYXRjaCAiZm9vIiA6IG9vcHMkJ10pDQoNCiAgICBkZWYgdGVzdEFzc2VydFdhcm5zKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzQ00oJ2Fzc2VydFdhcm5zJywgKFVzZXJXYXJuaW5nLCksIGxhbWJkYTogTm9uZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnXlVzZXJXYXJuaW5nIG5vdCB0cmlnZ2VyZWQkJywgJ15vb3BzJCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15Vc2VyV2FybmluZyBub3QgdHJpZ2dlcmVkJCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15Vc2VyV2FybmluZyBub3QgdHJpZ2dlcmVkIDogb29wcyQnXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0V2FybnNSZWdleChzZWxmKToNCiAgICAgICAgIyB0ZXN0IGVycm9yIG5vdCByYWlzZWQNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlc0NNKCdhc3NlcnRXYXJuc1JlZ2V4JywgKFVzZXJXYXJuaW5nLCAndW51c2VkIHJlZ2V4JyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW1iZGE6IE5vbmUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ15Vc2VyV2FybmluZyBub3QgdHJpZ2dlcmVkJCcsICdeb29wcyQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeVXNlcldhcm5pbmcgbm90IHRyaWdnZXJlZCQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeVXNlcldhcm5pbmcgbm90IHRyaWdnZXJlZCA6IG9vcHMkJ10pDQogICAgICAgICMgdGVzdCB3YXJuaW5nIHJhaXNlZCBidXQgd2l0aCB3cm9uZyBtZXNzYWdlDQogICAgICAgIGRlZiByYWlzZV93cm9uZ19tZXNzYWdlKCk6DQogICAgICAgICAgICB3YXJuaW5ncy53YXJuKCdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzQ00oJ2Fzc2VydFdhcm5zUmVnZXgnLCAoVXNlcldhcm5pbmcsICdyZWdleCcpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2Vfd3JvbmdfbWVzc2FnZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnXiJyZWdleCIgZG9lcyBub3QgbWF0Y2ggImZvbyIkJywgJ15vb3BzJCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ14icmVnZXgiIGRvZXMgbm90IG1hdGNoICJmb28iJCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ14icmVnZXgiIGRvZXMgbm90IG1hdGNoICJmb28iIDogb29wcyQnXSkNCg==',
'/Lib/unittest/test/test_break.py':'aW1wb3J0IGdjDQppbXBvcnQgaW8NCmltcG9ydCBvcw0KaW1wb3J0IHN5cw0KaW1wb3J0IHNpZ25hbA0KaW1wb3J0IHdlYWtyZWYNCg0KaW1wb3J0IHVuaXR0ZXN0DQoNCg0KQHVuaXR0ZXN0LnNraXBVbmxlc3MoaGFzYXR0cihvcywgJ2tpbGwnKSwgIlRlc3QgcmVxdWlyZXMgb3Mua2lsbCIpDQpAdW5pdHRlc3Quc2tpcElmKHN5cy5wbGF0Zm9ybSA9PSJ3aW4zMiIsICJUZXN0IGNhbm5vdCBydW4gb24gV2luZG93cyIpDQpAdW5pdHRlc3Quc2tpcElmKHN5cy5wbGF0Zm9ybSA9PSAnZnJlZWJzZDYnLCAiVGVzdCBraWxscyByZWdydGVzdCBvbiBmcmVlYnNkNiAiDQogICAgImlmIHRocmVhZHMgaGF2ZSBiZWVuIHVzZWQiKQ0KY2xhc3MgVGVzdEJyZWFrKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiBzZXRVcChzZWxmKToNCiAgICAgICAgc2VsZi5fZGVmYXVsdF9oYW5kbGVyID0gc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKQ0KDQogICAgZGVmIHRlYXJEb3duKHNlbGYpOg0KICAgICAgICBzaWduYWwuc2lnbmFsKHNpZ25hbC5TSUdJTlQsIHNlbGYuX2RlZmF1bHRfaGFuZGxlcikNCiAgICAgICAgdW5pdHRlc3Quc2lnbmFscy5fcmVzdWx0cyA9IHdlYWtyZWYuV2Vha0tleURpY3Rpb25hcnkoKQ0KICAgICAgICB1bml0dGVzdC5zaWduYWxzLl9pbnRlcnJ1cHRfaGFuZGxlciA9IE5vbmUNCg0KDQogICAgZGVmIHRlc3RJbnN0YWxsSGFuZGxlcihzZWxmKToNCiAgICAgICAgZGVmYXVsdF9oYW5kbGVyID0gc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKQ0KICAgICAgICB1bml0dGVzdC5pbnN0YWxsSGFuZGxlcigpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKSwgZGVmYXVsdF9oYW5kbGVyKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHBpZCA9IG9zLmdldHBpZCgpDQogICAgICAgICAgICBvcy5raWxsKHBpZCwgc2lnbmFsLlNJR0lOVCkNCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgc2VsZi5mYWlsKCJLZXlib2FyZEludGVycnVwdCBub3QgaGFuZGxlZCIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHVuaXR0ZXN0LnNpZ25hbHMuX2ludGVycnVwdF9oYW5kbGVyLmNhbGxlZCkNCg0KICAgIGRlZiB0ZXN0UmVnaXN0ZXJSZXN1bHQoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5yZWdpc3RlclJlc3VsdChyZXN1bHQpDQoNCiAgICAgICAgZm9yIHJlZiBpbiB1bml0dGVzdC5zaWduYWxzLl9yZXN1bHRzOg0KICAgICAgICAgICAgaWYgcmVmIGlzIHJlc3VsdDoNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZWxpZiByZWYgaXMgbm90IHJlc3VsdDoNCiAgICAgICAgICAgICAgICBzZWxmLmZhaWwoIm9kZCBvYmplY3QgaW4gcmVzdWx0IHNldCIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoInJlc3VsdCBub3QgZm91bmQiKQ0KDQoNCiAgICBkZWYgdGVzdEludGVycnVwdENhdWdodChzZWxmKToNCiAgICAgICAgZGVmYXVsdF9oYW5kbGVyID0gc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKQ0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5pbnN0YWxsSGFuZGxlcigpDQogICAgICAgIHVuaXR0ZXN0LnJlZ2lzdGVyUmVzdWx0KHJlc3VsdCkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCksIGRlZmF1bHRfaGFuZGxlcikNCg0KICAgICAgICBkZWYgdGVzdChyZXN1bHQpOg0KICAgICAgICAgICAgcGlkID0gb3MuZ2V0cGlkKCkNCiAgICAgICAgICAgIG9zLmtpbGwocGlkLCBzaWduYWwuU0lHSU5UKQ0KICAgICAgICAgICAgcmVzdWx0LmJyZWFrQ2F1Z2h0ID0gVHJ1ZQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC5zaG91bGRTdG9wKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRlc3QocmVzdWx0KQ0KICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6DQogICAgICAgICAgICBzZWxmLmZhaWwoIktleWJvYXJkSW50ZXJydXB0IG5vdCBoYW5kbGVkIikNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC5icmVha0NhdWdodCkNCg0KDQogICAgZGVmIHRlc3RTZWNvbmRJbnRlcnJ1cHQoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5pbnN0YWxsSGFuZGxlcigpDQogICAgICAgIHVuaXR0ZXN0LnJlZ2lzdGVyUmVzdWx0KHJlc3VsdCkNCg0KICAgICAgICBkZWYgdGVzdChyZXN1bHQpOg0KICAgICAgICAgICAgcGlkID0gb3MuZ2V0cGlkKCkNCiAgICAgICAgICAgIG9zLmtpbGwocGlkLCBzaWduYWwuU0lHSU5UKQ0KICAgICAgICAgICAgcmVzdWx0LmJyZWFrQ2F1Z2h0ID0gVHJ1ZQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC5zaG91bGRTdG9wKQ0KICAgICAgICAgICAgb3Mua2lsbChwaWQsIHNpZ25hbC5TSUdJTlQpDQogICAgICAgICAgICBzZWxmLmZhaWwoIlNlY29uZCBLZXlib2FyZEludGVycnVwdCBub3QgcmFpc2VkIikNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0ZXN0KHJlc3VsdCkNCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJTZWNvbmQgS2V5Ym9hcmRJbnRlcnJ1cHQgbm90IHJhaXNlZCIpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQuYnJlYWtDYXVnaHQpDQoNCg0KICAgIGRlZiB0ZXN0VHdvUmVzdWx0cyhzZWxmKToNCiAgICAgICAgdW5pdHRlc3QuaW5zdGFsbEhhbmRsZXIoKQ0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5yZWdpc3RlclJlc3VsdChyZXN1bHQpDQogICAgICAgIG5ld19oYW5kbGVyID0gc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKQ0KDQogICAgICAgIHJlc3VsdDIgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgdW5pdHRlc3QucmVnaXN0ZXJSZXN1bHQocmVzdWx0MikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpLCBuZXdfaGFuZGxlcikNCg0KICAgICAgICByZXN1bHQzID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQoNCiAgICAgICAgZGVmIHRlc3QocmVzdWx0KToNCiAgICAgICAgICAgIHBpZCA9IG9zLmdldHBpZCgpDQogICAgICAgICAgICBvcy5raWxsKHBpZCwgc2lnbmFsLlNJR0lOVCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0ZXN0KHJlc3VsdCkNCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgc2VsZi5mYWlsKCJLZXlib2FyZEludGVycnVwdCBub3QgaGFuZGxlZCIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC5zaG91bGRTdG9wKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0Mi5zaG91bGRTdG9wKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKHJlc3VsdDMuc2hvdWxkU3RvcCkNCg0KDQogICAgZGVmIHRlc3RIYW5kbGVyUmVwbGFjZWRCdXRDYWxsZWQoc2VsZik6DQogICAgICAgICMgSWYgb3VyIGhhbmRsZXIgaGFzIGJlZW4gcmVwbGFjZWQgKGlzIG5vIGxvbmdlciBpbnN0YWxsZWQpIGJ1dCBpcw0KICAgICAgICAjIGNhbGxlZCBieSB0aGUgKm5ldyogaGFuZGxlciwgdGhlbiBpdCBpc24ndCBzYWZlIHRvIGRlbGF5IHRoZQ0KICAgICAgICAjIFNJR0lOVCBhbmQgd2Ugc2hvdWxkIGltbWVkaWF0ZWx5IGRlbGVnYXRlIHRvIHRoZSBkZWZhdWx0IGhhbmRsZXINCiAgICAgICAgdW5pdHRlc3QuaW5zdGFsbEhhbmRsZXIoKQ0KDQogICAgICAgIGhhbmRsZXIgPSBzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpDQogICAgICAgIGRlZiBuZXdfaGFuZGxlcihmcmFtZSwgc2lnbnVtKToNCiAgICAgICAgICAgIGhhbmRsZXIoZnJhbWUsIHNpZ251bSkNCiAgICAgICAgc2lnbmFsLnNpZ25hbChzaWduYWwuU0lHSU5ULCBuZXdfaGFuZGxlcikNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBwaWQgPSBvcy5nZXRwaWQoKQ0KICAgICAgICAgICAgb3Mua2lsbChwaWQsIHNpZ25hbC5TSUdJTlQpDQogICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgicmVwbGFjZWQgYnV0IGRlbGVnYXRlZCBoYW5kbGVyIGRvZXNuJ3QgcmFpc2UgaW50ZXJydXB0IikNCg0KICAgIGRlZiB0ZXN0UnVubmVyKHNlbGYpOg0KICAgICAgICAjIENyZWF0aW5nIGEgVGV4dFRlc3RSdW5uZXIgd2l0aCB0aGUgYXBwcm9wcmlhdGUgYXJndW1lbnQgc2hvdWxkDQogICAgICAgICMgcmVnaXN0ZXIgdGhlIFRleHRUZXN0UmVzdWx0IGl0IGNyZWF0ZXMNCiAgICAgICAgcnVubmVyID0gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoc3RyZWFtPWlvLlN0cmluZ0lPKCkpDQoNCiAgICAgICAgcmVzdWx0ID0gcnVubmVyLnJ1bih1bml0dGVzdC5UZXN0U3VpdGUoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRJbihyZXN1bHQsIHVuaXR0ZXN0LnNpZ25hbHMuX3Jlc3VsdHMpDQoNCiAgICBkZWYgdGVzdFdlYWtSZWZlcmVuY2VzKHNlbGYpOg0KICAgICAgICAjIENhbGxpbmcgcmVnaXN0ZXJSZXN1bHQgb24gYSByZXN1bHQgc2hvdWxkIG5vdCBrZWVwIGl0IGFsaXZlDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5yZWdpc3RlclJlc3VsdChyZXN1bHQpDQoNCiAgICAgICAgcmVmID0gd2Vha3JlZi5yZWYocmVzdWx0KQ0KICAgICAgICBkZWwgcmVzdWx0DQoNCiAgICAgICAgIyBGb3Igbm9uLXJlZmVyZW5jZSBjb3VudGluZyBpbXBsZW1lbnRhdGlvbnMNCiAgICAgICAgZ2MuY29sbGVjdCgpO2djLmNvbGxlY3QoKQ0KICAgICAgICBzZWxmLmFzc2VydElzTm9uZShyZWYoKSkNCg0KDQogICAgZGVmIHRlc3RSZW1vdmVSZXN1bHQoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5yZWdpc3RlclJlc3VsdChyZXN1bHQpDQoNCiAgICAgICAgdW5pdHRlc3QuaW5zdGFsbEhhbmRsZXIoKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUodW5pdHRlc3QucmVtb3ZlUmVzdWx0KHJlc3VsdCkpDQoNCiAgICAgICAgIyBTaG91bGQgdGhpcyByYWlzZSBhbiBlcnJvciBpbnN0ZWFkPw0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKHVuaXR0ZXN0LnJlbW92ZVJlc3VsdCh1bml0dGVzdC5UZXN0UmVzdWx0KCkpKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHBpZCA9IG9zLmdldHBpZCgpDQogICAgICAgICAgICBvcy5raWxsKHBpZCwgc2lnbmFsLlNJR0lOVCkNCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocmVzdWx0LnNob3VsZFN0b3ApDQoNCiAgICBkZWYgdGVzdE1haW5JbnN0YWxsc0hhbmRsZXIoc2VsZik6DQogICAgICAgIGZhaWxmYXN0ID0gb2JqZWN0KCkNCiAgICAgICAgdGVzdCA9IG9iamVjdCgpDQogICAgICAgIHZlcmJvc2l0eSA9IG9iamVjdCgpDQogICAgICAgIHJlc3VsdCA9IG9iamVjdCgpDQogICAgICAgIGRlZmF1bHRfaGFuZGxlciA9IHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCkNCg0KICAgICAgICBjbGFzcyBGYWtlUnVubmVyKG9iamVjdCk6DQogICAgICAgICAgICBpbml0QXJncyA9IFtdDQogICAgICAgICAgICBydW5BcmdzID0gW10NCiAgICAgICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAgICAgICAgIHNlbGYuaW5pdEFyZ3MuYXBwZW5kKChhcmdzLCBrd2FyZ3MpKQ0KICAgICAgICAgICAgZGVmIHJ1bihzZWxmLCB0ZXN0KToNCiAgICAgICAgICAgICAgICBzZWxmLnJ1bkFyZ3MuYXBwZW5kKHRlc3QpDQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdA0KDQogICAgICAgIGNsYXNzIFByb2dyYW0odW5pdHRlc3QuVGVzdFByb2dyYW0pOg0KICAgICAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIGNhdGNoYnJlYWspOg0KICAgICAgICAgICAgICAgIHNlbGYuZXhpdCA9IEZhbHNlDQogICAgICAgICAgICAgICAgc2VsZi52ZXJib3NpdHkgPSB2ZXJib3NpdHkNCiAgICAgICAgICAgICAgICBzZWxmLmZhaWxmYXN0ID0gZmFpbGZhc3QNCiAgICAgICAgICAgICAgICBzZWxmLmNhdGNoYnJlYWsgPSBjYXRjaGJyZWFrDQogICAgICAgICAgICAgICAgc2VsZi50ZXN0UnVubmVyID0gRmFrZVJ1bm5lcg0KICAgICAgICAgICAgICAgIHNlbGYudGVzdCA9IHRlc3QNCiAgICAgICAgICAgICAgICBzZWxmLnJlc3VsdCA9IE5vbmUNCg0KICAgICAgICBwID0gUHJvZ3JhbShGYWxzZSkNCiAgICAgICAgcC5ydW5UZXN0cygpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGYWtlUnVubmVyLmluaXRBcmdzLCBbKCgpLCB7J2J1ZmZlcic6IE5vbmUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2ZXJib3NpdHknOiB2ZXJib3NpdHksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmYWlsZmFzdCc6IGZhaWxmYXN0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd2FybmluZ3MnOiBOb25lfSldKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZha2VSdW5uZXIucnVuQXJncywgW3Rlc3RdKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHAucmVzdWx0LCByZXN1bHQpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpLCBkZWZhdWx0X2hhbmRsZXIpDQoNCiAgICAgICAgRmFrZVJ1bm5lci5pbml0QXJncyA9IFtdDQogICAgICAgIEZha2VSdW5uZXIucnVuQXJncyA9IFtdDQogICAgICAgIHAgPSBQcm9ncmFtKFRydWUpDQogICAgICAgIHAucnVuVGVzdHMoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRmFrZVJ1bm5lci5pbml0QXJncywgWygoKSwgeydidWZmZXInOiBOb25lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmVyYm9zaXR5JzogdmVyYm9zaXR5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmFpbGZhc3QnOiBmYWlsZmFzdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmdzJzogTm9uZX0pXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGYWtlUnVubmVyLnJ1bkFyZ3MsIFt0ZXN0XSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwLnJlc3VsdCwgcmVzdWx0KQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKSwgZGVmYXVsdF9oYW5kbGVyKQ0KDQogICAgZGVmIHRlc3RSZW1vdmVIYW5kbGVyKHNlbGYpOg0KICAgICAgICBkZWZhdWx0X2hhbmRsZXIgPSBzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpDQogICAgICAgIHVuaXR0ZXN0Lmluc3RhbGxIYW5kbGVyKCkNCiAgICAgICAgdW5pdHRlc3QucmVtb3ZlSGFuZGxlcigpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKSwgZGVmYXVsdF9oYW5kbGVyKQ0KDQogICAgICAgICMgY2hlY2sgdGhhdCBjYWxsaW5nIHJlbW92ZUhhbmRsZXIgbXVsdGlwbGUgdGltZXMgaGFzIG5vIGlsbC1lZmZlY3QNCiAgICAgICAgdW5pdHRlc3QucmVtb3ZlSGFuZGxlcigpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKSwgZGVmYXVsdF9oYW5kbGVyKQ0KDQogICAgZGVmIHRlc3RSZW1vdmVIYW5kbGVyQXNEZWNvcmF0b3Ioc2VsZik6DQogICAgICAgIGRlZmF1bHRfaGFuZGxlciA9IHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCkNCiAgICAgICAgdW5pdHRlc3QuaW5zdGFsbEhhbmRsZXIoKQ0KDQogICAgICAgIEB1bml0dGVzdC5yZW1vdmVIYW5kbGVyDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCksIGRlZmF1bHRfaGFuZGxlcikNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpLCBkZWZhdWx0X2hhbmRsZXIpDQo=',
'/Lib/unittest/test/_test_warnings.py':'IyBoZWxwZXIgbW9kdWxlIGZvciB0ZXN0X3J1bm5lci5UZXN0X1RleHRUZXN0UnVubmVyLnRlc3Rfd2FybmluZ3MNCg0KIiIiDQpUaGlzIG1vZHVsZSBoYXMgYSBudW1iZXIgb2YgdGVzdHMgdGhhdCByYWlzZSBkaWZmZXJlbnQga2luZHMgb2Ygd2FybmluZ3MuDQpXaGVuIHRoZSB0ZXN0cyBhcmUgcnVuLCB0aGUgd2FybmluZ3MgYXJlIGNhdWdodCBhbmQgdGhlaXIgbWVzc2FnZXMgYXJlIHByaW50ZWQNCnRvIHN0ZG91dC4gIFRoaXMgbW9kdWxlIGFsc28gYWNjZXB0cyBhbiBhcmcgdGhhdCBpcyB0aGVuIHBhc3NlZCB0bw0KdW5pdHRlc3QubWFpbiB0byBhZmZlY3QgdGhlIGJlaGF2aW9yIG9mIHdhcm5pbmdzLg0KVGVzdF9UZXh0VGVzdFJ1bm5lci50ZXN0X3dhcm5pbmdzIGV4ZWN1dGVzIHRoaXMgc2NyaXB0IHdpdGggZGlmZmVyZW50DQpjb21iaW5hdGlvbnMgb2Ygd2FybmluZ3MgYXJncyBhbmQgLVcgZmxhZ3MgYW5kIGNoZWNrIHRoYXQgdGhlIG91dHB1dCBpcyBjb3JyZWN0Lg0KU2VlICMxMDUzNS4NCiIiIg0KDQppbXBvcnQgc3lzDQppbXBvcnQgdW5pdHRlc3QNCmltcG9ydCB3YXJuaW5ncw0KDQpkZWYgd2FybmZ1bigpOg0KICAgIHdhcm5pbmdzLndhcm4oJ3J3JywgUnVudGltZVdhcm5pbmcpDQoNCmNsYXNzIFRlc3RXYXJuaW5ncyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgIyB1bml0dGVzdCB3YXJuaW5ncyB3aWxsIGJlIHByaW50ZWQgYXQgbW9zdCBvbmNlIHBlciB0eXBlIChtYXggb25lIG1lc3NhZ2UNCiAgICAjIGZvciB0aGUgZmFpbCogbWV0aG9kcywgYW5kIG9uZSBmb3IgdGhlIGFzc2VydCogbWV0aG9kcykNCiAgICBkZWYgdGVzdF9hc3NlcnQoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWxzKDIrMiwgNCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbHMoMioyLCA0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFscygyKioyLCA0KQ0KDQogICAgZGVmIHRlc3RfZmFpbChzZWxmKToNCiAgICAgICAgc2VsZi5mYWlsVW5sZXNzKDEpDQogICAgICAgIHNlbGYuZmFpbFVubGVzcyhUcnVlKQ0KDQogICAgZGVmIHRlc3Rfb3RoZXJfdW5pdHRlc3Qoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0QWxtb3N0RXF1YWwoMisyLCA0KQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEFsbW9zdEVxdWFsKDQrNCwgMikNCg0KICAgICMgdGhlc2Ugd2FybmluZ3MgYXJlIG5vcm1hbGx5IHNpbGVuY2VkLCBidXQgdGhleSBhcmUgcHJpbnRlZCBpbiB1bml0dGVzdA0KICAgIGRlZiB0ZXN0X2RlcHJlY2F0aW9uKHNlbGYpOg0KICAgICAgICB3YXJuaW5ncy53YXJuKCdkdycsIERlcHJlY2F0aW9uV2FybmluZykNCiAgICAgICAgd2FybmluZ3Mud2FybignZHcnLCBEZXByZWNhdGlvbldhcm5pbmcpDQogICAgICAgIHdhcm5pbmdzLndhcm4oJ2R3JywgRGVwcmVjYXRpb25XYXJuaW5nKQ0KDQogICAgZGVmIHRlc3RfaW1wb3J0KHNlbGYpOg0KICAgICAgICB3YXJuaW5ncy53YXJuKCdpdycsIEltcG9ydFdhcm5pbmcpDQogICAgICAgIHdhcm5pbmdzLndhcm4oJ2l3JywgSW1wb3J0V2FybmluZykNCiAgICAgICAgd2FybmluZ3Mud2FybignaXcnLCBJbXBvcnRXYXJuaW5nKQ0KDQogICAgIyB1c2VyIHdhcm5pbmdzIHNob3VsZCBhbHdheXMgYmUgcHJpbnRlZA0KICAgIGRlZiB0ZXN0X3dhcm5pbmcoc2VsZik6DQogICAgICAgIHdhcm5pbmdzLndhcm4oJ3V3JykNCiAgICAgICAgd2FybmluZ3Mud2FybigndXcnKQ0KICAgICAgICB3YXJuaW5ncy53YXJuKCd1dycpDQoNCiAgICAjIHRoZXNlIHdhcm5pbmdzIGNvbWUgZnJvbSB0aGUgc2FtZSBwbGFjZTsgdGhleSB3aWxsIGJlIHByaW50ZWQNCiAgICAjIG9ubHkgb25jZSBieSBkZWZhdWx0IG9yIHRocmVlIHRpbWVzIGlmIHRoZSAnYWx3YXlzJyBmaWx0ZXIgaXMgdXNlZA0KICAgIGRlZiB0ZXN0X2Z1bmN0aW9uKHNlbGYpOg0KDQogICAgICAgIHdhcm5mdW4oKQ0KICAgICAgICB3YXJuZnVuKCkNCiAgICAgICAgd2FybmZ1bigpDQoNCg0KDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MocmVjb3JkPVRydWUpIGFzIHdzOg0KICAgICAgICAjIGlmIGFuIGFyZyBpcyBwcm92aWRlZCBwYXNzIGl0IHRvIHVuaXR0ZXN0Lm1haW4gYXMgJ3dhcm5pbmdzJw0KICAgICAgICBpZiBsZW4oc3lzLmFyZ3YpID09IDI6DQogICAgICAgICAgICB1bml0dGVzdC5tYWluKGV4aXQ9RmFsc2UsIHdhcm5pbmdzPXN5cy5hcmd2LnBvcCgpKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgdW5pdHRlc3QubWFpbihleGl0PUZhbHNlKQ0KDQogICAgIyBwcmludCBhbGwgdGhlIHdhcm5pbmcgbWVzc2FnZXMgY29sbGVjdGVkDQogICAgZm9yIHcgaW4gd3M6DQogICAgICAgIHByaW50KHcubWVzc2FnZSkNCg==',
'/Lib/unittest/test/test_loader.py':'aW1wb3J0IHN5cw0KaW1wb3J0IHR5cGVzDQoNCg0KaW1wb3J0IHVuaXR0ZXN0DQoNCg0KY2xhc3MgVGVzdF9UZXN0TG9hZGVyKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgICMjIyBUZXN0cyBmb3IgVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiAgICAjICJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgY29udGFpbmVkIGluIHRoZSBUZXN0Q2FzZS1kZXJpdmVkDQogICAgIyBjbGFzcyB0ZXN0Q2FzZUNsYXNzIg0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21UZXN0Q2FzZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgdGVzdHMgPSB1bml0dGVzdC5UZXN0U3VpdGUoW0ZvbygndGVzdF8xJyksIEZvbygndGVzdF8yJyldKQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoRm9vKSwgdGVzdHMpDQoNCiAgICAjICJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgY29udGFpbmVkIGluIHRoZSBUZXN0Q2FzZS1kZXJpdmVkDQogICAgIyBjbGFzcyB0ZXN0Q2FzZUNsYXNzIg0KICAgICMNCiAgICAjIE1ha2Ugc3VyZSBpdCBkb2VzIHRoZSByaWdodCB0aGluZyBldmVuIGlmIG5vIHRlc3RzIHdlcmUgZm91bmQNCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tVGVzdENhc2VfX25vX21hdGNoZXMoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgZm9vX2JhcihzZWxmKTogcGFzcw0KDQogICAgICAgIGVtcHR5X3N1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIubG9hZFRlc3RzRnJvbVRlc3RDYXNlKEZvbyksIGVtcHR5X3N1aXRlKQ0KDQogICAgIyAiUmV0dXJuIGEgc3VpdGUgb2YgYWxsIHRlc3RzIGNhc2VzIGNvbnRhaW5lZCBpbiB0aGUgVGVzdENhc2UtZGVyaXZlZA0KICAgICMgY2xhc3MgdGVzdENhc2VDbGFzcyINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgaWYgbG9hZFRlc3RzRnJvbVRlc3RDYXNlKCkgaXMgZ2l2ZW4gYW4gb2JqZWN0DQogICAgIyB0aGF0IGlzbid0IGEgc3ViY2xhc3Mgb2YgVGVzdENhc2U/IFNwZWNpZmljYWxseSwgd2hhdCBoYXBwZW5zDQogICAgIyBpZiB0ZXN0Q2FzZUNsYXNzIGlzIGEgc3ViY2xhc3Mgb2YgVGVzdFN1aXRlPw0KICAgICMNCiAgICAjIFRoaXMgaXMgY2hlY2tlZCBmb3Igc3BlY2lmaWNhbGx5IGluIHRoZSBjb2RlLCBzbyB3ZSBiZXR0ZXIgYWRkIGENCiAgICAjIHRlc3QgZm9yIGl0Lg0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21UZXN0Q2FzZV9fVGVzdFN1aXRlX3N1YmNsYXNzKHNlbGYpOg0KICAgICAgICBjbGFzcyBOb3RBVGVzdENhc2UodW5pdHRlc3QuVGVzdFN1aXRlKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbG9hZGVyLmxvYWRUZXN0c0Zyb21UZXN0Q2FzZShOb3RBVGVzdENhc2UpDQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoJ1Nob3VsZCByYWlzZSBUeXBlRXJyb3InKQ0KDQogICAgIyAiUmV0dXJuIGEgc3VpdGUgb2YgYWxsIHRlc3RzIGNhc2VzIGNvbnRhaW5lZCBpbiB0aGUgVGVzdENhc2UtZGVyaXZlZA0KICAgICMgY2xhc3MgdGVzdENhc2VDbGFzcyINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgbG9hZFRlc3RzRnJvbVRlc3RDYXNlKCkgcGlja3MgdXAgdGhlIGRlZmF1bHQgdGVzdCBtZXRob2QNCiAgICAjIG5hbWUgKGFzIHNwZWNpZmllZCBieSBUZXN0Q2FzZSksIGV2ZW4gdGhvdWdoIHRoZSBtZXRob2QgbmFtZSBkb2VzDQogICAgIyBub3QgbWF0Y2ggdGhlIGRlZmF1bHQgVGVzdExvYWRlci50ZXN0TWV0aG9kUHJlZml4IHN0cmluZw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21UZXN0Q2FzZV9fZGVmYXVsdF9tZXRob2RfbmFtZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW5UZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgIyBUaGlzIGhhcyB0byBiZSBmYWxzZSBmb3IgdGhlIHRlc3QgdG8gc3VjY2VlZA0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKCdydW5UZXN0Jy5zdGFydHN3aXRoKGxvYWRlci50ZXN0TWV0aG9kUHJlZml4KSkNCg0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoRm9vKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbRm9vKCdydW5UZXN0JyldKQ0KDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICMjIyAvVGVzdHMgZm9yIFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbVRlc3RDYXNlDQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU1vZHVsZQ0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KICAgICMgIlRoaXMgbWV0aG9kIHNlYXJjaGVzIGBtb2R1bGVgIGZvciBjbGFzc2VzIGRlcml2ZWQgZnJvbSBUZXN0Q2FzZSINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTW9kdWxlX19UZXN0Q2FzZV9zdWJjbGFzcyhzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBjbGFzcyBNeVRlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbS50ZXN0Y2FzZV8xID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQoNCiAgICAgICAgZXhwZWN0ZWQgPSBbbG9hZGVyLnN1aXRlQ2xhc3MoW015VGVzdENhc2UoJ3Rlc3QnKV0pXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBleHBlY3RlZCkNCg0KICAgICMgIlRoaXMgbWV0aG9kIHNlYXJjaGVzIGBtb2R1bGVgIGZvciBjbGFzc2VzIGRlcml2ZWQgZnJvbSBUZXN0Q2FzZSINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgaWYgbm8gdGVzdHMgYXJlIGZvdW5kIChubyBUZXN0Q2FzZSBpbnN0YW5jZXMpPw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21Nb2R1bGVfX25vX1Rlc3RDYXNlX2luc3RhbmNlcyhzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtdKQ0KDQogICAgIyAiVGhpcyBtZXRob2Qgc2VhcmNoZXMgYG1vZHVsZWAgZm9yIGNsYXNzZXMgZGVyaXZlZCBmcm9tIFRlc3RDYXNlIg0KICAgICMNCiAgICAjIFdoYXQgaGFwcGVucyBpZiBubyB0ZXN0cyBhcmUgZm91bmQgKFRlc3RDYXNlcyBpbnN0YW5jZXMsIGJ1dCBubyB0ZXN0cyk/DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU1vZHVsZV9fbm9fVGVzdENhc2VfdGVzdHMoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgTXlUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIG0udGVzdGNhc2VfMSA9IE15VGVzdENhc2UNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU1vZHVsZShtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtsb2FkZXIuc3VpdGVDbGFzcygpXSkNCg0KICAgICMgIlRoaXMgbWV0aG9kIHNlYXJjaGVzIGBtb2R1bGVgIGZvciBjbGFzc2VzIGRlcml2ZWQgZnJvbSBUZXN0Q2FzZSJzDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIGlmIGxvYWRUZXN0c0Zyb21Nb2R1bGUoKSBpcyBnaXZlbiBzb21ldGhpbmcgb3RoZXINCiAgICAjIHRoYW4gYSBtb2R1bGU/DQogICAgIw0KICAgICMgWFhYIEN1cnJlbnRseSwgaXQgc3VjY2VlZHMgYW55d2F5LiBUaGlzIGZsZXhpYmlsaXR5DQogICAgIyBzaG91bGQgZWl0aGVyIGJlIGRvY3VtZW50ZWQgb3IgbG9hZFRlc3RzRnJvbU1vZHVsZSgpIHNob3VsZA0KICAgICMgcmFpc2UgYSBUeXBlRXJyb3INCiAgICAjDQogICAgIyBYWFggQ2VydGFpbiBwZW9wbGUgYXJlIHVzaW5nIHRoaXMgYmVoYXZpb3VyLiBXZSdsbCBhZGQgYSB0ZXN0IGZvciBpdA0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21Nb2R1bGVfX25vdF9hX21vZHVsZShzZWxmKToNCiAgICAgICAgY2xhc3MgTXlUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgY2xhc3MgTm90QU1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgdGVzdF8yID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKE5vdEFNb2R1bGUpDQoNCiAgICAgICAgcmVmZXJlbmNlID0gW3VuaXR0ZXN0LlRlc3RTdWl0ZShbTXlUZXN0Q2FzZSgndGVzdCcpXSldDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIHJlZmVyZW5jZSkNCg0KDQogICAgIyBDaGVjayB0aGF0IGxvYWRUZXN0c0Zyb21Nb2R1bGUgaG9ub3JzIChvciBub3QpIGEgbW9kdWxlDQogICAgIyB3aXRoIGEgbG9hZF90ZXN0cyBmdW5jdGlvbi4NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTW9kdWxlX19sb2FkX3Rlc3RzKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIE15VGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBtLnRlc3RjYXNlXzEgPSBNeVRlc3RDYXNlDQoNCiAgICAgICAgbG9hZF90ZXN0c19hcmdzID0gW10NCiAgICAgICAgZGVmIGxvYWRfdGVzdHMobG9hZGVyLCB0ZXN0cywgcGF0dGVybik6DQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UodGVzdHMsIHVuaXR0ZXN0LlRlc3RTdWl0ZSkNCiAgICAgICAgICAgIGxvYWRfdGVzdHNfYXJncy5leHRlbmQoKGxvYWRlciwgdGVzdHMsIHBhdHRlcm4pKQ0KICAgICAgICAgICAgcmV0dXJuIHRlc3RzDQogICAgICAgIG0ubG9hZF90ZXN0cyA9IGxvYWRfdGVzdHMNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU1vZHVsZShtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIHVuaXR0ZXN0LlRlc3RTdWl0ZSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkX3Rlc3RzX2FyZ3MsIFtsb2FkZXIsIHN1aXRlLCBOb25lXSkNCg0KICAgICAgICBsb2FkX3Rlc3RzX2FyZ3MgPSBbXQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG0sIHVzZV9sb2FkX3Rlc3RzPUZhbHNlKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRfdGVzdHNfYXJncywgW10pDQoNCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTW9kdWxlX19mYXVsdHlfbG9hZF90ZXN0cyhzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KDQogICAgICAgIGRlZiBsb2FkX3Rlc3RzKGxvYWRlciwgdGVzdHMsIHBhdHRlcm4pOg0KICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdzb21lIGZhaWx1cmUnKQ0KICAgICAgICBtLmxvYWRfdGVzdHMgPSBsb2FkX3Rlc3RzDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21Nb2R1bGUobSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCB1bml0dGVzdC5UZXN0U3VpdGUpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUuY291bnRUZXN0Q2FzZXMoKSwgMSkNCiAgICAgICAgdGVzdCA9IGxpc3Qoc3VpdGUpWzBdDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXNSZWdleChUeXBlRXJyb3IsICJzb21lIGZhaWx1cmUiLCB0ZXN0Lm0pDQoNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyMjIC9UZXN0cyBmb3IgVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKCkNCg0KICAgICMjIyBUZXN0cyBmb3IgVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgpDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjDQogICAgIyBJcyBWYWx1ZUVycm9yIHJhaXNlZCBpbiByZXNwb25zZSB0byBhbiBlbXB0eSBuYW1lPw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19lbXB0eV9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJycpDQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yIGFzIGU6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihlKSwgIkVtcHR5IG1vZHVsZSBuYW1lIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSBmYWlsZWQgdG8gcmFpc2UgVmFsdWVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSBlaXRoZXIgdG8NCiAgICAjIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYSBUZXN0U3VpdGUgaW5zdGFuY2UsIGEgdGVzdCBtZXRob2QNCiAgICAjIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhDQogICAgIyBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UuIg0KICAgICMNCiAgICAjIFdoYXQgaGFwcGVucyB3aGVuIHRoZSBuYW1lIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycz8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fbWFsZm9ybWVkX25hbWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgICMgWFhYIFNob3VsZCB0aGlzIHJhaXNlIFZhbHVlRXJyb3Igb3IgSW1wb3J0RXJyb3I/DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgnYWJjICgpIC8vJykNCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSBmYWlsZWQgdG8gcmFpc2UgVmFsdWVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSAuLi4gdG8gYQ0KICAgICMgbW9kdWxlIg0KICAgICMNCiAgICAjIFdoYXQgaGFwcGVucyB3aGVuIGEgbW9kdWxlIGJ5IHRoYXQgbmFtZSBjYW4ndCBiZSBmb3VuZD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fdW5rbm93bl9tb2R1bGVfbmFtZShzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lKCdzZGFzZmFzZmFzZGYnKQ0KICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3IgYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKGUpLCAiTm8gbW9kdWxlIG5hbWVkICdzZGFzZmFzZmFzZGYnIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSBmYWlsZWQgdG8gcmFpc2UgSW1wb3J0RXJyb3IiKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgd2hlbiB0aGUgbW9kdWxlIGlzIGZvdW5kLCBidXQgdGhlIGF0dHJpYnV0ZSBjYW4ndD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fdW5rbm93bl9hdHRyX25hbWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndW5pdHRlc3Quc2Rhc2Zhc2Zhc2RmJykNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGU6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihlKSwgIidtb2R1bGUnIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICdzZGFzZmFzZmFzZGYnIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSBmYWlsZWQgdG8gcmFpc2UgQXR0cmlidXRlRXJyb3IiKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgd2hlbiB3ZSBwcm92aWRlIHRoZSBtb2R1bGUsIGJ1dCB0aGUgYXR0cmlidXRlIGNhbid0IGJlDQogICAgIyBmb3VuZD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfdW5rbm93bl9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJ3NkYXNmYXNmYXNkZicsIHVuaXR0ZXN0KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKGUpLCAiJ21vZHVsZScgb2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgJ3NkYXNmYXNmYXNkZiciKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lIGZhaWxlZCB0byByYWlzZSBBdHRyaWJ1dGVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSBlaXRoZXIgdG8NCiAgICAjIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYSBUZXN0U3VpdGUgaW5zdGFuY2UsIGEgdGVzdCBtZXRob2QNCiAgICAjIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhDQogICAgIyBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UuIg0KICAgICMgLi4uDQogICAgIyAiVGhlIG1ldGhvZCBvcHRpb25hbGx5IHJlc29sdmVzIG5hbWUgcmVsYXRpdmUgdG8gdGhlIGdpdmVuIG1vZHVsZSINCiAgICAjDQogICAgIyBEb2VzIGxvYWRUZXN0c0Zyb21OYW1lIHJhaXNlIFZhbHVlRXJyb3Igd2hlbiBwYXNzZWQgYW4gZW1wdHkNCiAgICAjIG5hbWUgcmVsYXRpdmUgdG8gYSBwcm92aWRlZCBtb2R1bGU/DQogICAgIw0KICAgICMgWFhYIFNob3VsZCBwcm9iYWJseSByYWlzZSBhIFZhbHVlRXJyb3IgaW5zdGVhZCBvZiBhbiBBdHRyaWJ1dGVFcnJvcg0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19yZWxhdGl2ZV9lbXB0eV9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJycsIHVuaXR0ZXN0KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiRmFpbGVkIHRvIHJhaXNlIEF0dHJpYnV0ZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIyAuLi4NCiAgICAjICJUaGUgbWV0aG9kIG9wdGlvbmFsbHkgcmVzb2x2ZXMgbmFtZSByZWxhdGl2ZSB0byB0aGUgZ2l2ZW4gbW9kdWxlIg0KICAgICMNCiAgICAjIFdoYXQgaGFwcGVucyB3aGVuIGFuIGltcG9zc2libGUgbmFtZSBpcyBnaXZlbiwgcmVsYXRpdmUgdG8gdGhlIHByb3ZpZGVkDQogICAgIyBgbW9kdWxlYD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfbWFsZm9ybWVkX25hbWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgICMgWFhYIFNob3VsZCB0aGlzIHJhaXNlIEF0dHJpYnV0ZUVycm9yIG9yIFZhbHVlRXJyb3I/DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgnYWJjICgpIC8vJywgdW5pdHRlc3QpDQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoIlRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUgZmFpbGVkIHRvIHJhaXNlIFZhbHVlRXJyb3IiKQ0KDQogICAgIyAiVGhlIG1ldGhvZCBvcHRpb25hbGx5IHJlc29sdmVzIG5hbWUgcmVsYXRpdmUgdG8gdGhlIGdpdmVuIG1vZHVsZSINCiAgICAjDQogICAgIyBEb2VzIGxvYWRUZXN0c0Zyb21OYW1lIHJhaXNlIFR5cGVFcnJvciB3aGVuIHRoZSBgbW9kdWxlYCBhcmd1bWVudA0KICAgICMgaXNuJ3QgYSBtb2R1bGUgb2JqZWN0Pw0KICAgICMNCiAgICAjIFhYWCBBY2NlcHRzIHRoZSBub3QtYS1tb2R1bGUgb2JqZWN0LCBpZ25vcm5pbmcgdGhlIG9iamVjdCdzIHR5cGUNCiAgICAjIFRoaXMgc2hvdWxkIHJhaXNlIGFuIGV4Y2VwdGlvbiBvciB0aGUgbWV0aG9kIG5hbWUgc2hvdWxkIGJlIGNoYW5nZWQNCiAgICAjDQogICAgIyBYWFggU29tZSBwZW9wbGUgYXJlIHJlbHlpbmcgb24gdGhpcywgc28ga2VlcCBpdCBmb3Igbm93DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVfX3JlbGF0aXZlX25vdF9hX21vZHVsZShzZWxmKToNCiAgICAgICAgY2xhc3MgTXlUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgY2xhc3MgTm90QU1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgdGVzdF8yID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndGVzdF8yJywgTm90QU1vZHVsZSkNCg0KICAgICAgICByZWZlcmVuY2UgPSBbTXlUZXN0Q2FzZSgndGVzdCcpXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCByZWZlcmVuY2UpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSBlaXRoZXIgdG8NCiAgICAjIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYSBUZXN0U3VpdGUgaW5zdGFuY2UsIGEgdGVzdCBtZXRob2QNCiAgICAjIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhDQogICAgIyBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UuIg0KICAgICMNCiAgICAjIERvZXMgaXQgcmFpc2UgYW4gZXhjZXB0aW9uIGlmIHRoZSBuYW1lIHJlc29sdmVzIHRvIGFuIGludmFsaWQNCiAgICAjIG9iamVjdD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfYmFkX29iamVjdChzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBtLnRlc3RjYXNlXzEgPSBvYmplY3QoKQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJ3Rlc3RjYXNlXzEnLCBtKQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJTaG91bGQgaGF2ZSByYWlzZWQgVHlwZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heQ0KICAgICMgcmVzb2x2ZSBlaXRoZXIgdG8gLi4uIGEgdGVzdCBjYXNlIGNsYXNzIg0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19yZWxhdGl2ZV9UZXN0Q2FzZV9zdWJjbGFzcyhzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBjbGFzcyBNeVRlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbS50ZXN0Y2FzZV8xID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndGVzdGNhc2VfMScsIG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtNeVRlc3RDYXNlKCd0ZXN0JyldKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfVGVzdFN1aXRlKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIE15VGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBtLnRlc3RzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbTXlUZXN0Q2FzZSgndGVzdCcpXSkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJ3Rlc3RzdWl0ZScsIG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW015VGVzdENhc2UoJ3Rlc3QnKV0pDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSAuLi4gdG8NCiAgICAjIC4uLiBhIHRlc3QgbWV0aG9kIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcyINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfdGVzdG1ldGhvZChzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBjbGFzcyBNeVRlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbS50ZXN0Y2FzZV8xID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndGVzdGNhc2VfMS50ZXN0JywgbSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbTXlUZXN0Q2FzZSgndGVzdCcpXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIw0KICAgICMgRG9lcyBsb2FkVGVzdHNGcm9tTmFtZSgpIHJhaXNlIHRoZSBwcm9wZXIgZXhjZXB0aW9uIHdoZW4gdHJ5aW5nIHRvDQogICAgIyByZXNvbHZlICJhIHRlc3QgbWV0aG9kIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcyIgdGhhdCBkb2Vzbid0IGV4aXN0DQogICAgIyBmb3IgdGhlIGdpdmVuIG5hbWUgKHJlbGF0aXZlIHRvIGEgcHJvdmlkZWQgbW9kdWxlKT8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfaW52YWxpZF90ZXN0bWV0aG9kKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIE15VGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBtLnRlc3RjYXNlXzEgPSBNeVRlc3RDYXNlDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndGVzdGNhc2VfMS50ZXN0Zm9vJywgbSkNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGU6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihlKSwgInR5cGUgb2JqZWN0ICdNeVRlc3RDYXNlJyBoYXMgbm8gYXR0cmlidXRlICd0ZXN0Zm9vJyIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoIkZhaWxlZCB0byByYWlzZSBBdHRyaWJ1dGVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSAuLi4gdG8NCiAgICAjIC4uLiBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGEgLi4uIFRlc3RTdWl0ZSBpbnN0YW5jZSINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fY2FsbGFibGVfX1Rlc3RTdWl0ZShzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICB0ZXN0Y2FzZV8xID0gdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZShsYW1iZGE6IE5vbmUpDQogICAgICAgIHRlc3RjYXNlXzIgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgZGVmIHJldHVybl9UZXN0U3VpdGUoKToNCiAgICAgICAgICAgIHJldHVybiB1bml0dGVzdC5UZXN0U3VpdGUoW3Rlc3RjYXNlXzEsIHRlc3RjYXNlXzJdKQ0KICAgICAgICBtLnJldHVybl9UZXN0U3VpdGUgPSByZXR1cm5fVGVzdFN1aXRlDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lKCdyZXR1cm5fVGVzdFN1aXRlJywgbSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW3Rlc3RjYXNlXzEsIHRlc3RjYXNlXzJdKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgLi4uIHRvDQogICAgIyAuLi4gYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhIFRlc3RDYXNlIC4uLiBpbnN0YW5jZSINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fY2FsbGFibGVfX1Rlc3RDYXNlX2luc3RhbmNlKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIHRlc3RjYXNlXzEgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgZGVmIHJldHVybl9UZXN0Q2FzZSgpOg0KICAgICAgICAgICAgcmV0dXJuIHRlc3RjYXNlXzENCiAgICAgICAgbS5yZXR1cm5fVGVzdENhc2UgPSByZXR1cm5fVGVzdENhc2UNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJ3JldHVybl9UZXN0Q2FzZScsIG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFt0ZXN0Y2FzZV8xXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0bw0KICAgICMgLi4uIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYSBUZXN0Q2FzZSAuLi4gaW5zdGFuY2UiDQogICAgIyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgI092ZXJyaWRlIHRoZSBzdWl0ZUNsYXNzIGF0dHJpYnV0ZSB0byBlbnN1cmUgdGhhdCB0aGUgc3VpdGVDbGFzcw0KICAgICNhdHRyaWJ1dGUgaXMgdXNlZA0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19jYWxsYWJsZV9fVGVzdENhc2VfaW5zdGFuY2VfUHJvcGVyU3VpdGVDbGFzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgU3ViVGVzdFN1aXRlKHVuaXR0ZXN0LlRlc3RTdWl0ZSk6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgdGVzdGNhc2VfMSA9IHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KICAgICAgICBkZWYgcmV0dXJuX1Rlc3RDYXNlKCk6DQogICAgICAgICAgICByZXR1cm4gdGVzdGNhc2VfMQ0KICAgICAgICBtLnJldHVybl9UZXN0Q2FzZSA9IHJldHVybl9UZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBsb2FkZXIuc3VpdGVDbGFzcyA9IFN1YlRlc3RTdWl0ZQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgncmV0dXJuX1Rlc3RDYXNlJywgbSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW3Rlc3RjYXNlXzFdKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgLi4uIHRvDQogICAgIyAuLi4gYSB0ZXN0IG1ldGhvZCB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MiDQogICAgIyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgI092ZXJyaWRlIHRoZSBzdWl0ZUNsYXNzIGF0dHJpYnV0ZSB0byBlbnN1cmUgdGhhdCB0aGUgc3VpdGVDbGFzcw0KICAgICNhdHRyaWJ1dGUgaXMgdXNlZA0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19yZWxhdGl2ZV90ZXN0bWV0aG9kX1Byb3BlclN1aXRlQ2xhc3Moc2VsZik6DQogICAgICAgIGNsYXNzIFN1YlRlc3RTdWl0ZSh1bml0dGVzdC5UZXN0U3VpdGUpOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIE15VGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBtLnRlc3RjYXNlXzEgPSBNeVRlc3RDYXNlDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIGxvYWRlci5zdWl0ZUNsYXNzPVN1YlRlc3RTdWl0ZQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndGVzdGNhc2VfMS50ZXN0JywgbSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbTXlUZXN0Q2FzZSgndGVzdCcpXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0bw0KICAgICMgLi4uIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYSBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UiDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIGlmIHRoZSBjYWxsYWJsZSByZXR1cm5zIHNvbWV0aGluZyBlbHNlPw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19jYWxsYWJsZV9fd3JvbmdfdHlwZShzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBkZWYgcmV0dXJuX3dyb25nKCk6DQogICAgICAgICAgICByZXR1cm4gNg0KICAgICAgICBtLnJldHVybl93cm9uZyA9IHJldHVybl93cm9uZw0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgncmV0dXJuX3dyb25nJywgbSkNCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSBmYWlsZWQgdG8gcmFpc2UgVHlwZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgY2FuIHJlZmVyIHRvIG1vZHVsZXMgYW5kIHBhY2thZ2VzIHdoaWNoIGhhdmUgbm90IGJlZW4NCiAgICAjIGltcG9ydGVkOyB0aGV5IHdpbGwgYmUgaW1wb3J0ZWQgYXMgYSBzaWRlLWVmZmVjdCINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fbW9kdWxlX25vdF9sb2FkZWQoc2VsZik6DQogICAgICAgICMgV2UncmUgZ29pbmcgdG8gdHJ5IHRvIGxvYWQgdGhpcyBtb2R1bGUgYXMgYSBzaWRlLWVmZmVjdCwgc28gaXQNCiAgICAgICAgIyBiZXR0ZXIgbm90IGJlIGxvYWRlZCBiZWZvcmUgd2UgdHJ5Lg0KICAgICAgICAjDQogICAgICAgIG1vZHVsZV9uYW1lID0gJ3VuaXR0ZXN0LnRlc3QuZHVtbXknDQogICAgICAgIHN5cy5tb2R1bGVzLnBvcChtb2R1bGVfbmFtZSwgTm9uZSkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUobW9kdWxlX25hbWUpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbXSkNCg0KICAgICAgICAgICAgIyBtb2R1bGUgc2hvdWxkIG5vdyBiZSBsb2FkZWQsIHRoYW5rcyB0byBsb2FkVGVzdHNGcm9tTmFtZSgpDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKG1vZHVsZV9uYW1lLCBzeXMubW9kdWxlcykNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGlmIG1vZHVsZV9uYW1lIGluIHN5cy5tb2R1bGVzOg0KICAgICAgICAgICAgICAgIGRlbCBzeXMubW9kdWxlc1ttb2R1bGVfbmFtZV0NCg0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoKQ0KDQogICAgIyMjIFRlc3RzIGZvciBUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcygpDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgIyAiU2ltaWxhciB0byBsb2FkVGVzdHNGcm9tTmFtZSgpLCBidXQgdGFrZXMgYSBzZXF1ZW5jZSBvZiBuYW1lcyByYXRoZXINCiAgICAjIHRoYW4gYSBzaW5nbGUgbmFtZS4iDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIGlmIHRoYXQgc2VxdWVuY2Ugb2YgbmFtZXMgaXMgZW1wdHk/DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19lbXB0eV9uYW1lX2xpc3Qoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbXSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW10pDQoNCiAgICAjICJTaW1pbGFyIHRvIGxvYWRUZXN0c0Zyb21OYW1lKCksIGJ1dCB0YWtlcyBhIHNlcXVlbmNlIG9mIG5hbWVzIHJhdGhlcg0KICAgICMgdGhhbiBhIHNpbmdsZSBuYW1lLiINCiAgICAjIC4uLg0KICAgICMgIlRoZSBtZXRob2Qgb3B0aW9uYWxseSByZXNvbHZlcyBuYW1lIHJlbGF0aXZlIHRvIHRoZSBnaXZlbiBtb2R1bGUiDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIGlmIHRoYXQgc2VxdWVuY2Ugb2YgbmFtZXMgaXMgZW1wdHk/DQogICAgIw0KICAgICMgWFhYIFNob3VsZCB0aGlzIHJhaXNlIGEgVmFsdWVFcnJvciBvciBqdXN0IHJldHVybiBhbiBlbXB0eSBUZXN0U3VpdGU/DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19yZWxhdGl2ZV9lbXB0eV9uYW1lX2xpc3Qoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbXSwgdW5pdHRlc3QpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtdKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjDQogICAgIyBJcyBWYWx1ZUVycm9yIHJhaXNlZCBpbiByZXNwb25zZSB0byBhbiBlbXB0eSBuYW1lPw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lc19fZW1wdHlfbmFtZShzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbJyddKQ0KICAgICAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksICJFbXB0eSBtb2R1bGUgbmFtZSIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoIlRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzIGZhaWxlZCB0byByYWlzZSBWYWx1ZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIHdoZW4gcHJlc2VudGVkIHdpdGggYW4gaW1wb3NzaWJsZSBtb2R1bGUgbmFtZT8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX21hbGZvcm1lZF9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICAjIFhYWCBTaG91bGQgdGhpcyByYWlzZSBWYWx1ZUVycm9yIG9yIEltcG9ydEVycm9yPw0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnYWJjICgpIC8vJ10pDQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoIlRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzIGZhaWxlZCB0byByYWlzZSBWYWx1ZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIHdoZW4gbm8gbW9kdWxlIGNhbiBiZSBmb3VuZCBmb3IgdGhlIGdpdmVuIG5hbWU/DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX191bmtub3duX21vZHVsZV9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnc2Rhc2Zhc2Zhc2RmJ10pDQogICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvciBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksICJObyBtb2R1bGUgbmFtZWQgJ3NkYXNmYXNmYXNkZiciKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyBmYWlsZWQgdG8gcmFpc2UgSW1wb3J0RXJyb3IiKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgd2hlbiB0aGUgbW9kdWxlIGNhbiBiZSBmb3VuZCwgYnV0IG5vdCB0aGUgYXR0cmlidXRlPw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lc19fdW5rbm93bl9hdHRyX25hbWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZXMoWyd1bml0dGVzdC5zZGFzZmFzZmFzZGYnLCAndW5pdHRlc3QnXSkNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGU6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihlKSwgIidtb2R1bGUnIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICdzZGFzZmFzZmFzZGYnIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZXMgZmFpbGVkIHRvIHJhaXNlIEF0dHJpYnV0ZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIyAuLi4NCiAgICAjICJUaGUgbWV0aG9kIG9wdGlvbmFsbHkgcmVzb2x2ZXMgbmFtZSByZWxhdGl2ZSB0byB0aGUgZ2l2ZW4gbW9kdWxlIg0KICAgICMNCiAgICAjIFdoYXQgaGFwcGVucyB3aGVuIGdpdmVuIGFuIHVua25vd24gYXR0cmlidXRlIG9uIGEgc3BlY2lmaWVkIGBtb2R1bGVgDQogICAgIyBhcmd1bWVudD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3Vua25vd25fbmFtZV9yZWxhdGl2ZV8xKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnc2Rhc2Zhc2Zhc2RmJ10sIHVuaXR0ZXN0KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKGUpLCAiJ21vZHVsZScgb2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgJ3NkYXNmYXNmYXNkZiciKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lIGZhaWxlZCB0byByYWlzZSBBdHRyaWJ1dGVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSBlaXRoZXIgdG8NCiAgICAjIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYSBUZXN0U3VpdGUgaW5zdGFuY2UsIGEgdGVzdCBtZXRob2QNCiAgICAjIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhDQogICAgIyBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UuIg0KICAgICMgLi4uDQogICAgIyAiVGhlIG1ldGhvZCBvcHRpb25hbGx5IHJlc29sdmVzIG5hbWUgcmVsYXRpdmUgdG8gdGhlIGdpdmVuIG1vZHVsZSINCiAgICAjDQogICAgIyBEbyB1bmtub3duIGF0dHJpYnV0ZXMgKHJlbGF0aXZlIHRvIGEgcHJvdmlkZWQgbW9kdWxlKSBzdGlsbCByYWlzZSBhbg0KICAgICMgZXhjZXB0aW9uIGV2ZW4gaW4gdGhlIHByZXNlbmNlIG9mIHZhbGlkIGF0dHJpYnV0ZSBuYW1lcz8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3Vua25vd25fbmFtZV9yZWxhdGl2ZV8yKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnVGVzdENhc2UnLCAnc2Rhc2Zhc2Zhc2RmJ10sIHVuaXR0ZXN0KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKGUpLCAiJ21vZHVsZScgb2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgJ3NkYXNmYXNmYXNkZiciKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lIGZhaWxlZCB0byByYWlzZSBBdHRyaWJ1dGVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSBlaXRoZXIgdG8NCiAgICAjIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYSBUZXN0U3VpdGUgaW5zdGFuY2UsIGEgdGVzdCBtZXRob2QNCiAgICAjIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhDQogICAgIyBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UuIg0KICAgICMgLi4uDQogICAgIyAiVGhlIG1ldGhvZCBvcHRpb25hbGx5IHJlc29sdmVzIG5hbWUgcmVsYXRpdmUgdG8gdGhlIGdpdmVuIG1vZHVsZSINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgd2hlbiBmYWNlZCB3aXRoIHRoZSBlbXB0eSBzdHJpbmc/DQogICAgIw0KICAgICMgWFhYIFRoaXMgY3VycmVudGx5IHJhaXNlcyBBdHRyaWJ1dGVFcnJvciwgdGhvdWdoIFZhbHVlRXJyb3IgaXMgcHJvYmFibHkNCiAgICAjIG1vcmUgYXBwcm9wcmlhdGUNCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3JlbGF0aXZlX2VtcHR5X25hbWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZXMoWycnXSwgdW5pdHRlc3QpDQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiRmFpbGVkIHRvIHJhaXNlIFZhbHVlRXJyb3IiKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjIC4uLg0KICAgICMgIlRoZSBtZXRob2Qgb3B0aW9uYWxseSByZXNvbHZlcyBuYW1lIHJlbGF0aXZlIHRvIHRoZSBnaXZlbiBtb2R1bGUiDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIHdoZW4gcHJlc2VudGVkIHdpdGggYW4gaW1wb3NzaWJsZSBhdHRyaWJ1dGUgbmFtZT8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3JlbGF0aXZlX21hbGZvcm1lZF9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICAjIFhYWCBTaG91bGQgdGhpcyByYWlzZSBBdHRyaWJ1dGVFcnJvciBvciBWYWx1ZUVycm9yPw0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnYWJjICgpIC8vJ10sIHVuaXR0ZXN0KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyBmYWlsZWQgdG8gcmFpc2UgVmFsdWVFcnJvciIpDQoNCiAgICAjICJUaGUgbWV0aG9kIG9wdGlvbmFsbHkgcmVzb2x2ZXMgbmFtZSByZWxhdGl2ZSB0byB0aGUgZ2l2ZW4gbW9kdWxlIg0KICAgICMNCiAgICAjIERvZXMgbG9hZFRlc3RzRnJvbU5hbWVzKCkgbWFrZSBzdXJlIHRoZSBwcm92aWRlZCBgbW9kdWxlYCBpcyBpbiBmYWN0DQogICAgIyBhIG1vZHVsZT8NCiAgICAjDQogICAgIyBYWFggVGhpcyB2YWxpZGF0aW9uIGlzIGN1cnJlbnRseSBub3QgZG9uZS4gVGhpcyBmbGV4aWJpbGl0eSBzaG91bGQNCiAgICAjIGVpdGhlciBiZSBkb2N1bWVudGVkIG9yIGEgVHlwZUVycm9yIHNob3VsZCBiZSByYWlzZWQuDQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19yZWxhdGl2ZV9ub3RfYV9tb2R1bGUoc2VsZik6DQogICAgICAgIGNsYXNzIE15VGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIE5vdEFNb2R1bGUob2JqZWN0KToNCiAgICAgICAgICAgIHRlc3RfMiA9IE15VGVzdENhc2UNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsndGVzdF8yJ10sIE5vdEFNb2R1bGUpDQoNCiAgICAgICAgcmVmZXJlbmNlID0gW3VuaXR0ZXN0LlRlc3RTdWl0ZShbTXlUZXN0Q2FzZSgndGVzdCcpXSldDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIHJlZmVyZW5jZSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIw0KICAgICMgRG9lcyBpdCByYWlzZSBhbiBleGNlcHRpb24gaWYgdGhlIG5hbWUgcmVzb2x2ZXMgdG8gYW4gaW52YWxpZA0KICAgICMgb2JqZWN0Pw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lc19fcmVsYXRpdmVfYmFkX29iamVjdChzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBtLnRlc3RjYXNlXzEgPSBvYmplY3QoKQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsndGVzdGNhc2VfMSddLCBtKQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJTaG91bGQgaGF2ZSByYWlzZWQgVHlwZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0bw0KICAgICMgLi4uIGEgdGVzdCBjYXNlIGNsYXNzIg0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lc19fcmVsYXRpdmVfVGVzdENhc2Vfc3ViY2xhc3Moc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgTXlUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIG0udGVzdGNhc2VfMSA9IE15VGVzdENhc2UNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsndGVzdGNhc2VfMSddLCBtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KDQogICAgICAgIGV4cGVjdGVkID0gbG9hZGVyLnN1aXRlQ2xhc3MoW015VGVzdENhc2UoJ3Rlc3QnKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtleHBlY3RlZF0pDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSAuLi4gdG8NCiAgICAjIC4uLiBhIFRlc3RTdWl0ZSBpbnN0YW5jZSINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3JlbGF0aXZlX1Rlc3RTdWl0ZShzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBjbGFzcyBNeVRlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbS50ZXN0c3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW015VGVzdENhc2UoJ3Rlc3QnKV0pDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbJ3Rlc3RzdWl0ZSddLCBtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFttLnRlc3RzdWl0ZV0pDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSAuLi4gdG8gLi4uIGENCiAgICAjIHRlc3QgbWV0aG9kIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcyINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3JlbGF0aXZlX3Rlc3RtZXRob2Qoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgTXlUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIG0udGVzdGNhc2VfMSA9IE15VGVzdENhc2UNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsndGVzdGNhc2VfMS50ZXN0J10sIG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQoNCiAgICAgICAgcmVmX3N1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtNeVRlc3RDYXNlKCd0ZXN0JyldKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbcmVmX3N1aXRlXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0byAuLi4gYQ0KICAgICMgdGVzdCBtZXRob2Qgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzIg0KICAgICMNCiAgICAjIERvZXMgdGhlIG1ldGhvZCBncmFjZWZ1bGx5IGhhbmRsZSBuYW1lcyB0aGF0IGluaXRpYWxseSBsb29rIGxpa2UgdGhleQ0KICAgICMgcmVzb2x2ZSB0byAiYSB0ZXN0IG1ldGhvZCB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MiIGJ1dCBkb24ndD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3JlbGF0aXZlX2ludmFsaWRfdGVzdG1ldGhvZChzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBjbGFzcyBNeVRlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbS50ZXN0Y2FzZV8xID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsndGVzdGNhc2VfMS50ZXN0Zm9vJ10sIG0pDQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksICJ0eXBlIG9iamVjdCAnTXlUZXN0Q2FzZScgaGFzIG5vIGF0dHJpYnV0ZSAndGVzdGZvbyciKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJGYWlsZWQgdG8gcmFpc2UgQXR0cmlidXRlRXJyb3IiKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgLi4uIHRvDQogICAgIyAuLi4gYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhIC4uLiBUZXN0U3VpdGUgaW5zdGFuY2UiDQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19jYWxsYWJsZV9fVGVzdFN1aXRlKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIHRlc3RjYXNlXzEgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgdGVzdGNhc2VfMiA9IHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KICAgICAgICBkZWYgcmV0dXJuX1Rlc3RTdWl0ZSgpOg0KICAgICAgICAgICAgcmV0dXJuIHVuaXR0ZXN0LlRlc3RTdWl0ZShbdGVzdGNhc2VfMSwgdGVzdGNhc2VfMl0pDQogICAgICAgIG0ucmV0dXJuX1Rlc3RTdWl0ZSA9IHJldHVybl9UZXN0U3VpdGUNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsncmV0dXJuX1Rlc3RTdWl0ZSddLCBtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KDQogICAgICAgIGV4cGVjdGVkID0gdW5pdHRlc3QuVGVzdFN1aXRlKFt0ZXN0Y2FzZV8xLCB0ZXN0Y2FzZV8yXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW2V4cGVjdGVkXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0bw0KICAgICMgLi4uIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYSBUZXN0Q2FzZSAuLi4gaW5zdGFuY2UiDQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19jYWxsYWJsZV9fVGVzdENhc2VfaW5zdGFuY2Uoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgdGVzdGNhc2VfMSA9IHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KICAgICAgICBkZWYgcmV0dXJuX1Rlc3RDYXNlKCk6DQogICAgICAgICAgICByZXR1cm4gdGVzdGNhc2VfMQ0KICAgICAgICBtLnJldHVybl9UZXN0Q2FzZSA9IHJldHVybl9UZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZXMoWydyZXR1cm5fVGVzdENhc2UnXSwgbSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCg0KICAgICAgICByZWZfc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW3Rlc3RjYXNlXzFdKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbcmVmX3N1aXRlXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0bw0KICAgICMgLi4uIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYSBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UiDQogICAgIw0KICAgICMgQXJlIHN0YXRpY21ldGhvZHMgaGFuZGxlZCBjb3JyZWN0bHk/DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19jYWxsYWJsZV9fY2FsbF9zdGF0aWNtZXRob2Qoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgVGVzdDEodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHRlc3RjYXNlXzEgPSBUZXN0MSgndGVzdCcpDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgZm9vKCk6DQogICAgICAgICAgICAgICAgcmV0dXJuIHRlc3RjYXNlXzENCiAgICAgICAgbS5Gb28gPSBGb28NCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnRm9vLmZvbyddLCBtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KDQogICAgICAgIHJlZl9zdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbdGVzdGNhc2VfMV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtyZWZfc3VpdGVdKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgLi4uIHRvDQogICAgIyAuLi4gYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZSINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgd2hlbiB0aGUgY2FsbGFibGUgcmV0dXJucyBzb21ldGhpbmcgZWxzZT8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX2NhbGxhYmxlX193cm9uZ190eXBlKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGRlZiByZXR1cm5fd3JvbmcoKToNCiAgICAgICAgICAgIHJldHVybiA2DQogICAgICAgIG0ucmV0dXJuX3dyb25nID0gcmV0dXJuX3dyb25nDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbJ3JldHVybl93cm9uZyddLCBtKQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyBmYWlsZWQgdG8gcmFpc2UgVHlwZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgY2FuIHJlZmVyIHRvIG1vZHVsZXMgYW5kIHBhY2thZ2VzIHdoaWNoIGhhdmUgbm90IGJlZW4NCiAgICAjIGltcG9ydGVkOyB0aGV5IHdpbGwgYmUgaW1wb3J0ZWQgYXMgYSBzaWRlLWVmZmVjdCINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX21vZHVsZV9ub3RfbG9hZGVkKHNlbGYpOg0KICAgICAgICAjIFdlJ3JlIGdvaW5nIHRvIHRyeSB0byBsb2FkIHRoaXMgbW9kdWxlIGFzIGEgc2lkZS1lZmZlY3QsIHNvIGl0DQogICAgICAgICMgYmV0dGVyIG5vdCBiZSBsb2FkZWQgYmVmb3JlIHdlIHRyeS4NCiAgICAgICAgIw0KICAgICAgICBtb2R1bGVfbmFtZSA9ICd1bml0dGVzdC50ZXN0LmR1bW15Jw0KICAgICAgICBzeXMubW9kdWxlcy5wb3AobW9kdWxlX25hbWUsIE5vbmUpDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbbW9kdWxlX25hbWVdKQ0KDQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW3VuaXR0ZXN0LlRlc3RTdWl0ZSgpXSkNCg0KICAgICAgICAgICAgIyBtb2R1bGUgc2hvdWxkIG5vdyBiZSBsb2FkZWQsIHRoYW5rcyB0byBsb2FkVGVzdHNGcm9tTmFtZSgpDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKG1vZHVsZV9uYW1lLCBzeXMubW9kdWxlcykNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGlmIG1vZHVsZV9uYW1lIGluIHN5cy5tb2R1bGVzOg0KICAgICAgICAgICAgICAgIGRlbCBzeXMubW9kdWxlc1ttb2R1bGVfbmFtZV0NCg0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAjIyMgL1Rlc3RzIGZvciBUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcygpDQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIuZ2V0VGVzdENhc2VOYW1lcygpDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgIyAiUmV0dXJuIGEgc29ydGVkIHNlcXVlbmNlIG9mIG1ldGhvZCBuYW1lcyBmb3VuZCB3aXRoaW4gdGVzdENhc2VDbGFzcyINCiAgICAjDQogICAgIyBUZXN0LmZvb2JhciBpcyBkZWZpbmVkIHRvIG1ha2Ugc3VyZSBnZXRUZXN0Q2FzZU5hbWVzKCkgcmVzcGVjdHMNCiAgICAjIGxvYWRlci50ZXN0TWV0aG9kUHJlZml4DQogICAgZGVmIHRlc3RfZ2V0VGVzdENhc2VOYW1lcyhzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgZm9vYmFyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIuZ2V0VGVzdENhc2VOYW1lcyhUZXN0KSwgWyd0ZXN0XzEnLCAndGVzdF8yJ10pDQoNCiAgICAjICJSZXR1cm4gYSBzb3J0ZWQgc2VxdWVuY2Ugb2YgbWV0aG9kIG5hbWVzIGZvdW5kIHdpdGhpbiB0ZXN0Q2FzZUNsYXNzIg0KICAgICMNCiAgICAjIERvZXMgZ2V0VGVzdENhc2VOYW1lcygpIGJlaGF2ZSBhcHByb3ByaWF0ZWx5IGlmIG5vIHRlc3RzIGFyZSBmb3VuZD8NCiAgICBkZWYgdGVzdF9nZXRUZXN0Q2FzZU5hbWVzX19ub190ZXN0cyhzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgZm9vYmFyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIuZ2V0VGVzdENhc2VOYW1lcyhUZXN0KSwgW10pDQoNCiAgICAjICJSZXR1cm4gYSBzb3J0ZWQgc2VxdWVuY2Ugb2YgbWV0aG9kIG5hbWVzIGZvdW5kIHdpdGhpbiB0ZXN0Q2FzZUNsYXNzIg0KICAgICMNCiAgICAjIEFyZSBub3QtVGVzdENhc2VzIGhhbmRsZWQgZ3JhY2VmdWxseT8NCiAgICAjDQogICAgIyBYWFggVGhpcyBzaG91bGQgcmFpc2UgYSBUeXBlRXJyb3IsIG5vdCByZXR1cm4gYSBsaXN0DQogICAgIw0KICAgICMgWFhYIEl0J3MgdG9vIGxhdGUgaW4gdGhlIDIuNSByZWxlYXNlIGN5Y2xlIHRvIGZpeCB0aGlzLCBidXQgaXQgc2hvdWxkDQogICAgIyBwcm9iYWJseSBiZSByZXZpc2l0ZWQgZm9yIDIuNg0KICAgIGRlZiB0ZXN0X2dldFRlc3RDYXNlTmFtZXNfX25vdF9hX1Rlc3RDYXNlKHNlbGYpOg0KICAgICAgICBjbGFzcyBCYWRDYXNlKGludCk6DQogICAgICAgICAgICBkZWYgdGVzdF9mb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBuYW1lcyA9IGxvYWRlci5nZXRUZXN0Q2FzZU5hbWVzKEJhZENhc2UpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChuYW1lcywgWyd0ZXN0X2ZvbyddKQ0KDQogICAgIyAiUmV0dXJuIGEgc29ydGVkIHNlcXVlbmNlIG9mIG1ldGhvZCBuYW1lcyBmb3VuZCB3aXRoaW4gdGVzdENhc2VDbGFzcyINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgaW5oZXJpdGVkIG5hbWVzIGFyZSBoYW5kbGVkLg0KICAgICMNCiAgICAjIFRlc3RQLmZvb2JhciBpcyBkZWZpbmVkIHRvIG1ha2Ugc3VyZSBnZXRUZXN0Q2FzZU5hbWVzKCkgcmVzcGVjdHMNCiAgICAjIGxvYWRlci50ZXN0TWV0aG9kUHJlZml4DQogICAgZGVmIHRlc3RfZ2V0VGVzdENhc2VOYW1lc19faW5oZXJpdGFuY2Uoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3RQKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29iYXIoc2VsZik6IHBhc3MNCg0KICAgICAgICBjbGFzcyBUZXN0QyhUZXN0UCk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8zKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgbmFtZXMgPSBbJ3Rlc3RfMScsICd0ZXN0XzInLCAndGVzdF8zJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIuZ2V0VGVzdENhc2VOYW1lcyhUZXN0QyksIG5hbWVzKQ0KDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICMjIyAvVGVzdHMgZm9yIFRlc3RMb2FkZXIuZ2V0VGVzdENhc2VOYW1lcygpDQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIudGVzdE1ldGhvZFByZWZpeA0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KICAgICMgIlN0cmluZyBnaXZpbmcgdGhlIHByZWZpeCBvZiBtZXRob2QgbmFtZXMgd2hpY2ggd2lsbCBiZSBpbnRlcnByZXRlZCBhcw0KICAgICMgdGVzdCBtZXRob2RzIg0KICAgICMNCiAgICAjIEltcGxpY2l0IGluIHRoZSBkb2N1bWVudGF0aW9uIGlzIHRoYXQgdGVzdE1ldGhvZFByZWZpeCBpcyByZXNwZWN0ZWQgYnkNCiAgICAjIGFsbCBsb2FkVGVzdHNGcm9tKiBtZXRob2RzLg0KICAgIGRlZiB0ZXN0X3Rlc3RNZXRob2RQcmVmaXhfX2xvYWRUZXN0c0Zyb21UZXN0Q2FzZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgdGVzdHNfMSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbRm9vKCdmb29fYmFyJyldKQ0KICAgICAgICB0ZXN0c18yID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfMScpLCBGb28oJ3Rlc3RfMicpXSkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnRlc3RNZXRob2RQcmVmaXggPSAnZm9vJw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoRm9vKSwgdGVzdHNfMSkNCg0KICAgICAgICBsb2FkZXIudGVzdE1ldGhvZFByZWZpeCA9ICd0ZXN0Jw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoRm9vKSwgdGVzdHNfMikNCg0KICAgICMgIlN0cmluZyBnaXZpbmcgdGhlIHByZWZpeCBvZiBtZXRob2QgbmFtZXMgd2hpY2ggd2lsbCBiZSBpbnRlcnByZXRlZCBhcw0KICAgICMgdGVzdCBtZXRob2RzIg0KICAgICMNCiAgICAjIEltcGxpY2l0IGluIHRoZSBkb2N1bWVudGF0aW9uIGlzIHRoYXQgdGVzdE1ldGhvZFByZWZpeCBpcyByZXNwZWN0ZWQgYnkNCiAgICAjIGFsbCBsb2FkVGVzdHNGcm9tKiBtZXRob2RzLg0KICAgIGRlZiB0ZXN0X3Rlc3RNZXRob2RQcmVmaXhfX2xvYWRUZXN0c0Zyb21Nb2R1bGUoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQogICAgICAgIG0uRm9vID0gRm9vDQoNCiAgICAgICAgdGVzdHNfMSA9IFt1bml0dGVzdC5UZXN0U3VpdGUoW0ZvbygnZm9vX2JhcicpXSldDQogICAgICAgIHRlc3RzXzIgPSBbdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfMScpLCBGb28oJ3Rlc3RfMicpXSldDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIGxvYWRlci50ZXN0TWV0aG9kUHJlZml4ID0gJ2ZvbycNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG0pKSwgdGVzdHNfMSkNCg0KICAgICAgICBsb2FkZXIudGVzdE1ldGhvZFByZWZpeCA9ICd0ZXN0Jw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3QobG9hZGVyLmxvYWRUZXN0c0Zyb21Nb2R1bGUobSkpLCB0ZXN0c18yKQ0KDQogICAgIyAiU3RyaW5nIGdpdmluZyB0aGUgcHJlZml4IG9mIG1ldGhvZCBuYW1lcyB3aGljaCB3aWxsIGJlIGludGVycHJldGVkIGFzDQogICAgIyB0ZXN0IG1ldGhvZHMiDQogICAgIw0KICAgICMgSW1wbGljaXQgaW4gdGhlIGRvY3VtZW50YXRpb24gaXMgdGhhdCB0ZXN0TWV0aG9kUHJlZml4IGlzIHJlc3BlY3RlZCBieQ0KICAgICMgYWxsIGxvYWRUZXN0c0Zyb20qIG1ldGhvZHMuDQogICAgZGVmIHRlc3RfdGVzdE1ldGhvZFByZWZpeF9fbG9hZFRlc3RzRnJvbU5hbWUoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQogICAgICAgIG0uRm9vID0gRm9vDQoNCiAgICAgICAgdGVzdHNfMSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbRm9vKCdmb29fYmFyJyldKQ0KICAgICAgICB0ZXN0c18yID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfMScpLCBGb28oJ3Rlc3RfMicpXSkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnRlc3RNZXRob2RQcmVmaXggPSAnZm9vJw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgnRm9vJywgbSksIHRlc3RzXzEpDQoNCiAgICAgICAgbG9hZGVyLnRlc3RNZXRob2RQcmVmaXggPSAndGVzdCcNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJ0ZvbycsIG0pLCB0ZXN0c18yKQ0KDQogICAgIyAiU3RyaW5nIGdpdmluZyB0aGUgcHJlZml4IG9mIG1ldGhvZCBuYW1lcyB3aGljaCB3aWxsIGJlIGludGVycHJldGVkIGFzDQogICAgIyB0ZXN0IG1ldGhvZHMiDQogICAgIw0KICAgICMgSW1wbGljaXQgaW4gdGhlIGRvY3VtZW50YXRpb24gaXMgdGhhdCB0ZXN0TWV0aG9kUHJlZml4IGlzIHJlc3BlY3RlZCBieQ0KICAgICMgYWxsIGxvYWRUZXN0c0Zyb20qIG1ldGhvZHMuDQogICAgZGVmIHRlc3RfdGVzdE1ldGhvZFByZWZpeF9fbG9hZFRlc3RzRnJvbU5hbWVzKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgZm9vX2JhcihzZWxmKTogcGFzcw0KICAgICAgICBtLkZvbyA9IEZvbw0KDQogICAgICAgIHRlc3RzXzEgPSB1bml0dGVzdC5UZXN0U3VpdGUoW3VuaXR0ZXN0LlRlc3RTdWl0ZShbRm9vKCdmb29fYmFyJyldKV0pDQogICAgICAgIHRlc3RzXzIgPSB1bml0dGVzdC5UZXN0U3VpdGUoW0ZvbygndGVzdF8xJyksIEZvbygndGVzdF8yJyldKQ0KICAgICAgICB0ZXN0c18yID0gdW5pdHRlc3QuVGVzdFN1aXRlKFt0ZXN0c18yXSkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnRlc3RNZXRob2RQcmVmaXggPSAnZm9vJw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZXMoWydGb28nXSwgbSksIHRlc3RzXzEpDQoNCiAgICAgICAgbG9hZGVyLnRlc3RNZXRob2RQcmVmaXggPSAndGVzdCcNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnRm9vJ10sIG0pLCB0ZXN0c18yKQ0KDQogICAgIyAiVGhlIGRlZmF1bHQgdmFsdWUgaXMgJ3Rlc3QnIg0KICAgIGRlZiB0ZXN0X3Rlc3RNZXRob2RQcmVmaXhfX2RlZmF1bHRfdmFsdWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci50ZXN0TWV0aG9kUHJlZml4LCAndGVzdCcpDQoNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyMjIC9UZXN0cyBmb3IgVGVzdExvYWRlci50ZXN0TWV0aG9kUHJlZml4DQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIuc29ydFRlc3RNZXRob2RzVXNpbmcNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiAgICAjICJGdW5jdGlvbiB0byBiZSB1c2VkIHRvIGNvbXBhcmUgbWV0aG9kIG5hbWVzIHdoZW4gc29ydGluZyB0aGVtIGluDQogICAgIyBnZXRUZXN0Q2FzZU5hbWVzKCkgYW5kIGFsbCB0aGUgbG9hZFRlc3RzRnJvbVgoKSBtZXRob2RzIg0KICAgIGRlZiB0ZXN0X3NvcnRUZXN0TWV0aG9kc1VzaW5nX19sb2FkVGVzdHNGcm9tVGVzdENhc2Uoc2VsZik6DQogICAgICAgIGRlZiByZXZlcnNlZF9jbXAoeCwgeSk6DQogICAgICAgICAgICByZXR1cm4gLSgoeCA+IHkpIC0gKHggPCB5KSkNCg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RfMShzZWxmKTogcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3RfMihzZWxmKTogcGFzcw0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBsb2FkZXIuc29ydFRlc3RNZXRob2RzVXNpbmcgPSByZXZlcnNlZF9jbXANCg0KICAgICAgICB0ZXN0cyA9IGxvYWRlci5zdWl0ZUNsYXNzKFtGb28oJ3Rlc3RfMicpLCBGb28oJ3Rlc3RfMScpXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIubG9hZFRlc3RzRnJvbVRlc3RDYXNlKEZvbyksIHRlc3RzKQ0KDQogICAgIyAiRnVuY3Rpb24gdG8gYmUgdXNlZCB0byBjb21wYXJlIG1ldGhvZCBuYW1lcyB3aGVuIHNvcnRpbmcgdGhlbSBpbg0KICAgICMgZ2V0VGVzdENhc2VOYW1lcygpIGFuZCBhbGwgdGhlIGxvYWRUZXN0c0Zyb21YKCkgbWV0aG9kcyINCiAgICBkZWYgdGVzdF9zb3J0VGVzdE1ldGhvZHNVc2luZ19fbG9hZFRlc3RzRnJvbU1vZHVsZShzZWxmKToNCiAgICAgICAgZGVmIHJldmVyc2VkX2NtcCh4LCB5KToNCiAgICAgICAgICAgIHJldHVybiAtKCh4ID4geSkgLSAoeCA8IHkpKQ0KDQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgbS5Gb28gPSBGb28NCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnNvcnRUZXN0TWV0aG9kc1VzaW5nID0gcmV2ZXJzZWRfY21wDQoNCiAgICAgICAgdGVzdHMgPSBbbG9hZGVyLnN1aXRlQ2xhc3MoW0ZvbygndGVzdF8yJyksIEZvbygndGVzdF8xJyldKV0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG0pKSwgdGVzdHMpDQoNCiAgICAjICJGdW5jdGlvbiB0byBiZSB1c2VkIHRvIGNvbXBhcmUgbWV0aG9kIG5hbWVzIHdoZW4gc29ydGluZyB0aGVtIGluDQogICAgIyBnZXRUZXN0Q2FzZU5hbWVzKCkgYW5kIGFsbCB0aGUgbG9hZFRlc3RzRnJvbVgoKSBtZXRob2RzIg0KICAgIGRlZiB0ZXN0X3NvcnRUZXN0TWV0aG9kc1VzaW5nX19sb2FkVGVzdHNGcm9tTmFtZShzZWxmKToNCiAgICAgICAgZGVmIHJldmVyc2VkX2NtcCh4LCB5KToNCiAgICAgICAgICAgIHJldHVybiAtKCh4ID4geSkgLSAoeCA8IHkpKQ0KDQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgbS5Gb28gPSBGb28NCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnNvcnRUZXN0TWV0aG9kc1VzaW5nID0gcmV2ZXJzZWRfY21wDQoNCiAgICAgICAgdGVzdHMgPSBsb2FkZXIuc3VpdGVDbGFzcyhbRm9vKCd0ZXN0XzInKSwgRm9vKCd0ZXN0XzEnKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lKCdGb28nLCBtKSwgdGVzdHMpDQoNCiAgICAjICJGdW5jdGlvbiB0byBiZSB1c2VkIHRvIGNvbXBhcmUgbWV0aG9kIG5hbWVzIHdoZW4gc29ydGluZyB0aGVtIGluDQogICAgIyBnZXRUZXN0Q2FzZU5hbWVzKCkgYW5kIGFsbCB0aGUgbG9hZFRlc3RzRnJvbVgoKSBtZXRob2RzIg0KICAgIGRlZiB0ZXN0X3NvcnRUZXN0TWV0aG9kc1VzaW5nX19sb2FkVGVzdHNGcm9tTmFtZXMoc2VsZik6DQogICAgICAgIGRlZiByZXZlcnNlZF9jbXAoeCwgeSk6DQogICAgICAgICAgICByZXR1cm4gLSgoeCA+IHkpIC0gKHggPCB5KSkNCg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQogICAgICAgIG0uRm9vID0gRm9vDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIGxvYWRlci5zb3J0VGVzdE1ldGhvZHNVc2luZyA9IHJldmVyc2VkX2NtcA0KDQogICAgICAgIHRlc3RzID0gW2xvYWRlci5zdWl0ZUNsYXNzKFtGb28oJ3Rlc3RfMicpLCBGb28oJ3Rlc3RfMScpXSldDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnRm9vJ10sIG0pKSwgdGVzdHMpDQoNCiAgICAjICJGdW5jdGlvbiB0byBiZSB1c2VkIHRvIGNvbXBhcmUgbWV0aG9kIG5hbWVzIHdoZW4gc29ydGluZyB0aGVtIGluDQogICAgIyBnZXRUZXN0Q2FzZU5hbWVzKCkiDQogICAgIw0KICAgICMgRG9lcyBpdCBhY3R1YWxseSBhZmZlY3QgZ2V0VGVzdENhc2VOYW1lcygpPw0KICAgIGRlZiB0ZXN0X3NvcnRUZXN0TWV0aG9kc1VzaW5nX19nZXRUZXN0Q2FzZU5hbWVzKHNlbGYpOg0KICAgICAgICBkZWYgcmV2ZXJzZWRfY21wKHgsIHkpOg0KICAgICAgICAgICAgcmV0dXJuIC0oKHggPiB5KSAtICh4IDwgeSkpDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnNvcnRUZXN0TWV0aG9kc1VzaW5nID0gcmV2ZXJzZWRfY21wDQoNCiAgICAgICAgdGVzdF9uYW1lcyA9IFsndGVzdF8yJywgJ3Rlc3RfMSddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9hZGVyLmdldFRlc3RDYXNlTmFtZXMoRm9vKSwgdGVzdF9uYW1lcykNCg0KICAgICMgIlRoZSBkZWZhdWx0IHZhbHVlIGlzIHRoZSBidWlsdC1pbiBjbXAoKSBmdW5jdGlvbiINCiAgICAjIFNpbmNlIGNtcCBpcyBub3cgZGVmdW5jdCwgd2Ugc2ltcGx5IHZlcmlmeSB0aGF0IHRoZSByZXN1bHRzDQogICAgIyBvY2N1ciBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGV5IHdvdWxkIHdpdGggdGhlIGRlZmF1bHQgc29ydC4NCiAgICBkZWYgdGVzdF9zb3J0VGVzdE1ldGhvZHNVc2luZ19fZGVmYXVsdF92YWx1ZShzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzMoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCg0KICAgICAgICB0ZXN0X25hbWVzID0gWyd0ZXN0XzInLCAndGVzdF8zJywgJ3Rlc3RfMSddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9hZGVyLmdldFRlc3RDYXNlTmFtZXMoRm9vKSwgc29ydGVkKHRlc3RfbmFtZXMpKQ0KDQoNCiAgICAjICJpdCBjYW4gYmUgc2V0IHRvIE5vbmUgdG8gZGlzYWJsZSB0aGUgc29ydC4iDQogICAgIw0KICAgICMgWFhYIEhvdyBpcyB0aGlzIGRpZmZlcmVudCBmcm9tIHJlYXNzaWduaW5nIGNtcD8gQXJlIHRoZSB0ZXN0cyByZXR1cm5lZA0KICAgICMgaW4gYSByYW5kb20gb3JkZXIgb3Igc29tZXRoaW5nPyBUaGlzIGJlaGF2aW91ciBzaG91bGQgZGllDQogICAgZGVmIHRlc3Rfc29ydFRlc3RNZXRob2RzVXNpbmdfX05vbmUoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIGxvYWRlci5zb3J0VGVzdE1ldGhvZHNVc2luZyA9IE5vbmUNCg0KICAgICAgICB0ZXN0X25hbWVzID0gWyd0ZXN0XzInLCAndGVzdF8xJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzZXQobG9hZGVyLmdldFRlc3RDYXNlTmFtZXMoRm9vKSksIHNldCh0ZXN0X25hbWVzKSkNCg0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAjIyMgL1Rlc3RzIGZvciBUZXN0TG9hZGVyLnNvcnRUZXN0TWV0aG9kc1VzaW5nDQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIuc3VpdGVDbGFzcw0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KICAgICMgIkNhbGxhYmxlIG9iamVjdCB0aGF0IGNvbnN0cnVjdHMgYSB0ZXN0IHN1aXRlIGZyb20gYSBsaXN0IG9mIHRlc3RzLiINCiAgICBkZWYgdGVzdF9zdWl0ZUNsYXNzX19sb2FkVGVzdHNGcm9tVGVzdENhc2Uoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgZm9vX2JhcihzZWxmKTogcGFzcw0KDQogICAgICAgIHRlc3RzID0gW0ZvbygndGVzdF8xJyksIEZvbygndGVzdF8yJyldDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIGxvYWRlci5zdWl0ZUNsYXNzID0gbGlzdA0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoRm9vKSwgdGVzdHMpDQoNCiAgICAjIEl0IGlzIGltcGxpY2l0IGluIHRoZSBkb2N1bWVudGF0aW9uIGZvciBUZXN0TG9hZGVyLnN1aXRlQ2xhc3MgdGhhdA0KICAgICMgYWxsIFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbSogbWV0aG9kcyByZXNwZWN0IGl0LiBMZXQncyBtYWtlIHN1cmUNCiAgICBkZWYgdGVzdF9zdWl0ZUNsYXNzX19sb2FkVGVzdHNGcm9tTW9kdWxlKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgZm9vX2JhcihzZWxmKTogcGFzcw0KICAgICAgICBtLkZvbyA9IEZvbw0KDQogICAgICAgIHRlc3RzID0gW1tGb28oJ3Rlc3RfMScpLCBGb28oJ3Rlc3RfMicpXV0NCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnN1aXRlQ2xhc3MgPSBsaXN0DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9hZGVyLmxvYWRUZXN0c0Zyb21Nb2R1bGUobSksIHRlc3RzKQ0KDQogICAgIyBJdCBpcyBpbXBsaWNpdCBpbiB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgVGVzdExvYWRlci5zdWl0ZUNsYXNzIHRoYXQNCiAgICAjIGFsbCBUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb20qIG1ldGhvZHMgcmVzcGVjdCBpdC4gTGV0J3MgbWFrZSBzdXJlDQogICAgZGVmIHRlc3Rfc3VpdGVDbGFzc19fbG9hZFRlc3RzRnJvbU5hbWUoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQogICAgICAgIG0uRm9vID0gRm9vDQoNCiAgICAgICAgdGVzdHMgPSBbRm9vKCd0ZXN0XzEnKSwgRm9vKCd0ZXN0XzInKV0NCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnN1aXRlQ2xhc3MgPSBsaXN0DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lKCdGb28nLCBtKSwgdGVzdHMpDQoNCiAgICAjIEl0IGlzIGltcGxpY2l0IGluIHRoZSBkb2N1bWVudGF0aW9uIGZvciBUZXN0TG9hZGVyLnN1aXRlQ2xhc3MgdGhhdA0KICAgICMgYWxsIFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbSogbWV0aG9kcyByZXNwZWN0IGl0LiBMZXQncyBtYWtlIHN1cmUNCiAgICBkZWYgdGVzdF9zdWl0ZUNsYXNzX19sb2FkVGVzdHNGcm9tTmFtZXMoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQogICAgICAgIG0uRm9vID0gRm9vDQoNCiAgICAgICAgdGVzdHMgPSBbW0ZvbygndGVzdF8xJyksIEZvbygndGVzdF8yJyldXQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBsb2FkZXIuc3VpdGVDbGFzcyA9IGxpc3QNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnRm9vJ10sIG0pLCB0ZXN0cykNCg0KICAgICMgIlRoZSBkZWZhdWx0IHZhbHVlIGlzIHRoZSBUZXN0U3VpdGUgY2xhc3MiDQogICAgZGVmIHRlc3Rfc3VpdGVDbGFzc19fZGVmYXVsdF92YWx1ZShzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShsb2FkZXIuc3VpdGVDbGFzcyBpcyB1bml0dGVzdC5UZXN0U3VpdGUpDQo=',
'/Lib/unittest/test/test_discovery.py':'aW1wb3J0IG9zDQppbXBvcnQgcmUNCmltcG9ydCBzeXMNCg0KaW1wb3J0IHVuaXR0ZXN0DQoNCg0KY2xhc3MgVGVzdGFibGVUZXN0UHJvZ3JhbSh1bml0dGVzdC5UZXN0UHJvZ3JhbSk6DQogICAgbW9kdWxlID0gJ19fbWFpbl9fJw0KICAgIGV4aXQgPSBUcnVlDQogICAgZGVmYXVsdFRlc3QgPSBmYWlsZmFzdCA9IGNhdGNoYnJlYWsgPSBidWZmZXIgPSBOb25lDQogICAgdmVyYm9zaXR5ID0gMQ0KICAgIHByb2dOYW1lID0gJycNCiAgICB0ZXN0UnVubmVyID0gdGVzdExvYWRlciA9IE5vbmUNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKToNCiAgICAgICAgcGFzcw0KDQoNCmNsYXNzIFRlc3REaXNjb3ZlcnkodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgIyBIZWF2aWx5IG1vY2tlZCB0ZXN0cyBzbyBJIGNhbiBhdm9pZCBoaXR0aW5nIHRoZSBmaWxlc3lzdGVtDQogICAgZGVmIHRlc3RfZ2V0X25hbWVfZnJvbV9wYXRoKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLl90b3BfbGV2ZWxfZGlyID0gJy9mb28nDQogICAgICAgIG5hbWUgPSBsb2FkZXIuX2dldF9uYW1lX2Zyb21fcGF0aCgnL2Zvby9iYXIvYmF6LnB5JykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChuYW1lLCAnYmFyLmJheicpDQoNCiAgICAgICAgaWYgbm90IF9fZGVidWdfXzoNCiAgICAgICAgICAgICMgYXNzZXJ0cyBhcmUgb2ZmDQogICAgICAgICAgICByZXR1cm4NCg0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKEFzc2VydGlvbkVycm9yKToNCiAgICAgICAgICAgIGxvYWRlci5fZ2V0X25hbWVfZnJvbV9wYXRoKCcvYmFyL2Jhei5weScpDQoNCiAgICBkZWYgdGVzdF9maW5kX3Rlc3RzKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICBvcmlnaW5hbF9saXN0ZGlyID0gb3MubGlzdGRpcg0KICAgICAgICBkZWYgcmVzdG9yZV9saXN0ZGlyKCk6DQogICAgICAgICAgICBvcy5saXN0ZGlyID0gb3JpZ2luYWxfbGlzdGRpcg0KICAgICAgICBvcmlnaW5hbF9pc2ZpbGUgPSBvcy5wYXRoLmlzZmlsZQ0KICAgICAgICBkZWYgcmVzdG9yZV9pc2ZpbGUoKToNCiAgICAgICAgICAgIG9zLnBhdGguaXNmaWxlID0gb3JpZ2luYWxfaXNmaWxlDQogICAgICAgIG9yaWdpbmFsX2lzZGlyID0gb3MucGF0aC5pc2Rpcg0KICAgICAgICBkZWYgcmVzdG9yZV9pc2RpcigpOg0KICAgICAgICAgICAgb3MucGF0aC5pc2RpciA9IG9yaWdpbmFsX2lzZGlyDQoNCiAgICAgICAgcGF0aF9saXN0cyA9IFtbJ3Rlc3QxLnB5JywgJ3Rlc3QyLnB5JywgJ25vdF9hX3Rlc3QucHknLCAndGVzdF9kaXInLA0KICAgICAgICAgICAgICAgICAgICAgICAndGVzdC5mb28nLCAndGVzdC1ub3QtYS1tb2R1bGUucHknLCAnYW5vdGhlcl9kaXInXSwNCiAgICAgICAgICAgICAgICAgICAgICBbJ3Rlc3QzLnB5JywgJ3Rlc3Q0LnB5JywgXV0NCiAgICAgICAgb3MubGlzdGRpciA9IGxhbWJkYSBwYXRoOiBwYXRoX2xpc3RzLnBvcCgwKQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZV9saXN0ZGlyKQ0KDQogICAgICAgIGRlZiBpc2RpcihwYXRoKToNCiAgICAgICAgICAgIHJldHVybiBwYXRoLmVuZHN3aXRoKCdkaXInKQ0KICAgICAgICBvcy5wYXRoLmlzZGlyID0gaXNkaXINCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHJlc3RvcmVfaXNkaXIpDQoNCiAgICAgICAgZGVmIGlzZmlsZShwYXRoKToNCiAgICAgICAgICAgICMgYW5vdGhlcl9kaXIgaXMgbm90IGEgcGFja2FnZSBhbmQgc28gc2hvdWxkbid0IGJlIHJlY3Vyc2VkIGludG8NCiAgICAgICAgICAgIHJldHVybiBub3QgcGF0aC5lbmRzd2l0aCgnZGlyJykgYW5kIG5vdCAnYW5vdGhlcl9kaXInIGluIHBhdGgNCiAgICAgICAgb3MucGF0aC5pc2ZpbGUgPSBpc2ZpbGUNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHJlc3RvcmVfaXNmaWxlKQ0KDQogICAgICAgIGxvYWRlci5fZ2V0X21vZHVsZV9mcm9tX25hbWUgPSBsYW1iZGEgcGF0aDogcGF0aCArICcgbW9kdWxlJw0KICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU1vZHVsZSA9IGxhbWJkYSBtb2R1bGU6IG1vZHVsZSArICcgdGVzdHMnDQoNCiAgICAgICAgdG9wX2xldmVsID0gb3MucGF0aC5hYnNwYXRoKCcvZm9vJykNCiAgICAgICAgbG9hZGVyLl90b3BfbGV2ZWxfZGlyID0gdG9wX2xldmVsDQogICAgICAgIHN1aXRlID0gbGlzdChsb2FkZXIuX2ZpbmRfdGVzdHModG9wX2xldmVsLCAndGVzdCoucHknKSkNCg0KICAgICAgICBleHBlY3RlZCA9IFtuYW1lICsgJyBtb2R1bGUgdGVzdHMnIGZvciBuYW1lIGluDQogICAgICAgICAgICAgICAgICAgICgndGVzdDEnLCAndGVzdDInKV0NCiAgICAgICAgZXhwZWN0ZWQuZXh0ZW5kKFsoJ3Rlc3RfZGlyLiVzJyAlIG5hbWUpICsgJyBtb2R1bGUgdGVzdHMnIGZvciBuYW1lIGluDQogICAgICAgICAgICAgICAgICAgICgndGVzdDMnLCAndGVzdDQnKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUsIGV4cGVjdGVkKQ0KDQogICAgZGVmIHRlc3RfZmluZF90ZXN0c193aXRoX3BhY2thZ2Uoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIG9yaWdpbmFsX2xpc3RkaXIgPSBvcy5saXN0ZGlyDQogICAgICAgIGRlZiByZXN0b3JlX2xpc3RkaXIoKToNCiAgICAgICAgICAgIG9zLmxpc3RkaXIgPSBvcmlnaW5hbF9saXN0ZGlyDQogICAgICAgIG9yaWdpbmFsX2lzZmlsZSA9IG9zLnBhdGguaXNmaWxlDQogICAgICAgIGRlZiByZXN0b3JlX2lzZmlsZSgpOg0KICAgICAgICAgICAgb3MucGF0aC5pc2ZpbGUgPSBvcmlnaW5hbF9pc2ZpbGUNCiAgICAgICAgb3JpZ2luYWxfaXNkaXIgPSBvcy5wYXRoLmlzZGlyDQogICAgICAgIGRlZiByZXN0b3JlX2lzZGlyKCk6DQogICAgICAgICAgICBvcy5wYXRoLmlzZGlyID0gb3JpZ2luYWxfaXNkaXINCg0KICAgICAgICBkaXJlY3RvcmllcyA9IFsnYV9kaXJlY3RvcnknLCAndGVzdF9kaXJlY3RvcnknLCAndGVzdF9kaXJlY3RvcnkyJ10NCiAgICAgICAgcGF0aF9saXN0cyA9IFtkaXJlY3RvcmllcywgW10sIFtdLCBbXV0NCiAgICAgICAgb3MubGlzdGRpciA9IGxhbWJkYSBwYXRoOiBwYXRoX2xpc3RzLnBvcCgwKQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZV9saXN0ZGlyKQ0KDQogICAgICAgIG9zLnBhdGguaXNkaXIgPSBsYW1iZGEgcGF0aDogVHJ1ZQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZV9pc2RpcikNCg0KICAgICAgICBvcy5wYXRoLmlzZmlsZSA9IGxhbWJkYSBwYXRoOiBvcy5wYXRoLmJhc2VuYW1lKHBhdGgpIG5vdCBpbiBkaXJlY3Rvcmllcw0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZV9pc2ZpbGUpDQoNCiAgICAgICAgY2xhc3MgTW9kdWxlKG9iamVjdCk6DQogICAgICAgICAgICBwYXRocyA9IFtdDQogICAgICAgICAgICBsb2FkX3Rlc3RzX2FyZ3MgPSBbXQ0KDQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgcGF0aCk6DQogICAgICAgICAgICAgICAgc2VsZi5wYXRoID0gcGF0aA0KICAgICAgICAgICAgICAgIHNlbGYucGF0aHMuYXBwZW5kKHBhdGgpDQogICAgICAgICAgICAgICAgaWYgb3MucGF0aC5iYXNlbmFtZShwYXRoKSA9PSAndGVzdF9kaXJlY3RvcnknOg0KICAgICAgICAgICAgICAgICAgICBkZWYgbG9hZF90ZXN0cyhsb2FkZXIsIHRlc3RzLCBwYXR0ZXJuKToNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZF90ZXN0c19hcmdzLmFwcGVuZCgobG9hZGVyLCB0ZXN0cywgcGF0dGVybikpDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2xvYWRfdGVzdHMnDQogICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZF90ZXN0cyA9IGxvYWRfdGVzdHMNCg0KICAgICAgICAgICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6DQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGF0aCA9PSBvdGhlci5wYXRoDQoNCiAgICAgICAgbG9hZGVyLl9nZXRfbW9kdWxlX2Zyb21fbmFtZSA9IGxhbWJkYSBuYW1lOiBNb2R1bGUobmFtZSkNCiAgICAgICAgZGVmIGxvYWRUZXN0c0Zyb21Nb2R1bGUobW9kdWxlLCB1c2VfbG9hZF90ZXN0cyk6DQogICAgICAgICAgICBpZiB1c2VfbG9hZF90ZXN0czoNCiAgICAgICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24oJ3VzZV9sb2FkX3Rlc3RzIHNob3VsZCBiZSBGYWxzZSBmb3IgcGFja2FnZXMnKQ0KICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5wYXRoICsgJyBtb2R1bGUgdGVzdHMnDQogICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlID0gbG9hZFRlc3RzRnJvbU1vZHVsZQ0KDQogICAgICAgIGxvYWRlci5fdG9wX2xldmVsX2RpciA9ICcvZm9vJw0KICAgICAgICAjIHRoaXMgdGltZSBubyAnLnB5JyBvbiB0aGUgcGF0dGVybiBzbyB0aGF0IGl0IGNhbiBtYXRjaA0KICAgICAgICAjIGEgdGVzdCBwYWNrYWdlDQogICAgICAgIHN1aXRlID0gbGlzdChsb2FkZXIuX2ZpbmRfdGVzdHMoJy9mb28nLCAndGVzdConKSkNCg0KICAgICAgICAjIFdlIHNob3VsZCBoYXZlIGxvYWRlZCB0ZXN0cyBmcm9tIHRoZSB0ZXN0X2RpcmVjdG9yeSBwYWNrYWdlIGJ5IGNhbGxpbmcgbG9hZF90ZXN0cw0KICAgICAgICAjIGFuZCBkaXJlY3RseSBmcm9tIHRoZSB0ZXN0X2RpcmVjdG9yeTIgcGFja2FnZQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIFsnbG9hZF90ZXN0cycsICd0ZXN0X2RpcmVjdG9yeTInICsgJyBtb2R1bGUgdGVzdHMnXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChNb2R1bGUucGF0aHMsIFsndGVzdF9kaXJlY3RvcnknLCAndGVzdF9kaXJlY3RvcnkyJ10pDQoNCiAgICAgICAgIyBsb2FkX3Rlc3RzIHNob3VsZCBoYXZlIGJlZW4gY2FsbGVkIG9uY2Ugd2l0aCBsb2FkZXIsIHRlc3RzIGFuZCBwYXR0ZXJuDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoTW9kdWxlLmxvYWRfdGVzdHNfYXJncywNCiAgICAgICAgICAgICAgICAgICAgICAgICBbKGxvYWRlciwgJ3Rlc3RfZGlyZWN0b3J5JyArICcgbW9kdWxlIHRlc3RzJywgJ3Rlc3QqJyldKQ0KDQogICAgZGVmIHRlc3RfZGlzY292ZXIoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIG9yaWdpbmFsX2lzZmlsZSA9IG9zLnBhdGguaXNmaWxlDQogICAgICAgIG9yaWdpbmFsX2lzZGlyID0gb3MucGF0aC5pc2Rpcg0KICAgICAgICBkZWYgcmVzdG9yZV9pc2ZpbGUoKToNCiAgICAgICAgICAgIG9zLnBhdGguaXNmaWxlID0gb3JpZ2luYWxfaXNmaWxlDQoNCiAgICAgICAgb3MucGF0aC5pc2ZpbGUgPSBsYW1iZGEgcGF0aDogRmFsc2UNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHJlc3RvcmVfaXNmaWxlKQ0KDQogICAgICAgIG9yaWdfc3lzX3BhdGggPSBzeXMucGF0aFs6XQ0KICAgICAgICBkZWYgcmVzdG9yZV9wYXRoKCk6DQogICAgICAgICAgICBzeXMucGF0aFs6XSA9IG9yaWdfc3lzX3BhdGgNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHJlc3RvcmVfcGF0aCkNCg0KICAgICAgICBmdWxsX3BhdGggPSBvcy5wYXRoLmFic3BhdGgob3MucGF0aC5ub3JtcGF0aCgnL2ZvbycpKQ0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKEltcG9ydEVycm9yKToNCiAgICAgICAgICAgIGxvYWRlci5kaXNjb3ZlcignL2Zvby9iYXInLCB0b3BfbGV2ZWxfZGlyPScvZm9vJykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5fdG9wX2xldmVsX2RpciwgZnVsbF9wYXRoKQ0KICAgICAgICBzZWxmLmFzc2VydEluKGZ1bGxfcGF0aCwgc3lzLnBhdGgpDQoNCiAgICAgICAgb3MucGF0aC5pc2ZpbGUgPSBsYW1iZGEgcGF0aDogVHJ1ZQ0KICAgICAgICBvcy5wYXRoLmlzZGlyID0gbGFtYmRhIHBhdGg6IFRydWUNCg0KICAgICAgICBkZWYgcmVzdG9yZV9pc2RpcigpOg0KICAgICAgICAgICAgb3MucGF0aC5pc2RpciA9IG9yaWdpbmFsX2lzZGlyDQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChyZXN0b3JlX2lzZGlyKQ0KDQogICAgICAgIF9maW5kX3Rlc3RzX2FyZ3MgPSBbXQ0KICAgICAgICBkZWYgX2ZpbmRfdGVzdHMoc3RhcnRfZGlyLCBwYXR0ZXJuKToNCiAgICAgICAgICAgIF9maW5kX3Rlc3RzX2FyZ3MuYXBwZW5kKChzdGFydF9kaXIsIHBhdHRlcm4pKQ0KICAgICAgICAgICAgcmV0dXJuIFsndGVzdHMnXQ0KICAgICAgICBsb2FkZXIuX2ZpbmRfdGVzdHMgPSBfZmluZF90ZXN0cw0KICAgICAgICBsb2FkZXIuc3VpdGVDbGFzcyA9IHN0cg0KDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmRpc2NvdmVyKCcvZm9vL2Jhci9iYXonLCAncGF0dGVybicsICcvZm9vL2JhcicpDQoNCiAgICAgICAgdG9wX2xldmVsX2RpciA9IG9zLnBhdGguYWJzcGF0aCgnL2Zvby9iYXInKQ0KICAgICAgICBzdGFydF9kaXIgPSBvcy5wYXRoLmFic3BhdGgoJy9mb28vYmFyL2JheicpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUsICJbJ3Rlc3RzJ10iKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5fdG9wX2xldmVsX2RpciwgdG9wX2xldmVsX2RpcikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChfZmluZF90ZXN0c19hcmdzLCBbKHN0YXJ0X2RpciwgJ3BhdHRlcm4nKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0SW4odG9wX2xldmVsX2Rpciwgc3lzLnBhdGgpDQoNCiAgICBkZWYgdGVzdF9kaXNjb3Zlcl93aXRoX21vZHVsZXNfdGhhdF9mYWlsX3RvX2ltcG9ydChzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgbGlzdGRpciA9IG9zLmxpc3RkaXINCiAgICAgICAgb3MubGlzdGRpciA9IGxhbWJkYSBfOiBbJ3Rlc3RfdGhpc19kb2VzX25vdF9leGlzdC5weSddDQogICAgICAgIGlzZmlsZSA9IG9zLnBhdGguaXNmaWxlDQogICAgICAgIG9zLnBhdGguaXNmaWxlID0gbGFtYmRhIF86IFRydWUNCiAgICAgICAgb3JpZ19zeXNfcGF0aCA9IHN5cy5wYXRoWzpdDQogICAgICAgIGRlZiByZXN0b3JlKCk6DQogICAgICAgICAgICBvcy5wYXRoLmlzZmlsZSA9IGlzZmlsZQ0KICAgICAgICAgICAgb3MubGlzdGRpciA9IGxpc3RkaXINCiAgICAgICAgICAgIHN5cy5wYXRoWzpdID0gb3JpZ19zeXNfcGF0aA0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZSkNCg0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5kaXNjb3ZlcignLicpDQogICAgICAgIHNlbGYuYXNzZXJ0SW4ob3MuZ2V0Y3dkKCksIHN5cy5wYXRoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLmNvdW50VGVzdENhc2VzKCksIDEpDQogICAgICAgIHRlc3QgPSBsaXN0KGxpc3Qoc3VpdGUpWzBdKVswXSAjIGV4dHJhY3QgdGVzdCBmcm9tIHN1aXRlDQoNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhJbXBvcnRFcnJvcik6DQogICAgICAgICAgICB0ZXN0LnRlc3RfdGhpc19kb2VzX25vdF9leGlzdCgpDQoNCiAgICBkZWYgdGVzdF9jb21tYW5kX2xpbmVfaGFuZGxpbmdfcGFyc2VBcmdzKHNlbGYpOg0KICAgICAgICBwcm9ncmFtID0gVGVzdGFibGVUZXN0UHJvZ3JhbSgpDQoNCiAgICAgICAgYXJncyA9IFtdDQogICAgICAgIGRlZiBkb19kaXNjb3ZlcnkoYXJndik6DQogICAgICAgICAgICBhcmdzLmV4dGVuZChhcmd2KQ0KICAgICAgICBwcm9ncmFtLl9kb19kaXNjb3ZlcnkgPSBkb19kaXNjb3ZlcnkNCiAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoWydzb21ldGhpbmcnLCAnZGlzY292ZXInXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzLCBbXSkNCg0KICAgICAgICBwcm9ncmFtLnBhcnNlQXJncyhbJ3NvbWV0aGluZycsICdkaXNjb3ZlcicsICdmb28nLCAnYmFyJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgWydmb28nLCAnYmFyJ10pDQoNCiAgICBkZWYgdGVzdF9jb21tYW5kX2xpbmVfaGFuZGxpbmdfZGlzY292ZXJfYnlfZGVmYXVsdChzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IFRlc3RhYmxlVGVzdFByb2dyYW0oKQ0KICAgICAgICBwcm9ncmFtLm1vZHVsZSA9IE5vbmUNCg0KICAgICAgICBzZWxmLmNhbGxlZCA9IEZhbHNlDQogICAgICAgIGRlZiBkb19kaXNjb3ZlcnkoYXJndik6DQogICAgICAgICAgICBzZWxmLmNhbGxlZCA9IFRydWUNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJndiwgW10pDQogICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeSA9IGRvX2Rpc2NvdmVyeQ0KICAgICAgICBwcm9ncmFtLnBhcnNlQXJncyhbJ3NvbWV0aGluZyddKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoc2VsZi5jYWxsZWQpDQoNCiAgICBkZWYgdGVzdF9jb21tYW5kX2xpbmVfaGFuZGxpbmdfZGlzY292ZXJfYnlfZGVmYXVsdF93aXRoX29wdGlvbnMoc2VsZik6DQogICAgICAgIHByb2dyYW0gPSBUZXN0YWJsZVRlc3RQcm9ncmFtKCkNCiAgICAgICAgcHJvZ3JhbS5tb2R1bGUgPSBOb25lDQoNCiAgICAgICAgYXJncyA9IFsnc29tZXRoaW5nJywgJy12JywgJy1iJywgJy12JywgJy1jJywgJy1mJ10NCiAgICAgICAgc2VsZi5jYWxsZWQgPSBGYWxzZQ0KICAgICAgICBkZWYgZG9fZGlzY292ZXJ5KGFyZ3YpOg0KICAgICAgICAgICAgc2VsZi5jYWxsZWQgPSBUcnVlDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3YsIGFyZ3NbMTpdKQ0KICAgICAgICBwcm9ncmFtLl9kb19kaXNjb3ZlcnkgPSBkb19kaXNjb3ZlcnkNCiAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoYXJncykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHNlbGYuY2FsbGVkKQ0KDQoNCiAgICBkZWYgdGVzdF9jb21tYW5kX2xpbmVfaGFuZGxpbmdfZG9fZGlzY292ZXJ5X3Rvb19tYW55X2FyZ3VtZW50cyhzZWxmKToNCiAgICAgICAgY2xhc3MgU3RvcChFeGNlcHRpb24pOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBkZWYgdXNhZ2VFeGl0KCk6DQogICAgICAgICAgICByYWlzZSBTdG9wDQoNCiAgICAgICAgcHJvZ3JhbSA9IFRlc3RhYmxlVGVzdFByb2dyYW0oKQ0KICAgICAgICBwcm9ncmFtLnVzYWdlRXhpdCA9IHVzYWdlRXhpdA0KDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoU3RvcCk6DQogICAgICAgICAgICAjIHRvbyBtYW55IGFyZ3MNCiAgICAgICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeShbJ29uZScsICd0d28nLCAndGhyZWUnLCAnZm91ciddKQ0KDQoNCiAgICBkZWYgdGVzdF9jb21tYW5kX2xpbmVfaGFuZGxpbmdfZG9fZGlzY292ZXJ5X2NhbGxzX2xvYWRlcihzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IFRlc3RhYmxlVGVzdFByb2dyYW0oKQ0KDQogICAgICAgIGNsYXNzIExvYWRlcihvYmplY3QpOg0KICAgICAgICAgICAgYXJncyA9IFtdDQogICAgICAgICAgICBkZWYgZGlzY292ZXIoc2VsZiwgc3RhcnRfZGlyLCBwYXR0ZXJuLCB0b3BfbGV2ZWxfZGlyKToNCiAgICAgICAgICAgICAgICBzZWxmLmFyZ3MuYXBwZW5kKChzdGFydF9kaXIsIHBhdHRlcm4sIHRvcF9sZXZlbF9kaXIpKQ0KICAgICAgICAgICAgICAgIHJldHVybiAndGVzdHMnDQoNCiAgICAgICAgcHJvZ3JhbS5fZG9fZGlzY292ZXJ5KFsnLXYnXSwgTG9hZGVyPUxvYWRlcikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnZlcmJvc2l0eSwgMikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnRlc3QsICd0ZXN0cycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoTG9hZGVyLmFyZ3MsIFsoJy4nLCAndGVzdCoucHknLCBOb25lKV0pDQoNCiAgICAgICAgTG9hZGVyLmFyZ3MgPSBbXQ0KICAgICAgICBwcm9ncmFtID0gVGVzdGFibGVUZXN0UHJvZ3JhbSgpDQogICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeShbJy0tdmVyYm9zZSddLCBMb2FkZXI9TG9hZGVyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdCwgJ3Rlc3RzJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChMb2FkZXIuYXJncywgWygnLicsICd0ZXN0Ki5weScsIE5vbmUpXSkNCg0KICAgICAgICBMb2FkZXIuYXJncyA9IFtdDQogICAgICAgIHByb2dyYW0gPSBUZXN0YWJsZVRlc3RQcm9ncmFtKCkNCiAgICAgICAgcHJvZ3JhbS5fZG9fZGlzY292ZXJ5KFtdLCBMb2FkZXI9TG9hZGVyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdCwgJ3Rlc3RzJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChMb2FkZXIuYXJncywgWygnLicsICd0ZXN0Ki5weScsIE5vbmUpXSkNCg0KICAgICAgICBMb2FkZXIuYXJncyA9IFtdDQogICAgICAgIHByb2dyYW0gPSBUZXN0YWJsZVRlc3RQcm9ncmFtKCkNCiAgICAgICAgcHJvZ3JhbS5fZG9fZGlzY292ZXJ5KFsnZmlzaCddLCBMb2FkZXI9TG9hZGVyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdCwgJ3Rlc3RzJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChMb2FkZXIuYXJncywgWygnZmlzaCcsICd0ZXN0Ki5weScsIE5vbmUpXSkNCg0KICAgICAgICBMb2FkZXIuYXJncyA9IFtdDQogICAgICAgIHByb2dyYW0gPSBUZXN0YWJsZVRlc3RQcm9ncmFtKCkNCiAgICAgICAgcHJvZ3JhbS5fZG9fZGlzY292ZXJ5KFsnZmlzaCcsICdlZ2dzJ10sIExvYWRlcj1Mb2FkZXIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJvZ3JhbS50ZXN0LCAndGVzdHMnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKExvYWRlci5hcmdzLCBbKCdmaXNoJywgJ2VnZ3MnLCBOb25lKV0pDQoNCiAgICAgICAgTG9hZGVyLmFyZ3MgPSBbXQ0KICAgICAgICBwcm9ncmFtID0gVGVzdGFibGVUZXN0UHJvZ3JhbSgpDQogICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeShbJ2Zpc2gnLCAnZWdncycsICdoYW0nXSwgTG9hZGVyPUxvYWRlcikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnRlc3QsICd0ZXN0cycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoTG9hZGVyLmFyZ3MsIFsoJ2Zpc2gnLCAnZWdncycsICdoYW0nKV0pDQoNCiAgICAgICAgTG9hZGVyLmFyZ3MgPSBbXQ0KICAgICAgICBwcm9ncmFtID0gVGVzdGFibGVUZXN0UHJvZ3JhbSgpDQogICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeShbJy1zJywgJ2Zpc2gnXSwgTG9hZGVyPUxvYWRlcikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnRlc3QsICd0ZXN0cycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoTG9hZGVyLmFyZ3MsIFsoJ2Zpc2gnLCAndGVzdCoucHknLCBOb25lKV0pDQoNCiAgICAgICAgTG9hZGVyLmFyZ3MgPSBbXQ0KICAgICAgICBwcm9ncmFtID0gVGVzdGFibGVUZXN0UHJvZ3JhbSgpDQogICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeShbJy10JywgJ2Zpc2gnXSwgTG9hZGVyPUxvYWRlcikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnRlc3QsICd0ZXN0cycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoTG9hZGVyLmFyZ3MsIFsoJy4nLCAndGVzdCoucHknLCAnZmlzaCcpXSkNCg0KICAgICAgICBMb2FkZXIuYXJncyA9IFtdDQogICAgICAgIHByb2dyYW0gPSBUZXN0YWJsZVRlc3RQcm9ncmFtKCkNCiAgICAgICAgcHJvZ3JhbS5fZG9fZGlzY292ZXJ5KFsnLXAnLCAnZmlzaCddLCBMb2FkZXI9TG9hZGVyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdCwgJ3Rlc3RzJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChMb2FkZXIuYXJncywgWygnLicsICdmaXNoJywgTm9uZSldKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKHByb2dyYW0uZmFpbGZhc3QpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocHJvZ3JhbS5jYXRjaGJyZWFrKQ0KDQogICAgICAgIExvYWRlci5hcmdzID0gW10NCiAgICAgICAgcHJvZ3JhbSA9IFRlc3RhYmxlVGVzdFByb2dyYW0oKQ0KICAgICAgICBwcm9ncmFtLl9kb19kaXNjb3ZlcnkoWyctcCcsICdlZ2dzJywgJy1zJywgJ2Zpc2gnLCAnLXYnLCAnLWYnLCAnLWMnXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvYWRlcj1Mb2FkZXIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJvZ3JhbS50ZXN0LCAndGVzdHMnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKExvYWRlci5hcmdzLCBbKCdmaXNoJywgJ2VnZ3MnLCBOb25lKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJvZ3JhbS52ZXJib3NpdHksIDIpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShwcm9ncmFtLmZhaWxmYXN0KQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUocHJvZ3JhbS5jYXRjaGJyZWFrKQ0KDQogICAgZGVmIHRlc3RfZGV0ZWN0X21vZHVsZV9jbGFzaChzZWxmKToNCiAgICAgICAgY2xhc3MgTW9kdWxlKG9iamVjdCk6DQogICAgICAgICAgICBfX2ZpbGVfXyA9ICdiYXIvZm9vLnB5Jw0KICAgICAgICBzeXMubW9kdWxlc1snZm9vJ10gPSBNb2R1bGUNCiAgICAgICAgZnVsbF9wYXRoID0gb3MucGF0aC5hYnNwYXRoKCdmb28nKQ0KICAgICAgICBvcmlnaW5hbF9saXN0ZGlyID0gb3MubGlzdGRpcg0KICAgICAgICBvcmlnaW5hbF9pc2ZpbGUgPSBvcy5wYXRoLmlzZmlsZQ0KICAgICAgICBvcmlnaW5hbF9pc2RpciA9IG9zLnBhdGguaXNkaXINCg0KICAgICAgICBkZWYgY2xlYW51cCgpOg0KICAgICAgICAgICAgb3MubGlzdGRpciA9IG9yaWdpbmFsX2xpc3RkaXINCiAgICAgICAgICAgIG9zLnBhdGguaXNmaWxlID0gb3JpZ2luYWxfaXNmaWxlDQogICAgICAgICAgICBvcy5wYXRoLmlzZGlyID0gb3JpZ2luYWxfaXNkaXINCiAgICAgICAgICAgIGRlbCBzeXMubW9kdWxlc1snZm9vJ10NCiAgICAgICAgICAgIGlmIGZ1bGxfcGF0aCBpbiBzeXMucGF0aDoNCiAgICAgICAgICAgICAgICBzeXMucGF0aC5yZW1vdmUoZnVsbF9wYXRoKQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAoY2xlYW51cCkNCg0KICAgICAgICBkZWYgbGlzdGRpcihfKToNCiAgICAgICAgICAgIHJldHVybiBbJ2Zvby5weSddDQogICAgICAgIGRlZiBpc2ZpbGUoXyk6DQogICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICBkZWYgaXNkaXIoXyk6DQogICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICBvcy5saXN0ZGlyID0gbGlzdGRpcg0KICAgICAgICBvcy5wYXRoLmlzZmlsZSA9IGlzZmlsZQ0KICAgICAgICBvcy5wYXRoLmlzZGlyID0gaXNkaXINCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICBtb2RfZGlyID0gb3MucGF0aC5hYnNwYXRoKCdiYXInKQ0KICAgICAgICBleHBlY3RlZF9kaXIgPSBvcy5wYXRoLmFic3BhdGgoJ2ZvbycpDQogICAgICAgIG1zZyA9IHJlLmVzY2FwZShyIidmb28nIG1vZHVsZSBpbmNvcnJlY3RseSBpbXBvcnRlZCBmcm9tICVyLiBFeHBlY3RlZCAlci4gIg0KICAgICAgICAgICAgICAgICJJcyB0aGlzIG1vZHVsZSBnbG9iYWxseSBpbnN0YWxsZWQ/IiAlIChtb2RfZGlyLCBleHBlY3RlZF9kaXIpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KA0KICAgICAgICAgICAgSW1wb3J0RXJyb3IsICdeJXMkJyAlIG1zZywgbG9hZGVyLmRpc2NvdmVyLA0KICAgICAgICAgICAgc3RhcnRfZGlyPSdmb28nLCBwYXR0ZXJuPSdmb28ucHknDQogICAgICAgICkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzeXMucGF0aFswXSwgZnVsbF9wYXRoKQ0KDQoNCiAgICBkZWYgdGVzdF9kaXNjb3ZlcnlfZnJvbV9kb3R0ZWRfcGF0aChzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgdGVzdHMgPSBbc2VsZl0NCiAgICAgICAgZXhwZWN0ZWRQYXRoID0gb3MucGF0aC5hYnNwYXRoKG9zLnBhdGguZGlybmFtZSh1bml0dGVzdC50ZXN0Ll9fZmlsZV9fKSkNCg0KICAgICAgICBzZWxmLndhc1J1biA9IEZhbHNlDQogICAgICAgIGRlZiBfZmluZF90ZXN0cyhzdGFydF9kaXIsIHBhdHRlcm4pOg0KICAgICAgICAgICAgc2VsZi53YXNSdW4gPSBUcnVlDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0YXJ0X2RpciwgZXhwZWN0ZWRQYXRoKQ0KICAgICAgICAgICAgcmV0dXJuIHRlc3RzDQogICAgICAgIGxvYWRlci5fZmluZF90ZXN0cyA9IF9maW5kX3Rlc3RzDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmRpc2NvdmVyKCd1bml0dGVzdC50ZXN0JykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHNlbGYud2FzUnVuKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLl90ZXN0cywgdGVzdHMpDQoNCg0KaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoNCiAgICB1bml0dGVzdC5tYWluKCkNCg==',
'/Lib/unittest/test/__init__.py':'aW1wb3J0IG9zDQppbXBvcnQgc3lzDQppbXBvcnQgdW5pdHRlc3QNCg0KDQpoZXJlID0gb3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKQ0KbG9hZGVyID0gdW5pdHRlc3QuZGVmYXVsdFRlc3RMb2FkZXINCg0KZGVmIHN1aXRlKCk6DQogICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgIGZvciBmbiBpbiBvcy5saXN0ZGlyKGhlcmUpOg0KICAgICAgICBpZiBmbi5zdGFydHN3aXRoKCJ0ZXN0IikgYW5kIGZuLmVuZHN3aXRoKCIucHkiKToNCiAgICAgICAgICAgIG1vZG5hbWUgPSAidW5pdHRlc3QudGVzdC4iICsgZm5bOi0zXQ0KICAgICAgICAgICAgX19pbXBvcnRfXyhtb2RuYW1lKQ0KICAgICAgICAgICAgbW9kdWxlID0gc3lzLm1vZHVsZXNbbW9kbmFtZV0NCiAgICAgICAgICAgIHN1aXRlLmFkZFRlc3QobG9hZGVyLmxvYWRUZXN0c0Zyb21Nb2R1bGUobW9kdWxlKSkNCiAgICBzdWl0ZS5hZGRUZXN0KGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndW5pdHRlc3QudGVzdC50ZXN0bW9jaycpKQ0KICAgIHJldHVybiBzdWl0ZQ0KDQoNCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6DQogICAgdW5pdHRlc3QubWFpbihkZWZhdWx0VGVzdD0ic3VpdGUiKQ0K',
'/Lib/unittest/test/test_result.py':'aW1wb3J0IGlvDQppbXBvcnQgc3lzDQppbXBvcnQgdGV4dHdyYXANCg0KZnJvbSB0ZXN0IGltcG9ydCBzdXBwb3J0DQoNCmltcG9ydCB0cmFjZWJhY2sNCmltcG9ydCB1bml0dGVzdA0KDQoNCmNsYXNzIFRlc3RfVGVzdFJlc3VsdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgIyBOb3RlOiB0aGVyZSBhcmUgbm90IHNlcGFyYXRlIHRlc3RzIGZvciBUZXN0UmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSwNCiAgICAjIFRlc3RSZXN1bHQuZXJyb3JzLCBUZXN0UmVzdWx0LmZhaWx1cmVzLCBUZXN0UmVzdWx0LnRlc3RzUnVuIG9yDQogICAgIyBUZXN0UmVzdWx0LnNob3VsZFN0b3AgYmVjYXVzZSB0aGVzZSBvbmx5IGhhdmUgbWVhbmluZyBpbiB0ZXJtcyBvZg0KICAgICMgb3RoZXIgVGVzdFJlc3VsdCBtZXRob2RzLg0KICAgICMNCiAgICAjIEFjY29yZGluZ2x5LCB0ZXN0cyBmb3IgdGhlIGFmb3JlbmFtZWQgYXR0cmlidXRlcyBhcmUgaW5jb3Jwb3JhdGVkDQogICAgIyBpbiB3aXRoIHRoZSB0ZXN0cyBmb3IgdGhlIGRlZmluaW5nIG1ldGhvZHMuDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgZGVmIHRlc3RfaW5pdChzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC53YXNTdWNjZXNzZnVsKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZmFpbHVyZXMpLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuc2hvdWxkU3RvcCwgRmFsc2UpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb25lKHJlc3VsdC5fc3Rkb3V0X2J1ZmZlcikNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vbmUocmVzdWx0Ll9zdGRlcnJfYnVmZmVyKQ0KDQogICAgIyAiVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byBzaWduYWwgdGhhdCB0aGUgc2V0IG9mIHRlc3RzIGJlaW5nDQogICAgIyBydW4gc2hvdWxkIGJlIGFib3J0ZWQgYnkgc2V0dGluZyB0aGUgVGVzdFJlc3VsdCdzIHNob3VsZFN0b3ANCiAgICAjIGF0dHJpYnV0ZSB0byBUcnVlLiINCiAgICBkZWYgdGVzdF9zdG9wKHNlbGYpOg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCg0KICAgICAgICByZXN1bHQuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuc2hvdWxkU3RvcCwgVHJ1ZSkNCg0KICAgICMgIkNhbGxlZCB3aGVuIHRoZSB0ZXN0IGNhc2UgdGVzdCBpcyBhYm91dCB0byBiZSBydW4uIFRoZSBkZWZhdWx0DQogICAgIyBpbXBsZW1lbnRhdGlvbiBzaW1wbHkgaW5jcmVtZW50cyB0aGUgaW5zdGFuY2UncyB0ZXN0c1J1biBjb3VudGVyLiINCiAgICBkZWYgdGVzdF9zdGFydFRlc3Qoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICB0ZXN0ID0gRm9vKCd0ZXN0XzEnKQ0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KDQogICAgICAgIHJlc3VsdC5zdGFydFRlc3QodGVzdCkNCg0KICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5mYWlsdXJlcyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5zaG91bGRTdG9wLCBGYWxzZSkNCg0KICAgICAgICByZXN1bHQuc3RvcFRlc3QodGVzdCkNCg0KICAgICMgIkNhbGxlZCBhZnRlciB0aGUgdGVzdCBjYXNlIHRlc3QgaGFzIGJlZW4gZXhlY3V0ZWQsIHJlZ2FyZGxlc3Mgb2YNCiAgICAjIHRoZSBvdXRjb21lLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdGhpbmcuIg0KICAgIGRlZiB0ZXN0X3N0b3BUZXN0KHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RfMShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgdGVzdCA9IEZvbygndGVzdF8xJykNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCg0KICAgICAgICByZXN1bHQuc3RhcnRUZXN0KHRlc3QpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC53YXNTdWNjZXNzZnVsKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZmFpbHVyZXMpLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuc2hvdWxkU3RvcCwgRmFsc2UpDQoNCiAgICAgICAgcmVzdWx0LnN0b3BUZXN0KHRlc3QpDQoNCiAgICAgICAgIyBTYW1lIHRlc3RzIGFzIGFib3ZlOyBtYWtlIHN1cmUgbm90aGluZyBoYXMgY2hhbmdlZA0KICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5mYWlsdXJlcyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5zaG91bGRTdG9wLCBGYWxzZSkNCg0KICAgICMgIkNhbGxlZCBiZWZvcmUgYW5kIGFmdGVyIHRlc3RzIGFyZSBydW4uIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGRvZXMgbm90aGluZy4iDQogICAgZGVmIHRlc3Rfc3RhcnRUZXN0UnVuX3N0b3BUZXN0UnVuKHNlbGYpOg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgcmVzdWx0LnN0YXJ0VGVzdFJ1bigpDQogICAgICAgIHJlc3VsdC5zdG9wVGVzdFJ1bigpDQoNCiAgICAjICJhZGRTdWNjZXNzKHRlc3QpIg0KICAgICMgLi4uDQogICAgIyAiQ2FsbGVkIHdoZW4gdGhlIHRlc3QgY2FzZSB0ZXN0IHN1Y2NlZWRzIg0KICAgICMgLi4uDQogICAgIyAid2FzU3VjY2Vzc2Z1bCgpIC0gUmV0dXJucyBUcnVlIGlmIGFsbCB0ZXN0cyBydW4gc28gZmFyIGhhdmUgcGFzc2VkLA0KICAgICMgb3RoZXJ3aXNlIHJldHVybnMgRmFsc2UiDQogICAgIyAuLi4NCiAgICAjICJ0ZXN0c1J1biAtIFRoZSB0b3RhbCBudW1iZXIgb2YgdGVzdHMgcnVuIHNvIGZhci4iDQogICAgIyAuLi4NCiAgICAjICJlcnJvcnMgLSBBIGxpc3QgY29udGFpbmluZyAyLXR1cGxlcyBvZiBUZXN0Q2FzZSBpbnN0YW5jZXMgYW5kDQogICAgIyBmb3JtYXR0ZWQgdHJhY2ViYWNrcy4gRWFjaCB0dXBsZSByZXByZXNlbnRzIGEgdGVzdCB3aGljaCByYWlzZWQgYW4NCiAgICAjIHVuZXhwZWN0ZWQgZXhjZXB0aW9uLiBDb250YWlucyBmb3JtYXR0ZWQNCiAgICAjIHRyYWNlYmFja3MgaW5zdGVhZCBvZiBzeXMuZXhjX2luZm8oKSByZXN1bHRzLiINCiAgICAjIC4uLg0KICAgICMgImZhaWx1cmVzIC0gQSBsaXN0IGNvbnRhaW5pbmcgMi10dXBsZXMgb2YgVGVzdENhc2UgaW5zdGFuY2VzIGFuZA0KICAgICMgZm9ybWF0dGVkIHRyYWNlYmFja3MuIEVhY2ggdHVwbGUgcmVwcmVzZW50cyBhIHRlc3Qgd2hlcmUgYSBmYWlsdXJlIHdhcw0KICAgICMgZXhwbGljaXRseSBzaWduYWxsZWQgdXNpbmcgdGhlIFRlc3RDYXNlLmZhaWwqKCkgb3IgVGVzdENhc2UuYXNzZXJ0KigpDQogICAgIyBtZXRob2RzLiBDb250YWlucyBmb3JtYXR0ZWQgdHJhY2ViYWNrcyBpbnN0ZWFkDQogICAgIyBvZiBzeXMuZXhjX2luZm8oKSByZXN1bHRzLiINCiAgICBkZWYgdGVzdF9hZGRTdWNjZXNzKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RfMShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgdGVzdCA9IEZvbygndGVzdF8xJykNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCg0KICAgICAgICByZXN1bHQuc3RhcnRUZXN0KHRlc3QpDQogICAgICAgIHJlc3VsdC5hZGRTdWNjZXNzKHRlc3QpDQogICAgICAgIHJlc3VsdC5zdG9wVGVzdCh0ZXN0KQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQud2FzU3VjY2Vzc2Z1bCgpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmZhaWx1cmVzKSwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNob3VsZFN0b3AsIEZhbHNlKQ0KDQogICAgIyAiYWRkRmFpbHVyZSh0ZXN0LCBlcnIpIg0KICAgICMgLi4uDQogICAgIyAiQ2FsbGVkIHdoZW4gdGhlIHRlc3QgY2FzZSB0ZXN0IHNpZ25hbHMgYSBmYWlsdXJlLiBlcnIgaXMgYSB0dXBsZSBvZg0KICAgICMgdGhlIGZvcm0gcmV0dXJuZWQgYnkgc3lzLmV4Y19pbmZvKCk6ICh0eXBlLCB2YWx1ZSwgdHJhY2ViYWNrKSINCiAgICAjIC4uLg0KICAgICMgIndhc1N1Y2Nlc3NmdWwoKSAtIFJldHVybnMgVHJ1ZSBpZiBhbGwgdGVzdHMgcnVuIHNvIGZhciBoYXZlIHBhc3NlZCwNCiAgICAjIG90aGVyd2lzZSByZXR1cm5zIEZhbHNlIg0KICAgICMgLi4uDQogICAgIyAidGVzdHNSdW4gLSBUaGUgdG90YWwgbnVtYmVyIG9mIHRlc3RzIHJ1biBzbyBmYXIuIg0KICAgICMgLi4uDQogICAgIyAiZXJyb3JzIC0gQSBsaXN0IGNvbnRhaW5pbmcgMi10dXBsZXMgb2YgVGVzdENhc2UgaW5zdGFuY2VzIGFuZA0KICAgICMgZm9ybWF0dGVkIHRyYWNlYmFja3MuIEVhY2ggdHVwbGUgcmVwcmVzZW50cyBhIHRlc3Qgd2hpY2ggcmFpc2VkIGFuDQogICAgIyB1bmV4cGVjdGVkIGV4Y2VwdGlvbi4gQ29udGFpbnMgZm9ybWF0dGVkDQogICAgIyB0cmFjZWJhY2tzIGluc3RlYWQgb2Ygc3lzLmV4Y19pbmZvKCkgcmVzdWx0cy4iDQogICAgIyAuLi4NCiAgICAjICJmYWlsdXJlcyAtIEEgbGlzdCBjb250YWluaW5nIDItdHVwbGVzIG9mIFRlc3RDYXNlIGluc3RhbmNlcyBhbmQNCiAgICAjIGZvcm1hdHRlZCB0cmFjZWJhY2tzLiBFYWNoIHR1cGxlIHJlcHJlc2VudHMgYSB0ZXN0IHdoZXJlIGEgZmFpbHVyZSB3YXMNCiAgICAjIGV4cGxpY2l0bHkgc2lnbmFsbGVkIHVzaW5nIHRoZSBUZXN0Q2FzZS5mYWlsKigpIG9yIFRlc3RDYXNlLmFzc2VydCooKQ0KICAgICMgbWV0aG9kcy4gQ29udGFpbnMgZm9ybWF0dGVkIHRyYWNlYmFja3MgaW5zdGVhZA0KICAgICMgb2Ygc3lzLmV4Y19pbmZvKCkgcmVzdWx0cy4iDQogICAgZGVmIHRlc3RfYWRkRmFpbHVyZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHRlc3QgPSBGb28oJ3Rlc3RfMScpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRlc3QuZmFpbCgiZm9vIikNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgZXhjX2luZm9fdHVwbGUgPSBzeXMuZXhjX2luZm8oKQ0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KDQogICAgICAgIHJlc3VsdC5zdGFydFRlc3QodGVzdCkNCiAgICAgICAgcmVzdWx0LmFkZEZhaWx1cmUodGVzdCwgZXhjX2luZm9fdHVwbGUpDQogICAgICAgIHJlc3VsdC5zdG9wVGVzdCh0ZXN0KQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5mYWlsdXJlcyksIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5zaG91bGRTdG9wLCBGYWxzZSkNCg0KICAgICAgICB0ZXN0X2Nhc2UsIGZvcm1hdHRlZF9leGMgPSByZXN1bHQuZmFpbHVyZXNbMF0NCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHRlc3RfY2FzZSBpcyB0ZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoZm9ybWF0dGVkX2V4Yywgc3RyKQ0KDQogICAgIyAiYWRkRXJyb3IodGVzdCwgZXJyKSINCiAgICAjIC4uLg0KICAgICMgIkNhbGxlZCB3aGVuIHRoZSB0ZXN0IGNhc2UgdGVzdCByYWlzZXMgYW4gdW5leHBlY3RlZCBleGNlcHRpb24gZXJyDQogICAgIyBpcyBhIHR1cGxlIG9mIHRoZSBmb3JtIHJldHVybmVkIGJ5IHN5cy5leGNfaW5mbygpOg0KICAgICMgKHR5cGUsIHZhbHVlLCB0cmFjZWJhY2spIg0KICAgICMgLi4uDQogICAgIyAid2FzU3VjY2Vzc2Z1bCgpIC0gUmV0dXJucyBUcnVlIGlmIGFsbCB0ZXN0cyBydW4gc28gZmFyIGhhdmUgcGFzc2VkLA0KICAgICMgb3RoZXJ3aXNlIHJldHVybnMgRmFsc2UiDQogICAgIyAuLi4NCiAgICAjICJ0ZXN0c1J1biAtIFRoZSB0b3RhbCBudW1iZXIgb2YgdGVzdHMgcnVuIHNvIGZhci4iDQogICAgIyAuLi4NCiAgICAjICJlcnJvcnMgLSBBIGxpc3QgY29udGFpbmluZyAyLXR1cGxlcyBvZiBUZXN0Q2FzZSBpbnN0YW5jZXMgYW5kDQogICAgIyBmb3JtYXR0ZWQgdHJhY2ViYWNrcy4gRWFjaCB0dXBsZSByZXByZXNlbnRzIGEgdGVzdCB3aGljaCByYWlzZWQgYW4NCiAgICAjIHVuZXhwZWN0ZWQgZXhjZXB0aW9uLiBDb250YWlucyBmb3JtYXR0ZWQNCiAgICAjIHRyYWNlYmFja3MgaW5zdGVhZCBvZiBzeXMuZXhjX2luZm8oKSByZXN1bHRzLiINCiAgICAjIC4uLg0KICAgICMgImZhaWx1cmVzIC0gQSBsaXN0IGNvbnRhaW5pbmcgMi10dXBsZXMgb2YgVGVzdENhc2UgaW5zdGFuY2VzIGFuZA0KICAgICMgZm9ybWF0dGVkIHRyYWNlYmFja3MuIEVhY2ggdHVwbGUgcmVwcmVzZW50cyBhIHRlc3Qgd2hlcmUgYSBmYWlsdXJlIHdhcw0KICAgICMgZXhwbGljaXRseSBzaWduYWxsZWQgdXNpbmcgdGhlIFRlc3RDYXNlLmZhaWwqKCkgb3IgVGVzdENhc2UuYXNzZXJ0KigpDQogICAgIyBtZXRob2RzLiBDb250YWlucyBmb3JtYXR0ZWQgdHJhY2ViYWNrcyBpbnN0ZWFkDQogICAgIyBvZiBzeXMuZXhjX2luZm8oKSByZXN1bHRzLiINCiAgICBkZWYgdGVzdF9hZGRFcnJvcihzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHRlc3QgPSBGb28oJ3Rlc3RfMScpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIGV4Y19pbmZvX3R1cGxlID0gc3lzLmV4Y19pbmZvKCkNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCg0KICAgICAgICByZXN1bHQuc3RhcnRUZXN0KHRlc3QpDQogICAgICAgIHJlc3VsdC5hZGRFcnJvcih0ZXN0LCBleGNfaW5mb190dXBsZSkNCiAgICAgICAgcmVzdWx0LnN0b3BUZXN0KHRlc3QpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShyZXN1bHQud2FzU3VjY2Vzc2Z1bCgpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmZhaWx1cmVzKSwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNob3VsZFN0b3AsIEZhbHNlKQ0KDQogICAgICAgIHRlc3RfY2FzZSwgZm9ybWF0dGVkX2V4YyA9IHJlc3VsdC5lcnJvcnNbMF0NCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHRlc3RfY2FzZSBpcyB0ZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoZm9ybWF0dGVkX2V4Yywgc3RyKQ0KDQogICAgZGVmIHRlc3RHZXREZXNjcmlwdGlvbldpdGhvdXREb2NzdHJpbmcoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRleHRUZXN0UmVzdWx0KE5vbmUsIFRydWUsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICAgICAgcmVzdWx0LmdldERlc2NyaXB0aW9uKHNlbGYpLA0KICAgICAgICAgICAgICAgICd0ZXN0R2V0RGVzY3JpcHRpb25XaXRob3V0RG9jc3RyaW5nICgnICsgX19uYW1lX18gKw0KICAgICAgICAgICAgICAgICcuVGVzdF9UZXN0UmVzdWx0KScpDQoNCiAgICBAdW5pdHRlc3Quc2tpcElmKHN5cy5mbGFncy5vcHRpbWl6ZSA+PSAyLA0KICAgICAgICAgICAgICAgICAgICAgIkRvY3N0cmluZ3MgYXJlIG9taXR0ZWQgd2l0aCAtTzIgYW5kIGFib3ZlIikNCiAgICBkZWYgdGVzdEdldERlc2NyaXB0aW9uV2l0aE9uZUxpbmVEb2NzdHJpbmcoc2VsZik6DQogICAgICAgICIiIlRlc3RzIGdldERlc2NyaXB0aW9uKCkgZm9yIGEgbWV0aG9kIHdpdGggYSBkb2NzdHJpbmcuIiIiDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRleHRUZXN0UmVzdWx0KE5vbmUsIFRydWUsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICAgICAgcmVzdWx0LmdldERlc2NyaXB0aW9uKHNlbGYpLA0KICAgICAgICAgICAgICAgKCd0ZXN0R2V0RGVzY3JpcHRpb25XaXRoT25lTGluZURvY3N0cmluZyAnDQogICAgICAgICAgICAgICAgJygnICsgX19uYW1lX18gKyAnLlRlc3RfVGVzdFJlc3VsdClcbicNCiAgICAgICAgICAgICAgICAnVGVzdHMgZ2V0RGVzY3JpcHRpb24oKSBmb3IgYSBtZXRob2Qgd2l0aCBhIGRvY3N0cmluZy4nKSkNCg0KICAgIEB1bml0dGVzdC5za2lwSWYoc3lzLmZsYWdzLm9wdGltaXplID49IDIsDQogICAgICAgICAgICAgICAgICAgICAiRG9jc3RyaW5ncyBhcmUgb21pdHRlZCB3aXRoIC1PMiBhbmQgYWJvdmUiKQ0KICAgIGRlZiB0ZXN0R2V0RGVzY3JpcHRpb25XaXRoTXVsdGlMaW5lRG9jc3RyaW5nKHNlbGYpOg0KICAgICAgICAiIiJUZXN0cyBnZXREZXNjcmlwdGlvbigpIGZvciBhIG1ldGhvZCB3aXRoIGEgbG9uZ2VyIGRvY3N0cmluZy4NCiAgICAgICAgVGhlIHNlY29uZCBsaW5lIG9mIHRoZSBkb2NzdHJpbmcuDQogICAgICAgICIiIg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXh0VGVzdFJlc3VsdChOb25lLCBUcnVlLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKA0KICAgICAgICAgICAgICAgIHJlc3VsdC5nZXREZXNjcmlwdGlvbihzZWxmKSwNCiAgICAgICAgICAgICAgICgndGVzdEdldERlc2NyaXB0aW9uV2l0aE11bHRpTGluZURvY3N0cmluZyAnDQogICAgICAgICAgICAgICAgJygnICsgX19uYW1lX18gKyAnLlRlc3RfVGVzdFJlc3VsdClcbicNCiAgICAgICAgICAgICAgICAnVGVzdHMgZ2V0RGVzY3JpcHRpb24oKSBmb3IgYSBtZXRob2Qgd2l0aCBhIGxvbmdlciAnDQogICAgICAgICAgICAgICAgJ2RvY3N0cmluZy4nKSkNCg0KICAgIGRlZiB0ZXN0U3RhY2tGcmFtZVRyaW1taW5nKHNlbGYpOg0KICAgICAgICBjbGFzcyBGcmFtZShvYmplY3QpOg0KICAgICAgICAgICAgY2xhc3MgdGJfZnJhbWUob2JqZWN0KToNCiAgICAgICAgICAgICAgICBmX2dsb2JhbHMgPSB7fQ0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShyZXN1bHQuX2lzX3JlbGV2YW50X3RiX2xldmVsKEZyYW1lKSkNCg0KICAgICAgICBGcmFtZS50Yl9mcmFtZS5mX2dsb2JhbHNbJ19fdW5pdHRlc3QnXSA9IFRydWUNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC5faXNfcmVsZXZhbnRfdGJfbGV2ZWwoRnJhbWUpKQ0KDQogICAgZGVmIHRlc3RGYWlsRmFzdChzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHJlc3VsdC5fZXhjX2luZm9fdG9fc3RyaW5nID0gbGFtYmRhICpfOiAnJw0KICAgICAgICByZXN1bHQuZmFpbGZhc3QgPSBUcnVlDQogICAgICAgIHJlc3VsdC5hZGRFcnJvcihOb25lLCBOb25lKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0LnNob3VsZFN0b3ApDQoNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHJlc3VsdC5fZXhjX2luZm9fdG9fc3RyaW5nID0gbGFtYmRhICpfOiAnJw0KICAgICAgICByZXN1bHQuZmFpbGZhc3QgPSBUcnVlDQogICAgICAgIHJlc3VsdC5hZGRGYWlsdXJlKE5vbmUsIE5vbmUpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQuc2hvdWxkU3RvcCkNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgcmVzdWx0Ll9leGNfaW5mb190b19zdHJpbmcgPSBsYW1iZGEgKl86ICcnDQogICAgICAgIHJlc3VsdC5mYWlsZmFzdCA9IFRydWUNCiAgICAgICAgcmVzdWx0LmFkZFVuZXhwZWN0ZWRTdWNjZXNzKE5vbmUpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQuc2hvdWxkU3RvcCkNCg0KICAgIGRlZiB0ZXN0RmFpbEZhc3RTZXRCeVJ1bm5lcihzZWxmKToNCiAgICAgICAgcnVubmVyID0gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoc3RyZWFtPWlvLlN0cmluZ0lPKCksIGZhaWxmYXN0PVRydWUpDQogICAgICAgIGRlZiB0ZXN0KHJlc3VsdCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0LmZhaWxmYXN0KQ0KICAgICAgICByZXN1bHQgPSBydW5uZXIucnVuKHRlc3QpDQoNCg0KY2xhc3NEaWN0ID0gZGljdCh1bml0dGVzdC5UZXN0UmVzdWx0Ll9fZGljdF9fKQ0KZm9yIG0gaW4gKCdhZGRTa2lwJywgJ2FkZEV4cGVjdGVkRmFpbHVyZScsICdhZGRVbmV4cGVjdGVkU3VjY2VzcycsDQogICAgICAgICAgICdfX2luaXRfXycpOg0KICAgIGRlbCBjbGFzc0RpY3RbbV0NCg0KZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbT1Ob25lLCBkZXNjcmlwdGlvbnM9Tm9uZSwgdmVyYm9zaXR5PU5vbmUpOg0KICAgIHNlbGYuZmFpbHVyZXMgPSBbXQ0KICAgIHNlbGYuZXJyb3JzID0gW10NCiAgICBzZWxmLnRlc3RzUnVuID0gMA0KICAgIHNlbGYuc2hvdWxkU3RvcCA9IEZhbHNlDQogICAgc2VsZi5idWZmZXIgPSBGYWxzZQ0KDQpjbGFzc0RpY3RbJ19faW5pdF9fJ10gPSBfX2luaXRfXw0KT2xkUmVzdWx0ID0gdHlwZSgnT2xkUmVzdWx0JywgKG9iamVjdCwpLCBjbGFzc0RpY3QpDQoNCmNsYXNzIFRlc3RfT2xkVGVzdFJlc3VsdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQoNCiAgICBkZWYgYXNzZXJ0T2xkUmVzdWx0V2FybmluZyhzZWxmLCB0ZXN0LCBmYWlsdXJlcyk6DQogICAgICAgIHdpdGggc3VwcG9ydC5jaGVja193YXJuaW5ncygoIlRlc3RSZXN1bHQgaGFzIG5vIGFkZC4rIG1ldGhvZCwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJ1bnRpbWVXYXJuaW5nKSk6DQogICAgICAgICAgICByZXN1bHQgPSBPbGRSZXN1bHQoKQ0KICAgICAgICAgICAgdGVzdC5ydW4ocmVzdWx0KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmZhaWx1cmVzKSwgZmFpbHVyZXMpDQoNCiAgICBkZWYgdGVzdE9sZFRlc3RSZXN1bHQoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RTa2lwKHNlbGYpOg0KICAgICAgICAgICAgICAgIHNlbGYuc2tpcFRlc3QoJ2Zvb2JhcicpDQogICAgICAgICAgICBAdW5pdHRlc3QuZXhwZWN0ZWRGYWlsdXJlDQogICAgICAgICAgICBkZWYgdGVzdEV4cGVjdGVkRmFpbChzZWxmKToNCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3INCiAgICAgICAgICAgIEB1bml0dGVzdC5leHBlY3RlZEZhaWx1cmUNCiAgICAgICAgICAgIGRlZiB0ZXN0VW5leHBlY3RlZFN1Y2Nlc3Moc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGZvciB0ZXN0X25hbWUsIHNob3VsZF9wYXNzIGluICgoJ3Rlc3RTa2lwJywgVHJ1ZSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ3Rlc3RFeHBlY3RlZEZhaWwnLCBUcnVlKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgndGVzdFVuZXhwZWN0ZWRTdWNjZXNzJywgRmFsc2UpKToNCiAgICAgICAgICAgIHRlc3QgPSBUZXN0KHRlc3RfbmFtZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0T2xkUmVzdWx0V2FybmluZyh0ZXN0LCBpbnQobm90IHNob3VsZF9wYXNzKSkNCg0KICAgIGRlZiB0ZXN0T2xkVGVzdFRlc3VsdFNldHVwKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBzZXRVcChzZWxmKToNCiAgICAgICAgICAgICAgICBzZWxmLnNraXBUZXN0KCdubyByZWFzb24nKQ0KICAgICAgICAgICAgZGVmIHRlc3RGb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBzZWxmLmFzc2VydE9sZFJlc3VsdFdhcm5pbmcoVGVzdCgndGVzdEZvbycpLCAwKQ0KDQogICAgZGVmIHRlc3RPbGRUZXN0UmVzdWx0Q2xhc3Moc2VsZik6DQogICAgICAgIEB1bml0dGVzdC5za2lwKCdubyByZWFzb24nKQ0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0Rm9vKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgc2VsZi5hc3NlcnRPbGRSZXN1bHRXYXJuaW5nKFRlc3QoJ3Rlc3RGb28nKSwgMCkNCg0KICAgIGRlZiB0ZXN0T2xkUmVzdWx0V2l0aFJ1bm5lcihzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdEZvbyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIHJ1bm5lciA9IHVuaXR0ZXN0LlRleHRUZXN0UnVubmVyKHJlc3VsdGNsYXNzPU9sZFJlc3VsdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbT1pby5TdHJpbmdJTygpKQ0KICAgICAgICAjIFRoaXMgd2lsbCByYWlzZSBhbiBleGNlcHRpb24gaWYgVGV4dFRlc3RSdW5uZXIgY2FuJ3QgaGFuZGxlIG9sZA0KICAgICAgICAjIHRlc3QgcmVzdWx0IG9iamVjdHMNCiAgICAgICAgcnVubmVyLnJ1bihUZXN0KCd0ZXN0Rm9vJykpDQoNCg0KY2xhc3MgTW9ja1RyYWNlYmFjayhvYmplY3QpOg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgZm9ybWF0X2V4Y2VwdGlvbigqXyk6DQogICAgICAgIHJldHVybiBbJ0EgdHJhY2ViYWNrJ10NCg0KZGVmIHJlc3RvcmVfdHJhY2ViYWNrKCk6DQogICAgdW5pdHRlc3QucmVzdWx0LnRyYWNlYmFjayA9IHRyYWNlYmFjaw0KDQoNCmNsYXNzIFRlc3RPdXRwdXRCdWZmZXJpbmcodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgZGVmIHNldFVwKHNlbGYpOg0KICAgICAgICBzZWxmLl9yZWFsX291dCA9IHN5cy5zdGRvdXQNCiAgICAgICAgc2VsZi5fcmVhbF9lcnIgPSBzeXMuc3RkZXJyDQoNCiAgICBkZWYgdGVhckRvd24oc2VsZik6DQogICAgICAgIHN5cy5zdGRvdXQgPSBzZWxmLl9yZWFsX291dA0KICAgICAgICBzeXMuc3RkZXJyID0gc2VsZi5fcmVhbF9lcnINCg0KICAgIGRlZiB0ZXN0QnVmZmVyT3V0cHV0T2ZmKHNlbGYpOg0KICAgICAgICByZWFsX291dCA9IHNlbGYuX3JlYWxfb3V0DQogICAgICAgIHJlYWxfZXJyID0gc2VsZi5fcmVhbF9lcnINCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShyZXN1bHQuYnVmZmVyKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmVhbF9vdXQsIHN5cy5zdGRvdXQpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmVhbF9lcnIsIHN5cy5zdGRlcnIpDQoNCiAgICAgICAgcmVzdWx0LnN0YXJ0VGVzdChzZWxmKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmVhbF9vdXQsIHN5cy5zdGRvdXQpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmVhbF9lcnIsIHN5cy5zdGRlcnIpDQoNCiAgICBkZWYgdGVzdEJ1ZmZlck91dHB1dFN0YXJ0VGVzdEFkZFN1Y2Nlc3Moc2VsZik6DQogICAgICAgIHJlYWxfb3V0ID0gc2VsZi5fcmVhbF9vdXQNCiAgICAgICAgcmVhbF9lcnIgPSBzZWxmLl9yZWFsX2Vycg0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKHJlc3VsdC5idWZmZXIpDQoNCiAgICAgICAgcmVzdWx0LmJ1ZmZlciA9IFRydWUNCg0KICAgICAgICBzZWxmLmFzc2VydElzKHJlYWxfb3V0LCBzeXMuc3Rkb3V0KQ0KICAgICAgICBzZWxmLmFzc2VydElzKHJlYWxfZXJyLCBzeXMuc3RkZXJyKQ0KDQogICAgICAgIHJlc3VsdC5zdGFydFRlc3Qoc2VsZikNCg0KICAgICAgICBzZWxmLmFzc2VydElzTm90KHJlYWxfb3V0LCBzeXMuc3Rkb3V0KQ0KICAgICAgICBzZWxmLmFzc2VydElzTm90KHJlYWxfZXJyLCBzeXMuc3RkZXJyKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3lzLnN0ZG91dCwgaW8uU3RyaW5nSU8pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzeXMuc3RkZXJyLCBpby5TdHJpbmdJTykNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdChzeXMuc3Rkb3V0LCBzeXMuc3RkZXJyKQ0KDQogICAgICAgIG91dF9zdHJlYW0gPSBzeXMuc3Rkb3V0DQogICAgICAgIGVycl9zdHJlYW0gPSBzeXMuc3RkZXJyDQoNCiAgICAgICAgcmVzdWx0Ll9vcmlnaW5hbF9zdGRvdXQgPSBpby5TdHJpbmdJTygpDQogICAgICAgIHJlc3VsdC5fb3JpZ2luYWxfc3RkZXJyID0gaW8uU3RyaW5nSU8oKQ0KDQogICAgICAgIHByaW50KCdmb28nKQ0KICAgICAgICBwcmludCgnYmFyJywgZmlsZT1zeXMuc3RkZXJyKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwob3V0X3N0cmVhbS5nZXR2YWx1ZSgpLCAnZm9vXG4nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGVycl9zdHJlYW0uZ2V0dmFsdWUoKSwgJ2JhclxuJykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5fb3JpZ2luYWxfc3Rkb3V0LmdldHZhbHVlKCksICcnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5fb3JpZ2luYWxfc3RkZXJyLmdldHZhbHVlKCksICcnKQ0KDQogICAgICAgIHJlc3VsdC5hZGRTdWNjZXNzKHNlbGYpDQogICAgICAgIHJlc3VsdC5zdG9wVGVzdChzZWxmKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXMoc3lzLnN0ZG91dCwgcmVzdWx0Ll9vcmlnaW5hbF9zdGRvdXQpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMoc3lzLnN0ZGVyciwgcmVzdWx0Ll9vcmlnaW5hbF9zdGRlcnIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuX29yaWdpbmFsX3N0ZG91dC5nZXR2YWx1ZSgpLCAnJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuX29yaWdpbmFsX3N0ZGVyci5nZXR2YWx1ZSgpLCAnJykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG91dF9zdHJlYW0uZ2V0dmFsdWUoKSwgJycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXJyX3N0cmVhbS5nZXR2YWx1ZSgpLCAnJykNCg0KDQogICAgZGVmIGdldFN0YXJ0ZWRSZXN1bHQoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICByZXN1bHQuYnVmZmVyID0gVHJ1ZQ0KICAgICAgICByZXN1bHQuc3RhcnRUZXN0KHNlbGYpDQogICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgIGRlZiB0ZXN0QnVmZmVyT3V0cHV0QWRkRXJyb3JPckZhaWx1cmUoc2VsZik6DQogICAgICAgIHVuaXR0ZXN0LnJlc3VsdC50cmFjZWJhY2sgPSBNb2NrVHJhY2ViYWNrDQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChyZXN0b3JlX3RyYWNlYmFjaykNCg0KICAgICAgICBmb3IgbWVzc2FnZV9hdHRyLCBhZGRfYXR0ciwgaW5jbHVkZV9lcnJvciBpbiBbDQogICAgICAgICAgICAoJ2Vycm9ycycsICdhZGRFcnJvcicsIFRydWUpLA0KICAgICAgICAgICAgKCdmYWlsdXJlcycsICdhZGRGYWlsdXJlJywgRmFsc2UpLA0KICAgICAgICAgICAgKCdlcnJvcnMnLCAnYWRkRXJyb3InLCBUcnVlKSwNCiAgICAgICAgICAgICgnZmFpbHVyZXMnLCAnYWRkRmFpbHVyZScsIEZhbHNlKQ0KICAgICAgICBdOg0KICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5nZXRTdGFydGVkUmVzdWx0KCkNCiAgICAgICAgICAgIGJ1ZmZlcmVkX291dCA9IHN5cy5zdGRvdXQNCiAgICAgICAgICAgIGJ1ZmZlcmVkX2VyciA9IHN5cy5zdGRlcnINCiAgICAgICAgICAgIHJlc3VsdC5fb3JpZ2luYWxfc3Rkb3V0ID0gaW8uU3RyaW5nSU8oKQ0KICAgICAgICAgICAgcmVzdWx0Ll9vcmlnaW5hbF9zdGRlcnIgPSBpby5TdHJpbmdJTygpDQoNCiAgICAgICAgICAgIHByaW50KCdmb28nLCBmaWxlPXN5cy5zdGRvdXQpDQogICAgICAgICAgICBpZiBpbmNsdWRlX2Vycm9yOg0KICAgICAgICAgICAgICAgIHByaW50KCdiYXInLCBmaWxlPXN5cy5zdGRlcnIpDQoNCg0KICAgICAgICAgICAgYWRkRnVuY3Rpb24gPSBnZXRhdHRyKHJlc3VsdCwgYWRkX2F0dHIpDQogICAgICAgICAgICBhZGRGdW5jdGlvbihzZWxmLCAoTm9uZSwgTm9uZSwgTm9uZSkpDQogICAgICAgICAgICByZXN1bHQuc3RvcFRlc3Qoc2VsZikNCg0KICAgICAgICAgICAgcmVzdWx0X2xpc3QgPSBnZXRhdHRyKHJlc3VsdCwgbWVzc2FnZV9hdHRyKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0X2xpc3QpLCAxKQ0KDQogICAgICAgICAgICB0ZXN0LCBtZXNzYWdlID0gcmVzdWx0X2xpc3RbMF0NCiAgICAgICAgICAgIGV4cGVjdGVkT3V0TWVzc2FnZSA9IHRleHR3cmFwLmRlZGVudCgiIiINCiAgICAgICAgICAgICAgICBTdGRvdXQ6DQogICAgICAgICAgICAgICAgZm9vDQogICAgICAgICAgICAiIiIpDQogICAgICAgICAgICBleHBlY3RlZEVyck1lc3NhZ2UgPSAnJw0KICAgICAgICAgICAgaWYgaW5jbHVkZV9lcnJvcjoNCiAgICAgICAgICAgICAgICBleHBlY3RlZEVyck1lc3NhZ2UgPSB0ZXh0d3JhcC5kZWRlbnQoIiIiDQogICAgICAgICAgICAgICAgU3RkZXJyOg0KICAgICAgICAgICAgICAgIGJhcg0KICAgICAgICAgICAgIiIiKQ0KDQogICAgICAgICAgICBleHBlY3RlZEZ1bGxNZXNzYWdlID0gJ0EgdHJhY2ViYWNrJXMlcycgJSAoZXhwZWN0ZWRPdXRNZXNzYWdlLCBleHBlY3RlZEVyck1lc3NhZ2UpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXModGVzdCwgc2VsZikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0Ll9vcmlnaW5hbF9zdGRvdXQuZ2V0dmFsdWUoKSwgZXhwZWN0ZWRPdXRNZXNzYWdlKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuX29yaWdpbmFsX3N0ZGVyci5nZXR2YWx1ZSgpLCBleHBlY3RlZEVyck1lc3NhZ2UpDQogICAgICAgICAgICBzZWxmLmFzc2VydE11bHRpTGluZUVxdWFsKG1lc3NhZ2UsIGV4cGVjdGVkRnVsbE1lc3NhZ2UpDQoNCiAgICBkZWYgdGVzdEJ1ZmZlclNldHVwQ2xhc3Moc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICByZXN1bHQuYnVmZmVyID0gVHJ1ZQ0KDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgMS8wDQogICAgICAgICAgICBkZWYgdGVzdF9mb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbRm9vKCd0ZXN0X2ZvbycpXSkNCiAgICAgICAgc3VpdGUocmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMSkNCg0KICAgIGRlZiB0ZXN0QnVmZmVyVGVhckRvd25DbGFzcyhzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHJlc3VsdC5idWZmZXIgPSBUcnVlDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICAxLzANCiAgICAgICAgICAgIGRlZiB0ZXN0X2ZvbyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfZm9vJyldKQ0KICAgICAgICBzdWl0ZShyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KDQogICAgZGVmIHRlc3RCdWZmZXJTZXRVcE1vZHVsZShzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHJlc3VsdC5idWZmZXIgPSBUcnVlDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0X2ZvbyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIGNsYXNzIE1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgMS8wDQoNCiAgICAgICAgRm9vLl9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHN5cy5tb2R1bGVzLnBvcCwgJ01vZHVsZScpDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfZm9vJyldKQ0KICAgICAgICBzdWl0ZShyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KDQogICAgZGVmIHRlc3RCdWZmZXJUZWFyRG93bk1vZHVsZShzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHJlc3VsdC5idWZmZXIgPSBUcnVlDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0X2ZvbyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIGNsYXNzIE1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgMS8wDQoNCiAgICAgICAgRm9vLl9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHN5cy5tb2R1bGVzLnBvcCwgJ01vZHVsZScpDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfZm9vJyldKQ0KICAgICAgICBzdWl0ZShyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/unittest/test/test_suite.py':'aW1wb3J0IHVuaXR0ZXN0DQoNCmltcG9ydCBzeXMNCmZyb20gLnN1cHBvcnQgaW1wb3J0IExvZ2dpbmdSZXN1bHQsIFRlc3RFcXVhbGl0eQ0KDQoNCiMjIyBTdXBwb3J0IGNvZGUgZm9yIFRlc3RfVGVzdFN1aXRlDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCmNsYXNzIFRlc3Qob2JqZWN0KToNCiAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgZGVmIHRlc3RfMyhzZWxmKTogcGFzcw0KICAgICAgICBkZWYgcnVuVGVzdChzZWxmKTogcGFzcw0KDQpkZWYgX21rX1Rlc3RTdWl0ZSgqbmFtZXMpOg0KICAgIHJldHVybiB1bml0dGVzdC5UZXN0U3VpdGUoVGVzdC5Gb28obikgZm9yIG4gaW4gbmFtZXMpDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KDQpjbGFzcyBUZXN0X1Rlc3RTdWl0ZSh1bml0dGVzdC5UZXN0Q2FzZSwgVGVzdEVxdWFsaXR5KToNCg0KICAgICMjIyBTZXQgdXAgYXR0cmlidXRlcyBuZWVkZWQgYnkgaW5oZXJpdGVkIHRlc3RzDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgIyBVc2VkIGJ5IFRlc3RFcXVhbGl0eS50ZXN0X2VxDQogICAgZXFfcGFpcnMgPSBbKHVuaXR0ZXN0LlRlc3RTdWl0ZSgpLCB1bml0dGVzdC5UZXN0U3VpdGUoKSkNCiAgICAgICAgICAgICAgICwodW5pdHRlc3QuVGVzdFN1aXRlKCksIHVuaXR0ZXN0LlRlc3RTdWl0ZShbXSkpDQogICAgICAgICAgICAgICAsKF9ta19UZXN0U3VpdGUoJ3Rlc3RfMScpLCBfbWtfVGVzdFN1aXRlKCd0ZXN0XzEnKSldDQoNCiAgICAjIFVzZWQgYnkgVGVzdEVxdWFsaXR5LnRlc3RfbmUNCiAgICBuZV9wYWlycyA9IFsodW5pdHRlc3QuVGVzdFN1aXRlKCksIF9ta19UZXN0U3VpdGUoJ3Rlc3RfMScpKQ0KICAgICAgICAgICAgICAgLCh1bml0dGVzdC5UZXN0U3VpdGUoW10pLCBfbWtfVGVzdFN1aXRlKCd0ZXN0XzEnKSkNCiAgICAgICAgICAgICAgICwoX21rX1Rlc3RTdWl0ZSgndGVzdF8xJywgJ3Rlc3RfMicpLCBfbWtfVGVzdFN1aXRlKCd0ZXN0XzEnLCAndGVzdF8zJykpDQogICAgICAgICAgICAgICAsKF9ta19UZXN0U3VpdGUoJ3Rlc3RfMScpLCBfbWtfVGVzdFN1aXRlKCd0ZXN0XzInKSldDQoNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyMjIC9TZXQgdXAgYXR0cmlidXRlcyBuZWVkZWQgYnkgaW5oZXJpdGVkIHRlc3RzDQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RTdWl0ZS5fX2luaXRfXw0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KICAgICMgImNsYXNzIFRlc3RTdWl0ZShbdGVzdHNdKSINCiAgICAjDQogICAgIyBUaGUgdGVzdHMgaXRlcmFibGUgc2hvdWxkIGJlIG9wdGlvbmFsDQogICAgZGVmIHRlc3RfaW5pdF9fdGVzdHNfb3B0aW9uYWwoc2VsZik6DQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLmNvdW50VGVzdENhc2VzKCksIDApDQoNCiAgICAjICJjbGFzcyBUZXN0U3VpdGUoW3Rlc3RzXSkiDQogICAgIyAuLi4NCiAgICAjICJJZiB0ZXN0cyBpcyBnaXZlbiwgaXQgbXVzdCBiZSBhbiBpdGVyYWJsZSBvZiBpbmRpdmlkdWFsIHRlc3QgY2FzZXMNCiAgICAjIG9yIG90aGVyIHRlc3Qgc3VpdGVzIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGJ1aWxkIHRoZSBzdWl0ZSBpbml0aWFsbHkiDQogICAgIw0KICAgICMgVGVzdFN1aXRlIHNob3VsZCBkZWFsIHdpdGggZW1wdHkgdGVzdHMgaXRlcmFibGVzIGJ5IGFsbG93aW5nIHRoZQ0KICAgICMgY3JlYXRpb24gb2YgYW4gZW1wdHkgc3VpdGUNCiAgICBkZWYgdGVzdF9pbml0X19lbXB0eV90ZXN0cyhzZWxmKToNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW10pDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdWl0ZS5jb3VudFRlc3RDYXNlcygpLCAwKQ0KDQogICAgIyAiY2xhc3MgVGVzdFN1aXRlKFt0ZXN0c10pIg0KICAgICMgLi4uDQogICAgIyAiSWYgdGVzdHMgaXMgZ2l2ZW4sIGl0IG11c3QgYmUgYW4gaXRlcmFibGUgb2YgaW5kaXZpZHVhbCB0ZXN0IGNhc2VzDQogICAgIyBvciBvdGhlciB0ZXN0IHN1aXRlcyB0aGF0IHdpbGwgYmUgdXNlZCB0byBidWlsZCB0aGUgc3VpdGUgaW5pdGlhbGx5Ig0KICAgICMNCiAgICAjIFRlc3RTdWl0ZSBzaG91bGQgYWxsb3cgYW55IGl0ZXJhYmxlIHRvIHByb3ZpZGUgdGVzdHMNCiAgICBkZWYgdGVzdF9pbml0X190ZXN0c19mcm9tX2FueV9pdGVyYWJsZShzZWxmKToNCiAgICAgICAgZGVmIHRlc3RzKCk6DQogICAgICAgICAgICB5aWVsZCB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgICAgIHlpZWxkIHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KDQogICAgICAgIHN1aXRlXzEgPSB1bml0dGVzdC5UZXN0U3VpdGUodGVzdHMoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdWl0ZV8xLmNvdW50VGVzdENhc2VzKCksIDIpDQoNCiAgICAgICAgc3VpdGVfMiA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShzdWl0ZV8xKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlXzIuY291bnRUZXN0Q2FzZXMoKSwgMikNCg0KICAgICAgICBzdWl0ZV8zID0gdW5pdHRlc3QuVGVzdFN1aXRlKHNldChzdWl0ZV8xKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdWl0ZV8zLmNvdW50VGVzdENhc2VzKCksIDIpDQoNCiAgICAjICJjbGFzcyBUZXN0U3VpdGUoW3Rlc3RzXSkiDQogICAgIyAuLi4NCiAgICAjICJJZiB0ZXN0cyBpcyBnaXZlbiwgaXQgbXVzdCBiZSBhbiBpdGVyYWJsZSBvZiBpbmRpdmlkdWFsIHRlc3QgY2FzZXMNCiAgICAjIG9yIG90aGVyIHRlc3Qgc3VpdGVzIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGJ1aWxkIHRoZSBzdWl0ZSBpbml0aWFsbHkiDQogICAgIw0KICAgICMgRG9lcyBUZXN0U3VpdGUoKSBhbHNvIGFsbG93IG90aGVyIFRlc3RTdWl0ZSgpIGluc3RhbmNlcyB0byBiZSBwcmVzZW50DQogICAgIyBpbiB0aGUgdGVzdHMgaXRlcmFibGU/DQogICAgZGVmIHRlc3RfaW5pdF9fVGVzdFN1aXRlX2luc3RhbmNlc19pbl90ZXN0cyhzZWxmKToNCiAgICAgICAgZGVmIHRlc3RzKCk6DQogICAgICAgICAgICBmdGMgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgICAgIHlpZWxkIHVuaXR0ZXN0LlRlc3RTdWl0ZShbZnRjXSkNCiAgICAgICAgICAgIHlpZWxkIHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKHRlc3RzKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUuY291bnRUZXN0Q2FzZXMoKSwgMikNCg0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAjIyMgL1Rlc3RzIGZvciBUZXN0U3VpdGUuX19pbml0X18NCg0KICAgICMgQ29udGFpbmVyIHR5cGVzIHNob3VsZCBzdXBwb3J0IHRoZSBpdGVyIHByb3RvY29sDQogICAgZGVmIHRlc3RfaXRlcihzZWxmKToNCiAgICAgICAgdGVzdDEgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgdGVzdDIgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKHRlc3QxLCB0ZXN0MikpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW3Rlc3QxLCB0ZXN0Ml0pDQoNCiAgICAjICJSZXR1cm4gdGhlIG51bWJlciBvZiB0ZXN0cyByZXByZXNlbnRlZCBieSB0aGUgdGhpcyB0ZXN0IG9iamVjdC4NCiAgICAjIC4uLnRoaXMgbWV0aG9kIGlzIGFsc28gaW1wbGVtZW50ZWQgYnkgdGhlIFRlc3RTdWl0ZSBjbGFzcywgd2hpY2ggY2FuDQogICAgIyByZXR1cm4gbGFyZ2VyIFtncmVhdGVyIHRoYW4gMV0gdmFsdWVzIg0KICAgICMNCiAgICAjIFByZXN1bWFibHkgYW4gZW1wdHkgVGVzdFN1aXRlIHJldHVybnMgMD8NCiAgICBkZWYgdGVzdF9jb3VudFRlc3RDYXNlc196ZXJvX3NpbXBsZShzZWxmKToNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUuY291bnRUZXN0Q2FzZXMoKSwgMCkNCg0KICAgICMgIlJldHVybiB0aGUgbnVtYmVyIG9mIHRlc3RzIHJlcHJlc2VudGVkIGJ5IHRoZSB0aGlzIHRlc3Qgb2JqZWN0Lg0KICAgICMgLi4udGhpcyBtZXRob2QgaXMgYWxzbyBpbXBsZW1lbnRlZCBieSB0aGUgVGVzdFN1aXRlIGNsYXNzLCB3aGljaCBjYW4NCiAgICAjIHJldHVybiBsYXJnZXIgW2dyZWF0ZXIgdGhhbiAxXSB2YWx1ZXMiDQogICAgIw0KICAgICMgUHJlc3VtYWJseSBhbiBlbXB0eSBUZXN0U3VpdGUgKGV2ZW4gaWYgaXQgY29udGFpbnMgb3RoZXIgZW1wdHkNCiAgICAjIFRlc3RTdWl0ZSBpbnN0YW5jZXMpIHJldHVybnMgMD8NCiAgICBkZWYgdGVzdF9jb3VudFRlc3RDYXNlc196ZXJvX25lc3RlZChzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdDEodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKFt1bml0dGVzdC5UZXN0U3VpdGUoKV0pDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdWl0ZS5jb3VudFRlc3RDYXNlcygpLCAwKQ0KDQogICAgIyAiUmV0dXJuIHRoZSBudW1iZXIgb2YgdGVzdHMgcmVwcmVzZW50ZWQgYnkgdGhlIHRoaXMgdGVzdCBvYmplY3QuDQogICAgIyAuLi50aGlzIG1ldGhvZCBpcyBhbHNvIGltcGxlbWVudGVkIGJ5IHRoZSBUZXN0U3VpdGUgY2xhc3MsIHdoaWNoIGNhbg0KICAgICMgcmV0dXJuIGxhcmdlciBbZ3JlYXRlciB0aGFuIDFdIHZhbHVlcyINCiAgICBkZWYgdGVzdF9jb3VudFRlc3RDYXNlc19zaW1wbGUoc2VsZik6DQogICAgICAgIHRlc3QxID0gdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZShsYW1iZGE6IE5vbmUpDQogICAgICAgIHRlc3QyID0gdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZShsYW1iZGE6IE5vbmUpDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCh0ZXN0MSwgdGVzdDIpKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUuY291bnRUZXN0Q2FzZXMoKSwgMikNCg0KICAgICMgIlJldHVybiB0aGUgbnVtYmVyIG9mIHRlc3RzIHJlcHJlc2VudGVkIGJ5IHRoZSB0aGlzIHRlc3Qgb2JqZWN0Lg0KICAgICMgLi4udGhpcyBtZXRob2QgaXMgYWxzbyBpbXBsZW1lbnRlZCBieSB0aGUgVGVzdFN1aXRlIGNsYXNzLCB3aGljaCBjYW4NCiAgICAjIHJldHVybiBsYXJnZXIgW2dyZWF0ZXIgdGhhbiAxXSB2YWx1ZXMiDQogICAgIw0KICAgICMgTWFrZSBzdXJlIHRoaXMgaG9sZHMgZm9yIG5lc3RlZCBUZXN0U3VpdGUgaW5zdGFuY2VzLCB0b28NCiAgICBkZWYgdGVzdF9jb3VudFRlc3RDYXNlc19uZXN0ZWQoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QxKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0MShzZWxmKTogcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3QyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgdGVzdDIgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgdGVzdDMgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgY2hpbGQgPSB1bml0dGVzdC5UZXN0U3VpdGUoKFRlc3QxKCd0ZXN0MicpLCB0ZXN0MikpDQogICAgICAgIHBhcmVudCA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgodGVzdDMsIGNoaWxkLCBUZXN0MSgndGVzdDEnKSkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwYXJlbnQuY291bnRUZXN0Q2FzZXMoKSwgNCkNCg0KICAgICMgIlJ1biB0aGUgdGVzdHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgc3VpdGUsIGNvbGxlY3RpbmcgdGhlIHJlc3VsdCBpbnRvDQogICAgIyB0aGUgdGVzdCByZXN1bHQgb2JqZWN0IHBhc3NlZCBhcyByZXN1bHQuIg0KICAgICMNCiAgICAjIEFuZCBpZiB0aGVyZSBhcmUgbm8gdGVzdHM/IFdoYXQgdGhlbj8NCiAgICBkZWYgdGVzdF9ydW5fX2VtcHR5X3N1aXRlKHNlbGYpOg0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICByZXN1bHQgPSBMb2dnaW5nUmVzdWx0KGV2ZW50cykNCg0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQoNCiAgICAgICAgc3VpdGUucnVuKHJlc3VsdCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgW10pDQoNCiAgICAjICJOb3RlIHRoYXQgdW5saWtlIFRlc3RDYXNlLnJ1bigpLCBUZXN0U3VpdGUucnVuKCkgcmVxdWlyZXMgdGhlDQogICAgIyAicmVzdWx0IG9iamVjdCB0byBiZSBwYXNzZWQgaW4uIg0KICAgIGRlZiB0ZXN0X3J1bl9fcmVxdWlyZXNfcmVzdWx0KHNlbGYpOg0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc3VpdGUucnVuKCkNCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiRmFpbGVkIHRvIHJhaXNlIFR5cGVFcnJvciIpDQoNCiAgICAjICJSdW4gdGhlIHRlc3RzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHN1aXRlLCBjb2xsZWN0aW5nIHRoZSByZXN1bHQgaW50bw0KICAgICMgdGhlIHRlc3QgcmVzdWx0IG9iamVjdCBwYXNzZWQgYXMgcmVzdWx0LiINCiAgICBkZWYgdGVzdF9ydW4oc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGNsYXNzIExvZ2dpbmdDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW4oc2VsZiwgcmVzdWx0KToNCiAgICAgICAgICAgICAgICBldmVudHMuYXBwZW5kKCdydW4gJXMnICUgc2VsZi5fdGVzdE1ldGhvZE5hbWUpDQoNCiAgICAgICAgICAgIGRlZiB0ZXN0MShzZWxmKTogcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3QyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgdGVzdHMgPSBbTG9nZ2luZ0Nhc2UoJ3Rlc3QxJyksIExvZ2dpbmdDYXNlKCd0ZXN0MicpXQ0KDQogICAgICAgIHVuaXR0ZXN0LlRlc3RTdWl0ZSh0ZXN0cykucnVuKHJlc3VsdCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgWydydW4gdGVzdDEnLCAncnVuIHRlc3QyJ10pDQoNCiAgICAjICJBZGQgYSBUZXN0Q2FzZSAuLi4gdG8gdGhlIHN1aXRlIg0KICAgIGRlZiB0ZXN0X2FkZFRlc3RfX1Rlc3RDYXNlKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6IHBhc3MNCg0KICAgICAgICB0ZXN0ID0gRm9vKCd0ZXN0JykNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KDQogICAgICAgIHN1aXRlLmFkZFRlc3QodGVzdCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLmNvdW50VGVzdENhc2VzKCksIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFt0ZXN0XSkNCg0KICAgICMgIkFkZCBhIC4uLiBUZXN0U3VpdGUgdG8gdGhlIHN1aXRlIg0KICAgIGRlZiB0ZXN0X2FkZFRlc3RfX1Rlc3RTdWl0ZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOiBwYXNzDQoNCiAgICAgICAgc3VpdGVfMiA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbRm9vKCd0ZXN0JyldKQ0KDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkNCiAgICAgICAgc3VpdGUuYWRkVGVzdChzdWl0ZV8yKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUuY291bnRUZXN0Q2FzZXMoKSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW3N1aXRlXzJdKQ0KDQogICAgIyAiQWRkIGFsbCB0aGUgdGVzdHMgZnJvbSBhbiBpdGVyYWJsZSBvZiBUZXN0Q2FzZSBhbmQgVGVzdFN1aXRlDQogICAgIyBpbnN0YW5jZXMgdG8gdGhpcyB0ZXN0IHN1aXRlLiINCiAgICAjDQogICAgIyAiVGhpcyBpcyBlcXVpdmFsZW50IHRvIGl0ZXJhdGluZyBvdmVyIHRlc3RzLCBjYWxsaW5nIGFkZFRlc3QoKSBmb3INCiAgICAjIGVhY2ggZWxlbWVudCINCiAgICBkZWYgdGVzdF9hZGRUZXN0cyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCg0KICAgICAgICB0ZXN0XzEgPSBGb28oJ3Rlc3RfMScpDQogICAgICAgIHRlc3RfMiA9IEZvbygndGVzdF8yJykNCiAgICAgICAgaW5uZXJfc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW3Rlc3RfMl0pDQoNCiAgICAgICAgZGVmIGdlbigpOg0KICAgICAgICAgICAgeWllbGQgdGVzdF8xDQogICAgICAgICAgICB5aWVsZCB0ZXN0XzINCiAgICAgICAgICAgIHlpZWxkIGlubmVyX3N1aXRlDQoNCiAgICAgICAgc3VpdGVfMSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQogICAgICAgIHN1aXRlXzEuYWRkVGVzdHMoZ2VuKCkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlXzEpLCBsaXN0KGdlbigpKSkNCg0KICAgICAgICAjICJUaGlzIGlzIGVxdWl2YWxlbnQgdG8gaXRlcmF0aW5nIG92ZXIgdGVzdHMsIGNhbGxpbmcgYWRkVGVzdCgpIGZvcg0KICAgICAgICAjIGVhY2ggZWxlbWVudCINCiAgICAgICAgc3VpdGVfMiA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQogICAgICAgIGZvciB0IGluIGdlbigpOg0KICAgICAgICAgICAgc3VpdGVfMi5hZGRUZXN0KHQpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdWl0ZV8xLCBzdWl0ZV8yKQ0KDQogICAgIyAiQWRkIGFsbCB0aGUgdGVzdHMgZnJvbSBhbiBpdGVyYWJsZSBvZiBUZXN0Q2FzZSBhbmQgVGVzdFN1aXRlDQogICAgIyBpbnN0YW5jZXMgdG8gdGhpcyB0ZXN0IHN1aXRlLiINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgaWYgaXQgZG9lc24ndCBnZXQgYW4gaXRlcmFibGU/DQogICAgZGVmIHRlc3RfYWRkVGVzdF9fbm9uaXRlcmFibGUoc2VsZik6DQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzdWl0ZS5hZGRUZXN0cyg1KQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJGYWlsZWQgdG8gcmFpc2UgVHlwZUVycm9yIikNCg0KICAgIGRlZiB0ZXN0X2FkZFRlc3RfX25vbmNhbGxhYmxlKHNlbGYpOg0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgc3VpdGUuYWRkVGVzdCwgNSkNCg0KICAgIGRlZiB0ZXN0X2FkZFRlc3RfX2Nhc2VzdWl0ZWNsYXNzKHNlbGYpOg0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgc3VpdGUuYWRkVGVzdCwgVGVzdF9UZXN0U3VpdGUpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgc3VpdGUuYWRkVGVzdCwgdW5pdHRlc3QuVGVzdFN1aXRlKQ0KDQogICAgZGVmIHRlc3RfYWRkVGVzdHNfX3N0cmluZyhzZWxmKToNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIHN1aXRlLmFkZFRlc3RzLCAiZm9vIikNCg0KICAgIGRlZiB0ZXN0X2Z1bmN0aW9uX2luX3N1aXRlKHNlbGYpOg0KICAgICAgICBkZWYgZihfKToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgICAgICBzdWl0ZS5hZGRUZXN0KGYpDQoNCiAgICAgICAgIyB3aGVuIHRoZSBidWcgaXMgZml4ZWQgdGhpcyBsaW5lIHdpbGwgbm90IGNyYXNoDQogICAgICAgIHN1aXRlLnJ1bih1bml0dGVzdC5UZXN0UmVzdWx0KCkpDQoNCg0KDQogICAgZGVmIHRlc3RfYmFzZXRlc3RzdWl0ZShzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICB3YXNTZXRVcCA9IEZhbHNlDQogICAgICAgICAgICB3YXNUb3JuRG93biA9IEZhbHNlDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgY2xzLndhc1NldFVwID0gVHJ1ZQ0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25DbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIGNscy53YXNUb3JuRG93biA9IFRydWUNCiAgICAgICAgICAgIGRlZiB0ZXN0UGFzcyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdEZhaWwoc2VsZik6DQogICAgICAgICAgICAgICAgZmFpbA0KICAgICAgICBjbGFzcyBNb2R1bGUob2JqZWN0KToNCiAgICAgICAgICAgIHdhc1NldFVwID0gRmFsc2UNCiAgICAgICAgICAgIHdhc1Rvcm5Eb3duID0gRmFsc2UNCiAgICAgICAgICAgIEBzdGF0aWNtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcE1vZHVsZSgpOg0KICAgICAgICAgICAgICAgIE1vZHVsZS53YXNTZXRVcCA9IFRydWUNCiAgICAgICAgICAgIEBzdGF0aWNtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bk1vZHVsZSgpOg0KICAgICAgICAgICAgICAgIE1vZHVsZS53YXNUb3JuRG93biA9IFRydWUNCg0KICAgICAgICBUZXN0Ll9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHN5cy5tb2R1bGVzLnBvcCwgJ01vZHVsZScpDQoNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5CYXNlVGVzdFN1aXRlKCkNCiAgICAgICAgc3VpdGUuYWRkVGVzdHMoW1Rlc3QoJ3Rlc3RQYXNzJyksIFRlc3QoJ3Rlc3RGYWlsJyldKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLmNvdW50VGVzdENhc2VzKCksIDIpDQoNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHN1aXRlLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoTW9kdWxlLndhc1NldFVwKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKE1vZHVsZS53YXNUb3JuRG93bikNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShUZXN0Lndhc1NldFVwKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKFRlc3Qud2FzVG9ybkRvd24pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZmFpbHVyZXMpLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMikNCg0KDQogICAgZGVmIHRlc3Rfb3ZlcnJpZGluZ19jYWxsKHNlbGYpOg0KICAgICAgICBjbGFzcyBNeVN1aXRlKHVuaXR0ZXN0LlRlc3RTdWl0ZSk6DQogICAgICAgICAgICBjYWxsZWQgPSBGYWxzZQ0KICAgICAgICAgICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3KToNCiAgICAgICAgICAgICAgICBzZWxmLmNhbGxlZCA9IFRydWUNCiAgICAgICAgICAgICAgICB1bml0dGVzdC5UZXN0U3VpdGUuX19jYWxsX18oc2VsZiwgKmFyZ3MsICoqa3cpDQoNCiAgICAgICAgc3VpdGUgPSBNeVN1aXRlKCkNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHdyYXBwZXIgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgICAgICB3cmFwcGVyLmFkZFRlc3Qoc3VpdGUpDQogICAgICAgIHdyYXBwZXIocmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoc3VpdGUuY2FsbGVkKQ0KDQogICAgICAgICMgcmV1c2luZyByZXN1bHRzIHNob3VsZCBiZSBwZXJtaXR0ZWQgZXZlbiBpZiBhYm9taW5hYmxlDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocmVzdWx0Ll90ZXN0UnVuRW50ZXJlZCkNCg0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/unittest/test/dummy.py':'IyBFbXB0eSBtb2R1bGUgZm9yIHRlc3RpbmcgdGhlIGxvYWRpbmcgb2YgbW9kdWxlcw0K',
'/Lib/unittest/test/test_setups.py':'aW1wb3J0IGlvDQppbXBvcnQgc3lzDQoNCmltcG9ydCB1bml0dGVzdA0KDQoNCmRlZiByZXN1bHRGYWN0b3J5KCpfKToNCiAgICByZXR1cm4gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQoNCg0KY2xhc3MgVGVzdFNldHVwcyh1bml0dGVzdC5UZXN0Q2FzZSk6DQoNCiAgICBkZWYgZ2V0UnVubmVyKHNlbGYpOg0KICAgICAgICByZXR1cm4gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIocmVzdWx0Y2xhc3M9cmVzdWx0RmFjdG9yeSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbT1pby5TdHJpbmdJTygpKQ0KICAgIGRlZiBydW5UZXN0cyhzZWxmLCAqY2FzZXMpOg0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQogICAgICAgIGZvciBjYXNlIGluIGNhc2VzOg0KICAgICAgICAgICAgdGVzdHMgPSB1bml0dGVzdC5kZWZhdWx0VGVzdExvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoY2FzZSkNCiAgICAgICAgICAgIHN1aXRlLmFkZFRlc3RzKHRlc3RzKQ0KDQogICAgICAgIHJ1bm5lciA9IHNlbGYuZ2V0UnVubmVyKCkNCg0KICAgICAgICAjIGNyZWF0aW5nIGEgbmVzdGVkIHN1aXRlIGV4cG9zZXMgc29tZSBwb3RlbnRpYWwgYnVncw0KICAgICAgICByZWFsU3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgICAgICByZWFsU3VpdGUuYWRkVGVzdChzdWl0ZSkNCiAgICAgICAgIyBhZGRpbmcgZW1wdHkgc3VpdGVzIHRvIHRoZSBlbmQgZXhwb3NlcyBwb3RlbnRpYWwgYnVncw0KICAgICAgICBzdWl0ZS5hZGRUZXN0KHVuaXR0ZXN0LlRlc3RTdWl0ZSgpKQ0KICAgICAgICByZWFsU3VpdGUuYWRkVGVzdCh1bml0dGVzdC5UZXN0U3VpdGUoKSkNCiAgICAgICAgcmV0dXJuIHJ1bm5lci5ydW4ocmVhbFN1aXRlKQ0KDQogICAgZGVmIHRlc3Rfc2V0dXBfY2xhc3Moc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgc2V0VXBDYWxsZWQgPSAwDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdC5zZXRVcENhbGxlZCArPSAxDQogICAgICAgICAgICAgICAgdW5pdHRlc3QuVGVzdENhc2Uuc2V0VXBDbGFzcygpDQogICAgICAgICAgICBkZWYgdGVzdF9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3RfdHdvKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLnJ1blRlc3RzKFRlc3QpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChUZXN0LnNldFVwQ2FsbGVkLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDApDQoNCiAgICBkZWYgdGVzdF90ZWFyZG93bl9jbGFzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICB0ZWFyRG93bkNhbGxlZCA9IDANCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICBUZXN0LnRlYXJEb3duQ2FsbGVkICs9IDENCiAgICAgICAgICAgICAgICB1bml0dGVzdC5UZXN0Q2FzZS50ZWFyRG93bkNsYXNzKCkNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHJlc3VsdCA9IHNlbGYucnVuVGVzdHMoVGVzdCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFRlc3QudGVhckRvd25DYWxsZWQsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCg0KICAgIGRlZiB0ZXN0X3RlYXJkb3duX2NsYXNzX3R3b19jbGFzc2VzKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRlYXJEb3duQ2FsbGVkID0gMA0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25DbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIFRlc3QudGVhckRvd25DYWxsZWQgKz0gMQ0KICAgICAgICAgICAgICAgIHVuaXR0ZXN0LlRlc3RDYXNlLnRlYXJEb3duQ2xhc3MoKQ0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgdGVhckRvd25DYWxsZWQgPSAwDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdDIudGVhckRvd25DYWxsZWQgKz0gMQ0KICAgICAgICAgICAgICAgIHVuaXR0ZXN0LlRlc3RDYXNlLnRlYXJEb3duQ2xhc3MoKQ0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgcmVzdWx0ID0gc2VsZi5ydW5UZXN0cyhUZXN0LCBUZXN0MikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFRlc3QudGVhckRvd25DYWxsZWQsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoVGVzdDIudGVhckRvd25DYWxsZWQsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCA0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCg0KICAgIGRlZiB0ZXN0X2Vycm9yX2luX3NldHVwY2xhc3Moc2VsZik6DQogICAgICAgIGNsYXNzIEJyb2tlblRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgc2V0VXBDbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignZm9vJykNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHJlc3VsdCA9IHNlbGYucnVuVGVzdHMoQnJva2VuVGVzdCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDEpDQogICAgICAgIGVycm9yLCBfID0gcmVzdWx0LmVycm9yc1swXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihlcnJvciksDQogICAgICAgICAgICAgICAgICAgICdzZXRVcENsYXNzICglcy5Ccm9rZW5UZXN0KScgJSBfX25hbWVfXykNCg0KICAgIGRlZiB0ZXN0X2Vycm9yX2luX3RlYXJkb3duX2NsYXNzKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRvcm5Eb3duID0gMA0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25DbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIFRlc3QudG9ybkRvd24gKz0gMQ0KICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignZm9vJykNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIFRlc3QyKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRvcm5Eb3duID0gMA0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25DbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIFRlc3QyLnRvcm5Eb3duICs9IDENCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ZvbycpDQogICAgICAgICAgICBkZWYgdGVzdF9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3RfdHdvKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLnJ1blRlc3RzKFRlc3QsIFRlc3QyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgNCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoVGVzdC50b3JuRG93biwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChUZXN0Mi50b3JuRG93biwgMSkNCg0KICAgICAgICBlcnJvciwgXyA9IHJlc3VsdC5lcnJvcnNbMF0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZXJyb3IpLA0KICAgICAgICAgICAgICAgICAgICAndGVhckRvd25DbGFzcyAoJXMuVGVzdCknICUgX19uYW1lX18pDQoNCiAgICBkZWYgdGVzdF9jbGFzc19ub3RfdG9ybmRvd25fd2hlbl9zZXR1cF9mYWlscyhzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICB0b3JuRG93biA9IEZhbHNlDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdC50b3JuRG93biA9IFRydWUNCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ZvbycpDQogICAgICAgICAgICBkZWYgdGVzdF9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHNlbGYucnVuVGVzdHMoVGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShUZXN0LnRvcm5Eb3duKQ0KDQogICAgZGVmIHRlc3RfY2xhc3Nfbm90X3NldHVwX29yX3Rvcm5kb3duX3doZW5fc2tpcHBlZChzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBjbGFzc1NldFVwID0gRmFsc2UNCiAgICAgICAgICAgIHRvcm5Eb3duID0gRmFsc2UNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICBUZXN0LmNsYXNzU2V0VXAgPSBUcnVlDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdC50b3JuRG93biA9IFRydWUNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgVGVzdCA9IHVuaXR0ZXN0LnNraXAoImhvcCIpKFRlc3QpDQogICAgICAgIHNlbGYucnVuVGVzdHMoVGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShUZXN0LmNsYXNzU2V0VXApDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoVGVzdC50b3JuRG93bikNCg0KICAgIGRlZiB0ZXN0X3NldHVwX3RlYXJkb3duX29yZGVyX3dpdGhfcGF0aG9sb2dpY2FsX3N1aXRlKHNlbGYpOg0KICAgICAgICByZXN1bHRzID0gW10NCg0KICAgICAgICBjbGFzcyBNb2R1bGUxKG9iamVjdCk6DQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgc2V0VXBNb2R1bGUoKToNCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnTW9kdWxlMS5zZXRVcE1vZHVsZScpDQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25Nb2R1bGUoKToNCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnTW9kdWxlMS50ZWFyRG93bk1vZHVsZScpDQoNCiAgICAgICAgY2xhc3MgTW9kdWxlMihvYmplY3QpOg0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ01vZHVsZTIuc2V0VXBNb2R1bGUnKQ0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ01vZHVsZTIudGVhckRvd25Nb2R1bGUnKQ0KDQogICAgICAgIGNsYXNzIFRlc3QxKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnc2V0dXAgMScpDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ3RlYXJkb3duIDEnKQ0KICAgICAgICAgICAgZGVmIHRlc3RPbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QxLnRlc3RPbmUnKQ0KICAgICAgICAgICAgZGVmIHRlc3RUd28oc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QxLnRlc3RUd28nKQ0KDQogICAgICAgIGNsYXNzIFRlc3QyKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnc2V0dXAgMicpDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ3RlYXJkb3duIDInKQ0KICAgICAgICAgICAgZGVmIHRlc3RPbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QyLnRlc3RPbmUnKQ0KICAgICAgICAgICAgZGVmIHRlc3RUd28oc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QyLnRlc3RUd28nKQ0KDQogICAgICAgIGNsYXNzIFRlc3QzKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnc2V0dXAgMycpDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ3RlYXJkb3duIDMnKQ0KICAgICAgICAgICAgZGVmIHRlc3RPbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QzLnRlc3RPbmUnKQ0KICAgICAgICAgICAgZGVmIHRlc3RUd28oc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QzLnRlc3RUd28nKQ0KDQogICAgICAgIFRlc3QxLl9fbW9kdWxlX18gPSBUZXN0Mi5fX21vZHVsZV9fID0gJ01vZHVsZScNCiAgICAgICAgVGVzdDMuX19tb2R1bGVfXyA9ICdNb2R1bGUyJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUxDQogICAgICAgIHN5cy5tb2R1bGVzWydNb2R1bGUyJ10gPSBNb2R1bGUyDQoNCiAgICAgICAgZmlyc3QgPSB1bml0dGVzdC5UZXN0U3VpdGUoKFRlc3QxKCd0ZXN0T25lJyksKSkNCiAgICAgICAgc2Vjb25kID0gdW5pdHRlc3QuVGVzdFN1aXRlKChUZXN0MSgndGVzdFR3bycpLCkpDQogICAgICAgIHRoaXJkID0gdW5pdHRlc3QuVGVzdFN1aXRlKChUZXN0MigndGVzdE9uZScpLCkpDQogICAgICAgIGZvdXJ0aCA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgoVGVzdDIoJ3Rlc3RUd28nKSwpKQ0KICAgICAgICBmaWZ0aCA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgoVGVzdDMoJ3Rlc3RPbmUnKSwpKQ0KICAgICAgICBzaXh0aCA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgoVGVzdDMoJ3Rlc3RUd28nKSwpKQ0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgoZmlyc3QsIHNlY29uZCwgdGhpcmQsIGZvdXJ0aCwgZmlmdGgsIHNpeHRoKSkNCg0KICAgICAgICBydW5uZXIgPSBzZWxmLmdldFJ1bm5lcigpDQogICAgICAgIHJlc3VsdCA9IHJ1bm5lci5ydW4oc3VpdGUpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCA2KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgWydNb2R1bGUxLnNldFVwTW9kdWxlJywgJ3NldHVwIDEnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAnVGVzdDEudGVzdE9uZScsICdUZXN0MS50ZXN0VHdvJywgJ3RlYXJkb3duIDEnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAnc2V0dXAgMicsICdUZXN0Mi50ZXN0T25lJywgJ1Rlc3QyLnRlc3RUd28nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAndGVhcmRvd24gMicsICdNb2R1bGUxLnRlYXJEb3duTW9kdWxlJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ01vZHVsZTIuc2V0VXBNb2R1bGUnLCAnc2V0dXAgMycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICdUZXN0My50ZXN0T25lJywgJ1Rlc3QzLnRlc3RUd28nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAndGVhcmRvd24gMycsICdNb2R1bGUyLnRlYXJEb3duTW9kdWxlJ10pDQoNCiAgICBkZWYgdGVzdF9zZXR1cF9tb2R1bGUoc2VsZik6DQogICAgICAgIGNsYXNzIE1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgbW9kdWxlU2V0dXAgPSAwDQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgc2V0VXBNb2R1bGUoKToNCiAgICAgICAgICAgICAgICBNb2R1bGUubW9kdWxlU2V0dXAgKz0gMQ0KDQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIFRlc3QuX19tb2R1bGVfXyA9ICdNb2R1bGUnDQogICAgICAgIHN5cy5tb2R1bGVzWydNb2R1bGUnXSA9IE1vZHVsZQ0KDQogICAgICAgIHJlc3VsdCA9IHNlbGYucnVuVGVzdHMoVGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChNb2R1bGUubW9kdWxlU2V0dXAsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCg0KICAgIGRlZiB0ZXN0X2Vycm9yX2luX3NldHVwX21vZHVsZShzZWxmKToNCiAgICAgICAgY2xhc3MgTW9kdWxlKG9iamVjdCk6DQogICAgICAgICAgICBtb2R1bGVTZXR1cCA9IDANCiAgICAgICAgICAgIG1vZHVsZVRvcm5Eb3duID0gMA0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgTW9kdWxlLm1vZHVsZVNldHVwICs9IDENCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ZvbycpDQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25Nb2R1bGUoKToNCiAgICAgICAgICAgICAgICBNb2R1bGUubW9kdWxlVG9ybkRvd24gKz0gMQ0KDQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgY2xhc3NTZXRVcCA9IEZhbHNlDQogICAgICAgICAgICBjbGFzc1Rvcm5Eb3duID0gRmFsc2UNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICBUZXN0LmNsYXNzU2V0VXAgPSBUcnVlDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdC5jbGFzc1Rvcm5Eb3duID0gVHJ1ZQ0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIFRlc3QuX19tb2R1bGVfXyA9ICdNb2R1bGUnDQogICAgICAgIFRlc3QyLl9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLnJ1blRlc3RzKFRlc3QsIFRlc3QyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKE1vZHVsZS5tb2R1bGVTZXR1cCwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChNb2R1bGUubW9kdWxlVG9ybkRvd24sIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKFRlc3QuY2xhc3NTZXRVcCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShUZXN0LmNsYXNzVG9ybkRvd24pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KICAgICAgICBlcnJvciwgXyA9IHJlc3VsdC5lcnJvcnNbMF0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZXJyb3IpLCAnc2V0VXBNb2R1bGUgKE1vZHVsZSknKQ0KDQogICAgZGVmIHRlc3RfdGVzdGNhc2Vfd2l0aF9taXNzaW5nX21vZHVsZShzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3RfdHdvKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgVGVzdC5fX21vZHVsZV9fID0gJ01vZHVsZScNCiAgICAgICAgc3lzLm1vZHVsZXMucG9wKCdNb2R1bGUnLCBOb25lKQ0KDQogICAgICAgIHJlc3VsdCA9IHNlbGYucnVuVGVzdHMoVGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDIpDQoNCiAgICBkZWYgdGVzdF90ZWFyZG93bl9tb2R1bGUoc2VsZik6DQogICAgICAgIGNsYXNzIE1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgbW9kdWxlVG9ybkRvd24gPSAwDQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25Nb2R1bGUoKToNCiAgICAgICAgICAgICAgICBNb2R1bGUubW9kdWxlVG9ybkRvd24gKz0gMQ0KDQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIFRlc3QuX19tb2R1bGVfXyA9ICdNb2R1bGUnDQogICAgICAgIHN5cy5tb2R1bGVzWydNb2R1bGUnXSA9IE1vZHVsZQ0KDQogICAgICAgIHJlc3VsdCA9IHNlbGYucnVuVGVzdHMoVGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChNb2R1bGUubW9kdWxlVG9ybkRvd24sIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCg0KICAgIGRlZiB0ZXN0X2Vycm9yX2luX3RlYXJkb3duX21vZHVsZShzZWxmKToNCiAgICAgICAgY2xhc3MgTW9kdWxlKG9iamVjdCk6DQogICAgICAgICAgICBtb2R1bGVUb3JuRG93biA9IDANCiAgICAgICAgICAgIEBzdGF0aWNtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bk1vZHVsZSgpOg0KICAgICAgICAgICAgICAgIE1vZHVsZS5tb2R1bGVUb3JuRG93biArPSAxDQogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdmb28nKQ0KDQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgY2xhc3NTZXRVcCA9IEZhbHNlDQogICAgICAgICAgICBjbGFzc1Rvcm5Eb3duID0gRmFsc2UNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICBUZXN0LmNsYXNzU2V0VXAgPSBUcnVlDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdC5jbGFzc1Rvcm5Eb3duID0gVHJ1ZQ0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIFRlc3QuX19tb2R1bGVfXyA9ICdNb2R1bGUnDQogICAgICAgIFRlc3QyLl9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLnJ1blRlc3RzKFRlc3QsIFRlc3QyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKE1vZHVsZS5tb2R1bGVUb3JuRG93biwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDQpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShUZXN0LmNsYXNzU2V0VXApDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShUZXN0LmNsYXNzVG9ybkRvd24pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KICAgICAgICBlcnJvciwgXyA9IHJlc3VsdC5lcnJvcnNbMF0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZXJyb3IpLCAndGVhckRvd25Nb2R1bGUgKE1vZHVsZSknKQ0KDQogICAgZGVmIHRlc3Rfc2tpcHRlc3RfaW5fc2V0dXBjbGFzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgcmFpc2UgdW5pdHRlc3QuU2tpcFRlc3QoJ2ZvbycpDQogICAgICAgICAgICBkZWYgdGVzdF9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3RfdHdvKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLnJ1blRlc3RzKFRlc3QpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LnNraXBwZWQpLCAxKQ0KICAgICAgICBza2lwcGVkID0gcmVzdWx0LnNraXBwZWRbMF1bMF0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoc2tpcHBlZCksICdzZXRVcENsYXNzICglcy5UZXN0KScgJSBfX25hbWVfXykNCg0KICAgIGRlZiB0ZXN0X3NraXB0ZXN0X2luX3NldHVwbW9kdWxlKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIE1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgcmFpc2UgdW5pdHRlc3QuU2tpcFRlc3QoJ2ZvbycpDQoNCiAgICAgICAgVGVzdC5fX21vZHVsZV9fID0gJ01vZHVsZScNCiAgICAgICAgc3lzLm1vZHVsZXNbJ01vZHVsZSddID0gTW9kdWxlDQoNCiAgICAgICAgcmVzdWx0ID0gc2VsZi5ydW5UZXN0cyhUZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5za2lwcGVkKSwgMSkNCiAgICAgICAgc2tpcHBlZCA9IHJlc3VsdC5za2lwcGVkWzBdWzBdDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKHNraXBwZWQpLCAnc2V0VXBNb2R1bGUgKE1vZHVsZSknKQ0KDQogICAgZGVmIHRlc3Rfc3VpdGVfZGVidWdfZXhlY3V0ZXNfc2V0dXBzX2FuZF90ZWFyZG93bnMoc2VsZik6DQogICAgICAgIG9yZGVyaW5nID0gW10NCg0KICAgICAgICBjbGFzcyBNb2R1bGUob2JqZWN0KToNCiAgICAgICAgICAgIEBzdGF0aWNtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcE1vZHVsZSgpOg0KICAgICAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgnc2V0VXBNb2R1bGUnKQ0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgb3JkZXJpbmcuYXBwZW5kKCd0ZWFyRG93bk1vZHVsZScpDQoNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgb3JkZXJpbmcuYXBwZW5kKCdzZXRVcENsYXNzJykNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICBvcmRlcmluZy5hcHBlbmQoJ3RlYXJEb3duQ2xhc3MnKQ0KICAgICAgICAgICAgZGVmIHRlc3Rfc29tZXRoaW5nKHNlbGYpOg0KICAgICAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgndGVzdF9zb21ldGhpbmcnKQ0KDQogICAgICAgIFRlc3QuX19tb2R1bGVfXyA9ICdNb2R1bGUnDQogICAgICAgIHN5cy5tb2R1bGVzWydNb2R1bGUnXSA9IE1vZHVsZQ0KDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuZGVmYXVsdFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbVRlc3RDYXNlKFRlc3QpDQogICAgICAgIHN1aXRlLmRlYnVnKCkNCiAgICAgICAgZXhwZWN0ZWRPcmRlciA9IFsnc2V0VXBNb2R1bGUnLCAnc2V0VXBDbGFzcycsICd0ZXN0X3NvbWV0aGluZycsICd0ZWFyRG93bkNsYXNzJywgJ3RlYXJEb3duTW9kdWxlJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvcmRlcmluZywgZXhwZWN0ZWRPcmRlcikNCg0KICAgIGRlZiB0ZXN0X3N1aXRlX2RlYnVnX3Byb3BhZ2F0ZXNfZXhjZXB0aW9ucyhzZWxmKToNCiAgICAgICAgY2xhc3MgTW9kdWxlKG9iamVjdCk6DQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgc2V0VXBNb2R1bGUoKToNCiAgICAgICAgICAgICAgICBpZiBwaGFzZSA9PSAwOg0KICAgICAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3NldFVwTW9kdWxlJykNCiAgICAgICAgICAgIEBzdGF0aWNtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bk1vZHVsZSgpOg0KICAgICAgICAgICAgICAgIGlmIHBoYXNlID09IDE6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigndGVhckRvd25Nb2R1bGUnKQ0KDQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgc2V0VXBDbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIGlmIHBoYXNlID09IDI6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbignc2V0VXBDbGFzcycpDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgaWYgcGhhc2UgPT0gMzoNCiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd0ZWFyRG93bkNsYXNzJykNCiAgICAgICAgICAgIGRlZiB0ZXN0X3NvbWV0aGluZyhzZWxmKToNCiAgICAgICAgICAgICAgICBpZiBwaGFzZSA9PSA0Og0KICAgICAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3Rlc3Rfc29tZXRoaW5nJykNCg0KICAgICAgICBUZXN0Ll9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCg0KICAgICAgICBfc3VpdGUgPSB1bml0dGVzdC5kZWZhdWx0VGVzdExvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoVGVzdCkNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgICAgICBzdWl0ZS5hZGRUZXN0KF9zdWl0ZSkNCg0KICAgICAgICBtZXNzYWdlcyA9ICgnc2V0VXBNb2R1bGUnLCAndGVhckRvd25Nb2R1bGUnLCAnc2V0VXBDbGFzcycsICd0ZWFyRG93bkNsYXNzJywgJ3Rlc3Rfc29tZXRoaW5nJykNCiAgICAgICAgZm9yIHBoYXNlLCBtc2cgaW4gZW51bWVyYXRlKG1lc3NhZ2VzKToNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXNSZWdleChFeGNlcHRpb24sIG1zZyk6DQogICAgICAgICAgICAgICAgc3VpdGUuZGVidWcoKQ0KDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgIHVuaXR0ZXN0Lm1haW4oKQ0K',
'/Lib/unittest/test/test_runner.py':'aW1wb3J0IGlvDQppbXBvcnQgb3MNCmltcG9ydCBzeXMNCmltcG9ydCBwaWNrbGUNCmltcG9ydCBzdWJwcm9jZXNzDQoNCmltcG9ydCB1bml0dGVzdA0KDQpmcm9tIC5zdXBwb3J0IGltcG9ydCBMb2dnaW5nUmVzdWx0LCBSZXN1bHRXaXRoTm9TdGFydFRlc3RSdW5TdG9wVGVzdFJ1bg0KDQoNCmNsYXNzIFRlc3RDbGVhblVwKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiB0ZXN0Q2xlYW5VcChzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdGFibGVUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0Tm90aGluZyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgdGVzdCA9IFRlc3RhYmxlVGVzdCgndGVzdE5vdGhpbmcnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRlc3QuX2NsZWFudXBzLCBbXSkNCg0KICAgICAgICBjbGVhbnVwcyA9IFtdDQoNCiAgICAgICAgZGVmIGNsZWFudXAxKCphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICAgICBjbGVhbnVwcy5hcHBlbmQoKDEsIGFyZ3MsIGt3YXJncykpDQoNCiAgICAgICAgZGVmIGNsZWFudXAyKCphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICAgICBjbGVhbnVwcy5hcHBlbmQoKDIsIGFyZ3MsIGt3YXJncykpDQoNCiAgICAgICAgdGVzdC5hZGRDbGVhbnVwKGNsZWFudXAxLCAxLCAyLCAzLCBmb3VyPSdoZWxsbycsIGZpdmU9J2dvb2RieWUnKQ0KICAgICAgICB0ZXN0LmFkZENsZWFudXAoY2xlYW51cDIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCh0ZXN0Ll9jbGVhbnVwcywNCiAgICAgICAgICAgICAgICAgICAgICAgICBbKGNsZWFudXAxLCAoMSwgMiwgMyksIGRpY3QoZm91cj0naGVsbG8nLCBmaXZlPSdnb29kYnllJykpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xlYW51cDIsICgpLCB7fSldKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZSh0ZXN0LmRvQ2xlYW51cHMoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjbGVhbnVwcywgWygyLCAoKSwge30pLCAoMSwgKDEsIDIsIDMpLCBkaWN0KGZvdXI9J2hlbGxvJywgZml2ZT0nZ29vZGJ5ZScpKV0pDQoNCiAgICBkZWYgdGVzdENsZWFuVXBXaXRoRXJyb3JzKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0YWJsZVRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3ROb3RoaW5nKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBNb2NrT3V0Y29tZShvYmplY3QpOg0KICAgICAgICAgICAgc3VjY2VzcyA9IFRydWUNCiAgICAgICAgICAgIGVycm9ycyA9IFtdDQoNCiAgICAgICAgdGVzdCA9IFRlc3RhYmxlVGVzdCgndGVzdE5vdGhpbmcnKQ0KICAgICAgICB0ZXN0Ll9vdXRjb21lRm9yRG9DbGVhbnVwcyA9IE1vY2tPdXRjb21lDQoNCiAgICAgICAgZXhjMSA9IEV4Y2VwdGlvbignZm9vJykNCiAgICAgICAgZXhjMiA9IEV4Y2VwdGlvbignYmFyJykNCiAgICAgICAgZGVmIGNsZWFudXAxKCk6DQogICAgICAgICAgICByYWlzZSBleGMxDQoNCiAgICAgICAgZGVmIGNsZWFudXAyKCk6DQogICAgICAgICAgICByYWlzZSBleGMyDQoNCiAgICAgICAgdGVzdC5hZGRDbGVhbnVwKGNsZWFudXAxKQ0KICAgICAgICB0ZXN0LmFkZENsZWFudXAoY2xlYW51cDIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZSh0ZXN0LmRvQ2xlYW51cHMoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShNb2NrT3V0Y29tZS5zdWNjZXNzKQ0KDQogICAgICAgIChUeXBlMSwgaW5zdGFuY2UxLCBfKSwgKFR5cGUyLCBpbnN0YW5jZTIsIF8pID0gcmV2ZXJzZWQoTW9ja091dGNvbWUuZXJyb3JzKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKChUeXBlMSwgaW5zdGFuY2UxKSwgKEV4Y2VwdGlvbiwgZXhjMSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoKFR5cGUyLCBpbnN0YW5jZTIpLCAoRXhjZXB0aW9uLCBleGMyKSkNCg0KICAgIGRlZiB0ZXN0Q2xlYW51cEluUnVuKHNlbGYpOg0KICAgICAgICBibG93VXAgPSBGYWxzZQ0KICAgICAgICBvcmRlcmluZyA9IFtdDQoNCiAgICAgICAgY2xhc3MgVGVzdGFibGVUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBzZXRVcChzZWxmKToNCiAgICAgICAgICAgICAgICBvcmRlcmluZy5hcHBlbmQoJ3NldFVwJykNCiAgICAgICAgICAgICAgICBpZiBibG93VXA6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbignZm9vJykNCg0KICAgICAgICAgICAgZGVmIHRlc3ROb3RoaW5nKHNlbGYpOg0KICAgICAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgndGVzdCcpDQoNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bihzZWxmKToNCiAgICAgICAgICAgICAgICBvcmRlcmluZy5hcHBlbmQoJ3RlYXJEb3duJykNCg0KICAgICAgICB0ZXN0ID0gVGVzdGFibGVUZXN0KCd0ZXN0Tm90aGluZycpDQoNCiAgICAgICAgZGVmIGNsZWFudXAxKCk6DQogICAgICAgICAgICBvcmRlcmluZy5hcHBlbmQoJ2NsZWFudXAxJykNCiAgICAgICAgZGVmIGNsZWFudXAyKCk6DQogICAgICAgICAgICBvcmRlcmluZy5hcHBlbmQoJ2NsZWFudXAyJykNCiAgICAgICAgdGVzdC5hZGRDbGVhbnVwKGNsZWFudXAxKQ0KICAgICAgICB0ZXN0LmFkZENsZWFudXAoY2xlYW51cDIpDQoNCiAgICAgICAgZGVmIHN1Y2Nlc3Moc29tZV90ZXN0KToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZV90ZXN0LCB0ZXN0KQ0KICAgICAgICAgICAgb3JkZXJpbmcuYXBwZW5kKCdzdWNjZXNzJykNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgcmVzdWx0LmFkZFN1Y2Nlc3MgPSBzdWNjZXNzDQoNCiAgICAgICAgdGVzdC5ydW4ocmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG9yZGVyaW5nLCBbJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsZWFudXAyJywgJ2NsZWFudXAxJywgJ3N1Y2Nlc3MnXSkNCg0KICAgICAgICBibG93VXAgPSBUcnVlDQogICAgICAgIG9yZGVyaW5nID0gW10NCiAgICAgICAgdGVzdCA9IFRlc3RhYmxlVGVzdCgndGVzdE5vdGhpbmcnKQ0KICAgICAgICB0ZXN0LmFkZENsZWFudXAoY2xlYW51cDEpDQogICAgICAgIHRlc3QucnVuKHJlc3VsdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvcmRlcmluZywgWydzZXRVcCcsICdjbGVhbnVwMSddKQ0KDQogICAgZGVmIHRlc3RUZXN0Q2FzZURlYnVnRXhlY3V0ZXNDbGVhbnVwcyhzZWxmKToNCiAgICAgICAgb3JkZXJpbmcgPSBbXQ0KDQogICAgICAgIGNsYXNzIFRlc3RhYmxlVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgc2V0VXAoc2VsZik6DQogICAgICAgICAgICAgICAgb3JkZXJpbmcuYXBwZW5kKCdzZXRVcCcpDQogICAgICAgICAgICAgICAgc2VsZi5hZGRDbGVhbnVwKGNsZWFudXAxKQ0KDQogICAgICAgICAgICBkZWYgdGVzdE5vdGhpbmcoc2VsZik6DQogICAgICAgICAgICAgICAgb3JkZXJpbmcuYXBwZW5kKCd0ZXN0JykNCg0KICAgICAgICAgICAgZGVmIHRlYXJEb3duKHNlbGYpOg0KICAgICAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgndGVhckRvd24nKQ0KDQogICAgICAgIHRlc3QgPSBUZXN0YWJsZVRlc3QoJ3Rlc3ROb3RoaW5nJykNCg0KICAgICAgICBkZWYgY2xlYW51cDEoKToNCiAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgnY2xlYW51cDEnKQ0KICAgICAgICAgICAgdGVzdC5hZGRDbGVhbnVwKGNsZWFudXAyKQ0KICAgICAgICBkZWYgY2xlYW51cDIoKToNCiAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgnY2xlYW51cDInKQ0KDQogICAgICAgIHRlc3QuZGVidWcoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG9yZGVyaW5nLCBbJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLCAnY2xlYW51cDEnLCAnY2xlYW51cDInXSkNCg0KDQpjbGFzcyBUZXN0X1RleHRUZXN0UnVubmVyKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAiIiJUZXN0cyBmb3IgVGV4dFRlc3RSdW5uZXIuIiIiDQoNCiAgICBkZWYgdGVzdF9pbml0KHNlbGYpOg0KICAgICAgICBydW5uZXIgPSB1bml0dGVzdC5UZXh0VGVzdFJ1bm5lcigpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocnVubmVyLmZhaWxmYXN0KQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKHJ1bm5lci5idWZmZXIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocnVubmVyLnZlcmJvc2l0eSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChydW5uZXIud2FybmluZ3MsIE5vbmUpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShydW5uZXIuZGVzY3JpcHRpb25zKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJ1bm5lci5yZXN1bHRjbGFzcywgdW5pdHRlc3QuVGV4dFRlc3RSZXN1bHQpDQoNCg0KICAgIGRlZiB0ZXN0QnVmZmVyQW5kRmFpbGZhc3Qoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RGb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgcnVubmVyID0gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoc3RyZWFtPWlvLlN0cmluZ0lPKCksIGZhaWxmYXN0PVRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyPVRydWUpDQogICAgICAgICMgVXNlIG91ciByZXN1bHQgb2JqZWN0DQogICAgICAgIHJ1bm5lci5fbWFrZVJlc3VsdCA9IGxhbWJkYTogcmVzdWx0DQogICAgICAgIHJ1bm5lci5ydW4oVGVzdCgndGVzdEZvbycpKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQuZmFpbGZhc3QpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQuYnVmZmVyKQ0KDQogICAgZGVmIHRlc3RSdW5uZXJSZWdpc3RlcnNSZXN1bHQoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RGb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBvcmlnaW5hbFJlZ2lzdGVyUmVzdWx0ID0gdW5pdHRlc3QucnVubmVyLnJlZ2lzdGVyUmVzdWx0DQogICAgICAgIGRlZiBjbGVhbnVwKCk6DQogICAgICAgICAgICB1bml0dGVzdC5ydW5uZXIucmVnaXN0ZXJSZXN1bHQgPSBvcmlnaW5hbFJlZ2lzdGVyUmVzdWx0DQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChjbGVhbnVwKQ0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICBydW5uZXIgPSB1bml0dGVzdC5UZXh0VGVzdFJ1bm5lcihzdHJlYW09aW8uU3RyaW5nSU8oKSkNCiAgICAgICAgIyBVc2Ugb3VyIHJlc3VsdCBvYmplY3QNCiAgICAgICAgcnVubmVyLl9tYWtlUmVzdWx0ID0gbGFtYmRhOiByZXN1bHQNCg0KICAgICAgICBzZWxmLndhc1JlZ2lzdGVyZWQgPSAwDQogICAgICAgIGRlZiBmYWtlUmVnaXN0ZXJSZXN1bHQodGhpc1Jlc3VsdCk6DQogICAgICAgICAgICBzZWxmLndhc1JlZ2lzdGVyZWQgKz0gMQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCh0aGlzUmVzdWx0LCByZXN1bHQpDQogICAgICAgIHVuaXR0ZXN0LnJ1bm5lci5yZWdpc3RlclJlc3VsdCA9IGZha2VSZWdpc3RlclJlc3VsdA0KDQogICAgICAgIHJ1bm5lci5ydW4odW5pdHRlc3QuVGVzdFN1aXRlKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2VsZi53YXNSZWdpc3RlcmVkLCAxKQ0KDQogICAgZGVmIHRlc3Rfd29ya3Nfd2l0aF9yZXN1bHRfd2l0aG91dF9zdGFydFRlc3RSdW5fc3RvcFRlc3RSdW4oc2VsZik6DQogICAgICAgIGNsYXNzIE9sZFRleHRSZXN1bHQoUmVzdWx0V2l0aE5vU3RhcnRUZXN0UnVuU3RvcFRlc3RSdW4pOg0KICAgICAgICAgICAgc2VwYXJhdG9yMiA9ICcnDQogICAgICAgICAgICBkZWYgcHJpbnRFcnJvcnMoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIFJ1bm5lcih1bml0dGVzdC5UZXh0VGVzdFJ1bm5lcik6DQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgICAgICAgICAgc3VwZXIoUnVubmVyLCBzZWxmKS5fX2luaXRfXyhpby5TdHJpbmdJTygpKQ0KDQogICAgICAgICAgICBkZWYgX21ha2VSZXN1bHQoc2VsZik6DQogICAgICAgICAgICAgICAgcmV0dXJuIE9sZFRleHRSZXN1bHQoKQ0KDQogICAgICAgIHJ1bm5lciA9IFJ1bm5lcigpDQogICAgICAgIHJ1bm5lci5ydW4odW5pdHRlc3QuVGVzdFN1aXRlKCkpDQoNCiAgICBkZWYgdGVzdF9zdGFydFRlc3RSdW5fc3RvcFRlc3RSdW5fY2FsbGVkKHNlbGYpOg0KICAgICAgICBjbGFzcyBMb2dnaW5nVGV4dFJlc3VsdChMb2dnaW5nUmVzdWx0KToNCiAgICAgICAgICAgIHNlcGFyYXRvcjIgPSAnJw0KICAgICAgICAgICAgZGVmIHByaW50RXJyb3JzKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBMb2dnaW5nUnVubmVyKHVuaXR0ZXN0LlRleHRUZXN0UnVubmVyKToNCiAgICAgICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBldmVudHMpOg0KICAgICAgICAgICAgICAgIHN1cGVyKExvZ2dpbmdSdW5uZXIsIHNlbGYpLl9faW5pdF9fKGlvLlN0cmluZ0lPKCkpDQogICAgICAgICAgICAgICAgc2VsZi5fZXZlbnRzID0gZXZlbnRzDQoNCiAgICAgICAgICAgIGRlZiBfbWFrZVJlc3VsdChzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTG9nZ2luZ1RleHRSZXN1bHQoc2VsZi5fZXZlbnRzKQ0KDQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJ1bm5lciA9IExvZ2dpbmdSdW5uZXIoZXZlbnRzKQ0KICAgICAgICBydW5uZXIucnVuKHVuaXR0ZXN0LlRlc3RTdWl0ZSgpKQ0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0UnVuJywgJ3N0b3BUZXN0UnVuJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIGV4cGVjdGVkKQ0KDQogICAgZGVmIHRlc3RfcGlja2xlX3VucGlja2xlKHNlbGYpOg0KICAgICAgICAjIElzc3VlICM3MTk3OiBhIFRleHRUZXN0UnVubmVyIHNob3VsZCBiZSAodW4pcGlja2xlYWJsZS4gVGhpcyBpcw0KICAgICAgICAjIHJlcXVpcmVkIGJ5IHRlc3RfbXVsdGlwcm9jZXNzaW5nIHVuZGVyIFdpbmRvd3MgKGluIHZlcmJvc2UgbW9kZSkuDQogICAgICAgIHN0cmVhbSA9IGlvLlN0cmluZ0lPKCJmb28iKQ0KICAgICAgICBydW5uZXIgPSB1bml0dGVzdC5UZXh0VGVzdFJ1bm5lcihzdHJlYW0pDQogICAgICAgIGZvciBwcm90b2NvbCBpbiByYW5nZSgyLCBwaWNrbGUuSElHSEVTVF9QUk9UT0NPTCArIDEpOg0KICAgICAgICAgICAgcyA9IHBpY2tsZS5kdW1wcyhydW5uZXIsIHByb3RvY29sKQ0KICAgICAgICAgICAgb2JqID0gcGlja2xlLmxvYWRzKHMpDQogICAgICAgICAgICAjIFN0cmluZ0lPIG9iamVjdHMgbmV2ZXIgY29tcGFyZSBlcXVhbCwgYSBjaGVhcCB0ZXN0IGluc3RlYWQuDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG9iai5zdHJlYW0uZ2V0dmFsdWUoKSwgc3RyZWFtLmdldHZhbHVlKCkpDQoNCiAgICBkZWYgdGVzdF9yZXN1bHRjbGFzcyhzZWxmKToNCiAgICAgICAgZGVmIE1vY2tSZXN1bHRDbGFzcygqYXJncyk6DQogICAgICAgICAgICByZXR1cm4gYXJncw0KICAgICAgICBTVFJFQU0gPSBvYmplY3QoKQ0KICAgICAgICBERVNDUklQVElPTlMgPSBvYmplY3QoKQ0KICAgICAgICBWRVJCT1NJVFkgPSBvYmplY3QoKQ0KICAgICAgICBydW5uZXIgPSB1bml0dGVzdC5UZXh0VGVzdFJ1bm5lcihTVFJFQU0sIERFU0NSSVBUSU9OUywgVkVSQk9TSVRZLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRjbGFzcz1Nb2NrUmVzdWx0Q2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocnVubmVyLnJlc3VsdGNsYXNzLCBNb2NrUmVzdWx0Q2xhc3MpDQoNCiAgICAgICAgZXhwZWN0ZWRyZXN1bHQgPSAocnVubmVyLnN0cmVhbSwgREVTQ1JJUFRJT05TLCBWRVJCT1NJVFkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocnVubmVyLl9tYWtlUmVzdWx0KCksIGV4cGVjdGVkcmVzdWx0KQ0KDQogICAgZGVmIHRlc3Rfd2FybmluZ3Moc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBDaGVjayB0aGF0IHdhcm5pbmdzIGFyZ3VtZW50IG9mIFRleHRUZXN0UnVubmVyIGNvcnJlY3RseSBhZmZlY3RzIHRoZQ0KICAgICAgICBiZWhhdmlvciBvZiB0aGUgd2FybmluZ3MuDQogICAgICAgICIiIg0KICAgICAgICAjIHNlZSAjMTA1MzUgYW5kIHRoZSBfdGVzdF93YXJuaW5ncyBmaWxlIGZvciBtb3JlIGluZm9ybWF0aW9uDQoNCiAgICAgICAgZGVmIGdldF9wYXJzZV9vdXRfZXJyKHApOg0KICAgICAgICAgICAgcmV0dXJuIFtiLnNwbGl0bGluZXMoKSBmb3IgYiBpbiBwLmNvbW11bmljYXRlKCldDQogICAgICAgIG9wdHMgPSBkaWN0KHN0ZG91dD1zdWJwcm9jZXNzLlBJUEUsIHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUsDQogICAgICAgICAgICAgICAgICAgIGN3ZD1vcy5wYXRoLmRpcm5hbWUoX19maWxlX18pKQ0KICAgICAgICBhZV9tc2cgPSBiJ1BsZWFzZSB1c2UgYXNzZXJ0RXF1YWwgaW5zdGVhZC4nDQogICAgICAgIGF0X21zZyA9IGInUGxlYXNlIHVzZSBhc3NlcnRUcnVlIGluc3RlYWQuJw0KDQogICAgICAgICMgbm8gYXJncyAtPiBhbGwgdGhlIHdhcm5pbmdzIGFyZSBwcmludGVkLCB1bml0dGVzdCB3YXJuaW5ncyBvbmx5IG9uY2UNCiAgICAgICAgcCA9IHN1YnByb2Nlc3MuUG9wZW4oW3N5cy5leGVjdXRhYmxlLCAnX3Rlc3Rfd2FybmluZ3MucHknXSwgKipvcHRzKQ0KICAgICAgICBvdXQsIGVyciA9IGdldF9wYXJzZV9vdXRfZXJyKHApDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oYidPSycsIGVycikNCiAgICAgICAgIyBjaGVjayB0aGF0IHRoZSB0b3RhbCBudW1iZXIgb2Ygd2FybmluZ3MgaW4gdGhlIG91dHB1dCBpcyBjb3JyZWN0DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKG91dCksIDEyKQ0KICAgICAgICAjIGNoZWNrIHRoYXQgdGhlIG51bWJlcnMgb2YgdGhlIGRpZmZlcmVudCBraW5kIG9mIHdhcm5pbmdzIGlzIGNvcnJlY3QNCiAgICAgICAgZm9yIG1zZyBpbiBbYidkdycsIGInaXcnLCBiJ3V3J106DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG91dC5jb3VudChtc2cpLCAzKQ0KICAgICAgICBmb3IgbXNnIGluIFthZV9tc2csIGF0X21zZywgYidydyddOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvdXQuY291bnQobXNnKSwgMSkNCg0KICAgICAgICBhcmdzX2xpc3QgPSAoDQogICAgICAgICAgICAjIHBhc3NpbmcgJ2lnbm9yZScgYXMgd2FybmluZ3MgYXJnIC0+IG5vIHdhcm5pbmdzDQogICAgICAgICAgICBbc3lzLmV4ZWN1dGFibGUsICdfdGVzdF93YXJuaW5ncy5weScsICdpZ25vcmUnXSwNCiAgICAgICAgICAgICMgLVcgZG9lc24ndCBhZmZlY3QgdGhlIHJlc3VsdCBpZiB0aGUgYXJnIGlzIHBhc3NlZA0KICAgICAgICAgICAgW3N5cy5leGVjdXRhYmxlLCAnLVdhJywgJ190ZXN0X3dhcm5pbmdzLnB5JywgJ2lnbm9yZSddLA0KICAgICAgICAgICAgIyAtVyBhZmZlY3RzIHRoZSByZXN1bHQgaWYgdGhlIGFyZyBpcyBub3QgcGFzc2VkDQogICAgICAgICAgICBbc3lzLmV4ZWN1dGFibGUsICctV2knLCAnX3Rlc3Rfd2FybmluZ3MucHknXQ0KICAgICAgICApDQogICAgICAgICMgaW4gYWxsIHRoZXNlIGNhc2VzIG5vIHdhcm5pbmdzIGFyZSBwcmludGVkDQogICAgICAgIGZvciBhcmdzIGluIGFyZ3NfbGlzdDoNCiAgICAgICAgICAgIHAgPSBzdWJwcm9jZXNzLlBvcGVuKGFyZ3MsICoqb3B0cykNCiAgICAgICAgICAgIG91dCwgZXJyID0gZ2V0X3BhcnNlX291dF9lcnIocCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oYidPSycsIGVycikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKG91dCksIDApDQoNCg0KICAgICAgICAjIHBhc3NpbmcgJ2Fsd2F5cycgYXMgd2FybmluZ3MgYXJnIC0+IGFsbCB0aGUgd2FybmluZ3MgcHJpbnRlZCwNCiAgICAgICAgIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0dGVzdCB3YXJuaW5ncyBvbmx5IG9uY2UNCiAgICAgICAgcCA9IHN1YnByb2Nlc3MuUG9wZW4oW3N5cy5leGVjdXRhYmxlLCAnX3Rlc3Rfd2FybmluZ3MucHknLCAnYWx3YXlzJ10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqb3B0cykNCiAgICAgICAgb3V0LCBlcnIgPSBnZXRfcGFyc2Vfb3V0X2VycihwKQ0KICAgICAgICBzZWxmLmFzc2VydEluKGInT0snLCBlcnIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKG91dCksIDE0KQ0KICAgICAgICBmb3IgbXNnIGluIFtiJ2R3JywgYidpdycsIGIndXcnLCBiJ3J3J106DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG91dC5jb3VudChtc2cpLCAzKQ0KICAgICAgICBmb3IgbXNnIGluIFthZV9tc2csIGF0X21zZ106DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG91dC5jb3VudChtc2cpLCAxKQ0KDQogICAgZGVmIHRlc3RTdGRFcnJMb29rZWRVcEF0SW5zdGFudGlhdGlvblRpbWUoc2VsZik6DQogICAgICAgICMgc2VlIGlzc3VlIDEwNzg2DQogICAgICAgIG9sZF9zdGRlcnIgPSBzeXMuc3RkZXJyDQogICAgICAgIGYgPSBpby5TdHJpbmdJTygpDQogICAgICAgIHN5cy5zdGRlcnIgPSBmDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJ1bm5lciA9IHVuaXR0ZXN0LlRleHRUZXN0UnVubmVyKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShydW5uZXIuc3RyZWFtLnN0cmVhbSBpcyBmKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgc3lzLnN0ZGVyciA9IG9sZF9zdGRlcnINCg0KICAgIGRlZiB0ZXN0U3BlY2lmaWVkU3RyZWFtVXNlZChzZWxmKToNCiAgICAgICAgIyBzZWUgaXNzdWUgMTA3ODYNCiAgICAgICAgZiA9IGlvLlN0cmluZ0lPKCkNCiAgICAgICAgcnVubmVyID0gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoZikNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJ1bm5lci5zdHJlYW0uc3RyZWFtIGlzIGYpDQo=',
'/Lib/unittest/test/test_functiontestcase.py':'aW1wb3J0IHVuaXR0ZXN0DQoNCmZyb20gLnN1cHBvcnQgaW1wb3J0IExvZ2dpbmdSZXN1bHQNCg0KDQpjbGFzcyBUZXN0X0Z1bmN0aW9uVGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgIyAiUmV0dXJuIHRoZSBudW1iZXIgb2YgdGVzdHMgcmVwcmVzZW50ZWQgYnkgdGhlIHRoaXMgdGVzdCBvYmplY3QuIEZvcg0KICAgICMgVGVzdENhc2UgaW5zdGFuY2VzLCB0aGlzIHdpbGwgYWx3YXlzIGJlIDEiDQogICAgZGVmIHRlc3RfY291bnRUZXN0Q2FzZXMoc2VsZik6DQogICAgICAgIHRlc3QgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRlc3QuY291bnRUZXN0Q2FzZXMoKSwgMSkNCg0KICAgICMgIldoZW4gYSBzZXRVcCgpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUgdGVzdCBydW5uZXIgd2lsbCBydW4gdGhhdCBtZXRob2QNCiAgICAjIHByaW9yIHRvIGVhY2ggdGVzdC4gTGlrZXdpc2UsIGlmIGEgdGVhckRvd24oKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlDQogICAgIyB0ZXN0IHJ1bm5lciB3aWxsIGludm9rZSB0aGF0IG1ldGhvZCBhZnRlciBlYWNoIHRlc3QuIEluIHRoZSBleGFtcGxlLA0KICAgICMgc2V0VXAoKSB3YXMgdXNlZCB0byBjcmVhdGUgYSBmcmVzaCBzZXF1ZW5jZSBmb3IgZWFjaCB0ZXN0LiINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgdGhlIHByb3BlciBjYWxsIG9yZGVyIGlzIG1haW50YWluZWQsIGV2ZW4gaWYgc2V0VXAoKSByYWlzZXMNCiAgICAjIGFuIGV4Y2VwdGlvbi4NCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fc2V0VXAoc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGRlZiBzZXRVcCgpOg0KICAgICAgICAgICAgZXZlbnRzLmFwcGVuZCgnc2V0VXAnKQ0KICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCdyYWlzZWQgYnkgc2V0VXAnKQ0KDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBldmVudHMuYXBwZW5kKCd0ZXN0JykNCg0KICAgICAgICBkZWYgdGVhckRvd24oKToNCiAgICAgICAgICAgIGV2ZW50cy5hcHBlbmQoJ3RlYXJEb3duJykNCg0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ3NldFVwJywgJ2FkZEVycm9yJywgJ3N0b3BUZXN0J10NCiAgICAgICAgdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZSh0ZXN0LCBzZXRVcCwgdGVhckRvd24pLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldoZW4gYSBzZXRVcCgpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUgdGVzdCBydW5uZXIgd2lsbCBydW4gdGhhdCBtZXRob2QNCiAgICAjIHByaW9yIHRvIGVhY2ggdGVzdC4gTGlrZXdpc2UsIGlmIGEgdGVhckRvd24oKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlDQogICAgIyB0ZXN0IHJ1bm5lciB3aWxsIGludm9rZSB0aGF0IG1ldGhvZCBhZnRlciBlYWNoIHRlc3QuIEluIHRoZSBleGFtcGxlLA0KICAgICMgc2V0VXAoKSB3YXMgdXNlZCB0byBjcmVhdGUgYSBmcmVzaCBzZXF1ZW5jZSBmb3IgZWFjaCB0ZXN0LiINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgdGhlIHByb3BlciBjYWxsIG9yZGVyIGlzIG1haW50YWluZWQsIGV2ZW4gaWYgdGhlIHRlc3QgcmFpc2VzDQogICAgIyBhbiBlcnJvciAoYXMgb3Bwb3NlZCB0byBhIGZhaWx1cmUpLg0KICAgIGRlZiB0ZXN0X3J1bl9jYWxsX29yZGVyX19lcnJvcl9pbl90ZXN0KHNlbGYpOg0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICByZXN1bHQgPSBMb2dnaW5nUmVzdWx0KGV2ZW50cykNCg0KICAgICAgICBkZWYgc2V0VXAoKToNCiAgICAgICAgICAgIGV2ZW50cy5hcHBlbmQoJ3NldFVwJykNCg0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgZXZlbnRzLmFwcGVuZCgndGVzdCcpDQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoJ3JhaXNlZCBieSB0ZXN0JykNCg0KICAgICAgICBkZWYgdGVhckRvd24oKToNCiAgICAgICAgICAgIGV2ZW50cy5hcHBlbmQoJ3RlYXJEb3duJykNCg0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLA0KICAgICAgICAgICAgICAgICAgICAnYWRkRXJyb3InLCAnc3RvcFRlc3QnXQ0KICAgICAgICB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKHRlc3QsIHNldFVwLCB0ZWFyRG93bikucnVuKHJlc3VsdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIGV4cGVjdGVkKQ0KDQogICAgIyAiV2hlbiBhIHNldFVwKCkgbWV0aG9kIGlzIGRlZmluZWQsIHRoZSB0ZXN0IHJ1bm5lciB3aWxsIHJ1biB0aGF0IG1ldGhvZA0KICAgICMgcHJpb3IgdG8gZWFjaCB0ZXN0LiBMaWtld2lzZSwgaWYgYSB0ZWFyRG93bigpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUNCiAgICAjIHRlc3QgcnVubmVyIHdpbGwgaW52b2tlIHRoYXQgbWV0aG9kIGFmdGVyIGVhY2ggdGVzdC4gSW4gdGhlIGV4YW1wbGUsDQogICAgIyBzZXRVcCgpIHdhcyB1c2VkIHRvIGNyZWF0ZSBhIGZyZXNoIHNlcXVlbmNlIGZvciBlYWNoIHRlc3QuIg0KICAgICMNCiAgICAjIE1ha2Ugc3VyZSB0aGUgcHJvcGVyIGNhbGwgb3JkZXIgaXMgbWFpbnRhaW5lZCwgZXZlbiBpZiB0aGUgdGVzdCBzaWduYWxzDQogICAgIyBhIGZhaWx1cmUgKGFzIG9wcG9zZWQgdG8gYW4gZXJyb3IpLg0KICAgIGRlZiB0ZXN0X3J1bl9jYWxsX29yZGVyX19mYWlsdXJlX2luX3Rlc3Qoc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGRlZiBzZXRVcCgpOg0KICAgICAgICAgICAgZXZlbnRzLmFwcGVuZCgnc2V0VXAnKQ0KDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBldmVudHMuYXBwZW5kKCd0ZXN0JykNCiAgICAgICAgICAgIHNlbGYuZmFpbCgncmFpc2VkIGJ5IHRlc3QnKQ0KDQogICAgICAgIGRlZiB0ZWFyRG93bigpOg0KICAgICAgICAgICAgZXZlbnRzLmFwcGVuZCgndGVhckRvd24nKQ0KDQogICAgICAgIGV4cGVjdGVkID0gWydzdGFydFRlc3QnLCAnc2V0VXAnLCAndGVzdCcsICd0ZWFyRG93bicsDQogICAgICAgICAgICAgICAgICAgICdhZGRGYWlsdXJlJywgJ3N0b3BUZXN0J10NCiAgICAgICAgdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZSh0ZXN0LCBzZXRVcCwgdGVhckRvd24pLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldoZW4gYSBzZXRVcCgpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUgdGVzdCBydW5uZXIgd2lsbCBydW4gdGhhdCBtZXRob2QNCiAgICAjIHByaW9yIHRvIGVhY2ggdGVzdC4gTGlrZXdpc2UsIGlmIGEgdGVhckRvd24oKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlDQogICAgIyB0ZXN0IHJ1bm5lciB3aWxsIGludm9rZSB0aGF0IG1ldGhvZCBhZnRlciBlYWNoIHRlc3QuIEluIHRoZSBleGFtcGxlLA0KICAgICMgc2V0VXAoKSB3YXMgdXNlZCB0byBjcmVhdGUgYSBmcmVzaCBzZXF1ZW5jZSBmb3IgZWFjaCB0ZXN0LiINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgdGhlIHByb3BlciBjYWxsIG9yZGVyIGlzIG1haW50YWluZWQsIGV2ZW4gaWYgdGVhckRvd24oKSByYWlzZXMNCiAgICAjIGFuIGV4Y2VwdGlvbi4NCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fdGVhckRvd24oc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGRlZiBzZXRVcCgpOg0KICAgICAgICAgICAgZXZlbnRzLmFwcGVuZCgnc2V0VXAnKQ0KDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBldmVudHMuYXBwZW5kKCd0ZXN0JykNCg0KICAgICAgICBkZWYgdGVhckRvd24oKToNCiAgICAgICAgICAgIGV2ZW50cy5hcHBlbmQoJ3RlYXJEb3duJykNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigncmFpc2VkIGJ5IHRlYXJEb3duJykNCg0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLCAnYWRkRXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAnc3RvcFRlc3QnXQ0KICAgICAgICB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKHRlc3QsIHNldFVwLCB0ZWFyRG93bikucnVuKHJlc3VsdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIGV4cGVjdGVkKQ0KDQogICAgIyAiUmV0dXJuIGEgc3RyaW5nIGlkZW50aWZ5aW5nIHRoZSBzcGVjaWZpYyB0ZXN0IGNhc2UuIg0KICAgICMNCiAgICAjIEJlY2F1c2Ugb2YgdGhlIHZhZ3VlIG5hdHVyZSBvZiB0aGUgZG9jcywgSSdtIG5vdCBnb2luZyB0byBsb2NrIHRoaXMNCiAgICAjIHRlc3QgZG93biB0b28gbXVjaC4gUmVhbGx5IGFsbCB0aGF0IGNhbiBiZSBhc3NlcnRlZCBpcyB0aGF0IHRoZSBpZCgpDQogICAgIyB3aWxsIGJlIGEgc3RyaW5nIChlaXRoZXIgOC1ieXRlIG9yIHVuaWNvZGUgLS0gYWdhaW4sIGJlY2F1c2UgdGhlIGRvY3MNCiAgICAjIGp1c3Qgc2F5ICJzdHJpbmciKQ0KICAgIGRlZiB0ZXN0X2lkKHNlbGYpOg0KICAgICAgICB0ZXN0ID0gdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZShsYW1iZGE6IE5vbmUpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHRlc3QuaWQoKSwgc3RyKQ0KDQogICAgIyAiUmV0dXJucyBhIG9uZS1saW5lIGRlc2NyaXB0aW9uIG9mIHRoZSB0ZXN0LCBvciBOb25lIGlmIG5vIGRlc2NyaXB0aW9uDQogICAgIyBoYXMgYmVlbiBwcm92aWRlZC4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBtZXRob2QgcmV0dXJucw0KICAgICMgdGhlIGZpcnN0IGxpbmUgb2YgdGhlIHRlc3QgbWV0aG9kJ3MgZG9jc3RyaW5nLCBpZiBhdmFpbGFibGUsIG9yIE5vbmUuIg0KICAgIGRlZiB0ZXN0X3Nob3J0RGVzY3JpcHRpb25fX25vX2RvY3N0cmluZyhzZWxmKToNCiAgICAgICAgdGVzdCA9IHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwodGVzdC5zaG9ydERlc2NyaXB0aW9uKCksIE5vbmUpDQoNCiAgICAjICJSZXR1cm5zIGEgb25lLWxpbmUgZGVzY3JpcHRpb24gb2YgdGhlIHRlc3QsIG9yIE5vbmUgaWYgbm8gZGVzY3JpcHRpb24NCiAgICAjIGhhcyBiZWVuIHByb3ZpZGVkLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIG1ldGhvZCByZXR1cm5zDQogICAgIyB0aGUgZmlyc3QgbGluZSBvZiB0aGUgdGVzdCBtZXRob2QncyBkb2NzdHJpbmcsIGlmIGF2YWlsYWJsZSwgb3IgTm9uZS4iDQogICAgZGVmIHRlc3Rfc2hvcnREZXNjcmlwdGlvbl9fc2luZ2xlbGluZV9kb2NzdHJpbmcoc2VsZik6DQogICAgICAgIGRlc2MgPSAidGhpcyB0ZXN0cyBmb28iDQogICAgICAgIHRlc3QgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSwgZGVzY3JpcHRpb249ZGVzYykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRlc3Quc2hvcnREZXNjcmlwdGlvbigpLCAidGhpcyB0ZXN0cyBmb28iKQ0K',
'/Lib/unittest/test/testmock/testsentinel.py':'aW1wb3J0IHVuaXR0ZXN0DQpmcm9tIHVuaXR0ZXN0Lm1vY2sgaW1wb3J0IHNlbnRpbmVsLCBERUZBVUxUDQoNCg0KY2xhc3MgU2VudGluZWxUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiB0ZXN0U2VudGluZWxzKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNlbnRpbmVsLndoYXRldmVyLCBzZW50aW5lbC53aGF0ZXZlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAnc2VudGluZWwgbm90IHN0b3JlZCcpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoc2VudGluZWwud2hhdGV2ZXIsIHNlbnRpbmVsLndoYXRldmVyZWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2VudGluZWwgc2hvdWxkIGJlIHVuaXF1ZScpDQoNCg0KICAgIGRlZiB0ZXN0U2VudGluZWxOYW1lKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihzZW50aW5lbC53aGF0ZXZlciksICdzZW50aW5lbC53aGF0ZXZlcicsDQogICAgICAgICAgICAgICAgICAgICAgICAgJ3NlbnRpbmVsIG5hbWUgaW5jb3JyZWN0JykNCg0KDQogICAgZGVmIHRlc3RERUZBVUxUKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydFRydWUoREVGQVVMVCBpcyBzZW50aW5lbC5ERUZBVUxUKQ0KDQogICAgZGVmIHRlc3RCYXNlcyhzZWxmKToNCiAgICAgICAgIyBJZiB0aGlzIGRvZXNuJ3QgcmFpc2UgYW4gQXR0cmlidXRlRXJyb3IgdGhlbiBoZWxwKG1vY2spIGlzIGJyb2tlbg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgbGFtYmRhOiBzZW50aW5lbC5fX2Jhc2VzX18pDQoNCg0KaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoNCiAgICB1bml0dGVzdC5tYWluKCkNCg==',
'/Lib/unittest/test/testmock/support.py':'aW1wb3J0IHN5cw0KDQpkZWYgaXNfaW5zdGFuY2Uob2JqLCBrbGFzcyk6DQogICAgIiIiVmVyc2lvbiBvZiBpc19pbnN0YW5jZSB0aGF0IGRvZXNuJ3QgYWNjZXNzIF9fY2xhc3NfXyIiIg0KICAgIHJldHVybiBpc3N1YmNsYXNzKHR5cGUob2JqKSwga2xhc3MpDQoNCg0KY2xhc3MgU29tZUNsYXNzKG9iamVjdCk6DQogICAgY2xhc3NfYXR0cmlidXRlID0gTm9uZQ0KDQogICAgZGVmIHdpYmJsZShzZWxmKToNCiAgICAgICAgcGFzcw0KDQoNCmNsYXNzIFgob2JqZWN0KToNCiAgICBwYXNzDQoNCg0KZGVmIGV4YW1pbmVfd2FybmluZ3MoZnVuYyk6DQogICAgZGVmIHdyYXBwZXIoKToNCiAgICAgICAgd2l0aCBjYXRjaF93YXJuaW5ncyhyZWNvcmQ9VHJ1ZSkgYXMgd3M6DQogICAgICAgICAgICBmdW5jKHdzKQ0KICAgIHJldHVybiB3cmFwcGVyDQo=',
'/Lib/unittest/test/testmock/testpatch.py':'IyBDb3B5cmlnaHQgKEMpIDIwMDctMjAxMiBNaWNoYWVsIEZvb3JkICYgdGhlIG1vY2sgdGVhbQ0KIyBFLW1haWw6IGZ1enp5bWFuIEFUIHZvaWRzcGFjZSBET1Qgb3JnIERPVCB1aw0KIyBodHRwOi8vd3d3LnZvaWRzcGFjZS5vcmcudWsvcHl0aG9uL21vY2svDQoNCmltcG9ydCBvcw0KaW1wb3J0IHN5cw0KDQppbXBvcnQgdW5pdHRlc3QNCmZyb20gdW5pdHRlc3QudGVzdC50ZXN0bW9jayBpbXBvcnQgc3VwcG9ydA0KZnJvbSB1bml0dGVzdC50ZXN0LnRlc3Rtb2NrLnN1cHBvcnQgaW1wb3J0IFNvbWVDbGFzcywgaXNfaW5zdGFuY2UNCg0KZnJvbSB1bml0dGVzdC5tb2NrIGltcG9ydCAoDQogICAgTm9uQ2FsbGFibGVNb2NrLCBDYWxsYWJsZU1peGluLCBwYXRjaCwgc2VudGluZWwsDQogICAgTWFnaWNNb2NrLCBNb2NrLCBOb25DYWxsYWJsZU1hZ2ljTW9jaywgcGF0Y2gsIF9wYXRjaCwNCiAgICBERUZBVUxULCBjYWxsLCBfZ2V0X3RhcmdldA0KKQ0KDQoNCmJ1aWx0aW5fc3RyaW5nID0gJ2J1aWx0aW5zJw0KDQpQVE1vZHVsZSA9IHN5cy5tb2R1bGVzW19fbmFtZV9fXQ0KTU9ETkFNRSA9ICclcy5QVE1vZHVsZScgJSBfX25hbWVfXw0KDQoNCmRlZiBfZ2V0X3Byb3h5KG9iaiwgZ2V0X29ubHk9VHJ1ZSk6DQogICAgY2xhc3MgUHJveHkob2JqZWN0KToNCiAgICAgICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIG5hbWUpOg0KICAgICAgICAgICAgcmV0dXJuIGdldGF0dHIob2JqLCBuYW1lKQ0KICAgIGlmIG5vdCBnZXRfb25seToNCiAgICAgICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIG5hbWUsIHZhbHVlKToNCiAgICAgICAgICAgIHNldGF0dHIob2JqLCBuYW1lLCB2YWx1ZSkNCiAgICAgICAgZGVmIF9fZGVsYXR0cl9fKHNlbGYsIG5hbWUpOg0KICAgICAgICAgICAgZGVsYXR0cihvYmosIG5hbWUpDQogICAgICAgIFByb3h5Ll9fc2V0YXR0cl9fID0gX19zZXRhdHRyX18NCiAgICAgICAgUHJveHkuX19kZWxhdHRyX18gPSBfX2RlbGF0dHJfXw0KICAgIHJldHVybiBQcm94eSgpDQoNCg0KIyBmb3IgdXNlIGluIHRoZSB0ZXN0DQpzb21ldGhpbmcgID0gc2VudGluZWwuU29tZXRoaW5nDQpzb21ldGhpbmdfZWxzZSAgPSBzZW50aW5lbC5Tb21ldGhpbmdFbHNlDQoNCg0KY2xhc3MgRm9vKG9iamVjdCk6DQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGEpOg0KICAgICAgICBwYXNzDQogICAgZGVmIGYoc2VsZiwgYSk6DQogICAgICAgIHBhc3MNCiAgICBkZWYgZyhzZWxmKToNCiAgICAgICAgcGFzcw0KICAgIGZvbyA9ICdiYXInDQoNCiAgICBjbGFzcyBCYXIob2JqZWN0KToNCiAgICAgICAgZGVmIGEoc2VsZik6DQogICAgICAgICAgICBwYXNzDQoNCmZvb19uYW1lID0gJyVzLkZvbycgJSBfX25hbWVfXw0KDQoNCmRlZiBmdW5jdGlvbihhLCBiPUZvbyk6DQogICAgcGFzcw0KDQoNCmNsYXNzIENvbnRhaW5lcihvYmplY3QpOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKToNCiAgICAgICAgc2VsZi52YWx1ZXMgPSB7fQ0KDQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIG5hbWUpOg0KICAgICAgICByZXR1cm4gc2VsZi52YWx1ZXNbbmFtZV0NCg0KICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBuYW1lLCB2YWx1ZSk6DQogICAgICAgIHNlbGYudmFsdWVzW25hbWVdID0gdmFsdWUNCg0KICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBuYW1lKToNCiAgICAgICAgZGVsIHNlbGYudmFsdWVzW25hbWVdDQoNCiAgICBkZWYgX19pdGVyX18oc2VsZik6DQogICAgICAgIHJldHVybiBpdGVyKHNlbGYudmFsdWVzKQ0KDQoNCg0KY2xhc3MgUGF0Y2hUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiBhc3NlcnROb3RDYWxsYWJsZShzZWxmLCBvYmosIG1hZ2ljPVRydWUpOg0KICAgICAgICBNb2NrQ2xhc3MgPSBOb25DYWxsYWJsZU1hZ2ljTW9jaw0KICAgICAgICBpZiBub3QgbWFnaWM6DQogICAgICAgICAgICBNb2NrQ2xhc3MgPSBOb25DYWxsYWJsZU1vY2sNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG9iaikNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKG9iaiwgTW9ja0NsYXNzKSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShpc19pbnN0YW5jZShvYmosIENhbGxhYmxlTWl4aW4pKQ0KDQoNCiAgICBkZWYgdGVzdF9zaW5nbGVfcGF0Y2hvYmplY3Qoc2VsZik6DQogICAgICAgIGNsYXNzIFNvbWV0aGluZyhvYmplY3QpOg0KICAgICAgICAgICAgYXR0cmlidXRlID0gc2VudGluZWwuT3JpZ2luYWwNCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KFNvbWV0aGluZywgJ2F0dHJpYnV0ZScsIHNlbnRpbmVsLlBhdGNoZWQpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5hdHRyaWJ1dGUsIHNlbnRpbmVsLlBhdGNoZWQsICJ1bnBhdGNoZWQiKQ0KDQogICAgICAgIHRlc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5hdHRyaWJ1dGUsIHNlbnRpbmVsLk9yaWdpbmFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCBub3QgcmVzdG9yZWQiKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaG9iamVjdF93aXRoX25vbmUoc2VsZik6DQogICAgICAgIGNsYXNzIFNvbWV0aGluZyhvYmplY3QpOg0KICAgICAgICAgICAgYXR0cmlidXRlID0gc2VudGluZWwuT3JpZ2luYWwNCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KFNvbWV0aGluZywgJ2F0dHJpYnV0ZScsIE5vbmUpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydElzTm9uZShTb21ldGhpbmcuYXR0cmlidXRlLCAidW5wYXRjaGVkIikNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcuYXR0cmlidXRlLCBzZW50aW5lbC5PcmlnaW5hbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCg0KDQogICAgZGVmIHRlc3RfbXVsdGlwbGVfcGF0Y2hvYmplY3Qoc2VsZik6DQogICAgICAgIGNsYXNzIFNvbWV0aGluZyhvYmplY3QpOg0KICAgICAgICAgICAgYXR0cmlidXRlID0gc2VudGluZWwuT3JpZ2luYWwNCiAgICAgICAgICAgIG5leHRfYXR0cmlidXRlID0gc2VudGluZWwuT3JpZ2luYWwyDQoNCiAgICAgICAgQHBhdGNoLm9iamVjdChTb21ldGhpbmcsICdhdHRyaWJ1dGUnLCBzZW50aW5lbC5QYXRjaGVkKQ0KICAgICAgICBAcGF0Y2gub2JqZWN0KFNvbWV0aGluZywgJ25leHRfYXR0cmlidXRlJywgc2VudGluZWwuUGF0Y2hlZDIpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5hdHRyaWJ1dGUsIHNlbnRpbmVsLlBhdGNoZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1bnBhdGNoZWQiKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcubmV4dF9hdHRyaWJ1dGUsIHNlbnRpbmVsLlBhdGNoZWQyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5wYXRjaGVkIikNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcuYXR0cmlidXRlLCBzZW50aW5lbC5PcmlnaW5hbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcubmV4dF9hdHRyaWJ1dGUsIHNlbnRpbmVsLk9yaWdpbmFsMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCg0KDQogICAgZGVmIHRlc3Rfb2JqZWN0X2xvb2t1cF9pc19xdWl0ZV9sYXp5KHNlbGYpOg0KICAgICAgICBnbG9iYWwgc29tZXRoaW5nDQogICAgICAgIG9yaWdpbmFsID0gc29tZXRoaW5nDQogICAgICAgIEBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fLCBzZW50aW5lbC5Tb21ldGhpbmcyKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNvbWV0aGluZyA9IHNlbnRpbmVsLnJlcGxhY2VtZW50X3ZhbHVlDQogICAgICAgICAgICB0ZXN0KCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBzZW50aW5lbC5yZXBsYWNlbWVudF92YWx1ZSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHNvbWV0aGluZyA9IG9yaWdpbmFsDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoKHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLnNvbWV0aGluZycgJSBfX25hbWVfXywgc2VudGluZWwuU29tZXRoaW5nMikNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoUFRNb2R1bGUuc29tZXRoaW5nLCBzZW50aW5lbC5Tb21ldGhpbmcyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5wYXRjaGVkIikNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChQVE1vZHVsZS5zb21ldGhpbmcsIHNlbnRpbmVsLlNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCg0KICAgICAgICBAcGF0Y2goJyVzLnNvbWV0aGluZycgJSBfX25hbWVfXywgc2VudGluZWwuU29tZXRoaW5nMikNCiAgICAgICAgQHBhdGNoKCclcy5zb21ldGhpbmdfZWxzZScgJSBfX25hbWVfXywgc2VudGluZWwuU29tZXRoaW5nRWxzZSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoUFRNb2R1bGUuc29tZXRoaW5nLCBzZW50aW5lbC5Tb21ldGhpbmcyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5wYXRjaGVkIikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoUFRNb2R1bGUuc29tZXRoaW5nX2Vsc2UsIHNlbnRpbmVsLlNvbWV0aGluZ0Vsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1bnBhdGNoZWQiKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoUFRNb2R1bGUuc29tZXRoaW5nLCBzZW50aW5lbC5Tb21ldGhpbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgInBhdGNoIG5vdCByZXN0b3JlZCIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoUFRNb2R1bGUuc29tZXRoaW5nX2Vsc2UsIHNlbnRpbmVsLlNvbWV0aGluZ0Vsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgInBhdGNoIG5vdCByZXN0b3JlZCIpDQoNCiAgICAgICAgIyBUZXN0IHRoZSBwYXRjaGluZyBhbmQgcmVzdG9yaW5nIHdvcmtzIGEgc2Vjb25kIHRpbWUNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChQVE1vZHVsZS5zb21ldGhpbmcsIHNlbnRpbmVsLlNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChQVE1vZHVsZS5zb21ldGhpbmdfZWxzZSwgc2VudGluZWwuU29tZXRoaW5nRWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2sucmV0dXJuX3ZhbHVlID0gc2VudGluZWwuSGFuZGxlDQogICAgICAgIEBwYXRjaCgnJXMub3BlbicgJSBidWlsdGluX3N0cmluZywgbW9jaykNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwob3BlbignZmlsZW5hbWUnLCAncicpLCBzZW50aW5lbC5IYW5kbGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcGVuIG5vdCBwYXRjaGVkIikNCiAgICAgICAgdGVzdCgpDQogICAgICAgIHRlc3QoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwob3BlbiwgbW9jaywgInBhdGNoIG5vdCByZXN0b3JlZCIpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2NsYXNzX2F0dHJpYnV0ZShzZWxmKToNCiAgICAgICAgQHBhdGNoKCclcy5Tb21lQ2xhc3MuY2xhc3NfYXR0cmlidXRlJyAlIF9fbmFtZV9fLA0KICAgICAgICAgICAgICAgc2VudGluZWwuQ2xhc3NBdHRyaWJ1dGUpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFBUTW9kdWxlLlNvbWVDbGFzcy5jbGFzc19hdHRyaWJ1dGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRpbmVsLkNsYXNzQXR0cmlidXRlLCAidW5wYXRjaGVkIikNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vbmUoUFRNb2R1bGUuU29tZUNsYXNzLmNsYXNzX2F0dHJpYnV0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgInBhdGNoIG5vdCByZXN0b3JlZCIpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNob2JqZWN0X3dpdGhfZGVmYXVsdF9tb2NrKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KG9iamVjdCk6DQogICAgICAgICAgICBzb21ldGhpbmcgPSBzZW50aW5lbC5PcmlnaW5hbA0KICAgICAgICAgICAgc29tZXRoaW5nMiA9IHNlbnRpbmVsLk9yaWdpbmFsMg0KDQogICAgICAgIEBwYXRjaC5vYmplY3QoVGVzdCwgJ3NvbWV0aGluZycpDQogICAgICAgIGRlZiB0ZXN0KG1vY2spOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLCBUZXN0LnNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1vY2sgbm90IHBhc3NlZCBpbnRvIHRlc3QgZnVuY3Rpb24iKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2ssIE1hZ2ljTW9jaywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggd2l0aCB0d28gYXJndW1lbnRzIGRpZCBub3QgY3JlYXRlIGEgbW9jayIpDQoNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgQHBhdGNoLm9iamVjdChUZXN0LCAnc29tZXRoaW5nJykNCiAgICAgICAgQHBhdGNoLm9iamVjdChUZXN0LCAnc29tZXRoaW5nMicpDQogICAgICAgIGRlZiB0ZXN0KHRoaXMxLCB0aGlzMiwgbW9jazEsIG1vY2syKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwodGhpczEsIHNlbnRpbmVsLnRoaXMxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUGF0Y2hlZCBmdW5jdGlvbiBkaWRuJ3QgcmVjZWl2ZSBpbml0aWFsIGFyZ3VtZW50IikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwodGhpczIsIHNlbnRpbmVsLnRoaXMyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUGF0Y2hlZCBmdW5jdGlvbiBkaWRuJ3QgcmVjZWl2ZSBzZWNvbmQgYXJndW1lbnQiKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrMSwgVGVzdC5zb21ldGhpbmcyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTW9jayBub3QgcGFzc2VkIGludG8gdGVzdCBmdW5jdGlvbiIpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2syLCBUZXN0LnNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNlY29uZCBNb2NrIG5vdCBwYXNzZWQgaW50byB0ZXN0IGZ1bmN0aW9uIikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrMiwgTWFnaWNNb2NrLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCB3aXRoIHR3byBhcmd1bWVudHMgZGlkIG5vdCBjcmVhdGUgYSBtb2NrIikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrMiwgTWFnaWNNb2NrLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCB3aXRoIHR3byBhcmd1bWVudHMgZGlkIG5vdCBjcmVhdGUgYSBtb2NrIikNCg0KICAgICAgICAgICAgIyBBIGhhY2sgdG8gdGVzdCB0aGF0IG5ldyBtb2NrcyBhcmUgcGFzc2VkIHRoZSBzZWNvbmQgdGltZQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChvdXRlck1vY2sxLCBtb2NrMSwgInVuZXhwZWN0ZWQgdmFsdWUgZm9yIG1vY2sxIikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwob3V0ZXJNb2NrMiwgbW9jazIsICJ1bmV4cGVjdGVkIHZhbHVlIGZvciBtb2NrMSIpDQogICAgICAgICAgICByZXR1cm4gbW9jazEsIG1vY2syDQoNCiAgICAgICAgb3V0ZXJNb2NrMSA9IG91dGVyTW9jazIgPSBOb25lDQogICAgICAgIG91dGVyTW9jazEsIG91dGVyTW9jazIgPSB0ZXN0KHNlbnRpbmVsLnRoaXMxLCBzZW50aW5lbC50aGlzMikNCg0KICAgICAgICAjIFRlc3QgdGhhdCBleGVjdXRpbmcgYSBzZWNvbmQgdGltZSBjcmVhdGVzIG5ldyBtb2Nrcw0KICAgICAgICB0ZXN0KHNlbnRpbmVsLnRoaXMxLCBzZW50aW5lbC50aGlzMikNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfd2l0aF9zcGVjKHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgc3BlYz1Tb21lQ2xhc3MpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tTb21lQ2xhc3MpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21lQ2xhc3MsIE1vY2tTb21lQ2xhc3MpDQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UoU29tZUNsYXNzLndpYmJsZSwgTWFnaWNNb2NrKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBsYW1iZGE6IFNvbWVDbGFzcy5ub3Rfd2liYmxlKQ0KDQogICAgICAgIHRlc3QoKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaG9iamVjdF93aXRoX3NwZWMoc2VsZik6DQogICAgICAgIEBwYXRjaC5vYmplY3QoU29tZUNsYXNzLCAnY2xhc3NfYXR0cmlidXRlJywgc3BlYz1Tb21lQ2xhc3MpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tBdHRyaWJ1dGUpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21lQ2xhc3MuY2xhc3NfYXR0cmlidXRlLCBNb2NrQXR0cmlidXRlKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKFNvbWVDbGFzcy5jbGFzc19hdHRyaWJ1dGUud2liYmxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFnaWNNb2NrKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFtYmRhOiBTb21lQ2xhc3MuY2xhc3NfYXR0cmlidXRlLm5vdF93aWJibGUpDQoNCiAgICAgICAgdGVzdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3dpdGhfc3BlY19hc19saXN0KHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgc3BlYz1bJ3dpYmJsZSddKQ0KICAgICAgICBkZWYgdGVzdChNb2NrU29tZUNsYXNzKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZUNsYXNzLCBNb2NrU29tZUNsYXNzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKFNvbWVDbGFzcy53aWJibGUsIE1hZ2ljTW9jaykpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgbGFtYmRhOiBTb21lQ2xhc3Mubm90X3dpYmJsZSkNCg0KICAgICAgICB0ZXN0KCkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hvYmplY3Rfd2l0aF9zcGVjX2FzX2xpc3Qoc2VsZik6DQogICAgICAgIEBwYXRjaC5vYmplY3QoU29tZUNsYXNzLCAnY2xhc3NfYXR0cmlidXRlJywgc3BlYz1bJ3dpYmJsZSddKQ0KICAgICAgICBkZWYgdGVzdChNb2NrQXR0cmlidXRlKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZUNsYXNzLmNsYXNzX2F0dHJpYnV0ZSwgTW9ja0F0dHJpYnV0ZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc19pbnN0YW5jZShTb21lQ2xhc3MuY2xhc3NfYXR0cmlidXRlLndpYmJsZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2ljTW9jaykpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbWJkYTogU29tZUNsYXNzLmNsYXNzX2F0dHJpYnV0ZS5ub3Rfd2liYmxlKQ0KDQogICAgICAgIHRlc3QoKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXN0ZWRfcGF0Y2hfd2l0aF9zcGVjX2FzX2xpc3Qoc2VsZik6DQogICAgICAgICMgcmVncmVzc2lvbiB0ZXN0IGZvciBuZXN0ZWQgZGVjb3JhdG9ycw0KICAgICAgICBAcGF0Y2goJyVzLm9wZW4nICUgYnVpbHRpbl9zdHJpbmcpDQogICAgICAgIEBwYXRjaCgnJXMuU29tZUNsYXNzJyAlIF9fbmFtZV9fLCBzcGVjPVsnd2liYmxlJ10pDQogICAgICAgIGRlZiB0ZXN0KE1vY2tTb21lQ2xhc3MsIE1vY2tPcGVuKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZUNsYXNzLCBNb2NrU29tZUNsYXNzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKFNvbWVDbGFzcy53aWJibGUsIE1hZ2ljTW9jaykpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgbGFtYmRhOiBTb21lQ2xhc3Mubm90X3dpYmJsZSkNCiAgICAgICAgdGVzdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3dpdGhfc3BlY19hc19ib29sZWFuKHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgc3BlYz1UcnVlKQ0KICAgICAgICBkZWYgdGVzdChNb2NrU29tZUNsYXNzKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZUNsYXNzLCBNb2NrU29tZUNsYXNzKQ0KICAgICAgICAgICAgIyBTaG91bGQgbm90IHJhaXNlIGF0dHJpYnV0ZSBlcnJvcg0KICAgICAgICAgICAgTW9ja1NvbWVDbGFzcy53aWJibGUNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGxhbWJkYTogTW9ja1NvbWVDbGFzcy5ub3Rfd2liYmxlKQ0KDQogICAgICAgIHRlc3QoKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9vYmplY3Rfd2l0aF9zcGVjX2FzX2Jvb2xlYW4oc2VsZik6DQogICAgICAgIEBwYXRjaC5vYmplY3QoUFRNb2R1bGUsICdTb21lQ2xhc3MnLCBzcGVjPVRydWUpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tTb21lQ2xhc3MpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21lQ2xhc3MsIE1vY2tTb21lQ2xhc3MpDQogICAgICAgICAgICAjIFNob3VsZCBub3QgcmFpc2UgYXR0cmlidXRlIGVycm9yDQogICAgICAgICAgICBNb2NrU29tZUNsYXNzLndpYmJsZQ0KDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgbGFtYmRhOiBNb2NrU29tZUNsYXNzLm5vdF93aWJibGUpDQoNCiAgICAgICAgdGVzdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2NsYXNzX2FjdHNfd2l0aF9zcGVjX2lzX2luaGVyaXRlZChzZWxmKToNCiAgICAgICAgQHBhdGNoKCclcy5Tb21lQ2xhc3MnICUgX19uYW1lX18sIHNwZWM9VHJ1ZSkNCiAgICAgICAgZGVmIHRlc3QoTW9ja1NvbWVDbGFzcyk6DQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UoTW9ja1NvbWVDbGFzcywgTWFnaWNNb2NrKSkNCiAgICAgICAgICAgIGluc3RhbmNlID0gTW9ja1NvbWVDbGFzcygpDQogICAgICAgICAgICBzZWxmLmFzc2VydE5vdENhbGxhYmxlKGluc3RhbmNlKQ0KICAgICAgICAgICAgIyBTaG91bGQgbm90IHJhaXNlIGF0dHJpYnV0ZSBlcnJvcg0KICAgICAgICAgICAgaW5zdGFuY2Uud2liYmxlDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBsYW1iZGE6IGluc3RhbmNlLm5vdF93aWJibGUpDQoNCiAgICAgICAgdGVzdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3dpdGhfY3JlYXRlX21vY2tzX25vbl9leGlzdGVudF9hdHRyaWJ1dGVzKHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLmZyb29ibGUnICUgYnVpbHRpbl9zdHJpbmcsIHNlbnRpbmVsLkZyb29ibGUsIGNyZWF0ZT1UcnVlKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmcm9vYmxlLCBzZW50aW5lbC5Gcm9vYmxlKQ0KDQogICAgICAgIHRlc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhOYW1lRXJyb3IsIGxhbWJkYTogZnJvb2JsZSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hvYmplY3Rfd2l0aF9jcmVhdGVfbW9ja3Nfbm9uX2V4aXN0ZW50X2F0dHJpYnV0ZXMoc2VsZik6DQogICAgICAgIEBwYXRjaC5vYmplY3QoU29tZUNsYXNzLCAnZnJvb2JsZScsIHNlbnRpbmVsLkZyb29ibGUsIGNyZWF0ZT1UcnVlKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21lQ2xhc3MuZnJvb2JsZSwgc2VudGluZWwuRnJvb2JsZSkNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKFNvbWVDbGFzcywgJ2Zyb29ibGUnKSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfd29udF9jcmVhdGVfYnlfZGVmYXVsdChzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgQHBhdGNoKCclcy5mcm9vYmxlJyAlIGJ1aWx0aW5fc3RyaW5nLCBzZW50aW5lbC5Gcm9vYmxlKQ0KICAgICAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZyb29ibGUsIHNlbnRpbmVsLkZyb29ibGUpDQoNCiAgICAgICAgICAgIHRlc3QoKQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoJ1BhdGNoaW5nIG5vbiBleGlzdGVudCBhdHRyaWJ1dGVzIHNob3VsZCBmYWlsJykNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhOYW1lRXJyb3IsIGxhbWJkYTogZnJvb2JsZSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hvYmplY3Rfd29udF9jcmVhdGVfYnlfZGVmYXVsdChzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgQHBhdGNoLm9iamVjdChTb21lQ2xhc3MsICdmcm9vYmxlJywgc2VudGluZWwuRnJvb2JsZSkNCiAgICAgICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCdQYXRjaGluZyBub24gZXhpc3RlbnQgYXR0cmlidXRlcyBzaG91bGQgZmFpbCcpDQoNCiAgICAgICAgICAgIHRlc3QoKQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoJ1BhdGNoaW5nIG5vbiBleGlzdGVudCBhdHRyaWJ1dGVzIHNob3VsZCBmYWlsJykNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKFNvbWVDbGFzcywgJ2Zyb29ibGUnKSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfd2l0aF9zdGF0aWNfbWV0aG9kcyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgd29vdCgpOg0KICAgICAgICAgICAgICAgIHJldHVybiBzZW50aW5lbC5TdGF0aWMNCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ3dvb3QnLCBzdGF0aWNtZXRob2QobGFtYmRhOiBzZW50aW5lbC5QYXRjaGVkKSkNCiAgICAgICAgZGVmIGFub255bW91cygpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28ud29vdCgpLCBzZW50aW5lbC5QYXRjaGVkKQ0KICAgICAgICBhbm9ueW1vdXMoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLndvb3QoKSwgc2VudGluZWwuU3RhdGljKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9sb2NhbChzZWxmKToNCiAgICAgICAgZm9vID0gc2VudGluZWwuRm9vDQogICAgICAgIEBwYXRjaC5vYmplY3Qoc2VudGluZWwsICdGb28nLCAnRm9vJykNCiAgICAgICAgZGVmIGFub255bW91cygpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzZW50aW5lbC5Gb28sICdGb28nKQ0KICAgICAgICBhbm9ueW1vdXMoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2VudGluZWwuRm9vLCBmb28pDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3Nsb3RzKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIF9fc2xvdHNfXyA9ICgnRm9vJywpDQoNCiAgICAgICAgZm9vID0gRm9vKCkNCiAgICAgICAgZm9vLkZvbyA9IHNlbnRpbmVsLkZvbw0KDQogICAgICAgIEBwYXRjaC5vYmplY3QoZm9vLCAnRm9vJywgJ0ZvbycpDQogICAgICAgIGRlZiBhbm9ueW1vdXMoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLkZvbywgJ0ZvbycpDQogICAgICAgIGFub255bW91cygpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28uRm9vLCBzZW50aW5lbC5Gb28pDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNob2JqZWN0X2NsYXNzX2RlY29yYXRvcihzZWxmKToNCiAgICAgICAgY2xhc3MgU29tZXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBhdHRyaWJ1dGUgPSBzZW50aW5lbC5PcmlnaW5hbA0KDQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIHRlc3RfbWV0aG9kKG90aGVyX3NlbGYpOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZXRoaW5nLmF0dHJpYnV0ZSwgc2VudGluZWwuUGF0Y2hlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1bnBhdGNoZWQiKQ0KICAgICAgICAgICAgZGVmIG5vdF90ZXN0X21ldGhvZChvdGhlcl9zZWxmKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5hdHRyaWJ1dGUsIHNlbnRpbmVsLk9yaWdpbmFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5vbi10ZXN0IG1ldGhvZCBwYXRjaGVkIikNCg0KICAgICAgICBGb28gPSBwYXRjaC5vYmplY3QoU29tZXRoaW5nLCAnYXR0cmlidXRlJywgc2VudGluZWwuUGF0Y2hlZCkoRm9vKQ0KDQogICAgICAgIGYgPSBGb28oKQ0KICAgICAgICBmLnRlc3RfbWV0aG9kKCkNCiAgICAgICAgZi5ub3RfdGVzdF9tZXRob2QoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZXRoaW5nLmF0dHJpYnV0ZSwgc2VudGluZWwuT3JpZ2luYWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgInBhdGNoIG5vdCByZXN0b3JlZCIpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2NsYXNzX2RlY29yYXRvcihzZWxmKToNCiAgICAgICAgY2xhc3MgU29tZXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBhdHRyaWJ1dGUgPSBzZW50aW5lbC5PcmlnaW5hbA0KDQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIHRlc3RfbWV0aG9kKG90aGVyX3NlbGYsIG1vY2tfc29tZXRoaW5nKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFBUTW9kdWxlLnNvbWV0aGluZywgbW9ja19zb21ldGhpbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5wYXRjaGVkIikNCiAgICAgICAgICAgIGRlZiBub3RfdGVzdF9tZXRob2Qob3RoZXJfc2VsZik6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChQVE1vZHVsZS5zb21ldGhpbmcsIHNlbnRpbmVsLlNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJub24tdGVzdCBtZXRob2QgcGF0Y2hlZCIpDQogICAgICAgIEZvbyA9IHBhdGNoKCclcy5zb21ldGhpbmcnICUgX19uYW1lX18pKEZvbykNCg0KICAgICAgICBmID0gRm9vKCkNCiAgICAgICAgZi50ZXN0X21ldGhvZCgpDQogICAgICAgIGYubm90X3Rlc3RfbWV0aG9kKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5hdHRyaWJ1dGUsIHNlbnRpbmVsLk9yaWdpbmFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCBub3QgcmVzdG9yZWQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFBUTW9kdWxlLnNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCBub3QgcmVzdG9yZWQiKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaG9iamVjdF90d2ljZShzZWxmKToNCiAgICAgICAgY2xhc3MgU29tZXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBhdHRyaWJ1dGUgPSBzZW50aW5lbC5PcmlnaW5hbA0KICAgICAgICAgICAgbmV4dF9hdHRyaWJ1dGUgPSBzZW50aW5lbC5PcmlnaW5hbDINCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KFNvbWV0aGluZywgJ2F0dHJpYnV0ZScsIHNlbnRpbmVsLlBhdGNoZWQpDQogICAgICAgIEBwYXRjaC5vYmplY3QoU29tZXRoaW5nLCAnYXR0cmlidXRlJywgc2VudGluZWwuUGF0Y2hlZCkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZXRoaW5nLmF0dHJpYnV0ZSwgc2VudGluZWwuUGF0Y2hlZCwgInVucGF0Y2hlZCIpDQoNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcuYXR0cmlidXRlLCBzZW50aW5lbC5PcmlnaW5hbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfZGljdChzZWxmKToNCiAgICAgICAgZm9vID0geydpbml0aWFsJzogb2JqZWN0KCksICdvdGhlcic6ICdzb21ldGhpbmcnfQ0KICAgICAgICBvcmlnaW5hbCA9IGZvby5jb3B5KCkNCg0KICAgICAgICBAcGF0Y2guZGljdChmb28pDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBmb29bJ2EnXSA9IDMNCiAgICAgICAgICAgIGRlbCBmb29bJ2luaXRpYWwnXQ0KICAgICAgICAgICAgZm9vWydvdGhlciddID0gJ3NvbWV0aGluZyBlbHNlJw0KDQogICAgICAgIHRlc3QoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLCBvcmlnaW5hbCkNCg0KICAgICAgICBAcGF0Y2guZGljdChmb28sIHsnYSc6ICdiJ30pDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihmb28pLCAzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb29bJ2EnXSwgJ2InKQ0KDQogICAgICAgIHRlc3QoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLCBvcmlnaW5hbCkNCg0KICAgICAgICBAcGF0Y2guZGljdChmb28sIFsoJ2EnLCAnYicpXSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKGZvbyksIDMpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvb1snYSddLCAnYicpDQoNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9kaWN0X3dpdGhfY29udGFpbmVyX29iamVjdChzZWxmKToNCiAgICAgICAgZm9vID0gQ29udGFpbmVyKCkNCiAgICAgICAgZm9vWydpbml0aWFsJ10gPSBvYmplY3QoKQ0KICAgICAgICBmb29bJ290aGVyJ10gPSAgJ3NvbWV0aGluZycNCg0KICAgICAgICBvcmlnaW5hbCA9IGZvby52YWx1ZXMuY29weSgpDQoNCiAgICAgICAgQHBhdGNoLmRpY3QoZm9vKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgZm9vWydhJ10gPSAzDQogICAgICAgICAgICBkZWwgZm9vWydpbml0aWFsJ10NCiAgICAgICAgICAgIGZvb1snb3RoZXInXSA9ICdzb21ldGhpbmcgZWxzZScNCg0KICAgICAgICB0ZXN0KCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby52YWx1ZXMsIG9yaWdpbmFsKQ0KDQogICAgICAgIEBwYXRjaC5kaWN0KGZvbywgeydhJzogJ2InfSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKGZvby52YWx1ZXMpLCAzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb29bJ2EnXSwgJ2InKQ0KDQogICAgICAgIHRlc3QoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLnZhbHVlcywgb3JpZ2luYWwpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2RpY3Rfd2l0aF9jbGVhcihzZWxmKToNCiAgICAgICAgZm9vID0geydpbml0aWFsJzogb2JqZWN0KCksICdvdGhlcic6ICdzb21ldGhpbmcnfQ0KICAgICAgICBvcmlnaW5hbCA9IGZvby5jb3B5KCkNCg0KICAgICAgICBAcGF0Y2guZGljdChmb28sIGNsZWFyPVRydWUpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvbywge30pDQogICAgICAgICAgICBmb29bJ2EnXSA9IDMNCiAgICAgICAgICAgIGZvb1snb3RoZXInXSA9ICdzb21ldGhpbmcgZWxzZScNCg0KICAgICAgICB0ZXN0KCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvbywgb3JpZ2luYWwpDQoNCiAgICAgICAgQHBhdGNoLmRpY3QoZm9vLCB7J2EnOiAnYid9LCBjbGVhcj1UcnVlKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIHsnYSc6ICdiJ30pDQoNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIG9yaWdpbmFsKQ0KDQogICAgICAgIEBwYXRjaC5kaWN0KGZvbywgWygnYScsICdiJyldLCBjbGVhcj1UcnVlKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIHsnYSc6ICdiJ30pDQoNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9kaWN0X3dpdGhfY29udGFpbmVyX29iamVjdF9hbmRfY2xlYXIoc2VsZik6DQogICAgICAgIGZvbyA9IENvbnRhaW5lcigpDQogICAgICAgIGZvb1snaW5pdGlhbCddID0gb2JqZWN0KCkNCiAgICAgICAgZm9vWydvdGhlciddID0gICdzb21ldGhpbmcnDQoNCiAgICAgICAgb3JpZ2luYWwgPSBmb28udmFsdWVzLmNvcHkoKQ0KDQogICAgICAgIEBwYXRjaC5kaWN0KGZvbywgY2xlYXI9VHJ1ZSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLnZhbHVlcywge30pDQogICAgICAgICAgICBmb29bJ2EnXSA9IDMNCiAgICAgICAgICAgIGZvb1snb3RoZXInXSA9ICdzb21ldGhpbmcgZWxzZScNCg0KICAgICAgICB0ZXN0KCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby52YWx1ZXMsIG9yaWdpbmFsKQ0KDQogICAgICAgIEBwYXRjaC5kaWN0KGZvbywgeydhJzogJ2InfSwgY2xlYXI9VHJ1ZSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLnZhbHVlcywgeydhJzogJ2InfSkNCg0KICAgICAgICB0ZXN0KCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby52YWx1ZXMsIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF9uYW1lX3ByZXNlcnZlZChzZWxmKToNCiAgICAgICAgZm9vID0ge30NCg0KICAgICAgICBAcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgb2JqZWN0KCkpDQogICAgICAgIEBwYXRjaCgnJXMuU29tZUNsYXNzJyAlIF9fbmFtZV9fLCBvYmplY3QoKSwgYXV0b3NwZWM9VHJ1ZSkNCiAgICAgICAgQHBhdGNoLm9iamVjdChTb21lQ2xhc3MsIG9iamVjdCgpKQ0KICAgICAgICBAcGF0Y2guZGljdChmb28pDQogICAgICAgIGRlZiBzb21lX25hbWUoKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWVfbmFtZS5fX25hbWVfXywgJ3NvbWVfbmFtZScpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3dpdGhfZXhjZXB0aW9uKHNlbGYpOg0KICAgICAgICBmb28gPSB7fQ0KDQogICAgICAgIEBwYXRjaC5kaWN0KGZvbywgeydhJzogJ2InfSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHJhaXNlIE5hbWVFcnJvcignS29ucmFkJykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGVzdCgpDQogICAgICAgIGV4Y2VwdCBOYW1lRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoJ05hbWVFcnJvciBub3QgcmFpc2VkIGJ5IHRlc3QnKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLCB7fSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfZGljdF93aXRoX3N0cmluZyhzZWxmKToNCiAgICAgICAgQHBhdGNoLmRpY3QoJ29zLmVudmlyb24nLCB7J2tvbnJhZF9kZWxvbmcnOiAnc29tZSB2YWx1ZSd9KQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigna29ucmFkX2RlbG9uZycsIG9zLmVudmlyb24pDQoNCiAgICAgICAgdGVzdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2Rlc2NyaXB0b3Ioc2VsZik6DQogICAgICAgICMgd291bGQgYmUgc29tZSBlZmZvcnQgdG8gZml4IHRoaXMgLSB3ZSBjb3VsZCBzcGVjaWFsIGNhc2UgdGhlDQogICAgICAgICMgYnVpbHRpbiBkZXNjcmlwdG9yczogY2xhc3NtZXRob2QsIHByb3BlcnR5LCBzdGF0aWNtZXRob2QNCiAgICAgICAgcmV0dXJuDQogICAgICAgIGNsYXNzIE5vdGhpbmcob2JqZWN0KToNCiAgICAgICAgICAgIGZvbyA9IE5vbmUNCg0KICAgICAgICBjbGFzcyBTb21ldGhpbmcob2JqZWN0KToNCiAgICAgICAgICAgIGZvbyA9IHt9DQoNCiAgICAgICAgICAgIEBwYXRjaC5vYmplY3QoTm90aGluZywgJ2ZvbycsIDIpDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBrbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoY2xzLCBTb21ldGhpbmcpDQoNCiAgICAgICAgICAgIEBwYXRjaC5vYmplY3QoTm90aGluZywgJ2ZvbycsIDIpDQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgc3RhdGljKGFyZyk6DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyZw0KDQogICAgICAgICAgICBAcGF0Y2guZGljdChmb28pDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBrbGFzc19kaWN0KGNscyk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhjbHMsIFNvbWV0aGluZykNCg0KICAgICAgICAgICAgQHBhdGNoLmRpY3QoZm9vKQ0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHN0YXRpY19kaWN0KGFyZyk6DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyZw0KDQogICAgICAgICMgdGhlc2Ugd2lsbCByYWlzZSBleGNlcHRpb25zIGlmIHBhdGNoaW5nIGRlc2NyaXB0b3JzIGlzIGJyb2tlbg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5zdGF0aWMoJ2YwMCcpLCAnZjAwJykNCiAgICAgICAgU29tZXRoaW5nLmtsYXNzKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcuc3RhdGljX2RpY3QoJ2YwMCcpLCAnZjAwJykNCiAgICAgICAgU29tZXRoaW5nLmtsYXNzX2RpY3QoKQ0KDQogICAgICAgIHNvbWV0aGluZyA9IFNvbWV0aGluZygpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLnN0YXRpYygnZjAwJyksICdmMDAnKQ0KICAgICAgICBzb21ldGhpbmcua2xhc3MoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZy5zdGF0aWNfZGljdCgnZjAwJyksICdmMDAnKQ0KICAgICAgICBzb21ldGhpbmcua2xhc3NfZGljdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3NwZWNfc2V0KHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgc3BlYz1Tb21lQ2xhc3MsIHNwZWNfc2V0PVRydWUpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tDbGFzcyk6DQogICAgICAgICAgICBNb2NrQ2xhc3MueiA9ICdmb28nDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHRlc3QpDQoNCiAgICAgICAgQHBhdGNoLm9iamVjdChzdXBwb3J0LCAnU29tZUNsYXNzJywgc3BlYz1Tb21lQ2xhc3MsIHNwZWNfc2V0PVRydWUpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tDbGFzcyk6DQogICAgICAgICAgICBNb2NrQ2xhc3MueiA9ICdmb28nDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHRlc3QpDQogICAgICAgIEBwYXRjaCgnJXMuU29tZUNsYXNzJyAlIF9fbmFtZV9fLCBzcGVjX3NldD1UcnVlKQ0KICAgICAgICBkZWYgdGVzdChNb2NrQ2xhc3MpOg0KICAgICAgICAgICAgTW9ja0NsYXNzLnogPSAnZm9vJw0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCB0ZXN0KQ0KDQogICAgICAgIEBwYXRjaC5vYmplY3Qoc3VwcG9ydCwgJ1NvbWVDbGFzcycsIHNwZWNfc2V0PVRydWUpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tDbGFzcyk6DQogICAgICAgICAgICBNb2NrQ2xhc3MueiA9ICdmb28nDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHRlc3QpDQoNCg0KICAgIGRlZiB0ZXN0X3NwZWNfc2V0X2luaGVyaXQoc2VsZik6DQogICAgICAgIEBwYXRjaCgnJXMuU29tZUNsYXNzJyAlIF9fbmFtZV9fLCBzcGVjX3NldD1UcnVlKQ0KICAgICAgICBkZWYgdGVzdChNb2NrQ2xhc3MpOg0KICAgICAgICAgICAgaW5zdGFuY2UgPSBNb2NrQ2xhc3MoKQ0KICAgICAgICAgICAgaW5zdGFuY2UueiA9ICdmb28nDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHRlc3QpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3N0YXJ0X3N0b3Aoc2VsZik6DQogICAgICAgIG9yaWdpbmFsID0gc29tZXRoaW5nDQogICAgICAgIHBhdGNoZXIgPSBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fKQ0KICAgICAgICBzZWxmLmFzc2VydElzKHNvbWV0aGluZywgb3JpZ2luYWwpDQogICAgICAgIG1vY2sgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJc05vdChtb2NrLCBvcmlnaW5hbCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoc29tZXRoaW5nLCBtb2NrKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcGF0Y2hlci5zdG9wKCkNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhzb21ldGhpbmcsIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF9zdG9wX3dpdGhvdXRfc3RhcnQoc2VsZik6DQogICAgICAgIHBhdGNoZXIgPSBwYXRjaChmb29fbmFtZSwgJ2JhcicsIDMpDQoNCiAgICAgICAgIyBjYWxsaW5nIHN0b3Agd2l0aG91dCBzdGFydCB1c2VkIHRvIHByb2R1Y2UgYSB2ZXJ5IG9ic2N1cmUgZXJyb3INCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoUnVudGltZUVycm9yLCBwYXRjaGVyLnN0b3ApDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNob2JqZWN0X3N0YXJ0X3N0b3Aoc2VsZik6DQogICAgICAgIG9yaWdpbmFsID0gc29tZXRoaW5nDQogICAgICAgIHBhdGNoZXIgPSBwYXRjaC5vYmplY3QoUFRNb2R1bGUsICdzb21ldGhpbmcnLCAnZm9vJykNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhzb21ldGhpbmcsIG9yaWdpbmFsKQ0KICAgICAgICByZXBsYWNlZCA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlcGxhY2VkLCAnZm9vJykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoc29tZXRoaW5nLCByZXBsYWNlZCkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMoc29tZXRoaW5nLCBvcmlnaW5hbCkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfZGljdF9zdGFydF9zdG9wKHNlbGYpOg0KICAgICAgICBkID0geydmb28nOiAnYmFyJ30NCiAgICAgICAgb3JpZ2luYWwgPSBkLmNvcHkoKQ0KICAgICAgICBwYXRjaGVyID0gcGF0Y2guZGljdChkLCBbKCdzcGFtJywgJ2VnZ3MnKV0sIGNsZWFyPVRydWUpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZCwgb3JpZ2luYWwpDQoNCiAgICAgICAgcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZCwgeydzcGFtJzogJ2VnZ3MnfSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZCwgb3JpZ2luYWwpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2RpY3RfY2xhc3NfZGVjb3JhdG9yKHNlbGYpOg0KICAgICAgICB0aGlzID0gc2VsZg0KICAgICAgICBkID0geydzcGFtJzogJ2VnZ3MnfQ0KICAgICAgICBvcmlnaW5hbCA9IGQuY29weSgpDQoNCiAgICAgICAgY2xhc3MgVGVzdChvYmplY3QpOg0KICAgICAgICAgICAgZGVmIHRlc3RfZmlyc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcXVhbChkLCB7J2Zvbyc6ICdiYXInfSkNCiAgICAgICAgICAgIGRlZiB0ZXN0X3NlY29uZChzZWxmKToNCiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVxdWFsKGQsIHsnZm9vJzogJ2Jhcid9KQ0KDQogICAgICAgIFRlc3QgPSBwYXRjaC5kaWN0KGQsIHsnZm9vJzogJ2Jhcid9LCBjbGVhcj1UcnVlKShUZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGQsIG9yaWdpbmFsKQ0KDQogICAgICAgIHRlc3QgPSBUZXN0KCkNCg0KICAgICAgICB0ZXN0LnRlc3RfZmlyc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGQsIG9yaWdpbmFsKQ0KDQogICAgICAgIHRlc3QudGVzdF9zZWNvbmQoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGQsIG9yaWdpbmFsKQ0KDQogICAgICAgIHRlc3QgPSBUZXN0KCkNCg0KICAgICAgICB0ZXN0LnRlc3RfZmlyc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGQsIG9yaWdpbmFsKQ0KDQogICAgICAgIHRlc3QudGVzdF9zZWNvbmQoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGQsIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF9nZXRfb25seV9wcm94eShzZWxmKToNCiAgICAgICAgY2xhc3MgU29tZXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBmb28gPSAnZm9vJw0KICAgICAgICBjbGFzcyBTb21ldGhpbmdFbHNlOg0KICAgICAgICAgICAgZm9vID0gJ2ZvbycNCg0KICAgICAgICBmb3IgdGhpbmcgaW4gU29tZXRoaW5nLCBTb21ldGhpbmdFbHNlLCBTb21ldGhpbmcoKSwgU29tZXRoaW5nRWxzZToNCiAgICAgICAgICAgIHByb3h5ID0gX2dldF9wcm94eSh0aGluZykNCg0KICAgICAgICAgICAgQHBhdGNoLm9iamVjdChwcm94eSwgJ2ZvbycsICdiYXInKQ0KICAgICAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb3h5LmZvbywgJ2JhcicpDQogICAgICAgICAgICB0ZXN0KCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJveHkuZm9vLCAnZm9vJykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwodGhpbmcuZm9vLCAnZm9vJykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90SW4oJ2ZvbycsIHByb3h5Ll9fZGljdF9fKQ0KDQoNCiAgICBkZWYgdGVzdF9nZXRfc2V0X2RlbGV0ZV9wcm94eShzZWxmKToNCiAgICAgICAgY2xhc3MgU29tZXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBmb28gPSAnZm9vJw0KICAgICAgICBjbGFzcyBTb21ldGhpbmdFbHNlOg0KICAgICAgICAgICAgZm9vID0gJ2ZvbycNCg0KICAgICAgICBmb3IgdGhpbmcgaW4gU29tZXRoaW5nLCBTb21ldGhpbmdFbHNlLCBTb21ldGhpbmcoKSwgU29tZXRoaW5nRWxzZToNCiAgICAgICAgICAgIHByb3h5ID0gX2dldF9wcm94eShTb21ldGhpbmcsIGdldF9vbmx5PUZhbHNlKQ0KDQogICAgICAgICAgICBAcGF0Y2gub2JqZWN0KHByb3h5LCAnZm9vJywgJ2JhcicpDQogICAgICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJveHkuZm9vLCAnYmFyJykNCiAgICAgICAgICAgIHRlc3QoKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm94eS5mb28sICdmb28nKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCh0aGluZy5mb28sICdmb28nKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnROb3RJbignZm9vJywgcHJveHkuX19kaWN0X18pDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2tleXdvcmRfYXJncyhzZWxmKToNCiAgICAgICAga3dhcmdzID0geydzaWRlX2VmZmVjdCc6IEtleUVycm9yLCAnZm9vLmJhci5yZXR1cm5fdmFsdWUnOiAzMywNCiAgICAgICAgICAgICAgICAgICdmb28nOiBNYWdpY01vY2soKX0NCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2goZm9vX25hbWUsICoqa3dhcmdzKQ0KICAgICAgICBtb2NrID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoS2V5RXJyb3IsIG1vY2spDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5mb28uYmFyKCksIDMzKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jay5mb28sIE1hZ2ljTW9jaykNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfb2JqZWN0X2tleXdvcmRfYXJncyhzZWxmKToNCiAgICAgICAga3dhcmdzID0geydzaWRlX2VmZmVjdCc6IEtleUVycm9yLCAnZm9vLmJhci5yZXR1cm5fdmFsdWUnOiAzMywNCiAgICAgICAgICAgICAgICAgICdmb28nOiBNYWdpY01vY2soKX0NCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2gub2JqZWN0KEZvbywgJ2YnLCAqKmt3YXJncykNCiAgICAgICAgbW9jayA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICBwYXRjaGVyLnN0b3AoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suZm9vLmJhcigpLCAzMykNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2suZm9vLCBNYWdpY01vY2spDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2RpY3Rfa2V5d29yZF9hcmdzKHNlbGYpOg0KICAgICAgICBvcmlnaW5hbCA9IHsnZm9vJzogJ2Jhcid9DQogICAgICAgIGNvcHkgPSBvcmlnaW5hbC5jb3B5KCkNCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2guZGljdChvcmlnaW5hbCwgZm9vPTMsIGJhcj00LCBiYXo9NSkNCiAgICAgICAgcGF0Y2hlci5zdGFydCgpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvcmlnaW5hbCwgZGljdChmb289MywgYmFyPTQsIGJhej01KSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvcmlnaW5hbCwgY29weSkNCg0KDQogICAgZGVmIHRlc3RfYXV0b3NwZWMoc2VsZik6DQogICAgICAgIGNsYXNzIEJvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIGEpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiBmKHNlbGYsIGEpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiBnKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGZvbyA9ICdiYXInDQoNCiAgICAgICAgICAgIGNsYXNzIEJhcihvYmplY3QpOg0KICAgICAgICAgICAgICAgIGRlZiBhKHNlbGYpOg0KICAgICAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgZGVmIF90ZXN0KG1vY2spOg0KICAgICAgICAgICAgbW9jaygxKQ0KICAgICAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX3dpdGgoMSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCg0KICAgICAgICBkZWYgX3Rlc3QyKG1vY2spOg0KICAgICAgICAgICAgbW9jay5mKDEpDQogICAgICAgICAgICBtb2NrLmYuYXNzZXJ0X2NhbGxlZF93aXRoKDEpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2suZikNCg0KICAgICAgICAgICAgbW9jay5nKCkNCiAgICAgICAgICAgIG1vY2suZy5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrLmcsIDEpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLCAnaCcpDQoNCiAgICAgICAgICAgIG1vY2suZm9vLmxvd2VyKCkNCiAgICAgICAgICAgIG1vY2suZm9vLmxvd2VyLmFzc2VydF9jYWxsZWRfd2l0aCgpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgbW9jay5mb28sICdiYXInKQ0KDQogICAgICAgICAgICBtb2NrLkJhcigpDQogICAgICAgICAgICBtb2NrLkJhci5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KDQogICAgICAgICAgICBtb2NrLkJhci5hKCkNCiAgICAgICAgICAgIG1vY2suQmFyLmEuYXNzZXJ0X2NhbGxlZF93aXRoKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jay5CYXIuYSwgMSkNCg0KICAgICAgICAgICAgbW9jay5CYXIoKS5hKCkNCiAgICAgICAgICAgIG1vY2suQmFyKCkuYS5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrLkJhcigpLmEsIDEpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLkJhciwgJ2InKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2suQmFyKCksICdiJykNCg0KICAgICAgICBkZWYgZnVuY3Rpb24obW9jayk6DQogICAgICAgICAgICBfdGVzdChtb2NrKQ0KICAgICAgICAgICAgX3Rlc3QyKG1vY2spDQogICAgICAgICAgICBfdGVzdDIobW9jaygxKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMobW9jaywgRm9vKQ0KICAgICAgICAgICAgcmV0dXJuIG1vY2sNCg0KICAgICAgICB0ZXN0ID0gcGF0Y2goZm9vX25hbWUsIGF1dG9zcGVjPVRydWUpKGZ1bmN0aW9uKQ0KDQogICAgICAgIG1vY2sgPSB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdChGb28sIG1vY2spDQogICAgICAgICMgdGVzdCBwYXRjaGluZyBhIHNlY29uZCB0aW1lIHdvcmtzDQogICAgICAgIHRlc3QoKQ0KDQogICAgICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW19fbmFtZV9fXQ0KICAgICAgICB0ZXN0ID0gcGF0Y2gub2JqZWN0KG1vZHVsZSwgJ0ZvbycsIGF1dG9zcGVjPVRydWUpKGZ1bmN0aW9uKQ0KDQogICAgICAgIG1vY2sgPSB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdChGb28sIG1vY2spDQogICAgICAgICMgdGVzdCBwYXRjaGluZyBhIHNlY29uZCB0aW1lIHdvcmtzDQogICAgICAgIHRlc3QoKQ0KDQoNCiAgICBkZWYgdGVzdF9hdXRvc3BlY19mdW5jdGlvbihzZWxmKToNCiAgICAgICAgQHBhdGNoKCclcy5mdW5jdGlvbicgJSBfX25hbWVfXywgYXV0b3NwZWM9VHJ1ZSkNCiAgICAgICAgZGVmIHRlc3QobW9jayk6DQogICAgICAgICAgICBmdW5jdGlvbigxKQ0KICAgICAgICAgICAgZnVuY3Rpb24uYXNzZXJ0X2NhbGxlZF93aXRoKDEpDQogICAgICAgICAgICBmdW5jdGlvbigyLCAzKQ0KICAgICAgICAgICAgZnVuY3Rpb24uYXNzZXJ0X2NhbGxlZF93aXRoKDIsIDMpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgZnVuY3Rpb24pDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgZnVuY3Rpb24sICdmb28nKQ0KDQogICAgICAgIHRlc3QoKQ0KDQoNCiAgICBkZWYgdGVzdF9hdXRvc3BlY19rZXl3b3JkcyhzZWxmKToNCiAgICAgICAgQHBhdGNoKCclcy5mdW5jdGlvbicgJSBfX25hbWVfXywgYXV0b3NwZWM9VHJ1ZSwNCiAgICAgICAgICAgICAgIHJldHVybl92YWx1ZT0zKQ0KICAgICAgICBkZWYgdGVzdChtb2NrX2Z1bmN0aW9uKToNCiAgICAgICAgICAgICNzZWxmLmFzc2VydEVxdWFsKGZ1bmN0aW9uLmFiYywgJ2ZvbycpDQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oMSwgMikNCg0KICAgICAgICByZXN1bHQgPSB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQsIDMpDQoNCg0KICAgIGRlZiB0ZXN0X2F1dG9zcGVjX3dpdGhfbmV3KHNlbGYpOg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2goJyVzLmZ1bmN0aW9uJyAlIF9fbmFtZV9fLCBuZXc9MywgYXV0b3NwZWM9VHJ1ZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBwYXRjaGVyLnN0YXJ0KQ0KDQogICAgICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW19fbmFtZV9fXQ0KICAgICAgICBwYXRjaGVyID0gcGF0Y2gub2JqZWN0KG1vZHVsZSwgJ2Z1bmN0aW9uJywgbmV3PTMsIGF1dG9zcGVjPVRydWUpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgcGF0Y2hlci5zdGFydCkNCg0KDQogICAgZGVmIHRlc3RfYXV0b3NwZWNfd2l0aF9vYmplY3Qoc2VsZik6DQogICAgICAgIGNsYXNzIEJhcihGb28pOg0KICAgICAgICAgICAgZXh0cmEgPSBbXQ0KDQogICAgICAgIHBhdGNoZXIgPSBwYXRjaChmb29fbmFtZSwgYXV0b3NwZWM9QmFyKQ0KICAgICAgICBtb2NrID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrLCBCYXIpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jay5leHRyYSwgbGlzdCkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X2F1dG9zcGVjX2luaGVyaXRzKHNlbGYpOg0KICAgICAgICBGb29DbGFzcyA9IEZvbw0KICAgICAgICBwYXRjaGVyID0gcGF0Y2goZm9vX25hbWUsIGF1dG9zcGVjPVRydWUpDQogICAgICAgIG1vY2sgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2ssIEZvb0NsYXNzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2soMyksIEZvb0NsYXNzKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcGF0Y2hlci5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfYXV0b3NwZWNfbmFtZShzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKGZvb19uYW1lLCBhdXRvc3BlYz1UcnVlKQ0KICAgICAgICBtb2NrID0gcGF0Y2hlci5zdGFydCgpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J0ZvbyciLCByZXByKG1vY2spKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J0Zvby5mJyIsIHJlcHIobW9jay5mKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIiBuYW1lPSdGb28oKSciLCByZXByKG1vY2soTm9uZSkpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J0ZvbygpLmYnIiwgcmVwcihtb2NrKE5vbmUpLmYpKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcGF0Y2hlci5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfdHJhY2ViYWNrcyhzZWxmKToNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdmJywgb2JqZWN0KCkpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICByYWlzZSBBc3NlcnRpb25FcnJvcg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0ZXN0KCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgZXJyID0gc3lzLmV4Y19pbmZvKCkNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXh0VGVzdFJlc3VsdChOb25lLCBOb25lLCAwKQ0KICAgICAgICB0cmFjZWJhY2sgPSByZXN1bHQuX2V4Y19pbmZvX3RvX3N0cmluZyhlcnIsIHNlbGYpDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oJ3JhaXNlIEFzc2VydGlvbkVycm9yJywgdHJhY2ViYWNrKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfcGF0Y2goc2VsZik6DQogICAgICAgIHBhdGNoZXIgPSBwYXRjaChmb29fbmFtZSwgbmV3X2NhbGxhYmxlPU5vbkNhbGxhYmxlTWFnaWNNb2NrKQ0KDQogICAgICAgIG0xID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHBhdGNoZXIuc3RvcCgpDQogICAgICAgIG0yID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdChtMSwgbTIpDQogICAgICAgIGZvciBtb2NrIGluIG0xLCBtMjoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90Q2FsbGFibGUobTEpDQoNCg0KICAgIGRlZiB0ZXN0X25ld19jYWxsYWJsZV9wYXRjaF9vYmplY3Qoc2VsZik6DQogICAgICAgIHBhdGNoZXIgPSBwYXRjaC5vYmplY3QoRm9vLCAnZicsIG5ld19jYWxsYWJsZT1Ob25DYWxsYWJsZU1hZ2ljTW9jaykNCg0KICAgICAgICBtMSA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICBwYXRjaGVyLnN0b3AoKQ0KICAgICAgICBtMiA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICBwYXRjaGVyLnN0b3AoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb3QobTEsIG0yKQ0KICAgICAgICBmb3IgbW9jayBpbiBtMSwgbTI6DQogICAgICAgICAgICBzZWxmLmFzc2VydE5vdENhbGxhYmxlKG0xKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfa2V5d29yZF9hcmd1bWVudHMoc2VsZik6DQogICAgICAgIGNsYXNzIEJhcihvYmplY3QpOg0KICAgICAgICAgICAga3dhcmdzID0gTm9uZQ0KICAgICAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsICoqa3dhcmdzKToNCiAgICAgICAgICAgICAgICBCYXIua3dhcmdzID0ga3dhcmdzDQoNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKGZvb19uYW1lLCBuZXdfY2FsbGFibGU9QmFyLCBhcmcxPTEsIGFyZzI9MikNCiAgICAgICAgbSA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydElzKHR5cGUobSksIEJhcikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoQmFyLmt3YXJncywgZGljdChhcmcxPTEsIGFyZzI9MikpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBwYXRjaGVyLnN0b3AoKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfc3BlYyhzZWxmKToNCiAgICAgICAgY2xhc3MgQmFyKG9iamVjdCk6DQogICAgICAgICAgICBrd2FyZ3MgPSBOb25lDQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgKiprd2FyZ3MpOg0KICAgICAgICAgICAgICAgIEJhci5rd2FyZ3MgPSBrd2FyZ3MNCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2goZm9vX25hbWUsIG5ld19jYWxsYWJsZT1CYXIsIHNwZWM9QmFyKQ0KICAgICAgICBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChCYXIua3dhcmdzLCBkaWN0KHNwZWM9QmFyKSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKGZvb19uYW1lLCBuZXdfY2FsbGFibGU9QmFyLCBzcGVjX3NldD1CYXIpDQogICAgICAgIHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEJhci5rd2FyZ3MsIGRpY3Qoc3BlY19zZXQ9QmFyKSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X25ld19jYWxsYWJsZV9jcmVhdGUoc2VsZik6DQogICAgICAgIG5vbl9leGlzdGVudF9hdHRyID0gJyVzLndlZWVlZScgJSBmb29fbmFtZQ0KICAgICAgICBwID0gcGF0Y2gobm9uX2V4aXN0ZW50X2F0dHIsIG5ld19jYWxsYWJsZT1Ob25DYWxsYWJsZU1vY2spDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBwLnN0YXJ0KQ0KDQogICAgICAgIHAgPSBwYXRjaChub25fZXhpc3RlbnRfYXR0ciwgbmV3X2NhbGxhYmxlPU5vbkNhbGxhYmxlTW9jaywNCiAgICAgICAgICAgICAgICAgIGNyZWF0ZT1UcnVlKQ0KICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90Q2FsbGFibGUobSwgbWFnaWM9RmFsc2UpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBwLnN0b3AoKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfaW5jb21wYXRpYmxlX3dpdGhfbmV3KHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIFZhbHVlRXJyb3IsIHBhdGNoLCBmb29fbmFtZSwgbmV3PW9iamVjdCgpLCBuZXdfY2FsbGFibGU9TWFnaWNNb2NrDQogICAgICAgICkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoDQogICAgICAgICAgICBWYWx1ZUVycm9yLCBwYXRjaC5vYmplY3QsIEZvbywgJ2YnLCBuZXc9b2JqZWN0KCksDQogICAgICAgICAgICBuZXdfY2FsbGFibGU9TWFnaWNNb2NrDQogICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfbmV3X2NhbGxhYmxlX2luY29tcGF0aWJsZV93aXRoX2F1dG9zcGVjKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIFZhbHVlRXJyb3IsIHBhdGNoLCBmb29fbmFtZSwgbmV3X2NhbGxhYmxlPU1hZ2ljTW9jaywNCiAgICAgICAgICAgIGF1dG9zcGVjPVRydWUNCiAgICAgICAgKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIFZhbHVlRXJyb3IsIHBhdGNoLm9iamVjdCwgRm9vLCAnZicsIG5ld19jYWxsYWJsZT1NYWdpY01vY2ssDQogICAgICAgICAgICBhdXRvc3BlYz1UcnVlDQogICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfbmV3X2NhbGxhYmxlX2luaGVyaXRfZm9yX21vY2tzKHNlbGYpOg0KICAgICAgICBjbGFzcyBNb2NrU3ViKE1vY2spOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIE1vY2tDbGFzc2VzID0gKA0KICAgICAgICAgICAgTm9uQ2FsbGFibGVNb2NrLCBOb25DYWxsYWJsZU1hZ2ljTW9jaywgTWFnaWNNb2NrLCBNb2NrLCBNb2NrU3ViDQogICAgICAgICkNCiAgICAgICAgZm9yIEtsYXNzIGluIE1vY2tDbGFzc2VzOg0KICAgICAgICAgICAgZm9yIGFyZyBpbiAnc3BlYycsICdzcGVjX3NldCc6DQogICAgICAgICAgICAgICAga3dhcmdzID0ge2FyZzogVHJ1ZX0NCiAgICAgICAgICAgICAgICBwID0gcGF0Y2goZm9vX25hbWUsIG5ld19jYWxsYWJsZT1LbGFzcywgKiprd2FyZ3MpDQogICAgICAgICAgICAgICAgbSA9IHAuc3RhcnQoKQ0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBtLnJldHVybl92YWx1ZQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgaW5zdGFuY2UsICd4JykNCiAgICAgICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgICAgICBwLnN0b3AoKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfaW5oZXJpdF9ub25fbW9jayhzZWxmKToNCiAgICAgICAgY2xhc3MgTm90QU1vY2sob2JqZWN0KToNCiAgICAgICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzcGVjKToNCiAgICAgICAgICAgICAgICBzZWxmLnNwZWMgPSBzcGVjDQoNCiAgICAgICAgcCA9IHBhdGNoKGZvb19uYW1lLCBuZXdfY2FsbGFibGU9Tm90QU1vY2ssIHNwZWM9VHJ1ZSkNCiAgICAgICAgbSA9IHAuc3RhcnQoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UobSwgTm90QU1vY2spKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG0sICdyZXR1cm5fdmFsdWUnKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcC5zdG9wKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0uc3BlYywgRm9vKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfY2xhc3NfZGVjb3JhdGluZyhzZWxmKToNCiAgICAgICAgdGVzdCA9IHNlbGYNCiAgICAgICAgb3JpZ2luYWwgPSBGb28NCiAgICAgICAgY2xhc3MgU29tZVRlc3Qob2JqZWN0KToNCg0KICAgICAgICAgICAgZGVmIF90ZXN0KHNlbGYsIG1vY2tfZm9vKToNCiAgICAgICAgICAgICAgICB0ZXN0LmFzc2VydElzTm90KEZvbywgb3JpZ2luYWwpDQogICAgICAgICAgICAgICAgdGVzdC5hc3NlcnRJcyhGb28sIG1vY2tfZm9vKQ0KICAgICAgICAgICAgICAgIHRlc3QuYXNzZXJ0SXNJbnN0YW5jZShGb28sIFNvbWVDbGFzcykNCg0KICAgICAgICAgICAgZGVmIHRlc3RfdHdvKHNlbGYsIG1vY2tfZm9vKToNCiAgICAgICAgICAgICAgICBzZWxmLl90ZXN0KG1vY2tfZm9vKQ0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYsIG1vY2tfZm9vKToNCiAgICAgICAgICAgICAgICBzZWxmLl90ZXN0KG1vY2tfZm9vKQ0KDQogICAgICAgIFNvbWVUZXN0ID0gcGF0Y2goZm9vX25hbWUsIG5ld19jYWxsYWJsZT1Tb21lQ2xhc3MpKFNvbWVUZXN0KQ0KICAgICAgICBTb21lVGVzdCgpLnRlc3Rfb25lKCkNCiAgICAgICAgU29tZVRlc3QoKS50ZXN0X3R3bygpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLCBvcmlnaW5hbCkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfbXVsdGlwbGUoc2VsZik6DQogICAgICAgIG9yaWdpbmFsX2ZvbyA9IEZvbw0KICAgICAgICBvcmlnaW5hbF9mID0gRm9vLmYNCiAgICAgICAgb3JpZ2luYWxfZyA9IEZvby5nDQoNCiAgICAgICAgcGF0Y2hlcjEgPSBwYXRjaC5tdWx0aXBsZShmb29fbmFtZSwgZj0xLCBnPTIpDQogICAgICAgIHBhdGNoZXIyID0gcGF0Y2gubXVsdGlwbGUoRm9vLCBmPTEsIGc9MikNCg0KICAgICAgICBmb3IgcGF0Y2hlciBpbiBwYXRjaGVyMSwgcGF0Y2hlcjI6DQogICAgICAgICAgICBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydElzKEZvbywgb3JpZ2luYWxfZm9vKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmYsIDEpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgMikNCiAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgcGF0Y2hlci5zdG9wKCkNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhGb28sIG9yaWdpbmFsX2ZvbykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmYsIG9yaWdpbmFsX2YpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5nLCBvcmlnaW5hbF9nKQ0KDQoNCiAgICAgICAgQHBhdGNoLm11bHRpcGxlKGZvb19uYW1lLCBmPTMsIGc9NCkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLCBvcmlnaW5hbF9mb28pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCAzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgNCkNCg0KICAgICAgICB0ZXN0KCkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfbXVsdGlwbGVfbm9fa3dhcmdzKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhWYWx1ZUVycm9yLCBwYXRjaC5tdWx0aXBsZSwgZm9vX25hbWUpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIHBhdGNoLm11bHRpcGxlLCBGb28pDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX211bHRpcGxlX2NyZWF0ZV9tb2NrcyhzZWxmKToNCiAgICAgICAgb3JpZ2luYWxfZm9vID0gRm9vDQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCg0KICAgICAgICBAcGF0Y2gubXVsdGlwbGUoZm9vX25hbWUsIGY9REVGQVVMVCwgZz0zLCBmb289REVGQVVMVCkNCiAgICAgICAgZGVmIHRlc3QoZiwgZm9vKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLCBvcmlnaW5hbF9mb28pDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKEZvby5mLCBmKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgMykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLmZvbywgZm9vKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKGYsIE1hZ2ljTW9jaykpDQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UoZm9vLCBNYWdpY01vY2spKQ0KDQogICAgICAgIHRlc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5nLCBvcmlnaW5hbF9nKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9jcmVhdGVfbW9ja3NfZGlmZmVyZW50X29yZGVyKHNlbGYpOg0KICAgICAgICAjIGJ1ZyByZXZlYWxlZCBieSBKeXRob24hDQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2gub2JqZWN0KEZvbywgJ2YnLCAzKQ0KICAgICAgICBwYXRjaGVyLmF0dHJpYnV0ZV9uYW1lID0gJ2YnDQoNCiAgICAgICAgb3RoZXIgPSBwYXRjaC5vYmplY3QoRm9vLCAnZycsIERFRkFVTFQpDQogICAgICAgIG90aGVyLmF0dHJpYnV0ZV9uYW1lID0gJ2cnDQogICAgICAgIHBhdGNoZXIuYWRkaXRpb25hbF9wYXRjaGVycyA9IFtvdGhlcl0NCg0KICAgICAgICBAcGF0Y2hlcg0KICAgICAgICBkZWYgdGVzdChnKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLmcsIGcpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCAzKQ0KDQogICAgICAgIHRlc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5nLCBvcmlnaW5hbF9nKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9zdGFja2VkX2RlY29yYXRvcnMoc2VsZik6DQogICAgICAgIG9yaWdpbmFsX2ZvbyA9IEZvbw0KICAgICAgICBvcmlnaW5hbF9mID0gRm9vLmYNCiAgICAgICAgb3JpZ2luYWxfZyA9IEZvby5nDQoNCiAgICAgICAgQHBhdGNoLm11bHRpcGxlKGZvb19uYW1lLCBmPURFRkFVTFQpDQogICAgICAgIEBwYXRjaC5tdWx0aXBsZShmb29fbmFtZSwgZm9vPURFRkFVTFQpDQogICAgICAgIEBwYXRjaChmb29fbmFtZSArICcuZycpDQogICAgICAgIGRlZiB0ZXN0MShnLCAqKmt3YXJncyk6DQogICAgICAgICAgICBfdGVzdChnLCAqKmt3YXJncykNCg0KICAgICAgICBAcGF0Y2gubXVsdGlwbGUoZm9vX25hbWUsIGY9REVGQVVMVCkNCiAgICAgICAgQHBhdGNoKGZvb19uYW1lICsgJy5nJykNCiAgICAgICAgQHBhdGNoLm11bHRpcGxlKGZvb19uYW1lLCBmb289REVGQVVMVCkNCiAgICAgICAgZGVmIHRlc3QyKGcsICoqa3dhcmdzKToNCiAgICAgICAgICAgIF90ZXN0KGcsICoqa3dhcmdzKQ0KDQogICAgICAgIEBwYXRjaChmb29fbmFtZSArICcuZycpDQogICAgICAgIEBwYXRjaC5tdWx0aXBsZShmb29fbmFtZSwgZj1ERUZBVUxUKQ0KICAgICAgICBAcGF0Y2gubXVsdGlwbGUoZm9vX25hbWUsIGZvbz1ERUZBVUxUKQ0KICAgICAgICBkZWYgdGVzdDMoZywgKiprd2FyZ3MpOg0KICAgICAgICAgICAgX3Rlc3QoZywgKiprd2FyZ3MpDQoNCiAgICAgICAgZGVmIF90ZXN0KGcsICoqa3dhcmdzKToNCiAgICAgICAgICAgIGYgPSBrd2FyZ3MucG9wKCdmJykNCiAgICAgICAgICAgIGZvbyA9IGt3YXJncy5wb3AoJ2ZvbycpDQogICAgICAgICAgICBzZWxmLmFzc2VydEZhbHNlKGt3YXJncykNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhGb28sIG9yaWdpbmFsX2ZvbykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLmYsIGYpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKEZvby5nLCBnKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhGb28uZm9vLCBmb28pDQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UoZiwgTWFnaWNNb2NrKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc19pbnN0YW5jZShnLCBNYWdpY01vY2spKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKGZvbywgTWFnaWNNb2NrKSkNCg0KICAgICAgICB0ZXN0MSgpDQogICAgICAgIHRlc3QyKCkNCiAgICAgICAgdGVzdDMoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5nLCBvcmlnaW5hbF9nKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9jcmVhdGVfbW9ja3NfcGF0Y2hlcihzZWxmKToNCiAgICAgICAgb3JpZ2luYWxfZm9vID0gRm9vDQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2gubXVsdGlwbGUoZm9vX25hbWUsIGY9REVGQVVMVCwgZz0zLCBmb289REVGQVVMVCkNCg0KICAgICAgICByZXN1bHQgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZiA9IHJlc3VsdFsnZiddDQogICAgICAgICAgICBmb28gPSByZXN1bHRbJ2ZvbyddDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNldChyZXN1bHQpLCBzZXQoWydmJywgJ2ZvbyddKSkNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhGb28sIG9yaWdpbmFsX2ZvbykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLmYsIGYpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKEZvby5mb28sIGZvbykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc19pbnN0YW5jZShmLCBNYWdpY01vY2spKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKGZvbywgTWFnaWNNb2NrKSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZiwgb3JpZ2luYWxfZikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgb3JpZ2luYWxfZykNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfbXVsdGlwbGVfZGVjb3JhdGluZ19jbGFzcyhzZWxmKToNCiAgICAgICAgdGVzdCA9IHNlbGYNCiAgICAgICAgb3JpZ2luYWxfZm9vID0gRm9vDQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCg0KICAgICAgICBjbGFzcyBTb21lVGVzdChvYmplY3QpOg0KDQogICAgICAgICAgICBkZWYgX3Rlc3Qoc2VsZiwgZiwgZm9vKToNCiAgICAgICAgICAgICAgICB0ZXN0LmFzc2VydElzKEZvbywgb3JpZ2luYWxfZm9vKQ0KICAgICAgICAgICAgICAgIHRlc3QuYXNzZXJ0SXMoRm9vLmYsIGYpDQogICAgICAgICAgICAgICAgdGVzdC5hc3NlcnRFcXVhbChGb28uZywgMykNCiAgICAgICAgICAgICAgICB0ZXN0LmFzc2VydElzKEZvby5mb28sIGZvbykNCiAgICAgICAgICAgICAgICB0ZXN0LmFzc2VydFRydWUoaXNfaW5zdGFuY2UoZiwgTWFnaWNNb2NrKSkNCiAgICAgICAgICAgICAgICB0ZXN0LmFzc2VydFRydWUoaXNfaW5zdGFuY2UoZm9vLCBNYWdpY01vY2spKQ0KDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZiwgZiwgZm9vKToNCiAgICAgICAgICAgICAgICBzZWxmLl90ZXN0KGYsIGZvbykNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmLCBmLCBmb28pOg0KICAgICAgICAgICAgICAgIHNlbGYuX3Rlc3QoZiwgZm9vKQ0KDQogICAgICAgIFNvbWVUZXN0ID0gcGF0Y2gubXVsdGlwbGUoDQogICAgICAgICAgICBmb29fbmFtZSwgZj1ERUZBVUxULCBnPTMsIGZvbz1ERUZBVUxUDQogICAgICAgICkoU29tZVRlc3QpDQoNCiAgICAgICAgdGhpbmcgPSBTb21lVGVzdCgpDQogICAgICAgIHRoaW5nLnRlc3Rfb25lKCkNCiAgICAgICAgdGhpbmcudGVzdF90d28oKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmYsIG9yaWdpbmFsX2YpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmcsIG9yaWdpbmFsX2cpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX211bHRpcGxlX2NyZWF0ZShzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoLm11bHRpcGxlKEZvbywgYmxhbT0nYmxhbScpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBwYXRjaGVyLnN0YXJ0KQ0KDQogICAgICAgIHBhdGNoZXIgPSBwYXRjaC5tdWx0aXBsZShGb28sIGJsYW09J2JsYW0nLCBjcmVhdGU9VHJ1ZSkNCiAgICAgICAgcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmJsYW0sICdibGFtJykNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKEZvbywgJ2JsYW0nKSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfbXVsdGlwbGVfc3BlY19zZXQoc2VsZik6DQogICAgICAgICMgaWYgc3BlY19zZXQgd29ya3MgdGhlbiB3ZSBjYW4gYXNzdW1lIHRoYXQgc3BlYyBhbmQgYXV0b3NwZWMgYWxzbw0KICAgICAgICAjIHdvcmsgYXMgdGhlIHVuZGVybHlpbmcgbWFjaGluZXJ5IGlzIHRoZSBzYW1lDQogICAgICAgIHBhdGNoZXIgPSBwYXRjaC5tdWx0aXBsZShGb28sIGZvbz1ERUZBVUxULCBzcGVjX3NldD1bJ2EnLCAnYiddKQ0KICAgICAgICByZXN1bHQgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZm9vLCByZXN1bHRbJ2ZvbyddKQ0KICAgICAgICAgICAgRm9vLmZvby5hKDEpDQogICAgICAgICAgICBGb28uZm9vLmIoMikNCiAgICAgICAgICAgIEZvby5mb28uYS5hc3NlcnRfY2FsbGVkX3dpdGgoMSkNCiAgICAgICAgICAgIEZvby5mb28uYi5hc3NlcnRfY2FsbGVkX3dpdGgoMikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBzZXRhdHRyLCBGb28uZm9vLCAnYycsIE5vbmUpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBwYXRjaGVyLnN0b3AoKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9uZXdfY2FsbGFibGUoc2VsZik6DQogICAgICAgIGNsYXNzIFRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoLm11bHRpcGxlKA0KICAgICAgICAgICAgRm9vLCBmPURFRkFVTFQsIGc9REVGQVVMVCwgbmV3X2NhbGxhYmxlPVRoaW5nDQogICAgICAgICkNCiAgICAgICAgcmVzdWx0ID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLmYsIHJlc3VsdFsnZiddKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhGb28uZywgcmVzdWx0WydnJ10pDQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoRm9vLmYsIFRoaW5nKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKEZvby5nLCBUaGluZykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNOb3QoRm9vLmYsIEZvby5nKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcGF0Y2hlci5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfbmVzdGVkX3BhdGNoX2ZhaWx1cmUoc2VsZik6DQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ2cnLCAxKQ0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ21pc3NpbmcnLCAxKQ0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ2YnLCAxKQ0KICAgICAgICBkZWYgdGhpbmcxKCk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdtaXNzaW5nJywgMSkNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdnJywgMSkNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdmJywgMSkNCiAgICAgICAgZGVmIHRoaW5nMigpOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnZycsIDEpDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnZicsIDEpDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnbWlzc2luZycsIDEpDQogICAgICAgIGRlZiB0aGluZzMoKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBmb3IgZnVuYyBpbiB0aGluZzEsIHRoaW5nMiwgdGhpbmczOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGZ1bmMpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgb3JpZ2luYWxfZykNCg0KDQogICAgZGVmIHRlc3RfbmV3X2NhbGxhYmxlX2ZhaWx1cmUoc2VsZik6DQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCiAgICAgICAgb3JpZ2luYWxfZm9vID0gRm9vLmZvbw0KDQogICAgICAgIGRlZiBjcmFzaGVyKCk6DQogICAgICAgICAgICByYWlzZSBOYW1lRXJyb3IoJ2NyYXNoZXInKQ0KDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnZycsIDEpDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnZm9vJywgbmV3X2NhbGxhYmxlPWNyYXNoZXIpDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnZicsIDEpDQogICAgICAgIGRlZiB0aGluZzEoKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ2ZvbycsIG5ld19jYWxsYWJsZT1jcmFzaGVyKQ0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ2cnLCAxKQ0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ2YnLCAxKQ0KICAgICAgICBkZWYgdGhpbmcyKCk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdnJywgMSkNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdmJywgMSkNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdmb28nLCBuZXdfY2FsbGFibGU9Y3Jhc2hlcikNCiAgICAgICAgZGVmIHRoaW5nMygpOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGZvciBmdW5jIGluIHRoaW5nMSwgdGhpbmcyLCB0aGluZzM6DQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhOYW1lRXJyb3IsIGZ1bmMpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgb3JpZ2luYWxfZykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmZvbywgb3JpZ2luYWxfZm9vKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9mYWlsdXJlKHNlbGYpOg0KICAgICAgICBvcmlnaW5hbF9mID0gRm9vLmYNCiAgICAgICAgb3JpZ2luYWxfZyA9IEZvby5nDQoNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoLm9iamVjdChGb28sICdmJywgMSkNCiAgICAgICAgcGF0Y2hlci5hdHRyaWJ1dGVfbmFtZSA9ICdmJw0KDQogICAgICAgIGdvb2QgPSBwYXRjaC5vYmplY3QoRm9vLCAnZycsIDEpDQogICAgICAgIGdvb2QuYXR0cmlidXRlX25hbWUgPSAnZycNCg0KICAgICAgICBiYWQgPSBwYXRjaC5vYmplY3QoRm9vLCAnbWlzc2luZycsIDEpDQogICAgICAgIGJhZC5hdHRyaWJ1dGVfbmFtZSA9ICdtaXNzaW5nJw0KDQogICAgICAgIGZvciBhZGRpdGlvbmFscyBpbiBbZ29vZCwgYmFkXSwgW2JhZCwgZ29vZF06DQogICAgICAgICAgICBwYXRjaGVyLmFkZGl0aW9uYWxfcGF0Y2hlcnMgPSBhZGRpdGlvbmFscw0KDQogICAgICAgICAgICBAcGF0Y2hlcg0KICAgICAgICAgICAgZGVmIGZ1bmMoKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBmdW5jKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZiwgb3JpZ2luYWxfZikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmcsIG9yaWdpbmFsX2cpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX211bHRpcGxlX25ld19jYWxsYWJsZV9mYWlsdXJlKHNlbGYpOg0KICAgICAgICBvcmlnaW5hbF9mID0gRm9vLmYNCiAgICAgICAgb3JpZ2luYWxfZyA9IEZvby5nDQogICAgICAgIG9yaWdpbmFsX2ZvbyA9IEZvby5mb28NCg0KICAgICAgICBkZWYgY3Jhc2hlcigpOg0KICAgICAgICAgICAgcmFpc2UgTmFtZUVycm9yKCdjcmFzaGVyJykNCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2gub2JqZWN0KEZvbywgJ2YnLCAxKQ0KICAgICAgICBwYXRjaGVyLmF0dHJpYnV0ZV9uYW1lID0gJ2YnDQoNCiAgICAgICAgZ29vZCA9IHBhdGNoLm9iamVjdChGb28sICdnJywgMSkNCiAgICAgICAgZ29vZC5hdHRyaWJ1dGVfbmFtZSA9ICdnJw0KDQogICAgICAgIGJhZCA9IHBhdGNoLm9iamVjdChGb28sICdmb28nLCBuZXdfY2FsbGFibGU9Y3Jhc2hlcikNCiAgICAgICAgYmFkLmF0dHJpYnV0ZV9uYW1lID0gJ2ZvbycNCg0KICAgICAgICBmb3IgYWRkaXRpb25hbHMgaW4gW2dvb2QsIGJhZF0sIFtiYWQsIGdvb2RdOg0KICAgICAgICAgICAgcGF0Y2hlci5hZGRpdGlvbmFsX3BhdGNoZXJzID0gYWRkaXRpb25hbHMNCg0KICAgICAgICAgICAgQHBhdGNoZXINCiAgICAgICAgICAgIGRlZiBmdW5jKCk6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhOYW1lRXJyb3IsIGZ1bmMpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgb3JpZ2luYWxfZykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmZvbywgb3JpZ2luYWxfZm9vKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9zdHJpbmdfc3ViY2xhc3NlcyhzZWxmKToNCiAgICAgICAgRm9vID0gdHlwZSgnRm9vJywgKHN0ciwpLCB7J2Zpc2gnOiAndGFzdHknfSkNCiAgICAgICAgZm9vID0gRm9vKCkNCiAgICAgICAgQHBhdGNoLm11bHRpcGxlKGZvbywgZmlzaD0nbmVhcmx5IGdvbmUnKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28uZmlzaCwgJ25lYXJseSBnb25lJykNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28uZmlzaCwgJ3Rhc3R5JykNCg0KDQogICAgQHBhdGNoKCd1bml0dGVzdC5tb2NrLnBhdGNoLlRFU1RfUFJFRklYJywgJ2ZvbycpDQogICAgZGVmIHRlc3RfcGF0Y2hfdGVzdF9wcmVmaXgoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgdGhpbmcgPSAnb3JpZ2luYWwnDQoNCiAgICAgICAgICAgIGRlZiBmb29fb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnRoaW5nDQogICAgICAgICAgICBkZWYgZm9vX3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi50aGluZw0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnRoaW5nDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZik6DQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYudGhpbmcNCg0KICAgICAgICBGb28gPSBwYXRjaC5vYmplY3QoRm9vLCAndGhpbmcnLCAnY2hhbmdlZCcpKEZvbykNCg0KICAgICAgICBmb28gPSBGb28oKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby5mb29fb25lKCksICdjaGFuZ2VkJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28uZm9vX3R3bygpLCAnY2hhbmdlZCcpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLnRlc3Rfb25lKCksICdvcmlnaW5hbCcpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLnRlc3RfdHdvKCksICdvcmlnaW5hbCcpDQoNCg0KICAgIEBwYXRjaCgndW5pdHRlc3QubW9jay5wYXRjaC5URVNUX1BSRUZJWCcsICdiYXInKQ0KICAgIGRlZiB0ZXN0X3BhdGNoX2RpY3RfdGVzdF9wcmVmaXgoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIGJhcl9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcmV0dXJuIGRpY3QodGhlX2RpY3QpDQogICAgICAgICAgICBkZWYgYmFyX3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gZGljdCh0aGVfZGljdCkNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gZGljdCh0aGVfZGljdCkNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gZGljdCh0aGVfZGljdCkNCg0KICAgICAgICB0aGVfZGljdCA9IHsna2V5JzogJ29yaWdpbmFsJ30NCiAgICAgICAgRm9vID0gcGF0Y2guZGljdCh0aGVfZGljdCwga2V5PSdjaGFuZ2VkJykoRm9vKQ0KDQogICAgICAgIGZvbyA9Rm9vKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28uYmFyX29uZSgpLCB7J2tleSc6ICdjaGFuZ2VkJ30pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLmJhcl90d28oKSwgeydrZXknOiAnY2hhbmdlZCd9KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby50ZXN0X29uZSgpLCB7J2tleSc6ICdvcmlnaW5hbCd9KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby50ZXN0X3R3bygpLCB7J2tleSc6ICdvcmlnaW5hbCd9KQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF93aXRoX3NwZWNfbW9ja19yZXByKHNlbGYpOg0KICAgICAgICBmb3IgYXJnIGluICgnc3BlYycsICdhdXRvc3BlYycsICdzcGVjX3NldCcpOg0KICAgICAgICAgICAgcCA9IHBhdGNoKCclcy5Tb21lQ2xhc3MnICUgX19uYW1lX18sICoqe2FyZzogVHJ1ZX0pDQogICAgICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J1NvbWVDbGFzcyciLCByZXByKG0pKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIiBuYW1lPSdTb21lQ2xhc3MuY2xhc3NfYXR0cmlidXRlJyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXByKG0uY2xhc3NfYXR0cmlidXRlKSkNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEluKCIgbmFtZT0nU29tZUNsYXNzKCknIiwgcmVwcihtKCkpKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIiBuYW1lPSdTb21lQ2xhc3MoKS5jbGFzc19hdHRyaWJ1dGUnIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcHIobSgpLmNsYXNzX2F0dHJpYnV0ZSkpDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHAuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX25lc3RlZF9hdXRvc3BlY19yZXByKHNlbGYpOg0KICAgICAgICB3aXRoIHBhdGNoKCd1bml0dGVzdC50ZXN0LnRlc3Rtb2NrLnN1cHBvcnQnLCBhdXRvc3BlYz1UcnVlKSBhcyBtOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J3N1cHBvcnQuU29tZUNsYXNzLndpYmJsZSgpJyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIHJlcHIobS5Tb21lQ2xhc3Mud2liYmxlKCkpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J3N1cHBvcnQuU29tZUNsYXNzKCkud2liYmxlKCknIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwcihtLlNvbWVDbGFzcygpLndpYmJsZSgpKSkNCg0KDQoNCiAgICBkZWYgdGVzdF9tb2NrX2NhbGxzX3dpdGhfcGF0Y2goc2VsZik6DQogICAgICAgIGZvciBhcmcgaW4gKCdzcGVjJywgJ2F1dG9zcGVjJywgJ3NwZWNfc2V0Jyk6DQogICAgICAgICAgICBwID0gcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgKip7YXJnOiBUcnVlfSkNCiAgICAgICAgICAgIG0gPSBwLnN0YXJ0KCkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBtLndpYmJsZSgpDQoNCiAgICAgICAgICAgICAgICBrYWxscyA9IFtjYWxsLndpYmJsZSgpXQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobS5tb2NrX2NhbGxzLCBrYWxscykNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0ubWV0aG9kX2NhbGxzLCBrYWxscykNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0ud2liYmxlLm1vY2tfY2FsbHMsIFtjYWxsKCldKQ0KDQogICAgICAgICAgICAgICAgcmVzdWx0ID0gbSgpDQogICAgICAgICAgICAgICAga2FsbHMuYXBwZW5kKGNhbGwoKSkNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0ubW9ja19jYWxscywga2FsbHMpDQoNCiAgICAgICAgICAgICAgICByZXN1bHQud2liYmxlKCkNCiAgICAgICAgICAgICAgICBrYWxscy5hcHBlbmQoY2FsbCgpLndpYmJsZSgpKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobS5tb2NrX2NhbGxzLCBrYWxscykNCg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0Lm1vY2tfY2FsbHMsIFtjYWxsLndpYmJsZSgpXSkNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC53aWJibGUubW9ja19jYWxscywgW2NhbGwoKV0pDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQubWV0aG9kX2NhbGxzLCBbY2FsbC53aWJibGUoKV0pDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHAuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2ltcG9ydHNfbGF6aWx5KHNlbGYpOg0KICAgICAgICBzeXMubW9kdWxlcy5wb3AoJ3NxdWl6eicsIE5vbmUpDQoNCiAgICAgICAgcDEgPSBwYXRjaCgnc3F1aXp6LnNxdW96eicpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEltcG9ydEVycm9yLCBwMS5zdGFydCkNCg0KICAgICAgICBzcXVpenogPSBNb2NrKCkNCiAgICAgICAgc3F1aXp6LnNxdW96eiA9IDYNCiAgICAgICAgc3lzLm1vZHVsZXNbJ3NxdWl6eiddID0gc3F1aXp6DQogICAgICAgIHAxID0gcGF0Y2goJ3NxdWl6ei5zcXVvenonKQ0KICAgICAgICBzcXVpenouc3F1b3p6ID0gMw0KICAgICAgICBwMS5zdGFydCgpDQogICAgICAgIHAxLnN0b3AoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNxdWl6ei5zcXVvenosIDMpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3Byb3BvZ3JhdGVzX2V4Y19vbl9leGl0KHNlbGYpOg0KICAgICAgICBjbGFzcyBob2xkZXI6DQogICAgICAgICAgICBleGNfaW5mbyA9IE5vbmUsIE5vbmUsIE5vbmUNCg0KICAgICAgICBjbGFzcyBjdXN0b21fcGF0Y2goX3BhdGNoKToNCiAgICAgICAgICAgIGRlZiBfX2V4aXRfXyhzZWxmLCBldHlwZT1Ob25lLCB2YWw9Tm9uZSwgdGI9Tm9uZSk6DQogICAgICAgICAgICAgICAgX3BhdGNoLl9fZXhpdF9fKHNlbGYsIGV0eXBlLCB2YWwsIHRiKQ0KICAgICAgICAgICAgICAgIGhvbGRlci5leGNfaW5mbyA9IGV0eXBlLCB2YWwsIHRiDQogICAgICAgICAgICBzdG9wID0gX19leGl0X18NCg0KICAgICAgICBkZWYgd2l0aF9jdXN0b21fcGF0Y2godGFyZ2V0KToNCiAgICAgICAgICAgIGdldHRlciwgYXR0cmlidXRlID0gX2dldF90YXJnZXQodGFyZ2V0KQ0KICAgICAgICAgICAgcmV0dXJuIGN1c3RvbV9wYXRjaCgNCiAgICAgICAgICAgICAgICBnZXR0ZXIsIGF0dHJpYnV0ZSwgREVGQVVMVCwgTm9uZSwgRmFsc2UsIE5vbmUsDQogICAgICAgICAgICAgICAgTm9uZSwgTm9uZSwge30NCiAgICAgICAgICAgICkNCg0KICAgICAgICBAd2l0aF9jdXN0b21fcGF0Y2goJ3NxdWl6ei5zcXVvenonKQ0KICAgICAgICBkZWYgdGVzdChtb2NrKToNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcg0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFJ1bnRpbWVFcnJvciwgdGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhob2xkZXIuZXhjX2luZm9bMF0sIFJ1bnRpbWVFcnJvcikNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdE5vbmUoaG9sZGVyLmV4Y19pbmZvWzFdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdleGNlcHRpb24gdmFsdWUgbm90IHByb3BnYXRlZCcpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb3ROb25lKGhvbGRlci5leGNfaW5mb1syXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXhjZXB0aW9uIHRyYWNlYmFjayBub3QgcHJvcGdhdGVkJykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2FuZF9zcGVjcyhzZWxmKToNCiAgICAgICAgZm9yIGt3YXJnIGluICgnc3BlYycsICdzcGVjX3NldCcsICdhdXRvc3BlYycpOg0KICAgICAgICAgICAgcCA9IHBhdGNoKCclcy5kb2Vzbm90ZXhpc3QnICUgX19uYW1lX18sIGNyZWF0ZT1UcnVlLA0KICAgICAgICAgICAgICAgICAgICAgICoqe2t3YXJnOiBUcnVlfSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgcC5zdGFydCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKE5hbWVFcnJvciwgbGFtYmRhOiBkb2Vzbm90ZXhpc3QpDQoNCiAgICAgICAgICAgICMgY2hlY2sgdGhhdCBzcGVjIHdpdGggY3JlYXRlIGlzIGlubm9jdW91cyBpZiB0aGUgb3JpZ2luYWwgZXhpc3RzDQogICAgICAgICAgICBwID0gcGF0Y2goTU9ETkFNRSwgY3JlYXRlPVRydWUsICoqe2t3YXJnOiBUcnVlfSkNCiAgICAgICAgICAgIHAuc3RhcnQoKQ0KICAgICAgICAgICAgcC5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfbXVsdGlwbGVfc3BlY3Moc2VsZik6DQogICAgICAgIG9yaWdpbmFsID0gUFRNb2R1bGUNCiAgICAgICAgZm9yIGt3YXJnIGluICgnc3BlYycsICdzcGVjX3NldCcpOg0KICAgICAgICAgICAgcCA9IHBhdGNoKE1PRE5BTUUsIGF1dG9zcGVjPTAsICoqe2t3YXJnOiAwfSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgcC5zdGFydCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoUFRNb2R1bGUsIG9yaWdpbmFsKQ0KDQogICAgICAgIGZvciBrd2FyZyBpbiAoJ3NwZWMnLCAnYXV0b3NwZWMnKToNCiAgICAgICAgICAgIHAgPSBwYXRjaChNT0ROQU1FLCBzcGVjX3NldD0wLCAqKntrd2FyZzogMH0pDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIHAuc3RhcnQpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKFBUTW9kdWxlLCBvcmlnaW5hbCkNCg0KICAgICAgICBmb3Iga3dhcmcgaW4gKCdzcGVjX3NldCcsICdhdXRvc3BlYycpOg0KICAgICAgICAgICAgcCA9IHBhdGNoKE1PRE5BTUUsIHNwZWM9MCwgKip7a3dhcmc6IDB9KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBwLnN0YXJ0KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhQVE1vZHVsZSwgb3JpZ2luYWwpDQoNCg0KICAgIGRlZiB0ZXN0X3NwZWNzX2ZhbHNlX2luc3RlYWRfb2Zfbm9uZShzZWxmKToNCiAgICAgICAgcCA9IHBhdGNoKE1PRE5BTUUsIHNwZWM9RmFsc2UsIHNwZWNfc2V0PUZhbHNlLCBhdXRvc3BlYz1GYWxzZSkNCiAgICAgICAgbW9jayA9IHAuc3RhcnQoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICAjIG5vIHNwZWMgc2hvdWxkIGhhdmUgYmVlbiBzZXQsIHNvIGF0dHJpYnV0ZSBhY2Nlc3Mgc2hvdWxkIG5vdCBmYWlsDQogICAgICAgICAgICBtb2NrLmRvZXNfbm90X2V4aXN0DQogICAgICAgICAgICBtb2NrLmRvZXNfbm90X2V4aXN0ID0gMw0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcC5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfZmFsc2V5X3NwZWMoc2VsZik6DQogICAgICAgIGZvciBrd2FyZyBpbiAoJ3NwZWMnLCAnYXV0b3NwZWMnLCAnc3BlY19zZXQnKToNCiAgICAgICAgICAgIHAgPSBwYXRjaChNT0ROQU1FLCAqKntrd2FyZzogMH0pDQogICAgICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG0sICdkb2Vzbm90ZXhpdCcpDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHAuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X3NwZWNfc2V0X3RydWUoc2VsZik6DQogICAgICAgIGZvciBrd2FyZyBpbiAoJ3NwZWMnLCAnYXV0b3NwZWMnKToNCiAgICAgICAgICAgIHAgPSBwYXRjaChNT0ROQU1FLCBzcGVjX3NldD1UcnVlLCAqKntrd2FyZzogVHJ1ZX0pDQogICAgICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHNldGF0dHIsIG0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RvZXNub3RleGlzdCcsICdzb21ldGhpbmcnKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtLCAnZG9lc25vdGV4aXN0JykNCiAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgcC5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfY2FsbGFibGVfc3BlY19hc19saXN0KHNlbGYpOg0KICAgICAgICBzcGVjID0gKCdfX2NhbGxfXycsKQ0KICAgICAgICBwID0gcGF0Y2goTU9ETkFNRSwgc3BlYz1zcGVjKQ0KICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShjYWxsYWJsZShtKSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHAuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X25vdF9jYWxsYWJsZV9zcGVjX2FzX2xpc3Qoc2VsZik6DQogICAgICAgIHNwZWMgPSAoJ2ZvbycsICdiYXInKQ0KICAgICAgICBwID0gcGF0Y2goTU9ETkFNRSwgc3BlYz1zcGVjKQ0KICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoY2FsbGFibGUobSkpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBwLnN0b3AoKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9zdG9wYWxsKHNlbGYpOg0KICAgICAgICB1bmxpbmsgPSBvcy51bmxpbmsNCiAgICAgICAgY2hkaXIgPSBvcy5jaGRpcg0KICAgICAgICBwYXRoID0gb3MucGF0aA0KICAgICAgICBwYXRjaCgnb3MudW5saW5rJywgc29tZXRoaW5nKS5zdGFydCgpDQogICAgICAgIHBhdGNoKCdvcy5jaGRpcicsIHNvbWV0aGluZ19lbHNlKS5zdGFydCgpDQoNCiAgICAgICAgQHBhdGNoKCdvcy5wYXRoJykNCiAgICAgICAgZGVmIHBhdGNoZWQobW9ja19wYXRoKToNCiAgICAgICAgICAgIHBhdGNoLnN0b3BhbGwoKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhvcy5wYXRoLCBtb2NrX3BhdGgpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKG9zLnVubGluaywgdW5saW5rKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhvcy5jaGRpciwgY2hkaXIpDQoNCiAgICAgICAgcGF0Y2hlZCgpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMob3MucGF0aCwgcGF0aCkNCg0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/unittest/test/testmock/testhelpers.py':'aW1wb3J0IHVuaXR0ZXN0DQoNCmZyb20gdW5pdHRlc3QubW9jayBpbXBvcnQgKA0KICAgIGNhbGwsIF9DYWxsLCBjcmVhdGVfYXV0b3NwZWMsIE1hZ2ljTW9jaywNCiAgICBNb2NrLCBBTlksIF9DYWxsTGlzdCwgcGF0Y2gsIFByb3BlcnR5TW9jaw0KKQ0KDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQ0KDQpjbGFzcyBTb21lQ2xhc3Mob2JqZWN0KToNCiAgICBkZWYgb25lKHNlbGYsIGEsIGIpOg0KICAgICAgICBwYXNzDQogICAgZGVmIHR3byhzZWxmKToNCiAgICAgICAgcGFzcw0KICAgIGRlZiB0aHJlZShzZWxmLCBhPU5vbmUpOg0KICAgICAgICBwYXNzDQoNCg0KDQpjbGFzcyBBbnlUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiB0ZXN0X2FueShzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChBTlksIG9iamVjdCgpKQ0KDQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jayhBTlkpDQogICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF93aXRoKEFOWSkNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2soZm9vPUFOWSkNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX3dpdGgoZm9vPUFOWSkNCg0KICAgIGRlZiB0ZXN0X3JlcHIoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihBTlkpLCAnPEFOWT4nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihBTlkpLCAnPEFOWT4nKQ0KDQoNCiAgICBkZWYgdGVzdF9hbnlfYW5kX2RhdGV0aW1lKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2soZGF0ZXRpbWUubm93KCksIGZvbz1kYXRldGltZS5ub3coKSkNCg0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aChBTlksIGZvbz1BTlkpDQoNCg0KICAgIGRlZiB0ZXN0X2FueV9tb2NrX2NhbGxzX2NvbXBhcmlzb25fb3JkZXIoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgZCA9IGRhdGV0aW1lLm5vdygpDQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6DQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgICAgICAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KDQogICAgICAgIGZvciBkIGluIGRhdGV0aW1lLm5vdygpLCBGb28oKToNCiAgICAgICAgICAgIG1vY2sucmVzZXRfbW9jaygpDQoNCiAgICAgICAgICAgIG1vY2soZCwgZm9vPWQsIGJhcj1kKQ0KICAgICAgICAgICAgbW9jay5tZXRob2QoZCwgemluZ2E9ZCwgYWxwaGE9ZCkNCiAgICAgICAgICAgIG1vY2soKS5tZXRob2QoYTE9ZCwgejk5PWQpDQoNCiAgICAgICAgICAgIGV4cGVjdGVkID0gWw0KICAgICAgICAgICAgICAgIGNhbGwoQU5ZLCBmb289QU5ZLCBiYXI9QU5ZKSwNCiAgICAgICAgICAgICAgICBjYWxsLm1ldGhvZChBTlksIHppbmdhPUFOWSwgYWxwaGE9QU5ZKSwNCiAgICAgICAgICAgICAgICBjYWxsKCksIGNhbGwoKS5tZXRob2QoYTE9QU5ZLCB6OTk9QU5ZKQ0KICAgICAgICAgICAgXQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChleHBlY3RlZCwgbW9jay5tb2NrX2NhbGxzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIGV4cGVjdGVkKQ0KDQoNCg0KY2xhc3MgQ2FsbFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgZGVmIHRlc3RfY2FsbF93aXRoX2NhbGwoc2VsZik6DQogICAgICAgIGthbGwgPSBfQ2FsbCgpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoJycsKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKCgpLCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwsIF9DYWxsKCh7fSwpKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoJycsICgpKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKCcnLCB7fSkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwsIF9DYWxsKCgnJywgKCksIHt9KSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKCdmb28nLCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwsIF9DYWxsKCgnYmFyJywgKCkpKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoJ2JheicsIHt9KSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKCdzcGFtJywgKCksIHt9KSkpDQoNCiAgICAgICAga2FsbCA9IF9DYWxsKCgoMSwgMiwgMyksKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoKDEsIDIsIDMpLCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwsIF9DYWxsKCgnJywgKDEsIDIsIDMpKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKCgxLCAyLCAzKSwge30pKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoJycsICgxLCAyLCAzKSwge30pKSkNCg0KICAgICAgICBrYWxsID0gX0NhbGwoKCgxLCAyLCA0KSwpKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKGthbGwsIF9DYWxsKCgnJywgKDEsIDIsIDMpKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoa2FsbCwgX0NhbGwoKCcnLCAoMSwgMiwgMyksIHt9KSkpDQoNCiAgICAgICAga2FsbCA9IF9DYWxsKCgnZm9vJywgKDEsIDIsIDQpLCkpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoa2FsbCwgX0NhbGwoKCcnLCAoMSwgMiwgNCkpKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChrYWxsLCBfQ2FsbCgoJycsICgxLCAyLCA0KSwge30pKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChrYWxsLCBfQ2FsbCgoJ2JhcicsICgxLCAyLCA0KSkpKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKGthbGwsIF9DYWxsKCgnYmFyJywgKDEsIDIsIDQpLCB7fSkpKQ0KDQogICAgICAgIGthbGwgPSBfQ2FsbCgoeydhJzogM30sKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoJycsICgpLCB7J2EnOiAzfSkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwsIF9DYWxsKCgnJywgeydhJzogM30pKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoKCksIHsnYSc6IDN9KSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKHsnYSc6IDN9LCkpKQ0KDQoNCiAgICBkZWYgdGVzdF9lbXB0eV9fQ2FsbChzZWxmKToNCiAgICAgICAgYXJncyA9IF9DYWxsKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgoKSwpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgKCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywoKSwge30pKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywge30pKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICh7fSwpKQ0KDQoNCiAgICBkZWYgdGVzdF9uYW1lZF9lbXB0eV9jYWxsKHNlbGYpOg0KICAgICAgICBhcmdzID0gX0NhbGwoKCdmb28nLCAoKSwge30pKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCAoKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCgpLCB7fSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCB7fSkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoKCksKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoe30sKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoJ2JhcicsKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoJ2JhcicsICgpKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoJ2JhcicsIHt9KSkNCg0KDQogICAgZGVmIHRlc3RfY2FsbF93aXRoX2FyZ3Moc2VsZik6DQogICAgICAgIGFyZ3MgPSBfQ2FsbCgoKDEsIDIsIDMpLCB7fSkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzLCAoKDEsIDIsIDMpLCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCAoMSwgMiwgMykpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgKDEsIDIsIDMpLCB7fSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCgxLCAyLCAzKSwge30pKQ0KDQoNCiAgICBkZWYgdGVzdF9uYW1lZF9jYWxsX3dpdGhfYXJncyhzZWxmKToNCiAgICAgICAgYXJncyA9IF9DYWxsKCgnZm9vJywgKDEsIDIsIDMpLCB7fSkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzLCAoJ2ZvbycsICgxLCAyLCAzKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCAoMSwgMiwgMyksIHt9KSkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKGFyZ3MsICgoMSwgMiwgMyksKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoKDEsIDIsIDMpLCB7fSkpDQoNCg0KICAgIGRlZiB0ZXN0X2NhbGxfd2l0aF9rd2FyZ3Moc2VsZik6DQogICAgICAgIGFyZ3MgPSBfQ2FsbCgoKCksIGRpY3QoYT0zLCBiPTQpKSkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsIChkaWN0KGE9MywgYj00KSwpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgZGljdChhPTMsIGI9NCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgKCksIGRpY3QoYT0zLCBiPTQpKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzLCAoKCksIGRpY3QoYT0zLCBiPTQpKSkNCg0KDQogICAgZGVmIHRlc3RfbmFtZWRfY2FsbF93aXRoX2t3YXJncyhzZWxmKToNCiAgICAgICAgYXJncyA9IF9DYWxsKCgnZm9vJywgKCksIGRpY3QoYT0zLCBiPTQpKSkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgZGljdChhPTMsIGI9NCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgKCksIGRpY3QoYT0zLCBiPTQpKSkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKGFyZ3MsIChkaWN0KGE9MywgYj00KSwpKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKGFyZ3MsICgoKSwgZGljdChhPTMsIGI9NCkpKQ0KDQoNCiAgICBkZWYgdGVzdF9jYWxsX3dpdGhfYXJnc19jYWxsX2VtcHR5X25hbWUoc2VsZik6DQogICAgICAgIGFyZ3MgPSBfQ2FsbCgoKDEsIDIsIDMpLCB7fSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgY2FsbCgxLCAyLCAzKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjYWxsKDEsIDIsIDMpLCBhcmdzKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoY2FsbCgxLCAyLCAzKSBpbiBbYXJnc10pDQoNCg0KICAgIGRlZiB0ZXN0X2NhbGxfbmUoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoX0NhbGwoKCgxLCAyLCAzKSwpKSwgY2FsbCgxLCAyKSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShfQ2FsbCgoKDEsIDIsIDMpLCkpICE9IGNhbGwoMSwgMiwgMykpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShfQ2FsbCgoKDEsIDIpLCB7fSkpICE9IGNhbGwoMSwgMiwgMykpDQoNCg0KICAgIGRlZiB0ZXN0X2NhbGxfbm9uX3R1cGxlcyhzZWxmKToNCiAgICAgICAga2FsbCA9IF9DYWxsKCgoMSwgMiwgMyksKSkNCiAgICAgICAgZm9yIHZhbHVlIGluIDEsIE5vbmUsIHNlbGYsIGludDoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoa2FsbCwgdmFsdWUpDQogICAgICAgICAgICBzZWxmLmFzc2VydEZhbHNlKGthbGwgPT0gdmFsdWUpDQoNCg0KICAgIGRlZiB0ZXN0X3JlcHIoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihfQ2FsbCgpKSwgJ2NhbGwoKScpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihfQ2FsbCgoJ2ZvbycsKSkpLCAnY2FsbC5mb28oKScpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXByKF9DYWxsKCgoMSwgMiwgMyksIHsnYSc6ICdiJ30pKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgImNhbGwoMSwgMiwgMywgYT0nYicpIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXByKF9DYWxsKCgnYmFyJywgKDEsIDIsIDMpLCB7J2EnOiAnYid9KSkpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJjYWxsLmJhcigxLCAyLCAzLCBhPSdiJykiKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKSwgJ2NhbGwnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihjYWxsKSwgJ2NhbGwnKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKCkpLCAnY2FsbCgpJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXByKGNhbGwoMSkpLCAnY2FsbCgxKScpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKHp6PSd0aGluZycpKSwgImNhbGwoeno9J3RoaW5nJykiKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKCkuZm9vKSwgJ2NhbGwoKS5mb28nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlcHIoY2FsbCgxKS5mb28uYmFyKGE9MykuYmluZyksDQogICAgICAgICAgICAgICAgICAgICAgICAgJ2NhbGwoKS5mb28uYmFyKCkuYmluZycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICByZXByKGNhbGwoKS5mb28oMSwgMiwgYT0zKSksDQogICAgICAgICAgICAiY2FsbCgpLmZvbygxLCAyLCBhPTMpIg0KICAgICAgICApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKCkoKSksICJjYWxsKCkoKSIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKDEpKDIpKSwgImNhbGwoKSgyKSIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICByZXByKGNhbGwoKSgpLmJhcigpLmJhei5iZWVwKDEpKSwNCiAgICAgICAgICAgICJjYWxsKCkoKS5iYXIoKS5iYXouYmVlcCgxKSINCiAgICAgICAgKQ0KDQoNCiAgICBkZWYgdGVzdF9jYWxsKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGNhbGwoKSwgKCcnLCAoKSwge30pKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGNhbGwoJ2ZvbycsICdiYXInLCBvbmU9MywgdHdvPTQpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICgnJywgKCdmb28nLCAnYmFyJyksIHsnb25lJzogMywgJ3R3byc6IDR9KSkNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2soMSwgMiwgMykNCiAgICAgICAgbW9jayhhPTMsIGI9NikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJnc19saXN0LA0KICAgICAgICAgICAgICAgICAgICAgICAgIFtjYWxsKDEsIDIsIDMpLCBjYWxsKGE9MywgYj02KV0pDQoNCiAgICBkZWYgdGVzdF9hdHRyaWJ1dGVfY2FsbChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjYWxsLmZvbygxKSwgKCdmb28nLCAoMSwpLCB7fSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoY2FsbC5iYXIuYmF6KGZpc2g9J2VnZ3MnKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAoJ2Jhci5iYXonLCAoKSwgeydmaXNoJzogJ2VnZ3MnfSkpDQoNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrLmZvbygxLCAyICwzKQ0KICAgICAgICBtb2NrLmJhci5iYXooYT0zLCBiPTYpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tZXRob2RfY2FsbHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgW2NhbGwuZm9vKDEsIDIsIDMpLCBjYWxsLmJhci5iYXooYT0zLCBiPTYpXSkNCg0KDQogICAgZGVmIHRlc3RfZXh0ZW5kZWRfY2FsbChzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gY2FsbCgxKS5mb28oMikuYmFyKDMsIGE9NCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQsICgnKCkuZm9vKCkuYmFyJywgKDMsKSwgZGljdChhPTQpKSkNCg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCiAgICAgICAgbW9jaygxLCAyLCBhPTMsIGI9NCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJncywgY2FsbCgxLCAyLCBhPTMsIGI9NCkpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwobW9jay5jYWxsX2FyZ3MsIGNhbGwoMSwgMiwgMykpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJnc19saXN0LCBbY2FsbCgxLCAyLCBhPTMsIGI9NCldKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2subW9ja19jYWxscywgW2NhbGwoMSwgMiwgYT0zLCBiPTQpXSkNCg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCiAgICAgICAgbW9jay5mb28oMSkuYmFyKCkoKS5iYXouYmVlcChhPTYpDQoNCiAgICAgICAgbGFzdF9jYWxsID0gY2FsbC5mb28oMSkuYmFyKCkoKS5iYXouYmVlcChhPTYpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzWy0xXSwgbGFzdF9jYWxsKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2subW9ja19jYWxscywgbGFzdF9jYWxsLmNhbGxfbGlzdCgpKQ0KDQoNCiAgICBkZWYgdGVzdF9jYWxsX2xpc3Qoc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBtb2NrKDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoY2FsbCgxKS5jYWxsX2xpc3QoKSwgbW9jay5tb2NrX2NhbGxzKQ0KDQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBtb2NrKDEpLm1ldGhvZCgyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGNhbGwoMSkubWV0aG9kKDIpLmNhbGxfbGlzdCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgIG1vY2subW9ja19jYWxscykNCg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCiAgICAgICAgbW9jaygxKS5tZXRob2QoMikoMykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjYWxsKDEpLm1ldGhvZCgyKSgzKS5jYWxsX2xpc3QoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICBtb2NrLm1vY2tfY2FsbHMpDQoNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgIGludChtb2NrKDEpLm1ldGhvZCgyKSgzKS5mb28uYmFyLmJheig0KSg1KSkNCiAgICAgICAga2FsbCA9IGNhbGwoMSkubWV0aG9kKDIpKDMpLmZvby5iYXIuYmF6KDQpKDUpLl9faW50X18oKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwuY2FsbF9saXN0KCksIG1vY2subW9ja19jYWxscykNCg0KDQogICAgZGVmIHRlc3RfY2FsbF9hbnkoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoY2FsbCwgQU5ZKQ0KDQogICAgICAgIG0gPSBNYWdpY01vY2soKQ0KICAgICAgICBpbnQobSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLm1vY2tfY2FsbHMsIFtBTlldKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFtBTlldLCBtLm1vY2tfY2FsbHMpDQoNCg0KICAgIGRlZiB0ZXN0X3R3b19hcmdzX2NhbGwoc2VsZik6DQogICAgICAgIGFyZ3MgPSBfQ2FsbCgoKDEsIDIpLCB7J2EnOiAzfSksIHR3bz1UcnVlKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihhcmdzKSwgMikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzWzBdLCAoMSwgMikpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJnc1sxXSwgeydhJzogM30pDQoNCiAgICAgICAgb3RoZXJfYXJncyA9IF9DYWxsKCgoMSwgMiksIHsnYSc6IDN9KSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzLCBvdGhlcl9hcmdzKQ0KDQoNCmNsYXNzIFNwZWNTaWduYXR1cmVUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiBfY2hlY2tfc29tZWNsYXNzX21vY2soc2VsZiwgbW9jayk6DQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLCAnZm9vJykNCiAgICAgICAgbW9jay5vbmUoMSwgMikNCiAgICAgICAgbW9jay5vbmUuYXNzZXJ0X2NhbGxlZF93aXRoKDEsIDIpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEFzc2VydGlvbkVycm9yLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBtb2NrLm9uZS5hc3NlcnRfY2FsbGVkX3dpdGgsIDMsIDQpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jay5vbmUsIDEpDQoNCiAgICAgICAgbW9jay50d28oKQ0KICAgICAgICBtb2NrLnR3by5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBc3NlcnRpb25FcnJvciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9jay50d28uYXNzZXJ0X2NhbGxlZF93aXRoLCAzKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2sudHdvLCAxKQ0KDQogICAgICAgIG1vY2sudGhyZWUoKQ0KICAgICAgICBtb2NrLnRocmVlLmFzc2VydF9jYWxsZWRfd2l0aCgpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEFzc2VydGlvbkVycm9yLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBtb2NrLnRocmVlLmFzc2VydF9jYWxsZWRfd2l0aCwgMykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrLnRocmVlLCAzLCAyKQ0KDQogICAgICAgIG1vY2sudGhyZWUoMSkNCiAgICAgICAgbW9jay50aHJlZS5hc3NlcnRfY2FsbGVkX3dpdGgoMSkNCg0KICAgICAgICBtb2NrLnRocmVlKGE9MSkNCiAgICAgICAgbW9jay50aHJlZS5hc3NlcnRfY2FsbGVkX3dpdGgoYT0xKQ0KDQoNCiAgICBkZWYgdGVzdF9iYXNpYyhzZWxmKToNCiAgICAgICAgZm9yIHNwZWMgaW4gKFNvbWVDbGFzcywgU29tZUNsYXNzKCkpOg0KICAgICAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhzcGVjKQ0KICAgICAgICAgICAgc2VsZi5fY2hlY2tfc29tZWNsYXNzX21vY2sobW9jaykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX3JldHVybl92YWx1ZShzZWxmKToNCiAgICAgICAgZGVmIGYoKToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhmLCByZXR1cm5fdmFsdWU9J2ZvbycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jaygpLCAnZm9vJykNCg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKEZvbywgcmV0dXJuX3ZhbHVlPSdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2soKSwgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X2F1dG9zcGVjX3Jlc2V0X21vY2soc2VsZik6DQogICAgICAgIG0gPSBjcmVhdGVfYXV0b3NwZWMoaW50KQ0KICAgICAgICBpbnQobSkNCiAgICAgICAgbS5yZXNldF9tb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLl9faW50X18uY2FsbF9jb3VudCwgMCkNCg0KDQogICAgZGVmIHRlc3RfbW9ja2luZ191bmJvdW5kX21ldGhvZHMoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIGZvbyhzZWxmLCBmb28pOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgcCA9IHBhdGNoLm9iamVjdChGb28sICdmb28nKQ0KICAgICAgICBtb2NrX2ZvbyA9IHAuc3RhcnQoKQ0KICAgICAgICBGb28oKS5mb28oMSkNCg0KICAgICAgICBtb2NrX2Zvby5hc3NlcnRfY2FsbGVkX3dpdGgoMSkNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX3VuYm91bmRfbWV0aG9kcyhzZWxmKToNCiAgICAgICAgIyBzZWUgbW9jayBpc3N1ZSAxMjgNCiAgICAgICAgIyB0aGlzIGlzIGV4cGVjdGVkIHRvIGZhaWwgdW50aWwgdGhlIGlzc3VlIGlzIGZpeGVkDQogICAgICAgIHJldHVybg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIGRlZiBmb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGtsYXNzID0gY3JlYXRlX2F1dG9zcGVjKEZvbykNCiAgICAgICAgaW5zdGFuY2UgPSBrbGFzcygpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW5zdGFuY2UuZm9vLCAxKQ0KDQogICAgICAgICMgTm90ZTogbm8gdHlwZSBjaGVja2luZyBvbiB0aGUgInNlbGYiIHBhcmFtZXRlcg0KICAgICAgICBrbGFzcy5mb28oMSkNCiAgICAgICAga2xhc3MuZm9vLmFzc2VydF9jYWxsZWRfd2l0aCgxKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGtsYXNzLmZvbykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX2tleXdvcmRfYXJndW1lbnRzKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIGEgPSAzDQogICAgICAgIG0gPSBjcmVhdGVfYXV0b3NwZWMoRm9vLCBhPSczJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLmEsICczJykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX2tleXdvcmRfb25seV9hcmd1bWVudHMoc2VsZik6DQogICAgICAgIGRlZiBmb28oYSwgKiwgYj1Ob25lKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtID0gY3JlYXRlX2F1dG9zcGVjKGZvbykNCiAgICAgICAgbSgxKQ0KICAgICAgICBtLmFzc2VydF9jYWxsZWRfd2l0aCgxKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG0sIDEsIDIpDQoNCiAgICAgICAgbSgyLCBiPTMpDQogICAgICAgIG0uYXNzZXJ0X2NhbGxlZF93aXRoKDIsIGI9MykNCg0KDQogICAgZGVmIHRlc3RfZnVuY3Rpb25fYXNfaW5zdGFuY2VfYXR0cmlidXRlKHNlbGYpOg0KICAgICAgICBvYmogPSBTb21lQ2xhc3MoKQ0KICAgICAgICBkZWYgZihhKToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgb2JqLmYgPSBmDQoNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhvYmopDQogICAgICAgIG1vY2suZignYmluZycpDQogICAgICAgIG1vY2suZi5hc3NlcnRfY2FsbGVkX3dpdGgoJ2JpbmcnKQ0KDQoNCiAgICBkZWYgdGVzdF9zcGVjX2FzX2xpc3Qoc2VsZik6DQogICAgICAgICMgYmVjYXVzZSBzcGVjIGFzIGEgbGlzdCBvZiBzdHJpbmdzIGluIHRoZSBtb2NrIGNvbnN0cnVjdG9yIG1lYW5zDQogICAgICAgICMgc29tZXRoaW5nIHZlcnkgZGlmZmVyZW50IHdlIHRyZWF0IGEgbGlzdCBpbnN0YW5jZSBhcyB0aGUgdHlwZS4NCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhbXSkNCiAgICAgICAgbW9jay5hcHBlbmQoJ2ZvbycpDQogICAgICAgIG1vY2suYXBwZW5kLmFzc2VydF9jYWxsZWRfd2l0aCgnZm9vJykNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgbW9jaywgJ2ZvbycpDQoNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBmb28gPSBbXQ0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KICAgICAgICBtb2NrLmZvby5hcHBlbmQoMykNCiAgICAgICAgbW9jay5mb28uYXBwZW5kLmFzc2VydF9jYWxsZWRfd2l0aCgzKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgbW9jay5mb28sICdmb28nKQ0KDQoNCiAgICBkZWYgdGVzdF9hdHRyaWJ1dGVzKHNlbGYpOg0KICAgICAgICBjbGFzcyBTdWIoU29tZUNsYXNzKToNCiAgICAgICAgICAgIGF0dHIgPSBTb21lQ2xhc3MoKQ0KDQogICAgICAgIHN1Yl9tb2NrID0gY3JlYXRlX2F1dG9zcGVjKFN1YikNCg0KICAgICAgICBmb3IgbW9jayBpbiAoc3ViX21vY2ssIHN1Yl9tb2NrLmF0dHIpOg0KICAgICAgICAgICAgc2VsZi5fY2hlY2tfc29tZWNsYXNzX21vY2sobW9jaykNCg0KDQogICAgZGVmIHRlc3RfYnVpbHRpbl9mdW5jdGlvbnNfdHlwZXMoc2VsZik6DQogICAgICAgICMgd2UgY291bGQgcmVwbGFjZSBidWlsdGluIGZ1bmN0aW9ucyAvIG1ldGhvZHMgd2l0aCBhIGZ1bmN0aW9uDQogICAgICAgICMgd2l0aCAqYXJncyAvICoqa3dhcmdzIHNpZ25hdHVyZS4gVXNpbmcgdGhlIGJ1aWx0aW4gbWV0aG9kIHR5cGUNCiAgICAgICAgIyBhcyBhIHNwZWMgc2VlbXMgdG8gd29yayBmYWlybHkgd2VsbCB0aG91Z2guDQogICAgICAgIGNsYXNzIEJ1aWx0aW5TdWJjbGFzcyhsaXN0KToNCiAgICAgICAgICAgIGRlZiBiYXIoc2VsZiwgYXJnKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBzb3J0ZWQgPSBzb3J0ZWQNCiAgICAgICAgICAgIGF0dHIgPSB7fQ0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoQnVpbHRpblN1YmNsYXNzKQ0KICAgICAgICBtb2NrLmFwcGVuZCgzKQ0KICAgICAgICBtb2NrLmFwcGVuZC5hc3NlcnRfY2FsbGVkX3dpdGgoMykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2suYXBwZW5kLCAnZm9vJykNCg0KICAgICAgICBtb2NrLmJhcignZm9vJykNCiAgICAgICAgbW9jay5iYXIuYXNzZXJ0X2NhbGxlZF93aXRoKCdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2suYmFyLCAnZm9vJywgJ2JhcicpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLmJhciwgJ2ZvbycpDQoNCiAgICAgICAgbW9jay5zb3J0ZWQoWzEsIDJdKQ0KICAgICAgICBtb2NrLnNvcnRlZC5hc3NlcnRfY2FsbGVkX3dpdGgoWzEsIDJdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgbW9jay5zb3J0ZWQsICdmb28nKQ0KDQogICAgICAgIG1vY2suYXR0ci5wb3AoMykNCiAgICAgICAgbW9jay5hdHRyLnBvcC5hc3NlcnRfY2FsbGVkX3dpdGgoMykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2suYXR0ciwgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X21ldGhvZF9jYWxscyhzZWxmKToNCiAgICAgICAgY2xhc3MgU3ViKFNvbWVDbGFzcyk6DQogICAgICAgICAgICBhdHRyID0gU29tZUNsYXNzKCkNCg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKFN1YikNCiAgICAgICAgbW9jay5vbmUoMSwgMikNCiAgICAgICAgbW9jay50d28oKQ0KICAgICAgICBtb2NrLnRocmVlKDMpDQoNCiAgICAgICAgZXhwZWN0ZWQgPSBbY2FsbC5vbmUoMSwgMiksIGNhbGwudHdvKCksIGNhbGwudGhyZWUoMyldDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tZXRob2RfY2FsbHMsIGV4cGVjdGVkKQ0KDQogICAgICAgIG1vY2suYXR0ci5vbmUoMSwgMikNCiAgICAgICAgbW9jay5hdHRyLnR3bygpDQogICAgICAgIG1vY2suYXR0ci50aHJlZSgzKQ0KDQogICAgICAgIGV4cGVjdGVkLmV4dGVuZCgNCiAgICAgICAgICAgIFtjYWxsLmF0dHIub25lKDEsIDIpLCBjYWxsLmF0dHIudHdvKCksIGNhbGwuYXR0ci50aHJlZSgzKV0NCiAgICAgICAgKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2subWV0aG9kX2NhbGxzLCBleHBlY3RlZCkNCg0KDQogICAgZGVmIHRlc3RfbWFnaWNfbWV0aG9kcyhzZWxmKToNCiAgICAgICAgY2xhc3MgQnVpbHRpblN1YmNsYXNzKGxpc3QpOg0KICAgICAgICAgICAgYXR0ciA9IHt9DQoNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhCdWlsdGluU3ViY2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtb2NrKSwgW10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW50LCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGludCwgbW9jay5hdHRyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3QobW9jayksIFtdKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrWydmb28nXSwgTWFnaWNNb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jay5hdHRyWydmb28nXSwgTWFnaWNNb2NrKQ0KDQoNCiAgICBkZWYgdGVzdF9zcGVjX3NldChzZWxmKToNCiAgICAgICAgY2xhc3MgU3ViKFNvbWVDbGFzcyk6DQogICAgICAgICAgICBhdHRyID0gU29tZUNsYXNzKCkNCg0KICAgICAgICBmb3Igc3BlYyBpbiAoU3ViLCBTdWIoKSk6DQogICAgICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKHNwZWMsIHNwZWNfc2V0PVRydWUpDQogICAgICAgICAgICBzZWxmLl9jaGVja19zb21lY2xhc3NfbW9jayhtb2NrKQ0KDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgc2V0YXR0ciwgbW9jaywgJ2ZvbycsICdiYXInKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHNldGF0dHIsIG1vY2suYXR0ciwgJ2ZvbycsICdiYXInKQ0KDQoNCiAgICBkZWYgdGVzdF9kZXNjcmlwdG9ycyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBmKGNscywgYSwgYik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIGcoYSwgYik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIEJhcihGb28pOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIEJheihTb21lQ2xhc3MsIEJhcik6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgZm9yIHNwZWMgaW4gKEZvbywgRm9vKCksIEJhciwgQmFyKCksIEJheiwgQmF6KCkpOg0KICAgICAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhzcGVjKQ0KICAgICAgICAgICAgbW9jay5mKDEsIDIpDQogICAgICAgICAgICBtb2NrLmYuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoMSwgMikNCg0KICAgICAgICAgICAgbW9jay5nKDMsIDQpDQogICAgICAgICAgICBtb2NrLmcuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoMywgNCkNCg0KDQogICAgZGVmIHRlc3RfcmVjdXJzaXZlKHNlbGYpOg0KICAgICAgICBjbGFzcyBBKG9iamVjdCk6DQogICAgICAgICAgICBkZWYgYShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBmb28gPSAnZm9vIGJhciBiYXonDQogICAgICAgICAgICBiYXIgPSBmb28NCg0KICAgICAgICBBLkIgPSBBDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoQSkNCg0KICAgICAgICBtb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShtb2NrLkIuY2FsbGVkKQ0KDQogICAgICAgIG1vY2suYSgpDQogICAgICAgIG1vY2suQi5hKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgW2NhbGwuYSgpLCBjYWxsLkIuYSgpXSkNCg0KICAgICAgICBzZWxmLmFzc2VydElzKEEuZm9vLCBBLmJhcikNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdChtb2NrLmZvbywgbW9jay5iYXIpDQogICAgICAgIG1vY2suZm9vLmxvd2VyKCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXNzZXJ0aW9uRXJyb3IsIG1vY2suYmFyLmxvd2VyLmFzc2VydF9jYWxsZWRfd2l0aCkNCg0KDQogICAgZGVmIHRlc3Rfc3BlY19pbmhlcml0YW5jZV9mb3JfY2xhc3NlcyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBkZWYgYShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBjbGFzcyBCYXIob2JqZWN0KToNCiAgICAgICAgICAgICAgICBkZWYgZihzZWxmKToNCiAgICAgICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzX21vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb3QoY2xhc3NfbW9jaywgY2xhc3NfbW9jaygpKQ0KDQogICAgICAgIGZvciB0aGlzX21vY2sgaW4gY2xhc3NfbW9jaywgY2xhc3NfbW9jaygpOg0KICAgICAgICAgICAgdGhpc19tb2NrLmEoKQ0KICAgICAgICAgICAgdGhpc19tb2NrLmEuYXNzZXJ0X2NhbGxlZF93aXRoKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgdGhpc19tb2NrLmEsICdmb28nKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIHRoaXNfbW9jaywgJ2InKQ0KDQogICAgICAgIGluc3RhbmNlX21vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKCkpDQogICAgICAgIGluc3RhbmNlX21vY2suYSgpDQogICAgICAgIGluc3RhbmNlX21vY2suYS5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGluc3RhbmNlX21vY2suYSwgJ2ZvbycpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBpbnN0YW5jZV9tb2NrLCAnYicpDQoNCiAgICAgICAgIyBUaGUgcmV0dXJuIHZhbHVlIGlzbid0IGlzbid0IGNhbGxhYmxlDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW5zdGFuY2VfbW9jaykNCg0KICAgICAgICBpbnN0YW5jZV9tb2NrLkJhci5mKCkNCiAgICAgICAgaW5zdGFuY2VfbW9jay5CYXIuZi5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgaW5zdGFuY2VfbW9jay5CYXIsICdnJykNCg0KICAgICAgICBpbnN0YW5jZV9tb2NrLkJhcigpLmYoKQ0KICAgICAgICBpbnN0YW5jZV9tb2NrLkJhcigpLmYuYXNzZXJ0X2NhbGxlZF93aXRoKCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIGluc3RhbmNlX21vY2suQmFyKCksICdnJykNCg0KDQogICAgZGVmIHRlc3RfaW5oZXJpdChzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBhID0gMw0KDQogICAgICAgIEZvby5Gb28gPSBGb28NCg0KICAgICAgICAjIGNsYXNzDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KICAgICAgICBpbnN0YW5jZSA9IG1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgaW5zdGFuY2UsICdiJykNCg0KICAgICAgICBhdHRyX2luc3RhbmNlID0gbW9jay5Gb28oKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgYXR0cl9pbnN0YW5jZSwgJ2InKQ0KDQogICAgICAgICMgaW5zdGFuY2UNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhGb28oKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2ssICdiJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrKQ0KDQogICAgICAgICMgYXR0cmlidXRlIGluc3RhbmNlDQogICAgICAgIGNhbGxfcmVzdWx0ID0gbW9jay5Gb28oKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgY2FsbF9yZXN1bHQsICdiJykNCg0KDQogICAgZGVmIHRlc3RfYnVpbHRpbnMoc2VsZik6DQogICAgICAgICMgdXNlZCB0byBmYWlsIHdpdGggaW5maW5pdGUgcmVjdXJzaW9uDQogICAgICAgIGNyZWF0ZV9hdXRvc3BlYygxKQ0KDQogICAgICAgIGNyZWF0ZV9hdXRvc3BlYyhpbnQpDQogICAgICAgIGNyZWF0ZV9hdXRvc3BlYygnZm9vJykNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKHN0cikNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKHt9KQ0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMoZGljdCkNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKFtdKQ0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMobGlzdCkNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKHNldCgpKQ0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMoc2V0KQ0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMoMS4wKQ0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMoZmxvYXQpDQogICAgICAgIGNyZWF0ZV9hdXRvc3BlYygxaikNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKGNvbXBsZXgpDQogICAgICAgIGNyZWF0ZV9hdXRvc3BlYyhGYWxzZSkNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKFRydWUpDQoNCg0KICAgIGRlZiB0ZXN0X2Z1bmN0aW9uKHNlbGYpOg0KICAgICAgICBkZWYgZihhLCBiKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKGYpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCiAgICAgICAgbW9jaygxLCAyKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCgxLCAyKQ0KDQogICAgICAgIGYuZiA9IGYNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhmKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2suZikNCiAgICAgICAgbW9jay5mKDMsIDQpDQogICAgICAgIG1vY2suZi5hc3NlcnRfY2FsbGVkX3dpdGgoMywgNCkNCg0KDQogICAgZGVmIHRlc3Rfc2tpcF9hdHRyaWJ1dGVlcnJvcnMoc2VsZik6DQogICAgICAgIGNsYXNzIFJhaXNlcihvYmplY3QpOg0KICAgICAgICAgICAgZGVmIF9fZ2V0X18oc2VsZiwgb2JqLCB0eXBlPU5vbmUpOg0KICAgICAgICAgICAgICAgIGlmIG9iaiBpcyBOb25lOg0KICAgICAgICAgICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcignQ2FuIG9ubHkgYmUgYWNjZXNzZWQgdmlhIGFuIGluc3RhbmNlJykNCg0KICAgICAgICBjbGFzcyBSYWlzZXJDbGFzcyhvYmplY3QpOg0KICAgICAgICAgICAgcmFpc2VyID0gUmFpc2VyKCkNCg0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIGV4aXN0aW5nKGEsIGIpOg0KICAgICAgICAgICAgICAgIHJldHVybiBhICsgYg0KDQogICAgICAgIHMgPSBjcmVhdGVfYXV0b3NwZWMoUmFpc2VyQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhIHg6IHMuZXhpc3RpbmcoMSwgMiwgMykpDQogICAgICAgIHMuZXhpc3RpbmcoMSwgMikNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGxhbWJkYTogcy5ub25leGlzdGluZykNCg0KICAgICAgICAjIGNoZWNrIHdlIGNhbiBmZXRjaCB0aGUgcmFpc2VyIGF0dHJpYnV0ZSBhbmQgaXQgaGFzIG5vIHNwZWMNCiAgICAgICAgb2JqID0gcy5yYWlzZXINCiAgICAgICAgb2JqLmZvbywgb2JqLmJhcg0KDQoNCiAgICBkZWYgdGVzdF9zaWduYXR1cmVfY2xhc3Moc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIGEsIGI9Myk6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCiAgICAgICAgbW9jaygxKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKDEpDQoNCiAgICAgICAgbW9jayg0LCA1KQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCg0LCA1KQ0KDQoNCiAgICBkZWYgdGVzdF9jbGFzc193aXRoX25vX2luaXQoc2VsZik6DQogICAgICAgICMgdGhpcyB1c2VkIHRvIHJhaXNlIGFuIGV4Y2VwdGlvbg0KICAgICAgICAjIGR1ZSB0byB0cnlpbmcgdG8gZ2V0IGEgc2lnbmF0dXJlIGZyb20gb2JqZWN0Ll9faW5pdF9fDQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KDQoNCiAgICBkZWYgdGVzdF9zaWduYXR1cmVfY2FsbGFibGUoc2VsZik6DQogICAgICAgIGNsYXNzIENhbGxhYmxlKG9iamVjdCk6DQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZGVmIF9fY2FsbF9fKHNlbGYsIGEpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKENhbGxhYmxlKQ0KICAgICAgICBtb2NrKCkNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaywgJ2EnKQ0KDQogICAgICAgIGluc3RhbmNlID0gbW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW5zdGFuY2UpDQogICAgICAgIGluc3RhbmNlKGE9J2EnKQ0KICAgICAgICBpbnN0YW5jZS5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aChhPSdhJykNCiAgICAgICAgaW5zdGFuY2UoJ2EnKQ0KICAgICAgICBpbnN0YW5jZS5hc3NlcnRfY2FsbGVkX3dpdGgoJ2EnKQ0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoQ2FsbGFibGUoKSkNCiAgICAgICAgbW9jayhhPSdhJykNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aChhPSdhJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrKQ0KICAgICAgICBtb2NrKCdhJykNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX3dpdGgoJ2EnKQ0KDQoNCiAgICBkZWYgdGVzdF9zaWduYXR1cmVfbm9uY2FsbGFibGUoc2VsZik6DQogICAgICAgIGNsYXNzIE5vbkNhbGxhYmxlKG9iamVjdCk6DQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoTm9uQ2FsbGFibGUpDQogICAgICAgIGluc3RhbmNlID0gbW9jaygpDQogICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2ssICdhJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpbnN0YW5jZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpbnN0YW5jZSwgJ2EnKQ0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoTm9uQ2FsbGFibGUoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2ssICdhJykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX25vbmUoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgYmFyID0gTm9uZQ0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KICAgICAgICBub25lID0gbW9jay5iYXINCiAgICAgICAgc2VsZi5hc3NlcnROb3RJc0luc3RhbmNlKG5vbmUsIHR5cGUoTm9uZSkpDQoNCiAgICAgICAgbm9uZS5mb28oKQ0KICAgICAgICBub25lLmZvby5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQoNCg0KICAgIGRlZiB0ZXN0X2F1dG9zcGVjX2Z1bmN0aW9uc193aXRoX3NlbGZfaW5fb2RkX3BsYWNlKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIGRlZiBmKGEsIHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBhID0gY3JlYXRlX2F1dG9zcGVjKEZvbykNCiAgICAgICAgYS5mKHNlbGY9MTApDQogICAgICAgIGEuZi5hc3NlcnRfY2FsbGVkX3dpdGgoc2VsZj0xMCkNCg0KDQogICAgZGVmIHRlc3RfYXV0b3NwZWNfcHJvcGVydHkoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgQHByb3BlcnR5DQogICAgICAgICAgICBkZWYgZm9vKHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiAzDQoNCiAgICAgICAgZm9vID0gY3JlYXRlX2F1dG9zcGVjKEZvbykNCiAgICAgICAgbW9ja19wcm9wZXJ0eSA9IGZvby5mb28NCg0KICAgICAgICAjIG5vIHNwZWMgb24gcHJvcGVydGllcw0KICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNpbnN0YW5jZShtb2NrX3Byb3BlcnR5LCBNYWdpY01vY2spKQ0KICAgICAgICBtb2NrX3Byb3BlcnR5KDEsIDIsIDMpDQogICAgICAgIG1vY2tfcHJvcGVydHkuYWJjKDQsIDUsIDYpDQogICAgICAgIG1vY2tfcHJvcGVydHkuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoMSwgMiwgMykNCiAgICAgICAgbW9ja19wcm9wZXJ0eS5hYmMuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoNCwgNSwgNikNCg0KDQogICAgZGVmIHRlc3RfYXV0b3NwZWNfc2xvdHMoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgX19zbG90c19fID0gWydhJ10NCg0KICAgICAgICBmb28gPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KICAgICAgICBtb2NrX3Nsb3QgPSBmb28uYQ0KDQogICAgICAgICMgbm8gc3BlYyBvbiBzbG90cw0KICAgICAgICBtb2NrX3Nsb3QoMSwgMiwgMykNCiAgICAgICAgbW9ja19zbG90LmFiYyg0LCA1LCA2KQ0KICAgICAgICBtb2NrX3Nsb3QuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoMSwgMiwgMykNCiAgICAgICAgbW9ja19zbG90LmFiYy5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCg0LCA1LCA2KQ0KDQoNCmNsYXNzIFRlc3RDYWxsTGlzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQoNCiAgICBkZWYgdGVzdF9hcmdzX2xpc3RfY29udGFpbnNfY2FsbF9saXN0KHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrLmNhbGxfYXJnc19saXN0LCBfQ2FsbExpc3QpDQoNCiAgICAgICAgbW9jaygxLCAyKQ0KICAgICAgICBtb2NrKGE9MykNCiAgICAgICAgbW9jaygzLCA0KQ0KICAgICAgICBtb2NrKGI9NikNCg0KICAgICAgICBmb3Iga2FsbCBpbiBjYWxsKDEsIDIpLCBjYWxsKGE9MyksIGNhbGwoMywgNCksIGNhbGwoYj02KToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShrYWxsIGluIG1vY2suY2FsbF9hcmdzX2xpc3QpDQoNCiAgICAgICAgY2FsbHMgPSBbY2FsbChhPTMpLCBjYWxsKDMsIDQpXQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoY2FsbHMgaW4gbW9jay5jYWxsX2FyZ3NfbGlzdCkNCiAgICAgICAgY2FsbHMgPSBbY2FsbCgxLCAyKSwgY2FsbChhPTMpXQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoY2FsbHMgaW4gbW9jay5jYWxsX2FyZ3NfbGlzdCkNCiAgICAgICAgY2FsbHMgPSBbY2FsbCgzLCA0KSwgY2FsbChiPTYpXQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoY2FsbHMgaW4gbW9jay5jYWxsX2FyZ3NfbGlzdCkNCiAgICAgICAgY2FsbHMgPSBbY2FsbCgzLCA0KV0NCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGNhbGxzIGluIG1vY2suY2FsbF9hcmdzX2xpc3QpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShjYWxsKCdmaXNoJykgaW4gbW9jay5jYWxsX2FyZ3NfbGlzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShbY2FsbCgnZmlzaCcpXSBpbiBtb2NrLmNhbGxfYXJnc19saXN0KQ0KDQoNCiAgICBkZWYgdGVzdF9jYWxsX2xpc3Rfc3RyKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2soMSwgMikNCiAgICAgICAgbW9jay5mb28oYT0zKQ0KICAgICAgICBtb2NrLmZvby5iYXIoKS5iYXooJ2Zpc2gnLCBjYXQ9J2RvZycpDQoNCiAgICAgICAgZXhwZWN0ZWQgPSAoDQogICAgICAgICAgICAiW2NhbGwoMSwgMiksXG4iDQogICAgICAgICAgICAiIGNhbGwuZm9vKGE9MyksXG4iDQogICAgICAgICAgICAiIGNhbGwuZm9vLmJhcigpLFxuIg0KICAgICAgICAgICAgIiBjYWxsLmZvby5iYXIoKS5iYXooJ2Zpc2gnLCBjYXQ9J2RvZycpXSINCiAgICAgICAgKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihtb2NrLm1vY2tfY2FsbHMpLCBleHBlY3RlZCkNCg0KDQogICAgZGVmIHRlc3RfcHJvcGVydHltb2NrKHNlbGYpOg0KICAgICAgICBwID0gcGF0Y2goJyVzLlNvbWVDbGFzcy5vbmUnICUgX19uYW1lX18sIG5ld19jYWxsYWJsZT1Qcm9wZXJ0eU1vY2spDQogICAgICAgIG1vY2sgPSBwLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgU29tZUNsYXNzLm9uZQ0KICAgICAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQoNCiAgICAgICAgICAgIHMgPSBTb21lQ2xhc3MoKQ0KICAgICAgICAgICAgcy5vbmUNCiAgICAgICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF93aXRoKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBbY2FsbCgpLCBjYWxsKCldKQ0KDQogICAgICAgICAgICBzLm9uZSA9IDMNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBbY2FsbCgpLCBjYWxsKCksIGNhbGwoMyldKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcC5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfcHJvcGVydHltb2NrX3JldHVybnZhbHVlKHNlbGYpOg0KICAgICAgICBtID0gTWFnaWNNb2NrKCkNCiAgICAgICAgcCA9IFByb3BlcnR5TW9jaygpDQogICAgICAgIHR5cGUobSkuZm9vID0gcA0KDQogICAgICAgIHJldHVybmVkID0gbS5mb28NCiAgICAgICAgcC5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShyZXR1cm5lZCwgTWFnaWNNb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdElzSW5zdGFuY2UocmV0dXJuZWQsIFByb3BlcnR5TW9jaykNCg0KDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgIHVuaXR0ZXN0Lm1haW4oKQ0K',
'/Lib/unittest/test/testmock/testmock.py':'aW1wb3J0IGNvcHkNCmltcG9ydCBzeXMNCg0KaW1wb3J0IHVuaXR0ZXN0DQpmcm9tIHVuaXR0ZXN0LnRlc3QudGVzdG1vY2suc3VwcG9ydCBpbXBvcnQgaXNfaW5zdGFuY2UNCmZyb20gdW5pdHRlc3QgaW1wb3J0IG1vY2sNCmZyb20gdW5pdHRlc3QubW9jayBpbXBvcnQgKA0KICAgIGNhbGwsIERFRkFVTFQsIHBhdGNoLCBzZW50aW5lbCwNCiAgICBNYWdpY01vY2ssIE1vY2ssIE5vbkNhbGxhYmxlTW9jaywNCiAgICBOb25DYWxsYWJsZU1hZ2ljTW9jaywgX0NhbGxMaXN0LA0KICAgIGNyZWF0ZV9hdXRvc3BlYw0KKQ0KDQoNCmNsYXNzIEl0ZXIob2JqZWN0KToNCiAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgIHNlbGYudGhpbmcgPSBpdGVyKFsndGhpcycsICdpcycsICdhbicsICdpdGVyJ10pDQoNCiAgICBkZWYgX19pdGVyX18oc2VsZik6DQogICAgICAgIHJldHVybiBzZWxmDQoNCiAgICBkZWYgbmV4dChzZWxmKToNCiAgICAgICAgcmV0dXJuIG5leHQoc2VsZi50aGluZykNCg0KICAgIF9fbmV4dF9fID0gbmV4dA0KDQoNCg0KY2xhc3MgTW9ja1Rlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgZGVmIHRlc3RfYWxsKHNlbGYpOg0KICAgICAgICAjIGlmIF9fYWxsX18gaXMgYmFkbHkgZGVmaW5lZCB0aGVuIGltcG9ydCAqIHdpbGwgcmFpc2UgYW4gZXJyb3INCiAgICAgICAgIyBXZSBoYXZlIHRvIGV4ZWMgaXQgYmVjYXVzZSB5b3UgY2FuJ3QgaW1wb3J0ICogaW5zaWRlIGEgbWV0aG9kDQogICAgICAgICMgaW4gUHl0aG9uIDMNCiAgICAgICAgZXhlYygiZnJvbSB1bml0dGVzdC5tb2NrIGltcG9ydCAqIikNCg0KDQogICAgZGVmIHRlc3RfY29uc3RydWN0b3Ioc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKG1vY2suY2FsbGVkLCAiY2FsbGVkIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9jb3VudCwgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiY2FsbF9jb3VudCBub3QgaW5pdGlhbGlzZWQgY29ycmVjdGx5IikNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKG1vY2sucmV0dXJuX3ZhbHVlLCBNb2NrKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJyZXR1cm5fdmFsdWUgbm90IGluaXRpYWxpc2VkIGNvcnJlY3RseSIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJncywgTm9uZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiY2FsbF9hcmdzIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9hcmdzX2xpc3QsIFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJjYWxsX2FyZ3NfbGlzdCBub3QgaW5pdGlhbGlzZWQgY29ycmVjdGx5IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgW10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICJtZXRob2RfY2FsbHMgbm90IGluaXRpYWxpc2VkIGNvcnJlY3RseSIpDQoNCiAgICAgICAgIyBDYW4ndCB1c2UgaGFzYXR0ciBmb3IgdGhpcyB0ZXN0IGFzIGl0IGFsd2F5cyByZXR1cm5zIFRydWUgb24gYSBtb2NrDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoJ19pdGVtcycgaW4gbW9jay5fX2RpY3RfXywNCiAgICAgICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCBtb2NrIHNob3VsZCBub3QgaGF2ZSAnX2l0ZW1zJyBhdHRyaWJ1dGUiKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb25lKG1vY2suX21vY2tfcGFyZW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAicGFyZW50IG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkiKQ0KICAgICAgICBzZWxmLmFzc2VydElzTm9uZShtb2NrLl9tb2NrX21ldGhvZHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICJtZXRob2RzIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suX21vY2tfY2hpbGRyZW4sIHt9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICJjaGlsZHJlbiBub3QgaW5pdGlhbGlzZWQgaW5jb3JyZWN0bHkiKQ0KDQoNCiAgICBkZWYgdGVzdF9yZXR1cm5fdmFsdWVfaW5fY29uc3RydWN0b3Ioc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKHJldHVybl92YWx1ZT1Ob25lKQ0KICAgICAgICBzZWxmLmFzc2VydElzTm9uZShtb2NrLnJldHVybl92YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgInJldHVybiB2YWx1ZSBpbiBjb25zdHJ1Y3RvciBub3QgaG9ub3VyZWQiKQ0KDQoNCiAgICBkZWYgdGVzdF9yZXByKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jayhuYW1lPSdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCdmb28nLCByZXByKG1vY2spKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCInJXMnIiAlIGlkKG1vY2spLCByZXByKG1vY2spKQ0KDQogICAgICAgIG1vY2tzID0gWyhNb2NrKCksICdtb2NrJyksIChNb2NrKG5hbWU9J2JhcicpLCAnYmFyJyldDQogICAgICAgIGZvciBtb2NrLCBuYW1lIGluIG1vY2tzOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbignJXMuYmFyJyAlIG5hbWUsIHJlcHIobW9jay5iYXIpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbignJXMuZm9vKCknICUgbmFtZSwgcmVwcihtb2NrLmZvbygpKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oJyVzLmZvbygpLmJpbmcnICUgbmFtZSwgcmVwcihtb2NrLmZvbygpLmJpbmcpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbignJXMoKScgJSBuYW1lLCByZXByKG1vY2soKSkpDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKCclcygpKCknICUgbmFtZSwgcmVwcihtb2NrKCkoKSkpDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKCclcygpKCkuZm9vLmJhci5iYXooKS5iaW5nJyAlIG5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgIHJlcHIobW9jaygpKCkuZm9vLmJhci5iYXooKS5iaW5nKSkNCg0KDQogICAgZGVmIHRlc3RfcmVwcl93aXRoX3NwZWMoc2VsZik6DQogICAgICAgIGNsYXNzIFgob2JqZWN0KToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjPVgpDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oIiBzcGVjPSdYJyAiLCByZXByKG1vY2spKQ0KDQogICAgICAgIG1vY2sgPSBNb2NrKHNwZWM9WCgpKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCIgc3BlYz0nWCcgIiwgcmVwcihtb2NrKSkNCg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjX3NldD1YKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCIgc3BlY19zZXQ9J1gnICIsIHJlcHIobW9jaykpDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlY19zZXQ9WCgpKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCIgc3BlY19zZXQ9J1gnICIsIHJlcHIobW9jaykpDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlYz1YLCBuYW1lPSdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCIgc3BlYz0nWCcgIiwgcmVwcihtb2NrKSkNCiAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J2ZvbycgIiwgcmVwcihtb2NrKSkNCg0KICAgICAgICBtb2NrID0gTW9jayhuYW1lPSdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKCJzcGVjIiwgcmVwcihtb2NrKSkNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90SW4oInNwZWMiLCByZXByKG1vY2spKQ0KDQogICAgICAgIG1vY2sgPSBNb2NrKHNwZWM9Wydmb28nXSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RJbigic3BlYyIsIHJlcHIobW9jaykpDQoNCg0KICAgIGRlZiB0ZXN0X3NpZGVfZWZmZWN0KHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQoNCiAgICAgICAgZGVmIGVmZmVjdCgqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAgICAgcmFpc2UgU3lzdGVtRXJyb3IoJ2thYmxvb2llJykNCg0KICAgICAgICBtb2NrLnNpZGVfZWZmZWN0ID0gZWZmZWN0DQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN5c3RlbUVycm9yLCBtb2NrLCAxLCAyLCBmaXNoPTMpDQogICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF93aXRoKDEsIDIsIGZpc2g9MykNCg0KICAgICAgICByZXN1bHRzID0gWzEsIDIsIDNdDQogICAgICAgIGRlZiBlZmZlY3QoKToNCiAgICAgICAgICAgIHJldHVybiByZXN1bHRzLnBvcCgpDQogICAgICAgIG1vY2suc2lkZV9lZmZlY3QgPSBlZmZlY3QNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFttb2NrKCksIG1vY2soKSwgbW9jaygpXSwgWzMsIDIsIDFdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAic2lkZSBlZmZlY3Qgbm90IHVzZWQgY29ycmVjdGx5IikNCg0KICAgICAgICBtb2NrID0gTW9jayhzaWRlX2VmZmVjdD1zZW50aW5lbC5TaWRlRWZmZWN0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suc2lkZV9lZmZlY3QsIHNlbnRpbmVsLlNpZGVFZmZlY3QsDQogICAgICAgICAgICAgICAgICAgICAgICAgICJzaWRlIGVmZmVjdCBpbiBjb25zdHJ1Y3RvciBub3QgdXNlZCIpDQoNCiAgICAgICAgZGVmIHNpZGVfZWZmZWN0KCk6DQogICAgICAgICAgICByZXR1cm4gREVGQVVMVA0KICAgICAgICBtb2NrID0gTW9jayhzaWRlX2VmZmVjdD1zaWRlX2VmZmVjdCwgcmV0dXJuX3ZhbHVlPXNlbnRpbmVsLlJFVFVSTikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCksIHNlbnRpbmVsLlJFVFVSTikNCg0KDQogICAgQHVuaXR0ZXN0LnNraXBVbmxlc3MoJ2phdmEnIGluIHN5cy5wbGF0Zm9ybSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1RoaXMgdGVzdCBvbmx5IGFwcGxpZXMgdG8gSnl0aG9uJykNCiAgICBkZWYgdGVzdF9qYXZhX2V4Y2VwdGlvbl9zaWRlX2VmZmVjdChzZWxmKToNCiAgICAgICAgaW1wb3J0IGphdmENCiAgICAgICAgbW9jayA9IE1vY2soc2lkZV9lZmZlY3Q9amF2YS5sYW5nLlJ1bnRpbWVFeGNlcHRpb24oIkJvb20hIikpDQoNCiAgICAgICAgIyBjYW4ndCB1c2UgYXNzZXJ0UmFpc2VzIHdpdGggamF2YSBleGNlcHRpb25zDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIG1vY2soMSwgMiwgZmlzaD0zKQ0KICAgICAgICBleGNlcHQgamF2YS5sYW5nLlJ1bnRpbWVFeGNlcHRpb246DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoJ2phdmEgZXhjZXB0aW9uIG5vdCByYWlzZWQnKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCgxLDIsIGZpc2g9MykNCg0KDQogICAgZGVmIHRlc3RfcmVzZXRfbW9jayhzZWxmKToNCiAgICAgICAgcGFyZW50ID0gTW9jaygpDQogICAgICAgIHNwZWMgPSBbInNvbWV0aGluZyJdDQogICAgICAgIG1vY2sgPSBNb2NrKG5hbWU9ImNoaWxkIiwgcGFyZW50PXBhcmVudCwgc3BlYz1zcGVjKQ0KICAgICAgICBtb2NrKHNlbnRpbmVsLlNvbWV0aGluZywgc29tZXRoaW5nPXNlbnRpbmVsLlNvbWV0aGluZ0Vsc2UpDQogICAgICAgIHNvbWV0aGluZyA9IG1vY2suc29tZXRoaW5nDQogICAgICAgIG1vY2suc29tZXRoaW5nKCkNCiAgICAgICAgbW9jay5zaWRlX2VmZmVjdCA9IHNlbnRpbmVsLlNpZGVFZmZlY3QNCiAgICAgICAgcmV0dXJuX3ZhbHVlID0gbW9jay5yZXR1cm5fdmFsdWUNCiAgICAgICAgcmV0dXJuX3ZhbHVlKCkNCg0KICAgICAgICBtb2NrLnJlc2V0X21vY2soKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5fbW9ja19uYW1lLCAiY2hpbGQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIGluY29ycmVjdGx5IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLl9tb2NrX3BhcmVudCwgcGFyZW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICJwYXJlbnQgaW5jb3JyZWN0bHkgcmVzZXQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suX21vY2tfbWV0aG9kcywgc3BlYywNCiAgICAgICAgICAgICAgICAgICAgICAgICAibWV0aG9kcyBpbmNvcnJlY3RseSByZXNldCIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShtb2NrLmNhbGxlZCwgImNhbGxlZCBub3QgcmVzZXQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9jb3VudCwgMCwgImNhbGxfY291bnQgbm90IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJncywgTm9uZSwgImNhbGxfYXJncyBub3QgcmVzZXQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9hcmdzX2xpc3QsIFtdLCAiY2FsbF9hcmdzX2xpc3Qgbm90IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgW10sDQogICAgICAgICAgICAgICAgICAgICAgICAibWV0aG9kX2NhbGxzIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHk6ICVyICE9ICVyIiAlDQogICAgICAgICAgICAgICAgICAgICAgICAobW9jay5tZXRob2RfY2FsbHMsIFtdKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIFtdKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5zaWRlX2VmZmVjdCwgc2VudGluZWwuU2lkZUVmZmVjdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgInNpZGVfZWZmZWN0IGluY29ycmVjdGx5IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLnJldHVybl92YWx1ZSwgcmV0dXJuX3ZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAicmV0dXJuX3ZhbHVlIGluY29ycmVjdGx5IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShyZXR1cm5fdmFsdWUuY2FsbGVkLCAicmV0dXJuIHZhbHVlIG1vY2sgbm90IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLl9tb2NrX2NoaWxkcmVuLCB7J3NvbWV0aGluZyc6IHNvbWV0aGluZ30sDQogICAgICAgICAgICAgICAgICAgICAgICAgICJjaGlsZHJlbiByZXNldCBpbmNvcnJlY3RseSIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5zb21ldGhpbmcsIHNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgImNoaWxkcmVuIGluY29ycmVjdGx5IGNsZWFyZWQiKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKG1vY2suc29tZXRoaW5nLmNhbGxlZCwgImNoaWxkIG5vdCByZXNldCIpDQoNCg0KICAgIGRlZiB0ZXN0X3Jlc2V0X21vY2tfcmVjdXJzaW9uKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2sucmV0dXJuX3ZhbHVlID0gbW9jaw0KDQogICAgICAgICMgdXNlZCB0byBjYXVzZSByZWN1cnNpb24NCiAgICAgICAgbW9jay5yZXNldF9tb2NrKCkNCg0KDQogICAgZGVmIHRlc3RfY2FsbChzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UobW9jay5yZXR1cm5fdmFsdWUsIE1vY2spLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkRlZmF1bHQgcmV0dXJuX3ZhbHVlIHNob3VsZCBiZSBhIE1vY2siKQ0KDQogICAgICAgIHJlc3VsdCA9IG1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2soKSwgcmVzdWx0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICJkaWZmZXJlbnQgcmVzdWx0IGZyb20gY29uc2VjdXRpdmUgY2FsbHMiKQ0KICAgICAgICBtb2NrLnJlc2V0X21vY2soKQ0KDQogICAgICAgIHJldF92YWwgPSBtb2NrKHNlbnRpbmVsLkFyZykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKG1vY2suY2FsbGVkLCAiY2FsbGVkIG5vdCBzZXQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9jb3VudCwgMSwgImNhbGxfY291bnQgaW5jb3JlZWN0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJncywgKChzZW50aW5lbC5BcmcsKSwge30pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJjYWxsX2FyZ3Mgbm90IHNldCIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5jYWxsX2FyZ3NfbGlzdCwgWygoc2VudGluZWwuQXJnLCksIHt9KV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgImNhbGxfYXJnc19saXN0IG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkiKQ0KDQogICAgICAgIG1vY2sucmV0dXJuX3ZhbHVlID0gc2VudGluZWwuUmV0dXJuVmFsdWUNCiAgICAgICAgcmV0X3ZhbCA9IG1vY2soc2VudGluZWwuQXJnLCBrZXk9c2VudGluZWwuS2V5QXJnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJldF92YWwsIHNlbnRpbmVsLlJldHVyblZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJpbmNvcnJlY3QgcmV0dXJuIHZhbHVlIikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9jb3VudCwgMiwgImNhbGxfY291bnQgaW5jb3JyZWN0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJncywNCiAgICAgICAgICAgICAgICAgICAgICAgICAoKHNlbnRpbmVsLkFyZywpLCB7J2tleSc6IHNlbnRpbmVsLktleUFyZ30pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJjYWxsX2FyZ3Mgbm90IHNldCIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5jYWxsX2FyZ3NfbGlzdCwgWw0KICAgICAgICAgICAgKChzZW50aW5lbC5BcmcsKSwge30pLA0KICAgICAgICAgICAgKChzZW50aW5lbC5BcmcsKSwgeydrZXknOiBzZW50aW5lbC5LZXlBcmd9KQ0KICAgICAgICBdLA0KICAgICAgICAgICAgImNhbGxfYXJnc19saXN0IG5vdCBzZXQiKQ0KDQoNCiAgICBkZWYgdGVzdF9jYWxsX2FyZ3NfY29tcGFyaXNvbihzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrKCkNCiAgICAgICAgbW9jayhzZW50aW5lbC5BcmcpDQogICAgICAgIG1vY2soa3c9c2VudGluZWwuS3dhcmcpDQogICAgICAgIG1vY2soc2VudGluZWwuQXJnLCBrdz1zZW50aW5lbC5Ld2FyZykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJnc19saXN0LCBbDQogICAgICAgICAgICAoKSwNCiAgICAgICAgICAgICgoc2VudGluZWwuQXJnLCksKSwNCiAgICAgICAgICAgICh7Imt3Ijogc2VudGluZWwuS3dhcmd9LCksDQogICAgICAgICAgICAoKHNlbnRpbmVsLkFyZywpLCB7Imt3Ijogc2VudGluZWwuS3dhcmd9KQ0KICAgICAgICBdKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9hcmdzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICgoc2VudGluZWwuQXJnLCksIHsia3ciOiBzZW50aW5lbC5Ld2FyZ30pKQ0KDQoNCiAgICBkZWYgdGVzdF9hc3NlcnRfY2FsbGVkX3dpdGgoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jaygpDQoNCiAgICAgICAgIyBXaWxsIHJhaXNlIGFuIGV4Y2VwdGlvbiBpZiBpdCBmYWlscw0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCgpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEFzc2VydGlvbkVycm9yLCBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCwgMSkNCg0KICAgICAgICBtb2NrLnJlc2V0X21vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBc3NlcnRpb25FcnJvciwgbW9jay5hc3NlcnRfY2FsbGVkX3dpdGgpDQoNCiAgICAgICAgbW9jaygxLCAyLCAzLCBhPSdmaXNoJywgYj0nbm90aGluZycpDQogICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF93aXRoKDEsIDIsIDMsIGE9J2Zpc2gnLCBiPSdub3RoaW5nJykNCg0KDQogICAgZGVmIHRlc3RfYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jaygpDQoNCiAgICAgICAgIyBXaWxsIHJhaXNlIGFuIGV4Y2VwdGlvbiBpZiBpdCBmYWlscw0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKCkNCg0KICAgICAgICBtb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXNzZXJ0aW9uRXJyb3IsIG1vY2suYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgpDQoNCiAgICAgICAgbW9jay5yZXNldF9tb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXNzZXJ0aW9uRXJyb3IsIG1vY2suYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgpDQoNCiAgICAgICAgbW9jaygnZm9vJywgJ2JhcicsIGJhej0yKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKCdmb28nLCAnYmFyJywgYmF6PTIpDQoNCiAgICAgICAgbW9jay5yZXNldF9tb2NrKCkNCiAgICAgICAgbW9jaygnZm9vJywgJ2JhcicsIGJhej0yKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIEFzc2VydGlvbkVycm9yLA0KICAgICAgICAgICAgbGFtYmRhOiBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKCdib2InLCAnYmFyJywgYmF6PTIpDQogICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfYXR0cmlidXRlX2FjY2Vzc19yZXR1cm5zX21vY2tzKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIHNvbWV0aGluZyA9IG1vY2suc29tZXRoaW5nDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc19pbnN0YW5jZShzb21ldGhpbmcsIE1vY2spLCAiYXR0cmlidXRlIGlzbid0IGEgbW9jayIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5zb21ldGhpbmcsIHNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAiZGlmZmVyZW50IGF0dHJpYnV0ZXMgcmV0dXJuZWQgZm9yIHNhbWUgbmFtZSIpDQoNCiAgICAgICAgIyBVc2FnZSBleGFtcGxlDQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jay5zb21ldGhpbmcucmV0dXJuX3ZhbHVlID0gMw0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5zb21ldGhpbmcoKSwgMywgIm1ldGhvZCByZXR1cm5lZCB3cm9uZyB2YWx1ZSIpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShtb2NrLnNvbWV0aGluZy5jYWxsZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAibWV0aG9kIGRpZG4ndCByZWNvcmQgYmVpbmcgY2FsbGVkIikNCg0KDQogICAgZGVmIHRlc3RfYXR0cmlidXRlc19oYXZlX25hbWVfYW5kX3BhcmVudF9zZXQoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgc29tZXRoaW5nID0gbW9jay5zb21ldGhpbmcNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZy5fbW9ja19uYW1lLCAic29tZXRoaW5nIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiYXR0cmlidXRlIG5hbWUgbm90IHNldCBjb3JyZWN0bHkiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZy5fbW9ja19wYXJlbnQsIG1vY2ssDQogICAgICAgICAgICAgICAgICAgICAgICAgImF0dHJpYnV0ZSBwYXJlbnQgbm90IHNldCBjb3JyZWN0bHkiKQ0KDQoNCiAgICBkZWYgdGVzdF9tZXRob2RfY2FsbHNfcmVjb3JkZWQoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jay5zb21ldGhpbmcoMywgZmlzaD1Ob25lKQ0KICAgICAgICBtb2NrLnNvbWV0aGluZ19lbHNlLnNvbWV0aGluZyg2LCBjYWtlPXNlbnRpbmVsLkNha2UpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLnNvbWV0aGluZ19lbHNlLm1ldGhvZF9jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgWygic29tZXRoaW5nIiwgKDYsKSwgeydjYWtlJzogc2VudGluZWwuQ2FrZX0pXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIm1ldGhvZCBjYWxscyBub3QgcmVjb3JkZWQgY29ycmVjdGx5IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWw0KICAgICAgICAgICAgKCJzb21ldGhpbmciLCAoMywpLCB7J2Zpc2gnOiBOb25lfSksDQogICAgICAgICAgICAoInNvbWV0aGluZ19lbHNlLnNvbWV0aGluZyIsICg2LCksIHsnY2FrZSc6IHNlbnRpbmVsLkNha2V9KQ0KICAgICAgICBdLA0KICAgICAgICAgICAgIm1ldGhvZCBjYWxscyBub3QgcmVjb3JkZWQgY29ycmVjdGx5IikNCg0KDQogICAgZGVmIHRlc3RfbWV0aG9kX2NhbGxzX2NvbXBhcmVfZWFzaWx5KHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2suc29tZXRoaW5nKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWygnc29tZXRoaW5nJywpXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWygnc29tZXRoaW5nJywgKCksIHt9KV0pDQoNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrLnNvbWV0aGluZygnZGlmZmVyZW50JykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWygnc29tZXRoaW5nJywgKCdkaWZmZXJlbnQnLCkpXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICBbKCdzb21ldGhpbmcnLCAoJ2RpZmZlcmVudCcsKSwge30pXSkNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2suc29tZXRoaW5nKHg9MSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWygnc29tZXRoaW5nJywgeyd4JzogMX0pXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWygnc29tZXRoaW5nJywgKCksIHsneCc6IDF9KV0pDQoNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrLnNvbWV0aGluZygnZGlmZmVyZW50Jywgc29tZT0nbW9yZScpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tZXRob2RfY2FsbHMsIFsNCiAgICAgICAgICAgICgnc29tZXRoaW5nJywgKCdkaWZmZXJlbnQnLCksIHsnc29tZSc6ICdtb3JlJ30pDQogICAgICAgIF0pDQoNCg0KICAgIGRlZiB0ZXN0X29ubHlfYWxsb3dlZF9tZXRob2RzX2V4aXN0KHNlbGYpOg0KICAgICAgICBmb3Igc3BlYyBpbiBbJ3NvbWV0aGluZyddLCAoJ3NvbWV0aGluZycsKToNCiAgICAgICAgICAgIGZvciBhcmcgaW4gJ3NwZWMnLCAnc3BlY19zZXQnOg0KICAgICAgICAgICAgICAgIG1vY2sgPSBNb2NrKCoqe2FyZzogc3BlY30pDQoNCiAgICAgICAgICAgICAgICAjIHRoaXMgc2hvdWxkIGJlIGFsbG93ZWQNCiAgICAgICAgICAgICAgICBtb2NrLnNvbWV0aGluZw0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgoDQogICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLA0KICAgICAgICAgICAgICAgICAgICAiTW9jayBvYmplY3QgaGFzIG5vIGF0dHJpYnV0ZSAnc29tZXRoaW5nX2Vsc2UnIiwNCiAgICAgICAgICAgICAgICAgICAgZ2V0YXR0ciwgbW9jaywgJ3NvbWV0aGluZ19lbHNlJw0KICAgICAgICAgICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfZnJvbV9zcGVjKHNlbGYpOg0KICAgICAgICBjbGFzcyBTb21ldGhpbmcob2JqZWN0KToNCiAgICAgICAgICAgIHggPSAzDQogICAgICAgICAgICBfX3NvbWV0aGluZ19fID0gTm9uZQ0KICAgICAgICAgICAgZGVmIHkoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGRlZiB0ZXN0X2F0dHJpYnV0ZXMobW9jayk6DQogICAgICAgICAgICAjIHNob3VsZCB3b3JrDQogICAgICAgICAgICBtb2NrLngNCiAgICAgICAgICAgIG1vY2sueQ0KICAgICAgICAgICAgbW9jay5fX3NvbWV0aGluZ19fDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KA0KICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLA0KICAgICAgICAgICAgICAgICJNb2NrIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICd6JyIsDQogICAgICAgICAgICAgICAgZ2V0YXR0ciwgbW9jaywgJ3onDQogICAgICAgICAgICApDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KA0KICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLA0KICAgICAgICAgICAgICAgICJNb2NrIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICdfX2Zvb2Jhcl9fJyIsDQogICAgICAgICAgICAgICAgZ2V0YXR0ciwgbW9jaywgJ19fZm9vYmFyX18nDQogICAgICAgICAgICApDQoNCiAgICAgICAgdGVzdF9hdHRyaWJ1dGVzKE1vY2soc3BlYz1Tb21ldGhpbmcpKQ0KICAgICAgICB0ZXN0X2F0dHJpYnV0ZXMoTW9jayhzcGVjPVNvbWV0aGluZygpKSkNCg0KDQogICAgZGVmIHRlc3Rfd3JhcHNfY2FsbHMoc2VsZik6DQogICAgICAgIHJlYWwgPSBNb2NrKCkNCg0KICAgICAgICBtb2NrID0gTW9jayh3cmFwcz1yZWFsKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2soKSwgcmVhbCgpKQ0KDQogICAgICAgIHJlYWwucmVzZXRfbW9jaygpDQoNCiAgICAgICAgbW9jaygxLCAyLCBmaXNoPTMpDQogICAgICAgIHJlYWwuYXNzZXJ0X2NhbGxlZF93aXRoKDEsIDIsIGZpc2g9MykNCg0KDQogICAgZGVmIHRlc3Rfd3JhcHNfY2FsbF93aXRoX25vbmRlZmF1bHRfcmV0dXJuX3ZhbHVlKHNlbGYpOg0KICAgICAgICByZWFsID0gTW9jaygpDQoNCiAgICAgICAgbW9jayA9IE1vY2sod3JhcHM9cmVhbCkNCiAgICAgICAgbW9jay5yZXR1cm5fdmFsdWUgPSAzDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCksIDMpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocmVhbC5jYWxsZWQpDQoNCg0KICAgIGRlZiB0ZXN0X3dyYXBzX2F0dHJpYnV0ZXMoc2VsZik6DQogICAgICAgIGNsYXNzIFJlYWwob2JqZWN0KToNCiAgICAgICAgICAgIGF0dHJpYnV0ZSA9IE1vY2soKQ0KDQogICAgICAgIHJlYWwgPSBSZWFsKCkNCg0KICAgICAgICBtb2NrID0gTW9jayh3cmFwcz1yZWFsKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suYXR0cmlidXRlKCksIHJlYWwuYXR0cmlidXRlKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBsYW1iZGE6IG1vY2suZmlzaCkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKG1vY2suYXR0cmlidXRlLCByZWFsLmF0dHJpYnV0ZSkNCiAgICAgICAgcmVzdWx0ID0gbW9jay5hdHRyaWJ1dGUuZnJvZygxLCAyLCBmaXNoPTMpDQogICAgICAgIFJlYWwuYXR0cmlidXRlLmZyb2cuYXNzZXJ0X2NhbGxlZF93aXRoKDEsIDIsIGZpc2g9MykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQsIFJlYWwuYXR0cmlidXRlLmZyb2coKSkNCg0KDQogICAgZGVmIHRlc3RfZXhjZXB0aW9uYWxfc2lkZV9lZmZlY3Qoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKHNpZGVfZWZmZWN0PUF0dHJpYnV0ZUVycm9yKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgbW9jaykNCg0KICAgICAgICBtb2NrID0gTW9jayhzaWRlX2VmZmVjdD1BdHRyaWJ1dGVFcnJvcignZm9vJykpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBtb2NrKQ0KDQoNCiAgICBkZWYgdGVzdF9iYXNlZXhjZXB0aW9uYWxfc2lkZV9lZmZlY3Qoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKHNpZGVfZWZmZWN0PUtleWJvYXJkSW50ZXJydXB0KQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhLZXlib2FyZEludGVycnVwdCwgbW9jaykNCg0KICAgICAgICBtb2NrID0gTW9jayhzaWRlX2VmZmVjdD1LZXlib2FyZEludGVycnVwdCgnZm9vJykpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEtleWJvYXJkSW50ZXJydXB0LCBtb2NrKQ0KDQoNCiAgICBkZWYgdGVzdF9hc3NlcnRfY2FsbGVkX3dpdGhfbWVzc2FnZShzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KEFzc2VydGlvbkVycm9yLCAnTm90IGNhbGxlZCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF93aXRoKQ0KDQoNCiAgICBkZWYgdGVzdF9fbmFtZV9fKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBsYW1iZGE6IG1vY2suX19uYW1lX18pDQoNCiAgICAgICAgbW9jay5fX25hbWVfXyA9ICdmb28nDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5fX25hbWVfXywgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X3NwZWNfbGlzdF9zdWJjbGFzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgU3ViKGxpc3QpOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBtb2NrID0gTW9jayhzcGVjPVN1YihbJ2ZvbyddKSkNCg0KICAgICAgICBtb2NrLmFwcGVuZCgzKQ0KICAgICAgICBtb2NrLmFwcGVuZC5hc3NlcnRfY2FsbGVkX3dpdGgoMykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2ssICdmb28nKQ0KDQoNCiAgICBkZWYgdGVzdF9zcGVjX2NsYXNzKHNlbGYpOg0KICAgICAgICBjbGFzcyBYKG9iamVjdCk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlYz1YKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNpbnN0YW5jZShtb2NrLCBYKSkNCg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjPVgoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzaW5zdGFuY2UobW9jaywgWCkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhtb2NrLl9fY2xhc3NfXywgWCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChNb2NrKCkuX19jbGFzc19fLl9fbmFtZV9fLCAnTW9jaycpDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlY19zZXQ9WCkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzaW5zdGFuY2UobW9jaywgWCkpDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlY19zZXQ9WCgpKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNpbnN0YW5jZShtb2NrLCBYKSkNCg0KDQogICAgZGVmIHRlc3Rfc2V0dGluZ19hdHRyaWJ1dGVfd2l0aF9zcGVjX3NldChzZWxmKToNCiAgICAgICAgY2xhc3MgWChvYmplY3QpOg0KICAgICAgICAgICAgeSA9IDMNCg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjPVgpDQogICAgICAgIG1vY2sueCA9ICdmb28nDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlY19zZXQ9WCkNCiAgICAgICAgZGVmIHNldF9hdHRyKCk6DQogICAgICAgICAgICBtb2NrLnggPSAnZm9vJw0KDQogICAgICAgIG1vY2sueSA9ICdmb28nDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBzZXRfYXR0cikNCg0KDQogICAgZGVmIHRlc3RfY29weShzZWxmKToNCiAgICAgICAgY3VycmVudCA9IHN5cy5nZXRyZWN1cnNpb25saW1pdCgpDQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChzeXMuc2V0cmVjdXJzaW9ubGltaXQsIGN1cnJlbnQpDQoNCiAgICAgICAgIyBjYW4ndCB1c2Ugc3lzLm1heGludCBhcyB0aGlzIGRvZXNuJ3QgZXhpc3QgaW4gUHl0aG9uIDMNCiAgICAgICAgc3lzLnNldHJlY3Vyc2lvbmxpbWl0KGludCgxMGU4KSkNCiAgICAgICAgIyB0aGlzIHNlZ2ZhdWx0cyB3aXRob3V0IHRoZSBmaXggaW4gcGxhY2UNCiAgICAgICAgY29weS5jb3B5KE1vY2soKSkNCg0KDQogICAgZGVmIHRlc3Rfc3ViY2xhc3Nfd2l0aF9wcm9wZXJ0aWVzKHNlbGYpOg0KICAgICAgICBjbGFzcyBTdWJDbGFzcyhNb2NrKToNCiAgICAgICAgICAgIGRlZiBfZ2V0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiAzDQogICAgICAgICAgICBkZWYgX3NldChzZWxmLCB2YWx1ZSk6DQogICAgICAgICAgICAgICAgcmFpc2UgTmFtZUVycm9yKCdzdHJhbmdlIGVycm9yJykNCiAgICAgICAgICAgIHNvbWVfYXR0cmlidXRlID0gcHJvcGVydHkoX2dldCwgX3NldCkNCg0KICAgICAgICBzID0gU3ViQ2xhc3Moc3BlY19zZXQ9U3ViQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocy5zb21lX2F0dHJpYnV0ZSwgMykNCg0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgcy5zb21lX2F0dHJpYnV0ZSA9IDMNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoTmFtZUVycm9yLCB0ZXN0KQ0KDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzLmZvbyA9ICdiYXInDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCB0ZXN0KQ0KDQoNCiAgICBkZWYgdGVzdF9zZXR0aW5nX2NhbGwoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgZGVmIF9fY2FsbF9fKHNlbGYsIGEpOg0KICAgICAgICAgICAgcmV0dXJuIHNlbGYuX21vY2tfY2FsbChhKQ0KDQogICAgICAgIHR5cGUobW9jaykuX19jYWxsX18gPSBfX2NhbGxfXw0KICAgICAgICBtb2NrKCdvbmUnKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCgnb25lJykNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2ssICdvbmUnLCAndHdvJykNCg0KDQogICAgZGVmIHRlc3RfZGlyKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIGF0dHJzID0gc2V0KGRpcihtb2NrKSkNCiAgICAgICAgdHlwZV9hdHRycyA9IHNldChbbSBmb3IgbSBpbiBkaXIoTW9jaykgaWYgbm90IG0uc3RhcnRzd2l0aCgnXycpXSkNCg0KICAgICAgICAjIGFsbCBwdWJsaWMgYXR0cmlidXRlcyBmcm9tIHRoZSB0eXBlIGFyZSBpbmNsdWRlZA0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNldCgpLCB0eXBlX2F0dHJzIC0gYXR0cnMpDQoNCiAgICAgICAgIyBjcmVhdGVzIHRoZXNlIGF0dHJpYnV0ZXMNCiAgICAgICAgbW9jay5hLCBtb2NrLmINCiAgICAgICAgc2VsZi5hc3NlcnRJbignYScsIGRpcihtb2NrKSkNCiAgICAgICAgc2VsZi5hc3NlcnRJbignYicsIGRpcihtb2NrKSkNCg0KICAgICAgICAjIGluc3RhbmNlIGF0dHJpYnV0ZXMNCiAgICAgICAgbW9jay5jID0gbW9jay5kID0gTm9uZQ0KICAgICAgICBzZWxmLmFzc2VydEluKCdjJywgZGlyKG1vY2spKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCdkJywgZGlyKG1vY2spKQ0KDQogICAgICAgICMgbWFnaWMgbWV0aG9kcw0KICAgICAgICBtb2NrLl9faXRlcl9fID0gbGFtYmRhIHM6IGl0ZXIoW10pDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oJ19faXRlcl9fJywgZGlyKG1vY2spKQ0KDQoNCiAgICBkZWYgdGVzdF9kaXJfZnJvbV9zcGVjKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjPXVuaXR0ZXN0LlRlc3RDYXNlKQ0KICAgICAgICB0ZXN0Y2FzZV9hdHRycyA9IHNldChkaXIodW5pdHRlc3QuVGVzdENhc2UpKQ0KICAgICAgICBhdHRycyA9IHNldChkaXIobW9jaykpDQoNCiAgICAgICAgIyBhbGwgYXR0cmlidXRlcyBmcm9tIHRoZSBzcGVjIGFyZSBpbmNsdWRlZA0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNldCgpLCB0ZXN0Y2FzZV9hdHRycyAtIGF0dHJzKQ0KDQogICAgICAgICMgc2hhZG93IGEgc3lzIGF0dHJpYnV0ZQ0KICAgICAgICBtb2NrLnZlcnNpb24gPSAzDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZGlyKG1vY2spLmNvdW50KCd2ZXJzaW9uJyksIDEpDQoNCg0KICAgIGRlZiB0ZXN0X2ZpbHRlcl9kaXIoc2VsZik6DQogICAgICAgIHBhdGNoZXIgPSBwYXRjaC5vYmplY3QobW9jaywgJ0ZJTFRFUl9ESVInLCBGYWxzZSkNCiAgICAgICAgcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGF0dHJzID0gc2V0KGRpcihNb2NrKCkpKQ0KICAgICAgICAgICAgdHlwZV9hdHRycyA9IHNldChkaXIoTW9jaykpDQoNCiAgICAgICAgICAgICMgQUxMIGF0dHJpYnV0ZXMgZnJvbSB0aGUgdHlwZSBhcmUgaW5jbHVkZWQNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2V0KCksIHR5cGVfYXR0cnMgLSBhdHRycykNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X2NvbmZpZ3VyZV9tb2NrKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jayhmb289J2JhcicpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5mb28sICdiYXInKQ0KDQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soZm9vPSdiYXInKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suZm9vLCAnYmFyJykNCg0KICAgICAgICBrd2FyZ3MgPSB7J3NpZGVfZWZmZWN0JzogS2V5RXJyb3IsICdmb28uYmFyLnJldHVybl92YWx1ZSc6IDMzLA0KICAgICAgICAgICAgICAgICAgJ2Zvbyc6IE1hZ2ljTW9jaygpfQ0KICAgICAgICBtb2NrID0gTW9jaygqKmt3YXJncykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoS2V5RXJyb3IsIG1vY2spDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5mb28uYmFyKCksIDMzKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jay5mb28sIE1hZ2ljTW9jaykNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2suY29uZmlndXJlX21vY2soKiprd2FyZ3MpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suZm9vLmJhcigpLCAzMykNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2suZm9vLCBNYWdpY01vY2spDQoNCg0KICAgIGRlZiBhc3NlcnRSYWlzZXNXaXRoTXNnKHNlbGYsIGV4Y2VwdGlvbiwgbWVzc2FnZSwgZnVuYywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgIyBuZWVkZWQgYmVjYXVzZSBhc3NlcnRSYWlzZXNSZWdleCBkb2Vzbid0IHdvcmsgZWFzaWx5IHdpdGggbmV3bGluZXMNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZnVuYygqYXJncywgKiprd2FyZ3MpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIGluc3RhbmNlID0gc3lzLmV4Y19pbmZvKClbMV0NCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShpbnN0YW5jZSwgZXhjZXB0aW9uKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCdFeGNlcHRpb24gJXIgbm90IHJhaXNlZCcgJSAoZXhjZXB0aW9uLCkpDQoNCiAgICAgICAgbXNnID0gc3RyKGluc3RhbmNlKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1zZywgbWVzc2FnZSkNCg0KDQogICAgZGVmIHRlc3RfYXNzZXJ0X2NhbGxlZF93aXRoX2ZhaWx1cmVfbWVzc2FnZShzZWxmKToNCiAgICAgICAgbW9jayA9IE5vbkNhbGxhYmxlTW9jaygpDQoNCiAgICAgICAgZXhwZWN0ZWQgPSAibW9jaygxLCAnMicsIDMsIGJhcj0nZm9vJykiDQogICAgICAgIG1lc3NhZ2UgPSAnRXhwZWN0ZWQgY2FsbDogJXNcbk5vdCBjYWxsZWQnDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzV2l0aE1zZygNCiAgICAgICAgICAgIEFzc2VydGlvbkVycm9yLCBtZXNzYWdlICUgKGV4cGVjdGVkLCksDQogICAgICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCwgMSwgJzInLCAzLCBiYXI9J2ZvbycNCiAgICAgICAgKQ0KDQogICAgICAgIG1vY2suZm9vKDEsICcyJywgMywgZm9vPSdmb28nKQ0KDQoNCiAgICAgICAgYXNzZXJ0ZXJzID0gWw0KICAgICAgICAgICAgbW9jay5mb28uYXNzZXJ0X2NhbGxlZF93aXRoLCBtb2NrLmZvby5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aA0KICAgICAgICBdDQogICAgICAgIGZvciBtZXRoIGluIGFzc2VydGVyczoNCiAgICAgICAgICAgIGFjdHVhbCA9ICJmb28oMSwgJzInLCAzLCBmb289J2ZvbycpIg0KICAgICAgICAgICAgZXhwZWN0ZWQgPSAiZm9vKDEsICcyJywgMywgYmFyPSdmb28nKSINCiAgICAgICAgICAgIG1lc3NhZ2UgPSAnRXhwZWN0ZWQgY2FsbDogJXNcbkFjdHVhbCBjYWxsOiAlcycNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzV2l0aE1zZygNCiAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwgbWVzc2FnZSAlIChleHBlY3RlZCwgYWN0dWFsKSwNCiAgICAgICAgICAgICAgICBtZXRoLCAxLCAnMicsIDMsIGJhcj0nZm9vJw0KICAgICAgICAgICAgKQ0KDQogICAgICAgICMganVzdCBrd2FyZ3MNCiAgICAgICAgZm9yIG1ldGggaW4gYXNzZXJ0ZXJzOg0KICAgICAgICAgICAgYWN0dWFsID0gImZvbygxLCAnMicsIDMsIGZvbz0nZm9vJykiDQogICAgICAgICAgICBleHBlY3RlZCA9ICJmb28oYmFyPSdmb28nKSINCiAgICAgICAgICAgIG1lc3NhZ2UgPSAnRXhwZWN0ZWQgY2FsbDogJXNcbkFjdHVhbCBjYWxsOiAlcycNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzV2l0aE1zZygNCiAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwgbWVzc2FnZSAlIChleHBlY3RlZCwgYWN0dWFsKSwNCiAgICAgICAgICAgICAgICBtZXRoLCBiYXI9J2ZvbycNCiAgICAgICAgICAgICkNCg0KICAgICAgICAjIGp1c3QgYXJncw0KICAgICAgICBmb3IgbWV0aCBpbiBhc3NlcnRlcnM6DQogICAgICAgICAgICBhY3R1YWwgPSAiZm9vKDEsICcyJywgMywgZm9vPSdmb28nKSINCiAgICAgICAgICAgIGV4cGVjdGVkID0gImZvbygxLCAyLCAzKSINCiAgICAgICAgICAgIG1lc3NhZ2UgPSAnRXhwZWN0ZWQgY2FsbDogJXNcbkFjdHVhbCBjYWxsOiAlcycNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzV2l0aE1zZygNCiAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwgbWVzc2FnZSAlIChleHBlY3RlZCwgYWN0dWFsKSwNCiAgICAgICAgICAgICAgICBtZXRoLCAxLCAyLCAzDQogICAgICAgICAgICApDQoNCiAgICAgICAgIyBlbXB0eQ0KICAgICAgICBmb3IgbWV0aCBpbiBhc3NlcnRlcnM6DQogICAgICAgICAgICBhY3R1YWwgPSAiZm9vKDEsICcyJywgMywgZm9vPSdmb28nKSINCiAgICAgICAgICAgIGV4cGVjdGVkID0gImZvbygpIg0KICAgICAgICAgICAgbWVzc2FnZSA9ICdFeHBlY3RlZCBjYWxsOiAlc1xuQWN0dWFsIGNhbGw6ICVzJw0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXNXaXRoTXNnKA0KICAgICAgICAgICAgICAgIEFzc2VydGlvbkVycm9yLCBtZXNzYWdlICUgKGV4cGVjdGVkLCBhY3R1YWwpLCBtZXRoDQogICAgICAgICAgICApDQoNCg0KICAgIGRlZiB0ZXN0X21vY2tfY2FsbHMoc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KDQogICAgICAgICMgbmVlZCB0byBkbyB0aGlzIGJlY2F1c2UgTWFnaWNNb2NrLm1vY2tfY2FsbHMgdXNlZCB0byBqdXN0IHJldHVybg0KICAgICAgICAjIGEgTWFnaWNNb2NrIHdoaWNoIGFsc28gcmV0dXJuZWQgYSBNYWdpY01vY2sgd2hlbiBfX2VxX18gd2FzIGNhbGxlZA0KICAgICAgICBzZWxmLmFzc2VydElzKG1vY2subW9ja19jYWxscyA9PSBbXSwgVHJ1ZSkNCg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCiAgICAgICAgbW9jaygpDQogICAgICAgIGV4cGVjdGVkID0gWygnJywgKCksIHt9KV0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIGV4cGVjdGVkKQ0KDQogICAgICAgIG1vY2suZm9vKCkNCiAgICAgICAgZXhwZWN0ZWQuYXBwZW5kKGNhbGwuZm9vKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBleHBlY3RlZCkNCiAgICAgICAgIyBpbnRlcm1lZGlhdGUgbW9ja19jYWxscyB3b3JrIHRvbw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suZm9vLm1vY2tfY2FsbHMsIFsoJycsICgpLCB7fSldKQ0KDQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBtb2NrKCkuZm9vKDEsIDIsIDMsIGE9NCwgYj01KQ0KICAgICAgICBleHBlY3RlZCA9IFsNCiAgICAgICAgICAgICgnJywgKCksIHt9KSwgKCcoKS5mb28nLCAoMSwgMiwgMyksIGRpY3QoYT00LCBiPTUpKQ0KICAgICAgICBdDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBleHBlY3RlZCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLnJldHVybl92YWx1ZS5mb28ubW9ja19jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICBbKCcnLCAoMSwgMiwgMyksIGRpY3QoYT00LCBiPTUpKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5yZXR1cm5fdmFsdWUubW9ja19jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICBbKCdmb28nLCAoMSwgMiwgMyksIGRpY3QoYT00LCBiPTUpKV0pDQoNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgIG1vY2soKS5mb28uYmFyKCkuYmF6KCkNCiAgICAgICAgZXhwZWN0ZWQgPSBbDQogICAgICAgICAgICAoJycsICgpLCB7fSksICgnKCkuZm9vLmJhcicsICgpLCB7fSksDQogICAgICAgICAgICAoJygpLmZvby5iYXIoKS5iYXonLCAoKSwge30pDQogICAgICAgIF0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIGV4cGVjdGVkKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2soKS5tb2NrX2NhbGxzLA0KICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGwuZm9vLmJhcigpLmJheigpLmNhbGxfbGlzdCgpKQ0KDQogICAgICAgIGZvciBrd2FyZ3MgaW4gZGljdCgpLCBkaWN0KG5hbWU9J2JhcicpOg0KICAgICAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygqKmt3YXJncykNCiAgICAgICAgICAgIGludChtb2NrLmZvbykNCiAgICAgICAgICAgIGV4cGVjdGVkID0gWygnZm9vLl9faW50X18nLCAoKSwge30pXQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIGV4cGVjdGVkKQ0KDQogICAgICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCoqa3dhcmdzKQ0KICAgICAgICAgICAgbW9jay5hKCkoKQ0KICAgICAgICAgICAgZXhwZWN0ZWQgPSBbKCdhJywgKCksIHt9KSwgKCdhKCknLCAoKSwge30pXQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIGV4cGVjdGVkKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmEoKS5tb2NrX2NhbGxzLCBbY2FsbCgpXSkNCg0KICAgICAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygqKmt3YXJncykNCiAgICAgICAgICAgIG1vY2soMSkoMikoMykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBjYWxsKDEpKDIpKDMpLmNhbGxfbGlzdCgpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCkubW9ja19jYWxscywgY2FsbCgyKSgzKS5jYWxsX2xpc3QoKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jaygpKCkubW9ja19jYWxscywgY2FsbCgzKS5jYWxsX2xpc3QoKSkNCg0KICAgICAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygqKmt3YXJncykNCiAgICAgICAgICAgIG1vY2soMSkoMikoMykuYS5iLmMoNCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsKDEpKDIpKDMpLmEuYi5jKDQpLmNhbGxfbGlzdCgpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCkubW9ja19jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbCgyKSgzKS5hLmIuYyg0KS5jYWxsX2xpc3QoKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jaygpKCkubW9ja19jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbCgzKS5hLmIuYyg0KS5jYWxsX2xpc3QoKSkNCg0KICAgICAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygqKmt3YXJncykNCiAgICAgICAgICAgIGludChtb2NrKCkuZm9vLmJhcigpLmJheigpKQ0KICAgICAgICAgICAgbGFzdF9jYWxsID0gKCcoKS5mb28uYmFyKCkuYmF6KCkuX19pbnRfXycsICgpLCB7fSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzWy0xXSwgbGFzdF9jYWxsKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCkubW9ja19jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbC5mb28uYmFyKCkuYmF6KCkuX19pbnRfXygpLmNhbGxfbGlzdCgpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCkuZm9vLmJhcigpLm1vY2tfY2FsbHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGwuYmF6KCkuX19pbnRfXygpLmNhbGxfbGlzdCgpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCkuZm9vLmJhcigpLmJhei5tb2NrX2NhbGxzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsKCkuX19pbnRfXygpLmNhbGxfbGlzdCgpKQ0KDQoNCiAgICBkZWYgdGVzdF9zdWJjbGFzc2luZyhzZWxmKToNCiAgICAgICAgY2xhc3MgU3ViY2xhc3MoTW9jayk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgbW9jayA9IFN1YmNsYXNzKCkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2suZm9vLCBTdWJjbGFzcykNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2soKSwgU3ViY2xhc3MpDQoNCiAgICAgICAgY2xhc3MgU3ViY2xhc3MoTW9jayk6DQogICAgICAgICAgICBkZWYgX2dldF9jaGlsZF9tb2NrKHNlbGYsICoqa3dhcmdzKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTW9jaygqKmt3YXJncykNCg0KICAgICAgICBtb2NrID0gU3ViY2xhc3MoKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdElzSW5zdGFuY2UobW9jay5mb28sIFN1YmNsYXNzKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdElzSW5zdGFuY2UobW9jaygpLCBTdWJjbGFzcykNCg0KDQogICAgZGVmIHRlc3RfYXJnX2xpc3RzKHNlbGYpOg0KICAgICAgICBtb2NrcyA9IFsNCiAgICAgICAgICAgIE1vY2soKSwNCiAgICAgICAgICAgIE1hZ2ljTW9jaygpLA0KICAgICAgICAgICAgTm9uQ2FsbGFibGVNb2NrKCksDQogICAgICAgICAgICBOb25DYWxsYWJsZU1hZ2ljTW9jaygpDQogICAgICAgIF0NCg0KICAgICAgICBkZWYgYXNzZXJ0X2F0dHJzKG1vY2spOg0KICAgICAgICAgICAgbmFtZXMgPSAnY2FsbF9hcmdzX2xpc3QnLCAnbWV0aG9kX2NhbGxzJywgJ21vY2tfY2FsbHMnDQogICAgICAgICAgICBmb3IgbmFtZSBpbiBuYW1lczoNCiAgICAgICAgICAgICAgICBhdHRyID0gZ2V0YXR0cihtb2NrLCBuYW1lKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShhdHRyLCBfQ2FsbExpc3QpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGF0dHIsIGxpc3QpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhdHRyLCBbXSkNCg0KICAgICAgICBmb3IgbW9jayBpbiBtb2NrczoNCiAgICAgICAgICAgIGFzc2VydF9hdHRycyhtb2NrKQ0KDQogICAgICAgICAgICBpZiBjYWxsYWJsZShtb2NrKToNCiAgICAgICAgICAgICAgICBtb2NrKCkNCiAgICAgICAgICAgICAgICBtb2NrKDEsIDIpDQogICAgICAgICAgICAgICAgbW9jayhhPTMpDQoNCiAgICAgICAgICAgICAgICBtb2NrLnJlc2V0X21vY2soKQ0KICAgICAgICAgICAgICAgIGFzc2VydF9hdHRycyhtb2NrKQ0KDQogICAgICAgICAgICBtb2NrLmZvbygpDQogICAgICAgICAgICBtb2NrLmZvby5iYXIoMSwgYT0zKQ0KICAgICAgICAgICAgbW9jay5mb28oMSkuYmFyKCkuYmF6KDMpDQoNCiAgICAgICAgICAgIG1vY2sucmVzZXRfbW9jaygpDQogICAgICAgICAgICBhc3NlcnRfYXR0cnMobW9jaykNCg0KDQogICAgZGVmIHRlc3RfY2FsbF9hcmdzX3R3b190dXBsZShzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrKDEsIGE9MykNCiAgICAgICAgbW9jaygyLCBiPTQpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4obW9jay5jYWxsX2FyZ3MpLCAyKQ0KICAgICAgICBhcmdzLCBrd2FyZ3MgPSBtb2NrLmNhbGxfYXJncw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgyLCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa3dhcmdzLCBkaWN0KGI9NCkpDQoNCiAgICAgICAgZXhwZWN0ZWRfbGlzdCA9IFsoKDEsKSwgZGljdChhPTMpKSwgKCgyLCksIGRpY3QoYj00KSldDQogICAgICAgIGZvciBleHBlY3RlZCwgY2FsbF9hcmdzIGluIHppcChleHBlY3RlZF9saXN0LCBtb2NrLmNhbGxfYXJnc19saXN0KToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKGNhbGxfYXJncyksIDIpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV4cGVjdGVkWzBdLCBjYWxsX2FyZ3NbMF0pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV4cGVjdGVkWzFdLCBjYWxsX2FyZ3NbMV0pDQoNCg0KICAgIGRlZiB0ZXN0X3NpZGVfZWZmZWN0X2l0ZXJhdG9yKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jayhzaWRlX2VmZmVjdD1pdGVyKFsxLCAyLCAzXSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoW21vY2soKSwgbW9jaygpLCBtb2NrKCldLCBbMSwgMiwgM10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN0b3BJdGVyYXRpb24sIG1vY2spDQoNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jayhzaWRlX2VmZmVjdD1bJ2EnLCAnYicsICdjJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoW21vY2soKSwgbW9jaygpLCBtb2NrKCldLCBbJ2EnLCAnYicsICdjJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN0b3BJdGVyYXRpb24sIG1vY2spDQoNCiAgICAgICAgbW9jayA9IE1vY2soc2lkZV9lZmZlY3Q9J2doaScpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoW21vY2soKSwgbW9jaygpLCBtb2NrKCldLCBbJ2cnLCAnaCcsICdpJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN0b3BJdGVyYXRpb24sIG1vY2spDQoNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soc2lkZV9lZmZlY3Q9Rm9vKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jaygpLCBGb28pDQoNCiAgICAgICAgbW9jayA9IE1vY2soc2lkZV9lZmZlY3Q9SXRlcigpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFttb2NrKCksIG1vY2soKSwgbW9jaygpLCBtb2NrKCldLA0KICAgICAgICAgICAgICAgICAgICAgICAgIFsndGhpcycsICdpcycsICdhbicsICdpdGVyJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN0b3BJdGVyYXRpb24sIG1vY2spDQoNCg0KICAgIGRlZiB0ZXN0X3NpZGVfZWZmZWN0X2l0ZXJhdG9yX2V4Y2VwdGlvbnMoc2VsZik6DQogICAgICAgIGZvciBLbGFzcyBpbiBNb2NrLCBNYWdpY01vY2s6DQogICAgICAgICAgICBpdGVyYWJsZSA9IChWYWx1ZUVycm9yLCAzLCBLZXlFcnJvciwgNikNCiAgICAgICAgICAgIG0gPSBLbGFzcyhzaWRlX2VmZmVjdD1pdGVyYWJsZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIG0pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0oKSwgMykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yLCBtKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtKCksIDYpDQoNCg0KICAgIGRlZiB0ZXN0X3NpZGVfZWZmZWN0X3NldHRpbmdfaXRlcmF0b3Ioc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jay5zaWRlX2VmZmVjdCA9IGl0ZXIoWzEsIDIsIDNdKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFttb2NrKCksIG1vY2soKSwgbW9jaygpXSwgWzEsIDIsIDNdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhTdG9wSXRlcmF0aW9uLCBtb2NrKQ0KICAgICAgICBzaWRlX2VmZmVjdCA9IG1vY2suc2lkZV9lZmZlY3QNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHNpZGVfZWZmZWN0LCB0eXBlKGl0ZXIoW10pKSkNCg0KICAgICAgICBtb2NrLnNpZGVfZWZmZWN0ID0gWydhJywgJ2InLCAnYyddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoW21vY2soKSwgbW9jaygpLCBtb2NrKCldLCBbJ2EnLCAnYicsICdjJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN0b3BJdGVyYXRpb24sIG1vY2spDQogICAgICAgIHNpZGVfZWZmZWN0ID0gbW9jay5zaWRlX2VmZmVjdA0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc2lkZV9lZmZlY3QsIHR5cGUoaXRlcihbXSkpKQ0KDQogICAgICAgIHRoaXNfaXRlciA9IEl0ZXIoKQ0KICAgICAgICBtb2NrLnNpZGVfZWZmZWN0ID0gdGhpc19pdGVyDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoW21vY2soKSwgbW9jaygpLCBtb2NrKCksIG1vY2soKV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgWyd0aGlzJywgJ2lzJywgJ2FuJywgJ2l0ZXInXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoU3RvcEl0ZXJhdGlvbiwgbW9jaykNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhtb2NrLnNpZGVfZWZmZWN0LCB0aGlzX2l0ZXIpDQoNCg0KICAgIGRlZiB0ZXN0X2Fzc2VydF9oYXNfY2FsbHNfYW55X29yZGVyKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2soMSwgMikNCiAgICAgICAgbW9jayhhPTMpDQogICAgICAgIG1vY2soMywgNCkNCiAgICAgICAgbW9jayhiPTYpDQogICAgICAgIG1vY2soYj02KQ0KDQogICAgICAgIGthbGxzID0gWw0KICAgICAgICAgICAgY2FsbCgxLCAyKSwgKHsnYSc6IDN9LCksDQogICAgICAgICAgICAoKDMsIDQpLCksICgoKSwgeydhJzogM30pLA0KICAgICAgICAgICAgKCcnLCAoMSwgMikpLCAoJycsIHsnYSc6IDN9KSwNCiAgICAgICAgICAgICgnJywgKDEsIDIpLCB7fSksICgnJywgKCksIHsnYSc6IDN9KQ0KICAgICAgICBdDQogICAgICAgIGZvciBrYWxsIGluIGthbGxzOg0KICAgICAgICAgICAgbW9jay5hc3NlcnRfaGFzX2NhbGxzKFtrYWxsXSwgYW55X29yZGVyPVRydWUpDQoNCiAgICAgICAgZm9yIGthbGwgaW4gY2FsbCgxLCAnMicpLCBjYWxsKGI9MyksIGNhbGwoKSwgMywgTm9uZSwgJ2Zvbyc6DQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwgbW9jay5hc3NlcnRfaGFzX2NhbGxzLA0KICAgICAgICAgICAgICAgIFtrYWxsXSwgYW55X29yZGVyPVRydWUNCiAgICAgICAgICAgICkNCg0KICAgICAgICBrYWxsX2xpc3RzID0gWw0KICAgICAgICAgICAgW2NhbGwoMSwgMiksIGNhbGwoYj02KV0sDQogICAgICAgICAgICBbY2FsbCgzLCA0KSwgY2FsbCgxLCAyKV0sDQogICAgICAgICAgICBbY2FsbChiPTYpLCBjYWxsKGI9NildLA0KICAgICAgICBdDQoNCiAgICAgICAgZm9yIGthbGxfbGlzdCBpbiBrYWxsX2xpc3RzOg0KICAgICAgICAgICAgbW9jay5hc3NlcnRfaGFzX2NhbGxzKGthbGxfbGlzdCwgYW55X29yZGVyPVRydWUpDQoNCiAgICAgICAga2FsbF9saXN0cyA9IFsNCiAgICAgICAgICAgIFtjYWxsKGI9NiksIGNhbGwoYj02KSwgY2FsbChiPTYpXSwNCiAgICAgICAgICAgIFtjYWxsKDEsIDIpLCBjYWxsKDEsIDIpXSwNCiAgICAgICAgICAgIFtjYWxsKDMsIDQpLCBjYWxsKDEsIDIpLCBjYWxsKDUsIDcpXSwNCiAgICAgICAgICAgIFtjYWxsKGI9NiksIGNhbGwoMywgNCksIGNhbGwoYj02KSwgY2FsbCgxLCAyKSwgY2FsbChiPTYpXSwNCiAgICAgICAgXQ0KICAgICAgICBmb3Iga2FsbF9saXN0IGluIGthbGxfbGlzdHM6DQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwgbW9jay5hc3NlcnRfaGFzX2NhbGxzLA0KICAgICAgICAgICAgICAgIGthbGxfbGlzdCwgYW55X29yZGVyPVRydWUNCiAgICAgICAgICAgICkNCg0KICAgIGRlZiB0ZXN0X2Fzc2VydF9oYXNfY2FsbHMoc2VsZik6DQogICAgICAgIGthbGxzMSA9IFsNCiAgICAgICAgICAgICAgICBjYWxsKDEsIDIpLCAoeydhJzogM30sKSwNCiAgICAgICAgICAgICAgICAoKDMsIDQpLCksIGNhbGwoYj02KSwNCiAgICAgICAgICAgICAgICAoJycsICgxLCksIHsnYic6IDZ9KSwNCiAgICAgICAgXQ0KICAgICAgICBrYWxsczIgPSBbY2FsbC5mb28oKSwgY2FsbC5iYXIoMSldDQogICAgICAgIGthbGxzMi5leHRlbmQoY2FsbC5zcGFtKCkuYmF6KGE9MykuY2FsbF9saXN0KCkpDQogICAgICAgIGthbGxzMi5leHRlbmQoY2FsbC5iYW0oc2V0KCksIGZvbz17fSkuZmlzaChbMV0pLmNhbGxfbGlzdCgpKQ0KDQogICAgICAgIG1vY2tzID0gW10NCiAgICAgICAgZm9yIG1vY2sgaW4gTW9jaygpLCBNYWdpY01vY2soKToNCiAgICAgICAgICAgIG1vY2soMSwgMikNCiAgICAgICAgICAgIG1vY2soYT0zKQ0KICAgICAgICAgICAgbW9jaygzLCA0KQ0KICAgICAgICAgICAgbW9jayhiPTYpDQogICAgICAgICAgICBtb2NrKDEsIGI9NikNCiAgICAgICAgICAgIG1vY2tzLmFwcGVuZCgobW9jaywga2FsbHMxKSkNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2suZm9vKCkNCiAgICAgICAgbW9jay5iYXIoMSkNCiAgICAgICAgbW9jay5zcGFtKCkuYmF6KGE9MykNCiAgICAgICAgbW9jay5iYW0oc2V0KCksIGZvbz17fSkuZmlzaChbMV0pDQogICAgICAgIG1vY2tzLmFwcGVuZCgobW9jaywga2FsbHMyKSkNCg0KICAgICAgICBmb3IgbW9jaywga2FsbHMgaW4gbW9ja3M6DQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oa2FsbHMpKToNCiAgICAgICAgICAgICAgICBmb3Igc3RlcCBpbiAxLCAyLCAzOg0KICAgICAgICAgICAgICAgICAgICB0aGVzZSA9IGthbGxzW2k6aStzdGVwXQ0KICAgICAgICAgICAgICAgICAgICBtb2NrLmFzc2VydF9oYXNfY2FsbHModGhlc2UpDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHRoZXNlKSA+IDE6DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2NrLmFzc2VydF9oYXNfY2FsbHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdChyZXZlcnNlZCh0aGVzZSkpDQogICAgICAgICAgICAgICAgICAgICAgICApDQoNCg0KICAgIGRlZiB0ZXN0X2Fzc2VydF9hbnlfY2FsbChzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrKDEsIDIpDQogICAgICAgIG1vY2soYT0zKQ0KICAgICAgICBtb2NrKDEsIGI9NikNCg0KICAgICAgICBtb2NrLmFzc2VydF9hbnlfY2FsbCgxLCAyKQ0KICAgICAgICBtb2NrLmFzc2VydF9hbnlfY2FsbChhPTMpDQogICAgICAgIG1vY2suYXNzZXJ0X2FueV9jYWxsKDEsIGI9NikNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIEFzc2VydGlvbkVycm9yLA0KICAgICAgICAgICAgbW9jay5hc3NlcnRfYW55X2NhbGwNCiAgICAgICAgKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIEFzc2VydGlvbkVycm9yLA0KICAgICAgICAgICAgbW9jay5hc3NlcnRfYW55X2NhbGwsDQogICAgICAgICAgICAxLCAzDQogICAgICAgICkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoDQogICAgICAgICAgICBBc3NlcnRpb25FcnJvciwNCiAgICAgICAgICAgIG1vY2suYXNzZXJ0X2FueV9jYWxsLA0KICAgICAgICAgICAgYT00DQogICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfbW9ja19jYWxsc19jcmVhdGVfYXV0b3NwZWMoc2VsZik6DQogICAgICAgIGRlZiBmKGEsIGIpOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBvYmogPSBJdGVyKCkNCiAgICAgICAgb2JqLmYgPSBmDQoNCiAgICAgICAgZnVuY3MgPSBbDQogICAgICAgICAgICBjcmVhdGVfYXV0b3NwZWMoZiksDQogICAgICAgICAgICBjcmVhdGVfYXV0b3NwZWMob2JqKS5mDQogICAgICAgIF0NCiAgICAgICAgZm9yIGZ1bmMgaW4gZnVuY3M6DQogICAgICAgICAgICBmdW5jKDEsIDIpDQogICAgICAgICAgICBmdW5jKDMsIDQpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICAgICAgZnVuYy5tb2NrX2NhbGxzLCBbY2FsbCgxLCAyKSwgY2FsbCgzLCA0KV0NCiAgICAgICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfbW9ja19hZGRfc3BlYyhzZWxmKToNCiAgICAgICAgY2xhc3MgX09uZShvYmplY3QpOg0KICAgICAgICAgICAgb25lID0gMQ0KICAgICAgICBjbGFzcyBfVHdvKG9iamVjdCk6DQogICAgICAgICAgICB0d28gPSAyDQogICAgICAgIGNsYXNzIEFueXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBvbmUgPSB0d28gPSB0aHJlZSA9ICdmb3VyJw0KDQogICAgICAgIGtsYXNzZXMgPSBbDQogICAgICAgICAgICBNb2NrLCBNYWdpY01vY2ssIE5vbkNhbGxhYmxlTW9jaywgTm9uQ2FsbGFibGVNYWdpY01vY2sNCiAgICAgICAgXQ0KICAgICAgICBmb3IgS2xhc3MgaW4gbGlzdChrbGFzc2VzKToNCiAgICAgICAgICAgIGtsYXNzZXMuYXBwZW5kKGxhbWJkYSBLPUtsYXNzOiBLKHNwZWM9QW55dGhpbmcpKQ0KICAgICAgICAgICAga2xhc3Nlcy5hcHBlbmQobGFtYmRhIEs9S2xhc3M6IEsoc3BlY19zZXQ9QW55dGhpbmcpKQ0KDQogICAgICAgIGZvciBLbGFzcyBpbiBrbGFzc2VzOg0KICAgICAgICAgICAgZm9yIGt3YXJncyBpbiBkaWN0KCksIGRpY3Qoc3BlY19zZXQ9VHJ1ZSk6DQogICAgICAgICAgICAgICAgbW9jayA9IEtsYXNzKCkNCiAgICAgICAgICAgICAgICAjbm8gZXJyb3INCiAgICAgICAgICAgICAgICBtb2NrLm9uZSwgbW9jay50d28sIG1vY2sudGhyZWUNCg0KICAgICAgICAgICAgICAgIGZvciBPbmUsIFR3byBpbiBbKF9PbmUsIF9Ud28pLCAoWydvbmUnXSwgWyd0d28nXSldOg0KICAgICAgICAgICAgICAgICAgICBmb3Iga3dhcmdzIGluIGRpY3QoKSwgZGljdChzcGVjX3NldD1UcnVlKToNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vY2subW9ja19hZGRfc3BlYyhPbmUsICoqa3dhcmdzKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBtb2NrLm9uZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2ssICd0d28nDQogICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgbW9jaywgJ3RocmVlJw0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3NwZWNfc2V0JyBpbiBrd2FyZ3M6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLCBzZXRhdHRyLCBtb2NrLCAndGhyZWUnLCBOb25lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBtb2NrLm1vY2tfYWRkX3NwZWMoVHdvLCAqKmt3YXJncykNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLCAnb25lJw0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbW9jay50d28NCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLCAndGhyZWUnDQogICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnc3BlY19zZXQnIGluIGt3YXJnczoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0cmlidXRlRXJyb3IsIHNldGF0dHIsIG1vY2ssICd0aHJlZScsIE5vbmUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAjIG5vdGUgdGhhdCBjcmVhdGluZyBhIG1vY2ssIHNldHRpbmcgYW4gaW5zdGFuY2UgYXR0cmlidXRlLCBhbmQNCiAgICAgICAgICAgICMgKnRoZW4qIHNldHRpbmcgYSBzcGVjIGRvZXNuJ3Qgd29yay4gTm90IHRoZSBpbnRlbmRlZCB1c2UgY2FzZQ0KDQoNCiAgICBkZWYgdGVzdF9tb2NrX2FkZF9zcGVjX21hZ2ljX21ldGhvZHMoc2VsZik6DQogICAgICAgIGZvciBLbGFzcyBpbiBNYWdpY01vY2ssIE5vbkNhbGxhYmxlTWFnaWNNb2NrOg0KICAgICAgICAgICAgbW9jayA9IEtsYXNzKCkNCiAgICAgICAgICAgIGludChtb2NrKQ0KDQogICAgICAgICAgICBtb2NrLm1vY2tfYWRkX3NwZWMob2JqZWN0KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpbnQsIG1vY2spDQoNCiAgICAgICAgICAgIG1vY2sgPSBLbGFzcygpDQogICAgICAgICAgICBtb2NrWydmb28nXQ0KICAgICAgICAgICAgbW9jay5fX2ludF9fLnJldHVybl92YWx1ZSA9NA0KDQogICAgICAgICAgICBtb2NrLm1vY2tfYWRkX3NwZWMoaW50KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQobW9jayksIDQpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogbW9ja1snZm9vJ10pDQoNCg0KICAgIGRlZiB0ZXN0X2FkZGluZ19jaGlsZF9tb2NrKHNlbGYpOg0KICAgICAgICBmb3IgS2xhc3MgaW4gTm9uQ2FsbGFibGVNb2NrLCBNb2NrLCBNYWdpY01vY2ssIE5vbkNhbGxhYmxlTWFnaWNNb2NrOg0KICAgICAgICAgICAgbW9jayA9IEtsYXNzKCkNCg0KICAgICAgICAgICAgbW9jay5mb28gPSBNb2NrKCkNCiAgICAgICAgICAgIG1vY2suZm9vKCkNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgW2NhbGwuZm9vKCldKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIFtjYWxsLmZvbygpXSkNCg0KICAgICAgICAgICAgbW9jayA9IEtsYXNzKCkNCiAgICAgICAgICAgIG1vY2suYmFyID0gTW9jayhuYW1lPSduYW1lJykNCiAgICAgICAgICAgIG1vY2suYmFyKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tZXRob2RfY2FsbHMsIFtdKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIFtdKQ0KDQogICAgICAgICAgICAjIG1vY2sgd2l0aCBhbiBleGlzdGluZyBfbmV3X3BhcmVudCBidXQgbm8gbmFtZQ0KICAgICAgICAgICAgbW9jayA9IEtsYXNzKCkNCiAgICAgICAgICAgIG1vY2suYmF6ID0gTWFnaWNNb2NrKCkoKQ0KICAgICAgICAgICAgbW9jay5iYXooKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgW10pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2subW9ja19jYWxscywgW10pDQoNCg0KICAgIGRlZiB0ZXN0X2FkZGluZ19yZXR1cm5fdmFsdWVfbW9jayhzZWxmKToNCiAgICAgICAgZm9yIEtsYXNzIGluIE1vY2ssIE1hZ2ljTW9jazoNCiAgICAgICAgICAgIG1vY2sgPSBLbGFzcygpDQogICAgICAgICAgICBtb2NrLnJldHVybl92YWx1ZSA9IE1hZ2ljTW9jaygpDQoNCiAgICAgICAgICAgIG1vY2soKSgpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2subW9ja19jYWxscywgW2NhbGwoKSwgY2FsbCgpKCldKQ0KDQoNCiAgICBkZWYgdGVzdF9tYW5hZ2VyX21vY2soc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgb25lID0gJ29uZScNCiAgICAgICAgICAgIHR3byA9ICd0d28nDQogICAgICAgIG1hbmFnZXIgPSBNb2NrKCkNCiAgICAgICAgcDEgPSBwYXRjaC5vYmplY3QoRm9vLCAnb25lJykNCiAgICAgICAgcDIgPSBwYXRjaC5vYmplY3QoRm9vLCAndHdvJykNCg0KICAgICAgICBtb2NrX29uZSA9IHAxLnN0YXJ0KCkNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHAxLnN0b3ApDQogICAgICAgIG1vY2tfdHdvID0gcDIuc3RhcnQoKQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAocDIuc3RvcCkNCg0KICAgICAgICBtYW5hZ2VyLmF0dGFjaF9tb2NrKG1vY2tfb25lLCAnb25lJykNCiAgICAgICAgbWFuYWdlci5hdHRhY2hfbW9jayhtb2NrX3R3bywgJ3R3bycpDQoNCiAgICAgICAgRm9vLnR3bygpDQogICAgICAgIEZvby5vbmUoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobWFuYWdlci5tb2NrX2NhbGxzLCBbY2FsbC50d28oKSwgY2FsbC5vbmUoKV0pDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljX21ldGhvZHNfbW9ja19jYWxscyhzZWxmKToNCiAgICAgICAgZm9yIEtsYXNzIGluIE1vY2ssIE1hZ2ljTW9jazoNCiAgICAgICAgICAgIG0gPSBLbGFzcygpDQogICAgICAgICAgICBtLl9faW50X18gPSBNb2NrKHJldHVybl92YWx1ZT0zKQ0KICAgICAgICAgICAgbS5fX2Zsb2F0X18gPSBNYWdpY01vY2socmV0dXJuX3ZhbHVlPTMuMCkNCiAgICAgICAgICAgIGludChtKQ0KICAgICAgICAgICAgZmxvYXQobSkNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLm1vY2tfY2FsbHMsIFtjYWxsLl9faW50X18oKSwgY2FsbC5fX2Zsb2F0X18oKV0pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0ubWV0aG9kX2NhbGxzLCBbXSkNCg0KDQogICAgZGVmIHRlc3RfYXR0cmlidXRlX2RlbGV0aW9uKHNlbGYpOg0KICAgICAgICAjIHRoaXMgYmVoYXZpb3VyIGlzbid0ICp1c2VmdWwqLCBidXQgYXQgbGVhc3QgaXQncyBub3cgdGVzdGVkLi4uDQogICAgICAgIGZvciBLbGFzcyBpbiBNb2NrLCBNYWdpY01vY2ssIE5vbkNhbGxhYmxlTWFnaWNNb2NrLCBOb25DYWxsYWJsZU1vY2s6DQogICAgICAgICAgICBtID0gS2xhc3MoKQ0KICAgICAgICAgICAgb3JpZ2luYWwgPSBtLmZvbw0KICAgICAgICAgICAgbS5mb28gPSAzDQogICAgICAgICAgICBkZWwgbS5mb28NCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobS5mb28sIG9yaWdpbmFsKQ0KDQogICAgICAgICAgICBuZXcgPSBtLmZvbyA9IE1vY2soKQ0KICAgICAgICAgICAgZGVsIG0uZm9vDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0uZm9vLCBuZXcpDQoNCg0KICAgIGRlZiB0ZXN0X21vY2tfcGFyZW50cyhzZWxmKToNCiAgICAgICAgZm9yIEtsYXNzIGluIE1vY2ssIE1hZ2ljTW9jazoNCiAgICAgICAgICAgIG0gPSBLbGFzcygpDQogICAgICAgICAgICBvcmlnaW5hbF9yZXByID0gcmVwcihtKQ0KICAgICAgICAgICAgbS5yZXR1cm5fdmFsdWUgPSBtDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKG0oKSwgbSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihtKSwgb3JpZ2luYWxfcmVwcikNCg0KICAgICAgICAgICAgbS5yZXNldF9tb2NrKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMobSgpLCBtKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXByKG0pLCBvcmlnaW5hbF9yZXByKQ0KDQogICAgICAgICAgICBtID0gS2xhc3MoKQ0KICAgICAgICAgICAgbS5iID0gbS5hDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKCJuYW1lPSdtb2NrLmEnIiwgcmVwcihtLmIpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigibmFtZT0nbW9jay5hJyIsIHJlcHIobS5hKSkNCiAgICAgICAgICAgIG0ucmVzZXRfbW9jaygpDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKCJuYW1lPSdtb2NrLmEnIiwgcmVwcihtLmIpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigibmFtZT0nbW9jay5hJyIsIHJlcHIobS5hKSkNCg0KICAgICAgICAgICAgbSA9IEtsYXNzKCkNCiAgICAgICAgICAgIG9yaWdpbmFsX3JlcHIgPSByZXByKG0pDQogICAgICAgICAgICBtLmEgPSBtKCkNCiAgICAgICAgICAgIG0uYS5yZXR1cm5fdmFsdWUgPSBtDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihtKSwgb3JpZ2luYWxfcmVwcikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihtLmEoKSksIG9yaWdpbmFsX3JlcHIpDQoNCg0KICAgIGRlZiB0ZXN0X2F0dGFjaF9tb2NrKHNlbGYpOg0KICAgICAgICBjbGFzc2VzID0gTW9jaywgTWFnaWNNb2NrLCBOb25DYWxsYWJsZU1hZ2ljTW9jaywgTm9uQ2FsbGFibGVNb2NrDQogICAgICAgIGZvciBLbGFzcyBpbiBjbGFzc2VzOg0KICAgICAgICAgICAgZm9yIEtsYXNzMiBpbiBjbGFzc2VzOg0KICAgICAgICAgICAgICAgIG0gPSBLbGFzcygpDQoNCiAgICAgICAgICAgICAgICBtMiA9IEtsYXNzMihuYW1lPSdmb28nKQ0KICAgICAgICAgICAgICAgIG0uYXR0YWNoX21vY2sobTIsICdiYXInKQ0KDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhtLmJhciwgbTIpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigibmFtZT0nbW9jay5iYXInIiwgcmVwcihtMikpDQoNCiAgICAgICAgICAgICAgICBtLmJhci5iYXooMSkNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0ubW9ja19jYWxscywgW2NhbGwuYmFyLmJheigxKV0pDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLm1ldGhvZF9jYWxscywgW2NhbGwuYmFyLmJheigxKV0pDQoNCg0KICAgIGRlZiB0ZXN0X2F0dGFjaF9tb2NrX3JldHVybl92YWx1ZShzZWxmKToNCiAgICAgICAgY2xhc3NlcyA9IE1vY2ssIE1hZ2ljTW9jaywgTm9uQ2FsbGFibGVNYWdpY01vY2ssIE5vbkNhbGxhYmxlTW9jaw0KICAgICAgICBmb3IgS2xhc3MgaW4gTW9jaywgTWFnaWNNb2NrOg0KICAgICAgICAgICAgZm9yIEtsYXNzMiBpbiBjbGFzc2VzOg0KICAgICAgICAgICAgICAgIG0gPSBLbGFzcygpDQoNCiAgICAgICAgICAgICAgICBtMiA9IEtsYXNzMihuYW1lPSdmb28nKQ0KICAgICAgICAgICAgICAgIG0uYXR0YWNoX21vY2sobTIsICdyZXR1cm5fdmFsdWUnKQ0KDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhtKCksIG0yKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIm5hbWU9J21vY2soKSciLCByZXByKG0yKSkNCg0KICAgICAgICAgICAgICAgIG0yLmZvbygpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLm1vY2tfY2FsbHMsIGNhbGwoKS5mb28oKS5jYWxsX2xpc3QoKSkNCg0KDQogICAgZGVmIHRlc3RfYXR0cmlidXRlX2RlbGV0aW9uKHNlbGYpOg0KICAgICAgICBmb3IgbW9jayBpbiBNb2NrKCksIE1hZ2ljTW9jaygpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGhhc2F0dHIobW9jaywgJ20nKSkNCg0KICAgICAgICAgICAgZGVsIG1vY2subQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKG1vY2ssICdtJykpDQoNCiAgICAgICAgICAgIGRlbCBtb2NrLmYNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoaGFzYXR0cihtb2NrLCAnZicpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2ssICdmJykNCg0KDQogICAgZGVmIHRlc3RfY2xhc3NfYXNzaWduYWJsZShzZWxmKToNCiAgICAgICAgZm9yIG1vY2sgaW4gTW9jaygpLCBNYWdpY01vY2soKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90SXNJbnN0YW5jZShtb2NrLCBpbnQpDQoNCiAgICAgICAgICAgIG1vY2suX19jbGFzc19fID0gaW50DQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jaywgaW50KQ0KICAgICAgICAgICAgbW9jay5mb28NCg0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/unittest/test/testmock/testwith.py':'aW1wb3J0IHVuaXR0ZXN0DQpmcm9tIHdhcm5pbmdzIGltcG9ydCBjYXRjaF93YXJuaW5ncw0KDQpmcm9tIHVuaXR0ZXN0LnRlc3QudGVzdG1vY2suc3VwcG9ydCBpbXBvcnQgaXNfaW5zdGFuY2UNCmZyb20gdW5pdHRlc3QubW9jayBpbXBvcnQgTWFnaWNNb2NrLCBNb2NrLCBwYXRjaCwgc2VudGluZWwsIG1vY2tfb3BlbiwgY2FsbA0KDQoNCg0Kc29tZXRoaW5nICA9IHNlbnRpbmVsLlNvbWV0aGluZw0Kc29tZXRoaW5nX2Vsc2UgID0gc2VudGluZWwuU29tZXRoaW5nRWxzZQ0KDQoNCg0KY2xhc3MgV2l0aFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgZGVmIHRlc3Rfd2l0aF9zdGF0ZW1lbnQoc2VsZik6DQogICAgICAgIHdpdGggcGF0Y2goJyVzLnNvbWV0aGluZycgJSBfX25hbWVfXywgc2VudGluZWwuU29tZXRoaW5nMik6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nMiwgInVucGF0Y2hlZCIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBzZW50aW5lbC5Tb21ldGhpbmcpDQoNCg0KICAgIGRlZiB0ZXN0X3dpdGhfc3RhdGVtZW50X2V4Y2VwdGlvbihzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgd2l0aCBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fLCBzZW50aW5lbC5Tb21ldGhpbmcyKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nMiwgInVucGF0Y2hlZCIpDQogICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCdwb3cnKQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJwYXRjaCBzd2FsbG93ZWQgZXhjZXB0aW9uIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzb21ldGhpbmcsIHNlbnRpbmVsLlNvbWV0aGluZykNCg0KDQogICAgZGVmIHRlc3Rfd2l0aF9zdGF0ZW1lbnRfYXMoc2VsZik6DQogICAgICAgIHdpdGggcGF0Y2goJyVzLnNvbWV0aGluZycgJSBfX25hbWVfXykgYXMgbW9ja19zb21ldGhpbmc6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgbW9ja19zb21ldGhpbmcsICJ1bnBhdGNoZWQiKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKG1vY2tfc29tZXRoaW5nLCBNYWdpY01vY2spLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaGluZyB3cm9uZyB0eXBlIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzb21ldGhpbmcsIHNlbnRpbmVsLlNvbWV0aGluZykNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfb2JqZWN0X3dpdGhfc3RhdGVtZW50KHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIHNvbWV0aGluZyA9ICdmb28nDQogICAgICAgIG9yaWdpbmFsID0gRm9vLnNvbWV0aGluZw0KICAgICAgICB3aXRoIHBhdGNoLm9iamVjdChGb28sICdzb21ldGhpbmcnKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoRm9vLnNvbWV0aGluZywgb3JpZ2luYWwsICJ1bnBhdGNoZWQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5zb21ldGhpbmcsIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF93aXRoX3N0YXRlbWVudF9uZXN0ZWQoc2VsZik6DQogICAgICAgIHdpdGggY2F0Y2hfd2FybmluZ3MocmVjb3JkPVRydWUpOg0KICAgICAgICAgICAgd2l0aCBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fKSBhcyBtb2NrX3NvbWV0aGluZywgcGF0Y2goJyVzLnNvbWV0aGluZ19lbHNlJyAlIF9fbmFtZV9fKSBhcyBtb2NrX3NvbWV0aGluZ19lbHNlOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBtb2NrX3NvbWV0aGluZywgInVucGF0Y2hlZCIpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzb21ldGhpbmdfZWxzZSwgbW9ja19zb21ldGhpbmdfZWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1bnBhdGNoZWQiKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBzZW50aW5lbC5Tb21ldGhpbmcpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nX2Vsc2UsIHNlbnRpbmVsLlNvbWV0aGluZ0Vsc2UpDQoNCg0KICAgIGRlZiB0ZXN0X3dpdGhfc3RhdGVtZW50X3NwZWNpZmllZChzZWxmKToNCiAgICAgICAgd2l0aCBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fLCBzZW50aW5lbC5QYXRjaGVkKSBhcyBtb2NrX3NvbWV0aGluZzoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBtb2NrX3NvbWV0aGluZywgInVucGF0Y2hlZCIpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2tfc29tZXRoaW5nLCBzZW50aW5lbC5QYXRjaGVkLCAid3JvbmcgcGF0Y2giKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nKQ0KDQoNCiAgICBkZWYgdGVzdENvbnRleHRNYW5hZ2VyTW9ja2luZyhzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrLl9fZW50ZXJfXyA9IE1vY2soKQ0KICAgICAgICBtb2NrLl9fZXhpdF9fID0gTW9jaygpDQogICAgICAgIG1vY2suX19leGl0X18ucmV0dXJuX3ZhbHVlID0gRmFsc2UNCg0KICAgICAgICB3aXRoIG1vY2sgYXMgbToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobSwgbW9jay5fX2VudGVyX18ucmV0dXJuX3ZhbHVlKQ0KICAgICAgICBtb2NrLl9fZW50ZXJfXy5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICBtb2NrLl9fZXhpdF9fLmFzc2VydF9jYWxsZWRfd2l0aChOb25lLCBOb25lLCBOb25lKQ0KDQoNCiAgICBkZWYgdGVzdF9jb250ZXh0X21hbmFnZXJfd2l0aF9tYWdpY19tb2NrKHNlbGYpOg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCg0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvcik6DQogICAgICAgICAgICB3aXRoIG1vY2s6DQogICAgICAgICAgICAgICAgJ2ZvbycgKyAzDQogICAgICAgIG1vY2suX19lbnRlcl9fLmFzc2VydF9jYWxsZWRfd2l0aCgpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShtb2NrLl9fZXhpdF9fLmNhbGxlZCkNCg0KDQogICAgZGVmIHRlc3Rfd2l0aF9zdGF0ZW1lbnRfc2FtZV9hdHRyaWJ1dGUoc2VsZik6DQogICAgICAgIHdpdGggcGF0Y2goJyVzLnNvbWV0aGluZycgJSBfX25hbWVfXywgc2VudGluZWwuUGF0Y2hlZCkgYXMgbW9ja19zb21ldGhpbmc6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgbW9ja19zb21ldGhpbmcsICJ1bnBhdGNoZWQiKQ0KDQogICAgICAgICAgICB3aXRoIHBhdGNoKCclcy5zb21ldGhpbmcnICUgX19uYW1lX18pIGFzIG1vY2tfYWdhaW46DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzb21ldGhpbmcsIG1vY2tfYWdhaW4sICJ1bnBhdGNoZWQiKQ0KDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgbW9ja19zb21ldGhpbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJyZXN0b3JlZCB3aXRoIHdyb25nIGluc3RhbmNlIikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nLCAibm90IHJlc3RvcmVkIikNCg0KDQogICAgZGVmIHRlc3Rfd2l0aF9zdGF0ZW1lbnRfaW1icmljYXRlZChzZWxmKToNCiAgICAgICAgd2l0aCBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fKSBhcyBtb2NrX3NvbWV0aGluZzoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBtb2NrX3NvbWV0aGluZywgInVucGF0Y2hlZCIpDQoNCiAgICAgICAgICAgIHdpdGggcGF0Y2goJyVzLnNvbWV0aGluZ19lbHNlJyAlIF9fbmFtZV9fKSBhcyBtb2NrX3NvbWV0aGluZ19lbHNlOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nX2Vsc2UsIG1vY2tfc29tZXRoaW5nX2Vsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5wYXRjaGVkIikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZ19lbHNlLCBzZW50aW5lbC5Tb21ldGhpbmdFbHNlKQ0KDQoNCiAgICBkZWYgdGVzdF9kaWN0X2NvbnRleHRfbWFuYWdlcihzZWxmKToNCiAgICAgICAgZm9vID0ge30NCiAgICAgICAgd2l0aCBwYXRjaC5kaWN0KGZvbywgeydhJzogJ2InfSk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvbywgeydhJzogJ2InfSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIHt9KQ0KDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoTmFtZUVycm9yKToNCiAgICAgICAgICAgIHdpdGggcGF0Y2guZGljdChmb28sIHsnYSc6ICdiJ30pOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLCB7J2EnOiAnYid9KQ0KICAgICAgICAgICAgICAgIHJhaXNlIE5hbWVFcnJvcignS29ucmFkJykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvbywge30pDQoNCg0KDQpjbGFzcyBUZXN0TW9ja09wZW4odW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgZGVmIHRlc3RfbW9ja19vcGVuKHNlbGYpOg0KICAgICAgICBtb2NrID0gbW9ja19vcGVuKCkNCiAgICAgICAgd2l0aCBwYXRjaCgnJXMub3BlbicgJSBfX25hbWVfXywgbW9jaywgY3JlYXRlPVRydWUpIGFzIHBhdGNoZWQ6DQogICAgICAgICAgICBzZWxmLmFzc2VydElzKHBhdGNoZWQsIG1vY2spDQogICAgICAgICAgICBvcGVuKCdmb28nKQ0KDQogICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X21vY2tfb3Blbl9jb250ZXh0X21hbmFnZXIoc2VsZik6DQogICAgICAgIG1vY2sgPSBtb2NrX29wZW4oKQ0KICAgICAgICBoYW5kbGUgPSBtb2NrLnJldHVybl92YWx1ZQ0KICAgICAgICB3aXRoIHBhdGNoKCclcy5vcGVuJyAlIF9fbmFtZV9fLCBtb2NrLCBjcmVhdGU9VHJ1ZSk6DQogICAgICAgICAgICB3aXRoIG9wZW4oJ2ZvbycpIGFzIGY6DQogICAgICAgICAgICAgICAgZi5yZWFkKCkNCg0KICAgICAgICBleHBlY3RlZF9jYWxscyA9IFtjYWxsKCdmb28nKSwgY2FsbCgpLl9fZW50ZXJfXygpLCBjYWxsKCkucmVhZCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsKCkuX19leGl0X18oTm9uZSwgTm9uZSwgTm9uZSldDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBleHBlY3RlZF9jYWxscykNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhmLCBoYW5kbGUpDQoNCg0KICAgIGRlZiB0ZXN0X2V4cGxpY2l0X21vY2soc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBtb2NrX29wZW4obW9jaykNCg0KICAgICAgICB3aXRoIHBhdGNoKCclcy5vcGVuJyAlIF9fbmFtZV9fLCBtb2NrLCBjcmVhdGU9VHJ1ZSkgYXMgcGF0Y2hlZDoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMocGF0Y2hlZCwgbW9jaykNCiAgICAgICAgICAgIG9wZW4oJ2ZvbycpDQoNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgnZm9vJykNCg0KDQogICAgZGVmIHRlc3RfcmVhZF9kYXRhKHNlbGYpOg0KICAgICAgICBtb2NrID0gbW9ja19vcGVuKHJlYWRfZGF0YT0nZm9vJykNCiAgICAgICAgd2l0aCBwYXRjaCgnJXMub3BlbicgJSBfX25hbWVfXywgbW9jaywgY3JlYXRlPVRydWUpOg0KICAgICAgICAgICAgaCA9IG9wZW4oJ2JhcicpDQogICAgICAgICAgICByZXN1bHQgPSBoLnJlYWQoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LCAnZm9vJykNCg0KDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgIHVuaXR0ZXN0Lm1haW4oKQ0K',
'/Lib/unittest/test/testmock/__init__.py':'aW1wb3J0IG9zDQppbXBvcnQgc3lzDQppbXBvcnQgdW5pdHRlc3QNCg0KDQpoZXJlID0gb3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKQ0KbG9hZGVyID0gdW5pdHRlc3QuZGVmYXVsdFRlc3RMb2FkZXINCg0KZGVmIGxvYWRfdGVzdHMoKmFyZ3MpOg0KICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkNCiAgICBmb3IgZm4gaW4gb3MubGlzdGRpcihoZXJlKToNCiAgICAgICAgaWYgZm4uc3RhcnRzd2l0aCgidGVzdCIpIGFuZCBmbi5lbmRzd2l0aCgiLnB5Iik6DQogICAgICAgICAgICBtb2RuYW1lID0gInVuaXR0ZXN0LnRlc3QudGVzdG1vY2suIiArIGZuWzotM10NCiAgICAgICAgICAgIF9faW1wb3J0X18obW9kbmFtZSkNCiAgICAgICAgICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW21vZG5hbWVdDQogICAgICAgICAgICBzdWl0ZS5hZGRUZXN0KGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG1vZHVsZSkpDQogICAgcmV0dXJuIHN1aXRlDQo=',
'/Lib/unittest/test/testmock/testcallable.py':'IyBDb3B5cmlnaHQgKEMpIDIwMDctMjAxMiBNaWNoYWVsIEZvb3JkICYgdGhlIG1vY2sgdGVhbQ0KIyBFLW1haWw6IGZ1enp5bWFuIEFUIHZvaWRzcGFjZSBET1Qgb3JnIERPVCB1aw0KIyBodHRwOi8vd3d3LnZvaWRzcGFjZS5vcmcudWsvcHl0aG9uL21vY2svDQoNCmltcG9ydCB1bml0dGVzdA0KZnJvbSB1bml0dGVzdC50ZXN0LnRlc3Rtb2NrLnN1cHBvcnQgaW1wb3J0IGlzX2luc3RhbmNlLCBYLCBTb21lQ2xhc3MNCg0KZnJvbSB1bml0dGVzdC5tb2NrIGltcG9ydCAoDQogICAgTW9jaywgTWFnaWNNb2NrLCBOb25DYWxsYWJsZU1hZ2ljTW9jaywNCiAgICBOb25DYWxsYWJsZU1vY2ssIHBhdGNoLCBjcmVhdGVfYXV0b3NwZWMsDQogICAgQ2FsbGFibGVNaXhpbg0KKQ0KDQoNCg0KY2xhc3MgVGVzdENhbGxhYmxlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiBhc3NlcnROb3RDYWxsYWJsZShzZWxmLCBtb2NrKToNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKG1vY2ssIE5vbkNhbGxhYmxlTWFnaWNNb2NrKSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShpc19pbnN0YW5jZShtb2NrLCBDYWxsYWJsZU1peGluKSkNCg0KDQogICAgZGVmIHRlc3Rfbm9uX2NhbGxhYmxlKHNlbGYpOg0KICAgICAgICBmb3IgbW9jayBpbiBOb25DYWxsYWJsZU1hZ2ljTW9jaygpLCBOb25DYWxsYWJsZU1vY2soKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoaGFzYXR0cihtb2NrLCAnX19jYWxsX18nKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4obW9jay5fX2NsYXNzX18uX19uYW1lX18sIHJlcHIobW9jaykpDQoNCg0KICAgIGRlZiB0ZXN0X2hlaXJhcmNoeShzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzc3ViY2xhc3MoTWFnaWNNb2NrLCBNb2NrKSkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzc3ViY2xhc3MoTm9uQ2FsbGFibGVNYWdpY01vY2ssIE5vbkNhbGxhYmxlTW9jaykpDQoNCg0KICAgIGRlZiB0ZXN0X2F0dHJpYnV0ZXMoc2VsZik6DQogICAgICAgIG9uZSA9IE5vbkNhbGxhYmxlTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc3N1YmNsYXNzKHR5cGUob25lLm9uZSksIE1vY2spKQ0KDQogICAgICAgIHR3byA9IE5vbkNhbGxhYmxlTWFnaWNNb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzc3ViY2xhc3ModHlwZSh0d28udHdvKSwgTWFnaWNNb2NrKSkNCg0KDQogICAgZGVmIHRlc3Rfc3ViY2xhc3NlcyhzZWxmKToNCiAgICAgICAgY2xhc3MgTW9ja1N1YihNb2NrKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBvbmUgPSBNb2NrU3ViKCkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzc3ViY2xhc3ModHlwZShvbmUub25lKSwgTW9ja1N1YikpDQoNCiAgICAgICAgY2xhc3MgTWFnaWNTdWIoTWFnaWNNb2NrKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICB0d28gPSBNYWdpY1N1YigpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc3N1YmNsYXNzKHR5cGUodHdvLnR3byksIE1hZ2ljU3ViKSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfc3BlYyhzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKCclcy5YJyAlIF9fbmFtZV9fLCBzcGVjPVRydWUpDQogICAgICAgIG1vY2sgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHBhdGNoZXIuc3RvcCkNCg0KICAgICAgICBpbnN0YW5jZSA9IG1vY2soKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKCkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdENhbGxhYmxlKGluc3RhbmNlKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGluc3RhbmNlKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9zcGVjX3NldChzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKCclcy5YJyAlIF9fbmFtZV9fLCBzcGVjX3NldD1UcnVlKQ0KICAgICAgICBtb2NrID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChwYXRjaGVyLnN0b3ApDQoNCiAgICAgICAgaW5zdGFuY2UgPSBtb2NrKCkNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnROb3RDYWxsYWJsZShpbnN0YW5jZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpbnN0YW5jZSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfc3BlY19pbnN0YW5jZShzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKCclcy5YJyAlIF9fbmFtZV9fLCBzcGVjPVgoKSkNCiAgICAgICAgbW9jayA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAocGF0Y2hlci5zdG9wKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90Q2FsbGFibGUobW9jaykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9zcGVjX3NldF9pbnN0YW5jZShzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKCclcy5YJyAlIF9fbmFtZV9fLCBzcGVjX3NldD1YKCkpDQogICAgICAgIG1vY2sgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHBhdGNoZXIuc3RvcCkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdENhbGxhYmxlKG1vY2spDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfc3BlY19jYWxsYWJsZV9jbGFzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgQ2FsbGFibGVYKFgpOg0KICAgICAgICAgICAgZGVmIF9fY2FsbF9fKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBTdWIoQ2FsbGFibGVYKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBNdWx0aShTb21lQ2xhc3MsIFN1Yik6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgZm9yIGFyZyBpbiAnc3BlYycsICdzcGVjX3NldCc6DQogICAgICAgICAgICBmb3IgS2xhc3MgaW4gQ2FsbGFibGVYLCBTdWIsIE11bHRpOg0KICAgICAgICAgICAgICAgIHdpdGggcGF0Y2goJyVzLlgnICUgX19uYW1lX18sICoqe2FyZzogS2xhc3N9KSBhcyBtb2NrOg0KICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IG1vY2soKQ0KICAgICAgICAgICAgICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKCkNCg0KICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UoaW5zdGFuY2UsIE1hZ2ljTW9jaykpDQogICAgICAgICAgICAgICAgICAgICMgaW5oZXJpdGVkIHNwZWMNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIGluc3RhbmNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9vYmFyYmF6JykNCg0KICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBpbnN0YW5jZSgpDQogICAgICAgICAgICAgICAgICAgICMgaW5zdGFuY2UgaXMgY2FsbGFibGUsIHJlc3VsdCBoYXMgbm8gc3BlYw0KICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQoNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0KDMsIDIsIDEpDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgzLCAyLCAxKQ0KICAgICAgICAgICAgICAgICAgICByZXN1bHQuZm9vKDMsIDIsIDEpDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5mb28uYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoMywgMiwgMSkNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9wc2VjKHNlbGYpOg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKFgpDQogICAgICAgIGluc3RhbmNlID0gbW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW5zdGFuY2UpDQoNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhYKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX2luc3RhbmNlKHNlbGYpOg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKFNvbWVDbGFzcywgaW5zdGFuY2U9VHJ1ZSkNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2spDQogICAgICAgIG1vY2sud2liYmxlKCkNCiAgICAgICAgbW9jay53aWJibGUuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jay53aWJibGUsICdzb21lJywgICdhcmdzJykNCg==',
'/Lib/unittest/test/testmock/testmagicmethods.py':'aW1wb3J0IHVuaXR0ZXN0DQppbXBvcnQgaW5zcGVjdA0KaW1wb3J0IHN5cw0KZnJvbSB1bml0dGVzdC5tb2NrIGltcG9ydCBNb2NrLCBNYWdpY01vY2ssIF9tYWdpY3MNCg0KDQoNCmNsYXNzIFRlc3RNb2NraW5nTWFnaWNNZXRob2RzKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiB0ZXN0X2RlbGV0aW5nX21hZ2ljX21ldGhvZHMoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKG1vY2ssICdfX2dldGl0ZW1fXycpKQ0KDQogICAgICAgIG1vY2suX19nZXRpdGVtX18gPSBNb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGhhc2F0dHIobW9jaywgJ19fZ2V0aXRlbV9fJykpDQoNCiAgICAgICAgZGVsIG1vY2suX19nZXRpdGVtX18NCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKG1vY2ssICdfX2dldGl0ZW1fXycpKQ0KDQoNCiAgICBkZWYgdGVzdF9tYWdpY21vY2tfZGVsKHNlbGYpOg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCiAgICAgICAgIyBiZWZvcmUgdXNpbmcgZ2V0aXRlbQ0KICAgICAgICBkZWwgbW9jay5fX2dldGl0ZW1fXw0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogbW9ja1snZm9vJ10pDQoNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgICMgdGhpcyB0aW1lIHVzZSBpdCBmaXJzdA0KICAgICAgICBtb2NrWydmb28nXQ0KICAgICAgICBkZWwgbW9jay5fX2dldGl0ZW1fXw0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogbW9ja1snZm9vJ10pDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljX21ldGhvZF93cmFwcGluZyhzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBkZWYgZihzZWxmLCBuYW1lKToNCiAgICAgICAgICAgIHJldHVybiBzZWxmLCAnZmlzaCcNCg0KICAgICAgICBtb2NrLl9fZ2V0aXRlbV9fID0gZg0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKG1vY2suX19nZXRpdGVtX18gaXMgZikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrWydmb28nXSwgKG1vY2ssICdmaXNoJykpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5fX2dldGl0ZW1fXygnZm9vJyksIChtb2NrLCAnZmlzaCcpKQ0KDQogICAgICAgIG1vY2suX19nZXRpdGVtX18gPSBtb2NrDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShtb2NrLl9fZ2V0aXRlbV9fIGlzIG1vY2spDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljX21ldGhvZHNfaXNvbGF0ZWRfYmV0d2Vlbl9tb2NrcyhzZWxmKToNCiAgICAgICAgbW9jazEgPSBNb2NrKCkNCiAgICAgICAgbW9jazIgPSBNb2NrKCkNCg0KICAgICAgICBtb2NrMS5fX2l0ZXJfXyA9IE1vY2socmV0dXJuX3ZhbHVlPWl0ZXIoW10pKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3QobW9jazEpLCBbXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBsYW1iZGE6IGxpc3QobW9jazIpKQ0KDQoNCiAgICBkZWYgdGVzdF9yZXByKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihtb2NrKSwgIjxNb2NrIGlkPSclcyc+IiAlIGlkKG1vY2spKQ0KICAgICAgICBtb2NrLl9fcmVwcl9fID0gbGFtYmRhIHM6ICdmb28nDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihtb2NrKSwgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X3N0cihzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihtb2NrKSwgb2JqZWN0Ll9fc3RyX18obW9jaykpDQogICAgICAgIG1vY2suX19zdHJfXyA9IGxhbWJkYSBzOiAnZm9vJw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihtb2NrKSwgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X2RpY3RfbWV0aG9kcyhzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBtb2NrWydmb28nXSkNCiAgICAgICAgZGVmIF9kZWwoKToNCiAgICAgICAgICAgIGRlbCBtb2NrWydmb28nXQ0KICAgICAgICBkZWYgX3NldCgpOg0KICAgICAgICAgICAgbW9ja1snZm9vJ10gPSAzDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgX2RlbCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBfc2V0KQ0KDQogICAgICAgIF9kaWN0ID0ge30NCiAgICAgICAgZGVmIGdldGl0ZW0ocywgbmFtZSk6DQogICAgICAgICAgICByZXR1cm4gX2RpY3RbbmFtZV0NCiAgICAgICAgZGVmIHNldGl0ZW0ocywgbmFtZSwgdmFsdWUpOg0KICAgICAgICAgICAgX2RpY3RbbmFtZV0gPSB2YWx1ZQ0KICAgICAgICBkZWYgZGVsaXRlbShzLCBuYW1lKToNCiAgICAgICAgICAgIGRlbCBfZGljdFtuYW1lXQ0KDQogICAgICAgIG1vY2suX19zZXRpdGVtX18gPSBzZXRpdGVtDQogICAgICAgIG1vY2suX19nZXRpdGVtX18gPSBnZXRpdGVtDQogICAgICAgIG1vY2suX19kZWxpdGVtX18gPSBkZWxpdGVtDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoS2V5RXJyb3IsIGxhbWJkYTogbW9ja1snZm9vJ10pDQogICAgICAgIG1vY2tbJ2ZvbyddID0gJ2JhcicNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChfZGljdCwgeydmb28nOiAnYmFyJ30pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9ja1snZm9vJ10sICdiYXInKQ0KICAgICAgICBkZWwgbW9ja1snZm9vJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChfZGljdCwge30pDQoNCg0KICAgIGRlZiB0ZXN0X251bWVyaWMoc2VsZik6DQogICAgICAgIG9yaWdpbmFsID0gbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrLnZhbHVlID0gMA0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBtb2NrICsgMykNCg0KICAgICAgICBkZWYgYWRkKHNlbGYsIG90aGVyKToNCiAgICAgICAgICAgIG1vY2sudmFsdWUgKz0gb3RoZXINCiAgICAgICAgICAgIHJldHVybiBzZWxmDQogICAgICAgIG1vY2suX19hZGRfXyA9IGFkZA0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2sgKyAzLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2sudmFsdWUsIDMpDQoNCiAgICAgICAgZGVsIG1vY2suX19hZGRfXw0KICAgICAgICBkZWYgaWFkZChtb2NrKToNCiAgICAgICAgICAgIG1vY2sgKz0gMw0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGlhZGQsIG1vY2spDQogICAgICAgIG1vY2suX19pYWRkX18gPSBhZGQNCiAgICAgICAgbW9jayArPSA2DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jaywgb3JpZ2luYWwpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay52YWx1ZSwgOSkNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogMyArIG1vY2spDQogICAgICAgIG1vY2suX19yYWRkX18gPSBhZGQNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCg3ICsgbW9jaywgbW9jaykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLnZhbHVlLCAxNikNCg0KDQogICAgZGVmIHRlc3RfaGFzaChzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICAjIHRlc3QgZGVsZWdhdGlvbg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGhhc2gobW9jayksIE1vY2suX19oYXNoX18obW9jaykpDQoNCiAgICAgICAgZGVmIF9oYXNoKHMpOg0KICAgICAgICAgICAgcmV0dXJuIDMNCiAgICAgICAgbW9jay5fX2hhc2hfXyA9IF9oYXNoDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaGFzaChtb2NrKSwgMykNCg0KDQogICAgZGVmIHRlc3Rfbm9uemVybyhzZWxmKToNCiAgICAgICAgbSA9IE1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoYm9vbChtKSkNCg0KICAgICAgICBtLl9fYm9vbF9fID0gbGFtYmRhIHM6IEZhbHNlDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoYm9vbChtKSkNCg0KDQogICAgZGVmIHRlc3RfY29tcGFyaXNvbihzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBkZWYgY29tcChzLCBvKToNCiAgICAgICAgICAgIHJldHVybiBUcnVlDQogICAgICAgIG1vY2suX19sdF9fID0gbW9jay5fX2d0X18gPSBtb2NrLl9fbGVfXyA9IG1vY2suX19nZV9fID0gY29tcA0KICAgICAgICBzZWxmLiBhc3NlcnRUcnVlKG1vY2sgPCAzKQ0KICAgICAgICBzZWxmLiBhc3NlcnRUcnVlKG1vY2sgPiAzKQ0KICAgICAgICBzZWxmLiBhc3NlcnRUcnVlKG1vY2sgPD0gMykNCiAgICAgICAgc2VsZi4gYXNzZXJ0VHJ1ZShtb2NrID49IDMpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBsYW1iZGE6IE1hZ2ljTW9jaygpIDwgb2JqZWN0KCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBvYmplY3QoKSA8IE1hZ2ljTW9jaygpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogTWFnaWNNb2NrKCkgPCBNYWdpY01vY2soKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBsYW1iZGE6IE1hZ2ljTW9jaygpID4gb2JqZWN0KCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBvYmplY3QoKSA+IE1hZ2ljTW9jaygpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogTWFnaWNNb2NrKCkgPiBNYWdpY01vY2soKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBsYW1iZGE6IE1hZ2ljTW9jaygpIDw9IG9iamVjdCgpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogb2JqZWN0KCkgPD0gTWFnaWNNb2NrKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBNYWdpY01vY2soKSA8PSBNYWdpY01vY2soKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBsYW1iZGE6IE1hZ2ljTW9jaygpID49IG9iamVjdCgpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogb2JqZWN0KCkgPj0gTWFnaWNNb2NrKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBNYWdpY01vY2soKSA+PSBNYWdpY01vY2soKSkNCg0KDQogICAgZGVmIHRlc3RfZXF1YWxpdHkoc2VsZik6DQogICAgICAgIGZvciBtb2NrIGluIE1vY2soKSwgTWFnaWNNb2NrKCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2sgPT0gbW9jaywgVHJ1ZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrID09IG1vY2ssIGJvb2wpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2sgIT0gbW9jaywgRmFsc2UpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jayAhPSBtb2NrLCBib29sKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrID09IG9iamVjdCgpLCBGYWxzZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jayAhPSBvYmplY3QoKSwgVHJ1ZSkNCg0KICAgICAgICAgICAgZGVmIGVxKHNlbGYsIG90aGVyKToNCiAgICAgICAgICAgICAgICByZXR1cm4gb3RoZXIgPT0gMw0KICAgICAgICAgICAgbW9jay5fX2VxX18gPSBlcQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKG1vY2sgPT0gMykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UobW9jayA9PSA0KQ0KDQogICAgICAgICAgICBkZWYgbmUoc2VsZiwgb3RoZXIpOg0KICAgICAgICAgICAgICAgIHJldHVybiBvdGhlciA9PSAzDQogICAgICAgICAgICBtb2NrLl9fbmVfXyA9IG5lDQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUobW9jayAhPSAzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShtb2NrICE9IDQpDQoNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgIG1vY2suX19lcV9fLnJldHVybl92YWx1ZSA9IFRydWUNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2sgPT0gMywgYm9vbCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrID09IDMsIFRydWUpDQoNCiAgICAgICAgbW9jay5fX25lX18ucmV0dXJuX3ZhbHVlID0gRmFsc2UNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2sgIT0gMywgYm9vbCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrICE9IDMsIEZhbHNlKQ0KDQoNCiAgICBkZWYgdGVzdF9sZW5fY29udGFpbnNfaXRlcihzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGVuLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGl0ZXIsIG1vY2spDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiAnZm9vJyBpbiBtb2NrKQ0KDQogICAgICAgIG1vY2suX19sZW5fXyA9IGxhbWJkYSBzOiA2DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKG1vY2spLCA2KQ0KDQogICAgICAgIG1vY2suX19jb250YWluc19fID0gbGFtYmRhIHMsIG86IG8gPT0gMw0KICAgICAgICBzZWxmLmFzc2VydFRydWUoMyBpbiBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKDYgaW4gbW9jaykNCg0KICAgICAgICBtb2NrLl9faXRlcl9fID0gbGFtYmRhIHM6IGl0ZXIoJ2Zvb2JhcmJheicpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtb2NrKSwgbGlzdCgnZm9vYmFyYmF6JykpDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljbW9jayhzZWxmKToNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQoNCiAgICAgICAgbW9jay5fX2l0ZXJfXy5yZXR1cm5fdmFsdWUgPSBpdGVyKFsxLCAyLCAzXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KG1vY2spLCBbMSwgMiwgM10pDQoNCiAgICAgICAgZ2V0YXR0cihtb2NrLCAnX19ib29sX18nKS5yZXR1cm5fdmFsdWUgPSBGYWxzZQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKGhhc2F0dHIobW9jaywgJ19fbm9uemVyb19fJykpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoYm9vbChtb2NrKSkNCg0KICAgICAgICBmb3IgZW50cnkgaW4gX21hZ2ljczoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShoYXNhdHRyKG1vY2ssIGVudHJ5KSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKG1vY2ssICdfX2ltYWdpbmVyeV9fJykpDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljX21vY2tfZXF1YWxpdHkoc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jayA9PSBvYmplY3QoKSwgYm9vbCkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2sgIT0gb2JqZWN0KCksIGJvb2wpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrID09IG9iamVjdCgpLCBGYWxzZSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrICE9IG9iamVjdCgpLCBUcnVlKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2sgPT0gbW9jaywgVHJ1ZSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrICE9IG1vY2ssIEZhbHNlKQ0KDQoNCiAgICBkZWYgdGVzdF9tYWdpY21vY2tfZGVmYXVsdHMoc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludChtb2NrKSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjb21wbGV4KG1vY2spLCAxaikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmbG9hdChtb2NrKSwgMS4wKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKG9iamVjdCgpLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihtb2NrKSwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KG1vY2spLCBbXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChoYXNoKG1vY2spLCBvYmplY3QuX19oYXNoX18obW9jaykpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKG1vY2spLCBvYmplY3QuX19zdHJfXyhtb2NrKSkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGJvb2wobW9jaykpDQoNCiAgICAgICAgIyBpbiBQeXRob24gMyBvY3QgYW5kIGhleCB1c2UgX19pbmRleF9fDQogICAgICAgICMgc28gdGhlc2UgdGVzdHMgYXJlIGZvciBfX2luZGV4X18gaW4gcHkzaw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG9jdChtb2NrKSwgJzBvMScpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaGV4KG1vY2spLCAnMHgxJykNCiAgICAgICAgIyBob3cgdG8gdGVzdCBfX3NpemVvZl9fID8NCg0KDQogICAgZGVmIHRlc3RfbWFnaWNfbWV0aG9kc19hbmRfc3BlYyhzZWxmKToNCiAgICAgICAgY2xhc3MgSXRlcmFibGUob2JqZWN0KToNCiAgICAgICAgICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlYz1JdGVyYWJsZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGxhbWJkYTogbW9jay5fX2l0ZXJfXykNCg0KICAgICAgICBtb2NrLl9faXRlcl9fID0gTW9jayhyZXR1cm5fdmFsdWU9aXRlcihbXSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtb2NrKSwgW10pDQoNCiAgICAgICAgY2xhc3MgTm9uSXRlcmFibGUob2JqZWN0KToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbW9jayA9IE1vY2soc3BlYz1Ob25JdGVyYWJsZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGxhbWJkYTogbW9jay5fX2l0ZXJfXykNCg0KICAgICAgICBkZWYgc2V0X2ludCgpOg0KICAgICAgICAgICAgbW9jay5fX2ludF9fID0gTW9jayhyZXR1cm5fdmFsdWU9aXRlcihbXSkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBzZXRfaW50KQ0KDQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soc3BlYz1JdGVyYWJsZSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KG1vY2spLCBbXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHNldF9pbnQpDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljX21ldGhvZHNfYW5kX3NwZWNfc2V0KHNlbGYpOg0KICAgICAgICBjbGFzcyBJdGVyYWJsZShvYmplY3QpOg0KICAgICAgICAgICAgZGVmIF9faXRlcl9fKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjX3NldD1JdGVyYWJsZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGxhbWJkYTogbW9jay5fX2l0ZXJfXykNCg0KICAgICAgICBtb2NrLl9faXRlcl9fID0gTW9jayhyZXR1cm5fdmFsdWU9aXRlcihbXSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtb2NrKSwgW10pDQoNCiAgICAgICAgY2xhc3MgTm9uSXRlcmFibGUob2JqZWN0KToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbW9jayA9IE1vY2soc3BlY19zZXQ9Tm9uSXRlcmFibGUpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBsYW1iZGE6IG1vY2suX19pdGVyX18pDQoNCiAgICAgICAgZGVmIHNldF9pbnQoKToNCiAgICAgICAgICAgIG1vY2suX19pbnRfXyA9IE1vY2socmV0dXJuX3ZhbHVlPWl0ZXIoW10pKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgc2V0X2ludCkNCg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKHNwZWNfc2V0PUl0ZXJhYmxlKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3QobW9jayksIFtdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgc2V0X2ludCkNCg0KDQogICAgZGVmIHRlc3Rfc2V0dGluZ191bnN1cHBvcnRlZF9tYWdpY19tZXRob2Qoc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBkZWYgc2V0X3NldGF0dHIoKToNCiAgICAgICAgICAgIG1vY2suX19zZXRhdHRyX18gPSBsYW1iZGEgc2VsZiwgbmFtZTogTm9uZQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KEF0dHJpYnV0ZUVycm9yLA0KICAgICAgICAgICAgIkF0dGVtcHRpbmcgdG8gc2V0IHVuc3VwcG9ydGVkIG1hZ2ljIG1ldGhvZCAnX19zZXRhdHRyX18nLiIsDQogICAgICAgICAgICBzZXRfc2V0YXR0cg0KICAgICAgICApDQoNCg0KICAgIGRlZiB0ZXN0X2F0dHJpYnV0ZXNfYW5kX3JldHVybl92YWx1ZShzZWxmKToNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgIGF0dHIgPSBtb2NrLmZvbw0KICAgICAgICBkZWYgX2dldF90eXBlKG9iaik6DQogICAgICAgICAgICAjIHRoZSB0eXBlIG9mIGV2ZXJ5IG1vY2sgKG9yIG1hZ2ljbW9jaykgaXMgYSBjdXN0b20gc3ViY2xhc3MNCiAgICAgICAgICAgICMgc28gdGhlIHJlYWwgdHlwZSBpcyB0aGUgc2Vjb25kIGluIHRoZSBtcm8NCiAgICAgICAgICAgIHJldHVybiB0eXBlKG9iaikuX19tcm9fX1sxXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKF9nZXRfdHlwZShhdHRyKSwgTWFnaWNNb2NrKQ0KDQogICAgICAgIHJldHVybmVkID0gbW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoX2dldF90eXBlKHJldHVybmVkKSwgTWFnaWNNb2NrKQ0KDQoNCiAgICBkZWYgdGVzdF9tYWdpY19tZXRob2RzX2FyZV9tYWdpY19tb2NrcyhzZWxmKToNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrLl9fZ2V0aXRlbV9fLCBNYWdpY01vY2spDQoNCiAgICAgICAgbW9ja1sxXVsyXS5fX2dldGl0ZW1fXy5yZXR1cm5fdmFsdWUgPSAzDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9ja1sxXVsyXVszXSwgMykNCg0KDQogICAgZGVmIHRlc3RfbWFnaWNfbWV0aG9kX3Jlc2V0X21vY2soc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBzdHIobW9jaykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKG1vY2suX19zdHJfXy5jYWxsZWQpDQogICAgICAgIG1vY2sucmVzZXRfbW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UobW9jay5fX3N0cl9fLmNhbGxlZCkNCg0KDQogICAgZGVmIHRlc3RfZGlyKHNlbGYpOg0KICAgICAgICAjIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24NCiAgICAgICAgZm9yIG1vY2sgaW4gTW9jaygpLCBNYWdpY01vY2soKToNCiAgICAgICAgICAgIGRlZiBfZGlyKHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiBbJ2ZvbyddDQogICAgICAgICAgICBtb2NrLl9fZGlyX18gPSBfZGlyDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGRpcihtb2NrKSwgWydmb28nXSkNCg0KDQogICAgQHVuaXR0ZXN0LnNraXBJZignUHlQeScgaW4gc3lzLnZlcnNpb24sICJUaGlzIGZhaWxzIGRpZmZlcmVudGx5IG9uIHB5cHkiKQ0KICAgIGRlZiB0ZXN0X2JvdW5kX21ldGhvZHMoc2VsZik6DQogICAgICAgIG0gPSBNb2NrKCkNCg0KICAgICAgICAjIFhYWFggc2hvdWxkIHRoaXMgYmUgYW4gZXhwZWN0ZWQgZmFpbHVyZSBpbnN0ZWFkPw0KDQogICAgICAgICMgdGhpcyBzZWVtcyBsaWtlIGl0IHNob3VsZCB3b3JrLCBidXQgaXMgaGFyZCB0byBkbyB3aXRob3V0IGludHJvZHVjaW5nDQogICAgICAgICMgb3RoZXIgYXBpIGluY29uc2lzdGVuY2llcy4gRmFpbHVyZSBtZXNzYWdlIGNvdWxkIGJlIGJldHRlciB0aG91Z2guDQogICAgICAgIG0uX19pdGVyX18gPSBbM10uX19pdGVyX18NCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpdGVyLCBtKQ0KDQoNCiAgICBkZWYgdGVzdF9tYWdpY19tZXRob2RfdHlwZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKE1hZ2ljTW9jayk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgZm9vID0gRm9vKCkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGZvby5fX2ludF9fLCBGb28pDQoNCg0KICAgIGRlZiB0ZXN0X2Rlc2NyaXB0b3JfZnJvbV9jbGFzcyhzZWxmKToNCiAgICAgICAgbSA9IE1hZ2ljTW9jaygpDQogICAgICAgIHR5cGUobSkuX19zdHJfXy5yZXR1cm5fdmFsdWUgPSAnZm9vJw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihtKSwgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X2l0ZXJhYmxlX2FzX2l0ZXJfcmV0dXJuX3ZhbHVlKHNlbGYpOg0KICAgICAgICBtID0gTWFnaWNNb2NrKCkNCiAgICAgICAgbS5fX2l0ZXJfXy5yZXR1cm5fdmFsdWUgPSBbMSwgMiwgM10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KG0pLCBbMSwgMiwgM10pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtKSwgWzEsIDIsIDNdKQ0KDQogICAgICAgIG0uX19pdGVyX18ucmV0dXJuX3ZhbHVlID0gaXRlcihbNCwgNSwgNl0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtKSwgWzQsIDUsIDZdKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3QobSksIFtdKQ0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/urllib/request.py':'aW1wb3J0IGFqYXgKCmNsYXNzIEZpbGVJTzoKICBkZWYgX19pbml0X18oc2VsZiwgZGF0YSk6CiAgICAgIHNlbGYuX2RhdGE9ZGF0YQoKICBkZWYgcmVhZChzZWxmKToKICAgICAgcmV0dXJuIHNlbGYuX2RhdGEKCmRlZiB1cmxvcGVuKHVybCwgZGF0YT1Ob25lLCB0aW1lb3V0PU5vbmUpOgogICAgZ2xvYmFsIHJlc3VsdAogICAgcmVzdWx0PU5vbmUKCiAgICBkZWYgb25fY29tcGxldGUocmVxKToKICAgICAgICBnbG9iYWwgcmVzdWx0CiAgICAgICAgcmVzdWx0PXJlcQoKICAgIF9hamF4PWFqYXguYWpheCgpCiAgICBfYWpheC5iaW5kKCdjb21wbGV0ZScsIG9uX2NvbXBsZXRlKQogICAgaWYgdGltZW91dCBpcyBub3QgTm9uZToKICAgICAgIF9hamF4LnNldF90aW1lb3V0KHRpbWVvdXQpCgogICAgX2FqYXgub3BlbignR0VUJywgdXJsLCBGYWxzZSkKICAgIGlmIGRhdGEgaXMgTm9uZToKICAgICAgIF9hamF4LnNlbmQoKQogICAgZWxzZToKICAgICAgIF9hamF4LnNlbmQoZGF0YSkKCiAgICByZXR1cm4gRmlsZUlPKHJlc3VsdC50ZXh0KSwgdXJsLCByZXN1bHQuaGVhZGVycwo=',
'/Lib/urllib/__init__.py':'',
'/Lib/ui/progressbar.py':'aW1wb3J0IFdpZGdldApmcm9tIGJyb3dzZXIgaW1wb3J0IGh0bWwKCmNsYXNzIFByb2dyZXNzQmFyKFdpZGdldC5XaWRnZXQpOgogIGRlZiBfX2luaXRfXyhzZWxmLCBpZD1Ob25lLCBsYWJlbD1GYWxzZSk6CiAgICAgIHNlbGYuX2Rpdl9zaGVsbD1odG1sLkRJVihDbGFzcz0idWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKQogICAgICBXaWRnZXQuV2lkZ2V0Ll9faW5pdF9fKHNlbGYsIHNlbGYuX2Rpdl9zaGVsbCwgJ3Byb2dyZXNzYmFyJywgaWQpCgogICAgICBzZWxmLl9zaG93X2xhYmVsPWxhYmVsCiAgICAgIGlmIGxhYmVsOgogICAgICAgICBzZWxmLl9sYWJlbD1odG1sLkRJVihDbGFzcz0ncHJvZ3Jlc3MtbGFiZWwnKQogICAgICAgICBzZWxmLl9kaXZfc2hlbGwgPD0gc2VsZi5fbGFiZWwKCiAgICAgIHNlbGYuX2Jhcj1odG1sLkRJVihDbGFzcz0idWktcHJvZ3Jlc3NiYXItdmFsdWUgdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItbGVmdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17J3dpZHRoJzogJzBweCd9KQogICAgICBzZWxmLl9kaXZfc2hlbGwgPD0gc2VsZi5fYmFyCgogIGRlZiBzZXRfcHJvZ3Jlc3Moc2VsZiwgcGVyY2VudCk6CiAgICAgIHNlbGYuX2Jhci5zdHlsZS53aWR0aD0nJXMlJScgJSBwZXJjZW50CiAgICAgIGlmIHNlbGYuX3Nob3dfbGFiZWw6CiAgICAgICAgIHNlbGYuX2xhYmVsLnRleHQ9JyVzJSUnICUgcGVyY2VudAo=',
'/Lib/ui/Widget.py':'aW1wb3J0IHJhbmRvbQpmcm9tIGJyb3dzZXIgaW1wb3J0IGRvYyBhcyBkb2N1bWVudCAgIyA6KCBkb2N1bWVudCBkb2Vzbid0IHdvcmsKCmRlZiBnZXRNb3VzZVBvc2l0aW9uKGUpOgogICAgaWYgZSBpcyBOb25lOgogICAgICAgZT13aW4uZXZlbnQKCiAgICBpZiBlLnBhZ2VYIG9yIGUucGFnZVk6CiAgICAgICByZXR1cm4geyd4JzogZS5wYWdlWCwgJ3knOiBlLnBhZ2VZfQoKICAgIGlmIGUuY2xpZW50WCBvciBlLmNsaWVudFk6CiAgICAgICBfcG9zeD1lLmNsaWVudFggKyBkb2MuYm9keS5zY3JvbGxMZWZ0ICsgZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0OwogICAgICAgX3Bvc3k9ZS5jbGllbnRZICsgZG9jLmJvZHkuc2Nyb2xsVG9wICsgZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgICByZXR1cm4geyd4JzogX3Bvc3gsICd5JzogX3Bvc3l9CiAgICAgIAogICAgcmV0dXJuIHsneCc6IDAsICd5JzogMH0KCmNsYXNzIFdpZGdldDoKICBkZWYgX19pbml0X18oc2VsZiwgZWxlbWVudCwgdHlwZSwgaWQ9Tm9uZSk6CiAgICAgIHNlbGYuX2VsZW1lbnQ9ZWxlbWVudAoKICAgICAgaWYgaWQgaXMgTm9uZToKICAgICAgICAgc2VsZi5fZWxlbWVudC5pZD0nJXNfJXMnICUgKHR5cGUsIGludCgxMDAwMDAqcmFuZG9tLnJhbmRvbSgpKSkKICAgICAgZWxzZToKICAgICAgICAgc2VsZi5fZWxlbWVudC5pZD1pZAoKICBkZWYgZ2V0X2lkKHNlbGYpOgogICAgICByZXR1cm4gc2VsZi5fZWxlbWVudC5pZAoKICBkZWYgYXR0YWNoKHNlbGYsIGVsZW1lbnRfaWQpOgogICAgICAiIiIgYXBwZW5kIHRoaXMgRE9NIGNvbXBvbmVudCB0byBET00gZWxlbWVudCBlbGVtZW50X2lkIiIiCiAgICAgICNkb2N1bWVudFtlbGVtZW50X2lkXSA8PSBzZWxmLl9lbGVtZW50ICAgI3RoaXMgZG9lc24ndCB3b3JrIDooCiAgICAgICNkb2MgaXMgYWN0dWFsbHkgdGhlIGdsb2JhbCAnZG9jJyBub3QgdGhlIG9uZSB3ZSBpbXBvcnRlZCBmcm9tIGJyb3dzZXIgOigKICAgICAgZG9jW2VsZW1lbnRfaWRdIDw9IHNlbGYuX2VsZW1lbnQKCiAgZGVmIHNob3coc2VsZik6CiAgICAgIHNlbGYuX2VsZW1lbnQuZGlzcGxheT0nYmxvY2snCgogIGRlZiBoaWRlKHNlbGYpOgogICAgICBzZWxmLl9lbGVtZW50LmRpc3BsYXk9J25vbmUnCgpjbGFzcyBEcmFnZ2FibGVXaWRnZXQoV2lkZ2V0KToKICBkZWYgX19pbml0X18oc2VsZiwgZWxlbWVudCwgdHlwZSwgaWQ9Tm9uZSk6CiAgICAgIFdpZGdldC5fX2luaXRfXyhzZWxmLCBlbGVtZW50LCB0eXBlLCBpZCkKCiAgICAgIGRlZiBkcmFnKGUpOgogICAgICAgICAgc2VsZi5fZWxlbWVudC5zdHlsZS50b3A9JyVzcHgnICUgKGUuY2xpZW50WSAtIHNlbGYuX2RlbHRhWSkKICAgICAgICAgIHNlbGYuX2VsZW1lbnQuc3R5bGUubGVmdD0nJXNweCcgJSAoZS5jbGllbnRYIC0gc2VsZi5fZGVsdGFYKQoKICAgICAgZGVmIG1vdXNlRG93bihlKToKICAgICAgICAgIHNlbGYuX2VsZW1lbnQuc3R5bGUucG9zaXRpb249J2Fic29sdXRlJwogICAgICAgICAgc2VsZi5fZGVsdGFYPWUuY2xpZW50WCAtIHNlbGYuX2VsZW1lbnQub2Zmc2V0TGVmdAogICAgICAgICAgc2VsZi5fZGVsdGFZPWUuY2xpZW50WSAtIHNlbGYuX2VsZW1lbnQub2Zmc2V0VG9wCiAgICAgICAgICBkb2MuYmluZCgnbW91c2Vtb3ZlJywgZHJhZykKCiAgICAgIGRlZiBtb3VzZVVwKGUpOgogICAgICAgICAgZG9jLnVuYmluZCgnbW91c2Vtb3ZlJykKCiAgICAgIHNlbGYuX2VsZW1lbnQuYmluZCgnbW91c2Vkb3duJywgbW91c2VEb3duKQogICAgICBzZWxmLl9lbGVtZW50LmJpbmQoJ21vdXNldXAnLCBtb3VzZVVwKQo=',
'/Lib/ui/slider.py':'aW1wb3J0IFdpZGdldApmcm9tIGJyb3dzZXIgaW1wb3J0IGh0bWwKCmNsYXNzIFNsaWRlcihXaWRnZXQuV2lkZ2V0KToKICBkZWYgX19pbml0X18oc2VsZiwgaWQ9Tm9uZSwgZG9jdW1lbnQ9ZG9jLCBsYWJlbD1GYWxzZSk6CiAgICAgIHNlbGYuX2Rpdl9zaGVsbD1odG1sLkRJVihDbGFzcz0idWktc2xpZGVyIHVpLXNsaWRlci1ob3Jpem9udGFsIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIikKCiAgICAgIFdpZGdldC5XaWRnZXQuX19pbml0X18oc2VsZiwgc2VsZi5fZGl2X3NoZWxsLCAnc2xpZGVyJywgaWQpCgogICAgICBzZWxmLl9oYW5kbGU9aHRtbC5BKENsYXNzPSJ1aS1zbGlkZXItaGFuZGxlIHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgSHJlZj0nIycsIHN0eWxlPXsnbGVmdCc6ICcwcHgnfSkKICAgICAgc2VsZi5fdmFsdWU9MAogICAgICBzZWxmLl9pc01vdXNlRG93bj1GYWxzZQoKICAgICAgZGVmIHN0YXJ0U2xpZGUoZSk6CiAgICAgICAgICBzZWxmLl9pc01vdXNlRG93bj1UcnVlCiAgICAgICAgICBzZWxmLl91cHBlckJvdW5kID0gc2VsZi5fZGl2X3NoZWxsLm9mZnNldFdpZHRoIC0gc2VsZi5faGFuZGxlLm9mZnNldFdpZHRoCgogICAgICAgICAgcG9zID0gV2lkZ2V0LmdldE1vdXNlUG9zaXRpb24oZSkKICAgICAgICAgIHNlbGYuX3N0YXJ0TW91c2VYPXBvc1sneCddCgogICAgICAgICAgc2VsZi5fbGFzdEVsZW1lbnRMZWZ0ID0gcGFyc2VJbnQoc2VsZi5faGFuZGxlLmVsdC5zdHlsZS5sZWZ0KSAjLSBwYXJzZUludChzZWxmLl9kaXZfc2hlbGwuZWx0LnN0eWxlLmxlZnQpCiAgICAgICAgICAjcHJpbnQoc2VsZi5fdXBwZXJCb3VuZCkKICAgICAgICAgIHVwZGF0ZVBvc2l0aW9uKGUpCgogICAgICBkZWYgdXBkYXRlUG9zaXRpb24oZSk6CiAgICAgICAgICBwb3MgPSBXaWRnZXQuZ2V0TW91c2VQb3NpdGlvbihlKQogICAgICAgICAgX25ld1BvcyA9IHNlbGYuX2xhc3RFbGVtZW50TGVmdCArIHBvc1sneCddIC0gc2VsZi5fc3RhcnRNb3VzZVgKICAgICAgICAgIAogICAgICAgICAgX25ld1BvcyA9IG1heCgwLCBfbmV3UG9zKQogICAgICAgICAgX25ld1BvcyA9IG1pbihfbmV3UG9zLCBzZWxmLl91cHBlckJvdW5kKQoKICAgICAgICAgICNwcmludChfbmV3UG9zKQogICAgICAgICAgc2VsZi5faGFuZGxlLmVsdC5zdHlsZS5sZWZ0ID0gJyVzcHgnICUgX25ld1BvcwogICAgICAgICAgc2VsZi5fbGFzdEVsZW1lbnRMZWZ0ID0gX25ld1BvcwoKICAgICAgZGVmIG1vdmluZyhlKToKICAgICAgICAgIGlmIHNlbGYuX2lzTW91c2VEb3duOgogICAgICAgICAgICAgdXBkYXRlUG9zaXRpb24oZSkKCiAgICAgIGRlZiBkcm9wQ2FsbGJhY2soZSk6CiAgICAgICAgICBzZWxmLl9pc01vdXNlRG93bj1GYWxzZQogICAgICAgICAgc2VsZi5faGFuZGxlLnVuYmluZCgnbW91c2Vtb3ZlJywgbW92aW5nKQoKCiAgICAgIHNlbGYuX2hhbmRsZS5iaW5kKCdtb3VzZW1vdmUnLCBtb3ZpbmcpCiAgICAgIHNlbGYuX2hhbmRsZS5iaW5kKCdtb3VzZXVwJywgZHJvcENhbGxiYWNrKQogICAgICAjc2VsZi5faGFuZGxlLmJpbmQoJ21vdXNlb3V0JywgZHJvcENhbGxiYWNrKQogICAgICBzZWxmLl9oYW5kbGUuYmluZCgnbW91c2Vkb3duJywgc3RhcnRTbGlkZSkKCiAgICAgIGRlZiBtb3VzZW92ZXIoZSk6CiAgICAgICAgICBfY2xhc3M9c2VsZi5faGFuZGxlLmdldEF0dHJpYnV0ZSgnY2xhc3MnKQogICAgICAgICAgc2VsZi5faGFuZGxlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnJXMgJXMnICUgKF9jbGFzcywgJ3VpLXN0YXRlLWhvdmVyJykpCgogICAgICBkZWYgbW91c2VvdXQoZSk6CiAgICAgICAgICBzZWxmLl9pc01vdXNlRG93bj1GYWxzZQogICAgICAgICAgX2NsYXNzPXNlbGYuX2hhbmRsZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykKICAgICAgICAgIHNlbGYuX2hhbmRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgX2NsYXNzLnJlcGxhY2UoJ3VpLXN0YXRlLWhvdmVyJywgJycpKQoKICAgICAgc2VsZi5faGFuZGxlLmJpbmQoJ21vdXNlb3ZlcicsIG1vdXNlb3ZlcikKICAgICAgc2VsZi5faGFuZGxlLmJpbmQoJ21vdXNlb3V0JywgbW91c2VvdXQpCgogICAgICBzZWxmLl9kaXZfc2hlbGwgPD0gc2VsZi5faGFuZGxlCgogIGRlZiBnZXRfdmFsdWUoc2VsZik6CiAgICAgIHJldHVybiBzZWxmLl92YWx1ZQoKICAjZGVmIHNldF92YWx1ZShzZWxmLCB2YWx1ZSk6CiAgIyAgICBzZWxmLl92YWx1ZT12YWx1ZQogICMgICBzZWxmLl9oYW5kbGUuc3R5bGUubGVmdD0nJXNweCcgJSB2YWx1ZQo=',
'/Lib/ui/__init__.py':'ZnJvbSBicm93c2VyIGltcG9ydCBodG1sLCBkb2MgYXMgZG9jdW1lbnQKZnJvbSBEaWFsb2cgaW1wb3J0ICoKZnJvbSBQcm9ncmVzc0JhciBpbXBvcnQgKgpmcm9tIFNsaWRlciBpbXBvcnQgKgoKZGVmIGFkZF9zdHlsZXNoZWV0KCk6CiAgICBfbGluaz1odG1sLkxJTksoSHJlZj0nL3NyYy9MaWIvdWkvY3NzL3Ntb290aG5lc3MvanF1ZXJ5LXVpLTEuMTAuMy5jdXN0b20ubWluLmNzcycpCiAgICBfbGluay5yZWw9J3N0eWxlc2hlZXQnCgogICAgZG9jIDw9IF9saW5rICAgICAjIGRvY3VtZW50IGRvZXNuJ3Qgd29yayBoZXJlLi4gOiggbXVzdCB1c2UgZG9jIAo=',
'/Lib/ui/dialog.py':'aW1wb3J0IFdpZGdldApmcm9tIGJyb3dzZXIgaW1wb3J0IGh0bWwsIGRvYyBhcyBkb2N1bWVudAoKY2xhc3MgRGlhbG9nKFdpZGdldC5EcmFnZ2FibGVXaWRnZXQpOgogIGRlZiBfX2luaXRfXyhzZWxmLCBpZD1Ob25lKToKICAgICAgc2VsZi5fZGl2X3NoZWxsPWh0bWwuRElWKAogICAgICAgICBDbGFzcz0idWktZGlhbG9nIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLWZyb250IHVpLWRyYWdnYWJsZSB1aS1yZXNpemFibGUiLAogICAgICAgICBzdHlsZT17J3Bvc2l0aW9uJzogJ2Fic29sdXRlJywgJ2hlaWdodCc6ICdhdXRvJywgJ3dpZHRoJzogJzMwMHB4JywKICAgICAgICAgICAgICAgICd0b3AnOiAnOThweCcsICdsZWZ0JzogJzE0MHB4JywgJ2Rpc3BsYXknOiAnYmxvY2snfSkKCiAgICAgIFdpZGdldC5EcmFnZ2FibGVXaWRnZXQuX19pbml0X18oc2VsZiwgc2VsZi5fZGl2X3NoZWxsLCAnZGlhbG9nJywgaWQpCgogICAgICBfZGl2X3RpdGxlYmFyPWh0bWwuRElWKElkPSJ0aXRsZWJhciIsCiAgICAgICAgICAgQ2xhc3M9InVpLWRpYWxvZy10aXRsZWJhciB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwgdWktaGVscGVyLWNsZWFyZml4IikKICAgICAgc2VsZi5fZGl2X3NoZWxsIDw9IF9kaXZfdGl0bGViYXIKCiAgICAgIHNlbGYuX2Rpdl90aXRsZT1odG1sLlNQQU4oSWQ9InRpdGxlIiwgQ2xhc3M9InVpLWRpYWxvZy10aXRsZSIpCiAgICAgICAgCiAgICAgIF9kaXZfdGl0bGViYXIgPD0gc2VsZi5fZGl2X3RpdGxlCgogICAgICBzZWxmLl90aXRsZV9idXR0b249aHRtbC5CVVRUT04oVGl0bGU9ImNsb3NlIiwKICAgICAgICAgICAgQ2xhc3M9InVpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIHVpLWJ1dHRvbi1pY29uLW9ubHkgdWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIikKCiAgICAgIGRlZiBkaWFsb2dfY2xvc2UoZSk6CiAgICAgICAgICAjZGVsIGRvY3VtZW50W3NlbGYuX2Rpdl9zaGVsbC5pZF0KICAgICAgICAgIGRlbCBkb2Nbc2VsZi5fZGl2X3NoZWxsLmlkXQoKICAgICAgc2VsZi5fdGl0bGVfYnV0dG9uLmJpbmQoJ2NsaWNrJywgZGlhbG9nX2Nsb3NlKQogICAgICBfc3Bhbj1odG1sLlNQQU4oQ2xhc3M9InVpLWJ1dHRvbi1pY29uLXByaW1hcnkgdWktaWNvbiB1aS1pY29uLWNsb3NldGhpY2siKQogICAgICBzZWxmLl90aXRsZV9idXR0b24gPD0gX3NwYW4KCiAgICAgIF9zcGFuPWh0bWwuU1BBTignY2xvc2UnLCBDbGFzcz0idWktYnV0dG9uLXRleHQiKQogICAgICBzZWxmLl90aXRsZV9idXR0b24gPD0gX3NwYW4KCiAgICAgIF9kaXZfdGl0bGViYXIgPD0gc2VsZi5fdGl0bGVfYnV0dG9uCgogICAgICBzZWxmLl9kaXZfZGlhbG9nPWh0bWwuRElWKENsYXNzPSJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudCIsCiAgICAgICAgICAgc3R5bGU9eyd3aWR0aCc6ICdhdXRvJywgJ21pbi1oZWlnaHQnOiAnMTA1cHgnLCAKICAgICAgICAgICAgICAgICAgJ21heC1oZWlnaHQnOiAnbm9uZScsICdoZWlnaHQnOiAnYXV0byd9KQoKICAgICAgc2VsZi5fZGl2X3NoZWxsIDw9IHNlbGYuX2Rpdl9kaWFsb2cKCiAgICAgIGZvciBfaSBpbiBbJ24nLCAnZScsICdzJywgJ3cnLCAnc2UnLCAnc3cnLCAnbmUnLCAnbncnXToKICAgICAgICAgIGlmIF9pID09ICdzZSc6CiAgICAgICAgICAgICBfY2xhc3M9InVpLXJlc2l6YWJsZS1oYW5kbGUgdWktcmVzaXphYmxlLSVzIHVpLWljb24gdWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtJXMiICUgKF9pLCBfaSkKICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICBfY2xhc3M9InVpLXJlc2l6YWJsZS1oYW5kbGUgdWktcmVzaXphYmxlLSVzIiAlIF9pCgogICAgICAgICAgc2VsZi5fZGl2X3NoZWxsIDw9IGh0bWwuRElWKENsYXNzPV9jbGFzcywgc3R5bGU9eyd6LWluZGV4JzogJzkwJ30pCgogICAgICBkb2MgPD0gc2VsZi5fZGl2X3NoZWxsCgogIGRlZiBzZXRfdGl0bGUoc2VsZiwgdGl0bGUpOgogICAgICBzZWxmLl9kaXZfdGl0bGUuc2V0X3RleHQodGl0bGUpCgogIGRlZiBzZXRfYm9keShzZWxmLCBib2R5KToKICAgICAgc2VsZi5fZGl2X2RpYWxvZy5zZXRfaHRtbChib2R5KQo=',
'/Lib/http/cookies.py':'CiMKCiMjIyMKIyBDb3B5cmlnaHQgMjAwMCBieSBUaW1vdGh5IE8nTWFsbGV5IDx0aW1vQGFsdW0ubWl0LmVkdT4KIwojICAgICAgICAgICAgICAgIEFsbCBSaWdodHMgUmVzZXJ2ZWQKIwojIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZCBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUKIyBhbmQgaXRzIGRvY3VtZW50YXRpb24gZm9yIGFueSBwdXJwb3NlIGFuZCB3aXRob3V0IGZlZSBpcyBoZXJlYnkKIyBncmFudGVkLCBwcm92aWRlZCB0aGF0IHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFwcGVhciBpbiBhbGwKIyBjb3BpZXMgYW5kIHRoYXQgYm90aCB0aGF0IGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbgojIG5vdGljZSBhcHBlYXIgaW4gc3VwcG9ydGluZyBkb2N1bWVudGF0aW9uLCBhbmQgdGhhdCB0aGUgbmFtZSBvZgojIFRpbW90aHkgTydNYWxsZXkgIG5vdCBiZSB1c2VkIGluIGFkdmVydGlzaW5nIG9yIHB1YmxpY2l0eQojIHBlcnRhaW5pbmcgdG8gZGlzdHJpYnV0aW9uIG9mIHRoZSBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljLCB3cml0dGVuCiMgcHJpb3IgcGVybWlzc2lvbi4KIwojIFRpbW90aHkgTydNYWxsZXkgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEggUkVHQVJEIFRPIFRISVMKIyBTT0ZUV0FSRSwgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZCiMgQU5EIEZJVE5FU1MsIElOIE5PIEVWRU5UIFNIQUxMIFRpbW90aHkgTydNYWxsZXkgQkUgTElBQkxFIEZPUgojIEFOWSBTUEVDSUFMLCBJTkRJUkVDVCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMKIyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsCiMgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1IgT1RIRVIgVE9SVElPVVMKIyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SCiMgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KIwojIyMjCiMKIyBJZDogQ29va2llLnB5LHYgMi4yOSAyMDAwLzA4LzIzIDA1OjI4OjQ5IHRpbW8gRXhwCiMgICBieSBUaW1vdGh5IE8nTWFsbGV5IDx0aW1vQGFsdW0ubWl0LmVkdT4KIwojICBDb29raWUucHkgaXMgYSBQeXRob24gbW9kdWxlIGZvciB0aGUgaGFuZGxpbmcgb2YgSFRUUAojICBjb29raWVzIGFzIGEgUHl0aG9uIGRpY3Rpb25hcnkuICBTZWUgUkZDIDIxMDkgZm9yIG1vcmUKIyAgaW5mb3JtYXRpb24gb24gY29va2llcy4KIwojICBUaGUgb3JpZ2luYWwgaWRlYSB0byB0cmVhdCBDb29raWVzIGFzIGEgZGljdGlvbmFyeSBjYW1lIGZyb20KIyAgRGF2ZSBNaXRjaGVsbCAoZGF2ZW1AbWFnbmV0LmNvbSkgaW4gMTk5NSwgd2hlbiBoZSByZWxlYXNlZCB0aGUKIyAgZmlyc3QgdmVyc2lvbiBvZiBuc2Nvb2tpZS5weS4KIwojIyMjCgpyIiIiCkhlcmUncyBhIHNhbXBsZSBzZXNzaW9uIHRvIHNob3cgaG93IHRvIHVzZSB0aGlzIG1vZHVsZS4KQXQgdGhlIG1vbWVudCwgdGhpcyBpcyB0aGUgb25seSBkb2N1bWVudGF0aW9uLgoKVGhlIEJhc2ljcwotLS0tLS0tLS0tCgpJbXBvcnRpbmcgaXMgZWFzeS4uLgoKICAgPj4+IGZyb20gaHR0cCBpbXBvcnQgY29va2llcwoKTW9zdCBvZiB0aGUgdGltZSB5b3Ugc3RhcnQgYnkgY3JlYXRpbmcgYSBjb29raWUuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKCk9uY2UgeW91J3ZlIGNyZWF0ZWQgeW91ciBDb29raWUsIHlvdSBjYW4gYWRkIHZhbHVlcyBqdXN0IGFzIGlmIGl0IHdlcmUKYSBkaWN0aW9uYXJ5LgoKICAgPj4+IEMgPSBjb29raWVzLlNpbXBsZUNvb2tpZSgpCiAgID4+PiBDWyJmaWciXSA9ICJuZXd0b24iCiAgID4+PiBDWyJzdWdhciJdID0gIndhZmVyIgogICA+Pj4gQy5vdXRwdXQoKQogICAnU2V0LUNvb2tpZTogZmlnPW5ld3RvblxyXG5TZXQtQ29va2llOiBzdWdhcj13YWZlcicKCk5vdGljZSB0aGF0IHRoZSBwcmludGFibGUgcmVwcmVzZW50YXRpb24gb2YgYSBDb29raWUgaXMgdGhlCmFwcHJvcHJpYXRlIGZvcm1hdCBmb3IgYSBTZXQtQ29va2llOiBoZWFkZXIuICBUaGlzIGlzIHRoZQpkZWZhdWx0IGJlaGF2aW9yLiAgWW91IGNhbiBjaGFuZ2UgdGhlIGhlYWRlciBhbmQgcHJpbnRlZAphdHRyaWJ1dGVzIGJ5IHVzaW5nIHRoZSAub3V0cHV0KCkgZnVuY3Rpb24KCiAgID4+PiBDID0gY29va2llcy5TaW1wbGVDb29raWUoKQogICA+Pj4gQ1sicm9ja3kiXSA9ICJyb2FkIgogICA+Pj4gQ1sicm9ja3kiXVsicGF0aCJdID0gIi9jb29raWUiCiAgID4+PiBwcmludChDLm91dHB1dChoZWFkZXI9IkNvb2tpZToiKSkKICAgQ29va2llOiByb2NreT1yb2FkOyBQYXRoPS9jb29raWUKICAgPj4+IHByaW50KEMub3V0cHV0KGF0dHJzPVtdLCBoZWFkZXI9IkNvb2tpZToiKSkKICAgQ29va2llOiByb2NreT1yb2FkCgpUaGUgbG9hZCgpIG1ldGhvZCBvZiBhIENvb2tpZSBleHRyYWN0cyBjb29raWVzIGZyb20gYSBzdHJpbmcuICBJbiBhCkNHSSBzY3JpcHQsIHlvdSB3b3VsZCB1c2UgdGhpcyBtZXRob2QgdG8gZXh0cmFjdCB0aGUgY29va2llcyBmcm9tIHRoZQpIVFRQX0NPT0tJRSBlbnZpcm9ubWVudCB2YXJpYWJsZS4KCiAgID4+PiBDID0gY29va2llcy5TaW1wbGVDb29raWUoKQogICA+Pj4gQy5sb2FkKCJjaGlwcz1haG95OyB2aWVubmE9ZmluZ2VyIikKICAgPj4+IEMub3V0cHV0KCkKICAgJ1NldC1Db29raWU6IGNoaXBzPWFob3lcclxuU2V0LUNvb2tpZTogdmllbm5hPWZpbmdlcicKClRoZSBsb2FkKCkgbWV0aG9kIGlzIGRhcm4tdG9vdGluIHNtYXJ0IGFib3V0IGlkZW50aWZ5aW5nIGNvb2tpZXMKd2l0aGluIGEgc3RyaW5nLiAgRXNjYXBlZCBxdW90YXRpb24gbWFya3MsIG5lc3RlZCBzZW1pY29sb25zLCBhbmQgb3RoZXIKc3VjaCB0cmlja2VyaWVzIGRvIG5vdCBjb25mdXNlIGl0LgoKICAgPj4+IEMgPSBjb29raWVzLlNpbXBsZUNvb2tpZSgpCiAgID4+PiBDLmxvYWQoJ2tlZWJsZXI9IkU9ZXZlcnlib2R5OyBMPVxcIkxvdmVzXFwiOyBmdWRnZT1cXDAxMjsiOycpCiAgID4+PiBwcmludChDKQogICBTZXQtQ29va2llOiBrZWVibGVyPSJFPWV2ZXJ5Ym9keTsgTD1cIkxvdmVzXCI7IGZ1ZGdlPVwwMTI7IgoKRWFjaCBlbGVtZW50IG9mIHRoZSBDb29raWUgYWxzbyBzdXBwb3J0cyBhbGwgb2YgdGhlIFJGQyAyMTA5CkNvb2tpZSBhdHRyaWJ1dGVzLiAgSGVyZSdzIGFuIGV4YW1wbGUgd2hpY2ggc2V0cyB0aGUgUGF0aAphdHRyaWJ1dGUuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKICAgPj4+IENbIm9yZW8iXSA9ICJkb3VibGVzdHVmZiIKICAgPj4+IENbIm9yZW8iXVsicGF0aCJdID0gIi8iCiAgID4+PiBwcmludChDKQogICBTZXQtQ29va2llOiBvcmVvPWRvdWJsZXN0dWZmOyBQYXRoPS8KCkVhY2ggZGljdGlvbmFyeSBlbGVtZW50IGhhcyBhICd2YWx1ZScgYXR0cmlidXRlLCB3aGljaCBnaXZlcyB5b3UKYmFjayB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKICAgPj4+IENbInR3aXgiXSA9ICJub25lIGZvciB5b3UiCiAgID4+PiBDWyJ0d2l4Il0udmFsdWUKICAgJ25vbmUgZm9yIHlvdScKClRoZSBTaW1wbGVDb29raWUgZXhwZWN0cyB0aGF0IGFsbCB2YWx1ZXMgc2hvdWxkIGJlIHN0YW5kYXJkIHN0cmluZ3MuCkp1c3QgdG8gYmUgc3VyZSwgU2ltcGxlQ29va2llIGludm9rZXMgdGhlIHN0cigpIGJ1aWx0aW4gdG8gY29udmVydAp0aGUgdmFsdWUgdG8gYSBzdHJpbmcsIHdoZW4gdGhlIHZhbHVlcyBhcmUgc2V0IGRpY3Rpb25hcnktc3R5bGUuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKICAgPj4+IENbIm51bWJlciJdID0gNwogICA+Pj4gQ1sic3RyaW5nIl0gPSAic2V2ZW4iCiAgID4+PiBDWyJudW1iZXIiXS52YWx1ZQogICAnNycKICAgPj4+IENbInN0cmluZyJdLnZhbHVlCiAgICdzZXZlbicKICAgPj4+IEMub3V0cHV0KCkKICAgJ1NldC1Db29raWU6IG51bWJlcj03XHJcblNldC1Db29raWU6IHN0cmluZz1zZXZlbicKCkZpbmlzLgoiIiIKCiMKIyBJbXBvcnQgb3VyIHJlcXVpcmVkIG1vZHVsZXMKIwppbXBvcnQgcmUKaW1wb3J0IHN0cmluZwoKX19hbGxfXyA9IFsiQ29va2llRXJyb3IiLCAiQmFzZUNvb2tpZSIsICJTaW1wbGVDb29raWUiXQoKX251bGxqb2luID0gJycuam9pbgpfc2VtaXNwYWNlam9pbiA9ICc7ICcuam9pbgpfc3BhY2Vqb2luID0gJyAnLmpvaW4KCiMKIyBEZWZpbmUgYW4gZXhjZXB0aW9uIHZpc2libGUgdG8gRXh0ZXJuYWwgbW9kdWxlcwojCmNsYXNzIENvb2tpZUVycm9yKEV4Y2VwdGlvbik6CiAgICBwYXNzCgoKIyBUaGVzZSBxdW90aW5nIHJvdXRpbmVzIGNvbmZvcm0gdG8gdGhlIFJGQzIxMDkgc3BlY2lmaWNhdGlvbiwgd2hpY2ggaW4KIyB0dXJuIHJlZmVyZW5jZXMgdGhlIGNoYXJhY3RlciBkZWZpbml0aW9ucyBmcm9tIFJGQzIwNjguICBUaGV5IHByb3ZpZGUKIyBhIHR3by13YXkgcXVvdGluZyBhbGdvcml0aG0uICBBbnkgbm9uLXRleHQgY2hhcmFjdGVyIGlzIHRyYW5zbGF0ZWQKIyBpbnRvIGEgNCBjaGFyYWN0ZXIgc2VxdWVuY2U6IGEgZm9yd2FyZC1zbGFzaCBmb2xsb3dlZCBieSB0aGUKIyB0aHJlZS1kaWdpdCBvY3RhbCBlcXVpdmFsZW50IG9mIHRoZSBjaGFyYWN0ZXIuICBBbnkgJ1wnIG9yICciJyBpcwojIHF1b3RlZCB3aXRoIGEgcHJlY2VlZGluZyAnXCcgc2xhc2guCiMKIyBUaGVzZSBhcmUgdGFrZW4gZnJvbSBSRkMyMDY4IGFuZCBSRkMyMTA5LgojICAgICAgIF9MZWdhbENoYXJzICAgICAgIGlzIHRoZSBsaXN0IG9mIGNoYXJzIHdoaWNoIGRvbid0IHJlcXVpcmUgIidzCiMgICAgICAgX1RyYW5zbGF0b3IgICAgICAgaGFzaC10YWJsZSBmb3IgZmFzdCBxdW90aW5nCiMKX0xlZ2FsQ2hhcnMgICAgICAgPSBzdHJpbmcuYXNjaWlfbGV0dGVycyArIHN0cmluZy5kaWdpdHMgKyAiISMkJSYnKistLl5fYHx+OiIKX1RyYW5zbGF0b3IgICAgICAgPSB7CiAgICAnXDAwMCcgOiAnXFwwMDAnLCAgJ1wwMDEnIDogJ1xcMDAxJywgICdcMDAyJyA6ICdcXDAwMicsCiAgICAnXDAwMycgOiAnXFwwMDMnLCAgJ1wwMDQnIDogJ1xcMDA0JywgICdcMDA1JyA6ICdcXDAwNScsCiAgICAnXDAwNicgOiAnXFwwMDYnLCAgJ1wwMDcnIDogJ1xcMDA3JywgICdcMDEwJyA6ICdcXDAxMCcsCiAgICAnXDAxMScgOiAnXFwwMTEnLCAgJ1wwMTInIDogJ1xcMDEyJywgICdcMDEzJyA6ICdcXDAxMycsCiAgICAnXDAxNCcgOiAnXFwwMTQnLCAgJ1wwMTUnIDogJ1xcMDE1JywgICdcMDE2JyA6ICdcXDAxNicsCiAgICAnXDAxNycgOiAnXFwwMTcnLCAgJ1wwMjAnIDogJ1xcMDIwJywgICdcMDIxJyA6ICdcXDAyMScsCiAgICAnXDAyMicgOiAnXFwwMjInLCAgJ1wwMjMnIDogJ1xcMDIzJywgICdcMDI0JyA6ICdcXDAyNCcsCiAgICAnXDAyNScgOiAnXFwwMjUnLCAgJ1wwMjYnIDogJ1xcMDI2JywgICdcMDI3JyA6ICdcXDAyNycsCiAgICAnXDAzMCcgOiAnXFwwMzAnLCAgJ1wwMzEnIDogJ1xcMDMxJywgICdcMDMyJyA6ICdcXDAzMicsCiAgICAnXDAzMycgOiAnXFwwMzMnLCAgJ1wwMzQnIDogJ1xcMDM0JywgICdcMDM1JyA6ICdcXDAzNScsCiAgICAnXDAzNicgOiAnXFwwMzYnLCAgJ1wwMzcnIDogJ1xcMDM3JywKCiAgICAjIEJlY2F1c2Ugb2YgdGhlIHdheSBicm93c2VycyByZWFsbHkgaGFuZGxlIGNvb2tpZXMgKGFzIG9wcG9zZWQKICAgICMgdG8gd2hhdCB0aGUgUkZDIHNheXMpIHdlIGFsc28gZW5jb2RlICwgYW5kIDsKCiAgICAnLCcgOiAnXFwwNTQnLCAnOycgOiAnXFwwNzMnLAoKICAgICciJyA6ICdcXCInLCAgICAgICAnXFwnIDogJ1xcXFwnLAoKICAgICdcMTc3JyA6ICdcXDE3NycsICAnXDIwMCcgOiAnXFwyMDAnLCAgJ1wyMDEnIDogJ1xcMjAxJywKICAgICdcMjAyJyA6ICdcXDIwMicsICAnXDIwMycgOiAnXFwyMDMnLCAgJ1wyMDQnIDogJ1xcMjA0JywKICAgICdcMjA1JyA6ICdcXDIwNScsICAnXDIwNicgOiAnXFwyMDYnLCAgJ1wyMDcnIDogJ1xcMjA3JywKICAgICdcMjEwJyA6ICdcXDIxMCcsICAnXDIxMScgOiAnXFwyMTEnLCAgJ1wyMTInIDogJ1xcMjEyJywKICAgICdcMjEzJyA6ICdcXDIxMycsICAnXDIxNCcgOiAnXFwyMTQnLCAgJ1wyMTUnIDogJ1xcMjE1JywKICAgICdcMjE2JyA6ICdcXDIxNicsICAnXDIxNycgOiAnXFwyMTcnLCAgJ1wyMjAnIDogJ1xcMjIwJywKICAgICdcMjIxJyA6ICdcXDIyMScsICAnXDIyMicgOiAnXFwyMjInLCAgJ1wyMjMnIDogJ1xcMjIzJywKICAgICdcMjI0JyA6ICdcXDIyNCcsICAnXDIyNScgOiAnXFwyMjUnLCAgJ1wyMjYnIDogJ1xcMjI2JywKICAgICdcMjI3JyA6ICdcXDIyNycsICAnXDIzMCcgOiAnXFwyMzAnLCAgJ1wyMzEnIDogJ1xcMjMxJywKICAgICdcMjMyJyA6ICdcXDIzMicsICAnXDIzMycgOiAnXFwyMzMnLCAgJ1wyMzQnIDogJ1xcMjM0JywKICAgICdcMjM1JyA6ICdcXDIzNScsICAnXDIzNicgOiAnXFwyMzYnLCAgJ1wyMzcnIDogJ1xcMjM3JywKICAgICdcMjQwJyA6ICdcXDI0MCcsICAnXDI0MScgOiAnXFwyNDEnLCAgJ1wyNDInIDogJ1xcMjQyJywKICAgICdcMjQzJyA6ICdcXDI0MycsICAnXDI0NCcgOiAnXFwyNDQnLCAgJ1wyNDUnIDogJ1xcMjQ1JywKICAgICdcMjQ2JyA6ICdcXDI0NicsICAnXDI0NycgOiAnXFwyNDcnLCAgJ1wyNTAnIDogJ1xcMjUwJywKICAgICdcMjUxJyA6ICdcXDI1MScsICAnXDI1MicgOiAnXFwyNTInLCAgJ1wyNTMnIDogJ1xcMjUzJywKICAgICdcMjU0JyA6ICdcXDI1NCcsICAnXDI1NScgOiAnXFwyNTUnLCAgJ1wyNTYnIDogJ1xcMjU2JywKICAgICdcMjU3JyA6ICdcXDI1NycsICAnXDI2MCcgOiAnXFwyNjAnLCAgJ1wyNjEnIDogJ1xcMjYxJywKICAgICdcMjYyJyA6ICdcXDI2MicsICAnXDI2MycgOiAnXFwyNjMnLCAgJ1wyNjQnIDogJ1xcMjY0JywKICAgICdcMjY1JyA6ICdcXDI2NScsICAnXDI2NicgOiAnXFwyNjYnLCAgJ1wyNjcnIDogJ1xcMjY3JywKICAgICdcMjcwJyA6ICdcXDI3MCcsICAnXDI3MScgOiAnXFwyNzEnLCAgJ1wyNzInIDogJ1xcMjcyJywKICAgICdcMjczJyA6ICdcXDI3MycsICAnXDI3NCcgOiAnXFwyNzQnLCAgJ1wyNzUnIDogJ1xcMjc1JywKICAgICdcMjc2JyA6ICdcXDI3NicsICAnXDI3NycgOiAnXFwyNzcnLCAgJ1wzMDAnIDogJ1xcMzAwJywKICAgICdcMzAxJyA6ICdcXDMwMScsICAnXDMwMicgOiAnXFwzMDInLCAgJ1wzMDMnIDogJ1xcMzAzJywKICAgICdcMzA0JyA6ICdcXDMwNCcsICAnXDMwNScgOiAnXFwzMDUnLCAgJ1wzMDYnIDogJ1xcMzA2JywKICAgICdcMzA3JyA6ICdcXDMwNycsICAnXDMxMCcgOiAnXFwzMTAnLCAgJ1wzMTEnIDogJ1xcMzExJywKICAgICdcMzEyJyA6ICdcXDMxMicsICAnXDMxMycgOiAnXFwzMTMnLCAgJ1wzMTQnIDogJ1xcMzE0JywKICAgICdcMzE1JyA6ICdcXDMxNScsICAnXDMxNicgOiAnXFwzMTYnLCAgJ1wzMTcnIDogJ1xcMzE3JywKICAgICdcMzIwJyA6ICdcXDMyMCcsICAnXDMyMScgOiAnXFwzMjEnLCAgJ1wzMjInIDogJ1xcMzIyJywKICAgICdcMzIzJyA6ICdcXDMyMycsICAnXDMyNCcgOiAnXFwzMjQnLCAgJ1wzMjUnIDogJ1xcMzI1JywKICAgICdcMzI2JyA6ICdcXDMyNicsICAnXDMyNycgOiAnXFwzMjcnLCAgJ1wzMzAnIDogJ1xcMzMwJywKICAgICdcMzMxJyA6ICdcXDMzMScsICAnXDMzMicgOiAnXFwzMzInLCAgJ1wzMzMnIDogJ1xcMzMzJywKICAgICdcMzM0JyA6ICdcXDMzNCcsICAnXDMzNScgOiAnXFwzMzUnLCAgJ1wzMzYnIDogJ1xcMzM2JywKICAgICdcMzM3JyA6ICdcXDMzNycsICAnXDM0MCcgOiAnXFwzNDAnLCAgJ1wzNDEnIDogJ1xcMzQxJywKICAgICdcMzQyJyA6ICdcXDM0MicsICAnXDM0MycgOiAnXFwzNDMnLCAgJ1wzNDQnIDogJ1xcMzQ0JywKICAgICdcMzQ1JyA6ICdcXDM0NScsICAnXDM0NicgOiAnXFwzNDYnLCAgJ1wzNDcnIDogJ1xcMzQ3JywKICAgICdcMzUwJyA6ICdcXDM1MCcsICAnXDM1MScgOiAnXFwzNTEnLCAgJ1wzNTInIDogJ1xcMzUyJywKICAgICdcMzUzJyA6ICdcXDM1MycsICAnXDM1NCcgOiAnXFwzNTQnLCAgJ1wzNTUnIDogJ1xcMzU1JywKICAgICdcMzU2JyA6ICdcXDM1NicsICAnXDM1NycgOiAnXFwzNTcnLCAgJ1wzNjAnIDogJ1xcMzYwJywKICAgICdcMzYxJyA6ICdcXDM2MScsICAnXDM2MicgOiAnXFwzNjInLCAgJ1wzNjMnIDogJ1xcMzYzJywKICAgICdcMzY0JyA6ICdcXDM2NCcsICAnXDM2NScgOiAnXFwzNjUnLCAgJ1wzNjYnIDogJ1xcMzY2JywKICAgICdcMzY3JyA6ICdcXDM2NycsICAnXDM3MCcgOiAnXFwzNzAnLCAgJ1wzNzEnIDogJ1xcMzcxJywKICAgICdcMzcyJyA6ICdcXDM3MicsICAnXDM3MycgOiAnXFwzNzMnLCAgJ1wzNzQnIDogJ1xcMzc0JywKICAgICdcMzc1JyA6ICdcXDM3NScsICAnXDM3NicgOiAnXFwzNzYnLCAgJ1wzNzcnIDogJ1xcMzc3JwogICAgfQoKZGVmIF9xdW90ZShzdHIsIExlZ2FsQ2hhcnM9X0xlZ2FsQ2hhcnMpOgogICAgciIiIlF1b3RlIGEgc3RyaW5nIGZvciB1c2UgaW4gYSBjb29raWUgaGVhZGVyLgoKICAgIElmIHRoZSBzdHJpbmcgZG9lcyBub3QgbmVlZCB0byBiZSBkb3VibGUtcXVvdGVkLCB0aGVuIGp1c3QgcmV0dXJuIHRoZQogICAgc3RyaW5nLiAgT3RoZXJ3aXNlLCBzdXJyb3VuZCB0aGUgc3RyaW5nIGluIGRvdWJsZXF1b3RlcyBhbmQgcXVvdGUKICAgICh3aXRoIGEgXCkgc3BlY2lhbCBjaGFyYWN0ZXJzLgogICAgIiIiCiAgICBpZiBhbGwoYyBpbiBMZWdhbENoYXJzIGZvciBjIGluIHN0cik6CiAgICAgICAgcmV0dXJuIHN0cgogICAgZWxzZToKICAgICAgICByZXR1cm4gJyInICsgX251bGxqb2luKF9UcmFuc2xhdG9yLmdldChzLCBzKSBmb3IgcyBpbiBzdHIpICsgJyInCgoKX09jdGFsUGF0dCA9IHJlLmNvbXBpbGUociJcXFswLTNdWzAtN11bMC03XSIpCl9RdW90ZVBhdHQgPSByZS5jb21waWxlKHIiW1xcXS4iKQoKZGVmIF91bnF1b3RlKHN0cik6CiAgICAjIElmIHRoZXJlIGFyZW4ndCBhbnkgZG91YmxlcXVvdGVzLAogICAgIyB0aGVuIHRoZXJlIGNhbid0IGJlIGFueSBzcGVjaWFsIGNoYXJhY3RlcnMuICBTZWUgUkZDIDIxMDkuCiAgICBpZiBsZW4oc3RyKSA8IDI6CiAgICAgICAgcmV0dXJuIHN0cgogICAgaWYgc3RyWzBdICE9ICciJyBvciBzdHJbLTFdICE9ICciJzoKICAgICAgICByZXR1cm4gc3RyCgogICAgIyBXZSBoYXZlIHRvIGFzc3VtZSB0aGF0IHdlIG11c3QgZGVjb2RlIHRoaXMgc3RyaW5nLgogICAgIyBEb3duIHRvIHdvcmsuCgogICAgIyBSZW1vdmUgdGhlICJzCiAgICBzdHIgPSBzdHJbMTotMV0KCiAgICAjIENoZWNrIGZvciBzcGVjaWFsIHNlcXVlbmNlcy4gIEV4YW1wbGVzOgogICAgIyAgICBcMDEyIC0tPiBcbgogICAgIyAgICBcIiAgIC0tPiAiCiAgICAjCiAgICBpID0gMAogICAgbiA9IGxlbihzdHIpCiAgICByZXMgPSBbXQogICAgd2hpbGUgMCA8PSBpIDwgbjoKICAgICAgICBvX21hdGNoID0gX09jdGFsUGF0dC5zZWFyY2goc3RyLCBpKQogICAgICAgIHFfbWF0Y2ggPSBfUXVvdGVQYXR0LnNlYXJjaChzdHIsIGkpCiAgICAgICAgaWYgbm90IG9fbWF0Y2ggYW5kIG5vdCBxX21hdGNoOiAgICAgICAgICAgICAgIyBOZWl0aGVyIG1hdGNoZWQKICAgICAgICAgICAgcmVzLmFwcGVuZChzdHJbaTpdKQogICAgICAgICAgICBicmVhawogICAgICAgICMgZWxzZToKICAgICAgICBqID0gayA9IC0xCiAgICAgICAgaWYgb19tYXRjaDoKICAgICAgICAgICAgaiA9IG9fbWF0Y2guc3RhcnQoMCkKICAgICAgICBpZiBxX21hdGNoOgogICAgICAgICAgICBrID0gcV9tYXRjaC5zdGFydCgwKQogICAgICAgIGlmIHFfbWF0Y2ggYW5kIChub3Qgb19tYXRjaCBvciBrIDwgaik6ICAgICAjIFF1b3RlUGF0dCBtYXRjaGVkCiAgICAgICAgICAgIHJlcy5hcHBlbmQoc3RyW2k6a10pCiAgICAgICAgICAgIHJlcy5hcHBlbmQoc3RyW2srMV0pCiAgICAgICAgICAgIGkgPSBrICsgMgogICAgICAgIGVsc2U6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIE9jdGFsUGF0dCBtYXRjaGVkCiAgICAgICAgICAgIHJlcy5hcHBlbmQoc3RyW2k6al0pCiAgICAgICAgICAgIHJlcy5hcHBlbmQoY2hyKGludChzdHJbaisxOmorNF0sIDgpKSkKICAgICAgICAgICAgaSA9IGogKyA0CiAgICByZXR1cm4gX251bGxqb2luKHJlcykKCiMgVGhlIF9nZXRkYXRlKCkgcm91dGluZSBpcyB1c2VkIHRvIHNldCB0aGUgZXhwaXJhdGlvbiB0aW1lIGluIHRoZSBjb29raWUncyBIVFRQCiMgaGVhZGVyLiAgQnkgZGVmYXVsdCwgX2dldGRhdGUoKSByZXR1cm5zIHRoZSBjdXJyZW50IHRpbWUgaW4gdGhlIGFwcHJvcHJpYXRlCiMgImV4cGlyZXMiIGZvcm1hdCBmb3IgYSBTZXQtQ29va2llIGhlYWRlci4gIFRoZSBvbmUgb3B0aW9uYWwgYXJndW1lbnQgaXMgYW4KIyBvZmZzZXQgZnJvbSBub3csIGluIHNlY29uZHMuICBGb3IgZXhhbXBsZSwgYW4gb2Zmc2V0IG9mIC0zNjAwIG1lYW5zICJvbmUgaG91cgojIGFnbyIuICBUaGUgb2Zmc2V0IG1heSBiZSBhIGZsb2F0aW5nIHBvaW50IG51bWJlci4KIwoKX3dlZWtkYXluYW1lID0gWydNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCcsICdTdW4nXQoKX21vbnRobmFtZSA9IFtOb25lLAogICAgICAgICAgICAgICdKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsCiAgICAgICAgICAgICAgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ10KCmRlZiBfZ2V0ZGF0ZShmdXR1cmU9MCwgd2Vla2RheW5hbWU9X3dlZWtkYXluYW1lLCBtb250aG5hbWU9X21vbnRobmFtZSk6CiAgICBmcm9tIHRpbWUgaW1wb3J0IGdtdGltZSwgdGltZQogICAgbm93ID0gdGltZSgpCiAgICB5ZWFyLCBtb250aCwgZGF5LCBoaCwgbW0sIHNzLCB3ZCwgeSwgeiA9IGdtdGltZShub3cgKyBmdXR1cmUpCiAgICByZXR1cm4gIiVzLCAlMDJkICUzcyAlNGQgJTAyZDolMDJkOiUwMmQgR01UIiAlIFwKICAgICAgICAgICAod2Vla2RheW5hbWVbd2RdLCBkYXksIG1vbnRobmFtZVttb250aF0sIHllYXIsIGhoLCBtbSwgc3MpCgoKY2xhc3MgTW9yc2VsKGRpY3QpOgogICAgIiIiQSBjbGFzcyB0byBob2xkIE9ORSAoa2V5LCB2YWx1ZSkgcGFpci4KCiAgICBJbiBhIGNvb2tpZSwgZWFjaCBzdWNoIHBhaXIgbWF5IGhhdmUgc2V2ZXJhbCBhdHRyaWJ1dGVzLCBzbyB0aGlzIGNsYXNzIGlzCiAgICB1c2VkIHRvIGtlZXAgdGhlIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBrZXksdmFsdWUgcGFpci4KICAgIFRoaXMgY2xhc3MgYWxzbyBpbmNsdWRlcyBhIGNvZGVkX3ZhbHVlIGF0dHJpYnV0ZSwgd2hpY2ggaXMgdXNlZCB0byBob2xkCiAgICB0aGUgbmV0d29yayByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmFsdWUuICBUaGlzIGlzIG1vc3QgdXNlZnVsIHdoZW4gUHl0aG9uCiAgICBvYmplY3RzIGFyZSBwaWNrbGVkIGZvciBuZXR3b3JrIHRyYW5zaXQuCiAgICAiIiIKICAgICMgUkZDIDIxMDkgbGlzdHMgdGhlc2UgYXR0cmlidXRlcyBhcyByZXNlcnZlZDoKICAgICMgICBwYXRoICAgICAgIGNvbW1lbnQgICAgICAgICBkb21haW4KICAgICMgICBtYXgtYWdlICAgIHNlY3VyZSAgICAgIHZlcnNpb24KICAgICMKICAgICMgRm9yIGhpc3RvcmljYWwgcmVhc29ucywgdGhlc2UgYXR0cmlidXRlcyBhcmUgYWxzbyByZXNlcnZlZDoKICAgICMgICBleHBpcmVzCiAgICAjCiAgICAjIFRoaXMgaXMgYW4gZXh0ZW5zaW9uIGZyb20gTWljcm9zb2Z0OgogICAgIyAgIGh0dHBvbmx5CiAgICAjCiAgICAjIFRoaXMgZGljdGlvbmFyeSBwcm92aWRlcyBhIG1hcHBpbmcgZnJvbSB0aGUgbG93ZXJjYXNlCiAgICAjIHZhcmlhbnQgb24gdGhlIGxlZnQgdG8gdGhlIGFwcHJvcHJpYXRlIHRyYWRpdGlvbmFsCiAgICAjIGZvcm1hdHRpbmcgb24gdGhlIHJpZ2h0LgogICAgX3Jlc2VydmVkID0gewogICAgICAgICJleHBpcmVzIiAgOiAiZXhwaXJlcyIsCiAgICAgICAgInBhdGgiICAgICA6ICJQYXRoIiwKICAgICAgICAiY29tbWVudCIgIDogIkNvbW1lbnQiLAogICAgICAgICJkb21haW4iICAgOiAiRG9tYWluIiwKICAgICAgICAibWF4LWFnZSIgIDogIk1heC1BZ2UiLAogICAgICAgICJzZWN1cmUiICAgOiAic2VjdXJlIiwKICAgICAgICAiaHR0cG9ubHkiIDogImh0dHBvbmx5IiwKICAgICAgICAidmVyc2lvbiIgIDogIlZlcnNpb24iLAogICAgfQoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICAjIFNldCBkZWZhdWx0cwogICAgICAgIHNlbGYua2V5ID0gc2VsZi52YWx1ZSA9IHNlbGYuY29kZWRfdmFsdWUgPSBOb25lCgogICAgICAgICMgU2V0IGRlZmF1bHQgYXR0cmlidXRlcwogICAgICAgIGZvciBrZXkgaW4gc2VsZi5fcmVzZXJ2ZWQ6CiAgICAgICAgICAgIGRpY3QuX19zZXRpdGVtX18oc2VsZiwga2V5LCAiIikKCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwgSywgVik6CiAgICAgICAgSyA9IEsubG93ZXIoKQogICAgICAgIGlmIG5vdCBLIGluIHNlbGYuX3Jlc2VydmVkOgogICAgICAgICAgICByYWlzZSBDb29raWVFcnJvcigiSW52YWxpZCBBdHRyaWJ1dGUgJXMiICUgSykKICAgICAgICBkaWN0Ll9fc2V0aXRlbV9fKHNlbGYsIEssIFYpCgogICAgZGVmIGlzUmVzZXJ2ZWRLZXkoc2VsZiwgSyk6CiAgICAgICAgcmV0dXJuIEsubG93ZXIoKSBpbiBzZWxmLl9yZXNlcnZlZAoKICAgIGRlZiBzZXQoc2VsZiwga2V5LCB2YWwsIGNvZGVkX3ZhbCwgTGVnYWxDaGFycz1fTGVnYWxDaGFycyk6CiAgICAgICAgIyBGaXJzdCB3ZSB2ZXJpZnkgdGhhdCB0aGUga2V5IGlzbid0IGEgcmVzZXJ2ZWQgd29yZAogICAgICAgICMgU2Vjb25kIHdlIG1ha2Ugc3VyZSBpdCBvbmx5IGNvbnRhaW5zIGxlZ2FsIGNoYXJhY3RlcnMKICAgICAgICBpZiBrZXkubG93ZXIoKSBpbiBzZWxmLl9yZXNlcnZlZDoKICAgICAgICAgICAgcmFpc2UgQ29va2llRXJyb3IoIkF0dGVtcHQgdG8gc2V0IGEgcmVzZXJ2ZWQga2V5OiAlcyIgJSBrZXkpCiAgICAgICAgaWYgYW55KGMgbm90IGluIExlZ2FsQ2hhcnMgZm9yIGMgaW4ga2V5KToKICAgICAgICAgICAgcmFpc2UgQ29va2llRXJyb3IoIklsbGVnYWwga2V5IHZhbHVlOiAlcyIgJSBrZXkpCgogICAgICAgICMgSXQncyBhIGdvb2Qga2V5LCBzbyBzYXZlIGl0LgogICAgICAgIHNlbGYua2V5ID0ga2V5CiAgICAgICAgc2VsZi52YWx1ZSA9IHZhbAogICAgICAgIHNlbGYuY29kZWRfdmFsdWUgPSBjb2RlZF92YWwKCiAgICBkZWYgb3V0cHV0KHNlbGYsIGF0dHJzPU5vbmUsIGhlYWRlcj0iU2V0LUNvb2tpZToiKToKICAgICAgICByZXR1cm4gIiVzICVzIiAlIChoZWFkZXIsIHNlbGYuT3V0cHV0U3RyaW5nKGF0dHJzKSkKCiAgICBfX3N0cl9fID0gb3V0cHV0CgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAnPCVzOiAlcz0lcz4nICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYua2V5LCByZXByKHNlbGYudmFsdWUpKQoKICAgIGRlZiBqc19vdXRwdXQoc2VsZiwgYXR0cnM9Tm9uZSk6CiAgICAgICAgIyBQcmludCBqYXZhc2NyaXB0CiAgICAgICAgcmV0dXJuICIiIgogICAgICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KICAgICAgICA8IS0tIGJlZ2luIGhpZGluZwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IFwiJXNcIjsKICAgICAgICAvLyBlbmQgaGlkaW5nIC0tPgogICAgICAgIDwvc2NyaXB0PgogICAgICAgICIiIiAlIChzZWxmLk91dHB1dFN0cmluZyhhdHRycykucmVwbGFjZSgnIicsIHInXCInKSkKCiAgICBkZWYgT3V0cHV0U3RyaW5nKHNlbGYsIGF0dHJzPU5vbmUpOgogICAgICAgICMgQnVpbGQgdXAgb3VyIHJlc3VsdAogICAgICAgICMKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIGFwcGVuZCA9IHJlc3VsdC5hcHBlbmQKCiAgICAgICAgIyBGaXJzdCwgdGhlIGtleT12YWx1ZSBwYWlyCiAgICAgICAgYXBwZW5kKCIlcz0lcyIgJSAoc2VsZi5rZXksIHNlbGYuY29kZWRfdmFsdWUpKQoKICAgICAgICAjIE5vdyBhZGQgYW55IGRlZmluZWQgYXR0cmlidXRlcwogICAgICAgIGlmIGF0dHJzIGlzIE5vbmU6CiAgICAgICAgICAgIGF0dHJzID0gc2VsZi5fcmVzZXJ2ZWQKICAgICAgICBpdGVtcyA9IHNvcnRlZChzZWxmLml0ZW1zKCkpCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gaXRlbXM6CiAgICAgICAgICAgIGlmIHZhbHVlID09ICIiOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgaWYga2V5IG5vdCBpbiBhdHRyczoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGtleSA9PSAiZXhwaXJlcyIgYW5kIGlzaW5zdGFuY2UodmFsdWUsIGludCk6CiAgICAgICAgICAgICAgICBhcHBlbmQoIiVzPSVzIiAlIChzZWxmLl9yZXNlcnZlZFtrZXldLCBfZ2V0ZGF0ZSh2YWx1ZSkpKQogICAgICAgICAgICBlbGlmIGtleSA9PSAibWF4LWFnZSIgYW5kIGlzaW5zdGFuY2UodmFsdWUsIGludCk6CiAgICAgICAgICAgICAgICBhcHBlbmQoIiVzPSVkIiAlIChzZWxmLl9yZXNlcnZlZFtrZXldLCB2YWx1ZSkpCiAgICAgICAgICAgIGVsaWYga2V5ID09ICJzZWN1cmUiOgogICAgICAgICAgICAgICAgYXBwZW5kKHN0cihzZWxmLl9yZXNlcnZlZFtrZXldKSkKICAgICAgICAgICAgZWxpZiBrZXkgPT0gImh0dHBvbmx5IjoKICAgICAgICAgICAgICAgIGFwcGVuZChzdHIoc2VsZi5fcmVzZXJ2ZWRba2V5XSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhcHBlbmQoIiVzPSVzIiAlIChzZWxmLl9yZXNlcnZlZFtrZXldLCB2YWx1ZSkpCgogICAgICAgICMgUmV0dXJuIHRoZSByZXN1bHQKICAgICAgICByZXR1cm4gX3NlbWlzcGFjZWpvaW4ocmVzdWx0KQoKCiMKIyBQYXR0ZXJuIGZvciBmaW5kaW5nIGNvb2tpZQojCiMgVGhpcyB1c2VkIHRvIGJlIHN0cmljdCBwYXJzaW5nIGJhc2VkIG9uIHRoZSBSRkMyMTA5IGFuZCBSRkMyMDY4CiMgc3BlY2lmaWNhdGlvbnMuICBJIGhhdmUgc2luY2UgZGlzY292ZXJlZCB0aGF0IE1TSUUgMy4weCBkb2Vzbid0CiMgZm9sbG93IHRoZSBjaGFyYWN0ZXIgcnVsZXMgb3V0bGluZWQgaW4gdGhvc2Ugc3BlY3MuICBBcyBhCiMgcmVzdWx0LCB0aGUgcGFyc2luZyBydWxlcyBoZXJlIGFyZSBsZXNzIHN0cmljdC4KIwoKX0xlZ2FsQ2hhcnNQYXR0ICA9IHIiW1x3XGQhIyUmJ35fYD48QCw6L1wkXCpcK1wtXC5cXlx8XClcKFw/XH1ce1w9XSIKX0Nvb2tpZVBhdHRlcm4gPSByZS5jb21waWxlKHIiIiIKICAgICg/eCkgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFRoaXMgaXMgYSB2ZXJib3NlIHBhdHRlcm4KICAgICg/UDxrZXk+ICAgICAgICAgICAgICAgICAgICAgICAjIFN0YXJ0IG9mIGdyb3VwICdrZXknCiAgICAiIiIgKyBfTGVnYWxDaGFyc1BhdHQgKyByIiIiKz8gICAjIEFueSB3b3JkIG9mIGF0IGxlYXN0IG9uZSBsZXR0ZXIKICAgICkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIEVuZCBvZiBncm91cCAna2V5JwogICAgXHMqPVxzKiAgICAgICAgICAgICAgICAgICAgICAgICMgRXF1YWwgU2lnbgogICAgKD9QPHZhbD4gICAgICAgICAgICAgICAgICAgICAgICMgU3RhcnQgb2YgZ3JvdXAgJ3ZhbCcKICAgICIoPzpbXlxcIl18XFwuKSoiICAgICAgICAgICAgICAgICMgQW55IGRvdWJsZXF1b3RlZCBzdHJpbmcKICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgb3IKICAgIFx3ezN9LFxzW1x3XGRccy1dezksMTF9XHNbXGQ6XXs4fVxzR01UICAjIFNwZWNpYWwgY2FzZSBmb3IgImV4cGlyZXMiIGF0dHIKICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgb3IKICAgICIiIiArIF9MZWdhbENoYXJzUGF0dCArIHIiIiIqICAgICMgQW55IHdvcmQgb3IgZW1wdHkgc3RyaW5nCiAgICApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBFbmQgb2YgZ3JvdXAgJ3ZhbCcKICAgIFxzKjs/ICAgICAgICAgICAgICAgICAgICAgICAgICAjIFByb2JhYmx5IGVuZGluZyBpbiBhIHNlbWktY29sb24KICAgICIiIiwgcmUuQVNDSUkpICAgICAgICAgICAgICAgICAjIE1heSBiZSByZW1vdmVkIGlmIHNhZmUuCgoKIyBBdCBsb25nIGxhc3QsIGhlcmUgaXMgdGhlIGNvb2tpZSBjbGFzcy4gIFVzaW5nIHRoaXMgY2xhc3MgaXMgYWxtb3N0IGp1c3QgbGlrZQojIHVzaW5nIGEgZGljdGlvbmFyeS4gIFNlZSB0aGlzIG1vZHVsZSdzIGRvY3N0cmluZyBmb3IgZXhhbXBsZSB1c2FnZS4KIwpjbGFzcyBCYXNlQ29va2llKGRpY3QpOgogICAgIiIiQSBjb250YWluZXIgY2xhc3MgZm9yIGEgc2V0IG9mIE1vcnNlbHMuIiIiCgogICAgZGVmIHZhbHVlX2RlY29kZShzZWxmLCB2YWwpOgogICAgICAgICIiInJlYWxfdmFsdWUsIGNvZGVkX3ZhbHVlID0gdmFsdWVfZGVjb2RlKFNUUklORykKICAgICAgICBDYWxsZWQgcHJpb3IgdG8gc2V0dGluZyBhIGNvb2tpZSdzIHZhbHVlIGZyb20gdGhlIG5ldHdvcmsKICAgICAgICByZXByZXNlbnRhdGlvbi4gIFRoZSBWQUxVRSBpcyB0aGUgdmFsdWUgcmVhZCBmcm9tIEhUVFAKICAgICAgICBoZWFkZXIuCiAgICAgICAgT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBtb2RpZnkgdGhlIGJlaGF2aW9yIG9mIGNvb2tpZXMuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHZhbCwgdmFsCgogICAgZGVmIHZhbHVlX2VuY29kZShzZWxmLCB2YWwpOgogICAgICAgICIiInJlYWxfdmFsdWUsIGNvZGVkX3ZhbHVlID0gdmFsdWVfZW5jb2RlKFZBTFVFKQogICAgICAgIENhbGxlZCBwcmlvciB0byBzZXR0aW5nIGEgY29va2llJ3MgdmFsdWUgZnJvbSB0aGUgZGljdGlvbmFyeQogICAgICAgIHJlcHJlc2VudGF0aW9uLiAgVGhlIFZBTFVFIGlzIHRoZSB2YWx1ZSBiZWluZyBhc3NpZ25lZC4KICAgICAgICBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIG1vZGlmeSB0aGUgYmVoYXZpb3Igb2YgY29va2llcy4KICAgICAgICAiIiIKICAgICAgICBzdHJ2YWwgPSBzdHIodmFsKQogICAgICAgIHJldHVybiBzdHJ2YWwsIHN0cnZhbAoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbnB1dD1Ob25lKToKICAgICAgICBpZiBpbnB1dDoKICAgICAgICAgICAgc2VsZi5sb2FkKGlucHV0KQoKICAgIGRlZiBfX3NldChzZWxmLCBrZXksIHJlYWxfdmFsdWUsIGNvZGVkX3ZhbHVlKToKICAgICAgICAiIiJQcml2YXRlIG1ldGhvZCBmb3Igc2V0dGluZyBhIGNvb2tpZSdzIHZhbHVlIiIiCiAgICAgICAgTSA9IHNlbGYuZ2V0KGtleSwgTW9yc2VsKCkpCiAgICAgICAgTS5zZXQoa2V5LCByZWFsX3ZhbHVlLCBjb2RlZF92YWx1ZSkKICAgICAgICBkaWN0Ll9fc2V0aXRlbV9fKHNlbGYsIGtleSwgTSkKCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWx1ZSk6CiAgICAgICAgIiIiRGljdGlvbmFyeSBzdHlsZSBhc3NpZ25tZW50LiIiIgogICAgICAgIHJ2YWwsIGN2YWwgPSBzZWxmLnZhbHVlX2VuY29kZSh2YWx1ZSkKICAgICAgICBzZWxmLl9fc2V0KGtleSwgcnZhbCwgY3ZhbCkKCiAgICBkZWYgb3V0cHV0KHNlbGYsIGF0dHJzPU5vbmUsIGhlYWRlcj0iU2V0LUNvb2tpZToiLCBzZXA9IlwwMTVcMDEyIik6CiAgICAgICAgIiIiUmV0dXJuIGEgc3RyaW5nIHN1aXRhYmxlIGZvciBIVFRQLiIiIgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQoc2VsZi5pdGVtcygpKQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGl0ZW1zOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKHZhbHVlLm91dHB1dChhdHRycywgaGVhZGVyKSkKICAgICAgICByZXR1cm4gc2VwLmpvaW4ocmVzdWx0KQoKICAgIF9fc3RyX18gPSBvdXRwdXQKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgbCA9IFtdCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQoc2VsZi5pdGVtcygpKQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGl0ZW1zOgogICAgICAgICAgICBsLmFwcGVuZCgnJXM9JXMnICUgKGtleSwgcmVwcih2YWx1ZS52YWx1ZSkpKQogICAgICAgIHJldHVybiAnPCVzOiAlcz4nICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBfc3BhY2Vqb2luKGwpKQoKICAgIGRlZiBqc19vdXRwdXQoc2VsZiwgYXR0cnM9Tm9uZSk6CiAgICAgICAgIiIiUmV0dXJuIGEgc3RyaW5nIHN1aXRhYmxlIGZvciBKYXZhU2NyaXB0LiIiIgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQoc2VsZi5pdGVtcygpKQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGl0ZW1zOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKHZhbHVlLmpzX291dHB1dChhdHRycykpCiAgICAgICAgcmV0dXJuIF9udWxsam9pbihyZXN1bHQpCgogICAgZGVmIGxvYWQoc2VsZiwgcmF3ZGF0YSk6CiAgICAgICAgIiIiTG9hZCBjb29raWVzIGZyb20gYSBzdHJpbmcgKHByZXN1bWFibHkgSFRUUF9DT09LSUUpIG9yCiAgICAgICAgZnJvbSBhIGRpY3Rpb25hcnkuICBMb2FkaW5nIGNvb2tpZXMgZnJvbSBhIGRpY3Rpb25hcnkgJ2QnCiAgICAgICAgaXMgZXF1aXZhbGVudCB0byBjYWxsaW5nOgogICAgICAgICAgICBtYXAoQ29va2llLl9fc2V0aXRlbV9fLCBkLmtleXMoKSwgZC52YWx1ZXMoKSkKICAgICAgICAiIiIKICAgICAgICBpZiBpc2luc3RhbmNlKHJhd2RhdGEsIHN0cik6CiAgICAgICAgICAgIHNlbGYuX19wYXJzZV9zdHJpbmcocmF3ZGF0YSkKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIHNlbGYudXBkYXRlKCkgd291bGRuJ3QgY2FsbCBvdXIgY3VzdG9tIF9fc2V0aXRlbV9fCiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIHJhd2RhdGEuaXRlbXMoKToKICAgICAgICAgICAgICAgIHNlbGZba2V5XSA9IHZhbHVlCiAgICAgICAgcmV0dXJuCgogICAgZGVmIF9fcGFyc2Vfc3RyaW5nKHNlbGYsIHN0ciwgcGF0dD1fQ29va2llUGF0dGVybik6CiAgICAgICAgaSA9IDAgICAgICAgICAgICAjIE91ciBzdGFydGluZyBwb2ludAogICAgICAgIG4gPSBsZW4oc3RyKSAgICAgIyBMZW5ndGggb2Ygc3RyaW5nCiAgICAgICAgTSA9IE5vbmUgICAgICAgICAjIGN1cnJlbnQgbW9yc2VsCgogICAgICAgIHdoaWxlIDAgPD0gaSA8IG46CiAgICAgICAgICAgICMgU3RhcnQgbG9va2luZyBmb3IgYSBjb29raWUKICAgICAgICAgICAgbWF0Y2ggPSBwYXR0LnNlYXJjaChzdHIsIGkpCiAgICAgICAgICAgIGlmIG5vdCBtYXRjaDoKICAgICAgICAgICAgICAgICMgTm8gbW9yZSBjb29raWVzCiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAga2V5LCB2YWx1ZSA9IG1hdGNoLmdyb3VwKCJrZXkiKSwgbWF0Y2guZ3JvdXAoInZhbCIpCiAgICAgICAgICAgIGkgPSBtYXRjaC5lbmQoMCkKCiAgICAgICAgICAgICMgUGFyc2UgdGhlIGtleSwgdmFsdWUgaW4gY2FzZSBpdCdzIG1ldGFpbmZvCiAgICAgICAgICAgIGlmIGtleVswXSA9PSAiJCI6CiAgICAgICAgICAgICAgICAjIFdlIGlnbm9yZSBhdHRyaWJ1dGVzIHdoaWNoIHBlcnRhaW4gdG8gdGhlIGNvb2tpZQogICAgICAgICAgICAgICAgIyBtZWNoYW5pc20gYXMgYSB3aG9sZS4gIFNlZSBSRkMgMjEwOS4KICAgICAgICAgICAgICAgICMgKERvZXMgYW55b25lIGNhcmU/KQogICAgICAgICAgICAgICAgaWYgTToKICAgICAgICAgICAgICAgICAgICBNW2tleVsxOl1dID0gdmFsdWUKICAgICAgICAgICAgZWxpZiBrZXkubG93ZXIoKSBpbiBNb3JzZWwuX3Jlc2VydmVkOgogICAgICAgICAgICAgICAgaWYgTToKICAgICAgICAgICAgICAgICAgICBNW2tleV0gPSBfdW5xdW90ZSh2YWx1ZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJ2YWwsIGN2YWwgPSBzZWxmLnZhbHVlX2RlY29kZSh2YWx1ZSkKICAgICAgICAgICAgICAgIHNlbGYuX19zZXQoa2V5LCBydmFsLCBjdmFsKQogICAgICAgICAgICAgICAgTSA9IHNlbGZba2V5XQoKCmNsYXNzIFNpbXBsZUNvb2tpZShCYXNlQ29va2llKToKICAgICIiIgogICAgU2ltcGxlQ29va2llIHN1cHBvcnRzIHN0cmluZ3MgYXMgY29va2llIHZhbHVlcy4gIFdoZW4gc2V0dGluZwogICAgdGhlIHZhbHVlIHVzaW5nIHRoZSBkaWN0aW9uYXJ5IGFzc2lnbm1lbnQgbm90YXRpb24sIFNpbXBsZUNvb2tpZQogICAgY2FsbHMgdGhlIGJ1aWx0aW4gc3RyKCkgdG8gY29udmVydCB0aGUgdmFsdWUgdG8gYSBzdHJpbmcuICBWYWx1ZXMKICAgIHJlY2VpdmVkIGZyb20gSFRUUCBhcmUga2VwdCBhcyBzdHJpbmdzLgogICAgIiIiCiAgICBkZWYgdmFsdWVfZGVjb2RlKHNlbGYsIHZhbCk6CiAgICAgICAgcmV0dXJuIF91bnF1b3RlKHZhbCksIHZhbAoKICAgIGRlZiB2YWx1ZV9lbmNvZGUoc2VsZiwgdmFsKToKICAgICAgICBzdHJ2YWwgPSBzdHIodmFsKQogICAgICAgIHJldHVybiBzdHJ2YWwsIF9xdW90ZShzdHJ2YWwpCg==',
'/Lib/http/__init__.py':''
}


function readFromVFS(lib){
   //borrowed code from http://stackoverflow.com/questions/1119722/base-62-conversion-in-python
   if (window.atob === undefined) {
      // browser is not chrome, firefox or safari :(
      window.atob=function(s) {
        var e={},i,k,v=[],r='',w=String.fromCharCode;
        var n=[[65,91],[97,123],[48,58],[43,44],[47,48]];

        for(z in n){for(i=n[z][0];i<n[z][1];i++){v.push(w(i));}}
        for(i=0;i<64;i++){e[v[i]]=i;}

        for(i=0;i<s.length;i+=72){
           var b=0,c,x,l=0,o=s.substring(i,i+72);
           for(x=0;x<o.length;x++){
              c=e[o.charAt(x)];b=(b<<6)+c;l+=6;
              while(l>=8){r+=w((b>>>(l-=8))%256);}
           }
        }
        return r;
      }
   }

   if (__BRYTHON__.$py_VFS[lib] === undefined) return undefined
   //retrieve module from virutal file system and return contents
   return window.atob(__BRYTHON__.$py_VFS[lib])
}


function $import_pyj_module(module,alias,names,path,module_contents) {
    __BRYTHON__.$py_module_path[module]=path
    __BRYTHON__.$py_module_alias[module]=alias
    __BRYTHON__.scope[module+'.py']={}
    __BRYTHON__.scope[module+'.py'].__dict__={}

   try {
     eval(module_contents);
     // add names defined in the module as attributes of $module
     for(var attr in __BRYTHON__.scope[module].__dict__){
       $module[attr] = __BRYTHON__.scope[module].__dict__[attr]
     }
        
     // add class and __str__
     $module.__class__ = $type
     $module.__repr__ = function(){return "<module '"+module+"' from "+path+" >"}
     $module.__str__ = function(){return "<module '"+module+"' from "+path+" >"}
     $module.__file__ = path
     return $module
   } catch(err) {
     eval('throw '+err.name+'(err.message)')
   }
}

//define import procedure to look up module in VFS
$import_via_VFS=function(module,alias,names){
  var ext=['.js', '.pyj', '.py']
  var search_path=__BRYTHON__.path
  var root = __BRYTHON__.brython_path;
  if (root.endswith('/')) {
     root=root.substring(0,root.length-1); 
  }
  if (search_path.indexOf(root+'/libs') == -1) {
     search_path.unshift(root+'/libs')
  }

  if (search_path.indexOf(root+'/Lib') == -1) {
     search_path.unshift(root+'/Lib')
  }

  for(var i=0; i<search_path.length; i++) {
     for (var j=0; j<ext.length; j++) {
         var path=search_path[i].replace(root, '')
         path+='/'+module+ext[j]
         
         //console.log("searching for " + path + " in VFS");
         var module_contents=readFromVFS(path)
         if(module_contents !== undefined) {
           console.log("imported ("+module+") via VFS:" + path)
           if (ext[j] == '.js') {
              return $import_js_module(module,alias,names,path,module_contents)
           }
           if (ext[j] == '.pyj') {
              return $import_pyj_module(module,alias,names,path,module_contents)
           }
           return $import_py_module(module,alias,names,path,module_contents)
         }
     }
  }
  res = Error()
  res.name = 'NotFoundError'
  res.message = "No module named '"+module+"'"
  throw res
}

// since $import_funcs is now a local variable (import_funcs), we have
// to over write the $import_single function to get VFS to work
$import_single=function (module){
    var import_funcs = [$import_via_VFS, $import_js, $import_module_search_path]
    if(module.name.search(/\./)>-1){import_funcs = [$import_module_search_path]}
    for(var j=0;j<import_funcs.length;j++){
        try{
            return import_funcs[j](module)
        } catch(err){
            if(err.name==="NotFoundError"){
                if(j==import_funcs.length-1){
                    throw ImportError("no module named '"+module.name+"'")
                }else{
                    continue
                }
            }else{throw(err)}
        }
    }
}
  