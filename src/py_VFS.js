__BRYTHON__.py_VFS={
'/libs/_html.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmb3IodmFyICRweV9idWlsdGluIGluIF9fYnVpbHRpbnNfXylldmFsKCJ2YXIgIiskcHlfYnVpbHRpbisiPV9fYnVpbHRpbnNfX1skcHlfYnVpbHRpbl0iKTtmdW5jdGlvbiAkVGFnKHRhZ05hbWUsYXJncyl7dmFyIG9iaj1fX0JSWVRIT05fXy4kRE9NTm9kZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpKTtvYmoucGFyZW50PXRoaXM7aWYoYXJncyE9dW5kZWZpbmVkJiZhcmdzLmxlbmd0aD4wKXskc3RhcnQ9MDskZmlyc3Q9YXJnc1swXTtpZigkZmlyc3QuX19jbGFzc19fIT09JEt3RGljdCl7JHN0YXJ0PTE7aWYoaXNpbnN0YW5jZSgkZmlyc3QsW3N0cixpbnQsZmxvYXRdKSl7dHh0PWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHN0cigkZmlyc3QpKTtvYmouZWx0LmFwcGVuZENoaWxkKHR4dCk7fWVsc2UgaWYoJGZpcnN0Ll9fY2xhc3NfXz09PSRUYWdTdW1EaWN0KWZvcigkaT0wOyRpPCRmaXJzdC5jaGlsZHJlbi5sZW5ndGg7JGkrKylvYmouZWx0LmFwcGVuZENoaWxkKCRmaXJzdC5jaGlsZHJlblskaV0uZWx0KTtlbHNlIHRyeXtvYmouZWx0LmFwcGVuZENoaWxkKCRmaXJzdC5lbHQpO31jYXRjaChlcnIpe2NvbnNvbGUubG9nKCdlcnJldXIgJytlcnIpO3Rocm93IFZhbHVlRXJyb3IoJ3dyb25nIGVsZW1lbnQgJyskZmlyc3QpO319Zm9yKHZhciAkaT0kc3RhcnQ7JGk8YXJncy5sZW5ndGg7JGkrKyl7JGFyZz1hcmdzWyRpXTtpZigkYXJnJiYkYXJnLl9fY2xhc3NfXz09PSRLd0RpY3QpaWYoJGFyZy5uYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyKDAsMik9PT0ib24iKWV2YWwoJ19fQlJZVEhPTl9fLkRPTU5vZGUuYmluZChvYmosIicrJGFyZy5uYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyKDIpKyciLGZ1bmN0aW9uKCl7JyskYXJnLnZhbHVlKyd9KScpO2Vsc2UgaWYoJGFyZy5uYW1lLnRvTG93ZXJDYXNlKCk9PSJzdHlsZSIpX19CUllUSE9OX18uRE9NTm9kZS5zZXRfc3R5bGUob2JqLCRhcmcudmFsdWUpO2Vsc2UgaWYoJGFyZy52YWx1ZSE9PWZhbHNlKXRyeXt2YXIgYXJnPSRhcmcubmFtZS50b0xvd2VyQ2FzZSgpO29iai5lbHQuc2V0QXR0cmlidXRlKGFyZywkYXJnLnZhbHVlKTtpZihhcmc9PSJjbGFzcyIpb2JqLmVsdC5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsJGFyZy52YWx1ZSk7fWNhdGNoKGVycil7Y29uc29sZS5sb2coJ2VycmV1ciAnK2Vycik7dGhyb3cgVmFsdWVFcnJvcigiY2FuJ3Qgc2V0IGF0dHJpYnV0ZSAiKyRhcmcubmFtZSk7fX19cmV0dXJuIG9iajt9ZnVuY3Rpb24gQSgpe3ZhciBvYmo9JFRhZygnQScsYXJndW1lbnRzKTtyZXR1cm4gb2JqO31BLl9fbmFtZV9fPSdodG1sLkEnO3ZhciAkc3JjPUErJyc7JHRhZ3M9WydBJywnQUJCUicsJ0FDUk9OWU0nLCdBRERSRVNTJywnQVBQTEVUJywnQicsJ0JETycsJ0JJRycsJ0JMT0NLUVVPVEUnLCdCVVRUT04nLCdDQVBUSU9OJywnQ0VOVEVSJywnQ0lURScsJ0NPREUnLCdERUwnLCdERk4nLCdESVInLCdESVYnLCdETCcsJ0VNJywnRklFTERTRVQnLCdGT05UJywnRk9STScsJ0ZSQU1FU0VUJywnSDEnLCdIMicsJ0gzJywnSDQnLCdINScsJ0g2JywnSScsJ0lGUkFNRScsJ0lOUycsJ0tCRCcsJ0xBQkVMJywnTEVHRU5EJywnTUFQJywnTUVOVScsJ05PRlJBTUVTJywnTk9TQ1JJUFQnLCdPQkpFQ1QnLCdPTCcsJ09QVEdST1VQJywnUFJFJywnUScsJ1MnLCdTQU1QJywnU0NSSVBUJywnU0VMRUNUJywnU01BTEwnLCdTUEFOJywnU1RSSUtFJywnU1RST05HJywnU1RZTEUnLCdTVUInLCdTVVAnLCdUQUJMRScsJ1RFWFRBUkVBJywnVElUTEUnLCdUVCcsJ1UnLCdVTCcsJ1ZBUicsJ0JPRFknLCdDT0xHUk9VUCcsJ0REJywnRFQnLCdIRUFEJywnSFRNTCcsJ0xJJywnUCcsJ1RCT0RZJywnT1BUSU9OJywnVEQnLCdURk9PVCcsJ1RIJywnVEhFQUQnLCdUUicsJ0FSRUEnLCdCQVNFJywnQkFTRUZPTlQnLCdCUicsJ0NPTCcsJ0ZSQU1FJywnSFInLCdJTUcnLCdJTlBVVCcsJ0lTSU5ERVgnLCdMSU5LJywnTUVUQScsJ1BBUkFNJ107JHRhZ3M9JHRhZ3MuY29uY2F0KFsnQVJUSUNMRScsJ0FTSURFJywnQVVESU8nLCdCREknLCdDQU5WQVMnLCdDT01NQU5EJywnREFUQUxJU1QnLCdERVRBSUxTJywnRElBTE9HJywnRU1CRUQnLCdGSUdDQVBUSU9OJywnRklHVVJFJywnRk9PVEVSJywnSEVBREVSJywnS0VZR0VOJywnTUFSSycsJ01FVEVSJywnTkFWJywnT1VUUFVUJywnUFJPR1JFU1MnLCdSUCcsJ1JUJywnUlVCWScsJ1NFQ1RJT04nLCdTT1VSQ0UnLCdTVU1NQVJZJywnVElNRScsJ1RSQUNLJywnVklERU8nLCdXQlInXSk7dmFyIG9iaj1uZXcgT2JqZWN0KCk7Zm9yKCRpPTA7JGk8JHRhZ3MubGVuZ3RoOyRpKyspeyRjb2RlPSRzcmMucmVwbGFjZSgvQS9nbSwkdGFnc1skaV0pO2V2YWwoIm9iai4iKyR0YWdzWyRpXSsiPSIrJGNvZGUpO2V2YWwoIm9iai4iKyR0YWdzWyRpXSsnLl9fbmFtZV9fPSJodG1sLicrJHRhZ3NbJGldKyciJyk7fW9iai5fX2dldGF0dHJfXz1mdW5jdGlvbihhdHRyKXtyZXR1cm4gdGhpc1thdHRyXTt9O3JldHVybiBvYmo7fSkoKTs=',
'/libs/re.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmb3IodmFyICRweV9idWlsdGluIGluIF9fYnVpbHRpbnNfXylldmFsKCJ2YXIgIiskcHlfYnVpbHRpbisiPV9fYnVpbHRpbnNfX1skcHlfYnVpbHRpbl0iKTt2YXIgJEpTT2JqZWN0PV9fQlJZVEhPTl9fLiRKU09iamVjdDt2YXIgSlNPYmplY3Q9X19CUllUSE9OX18uSlNPYmplY3Q7b2JqPXtfX2NsYXNzX186JG1vZHVsZSxfX3N0cl9fOmZ1bmN0aW9uKCl7cmV0dXJuICI8bW9kdWxlICdyZSc+Ijt9fTtvYmouQT1vYmouQVNDSUk9MjU2O29iai5JPW9iai5JR05PUkVDQVNFPSdpJztvYmouTT1vYmouTVVMVElMSU5FPSdtJztvYmouVkVSQk9TRT02NDskU1JFX1BhdHRlcm5EaWN0PXtfX2NsYXNzX186JHR5cGUsX19uYW1lX186J1NSRV9QYXR0ZXJuJ307JFNSRV9QYXR0ZXJuRGljdC5fX21yb19fPVskU1JFX1BhdHRlcm5EaWN0LG9iamVjdC4kZGljdF07JFNSRV9QYXR0ZXJuRGljdC5tYXRjaD1mdW5jdGlvbihzZWxmLHN0cmluZyl7cmV0dXJuIG9iai5tYXRjaChzZWxmLnBhdHRlcm4sc3RyaW5nLHNlbGYuZmxhZ3MpO307JFNSRV9QYXR0ZXJuRGljdC5zZWFyY2g9ZnVuY3Rpb24oc2VsZixzdHJpbmcpe3JldHVybiBvYmoub2JqKHNlbGYucGF0dGVybixzdHJpbmcsc2VsZi5mbGFncyk7fTtvYmouY29tcGlsZT1mdW5jdGlvbihwYXR0ZXJuLGZsYWdzKXtyZXR1cm57X19jbGFzc19fOiRTUkVfUGF0dGVybkRpY3QscGF0dGVybjpwYXR0ZXJuLGZsYWdzOmZsYWdzfTt9O29iai5lc2NhcGU9ZnVuY3Rpb24oc3RyaW5nKXt2YXIgcmVzPScnO3ZhciBvaz0nYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODlfJztmb3IodmFyIGk9MDtpPHN0cmluZy5sZW5ndGg7aSsrKWlmKG9rLnNlYXJjaChzdHJpbmcuY2hhckF0KGkpKT4tMSlyZXMrPXN0cmluZy5jaGFyQXQoaSk7cmV0dXJuIHJlczt9O29iai5maW5kYWxsPWZ1bmN0aW9uKHBhdHRlcm4sc3RyaW5nLGZsYWdzKXt2YXIgJG5zPSRNYWtlQXJncygncmUuc2VhcmNoJyxhcmd1bWVudHMsWydwYXR0ZXJuJywnc3RyaW5nJ10sW10sJ2FyZ3MnLCdrdycpO3ZhciBhcmdzPSRucy5hcmdzO2lmKGFyZ3MubGVuZ3RoPjApdmFyIGZsYWdzPWFyZ3NbMF07ZWxzZSB2YXIgZmxhZ3M9JG5zLmt3LmdldCgnZmxhZ3MnLCcnKTtmbGFncys9J2dtJzt2YXIganNwPW5ldyBSZWdFeHAocGF0dGVybixmbGFncyk7dmFyIGpzbWF0Y2g9c3RyaW5nLm1hdGNoKGpzcCk7aWYoanNtYXRjaD09PW51bGwpcmV0dXJuIFtdO3JldHVybiBqc21hdGNoO307b2JqLnNlYXJjaD1mdW5jdGlvbihwYXR0ZXJuLHN0cmluZyl7dmFyICRucz0kTWFrZUFyZ3MoJ3JlLnNlYXJjaCcsYXJndW1lbnRzLFsncGF0dGVybicsJ3N0cmluZyddLFtdLCdhcmdzJywna3cnKTt2YXIgYXJncz0kbnMuYXJncztpZihhcmdzLmxlbmd0aD4wKXZhciBmbGFncz1hcmdzWzBdO2Vsc2UgdmFyIGZsYWdzPWdldGF0dHIoJG5zLmt3LCdnZXQnKSgnZmxhZ3MnLCcnKTt2YXIganNwPW5ldyBSZWdFeHAocGF0dGVybixmbGFncyk7dmFyIGpzbWF0Y2g9c3RyaW5nLm1hdGNoKGpzcCk7aWYoanNtYXRjaD09PW51bGwpcmV0dXJuIE5vbmU7dmFyIG1vPW5ldyBPYmplY3QoKTttby5ncm91cD1mdW5jdGlvbigpe3ZhciByZXM9W107Zm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKylpZihqc21hdGNoW2FyZ3VtZW50c1tpXV09PT11bmRlZmluZWQpcmVzLnB1c2goTm9uZSk7ZWxzZSByZXMucHVzaChqc21hdGNoW2FyZ3VtZW50c1tpXV0pO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXJldHVybiByZXNbMF07cmV0dXJuIHR1cGxlKHJlcyk7fTttby5ncm91cHM9ZnVuY3Rpb24oX2RlZmF1bHQpe2lmKF9kZWZhdWx0PT09dW5kZWZpbmVkKV9kZWZhdWx0PU5vbmU7dmFyIHJlcz1bXTtmb3IodmFyIGk9MTtpPGpzbWF0Y2gubGVuZ3RoO2krKylpZihqc21hdGNoW2ldPT09dW5kZWZpbmVkKXJlcy5wdXNoKF9kZWZhdWx0KTtlbHNlIHJlcy5wdXNoKGpzbWF0Y2hbaV0pO3JldHVybiB0dXBsZShyZXMpO307bW8uc3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNtYXRjaC5pbmRleDt9O21vLnN0cmluZz1zdHJpbmc7cmV0dXJuIEpTT2JqZWN0KG1vKTt9O29iai5zdWI9ZnVuY3Rpb24ocGF0dGVybixyZXBsLHN0cmluZyl7dmFyICRucz0kTWFrZUFyZ3MoJ3JlLnNlYXJjaCcsYXJndW1lbnRzLFsncGF0dGVybicsJ3JlcGwnLCdzdHJpbmcnXSxbXSwnYXJncycsJ2t3Jyk7Zm9yKCR2YXIgaW4gJG5zKWV2YWwoInZhciAiKyR2YXIrIj0kbnNbJHZhcl0iKTt2YXIgYXJncz0kbnMuYXJnczt2YXIgY291bnQ9X19idWlsdGluc19fLmRpY3QuJGRpY3QuZ2V0KCRucy5rdywnY291bnQnLDApO3ZhciBmbGFncz1fX2J1aWx0aW5zX18uZGljdC4kZGljdC5nZXQoJG5zLmt3LCdmbGFncycsJycpO2lmKGFyZ3MubGVuZ3RoPjApdmFyIGNvdW50PWFyZ3NbMF07aWYoYXJncy5sZW5ndGg+MSl2YXIgZmxhZ3M9YXJnc1sxXTtpZih0eXBlb2YgcmVwbD09PSJzdHJpbmciKXJlcGw9cmVwbC5yZXBsYWNlKC9cXChcZCspL2csJyQkJDEnKTtlbHNlIGlmKHR5cGVvZiByZXBsPT09ImZ1bmN0aW9uIil2YXIgJHJlcGwxPWZ1bmN0aW9uKCl7dmFyIG1vPU9iamVjdCgpO21vLnN0cmluZz1hcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXTt2YXIgc3RhcnQ9YXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMl07dmFyIGVuZD1zdGFydCthcmd1bWVudHNbMF0ubGVuZ3RoO21vLnN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIHN0YXJ0O307bW8uZW5kPWZ1bmN0aW9uKCl7cmV0dXJuIGVuZDt9O2dyb3Vwcz1bXTtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGgtMjtpKyspZ3JvdXBzLnB1c2goYXJndW1lbnRzW2ldKTttby5ncm91cHM9ZnVuY3Rpb24oX2RlZmF1bHQpe2lmKF9kZWZhdWx0PT09dW5kZWZpbmVkKV9kZWZhdWx0PU5vbmU7dmFyIHJlcz1bXTtmb3IodmFyIGk9MDtpPGdyb3Vwcy5sZW5ndGg7aSsrKWlmKGdyb3Vwc1tpXT09PXVuZGVmaW5lZClyZXMucHVzaChfZGVmYXVsdCk7ZWxzZSByZXMucHVzaChncm91cHNbaV0pO3JldHVybiByZXM7fTtyZXR1cm4gcmVwbChKU09iamVjdChtbykpO307aWYoY291bnQ9PTApZmxhZ3MrPSdnJzt2YXIganNwPW5ldyBSZWdFeHAocGF0dGVybixmbGFncyk7aWYodHlwZW9mIHJlcGw9PT0nZnVuY3Rpb24nKXJldHVybiBzdHJpbmcucmVwbGFjZShqc3AsJHJlcGwxKTtlbHNlIHJldHVybiBzdHJpbmcucmVwbGFjZShqc3AscmVwbCk7fTtvYmoubWF0Y2g9KGZ1bmN0aW9uKHNlYXJjaF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oKXtwYXR0ZXJuPWFyZ3VtZW50c1swXTtpZihwYXR0ZXJuLmNoYXJBdCgwKSE9PSdeJylwYXR0ZXJuPSdeJytwYXR0ZXJuO3ZhciBhcmdzPVtwYXR0ZXJuXTtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKWFyZ3MucHVzaChhcmd1bWVudHNbaV0pO3JldHVybiBzZWFyY2hfZnVuYy5hcHBseShudWxsLGFyZ3MpO307fSkob2JqLnNlYXJjaCk7cmV0dXJuIG9iajt9KSgpOw==',
'/libs/marshal.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmb3IodmFyICRweV9idWlsdGluIGluIF9fYnVpbHRpbnNfXylldmFsKCJ2YXIgIiskcHlfYnVpbHRpbisiPV9fYnVpbHRpbnNfX1skcHlfYnVpbHRpbl0iKTtmdW5jdGlvbiBfcHkob2JqKXtpZihvYmo9PT1udWxsKXJldHVybiBOb25lO2lmKGlzaW5zdGFuY2Uob2JqLGxpc3QpKXt2YXIgcmVzPVtdO2Zvcih2YXIgaT0wO2k8b2JqLmxlbmd0aDtpKyspcmVzLnB1c2goX3B5KG9ialtpXSkpO3JldHVybiByZXM7fWlmKG9iai5fX2NsYXNzX18hPT11bmRlZmluZWQpe2lmKG9iai5fX2NsYXNzX189PT1saXN0KWZvcih2YXIgaT0wO2k8b2JqLmxlbmd0aDtpKyspb2JqW2ldPV9weShvYmpbaV0pO3JldHVybiBvYmo7fWlmKHR5cGVvZiBvYmo9PT0nb2JqZWN0JyYmb2JqLl9fY2xhc3NfXz09PXVuZGVmaW5lZCl7dmFyIHJlcz1kaWN0KCk7Zm9yKHZhciBhdHRyIGluIG9iailnZXRhdHRyKHJlcywnX19zZXRpdGVtX18nKShhdHRyLF9weShvYmpbYXR0cl0pKTtyZXR1cm4gcmVzO31yZXR1cm4gX19CUllUSE9OX18uSlNPYmplY3Qob2JqKTt9ZnVuY3Rpb24gX2pzKG9iail7aWYoaXNpbnN0YW5jZShvYmosW2ludCxzdHJdKSlyZXR1cm4gb2JqO2Vsc2UgaWYob2JqPT09Tm9uZSlyZXR1cm4gbnVsbDtlbHNlIGlmKG9iaj09PVRydWUpcmV0dXJuIHRydWU7ZWxzZSBpZihvYmo9PT1GYWxzZSlyZXR1cm4gZmFsc2U7ZWxzZSBpZihpc2luc3RhbmNlKG9iaixmbG9hdCkpcmV0dXJuIG9iai52YWx1ZTtlbHNlIGlmKGlzaW5zdGFuY2Uob2JqLFtsaXN0LHR1cGxlXSkpe3ZhciByZXM9W107Zm9yKHZhciBpPTA7aTxvYmoubGVuZ3RoO2krKylyZXMucHVzaChfanMob2JqW2ldKSk7cmV0dXJuIHJlczt9ZWxzZSBpZihpc2luc3RhbmNlKG9iaixkaWN0KSl7dmFyIHJlcz1uZXcgT2JqZWN0KCk7Zm9yKHZhciBpPTA7aTxvYmouJGtleXMubGVuZ3RoO2krKylyZXNbX2pzKG9iai4ka2V5c1tpXSldPV9qcyhvYmouJHZhbHVlc1tpXSk7cmV0dXJuIHJlczt9ZWxzZSB0aHJvdyBUeXBlRXJyb3Ioc3RyKG9iaikrJyBpcyBub3QgSlNPTiBzZXJpYWxpemFibGUnKTt9cmV0dXJue2xvYWRzOmZ1bmN0aW9uKGpzb25fb2JqKXtyZXR1cm4gX3B5KEpTT04ucGFyc2UoanNvbl9vYmopKTt9LGR1bXBzOmZ1bmN0aW9uKG9iail7cmV0dXJuIEpTT04uc3RyaW5naWZ5KF9qcyhvYmopKTt9fTt9KSgpOw==',
'/libs/builtins.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXt2YXIgb2JqPXtfX2NsYXNzX186JE1vZHVsZURpY3QsX19uYW1lX186J2J1aWx0aW5zJ307dmFyIGJ1aWx0aW5fbmFtZXM9WydBcml0aG1ldGljRXJyb3InLCdBc3NlcnRpb25FcnJvcicsJ0F0dHJpYnV0ZUVycm9yJywnQmFzZUV4Y2VwdGlvbicsJ0Jsb2NraW5nSU9FcnJvcicsJ0Jyb2tlblBpcGVFcnJvcicsJ0J1ZmZlckVycm9yJywnQnl0ZXNXYXJuaW5nJywnQ2hpbGRQcm9jZXNzRXJyb3InLCdDb25uZWN0aW9uQWJvcnRlZEVycm9yJywnQ29ubmVjdGlvbkVycm9yJywnQ29ubmVjdGlvblJlZnVzZWRFcnJvcicsJ0Nvbm5lY3Rpb25SZXNldEVycm9yJywnRGVwcmVjYXRpb25XYXJuaW5nJywnRU9GRXJyb3InLCdFbGxpcHNpcycsJ0Vudmlyb25tZW50RXJyb3InLCdFeGNlcHRpb24nLCdGYWxzZScsJ0ZpbGVFeGlzdHNFcnJvcicsJ0ZpbGVOb3RGb3VuZEVycm9yJywnRmxvYXRpbmdQb2ludEVycm9yJywnRnV0dXJlV2FybmluZycsJ0dlbmVyYXRvckV4aXQnLCdJT0Vycm9yJywnSW1wb3J0RXJyb3InLCdJbXBvcnRXYXJuaW5nJywnSW5kZW50YXRpb25FcnJvcicsJ0luZGV4RXJyb3InLCdJbnRlcnJ1cHRlZEVycm9yJywnSXNBRGlyZWN0b3J5RXJyb3InLCdLZXlFcnJvcicsJ0tleWJvYXJkSW50ZXJydXB0JywnTG9va3VwRXJyb3InLCdNZW1vcnlFcnJvcicsJ05hbWVFcnJvcicsJ05vbmUnLCdOb3RBRGlyZWN0b3J5RXJyb3InLCdOb3RJbXBsZW1lbnRlZCcsJ05vdEltcGxlbWVudGVkRXJyb3InLCdPU0Vycm9yJywnT3ZlcmZsb3dFcnJvcicsJ1BlbmRpbmdEZXByZWNhdGlvbldhcm5pbmcnLCdQZXJtaXNzaW9uRXJyb3InLCdQcm9jZXNzTG9va3VwRXJyb3InLCdSZWZlcmVuY2VFcnJvcicsJ1Jlc291cmNlV2FybmluZycsJ1J1bnRpbWVFcnJvcicsJ1J1bnRpbWVXYXJuaW5nJywnU3RvcEl0ZXJhdGlvbicsJ1N5bnRheEVycm9yJywnU3ludGF4V2FybmluZycsJ1N5c3RlbUVycm9yJywnU3lzdGVtRXhpdCcsJ1RhYkVycm9yJywnVGltZW91dEVycm9yJywnVHJ1ZScsJ1R5cGVFcnJvcicsJ1VuYm91bmRMb2NhbEVycm9yJywnVW5pY29kZURlY29kZUVycm9yJywnVW5pY29kZUVuY29kZUVycm9yJywnVW5pY29kZUVycm9yJywnVW5pY29kZVRyYW5zbGF0ZUVycm9yJywnVW5pY29kZVdhcm5pbmcnLCdVc2VyV2FybmluZycsJ1ZhbHVlRXJyb3InLCdXYXJuaW5nJywnV2luZG93c0Vycm9yJywnWmVyb0RpdmlzaW9uRXJyb3InLCdfJywnX19idWlsZF9jbGFzc19fJywnX19kZWJ1Z19fJywnX19kb2NfXycsJ19faW1wb3J0X18nLCdfX25hbWVfXycsJ19fcGFja2FnZV9fJywnYWJzJywnYWxsJywnYW55JywnYXNjaWknLCdiaW4nLCdib29sJywnYnl0ZWFycmF5JywnYnl0ZXMnLCdjYWxsYWJsZScsJ2NocicsJ2NsYXNzbWV0aG9kJywnY29tcGlsZScsJ2NvbXBsZXgnLCdjb3B5cmlnaHQnLCdjcmVkaXRzJywnZGVsYXR0cicsJ2RpY3QnLCdkaXInLCdkaXZtb2QnLCdlbnVtZXJhdGUnLCdldmFsJywnZXhlYycsJ2V4aXQnLCdmaWx0ZXInLCdmbG9hdCcsJ2Zvcm1hdCcsJ2Zyb3plbnNldCcsJ2dldGF0dHInLCdnbG9iYWxzJywnaGFzYXR0cicsJ2hhc2gnLCdoZWxwJywnaGV4JywnaWQnLCdpbnB1dCcsJ2ludCcsJ2lzaW5zdGFuY2UnLCdpc3N1YmNsYXNzJywnaXRlcicsJ2xlbicsJ2xpY2Vuc2UnLCdsaXN0JywnbG9jYWxzJywnbWFwJywnbWF4JywnbWVtb3J5dmlldycsJ21pbicsJ25leHQnLCdvYmplY3QnLCdvY3QnLCdvcGVuJywnb3JkJywncG93JywncHJpbnQnLCdwcm9wZXJ0eScsJ3F1aXQnLCdyYW5nZScsJ3JlcHInLCdyZXZlcnNlZCcsJ3JvdW5kJywnc2V0Jywnc2V0YXR0cicsJ3NsaWNlJywnc29ydGVkJywnc3RhdGljbWV0aG9kJywnc3RyJywnc3VtJywnc3VwZXInLCd0dXBsZScsJ3R5cGUnLCd2YXJzJywnemlwJ107Zm9yKHZhciBpPTA7aTxidWlsdGluX25hbWVzLmxlbmd0aDtpKyspdHJ5e29ialtidWlsdGluX25hbWVzW2ldXT1ldmFsKGJ1aWx0aW5fbmFtZXNbaV0pO31jYXRjaChlcnIpe31yZXR1cm4gb2JqO30pKCk7',
'/libs/json.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmb3IodmFyICRweV9idWlsdGluIGluIF9fYnVpbHRpbnNfXylldmFsKCJ2YXIgIiskcHlfYnVpbHRpbisiPV9fYnVpbHRpbnNfX1skcHlfYnVpbHRpbl0iKTtmdW5jdGlvbiBfcHkob2JqKXtpZihvYmo9PT1udWxsKXJldHVybiBOb25lO2lmKGlzaW5zdGFuY2Uob2JqLGxpc3QpKXt2YXIgcmVzPVtdO2Zvcih2YXIgaT0wO2k8b2JqLmxlbmd0aDtpKyspcmVzLnB1c2goX3B5KG9ialtpXSkpO3JldHVybiByZXM7fWlmKG9iai5fX2NsYXNzX18hPT11bmRlZmluZWQpe2lmKG9iai5fX2NsYXNzX189PT1saXN0KWZvcih2YXIgaT0wO2k8b2JqLmxlbmd0aDtpKyspb2JqW2ldPV9weShvYmpbaV0pO3JldHVybiBvYmo7fWlmKHR5cGVvZiBvYmo9PT0nb2JqZWN0JyYmb2JqLl9fY2xhc3NfXz09PXVuZGVmaW5lZCl7dmFyIHJlcz1kaWN0KCk7Zm9yKHZhciBhdHRyIGluIG9iailnZXRhdHRyKHJlcywnX19zZXRpdGVtX18nKShhdHRyLF9weShvYmpbYXR0cl0pKTtyZXR1cm4gcmVzO31yZXR1cm4gX19CUllUSE9OX18uSlNPYmplY3Qob2JqKTt9ZnVuY3Rpb24gX2pzKG9iail7aWYoaXNpbnN0YW5jZShvYmosW2ludCxzdHJdKSlyZXR1cm4gb2JqO2Vsc2UgaWYob2JqPT09Tm9uZSlyZXR1cm4gbnVsbDtlbHNlIGlmKG9iaj09PVRydWUpcmV0dXJuIHRydWU7ZWxzZSBpZihvYmo9PT1GYWxzZSlyZXR1cm4gZmFsc2U7ZWxzZSBpZihpc2luc3RhbmNlKG9iaixmbG9hdCkpcmV0dXJuIG9iai52YWx1ZTtlbHNlIGlmKGlzaW5zdGFuY2Uob2JqLFtsaXN0LHR1cGxlXSkpe3ZhciByZXM9W107Zm9yKHZhciBpPTA7aTxvYmoubGVuZ3RoO2krKylyZXMucHVzaChfanMob2JqW2ldKSk7cmV0dXJuIHJlczt9ZWxzZSBpZihpc2luc3RhbmNlKG9iaixkaWN0KSl7dmFyIHJlcz1uZXcgT2JqZWN0KCk7Zm9yKHZhciBpPTA7aTxvYmouJGtleXMubGVuZ3RoO2krKylyZXNbX2pzKG9iai4ka2V5c1tpXSldPV9qcyhvYmouJHZhbHVlc1tpXSk7cmV0dXJuIHJlczt9ZWxzZSB0aHJvdyBUeXBlRXJyb3Ioc3RyKG9iaikrJyBpcyBub3QgSlNPTiBzZXJpYWxpemFibGUnKTt9cmV0dXJue2xvYWRzOmZ1bmN0aW9uKGpzb25fb2JqKXtyZXR1cm4gX3B5KEpTT04ucGFyc2UoanNvbl9vYmopKTt9LGR1bXBzOmZ1bmN0aW9uKG9iail7cmV0dXJuIEpTT04uc3RyaW5naWZ5KF9qcyhvYmopKTt9fTt9KSgpOw==',
'/libs/__random.js':'JG1vZHVsZSA9IChmdW5jdGlvbigpewoKZm9yKHZhciAkcHlfYnVpbHRpbiBpbiBfX2J1aWx0aW5zX18pe2V2YWwoInZhciAiKyRweV9idWlsdGluKyI9X19idWlsdGluc19fWyRweV9idWlsdGluXSIpfQp2YXIgJEpTT2JqZWN0ID0gX19CUllUSE9OX18uJEpTT2JqZWN0CnZhciBKU09iamVjdCA9IF9fQlJZVEhPTl9fLkpTT2JqZWN0CgpyZXR1cm4gewogICAgdmFyIG9iaiA9IHsKICAgIGNob2ljZTpmdW5jdGlvbihzZXEpewogICAgICAgIHJldHVybiBnZXRhdHRyKHNlcSwnX19nZXRpdGVtX18nKShnZXRhdHRyKHNlcSwnX19sZW5fXycpKCkqTWF0aC5yYW5kb20oKSkKICAgIH0sCiAgICByYW5kb206ZnVuY3Rpb24oKXsKICAgICAgaWYoYXJndW1lbnRzLmxlbmd0aCA+IDApewogICAgICAgIHRocm93IFR5cGVFcnJvcigicmFuZG9tKCkgdGFrZXMgbm8gYXJndW1lbnRzICgiK2FyZ3VtZW50cy5sZW5ndGgrIiBnaXZlbikiKQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmbG9hdChNYXRoLnJhbmRvbSgpKTsKICAgICAgfQogICAgfSwKICAgIHJhbmRpbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaW50KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooYi1hKzEpK2EpKX0sCiAgICByYW5kcmFuZ2U6ZnVuY3Rpb24oc3RhcnQsc3RvcCxzdGVwKXsKICAgICAgaWYoc3RlcCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgc3RlcD0xOwogICAgICB9IGVsc2UgaWYoc3RlcCA9PSAwKSB7IAogICAgICAgIC8vcmFpc2UgVmFsdWVFcnJvcigiemVybyBzdGVwIGZvciByYW5kcmFuZ2UoKSIpOwogICAgICB9CgogICAgICBpZihzdG9wID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgc3RvcD1zdGFydDsKICAgICAgICAgc3RhcnQ9MDsKICAgICAgfQogICAgICB2YXIgd2lkdGg9c3RvcC1zdGFydDsKICAgICAgaWYgKHN0ZXA9PTEgJiYgd2lkdGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHN0YXJ0ICsgaW50KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSp3aWR0aCkpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHJhaXNlIFZhbHVlRXJyb3IoImVtcHR5IHJhbmdlIGZvciByYW5kcmFuZ2UoKSAoIitzdGFydCsiLCIrc3RvcCsnLCcrc3RlcCsnKScpOwogICAgICB9CiAgICAgIAogICAgICB2YXIgbjsKICAgICAgaWYgKHN0ZXAgPiAwKSB7CiAgICAgICAgIG49TWF0aC5mbG9vcigod2lkdGgrc3RlcC0xKS9zdGVwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAgbj1NYXRoLmZsb29yKCh3aWR0aCtzdGVwKzEpL3N0ZXApOwogICAgICB9CiAgICAgIHJldHVybiBzdGFydCArIHN0ZXAqaW50KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpuKSkKICAgICAgLy9yZXR1cm4gaW50KE1hdGgucmFuZG9tKCkqKHN0b3Avc3RlcC1zdGFydC9zdGVwKSpzdGVwICsgc3RhcnQpCiAgICB9LAogICAgc2h1ZmZsZTpmdW5jdGlvbih4LCBybmQpewogICAgICBpZiAoeC5sZW5ndGggPD0gMSkgeyByZXR1cm4geH0KCiAgICAgIGlmIChybmQgPT09IHVuZGVmaW5lZCkgewogICAgICAgICBybmQ9TWF0aC5yYW5kb20KICAgICAgfQoKICAgICAgZm9yKHZhciBqLCBvLCBpID0geC5sZW5ndGg7IGk7IGogPSBwYXJzZUludChybmQoKSAqIGkpLCBvID0geFstLWldLCB4W2ldID0geFtqXSwgeFtqXSA9IG8pOwogICAgfQp9Cgp9KSgpCgo=',
'/libs/_timer.js':'JG1vZHVsZT17X19uYW1lX186J3RpbWVyJyxjbGVhcl9pbnRlcnZhbDpmdW5jdGlvbihpbnRfaWQpe3dpbmRvdy5jbGVhckludGVydmFsKGludF9pZCk7fSxjbGVhcl90aW1lb3V0OmZ1bmN0aW9uKHRpbWVvdXRfaWQpe3dpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dF9pZCk7fSxzZXRfaW50ZXJ2YWw6ZnVuY3Rpb24oZnVuYyxpbnRlcnZhbCl7cmV0dXJuIF9fYnVpbHRpbnNfXy5pbnQod2luZG93LnNldEludGVydmFsKGZ1bmMsaW50ZXJ2YWwpKTt9LHNldF90aW1lb3V0OmZ1bmN0aW9uKGZ1bmMsaW50ZXJ2YWwpe3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmMsaW50ZXJ2YWwpO30scmVxdWVzdF9hbmltYXRpb25fZnJhbWU6ZnVuY3Rpb24oZnVuYyl7cmV0dXJuIF9fYnVpbHRpbnNfXy5pbnQod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jKSk7fSxjYW5jZWxfYW5pbWF0aW9uX2ZyYW1lOmZ1bmN0aW9uKGludF9pZCl7d2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGludF9pZCk7fX07',
'/libs/_svg.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmb3IodmFyICRweV9idWlsdGluIGluIF9fYnVpbHRpbnNfXylldmFsKCJ2YXIgIiskcHlfYnVpbHRpbisiPV9fYnVpbHRpbnNfX1skcHlfYnVpbHRpbl0iKTskc3ZnTlM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIjskeGxpbmtOUz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI7ZnVuY3Rpb24gJFNWR1RhZyh0YWdfbmFtZSxhcmdzKXt2YXIgJGk9bnVsbDt2YXIgJG9iaj10aGlzO3ZhciBvYmo9X19CUllUSE9OX18uJERPTU5vZGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCRzdmdOUyx0YWdfbmFtZSkpO2lmKGFyZ3MhPXVuZGVmaW5lZCYmYXJncy5sZW5ndGg+MCl7JHN0YXJ0PTA7JGZpcnN0PWFyZ3NbMF07aWYoJGZpcnN0Ll9fY2xhc3NfXyE9PSRLd0RpY3QpeyRzdGFydD0xO2lmKGlzaW5zdGFuY2UoJGZpcnN0LFtzdHIsaW50LGZsb2F0XSkpe3R4dD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzdHIoJGZpcnN0KSk7b2JqLmVsdC5hcHBlbmRDaGlsZCh0eHQpO31lbHNlIGlmKCRmaXJzdC5fX2NsYXNzX189PT0kVGFnU3VtRGljdClmb3IoJGk9MDskaTwkZmlyc3QuY2hpbGRyZW4ubGVuZ3RoOyRpKyspb2JqLmVsdC5hcHBlbmRDaGlsZCgkZmlyc3QuY2hpbGRyZW5bJGldKTtlbHNlIHRyeXtvYmouZWx0LmFwcGVuZENoaWxkKCRmaXJzdC5lbHQpO31jYXRjaChlcnIpeyRyYWlzZSgnVmFsdWVFcnJvcicsJ3dyb25nIGVsZW1lbnQgJyskZmlyc3QpO319Zm9yKCRpPSRzdGFydDskaTxhcmdzLmxlbmd0aDskaSsrKXskYXJnPWFyZ3NbJGldO2lmKCRhcmcmJiRhcmcuX19jbGFzc19fPT09JEt3RGljdClpZigkYXJnLm5hbWUudG9Mb3dlckNhc2UoKS5zdWJzdHIoMCwyKT09Im9uIilldmFsKCdfX0JSWVRIT05fXy5ET01Ob2RlLmJpbmQob2JqLCInKyRhcmcubmFtZS50b0xvd2VyQ2FzZSgpLnN1YnN0cigyKSsnIixmdW5jdGlvbigpeycrJGFyZy52YWx1ZSsnfSknKTtlbHNlIGlmKCRhcmcubmFtZS50b0xvd2VyQ2FzZSgpPT0ic3R5bGUiKV9fQlJZVEhPTl9fLkRPTU5vZGUuc2V0X3N0eWxlKG9iaiwkYXJnLnZhbHVlKTtlbHNlIGlmKCRhcmcubmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImhyZWYiKSE9PS0xKW9iai5lbHQuc2V0QXR0cmlidXRlTlMoImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLCJocmVmIiwkYXJnLnZhbHVlKTtlbHNlIGlmKCRhcmcudmFsdWUhPT1mYWxzZSlvYmouZWx0LnNldEF0dHJpYnV0ZU5TKG51bGwsJGFyZy5uYW1lLnJlcGxhY2UoJ18nLCctJyksJGFyZy52YWx1ZSk7fX1yZXR1cm4gb2JqO312YXIgJHN2Z190YWdzPVsnYScsJ2FsdEdseXBoJywnYWx0R2x5cGhEZWYnLCdhbHRHbHlwaEl0ZW0nLCdhbmltYXRlJywnYW5pbWF0ZUNvbG9yJywnYW5pbWF0ZU1vdGlvbicsJ2FuaW1hdGVUcmFuc2Zvcm0nLCdjaXJjbGUnLCdjbGlwUGF0aCcsJ2NvbG9yX3Byb2ZpbGUnLCdjdXJzb3InLCdkZWZzJywnZGVzYycsJ2VsbGlwc2UnLCdmZUJsZW5kJywnZycsJ2ltYWdlJywnbGluZScsJ2xpbmVhckdyYWRpZW50JywnbWFya2VyJywnbWFzaycsJ3BhdGgnLCdwYXR0ZXJuJywncG9seWdvbicsJ3BvbHlsaW5lJywncmFkaWFsR3JhZGllbnQnLCdyZWN0Jywnc3RvcCcsJ3N2ZycsJ3RleHQnLCd0cmVmJywndHNwYW4nLCd1c2UnXTskc3ZnPWZ1bmN0aW9uKCl7cmV0dXJuICRTVkdUYWcoJ1gnLGFyZ3VtZW50cyk7fTskc3ZnKz0nJzt2YXIgb2JqPW5ldyBPYmplY3QoKTtmb3IodmFyIGk9MDtpPCRzdmdfdGFncy5sZW5ndGg7aSsrKXt2YXIgdGFnPSRzdmdfdGFnc1tpXTtldmFsKCdvYmouJyt0YWcrJz0nKyRzdmcucmVwbGFjZSgnWCcsdGFnKSk7fW9iai5fX2dldGF0dHJfXz1mdW5jdGlvbihhdHRyKXtyZXR1cm4gdGhpc1thdHRyXTt9O3JldHVybiBvYmo7fSkoKTs=',
'/libs/javascript.js':'JG1vZHVsZT17SlNPYmplY3Q6X19CUllUSE9OX18uSlNPYmplY3QsSlNDb25zdHJ1Y3RvcjpfX0JSWVRIT05fXy5KU0NvbnN0cnVjdG9yLGNvbnNvbGU6X19CUllUSE9OX18uSlNPYmplY3Qod2luZG93LmNvbnNvbGUpLGV4cG9zZTpmdW5jdGlvbihmdW5jKXt3aW5kb3dbZnVuYy5fX25hbWVfX109ZnVuYztyZXR1cm4gZnVuYzt9fTs=',
'/libs/zlib1.js':'LyoKdmFyIF96bGliPShmdW5jdGlvbigpIHsndXNlIHN0cmljdCc7ZnVuY3Rpb24gbChkKXt0aHJvdyBkO312YXIgdT12b2lkIDAseD0hMCxhYT10aGlzO2Z1bmN0aW9uIHooZCxhKXt2YXIgYz1kLnNwbGl0KCIuIiksZj1hYTshKGNbMF1pbiBmKSYmZi5leGVjU2NyaXB0JiZmLmV4ZWNTY3JpcHQoInZhciAiK2NbMF0pO2Zvcih2YXIgYjtjLmxlbmd0aCYmKGI9Yy5zaGlmdCgpKTspIWMubGVuZ3RoJiZhIT09dT9mW2JdPWE6Zj1mW2JdP2ZbYl06ZltiXT17fX07dmFyIEU9InVuZGVmaW5lZCIhPT10eXBlb2YgVWludDhBcnJheSYmInVuZGVmaW5lZCIhPT10eXBlb2YgVWludDE2QXJyYXkmJiJ1bmRlZmluZWQiIT09dHlwZW9mIFVpbnQzMkFycmF5O2Z1bmN0aW9uIEcoZCxhKXt0aGlzLmluZGV4PSJudW1iZXIiPT09dHlwZW9mIGE/YTowO3RoaXMuaT0wO3RoaXMuYnVmZmVyPWQgaW5zdGFuY2VvZihFP1VpbnQ4QXJyYXk6QXJyYXkpP2Q6bmV3IChFP1VpbnQ4QXJyYXk6QXJyYXkpKDMyNzY4KTsyKnRoaXMuYnVmZmVyLmxlbmd0aDw9dGhpcy5pbmRleCYmbChFcnJvcigiaW52YWxpZCBpbmRleCIpKTt0aGlzLmJ1ZmZlci5sZW5ndGg8PXRoaXMuaW5kZXgmJnRoaXMuZigpfUcucHJvdG90eXBlLmY9ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmJ1ZmZlcixhLGM9ZC5sZW5ndGgsZj1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoYzw8MSk7aWYoRSlmLnNldChkKTtlbHNlIGZvcihhPTA7YTxjOysrYSlmW2FdPWRbYV07cmV0dXJuIHRoaXMuYnVmZmVyPWZ9OwpHLnByb3RvdHlwZS5kPWZ1bmN0aW9uKGQsYSxjKXt2YXIgZj10aGlzLmJ1ZmZlcixiPXRoaXMuaW5kZXgsZT10aGlzLmksZz1mW2JdLGg7YyYmMTxhJiYoZD04PGE/KE5bZCYyNTVdPDwyNHxOW2Q+Pj44JjI1NV08PDE2fE5bZD4+PjE2JjI1NV08PDh8TltkPj4+MjQmMjU1XSk+PjMyLWE6TltkXT4+OC1hKTtpZig4PmErZSlnPWc8PGF8ZCxlKz1hO2Vsc2UgZm9yKGg9MDtoPGE7KytoKWc9Zzw8MXxkPj5hLWgtMSYxLDg9PT0rK2UmJihlPTAsZltiKytdPU5bZ10sZz0wLGI9PT1mLmxlbmd0aCYmKGY9dGhpcy5mKCkpKTtmW2JdPWc7dGhpcy5idWZmZXI9Zjt0aGlzLmk9ZTt0aGlzLmluZGV4PWJ9O0cucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3ZhciBkPXRoaXMuYnVmZmVyLGE9dGhpcy5pbmRleCxjOzA8dGhpcy5pJiYoZFthXTw8PTgtdGhpcy5pLGRbYV09TltkW2FdXSxhKyspO0U/Yz1kLnN1YmFycmF5KDAsYSk6KGQubGVuZ3RoPWEsYz1kKTtyZXR1cm4gY307CnZhciBmYT1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoMjU2KSxPO2ZvcihPPTA7MjU2Pk87KytPKXtmb3IodmFyIFA9TyxRPVAsZ2E9NyxQPVA+Pj4xO1A7UD4+Pj0xKVE8PD0xLFF8PVAmMSwtLWdhO2ZhW09dPShRPDxnYSYyNTUpPj4+MH12YXIgTj1mYTtmdW5jdGlvbiBoYShkKXt0aGlzLmJ1ZmZlcj1uZXcgKEU/VWludDE2QXJyYXk6QXJyYXkpKDIqZCk7dGhpcy5sZW5ndGg9MH1oYS5wcm90b3R5cGUuZ2V0UGFyZW50PWZ1bmN0aW9uKGQpe3JldHVybiAyKigoZC0yKS80fDApfTtoYS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihkLGEpe3ZhciBjLGYsYj10aGlzLmJ1ZmZlcixlO2M9dGhpcy5sZW5ndGg7Ylt0aGlzLmxlbmd0aCsrXT1hO2ZvcihiW3RoaXMubGVuZ3RoKytdPWQ7MDxjOylpZihmPXRoaXMuZ2V0UGFyZW50KGMpLGJbY10+YltmXSllPWJbY10sYltjXT1iW2ZdLGJbZl09ZSxlPWJbYysxXSxiW2MrMV09YltmKzFdLGJbZisxXT1lLGM9ZjtlbHNlIGJyZWFrO3JldHVybiB0aGlzLmxlbmd0aH07CmhhLnByb3RvdHlwZS5wb3A9ZnVuY3Rpb24oKXt2YXIgZCxhLGM9dGhpcy5idWZmZXIsZixiLGU7YT1jWzBdO2Q9Y1sxXTt0aGlzLmxlbmd0aC09MjtjWzBdPWNbdGhpcy5sZW5ndGhdO2NbMV09Y1t0aGlzLmxlbmd0aCsxXTtmb3IoZT0wOzspe2I9MiplKzI7aWYoYj49dGhpcy5sZW5ndGgpYnJlYWs7YisyPHRoaXMubGVuZ3RoJiZjW2IrMl0+Y1tiXSYmKGIrPTIpO2lmKGNbYl0+Y1tlXSlmPWNbZV0sY1tlXT1jW2JdLGNbYl09ZixmPWNbZSsxXSxjW2UrMV09Y1tiKzFdLGNbYisxXT1mO2Vsc2UgYnJlYWs7ZT1ifXJldHVybntpbmRleDpkLHZhbHVlOmEsbGVuZ3RoOnRoaXMubGVuZ3RofX07ZnVuY3Rpb24gUihkKXt2YXIgYT1kLmxlbmd0aCxjPTAsZj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksYixlLGcsaCxrLG4scSxyLHA7Zm9yKHI9MDtyPGE7KytyKWRbcl0+YyYmKGM9ZFtyXSksZFtyXTxmJiYoZj1kW3JdKTtiPTE8PGM7ZT1uZXcgKEU/VWludDMyQXJyYXk6QXJyYXkpKGIpO2c9MTtoPTA7Zm9yKGs9MjtnPD1jOyl7Zm9yKHI9MDtyPGE7KytyKWlmKGRbcl09PT1nKXtuPTA7cT1oO2ZvcihwPTA7cDxnOysrcCluPW48PDF8cSYxLHE+Pj0xO2ZvcihwPW47cDxiO3ArPWspZVtwXT1nPDwxNnxyOysraH0rK2c7aDw8PTE7azw8PTF9cmV0dXJuW2UsYyxmXX07ZnVuY3Rpb24gaWEoZCxhKXt0aGlzLmg9bWE7dGhpcy53PTA7dGhpcy5pbnB1dD1FJiZkIGluc3RhbmNlb2YgQXJyYXk/bmV3IFVpbnQ4QXJyYXkoZCk6ZDt0aGlzLmI9MDthJiYoYS5sYXp5JiYodGhpcy53PWEubGF6eSksIm51bWJlciI9PT10eXBlb2YgYS5jb21wcmVzc2lvblR5cGUmJih0aGlzLmg9YS5jb21wcmVzc2lvblR5cGUpLGEub3V0cHV0QnVmZmVyJiYodGhpcy5hPUUmJmEub3V0cHV0QnVmZmVyIGluc3RhbmNlb2YgQXJyYXk/bmV3IFVpbnQ4QXJyYXkoYS5vdXRwdXRCdWZmZXIpOmEub3V0cHV0QnVmZmVyKSwibnVtYmVyIj09PXR5cGVvZiBhLm91dHB1dEluZGV4JiYodGhpcy5iPWEub3V0cHV0SW5kZXgpKTt0aGlzLmF8fCh0aGlzLmE9bmV3IChFP1VpbnQ4QXJyYXk6QXJyYXkpKDMyNzY4KSl9dmFyIG1hPTIsbmE9e05PTkU6MCxyOjEsazptYSxOOjN9LG9hPVtdLFM7CmZvcihTPTA7Mjg4PlM7UysrKXN3aXRjaCh4KXtjYXNlIDE0Mz49UzpvYS5wdXNoKFtTKzQ4LDhdKTticmVhaztjYXNlIDI1NT49UzpvYS5wdXNoKFtTLTE0NCs0MDAsOV0pO2JyZWFrO2Nhc2UgMjc5Pj1TOm9hLnB1c2goW1MtMjU2KzAsN10pO2JyZWFrO2Nhc2UgMjg3Pj1TOm9hLnB1c2goW1MtMjgwKzE5Miw4XSk7YnJlYWs7ZGVmYXVsdDpsKCJpbnZhbGlkIGxpdGVyYWw6ICIrUyl9CmlhLnByb3RvdHlwZS5qPWZ1bmN0aW9uKCl7dmFyIGQsYSxjLGYsYj10aGlzLmlucHV0O3N3aXRjaCh0aGlzLmgpe2Nhc2UgMDpjPTA7Zm9yKGY9Yi5sZW5ndGg7YzxmOyl7YT1FP2Iuc3ViYXJyYXkoYyxjKzY1NTM1KTpiLnNsaWNlKGMsYys2NTUzNSk7Yys9YS5sZW5ndGg7dmFyIGU9YSxnPWM9PT1mLGg9dSxrPXUsbj11LHE9dSxyPXUscD10aGlzLmEsbT10aGlzLmI7aWYoRSl7Zm9yKHA9bmV3IFVpbnQ4QXJyYXkodGhpcy5hLmJ1ZmZlcik7cC5sZW5ndGg8PW0rZS5sZW5ndGgrNTspcD1uZXcgVWludDhBcnJheShwLmxlbmd0aDw8MSk7cC5zZXQodGhpcy5hKX1oPWc/MTowO3BbbSsrXT1ofDA7az1lLmxlbmd0aDtuPX5rKzY1NTM2JjY1NTM1O3BbbSsrXT1rJjI1NTtwW20rK109az4+PjgmMjU1O3BbbSsrXT1uJjI1NTtwW20rK109bj4+PjgmMjU1O2lmKEUpcC5zZXQoZSxtKSxtKz1lLmxlbmd0aCxwPXAuc3ViYXJyYXkoMCxtKTtlbHNle3E9MDtmb3Iocj1lLmxlbmd0aDtxPHI7KytxKXBbbSsrXT0KZVtxXTtwLmxlbmd0aD1tfXRoaXMuYj1tO3RoaXMuYT1wfWJyZWFrO2Nhc2UgMTp2YXIgcz1uZXcgRyhFP25ldyBVaW50OEFycmF5KHRoaXMuYS5idWZmZXIpOnRoaXMuYSx0aGlzLmIpO3MuZCgxLDEseCk7cy5kKDEsMix4KTt2YXIgdz1wYSh0aGlzLGIpLHksamEsQjt5PTA7Zm9yKGphPXcubGVuZ3RoO3k8amE7eSsrKWlmKEI9d1t5XSxHLnByb3RvdHlwZS5kLmFwcGx5KHMsb2FbQl0pLDI1NjxCKXMuZCh3WysreV0sd1srK3ldLHgpLHMuZCh3WysreV0sNSkscy5kKHdbKyt5XSx3WysreV0seCk7ZWxzZSBpZigyNTY9PT1CKWJyZWFrO3RoaXMuYT1zLmZpbmlzaCgpO3RoaXMuYj10aGlzLmEubGVuZ3RoO2JyZWFrO2Nhc2UgbWE6dmFyIEQ9bmV3IEcoRT9uZXcgVWludDhBcnJheSh0aGlzLmEuYnVmZmVyKTp0aGlzLmEsdGhpcy5iKSxEYSxNLFUsVixXLGdiPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSxiYSxFYSxjYSxGYSxrYSxyYT1BcnJheSgxOSksCkdhLFgsbGEsQSxIYTtEYT1tYTtELmQoMSwxLHgpO0QuZChEYSwyLHgpO009cGEodGhpcyxiKTtiYT1xYSh0aGlzLkwsMTUpO0VhPXNhKGJhKTtjYT1xYSh0aGlzLkssNyk7RmE9c2EoY2EpO2ZvcihVPTI4NjsyNTc8VSYmMD09PWJhW1UtMV07VS0tKTtmb3IoVj0zMDsxPFYmJjA9PT1jYVtWLTFdO1YtLSk7dmFyIElhPVUsSmE9VixJPW5ldyAoRT9VaW50MzJBcnJheTpBcnJheSkoSWErSmEpLHQsSix2LGRhLEg9bmV3IChFP1VpbnQzMkFycmF5OkFycmF5KSgzMTYpLEYsQyxLPW5ldyAoRT9VaW50OEFycmF5OkFycmF5KSgxOSk7Zm9yKHQ9Sj0wO3Q8SWE7dCsrKUlbSisrXT1iYVt0XTtmb3IodD0wO3Q8SmE7dCsrKUlbSisrXT1jYVt0XTtpZighRSl7dD0wO2ZvcihkYT1LLmxlbmd0aDt0PGRhOysrdClLW3RdPTB9dD1GPTA7Zm9yKGRhPUkubGVuZ3RoO3Q8ZGE7dCs9Sil7Zm9yKEo9MTt0K0o8ZGEmJklbdCtKXT09PUlbdF07KytKKTt2PUo7aWYoMD09PUlbdF0paWYoMz52KWZvcig7MDwKdi0tOylIW0YrK109MCxLWzBdKys7ZWxzZSBmb3IoOzA8djspQz0xMzg+dj92OjEzOCxDPnYtMyYmQzx2JiYoQz12LTMpLDEwPj1DPyhIW0YrK109MTcsSFtGKytdPUMtMyxLWzE3XSsrKTooSFtGKytdPTE4LEhbRisrXT1DLTExLEtbMThdKyspLHYtPUM7ZWxzZSBpZihIW0YrK109SVt0XSxLW0lbdF1dKyssdi0tLDM+dilmb3IoOzA8di0tOylIW0YrK109SVt0XSxLW0lbdF1dKys7ZWxzZSBmb3IoOzA8djspQz02PnY/djo2LEM+di0zJiZDPHYmJihDPXYtMyksSFtGKytdPTE2LEhbRisrXT1DLTMsS1sxNl0rKyx2LT1DfWQ9RT9ILnN1YmFycmF5KDAsRik6SC5zbGljZSgwLEYpO2thPXFhKEssNyk7Zm9yKEE9MDsxOT5BO0ErKylyYVtBXT1rYVtnYltBXV07Zm9yKFc9MTk7NDxXJiYwPT09cmFbVy0xXTtXLS0pO0dhPXNhKGthKTtELmQoVS0yNTcsNSx4KTtELmQoVi0xLDUseCk7RC5kKFctNCw0LHgpO2ZvcihBPTA7QTxXO0ErKylELmQocmFbQV0sMyx4KTtBPTA7Zm9yKEhhPWQubGVuZ3RoO0E8CkhhO0ErKylpZihYPWRbQV0sRC5kKEdhW1hdLGthW1hdLHgpLDE2PD1YKXtBKys7c3dpdGNoKFgpe2Nhc2UgMTY6bGE9MjticmVhaztjYXNlIDE3OmxhPTM7YnJlYWs7Y2FzZSAxODpsYT03O2JyZWFrO2RlZmF1bHQ6bCgiaW52YWxpZCBjb2RlOiAiK1gpfUQuZChkW0FdLGxhLHgpfXZhciBLYT1bRWEsYmFdLExhPVtGYSxjYV0sTCxNYSxlYSx1YSxOYSxPYSxQYSxRYTtOYT1LYVswXTtPYT1LYVsxXTtQYT1MYVswXTtRYT1MYVsxXTtMPTA7Zm9yKE1hPU0ubGVuZ3RoO0w8TWE7KytMKWlmKGVhPU1bTF0sRC5kKE5hW2VhXSxPYVtlYV0seCksMjU2PGVhKUQuZChNWysrTF0sTVsrK0xdLHgpLHVhPU1bKytMXSxELmQoUGFbdWFdLFFhW3VhXSx4KSxELmQoTVsrK0xdLE1bKytMXSx4KTtlbHNlIGlmKDI1Nj09PWVhKWJyZWFrO3RoaXMuYT1ELmZpbmlzaCgpO3RoaXMuYj10aGlzLmEubGVuZ3RoO2JyZWFrO2RlZmF1bHQ6bCgiaW52YWxpZCBjb21wcmVzc2lvbiB0eXBlIil9cmV0dXJuIHRoaXMuYX07CmZ1bmN0aW9uIHRhKGQsYSl7dGhpcy5sZW5ndGg9ZDt0aGlzLkc9YX0KdmFyIHZhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZChiKXtzd2l0Y2goeCl7Y2FzZSAzPT09YjpyZXR1cm5bMjU3LGItMywwXTtjYXNlIDQ9PT1iOnJldHVyblsyNTgsYi00LDBdO2Nhc2UgNT09PWI6cmV0dXJuWzI1OSxiLTUsMF07Y2FzZSA2PT09YjpyZXR1cm5bMjYwLGItNiwwXTtjYXNlIDc9PT1iOnJldHVyblsyNjEsYi03LDBdO2Nhc2UgOD09PWI6cmV0dXJuWzI2MixiLTgsMF07Y2FzZSA5PT09YjpyZXR1cm5bMjYzLGItOSwwXTtjYXNlIDEwPT09YjpyZXR1cm5bMjY0LGItMTAsMF07Y2FzZSAxMj49YjpyZXR1cm5bMjY1LGItMTEsMV07Y2FzZSAxND49YjpyZXR1cm5bMjY2LGItMTMsMV07Y2FzZSAxNj49YjpyZXR1cm5bMjY3LGItMTUsMV07Y2FzZSAxOD49YjpyZXR1cm5bMjY4LGItMTcsMV07Y2FzZSAyMj49YjpyZXR1cm5bMjY5LGItMTksMl07Y2FzZSAyNj49YjpyZXR1cm5bMjcwLGItMjMsMl07Y2FzZSAzMD49YjpyZXR1cm5bMjcxLGItMjcsMl07Y2FzZSAzND49YjpyZXR1cm5bMjcyLApiLTMxLDJdO2Nhc2UgNDI+PWI6cmV0dXJuWzI3MyxiLTM1LDNdO2Nhc2UgNTA+PWI6cmV0dXJuWzI3NCxiLTQzLDNdO2Nhc2UgNTg+PWI6cmV0dXJuWzI3NSxiLTUxLDNdO2Nhc2UgNjY+PWI6cmV0dXJuWzI3NixiLTU5LDNdO2Nhc2UgODI+PWI6cmV0dXJuWzI3NyxiLTY3LDRdO2Nhc2UgOTg+PWI6cmV0dXJuWzI3OCxiLTgzLDRdO2Nhc2UgMTE0Pj1iOnJldHVyblsyNzksYi05OSw0XTtjYXNlIDEzMD49YjpyZXR1cm5bMjgwLGItMTE1LDRdO2Nhc2UgMTYyPj1iOnJldHVyblsyODEsYi0xMzEsNV07Y2FzZSAxOTQ+PWI6cmV0dXJuWzI4MixiLTE2Myw1XTtjYXNlIDIyNj49YjpyZXR1cm5bMjgzLGItMTk1LDVdO2Nhc2UgMjU3Pj1iOnJldHVyblsyODQsYi0yMjcsNV07Y2FzZSAyNTg9PT1iOnJldHVyblsyODUsYi0yNTgsMF07ZGVmYXVsdDpsKCJpbnZhbGlkIGxlbmd0aDogIitiKX19dmFyIGE9W10sYyxmO2ZvcihjPTM7MjU4Pj1jO2MrKylmPWQoYyksYVtjXT1mWzJdPDwyNHxmWzFdPDwKMTZ8ZlswXTtyZXR1cm4gYX0oKSx3YT1FP25ldyBVaW50MzJBcnJheSh2YSk6dmE7CmZ1bmN0aW9uIHBhKGQsYSl7ZnVuY3Rpb24gYyhiLGMpe3ZhciBhPWIuRyxkPVtdLGU9MCxmO2Y9d2FbYi5sZW5ndGhdO2RbZSsrXT1mJjY1NTM1O2RbZSsrXT1mPj4xNiYyNTU7ZFtlKytdPWY+PjI0O3ZhciBnO3N3aXRjaCh4KXtjYXNlIDE9PT1hOmc9WzAsYS0xLDBdO2JyZWFrO2Nhc2UgMj09PWE6Zz1bMSxhLTIsMF07YnJlYWs7Y2FzZSAzPT09YTpnPVsyLGEtMywwXTticmVhaztjYXNlIDQ9PT1hOmc9WzMsYS00LDBdO2JyZWFrO2Nhc2UgNj49YTpnPVs0LGEtNSwxXTticmVhaztjYXNlIDg+PWE6Zz1bNSxhLTcsMV07YnJlYWs7Y2FzZSAxMj49YTpnPVs2LGEtOSwyXTticmVhaztjYXNlIDE2Pj1hOmc9WzcsYS0xMywyXTticmVhaztjYXNlIDI0Pj1hOmc9WzgsYS0xNywzXTticmVhaztjYXNlIDMyPj1hOmc9WzksYS0yNSwzXTticmVhaztjYXNlIDQ4Pj1hOmc9WzEwLGEtMzMsNF07YnJlYWs7Y2FzZSA2ND49YTpnPVsxMSxhLTQ5LDRdO2JyZWFrO2Nhc2UgOTY+PWE6Zz1bMTIsYS0KNjUsNV07YnJlYWs7Y2FzZSAxMjg+PWE6Zz1bMTMsYS05Nyw1XTticmVhaztjYXNlIDE5Mj49YTpnPVsxNCxhLTEyOSw2XTticmVhaztjYXNlIDI1Nj49YTpnPVsxNSxhLTE5Myw2XTticmVhaztjYXNlIDM4ND49YTpnPVsxNixhLTI1Nyw3XTticmVhaztjYXNlIDUxMj49YTpnPVsxNyxhLTM4NSw3XTticmVhaztjYXNlIDc2OD49YTpnPVsxOCxhLTUxMyw4XTticmVhaztjYXNlIDEwMjQ+PWE6Zz1bMTksYS03NjksOF07YnJlYWs7Y2FzZSAxNTM2Pj1hOmc9WzIwLGEtMTAyNSw5XTticmVhaztjYXNlIDIwNDg+PWE6Zz1bMjEsYS0xNTM3LDldO2JyZWFrO2Nhc2UgMzA3Mj49YTpnPVsyMixhLTIwNDksMTBdO2JyZWFrO2Nhc2UgNDA5Nj49YTpnPVsyMyxhLTMwNzMsMTBdO2JyZWFrO2Nhc2UgNjE0ND49YTpnPVsyNCxhLTQwOTcsMTFdO2JyZWFrO2Nhc2UgODE5Mj49YTpnPVsyNSxhLTYxNDUsMTFdO2JyZWFrO2Nhc2UgMTIyODg+PWE6Zz1bMjYsYS04MTkzLDEyXTticmVhaztjYXNlIDE2Mzg0Pj0KYTpnPVsyNyxhLTEyMjg5LDEyXTticmVhaztjYXNlIDI0NTc2Pj1hOmc9WzI4LGEtMTYzODUsMTNdO2JyZWFrO2Nhc2UgMzI3Njg+PWE6Zz1bMjksYS0yNDU3NywxM107YnJlYWs7ZGVmYXVsdDpsKCJpbnZhbGlkIGRpc3RhbmNlIil9Zj1nO2RbZSsrXT1mWzBdO2RbZSsrXT1mWzFdO2RbZSsrXT1mWzJdO3ZhciBoLGs7aD0wO2ZvcihrPWQubGVuZ3RoO2g8azsrK2gpcFttKytdPWRbaF07d1tkWzBdXSsrO3lbZFszXV0rKztzPWIubGVuZ3RoK2MtMTtyPW51bGx9dmFyIGYsYixlLGcsaCxrPXt9LG4scSxyLHA9RT9uZXcgVWludDE2QXJyYXkoMiphLmxlbmd0aCk6W10sbT0wLHM9MCx3PW5ldyAoRT9VaW50MzJBcnJheTpBcnJheSkoMjg2KSx5PW5ldyAoRT9VaW50MzJBcnJheTpBcnJheSkoMzApLGphPWQudyxCO2lmKCFFKXtmb3IoZT0wOzI4NT49ZTspd1tlKytdPTA7Zm9yKGU9MDsyOT49ZTspeVtlKytdPTB9d1syNTZdPTE7Zj0wO2ZvcihiPWEubGVuZ3RoO2Y8YjsrK2Ype2U9aD0wOwpmb3IoZz0zO2U8ZyYmZitlIT09YjsrK2UpaD1oPDw4fGFbZitlXTtrW2hdPT09dSYmKGtbaF09W10pO249a1toXTtpZighKDA8cy0tKSl7Zm9yKDswPG4ubGVuZ3RoJiYzMjc2ODxmLW5bMF07KW4uc2hpZnQoKTtpZihmKzM+PWIpe3ImJmMociwtMSk7ZT0wO2ZvcihnPWItZjtlPGc7KytlKUI9YVtmK2VdLHBbbSsrXT1CLCsrd1tCXTticmVha30wPG4ubGVuZ3RoPyhxPXhhKGEsZixuKSxyP3IubGVuZ3RoPHEubGVuZ3RoPyhCPWFbZi0xXSxwW20rK109QiwrK3dbQl0sYyhxLDApKTpjKHIsLTEpOnEubGVuZ3RoPGphP3I9cTpjKHEsMCkpOnI/YyhyLC0xKTooQj1hW2ZdLHBbbSsrXT1CLCsrd1tCXSl9bi5wdXNoKGYpfXBbbSsrXT0yNTY7d1syNTZdKys7ZC5MPXc7ZC5LPXk7cmV0dXJuIEU/cC5zdWJhcnJheSgwLG0pOnB9CmZ1bmN0aW9uIHhhKGQsYSxjKXt2YXIgZixiLGU9MCxnLGgsayxuLHE9ZC5sZW5ndGg7aD0wO249Yy5sZW5ndGg7YTpmb3IoO2g8bjtoKyspe2Y9Y1tuLWgtMV07Zz0zO2lmKDM8ZSl7Zm9yKGs9ZTszPGs7ay0tKWlmKGRbZitrLTFdIT09ZFthK2stMV0pY29udGludWUgYTtnPWV9Zm9yKDsyNTg+ZyYmYStnPHEmJmRbZitnXT09PWRbYStnXTspKytnO2c+ZSYmKGI9ZixlPWcpO2lmKDI1OD09PWcpYnJlYWt9cmV0dXJuIG5ldyB0YShlLGEtYil9CmZ1bmN0aW9uIHFhKGQsYSl7dmFyIGM9ZC5sZW5ndGgsZj1uZXcgaGEoNTcyKSxiPW5ldyAoRT9VaW50OEFycmF5OkFycmF5KShjKSxlLGcsaCxrLG47aWYoIUUpZm9yKGs9MDtrPGM7aysrKWJba109MDtmb3Ioaz0wO2s8YzsrK2spMDxkW2tdJiZmLnB1c2goayxkW2tdKTtlPUFycmF5KGYubGVuZ3RoLzIpO2c9bmV3IChFP1VpbnQzMkFycmF5OkFycmF5KShmLmxlbmd0aC8yKTtpZigxPT09ZS5sZW5ndGgpcmV0dXJuIGJbZi5wb3AoKS5pbmRleF09MSxiO2s9MDtmb3Iobj1mLmxlbmd0aC8yO2s8bjsrK2spZVtrXT1mLnBvcCgpLGdba109ZVtrXS52YWx1ZTtoPXlhKGcsZy5sZW5ndGgsYSk7az0wO2ZvcihuPWUubGVuZ3RoO2s8bjsrK2spYltlW2tdLmluZGV4XT1oW2tdO3JldHVybiBifQpmdW5jdGlvbiB5YShkLGEsYyl7ZnVuY3Rpb24gZihiKXt2YXIgYz1rW2JdW25bYl1dO2M9PT1hPyhmKGIrMSksZihiKzEpKTotLWdbY107KytuW2JdfXZhciBiPW5ldyAoRT9VaW50MTZBcnJheTpBcnJheSkoYyksZT1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoYyksZz1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoYSksaD1BcnJheShjKSxrPUFycmF5KGMpLG49QXJyYXkoYykscT0oMTw8YyktYSxyPTE8PGMtMSxwLG0scyx3LHk7YltjLTFdPWE7Zm9yKG09MDttPGM7KyttKXE8cj9lW21dPTA6KGVbbV09MSxxLT1yKSxxPDw9MSxiW2MtMi1tXT0oYltjLTEtbV0vMnwwKSthO2JbMF09ZVswXTtoWzBdPUFycmF5KGJbMF0pO2tbMF09QXJyYXkoYlswXSk7Zm9yKG09MTttPGM7KyttKWJbbV0+MipiW20tMV0rZVttXSYmKGJbbV09MipiW20tMV0rZVttXSksaFttXT1BcnJheShiW21dKSxrW21dPUFycmF5KGJbbV0pO2ZvcihwPTA7cDxhOysrcClnW3BdPWM7Zm9yKHM9MDtzPGJbYy0xXTsrK3MpaFtjLQoxXVtzXT1kW3NdLGtbYy0xXVtzXT1zO2ZvcihwPTA7cDxjOysrcCluW3BdPTA7MT09PWVbYy0xXSYmKC0tZ1swXSwrK25bYy0xXSk7Zm9yKG09Yy0yOzA8PW07LS1tKXt3PXA9MDt5PW5bbSsxXTtmb3Iocz0wO3M8YlttXTtzKyspdz1oW20rMV1beV0raFttKzFdW3krMV0sdz5kW3BdPyhoW21dW3NdPXcsa1ttXVtzXT1hLHkrPTIpOihoW21dW3NdPWRbcF0sa1ttXVtzXT1wLCsrcCk7blttXT0wOzE9PT1lW21dJiZmKG0pfXJldHVybiBnfQpmdW5jdGlvbiBzYShkKXt2YXIgYT1uZXcgKEU/VWludDE2QXJyYXk6QXJyYXkpKGQubGVuZ3RoKSxjPVtdLGY9W10sYj0wLGUsZyxoLGs7ZT0wO2ZvcihnPWQubGVuZ3RoO2U8ZztlKyspY1tkW2VdXT0oY1tkW2VdXXwwKSsxO2U9MTtmb3IoZz0xNjtlPD1nO2UrKylmW2VdPWIsYis9Y1tlXXwwLGI8PD0xO2U9MDtmb3IoZz1kLmxlbmd0aDtlPGc7ZSsrKXtiPWZbZFtlXV07ZltkW2VdXSs9MTtoPWFbZV09MDtmb3Ioaz1kW2VdO2g8aztoKyspYVtlXT1hW2VdPDwxfGImMSxiPj4+PTF9cmV0dXJuIGF9O2Z1bmN0aW9uIFQoZCxhKXt0aGlzLmw9W107dGhpcy5tPTMyNzY4O3RoaXMuZT10aGlzLmc9dGhpcy5jPXRoaXMucT0wO3RoaXMuaW5wdXQ9RT9uZXcgVWludDhBcnJheShkKTpkO3RoaXMucz0hMTt0aGlzLm49emE7dGhpcy5CPSExO2lmKGF8fCEoYT17fSkpYS5pbmRleCYmKHRoaXMuYz1hLmluZGV4KSxhLmJ1ZmZlclNpemUmJih0aGlzLm09YS5idWZmZXJTaXplKSxhLmJ1ZmZlclR5cGUmJih0aGlzLm49YS5idWZmZXJUeXBlKSxhLnJlc2l6ZSYmKHRoaXMuQj1hLnJlc2l6ZSk7c3dpdGNoKHRoaXMubil7Y2FzZSBBYTp0aGlzLmI9MzI3Njg7dGhpcy5hPW5ldyAoRT9VaW50OEFycmF5OkFycmF5KSgzMjc2OCt0aGlzLm0rMjU4KTticmVhaztjYXNlIHphOnRoaXMuYj0wO3RoaXMuYT1uZXcgKEU/VWludDhBcnJheTpBcnJheSkodGhpcy5tKTt0aGlzLmY9dGhpcy5KO3RoaXMudD10aGlzLkg7dGhpcy5vPXRoaXMuSTticmVhaztkZWZhdWx0OmwoRXJyb3IoImludmFsaWQgaW5mbGF0ZSBtb2RlIikpfX0KdmFyIEFhPTAsemE9MSxCYT17RDpBYSxDOnphfTsKVC5wcm90b3R5cGUucD1mdW5jdGlvbigpe2Zvcig7IXRoaXMuczspe3ZhciBkPVkodGhpcywzKTtkJjEmJih0aGlzLnM9eCk7ZD4+Pj0xO3N3aXRjaChkKXtjYXNlIDA6dmFyIGE9dGhpcy5pbnB1dCxjPXRoaXMuYyxmPXRoaXMuYSxiPXRoaXMuYixlPXUsZz11LGg9dSxrPWYubGVuZ3RoLG49dTt0aGlzLmU9dGhpcy5nPTA7ZT1hW2MrK107ZT09PXUmJmwoRXJyb3IoImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogTEVOIChmaXJzdCBieXRlKSIpKTtnPWU7ZT1hW2MrK107ZT09PXUmJmwoRXJyb3IoImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogTEVOIChzZWNvbmQgYnl0ZSkiKSk7Z3w9ZTw8ODtlPWFbYysrXTtlPT09dSYmbChFcnJvcigiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBOTEVOIChmaXJzdCBieXRlKSIpKTtoPWU7ZT1hW2MrK107ZT09PXUmJmwoRXJyb3IoImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogTkxFTiAoc2Vjb25kIGJ5dGUpIikpO2h8PQplPDw4O2c9PT1+aCYmbChFcnJvcigiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBsZW5ndGggdmVyaWZ5IikpO2MrZz5hLmxlbmd0aCYmbChFcnJvcigiaW5wdXQgYnVmZmVyIGlzIGJyb2tlbiIpKTtzd2l0Y2godGhpcy5uKXtjYXNlIEFhOmZvcig7YitnPmYubGVuZ3RoOyl7bj1rLWI7Zy09bjtpZihFKWYuc2V0KGEuc3ViYXJyYXkoYyxjK24pLGIpLGIrPW4sYys9bjtlbHNlIGZvcig7bi0tOylmW2IrK109YVtjKytdO3RoaXMuYj1iO2Y9dGhpcy5mKCk7Yj10aGlzLmJ9YnJlYWs7Y2FzZSB6YTpmb3IoO2IrZz5mLmxlbmd0aDspZj10aGlzLmYoe3Y6Mn0pO2JyZWFrO2RlZmF1bHQ6bChFcnJvcigiaW52YWxpZCBpbmZsYXRlIG1vZGUiKSl9aWYoRSlmLnNldChhLnN1YmFycmF5KGMsYytnKSxiKSxiKz1nLGMrPWc7ZWxzZSBmb3IoO2ctLTspZltiKytdPWFbYysrXTt0aGlzLmM9Yzt0aGlzLmI9Yjt0aGlzLmE9ZjticmVhaztjYXNlIDE6dGhpcy5vKENhLFJhKTticmVhazsKY2FzZSAyOlNhKHRoaXMpO2JyZWFrO2RlZmF1bHQ6bChFcnJvcigidW5rbm93biBCVFlQRTogIitkKSl9fXJldHVybiB0aGlzLnQoKX07CnZhciBUYT1bMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0sVWE9RT9uZXcgVWludDE2QXJyYXkoVGEpOlRhLFZhPVszLDQsNSw2LDcsOCw5LDEwLDExLDEzLDE1LDE3LDE5LDIzLDI3LDMxLDM1LDQzLDUxLDU5LDY3LDgzLDk5LDExNSwxMzEsMTYzLDE5NSwyMjcsMjU4LDI1OCwyNThdLFdhPUU/bmV3IFVpbnQxNkFycmF5KFZhKTpWYSxYYT1bMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwLDAsMF0sWWE9RT9uZXcgVWludDhBcnJheShYYSk6WGEsWmE9WzEsMiwzLDQsNSw3LDksMTMsMTcsMjUsMzMsNDksNjUsOTcsMTI5LDE5MywyNTcsMzg1LDUxMyw3NjksMTAyNSwxNTM3LDIwNDksMzA3Myw0MDk3LDYxNDUsODE5MywxMjI4OSwxNjM4NSwyNDU3N10sJGE9RT9uZXcgVWludDE2QXJyYXkoWmEpOlphLGFiPVswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLAoxMCwxMSwxMSwxMiwxMiwxMywxM10sYmI9RT9uZXcgVWludDhBcnJheShhYik6YWIsY2I9bmV3IChFP1VpbnQ4QXJyYXk6QXJyYXkpKDI4OCksWixkYjtaPTA7Zm9yKGRiPWNiLmxlbmd0aDtaPGRiOysrWiljYltaXT0xNDM+PVo/ODoyNTU+PVo/OToyNzk+PVo/Nzo4O3ZhciBDYT1SKGNiKSxlYj1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoMzApLGZiLGhiO2ZiPTA7Zm9yKGhiPWViLmxlbmd0aDtmYjxoYjsrK2ZiKWViW2ZiXT01O3ZhciBSYT1SKGViKTtmdW5jdGlvbiBZKGQsYSl7Zm9yKHZhciBjPWQuZyxmPWQuZSxiPWQuaW5wdXQsZT1kLmMsZztmPGE7KWc9YltlKytdLGc9PT11JiZsKEVycm9yKCJpbnB1dCBidWZmZXIgaXMgYnJva2VuIikpLGN8PWc8PGYsZis9ODtnPWMmKDE8PGEpLTE7ZC5nPWM+Pj5hO2QuZT1mLWE7ZC5jPWU7cmV0dXJuIGd9CmZ1bmN0aW9uIGliKGQsYSl7Zm9yKHZhciBjPWQuZyxmPWQuZSxiPWQuaW5wdXQsZT1kLmMsZz1hWzBdLGg9YVsxXSxrLG4scTtmPGg7KXtrPWJbZSsrXTtpZihrPT09dSlicmVhaztjfD1rPDxmO2YrPTh9bj1nW2MmKDE8PGgpLTFdO3E9bj4+PjE2O2QuZz1jPj5xO2QuZT1mLXE7ZC5jPWU7cmV0dXJuIG4mNjU1MzV9CmZ1bmN0aW9uIFNhKGQpe2Z1bmN0aW9uIGEoYSxiLGMpe3ZhciBkLGYsZSxnO2ZvcihnPTA7ZzxhOylzd2l0Y2goZD1pYih0aGlzLGIpLGQpe2Nhc2UgMTY6Zm9yKGU9MytZKHRoaXMsMik7ZS0tOyljW2crK109ZjticmVhaztjYXNlIDE3OmZvcihlPTMrWSh0aGlzLDMpO2UtLTspY1tnKytdPTA7Zj0wO2JyZWFrO2Nhc2UgMTg6Zm9yKGU9MTErWSh0aGlzLDcpO2UtLTspY1tnKytdPTA7Zj0wO2JyZWFrO2RlZmF1bHQ6Zj1jW2crK109ZH1yZXR1cm4gY312YXIgYz1ZKGQsNSkrMjU3LGY9WShkLDUpKzEsYj1ZKGQsNCkrNCxlPW5ldyAoRT9VaW50OEFycmF5OkFycmF5KShVYS5sZW5ndGgpLGcsaCxrLG47Zm9yKG49MDtuPGI7KytuKWVbVWFbbl1dPVkoZCwzKTtnPVIoZSk7aD1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoYyk7az1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoZik7ZC5vKFIoYS5jYWxsKGQsYyxnLGgpKSxSKGEuY2FsbChkLGYsZyxrKSkpfQpULnByb3RvdHlwZS5vPWZ1bmN0aW9uKGQsYSl7dmFyIGM9dGhpcy5hLGY9dGhpcy5iO3RoaXMudT1kO2Zvcih2YXIgYj1jLmxlbmd0aC0yNTgsZSxnLGgsazsyNTYhPT0oZT1pYih0aGlzLGQpKTspaWYoMjU2PmUpZj49YiYmKHRoaXMuYj1mLGM9dGhpcy5mKCksZj10aGlzLmIpLGNbZisrXT1lO2Vsc2V7Zz1lLTI1NztrPVdhW2ddOzA8WWFbZ10mJihrKz1ZKHRoaXMsWWFbZ10pKTtlPWliKHRoaXMsYSk7aD0kYVtlXTswPGJiW2VdJiYoaCs9WSh0aGlzLGJiW2VdKSk7Zj49YiYmKHRoaXMuYj1mLGM9dGhpcy5mKCksZj10aGlzLmIpO2Zvcig7ay0tOyljW2ZdPWNbZisrLWhdfWZvcig7ODw9dGhpcy5lOyl0aGlzLmUtPTgsdGhpcy5jLS07dGhpcy5iPWZ9OwpULnByb3RvdHlwZS5JPWZ1bmN0aW9uKGQsYSl7dmFyIGM9dGhpcy5hLGY9dGhpcy5iO3RoaXMudT1kO2Zvcih2YXIgYj1jLmxlbmd0aCxlLGcsaCxrOzI1NiE9PShlPWliKHRoaXMsZCkpOylpZigyNTY+ZSlmPj1iJiYoYz10aGlzLmYoKSxiPWMubGVuZ3RoKSxjW2YrK109ZTtlbHNle2c9ZS0yNTc7az1XYVtnXTswPFlhW2ddJiYoays9WSh0aGlzLFlhW2ddKSk7ZT1pYih0aGlzLGEpO2g9JGFbZV07MDxiYltlXSYmKGgrPVkodGhpcyxiYltlXSkpO2Yraz5iJiYoYz10aGlzLmYoKSxiPWMubGVuZ3RoKTtmb3IoO2stLTspY1tmXT1jW2YrKy1oXX1mb3IoOzg8PXRoaXMuZTspdGhpcy5lLT04LHRoaXMuYy0tO3RoaXMuYj1mfTsKVC5wcm90b3R5cGUuZj1mdW5jdGlvbigpe3ZhciBkPW5ldyAoRT9VaW50OEFycmF5OkFycmF5KSh0aGlzLmItMzI3NjgpLGE9dGhpcy5iLTMyNzY4LGMsZixiPXRoaXMuYTtpZihFKWQuc2V0KGIuc3ViYXJyYXkoMzI3NjgsZC5sZW5ndGgpKTtlbHNle2M9MDtmb3IoZj1kLmxlbmd0aDtjPGY7KytjKWRbY109YltjKzMyNzY4XX10aGlzLmwucHVzaChkKTt0aGlzLnErPWQubGVuZ3RoO2lmKEUpYi5zZXQoYi5zdWJhcnJheShhLGErMzI3NjgpKTtlbHNlIGZvcihjPTA7MzI3Njg+YzsrK2MpYltjXT1iW2ErY107dGhpcy5iPTMyNzY4O3JldHVybiBifTsKVC5wcm90b3R5cGUuSj1mdW5jdGlvbihkKXt2YXIgYSxjPXRoaXMuaW5wdXQubGVuZ3RoL3RoaXMuYysxfDAsZixiLGUsZz10aGlzLmlucHV0LGg9dGhpcy5hO2QmJigibnVtYmVyIj09PXR5cGVvZiBkLnYmJihjPWQudiksIm51bWJlciI9PT10eXBlb2YgZC5GJiYoYys9ZC5GKSk7Mj5jPyhmPShnLmxlbmd0aC10aGlzLmMpL3RoaXMudVsyXSxlPTI1OCooZi8yKXwwLGI9ZTxoLmxlbmd0aD9oLmxlbmd0aCtlOmgubGVuZ3RoPDwxKTpiPWgubGVuZ3RoKmM7RT8oYT1uZXcgVWludDhBcnJheShiKSxhLnNldChoKSk6YT1oO3JldHVybiB0aGlzLmE9YX07ClQucHJvdG90eXBlLnQ9ZnVuY3Rpb24oKXt2YXIgZD0wLGE9dGhpcy5hLGM9dGhpcy5sLGYsYj1uZXcgKEU/VWludDhBcnJheTpBcnJheSkodGhpcy5xKyh0aGlzLmItMzI3NjgpKSxlLGcsaCxrO2lmKDA9PT1jLmxlbmd0aClyZXR1cm4gRT90aGlzLmEuc3ViYXJyYXkoMzI3NjgsdGhpcy5iKTp0aGlzLmEuc2xpY2UoMzI3NjgsdGhpcy5iKTtlPTA7Zm9yKGc9Yy5sZW5ndGg7ZTxnOysrZSl7Zj1jW2VdO2g9MDtmb3Ioaz1mLmxlbmd0aDtoPGs7KytoKWJbZCsrXT1mW2hdfWU9MzI3Njg7Zm9yKGc9dGhpcy5iO2U8ZzsrK2UpYltkKytdPWFbZV07dGhpcy5sPVtdO3JldHVybiB0aGlzLmJ1ZmZlcj1ifTsKVC5wcm90b3R5cGUuSD1mdW5jdGlvbigpe3ZhciBkLGE9dGhpcy5iO0U/dGhpcy5CPyhkPW5ldyBVaW50OEFycmF5KGEpLGQuc2V0KHRoaXMuYS5zdWJhcnJheSgwLGEpKSk6ZD10aGlzLmEuc3ViYXJyYXkoMCxhKToodGhpcy5hLmxlbmd0aD5hJiYodGhpcy5hLmxlbmd0aD1hKSxkPXRoaXMuYSk7cmV0dXJuIHRoaXMuYnVmZmVyPWR9O2Z1bmN0aW9uIGpiKGQpe2lmKCJzdHJpbmciPT09dHlwZW9mIGQpe3ZhciBhPWQuc3BsaXQoIiIpLGMsZjtjPTA7Zm9yKGY9YS5sZW5ndGg7YzxmO2MrKylhW2NdPShhW2NdLmNoYXJDb2RlQXQoMCkmMjU1KT4+PjA7ZD1hfWZvcih2YXIgYj0xLGU9MCxnPWQubGVuZ3RoLGgsaz0wOzA8Zzspe2g9MTAyNDxnPzEwMjQ6ZztnLT1oO2RvIGIrPWRbaysrXSxlKz1iO3doaWxlKC0taCk7YiU9NjU1MjE7ZSU9NjU1MjF9cmV0dXJuKGU8PDE2fGIpPj4+MH07ZnVuY3Rpb24ga2IoZCxhKXt2YXIgYyxmO3RoaXMuaW5wdXQ9ZDt0aGlzLmM9MDtpZihhfHwhKGE9e30pKWEuaW5kZXgmJih0aGlzLmM9YS5pbmRleCksYS52ZXJpZnkmJih0aGlzLk09YS52ZXJpZnkpO2M9ZFt0aGlzLmMrK107Zj1kW3RoaXMuYysrXTtzd2l0Y2goYyYxNSl7Y2FzZSBsYjp0aGlzLm1ldGhvZD1sYjticmVhaztkZWZhdWx0OmwoRXJyb3IoInVuc3VwcG9ydGVkIGNvbXByZXNzaW9uIG1ldGhvZCIpKX0wIT09KChjPDw4KStmKSUzMSYmbChFcnJvcigiaW52YWxpZCBmY2hlY2sgZmxhZzoiKygoYzw8OCkrZiklMzEpKTtmJjMyJiZsKEVycm9yKCJmZGljdCBmbGFnIGlzIG5vdCBzdXBwb3J0ZWQiKSk7dGhpcy5BPW5ldyBUKGQse2luZGV4OnRoaXMuYyxidWZmZXJTaXplOmEuYnVmZmVyU2l6ZSxidWZmZXJUeXBlOmEuYnVmZmVyVHlwZSxyZXNpemU6YS5yZXNpemV9KX0Ka2IucHJvdG90eXBlLnA9ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmlucHV0LGEsYzthPXRoaXMuQS5wKCk7dGhpcy5jPXRoaXMuQS5jO3RoaXMuTSYmKGM9KGRbdGhpcy5jKytdPDwyNHxkW3RoaXMuYysrXTw8MTZ8ZFt0aGlzLmMrK108PDh8ZFt0aGlzLmMrK10pPj4+MCxjIT09amIoYSkmJmwoRXJyb3IoImludmFsaWQgYWRsZXItMzIgY2hlY2tzdW0iKSkpO3JldHVybiBhfTt2YXIgbGI9ODtmdW5jdGlvbiBtYihkLGEpe3RoaXMuaW5wdXQ9ZDt0aGlzLmE9bmV3IChFP1VpbnQ4QXJyYXk6QXJyYXkpKDMyNzY4KTt0aGlzLmg9JC5rO3ZhciBjPXt9LGY7aWYoKGF8fCEoYT17fSkpJiYibnVtYmVyIj09PXR5cGVvZiBhLmNvbXByZXNzaW9uVHlwZSl0aGlzLmg9YS5jb21wcmVzc2lvblR5cGU7Zm9yKGYgaW4gYSljW2ZdPWFbZl07Yy5vdXRwdXRCdWZmZXI9dGhpcy5hO3RoaXMuej1uZXcgaWEodGhpcy5pbnB1dCxjKX12YXIgJD1uYTsKbWIucHJvdG90eXBlLmo9ZnVuY3Rpb24oKXt2YXIgZCxhLGMsZixiLGUsZyxoPTA7Zz10aGlzLmE7ZD1sYjtzd2l0Y2goZCl7Y2FzZSBsYjphPU1hdGguTE9HMkUqTWF0aC5sb2coMzI3NjgpLTg7YnJlYWs7ZGVmYXVsdDpsKEVycm9yKCJpbnZhbGlkIGNvbXByZXNzaW9uIG1ldGhvZCIpKX1jPWE8PDR8ZDtnW2grK109Yztzd2l0Y2goZCl7Y2FzZSBsYjpzd2l0Y2godGhpcy5oKXtjYXNlICQuTk9ORTpiPTA7YnJlYWs7Y2FzZSAkLnI6Yj0xO2JyZWFrO2Nhc2UgJC5rOmI9MjticmVhaztkZWZhdWx0OmwoRXJyb3IoInVuc3VwcG9ydGVkIGNvbXByZXNzaW9uIHR5cGUiKSl9YnJlYWs7ZGVmYXVsdDpsKEVycm9yKCJpbnZhbGlkIGNvbXByZXNzaW9uIG1ldGhvZCIpKX1mPWI8PDZ8MDtnW2grK109ZnwzMS0oMjU2KmMrZiklMzE7ZT1qYih0aGlzLmlucHV0KTt0aGlzLnouYj1oO2c9dGhpcy56LmooKTtoPWcubGVuZ3RoO0UmJihnPW5ldyBVaW50OEFycmF5KGcuYnVmZmVyKSxnLmxlbmd0aDw9CmgrNCYmKHRoaXMuYT1uZXcgVWludDhBcnJheShnLmxlbmd0aCs0KSx0aGlzLmEuc2V0KGcpLGc9dGhpcy5hKSxnPWcuc3ViYXJyYXkoMCxoKzQpKTtnW2grK109ZT4+MjQmMjU1O2dbaCsrXT1lPj4xNiYyNTU7Z1toKytdPWU+PjgmMjU1O2dbaCsrXT1lJjI1NTtyZXR1cm4gZ307ZnVuY3Rpb24gbmIoZCxhKXt2YXIgYyxmLGIsZTtpZihPYmplY3Qua2V5cyljPU9iamVjdC5rZXlzKGEpO2Vsc2UgZm9yKGYgaW4gYz1bXSxiPTAsYSljW2IrK109ZjtiPTA7Zm9yKGU9Yy5sZW5ndGg7YjxlOysrYilmPWNbYl0seihkKyIuIitmLGFbZl0pfTt6KCJabGliLkluZmxhdGUiLGtiKTt6KCJabGliLkluZmxhdGUucHJvdG90eXBlLmRlY29tcHJlc3MiLGtiLnByb3RvdHlwZS5wKTtuYigiWmxpYi5JbmZsYXRlLkJ1ZmZlclR5cGUiLHtBREFQVElWRTpCYS5DLEJMT0NLOkJhLkR9KTt6KCJabGliLkRlZmxhdGUiLG1iKTt6KCJabGliLkRlZmxhdGUuY29tcHJlc3MiLGZ1bmN0aW9uKGQsYSl7cmV0dXJuKG5ldyBtYihkLGEpKS5qKCl9KTt6KCJabGliLkRlZmxhdGUucHJvdG90eXBlLmNvbXByZXNzIixtYi5wcm90b3R5cGUuaik7bmIoIlpsaWIuRGVmbGF0ZS5Db21wcmVzc2lvblR5cGUiLHtOT05FOiQuTk9ORSxGSVhFRDokLnIsRFlOQU1JQzokLmt9KTt9KS5jYWxsKHRoaXMpOwoqLwoKJG1vZHVsZSA9IHsKCi8qKiBAbGljZW5zZSB6bGliLmpzIDIwMTIgLSBpbWF5YSBbIGh0dHBzOi8vZ2l0aHViLmNvbS9pbWF5YS96bGliLmpzIF0gVGhlIE1JVCBMaWNlbnNlICovCgoKZGVjb21wcmVzcz0gZnVuY3Rpb24gKGRhdGEpIHsKICAgdmFyIF9pbmZsYXRlID0gbmV3IF96bGliLkluZmxhdGUoZGF0YSkKICAgcmV0dXJuIF9pbmZsYXRlLmRlY29tcHJlc3MoKQp9Cgpjb21wcmVzcz0gZnVuY3Rpb24gKGRhdGEpIHsKICAgdmFyIF9kZWZsYXRlID0gbmV3IF96bGliLkRlZmxhdGUoZGF0YSkKICAgcmV0dXJuIF9kZWZsYXRlLmNvbXByZXNzKCkKfQoKCn0gLy8gZW5kICRtb2R1bGUK',
'/libs/time.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmb3IodmFyICRweV9idWlsdGluIGluIF9fYnVpbHRpbnNfXylldmFsKCJ2YXIgIiskcHlfYnVpbHRpbisiPV9fYnVpbHRpbnNfX1skcHlfYnVpbHRpbl0iKTt2YXIgJEpTT2JqZWN0PV9fQlJZVEhPTl9fLiRKU09iamVjdDt2YXIgSlNPYmplY3Q9X19CUllUSE9OX18uSlNPYmplY3Q7cmV0dXJue19fbmFtZV9fOid0aW1lJyxjdGltZTpmdW5jdGlvbih0aW1lc3RhbXApe2lmKHRpbWVzdGFtcD09PXVuZGVmaW5lZCl0aW1lc3RhbXA9aW50KG5ldyBEYXRlKCkuZ2V0VGltZSgpLzEwMDApO3ZhciBkPW5ldyBEYXRlKDApO2Quc2V0VVRDU2Vjb25kcyh0aW1lc3RhbXApO3JldHVybiBkLnRvVVRDU3RyaW5nKCk7fSxnbXRpbWU6ZnVuY3Rpb24oKXt2YXIgZD1uZXcgRGF0ZSgpO3JldHVybiBbZC5nZXRGdWxsWWVhcigpLGQuZ2V0TW9udGgoKSsxLGQuZ2V0RGF0ZSgpLGQuZ2V0SG91cnMoKSxkLmdldE1pbnV0ZXMoKSxkLmdldFNlY29uZHMoKSxkLmdldERheSgpLDAsMF07fSxwZXJmX2NvdW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gZmxvYXQobmV3IERhdGUoKS5nZXRUaW1lKCkvMTAwMC4wKTt9LGxvY2FsdGltZTpmdW5jdGlvbihzZWNzKXt2YXIgZD1uZXcgRGF0ZSgpO2lmKHNlY3M9PT11bmRlZmluZWR8fHNlY3M9PT1Ob25lKXJldHVybiBkLmdldFRpbWUoKTt2YXIgamFuPW5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwwLDEpO3ZhciBqdWw9bmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLDYsMSk7dmFyIGRzdD1pbnQoZC5nZXRUaW1lem9uZU9mZnNldCgpPE1hdGgubWF4KGphbi5nZXRUaW1lem9uZU9mZnNldCgpLGp1bC5nZXRUaW1lem9uZU9mZnNldCgpKSk7cmV0dXJuIFtkLmdldEZ1bGxZZWFyKCksZC5nZXRNb250aCgpKzEsZC5nZXREYXRlKCksZC5nZXRIb3VycygpLGQuZ2V0TWludXRlcygpLGQuZ2V0U2Vjb25kcygpLGQuZ2V0RGF5KCksMCxkc3RdO30sdGltZTpmdW5jdGlvbigpe3JldHVybiBmbG9hdCgobmV3IERhdGUoKS5nZXRUaW1lKCkpLzEwMDApO30sc2xlZXA6ZnVuY3Rpb24oc2Vjcyl7fSxzdHJmdGltZTpmdW5jdGlvbihmb3JtYXQsYXJnKXtmdW5jdGlvbiBucyhhcmcsbmIpe3ZhciByZXM9YXJnLnRvU3RyaW5nKCk7d2hpbGUocmVzLmxlbmd0aDxuYilyZXM9JzAnK3JlcztyZXR1cm4gcmVzO31pZihhcmcpdmFyIG9iaj1uZXcgRGF0ZShhcmdbMF0sYXJnWzFdLTEsYXJnWzJdLGFyZ1szXSxhcmdbNF0sYXJnWzVdLGFyZ1s2XSk7ZWxzZSB2YXIgb2JqPW5ldyBEYXRlKCk7dmFyIGFiYl93ZWVrZGF5cz1bJ1N1JywnTW8nLCdUdScsJ1dlJywnVGgnLCdGcicsJ1NhJ107dmFyIGZ1bGxfd2Vla2RheXM9WydTdW5kYXknLCdNb25kYXknLCdUdWVzZGF5JywnV2VkbmVzZGF5JywnVGh1cnNkYXknLCdGcmlkYXknLCdTYXR1cmRheSddO3ZhciBhYmJfbW9udGhzPVsnSmFuJywnRmViJywnTWFyJywnQXByJywnTWF5JywnSnVuJywnSnVsJywnQXVnJywnU2VwJywnT2N0JywnTm92JywnRGVjJ107dmFyIGZ1bGxfbW9udGhzPVsnSmFudWFyeScsJ0ZlYnJ1YXJ5JywnTWFyY2gnLCdBcHJpbCcsJ01heScsJ0p1bmUnLCdKdWx5JywnQXVndXN0JywnU2VwdGVtYmVyJywnT2N0b2JlcicsJ05vdmVtYmVyJywnRGVjZW1iZXInXTt2YXIgcmVzPWZvcm1hdDtyZXM9cmVzLnJlcGxhY2UoLyVILyxucyhvYmouZ2V0SG91cnMoKSwyKSk7cmVzPXJlcy5yZXBsYWNlKC8lTS8sbnMob2JqLmdldE1pbnV0ZXMoKSwyKSk7cmVzPXJlcy5yZXBsYWNlKC8lUy8sbnMob2JqLmdldFNlY29uZHMoKSwyKSk7cmVzPXJlcy5yZXBsYWNlKC8lWS8sbnMob2JqLmdldEZ1bGxZZWFyKCksNCkpO3Jlcz1yZXMucmVwbGFjZSgvJXkvLG5zKG9iai5nZXRGdWxsWWVhcigpLDQpLnN1YnN0cigyKSk7cmVzPXJlcy5yZXBsYWNlKC8lbS8sbnMob2JqLmdldE1vbnRoKCkrMSwyKSk7cmVzPXJlcy5yZXBsYWNlKC8lZC8sbnMob2JqLmdldERhdGUoKSwyKSk7cmVzPXJlcy5yZXBsYWNlKC8lYS8sYWJiX3dlZWtkYXlzW29iai5nZXREYXkoKV0pO3Jlcz1yZXMucmVwbGFjZSgvJUEvLGZ1bGxfd2Vla2RheXNbb2JqLmdldERheSgpXSk7cmVzPXJlcy5yZXBsYWNlKC8lYi8sYWJiX21vbnRoc1tvYmouZ2V0TW9udGgoKV0pO3Jlcz1yZXMucmVwbGFjZSgvJUIvLGZ1bGxfbW9udGhzW29iai5nZXRNb250aCgpXSk7cmV0dXJuIHJlczt9LHN0cnVjdF90aW1lOmZ1bmN0aW9uKGFyZyl7Y29uc29sZS5sb2coJ3N0cnVjdCB0aW1lJyk7Y29uc29sZS5sb2coJ2xpc3QgJytsaXN0KTtpZighaXNpbnN0YW5jZShhcmcsW3R1cGxlLGxpc3RdKSl0aHJvdyBUeXBlRXJyb3IoJ2NvbnN0cnVjdG9yIHJlcXVpcmVzIGEgc2VxdWVuY2UnKTtpZihsZW4oYXJnKSE9OSl0aHJvdyBUeXBlRXJyb3IoInRpbWUuc3RydWN0X3RpbWUoKSB0YWtlcyBhIDktc2VxdWVuY2UgKCIrbGVuKGFyZykrIi1zZXF1ZW5jZSBnaXZlbiIpO3ZhciByZXM9YXJnO3ZhciBuYW1lcz1bJ3RtX3llYXInLCd0bV9tb24nLCd0bV9tZGF5JywndG1faG91cicsJ3RtX21pbicsJ3RtX3NlYycsJ3RtX3dkYXknLCd0bV95ZGF5JywndG1faXNkc3QnLCd0bV96b25lJywndG1fZ210b2ZmJ107cmVzLl9fZ2V0YXR0cl9fPWZ1bmN0aW9uKGF0dHIpe3ZhciBpeD1uYW1lcy5pbmRleE9mKGF0dHIpO2lmKGl4Pi0xKXJldHVybiBhcmcuX19nZXRpdGVtX18oaXgpO2lmKHR5cGVvZiByZXNbYXR0cl09PT0nZnVuY3Rpb24nKXJldHVybihmdW5jdGlvbihvYmope3JldHVybiBmdW5jdGlvbigpe3JldHVybiBvYmpbYXR0cl0uYXBwbHkob2JqLGFyZ3VtZW50cyk7fTt9KShyZXMpO2Vsc2UgaWYocmVzW2F0dHJdIT09dW5kZWZpbmVkKXJldHVybiByZXNbYXR0cl07ZWxzZSB0aHJvdyBBdHRyaWJ1dGVFcnJvcigib2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgJyIrYXR0cisiJyIpO307cmV0dXJuIHJlczt9fTt9KSgpOw==',
'/libs/_websocket.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXskV2ViU29ja2V0RGljdD17X19jbGFzc19fOiR0eXBlLF9fbmFtZV9fOidXZWJTb2NrZXQnfTskV2ViU29ja2V0RGljdC5iaW5kPWZ1bmN0aW9uKHNlbGYsZXZlbnQsY2FsbGJhY2spe3NlbGYuJHdzWydvbicrZXZlbnRdPWNhbGxiYWNrO307JFdlYlNvY2tldERpY3Quc2VuZD1mdW5jdGlvbihzZWxmLGRhdGEpe3NlbGYuJHdzLnNlbmQoZGF0YSk7fTskV2ViU29ja2V0RGljdC5jbG9zZT1mdW5jdGlvbihzZWxmKXtzZWxmLiR3cy5jbG9zZSgpO307JFdlYlNvY2tldERpY3QuX19tcm9fXz1bJFdlYlNvY2tldERpY3QsX19idWlsdGluc19fLm9iamVjdC4kZGljdF07ZnVuY3Rpb24gd2Vic29ja2V0KGhvc3Qpe3ZhciAkc29ja2V0PW5ldyBXZWJTb2NrZXQoaG9zdCk7dmFyIHJlcz17X19jbGFzc19fOiRXZWJTb2NrZXREaWN0LCR3czokc29ja2V0fTtyZXMuJHdlYnNvY2tldD0kc29ja2V0O3JldHVybiByZXM7fXdlYnNvY2tldC5fX2NsYXNzX189JGZhY3Rvcnk7d2Vic29ja2V0LiRkaWN0PSRXZWJTb2NrZXREaWN0O3JldHVybnt3ZWJzb2NrZXQ6d2Vic29ja2V0fTt9KSgpOw==',
'/libs/_ajax.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmb3IodmFyICRweV9idWlsdGluIGluIF9fYnVpbHRpbnNfXylldmFsKCJ2YXIgIiskcHlfYnVpbHRpbisiPV9fYnVpbHRpbnNfX1skcHlfYnVpbHRpbl0iKTskWE1MSHR0cERpY3Q9e19fY2xhc3NfXzokdHlwZSxfX25hbWVfXzonWE1MSHR0cCd9OyRYTUxIdHRwRGljdC5fX2dldGF0dHJpYnV0ZV9fPWZ1bmN0aW9uKHNlbGYsYXR0cil7aWYoWydoZWFkZXJzJywndGV4dCcsJ3htbCddLmluZGV4T2YoYXR0cik+LTEpcmV0dXJuICRYTUxIdHRwRGljdFthdHRyXShzZWxmKTtyZXR1cm4gJE9iamVjdERpY3QuX19nZXRhdHRyaWJ1dGVfXyhzZWxmLGF0dHIpO307JFhNTEh0dHBEaWN0Ll9fbXJvX189WyRYTUxIdHRwRGljdCwkT2JqZWN0RGljdF07JFhNTEh0dHBEaWN0Ll9fcmVwcl9fPWZ1bmN0aW9uKHNlbGYpe3JldHVybiAnPG9iamVjdCBYTUxIdHRwPic7fTskWE1MSHR0cERpY3QuX19zdHJfXz0kWE1MSHR0cERpY3QudG9TdHJpbmc9JFhNTEh0dHBEaWN0Ll9fcmVwcl9fOyRYTUxIdHRwRGljdC50ZXh0PWZ1bmN0aW9uKHNlbGYpe3JldHVybiBzZWxmLnJlc3BvbnNlVGV4dDt9OyRYTUxIdHRwRGljdC54bWw9ZnVuY3Rpb24oc2VsZil7cmV0dXJuICREb21PYmplY3Qoc2VsZi5yZXNwb25zZVhNTCk7fTskWE1MSHR0cERpY3QuaGVhZGVycz1mdW5jdGlvbihzZWxmKXtyZXR1cm4gbGlzdChzZWxmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnNwbGl0KCdcbicpKTt9OyRYTUxIdHRwRGljdC5nZXRfaGVhZGVyPWZ1bmN0aW9uKCl7dmFyIHJlcW9iaj1zZWxmO3JldHVybiBmdW5jdGlvbihoZWFkZXIpe3JldHVybiByZXFvYmouZ2V0UmVzcG9uc2VIZWFkZXIoaGVhZGVyKTt9O307JEFqYXhEaWN0PXtfX2NsYXNzX186JHR5cGUsX19uYW1lX186J2FqYXgnfTskQWpheERpY3QuX19tcm9fXz1bJEFqYXhEaWN0LCRPYmplY3REaWN0XTskQWpheERpY3QuX19yZXByX189ZnVuY3Rpb24oc2VsZil7cmV0dXJuICc8b2JqZWN0IEFqYXg+Jzt9OyRBamF4RGljdC5fX3N0cl9fPSRBamF4RGljdC50b1N0cmluZz0kQWpheERpY3QuX19yZXByX187JEFqYXhEaWN0LmJpbmQ9ZnVuY3Rpb24oc2VsZixldnQsZnVuYyl7c2VsZlsnb25fJytldnRdPWZ1bmM7fTskQWpheERpY3Qub3Blbj1mdW5jdGlvbihzZWxmLG1ldGhvZCx1cmwsYXN5bmMpe3NlbGYuJHhtbGh0dHAub3BlbihtZXRob2QsdXJsLGFzeW5jKTt9OyRBamF4RGljdC5zZW5kPWZ1bmN0aW9uKHNlbGYscGFyYW1zKXt2YXIgcmVzPScnO2lmKCFwYXJhbXN8fHBhcmFtcy4ka2V5cy5sZW5ndGg9PTApe3NlbGYuJHhtbGh0dHAuc2VuZCgpO3JldHVybjt9ZWxzZSBpZihpc2luc3RhbmNlKHBhcmFtcyxzdHIpKXJlcz1wYXJhbXM7ZWxzZSBpZihpc2luc3RhbmNlKHBhcmFtcyxkaWN0KSl7Zm9yKGk9MDtpPHBhcmFtcy4ka2V5cy5sZW5ndGg7aSsrKXJlcys9ZW5jb2RlVVJJQ29tcG9uZW50KHN0cihwYXJhbXMuJGtleXNbaV0pKSsnPScrZW5jb2RlVVJJQ29tcG9uZW50KHN0cihwYXJhbXMuJHZhbHVlc1tpXSkpKycmJztyZXM9cmVzLnN1YnN0cigwLHJlcy5sZW5ndGgtMSk7fWVsc2UgdGhyb3cgVHlwZUVycm9yKCJzZW5kKCkgYXJndW1lbnQgbXVzdCBiZSBzdHJpbmcgb3IgZGljdG9uYXJ5LCBub3QgJyIrc3RyKHBhcmFtcy5fX2NsYXNzX18pKyInIik7c2VsZi4keG1saHR0cC5zZW5kKHJlcyk7fTskQWpheERpY3Quc2V0X2hlYWRlcj1mdW5jdGlvbihzZWxmLGtleSx2YWx1ZSl7c2VsZi4keG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKGtleSx2YWx1ZSk7fTskQWpheERpY3Quc2V0X3RpbWVvdXQ9ZnVuY3Rpb24oc2VsZixzZWNvbmRzLGZ1bmMpe3NlbGYuJHhtbGh0dHAuJHJlcXVlc3RUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi4keG1saHR0cC5hYm9ydCgpO2Z1bmMoKTt9LHNlY29uZHMqMTAwMCk7fTtmdW5jdGlvbiBhamF4KCl7dmFyIHJlcz17X19jbGFzc19fOiRBamF4RGljdH07aWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KXZhciAkeG1saHR0cD1uZXcgWE1MSHR0cFJlcXVlc3QoKTtlbHNlIHZhciAkeG1saHR0cD1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKTskeG1saHR0cC4kcmVxdWVzdFRpbWVyPW51bGw7JHhtbGh0dHAuX19jbGFzc19fPSRYTUxIdHRwRGljdDskeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgc3RhdGU9dGhpcy5yZWFkeVN0YXRlO3ZhciByZXE9dGhpcy4kYWpheDt2YXIgdGltZXI9dGhpcy4kcmVxdWVzdFRpbWVyO3ZhciBvYmo9dGhpcztpZihzdGF0ZT09PTAmJidvbl91bmluaXRpYWxpemVkJyBpbiByZXEpcmVxLm9uX3VuaW5pdGlhbGl6ZWQob2JqKTtlbHNlIGlmKHN0YXRlPT09MSYmJ29uX2xvYWRpbmcnIGluIHJlcSlyZXEub25fbG9hZGluZyhvYmopO2Vsc2UgaWYoc3RhdGU9PT0yJiYnb25fbG9hZGVkJyBpbiByZXEpcmVxLm9uX2xvYWRlZChvYmopO2Vsc2UgaWYoc3RhdGU9PT0zJiYnb25faW50ZXJhY3RpdmUnIGluIHJlcSlyZXEub25faW50ZXJhY3RpdmUob2JqKTtlbHNlIGlmKHN0YXRlPT09NCYmJ29uX2NvbXBsZXRlJyBpbiByZXEpe2lmKHRpbWVyIT09bnVsbCl3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtyZXEub25fY29tcGxldGUob2JqKTt9fTskeG1saHR0cC4kYWpheD1yZXM7cmVzLiR4bWxodHRwPSR4bWxodHRwO3JldHVybiByZXM7fWFqYXguX19jbGFzc19fPSRmYWN0b3J5O2FqYXguJGRpY3Q9JEFqYXhEaWN0O3JldHVybnthamF4OmFqYXh9O30pKCk7',
'/libs/_io.js':'JG1vZHVsZT17fTs=',
'/libs/zlib.js':'KGZ1bmN0aW9uKCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIGwoZCl7dGhyb3cgZDt9dmFyIHU9dm9pZCAwLHg9ITAsYWE9dGhpcztmdW5jdGlvbiB6KGQsYSl7dmFyIGM9ZC5zcGxpdCgiLiIpLGY9YWE7IShjWzBdIGluIGYpJiZmLmV4ZWNTY3JpcHQmJmYuZXhlY1NjcmlwdCgidmFyICIrY1swXSk7Zm9yKHZhciBiO2MubGVuZ3RoJiYoYj1jLnNoaWZ0KCkpOykhYy5sZW5ndGgmJmEhPT11P2ZbYl09YTpmPWZbYl0/ZltiXTpmW2JdPXt9O307dmFyIEU9InVuZGVmaW5lZCIhPT10eXBlb2YgVWludDhBcnJheSYmInVuZGVmaW5lZCIhPT10eXBlb2YgVWludDE2QXJyYXkmJiJ1bmRlZmluZWQiIT09dHlwZW9mIFVpbnQzMkFycmF5O2Z1bmN0aW9uIEcoZCxhKXt0aGlzLmluZGV4PSJudW1iZXIiPT09dHlwZW9mIGE/YTowO3RoaXMuaT0wO3RoaXMuYnVmZmVyPWQgaW5zdGFuY2VvZiAoRT9VaW50OEFycmF5OkFycmF5KT9kOm5ldyAoRT9VaW50OEFycmF5OkFycmF5KSgzMjc2OCk7Mip0aGlzLmJ1ZmZlci5sZW5ndGg8PXRoaXMuaW5kZXgmJmwoRXJyb3IoImludmFsaWQgaW5kZXgiKSk7dGhpcy5idWZmZXIubGVuZ3RoPD10aGlzLmluZGV4JiZ0aGlzLmYoKTt9Ry5wcm90b3R5cGUuZj1mdW5jdGlvbigpe3ZhciBkPXRoaXMuYnVmZmVyLGEsYz1kLmxlbmd0aCxmPW5ldyAoRT9VaW50OEFycmF5OkFycmF5KShjPDwxKTtpZihFKWYuc2V0KGQpO2Vsc2UgZm9yKGE9MDthPGM7KythKWZbYV09ZFthXTtyZXR1cm4gdGhpcy5idWZmZXI9Zjt9O0cucHJvdG90eXBlLmQ9ZnVuY3Rpb24oZCxhLGMpe3ZhciBmPXRoaXMuYnVmZmVyLGI9dGhpcy5pbmRleCxlPXRoaXMuaSxnPWZbYl0saDtjJiYxPGEmJihkPTg8YT8oTltkJjI1NV08PDI0fE5bZD4+PjgmMjU1XTw8MTZ8TltkPj4+MTYmMjU1XTw8OHxOW2Q+Pj4yNCYyNTVdKT4+MzItYTpOW2RdPj44LWEpO2lmKDg+YStlKWc9Zzw8YXxkLGUrPWE7ZWxzZSBmb3IoaD0wO2g8YTsrK2gpZz1nPDwxfGQ+PmEtaC0xJjEsOD09PSsrZSYmKGU9MCxmW2IrK109TltnXSxnPTAsYj09PWYubGVuZ3RoJiYoZj10aGlzLmYoKSkpO2ZbYl09Zzt0aGlzLmJ1ZmZlcj1mO3RoaXMuaT1lO3RoaXMuaW5kZXg9Yjt9O0cucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3ZhciBkPXRoaXMuYnVmZmVyLGE9dGhpcy5pbmRleCxjOzA8dGhpcy5pJiYoZFthXTw8PTgtdGhpcy5pLGRbYV09TltkW2FdXSxhKyspO0U/Yz1kLnN1YmFycmF5KDAsYSk6KGQubGVuZ3RoPWEsYz1kKTtyZXR1cm4gYzt9O3ZhciBmYT1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoMjU2KSxPO2ZvcihPPTA7MjU2Pk87KytPKXtmb3IodmFyIFA9TyxRPVAsZ2E9NyxQPVA+Pj4xO1A7UD4+Pj0xKVE8PD0xLFF8PVAmMSwtLWdhO2ZhW09dPShRPDxnYSYyNTUpPj4+MDt9dmFyIE49ZmE7ZnVuY3Rpb24gaGEoZCl7dGhpcy5idWZmZXI9bmV3IChFP1VpbnQxNkFycmF5OkFycmF5KSgyKmQpO3RoaXMubGVuZ3RoPTA7fWhhLnByb3RvdHlwZS5nZXRQYXJlbnQ9ZnVuY3Rpb24oZCl7cmV0dXJuIDIqKChkLTIpLzR8MCk7fTtoYS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihkLGEpe3ZhciBjLGYsYj10aGlzLmJ1ZmZlcixlO2M9dGhpcy5sZW5ndGg7Ylt0aGlzLmxlbmd0aCsrXT1hO2ZvcihiW3RoaXMubGVuZ3RoKytdPWQ7MDxjOylpZihmPXRoaXMuZ2V0UGFyZW50KGMpLGJbY10+YltmXSllPWJbY10sYltjXT1iW2ZdLGJbZl09ZSxlPWJbYysxXSxiW2MrMV09YltmKzFdLGJbZisxXT1lLGM9ZjtlbHNlIGJyZWFrO3JldHVybiB0aGlzLmxlbmd0aDt9O2hhLnByb3RvdHlwZS5wb3A9ZnVuY3Rpb24oKXt2YXIgZCxhLGM9dGhpcy5idWZmZXIsZixiLGU7YT1jWzBdO2Q9Y1sxXTt0aGlzLmxlbmd0aC09MjtjWzBdPWNbdGhpcy5sZW5ndGhdO2NbMV09Y1t0aGlzLmxlbmd0aCsxXTtmb3IoZT0wOzspe2I9MiplKzI7aWYoYj49dGhpcy5sZW5ndGgpYnJlYWs7YisyPHRoaXMubGVuZ3RoJiZjW2IrMl0+Y1tiXSYmKGIrPTIpO2lmKGNbYl0+Y1tlXSlmPWNbZV0sY1tlXT1jW2JdLGNbYl09ZixmPWNbZSsxXSxjW2UrMV09Y1tiKzFdLGNbYisxXT1mO2Vsc2UgYnJlYWs7ZT1iO31yZXR1cm57aW5kZXg6ZCx2YWx1ZTphLGxlbmd0aDp0aGlzLmxlbmd0aH07fTtmdW5jdGlvbiBSKGQpe3ZhciBhPWQubGVuZ3RoLGM9MCxmPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxiLGUsZyxoLGssbixxLHIscDtmb3Iocj0wO3I8YTsrK3IpZFtyXT5jJiYoYz1kW3JdKSxkW3JdPGYmJihmPWRbcl0pO2I9MTw8YztlPW5ldyAoRT9VaW50MzJBcnJheTpBcnJheSkoYik7Zz0xO2g9MDtmb3Ioaz0yO2c8PWM7KXtmb3Iocj0wO3I8YTsrK3IpaWYoZFtyXT09PWcpe249MDtxPWg7Zm9yKHA9MDtwPGc7KytwKW49bjw8MXxxJjEscT4+PTE7Zm9yKHA9bjtwPGI7cCs9ayllW3BdPWc8PDE2fHI7KytoO30rK2c7aDw8PTE7azw8PTE7fXJldHVybiBbZSxjLGZdO307ZnVuY3Rpb24gaWEoZCxhKXt0aGlzLmg9bWE7dGhpcy53PTA7dGhpcy5pbnB1dD1FJiZkIGluc3RhbmNlb2YgQXJyYXk/bmV3IFVpbnQ4QXJyYXkoZCk6ZDt0aGlzLmI9MDthJiYoYS5sYXp5JiYodGhpcy53PWEubGF6eSksIm51bWJlciI9PT10eXBlb2YgYS5jb21wcmVzc2lvblR5cGUmJih0aGlzLmg9YS5jb21wcmVzc2lvblR5cGUpLGEub3V0cHV0QnVmZmVyJiYodGhpcy5hPUUmJmEub3V0cHV0QnVmZmVyIGluc3RhbmNlb2YgQXJyYXk/bmV3IFVpbnQ4QXJyYXkoYS5vdXRwdXRCdWZmZXIpOmEub3V0cHV0QnVmZmVyKSwibnVtYmVyIj09PXR5cGVvZiBhLm91dHB1dEluZGV4JiYodGhpcy5iPWEub3V0cHV0SW5kZXgpKTt0aGlzLmF8fCh0aGlzLmE9bmV3IChFP1VpbnQ4QXJyYXk6QXJyYXkpKDMyNzY4KSk7fXZhciBtYT0yLG5hPXtOT05FOjAscjoxLGs6bWEsTjozfSxvYT1bXSxTO2ZvcihTPTA7Mjg4PlM7UysrKXN3aXRjaCh4KXtjYXNlIDE0Mz49UzpvYS5wdXNoKFtTKzQ4LDhdKTticmVhaztjYXNlIDI1NT49UzpvYS5wdXNoKFtTLTE0NCs0MDAsOV0pO2JyZWFrO2Nhc2UgMjc5Pj1TOm9hLnB1c2goW1MtMjU2KzAsN10pO2JyZWFrO2Nhc2UgMjg3Pj1TOm9hLnB1c2goW1MtMjgwKzE5Miw4XSk7YnJlYWs7ZGVmYXVsdDpsKCJpbnZhbGlkIGxpdGVyYWw6ICIrUyk7fWlhLnByb3RvdHlwZS5qPWZ1bmN0aW9uKCl7dmFyIGQsYSxjLGYsYj10aGlzLmlucHV0O3N3aXRjaCh0aGlzLmgpe2Nhc2UgMDpjPTA7Zm9yKGY9Yi5sZW5ndGg7YzxmOyl7YT1FP2Iuc3ViYXJyYXkoYyxjKzY1NTM1KTpiLnNsaWNlKGMsYys2NTUzNSk7Yys9YS5sZW5ndGg7dmFyIGU9YSxnPWM9PT1mLGg9dSxrPXUsbj11LHE9dSxyPXUscD10aGlzLmEsbT10aGlzLmI7aWYoRSl7Zm9yKHA9bmV3IFVpbnQ4QXJyYXkodGhpcy5hLmJ1ZmZlcik7cC5sZW5ndGg8PW0rZS5sZW5ndGgrNTspcD1uZXcgVWludDhBcnJheShwLmxlbmd0aDw8MSk7cC5zZXQodGhpcy5hKTt9aD1nPzE6MDtwW20rK109aHwwO2s9ZS5sZW5ndGg7bj1+ays2NTUzNiY2NTUzNTtwW20rK109ayYyNTU7cFttKytdPWs+Pj44JjI1NTtwW20rK109biYyNTU7cFttKytdPW4+Pj44JjI1NTtpZihFKXAuc2V0KGUsbSksbSs9ZS5sZW5ndGgscD1wLnN1YmFycmF5KDAsbSk7ZWxzZXtxPTA7Zm9yKHI9ZS5sZW5ndGg7cTxyOysrcSlwW20rK109ZVtxXTtwLmxlbmd0aD1tO310aGlzLmI9bTt0aGlzLmE9cDt9YnJlYWs7Y2FzZSAxOnZhciBzPW5ldyBHKEU/bmV3IFVpbnQ4QXJyYXkodGhpcy5hLmJ1ZmZlcik6dGhpcy5hLHRoaXMuYik7cy5kKDEsMSx4KTtzLmQoMSwyLHgpO3ZhciB3PXBhKHRoaXMsYikseSxqYSxCO3k9MDtmb3IoamE9dy5sZW5ndGg7eTxqYTt5KyspaWYoQj13W3ldLEcucHJvdG90eXBlLmQuYXBwbHkocyxvYVtCXSksMjU2PEIpcy5kKHdbKyt5XSx3WysreV0seCkscy5kKHdbKyt5XSw1KSxzLmQod1srK3ldLHdbKyt5XSx4KTtlbHNlIGlmKDI1Nj09PUIpYnJlYWs7dGhpcy5hPXMuZmluaXNoKCk7dGhpcy5iPXRoaXMuYS5sZW5ndGg7YnJlYWs7Y2FzZSBtYTp2YXIgRD1uZXcgRyhFP25ldyBVaW50OEFycmF5KHRoaXMuYS5idWZmZXIpOnRoaXMuYSx0aGlzLmIpLERhLE0sVSxWLFcsZ2I9WzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdLGJhLEVhLGNhLEZhLGthLHJhPUFycmF5KDE5KSxHYSxYLGxhLEEsSGE7RGE9bWE7RC5kKDEsMSx4KTtELmQoRGEsMix4KTtNPXBhKHRoaXMsYik7YmE9cWEodGhpcy5MLDE1KTtFYT1zYShiYSk7Y2E9cWEodGhpcy5LLDcpO0ZhPXNhKGNhKTtmb3IoVT0yODY7MjU3PFUmJjA9PT1iYVtVLTFdO1UtLSk7Zm9yKFY9MzA7MTxWJiYwPT09Y2FbVi0xXTtWLS0pO3ZhciBJYT1VLEphPVYsST1uZXcgKEU/VWludDMyQXJyYXk6QXJyYXkpKElhK0phKSx0LEosdixkYSxIPW5ldyAoRT9VaW50MzJBcnJheTpBcnJheSkoMzE2KSxGLEMsSz1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoMTkpO2Zvcih0PUo9MDt0PElhO3QrKylJW0orK109YmFbdF07Zm9yKHQ9MDt0PEphO3QrKylJW0orK109Y2FbdF07aWYoIUUpe3Q9MDtmb3IoZGE9Sy5sZW5ndGg7dDxkYTsrK3QpS1t0XT0wO310PUY9MDtmb3IoZGE9SS5sZW5ndGg7dDxkYTt0Kz1KKXtmb3IoSj0xO3QrSjxkYSYmSVt0K0pdPT09SVt0XTsrK0opO3Y9SjtpZigwPT09SVt0XSlpZigzPnYpZm9yKDswPHYtLTspSFtGKytdPTAsS1swXSsrO2Vsc2UgZm9yKDswPHY7KUM9MTM4PnY/djoxMzgsQz52LTMmJkM8diYmKEM9di0zKSwxMD49Qz8oSFtGKytdPTE3LEhbRisrXT1DLTMsS1sxN10rKyk6KEhbRisrXT0xOCxIW0YrK109Qy0xMSxLWzE4XSsrKSx2LT1DO2Vsc2UgaWYoSFtGKytdPUlbdF0sS1tJW3RdXSsrLHYtLSwzPnYpZm9yKDswPHYtLTspSFtGKytdPUlbdF0sS1tJW3RdXSsrO2Vsc2UgZm9yKDswPHY7KUM9Nj52P3Y6NixDPnYtMyYmQzx2JiYoQz12LTMpLEhbRisrXT0xNixIW0YrK109Qy0zLEtbMTZdKyssdi09Qzt9ZD1FP0guc3ViYXJyYXkoMCxGKTpILnNsaWNlKDAsRik7a2E9cWEoSyw3KTtmb3IoQT0wOzE5PkE7QSsrKXJhW0FdPWthW2diW0FdXTtmb3IoVz0xOTs0PFcmJjA9PT1yYVtXLTFdO1ctLSk7R2E9c2Eoa2EpO0QuZChVLTI1Nyw1LHgpO0QuZChWLTEsNSx4KTtELmQoVy00LDQseCk7Zm9yKEE9MDtBPFc7QSsrKUQuZChyYVtBXSwzLHgpO0E9MDtmb3IoSGE9ZC5sZW5ndGg7QTxIYTtBKyspaWYoWD1kW0FdLEQuZChHYVtYXSxrYVtYXSx4KSwxNjw9WCl7QSsrO3N3aXRjaChYKXtjYXNlIDE2OmxhPTI7YnJlYWs7Y2FzZSAxNzpsYT0zO2JyZWFrO2Nhc2UgMTg6bGE9NzticmVhaztkZWZhdWx0OmwoImludmFsaWQgY29kZTogIitYKTt9RC5kKGRbQV0sbGEseCk7fXZhciBLYT1bRWEsYmFdLExhPVtGYSxjYV0sTCxNYSxlYSx1YSxOYSxPYSxQYSxRYTtOYT1LYVswXTtPYT1LYVsxXTtQYT1MYVswXTtRYT1MYVsxXTtMPTA7Zm9yKE1hPU0ubGVuZ3RoO0w8TWE7KytMKWlmKGVhPU1bTF0sRC5kKE5hW2VhXSxPYVtlYV0seCksMjU2PGVhKUQuZChNWysrTF0sTVsrK0xdLHgpLHVhPU1bKytMXSxELmQoUGFbdWFdLFFhW3VhXSx4KSxELmQoTVsrK0xdLE1bKytMXSx4KTtlbHNlIGlmKDI1Nj09PWVhKWJyZWFrO3RoaXMuYT1ELmZpbmlzaCgpO3RoaXMuYj10aGlzLmEubGVuZ3RoO2JyZWFrO2RlZmF1bHQ6bCgiaW52YWxpZCBjb21wcmVzc2lvbiB0eXBlIik7fXJldHVybiB0aGlzLmE7fTtmdW5jdGlvbiB0YShkLGEpe3RoaXMubGVuZ3RoPWQ7dGhpcy5HPWE7fXZhciB2YT1mdW5jdGlvbigpe2Z1bmN0aW9uIGQoYil7c3dpdGNoKHgpe2Nhc2UgMz09PWI6cmV0dXJuIFsyNTcsYi0zLDBdO2Nhc2UgND09PWI6cmV0dXJuIFsyNTgsYi00LDBdO2Nhc2UgNT09PWI6cmV0dXJuIFsyNTksYi01LDBdO2Nhc2UgNj09PWI6cmV0dXJuIFsyNjAsYi02LDBdO2Nhc2UgNz09PWI6cmV0dXJuIFsyNjEsYi03LDBdO2Nhc2UgOD09PWI6cmV0dXJuIFsyNjIsYi04LDBdO2Nhc2UgOT09PWI6cmV0dXJuIFsyNjMsYi05LDBdO2Nhc2UgMTA9PT1iOnJldHVybiBbMjY0LGItMTAsMF07Y2FzZSAxMj49YjpyZXR1cm4gWzI2NSxiLTExLDFdO2Nhc2UgMTQ+PWI6cmV0dXJuIFsyNjYsYi0xMywxXTtjYXNlIDE2Pj1iOnJldHVybiBbMjY3LGItMTUsMV07Y2FzZSAxOD49YjpyZXR1cm4gWzI2OCxiLTE3LDFdO2Nhc2UgMjI+PWI6cmV0dXJuIFsyNjksYi0xOSwyXTtjYXNlIDI2Pj1iOnJldHVybiBbMjcwLGItMjMsMl07Y2FzZSAzMD49YjpyZXR1cm4gWzI3MSxiLTI3LDJdO2Nhc2UgMzQ+PWI6cmV0dXJuIFsyNzIsYi0zMSwyXTtjYXNlIDQyPj1iOnJldHVybiBbMjczLGItMzUsM107Y2FzZSA1MD49YjpyZXR1cm4gWzI3NCxiLTQzLDNdO2Nhc2UgNTg+PWI6cmV0dXJuIFsyNzUsYi01MSwzXTtjYXNlIDY2Pj1iOnJldHVybiBbMjc2LGItNTksM107Y2FzZSA4Mj49YjpyZXR1cm4gWzI3NyxiLTY3LDRdO2Nhc2UgOTg+PWI6cmV0dXJuIFsyNzgsYi04Myw0XTtjYXNlIDExND49YjpyZXR1cm4gWzI3OSxiLTk5LDRdO2Nhc2UgMTMwPj1iOnJldHVybiBbMjgwLGItMTE1LDRdO2Nhc2UgMTYyPj1iOnJldHVybiBbMjgxLGItMTMxLDVdO2Nhc2UgMTk0Pj1iOnJldHVybiBbMjgyLGItMTYzLDVdO2Nhc2UgMjI2Pj1iOnJldHVybiBbMjgzLGItMTk1LDVdO2Nhc2UgMjU3Pj1iOnJldHVybiBbMjg0LGItMjI3LDVdO2Nhc2UgMjU4PT09YjpyZXR1cm4gWzI4NSxiLTI1OCwwXTtkZWZhdWx0OmwoImludmFsaWQgbGVuZ3RoOiAiK2IpO319dmFyIGE9W10sYyxmO2ZvcihjPTM7MjU4Pj1jO2MrKylmPWQoYyksYVtjXT1mWzJdPDwyNHxmWzFdPDwxNnxmWzBdO3JldHVybiBhO30oKSx3YT1FP25ldyBVaW50MzJBcnJheSh2YSk6dmE7ZnVuY3Rpb24gcGEoZCxhKXtmdW5jdGlvbiBjKGIsYyl7dmFyIGE9Yi5HLGQ9W10sZT0wLGY7Zj13YVtiLmxlbmd0aF07ZFtlKytdPWYmNjU1MzU7ZFtlKytdPWY+PjE2JjI1NTtkW2UrK109Zj4+MjQ7dmFyIGc7c3dpdGNoKHgpe2Nhc2UgMT09PWE6Zz1bMCxhLTEsMF07YnJlYWs7Y2FzZSAyPT09YTpnPVsxLGEtMiwwXTticmVhaztjYXNlIDM9PT1hOmc9WzIsYS0zLDBdO2JyZWFrO2Nhc2UgND09PWE6Zz1bMyxhLTQsMF07YnJlYWs7Y2FzZSA2Pj1hOmc9WzQsYS01LDFdO2JyZWFrO2Nhc2UgOD49YTpnPVs1LGEtNywxXTticmVhaztjYXNlIDEyPj1hOmc9WzYsYS05LDJdO2JyZWFrO2Nhc2UgMTY+PWE6Zz1bNyxhLTEzLDJdO2JyZWFrO2Nhc2UgMjQ+PWE6Zz1bOCxhLTE3LDNdO2JyZWFrO2Nhc2UgMzI+PWE6Zz1bOSxhLTI1LDNdO2JyZWFrO2Nhc2UgNDg+PWE6Zz1bMTAsYS0zMyw0XTticmVhaztjYXNlIDY0Pj1hOmc9WzExLGEtNDksNF07YnJlYWs7Y2FzZSA5Nj49YTpnPVsxMixhLTY1LDVdO2JyZWFrO2Nhc2UgMTI4Pj1hOmc9WzEzLGEtOTcsNV07YnJlYWs7Y2FzZSAxOTI+PWE6Zz1bMTQsYS0xMjksNl07YnJlYWs7Y2FzZSAyNTY+PWE6Zz1bMTUsYS0xOTMsNl07YnJlYWs7Y2FzZSAzODQ+PWE6Zz1bMTYsYS0yNTcsN107YnJlYWs7Y2FzZSA1MTI+PWE6Zz1bMTcsYS0zODUsN107YnJlYWs7Y2FzZSA3Njg+PWE6Zz1bMTgsYS01MTMsOF07YnJlYWs7Y2FzZSAxMDI0Pj1hOmc9WzE5LGEtNzY5LDhdO2JyZWFrO2Nhc2UgMTUzNj49YTpnPVsyMCxhLTEwMjUsOV07YnJlYWs7Y2FzZSAyMDQ4Pj1hOmc9WzIxLGEtMTUzNyw5XTticmVhaztjYXNlIDMwNzI+PWE6Zz1bMjIsYS0yMDQ5LDEwXTticmVhaztjYXNlIDQwOTY+PWE6Zz1bMjMsYS0zMDczLDEwXTticmVhaztjYXNlIDYxNDQ+PWE6Zz1bMjQsYS00MDk3LDExXTticmVhaztjYXNlIDgxOTI+PWE6Zz1bMjUsYS02MTQ1LDExXTticmVhaztjYXNlIDEyMjg4Pj1hOmc9WzI2LGEtODE5MywxMl07YnJlYWs7Y2FzZSAxNjM4ND49YTpnPVsyNyxhLTEyMjg5LDEyXTticmVhaztjYXNlIDI0NTc2Pj1hOmc9WzI4LGEtMTYzODUsMTNdO2JyZWFrO2Nhc2UgMzI3Njg+PWE6Zz1bMjksYS0yNDU3NywxM107YnJlYWs7ZGVmYXVsdDpsKCJpbnZhbGlkIGRpc3RhbmNlIik7fWY9ZztkW2UrK109ZlswXTtkW2UrK109ZlsxXTtkW2UrK109ZlsyXTt2YXIgaCxrO2g9MDtmb3Ioaz1kLmxlbmd0aDtoPGs7KytoKXBbbSsrXT1kW2hdO3dbZFswXV0rKzt5W2RbM11dKys7cz1iLmxlbmd0aCtjLTE7cj1udWxsO312YXIgZixiLGUsZyxoLGs9e30sbixxLHIscD1FP25ldyBVaW50MTZBcnJheSgyKmEubGVuZ3RoKTpbXSxtPTAscz0wLHc9bmV3IChFP1VpbnQzMkFycmF5OkFycmF5KSgyODYpLHk9bmV3IChFP1VpbnQzMkFycmF5OkFycmF5KSgzMCksamE9ZC53LEI7aWYoIUUpe2ZvcihlPTA7Mjg1Pj1lOyl3W2UrK109MDtmb3IoZT0wOzI5Pj1lOyl5W2UrK109MDt9d1syNTZdPTE7Zj0wO2ZvcihiPWEubGVuZ3RoO2Y8YjsrK2Ype2U9aD0wO2ZvcihnPTM7ZTxnJiZmK2UhPT1iOysrZSloPWg8PDh8YVtmK2VdO2tbaF09PT11JiYoa1toXT1bXSk7bj1rW2hdO2lmKCEoMDxzLS0pKXtmb3IoOzA8bi5sZW5ndGgmJjMyNzY4PGYtblswXTspbi5zaGlmdCgpO2lmKGYrMz49Yil7ciYmYyhyLC0xKTtlPTA7Zm9yKGc9Yi1mO2U8ZzsrK2UpQj1hW2YrZV0scFttKytdPUIsKyt3W0JdO2JyZWFrO30wPG4ubGVuZ3RoPyhxPXhhKGEsZixuKSxyP3IubGVuZ3RoPHEubGVuZ3RoPyhCPWFbZi0xXSxwW20rK109QiwrK3dbQl0sYyhxLDApKTpjKHIsLTEpOnEubGVuZ3RoPGphP3I9cTpjKHEsMCkpOnI/YyhyLC0xKTooQj1hW2ZdLHBbbSsrXT1CLCsrd1tCXSk7fW4ucHVzaChmKTt9cFttKytdPTI1Njt3WzI1Nl0rKztkLkw9dztkLks9eTtyZXR1cm4gRT9wLnN1YmFycmF5KDAsbSk6cDt9ZnVuY3Rpb24geGEoZCxhLGMpe3ZhciBmLGIsZT0wLGcsaCxrLG4scT1kLmxlbmd0aDtoPTA7bj1jLmxlbmd0aDthOmZvcig7aDxuO2grKyl7Zj1jW24taC0xXTtnPTM7aWYoMzxlKXtmb3Ioaz1lOzM8aztrLS0paWYoZFtmK2stMV0hPT1kW2Eray0xXSljb250aW51ZSBhO2c9ZTt9Zm9yKDsyNTg+ZyYmYStnPHEmJmRbZitnXT09PWRbYStnXTspKytnO2c+ZSYmKGI9ZixlPWcpO2lmKDI1OD09PWcpYnJlYWs7fXJldHVybiBuZXcgdGEoZSxhLWIpO31mdW5jdGlvbiBxYShkLGEpe3ZhciBjPWQubGVuZ3RoLGY9bmV3IGhhKDU3MiksYj1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoYyksZSxnLGgsayxuO2lmKCFFKWZvcihrPTA7azxjO2srKyliW2tdPTA7Zm9yKGs9MDtrPGM7KytrKTA8ZFtrXSYmZi5wdXNoKGssZFtrXSk7ZT1BcnJheShmLmxlbmd0aC8yKTtnPW5ldyAoRT9VaW50MzJBcnJheTpBcnJheSkoZi5sZW5ndGgvMik7aWYoMT09PWUubGVuZ3RoKXJldHVybiBiW2YucG9wKCkuaW5kZXhdPTEsYjtrPTA7Zm9yKG49Zi5sZW5ndGgvMjtrPG47KytrKWVba109Zi5wb3AoKSxnW2tdPWVba10udmFsdWU7aD15YShnLGcubGVuZ3RoLGEpO2s9MDtmb3Iobj1lLmxlbmd0aDtrPG47KytrKWJbZVtrXS5pbmRleF09aFtrXTtyZXR1cm4gYjt9ZnVuY3Rpb24geWEoZCxhLGMpe2Z1bmN0aW9uIGYoYil7dmFyIGM9a1tiXVtuW2JdXTtjPT09YT8oZihiKzEpLGYoYisxKSk6LS1nW2NdOysrbltiXTt9dmFyIGI9bmV3IChFP1VpbnQxNkFycmF5OkFycmF5KShjKSxlPW5ldyAoRT9VaW50OEFycmF5OkFycmF5KShjKSxnPW5ldyAoRT9VaW50OEFycmF5OkFycmF5KShhKSxoPUFycmF5KGMpLGs9QXJyYXkoYyksbj1BcnJheShjKSxxPSgxPDxjKS1hLHI9MTw8Yy0xLHAsbSxzLHcseTtiW2MtMV09YTtmb3IobT0wO208YzsrK20pcTxyP2VbbV09MDooZVttXT0xLHEtPXIpLHE8PD0xLGJbYy0yLW1dPShiW2MtMS1tXS8yfDApK2E7YlswXT1lWzBdO2hbMF09QXJyYXkoYlswXSk7a1swXT1BcnJheShiWzBdKTtmb3IobT0xO208YzsrK20pYlttXT4yKmJbbS0xXStlW21dJiYoYlttXT0yKmJbbS0xXStlW21dKSxoW21dPUFycmF5KGJbbV0pLGtbbV09QXJyYXkoYlttXSk7Zm9yKHA9MDtwPGE7KytwKWdbcF09Yztmb3Iocz0wO3M8YltjLTFdOysrcyloW2MtMV1bc109ZFtzXSxrW2MtMV1bc109cztmb3IocD0wO3A8YzsrK3ApbltwXT0wOzE9PT1lW2MtMV0mJigtLWdbMF0sKytuW2MtMV0pO2ZvcihtPWMtMjswPD1tOy0tbSl7dz1wPTA7eT1uW20rMV07Zm9yKHM9MDtzPGJbbV07cysrKXc9aFttKzFdW3ldK2hbbSsxXVt5KzFdLHc+ZFtwXT8oaFttXVtzXT13LGtbbV1bc109YSx5Kz0yKTooaFttXVtzXT1kW3BdLGtbbV1bc109cCwrK3ApO25bbV09MDsxPT09ZVttXSYmZihtKTt9cmV0dXJuIGc7fWZ1bmN0aW9uIHNhKGQpe3ZhciBhPW5ldyAoRT9VaW50MTZBcnJheTpBcnJheSkoZC5sZW5ndGgpLGM9W10sZj1bXSxiPTAsZSxnLGgsaztlPTA7Zm9yKGc9ZC5sZW5ndGg7ZTxnO2UrKyljW2RbZV1dPShjW2RbZV1dfDApKzE7ZT0xO2ZvcihnPTE2O2U8PWc7ZSsrKWZbZV09YixiKz1jW2VdfDAsYjw8PTE7ZT0wO2ZvcihnPWQubGVuZ3RoO2U8ZztlKyspe2I9ZltkW2VdXTtmW2RbZV1dKz0xO2g9YVtlXT0wO2ZvcihrPWRbZV07aDxrO2grKylhW2VdPWFbZV08PDF8YiYxLGI+Pj49MTt9cmV0dXJuIGE7fTtmdW5jdGlvbiBUKGQsYSl7dGhpcy5sPVtdO3RoaXMubT0zMjc2ODt0aGlzLmU9dGhpcy5nPXRoaXMuYz10aGlzLnE9MDt0aGlzLmlucHV0PUU/bmV3IFVpbnQ4QXJyYXkoZCk6ZDt0aGlzLnM9ITE7dGhpcy5uPXphO3RoaXMuQj0hMTtpZihhfHwhKGE9e30pKWEuaW5kZXgmJih0aGlzLmM9YS5pbmRleCksYS5idWZmZXJTaXplJiYodGhpcy5tPWEuYnVmZmVyU2l6ZSksYS5idWZmZXJUeXBlJiYodGhpcy5uPWEuYnVmZmVyVHlwZSksYS5yZXNpemUmJih0aGlzLkI9YS5yZXNpemUpO3N3aXRjaCh0aGlzLm4pe2Nhc2UgQWE6dGhpcy5iPTMyNzY4O3RoaXMuYT1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoMzI3NjgrdGhpcy5tKzI1OCk7YnJlYWs7Y2FzZSB6YTp0aGlzLmI9MDt0aGlzLmE9bmV3IChFP1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMubSk7dGhpcy5mPXRoaXMuSjt0aGlzLnQ9dGhpcy5IO3RoaXMubz10aGlzLkk7YnJlYWs7ZGVmYXVsdDpsKEVycm9yKCJpbnZhbGlkIGluZmxhdGUgbW9kZSIpKTt9fXZhciBBYT0wLHphPTEsQmE9e0Q6QWEsQzp6YX07VC5wcm90b3R5cGUucD1mdW5jdGlvbigpe2Zvcig7IXRoaXMuczspe3ZhciBkPVkodGhpcywzKTtkJjEmJih0aGlzLnM9eCk7ZD4+Pj0xO3N3aXRjaChkKXtjYXNlIDA6dmFyIGE9dGhpcy5pbnB1dCxjPXRoaXMuYyxmPXRoaXMuYSxiPXRoaXMuYixlPXUsZz11LGg9dSxrPWYubGVuZ3RoLG49dTt0aGlzLmU9dGhpcy5nPTA7ZT1hW2MrK107ZT09PXUmJmwoRXJyb3IoImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogTEVOIChmaXJzdCBieXRlKSIpKTtnPWU7ZT1hW2MrK107ZT09PXUmJmwoRXJyb3IoImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogTEVOIChzZWNvbmQgYnl0ZSkiKSk7Z3w9ZTw8ODtlPWFbYysrXTtlPT09dSYmbChFcnJvcigiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBOTEVOIChmaXJzdCBieXRlKSIpKTtoPWU7ZT1hW2MrK107ZT09PXUmJmwoRXJyb3IoImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogTkxFTiAoc2Vjb25kIGJ5dGUpIikpO2h8PWU8PDg7Zz09PX5oJiZsKEVycm9yKCJpbnZhbGlkIHVuY29tcHJlc3NlZCBibG9jayBoZWFkZXI6IGxlbmd0aCB2ZXJpZnkiKSk7YytnPmEubGVuZ3RoJiZsKEVycm9yKCJpbnB1dCBidWZmZXIgaXMgYnJva2VuIikpO3N3aXRjaCh0aGlzLm4pe2Nhc2UgQWE6Zm9yKDtiK2c+Zi5sZW5ndGg7KXtuPWstYjtnLT1uO2lmKEUpZi5zZXQoYS5zdWJhcnJheShjLGMrbiksYiksYis9bixjKz1uO2Vsc2UgZm9yKDtuLS07KWZbYisrXT1hW2MrK107dGhpcy5iPWI7Zj10aGlzLmYoKTtiPXRoaXMuYjt9YnJlYWs7Y2FzZSB6YTpmb3IoO2IrZz5mLmxlbmd0aDspZj10aGlzLmYoe3Y6Mn0pO2JyZWFrO2RlZmF1bHQ6bChFcnJvcigiaW52YWxpZCBpbmZsYXRlIG1vZGUiKSk7fWlmKEUpZi5zZXQoYS5zdWJhcnJheShjLGMrZyksYiksYis9ZyxjKz1nO2Vsc2UgZm9yKDtnLS07KWZbYisrXT1hW2MrK107dGhpcy5jPWM7dGhpcy5iPWI7dGhpcy5hPWY7YnJlYWs7Y2FzZSAxOnRoaXMubyhDYSxSYSk7YnJlYWs7Y2FzZSAyOlNhKHRoaXMpO2JyZWFrO2RlZmF1bHQ6bChFcnJvcigidW5rbm93biBCVFlQRTogIitkKSk7fX1yZXR1cm4gdGhpcy50KCk7fTt2YXIgVGE9WzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdLFVhPUU/bmV3IFVpbnQxNkFycmF5KFRhKTpUYSxWYT1bMyw0LDUsNiw3LDgsOSwxMCwxMSwxMywxNSwxNywxOSwyMywyNywzMSwzNSw0Myw1MSw1OSw2Nyw4Myw5OSwxMTUsMTMxLDE2MywxOTUsMjI3LDI1OCwyNTgsMjU4XSxXYT1FP25ldyBVaW50MTZBcnJheShWYSk6VmEsWGE9WzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMCwwLDBdLFlhPUU/bmV3IFVpbnQ4QXJyYXkoWGEpOlhhLFphPVsxLDIsMyw0LDUsNyw5LDEzLDE3LDI1LDMzLDQ5LDY1LDk3LDEyOSwxOTMsMjU3LDM4NSw1MTMsNzY5LDEwMjUsMTUzNywyMDQ5LDMwNzMsNDA5Nyw2MTQ1LDgxOTMsMTIyODksMTYzODUsMjQ1NzddLCRhPUU/bmV3IFVpbnQxNkFycmF5KFphKTpaYSxhYj1bMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxM10sYmI9RT9uZXcgVWludDhBcnJheShhYik6YWIsY2I9bmV3IChFP1VpbnQ4QXJyYXk6QXJyYXkpKDI4OCksWixkYjtaPTA7Zm9yKGRiPWNiLmxlbmd0aDtaPGRiOysrWiljYltaXT0xNDM+PVo/ODoyNTU+PVo/OToyNzk+PVo/Nzo4O3ZhciBDYT1SKGNiKSxlYj1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoMzApLGZiLGhiO2ZiPTA7Zm9yKGhiPWViLmxlbmd0aDtmYjxoYjsrK2ZiKWViW2ZiXT01O3ZhciBSYT1SKGViKTtmdW5jdGlvbiBZKGQsYSl7Zm9yKHZhciBjPWQuZyxmPWQuZSxiPWQuaW5wdXQsZT1kLmMsZztmPGE7KWc9YltlKytdLGc9PT11JiZsKEVycm9yKCJpbnB1dCBidWZmZXIgaXMgYnJva2VuIikpLGN8PWc8PGYsZis9ODtnPWMmKDE8PGEpLTE7ZC5nPWM+Pj5hO2QuZT1mLWE7ZC5jPWU7cmV0dXJuIGc7fWZ1bmN0aW9uIGliKGQsYSl7Zm9yKHZhciBjPWQuZyxmPWQuZSxiPWQuaW5wdXQsZT1kLmMsZz1hWzBdLGg9YVsxXSxrLG4scTtmPGg7KXtrPWJbZSsrXTtpZihrPT09dSlicmVhaztjfD1rPDxmO2YrPTg7fW49Z1tjJigxPDxoKS0xXTtxPW4+Pj4xNjtkLmc9Yz4+cTtkLmU9Zi1xO2QuYz1lO3JldHVybiBuJjY1NTM1O31mdW5jdGlvbiBTYShkKXtmdW5jdGlvbiBhKGEsYixjKXt2YXIgZCxmLGUsZztmb3IoZz0wO2c8YTspc3dpdGNoKGQ9aWIodGhpcyxiKSxkKXtjYXNlIDE2OmZvcihlPTMrWSh0aGlzLDIpO2UtLTspY1tnKytdPWY7YnJlYWs7Y2FzZSAxNzpmb3IoZT0zK1kodGhpcywzKTtlLS07KWNbZysrXT0wO2Y9MDticmVhaztjYXNlIDE4OmZvcihlPTExK1kodGhpcyw3KTtlLS07KWNbZysrXT0wO2Y9MDticmVhaztkZWZhdWx0OmY9Y1tnKytdPWQ7fXJldHVybiBjO312YXIgYz1ZKGQsNSkrMjU3LGY9WShkLDUpKzEsYj1ZKGQsNCkrNCxlPW5ldyAoRT9VaW50OEFycmF5OkFycmF5KShVYS5sZW5ndGgpLGcsaCxrLG47Zm9yKG49MDtuPGI7KytuKWVbVWFbbl1dPVkoZCwzKTtnPVIoZSk7aD1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoYyk7az1uZXcgKEU/VWludDhBcnJheTpBcnJheSkoZik7ZC5vKFIoYS5jYWxsKGQsYyxnLGgpKSxSKGEuY2FsbChkLGYsZyxrKSkpO31ULnByb3RvdHlwZS5vPWZ1bmN0aW9uKGQsYSl7dmFyIGM9dGhpcy5hLGY9dGhpcy5iO3RoaXMudT1kO2Zvcih2YXIgYj1jLmxlbmd0aC0yNTgsZSxnLGgsazsyNTYhPT0oZT1pYih0aGlzLGQpKTspaWYoMjU2PmUpZj49YiYmKHRoaXMuYj1mLGM9dGhpcy5mKCksZj10aGlzLmIpLGNbZisrXT1lO2Vsc2V7Zz1lLTI1NztrPVdhW2ddOzA8WWFbZ10mJihrKz1ZKHRoaXMsWWFbZ10pKTtlPWliKHRoaXMsYSk7aD0kYVtlXTswPGJiW2VdJiYoaCs9WSh0aGlzLGJiW2VdKSk7Zj49YiYmKHRoaXMuYj1mLGM9dGhpcy5mKCksZj10aGlzLmIpO2Zvcig7ay0tOyljW2ZdPWNbZisrLWhdO31mb3IoOzg8PXRoaXMuZTspdGhpcy5lLT04LHRoaXMuYy0tO3RoaXMuYj1mO307VC5wcm90b3R5cGUuST1mdW5jdGlvbihkLGEpe3ZhciBjPXRoaXMuYSxmPXRoaXMuYjt0aGlzLnU9ZDtmb3IodmFyIGI9Yy5sZW5ndGgsZSxnLGgsazsyNTYhPT0oZT1pYih0aGlzLGQpKTspaWYoMjU2PmUpZj49YiYmKGM9dGhpcy5mKCksYj1jLmxlbmd0aCksY1tmKytdPWU7ZWxzZXtnPWUtMjU3O2s9V2FbZ107MDxZYVtnXSYmKGsrPVkodGhpcyxZYVtnXSkpO2U9aWIodGhpcyxhKTtoPSRhW2VdOzA8YmJbZV0mJihoKz1ZKHRoaXMsYmJbZV0pKTtmK2s+YiYmKGM9dGhpcy5mKCksYj1jLmxlbmd0aCk7Zm9yKDtrLS07KWNbZl09Y1tmKystaF07fWZvcig7ODw9dGhpcy5lOyl0aGlzLmUtPTgsdGhpcy5jLS07dGhpcy5iPWY7fTtULnByb3RvdHlwZS5mPWZ1bmN0aW9uKCl7dmFyIGQ9bmV3IChFP1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMuYi0zMjc2OCksYT10aGlzLmItMzI3NjgsYyxmLGI9dGhpcy5hO2lmKEUpZC5zZXQoYi5zdWJhcnJheSgzMjc2OCxkLmxlbmd0aCkpO2Vsc2V7Yz0wO2ZvcihmPWQubGVuZ3RoO2M8ZjsrK2MpZFtjXT1iW2MrMzI3NjhdO310aGlzLmwucHVzaChkKTt0aGlzLnErPWQubGVuZ3RoO2lmKEUpYi5zZXQoYi5zdWJhcnJheShhLGErMzI3NjgpKTtlbHNlIGZvcihjPTA7MzI3Njg+YzsrK2MpYltjXT1iW2ErY107dGhpcy5iPTMyNzY4O3JldHVybiBiO307VC5wcm90b3R5cGUuSj1mdW5jdGlvbihkKXt2YXIgYSxjPXRoaXMuaW5wdXQubGVuZ3RoL3RoaXMuYysxfDAsZixiLGUsZz10aGlzLmlucHV0LGg9dGhpcy5hO2QmJigibnVtYmVyIj09PXR5cGVvZiBkLnYmJihjPWQudiksIm51bWJlciI9PT10eXBlb2YgZC5GJiYoYys9ZC5GKSk7Mj5jPyhmPShnLmxlbmd0aC10aGlzLmMpL3RoaXMudVsyXSxlPTI1OCooZi8yKXwwLGI9ZTxoLmxlbmd0aD9oLmxlbmd0aCtlOmgubGVuZ3RoPDwxKTpiPWgubGVuZ3RoKmM7RT8oYT1uZXcgVWludDhBcnJheShiKSxhLnNldChoKSk6YT1oO3JldHVybiB0aGlzLmE9YTt9O1QucHJvdG90eXBlLnQ9ZnVuY3Rpb24oKXt2YXIgZD0wLGE9dGhpcy5hLGM9dGhpcy5sLGYsYj1uZXcgKEU/VWludDhBcnJheTpBcnJheSkodGhpcy5xKyh0aGlzLmItMzI3NjgpKSxlLGcsaCxrO2lmKDA9PT1jLmxlbmd0aClyZXR1cm4gRT90aGlzLmEuc3ViYXJyYXkoMzI3NjgsdGhpcy5iKTp0aGlzLmEuc2xpY2UoMzI3NjgsdGhpcy5iKTtlPTA7Zm9yKGc9Yy5sZW5ndGg7ZTxnOysrZSl7Zj1jW2VdO2g9MDtmb3Ioaz1mLmxlbmd0aDtoPGs7KytoKWJbZCsrXT1mW2hdO31lPTMyNzY4O2ZvcihnPXRoaXMuYjtlPGc7KytlKWJbZCsrXT1hW2VdO3RoaXMubD1bXTtyZXR1cm4gdGhpcy5idWZmZXI9Yjt9O1QucHJvdG90eXBlLkg9ZnVuY3Rpb24oKXt2YXIgZCxhPXRoaXMuYjtFP3RoaXMuQj8oZD1uZXcgVWludDhBcnJheShhKSxkLnNldCh0aGlzLmEuc3ViYXJyYXkoMCxhKSkpOmQ9dGhpcy5hLnN1YmFycmF5KDAsYSk6KHRoaXMuYS5sZW5ndGg+YSYmKHRoaXMuYS5sZW5ndGg9YSksZD10aGlzLmEpO3JldHVybiB0aGlzLmJ1ZmZlcj1kO307ZnVuY3Rpb24gamIoZCl7aWYoInN0cmluZyI9PT10eXBlb2YgZCl7dmFyIGE9ZC5zcGxpdCgiIiksYyxmO2M9MDtmb3IoZj1hLmxlbmd0aDtjPGY7YysrKWFbY109KGFbY10uY2hhckNvZGVBdCgwKSYyNTUpPj4+MDtkPWE7fWZvcih2YXIgYj0xLGU9MCxnPWQubGVuZ3RoLGgsaz0wOzA8Zzspe2g9MTAyNDxnPzEwMjQ6ZztnLT1oO2RvIGIrPWRbaysrXSxlKz1iO3doaWxlKC0taCk7YiU9NjU1MjE7ZSU9NjU1MjE7fXJldHVybihlPDwxNnxiKT4+PjA7fTtmdW5jdGlvbiBrYihkLGEpe3ZhciBjLGY7dGhpcy5pbnB1dD1kO3RoaXMuYz0wO2lmKGF8fCEoYT17fSkpYS5pbmRleCYmKHRoaXMuYz1hLmluZGV4KSxhLnZlcmlmeSYmKHRoaXMuTT1hLnZlcmlmeSk7Yz1kW3RoaXMuYysrXTtmPWRbdGhpcy5jKytdO3N3aXRjaChjJjE1KXtjYXNlIGxiOnRoaXMubWV0aG9kPWxiO2JyZWFrO2RlZmF1bHQ6bChFcnJvcigidW5zdXBwb3J0ZWQgY29tcHJlc3Npb24gbWV0aG9kIikpO30wIT09KChjPDw4KStmKSUzMSYmbChFcnJvcigiaW52YWxpZCBmY2hlY2sgZmxhZzoiKygoYzw8OCkrZiklMzEpKTtmJjMyJiZsKEVycm9yKCJmZGljdCBmbGFnIGlzIG5vdCBzdXBwb3J0ZWQiKSk7dGhpcy5BPW5ldyBUKGQse2luZGV4OnRoaXMuYyxidWZmZXJTaXplOmEuYnVmZmVyU2l6ZSxidWZmZXJUeXBlOmEuYnVmZmVyVHlwZSxyZXNpemU6YS5yZXNpemV9KTt9a2IucHJvdG90eXBlLnA9ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmlucHV0LGEsYzthPXRoaXMuQS5wKCk7dGhpcy5jPXRoaXMuQS5jO3RoaXMuTSYmKGM9KGRbdGhpcy5jKytdPDwyNHxkW3RoaXMuYysrXTw8MTZ8ZFt0aGlzLmMrK108PDh8ZFt0aGlzLmMrK10pPj4+MCxjIT09amIoYSkmJmwoRXJyb3IoImludmFsaWQgYWRsZXItMzIgY2hlY2tzdW0iKSkpO3JldHVybiBhO307dmFyIGxiPTg7ZnVuY3Rpb24gbWIoZCxhKXt0aGlzLmlucHV0PWQ7dGhpcy5hPW5ldyAoRT9VaW50OEFycmF5OkFycmF5KSgzMjc2OCk7dGhpcy5oPSQuazt2YXIgYz17fSxmO2lmKChhfHwhKGE9e30pKSYmIm51bWJlciI9PT10eXBlb2YgYS5jb21wcmVzc2lvblR5cGUpdGhpcy5oPWEuY29tcHJlc3Npb25UeXBlO2ZvcihmIGluIGEpY1tmXT1hW2ZdO2Mub3V0cHV0QnVmZmVyPXRoaXMuYTt0aGlzLno9bmV3IGlhKHRoaXMuaW5wdXQsYyk7fXZhciAkPW5hO21iLnByb3RvdHlwZS5qPWZ1bmN0aW9uKCl7dmFyIGQsYSxjLGYsYixlLGcsaD0wO2c9dGhpcy5hO2Q9bGI7c3dpdGNoKGQpe2Nhc2UgbGI6YT1NYXRoLkxPRzJFKk1hdGgubG9nKDMyNzY4KS04O2JyZWFrO2RlZmF1bHQ6bChFcnJvcigiaW52YWxpZCBjb21wcmVzc2lvbiBtZXRob2QiKSk7fWM9YTw8NHxkO2dbaCsrXT1jO3N3aXRjaChkKXtjYXNlIGxiOnN3aXRjaCh0aGlzLmgpe2Nhc2UgJC5OT05FOmI9MDticmVhaztjYXNlICQucjpiPTE7YnJlYWs7Y2FzZSAkLms6Yj0yO2JyZWFrO2RlZmF1bHQ6bChFcnJvcigidW5zdXBwb3J0ZWQgY29tcHJlc3Npb24gdHlwZSIpKTt9YnJlYWs7ZGVmYXVsdDpsKEVycm9yKCJpbnZhbGlkIGNvbXByZXNzaW9uIG1ldGhvZCIpKTt9Zj1iPDw2fDA7Z1toKytdPWZ8MzEtKDI1NipjK2YpJTMxO2U9amIodGhpcy5pbnB1dCk7dGhpcy56LmI9aDtnPXRoaXMuei5qKCk7aD1nLmxlbmd0aDtFJiYoZz1uZXcgVWludDhBcnJheShnLmJ1ZmZlciksZy5sZW5ndGg8PWgrNCYmKHRoaXMuYT1uZXcgVWludDhBcnJheShnLmxlbmd0aCs0KSx0aGlzLmEuc2V0KGcpLGc9dGhpcy5hKSxnPWcuc3ViYXJyYXkoMCxoKzQpKTtnW2grK109ZT4+MjQmMjU1O2dbaCsrXT1lPj4xNiYyNTU7Z1toKytdPWU+PjgmMjU1O2dbaCsrXT1lJjI1NTtyZXR1cm4gZzt9O2Z1bmN0aW9uIG5iKGQsYSl7dmFyIGMsZixiLGU7aWYoT2JqZWN0LmtleXMpYz1PYmplY3Qua2V5cyhhKTtlbHNlIGZvcihmIGluIGM9W10sYj0wLGEpY1tiKytdPWY7Yj0wO2ZvcihlPWMubGVuZ3RoO2I8ZTsrK2IpZj1jW2JdLHooZCsiLiIrZixhW2ZdKTt9O3ooIlpsaWIuSW5mbGF0ZSIsa2IpO3ooIlpsaWIuSW5mbGF0ZS5wcm90b3R5cGUuZGVjb21wcmVzcyIsa2IucHJvdG90eXBlLnApO25iKCJabGliLkluZmxhdGUuQnVmZmVyVHlwZSIse0FEQVBUSVZFOkJhLkMsQkxPQ0s6QmEuRH0pO3ooIlpsaWIuRGVmbGF0ZSIsbWIpO3ooIlpsaWIuRGVmbGF0ZS5jb21wcmVzcyIsZnVuY3Rpb24oZCxhKXtyZXR1cm4gbmV3IG1iKGQsYSkuaigpO30pO3ooIlpsaWIuRGVmbGF0ZS5wcm90b3R5cGUuY29tcHJlc3MiLG1iLnByb3RvdHlwZS5qKTtuYigiWmxpYi5EZWZsYXRlLkNvbXByZXNzaW9uVHlwZSIse05PTkU6JC5OT05FLEZJWEVEOiQucixEWU5BTUlDOiQua30pO30pLmNhbGwodGhpcyk7JG1vZHVsZT17ZGVjb21wcmVzczpmdW5jdGlvbihkYXRhKXtyZXR1cm4gZGF0YTt9LGNvbXByZXNzOmZ1bmN0aW9uKGRhdGEpe3JldHVybiBkYXRhO30sX2RlY29tcHJlc3M6ZnVuY3Rpb24oZGF0YSl7dmFyIF9pbmZsYXRlPW5ldyBabGliLkluZmxhdGUoZGF0YS5zb3VyY2UpO3ZhciBfZD1faW5mbGF0ZS5kZWNvbXByZXNzKCk7Y29uc29sZS5sb2coX2QpO3JldHVybiBieXRlcyhfZCk7fSxfY29tcHJlc3M6ZnVuY3Rpb24oZGF0YSl7Y29uc29sZS5sb2coZGF0YSk7dmFyIF9kZWZsYXRlPW5ldyBabGliLkRlZmxhdGUoZGF0YS5zb3VyY2UpO3ZhciBfZD1fZGVmbGF0ZS5jb21wcmVzcygpO3JldHVybiBieXRlcyhfZCk7fX07JG1vZHVsZS5fX2NsYXNzX189JG1vZHVsZTskbW9kdWxlLl9fc3RyX189ZnVuY3Rpb24oKXtyZXR1cm4gIjxtb2R1bGUgJ3psaWInPiI7fTs=',
'/libs/_browser.js':'JG1vZHVsZT17JCRhbGVydDpfX0JSWVRIT05fXy5fYWxlcnQsY29uZmlybTpmdW5jdGlvbihtZXNzYWdlKXtyZXR1cm4gX19CUllUSE9OX18uSlNPYmplY3Qod2luZG93LmNvbmZpcm0obWVzc2FnZSkpO30sJCRkb2N1bWVudDpfX0JSWVRIT05fXy4kRE9NTm9kZShkb2N1bWVudCksZG9jOl9fQlJZVEhPTl9fLiRET01Ob2RlKGRvY3VtZW50KSxtb3VzZUNvb3JkczpmdW5jdGlvbihldil7cmV0dXJuIF9fQlJZVEhPTl9fLkpTT2JqZWN0KCRtb3VzZUNvb3JkcyhldikpO30scHJvbXB0OmZ1bmN0aW9uKG1lc3NhZ2UsZGVmYXVsdF92YWx1ZSl7cmV0dXJuIF9fQlJZVEhPTl9fLkpTT2JqZWN0KHdpbmRvdy5wcm9tcHQobWVzc2FnZSxkZWZhdWx0X3ZhbHVlfHwnJykpO30sd2luOl9fQlJZVEhPTl9fLndpbiwkJHdpbmRvdzpfX0JSWVRIT05fXy53aW59OyRtb2R1bGUuX19jbGFzc19fPSRtb2R1bGU7JG1vZHVsZS5fX3N0cl9fPWZ1bmN0aW9uKCl7cmV0dXJuICI8bW9kdWxlICdicm93c2VyJz4iO307',
'/libs/math.js':'dmFyICRtb2R1bGU9KGZ1bmN0aW9uKCl7Zm9yKHZhciAkcHlfYnVpbHRpbiBpbiBfX2J1aWx0aW5zX18pZXZhbCgidmFyICIrJHB5X2J1aWx0aW4rIj1fX2J1aWx0aW5zX19bJHB5X2J1aWx0aW5dIik7dmFyIGZsb2F0X2NoZWNrPWZ1bmN0aW9uKHgpe2lmKGlzaW5zdGFuY2UoeCxmbG9hdCkpcmV0dXJuIHgudmFsdWU7cmV0dXJuIHg7fTt2YXIgaXNpbmY9ZnVuY3Rpb24oeCl7dmFyIHgxPWZsb2F0X2NoZWNrKHgpO3JldHVybiB4MT09LUluZmluaXR5fHx4MT09SW5maW5pdHl8fHgxPT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl8fHgxPT1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7fTt2YXIgX21vZD17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7dmFyIHJlcz10aGlzW2F0dHJdO2lmKHJlcz09PXVuZGVmaW5lZCkkcmFpc2UoJ0F0dHJpYnV0ZUVycm9yJywnbW9kdWxlIG1hdGggaGFzIG5vIGF0dHJpYnV0ZSAnK2F0dHIpO3JldHVybiByZXM7fSxhY29zOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLmFjb3MoZmxvYXRfY2hlY2soeCkpKTt9LGFjb3NoOmZ1bmN0aW9uKHgpe2lmKGlzaW5mKHgpKXJldHVybiBmbG9hdCgnaW5mJyk7dmFyIHk9ZmxvYXRfY2hlY2soeCk7cmV0dXJuIGZsb2F0KE1hdGgubG9nKHkrTWF0aC5zcXJ0KHkqeS0xKSkpO30sYXNpbjpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5hc2luKGZsb2F0X2NoZWNrKHgpKSk7fSxhc2luaDpmdW5jdGlvbih4KXtpZihpc2luZih4KSlyZXR1cm4gZmxvYXQoJ2luZicpO3ZhciB5PWZsb2F0X2NoZWNrKHgpO3JldHVybiBmbG9hdChNYXRoLmxvZyh5K01hdGguc3FydCh5KnkrMSkpKTt9LGF0YW46ZnVuY3Rpb24oeCl7aWYoaXNpbmYoeCkpcmV0dXJuIGZsb2F0KE1hdGguUEkvMik7cmV0dXJuIGZsb2F0KE1hdGguYXRhbihmbG9hdF9jaGVjayh4KSkpO30sYXRhbjI6ZnVuY3Rpb24oeSx4KXtyZXR1cm4gZmxvYXQoTWF0aC5hdGFuMih5LHgpKTt9LGF0YW5oOmZ1bmN0aW9uKHgpe3ZhciB5PWZsb2F0X2NoZWNrKHgpO2lmKHk9PTApcmV0dXJuIDA7cmV0dXJuIGZsb2F0KDAuNSpNYXRoLmxvZygoMS95KzEpLygxL3ktMSkpKTt9LGNlaWw6ZnVuY3Rpb24oeCl7dmFyIHk9ZmxvYXRfY2hlY2soeCk7aWYoIWlzTmFOKHBhcnNlRmxvYXQoeSkpJiZpc0Zpbml0ZSh5KSlyZXR1cm4gaW50KE1hdGguY2VpbCh5KSk7dHJ5e3JldHVybiBnZXRhdHRyKHksJ19fY2VpbF9fJykoKTt9Y2F0Y2goZXJyKXskcG9wX2V4YygpO30kcmFpc2UoJ1ZhbHVlRXJyb3InLCdvYmplY3QgaXMgbm90IGEgbnVtYmVyIGFuZCBkb2VzIG5vdCBjb250YWluIF9fY2VpbF9fJyk7fSxjb3B5c2lnbjpmdW5jdGlvbih4LHkpe3ZhciB4MT1NYXRoLmFicyhmbG9hdF9jaGVjayh4KSk7dmFyIHkxPWZsb2F0X2NoZWNrKHkpO3ZhciBzaWduPXkxP3kxPDA/LTE6MToxO2lmKGlzaW5zdGFuY2UoeCxpbnQpKXJldHVybiB4MSpzaWduO2Vsc2UgcmV0dXJuIGZsb2F0KHgxKnNpZ24pO30sY29zOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLmNvcyhmbG9hdF9jaGVjayh4KSkpO30sZGVncmVlczpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoZmxvYXRfY2hlY2soeCkqMTgwL01hdGguUEkpO30sZTpmbG9hdChNYXRoLkUpLGVyZjpmdW5jdGlvbih4KXt2YXIgeT1mbG9hdF9jaGVjayh4KTt2YXIgdD0xLjAvKDEuMCswLjUqTWF0aC5hYnMoeSkpO3ZhciBhbnM9MS10Kk1hdGguZXhwKC15KnktMS4yNjU1MTIyMyt0KigxLjAwMDAyMzY4K3QqKDAuMzc0MDkxOTYrdCooMC4wOTY3ODQxOCt0KigtMC4xODYyODgwNit0KigwLjI3ODg2ODA3K3QqKC0xLjEzNTIwMzk4K3QqKDEuNDg4NTE1ODcrdCooLTAuODIyMTUyMjMrdCowLjE3MDg3Mjc3KSkpKSkpKSkpO2lmKHk+PTAuMClyZXR1cm4gYW5zO3JldHVybiAtYW5zO30sZXJmYzpmdW5jdGlvbih4KXt2YXIgeT1mbG9hdF9jaGVjayh4KTt2YXIgdD0xLjAvKDEuMCswLjUqTWF0aC5hYnMoeSkpO3ZhciBhbnM9MS10Kk1hdGguZXhwKC15KnktMS4yNjU1MTIyMyt0KigxLjAwMDAyMzY4K3QqKDAuMzc0MDkxOTYrdCooMC4wOTY3ODQxOCt0KigtMC4xODYyODgwNit0KigwLjI3ODg2ODA3K3QqKC0xLjEzNTIwMzk4K3QqKDEuNDg4NTE1ODcrdCooLTAuODIyMTUyMjMrdCowLjE3MDg3Mjc3KSkpKSkpKSkpO2lmKHk+PTAuMClyZXR1cm4gMS1hbnM7cmV0dXJuIDErYW5zO30sZXhwOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLmV4cChmbG9hdF9jaGVjayh4KSkpO30sZXhwbTE6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGguZXhwKGZsb2F0X2NoZWNrKHgpKS0xKTt9LGZhYnM6ZnVuY3Rpb24oeCl7cmV0dXJuIHg+MD9mbG9hdCh4KTpmbG9hdCgteCk7fSxmYWN0b3JpYWw6ZnVuY3Rpb24oeCl7dmFyIHk9ZmxvYXRfY2hlY2soeCk7dmFyIHI9MTtmb3IodmFyIGk9MjtpPD15O2krKylyKj1pO3JldHVybiByO30sZmxvb3I6ZnVuY3Rpb24oeCl7cmV0dXJuIE1hdGguZmxvb3IoZmxvYXRfY2hlY2soeCkpO30sZm1vZDpmdW5jdGlvbih4LHkpe3JldHVybiBmbG9hdChmbG9hdF9jaGVjayh4KSVmbG9hdF9jaGVjayh5KSk7fSxmcmV4cDpmdW5jdGlvbih4KXt2YXIgeDE9ZmxvYXRfY2hlY2soeCk7dmFyIGV4PU1hdGguZmxvb3IoTWF0aC5sb2coeDEpL01hdGgubG9nKDIpKSsxO2ZyYWM9eDEvTWF0aC5wb3coMixleCk7cmV0dXJuIFtmcmFjLGV4XTt9LGdhbW1hOmZ1bmN0aW9uKHgpe3ZhciB5PWZsb2F0X2NoZWNrKHgpO3ZhciB6PXkrMTt2YXIgZDE9TWF0aC5zcXJ0KDIqTWF0aC5QSSkvejt2YXIgZDI9MS4wMDAwMDAwMDAxOTAwMTU7ZDIrPTc2LjE4MDA5MTcyOTQ3MTQ2Lyh6KzEpO2QyKz0tODYuNTA1MzIwMzI5NDE2NzcvKHorMik7ZDIrPTI0LjAxNDA5ODI0MDgzMDkxLyh6KzMpO2QyKz0tMS4yMzE3Mzk1NzI0NTAxNTUvKHorNCk7ZDIrPTEuMjA4NjUwOTczODY2MTc5RS0zLyh6KzUpO2QyKz0tNS4zOTUyMzkzODQ5NTNFLTYvKHorNik7cmV0dXJuIGQxKmQyKk1hdGgucG93KHorNS41LHorMC41KSpNYXRoLmV4cCgtKHorNS41KSk7fSxoeXBvdDpmdW5jdGlvbih4LHkpe3ZhciB4MT1mbG9hdF9jaGVjayh4KTt2YXIgeTE9ZmxvYXRfY2hlY2soeSk7cmV0dXJuIGZsb2F0KE1hdGguc3FydCh4MSp4MSt5MSp5MSkpO30saXNmaW5pdGU6ZnVuY3Rpb24oeCl7cmV0dXJuIGlzRmluaXRlKGZsb2F0X2NoZWNrKHgpKTt9LGlzaW5mOmZ1bmN0aW9uKHgpe3JldHVybiBpc2luZih4KTt9LGlzbmFuOmZ1bmN0aW9uKHgpe3JldHVybiBpc05hTihmbG9hdF9jaGVjayh4KSk7fSxsZGV4cDpmdW5jdGlvbih4LGkpe3ZhciBtdWw9TWF0aC5wb3coMixmbG9hdF9jaGVjayhpKSk7aWYoaXNpbnN0YW5jZSh4LGludCkpcmV0dXJuIHgqbXVsO2Vsc2UgcmV0dXJuIGZsb2F0KHgudmFsdWUqbXVsKTt9LGxnYW1tYTpmdW5jdGlvbih4KXt2YXIgeT1mbG9hdF9jaGVjayh4KTt2YXIgej15KzE7dmFyIGQxPU1hdGguc3FydCgyKk1hdGguUEkpL3o7dmFyIGQyPTEuMDAwMDAwMDAwMTkwMDE1O2QyKz03Ni4xODAwOTE3Mjk0NzE0Ni8oeisxKTtkMis9LTg2LjUwNTMyMDMyOTQxNjc3Lyh6KzIpO2QyKz0yNC4wMTQwOTgyNDA4MzA5MS8oeiszKTtkMis9LTEuMjMxNzM5NTcyNDUwMTU1Lyh6KzQpO2QyKz0xLjIwODY1MDk3Mzg2NjE3OUUtMy8oeis1KTtkMis9LTUuMzk1MjM5Mzg0OTUzRS02Lyh6KzYpO3JldHVybiBmbG9hdChNYXRoLmxvZyhNYXRoLmFicyhkMSpkMipNYXRoLnBvdyh6KzUuNSx6KzAuNSkqTWF0aC5leHAoLSh6KzUuNSkpKSkpO30sbG9nOmZ1bmN0aW9uKHgsYmFzZSl7dmFyIHgxPWZsb2F0X2NoZWNrKHgpO2lmKGJhc2U9PT11bmRlZmluZWQpcmV0dXJuIGZsb2F0KE1hdGgubG9nKHgxKSk7cmV0dXJuIGZsb2F0KE1hdGgubG9nKHgxKS9NYXRoLmxvZyhmbG9hdF9jaGVjayhiYXNlKSkpO30sbG9nMXA6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGgubG9nKDEuMCtmbG9hdF9jaGVjayh4KSkpO30sbG9nMjpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5sb2coZmxvYXRfY2hlY2soeCkpL01hdGguTE4yKTt9LGxvZzEwOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLmxvZyhmbG9hdF9jaGVjayh4KSkvTWF0aC5MTjEwKTt9LG1vZGY6ZnVuY3Rpb24oeCl7dmFyIHgxPWZsb2F0X2NoZWNrKHgpO2lmKHgxPjApe3ZhciBpPWZsb2F0KHgxLU1hdGguZmxvb3IoeDEpKTtyZXR1cm4gW2ksZmxvYXQoeDEtaSldO312YXIgaT1mbG9hdCh4MS1NYXRoLmNlaWwoeDEpKTtyZXR1cm4gW2ksZmxvYXQoTWF0aC5jZWlsKHgxKSldO30scGk6ZmxvYXQoTWF0aC5QSSkscG93OmZ1bmN0aW9uKHgseSl7aWYoaXNpbnN0YW5jZSh4LGludCkpcmV0dXJuIE1hdGgucG93KHgsZmxvYXRfY2hlY2soeSkpO2Vsc2UgcmV0dXJuIGZsb2F0KE1hdGgucG93KHgudmFsdWUsZmxvYXRfY2hlY2soeSkpKTt9LHJhZGlhbnM6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KGZsb2F0X2NoZWNrKHgpKk1hdGguUEkvMTgwKTt9LHNpbjpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5zaW4oZmxvYXRfY2hlY2soeCkpKTt9LHNxcnQ6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGguc3FydChmbG9hdF9jaGVjayh4KSkpO30sdHJ1bmM6ZnVuY3Rpb24oeCl7Y29uc29sZS5sb2coJ3RydW5jJyk7dHJ5e3JldHVybiBnZXRhdHRyKHgsJ19fdHJ1bmNfXycpKCk7fWNhdGNoKGVycil7JHBvcF9leGMoKTt9dmFyIHgxPWZsb2F0X2NoZWNrKHgpO2lmKCFpc05hTihwYXJzZUZsb2F0KHgxKSkmJmlzRmluaXRlKHgxKSlyZXR1cm4gaW50KE1hdGguZmxvb3IoeDEpKTskcmFpc2UoJ1ZhbHVlRXJyb3InLCdvYmplY3QgaXMgbm90IGEgbnVtYmVyIGFuZCBkb2VzIG5vdCBjb250YWluIF9fdHJ1bmNfXycpO319O2Zvcih2YXIgJGF0dHIgaW4gX21vZClpZih0eXBlb2YgX21vZFskYXR0cl09PT0nZnVuY3Rpb24nKXtfbW9kWyRhdHRyXS5fX3JlcHJfXz0oZnVuY3Rpb24oZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICc8YnVpbHQtaW4gZnVuY3Rpb24gJytmdW5jKyc+Jzt9O30pKCRhdHRyKTtfbW9kWyRhdHRyXS5fX3N0cl9fPShmdW5jdGlvbihmdW5jKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJzxidWlsdC1pbiBmdW5jdGlvbiAnK2Z1bmMrJz4nO307fSkoJGF0dHIpO31yZXR1cm4gX21vZDt9KSgpOw==',
'/libs/hashlib.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmb3IodmFyICRweV9idWlsdGluIGluIF9fYnVpbHRpbnNfXylldmFsKCJ2YXIgIiskcHlfYnVpbHRpbisiPV9fYnVpbHRpbnNfX1skcHlfYnVpbHRpbl0iKTskbW9kPXtfX2dldGF0dHJfXzpmdW5jdGlvbihhdHRyKXtpZihhdHRyPT0nbmV3JylyZXR1cm4gJGhhc2hsaWJfbmV3O3JldHVybiB0aGlzW2F0dHJdO30sbWQ1OmZ1bmN0aW9uKCl7cmV0dXJuICRoYXNobGliX25ldygnbWQ1Jyk7fSxzaGExOmZ1bmN0aW9uKCl7cmV0dXJuICRoYXNobGliX25ldygnc2hhMScpO30sc2hhMjI0OmZ1bmN0aW9uKCl7cmV0dXJuICRoYXNobGliX25ldygnc2hhMjI0Jyk7fSxzaGEyNTY6ZnVuY3Rpb24oKXtyZXR1cm4gJGhhc2hsaWJfbmV3KCdzaGEyNTYnKTt9LHNoYTM4NDpmdW5jdGlvbigpe3JldHVybiAkaGFzaGxpYl9uZXcoJ3NoYTM4NCcpO30sc2hhNTEyOmZ1bmN0aW9uKCl7cmV0dXJuICRoYXNobGliX25ldygnc2hhNTEyJyk7fSxhbGdvcml0aG1zX2d1YXJhbnRlZWQ6WydtZDUnLCdzaGExJywnc2hhMjI0Jywnc2hhMjU2Jywnc2hhMzg0Jywnc2hhNTEyJ10sYWxnb3JpdGhtc19hdmFpbGFibGU6WydtZDUnLCdzaGExJywnc2hhMjI0Jywnc2hhMjU2Jywnc2hhMzg0Jywnc2hhNTEyJ119O2Z1bmN0aW9uICRnZXRfQ3J5cHRvSlNfbGliKGFsZyl7dmFyIGltcD0kaW1wb3J0ZXIoKTt2YXIgJHhtbGh0dHA9aW1wWzBdLGZha2VfcXM9aW1wWzFdLHRpbWVyPWltcFsyXSxyZXM9bnVsbDskeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZigkeG1saHR0cC5yZWFkeVN0YXRlPT00KXt3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtpZigkeG1saHR0cC5zdGF0dXM9PTIwMHx8JHhtbGh0dHAuc3RhdHVzPT0wKXJlcz0keG1saHR0cC5yZXNwb25zZVRleHQ7ZWxzZXtyZXM9RXJyb3IoKTtyZXMubmFtZT0nTm90Rm91bmRFcnJvcic7cmVzLm1lc3NhZ2U9Ik5vIENyeXB0b0pTIGxpYiBuYW1lZCAnIithbGcrIiciO319fTskeG1saHR0cC5vcGVuKCdHRVQnLF9fQlJZVEhPTl9fLmJyeXRob25fcGF0aCsnbGlicy9jcnlwdG9fanMvcm9sbHVwcy8nK2FsZysnLmpzJytmYWtlX3FzLGZhbHNlKTtpZignb3ZlcnJpZGVNaW1lVHlwZScgaW4gJHhtbGh0dHApJHhtbGh0dHAub3ZlcnJpZGVNaW1lVHlwZSgidGV4dC9wbGFpbiIpOyR4bWxodHRwLnNlbmQoKTtpZihyZXMuY29uc3RydWN0b3I9PT1FcnJvcil0aHJvdyByZXM7dHJ5e2V2YWwocmVzKyI7IF9fQlJZVEhPTl9fLkNyeXB0b0pTPUNyeXB0b0pTOyIpO31jYXRjaChlcnIpe3Rocm93IEVycm9yKCJKUyBFdmFsIEVycm9yIiwiQ2Fubm90IGV2YWwgQ3J5cHRvSlMgYWxnb3JpdGhtICciK2FsZysiJyA6IGVycm9yOiIrZXJyKTt9fWZ1bmN0aW9uICRoYXNobGliX25ldyhhbGcpe2lmKGFsZz09J21kNScpe2lmKF9fQlJZVEhPTl9fLkNyeXB0bz09PXVuZGVmaW5lZHx8X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5NRDU9PT11bmRlZmluZWQpJGdldF9DcnlwdG9KU19saWIoJ21kNScpO3RoaXMuaGFzaD1fX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLk1ENS5jcmVhdGUoKTt9ZWxzZSBpZihhbGc9PSdzaGExJyl7aWYoX19CUllUSE9OX18uQ3J5cHRvPT09dW5kZWZpbmVkfHxfX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTE9PT11bmRlZmluZWQpJGdldF9DcnlwdG9KU19saWIoJ3NoYTEnKTt0aGlzLmhhc2g9X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEExLmNyZWF0ZSgpO31lbHNlIGlmKGFsZz09J3NoYTIyNCcpe2lmKF9fQlJZVEhPTl9fLkNyeXB0bz09PXVuZGVmaW5lZHx8X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEEyMjQ9PT11bmRlZmluZWQpJGdldF9DcnlwdG9KU19saWIoJ3NoYTIyNCcpO3RoaXMuaGFzaD1fX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTIyNC5jcmVhdGUoKTt9ZWxzZSBpZihhbGc9PSdzaGEyNTYnKXtpZihfX0JSWVRIT05fXy5DcnlwdG89PT11bmRlZmluZWR8fF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBMjU2PT09dW5kZWZpbmVkKSRnZXRfQ3J5cHRvSlNfbGliKCdzaGEyNTYnKTt0aGlzLmhhc2g9X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEEyNTYuY3JlYXRlKCk7fWVsc2UgaWYoYWxnPT0nc2hhMzg0Jyl7aWYoX19CUllUSE9OX18uQ3J5cHRvPT09dW5kZWZpbmVkfHxfX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTM4ND09PXVuZGVmaW5lZCkkZ2V0X0NyeXB0b0pTX2xpYignc2hhMzg0Jyk7dGhpcy5oYXNoPV9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBMzg0LmNyZWF0ZSgpO31lbHNlIGlmKGFsZz09J3NoYTUxMicpe2lmKF9fQlJZVEhPTl9fLkNyeXB0bz09PXVuZGVmaW5lZHx8X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEE1MTI9PT11bmRlZmluZWQpJGdldF9DcnlwdG9KU19saWIoJ3NoYTUxMicpO3RoaXMuaGFzaD1fX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTUxMi5jcmVhdGUoKTt9ZWxzZSAkcmFpc2UoJ0F0dHJpYnV0ZUVycm9yJywnSW52YWxpZCBoYXNoIGFsZ29yaXRobTonK2FsZyk7dGhpcy5fX2NsYXNzX189JHR5cGU7dGhpcy5fX2dldGF0dHJfXz1mdW5jdGlvbihhdHRyKXtyZXR1cm4gJGdldGF0dHIodGhpcyxhdHRyKTt9O3RoaXMuX19zdHJfXz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhleGRpZ2VzdCgpO307dGhpcy51cGRhdGU9ZnVuY3Rpb24obXNnKXt0aGlzLmhhc2gudXBkYXRlKG1zZyk7fTt0aGlzLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNoLmNsb25lKCk7fTt0aGlzLmhleGRpZ2VzdD1mdW5jdGlvbigpe3ZhciB0ZW1wPXRoaXMuaGFzaC5jbG9uZSgpO3RlbXA9dGVtcC5maW5hbGl6ZSgpO3JldHVybiB0ZW1wLnRvU3RyaW5nKCk7fTtyZXR1cm4gdGhpczt9cmV0dXJuICRtb2Q7fSkoKTs=',
'/libs/_os.js':'JG1vZHVsZT17cmFuZG9tOmZ1bmN0aW9uKCl7cmV0dXJuIF9fYnVpbHRpbnNfXy5mbG9hdChNYXRoLnJhbmRvbSgpKTt9LHJhbmRpbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gX19idWlsdGluc19fLmludChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGItYSkrYSkpO319Ow==',
'/libs/_sys.js':'JG1vZHVsZT17bW9kdWxlczp7J19fZ2V0X18nOmZ1bmN0aW9uKCl7cmV0dXJuIF9fYnVpbHRpbnNfXy5kaWN0KF9fQlJZVEhPTl9fLkpTT2JqZWN0KF9fQlJZVEhPTl9fLmltcG9ydGVkKSk7fSwnX19zZXRfXyc6MH19Ow==',
'/libs/crypto_js/rollups/sha1.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihlLG0pe3ZhciBwPXt9LGo9cC5saWI9e30sbD1mdW5jdGlvbigpe30sZj1qLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtsLnByb3RvdHlwZT10aGlzO3ZhciBjPW5ldyBsKCk7YSYmYy5taXhJbihhKTtjLmhhc093blByb3BlcnR5KCJpbml0Iil8fChjLmluaXQ9ZnVuY3Rpb24oKXtjLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtjLmluaXQucHJvdG90eXBlPWM7Yy4kc3VwZXI9dGhpcztyZXR1cm4gYzt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJih0aGlzW2NdPWFbY10pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0sbj1qLldvcmRBcnJheT1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGMpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWMhPW0/Yzo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fGgpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLndvcmRzLHE9YS53b3JkcyxkPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihkJTQpZm9yKHZhciBiPTA7YjxhO2IrKyljW2QrYj4+PjJdfD0ocVtiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NSk8PDI0LTgqKChkK2IpJTQpO2Vsc2UgaWYoNjU1MzU8cS5sZW5ndGgpZm9yKGI9MDtiPGE7Yis9NCljW2QrYj4+PjJdPXFbYj4+PjJdO2Vsc2UgYy5wdXNoLmFwcGx5KGMscSk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YVtjPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGMlNCk7YS5sZW5ndGg9ZS5jZWlsKGMvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVtdLGI9MDtiPGE7Yis9NCljLnB1c2goNDI5NDk2NzI5NiplLnJhbmRvbSgpfDApO3JldHVybiBuZXcgbi5pbml0KGMsYSk7fX0pLGI9cC5lbmM9e30saD1iLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgYj1bXSxkPTA7ZDxhO2QrKyl7dmFyIGY9Y1tkPj4+Ml0+Pj4yNC04KihkJTQpJjI1NTtiLnB1c2goKGY+Pj40KS50b1N0cmluZygxNikpO2IucHVzaCgoZiYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGIuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGM9YS5sZW5ndGgsYj1bXSxkPTA7ZDxjO2QrPTIpYltkPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGQsMiksMTYpPDwyNC00KihkJTgpO3JldHVybiBuZXcgbi5pbml0KGIsYy8yKTt9fSxnPWIuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGM9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBiPVtdLGQ9MDtkPGE7ZCsrKWIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGNbZD4+PjJdPj4+MjQtOCooZCU0KSYyNTUpKTtyZXR1cm4gYi5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1hLmxlbmd0aCxiPVtdLGQ9MDtkPGM7ZCsrKWJbZD4+PjJdfD0oYS5jaGFyQ29kZUF0KGQpJjI1NSk8PDI0LTgqKGQlNCk7cmV0dXJuIG5ldyBuLmluaXQoYixjKTt9fSxyPWIuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShnLnN0cmluZ2lmeShhKSkpO31jYXRjaChjKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gZy5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpKTt9fSxrPWouQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1mLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBuLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9ci5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuX2RhdGEsYj1jLndvcmRzLGQ9Yy5zaWdCeXRlcyxmPXRoaXMuYmxvY2tTaXplLGg9ZC8oNCpmKSxoPWE/ZS5jZWlsKGgpOmUubWF4KChofDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1oKmY7ZD1lLm1pbig0KmEsZCk7aWYoYSl7Zm9yKHZhciBnPTA7ZzxhO2crPWYpdGhpcy5fZG9Qcm9jZXNzQmxvY2soYixnKTtnPWIuc3BsaWNlKDAsYSk7Yy5zaWdCeXRlcy09ZDt9cmV0dXJuIG5ldyBuLmluaXQoZyxkKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Zi5jbG9uZS5jYWxsKHRoaXMpO2EuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBhO30sX21pbkJ1ZmZlclNpemU6MH0pO2ouSGFzaGVyPWsuZXh0ZW5kKHtjZmc6Zi5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe2sucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5fYXBwZW5kKGEpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsYil7cmV0dXJuIG5ldyBhLmluaXQoYikuZmluYWxpemUoYyk7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGYpe3JldHVybiBuZXcgcy5ITUFDLmluaXQoYSxmKS5maW5hbGl6ZShiKTt9O319KTt2YXIgcz1wLmFsZ289e307cmV0dXJuIHA7fShNYXRoKTsoZnVuY3Rpb24oKXt2YXIgZT1DcnlwdG9KUyxtPWUubGliLHA9bS5Xb3JkQXJyYXksaj1tLkhhc2hlcixsPVtdLG09ZS5hbGdvLlNIQTE9ai5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgcC5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pO30sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGYsbil7Zm9yKHZhciBiPXRoaXMuX2hhc2gud29yZHMsaD1iWzBdLGc9YlsxXSxlPWJbMl0saz1iWzNdLGo9Yls0XSxhPTA7ODA+YTthKyspe2lmKDE2PmEpbFthXT1mW24rYV18MDtlbHNle3ZhciBjPWxbYS0zXV5sW2EtOF1ebFthLTE0XV5sW2EtMTZdO2xbYV09Yzw8MXxjPj4+MzE7fWM9KGg8PDV8aD4+PjI3KStqK2xbYV07Yz0yMD5hP2MrKChnJmV8fmcmaykrMTUxODUwMDI0OSk6NDA+YT9jKygoZ15lXmspKzE4NTk3NzUzOTMpOjYwPmE/YysoKGcmZXxnJmt8ZSZrKS0xODk0MDA3NTg4KTpjKygoZ15lXmspLTg5OTQ5NzUxNCk7aj1rO2s9ZTtlPWc8PDMwfGc+Pj4yO2c9aDtoPWM7fWJbMF09YlswXStofDA7YlsxXT1iWzFdK2d8MDtiWzJdPWJbMl0rZXwwO2JbM109YlszXStrfDA7Yls0XT1iWzRdK2p8MDt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGY9dGhpcy5fZGF0YSxlPWYud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsaD04KmYuc2lnQnl0ZXM7ZVtoPj4+NV18PTEyODw8MjQtaCUzMjtlWyhoKzY0Pj4+OTw8NCkrMTRdPU1hdGguZmxvb3IoYi80Mjk0OTY3Mjk2KTtlWyhoKzY0Pj4+OTw8NCkrMTVdPWI7Zi5zaWdCeXRlcz00KmUubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaDt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGU9ai5jbG9uZS5jYWxsKHRoaXMpO2UuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBlO319KTtlLlNIQTE9ai5fY3JlYXRlSGVscGVyKG0pO2UuSG1hY1NIQTE9ai5fY3JlYXRlSG1hY0hlbHBlcihtKTt9KSgpOw==',
'/libs/crypto_js/rollups/sha3.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbih2LHApe3ZhciBkPXt9LHU9ZC5saWI9e30scj1mdW5jdGlvbigpe30sZj11LkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtyLnByb3RvdHlwZT10aGlzO3ZhciBiPW5ldyByKCk7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtiLmluaXQucHJvdG90eXBlPWI7Yi4kc3VwZXI9dGhpcztyZXR1cm4gYjt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scz11LldvcmRBcnJheT1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWIhPXA/Yjo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHkpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGM9YS53b3JkcyxqPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihqJTQpZm9yKHZhciBuPTA7bjxhO24rKyliW2orbj4+PjJdfD0oY1tuPj4+Ml0+Pj4yNC04KihuJTQpJjI1NSk8PDI0LTgqKChqK24pJTQpO2Vsc2UgaWYoNjU1MzU8Yy5sZW5ndGgpZm9yKG49MDtuPGE7bis9NCliW2orbj4+PjJdPWNbbj4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsYyk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7YVtiPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGIlNCk7YS5sZW5ndGg9di5jZWlsKGIvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MDtjPGE7Yys9NCliLnB1c2goNDI5NDk2NzI5Nip2LnJhbmRvbSgpfDApO3JldHVybiBuZXcgcy5pbml0KGIsYSk7fX0pLHg9ZC5lbmM9e30seT14LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgYz1bXSxqPTA7ajxhO2orKyl7dmFyIG49YltqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NTtjLnB1c2goKG4+Pj40KS50b1N0cmluZygxNikpO2MucHVzaCgobiYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGMuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1bXSxqPTA7ajxiO2orPTIpY1tqPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGosMiksMTYpPDwyNC00KihqJTgpO3JldHVybiBuZXcgcy5pbml0KGMsYi8yKTt9fSxlPXguTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBjPVtdLGo9MDtqPGE7aisrKWMucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJbaj4+PjJdPj4+MjQtOCooaiU0KSYyNTUpKTtyZXR1cm4gYy5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPVtdLGo9MDtqPGI7aisrKWNbaj4+PjJdfD0oYS5jaGFyQ29kZUF0KGopJjI1NSk8PDI0LTgqKGolNCk7cmV0dXJuIG5ldyBzLmluaXQoYyxiKTt9fSxxPXguVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShlLnN0cmluZ2lmeShhKSkpO31jYXRjaChiKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gZS5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpKTt9fSx0PXUuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1mLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBzLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9cS5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2RhdGEsYz1iLndvcmRzLGo9Yi5zaWdCeXRlcyxuPXRoaXMuYmxvY2tTaXplLGU9ai8oNCpuKSxlPWE/di5jZWlsKGUpOnYubWF4KChlfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1lKm47aj12Lm1pbig0KmEsaik7aWYoYSl7Zm9yKHZhciBmPTA7ZjxhO2YrPW4pdGhpcy5fZG9Qcm9jZXNzQmxvY2soYyxmKTtmPWMuc3BsaWNlKDAsYSk7Yi5zaWdCeXRlcy09ajt9cmV0dXJuIG5ldyBzLmluaXQoZixqKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Zi5jbG9uZS5jYWxsKHRoaXMpO2EuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBhO30sX21pbkJ1ZmZlclNpemU6MH0pO3UuSGFzaGVyPXQuZXh0ZW5kKHtjZmc6Zi5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe3QucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5fYXBwZW5kKGEpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7cmV0dXJuIG5ldyBhLmluaXQoYykuZmluYWxpemUoYik7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe3JldHVybiBuZXcgdy5ITUFDLmluaXQoYSxjKS5maW5hbGl6ZShiKTt9O319KTt2YXIgdz1kLmFsZ289e307cmV0dXJuIGQ7fShNYXRoKTsoZnVuY3Rpb24odil7dmFyIHA9Q3J5cHRvSlMsZD1wLmxpYix1PWQuQmFzZSxyPWQuV29yZEFycmF5LHA9cC54NjQ9e307cC5Xb3JkPXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGYscyl7dGhpcy5oaWdoPWY7dGhpcy5sb3c9czt9fSk7cC5Xb3JkQXJyYXk9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZixzKXtmPXRoaXMud29yZHM9Znx8W107dGhpcy5zaWdCeXRlcz1zIT12P3M6OCpmLmxlbmd0aDt9LHRvWDMyOmZ1bmN0aW9uKCl7Zm9yKHZhciBmPXRoaXMud29yZHMscz1mLmxlbmd0aCxkPVtdLHA9MDtwPHM7cCsrKXt2YXIgZT1mW3BdO2QucHVzaChlLmhpZ2gpO2QucHVzaChlLmxvdyk7fXJldHVybiByLmNyZWF0ZShkLHRoaXMuc2lnQnl0ZXMpO30sY2xvbmU6ZnVuY3Rpb24oKXtmb3IodmFyIGY9dS5jbG9uZS5jYWxsKHRoaXMpLGQ9Zi53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLHA9ZC5sZW5ndGgscj0wO3I8cDtyKyspZFtyXT1kW3JdLmNsb25lKCk7cmV0dXJuIGY7fX0pO30pKCk7KGZ1bmN0aW9uKHYpe2Zvcih2YXIgcD1DcnlwdG9KUyxkPXAubGliLHU9ZC5Xb3JkQXJyYXkscj1kLkhhc2hlcixmPXAueDY0LldvcmQsZD1wLmFsZ28scz1bXSx4PVtdLHk9W10sZT0xLHE9MCx0PTA7MjQ+dDt0Kyspe3NbZSs1KnFdPSh0KzEpKih0KzIpLzIlNjQ7dmFyIHc9KDIqZSszKnEpJTUsZT1xJTUscT13O31mb3IoZT0wOzU+ZTtlKyspZm9yKHE9MDs1PnE7cSsrKXhbZSs1KnFdPXErNSooKDIqZSszKnEpJTUpO2U9MTtmb3IocT0wOzI0PnE7cSsrKXtmb3IodmFyIGE9dz10PTA7Nz5hO2ErKyl7aWYoZSYxKXt2YXIgYj0oMTw8YSktMTszMj5iP3dePTE8PGI6dF49MTw8Yi0zMjt9ZT1lJjEyOD9lPDwxXjExMzplPDwxO315W3FdPWYuY3JlYXRlKHQsdyk7fWZvcih2YXIgYz1bXSxlPTA7MjU+ZTtlKyspY1tlXT1mLmNyZWF0ZSgpO2Q9ZC5TSEEzPXIuZXh0ZW5kKHtjZmc6ci5jZmcuZXh0ZW5kKHtvdXRwdXRMZW5ndGg6NTEyfSksX2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5fc3RhdGU9W10sYj0wOzI1PmI7YisrKWFbYl09bmV3IGYuaW5pdCgpO3RoaXMuYmxvY2tTaXplPSgxNjAwLTIqdGhpcy5jZmcub3V0cHV0TGVuZ3RoKS8zMjt9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZT10aGlzLl9zdGF0ZSxmPXRoaXMuYmxvY2tTaXplLzIsaD0wO2g8ZjtoKyspe3ZhciBsPWFbYisyKmhdLG09YVtiKzIqaCsxXSxsPShsPDw4fGw+Pj4yNCkmMTY3MTE5MzV8KGw8PDI0fGw+Pj44KSY0Mjc4MjU1MzYwLG09KG08PDh8bT4+PjI0KSYxNjcxMTkzNXwobTw8MjR8bT4+PjgpJjQyNzgyNTUzNjAsZz1lW2hdO2cuaGlnaF49bTtnLmxvd149bDt9Zm9yKGY9MDsyND5mO2YrKyl7Zm9yKGg9MDs1Pmg7aCsrKXtmb3IodmFyIGQ9bD0wLGs9MDs1Pms7aysrKWc9ZVtoKzUqa10sbF49Zy5oaWdoLGRePWcubG93O2c9Y1toXTtnLmhpZ2g9bDtnLmxvdz1kO31mb3IoaD0wOzU+aDtoKyspe2c9Y1soaCs0KSU1XTtsPWNbKGgrMSklNV07bT1sLmhpZ2g7az1sLmxvdztsPWcuaGlnaF4obTw8MXxrPj4+MzEpO2Q9Zy5sb3deKGs8PDF8bT4+PjMxKTtmb3Ioaz0wOzU+aztrKyspZz1lW2grNSprXSxnLmhpZ2hePWwsZy5sb3dePWQ7fWZvcihtPTE7MjU+bTttKyspZz1lW21dLGg9Zy5oaWdoLGc9Zy5sb3csaz1zW21dLDMyPms/KGw9aDw8a3xnPj4+MzItayxkPWc8PGt8aD4+PjMyLWspOihsPWc8PGstMzJ8aD4+PjY0LWssZD1oPDxrLTMyfGc+Pj42NC1rKSxnPWNbeFttXV0sZy5oaWdoPWwsZy5sb3c9ZDtnPWNbMF07aD1lWzBdO2cuaGlnaD1oLmhpZ2g7Zy5sb3c9aC5sb3c7Zm9yKGg9MDs1Pmg7aCsrKWZvcihrPTA7NT5rO2srKyltPWgrNSprLGc9ZVttXSxsPWNbbV0sbT1jWyhoKzEpJTUrNSprXSxkPWNbKGgrMiklNSs1KmtdLGcuaGlnaD1sLmhpZ2hefm0uaGlnaCZkLmhpZ2gsZy5sb3c9bC5sb3defm0ubG93JmQubG93O2c9ZVswXTtoPXlbZl07Zy5oaWdoXj1oLmhpZ2g7Zy5sb3dePWgubG93O319LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxiPWEud29yZHMsYz04KmEuc2lnQnl0ZXMsZT0zMip0aGlzLmJsb2NrU2l6ZTtiW2M+Pj41XXw9MTw8MjQtYyUzMjtiWyh2LmNlaWwoKGMrMSkvZSkqZT4+PjUpLTFdfD0xMjg7YS5zaWdCeXRlcz00KmIubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtmb3IodmFyIGE9dGhpcy5fc3RhdGUsYj10aGlzLmNmZy5vdXRwdXRMZW5ndGgvOCxjPWIvOCxlPVtdLGg9MDtoPGM7aCsrKXt2YXIgZD1hW2hdLGY9ZC5oaWdoLGQ9ZC5sb3csZj0oZjw8OHxmPj4+MjQpJjE2NzExOTM1fChmPDwyNHxmPj4+OCkmNDI3ODI1NTM2MCxkPShkPDw4fGQ+Pj4yNCkmMTY3MTE5MzV8KGQ8PDI0fGQ+Pj44KSY0Mjc4MjU1MzYwO2UucHVzaChkKTtlLnB1c2goZik7fXJldHVybiBuZXcgdS5pbml0KGUsYik7fSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1yLmNsb25lLmNhbGwodGhpcyksYj1hLl9zdGF0ZT10aGlzLl9zdGF0ZS5zbGljZSgwKSxjPTA7MjU+YztjKyspYltjXT1iW2NdLmNsb25lKCk7cmV0dXJuIGE7fX0pO3AuU0hBMz1yLl9jcmVhdGVIZWxwZXIoZCk7cC5IbWFjU0hBMz1yLl9jcmVhdGVIbWFjSGVscGVyKGQpO30pKE1hdGgpOw==',
'/libs/crypto_js/rollups/sha224.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihnLGwpe3ZhciBmPXt9LGs9Zi5saWI9e30saD1mdW5jdGlvbigpe30sbT1rLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtoLnByb3RvdHlwZT10aGlzO3ZhciBjPW5ldyBoKCk7YSYmYy5taXhJbihhKTtjLmhhc093blByb3BlcnR5KCJpbml0Iil8fChjLmluaXQ9ZnVuY3Rpb24oKXtjLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtjLmluaXQucHJvdG90eXBlPWM7Yy4kc3VwZXI9dGhpcztyZXR1cm4gYzt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJih0aGlzW2NdPWFbY10pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scT1rLldvcmRBcnJheT1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGMpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWMhPWw/Yzo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHMpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLndvcmRzLGQ9YS53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihiJTQpZm9yKHZhciBlPTA7ZTxhO2UrKyljW2IrZT4+PjJdfD0oZFtlPj4+Ml0+Pj4yNC04KihlJTQpJjI1NSk8PDI0LTgqKChiK2UpJTQpO2Vsc2UgaWYoNjU1MzU8ZC5sZW5ndGgpZm9yKGU9MDtlPGE7ZSs9NCljW2IrZT4+PjJdPWRbZT4+PjJdO2Vsc2UgYy5wdXNoLmFwcGx5KGMsZCk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YVtjPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGMlNCk7YS5sZW5ndGg9Zy5jZWlsKGMvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW0uY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVtdLGQ9MDtkPGE7ZCs9NCljLnB1c2goNDI5NDk2NzI5NipnLnJhbmRvbSgpfDApO3JldHVybiBuZXcgcS5pbml0KGMsYSk7fX0pLHQ9Zi5lbmM9e30scz10LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxiPTA7YjxhO2IrKyl7dmFyIGU9Y1tiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NTtkLnB1c2goKGU+Pj40KS50b1N0cmluZygxNikpO2QucHVzaCgoZSYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGQuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGM9YS5sZW5ndGgsZD1bXSxiPTA7YjxjO2IrPTIpZFtiPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGIsMiksMTYpPDwyNC00KihiJTgpO3JldHVybiBuZXcgcS5pbml0KGQsYy8yKTt9fSxuPXQuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGM9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBkPVtdLGI9MDtiPGE7YisrKWQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGNbYj4+PjJdPj4+MjQtOCooYiU0KSYyNTUpKTtyZXR1cm4gZC5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1hLmxlbmd0aCxkPVtdLGI9MDtiPGM7YisrKWRbYj4+PjJdfD0oYS5jaGFyQ29kZUF0KGIpJjI1NSk8PDI0LTgqKGIlNCk7cmV0dXJuIG5ldyBxLmluaXQoZCxjKTt9fSxqPXQuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShuLnN0cmluZ2lmeShhKSkpO31jYXRjaChjKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gbi5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpKTt9fSx3PWsuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1tLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBxLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9ai5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuX2RhdGEsZD1jLndvcmRzLGI9Yy5zaWdCeXRlcyxlPXRoaXMuYmxvY2tTaXplLGY9Yi8oNCplKSxmPWE/Zy5jZWlsKGYpOmcubWF4KChmfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1mKmU7Yj1nLm1pbig0KmEsYik7aWYoYSl7Zm9yKHZhciB1PTA7dTxhO3UrPWUpdGhpcy5fZG9Qcm9jZXNzQmxvY2soZCx1KTt1PWQuc3BsaWNlKDAsYSk7Yy5zaWdCeXRlcy09Yjt9cmV0dXJuIG5ldyBxLmluaXQodSxiKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bS5jbG9uZS5jYWxsKHRoaXMpO2EuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBhO30sX21pbkJ1ZmZlclNpemU6MH0pO2suSGFzaGVyPXcuZXh0ZW5kKHtjZmc6bS5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe3cucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5fYXBwZW5kKGEpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7cmV0dXJuIG5ldyBhLmluaXQoZCkuZmluYWxpemUoYyk7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjLGQpe3JldHVybiBuZXcgdi5ITUFDLmluaXQoYSxkKS5maW5hbGl6ZShjKTt9O319KTt2YXIgdj1mLmFsZ289e307cmV0dXJuIGY7fShNYXRoKTsoZnVuY3Rpb24oZyl7Zm9yKHZhciBsPUNyeXB0b0pTLGY9bC5saWIsaz1mLldvcmRBcnJheSxoPWYuSGFzaGVyLGY9bC5hbGdvLG09W10scT1bXSx0PWZ1bmN0aW9uKGEpe3JldHVybiA0Mjk0OTY3Mjk2KihhLShhfDApKXwwO30scz0yLG49MDs2ND5uOyl7dmFyIGo7YTp7aj1zO2Zvcih2YXIgdz1nLnNxcnQoaiksdj0yO3Y8PXc7disrKWlmKCEoaiV2KSl7aj0hMTticmVhayBhO31qPSEwO31qJiYoOD5uJiYobVtuXT10KGcucG93KHMsMC41KSkpLHFbbl09dChnLnBvdyhzLDEvMykpLG4rKyk7cysrO312YXIgYT1bXSxmPWYuU0hBMjU2PWguZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGsuaW5pdChtLnNsaWNlKDApKTt9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj10aGlzLl9oYXNoLndvcmRzLGU9YlswXSxmPWJbMV0sZz1iWzJdLGs9YlszXSxoPWJbNF0sbD1iWzVdLG09Yls2XSxuPWJbN10scD0wOzY0PnA7cCsrKXtpZigxNj5wKWFbcF09Y1tkK3BdfDA7ZWxzZXt2YXIgaj1hW3AtMTVdLHI9YVtwLTJdO2FbcF09KChqPDwyNXxqPj4+NyleKGo8PDE0fGo+Pj4xOCleaj4+PjMpK2FbcC03XSsoKHI8PDE1fHI+Pj4xNyleKHI8PDEzfHI+Pj4xOSlecj4+PjEwKSthW3AtMTZdO31qPW4rKChoPDwyNnxoPj4+NileKGg8PDIxfGg+Pj4xMSleKGg8PDd8aD4+PjI1KSkrKGgmbF5+aCZtKStxW3BdK2FbcF07cj0oKGU8PDMwfGU+Pj4yKV4oZTw8MTl8ZT4+PjEzKV4oZTw8MTB8ZT4+PjIyKSkrKGUmZl5lJmdeZiZnKTtuPW07bT1sO2w9aDtoPWsranwwO2s9ZztnPWY7Zj1lO2U9aityfDA7fWJbMF09YlswXStlfDA7YlsxXT1iWzFdK2Z8MDtiWzJdPWJbMl0rZ3wwO2JbM109YlszXStrfDA7Yls0XT1iWzRdK2h8MDtiWzVdPWJbNV0rbHwwO2JbNl09Yls2XSttfDA7Yls3XT1iWzddK258MDt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxkPWEud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsZT04KmEuc2lnQnl0ZXM7ZFtlPj4+NV18PTEyODw8MjQtZSUzMjtkWyhlKzY0Pj4+OTw8NCkrMTRdPWcuZmxvb3IoYi80Mjk0OTY3Mjk2KTtkWyhlKzY0Pj4+OTw8NCkrMTVdPWI7YS5zaWdCeXRlcz00KmQubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaDt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9aC5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhO319KTtsLlNIQTI1Nj1oLl9jcmVhdGVIZWxwZXIoZik7bC5IbWFjU0hBMjU2PWguX2NyZWF0ZUhtYWNIZWxwZXIoZik7fSkoTWF0aCk7KGZ1bmN0aW9uKCl7dmFyIGc9Q3J5cHRvSlMsbD1nLmxpYi5Xb3JkQXJyYXksZj1nLmFsZ28saz1mLlNIQTI1NixmPWYuU0hBMjI0PWsuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGwuaW5pdChbMzIzODM3MTAzMiw5MTQxNTA2NjMsODEyNzAyOTk5LDQxNDQ5MTI2OTcsNDI5MDc3NTg1NywxNzUwNjAzMDI1LDE2OTQwNzY4MzksMzIwNDA3NTQyOF0pO30sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZj1rLl9kb0ZpbmFsaXplLmNhbGwodGhpcyk7Zi5zaWdCeXRlcy09NDtyZXR1cm4gZjt9fSk7Zy5TSEEyMjQ9ay5fY3JlYXRlSGVscGVyKGYpO2cuSG1hY1NIQTIyND1rLl9jcmVhdGVIbWFjSGVscGVyKGYpO30pKCk7',
'/libs/crypto_js/rollups/sha512.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihhLG0pe3ZhciByPXt9LGY9ci5saWI9e30sZz1mdW5jdGlvbigpe30sbD1mLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtnLnByb3RvdHlwZT10aGlzO3ZhciBiPW5ldyBnKCk7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtiLmluaXQucHJvdG90eXBlPWI7Yi4kc3VwZXI9dGhpcztyZXR1cm4gYjt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scD1mLldvcmRBcnJheT1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWIhPW0/Yjo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHEpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGQ9YS53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihjJTQpZm9yKHZhciBqPTA7ajxhO2orKyliW2Mraj4+PjJdfD0oZFtqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NSk8PDI0LTgqKChjK2opJTQpO2Vsc2UgaWYoNjU1MzU8ZC5sZW5ndGgpZm9yKGo9MDtqPGE7ais9NCliW2Mraj4+PjJdPWRbaj4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsZCk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7bltiPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGIlNCk7bi5sZW5ndGg9YS5jZWlsKGIvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWwuY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24obil7Zm9yKHZhciBiPVtdLGQ9MDtkPG47ZCs9NCliLnB1c2goNDI5NDk2NzI5NiphLnJhbmRvbSgpfDApO3JldHVybiBuZXcgcC5pbml0KGIsbik7fX0pLHk9ci5lbmM9e30scT15LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxjPTA7YzxhO2MrKyl7dmFyIGo9YltjPj4+Ml0+Pj4yNC04KihjJTQpJjI1NTtkLnB1c2goKGo+Pj40KS50b1N0cmluZygxNikpO2QucHVzaCgoaiYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGQuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsZD1bXSxjPTA7YzxiO2MrPTIpZFtjPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGMsMiksMTYpPDwyNC00KihjJTgpO3JldHVybiBuZXcgcC5pbml0KGQsYi8yKTt9fSxHPXkuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBkPVtdLGM9MDtjPGE7YysrKWQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJbYz4+PjJdPj4+MjQtOCooYyU0KSYyNTUpKTtyZXR1cm4gZC5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxkPVtdLGM9MDtjPGI7YysrKWRbYz4+PjJdfD0oYS5jaGFyQ29kZUF0KGMpJjI1NSk8PDI0LTgqKGMlNCk7cmV0dXJuIG5ldyBwLmluaXQoZCxiKTt9fSxmYT15LlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoRy5zdHJpbmdpZnkoYSkpKTt9Y2F0Y2goYil7dGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIik7fX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIEcucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKSk7fX0saD1mLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09bC5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgcC5pbml0KCk7dGhpcy5fbkRhdGFCeXRlcz0wO30sX2FwcGVuZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPWZhLnBhcnNlKGEpKTt0aGlzLl9kYXRhLmNvbmNhdChhKTt0aGlzLl9uRGF0YUJ5dGVzKz1hLnNpZ0J5dGVzO30sX3Byb2Nlc3M6ZnVuY3Rpb24obil7dmFyIGI9dGhpcy5fZGF0YSxkPWIud29yZHMsYz1iLnNpZ0J5dGVzLGo9dGhpcy5ibG9ja1NpemUsbD1jLyg0KmopLGw9bj9hLmNlaWwobCk6YS5tYXgoKGx8MCktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKTtuPWwqajtjPWEubWluKDQqbixjKTtpZihuKXtmb3IodmFyIGg9MDtoPG47aCs9ail0aGlzLl9kb1Byb2Nlc3NCbG9jayhkLGgpO2g9ZC5zcGxpY2UoMCxuKTtiLnNpZ0J5dGVzLT1jO31yZXR1cm4gbmV3IHAuaW5pdChoLGMpO30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1sLmNsb25lLmNhbGwodGhpcyk7YS5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCk7cmV0dXJuIGE7fSxfbWluQnVmZmVyU2l6ZTowfSk7Zi5IYXNoZXI9aC5leHRlbmQoe2NmZzpsLmV4dGVuZCgpLGluaXQ6ZnVuY3Rpb24oYSl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGEpO3RoaXMucmVzZXQoKTt9LHJlc2V0OmZ1bmN0aW9uKCl7aC5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKTt9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzO30sZmluYWxpemU6ZnVuY3Rpb24oYSl7YSYmdGhpcy5fYXBwZW5kKGEpO3JldHVybiB0aGlzLl9kb0ZpbmFsaXplKCk7fSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixkKXtyZXR1cm4gbmV3IGEuaW5pdChkKS5maW5hbGl6ZShiKTt9O30sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsZCl7cmV0dXJuIG5ldyBnYS5ITUFDLmluaXQoYSxkKS5maW5hbGl6ZShiKTt9O319KTt2YXIgZ2E9ci5hbGdvPXt9O3JldHVybiByO30oTWF0aCk7KGZ1bmN0aW9uKGEpe3ZhciBtPUNyeXB0b0pTLHI9bS5saWIsZj1yLkJhc2UsZz1yLldvcmRBcnJheSxtPW0ueDY0PXt9O20uV29yZD1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLHApe3RoaXMuaGlnaD1hO3RoaXMubG93PXA7fX0pO20uV29yZEFycmF5PWYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGwscCl7bD10aGlzLndvcmRzPWx8fFtdO3RoaXMuc2lnQnl0ZXM9cCE9YT9wOjgqbC5sZW5ndGg7fSx0b1gzMjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLndvcmRzLHA9YS5sZW5ndGgsZj1bXSxxPTA7cTxwO3ErKyl7dmFyIEc9YVtxXTtmLnB1c2goRy5oaWdoKTtmLnB1c2goRy5sb3cpO31yZXR1cm4gZy5jcmVhdGUoZix0aGlzLnNpZ0J5dGVzKTt9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKSxwPWEud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxnPXAubGVuZ3RoLHE9MDtxPGc7cSsrKXBbcV09cFtxXS5jbG9uZSgpO3JldHVybiBhO319KTt9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gZy5jcmVhdGUuYXBwbHkoZyxhcmd1bWVudHMpO31mb3IodmFyIG09Q3J5cHRvSlMscj1tLmxpYi5IYXNoZXIsZj1tLng2NCxnPWYuV29yZCxsPWYuV29yZEFycmF5LGY9bS5hbGdvLHA9W2EoMTExNjM1MjQwOCwzNjA5NzY3NDU4KSxhKDE4OTk0NDc0NDEsNjAyODkxNzI1KSxhKDMwNDkzMjM0NzEsMzk2NDQ4NDM5OSksYSgzOTIxMDA5NTczLDIxNzMyOTU1NDgpLGEoOTYxOTg3MTYzLDQwODE2Mjg0NzIpLGEoMTUwODk3MDk5MywzMDUzODM0MjY1KSxhKDI0NTM2MzU3NDgsMjkzNzY3MTU3OSksYSgyODcwNzYzMjIxLDM2NjQ2MDk1NjApLGEoMzYyNDM4MTA4MCwyNzM0ODgzMzk0KSxhKDMxMDU5ODQwMSwxMTY0OTk2NTQyKSxhKDYwNzIyNTI3OCwxMzIzNjEwNzY0KSxhKDE0MjY4ODE5ODcsMzU5MDMwNDk5NCksYSgxOTI1MDc4Mzg4LDQwNjgxODIzODMpLGEoMjE2MjA3ODIwNiw5OTEzMzYxMTMpLGEoMjYxNDg4ODEwMyw2MzM4MDMzMTcpLGEoMzI0ODIyMjU4MCwzNDc5Nzc0ODY4KSxhKDM4MzUzOTA0MDEsMjY2NjYxMzQ1OCksYSg0MDIyMjI0Nzc0LDk0NDcxMTEzOSksYSgyNjQzNDcwNzgsMjM0MTI2Mjc3MyksYSg2MDQ4MDc2MjgsMjAwNzgwMDkzMyksYSg3NzAyNTU5ODMsMTQ5NTk5MDkwMSksYSgxMjQ5MTUwMTIyLDE4NTY0MzEyMzUpLGEoMTU1NTA4MTY5MiwzMTc1MjE4MTMyKSxhKDE5OTYwNjQ5ODYsMjE5ODk1MDgzNyksYSgyNTU0MjIwODgyLDM5OTk3MTkzMzkpLGEoMjgyMTgzNDM0OSw3NjY3ODQwMTYpLGEoMjk1Mjk5NjgwOCwyNTY2NTk0ODc5KSxhKDMyMTAzMTM2NzEsMzIwMzMzNzk1NiksYSgzMzM2NTcxODkxLDEwMzQ0NTcwMjYpLGEoMzU4NDUyODcxMSwyNDY2OTQ4OTAxKSxhKDExMzkyNjk5MywzNzU4MzI2MzgzKSxhKDMzODI0MTg5NSwxNjg3MTc5MzYpLGEoNjY2MzA3MjA1LDExODgxNzk5NjQpLGEoNzczNTI5OTEyLDE1NDYwNDU3MzQpLGEoMTI5NDc1NzM3MiwxNTIyODA1NDg1KSxhKDEzOTYxODIyOTEsMjY0MzgzMzgyMyksYSgxNjk1MTgzNzAwLDIzNDM1MjczOTApLGEoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSxhKDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksYSgyNDU2OTU2MDM3LDM0NDA3NzYyNyksYSgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLGEoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSxhKDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksYSgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksYSgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLGEoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSxhKDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksYSgyNzU0MjMzNDQsODUxMTY5NzIwKSxhKDQzMDIyNzczNCwzMTAwODIzNzUyKSxhKDUwNjk0ODYxNiwxMzYzMjU4MTk1KSxhKDY1OTA2MDU1NiwzNzUwNjg1NTkzKSxhKDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSxhKDk1ODEzOTU3MSwzMzE4MzA3NDI3KSxhKDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksYSgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLGEoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSxhKDE5NTU1NjIyMjIsMTU3NTk5MDAxMiksYSgyMDI0MTA0ODE1LDExMjU1OTI5MjgpLGEoMjIyNzczMDQ1MiwyNzE2OTA0MzA2KSxhKDIzNjE4NTI0MjQsNDQyNzc2MDQ0KSxhKDI0Mjg0MzY0NzQsNTkzNjk4MzQ0KSxhKDI3NTY3MzQxODcsMzczMzExMDI0OSksYSgzMjA0MDMxNDc5LDI5OTkzNTE1NzMpLGEoMzMyOTMyNTI5OCwzODE1OTIwNDI3KSxhKDMzOTE1Njk2MTQsMzkyODM4MzkwMCksYSgzNTE1MjY3MjcxLDU2NjI4MDcxMSksYSgzOTQwMTg3NjA2LDM0NTQwNjk1MzQpLGEoNDExODYzMDI3MSw0MDAwMjM5OTkyKSxhKDExNjQxODQ3NCwxOTE0MTM4NTU0KSxhKDE3NDI5MjQyMSwyNzMxMDU1MjcwKSxhKDI4OTM4MDM1NiwzMjAzOTkzMDA2KSxhKDQ2MDM5MzI2OSwzMjA2MjAzMTUpLGEoNjg1NDcxNzMzLDU4NzQ5NjgzNiksYSg4NTIxNDI5NzEsMTA4Njc5Mjg1MSksYSgxMDE3MDM2Mjk4LDM2NTU0MzEwMCksYSgxMTI2MDAwNTgwLDI2MTgyOTc2NzYpLGEoMTI4ODAzMzQ3MCwzNDA5ODU1MTU4KSxhKDE1MDE1MDU5NDgsNDIzNDUwOTg2NiksYSgxNjA3MTY3OTE1LDk4NzE2NzQ2OCksYSgxODE2NDAyMzE2LDEyNDYxODk1OTEpXSx5PVtdLHE9MDs4MD5xO3ErKyl5W3FdPWEoKTtmPWYuU0hBNTEyPXIuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGwuaW5pdChbbmV3IGcuaW5pdCgxNzc5MDMzNzAzLDQwODkyMzU3MjApLG5ldyBnLmluaXQoMzE0NDEzNDI3NywyMjI3ODczNTk1KSxuZXcgZy5pbml0KDEwMTM5MDQyNDIsNDI3MTE3NTcyMyksbmV3IGcuaW5pdCgyNzczNDgwNzYyLDE1OTU3NTAxMjkpLG5ldyBnLmluaXQoMTM1OTg5MzExOSwyOTE3NTY1MTM3KSxuZXcgZy5pbml0KDI2MDA4MjI5MjQsNzI1NTExMTk5KSxuZXcgZy5pbml0KDUyODczNDYzNSw0MjE1Mzg5NTQ3KSxuZXcgZy5pbml0KDE1NDE0NTkyMjUsMzI3MDMzMjA5KV0pO30sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsZil7Zm9yKHZhciBoPXRoaXMuX2hhc2gud29yZHMsZz1oWzBdLG49aFsxXSxiPWhbMl0sZD1oWzNdLGM9aFs0XSxqPWhbNV0sbD1oWzZdLGg9aFs3XSxxPWcuaGlnaCxtPWcubG93LHI9bi5oaWdoLE49bi5sb3csWj1iLmhpZ2gsTz1iLmxvdywkPWQuaGlnaCxQPWQubG93LGFhPWMuaGlnaCxRPWMubG93LGJhPWouaGlnaCxSPWoubG93LGNhPWwuaGlnaCxTPWwubG93LGRhPWguaGlnaCxUPWgubG93LHY9cSxzPW0sSD1yLEU9TixJPVosRj1PLFc9JCxKPVAsdz1hYSx0PVEsVT1iYSxLPVIsVj1jYSxMPVMsWD1kYSxNPVQseD0wOzgwPng7eCsrKXt2YXIgQj15W3hdO2lmKDE2PngpdmFyIHU9Qi5oaWdoPWFbZisyKnhdfDAsZT1CLmxvdz1hW2YrMip4KzFdfDA7ZWxzZXt2YXIgdT15W3gtMTVdLGU9dS5oaWdoLHo9dS5sb3csdT0oZT4+PjF8ejw8MzEpXihlPj4+OHx6PDwyNCleZT4+Pjcsej0oej4+PjF8ZTw8MzEpXih6Pj4+OHxlPDwyNCleKHo+Pj43fGU8PDI1KSxEPXlbeC0yXSxlPUQuaGlnaCxrPUQubG93LEQ9KGU+Pj4xOXxrPDwxMyleKGU8PDN8az4+PjI5KV5lPj4+NixrPShrPj4+MTl8ZTw8MTMpXihrPDwzfGU+Pj4yOSleKGs+Pj42fGU8PDI2KSxlPXlbeC03XSxZPWUuaGlnaCxDPXlbeC0xNl0sQT1DLmhpZ2gsQz1DLmxvdyxlPXorZS5sb3csdT11K1krKGU+Pj4wPHo+Pj4wPzE6MCksZT1lK2ssdT11K0QrKGU+Pj4wPGs+Pj4wPzE6MCksZT1lK0MsdT11K0ErKGU+Pj4wPEM+Pj4wPzE6MCk7Qi5oaWdoPXU7Qi5sb3c9ZTt9dmFyIFk9dyZVXn53JlYsQz10JktefnQmTCxCPXYmSF52JkleSCZJLGhhPXMmRV5zJkZeRSZGLHo9KHY+Pj4yOHxzPDw0KV4odjw8MzB8cz4+PjIpXih2PDwyNXxzPj4+NyksRD0ocz4+PjI4fHY8PDQpXihzPDwzMHx2Pj4+MileKHM8PDI1fHY+Pj43KSxrPXBbeF0saWE9ay5oaWdoLGVhPWsubG93LGs9TSsoKHQ+Pj4xNHx3PDwxOCleKHQ+Pj4xOHx3PDwxNCleKHQ8PDIzfHc+Pj45KSksQT1YKygodz4+PjE0fHQ8PDE4KV4odz4+PjE4fHQ8PDE0KV4odzw8MjN8dD4+PjkpKSsoaz4+PjA8TT4+PjA/MTowKSxrPWsrQyxBPUErWSsoaz4+PjA8Qz4+PjA/MTowKSxrPWsrZWEsQT1BK2lhKyhrPj4+MDxlYT4+PjA/MTowKSxrPWsrZSxBPUErdSsoaz4+PjA8ZT4+PjA/MTowKSxlPUQraGEsQj16K0IrKGU+Pj4wPEQ+Pj4wPzE6MCksWD1WLE09TCxWPVUsTD1LLFU9dyxLPXQsdD1KK2t8MCx3PVcrQSsodD4+PjA8Sj4+PjA/MTowKXwwLFc9SSxKPUYsST1ILEY9RSxIPXYsRT1zLHM9aytlfDAsdj1BK0IrKHM+Pj4wPGs+Pj4wPzE6MCl8MDt9bT1nLmxvdz1tK3M7Zy5oaWdoPXErdisobT4+PjA8cz4+PjA/MTowKTtOPW4ubG93PU4rRTtuLmhpZ2g9citIKyhOPj4+MDxFPj4+MD8xOjApO089Yi5sb3c9TytGO2IuaGlnaD1aK0krKE8+Pj4wPEY+Pj4wPzE6MCk7UD1kLmxvdz1QK0o7ZC5oaWdoPSQrVysoUD4+PjA8Sj4+PjA/MTowKTtRPWMubG93PVErdDtjLmhpZ2g9YWErdysoUT4+PjA8dD4+PjA/MTowKTtSPWoubG93PVIrSztqLmhpZ2g9YmErVSsoUj4+PjA8Sz4+PjA/MTowKTtTPWwubG93PVMrTDtsLmhpZ2g9Y2ErVisoUz4+PjA8TD4+PjA/MTowKTtUPWgubG93PVQrTTtoLmhpZ2g9ZGErWCsoVD4+PjA8TT4+PjA/MTowKTt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxmPWEud29yZHMsaD04KnRoaXMuX25EYXRhQnl0ZXMsZz04KmEuc2lnQnl0ZXM7ZltnPj4+NV18PTEyODw8MjQtZyUzMjtmWyhnKzEyOD4+PjEwPDw1KSszMF09TWF0aC5mbG9vcihoLzQyOTQ5NjcyOTYpO2ZbKGcrMTI4Pj4+MTA8PDUpKzMxXT1oO2Euc2lnQnl0ZXM9NCpmLmxlbmd0aDt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXMuX2hhc2gudG9YMzIoKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9ci5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhO30sYmxvY2tTaXplOjMyfSk7bS5TSEE1MTI9ci5fY3JlYXRlSGVscGVyKGYpO20uSG1hY1NIQTUxMj1yLl9jcmVhdGVIbWFjSGVscGVyKGYpO30pKCk7',
'/libs/crypto_js/rollups/sha384.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihhLGMpe3ZhciBkPXt9LGo9ZC5saWI9e30sZj1mdW5jdGlvbigpe30sbT1qLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtmLnByb3RvdHlwZT10aGlzO3ZhciBiPW5ldyBmKCk7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtiLmluaXQucHJvdG90eXBlPWI7Yi4kc3VwZXI9dGhpcztyZXR1cm4gYjt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0sQj1qLldvcmRBcnJheT1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWIhPWM/Yjo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHkpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGc9YS53b3JkcyxlPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihlJTQpZm9yKHZhciBrPTA7azxhO2srKyliW2Uraz4+PjJdfD0oZ1trPj4+Ml0+Pj4yNC04KihrJTQpJjI1NSk8PDI0LTgqKChlK2spJTQpO2Vsc2UgaWYoNjU1MzU8Zy5sZW5ndGgpZm9yKGs9MDtrPGE7ays9NCliW2Uraz4+PjJdPWdbaz4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsZyk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7bltiPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGIlNCk7bi5sZW5ndGg9YS5jZWlsKGIvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW0uY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24obil7Zm9yKHZhciBiPVtdLGc9MDtnPG47Zys9NCliLnB1c2goNDI5NDk2NzI5NiphLnJhbmRvbSgpfDApO3JldHVybiBuZXcgQi5pbml0KGIsbik7fX0pLHY9ZC5lbmM9e30seT12LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZz1bXSxlPTA7ZTxhO2UrKyl7dmFyIGs9YltlPj4+Ml0+Pj4yNC04KihlJTQpJjI1NTtnLnB1c2goKGs+Pj40KS50b1N0cmluZygxNikpO2cucHVzaCgoayYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGcuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsZz1bXSxlPTA7ZTxiO2UrPTIpZ1tlPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGUsMiksMTYpPDwyNC00KihlJTgpO3JldHVybiBuZXcgQi5pbml0KGcsYi8yKTt9fSxGPXYuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBnPVtdLGU9MDtlPGE7ZSsrKWcucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJbZT4+PjJdPj4+MjQtOCooZSU0KSYyNTUpKTtyZXR1cm4gZy5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxnPVtdLGU9MDtlPGI7ZSsrKWdbZT4+PjJdfD0oYS5jaGFyQ29kZUF0KGUpJjI1NSk8PDI0LTgqKGUlNCk7cmV0dXJuIG5ldyBCLmluaXQoZyxiKTt9fSxoYT12LlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoRi5zdHJpbmdpZnkoYSkpKTt9Y2F0Y2goYil7dGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIik7fX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIEYucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKSk7fX0sWj1qLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09bS5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgQi5pbml0KCk7dGhpcy5fbkRhdGFCeXRlcz0wO30sX2FwcGVuZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPWhhLnBhcnNlKGEpKTt0aGlzLl9kYXRhLmNvbmNhdChhKTt0aGlzLl9uRGF0YUJ5dGVzKz1hLnNpZ0J5dGVzO30sX3Byb2Nlc3M6ZnVuY3Rpb24obil7dmFyIGI9dGhpcy5fZGF0YSxnPWIud29yZHMsZT1iLnNpZ0J5dGVzLGs9dGhpcy5ibG9ja1NpemUsbT1lLyg0KmspLG09bj9hLmNlaWwobSk6YS5tYXgoKG18MCktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKTtuPW0qaztlPWEubWluKDQqbixlKTtpZihuKXtmb3IodmFyIGM9MDtjPG47Yys9ayl0aGlzLl9kb1Byb2Nlc3NCbG9jayhnLGMpO2M9Zy5zcGxpY2UoMCxuKTtiLnNpZ0J5dGVzLT1lO31yZXR1cm4gbmV3IEIuaW5pdChjLGUpO30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1tLmNsb25lLmNhbGwodGhpcyk7YS5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCk7cmV0dXJuIGE7fSxfbWluQnVmZmVyU2l6ZTowfSk7ai5IYXNoZXI9Wi5leHRlbmQoe2NmZzptLmV4dGVuZCgpLGluaXQ6ZnVuY3Rpb24oYSl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGEpO3RoaXMucmVzZXQoKTt9LHJlc2V0OmZ1bmN0aW9uKCl7Wi5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKTt9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzO30sZmluYWxpemU6ZnVuY3Rpb24oYSl7YSYmdGhpcy5fYXBwZW5kKGEpO3JldHVybiB0aGlzLl9kb0ZpbmFsaXplKCk7fSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixnKXtyZXR1cm4gbmV3IGEuaW5pdChnKS5maW5hbGl6ZShiKTt9O30sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsZyl7cmV0dXJuIG5ldyBpYS5ITUFDLmluaXQoYSxnKS5maW5hbGl6ZShiKTt9O319KTt2YXIgaWE9ZC5hbGdvPXt9O3JldHVybiBkO30oTWF0aCk7KGZ1bmN0aW9uKGEpe3ZhciBjPUNyeXB0b0pTLGQ9Yy5saWIsaj1kLkJhc2UsZj1kLldvcmRBcnJheSxjPWMueDY0PXt9O2MuV29yZD1qLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGMpe3RoaXMuaGlnaD1hO3RoaXMubG93PWM7fX0pO2MuV29yZEFycmF5PWouZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGMsZCl7Yz10aGlzLndvcmRzPWN8fFtdO3RoaXMuc2lnQnl0ZXM9ZCE9YT9kOjgqYy5sZW5ndGg7fSx0b1gzMjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLndvcmRzLGM9YS5sZW5ndGgsZD1bXSxqPTA7ajxjO2orKyl7dmFyIEY9YVtqXTtkLnB1c2goRi5oaWdoKTtkLnB1c2goRi5sb3cpO31yZXR1cm4gZi5jcmVhdGUoZCx0aGlzLnNpZ0J5dGVzKTt9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWouY2xvbmUuY2FsbCh0aGlzKSxjPWEud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxkPWMubGVuZ3RoLGY9MDtmPGQ7ZisrKWNbZl09Y1tmXS5jbG9uZSgpO3JldHVybiBhO319KTt9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gZi5jcmVhdGUuYXBwbHkoZixhcmd1bWVudHMpO31mb3IodmFyIGM9Q3J5cHRvSlMsZD1jLmxpYi5IYXNoZXIsaj1jLng2NCxmPWouV29yZCxtPWouV29yZEFycmF5LGo9Yy5hbGdvLEI9W2EoMTExNjM1MjQwOCwzNjA5NzY3NDU4KSxhKDE4OTk0NDc0NDEsNjAyODkxNzI1KSxhKDMwNDkzMjM0NzEsMzk2NDQ4NDM5OSksYSgzOTIxMDA5NTczLDIxNzMyOTU1NDgpLGEoOTYxOTg3MTYzLDQwODE2Mjg0NzIpLGEoMTUwODk3MDk5MywzMDUzODM0MjY1KSxhKDI0NTM2MzU3NDgsMjkzNzY3MTU3OSksYSgyODcwNzYzMjIxLDM2NjQ2MDk1NjApLGEoMzYyNDM4MTA4MCwyNzM0ODgzMzk0KSxhKDMxMDU5ODQwMSwxMTY0OTk2NTQyKSxhKDYwNzIyNTI3OCwxMzIzNjEwNzY0KSxhKDE0MjY4ODE5ODcsMzU5MDMwNDk5NCksYSgxOTI1MDc4Mzg4LDQwNjgxODIzODMpLGEoMjE2MjA3ODIwNiw5OTEzMzYxMTMpLGEoMjYxNDg4ODEwMyw2MzM4MDMzMTcpLGEoMzI0ODIyMjU4MCwzNDc5Nzc0ODY4KSxhKDM4MzUzOTA0MDEsMjY2NjYxMzQ1OCksYSg0MDIyMjI0Nzc0LDk0NDcxMTEzOSksYSgyNjQzNDcwNzgsMjM0MTI2Mjc3MyksYSg2MDQ4MDc2MjgsMjAwNzgwMDkzMyksYSg3NzAyNTU5ODMsMTQ5NTk5MDkwMSksYSgxMjQ5MTUwMTIyLDE4NTY0MzEyMzUpLGEoMTU1NTA4MTY5MiwzMTc1MjE4MTMyKSxhKDE5OTYwNjQ5ODYsMjE5ODk1MDgzNyksYSgyNTU0MjIwODgyLDM5OTk3MTkzMzkpLGEoMjgyMTgzNDM0OSw3NjY3ODQwMTYpLGEoMjk1Mjk5NjgwOCwyNTY2NTk0ODc5KSxhKDMyMTAzMTM2NzEsMzIwMzMzNzk1NiksYSgzMzM2NTcxODkxLDEwMzQ0NTcwMjYpLGEoMzU4NDUyODcxMSwyNDY2OTQ4OTAxKSxhKDExMzkyNjk5MywzNzU4MzI2MzgzKSxhKDMzODI0MTg5NSwxNjg3MTc5MzYpLGEoNjY2MzA3MjA1LDExODgxNzk5NjQpLGEoNzczNTI5OTEyLDE1NDYwNDU3MzQpLGEoMTI5NDc1NzM3MiwxNTIyODA1NDg1KSxhKDEzOTYxODIyOTEsMjY0MzgzMzgyMyksYSgxNjk1MTgzNzAwLDIzNDM1MjczOTApLGEoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSxhKDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksYSgyNDU2OTU2MDM3LDM0NDA3NzYyNyksYSgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLGEoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSxhKDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksYSgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksYSgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLGEoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSxhKDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksYSgyNzU0MjMzNDQsODUxMTY5NzIwKSxhKDQzMDIyNzczNCwzMTAwODIzNzUyKSxhKDUwNjk0ODYxNiwxMzYzMjU4MTk1KSxhKDY1OTA2MDU1NiwzNzUwNjg1NTkzKSxhKDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSxhKDk1ODEzOTU3MSwzMzE4MzA3NDI3KSxhKDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksYSgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLGEoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSxhKDE5NTU1NjIyMjIsMTU3NTk5MDAxMiksYSgyMDI0MTA0ODE1LDExMjU1OTI5MjgpLGEoMjIyNzczMDQ1MiwyNzE2OTA0MzA2KSxhKDIzNjE4NTI0MjQsNDQyNzc2MDQ0KSxhKDI0Mjg0MzY0NzQsNTkzNjk4MzQ0KSxhKDI3NTY3MzQxODcsMzczMzExMDI0OSksYSgzMjA0MDMxNDc5LDI5OTkzNTE1NzMpLGEoMzMyOTMyNTI5OCwzODE1OTIwNDI3KSxhKDMzOTE1Njk2MTQsMzkyODM4MzkwMCksYSgzNTE1MjY3MjcxLDU2NjI4MDcxMSksYSgzOTQwMTg3NjA2LDM0NTQwNjk1MzQpLGEoNDExODYzMDI3MSw0MDAwMjM5OTkyKSxhKDExNjQxODQ3NCwxOTE0MTM4NTU0KSxhKDE3NDI5MjQyMSwyNzMxMDU1MjcwKSxhKDI4OTM4MDM1NiwzMjAzOTkzMDA2KSxhKDQ2MDM5MzI2OSwzMjA2MjAzMTUpLGEoNjg1NDcxNzMzLDU4NzQ5NjgzNiksYSg4NTIxNDI5NzEsMTA4Njc5Mjg1MSksYSgxMDE3MDM2Mjk4LDM2NTU0MzEwMCksYSgxMTI2MDAwNTgwLDI2MTgyOTc2NzYpLGEoMTI4ODAzMzQ3MCwzNDA5ODU1MTU4KSxhKDE1MDE1MDU5NDgsNDIzNDUwOTg2NiksYSgxNjA3MTY3OTE1LDk4NzE2NzQ2OCksYSgxODE2NDAyMzE2LDEyNDYxODk1OTEpXSx2PVtdLHk9MDs4MD55O3krKyl2W3ldPWEoKTtqPWouU0hBNTEyPWQuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IG0uaW5pdChbbmV3IGYuaW5pdCgxNzc5MDMzNzAzLDQwODkyMzU3MjApLG5ldyBmLmluaXQoMzE0NDEzNDI3NywyMjI3ODczNTk1KSxuZXcgZi5pbml0KDEwMTM5MDQyNDIsNDI3MTE3NTcyMyksbmV3IGYuaW5pdCgyNzczNDgwNzYyLDE1OTU3NTAxMjkpLG5ldyBmLmluaXQoMTM1OTg5MzExOSwyOTE3NTY1MTM3KSxuZXcgZi5pbml0KDI2MDA4MjI5MjQsNzI1NTExMTk5KSxuZXcgZi5pbml0KDUyODczNDYzNSw0MjE1Mzg5NTQ3KSxuZXcgZi5pbml0KDE1NDE0NTkyMjUsMzI3MDMzMjA5KV0pO30sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkPXRoaXMuX2hhc2gud29yZHMsZj1kWzBdLGo9ZFsxXSxiPWRbMl0sZz1kWzNdLGU9ZFs0XSxrPWRbNV0sbT1kWzZdLGQ9ZFs3XSx5PWYuaGlnaCxNPWYubG93LCQ9ai5oaWdoLE49ai5sb3csYWE9Yi5oaWdoLE89Yi5sb3csYmE9Zy5oaWdoLFA9Zy5sb3csY2E9ZS5oaWdoLFE9ZS5sb3csZGE9ay5oaWdoLFI9ay5sb3csZWE9bS5oaWdoLFM9bS5sb3csZmE9ZC5oaWdoLFQ9ZC5sb3cscz15LHA9TSxHPSQsRD1OLEg9YWEsRT1PLFc9YmEsST1QLHQ9Y2EscT1RLFU9ZGEsSj1SLFY9ZWEsSz1TLFg9ZmEsTD1ULHU9MDs4MD51O3UrKyl7dmFyIHo9dlt1XTtpZigxNj51KXZhciByPXouaGlnaD1hW2MrMip1XXwwLGg9ei5sb3c9YVtjKzIqdSsxXXwwO2Vsc2V7dmFyIHI9dlt1LTE1XSxoPXIuaGlnaCx3PXIubG93LHI9KGg+Pj4xfHc8PDMxKV4oaD4+Pjh8dzw8MjQpXmg+Pj43LHc9KHc+Pj4xfGg8PDMxKV4odz4+Pjh8aDw8MjQpXih3Pj4+N3xoPDwyNSksQz12W3UtMl0saD1DLmhpZ2gsbD1DLmxvdyxDPShoPj4+MTl8bDw8MTMpXihoPDwzfGw+Pj4yOSleaD4+PjYsbD0obD4+PjE5fGg8PDEzKV4obDw8M3xoPj4+MjkpXihsPj4+NnxoPDwyNiksaD12W3UtN10sWT1oLmhpZ2gsQT12W3UtMTZdLHg9QS5oaWdoLEE9QS5sb3csaD13K2gubG93LHI9citZKyhoPj4+MDx3Pj4+MD8xOjApLGg9aCtsLHI9citDKyhoPj4+MDxsPj4+MD8xOjApLGg9aCtBLHI9cit4KyhoPj4+MDxBPj4+MD8xOjApO3ouaGlnaD1yO3oubG93PWg7fXZhciBZPXQmVV5+dCZWLEE9cSZKXn5xJkssej1zJkdecyZIXkcmSCxqYT1wJkRecCZFXkQmRSx3PShzPj4+Mjh8cDw8NCleKHM8PDMwfHA+Pj4yKV4oczw8MjV8cD4+PjcpLEM9KHA+Pj4yOHxzPDw0KV4ocDw8MzB8cz4+PjIpXihwPDwyNXxzPj4+NyksbD1CW3VdLGthPWwuaGlnaCxnYT1sLmxvdyxsPUwrKChxPj4+MTR8dDw8MTgpXihxPj4+MTh8dDw8MTQpXihxPDwyM3x0Pj4+OSkpLHg9WCsoKHQ+Pj4xNHxxPDwxOCleKHQ+Pj4xOHxxPDwxNCleKHQ8PDIzfHE+Pj45KSkrKGw+Pj4wPEw+Pj4wPzE6MCksbD1sK0EseD14K1krKGw+Pj4wPEE+Pj4wPzE6MCksbD1sK2dhLHg9eCtrYSsobD4+PjA8Z2E+Pj4wPzE6MCksbD1sK2gseD14K3IrKGw+Pj4wPGg+Pj4wPzE6MCksaD1DK2phLHo9dyt6KyhoPj4+MDxDPj4+MD8xOjApLFg9VixMPUssVj1VLEs9SixVPXQsSj1xLHE9SStsfDAsdD1XK3grKHE+Pj4wPEk+Pj4wPzE6MCl8MCxXPUgsST1FLEg9RyxFPUQsRz1zLEQ9cCxwPWwraHwwLHM9eCt6KyhwPj4+MDxsPj4+MD8xOjApfDA7fU09Zi5sb3c9TStwO2YuaGlnaD15K3MrKE0+Pj4wPHA+Pj4wPzE6MCk7Tj1qLmxvdz1OK0Q7ai5oaWdoPSQrRysoTj4+PjA8RD4+PjA/MTowKTtPPWIubG93PU8rRTtiLmhpZ2g9YWErSCsoTz4+PjA8RT4+PjA/MTowKTtQPWcubG93PVArSTtnLmhpZ2g9YmErVysoUD4+PjA8ST4+PjA/MTowKTtRPWUubG93PVErcTtlLmhpZ2g9Y2ErdCsoUT4+PjA8cT4+PjA/MTowKTtSPWsubG93PVIrSjtrLmhpZ2g9ZGErVSsoUj4+PjA8Sj4+PjA/MTowKTtTPW0ubG93PVMrSzttLmhpZ2g9ZWErVisoUz4+PjA8Sz4+PjA/MTowKTtUPWQubG93PVQrTDtkLmhpZ2g9ZmErWCsoVD4+PjA8TD4+PjA/MTowKTt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxjPWEud29yZHMsZD04KnRoaXMuX25EYXRhQnl0ZXMsZj04KmEuc2lnQnl0ZXM7Y1tmPj4+NV18PTEyODw8MjQtZiUzMjtjWyhmKzEyOD4+PjEwPDw1KSszMF09TWF0aC5mbG9vcihkLzQyOTQ5NjcyOTYpO2NbKGYrMTI4Pj4+MTA8PDUpKzMxXT1kO2Euc2lnQnl0ZXM9NCpjLmxlbmd0aDt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXMuX2hhc2gudG9YMzIoKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9ZC5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhO30sYmxvY2tTaXplOjMyfSk7Yy5TSEE1MTI9ZC5fY3JlYXRlSGVscGVyKGopO2MuSG1hY1NIQTUxMj1kLl9jcmVhdGVIbWFjSGVscGVyKGopO30pKCk7KGZ1bmN0aW9uKCl7dmFyIGE9Q3J5cHRvSlMsYz1hLng2NCxkPWMuV29yZCxqPWMuV29yZEFycmF5LGM9YS5hbGdvLGY9Yy5TSEE1MTIsYz1jLlNIQTM4ND1mLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBqLmluaXQoW25ldyBkLmluaXQoMzQxODA3MDM2NSwzMjM4MzcxMDMyKSxuZXcgZC5pbml0KDE2NTQyNzAyNTAsOTE0MTUwNjYzKSxuZXcgZC5pbml0KDI0Mzg1MjkzNzAsODEyNzAyOTk5KSxuZXcgZC5pbml0KDM1NTQ2MjM2MCw0MTQ0OTEyNjk3KSxuZXcgZC5pbml0KDE3MzE0MDU0MTUsNDI5MDc3NTg1NyksbmV3IGQuaW5pdCgyMzk0MTgwMjMxLDE3NTA2MDMwMjUpLG5ldyBkLmluaXQoMzY3NTAwODUyNSwxNjk0MDc2ODM5KSxuZXcgZC5pbml0KDEyMDMwNjI4MTMsMzIwNDA3NTQyOCldKTt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9Zi5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTE2O3JldHVybiBhO319KTthLlNIQTM4ND1mLl9jcmVhdGVIZWxwZXIoYyk7YS5IbWFjU0hBMzg0PWYuX2NyZWF0ZUhtYWNIZWxwZXIoYyk7fSkoKTs=',
'/libs/crypto_js/rollups/md5.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihzLHApe3ZhciBtPXt9LGw9bS5saWI9e30sbj1mdW5jdGlvbigpe30scj1sLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihiKXtuLnByb3RvdHlwZT10aGlzO3ZhciBoPW5ldyBuKCk7YiYmaC5taXhJbihiKTtoLmhhc093blByb3BlcnR5KCJpbml0Iil8fChoLmluaXQ9ZnVuY3Rpb24oKXtoLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtoLmluaXQucHJvdG90eXBlPWg7aC4kc3VwZXI9dGhpcztyZXR1cm4gaDt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZXh0ZW5kKCk7Yi5pbml0LmFwcGx5KGIsYXJndW1lbnRzKTtyZXR1cm4gYjt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGIpe2Zvcih2YXIgaCBpbiBiKWIuaGFzT3duUHJvcGVydHkoaCkmJih0aGlzW2hdPWJbaF0pO2IuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWIudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scT1sLldvcmRBcnJheT1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihiLGgpe2I9dGhpcy53b3Jkcz1ifHxbXTt0aGlzLnNpZ0J5dGVzPWghPXA/aDo0KmIubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYil7cmV0dXJuKGJ8fHQpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihiKXt2YXIgaD10aGlzLndvcmRzLGE9Yi53b3JkcyxqPXRoaXMuc2lnQnl0ZXM7Yj1iLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihqJTQpZm9yKHZhciBnPTA7ZzxiO2crKyloW2orZz4+PjJdfD0oYVtnPj4+Ml0+Pj4yNC04KihnJTQpJjI1NSk8PDI0LTgqKChqK2cpJTQpO2Vsc2UgaWYoNjU1MzU8YS5sZW5ndGgpZm9yKGc9MDtnPGI7Zys9NCloW2orZz4+PjJdPWFbZz4+PjJdO2Vsc2UgaC5wdXNoLmFwcGx5KGgsYSk7dGhpcy5zaWdCeXRlcys9YjtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy53b3JkcyxoPXRoaXMuc2lnQnl0ZXM7YltoPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGglNCk7Yi5sZW5ndGg9cy5jZWlsKGgvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBiPXIuY2xvbmUuY2FsbCh0aGlzKTtiLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGI7fSxyYW5kb206ZnVuY3Rpb24oYil7Zm9yKHZhciBoPVtdLGE9MDthPGI7YSs9NCloLnB1c2goNDI5NDk2NzI5NipzLnJhbmRvbSgpfDApO3JldHVybiBuZXcgcS5pbml0KGgsYik7fX0pLHY9bS5lbmM9e30sdD12LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGIpe3ZhciBhPWIud29yZHM7Yj1iLnNpZ0J5dGVzO2Zvcih2YXIgZz1bXSxqPTA7ajxiO2orKyl7dmFyIGs9YVtqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NTtnLnB1c2goKGs+Pj40KS50b1N0cmluZygxNikpO2cucHVzaCgoayYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGcuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihiKXtmb3IodmFyIGE9Yi5sZW5ndGgsZz1bXSxqPTA7ajxhO2orPTIpZ1tqPj4+M118PXBhcnNlSW50KGIuc3Vic3RyKGosMiksMTYpPDwyNC00KihqJTgpO3JldHVybiBuZXcgcS5pbml0KGcsYS8yKTt9fSxhPXYuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYil7dmFyIGE9Yi53b3JkcztiPWIuc2lnQnl0ZXM7Zm9yKHZhciBnPVtdLGo9MDtqPGI7aisrKWcucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGFbaj4+PjJdPj4+MjQtOCooaiU0KSYyNTUpKTtyZXR1cm4gZy5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYT1iLmxlbmd0aCxnPVtdLGo9MDtqPGE7aisrKWdbaj4+PjJdfD0oYi5jaGFyQ29kZUF0KGopJjI1NSk8PDI0LTgqKGolNCk7cmV0dXJuIG5ldyBxLmluaXQoZyxhKTt9fSx1PXYuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGIpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShhLnN0cmluZ2lmeShiKSkpO31jYXRjaChnKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihiKXtyZXR1cm4gYS5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYikpKTt9fSxnPWwuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1yLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBxLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGIpeyJzdHJpbmciPT10eXBlb2YgYiYmKGI9dS5wYXJzZShiKSk7dGhpcy5fZGF0YS5jb25jYXQoYik7dGhpcy5fbkRhdGFCeXRlcys9Yi5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuX2RhdGEsZz1hLndvcmRzLGo9YS5zaWdCeXRlcyxrPXRoaXMuYmxvY2tTaXplLG09ai8oNCprKSxtPWI/cy5jZWlsKG0pOnMubWF4KChtfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7Yj1tKms7aj1zLm1pbig0KmIsaik7aWYoYil7Zm9yKHZhciBsPTA7bDxiO2wrPWspdGhpcy5fZG9Qcm9jZXNzQmxvY2soZyxsKTtsPWcuc3BsaWNlKDAsYik7YS5zaWdCeXRlcy09ajt9cmV0dXJuIG5ldyBxLmluaXQobCxqKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGI9ci5jbG9uZS5jYWxsKHRoaXMpO2IuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBiO30sX21pbkJ1ZmZlclNpemU6MH0pO2wuSGFzaGVyPWcuZXh0ZW5kKHtjZmc6ci5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChiKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe2cucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYil7dGhpcy5fYXBwZW5kKGIpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGIpe2ImJnRoaXMuX2FwcGVuZChiKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGEsZyl7cmV0dXJuIG5ldyBiLmluaXQoZykuZmluYWxpemUoYSk7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihhLGcpe3JldHVybiBuZXcgay5ITUFDLmluaXQoYixnKS5maW5hbGl6ZShhKTt9O319KTt2YXIgaz1tLmFsZ289e307cmV0dXJuIG07fShNYXRoKTsoZnVuY3Rpb24ocyl7ZnVuY3Rpb24gcChhLGssYixoLGwsaixtKXthPWErKGsmYnx+ayZoKStsK207cmV0dXJuKGE8PGp8YT4+PjMyLWopK2s7fWZ1bmN0aW9uIG0oYSxrLGIsaCxsLGosbSl7YT1hKyhrJmh8YiZ+aCkrbCttO3JldHVybihhPDxqfGE+Pj4zMi1qKStrO31mdW5jdGlvbiBsKGEsayxiLGgsbCxqLG0pe2E9YSsoa15iXmgpK2wrbTtyZXR1cm4oYTw8anxhPj4+MzItaikrazt9ZnVuY3Rpb24gbihhLGssYixoLGwsaixtKXthPWErKGJeKGt8fmgpKStsK207cmV0dXJuKGE8PGp8YT4+PjMyLWopK2s7fWZvcih2YXIgcj1DcnlwdG9KUyxxPXIubGliLHY9cS5Xb3JkQXJyYXksdD1xLkhhc2hlcixxPXIuYWxnbyxhPVtdLHU9MDs2ND51O3UrKylhW3VdPTQyOTQ5NjcyOTYqcy5hYnMocy5zaW4odSsxKSl8MDtxPXEuTUQ1PXQuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IHYuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4XSk7fSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZyxrKXtmb3IodmFyIGI9MDsxNj5iO2IrKyl7dmFyIGg9aytiLHc9Z1toXTtnW2hdPSh3PDw4fHc+Pj4yNCkmMTY3MTE5MzV8KHc8PDI0fHc+Pj44KSY0Mjc4MjU1MzYwO312YXIgYj10aGlzLl9oYXNoLndvcmRzLGg9Z1trKzBdLHc9Z1trKzFdLGo9Z1trKzJdLHE9Z1trKzNdLHI9Z1trKzRdLHM9Z1trKzVdLHQ9Z1trKzZdLHU9Z1trKzddLHY9Z1trKzhdLHg9Z1trKzldLHk9Z1trKzEwXSx6PWdbaysxMV0sQT1nW2srMTJdLEI9Z1trKzEzXSxDPWdbaysxNF0sRD1nW2srMTVdLGM9YlswXSxkPWJbMV0sZT1iWzJdLGY9YlszXSxjPXAoYyxkLGUsZixoLDcsYVswXSksZj1wKGYsYyxkLGUsdywxMixhWzFdKSxlPXAoZSxmLGMsZCxqLDE3LGFbMl0pLGQ9cChkLGUsZixjLHEsMjIsYVszXSksYz1wKGMsZCxlLGYsciw3LGFbNF0pLGY9cChmLGMsZCxlLHMsMTIsYVs1XSksZT1wKGUsZixjLGQsdCwxNyxhWzZdKSxkPXAoZCxlLGYsYyx1LDIyLGFbN10pLGM9cChjLGQsZSxmLHYsNyxhWzhdKSxmPXAoZixjLGQsZSx4LDEyLGFbOV0pLGU9cChlLGYsYyxkLHksMTcsYVsxMF0pLGQ9cChkLGUsZixjLHosMjIsYVsxMV0pLGM9cChjLGQsZSxmLEEsNyxhWzEyXSksZj1wKGYsYyxkLGUsQiwxMixhWzEzXSksZT1wKGUsZixjLGQsQywxNyxhWzE0XSksZD1wKGQsZSxmLGMsRCwyMixhWzE1XSksYz1tKGMsZCxlLGYsdyw1LGFbMTZdKSxmPW0oZixjLGQsZSx0LDksYVsxN10pLGU9bShlLGYsYyxkLHosMTQsYVsxOF0pLGQ9bShkLGUsZixjLGgsMjAsYVsxOV0pLGM9bShjLGQsZSxmLHMsNSxhWzIwXSksZj1tKGYsYyxkLGUseSw5LGFbMjFdKSxlPW0oZSxmLGMsZCxELDE0LGFbMjJdKSxkPW0oZCxlLGYsYyxyLDIwLGFbMjNdKSxjPW0oYyxkLGUsZix4LDUsYVsyNF0pLGY9bShmLGMsZCxlLEMsOSxhWzI1XSksZT1tKGUsZixjLGQscSwxNCxhWzI2XSksZD1tKGQsZSxmLGMsdiwyMCxhWzI3XSksYz1tKGMsZCxlLGYsQiw1LGFbMjhdKSxmPW0oZixjLGQsZSxqLDksYVsyOV0pLGU9bShlLGYsYyxkLHUsMTQsYVszMF0pLGQ9bShkLGUsZixjLEEsMjAsYVszMV0pLGM9bChjLGQsZSxmLHMsNCxhWzMyXSksZj1sKGYsYyxkLGUsdiwxMSxhWzMzXSksZT1sKGUsZixjLGQseiwxNixhWzM0XSksZD1sKGQsZSxmLGMsQywyMyxhWzM1XSksYz1sKGMsZCxlLGYsdyw0LGFbMzZdKSxmPWwoZixjLGQsZSxyLDExLGFbMzddKSxlPWwoZSxmLGMsZCx1LDE2LGFbMzhdKSxkPWwoZCxlLGYsYyx5LDIzLGFbMzldKSxjPWwoYyxkLGUsZixCLDQsYVs0MF0pLGY9bChmLGMsZCxlLGgsMTEsYVs0MV0pLGU9bChlLGYsYyxkLHEsMTYsYVs0Ml0pLGQ9bChkLGUsZixjLHQsMjMsYVs0M10pLGM9bChjLGQsZSxmLHgsNCxhWzQ0XSksZj1sKGYsYyxkLGUsQSwxMSxhWzQ1XSksZT1sKGUsZixjLGQsRCwxNixhWzQ2XSksZD1sKGQsZSxmLGMsaiwyMyxhWzQ3XSksYz1uKGMsZCxlLGYsaCw2LGFbNDhdKSxmPW4oZixjLGQsZSx1LDEwLGFbNDldKSxlPW4oZSxmLGMsZCxDLDE1LGFbNTBdKSxkPW4oZCxlLGYsYyxzLDIxLGFbNTFdKSxjPW4oYyxkLGUsZixBLDYsYVs1Ml0pLGY9bihmLGMsZCxlLHEsMTAsYVs1M10pLGU9bihlLGYsYyxkLHksMTUsYVs1NF0pLGQ9bihkLGUsZixjLHcsMjEsYVs1NV0pLGM9bihjLGQsZSxmLHYsNixhWzU2XSksZj1uKGYsYyxkLGUsRCwxMCxhWzU3XSksZT1uKGUsZixjLGQsdCwxNSxhWzU4XSksZD1uKGQsZSxmLGMsQiwyMSxhWzU5XSksYz1uKGMsZCxlLGYsciw2LGFbNjBdKSxmPW4oZixjLGQsZSx6LDEwLGFbNjFdKSxlPW4oZSxmLGMsZCxqLDE1LGFbNjJdKSxkPW4oZCxlLGYsYyx4LDIxLGFbNjNdKTtiWzBdPWJbMF0rY3wwO2JbMV09YlsxXStkfDA7YlsyXT1iWzJdK2V8MDtiWzNdPWJbM10rZnwwO30sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9kYXRhLGs9YS53b3JkcyxiPTgqdGhpcy5fbkRhdGFCeXRlcyxoPTgqYS5zaWdCeXRlcztrW2g+Pj41XXw9MTI4PDwyNC1oJTMyO3ZhciBsPXMuZmxvb3IoYi80Mjk0OTY3Mjk2KTtrWyhoKzY0Pj4+OTw8NCkrMTVdPShsPDw4fGw+Pj4yNCkmMTY3MTE5MzV8KGw8PDI0fGw+Pj44KSY0Mjc4MjU1MzYwO2tbKGgrNjQ+Pj45PDw0KSsxNF09KGI8PDh8Yj4+PjI0KSYxNjcxMTkzNXwoYjw8MjR8Yj4+PjgpJjQyNzgyNTUzNjA7YS5zaWdCeXRlcz00KihrLmxlbmd0aCsxKTt0aGlzLl9wcm9jZXNzKCk7YT10aGlzLl9oYXNoO2s9YS53b3Jkcztmb3IoYj0wOzQ+YjtiKyspaD1rW2JdLGtbYl09KGg8PDh8aD4+PjI0KSYxNjcxMTkzNXwoaDw8MjR8aD4+PjgpJjQyNzgyNTUzNjA7cmV0dXJuIGE7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPXQuY2xvbmUuY2FsbCh0aGlzKTthLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKTtyZXR1cm4gYTt9fSk7ci5NRDU9dC5fY3JlYXRlSGVscGVyKHEpO3IuSG1hY01ENT10Ll9jcmVhdGVIbWFjSGVscGVyKHEpO30pKE1hdGgpOw==',
'/Lib/threading.py':'IiIiVGhyZWFkIG1vZHVsZSBlbXVsYXRpbmcgYSBzdWJzZXQgb2YgSmF2YSdzIHRocmVhZGluZyBtb2RlbC4iIiINCg0KaW1wb3J0IHN5cyBhcyBfc3lzDQppbXBvcnQgX3RocmVhZA0KDQpmcm9tIHRpbWUgaW1wb3J0IHNsZWVwIGFzIF9zbGVlcA0KdHJ5Og0KICAgIGZyb20gdGltZSBpbXBvcnQgbW9ub3RvbmljIGFzIF90aW1lDQpleGNlcHQgSW1wb3J0RXJyb3I6DQogICAgZnJvbSB0aW1lIGltcG9ydCB0aW1lIGFzIF90aW1lDQpmcm9tIHRyYWNlYmFjayBpbXBvcnQgZm9ybWF0X2V4YyBhcyBfZm9ybWF0X2V4Yw0KZnJvbSBfd2Vha3JlZnNldCBpbXBvcnQgV2Vha1NldA0KDQojIE5vdGUgcmVnYXJkaW5nIFBFUCA4IGNvbXBsaWFudCBuYW1lcw0KIyAgVGhpcyB0aHJlYWRpbmcgbW9kZWwgd2FzIG9yaWdpbmFsbHkgaW5zcGlyZWQgYnkgSmF2YSwgYW5kIGluaGVyaXRlZA0KIyB0aGUgY29udmVudGlvbiBvZiBjYW1lbENhc2UgZnVuY3Rpb24gYW5kIG1ldGhvZCBuYW1lcyBmcm9tIHRoYXQNCiMgbGFuZ3VhZ2UuIFRob3NlIG9yaWdpbmFseSBuYW1lcyBhcmUgbm90IGluIGFueSBpbW1pbmVudCBkYW5nZXIgb2YNCiMgYmVpbmcgZGVwcmVjYXRlZCAoZXZlbiBmb3IgUHkzayksc28gdGhpcyBtb2R1bGUgcHJvdmlkZXMgdGhlbSBhcyBhbg0KIyBhbGlhcyBmb3IgdGhlIFBFUCA4IGNvbXBsaWFudCBuYW1lcw0KIyBOb3RlIHRoYXQgdXNpbmcgdGhlIG5ldyBQRVAgOCBjb21wbGlhbnQgbmFtZXMgZmFjaWxpdGF0ZXMgc3Vic3RpdHV0aW9uDQojIHdpdGggdGhlIG11bHRpcHJvY2Vzc2luZyBtb2R1bGUsIHdoaWNoIGRvZXNuJ3QgcHJvdmlkZSB0aGUgb2xkDQojIEphdmEgaW5zcGlyZWQgbmFtZXMuDQoNCl9fYWxsX18gPSBbJ2FjdGl2ZV9jb3VudCcsICdDb25kaXRpb24nLCAnY3VycmVudF90aHJlYWQnLCAnZW51bWVyYXRlJywgJ0V2ZW50JywNCiAgICAgICAgICAgJ0xvY2snLCAnUkxvY2snLCAnU2VtYXBob3JlJywgJ0JvdW5kZWRTZW1hcGhvcmUnLCAnVGhyZWFkJywgJ0JhcnJpZXInLA0KICAgICAgICAgICAnVGltZXInLCAnVGhyZWFkRXJyb3InLCAnc2V0cHJvZmlsZScsICdzZXR0cmFjZScsICdsb2NhbCcsICdzdGFja19zaXplJ10NCg0KIyBSZW5hbWUgc29tZSBzdHVmZiBzbyAiZnJvbSB0aHJlYWRpbmcgaW1wb3J0ICoiIGlzIHNhZmUNCl9zdGFydF9uZXdfdGhyZWFkID0gX3RocmVhZC5zdGFydF9uZXdfdGhyZWFkDQpfYWxsb2NhdGVfbG9jayA9IF90aHJlYWQuYWxsb2NhdGVfbG9jaw0KZ2V0X2lkZW50ID0gX3RocmVhZC5nZXRfaWRlbnQNClRocmVhZEVycm9yID0gX3RocmVhZC5lcnJvcg0KdHJ5Og0KICAgIF9DUkxvY2sgPSBfdGhyZWFkLlJMb2NrDQpleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgX0NSTG9jayA9IE5vbmUNClRJTUVPVVRfTUFYID0gX3RocmVhZC5USU1FT1VUX01BWA0KZGVsIF90aHJlYWQNCg0KDQojIFN1cHBvcnQgZm9yIHByb2ZpbGUgYW5kIHRyYWNlIGhvb2tzDQoNCl9wcm9maWxlX2hvb2sgPSBOb25lDQpfdHJhY2VfaG9vayA9IE5vbmUNCg0KZGVmIHNldHByb2ZpbGUoZnVuYyk6DQogICAgZ2xvYmFsIF9wcm9maWxlX2hvb2sNCiAgICBfcHJvZmlsZV9ob29rID0gZnVuYw0KDQpkZWYgc2V0dHJhY2UoZnVuYyk6DQogICAgZ2xvYmFsIF90cmFjZV9ob29rDQogICAgX3RyYWNlX2hvb2sgPSBmdW5jDQoNCiMgU3luY2hyb25pemF0aW9uIGNsYXNzZXMNCg0KTG9jayA9IF9hbGxvY2F0ZV9sb2NrDQoNCmRlZiBSTG9jaygqYXJncywgKiprd2FyZ3MpOg0KICAgIGlmIF9DUkxvY2sgaXMgTm9uZToNCiAgICAgICAgcmV0dXJuIF9QeVJMb2NrKCphcmdzLCAqKmt3YXJncykNCiAgICByZXR1cm4gX0NSTG9jaygqYXJncywgKiprd2FyZ3MpDQoNCmNsYXNzIF9STG9jazoNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKToNCiAgICAgICAgc2VsZi5fYmxvY2sgPSBfYWxsb2NhdGVfbG9jaygpDQogICAgICAgIHNlbGYuX293bmVyID0gTm9uZQ0KICAgICAgICBzZWxmLl9jb3VudCA9IDANCg0KICAgIGRlZiBfX3JlcHJfXyhzZWxmKToNCiAgICAgICAgb3duZXIgPSBzZWxmLl9vd25lcg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBvd25lciA9IF9hY3RpdmVbb3duZXJdLm5hbWUNCiAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICByZXR1cm4gIjwlcyBvd25lcj0lciBjb3VudD0lZD4iICUgKA0KICAgICAgICAgICAgICAgIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBvd25lciwgc2VsZi5fY291bnQpDQoNCiAgICBkZWYgYWNxdWlyZShzZWxmLCBibG9ja2luZz1UcnVlLCB0aW1lb3V0PS0xKToNCiAgICAgICAgbWUgPSBnZXRfaWRlbnQoKQ0KICAgICAgICBpZiBzZWxmLl9vd25lciA9PSBtZToNCiAgICAgICAgICAgIHNlbGYuX2NvdW50ID0gc2VsZi5fY291bnQgKyAxDQogICAgICAgICAgICByZXR1cm4gMQ0KICAgICAgICByYyA9IHNlbGYuX2Jsb2NrLmFjcXVpcmUoYmxvY2tpbmcsIHRpbWVvdXQpDQogICAgICAgIGlmIHJjOg0KICAgICAgICAgICAgc2VsZi5fb3duZXIgPSBtZQ0KICAgICAgICAgICAgc2VsZi5fY291bnQgPSAxDQogICAgICAgIHJldHVybiByYw0KDQogICAgX19lbnRlcl9fID0gYWNxdWlyZQ0KDQogICAgZGVmIHJlbGVhc2Uoc2VsZik6DQogICAgICAgIGlmIHNlbGYuX293bmVyICE9IGdldF9pZGVudCgpOg0KICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJjYW5ub3QgcmVsZWFzZSB1bi1hY3F1aXJlZCBsb2NrIikNCiAgICAgICAgc2VsZi5fY291bnQgPSBjb3VudCA9IHNlbGYuX2NvdW50IC0gMQ0KICAgICAgICBpZiBub3QgY291bnQ6DQogICAgICAgICAgICBzZWxmLl9vd25lciA9IE5vbmUNCiAgICAgICAgICAgIHNlbGYuX2Jsb2NrLnJlbGVhc2UoKQ0KDQogICAgZGVmIF9fZXhpdF9fKHNlbGYsIHQsIHYsIHRiKToNCiAgICAgICAgc2VsZi5yZWxlYXNlKCkNCg0KICAgICMgSW50ZXJuYWwgbWV0aG9kcyB1c2VkIGJ5IGNvbmRpdGlvbiB2YXJpYWJsZXMNCg0KICAgIGRlZiBfYWNxdWlyZV9yZXN0b3JlKHNlbGYsIHN0YXRlKToNCiAgICAgICAgc2VsZi5fYmxvY2suYWNxdWlyZSgpDQogICAgICAgIHNlbGYuX2NvdW50LCBzZWxmLl9vd25lciA9IHN0YXRlDQoNCiAgICBkZWYgX3JlbGVhc2Vfc2F2ZShzZWxmKToNCiAgICAgICAgaWYgc2VsZi5fY291bnQgPT0gMDoNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiY2Fubm90IHJlbGVhc2UgdW4tYWNxdWlyZWQgbG9jayIpDQogICAgICAgIGNvdW50ID0gc2VsZi5fY291bnQNCiAgICAgICAgc2VsZi5fY291bnQgPSAwDQogICAgICAgIG93bmVyID0gc2VsZi5fb3duZXINCiAgICAgICAgc2VsZi5fb3duZXIgPSBOb25lDQogICAgICAgIHNlbGYuX2Jsb2NrLnJlbGVhc2UoKQ0KICAgICAgICByZXR1cm4gKGNvdW50LCBvd25lcikNCg0KICAgIGRlZiBfaXNfb3duZWQoc2VsZik6DQogICAgICAgIHJldHVybiBzZWxmLl9vd25lciA9PSBnZXRfaWRlbnQoKQ0KDQpfUHlSTG9jayA9IF9STG9jaw0KDQoNCmNsYXNzIENvbmRpdGlvbjoNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsb2NrPU5vbmUpOg0KICAgICAgICBpZiBsb2NrIGlzIE5vbmU6DQogICAgICAgICAgICBsb2NrID0gUkxvY2soKQ0KICAgICAgICBzZWxmLl9sb2NrID0gbG9jaw0KICAgICAgICAjIEV4cG9ydCB0aGUgbG9jaydzIGFjcXVpcmUoKSBhbmQgcmVsZWFzZSgpIG1ldGhvZHMNCiAgICAgICAgc2VsZi5hY3F1aXJlID0gbG9jay5hY3F1aXJlDQogICAgICAgIHNlbGYucmVsZWFzZSA9IGxvY2sucmVsZWFzZQ0KICAgICAgICAjIElmIHRoZSBsb2NrIGRlZmluZXMgX3JlbGVhc2Vfc2F2ZSgpIGFuZC9vciBfYWNxdWlyZV9yZXN0b3JlKCksDQogICAgICAgICMgdGhlc2Ugb3ZlcnJpZGUgdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb25zICh3aGljaCBqdXN0IGNhbGwNCiAgICAgICAgIyByZWxlYXNlKCkgYW5kIGFjcXVpcmUoKSBvbiB0aGUgbG9jaykuICBEaXR0byBmb3IgX2lzX293bmVkKCkuDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuX3JlbGVhc2Vfc2F2ZSA9IGxvY2suX3JlbGVhc2Vfc2F2ZQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuX2FjcXVpcmVfcmVzdG9yZSA9IGxvY2suX2FjcXVpcmVfcmVzdG9yZQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuX2lzX293bmVkID0gbG9jay5faXNfb3duZWQNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBzZWxmLl93YWl0ZXJzID0gW10NCg0KICAgIGRlZiBfX2VudGVyX18oc2VsZik6DQogICAgICAgIHJldHVybiBzZWxmLl9sb2NrLl9fZW50ZXJfXygpDQoNCiAgICBkZWYgX19leGl0X18oc2VsZiwgKmFyZ3MpOg0KICAgICAgICByZXR1cm4gc2VsZi5fbG9jay5fX2V4aXRfXygqYXJncykNCg0KICAgIGRlZiBfX3JlcHJfXyhzZWxmKToNCiAgICAgICAgcmV0dXJuICI8Q29uZGl0aW9uKCVzLCAlZCk+IiAlIChzZWxmLl9sb2NrLCBsZW4oc2VsZi5fd2FpdGVycykpDQoNCiAgICBkZWYgX3JlbGVhc2Vfc2F2ZShzZWxmKToNCiAgICAgICAgc2VsZi5fbG9jay5yZWxlYXNlKCkgICAgICAgICAgICMgTm8gc3RhdGUgdG8gc2F2ZQ0KDQogICAgZGVmIF9hY3F1aXJlX3Jlc3RvcmUoc2VsZiwgeCk6DQogICAgICAgIHNlbGYuX2xvY2suYWNxdWlyZSgpICAgICAgICAgICAjIElnbm9yZSBzYXZlZCBzdGF0ZQ0KDQogICAgZGVmIF9pc19vd25lZChzZWxmKToNCiAgICAgICAgIyBSZXR1cm4gVHJ1ZSBpZiBsb2NrIGlzIG93bmVkIGJ5IGN1cnJlbnRfdGhyZWFkLg0KICAgICAgICAjIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBvbmx5IGlmIF9fbG9jayBkb2Vzbid0IGhhdmUgX2lzX293bmVkKCkuDQogICAgICAgIGlmIHNlbGYuX2xvY2suYWNxdWlyZSgwKToNCiAgICAgICAgICAgIHNlbGYuX2xvY2sucmVsZWFzZSgpDQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBUcnVlDQoNCiAgICBkZWYgd2FpdChzZWxmLCB0aW1lb3V0PU5vbmUpOg0KICAgICAgICBpZiBub3Qgc2VsZi5faXNfb3duZWQoKToNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiY2Fubm90IHdhaXQgb24gdW4tYWNxdWlyZWQgbG9jayIpDQogICAgICAgIHdhaXRlciA9IF9hbGxvY2F0ZV9sb2NrKCkNCiAgICAgICAgd2FpdGVyLmFjcXVpcmUoKQ0KICAgICAgICBzZWxmLl93YWl0ZXJzLmFwcGVuZCh3YWl0ZXIpDQogICAgICAgIHNhdmVkX3N0YXRlID0gc2VsZi5fcmVsZWFzZV9zYXZlKCkNCiAgICAgICAgdHJ5OiAgICAjIHJlc3RvcmUgc3RhdGUgbm8gbWF0dGVyIHdoYXQgKGUuZy4sIEtleWJvYXJkSW50ZXJydXB0KQ0KICAgICAgICAgICAgaWYgdGltZW91dCBpcyBOb25lOg0KICAgICAgICAgICAgICAgIHdhaXRlci5hY3F1aXJlKCkNCiAgICAgICAgICAgICAgICBnb3RpdCA9IFRydWUNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgaWYgdGltZW91dCA+IDA6DQogICAgICAgICAgICAgICAgICAgIGdvdGl0ID0gd2FpdGVyLmFjcXVpcmUoVHJ1ZSwgdGltZW91dCkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBnb3RpdCA9IHdhaXRlci5hY3F1aXJlKEZhbHNlKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBnb3RpdDoNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fd2FpdGVycy5yZW1vdmUod2FpdGVyKQ0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIHJldHVybiBnb3RpdA0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgc2VsZi5fYWNxdWlyZV9yZXN0b3JlKHNhdmVkX3N0YXRlKQ0KDQogICAgZGVmIHdhaXRfZm9yKHNlbGYsIHByZWRpY2F0ZSwgdGltZW91dD1Ob25lKToNCiAgICAgICAgZW5kdGltZSA9IE5vbmUNCiAgICAgICAgd2FpdHRpbWUgPSB0aW1lb3V0DQogICAgICAgIHJlc3VsdCA9IHByZWRpY2F0ZSgpDQogICAgICAgIHdoaWxlIG5vdCByZXN1bHQ6DQogICAgICAgICAgICBpZiB3YWl0dGltZSBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICBpZiBlbmR0aW1lIGlzIE5vbmU6DQogICAgICAgICAgICAgICAgICAgIGVuZHRpbWUgPSBfdGltZSgpICsgd2FpdHRpbWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICB3YWl0dGltZSA9IGVuZHRpbWUgLSBfdGltZSgpDQogICAgICAgICAgICAgICAgICAgIGlmIHdhaXR0aW1lIDw9IDA6DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgc2VsZi53YWl0KHdhaXR0aW1lKQ0KICAgICAgICAgICAgcmVzdWx0ID0gcHJlZGljYXRlKCkNCiAgICAgICAgcmV0dXJuIHJlc3VsdA0KDQogICAgZGVmIG5vdGlmeShzZWxmLCBuPTEpOg0KICAgICAgICBpZiBub3Qgc2VsZi5faXNfb3duZWQoKToNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiY2Fubm90IG5vdGlmeSBvbiB1bi1hY3F1aXJlZCBsb2NrIikNCiAgICAgICAgX193YWl0ZXJzID0gc2VsZi5fd2FpdGVycw0KICAgICAgICB3YWl0ZXJzID0gX193YWl0ZXJzWzpuXQ0KICAgICAgICBpZiBub3Qgd2FpdGVyczoNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBmb3Igd2FpdGVyIGluIHdhaXRlcnM6DQogICAgICAgICAgICB3YWl0ZXIucmVsZWFzZSgpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgX193YWl0ZXJzLnJlbW92ZSh3YWl0ZXIpDQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICBkZWYgbm90aWZ5X2FsbChzZWxmKToNCiAgICAgICAgc2VsZi5ub3RpZnkobGVuKHNlbGYuX3dhaXRlcnMpKQ0KDQogICAgbm90aWZ5QWxsID0gbm90aWZ5X2FsbA0KDQoNCmNsYXNzIFNlbWFwaG9yZToNCg0KICAgICMgQWZ0ZXIgVGltIFBldGVycycgc2VtYXBob3JlIGNsYXNzLCBidXQgbm90IHF1aXRlIHRoZSBzYW1lIChubyBtYXhpbXVtKQ0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlPTEpOg0KICAgICAgICBpZiB2YWx1ZSA8IDA6DQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJzZW1hcGhvcmUgaW5pdGlhbCB2YWx1ZSBtdXN0IGJlID49IDAiKQ0KICAgICAgICBzZWxmLl9jb25kID0gQ29uZGl0aW9uKExvY2soKSkNCiAgICAgICAgc2VsZi5fdmFsdWUgPSB2YWx1ZQ0KDQogICAgZGVmIGFjcXVpcmUoc2VsZiwgYmxvY2tpbmc9VHJ1ZSwgdGltZW91dD1Ob25lKToNCiAgICAgICAgaWYgbm90IGJsb2NraW5nIGFuZCB0aW1lb3V0IGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiY2FuJ3Qgc3BlY2lmeSB0aW1lb3V0IGZvciBub24tYmxvY2tpbmcgYWNxdWlyZSIpDQogICAgICAgIHJjID0gRmFsc2UNCiAgICAgICAgZW5kdGltZSA9IE5vbmUNCiAgICAgICAgc2VsZi5fY29uZC5hY3F1aXJlKCkNCiAgICAgICAgd2hpbGUgc2VsZi5fdmFsdWUgPT0gMDoNCiAgICAgICAgICAgIGlmIG5vdCBibG9ja2luZzoNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgaWYgdGltZW91dCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICBpZiBlbmR0aW1lIGlzIE5vbmU6DQogICAgICAgICAgICAgICAgICAgIGVuZHRpbWUgPSBfdGltZSgpICsgdGltZW91dA0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBlbmR0aW1lIC0gX3RpbWUoKQ0KICAgICAgICAgICAgICAgICAgICBpZiB0aW1lb3V0IDw9IDA6DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgc2VsZi5fY29uZC53YWl0KHRpbWVvdXQpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLl92YWx1ZSA9IHNlbGYuX3ZhbHVlIC0gMQ0KICAgICAgICAgICAgcmMgPSBUcnVlDQogICAgICAgIHNlbGYuX2NvbmQucmVsZWFzZSgpDQogICAgICAgIHJldHVybiByYw0KDQogICAgX19lbnRlcl9fID0gYWNxdWlyZQ0KDQogICAgZGVmIHJlbGVhc2Uoc2VsZik6DQogICAgICAgIHNlbGYuX2NvbmQuYWNxdWlyZSgpDQogICAgICAgIHNlbGYuX3ZhbHVlID0gc2VsZi5fdmFsdWUgKyAxDQogICAgICAgIHNlbGYuX2NvbmQubm90aWZ5KCkNCiAgICAgICAgc2VsZi5fY29uZC5yZWxlYXNlKCkNCg0KICAgIGRlZiBfX2V4aXRfXyhzZWxmLCB0LCB2LCB0Yik6DQogICAgICAgIHNlbGYucmVsZWFzZSgpDQoNCg0KY2xhc3MgQm91bmRlZFNlbWFwaG9yZShTZW1hcGhvcmUpOg0KICAgICIiIlNlbWFwaG9yZSB0aGF0IGNoZWNrcyB0aGF0ICMgcmVsZWFzZXMgaXMgPD0gIyBhY3F1aXJlcyIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZT0xKToNCiAgICAgICAgU2VtYXBob3JlLl9faW5pdF9fKHNlbGYsIHZhbHVlKQ0KICAgICAgICBzZWxmLl9pbml0aWFsX3ZhbHVlID0gdmFsdWUNCg0KICAgIGRlZiByZWxlYXNlKHNlbGYpOg0KICAgICAgICBpZiBzZWxmLl92YWx1ZSA+PSBzZWxmLl9pbml0aWFsX3ZhbHVlOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiU2VtYXBob3JlIHJlbGVhc2VkIHRvbyBtYW55IHRpbWVzIikNCiAgICAgICAgcmV0dXJuIFNlbWFwaG9yZS5yZWxlYXNlKHNlbGYpDQoNCg0KY2xhc3MgRXZlbnQ6DQoNCiAgICAjIEFmdGVyIFRpbSBQZXRlcnMnIGV2ZW50IGNsYXNzICh3aXRob3V0IGlzX3Bvc3RlZCgpKQ0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBzZWxmLl9jb25kID0gQ29uZGl0aW9uKExvY2soKSkNCiAgICAgICAgc2VsZi5fZmxhZyA9IEZhbHNlDQoNCiAgICBkZWYgX3Jlc2V0X2ludGVybmFsX2xvY2tzKHNlbGYpOg0KICAgICAgICAjIHByaXZhdGUhICBjYWxsZWQgYnkgVGhyZWFkLl9yZXNldF9pbnRlcm5hbF9sb2NrcyBieSBfYWZ0ZXJfZm9yaygpDQogICAgICAgIHNlbGYuX2NvbmQuX19pbml0X18oKQ0KDQogICAgZGVmIGlzX3NldChzZWxmKToNCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZsYWcNCg0KICAgIGlzU2V0ID0gaXNfc2V0DQoNCiAgICBkZWYgc2V0KHNlbGYpOg0KICAgICAgICBzZWxmLl9jb25kLmFjcXVpcmUoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLl9mbGFnID0gVHJ1ZQ0KICAgICAgICAgICAgc2VsZi5fY29uZC5ub3RpZnlfYWxsKCkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHNlbGYuX2NvbmQucmVsZWFzZSgpDQoNCiAgICBkZWYgY2xlYXIoc2VsZik6DQogICAgICAgIHNlbGYuX2NvbmQuYWNxdWlyZSgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuX2ZsYWcgPSBGYWxzZQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgc2VsZi5fY29uZC5yZWxlYXNlKCkNCg0KICAgIGRlZiB3YWl0KHNlbGYsIHRpbWVvdXQ9Tm9uZSk6DQogICAgICAgIHNlbGYuX2NvbmQuYWNxdWlyZSgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNpZ25hbGVkID0gc2VsZi5fZmxhZw0KICAgICAgICAgICAgaWYgbm90IHNpZ25hbGVkOg0KICAgICAgICAgICAgICAgIHNpZ25hbGVkID0gc2VsZi5fY29uZC53YWl0KHRpbWVvdXQpDQogICAgICAgICAgICByZXR1cm4gc2lnbmFsZWQNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHNlbGYuX2NvbmQucmVsZWFzZSgpDQoNCg0KIyBBIGJhcnJpZXIgY2xhc3MuICBJbnNwaXJlZCBpbiBwYXJ0IGJ5IHRoZSBwdGhyZWFkX2JhcnJpZXJfKiBhcGkgYW5kDQojIHRoZSBDeWNsaWNCYXJyaWVyIGNsYXNzIGZyb20gSmF2YS4gIFNlZQ0KIyBodHRwOi8vc291cmNld2FyZS5vcmcvcHRocmVhZHMtd2luMzIvbWFudWFsL3B0aHJlYWRfYmFycmllcl9pbml0Lmh0bWwgYW5kDQojIGh0dHA6Ly9qYXZhLnN1bi5jb20vajJzZS8xLjUuMC9kb2NzL2FwaS9qYXZhL3V0aWwvY29uY3VycmVudC8NCiMgICAgICAgIEN5Y2xpY0JhcnJpZXIuaHRtbA0KIyBmb3IgaW5mb3JtYXRpb24uDQojIFdlIG1haW50YWluIHR3byBtYWluIHN0YXRlcywgJ2ZpbGxpbmcnIGFuZCAnZHJhaW5pbmcnIGVuYWJsaW5nIHRoZSBiYXJyaWVyDQojIHRvIGJlIGN5Y2xpYy4gIFRocmVhZHMgYXJlIG5vdCBhbGxvd2VkIGludG8gaXQgdW50aWwgaXQgaGFzIGZ1bGx5IGRyYWluZWQNCiMgc2luY2UgdGhlIHByZXZpb3VzIGN5Y2xlLiAgSW4gYWRkaXRpb24sIGEgJ3Jlc2V0dGluZycgc3RhdGUgZXhpc3RzIHdoaWNoIGlzDQojIHNpbWlsYXIgdG8gJ2RyYWluaW5nJyBleGNlcHQgdGhhdCB0aHJlYWRzIGxlYXZlIHdpdGggYSBCcm9rZW5CYXJyaWVyRXJyb3IsDQojIGFuZCBhICdicm9rZW4nIHN0YXRlIGluIHdoaWNoIGFsbCB0aHJlYWRzIGdldCB0aGUgZXhjZXB0aW9uLg0KY2xhc3MgQmFycmllcjoNCiAgICAiIiINCiAgICBCYXJyaWVyLiAgVXNlZnVsIGZvciBzeW5jaHJvbml6aW5nIGEgZml4ZWQgbnVtYmVyIG9mIHRocmVhZHMNCiAgICBhdCBrbm93biBzeW5jaHJvbml6YXRpb24gcG9pbnRzLiAgVGhyZWFkcyBibG9jayBvbiAnd2FpdCgpJyBhbmQgYXJlDQogICAgc2ltdWx0YW5lb3VzbHkgb25jZSB0aGV5IGhhdmUgYWxsIG1hZGUgdGhhdCBjYWxsLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwYXJ0aWVzLCBhY3Rpb249Tm9uZSwgdGltZW91dD1Ob25lKToNCiAgICAgICAgIiIiDQogICAgICAgIENyZWF0ZSBhIGJhcnJpZXIsIGluaXRpYWxpc2VkIHRvICdwYXJ0aWVzJyB0aHJlYWRzLg0KICAgICAgICAnYWN0aW9uJyBpcyBhIGNhbGxhYmxlIHdoaWNoLCB3aGVuIHN1cHBsaWVkLCB3aWxsIGJlIGNhbGxlZA0KICAgICAgICBieSBvbmUgb2YgdGhlIHRocmVhZHMgYWZ0ZXIgdGhleSBoYXZlIGFsbCBlbnRlcmVkIHRoZQ0KICAgICAgICBiYXJyaWVyIGFuZCBqdXN0IHByaW9yIHRvIHJlbGVhc2luZyB0aGVtIGFsbC4NCiAgICAgICAgSWYgYSAndGltZW91dCcgaXMgcHJvdmlkZWQsIGl0IGlzIHVzZXMgYXMgdGhlIGRlZmF1bHQgZm9yDQogICAgICAgIGFsbCBzdWJzZXF1ZW50ICd3YWl0KCknIGNhbGxzLg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5fY29uZCA9IENvbmRpdGlvbihMb2NrKCkpDQogICAgICAgIHNlbGYuX2FjdGlvbiA9IGFjdGlvbg0KICAgICAgICBzZWxmLl90aW1lb3V0ID0gdGltZW91dA0KICAgICAgICBzZWxmLl9wYXJ0aWVzID0gcGFydGllcw0KICAgICAgICBzZWxmLl9zdGF0ZSA9IDAgIzAgZmlsbGluZywgMSwgZHJhaW5pbmcsIC0xIHJlc2V0dGluZywgLTIgYnJva2VuDQogICAgICAgIHNlbGYuX2NvdW50ID0gMA0KDQogICAgZGVmIHdhaXQoc2VsZiwgdGltZW91dD1Ob25lKToNCiAgICAgICAgIiIiDQogICAgICAgIFdhaXQgZm9yIHRoZSBiYXJyaWVyLiAgV2hlbiB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aHJlYWRzIGhhdmUNCiAgICAgICAgc3RhcnRlZCB3YWl0aW5nLCB0aGV5IGFyZSBhbGwgc2ltdWx0YW5lb3VzbHkgYXdva2VuLiBJZiBhbiAnYWN0aW9uJw0KICAgICAgICB3YXMgcHJvdmlkZWQgZm9yIHRoZSBiYXJyaWVyLCBvbmUgb2YgdGhlIHRocmVhZHMgd2lsbCBoYXZlIGV4ZWN1dGVkDQogICAgICAgIHRoYXQgY2FsbGJhY2sgcHJpb3IgdG8gcmV0dXJuaW5nLg0KICAgICAgICBSZXR1cm5zIGFuIGluZGl2aWR1YWwgaW5kZXggbnVtYmVyIGZyb20gMCB0byAncGFydGllcy0xJy4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIHRpbWVvdXQgaXMgTm9uZToNCiAgICAgICAgICAgIHRpbWVvdXQgPSBzZWxmLl90aW1lb3V0DQogICAgICAgIHdpdGggc2VsZi5fY29uZDoNCiAgICAgICAgICAgIHNlbGYuX2VudGVyKCkgIyBCbG9jayB3aGlsZSB0aGUgYmFycmllciBkcmFpbnMuDQogICAgICAgICAgICBpbmRleCA9IHNlbGYuX2NvdW50DQogICAgICAgICAgICBzZWxmLl9jb3VudCArPSAxDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaWYgaW5kZXggKyAxID09IHNlbGYuX3BhcnRpZXM6DQogICAgICAgICAgICAgICAgICAgICMgV2UgcmVsZWFzZSB0aGUgYmFycmllcg0KICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZWxlYXNlKCkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAjIFdlIHdhaXQgdW50aWwgc29tZW9uZSByZWxlYXNlcyB1cw0KICAgICAgICAgICAgICAgICAgICBzZWxmLl93YWl0KHRpbWVvdXQpDQogICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4DQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHNlbGYuX2NvdW50IC09IDENCiAgICAgICAgICAgICAgICAjIFdha2UgdXAgYW55IHRocmVhZHMgd2FpdGluZyBmb3IgYmFycmllciB0byBkcmFpbi4NCiAgICAgICAgICAgICAgICBzZWxmLl9leGl0KCkNCg0KICAgICMgQmxvY2sgdW50aWwgdGhlIGJhcnJpZXIgaXMgcmVhZHkgZm9yIHVzLCBvciByYWlzZSBhbiBleGNlcHRpb24NCiAgICAjIGlmIGl0IGlzIGJyb2tlbi4NCiAgICBkZWYgX2VudGVyKHNlbGYpOg0KICAgICAgICB3aGlsZSBzZWxmLl9zdGF0ZSBpbiAoLTEsIDEpOg0KICAgICAgICAgICAgIyBJdCBpcyBkcmFpbmluZyBvciByZXNldHRpbmcsIHdhaXQgdW50aWwgZG9uZQ0KICAgICAgICAgICAgc2VsZi5fY29uZC53YWl0KCkNCiAgICAgICAgI3NlZSBpZiB0aGUgYmFycmllciBpcyBpbiBhIGJyb2tlbiBzdGF0ZQ0KICAgICAgICBpZiBzZWxmLl9zdGF0ZSA8IDA6DQogICAgICAgICAgICByYWlzZSBCcm9rZW5CYXJyaWVyRXJyb3INCiAgICAgICAgYXNzZXJ0IHNlbGYuX3N0YXRlID09IDANCg0KICAgICMgT3B0aW9uYWxseSBydW4gdGhlICdhY3Rpb24nIGFuZCByZWxlYXNlIHRoZSB0aHJlYWRzIHdhaXRpbmcNCiAgICAjIGluIHRoZSBiYXJyaWVyLg0KICAgIGRlZiBfcmVsZWFzZShzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWYgc2VsZi5fYWN0aW9uOg0KICAgICAgICAgICAgICAgIHNlbGYuX2FjdGlvbigpDQogICAgICAgICAgICAjIGVudGVyIGRyYWluaW5nIHN0YXRlDQogICAgICAgICAgICBzZWxmLl9zdGF0ZSA9IDENCiAgICAgICAgICAgIHNlbGYuX2NvbmQubm90aWZ5X2FsbCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICNhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBfYWN0aW9uIGhhbmRsZXIuICBCcmVhayBhbmQgcmVyYWlzZQ0KICAgICAgICAgICAgc2VsZi5fYnJlYWsoKQ0KICAgICAgICAgICAgcmFpc2UNCg0KICAgICMgV2FpdCBpbiB0aGUgYmFycmllciB1bnRpbCB3ZSBhcmUgcmVsYXNlZC4gIFJhaXNlIGFuIGV4Y2VwdGlvbg0KICAgICMgaWYgdGhlIGJhcnJpZXIgaXMgcmVzZXQgb3IgYnJva2VuLg0KICAgIGRlZiBfd2FpdChzZWxmLCB0aW1lb3V0KToNCiAgICAgICAgaWYgbm90IHNlbGYuX2NvbmQud2FpdF9mb3IobGFtYmRhIDogc2VsZi5fc3RhdGUgIT0gMCwgdGltZW91dCk6DQogICAgICAgICAgICAjdGltZWQgb3V0LiAgQnJlYWsgdGhlIGJhcnJpZXINCiAgICAgICAgICAgIHNlbGYuX2JyZWFrKCkNCiAgICAgICAgICAgIHJhaXNlIEJyb2tlbkJhcnJpZXJFcnJvcg0KICAgICAgICBpZiBzZWxmLl9zdGF0ZSA8IDA6DQogICAgICAgICAgICByYWlzZSBCcm9rZW5CYXJyaWVyRXJyb3INCiAgICAgICAgYXNzZXJ0IHNlbGYuX3N0YXRlID09IDENCg0KICAgICMgSWYgd2UgYXJlIHRoZSBsYXN0IHRocmVhZCB0byBleGl0IHRoZSBiYXJyaWVyLCBzaWduYWwgYW55IHRocmVhZHMNCiAgICAjIHdhaXRpbmcgZm9yIHRoZSBiYXJyaWVyIHRvIGRyYWluLg0KICAgIGRlZiBfZXhpdChzZWxmKToNCiAgICAgICAgaWYgc2VsZi5fY291bnQgPT0gMDoNCiAgICAgICAgICAgIGlmIHNlbGYuX3N0YXRlIGluICgtMSwgMSk6DQogICAgICAgICAgICAgICAgI3Jlc2V0dGluZyBvciBkcmFpbmluZw0KICAgICAgICAgICAgICAgIHNlbGYuX3N0YXRlID0gMA0KICAgICAgICAgICAgICAgIHNlbGYuX2NvbmQubm90aWZ5X2FsbCgpDQoNCiAgICBkZWYgcmVzZXQoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBSZXNldCB0aGUgYmFycmllciB0byB0aGUgaW5pdGlhbCBzdGF0ZS4NCiAgICAgICAgQW55IHRocmVhZHMgY3VycmVudGx5IHdhaXRpbmcgd2lsbCBnZXQgdGhlIEJyb2tlbkJhcnJpZXIgZXhjZXB0aW9uDQogICAgICAgIHJhaXNlZC4NCiAgICAgICAgIiIiDQogICAgICAgIHdpdGggc2VsZi5fY29uZDoNCiAgICAgICAgICAgIGlmIHNlbGYuX2NvdW50ID4gMDoNCiAgICAgICAgICAgICAgICBpZiBzZWxmLl9zdGF0ZSA9PSAwOg0KICAgICAgICAgICAgICAgICAgICAjcmVzZXQgdGhlIGJhcnJpZXIsIHdha2luZyB1cCB0aHJlYWRzDQogICAgICAgICAgICAgICAgICAgIHNlbGYuX3N0YXRlID0gLTENCiAgICAgICAgICAgICAgICBlbGlmIHNlbGYuX3N0YXRlID09IC0yOg0KICAgICAgICAgICAgICAgICAgICAjd2FzIGJyb2tlbiwgc2V0IGl0IHRvIHJlc2V0IHN0YXRlDQogICAgICAgICAgICAgICAgICAgICN3aGljaCBjbGVhcnMgd2hlbiB0aGUgbGFzdCB0aHJlYWQgZXhpdHMNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fc3RhdGUgPSAtMQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBzZWxmLl9zdGF0ZSA9IDANCiAgICAgICAgICAgIHNlbGYuX2NvbmQubm90aWZ5X2FsbCgpDQoNCiAgICBkZWYgYWJvcnQoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBQbGFjZSB0aGUgYmFycmllciBpbnRvIGEgJ2Jyb2tlbicgc3RhdGUuDQogICAgICAgIFVzZWZ1bCBpbiBjYXNlIG9mIGVycm9yLiAgQW55IGN1cnJlbnRseSB3YWl0aW5nIHRocmVhZHMgYW5kDQogICAgICAgIHRocmVhZHMgYXR0ZW1wdGluZyB0byAnd2FpdCgpJyB3aWxsIGhhdmUgQnJva2VuQmFycmllckVycm9yDQogICAgICAgIHJhaXNlZC4NCiAgICAgICAgIiIiDQogICAgICAgIHdpdGggc2VsZi5fY29uZDoNCiAgICAgICAgICAgIHNlbGYuX2JyZWFrKCkNCg0KICAgIGRlZiBfYnJlYWsoc2VsZik6DQogICAgICAgICMgQW4gaW50ZXJuYWwgZXJyb3Igd2FzIGRldGVjdGVkLiAgVGhlIGJhcnJpZXIgaXMgc2V0IHRvDQogICAgICAgICMgYSBicm9rZW4gc3RhdGUgYWxsIHBhcnRpZXMgYXdha2VuZWQuDQogICAgICAgIHNlbGYuX3N0YXRlID0gLTINCiAgICAgICAgc2VsZi5fY29uZC5ub3RpZnlfYWxsKCkNCg0KICAgIEBwcm9wZXJ0eQ0KICAgIGRlZiBwYXJ0aWVzKHNlbGYpOg0KICAgICAgICAiIiINCiAgICAgICAgUmV0dXJuIHRoZSBudW1iZXIgb2YgdGhyZWFkcyByZXF1aXJlZCB0byB0cmlwIHRoZSBiYXJyaWVyLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHNlbGYuX3BhcnRpZXMNCg0KICAgIEBwcm9wZXJ0eQ0KICAgIGRlZiBuX3dhaXRpbmcoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBSZXR1cm4gdGhlIG51bWJlciBvZiB0aHJlYWRzIHRoYXQgYXJlIGN1cnJlbnRseSB3YWl0aW5nIGF0IHRoZSBiYXJyaWVyLg0KICAgICAgICAiIiINCiAgICAgICAgIyBXZSBkb24ndCBuZWVkIHN5bmNocm9uaXphdGlvbiBoZXJlIHNpbmNlIHRoaXMgaXMgYW4gZXBoZW1lcmFsIHJlc3VsdA0KICAgICAgICAjIGFueXdheS4gIEl0IHJldHVybnMgdGhlIGNvcnJlY3QgdmFsdWUgaW4gdGhlIHN0ZWFkeSBzdGF0ZS4NCiAgICAgICAgaWYgc2VsZi5fc3RhdGUgPT0gMDoNCiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jb3VudA0KICAgICAgICByZXR1cm4gMA0KDQogICAgQHByb3BlcnR5DQogICAgZGVmIGJyb2tlbihzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIFJldHVybiBUcnVlIGlmIHRoZSBiYXJyaWVyIGlzIGluIGEgYnJva2VuIHN0YXRlDQogICAgICAgICIiIg0KICAgICAgICByZXR1cm4gc2VsZi5fc3RhdGUgPT0gLTINCg0KI2V4Y2VwdGlvbiByYWlzZWQgYnkgdGhlIEJhcnJpZXIgY2xhc3MNCmNsYXNzIEJyb2tlbkJhcnJpZXJFcnJvcihSdW50aW1lRXJyb3IpOiBwYXNzDQoNCg0KIyBIZWxwZXIgdG8gZ2VuZXJhdGUgbmV3IHRocmVhZCBuYW1lcw0KX2NvdW50ZXIgPSAwDQpkZWYgX25ld25hbWUodGVtcGxhdGU9IlRocmVhZC0lZCIpOg0KICAgIGdsb2JhbCBfY291bnRlcg0KICAgIF9jb3VudGVyID0gX2NvdW50ZXIgKyAxDQogICAgcmV0dXJuIHRlbXBsYXRlICUgX2NvdW50ZXINCg0KIyBBY3RpdmUgdGhyZWFkIGFkbWluaXN0cmF0aW9uDQpfYWN0aXZlX2xpbWJvX2xvY2sgPSBfYWxsb2NhdGVfbG9jaygpDQpfYWN0aXZlID0ge30gICAgIyBtYXBzIHRocmVhZCBpZCB0byBUaHJlYWQgb2JqZWN0DQpfbGltYm8gPSB7fQ0KDQojIEZvciBkZWJ1ZyBhbmQgbGVhayB0ZXN0aW5nDQpfZGFuZ2xpbmcgPSBXZWFrU2V0KCkNCg0KIyBNYWluIGNsYXNzIGZvciB0aHJlYWRzDQoNCmNsYXNzIFRocmVhZDoNCg0KICAgIF9faW5pdGlhbGl6ZWQgPSBGYWxzZQ0KICAgICMgTmVlZCB0byBzdG9yZSBhIHJlZmVyZW5jZSB0byBzeXMuZXhjX2luZm8gZm9yIHByaW50aW5nDQogICAgIyBvdXQgZXhjZXB0aW9ucyB3aGVuIGEgdGhyZWFkIHRyaWVzIHRvIHVzZSBhIGdsb2JhbCB2YXIuIGR1cmluZyBpbnRlcnAuDQogICAgIyBzaHV0ZG93biBhbmQgdGh1cyByYWlzZXMgYW4gZXhjZXB0aW9uIGFib3V0IHRyeWluZyB0byBwZXJmb3JtIHNvbWUNCiAgICAjIG9wZXJhdGlvbiBvbi93aXRoIGEgTm9uZVR5cGUNCiAgICBfX2V4Y19pbmZvID0gX3N5cy5leGNfaW5mbw0KICAgICMgS2VlcCBzeXMuZXhjX2NsZWFyIHRvbyB0byBjbGVhciB0aGUgZXhjZXB0aW9uIGp1c3QgYmVmb3JlDQogICAgIyBhbGxvd2luZyAuam9pbigpIHRvIHJldHVybi4NCiAgICAjWFhYIF9fZXhjX2NsZWFyID0gX3N5cy5leGNfY2xlYXINCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBncm91cD1Ob25lLCB0YXJnZXQ9Tm9uZSwgbmFtZT1Ob25lLA0KICAgICAgICAgICAgICAgICBhcmdzPSgpLCBrd2FyZ3M9Tm9uZSwgKiwgZGFlbW9uPU5vbmUpOg0KICAgICAgICBhc3NlcnQgZ3JvdXAgaXMgTm9uZSwgImdyb3VwIGFyZ3VtZW50IG11c3QgYmUgTm9uZSBmb3Igbm93Ig0KICAgICAgICBpZiBrd2FyZ3MgaXMgTm9uZToNCiAgICAgICAgICAgIGt3YXJncyA9IHt9DQogICAgICAgIHNlbGYuX3RhcmdldCA9IHRhcmdldA0KICAgICAgICBzZWxmLl9uYW1lID0gc3RyKG5hbWUgb3IgX25ld25hbWUoKSkNCiAgICAgICAgc2VsZi5fYXJncyA9IGFyZ3MNCiAgICAgICAgc2VsZi5fa3dhcmdzID0ga3dhcmdzDQogICAgICAgIGlmIGRhZW1vbiBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIHNlbGYuX2RhZW1vbmljID0gZGFlbW9uDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLl9kYWVtb25pYyA9IGN1cnJlbnRfdGhyZWFkKCkuZGFlbW9uDQogICAgICAgIHNlbGYuX2lkZW50ID0gTm9uZQ0KICAgICAgICBzZWxmLl9zdGFydGVkID0gRXZlbnQoKQ0KICAgICAgICBzZWxmLl9zdG9wcGVkID0gRmFsc2UNCiAgICAgICAgc2VsZi5fYmxvY2sgPSBDb25kaXRpb24oTG9jaygpKQ0KICAgICAgICBzZWxmLl9pbml0aWFsaXplZCA9IFRydWUNCiAgICAgICAgIyBzeXMuc3RkZXJyIGlzIG5vdCBzdG9yZWQgaW4gdGhlIGNsYXNzIGxpa2UNCiAgICAgICAgIyBzeXMuZXhjX2luZm8gc2luY2UgaXQgY2FuIGJlIGNoYW5nZWQgYmV0d2VlbiBpbnN0YW5jZXMNCiAgICAgICAgc2VsZi5fc3RkZXJyID0gX3N5cy5zdGRlcnINCiAgICAgICAgX2RhbmdsaW5nLmFkZChzZWxmKQ0KDQogICAgZGVmIF9yZXNldF9pbnRlcm5hbF9sb2NrcyhzZWxmKToNCiAgICAgICAgIyBwcml2YXRlISAgQ2FsbGVkIGJ5IF9hZnRlcl9mb3JrKCkgdG8gcmVzZXQgb3VyIGludGVybmFsIGxvY2tzIGFzDQogICAgICAgICMgdGhleSBtYXkgYmUgaW4gYW4gaW52YWxpZCBzdGF0ZSBsZWFkaW5nIHRvIGEgZGVhZGxvY2sgb3IgY3Jhc2guDQogICAgICAgIGlmIGhhc2F0dHIoc2VsZiwgJ19ibG9jaycpOiAgIyBEdW1teVRocmVhZCBkZWxldGVzIF9ibG9jaw0KICAgICAgICAgICAgc2VsZi5fYmxvY2suX19pbml0X18oKQ0KICAgICAgICBzZWxmLl9zdGFydGVkLl9yZXNldF9pbnRlcm5hbF9sb2NrcygpDQoNCiAgICBkZWYgX19yZXByX18oc2VsZik6DQogICAgICAgIGFzc2VydCBzZWxmLl9pbml0aWFsaXplZCwgIlRocmVhZC5fX2luaXRfXygpIHdhcyBub3QgY2FsbGVkIg0KICAgICAgICBzdGF0dXMgPSAiaW5pdGlhbCINCiAgICAgICAgaWYgc2VsZi5fc3RhcnRlZC5pc19zZXQoKToNCiAgICAgICAgICAgIHN0YXR1cyA9ICJzdGFydGVkIg0KICAgICAgICBpZiBzZWxmLl9zdG9wcGVkOg0KICAgICAgICAgICAgc3RhdHVzID0gInN0b3BwZWQiDQogICAgICAgIGlmIHNlbGYuX2RhZW1vbmljOg0KICAgICAgICAgICAgc3RhdHVzICs9ICIgZGFlbW9uIg0KICAgICAgICBpZiBzZWxmLl9pZGVudCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIHN0YXR1cyArPSAiICVzIiAlIHNlbGYuX2lkZW50DQogICAgICAgIHJldHVybiAiPCVzKCVzLCAlcyk+IiAlIChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywgc2VsZi5fbmFtZSwgc3RhdHVzKQ0KDQogICAgZGVmIHN0YXJ0KHNlbGYpOg0KICAgICAgICBpZiBub3Qgc2VsZi5faW5pdGlhbGl6ZWQ6DQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoInRocmVhZC5fX2luaXRfXygpIG5vdCBjYWxsZWQiKQ0KDQogICAgICAgIGlmIHNlbGYuX3N0YXJ0ZWQuaXNfc2V0KCk6DQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoInRocmVhZHMgY2FuIG9ubHkgYmUgc3RhcnRlZCBvbmNlIikNCiAgICAgICAgd2l0aCBfYWN0aXZlX2xpbWJvX2xvY2s6DQogICAgICAgICAgICBfbGltYm9bc2VsZl0gPSBzZWxmDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIF9zdGFydF9uZXdfdGhyZWFkKHNlbGYuX2Jvb3RzdHJhcCwgKCkpDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246DQogICAgICAgICAgICB3aXRoIF9hY3RpdmVfbGltYm9fbG9jazoNCiAgICAgICAgICAgICAgICBkZWwgX2xpbWJvW3NlbGZdDQogICAgICAgICAgICByYWlzZQ0KICAgICAgICBzZWxmLl9zdGFydGVkLndhaXQoKQ0KDQogICAgZGVmIHJ1bihzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWYgc2VsZi5fdGFyZ2V0Og0KICAgICAgICAgICAgICAgIHNlbGYuX3RhcmdldCgqc2VsZi5fYXJncywgKipzZWxmLl9rd2FyZ3MpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAjIEF2b2lkIGEgcmVmY3ljbGUgaWYgdGhlIHRocmVhZCBpcyBydW5uaW5nIGEgZnVuY3Rpb24gd2l0aA0KICAgICAgICAgICAgIyBhbiBhcmd1bWVudCB0aGF0IGhhcyBhIG1lbWJlciB0aGF0IHBvaW50cyB0byB0aGUgdGhyZWFkLg0KICAgICAgICAgICAgZGVsIHNlbGYuX3RhcmdldCwgc2VsZi5fYXJncywgc2VsZi5fa3dhcmdzDQoNCiAgICBkZWYgX2Jvb3RzdHJhcChzZWxmKToNCiAgICAgICAgIyBXcmFwcGVyIGFyb3VuZCB0aGUgcmVhbCBib290c3RyYXAgY29kZSB0aGF0IGlnbm9yZXMNCiAgICAgICAgIyBleGNlcHRpb25zIGR1cmluZyBpbnRlcnByZXRlciBjbGVhbnVwLiAgVGhvc2UgdHlwaWNhbGx5DQogICAgICAgICMgaGFwcGVuIHdoZW4gYSBkYWVtb24gdGhyZWFkIHdha2VzIHVwIGF0IGFuIHVuZm9ydHVuYXRlDQogICAgICAgICMgbW9tZW50LCBmaW5kcyB0aGUgd29ybGQgYXJvdW5kIGl0IGRlc3Ryb3llZCwgYW5kIHJhaXNlcyBzb21lDQogICAgICAgICMgcmFuZG9tIGV4Y2VwdGlvbiAqKiogd2hpbGUgdHJ5aW5nIHRvIHJlcG9ydCB0aGUgZXhjZXB0aW9uIGluDQogICAgICAgICMgX2Jvb3RzdHJhcF9pbm5lcigpIGJlbG93ICoqKi4gIFRob3NlIHJhbmRvbSBleGNlcHRpb25zDQogICAgICAgICMgZG9uJ3QgaGVscCBhbnlib2R5LCBhbmQgdGhleSBjb25mdXNlIHVzZXJzLCBzbyB3ZSBzdXBwcmVzcw0KICAgICAgICAjIHRoZW0uICBXZSBzdXBwcmVzcyB0aGVtIG9ubHkgd2hlbiBpdCBhcHBlYXJzIHRoYXQgdGhlIHdvcmxkDQogICAgICAgICMgaW5kZWVkIGhhcyBhbHJlYWR5IGJlZW4gZGVzdHJveWVkLCBzbyB0aGF0IGV4Y2VwdGlvbnMgaW4NCiAgICAgICAgIyBfYm9vdHN0cmFwX2lubmVyKCkgZHVyaW5nIG5vcm1hbCBidXNpbmVzcyBob3VycyBhcmUgcHJvcGVybHkNCiAgICAgICAgIyByZXBvcnRlZC4gIEFsc28sIHdlIG9ubHkgc3VwcHJlc3MgdGhlbSBmb3IgZGFlbW9uaWMgdGhyZWFkczsNCiAgICAgICAgIyBpZiBhIG5vbi1kYWVtb25pYyBlbmNvdW50ZXJzIHRoaXMsIHNvbWV0aGluZyBlbHNlIGlzIHdyb25nLg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLl9ib290c3RyYXBfaW5uZXIoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBpZiBzZWxmLl9kYWVtb25pYyBhbmQgX3N5cyBpcyBOb25lOg0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgcmFpc2UNCg0KICAgIGRlZiBfc2V0X2lkZW50KHNlbGYpOg0KICAgICAgICBzZWxmLl9pZGVudCA9IGdldF9pZGVudCgpDQoNCiAgICBkZWYgX2Jvb3RzdHJhcF9pbm5lcihzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5fc2V0X2lkZW50KCkNCiAgICAgICAgICAgIHNlbGYuX3N0YXJ0ZWQuc2V0KCkNCiAgICAgICAgICAgIHdpdGggX2FjdGl2ZV9saW1ib19sb2NrOg0KICAgICAgICAgICAgICAgIF9hY3RpdmVbc2VsZi5faWRlbnRdID0gc2VsZg0KICAgICAgICAgICAgICAgIGRlbCBfbGltYm9bc2VsZl0NCg0KICAgICAgICAgICAgaWYgX3RyYWNlX2hvb2s6DQogICAgICAgICAgICAgICAgX3N5cy5zZXR0cmFjZShfdHJhY2VfaG9vaykNCiAgICAgICAgICAgIGlmIF9wcm9maWxlX2hvb2s6DQogICAgICAgICAgICAgICAgX3N5cy5zZXRwcm9maWxlKF9wcm9maWxlX2hvb2spDQoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBzZWxmLnJ1bigpDQogICAgICAgICAgICBleGNlcHQgU3lzdGVtRXhpdDoNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICAgICAgIyBJZiBzeXMuc3RkZXJyIGlzIG5vIG1vcmUgKG1vc3QgbGlrZWx5IGZyb20gaW50ZXJwcmV0ZXINCiAgICAgICAgICAgICAgICAjIHNodXRkb3duKSB1c2Ugc2VsZi5fc3RkZXJyLiAgT3RoZXJ3aXNlIHN0aWxsIHVzZSBzeXMgKGFzIGluDQogICAgICAgICAgICAgICAgIyBfc3lzKSBpbiBjYXNlIHN5cy5zdGRlcnIgd2FzIHJlZGVmaW5lZCBzaW5jZSB0aGUgY3JlYXRpb24gb2YNCiAgICAgICAgICAgICAgICAjIHNlbGYuDQogICAgICAgICAgICAgICAgaWYgX3N5czoNCiAgICAgICAgICAgICAgICAgICAgX3N5cy5zdGRlcnIud3JpdGUoIkV4Y2VwdGlvbiBpbiB0aHJlYWQgJXM6XG4lc1xuIiAlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWxmLm5hbWUsIF9mb3JtYXRfZXhjKCkpKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICMgRG8gdGhlIGJlc3Qgam9iIHBvc3NpYmxlIHcvbyBhIGh1Z2UgYW10LiBvZiBjb2RlIHRvDQogICAgICAgICAgICAgICAgICAgICMgYXBwcm94aW1hdGUgYSB0cmFjZWJhY2sgKGNvZGUgaWRlYXMgZnJvbQ0KICAgICAgICAgICAgICAgICAgICAjIExpYi90cmFjZWJhY2sucHkpDQogICAgICAgICAgICAgICAgICAgIGV4Y190eXBlLCBleGNfdmFsdWUsIGV4Y190YiA9IHNlbGYuX2V4Y19pbmZvKCkNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFeGNlcHRpb24gaW4gdGhyZWFkICIgKyBzZWxmLm5hbWUgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgKG1vc3QgbGlrZWx5IHJhaXNlZCBkdXJpbmcgaW50ZXJwcmV0ZXIgc2h1dGRvd24pOiIpLCBmaWxlPXNlbGYuX3N0ZGVycikNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVHJhY2ViYWNrIChtb3N0IHJlY2VudCBjYWxsIGxhc3QpOiIpLCBmaWxlPXNlbGYuX3N0ZGVycikNCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIGV4Y190YjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgIEZpbGUgIiVzIiwgbGluZSAlcywgaW4gJXMnICUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGV4Y190Yi50Yl9mcmFtZS5mX2NvZGUuY29fZmlsZW5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNfdGIudGJfbGluZW5vLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjX3RiLnRiX2ZyYW1lLmZfY29kZS5jb19uYW1lKSksIGZpbGU9c2VsZi5fc3RkZXJyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y190YiA9IGV4Y190Yi50Yl9uZXh0DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgoIiVzOiAlcyIgJSAoZXhjX3R5cGUsIGV4Y192YWx1ZSkpLCBmaWxlPXNlbGYuX3N0ZGVycikNCiAgICAgICAgICAgICAgICAgICAgIyBNYWtlIHN1cmUgdGhhdCBleGNfdGIgZ2V0cyBkZWxldGVkIHNpbmNlIGl0IGlzIGEgbWVtb3J5DQogICAgICAgICAgICAgICAgICAgICMgaG9nOyBkZWxldGluZyBldmVyeXRoaW5nIGVsc2UgaXMganVzdCBmb3IgdGhvcm91Z2huZXNzDQogICAgICAgICAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgICAgICAgICBkZWwgZXhjX3R5cGUsIGV4Y192YWx1ZSwgZXhjX3RiDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgICMgUHJldmVudCBhIHJhY2UgaW4NCiAgICAgICAgICAgICAgICAjIHRlc3RfdGhyZWFkaW5nLnRlc3Rfbm9fcmVmY3ljbGVfdGhyb3VnaF90YXJnZXQgd2hlbg0KICAgICAgICAgICAgICAgICMgdGhlIGV4Y2VwdGlvbiBrZWVwcyB0aGUgdGFyZ2V0IGFsaXZlIHBhc3Qgd2hlbiB3ZQ0KICAgICAgICAgICAgICAgICMgYXNzZXJ0IHRoYXQgaXQncyBkZWFkLg0KICAgICAgICAgICAgICAgICNYWFggc2VsZi5fX2V4Y19jbGVhcigpDQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgd2l0aCBfYWN0aXZlX2xpbWJvX2xvY2s6DQogICAgICAgICAgICAgICAgc2VsZi5fc3RvcCgpDQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAjIFdlIGRvbid0IGNhbGwgc2VsZi5fZGVsZXRlKCkgYmVjYXVzZSBpdCBhbHNvDQogICAgICAgICAgICAgICAgICAgICMgZ3JhYnMgX2FjdGl2ZV9saW1ib19sb2NrLg0KICAgICAgICAgICAgICAgICAgICBkZWwgX2FjdGl2ZVtnZXRfaWRlbnQoKV0NCiAgICAgICAgICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgIGRlZiBfc3RvcChzZWxmKToNCiAgICAgICAgc2VsZi5fYmxvY2suYWNxdWlyZSgpDQogICAgICAgIHNlbGYuX3N0b3BwZWQgPSBUcnVlDQogICAgICAgIHNlbGYuX2Jsb2NrLm5vdGlmeV9hbGwoKQ0KICAgICAgICBzZWxmLl9ibG9jay5yZWxlYXNlKCkNCg0KICAgIGRlZiBfZGVsZXRlKHNlbGYpOg0KICAgICAgICAiUmVtb3ZlIGN1cnJlbnQgdGhyZWFkIGZyb20gdGhlIGRpY3Qgb2YgY3VycmVudGx5IHJ1bm5pbmcgdGhyZWFkcy4iDQoNCiAgICAgICAgIyBOb3RlcyBhYm91dCBydW5uaW5nIHdpdGggX2R1bW15X3RocmVhZDoNCiAgICAgICAgIw0KICAgICAgICAjIE11c3QgdGFrZSBjYXJlIHRvIG5vdCByYWlzZSBhbiBleGNlcHRpb24gaWYgX2R1bW15X3RocmVhZCBpcyBiZWluZw0KICAgICAgICAjIHVzZWQgKGFuZCB0aHVzIHRoaXMgbW9kdWxlIGlzIGJlaW5nIHVzZWQgYXMgYW4gaW5zdGFuY2Ugb2YNCiAgICAgICAgIyBkdW1teV90aHJlYWRpbmcpLiAgX2R1bW15X3RocmVhZC5nZXRfaWRlbnQoKSBhbHdheXMgcmV0dXJucyAtMSBzaW5jZQ0KICAgICAgICAjIHRoZXJlIGlzIG9ubHkgb25lIHRocmVhZCBpZiBfZHVtbXlfdGhyZWFkIGlzIGJlaW5nIHVzZWQuICBUaHVzDQogICAgICAgICMgbGVuKF9hY3RpdmUpIGlzIGFsd2F5cyA8PSAxIGhlcmUsIGFuZCBhbnkgVGhyZWFkIGluc3RhbmNlIGNyZWF0ZWQNCiAgICAgICAgIyBvdmVyd3JpdGVzIHRoZSAoaWYgYW55KSB0aHJlYWQgY3VycmVudGx5IHJlZ2lzdGVyZWQgaW4gX2FjdGl2ZS4NCiAgICAgICAgIw0KICAgICAgICAjIEFuIGluc3RhbmNlIG9mIF9NYWluVGhyZWFkIGlzIGFsd2F5cyBjcmVhdGVkIGJ5ICd0aHJlYWRpbmcnLiAgVGhpcw0KICAgICAgICAjIGdldHMgb3ZlcndyaXR0ZW4gdGhlIGluc3RhbnQgYW4gaW5zdGFuY2Ugb2YgVGhyZWFkIGlzIGNyZWF0ZWQ7IGJvdGgNCiAgICAgICAgIyB0aHJlYWRzIHJldHVybiAtMSBmcm9tIF9kdW1teV90aHJlYWQuZ2V0X2lkZW50KCkgYW5kIHRodXMgaGF2ZSB0aGUNCiAgICAgICAgIyBzYW1lIGtleSBpbiB0aGUgZGljdC4gIFNvIHdoZW4gdGhlIF9NYWluVGhyZWFkIGluc3RhbmNlIGNyZWF0ZWQgYnkNCiAgICAgICAgIyAndGhyZWFkaW5nJyB0cmllcyB0byBjbGVhbiBpdHNlbGYgdXAgd2hlbiBhdGV4aXQgY2FsbHMgdGhpcyBtZXRob2QNCiAgICAgICAgIyBpdCBnZXRzIGEgS2V5RXJyb3IgaWYgYW5vdGhlciBUaHJlYWQgaW5zdGFuY2Ugd2FzIGNyZWF0ZWQuDQogICAgICAgICMNCiAgICAgICAgIyBUaGlzIGFsbCBtZWFucyB0aGF0IEtleUVycm9yIGZyb20gdHJ5aW5nIHRvIGRlbGV0ZSBzb21ldGhpbmcgZnJvbQ0KICAgICAgICAjIF9hY3RpdmUgaWYgZHVtbXlfdGhyZWFkaW5nIGlzIGJlaW5nIHVzZWQgaXMgYSByZWQgaGVycmluZy4gIEJ1dA0KICAgICAgICAjIHNpbmNlIGl0IGlzbid0IGlmIGR1bW15X3RocmVhZGluZyBpcyAqbm90KiBiZWluZyB1c2VkIHRoZW4gZG9uJ3QNCiAgICAgICAgIyBoaWRlIHRoZSBleGNlcHRpb24uDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgd2l0aCBfYWN0aXZlX2xpbWJvX2xvY2s6DQogICAgICAgICAgICAgICAgZGVsIF9hY3RpdmVbZ2V0X2lkZW50KCldDQogICAgICAgICAgICAgICAgIyBUaGVyZSBtdXN0IG5vdCBiZSBhbnkgcHl0aG9uIGNvZGUgYmV0d2VlbiB0aGUgcHJldmlvdXMgbGluZQ0KICAgICAgICAgICAgICAgICMgYW5kIGFmdGVyIHRoZSBsb2NrIGlzIHJlbGVhc2VkLiAgT3RoZXJ3aXNlIGEgdHJhY2luZyBmdW5jdGlvbg0KICAgICAgICAgICAgICAgICMgY291bGQgdHJ5IHRvIGFjcXVpcmUgdGhlIGxvY2sgYWdhaW4gaW4gdGhlIHNhbWUgdGhyZWFkLCAoaW4NCiAgICAgICAgICAgICAgICAjIGN1cnJlbnRfdGhyZWFkKCkpLCBhbmQgd291bGQgYmxvY2suDQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgICAgIGlmICdkdW1teV90aHJlYWRpbmcnIG5vdCBpbiBfc3lzLm1vZHVsZXM6DQogICAgICAgICAgICAgICAgcmFpc2UNCg0KICAgIGRlZiBqb2luKHNlbGYsIHRpbWVvdXQ9Tm9uZSk6DQogICAgICAgIGlmIG5vdCBzZWxmLl9pbml0aWFsaXplZDoNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiVGhyZWFkLl9faW5pdF9fKCkgbm90IGNhbGxlZCIpDQogICAgICAgIGlmIG5vdCBzZWxmLl9zdGFydGVkLmlzX3NldCgpOg0KICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJjYW5ub3Qgam9pbiB0aHJlYWQgYmVmb3JlIGl0IGlzIHN0YXJ0ZWQiKQ0KICAgICAgICBpZiBzZWxmIGlzIGN1cnJlbnRfdGhyZWFkKCk6DQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoImNhbm5vdCBqb2luIGN1cnJlbnQgdGhyZWFkIikNCg0KICAgICAgICBzZWxmLl9ibG9jay5hY3F1aXJlKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWYgdGltZW91dCBpcyBOb25lOg0KICAgICAgICAgICAgICAgIHdoaWxlIG5vdCBzZWxmLl9zdG9wcGVkOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLl9ibG9jay53YWl0KCkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgZGVhZGxpbmUgPSBfdGltZSgpICsgdGltZW91dA0KICAgICAgICAgICAgICAgIHdoaWxlIG5vdCBzZWxmLl9zdG9wcGVkOg0KICAgICAgICAgICAgICAgICAgICBkZWxheSA9IGRlYWRsaW5lIC0gX3RpbWUoKQ0KICAgICAgICAgICAgICAgICAgICBpZiBkZWxheSA8PSAwOg0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYmxvY2sud2FpdChkZWxheSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHNlbGYuX2Jsb2NrLnJlbGVhc2UoKQ0KDQogICAgQHByb3BlcnR5DQogICAgZGVmIG5hbWUoc2VsZik6DQogICAgICAgIGFzc2VydCBzZWxmLl9pbml0aWFsaXplZCwgIlRocmVhZC5fX2luaXRfXygpIG5vdCBjYWxsZWQiDQogICAgICAgIHJldHVybiBzZWxmLl9uYW1lDQoNCiAgICBAbmFtZS5zZXR0ZXINCiAgICBkZWYgbmFtZShzZWxmLCBuYW1lKToNCiAgICAgICAgYXNzZXJ0IHNlbGYuX2luaXRpYWxpemVkLCAiVGhyZWFkLl9faW5pdF9fKCkgbm90IGNhbGxlZCINCiAgICAgICAgc2VsZi5fbmFtZSA9IHN0cihuYW1lKQ0KDQogICAgQHByb3BlcnR5DQogICAgZGVmIGlkZW50KHNlbGYpOg0KICAgICAgICBhc3NlcnQgc2VsZi5faW5pdGlhbGl6ZWQsICJUaHJlYWQuX19pbml0X18oKSBub3QgY2FsbGVkIg0KICAgICAgICByZXR1cm4gc2VsZi5faWRlbnQNCg0KICAgIGRlZiBpc19hbGl2ZShzZWxmKToNCiAgICAgICAgYXNzZXJ0IHNlbGYuX2luaXRpYWxpemVkLCAiVGhyZWFkLl9faW5pdF9fKCkgbm90IGNhbGxlZCINCiAgICAgICAgcmV0dXJuIHNlbGYuX3N0YXJ0ZWQuaXNfc2V0KCkgYW5kIG5vdCBzZWxmLl9zdG9wcGVkDQoNCiAgICBpc0FsaXZlID0gaXNfYWxpdmUNCg0KICAgIEBwcm9wZXJ0eQ0KICAgIGRlZiBkYWVtb24oc2VsZik6DQogICAgICAgIGFzc2VydCBzZWxmLl9pbml0aWFsaXplZCwgIlRocmVhZC5fX2luaXRfXygpIG5vdCBjYWxsZWQiDQogICAgICAgIHJldHVybiBzZWxmLl9kYWVtb25pYw0KDQogICAgQGRhZW1vbi5zZXR0ZXINCiAgICBkZWYgZGFlbW9uKHNlbGYsIGRhZW1vbmljKToNCiAgICAgICAgaWYgbm90IHNlbGYuX2luaXRpYWxpemVkOg0KICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJUaHJlYWQuX19pbml0X18oKSBub3QgY2FsbGVkIikNCiAgICAgICAgaWYgc2VsZi5fc3RhcnRlZC5pc19zZXQoKToNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiY2Fubm90IHNldCBkYWVtb24gc3RhdHVzIG9mIGFjdGl2ZSB0aHJlYWQiKTsNCiAgICAgICAgc2VsZi5fZGFlbW9uaWMgPSBkYWVtb25pYw0KDQogICAgZGVmIGlzRGFlbW9uKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZi5kYWVtb24NCg0KICAgIGRlZiBzZXREYWVtb24oc2VsZiwgZGFlbW9uaWMpOg0KICAgICAgICBzZWxmLmRhZW1vbiA9IGRhZW1vbmljDQoNCiAgICBkZWYgZ2V0TmFtZShzZWxmKToNCiAgICAgICAgcmV0dXJuIHNlbGYubmFtZQ0KDQogICAgZGVmIHNldE5hbWUoc2VsZiwgbmFtZSk6DQogICAgICAgIHNlbGYubmFtZSA9IG5hbWUNCg0KIyBUaGUgdGltZXIgY2xhc3Mgd2FzIGNvbnRyaWJ1dGVkIGJ5IEl0YW1hciBTaHR1bGwtVHJhdXJpbmcNCg0KY2xhc3MgVGltZXIoVGhyZWFkKToNCiAgICAiIiJDYWxsIGEgZnVuY3Rpb24gYWZ0ZXIgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIHNlY29uZHM6DQoNCiAgICB0ID0gVGltZXIoMzAuMCwgZiwgYXJncz1bXSwga3dhcmdzPXt9KQ0KICAgIHQuc3RhcnQoKQ0KICAgIHQuY2FuY2VsKCkgIyBzdG9wIHRoZSB0aW1lcidzIGFjdGlvbiBpZiBpdCdzIHN0aWxsIHdhaXRpbmcNCiAgICAiIiINCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbnRlcnZhbCwgZnVuY3Rpb24sIGFyZ3M9W10sIGt3YXJncz17fSk6DQogICAgICAgIFRocmVhZC5fX2luaXRfXyhzZWxmKQ0KICAgICAgICBzZWxmLmludGVydmFsID0gaW50ZXJ2YWwNCiAgICAgICAgc2VsZi5mdW5jdGlvbiA9IGZ1bmN0aW9uDQogICAgICAgIHNlbGYuYXJncyA9IGFyZ3MNCiAgICAgICAgc2VsZi5rd2FyZ3MgPSBrd2FyZ3MNCiAgICAgICAgc2VsZi5maW5pc2hlZCA9IEV2ZW50KCkNCg0KICAgIGRlZiBjYW5jZWwoc2VsZik6DQogICAgICAgICIiIlN0b3AgdGhlIHRpbWVyIGlmIGl0IGhhc24ndCBmaW5pc2hlZCB5ZXQiIiINCiAgICAgICAgc2VsZi5maW5pc2hlZC5zZXQoKQ0KDQogICAgZGVmIHJ1bihzZWxmKToNCiAgICAgICAgc2VsZi5maW5pc2hlZC53YWl0KHNlbGYuaW50ZXJ2YWwpDQogICAgICAgIGlmIG5vdCBzZWxmLmZpbmlzaGVkLmlzX3NldCgpOg0KICAgICAgICAgICAgc2VsZi5mdW5jdGlvbigqc2VsZi5hcmdzLCAqKnNlbGYua3dhcmdzKQ0KICAgICAgICBzZWxmLmZpbmlzaGVkLnNldCgpDQoNCiMgU3BlY2lhbCB0aHJlYWQgY2xhc3MgdG8gcmVwcmVzZW50IHRoZSBtYWluIHRocmVhZA0KIyBUaGlzIGlzIGdhcmJhZ2UgY29sbGVjdGVkIHRocm91Z2ggYW4gZXhpdCBoYW5kbGVyDQoNCmNsYXNzIF9NYWluVGhyZWFkKFRocmVhZCk6DQoNCiAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgIFRocmVhZC5fX2luaXRfXyhzZWxmLCBuYW1lPSJNYWluVGhyZWFkIiwgZGFlbW9uPUZhbHNlKQ0KICAgICAgICBzZWxmLl9zdGFydGVkLnNldCgpDQogICAgICAgIHNlbGYuX3NldF9pZGVudCgpDQogICAgICAgIHdpdGggX2FjdGl2ZV9saW1ib19sb2NrOg0KICAgICAgICAgICAgX2FjdGl2ZVtzZWxmLl9pZGVudF0gPSBzZWxmDQoNCiAgICBkZWYgX2V4aXRmdW5jKHNlbGYpOg0KICAgICAgICBzZWxmLl9zdG9wKCkNCiAgICAgICAgdCA9IF9waWNrU29tZU5vbkRhZW1vblRocmVhZCgpDQogICAgICAgIHdoaWxlIHQ6DQogICAgICAgICAgICB0LmpvaW4oKQ0KICAgICAgICAgICAgdCA9IF9waWNrU29tZU5vbkRhZW1vblRocmVhZCgpDQogICAgICAgIHNlbGYuX2RlbGV0ZSgpDQoNCmRlZiBfcGlja1NvbWVOb25EYWVtb25UaHJlYWQoKToNCiAgICBmb3IgdCBpbiBlbnVtZXJhdGUoKToNCiAgICAgICAgaWYgbm90IHQuZGFlbW9uIGFuZCB0LmlzX2FsaXZlKCk6DQogICAgICAgICAgICByZXR1cm4gdA0KICAgIHJldHVybiBOb25lDQoNCg0KIyBEdW1teSB0aHJlYWQgY2xhc3MgdG8gcmVwcmVzZW50IHRocmVhZHMgbm90IHN0YXJ0ZWQgaGVyZS4NCiMgVGhlc2UgYXJlbid0IGdhcmJhZ2UgY29sbGVjdGVkIHdoZW4gdGhleSBkaWUsIG5vciBjYW4gdGhleSBiZSB3YWl0ZWQgZm9yLg0KIyBJZiB0aGV5IGludm9rZSBhbnl0aGluZyBpbiB0aHJlYWRpbmcucHkgdGhhdCBjYWxscyBjdXJyZW50X3RocmVhZCgpLCB0aGV5DQojIGxlYXZlIGFuIGVudHJ5IGluIHRoZSBfYWN0aXZlIGRpY3QgZm9yZXZlciBhZnRlci4NCiMgVGhlaXIgcHVycG9zZSBpcyB0byByZXR1cm4gKnNvbWV0aGluZyogZnJvbSBjdXJyZW50X3RocmVhZCgpLg0KIyBUaGV5IGFyZSBtYXJrZWQgYXMgZGFlbW9uIHRocmVhZHMgc28gd2Ugd29uJ3Qgd2FpdCBmb3IgdGhlbQ0KIyB3aGVuIHdlIGV4aXQgKGNvbmZvcm0gcHJldmlvdXMgc2VtYW50aWNzKS4NCg0KY2xhc3MgX0R1bW15VGhyZWFkKFRocmVhZCk6DQoNCiAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgIFRocmVhZC5fX2luaXRfXyhzZWxmLCBuYW1lPV9uZXduYW1lKCJEdW1teS0lZCIpLCBkYWVtb249VHJ1ZSkNCg0KICAgICAgICAjIFRocmVhZC5fYmxvY2sgY29uc3VtZXMgYW4gT1MtbGV2ZWwgbG9ja2luZyBwcmltaXRpdmUsIHdoaWNoDQogICAgICAgICMgY2FuIG5ldmVyIGJlIHVzZWQgYnkgYSBfRHVtbXlUaHJlYWQuICBTaW5jZSBhIF9EdW1teVRocmVhZA0KICAgICAgICAjIGluc3RhbmNlIGlzIGltbW9ydGFsLCB0aGF0J3MgYmFkLCBzbyByZWxlYXNlIHRoaXMgcmVzb3VyY2UuDQogICAgICAgIGRlbCBzZWxmLl9ibG9jaw0KDQogICAgICAgIHNlbGYuX3N0YXJ0ZWQuc2V0KCkNCiAgICAgICAgc2VsZi5fc2V0X2lkZW50KCkNCiAgICAgICAgd2l0aCBfYWN0aXZlX2xpbWJvX2xvY2s6DQogICAgICAgICAgICBfYWN0aXZlW3NlbGYuX2lkZW50XSA9IHNlbGYNCg0KICAgIGRlZiBfc3RvcChzZWxmKToNCiAgICAgICAgcGFzcw0KDQogICAgZGVmIGpvaW4oc2VsZiwgdGltZW91dD1Ob25lKToNCiAgICAgICAgYXNzZXJ0IEZhbHNlLCAiY2Fubm90IGpvaW4gYSBkdW1teSB0aHJlYWQiDQoNCg0KIyBHbG9iYWwgQVBJIGZ1bmN0aW9ucw0KDQpkZWYgY3VycmVudF90aHJlYWQoKToNCiAgICB0cnk6DQogICAgICAgIHJldHVybiBfYWN0aXZlW2dldF9pZGVudCgpXQ0KICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgcmV0dXJuIF9EdW1teVRocmVhZCgpDQoNCmN1cnJlbnRUaHJlYWQgPSBjdXJyZW50X3RocmVhZA0KDQpkZWYgYWN0aXZlX2NvdW50KCk6DQogICAgd2l0aCBfYWN0aXZlX2xpbWJvX2xvY2s6DQogICAgICAgIHJldHVybiBsZW4oX2FjdGl2ZSkgKyBsZW4oX2xpbWJvKQ0KDQphY3RpdmVDb3VudCA9IGFjdGl2ZV9jb3VudA0KDQpkZWYgX2VudW1lcmF0ZSgpOg0KICAgICMgU2FtZSBhcyBlbnVtZXJhdGUoKSwgYnV0IHdpdGhvdXQgdGhlIGxvY2suIEludGVybmFsIHVzZSBvbmx5Lg0KICAgIHJldHVybiBsaXN0KF9hY3RpdmUudmFsdWVzKCkpICsgbGlzdChfbGltYm8udmFsdWVzKCkpDQoNCmRlZiBlbnVtZXJhdGUoKToNCiAgICB3aXRoIF9hY3RpdmVfbGltYm9fbG9jazoNCiAgICAgICAgcmV0dXJuIGxpc3QoX2FjdGl2ZS52YWx1ZXMoKSkgKyBsaXN0KF9saW1iby52YWx1ZXMoKSkNCg0KZnJvbSBfdGhyZWFkIGltcG9ydCBzdGFja19zaXplDQoNCiMgQ3JlYXRlIHRoZSBtYWluIHRocmVhZCBvYmplY3QsDQojIGFuZCBtYWtlIGl0IGF2YWlsYWJsZSBmb3IgdGhlIGludGVycHJldGVyDQojIChQeV9NYWluKSBhcyB0aHJlYWRpbmcuX3NodXRkb3duLg0KDQpfc2h1dGRvd24gPSBfTWFpblRocmVhZCgpLl9leGl0ZnVuYw0KDQojIGdldCB0aHJlYWQtbG9jYWwgaW1wbGVtZW50YXRpb24sIGVpdGhlciBmcm9tIHRoZSB0aHJlYWQNCiMgbW9kdWxlLCBvciBmcm9tIHRoZSBweXRob24gZmFsbGJhY2sNCg0KdHJ5Og0KICAgIGZyb20gX3RocmVhZCBpbXBvcnQgX2xvY2FsIGFzIGxvY2FsDQpleGNlcHQgSW1wb3J0RXJyb3I6DQogICAgZnJvbSBfdGhyZWFkaW5nX2xvY2FsIGltcG9ydCBsb2NhbA0KDQoNCmRlZiBfYWZ0ZXJfZm9yaygpOg0KICAgICMgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYnkgUHl0aG9uL2NldmFsLmM6UHlFdmFsX1JlSW5pdFRocmVhZHMgd2hpY2gNCiAgICAjIGlzIGNhbGxlZCBmcm9tIFB5T1NfQWZ0ZXJGb3JrLiAgSGVyZSB3ZSBjbGVhbnVwIHRocmVhZGluZyBtb2R1bGUgc3RhdGUNCiAgICAjIHRoYXQgc2hvdWxkIG5vdCBleGlzdCBhZnRlciBhIGZvcmsuDQoNCiAgICAjIFJlc2V0IF9hY3RpdmVfbGltYm9fbG9jaywgaW4gY2FzZSB3ZSBmb3JrZWQgd2hpbGUgdGhlIGxvY2sgd2FzIGhlbGQNCiAgICAjIGJ5IGFub3RoZXIgKG5vbi1mb3JrZWQpIHRocmVhZC4gIGh0dHA6Ly9idWdzLnB5dGhvbi5vcmcvaXNzdWU4NzQ5MDANCiAgICBnbG9iYWwgX2FjdGl2ZV9saW1ib19sb2NrDQogICAgX2FjdGl2ZV9saW1ib19sb2NrID0gX2FsbG9jYXRlX2xvY2soKQ0KDQogICAgIyBmb3JrKCkgb25seSBjb3BpZWQgdGhlIGN1cnJlbnQgdGhyZWFkOyBjbGVhciByZWZlcmVuY2VzIHRvIG90aGVycy4NCiAgICBuZXdfYWN0aXZlID0ge30NCiAgICBjdXJyZW50ID0gY3VycmVudF90aHJlYWQoKQ0KICAgIHdpdGggX2FjdGl2ZV9saW1ib19sb2NrOg0KICAgICAgICBmb3IgdGhyZWFkIGluIF9hY3RpdmUudmFsdWVzKCk6DQogICAgICAgICAgICAjIEFueSBsb2NrL2NvbmRpdGlvbiB2YXJpYWJsZSBtYXkgYmUgY3VycmVudGx5IGxvY2tlZCBvciBpbiBhbg0KICAgICAgICAgICAgIyBpbnZhbGlkIHN0YXRlLCBzbyB3ZSByZWluaXRpYWxpemUgdGhlbS4NCiAgICAgICAgICAgIHRocmVhZC5fcmVzZXRfaW50ZXJuYWxfbG9ja3MoKQ0KICAgICAgICAgICAgaWYgdGhyZWFkIGlzIGN1cnJlbnQ6DQogICAgICAgICAgICAgICAgIyBUaGVyZSBpcyBvbmx5IG9uZSBhY3RpdmUgdGhyZWFkLiBXZSByZXNldCB0aGUgaWRlbnQgdG8NCiAgICAgICAgICAgICAgICAjIGl0cyBuZXcgdmFsdWUgc2luY2UgaXQgY2FuIGhhdmUgY2hhbmdlZC4NCiAgICAgICAgICAgICAgICBpZGVudCA9IGdldF9pZGVudCgpDQogICAgICAgICAgICAgICAgdGhyZWFkLl9pZGVudCA9IGlkZW50DQogICAgICAgICAgICAgICAgbmV3X2FjdGl2ZVtpZGVudF0gPSB0aHJlYWQNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgIyBBbGwgdGhlIG90aGVycyBhcmUgYWxyZWFkeSBzdG9wcGVkLg0KICAgICAgICAgICAgICAgIHRocmVhZC5fc3RvcCgpDQoNCiAgICAgICAgX2xpbWJvLmNsZWFyKCkNCiAgICAgICAgX2FjdGl2ZS5jbGVhcigpDQogICAgICAgIF9hY3RpdmUudXBkYXRlKG5ld19hY3RpdmUpDQogICAgICAgIGFzc2VydCBsZW4oX2FjdGl2ZSkgPT0gMQ0K',
'/Lib/heapq.py':'IiIiSGVhcCBxdWV1ZSBhbGdvcml0aG0gKGEuay5hLiBwcmlvcml0eSBxdWV1ZSkuCgpIZWFwcyBhcmUgYXJyYXlzIGZvciB3aGljaCBhW2tdIDw9IGFbMiprKzFdIGFuZCBhW2tdIDw9IGFbMiprKzJdIGZvcgphbGwgaywgY291bnRpbmcgZWxlbWVudHMgZnJvbSAwLiAgRm9yIHRoZSBzYWtlIG9mIGNvbXBhcmlzb24sCm5vbi1leGlzdGluZyBlbGVtZW50cyBhcmUgY29uc2lkZXJlZCB0byBiZSBpbmZpbml0ZS4gIFRoZSBpbnRlcmVzdGluZwpwcm9wZXJ0eSBvZiBhIGhlYXAgaXMgdGhhdCBhWzBdIGlzIGFsd2F5cyBpdHMgc21hbGxlc3QgZWxlbWVudC4KClVzYWdlOgoKaGVhcCA9IFtdICAgICAgICAgICAgIyBjcmVhdGVzIGFuIGVtcHR5IGhlYXAKaGVhcHB1c2goaGVhcCwgaXRlbSkgIyBwdXNoZXMgYSBuZXcgaXRlbSBvbiB0aGUgaGVhcAppdGVtID0gaGVhcHBvcChoZWFwKSAjIHBvcHMgdGhlIHNtYWxsZXN0IGl0ZW0gZnJvbSB0aGUgaGVhcAppdGVtID0gaGVhcFswXSAgICAgICAjIHNtYWxsZXN0IGl0ZW0gb24gdGhlIGhlYXAgd2l0aG91dCBwb3BwaW5nIGl0CmhlYXBpZnkoeCkgICAgICAgICAgICMgdHJhbnNmb3JtcyBsaXN0IGludG8gYSBoZWFwLCBpbi1wbGFjZSwgaW4gbGluZWFyIHRpbWUKaXRlbSA9IGhlYXByZXBsYWNlKGhlYXAsIGl0ZW0pICMgcG9wcyBhbmQgcmV0dXJucyBzbWFsbGVzdCBpdGVtLCBhbmQgYWRkcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBuZXcgaXRlbTsgdGhlIGhlYXAgc2l6ZSBpcyB1bmNoYW5nZWQKCk91ciBBUEkgZGlmZmVycyBmcm9tIHRleHRib29rIGhlYXAgYWxnb3JpdGhtcyBhcyBmb2xsb3dzOgoKLSBXZSB1c2UgMC1iYXNlZCBpbmRleGluZy4gIFRoaXMgbWFrZXMgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZQogIGluZGV4IGZvciBhIG5vZGUgYW5kIHRoZSBpbmRleGVzIGZvciBpdHMgY2hpbGRyZW4gc2xpZ2h0bHkgbGVzcwogIG9idmlvdXMsIGJ1dCBpcyBtb3JlIHN1aXRhYmxlIHNpbmNlIFB5dGhvbiB1c2VzIDAtYmFzZWQgaW5kZXhpbmcuCgotIE91ciBoZWFwcG9wKCkgbWV0aG9kIHJldHVybnMgdGhlIHNtYWxsZXN0IGl0ZW0sIG5vdCB0aGUgbGFyZ2VzdC4KClRoZXNlIHR3byBtYWtlIGl0IHBvc3NpYmxlIHRvIHZpZXcgdGhlIGhlYXAgYXMgYSByZWd1bGFyIFB5dGhvbiBsaXN0CndpdGhvdXQgc3VycHJpc2VzOiBoZWFwWzBdIGlzIHRoZSBzbWFsbGVzdCBpdGVtLCBhbmQgaGVhcC5zb3J0KCkKbWFpbnRhaW5zIHRoZSBoZWFwIGludmFyaWFudCEKIiIiCgojIE9yaWdpbmFsIGNvZGUgYnkgS2V2aW4gTydDb25ub3IsIGF1Z21lbnRlZCBieSBUaW0gUGV0ZXJzIGFuZCBSYXltb25kIEhldHRpbmdlcgoKX19hYm91dF9fID0gIiIiSGVhcCBxdWV1ZXMKCltleHBsYW5hdGlvbiBieSBGcmFuw6dvaXMgUGluYXJkXQoKSGVhcHMgYXJlIGFycmF5cyBmb3Igd2hpY2ggYVtrXSA8PSBhWzIqaysxXSBhbmQgYVtrXSA8PSBhWzIqaysyXSBmb3IKYWxsIGssIGNvdW50aW5nIGVsZW1lbnRzIGZyb20gMC4gIEZvciB0aGUgc2FrZSBvZiBjb21wYXJpc29uLApub24tZXhpc3RpbmcgZWxlbWVudHMgYXJlIGNvbnNpZGVyZWQgdG8gYmUgaW5maW5pdGUuICBUaGUgaW50ZXJlc3RpbmcKcHJvcGVydHkgb2YgYSBoZWFwIGlzIHRoYXQgYVswXSBpcyBhbHdheXMgaXRzIHNtYWxsZXN0IGVsZW1lbnQuCgpUaGUgc3RyYW5nZSBpbnZhcmlhbnQgYWJvdmUgaXMgbWVhbnQgdG8gYmUgYW4gZWZmaWNpZW50IG1lbW9yeQpyZXByZXNlbnRhdGlvbiBmb3IgYSB0b3VybmFtZW50LiAgVGhlIG51bWJlcnMgYmVsb3cgYXJlIGBrJywgbm90IGFba106CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAKCiAgICAgICAgICAgICAgICAgIDEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyCgogICAgICAgICAgMyAgICAgICAgICAgICAgIDQgICAgICAgICAgICAgICAgNSAgICAgICAgICAgICAgIDYKCiAgICAgIDcgICAgICAgOCAgICAgICA5ICAgICAgIDEwICAgICAgMTEgICAgICAxMiAgICAgIDEzICAgICAgMTQKCiAgICAxNSAxNiAgIDE3IDE4ICAgMTkgMjAgICAyMSAyMiAgIDIzIDI0ICAgMjUgMjYgICAyNyAyOCAgIDI5IDMwCgoKSW4gdGhlIHRyZWUgYWJvdmUsIGVhY2ggY2VsbCBgaycgaXMgdG9wcGluZyBgMiprKzEnIGFuZCBgMiprKzInLiAgSW4KYW4gdXN1YWwgYmluYXJ5IHRvdXJuYW1lbnQgd2Ugc2VlIGluIHNwb3J0cywgZWFjaCBjZWxsIGlzIHRoZSB3aW5uZXIKb3ZlciB0aGUgdHdvIGNlbGxzIGl0IHRvcHMsIGFuZCB3ZSBjYW4gdHJhY2UgdGhlIHdpbm5lciBkb3duIHRoZSB0cmVlCnRvIHNlZSBhbGwgb3Bwb25lbnRzIHMvaGUgaGFkLiAgSG93ZXZlciwgaW4gbWFueSBjb21wdXRlciBhcHBsaWNhdGlvbnMKb2Ygc3VjaCB0b3VybmFtZW50cywgd2UgZG8gbm90IG5lZWQgdG8gdHJhY2UgdGhlIGhpc3Rvcnkgb2YgYSB3aW5uZXIuClRvIGJlIG1vcmUgbWVtb3J5IGVmZmljaWVudCwgd2hlbiBhIHdpbm5lciBpcyBwcm9tb3RlZCwgd2UgdHJ5IHRvCnJlcGxhY2UgaXQgYnkgc29tZXRoaW5nIGVsc2UgYXQgYSBsb3dlciBsZXZlbCwgYW5kIHRoZSBydWxlIGJlY29tZXMKdGhhdCBhIGNlbGwgYW5kIHRoZSB0d28gY2VsbHMgaXQgdG9wcyBjb250YWluIHRocmVlIGRpZmZlcmVudCBpdGVtcywKYnV0IHRoZSB0b3AgY2VsbCAid2lucyIgb3ZlciB0aGUgdHdvIHRvcHBlZCBjZWxscy4KCklmIHRoaXMgaGVhcCBpbnZhcmlhbnQgaXMgcHJvdGVjdGVkIGF0IGFsbCB0aW1lLCBpbmRleCAwIGlzIGNsZWFybHkKdGhlIG92ZXJhbGwgd2lubmVyLiAgVGhlIHNpbXBsZXN0IGFsZ29yaXRobWljIHdheSB0byByZW1vdmUgaXQgYW5kCmZpbmQgdGhlICJuZXh0IiB3aW5uZXIgaXMgdG8gbW92ZSBzb21lIGxvc2VyIChsZXQncyBzYXkgY2VsbCAzMCBpbiB0aGUKZGlhZ3JhbSBhYm92ZSkgaW50byB0aGUgMCBwb3NpdGlvbiwgYW5kIHRoZW4gcGVyY29sYXRlIHRoaXMgbmV3IDAgZG93bgp0aGUgdHJlZSwgZXhjaGFuZ2luZyB2YWx1ZXMsIHVudGlsIHRoZSBpbnZhcmlhbnQgaXMgcmUtZXN0YWJsaXNoZWQuClRoaXMgaXMgY2xlYXJseSBsb2dhcml0aG1pYyBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIGl0ZW1zIGluIHRoZSB0cmVlLgpCeSBpdGVyYXRpbmcgb3ZlciBhbGwgaXRlbXMsIHlvdSBnZXQgYW4gTyhuIGxuIG4pIHNvcnQuCgpBIG5pY2UgZmVhdHVyZSBvZiB0aGlzIHNvcnQgaXMgdGhhdCB5b3UgY2FuIGVmZmljaWVudGx5IGluc2VydCBuZXcKaXRlbXMgd2hpbGUgdGhlIHNvcnQgaXMgZ29pbmcgb24sIHByb3ZpZGVkIHRoYXQgdGhlIGluc2VydGVkIGl0ZW1zIGFyZQpub3QgImJldHRlciIgdGhhbiB0aGUgbGFzdCAwJ3RoIGVsZW1lbnQgeW91IGV4dHJhY3RlZC4gIFRoaXMgaXMKZXNwZWNpYWxseSB1c2VmdWwgaW4gc2ltdWxhdGlvbiBjb250ZXh0cywgd2hlcmUgdGhlIHRyZWUgaG9sZHMgYWxsCmluY29taW5nIGV2ZW50cywgYW5kIHRoZSAid2luIiBjb25kaXRpb24gbWVhbnMgdGhlIHNtYWxsZXN0IHNjaGVkdWxlZAp0aW1lLiAgV2hlbiBhbiBldmVudCBzY2hlZHVsZSBvdGhlciBldmVudHMgZm9yIGV4ZWN1dGlvbiwgdGhleSBhcmUKc2NoZWR1bGVkIGludG8gdGhlIGZ1dHVyZSwgc28gdGhleSBjYW4gZWFzaWx5IGdvIGludG8gdGhlIGhlYXAuICBTbywgYQpoZWFwIGlzIGEgZ29vZCBzdHJ1Y3R1cmUgZm9yIGltcGxlbWVudGluZyBzY2hlZHVsZXJzICh0aGlzIGlzIHdoYXQgSQp1c2VkIGZvciBteSBNSURJIHNlcXVlbmNlciA6LSkuCgpWYXJpb3VzIHN0cnVjdHVyZXMgZm9yIGltcGxlbWVudGluZyBzY2hlZHVsZXJzIGhhdmUgYmVlbiBleHRlbnNpdmVseQpzdHVkaWVkLCBhbmQgaGVhcHMgYXJlIGdvb2QgZm9yIHRoaXMsIGFzIHRoZXkgYXJlIHJlYXNvbmFibHkgc3BlZWR5LAp0aGUgc3BlZWQgaXMgYWxtb3N0IGNvbnN0YW50LCBhbmQgdGhlIHdvcnN0IGNhc2UgaXMgbm90IG11Y2ggZGlmZmVyZW50CnRoYW4gdGhlIGF2ZXJhZ2UgY2FzZS4gIEhvd2V2ZXIsIHRoZXJlIGFyZSBvdGhlciByZXByZXNlbnRhdGlvbnMgd2hpY2gKYXJlIG1vcmUgZWZmaWNpZW50IG92ZXJhbGwsIHlldCB0aGUgd29yc3QgY2FzZXMgbWlnaHQgYmUgdGVycmlibGUuCgpIZWFwcyBhcmUgYWxzbyB2ZXJ5IHVzZWZ1bCBpbiBiaWcgZGlzayBzb3J0cy4gIFlvdSBtb3N0IHByb2JhYmx5IGFsbAprbm93IHRoYXQgYSBiaWcgc29ydCBpbXBsaWVzIHByb2R1Y2luZyAicnVucyIgKHdoaWNoIGFyZSBwcmUtc29ydGVkCnNlcXVlbmNlcywgd2hpY2ggc2l6ZSBpcyB1c3VhbGx5IHJlbGF0ZWQgdG8gdGhlIGFtb3VudCBvZiBDUFUgbWVtb3J5KSwKZm9sbG93ZWQgYnkgYSBtZXJnaW5nIHBhc3NlcyBmb3IgdGhlc2UgcnVucywgd2hpY2ggbWVyZ2luZyBpcyBvZnRlbgp2ZXJ5IGNsZXZlcmx5IG9yZ2FuaXNlZFsxXS4gIEl0IGlzIHZlcnkgaW1wb3J0YW50IHRoYXQgdGhlIGluaXRpYWwKc29ydCBwcm9kdWNlcyB0aGUgbG9uZ2VzdCBydW5zIHBvc3NpYmxlLiAgVG91cm5hbWVudHMgYXJlIGEgZ29vZCB3YXkKdG8gdGhhdC4gIElmLCB1c2luZyBhbGwgdGhlIG1lbW9yeSBhdmFpbGFibGUgdG8gaG9sZCBhIHRvdXJuYW1lbnQsIHlvdQpyZXBsYWNlIGFuZCBwZXJjb2xhdGUgaXRlbXMgdGhhdCBoYXBwZW4gdG8gZml0IHRoZSBjdXJyZW50IHJ1biwgeW91J2xsCnByb2R1Y2UgcnVucyB3aGljaCBhcmUgdHdpY2UgdGhlIHNpemUgb2YgdGhlIG1lbW9yeSBmb3IgcmFuZG9tIGlucHV0LAphbmQgbXVjaCBiZXR0ZXIgZm9yIGlucHV0IGZ1enppbHkgb3JkZXJlZC4KCk1vcmVvdmVyLCBpZiB5b3Ugb3V0cHV0IHRoZSAwJ3RoIGl0ZW0gb24gZGlzayBhbmQgZ2V0IGFuIGlucHV0IHdoaWNoCm1heSBub3QgZml0IGluIHRoZSBjdXJyZW50IHRvdXJuYW1lbnQgKGJlY2F1c2UgdGhlIHZhbHVlICJ3aW5zIiBvdmVyCnRoZSBsYXN0IG91dHB1dCB2YWx1ZSksIGl0IGNhbm5vdCBmaXQgaW4gdGhlIGhlYXAsIHNvIHRoZSBzaXplIG9mIHRoZQpoZWFwIGRlY3JlYXNlcy4gIFRoZSBmcmVlZCBtZW1vcnkgY291bGQgYmUgY2xldmVybHkgcmV1c2VkIGltbWVkaWF0ZWx5CmZvciBwcm9ncmVzc2l2ZWx5IGJ1aWxkaW5nIGEgc2Vjb25kIGhlYXAsIHdoaWNoIGdyb3dzIGF0IGV4YWN0bHkgdGhlCnNhbWUgcmF0ZSB0aGUgZmlyc3QgaGVhcCBpcyBtZWx0aW5nLiAgV2hlbiB0aGUgZmlyc3QgaGVhcCBjb21wbGV0ZWx5CnZhbmlzaGVzLCB5b3Ugc3dpdGNoIGhlYXBzIGFuZCBzdGFydCBhIG5ldyBydW4uICBDbGV2ZXIgYW5kIHF1aXRlCmVmZmVjdGl2ZSEKCkluIGEgd29yZCwgaGVhcHMgYXJlIHVzZWZ1bCBtZW1vcnkgc3RydWN0dXJlcyB0byBrbm93LiAgSSB1c2UgdGhlbSBpbgphIGZldyBhcHBsaWNhdGlvbnMsIGFuZCBJIHRoaW5rIGl0IGlzIGdvb2QgdG8ga2VlcCBhIGBoZWFwJyBtb2R1bGUKYXJvdW5kLiA6LSkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tClsxXSBUaGUgZGlzayBiYWxhbmNpbmcgYWxnb3JpdGhtcyB3aGljaCBhcmUgY3VycmVudCwgbm93YWRheXMsIGFyZQptb3JlIGFubm95aW5nIHRoYW4gY2xldmVyLCBhbmQgdGhpcyBpcyBhIGNvbnNlcXVlbmNlIG9mIHRoZSBzZWVraW5nCmNhcGFiaWxpdGllcyBvZiB0aGUgZGlza3MuICBPbiBkZXZpY2VzIHdoaWNoIGNhbm5vdCBzZWVrLCBsaWtlIGJpZwp0YXBlIGRyaXZlcywgdGhlIHN0b3J5IHdhcyBxdWl0ZSBkaWZmZXJlbnQsIGFuZCBvbmUgaGFkIHRvIGJlIHZlcnkKY2xldmVyIHRvIGVuc3VyZSAoZmFyIGluIGFkdmFuY2UpIHRoYXQgZWFjaCB0YXBlIG1vdmVtZW50IHdpbGwgYmUgdGhlCm1vc3QgZWZmZWN0aXZlIHBvc3NpYmxlICh0aGF0IGlzLCB3aWxsIGJlc3QgcGFydGljaXBhdGUgYXQKInByb2dyZXNzaW5nIiB0aGUgbWVyZ2UpLiAgU29tZSB0YXBlcyB3ZXJlIGV2ZW4gYWJsZSB0byByZWFkCmJhY2t3YXJkcywgYW5kIHRoaXMgd2FzIGFsc28gdXNlZCB0byBhdm9pZCB0aGUgcmV3aW5kaW5nIHRpbWUuCkJlbGlldmUgbWUsIHJlYWwgZ29vZCB0YXBlIHNvcnRzIHdlcmUgcXVpdGUgc3BlY3RhY3VsYXIgdG8gd2F0Y2ghCkZyb20gYWxsIHRpbWVzLCBzb3J0aW5nIGhhcyBhbHdheXMgYmVlbiBhIEdyZWF0IEFydCEgOi0pCiIiIgoKX19hbGxfXyA9IFsnaGVhcHB1c2gnLCAnaGVhcHBvcCcsICdoZWFwaWZ5JywgJ2hlYXByZXBsYWNlJywgJ21lcmdlJywKICAgICAgICAgICAnbmxhcmdlc3QnLCAnbnNtYWxsZXN0JywgJ2hlYXBwdXNocG9wJ10KCmZyb20gaXRlcnRvb2xzIGltcG9ydCBpc2xpY2UsIHJlcGVhdCwgY291bnQsIHRlZSwgY2hhaW4KaW1wb3J0IGJpc2VjdAoKZGVmIGhlYXBwdXNoKGhlYXAsIGl0ZW0pOgogICAgIiIiUHVzaCBpdGVtIG9udG8gaGVhcCwgbWFpbnRhaW5pbmcgdGhlIGhlYXAgaW52YXJpYW50LiIiIgogICAgaGVhcC5hcHBlbmQoaXRlbSkKICAgIF9zaWZ0ZG93bihoZWFwLCAwLCBsZW4oaGVhcCktMSkKCmRlZiBoZWFwcG9wKGhlYXApOgogICAgIiIiUG9wIHRoZSBzbWFsbGVzdCBpdGVtIG9mZiB0aGUgaGVhcCwgbWFpbnRhaW5pbmcgdGhlIGhlYXAgaW52YXJpYW50LiIiIgogICAgbGFzdGVsdCA9IGhlYXAucG9wKCkgICAgIyByYWlzZXMgYXBwcm9wcmlhdGUgSW5kZXhFcnJvciBpZiBoZWFwIGlzIGVtcHR5CiAgICBpZiBoZWFwOgogICAgICAgIHJldHVybml0ZW0gPSBoZWFwWzBdCiAgICAgICAgaGVhcFswXSA9IGxhc3RlbHQKICAgICAgICBfc2lmdHVwKGhlYXAsIDApCiAgICBlbHNlOgogICAgICAgIHJldHVybml0ZW0gPSBsYXN0ZWx0CiAgICByZXR1cm4gcmV0dXJuaXRlbQoKZGVmIGhlYXByZXBsYWNlKGhlYXAsIGl0ZW0pOgogICAgIiIiUG9wIGFuZCByZXR1cm4gdGhlIGN1cnJlbnQgc21hbGxlc3QgdmFsdWUsIGFuZCBhZGQgdGhlIG5ldyBpdGVtLgoKICAgIFRoaXMgaXMgbW9yZSBlZmZpY2llbnQgdGhhbiBoZWFwcG9wKCkgZm9sbG93ZWQgYnkgaGVhcHB1c2goKSwgYW5kIGNhbiBiZQogICAgbW9yZSBhcHByb3ByaWF0ZSB3aGVuIHVzaW5nIGEgZml4ZWQtc2l6ZSBoZWFwLiAgTm90ZSB0aGF0IHRoZSB2YWx1ZQogICAgcmV0dXJuZWQgbWF5IGJlIGxhcmdlciB0aGFuIGl0ZW0hICBUaGF0IGNvbnN0cmFpbnMgcmVhc29uYWJsZSB1c2VzIG9mCiAgICB0aGlzIHJvdXRpbmUgdW5sZXNzIHdyaXR0ZW4gYXMgcGFydCBvZiBhIGNvbmRpdGlvbmFsIHJlcGxhY2VtZW50OgoKICAgICAgICBpZiBpdGVtID4gaGVhcFswXToKICAgICAgICAgICAgaXRlbSA9IGhlYXByZXBsYWNlKGhlYXAsIGl0ZW0pCiAgICAiIiIKICAgIHJldHVybml0ZW0gPSBoZWFwWzBdICAgICMgcmFpc2VzIGFwcHJvcHJpYXRlIEluZGV4RXJyb3IgaWYgaGVhcCBpcyBlbXB0eQogICAgaGVhcFswXSA9IGl0ZW0KICAgIF9zaWZ0dXAoaGVhcCwgMCkKICAgIHJldHVybiByZXR1cm5pdGVtCgpkZWYgaGVhcHB1c2hwb3AoaGVhcCwgaXRlbSk6CiAgICAiIiJGYXN0IHZlcnNpb24gb2YgYSBoZWFwcHVzaCBmb2xsb3dlZCBieSBhIGhlYXBwb3AuIiIiCiAgICBpZiBoZWFwIGFuZCBoZWFwWzBdIDwgaXRlbToKICAgICAgICBpdGVtLCBoZWFwWzBdID0gaGVhcFswXSwgaXRlbQogICAgICAgIF9zaWZ0dXAoaGVhcCwgMCkKICAgIHJldHVybiBpdGVtCgpkZWYgaGVhcGlmeSh4KToKICAgICIiIlRyYW5zZm9ybSBsaXN0IGludG8gYSBoZWFwLCBpbi1wbGFjZSwgaW4gTyhsZW4oeCkpIHRpbWUuIiIiCiAgICBuID0gbGVuKHgpCiAgICAjIFRyYW5zZm9ybSBib3R0b20tdXAuICBUaGUgbGFyZ2VzdCBpbmRleCB0aGVyZSdzIGFueSBwb2ludCB0byBsb29raW5nIGF0CiAgICAjIGlzIHRoZSBsYXJnZXN0IHdpdGggYSBjaGlsZCBpbmRleCBpbi1yYW5nZSwgc28gbXVzdCBoYXZlIDIqaSArIDEgPCBuLAogICAgIyBvciBpIDwgKG4tMSkvMi4gIElmIG4gaXMgZXZlbiA9IDIqaiwgdGhpcyBpcyAoMipqLTEpLzIgPSBqLTEvMiBzbwogICAgIyBqLTEgaXMgdGhlIGxhcmdlc3QsIHdoaWNoIGlzIG4vLzIgLSAxLiAgSWYgbiBpcyBvZGQgPSAyKmorMSwgdGhpcyBpcwogICAgIyAoMipqKzEtMSkvMiA9IGogc28gai0xIGlzIHRoZSBsYXJnZXN0LCBhbmQgdGhhdCdzIGFnYWluIG4vLzItMS4KICAgIGZvciBpIGluIHJldmVyc2VkKHJhbmdlKG4vLzIpKToKICAgICAgICBfc2lmdHVwKHgsIGkpCgpkZWYgbmxhcmdlc3QobiwgaXRlcmFibGUpOgogICAgIiIiRmluZCB0aGUgbiBsYXJnZXN0IGVsZW1lbnRzIGluIGEgZGF0YXNldC4KCiAgICBFcXVpdmFsZW50IHRvOiAgc29ydGVkKGl0ZXJhYmxlLCByZXZlcnNlPVRydWUpWzpuXQogICAgIiIiCiAgICBpZiBuIDwgMDoKICAgICAgICByZXR1cm4gW10KICAgIGl0ID0gaXRlcihpdGVyYWJsZSkKICAgIHJlc3VsdCA9IGxpc3QoaXNsaWNlKGl0LCBuKSkKICAgIGlmIG5vdCByZXN1bHQ6CiAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgaGVhcGlmeShyZXN1bHQpCiAgICBfaGVhcHB1c2hwb3AgPSBoZWFwcHVzaHBvcAogICAgZm9yIGVsZW0gaW4gaXQ6CiAgICAgICAgX2hlYXBwdXNocG9wKHJlc3VsdCwgZWxlbSkKICAgIHJlc3VsdC5zb3J0KHJldmVyc2U9VHJ1ZSkKICAgIHJldHVybiByZXN1bHQKCmRlZiBuc21hbGxlc3QobiwgaXRlcmFibGUpOgogICAgIiIiRmluZCB0aGUgbiBzbWFsbGVzdCBlbGVtZW50cyBpbiBhIGRhdGFzZXQuCgogICAgRXF1aXZhbGVudCB0bzogIHNvcnRlZChpdGVyYWJsZSlbOm5dCiAgICAiIiIKICAgIGlmIG4gPCAwOgogICAgICAgIHJldHVybiBbXQogICAgaWYgaGFzYXR0cihpdGVyYWJsZSwgJ19fbGVuX18nKSBhbmQgbiAqIDEwIDw9IGxlbihpdGVyYWJsZSk6CiAgICAgICAgIyBGb3Igc21hbGxlciB2YWx1ZXMgb2YgbiwgdGhlIGJpc2VjdCBtZXRob2QgaXMgZmFzdGVyIHRoYW4gYSBtaW5oZWFwLgogICAgICAgICMgSXQgaXMgYWxzbyBtZW1vcnkgZWZmaWNpZW50LCBjb25zdW1pbmcgb25seSBuIGVsZW1lbnRzIG9mIHNwYWNlLgogICAgICAgIGl0ID0gaXRlcihpdGVyYWJsZSkKICAgICAgICByZXN1bHQgPSBzb3J0ZWQoaXNsaWNlKGl0LCAwLCBuKSkKICAgICAgICBpZiBub3QgcmVzdWx0OgogICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgaW5zb3J0ID0gYmlzZWN0Lmluc29ydAogICAgICAgIHBvcCA9IHJlc3VsdC5wb3AKICAgICAgICBsb3MgPSByZXN1bHRbLTFdICAgICMgbG9zIC0tPiBMYXJnZXN0IG9mIHRoZSBuc21hbGxlc3QKICAgICAgICBmb3IgZWxlbSBpbiBpdDoKICAgICAgICAgICAgaWYgZWxlbSA8IGxvczoKICAgICAgICAgICAgICAgIGluc29ydChyZXN1bHQsIGVsZW0pCiAgICAgICAgICAgICAgICBwb3AoKQogICAgICAgICAgICAgICAgbG9zID0gcmVzdWx0Wy0xXQogICAgICAgIHJldHVybiByZXN1bHQKICAgICMgQW4gYWx0ZXJuYXRpdmUgYXBwcm9hY2ggbWFuaWZlc3RzIHRoZSB3aG9sZSBpdGVyYWJsZSBpbiBtZW1vcnkgYnV0CiAgICAjIHNhdmVzIGNvbXBhcmlzb25zIGJ5IGhlYXBpZnlpbmcgYWxsIGF0IG9uY2UuICBBbHNvLCBzYXZlcyB0aW1lCiAgICAjIG92ZXIgYmlzZWN0Lmluc29ydCgpIHdoaWNoIGhhcyBPKG4pIGRhdGEgbW92ZW1lbnQgdGltZSBmb3IgZXZlcnkKICAgICMgaW5zZXJ0aW9uLiAgRmluZGluZyB0aGUgbiBzbWFsbGVzdCBvZiBhbiBtIGxlbmd0aCBpdGVyYWJsZSByZXF1aXJlcwogICAgIyAgICBPKG0pICsgTyhuIGxvZyBtKSBjb21wYXJpc29ucy4KICAgIGggPSBsaXN0KGl0ZXJhYmxlKQogICAgaGVhcGlmeShoKQogICAgcmV0dXJuIGxpc3QobWFwKGhlYXBwb3AsIHJlcGVhdChoLCBtaW4obiwgbGVuKGgpKSkpKQoKIyAnaGVhcCcgaXMgYSBoZWFwIGF0IGFsbCBpbmRpY2VzID49IHN0YXJ0cG9zLCBleGNlcHQgcG9zc2libHkgZm9yIHBvcy4gIHBvcwojIGlzIHRoZSBpbmRleCBvZiBhIGxlYWYgd2l0aCBhIHBvc3NpYmx5IG91dC1vZi1vcmRlciB2YWx1ZS4gIFJlc3RvcmUgdGhlCiMgaGVhcCBpbnZhcmlhbnQuCmRlZiBfc2lmdGRvd24oaGVhcCwgc3RhcnRwb3MsIHBvcyk6CiAgICBuZXdpdGVtID0gaGVhcFtwb3NdCiAgICAjIEZvbGxvdyB0aGUgcGF0aCB0byB0aGUgcm9vdCwgbW92aW5nIHBhcmVudHMgZG93biB1bnRpbCBmaW5kaW5nIGEgcGxhY2UKICAgICMgbmV3aXRlbSBmaXRzLgogICAgd2hpbGUgcG9zID4gc3RhcnRwb3M6CiAgICAgICAgcGFyZW50cG9zID0gKHBvcyAtIDEpID4+IDEKICAgICAgICBwYXJlbnQgPSBoZWFwW3BhcmVudHBvc10KICAgICAgICBpZiBuZXdpdGVtIDwgcGFyZW50OgogICAgICAgICAgICBoZWFwW3Bvc10gPSBwYXJlbnQKICAgICAgICAgICAgcG9zID0gcGFyZW50cG9zCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgYnJlYWsKICAgIGhlYXBbcG9zXSA9IG5ld2l0ZW0KCiMgVGhlIGNoaWxkIGluZGljZXMgb2YgaGVhcCBpbmRleCBwb3MgYXJlIGFscmVhZHkgaGVhcHMsIGFuZCB3ZSB3YW50IHRvIG1ha2UKIyBhIGhlYXAgYXQgaW5kZXggcG9zIHRvby4gIFdlIGRvIHRoaXMgYnkgYnViYmxpbmcgdGhlIHNtYWxsZXIgY2hpbGQgb2YKIyBwb3MgdXAgKGFuZCBzbyBvbiB3aXRoIHRoYXQgY2hpbGQncyBjaGlsZHJlbiwgZXRjKSB1bnRpbCBoaXR0aW5nIGEgbGVhZiwKIyB0aGVuIHVzaW5nIF9zaWZ0ZG93biB0byBtb3ZlIHRoZSBvZGRiYWxsIG9yaWdpbmFsbHkgYXQgaW5kZXggcG9zIGludG8gcGxhY2UuCiMKIyBXZSAqY291bGQqIGJyZWFrIG91dCBvZiB0aGUgbG9vcCBhcyBzb29uIGFzIHdlIGZpbmQgYSBwb3Mgd2hlcmUgbmV3aXRlbSA8PQojIGJvdGggaXRzIGNoaWxkcmVuLCBidXQgdHVybnMgb3V0IHRoYXQncyBub3QgYSBnb29kIGlkZWEsIGFuZCBkZXNwaXRlIHRoYXQKIyBtYW55IGJvb2tzIHdyaXRlIHRoZSBhbGdvcml0aG0gdGhhdCB3YXkuICBEdXJpbmcgYSBoZWFwIHBvcCwgdGhlIGxhc3QgYXJyYXkKIyBlbGVtZW50IGlzIHNpZnRlZCBpbiwgYW5kIHRoYXQgdGVuZHMgdG8gYmUgbGFyZ2UsIHNvIHRoYXQgY29tcGFyaW5nIGl0CiMgYWdhaW5zdCB2YWx1ZXMgc3RhcnRpbmcgZnJvbSB0aGUgcm9vdCB1c3VhbGx5IGRvZXNuJ3QgcGF5ICg9IHVzdWFsbHkgZG9lc24ndAojIGdldCB1cyBvdXQgb2YgdGhlIGxvb3AgZWFybHkpLiAgU2VlIEtudXRoLCBWb2x1bWUgMywgd2hlcmUgdGhpcyBpcwojIGV4cGxhaW5lZCBhbmQgcXVhbnRpZmllZCBpbiBhbiBleGVyY2lzZS4KIwojIEN1dHRpbmcgdGhlICMgb2YgY29tcGFyaXNvbnMgaXMgaW1wb3J0YW50LCBzaW5jZSB0aGVzZSByb3V0aW5lcyBoYXZlIG5vCiMgd2F5IHRvIGV4dHJhY3QgInRoZSBwcmlvcml0eSIgZnJvbSBhbiBhcnJheSBlbGVtZW50LCBzbyB0aGF0IGludGVsbGlnZW5jZQojIGlzIGxpa2VseSB0byBiZSBoaWRpbmcgaW4gY3VzdG9tIGNvbXBhcmlzb24gbWV0aG9kcywgb3IgaW4gYXJyYXkgZWxlbWVudHMKIyBzdG9yaW5nIChwcmlvcml0eSwgcmVjb3JkKSB0dXBsZXMuICBDb21wYXJpc29ucyBhcmUgdGh1cyBwb3RlbnRpYWxseQojIGV4cGVuc2l2ZS4KIwojIE9uIHJhbmRvbSBhcnJheXMgb2YgbGVuZ3RoIDEwMDAsIG1ha2luZyB0aGlzIGNoYW5nZSBjdXQgdGhlIG51bWJlciBvZgojIGNvbXBhcmlzb25zIG1hZGUgYnkgaGVhcGlmeSgpIGEgbGl0dGxlLCBhbmQgdGhvc2UgbWFkZSBieSBleGhhdXN0aXZlCiMgaGVhcHBvcCgpIGEgbG90LCBpbiBhY2NvcmQgd2l0aCB0aGVvcnkuICBIZXJlIGFyZSB0eXBpY2FsIHJlc3VsdHMgZnJvbSAzCiMgcnVucyAoMyBqdXN0IHRvIGRlbW9uc3RyYXRlIGhvdyBzbWFsbCB0aGUgdmFyaWFuY2UgaXMpOgojCiMgQ29tcGFyZXMgbmVlZGVkIGJ5IGhlYXBpZnkgICAgIENvbXBhcmVzIG5lZWRlZCBieSAxMDAwIGhlYXBwb3BzCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgMTgzNyBjdXQgdG8gMTY2MyAgICAgICAgICAgICAgIDE0OTk2IGN1dCB0byA4NjgwCiMgMTg1NSBjdXQgdG8gMTY1OSAgICAgICAgICAgICAgIDE0OTY2IGN1dCB0byA4Njc4CiMgMTg0NyBjdXQgdG8gMTY2MCAgICAgICAgICAgICAgIDE1MDI0IGN1dCB0byA4NzAzCiMKIyBCdWlsZGluZyB0aGUgaGVhcCBieSB1c2luZyBoZWFwcHVzaCgpIDEwMDAgdGltZXMgaW5zdGVhZCByZXF1aXJlZAojIDIxOTgsIDIxNDgsIGFuZCAyMjE5IGNvbXBhcmVzOiAgaGVhcGlmeSgpIGlzIG1vcmUgZWZmaWNpZW50LCB3aGVuCiMgeW91IGNhbiB1c2UgaXQuCiMKIyBUaGUgdG90YWwgY29tcGFyZXMgbmVlZGVkIGJ5IGxpc3Quc29ydCgpIG9uIHRoZSBzYW1lIGxpc3RzIHdlcmUgODYyNywKIyA4NjI3LCBhbmQgODYzMiAodGhpcyBzaG91bGQgYmUgY29tcGFyZWQgdG8gdGhlIHN1bSBvZiBoZWFwaWZ5KCkgYW5kCiMgaGVhcHBvcCgpIGNvbXBhcmVzKTogIGxpc3Quc29ydCgpIGlzICh1bnN1cnByaXNpbmdseSEpIG1vcmUgZWZmaWNpZW50CiMgZm9yIHNvcnRpbmcuCgpkZWYgX3NpZnR1cChoZWFwLCBwb3MpOgogICAgZW5kcG9zID0gbGVuKGhlYXApCiAgICBzdGFydHBvcyA9IHBvcwogICAgbmV3aXRlbSA9IGhlYXBbcG9zXQogICAgIyBCdWJibGUgdXAgdGhlIHNtYWxsZXIgY2hpbGQgdW50aWwgaGl0dGluZyBhIGxlYWYuCiAgICBjaGlsZHBvcyA9IDIqcG9zICsgMSAgICAjIGxlZnRtb3N0IGNoaWxkIHBvc2l0aW9uCiAgICB3aGlsZSBjaGlsZHBvcyA8IGVuZHBvczoKICAgICAgICAjIFNldCBjaGlsZHBvcyB0byBpbmRleCBvZiBzbWFsbGVyIGNoaWxkLgogICAgICAgIHJpZ2h0cG9zID0gY2hpbGRwb3MgKyAxCiAgICAgICAgaWYgcmlnaHRwb3MgPCBlbmRwb3MgYW5kIG5vdCBoZWFwW2NoaWxkcG9zXSA8IGhlYXBbcmlnaHRwb3NdOgogICAgICAgICAgICBjaGlsZHBvcyA9IHJpZ2h0cG9zCiAgICAgICAgIyBNb3ZlIHRoZSBzbWFsbGVyIGNoaWxkIHVwLgogICAgICAgIGhlYXBbcG9zXSA9IGhlYXBbY2hpbGRwb3NdCiAgICAgICAgcG9zID0gY2hpbGRwb3MKICAgICAgICBjaGlsZHBvcyA9IDIqcG9zICsgMQogICAgIyBUaGUgbGVhZiBhdCBwb3MgaXMgZW1wdHkgbm93LiAgUHV0IG5ld2l0ZW0gdGhlcmUsIGFuZCBidWJibGUgaXQgdXAKICAgICMgdG8gaXRzIGZpbmFsIHJlc3RpbmcgcGxhY2UgKGJ5IHNpZnRpbmcgaXRzIHBhcmVudHMgZG93bikuCiAgICBoZWFwW3Bvc10gPSBuZXdpdGVtCiAgICBfc2lmdGRvd24oaGVhcCwgc3RhcnRwb3MsIHBvcykKCiMgbm90IGF2YWlsYWJsZSBpbiBicnl0aG9uCiMgSWYgYXZhaWxhYmxlLCB1c2UgQyBpbXBsZW1lbnRhdGlvbgojdHJ5OgojICAgIGZyb20gX2hlYXBxIGltcG9ydCAqCiNleGNlcHQgSW1wb3J0RXJyb3I6CiMgICAgcGFzcwoKZGVmIG1lcmdlKCppdGVyYWJsZXMpOgogICAgJycnTWVyZ2UgbXVsdGlwbGUgc29ydGVkIGlucHV0cyBpbnRvIGEgc2luZ2xlIHNvcnRlZCBvdXRwdXQuCgogICAgU2ltaWxhciB0byBzb3J0ZWQoaXRlcnRvb2xzLmNoYWluKCppdGVyYWJsZXMpKSBidXQgcmV0dXJucyBhIGdlbmVyYXRvciwKICAgIGRvZXMgbm90IHB1bGwgdGhlIGRhdGEgaW50byBtZW1vcnkgYWxsIGF0IG9uY2UsIGFuZCBhc3N1bWVzIHRoYXQgZWFjaCBvZgogICAgdGhlIGlucHV0IHN0cmVhbXMgaXMgYWxyZWFkeSBzb3J0ZWQgKHNtYWxsZXN0IHRvIGxhcmdlc3QpLgoKICAgID4+PiBsaXN0KG1lcmdlKFsxLDMsNSw3XSwgWzAsMiw0LDhdLCBbNSwxMCwxNSwyMF0sIFtdLCBbMjVdKSkKICAgIFswLCAxLCAyLCAzLCA0LCA1LCA1LCA3LCA4LCAxMCwgMTUsIDIwLCAyNV0KCiAgICAnJycKICAgIF9oZWFwcG9wLCBfaGVhcHJlcGxhY2UsIF9TdG9wSXRlcmF0aW9uID0gaGVhcHBvcCwgaGVhcHJlcGxhY2UsIFN0b3BJdGVyYXRpb24KCiAgICBoID0gW10KICAgIGhfYXBwZW5kID0gaC5hcHBlbmQKICAgIGZvciBpdG51bSwgaXQgaW4gZW51bWVyYXRlKG1hcChpdGVyLCBpdGVyYWJsZXMpKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG5leHQgPSBpdC5fX25leHRfXwogICAgICAgICAgICBoX2FwcGVuZChbbmV4dCgpLCBpdG51bSwgbmV4dF0pCiAgICAgICAgZXhjZXB0IF9TdG9wSXRlcmF0aW9uOgogICAgICAgICAgICBwYXNzCiAgICBoZWFwaWZ5KGgpCgogICAgd2hpbGUgMToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHdoaWxlIDE6CiAgICAgICAgICAgICAgICB2LCBpdG51bSwgbmV4dCA9IHMgPSBoWzBdICAgIyByYWlzZXMgSW5kZXhFcnJvciB3aGVuIGggaXMgZW1wdHkKICAgICAgICAgICAgICAgIHlpZWxkIHYKICAgICAgICAgICAgICAgIHNbMF0gPSBuZXh0KCkgICAgICAgICAgICAgICAjIHJhaXNlcyBTdG9wSXRlcmF0aW9uIHdoZW4gZXhoYXVzdGVkCiAgICAgICAgICAgICAgICBfaGVhcHJlcGxhY2UoaCwgcykgICAgICAgICAgIyByZXN0b3JlIGhlYXAgY29uZGl0aW9uCiAgICAgICAgZXhjZXB0IF9TdG9wSXRlcmF0aW9uOgogICAgICAgICAgICBfaGVhcHBvcChoKSAgICAgICAgICAgICAgICAgICAgICMgcmVtb3ZlIGVtcHR5IGl0ZXJhdG9yCiAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgIHJldHVybgoKIyBFeHRlbmQgdGhlIGltcGxlbWVudGF0aW9ucyBvZiBuc21hbGxlc3QgYW5kIG5sYXJnZXN0IHRvIHVzZSBhIGtleT0gYXJndW1lbnQKX25zbWFsbGVzdCA9IG5zbWFsbGVzdApkZWYgbnNtYWxsZXN0KG4sIGl0ZXJhYmxlLCBrZXk9Tm9uZSk6CiAgICAiIiJGaW5kIHRoZSBuIHNtYWxsZXN0IGVsZW1lbnRzIGluIGEgZGF0YXNldC4KCiAgICBFcXVpdmFsZW50IHRvOiAgc29ydGVkKGl0ZXJhYmxlLCBrZXk9a2V5KVs6bl0KICAgICIiIgogICAgIyBTaG9ydC1jdXQgZm9yIG49PTEgaXMgdG8gdXNlIG1pbigpIHdoZW4gbGVuKGl0ZXJhYmxlKT4wCiAgICBpZiBuID09IDE6CiAgICAgICAgaXQgPSBpdGVyKGl0ZXJhYmxlKQogICAgICAgIGhlYWQgPSBsaXN0KGlzbGljZShpdCwgMSkpCiAgICAgICAgaWYgbm90IGhlYWQ6CiAgICAgICAgICAgIHJldHVybiBbXQogICAgICAgIGlmIGtleSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gW21pbihjaGFpbihoZWFkLCBpdCkpXQogICAgICAgIHJldHVybiBbbWluKGNoYWluKGhlYWQsIGl0KSwga2V5PWtleSldCgogICAgIyBXaGVuIG4+PXNpemUsIGl0J3MgZmFzdGVyIHRvIHVzZSBzb3J0ZWQoKQogICAgdHJ5OgogICAgICAgIHNpemUgPSBsZW4oaXRlcmFibGUpCiAgICBleGNlcHQgKFR5cGVFcnJvciwgQXR0cmlidXRlRXJyb3IpOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgaWYgbiA+PSBzaXplOgogICAgICAgICAgICByZXR1cm4gc29ydGVkKGl0ZXJhYmxlLCBrZXk9a2V5KVs6bl0KCiAgICAjIFdoZW4ga2V5IGlzIG5vbmUsIHVzZSBzaW1wbGVyIGRlY29yYXRpb24KICAgIGlmIGtleSBpcyBOb25lOgogICAgICAgIGl0ID0gemlwKGl0ZXJhYmxlLCBjb3VudCgpKSAgICAgICAgICAgICAgICAgICAgICAgICAjIGRlY29yYXRlCiAgICAgICAgcmVzdWx0ID0gX25zbWFsbGVzdChuLCBpdCkKICAgICAgICByZXR1cm4gW3JbMF0gZm9yIHIgaW4gcmVzdWx0XSAgICAgICAgICAgICAgICAgICAgICAgIyB1bmRlY29yYXRlCgogICAgIyBHZW5lcmFsIGNhc2UsIHNsb3dlc3QgbWV0aG9kCiAgICBpbjEsIGluMiA9IHRlZShpdGVyYWJsZSkKICAgIGl0ID0gemlwKG1hcChrZXksIGluMSksIGNvdW50KCksIGluMikgICAgICAgICAgICAgICAgICAgIyBkZWNvcmF0ZQogICAgcmVzdWx0ID0gX25zbWFsbGVzdChuLCBpdCkKICAgIHJldHVybiBbclsyXSBmb3IgciBpbiByZXN1bHRdICAgICAgICAgICAgICAgICAgICAgICAgICAgIyB1bmRlY29yYXRlCgoKX25sYXJnZXN0ID0gbmxhcmdlc3QKZGVmIG5sYXJnZXN0KG4sIGl0ZXJhYmxlLCBrZXk9Tm9uZSk6CiAgICAiIiJGaW5kIHRoZSBuIGxhcmdlc3QgZWxlbWVudHMgaW4gYSBkYXRhc2V0LgogICAgCiAgICAgRXF1aXZhbGVudCB0bzogIHNvcnRlZChpdGVyYWJsZSwga2V5PWtleSwgcmV2ZXJzZT1UcnVlKVs6bl0KCiAgICAgU2hvcnQtY3V0IGZvciBuPT0xIGlzIHRvIHVzZSBtYXgoKSB3aGVuIGxlbihpdGVyYWJsZSk+MAogICAgIiIiCiAgICBpZiBuID09IDE6CiAgICAgICAgaXQgPSBpdGVyKGl0ZXJhYmxlKQogICAgICAgIGhlYWQgPSBsaXN0KGlzbGljZShpdCwgMSkpCiAgICAgICAgaWYgbm90IGhlYWQ6CiAgICAgICAgICAgIHJldHVybiBbXQogICAgICAgIGlmIGtleSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gW21heChjaGFpbihoZWFkLCBpdCkpXQogICAgICAgIHJldHVybiBbbWF4KGNoYWluKGhlYWQsIGl0KSwga2V5PWtleSldCgogICAgIyBXaGVuIG4+PXNpemUsIGl0J3MgZmFzdGVyIHRvIHVzZSBzb3J0ZWQoKQogICAgdHJ5OgogICAgICAgIHNpemUgPSBsZW4oaXRlcmFibGUpCiAgICBleGNlcHQgKFR5cGVFcnJvciwgQXR0cmlidXRlRXJyb3IpOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgaWYgbiA+PSBzaXplOgogICAgICAgICAgICByZXR1cm4gc29ydGVkKGl0ZXJhYmxlLCBrZXk9a2V5LCByZXZlcnNlPVRydWUpWzpuXQoKICAgICMgV2hlbiBrZXkgaXMgbm9uZSwgdXNlIHNpbXBsZXIgZGVjb3JhdGlvbgogICAgaWYga2V5IGlzIE5vbmU6CiAgICAgICAgaXQgPSB6aXAoaXRlcmFibGUsIGNvdW50KDAsLTEpKSAgICAgICAgICAgICAgICAgICAgICMgZGVjb3JhdGUKICAgICAgICByZXN1bHQgPSBfbmxhcmdlc3QobiwgaXQpCiAgICAgICAgcmV0dXJuIFtyWzBdIGZvciByIGluIHJlc3VsdF0gICAgICAgICAgICAgICAgICAgICAgICMgdW5kZWNvcmF0ZQoKICAgICMgR2VuZXJhbCBjYXNlLCBzbG93ZXN0IG1ldGhvZAogICAgaW4xLCBpbjIgPSB0ZWUoaXRlcmFibGUpCiAgICBpdCA9IHppcChtYXAoa2V5LCBpbjEpLCBjb3VudCgwLC0xKSwgaW4yKSAgICAgICAgICAgICAgICMgZGVjb3JhdGUKICAgIHJlc3VsdCA9IF9ubGFyZ2VzdChuLCBpdCkKICAgIHJldHVybiBbclsyXSBmb3IgciBpbiByZXN1bHRdICAgICAgICAgICAgICAgICAgICAgICAgICAgIyB1bmRlY29yYXRlCg==',
'/Lib/socket.py':'IyBXcmFwcGVyIG1vZHVsZSBmb3IgX3NvY2tldCwgcHJvdmlkaW5nIHNvbWUgYWRkaXRpb25hbCBmYWNpbGl0aWVzDQojIGltcGxlbWVudGVkIGluIFB5dGhvbi4NCg0KIiIiXA0KVGhpcyBtb2R1bGUgcHJvdmlkZXMgc29ja2V0IG9wZXJhdGlvbnMgYW5kIHNvbWUgcmVsYXRlZCBmdW5jdGlvbnMuDQpPbiBVbml4LCBpdCBzdXBwb3J0cyBJUCAoSW50ZXJuZXQgUHJvdG9jb2wpIGFuZCBVbml4IGRvbWFpbiBzb2NrZXRzLg0KT24gb3RoZXIgc3lzdGVtcywgaXQgb25seSBzdXBwb3J0cyBJUC4gRnVuY3Rpb25zIHNwZWNpZmljIGZvciBhDQpzb2NrZXQgYXJlIGF2YWlsYWJsZSBhcyBtZXRob2RzIG9mIHRoZSBzb2NrZXQgb2JqZWN0Lg0KDQpGdW5jdGlvbnM6DQoNCnNvY2tldCgpIC0tIGNyZWF0ZSBhIG5ldyBzb2NrZXQgb2JqZWN0DQpzb2NrZXRwYWlyKCkgLS0gY3JlYXRlIGEgcGFpciBvZiBuZXcgc29ja2V0IG9iamVjdHMgWypdDQpmcm9tZmQoKSAtLSBjcmVhdGUgYSBzb2NrZXQgb2JqZWN0IGZyb20gYW4gb3BlbiBmaWxlIGRlc2NyaXB0b3IgWypdDQpmcm9tc2hhcmUoKSAtLSBjcmVhdGUgYSBzb2NrZXQgb2JqZWN0IGZyb20gZGF0YSByZWNlaXZlZCBmcm9tIHNvY2tldC5zaGFyZSgpIFsqXQ0KZ2V0aG9zdG5hbWUoKSAtLSByZXR1cm4gdGhlIGN1cnJlbnQgaG9zdG5hbWUNCmdldGhvc3RieW5hbWUoKSAtLSBtYXAgYSBob3N0bmFtZSB0byBpdHMgSVAgbnVtYmVyDQpnZXRob3N0YnlhZGRyKCkgLS0gbWFwIGFuIElQIG51bWJlciBvciBob3N0bmFtZSB0byBETlMgaW5mbw0KZ2V0c2VydmJ5bmFtZSgpIC0tIG1hcCBhIHNlcnZpY2UgbmFtZSBhbmQgYSBwcm90b2NvbCBuYW1lIHRvIGEgcG9ydCBudW1iZXINCmdldHByb3RvYnluYW1lKCkgLS0gbWFwIGEgcHJvdG9jb2wgbmFtZSAoZS5nLiAndGNwJykgdG8gYSBudW1iZXINCm50b2hzKCksIG50b2hsKCkgLS0gY29udmVydCAxNiwgMzIgYml0IGludCBmcm9tIG5ldHdvcmsgdG8gaG9zdCBieXRlIG9yZGVyDQpodG9ucygpLCBodG9ubCgpIC0tIGNvbnZlcnQgMTYsIDMyIGJpdCBpbnQgZnJvbSBob3N0IHRvIG5ldHdvcmsgYnl0ZSBvcmRlcg0KaW5ldF9hdG9uKCkgLS0gY29udmVydCBJUCBhZGRyIHN0cmluZyAoMTIzLjQ1LjY3Ljg5KSB0byAzMi1iaXQgcGFja2VkIGZvcm1hdA0KaW5ldF9udG9hKCkgLS0gY29udmVydCAzMi1iaXQgcGFja2VkIGZvcm1hdCBJUCB0byBzdHJpbmcgKDEyMy40NS42Ny44OSkNCnNvY2tldC5nZXRkZWZhdWx0dGltZW91dCgpIC0tIGdldCB0aGUgZGVmYXVsdCB0aW1lb3V0IHZhbHVlDQpzb2NrZXQuc2V0ZGVmYXVsdHRpbWVvdXQoKSAtLSBzZXQgdGhlIGRlZmF1bHQgdGltZW91dCB2YWx1ZQ0KY3JlYXRlX2Nvbm5lY3Rpb24oKSAtLSBjb25uZWN0cyB0byBhbiBhZGRyZXNzLCB3aXRoIGFuIG9wdGlvbmFsIHRpbWVvdXQgYW5kDQogICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsIHNvdXJjZSBhZGRyZXNzLg0KDQogWypdIG5vdCBhdmFpbGFibGUgb24gYWxsIHBsYXRmb3JtcyENCg0KU3BlY2lhbCBvYmplY3RzOg0KDQpTb2NrZXRUeXBlIC0tIHR5cGUgb2JqZWN0IGZvciBzb2NrZXQgb2JqZWN0cw0KZXJyb3IgLS0gZXhjZXB0aW9uIHJhaXNlZCBmb3IgSS9PIGVycm9ycw0KaGFzX2lwdjYgLS0gYm9vbGVhbiB2YWx1ZSBpbmRpY2F0aW5nIGlmIElQdjYgaXMgc3VwcG9ydGVkDQoNCkludGVnZXIgY29uc3RhbnRzOg0KDQpBRl9JTkVULCBBRl9VTklYIC0tIHNvY2tldCBkb21haW5zIChmaXJzdCBhcmd1bWVudCB0byBzb2NrZXQoKSBjYWxsKQ0KU09DS19TVFJFQU0sIFNPQ0tfREdSQU0sIFNPQ0tfUkFXIC0tIHNvY2tldCB0eXBlcyAoc2Vjb25kIGFyZ3VtZW50KQ0KDQpNYW55IG90aGVyIGNvbnN0YW50cyBtYXkgYmUgZGVmaW5lZDsgdGhlc2UgbWF5IGJlIHVzZWQgaW4gY2FsbHMgdG8NCnRoZSBzZXRzb2Nrb3B0KCkgYW5kIGdldHNvY2tvcHQoKSBtZXRob2RzLg0KIiIiDQoNCmltcG9ydCBfc29ja2V0DQpmcm9tIF9zb2NrZXQgaW1wb3J0ICoNCg0KaW1wb3J0IG9zLCBzeXMsIGlvDQoNCnRyeToNCiAgICBpbXBvcnQgZXJybm8NCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgICBlcnJubyA9IE5vbmUNCkVCQURGID0gZ2V0YXR0cihlcnJubywgJ0VCQURGJywgOSkNCkVBR0FJTiA9IGdldGF0dHIoZXJybm8sICdFQUdBSU4nLCAxMSkNCkVXT1VMREJMT0NLID0gZ2V0YXR0cihlcnJubywgJ0VXT1VMREJMT0NLJywgMTEpDQoNCl9fYWxsX18gPSBbImdldGZxZG4iLCAiY3JlYXRlX2Nvbm5lY3Rpb24iXQ0KX19hbGxfXy5leHRlbmQob3MuX2dldF9leHBvcnRzX2xpc3QoX3NvY2tldCkpDQoNCg0KX3JlYWxzb2NrZXQgPSBzb2NrZXQNCg0KIyBXU0EgZXJyb3IgY29kZXMNCmlmIHN5cy5wbGF0Zm9ybS5sb3dlcigpLnN0YXJ0c3dpdGgoIndpbiIpOg0KICAgIGVycm9yVGFiID0ge30NCiAgICBlcnJvclRhYlsxMDAwNF0gPSAiVGhlIG9wZXJhdGlvbiB3YXMgaW50ZXJydXB0ZWQuIg0KICAgIGVycm9yVGFiWzEwMDA5XSA9ICJBIGJhZCBmaWxlIGhhbmRsZSB3YXMgcGFzc2VkLiINCiAgICBlcnJvclRhYlsxMDAxM10gPSAiUGVybWlzc2lvbiBkZW5pZWQuIg0KICAgIGVycm9yVGFiWzEwMDE0XSA9ICJBIGZhdWx0IG9jY3VycmVkIG9uIHRoZSBuZXR3b3JrPz8iICMgV1NBRUZBVUxUDQogICAgZXJyb3JUYWJbMTAwMjJdID0gIkFuIGludmFsaWQgb3BlcmF0aW9uIHdhcyBhdHRlbXB0ZWQuIg0KICAgIGVycm9yVGFiWzEwMDM1XSA9ICJUaGUgc29ja2V0IG9wZXJhdGlvbiB3b3VsZCBibG9jayINCiAgICBlcnJvclRhYlsxMDAzNl0gPSAiQSBibG9ja2luZyBvcGVyYXRpb24gaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4iDQogICAgZXJyb3JUYWJbMTAwNDhdID0gIlRoZSBuZXR3b3JrIGFkZHJlc3MgaXMgaW4gdXNlLiINCiAgICBlcnJvclRhYlsxMDA1NF0gPSAiVGhlIGNvbm5lY3Rpb24gaGFzIGJlZW4gcmVzZXQuIg0KICAgIGVycm9yVGFiWzEwMDU4XSA9ICJUaGUgbmV0d29yayBoYXMgYmVlbiBzaHV0IGRvd24uIg0KICAgIGVycm9yVGFiWzEwMDYwXSA9ICJUaGUgb3BlcmF0aW9uIHRpbWVkIG91dC4iDQogICAgZXJyb3JUYWJbMTAwNjFdID0gIkNvbm5lY3Rpb24gcmVmdXNlZC4iDQogICAgZXJyb3JUYWJbMTAwNjNdID0gIlRoZSBuYW1lIGlzIHRvbyBsb25nLiINCiAgICBlcnJvclRhYlsxMDA2NF0gPSAiVGhlIGhvc3QgaXMgZG93bi4iDQogICAgZXJyb3JUYWJbMTAwNjVdID0gIlRoZSBob3N0IGlzIHVucmVhY2hhYmxlLiINCiAgICBfX2FsbF9fLmFwcGVuZCgiZXJyb3JUYWIiKQ0KDQoNCmNsYXNzIHNvY2tldChfc29ja2V0LnNvY2tldCk6DQoNCiAgICAiIiJBIHN1YmNsYXNzIG9mIF9zb2NrZXQuc29ja2V0IGFkZGluZyB0aGUgbWFrZWZpbGUoKSBtZXRob2QuIiIiDQoNCiAgICBfX3Nsb3RzX18gPSBbIl9fd2Vha3JlZl9fIiwgIl9pb19yZWZzIiwgIl9jbG9zZWQiXQ0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZhbWlseT1BRl9JTkVULCB0eXBlPVNPQ0tfU1RSRUFNLCBwcm90bz0wLCBmaWxlbm89Tm9uZSk6DQogICAgICAgIF9zb2NrZXQuc29ja2V0Ll9faW5pdF9fKHNlbGYsIGZhbWlseSwgdHlwZSwgcHJvdG8sIGZpbGVubykNCiAgICAgICAgc2VsZi5faW9fcmVmcyA9IDANCiAgICAgICAgc2VsZi5fY2xvc2VkID0gRmFsc2UNCg0KICAgIGRlZiBfX2VudGVyX18oc2VsZik6DQogICAgICAgIHJldHVybiBzZWxmDQoNCiAgICBkZWYgX19leGl0X18oc2VsZiwgKmFyZ3MpOg0KICAgICAgICBpZiBub3Qgc2VsZi5fY2xvc2VkOg0KICAgICAgICAgICAgc2VsZi5jbG9zZSgpDQoNCiAgICBkZWYgX19yZXByX18oc2VsZik6DQogICAgICAgICIiIldyYXAgX19yZXByX18oKSB0byByZXZlYWwgdGhlIHJlYWwgY2xhc3MgbmFtZS4iIiINCiAgICAgICAgcyA9IF9zb2NrZXQuc29ja2V0Ll9fcmVwcl9fKHNlbGYpDQogICAgICAgIGlmIHMuc3RhcnRzd2l0aCgiPHNvY2tldCBvYmplY3QiKToNCiAgICAgICAgICAgIHMgPSAiPCVzLiVzJXMlcyIgJSAoc2VsZi5fX2NsYXNzX18uX19tb2R1bGVfXywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldGF0dHIoc2VsZiwgJ19jbG9zZWQnLCBGYWxzZSkgYW5kICIgW2Nsb3NlZF0gIiBvciAiIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc1s3Ol0pDQogICAgICAgIHJldHVybiBzDQoNCiAgICBkZWYgX19nZXRzdGF0ZV9fKHNlbGYpOg0KICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbm5vdCBzZXJpYWxpemUgc29ja2V0IG9iamVjdCIpDQoNCiAgICBkZWYgZHVwKHNlbGYpOg0KICAgICAgICAiIiJkdXAoKSAtPiBzb2NrZXQgb2JqZWN0DQoNCiAgICAgICAgUmV0dXJuIGEgbmV3IHNvY2tldCBvYmplY3QgY29ubmVjdGVkIHRvIHRoZSBzYW1lIHN5c3RlbSByZXNvdXJjZS4NCiAgICAgICAgIiIiDQogICAgICAgIGZkID0gZHVwKHNlbGYuZmlsZW5vKCkpDQogICAgICAgIHNvY2sgPSBzZWxmLl9fY2xhc3NfXyhzZWxmLmZhbWlseSwgc2VsZi50eXBlLCBzZWxmLnByb3RvLCBmaWxlbm89ZmQpDQogICAgICAgIHNvY2suc2V0dGltZW91dChzZWxmLmdldHRpbWVvdXQoKSkNCiAgICAgICAgcmV0dXJuIHNvY2sNCg0KICAgIGRlZiBhY2NlcHQoc2VsZik6DQogICAgICAgICIiImFjY2VwdCgpIC0+IChzb2NrZXQgb2JqZWN0LCBhZGRyZXNzIGluZm8pDQoNCiAgICAgICAgV2FpdCBmb3IgYW4gaW5jb21pbmcgY29ubmVjdGlvbi4gIFJldHVybiBhIG5ldyBzb2NrZXQNCiAgICAgICAgcmVwcmVzZW50aW5nIHRoZSBjb25uZWN0aW9uLCBhbmQgdGhlIGFkZHJlc3Mgb2YgdGhlIGNsaWVudC4NCiAgICAgICAgRm9yIElQIHNvY2tldHMsIHRoZSBhZGRyZXNzIGluZm8gaXMgYSBwYWlyIChob3N0YWRkciwgcG9ydCkuDQogICAgICAgICIiIg0KICAgICAgICBmZCwgYWRkciA9IHNlbGYuX2FjY2VwdCgpDQogICAgICAgIHNvY2sgPSBzb2NrZXQoc2VsZi5mYW1pbHksIHNlbGYudHlwZSwgc2VsZi5wcm90bywgZmlsZW5vPWZkKQ0KICAgICAgICAjIElzc3VlICM3OTk1OiBpZiBubyBkZWZhdWx0IHRpbWVvdXQgaXMgc2V0IGFuZCB0aGUgbGlzdGVuaW5nDQogICAgICAgICMgc29ja2V0IGhhZCBhIChub24temVybykgdGltZW91dCwgZm9yY2UgdGhlIG5ldyBzb2NrZXQgaW4gYmxvY2tpbmcNCiAgICAgICAgIyBtb2RlIHRvIG92ZXJyaWRlIHBsYXRmb3JtLXNwZWNpZmljIHNvY2tldCBmbGFncyBpbmhlcml0YW5jZS4NCiAgICAgICAgaWYgZ2V0ZGVmYXVsdHRpbWVvdXQoKSBpcyBOb25lIGFuZCBzZWxmLmdldHRpbWVvdXQoKToNCiAgICAgICAgICAgIHNvY2suc2V0YmxvY2tpbmcoVHJ1ZSkNCiAgICAgICAgcmV0dXJuIHNvY2ssIGFkZHINCg0KICAgIGRlZiBtYWtlZmlsZShzZWxmLCBtb2RlPSJyIiwgYnVmZmVyaW5nPU5vbmUsICosDQogICAgICAgICAgICAgICAgIGVuY29kaW5nPU5vbmUsIGVycm9ycz1Ob25lLCBuZXdsaW5lPU5vbmUpOg0KICAgICAgICAiIiJtYWtlZmlsZSguLi4pIC0+IGFuIEkvTyBzdHJlYW0gY29ubmVjdGVkIHRvIHRoZSBzb2NrZXQNCg0KICAgICAgICBUaGUgYXJndW1lbnRzIGFyZSBhcyBmb3IgaW8ub3BlbigpIGFmdGVyIHRoZSBmaWxlbmFtZSwNCiAgICAgICAgZXhjZXB0IHRoZSBvbmx5IG1vZGUgY2hhcmFjdGVycyBzdXBwb3J0ZWQgYXJlICdyJywgJ3cnIGFuZCAnYicuDQogICAgICAgIFRoZSBzZW1hbnRpY3MgYXJlIHNpbWlsYXIgdG9vLiAgKFhYWCByZWZhY3RvciB0byBzaGFyZSBjb2RlPykNCiAgICAgICAgIiIiDQogICAgICAgIGZvciBjIGluIG1vZGU6DQogICAgICAgICAgICBpZiBjIG5vdCBpbiB7InIiLCAidyIsICJiIn06DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCBtb2RlICVyIChvbmx5IHIsIHcsIGIgYWxsb3dlZCkiKQ0KICAgICAgICB3cml0aW5nID0gInciIGluIG1vZGUNCiAgICAgICAgcmVhZGluZyA9ICJyIiBpbiBtb2RlIG9yIG5vdCB3cml0aW5nDQogICAgICAgIGFzc2VydCByZWFkaW5nIG9yIHdyaXRpbmcNCiAgICAgICAgYmluYXJ5ID0gImIiIGluIG1vZGUNCiAgICAgICAgcmF3bW9kZSA9ICIiDQogICAgICAgIGlmIHJlYWRpbmc6DQogICAgICAgICAgICByYXdtb2RlICs9ICJyIg0KICAgICAgICBpZiB3cml0aW5nOg0KICAgICAgICAgICAgcmF3bW9kZSArPSAidyINCiAgICAgICAgcmF3ID0gU29ja2V0SU8oc2VsZiwgcmF3bW9kZSkNCiAgICAgICAgc2VsZi5faW9fcmVmcyArPSAxDQogICAgICAgIGlmIGJ1ZmZlcmluZyBpcyBOb25lOg0KICAgICAgICAgICAgYnVmZmVyaW5nID0gLTENCiAgICAgICAgaWYgYnVmZmVyaW5nIDwgMDoNCiAgICAgICAgICAgIGJ1ZmZlcmluZyA9IGlvLkRFRkFVTFRfQlVGRkVSX1NJWkUNCiAgICAgICAgaWYgYnVmZmVyaW5nID09IDA6DQogICAgICAgICAgICBpZiBub3QgYmluYXJ5Og0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInVuYnVmZmVyZWQgc3RyZWFtcyBtdXN0IGJlIGJpbmFyeSIpDQogICAgICAgICAgICByZXR1cm4gcmF3DQogICAgICAgIGlmIHJlYWRpbmcgYW5kIHdyaXRpbmc6DQogICAgICAgICAgICBidWZmZXIgPSBpby5CdWZmZXJlZFJXUGFpcihyYXcsIHJhdywgYnVmZmVyaW5nKQ0KICAgICAgICBlbGlmIHJlYWRpbmc6DQogICAgICAgICAgICBidWZmZXIgPSBpby5CdWZmZXJlZFJlYWRlcihyYXcsIGJ1ZmZlcmluZykNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGFzc2VydCB3cml0aW5nDQogICAgICAgICAgICBidWZmZXIgPSBpby5CdWZmZXJlZFdyaXRlcihyYXcsIGJ1ZmZlcmluZykNCiAgICAgICAgaWYgYmluYXJ5Og0KICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcg0KICAgICAgICB0ZXh0ID0gaW8uVGV4dElPV3JhcHBlcihidWZmZXIsIGVuY29kaW5nLCBlcnJvcnMsIG5ld2xpbmUpDQogICAgICAgIHRleHQubW9kZSA9IG1vZGUNCiAgICAgICAgcmV0dXJuIHRleHQNCg0KICAgIGRlZiBfZGVjcmVmX3NvY2tldGlvcyhzZWxmKToNCiAgICAgICAgaWYgc2VsZi5faW9fcmVmcyA+IDA6DQogICAgICAgICAgICBzZWxmLl9pb19yZWZzIC09IDENCiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOg0KICAgICAgICAgICAgc2VsZi5jbG9zZSgpDQoNCiAgICBkZWYgX3JlYWxfY2xvc2Uoc2VsZiwgX3NzPV9zb2NrZXQuc29ja2V0KToNCiAgICAgICAgIyBUaGlzIGZ1bmN0aW9uIHNob3VsZCBub3QgcmVmZXJlbmNlIGFueSBnbG9iYWxzLiBTZWUgaXNzdWUgIzgwODE2NC4NCiAgICAgICAgX3NzLmNsb3NlKHNlbGYpDQoNCiAgICBkZWYgY2xvc2Uoc2VsZik6DQogICAgICAgICMgVGhpcyBmdW5jdGlvbiBzaG91bGQgbm90IHJlZmVyZW5jZSBhbnkgZ2xvYmFscy4gU2VlIGlzc3VlICM4MDgxNjQuDQogICAgICAgIHNlbGYuX2Nsb3NlZCA9IFRydWUNCiAgICAgICAgaWYgc2VsZi5faW9fcmVmcyA8PSAwOg0KICAgICAgICAgICAgc2VsZi5fcmVhbF9jbG9zZSgpDQoNCiAgICBkZWYgZGV0YWNoKHNlbGYpOg0KICAgICAgICAiIiJkZXRhY2goKSAtPiBmaWxlIGRlc2NyaXB0b3INCg0KICAgICAgICBDbG9zZSB0aGUgc29ja2V0IG9iamVjdCB3aXRob3V0IGNsb3NpbmcgdGhlIHVuZGVybHlpbmcgZmlsZSBkZXNjcmlwdG9yLg0KICAgICAgICBUaGUgb2JqZWN0IGNhbm5vdCBiZSB1c2VkIGFmdGVyIHRoaXMgY2FsbCwgYnV0IHRoZSBmaWxlIGRlc2NyaXB0b3INCiAgICAgICAgY2FuIGJlIHJldXNlZCBmb3Igb3RoZXIgcHVycG9zZXMuICBUaGUgZmlsZSBkZXNjcmlwdG9yIGlzIHJldHVybmVkLg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5fY2xvc2VkID0gVHJ1ZQ0KICAgICAgICByZXR1cm4gc3VwZXIoKS5kZXRhY2goKQ0KDQpkZWYgZnJvbWZkKGZkLCBmYW1pbHksIHR5cGUsIHByb3RvPTApOg0KICAgICIiIiBmcm9tZmQoZmQsIGZhbWlseSwgdHlwZVssIHByb3RvXSkgLT4gc29ja2V0IG9iamVjdA0KDQogICAgQ3JlYXRlIGEgc29ja2V0IG9iamVjdCBmcm9tIGEgZHVwbGljYXRlIG9mIHRoZSBnaXZlbiBmaWxlDQogICAgZGVzY3JpcHRvci4gIFRoZSByZW1haW5pbmcgYXJndW1lbnRzIGFyZSB0aGUgc2FtZSBhcyBmb3Igc29ja2V0KCkuDQogICAgIiIiDQogICAgbmZkID0gZHVwKGZkKQ0KICAgIHJldHVybiBzb2NrZXQoZmFtaWx5LCB0eXBlLCBwcm90bywgbmZkKQ0KDQppZiBoYXNhdHRyKF9zb2NrZXQuc29ja2V0LCAic2hhcmUiKToNCiAgICBkZWYgZnJvbXNoYXJlKGluZm8pOg0KICAgICAgICAiIiIgZnJvbXNoYXJlKGluZm8pIC0+IHNvY2tldCBvYmplY3QNCg0KICAgICAgICBDcmVhdGUgYSBzb2NrZXQgb2JqZWN0IGZyb20gYSB0aGUgYnl0ZXMgb2JqZWN0IHJldHVybmVkIGJ5DQogICAgICAgIHNvY2tldC5zaGFyZShwaWQpLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHNvY2tldCgwLCAwLCAwLCBpbmZvKQ0KDQppZiBoYXNhdHRyKF9zb2NrZXQsICJzb2NrZXRwYWlyIik6DQoNCiAgICBkZWYgc29ja2V0cGFpcihmYW1pbHk9Tm9uZSwgdHlwZT1TT0NLX1NUUkVBTSwgcHJvdG89MCk6DQogICAgICAgICIiInNvY2tldHBhaXIoW2ZhbWlseVssIHR5cGVbLCBwcm90b11dXSkgLT4gKHNvY2tldCBvYmplY3QsIHNvY2tldCBvYmplY3QpDQoNCiAgICAgICAgQ3JlYXRlIGEgcGFpciBvZiBzb2NrZXQgb2JqZWN0cyBmcm9tIHRoZSBzb2NrZXRzIHJldHVybmVkIGJ5IHRoZSBwbGF0Zm9ybQ0KICAgICAgICBzb2NrZXRwYWlyKCkgZnVuY3Rpb24uDQogICAgICAgIFRoZSBhcmd1bWVudHMgYXJlIHRoZSBzYW1lIGFzIGZvciBzb2NrZXQoKSBleGNlcHQgdGhlIGRlZmF1bHQgZmFtaWx5IGlzDQogICAgICAgIEFGX1VOSVggaWYgZGVmaW5lZCBvbiB0aGUgcGxhdGZvcm07IG90aGVyd2lzZSwgdGhlIGRlZmF1bHQgaXMgQUZfSU5FVC4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIGZhbWlseSBpcyBOb25lOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGZhbWlseSA9IEFGX1VOSVgNCiAgICAgICAgICAgIGV4Y2VwdCBOYW1lRXJyb3I6DQogICAgICAgICAgICAgICAgZmFtaWx5ID0gQUZfSU5FVA0KICAgICAgICBhLCBiID0gX3NvY2tldC5zb2NrZXRwYWlyKGZhbWlseSwgdHlwZSwgcHJvdG8pDQogICAgICAgIGEgPSBzb2NrZXQoZmFtaWx5LCB0eXBlLCBwcm90bywgYS5kZXRhY2goKSkNCiAgICAgICAgYiA9IHNvY2tldChmYW1pbHksIHR5cGUsIHByb3RvLCBiLmRldGFjaCgpKQ0KICAgICAgICByZXR1cm4gYSwgYg0KDQoNCl9ibG9ja2luZ19lcnJub3MgPSB7IEVBR0FJTiwgRVdPVUxEQkxPQ0sgfQ0KDQpjbGFzcyBTb2NrZXRJTyhpby5SYXdJT0Jhc2UpOg0KDQogICAgIiIiUmF3IEkvTyBpbXBsZW1lbnRhdGlvbiBmb3Igc3RyZWFtIHNvY2tldHMuDQoNCiAgICBUaGlzIGNsYXNzIHN1cHBvcnRzIHRoZSBtYWtlZmlsZSgpIG1ldGhvZCBvbiBzb2NrZXRzLiAgSXQgcHJvdmlkZXMNCiAgICB0aGUgcmF3IEkvTyBpbnRlcmZhY2Ugb24gdG9wIG9mIGEgc29ja2V0IG9iamVjdC4NCiAgICAiIiINCg0KICAgICMgT25lIG1pZ2h0IHdvbmRlciB3aHkgbm90IGxldCBGaWxlSU8gZG8gdGhlIGpvYiBpbnN0ZWFkLiAgVGhlcmUgYXJlIHR3bw0KICAgICMgbWFpbiByZWFzb25zIHdoeSBGaWxlSU8gaXMgbm90IGFkYXB0ZWQ6DQogICAgIyAtIGl0IHdvdWxkbid0IHdvcmsgdW5kZXIgV2luZG93cyAod2hlcmUgeW91IGNhbid0IHVzZWQgcmVhZCgpIGFuZA0KICAgICMgICB3cml0ZSgpIG9uIGEgc29ja2V0IGhhbmRsZSkNCiAgICAjIC0gaXQgd291bGRuJ3Qgd29yayB3aXRoIHNvY2tldCB0aW1lb3V0cyAoRmlsZUlPIHdvdWxkIGlnbm9yZSB0aGUNCiAgICAjICAgdGltZW91dCBhbmQgY29uc2lkZXIgdGhlIHNvY2tldCBub24tYmxvY2tpbmcpDQoNCiAgICAjIFhYWCBNb3JlIGRvY3MNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzb2NrLCBtb2RlKToNCiAgICAgICAgaWYgbW9kZSBub3QgaW4gKCJyIiwgInciLCAicnciLCAicmIiLCAid2IiLCAicndiIik6DQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIG1vZGU6ICVyIiAlIG1vZGUpDQogICAgICAgIGlvLlJhd0lPQmFzZS5fX2luaXRfXyhzZWxmKQ0KICAgICAgICBzZWxmLl9zb2NrID0gc29jaw0KICAgICAgICBpZiAiYiIgbm90IGluIG1vZGU6DQogICAgICAgICAgICBtb2RlICs9ICJiIg0KICAgICAgICBzZWxmLl9tb2RlID0gbW9kZQ0KICAgICAgICBzZWxmLl9yZWFkaW5nID0gInIiIGluIG1vZGUNCiAgICAgICAgc2VsZi5fd3JpdGluZyA9ICJ3IiBpbiBtb2RlDQogICAgICAgIHNlbGYuX3RpbWVvdXRfb2NjdXJyZWQgPSBGYWxzZQ0KDQogICAgZGVmIHJlYWRpbnRvKHNlbGYsIGIpOg0KICAgICAgICAiIiJSZWFkIHVwIHRvIGxlbihiKSBieXRlcyBpbnRvIHRoZSB3cml0YWJsZSBidWZmZXIgKmIqIGFuZCByZXR1cm4NCiAgICAgICAgdGhlIG51bWJlciBvZiBieXRlcyByZWFkLiAgSWYgdGhlIHNvY2tldCBpcyBub24tYmxvY2tpbmcgYW5kIG5vIGJ5dGVzDQogICAgICAgIGFyZSBhdmFpbGFibGUsIE5vbmUgaXMgcmV0dXJuZWQuDQoNCiAgICAgICAgSWYgKmIqIGlzIG5vbi1lbXB0eSwgYSAwIHJldHVybiB2YWx1ZSBpbmRpY2F0ZXMgdGhhdCB0aGUgY29ubmVjdGlvbg0KICAgICAgICB3YXMgc2h1dGRvd24gYXQgdGhlIG90aGVyIGVuZC4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuX2NoZWNrQ2xvc2VkKCkNCiAgICAgICAgc2VsZi5fY2hlY2tSZWFkYWJsZSgpDQogICAgICAgIGlmIHNlbGYuX3RpbWVvdXRfb2NjdXJyZWQ6DQogICAgICAgICAgICByYWlzZSBJT0Vycm9yKCJjYW5ub3QgcmVhZCBmcm9tIHRpbWVkIG91dCBvYmplY3QiKQ0KICAgICAgICB3aGlsZSBUcnVlOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9zb2NrLnJlY3ZfaW50byhiKQ0KICAgICAgICAgICAgZXhjZXB0IHRpbWVvdXQ6DQogICAgICAgICAgICAgICAgc2VsZi5fdGltZW91dF9vY2N1cnJlZCA9IFRydWUNCiAgICAgICAgICAgICAgICByYWlzZQ0KICAgICAgICAgICAgZXhjZXB0IEludGVycnVwdGVkRXJyb3I6DQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGV4Y2VwdCBlcnJvciBhcyBlOg0KICAgICAgICAgICAgICAgIGlmIGUuYXJnc1swXSBpbiBfYmxvY2tpbmdfZXJybm9zOg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQ0KICAgICAgICAgICAgICAgIHJhaXNlDQoNCiAgICBkZWYgd3JpdGUoc2VsZiwgYik6DQogICAgICAgICIiIldyaXRlIHRoZSBnaXZlbiBieXRlcyBvciBieXRlYXJyYXkgb2JqZWN0ICpiKiB0byB0aGUgc29ja2V0DQogICAgICAgIGFuZCByZXR1cm4gdGhlIG51bWJlciBvZiBieXRlcyB3cml0dGVuLiAgVGhpcyBjYW4gYmUgbGVzcyB0aGFuDQogICAgICAgIGxlbihiKSBpZiBub3QgYWxsIGRhdGEgY291bGQgYmUgd3JpdHRlbi4gIElmIHRoZSBzb2NrZXQgaXMNCiAgICAgICAgbm9uLWJsb2NraW5nIGFuZCBubyBieXRlcyBjb3VsZCBiZSB3cml0dGVuIE5vbmUgaXMgcmV0dXJuZWQuDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLl9jaGVja0Nsb3NlZCgpDQogICAgICAgIHNlbGYuX2NoZWNrV3JpdGFibGUoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXR1cm4gc2VsZi5fc29jay5zZW5kKGIpDQogICAgICAgIGV4Y2VwdCBlcnJvciBhcyBlOg0KICAgICAgICAgICAgIyBYWFggd2hhdCBhYm91dCBFSU5UUj8NCiAgICAgICAgICAgIGlmIGUuYXJnc1swXSBpbiBfYmxvY2tpbmdfZXJybm9zOg0KICAgICAgICAgICAgICAgIHJldHVybiBOb25lDQogICAgICAgICAgICByYWlzZQ0KDQogICAgZGVmIHJlYWRhYmxlKHNlbGYpOg0KICAgICAgICAiIiJUcnVlIGlmIHRoZSBTb2NrZXRJTyBpcyBvcGVuIGZvciByZWFkaW5nLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWRpbmcgYW5kIG5vdCBzZWxmLmNsb3NlZA0KDQogICAgZGVmIHdyaXRhYmxlKHNlbGYpOg0KICAgICAgICAiIiJUcnVlIGlmIHRoZSBTb2NrZXRJTyBpcyBvcGVuIGZvciB3cml0aW5nLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHNlbGYuX3dyaXRpbmcgYW5kIG5vdCBzZWxmLmNsb3NlZA0KDQogICAgZGVmIGZpbGVubyhzZWxmKToNCiAgICAgICAgIiIiUmV0dXJuIHRoZSBmaWxlIGRlc2NyaXB0b3Igb2YgdGhlIHVuZGVybHlpbmcgc29ja2V0Lg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5fY2hlY2tDbG9zZWQoKQ0KICAgICAgICByZXR1cm4gc2VsZi5fc29jay5maWxlbm8oKQ0KDQogICAgQHByb3BlcnR5DQogICAgZGVmIG5hbWUoc2VsZik6DQogICAgICAgIGlmIG5vdCBzZWxmLmNsb3NlZDoNCiAgICAgICAgICAgIHJldHVybiBzZWxmLmZpbGVubygpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXR1cm4gLTENCg0KICAgIEBwcm9wZXJ0eQ0KICAgIGRlZiBtb2RlKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZi5fbW9kZQ0KDQogICAgZGVmIGNsb3NlKHNlbGYpOg0KICAgICAgICAiIiJDbG9zZSB0aGUgU29ja2V0SU8gb2JqZWN0LiAgVGhpcyBkb2Vzbid0IGNsb3NlIHRoZSB1bmRlcmx5aW5nDQogICAgICAgIHNvY2tldCwgZXhjZXB0IGlmIGFsbCByZWZlcmVuY2VzIHRvIGl0IGhhdmUgZGlzYXBwZWFyZWQuDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLmNsb3NlZDoNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBpby5SYXdJT0Jhc2UuY2xvc2Uoc2VsZikNCiAgICAgICAgc2VsZi5fc29jay5fZGVjcmVmX3NvY2tldGlvcygpDQogICAgICAgIHNlbGYuX3NvY2sgPSBOb25lDQoNCg0KZGVmIGdldGZxZG4obmFtZT0nJyk6DQogICAgIiIiR2V0IGZ1bGx5IHF1YWxpZmllZCBkb21haW4gbmFtZSBmcm9tIG5hbWUuDQoNCiAgICBBbiBlbXB0eSBhcmd1bWVudCBpcyBpbnRlcnByZXRlZCBhcyBtZWFuaW5nIHRoZSBsb2NhbCBob3N0Lg0KDQogICAgRmlyc3QgdGhlIGhvc3RuYW1lIHJldHVybmVkIGJ5IGdldGhvc3RieWFkZHIoKSBpcyBjaGVja2VkLCB0aGVuDQogICAgcG9zc2libHkgZXhpc3RpbmcgYWxpYXNlcy4gSW4gY2FzZSBubyBGUUROIGlzIGF2YWlsYWJsZSwgaG9zdG5hbWUNCiAgICBmcm9tIGdldGhvc3RuYW1lKCkgaXMgcmV0dXJuZWQuDQogICAgIiIiDQogICAgbmFtZSA9IG5hbWUuc3RyaXAoKQ0KICAgIGlmIG5vdCBuYW1lIG9yIG5hbWUgPT0gJzAuMC4wLjAnOg0KICAgICAgICBuYW1lID0gZ2V0aG9zdG5hbWUoKQ0KICAgIHRyeToNCiAgICAgICAgaG9zdG5hbWUsIGFsaWFzZXMsIGlwYWRkcnMgPSBnZXRob3N0YnlhZGRyKG5hbWUpDQogICAgZXhjZXB0IGVycm9yOg0KICAgICAgICBwYXNzDQogICAgZWxzZToNCiAgICAgICAgYWxpYXNlcy5pbnNlcnQoMCwgaG9zdG5hbWUpDQogICAgICAgIGZvciBuYW1lIGluIGFsaWFzZXM6DQogICAgICAgICAgICBpZiAnLicgaW4gbmFtZToNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgbmFtZSA9IGhvc3RuYW1lDQogICAgcmV0dXJuIG5hbWUNCg0KDQpfR0xPQkFMX0RFRkFVTFRfVElNRU9VVCA9IG9iamVjdCgpDQoNCmRlZiBjcmVhdGVfY29ubmVjdGlvbihhZGRyZXNzLCB0aW1lb3V0PV9HTE9CQUxfREVGQVVMVF9USU1FT1VULA0KICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9hZGRyZXNzPU5vbmUpOg0KICAgICIiIkNvbm5lY3QgdG8gKmFkZHJlc3MqIGFuZCByZXR1cm4gdGhlIHNvY2tldCBvYmplY3QuDQoNCiAgICBDb252ZW5pZW5jZSBmdW5jdGlvbi4gIENvbm5lY3QgdG8gKmFkZHJlc3MqIChhIDItdHVwbGUgYGAoaG9zdCwNCiAgICBwb3J0KWBgKSBhbmQgcmV0dXJuIHRoZSBzb2NrZXQgb2JqZWN0LiAgUGFzc2luZyB0aGUgb3B0aW9uYWwNCiAgICAqdGltZW91dCogcGFyYW1ldGVyIHdpbGwgc2V0IHRoZSB0aW1lb3V0IG9uIHRoZSBzb2NrZXQgaW5zdGFuY2UNCiAgICBiZWZvcmUgYXR0ZW1wdGluZyB0byBjb25uZWN0LiAgSWYgbm8gKnRpbWVvdXQqIGlzIHN1cHBsaWVkLCB0aGUNCiAgICBnbG9iYWwgZGVmYXVsdCB0aW1lb3V0IHNldHRpbmcgcmV0dXJuZWQgYnkgOmZ1bmM6YGdldGRlZmF1bHR0aW1lb3V0YA0KICAgIGlzIHVzZWQuICBJZiAqc291cmNlX2FkZHJlc3MqIGlzIHNldCBpdCBtdXN0IGJlIGEgdHVwbGUgb2YgKGhvc3QsIHBvcnQpDQogICAgZm9yIHRoZSBzb2NrZXQgdG8gYmluZCBhcyBhIHNvdXJjZSBhZGRyZXNzIGJlZm9yZSBtYWtpbmcgdGhlIGNvbm5lY3Rpb24uDQogICAgQW4gaG9zdCBvZiAnJyBvciBwb3J0IDAgdGVsbHMgdGhlIE9TIHRvIHVzZSB0aGUgZGVmYXVsdC4NCiAgICAiIiINCg0KICAgIGhvc3QsIHBvcnQgPSBhZGRyZXNzDQogICAgZXJyID0gTm9uZQ0KICAgIGZvciByZXMgaW4gZ2V0YWRkcmluZm8oaG9zdCwgcG9ydCwgMCwgU09DS19TVFJFQU0pOg0KICAgICAgICBhZiwgc29ja3R5cGUsIHByb3RvLCBjYW5vbm5hbWUsIHNhID0gcmVzDQogICAgICAgIHNvY2sgPSBOb25lDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNvY2sgPSBzb2NrZXQoYWYsIHNvY2t0eXBlLCBwcm90bykNCiAgICAgICAgICAgIGlmIHRpbWVvdXQgaXMgbm90IF9HTE9CQUxfREVGQVVMVF9USU1FT1VUOg0KICAgICAgICAgICAgICAgIHNvY2suc2V0dGltZW91dCh0aW1lb3V0KQ0KICAgICAgICAgICAgaWYgc291cmNlX2FkZHJlc3M6DQogICAgICAgICAgICAgICAgc29jay5iaW5kKHNvdXJjZV9hZGRyZXNzKQ0KICAgICAgICAgICAgc29jay5jb25uZWN0KHNhKQ0KICAgICAgICAgICAgcmV0dXJuIHNvY2sNCg0KICAgICAgICBleGNlcHQgZXJyb3IgYXMgXzoNCiAgICAgICAgICAgIGVyciA9IF8NCiAgICAgICAgICAgIGlmIHNvY2sgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgc29jay5jbG9zZSgpDQoNCiAgICBpZiBlcnIgaXMgbm90IE5vbmU6DQogICAgICAgIHJhaXNlIGVycg0KICAgIGVsc2U6DQogICAgICAgIHJhaXNlIGVycm9yKCJnZXRhZGRyaW5mbyByZXR1cm5zIGFuIGVtcHR5IGxpc3QiKQ0K',
'/Lib/sysconfig.py':'IiIiQWNjZXNzIHRvIFB5dGhvbidzIGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb24uIiIiDQoNCmltcG9ydCBvcw0KaW1wb3J0IHJlDQppbXBvcnQgc3lzDQpmcm9tIG9zLnBhdGggaW1wb3J0IHBhcmRpciwgcmVhbHBhdGgNCg0KX19hbGxfXyA9IFsNCiAgICAnZ2V0X2NvbmZpZ19oX2ZpbGVuYW1lJywNCiAgICAnZ2V0X2NvbmZpZ192YXInLA0KICAgICdnZXRfY29uZmlnX3ZhcnMnLA0KICAgICdnZXRfbWFrZWZpbGVfZmlsZW5hbWUnLA0KICAgICdnZXRfcGF0aCcsDQogICAgJ2dldF9wYXRoX25hbWVzJywNCiAgICAnZ2V0X3BhdGhzJywNCiAgICAnZ2V0X3BsYXRmb3JtJywNCiAgICAnZ2V0X3B5dGhvbl92ZXJzaW9uJywNCiAgICAnZ2V0X3NjaGVtZV9uYW1lcycsDQogICAgJ3BhcnNlX2NvbmZpZ19oJywNCl0NCg0KX0lOU1RBTExfU0NIRU1FUyA9IHsNCiAgICAncG9zaXhfcHJlZml4Jzogew0KICAgICAgICAnc3RkbGliJzogJ3tpbnN0YWxsZWRfYmFzZX0vbGliL3B5dGhvbntweV92ZXJzaW9uX3Nob3J0fScsDQogICAgICAgICdwbGF0c3RkbGliJzogJ3twbGF0YmFzZX0vbGliL3B5dGhvbntweV92ZXJzaW9uX3Nob3J0fScsDQogICAgICAgICdwdXJlbGliJzogJ3tiYXNlfS9saWIvcHl0aG9ue3B5X3ZlcnNpb25fc2hvcnR9L3NpdGUtcGFja2FnZXMnLA0KICAgICAgICAncGxhdGxpYic6ICd7cGxhdGJhc2V9L2xpYi9weXRob257cHlfdmVyc2lvbl9zaG9ydH0vc2l0ZS1wYWNrYWdlcycsDQogICAgICAgICdpbmNsdWRlJzoNCiAgICAgICAgICAgICd7aW5zdGFsbGVkX2Jhc2V9L2luY2x1ZGUvcHl0aG9ue3B5X3ZlcnNpb25fc2hvcnR9e2FiaWZsYWdzfScsDQogICAgICAgICdwbGF0aW5jbHVkZSc6DQogICAgICAgICAgICAne2luc3RhbGxlZF9wbGF0YmFzZX0vaW5jbHVkZS9weXRob257cHlfdmVyc2lvbl9zaG9ydH17YWJpZmxhZ3N9JywNCiAgICAgICAgJ3NjcmlwdHMnOiAne2Jhc2V9L2JpbicsDQogICAgICAgICdkYXRhJzogJ3tiYXNlfScsDQogICAgICAgIH0sDQogICAgJ3Bvc2l4X2hvbWUnOiB7DQogICAgICAgICdzdGRsaWInOiAne2luc3RhbGxlZF9iYXNlfS9saWIvcHl0aG9uJywNCiAgICAgICAgJ3BsYXRzdGRsaWInOiAne2Jhc2V9L2xpYi9weXRob24nLA0KICAgICAgICAncHVyZWxpYic6ICd7YmFzZX0vbGliL3B5dGhvbicsDQogICAgICAgICdwbGF0bGliJzogJ3tiYXNlfS9saWIvcHl0aG9uJywNCiAgICAgICAgJ2luY2x1ZGUnOiAne2luc3RhbGxlZF9iYXNlfS9pbmNsdWRlL3B5dGhvbicsDQogICAgICAgICdwbGF0aW5jbHVkZSc6ICd7aW5zdGFsbGVkX2Jhc2V9L2luY2x1ZGUvcHl0aG9uJywNCiAgICAgICAgJ3NjcmlwdHMnOiAne2Jhc2V9L2JpbicsDQogICAgICAgICdkYXRhJzogJ3tiYXNlfScsDQogICAgICAgIH0sDQogICAgJ250Jzogew0KICAgICAgICAnc3RkbGliJzogJ3tpbnN0YWxsZWRfYmFzZX0vTGliJywNCiAgICAgICAgJ3BsYXRzdGRsaWInOiAne2Jhc2V9L0xpYicsDQogICAgICAgICdwdXJlbGliJzogJ3tiYXNlfS9MaWIvc2l0ZS1wYWNrYWdlcycsDQogICAgICAgICdwbGF0bGliJzogJ3tiYXNlfS9MaWIvc2l0ZS1wYWNrYWdlcycsDQogICAgICAgICdpbmNsdWRlJzogJ3tpbnN0YWxsZWRfYmFzZX0vSW5jbHVkZScsDQogICAgICAgICdwbGF0aW5jbHVkZSc6ICd7aW5zdGFsbGVkX2Jhc2V9L0luY2x1ZGUnLA0KICAgICAgICAnc2NyaXB0cyc6ICd7YmFzZX0vU2NyaXB0cycsDQogICAgICAgICdkYXRhJzogJ3tiYXNlfScsDQogICAgICAgIH0sDQogICAgJ29zMic6IHsNCiAgICAgICAgJ3N0ZGxpYic6ICd7aW5zdGFsbGVkX2Jhc2V9L0xpYicsDQogICAgICAgICdwbGF0c3RkbGliJzogJ3tiYXNlfS9MaWInLA0KICAgICAgICAncHVyZWxpYic6ICd7YmFzZX0vTGliL3NpdGUtcGFja2FnZXMnLA0KICAgICAgICAncGxhdGxpYic6ICd7YmFzZX0vTGliL3NpdGUtcGFja2FnZXMnLA0KICAgICAgICAnaW5jbHVkZSc6ICd7aW5zdGFsbGVkX2Jhc2V9L0luY2x1ZGUnLA0KICAgICAgICAncGxhdGluY2x1ZGUnOiAne2luc3RhbGxlZF9iYXNlfS9JbmNsdWRlJywNCiAgICAgICAgJ3NjcmlwdHMnOiAne2Jhc2V9L1NjcmlwdHMnLA0KICAgICAgICAnZGF0YSc6ICd7YmFzZX0nLA0KICAgICAgICB9LA0KICAgICdvczJfaG9tZSc6IHsNCiAgICAgICAgJ3N0ZGxpYic6ICd7dXNlcmJhc2V9L2xpYi9weXRob257cHlfdmVyc2lvbl9zaG9ydH0nLA0KICAgICAgICAncGxhdHN0ZGxpYic6ICd7dXNlcmJhc2V9L2xpYi9weXRob257cHlfdmVyc2lvbl9zaG9ydH0nLA0KICAgICAgICAncHVyZWxpYic6ICd7dXNlcmJhc2V9L2xpYi9weXRob257cHlfdmVyc2lvbl9zaG9ydH0vc2l0ZS1wYWNrYWdlcycsDQogICAgICAgICdwbGF0bGliJzogJ3t1c2VyYmFzZX0vbGliL3B5dGhvbntweV92ZXJzaW9uX3Nob3J0fS9zaXRlLXBhY2thZ2VzJywNCiAgICAgICAgJ2luY2x1ZGUnOiAne3VzZXJiYXNlfS9pbmNsdWRlL3B5dGhvbntweV92ZXJzaW9uX3Nob3J0fScsDQogICAgICAgICdzY3JpcHRzJzogJ3t1c2VyYmFzZX0vYmluJywNCiAgICAgICAgJ2RhdGEnOiAne3VzZXJiYXNlfScsDQogICAgICAgIH0sDQogICAgJ250X3VzZXInOiB7DQogICAgICAgICdzdGRsaWInOiAne3VzZXJiYXNlfS9QeXRob257cHlfdmVyc2lvbl9ub2RvdH0nLA0KICAgICAgICAncGxhdHN0ZGxpYic6ICd7dXNlcmJhc2V9L1B5dGhvbntweV92ZXJzaW9uX25vZG90fScsDQogICAgICAgICdwdXJlbGliJzogJ3t1c2VyYmFzZX0vUHl0aG9ue3B5X3ZlcnNpb25fbm9kb3R9L3NpdGUtcGFja2FnZXMnLA0KICAgICAgICAncGxhdGxpYic6ICd7dXNlcmJhc2V9L1B5dGhvbntweV92ZXJzaW9uX25vZG90fS9zaXRlLXBhY2thZ2VzJywNCiAgICAgICAgJ2luY2x1ZGUnOiAne3VzZXJiYXNlfS9QeXRob257cHlfdmVyc2lvbl9ub2RvdH0vSW5jbHVkZScsDQogICAgICAgICdzY3JpcHRzJzogJ3t1c2VyYmFzZX0vU2NyaXB0cycsDQogICAgICAgICdkYXRhJzogJ3t1c2VyYmFzZX0nLA0KICAgICAgICB9LA0KICAgICdwb3NpeF91c2VyJzogew0KICAgICAgICAnc3RkbGliJzogJ3t1c2VyYmFzZX0vbGliL3B5dGhvbntweV92ZXJzaW9uX3Nob3J0fScsDQogICAgICAgICdwbGF0c3RkbGliJzogJ3t1c2VyYmFzZX0vbGliL3B5dGhvbntweV92ZXJzaW9uX3Nob3J0fScsDQogICAgICAgICdwdXJlbGliJzogJ3t1c2VyYmFzZX0vbGliL3B5dGhvbntweV92ZXJzaW9uX3Nob3J0fS9zaXRlLXBhY2thZ2VzJywNCiAgICAgICAgJ3BsYXRsaWInOiAne3VzZXJiYXNlfS9saWIvcHl0aG9ue3B5X3ZlcnNpb25fc2hvcnR9L3NpdGUtcGFja2FnZXMnLA0KICAgICAgICAnaW5jbHVkZSc6ICd7dXNlcmJhc2V9L2luY2x1ZGUvcHl0aG9ue3B5X3ZlcnNpb25fc2hvcnR9JywNCiAgICAgICAgJ3NjcmlwdHMnOiAne3VzZXJiYXNlfS9iaW4nLA0KICAgICAgICAnZGF0YSc6ICd7dXNlcmJhc2V9JywNCiAgICAgICAgfSwNCiAgICAnb3N4X2ZyYW1ld29ya191c2VyJzogew0KICAgICAgICAnc3RkbGliJzogJ3t1c2VyYmFzZX0vbGliL3B5dGhvbicsDQogICAgICAgICdwbGF0c3RkbGliJzogJ3t1c2VyYmFzZX0vbGliL3B5dGhvbicsDQogICAgICAgICdwdXJlbGliJzogJ3t1c2VyYmFzZX0vbGliL3B5dGhvbi9zaXRlLXBhY2thZ2VzJywNCiAgICAgICAgJ3BsYXRsaWInOiAne3VzZXJiYXNlfS9saWIvcHl0aG9uL3NpdGUtcGFja2FnZXMnLA0KICAgICAgICAnaW5jbHVkZSc6ICd7dXNlcmJhc2V9L2luY2x1ZGUnLA0KICAgICAgICAnc2NyaXB0cyc6ICd7dXNlcmJhc2V9L2JpbicsDQogICAgICAgICdkYXRhJzogJ3t1c2VyYmFzZX0nLA0KICAgICAgICB9LA0KICAgIH0NCg0KX1NDSEVNRV9LRVlTID0gKCdzdGRsaWInLCAncGxhdHN0ZGxpYicsICdwdXJlbGliJywgJ3BsYXRsaWInLCAnaW5jbHVkZScsDQogICAgICAgICAgICAgICAgJ3NjcmlwdHMnLCAnZGF0YScpDQoNCiAjIEZJWE1FIGRvbid0IHJlbHkgb24gc3lzLnZlcnNpb24gaGVyZSwgaXRzIGZvcm1hdCBpcyBhbiBpbXBsZW1lbnRhdGlvbiBkZXRhaWwNCiAjIG9mIENQeXRob24sIHVzZSBzeXMudmVyc2lvbl9pbmZvIG9yIHN5cy5oZXh2ZXJzaW9uDQpfUFlfVkVSU0lPTiA9IHN5cy52ZXJzaW9uLnNwbGl0KClbMF0NCl9QWV9WRVJTSU9OX1NIT1JUID0gc3lzLnZlcnNpb25bOjNdDQpfUFlfVkVSU0lPTl9TSE9SVF9OT19ET1QgPSBfUFlfVkVSU0lPTlswXSArIF9QWV9WRVJTSU9OWzJdDQpfUFJFRklYID0gb3MucGF0aC5ub3JtcGF0aChzeXMucHJlZml4KQ0KX0JBU0VfUFJFRklYID0gb3MucGF0aC5ub3JtcGF0aChzeXMuYmFzZV9wcmVmaXgpDQpfRVhFQ19QUkVGSVggPSBvcy5wYXRoLm5vcm1wYXRoKHN5cy5leGVjX3ByZWZpeCkNCl9CQVNFX0VYRUNfUFJFRklYID0gb3MucGF0aC5ub3JtcGF0aChzeXMuYmFzZV9leGVjX3ByZWZpeCkNCl9DT05GSUdfVkFSUyA9IE5vbmUNCl9VU0VSX0JBU0UgPSBOb25lDQoNCg0KZGVmIF9zYWZlX3JlYWxwYXRoKHBhdGgpOg0KICAgIHRyeToNCiAgICAgICAgcmV0dXJuIHJlYWxwYXRoKHBhdGgpDQogICAgZXhjZXB0IE9TRXJyb3I6DQogICAgICAgIHJldHVybiBwYXRoDQoNCmlmIHN5cy5leGVjdXRhYmxlOg0KICAgIF9QUk9KRUNUX0JBU0UgPSBvcy5wYXRoLmRpcm5hbWUoX3NhZmVfcmVhbHBhdGgoc3lzLmV4ZWN1dGFibGUpKQ0KZWxzZToNCiAgICAjIHN5cy5leGVjdXRhYmxlIGNhbiBiZSBlbXB0eSBpZiBhcmd2WzBdIGhhcyBiZWVuIGNoYW5nZWQgYW5kIFB5dGhvbiBpcw0KICAgICMgdW5hYmxlIHRvIHJldHJpZXZlIHRoZSByZWFsIHByb2dyYW0gbmFtZQ0KICAgIF9QUk9KRUNUX0JBU0UgPSBfc2FmZV9yZWFscGF0aChvcy5nZXRjd2QoKSkNCg0KaWYgb3MubmFtZSA9PSAibnQiIGFuZCAicGNidWlsZCIgaW4gX1BST0pFQ1RfQkFTRVstODpdLmxvd2VyKCk6DQogICAgX1BST0pFQ1RfQkFTRSA9IF9zYWZlX3JlYWxwYXRoKG9zLnBhdGguam9pbihfUFJPSkVDVF9CQVNFLCBwYXJkaXIpKQ0KIyBQQy9WUzcuMQ0KaWYgb3MubmFtZSA9PSAibnQiIGFuZCAiXFxwY1xcdiIgaW4gX1BST0pFQ1RfQkFTRVstMTA6XS5sb3dlcigpOg0KICAgIF9QUk9KRUNUX0JBU0UgPSBfc2FmZV9yZWFscGF0aChvcy5wYXRoLmpvaW4oX1BST0pFQ1RfQkFTRSwgcGFyZGlyLCBwYXJkaXIpKQ0KIyBQQy9BTUQ2NA0KaWYgb3MubmFtZSA9PSAibnQiIGFuZCAiXFxwY2J1aWxkXFxhbWQ2NCIgaW4gX1BST0pFQ1RfQkFTRVstMTQ6XS5sb3dlcigpOg0KICAgIF9QUk9KRUNUX0JBU0UgPSBfc2FmZV9yZWFscGF0aChvcy5wYXRoLmpvaW4oX1BST0pFQ1RfQkFTRSwgcGFyZGlyLCBwYXJkaXIpKQ0KDQojIHNldCBmb3IgY3Jvc3MgYnVpbGRzDQppZiAiX1BZVEhPTl9QUk9KRUNUX0JBU0UiIGluIG9zLmVudmlyb246DQogICAgX1BST0pFQ1RfQkFTRSA9IF9zYWZlX3JlYWxwYXRoKG9zLmVudmlyb25bIl9QWVRIT05fUFJPSkVDVF9CQVNFIl0pDQoNCmRlZiBfaXNfcHl0aG9uX3NvdXJjZV9kaXIoZCk6DQogICAgZm9yIGZuIGluICgiU2V0dXAuZGlzdCIsICJTZXR1cC5sb2NhbCIpOg0KICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShvcy5wYXRoLmpvaW4oZCwgIk1vZHVsZXMiLCBmbikpOg0KICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICByZXR1cm4gRmFsc2UNCg0KX3N5c19ob21lID0gZ2V0YXR0cihzeXMsICdfaG9tZScsIE5vbmUpDQppZiBfc3lzX2hvbWUgYW5kIG9zLm5hbWUgPT0gJ250JyBhbmQgXA0KICAgIF9zeXNfaG9tZS5sb3dlcigpLmVuZHN3aXRoKCgncGNidWlsZCcsICdwY2J1aWxkXFxhbWQ2NCcpKToNCiAgICBfc3lzX2hvbWUgPSBvcy5wYXRoLmRpcm5hbWUoX3N5c19ob21lKQ0KICAgIGlmIF9zeXNfaG9tZS5lbmRzd2l0aCgncGNidWlsZCcpOiAgICMgbXVzdCBiZSBhbWQ2NA0KICAgICAgICBfc3lzX2hvbWUgPSBvcy5wYXRoLmRpcm5hbWUoX3N5c19ob21lKQ0KZGVmIGlzX3B5dGhvbl9idWlsZChjaGVja19ob21lPUZhbHNlKToNCiAgICBpZiBjaGVja19ob21lIGFuZCBfc3lzX2hvbWU6DQogICAgICAgIHJldHVybiBfaXNfcHl0aG9uX3NvdXJjZV9kaXIoX3N5c19ob21lKQ0KICAgIHJldHVybiBfaXNfcHl0aG9uX3NvdXJjZV9kaXIoX1BST0pFQ1RfQkFTRSkNCg0KX1BZVEhPTl9CVUlMRCA9IGlzX3B5dGhvbl9idWlsZChUcnVlKQ0KDQppZiBfUFlUSE9OX0JVSUxEOg0KICAgIGZvciBzY2hlbWUgaW4gKCdwb3NpeF9wcmVmaXgnLCAncG9zaXhfaG9tZScpOg0KICAgICAgICBfSU5TVEFMTF9TQ0hFTUVTW3NjaGVtZV1bJ2luY2x1ZGUnXSA9ICd7c3JjZGlyfS9JbmNsdWRlJw0KICAgICAgICBfSU5TVEFMTF9TQ0hFTUVTW3NjaGVtZV1bJ3BsYXRpbmNsdWRlJ10gPSAne3Byb2plY3RiYXNlfS8uJw0KDQoNCmRlZiBfc3Vic3RfdmFycyhzLCBsb2NhbF92YXJzKToNCiAgICB0cnk6DQogICAgICAgIHJldHVybiBzLmZvcm1hdCgqKmxvY2FsX3ZhcnMpDQogICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXR1cm4gcy5mb3JtYXQoKipvcy5lbnZpcm9uKQ0KICAgICAgICBleGNlcHQgS2V5RXJyb3IgYXMgdmFyOg0KICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoJ3slc30nICUgdmFyKQ0KDQpkZWYgX2V4dGVuZF9kaWN0KHRhcmdldF9kaWN0LCBvdGhlcl9kaWN0KToNCiAgICB0YXJnZXRfa2V5cyA9IHRhcmdldF9kaWN0LmtleXMoKQ0KICAgIGZvciBrZXksIHZhbHVlIGluIG90aGVyX2RpY3QuaXRlbXMoKToNCiAgICAgICAgaWYga2V5IGluIHRhcmdldF9rZXlzOg0KICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgdGFyZ2V0X2RpY3Rba2V5XSA9IHZhbHVlDQoNCg0KZGVmIF9leHBhbmRfdmFycyhzY2hlbWUsIHZhcnMpOg0KICAgIHJlcyA9IHt9DQogICAgaWYgdmFycyBpcyBOb25lOg0KICAgICAgICB2YXJzID0ge30NCiAgICBfZXh0ZW5kX2RpY3QodmFycywgZ2V0X2NvbmZpZ192YXJzKCkpDQoNCiAgICBmb3Iga2V5LCB2YWx1ZSBpbiBfSU5TVEFMTF9TQ0hFTUVTW3NjaGVtZV0uaXRlbXMoKToNCiAgICAgICAgaWYgb3MubmFtZSBpbiAoJ3Bvc2l4JywgJ250Jyk6DQogICAgICAgICAgICB2YWx1ZSA9IG9zLnBhdGguZXhwYW5kdXNlcih2YWx1ZSkNCiAgICAgICAgcmVzW2tleV0gPSBvcy5wYXRoLm5vcm1wYXRoKF9zdWJzdF92YXJzKHZhbHVlLCB2YXJzKSkNCiAgICByZXR1cm4gcmVzDQoNCg0KZGVmIF9nZXRfZGVmYXVsdF9zY2hlbWUoKToNCiAgICBpZiBvcy5uYW1lID09ICdwb3NpeCc6DQogICAgICAgICMgdGhlIGRlZmF1bHQgc2NoZW1lIGZvciBwb3NpeCBpcyBwb3NpeF9wcmVmaXgNCiAgICAgICAgcmV0dXJuICdwb3NpeF9wcmVmaXgnDQogICAgcmV0dXJuIG9zLm5hbWUNCg0KDQpkZWYgX2dldHVzZXJiYXNlKCk6DQogICAgZW52X2Jhc2UgPSBvcy5lbnZpcm9uLmdldCgiUFlUSE9OVVNFUkJBU0UiLCBOb25lKQ0KDQogICAgZGVmIGpvaW51c2VyKCphcmdzKToNCiAgICAgICAgcmV0dXJuIG9zLnBhdGguZXhwYW5kdXNlcihvcy5wYXRoLmpvaW4oKmFyZ3MpKQ0KDQogICAgIyB3aGF0IGFib3V0ICdvczJlbXgnLCAncmlzY29zJyA/DQogICAgaWYgb3MubmFtZSA9PSAibnQiOg0KICAgICAgICBiYXNlID0gb3MuZW52aXJvbi5nZXQoIkFQUERBVEEiKSBvciAifiINCiAgICAgICAgaWYgZW52X2Jhc2U6DQogICAgICAgICAgICByZXR1cm4gZW52X2Jhc2UNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBqb2ludXNlcihiYXNlLCAiUHl0aG9uIikNCg0KICAgIGlmIHN5cy5wbGF0Zm9ybSA9PSAiZGFyd2luIjoNCiAgICAgICAgZnJhbWV3b3JrID0gZ2V0X2NvbmZpZ192YXIoIlBZVEhPTkZSQU1FV09SSyIpDQogICAgICAgIGlmIGZyYW1ld29yazoNCiAgICAgICAgICAgIGlmIGVudl9iYXNlOg0KICAgICAgICAgICAgICAgIHJldHVybiBlbnZfYmFzZQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICByZXR1cm4gam9pbnVzZXIoIn4iLCAiTGlicmFyeSIsIGZyYW1ld29yaywgIiVkLiVkIiAlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5cy52ZXJzaW9uX2luZm9bOjJdKQ0KDQogICAgaWYgZW52X2Jhc2U6DQogICAgICAgIHJldHVybiBlbnZfYmFzZQ0KICAgIGVsc2U6DQogICAgICAgIHJldHVybiBqb2ludXNlcigifiIsICIubG9jYWwiKQ0KDQoNCmRlZiBfcGFyc2VfbWFrZWZpbGUoZmlsZW5hbWUsIHZhcnM9Tm9uZSk6DQogICAgIiIiUGFyc2UgYSBNYWtlZmlsZS1zdHlsZSBmaWxlLg0KDQogICAgQSBkaWN0aW9uYXJ5IGNvbnRhaW5pbmcgbmFtZS92YWx1ZSBwYWlycyBpcyByZXR1cm5lZC4gIElmIGFuDQogICAgb3B0aW9uYWwgZGljdGlvbmFyeSBpcyBwYXNzZWQgaW4gYXMgdGhlIHNlY29uZCBhcmd1bWVudCwgaXQgaXMNCiAgICB1c2VkIGluc3RlYWQgb2YgYSBuZXcgZGljdGlvbmFyeS4NCiAgICAiIiINCiAgICAjIFJlZ2V4ZXMgbmVlZGVkIGZvciBwYXJzaW5nIE1ha2VmaWxlIChhbmQgc2ltaWxhciBzeW50YXhlcywNCiAgICAjIGxpa2Ugb2xkLXN0eWxlIFNldHVwIGZpbGVzKS4NCiAgICBfdmFyaWFibGVfcnggPSByZS5jb21waWxlKCIoW2EtekEtWl1bYS16QS1aMC05X10rKVxzKj1ccyooLiopIikNCiAgICBfZmluZHZhcjFfcnggPSByZS5jb21waWxlKHIiXCRcKChbQS1aYS16XVtBLVphLXowLTlfXSopXCkiKQ0KICAgIF9maW5kdmFyMl9yeCA9IHJlLmNvbXBpbGUociJcJHsoW0EtWmEtel1bQS1aYS16MC05X10qKX0iKQ0KDQogICAgaWYgdmFycyBpcyBOb25lOg0KICAgICAgICB2YXJzID0ge30NCiAgICBkb25lID0ge30NCiAgICBub3Rkb25lID0ge30NCg0KICAgIHdpdGggb3BlbihmaWxlbmFtZSwgZXJyb3JzPSJzdXJyb2dhdGVlc2NhcGUiKSBhcyBmOg0KICAgICAgICBsaW5lcyA9IGYucmVhZGxpbmVzKCkNCg0KICAgIGZvciBsaW5lIGluIGxpbmVzOg0KICAgICAgICBpZiBsaW5lLnN0YXJ0c3dpdGgoJyMnKSBvciBsaW5lLnN0cmlwKCkgPT0gJyc6DQogICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICBtID0gX3ZhcmlhYmxlX3J4Lm1hdGNoKGxpbmUpDQogICAgICAgIGlmIG06DQogICAgICAgICAgICBuLCB2ID0gbS5ncm91cCgxLCAyKQ0KICAgICAgICAgICAgdiA9IHYuc3RyaXAoKQ0KICAgICAgICAgICAgIyBgJCQnIGlzIGEgbGl0ZXJhbCBgJCcgaW4gbWFrZQ0KICAgICAgICAgICAgdG1wdiA9IHYucmVwbGFjZSgnJCQnLCAnJykNCg0KICAgICAgICAgICAgaWYgIiQiIGluIHRtcHY6DQogICAgICAgICAgICAgICAgbm90ZG9uZVtuXSA9IHYNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICB2ID0gaW50KHYpDQogICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6DQogICAgICAgICAgICAgICAgICAgICMgaW5zZXJ0IGxpdGVyYWwgYCQnDQogICAgICAgICAgICAgICAgICAgIGRvbmVbbl0gPSB2LnJlcGxhY2UoJyQkJywgJyQnKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGRvbmVbbl0gPSB2DQoNCiAgICAjIGRvIHZhcmlhYmxlIGludGVycG9sYXRpb24gaGVyZQ0KICAgIHZhcmlhYmxlcyA9IGxpc3Qobm90ZG9uZS5rZXlzKCkpDQoNCiAgICAjIFZhcmlhYmxlcyB3aXRoIGEgJ1BZXycgcHJlZml4IGluIHRoZSBtYWtlZmlsZS4gVGhlc2UgbmVlZCB0bw0KICAgICMgYmUgbWFkZSBhdmFpbGFibGUgd2l0aG91dCB0aGF0IHByZWZpeCB0aHJvdWdoIHN5c2NvbmZpZy4NCiAgICAjIFNwZWNpYWwgY2FyZSBpcyBuZWVkZWQgdG8gZW5zdXJlIHRoYXQgdmFyaWFibGUgZXhwYW5zaW9uIHdvcmtzLCBldmVuDQogICAgIyBpZiB0aGUgZXhwYW5zaW9uIHVzZXMgdGhlIG5hbWUgd2l0aG91dCBhIHByZWZpeC4NCiAgICByZW5hbWVkX3ZhcmlhYmxlcyA9ICgnQ0ZMQUdTJywgJ0xERkxBR1MnLCAnQ1BQRkxBR1MnKQ0KDQogICAgd2hpbGUgbGVuKHZhcmlhYmxlcykgPiAwOg0KICAgICAgICBmb3IgbmFtZSBpbiB0dXBsZSh2YXJpYWJsZXMpOg0KICAgICAgICAgICAgdmFsdWUgPSBub3Rkb25lW25hbWVdDQogICAgICAgICAgICBtID0gX2ZpbmR2YXIxX3J4LnNlYXJjaCh2YWx1ZSkgb3IgX2ZpbmR2YXIyX3J4LnNlYXJjaCh2YWx1ZSkNCiAgICAgICAgICAgIGlmIG0gaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgbiA9IG0uZ3JvdXAoMSkNCiAgICAgICAgICAgICAgICBmb3VuZCA9IFRydWUNCiAgICAgICAgICAgICAgICBpZiBuIGluIGRvbmU6DQogICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBzdHIoZG9uZVtuXSkNCiAgICAgICAgICAgICAgICBlbGlmIG4gaW4gbm90ZG9uZToNCiAgICAgICAgICAgICAgICAgICAgIyBnZXQgaXQgb24gYSBzdWJzZXF1ZW50IHJvdW5kDQogICAgICAgICAgICAgICAgICAgIGZvdW5kID0gRmFsc2UNCiAgICAgICAgICAgICAgICBlbGlmIG4gaW4gb3MuZW52aXJvbjoNCiAgICAgICAgICAgICAgICAgICAgIyBkbyBpdCBsaWtlIG1ha2U6IGZhbGwgYmFjayB0byBlbnZpcm9ubWVudA0KICAgICAgICAgICAgICAgICAgICBpdGVtID0gb3MuZW52aXJvbltuXQ0KDQogICAgICAgICAgICAgICAgZWxpZiBuIGluIHJlbmFtZWRfdmFyaWFibGVzOg0KICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5zdGFydHN3aXRoKCdQWV8nKSBhbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVbMzpdIGluIHJlbmFtZWRfdmFyaWFibGVzKToNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSAiIg0KDQogICAgICAgICAgICAgICAgICAgIGVsaWYgJ1BZXycgKyBuIGluIG5vdGRvbmU6DQogICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IEZhbHNlDQoNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBzdHIoZG9uZVsnUFlfJyArIG5dKQ0KDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgZG9uZVtuXSA9IGl0ZW0gPSAiIg0KDQogICAgICAgICAgICAgICAgaWYgZm91bmQ6DQogICAgICAgICAgICAgICAgICAgIGFmdGVyID0gdmFsdWVbbS5lbmQoKTpdDQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWVbOm0uc3RhcnQoKV0gKyBpdGVtICsgYWZ0ZXINCiAgICAgICAgICAgICAgICAgICAgaWYgIiQiIGluIGFmdGVyOg0KICAgICAgICAgICAgICAgICAgICAgICAgbm90ZG9uZVtuYW1lXSA9IHZhbHVlDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBpbnQodmFsdWUpDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lW25hbWVdID0gdmFsdWUuc3RyaXAoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lW25hbWVdID0gdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcy5yZW1vdmUobmFtZSkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbmFtZS5zdGFydHN3aXRoKCdQWV8nKSBcDQogICAgICAgICAgICAgICAgICAgICAgICBhbmQgbmFtZVszOl0gaW4gcmVuYW1lZF92YXJpYWJsZXM6DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZVszOl0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBuYW1lIG5vdCBpbiBkb25lOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lW25hbWVdID0gdmFsdWUNCg0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAjIGJvZ3VzIHZhcmlhYmxlIHJlZmVyZW5jZSAoZS5nLiAicHJlZml4PSQvb3B0L3B5dGhvbiIpOw0KICAgICAgICAgICAgICAgICMganVzdCBkcm9wIGl0IHNpbmNlIHdlIGNhbid0IGRlYWwNCiAgICAgICAgICAgICAgICBkb25lW25hbWVdID0gdmFsdWUNCiAgICAgICAgICAgICAgICB2YXJpYWJsZXMucmVtb3ZlKG5hbWUpDQoNCiAgICAjIHN0cmlwIHNwdXJpb3VzIHNwYWNlcw0KICAgIGZvciBrLCB2IGluIGRvbmUuaXRlbXMoKToNCiAgICAgICAgaWYgaXNpbnN0YW5jZSh2LCBzdHIpOg0KICAgICAgICAgICAgZG9uZVtrXSA9IHYuc3RyaXAoKQ0KDQogICAgIyBzYXZlIHRoZSByZXN1bHRzIGluIHRoZSBnbG9iYWwgZGljdGlvbmFyeQ0KICAgIHZhcnMudXBkYXRlKGRvbmUpDQogICAgcmV0dXJuIHZhcnMNCg0KDQpkZWYgZ2V0X21ha2VmaWxlX2ZpbGVuYW1lKCk6DQogICAgIiIiUmV0dXJuIHRoZSBwYXRoIG9mIHRoZSBNYWtlZmlsZS4iIiINCiAgICBpZiBfUFlUSE9OX0JVSUxEOg0KICAgICAgICByZXR1cm4gb3MucGF0aC5qb2luKF9zeXNfaG9tZSBvciBfUFJPSkVDVF9CQVNFLCAiTWFrZWZpbGUiKQ0KICAgIGlmIGhhc2F0dHIoc3lzLCAnYWJpZmxhZ3MnKToNCiAgICAgICAgY29uZmlnX2Rpcl9uYW1lID0gJ2NvbmZpZy0lcyVzJyAlIChfUFlfVkVSU0lPTl9TSE9SVCwgc3lzLmFiaWZsYWdzKQ0KICAgIGVsc2U6DQogICAgICAgIGNvbmZpZ19kaXJfbmFtZSA9ICdjb25maWcnDQogICAgcmV0dXJuIG9zLnBhdGguam9pbihnZXRfcGF0aCgnc3RkbGliJyksIGNvbmZpZ19kaXJfbmFtZSwgJ01ha2VmaWxlJykNCg0KZGVmIF9nZW5lcmF0ZV9wb3NpeF92YXJzKCk6DQogICAgIiIiR2VuZXJhdGUgdGhlIFB5dGhvbiBtb2R1bGUgY29udGFpbmluZyBidWlsZC10aW1lIHZhcmlhYmxlcy4iIiINCiAgICBpbXBvcnQgcHByaW50DQogICAgdmFycyA9IHt9DQogICAgIyBsb2FkIHRoZSBpbnN0YWxsZWQgTWFrZWZpbGU6DQogICAgbWFrZWZpbGUgPSBnZXRfbWFrZWZpbGVfZmlsZW5hbWUoKQ0KICAgIHRyeToNCiAgICAgICAgX3BhcnNlX21ha2VmaWxlKG1ha2VmaWxlLCB2YXJzKQ0KICAgIGV4Y2VwdCBJT0Vycm9yIGFzIGU6DQogICAgICAgIG1zZyA9ICJpbnZhbGlkIFB5dGhvbiBpbnN0YWxsYXRpb246IHVuYWJsZSB0byBvcGVuICVzIiAlIG1ha2VmaWxlDQogICAgICAgIGlmIGhhc2F0dHIoZSwgInN0cmVycm9yIik6DQogICAgICAgICAgICBtc2cgPSBtc2cgKyAiICglcykiICUgZS5zdHJlcnJvcg0KICAgICAgICByYWlzZSBJT0Vycm9yKG1zZykNCiAgICAjIGxvYWQgdGhlIGluc3RhbGxlZCBweWNvbmZpZy5oOg0KICAgIGNvbmZpZ19oID0gZ2V0X2NvbmZpZ19oX2ZpbGVuYW1lKCkNCiAgICB0cnk6DQogICAgICAgIHdpdGggb3Blbihjb25maWdfaCkgYXMgZjoNCiAgICAgICAgICAgIHBhcnNlX2NvbmZpZ19oKGYsIHZhcnMpDQogICAgZXhjZXB0IElPRXJyb3IgYXMgZToNCiAgICAgICAgbXNnID0gImludmFsaWQgUHl0aG9uIGluc3RhbGxhdGlvbjogdW5hYmxlIHRvIG9wZW4gJXMiICUgY29uZmlnX2gNCiAgICAgICAgaWYgaGFzYXR0cihlLCAic3RyZXJyb3IiKToNCiAgICAgICAgICAgIG1zZyA9IG1zZyArICIgKCVzKSIgJSBlLnN0cmVycm9yDQogICAgICAgIHJhaXNlIElPRXJyb3IobXNnKQ0KICAgICMgT24gQUlYLCB0aGVyZSBhcmUgd3JvbmcgcGF0aHMgdG8gdGhlIGxpbmtlciBzY3JpcHRzIGluIHRoZSBNYWtlZmlsZQ0KICAgICMgLS0gdGhlc2UgcGF0aHMgYXJlIHJlbGF0aXZlIHRvIHRoZSBQeXRob24gc291cmNlLCBidXQgd2hlbiBpbnN0YWxsZWQNCiAgICAjIHRoZSBzY3JpcHRzIGFyZSBpbiBhbm90aGVyIGRpcmVjdG9yeS4NCiAgICBpZiBfUFlUSE9OX0JVSUxEOg0KICAgICAgICB2YXJzWydMRFNIQVJFRCddID0gdmFyc1snQkxEU0hBUkVEJ10NCg0KICAgIGRlc3RmaWxlID0gb3MucGF0aC5qb2luKG9zLnBhdGguZGlybmFtZShfX2ZpbGVfXyksICdfc3lzY29uZmlnZGF0YS5weScpDQogICAgd2l0aCBvcGVuKGRlc3RmaWxlLCAndycsIGVuY29kaW5nPSd1dGY4JykgYXMgZjoNCiAgICAgICAgZi53cml0ZSgnIyBzeXN0ZW0gY29uZmlndXJhdGlvbiBnZW5lcmF0ZWQgYW5kIHVzZWQgYnknDQogICAgICAgICAgICAgICAgJyB0aGUgc3lzY29uZmlnIG1vZHVsZVxuJykNCiAgICAgICAgZi53cml0ZSgnYnVpbGRfdGltZV92YXJzID0gJykNCiAgICAgICAgcHByaW50LnBwcmludCh2YXJzLCBzdHJlYW09ZikNCg0KZGVmIF9pbml0X3Bvc2l4KHZhcnMpOg0KICAgICIiIkluaXRpYWxpemUgdGhlIG1vZHVsZSBhcyBhcHByb3ByaWF0ZSBmb3IgUE9TSVggc3lzdGVtcy4iIiINCiAgICAjIF9zeXNjb25maWdkYXRhIGlzIGdlbmVyYXRlZCBhdCBidWlsZCB0aW1lLCBzZWUgX2dlbmVyYXRlX3Bvc2l4X3ZhcnMoKQ0KICAgIGZyb20gX3N5c2NvbmZpZ2RhdGEgaW1wb3J0IGJ1aWxkX3RpbWVfdmFycw0KICAgIHZhcnMudXBkYXRlKGJ1aWxkX3RpbWVfdmFycykNCg0KZGVmIF9pbml0X25vbl9wb3NpeCh2YXJzKToNCiAgICAiIiJJbml0aWFsaXplIHRoZSBtb2R1bGUgYXMgYXBwcm9wcmlhdGUgZm9yIE5UIiIiDQogICAgIyBzZXQgYmFzaWMgaW5zdGFsbCBkaXJlY3Rvcmllcw0KICAgIHZhcnNbJ0xJQkRFU1QnXSA9IGdldF9wYXRoKCdzdGRsaWInKQ0KICAgIHZhcnNbJ0JJTkxJQkRFU1QnXSA9IGdldF9wYXRoKCdwbGF0c3RkbGliJykNCiAgICB2YXJzWydJTkNMVURFUFknXSA9IGdldF9wYXRoKCdpbmNsdWRlJykNCiAgICB2YXJzWydTTyddID0gJy5weWQnDQogICAgdmFyc1snRVhFJ10gPSAnLmV4ZScNCiAgICB2YXJzWydWRVJTSU9OJ10gPSBfUFlfVkVSU0lPTl9TSE9SVF9OT19ET1QNCiAgICB2YXJzWydCSU5ESVInXSA9IG9zLnBhdGguZGlybmFtZShfc2FmZV9yZWFscGF0aChzeXMuZXhlY3V0YWJsZSkpDQoNCiMNCiMgcHVibGljIEFQSXMNCiMNCg0KDQpkZWYgcGFyc2VfY29uZmlnX2goZnAsIHZhcnM9Tm9uZSk6DQogICAgIiIiUGFyc2UgYSBjb25maWcuaC1zdHlsZSBmaWxlLg0KDQogICAgQSBkaWN0aW9uYXJ5IGNvbnRhaW5pbmcgbmFtZS92YWx1ZSBwYWlycyBpcyByZXR1cm5lZC4gIElmIGFuDQogICAgb3B0aW9uYWwgZGljdGlvbmFyeSBpcyBwYXNzZWQgaW4gYXMgdGhlIHNlY29uZCBhcmd1bWVudCwgaXQgaXMNCiAgICB1c2VkIGluc3RlYWQgb2YgYSBuZXcgZGljdGlvbmFyeS4NCiAgICAiIiINCiAgICBpZiB2YXJzIGlzIE5vbmU6DQogICAgICAgIHZhcnMgPSB7fQ0KICAgIGRlZmluZV9yeCA9IHJlLmNvbXBpbGUoIiNkZWZpbmUgKFtBLVpdW0EtWmEtejAtOV9dKykgKC4qKVxuIikNCiAgICB1bmRlZl9yeCA9IHJlLmNvbXBpbGUoIi9bKl0gI3VuZGVmIChbQS1aXVtBLVphLXowLTlfXSspIFsqXS9cbiIpDQoNCiAgICB3aGlsZSBUcnVlOg0KICAgICAgICBsaW5lID0gZnAucmVhZGxpbmUoKQ0KICAgICAgICBpZiBub3QgbGluZToNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIG0gPSBkZWZpbmVfcngubWF0Y2gobGluZSkNCiAgICAgICAgaWYgbToNCiAgICAgICAgICAgIG4sIHYgPSBtLmdyb3VwKDEsIDIpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgdiA9IGludCh2KQ0KICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgdmFyc1tuXSA9IHYNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIG0gPSB1bmRlZl9yeC5tYXRjaChsaW5lKQ0KICAgICAgICAgICAgaWYgbToNCiAgICAgICAgICAgICAgICB2YXJzW20uZ3JvdXAoMSldID0gMA0KICAgIHJldHVybiB2YXJzDQoNCg0KZGVmIGdldF9jb25maWdfaF9maWxlbmFtZSgpOg0KICAgICIiIlJldHVybiB0aGUgcGF0aCBvZiBweWNvbmZpZy5oLiIiIg0KICAgIGlmIF9QWVRIT05fQlVJTEQ6DQogICAgICAgIGlmIG9zLm5hbWUgPT0gIm50IjoNCiAgICAgICAgICAgIGluY19kaXIgPSBvcy5wYXRoLmpvaW4oX3N5c19ob21lIG9yIF9QUk9KRUNUX0JBU0UsICJQQyIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBpbmNfZGlyID0gX3N5c19ob21lIG9yIF9QUk9KRUNUX0JBU0UNCiAgICBlbHNlOg0KICAgICAgICBpbmNfZGlyID0gZ2V0X3BhdGgoJ3BsYXRpbmNsdWRlJykNCiAgICByZXR1cm4gb3MucGF0aC5qb2luKGluY19kaXIsICdweWNvbmZpZy5oJykNCg0KDQpkZWYgZ2V0X3NjaGVtZV9uYW1lcygpOg0KICAgICIiIlJldHVybiBhIHR1cGxlIGNvbnRhaW5pbmcgdGhlIHNjaGVtZXMgbmFtZXMuIiIiDQogICAgcmV0dXJuIHR1cGxlKHNvcnRlZChfSU5TVEFMTF9TQ0hFTUVTKSkNCg0KDQpkZWYgZ2V0X3BhdGhfbmFtZXMoKToNCiAgICAiIiJSZXR1cm4gYSB0dXBsZSBjb250YWluaW5nIHRoZSBwYXRocyBuYW1lcy4iIiINCiAgICByZXR1cm4gX1NDSEVNRV9LRVlTDQoNCg0KZGVmIGdldF9wYXRocyhzY2hlbWU9X2dldF9kZWZhdWx0X3NjaGVtZSgpLCB2YXJzPU5vbmUsIGV4cGFuZD1UcnVlKToNCiAgICAiIiJSZXR1cm4gYSBtYXBwaW5nIGNvbnRhaW5pbmcgYW4gaW5zdGFsbCBzY2hlbWUuDQoNCiAgICBgYHNjaGVtZWBgIGlzIHRoZSBpbnN0YWxsIHNjaGVtZSBuYW1lLiBJZiBub3QgcHJvdmlkZWQsIGl0IHdpbGwNCiAgICByZXR1cm4gdGhlIGRlZmF1bHQgc2NoZW1lIGZvciB0aGUgY3VycmVudCBwbGF0Zm9ybS4NCiAgICAiIiINCiAgICBpZiBleHBhbmQ6DQogICAgICAgIHJldHVybiBfZXhwYW5kX3ZhcnMoc2NoZW1lLCB2YXJzKQ0KICAgIGVsc2U6DQogICAgICAgIHJldHVybiBfSU5TVEFMTF9TQ0hFTUVTW3NjaGVtZV0NCg0KDQpkZWYgZ2V0X3BhdGgobmFtZSwgc2NoZW1lPV9nZXRfZGVmYXVsdF9zY2hlbWUoKSwgdmFycz1Ob25lLCBleHBhbmQ9VHJ1ZSk6DQogICAgIiIiUmV0dXJuIGEgcGF0aCBjb3JyZXNwb25kaW5nIHRvIHRoZSBzY2hlbWUuDQoNCiAgICBgYHNjaGVtZWBgIGlzIHRoZSBpbnN0YWxsIHNjaGVtZSBuYW1lLg0KICAgICIiIg0KICAgIHJldHVybiBnZXRfcGF0aHMoc2NoZW1lLCB2YXJzLCBleHBhbmQpW25hbWVdDQoNCg0KZGVmIGdldF9jb25maWdfdmFycygqYXJncyk6DQogICAgIiIiV2l0aCBubyBhcmd1bWVudHMsIHJldHVybiBhIGRpY3Rpb25hcnkgb2YgYWxsIGNvbmZpZ3VyYXRpb24NCiAgICB2YXJpYWJsZXMgcmVsZXZhbnQgZm9yIHRoZSBjdXJyZW50IHBsYXRmb3JtLg0KDQogICAgT24gVW5peCwgdGhpcyBtZWFucyBldmVyeSB2YXJpYWJsZSBkZWZpbmVkIGluIFB5dGhvbidzIGluc3RhbGxlZCBNYWtlZmlsZTsNCiAgICBPbiBXaW5kb3dzIGl0J3MgYSBtdWNoIHNtYWxsZXIgc2V0Lg0KDQogICAgV2l0aCBhcmd1bWVudHMsIHJldHVybiBhIGxpc3Qgb2YgdmFsdWVzIHRoYXQgcmVzdWx0IGZyb20gbG9va2luZyB1cA0KICAgIGVhY2ggYXJndW1lbnQgaW4gdGhlIGNvbmZpZ3VyYXRpb24gdmFyaWFibGUgZGljdGlvbmFyeS4NCiAgICAiIiINCiAgICBnbG9iYWwgX0NPTkZJR19WQVJTDQogICAgaWYgX0NPTkZJR19WQVJTIGlzIE5vbmU6DQogICAgICAgIF9DT05GSUdfVkFSUyA9IHt9DQogICAgICAgICMgTm9ybWFsaXplZCB2ZXJzaW9ucyBvZiBwcmVmaXggYW5kIGV4ZWNfcHJlZml4IGFyZSBoYW5keSB0byBoYXZlOw0KICAgICAgICAjIGluIGZhY3QsIHRoZXNlIGFyZSB0aGUgc3RhbmRhcmQgdmVyc2lvbnMgdXNlZCBtb3N0IHBsYWNlcyBpbiB0aGUNCiAgICAgICAgIyBEaXN0dXRpbHMuDQogICAgICAgIF9DT05GSUdfVkFSU1sncHJlZml4J10gPSBfUFJFRklYDQogICAgICAgIF9DT05GSUdfVkFSU1snZXhlY19wcmVmaXgnXSA9IF9FWEVDX1BSRUZJWA0KICAgICAgICBfQ09ORklHX1ZBUlNbJ3B5X3ZlcnNpb24nXSA9IF9QWV9WRVJTSU9ODQogICAgICAgIF9DT05GSUdfVkFSU1sncHlfdmVyc2lvbl9zaG9ydCddID0gX1BZX1ZFUlNJT05fU0hPUlQNCiAgICAgICAgX0NPTkZJR19WQVJTWydweV92ZXJzaW9uX25vZG90J10gPSBfUFlfVkVSU0lPTlswXSArIF9QWV9WRVJTSU9OWzJdDQogICAgICAgIF9DT05GSUdfVkFSU1snaW5zdGFsbGVkX2Jhc2UnXSA9IF9CQVNFX1BSRUZJWA0KICAgICAgICBfQ09ORklHX1ZBUlNbJ2Jhc2UnXSA9IF9QUkVGSVgNCiAgICAgICAgX0NPTkZJR19WQVJTWydpbnN0YWxsZWRfcGxhdGJhc2UnXSA9IF9CQVNFX0VYRUNfUFJFRklYDQogICAgICAgIF9DT05GSUdfVkFSU1sncGxhdGJhc2UnXSA9IF9FWEVDX1BSRUZJWA0KICAgICAgICBfQ09ORklHX1ZBUlNbJ3Byb2plY3RiYXNlJ10gPSBfUFJPSkVDVF9CQVNFDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIF9DT05GSUdfVkFSU1snYWJpZmxhZ3MnXSA9IHN5cy5hYmlmbGFncw0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICAjIHN5cy5hYmlmbGFncyBtYXkgbm90IGJlIGRlZmluZWQgb24gYWxsIHBsYXRmb3Jtcy4NCiAgICAgICAgICAgIF9DT05GSUdfVkFSU1snYWJpZmxhZ3MnXSA9ICcnDQoNCiAgICAgICAgaWYgb3MubmFtZSBpbiAoJ250JywgJ29zMicpOg0KICAgICAgICAgICAgX2luaXRfbm9uX3Bvc2l4KF9DT05GSUdfVkFSUykNCiAgICAgICAgaWYgb3MubmFtZSA9PSAncG9zaXgnOg0KICAgICAgICAgICAgX2luaXRfcG9zaXgoX0NPTkZJR19WQVJTKQ0KICAgICAgICAjIFNldHRpbmcgJ3VzZXJiYXNlJyBpcyBkb25lIGJlbG93IHRoZSBjYWxsIHRvIHRoZQ0KICAgICAgICAjIGluaXQgZnVuY3Rpb24gdG8gZW5hYmxlIHVzaW5nICdnZXRfY29uZmlnX3ZhcicgaW4NCiAgICAgICAgIyB0aGUgaW5pdC1mdW5jdGlvbi4NCiAgICAgICAgX0NPTkZJR19WQVJTWyd1c2VyYmFzZSddID0gX2dldHVzZXJiYXNlKCkNCg0KICAgICAgICAjIEFsd2F5cyBjb252ZXJ0IHNyY2RpciB0byBhbiBhYnNvbHV0ZSBwYXRoDQogICAgICAgIHNyY2RpciA9IF9DT05GSUdfVkFSUy5nZXQoJ3NyY2RpcicsIF9QUk9KRUNUX0JBU0UpDQogICAgICAgIGlmIG9zLm5hbWUgPT0gJ3Bvc2l4JzoNCiAgICAgICAgICAgIGlmIF9QWVRIT05fQlVJTEQ6DQogICAgICAgICAgICAgICAgIyBJZiBzcmNkaXIgaXMgYSByZWxhdGl2ZSBwYXRoICh0eXBpY2FsbHkgJy4nIG9yICcuLicpDQogICAgICAgICAgICAgICAgIyB0aGVuIGl0IHNob3VsZCBiZSBpbnRlcnByZXRlZCByZWxhdGl2ZSB0byB0aGUgZGlyZWN0b3J5DQogICAgICAgICAgICAgICAgIyBjb250YWluaW5nIE1ha2VmaWxlLg0KICAgICAgICAgICAgICAgIGJhc2UgPSBvcy5wYXRoLmRpcm5hbWUoZ2V0X21ha2VmaWxlX2ZpbGVuYW1lKCkpDQogICAgICAgICAgICAgICAgc3JjZGlyID0gb3MucGF0aC5qb2luKGJhc2UsIHNyY2RpcikNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgIyBzcmNkaXIgaXMgbm90IG1lYW5pbmdmdWwgc2luY2UgdGhlIGluc3RhbGxhdGlvbiBpcw0KICAgICAgICAgICAgICAgICMgc3ByZWFkIGFib3V0IHRoZSBmaWxlc3lzdGVtLiAgV2UgY2hvb3NlIHRoZQ0KICAgICAgICAgICAgICAgICMgZGlyZWN0b3J5IGNvbnRhaW5pbmcgdGhlIE1ha2VmaWxlIHNpbmNlIHdlIGtub3cgaXQNCiAgICAgICAgICAgICAgICAjIGV4aXN0cy4NCiAgICAgICAgICAgICAgICBzcmNkaXIgPSBvcy5wYXRoLmRpcm5hbWUoZ2V0X21ha2VmaWxlX2ZpbGVuYW1lKCkpDQogICAgICAgIF9DT05GSUdfVkFSU1snc3JjZGlyJ10gPSBfc2FmZV9yZWFscGF0aChzcmNkaXIpDQoNCiAgICAgICAgIyBPUyBYIHBsYXRmb3JtcyByZXF1aXJlIHNwZWNpYWwgY3VzdG9taXphdGlvbiB0byBoYW5kbGUNCiAgICAgICAgIyBtdWx0aS1hcmNoaXRlY3R1cmUsIG11bHRpLW9zLXZlcnNpb24gaW5zdGFsbGVycw0KICAgICAgICBpZiBzeXMucGxhdGZvcm0gPT0gJ2Rhcndpbic6DQogICAgICAgICAgICBpbXBvcnQgX29zeF9zdXBwb3J0DQogICAgICAgICAgICBfb3N4X3N1cHBvcnQuY3VzdG9taXplX2NvbmZpZ192YXJzKF9DT05GSUdfVkFSUykNCg0KICAgIGlmIGFyZ3M6DQogICAgICAgIHZhbHMgPSBbXQ0KICAgICAgICBmb3IgbmFtZSBpbiBhcmdzOg0KICAgICAgICAgICAgdmFscy5hcHBlbmQoX0NPTkZJR19WQVJTLmdldChuYW1lKSkNCiAgICAgICAgcmV0dXJuIHZhbHMNCiAgICBlbHNlOg0KICAgICAgICByZXR1cm4gX0NPTkZJR19WQVJTDQoNCg0KZGVmIGdldF9jb25maWdfdmFyKG5hbWUpOg0KICAgICIiIlJldHVybiB0aGUgdmFsdWUgb2YgYSBzaW5nbGUgdmFyaWFibGUgdXNpbmcgdGhlIGRpY3Rpb25hcnkgcmV0dXJuZWQgYnkNCiAgICAnZ2V0X2NvbmZpZ192YXJzKCknLg0KDQogICAgRXF1aXZhbGVudCB0byBnZXRfY29uZmlnX3ZhcnMoKS5nZXQobmFtZSkNCiAgICAiIiINCiAgICByZXR1cm4gZ2V0X2NvbmZpZ192YXJzKCkuZ2V0KG5hbWUpDQoNCg0KZGVmIGdldF9wbGF0Zm9ybSgpOg0KICAgICIiIlJldHVybiBhIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhlIGN1cnJlbnQgcGxhdGZvcm0uDQoNCiAgICBUaGlzIGlzIHVzZWQgbWFpbmx5IHRvIGRpc3Rpbmd1aXNoIHBsYXRmb3JtLXNwZWNpZmljIGJ1aWxkIGRpcmVjdG9yaWVzIGFuZA0KICAgIHBsYXRmb3JtLXNwZWNpZmljIGJ1aWx0IGRpc3RyaWJ1dGlvbnMuICBUeXBpY2FsbHkgaW5jbHVkZXMgdGhlIE9TIG5hbWUNCiAgICBhbmQgdmVyc2lvbiBhbmQgdGhlIGFyY2hpdGVjdHVyZSAoYXMgc3VwcGxpZWQgYnkgJ29zLnVuYW1lKCknKSwNCiAgICBhbHRob3VnaCB0aGUgZXhhY3QgaW5mb3JtYXRpb24gaW5jbHVkZWQgZGVwZW5kcyBvbiB0aGUgT1M7IGVnLiBmb3IgSVJJWA0KICAgIHRoZSBhcmNoaXRlY3R1cmUgaXNuJ3QgcGFydGljdWxhcmx5IGltcG9ydGFudCAoSVJJWCBvbmx5IHJ1bnMgb24gU0dJDQogICAgaGFyZHdhcmUpLCBidXQgZm9yIExpbnV4IHRoZSBrZXJuZWwgdmVyc2lvbiBpc24ndCBwYXJ0aWN1bGFybHkNCiAgICBpbXBvcnRhbnQuDQoNCiAgICBFeGFtcGxlcyBvZiByZXR1cm5lZCB2YWx1ZXM6DQogICAgICAgbGludXgtaTU4Ng0KICAgICAgIGxpbnV4LWFscGhhICg/KQ0KICAgICAgIHNvbGFyaXMtMi42LXN1bjR1DQogICAgICAgaXJpeC01LjMNCiAgICAgICBpcml4NjQtNi4yDQoNCiAgICBXaW5kb3dzIHdpbGwgcmV0dXJuIG9uZSBvZjoNCiAgICAgICB3aW4tYW1kNjQgKDY0Yml0IFdpbmRvd3Mgb24gQU1ENjQgKGFrYSB4ODZfNjQsIEludGVsNjQsIEVNNjRULCBldGMpDQogICAgICAgd2luLWlhNjQgKDY0Yml0IFdpbmRvd3Mgb24gSXRhbml1bSkNCiAgICAgICB3aW4zMiAoYWxsIG90aGVycyAtIHNwZWNpZmljYWxseSwgc3lzLnBsYXRmb3JtIGlzIHJldHVybmVkKQ0KDQogICAgRm9yIG90aGVyIG5vbi1QT1NJWCBwbGF0Zm9ybXMsIGN1cnJlbnRseSBqdXN0IHJldHVybnMgJ3N5cy5wbGF0Zm9ybScuDQogICAgIiIiDQogICAgaWYgb3MubmFtZSA9PSAnbnQnOg0KICAgICAgICAjIHNuaWZmIHN5cy52ZXJzaW9uIGZvciBhcmNoaXRlY3R1cmUuDQogICAgICAgIHByZWZpeCA9ICIgYml0ICgiDQogICAgICAgIGkgPSBzeXMudmVyc2lvbi5maW5kKHByZWZpeCkNCiAgICAgICAgaWYgaSA9PSAtMToNCiAgICAgICAgICAgIHJldHVybiBzeXMucGxhdGZvcm0NCiAgICAgICAgaiA9IHN5cy52ZXJzaW9uLmZpbmQoIikiLCBpKQ0KICAgICAgICBsb29rID0gc3lzLnZlcnNpb25baStsZW4ocHJlZml4KTpqXS5sb3dlcigpDQogICAgICAgIGlmIGxvb2sgPT0gJ2FtZDY0JzoNCiAgICAgICAgICAgIHJldHVybiAnd2luLWFtZDY0Jw0KICAgICAgICBpZiBsb29rID09ICdpdGFuaXVtJzoNCiAgICAgICAgICAgIHJldHVybiAnd2luLWlhNjQnDQogICAgICAgIHJldHVybiBzeXMucGxhdGZvcm0NCg0KICAgIGlmIG9zLm5hbWUgIT0gInBvc2l4IiBvciBub3QgaGFzYXR0cihvcywgJ3VuYW1lJyk6DQogICAgICAgICMgWFhYIHdoYXQgYWJvdXQgdGhlIGFyY2hpdGVjdHVyZT8gTlQgaXMgSW50ZWwgb3IgQWxwaGENCiAgICAgICAgcmV0dXJuIHN5cy5wbGF0Zm9ybQ0KDQogICAgIyBTZXQgZm9yIGNyb3NzIGJ1aWxkcyBleHBsaWNpdGx5DQogICAgaWYgIl9QWVRIT05fSE9TVF9QTEFURk9STSIgaW4gb3MuZW52aXJvbjoNCiAgICAgICAgcmV0dXJuIG9zLmVudmlyb25bIl9QWVRIT05fSE9TVF9QTEFURk9STSJdDQoNCiAgICAjIFRyeSB0byBkaXN0aW5ndWlzaCB2YXJpb3VzIGZsYXZvdXJzIG9mIFVuaXgNCiAgICBvc25hbWUsIGhvc3QsIHJlbGVhc2UsIHZlcnNpb24sIG1hY2hpbmUgPSBvcy51bmFtZSgpDQoNCiAgICAjIENvbnZlcnQgdGhlIE9TIG5hbWUgdG8gbG93ZXJjYXNlLCByZW1vdmUgJy8nIGNoYXJhY3RlcnMNCiAgICAjICh0byBhY2NvbW1vZGF0ZSBCU0QvT1MpLCBhbmQgdHJhbnNsYXRlIHNwYWNlcyAoZm9yICJQb3dlciBNYWNpbnRvc2giKQ0KICAgIG9zbmFtZSA9IG9zbmFtZS5sb3dlcigpLnJlcGxhY2UoJy8nLCAnJykNCiAgICBtYWNoaW5lID0gbWFjaGluZS5yZXBsYWNlKCcgJywgJ18nKQ0KICAgIG1hY2hpbmUgPSBtYWNoaW5lLnJlcGxhY2UoJy8nLCAnLScpDQoNCiAgICBpZiBvc25hbWVbOjVdID09ICJsaW51eCI6DQogICAgICAgICMgQXQgbGVhc3Qgb24gTGludXgvSW50ZWwsICdtYWNoaW5lJyBpcyB0aGUgcHJvY2Vzc29yIC0tDQogICAgICAgICMgaTM4NiwgZXRjLg0KICAgICAgICAjIFhYWCB3aGF0IGFib3V0IEFscGhhLCBTUEFSQywgZXRjPw0KICAgICAgICByZXR1cm4gICIlcy0lcyIgJSAob3NuYW1lLCBtYWNoaW5lKQ0KICAgIGVsaWYgb3NuYW1lWzo1XSA9PSAic3Vub3MiOg0KICAgICAgICBpZiByZWxlYXNlWzBdID49ICI1IjogICAgICAgICAgICMgU3VuT1MgNSA9PSBTb2xhcmlzIDINCiAgICAgICAgICAgIG9zbmFtZSA9ICJzb2xhcmlzIg0KICAgICAgICAgICAgcmVsZWFzZSA9ICIlZC4lcyIgJSAoaW50KHJlbGVhc2VbMF0pIC0gMywgcmVsZWFzZVsyOl0pDQogICAgICAgICAgICAjIFdlIGNhbid0IHVzZSAicGxhdGZvcm0uYXJjaGl0ZWN0dXJlKClbMF0iIGJlY2F1c2UgYQ0KICAgICAgICAgICAgIyBib290c3RyYXAgcHJvYmxlbS4gV2UgdXNlIGEgZGljdCB0byBnZXQgYW4gZXJyb3INCiAgICAgICAgICAgICMgaWYgc29tZSBzdXNwaWNpb3VzIGhhcHBlbnMuDQogICAgICAgICAgICBiaXRuZXNzID0gezIxNDc0ODM2NDc6IjMyYml0IiwgOTIyMzM3MjAzNjg1NDc3NTgwNzoiNjRiaXQifQ0KICAgICAgICAgICAgbWFjaGluZSArPSAiLiVzIiAlIGJpdG5lc3Nbc3lzLm1heHNpemVdDQogICAgICAgICMgZmFsbCB0aHJvdWdoIHRvIHN0YW5kYXJkIG9zbmFtZS1yZWxlYXNlLW1hY2hpbmUgcmVwcmVzZW50YXRpb24NCiAgICBlbGlmIG9zbmFtZVs6NF0gPT0gImlyaXgiOiAgICAgICAgICAgICAgIyBjb3VsZCBiZSAiaXJpeDY0IiENCiAgICAgICAgcmV0dXJuICIlcy0lcyIgJSAob3NuYW1lLCByZWxlYXNlKQ0KICAgIGVsaWYgb3NuYW1lWzozXSA9PSAiYWl4IjoNCiAgICAgICAgcmV0dXJuICIlcy0lcy4lcyIgJSAob3NuYW1lLCB2ZXJzaW9uLCByZWxlYXNlKQ0KICAgIGVsaWYgb3NuYW1lWzo2XSA9PSAiY3lnd2luIjoNCiAgICAgICAgb3NuYW1lID0gImN5Z3dpbiINCiAgICAgICAgcmVsX3JlID0gcmUuY29tcGlsZShyJ1tcZC5dKycpDQogICAgICAgIG0gPSByZWxfcmUubWF0Y2gocmVsZWFzZSkNCiAgICAgICAgaWYgbToNCiAgICAgICAgICAgIHJlbGVhc2UgPSBtLmdyb3VwKCkNCiAgICBlbGlmIG9zbmFtZVs6Nl0gPT0gImRhcndpbiI6DQogICAgICAgIGltcG9ydCBfb3N4X3N1cHBvcnQNCiAgICAgICAgb3NuYW1lLCByZWxlYXNlLCBtYWNoaW5lID0gX29zeF9zdXBwb3J0LmdldF9wbGF0Zm9ybV9vc3goDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9jb25maWdfdmFycygpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvc25hbWUsIHJlbGVhc2UsIG1hY2hpbmUpDQoNCiAgICByZXR1cm4gIiVzLSVzLSVzIiAlIChvc25hbWUsIHJlbGVhc2UsIG1hY2hpbmUpDQoNCg0KZGVmIGdldF9weXRob25fdmVyc2lvbigpOg0KICAgIHJldHVybiBfUFlfVkVSU0lPTl9TSE9SVA0KDQoNCmRlZiBfcHJpbnRfZGljdCh0aXRsZSwgZGF0YSk6DQogICAgZm9yIGluZGV4LCAoa2V5LCB2YWx1ZSkgaW4gZW51bWVyYXRlKHNvcnRlZChkYXRhLml0ZW1zKCkpKToNCiAgICAgICAgaWYgaW5kZXggPT0gMDoNCiAgICAgICAgICAgIHByaW50KCclczogJyAlICh0aXRsZSkpDQogICAgICAgIHByaW50KCdcdCVzID0gIiVzIicgJSAoa2V5LCB2YWx1ZSkpDQoNCg0KZGVmIF9tYWluKCk6DQogICAgIiIiRGlzcGxheSBhbGwgaW5mb3JtYXRpb24gc3lzY29uZmlnIGRldGFpbnMuIiIiDQogICAgaWYgJy0tZ2VuZXJhdGUtcG9zaXgtdmFycycgaW4gc3lzLmFyZ3Y6DQogICAgICAgIF9nZW5lcmF0ZV9wb3NpeF92YXJzKCkNCiAgICAgICAgcmV0dXJuDQogICAgcHJpbnQoJ1BsYXRmb3JtOiAiJXMiJyAlIGdldF9wbGF0Zm9ybSgpKQ0KICAgIHByaW50KCdQeXRob24gdmVyc2lvbjogIiVzIicgJSBnZXRfcHl0aG9uX3ZlcnNpb24oKSkNCiAgICBwcmludCgnQ3VycmVudCBpbnN0YWxsYXRpb24gc2NoZW1lOiAiJXMiJyAlIF9nZXRfZGVmYXVsdF9zY2hlbWUoKSkNCiAgICBwcmludCgpDQogICAgX3ByaW50X2RpY3QoJ1BhdGhzJywgZ2V0X3BhdGhzKCkpDQogICAgcHJpbnQoKQ0KICAgIF9wcmludF9kaWN0KCdWYXJpYWJsZXMnLCBnZXRfY29uZmlnX3ZhcnMoKSkNCg0KDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgIF9tYWluKCkNCg==',
'/Lib/_socket.py':'IiIiSW1wbGVtZW50YXRpb24gbW9kdWxlIGZvciBzb2NrZXQgb3BlcmF0aW9ucy4KClNlZSB0aGUgc29ja2V0IG1vZHVsZSBmb3IgZG9jdW1lbnRhdGlvbi4iIiIKCgpBRl9BUFBMRVRBTEsgPSAxNgoKQUZfREVDbmV0ID0gMTIKCkFGX0lORVQgPSAyCgpBRl9JTkVUNiA9IDIzCgpBRl9JUFggPSA2CgpBRl9JUkRBID0gMjYKCkFGX1NOQSA9IDExCgpBRl9VTlNQRUMgPSAwCgpBSV9BRERSQ09ORklHID0gMTAyNAoKQUlfQUxMID0gMjU2CgpBSV9DQU5PTk5BTUUgPSAyCgpBSV9OVU1FUklDSE9TVCA9IDQKCkFJX05VTUVSSUNTRVJWID0gOAoKQUlfUEFTU0lWRSA9IDEKCkFJX1Y0TUFQUEVEID0gMjA0OAoKQ0FQSSA9ICc8Y2Fwc3VsZSBvYmplY3QgIl9zb2NrZXQuQ0FQSSIgYXQgMHgwMEJDNEYzOD4nCgpFQUlfQUdBSU4gPSAxMTAwMgoKRUFJX0JBREZMQUdTID0gMTAwMjIKCkVBSV9GQUlMID0gMTEwMDMKCkVBSV9GQU1JTFkgPSAxMDA0NwoKRUFJX01FTU9SWSA9IDgKCkVBSV9OT0RBVEEgPSAxMTAwMQoKRUFJX05PTkFNRSA9IDExMDAxCgpFQUlfU0VSVklDRSA9IDEwMTA5CgpFQUlfU09DS1RZUEUgPSAxMDA0NAoKSU5BRERSX0FMTEhPU1RTX0dST1VQID0gLTUzNjg3MDkxMQoKSU5BRERSX0FOWSA9IDAKCklOQUREUl9CUk9BRENBU1QgPSAtMQoKSU5BRERSX0xPT1BCQUNLID0gMjEzMDcwNjQzMwoKSU5BRERSX01BWF9MT0NBTF9HUk9VUCA9IC01MzY4NzA2NTcKCklOQUREUl9OT05FID0gLTEKCklOQUREUl9VTlNQRUNfR1JPVVAgPSAtNTM2ODcwOTEyCgpJUFBPUlRfUkVTRVJWRUQgPSAxMDI0CgpJUFBPUlRfVVNFUlJFU0VSVkVEID0gNTAwMAoKSVBQUk9UT19JQ01QID0gMQoKSVBQUk9UT19JUCA9IDAKCklQUFJPVE9fUkFXID0gMjU1CgpJUFBST1RPX1RDUCA9IDYKCklQUFJPVE9fVURQID0gMTcKCklQVjZfQ0hFQ0tTVU0gPSAyNgoKSVBWNl9ET05URlJBRyA9IDE0CgpJUFY2X0hPUExJTUlUID0gMjEKCklQVjZfSE9QT1BUUyA9IDEKCklQVjZfSk9JTl9HUk9VUCA9IDEyCgpJUFY2X0xFQVZFX0dST1VQID0gMTMKCklQVjZfTVVMVElDQVNUX0hPUFMgPSAxMAoKSVBWNl9NVUxUSUNBU1RfSUYgPSA5CgpJUFY2X01VTFRJQ0FTVF9MT09QID0gMTEKCklQVjZfUEtUSU5GTyA9IDE5CgpJUFY2X1JFQ1ZSVEhEUiA9IDM4CgpJUFY2X1JFQ1ZUQ0xBU1MgPSA0MAoKSVBWNl9SVEhEUiA9IDMyCgpJUFY2X1RDTEFTUyA9IDM5CgpJUFY2X1VOSUNBU1RfSE9QUyA9IDQKCklQVjZfVjZPTkxZID0gMjcKCklQX0FERF9NRU1CRVJTSElQID0gMTIKCklQX0RST1BfTUVNQkVSU0hJUCA9IDEzCgpJUF9IRFJJTkNMID0gMgoKSVBfTVVMVElDQVNUX0lGID0gOQoKSVBfTVVMVElDQVNUX0xPT1AgPSAxMQoKSVBfTVVMVElDQVNUX1RUTCA9IDEwCgpJUF9PUFRJT05TID0gMQoKSVBfUkVDVkRTVEFERFIgPSAyNQoKSVBfVE9TID0gMwoKSVBfVFRMID0gNAoKTVNHX0JDQVNUID0gMTAyNAoKTVNHX0NUUlVOQyA9IDUxMgoKTVNHX0RPTlRST1VURSA9IDQKCk1TR19NQ0FTVCA9IDIwNDgKCk1TR19PT0IgPSAxCgpNU0dfUEVFSyA9IDIKCk1TR19UUlVOQyA9IDI1NgoKTklfREdSQU0gPSAxNgoKTklfTUFYSE9TVCA9IDEwMjUKCk5JX01BWFNFUlYgPSAzMgoKTklfTkFNRVJFUUQgPSA0CgpOSV9OT0ZRRE4gPSAxCgpOSV9OVU1FUklDSE9TVCA9IDIKCk5JX05VTUVSSUNTRVJWID0gOAoKUkNWQUxMX01BWCA9IDMKClJDVkFMTF9PRkYgPSAwCgpSQ1ZBTExfT04gPSAxCgpSQ1ZBTExfU09DS0VUTEVWRUxPTkxZID0gMgoKU0hVVF9SRCA9IDAKClNIVVRfUkRXUiA9IDIKClNIVVRfV1IgPSAxCgpTSU9fS0VFUEFMSVZFX1ZBTFMgPSAyNTUwMTM2ODM2CgpTSU9fUkNWQUxMID0gMjU1MDEzNjgzMwoKU09DS19ER1JBTSA9IDIKClNPQ0tfUkFXID0gMwoKU09DS19SRE0gPSA0CgpTT0NLX1NFUVBBQ0tFVCA9IDUKClNPQ0tfU1RSRUFNID0gMQoKU09MX0lQID0gMAoKU09MX1NPQ0tFVCA9IDY1NTM1CgpTT0xfVENQID0gNgoKU09MX1VEUCA9IDE3CgpTT01BWENPTk4gPSAyMTQ3NDgzNjQ3CgpTT19BQ0NFUFRDT05OID0gMgoKU09fQlJPQURDQVNUID0gMzIKClNPX0RFQlVHID0gMQoKU09fRE9OVFJPVVRFID0gMTYKClNPX0VSUk9SID0gNDEwMwoKU09fRVhDTFVTSVZFQUREUlVTRSA9IC01CgpTT19LRUVQQUxJVkUgPSA4CgpTT19MSU5HRVIgPSAxMjgKClNPX09PQklOTElORSA9IDI1NgoKU09fUkNWQlVGID0gNDA5OAoKU09fUkNWTE9XQVQgPSA0MTAwCgpTT19SQ1ZUSU1FTyA9IDQxMDIKClNPX1JFVVNFQUREUiA9IDQKClNPX1NOREJVRiA9IDQwOTcKClNPX1NORExPV0FUID0gNDA5OQoKU09fU05EVElNRU8gPSA0MTAxCgpTT19UWVBFID0gNDEwNAoKU09fVVNFTE9PUEJBQ0sgPSA2NAoKY2xhc3MgU29ja2V0VHlwZToKICAgIHBhc3MKClRDUF9NQVhTRUcgPSA0CgpUQ1BfTk9ERUxBWSA9IDEKCl9fbG9hZGVyX18gPSAnPF9mcm96ZW5faW1wb3J0bGliLkV4dGVuc2lvbkZpbGVMb2FkZXIgb2JqZWN0IGF0IDB4MDBDQTJEOTA+JwoKZGVmIGR1cCgqYXJncywqKmt3KToKICAgICIiImR1cChpbnRlZ2VyKSAtPiBpbnRlZ2VyICAgIAogICAgRHVwbGljYXRlIGFuIGludGVnZXIgc29ja2V0IGZpbGUgZGVzY3JpcHRvci4gIFRoaXMgaXMgbGlrZSBvcy5kdXAoKSwgYnV0IGZvcgogICAgc29ja2V0czsgb24gc29tZSBwbGF0Zm9ybXMgb3MuZHVwKCkgd29uJ3Qgd29yayBmb3Igc29ja2V0IGZpbGUgZGVzY3JpcHRvcnMuIiIiCiAgICBwYXNzCgpjbGFzcyBlcnJvcjoKICAgIHBhc3MKCmNsYXNzIGdhaWVycm9yOgogICAgcGFzcwoKZGVmIGdldGFkZHJpbmZvKCphcmdzLCoqa3cpOgogICAgIiIiZ2V0YWRkcmluZm8oaG9zdCwgcG9ydCBbLCBmYW1pbHksIHNvY2t0eXBlLCBwcm90bywgZmxhZ3NdKSAgICAgICAgLT4gbGlzdCBvZiAoZmFtaWx5LCBzb2NrdHlwZSwgcHJvdG8sIGNhbm9ubmFtZSwgc29ja2FkZHIpCiAgICAKICAgIFJlc29sdmUgaG9zdCBhbmQgcG9ydCBpbnRvIGFkZHJpbmZvIHN0cnVjdC4iIiIKICAgIHBhc3MKCmRlZiBnZXRkZWZhdWx0dGltZW91dCgqYXJncywqKmt3KToKICAgICIiImdldGRlZmF1bHR0aW1lb3V0KCkgLT4gdGltZW91dCAgICAKICAgIFJldHVybnMgdGhlIGRlZmF1bHQgdGltZW91dCBpbiBzZWNvbmRzIChmbG9hdCkgZm9yIG5ldyBzb2NrZXQgb2JqZWN0cy4KICAgIEEgdmFsdWUgb2YgTm9uZSBpbmRpY2F0ZXMgdGhhdCBuZXcgc29ja2V0IG9iamVjdHMgaGF2ZSBubyB0aW1lb3V0LgogICAgV2hlbiB0aGUgc29ja2V0IG1vZHVsZSBpcyBmaXJzdCBpbXBvcnRlZCwgdGhlIGRlZmF1bHQgaXMgTm9uZS4iIiIKICAgIHBhc3MKCmRlZiBnZXRob3N0YnlhZGRyKCphcmdzLCoqa3cpOgogICAgIiIiZ2V0aG9zdGJ5YWRkcihob3N0KSAtPiAobmFtZSwgYWxpYXNsaXN0LCBhZGRyZXNzbGlzdCkgICAgCiAgICBSZXR1cm4gdGhlIHRydWUgaG9zdCBuYW1lLCBhIGxpc3Qgb2YgYWxpYXNlcywgYW5kIGEgbGlzdCBvZiBJUCBhZGRyZXNzZXMsCiAgICBmb3IgYSBob3N0LiAgVGhlIGhvc3QgYXJndW1lbnQgaXMgYSBzdHJpbmcgZ2l2aW5nIGEgaG9zdCBuYW1lIG9yIElQIG51bWJlci4iIiIKICAgIHBhc3MKCmRlZiBnZXRob3N0YnluYW1lKCphcmdzLCoqa3cpOgogICAgIiIiZ2V0aG9zdGJ5bmFtZShob3N0KSAtPiBhZGRyZXNzICAgIAogICAgUmV0dXJuIHRoZSBJUCBhZGRyZXNzIChhIHN0cmluZyBvZiB0aGUgZm9ybSAnMjU1LjI1NS4yNTUuMjU1JykgZm9yIGEgaG9zdC4iIiIKICAgIHBhc3MKCmRlZiBnZXRob3N0YnluYW1lX2V4KCphcmdzLCoqa3cpOgogICAgIiIiZ2V0aG9zdGJ5bmFtZV9leChob3N0KSAtPiAobmFtZSwgYWxpYXNsaXN0LCBhZGRyZXNzbGlzdCkgICAgCiAgICBSZXR1cm4gdGhlIHRydWUgaG9zdCBuYW1lLCBhIGxpc3Qgb2YgYWxpYXNlcywgYW5kIGEgbGlzdCBvZiBJUCBhZGRyZXNzZXMsCiAgICBmb3IgYSBob3N0LiAgVGhlIGhvc3QgYXJndW1lbnQgaXMgYSBzdHJpbmcgZ2l2aW5nIGEgaG9zdCBuYW1lIG9yIElQIG51bWJlci4iIiIKICAgIHBhc3MKCmRlZiBnZXRob3N0bmFtZSgqYXJncywqKmt3KToKICAgICIiImdldGhvc3RuYW1lKCkgLT4gc3RyaW5nICAgIAogICAgUmV0dXJuIHRoZSBjdXJyZW50IGhvc3QgbmFtZS4iIiIKICAgIHBhc3MKCmRlZiBnZXRuYW1laW5mbygqYXJncywqKmt3KToKICAgICIiImdldG5hbWVpbmZvKHNvY2thZGRyLCBmbGFncykgLS0+IChob3N0LCBwb3J0KSAgICAKICAgIEdldCBob3N0IGFuZCBwb3J0IGZvciBhIHNvY2thZGRyLiIiIgogICAgcGFzcwoKZGVmIGdldHByb3RvYnluYW1lKCphcmdzLCoqa3cpOgogICAgIiIiZ2V0cHJvdG9ieW5hbWUobmFtZSkgLT4gaW50ZWdlciAgICAKICAgIFJldHVybiB0aGUgcHJvdG9jb2wgbnVtYmVyIGZvciB0aGUgbmFtZWQgcHJvdG9jb2wuICAoUmFyZWx5IHVzZWQuKSIiIgogICAgcGFzcwoKZGVmIGdldHNlcnZieW5hbWUoKmFyZ3MsKiprdyk6CiAgICAiIiJnZXRzZXJ2YnluYW1lKHNlcnZpY2VuYW1lWywgcHJvdG9jb2xuYW1lXSkgLT4gaW50ZWdlciAgICAKICAgIFJldHVybiBhIHBvcnQgbnVtYmVyIGZyb20gYSBzZXJ2aWNlIG5hbWUgYW5kIHByb3RvY29sIG5hbWUuCiAgICBUaGUgb3B0aW9uYWwgcHJvdG9jb2wgbmFtZSwgaWYgZ2l2ZW4sIHNob3VsZCBiZSAndGNwJyBvciAndWRwJywKICAgIG90aGVyd2lzZSBhbnkgcHJvdG9jb2wgd2lsbCBtYXRjaC4iIiIKICAgIHBhc3MKCmRlZiBnZXRzZXJ2Ynlwb3J0KCphcmdzLCoqa3cpOgogICAgIiIiZ2V0c2VydmJ5cG9ydChwb3J0WywgcHJvdG9jb2xuYW1lXSkgLT4gc3RyaW5nICAgIAogICAgUmV0dXJuIHRoZSBzZXJ2aWNlIG5hbWUgZnJvbSBhIHBvcnQgbnVtYmVyIGFuZCBwcm90b2NvbCBuYW1lLgogICAgVGhlIG9wdGlvbmFsIHByb3RvY29sIG5hbWUsIGlmIGdpdmVuLCBzaG91bGQgYmUgJ3RjcCcgb3IgJ3VkcCcsCiAgICBvdGhlcndpc2UgYW55IHByb3RvY29sIHdpbGwgbWF0Y2guIiIiCiAgICBwYXNzCgpoYXNfaXB2NiA9IFRydWUKCmNsYXNzIGhlcnJvcjoKICAgIHBhc3MKCmRlZiBodG9ubCgqYXJncywqKmt3KToKICAgICIiImh0b25sKGludGVnZXIpIC0+IGludGVnZXIgICAgCiAgICBDb252ZXJ0IGEgMzItYml0IGludGVnZXIgZnJvbSBob3N0IHRvIG5ldHdvcmsgYnl0ZSBvcmRlci4iIiIKICAgIHBhc3MKCmRlZiBodG9ucygqYXJncywqKmt3KToKICAgICIiImh0b25zKGludGVnZXIpIC0+IGludGVnZXIgICAgCiAgICBDb252ZXJ0IGEgMTYtYml0IGludGVnZXIgZnJvbSBob3N0IHRvIG5ldHdvcmsgYnl0ZSBvcmRlci4iIiIKICAgIHBhc3MKCmRlZiBpbmV0X2F0b24oKmFyZ3MsKiprdyk6CiAgICAiIiJpbmV0X2F0b24oc3RyaW5nKSAtPiBieXRlcyBnaXZpbmcgcGFja2VkIDMyLWJpdCBJUCByZXByZXNlbnRhdGlvbiAgICAKICAgIENvbnZlcnQgYW4gSVAgYWRkcmVzcyBpbiBzdHJpbmcgZm9ybWF0ICgxMjMuNDUuNjcuODkpIHRvIHRoZSAzMi1iaXQgcGFja2VkCiAgICBiaW5hcnkgZm9ybWF0IHVzZWQgaW4gbG93LWxldmVsIG5ldHdvcmsgZnVuY3Rpb25zLiIiIgogICAgcGFzcwoKZGVmIGluZXRfbnRvYSgqYXJncywqKmt3KToKICAgICIiImluZXRfbnRvYShwYWNrZWRfaXApIC0+IGlwX2FkZHJlc3Nfc3RyaW5nICAgIAogICAgQ29udmVydCBhbiBJUCBhZGRyZXNzIGZyb20gMzItYml0IHBhY2tlZCBiaW5hcnkgZm9ybWF0IHRvIHN0cmluZyBmb3JtYXQiIiIKICAgIHBhc3MKCmRlZiBudG9obCgqYXJncywqKmt3KToKICAgICIiIm50b2hsKGludGVnZXIpIC0+IGludGVnZXIgICAgCiAgICBDb252ZXJ0IGEgMzItYml0IGludGVnZXIgZnJvbSBuZXR3b3JrIHRvIGhvc3QgYnl0ZSBvcmRlci4iIiIKICAgIHBhc3MKCmRlZiBudG9ocygqYXJncywqKmt3KToKICAgICIiIm50b2hzKGludGVnZXIpIC0+IGludGVnZXIgICAgCiAgICBDb252ZXJ0IGEgMTYtYml0IGludGVnZXIgZnJvbSBuZXR3b3JrIHRvIGhvc3QgYnl0ZSBvcmRlci4iIiIKICAgIHBhc3MKCmRlZiBzZXRkZWZhdWx0dGltZW91dCgqYXJncywqKmt3KToKICAgICIiInNldGRlZmF1bHR0aW1lb3V0KHRpbWVvdXQpICAgIAogICAgU2V0IHRoZSBkZWZhdWx0IHRpbWVvdXQgaW4gc2Vjb25kcyAoZmxvYXQpIGZvciBuZXcgc29ja2V0IG9iamVjdHMuCiAgICBBIHZhbHVlIG9mIE5vbmUgaW5kaWNhdGVzIHRoYXQgbmV3IHNvY2tldCBvYmplY3RzIGhhdmUgbm8gdGltZW91dC4KICAgIFdoZW4gdGhlIHNvY2tldCBtb2R1bGUgaXMgZmlyc3QgaW1wb3J0ZWQsIHRoZSBkZWZhdWx0IGlzIE5vbmUuIiIiCiAgICBwYXNzCgpjbGFzcyBzb2NrZXQ6CiAgICBkZWYgX19pbml0X18oc2VsZiwqYXJncywqKmt3KToKICAgICAgICBwYXNzCiAgICBkZWYgYmluZChzZWxmLCphcmdzLCoqa3cpOgogICAgICAgIHBhc3MKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICBwYXNzCgpjbGFzcyB0aW1lb3V0OgogICAgcGFzcwo=',
'/Lib/calendar.py':'IiIiQ2FsZW5kYXIgcHJpbnRpbmcgZnVuY3Rpb25zCgpOb3RlIHdoZW4gY29tcGFyaW5nIHRoZXNlIGNhbGVuZGFycyB0byB0aGUgb25lcyBwcmludGVkIGJ5IGNhbCgxKTogQnkKZGVmYXVsdCwgdGhlc2UgY2FsZW5kYXJzIGhhdmUgTW9uZGF5IGFzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWssIGFuZApTdW5kYXkgYXMgdGhlIGxhc3QgKHRoZSBFdXJvcGVhbiBjb252ZW50aW9uKS4gVXNlIHNldGZpcnN0d2Vla2RheSgpIHRvCnNldCB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwPU1vbmRheSwgNj1TdW5kYXkpLiIiIgoKaW1wb3J0IHN5cwppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGxvY2FsZSBhcyBfbG9jYWxlCgpfX2FsbF9fID0gWyJJbGxlZ2FsTW9udGhFcnJvciIsICJJbGxlZ2FsV2Vla2RheUVycm9yIiwgInNldGZpcnN0d2Vla2RheSIsCiAgICAgICAgICAgImZpcnN0d2Vla2RheSIsICJpc2xlYXAiLCAibGVhcGRheXMiLCAid2Vla2RheSIsICJtb250aHJhbmdlIiwKICAgICAgICAgICAibW9udGhjYWxlbmRhciIsICJwcm1vbnRoIiwgIm1vbnRoIiwgInByY2FsIiwgImNhbGVuZGFyIiwKICAgICAgICAgICAidGltZWdtIiwgIm1vbnRoX25hbWUiLCAibW9udGhfYWJiciIsICJkYXlfbmFtZSIsICJkYXlfYWJiciJdCgojIEV4Y2VwdGlvbiByYWlzZWQgZm9yIGJhZCBpbnB1dCAod2l0aCBzdHJpbmcgcGFyYW1ldGVyIGZvciBkZXRhaWxzKQplcnJvciA9IFZhbHVlRXJyb3IKCiMgRXhjZXB0aW9ucyByYWlzZWQgZm9yIGJhZCBpbnB1dApjbGFzcyBJbGxlZ2FsTW9udGhFcnJvcihWYWx1ZUVycm9yKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtb250aCk6CiAgICAgICAgc2VsZi5tb250aCA9IG1vbnRoCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gImJhZCBtb250aCBudW1iZXIgJXI7IG11c3QgYmUgMS0xMiIgJSBzZWxmLm1vbnRoCgoKY2xhc3MgSWxsZWdhbFdlZWtkYXlFcnJvcihWYWx1ZUVycm9yKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB3ZWVrZGF5KToKICAgICAgICBzZWxmLndlZWtkYXkgPSB3ZWVrZGF5CiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gImJhZCB3ZWVrZGF5IG51bWJlciAlcjsgbXVzdCBiZSAwIChNb25kYXkpIHRvIDYgKFN1bmRheSkiICUgc2VsZi53ZWVrZGF5CgoKIyBDb25zdGFudHMgZm9yIG1vbnRocyByZWZlcmVuY2VkIGxhdGVyCkphbnVhcnkgPSAxCkZlYnJ1YXJ5ID0gMgoKIyBOdW1iZXIgb2YgZGF5cyBwZXIgbW9udGggKGV4Y2VwdCBmb3IgRmVicnVhcnkgaW4gbGVhcCB5ZWFycykKbWRheXMgPSBbMCwgMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0KCiMgVGhpcyBtb2R1bGUgdXNlZCB0byBoYXZlIGhhcmQtY29kZWQgbGlzdHMgb2YgZGF5IGFuZCBtb250aCBuYW1lcywgYXMKIyBFbmdsaXNoIHN0cmluZ3MuICBUaGUgY2xhc3NlcyBmb2xsb3dpbmcgZW11bGF0ZSBhIHJlYWQtb25seSB2ZXJzaW9uIG9mCiMgdGhhdCwgYnV0IHN1cHBseSBsb2NhbGl6ZWQgbmFtZXMuICBOb3RlIHRoYXQgdGhlIHZhbHVlcyBhcmUgY29tcHV0ZWQKIyBmcmVzaCBvbiBlYWNoIGNhbGwsIGluIGNhc2UgdGhlIHVzZXIgY2hhbmdlcyBsb2NhbGUgYmV0d2VlbiBjYWxscy4KCmNsYXNzIF9sb2NhbGl6ZWRfbW9udGg6CgogICAgX21vbnRocyA9IFtkYXRldGltZS5kYXRlKDIwMDEsIGkrMSwgMSkuc3RyZnRpbWUgZm9yIGkgaW4gcmFuZ2UoMTIpXQogICAgX21vbnRocy5pbnNlcnQoMCwgbGFtYmRhIHg6ICIiKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmb3JtYXQpOgogICAgICAgIHNlbGYuZm9ybWF0ID0gZm9ybWF0CgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGkpOgogICAgICAgIGZ1bmNzID0gc2VsZi5fbW9udGhzW2ldCiAgICAgICAgaWYgaXNpbnN0YW5jZShpLCBzbGljZSk6CiAgICAgICAgICAgIHJldHVybiBbZihzZWxmLmZvcm1hdCkgZm9yIGYgaW4gZnVuY3NdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGZ1bmNzKHNlbGYuZm9ybWF0KQoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiAxMwoKCmNsYXNzIF9sb2NhbGl6ZWRfZGF5OgoKICAgICMgSmFudWFyeSAxLCAyMDAxLCB3YXMgYSBNb25kYXkuCiAgICBfZGF5cyA9IFtkYXRldGltZS5kYXRlKDIwMDEsIDEsIGkrMSkuc3RyZnRpbWUgZm9yIGkgaW4gcmFuZ2UoNyldCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZvcm1hdCk6CiAgICAgICAgc2VsZi5mb3JtYXQgPSBmb3JtYXQKCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaSk6CiAgICAgICAgZnVuY3MgPSBzZWxmLl9kYXlzW2ldCiAgICAgICAgaWYgaXNpbnN0YW5jZShpLCBzbGljZSk6CiAgICAgICAgICAgIHJldHVybiBbZihzZWxmLmZvcm1hdCkgZm9yIGYgaW4gZnVuY3NdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGZ1bmNzKHNlbGYuZm9ybWF0KQoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiA3CgoKIyBGdWxsIGFuZCBhYmJyZXZpYXRlZCBuYW1lcyBvZiB3ZWVrZGF5cwpkYXlfbmFtZSA9IF9sb2NhbGl6ZWRfZGF5KCclQScpCmRheV9hYmJyID0gX2xvY2FsaXplZF9kYXkoJyVhJykKCiMgRnVsbCBhbmQgYWJicmV2aWF0ZWQgbmFtZXMgb2YgbW9udGhzICgxLWJhc2VkIGFycmF5cyEhISkKbW9udGhfbmFtZSA9IF9sb2NhbGl6ZWRfbW9udGgoJyVCJykKbW9udGhfYWJiciA9IF9sb2NhbGl6ZWRfbW9udGgoJyViJykKCiMgQ29uc3RhbnRzIGZvciB3ZWVrZGF5cwooTU9OREFZLCBUVUVTREFZLCBXRURORVNEQVksIFRIVVJTREFZLCBGUklEQVksIFNBVFVSREFZLCBTVU5EQVkpID0gcmFuZ2UoNykKCgpkZWYgaXNsZWFwKHllYXIpOgogICAgIiIiUmV0dXJuIFRydWUgZm9yIGxlYXAgeWVhcnMsIEZhbHNlIGZvciBub24tbGVhcCB5ZWFycy4iIiIKICAgIHJldHVybiB5ZWFyICUgNCA9PSAwIGFuZCAoeWVhciAlIDEwMCAhPSAwIG9yIHllYXIgJSA0MDAgPT0gMCkKCgpkZWYgbGVhcGRheXMoeTEsIHkyKToKICAgICIiIlJldHVybiBudW1iZXIgb2YgbGVhcCB5ZWFycyBpbiByYW5nZSBbeTEsIHkyKS4KICAgICAgIEFzc3VtZSB5MSA8PSB5Mi4iIiIKICAgIHkxIC09IDEKICAgIHkyIC09IDEKICAgIHJldHVybiAoeTIvLzQgLSB5MS8vNCkgLSAoeTIvLzEwMCAtIHkxLy8xMDApICsgKHkyLy80MDAgLSB5MS8vNDAwKQoKCmRlZiB3ZWVrZGF5KHllYXIsIG1vbnRoLCBkYXkpOgogICAgIiIiUmV0dXJuIHdlZWtkYXkgKDAtNiB+IE1vbi1TdW4pIGZvciB5ZWFyICgxOTcwLS4uLiksIG1vbnRoICgxLTEyKSwKICAgICAgIGRheSAoMS0zMSkuIiIiCiAgICByZXR1cm4gZGF0ZXRpbWUuZGF0ZSh5ZWFyLCBtb250aCwgZGF5KS53ZWVrZGF5KCkKCgpkZWYgbW9udGhyYW5nZSh5ZWFyLCBtb250aCk6CiAgICAiIiJSZXR1cm4gd2Vla2RheSAoMC02IH4gTW9uLVN1bikgYW5kIG51bWJlciBvZiBkYXlzICgyOC0zMSkgZm9yCiAgICAgICB5ZWFyLCBtb250aC4iIiIKICAgIGlmIG5vdCAxIDw9IG1vbnRoIDw9IDEyOgogICAgICAgIHJhaXNlIElsbGVnYWxNb250aEVycm9yKG1vbnRoKQogICAgZGF5MSA9IHdlZWtkYXkoeWVhciwgbW9udGgsIDEpCiAgICBuZGF5cyA9IG1kYXlzW21vbnRoXSArIChtb250aCA9PSBGZWJydWFyeSBhbmQgaXNsZWFwKHllYXIpKQogICAgcmV0dXJuIGRheTEsIG5kYXlzCgoKY2xhc3MgQ2FsZW5kYXIob2JqZWN0KToKICAgICIiIgogICAgQmFzZSBjYWxlbmRhciBjbGFzcy4gVGhpcyBjbGFzcyBkb2Vzbid0IGRvIGFueSBmb3JtYXR0aW5nLiBJdCBzaW1wbHkKICAgIHByb3ZpZGVzIGRhdGEgdG8gc3ViY2xhc3Nlcy4KICAgICIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmaXJzdHdlZWtkYXk9MCk6CiAgICAgICAgc2VsZi5maXJzdHdlZWtkYXkgPSBmaXJzdHdlZWtkYXkgIyAwID0gTW9uZGF5LCA2ID0gU3VuZGF5CgogICAgZGVmIGdldGZpcnN0d2Vla2RheShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fZmlyc3R3ZWVrZGF5ICUgNwoKICAgIGRlZiBzZXRmaXJzdHdlZWtkYXkoc2VsZiwgZmlyc3R3ZWVrZGF5KToKICAgICAgICBzZWxmLl9maXJzdHdlZWtkYXkgPSBmaXJzdHdlZWtkYXkKCiAgICBmaXJzdHdlZWtkYXkgPSBwcm9wZXJ0eShnZXRmaXJzdHdlZWtkYXksIHNldGZpcnN0d2Vla2RheSkKCiAgICBkZWYgaXRlcndlZWtkYXlzKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGl0ZXJhdG9yIGZvciBvbmUgd2VlayBvZiB3ZWVrZGF5IG51bWJlcnMgc3RhcnRpbmcgd2l0aCB0aGUKICAgICAgICBjb25maWd1cmVkIGZpcnN0IG9uZS4KICAgICAgICAiIiIKICAgICAgICBmb3IgaSBpbiByYW5nZShzZWxmLmZpcnN0d2Vla2RheSwgc2VsZi5maXJzdHdlZWtkYXkgKyA3KToKICAgICAgICAgICAgeWllbGQgaSU3CgogICAgZGVmIGl0ZXJtb250aGRhdGVzKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYW4gaXRlcmF0b3IgZm9yIG9uZSBtb250aC4gVGhlIGl0ZXJhdG9yIHdpbGwgeWllbGQgZGF0ZXRpbWUuZGF0ZQogICAgICAgIHZhbHVlcyBhbmQgd2lsbCBhbHdheXMgaXRlcmF0ZSB0aHJvdWdoIGNvbXBsZXRlIHdlZWtzLCBzbyBpdCB3aWxsIHlpZWxkCiAgICAgICAgZGF0ZXMgb3V0c2lkZSB0aGUgc3BlY2lmaWVkIG1vbnRoLgogICAgICAgICIiIgogICAgICAgIGRhdGUgPSBkYXRldGltZS5kYXRlKHllYXIsIG1vbnRoLCAxKQogICAgICAgICMgR28gYmFjayB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSB3ZWVrCiAgICAgICAgZGF5cyA9IChkYXRlLndlZWtkYXkoKSAtIHNlbGYuZmlyc3R3ZWVrZGF5KSAlIDcKICAgICAgICBkYXRlIC09IGRhdGV0aW1lLnRpbWVkZWx0YShkYXlzPWRheXMpCiAgICAgICAgb25lZGF5ID0gZGF0ZXRpbWUudGltZWRlbHRhKGRheXM9MSkKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB5aWVsZCBkYXRlCiAgICAgICAgICAgIGRhdGUgKz0gb25lZGF5CiAgICAgICAgICAgIGlmIGRhdGUubW9udGggIT0gbW9udGggYW5kIGRhdGUud2Vla2RheSgpID09IHNlbGYuZmlyc3R3ZWVrZGF5OgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICBkZWYgaXRlcm1vbnRoZGF5czIoc2VsZiwgeWVhciwgbW9udGgpOgogICAgICAgICIiIgogICAgICAgIExpa2UgaXRlcm1vbnRoZGF0ZXMoKSwgYnV0IHdpbGwgeWllbGQgKGRheSBudW1iZXIsIHdlZWtkYXkgbnVtYmVyKQogICAgICAgIHR1cGxlcy4gRm9yIGRheXMgb3V0c2lkZSB0aGUgc3BlY2lmaWVkIG1vbnRoIHRoZSBkYXkgbnVtYmVyIGlzIDAuCiAgICAgICAgIiIiCiAgICAgICAgZm9yIGRhdGUgaW4gc2VsZi5pdGVybW9udGhkYXRlcyh5ZWFyLCBtb250aCk6CiAgICAgICAgICAgIGlmIGRhdGUubW9udGggIT0gbW9udGg6CiAgICAgICAgICAgICAgICB5aWVsZCAoMCwgZGF0ZS53ZWVrZGF5KCkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB5aWVsZCAoZGF0ZS5kYXksIGRhdGUud2Vla2RheSgpKQoKICAgIGRlZiBpdGVybW9udGhkYXlzKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBMaWtlIGl0ZXJtb250aGRhdGVzKCksIGJ1dCB3aWxsIHlpZWxkIGRheSBudW1iZXJzLiBGb3IgZGF5cyBvdXRzaWRlCiAgICAgICAgdGhlIHNwZWNpZmllZCBtb250aCB0aGUgZGF5IG51bWJlciBpcyAwLgogICAgICAgICIiIgogICAgICAgIGZvciBkYXRlIGluIHNlbGYuaXRlcm1vbnRoZGF0ZXMoeWVhciwgbW9udGgpOgogICAgICAgICAgICBpZiBkYXRlLm1vbnRoICE9IG1vbnRoOgogICAgICAgICAgICAgICAgeWllbGQgMAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgeWllbGQgZGF0ZS5kYXkKCiAgICBkZWYgbW9udGhkYXRlc2NhbGVuZGFyKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBtYXRyaXggKGxpc3Qgb2YgbGlzdHMpIHJlcHJlc2VudGluZyBhIG1vbnRoJ3MgY2FsZW5kYXIuCiAgICAgICAgRWFjaCByb3cgcmVwcmVzZW50cyBhIHdlZWs7IHdlZWsgZW50cmllcyBhcmUgZGF0ZXRpbWUuZGF0ZSB2YWx1ZXMuCiAgICAgICAgIiIiCiAgICAgICAgZGF0ZXMgPSBsaXN0KHNlbGYuaXRlcm1vbnRoZGF0ZXMoeWVhciwgbW9udGgpKQogICAgICAgIHJldHVybiBbIGRhdGVzW2k6aSs3XSBmb3IgaSBpbiByYW5nZSgwLCBsZW4oZGF0ZXMpLCA3KSBdCgogICAgZGVmIG1vbnRoZGF5czJjYWxlbmRhcihzZWxmLCB5ZWFyLCBtb250aCk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgbWF0cml4IHJlcHJlc2VudGluZyBhIG1vbnRoJ3MgY2FsZW5kYXIuCiAgICAgICAgRWFjaCByb3cgcmVwcmVzZW50cyBhIHdlZWs7IHdlZWsgZW50cmllcyBhcmUKICAgICAgICAoZGF5IG51bWJlciwgd2Vla2RheSBudW1iZXIpIHR1cGxlcy4gRGF5IG51bWJlcnMgb3V0c2lkZSB0aGlzIG1vbnRoCiAgICAgICAgYXJlIHplcm8uCiAgICAgICAgIiIiCiAgICAgICAgZGF5cyA9IGxpc3Qoc2VsZi5pdGVybW9udGhkYXlzMih5ZWFyLCBtb250aCkpCiAgICAgICAgcmV0dXJuIFsgZGF5c1tpOmkrN10gZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKGRheXMpLCA3KSBdCgogICAgZGVmIG1vbnRoZGF5c2NhbGVuZGFyKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBtYXRyaXggcmVwcmVzZW50aW5nIGEgbW9udGgncyBjYWxlbmRhci4KICAgICAgICBFYWNoIHJvdyByZXByZXNlbnRzIGEgd2VlazsgZGF5cyBvdXRzaWRlIHRoaXMgbW9udGggYXJlIHplcm8uCiAgICAgICAgIiIiCiAgICAgICAgZGF5cyA9IGxpc3Qoc2VsZi5pdGVybW9udGhkYXlzKHllYXIsIG1vbnRoKSkKICAgICAgICByZXR1cm4gWyBkYXlzW2k6aSs3XSBmb3IgaSBpbiByYW5nZSgwLCBsZW4oZGF5cyksIDcpIF0KCiAgICBkZWYgeWVhcmRhdGVzY2FsZW5kYXIoc2VsZiwgeWVhciwgd2lkdGg9Myk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIHRoZSBkYXRhIGZvciB0aGUgc3BlY2lmaWVkIHllYXIgcmVhZHkgZm9yIGZvcm1hdHRpbmcuIFRoZSByZXR1cm4KICAgICAgICB2YWx1ZSBpcyBhIGxpc3Qgb2YgbW9udGggcm93cy4gRWFjaCBtb250aCByb3cgY29udGFpbnMgdXB0byB3aWR0aCBtb250aHMuCiAgICAgICAgRWFjaCBtb250aCBjb250YWlucyBiZXR3ZWVuIDQgYW5kIDYgd2Vla3MgYW5kIGVhY2ggd2VlayBjb250YWlucyAxLTcKICAgICAgICBkYXlzLiBEYXlzIGFyZSBkYXRldGltZS5kYXRlIG9iamVjdHMuCiAgICAgICAgIiIiCiAgICAgICAgbW9udGhzID0gWwogICAgICAgICAgICBzZWxmLm1vbnRoZGF0ZXNjYWxlbmRhcih5ZWFyLCBpKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShKYW51YXJ5LCBKYW51YXJ5KzEyKQogICAgICAgIF0KICAgICAgICByZXR1cm4gW21vbnRoc1tpOmkrd2lkdGhdIGZvciBpIGluIHJhbmdlKDAsIGxlbihtb250aHMpLCB3aWR0aCkgXQoKICAgIGRlZiB5ZWFyZGF5czJjYWxlbmRhcihzZWxmLCB5ZWFyLCB3aWR0aD0zKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gdGhlIGRhdGEgZm9yIHRoZSBzcGVjaWZpZWQgeWVhciByZWFkeSBmb3IgZm9ybWF0dGluZyAoc2ltaWxhciB0bwogICAgICAgIHllYXJkYXRlc2NhbGVuZGFyKCkpLiBFbnRyaWVzIGluIHRoZSB3ZWVrIGxpc3RzIGFyZQogICAgICAgIChkYXkgbnVtYmVyLCB3ZWVrZGF5IG51bWJlcikgdHVwbGVzLiBEYXkgbnVtYmVycyBvdXRzaWRlIHRoaXMgbW9udGggYXJlCiAgICAgICAgemVyby4KICAgICAgICAiIiIKICAgICAgICBtb250aHMgPSBbCiAgICAgICAgICAgIHNlbGYubW9udGhkYXlzMmNhbGVuZGFyKHllYXIsIGkpCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKEphbnVhcnksIEphbnVhcnkrMTIpCiAgICAgICAgXQogICAgICAgIHJldHVybiBbbW9udGhzW2k6aSt3aWR0aF0gZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKG1vbnRocyksIHdpZHRoKSBdCgogICAgZGVmIHllYXJkYXlzY2FsZW5kYXIoc2VsZiwgeWVhciwgd2lkdGg9Myk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIHRoZSBkYXRhIGZvciB0aGUgc3BlY2lmaWVkIHllYXIgcmVhZHkgZm9yIGZvcm1hdHRpbmcgKHNpbWlsYXIgdG8KICAgICAgICB5ZWFyZGF0ZXNjYWxlbmRhcigpKS4gRW50cmllcyBpbiB0aGUgd2VlayBsaXN0cyBhcmUgZGF5IG51bWJlcnMuCiAgICAgICAgRGF5IG51bWJlcnMgb3V0c2lkZSB0aGlzIG1vbnRoIGFyZSB6ZXJvLgogICAgICAgICIiIgogICAgICAgIG1vbnRocyA9IFsKICAgICAgICAgICAgc2VsZi5tb250aGRheXNjYWxlbmRhcih5ZWFyLCBpKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShKYW51YXJ5LCBKYW51YXJ5KzEyKQogICAgICAgIF0KICAgICAgICByZXR1cm4gW21vbnRoc1tpOmkrd2lkdGhdIGZvciBpIGluIHJhbmdlKDAsIGxlbihtb250aHMpLCB3aWR0aCkgXQoKCmNsYXNzIFRleHRDYWxlbmRhcihDYWxlbmRhcik6CiAgICAiIiIKICAgIFN1YmNsYXNzIG9mIENhbGVuZGFyIHRoYXQgb3V0cHV0cyBhIGNhbGVuZGFyIGFzIGEgc2ltcGxlIHBsYWluIHRleHQKICAgIHNpbWlsYXIgdG8gdGhlIFVOSVggcHJvZ3JhbSBjYWwuCiAgICAiIiIKCiAgICBkZWYgcHJ3ZWVrKHNlbGYsIHRoZXdlZWssIHdpZHRoKToKICAgICAgICAiIiIKICAgICAgICBQcmludCBhIHNpbmdsZSB3ZWVrIChubyBuZXdsaW5lKS4KICAgICAgICAiIiIKICAgICAgICBwcmludChzZWxmLmZvcm1hdHdlZWsodGhld2Vlaywgd2lkdGgpLCBlbmQ9JyAnKQoKICAgIGRlZiBmb3JtYXRkYXkoc2VsZiwgZGF5LCB3ZWVrZGF5LCB3aWR0aCk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJucyBhIGZvcm1hdHRlZCBkYXkuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZGF5ID09IDA6CiAgICAgICAgICAgIHMgPSAnJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHMgPSAnJTJpJyAlIGRheSAgICAgICAgICAgICAjIHJpZ2h0LWFsaWduIHNpbmdsZS1kaWdpdCBkYXlzCiAgICAgICAgcmV0dXJuIHMuY2VudGVyKHdpZHRoKQoKICAgIGRlZiBmb3JtYXR3ZWVrKHNlbGYsIHRoZXdlZWssIHdpZHRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm5zIGEgc2luZ2xlIHdlZWsgaW4gYSBzdHJpbmcgKG5vIG5ld2xpbmUpLgogICAgICAgICIiIgogICAgICAgIHJldHVybiAnICcuam9pbihzZWxmLmZvcm1hdGRheShkLCB3ZCwgd2lkdGgpIGZvciAoZCwgd2QpIGluIHRoZXdlZWspCgogICAgZGVmIGZvcm1hdHdlZWtkYXkoc2VsZiwgZGF5LCB3aWR0aCk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJucyBhIGZvcm1hdHRlZCB3ZWVrIGRheSBuYW1lLgogICAgICAgICIiIgogICAgICAgIGlmIHdpZHRoID49IDk6CiAgICAgICAgICAgIG5hbWVzID0gZGF5X25hbWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBuYW1lcyA9IGRheV9hYmJyCiAgICAgICAgcmV0dXJuIG5hbWVzW2RheV1bOndpZHRoXS5jZW50ZXIod2lkdGgpCgogICAgZGVmIGZvcm1hdHdlZWtoZWFkZXIoc2VsZiwgd2lkdGgpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGhlYWRlciBmb3IgYSB3ZWVrLgogICAgICAgICIiIgogICAgICAgIHJldHVybiAnICcuam9pbihzZWxmLmZvcm1hdHdlZWtkYXkoaSwgd2lkdGgpIGZvciBpIGluIHNlbGYuaXRlcndlZWtkYXlzKCkpCgogICAgZGVmIGZvcm1hdG1vbnRobmFtZShzZWxmLCB0aGV5ZWFyLCB0aGVtb250aCwgd2lkdGgsIHdpdGh5ZWFyPVRydWUpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGZvcm1hdHRlZCBtb250aCBuYW1lLgogICAgICAgICIiIgogICAgICAgIHMgPSBtb250aF9uYW1lW3RoZW1vbnRoXQogICAgICAgIGlmIHdpdGh5ZWFyOgogICAgICAgICAgICBzID0gIiVzICVyIiAlIChzLCB0aGV5ZWFyKQogICAgICAgIHJldHVybiBzLmNlbnRlcih3aWR0aCkKCiAgICBkZWYgcHJtb250aChzZWxmLCB0aGV5ZWFyLCB0aGVtb250aCwgdz0wLCBsPTApOgogICAgICAgICIiIgogICAgICAgIFByaW50IGEgbW9udGgncyBjYWxlbmRhci4KICAgICAgICAiIiIKICAgICAgICBwcmludChzZWxmLmZvcm1hdG1vbnRoKHRoZXllYXIsIHRoZW1vbnRoLCB3LCBsKSwgZW5kPScgJykKCiAgICBkZWYgZm9ybWF0bW9udGgoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHc9MCwgbD0wKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBtb250aCdzIGNhbGVuZGFyIHN0cmluZyAobXVsdGktbGluZSkuCiAgICAgICAgIiIiCiAgICAgICAgdyA9IG1heCgyLCB3KQogICAgICAgIGwgPSBtYXgoMSwgbCkKICAgICAgICBzID0gc2VsZi5mb3JtYXRtb250aG5hbWUodGhleWVhciwgdGhlbW9udGgsIDcgKiAodyArIDEpIC0gMSkKICAgICAgICBzID0gcy5yc3RyaXAoKQogICAgICAgIHMgKz0gJ1xuJyAqIGwKICAgICAgICBzICs9IHNlbGYuZm9ybWF0d2Vla2hlYWRlcih3KS5yc3RyaXAoKQogICAgICAgIHMgKz0gJ1xuJyAqIGwKICAgICAgICBmb3Igd2VlayBpbiBzZWxmLm1vbnRoZGF5czJjYWxlbmRhcih0aGV5ZWFyLCB0aGVtb250aCk6CiAgICAgICAgICAgIHMgKz0gc2VsZi5mb3JtYXR3ZWVrKHdlZWssIHcpLnJzdHJpcCgpCiAgICAgICAgICAgIHMgKz0gJ1xuJyAqIGwKICAgICAgICByZXR1cm4gcwoKICAgIGRlZiBmb3JtYXR5ZWFyKHNlbGYsIHRoZXllYXIsIHc9MiwgbD0xLCBjPTYsIG09Myk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJucyBhIHllYXIncyBjYWxlbmRhciBhcyBhIG11bHRpLWxpbmUgc3RyaW5nLgogICAgICAgICIiIgogICAgICAgIHcgPSBtYXgoMiwgdykKICAgICAgICBsID0gbWF4KDEsIGwpCiAgICAgICAgYyA9IG1heCgyLCBjKQogICAgICAgIGNvbHdpZHRoID0gKHcgKyAxKSAqIDcgLSAxCiAgICAgICAgdiA9IFtdCiAgICAgICAgYSA9IHYuYXBwZW5kCiAgICAgICAgYShyZXByKHRoZXllYXIpLmNlbnRlcihjb2x3aWR0aCptK2MqKG0tMSkpLnJzdHJpcCgpKQogICAgICAgIGEoJ1xuJypsKQogICAgICAgIGhlYWRlciA9IHNlbGYuZm9ybWF0d2Vla2hlYWRlcih3KQogICAgICAgIGZvciAoaSwgcm93KSBpbiBlbnVtZXJhdGUoc2VsZi55ZWFyZGF5czJjYWxlbmRhcih0aGV5ZWFyLCBtKSk6CiAgICAgICAgICAgICMgbW9udGhzIGluIHRoaXMgcm93CiAgICAgICAgICAgIG1vbnRocyA9IHJhbmdlKG0qaSsxLCBtaW4obSooaSsxKSsxLCAxMykpCiAgICAgICAgICAgIGEoJ1xuJypsKQogICAgICAgICAgICBuYW1lcyA9IChzZWxmLmZvcm1hdG1vbnRobmFtZSh0aGV5ZWFyLCBrLCBjb2x3aWR0aCwgRmFsc2UpCiAgICAgICAgICAgICAgICAgICAgIGZvciBrIGluIG1vbnRocykKICAgICAgICAgICAgYShmb3JtYXRzdHJpbmcobmFtZXMsIGNvbHdpZHRoLCBjKS5yc3RyaXAoKSkKICAgICAgICAgICAgYSgnXG4nKmwpCiAgICAgICAgICAgIGhlYWRlcnMgPSAoaGVhZGVyIGZvciBrIGluIG1vbnRocykKICAgICAgICAgICAgYShmb3JtYXRzdHJpbmcoaGVhZGVycywgY29sd2lkdGgsIGMpLnJzdHJpcCgpKQogICAgICAgICAgICBhKCdcbicqbCkKICAgICAgICAgICAgIyBtYXggbnVtYmVyIG9mIHdlZWtzIGZvciB0aGlzIHJvdwogICAgICAgICAgICBoZWlnaHQgPSBtYXgobGVuKGNhbCkgZm9yIGNhbCBpbiByb3cpCiAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGhlaWdodCk6CiAgICAgICAgICAgICAgICB3ZWVrcyA9IFtdCiAgICAgICAgICAgICAgICBmb3IgY2FsIGluIHJvdzoKICAgICAgICAgICAgICAgICAgICBpZiBqID49IGxlbihjYWwpOgogICAgICAgICAgICAgICAgICAgICAgICB3ZWVrcy5hcHBlbmQoJycpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgd2Vla3MuYXBwZW5kKHNlbGYuZm9ybWF0d2VlayhjYWxbal0sIHcpKQogICAgICAgICAgICAgICAgYShmb3JtYXRzdHJpbmcod2Vla3MsIGNvbHdpZHRoLCBjKS5yc3RyaXAoKSkKICAgICAgICAgICAgICAgIGEoJ1xuJyAqIGwpCiAgICAgICAgcmV0dXJuICcnLmpvaW4odikKCiAgICBkZWYgcHJ5ZWFyKHNlbGYsIHRoZXllYXIsIHc9MCwgbD0wLCBjPTYsIG09Myk6CiAgICAgICAgIiIiUHJpbnQgYSB5ZWFyJ3MgY2FsZW5kYXIuIiIiCiAgICAgICAgcHJpbnQoc2VsZi5mb3JtYXR5ZWFyKHRoZXllYXIsIHcsIGwsIGMsIG0pKQoKCmNsYXNzIEhUTUxDYWxlbmRhcihDYWxlbmRhcik6CiAgICAiIiIKICAgIFRoaXMgY2FsZW5kYXIgcmV0dXJucyBjb21wbGV0ZSBIVE1MIHBhZ2VzLgogICAgIiIiCgogICAgIyBDU1MgY2xhc3NlcyBmb3IgdGhlIGRheSA8dGQ+cwogICAgY3NzY2xhc3NlcyA9IFsibW9uIiwgInR1ZSIsICJ3ZWQiLCAidGh1IiwgImZyaSIsICJzYXQiLCAic3VuIl0KCiAgICBkZWYgZm9ybWF0ZGF5KHNlbGYsIGRheSwgd2Vla2RheSk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgZGF5IGFzIGEgdGFibGUgY2VsbC4KICAgICAgICAiIiIKICAgICAgICBpZiBkYXkgPT0gMDoKICAgICAgICAgICAgcmV0dXJuICc8dGQgY2xhc3M9Im5vZGF5Ij4mbmJzcDs8L3RkPicgIyBkYXkgb3V0c2lkZSBtb250aAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAnPHRkIGNsYXNzPSIlcyI+JWQ8L3RkPicgJSAoc2VsZi5jc3NjbGFzc2VzW3dlZWtkYXldLCBkYXkpCgogICAgZGVmIGZvcm1hdHdlZWsoc2VsZiwgdGhld2Vlayk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgY29tcGxldGUgd2VlayBhcyBhIHRhYmxlIHJvdy4KICAgICAgICAiIiIKICAgICAgICBzID0gJycuam9pbihzZWxmLmZvcm1hdGRheShkLCB3ZCkgZm9yIChkLCB3ZCkgaW4gdGhld2VlaykKICAgICAgICByZXR1cm4gJzx0cj4lczwvdHI+JyAlIHMKCiAgICBkZWYgZm9ybWF0d2Vla2RheShzZWxmLCBkYXkpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIHdlZWtkYXkgbmFtZSBhcyBhIHRhYmxlIGhlYWRlci4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gJzx0aCBjbGFzcz0iJXMiPiVzPC90aD4nICUgKHNlbGYuY3NzY2xhc3Nlc1tkYXldLCBkYXlfYWJicltkYXldKQoKICAgIGRlZiBmb3JtYXR3ZWVraGVhZGVyKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGhlYWRlciBmb3IgYSB3ZWVrIGFzIGEgdGFibGUgcm93LgogICAgICAgICIiIgogICAgICAgIHMgPSAnJy5qb2luKHNlbGYuZm9ybWF0d2Vla2RheShpKSBmb3IgaSBpbiBzZWxmLml0ZXJ3ZWVrZGF5cygpKQogICAgICAgIHJldHVybiAnPHRyPiVzPC90cj4nICUgcwoKICAgIGRlZiBmb3JtYXRtb250aG5hbWUoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHdpdGh5ZWFyPVRydWUpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIG1vbnRoIG5hbWUgYXMgYSB0YWJsZSByb3cuCiAgICAgICAgIiIiCiAgICAgICAgaWYgd2l0aHllYXI6CiAgICAgICAgICAgIHMgPSAnJXMgJXMnICUgKG1vbnRoX25hbWVbdGhlbW9udGhdLCB0aGV5ZWFyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHMgPSAnJXMnICUgbW9udGhfbmFtZVt0aGVtb250aF0KICAgICAgICByZXR1cm4gJzx0cj48dGggY29sc3Bhbj0iNyIgY2xhc3M9Im1vbnRoIj4lczwvdGg+PC90cj4nICUgcwoKICAgIGRlZiBmb3JtYXRtb250aChzZWxmLCB0aGV5ZWFyLCB0aGVtb250aCwgd2l0aHllYXI9VHJ1ZSk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgZm9ybWF0dGVkIG1vbnRoIGFzIGEgdGFibGUuCiAgICAgICAgIiIiCiAgICAgICAgdiA9IFtdCiAgICAgICAgYSA9IHYuYXBwZW5kCiAgICAgICAgYSgnPHRhYmxlIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBjbGFzcz0ibW9udGgiPicpCiAgICAgICAgYSgnXG4nKQogICAgICAgIGEoc2VsZi5mb3JtYXRtb250aG5hbWUodGhleWVhciwgdGhlbW9udGgsIHdpdGh5ZWFyPXdpdGh5ZWFyKSkKICAgICAgICBhKCdcbicpCiAgICAgICAgYShzZWxmLmZvcm1hdHdlZWtoZWFkZXIoKSkKICAgICAgICBhKCdcbicpCiAgICAgICAgZm9yIHdlZWsgaW4gc2VsZi5tb250aGRheXMyY2FsZW5kYXIodGhleWVhciwgdGhlbW9udGgpOgogICAgICAgICAgICBhKHNlbGYuZm9ybWF0d2Vlayh3ZWVrKSkKICAgICAgICAgICAgYSgnXG4nKQogICAgICAgIGEoJzwvdGFibGU+JykKICAgICAgICBhKCdcbicpCiAgICAgICAgcmV0dXJuICcnLmpvaW4odikKCiAgICBkZWYgZm9ybWF0eWVhcihzZWxmLCB0aGV5ZWFyLCB3aWR0aD0zKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBmb3JtYXR0ZWQgeWVhciBhcyBhIHRhYmxlIG9mIHRhYmxlcy4KICAgICAgICAiIiIKICAgICAgICB2ID0gW10KICAgICAgICBhID0gdi5hcHBlbmQKICAgICAgICB3aWR0aCA9IG1heCh3aWR0aCwgMSkKICAgICAgICBhKCc8dGFibGUgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIGNsYXNzPSJ5ZWFyIj4nKQogICAgICAgIGEoJ1xuJykKICAgICAgICBhKCc8dHI+PHRoIGNvbHNwYW49IiVkIiBjbGFzcz0ieWVhciI+JXM8L3RoPjwvdHI+JyAlICh3aWR0aCwgdGhleWVhcikpCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoSmFudWFyeSwgSmFudWFyeSsxMiwgd2lkdGgpOgogICAgICAgICAgICAjIG1vbnRocyBpbiB0aGlzIHJvdwogICAgICAgICAgICBtb250aHMgPSByYW5nZShpLCBtaW4oaSt3aWR0aCwgMTMpKQogICAgICAgICAgICBhKCc8dHI+JykKICAgICAgICAgICAgZm9yIG0gaW4gbW9udGhzOgogICAgICAgICAgICAgICAgYSgnPHRkPicpCiAgICAgICAgICAgICAgICBhKHNlbGYuZm9ybWF0bW9udGgodGhleWVhciwgbSwgd2l0aHllYXI9RmFsc2UpKQogICAgICAgICAgICAgICAgYSgnPC90ZD4nKQogICAgICAgICAgICBhKCc8L3RyPicpCiAgICAgICAgYSgnPC90YWJsZT4nKQogICAgICAgIHJldHVybiAnJy5qb2luKHYpCgogICAgZGVmIGZvcm1hdHllYXJwYWdlKHNlbGYsIHRoZXllYXIsIHdpZHRoPTMsIGNzcz0nY2FsZW5kYXIuY3NzJywgZW5jb2Rpbmc9Tm9uZSk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgZm9ybWF0dGVkIHllYXIgYXMgYSBjb21wbGV0ZSBIVE1MIHBhZ2UuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZToKICAgICAgICAgICAgZW5jb2RpbmcgPSBzeXMuZ2V0ZGVmYXVsdGVuY29kaW5nKCkKICAgICAgICB2ID0gW10KICAgICAgICBhID0gdi5hcHBlbmQKICAgICAgICBhKCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSIlcyI/PlxuJyAlIGVuY29kaW5nKQogICAgICAgIGEoJzwhRE9DVFlQRSBodG1sIFBVQkxJQyAiLS8vVzNDLy9EVEQgWEhUTUwgMS4wIFN0cmljdC8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS1zdHJpY3QuZHRkIj5cbicpCiAgICAgICAgYSgnPGh0bWw+XG4nKQogICAgICAgIGEoJzxoZWFkPlxuJykKICAgICAgICBhKCc8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD0lcyIgLz5cbicgJSBlbmNvZGluZykKICAgICAgICBpZiBjc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGEoJzxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9IiVzIiAvPlxuJyAlIGNzcykKICAgICAgICBhKCc8dGl0bGU+Q2FsZW5kYXIgZm9yICVkPC90aXRsZT5cbicgJSB0aGV5ZWFyKQogICAgICAgIGEoJzwvaGVhZD5cbicpCiAgICAgICAgYSgnPGJvZHk+XG4nKQogICAgICAgIGEoc2VsZi5mb3JtYXR5ZWFyKHRoZXllYXIsIHdpZHRoKSkKICAgICAgICBhKCc8L2JvZHk+XG4nKQogICAgICAgIGEoJzwvaHRtbD5cbicpCiAgICAgICAgcmV0dXJuICcnLmpvaW4odikuZW5jb2RlKGVuY29kaW5nLCAieG1sY2hhcnJlZnJlcGxhY2UiKQoKCmNsYXNzIGRpZmZlcmVudF9sb2NhbGU6CiAgICBkZWYgX19pbml0X18oc2VsZiwgbG9jYWxlKToKICAgICAgICBzZWxmLmxvY2FsZSA9IGxvY2FsZQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgc2VsZi5vbGRsb2NhbGUgPSBfbG9jYWxlLmdldGxvY2FsZShfbG9jYWxlLkxDX1RJTUUpCiAgICAgICAgX2xvY2FsZS5zZXRsb2NhbGUoX2xvY2FsZS5MQ19USU1FLCBzZWxmLmxvY2FsZSkKCiAgICBkZWYgX19leGl0X18oc2VsZiwgKmFyZ3MpOgogICAgICAgIF9sb2NhbGUuc2V0bG9jYWxlKF9sb2NhbGUuTENfVElNRSwgc2VsZi5vbGRsb2NhbGUpCgoKY2xhc3MgTG9jYWxlVGV4dENhbGVuZGFyKFRleHRDYWxlbmRhcik6CiAgICAiIiIKICAgIFRoaXMgY2xhc3MgY2FuIGJlIHBhc3NlZCBhIGxvY2FsZSBuYW1lIGluIHRoZSBjb25zdHJ1Y3RvciBhbmQgd2lsbCByZXR1cm4KICAgIG1vbnRoIGFuZCB3ZWVrZGF5IG5hbWVzIGluIHRoZSBzcGVjaWZpZWQgbG9jYWxlLiBJZiB0aGlzIGxvY2FsZSBpbmNsdWRlcwogICAgYW4gZW5jb2RpbmcgYWxsIHN0cmluZ3MgY29udGFpbmluZyBtb250aCBhbmQgd2Vla2RheSBuYW1lcyB3aWxsIGJlIHJldHVybmVkCiAgICBhcyB1bmljb2RlLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZpcnN0d2Vla2RheT0wLCBsb2NhbGU9Tm9uZSk6CiAgICAgICAgVGV4dENhbGVuZGFyLl9faW5pdF9fKHNlbGYsIGZpcnN0d2Vla2RheSkKICAgICAgICBpZiBsb2NhbGUgaXMgTm9uZToKICAgICAgICAgICAgbG9jYWxlID0gX2xvY2FsZS5nZXRkZWZhdWx0bG9jYWxlKCkKICAgICAgICBzZWxmLmxvY2FsZSA9IGxvY2FsZQoKICAgIGRlZiBmb3JtYXR3ZWVrZGF5KHNlbGYsIGRheSwgd2lkdGgpOgogICAgICAgIHdpdGggZGlmZmVyZW50X2xvY2FsZShzZWxmLmxvY2FsZSk6CiAgICAgICAgICAgIGlmIHdpZHRoID49IDk6CiAgICAgICAgICAgICAgICBuYW1lcyA9IGRheV9uYW1lCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBuYW1lcyA9IGRheV9hYmJyCiAgICAgICAgICAgIG5hbWUgPSBuYW1lc1tkYXldCiAgICAgICAgICAgIHJldHVybiBuYW1lWzp3aWR0aF0uY2VudGVyKHdpZHRoKQoKICAgIGRlZiBmb3JtYXRtb250aG5hbWUoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHdpZHRoLCB3aXRoeWVhcj1UcnVlKToKICAgICAgICB3aXRoIGRpZmZlcmVudF9sb2NhbGUoc2VsZi5sb2NhbGUpOgogICAgICAgICAgICBzID0gbW9udGhfbmFtZVt0aGVtb250aF0KICAgICAgICAgICAgaWYgd2l0aHllYXI6CiAgICAgICAgICAgICAgICBzID0gIiVzICVyIiAlIChzLCB0aGV5ZWFyKQogICAgICAgICAgICByZXR1cm4gcy5jZW50ZXIod2lkdGgpCgoKY2xhc3MgTG9jYWxlSFRNTENhbGVuZGFyKEhUTUxDYWxlbmRhcik6CiAgICAiIiIKICAgIFRoaXMgY2xhc3MgY2FuIGJlIHBhc3NlZCBhIGxvY2FsZSBuYW1lIGluIHRoZSBjb25zdHJ1Y3RvciBhbmQgd2lsbCByZXR1cm4KICAgIG1vbnRoIGFuZCB3ZWVrZGF5IG5hbWVzIGluIHRoZSBzcGVjaWZpZWQgbG9jYWxlLiBJZiB0aGlzIGxvY2FsZSBpbmNsdWRlcwogICAgYW4gZW5jb2RpbmcgYWxsIHN0cmluZ3MgY29udGFpbmluZyBtb250aCBhbmQgd2Vla2RheSBuYW1lcyB3aWxsIGJlIHJldHVybmVkCiAgICBhcyB1bmljb2RlLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlyc3R3ZWVrZGF5PTAsIGxvY2FsZT1Ob25lKToKICAgICAgICBIVE1MQ2FsZW5kYXIuX19pbml0X18oc2VsZiwgZmlyc3R3ZWVrZGF5KQogICAgICAgIGlmIGxvY2FsZSBpcyBOb25lOgogICAgICAgICAgICBsb2NhbGUgPSBfbG9jYWxlLmdldGRlZmF1bHRsb2NhbGUoKQogICAgICAgIHNlbGYubG9jYWxlID0gbG9jYWxlCgogICAgZGVmIGZvcm1hdHdlZWtkYXkoc2VsZiwgZGF5KToKICAgICAgICB3aXRoIGRpZmZlcmVudF9sb2NhbGUoc2VsZi5sb2NhbGUpOgogICAgICAgICAgICBzID0gZGF5X2FiYnJbZGF5XQogICAgICAgICAgICByZXR1cm4gJzx0aCBjbGFzcz0iJXMiPiVzPC90aD4nICUgKHNlbGYuY3NzY2xhc3Nlc1tkYXldLCBzKQoKICAgIGRlZiBmb3JtYXRtb250aG5hbWUoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHdpdGh5ZWFyPVRydWUpOgogICAgICAgIHdpdGggZGlmZmVyZW50X2xvY2FsZShzZWxmLmxvY2FsZSk6CiAgICAgICAgICAgIHMgPSBtb250aF9uYW1lW3RoZW1vbnRoXQogICAgICAgICAgICBpZiB3aXRoeWVhcjoKICAgICAgICAgICAgICAgIHMgPSAnJXMgJXMnICUgKHMsIHRoZXllYXIpCiAgICAgICAgICAgIHJldHVybiAnPHRyPjx0aCBjb2xzcGFuPSI3IiBjbGFzcz0ibW9udGgiPiVzPC90aD48L3RyPicgJSBzCgoKIyBTdXBwb3J0IGZvciBvbGQgbW9kdWxlIGxldmVsIGludGVyZmFjZQpjID0gVGV4dENhbGVuZGFyKCkKCmZpcnN0d2Vla2RheSA9IGMuZ2V0Zmlyc3R3ZWVrZGF5CgpkZWYgc2V0Zmlyc3R3ZWVrZGF5KGZpcnN0d2Vla2RheSk6CiAgICBpZiBub3QgTU9OREFZIDw9IGZpcnN0d2Vla2RheSA8PSBTVU5EQVk6CiAgICAgICAgcmFpc2UgSWxsZWdhbFdlZWtkYXlFcnJvcihmaXJzdHdlZWtkYXkpCiAgICBjLmZpcnN0d2Vla2RheSA9IGZpcnN0d2Vla2RheQoKbW9udGhjYWxlbmRhciA9IGMubW9udGhkYXlzY2FsZW5kYXIKcHJ3ZWVrID0gYy5wcndlZWsKd2VlayA9IGMuZm9ybWF0d2Vlawp3ZWVraGVhZGVyID0gYy5mb3JtYXR3ZWVraGVhZGVyCnBybW9udGggPSBjLnBybW9udGgKbW9udGggPSBjLmZvcm1hdG1vbnRoCmNhbGVuZGFyID0gYy5mb3JtYXR5ZWFyCnByY2FsID0gYy5wcnllYXIKCgojIFNwYWNpbmcgb2YgbW9udGggY29sdW1ucyBmb3IgbXVsdGktY29sdW1uIHllYXIgY2FsZW5kYXIKX2NvbHdpZHRoID0gNyozIC0gMSAgICAgICAgICMgQW1vdW50IHByaW50ZWQgYnkgcHJ3ZWVrKCkKX3NwYWNpbmcgPSA2ICAgICAgICAgICAgICAgICMgTnVtYmVyIG9mIHNwYWNlcyBiZXR3ZWVuIGNvbHVtbnMKCgpkZWYgZm9ybWF0KGNvbHMsIGNvbHdpZHRoPV9jb2x3aWR0aCwgc3BhY2luZz1fc3BhY2luZyk6CiAgICAiIiJQcmludHMgbXVsdGktY29sdW1uIGZvcm1hdHRpbmcgZm9yIHllYXIgY2FsZW5kYXJzIiIiCiAgICBwcmludChmb3JtYXRzdHJpbmcoY29scywgY29sd2lkdGgsIHNwYWNpbmcpKQoKCmRlZiBmb3JtYXRzdHJpbmcoY29scywgY29sd2lkdGg9X2NvbHdpZHRoLCBzcGFjaW5nPV9zcGFjaW5nKToKICAgICIiIlJldHVybnMgYSBzdHJpbmcgZm9ybWF0dGVkIGZyb20gbiBzdHJpbmdzLCBjZW50ZXJlZCB3aXRoaW4gbiBjb2x1bW5zLiIiIgogICAgc3BhY2luZyAqPSAnICcKICAgIHJldHVybiBzcGFjaW5nLmpvaW4oYy5jZW50ZXIoY29sd2lkdGgpIGZvciBjIGluIGNvbHMpCgoKRVBPQ0ggPSAxOTcwCl9FUE9DSF9PUkQgPSBkYXRldGltZS5kYXRlKEVQT0NILCAxLCAxKS50b29yZGluYWwoKQoKCmRlZiB0aW1lZ20odHVwbGUpOgogICAgIiIiVW5yZWxhdGVkIGJ1dCBoYW5keSBmdW5jdGlvbiB0byBjYWxjdWxhdGUgVW5peCB0aW1lc3RhbXAgZnJvbSBHTVQuIiIiCiAgICB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCA9IHR1cGxlWzo2XQogICAgZGF5cyA9IGRhdGV0aW1lLmRhdGUoeWVhciwgbW9udGgsIDEpLnRvb3JkaW5hbCgpIC0gX0VQT0NIX09SRCArIGRheSAtIDEKICAgIGhvdXJzID0gZGF5cyoyNCArIGhvdXIKICAgIG1pbnV0ZXMgPSBob3Vycyo2MCArIG1pbnV0ZQogICAgc2Vjb25kcyA9IG1pbnV0ZXMqNjAgKyBzZWNvbmQKICAgIHJldHVybiBzZWNvbmRzCgoKZGVmIG1haW4oYXJncyk6CiAgICBpbXBvcnQgb3B0cGFyc2UKICAgIHBhcnNlciA9IG9wdHBhcnNlLk9wdGlvblBhcnNlcih1c2FnZT0idXNhZ2U6ICVwcm9nIFtvcHRpb25zXSBbeWVhciBbbW9udGhdXSIpCiAgICBwYXJzZXIuYWRkX29wdGlvbigKICAgICAgICAiLXciLCAiLS13aWR0aCIsCiAgICAgICAgZGVzdD0id2lkdGgiLCB0eXBlPSJpbnQiLCBkZWZhdWx0PTIsCiAgICAgICAgaGVscD0id2lkdGggb2YgZGF0ZSBjb2x1bW4gKGRlZmF1bHQgMiwgdGV4dCBvbmx5KSIKICAgICkKICAgIHBhcnNlci5hZGRfb3B0aW9uKAogICAgICAgICItbCIsICItLWxpbmVzIiwKICAgICAgICBkZXN0PSJsaW5lcyIsIHR5cGU9ImludCIsIGRlZmF1bHQ9MSwKICAgICAgICBoZWxwPSJudW1iZXIgb2YgbGluZXMgZm9yIGVhY2ggd2VlayAoZGVmYXVsdCAxLCB0ZXh0IG9ubHkpIgogICAgKQogICAgcGFyc2VyLmFkZF9vcHRpb24oCiAgICAgICAgIi1zIiwgIi0tc3BhY2luZyIsCiAgICAgICAgZGVzdD0ic3BhY2luZyIsIHR5cGU9ImludCIsIGRlZmF1bHQ9NiwKICAgICAgICBoZWxwPSJzcGFjaW5nIGJldHdlZW4gbW9udGhzIChkZWZhdWx0IDYsIHRleHQgb25seSkiCiAgICApCiAgICBwYXJzZXIuYWRkX29wdGlvbigKICAgICAgICAiLW0iLCAiLS1tb250aHMiLAogICAgICAgIGRlc3Q9Im1vbnRocyIsIHR5cGU9ImludCIsIGRlZmF1bHQ9MywKICAgICAgICBoZWxwPSJtb250aHMgcGVyIHJvdyAoZGVmYXVsdCAzLCB0ZXh0IG9ubHkpIgogICAgKQogICAgcGFyc2VyLmFkZF9vcHRpb24oCiAgICAgICAgIi1jIiwgIi0tY3NzIiwKICAgICAgICBkZXN0PSJjc3MiLCBkZWZhdWx0PSJjYWxlbmRhci5jc3MiLAogICAgICAgIGhlbHA9IkNTUyB0byB1c2UgZm9yIHBhZ2UgKGh0bWwgb25seSkiCiAgICApCiAgICBwYXJzZXIuYWRkX29wdGlvbigKICAgICAgICAiLUwiLCAiLS1sb2NhbGUiLAogICAgICAgIGRlc3Q9ImxvY2FsZSIsIGRlZmF1bHQ9Tm9uZSwKICAgICAgICBoZWxwPSJsb2NhbGUgdG8gYmUgdXNlZCBmcm9tIG1vbnRoIGFuZCB3ZWVrZGF5IG5hbWVzIgogICAgKQogICAgcGFyc2VyLmFkZF9vcHRpb24oCiAgICAgICAgIi1lIiwgIi0tZW5jb2RpbmciLAogICAgICAgIGRlc3Q9ImVuY29kaW5nIiwgZGVmYXVsdD1Ob25lLAogICAgICAgIGhlbHA9IkVuY29kaW5nIHRvIHVzZSBmb3Igb3V0cHV0LiIKICAgICkKICAgIHBhcnNlci5hZGRfb3B0aW9uKAogICAgICAgICItdCIsICItLXR5cGUiLAogICAgICAgIGRlc3Q9InR5cGUiLCBkZWZhdWx0PSJ0ZXh0IiwKICAgICAgICBjaG9pY2VzPSgidGV4dCIsICJodG1sIiksCiAgICAgICAgaGVscD0ib3V0cHV0IHR5cGUgKHRleHQgb3IgaHRtbCkiCiAgICApCgogICAgKG9wdGlvbnMsIGFyZ3MpID0gcGFyc2VyLnBhcnNlX2FyZ3MoYXJncykKCiAgICBpZiBvcHRpb25zLmxvY2FsZSBhbmQgbm90IG9wdGlvbnMuZW5jb2Rpbmc6CiAgICAgICAgcGFyc2VyLmVycm9yKCJpZiAtLWxvY2FsZSBpcyBzcGVjaWZpZWQgLS1lbmNvZGluZyBpcyByZXF1aXJlZCIpCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZSwgb3B0aW9ucy5lbmNvZGluZwoKICAgIGlmIG9wdGlvbnMudHlwZSA9PSAiaHRtbCI6CiAgICAgICAgaWYgb3B0aW9ucy5sb2NhbGU6CiAgICAgICAgICAgIGNhbCA9IExvY2FsZUhUTUxDYWxlbmRhcihsb2NhbGU9bG9jYWxlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNhbCA9IEhUTUxDYWxlbmRhcigpCiAgICAgICAgZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nCiAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZToKICAgICAgICAgICAgZW5jb2RpbmcgPSBzeXMuZ2V0ZGVmYXVsdGVuY29kaW5nKCkKICAgICAgICBvcHRkaWN0ID0gZGljdChlbmNvZGluZz1lbmNvZGluZywgY3NzPW9wdGlvbnMuY3NzKQogICAgICAgIHdyaXRlID0gc3lzLnN0ZG91dC5idWZmZXIud3JpdGUKICAgICAgICBpZiBsZW4oYXJncykgPT0gMToKICAgICAgICAgICAgd3JpdGUoY2FsLmZvcm1hdHllYXJwYWdlKGRhdGV0aW1lLmRhdGUudG9kYXkoKS55ZWFyLCAqKm9wdGRpY3QpKQogICAgICAgIGVsaWYgbGVuKGFyZ3MpID09IDI6CiAgICAgICAgICAgIHdyaXRlKGNhbC5mb3JtYXR5ZWFycGFnZShpbnQoYXJnc1sxXSksICoqb3B0ZGljdCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGFyc2VyLmVycm9yKCJpbmNvcnJlY3QgbnVtYmVyIG9mIGFyZ3VtZW50cyIpCiAgICAgICAgICAgIHN5cy5leGl0KDEpCiAgICBlbHNlOgogICAgICAgIGlmIG9wdGlvbnMubG9jYWxlOgogICAgICAgICAgICBjYWwgPSBMb2NhbGVUZXh0Q2FsZW5kYXIobG9jYWxlPWxvY2FsZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjYWwgPSBUZXh0Q2FsZW5kYXIoKQogICAgICAgIG9wdGRpY3QgPSBkaWN0KHc9b3B0aW9ucy53aWR0aCwgbD1vcHRpb25zLmxpbmVzKQogICAgICAgIGlmIGxlbihhcmdzKSAhPSAzOgogICAgICAgICAgICBvcHRkaWN0WyJjIl0gPSBvcHRpb25zLnNwYWNpbmcKICAgICAgICAgICAgb3B0ZGljdFsibSJdID0gb3B0aW9ucy5tb250aHMKICAgICAgICBpZiBsZW4oYXJncykgPT0gMToKICAgICAgICAgICAgcmVzdWx0ID0gY2FsLmZvcm1hdHllYXIoZGF0ZXRpbWUuZGF0ZS50b2RheSgpLnllYXIsICoqb3B0ZGljdCkKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAyOgogICAgICAgICAgICByZXN1bHQgPSBjYWwuZm9ybWF0eWVhcihpbnQoYXJnc1sxXSksICoqb3B0ZGljdCkKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAzOgogICAgICAgICAgICByZXN1bHQgPSBjYWwuZm9ybWF0bW9udGgoaW50KGFyZ3NbMV0pLCBpbnQoYXJnc1syXSksICoqb3B0ZGljdCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwYXJzZXIuZXJyb3IoImluY29ycmVjdCBudW1iZXIgb2YgYXJndW1lbnRzIikKICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgICAgICB3cml0ZSA9IHN5cy5zdGRvdXQud3JpdGUKICAgICAgICBpZiBvcHRpb25zLmVuY29kaW5nOgogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuZW5jb2RlKG9wdGlvbnMuZW5jb2RpbmcpCiAgICAgICAgICAgIHdyaXRlID0gc3lzLnN0ZG91dC5idWZmZXIud3JpdGUKICAgICAgICB3cml0ZShyZXN1bHQpCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oc3lzLmFyZ3YpCg==',
'/Lib/getopt.py':'IiIiUGFyc2VyIGZvciBjb21tYW5kIGxpbmUgb3B0aW9ucy4KClRoaXMgbW9kdWxlIGhlbHBzIHNjcmlwdHMgdG8gcGFyc2UgdGhlIGNvbW1hbmQgbGluZSBhcmd1bWVudHMgaW4Kc3lzLmFyZ3YuICBJdCBzdXBwb3J0cyB0aGUgc2FtZSBjb252ZW50aW9ucyBhcyB0aGUgVW5peCBnZXRvcHQoKQpmdW5jdGlvbiAoaW5jbHVkaW5nIHRoZSBzcGVjaWFsIG1lYW5pbmdzIG9mIGFyZ3VtZW50cyBvZiB0aGUgZm9ybSBgLScKYW5kIGAtLScpLiAgTG9uZyBvcHRpb25zIHNpbWlsYXIgdG8gdGhvc2Ugc3VwcG9ydGVkIGJ5IEdOVSBzb2Z0d2FyZQptYXkgYmUgdXNlZCBhcyB3ZWxsIHZpYSBhbiBvcHRpb25hbCB0aGlyZCBhcmd1bWVudC4gIFRoaXMgbW9kdWxlCnByb3ZpZGVzIHR3byBmdW5jdGlvbnMgYW5kIGFuIGV4Y2VwdGlvbjoKCmdldG9wdCgpIC0tIFBhcnNlIGNvbW1hbmQgbGluZSBvcHRpb25zCmdudV9nZXRvcHQoKSAtLSBMaWtlIGdldG9wdCgpLCBidXQgYWxsb3cgb3B0aW9uIGFuZCBub24tb3B0aW9uIGFyZ3VtZW50cwp0byBiZSBpbnRlcm1peGVkLgpHZXRvcHRFcnJvciAtLSBleGNlcHRpb24gKGNsYXNzKSByYWlzZWQgd2l0aCAnb3B0JyBhdHRyaWJ1dGUsIHdoaWNoIGlzIHRoZQpvcHRpb24gaW52b2x2ZWQgd2l0aCB0aGUgZXhjZXB0aW9uLgoiIiIKCiMgTG9uZyBvcHRpb24gc3VwcG9ydCBhZGRlZCBieSBMYXJzIFdpcnplbml1cyA8bGl3QGlraS5maT4uCiMKIyBHZXJyaXQgSG9sbCA8Z2Vycml0QG5sLmxpbnV4Lm9yZz4gbW92ZWQgdGhlIHN0cmluZy1iYXNlZCBleGNlcHRpb25zCiMgdG8gY2xhc3MtYmFzZWQgZXhjZXB0aW9ucy4KIwojIFBldGVyIMODwoVzdHJhbmQgPGFzdHJhbmRAbHlzYXRvci5saXUuc2U+IGFkZGVkIGdudV9nZXRvcHQoKS4KIwojIFRPRE8gZm9yIGdudV9nZXRvcHQoKToKIwojIC0gR05VIGdldG9wdF9sb25nX29ubHkgbWVjaGFuaXNtCiMgLSBhbGxvdyB0aGUgY2FsbGVyIHRvIHNwZWNpZnkgb3JkZXJpbmcKIyAtIFJFVFVSTl9JTl9PUkRFUiBvcHRpb24KIyAtIEdOVSBleHRlbnNpb24gd2l0aCAnLScgYXMgZmlyc3QgY2hhcmFjdGVyIG9mIG9wdGlvbiBzdHJpbmcKIyAtIG9wdGlvbmFsIGFyZ3VtZW50cywgc3BlY2lmaWVkIGJ5IGRvdWJsZSBjb2xvbnMKIyAtIGEgb3B0aW9uIHN0cmluZyB3aXRoIGEgVyBmb2xsb3dlZCBieSBzZW1pY29sb24gc2hvdWxkCiMgICB0cmVhdCAiLVcgZm9vIiBhcyAiLS1mb28iCgpfX2FsbF9fID0gWyJHZXRvcHRFcnJvciIsImVycm9yIiwiZ2V0b3B0IiwiZ251X2dldG9wdCJdCgppbXBvcnQgb3MKCmNsYXNzIEdldG9wdEVycm9yKEV4Y2VwdGlvbik6CiAgICBvcHQgPSAnJwogICAgbXNnID0gJycKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtc2csIG9wdD0nJyk6CiAgICAgICAgc2VsZi5tc2cgPSBtc2cKICAgICAgICBzZWxmLm9wdCA9IG9wdAogICAgICAgIEV4Y2VwdGlvbi5fX2luaXRfXyhzZWxmLCBtc2csIG9wdCkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5tc2cKCmVycm9yID0gR2V0b3B0RXJyb3IgIyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5CgpkZWYgZ2V0b3B0KGFyZ3MsIHNob3J0b3B0cywgbG9uZ29wdHMgPSBbXSk6CiAgICAiIiJnZXRvcHQoYXJncywgb3B0aW9uc1ssIGxvbmdfb3B0aW9uc10pIC0+IG9wdHMsIGFyZ3MKCiAgICBQYXJzZXMgY29tbWFuZCBsaW5lIG9wdGlvbnMgYW5kIHBhcmFtZXRlciBsaXN0LiAgYXJncyBpcyB0aGUKICAgIGFyZ3VtZW50IGxpc3QgdG8gYmUgcGFyc2VkLCB3aXRob3V0IHRoZSBsZWFkaW5nIHJlZmVyZW5jZSB0byB0aGUKICAgIHJ1bm5pbmcgcHJvZ3JhbS4gIFR5cGljYWxseSwgdGhpcyBtZWFucyAic3lzLmFyZ3ZbMTpdIi4gIHNob3J0b3B0cwogICAgaXMgdGhlIHN0cmluZyBvZiBvcHRpb24gbGV0dGVycyB0aGF0IHRoZSBzY3JpcHQgd2FudHMgdG8KICAgIHJlY29nbml6ZSwgd2l0aCBvcHRpb25zIHRoYXQgcmVxdWlyZSBhbiBhcmd1bWVudCBmb2xsb3dlZCBieSBhCiAgICBjb2xvbiAoaS5lLiwgdGhlIHNhbWUgZm9ybWF0IHRoYXQgVW5peCBnZXRvcHQoKSB1c2VzKS4gIElmCiAgICBzcGVjaWZpZWQsIGxvbmdvcHRzIGlzIGEgbGlzdCBvZiBzdHJpbmdzIHdpdGggdGhlIG5hbWVzIG9mIHRoZQogICAgbG9uZyBvcHRpb25zIHdoaWNoIHNob3VsZCBiZSBzdXBwb3J0ZWQuICBUaGUgbGVhZGluZyAnLS0nCiAgICBjaGFyYWN0ZXJzIHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIG9wdGlvbiBuYW1lLiAgT3B0aW9ucwogICAgd2hpY2ggcmVxdWlyZSBhbiBhcmd1bWVudCBzaG91bGQgYmUgZm9sbG93ZWQgYnkgYW4gZXF1YWwgc2lnbgogICAgKCc9JykuCgogICAgVGhlIHJldHVybiB2YWx1ZSBjb25zaXN0cyBvZiB0d28gZWxlbWVudHM6IHRoZSBmaXJzdCBpcyBhIGxpc3Qgb2YKICAgIChvcHRpb24sIHZhbHVlKSBwYWlyczsgdGhlIHNlY29uZCBpcyB0aGUgbGlzdCBvZiBwcm9ncmFtIGFyZ3VtZW50cwogICAgbGVmdCBhZnRlciB0aGUgb3B0aW9uIGxpc3Qgd2FzIHN0cmlwcGVkICh0aGlzIGlzIGEgdHJhaWxpbmcgc2xpY2UKICAgIG9mIHRoZSBmaXJzdCBhcmd1bWVudCkuICBFYWNoIG9wdGlvbi1hbmQtdmFsdWUgcGFpciByZXR1cm5lZCBoYXMKICAgIHRoZSBvcHRpb24gYXMgaXRzIGZpcnN0IGVsZW1lbnQsIHByZWZpeGVkIHdpdGggYSBoeXBoZW4gKGUuZy4sCiAgICAnLXgnKSwgYW5kIHRoZSBvcHRpb24gYXJndW1lbnQgYXMgaXRzIHNlY29uZCBlbGVtZW50LCBvciBhbiBlbXB0eQogICAgc3RyaW5nIGlmIHRoZSBvcHRpb24gaGFzIG5vIGFyZ3VtZW50LiAgVGhlIG9wdGlvbnMgb2NjdXIgaW4gdGhlCiAgICBsaXN0IGluIHRoZSBzYW1lIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBmb3VuZCwgdGh1cyBhbGxvd2luZwogICAgbXVsdGlwbGUgb2NjdXJyZW5jZXMuICBMb25nIGFuZCBzaG9ydCBvcHRpb25zIG1heSBiZSBtaXhlZC4KCiAgICAiIiIKCiAgICBvcHRzID0gW10KICAgIGlmIHR5cGUobG9uZ29wdHMpID09IHR5cGUoIiIpOgogICAgICAgIGxvbmdvcHRzID0gW2xvbmdvcHRzXQogICAgZWxzZToKICAgICAgICBsb25nb3B0cyA9IGxpc3QobG9uZ29wdHMpCiAgICB3aGlsZSBhcmdzIGFuZCBhcmdzWzBdLnN0YXJ0c3dpdGgoJy0nKSBhbmQgYXJnc1swXSAhPSAnLSc6CiAgICAgICAgaWYgYXJnc1swXSA9PSAnLS0nOgogICAgICAgICAgICBhcmdzID0gYXJnc1sxOl0KICAgICAgICAgICAgYnJlYWsKICAgICAgICBpZiBhcmdzWzBdLnN0YXJ0c3dpdGgoJy0tJyk6CiAgICAgICAgICAgIG9wdHMsIGFyZ3MgPSBkb19sb25ncyhvcHRzLCBhcmdzWzBdWzI6XSwgbG9uZ29wdHMsIGFyZ3NbMTpdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9wdHMsIGFyZ3MgPSBkb19zaG9ydHMob3B0cywgYXJnc1swXVsxOl0sIHNob3J0b3B0cywgYXJnc1sxOl0pCgogICAgcmV0dXJuIG9wdHMsIGFyZ3MKCmRlZiBnbnVfZ2V0b3B0KGFyZ3MsIHNob3J0b3B0cywgbG9uZ29wdHMgPSBbXSk6CiAgICAiIiJnZXRvcHQoYXJncywgb3B0aW9uc1ssIGxvbmdfb3B0aW9uc10pIC0+IG9wdHMsIGFyZ3MKCiAgICBUaGlzIGZ1bmN0aW9uIHdvcmtzIGxpa2UgZ2V0b3B0KCksIGV4Y2VwdCB0aGF0IEdOVSBzdHlsZSBzY2FubmluZwogICAgbW9kZSBpcyB1c2VkIGJ5IGRlZmF1bHQuIFRoaXMgbWVhbnMgdGhhdCBvcHRpb24gYW5kIG5vbi1vcHRpb24KICAgIGFyZ3VtZW50cyBtYXkgYmUgaW50ZXJtaXhlZC4gVGhlIGdldG9wdCgpIGZ1bmN0aW9uIHN0b3BzCiAgICBwcm9jZXNzaW5nIG9wdGlvbnMgYXMgc29vbiBhcyBhIG5vbi1vcHRpb24gYXJndW1lbnQgaXMKICAgIGVuY291bnRlcmVkLgoKICAgIElmIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgdGhlIG9wdGlvbiBzdHJpbmcgaXMgYCsnLCBvciBpZiB0aGUKICAgIGVudmlyb25tZW50IHZhcmlhYmxlIFBPU0lYTFlfQ09SUkVDVCBpcyBzZXQsIHRoZW4gb3B0aW9uCiAgICBwcm9jZXNzaW5nIHN0b3BzIGFzIHNvb24gYXMgYSBub24tb3B0aW9uIGFyZ3VtZW50IGlzIGVuY291bnRlcmVkLgoKICAgICIiIgoKICAgIG9wdHMgPSBbXQogICAgcHJvZ19hcmdzID0gW10KICAgIGlmIGlzaW5zdGFuY2UobG9uZ29wdHMsIHN0cik6CiAgICAgICAgbG9uZ29wdHMgPSBbbG9uZ29wdHNdCiAgICBlbHNlOgogICAgICAgIGxvbmdvcHRzID0gbGlzdChsb25nb3B0cykKCiAgICAjIEFsbG93IG9wdGlvbnMgYWZ0ZXIgbm9uLW9wdGlvbiBhcmd1bWVudHM/CiAgICBpZiBzaG9ydG9wdHMuc3RhcnRzd2l0aCgnKycpOgogICAgICAgIHNob3J0b3B0cyA9IHNob3J0b3B0c1sxOl0KICAgICAgICBhbGxfb3B0aW9uc19maXJzdCA9IFRydWUKICAgIGVsaWYgb3MuZW52aXJvbi5nZXQoIlBPU0lYTFlfQ09SUkVDVCIpOgogICAgICAgIGFsbF9vcHRpb25zX2ZpcnN0ID0gVHJ1ZQogICAgZWxzZToKICAgICAgICBhbGxfb3B0aW9uc19maXJzdCA9IEZhbHNlCgogICAgd2hpbGUgYXJnczoKICAgICAgICBpZiBhcmdzWzBdID09ICctLSc6CiAgICAgICAgICAgIHByb2dfYXJncyArPSBhcmdzWzE6XQogICAgICAgICAgICBicmVhawoKICAgICAgICBpZiBhcmdzWzBdWzoyXSA9PSAnLS0nOgogICAgICAgICAgICBvcHRzLCBhcmdzID0gZG9fbG9uZ3Mob3B0cywgYXJnc1swXVsyOl0sIGxvbmdvcHRzLCBhcmdzWzE6XSkKICAgICAgICBlbGlmIGFyZ3NbMF1bOjFdID09ICctJyBhbmQgYXJnc1swXSAhPSAnLSc6CiAgICAgICAgICAgIG9wdHMsIGFyZ3MgPSBkb19zaG9ydHMob3B0cywgYXJnc1swXVsxOl0sIHNob3J0b3B0cywgYXJnc1sxOl0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgYWxsX29wdGlvbnNfZmlyc3Q6CiAgICAgICAgICAgICAgICBwcm9nX2FyZ3MgKz0gYXJncwogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByb2dfYXJncy5hcHBlbmQoYXJnc1swXSkKICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmdzWzE6XQoKICAgIHJldHVybiBvcHRzLCBwcm9nX2FyZ3MKCmRlZiBkb19sb25ncyhvcHRzLCBvcHQsIGxvbmdvcHRzLCBhcmdzKToKICAgIHRyeToKICAgICAgICBpID0gb3B0LmluZGV4KCc9JykKICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIG9wdGFyZyA9IE5vbmUKICAgIGVsc2U6CiAgICAgICAgb3B0LCBvcHRhcmcgPSBvcHRbOmldLCBvcHRbaSsxOl0KCiAgICBoYXNfYXJnLCBvcHQgPSBsb25nX2hhc19hcmdzKG9wdCwgbG9uZ29wdHMpCiAgICBpZiBoYXNfYXJnOgogICAgICAgIGlmIG9wdGFyZyBpcyBOb25lOgogICAgICAgICAgICBpZiBub3QgYXJnczoKICAgICAgICAgICAgICAgIHJhaXNlIEdldG9wdEVycm9yKCdvcHRpb24gLS0lcyByZXF1aXJlcyBhcmd1bWVudCcgJSBvcHQsIG9wdCkKICAgICAgICAgICAgb3B0YXJnLCBhcmdzID0gYXJnc1swXSwgYXJnc1sxOl0KICAgIGVsaWYgb3B0YXJnIGlzIG5vdCBOb25lOgogICAgICAgIHJhaXNlIEdldG9wdEVycm9yKCdvcHRpb24gLS0lcyBtdXN0IG5vdCBoYXZlIGFuIGFyZ3VtZW50JyAlIG9wdCwgb3B0KQogICAgb3B0cy5hcHBlbmQoKCctLScgKyBvcHQsIG9wdGFyZyBvciAnJykpCiAgICByZXR1cm4gb3B0cywgYXJncwoKIyBSZXR1cm46CiMgICBoYXNfYXJnPwojICAgZnVsbCBvcHRpb24gbmFtZQpkZWYgbG9uZ19oYXNfYXJncyhvcHQsIGxvbmdvcHRzKToKICAgIHBvc3NpYmlsaXRpZXMgPSBbbyBmb3IgbyBpbiBsb25nb3B0cyBpZiBvLnN0YXJ0c3dpdGgob3B0KV0KICAgIGlmIG5vdCBwb3NzaWJpbGl0aWVzOgogICAgICAgIHJhaXNlIEdldG9wdEVycm9yKCdvcHRpb24gLS0lcyBub3QgcmVjb2duaXplZCcgJSBvcHQsIG9wdCkKICAgICMgSXMgdGhlcmUgYW4gZXhhY3QgbWF0Y2g/CiAgICBpZiBvcHQgaW4gcG9zc2liaWxpdGllczoKICAgICAgICByZXR1cm4gRmFsc2UsIG9wdAogICAgZWxpZiBvcHQgKyAnPScgaW4gcG9zc2liaWxpdGllczoKICAgICAgICByZXR1cm4gVHJ1ZSwgb3B0CiAgICAjIE5vIGV4YWN0IG1hdGNoLCBzbyBiZXR0ZXIgYmUgdW5pcXVlLgogICAgaWYgbGVuKHBvc3NpYmlsaXRpZXMpID4gMToKICAgICAgICAjIFhYWCBzaW5jZSBwb3NzaWJpbGl0aWVzIGNvbnRhaW5zIGFsbCB2YWxpZCBjb250aW51YXRpb25zLCBtaWdodCBiZQogICAgICAgICMgbmljZSB0byB3b3JrIHRoZW0gaW50byB0aGUgZXJyb3IgbXNnCiAgICAgICAgcmFpc2UgR2V0b3B0RXJyb3IoJ29wdGlvbiAtLSVzIG5vdCBhIHVuaXF1ZSBwcmVmaXgnICUgb3B0LCBvcHQpCiAgICBhc3NlcnQgbGVuKHBvc3NpYmlsaXRpZXMpID09IDEKICAgIHVuaXF1ZV9tYXRjaCA9IHBvc3NpYmlsaXRpZXNbMF0KICAgIGhhc19hcmcgPSB1bmlxdWVfbWF0Y2guZW5kc3dpdGgoJz0nKQogICAgaWYgaGFzX2FyZzoKICAgICAgICB1bmlxdWVfbWF0Y2ggPSB1bmlxdWVfbWF0Y2hbOi0xXQogICAgcmV0dXJuIGhhc19hcmcsIHVuaXF1ZV9tYXRjaAoKZGVmIGRvX3Nob3J0cyhvcHRzLCBvcHRzdHJpbmcsIHNob3J0b3B0cywgYXJncyk6CiAgICB3aGlsZSBvcHRzdHJpbmcgIT0gJyc6CiAgICAgICAgb3B0LCBvcHRzdHJpbmcgPSBvcHRzdHJpbmdbMF0sIG9wdHN0cmluZ1sxOl0KICAgICAgICBpZiBzaG9ydF9oYXNfYXJnKG9wdCwgc2hvcnRvcHRzKToKICAgICAgICAgICAgaWYgb3B0c3RyaW5nID09ICcnOgogICAgICAgICAgICAgICAgaWYgbm90IGFyZ3M6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgR2V0b3B0RXJyb3IoJ29wdGlvbiAtJXMgcmVxdWlyZXMgYXJndW1lbnQnICUgb3B0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdCkKICAgICAgICAgICAgICAgIG9wdHN0cmluZywgYXJncyA9IGFyZ3NbMF0sIGFyZ3NbMTpdCiAgICAgICAgICAgIG9wdGFyZywgb3B0c3RyaW5nID0gb3B0c3RyaW5nLCAnJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9wdGFyZyA9ICcnCiAgICAgICAgb3B0cy5hcHBlbmQoKCctJyArIG9wdCwgb3B0YXJnKSkKICAgIHJldHVybiBvcHRzLCBhcmdzCgpkZWYgc2hvcnRfaGFzX2FyZyhvcHQsIHNob3J0b3B0cyk6CiAgICBmb3IgaSBpbiByYW5nZShsZW4oc2hvcnRvcHRzKSk6CiAgICAgICAgaWYgb3B0ID09IHNob3J0b3B0c1tpXSAhPSAnOic6CiAgICAgICAgICAgIHJldHVybiBzaG9ydG9wdHMuc3RhcnRzd2l0aCgnOicsIGkrMSkKICAgIHJhaXNlIEdldG9wdEVycm9yKCdvcHRpb24gLSVzIG5vdCByZWNvZ25pemVkJyAlIG9wdCwgb3B0KQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGltcG9ydCBzeXMKICAgIHByaW50KGdldG9wdChzeXMuYXJndlsxOl0sICJhOmIiLCBbImFscGhhPSIsICJiZXRhIl0pKQo=',
'/Lib/shutil.py':'IiIiVXRpbGl0eSBmdW5jdGlvbnMgZm9yIGNvcHlpbmcgYW5kIGFyY2hpdmluZyBmaWxlcyBhbmQgZGlyZWN0b3J5IHRyZWVzLgoKWFhYIFRoZSBmdW5jdGlvbnMgaGVyZSBkb24ndCBjb3B5IHRoZSByZXNvdXJjZSBmb3JrIG9yIG90aGVyIG1ldGFkYXRhIG9uIE1hYy4KCiIiIgoKaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHN0YXQKZnJvbSBvcy5wYXRoIGltcG9ydCBhYnNwYXRoCmltcG9ydCBmbm1hdGNoCmltcG9ydCBjb2xsZWN0aW9ucwppbXBvcnQgZXJybm8KaW1wb3J0IHRhcmZpbGUKCnRyeToKICAgIGltcG9ydCBiejIKICAgIGRlbCBiejIKICAgIF9CWjJfU1VQUE9SVEVEID0gVHJ1ZQpleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBfQloyX1NVUFBPUlRFRCA9IEZhbHNlCgp0cnk6CiAgICBmcm9tIHB3ZCBpbXBvcnQgZ2V0cHduYW0KZXhjZXB0IEltcG9ydEVycm9yOgogICAgZ2V0cHduYW0gPSBOb25lCgp0cnk6CiAgICBmcm9tIGdycCBpbXBvcnQgZ2V0Z3JuYW0KZXhjZXB0IEltcG9ydEVycm9yOgogICAgZ2V0Z3JuYW0gPSBOb25lCgpfX2FsbF9fID0gWyJjb3B5ZmlsZW9iaiIsICJjb3B5ZmlsZSIsICJjb3B5bW9kZSIsICJjb3B5c3RhdCIsICJjb3B5IiwgImNvcHkyIiwKICAgICAgICAgICAiY29weXRyZWUiLCAibW92ZSIsICJybXRyZWUiLCAiRXJyb3IiLCAiU3BlY2lhbEZpbGVFcnJvciIsCiAgICAgICAgICAgIkV4ZWNFcnJvciIsICJtYWtlX2FyY2hpdmUiLCAiZ2V0X2FyY2hpdmVfZm9ybWF0cyIsCiAgICAgICAgICAgInJlZ2lzdGVyX2FyY2hpdmVfZm9ybWF0IiwgInVucmVnaXN0ZXJfYXJjaGl2ZV9mb3JtYXQiLAogICAgICAgICAgICJnZXRfdW5wYWNrX2Zvcm1hdHMiLCAicmVnaXN0ZXJfdW5wYWNrX2Zvcm1hdCIsCiAgICAgICAgICAgInVucmVnaXN0ZXJfdW5wYWNrX2Zvcm1hdCIsICJ1bnBhY2tfYXJjaGl2ZSIsCiAgICAgICAgICAgImlnbm9yZV9wYXR0ZXJucyIsICJjaG93biIsICJ3aGljaCJdCiAgICAgICAgICAgIyBkaXNrX3VzYWdlIGlzIGFkZGVkIGxhdGVyLCBpZiBhdmFpbGFibGUgb24gdGhlIHBsYXRmb3JtCgpjbGFzcyBFcnJvcihFbnZpcm9ubWVudEVycm9yKToKICAgIHBhc3MKCmNsYXNzIFNwZWNpYWxGaWxlRXJyb3IoRW52aXJvbm1lbnRFcnJvcik6CiAgICAiIiJSYWlzZWQgd2hlbiB0cnlpbmcgdG8gZG8gYSBraW5kIG9mIG9wZXJhdGlvbiAoZS5nLiBjb3B5aW5nKSB3aGljaCBpcwogICAgbm90IHN1cHBvcnRlZCBvbiBhIHNwZWNpYWwgZmlsZSAoZS5nLiBhIG5hbWVkIHBpcGUpIiIiCgpjbGFzcyBFeGVjRXJyb3IoRW52aXJvbm1lbnRFcnJvcik6CiAgICAiIiJSYWlzZWQgd2hlbiBhIGNvbW1hbmQgY291bGQgbm90IGJlIGV4ZWN1dGVkIiIiCgpjbGFzcyBSZWFkRXJyb3IoRW52aXJvbm1lbnRFcnJvcik6CiAgICAiIiJSYWlzZWQgd2hlbiBhbiBhcmNoaXZlIGNhbm5vdCBiZSByZWFkIiIiCgpjbGFzcyBSZWdpc3RyeUVycm9yKEV4Y2VwdGlvbik6CiAgICAiIiJSYWlzZWQgd2hlbiBhIHJlZ2lzdGVyeSBvcGVyYXRpb24gd2l0aCB0aGUgYXJjaGl2aW5nCiAgICBhbmQgdW5wYWNraW5nIHJlZ2lzdGVyaWVzIGZhaWxzIiIiCgoKdHJ5OgogICAgV2luZG93c0Vycm9yCmV4Y2VwdCBOYW1lRXJyb3I6CiAgICBXaW5kb3dzRXJyb3IgPSBOb25lCgpkZWYgY29weWZpbGVvYmooZnNyYywgZmRzdCwgbGVuZ3RoPTE2KjEwMjQpOgogICAgIiIiY29weSBkYXRhIGZyb20gZmlsZS1saWtlIG9iamVjdCBmc3JjIHRvIGZpbGUtbGlrZSBvYmplY3QgZmRzdCIiIgogICAgd2hpbGUgMToKICAgICAgICBidWYgPSBmc3JjLnJlYWQobGVuZ3RoKQogICAgICAgIGlmIG5vdCBidWY6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZmRzdC53cml0ZShidWYpCgpkZWYgX3NhbWVmaWxlKHNyYywgZHN0KToKICAgICMgTWFjaW50b3NoLCBVbml4LgogICAgaWYgaGFzYXR0cihvcy5wYXRoLCAnc2FtZWZpbGUnKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBvcy5wYXRoLnNhbWVmaWxlKHNyYywgZHN0KQogICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAjIEFsbCBvdGhlciBwbGF0Zm9ybXM6IGNoZWNrIGZvciBzYW1lIHBhdGhuYW1lLgogICAgcmV0dXJuIChvcy5wYXRoLm5vcm1jYXNlKG9zLnBhdGguYWJzcGF0aChzcmMpKSA9PQogICAgICAgICAgICBvcy5wYXRoLm5vcm1jYXNlKG9zLnBhdGguYWJzcGF0aChkc3QpKSkKCmRlZiBjb3B5ZmlsZShzcmMsIGRzdCwgKiwgZm9sbG93X3N5bWxpbmtzPVRydWUpOgogICAgIiIiQ29weSBkYXRhIGZyb20gc3JjIHRvIGRzdC4KCiAgICBJZiBmb2xsb3dfc3ltbGlua3MgaXMgbm90IHNldCBhbmQgc3JjIGlzIGEgc3ltYm9saWMgbGluaywgYSBuZXcKICAgIHN5bWxpbmsgd2lsbCBiZSBjcmVhdGVkIGluc3RlYWQgb2YgY29weWluZyB0aGUgZmlsZSBpdCBwb2ludHMgdG8uCgogICAgIiIiCiAgICBpZiBfc2FtZWZpbGUoc3JjLCBkc3QpOgogICAgICAgIHJhaXNlIEVycm9yKCJgJXNgIGFuZCBgJXNgIGFyZSB0aGUgc2FtZSBmaWxlIiAlIChzcmMsIGRzdCkpCgogICAgZm9yIGZuIGluIFtzcmMsIGRzdF06CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzdCA9IG9zLnN0YXQoZm4pCiAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgICMgRmlsZSBtb3N0IGxpa2VseSBkb2VzIG5vdCBleGlzdAogICAgICAgICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBYWFggV2hhdCBhYm91dCBvdGhlciBzcGVjaWFsIGZpbGVzPyAoc29ja2V0cywgZGV2aWNlcy4uLikKICAgICAgICAgICAgaWYgc3RhdC5TX0lTRklGTyhzdC5zdF9tb2RlKToKICAgICAgICAgICAgICAgIHJhaXNlIFNwZWNpYWxGaWxlRXJyb3IoImAlc2AgaXMgYSBuYW1lZCBwaXBlIiAlIGZuKQoKICAgIGlmIG5vdCBmb2xsb3dfc3ltbGlua3MgYW5kIG9zLnBhdGguaXNsaW5rKHNyYyk6CiAgICAgICAgb3Muc3ltbGluayhvcy5yZWFkbGluayhzcmMpLCBkc3QpCiAgICBlbHNlOgogICAgICAgIHdpdGggb3BlbihzcmMsICdyYicpIGFzIGZzcmM6CiAgICAgICAgICAgIHdpdGggb3Blbihkc3QsICd3YicpIGFzIGZkc3Q6CiAgICAgICAgICAgICAgICBjb3B5ZmlsZW9iaihmc3JjLCBmZHN0KQogICAgcmV0dXJuIGRzdAoKZGVmIGNvcHltb2RlKHNyYywgZHN0LCAqLCBmb2xsb3dfc3ltbGlua3M9VHJ1ZSk6CiAgICAiIiJDb3B5IG1vZGUgYml0cyBmcm9tIHNyYyB0byBkc3QuCgogICAgSWYgZm9sbG93X3N5bWxpbmtzIGlzIG5vdCBzZXQsIHN5bWxpbmtzIGFyZW4ndCBmb2xsb3dlZCBpZiBhbmQgb25seQogICAgaWYgYm90aCBgc3JjYCBhbmQgYGRzdGAgYXJlIHN5bWxpbmtzLiAgSWYgYGxjaG1vZGAgaXNuJ3QgYXZhaWxhYmxlCiAgICAoZS5nLiBMaW51eCkgdGhpcyBtZXRob2QgZG9lcyBub3RoaW5nLgoKICAgICIiIgogICAgaWYgbm90IGZvbGxvd19zeW1saW5rcyBhbmQgb3MucGF0aC5pc2xpbmsoc3JjKSBhbmQgb3MucGF0aC5pc2xpbmsoZHN0KToKICAgICAgICBpZiBoYXNhdHRyKG9zLCAnbGNobW9kJyk6CiAgICAgICAgICAgIHN0YXRfZnVuYywgY2htb2RfZnVuYyA9IG9zLmxzdGF0LCBvcy5sY2htb2QKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4KICAgIGVsaWYgaGFzYXR0cihvcywgJ2NobW9kJyk6CiAgICAgICAgc3RhdF9mdW5jLCBjaG1vZF9mdW5jID0gb3Muc3RhdCwgb3MuY2htb2QKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuCgogICAgc3QgPSBzdGF0X2Z1bmMoc3JjKQogICAgY2htb2RfZnVuYyhkc3QsIHN0YXQuU19JTU9ERShzdC5zdF9tb2RlKSkKCmlmIGhhc2F0dHIob3MsICdsaXN0eGF0dHInKToKICAgIGRlZiBfY29weXhhdHRyKHNyYywgZHN0LCAqLCBmb2xsb3dfc3ltbGlua3M9VHJ1ZSk6CiAgICAgICAgIiIiQ29weSBleHRlbmRlZCBmaWxlc3lzdGVtIGF0dHJpYnV0ZXMgZnJvbSBgc3JjYCB0byBgZHN0YC4KCiAgICAgICAgT3ZlcndyaXRlIGV4aXN0aW5nIGF0dHJpYnV0ZXMuCgogICAgICAgIElmIGBmb2xsb3dfc3ltbGlua3NgIGlzIGZhbHNlLCBzeW1saW5rcyB3b24ndCBiZSBmb2xsb3dlZC4KCiAgICAgICAgIiIiCgogICAgICAgIHRyeToKICAgICAgICAgICAgbmFtZXMgPSBvcy5saXN0eGF0dHIoc3JjLCBmb2xsb3dfc3ltbGlua3M9Zm9sbG93X3N5bWxpbmtzKQogICAgICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGU6CiAgICAgICAgICAgIGlmIGUuZXJybm8gbm90IGluIChlcnJuby5FTk9UU1VQLCBlcnJuby5FTk9EQVRBKToKICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGZvciBuYW1lIGluIG5hbWVzOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IG9zLmdldHhhdHRyKHNyYywgbmFtZSwgZm9sbG93X3N5bWxpbmtzPWZvbGxvd19zeW1saW5rcykKICAgICAgICAgICAgICAgIG9zLnNldHhhdHRyKGRzdCwgbmFtZSwgdmFsdWUsIGZvbGxvd19zeW1saW5rcz1mb2xsb3dfc3ltbGlua3MpCiAgICAgICAgICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGU6CiAgICAgICAgICAgICAgICBpZiBlLmVycm5vIG5vdCBpbiAoZXJybm8uRVBFUk0sIGVycm5vLkVOT1RTVVAsIGVycm5vLkVOT0RBVEEpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCmVsc2U6CiAgICBkZWYgX2NvcHl4YXR0cigqYXJncywgKiprd2FyZ3MpOgogICAgICAgIHBhc3MKCmRlZiBjb3B5c3RhdChzcmMsIGRzdCwgKiwgZm9sbG93X3N5bWxpbmtzPVRydWUpOgogICAgIiIiQ29weSBhbGwgc3RhdCBpbmZvIChtb2RlIGJpdHMsIGF0aW1lLCBtdGltZSwgZmxhZ3MpIGZyb20gc3JjIHRvIGRzdC4KCiAgICBJZiB0aGUgb3B0aW9uYWwgZmxhZyBgZm9sbG93X3N5bWxpbmtzYCBpcyBub3Qgc2V0LCBzeW1saW5rcyBhcmVuJ3QgZm9sbG93ZWQgaWYgYW5kCiAgICBvbmx5IGlmIGJvdGggYHNyY2AgYW5kIGBkc3RgIGFyZSBzeW1saW5rcy4KCiAgICAiIiIKICAgIGRlZiBfbm9wKCphcmdzLCBucz1Ob25lLCBmb2xsb3dfc3ltbGlua3M9Tm9uZSk6CiAgICAgICAgcGFzcwoKICAgICMgZm9sbG93IHN5bWxpbmtzIChha2EgZG9uJ3Qgbm90IGZvbGxvdyBzeW1saW5rcykKICAgIGZvbGxvdyA9IGZvbGxvd19zeW1saW5rcyBvciBub3QgKG9zLnBhdGguaXNsaW5rKHNyYykgYW5kIG9zLnBhdGguaXNsaW5rKGRzdCkpCiAgICBpZiBmb2xsb3c6CiAgICAgICAgIyB1c2UgdGhlIHJlYWwgZnVuY3Rpb24gaWYgaXQgZXhpc3RzCiAgICAgICAgZGVmIGxvb2t1cChuYW1lKToKICAgICAgICAgICAgcmV0dXJuIGdldGF0dHIob3MsIG5hbWUsIF9ub3ApCiAgICBlbHNlOgogICAgICAgICMgdXNlIHRoZSByZWFsIGZ1bmN0aW9uIG9ubHkgaWYgaXQgZXhpc3RzCiAgICAgICAgIyAqYW5kKiBpdCBzdXBwb3J0cyBmb2xsb3dfc3ltbGlua3MKICAgICAgICBkZWYgbG9va3VwKG5hbWUpOgogICAgICAgICAgICBmbiA9IGdldGF0dHIob3MsIG5hbWUsIF9ub3ApCiAgICAgICAgICAgIGlmIGZuIGluIG9zLnN1cHBvcnRzX2ZvbGxvd19zeW1saW5rczoKICAgICAgICAgICAgICAgIHJldHVybiBmbgogICAgICAgICAgICByZXR1cm4gX25vcAoKICAgIHN0ID0gbG9va3VwKCJzdGF0Iikoc3JjLCBmb2xsb3dfc3ltbGlua3M9Zm9sbG93KQogICAgbW9kZSA9IHN0YXQuU19JTU9ERShzdC5zdF9tb2RlKQogICAgbG9va3VwKCJ1dGltZSIpKGRzdCwgbnM9KHN0LnN0X2F0aW1lX25zLCBzdC5zdF9tdGltZV9ucyksCiAgICAgICAgZm9sbG93X3N5bWxpbmtzPWZvbGxvdykKICAgIHRyeToKICAgICAgICBsb29rdXAoImNobW9kIikoZHN0LCBtb2RlLCBmb2xsb3dfc3ltbGlua3M9Zm9sbG93KQogICAgZXhjZXB0IE5vdEltcGxlbWVudGVkRXJyb3I6CiAgICAgICAgIyBpZiB3ZSBnb3QgYSBOb3RJbXBsZW1lbnRlZEVycm9yLCBpdCdzIGJlY2F1c2UKICAgICAgICAjICAgKiBmb2xsb3dfc3ltbGlua3M9RmFsc2UsCiAgICAgICAgIyAgICogbGNob3duKCkgaXMgdW5hdmFpbGFibGUsIGFuZAogICAgICAgICMgICAqIGVpdGhlcgogICAgICAgICMgICAgICAgKiBmY2hvd25hdCgpIGlzIHVudmFpbGFibGUgb3IKICAgICAgICAjICAgICAgICogZmNob3duYXQoKSBkb2Vzbid0IGltcGxlbWVudCBBVF9TWU1MSU5LX05PRk9MTE9XLgogICAgICAgICMgICAgICAgICAoaXQgcmV0dXJuZWQgRU5PU1VQLikKICAgICAgICAjIHRoZXJlZm9yZSB3ZSdyZSBvdXQgb2Ygb3B0aW9ucy0td2Ugc2ltcGx5IGNhbm5vdCBjaG93biB0aGUKICAgICAgICAjIHN5bWxpbmsuICBnaXZlIHVwLCBzdXBwcmVzcyB0aGUgZXJyb3IuCiAgICAgICAgIyAod2hpY2ggaXMgd2hhdCBzaHV0aWwgYWx3YXlzIGRpZCBpbiB0aGlzIGNpcmN1bXN0YW5jZS4pCiAgICAgICAgcGFzcwogICAgaWYgaGFzYXR0cihzdCwgJ3N0X2ZsYWdzJyk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBsb29rdXAoImNoZmxhZ3MiKShkc3QsIHN0LnN0X2ZsYWdzLCBmb2xsb3dfc3ltbGlua3M9Zm9sbG93KQogICAgICAgIGV4Y2VwdCBPU0Vycm9yIGFzIHdoeToKICAgICAgICAgICAgZm9yIGVyciBpbiAnRU9QTk9UU1VQUCcsICdFTk9UU1VQJzoKICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIoZXJybm8sIGVycikgYW5kIHdoeS5lcnJubyA9PSBnZXRhdHRyKGVycm5vLCBlcnIpOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZQogICAgX2NvcHl4YXR0cihzcmMsIGRzdCwgZm9sbG93X3N5bWxpbmtzPWZvbGxvdykKCmRlZiBjb3B5KHNyYywgZHN0LCAqLCBmb2xsb3dfc3ltbGlua3M9VHJ1ZSk6CiAgICAiIiJDb3B5IGRhdGEgYW5kIG1vZGUgYml0cyAoImNwIHNyYyBkc3QiKS4gUmV0dXJuIHRoZSBmaWxlJ3MgZGVzdGluYXRpb24uCgogICAgVGhlIGRlc3RpbmF0aW9uIG1heSBiZSBhIGRpcmVjdG9yeS4KCiAgICBJZiBmb2xsb3dfc3ltbGlua3MgaXMgZmFsc2UsIHN5bWxpbmtzIHdvbid0IGJlIGZvbGxvd2VkLiBUaGlzCiAgICByZXNlbWJsZXMgR05VJ3MgImNwIC1QIHNyYyBkc3QiLgoKICAgICIiIgogICAgaWYgb3MucGF0aC5pc2Rpcihkc3QpOgogICAgICAgIGRzdCA9IG9zLnBhdGguam9pbihkc3QsIG9zLnBhdGguYmFzZW5hbWUoc3JjKSkKICAgIGNvcHlmaWxlKHNyYywgZHN0LCBmb2xsb3dfc3ltbGlua3M9Zm9sbG93X3N5bWxpbmtzKQogICAgY29weW1vZGUoc3JjLCBkc3QsIGZvbGxvd19zeW1saW5rcz1mb2xsb3dfc3ltbGlua3MpCiAgICByZXR1cm4gZHN0CgpkZWYgY29weTIoc3JjLCBkc3QsICosIGZvbGxvd19zeW1saW5rcz1UcnVlKToKICAgICIiIkNvcHkgZGF0YSBhbmQgYWxsIHN0YXQgaW5mbyAoImNwIC1wIHNyYyBkc3QiKS4gUmV0dXJuIHRoZSBmaWxlJ3MKICAgIGRlc3RpbmF0aW9uLiIKCiAgICBUaGUgZGVzdGluYXRpb24gbWF5IGJlIGEgZGlyZWN0b3J5LgoKICAgIElmIGZvbGxvd19zeW1saW5rcyBpcyBmYWxzZSwgc3ltbGlua3Mgd29uJ3QgYmUgZm9sbG93ZWQuIFRoaXMKICAgIHJlc2VtYmxlcyBHTlUncyAiY3AgLVAgc3JjIGRzdCIuCgogICAgIiIiCiAgICBpZiBvcy5wYXRoLmlzZGlyKGRzdCk6CiAgICAgICAgZHN0ID0gb3MucGF0aC5qb2luKGRzdCwgb3MucGF0aC5iYXNlbmFtZShzcmMpKQogICAgY29weWZpbGUoc3JjLCBkc3QsIGZvbGxvd19zeW1saW5rcz1mb2xsb3dfc3ltbGlua3MpCiAgICBjb3B5c3RhdChzcmMsIGRzdCwgZm9sbG93X3N5bWxpbmtzPWZvbGxvd19zeW1saW5rcykKICAgIHJldHVybiBkc3QKCmRlZiBpZ25vcmVfcGF0dGVybnMoKnBhdHRlcm5zKToKICAgICIiIkZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgYXMgY29weXRyZWUoKSBpZ25vcmUgcGFyYW1ldGVyLgoKICAgIFBhdHRlcm5zIGlzIGEgc2VxdWVuY2Ugb2YgZ2xvYi1zdHlsZSBwYXR0ZXJucwogICAgdGhhdCBhcmUgdXNlZCB0byBleGNsdWRlIGZpbGVzIiIiCiAgICBkZWYgX2lnbm9yZV9wYXR0ZXJucyhwYXRoLCBuYW1lcyk6CiAgICAgICAgaWdub3JlZF9uYW1lcyA9IFtdCiAgICAgICAgZm9yIHBhdHRlcm4gaW4gcGF0dGVybnM6CiAgICAgICAgICAgIGlnbm9yZWRfbmFtZXMuZXh0ZW5kKGZubWF0Y2guZmlsdGVyKG5hbWVzLCBwYXR0ZXJuKSkKICAgICAgICByZXR1cm4gc2V0KGlnbm9yZWRfbmFtZXMpCiAgICByZXR1cm4gX2lnbm9yZV9wYXR0ZXJucwoKZGVmIGNvcHl0cmVlKHNyYywgZHN0LCBzeW1saW5rcz1GYWxzZSwgaWdub3JlPU5vbmUsIGNvcHlfZnVuY3Rpb249Y29weTIsCiAgICAgICAgICAgICBpZ25vcmVfZGFuZ2xpbmdfc3ltbGlua3M9RmFsc2UpOgogICAgIiIiUmVjdXJzaXZlbHkgY29weSBhIGRpcmVjdG9yeSB0cmVlLgoKICAgIFRoZSBkZXN0aW5hdGlvbiBkaXJlY3RvcnkgbXVzdCBub3QgYWxyZWFkeSBleGlzdC4KICAgIElmIGV4Y2VwdGlvbihzKSBvY2N1ciwgYW4gRXJyb3IgaXMgcmFpc2VkIHdpdGggYSBsaXN0IG9mIHJlYXNvbnMuCgogICAgSWYgdGhlIG9wdGlvbmFsIHN5bWxpbmtzIGZsYWcgaXMgdHJ1ZSwgc3ltYm9saWMgbGlua3MgaW4gdGhlCiAgICBzb3VyY2UgdHJlZSByZXN1bHQgaW4gc3ltYm9saWMgbGlua3MgaW4gdGhlIGRlc3RpbmF0aW9uIHRyZWU7IGlmCiAgICBpdCBpcyBmYWxzZSwgdGhlIGNvbnRlbnRzIG9mIHRoZSBmaWxlcyBwb2ludGVkIHRvIGJ5IHN5bWJvbGljCiAgICBsaW5rcyBhcmUgY29waWVkLiBJZiB0aGUgZmlsZSBwb2ludGVkIGJ5IHRoZSBzeW1saW5rIGRvZXNuJ3QKICAgIGV4aXN0LCBhbiBleGNlcHRpb24gd2lsbCBiZSBhZGRlZCBpbiB0aGUgbGlzdCBvZiBlcnJvcnMgcmFpc2VkIGluCiAgICBhbiBFcnJvciBleGNlcHRpb24gYXQgdGhlIGVuZCBvZiB0aGUgY29weSBwcm9jZXNzLgoKICAgIFlvdSBjYW4gc2V0IHRoZSBvcHRpb25hbCBpZ25vcmVfZGFuZ2xpbmdfc3ltbGlua3MgZmxhZyB0byB0cnVlIGlmIHlvdQogICAgd2FudCB0byBzaWxlbmNlIHRoaXMgZXhjZXB0aW9uLiBOb3RpY2UgdGhhdCB0aGlzIGhhcyBubyBlZmZlY3Qgb24KICAgIHBsYXRmb3JtcyB0aGF0IGRvbid0IHN1cHBvcnQgb3Muc3ltbGluay4KCiAgICBUaGUgb3B0aW9uYWwgaWdub3JlIGFyZ3VtZW50IGlzIGEgY2FsbGFibGUuIElmIGdpdmVuLCBpdAogICAgaXMgY2FsbGVkIHdpdGggdGhlIGBzcmNgIHBhcmFtZXRlciwgd2hpY2ggaXMgdGhlIGRpcmVjdG9yeQogICAgYmVpbmcgdmlzaXRlZCBieSBjb3B5dHJlZSgpLCBhbmQgYG5hbWVzYCB3aGljaCBpcyB0aGUgbGlzdCBvZgogICAgYHNyY2AgY29udGVudHMsIGFzIHJldHVybmVkIGJ5IG9zLmxpc3RkaXIoKToKCiAgICAgICAgY2FsbGFibGUoc3JjLCBuYW1lcykgLT4gaWdub3JlZF9uYW1lcwoKICAgIFNpbmNlIGNvcHl0cmVlKCkgaXMgY2FsbGVkIHJlY3Vyc2l2ZWx5LCB0aGUgY2FsbGFibGUgd2lsbCBiZQogICAgY2FsbGVkIG9uY2UgZm9yIGVhY2ggZGlyZWN0b3J5IHRoYXQgaXMgY29waWVkLiBJdCByZXR1cm5zIGEKICAgIGxpc3Qgb2YgbmFtZXMgcmVsYXRpdmUgdG8gdGhlIGBzcmNgIGRpcmVjdG9yeSB0aGF0IHNob3VsZAogICAgbm90IGJlIGNvcGllZC4KCiAgICBUaGUgb3B0aW9uYWwgY29weV9mdW5jdGlvbiBhcmd1bWVudCBpcyBhIGNhbGxhYmxlIHRoYXQgd2lsbCBiZSB1c2VkCiAgICB0byBjb3B5IGVhY2ggZmlsZS4gSXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgc291cmNlIHBhdGggYW5kIHRoZQogICAgZGVzdGluYXRpb24gcGF0aCBhcyBhcmd1bWVudHMuIEJ5IGRlZmF1bHQsIGNvcHkyKCkgaXMgdXNlZCwgYnV0IGFueQogICAgZnVuY3Rpb24gdGhhdCBzdXBwb3J0cyB0aGUgc2FtZSBzaWduYXR1cmUgKGxpa2UgY29weSgpKSBjYW4gYmUgdXNlZC4KCiAgICAiIiIKICAgIG5hbWVzID0gb3MubGlzdGRpcihzcmMpCiAgICBpZiBpZ25vcmUgaXMgbm90IE5vbmU6CiAgICAgICAgaWdub3JlZF9uYW1lcyA9IGlnbm9yZShzcmMsIG5hbWVzKQogICAgZWxzZToKICAgICAgICBpZ25vcmVkX25hbWVzID0gc2V0KCkKCiAgICBvcy5tYWtlZGlycyhkc3QpCiAgICBlcnJvcnMgPSBbXQogICAgZm9yIG5hbWUgaW4gbmFtZXM6CiAgICAgICAgaWYgbmFtZSBpbiBpZ25vcmVkX25hbWVzOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHNyY25hbWUgPSBvcy5wYXRoLmpvaW4oc3JjLCBuYW1lKQogICAgICAgIGRzdG5hbWUgPSBvcy5wYXRoLmpvaW4oZHN0LCBuYW1lKQogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgb3MucGF0aC5pc2xpbmsoc3JjbmFtZSk6CiAgICAgICAgICAgICAgICBsaW5rdG8gPSBvcy5yZWFkbGluayhzcmNuYW1lKQogICAgICAgICAgICAgICAgaWYgc3ltbGlua3M6CiAgICAgICAgICAgICAgICAgICAgIyBXZSBjYW4ndCBqdXN0IGxlYXZlIGl0IHRvIGBjb3B5X2Z1bmN0aW9uYCBiZWNhdXNlIGxlZ2FjeQogICAgICAgICAgICAgICAgICAgICMgY29kZSB3aXRoIGEgY3VzdG9tIGBjb3B5X2Z1bmN0aW9uYCBtYXkgcmVseSBvbiBjb3B5dHJlZQogICAgICAgICAgICAgICAgICAgICMgZG9pbmcgdGhlIHJpZ2h0IHRoaW5nLgogICAgICAgICAgICAgICAgICAgIG9zLnN5bWxpbmsobGlua3RvLCBkc3RuYW1lKQogICAgICAgICAgICAgICAgICAgIGNvcHlzdGF0KHNyY25hbWUsIGRzdG5hbWUsIGZvbGxvd19zeW1saW5rcz1ub3Qgc3ltbGlua3MpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgaWdub3JlIGRhbmdsaW5nIHN5bWxpbmsgaWYgdGhlIGZsYWcgaXMgb24KICAgICAgICAgICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMobGlua3RvKSBhbmQgaWdub3JlX2RhbmdsaW5nX3N5bWxpbmtzOgogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICMgb3RoZXJ3aXNlIGxldCB0aGUgY29weSBvY2N1cnMuIGNvcHkyIHdpbGwgcmFpc2UgYW4gZXJyb3IKICAgICAgICAgICAgICAgICAgICBjb3B5X2Z1bmN0aW9uKHNyY25hbWUsIGRzdG5hbWUpCiAgICAgICAgICAgIGVsaWYgb3MucGF0aC5pc2RpcihzcmNuYW1lKToKICAgICAgICAgICAgICAgIGNvcHl0cmVlKHNyY25hbWUsIGRzdG5hbWUsIHN5bWxpbmtzLCBpZ25vcmUsIGNvcHlfZnVuY3Rpb24pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIFdpbGwgcmFpc2UgYSBTcGVjaWFsRmlsZUVycm9yIGZvciB1bnN1cHBvcnRlZCBmaWxlIHR5cGVzCiAgICAgICAgICAgICAgICBjb3B5X2Z1bmN0aW9uKHNyY25hbWUsIGRzdG5hbWUpCiAgICAgICAgIyBjYXRjaCB0aGUgRXJyb3IgZnJvbSB0aGUgcmVjdXJzaXZlIGNvcHl0cmVlIHNvIHRoYXQgd2UgY2FuCiAgICAgICAgIyBjb250aW51ZSB3aXRoIG90aGVyIGZpbGVzCiAgICAgICAgZXhjZXB0IEVycm9yIGFzIGVycjoKICAgICAgICAgICAgZXJyb3JzLmV4dGVuZChlcnIuYXJnc1swXSkKICAgICAgICBleGNlcHQgRW52aXJvbm1lbnRFcnJvciBhcyB3aHk6CiAgICAgICAgICAgIGVycm9ycy5hcHBlbmQoKHNyY25hbWUsIGRzdG5hbWUsIHN0cih3aHkpKSkKICAgIHRyeToKICAgICAgICBjb3B5c3RhdChzcmMsIGRzdCkKICAgIGV4Y2VwdCBPU0Vycm9yIGFzIHdoeToKICAgICAgICBpZiBXaW5kb3dzRXJyb3IgaXMgbm90IE5vbmUgYW5kIGlzaW5zdGFuY2Uod2h5LCBXaW5kb3dzRXJyb3IpOgogICAgICAgICAgICAjIENvcHlpbmcgZmlsZSBhY2Nlc3MgdGltZXMgbWF5IGZhaWwgb24gV2luZG93cwogICAgICAgICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZXJyb3JzLmFwcGVuZCgoc3JjLCBkc3QsIHN0cih3aHkpKSkKICAgIGlmIGVycm9yczoKICAgICAgICByYWlzZSBFcnJvcihlcnJvcnMpCiAgICByZXR1cm4gZHN0CgojIHZlcnNpb24gdnVsbmVyYWJsZSB0byByYWNlIGNvbmRpdGlvbnMKZGVmIF9ybXRyZWVfdW5zYWZlKHBhdGgsIG9uZXJyb3IpOgogICAgdHJ5OgogICAgICAgIGlmIG9zLnBhdGguaXNsaW5rKHBhdGgpOgogICAgICAgICAgICAjIHN5bWxpbmtzIHRvIGRpcmVjdG9yaWVzIGFyZSBmb3JiaWRkZW4sIHNlZSBidWcgIzE2NjkKICAgICAgICAgICAgcmFpc2UgT1NFcnJvcigiQ2Fubm90IGNhbGwgcm10cmVlIG9uIGEgc3ltYm9saWMgbGluayIpCiAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICBvbmVycm9yKG9zLnBhdGguaXNsaW5rLCBwYXRoLCBzeXMuZXhjX2luZm8oKSkKICAgICAgICAjIGNhbid0IGNvbnRpbnVlIGV2ZW4gaWYgb25lcnJvciBob29rIHJldHVybnMKICAgICAgICByZXR1cm4KICAgIG5hbWVzID0gW10KICAgIHRyeToKICAgICAgICBuYW1lcyA9IG9zLmxpc3RkaXIocGF0aCkKICAgIGV4Y2VwdCBvcy5lcnJvcjoKICAgICAgICBvbmVycm9yKG9zLmxpc3RkaXIsIHBhdGgsIHN5cy5leGNfaW5mbygpKQogICAgZm9yIG5hbWUgaW4gbmFtZXM6CiAgICAgICAgZnVsbG5hbWUgPSBvcy5wYXRoLmpvaW4ocGF0aCwgbmFtZSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIG1vZGUgPSBvcy5sc3RhdChmdWxsbmFtZSkuc3RfbW9kZQogICAgICAgIGV4Y2VwdCBvcy5lcnJvcjoKICAgICAgICAgICAgbW9kZSA9IDAKICAgICAgICBpZiBzdGF0LlNfSVNESVIobW9kZSk6CiAgICAgICAgICAgIF9ybXRyZWVfdW5zYWZlKGZ1bGxuYW1lLCBvbmVycm9yKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG9zLnVubGluayhmdWxsbmFtZSkKICAgICAgICAgICAgZXhjZXB0IG9zLmVycm9yOgogICAgICAgICAgICAgICAgb25lcnJvcihvcy51bmxpbmssIGZ1bGxuYW1lLCBzeXMuZXhjX2luZm8oKSkKICAgIHRyeToKICAgICAgICBvcy5ybWRpcihwYXRoKQogICAgZXhjZXB0IG9zLmVycm9yOgogICAgICAgIG9uZXJyb3Iob3Mucm1kaXIsIHBhdGgsIHN5cy5leGNfaW5mbygpKQoKIyBWZXJzaW9uIHVzaW5nIGZkLWJhc2VkIEFQSXMgdG8gcHJvdGVjdCBhZ2FpbnN0IHJhY2VzCmRlZiBfcm10cmVlX3NhZmVfZmQodG9wZmQsIHBhdGgsIG9uZXJyb3IpOgogICAgbmFtZXMgPSBbXQogICAgdHJ5OgogICAgICAgIG5hbWVzID0gb3MubGlzdGRpcih0b3BmZCkKICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGVycjoKICAgICAgICBlcnIuZmlsZW5hbWUgPSBwYXRoCiAgICAgICAgb25lcnJvcihvcy5saXN0ZGlyLCBwYXRoLCBzeXMuZXhjX2luZm8oKSkKICAgIGZvciBuYW1lIGluIG5hbWVzOgogICAgICAgIGZ1bGxuYW1lID0gb3MucGF0aC5qb2luKHBhdGgsIG5hbWUpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcmlnX3N0ID0gb3Muc3RhdChuYW1lLCBkaXJfZmQ9dG9wZmQsIGZvbGxvd19zeW1saW5rcz1GYWxzZSkKICAgICAgICAgICAgbW9kZSA9IG9yaWdfc3Quc3RfbW9kZQogICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICBtb2RlID0gMAogICAgICAgIGlmIHN0YXQuU19JU0RJUihtb2RlKToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZGlyZmQgPSBvcy5vcGVuKG5hbWUsIG9zLk9fUkRPTkxZLCBkaXJfZmQ9dG9wZmQpCiAgICAgICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICAgICAgb25lcnJvcihvcy5vcGVuLCBmdWxsbmFtZSwgc3lzLmV4Y19pbmZvKCkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaWYgb3MucGF0aC5zYW1lc3RhdChvcmlnX3N0LCBvcy5mc3RhdChkaXJmZCkpOgogICAgICAgICAgICAgICAgICAgICAgICBfcm10cmVlX3NhZmVfZmQoZGlyZmQsIGZ1bGxuYW1lLCBvbmVycm9yKQogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5ybWRpcihuYW1lLCBkaXJfZmQ9dG9wZmQpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25lcnJvcihvcy5ybWRpciwgZnVsbG5hbWUsIHN5cy5leGNfaW5mbygpKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgc29tZW9uZSByZXBsYWNlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBhIGRpcmVjdG9yeSB3aXRoIGEgc3ltbGluayBhZnRlciB0aGUgY2FsbCB0bwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBzdGF0LlNfSVNESVIgYWJvdmUuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBPU0Vycm9yKCJDYW5ub3QgY2FsbCBybXRyZWUgb24gYSBzeW1ib2xpYyAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJsaW5rIikKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmVycm9yKG9zLnBhdGguaXNsaW5rLCBmdWxsbmFtZSwgc3lzLmV4Y19pbmZvKCkpCiAgICAgICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgICAgIG9zLmNsb3NlKGRpcmZkKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG9zLnVubGluayhuYW1lLCBkaXJfZmQ9dG9wZmQpCiAgICAgICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICAgICAgb25lcnJvcihvcy51bmxpbmssIGZ1bGxuYW1lLCBzeXMuZXhjX2luZm8oKSkKCl91c2VfZmRfZnVuY3Rpb25zID0gKHtvcy5vcGVuLCBvcy5zdGF0LCBvcy51bmxpbmssIG9zLnJtZGlyfSA8PQogICAgICAgICAgICAgICAgICAgICBvcy5zdXBwb3J0c19kaXJfZmQgYW5kCiAgICAgICAgICAgICAgICAgICAgIG9zLmxpc3RkaXIgaW4gb3Muc3VwcG9ydHNfZmQgYW5kCiAgICAgICAgICAgICAgICAgICAgIG9zLnN0YXQgaW4gb3Muc3VwcG9ydHNfZm9sbG93X3N5bWxpbmtzKQoKZGVmIHJtdHJlZShwYXRoLCBpZ25vcmVfZXJyb3JzPUZhbHNlLCBvbmVycm9yPU5vbmUpOgogICAgIiIiUmVjdXJzaXZlbHkgZGVsZXRlIGEgZGlyZWN0b3J5IHRyZWUuCgogICAgSWYgaWdub3JlX2Vycm9ycyBpcyBzZXQsIGVycm9ycyBhcmUgaWdub3JlZDsgb3RoZXJ3aXNlLCBpZiBvbmVycm9yCiAgICBpcyBzZXQsIGl0IGlzIGNhbGxlZCB0byBoYW5kbGUgdGhlIGVycm9yIHdpdGggYXJndW1lbnRzIChmdW5jLAogICAgcGF0aCwgZXhjX2luZm8pIHdoZXJlIGZ1bmMgaXMgcGxhdGZvcm0gYW5kIGltcGxlbWVudGF0aW9uIGRlcGVuZGVudDsKICAgIHBhdGggaXMgdGhlIGFyZ3VtZW50IHRvIHRoYXQgZnVuY3Rpb24gdGhhdCBjYXVzZWQgaXQgdG8gZmFpbDsgYW5kCiAgICBleGNfaW5mbyBpcyBhIHR1cGxlIHJldHVybmVkIGJ5IHN5cy5leGNfaW5mbygpLiAgSWYgaWdub3JlX2Vycm9ycwogICAgaXMgZmFsc2UgYW5kIG9uZXJyb3IgaXMgTm9uZSwgYW4gZXhjZXB0aW9uIGlzIHJhaXNlZC4KCiAgICAiIiIKICAgIGlmIGlnbm9yZV9lcnJvcnM6CiAgICAgICAgZGVmIG9uZXJyb3IoKmFyZ3MpOgogICAgICAgICAgICBwYXNzCiAgICBlbGlmIG9uZXJyb3IgaXMgTm9uZToKICAgICAgICBkZWYgb25lcnJvcigqYXJncyk6CiAgICAgICAgICAgIHJhaXNlCiAgICBpZiBfdXNlX2ZkX2Z1bmN0aW9uczoKICAgICAgICAjIFdoaWxlIHRoZSB1bnNhZmUgcm10cmVlIHdvcmtzIGZpbmUgb24gYnl0ZXMsIHRoZSBmZCBiYXNlZCBkb2VzIG5vdC4KICAgICAgICBpZiBpc2luc3RhbmNlKHBhdGgsIGJ5dGVzKToKICAgICAgICAgICAgcGF0aCA9IG9zLmZzZGVjb2RlKHBhdGgpCiAgICAgICAgIyBOb3RlOiBUbyBndWFyZCBhZ2FpbnN0IHN5bWxpbmsgcmFjZXMsIHdlIHVzZSB0aGUgc3RhbmRhcmQKICAgICAgICAjIGxzdGF0KCkvb3BlbigpL2ZzdGF0KCkgdHJpY2suCiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcmlnX3N0ID0gb3MubHN0YXQocGF0aCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICBvbmVycm9yKG9zLmxzdGF0LCBwYXRoLCBzeXMuZXhjX2luZm8oKSkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmZCA9IG9zLm9wZW4ocGF0aCwgb3MuT19SRE9OTFkpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgb25lcnJvcihvcy5sc3RhdCwgcGF0aCwgc3lzLmV4Y19pbmZvKCkpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgb3MucGF0aC5zYW1lc3RhdChvcmlnX3N0LCBvcy5mc3RhdChmZCkpOgogICAgICAgICAgICAgICAgX3JtdHJlZV9zYWZlX2ZkKGZkLCBwYXRoLCBvbmVycm9yKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIG9zLnJtZGlyKHBhdGgpCiAgICAgICAgICAgICAgICBleGNlcHQgb3MuZXJyb3I6CiAgICAgICAgICAgICAgICAgICAgb25lcnJvcihvcy5ybWRpciwgcGF0aCwgc3lzLmV4Y19pbmZvKCkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgIyBzeW1saW5rcyB0byBkaXJlY3RvcmllcyBhcmUgZm9yYmlkZGVuLCBzZWUgYnVnICMxNjY5CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgT1NFcnJvcigiQ2Fubm90IGNhbGwgcm10cmVlIG9uIGEgc3ltYm9saWMgbGluayIpCiAgICAgICAgICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgICAgICAgICBvbmVycm9yKG9zLnBhdGguaXNsaW5rLCBwYXRoLCBzeXMuZXhjX2luZm8oKSkKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICBvcy5jbG9zZShmZCkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIF9ybXRyZWVfdW5zYWZlKHBhdGgsIG9uZXJyb3IpCgojIEFsbG93IGludHJvc3BlY3Rpb24gb2Ygd2hldGhlciBvciBub3QgdGhlIGhhcmRlbmluZyBhZ2FpbnN0IHN5bWxpbmsKIyBhdHRhY2tzIGlzIHN1cHBvcnRlZCBvbiB0aGUgY3VycmVudCBwbGF0Zm9ybQpybXRyZWUuYXZvaWRzX3N5bWxpbmtfYXR0YWNrcyA9IF91c2VfZmRfZnVuY3Rpb25zCgpkZWYgX2Jhc2VuYW1lKHBhdGgpOgogICAgIyBBIGJhc2VuYW1lKCkgdmFyaWFudCB3aGljaCBmaXJzdCBzdHJpcHMgdGhlIHRyYWlsaW5nIHNsYXNoLCBpZiBwcmVzZW50LgogICAgIyBUaHVzIHdlIGFsd2F5cyBnZXQgdGhlIGxhc3QgY29tcG9uZW50IG9mIHRoZSBwYXRoLCBldmVuIGZvciBkaXJlY3Rvcmllcy4KICAgIHJldHVybiBvcy5wYXRoLmJhc2VuYW1lKHBhdGgucnN0cmlwKG9zLnBhdGguc2VwKSkKCmRlZiBtb3ZlKHNyYywgZHN0KToKICAgICIiIlJlY3Vyc2l2ZWx5IG1vdmUgYSBmaWxlIG9yIGRpcmVjdG9yeSB0byBhbm90aGVyIGxvY2F0aW9uLiBUaGlzIGlzCiAgICBzaW1pbGFyIHRvIHRoZSBVbml4ICJtdiIgY29tbWFuZC4gUmV0dXJuIHRoZSBmaWxlIG9yIGRpcmVjdG9yeSdzCiAgICBkZXN0aW5hdGlvbi4KCiAgICBJZiB0aGUgZGVzdGluYXRpb24gaXMgYSBkaXJlY3Rvcnkgb3IgYSBzeW1saW5rIHRvIGEgZGlyZWN0b3J5LCB0aGUgc291cmNlCiAgICBpcyBtb3ZlZCBpbnNpZGUgdGhlIGRpcmVjdG9yeS4gVGhlIGRlc3RpbmF0aW9uIHBhdGggbXVzdCBub3QgYWxyZWFkeQogICAgZXhpc3QuCgogICAgSWYgdGhlIGRlc3RpbmF0aW9uIGFscmVhZHkgZXhpc3RzIGJ1dCBpcyBub3QgYSBkaXJlY3RvcnksIGl0IG1heSBiZQogICAgb3ZlcndyaXR0ZW4gZGVwZW5kaW5nIG9uIG9zLnJlbmFtZSgpIHNlbWFudGljcy4KCiAgICBJZiB0aGUgZGVzdGluYXRpb24gaXMgb24gb3VyIGN1cnJlbnQgZmlsZXN5c3RlbSwgdGhlbiByZW5hbWUoKSBpcyB1c2VkLgogICAgT3RoZXJ3aXNlLCBzcmMgaXMgY29waWVkIHRvIHRoZSBkZXN0aW5hdGlvbiBhbmQgdGhlbiByZW1vdmVkLiBTeW1saW5rcyBhcmUKICAgIHJlY3JlYXRlZCB1bmRlciB0aGUgbmV3IG5hbWUgaWYgb3MucmVuYW1lKCkgZmFpbHMgYmVjYXVzZSBvZiBjcm9zcwogICAgZmlsZXN5c3RlbSByZW5hbWVzLgoKICAgIEEgbG90IG1vcmUgY291bGQgYmUgZG9uZSBoZXJlLi4uICBBIGxvb2sgYXQgYSBtdi5jIHNob3dzIGEgbG90IG9mCiAgICB0aGUgaXNzdWVzIHRoaXMgaW1wbGVtZW50YXRpb24gZ2xvc3NlcyBvdmVyLgoKICAgICIiIgogICAgcmVhbF9kc3QgPSBkc3QKICAgIGlmIG9zLnBhdGguaXNkaXIoZHN0KToKICAgICAgICBpZiBfc2FtZWZpbGUoc3JjLCBkc3QpOgogICAgICAgICAgICAjIFdlIG1pZ2h0IGJlIG9uIGEgY2FzZSBpbnNlbnNpdGl2ZSBmaWxlc3lzdGVtLAogICAgICAgICAgICAjIHBlcmZvcm0gdGhlIHJlbmFtZSBhbnl3YXkuCiAgICAgICAgICAgIG9zLnJlbmFtZShzcmMsIGRzdCkKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHJlYWxfZHN0ID0gb3MucGF0aC5qb2luKGRzdCwgX2Jhc2VuYW1lKHNyYykpCiAgICAgICAgaWYgb3MucGF0aC5leGlzdHMocmVhbF9kc3QpOgogICAgICAgICAgICByYWlzZSBFcnJvcigiRGVzdGluYXRpb24gcGF0aCAnJXMnIGFscmVhZHkgZXhpc3RzIiAlIHJlYWxfZHN0KQogICAgdHJ5OgogICAgICAgIG9zLnJlbmFtZShzcmMsIHJlYWxfZHN0KQogICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgaWYgb3MucGF0aC5pc2xpbmsoc3JjKToKICAgICAgICAgICAgbGlua3RvID0gb3MucmVhZGxpbmsoc3JjKQogICAgICAgICAgICBvcy5zeW1saW5rKGxpbmt0bywgcmVhbF9kc3QpCiAgICAgICAgICAgIG9zLnVubGluayhzcmMpCiAgICAgICAgZWxpZiBvcy5wYXRoLmlzZGlyKHNyYyk6CiAgICAgICAgICAgIGlmIF9kZXN0aW5zcmMoc3JjLCBkc3QpOgogICAgICAgICAgICAgICAgcmFpc2UgRXJyb3IoIkNhbm5vdCBtb3ZlIGEgZGlyZWN0b3J5ICclcycgaW50byBpdHNlbGYgJyVzJy4iICUgKHNyYywgZHN0KSkKICAgICAgICAgICAgY29weXRyZWUoc3JjLCByZWFsX2RzdCwgc3ltbGlua3M9VHJ1ZSkKICAgICAgICAgICAgcm10cmVlKHNyYykKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb3B5MihzcmMsIHJlYWxfZHN0KQogICAgICAgICAgICBvcy51bmxpbmsoc3JjKQogICAgcmV0dXJuIHJlYWxfZHN0CgpkZWYgX2Rlc3RpbnNyYyhzcmMsIGRzdCk6CiAgICBzcmMgPSBhYnNwYXRoKHNyYykKICAgIGRzdCA9IGFic3BhdGgoZHN0KQogICAgaWYgbm90IHNyYy5lbmRzd2l0aChvcy5wYXRoLnNlcCk6CiAgICAgICAgc3JjICs9IG9zLnBhdGguc2VwCiAgICBpZiBub3QgZHN0LmVuZHN3aXRoKG9zLnBhdGguc2VwKToKICAgICAgICBkc3QgKz0gb3MucGF0aC5zZXAKICAgIHJldHVybiBkc3Quc3RhcnRzd2l0aChzcmMpCgpkZWYgX2dldF9naWQobmFtZSk6CiAgICAiIiJSZXR1cm5zIGEgZ2lkLCBnaXZlbiBhIGdyb3VwIG5hbWUuIiIiCiAgICBpZiBnZXRncm5hbSBpcyBOb25lIG9yIG5hbWUgaXMgTm9uZToKICAgICAgICByZXR1cm4gTm9uZQogICAgdHJ5OgogICAgICAgIHJlc3VsdCA9IGdldGdybmFtKG5hbWUpCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgcmVzdWx0ID0gTm9uZQogICAgaWYgcmVzdWx0IGlzIG5vdCBOb25lOgogICAgICAgIHJldHVybiByZXN1bHRbMl0KICAgIHJldHVybiBOb25lCgpkZWYgX2dldF91aWQobmFtZSk6CiAgICAiIiJSZXR1cm5zIGFuIHVpZCwgZ2l2ZW4gYSB1c2VyIG5hbWUuIiIiCiAgICBpZiBnZXRwd25hbSBpcyBOb25lIG9yIG5hbWUgaXMgTm9uZToKICAgICAgICByZXR1cm4gTm9uZQogICAgdHJ5OgogICAgICAgIHJlc3VsdCA9IGdldHB3bmFtKG5hbWUpCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgcmVzdWx0ID0gTm9uZQogICAgaWYgcmVzdWx0IGlzIG5vdCBOb25lOgogICAgICAgIHJldHVybiByZXN1bHRbMl0KICAgIHJldHVybiBOb25lCgpkZWYgX21ha2VfdGFyYmFsbChiYXNlX25hbWUsIGJhc2VfZGlyLCBjb21wcmVzcz0iZ3ppcCIsIHZlcmJvc2U9MCwgZHJ5X3J1bj0wLAogICAgICAgICAgICAgICAgICBvd25lcj1Ob25lLCBncm91cD1Ob25lLCBsb2dnZXI9Tm9uZSk6CiAgICAiIiJDcmVhdGUgYSAocG9zc2libHkgY29tcHJlc3NlZCkgdGFyIGZpbGUgZnJvbSBhbGwgdGhlIGZpbGVzIHVuZGVyCiAgICAnYmFzZV9kaXInLgoKICAgICdjb21wcmVzcycgbXVzdCBiZSAiZ3ppcCIgKHRoZSBkZWZhdWx0KSwgImJ6aXAyIiwgb3IgTm9uZS4KCiAgICAnb3duZXInIGFuZCAnZ3JvdXAnIGNhbiBiZSB1c2VkIHRvIGRlZmluZSBhbiBvd25lciBhbmQgYSBncm91cCBmb3IgdGhlCiAgICBhcmNoaXZlIHRoYXQgaXMgYmVpbmcgYnVpbHQuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgb3duZXIgYW5kIGdyb3VwCiAgICB3aWxsIGJlIHVzZWQuCgogICAgVGhlIG91dHB1dCB0YXIgZmlsZSB3aWxsIGJlIG5hbWVkICdiYXNlX25hbWUnICsgICIudGFyIiwgcG9zc2libHkgcGx1cwogICAgdGhlIGFwcHJvcHJpYXRlIGNvbXByZXNzaW9uIGV4dGVuc2lvbiAoIi5neiIsIG9yICIuYnoyIikuCgogICAgUmV0dXJucyB0aGUgb3V0cHV0IGZpbGVuYW1lLgogICAgIiIiCiAgICB0YXJfY29tcHJlc3Npb24gPSB7J2d6aXAnOiAnZ3onLCBOb25lOiAnJ30KICAgIGNvbXByZXNzX2V4dCA9IHsnZ3ppcCc6ICcuZ3onfQoKICAgIGlmIF9CWjJfU1VQUE9SVEVEOgogICAgICAgIHRhcl9jb21wcmVzc2lvblsnYnppcDInXSA9ICdiejInCiAgICAgICAgY29tcHJlc3NfZXh0WydiemlwMiddID0gJy5iejInCgogICAgIyBmbGFncyBmb3IgY29tcHJlc3Npb24gcHJvZ3JhbSwgZWFjaCBlbGVtZW50IG9mIGxpc3Qgd2lsbCBiZSBhbiBhcmd1bWVudAogICAgaWYgY29tcHJlc3MgaXMgbm90IE5vbmUgYW5kIGNvbXByZXNzIG5vdCBpbiBjb21wcmVzc19leHQ6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiYmFkIHZhbHVlIGZvciAnY29tcHJlc3MnLCBvciBjb21wcmVzc2lvbiBmb3JtYXQgbm90ICIKICAgICAgICAgICAgICAgICAgICAgICAgICJzdXBwb3J0ZWQgOiB7MH0iLmZvcm1hdChjb21wcmVzcykpCgogICAgYXJjaGl2ZV9uYW1lID0gYmFzZV9uYW1lICsgJy50YXInICsgY29tcHJlc3NfZXh0LmdldChjb21wcmVzcywgJycpCiAgICBhcmNoaXZlX2RpciA9IG9zLnBhdGguZGlybmFtZShhcmNoaXZlX25hbWUpCgogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKGFyY2hpdmVfZGlyKToKICAgICAgICBpZiBsb2dnZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJjcmVhdGluZyAlcyIsIGFyY2hpdmVfZGlyKQogICAgICAgIGlmIG5vdCBkcnlfcnVuOgogICAgICAgICAgICBvcy5tYWtlZGlycyhhcmNoaXZlX2RpcikKCiAgICAjIGNyZWF0aW5nIHRoZSB0YXJiYWxsCiAgICBpZiBsb2dnZXIgaXMgbm90IE5vbmU6CiAgICAgICAgbG9nZ2VyLmluZm8oJ0NyZWF0aW5nIHRhciBhcmNoaXZlJykKCiAgICB1aWQgPSBfZ2V0X3VpZChvd25lcikKICAgIGdpZCA9IF9nZXRfZ2lkKGdyb3VwKQoKICAgIGRlZiBfc2V0X3VpZF9naWQodGFyaW5mbyk6CiAgICAgICAgaWYgZ2lkIGlzIG5vdCBOb25lOgogICAgICAgICAgICB0YXJpbmZvLmdpZCA9IGdpZAogICAgICAgICAgICB0YXJpbmZvLmduYW1lID0gZ3JvdXAKICAgICAgICBpZiB1aWQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHRhcmluZm8udWlkID0gdWlkCiAgICAgICAgICAgIHRhcmluZm8udW5hbWUgPSBvd25lcgogICAgICAgIHJldHVybiB0YXJpbmZvCgogICAgaWYgbm90IGRyeV9ydW46CiAgICAgICAgdGFyID0gdGFyZmlsZS5vcGVuKGFyY2hpdmVfbmFtZSwgJ3d8JXMnICUgdGFyX2NvbXByZXNzaW9uW2NvbXByZXNzXSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHRhci5hZGQoYmFzZV9kaXIsIGZpbHRlcj1fc2V0X3VpZF9naWQpCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgdGFyLmNsb3NlKCkKCiAgICByZXR1cm4gYXJjaGl2ZV9uYW1lCgpkZWYgX2NhbGxfZXh0ZXJuYWxfemlwKGJhc2VfZGlyLCB6aXBfZmlsZW5hbWUsIHZlcmJvc2U9RmFsc2UsIGRyeV9ydW49RmFsc2UpOgogICAgIyBYWFggc2VlIGlmIHdlIHdhbnQgdG8ga2VlcCBhbiBleHRlcm5hbCBjYWxsIGhlcmUKICAgIGlmIHZlcmJvc2U6CiAgICAgICAgemlwb3B0aW9ucyA9ICItciIKICAgIGVsc2U6CiAgICAgICAgemlwb3B0aW9ucyA9ICItcnEiCiAgICBmcm9tIGRpc3R1dGlscy5lcnJvcnMgaW1wb3J0IERpc3R1dGlsc0V4ZWNFcnJvcgogICAgZnJvbSBkaXN0dXRpbHMuc3Bhd24gaW1wb3J0IHNwYXduCiAgICB0cnk6CiAgICAgICAgc3Bhd24oWyJ6aXAiLCB6aXBvcHRpb25zLCB6aXBfZmlsZW5hbWUsIGJhc2VfZGlyXSwgZHJ5X3J1bj1kcnlfcnVuKQogICAgZXhjZXB0IERpc3R1dGlsc0V4ZWNFcnJvcjoKICAgICAgICAjIFhYWCByZWFsbHkgc2hvdWxkIGRpc3Rpbmd1aXNoIGJldHdlZW4gImNvdWxkbid0IGZpbmQKICAgICAgICAjIGV4dGVybmFsICd6aXAnIGNvbW1hbmQiIGFuZCAiemlwIGZhaWxlZCIuCiAgICAgICAgcmFpc2UgRXhlY0Vycm9yKCJ1bmFibGUgdG8gY3JlYXRlIHppcCBmaWxlICclcyc6ICIKICAgICAgICAgICAgImNvdWxkIG5laXRoZXIgaW1wb3J0IHRoZSAnemlwZmlsZScgbW9kdWxlIG5vciAiCiAgICAgICAgICAgICJmaW5kIGEgc3RhbmRhbG9uZSB6aXAgdXRpbGl0eSIpICUgemlwX2ZpbGVuYW1lCgpkZWYgX21ha2VfemlwZmlsZShiYXNlX25hbWUsIGJhc2VfZGlyLCB2ZXJib3NlPTAsIGRyeV9ydW49MCwgbG9nZ2VyPU5vbmUpOgogICAgIiIiQ3JlYXRlIGEgemlwIGZpbGUgZnJvbSBhbGwgdGhlIGZpbGVzIHVuZGVyICdiYXNlX2RpcicuCgogICAgVGhlIG91dHB1dCB6aXAgZmlsZSB3aWxsIGJlIG5hbWVkICdiYXNlX25hbWUnICsgIi56aXAiLiAgVXNlcyBlaXRoZXIgdGhlCiAgICAiemlwZmlsZSIgUHl0aG9uIG1vZHVsZSAoaWYgYXZhaWxhYmxlKSBvciB0aGUgSW5mb1pJUCAiemlwIiB1dGlsaXR5CiAgICAoaWYgaW5zdGFsbGVkIGFuZCBmb3VuZCBvbiB0aGUgZGVmYXVsdCBzZWFyY2ggcGF0aCkuICBJZiBuZWl0aGVyIHRvb2wgaXMKICAgIGF2YWlsYWJsZSwgcmFpc2VzIEV4ZWNFcnJvci4gIFJldHVybnMgdGhlIG5hbWUgb2YgdGhlIG91dHB1dCB6aXAKICAgIGZpbGUuCiAgICAiIiIKICAgIHppcF9maWxlbmFtZSA9IGJhc2VfbmFtZSArICIuemlwIgogICAgYXJjaGl2ZV9kaXIgPSBvcy5wYXRoLmRpcm5hbWUoYmFzZV9uYW1lKQoKICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhhcmNoaXZlX2Rpcik6CiAgICAgICAgaWYgbG9nZ2VyIGlzIG5vdCBOb25lOgogICAgICAgICAgICBsb2dnZXIuaW5mbygiY3JlYXRpbmcgJXMiLCBhcmNoaXZlX2RpcikKICAgICAgICBpZiBub3QgZHJ5X3J1bjoKICAgICAgICAgICAgb3MubWFrZWRpcnMoYXJjaGl2ZV9kaXIpCgogICAgIyBJZiB6aXBmaWxlIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlLCB0cnkgc3Bhd25pbmcgYW4gZXh0ZXJuYWwgJ3ppcCcKICAgICMgY29tbWFuZC4KICAgIHRyeToKICAgICAgICBpbXBvcnQgemlwZmlsZQogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIHppcGZpbGUgPSBOb25lCgogICAgaWYgemlwZmlsZSBpcyBOb25lOgogICAgICAgIF9jYWxsX2V4dGVybmFsX3ppcChiYXNlX2RpciwgemlwX2ZpbGVuYW1lLCB2ZXJib3NlLCBkcnlfcnVuKQogICAgZWxzZToKICAgICAgICBpZiBsb2dnZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJjcmVhdGluZyAnJXMnIGFuZCBhZGRpbmcgJyVzJyB0byBpdCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHppcF9maWxlbmFtZSwgYmFzZV9kaXIpCgogICAgICAgIGlmIG5vdCBkcnlfcnVuOgogICAgICAgICAgICB6aXAgPSB6aXBmaWxlLlppcEZpbGUoemlwX2ZpbGVuYW1lLCAidyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzc2lvbj16aXBmaWxlLlpJUF9ERUZMQVRFRCkKCiAgICAgICAgICAgIGZvciBkaXJwYXRoLCBkaXJuYW1lcywgZmlsZW5hbWVzIGluIG9zLndhbGsoYmFzZV9kaXIpOgogICAgICAgICAgICAgICAgZm9yIG5hbWUgaW4gZmlsZW5hbWVzOgogICAgICAgICAgICAgICAgICAgIHBhdGggPSBvcy5wYXRoLm5vcm1wYXRoKG9zLnBhdGguam9pbihkaXJwYXRoLCBuYW1lKSkKICAgICAgICAgICAgICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShwYXRoKToKICAgICAgICAgICAgICAgICAgICAgICAgemlwLndyaXRlKHBhdGgsIHBhdGgpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxvZ2dlciBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJhZGRpbmcgJyVzJyIsIHBhdGgpCiAgICAgICAgICAgIHppcC5jbG9zZSgpCgogICAgcmV0dXJuIHppcF9maWxlbmFtZQoKX0FSQ0hJVkVfRk9STUFUUyA9IHsKICAgICdnenRhcic6IChfbWFrZV90YXJiYWxsLCBbKCdjb21wcmVzcycsICdnemlwJyldLCAiZ3ppcCdlZCB0YXItZmlsZSIpLAogICAgJ3Rhcic6ICAgKF9tYWtlX3RhcmJhbGwsIFsoJ2NvbXByZXNzJywgTm9uZSldLCAidW5jb21wcmVzc2VkIHRhciBmaWxlIiksCiAgICAnemlwJzogICAoX21ha2VfemlwZmlsZSwgW10sICJaSVAgZmlsZSIpCiAgICB9CgppZiBfQloyX1NVUFBPUlRFRDoKICAgIF9BUkNISVZFX0ZPUk1BVFNbJ2J6dGFyJ10gPSAoX21ha2VfdGFyYmFsbCwgWygnY29tcHJlc3MnLCAnYnppcDInKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImJ6aXAyJ2VkIHRhci1maWxlIikKCmRlZiBnZXRfYXJjaGl2ZV9mb3JtYXRzKCk6CiAgICAiIiJSZXR1cm5zIGEgbGlzdCBvZiBzdXBwb3J0ZWQgZm9ybWF0cyBmb3IgYXJjaGl2aW5nIGFuZCB1bmFyY2hpdmluZy4KCiAgICBFYWNoIGVsZW1lbnQgb2YgdGhlIHJldHVybmVkIHNlcXVlbmNlIGlzIGEgdHVwbGUgKG5hbWUsIGRlc2NyaXB0aW9uKQogICAgIiIiCiAgICBmb3JtYXRzID0gWyhuYW1lLCByZWdpc3RyeVsyXSkgZm9yIG5hbWUsIHJlZ2lzdHJ5IGluCiAgICAgICAgICAgICAgIF9BUkNISVZFX0ZPUk1BVFMuaXRlbXMoKV0KICAgIGZvcm1hdHMuc29ydCgpCiAgICByZXR1cm4gZm9ybWF0cwoKZGVmIHJlZ2lzdGVyX2FyY2hpdmVfZm9ybWF0KG5hbWUsIGZ1bmN0aW9uLCBleHRyYV9hcmdzPU5vbmUsIGRlc2NyaXB0aW9uPScnKToKICAgICIiIlJlZ2lzdGVycyBhbiBhcmNoaXZlIGZvcm1hdC4KCiAgICBuYW1lIGlzIHRoZSBuYW1lIG9mIHRoZSBmb3JtYXQuIGZ1bmN0aW9uIGlzIHRoZSBjYWxsYWJsZSB0aGF0IHdpbGwgYmUKICAgIHVzZWQgdG8gY3JlYXRlIGFyY2hpdmVzLiBJZiBwcm92aWRlZCwgZXh0cmFfYXJncyBpcyBhIHNlcXVlbmNlIG9mCiAgICAobmFtZSwgdmFsdWUpIHR1cGxlcyB0aGF0IHdpbGwgYmUgcGFzc2VkIGFzIGFyZ3VtZW50cyB0byB0aGUgY2FsbGFibGUuCiAgICBkZXNjcmlwdGlvbiBjYW4gYmUgcHJvdmlkZWQgdG8gZGVzY3JpYmUgdGhlIGZvcm1hdCwgYW5kIHdpbGwgYmUgcmV0dXJuZWQKICAgIGJ5IHRoZSBnZXRfYXJjaGl2ZV9mb3JtYXRzKCkgZnVuY3Rpb24uCiAgICAiIiIKICAgIGlmIGV4dHJhX2FyZ3MgaXMgTm9uZToKICAgICAgICBleHRyYV9hcmdzID0gW10KICAgIGlmIG5vdCBjYWxsYWJsZShmdW5jdGlvbik6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdUaGUgJXMgb2JqZWN0IGlzIG5vdCBjYWxsYWJsZScgJSBmdW5jdGlvbikKICAgIGlmIG5vdCBpc2luc3RhbmNlKGV4dHJhX2FyZ3MsICh0dXBsZSwgbGlzdCkpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcignZXh0cmFfYXJncyBuZWVkcyB0byBiZSBhIHNlcXVlbmNlJykKICAgIGZvciBlbGVtZW50IGluIGV4dHJhX2FyZ3M6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZWxlbWVudCwgKHR1cGxlLCBsaXN0KSkgb3IgbGVuKGVsZW1lbnQpICE9MjoKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdleHRyYV9hcmdzIGVsZW1lbnRzIGFyZSA6IChhcmdfbmFtZSwgdmFsdWUpJykKCiAgICBfQVJDSElWRV9GT1JNQVRTW25hbWVdID0gKGZ1bmN0aW9uLCBleHRyYV9hcmdzLCBkZXNjcmlwdGlvbikKCmRlZiB1bnJlZ2lzdGVyX2FyY2hpdmVfZm9ybWF0KG5hbWUpOgogICAgZGVsIF9BUkNISVZFX0ZPUk1BVFNbbmFtZV0KCmRlZiBtYWtlX2FyY2hpdmUoYmFzZV9uYW1lLCBmb3JtYXQsIHJvb3RfZGlyPU5vbmUsIGJhc2VfZGlyPU5vbmUsIHZlcmJvc2U9MCwKICAgICAgICAgICAgICAgICBkcnlfcnVuPTAsIG93bmVyPU5vbmUsIGdyb3VwPU5vbmUsIGxvZ2dlcj1Ob25lKToKICAgICIiIkNyZWF0ZSBhbiBhcmNoaXZlIGZpbGUgKGVnLiB6aXAgb3IgdGFyKS4KCiAgICAnYmFzZV9uYW1lJyBpcyB0aGUgbmFtZSBvZiB0aGUgZmlsZSB0byBjcmVhdGUsIG1pbnVzIGFueSBmb3JtYXQtc3BlY2lmaWMKICAgIGV4dGVuc2lvbjsgJ2Zvcm1hdCcgaXMgdGhlIGFyY2hpdmUgZm9ybWF0OiBvbmUgb2YgInppcCIsICJ0YXIiLCAiYnp0YXIiCiAgICBvciAiZ3p0YXIiLgoKICAgICdyb290X2RpcicgaXMgYSBkaXJlY3RvcnkgdGhhdCB3aWxsIGJlIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGUKICAgIGFyY2hpdmU7IGllLiB3ZSB0eXBpY2FsbHkgY2hkaXIgaW50byAncm9vdF9kaXInIGJlZm9yZSBjcmVhdGluZyB0aGUKICAgIGFyY2hpdmUuICAnYmFzZV9kaXInIGlzIHRoZSBkaXJlY3Rvcnkgd2hlcmUgd2Ugc3RhcnQgYXJjaGl2aW5nIGZyb207CiAgICBpZS4gJ2Jhc2VfZGlyJyB3aWxsIGJlIHRoZSBjb21tb24gcHJlZml4IG9mIGFsbCBmaWxlcyBhbmQKICAgIGRpcmVjdG9yaWVzIGluIHRoZSBhcmNoaXZlLiAgJ3Jvb3RfZGlyJyBhbmQgJ2Jhc2VfZGlyJyBib3RoIGRlZmF1bHQKICAgIHRvIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4gIFJldHVybnMgdGhlIG5hbWUgb2YgdGhlIGFyY2hpdmUgZmlsZS4KCiAgICAnb3duZXInIGFuZCAnZ3JvdXAnIGFyZSB1c2VkIHdoZW4gY3JlYXRpbmcgYSB0YXIgYXJjaGl2ZS4gQnkgZGVmYXVsdCwKICAgIHVzZXMgdGhlIGN1cnJlbnQgb3duZXIgYW5kIGdyb3VwLgogICAgIiIiCiAgICBzYXZlX2N3ZCA9IG9zLmdldGN3ZCgpCiAgICBpZiByb290X2RpciBpcyBub3QgTm9uZToKICAgICAgICBpZiBsb2dnZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiY2hhbmdpbmcgaW50byAnJXMnIiwgcm9vdF9kaXIpCiAgICAgICAgYmFzZV9uYW1lID0gb3MucGF0aC5hYnNwYXRoKGJhc2VfbmFtZSkKICAgICAgICBpZiBub3QgZHJ5X3J1bjoKICAgICAgICAgICAgb3MuY2hkaXIocm9vdF9kaXIpCgogICAgaWYgYmFzZV9kaXIgaXMgTm9uZToKICAgICAgICBiYXNlX2RpciA9IG9zLmN1cmRpcgoKICAgIGt3YXJncyA9IHsnZHJ5X3J1bic6IGRyeV9ydW4sICdsb2dnZXInOiBsb2dnZXJ9CgogICAgdHJ5OgogICAgICAgIGZvcm1hdF9pbmZvID0gX0FSQ0hJVkVfRk9STUFUU1tmb3JtYXRdCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidW5rbm93biBhcmNoaXZlIGZvcm1hdCAnJXMnIiAlIGZvcm1hdCkKCiAgICBmdW5jID0gZm9ybWF0X2luZm9bMF0KICAgIGZvciBhcmcsIHZhbCBpbiBmb3JtYXRfaW5mb1sxXToKICAgICAgICBrd2FyZ3NbYXJnXSA9IHZhbAoKICAgIGlmIGZvcm1hdCAhPSAnemlwJzoKICAgICAgICBrd2FyZ3NbJ293bmVyJ10gPSBvd25lcgogICAgICAgIGt3YXJnc1snZ3JvdXAnXSA9IGdyb3VwCgogICAgdHJ5OgogICAgICAgIGZpbGVuYW1lID0gZnVuYyhiYXNlX25hbWUsIGJhc2VfZGlyLCAqKmt3YXJncykKICAgIGZpbmFsbHk6CiAgICAgICAgaWYgcm9vdF9kaXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIGxvZ2dlciBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiY2hhbmdpbmcgYmFjayB0byAnJXMnIiwgc2F2ZV9jd2QpCiAgICAgICAgICAgIG9zLmNoZGlyKHNhdmVfY3dkKQoKICAgIHJldHVybiBmaWxlbmFtZQoKCmRlZiBnZXRfdW5wYWNrX2Zvcm1hdHMoKToKICAgICIiIlJldHVybnMgYSBsaXN0IG9mIHN1cHBvcnRlZCBmb3JtYXRzIGZvciB1bnBhY2tpbmcuCgogICAgRWFjaCBlbGVtZW50IG9mIHRoZSByZXR1cm5lZCBzZXF1ZW5jZSBpcyBhIHR1cGxlCiAgICAobmFtZSwgZXh0ZW5zaW9ucywgZGVzY3JpcHRpb24pCiAgICAiIiIKICAgIGZvcm1hdHMgPSBbKG5hbWUsIGluZm9bMF0sIGluZm9bM10pIGZvciBuYW1lLCBpbmZvIGluCiAgICAgICAgICAgICAgIF9VTlBBQ0tfRk9STUFUUy5pdGVtcygpXQogICAgZm9ybWF0cy5zb3J0KCkKICAgIHJldHVybiBmb3JtYXRzCgpkZWYgX2NoZWNrX3VucGFja19vcHRpb25zKGV4dGVuc2lvbnMsIGZ1bmN0aW9uLCBleHRyYV9hcmdzKToKICAgICIiIkNoZWNrcyB3aGF0IGdldHMgcmVnaXN0ZXJlZCBhcyBhbiB1bnBhY2tlci4iIiIKICAgICMgZmlyc3QgbWFrZSBzdXJlIG5vIG90aGVyIHVucGFja2VyIGlzIHJlZ2lzdGVyZWQgZm9yIHRoaXMgZXh0ZW5zaW9uCiAgICBleGlzdGluZ19leHRlbnNpb25zID0ge30KICAgIGZvciBuYW1lLCBpbmZvIGluIF9VTlBBQ0tfRk9STUFUUy5pdGVtcygpOgogICAgICAgIGZvciBleHQgaW4gaW5mb1swXToKICAgICAgICAgICAgZXhpc3RpbmdfZXh0ZW5zaW9uc1tleHRdID0gbmFtZQoKICAgIGZvciBleHRlbnNpb24gaW4gZXh0ZW5zaW9uczoKICAgICAgICBpZiBleHRlbnNpb24gaW4gZXhpc3RpbmdfZXh0ZW5zaW9uczoKICAgICAgICAgICAgbXNnID0gJyVzIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCBmb3IgIiVzIicKICAgICAgICAgICAgcmFpc2UgUmVnaXN0cnlFcnJvcihtc2cgJSAoZXh0ZW5zaW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ19leHRlbnNpb25zW2V4dGVuc2lvbl0pKQoKICAgIGlmIG5vdCBjYWxsYWJsZShmdW5jdGlvbik6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdUaGUgcmVnaXN0ZXJlZCBmdW5jdGlvbiBtdXN0IGJlIGEgY2FsbGFibGUnKQoKCmRlZiByZWdpc3Rlcl91bnBhY2tfZm9ybWF0KG5hbWUsIGV4dGVuc2lvbnMsIGZ1bmN0aW9uLCBleHRyYV9hcmdzPU5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPScnKToKICAgICIiIlJlZ2lzdGVycyBhbiB1bnBhY2sgZm9ybWF0LgoKICAgIGBuYW1lYCBpcyB0aGUgbmFtZSBvZiB0aGUgZm9ybWF0LiBgZXh0ZW5zaW9uc2AgaXMgYSBsaXN0IG9mIGV4dGVuc2lvbnMKICAgIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGZvcm1hdC4KCiAgICBgZnVuY3Rpb25gIGlzIHRoZSBjYWxsYWJsZSB0aGF0IHdpbGwgYmUKICAgIHVzZWQgdG8gdW5wYWNrIGFyY2hpdmVzLiBUaGUgY2FsbGFibGUgd2lsbCByZWNlaXZlIGFyY2hpdmVzIHRvIHVucGFjay4KICAgIElmIGl0J3MgdW5hYmxlIHRvIGhhbmRsZSBhbiBhcmNoaXZlLCBpdCBuZWVkcyB0byByYWlzZSBhIFJlYWRFcnJvcgogICAgZXhjZXB0aW9uLgoKICAgIElmIHByb3ZpZGVkLCBgZXh0cmFfYXJnc2AgaXMgYSBzZXF1ZW5jZSBvZgogICAgKG5hbWUsIHZhbHVlKSB0dXBsZXMgdGhhdCB3aWxsIGJlIHBhc3NlZCBhcyBhcmd1bWVudHMgdG8gdGhlIGNhbGxhYmxlLgogICAgZGVzY3JpcHRpb24gY2FuIGJlIHByb3ZpZGVkIHRvIGRlc2NyaWJlIHRoZSBmb3JtYXQsIGFuZCB3aWxsIGJlIHJldHVybmVkCiAgICBieSB0aGUgZ2V0X3VucGFja19mb3JtYXRzKCkgZnVuY3Rpb24uCiAgICAiIiIKICAgIGlmIGV4dHJhX2FyZ3MgaXMgTm9uZToKICAgICAgICBleHRyYV9hcmdzID0gW10KICAgIF9jaGVja191bnBhY2tfb3B0aW9ucyhleHRlbnNpb25zLCBmdW5jdGlvbiwgZXh0cmFfYXJncykKICAgIF9VTlBBQ0tfRk9STUFUU1tuYW1lXSA9IGV4dGVuc2lvbnMsIGZ1bmN0aW9uLCBleHRyYV9hcmdzLCBkZXNjcmlwdGlvbgoKZGVmIHVucmVnaXN0ZXJfdW5wYWNrX2Zvcm1hdChuYW1lKToKICAgICIiIlJlbW92ZXMgdGhlIHBhY2sgZm9ybWF0IGZyb20gdGhlIHJlZ2lzdGVyeS4iIiIKICAgIGRlbCBfVU5QQUNLX0ZPUk1BVFNbbmFtZV0KCmRlZiBfZW5zdXJlX2RpcmVjdG9yeShwYXRoKToKICAgICIiIkVuc3VyZSB0aGF0IHRoZSBwYXJlbnQgZGlyZWN0b3J5IG9mIGBwYXRoYCBleGlzdHMiIiIKICAgIGRpcm5hbWUgPSBvcy5wYXRoLmRpcm5hbWUocGF0aCkKICAgIGlmIG5vdCBvcy5wYXRoLmlzZGlyKGRpcm5hbWUpOgogICAgICAgIG9zLm1ha2VkaXJzKGRpcm5hbWUpCgpkZWYgX3VucGFja196aXBmaWxlKGZpbGVuYW1lLCBleHRyYWN0X2Rpcik6CiAgICAiIiJVbnBhY2sgemlwIGBmaWxlbmFtZWAgdG8gYGV4dHJhY3RfZGlyYAogICAgIiIiCiAgICB0cnk6CiAgICAgICAgaW1wb3J0IHppcGZpbGUKICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICByYWlzZSBSZWFkRXJyb3IoJ3psaWIgbm90IHN1cHBvcnRlZCwgY2Fubm90IHVucGFjayB0aGlzIGFyY2hpdmUuJykKCiAgICBpZiBub3QgemlwZmlsZS5pc196aXBmaWxlKGZpbGVuYW1lKToKICAgICAgICByYWlzZSBSZWFkRXJyb3IoIiVzIGlzIG5vdCBhIHppcCBmaWxlIiAlIGZpbGVuYW1lKQoKICAgIHppcCA9IHppcGZpbGUuWmlwRmlsZShmaWxlbmFtZSkKICAgIHRyeToKICAgICAgICBmb3IgaW5mbyBpbiB6aXAuaW5mb2xpc3QoKToKICAgICAgICAgICAgbmFtZSA9IGluZm8uZmlsZW5hbWUKCiAgICAgICAgICAgICMgZG9uJ3QgZXh0cmFjdCBhYnNvbHV0ZSBwYXRocyBvciBvbmVzIHdpdGggLi4gaW4gdGhlbQogICAgICAgICAgICBpZiBuYW1lLnN0YXJ0c3dpdGgoJy8nKSBvciAnLi4nIGluIG5hbWU6CiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgdGFyZ2V0ID0gb3MucGF0aC5qb2luKGV4dHJhY3RfZGlyLCAqbmFtZS5zcGxpdCgnLycpKQogICAgICAgICAgICBpZiBub3QgdGFyZ2V0OgogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIF9lbnN1cmVfZGlyZWN0b3J5KHRhcmdldCkKICAgICAgICAgICAgaWYgbm90IG5hbWUuZW5kc3dpdGgoJy8nKToKICAgICAgICAgICAgICAgICMgZmlsZQogICAgICAgICAgICAgICAgZGF0YSA9IHppcC5yZWFkKGluZm8uZmlsZW5hbWUpCiAgICAgICAgICAgICAgICBmID0gb3Blbih0YXJnZXQsICd3YicpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgZi53cml0ZShkYXRhKQogICAgICAgICAgICAgICAgZmluYWxseToKICAgICAgICAgICAgICAgICAgICBmLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICBkZWwgZGF0YQogICAgZmluYWxseToKICAgICAgICB6aXAuY2xvc2UoKQoKZGVmIF91bnBhY2tfdGFyZmlsZShmaWxlbmFtZSwgZXh0cmFjdF9kaXIpOgogICAgIiIiVW5wYWNrIHRhci90YXIuZ3ovdGFyLmJ6MiBgZmlsZW5hbWVgIHRvIGBleHRyYWN0X2RpcmAKICAgICIiIgogICAgdHJ5OgogICAgICAgIHRhcm9iaiA9IHRhcmZpbGUub3BlbihmaWxlbmFtZSkKICAgIGV4Y2VwdCB0YXJmaWxlLlRhckVycm9yOgogICAgICAgIHJhaXNlIFJlYWRFcnJvcigKICAgICAgICAgICAgIiVzIGlzIG5vdCBhIGNvbXByZXNzZWQgb3IgdW5jb21wcmVzc2VkIHRhciBmaWxlIiAlIGZpbGVuYW1lKQogICAgdHJ5OgogICAgICAgIHRhcm9iai5leHRyYWN0YWxsKGV4dHJhY3RfZGlyKQogICAgZmluYWxseToKICAgICAgICB0YXJvYmouY2xvc2UoKQoKX1VOUEFDS19GT1JNQVRTID0gewogICAgJ2d6dGFyJzogKFsnLnRhci5neicsICcudGd6J10sIF91bnBhY2tfdGFyZmlsZSwgW10sICJnemlwJ2VkIHRhci1maWxlIiksCiAgICAndGFyJzogICAoWycudGFyJ10sIF91bnBhY2tfdGFyZmlsZSwgW10sICJ1bmNvbXByZXNzZWQgdGFyIGZpbGUiKSwKICAgICd6aXAnOiAgIChbJy56aXAnXSwgX3VucGFja196aXBmaWxlLCBbXSwgIlpJUCBmaWxlIikKICAgIH0KCmlmIF9CWjJfU1VQUE9SVEVEOgogICAgX1VOUEFDS19GT1JNQVRTWydienRhciddID0gKFsnLmJ6MiddLCBfdW5wYWNrX3RhcmZpbGUsIFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJiemlwMidlZCB0YXItZmlsZSIpCgpkZWYgX2ZpbmRfdW5wYWNrX2Zvcm1hdChmaWxlbmFtZSk6CiAgICBmb3IgbmFtZSwgaW5mbyBpbiBfVU5QQUNLX0ZPUk1BVFMuaXRlbXMoKToKICAgICAgICBmb3IgZXh0ZW5zaW9uIGluIGluZm9bMF06CiAgICAgICAgICAgIGlmIGZpbGVuYW1lLmVuZHN3aXRoKGV4dGVuc2lvbik6CiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZQogICAgcmV0dXJuIE5vbmUKCmRlZiB1bnBhY2tfYXJjaGl2ZShmaWxlbmFtZSwgZXh0cmFjdF9kaXI9Tm9uZSwgZm9ybWF0PU5vbmUpOgogICAgIiIiVW5wYWNrIGFuIGFyY2hpdmUuCgogICAgYGZpbGVuYW1lYCBpcyB0aGUgbmFtZSBvZiB0aGUgYXJjaGl2ZS4KCiAgICBgZXh0cmFjdF9kaXJgIGlzIHRoZSBuYW1lIG9mIHRoZSB0YXJnZXQgZGlyZWN0b3J5LCB3aGVyZSB0aGUgYXJjaGl2ZQogICAgaXMgdW5wYWNrZWQuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkgaXMgdXNlZC4KCiAgICBgZm9ybWF0YCBpcyB0aGUgYXJjaGl2ZSBmb3JtYXQ6IG9uZSBvZiAiemlwIiwgInRhciIsIG9yICJnenRhciIuIE9yIGFueQogICAgb3RoZXIgcmVnaXN0ZXJlZCBmb3JtYXQuIElmIG5vdCBwcm92aWRlZCwgdW5wYWNrX2FyY2hpdmUgd2lsbCB1c2UgdGhlCiAgICBmaWxlbmFtZSBleHRlbnNpb24gYW5kIHNlZSBpZiBhbiB1bnBhY2tlciB3YXMgcmVnaXN0ZXJlZCBmb3IgdGhhdAogICAgZXh0ZW5zaW9uLgoKICAgIEluIGNhc2Ugbm9uZSBpcyBmb3VuZCwgYSBWYWx1ZUVycm9yIGlzIHJhaXNlZC4KICAgICIiIgogICAgaWYgZXh0cmFjdF9kaXIgaXMgTm9uZToKICAgICAgICBleHRyYWN0X2RpciA9IG9zLmdldGN3ZCgpCgogICAgaWYgZm9ybWF0IGlzIG5vdCBOb25lOgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9ybWF0X2luZm8gPSBfVU5QQUNLX0ZPUk1BVFNbZm9ybWF0XQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5rbm93biB1bnBhY2sgZm9ybWF0ICd7MH0nIi5mb3JtYXQoZm9ybWF0KSkKCiAgICAgICAgZnVuYyA9IGZvcm1hdF9pbmZvWzFdCiAgICAgICAgZnVuYyhmaWxlbmFtZSwgZXh0cmFjdF9kaXIsICoqZGljdChmb3JtYXRfaW5mb1syXSkpCiAgICBlbHNlOgogICAgICAgICMgd2UgbmVlZCB0byBsb29rIGF0IHRoZSByZWdpc3RlcmVkIHVucGFja2VycyBzdXBwb3J0ZWQgZXh0ZW5zaW9ucwogICAgICAgIGZvcm1hdCA9IF9maW5kX3VucGFja19mb3JtYXQoZmlsZW5hbWUpCiAgICAgICAgaWYgZm9ybWF0IGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFJlYWRFcnJvcigiVW5rbm93biBhcmNoaXZlIGZvcm1hdCAnezB9JyIuZm9ybWF0KGZpbGVuYW1lKSkKCiAgICAgICAgZnVuYyA9IF9VTlBBQ0tfRk9STUFUU1tmb3JtYXRdWzFdCiAgICAgICAga3dhcmdzID0gZGljdChfVU5QQUNLX0ZPUk1BVFNbZm9ybWF0XVsyXSkKICAgICAgICBmdW5jKGZpbGVuYW1lLCBleHRyYWN0X2RpciwgKiprd2FyZ3MpCgoKaWYgaGFzYXR0cihvcywgJ3N0YXR2ZnMnKToKCiAgICBfX2FsbF9fLmFwcGVuZCgnZGlza191c2FnZScpCiAgICBfbnR1cGxlX2Rpc2t1c2FnZSA9IGNvbGxlY3Rpb25zLm5hbWVkdHVwbGUoJ3VzYWdlJywgJ3RvdGFsIHVzZWQgZnJlZScpCgogICAgZGVmIGRpc2tfdXNhZ2UocGF0aCk6CiAgICAgICAgIiIiUmV0dXJuIGRpc2sgdXNhZ2Ugc3RhdGlzdGljcyBhYm91dCB0aGUgZ2l2ZW4gcGF0aC4KCiAgICAgICAgUmV0dXJuZWQgdmFsdWUgaXMgYSBuYW1lZCB0dXBsZSB3aXRoIGF0dHJpYnV0ZXMgJ3RvdGFsJywgJ3VzZWQnIGFuZAogICAgICAgICdmcmVlJywgd2hpY2ggYXJlIHRoZSBhbW91bnQgb2YgdG90YWwsIHVzZWQgYW5kIGZyZWUgc3BhY2UsIGluIGJ5dGVzLgogICAgICAgICIiIgogICAgICAgIHN0ID0gb3Muc3RhdHZmcyhwYXRoKQogICAgICAgIGZyZWUgPSBzdC5mX2JhdmFpbCAqIHN0LmZfZnJzaXplCiAgICAgICAgdG90YWwgPSBzdC5mX2Jsb2NrcyAqIHN0LmZfZnJzaXplCiAgICAgICAgdXNlZCA9IChzdC5mX2Jsb2NrcyAtIHN0LmZfYmZyZWUpICogc3QuZl9mcnNpemUKICAgICAgICByZXR1cm4gX250dXBsZV9kaXNrdXNhZ2UodG90YWwsIHVzZWQsIGZyZWUpCgplbGlmIG9zLm5hbWUgPT0gJ250JzoKCiAgICBpbXBvcnQgbnQKICAgIF9fYWxsX18uYXBwZW5kKCdkaXNrX3VzYWdlJykKICAgIF9udHVwbGVfZGlza3VzYWdlID0gY29sbGVjdGlvbnMubmFtZWR0dXBsZSgndXNhZ2UnLCAndG90YWwgdXNlZCBmcmVlJykKCiAgICBkZWYgZGlza191c2FnZShwYXRoKToKICAgICAgICAiIiJSZXR1cm4gZGlzayB1c2FnZSBzdGF0aXN0aWNzIGFib3V0IHRoZSBnaXZlbiBwYXRoLgoKICAgICAgICBSZXR1cm5lZCB2YWx1cyBpcyBhIG5hbWVkIHR1cGxlIHdpdGggYXR0cmlidXRlcyAndG90YWwnLCAndXNlZCcgYW5kCiAgICAgICAgJ2ZyZWUnLCB3aGljaCBhcmUgdGhlIGFtb3VudCBvZiB0b3RhbCwgdXNlZCBhbmQgZnJlZSBzcGFjZSwgaW4gYnl0ZXMuCiAgICAgICAgIiIiCiAgICAgICAgdG90YWwsIGZyZWUgPSBudC5fZ2V0ZGlza3VzYWdlKHBhdGgpCiAgICAgICAgdXNlZCA9IHRvdGFsIC0gZnJlZQogICAgICAgIHJldHVybiBfbnR1cGxlX2Rpc2t1c2FnZSh0b3RhbCwgdXNlZCwgZnJlZSkKCgpkZWYgY2hvd24ocGF0aCwgdXNlcj1Ob25lLCBncm91cD1Ob25lKToKICAgICIiIkNoYW5nZSBvd25lciB1c2VyIGFuZCBncm91cCBvZiB0aGUgZ2l2ZW4gcGF0aC4KCiAgICB1c2VyIGFuZCBncm91cCBjYW4gYmUgdGhlIHVpZC9naWQgb3IgdGhlIHVzZXIvZ3JvdXAgbmFtZXMsIGFuZCBpbiB0aGF0IGNhc2UsCiAgICB0aGV5IGFyZSBjb252ZXJ0ZWQgdG8gdGhlaXIgcmVzcGVjdGl2ZSB1aWQvZ2lkLgogICAgIiIiCgogICAgaWYgdXNlciBpcyBOb25lIGFuZCBncm91cCBpcyBOb25lOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInVzZXIgYW5kL29yIGdyb3VwIG11c3QgYmUgc2V0IikKCiAgICBfdXNlciA9IHVzZXIKICAgIF9ncm91cCA9IGdyb3VwCgogICAgIyAtMSBtZWFucyBkb24ndCBjaGFuZ2UgaXQKICAgIGlmIHVzZXIgaXMgTm9uZToKICAgICAgICBfdXNlciA9IC0xCiAgICAjIHVzZXIgY2FuIGVpdGhlciBiZSBhbiBpbnQgKHRoZSB1aWQpIG9yIGEgc3RyaW5nICh0aGUgc3lzdGVtIHVzZXJuYW1lKQogICAgZWxpZiBpc2luc3RhbmNlKHVzZXIsIHN0cik6CiAgICAgICAgX3VzZXIgPSBfZ2V0X3VpZCh1c2VyKQogICAgICAgIGlmIF91c2VyIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIExvb2t1cEVycm9yKCJubyBzdWNoIHVzZXI6IHshcn0iLmZvcm1hdCh1c2VyKSkKCiAgICBpZiBncm91cCBpcyBOb25lOgogICAgICAgIF9ncm91cCA9IC0xCiAgICBlbGlmIG5vdCBpc2luc3RhbmNlKGdyb3VwLCBpbnQpOgogICAgICAgIF9ncm91cCA9IF9nZXRfZ2lkKGdyb3VwKQogICAgICAgIGlmIF9ncm91cCBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBMb29rdXBFcnJvcigibm8gc3VjaCBncm91cDogeyFyfSIuZm9ybWF0KGdyb3VwKSkKCiAgICBvcy5jaG93bihwYXRoLCBfdXNlciwgX2dyb3VwKQoKZGVmIGdldF90ZXJtaW5hbF9zaXplKGZhbGxiYWNrPSg4MCwgMjQpKToKICAgICIiIkdldCB0aGUgc2l6ZSBvZiB0aGUgdGVybWluYWwgd2luZG93LgoKICAgIEZvciBlYWNoIG9mIHRoZSB0d28gZGltZW5zaW9ucywgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlLCBDT0xVTU5TCiAgICBhbmQgTElORVMgcmVzcGVjdGl2ZWx5LCBpcyBjaGVja2VkLiBJZiB0aGUgdmFyaWFibGUgaXMgZGVmaW5lZCBhbmQKICAgIHRoZSB2YWx1ZSBpcyBhIHBvc2l0aXZlIGludGVnZXIsIGl0IGlzIHVzZWQuCgogICAgV2hlbiBDT0xVTU5TIG9yIExJTkVTIGlzIG5vdCBkZWZpbmVkLCB3aGljaCBpcyB0aGUgY29tbW9uIGNhc2UsCiAgICB0aGUgdGVybWluYWwgY29ubmVjdGVkIHRvIHN5cy5fX3N0ZG91dF9fIGlzIHF1ZXJpZWQKICAgIGJ5IGludm9raW5nIG9zLmdldF90ZXJtaW5hbF9zaXplLgoKICAgIElmIHRoZSB0ZXJtaW5hbCBzaXplIGNhbm5vdCBiZSBzdWNjZXNzZnVsbHkgcXVlcmllZCwgZWl0aGVyIGJlY2F1c2UKICAgIHRoZSBzeXN0ZW0gZG9lc24ndCBzdXBwb3J0IHF1ZXJ5aW5nLCBvciBiZWNhdXNlIHdlIGFyZSBub3QKICAgIGNvbm5lY3RlZCB0byBhIHRlcm1pbmFsLCB0aGUgdmFsdWUgZ2l2ZW4gaW4gZmFsbGJhY2sgcGFyYW1ldGVyCiAgICBpcyB1c2VkLiBGYWxsYmFjayBkZWZhdWx0cyB0byAoODAsIDI0KSB3aGljaCBpcyB0aGUgZGVmYXVsdAogICAgc2l6ZSB1c2VkIGJ5IG1hbnkgdGVybWluYWwgZW11bGF0b3JzLgoKICAgIFRoZSB2YWx1ZSByZXR1cm5lZCBpcyBhIG5hbWVkIHR1cGxlIG9mIHR5cGUgb3MudGVybWluYWxfc2l6ZS4KICAgICIiIgogICAgIyBjb2x1bW5zLCBsaW5lcyBhcmUgdGhlIHdvcmtpbmcgdmFsdWVzCiAgICB0cnk6CiAgICAgICAgY29sdW1ucyA9IGludChvcy5lbnZpcm9uWydDT0xVTU5TJ10pCiAgICBleGNlcHQgKEtleUVycm9yLCBWYWx1ZUVycm9yKToKICAgICAgICBjb2x1bW5zID0gMAoKICAgIHRyeToKICAgICAgICBsaW5lcyA9IGludChvcy5lbnZpcm9uWydMSU5FUyddKQogICAgZXhjZXB0IChLZXlFcnJvciwgVmFsdWVFcnJvcik6CiAgICAgICAgbGluZXMgPSAwCgogICAgIyBvbmx5IHF1ZXJ5IGlmIG5lY2Vzc2FyeQogICAgaWYgY29sdW1ucyA8PSAwIG9yIGxpbmVzIDw9IDA6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzaXplID0gb3MuZ2V0X3Rlcm1pbmFsX3NpemUoc3lzLl9fc3Rkb3V0X18uZmlsZW5vKCkpCiAgICAgICAgZXhjZXB0IChOYW1lRXJyb3IsIE9TRXJyb3IpOgogICAgICAgICAgICBzaXplID0gb3MudGVybWluYWxfc2l6ZShmYWxsYmFjaykKICAgICAgICBpZiBjb2x1bW5zIDw9IDA6CiAgICAgICAgICAgIGNvbHVtbnMgPSBzaXplLmNvbHVtbnMKICAgICAgICBpZiBsaW5lcyA8PSAwOgogICAgICAgICAgICBsaW5lcyA9IHNpemUubGluZXMKCiAgICByZXR1cm4gb3MudGVybWluYWxfc2l6ZSgoY29sdW1ucywgbGluZXMpKQoKZGVmIHdoaWNoKGNtZCwgbW9kZT1vcy5GX09LIHwgb3MuWF9PSywgcGF0aD1Ob25lKToKICAgICIiIkdpdmVuIGEgY29tbWFuZCwgbW9kZSwgYW5kIGEgUEFUSCBzdHJpbmcsIHJldHVybiB0aGUgcGF0aCB3aGljaAogICAgY29uZm9ybXMgdG8gdGhlIGdpdmVuIG1vZGUgb24gdGhlIFBBVEgsIG9yIE5vbmUgaWYgdGhlcmUgaXMgbm8gc3VjaAogICAgZmlsZS4KCiAgICBgbW9kZWAgZGVmYXVsdHMgdG8gb3MuRl9PSyB8IG9zLlhfT0suIGBwYXRoYCBkZWZhdWx0cyB0byB0aGUgcmVzdWx0CiAgICBvZiBvcy5lbnZpcm9uLmdldCgiUEFUSCIpLCBvciBjYW4gYmUgb3ZlcnJpZGRlbiB3aXRoIGEgY3VzdG9tIHNlYXJjaAogICAgcGF0aC4KCiAgICAiIiIKICAgICMgQ2hlY2sgdGhhdCBhIGdpdmVuIGZpbGUgY2FuIGJlIGFjY2Vzc2VkIHdpdGggdGhlIGNvcnJlY3QgbW9kZS4KICAgICMgQWRkaXRpb25hbGx5IGNoZWNrIHRoYXQgYGZpbGVgIGlzIG5vdCBhIGRpcmVjdG9yeSwgYXMgb24gV2luZG93cwogICAgIyBkaXJlY3RvcmllcyBwYXNzIHRoZSBvcy5hY2Nlc3MgY2hlY2suCiAgICBkZWYgX2FjY2Vzc19jaGVjayhmbiwgbW9kZSk6CiAgICAgICAgcmV0dXJuIChvcy5wYXRoLmV4aXN0cyhmbikgYW5kIG9zLmFjY2VzcyhmbiwgbW9kZSkKICAgICAgICAgICAgICAgIGFuZCBub3Qgb3MucGF0aC5pc2RpcihmbikpCgogICAgIyBJZiB3ZSdyZSBnaXZlbiBhIHBhdGggd2l0aCBhIGRpcmVjdG9yeSBwYXJ0LCBsb29rIGl0IHVwIGRpcmVjdGx5IHJhdGhlcgogICAgIyB0aGFuIHJlZmVycmluZyB0byBQQVRIIGRpcmVjdG9yaWVzLiBUaGlzIGluY2x1ZGVzIGNoZWNraW5nIHJlbGF0aXZlIHRvIHRoZQogICAgIyBjdXJyZW50IGRpcmVjdG9yeSwgZS5nLiAuL3NjcmlwdAogICAgaWYgb3MucGF0aC5kaXJuYW1lKGNtZCk6CiAgICAgICAgaWYgX2FjY2Vzc19jaGVjayhjbWQsIG1vZGUpOgogICAgICAgICAgICByZXR1cm4gY21kCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBpZiBwYXRoIGlzIE5vbmU6CiAgICAgICAgcGF0aCA9IG9zLmVudmlyb24uZ2V0KCJQQVRIIiwgb3MuZGVmcGF0aCkKICAgIGlmIG5vdCBwYXRoOgogICAgICAgIHJldHVybiBOb25lCiAgICBwYXRoID0gcGF0aC5zcGxpdChvcy5wYXRoc2VwKQoKICAgIGlmIHN5cy5wbGF0Zm9ybSA9PSAid2luMzIiOgogICAgICAgICMgVGhlIGN1cnJlbnQgZGlyZWN0b3J5IHRha2VzIHByZWNlZGVuY2Ugb24gV2luZG93cy4KICAgICAgICBpZiBub3Qgb3MuY3VyZGlyIGluIHBhdGg6CiAgICAgICAgICAgIHBhdGguaW5zZXJ0KDAsIG9zLmN1cmRpcikKCiAgICAgICAgIyBQQVRIRVhUIGlzIG5lY2Vzc2FyeSB0byBjaGVjayBvbiBXaW5kb3dzLgogICAgICAgIHBhdGhleHQgPSBvcy5lbnZpcm9uLmdldCgiUEFUSEVYVCIsICIiKS5zcGxpdChvcy5wYXRoc2VwKQogICAgICAgICMgU2VlIGlmIHRoZSBnaXZlbiBmaWxlIG1hdGNoZXMgYW55IG9mIHRoZSBleHBlY3RlZCBwYXRoIGV4dGVuc2lvbnMuCiAgICAgICAgIyBUaGlzIHdpbGwgYWxsb3cgdXMgdG8gc2hvcnQgY2lyY3VpdCB3aGVuIGdpdmVuICJweXRob24uZXhlIi4KICAgICAgICAjIElmIGl0IGRvZXMgbWF0Y2gsIG9ubHkgdGVzdCB0aGF0IG9uZSwgb3RoZXJ3aXNlIHdlIGhhdmUgdG8gdHJ5CiAgICAgICAgIyBvdGhlcnMuCiAgICAgICAgaWYgYW55KGNtZC5sb3dlcigpLmVuZHN3aXRoKGV4dC5sb3dlcigpKSBmb3IgZXh0IGluIHBhdGhleHQpOgogICAgICAgICAgICBmaWxlcyA9IFtjbWRdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZmlsZXMgPSBbY21kICsgZXh0IGZvciBleHQgaW4gcGF0aGV4dF0KICAgIGVsc2U6CiAgICAgICAgIyBPbiBvdGhlciBwbGF0Zm9ybXMgeW91IGRvbid0IGhhdmUgdGhpbmdzIGxpa2UgUEFUSEVYVCB0byB0ZWxsIHlvdQogICAgICAgICMgd2hhdCBmaWxlIHN1ZmZpeGVzIGFyZSBleGVjdXRhYmxlLCBzbyBqdXN0IHBhc3Mgb24gY21kIGFzLWlzLgogICAgICAgIGZpbGVzID0gW2NtZF0KCiAgICBzZWVuID0gc2V0KCkKICAgIGZvciBkaXIgaW4gcGF0aDoKICAgICAgICBub3JtZGlyID0gb3MucGF0aC5ub3JtY2FzZShkaXIpCiAgICAgICAgaWYgbm90IG5vcm1kaXIgaW4gc2VlbjoKICAgICAgICAgICAgc2Vlbi5hZGQobm9ybWRpcikKICAgICAgICAgICAgZm9yIHRoZWZpbGUgaW4gZmlsZXM6CiAgICAgICAgICAgICAgICBuYW1lID0gb3MucGF0aC5qb2luKGRpciwgdGhlZmlsZSkKICAgICAgICAgICAgICAgIGlmIF9hY2Nlc3NfY2hlY2sobmFtZSwgbW9kZSk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUKICAgIHJldHVybiBOb25lCg==',
'/Lib/_pyio.py':'IyAiUHl0aG9uIGltcGxlbWVudGF0aW9uIG9mIHRoZSBpbyBtb2R1bGUuIgoKaW1wb3J0IG9zCiNpbXBvcnQgYWJjCmltcG9ydCBjb2RlY3MKaW1wb3J0IHdhcm5pbmdzCmltcG9ydCBlcnJubwojIEltcG9ydCBfdGhyZWFkIGluc3RlYWQgb2YgdGhyZWFkaW5nIHRvIHJlZHVjZSBzdGFydHVwIGNvc3QKI3RyeToKIyAgICBmcm9tIF90aHJlYWQgaW1wb3J0IGFsbG9jYXRlX2xvY2sgYXMgTG9jawojZXhjZXB0IEltcG9ydEVycm9yOgpmcm9tIF9kdW1teV90aHJlYWQgaW1wb3J0IGFsbG9jYXRlX2xvY2sgYXMgTG9jawoKI2ltcG9ydCBpbwojZnJvbSBpbyBpbXBvcnQgKF9fYWxsX18sIFNFRUtfU0VULCBTRUVLX0NVUiwgU0VFS19FTkQpCmZyb20gZXJybm8gaW1wb3J0IEVJTlRSCgojIGZvciBzZWVrKCkgICAodGFrZW4gZnJvbSBpby5weSkKU0VFS19TRVQgPSAwClNFRUtfQ1VSID0gMQpTRUVLX0VORCA9IDIKCiMgb3BlbigpIHVzZXMgc3RfYmxrc2l6ZSB3aGVuZXZlciB3ZSBjYW4KREVGQVVMVF9CVUZGRVJfU0laRSA9IDggKiAxMDI0ICAjIGJ5dGVzCgojIE5PVEU6IEJhc2UgY2xhc3NlcyBkZWZpbmVkIGhlcmUgYXJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgIm9mZmljaWFsIiBBQkNzCiMgZGVmaW5lZCBpbiBpby5weS4gV2UgZG9uJ3QgdXNlIHJlYWwgaW5oZXJpdGFuY2UgdGhvdWdoLCBiZWNhdXNlIHdlIGRvbid0CiMgd2FudCB0byBpbmhlcml0IHRoZSBDIGltcGxlbWVudGF0aW9ucy4KCmNsYXNzIEJsb2NraW5nSU9FcnJvcihJT0Vycm9yKToKICAgICJFeGNlcHRpb24gcmFpc2VkIHdoZW4gSS9PIHdvdWxkIGJsb2NrIG9uIGEgbm9uLWJsb2NraW5nIEkvTyBzdHJlYW0uIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBlcnJubywgc3RyZXJyb3IsIGNoYXJhY3RlcnNfd3JpdHRlbj0wKToKICAgICAgICAjc3VwZXIoKS5fX2luaXRfXyhlcnJubywgc3RyZXJyb3IpICAgI2ZpeG1lCiAgICAgICAgSU9FcnJvci5fX2luaXRfXyhzZWxmLCBlcnJubywgc3RyZXJyb3IpCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY2hhcmFjdGVyc193cml0dGVuLCBpbnQpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNoYXJhY3RlcnNfd3JpdHRlbiBtdXN0IGJlIGEgaW50ZWdlciIpCiAgICAgICAgc2VsZi5jaGFyYWN0ZXJzX3dyaXR0ZW4gPSBjaGFyYWN0ZXJzX3dyaXR0ZW4KCgpkZWYgb3BlbihmaWxlLCBtb2RlPSJyIiwgYnVmZmVyaW5nPS0xLCBlbmNvZGluZz1Ob25lLCBlcnJvcnM9Tm9uZSxcCiAgICAgICAgIG5ld2xpbmU9Tm9uZSwgY2xvc2VmZD1UcnVlKToKCiAgICBpZiBub3QgaXNpbnN0YW5jZShmaWxlLCAoc3RyLCBieXRlcywgaW50KSk6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJpbnZhbGlkIGZpbGU6ICVyIiAlIGZpbGUpCiAgICBpZiBub3QgaXNpbnN0YW5jZShtb2RlLCBzdHIpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW52YWxpZCBtb2RlOiAlciIgJSBtb2RlKQogICAgaWYgbm90IGlzaW5zdGFuY2UoYnVmZmVyaW5nLCBpbnQpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW52YWxpZCBidWZmZXJpbmc6ICVyIiAlIGJ1ZmZlcmluZykKICAgIGlmIGVuY29kaW5nIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShlbmNvZGluZywgc3RyKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoImludmFsaWQgZW5jb2Rpbmc6ICVyIiAlIGVuY29kaW5nKQogICAgaWYgZXJyb3JzIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShlcnJvcnMsIHN0cik6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJpbnZhbGlkIGVycm9yczogJXIiICUgZXJyb3JzKQogICAgbW9kZXMgPSBzZXQobW9kZSkKICAgIGlmIG1vZGVzIC0gc2V0KCJhcndiK3RVIikgb3IgbGVuKG1vZGUpID4gbGVuKG1vZGVzKToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIG1vZGU6ICVyIiAlIG1vZGUpCiAgICByZWFkaW5nID0gInIiIGluIG1vZGVzCiAgICB3cml0aW5nID0gInciIGluIG1vZGVzCiAgICBhcHBlbmRpbmcgPSAiYSIgaW4gbW9kZXMKICAgIHVwZGF0aW5nID0gIisiIGluIG1vZGVzCiAgICB0ZXh0ID0gInQiIGluIG1vZGVzCiAgICBiaW5hcnkgPSAiYiIgaW4gbW9kZXMKICAgIGlmICJVIiBpbiBtb2RlczoKICAgICAgICBpZiB3cml0aW5nIG9yIGFwcGVuZGluZzoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiY2FuJ3QgdXNlIFUgYW5kIHdyaXRpbmcgbW9kZSBhdCBvbmNlIikKICAgICAgICByZWFkaW5nID0gVHJ1ZQogICAgaWYgdGV4dCBhbmQgYmluYXJ5OgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImNhbid0IGhhdmUgdGV4dCBhbmQgYmluYXJ5IG1vZGUgYXQgb25jZSIpCiAgICBpZiByZWFkaW5nICsgd3JpdGluZyArIGFwcGVuZGluZyA+IDE6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiY2FuJ3QgaGF2ZSByZWFkL3dyaXRlL2FwcGVuZCBtb2RlIGF0IG9uY2UiKQogICAgaWYgbm90IChyZWFkaW5nIG9yIHdyaXRpbmcgb3IgYXBwZW5kaW5nKToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJtdXN0IGhhdmUgZXhhY3RseSBvbmUgb2YgcmVhZC93cml0ZS9hcHBlbmQgbW9kZSIpCiAgICBpZiBiaW5hcnkgYW5kIGVuY29kaW5nIGlzIG5vdCBOb25lOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImJpbmFyeSBtb2RlIGRvZXNuJ3QgdGFrZSBhbiBlbmNvZGluZyBhcmd1bWVudCIpCiAgICBpZiBiaW5hcnkgYW5kIGVycm9ycyBpcyBub3QgTm9uZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJiaW5hcnkgbW9kZSBkb2Vzbid0IHRha2UgYW4gZXJyb3JzIGFyZ3VtZW50IikKICAgIGlmIGJpbmFyeSBhbmQgbmV3bGluZSBpcyBub3QgTm9uZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJiaW5hcnkgbW9kZSBkb2Vzbid0IHRha2UgYSBuZXdsaW5lIGFyZ3VtZW50IikKICAgIHJhdyA9IEZpbGVJTyhmaWxlLAogICAgICAgICAgICAgICAgIChyZWFkaW5nIGFuZCAiciIgb3IgIiIpICsKICAgICAgICAgICAgICAgICAod3JpdGluZyBhbmQgInciIG9yICIiKSArCiAgICAgICAgICAgICAgICAgKGFwcGVuZGluZyBhbmQgImEiIG9yICIiKSArCiAgICAgICAgICAgICAgICAgKHVwZGF0aW5nIGFuZCAiKyIgb3IgIiIpLAogICAgICAgICAgICAgICAgIGNsb3NlZmQpCiAgICBsaW5lX2J1ZmZlcmluZyA9IEZhbHNlCiAgICBpZiBidWZmZXJpbmcgPT0gMSBvciBidWZmZXJpbmcgPCAwIGFuZCByYXcuaXNhdHR5KCk6CiAgICAgICAgYnVmZmVyaW5nID0gLTEKICAgICAgICBsaW5lX2J1ZmZlcmluZyA9IFRydWUKICAgIGlmIGJ1ZmZlcmluZyA8IDA6CiAgICAgICAgYnVmZmVyaW5nID0gREVGQVVMVF9CVUZGRVJfU0laRQogICAgICAgIHRyeToKICAgICAgICAgICAgYnMgPSBvcy5mc3RhdChyYXcuZmlsZW5vKCkpLnN0X2Jsa3NpemUKICAgICAgICAjZXhjZXB0IChvcy5lcnJvciwgQXR0cmlidXRlRXJyb3IpOiAgICNmaXhtZQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGJzID4gMToKICAgICAgICAgICAgICAgIGJ1ZmZlcmluZyA9IGJzCiAgICBpZiBidWZmZXJpbmcgPCAwOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImludmFsaWQgYnVmZmVyaW5nIHNpemUiKQogICAgaWYgYnVmZmVyaW5nID09IDA6CiAgICAgICAgaWYgYmluYXJ5OgogICAgICAgICAgICByZXR1cm4gcmF3CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiY2FuJ3QgaGF2ZSB1bmJ1ZmZlcmVkIHRleHQgSS9PIikKICAgIGlmIHVwZGF0aW5nOgogICAgICAgIGJ1ZmZlciA9IEJ1ZmZlcmVkUmFuZG9tKHJhdywgYnVmZmVyaW5nKQogICAgZWxpZiB3cml0aW5nIG9yIGFwcGVuZGluZzoKICAgICAgICBidWZmZXIgPSBCdWZmZXJlZFdyaXRlcihyYXcsIGJ1ZmZlcmluZykKICAgIGVsaWYgcmVhZGluZzoKICAgICAgICBidWZmZXIgPSBCdWZmZXJlZFJlYWRlcihyYXcsIGJ1ZmZlcmluZykKICAgIGVsc2U6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidW5rbm93biBtb2RlOiAlciIgJSBtb2RlKQogICAgaWYgYmluYXJ5OgogICAgICAgIHJldHVybiBidWZmZXIKICAgIHRleHQgPSBUZXh0SU9XcmFwcGVyKGJ1ZmZlciwgZW5jb2RpbmcsIGVycm9ycywgbmV3bGluZSwgbGluZV9idWZmZXJpbmcpCiAgICB0ZXh0Lm1vZGUgPSBtb2RlCiAgICByZXR1cm4gdGV4dAoKCmNsYXNzIERvY0Rlc2NyaXB0b3I6CiAgICAiSGVscGVyIGZvciBidWlsdGlucy5vcGVuLl9fZG9jX18iCiAgICBkZWYgX19nZXRfXyhzZWxmLCBvYmosIHR5cCk6CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgIm9wZW4oZmlsZSwgbW9kZT0ncicsIGJ1ZmZlcmluZz0tMSwgZW5jb2Rpbmc9Tm9uZSwgIgogICAgICAgICAgICAgICAgICJlcnJvcnM9Tm9uZSwgbmV3bGluZT1Ob25lLCBjbG9zZWZkPVRydWUpXG5cbiIgKwogICAgICAgICAgICBvcGVuLl9fZG9jX18pCgpjbGFzcyBPcGVuV3JhcHBlcjoKICAgIF9fZG9jX18gPSBEb2NEZXNjcmlwdG9yKCkKCiAgICBkZWYgX19uZXdfXyhjbHMsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgcmV0dXJuIG9wZW4oKmFyZ3MsICoqa3dhcmdzKQoKCiMgSW4gbm9ybWFsIG9wZXJhdGlvbiwgYm90aCBgVW5zdXBwb3J0ZWRPcGVyYXRpb25gcyBzaG91bGQgYmUgYm91bmQgdG8gdGhlCiMgc2FtZSBvYmplY3QuCiN0cnk6CiAgICAjQkUgY29tbWVudGVkIHRoaXMgb3V0IHNpbmNlIHdlIGFyZSBub3QgaW1wb3J0aW5nIGlvIG1vZHVsZQogICAgI1Vuc3VwcG9ydGVkT3BlcmF0aW9uID0gaW8uVW5zdXBwb3J0ZWRPcGVyYXRpb24KICAgIHBhc3MKI2V4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKY2xhc3MgVW5zdXBwb3J0ZWRPcGVyYXRpb24oVmFsdWVFcnJvciwgSU9FcnJvcik6CiAgIHBhc3MKCgojY2xhc3MgSU9CYXNlKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6ICAgI2ZpeG1lCmNsYXNzIElPQmFzZToKCiAgICAjIyMgSW50ZXJuYWwgIyMjCgogICAgZGVmIF91bnN1cHBvcnRlZChzZWxmLCBuYW1lKToKICAgICAgICAiSW50ZXJuYWw6IHJhaXNlIGFuIElPRXJyb3IgZXhjZXB0aW9uIGZvciB1bnN1cHBvcnRlZCBvcGVyYXRpb25zLiIKICAgICAgICByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbigiJXMuJXMoKSBub3Qgc3VwcG9ydGVkIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBuYW1lKSkKCiAgICAjIyMgUG9zaXRpb25pbmcgIyMjCgogICAgZGVmIHNlZWsoc2VsZiwgcG9zLCB3aGVuY2U9MCk6CiAgICAgICAgc2VsZi5fdW5zdXBwb3J0ZWQoInNlZWsiKQoKICAgIGRlZiB0ZWxsKHNlbGYpOgogICAgICAgICJSZXR1cm4gYW4gaW50IGluZGljYXRpbmcgdGhlIGN1cnJlbnQgc3RyZWFtIHBvc2l0aW9uLiIKICAgICAgICByZXR1cm4gc2VsZi5zZWVrKDAsIDEpCgogICAgZGVmIHRydW5jYXRlKHNlbGYsIHBvcz1Ob25lKToKICAgICAgICAjIlRydW5jYXRlIGZpbGUgdG8gc2l6ZSBieXRlcy4KICAgICAgICAjCiAgICAgICAgI1NpemUgZGVmYXVsdHMgdG8gdGhlIGN1cnJlbnQgSU8gcG9zaXRpb24gYXMgcmVwb3J0ZWQgYnkgdGVsbCgpLiAgUmV0dXJuCiAgICAgICAgI3RoZSBuZXcgc2l6ZS4KICAgICAgICAjIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJ0cnVuY2F0ZSIpCgogICAgIyMjIEZsdXNoIGFuZCBjbG9zZSAjIyMKCiAgICBkZWYgZmx1c2goc2VsZik6CiAgICAgICAgIyJGbHVzaCB3cml0ZSBidWZmZXJzLCBpZiBhcHBsaWNhYmxlLgogICAgICAgICMKICAgICAgICAjVGhpcyBpcyBub3QgaW1wbGVtZW50ZWQgZm9yIHJlYWQtb25seSBhbmQgbm9uLWJsb2NraW5nIHN0cmVhbXMuCiAgICAgICAgIyIKICAgICAgICBzZWxmLl9jaGVja0Nsb3NlZCgpCiAgICAgICAgIyBYWFggU2hvdWxkIHRoaXMgcmV0dXJuIHRoZSBudW1iZXIgb2YgYnl0ZXMgd3JpdHRlbj8/PwoKICAgIF9fY2xvc2VkID0gRmFsc2UKCiAgICBkZWYgY2xvc2Uoc2VsZik6CiAgICAgICAgIyJGbHVzaCBhbmQgY2xvc2UgdGhlIElPIG9iamVjdC4KCiAgICAgICAgI1RoaXMgbWV0aG9kIGhhcyBubyBlZmZlY3QgaWYgdGhlIGZpbGUgaXMgYWxyZWFkeSBjbG9zZWQuCiAgICAgICAgIyIKICAgICAgICBpZiBub3Qgc2VsZi5fX2Nsb3NlZDoKICAgICAgICAgICAgc2VsZi5mbHVzaCgpCiAgICAgICAgICAgIHNlbGYuX19jbG9zZWQgPSBUcnVlCgogICAgZGVmIF9fZGVsX18oc2VsZik6CiAgICAgICAgIyJEZXN0cnVjdG9yLiAgQ2FsbHMgY2xvc2UoKS4iCiAgICAgICAgIyBUaGUgdHJ5L2V4Y2VwdCBibG9jayBpcyBpbiBjYXNlIHRoaXMgaXMgY2FsbGVkIGF0IHByb2dyYW0KICAgICAgICAjIGV4aXQgdGltZSwgd2hlbiBpdCdzIHBvc3NpYmxlIHRoYXQgZ2xvYmFscyBoYXZlIGFscmVhZHkgYmVlbgogICAgICAgICMgZGVsZXRlZCwgYW5kIHRoZW4gdGhlIGNsb3NlKCkgY2FsbCBtaWdodCBmYWlsLiAgU2luY2UKICAgICAgICAjIHRoZXJlJ3Mgbm90aGluZyB3ZSBjYW4gZG8gYWJvdXQgc3VjaCBmYWlsdXJlcyBhbmQgdGhleSBhbm5veQogICAgICAgICMgdGhlIGVuZCB1c2Vycywgd2Ugc3VwcHJlc3MgdGhlIHRyYWNlYmFjay4KICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuY2xvc2UoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKICAgICMjIyBJbnF1aXJpZXMgIyMjCgogICAgZGVmIHNlZWthYmxlKHNlbGYpOgogICAgICAgICMiUmV0dXJuIGEgYm9vbCBpbmRpY2F0aW5nIHdoZXRoZXIgb2JqZWN0IHN1cHBvcnRzIHJhbmRvbSBhY2Nlc3MuCiAgICAgICAgIwogICAgICAgICNJZiBGYWxzZSwgc2VlaygpLCB0ZWxsKCkgYW5kIHRydW5jYXRlKCkgd2lsbCByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbi4KICAgICAgICAjVGhpcyBtZXRob2QgbWF5IG5lZWQgdG8gZG8gYSB0ZXN0IHNlZWsoKS4KICAgICAgICAjIgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBfY2hlY2tTZWVrYWJsZShzZWxmLCBtc2c9Tm9uZSk6CiAgICAgICAgIyJJbnRlcm5hbDogcmFpc2UgVW5zdXBwb3J0ZWRPcGVyYXRpb24gaWYgZmlsZSBpcyBub3Qgc2Vla2FibGUKICAgICAgICAjIgogICAgICAgIGlmIG5vdCBzZWxmLnNlZWthYmxlKCk6CiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkT3BlcmF0aW9uKCJGaWxlIG9yIHN0cmVhbSBpcyBub3Qgc2Vla2FibGUuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtc2cgaXMgTm9uZSBlbHNlIG1zZykKCiAgICBkZWYgcmVhZGFibGUoc2VsZik6CiAgICAgICAgIyJSZXR1cm4gYSBib29sIGluZGljYXRpbmcgd2hldGhlciBvYmplY3Qgd2FzIG9wZW5lZCBmb3IgcmVhZGluZy4KCiAgICAgICAgI0lmIEZhbHNlLCByZWFkKCkgd2lsbCByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbi4KICAgICAgICAjIgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBfY2hlY2tSZWFkYWJsZShzZWxmLCBtc2c9Tm9uZSk6CiAgICAgICAgIyJJbnRlcm5hbDogcmFpc2UgVW5zdXBwb3J0ZWRPcGVyYXRpb24gaWYgZmlsZSBpcyBub3QgcmVhZGFibGUKICAgICAgICAjIgogICAgICAgIGlmIG5vdCBzZWxmLnJlYWRhYmxlKCk6CiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkT3BlcmF0aW9uKCJGaWxlIG9yIHN0cmVhbSBpcyBub3QgcmVhZGFibGUuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtc2cgaXMgTm9uZSBlbHNlIG1zZykKCiAgICBkZWYgd3JpdGFibGUoc2VsZik6CiAgICAgICAgIyJSZXR1cm4gYSBib29sIGluZGljYXRpbmcgd2hldGhlciBvYmplY3Qgd2FzIG9wZW5lZCBmb3Igd3JpdGluZy4KCiAgICAgICAgI0lmIEZhbHNlLCB3cml0ZSgpIGFuZCB0cnVuY2F0ZSgpIHdpbGwgcmFpc2UgVW5zdXBwb3J0ZWRPcGVyYXRpb24uCiAgICAgICAgIyIKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX2NoZWNrV3JpdGFibGUoc2VsZiwgbXNnPU5vbmUpOgogICAgICAgICMiSW50ZXJuYWw6IHJhaXNlIFVuc3VwcG9ydGVkT3BlcmF0aW9uIGlmIGZpbGUgaXMgbm90IHdyaXRhYmxlCiAgICAgICAgIyIKICAgICAgICBpZiBub3Qgc2VsZi53cml0YWJsZSgpOgogICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbigiRmlsZSBvciBzdHJlYW0gaXMgbm90IHdyaXRhYmxlLiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbXNnIGlzIE5vbmUgZWxzZSBtc2cpCgogICAgIyMgZml4bWUuLiAgd2UgbmVlZCB0byBpbXBsZW1lbnQgcHJvcGVydHkgdmlhIGRlY29yYXRvcnMuCiAgICAjIyBAcHJvcGVydHkKICAgIGRlZiBjbG9zZWQoc2VsZik6CiAgICAgICAgIyJjbG9zZWQ6IGJvb2wuICBUcnVlIGlmZiB0aGUgZmlsZSBoYXMgYmVlbiBjbG9zZWQuCgogICAgICAgICNGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIHRoaXMgaXMgYSBwcm9wZXJ0eSwgbm90IGEgcHJlZGljYXRlLgogICAgICAgICMiCiAgICAgICAgcmV0dXJuIHNlbGYuX19jbG9zZWQKCiAgICBkZWYgX2NoZWNrQ2xvc2VkKHNlbGYsIG1zZz1Ob25lKToKICAgICAgICAjIkludGVybmFsOiByYWlzZSBhbiBWYWx1ZUVycm9yIGlmIGZpbGUgaXMgY2xvc2VkCiAgICAgICAgIyIKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSS9PIG9wZXJhdGlvbiBvbiBjbG9zZWQgZmlsZS4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbXNnIGlzIE5vbmUgZWxzZSBtc2cpCgogICAgIyMjIENvbnRleHQgbWFuYWdlciAjIyMKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOiAgIyBUaGF0J3MgYSBmb3J3YXJkIHJlZmVyZW5jZQogICAgICAgICMiQ29udGV4dCBtYW5hZ2VtZW50IHByb3RvY29sLiAgUmV0dXJucyBzZWxmIChhbiBpbnN0YW5jZSBvZiBJT0Jhc2UpIgogICAgICAgIHNlbGYuX2NoZWNrQ2xvc2VkKCkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqYXJncyk6CiAgICAgICAgIyJDb250ZXh0IG1hbmFnZW1lbnQgcHJvdG9jb2wuICBDYWxscyBjbG9zZSgpIgogICAgICAgIHNlbGYuY2xvc2UoKQoKICAgICMjIyBMb3dlci1sZXZlbCBBUElzICMjIwoKICAgICMgWFhYIFNob3VsZCB0aGVzZSBiZSBwcmVzZW50IGV2ZW4gaWYgdW5pbXBsZW1lbnRlZD8KCiAgICBkZWYgZmlsZW5vKHNlbGYpOgogICAgICAgICMiUmV0dXJucyB1bmRlcmx5aW5nIGZpbGUgZGVzY3JpcHRvciAoYW4gaW50KSBpZiBvbmUgZXhpc3RzLgoKICAgICAgICAjQW4gSU9FcnJvciBpcyByYWlzZWQgaWYgdGhlIElPIG9iamVjdCBkb2VzIG5vdCB1c2UgYSBmaWxlIGRlc2NyaXB0b3IuCiAgICAgICAgIyIKICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgiZmlsZW5vIikKCiAgICBkZWYgaXNhdHR5KHNlbGYpOgogICAgICAgICMiUmV0dXJuIGEgYm9vbCBpbmRpY2F0aW5nIHdoZXRoZXIgdGhpcyBpcyBhbiAnaW50ZXJhY3RpdmUnIHN0cmVhbS4KCiAgICAgICAgI1JldHVybiBGYWxzZSBpZiBpdCBjYW4ndCBiZSBkZXRlcm1pbmVkLgogICAgICAgICMiCiAgICAgICAgc2VsZi5fY2hlY2tDbG9zZWQoKQogICAgICAgIHJldHVybiBGYWxzZQoKICAgICMjIyBSZWFkbGluZVtzXSBhbmQgd3JpdGVsaW5lcyAjIyMKCiAgICBkZWYgcmVhZGxpbmUoc2VsZiwgbGltaXQ9LTEpOgogICAgICAgICMgRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCBhIChzbG93aXNoKSByZWFkbGluZSgpLgogICAgICAgIGlmIGhhc2F0dHIoc2VsZiwgInBlZWsiKToKICAgICAgICAgICAgZGVmIG5yZWFkYWhlYWQoKToKICAgICAgICAgICAgICAgIHJlYWRhaGVhZCA9IHNlbGYucGVlaygxKQogICAgICAgICAgICAgICAgaWYgbm90IHJlYWRhaGVhZDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMQogICAgICAgICAgICAgICAgI24gPSAocmVhZGFoZWFkLmZpbmQoYiJcbiIpICsgMSkgb3IgbGVuKHJlYWRhaGVhZCkgI2ZpeG1lCiAgICAgICAgICAgICAgICBuID0gKHJlYWRhaGVhZC5maW5kKCJcbiIpICsgMSkgb3IgbGVuKHJlYWRhaGVhZCkKICAgICAgICAgICAgICAgIGlmIGxpbWl0ID49IDA6CiAgICAgICAgICAgICAgICAgICAgbiA9IG1pbihuLCBsaW1pdCkKICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGVmIG5yZWFkYWhlYWQoKToKICAgICAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgaWYgbGltaXQgaXMgTm9uZToKICAgICAgICAgICAgbGltaXQgPSAtMQogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2UobGltaXQsIGludCk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibGltaXQgbXVzdCBiZSBhbiBpbnRlZ2VyIikKICAgICAgICByZXMgPSBieXRlYXJyYXkoKQogICAgICAgIHdoaWxlIGxpbWl0IDwgMCBvciBsZW4ocmVzKSA8IGxpbWl0OgogICAgICAgICAgICBiID0gc2VsZi5yZWFkKG5yZWFkYWhlYWQoKSkKICAgICAgICAgICAgaWYgbm90IGI6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICByZXMgKz0gYgogICAgICAgICAgICAjaWYgcmVzLmVuZHN3aXRoKGIiXG4iKTogICNmaXhtZQogICAgICAgICAgICBpZiByZXMuZW5kc3dpdGgoIlxuIik6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIHJldHVybiBieXRlcyhyZXMpCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHNlbGYuX2NoZWNrQ2xvc2VkKCkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICBsaW5lID0gc2VsZi5yZWFkbGluZSgpCiAgICAgICAgaWYgbm90IGxpbmU6CiAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICByZXR1cm4gbGluZQoKICAgIGRlZiByZWFkbGluZXMoc2VsZiwgaGludD1Ob25lKToKICAgICAgICAjIlJldHVybiBhIGxpc3Qgb2YgbGluZXMgZnJvbSB0aGUgc3RyZWFtLgoKICAgICAgICAjaGludCBjYW4gYmUgc3BlY2lmaWVkIHRvIGNvbnRyb2wgdGhlIG51bWJlciBvZiBsaW5lcyByZWFkOiBubyBtb3JlCiAgICAgICAgI2xpbmVzIHdpbGwgYmUgcmVhZCBpZiB0aGUgdG90YWwgc2l6ZSAoaW4gYnl0ZXMvY2hhcmFjdGVycykgb2YgYWxsCiAgICAgICAgI2xpbmVzIHNvIGZhciBleGNlZWRzIGhpbnQuCiAgICAgICAgIyIKICAgICAgICBpZiBoaW50IGlzIE5vbmUgb3IgaGludCA8PSAwOgogICAgICAgICAgICByZXR1cm4gbGlzdChzZWxmKQogICAgICAgIG4gPSAwCiAgICAgICAgbGluZXMgPSBbXQogICAgICAgIGZvciBsaW5lIGluIHNlbGY6CiAgICAgICAgICAgIGxpbmVzLmFwcGVuZChsaW5lKQogICAgICAgICAgICBuICs9IGxlbihsaW5lKQogICAgICAgICAgICBpZiBuID49IGhpbnQ6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIHJldHVybiBsaW5lcwoKICAgIGRlZiB3cml0ZWxpbmVzKHNlbGYsIGxpbmVzKToKICAgICAgICBzZWxmLl9jaGVja0Nsb3NlZCgpCiAgICAgICAgZm9yIGxpbmUgaW4gbGluZXM6CiAgICAgICAgICAgIHNlbGYud3JpdGUobGluZSkKCiNCRSBjb21tZW50aW5nIHRoaXMgb3V0IGZvciBub3cuCiNpby5JT0Jhc2UucmVnaXN0ZXIoSU9CYXNlKQoKY2xhc3MgUmF3SU9CYXNlKElPQmFzZSk6CiAgICBkZWYgcmVhZChzZWxmLCBuPS0xKToKICAgICAgICAjIlJlYWQgYW5kIHJldHVybiB1cCB0byBuIGJ5dGVzLCB3aGVyZSBuIGlzIGFuIGludC4KCiAgICAgICAgI1JldHVybnMgYW4gZW1wdHkgYnl0ZXMgb2JqZWN0IG9uIEVPRiwgb3IgTm9uZSBpZiB0aGUgb2JqZWN0IGlzCiAgICAgICAgIyNzZXQgbm90IHRvIGJsb2NrIGFuZCBoYXMgbm8gZGF0YSB0byByZWFkLgogICAgICAgICMiCiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICBuID0gLTEKICAgICAgICBpZiBuIDwgMDoKICAgICAgICAgICAgcmV0dXJuIHNlbGYucmVhZGFsbCgpCiAgICAgICAgYiA9IGJ5dGVhcnJheShuLl9faW5kZXhfXygpKQogICAgICAgIG4gPSBzZWxmLnJlYWRpbnRvKGIpCiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGRlbCBiW246XQogICAgICAgIHJldHVybiBieXRlcyhiKQoKICAgIGRlZiByZWFkYWxsKHNlbGYpOgogICAgICAgICMiUmVhZCB1bnRpbCBFT0YsIHVzaW5nIG11bHRpcGxlIHJlYWQoKSBjYWxsLiIKICAgICAgICByZXMgPSBieXRlYXJyYXkoKQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIGRhdGEgPSBzZWxmLnJlYWQoREVGQVVMVF9CVUZGRVJfU0laRSkKICAgICAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICByZXMgKz0gZGF0YQogICAgICAgIGlmIHJlczoKICAgICAgICAgICAgcmV0dXJuIGJ5dGVzKHJlcykKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIGInJyBvciBOb25lCiAgICAgICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIHJlYWRpbnRvKHNlbGYsIGIpOgogICAgICAgICMiUmVhZCB1cCB0byBsZW4oYikgYnl0ZXMgaW50byBieXRlYXJyYXkgIgoKICAgICAgICAjUmV0dXJucyBhbiBpbnQgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVhZCAoMCBmb3IgRU9GKSwgb3IKICAgICAgICAjTm9uZSBpZiB0aGUgb2JqZWN0IGlzIHNldCBub3QgdG8gYmxvY2sgYW5kIGhhcyBubyBkYXRhIHRvIHJlYWQuCiAgICAgICAgIyIKICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgicmVhZGludG8iKQoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICAjIldyaXRlIHRoZSBnaXZlbiBidWZmZXIgdG8gdGhlIElPIHN0cmVhbS4KCiAgICAgICAgI1JldHVybnMgdGhlIG51bWJlciBvZiBieXRlcyB3cml0dGVuLCB3aGljaCBtYXkgYmUgbGVzcyB0aGFuIGxlbihiKS4KICAgICAgICAjIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJ3cml0ZSIpCgojQkUgY29tbWVudGluZyB0aGlzIG91dAojaW8uUmF3SU9CYXNlLnJlZ2lzdGVyKFJhd0lPQmFzZSkKI2Zyb20gX2lvIGltcG9ydCBGaWxlSU8KCmNsYXNzIEZpbGVJTyhSYXdJT0Jhc2UpOgogIHBhc3MKI1Jhd0lPQmFzZS5yZWdpc3RlcihGaWxlSU8pCgpjbGFzcyBCdWZmZXJlZElPQmFzZShJT0Jhc2UpOgoKICAgICMiQmFzZSBjbGFzcyBmb3IgYnVmZmVyZWQgSU8gb2JqZWN0cy4KCiAgICAjVGhlIG1haW4gZGlmZmVyZW5jZSB3aXRoIFJhd0lPQmFzZSBpcyB0aGF0IHRoZSByZWFkKCkgbWV0aG9kCiAgICAjc3VwcG9ydHMgb21pdHRpbmcgdGhlIHNpemUgYXJndW1lbnQsIGFuZCBkb2VzIG5vdCBoYXZlIGEgZGVmYXVsdAogICAgI2ltcGxlbWVudGF0aW9uIHRoYXQgZGVmZXJzIHRvIHJlYWRpbnRvKCkuCgogICAgI0luIGFkZGl0aW9uLCByZWFkKCksIHJlYWRpbnRvKCkgYW5kIHdyaXRlKCkgbWF5IHJhaXNlCiAgICAjQmxvY2tpbmdJT0Vycm9yIGlmIHRoZSB1bmRlcmx5aW5nIHJhdyBzdHJlYW0gaXMgaW4gbm9uLWJsb2NraW5nCiAgICAjbW9kZSBhbmQgbm90IHJlYWR5OyB1bmxpa2UgdGhlaXIgcmF3IGNvdW50ZXJwYXJ0cywgdGhleSB3aWxsIG5ldmVyCiAgICAjcmV0dXJuIE5vbmUuCgogICAgI0EgdHlwaWNhbCBpbXBsZW1lbnRhdGlvbiBzaG91bGQgbm90IGluaGVyaXQgZnJvbSBhIFJhd0lPQmFzZQogICAgI2ltcGxlbWVudGF0aW9uLCBidXQgd3JhcCBvbmUuCiAgICAjIgoKICAgIGRlZiByZWFkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgIyJSZWFkIGFuZCByZXR1cm4gdXAgdG8gbiBieXRlcywgd2hlcmUgbiBpcyBhbiBpbnQuCgogICAgICAgICNJZiB0aGUgYXJndW1lbnQgaXMgb21pdHRlZCwgTm9uZSwgb3IgbmVnYXRpdmUsIHJlYWRzIGFuZAogICAgICAgICNyZXR1cm5zIGFsbCBkYXRhIHVudGlsIEVPRi4KCiAgICAgICAgI0lmIHRoZSBhcmd1bWVudCBpcyBwb3NpdGl2ZSwgYW5kIHRoZSB1bmRlcmx5aW5nIHJhdyBzdHJlYW0gaXMKICAgICAgICAjbm90ICdpbnRlcmFjdGl2ZScsIG11bHRpcGxlIHJhdyByZWFkcyBtYXkgYmUgaXNzdWVkIHRvIHNhdGlzZnkKICAgICAgICAjdGhlIGJ5dGUgY291bnQgKHVubGVzcyBFT0YgaXMgcmVhY2hlZCBmaXJzdCkuICBCdXQgZm9yCiAgICAgICAgI2ludGVyYWN0aXZlIHJhdyBzdHJlYW1zIChYWFggYW5kIGZvciBwaXBlcz8pLCBhdCBtb3N0IG9uZSByYXcKICAgICAgICAjcmVhZCB3aWxsIGJlIGlzc3VlZCwgYW5kIGEgc2hvcnQgcmVzdWx0IGRvZXMgbm90IGltcGx5IHRoYXQKICAgICAgICAjRU9GIGlzIGltbWluZW50LgoKICAgICAgICAjUmV0dXJucyBhbiBlbXB0eSBieXRlcyBhcnJheSBvbiBFT0YuCgogICAgICAgICNSYWlzZXMgQmxvY2tpbmdJT0Vycm9yIGlmIHRoZSB1bmRlcmx5aW5nIHJhdyBzdHJlYW0gaGFzIG5vCiAgICAgICAgI2RhdGEgYXQgdGhlIG1vbWVudC4KICAgICAgICAjIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJyZWFkIikKCiAgICBkZWYgcmVhZDEoc2VsZiwgbj1Ob25lKToKICAgICAgICAjIlJlYWQgdXAgdG8gbiBieXRlcyB3aXRoIGF0IG1vc3Qgb25lIHJlYWQoKSBzeXN0ZW0gY2FsbCwKICAgICAgICAjd2hlcmUgbiBpcyBhbiBpbnQuCiAgICAgICAgIyIKICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgicmVhZDEiKQoKICAgIGRlZiByZWFkaW50byhzZWxmLCBiKToKICAgICAgICAjIlJlYWQgdXAgdG8gbGVuKGIpIGJ5dGVzIGludG8gYnl0ZWFycmF5IGIuCgogICAgICAgICNMaWtlIHJlYWQoKSwgdGhpcyBtYXkgaXNzdWUgbXVsdGlwbGUgcmVhZHMgdG8gdGhlIHVuZGVybHlpbmcgcmF3CiAgICAgICAgI3N0cmVhbSwgdW5sZXNzIHRoZSBsYXR0ZXIgaXMgJ2ludGVyYWN0aXZlJy4KCiAgICAgICAgI1JldHVybnMgYW4gaW50IHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHJlYWQgKDAgZm9yIEVPRikuCgogICAgICAgICNSYWlzZXMgQmxvY2tpbmdJT0Vycm9yIGlmIHRoZSB1bmRlcmx5aW5nIHJhdyBzdHJlYW0gaGFzIG5vCiAgICAgICAgI2RhdGEgYXQgdGhlIG1vbWVudC4KICAgICAgICAjIgogICAgICAgICMgWFhYIFRoaXMgb3VnaHQgdG8gd29yayB3aXRoIGFueXRoaW5nIHRoYXQgc3VwcG9ydHMgdGhlIGJ1ZmZlciBBUEkKICAgICAgICBkYXRhID0gc2VsZi5yZWFkKGxlbihiKSkKICAgICAgICBuID0gbGVuKGRhdGEpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBiWzpuXSA9IGRhdGEKICAgICAgICBleGNlcHQgVHlwZUVycm9yIGFzIGVycjoKICAgICAgICAgICAgaW1wb3J0IGFycmF5CiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGIsIGFycmF5LmFycmF5KToKICAgICAgICAgICAgICAgIHJhaXNlIGVycgogICAgICAgICAgICBiWzpuXSA9IGFycmF5LmFycmF5KCdiJywgZGF0YSkKICAgICAgICByZXR1cm4gbgoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICAjIldyaXRlIHRoZSBnaXZlbiBieXRlcyBidWZmZXIgdG8gdGhlIElPIHN0cmVhbS4KCiAgICAgICAgI1JldHVybiB0aGUgbnVtYmVyIG9mIGJ5dGVzIHdyaXR0ZW4sIHdoaWNoIGlzIG5ldmVyIGxlc3MgdGhhbgogICAgICAgICNsZW4oYikuCgogICAgICAgICNSYWlzZXMgQmxvY2tpbmdJT0Vycm9yIGlmIHRoZSBidWZmZXIgaXMgZnVsbCBhbmQgdGhlCiAgICAgICAgI3VuZGVybHlpbmcgcmF3IHN0cmVhbSBjYW5ub3QgYWNjZXB0IG1vcmUgZGF0YSBhdCB0aGUgbW9tZW50LgogICAgICAgICMiCiAgICAgICAgc2VsZi5fdW5zdXBwb3J0ZWQoIndyaXRlIikKCiAgICBkZWYgZGV0YWNoKHNlbGYpOgogICAgICAgICMiCiAgICAgICAgI1NlcGFyYXRlIHRoZSB1bmRlcmx5aW5nIHJhdyBzdHJlYW0gZnJvbSB0aGUgYnVmZmVyIGFuZCByZXR1cm4gaXQuCgogICAgICAgICNBZnRlciB0aGUgcmF3IHN0cmVhbSBoYXMgYmVlbiBkZXRhY2hlZCwgdGhlIGJ1ZmZlciBpcyBpbiBhbiB1bnVzYWJsZQogICAgICAgICNzdGF0ZS4KICAgICAgICAjIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJkZXRhY2giKQoKI0JFIGNvbW1lbnRpbmcgdGhpcyBvdXQKI2lvLkJ1ZmZlcmVkSU9CYXNlLnJlZ2lzdGVyKEJ1ZmZlcmVkSU9CYXNlKQoKCmNsYXNzIF9CdWZmZXJlZElPTWl4aW4oQnVmZmVyZWRJT0Jhc2UpOgoKICAgICMiQSBtaXhpbiBpbXBsZW1lbnRhdGlvbiBvZiBCdWZmZXJlZElPQmFzZSB3aXRoIGFuIHVuZGVybHlpbmcgcmF3IHN0cmVhbS4KCiAgICAjVGhpcyBwYXNzZXMgbW9zdCByZXF1ZXN0cyBvbiB0byB0aGUgdW5kZXJseWluZyByYXcgc3RyZWFtLiAgSXQKICAgICNkb2VzICpub3QqIHByb3ZpZGUgaW1wbGVtZW50YXRpb25zIG9mIHJlYWQoKSwgcmVhZGludG8oKSBvcgogICAgI3dyaXRlKCkuCiAgICAjIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCByYXcpOgogICAgICAgIHNlbGYuX3JhdyA9IHJhdwoKICAgICMjIyBQb3NpdGlvbmluZyAjIyMKCiAgICBkZWYgc2VlayhzZWxmLCBwb3MsIHdoZW5jZT0wKToKICAgICAgICBuZXdfcG9zaXRpb24gPSBzZWxmLnJhdy5zZWVrKHBvcywgd2hlbmNlKQogICAgICAgIGlmIG5ld19wb3NpdGlvbiA8IDA6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoInNlZWsoKSByZXR1cm5lZCBhbiBpbnZhbGlkIHBvc2l0aW9uIikKICAgICAgICByZXR1cm4gbmV3X3Bvc2l0aW9uCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgcG9zID0gc2VsZi5yYXcudGVsbCgpCiAgICAgICAgaWYgcG9zIDwgMDoKICAgICAgICAgICAgcmFpc2UgSU9FcnJvcigidGVsbCgpIHJldHVybmVkIGFuIGludmFsaWQgcG9zaXRpb24iKQogICAgICAgIHJldHVybiBwb3MKCiAgICBkZWYgdHJ1bmNhdGUoc2VsZiwgcG9zPU5vbmUpOgogICAgICAgICMgRmx1c2ggdGhlIHN0cmVhbS4gIFdlJ3JlIG1peGluZyBidWZmZXJlZCBJL08gd2l0aCBsb3dlci1sZXZlbCBJL08sCiAgICAgICAgIyBhbmQgYSBmbHVzaCBtYXkgYmUgbmVjZXNzYXJ5IHRvIHN5bmNoIGJvdGggdmlld3Mgb2YgdGhlIGN1cnJlbnQKICAgICAgICAjIGZpbGUgc3RhdGUuCiAgICAgICAgc2VsZi5mbHVzaCgpCgogICAgICAgIGlmIHBvcyBpcyBOb25lOgogICAgICAgICAgICBwb3MgPSBzZWxmLnRlbGwoKQogICAgICAgICMgWFhYOiBTaG91bGQgc2VlaygpIGJlIHVzZWQsIGluc3RlYWQgb2YgcGFzc2luZyB0aGUgcG9zaXRpb24KICAgICAgICAjIFhYWCAgZGlyZWN0bHkgdG8gdHJ1bmNhdGU/CiAgICAgICAgcmV0dXJuIHNlbGYucmF3LnRydW5jYXRlKHBvcykKCiAgICAjIyMgRmx1c2ggYW5kIGNsb3NlICMjIwoKICAgIGRlZiBmbHVzaChzZWxmKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZmx1c2ggb2YgY2xvc2VkIGZpbGUiKQogICAgICAgIHNlbGYucmF3LmZsdXNoKCkKCiAgICBkZWYgY2xvc2Uoc2VsZik6CiAgICAgICAgaWYgc2VsZi5yYXcgaXMgbm90IE5vbmUgYW5kIG5vdCBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5mbHVzaCgpICAgI2ZpeCBtZQogICAgICAgICAgICAgICAgIyBtYXkgcmFpc2UgQmxvY2tpbmdJT0Vycm9yIG9yIEJyb2tlblBpcGVFcnJvciBldGMKICAgICAgICAgICAgI2V4Y2VwdDogICAgI2ZpeG1lCQkKICAgICAgICAgICAgIyAgICBhPTEgICAgI2ZpeG1lCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBzZWxmLnJhdy5jbG9zZSgpCgogICAgZGVmIGRldGFjaChzZWxmKToKICAgICAgICBpZiBzZWxmLnJhdyBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJyYXcgc3RyZWFtIGFscmVhZHkgZGV0YWNoZWQiKQogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHJhdyA9IHNlbGYuX3JhdwogICAgICAgIHNlbGYuX3JhdyA9IE5vbmUKICAgICAgICByZXR1cm4gcmF3CgogICAgIyMjIElucXVpcmllcyAjIyMKCiAgICBkZWYgc2Vla2FibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmF3LnNlZWthYmxlKCkKCiAgICBkZWYgcmVhZGFibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmF3LnJlYWRhYmxlKCkKCiAgICBkZWYgd3JpdGFibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmF3LndyaXRhYmxlKCkKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgcmF3KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9yYXcKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgY2xvc2VkKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnJhdy5jbG9zZWQKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgbmFtZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5yYXcubmFtZQoKICAgICNAcHJvcGVydHkKICAgIGRlZiBtb2RlKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnJhdy5tb2RlCgogICAgZGVmIF9fZ2V0c3RhdGVfXyhzZWxmKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhbiBub3Qgc2VyaWFsaXplIGEgJ3swfScgb2JqZWN0IgogICAgICAgICAgICAgICAgICAgICAgICAuZm9ybWF0KHNlbGYuX19jbGFzc19fLl9fbmFtZV9fKSkKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgY2xzbmFtZSA9IHNlbGYuX19jbGFzc19fLl9fbmFtZV9fCiAgICAgICAgdHJ5OgogICAgICAgICAgICBuYW1lID0gc2VsZi5uYW1lCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICByZXR1cm4gIjxfcHlpby57MH0+Ii5mb3JtYXQoY2xzbmFtZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIjxfcHlpby57MH0gbmFtZT17MSFyfT4iLmZvcm1hdChjbHNuYW1lLCBuYW1lKQoKICAgICMjIyBMb3dlci1sZXZlbCBBUElzICMjIwoKICAgIGRlZiBmaWxlbm8oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmF3LmZpbGVubygpCgogICAgZGVmIGlzYXR0eShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5yYXcuaXNhdHR5KCkKCmNsYXNzIEJ5dGVzSU8oQnVmZmVyZWRJT0Jhc2UpOgoKICAgICMiQnVmZmVyZWQgSS9PIGltcGxlbWVudGF0aW9uIHVzaW5nIGFuIGluLW1lbW9yeSBieXRlcyBidWZmZXIuIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbml0aWFsX2J5dGVzPU5vbmUpOgogICAgICAgIGJ1ZiA9IGJ5dGVhcnJheSgpCiAgICAgICAgaWYgaW5pdGlhbF9ieXRlcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgYnVmICs9IGluaXRpYWxfYnl0ZXMKICAgICAgICBzZWxmLl9idWZmZXIgPSBidWYKICAgICAgICBzZWxmLl9wb3MgPSAwCgogICAgZGVmIF9fZ2V0c3RhdGVfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiX19nZXRzdGF0ZV9fIG9uIGNsb3NlZCBmaWxlIikKICAgICAgICByZXR1cm4gc2VsZi5fX2RpY3RfXy5jb3B5KCkKCiAgICBkZWYgZ2V0dmFsdWUoc2VsZik6CiAgICAgICAgIyJSZXR1cm4gdGhlIGJ5dGVzIHZhbHVlIChjb250ZW50cykgb2YgdGhlIGJ1ZmZlcgogICAgICAgICMiCiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImdldHZhbHVlIG9uIGNsb3NlZCBmaWxlIikKICAgICAgICByZXR1cm4gYnl0ZXMoc2VsZi5fYnVmZmVyKQoKICAgIGRlZiBnZXRidWZmZXIoc2VsZik6CiAgICAgICAgIyJSZXR1cm4gYSByZWFkYWJsZSBhbmQgd3JpdGFibGUgdmlldyBvZiB0aGUgYnVmZmVyLgogICAgICAgICMiCiAgICAgICAgcmV0dXJuIG1lbW9yeXZpZXcoc2VsZi5fYnVmZmVyKQoKICAgIGRlZiByZWFkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInJlYWQgZnJvbSBjbG9zZWQgZmlsZSIpCiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICBuID0gLTEKICAgICAgICBpZiBuIDwgMDoKICAgICAgICAgICAgbiA9IGxlbihzZWxmLl9idWZmZXIpCiAgICAgICAgaWYgbGVuKHNlbGYuX2J1ZmZlcikgPD0gc2VsZi5fcG9zOgogICAgICAgICAgICByZXR1cm4gIiIKICAgICAgICBuZXdwb3MgPSBtaW4obGVuKHNlbGYuX2J1ZmZlciksIHNlbGYuX3BvcyArIG4pCiAgICAgICAgYiA9IHNlbGYuX2J1ZmZlcltzZWxmLl9wb3MgOiBuZXdwb3NdCiAgICAgICAgc2VsZi5fcG9zID0gbmV3cG9zCiAgICAgICAgcmV0dXJuIGJ5dGVzKGIpCgogICAgZGVmIHJlYWQxKHNlbGYsIG4pOgogICAgICAgICMiVGhpcyBpcyB0aGUgc2FtZSBhcyByZWFkLgogICAgICAgICMiCiAgICAgICAgcmV0dXJuIHNlbGYucmVhZChuKQoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JpdGUgdG8gY2xvc2VkIGZpbGUiKQogICAgICAgIGlmIGlzaW5zdGFuY2UoYiwgc3RyKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYW4ndCB3cml0ZSBzdHIgdG8gYmluYXJ5IHN0cmVhbSIpCiAgICAgICAgbiA9IGxlbihiKQogICAgICAgIGlmIG4gPT0gMDoKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICBwb3MgPSBzZWxmLl9wb3MKICAgICAgICBpZiBwb3MgPiBsZW4oc2VsZi5fYnVmZmVyKToKICAgICAgICAgICAgIyBJbnNlcnRzIG51bGwgYnl0ZXMgYmV0d2VlbiB0aGUgY3VycmVudCBlbmQgb2YgdGhlIGZpbGUKICAgICAgICAgICAgIyBhbmQgdGhlIG5ldyB3cml0ZSBwb3NpdGlvbi4KICAgICAgICAgICAgI3BhZGRpbmcgPSBiJ1x4MDAnICogKHBvcyAtIGxlbihzZWxmLl9idWZmZXIpKSAgICNmaXhtZQogICAgICAgICAgICBwYWRkaW5nID0gJ1x4MDAnICogKHBvcyAtIGxlbihzZWxmLl9idWZmZXIpKQogICAgICAgICAgICBzZWxmLl9idWZmZXIgKz0gcGFkZGluZwogICAgICAgIHNlbGYuX2J1ZmZlcltwb3M6cG9zICsgbl0gPSBiCiAgICAgICAgc2VsZi5fcG9zICs9IG4KICAgICAgICByZXR1cm4gbgoKICAgIGRlZiBzZWVrKHNlbGYsIHBvcywgd2hlbmNlPTApOgogICAgICAgIGlmIHNlbGYuY2xvc2VkOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJzZWVrIG9uIGNsb3NlZCBmaWxlIikKICAgICAgICB0cnk6CiAgICAgICAgICAgIHBvcy5fX2luZGV4X18KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZXJyOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImFuIGludGVnZXIgaXMgcmVxdWlyZWQiKSAjZnJvbSBlcnIgZml4bWUKICAgICAgICBpZiB3aGVuY2UgPT0gMDoKICAgICAgICAgICAgaWYgcG9zIDwgMDoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5lZ2F0aXZlIHNlZWsgcG9zaXRpb24gJXIiICUgKHBvcywpKQogICAgICAgICAgICBzZWxmLl9wb3MgPSBwb3MKICAgICAgICBlbGlmIHdoZW5jZSA9PSAxOgogICAgICAgICAgICBzZWxmLl9wb3MgPSBtYXgoMCwgc2VsZi5fcG9zICsgcG9zKQogICAgICAgIGVsaWYgd2hlbmNlID09IDI6CiAgICAgICAgICAgIHNlbGYuX3BvcyA9IG1heCgwLCBsZW4oc2VsZi5fYnVmZmVyKSArIHBvcykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHdoZW5jZSB2YWx1ZSIpCiAgICAgICAgcmV0dXJuIHNlbGYuX3BvcwoKICAgIGRlZiB0ZWxsKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY2xvc2VkOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ0ZWxsIG9uIGNsb3NlZCBmaWxlIikKICAgICAgICByZXR1cm4gc2VsZi5fcG9zCgogICAgZGVmIHRydW5jYXRlKHNlbGYsIHBvcz1Ob25lKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidHJ1bmNhdGUgb24gY2xvc2VkIGZpbGUiKQogICAgICAgIGlmIHBvcyBpcyBOb25lOgogICAgICAgICAgICBwb3MgPSBzZWxmLl9wb3MKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBwb3MuX19pbmRleF9fCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlcnI6CiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImFuIGludGVnZXIgaXMgcmVxdWlyZWQiKSAjZnJvbSBlcnIgI2ZpeG1lCiAgICAgICAgICAgIGlmIHBvcyA8IDA6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJuZWdhdGl2ZSB0cnVuY2F0ZSBwb3NpdGlvbiAlciIgJSAocG9zLCkpCiAgICAgICAgZGVsIHNlbGYuX2J1ZmZlcltwb3M6XQogICAgICAgIHJldHVybiBwb3MKCiAgICBkZWYgcmVhZGFibGUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkkvTyBvcGVyYXRpb24gb24gY2xvc2VkIGZpbGUuIikKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiB3cml0YWJsZShzZWxmKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSS9PIG9wZXJhdGlvbiBvbiBjbG9zZWQgZmlsZS4iKQogICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIHNlZWthYmxlKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY2xvc2VkOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJL08gb3BlcmF0aW9uIG9uIGNsb3NlZCBmaWxlLiIpCiAgICAgICAgcmV0dXJuIFRydWUKCgpjbGFzcyBCdWZmZXJlZFJlYWRlcihfQnVmZmVyZWRJT01peGluKToKCiAgICAjIkJ1ZmZlcmVkUmVhZGVyKHJhd1ssIGJ1ZmZlcl9zaXplXSkKCiAgICAjQSBidWZmZXIgZm9yIGEgcmVhZGFibGUsIHNlcXVlbnRpYWwgQmFzZVJhd0lPIG9iamVjdC4KCiAgICAjVGhlIGNvbnN0cnVjdG9yIGNyZWF0ZXMgYSBCdWZmZXJlZFJlYWRlciBmb3IgdGhlIGdpdmVuIHJlYWRhYmxlIHJhdwogICAgI3N0cmVhbSBhbmQgYnVmZmVyX3NpemUuIElmIGJ1ZmZlcl9zaXplIGlzIG9taXR0ZWQsIERFRkFVTFRfQlVGRkVSX1NJWkUKICAgICNpcyB1c2VkLgogICAgIyIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcmF3LCBidWZmZXJfc2l6ZT1ERUZBVUxUX0JVRkZFUl9TSVpFKToKICAgICAgICAjIkNyZWF0ZSBhIG5ldyBidWZmZXJlZCByZWFkZXIgdXNpbmcgdGhlIGdpdmVuIHJlYWRhYmxlIHJhdyBJTyBvYmplY3QuCiAgICAgICAgIyIKICAgICAgICBpZiBub3QgcmF3LnJlYWRhYmxlKCk6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoJyJyYXciIGFyZ3VtZW50IG11c3QgYmUgcmVhZGFibGUuJykKCiAgICAgICAgX0J1ZmZlcmVkSU9NaXhpbi5fX2luaXRfXyhzZWxmLCByYXcpCiAgICAgICAgaWYgYnVmZmVyX3NpemUgPD0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCBidWZmZXIgc2l6ZSIpCiAgICAgICAgc2VsZi5idWZmZXJfc2l6ZSA9IGJ1ZmZlcl9zaXplCiAgICAgICAgc2VsZi5fcmVzZXRfcmVhZF9idWYoKQogICAgICAgIHNlbGYuX3JlYWRfbG9jayA9IExvY2soKQoKICAgIGRlZiBfcmVzZXRfcmVhZF9idWYoc2VsZik6CiAgICAgICAgI3NlbGYuX3JlYWRfYnVmID0gYiIiICAgI2ZpeG1lCiAgICAgICAgc2VsZi5fcmVhZF9idWYgPSAiIgogICAgICAgIHNlbGYuX3JlYWRfcG9zID0gMAoKICAgIGRlZiByZWFkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgIyJSZWFkIG4gYnl0ZXMuCgogICAgICAgICNSZXR1cm5zIGV4YWN0bHkgbiBieXRlcyBvZiBkYXRhIHVubGVzcyB0aGUgdW5kZXJseWluZyByYXcgSU8KICAgICAgICAjc3RyZWFtIHJlYWNoZXMgRU9GIG9yIGlmIHRoZSBjYWxsIHdvdWxkIGJsb2NrIGluIG5vbi1ibG9ja2luZwogICAgICAgICNtb2RlLiBJZiBuIGlzIG5lZ2F0aXZlLCByZWFkIHVudGlsIEVPRiBvciB1bnRpbCByZWFkKCkgd291bGQKICAgICAgICAjYmxvY2suCiAgICAgICAgIyIKICAgICAgICBpZiBuIGlzIG5vdCBOb25lIGFuZCBuIDwgLTE6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIHRvIHJlYWQiKQogICAgICAgICN3aXRoIHNlbGYuX3JlYWRfbG9jazogICAgIyBmaXhtZQogICAgICAgIHJldHVybiBzZWxmLl9yZWFkX3VubG9ja2VkKG4pCgogICAgZGVmIF9yZWFkX3VubG9ja2VkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgI25vZGF0YV92YWwgPSBiIiIgICAjZml4bWUKICAgICAgICBub2RhdGFfdmFsID0gIiIKICAgICAgICAjZW1wdHlfdmFsdWVzID0gKGIiIiwgTm9uZSkgICNmaXhtZQogICAgICAgIGVtcHR5X3ZhbHVlcyA9ICgiIiwgTm9uZSkKICAgICAgICBidWYgPSBzZWxmLl9yZWFkX2J1ZgogICAgICAgIHBvcyA9IHNlbGYuX3JlYWRfcG9zCgogICAgICAgICMgU3BlY2lhbCBjYXNlIGZvciB3aGVuIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gcmVhZCBpcyB1bnNwZWNpZmllZC4KICAgICAgICBpZiBuIGlzIE5vbmUgb3IgbiA9PSAtMToKICAgICAgICAgICAgc2VsZi5fcmVzZXRfcmVhZF9idWYoKQogICAgICAgICAgICBjaHVua3MgPSBbYnVmW3BvczpdXSAgIyBTdHJpcCB0aGUgY29uc3VtZWQgYnl0ZXMuCiAgICAgICAgICAgIGN1cnJlbnRfc2l6ZSA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgICMgUmVhZCB1bnRpbCBFT0Ygb3IgdW50aWwgcmVhZCgpIHdvdWxkIGJsb2NrLgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGNodW5rID0gc2VsZi5yYXcucmVhZCgpCiAgICAgICAgICAgICAgICBleGNlcHQgSU9FcnJvciBhcyBlOgogICAgICAgICAgICAgICAgICAgIGlmIGUuZXJybm8gIT0gRUlOVFI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGlmIGNodW5rIGluIGVtcHR5X3ZhbHVlczoKICAgICAgICAgICAgICAgICAgICBub2RhdGFfdmFsID0gY2h1bmsKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY3VycmVudF9zaXplICs9IGxlbihjaHVuaykKICAgICAgICAgICAgICAgIGNodW5rcy5hcHBlbmQoY2h1bmspCiAgICAgICAgICAgIHJldHVybiAiIi5qb2luKGNodW5rcykgb3Igbm9kYXRhX3ZhbAoKICAgICAgICAjIFRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gcmVhZCBpcyBzcGVjaWZpZWQsIHJldHVybiBhdCBtb3N0IG4gYnl0ZXMuCiAgICAgICAgYXZhaWwgPSBsZW4oYnVmKSAtIHBvcyAgIyBMZW5ndGggb2YgdGhlIGF2YWlsYWJsZSBidWZmZXJlZCBkYXRhLgogICAgICAgIGlmIG4gPD0gYXZhaWw6CiAgICAgICAgICAgICMgRmFzdCBwYXRoOiB0aGUgZGF0YSB0byByZWFkIGlzIGZ1bGx5IGJ1ZmZlcmVkLgogICAgICAgICAgICBzZWxmLl9yZWFkX3BvcyArPSBuCiAgICAgICAgICAgIHJldHVybiBidWZbcG9zOnBvcytuXQogICAgICAgICMgU2xvdyBwYXRoOiByZWFkIGZyb20gdGhlIHN0cmVhbSB1bnRpbCBlbm91Z2ggYnl0ZXMgYXJlIHJlYWQsCiAgICAgICAgIyBvciB1bnRpbCBhbiBFT0Ygb2NjdXJzIG9yIHVudGlsIHJlYWQoKSB3b3VsZCBibG9jay4KICAgICAgICBjaHVua3MgPSBbYnVmW3BvczpdXQogICAgICAgIHdhbnRlZCA9IG1heChzZWxmLmJ1ZmZlcl9zaXplLCBuKQogICAgICAgIHdoaWxlIGF2YWlsIDwgbjoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgY2h1bmsgPSBzZWxmLnJhdy5yZWFkKHdhbnRlZCkKICAgICAgICAgICAgZXhjZXB0IElPRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgIGlmIGUuZXJybm8gIT0gRUlOVFI6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGNodW5rIGluIGVtcHR5X3ZhbHVlczoKICAgICAgICAgICAgICAgIG5vZGF0YV92YWwgPSBjaHVuawogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgYXZhaWwgKz0gbGVuKGNodW5rKQogICAgICAgICAgICBjaHVua3MuYXBwZW5kKGNodW5rKQogICAgICAgICMgbiBpcyBtb3JlIHRoZW4gYXZhaWwgb25seSB3aGVuIGFuIEVPRiBvY2N1cnJlZCBvciB3aGVuCiAgICAgICAgIyByZWFkKCkgd291bGQgaGF2ZSBibG9ja2VkLgogICAgICAgIG4gPSBtaW4obiwgYXZhaWwpCiAgICAgICAgI291dCA9IGIiIi5qb2luKGNodW5rcykgICAjZml4bWUKICAgICAgICBvdXQgPSAiIi5qb2luKGNodW5rcykKICAgICAgICBzZWxmLl9yZWFkX2J1ZiA9IG91dFtuOl0gICMgU2F2ZSB0aGUgZXh0cmEgZGF0YSBpbiB0aGUgYnVmZmVyLgogICAgICAgIHNlbGYuX3JlYWRfcG9zID0gMAogICAgICAgIHJldHVybiBvdXRbOm5dIGlmIG91dCBlbHNlIG5vZGF0YV92YWwKCiAgICBkZWYgcGVlayhzZWxmLCBuPTApOgogICAgICAgICMiUmV0dXJucyBidWZmZXJlZCBieXRlcyB3aXRob3V0IGFkdmFuY2luZyB0aGUgcG9zaXRpb24uCgogICAgICAgICNUaGUgYXJndW1lbnQgaW5kaWNhdGVzIGEgZGVzaXJlZCBtaW5pbWFsIG51bWJlciBvZiBieXRlczsgd2UKICAgICAgICAjZG8gYXQgbW9zdCBvbmUgcmF3IHJlYWQgdG8gc2F0aXNmeSBpdC4gIFdlIG5ldmVyIHJldHVybiBtb3JlCiAgICAgICAgI3RoYW4gc2VsZi5idWZmZXJfc2l6ZS4KICAgICAgICAjIgogICAgICAgICN3aXRoIHNlbGYuX3JlYWRfbG9jazogICAgICNmaXhtZQogICAgICAgIHJldHVybiBzZWxmLl9wZWVrX3VubG9ja2VkKG4pCgogICAgZGVmIF9wZWVrX3VubG9ja2VkKHNlbGYsIG49MCk6CiAgICAgICAgd2FudCA9IG1pbihuLCBzZWxmLmJ1ZmZlcl9zaXplKQogICAgICAgIGhhdmUgPSBsZW4oc2VsZi5fcmVhZF9idWYpIC0gc2VsZi5fcmVhZF9wb3MKICAgICAgICBpZiBoYXZlIDwgd2FudCBvciBoYXZlIDw9IDA6CiAgICAgICAgICAgIHRvX3JlYWQgPSBzZWxmLmJ1ZmZlcl9zaXplIC0gaGF2ZQogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBzZWxmLnJhdy5yZWFkKHRvX3JlYWQpCiAgICAgICAgICAgICAgICBleGNlcHQgSU9FcnJvciBhcyBlOgogICAgICAgICAgICAgICAgICAgIGlmIGUuZXJybm8gIT0gRUlOVFI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGlmIGN1cnJlbnQ6CiAgICAgICAgICAgICAgICBzZWxmLl9yZWFkX2J1ZiA9IHNlbGYuX3JlYWRfYnVmW3NlbGYuX3JlYWRfcG9zOl0gKyBjdXJyZW50CiAgICAgICAgICAgICAgICBzZWxmLl9yZWFkX3BvcyA9IDAKICAgICAgICByZXR1cm4gc2VsZi5fcmVhZF9idWZbc2VsZi5fcmVhZF9wb3M6XQoKICAgIGRlZiByZWFkMShzZWxmLCBuKToKICAgICAgICAjIlJlYWRzIHVwIHRvIG4gYnl0ZXMsIHdpdGggYXQgbW9zdCBvbmUgcmVhZCgpIHN5c3RlbSBjYWxsLiIKICAgICAgICAjIFJldHVybnMgdXAgdG8gbiBieXRlcy4gIElmIGF0IGxlYXN0IG9uZSBieXRlIGlzIGJ1ZmZlcmVkLCB3ZQogICAgICAgICMgb25seSByZXR1cm4gYnVmZmVyZWQgYnl0ZXMuICBPdGhlcndpc2UsIHdlIGRvIG9uZSByYXcgcmVhZC4KICAgICAgICBpZiBuIDwgMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibnVtYmVyIG9mIGJ5dGVzIHRvIHJlYWQgbXVzdCBiZSBwb3NpdGl2ZSIpCiAgICAgICAgaWYgbiA9PSAwOgogICAgICAgICAgICAjcmV0dXJuIGIiIgogICAgICAgICAgICByZXR1cm4gIiIKICAgICAgICAjd2l0aCBzZWxmLl9yZWFkX2xvY2s6ICAgI2ZpeG1lCiAgICAgICAgc2VsZi5fcGVla191bmxvY2tlZCgxKQogICAgICAgIHJldHVybiBzZWxmLl9yZWFkX3VubG9ja2VkKAogICAgICAgICAgICAgICAgbWluKG4sIGxlbihzZWxmLl9yZWFkX2J1ZikgLSBzZWxmLl9yZWFkX3BvcykpCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgcmV0dXJuIF9CdWZmZXJlZElPTWl4aW4udGVsbChzZWxmKSAtIGxlbihzZWxmLl9yZWFkX2J1ZikgKyBzZWxmLl9yZWFkX3BvcwoKICAgIGRlZiBzZWVrKHNlbGYsIHBvcywgd2hlbmNlPTApOgogICAgICAgIGlmIG5vdCAoMCA8PSB3aGVuY2UgPD0gMik6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImludmFsaWQgd2hlbmNlIHZhbHVlIikKICAgICAgICAjd2l0aCBzZWxmLl9yZWFkX2xvY2s6ICAgI2ZpeG1lCiAgICAgICAgaWYgMToKICAgICAgICAgICAgaWYgd2hlbmNlID09IDE6CiAgICAgICAgICAgICAgICBwb3MgLT0gbGVuKHNlbGYuX3JlYWRfYnVmKSAtIHNlbGYuX3JlYWRfcG9zCiAgICAgICAgICAgIHBvcyA9IF9CdWZmZXJlZElPTWl4aW4uc2VlayhzZWxmLCBwb3MsIHdoZW5jZSkKICAgICAgICAgICAgc2VsZi5fcmVzZXRfcmVhZF9idWYoKQogICAgICAgICAgICByZXR1cm4gcG9zCgpjbGFzcyBCdWZmZXJlZFdyaXRlcihfQnVmZmVyZWRJT01peGluKToKCiAgICAjIkEgYnVmZmVyIGZvciBhIHdyaXRlYWJsZSBzZXF1ZW50aWFsIFJhd0lPIG9iamVjdC4KCiAgICAjVGhlIGNvbnN0cnVjdG9yIGNyZWF0ZXMgYSBCdWZmZXJlZFdyaXRlciBmb3IgdGhlIGdpdmVuIHdyaXRlYWJsZSByYXcKICAgICNzdHJlYW0uIElmIHRoZSBidWZmZXJfc2l6ZSBpcyBub3QgZ2l2ZW4sIGl0IGRlZmF1bHRzIHRvCiAgICAjREVGQVVMVF9CVUZGRVJfU0laRS4KICAgICMiCgogICAgX3dhcm5pbmdfc3RhY2tfb2Zmc2V0ID0gMgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCByYXcsCiAgICAgICAgICAgICAgICAgYnVmZmVyX3NpemU9REVGQVVMVF9CVUZGRVJfU0laRSwgbWF4X2J1ZmZlcl9zaXplPU5vbmUpOgogICAgICAgIGlmIG5vdCByYXcud3JpdGFibGUoKToKICAgICAgICAgICAgcmFpc2UgSU9FcnJvcignInJhdyIgYXJndW1lbnQgbXVzdCBiZSB3cml0YWJsZS4nKQoKICAgICAgICBfQnVmZmVyZWRJT01peGluLl9faW5pdF9fKHNlbGYsIHJhdykKICAgICAgICBpZiBidWZmZXJfc2l6ZSA8PSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIGJ1ZmZlciBzaXplIikKICAgICAgICBpZiBtYXhfYnVmZmVyX3NpemUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oIm1heF9idWZmZXJfc2l6ZSBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3dhcm5pbmdfc3RhY2tfb2Zmc2V0KQogICAgICAgIHNlbGYuYnVmZmVyX3NpemUgPSBidWZmZXJfc2l6ZQogICAgICAgIHNlbGYuX3dyaXRlX2J1ZiA9IGJ5dGVhcnJheSgpCiAgICAgICAgc2VsZi5fd3JpdGVfbG9jayA9IExvY2soKQoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JpdGUgdG8gY2xvc2VkIGZpbGUiKQogICAgICAgIGlmIGlzaW5zdGFuY2UoYiwgc3RyKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYW4ndCB3cml0ZSBzdHIgdG8gYmluYXJ5IHN0cmVhbSIpCiAgICAgICAgI3dpdGggc2VsZi5fd3JpdGVfbG9jazogICAjZml4bWUKICAgICAgICBpZiAxOgogICAgICAgICAgICAjIFhYWCB3ZSBjYW4gaW1wbGVtZW50IHNvbWUgbW9yZSB0cmlja3MgdG8gdHJ5IGFuZCBhdm9pZAogICAgICAgICAgICAjIHBhcnRpYWwgd3JpdGVzCiAgICAgICAgICAgIGlmIGxlbihzZWxmLl93cml0ZV9idWYpID4gc2VsZi5idWZmZXJfc2l6ZToKICAgICAgICAgICAgICAgICMgV2UncmUgZnVsbCwgc28gbGV0J3MgcHJlLWZsdXNoIHRoZSBidWZmZXIuICAoVGhpcyBtYXkKICAgICAgICAgICAgICAgICMgcmFpc2UgQmxvY2tpbmdJT0Vycm9yIHdpdGggY2hhcmFjdGVyc193cml0dGVuID09IDAuKQogICAgICAgICAgICAgICAgc2VsZi5fZmx1c2hfdW5sb2NrZWQoKQogICAgICAgICAgICBiZWZvcmUgPSBsZW4oc2VsZi5fd3JpdGVfYnVmKQogICAgICAgICAgICBzZWxmLl93cml0ZV9idWYuZXh0ZW5kKGIpCiAgICAgICAgICAgIHdyaXR0ZW4gPSBsZW4oc2VsZi5fd3JpdGVfYnVmKSAtIGJlZm9yZQogICAgICAgICAgICBpZiBsZW4oc2VsZi5fd3JpdGVfYnVmKSA+IHNlbGYuYnVmZmVyX3NpemU6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZmx1c2hfdW5sb2NrZWQoKQogICAgICAgICAgICAgICAgZXhjZXB0IEJsb2NraW5nSU9FcnJvciBhcyBlOgogICAgICAgICAgICAgICAgICAgIGlmIGxlbihzZWxmLl93cml0ZV9idWYpID4gc2VsZi5idWZmZXJfc2l6ZToKICAgICAgICAgICAgICAgICAgICAgICAgIyBXZSd2ZSBoaXQgdGhlIGJ1ZmZlcl9zaXplLiBXZSBoYXZlIHRvIGFjY2VwdCBhIHBhcnRpYWwKICAgICAgICAgICAgICAgICAgICAgICAgIyB3cml0ZSBhbmQgY3V0IGJhY2sgb3VyIGJ1ZmZlci4KICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmFnZSA9IGxlbihzZWxmLl93cml0ZV9idWYpIC0gc2VsZi5idWZmZXJfc2l6ZQogICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuIC09IG92ZXJhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fd3JpdGVfYnVmID0gc2VsZi5fd3JpdGVfYnVmWzpzZWxmLmJ1ZmZlcl9zaXplXQogICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBCbG9ja2luZ0lPRXJyb3IoZS5lcnJubywgZS5zdHJlcnJvciwgd3JpdHRlbikKICAgICAgICAgICAgcmV0dXJuIHdyaXR0ZW4KCiAgICBkZWYgdHJ1bmNhdGUoc2VsZiwgcG9zPU5vbmUpOgogICAgICAgICN3aXRoIHNlbGYuX3dyaXRlX2xvY2s6ICAgICNmaXhtZQogICAgICAgIGlmIDE6CiAgICAgICAgICAgIHNlbGYuX2ZsdXNoX3VubG9ja2VkKCkKICAgICAgICAgICAgaWYgcG9zIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBwb3MgPSBzZWxmLnJhdy50ZWxsKCkKICAgICAgICAgICAgcmV0dXJuIHNlbGYucmF3LnRydW5jYXRlKHBvcykKCiAgICBkZWYgZmx1c2goc2VsZik6CiAgICAgICAgI3dpdGggc2VsZi5fd3JpdGVfbG9jazogICNmaXhtZQogICAgICAgIHNlbGYuX2ZsdXNoX3VubG9ja2VkKCkKCiAgICBkZWYgX2ZsdXNoX3VubG9ja2VkKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY2xvc2VkOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJmbHVzaCBvZiBjbG9zZWQgZmlsZSIpCiAgICAgICAgd2hpbGUgc2VsZi5fd3JpdGVfYnVmOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBuID0gc2VsZi5yYXcud3JpdGUoc2VsZi5fd3JpdGVfYnVmKQogICAgICAgICAgICBleGNlcHQgQmxvY2tpbmdJT0Vycm9yOgogICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJzZWxmLnJhdyBzaG91bGQgaW1wbGVtZW50IFJhd0lPQmFzZTogaXQgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG91bGQgbm90IHJhaXNlIEJsb2NraW5nSU9FcnJvciIpCiAgICAgICAgICAgIGV4Y2VwdCBJT0Vycm9yIGFzIGU6CiAgICAgICAgICAgICAgICBpZiBlLmVycm5vICE9IEVJTlRSOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBuIGlzIE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBCbG9ja2luZ0lPRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgZXJybm8uRUFHQUlOLAogICAgICAgICAgICAgICAgICAgICJ3cml0ZSBjb3VsZCBub3QgY29tcGxldGUgd2l0aG91dCBibG9ja2luZyIsIDApCiAgICAgICAgICAgIGlmIG4gPiBsZW4oc2VsZi5fd3JpdGVfYnVmKSBvciBuIDwgMDoKICAgICAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoIndyaXRlKCkgcmV0dXJuZWQgaW5jb3JyZWN0IG51bWJlciBvZiBieXRlcyIpCiAgICAgICAgICAgIGRlbCBzZWxmLl93cml0ZV9idWZbOm5dCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgcmV0dXJuIF9CdWZmZXJlZElPTWl4aW4udGVsbChzZWxmKSArIGxlbihzZWxmLl93cml0ZV9idWYpCgogICAgZGVmIHNlZWsoc2VsZiwgcG9zLCB3aGVuY2U9MCk6CiAgICAgICAgaWYgbm90ICgwIDw9IHdoZW5jZSA8PSAyKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCB3aGVuY2UiKQogICAgICAgICN3aXRoIHNlbGYuX3dyaXRlX2xvY2s6ICAgI2ZpeG1lCiAgICAgICAgaWYgMToKICAgICAgICAgICAgc2VsZi5fZmx1c2hfdW5sb2NrZWQoKQogICAgICAgICAgICByZXR1cm4gX0J1ZmZlcmVkSU9NaXhpbi5zZWVrKHNlbGYsIHBvcywgd2hlbmNlKQoKCmNsYXNzIEJ1ZmZlcmVkUldQYWlyKEJ1ZmZlcmVkSU9CYXNlKToKCiAgICAjIkEgYnVmZmVyZWQgcmVhZGVyIGFuZCB3cml0ZXIgb2JqZWN0IHRvZ2V0aGVyLgoKICAgICNBIGJ1ZmZlcmVkIHJlYWRlciBvYmplY3QgYW5kIGJ1ZmZlcmVkIHdyaXRlciBvYmplY3QgcHV0IHRvZ2V0aGVyIHRvCiAgICAjZm9ybSBhIHNlcXVlbnRpYWwgSU8gb2JqZWN0IHRoYXQgY2FuIHJlYWQgYW5kIHdyaXRlLiBUaGlzIGlzIHR5cGljYWxseQogICAgI3VzZWQgd2l0aCBhIHNvY2tldCBvciB0d28td2F5IHBpcGUuCgogICAgI3JlYWRlciBhbmQgd3JpdGVyIGFyZSBSYXdJT0Jhc2Ugb2JqZWN0cyB0aGF0IGFyZSByZWFkYWJsZSBhbmQKICAgICN3cml0ZWFibGUgcmVzcGVjdGl2ZWx5LiBJZiB0aGUgYnVmZmVyX3NpemUgaXMgb21pdHRlZCBpdCBkZWZhdWx0cyB0bwogICAgI0RFRkFVTFRfQlVGRkVSX1NJWkUuCiAgICAjIgoKICAgICMgWFhYIFRoZSB1c2VmdWxuZXNzIG9mIHRoaXMgKGNvbXBhcmVkIHRvIGhhdmluZyB0d28gc2VwYXJhdGUgSU8KICAgICMgb2JqZWN0cykgaXMgcXVlc3Rpb25hYmxlLgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCByZWFkZXIsIHdyaXRlciwKICAgICAgICAgICAgICAgICBidWZmZXJfc2l6ZT1ERUZBVUxUX0JVRkZFUl9TSVpFLCBtYXhfYnVmZmVyX3NpemU9Tm9uZSk6CiAgICAgICAgIyJDb25zdHJ1Y3Rvci4KCiAgICAgICAgI1RoZSBhcmd1bWVudHMgYXJlIHR3byBSYXdJTyBpbnN0YW5jZXMuCiAgICAgICAgIyIKICAgICAgICBpZiBtYXhfYnVmZmVyX3NpemUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oIm1heF9idWZmZXJfc2l6ZSBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nLCAyKQoKICAgICAgICBpZiBub3QgcmVhZGVyLnJlYWRhYmxlKCk6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoJyJyZWFkZXIiIGFyZ3VtZW50IG11c3QgYmUgcmVhZGFibGUuJykKCiAgICAgICAgaWYgbm90IHdyaXRlci53cml0YWJsZSgpOgogICAgICAgICAgICByYWlzZSBJT0Vycm9yKCcid3JpdGVyIiBhcmd1bWVudCBtdXN0IGJlIHdyaXRhYmxlLicpCgogICAgICAgIHNlbGYucmVhZGVyID0gQnVmZmVyZWRSZWFkZXIocmVhZGVyLCBidWZmZXJfc2l6ZSkKICAgICAgICBzZWxmLndyaXRlciA9IEJ1ZmZlcmVkV3JpdGVyKHdyaXRlciwgYnVmZmVyX3NpemUpCgogICAgZGVmIHJlYWQoc2VsZiwgbj1Ob25lKToKICAgICAgICBpZiBuIGlzIE5vbmU6CiAgICAgICAgICAgIG4gPSAtMQogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5yZWFkKG4pCgogICAgZGVmIHJlYWRpbnRvKHNlbGYsIGIpOgogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5yZWFkaW50byhiKQoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIud3JpdGUoYikKCiAgICBkZWYgcGVlayhzZWxmLCBuPTApOgogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5wZWVrKG4pCgogICAgZGVmIHJlYWQxKHNlbGYsIG4pOgogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5yZWFkMShuKQoKICAgIGRlZiByZWFkYWJsZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5yZWFkZXIucmVhZGFibGUoKQoKICAgIGRlZiB3cml0YWJsZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIud3JpdGFibGUoKQoKICAgIGRlZiBmbHVzaChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIuZmx1c2goKQoKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICBzZWxmLndyaXRlci5jbG9zZSgpCiAgICAgICAgc2VsZi5yZWFkZXIuY2xvc2UoKQoKICAgIGRlZiBpc2F0dHkoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmVhZGVyLmlzYXR0eSgpIG9yIHNlbGYud3JpdGVyLmlzYXR0eSgpCgogICAgI0Bwcm9wZXJ0eQogICAgZGVmIGNsb3NlZChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIuY2xvc2VkCgoKY2xhc3MgQnVmZmVyZWRSYW5kb20oQnVmZmVyZWRXcml0ZXIsIEJ1ZmZlcmVkUmVhZGVyKToKCiAgICAjIkEgYnVmZmVyZWQgaW50ZXJmYWNlIHRvIHJhbmRvbSBhY2Nlc3Mgc3RyZWFtcy4KCiAgICAjVGhlIGNvbnN0cnVjdG9yIGNyZWF0ZXMgYSByZWFkZXIgYW5kIHdyaXRlciBmb3IgYSBzZWVrYWJsZSBzdHJlYW0sCiAgICAjcmF3LCBnaXZlbiBpbiB0aGUgZmlyc3QgYXJndW1lbnQuIElmIHRoZSBidWZmZXJfc2l6ZSBpcyBvbWl0dGVkIGl0CiAgICAjZGVmYXVsdHMgdG8gREVGQVVMVF9CVUZGRVJfU0laRS4KICAgICMiCgogICAgX3dhcm5pbmdfc3RhY2tfb2Zmc2V0ID0gMwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCByYXcsCiAgICAgICAgICAgICAgICAgYnVmZmVyX3NpemU9REVGQVVMVF9CVUZGRVJfU0laRSwgbWF4X2J1ZmZlcl9zaXplPU5vbmUpOgogICAgICAgIHJhdy5fY2hlY2tTZWVrYWJsZSgpCiAgICAgICAgQnVmZmVyZWRSZWFkZXIuX19pbml0X18oc2VsZiwgcmF3LCBidWZmZXJfc2l6ZSkKICAgICAgICBCdWZmZXJlZFdyaXRlci5fX2luaXRfXyhzZWxmLCByYXcsIGJ1ZmZlcl9zaXplLCBtYXhfYnVmZmVyX3NpemUpCgogICAgZGVmIHNlZWsoc2VsZiwgcG9zLCB3aGVuY2U9MCk6CiAgICAgICAgaWYgbm90ICgwIDw9IHdoZW5jZSA8PSAyKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCB3aGVuY2UiKQogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIGlmIHNlbGYuX3JlYWRfYnVmOgogICAgICAgICAgICAjIFVuZG8gcmVhZCBhaGVhZC4KICAgICAgICAgICAgI3dpdGggc2VsZi5fcmVhZF9sb2NrOiAgICNmaXhtZQogICAgICAgICAgICBzZWxmLnJhdy5zZWVrKHNlbGYuX3JlYWRfcG9zIC0gbGVuKHNlbGYuX3JlYWRfYnVmKSwgMSkKICAgICAgICAjIEZpcnN0IGRvIHRoZSByYXcgc2VlaywgdGhlbiBlbXB0eSB0aGUgcmVhZCBidWZmZXIsIHNvIHRoYXQKICAgICAgICAjIGlmIHRoZSByYXcgc2VlayBmYWlscywgd2UgZG9uJ3QgbG9zZSBidWZmZXJlZCBkYXRhIGZvcmV2ZXIuCiAgICAgICAgcG9zID0gc2VsZi5yYXcuc2Vlayhwb3MsIHdoZW5jZSkKICAgICAgICAjd2l0aCBzZWxmLl9yZWFkX2xvY2s6ICAgI2ZpeG1lCiAgICAgICAgc2VsZi5fcmVzZXRfcmVhZF9idWYoKQogICAgICAgIGlmIHBvcyA8IDA6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoInNlZWsoKSByZXR1cm5lZCBpbnZhbGlkIHBvc2l0aW9uIikKICAgICAgICByZXR1cm4gcG9zCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fd3JpdGVfYnVmOgogICAgICAgICAgICByZXR1cm4gQnVmZmVyZWRXcml0ZXIudGVsbChzZWxmKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBCdWZmZXJlZFJlYWRlci50ZWxsKHNlbGYpCgogICAgZGVmIHRydW5jYXRlKHNlbGYsIHBvcz1Ob25lKToKICAgICAgICBpZiBwb3MgaXMgTm9uZToKICAgICAgICAgICAgcG9zID0gc2VsZi50ZWxsKCkKICAgICAgICAjIFVzZSBzZWVrIHRvIGZsdXNoIHRoZSByZWFkIGJ1ZmZlci4KICAgICAgICByZXR1cm4gQnVmZmVyZWRXcml0ZXIudHJ1bmNhdGUoc2VsZiwgcG9zKQoKICAgIGRlZiByZWFkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICBuID0gLTEKICAgICAgICBzZWxmLmZsdXNoKCkKICAgICAgICByZXR1cm4gQnVmZmVyZWRSZWFkZXIucmVhZChzZWxmLCBuKQoKICAgIGRlZiByZWFkaW50byhzZWxmLCBiKToKICAgICAgICBzZWxmLmZsdXNoKCkKICAgICAgICByZXR1cm4gQnVmZmVyZWRSZWFkZXIucmVhZGludG8oc2VsZiwgYikKCiAgICBkZWYgcGVlayhzZWxmLCBuPTApOgogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHJldHVybiBCdWZmZXJlZFJlYWRlci5wZWVrKHNlbGYsIG4pCgogICAgZGVmIHJlYWQxKHNlbGYsIG4pOgogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHJldHVybiBCdWZmZXJlZFJlYWRlci5yZWFkMShzZWxmLCBuKQoKICAgIGRlZiB3cml0ZShzZWxmLCBiKToKICAgICAgICBpZiBzZWxmLl9yZWFkX2J1ZjoKICAgICAgICAgICAgIyBVbmRvIHJlYWRhaGVhZAogICAgICAgICAgICAjd2l0aCBzZWxmLl9yZWFkX2xvY2s6ICAjZml4bWUKICAgICAgICAgICAgc2VsZi5yYXcuc2VlayhzZWxmLl9yZWFkX3BvcyAtIGxlbihzZWxmLl9yZWFkX2J1ZiksIDEpCiAgICAgICAgICAgIHNlbGYuX3Jlc2V0X3JlYWRfYnVmKCkKICAgICAgICByZXR1cm4gQnVmZmVyZWRXcml0ZXIud3JpdGUoc2VsZiwgYikKCgpjbGFzcyBUZXh0SU9CYXNlKElPQmFzZSk6CgogICAgIyJCYXNlIGNsYXNzIGZvciB0ZXh0IEkvTy4KCiAgICAjVGhpcyBjbGFzcyBwcm92aWRlcyBhIGNoYXJhY3RlciBhbmQgbGluZSBiYXNlZCBpbnRlcmZhY2UgdG8gc3RyZWFtCiAgICAjSS9PLiBUaGVyZSBpcyBubyByZWFkaW50byBtZXRob2QgYmVjYXVzZSBQeXRob24ncyBjaGFyYWN0ZXIgc3RyaW5ncwogICAgI2FyZSBpbW11dGFibGUuIFRoZXJlIGlzIG5vIHB1YmxpYyBjb25zdHJ1Y3Rvci4KICAgICMiCgogICAgZGVmIHJlYWQoc2VsZiwgbj0tMSk6CiAgICAgICAgIyJSZWFkIGF0IG1vc3QgbiBjaGFyYWN0ZXJzIGZyb20gc3RyZWFtLCB3aGVyZSBuIGlzIGFuIGludC4KCiAgICAgICAgI1JlYWQgZnJvbSB1bmRlcmx5aW5nIGJ1ZmZlciB1bnRpbCB3ZSBoYXZlIG4gY2hhcmFjdGVycyBvciB3ZSBoaXQgRU9GLgogICAgICAgICNJZiBuIGlzIG5lZ2F0aXZlIG9yIG9taXR0ZWQsIHJlYWQgdW50aWwgRU9GLgoKICAgICAgICAjUmV0dXJucyBhIHN0cmluZy4KICAgICAgICAjIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJyZWFkIikKCiAgICBkZWYgd3JpdGUoc2VsZiwgcyk6CiAgICAgICAgIyJXcml0ZSBzdHJpbmcgcyB0byBzdHJlYW0gYW5kIHJldHVybmluZyBhbiBpbnQuIgogICAgICAgIHNlbGYuX3Vuc3VwcG9ydGVkKCJ3cml0ZSIpCgogICAgZGVmIHRydW5jYXRlKHNlbGYsIHBvcz1Ob25lKToKICAgICAgICAjIlRydW5jYXRlIHNpemUgdG8gcG9zLCB3aGVyZSBwb3MgaXMgYW4gaW50LiIKICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgidHJ1bmNhdGUiKQoKICAgIGRlZiByZWFkbGluZShzZWxmKToKICAgICAgICAjIlJlYWQgdW50aWwgbmV3bGluZSBvciBFT0YuCgogICAgICAgICNSZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBpZiBFT0YgaXMgaGl0IGltbWVkaWF0ZWx5LgogICAgICAgICMiCiAgICAgICAgc2VsZi5fdW5zdXBwb3J0ZWQoInJlYWRsaW5lIikKCiAgICBkZWYgZGV0YWNoKHNlbGYpOgogICAgICAgICMiCiAgICAgICAgI1NlcGFyYXRlIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlciBmcm9tIHRoZSBUZXh0SU9CYXNlIGFuZCByZXR1cm4gaXQuCgogICAgICAgICNBZnRlciB0aGUgdW5kZXJseWluZyBidWZmZXIgaGFzIGJlZW4gZGV0YWNoZWQsIHRoZSBUZXh0SU8gaXMgaW4gYW4KICAgICAgICAjdW51c2FibGUgc3RhdGUuCiAgICAgICAgIyIKICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgiZGV0YWNoIikKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgZW5jb2Rpbmcoc2VsZik6CiAgICAgICAgIyJTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZS4iCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgbmV3bGluZXMoc2VsZik6CiAgICAgICAgIyJMaW5lIGVuZGluZ3MgdHJhbnNsYXRlZCBzbyBmYXIuCgogICAgICAgICNPbmx5IGxpbmUgZW5kaW5ncyB0cmFuc2xhdGVkIGR1cmluZyByZWFkaW5nIGFyZSBjb25zaWRlcmVkLgoKICAgICAgICAjU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUuCiAgICAgICAgIyIKICAgICAgICByZXR1cm4gTm9uZQoKICAgICNAcHJvcGVydHkKICAgIGRlZiBlcnJvcnMoc2VsZik6CiAgICAgICAgIyIiRXJyb3Igc2V0dGluZyBvZiB0aGUgZGVjb2RlciBvciBlbmNvZGVyLgoKICAgICAgICAjU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUuIgogICAgICAgIHJldHVybiBOb25lCgojQkUgY29tbWVudGluZyB0aHNpIG91dAojaW8uVGV4dElPQmFzZS5yZWdpc3RlcihUZXh0SU9CYXNlKQoKCmNsYXNzIEluY3JlbWVudGFsTmV3bGluZURlY29kZXIoY29kZWNzLkluY3JlbWVudGFsRGVjb2Rlcik6CgogICAgIyAiQ29kZWMgdXNlZCB3aGVuIHJlYWRpbmcgYSBmaWxlIGluIHVuaXZlcnNhbCBuZXdsaW5lcyBtb2RlLiAgSXQgd3JhcHMKICAgICMgYW5vdGhlciBpbmNyZW1lbnRhbCBkZWNvZGVyLCB0cmFuc2xhdGluZyBcclxuIGFuZCBcciBpbnRvIFxuLiAgSXQgYWxzbwogICAgI3JlY29yZHMgdGhlIHR5cGVzIG9mIG5ld2xpbmVzIGVuY291bnRlcmVkLiAgV2hlbiB1c2VkIHdpdGgKICAgICN0cmFuc2xhdGU9RmFsc2UsIGl0IGVuc3VyZXMgdGhhdCB0aGUgbmV3bGluZSBzZXF1ZW5jZSBpcyByZXR1cm5lZCBpbgogICAgI29uZSBwaWVjZS4KICAgICMgIgogICAgCiAgICBkZWYgX19pbml0X18oc2VsZiwgZGVjb2RlciwgdHJhbnNsYXRlLCBlcnJvcnM9J3N0cmljdCcpOgogICAgICAgIGNvZGVjcy5JbmNyZW1lbnRhbERlY29kZXIuX19pbml0X18oc2VsZiwgZXJyb3JzPWVycm9ycykKICAgICAgICBzZWxmLnRyYW5zbGF0ZSA9IHRyYW5zbGF0ZQogICAgICAgIHNlbGYuZGVjb2RlciA9IGRlY29kZXIKICAgICAgICBzZWxmLnNlZW5ubCA9IDAKICAgICAgICBzZWxmLnBlbmRpbmdjciA9IEZhbHNlCiAgICBkZWYgZGVjb2RlKHNlbGYsIGlucHV0LCBmaW5hbD1GYWxzZSk6CiAgICAgICAgIyBkZWNvZGUgaW5wdXQgKHdpdGggdGhlIGV2ZW50dWFsIFxyIGZyb20gYSBwcmV2aW91cyBwYXNzKQogICAgICAgIGlmIHNlbGYuZGVjb2RlciBpcyBOb25lOgogICAgICAgICAgICBvdXRwdXQgPSBpbnB1dAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG91dHB1dCA9IHNlbGYuZGVjb2Rlci5kZWNvZGUoaW5wdXQsIGZpbmFsPWZpbmFsKQogICAgICAgIGlmIHNlbGYucGVuZGluZ2NyIGFuZCAob3V0cHV0IG9yIGZpbmFsKToKICAgICAgICAgICAgb3V0cHV0ID0gIlxyIiArIG91dHB1dAogICAgICAgICAgICBzZWxmLnBlbmRpbmdjciA9IEZhbHNlCgogICAgICAgICMgcmV0YWluIGxhc3QgXHIgZXZlbiB3aGVuIG5vdCB0cmFuc2xhdGluZyBkYXRhOgogICAgICAgICMgdGhlbiByZWFkbGluZSgpIGlzIHN1cmUgdG8gZ2V0IFxyXG4gaW4gb25lIHBhc3MKICAgICAgICBpZiBvdXRwdXQuZW5kc3dpdGgoIlxyIikgYW5kIG5vdCBmaW5hbDoKICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0WzotMV0KICAgICAgICAgICAgc2VsZi5wZW5kaW5nY3IgPSBUcnVlCgogICAgICAgICMgUmVjb3JkIHdoaWNoIG5ld2xpbmVzIGFyZSByZWFkCiAgICAgICAgY3JsZiA9IG91dHB1dC5jb3VudCgnXHJcbicpCiAgICAgICAgY3IgPSBvdXRwdXQuY291bnQoJ1xyJykgLSBjcmxmCiAgICAgICAgbGYgPSBvdXRwdXQuY291bnQoJ1xuJykgLSBjcmxmCiAgICAgICAgc2VsZi5zZWVubmwgfD0gKGxmIGFuZCBzZWxmLl9MRikgfCAoY3IgYW5kIHNlbGYuX0NSKSBcCiAgICAgICAgICAgICAgICAgICAgfCAoY3JsZiBhbmQgc2VsZi5fQ1JMRikKCiAgICAgICAgaWYgc2VsZi50cmFuc2xhdGU6CiAgICAgICAgICAgIGlmIGNybGY6CiAgICAgICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQucmVwbGFjZSgiXHJcbiIsICJcbiIpCiAgICAgICAgICAgIGlmIGNyOgogICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoIlxyIiwgIlxuIikKCiAgICAgICAgcmV0dXJuIG91dHB1dAoKICAgIGRlZiBnZXRzdGF0ZShzZWxmKToKICAgICAgICBpZiBzZWxmLmRlY29kZXIgaXMgTm9uZToKICAgICAgICAgICAgI2J1ZiA9IGIiIiAgICNmaXhtZQogICAgICAgICAgICBidWYgPSAiIgogICAgICAgICAgICBmbGFnID0gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGJ1ZiwgZmxhZyA9IHNlbGYuZGVjb2Rlci5nZXRzdGF0ZSgpCiAgICAgICAgZmxhZyA8PD0gMQogICAgICAgIGlmIHNlbGYucGVuZGluZ2NyOgogICAgICAgICAgICBmbGFnIHw9IDEKICAgICAgICByZXR1cm4gYnVmLCBmbGFnCgogICAgZGVmIHNldHN0YXRlKHNlbGYsIHN0YXRlKToKICAgICAgICBidWYsIGZsYWcgPSBzdGF0ZQogICAgICAgIHNlbGYucGVuZGluZ2NyID0gYm9vbChmbGFnICYgMSkKICAgICAgICBpZiBzZWxmLmRlY29kZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuZGVjb2Rlci5zZXRzdGF0ZSgoYnVmLCBmbGFnID4+IDEpKQoKICAgIGRlZiByZXNldChzZWxmKToKICAgICAgICBzZWxmLnNlZW5ubCA9IDAKICAgICAgICBzZWxmLnBlbmRpbmdjciA9IEZhbHNlCiAgICAgICAgaWYgc2VsZi5kZWNvZGVyIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmRlY29kZXIucmVzZXQoKQoKICAgIF9MRiA9IDEKICAgIF9DUiA9IDIKICAgIF9DUkxGID0gNAogICAgCiAgICAjQHByb3BlcnR5CiAgICBkZWYgbmV3bGluZXMoc2VsZik6CiAgICAgICAgcmV0dXJuIChOb25lLAogICAgICAgICAgICAgICAgIlxuIiwKICAgICAgICAgICAgICAgICJcciIsCiAgICAgICAgICAgICAgICAoIlxyIiwgIlxuIiksCiAgICAgICAgICAgICAgICAiXHJcbiIsCiAgICAgICAgICAgICAgICAoIlxuIiwgIlxyXG4iKSwKICAgICAgICAgICAgICAgICgiXHIiLCAiXHJcbiIpLAogICAgICAgICAgICAgICAgKCJcciIsICJcbiIsICJcclxuIikKICAgICAgICAgICAgICAgKVtzZWxmLnNlZW5ubF0KCgpjbGFzcyBUZXh0SU9XcmFwcGVyKFRleHRJT0Jhc2UpOgogICAgX0NIVU5LX1NJWkUgPSAyMDQ4CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGJ1ZmZlciwgZW5jb2Rpbmc9Tm9uZSwgZXJyb3JzPU5vbmUsIG5ld2xpbmU9Tm9uZSwKICAgICAgICAgICAgICAgICBsaW5lX2J1ZmZlcmluZz1GYWxzZSwgd3JpdGVfdGhyb3VnaD1GYWxzZSk6CiAgICAgICAgaWYgbmV3bGluZSBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UobmV3bGluZSwgc3RyKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJpbGxlZ2FsIG5ld2xpbmUgdHlwZTogJXIiICUgKHR5cGUobmV3bGluZSksKSkKICAgICAgICBpZiBuZXdsaW5lIG5vdCBpbiAoTm9uZSwgIiIsICJcbiIsICJcciIsICJcclxuIik6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImlsbGVnYWwgbmV3bGluZSB2YWx1ZTogJXIiICUgKG5ld2xpbmUsKSkKICAgICAgICBpZiBlbmNvZGluZyBpcyBOb25lOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBlbmNvZGluZyA9IG9zLmRldmljZV9lbmNvZGluZyhidWZmZXIuZmlsZW5vKCkpCiAgICAgICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIFVuc3VwcG9ydGVkT3BlcmF0aW9uKToKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBpbXBvcnQgbG9jYWxlCiAgICAgICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgIyBJbXBvcnRpbmcgbG9jYWxlIG1heSBmYWlsIGlmIFB5dGhvbiBpcyBiZWluZyBidWlsdAogICAgICAgICAgICAgICAgICAgIGVuY29kaW5nID0gImFzY2lpIgogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBlbmNvZGluZyA9IGxvY2FsZS5nZXRwcmVmZXJyZWRlbmNvZGluZygpCgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGVuY29kaW5nLCBzdHIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIGVuY29kaW5nOiAlciIgJSBlbmNvZGluZykKCiAgICAgICAgaWYgZXJyb3JzIGlzIE5vbmU6CiAgICAgICAgICAgIGVycm9ycyA9ICJzdHJpY3QiCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZXJyb3JzLCBzdHIpOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCBlcnJvcnM6ICVyIiAlIGVycm9ycykKCiAgICAgICAgc2VsZi5fYnVmZmVyID0gYnVmZmVyCiAgICAgICAgc2VsZi5fbGluZV9idWZmZXJpbmcgPSBsaW5lX2J1ZmZlcmluZwogICAgICAgIHNlbGYuX2VuY29kaW5nID0gZW5jb2RpbmcKICAgICAgICBzZWxmLl9lcnJvcnMgPSBlcnJvcnMKICAgICAgICBzZWxmLl9yZWFkdW5pdmVyc2FsID0gbm90IG5ld2xpbmUKICAgICAgICBzZWxmLl9yZWFkdHJhbnNsYXRlID0gbmV3bGluZSBpcyBOb25lCiAgICAgICAgc2VsZi5fcmVhZG5sID0gbmV3bGluZQogICAgICAgIHNlbGYuX3dyaXRldHJhbnNsYXRlID0gbmV3bGluZSAhPSAnJwogICAgICAgIHNlbGYuX3dyaXRlbmwgPSBuZXdsaW5lIG9yIG9zLmxpbmVzZXAKICAgICAgICBzZWxmLl9lbmNvZGVyID0gTm9uZQogICAgICAgIHNlbGYuX2RlY29kZXIgPSBOb25lCiAgICAgICAgc2VsZi5fZGVjb2RlZF9jaGFycyA9ICcnICAjIGJ1ZmZlciBmb3IgdGV4dCByZXR1cm5lZCBmcm9tIGRlY29kZXIKICAgICAgICBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQgPSAwICAjIG9mZnNldCBpbnRvIF9kZWNvZGVkX2NoYXJzIGZvciByZWFkKCkKICAgICAgICBzZWxmLl9zbmFwc2hvdCA9IE5vbmUgICMgaW5mbyBmb3IgcmVjb25zdHJ1Y3RpbmcgZGVjb2RlciBzdGF0ZQogICAgICAgIHNlbGYuX3NlZWthYmxlID0gc2VsZi5fdGVsbGluZyA9IHNlbGYuYnVmZmVyLnNlZWthYmxlKCkKICAgICAgICBzZWxmLl9oYXNfcmVhZDEgPSBoYXNhdHRyKHNlbGYuYnVmZmVyLCAncmVhZDEnKQoKICAgICAgICBpZiBzZWxmLl9zZWVrYWJsZSBhbmQgc2VsZi53cml0YWJsZSgpOgogICAgICAgICAgICBwb3NpdGlvbiA9IHNlbGYuYnVmZmVyLnRlbGwoKQogICAgICAgICAgICBpZiBwb3NpdGlvbiAhPSAwOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2dldF9lbmNvZGVyKCkuc2V0c3RhdGUoMCkKICAgICAgICAgICAgICAgIGV4Y2VwdCBMb29rdXBFcnJvcjoKICAgICAgICAgICAgICAgICAgICAjIFNvbWV0aW1lcyB0aGUgZW5jb2RlciBkb2Vzbid0IGV4aXN0CiAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICMgc2VsZi5fc25hcHNob3QgaXMgZWl0aGVyIE5vbmUsIG9yIGEgdHVwbGUgKGRlY19mbGFncywgbmV4dF9pbnB1dCkKICAgICMgd2hlcmUgZGVjX2ZsYWdzIGlzIHRoZSBzZWNvbmQgKGludGVnZXIpIGl0ZW0gb2YgdGhlIGRlY29kZXIgc3RhdGUKICAgICMgYW5kIG5leHRfaW5wdXQgaXMgdGhlIGNodW5rIG9mIGlucHV0IGJ5dGVzIHRoYXQgY29tZXMgbmV4dCBhZnRlciB0aGUKICAgICMgc25hcHNob3QgcG9pbnQuICBXZSB1c2UgdGhpcyB0byByZWNvbnN0cnVjdCBkZWNvZGVyIHN0YXRlcyBpbiB0ZWxsKCkuCgogICAgIyBOYW1pbmcgY29udmVudGlvbjoKICAgICMgICAtICJieXRlc18uLi4iIGZvciBpbnRlZ2VyIHZhcmlhYmxlcyB0aGF0IGNvdW50IGlucHV0IGJ5dGVzCiAgICAjICAgLSAiY2hhcnNfLi4uIiBmb3IgaW50ZWdlciB2YXJpYWJsZXMgdGhhdCBjb3VudCBkZWNvZGVkIGNoYXJhY3RlcnMKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmVzdWx0ID0gIjxfcHlpby5UZXh0SU9XcmFwcGVyIgogICAgICAgIHRyeToKICAgICAgICAgICAgbmFtZSA9IHNlbGYubmFtZQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3VsdCArPSAiIG5hbWU9ezAhcn0iLmZvcm1hdChuYW1lKQogICAgICAgIHRyeToKICAgICAgICAgICAgbW9kZSA9IHNlbGYubW9kZQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3VsdCArPSAiIG1vZGU9ezAhcn0iLmZvcm1hdChtb2RlKQogICAgICAgIHJldHVybiByZXN1bHQgKyAiIGVuY29kaW5nPXswIXJ9PiIuZm9ybWF0KHNlbGYuZW5jb2RpbmcpCgogICAgI0Bwcm9wZXJ0eQogICAgZGVmIGVuY29kaW5nKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9lbmNvZGluZwoKICAgICNAcHJvcGVydHkKICAgIGRlZiBlcnJvcnMoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX2Vycm9ycwoKICAgICNAcHJvcGVydHkKICAgIGRlZiBsaW5lX2J1ZmZlcmluZyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fbGluZV9idWZmZXJpbmcKCiAgICAjQHByb3BlcnR5CiAgICBkZWYgYnVmZmVyKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9idWZmZXIKCiAgICBkZWYgc2Vla2FibGUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkkvTyBvcGVyYXRpb24gb24gY2xvc2VkIGZpbGUuIikKICAgICAgICByZXR1cm4gc2VsZi5fc2Vla2FibGUKCiAgICBkZWYgcmVhZGFibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuYnVmZmVyLnJlYWRhYmxlKCkKCiAgICBkZWYgd3JpdGFibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuYnVmZmVyLndyaXRhYmxlKCkKCiAgICBkZWYgZmx1c2goc2VsZik6CiAgICAgICAgc2VsZi5idWZmZXIuZmx1c2goKQogICAgICAgIHNlbGYuX3RlbGxpbmcgPSBzZWxmLl9zZWVrYWJsZQoKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICBpZiBzZWxmLmJ1ZmZlciBpcyBub3QgTm9uZSBhbmQgbm90IHNlbGYuY2xvc2VkOgogICAgICAgICAgICBzZWxmLmZsdXNoKCkKICAgICAgICAgICAgc2VsZi5idWZmZXIuY2xvc2UoKQoKICAgICNAcHJvcGVydHkKICAgIGRlZiBjbG9zZWQoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuYnVmZmVyLmNsb3NlZAoKICAgICNAcHJvcGVydHkKICAgIGRlZiBuYW1lKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlci5uYW1lCgogICAgZGVmIGZpbGVubyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5idWZmZXIuZmlsZW5vKCkKCiAgICBkZWYgaXNhdHR5KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlci5pc2F0dHkoKQoKICAgIGRlZiB3cml0ZShzZWxmLCBzKToKICAgICAgICAnV3JpdGUgZGF0YSwgd2hlcmUgcyBpcyBhIHN0cicKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JpdGUgdG8gY2xvc2VkIGZpbGUiKQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHMsIHN0cik6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY2FuJ3Qgd3JpdGUgJXMgdG8gdGV4dCBzdHJlYW0iICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuX19jbGFzc19fLl9fbmFtZV9fKQogICAgICAgIGxlbmd0aCA9IGxlbihzKQogICAgICAgIGhhc2xmID0gKHNlbGYuX3dyaXRldHJhbnNsYXRlIG9yIHNlbGYuX2xpbmVfYnVmZmVyaW5nKSBhbmQgIlxuIiBpbiBzCiAgICAgICAgaWYgaGFzbGYgYW5kIHNlbGYuX3dyaXRldHJhbnNsYXRlIGFuZCBzZWxmLl93cml0ZW5sICE9ICJcbiI6CiAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoIlxuIiwgc2VsZi5fd3JpdGVubCkKICAgICAgICBlbmNvZGVyID0gc2VsZi5fZW5jb2RlciBvciBzZWxmLl9nZXRfZW5jb2RlcigpCiAgICAgICAgIyBYWFggV2hhdCBpZiB3ZSB3ZXJlIGp1c3QgcmVhZGluZz8KICAgICAgICBiID0gZW5jb2Rlci5lbmNvZGUocykKICAgICAgICBzZWxmLmJ1ZmZlci53cml0ZShiKQogICAgICAgIGlmIHNlbGYuX2xpbmVfYnVmZmVyaW5nIGFuZCAoaGFzbGYgb3IgIlxyIiBpbiBzKToKICAgICAgICAgICAgc2VsZi5mbHVzaCgpCiAgICAgICAgc2VsZi5fc25hcHNob3QgPSBOb25lCiAgICAgICAgaWYgc2VsZi5fZGVjb2RlcjoKICAgICAgICAgICAgc2VsZi5fZGVjb2Rlci5yZXNldCgpCiAgICAgICAgcmV0dXJuIGxlbmd0aAoKICAgIGRlZiBfZ2V0X2VuY29kZXIoc2VsZik6CiAgICAgICAgbWFrZV9lbmNvZGVyID0gY29kZWNzLmdldGluY3JlbWVudGFsZW5jb2RlcihzZWxmLl9lbmNvZGluZykKICAgICAgICBzZWxmLl9lbmNvZGVyID0gbWFrZV9lbmNvZGVyKHNlbGYuX2Vycm9ycykKICAgICAgICByZXR1cm4gc2VsZi5fZW5jb2RlcgoKICAgIGRlZiBfZ2V0X2RlY29kZXIoc2VsZik6CiAgICAgICAgbWFrZV9kZWNvZGVyID0gY29kZWNzLmdldGluY3JlbWVudGFsZGVjb2RlcihzZWxmLl9lbmNvZGluZykKICAgICAgICBkZWNvZGVyID0gbWFrZV9kZWNvZGVyKHNlbGYuX2Vycm9ycykKICAgICAgICBpZiBzZWxmLl9yZWFkdW5pdmVyc2FsOgogICAgICAgICAgICBkZWNvZGVyID0gSW5jcmVtZW50YWxOZXdsaW5lRGVjb2RlcihkZWNvZGVyLCBzZWxmLl9yZWFkdHJhbnNsYXRlKQogICAgICAgIHNlbGYuX2RlY29kZXIgPSBkZWNvZGVyCiAgICAgICAgcmV0dXJuIGRlY29kZXIKCiAgICAjIFRoZSBmb2xsb3dpbmcgdGhyZWUgbWV0aG9kcyBpbXBsZW1lbnQgYW4gQURUIGZvciBfZGVjb2RlZF9jaGFycy4KICAgICMgVGV4dCByZXR1cm5lZCBmcm9tIHRoZSBkZWNvZGVyIGlzIGJ1ZmZlcmVkIGhlcmUgdW50aWwgdGhlIGNsaWVudAogICAgIyByZXF1ZXN0cyBpdCBieSBjYWxsaW5nIG91ciByZWFkKCkgb3IgcmVhZGxpbmUoKSBtZXRob2QuCiAgICBkZWYgX3NldF9kZWNvZGVkX2NoYXJzKHNlbGYsIGNoYXJzKToKICAgICAgICAiU2V0IHRoZSBfZGVjb2RlZF9jaGFycyBidWZmZXIuIgogICAgICAgIHNlbGYuX2RlY29kZWRfY2hhcnMgPSBjaGFycwogICAgICAgIHNlbGYuX2RlY29kZWRfY2hhcnNfdXNlZCA9IDAKCiAgICBkZWYgX2dldF9kZWNvZGVkX2NoYXJzKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgIkFkdmFuY2UgaW50byB0aGUgX2RlY29kZWRfY2hhcnMgYnVmZmVyLiIKICAgICAgICBvZmZzZXQgPSBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQKICAgICAgICBpZiBuIGlzIE5vbmU6CiAgICAgICAgICAgIGNoYXJzID0gc2VsZi5fZGVjb2RlZF9jaGFyc1tvZmZzZXQ6XQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNoYXJzID0gc2VsZi5fZGVjb2RlZF9jaGFyc1tvZmZzZXQ6b2Zmc2V0ICsgbl0KICAgICAgICBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQgKz0gbGVuKGNoYXJzKQogICAgICAgIHJldHVybiBjaGFycwoKICAgIGRlZiBfcmV3aW5kX2RlY29kZWRfY2hhcnMoc2VsZiwgbik6CiAgICAgICAgIlJld2luZCB0aGUgX2RlY29kZWRfY2hhcnMgYnVmZmVyLiIKICAgICAgICBpZiBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQgPCBuOgogICAgICAgICAgICByYWlzZSBBc3NlcnRpb25FcnJvcigicmV3aW5kIGRlY29kZWRfY2hhcnMgb3V0IG9mIGJvdW5kcyIpCiAgICAgICAgc2VsZi5fZGVjb2RlZF9jaGFyc191c2VkIC09IG4KCiAgICBkZWYgX3JlYWRfY2h1bmsoc2VsZik6CiAgICAgICAgIlJlYWQgYW5kIGRlY29kZSB0aGUgbmV4dCBjaHVuayBvZiBkYXRhIGZyb20gdGhlIEJ1ZmZlcmVkUmVhZGVyLiIKCiAgICAgICAgIyBUaGUgcmV0dXJuIHZhbHVlIGlzIFRydWUgdW5sZXNzIEVPRiB3YXMgcmVhY2hlZC4gIFRoZSBkZWNvZGVkCiAgICAgICAgIyBzdHJpbmcgaXMgcGxhY2VkIGluIHNlbGYuX2RlY29kZWRfY2hhcnMgKHJlcGxhY2luZyBpdHMgcHJldmlvdXMKICAgICAgICAjIHZhbHVlKS4gIFRoZSBlbnRpcmUgaW5wdXQgY2h1bmsgaXMgc2VudCB0byB0aGUgZGVjb2RlciwgdGhvdWdoCiAgICAgICAgIyBzb21lIG9mIGl0IG1heSByZW1haW4gYnVmZmVyZWQgaW4gdGhlIGRlY29kZXIsIHlldCB0byBiZQogICAgICAgICMgY29udmVydGVkLgoKICAgICAgICBpZiBzZWxmLl9kZWNvZGVyIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5vIGRlY29kZXIiKQoKICAgICAgICBpZiBzZWxmLl90ZWxsaW5nOgogICAgICAgICAgICAjIFRvIHByZXBhcmUgZm9yIHRlbGwoKSwgd2UgbmVlZCB0byBzbmFwc2hvdCBhIHBvaW50IGluIHRoZQogICAgICAgICAgICAjIGZpbGUgd2hlcmUgdGhlIGRlY29kZXIncyBpbnB1dCBidWZmZXIgaXMgZW1wdHkuCgogICAgICAgICAgICBkZWNfYnVmZmVyLCBkZWNfZmxhZ3MgPSBzZWxmLl9kZWNvZGVyLmdldHN0YXRlKCkKICAgICAgICAgICAgIyBHaXZlbiB0aGlzLCB3ZSBrbm93IHRoZXJlIHdhcyBhIHZhbGlkIHNuYXBzaG90IHBvaW50CiAgICAgICAgICAgICMgbGVuKGRlY19idWZmZXIpIGJ5dGVzIGFnbyB3aXRoIGRlY29kZXIgc3RhdGUgKGInJywgZGVjX2ZsYWdzKS4KCiAgICAgICAgIyBSZWFkIGEgY2h1bmssIGRlY29kZSBpdCwgYW5kIHB1dCB0aGUgcmVzdWx0IGluIHNlbGYuX2RlY29kZWRfY2hhcnMuCiAgICAgICAgaWYgc2VsZi5faGFzX3JlYWQxOgogICAgICAgICAgICBpbnB1dF9jaHVuayA9IHNlbGYuYnVmZmVyLnJlYWQxKHNlbGYuX0NIVU5LX1NJWkUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaW5wdXRfY2h1bmsgPSBzZWxmLmJ1ZmZlci5yZWFkKHNlbGYuX0NIVU5LX1NJWkUpCiAgICAgICAgZW9mID0gbm90IGlucHV0X2NodW5rCiAgICAgICAgc2VsZi5fc2V0X2RlY29kZWRfY2hhcnMoc2VsZi5fZGVjb2Rlci5kZWNvZGUoaW5wdXRfY2h1bmssIGVvZikpCgogICAgICAgIGlmIHNlbGYuX3RlbGxpbmc6CiAgICAgICAgICAgICMgQXQgdGhlIHNuYXBzaG90IHBvaW50LCBsZW4oZGVjX2J1ZmZlcikgYnl0ZXMgYmVmb3JlIHRoZSByZWFkLAogICAgICAgICAgICAjIHRoZSBuZXh0IGlucHV0IHRvIGJlIGRlY29kZWQgaXMgZGVjX2J1ZmZlciArIGlucHV0X2NodW5rLgogICAgICAgICAgICBzZWxmLl9zbmFwc2hvdCA9IChkZWNfZmxhZ3MsIGRlY19idWZmZXIgKyBpbnB1dF9jaHVuaykKCiAgICAgICAgcmV0dXJuIG5vdCBlb2YKCiAgICBkZWYgX3BhY2tfY29va2llKHNlbGYsIHBvc2l0aW9uLCBkZWNfZmxhZ3M9MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXNfdG9fZmVlZD0wLCBuZWVkX2VvZj0wLCBjaGFyc190b19za2lwPTApOgogICAgICAgICMgVGhlIG1lYW5pbmcgb2YgYSB0ZWxsKCkgY29va2llIGlzOiBzZWVrIHRvIHBvc2l0aW9uLCBzZXQgdGhlCiAgICAgICAgIyBkZWNvZGVyIGZsYWdzIHRvIGRlY19mbGFncywgcmVhZCBieXRlc190b19mZWVkIGJ5dGVzLCBmZWVkIHRoZW0KICAgICAgICAjIGludG8gdGhlIGRlY29kZXIgd2l0aCBuZWVkX2VvZiBhcyB0aGUgRU9GIGZsYWcsIHRoZW4gc2tpcAogICAgICAgICMgY2hhcnNfdG9fc2tpcCBjaGFyYWN0ZXJzIG9mIHRoZSBkZWNvZGVkIHJlc3VsdC4gIEZvciBtb3N0IHNpbXBsZQogICAgICAgICMgZGVjb2RlcnMsIHRlbGwoKSB3aWxsIG9mdGVuIGp1c3QgZ2l2ZSBhIGJ5dGUgb2Zmc2V0IGluIHRoZSBmaWxlLgogICAgICAgIHJldHVybiAocG9zaXRpb24gfCAoZGVjX2ZsYWdzPDw2NCkgfCAoYnl0ZXNfdG9fZmVlZDw8MTI4KSB8CiAgICAgICAgICAgICAgIChjaGFyc190b19za2lwPDwxOTIpIHwgYm9vbChuZWVkX2VvZik8PDI1NikKCiAgICBkZWYgX3VucGFja19jb29raWUoc2VsZiwgYmlnaW50KToKICAgICAgICByZXN0LCBwb3NpdGlvbiA9IGRpdm1vZChiaWdpbnQsIDE8PDY0KQogICAgICAgIHJlc3QsIGRlY19mbGFncyA9IGRpdm1vZChyZXN0LCAxPDw2NCkKICAgICAgICByZXN0LCBieXRlc190b19mZWVkID0gZGl2bW9kKHJlc3QsIDE8PDY0KQogICAgICAgIG5lZWRfZW9mLCBjaGFyc190b19za2lwID0gZGl2bW9kKHJlc3QsIDE8PDY0KQogICAgICAgIHJldHVybiBwb3NpdGlvbiwgZGVjX2ZsYWdzLCBieXRlc190b19mZWVkLCBuZWVkX2VvZiwgY2hhcnNfdG9fc2tpcAogICAgIiIiCiAgICAjIyAjZml4bWUgSSBkaWRuJ3Qga25vdyB0aGF0IGZvci4uIGVsc2UgY291bGQgZXZlbiBvY2N1ciEgOigKICAgIGRlZiB0ZWxsKHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmLl9zZWVrYWJsZToKICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRPcGVyYXRpb24oInVuZGVybHlpbmcgc3RyZWFtIGlzIG5vdCBzZWVrYWJsZSIpCiAgICAgICAgaWYgbm90IHNlbGYuX3RlbGxpbmc6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoInRlbGxpbmcgcG9zaXRpb24gZGlzYWJsZWQgYnkgbmV4dCgpIGNhbGwiKQogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHBvc2l0aW9uID0gc2VsZi5idWZmZXIudGVsbCgpCiAgICAgICAgZGVjb2RlciA9IHNlbGYuX2RlY29kZXIKICAgICAgICBpZiBkZWNvZGVyIGlzIE5vbmUgb3Igc2VsZi5fc25hcHNob3QgaXMgTm9uZToKICAgICAgICAgICAgaWYgc2VsZi5fZGVjb2RlZF9jaGFyczoKICAgICAgICAgICAgICAgICMgVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuLgogICAgICAgICAgICAgICAgcmFpc2UgQXNzZXJ0aW9uRXJyb3IoInBlbmRpbmcgZGVjb2RlZCB0ZXh0IikKICAgICAgICAgICAgcmV0dXJuIHBvc2l0aW9uCgogICAgICAgICMgU2tpcCBiYWNrd2FyZCB0byB0aGUgc25hcHNob3QgcG9pbnQgKHNlZSBfcmVhZF9jaHVuaykuCiAgICAgICAgZGVjX2ZsYWdzLCBuZXh0X2lucHV0ID0gc2VsZi5fc25hcHNob3QKICAgICAgICBwb3NpdGlvbiAtPSBsZW4obmV4dF9pbnB1dCkKCiAgICAgICAgIyBIb3cgbWFueSBkZWNvZGVkIGNoYXJhY3RlcnMgaGF2ZSBiZWVuIHVzZWQgdXAgc2luY2UgdGhlIHNuYXBzaG90PwogICAgICAgIGNoYXJzX3RvX3NraXAgPSBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQKICAgICAgICBpZiBjaGFyc190b19za2lwID09IDA6CiAgICAgICAgICAgICMgV2UgaGF2ZW4ndCBtb3ZlZCBmcm9tIHRoZSBzbmFwc2hvdCBwb2ludC4KICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3BhY2tfY29va2llKHBvc2l0aW9uLCBkZWNfZmxhZ3MpCgogICAgICAgICMgU3RhcnRpbmcgZnJvbSB0aGUgc25hcHNob3QgcG9zaXRpb24sIHdlIHdpbGwgd2FsayB0aGUgZGVjb2RlcgogICAgICAgICMgZm9yd2FyZCB1bnRpbCBpdCBnaXZlcyB1cyBlbm91Z2ggZGVjb2RlZCBjaGFyYWN0ZXJzLgogICAgICAgIHNhdmVkX3N0YXRlID0gZGVjb2Rlci5nZXRzdGF0ZSgpCiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIE5vdGUgb3VyIGluaXRpYWwgc3RhcnQgcG9pbnQuCiAgICAgICAgICAgICNkZWNvZGVyLnNldHN0YXRlKChiJycsIGRlY19mbGFncykpICAjZml4bWUKICAgICAgICAgICAgZGVjb2Rlci5zZXRzdGF0ZSgoJycsIGRlY19mbGFncykpCiAgICAgICAgICAgIHN0YXJ0X3BvcyA9IHBvc2l0aW9uCiAgICAgICAgICAgIHN0YXJ0X2ZsYWdzLCBieXRlc19mZWQsIGNoYXJzX2RlY29kZWQgPSBkZWNfZmxhZ3MsIDAsIDAKICAgICAgICAgICAgbmVlZF9lb2YgPSAwCgogICAgICAgICAgICAjIEZlZWQgdGhlIGRlY29kZXIgb25lIGJ5dGUgYXQgYSB0aW1lLiAgQXMgd2UgZ28sIG5vdGUgdGhlCiAgICAgICAgICAgICMgbmVhcmVzdCAic2FmZSBzdGFydCBwb2ludCIgYmVmb3JlIHRoZSBjdXJyZW50IGxvY2F0aW9uCiAgICAgICAgICAgICMgKGEgcG9pbnQgd2hlcmUgdGhlIGRlY29kZXIgaGFzIG5vdGhpbmcgYnVmZmVyZWQsIHNvIHNlZWsoKQogICAgICAgICAgICAjIGNhbiBzYWZlbHkgc3RhcnQgZnJvbSB0aGVyZSBhbmQgYWR2YW5jZSB0byB0aGlzIGxvY2F0aW9uKS4KICAgICAgICAgICAgbmV4dF9ieXRlID0gYnl0ZWFycmF5KDEpCiAgICAgICAgICAgICNmb3IgbmV4dF9ieXRlWzBdIGluIG5leHRfaW5wdXQ6ICAgI2ZpeG1lCiAgICAgICAgICAgIGZvciBfaSBpbiBuZXh0X2lucHV0OgogICAgICAgICAgICAgICAgbmV4dF9ieXRlWzBdPV9pCiAgICAgICAgICAgICAgICBieXRlc19mZWQgKz0gMQogICAgICAgICAgICAgICAgY2hhcnNfZGVjb2RlZCArPSBsZW4oZGVjb2Rlci5kZWNvZGUobmV4dF9ieXRlKSkKICAgICAgICAgICAgICAgIGRlY19idWZmZXIsIGRlY19mbGFncyA9IGRlY29kZXIuZ2V0c3RhdGUoKQogICAgICAgICAgICAgICAgaWYgbm90IGRlY19idWZmZXIgYW5kIGNoYXJzX2RlY29kZWQgPD0gY2hhcnNfdG9fc2tpcDoKICAgICAgICAgICAgICAgICAgICAjIERlY29kZXIgYnVmZmVyIGlzIGVtcHR5LCBzbyB0aGlzIGlzIGEgc2FmZSBzdGFydCBwb2ludC4KICAgICAgICAgICAgICAgICAgICBzdGFydF9wb3MgKz0gYnl0ZXNfZmVkCiAgICAgICAgICAgICAgICAgICAgY2hhcnNfdG9fc2tpcCAtPSBjaGFyc19kZWNvZGVkCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfZmxhZ3MsIGJ5dGVzX2ZlZCwgY2hhcnNfZGVjb2RlZCA9IGRlY19mbGFncywgMCwgMAogICAgICAgICAgICAgICAgaWYgY2hhcnNfZGVjb2RlZCA+PSBjaGFyc190b19za2lwOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIFdlIGRpZG4ndCBnZXQgZW5vdWdoIGRlY29kZWQgZGF0YTsgc2lnbmFsIEVPRiB0byBnZXQgbW9yZS4KICAgICAgICAgICAgICAgICNjaGFyc19kZWNvZGVkICs9IGxlbihkZWNvZGVyLmRlY29kZShiJycsIGZpbmFsPVRydWUpKQogICAgICAgICAgICAgICAgY2hhcnNfZGVjb2RlZCArPSBsZW4oZGVjb2Rlci5kZWNvZGUoJycsIGZpbmFsPVRydWUpKSAgI2ZpeG1lCiAgICAgICAgICAgICAgICBuZWVkX2VvZiA9IDEKICAgICAgICAgICAgICAgIGlmIGNoYXJzX2RlY29kZWQgPCBjaGFyc190b19za2lwOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoImNhbid0IHJlY29uc3RydWN0IGxvZ2ljYWwgZmlsZSBwb3NpdGlvbiIpCgogICAgICAgICAgICAjIFRoZSByZXR1cm5lZCBjb29raWUgY29ycmVzcG9uZHMgdG8gdGhlIGxhc3Qgc2FmZSBzdGFydCBwb2ludC4KICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3BhY2tfY29va2llKAogICAgICAgICAgICAgICAgc3RhcnRfcG9zLCBzdGFydF9mbGFncywgYnl0ZXNfZmVkLCBuZWVkX2VvZiwgY2hhcnNfdG9fc2tpcCkKICAgICAgICAjZXhjZXB0OiAgI2ZpeG1lCiAgICAgICAgIyAgICBhPTEgICMgcGFzcyAjZml4bWUKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICBkZWNvZGVyLnNldHN0YXRlKHNhdmVkX3N0YXRlKQogICAgIiIiCiAgICBkZWYgdHJ1bmNhdGUoc2VsZiwgcG9zPU5vbmUpOgogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIGlmIHBvcyBpcyBOb25lOgogICAgICAgICAgICBwb3MgPSBzZWxmLnRlbGwoKQogICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlci50cnVuY2F0ZShwb3MpCgogICAgZGVmIGRldGFjaChzZWxmKToKICAgICAgICBpZiBzZWxmLmJ1ZmZlciBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJidWZmZXIgaXMgYWxyZWFkeSBkZXRhY2hlZCIpCiAgICAgICAgc2VsZi5mbHVzaCgpCiAgICAgICAgYnVmZmVyID0gc2VsZi5fYnVmZmVyCiAgICAgICAgc2VsZi5fYnVmZmVyID0gTm9uZQogICAgICAgIHJldHVybiBidWZmZXIKCiAgICBkZWYgc2VlayhzZWxmLCBjb29raWUsIHdoZW5jZT0wKToKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidGVsbCBvbiBjbG9zZWQgZmlsZSIpCiAgICAgICAgaWYgbm90IHNlbGYuX3NlZWthYmxlOgogICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbigidW5kZXJseWluZyBzdHJlYW0gaXMgbm90IHNlZWthYmxlIikKICAgICAgICBpZiB3aGVuY2UgPT0gMTogIyBzZWVrIHJlbGF0aXZlIHRvIGN1cnJlbnQgcG9zaXRpb24KICAgICAgICAgICAgaWYgY29va2llICE9IDA6CiAgICAgICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZE9wZXJhdGlvbigiY2FuJ3QgZG8gbm9uemVybyBjdXItcmVsYXRpdmUgc2Vla3MiKQogICAgICAgICAgICAjIFNlZWtpbmcgdG8gdGhlIGN1cnJlbnQgcG9zaXRpb24gc2hvdWxkIGF0dGVtcHQgdG8KICAgICAgICAgICAgIyBzeW5jIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlciB3aXRoIHRoZSBjdXJyZW50IHBvc2l0aW9uLgogICAgICAgICAgICB3aGVuY2UgPSAwCiAgICAgICAgICAgIGNvb2tpZSA9IHNlbGYudGVsbCgpCiAgICAgICAgaWYgd2hlbmNlID09IDI6ICMgc2VlayByZWxhdGl2ZSB0byBlbmQgb2YgZmlsZQogICAgICAgICAgICBpZiBjb29raWUgIT0gMDoKICAgICAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkT3BlcmF0aW9uKCJjYW4ndCBkbyBub256ZXJvIGVuZC1yZWxhdGl2ZSBzZWVrcyIpCiAgICAgICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgICAgICBwb3NpdGlvbiA9IHNlbGYuYnVmZmVyLnNlZWsoMCwgMikKICAgICAgICAgICAgc2VsZi5fc2V0X2RlY29kZWRfY2hhcnMoJycpCiAgICAgICAgICAgIHNlbGYuX3NuYXBzaG90ID0gTm9uZQogICAgICAgICAgICBpZiBzZWxmLl9kZWNvZGVyOgogICAgICAgICAgICAgICAgc2VsZi5fZGVjb2Rlci5yZXNldCgpCiAgICAgICAgICAgIHJldHVybiBwb3NpdGlvbgogICAgICAgIGlmIHdoZW5jZSAhPSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHdoZW5jZSAoJXIsIHNob3VsZCBiZSAwLCAxIG9yIDIpIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHdoZW5jZSwpKQogICAgICAgIGlmIGNvb2tpZSA8IDA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5lZ2F0aXZlIHNlZWsgcG9zaXRpb24gJXIiICUgKGNvb2tpZSwpKQogICAgICAgIHNlbGYuZmx1c2goKQoKICAgICAgICAjIFRoZSBzdHJhdGVneSBvZiBzZWVrKCkgaXMgdG8gZ28gYmFjayB0byB0aGUgc2FmZSBzdGFydCBwb2ludAogICAgICAgICMgYW5kIHJlcGxheSB0aGUgZWZmZWN0IG9mIHJlYWQoY2hhcnNfdG9fc2tpcCkgZnJvbSB0aGVyZS4KICAgICAgICBzdGFydF9wb3MsIGRlY19mbGFncywgYnl0ZXNfdG9fZmVlZCwgbmVlZF9lb2YsIGNoYXJzX3RvX3NraXAgPSBcCiAgICAgICAgICAgIHNlbGYuX3VucGFja19jb29raWUoY29va2llKQoKICAgICAgICAjIFNlZWsgYmFjayB0byB0aGUgc2FmZSBzdGFydCBwb2ludC4KICAgICAgICBzZWxmLmJ1ZmZlci5zZWVrKHN0YXJ0X3BvcykKICAgICAgICBzZWxmLl9zZXRfZGVjb2RlZF9jaGFycygnJykKICAgICAgICBzZWxmLl9zbmFwc2hvdCA9IE5vbmUKCiAgICAgICAgIyBSZXN0b3JlIHRoZSBkZWNvZGVyIHRvIGl0cyBzdGF0ZSBmcm9tIHRoZSBzYWZlIHN0YXJ0IHBvaW50LgogICAgICAgIGlmIGNvb2tpZSA9PSAwIGFuZCBzZWxmLl9kZWNvZGVyOgogICAgICAgICAgICBzZWxmLl9kZWNvZGVyLnJlc2V0KCkKICAgICAgICBlbGlmIHNlbGYuX2RlY29kZXIgb3IgZGVjX2ZsYWdzIG9yIGNoYXJzX3RvX3NraXA6CiAgICAgICAgICAgIHNlbGYuX2RlY29kZXIgPSBzZWxmLl9kZWNvZGVyIG9yIHNlbGYuX2dldF9kZWNvZGVyKCkKICAgICAgICAgICAgI3NlbGYuX2RlY29kZXIuc2V0c3RhdGUoKGInJywgZGVjX2ZsYWdzKSkgI2ZpeG1lCiAgICAgICAgICAgIHNlbGYuX2RlY29kZXIuc2V0c3RhdGUoKCcnLCBkZWNfZmxhZ3MpKQogICAgICAgICAgICAjc2VsZi5fc25hcHNob3QgPSAoZGVjX2ZsYWdzLCBiJycpICAgI2ZpeG1lCiAgICAgICAgICAgIHNlbGYuX3NuYXBzaG90ID0gKGRlY19mbGFncywgJycpICAgCgogICAgICAgIGlmIGNoYXJzX3RvX3NraXA6CiAgICAgICAgICAgICMgSnVzdCBsaWtlIF9yZWFkX2NodW5rLCBmZWVkIHRoZSBkZWNvZGVyIGFuZCBzYXZlIGEgc25hcHNob3QuCiAgICAgICAgICAgIGlucHV0X2NodW5rID0gc2VsZi5idWZmZXIucmVhZChieXRlc190b19mZWVkKQogICAgICAgICAgICBzZWxmLl9zZXRfZGVjb2RlZF9jaGFycygKICAgICAgICAgICAgICAgIHNlbGYuX2RlY29kZXIuZGVjb2RlKGlucHV0X2NodW5rLCBuZWVkX2VvZikpCiAgICAgICAgICAgIHNlbGYuX3NuYXBzaG90ID0gKGRlY19mbGFncywgaW5wdXRfY2h1bmspCgogICAgICAgICAgICAjIFNraXAgY2hhcnNfdG9fc2tpcCBvZiB0aGUgZGVjb2RlZCBjaGFyYWN0ZXJzLgogICAgICAgICAgICBpZiBsZW4oc2VsZi5fZGVjb2RlZF9jaGFycykgPCBjaGFyc190b19za2lwOgogICAgICAgICAgICAgICAgcmFpc2UgSU9FcnJvcigiY2FuJ3QgcmVzdG9yZSBsb2dpY2FsIGZpbGUgcG9zaXRpb24iKQogICAgICAgICAgICBzZWxmLl9kZWNvZGVkX2NoYXJzX3VzZWQgPSBjaGFyc190b19za2lwCgogICAgICAgICMgRmluYWxseSwgcmVzZXQgdGhlIGVuY29kZXIgKG1lcmVseSB1c2VmdWwgZm9yIHByb3BlciBCT00gaGFuZGxpbmcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBlbmNvZGVyID0gc2VsZi5fZW5jb2RlciBvciBzZWxmLl9nZXRfZW5jb2RlcigpCiAgICAgICAgZXhjZXB0IExvb2t1cEVycm9yOgogICAgICAgICAgICAjIFNvbWV0aW1lcyB0aGUgZW5jb2RlciBkb2Vzbid0IGV4aXN0CiAgICAgICAgICAgIGE9MSAgICNmaXhtZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGNvb2tpZSAhPSAwOgogICAgICAgICAgICAgICAgZW5jb2Rlci5zZXRzdGF0ZSgwKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZW5jb2Rlci5yZXNldCgpCiAgICAgICAgcmV0dXJuIGNvb2tpZQoKICAgIGRlZiByZWFkKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgc2VsZi5fY2hlY2tSZWFkYWJsZSgpCiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICBuID0gLTEKICAgICAgICBkZWNvZGVyID0gc2VsZi5fZGVjb2RlciBvciBzZWxmLl9nZXRfZGVjb2RlcigpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBuLl9faW5kZXhfXwogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlcnI6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYW4gaW50ZWdlciBpcyByZXF1aXJlZCIpICNmcm9tIGVyciAgI2ZpeG1lCiAgICAgICAgaWYgbiA8IDA6CiAgICAgICAgICAgICMgUmVhZCBldmVyeXRoaW5nLgogICAgICAgICAgICByZXN1bHQgPSAoc2VsZi5fZ2V0X2RlY29kZWRfY2hhcnMoKSArCiAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVyLmRlY29kZShzZWxmLmJ1ZmZlci5yZWFkKCksIGZpbmFsPVRydWUpKQogICAgICAgICAgICBzZWxmLl9zZXRfZGVjb2RlZF9jaGFycygnJykKICAgICAgICAgICAgc2VsZi5fc25hcHNob3QgPSBOb25lCiAgICAgICAgICAgIHJldHVybiByZXN1bHQKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIEtlZXAgcmVhZGluZyBjaHVua3MgdW50aWwgd2UgaGF2ZSBuIGNoYXJhY3RlcnMgdG8gcmV0dXJuLgogICAgICAgICAgICBlb2YgPSBGYWxzZQogICAgICAgICAgICByZXN1bHQgPSBzZWxmLl9nZXRfZGVjb2RlZF9jaGFycyhuKQogICAgICAgICAgICB3aGlsZSBsZW4ocmVzdWx0KSA8IG4gYW5kIG5vdCBlb2Y6CiAgICAgICAgICAgICAgICBlb2YgPSBub3Qgc2VsZi5fcmVhZF9jaHVuaygpCiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc2VsZi5fZ2V0X2RlY29kZWRfY2hhcnMobiAtIGxlbihyZXN1bHQpKQogICAgICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHNlbGYuX3RlbGxpbmcgPSBGYWxzZQogICAgICAgIGxpbmUgPSBzZWxmLnJlYWRsaW5lKCkKICAgICAgICBpZiBub3QgbGluZToKICAgICAgICAgICAgc2VsZi5fc25hcHNob3QgPSBOb25lCiAgICAgICAgICAgIHNlbGYuX3RlbGxpbmcgPSBzZWxmLl9zZWVrYWJsZQogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgcmV0dXJuIGxpbmUKCiAgICBkZWYgcmVhZGxpbmUoc2VsZiwgbGltaXQ9Tm9uZSk6CiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInJlYWQgZnJvbSBjbG9zZWQgZmlsZSIpCiAgICAgICAgaWYgbGltaXQgaXMgTm9uZToKICAgICAgICAgICAgbGltaXQgPSAtMQogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2UobGltaXQsIGludCk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibGltaXQgbXVzdCBiZSBhbiBpbnRlZ2VyIikKCiAgICAgICAgIyBHcmFiIGFsbCB0aGUgZGVjb2RlZCB0ZXh0ICh3ZSB3aWxsIHJld2luZCBhbnkgZXh0cmEgYml0cyBsYXRlcikuCiAgICAgICAgbGluZSA9IHNlbGYuX2dldF9kZWNvZGVkX2NoYXJzKCkKCiAgICAgICAgc3RhcnQgPSAwCiAgICAgICAgIyBNYWtlIHRoZSBkZWNvZGVyIGlmIGl0IGRvZXNuJ3QgYWxyZWFkeSBleGlzdC4KICAgICAgICBpZiBub3Qgc2VsZi5fZGVjb2RlcjoKICAgICAgICAgICAgc2VsZi5fZ2V0X2RlY29kZXIoKQoKICAgICAgICBwb3MgPSBlbmRwb3MgPSBOb25lCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgaWYgc2VsZi5fcmVhZHRyYW5zbGF0ZToKICAgICAgICAgICAgICAgICMgTmV3bGluZXMgYXJlIGFscmVhZHkgdHJhbnNsYXRlZCwgb25seSBzZWFyY2ggZm9yIFxuCiAgICAgICAgICAgICAgICBwb3MgPSBsaW5lLmZpbmQoJ1xuJywgc3RhcnQpCiAgICAgICAgICAgICAgICBpZiBwb3MgPj0gMDoKICAgICAgICAgICAgICAgICAgICBlbmRwb3MgPSBwb3MgKyAxCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBsZW4obGluZSkKCiAgICAgICAgICAgIGVsaWYgc2VsZi5fcmVhZHVuaXZlcnNhbDoKICAgICAgICAgICAgICAgICMgVW5pdmVyc2FsIG5ld2xpbmUgc2VhcmNoLiBGaW5kIGFueSBvZiBcciwgXHJcbiwgXG4KICAgICAgICAgICAgICAgICMgVGhlIGRlY29kZXIgZW5zdXJlcyB0aGF0IFxyXG4gYXJlIG5vdCBzcGxpdCBpbiB0d28gcGllY2VzCgogICAgICAgICAgICAgICAgIyBJbiBDIHdlJ2QgbG9vayBmb3IgdGhlc2UgaW4gcGFyYWxsZWwgb2YgY291cnNlLgogICAgICAgICAgICAgICAgbmxwb3MgPSBsaW5lLmZpbmQoIlxuIiwgc3RhcnQpCiAgICAgICAgICAgICAgICBjcnBvcyA9IGxpbmUuZmluZCgiXHIiLCBzdGFydCkKICAgICAgICAgICAgICAgIGlmIGNycG9zID09IC0xOgogICAgICAgICAgICAgICAgICAgIGlmIG5scG9zID09IC0xOgogICAgICAgICAgICAgICAgICAgICAgICAjIE5vdGhpbmcgZm91bmQKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBsZW4obGluZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAjIEZvdW5kIFxuCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvcyA9IG5scG9zICsgMQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBubHBvcyA9PSAtMToKICAgICAgICAgICAgICAgICAgICAjIEZvdW5kIGxvbmUgXHIKICAgICAgICAgICAgICAgICAgICBlbmRwb3MgPSBjcnBvcyArIDEKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBubHBvcyA8IGNycG9zOgogICAgICAgICAgICAgICAgICAgICMgRm91bmQgXG4KICAgICAgICAgICAgICAgICAgICBlbmRwb3MgPSBubHBvcyArIDEKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBubHBvcyA9PSBjcnBvcyArIDE6CiAgICAgICAgICAgICAgICAgICAgIyBGb3VuZCBcclxuCiAgICAgICAgICAgICAgICAgICAgZW5kcG9zID0gY3Jwb3MgKyAyCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIyBGb3VuZCBccgogICAgICAgICAgICAgICAgICAgIGVuZHBvcyA9IGNycG9zICsgMQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIG5vbi11bml2ZXJzYWwKICAgICAgICAgICAgICAgIHBvcyA9IGxpbmUuZmluZChzZWxmLl9yZWFkbmwpCiAgICAgICAgICAgICAgICBpZiBwb3MgPj0gMDoKICAgICAgICAgICAgICAgICAgICBlbmRwb3MgPSBwb3MgKyBsZW4oc2VsZi5fcmVhZG5sKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICBpZiBsaW1pdCA+PSAwIGFuZCBsZW4obGluZSkgPj0gbGltaXQ6CiAgICAgICAgICAgICAgICBlbmRwb3MgPSBsaW1pdCAgIyByZWFjaGVkIGxlbmd0aCBsaW1pdAogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICMgTm8gbGluZSBlbmRpbmcgc2VlbiB5ZXQgLSBnZXQgbW9yZSBkYXRhJwogICAgICAgICAgICB3aGlsZSBzZWxmLl9yZWFkX2NodW5rKCk6CiAgICAgICAgICAgICAgICBpZiBzZWxmLl9kZWNvZGVkX2NoYXJzOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGlmIHNlbGYuX2RlY29kZWRfY2hhcnM6CiAgICAgICAgICAgICAgICBsaW5lICs9IHNlbGYuX2dldF9kZWNvZGVkX2NoYXJzKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMgZW5kIG9mIGZpbGUKICAgICAgICAgICAgICAgIHNlbGYuX3NldF9kZWNvZGVkX2NoYXJzKCcnKQogICAgICAgICAgICAgICAgc2VsZi5fc25hcHNob3QgPSBOb25lCiAgICAgICAgICAgICAgICByZXR1cm4gbGluZQoKICAgICAgICBpZiBsaW1pdCA+PSAwIGFuZCBlbmRwb3MgPiBsaW1pdDoKICAgICAgICAgICAgZW5kcG9zID0gbGltaXQgICMgZG9uJ3QgZXhjZWVkIGxpbWl0CgogICAgICAgICMgUmV3aW5kIF9kZWNvZGVkX2NoYXJzIHRvIGp1c3QgYWZ0ZXIgdGhlIGxpbmUgZW5kaW5nIHdlIGZvdW5kLgogICAgICAgIHNlbGYuX3Jld2luZF9kZWNvZGVkX2NoYXJzKGxlbihsaW5lKSAtIGVuZHBvcykKICAgICAgICByZXR1cm4gbGluZVs6ZW5kcG9zXQoKICAgICNAcHJvcGVydHkKICAgIGRlZiBuZXdsaW5lcyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fZGVjb2Rlci5uZXdsaW5lcyBpZiBzZWxmLl9kZWNvZGVyIGVsc2UgTm9uZQoKCmNsYXNzIFN0cmluZ0lPKFRleHRJT1dyYXBwZXIpOgogICAgIyJUZXh0IEkvTyBpbXBsZW1lbnRhdGlvbiB1c2luZyBhbiBpbi1tZW1vcnkgYnVmZmVyLgoKICAgICNUaGUgaW5pdGlhbF92YWx1ZSBhcmd1bWVudCBzZXRzIHRoZSB2YWx1ZSBvZiBvYmplY3QuICBUaGUgbmV3bGluZQogICAgI2FyZ3VtZW50IGlzIGxpa2UgdGhlIG9uZSBvZiBUZXh0SU9XcmFwcGVyJ3MgY29uc3RydWN0b3IuCiAgICAjIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbml0aWFsX3ZhbHVlPSIiLCBuZXdsaW5lPSJcbiIpOgogICAgICAgICNzdXBlcihTdHJpbmdJTywgc2VsZikuX19pbml0X18oQnl0ZXNJTygpLCAgICAjZml4bWUKICAgICAgICBUZXh0SU9XcmFwcGVyLl9faW5pdF9fKHNlbGYsIEJ5dGVzSU8oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc9InV0Zi04IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzPSJzdHJpY3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdsaW5lPW5ld2xpbmUpCiAgICAgICAgIyBJc3N1ZSAjNTY0NTogbWFrZSB1bml2ZXJzYWwgbmV3bGluZXMgc2VtYW50aWNzIHRoZSBzYW1lIGFzIGluIHRoZQogICAgICAgICMgQyB2ZXJzaW9uLCBldmVuIHVuZGVyIFdpbmRvd3MuCiAgICAgICAgaWYgbmV3bGluZSBpcyBOb25lOgogICAgICAgICAgICBzZWxmLl93cml0ZXRyYW5zbGF0ZSA9IEZhbHNlCiAgICAgICAgaWYgaW5pdGlhbF92YWx1ZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoaW5pdGlhbF92YWx1ZSwgc3RyKToKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW5pdGlhbF92YWx1ZSBtdXN0IGJlIHN0ciBvciBOb25lLCBub3QgezB9IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JtYXQodHlwZShpbml0aWFsX3ZhbHVlKS5fX25hbWVfXykpCiAgICAgICAgICAgICAgICBpbml0aWFsX3ZhbHVlID0gc3RyKGluaXRpYWxfdmFsdWUpCiAgICAgICAgICAgIHNlbGYud3JpdGUoaW5pdGlhbF92YWx1ZSkKICAgICAgICAgICAgc2VsZi5zZWVrKDApCgogICAgZGVmIGdldHZhbHVlKHNlbGYpOgogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlci5nZXR2YWx1ZSgpLmRlY29kZShzZWxmLl9lbmNvZGluZywgc2VsZi5fZXJyb3JzKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICAjIFRleHRJT1dyYXBwZXIgdGVsbHMgdGhlIGVuY29kaW5nIGluIGl0cyByZXByLiBJbiBTdHJpbmdJTywKICAgICAgICAjIHRoYXQncyBhIGltcGxlbWVudGF0aW9uIGRldGFpbC4KICAgICAgICByZXR1cm4gb2JqZWN0Ll9fcmVwcl9fKHNlbGYpCgogICAgI0Bwcm9wZXJ0eQogICAgZGVmIGVycm9ycyhzZWxmKToKICAgICAgICByZXR1cm4gTm9uZQoKICAgICNAcHJvcGVydHkKICAgIGRlZiBlbmNvZGluZyhzZWxmKToKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBkZXRhY2goc2VsZik6CiAgICAgICAgIyBUaGlzIGRvZXNuJ3QgbWFrZSBzZW5zZSBvbiBTdHJpbmdJTy4KICAgICAgICBzZWxmLl91bnN1cHBvcnRlZCgiZGV0YWNoIikK',
'/Lib/_functools.py':'ZGVmIHBhcnRpYWwoZnVuYywgKmFyZ3MsICoqa2V5d29yZHMpOgogICAgZGVmIG5ld2Z1bmMoKmZhcmdzLCAqKmZrZXl3b3Jkcyk6CiAgICAgICAgbmV3a2V5d29yZHMgPSBrZXl3b3Jkcy5jb3B5KCkKICAgICAgICBuZXdrZXl3b3Jkcy51cGRhdGUoZmtleXdvcmRzKQogICAgICAgIHJldHVybiBmdW5jKCooYXJncyArIGZhcmdzKSwgKipuZXdrZXl3b3JkcykKICAgIG5ld2Z1bmMuZnVuYyA9IGZ1bmMKICAgIG5ld2Z1bmMuYXJncyA9IGFyZ3MKICAgIG5ld2Z1bmMua2V5d29yZHMgPSBrZXl3b3JkcwogICAgcmV0dXJuIG5ld2Z1bmMKCmRlZiByZWR1Y2UoZnVuYyxpdGVyYWJsZSxpbml0aWFsaXplcj1Ob25lKToKICAgIGFyZ3MgPSBpdGVyKGl0ZXJhYmxlKQogICAgaWYgaW5pdGlhbGl6ZXIgaXMgbm90IE5vbmU6CiAgICAgICAgcmVzID0gaW5pdGlhbGl6ZXIKICAgIGVsc2U6CiAgICAgICAgcmVzID0gbmV4dChhcmcpCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzID0gZnVuYyhyZXMsbmV4dChhcmdzKSkKICAgICAgICBleGNlcHQgU3RvcEl0ZXJhdGlvbjoKICAgICAgICAgICAgcmV0dXJuIHJlcwo=',
'/Lib/fnmatch.py':'IiIiRmlsZW5hbWUgbWF0Y2hpbmcgd2l0aCBzaGVsbCBwYXR0ZXJucy4NCg0KZm5tYXRjaChGSUxFTkFNRSwgUEFUVEVSTikgbWF0Y2hlcyBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsIGNvbnZlbnRpb24uDQpmbm1hdGNoY2FzZShGSUxFTkFNRSwgUEFUVEVSTikgYWx3YXlzIHRha2VzIGNhc2UgaW4gYWNjb3VudC4NCg0KVGhlIGZ1bmN0aW9ucyBvcGVyYXRlIGJ5IHRyYW5zbGF0aW5nIHRoZSBwYXR0ZXJuIGludG8gYSByZWd1bGFyDQpleHByZXNzaW9uLiAgVGhleSBjYWNoZSB0aGUgY29tcGlsZWQgcmVndWxhciBleHByZXNzaW9ucyBmb3Igc3BlZWQuDQoNClRoZSBmdW5jdGlvbiB0cmFuc2xhdGUoUEFUVEVSTikgcmV0dXJucyBhIHJlZ3VsYXIgZXhwcmVzc2lvbg0KY29ycmVzcG9uZGluZyB0byBQQVRURVJOLiAgKEl0IGRvZXMgbm90IGNvbXBpbGUgaXQuKQ0KIiIiDQppbXBvcnQgb3MNCmltcG9ydCBwb3NpeHBhdGgNCmltcG9ydCByZQ0KaW1wb3J0IGZ1bmN0b29scw0KDQpfX2FsbF9fID0gWyJmaWx0ZXIiLCAiZm5tYXRjaCIsICJmbm1hdGNoY2FzZSIsICJ0cmFuc2xhdGUiXQ0KDQpkZWYgZm5tYXRjaChuYW1lLCBwYXQpOg0KICAgICIiIlRlc3Qgd2hldGhlciBGSUxFTkFNRSBtYXRjaGVzIFBBVFRFUk4uDQoNCiAgICBQYXR0ZXJucyBhcmUgVW5peCBzaGVsbCBzdHlsZToNCg0KICAgICogICAgICAgbWF0Y2hlcyBldmVyeXRoaW5nDQogICAgPyAgICAgICBtYXRjaGVzIGFueSBzaW5nbGUgY2hhcmFjdGVyDQogICAgW3NlcV0gICBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgaW4gc2VxDQogICAgWyFzZXFdICBtYXRjaGVzIGFueSBjaGFyIG5vdCBpbiBzZXENCg0KICAgIEFuIGluaXRpYWwgcGVyaW9kIGluIEZJTEVOQU1FIGlzIG5vdCBzcGVjaWFsLg0KICAgIEJvdGggRklMRU5BTUUgYW5kIFBBVFRFUk4gYXJlIGZpcnN0IGNhc2Utbm9ybWFsaXplZA0KICAgIGlmIHRoZSBvcGVyYXRpbmcgc3lzdGVtIHJlcXVpcmVzIGl0Lg0KICAgIElmIHlvdSBkb24ndCB3YW50IHRoaXMsIHVzZSBmbm1hdGNoY2FzZShGSUxFTkFNRSwgUEFUVEVSTikuDQogICAgIiIiDQogICAgbmFtZSA9IG9zLnBhdGgubm9ybWNhc2UobmFtZSkNCiAgICBwYXQgPSBvcy5wYXRoLm5vcm1jYXNlKHBhdCkNCiAgICByZXR1cm4gZm5tYXRjaGNhc2UobmFtZSwgcGF0KQ0KDQpAZnVuY3Rvb2xzLmxydV9jYWNoZShtYXhzaXplPTI1MCwgdHlwZWQ9VHJ1ZSkNCmRlZiBfY29tcGlsZV9wYXR0ZXJuKHBhdCk6DQogICAgaWYgaXNpbnN0YW5jZShwYXQsIGJ5dGVzKToNCiAgICAgICAgcGF0X3N0ciA9IHN0cihwYXQsICdJU08tODg1OS0xJykNCiAgICAgICAgcmVzX3N0ciA9IHRyYW5zbGF0ZShwYXRfc3RyKQ0KICAgICAgICByZXMgPSBieXRlcyhyZXNfc3RyLCAnSVNPLTg4NTktMScpDQogICAgZWxzZToNCiAgICAgICAgcmVzID0gdHJhbnNsYXRlKHBhdCkNCiAgICByZXR1cm4gcmUuY29tcGlsZShyZXMpLm1hdGNoDQoNCmRlZiBmaWx0ZXIobmFtZXMsIHBhdCk6DQogICAgIiIiUmV0dXJuIHRoZSBzdWJzZXQgb2YgdGhlIGxpc3QgTkFNRVMgdGhhdCBtYXRjaCBQQVQuIiIiDQogICAgcmVzdWx0ID0gW10NCiAgICBwYXQgPSBvcy5wYXRoLm5vcm1jYXNlKHBhdCkNCiAgICBtYXRjaCA9IF9jb21waWxlX3BhdHRlcm4ocGF0KQ0KICAgIGlmIG9zLnBhdGggaXMgcG9zaXhwYXRoOg0KICAgICAgICAjIG5vcm1jYXNlIG9uIHBvc2l4IGlzIE5PUC4gT3B0aW1pemUgaXQgYXdheSBmcm9tIHRoZSBsb29wLg0KICAgICAgICBmb3IgbmFtZSBpbiBuYW1lczoNCiAgICAgICAgICAgIGlmIG1hdGNoKG5hbWUpOg0KICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobmFtZSkNCiAgICBlbHNlOg0KICAgICAgICBmb3IgbmFtZSBpbiBuYW1lczoNCiAgICAgICAgICAgIGlmIG1hdGNoKG9zLnBhdGgubm9ybWNhc2UobmFtZSkpOg0KICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobmFtZSkNCiAgICByZXR1cm4gcmVzdWx0DQoNCmRlZiBmbm1hdGNoY2FzZShuYW1lLCBwYXQpOg0KICAgICIiIlRlc3Qgd2hldGhlciBGSUxFTkFNRSBtYXRjaGVzIFBBVFRFUk4sIGluY2x1ZGluZyBjYXNlLg0KDQogICAgVGhpcyBpcyBhIHZlcnNpb24gb2YgZm5tYXRjaCgpIHdoaWNoIGRvZXNuJ3QgY2FzZS1ub3JtYWxpemUNCiAgICBpdHMgYXJndW1lbnRzLg0KICAgICIiIg0KICAgIG1hdGNoID0gX2NvbXBpbGVfcGF0dGVybihwYXQpDQogICAgcmV0dXJuIG1hdGNoKG5hbWUpIGlzIG5vdCBOb25lDQoNCg0KZGVmIHRyYW5zbGF0ZShwYXQpOg0KICAgICIiIlRyYW5zbGF0ZSBhIHNoZWxsIFBBVFRFUk4gdG8gYSByZWd1bGFyIGV4cHJlc3Npb24uDQoNCiAgICBUaGVyZSBpcyBubyB3YXkgdG8gcXVvdGUgbWV0YS1jaGFyYWN0ZXJzLg0KICAgICIiIg0KDQogICAgaSwgbiA9IDAsIGxlbihwYXQpDQogICAgcmVzID0gJycNCiAgICB3aGlsZSBpIDwgbjoNCiAgICAgICAgYyA9IHBhdFtpXQ0KICAgICAgICBpID0gaSsxDQogICAgICAgIGlmIGMgPT0gJyonOg0KICAgICAgICAgICAgcmVzID0gcmVzICsgJy4qJw0KICAgICAgICBlbGlmIGMgPT0gJz8nOg0KICAgICAgICAgICAgcmVzID0gcmVzICsgJy4nDQogICAgICAgIGVsaWYgYyA9PSAnWyc6DQogICAgICAgICAgICBqID0gaQ0KICAgICAgICAgICAgaWYgaiA8IG4gYW5kIHBhdFtqXSA9PSAnISc6DQogICAgICAgICAgICAgICAgaiA9IGorMQ0KICAgICAgICAgICAgaWYgaiA8IG4gYW5kIHBhdFtqXSA9PSAnXSc6DQogICAgICAgICAgICAgICAgaiA9IGorMQ0KICAgICAgICAgICAgd2hpbGUgaiA8IG4gYW5kIHBhdFtqXSAhPSAnXSc6DQogICAgICAgICAgICAgICAgaiA9IGorMQ0KICAgICAgICAgICAgaWYgaiA+PSBuOg0KICAgICAgICAgICAgICAgIHJlcyA9IHJlcyArICdcXFsnDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHN0dWZmID0gcGF0W2k6al0ucmVwbGFjZSgnXFwnLCdcXFxcJykNCiAgICAgICAgICAgICAgICBpID0gaisxDQogICAgICAgICAgICAgICAgaWYgc3R1ZmZbMF0gPT0gJyEnOg0KICAgICAgICAgICAgICAgICAgICBzdHVmZiA9ICdeJyArIHN0dWZmWzE6XQ0KICAgICAgICAgICAgICAgIGVsaWYgc3R1ZmZbMF0gPT0gJ14nOg0KICAgICAgICAgICAgICAgICAgICBzdHVmZiA9ICdcXCcgKyBzdHVmZg0KICAgICAgICAgICAgICAgIHJlcyA9ICclc1slc10nICUgKHJlcywgc3R1ZmYpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXMgPSByZXMgKyByZS5lc2NhcGUoYykNCiAgICByZXR1cm4gcmVzICsgJ1xaKD9tcyknDQo=',
'/Lib/errno.py':'IlRoaXMgbW9kdWxlIG1ha2VzIGF2YWlsYWJsZSBzdGFuZGFyZCBlcnJubyBzeXN0ZW0gc3ltYm9scy5cblxuVGhlIHZhbHVlIG9mIGVhY2ggc3ltYm9sIGlzIHRoZSBjb3JyZXNwb25kaW5nIGludGVnZXIgdmFsdWUsXG5lLmcuLCBvbiBtb3N0IHN5c3RlbXMsIGVycm5vLkVOT0VOVCBlcXVhbHMgdGhlIGludGVnZXIgMi5cblxuVGhlIGRpY3Rpb25hcnkgZXJybm8uZXJyb3Jjb2RlIG1hcHMgbnVtZXJpYyBjb2RlcyB0byBzeW1ib2wgbmFtZXMsXG5lLmcuLCBlcnJuby5lcnJvcmNvZGVbMl0gY291bGQgYmUgdGhlIHN0cmluZyAnRU5PRU5UJy5cblxuU3ltYm9scyB0aGF0IGFyZSBub3QgcmVsZXZhbnQgdG8gdGhlIHVuZGVybHlpbmcgc3lzdGVtIGFyZSBub3QgZGVmaW5lZC5cblxuVG8gbWFwIGVycm9yIGNvZGVzIHRvIGVycm9yIG1lc3NhZ2VzLCB1c2UgdGhlIGZ1bmN0aW9uIG9zLnN0cmVycm9yKCksXG5lLmcuIG9zLnN0cmVycm9yKDIpIGNvdWxkIHJldHVybiAnTm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeScuIgoKRTJCSUcgPSA3CkVBQ0NFUyA9IDEzCkVBRERSSU5VU0UgPSA5OApFQUREUk5PVEFWQUlMID0gOTkKRUFEViA9IDY4CkVBRk5PU1VQUE9SVCA9IDk3CkVBR0FJTiA9IDExCkVBTFJFQURZID0gMTE0CkVCQURFID0gNTIKRUJBREYgPSA5CkVCQURGRCA9IDc3CkVCQURNU0cgPSA3NApFQkFEUiA9IDUzCkVCQURSUUMgPSA1NgpFQkFEU0xUID0gNTcKRUJGT05UID0gNTkKRUJVU1kgPSAxNgpFQ0hJTEQgPSAxMApFQ0hSTkcgPSA0NApFQ09NTSA9IDcwCkVDT05OQUJPUlRFRCA9IDEwMwpFQ09OTlJFRlVTRUQgPSAxMTEKRUNPTk5SRVNFVCA9IDEwNApFREVBRExLID0gMzUKRURFQURMT0NLID0gMzUKRURFU1RBRERSUkVRID0gODkKRURPTSA9IDMzCkVET1RET1QgPSA3MwpFRFFVT1QgPSAxMjIKRUVYSVNUID0gMTcKRUZBVUxUID0gMTQKRUZCSUcgPSAyNwpFSE9TVERPV04gPSAxMTIKRUhPU1RVTlJFQUNIID0gMTEzCkVJRFJNID0gNDMKRUlMU0VRID0gODQKRUlOUFJPR1JFU1MgPSAxMTUKRUlOVFIgPSA0CkVJTlZBTCA9IDIyCkVJTyA9IDUKRUlTQ09OTiA9IDEwNgpFSVNESVIgPSAyMQpFSVNOQU0gPSAxMjAKRUwySExUID0gNTEKRUwyTlNZTkMgPSA0NQpFTDNITFQgPSA0NgpFTDNSU1QgPSA0NwpFTElCQUNDID0gNzkKRUxJQkJBRCA9IDgwCkVMSUJFWEVDID0gODMKRUxJQk1BWCA9IDgyCkVMSUJTQ04gPSA4MQpFTE5STkcgPSA0OApFTE9PUCA9IDQwCkVNRklMRSA9IDI0CkVNTElOSyA9IDMxCkVNU0dTSVpFID0gOTAKRU1VTFRJSE9QID0gNzIKRU5BTUVUT09MT05HID0gMzYKRU5BVkFJTCA9IDExOQpFTkVURE9XTiA9IDEwMApFTkVUUkVTRVQgPSAxMDIKRU5FVFVOUkVBQ0ggPSAxMDEKRU5GSUxFID0gMjMKRU5PQU5PID0gNTUKRU5PQlVGUyA9IDEwNQpFTk9DU0kgPSA1MApFTk9EQVRBID0gNjEKRU5PREVWID0gMTkKRU5PRU5UID0gMgpFTk9FWEVDID0gOApFTk9MQ0sgPSAzNwpFTk9MSU5LID0gNjcKRU5PTUVNID0gMTIKRU5PTVNHID0gNDIKRU5PTkVUID0gNjQKRU5PUEtHID0gNjUKRU5PUFJPVE9PUFQgPSA5MgpFTk9TUEMgPSAyOApFTk9TUiA9IDYzCkVOT1NUUiA9IDYwCkVOT1NZUyA9IDM4CkVOT1RCTEsgPSAxNQpFTk9UQ09OTiA9IDEwNwpFTk9URElSID0gMjAKRU5PVEVNUFRZID0gMzkKRU5PVE5BTSA9IDExOApFTk9UU09DSyA9IDg4CkVOT1RUWSA9IDI1CkVOT1RVTklRID0gNzYKRU5YSU8gPSA2CkVPUE5PVFNVUFAgPSA5NQpFT1ZFUkZMT1cgPSA3NQpFUEVSTSA9IDEKRVBGTk9TVVBQT1JUID0gOTYKRVBJUEUgPSAzMgpFUFJPVE8gPSA3MQpFUFJPVE9OT1NVUFBPUlQgPSA5MwpFUFJPVE9UWVBFID0gOTEKRVJBTkdFID0gMzQKRVJFTUNIRyA9IDc4CkVSRU1PVEUgPSA2NgpFUkVNT1RFSU8gPSAxMjEKRVJFU1RBUlQgPSA4NQpFUk9GUyA9IDMwCkVTSFVURE9XTiA9IDEwOApFU09DS1ROT1NVUFBPUlQgPSA5NApFU1BJUEUgPSAyOQpFU1JDSCA9IDMKRVNSTU5UID0gNjkKRVNUQUxFID0gMTE2CkVTVFJQSVBFID0gODYKRVRJTUUgPSA2MgpFVElNRURPVVQgPSAxMTAKRVRPT01BTllSRUZTID0gMTA5CkVUWFRCU1kgPSAyNgpFVUNMRUFOID0gMTE3CkVVTkFUQ0ggPSA0OQpFVVNFUlMgPSA4NwpFV09VTERCTE9DSyA9IDExCkVYREVWID0gMTgKRVhGVUxMID0gNTQKIyBlcnJvcmNvZGUK',
'/Lib/itertools.py':'aW1wb3J0IG9wZXJhdG9yCgpjbGFzcyBhY2N1bXVsYXRlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZXJhYmxlLCBmdW5jID0gb3BlcmF0b3IuYWRkKToKICAgICAgICBzZWxmLml0ID0gaXRlcihpdGVyYWJsZSkKICAgICAgICBzZWxmLl90b3RhbCA9IE5vbmUKICAgICAgICBzZWxmLmZ1bmMgPSBmdW5jCiAgICAgICAgCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYuX3RvdGFsOgogICAgICAgICAgICBzZWxmLl90b3RhbCA9IG5leHQoc2VsZi5pdCkKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3RvdGFsCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZWxlbWVudCA9IG5leHQoc2VsZi5pdCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5fdG90YWwgPSBzZWxmLmZ1bmMoc2VsZi5fdG90YWwsIGVsZW1lbnQpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidW5zdXBwb3J0ZWQgb3BlcmFuZCB0eXBlIikKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3RvdGFsCiAgICAgICAgICAgICAgICAKIyMgQWRhcHRlZCBmcm9tOgojIyBodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTM0CmNsYXNzIGNoYWluOgogICAgZGVmIF9faW5pdF9fKHNlbGYsICppdGVyYWJsZXMpOgogICAgICAgIHNlbGYuX2l0ZXJhYmxlc19pdGVyID0gaXRlcihtYXAoaXRlciwgaXRlcmFibGVzKSkKICAgICAgICAjIGxpdHRsZSB0cmljayBmb3IgdGhlIGZpcnN0IGNoYWluLl9fbmV4dF9fKCkgY2FsbAogICAgICAgIHNlbGYuX2N1cl9pdGVyYWJsZV9pdGVyID0gaXRlcihbXSkKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKICAgIAogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KHNlbGYuX2N1cl9pdGVyYWJsZV9pdGVyKQogICAgICAgICAgICBleGNlcHQgU3RvcEl0ZXJhdGlvbjoKICAgICAgICAgICAgICAgIHNlbGYuX2N1cl9pdGVyYWJsZV9pdGVyID0gbmV4dChzZWxmLl9pdGVyYWJsZXNfaXRlcikKICAgIAogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbV9pdGVyYWJsZShjbHMsIGl0ZXJhYmxlKToKICAgICAgICBmb3IgaXQgaW4gaXRlcmFibGU6CiAgICAgICAgICAgIGZvciBlbGVtZW50IGluIGl0OgogICAgICAgICAgICAgICAgeWllbGQgZWxlbWVudAogICAgICAgICAgICAgICAgCmNsYXNzIGNvbWJpbmF0aW9uczoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZSwgcik6CiAgICAgICAgc2VsZi5wb29sID0gdHVwbGUoaXRlcmFibGUpCiAgICAgICAgc2VsZi5uID0gbGVuKHNlbGYucG9vbCkKICAgICAgICBzZWxmLnIgPSByCiAgICAgICAgc2VsZi5pbmRpY2VzID0gbGlzdChyYW5nZShzZWxmLnIpKQogICAgICAgIHNlbGYuemVybyA9IEZhbHNlCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYuciA+IHNlbGYubjoKICAgICAgICAgICAgcmFpc2UgU3RvcEl0ZXJhdGlvbgogICAgICAgIGlmIG5vdCBzZWxmLnplcm86CiAgICAgICAgICAgIHNlbGYuemVybyA9IFRydWUKICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYucG9vbFtpXSBmb3IgaSBpbiBzZWxmLmluZGljZXMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZm9yIGkgaW4gcmV2ZXJzZWQocmFuZ2Uoc2VsZi5yKSk6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5pbmRpY2VzW2ldICE9IGkgKyBzZWxmLm4gLSBzZWxmLnI6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBzZWxmLmluZGljZXNbaV0gKz0gMQogICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UoaSsxLCBzZWxmLnIpOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kaWNlc1tqXSA9IHNlbGYuaW5kaWNlc1tqLTFdICsgMQogICAgICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYucG9vbFtpXSBmb3IgaSBpbiBzZWxmLmluZGljZXMpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICAgICAgICAgIApjbGFzcyBjb21iaW5hdGlvbnNfd2l0aF9yZXBsYWNlbWVudDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZSwgcik6CiAgICAgICAgc2VsZi5wb29sID0gdHVwbGUoaXRlcmFibGUpCiAgICAgICAgc2VsZi5uID0gbGVuKHNlbGYucG9vbCkKICAgICAgICBzZWxmLnIgPSByCiAgICAgICAgc2VsZi5pbmRpY2VzID0gWzBdICogc2VsZi5yCiAgICAgICAgc2VsZi56ZXJvID0gRmFsc2UKICAgICAgICAKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgogICAgCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYubiBhbmQgc2VsZi5yOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgaWYgbm90IHNlbGYuemVybzoKICAgICAgICAgICAgc2VsZi56ZXJvID0gVHJ1ZQogICAgICAgICAgICByZXR1cm4gdHVwbGUoc2VsZi5wb29sW2ldIGZvciBpIGluIHNlbGYuaW5kaWNlcykKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmb3IgaSBpbiByZXZlcnNlZChyYW5nZShzZWxmLnIpKToKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLmluZGljZXNbaV0gIT0gc2VsZi5uIC0gMToKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIHNlbGYuaW5kaWNlc1tpOl0gPSBbc2VsZi5pbmRpY2VzW2ldICsgMV0gKiAoc2VsZi5yIC0gaSkKICAgICAgICAgICAgICAgIHJldHVybiB0dXBsZShzZWxmLnBvb2xbaV0gZm9yIGkgaW4gc2VsZi5pbmRpY2VzKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgICAgICAgICAKIyMgTGl0ZXJhbGx5IGNvcGllZCBmcm9tCiMjaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvYzFhYTc0YzA2ZTg2L2xpYl9weXB5L2l0ZXJ0b29scy5weSNjbC02MyAKY2xhc3MgY29tcHJlc3M6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZGF0YSwgc2VsZWN0b3JzKToKICAgICAgICBzZWxmLmRhdGEgPSBpdGVyKGRhdGEpCiAgICAgICAgc2VsZi5zZWxlY3RvcnMgPSBpdGVyKHNlbGVjdG9ycykKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgbmV4dF9pdGVtID0gbmV4dChzZWxmLmRhdGEpCiAgICAgICAgICAgIG5leHRfc2VsZWN0b3IgPSBuZXh0KHNlbGYuc2VsZWN0b3JzKQogICAgICAgICAgICBpZiBib29sKG5leHRfc2VsZWN0b3IpOgogICAgICAgICAgICAgICAgcmV0dXJuIG5leHRfaXRlbQogICAgICAgICAgICAgICAgCiMjIEFkYXB0ZWQgZnJvbQojI2h0dHBzOi8vYml0YnVja2V0Lm9yZy9weXB5L3B5cHkvc3JjL2MxYWE3NGMwNmU4Ni9saWJfcHlweS9pdGVydG9vbHMucHkjY2wtNzkKIyMgSSBtaW1pY2tlZCB0aGUgPiBweXRob24zLjEgYmVoYXZpb3IKY2xhc3MgY291bnQ6CiAgICAiIiIKICAgIElucHV0IGlzIGFuIGludCBvciBhIGZsb2F0LiBUaGUgb3JpZ2luYWwgUHl0aG9uIDMgaW1wbGVtZW50YXRpb24KICAgIGluY2x1ZGVzIGFsc28gY29tcGxleCBudW1iZXJzLi4uIGJ1dCBpdCBzdGlsbCBpcyBub3QgaW1wbGVtZW50ZWQgCiAgICBpbiBCcnl0aG9uIGFzIGNvbXBsZXggdHlwZSBpcyBOb3RJbXBsZW1lbnRlZAogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RhcnQgPSAwLCBzdGVwID0gMSk6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc3RhcnQsIChpbnQsIGZsb2F0KSk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignYSBudW1iZXIgaXMgcmVxdWlyZWQnKQogICAgICAgIHNlbGYudGltZXMgPSBzdGFydCAtIHN0ZXAKICAgICAgICBzZWxmLnN0ZXAgPSBzdGVwCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHNlbGYudGltZXMgKz0gc2VsZi5zdGVwCiAgICAgICAgcmV0dXJuIHNlbGYudGltZXMKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICdjb3VudCglZCknICUgKHNlbGYudGltZXMgKyBzZWxmLnN0ZXApCgojIyBMaXRlcmFsbHkgY29waWVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTExMiAgICAgICAgCmNsYXNzIGN5Y2xlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZXJhYmxlKToKICAgICAgICBzZWxmLl9jdXJfaXRlciA9IGl0ZXIoaXRlcmFibGUpCiAgICAgICAgc2VsZi5fc2F2ZWQgPSBbXQogICAgICAgIHNlbGYuX211c3Rfc2F2ZSA9IFRydWUKICAgICAgICAKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG5leHRfZWx0ID0gbmV4dChzZWxmLl9jdXJfaXRlcikKICAgICAgICAgICAgaWYgc2VsZi5fbXVzdF9zYXZlOgogICAgICAgICAgICAgICAgc2VsZi5fc2F2ZWQuYXBwZW5kKG5leHRfZWx0KQogICAgICAgIGV4Y2VwdCBTdG9wSXRlcmF0aW9uOgogICAgICAgICAgICBzZWxmLl9jdXJfaXRlciA9IGl0ZXIoc2VsZi5fc2F2ZWQpCiAgICAgICAgICAgIG5leHRfZWx0ID0gbmV4dChzZWxmLl9jdXJfaXRlcikKICAgICAgICAgICAgc2VsZi5fbXVzdF9zYXZlID0gRmFsc2UKICAgICAgICByZXR1cm4gbmV4dF9lbHQKICAgICAgICAKIyMgTGl0ZXJhbGx5IGNvcGllZCBmcm9tCiMjaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvYzFhYTc0YzA2ZTg2L2xpYl9weXB5L2l0ZXJ0b29scy5weSNjbC0xNDkKY2xhc3MgZHJvcHdoaWxlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHByZWRpY2F0ZSwgaXRlcmFibGUpOgogICAgICAgIHNlbGYuX3ByZWRpY2F0ZSA9IHByZWRpY2F0ZQogICAgICAgIHNlbGYuX2l0ZXIgPSBpdGVyKGl0ZXJhYmxlKQogICAgICAgIHNlbGYuX2Ryb3BwZWQgPSBGYWxzZQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICB2YWx1ZSA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICBpZiBzZWxmLl9kcm9wcGVkOgogICAgICAgICAgICByZXR1cm4gdmFsdWUKICAgICAgICB3aGlsZSBzZWxmLl9wcmVkaWNhdGUodmFsdWUpOgogICAgICAgICAgICB2YWx1ZSA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICBzZWxmLl9kcm9wcGVkID0gVHJ1ZQogICAgICAgIHJldHVybiB2YWx1ZQogICAgICAgIAojIyBBZGFwdGVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTI2MQpjbGFzcyBmaWx0ZXJmYWxzZToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwcmVkaWNhdGUsIGl0ZXJhYmxlKToKICAgICAgICAjIE1ha2Ugc3VyZSBpdGVyYWJsZSAqSVMqIGl0ZXJhYmxlCiAgICAgICAgc2VsZi5faXRlciA9IGl0ZXIoaXRlcmFibGUpCiAgICAgICAgaWYgcHJlZGljYXRlIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuX3ByZWRpY2F0ZSA9IGJvb2wKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9wcmVkaWNhdGUgPSBwcmVkaWNhdGUKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICBuZXh0X2VsdCA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5fcHJlZGljYXRlKG5leHRfZWx0KToKICAgICAgICAgICAgICAgIHJldHVybiBuZXh0X2VsdAogICAgICAgICAgICBuZXh0X2VsdCA9IG5leHQoc2VsZi5faXRlcikKCmNsYXNzIGdyb3VwYnk6CiAgICAjIyBUTy1ETwogICAgcGFzcwogICAgICAgICAgCiMjIGFkYXB0ZWQgZnJvbQojI2h0dHBzOi8vYml0YnVja2V0Lm9yZy9weXB5L3B5cHkvc3JjL2MxYWE3NGMwNmU4Ni9saWJfcHlweS9pdGVydG9vbHMucHkjY2wtMzIzCmNsYXNzIGlzbGljZToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZSwgKmFyZ3MpOgogICAgICAgIHMgPSBzbGljZSgqYXJncykKICAgICAgICBzZWxmLnN0YXJ0LCBzZWxmLnN0b3AsIHNlbGYuc3RlcCA9IHMuc3RhcnQgb3IgMCwgcy5zdG9wLCBzLnN0ZXAKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShzZWxmLnN0YXJ0LCBpbnQpOgogICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlN0YXJ0IGFyZ3VtZW50IG11c3QgYmUgYW4gaW50ZWdlciIpCiAgICAgICAgaWYgc2VsZi5zdG9wICE9IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKHNlbGYuc3RvcCwgaW50KToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiU3RvcCBhcmd1bWVudCBtdXN0IGJlIGFuIGludGVnZXIgb3IgTm9uZSIpCiAgICAgICAgaWYgc2VsZi5zdGVwIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuc3RlcCA9IDEKICAgICAgICBpZiBzZWxmLnN0YXJ0PDAgb3IgKHNlbGYuc3RvcCAhPSBOb25lIGFuZCBzZWxmLnN0b3A8MAogICAgICAgICAgICkgb3Igc2VsZi5zdGVwPD0wOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbmRpY2VzIGZvciBpc2xpY2UoKSBtdXN0IGJlIHBvc2l0aXZlIikKICAgICAgICBzZWxmLml0ID0gaXRlcihpdGVyYWJsZSkKICAgICAgICBzZWxmLmRvbmV4dCA9IE5vbmUKICAgICAgICBzZWxmLmNudCA9IDAKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgbmV4dGluZGV4ID0gc2VsZi5zdGFydAogICAgICAgIGlmIHNlbGYuc3RvcCAhPSBOb25lIGFuZCBuZXh0aW5kZXggPj0gc2VsZi5zdG9wOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgd2hpbGUgc2VsZi5jbnQgPD0gbmV4dGluZGV4OgogICAgICAgICAgICBuZXh0aXRlbSA9IG5leHQoc2VsZi5pdCkKICAgICAgICAgICAgc2VsZi5jbnQgKz0gMQogICAgICAgIHNlbGYuc3RhcnQgKz0gc2VsZi5zdGVwIAogICAgICAgIHJldHVybiBuZXh0aXRlbQogICAgICAgIApjbGFzcyBwZXJtdXRhdGlvbnM6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlcmFibGUsIHIgPSBOb25lKToKICAgICAgICBzZWxmLnBvb2wgPSB0dXBsZShpdGVyYWJsZSkKICAgICAgICBzZWxmLm4gPSBsZW4oc2VsZi5wb29sKQogICAgICAgIHNlbGYuciA9IHNlbGYubiBpZiByIGlzIE5vbmUgZWxzZSByCiAgICAgICAgc2VsZi5pbmRpY2VzID0gbGlzdChyYW5nZShzZWxmLm4pKQogICAgICAgIHNlbGYuY3ljbGVzID0gbGlzdChyYW5nZShzZWxmLm4sIHNlbGYubiAtIHIsIC0xKSkKICAgICAgICBzZWxmLnplcm8gPSBGYWxzZQogICAgICAgIHNlbGYuc3RvcCA9IEZhbHNlCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIGluZGljZXMgPSBzZWxmLmluZGljZXMKICAgICAgICBpZiBzZWxmLnIgPiBzZWxmLm46CiAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICBpZiBub3Qgc2VsZi56ZXJvOgogICAgICAgICAgICBzZWxmLnplcm8gPSBUcnVlCiAgICAgICAgICAgIHJldHVybiB0dXBsZShzZWxmLnBvb2xbaV0gZm9yIGkgaW4gaW5kaWNlc1s6c2VsZi5yXSkKICAgICAgICAKICAgICAgICBpID0gc2VsZi5yIC0gMQogICAgICAgIHdoaWxlIGkgPj0gMDoKICAgICAgICAgICAgaiA9IHNlbGYuY3ljbGVzW2ldIC0gMQogICAgICAgICAgICBpZiBqID4gMDoKICAgICAgICAgICAgICAgIHNlbGYuY3ljbGVzW2ldID0gagogICAgICAgICAgICAgICAgaW5kaWNlc1tpXSwgaW5kaWNlc1stal0gPSBpbmRpY2VzWy1qXSwgaW5kaWNlc1tpXQogICAgICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYucG9vbFtpXSBmb3IgaSBpbiBpbmRpY2VzWzpzZWxmLnJdKQogICAgICAgICAgICBzZWxmLmN5Y2xlc1tpXSA9IGxlbihpbmRpY2VzKSAtIGkKICAgICAgICAgICAgbjEgPSBsZW4oaW5kaWNlcykgLSAxCiAgICAgICAgICAgIGFzc2VydCBuMSA+PSAwCiAgICAgICAgICAgIG51bSA9IGluZGljZXNbaV0KICAgICAgICAgICAgZm9yIGsgaW4gcmFuZ2UoaSwgbjEpOgogICAgICAgICAgICAgICAgaW5kaWNlc1trXSA9IGluZGljZXNbaysxXQogICAgICAgICAgICBpbmRpY2VzW24xXSA9IG51bQogICAgICAgICAgICBpIC09IDEKICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCgojIyBhZGFwdGVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTM5MiAgICAgICAgCmNsYXNzIHByb2R1Y3Q6CiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3cpOgogICAgICAgIGlmIGxlbihrdykgPiAxOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInByb2R1Y3QoKSB0YWtlcyBhdCBtb3N0IDEgYXJndW1lbnQgKCVkIGdpdmVuKSIgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbihrdykpCiAgICAgICAgc2VsZi5yZXBlYXQgPSBrdy5nZXQoJ3JlcGVhdCcsIDEpCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc2VsZi5yZXBlYXQsIGludCk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW50ZWdlciBhcmd1bWVudCBleHBlY3RlZCwgZ290ICVzIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZShzZWxmLnJlcGVhdCkpCiAgICAgICAgc2VsZi5nZWFycyA9IFt4IGZvciB4IGluIGFyZ3NdICogc2VsZi5yZXBlYXQKICAgICAgICBzZWxmLm51bV9nZWFycyA9IGxlbihzZWxmLmdlYXJzKQogICAgICAgICMgaW5pdGlhbGl6YXRpb24gb2YgaW5kaWNpZXMgdG8gbG9vcCBvdmVyCiAgICAgICAgc2VsZi5pbmRpY2llcyA9IFsoMCwgbGVuKHNlbGYuZ2VhcnNbeF0pKQogICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gcmFuZ2UoMCwgc2VsZi5udW1fZ2VhcnMpXQogICAgICAgIHNlbGYuY29udCA9IFRydWUKICAgICAgICBzZWxmLnplcm8gPSBGYWxzZQoKICAgIGRlZiByb2xsX2dlYXJzKHNlbGYpOgogICAgICAgICMgU3RhcnRpbmcgZnJvbSB0aGUgZW5kIG9mIHRoZSBnZWFyIGluZGljaWVzIHdvcmsgdG8gdGhlIGZyb250CiAgICAgICAgIyBpbmNyZW1lbnRpbmcgdGhlIGdlYXIgdW50aWwgdGhlIGxpbWl0IGlzIHJlYWNoZWQuIFdoZW4gdGhlIGxpbWl0CiAgICAgICAgIyBpcyByZWFjaGVkIGNhcnJ5IG9wZXJhdGlvbiB0byB0aGUgbmV4dCBnZWFyCiAgICAgICAgc2hvdWxkX2NhcnJ5ID0gVHJ1ZQogICAgICAgIGZvciBuIGluIHJhbmdlKDAsIHNlbGYubnVtX2dlYXJzKToKICAgICAgICAgICAgbnRoX2dlYXIgPSBzZWxmLm51bV9nZWFycyAtIG4gLSAxCiAgICAgICAgICAgIGlmIHNob3VsZF9jYXJyeToKICAgICAgICAgICAgICAgIGNvdW50LCBsaW0gPSBzZWxmLmluZGljaWVzW250aF9nZWFyXQogICAgICAgICAgICAgICAgY291bnQgKz0gMQogICAgICAgICAgICAgICAgaWYgY291bnQgPT0gbGltIGFuZCBudGhfZ2VhciA9PSAwOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY29udCA9IEZhbHNlCiAgICAgICAgICAgICAgICBpZiBjb3VudCA9PSBsaW06CiAgICAgICAgICAgICAgICAgICAgc2hvdWxkX2NhcnJ5ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMAogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzaG91bGRfY2FycnkgPSBGYWxzZQogICAgICAgICAgICAgICAgc2VsZi5pbmRpY2llc1tudGhfZ2Vhcl0gPSAoY291bnQsIGxpbSkgIAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgaWYgc2VsZi56ZXJvOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgaWYgc2VsZi5yZXBlYXQgPiAwOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5jb250OgogICAgICAgICAgICAgICAgcmFpc2UgU3RvcEl0ZXJhdGlvbgogICAgICAgICAgICBsID0gW10KICAgICAgICAgICAgZm9yIHggaW4gcmFuZ2UoMCwgc2VsZi5udW1fZ2VhcnMpOgogICAgICAgICAgICAgICAgaW5kZXgsIGxpbWl0ID0gc2VsZi5pbmRpY2llc1t4XQogICAgICAgICAgICAgICAgbC5hcHBlbmQoc2VsZi5nZWFyc1t4XVtpbmRleF0pCiAgICAgICAgICAgIHNlbGYucm9sbF9nZWFycygpCiAgICAgICAgICAgIHJldHVybiB0dXBsZShsKQogICAgICAgIGVsaWYgc2VsZi5yZXBlYXQgPT0gMDoKICAgICAgICAgICAgc2VsZi56ZXJvID0gVHJ1ZQogICAgICAgICAgICByZXR1cm4gKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJyZXBlYXQgYXJndW1lbnQgY2Fubm90IGJlIG5lZ2F0aXZlIikKICAgICAgICAgICAgCiMjIExpdGVyYWxseSBjb3BpZWQgZnJvbQojI2h0dHBzOi8vYml0YnVja2V0Lm9yZy9weXB5L3B5cHkvc3JjL2MxYWE3NGMwNmU4Ni9saWJfcHlweS9pdGVydG9vbHMucHkjY2wtNDQxCmNsYXNzIHJlcGVhdDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvYmosIHRpbWVzPU5vbmUpOgogICAgICAgIHNlbGYuX29iaiA9IG9iagogICAgICAgIGlmIHRpbWVzIGlzIG5vdCBOb25lOgogICAgICAgICAgICByYW5nZSh0aW1lcykgIyBSYWlzZSBhIFR5cGVFcnJvcgogICAgICAgICAgICBpZiB0aW1lcyA8IDA6CiAgICAgICAgICAgICAgICB0aW1lcyA9IDAKICAgICAgICBzZWxmLl90aW1lcyA9IHRpbWVzCiAgICAgICAgCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgIyBfX25leHRfXygpICpuZWVkKiB0byBkZWNyZW1lbnQgc2VsZi5fdGltZXMgd2hlbiBjb25zdW1lZAogICAgICAgIGlmIHNlbGYuX3RpbWVzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBzZWxmLl90aW1lcyA8PSAwOiAKICAgICAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24oKQogICAgICAgICAgICBzZWxmLl90aW1lcyAtPSAxCiAgICAgICAgcmV0dXJuIHNlbGYuX29iagoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLl90aW1lcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmV0dXJuICdyZXBlYXQoJXIsICVyKScgJSAoc2VsZi5fb2JqLCBzZWxmLl90aW1lcykKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gJ3JlcGVhdCglciknICUgKHNlbGYuX29iaiwpCgogICAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgICAgaWYgc2VsZi5fdGltZXMgPT0gLTEgb3Igc2VsZi5fdGltZXMgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJsZW4oKSBvZiB1bmlzemVkIG9iamVjdCIpCiAgICAgICAgcmV0dXJuIHNlbGYuX3RpbWVzCgojIyBBZGFwdGVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTQ4OQpjbGFzcyBzdGFybWFwKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZnVuY3Rpb24sIGl0ZXJhYmxlKToKICAgICAgICBzZWxmLl9mdW5jID0gZnVuY3Rpb24KICAgICAgICBzZWxmLl9pdGVyID0gaXRlcihpdGVyYWJsZSkKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgdCA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICByZXR1cm4gc2VsZi5fZnVuYygqdCkKICAgICAgICAKIyMgTGl0ZXJhbGx5IGNvcGllZCBmcm9tCiMjaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvYzFhYTc0YzA2ZTg2L2xpYl9weXB5L2l0ZXJ0b29scy5weSNjbC01MjAKY2xhc3MgdGFrZXdoaWxlKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgcHJlZGljYXRlLCBpdGVyYWJsZSk6CiAgICAgICAgc2VsZi5fcHJlZGljYXRlID0gcHJlZGljYXRlCiAgICAgICAgc2VsZi5faXRlciA9IGl0ZXIoaXRlcmFibGUpCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHZhbHVlID0gbmV4dChzZWxmLl9pdGVyKQogICAgICAgIGlmIG5vdCBzZWxmLl9wcmVkaWNhdGUodmFsdWUpOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uKCkKICAgICAgICByZXR1cm4gdmFsdWUKCiMjIEFsbW9zdCBsaXRlcmFsIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTU0NwpjbGFzcyBUZWVEYXRhKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlcmF0b3IpOgogICAgICAgIHNlbGYuZGF0YSA9IFtdCiAgICAgICAgc2VsZi5faXRlciA9IGl0ZXJhdG9yCgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGkpOgogICAgICAgICMgaXRlcmF0ZXMgdW50aWwgJ2knIGlmIG5vdCBkb25lIHlldAogICAgICAgIHdoaWxlIGk+PSBsZW4oc2VsZi5kYXRhKToKICAgICAgICAgICAgc2VsZi5kYXRhLmFwcGVuZChuZXh0KHNlbGYuX2l0ZXIpKQogICAgICAgIHJldHVybiBzZWxmLmRhdGFbaV0KCgpjbGFzcyBUZWVPYmplY3Qob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZT1Ob25lLCB0ZWVfZGF0YT1Ob25lKToKICAgICAgICBpZiB0ZWVfZGF0YToKICAgICAgICAgICAgc2VsZi50ZWVfZGF0YSA9IHRlZV9kYXRhCiAgICAgICAgICAgIHNlbGYucG9zID0gMAogICAgICAgICMgPD0+IENvcHkgY29uc3RydWN0b3IKICAgICAgICBlbGlmIGlzaW5zdGFuY2UoaXRlcmFibGUsIFRlZU9iamVjdCk6CiAgICAgICAgICAgIHNlbGYudGVlX2RhdGEgPSBpdGVyYWJsZS50ZWVfZGF0YQogICAgICAgICAgICBzZWxmLnBvcyA9IGl0ZXJhYmxlLnBvcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYudGVlX2RhdGEgPSBUZWVEYXRhKGl0ZXIoaXRlcmFibGUpKQogICAgICAgICAgICBzZWxmLnBvcyA9IDAKICAgICAgICAgICAgCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgZGF0YSA9IHNlbGYudGVlX2RhdGFbc2VsZi5wb3NdCiAgICAgICAgc2VsZi5wb3MgKz0gMQogICAgICAgIHJldHVybiBkYXRhCiAgICAKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKCmRlZiB0ZWUoaXRlcmFibGUsIG49Mik6CiAgICBpZiBpc2luc3RhbmNlKGl0ZXJhYmxlLCBUZWVPYmplY3QpOgogICAgICAgIHJldHVybiB0dXBsZShbaXRlcmFibGVdICsKICAgICAgICBbVGVlT2JqZWN0KHRlZV9kYXRhPWl0ZXJhYmxlLnRlZV9kYXRhKSBmb3IgaSBpbiByYW5nZShuIC0gMSldKQogICAgdGVlX2RhdGEgPSBUZWVEYXRhKGl0ZXIoaXRlcmFibGUpKQogICAgcmV0dXJuIHR1cGxlKFtUZWVPYmplY3QodGVlX2RhdGE9dGVlX2RhdGEpIGZvciBpIGluIHJhbmdlKG4pXSkKCmNsYXNzIHppcF9sb25nZXN0OgogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCBmaWxsdmFsdWUgPSBOb25lKToKICAgICAgICBzZWxmLmFyZ3MgPSBhcmdzCiAgICAgICAgc2VsZi5maWxsdmFsdWUgPSBmaWxsdmFsdWUKICAgICAgICBzZWxmLm1heF9sZW5ndGggPSBtYXgoW2xlbihhcmcpIGZvciBhcmcgaW4gc2VsZi5hcmdzXSkKICAgICAgICBzZWxmLnVuaXRzID0gbGVuKGFyZ3MpCiAgICAgICAgc2VsZi5jb3VudGVyID0gMAogICAgCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKICAgIAogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY291bnRlciA9PSBzZWxmLm1heF9sZW5ndGg6CiAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICBlbHNlOgogICAgICAgICAgICB0ZW1wID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2Uoc2VsZi51bml0cyk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgdGVtcC5hcHBlbmQoc2VsZi5hcmdzW2ldW3NlbGYuY291bnRlcl0pCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgdGVtcC5hcHBlbmQoc2VsZi5maWxsdmFsdWUpCiAgICAgICAgICAgIHNlbGYuY291bnRlciA9IHNlbGYuY291bnRlciArIDEKICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHRlbXAp',
'/Lib/gc.py':'IiIiVGhpcyBtb2R1bGUgcHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBnYXJiYWdlIGNvbGxlY3RvciBmb3IgcmVmZXJlbmNlIGN5Y2xlcy4KCmVuYWJsZSgpIC0tIEVuYWJsZSBhdXRvbWF0aWMgZ2FyYmFnZSBjb2xsZWN0aW9uLgpkaXNhYmxlKCkgLS0gRGlzYWJsZSBhdXRvbWF0aWMgZ2FyYmFnZSBjb2xsZWN0aW9uLgppc2VuYWJsZWQoKSAtLSBSZXR1cm5zIHRydWUgaWYgYXV0b21hdGljIGNvbGxlY3Rpb24gaXMgZW5hYmxlZC4KY29sbGVjdCgpIC0tIERvIGEgZnVsbCBjb2xsZWN0aW9uIHJpZ2h0IG5vdy4KZ2V0X2NvdW50KCkgLS0gUmV0dXJuIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24gY291bnRzLgpzZXRfZGVidWcoKSAtLSBTZXQgZGVidWdnaW5nIGZsYWdzLgpnZXRfZGVidWcoKSAtLSBHZXQgZGVidWdnaW5nIGZsYWdzLgpzZXRfdGhyZXNob2xkKCkgLS0gU2V0IHRoZSBjb2xsZWN0aW9uIHRocmVzaG9sZHMuCmdldF90aHJlc2hvbGQoKSAtLSBSZXR1cm4gdGhlIGN1cnJlbnQgdGhlIGNvbGxlY3Rpb24gdGhyZXNob2xkcy4KZ2V0X29iamVjdHMoKSAtLSBSZXR1cm4gYSBsaXN0IG9mIGFsbCBvYmplY3RzIHRyYWNrZWQgYnkgdGhlIGNvbGxlY3Rvci4KaXNfdHJhY2tlZCgpIC0tIFJldHVybnMgdHJ1ZSBpZiBhIGdpdmVuIG9iamVjdCBpcyB0cmFja2VkLgpnZXRfcmVmZXJyZXJzKCkgLS0gUmV0dXJuIHRoZSBsaXN0IG9mIG9iamVjdHMgdGhhdCByZWZlciB0byBhbiBvYmplY3QuCmdldF9yZWZlcmVudHMoKSAtLSBSZXR1cm4gdGhlIGxpc3Qgb2Ygb2JqZWN0cyB0aGF0IGFuIG9iamVjdCByZWZlcnMgdG8uCiIiIgoKCkRFQlVHX0NPTExFQ1RBQkxFID0gMgoKREVCVUdfTEVBSyA9IDM4CgpERUJVR19TQVZFQUxMID0gMzIKCkRFQlVHX1NUQVRTID0gMQoKREVCVUdfVU5DT0xMRUNUQUJMRSA9IDQKCmNsYXNzIF9fbG9hZGVyX186CiAgICBwYXNzCgpjYWxsYmFja3MgPSBbXQoKZGVmIGNvbGxlY3QoKmFyZ3MsKiprdyk6CiAgICAiIiJjb2xsZWN0KFtnZW5lcmF0aW9uXSkgLT4gbiAgICAKICAgIFdpdGggbm8gYXJndW1lbnRzLCBydW4gYSBmdWxsIGNvbGxlY3Rpb24uICBUaGUgb3B0aW9uYWwgYXJndW1lbnQKICAgIG1heSBiZSBhbiBpbnRlZ2VyIHNwZWNpZnlpbmcgd2hpY2ggZ2VuZXJhdGlvbiB0byBjb2xsZWN0LiAgQSBWYWx1ZUVycm9yCiAgICBpcyByYWlzZWQgaWYgdGhlIGdlbmVyYXRpb24gbnVtYmVyIGlzIGludmFsaWQuCiAgICAKICAgIFRoZSBudW1iZXIgb2YgdW5yZWFjaGFibGUgb2JqZWN0cyBpcyByZXR1cm5lZC4KICAgICIiIgogICAgcGFzcwoKZGVmIGRpc2FibGUoKmFyZ3MsKiprdyk6CiAgICAiIiJkaXNhYmxlKCkgLT4gTm9uZSAgICAKICAgIERpc2FibGUgYXV0b21hdGljIGdhcmJhZ2UgY29sbGVjdGlvbi4KICAgICIiIgogICAgcGFzcwoKZGVmIGVuYWJsZSgqYXJncywqKmt3KToKICAgICIiImVuYWJsZSgpIC0+IE5vbmUgICAgCiAgICBFbmFibGUgYXV0b21hdGljIGdhcmJhZ2UgY29sbGVjdGlvbi4KICAgICIiIgogICAgcGFzcwoKZ2FyYmFnZSA9IFtdCgpkZWYgZ2V0X2NvdW50KCphcmdzLCoqa3cpOgogICAgIiIiZ2V0X2NvdW50KCkgLT4gKGNvdW50MCwgY291bnQxLCBjb3VudDIpICAgIAogICAgUmV0dXJuIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24gY291bnRzCiAgICAiIiIKICAgIHBhc3MKCmRlZiBnZXRfZGVidWcoKmFyZ3MsKiprdyk6CiAgICAiIiJnZXRfZGVidWcoKSAtPiBmbGFncyAgICAKICAgIEdldCB0aGUgZ2FyYmFnZSBjb2xsZWN0aW9uIGRlYnVnZ2luZyBmbGFncy4KICAgICIiIgogICAgcGFzcwoKZGVmIGdldF9vYmplY3RzKCphcmdzLCoqa3cpOgogICAgIiIiZ2V0X29iamVjdHMoKSAtPiBbLi4uXSAgICAKICAgIFJldHVybiBhIGxpc3Qgb2Ygb2JqZWN0cyB0cmFja2VkIGJ5IHRoZSBjb2xsZWN0b3IgKGV4Y2x1ZGluZyB0aGUgbGlzdAogICAgcmV0dXJuZWQpLgogICAgIiIiCiAgICBwYXNzCgpkZWYgZ2V0X3JlZmVyZW50cygqYXJncywqKmt3KToKICAgICIiImdldF9yZWZlcmVudHMoKm9ianMpIC0+IGxpc3QgICAgUmV0dXJuIHRoZSBsaXN0IG9mIG9iamVjdHMgdGhhdCBhcmUgZGlyZWN0bHkgcmVmZXJyZWQgdG8gYnkgb2Jqcy4iIiIKICAgIHBhc3MKCmRlZiBnZXRfcmVmZXJyZXJzKCphcmdzLCoqa3cpOgogICAgIiIiZ2V0X3JlZmVycmVycygqb2JqcykgLT4gbGlzdCAgICBSZXR1cm4gdGhlIGxpc3Qgb2Ygb2JqZWN0cyB0aGF0IGRpcmVjdGx5IHJlZmVyIHRvIGFueSBvZiBvYmpzLiIiIgogICAgcGFzcwoKZGVmIGdldF90aHJlc2hvbGQoKmFyZ3MsKiprdyk6CiAgICAiIiJnZXRfdGhyZXNob2xkKCkgLT4gKHRocmVzaG9sZDAsIHRocmVzaG9sZDEsIHRocmVzaG9sZDIpICAgIAogICAgUmV0dXJuIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24gdGhyZXNob2xkcwogICAgIiIiCiAgICBwYXNzCgpkZWYgaXNfdHJhY2tlZCgqYXJncywqKmt3KToKICAgICIiImlzX3RyYWNrZWQob2JqKSAtPiBib29sICAgIAogICAgUmV0dXJucyB0cnVlIGlmIHRoZSBvYmplY3QgaXMgdHJhY2tlZCBieSB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IuCiAgICBTaW1wbGUgYXRvbWljIG9iamVjdHMgd2lsbCByZXR1cm4gZmFsc2UuCiAgICAiIiIKICAgIHBhc3MKCmRlZiBpc2VuYWJsZWQoKmFyZ3MsKiprdyk6CiAgICAiIiJpc2VuYWJsZWQoKSAtPiBzdGF0dXMgICAgCiAgICBSZXR1cm5zIHRydWUgaWYgYXV0b21hdGljIGdhcmJhZ2UgY29sbGVjdGlvbiBpcyBlbmFibGVkLgogICAgIiIiCiAgICBwYXNzCgpkZWYgc2V0X2RlYnVnKCphcmdzLCoqa3cpOgogICAgIiIic2V0X2RlYnVnKGZsYWdzKSAtPiBOb25lICAgIAogICAgU2V0IHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gZGVidWdnaW5nIGZsYWdzLiBEZWJ1Z2dpbmcgaW5mb3JtYXRpb24gaXMKICAgIHdyaXR0ZW4gdG8gc3lzLnN0ZGVyci4KICAgIAogICAgZmxhZ3MgaXMgYW4gaW50ZWdlciBhbmQgY2FuIGhhdmUgdGhlIGZvbGxvd2luZyBiaXRzIHR1cm5lZCBvbjoKICAgIAogICAgICBERUJVR19TVEFUUyAtIFByaW50IHN0YXRpc3RpY3MgZHVyaW5nIGNvbGxlY3Rpb24uCiAgICAgIERFQlVHX0NPTExFQ1RBQkxFIC0gUHJpbnQgY29sbGVjdGFibGUgb2JqZWN0cyBmb3VuZC4KICAgICAgREVCVUdfVU5DT0xMRUNUQUJMRSAtIFByaW50IHVucmVhY2hhYmxlIGJ1dCB1bmNvbGxlY3RhYmxlIG9iamVjdHMgZm91bmQuCiAgICAgIERFQlVHX1NBVkVBTEwgLSBTYXZlIG9iamVjdHMgdG8gZ2MuZ2FyYmFnZSByYXRoZXIgdGhhbiBmcmVlaW5nIHRoZW0uCiAgICAgIERFQlVHX0xFQUsgLSBEZWJ1ZyBsZWFraW5nIHByb2dyYW1zIChldmVyeXRoaW5nIGJ1dCBTVEFUUykuCiAgICAiIiIKICAgIHBhc3MKCmRlZiBzZXRfdGhyZXNob2xkKCphcmdzLCoqa3cpOgogICAgIiIic2V0X3RocmVzaG9sZCh0aHJlc2hvbGQwLCBbdGhyZXNob2xkMSwgdGhyZXNob2xkMl0pIC0+IE5vbmUgICAgCiAgICBTZXRzIHRoZSBjb2xsZWN0aW9uIHRocmVzaG9sZHMuICBTZXR0aW5nIHRocmVzaG9sZDAgdG8gemVybyBkaXNhYmxlcwogICAgY29sbGVjdGlvbi4KICAgICIiIgogICAgcGFzcwo=',
'/Lib/_string.py':'IiIic3RyaW5nIGhlbHBlciBtb2R1bGUiIiIKCgpjbGFzcyBfX2xvYWRlcl9fKG9iamVjdCk6CiAgICBwYXNzCgpkZWYgZm9ybWF0dGVyX2ZpZWxkX25hbWVfc3BsaXQoKmFyZ3MsKiprdyk6CiAgICAiIiJzcGxpdCB0aGUgYXJndW1lbnQgYXMgYSBmaWVsZCBuYW1lIiIiCiAgICBwYXNzCgpkZWYgZm9ybWF0dGVyX3BhcnNlcigqYXJncywqKmt3KToKICAgICIiInBhcnNlIHRoZSBhcmd1bWVudCBhcyBhIGZvcm1hdCBzdHJpbmciIiIKICAgIHBhc3MK',
'/Lib/tarfile.py':'IyEgL3Vzci9iaW4vcHl0aG9uMy4zCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgdGFyZmlsZS5weQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIENvcHlyaWdodCAoQykgMjAwMiBMYXJzIEd1c3RhZWJlbCA8bGFyc0BndXN0YWViZWwuZGU+CiMgQWxsIHJpZ2h0cyByZXNlcnZlZC4KIwojIFBlcm1pc3Npb24gIGlzICBoZXJlYnkgZ3JhbnRlZCwgIGZyZWUgIG9mIGNoYXJnZSwgIHRvICBhbnkgcGVyc29uCiMgb2J0YWluaW5nIGEgIGNvcHkgb2YgIHRoaXMgc29mdHdhcmUgIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24KIyBmaWxlcyAgKHRoZSAgIlNvZnR3YXJlIiksICB0byAgIGRlYWwgIGluICB0aGUgIFNvZnR3YXJlICAgd2l0aG91dAojIHJlc3RyaWN0aW9uLCAgaW5jbHVkaW5nICB3aXRob3V0IGxpbWl0YXRpb24gIHRoZSAgcmlnaHRzIHRvICB1c2UsCiMgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwKIyBjb3BpZXMgIG9mICB0aGUgIFNvZnR3YXJlLCAgYW5kIHRvICBwZXJtaXQgIHBlcnNvbnMgIHRvICB3aG9tIHRoZQojIFNvZnR3YXJlICBpcyAgZnVybmlzaGVkICB0byAgZG8gIHNvLCAgc3ViamVjdCAgdG8gIHRoZSAgZm9sbG93aW5nCiMgY29uZGl0aW9uczoKIwojIFRoZSBhYm92ZSBjb3B5cmlnaHQgIG5vdGljZSBhbmQgdGhpcyAgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgIGJlCiMgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCiMKIyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTICBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZICBLSU5ELAojIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HICBCVVQgTk9UIExJTUlURUQgVE8gIFRIRSBXQVJSQU5USUVTCiMgT0YgIE1FUkNIQU5UQUJJTElUWSwgIEZJVE5FU1MgICBGT1IgIEEgIFBBUlRJQ1VMQVIgICBQVVJQT1NFICBBTkQKIyBOT05JTkZSSU5HRU1FTlQuICBJTiAgTk8gIEVWRU5UIFNIQUxMICBUSEUgIEFVVEhPUlMgIE9SIENPUFlSSUdIVAojIEhPTERFUlMgIEJFIExJQUJMRSAgRk9SIEFOWSAgQ0xBSU0sIERBTUFHRVMgIE9SIE9USEVSICBMSUFCSUxJVFksCiMgV0hFVEhFUiAgSU4gQU4gIEFDVElPTiBPRiAgQ09OVFJBQ1QsIFRPUlQgIE9SIE9USEVSV0lTRSwgIEFSSVNJTkcKIyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SCiMgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgojCiIiIlJlYWQgZnJvbSBhbmQgd3JpdGUgdG8gdGFyIGZvcm1hdCBhcmNoaXZlcy4KIiIiCgp2ZXJzaW9uICAgICA9ICIwLjkuMCIKX19hdXRob3JfXyAgPSAiTGFycyBHdXN0XHUwMGU0YmVsIChsYXJzQGd1c3RhZWJlbC5kZSkiCl9fZGF0ZV9fICAgID0gIiREYXRlOiAyMDExLTAyLTI1IDE3OjQyOjAxICswMjAwIChGcmksIDI1IEZlYiAyMDExKSAkIgpfX2N2c2lkX18gICA9ICIkSWQ6IHRhcmZpbGUucHkgODg1ODYgMjAxMS0wMi0yNSAxNTo0MjowMVogbWFyYy1hbmRyZS5sZW1idXJnICQiCl9fY3JlZGl0c19fID0gIkd1c3Rhdm8gTmllbWV5ZXIsIE5pZWxzIEd1c3RcdTAwZTRiZWwsIFJpY2hhcmQgVG93bnNlbmQuIgoKIy0tLS0tLS0tLQojIEltcG9ydHMKIy0tLS0tLS0tLQppbXBvcnQgc3lzCmltcG9ydCBvcwppbXBvcnQgaW8KaW1wb3J0IHNodXRpbAppbXBvcnQgc3RhdAppbXBvcnQgdGltZQppbXBvcnQgc3RydWN0CmltcG9ydCBjb3B5CmltcG9ydCByZQoKdHJ5OgogICAgaW1wb3J0IGdycCwgcHdkCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGdycCA9IHB3ZCA9IE5vbmUKCiMgb3Muc3ltbGluayBvbiBXaW5kb3dzIHByaW9yIHRvIDYuMCByYWlzZXMgTm90SW1wbGVtZW50ZWRFcnJvcgpzeW1saW5rX2V4Y2VwdGlvbiA9IChBdHRyaWJ1dGVFcnJvciwgTm90SW1wbGVtZW50ZWRFcnJvcikKdHJ5OgogICAgIyBXaW5kb3dzRXJyb3IgKDEzMTQpIHdpbGwgYmUgcmFpc2VkIGlmIHRoZSBjYWxsZXIgZG9lcyBub3QgaG9sZCB0aGUKICAgICMgU2VDcmVhdGVTeW1ib2xpY0xpbmtQcml2aWxlZ2UgcHJpdmlsZWdlCiAgICBzeW1saW5rX2V4Y2VwdGlvbiArPSAoV2luZG93c0Vycm9yLCkKZXhjZXB0IE5hbWVFcnJvcjoKICAgIHBhc3MKCiMgZnJvbSB0YXJmaWxlIGltcG9ydCAqCl9fYWxsX18gPSBbIlRhckZpbGUiLCAiVGFySW5mbyIsICJpc190YXJmaWxlIiwgIlRhckVycm9yIl0KCmZyb20gYnVpbHRpbnMgaW1wb3J0IG9wZW4gYXMgX29wZW4gIyBTaW5jZSAnb3BlbicgaXMgVGFyRmlsZS5vcGVuCgojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgdGFyIGNvbnN0YW50cwojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCk5VTCA9IGIiXDAiICAgICAgICAgICAgICAgICAgICAgIyB0aGUgbnVsbCBjaGFyYWN0ZXIKQkxPQ0tTSVpFID0gNTEyICAgICAgICAgICAgICAgICAjIGxlbmd0aCBvZiBwcm9jZXNzaW5nIGJsb2NrcwpSRUNPUkRTSVpFID0gQkxPQ0tTSVpFICogMjAgICAgICMgbGVuZ3RoIG9mIHJlY29yZHMKR05VX01BR0lDID0gYiJ1c3RhciAgXDAiICAgICAgICAjIG1hZ2ljIGdudSB0YXIgc3RyaW5nClBPU0lYX01BR0lDID0gYiJ1c3Rhclx4MDAwMCIgICAgIyBtYWdpYyBwb3NpeCB0YXIgc3RyaW5nCgpMRU5HVEhfTkFNRSA9IDEwMCAgICAgICAgICAgICAgICMgbWF4aW11bSBsZW5ndGggb2YgYSBmaWxlbmFtZQpMRU5HVEhfTElOSyA9IDEwMCAgICAgICAgICAgICAgICMgbWF4aW11bSBsZW5ndGggb2YgYSBsaW5rbmFtZQpMRU5HVEhfUFJFRklYID0gMTU1ICAgICAgICAgICAgICMgbWF4aW11bSBsZW5ndGggb2YgdGhlIHByZWZpeCBmaWVsZAoKUkVHVFlQRSA9IGIiMCIgICAgICAgICAgICAgICAgICAjIHJlZ3VsYXIgZmlsZQpBUkVHVFlQRSA9IGIiXDAiICAgICAgICAgICAgICAgICMgcmVndWxhciBmaWxlCkxOS1RZUEUgPSBiIjEiICAgICAgICAgICAgICAgICAgIyBsaW5rIChpbnNpZGUgdGFyZmlsZSkKU1lNVFlQRSA9IGIiMiIgICAgICAgICAgICAgICAgICAjIHN5bWJvbGljIGxpbmsKQ0hSVFlQRSA9IGIiMyIgICAgICAgICAgICAgICAgICAjIGNoYXJhY3RlciBzcGVjaWFsIGRldmljZQpCTEtUWVBFID0gYiI0IiAgICAgICAgICAgICAgICAgICMgYmxvY2sgc3BlY2lhbCBkZXZpY2UKRElSVFlQRSA9IGIiNSIgICAgICAgICAgICAgICAgICAjIGRpcmVjdG9yeQpGSUZPVFlQRSA9IGIiNiIgICAgICAgICAgICAgICAgICMgZmlmbyBzcGVjaWFsIGRldmljZQpDT05UVFlQRSA9IGIiNyIgICAgICAgICAgICAgICAgICMgY29udGlndW91cyBmaWxlCgpHTlVUWVBFX0xPTkdOQU1FID0gYiJMIiAgICAgICAgICMgR05VIHRhciBsb25nbmFtZQpHTlVUWVBFX0xPTkdMSU5LID0gYiJLIiAgICAgICAgICMgR05VIHRhciBsb25nbGluawpHTlVUWVBFX1NQQVJTRSA9IGIiUyIgICAgICAgICAgICMgR05VIHRhciBzcGFyc2UgZmlsZQoKWEhEVFlQRSA9IGIieCIgICAgICAgICAgICAgICAgICAjIFBPU0lYLjEtMjAwMSBleHRlbmRlZCBoZWFkZXIKWEdMVFlQRSA9IGIiZyIgICAgICAgICAgICAgICAgICAjIFBPU0lYLjEtMjAwMSBnbG9iYWwgaGVhZGVyClNPTEFSSVNfWEhEVFlQRSA9IGIiWCIgICAgICAgICAgIyBTb2xhcmlzIGV4dGVuZGVkIGhlYWRlcgoKVVNUQVJfRk9STUFUID0gMCAgICAgICAgICAgICAgICAjIFBPU0lYLjEtMTk4OCAodXN0YXIpIGZvcm1hdApHTlVfRk9STUFUID0gMSAgICAgICAgICAgICAgICAgICMgR05VIHRhciBmb3JtYXQKUEFYX0ZPUk1BVCA9IDIgICAgICAgICAgICAgICAgICAjIFBPU0lYLjEtMjAwMSAocGF4KSBmb3JtYXQKREVGQVVMVF9GT1JNQVQgPSBHTlVfRk9STUFUCgojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgdGFyZmlsZSBjb25zdGFudHMKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEZpbGUgdHlwZXMgdGhhdCB0YXJmaWxlIHN1cHBvcnRzOgpTVVBQT1JURURfVFlQRVMgPSAoUkVHVFlQRSwgQVJFR1RZUEUsIExOS1RZUEUsCiAgICAgICAgICAgICAgICAgICBTWU1UWVBFLCBESVJUWVBFLCBGSUZPVFlQRSwKICAgICAgICAgICAgICAgICAgIENPTlRUWVBFLCBDSFJUWVBFLCBCTEtUWVBFLAogICAgICAgICAgICAgICAgICAgR05VVFlQRV9MT05HTkFNRSwgR05VVFlQRV9MT05HTElOSywKICAgICAgICAgICAgICAgICAgIEdOVVRZUEVfU1BBUlNFKQoKIyBGaWxlIHR5cGVzIHRoYXQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgcmVndWxhciBmaWxlLgpSRUdVTEFSX1RZUEVTID0gKFJFR1RZUEUsIEFSRUdUWVBFLAogICAgICAgICAgICAgICAgIENPTlRUWVBFLCBHTlVUWVBFX1NQQVJTRSkKCiMgRmlsZSB0eXBlcyB0aGF0IGFyZSBwYXJ0IG9mIHRoZSBHTlUgdGFyIGZvcm1hdC4KR05VX1RZUEVTID0gKEdOVVRZUEVfTE9OR05BTUUsIEdOVVRZUEVfTE9OR0xJTkssCiAgICAgICAgICAgICBHTlVUWVBFX1NQQVJTRSkKCiMgRmllbGRzIGZyb20gYSBwYXggaGVhZGVyIHRoYXQgb3ZlcnJpZGUgYSBUYXJJbmZvIGF0dHJpYnV0ZS4KUEFYX0ZJRUxEUyA9ICgicGF0aCIsICJsaW5rcGF0aCIsICJzaXplIiwgIm10aW1lIiwKICAgICAgICAgICAgICAidWlkIiwgImdpZCIsICJ1bmFtZSIsICJnbmFtZSIpCgojIEZpZWxkcyBmcm9tIGEgcGF4IGhlYWRlciB0aGF0IGFyZSBhZmZlY3RlZCBieSBoZHJjaGFyc2V0LgpQQVhfTkFNRV9GSUVMRFMgPSB7InBhdGgiLCAibGlua3BhdGgiLCAidW5hbWUiLCAiZ25hbWUifQoKIyBGaWVsZHMgaW4gYSBwYXggaGVhZGVyIHRoYXQgYXJlIG51bWJlcnMsIGFsbCBvdGhlciBmaWVsZHMKIyBhcmUgdHJlYXRlZCBhcyBzdHJpbmdzLgpQQVhfTlVNQkVSX0ZJRUxEUyA9IHsKICAgICJhdGltZSI6IGZsb2F0LAogICAgImN0aW1lIjogZmxvYXQsCiAgICAibXRpbWUiOiBmbG9hdCwKICAgICJ1aWQiOiBpbnQsCiAgICAiZ2lkIjogaW50LAogICAgInNpemUiOiBpbnQKfQoKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEJpdHMgdXNlZCBpbiB0aGUgbW9kZSBmaWVsZCwgdmFsdWVzIGluIG9jdGFsLgojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tClNfSUZMTksgPSAwbzEyMDAwMCAgICAgICAgIyBzeW1ib2xpYyBsaW5rClNfSUZSRUcgPSAwbzEwMDAwMCAgICAgICAgIyByZWd1bGFyIGZpbGUKU19JRkJMSyA9IDBvMDYwMDAwICAgICAgICAjIGJsb2NrIGRldmljZQpTX0lGRElSID0gMG8wNDAwMDAgICAgICAgICMgZGlyZWN0b3J5ClNfSUZDSFIgPSAwbzAyMDAwMCAgICAgICAgIyBjaGFyYWN0ZXIgZGV2aWNlClNfSUZJRk8gPSAwbzAxMDAwMCAgICAgICAgIyBmaWZvCgpUU1VJRCAgID0gMG80MDAwICAgICAgICAgICMgc2V0IFVJRCBvbiBleGVjdXRpb24KVFNHSUQgICA9IDBvMjAwMCAgICAgICAgICAjIHNldCBHSUQgb24gZXhlY3V0aW9uClRTVlRYICAgPSAwbzEwMDAgICAgICAgICAgIyByZXNlcnZlZAoKVFVSRUFEICA9IDBvNDAwICAgICAgICAgICAjIHJlYWQgYnkgb3duZXIKVFVXUklURSA9IDBvMjAwICAgICAgICAgICAjIHdyaXRlIGJ5IG93bmVyClRVRVhFQyAgPSAwbzEwMCAgICAgICAgICAgIyBleGVjdXRlL3NlYXJjaCBieSBvd25lcgpUR1JFQUQgID0gMG8wNDAgICAgICAgICAgICMgcmVhZCBieSBncm91cApUR1dSSVRFID0gMG8wMjAgICAgICAgICAgICMgd3JpdGUgYnkgZ3JvdXAKVEdFWEVDICA9IDBvMDEwICAgICAgICAgICAjIGV4ZWN1dGUvc2VhcmNoIGJ5IGdyb3VwClRPUkVBRCAgPSAwbzAwNCAgICAgICAgICAgIyByZWFkIGJ5IG90aGVyClRPV1JJVEUgPSAwbzAwMiAgICAgICAgICAgIyB3cml0ZSBieSBvdGhlcgpUT0VYRUMgID0gMG8wMDEgICAgICAgICAgICMgZXhlY3V0ZS9zZWFyY2ggYnkgb3RoZXIKCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBpbml0aWFsaXphdGlvbgojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmlmIG9zLm5hbWUgaW4gKCJudCIsICJjZSIpOgogICAgRU5DT0RJTkcgPSAidXRmLTgiCmVsc2U6CiAgICBFTkNPRElORyA9IHN5cy5nZXRmaWxlc3lzdGVtZW5jb2RpbmcoKQoKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFNvbWUgdXNlZnVsIGZ1bmN0aW9ucwojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgc3RuKHMsIGxlbmd0aCwgZW5jb2RpbmcsIGVycm9ycyk6CiAgICAiIiJDb252ZXJ0IGEgc3RyaW5nIHRvIGEgbnVsbC10ZXJtaW5hdGVkIGJ5dGVzIG9iamVjdC4KICAgICIiIgogICAgcyA9IHMuZW5jb2RlKGVuY29kaW5nLCBlcnJvcnMpCiAgICByZXR1cm4gc1s6bGVuZ3RoXSArIChsZW5ndGggLSBsZW4ocykpICogTlVMCgpkZWYgbnRzKHMsIGVuY29kaW5nLCBlcnJvcnMpOgogICAgIiIiQ29udmVydCBhIG51bGwtdGVybWluYXRlZCBieXRlcyBvYmplY3QgdG8gYSBzdHJpbmcuCiAgICAiIiIKICAgIHAgPSBzLmZpbmQoYiJcMCIpCiAgICBpZiBwICE9IC0xOgogICAgICAgIHMgPSBzWzpwXQogICAgcmV0dXJuIHMuZGVjb2RlKGVuY29kaW5nLCBlcnJvcnMpCgpkZWYgbnRpKHMpOgogICAgIiIiQ29udmVydCBhIG51bWJlciBmaWVsZCB0byBhIHB5dGhvbiBudW1iZXIuCiAgICAiIiIKICAgICMgVGhlcmUgYXJlIHR3byBwb3NzaWJsZSBlbmNvZGluZ3MgZm9yIGEgbnVtYmVyIGZpZWxkLCBzZWUKICAgICMgaXRuKCkgYmVsb3cuCiAgICBpZiBzWzBdIGluICgwbzIwMCwgMG8zNzcpOgogICAgICAgIG4gPSAwCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKHMpIC0gMSk6CiAgICAgICAgICAgIG4gPDw9IDgKICAgICAgICAgICAgbiArPSBzW2kgKyAxXQogICAgICAgIGlmIHNbMF0gPT0gMG8zNzc6CiAgICAgICAgICAgIG4gPSAtKDI1NiAqKiAobGVuKHMpIC0gMSkgLSBuKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG4gPSBpbnQobnRzKHMsICJhc2NpaSIsICJzdHJpY3QiKSBvciAiMCIsIDgpCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIEludmFsaWRIZWFkZXJFcnJvcigiaW52YWxpZCBoZWFkZXIiKQogICAgcmV0dXJuIG4KCmRlZiBpdG4obiwgZGlnaXRzPTgsIGZvcm1hdD1ERUZBVUxUX0ZPUk1BVCk6CiAgICAiIiJDb252ZXJ0IGEgcHl0aG9uIG51bWJlciB0byBhIG51bWJlciBmaWVsZC4KICAgICIiIgogICAgIyBQT1NJWCAxMDAzLjEtMTk4OCByZXF1aXJlcyBudW1iZXJzIHRvIGJlIGVuY29kZWQgYXMgYSBzdHJpbmcgb2YKICAgICMgb2N0YWwgZGlnaXRzIGZvbGxvd2VkIGJ5IGEgbnVsbC1ieXRlLCB0aGlzIGFsbG93cyB2YWx1ZXMgdXAgdG8KICAgICMgKDgqKihkaWdpdHMtMSkpLTEuIEdOVSB0YXIgYWxsb3dzIHN0b3JpbmcgbnVtYmVycyBncmVhdGVyIHRoYW4KICAgICMgdGhhdCBpZiBuZWNlc3NhcnkuIEEgbGVhZGluZyAwbzIwMCBvciAwbzM3NyBieXRlIGluZGljYXRlIHRoaXMKICAgICMgcGFydGljdWxhciBlbmNvZGluZywgdGhlIGZvbGxvd2luZyBkaWdpdHMtMSBieXRlcyBhcmUgYSBiaWctZW5kaWFuCiAgICAjIGJhc2UtMjU2IHJlcHJlc2VudGF0aW9uLiBUaGlzIGFsbG93cyB2YWx1ZXMgdXAgdG8gKDI1NioqKGRpZ2l0cy0xKSktMS4KICAgICMgQSAwbzIwMCBieXRlIGluZGljYXRlcyBhIHBvc2l0aXZlIG51bWJlciwgYSAwbzM3NyBieXRlIGEgbmVnYXRpdmUKICAgICMgbnVtYmVyLgogICAgaWYgMCA8PSBuIDwgOCAqKiAoZGlnaXRzIC0gMSk6CiAgICAgICAgcyA9IGJ5dGVzKCIlMCpvIiAlIChkaWdpdHMgLSAxLCBuKSwgImFzY2lpIikgKyBOVUwKICAgIGVsaWYgZm9ybWF0ID09IEdOVV9GT1JNQVQgYW5kIC0yNTYgKiogKGRpZ2l0cyAtIDEpIDw9IG4gPCAyNTYgKiogKGRpZ2l0cyAtIDEpOgogICAgICAgIGlmIG4gPj0gMDoKICAgICAgICAgICAgcyA9IGJ5dGVhcnJheShbMG8yMDBdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHMgPSBieXRlYXJyYXkoWzBvMzc3XSkKICAgICAgICAgICAgbiA9IDI1NiAqKiBkaWdpdHMgKyBuCgogICAgICAgIGZvciBpIGluIHJhbmdlKGRpZ2l0cyAtIDEpOgogICAgICAgICAgICBzLmluc2VydCgxLCBuICYgMG8zNzcpCiAgICAgICAgICAgIG4gPj49IDgKICAgIGVsc2U6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigib3ZlcmZsb3cgaW4gbnVtYmVyIGZpZWxkIikKCiAgICByZXR1cm4gcwoKZGVmIGNhbGNfY2hrc3VtcyhidWYpOgogICAgIiIiQ2FsY3VsYXRlIHRoZSBjaGVja3N1bSBmb3IgYSBtZW1iZXIncyBoZWFkZXIgYnkgc3VtbWluZyB1cCBhbGwKICAgICAgIGNoYXJhY3RlcnMgZXhjZXB0IGZvciB0aGUgY2hrc3VtIGZpZWxkIHdoaWNoIGlzIHRyZWF0ZWQgYXMgaWYKICAgICAgIGl0IHdhcyBmaWxsZWQgd2l0aCBzcGFjZXMuIEFjY29yZGluZyB0byB0aGUgR05VIHRhciBzb3VyY2VzLAogICAgICAgc29tZSB0YXJzIChTdW4gYW5kIE5lWFQpIGNhbGN1bGF0ZSBjaGtzdW0gd2l0aCBzaWduZWQgY2hhciwKICAgICAgIHdoaWNoIHdpbGwgYmUgZGlmZmVyZW50IGlmIHRoZXJlIGFyZSBjaGFycyBpbiB0aGUgYnVmZmVyIHdpdGgKICAgICAgIHRoZSBoaWdoIGJpdCBzZXQuIFNvIHdlIGNhbGN1bGF0ZSB0d28gY2hlY2tzdW1zLCB1bnNpZ25lZCBhbmQKICAgICAgIHNpZ25lZC4KICAgICIiIgogICAgdW5zaWduZWRfY2hrc3VtID0gMjU2ICsgc3VtKHN0cnVjdC51bnBhY2tfZnJvbSgiMTQ4Qjh4MzU2QiIsIGJ1ZikpCiAgICBzaWduZWRfY2hrc3VtID0gMjU2ICsgc3VtKHN0cnVjdC51bnBhY2tfZnJvbSgiMTQ4Yjh4MzU2YiIsIGJ1ZikpCiAgICByZXR1cm4gdW5zaWduZWRfY2hrc3VtLCBzaWduZWRfY2hrc3VtCgpkZWYgY29weWZpbGVvYmooc3JjLCBkc3QsIGxlbmd0aD1Ob25lKToKICAgICIiIkNvcHkgbGVuZ3RoIGJ5dGVzIGZyb20gZmlsZW9iaiBzcmMgdG8gZmlsZW9iaiBkc3QuCiAgICAgICBJZiBsZW5ndGggaXMgTm9uZSwgY29weSB0aGUgZW50aXJlIGNvbnRlbnQuCiAgICAiIiIKICAgIGlmIGxlbmd0aCA9PSAwOgogICAgICAgIHJldHVybgogICAgaWYgbGVuZ3RoIGlzIE5vbmU6CiAgICAgICAgc2h1dGlsLmNvcHlmaWxlb2JqKHNyYywgZHN0KQogICAgICAgIHJldHVybgoKICAgIEJVRlNJWkUgPSAxNiAqIDEwMjQKICAgIGJsb2NrcywgcmVtYWluZGVyID0gZGl2bW9kKGxlbmd0aCwgQlVGU0laRSkKICAgIGZvciBiIGluIHJhbmdlKGJsb2Nrcyk6CiAgICAgICAgYnVmID0gc3JjLnJlYWQoQlVGU0laRSkKICAgICAgICBpZiBsZW4oYnVmKSA8IEJVRlNJWkU6CiAgICAgICAgICAgIHJhaXNlIElPRXJyb3IoImVuZCBvZiBmaWxlIHJlYWNoZWQiKQogICAgICAgIGRzdC53cml0ZShidWYpCgogICAgaWYgcmVtYWluZGVyICE9IDA6CiAgICAgICAgYnVmID0gc3JjLnJlYWQocmVtYWluZGVyKQogICAgICAgIGlmIGxlbihidWYpIDwgcmVtYWluZGVyOgogICAgICAgICAgICByYWlzZSBJT0Vycm9yKCJlbmQgb2YgZmlsZSByZWFjaGVkIikKICAgICAgICBkc3Qud3JpdGUoYnVmKQogICAgcmV0dXJuCgpkZWYgZmlsZW1vZGUobW9kZSk6CiAgICAiIiJEZXByZWNhdGVkIGluIHRoaXMgbG9jYXRpb247IHVzZSBzdGF0LmZpbGVtb2RlLiIiIgogICAgaW1wb3J0IHdhcm5pbmdzCiAgICB3YXJuaW5ncy53YXJuKCJkZXByZWNhdGVkIGluIGZhdm9yIG9mIHN0YXQuZmlsZW1vZGUiLAogICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsIDIpCiAgICByZXR1cm4gc3RhdC5maWxlbW9kZShtb2RlKQoKCmNsYXNzIFRhckVycm9yKEV4Y2VwdGlvbik6CiAgICAiIiJCYXNlIGV4Y2VwdGlvbi4iIiIKICAgIHBhc3MKY2xhc3MgRXh0cmFjdEVycm9yKFRhckVycm9yKToKICAgICIiIkdlbmVyYWwgZXhjZXB0aW9uIGZvciBleHRyYWN0IGVycm9ycy4iIiIKICAgIHBhc3MKY2xhc3MgUmVhZEVycm9yKFRhckVycm9yKToKICAgICIiIkV4Y2VwdGlvbiBmb3IgdW5yZWFkYmxlIHRhciBhcmNoaXZlcy4iIiIKICAgIHBhc3MKY2xhc3MgQ29tcHJlc3Npb25FcnJvcihUYXJFcnJvcik6CiAgICAiIiJFeGNlcHRpb24gZm9yIHVuYXZhaWxhYmxlIGNvbXByZXNzaW9uIG1ldGhvZHMuIiIiCiAgICBwYXNzCmNsYXNzIFN0cmVhbUVycm9yKFRhckVycm9yKToKICAgICIiIkV4Y2VwdGlvbiBmb3IgdW5zdXBwb3J0ZWQgb3BlcmF0aW9ucyBvbiBzdHJlYW0tbGlrZSBUYXJGaWxlcy4iIiIKICAgIHBhc3MKY2xhc3MgSGVhZGVyRXJyb3IoVGFyRXJyb3IpOgogICAgIiIiQmFzZSBleGNlcHRpb24gZm9yIGhlYWRlciBlcnJvcnMuIiIiCiAgICBwYXNzCmNsYXNzIEVtcHR5SGVhZGVyRXJyb3IoSGVhZGVyRXJyb3IpOgogICAgIiIiRXhjZXB0aW9uIGZvciBlbXB0eSBoZWFkZXJzLiIiIgogICAgcGFzcwpjbGFzcyBUcnVuY2F0ZWRIZWFkZXJFcnJvcihIZWFkZXJFcnJvcik6CiAgICAiIiJFeGNlcHRpb24gZm9yIHRydW5jYXRlZCBoZWFkZXJzLiIiIgogICAgcGFzcwpjbGFzcyBFT0ZIZWFkZXJFcnJvcihIZWFkZXJFcnJvcik6CiAgICAiIiJFeGNlcHRpb24gZm9yIGVuZCBvZiBmaWxlIGhlYWRlcnMuIiIiCiAgICBwYXNzCmNsYXNzIEludmFsaWRIZWFkZXJFcnJvcihIZWFkZXJFcnJvcik6CiAgICAiIiJFeGNlcHRpb24gZm9yIGludmFsaWQgaGVhZGVycy4iIiIKICAgIHBhc3MKY2xhc3MgU3Vic2VxdWVudEhlYWRlckVycm9yKEhlYWRlckVycm9yKToKICAgICIiIkV4Y2VwdGlvbiBmb3IgbWlzc2luZyBhbmQgaW52YWxpZCBleHRlbmRlZCBoZWFkZXJzLiIiIgogICAgcGFzcwoKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIGludGVybmFsIHN0cmVhbSBpbnRlcmZhY2UKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjbGFzcyBfTG93TGV2ZWxGaWxlOgogICAgIiIiTG93LWxldmVsIGZpbGUgb2JqZWN0LiBTdXBwb3J0cyByZWFkaW5nIGFuZCB3cml0aW5nLgogICAgICAgSXQgaXMgdXNlZCBpbnN0ZWFkIG9mIGEgcmVndWxhciBmaWxlIG9iamVjdCBmb3Igc3RyZWFtaW5nCiAgICAgICBhY2Nlc3MuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSwgbW9kZSk6CiAgICAgICAgbW9kZSA9IHsKICAgICAgICAgICAgInIiOiBvcy5PX1JET05MWSwKICAgICAgICAgICAgInciOiBvcy5PX1dST05MWSB8IG9zLk9fQ1JFQVQgfCBvcy5PX1RSVU5DLAogICAgICAgIH1bbW9kZV0KICAgICAgICBpZiBoYXNhdHRyKG9zLCAiT19CSU5BUlkiKToKICAgICAgICAgICAgbW9kZSB8PSBvcy5PX0JJTkFSWQogICAgICAgIHNlbGYuZmQgPSBvcy5vcGVuKG5hbWUsIG1vZGUsIDBvNjY2KQoKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICBvcy5jbG9zZShzZWxmLmZkKQoKICAgIGRlZiByZWFkKHNlbGYsIHNpemUpOgogICAgICAgIHJldHVybiBvcy5yZWFkKHNlbGYuZmQsIHNpemUpCgogICAgZGVmIHdyaXRlKHNlbGYsIHMpOgogICAgICAgIG9zLndyaXRlKHNlbGYuZmQsIHMpCgpjbGFzcyBfU3RyZWFtOgogICAgIiIiQ2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYW4gYWRhcHRlciBiZXR3ZWVuIFRhckZpbGUgYW5kCiAgICAgICBhIHN0cmVhbS1saWtlIG9iamVjdC4gIFRoZSBzdHJlYW0tbGlrZSBvYmplY3Qgb25seQogICAgICAgbmVlZHMgdG8gaGF2ZSBhIHJlYWQoKSBvciB3cml0ZSgpIG1ldGhvZCBhbmQgaXMgYWNjZXNzZWQKICAgICAgIGJsb2Nrd2lzZS4gIFVzZSBvZiBnemlwIG9yIGJ6aXAyIGNvbXByZXNzaW9uIGlzIHBvc3NpYmxlLgogICAgICAgQSBzdHJlYW0tbGlrZSBvYmplY3QgY291bGQgYmUgZm9yIGV4YW1wbGU6IHN5cy5zdGRpbiwKICAgICAgIHN5cy5zdGRvdXQsIGEgc29ja2V0LCBhIHRhcGUgZGV2aWNlIGV0Yy4KCiAgICAgICBfU3RyZWFtIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgb25seSBpbnRlcm5hbGx5LgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIG1vZGUsIGNvbXB0eXBlLCBmaWxlb2JqLCBidWZzaXplKToKICAgICAgICAiIiJDb25zdHJ1Y3QgYSBfU3RyZWFtIG9iamVjdC4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9leHRmaWxlb2JqID0gVHJ1ZQogICAgICAgIGlmIGZpbGVvYmogaXMgTm9uZToKICAgICAgICAgICAgZmlsZW9iaiA9IF9Mb3dMZXZlbEZpbGUobmFtZSwgbW9kZSkKICAgICAgICAgICAgc2VsZi5fZXh0ZmlsZW9iaiA9IEZhbHNlCgogICAgICAgIGlmIGNvbXB0eXBlID09ICcqJzoKICAgICAgICAgICAgIyBFbmFibGUgdHJhbnNwYXJlbnQgY29tcHJlc3Npb24gZGV0ZWN0aW9uIGZvciB0aGUKICAgICAgICAgICAgIyBzdHJlYW0gaW50ZXJmYWNlCiAgICAgICAgICAgIGZpbGVvYmogPSBfU3RyZWFtUHJveHkoZmlsZW9iaikKICAgICAgICAgICAgY29tcHR5cGUgPSBmaWxlb2JqLmdldGNvbXB0eXBlKCkKCiAgICAgICAgc2VsZi5uYW1lICAgICA9IG5hbWUgb3IgIiIKICAgICAgICBzZWxmLm1vZGUgICAgID0gbW9kZQogICAgICAgIHNlbGYuY29tcHR5cGUgPSBjb21wdHlwZQogICAgICAgIHNlbGYuZmlsZW9iaiAgPSBmaWxlb2JqCiAgICAgICAgc2VsZi5idWZzaXplICA9IGJ1ZnNpemUKICAgICAgICBzZWxmLmJ1ZiAgICAgID0gYiIiCiAgICAgICAgc2VsZi5wb3MgICAgICA9IDAKICAgICAgICBzZWxmLmNsb3NlZCAgID0gRmFsc2UKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBjb21wdHlwZSA9PSAiZ3oiOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGltcG9ydCB6bGliCiAgICAgICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgQ29tcHJlc3Npb25FcnJvcigiemxpYiBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZSIpCiAgICAgICAgICAgICAgICBzZWxmLnpsaWIgPSB6bGliCiAgICAgICAgICAgICAgICBzZWxmLmNyYyA9IHpsaWIuY3JjMzIoYiIiKQogICAgICAgICAgICAgICAgaWYgbW9kZSA9PSAiciI6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5faW5pdF9yZWFkX2d6KCkKICAgICAgICAgICAgICAgICAgICBzZWxmLmV4Y2VwdGlvbiA9IHpsaWIuZXJyb3IKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5faW5pdF93cml0ZV9neigpCgogICAgICAgICAgICBlbGlmIGNvbXB0eXBlID09ICJiejIiOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGltcG9ydCBiejIKICAgICAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgICAgICByYWlzZSBDb21wcmVzc2lvbkVycm9yKCJiejIgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUiKQogICAgICAgICAgICAgICAgaWYgbW9kZSA9PSAiciI6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYnVmID0gYiIiCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jbXAgPSBiejIuQloyRGVjb21wcmVzc29yKCkKICAgICAgICAgICAgICAgICAgICBzZWxmLmV4Y2VwdGlvbiA9IElPRXJyb3IKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jbXAgPSBiejIuQloyQ29tcHJlc3NvcigpCgogICAgICAgICAgICBlbGlmIGNvbXB0eXBlID09ICJ4eiI6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaW1wb3J0IGx6bWEKICAgICAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgICAgICByYWlzZSBDb21wcmVzc2lvbkVycm9yKCJsem1hIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlIikKICAgICAgICAgICAgICAgIGlmIG1vZGUgPT0gInIiOgogICAgICAgICAgICAgICAgICAgIHNlbGYuZGJ1ZiA9IGIiIgogICAgICAgICAgICAgICAgICAgIHNlbGYuY21wID0gbHptYS5MWk1BRGVjb21wcmVzc29yKCkKICAgICAgICAgICAgICAgICAgICBzZWxmLmV4Y2VwdGlvbiA9IGx6bWEuTFpNQUVycm9yCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY21wID0gbHptYS5MWk1BQ29tcHJlc3NvcigpCgogICAgICAgICAgICBlbGlmIGNvbXB0eXBlICE9ICJ0YXIiOgogICAgICAgICAgICAgICAgcmFpc2UgQ29tcHJlc3Npb25FcnJvcigidW5rbm93biBjb21wcmVzc2lvbiB0eXBlICVyIiAlIGNvbXB0eXBlKQoKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9leHRmaWxlb2JqOgogICAgICAgICAgICAgICAgc2VsZi5maWxlb2JqLmNsb3NlKCkKICAgICAgICAgICAgc2VsZi5jbG9zZWQgPSBUcnVlCiAgICAgICAgICAgIHJhaXNlCgogICAgZGVmIF9fZGVsX18oc2VsZik6CiAgICAgICAgaWYgaGFzYXR0cihzZWxmLCAiY2xvc2VkIikgYW5kIG5vdCBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgc2VsZi5jbG9zZSgpCgogICAgZGVmIF9pbml0X3dyaXRlX2d6KHNlbGYpOgogICAgICAgICIiIkluaXRpYWxpemUgZm9yIHdyaXRpbmcgd2l0aCBnemlwIGNvbXByZXNzaW9uLgogICAgICAgICIiIgogICAgICAgIHNlbGYuY21wID0gc2VsZi56bGliLmNvbXByZXNzb2JqKDksIHNlbGYuemxpYi5ERUZMQVRFRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtc2VsZi56bGliLk1BWF9XQklUUywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnpsaWIuREVGX01FTV9MRVZFTCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwKQogICAgICAgIHRpbWVzdGFtcCA9IHN0cnVjdC5wYWNrKCI8TCIsIGludCh0aW1lLnRpbWUoKSkpCiAgICAgICAgc2VsZi5fX3dyaXRlKGIiXDAzN1wyMTNcMDEwXDAxMCIgKyB0aW1lc3RhbXAgKyBiIlwwMDJcMzc3IikKICAgICAgICBpZiBzZWxmLm5hbWUuZW5kc3dpdGgoIi5neiIpOgogICAgICAgICAgICBzZWxmLm5hbWUgPSBzZWxmLm5hbWVbOi0zXQogICAgICAgICMgUkZDMTk1MiBzYXlzIHdlIG11c3QgdXNlIElTTy04ODU5LTEgZm9yIHRoZSBGTkFNRSBmaWVsZC4KICAgICAgICBzZWxmLl9fd3JpdGUoc2VsZi5uYW1lLmVuY29kZSgiaXNvLTg4NTktMSIsICJyZXBsYWNlIikgKyBOVUwpCgogICAgZGVmIHdyaXRlKHNlbGYsIHMpOgogICAgICAgICIiIldyaXRlIHN0cmluZyBzIHRvIHRoZSBzdHJlYW0uCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VsZi5jb21wdHlwZSA9PSAiZ3oiOgogICAgICAgICAgICBzZWxmLmNyYyA9IHNlbGYuemxpYi5jcmMzMihzLCBzZWxmLmNyYykKICAgICAgICBzZWxmLnBvcyArPSBsZW4ocykKICAgICAgICBpZiBzZWxmLmNvbXB0eXBlICE9ICJ0YXIiOgogICAgICAgICAgICBzID0gc2VsZi5jbXAuY29tcHJlc3MocykKICAgICAgICBzZWxmLl9fd3JpdGUocykKCiAgICBkZWYgX193cml0ZShzZWxmLCBzKToKICAgICAgICAiIiJXcml0ZSBzdHJpbmcgcyB0byB0aGUgc3RyZWFtIGlmIGEgd2hvbGUgbmV3IGJsb2NrCiAgICAgICAgICAgaXMgcmVhZHkgdG8gYmUgd3JpdHRlbi4KICAgICAgICAiIiIKICAgICAgICBzZWxmLmJ1ZiArPSBzCiAgICAgICAgd2hpbGUgbGVuKHNlbGYuYnVmKSA+IHNlbGYuYnVmc2l6ZToKICAgICAgICAgICAgc2VsZi5maWxlb2JqLndyaXRlKHNlbGYuYnVmWzpzZWxmLmJ1ZnNpemVdKQogICAgICAgICAgICBzZWxmLmJ1ZiA9IHNlbGYuYnVmW3NlbGYuYnVmc2l6ZTpdCgogICAgZGVmIGNsb3NlKHNlbGYpOgogICAgICAgICIiIkNsb3NlIHRoZSBfU3RyZWFtIG9iamVjdC4gTm8gb3BlcmF0aW9uIHNob3VsZCBiZQogICAgICAgICAgIGRvbmUgb24gaXQgYWZ0ZXJ3YXJkcy4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIHNlbGYubW9kZSA9PSAidyIgYW5kIHNlbGYuY29tcHR5cGUgIT0gInRhciI6CiAgICAgICAgICAgIHNlbGYuYnVmICs9IHNlbGYuY21wLmZsdXNoKCkKCiAgICAgICAgaWYgc2VsZi5tb2RlID09ICJ3IiBhbmQgc2VsZi5idWY6CiAgICAgICAgICAgIHNlbGYuZmlsZW9iai53cml0ZShzZWxmLmJ1ZikKICAgICAgICAgICAgc2VsZi5idWYgPSBiIiIKICAgICAgICAgICAgaWYgc2VsZi5jb21wdHlwZSA9PSAiZ3oiOgogICAgICAgICAgICAgICAgIyBUaGUgbmF0aXZlIHpsaWIgY3JjIGlzIGFuIHVuc2lnbmVkIDMyLWJpdCBpbnRlZ2VyLCBidXQKICAgICAgICAgICAgICAgICMgdGhlIFB5dGhvbiB3cmFwcGVyIGltcGxpY2l0bHkgY2FzdHMgdGhhdCB0byBhIHNpZ25lZCBDCiAgICAgICAgICAgICAgICAjIGxvbmcuICBTbywgb24gYSAzMi1iaXQgYm94IHNlbGYuY3JjIG1heSAibG9vayBuZWdhdGl2ZSIsCiAgICAgICAgICAgICAgICAjIHdoaWxlIHRoZSBzYW1lIGNyYyBvbiBhIDY0LWJpdCBib3ggbWF5ICJsb29rIHBvc2l0aXZlIi4KICAgICAgICAgICAgICAgICMgVG8gYXZvaWQgaXJrc29tZSB3YXJuaW5ncyBmcm9tIHRoZSBgc3RydWN0YCBtb2R1bGUsIGZvcmNlCiAgICAgICAgICAgICAgICAjIGl0IHRvIGxvb2sgcG9zaXRpdmUgb24gYWxsIGJveGVzLgogICAgICAgICAgICAgICAgc2VsZi5maWxlb2JqLndyaXRlKHN0cnVjdC5wYWNrKCI8TCIsIHNlbGYuY3JjICYgMHhmZmZmZmZmZikpCiAgICAgICAgICAgICAgICBzZWxmLmZpbGVvYmoud3JpdGUoc3RydWN0LnBhY2soIjxMIiwgc2VsZi5wb3MgJiAweGZmZmZGRkZGKSkKCiAgICAgICAgaWYgbm90IHNlbGYuX2V4dGZpbGVvYmo6CiAgICAgICAgICAgIHNlbGYuZmlsZW9iai5jbG9zZSgpCgogICAgICAgIHNlbGYuY2xvc2VkID0gVHJ1ZQoKICAgIGRlZiBfaW5pdF9yZWFkX2d6KHNlbGYpOgogICAgICAgICIiIkluaXRpYWxpemUgZm9yIHJlYWRpbmcgYSBnemlwIGNvbXByZXNzZWQgZmlsZW9iai4KICAgICAgICAiIiIKICAgICAgICBzZWxmLmNtcCA9IHNlbGYuemxpYi5kZWNvbXByZXNzb2JqKC1zZWxmLnpsaWIuTUFYX1dCSVRTKQogICAgICAgIHNlbGYuZGJ1ZiA9IGIiIgoKICAgICAgICAjIHRha2VuIGZyb20gZ3ppcC5HemlwRmlsZSB3aXRoIHNvbWUgYWx0ZXJhdGlvbnMKICAgICAgICBpZiBzZWxmLl9fcmVhZCgyKSAhPSBiIlwwMzdcMjEzIjoKICAgICAgICAgICAgcmFpc2UgUmVhZEVycm9yKCJub3QgYSBnemlwIGZpbGUiKQogICAgICAgIGlmIHNlbGYuX19yZWFkKDEpICE9IGIiXDAxMCI6CiAgICAgICAgICAgIHJhaXNlIENvbXByZXNzaW9uRXJyb3IoInVuc3VwcG9ydGVkIGNvbXByZXNzaW9uIG1ldGhvZCIpCgogICAgICAgIGZsYWcgPSBvcmQoc2VsZi5fX3JlYWQoMSkpCiAgICAgICAgc2VsZi5fX3JlYWQoNikKCiAgICAgICAgaWYgZmxhZyAmIDQ6CiAgICAgICAgICAgIHhsZW4gPSBvcmQoc2VsZi5fX3JlYWQoMSkpICsgMjU2ICogb3JkKHNlbGYuX19yZWFkKDEpKQogICAgICAgICAgICBzZWxmLnJlYWQoeGxlbikKICAgICAgICBpZiBmbGFnICYgODoKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIHMgPSBzZWxmLl9fcmVhZCgxKQogICAgICAgICAgICAgICAgaWYgbm90IHMgb3IgcyA9PSBOVUw6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBpZiBmbGFnICYgMTY6CiAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICBzID0gc2VsZi5fX3JlYWQoMSkKICAgICAgICAgICAgICAgIGlmIG5vdCBzIG9yIHMgPT0gTlVMOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgaWYgZmxhZyAmIDI6CiAgICAgICAgICAgIHNlbGYuX19yZWFkKDIpCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBzdHJlYW0ncyBmaWxlIHBvaW50ZXIgcG9zaXRpb24uCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYucG9zCgogICAgZGVmIHNlZWsoc2VsZiwgcG9zPTApOgogICAgICAgICIiIlNldCB0aGUgc3RyZWFtJ3MgZmlsZSBwb2ludGVyIHRvIHBvcy4gTmVnYXRpdmUgc2Vla2luZwogICAgICAgICAgIGlzIGZvcmJpZGRlbi4KICAgICAgICAiIiIKICAgICAgICBpZiBwb3MgLSBzZWxmLnBvcyA+PSAwOgogICAgICAgICAgICBibG9ja3MsIHJlbWFpbmRlciA9IGRpdm1vZChwb3MgLSBzZWxmLnBvcywgc2VsZi5idWZzaXplKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShibG9ja3MpOgogICAgICAgICAgICAgICAgc2VsZi5yZWFkKHNlbGYuYnVmc2l6ZSkKICAgICAgICAgICAgc2VsZi5yZWFkKHJlbWFpbmRlcikKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBTdHJlYW1FcnJvcigic2Vla2luZyBiYWNrd2FyZHMgaXMgbm90IGFsbG93ZWQiKQogICAgICAgIHJldHVybiBzZWxmLnBvcwoKICAgIGRlZiByZWFkKHNlbGYsIHNpemU9Tm9uZSk6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBuZXh0IHNpemUgbnVtYmVyIG9mIGJ5dGVzIGZyb20gdGhlIHN0cmVhbS4KICAgICAgICAgICBJZiBzaXplIGlzIG5vdCBkZWZpbmVkLCByZXR1cm4gYWxsIGJ5dGVzIG9mIHRoZSBzdHJlYW0KICAgICAgICAgICB1cCB0byBFT0YuCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2l6ZSBpcyBOb25lOgogICAgICAgICAgICB0ID0gW10KICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGJ1ZiA9IHNlbGYuX3JlYWQoc2VsZi5idWZzaXplKQogICAgICAgICAgICAgICAgaWYgbm90IGJ1ZjoKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgdC5hcHBlbmQoYnVmKQogICAgICAgICAgICBidWYgPSAiIi5qb2luKHQpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYnVmID0gc2VsZi5fcmVhZChzaXplKQogICAgICAgIHNlbGYucG9zICs9IGxlbihidWYpCiAgICAgICAgcmV0dXJuIGJ1ZgoKICAgIGRlZiBfcmVhZChzZWxmLCBzaXplKToKICAgICAgICAiIiJSZXR1cm4gc2l6ZSBieXRlcyBmcm9tIHRoZSBzdHJlYW0uCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VsZi5jb21wdHlwZSA9PSAidGFyIjoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19yZWFkKHNpemUpCgogICAgICAgIGMgPSBsZW4oc2VsZi5kYnVmKQogICAgICAgIHdoaWxlIGMgPCBzaXplOgogICAgICAgICAgICBidWYgPSBzZWxmLl9fcmVhZChzZWxmLmJ1ZnNpemUpCiAgICAgICAgICAgIGlmIG5vdCBidWY6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBidWYgPSBzZWxmLmNtcC5kZWNvbXByZXNzKGJ1ZikKICAgICAgICAgICAgZXhjZXB0IHNlbGYuZXhjZXB0aW9uOgogICAgICAgICAgICAgICAgcmFpc2UgUmVhZEVycm9yKCJpbnZhbGlkIGNvbXByZXNzZWQgZGF0YSIpCiAgICAgICAgICAgIHNlbGYuZGJ1ZiArPSBidWYKICAgICAgICAgICAgYyArPSBsZW4oYnVmKQogICAgICAgIGJ1ZiA9IHNlbGYuZGJ1Zls6c2l6ZV0KICAgICAgICBzZWxmLmRidWYgPSBzZWxmLmRidWZbc2l6ZTpdCiAgICAgICAgcmV0dXJuIGJ1ZgoKICAgIGRlZiBfX3JlYWQoc2VsZiwgc2l6ZSk6CiAgICAgICAgIiIiUmV0dXJuIHNpemUgYnl0ZXMgZnJvbSBzdHJlYW0uIElmIGludGVybmFsIGJ1ZmZlciBpcyBlbXB0eSwKICAgICAgICAgICByZWFkIGFub3RoZXIgYmxvY2sgZnJvbSB0aGUgc3RyZWFtLgogICAgICAgICIiIgogICAgICAgIGMgPSBsZW4oc2VsZi5idWYpCiAgICAgICAgd2hpbGUgYyA8IHNpemU6CiAgICAgICAgICAgIGJ1ZiA9IHNlbGYuZmlsZW9iai5yZWFkKHNlbGYuYnVmc2l6ZSkKICAgICAgICAgICAgaWYgbm90IGJ1ZjoKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIHNlbGYuYnVmICs9IGJ1ZgogICAgICAgICAgICBjICs9IGxlbihidWYpCiAgICAgICAgYnVmID0gc2VsZi5idWZbOnNpemVdCiAgICAgICAgc2VsZi5idWYgPSBzZWxmLmJ1ZltzaXplOl0KICAgICAgICByZXR1cm4gYnVmCiMgY2xhc3MgX1N0cmVhbQoKY2xhc3MgX1N0cmVhbVByb3h5KG9iamVjdCk6CiAgICAiIiJTbWFsbCBwcm94eSBjbGFzcyB0aGF0IGVuYWJsZXMgdHJhbnNwYXJlbnQgY29tcHJlc3Npb24KICAgICAgIGRldGVjdGlvbiBmb3IgdGhlIFN0cmVhbSBpbnRlcmZhY2UgKG1vZGUgJ3J8KicpLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZpbGVvYmopOgogICAgICAgIHNlbGYuZmlsZW9iaiA9IGZpbGVvYmoKICAgICAgICBzZWxmLmJ1ZiA9IHNlbGYuZmlsZW9iai5yZWFkKEJMT0NLU0laRSkKCiAgICBkZWYgcmVhZChzZWxmLCBzaXplKToKICAgICAgICBzZWxmLnJlYWQgPSBzZWxmLmZpbGVvYmoucmVhZAogICAgICAgIHJldHVybiBzZWxmLmJ1ZgoKICAgIGRlZiBnZXRjb21wdHlwZShzZWxmKToKICAgICAgICBpZiBzZWxmLmJ1Zi5zdGFydHN3aXRoKGIiXHgxZlx4OGJceDA4Iik6CiAgICAgICAgICAgIHJldHVybiAiZ3oiCiAgICAgICAgZWxpZiBzZWxmLmJ1ZlswOjNdID09IGIiQlpoIiBhbmQgc2VsZi5idWZbNDoxMF0gPT0gYiIxQVkmU1kiOgogICAgICAgICAgICByZXR1cm4gImJ6MiIKICAgICAgICBlbGlmIHNlbGYuYnVmLnN0YXJ0c3dpdGgoKGIiXHg1ZFx4MDBceDAwXHg4MCIsIGIiXHhmZDd6WFoiKSk6CiAgICAgICAgICAgIHJldHVybiAieHoiCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuICJ0YXIiCgogICAgZGVmIGNsb3NlKHNlbGYpOgogICAgICAgIHNlbGYuZmlsZW9iai5jbG9zZSgpCiMgY2xhc3MgU3RyZWFtUHJveHkKCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBFeHRyYWN0aW9uIGZpbGUgb2JqZWN0CiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KY2xhc3MgX0ZpbGVJbkZpbGUob2JqZWN0KToKICAgICIiIkEgdGhpbiB3cmFwcGVyIGFyb3VuZCBhbiBleGlzdGluZyBmaWxlIG9iamVjdCB0aGF0CiAgICAgICBwcm92aWRlcyBhIHBhcnQgb2YgaXRzIGRhdGEgYXMgYW4gaW5kaXZpZHVhbCBmaWxlCiAgICAgICBvYmplY3QuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlsZW9iaiwgb2Zmc2V0LCBzaXplLCBibG9ja2luZm89Tm9uZSk6CiAgICAgICAgc2VsZi5maWxlb2JqID0gZmlsZW9iagogICAgICAgIHNlbGYub2Zmc2V0ID0gb2Zmc2V0CiAgICAgICAgc2VsZi5zaXplID0gc2l6ZQogICAgICAgIHNlbGYucG9zaXRpb24gPSAwCiAgICAgICAgc2VsZi5uYW1lID0gZ2V0YXR0cihmaWxlb2JqLCAibmFtZSIsIE5vbmUpCiAgICAgICAgc2VsZi5jbG9zZWQgPSBGYWxzZQoKICAgICAgICBpZiBibG9ja2luZm8gaXMgTm9uZToKICAgICAgICAgICAgYmxvY2tpbmZvID0gWygwLCBzaXplKV0KCiAgICAgICAgIyBDb25zdHJ1Y3QgYSBtYXAgd2l0aCBkYXRhIGFuZCB6ZXJvIGJsb2Nrcy4KICAgICAgICBzZWxmLm1hcF9pbmRleCA9IDAKICAgICAgICBzZWxmLm1hcCA9IFtdCiAgICAgICAgbGFzdHBvcyA9IDAKICAgICAgICByZWFscG9zID0gc2VsZi5vZmZzZXQKICAgICAgICBmb3Igb2Zmc2V0LCBzaXplIGluIGJsb2NraW5mbzoKICAgICAgICAgICAgaWYgb2Zmc2V0ID4gbGFzdHBvczoKICAgICAgICAgICAgICAgIHNlbGYubWFwLmFwcGVuZCgoRmFsc2UsIGxhc3Rwb3MsIG9mZnNldCwgTm9uZSkpCiAgICAgICAgICAgIHNlbGYubWFwLmFwcGVuZCgoVHJ1ZSwgb2Zmc2V0LCBvZmZzZXQgKyBzaXplLCByZWFscG9zKSkKICAgICAgICAgICAgcmVhbHBvcyArPSBzaXplCiAgICAgICAgICAgIGxhc3Rwb3MgPSBvZmZzZXQgKyBzaXplCiAgICAgICAgaWYgbGFzdHBvcyA8IHNlbGYuc2l6ZToKICAgICAgICAgICAgc2VsZi5tYXAuYXBwZW5kKChGYWxzZSwgbGFzdHBvcywgc2VsZi5zaXplLCBOb25lKSkKCiAgICBkZWYgZmx1c2goc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiByZWFkYWJsZShzZWxmKToKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiB3cml0YWJsZShzZWxmKToKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgc2Vla2FibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuZmlsZW9iai5zZWVrYWJsZSgpCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBjdXJyZW50IGZpbGUgcG9zaXRpb24uCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYucG9zaXRpb24KCiAgICBkZWYgc2VlayhzZWxmLCBwb3NpdGlvbiwgd2hlbmNlPWlvLlNFRUtfU0VUKToKICAgICAgICAiIiJTZWVrIHRvIGEgcG9zaXRpb24gaW4gdGhlIGZpbGUuCiAgICAgICAgIiIiCiAgICAgICAgaWYgd2hlbmNlID09IGlvLlNFRUtfU0VUOgogICAgICAgICAgICBzZWxmLnBvc2l0aW9uID0gbWluKG1heChwb3NpdGlvbiwgMCksIHNlbGYuc2l6ZSkKICAgICAgICBlbGlmIHdoZW5jZSA9PSBpby5TRUVLX0NVUjoKICAgICAgICAgICAgaWYgcG9zaXRpb24gPCAwOgogICAgICAgICAgICAgICAgc2VsZi5wb3NpdGlvbiA9IG1heChzZWxmLnBvc2l0aW9uICsgcG9zaXRpb24sIDApCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLnBvc2l0aW9uID0gbWluKHNlbGYucG9zaXRpb24gKyBwb3NpdGlvbiwgc2VsZi5zaXplKQogICAgICAgIGVsaWYgd2hlbmNlID09IGlvLlNFRUtfRU5EOgogICAgICAgICAgICBzZWxmLnBvc2l0aW9uID0gbWF4KG1pbihzZWxmLnNpemUgKyBwb3NpdGlvbiwgc2VsZi5zaXplKSwgMCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIGFyZ3VtZW50IikKICAgICAgICByZXR1cm4gc2VsZi5wb3NpdGlvbgoKICAgIGRlZiByZWFkKHNlbGYsIHNpemU9Tm9uZSk6CiAgICAgICAgIiIiUmVhZCBkYXRhIGZyb20gdGhlIGZpbGUuCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2l6ZSBpcyBOb25lOgogICAgICAgICAgICBzaXplID0gc2VsZi5zaXplIC0gc2VsZi5wb3NpdGlvbgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNpemUgPSBtaW4oc2l6ZSwgc2VsZi5zaXplIC0gc2VsZi5wb3NpdGlvbikKCiAgICAgICAgYnVmID0gYiIiCiAgICAgICAgd2hpbGUgc2l6ZSA+IDA6CiAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICBkYXRhLCBzdGFydCwgc3RvcCwgb2Zmc2V0ID0gc2VsZi5tYXBbc2VsZi5tYXBfaW5kZXhdCiAgICAgICAgICAgICAgICBpZiBzdGFydCA8PSBzZWxmLnBvc2l0aW9uIDwgc3RvcDoKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLm1hcF9pbmRleCArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5tYXBfaW5kZXggPT0gbGVuKHNlbGYubWFwKToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXBfaW5kZXggPSAwCiAgICAgICAgICAgIGxlbmd0aCA9IG1pbihzaXplLCBzdG9wIC0gc2VsZi5wb3NpdGlvbikKICAgICAgICAgICAgaWYgZGF0YToKICAgICAgICAgICAgICAgIHNlbGYuZmlsZW9iai5zZWVrKG9mZnNldCArIChzZWxmLnBvc2l0aW9uIC0gc3RhcnQpKQogICAgICAgICAgICAgICAgYnVmICs9IHNlbGYuZmlsZW9iai5yZWFkKGxlbmd0aCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGJ1ZiArPSBOVUwgKiBsZW5ndGgKICAgICAgICAgICAgc2l6ZSAtPSBsZW5ndGgKICAgICAgICAgICAgc2VsZi5wb3NpdGlvbiArPSBsZW5ndGgKICAgICAgICByZXR1cm4gYnVmCgogICAgZGVmIHJlYWRpbnRvKHNlbGYsIGIpOgogICAgICAgIGJ1ZiA9IHNlbGYucmVhZChsZW4oYikpCiAgICAgICAgYls6bGVuKGJ1ZildID0gYnVmCiAgICAgICAgcmV0dXJuIGxlbihidWYpCgogICAgZGVmIGNsb3NlKHNlbGYpOgogICAgICAgIHNlbGYuY2xvc2VkID0gVHJ1ZQojY2xhc3MgX0ZpbGVJbkZpbGUKCmNsYXNzIEV4RmlsZU9iamVjdChpby5CdWZmZXJlZFJlYWRlcik6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRhcmZpbGUsIHRhcmluZm8pOgogICAgICAgIGZpbGVvYmogPSBfRmlsZUluRmlsZSh0YXJmaWxlLmZpbGVvYmosIHRhcmluZm8ub2Zmc2V0X2RhdGEsCiAgICAgICAgICAgICAgICB0YXJpbmZvLnNpemUsIHRhcmluZm8uc3BhcnNlKQogICAgICAgIHN1cGVyKCkuX19pbml0X18oZmlsZW9iaikKI2NsYXNzIEV4RmlsZU9iamVjdAoKIy0tLS0tLS0tLS0tLS0tLS0tLQojIEV4cG9ydGVkIENsYXNzZXMKIy0tLS0tLS0tLS0tLS0tLS0tLQpjbGFzcyBUYXJJbmZvKG9iamVjdCk6CiAgICAiIiJJbmZvcm1hdGlvbmFsIGNsYXNzIHdoaWNoIGhvbGRzIHRoZSBkZXRhaWxzIGFib3V0IGFuCiAgICAgICBhcmNoaXZlIG1lbWJlciBnaXZlbiBieSBhIHRhciBoZWFkZXIgYmxvY2suCiAgICAgICBUYXJJbmZvIG9iamVjdHMgYXJlIHJldHVybmVkIGJ5IFRhckZpbGUuZ2V0bWVtYmVyKCksCiAgICAgICBUYXJGaWxlLmdldG1lbWJlcnMoKSBhbmQgVGFyRmlsZS5nZXR0YXJpbmZvKCkgYW5kIGFyZQogICAgICAgdXN1YWxseSBjcmVhdGVkIGludGVybmFsbHkuCiAgICAiIiIKCiAgICBfX3Nsb3RzX18gPSAoIm5hbWUiLCAibW9kZSIsICJ1aWQiLCAiZ2lkIiwgInNpemUiLCAibXRpbWUiLAogICAgICAgICAgICAgICAgICJjaGtzdW0iLCAidHlwZSIsICJsaW5rbmFtZSIsICJ1bmFtZSIsICJnbmFtZSIsCiAgICAgICAgICAgICAgICAgImRldm1ham9yIiwgImRldm1pbm9yIiwKICAgICAgICAgICAgICAgICAib2Zmc2V0IiwgIm9mZnNldF9kYXRhIiwgInBheF9oZWFkZXJzIiwgInNwYXJzZSIsCiAgICAgICAgICAgICAgICAgInRhcmZpbGUiLCAiX3NwYXJzZV9zdHJ1Y3RzIiwgIl9saW5rX3RhcmdldCIpCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWU9IiIpOgogICAgICAgICIiIkNvbnN0cnVjdCBhIFRhckluZm8gb2JqZWN0LiBuYW1lIGlzIHRoZSBvcHRpb25hbCBuYW1lCiAgICAgICAgICAgb2YgdGhlIG1lbWJlci4KICAgICAgICAiIiIKICAgICAgICBzZWxmLm5hbWUgPSBuYW1lICAgICAgICAjIG1lbWJlciBuYW1lCiAgICAgICAgc2VsZi5tb2RlID0gMG82NDQgICAgICAgIyBmaWxlIHBlcm1pc3Npb25zCiAgICAgICAgc2VsZi51aWQgPSAwICAgICAgICAgICAgIyB1c2VyIGlkCiAgICAgICAgc2VsZi5naWQgPSAwICAgICAgICAgICAgIyBncm91cCBpZAogICAgICAgIHNlbGYuc2l6ZSA9IDAgICAgICAgICAgICMgZmlsZSBzaXplCiAgICAgICAgc2VsZi5tdGltZSA9IDAgICAgICAgICAgIyBtb2RpZmljYXRpb24gdGltZQogICAgICAgIHNlbGYuY2hrc3VtID0gMCAgICAgICAgICMgaGVhZGVyIGNoZWNrc3VtCiAgICAgICAgc2VsZi50eXBlID0gUkVHVFlQRSAgICAgIyBtZW1iZXIgdHlwZQogICAgICAgIHNlbGYubGlua25hbWUgPSAiIiAgICAgICMgbGluayBuYW1lCiAgICAgICAgc2VsZi51bmFtZSA9ICIiICAgICAgICAgIyB1c2VyIG5hbWUKICAgICAgICBzZWxmLmduYW1lID0gIiIgICAgICAgICAjIGdyb3VwIG5hbWUKICAgICAgICBzZWxmLmRldm1ham9yID0gMCAgICAgICAjIGRldmljZSBtYWpvciBudW1iZXIKICAgICAgICBzZWxmLmRldm1pbm9yID0gMCAgICAgICAjIGRldmljZSBtaW5vciBudW1iZXIKCiAgICAgICAgc2VsZi5vZmZzZXQgPSAwICAgICAgICAgIyB0aGUgdGFyIGhlYWRlciBzdGFydHMgaGVyZQogICAgICAgIHNlbGYub2Zmc2V0X2RhdGEgPSAwICAgICMgdGhlIGZpbGUncyBkYXRhIHN0YXJ0cyBoZXJlCgogICAgICAgIHNlbGYuc3BhcnNlID0gTm9uZSAgICAgICMgc3BhcnNlIG1lbWJlciBpbmZvcm1hdGlvbgogICAgICAgIHNlbGYucGF4X2hlYWRlcnMgPSB7fSAgICMgcGF4IGhlYWRlciBpbmZvcm1hdGlvbgoKICAgICMgSW4gcGF4IGhlYWRlcnMgdGhlICJuYW1lIiBhbmQgImxpbmtuYW1lIiBmaWVsZCBhcmUgY2FsbGVkCiAgICAjICJwYXRoIiBhbmQgImxpbmtwYXRoIi4KICAgIGRlZiBfZ2V0cGF0aChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5uYW1lCiAgICBkZWYgX3NldHBhdGgoc2VsZiwgbmFtZSk6CiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQogICAgcGF0aCA9IHByb3BlcnR5KF9nZXRwYXRoLCBfc2V0cGF0aCkKCiAgICBkZWYgX2dldGxpbmtwYXRoKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmxpbmtuYW1lCiAgICBkZWYgX3NldGxpbmtwYXRoKHNlbGYsIGxpbmtuYW1lKToKICAgICAgICBzZWxmLmxpbmtuYW1lID0gbGlua25hbWUKICAgIGxpbmtwYXRoID0gcHJvcGVydHkoX2dldGxpbmtwYXRoLCBfc2V0bGlua3BhdGgpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAiPCVzICVyIGF0ICUjeD4iICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLHNlbGYubmFtZSxpZChzZWxmKSkKCiAgICBkZWYgZ2V0X2luZm8oc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBUYXJJbmZvJ3MgYXR0cmlidXRlcyBhcyBhIGRpY3Rpb25hcnkuCiAgICAgICAgIiIiCiAgICAgICAgaW5mbyA9IHsKICAgICAgICAgICAgIm5hbWUiOiAgICAgc2VsZi5uYW1lLAogICAgICAgICAgICAibW9kZSI6ICAgICBzZWxmLm1vZGUgJiAwbzc3NzcsCiAgICAgICAgICAgICJ1aWQiOiAgICAgIHNlbGYudWlkLAogICAgICAgICAgICAiZ2lkIjogICAgICBzZWxmLmdpZCwKICAgICAgICAgICAgInNpemUiOiAgICAgc2VsZi5zaXplLAogICAgICAgICAgICAibXRpbWUiOiAgICBzZWxmLm10aW1lLAogICAgICAgICAgICAiY2hrc3VtIjogICBzZWxmLmNoa3N1bSwKICAgICAgICAgICAgInR5cGUiOiAgICAgc2VsZi50eXBlLAogICAgICAgICAgICAibGlua25hbWUiOiBzZWxmLmxpbmtuYW1lLAogICAgICAgICAgICAidW5hbWUiOiAgICBzZWxmLnVuYW1lLAogICAgICAgICAgICAiZ25hbWUiOiAgICBzZWxmLmduYW1lLAogICAgICAgICAgICAiZGV2bWFqb3IiOiBzZWxmLmRldm1ham9yLAogICAgICAgICAgICAiZGV2bWlub3IiOiBzZWxmLmRldm1pbm9yCiAgICAgICAgfQoKICAgICAgICBpZiBpbmZvWyJ0eXBlIl0gPT0gRElSVFlQRSBhbmQgbm90IGluZm9bIm5hbWUiXS5lbmRzd2l0aCgiLyIpOgogICAgICAgICAgICBpbmZvWyJuYW1lIl0gKz0gIi8iCgogICAgICAgIHJldHVybiBpbmZvCgogICAgZGVmIHRvYnVmKHNlbGYsIGZvcm1hdD1ERUZBVUxUX0ZPUk1BVCwgZW5jb2Rpbmc9RU5DT0RJTkcsIGVycm9ycz0ic3Vycm9nYXRlZXNjYXBlIik6CiAgICAgICAgIiIiUmV0dXJuIGEgdGFyIGhlYWRlciBhcyBhIHN0cmluZyBvZiA1MTIgYnl0ZSBibG9ja3MuCiAgICAgICAgIiIiCiAgICAgICAgaW5mbyA9IHNlbGYuZ2V0X2luZm8oKQoKICAgICAgICBpZiBmb3JtYXQgPT0gVVNUQVJfRk9STUFUOgogICAgICAgICAgICByZXR1cm4gc2VsZi5jcmVhdGVfdXN0YXJfaGVhZGVyKGluZm8sIGVuY29kaW5nLCBlcnJvcnMpCiAgICAgICAgZWxpZiBmb3JtYXQgPT0gR05VX0ZPUk1BVDoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuY3JlYXRlX2dudV9oZWFkZXIoaW5mbywgZW5jb2RpbmcsIGVycm9ycykKICAgICAgICBlbGlmIGZvcm1hdCA9PSBQQVhfRk9STUFUOgogICAgICAgICAgICByZXR1cm4gc2VsZi5jcmVhdGVfcGF4X2hlYWRlcihpbmZvLCBlbmNvZGluZykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIGZvcm1hdCIpCgogICAgZGVmIGNyZWF0ZV91c3Rhcl9oZWFkZXIoc2VsZiwgaW5mbywgZW5jb2RpbmcsIGVycm9ycyk6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBvYmplY3QgYXMgYSB1c3RhciBoZWFkZXIgYmxvY2suCiAgICAgICAgIiIiCiAgICAgICAgaW5mb1sibWFnaWMiXSA9IFBPU0lYX01BR0lDCgogICAgICAgIGlmIGxlbihpbmZvWyJsaW5rbmFtZSJdKSA+IExFTkdUSF9MSU5LOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJsaW5rbmFtZSBpcyB0b28gbG9uZyIpCgogICAgICAgIGlmIGxlbihpbmZvWyJuYW1lIl0pID4gTEVOR1RIX05BTUU6CiAgICAgICAgICAgIGluZm9bInByZWZpeCJdLCBpbmZvWyJuYW1lIl0gPSBzZWxmLl9wb3NpeF9zcGxpdF9uYW1lKGluZm9bIm5hbWUiXSkKCiAgICAgICAgcmV0dXJuIHNlbGYuX2NyZWF0ZV9oZWFkZXIoaW5mbywgVVNUQVJfRk9STUFULCBlbmNvZGluZywgZXJyb3JzKQoKICAgIGRlZiBjcmVhdGVfZ251X2hlYWRlcihzZWxmLCBpbmZvLCBlbmNvZGluZywgZXJyb3JzKToKICAgICAgICAiIiJSZXR1cm4gdGhlIG9iamVjdCBhcyBhIEdOVSBoZWFkZXIgYmxvY2sgc2VxdWVuY2UuCiAgICAgICAgIiIiCiAgICAgICAgaW5mb1sibWFnaWMiXSA9IEdOVV9NQUdJQwoKICAgICAgICBidWYgPSBiIiIKICAgICAgICBpZiBsZW4oaW5mb1sibGlua25hbWUiXSkgPiBMRU5HVEhfTElOSzoKICAgICAgICAgICAgYnVmICs9IHNlbGYuX2NyZWF0ZV9nbnVfbG9uZ19oZWFkZXIoaW5mb1sibGlua25hbWUiXSwgR05VVFlQRV9MT05HTElOSywgZW5jb2RpbmcsIGVycm9ycykKCiAgICAgICAgaWYgbGVuKGluZm9bIm5hbWUiXSkgPiBMRU5HVEhfTkFNRToKICAgICAgICAgICAgYnVmICs9IHNlbGYuX2NyZWF0ZV9nbnVfbG9uZ19oZWFkZXIoaW5mb1sibmFtZSJdLCBHTlVUWVBFX0xPTkdOQU1FLCBlbmNvZGluZywgZXJyb3JzKQoKICAgICAgICByZXR1cm4gYnVmICsgc2VsZi5fY3JlYXRlX2hlYWRlcihpbmZvLCBHTlVfRk9STUFULCBlbmNvZGluZywgZXJyb3JzKQoKICAgIGRlZiBjcmVhdGVfcGF4X2hlYWRlcihzZWxmLCBpbmZvLCBlbmNvZGluZyk6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBvYmplY3QgYXMgYSB1c3RhciBoZWFkZXIgYmxvY2suIElmIGl0IGNhbm5vdCBiZQogICAgICAgICAgIHJlcHJlc2VudGVkIHRoaXMgd2F5LCBwcmVwZW5kIGEgcGF4IGV4dGVuZGVkIGhlYWRlciBzZXF1ZW5jZQogICAgICAgICAgIHdpdGggc3VwcGxlbWVudCBpbmZvcm1hdGlvbi4KICAgICAgICAiIiIKICAgICAgICBpbmZvWyJtYWdpYyJdID0gUE9TSVhfTUFHSUMKICAgICAgICBwYXhfaGVhZGVycyA9IHNlbGYucGF4X2hlYWRlcnMuY29weSgpCgogICAgICAgICMgVGVzdCBzdHJpbmcgZmllbGRzIGZvciB2YWx1ZXMgdGhhdCBleGNlZWQgdGhlIGZpZWxkIGxlbmd0aCBvciBjYW5ub3QKICAgICAgICAjIGJlIHJlcHJlc2VudGVkIGluIEFTQ0lJIGVuY29kaW5nLgogICAgICAgIGZvciBuYW1lLCBobmFtZSwgbGVuZ3RoIGluICgKICAgICAgICAgICAgICAgICgibmFtZSIsICJwYXRoIiwgTEVOR1RIX05BTUUpLCAoImxpbmtuYW1lIiwgImxpbmtwYXRoIiwgTEVOR1RIX0xJTkspLAogICAgICAgICAgICAgICAgKCJ1bmFtZSIsICJ1bmFtZSIsIDMyKSwgKCJnbmFtZSIsICJnbmFtZSIsIDMyKSk6CgogICAgICAgICAgICBpZiBobmFtZSBpbiBwYXhfaGVhZGVyczoKICAgICAgICAgICAgICAgICMgVGhlIHBheCBoZWFkZXIgaGFzIHByaW9yaXR5LgogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICMgVHJ5IHRvIGVuY29kZSB0aGUgc3RyaW5nIGFzIEFTQ0lJLgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpbmZvW25hbWVdLmVuY29kZSgiYXNjaWkiLCAic3RyaWN0IikKICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVFbmNvZGVFcnJvcjoKICAgICAgICAgICAgICAgIHBheF9oZWFkZXJzW2huYW1lXSA9IGluZm9bbmFtZV0KICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICBpZiBsZW4oaW5mb1tuYW1lXSkgPiBsZW5ndGg6CiAgICAgICAgICAgICAgICBwYXhfaGVhZGVyc1tobmFtZV0gPSBpbmZvW25hbWVdCgogICAgICAgICMgVGVzdCBudW1iZXIgZmllbGRzIGZvciB2YWx1ZXMgdGhhdCBleGNlZWQgdGhlIGZpZWxkIGxpbWl0IG9yIHZhbHVlcwogICAgICAgICMgdGhhdCBsaWtlIHRvIGJlIHN0b3JlZCBhcyBmbG9hdC4KICAgICAgICBmb3IgbmFtZSwgZGlnaXRzIGluICgoInVpZCIsIDgpLCAoImdpZCIsIDgpLCAoInNpemUiLCAxMiksICgibXRpbWUiLCAxMikpOgogICAgICAgICAgICBpZiBuYW1lIGluIHBheF9oZWFkZXJzOgogICAgICAgICAgICAgICAgIyBUaGUgcGF4IGhlYWRlciBoYXMgcHJpb3JpdHkuIEF2b2lkIG92ZXJmbG93LgogICAgICAgICAgICAgICAgaW5mb1tuYW1lXSA9IDAKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICB2YWwgPSBpbmZvW25hbWVdCiAgICAgICAgICAgIGlmIG5vdCAwIDw9IHZhbCA8IDggKiogKGRpZ2l0cyAtIDEpIG9yIGlzaW5zdGFuY2UodmFsLCBmbG9hdCk6CiAgICAgICAgICAgICAgICBwYXhfaGVhZGVyc1tuYW1lXSA9IHN0cih2YWwpCiAgICAgICAgICAgICAgICBpbmZvW25hbWVdID0gMAoKICAgICAgICAjIENyZWF0ZSBhIHBheCBleHRlbmRlZCBoZWFkZXIgaWYgbmVjZXNzYXJ5LgogICAgICAgIGlmIHBheF9oZWFkZXJzOgogICAgICAgICAgICBidWYgPSBzZWxmLl9jcmVhdGVfcGF4X2dlbmVyaWNfaGVhZGVyKHBheF9oZWFkZXJzLCBYSERUWVBFLCBlbmNvZGluZykKICAgICAgICBlbHNlOgogICAgICAgICAgICBidWYgPSBiIiIKCiAgICAgICAgcmV0dXJuIGJ1ZiArIHNlbGYuX2NyZWF0ZV9oZWFkZXIoaW5mbywgVVNUQVJfRk9STUFULCAiYXNjaWkiLCAicmVwbGFjZSIpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgY3JlYXRlX3BheF9nbG9iYWxfaGVhZGVyKGNscywgcGF4X2hlYWRlcnMpOgogICAgICAgICIiIlJldHVybiB0aGUgb2JqZWN0IGFzIGEgcGF4IGdsb2JhbCBoZWFkZXIgYmxvY2sgc2VxdWVuY2UuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIGNscy5fY3JlYXRlX3BheF9nZW5lcmljX2hlYWRlcihwYXhfaGVhZGVycywgWEdMVFlQRSwgInV0Zi04IikKCiAgICBkZWYgX3Bvc2l4X3NwbGl0X25hbWUoc2VsZiwgbmFtZSk6CiAgICAgICAgIiIiU3BsaXQgYSBuYW1lIGxvbmdlciB0aGFuIDEwMCBjaGFycyBpbnRvIGEgcHJlZml4CiAgICAgICAgICAgYW5kIGEgbmFtZSBwYXJ0LgogICAgICAgICIiIgogICAgICAgIHByZWZpeCA9IG5hbWVbOkxFTkdUSF9QUkVGSVggKyAxXQogICAgICAgIHdoaWxlIHByZWZpeCBhbmQgcHJlZml4Wy0xXSAhPSAiLyI6CiAgICAgICAgICAgIHByZWZpeCA9IHByZWZpeFs6LTFdCgogICAgICAgIG5hbWUgPSBuYW1lW2xlbihwcmVmaXgpOl0KICAgICAgICBwcmVmaXggPSBwcmVmaXhbOi0xXQoKICAgICAgICBpZiBub3QgcHJlZml4IG9yIGxlbihuYW1lKSA+IExFTkdUSF9OQU1FOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJuYW1lIGlzIHRvbyBsb25nIikKICAgICAgICByZXR1cm4gcHJlZml4LCBuYW1lCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIF9jcmVhdGVfaGVhZGVyKGluZm8sIGZvcm1hdCwgZW5jb2RpbmcsIGVycm9ycyk6CiAgICAgICAgIiIiUmV0dXJuIGEgaGVhZGVyIGJsb2NrLiBpbmZvIGlzIGEgZGljdGlvbmFyeSB3aXRoIGZpbGUKICAgICAgICAgICBpbmZvcm1hdGlvbiwgZm9ybWF0IG11c3QgYmUgb25lIG9mIHRoZSAqX0ZPUk1BVCBjb25zdGFudHMuCiAgICAgICAgIiIiCiAgICAgICAgcGFydHMgPSBbCiAgICAgICAgICAgIHN0bihpbmZvLmdldCgibmFtZSIsICIiKSwgMTAwLCBlbmNvZGluZywgZXJyb3JzKSwKICAgICAgICAgICAgaXRuKGluZm8uZ2V0KCJtb2RlIiwgMCkgJiAwbzc3NzcsIDgsIGZvcm1hdCksCiAgICAgICAgICAgIGl0bihpbmZvLmdldCgidWlkIiwgMCksIDgsIGZvcm1hdCksCiAgICAgICAgICAgIGl0bihpbmZvLmdldCgiZ2lkIiwgMCksIDgsIGZvcm1hdCksCiAgICAgICAgICAgIGl0bihpbmZvLmdldCgic2l6ZSIsIDApLCAxMiwgZm9ybWF0KSwKICAgICAgICAgICAgaXRuKGluZm8uZ2V0KCJtdGltZSIsIDApLCAxMiwgZm9ybWF0KSwKICAgICAgICAgICAgYiIgICAgICAgICIsICMgY2hlY2tzdW0gZmllbGQKICAgICAgICAgICAgaW5mby5nZXQoInR5cGUiLCBSRUdUWVBFKSwKICAgICAgICAgICAgc3RuKGluZm8uZ2V0KCJsaW5rbmFtZSIsICIiKSwgMTAwLCBlbmNvZGluZywgZXJyb3JzKSwKICAgICAgICAgICAgaW5mby5nZXQoIm1hZ2ljIiwgUE9TSVhfTUFHSUMpLAogICAgICAgICAgICBzdG4oaW5mby5nZXQoInVuYW1lIiwgIiIpLCAzMiwgZW5jb2RpbmcsIGVycm9ycyksCiAgICAgICAgICAgIHN0bihpbmZvLmdldCgiZ25hbWUiLCAiIiksIDMyLCBlbmNvZGluZywgZXJyb3JzKSwKICAgICAgICAgICAgaXRuKGluZm8uZ2V0KCJkZXZtYWpvciIsIDApLCA4LCBmb3JtYXQpLAogICAgICAgICAgICBpdG4oaW5mby5nZXQoImRldm1pbm9yIiwgMCksIDgsIGZvcm1hdCksCiAgICAgICAgICAgIHN0bihpbmZvLmdldCgicHJlZml4IiwgIiIpLCAxNTUsIGVuY29kaW5nLCBlcnJvcnMpCiAgICAgICAgXQoKICAgICAgICBidWYgPSBzdHJ1Y3QucGFjaygiJWRzIiAlIEJMT0NLU0laRSwgYiIiLmpvaW4ocGFydHMpKQogICAgICAgIGNoa3N1bSA9IGNhbGNfY2hrc3VtcyhidWZbLUJMT0NLU0laRTpdKVswXQogICAgICAgIGJ1ZiA9IGJ1Zls6LTM2NF0gKyBieXRlcygiJTA2b1wwIiAlIGNoa3N1bSwgImFzY2lpIikgKyBidWZbLTM1NzpdCiAgICAgICAgcmV0dXJuIGJ1ZgoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBfY3JlYXRlX3BheWxvYWQocGF5bG9hZCk6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBzdHJpbmcgcGF5bG9hZCBmaWxsZWQgd2l0aCB6ZXJvIGJ5dGVzCiAgICAgICAgICAgdXAgdG8gdGhlIG5leHQgNTEyIGJ5dGUgYm9yZGVyLgogICAgICAgICIiIgogICAgICAgIGJsb2NrcywgcmVtYWluZGVyID0gZGl2bW9kKGxlbihwYXlsb2FkKSwgQkxPQ0tTSVpFKQogICAgICAgIGlmIHJlbWFpbmRlciA+IDA6CiAgICAgICAgICAgIHBheWxvYWQgKz0gKEJMT0NLU0laRSAtIHJlbWFpbmRlcikgKiBOVUwKICAgICAgICByZXR1cm4gcGF5bG9hZAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIF9jcmVhdGVfZ251X2xvbmdfaGVhZGVyKGNscywgbmFtZSwgdHlwZSwgZW5jb2RpbmcsIGVycm9ycyk6CiAgICAgICAgIiIiUmV0dXJuIGEgR05VVFlQRV9MT05HTkFNRSBvciBHTlVUWVBFX0xPTkdMSU5LIHNlcXVlbmNlCiAgICAgICAgICAgZm9yIG5hbWUuCiAgICAgICAgIiIiCiAgICAgICAgbmFtZSA9IG5hbWUuZW5jb2RlKGVuY29kaW5nLCBlcnJvcnMpICsgTlVMCgogICAgICAgIGluZm8gPSB7fQogICAgICAgIGluZm9bIm5hbWUiXSA9ICIuLy4vQExvbmdMaW5rIgogICAgICAgIGluZm9bInR5cGUiXSA9IHR5cGUKICAgICAgICBpbmZvWyJzaXplIl0gPSBsZW4obmFtZSkKICAgICAgICBpbmZvWyJtYWdpYyJdID0gR05VX01BR0lDCgogICAgICAgICMgY3JlYXRlIGV4dGVuZGVkIGhlYWRlciArIG5hbWUgYmxvY2tzLgogICAgICAgIHJldHVybiBjbHMuX2NyZWF0ZV9oZWFkZXIoaW5mbywgVVNUQVJfRk9STUFULCBlbmNvZGluZywgZXJyb3JzKSArIFwKICAgICAgICAgICAgICAgIGNscy5fY3JlYXRlX3BheWxvYWQobmFtZSkKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBfY3JlYXRlX3BheF9nZW5lcmljX2hlYWRlcihjbHMsIHBheF9oZWFkZXJzLCB0eXBlLCBlbmNvZGluZyk6CiAgICAgICAgIiIiUmV0dXJuIGEgUE9TSVguMS0yMDA4IGV4dGVuZGVkIG9yIGdsb2JhbCBoZWFkZXIgc2VxdWVuY2UKICAgICAgICAgICB0aGF0IGNvbnRhaW5zIGEgbGlzdCBvZiBrZXl3b3JkLCB2YWx1ZSBwYWlycy4gVGhlIHZhbHVlcwogICAgICAgICAgIG11c3QgYmUgc3RyaW5ncy4KICAgICAgICAiIiIKICAgICAgICAjIENoZWNrIGlmIG9uZSBvZiB0aGUgZmllbGRzIGNvbnRhaW5zIHN1cnJvZ2F0ZSBjaGFyYWN0ZXJzIGFuZCB0aGVyZWJ5CiAgICAgICAgIyBmb3JjZXMgaGRyY2hhcnNldD1CSU5BUlksIHNlZSBfcHJvY19wYXgoKSBmb3IgbW9yZSBpbmZvcm1hdGlvbi4KICAgICAgICBiaW5hcnkgPSBGYWxzZQogICAgICAgIGZvciBrZXl3b3JkLCB2YWx1ZSBpbiBwYXhfaGVhZGVycy5pdGVtcygpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB2YWx1ZS5lbmNvZGUoInV0Zi04IiwgInN0cmljdCIpCiAgICAgICAgICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6CiAgICAgICAgICAgICAgICBiaW5hcnkgPSBUcnVlCiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICByZWNvcmRzID0gYiIiCiAgICAgICAgaWYgYmluYXJ5OgogICAgICAgICAgICAjIFB1dCB0aGUgaGRyY2hhcnNldCBmaWVsZCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBoZWFkZXIuCiAgICAgICAgICAgIHJlY29yZHMgKz0gYiIyMSBoZHJjaGFyc2V0PUJJTkFSWVxuIgoKICAgICAgICBmb3Iga2V5d29yZCwgdmFsdWUgaW4gcGF4X2hlYWRlcnMuaXRlbXMoKToKICAgICAgICAgICAga2V5d29yZCA9IGtleXdvcmQuZW5jb2RlKCJ1dGYtOCIpCiAgICAgICAgICAgIGlmIGJpbmFyeToKICAgICAgICAgICAgICAgICMgVHJ5IHRvIHJlc3RvcmUgdGhlIG9yaWdpbmFsIGJ5dGUgcmVwcmVzZW50YXRpb24gb2YgYHZhbHVlJy4KICAgICAgICAgICAgICAgICMgTmVlZGxlc3MgdG8gc2F5LCB0aGF0IHRoZSBlbmNvZGluZyBtdXN0IG1hdGNoIHRoZSBzdHJpbmcuCiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmVuY29kZShlbmNvZGluZywgInN1cnJvZ2F0ZWVzY2FwZSIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmVuY29kZSgidXRmLTgiKQoKICAgICAgICAgICAgbCA9IGxlbihrZXl3b3JkKSArIGxlbih2YWx1ZSkgKyAzICAgIyAnICcgKyAnPScgKyAnXG4nCiAgICAgICAgICAgIG4gPSBwID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgbiA9IGwgKyBsZW4oc3RyKHApKQogICAgICAgICAgICAgICAgaWYgbiA9PSBwOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBwID0gbgogICAgICAgICAgICByZWNvcmRzICs9IGJ5dGVzKHN0cihwKSwgImFzY2lpIikgKyBiIiAiICsga2V5d29yZCArIGIiPSIgKyB2YWx1ZSArIGIiXG4iCgogICAgICAgICMgV2UgdXNlIGEgaGFyZGNvZGVkICIuLy4vQFBheEhlYWRlciIgbmFtZSBsaWtlIHN0YXIgZG9lcwogICAgICAgICMgaW5zdGVhZCBvZiB0aGUgb25lIHRoYXQgUE9TSVggcmVjb21tZW5kcy4KICAgICAgICBpbmZvID0ge30KICAgICAgICBpbmZvWyJuYW1lIl0gPSAiLi8uL0BQYXhIZWFkZXIiCiAgICAgICAgaW5mb1sidHlwZSJdID0gdHlwZQogICAgICAgIGluZm9bInNpemUiXSA9IGxlbihyZWNvcmRzKQogICAgICAgIGluZm9bIm1hZ2ljIl0gPSBQT1NJWF9NQUdJQwoKICAgICAgICAjIENyZWF0ZSBwYXggaGVhZGVyICsgcmVjb3JkIGJsb2Nrcy4KICAgICAgICByZXR1cm4gY2xzLl9jcmVhdGVfaGVhZGVyKGluZm8sIFVTVEFSX0ZPUk1BVCwgImFzY2lpIiwgInJlcGxhY2UiKSArIFwKICAgICAgICAgICAgICAgIGNscy5fY3JlYXRlX3BheWxvYWQocmVjb3JkcykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tYnVmKGNscywgYnVmLCBlbmNvZGluZywgZXJyb3JzKToKICAgICAgICAiIiJDb25zdHJ1Y3QgYSBUYXJJbmZvIG9iamVjdCBmcm9tIGEgNTEyIGJ5dGUgYnl0ZXMgb2JqZWN0LgogICAgICAgICIiIgogICAgICAgIGlmIGxlbihidWYpID09IDA6CiAgICAgICAgICAgIHJhaXNlIEVtcHR5SGVhZGVyRXJyb3IoImVtcHR5IGhlYWRlciIpCiAgICAgICAgaWYgbGVuKGJ1ZikgIT0gQkxPQ0tTSVpFOgogICAgICAgICAgICByYWlzZSBUcnVuY2F0ZWRIZWFkZXJFcnJvcigidHJ1bmNhdGVkIGhlYWRlciIpCiAgICAgICAgaWYgYnVmLmNvdW50KE5VTCkgPT0gQkxPQ0tTSVpFOgogICAgICAgICAgICByYWlzZSBFT0ZIZWFkZXJFcnJvcigiZW5kIG9mIGZpbGUgaGVhZGVyIikKCiAgICAgICAgY2hrc3VtID0gbnRpKGJ1ZlsxNDg6MTU2XSkKICAgICAgICBpZiBjaGtzdW0gbm90IGluIGNhbGNfY2hrc3VtcyhidWYpOgogICAgICAgICAgICByYWlzZSBJbnZhbGlkSGVhZGVyRXJyb3IoImJhZCBjaGVja3N1bSIpCgogICAgICAgIG9iaiA9IGNscygpCiAgICAgICAgb2JqLm5hbWUgPSBudHMoYnVmWzA6MTAwXSwgZW5jb2RpbmcsIGVycm9ycykKICAgICAgICBvYmoubW9kZSA9IG50aShidWZbMTAwOjEwOF0pCiAgICAgICAgb2JqLnVpZCA9IG50aShidWZbMTA4OjExNl0pCiAgICAgICAgb2JqLmdpZCA9IG50aShidWZbMTE2OjEyNF0pCiAgICAgICAgb2JqLnNpemUgPSBudGkoYnVmWzEyNDoxMzZdKQogICAgICAgIG9iai5tdGltZSA9IG50aShidWZbMTM2OjE0OF0pCiAgICAgICAgb2JqLmNoa3N1bSA9IGNoa3N1bQogICAgICAgIG9iai50eXBlID0gYnVmWzE1NjoxNTddCiAgICAgICAgb2JqLmxpbmtuYW1lID0gbnRzKGJ1ZlsxNTc6MjU3XSwgZW5jb2RpbmcsIGVycm9ycykKICAgICAgICBvYmoudW5hbWUgPSBudHMoYnVmWzI2NToyOTddLCBlbmNvZGluZywgZXJyb3JzKQogICAgICAgIG9iai5nbmFtZSA9IG50cyhidWZbMjk3OjMyOV0sIGVuY29kaW5nLCBlcnJvcnMpCiAgICAgICAgb2JqLmRldm1ham9yID0gbnRpKGJ1ZlszMjk6MzM3XSkKICAgICAgICBvYmouZGV2bWlub3IgPSBudGkoYnVmWzMzNzozNDVdKQogICAgICAgIHByZWZpeCA9IG50cyhidWZbMzQ1OjUwMF0sIGVuY29kaW5nLCBlcnJvcnMpCgogICAgICAgICMgT2xkIFY3IHRhciBmb3JtYXQgcmVwcmVzZW50cyBhIGRpcmVjdG9yeSBhcyBhIHJlZ3VsYXIKICAgICAgICAjIGZpbGUgd2l0aCBhIHRyYWlsaW5nIHNsYXNoLgogICAgICAgIGlmIG9iai50eXBlID09IEFSRUdUWVBFIGFuZCBvYmoubmFtZS5lbmRzd2l0aCgiLyIpOgogICAgICAgICAgICBvYmoudHlwZSA9IERJUlRZUEUKCiAgICAgICAgIyBUaGUgb2xkIEdOVSBzcGFyc2UgZm9ybWF0IG9jY3VwaWVzIHNvbWUgb2YgdGhlIHVudXNlZAogICAgICAgICMgc3BhY2UgaW4gdGhlIGJ1ZmZlciBmb3IgdXAgdG8gNCBzcGFyc2Ugc3RydWN0dXJlcy4KICAgICAgICAjIFNhdmUgdGhlIHRoZW0gZm9yIGxhdGVyIHByb2Nlc3NpbmcgaW4gX3Byb2Nfc3BhcnNlKCkuCiAgICAgICAgaWYgb2JqLnR5cGUgPT0gR05VVFlQRV9TUEFSU0U6CiAgICAgICAgICAgIHBvcyA9IDM4NgogICAgICAgICAgICBzdHJ1Y3RzID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNCk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gbnRpKGJ1Zltwb3M6cG9zICsgMTJdKQogICAgICAgICAgICAgICAgICAgIG51bWJ5dGVzID0gbnRpKGJ1Zltwb3MgKyAxMjpwb3MgKyAyNF0pCiAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgc3RydWN0cy5hcHBlbmQoKG9mZnNldCwgbnVtYnl0ZXMpKQogICAgICAgICAgICAgICAgcG9zICs9IDI0CiAgICAgICAgICAgIGlzZXh0ZW5kZWQgPSBib29sKGJ1Zls0ODJdKQogICAgICAgICAgICBvcmlnc2l6ZSA9IG50aShidWZbNDgzOjQ5NV0pCiAgICAgICAgICAgIG9iai5fc3BhcnNlX3N0cnVjdHMgPSAoc3RydWN0cywgaXNleHRlbmRlZCwgb3JpZ3NpemUpCgogICAgICAgICMgUmVtb3ZlIHJlZHVuZGFudCBzbGFzaGVzIGZyb20gZGlyZWN0b3JpZXMuCiAgICAgICAgaWYgb2JqLmlzZGlyKCk6CiAgICAgICAgICAgIG9iai5uYW1lID0gb2JqLm5hbWUucnN0cmlwKCIvIikKCiAgICAgICAgIyBSZWNvbnN0cnVjdCBhIHVzdGFyIGxvbmduYW1lLgogICAgICAgIGlmIHByZWZpeCBhbmQgb2JqLnR5cGUgbm90IGluIEdOVV9UWVBFUzoKICAgICAgICAgICAgb2JqLm5hbWUgPSBwcmVmaXggKyAiLyIgKyBvYmoubmFtZQogICAgICAgIHJldHVybiBvYmoKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tdGFyZmlsZShjbHMsIHRhcmZpbGUpOgogICAgICAgICIiIlJldHVybiB0aGUgbmV4dCBUYXJJbmZvIG9iamVjdCBmcm9tIFRhckZpbGUgb2JqZWN0CiAgICAgICAgICAgdGFyZmlsZS4KICAgICAgICAiIiIKICAgICAgICBidWYgPSB0YXJmaWxlLmZpbGVvYmoucmVhZChCTE9DS1NJWkUpCiAgICAgICAgb2JqID0gY2xzLmZyb21idWYoYnVmLCB0YXJmaWxlLmVuY29kaW5nLCB0YXJmaWxlLmVycm9ycykKICAgICAgICBvYmoub2Zmc2V0ID0gdGFyZmlsZS5maWxlb2JqLnRlbGwoKSAtIEJMT0NLU0laRQogICAgICAgIHJldHVybiBvYmouX3Byb2NfbWVtYmVyKHRhcmZpbGUpCgogICAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFRoZSBmb2xsb3dpbmcgYXJlIG1ldGhvZHMgdGhhdCBhcmUgY2FsbGVkIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiBhCiAgICAjIG1lbWJlci4gVGhlIGVudHJ5IHBvaW50IGlzIF9wcm9jX21lbWJlcigpIHdoaWNoIGNhbiBiZSBvdmVycmlkZGVuIGluIGEKICAgICMgc3ViY2xhc3MgdG8gYWRkIGN1c3RvbSBfcHJvY18qKCkgbWV0aG9kcy4gQSBfcHJvY18qKCkgbWV0aG9kIE1VU1QKICAgICMgaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcKICAgICMgb3BlcmF0aW9uczoKICAgICMgMS4gU2V0IHNlbGYub2Zmc2V0X2RhdGEgdG8gdGhlIHBvc2l0aW9uIHdoZXJlIHRoZSBkYXRhIGJsb2NrcyBiZWdpbiwKICAgICMgICAgaWYgdGhlcmUgaXMgZGF0YSB0aGF0IGZvbGxvd3MuCiAgICAjIDIuIFNldCB0YXJmaWxlLm9mZnNldCB0byB0aGUgcG9zaXRpb24gd2hlcmUgdGhlIG5leHQgbWVtYmVyJ3MgaGVhZGVyIHdpbGwKICAgICMgICAgYmVnaW4uCiAgICAjIDMuIFJldHVybiBzZWxmIG9yIGFub3RoZXIgdmFsaWQgVGFySW5mbyBvYmplY3QuCiAgICBkZWYgX3Byb2NfbWVtYmVyKHNlbGYsIHRhcmZpbGUpOgogICAgICAgICIiIkNob29zZSB0aGUgcmlnaHQgcHJvY2Vzc2luZyBtZXRob2QgZGVwZW5kaW5nIG9uCiAgICAgICAgICAgdGhlIHR5cGUgYW5kIGNhbGwgaXQuCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VsZi50eXBlIGluIChHTlVUWVBFX0xPTkdOQU1FLCBHTlVUWVBFX0xPTkdMSU5LKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Byb2NfZ251bG9uZyh0YXJmaWxlKQogICAgICAgIGVsaWYgc2VsZi50eXBlID09IEdOVVRZUEVfU1BBUlNFOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fcHJvY19zcGFyc2UodGFyZmlsZSkKICAgICAgICBlbGlmIHNlbGYudHlwZSBpbiAoWEhEVFlQRSwgWEdMVFlQRSwgU09MQVJJU19YSERUWVBFKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Byb2NfcGF4KHRhcmZpbGUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Byb2NfYnVpbHRpbih0YXJmaWxlKQoKICAgIGRlZiBfcHJvY19idWlsdGluKHNlbGYsIHRhcmZpbGUpOgogICAgICAgICIiIlByb2Nlc3MgYSBidWlsdGluIHR5cGUgb3IgYW4gdW5rbm93biB0eXBlIHdoaWNoCiAgICAgICAgICAgd2lsbCBiZSB0cmVhdGVkIGFzIGEgcmVndWxhciBmaWxlLgogICAgICAgICIiIgogICAgICAgIHNlbGYub2Zmc2V0X2RhdGEgPSB0YXJmaWxlLmZpbGVvYmoudGVsbCgpCiAgICAgICAgb2Zmc2V0ID0gc2VsZi5vZmZzZXRfZGF0YQogICAgICAgIGlmIHNlbGYuaXNyZWcoKSBvciBzZWxmLnR5cGUgbm90IGluIFNVUFBPUlRFRF9UWVBFUzoKICAgICAgICAgICAgIyBTa2lwIHRoZSBmb2xsb3dpbmcgZGF0YSBibG9ja3MuCiAgICAgICAgICAgIG9mZnNldCArPSBzZWxmLl9ibG9jayhzZWxmLnNpemUpCiAgICAgICAgdGFyZmlsZS5vZmZzZXQgPSBvZmZzZXQKCiAgICAgICAgIyBQYXRjaCB0aGUgVGFySW5mbyBvYmplY3Qgd2l0aCBzYXZlZCBnbG9iYWwKICAgICAgICAjIGhlYWRlciBpbmZvcm1hdGlvbi4KICAgICAgICBzZWxmLl9hcHBseV9wYXhfaW5mbyh0YXJmaWxlLnBheF9oZWFkZXJzLCB0YXJmaWxlLmVuY29kaW5nLCB0YXJmaWxlLmVycm9ycykKCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX3Byb2NfZ251bG9uZyhzZWxmLCB0YXJmaWxlKToKICAgICAgICAiIiJQcm9jZXNzIHRoZSBibG9ja3MgdGhhdCBob2xkIGEgR05VIGxvbmduYW1lCiAgICAgICAgICAgb3IgbG9uZ2xpbmsgbWVtYmVyLgogICAgICAgICIiIgogICAgICAgIGJ1ZiA9IHRhcmZpbGUuZmlsZW9iai5yZWFkKHNlbGYuX2Jsb2NrKHNlbGYuc2l6ZSkpCgogICAgICAgICMgRmV0Y2ggdGhlIG5leHQgaGVhZGVyIGFuZCBwcm9jZXNzIGl0LgogICAgICAgIHRyeToKICAgICAgICAgICAgbmV4dCA9IHNlbGYuZnJvbXRhcmZpbGUodGFyZmlsZSkKICAgICAgICBleGNlcHQgSGVhZGVyRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFN1YnNlcXVlbnRIZWFkZXJFcnJvcigibWlzc2luZyBvciBiYWQgc3Vic2VxdWVudCBoZWFkZXIiKQoKICAgICAgICAjIFBhdGNoIHRoZSBUYXJJbmZvIG9iamVjdCBmcm9tIHRoZSBuZXh0IGhlYWRlciB3aXRoCiAgICAgICAgIyB0aGUgbG9uZ25hbWUgaW5mb3JtYXRpb24uCiAgICAgICAgbmV4dC5vZmZzZXQgPSBzZWxmLm9mZnNldAogICAgICAgIGlmIHNlbGYudHlwZSA9PSBHTlVUWVBFX0xPTkdOQU1FOgogICAgICAgICAgICBuZXh0Lm5hbWUgPSBudHMoYnVmLCB0YXJmaWxlLmVuY29kaW5nLCB0YXJmaWxlLmVycm9ycykKICAgICAgICBlbGlmIHNlbGYudHlwZSA9PSBHTlVUWVBFX0xPTkdMSU5LOgogICAgICAgICAgICBuZXh0LmxpbmtuYW1lID0gbnRzKGJ1ZiwgdGFyZmlsZS5lbmNvZGluZywgdGFyZmlsZS5lcnJvcnMpCgogICAgICAgIHJldHVybiBuZXh0CgogICAgZGVmIF9wcm9jX3NwYXJzZShzZWxmLCB0YXJmaWxlKToKICAgICAgICAiIiJQcm9jZXNzIGEgR05VIHNwYXJzZSBoZWFkZXIgcGx1cyBleHRyYSBoZWFkZXJzLgogICAgICAgICIiIgogICAgICAgICMgV2UgYWxyZWFkeSBjb2xsZWN0ZWQgc29tZSBzcGFyc2Ugc3RydWN0dXJlcyBpbiBmcm9tYnVmKCkuCiAgICAgICAgc3RydWN0cywgaXNleHRlbmRlZCwgb3JpZ3NpemUgPSBzZWxmLl9zcGFyc2Vfc3RydWN0cwogICAgICAgIGRlbCBzZWxmLl9zcGFyc2Vfc3RydWN0cwoKICAgICAgICAjIENvbGxlY3Qgc3BhcnNlIHN0cnVjdHVyZXMgZnJvbSBleHRlbmRlZCBoZWFkZXIgYmxvY2tzLgogICAgICAgIHdoaWxlIGlzZXh0ZW5kZWQ6CiAgICAgICAgICAgIGJ1ZiA9IHRhcmZpbGUuZmlsZW9iai5yZWFkKEJMT0NLU0laRSkKICAgICAgICAgICAgcG9zID0gMAogICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgyMSk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gbnRpKGJ1Zltwb3M6cG9zICsgMTJdKQogICAgICAgICAgICAgICAgICAgIG51bWJ5dGVzID0gbnRpKGJ1Zltwb3MgKyAxMjpwb3MgKyAyNF0pCiAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgaWYgb2Zmc2V0IGFuZCBudW1ieXRlczoKICAgICAgICAgICAgICAgICAgICBzdHJ1Y3RzLmFwcGVuZCgob2Zmc2V0LCBudW1ieXRlcykpCiAgICAgICAgICAgICAgICBwb3MgKz0gMjQKICAgICAgICAgICAgaXNleHRlbmRlZCA9IGJvb2woYnVmWzUwNF0pCiAgICAgICAgc2VsZi5zcGFyc2UgPSBzdHJ1Y3RzCgogICAgICAgIHNlbGYub2Zmc2V0X2RhdGEgPSB0YXJmaWxlLmZpbGVvYmoudGVsbCgpCiAgICAgICAgdGFyZmlsZS5vZmZzZXQgPSBzZWxmLm9mZnNldF9kYXRhICsgc2VsZi5fYmxvY2soc2VsZi5zaXplKQogICAgICAgIHNlbGYuc2l6ZSA9IG9yaWdzaXplCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX3Byb2NfcGF4KHNlbGYsIHRhcmZpbGUpOgogICAgICAgICIiIlByb2Nlc3MgYW4gZXh0ZW5kZWQgb3IgZ2xvYmFsIGhlYWRlciBhcyBkZXNjcmliZWQgaW4KICAgICAgICAgICBQT1NJWC4xLTIwMDguCiAgICAgICAgIiIiCiAgICAgICAgIyBSZWFkIHRoZSBoZWFkZXIgaW5mb3JtYXRpb24uCiAgICAgICAgYnVmID0gdGFyZmlsZS5maWxlb2JqLnJlYWQoc2VsZi5fYmxvY2soc2VsZi5zaXplKSkKCiAgICAgICAgIyBBIHBheCBoZWFkZXIgc3RvcmVzIHN1cHBsZW1lbnRhbCBpbmZvcm1hdGlvbiBmb3IgZWl0aGVyCiAgICAgICAgIyB0aGUgZm9sbG93aW5nIGZpbGUgKGV4dGVuZGVkKSBvciBhbGwgZm9sbG93aW5nIGZpbGVzCiAgICAgICAgIyAoZ2xvYmFsKS4KICAgICAgICBpZiBzZWxmLnR5cGUgPT0gWEdMVFlQRToKICAgICAgICAgICAgcGF4X2hlYWRlcnMgPSB0YXJmaWxlLnBheF9oZWFkZXJzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGF4X2hlYWRlcnMgPSB0YXJmaWxlLnBheF9oZWFkZXJzLmNvcHkoKQoKICAgICAgICAjIENoZWNrIGlmIHRoZSBwYXggaGVhZGVyIGNvbnRhaW5zIGEgaGRyY2hhcnNldCBmaWVsZC4gVGhpcyB0ZWxscyB1cwogICAgICAgICMgdGhlIGVuY29kaW5nIG9mIHRoZSBwYXRoLCBsaW5rcGF0aCwgdW5hbWUgYW5kIGduYW1lIGZpZWxkcy4gTm9ybWFsbHksCiAgICAgICAgIyB0aGVzZSBmaWVsZHMgYXJlIFVURi04IGVuY29kZWQgYnV0IHNpbmNlIFBPU0lYLjEtMjAwOCB0YXIKICAgICAgICAjIGltcGxlbWVudGF0aW9ucyBhcmUgYWxsb3dlZCB0byBzdG9yZSB0aGVtIGFzIHJhdyBiaW5hcnkgc3RyaW5ncyBpZgogICAgICAgICMgdGhlIHRyYW5zbGF0aW9uIHRvIFVURi04IGZhaWxzLgogICAgICAgIG1hdGNoID0gcmUuc2VhcmNoKGJyIlxkKyBoZHJjaGFyc2V0PShbXlxuXSspXG4iLCBidWYpCiAgICAgICAgaWYgbWF0Y2ggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHBheF9oZWFkZXJzWyJoZHJjaGFyc2V0Il0gPSBtYXRjaC5ncm91cCgxKS5kZWNvZGUoInV0Zi04IikKCiAgICAgICAgIyBGb3IgdGhlIHRpbWUgYmVpbmcsIHdlIGRvbid0IGNhcmUgYWJvdXQgYW55dGhpbmcgb3RoZXIgdGhhbiAiQklOQVJZIi4KICAgICAgICAjIFRoZSBvbmx5IG90aGVyIHZhbHVlIHRoYXQgaXMgY3VycmVudGx5IGFsbG93ZWQgYnkgdGhlIHN0YW5kYXJkIGlzCiAgICAgICAgIyAiSVNPLUlSIDEwNjQ2IDIwMDAgVVRGLTgiIGluIG90aGVyIHdvcmRzIFVURi04LgogICAgICAgIGhkcmNoYXJzZXQgPSBwYXhfaGVhZGVycy5nZXQoImhkcmNoYXJzZXQiKQogICAgICAgIGlmIGhkcmNoYXJzZXQgPT0gIkJJTkFSWSI6CiAgICAgICAgICAgIGVuY29kaW5nID0gdGFyZmlsZS5lbmNvZGluZwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGVuY29kaW5nID0gInV0Zi04IgoKICAgICAgICAjIFBhcnNlIHBheCBoZWFkZXIgaW5mb3JtYXRpb24uIEEgcmVjb3JkIGxvb2tzIGxpa2UgdGhhdDoKICAgICAgICAjICIlZCAlcz0lc1xuIiAlIChsZW5ndGgsIGtleXdvcmQsIHZhbHVlKS4gbGVuZ3RoIGlzIHRoZSBzaXplCiAgICAgICAgIyBvZiB0aGUgY29tcGxldGUgcmVjb3JkIGluY2x1ZGluZyB0aGUgbGVuZ3RoIGZpZWxkIGl0c2VsZiBhbmQKICAgICAgICAjIHRoZSBuZXdsaW5lLiBrZXl3b3JkIGFuZCB2YWx1ZSBhcmUgYm90aCBVVEYtOCBlbmNvZGVkIHN0cmluZ3MuCiAgICAgICAgcmVnZXggPSByZS5jb21waWxlKGJyIihcZCspIChbXj1dKyk9IikKICAgICAgICBwb3MgPSAwCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgbWF0Y2ggPSByZWdleC5tYXRjaChidWYsIHBvcykKICAgICAgICAgICAgaWYgbm90IG1hdGNoOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgIGxlbmd0aCwga2V5d29yZCA9IG1hdGNoLmdyb3VwcygpCiAgICAgICAgICAgIGxlbmd0aCA9IGludChsZW5ndGgpCiAgICAgICAgICAgIHZhbHVlID0gYnVmW21hdGNoLmVuZCgyKSArIDE6bWF0Y2guc3RhcnQoMSkgKyBsZW5ndGggLSAxXQoKICAgICAgICAgICAgIyBOb3JtYWxseSwgd2UgY291bGQganVzdCB1c2UgInV0Zi04IiBhcyB0aGUgZW5jb2RpbmcgYW5kICJzdHJpY3QiCiAgICAgICAgICAgICMgYXMgdGhlIGVycm9yIGhhbmRsZXIsIGJ1dCB3ZSBiZXR0ZXIgbm90IHRha2UgdGhlIHJpc2suIEZvcgogICAgICAgICAgICAjIGV4YW1wbGUsIEdOVSB0YXIgPD0gMS4yMyBpcyBrbm93biB0byBzdG9yZSBmaWxlbmFtZXMgaXQgY2Fubm90CiAgICAgICAgICAgICMgdHJhbnNsYXRlIHRvIFVURi04IGFzIHJhdyBzdHJpbmdzICh1bmZvcnR1bmF0ZWx5IHdpdGhvdXQgYQogICAgICAgICAgICAjIGhkcmNoYXJzZXQ9QklOQVJZIGhlYWRlcikuCiAgICAgICAgICAgICMgV2UgZmlyc3QgdHJ5IHRoZSBzdHJpY3Qgc3RhbmRhcmQgZW5jb2RpbmcsIGFuZCBpZiB0aGF0IGZhaWxzIHdlCiAgICAgICAgICAgICMgZmFsbCBiYWNrIG9uIHRoZSB1c2VyJ3MgZW5jb2RpbmcgYW5kIGVycm9yIGhhbmRsZXIuCiAgICAgICAgICAgIGtleXdvcmQgPSBzZWxmLl9kZWNvZGVfcGF4X2ZpZWxkKGtleXdvcmQsICJ1dGYtOCIsICJ1dGYtOCIsCiAgICAgICAgICAgICAgICAgICAgdGFyZmlsZS5lcnJvcnMpCiAgICAgICAgICAgIGlmIGtleXdvcmQgaW4gUEFYX05BTUVfRklFTERTOgogICAgICAgICAgICAgICAgdmFsdWUgPSBzZWxmLl9kZWNvZGVfcGF4X2ZpZWxkKHZhbHVlLCBlbmNvZGluZywgdGFyZmlsZS5lbmNvZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZmlsZS5lcnJvcnMpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHNlbGYuX2RlY29kZV9wYXhfZmllbGQodmFsdWUsICJ1dGYtOCIsICJ1dGYtOCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmZpbGUuZXJyb3JzKQoKICAgICAgICAgICAgcGF4X2hlYWRlcnNba2V5d29yZF0gPSB2YWx1ZQogICAgICAgICAgICBwb3MgKz0gbGVuZ3RoCgogICAgICAgICMgRmV0Y2ggdGhlIG5leHQgaGVhZGVyLgogICAgICAgIHRyeToKICAgICAgICAgICAgbmV4dCA9IHNlbGYuZnJvbXRhcmZpbGUodGFyZmlsZSkKICAgICAgICBleGNlcHQgSGVhZGVyRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFN1YnNlcXVlbnRIZWFkZXJFcnJvcigibWlzc2luZyBvciBiYWQgc3Vic2VxdWVudCBoZWFkZXIiKQoKICAgICAgICAjIFByb2Nlc3MgR05VIHNwYXJzZSBpbmZvcm1hdGlvbi4KICAgICAgICBpZiAiR05VLnNwYXJzZS5tYXAiIGluIHBheF9oZWFkZXJzOgogICAgICAgICAgICAjIEdOVSBleHRlbmRlZCBzcGFyc2UgZm9ybWF0IHZlcnNpb24gMC4xLgogICAgICAgICAgICBzZWxmLl9wcm9jX2dudXNwYXJzZV8wMShuZXh0LCBwYXhfaGVhZGVycykKCiAgICAgICAgZWxpZiAiR05VLnNwYXJzZS5zaXplIiBpbiBwYXhfaGVhZGVyczoKICAgICAgICAgICAgIyBHTlUgZXh0ZW5kZWQgc3BhcnNlIGZvcm1hdCB2ZXJzaW9uIDAuMC4KICAgICAgICAgICAgc2VsZi5fcHJvY19nbnVzcGFyc2VfMDAobmV4dCwgcGF4X2hlYWRlcnMsIGJ1ZikKCiAgICAgICAgZWxpZiBwYXhfaGVhZGVycy5nZXQoIkdOVS5zcGFyc2UubWFqb3IiKSA9PSAiMSIgYW5kIHBheF9oZWFkZXJzLmdldCgiR05VLnNwYXJzZS5taW5vciIpID09ICIwIjoKICAgICAgICAgICAgIyBHTlUgZXh0ZW5kZWQgc3BhcnNlIGZvcm1hdCB2ZXJzaW9uIDEuMC4KICAgICAgICAgICAgc2VsZi5fcHJvY19nbnVzcGFyc2VfMTAobmV4dCwgcGF4X2hlYWRlcnMsIHRhcmZpbGUpCgogICAgICAgIGlmIHNlbGYudHlwZSBpbiAoWEhEVFlQRSwgU09MQVJJU19YSERUWVBFKToKICAgICAgICAgICAgIyBQYXRjaCB0aGUgVGFySW5mbyBvYmplY3Qgd2l0aCB0aGUgZXh0ZW5kZWQgaGVhZGVyIGluZm8uCiAgICAgICAgICAgIG5leHQuX2FwcGx5X3BheF9pbmZvKHBheF9oZWFkZXJzLCB0YXJmaWxlLmVuY29kaW5nLCB0YXJmaWxlLmVycm9ycykKICAgICAgICAgICAgbmV4dC5vZmZzZXQgPSBzZWxmLm9mZnNldAoKICAgICAgICAgICAgaWYgInNpemUiIGluIHBheF9oZWFkZXJzOgogICAgICAgICAgICAgICAgIyBJZiB0aGUgZXh0ZW5kZWQgaGVhZGVyIHJlcGxhY2VzIHRoZSBzaXplIGZpZWxkLAogICAgICAgICAgICAgICAgIyB3ZSBuZWVkIHRvIHJlY2FsY3VsYXRlIHRoZSBvZmZzZXQgd2hlcmUgdGhlIG5leHQKICAgICAgICAgICAgICAgICMgaGVhZGVyIHN0YXJ0cy4KICAgICAgICAgICAgICAgIG9mZnNldCA9IG5leHQub2Zmc2V0X2RhdGEKICAgICAgICAgICAgICAgIGlmIG5leHQuaXNyZWcoKSBvciBuZXh0LnR5cGUgbm90IGluIFNVUFBPUlRFRF9UWVBFUzoKICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbmV4dC5fYmxvY2sobmV4dC5zaXplKQogICAgICAgICAgICAgICAgdGFyZmlsZS5vZmZzZXQgPSBvZmZzZXQKCiAgICAgICAgcmV0dXJuIG5leHQKCiAgICBkZWYgX3Byb2NfZ251c3BhcnNlXzAwKHNlbGYsIG5leHQsIHBheF9oZWFkZXJzLCBidWYpOgogICAgICAgICIiIlByb2Nlc3MgYSBHTlUgdGFyIGV4dGVuZGVkIHNwYXJzZSBoZWFkZXIsIHZlcnNpb24gMC4wLgogICAgICAgICIiIgogICAgICAgIG9mZnNldHMgPSBbXQogICAgICAgIGZvciBtYXRjaCBpbiByZS5maW5kaXRlcihiciJcZCsgR05VLnNwYXJzZS5vZmZzZXQ9KFxkKylcbiIsIGJ1Zik6CiAgICAgICAgICAgIG9mZnNldHMuYXBwZW5kKGludChtYXRjaC5ncm91cCgxKSkpCiAgICAgICAgbnVtYnl0ZXMgPSBbXQogICAgICAgIGZvciBtYXRjaCBpbiByZS5maW5kaXRlcihiciJcZCsgR05VLnNwYXJzZS5udW1ieXRlcz0oXGQrKVxuIiwgYnVmKToKICAgICAgICAgICAgbnVtYnl0ZXMuYXBwZW5kKGludChtYXRjaC5ncm91cCgxKSkpCiAgICAgICAgbmV4dC5zcGFyc2UgPSBsaXN0KHppcChvZmZzZXRzLCBudW1ieXRlcykpCgogICAgZGVmIF9wcm9jX2dudXNwYXJzZV8wMShzZWxmLCBuZXh0LCBwYXhfaGVhZGVycyk6CiAgICAgICAgIiIiUHJvY2VzcyBhIEdOVSB0YXIgZXh0ZW5kZWQgc3BhcnNlIGhlYWRlciwgdmVyc2lvbiAwLjEuCiAgICAgICAgIiIiCiAgICAgICAgc3BhcnNlID0gW2ludCh4KSBmb3IgeCBpbiBwYXhfaGVhZGVyc1siR05VLnNwYXJzZS5tYXAiXS5zcGxpdCgiLCIpXQogICAgICAgIG5leHQuc3BhcnNlID0gbGlzdCh6aXAoc3BhcnNlWzo6Ml0sIHNwYXJzZVsxOjoyXSkpCgogICAgZGVmIF9wcm9jX2dudXNwYXJzZV8xMChzZWxmLCBuZXh0LCBwYXhfaGVhZGVycywgdGFyZmlsZSk6CiAgICAgICAgIiIiUHJvY2VzcyBhIEdOVSB0YXIgZXh0ZW5kZWQgc3BhcnNlIGhlYWRlciwgdmVyc2lvbiAxLjAuCiAgICAgICAgIiIiCiAgICAgICAgZmllbGRzID0gTm9uZQogICAgICAgIHNwYXJzZSA9IFtdCiAgICAgICAgYnVmID0gdGFyZmlsZS5maWxlb2JqLnJlYWQoQkxPQ0tTSVpFKQogICAgICAgIGZpZWxkcywgYnVmID0gYnVmLnNwbGl0KGIiXG4iLCAxKQogICAgICAgIGZpZWxkcyA9IGludChmaWVsZHMpCiAgICAgICAgd2hpbGUgbGVuKHNwYXJzZSkgPCBmaWVsZHMgKiAyOgogICAgICAgICAgICBpZiBiIlxuIiBub3QgaW4gYnVmOgogICAgICAgICAgICAgICAgYnVmICs9IHRhcmZpbGUuZmlsZW9iai5yZWFkKEJMT0NLU0laRSkKICAgICAgICAgICAgbnVtYmVyLCBidWYgPSBidWYuc3BsaXQoYiJcbiIsIDEpCiAgICAgICAgICAgIHNwYXJzZS5hcHBlbmQoaW50KG51bWJlcikpCiAgICAgICAgbmV4dC5vZmZzZXRfZGF0YSA9IHRhcmZpbGUuZmlsZW9iai50ZWxsKCkKICAgICAgICBuZXh0LnNwYXJzZSA9IGxpc3QoemlwKHNwYXJzZVs6OjJdLCBzcGFyc2VbMTo6Ml0pKQoKICAgIGRlZiBfYXBwbHlfcGF4X2luZm8oc2VsZiwgcGF4X2hlYWRlcnMsIGVuY29kaW5nLCBlcnJvcnMpOgogICAgICAgICIiIlJlcGxhY2UgZmllbGRzIHdpdGggc3VwcGxlbWVudGFsIGluZm9ybWF0aW9uIGZyb20gYSBwcmV2aW91cwogICAgICAgICAgIHBheCBleHRlbmRlZCBvciBnbG9iYWwgaGVhZGVyLgogICAgICAgICIiIgogICAgICAgIGZvciBrZXl3b3JkLCB2YWx1ZSBpbiBwYXhfaGVhZGVycy5pdGVtcygpOgogICAgICAgICAgICBpZiBrZXl3b3JkID09ICJHTlUuc3BhcnNlLm5hbWUiOgogICAgICAgICAgICAgICAgc2V0YXR0cihzZWxmLCAicGF0aCIsIHZhbHVlKQogICAgICAgICAgICBlbGlmIGtleXdvcmQgPT0gIkdOVS5zcGFyc2Uuc2l6ZSI6CiAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsICJzaXplIiwgaW50KHZhbHVlKSkKICAgICAgICAgICAgZWxpZiBrZXl3b3JkID09ICJHTlUuc3BhcnNlLnJlYWxzaXplIjoKICAgICAgICAgICAgICAgIHNldGF0dHIoc2VsZiwgInNpemUiLCBpbnQodmFsdWUpKQogICAgICAgICAgICBlbGlmIGtleXdvcmQgaW4gUEFYX0ZJRUxEUzoKICAgICAgICAgICAgICAgIGlmIGtleXdvcmQgaW4gUEFYX05VTUJFUl9GSUVMRFM6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFBBWF9OVU1CRVJfRklFTERTW2tleXdvcmRdKHZhbHVlKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAKICAgICAgICAgICAgICAgIGlmIGtleXdvcmQgPT0gInBhdGgiOgogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucnN0cmlwKCIvIikKICAgICAgICAgICAgICAgIHNldGF0dHIoc2VsZiwga2V5d29yZCwgdmFsdWUpCgogICAgICAgIHNlbGYucGF4X2hlYWRlcnMgPSBwYXhfaGVhZGVycy5jb3B5KCkKCiAgICBkZWYgX2RlY29kZV9wYXhfZmllbGQoc2VsZiwgdmFsdWUsIGVuY29kaW5nLCBmYWxsYmFja19lbmNvZGluZywgZmFsbGJhY2tfZXJyb3JzKToKICAgICAgICAiIiJEZWNvZGUgYSBzaW5nbGUgZmllbGQgZnJvbSBhIHBheCByZWNvcmQuCiAgICAgICAgIiIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gdmFsdWUuZGVjb2RlKGVuY29kaW5nLCAic3RyaWN0IikKICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yOgogICAgICAgICAgICByZXR1cm4gdmFsdWUuZGVjb2RlKGZhbGxiYWNrX2VuY29kaW5nLCBmYWxsYmFja19lcnJvcnMpCgogICAgZGVmIF9ibG9jayhzZWxmLCBjb3VudCk6CiAgICAgICAgIiIiUm91bmQgdXAgYSBieXRlIGNvdW50IGJ5IEJMT0NLU0laRSBhbmQgcmV0dXJuIGl0LAogICAgICAgICAgIGUuZy4gX2Jsb2NrKDgzNCkgPT4gMTAyNC4KICAgICAgICAiIiIKICAgICAgICBibG9ja3MsIHJlbWFpbmRlciA9IGRpdm1vZChjb3VudCwgQkxPQ0tTSVpFKQogICAgICAgIGlmIHJlbWFpbmRlcjoKICAgICAgICAgICAgYmxvY2tzICs9IDEKICAgICAgICByZXR1cm4gYmxvY2tzICogQkxPQ0tTSVpFCgogICAgZGVmIGlzcmVnKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnR5cGUgaW4gUkVHVUxBUl9UWVBFUwogICAgZGVmIGlzZmlsZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5pc3JlZygpCiAgICBkZWYgaXNkaXIoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYudHlwZSA9PSBESVJUWVBFCiAgICBkZWYgaXNzeW0oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYudHlwZSA9PSBTWU1UWVBFCiAgICBkZWYgaXNsbmsoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYudHlwZSA9PSBMTktUWVBFCiAgICBkZWYgaXNjaHIoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYudHlwZSA9PSBDSFJUWVBFCiAgICBkZWYgaXNibGsoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYudHlwZSA9PSBCTEtUWVBFCiAgICBkZWYgaXNmaWZvKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnR5cGUgPT0gRklGT1RZUEUKICAgIGRlZiBpc3NwYXJzZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5zcGFyc2UgaXMgbm90IE5vbmUKICAgIGRlZiBpc2RldihzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi50eXBlIGluIChDSFJUWVBFLCBCTEtUWVBFLCBGSUZPVFlQRSkKIyBjbGFzcyBUYXJJbmZvCgpjbGFzcyBUYXJGaWxlKG9iamVjdCk6CiAgICAiIiJUaGUgVGFyRmlsZSBDbGFzcyBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gdGFyIGFyY2hpdmVzLgogICAgIiIiCgogICAgZGVidWcgPSAwICAgICAgICAgICAgICAgICAgICMgTWF5IGJlIHNldCBmcm9tIDAgKG5vIG1zZ3MpIHRvIDMgKGFsbCBtc2dzKQoKICAgIGRlcmVmZXJlbmNlID0gRmFsc2UgICAgICAgICAjIElmIHRydWUsIGFkZCBjb250ZW50IG9mIGxpbmtlZCBmaWxlIHRvIHRoZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgdGFyIGZpbGUsIGVsc2UgdGhlIGxpbmsuCgogICAgaWdub3JlX3plcm9zID0gRmFsc2UgICAgICAgICMgSWYgdHJ1ZSwgc2tpcHMgZW1wdHkgb3IgaW52YWxpZCBibG9ja3MgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBjb250aW51ZXMgcHJvY2Vzc2luZy4KCiAgICBlcnJvcmxldmVsID0gMSAgICAgICAgICAgICAgIyBJZiAwLCBmYXRhbCBlcnJvcnMgb25seSBhcHBlYXIgaW4gZGVidWcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIG1lc3NhZ2VzIChpZiBkZWJ1ZyA+PSAwKS4gSWYgPiAwLCBlcnJvcnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGFyZSBwYXNzZWQgdG8gdGhlIGNhbGxlciBhcyBleGNlcHRpb25zLgoKICAgIGZvcm1hdCA9IERFRkFVTFRfRk9STUFUICAgICAjIFRoZSBmb3JtYXQgdG8gdXNlIHdoZW4gY3JlYXRpbmcgYW4gYXJjaGl2ZS4KCiAgICBlbmNvZGluZyA9IEVOQ09ESU5HICAgICAgICAgIyBFbmNvZGluZyBmb3IgOC1iaXQgY2hhcmFjdGVyIHN0cmluZ3MuCgogICAgZXJyb3JzID0gTm9uZSAgICAgICAgICAgICAgICMgRXJyb3IgaGFuZGxlciBmb3IgdW5pY29kZSBjb252ZXJzaW9uLgoKICAgIHRhcmluZm8gPSBUYXJJbmZvICAgICAgICAgICAjIFRoZSBkZWZhdWx0IFRhckluZm8gY2xhc3MgdG8gdXNlLgoKICAgIGZpbGVvYmplY3QgPSBFeEZpbGVPYmplY3QgICAjIFRoZSBmaWxlLW9iamVjdCBmb3IgZXh0cmFjdGZpbGUoKS4KCiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZT1Ob25lLCBtb2RlPSJyIiwgZmlsZW9iaj1Ob25lLCBmb3JtYXQ9Tm9uZSwKICAgICAgICAgICAgdGFyaW5mbz1Ob25lLCBkZXJlZmVyZW5jZT1Ob25lLCBpZ25vcmVfemVyb3M9Tm9uZSwgZW5jb2Rpbmc9Tm9uZSwKICAgICAgICAgICAgZXJyb3JzPSJzdXJyb2dhdGVlc2NhcGUiLCBwYXhfaGVhZGVycz1Ob25lLCBkZWJ1Zz1Ob25lLCBlcnJvcmxldmVsPU5vbmUpOgogICAgICAgICIiIk9wZW4gYW4gKHVuY29tcHJlc3NlZCkgdGFyIGFyY2hpdmUgYG5hbWUnLiBgbW9kZScgaXMgZWl0aGVyICdyJyB0bwogICAgICAgICAgIHJlYWQgZnJvbSBhbiBleGlzdGluZyBhcmNoaXZlLCAnYScgdG8gYXBwZW5kIGRhdGEgdG8gYW4gZXhpc3RpbmcKICAgICAgICAgICBmaWxlIG9yICd3JyB0byBjcmVhdGUgYSBuZXcgZmlsZSBvdmVyd3JpdGluZyBhbiBleGlzdGluZyBvbmUuIGBtb2RlJwogICAgICAgICAgIGRlZmF1bHRzIHRvICdyJy4KICAgICAgICAgICBJZiBgZmlsZW9iaicgaXMgZ2l2ZW4sIGl0IGlzIHVzZWQgZm9yIHJlYWRpbmcgb3Igd3JpdGluZyBkYXRhLiBJZiBpdAogICAgICAgICAgIGNhbiBiZSBkZXRlcm1pbmVkLCBgbW9kZScgaXMgb3ZlcnJpZGRlbiBieSBgZmlsZW9iaidzIG1vZGUuCiAgICAgICAgICAgYGZpbGVvYmonIGlzIG5vdCBjbG9zZWQsIHdoZW4gVGFyRmlsZSBpcyBjbG9zZWQuCiAgICAgICAgIiIiCiAgICAgICAgaWYgbGVuKG1vZGUpID4gMSBvciBtb2RlIG5vdCBpbiAicmF3IjoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibW9kZSBtdXN0IGJlICdyJywgJ2EnIG9yICd3JyIpCiAgICAgICAgc2VsZi5tb2RlID0gbW9kZQogICAgICAgIHNlbGYuX21vZGUgPSB7InIiOiAicmIiLCAiYSI6ICJyK2IiLCAidyI6ICJ3YiJ9W21vZGVdCgogICAgICAgIGlmIG5vdCBmaWxlb2JqOgogICAgICAgICAgICBpZiBzZWxmLm1vZGUgPT0gImEiIGFuZCBub3Qgb3MucGF0aC5leGlzdHMobmFtZSk6CiAgICAgICAgICAgICAgICAjIENyZWF0ZSBub25leGlzdGVudCBmaWxlcyBpbiBhcHBlbmQgbW9kZS4KICAgICAgICAgICAgICAgIHNlbGYubW9kZSA9ICJ3IgogICAgICAgICAgICAgICAgc2VsZi5fbW9kZSA9ICJ3YiIKICAgICAgICAgICAgZmlsZW9iaiA9IGJsdG5fb3BlbihuYW1lLCBzZWxmLl9tb2RlKQogICAgICAgICAgICBzZWxmLl9leHRmaWxlb2JqID0gRmFsc2UKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBuYW1lIGlzIE5vbmUgYW5kIGhhc2F0dHIoZmlsZW9iaiwgIm5hbWUiKToKICAgICAgICAgICAgICAgIG5hbWUgPSBmaWxlb2JqLm5hbWUKICAgICAgICAgICAgaWYgaGFzYXR0cihmaWxlb2JqLCAibW9kZSIpOgogICAgICAgICAgICAgICAgc2VsZi5fbW9kZSA9IGZpbGVvYmoubW9kZQogICAgICAgICAgICBzZWxmLl9leHRmaWxlb2JqID0gVHJ1ZQogICAgICAgIHNlbGYubmFtZSA9IG9zLnBhdGguYWJzcGF0aChuYW1lKSBpZiBuYW1lIGVsc2UgTm9uZQogICAgICAgIHNlbGYuZmlsZW9iaiA9IGZpbGVvYmoKCiAgICAgICAgIyBJbml0IGF0dHJpYnV0ZXMuCiAgICAgICAgaWYgZm9ybWF0IGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmZvcm1hdCA9IGZvcm1hdAogICAgICAgIGlmIHRhcmluZm8gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYudGFyaW5mbyA9IHRhcmluZm8KICAgICAgICBpZiBkZXJlZmVyZW5jZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5kZXJlZmVyZW5jZSA9IGRlcmVmZXJlbmNlCiAgICAgICAgaWYgaWdub3JlX3plcm9zIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmlnbm9yZV96ZXJvcyA9IGlnbm9yZV96ZXJvcwogICAgICAgIGlmIGVuY29kaW5nIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmVuY29kaW5nID0gZW5jb2RpbmcKICAgICAgICBzZWxmLmVycm9ycyA9IGVycm9ycwoKICAgICAgICBpZiBwYXhfaGVhZGVycyBpcyBub3QgTm9uZSBhbmQgc2VsZi5mb3JtYXQgPT0gUEFYX0ZPUk1BVDoKICAgICAgICAgICAgc2VsZi5wYXhfaGVhZGVycyA9IHBheF9oZWFkZXJzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5wYXhfaGVhZGVycyA9IHt9CgogICAgICAgIGlmIGRlYnVnIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmRlYnVnID0gZGVidWcKICAgICAgICBpZiBlcnJvcmxldmVsIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmVycm9ybGV2ZWwgPSBlcnJvcmxldmVsCgogICAgICAgICMgSW5pdCBkYXRhc3RydWN0dXJlcy4KICAgICAgICBzZWxmLmNsb3NlZCA9IEZhbHNlCiAgICAgICAgc2VsZi5tZW1iZXJzID0gW10gICAgICAgIyBsaXN0IG9mIG1lbWJlcnMgYXMgVGFySW5mbyBvYmplY3RzCiAgICAgICAgc2VsZi5fbG9hZGVkID0gRmFsc2UgICAgIyBmbGFnIGlmIGFsbCBtZW1iZXJzIGhhdmUgYmVlbiByZWFkCiAgICAgICAgc2VsZi5vZmZzZXQgPSBzZWxmLmZpbGVvYmoudGVsbCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBjdXJyZW50IHBvc2l0aW9uIGluIHRoZSBhcmNoaXZlIGZpbGUKICAgICAgICBzZWxmLmlub2RlcyA9IHt9ICAgICAgICAjIGRpY3Rpb25hcnkgY2FjaGluZyB0aGUgaW5vZGVzIG9mCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBhcmNoaXZlIG1lbWJlcnMgYWxyZWFkeSBhZGRlZAoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIHNlbGYubW9kZSA9PSAiciI6CiAgICAgICAgICAgICAgICBzZWxmLmZpcnN0bWVtYmVyID0gTm9uZQogICAgICAgICAgICAgICAgc2VsZi5maXJzdG1lbWJlciA9IHNlbGYubmV4dCgpCgogICAgICAgICAgICBpZiBzZWxmLm1vZGUgPT0gImEiOgogICAgICAgICAgICAgICAgIyBNb3ZlIHRvIHRoZSBlbmQgb2YgdGhlIGFyY2hpdmUsCiAgICAgICAgICAgICAgICAjIGJlZm9yZSB0aGUgZmlyc3QgZW1wdHkgYmxvY2suCiAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuZmlsZW9iai5zZWVrKHNlbGYub2Zmc2V0KQogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgdGFyaW5mbyA9IHNlbGYudGFyaW5mby5mcm9tdGFyZmlsZShzZWxmKQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1lbWJlcnMuYXBwZW5kKHRhcmluZm8pCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEVPRkhlYWRlckVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpbGVvYmouc2VlayhzZWxmLm9mZnNldCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBleGNlcHQgSGVhZGVyRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgUmVhZEVycm9yKHN0cihlKSkKCiAgICAgICAgICAgIGlmIHNlbGYubW9kZSBpbiAiYXciOgogICAgICAgICAgICAgICAgc2VsZi5fbG9hZGVkID0gVHJ1ZQoKICAgICAgICAgICAgICAgIGlmIHNlbGYucGF4X2hlYWRlcnM6CiAgICAgICAgICAgICAgICAgICAgYnVmID0gc2VsZi50YXJpbmZvLmNyZWF0ZV9wYXhfZ2xvYmFsX2hlYWRlcihzZWxmLnBheF9oZWFkZXJzLmNvcHkoKSkKICAgICAgICAgICAgICAgICAgICBzZWxmLmZpbGVvYmoud3JpdGUoYnVmKQogICAgICAgICAgICAgICAgICAgIHNlbGYub2Zmc2V0ICs9IGxlbihidWYpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBpZiBub3Qgc2VsZi5fZXh0ZmlsZW9iajoKICAgICAgICAgICAgICAgIHNlbGYuZmlsZW9iai5jbG9zZSgpCiAgICAgICAgICAgIHNlbGYuY2xvc2VkID0gVHJ1ZQogICAgICAgICAgICByYWlzZQoKICAgICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBCZWxvdyBhcmUgdGhlIGNsYXNzbWV0aG9kcyB3aGljaCBhY3QgYXMgYWx0ZXJuYXRlIGNvbnN0cnVjdG9ycyB0byB0aGUKICAgICMgVGFyRmlsZSBjbGFzcy4gVGhlIG9wZW4oKSBtZXRob2QgaXMgdGhlIG9ubHkgb25lIHRoYXQgaXMgbmVlZGVkIGZvcgogICAgIyBwdWJsaWMgdXNlOyBpdCBpcyB0aGUgInN1cGVyIi1jb25zdHJ1Y3RvciBhbmQgaXMgYWJsZSB0byBzZWxlY3QgYW4KICAgICMgYWRlcXVhdGUgInN1YiItY29uc3RydWN0b3IgZm9yIGEgcGFydGljdWxhciBjb21wcmVzc2lvbiB1c2luZyB0aGUgbWFwcGluZwogICAgIyBmcm9tIE9QRU5fTUVUSC4KICAgICMKICAgICMgVGhpcyBjb25jZXB0IGFsbG93cyBvbmUgdG8gc3ViY2xhc3MgVGFyRmlsZSB3aXRob3V0IGxvc2luZyB0aGUgY29tZm9ydCBvZgogICAgIyB0aGUgc3VwZXItY29uc3RydWN0b3IuIEEgc3ViLWNvbnN0cnVjdG9yIGlzIHJlZ2lzdGVyZWQgYW5kIG1hZGUgYXZhaWxhYmxlCiAgICAjIGJ5IGFkZGluZyBpdCB0byB0aGUgbWFwcGluZyBpbiBPUEVOX01FVEguCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgb3BlbihjbHMsIG5hbWU9Tm9uZSwgbW9kZT0iciIsIGZpbGVvYmo9Tm9uZSwgYnVmc2l6ZT1SRUNPUkRTSVpFLCAqKmt3YXJncyk6CiAgICAgICAgIiIiT3BlbiBhIHRhciBhcmNoaXZlIGZvciByZWFkaW5nLCB3cml0aW5nIG9yIGFwcGVuZGluZy4gUmV0dXJuCiAgICAgICAgICAgYW4gYXBwcm9wcmlhdGUgVGFyRmlsZSBjbGFzcy4KCiAgICAgICAgICAgbW9kZToKICAgICAgICAgICAncicgb3IgJ3I6Kicgb3BlbiBmb3IgcmVhZGluZyB3aXRoIHRyYW5zcGFyZW50IGNvbXByZXNzaW9uCiAgICAgICAgICAgJ3I6JyAgICAgICAgIG9wZW4gZm9yIHJlYWRpbmcgZXhjbHVzaXZlbHkgdW5jb21wcmVzc2VkCiAgICAgICAgICAgJ3I6Z3onICAgICAgIG9wZW4gZm9yIHJlYWRpbmcgd2l0aCBnemlwIGNvbXByZXNzaW9uCiAgICAgICAgICAgJ3I6YnoyJyAgICAgIG9wZW4gZm9yIHJlYWRpbmcgd2l0aCBiemlwMiBjb21wcmVzc2lvbgogICAgICAgICAgICdyOnh6JyAgICAgICBvcGVuIGZvciByZWFkaW5nIHdpdGggbHptYSBjb21wcmVzc2lvbgogICAgICAgICAgICdhJyBvciAnYTonICBvcGVuIGZvciBhcHBlbmRpbmcsIGNyZWF0aW5nIHRoZSBmaWxlIGlmIG5lY2Vzc2FyeQogICAgICAgICAgICd3JyBvciAndzonICBvcGVuIGZvciB3cml0aW5nIHdpdGhvdXQgY29tcHJlc3Npb24KICAgICAgICAgICAndzpneicgICAgICAgb3BlbiBmb3Igd3JpdGluZyB3aXRoIGd6aXAgY29tcHJlc3Npb24KICAgICAgICAgICAndzpiejInICAgICAgb3BlbiBmb3Igd3JpdGluZyB3aXRoIGJ6aXAyIGNvbXByZXNzaW9uCiAgICAgICAgICAgJ3c6eHonICAgICAgIG9wZW4gZm9yIHdyaXRpbmcgd2l0aCBsem1hIGNvbXByZXNzaW9uCgogICAgICAgICAgICdyfConICAgICAgICBvcGVuIGEgc3RyZWFtIG9mIHRhciBibG9ja3Mgd2l0aCB0cmFuc3BhcmVudCBjb21wcmVzc2lvbgogICAgICAgICAgICdyfCcgICAgICAgICBvcGVuIGFuIHVuY29tcHJlc3NlZCBzdHJlYW0gb2YgdGFyIGJsb2NrcyBmb3IgcmVhZGluZwogICAgICAgICAgICdyfGd6JyAgICAgICBvcGVuIGEgZ3ppcCBjb21wcmVzc2VkIHN0cmVhbSBvZiB0YXIgYmxvY2tzCiAgICAgICAgICAgJ3J8YnoyJyAgICAgIG9wZW4gYSBiemlwMiBjb21wcmVzc2VkIHN0cmVhbSBvZiB0YXIgYmxvY2tzCiAgICAgICAgICAgJ3J8eHonICAgICAgIG9wZW4gYW4gbHptYSBjb21wcmVzc2VkIHN0cmVhbSBvZiB0YXIgYmxvY2tzCiAgICAgICAgICAgJ3d8JyAgICAgICAgIG9wZW4gYW4gdW5jb21wcmVzc2VkIHN0cmVhbSBmb3Igd3JpdGluZwogICAgICAgICAgICd3fGd6JyAgICAgICBvcGVuIGEgZ3ppcCBjb21wcmVzc2VkIHN0cmVhbSBmb3Igd3JpdGluZwogICAgICAgICAgICd3fGJ6MicgICAgICBvcGVuIGEgYnppcDIgY29tcHJlc3NlZCBzdHJlYW0gZm9yIHdyaXRpbmcKICAgICAgICAgICAnd3x4eicgICAgICAgb3BlbiBhbiBsem1hIGNvbXByZXNzZWQgc3RyZWFtIGZvciB3cml0aW5nCiAgICAgICAgIiIiCgogICAgICAgIGlmIG5vdCBuYW1lIGFuZCBub3QgZmlsZW9iajoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibm90aGluZyB0byBvcGVuIikKCiAgICAgICAgaWYgbW9kZSBpbiAoInIiLCAicjoqIik6CiAgICAgICAgICAgICMgRmluZCBvdXQgd2hpY2ggKm9wZW4oKSBpcyBhcHByb3ByaWF0ZSBmb3Igb3BlbmluZyB0aGUgZmlsZS4KICAgICAgICAgICAgZm9yIGNvbXB0eXBlIGluIGNscy5PUEVOX01FVEg6CiAgICAgICAgICAgICAgICBmdW5jID0gZ2V0YXR0cihjbHMsIGNscy5PUEVOX01FVEhbY29tcHR5cGVdKQogICAgICAgICAgICAgICAgaWYgZmlsZW9iaiBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBzYXZlZF9wb3MgPSBmaWxlb2JqLnRlbGwoKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jKG5hbWUsICJyIiwgZmlsZW9iaiwgKiprd2FyZ3MpCiAgICAgICAgICAgICAgICBleGNlcHQgKFJlYWRFcnJvciwgQ29tcHJlc3Npb25FcnJvcikgYXMgZToKICAgICAgICAgICAgICAgICAgICBpZiBmaWxlb2JqIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlb2JqLnNlZWsoc2F2ZWRfcG9zKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIHJhaXNlIFJlYWRFcnJvcigiZmlsZSBjb3VsZCBub3QgYmUgb3BlbmVkIHN1Y2Nlc3NmdWxseSIpCgogICAgICAgIGVsaWYgIjoiIGluIG1vZGU6CiAgICAgICAgICAgIGZpbGVtb2RlLCBjb21wdHlwZSA9IG1vZGUuc3BsaXQoIjoiLCAxKQogICAgICAgICAgICBmaWxlbW9kZSA9IGZpbGVtb2RlIG9yICJyIgogICAgICAgICAgICBjb21wdHlwZSA9IGNvbXB0eXBlIG9yICJ0YXIiCgogICAgICAgICAgICAjIFNlbGVjdCB0aGUgKm9wZW4oKSBmdW5jdGlvbiBhY2NvcmRpbmcgdG8KICAgICAgICAgICAgIyBnaXZlbiBjb21wcmVzc2lvbi4KICAgICAgICAgICAgaWYgY29tcHR5cGUgaW4gY2xzLk9QRU5fTUVUSDoKICAgICAgICAgICAgICAgIGZ1bmMgPSBnZXRhdHRyKGNscywgY2xzLk9QRU5fTUVUSFtjb21wdHlwZV0pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBDb21wcmVzc2lvbkVycm9yKCJ1bmtub3duIGNvbXByZXNzaW9uIHR5cGUgJXIiICUgY29tcHR5cGUpCiAgICAgICAgICAgIHJldHVybiBmdW5jKG5hbWUsIGZpbGVtb2RlLCBmaWxlb2JqLCAqKmt3YXJncykKCiAgICAgICAgZWxpZiAifCIgaW4gbW9kZToKICAgICAgICAgICAgZmlsZW1vZGUsIGNvbXB0eXBlID0gbW9kZS5zcGxpdCgifCIsIDEpCiAgICAgICAgICAgIGZpbGVtb2RlID0gZmlsZW1vZGUgb3IgInIiCiAgICAgICAgICAgIGNvbXB0eXBlID0gY29tcHR5cGUgb3IgInRhciIKCiAgICAgICAgICAgIGlmIGZpbGVtb2RlIG5vdCBpbiAicnciOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibW9kZSBtdXN0IGJlICdyJyBvciAndyciKQoKICAgICAgICAgICAgc3RyZWFtID0gX1N0cmVhbShuYW1lLCBmaWxlbW9kZSwgY29tcHR5cGUsIGZpbGVvYmosIGJ1ZnNpemUpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHQgPSBjbHMobmFtZSwgZmlsZW1vZGUsIHN0cmVhbSwgKiprd2FyZ3MpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHN0cmVhbS5jbG9zZSgpCiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICB0Ll9leHRmaWxlb2JqID0gRmFsc2UKICAgICAgICAgICAgcmV0dXJuIHQKCiAgICAgICAgZWxpZiBtb2RlIGluICJhdyI6CiAgICAgICAgICAgIHJldHVybiBjbHMudGFyb3BlbihuYW1lLCBtb2RlLCBmaWxlb2JqLCAqKmt3YXJncykKCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidW5kaXNjZXJuaWJsZSBtb2RlIikKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiB0YXJvcGVuKGNscywgbmFtZSwgbW9kZT0iciIsIGZpbGVvYmo9Tm9uZSwgKiprd2FyZ3MpOgogICAgICAgICIiIk9wZW4gdW5jb21wcmVzc2VkIHRhciBhcmNoaXZlIG5hbWUgZm9yIHJlYWRpbmcgb3Igd3JpdGluZy4KICAgICAgICAiIiIKICAgICAgICBpZiBsZW4obW9kZSkgPiAxIG9yIG1vZGUgbm90IGluICJyYXciOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJtb2RlIG11c3QgYmUgJ3InLCAnYScgb3IgJ3cnIikKICAgICAgICByZXR1cm4gY2xzKG5hbWUsIG1vZGUsIGZpbGVvYmosICoqa3dhcmdzKQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGd6b3BlbihjbHMsIG5hbWUsIG1vZGU9InIiLCBmaWxlb2JqPU5vbmUsIGNvbXByZXNzbGV2ZWw9OSwgKiprd2FyZ3MpOgogICAgICAgICIiIk9wZW4gZ3ppcCBjb21wcmVzc2VkIHRhciBhcmNoaXZlIG5hbWUgZm9yIHJlYWRpbmcgb3Igd3JpdGluZy4KICAgICAgICAgICBBcHBlbmRpbmcgaXMgbm90IGFsbG93ZWQuCiAgICAgICAgIiIiCiAgICAgICAgaWYgbGVuKG1vZGUpID4gMSBvciBtb2RlIG5vdCBpbiAicnciOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJtb2RlIG11c3QgYmUgJ3InIG9yICd3JyIpCgogICAgICAgIHRyeToKICAgICAgICAgICAgaW1wb3J0IGd6aXAKICAgICAgICAgICAgZ3ppcC5HemlwRmlsZQogICAgICAgIGV4Y2VwdCAoSW1wb3J0RXJyb3IsIEF0dHJpYnV0ZUVycm9yKToKICAgICAgICAgICAgcmFpc2UgQ29tcHJlc3Npb25FcnJvcigiZ3ppcCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZSIpCgogICAgICAgIGV4dGZpbGVvYmogPSBmaWxlb2JqIGlzIG5vdCBOb25lCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmaWxlb2JqID0gZ3ppcC5HemlwRmlsZShuYW1lLCBtb2RlICsgImIiLCBjb21wcmVzc2xldmVsLCBmaWxlb2JqKQogICAgICAgICAgICB0ID0gY2xzLnRhcm9wZW4obmFtZSwgbW9kZSwgZmlsZW9iaiwgKiprd2FyZ3MpCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIGlmIG5vdCBleHRmaWxlb2JqIGFuZCBmaWxlb2JqIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgZmlsZW9iai5jbG9zZSgpCiAgICAgICAgICAgIGlmIGZpbGVvYmogaXMgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgIHJhaXNlIFJlYWRFcnJvcigibm90IGEgZ3ppcCBmaWxlIikKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGlmIG5vdCBleHRmaWxlb2JqIGFuZCBmaWxlb2JqIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgZmlsZW9iai5jbG9zZSgpCiAgICAgICAgICAgIHJhaXNlCiAgICAgICAgdC5fZXh0ZmlsZW9iaiA9IGV4dGZpbGVvYmoKICAgICAgICByZXR1cm4gdAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGJ6Mm9wZW4oY2xzLCBuYW1lLCBtb2RlPSJyIiwgZmlsZW9iaj1Ob25lLCBjb21wcmVzc2xldmVsPTksICoqa3dhcmdzKToKICAgICAgICAiIiJPcGVuIGJ6aXAyIGNvbXByZXNzZWQgdGFyIGFyY2hpdmUgbmFtZSBmb3IgcmVhZGluZyBvciB3cml0aW5nLgogICAgICAgICAgIEFwcGVuZGluZyBpcyBub3QgYWxsb3dlZC4KICAgICAgICAiIiIKICAgICAgICBpZiBsZW4obW9kZSkgPiAxIG9yIG1vZGUgbm90IGluICJydyI6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm1vZGUgbXVzdCBiZSAncicgb3IgJ3cnLiIpCgogICAgICAgIHRyeToKICAgICAgICAgICAgaW1wb3J0IGJ6MgogICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgcmFpc2UgQ29tcHJlc3Npb25FcnJvcigiYnoyIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlIikKCiAgICAgICAgZmlsZW9iaiA9IGJ6Mi5CWjJGaWxlKGZpbGVvYmogb3IgbmFtZSwgbW9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHJlc3NsZXZlbD1jb21wcmVzc2xldmVsKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHQgPSBjbHMudGFyb3BlbihuYW1lLCBtb2RlLCBmaWxlb2JqLCAqKmt3YXJncykKICAgICAgICBleGNlcHQgKElPRXJyb3IsIEVPRkVycm9yKToKICAgICAgICAgICAgZmlsZW9iai5jbG9zZSgpCiAgICAgICAgICAgIHJhaXNlIFJlYWRFcnJvcigibm90IGEgYnppcDIgZmlsZSIpCiAgICAgICAgdC5fZXh0ZmlsZW9iaiA9IEZhbHNlCiAgICAgICAgcmV0dXJuIHQKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiB4em9wZW4oY2xzLCBuYW1lLCBtb2RlPSJyIiwgZmlsZW9iaj1Ob25lLCBwcmVzZXQ9Tm9uZSwgKiprd2FyZ3MpOgogICAgICAgICIiIk9wZW4gbHptYSBjb21wcmVzc2VkIHRhciBhcmNoaXZlIG5hbWUgZm9yIHJlYWRpbmcgb3Igd3JpdGluZy4KICAgICAgICAgICBBcHBlbmRpbmcgaXMgbm90IGFsbG93ZWQuCiAgICAgICAgIiIiCiAgICAgICAgaWYgbW9kZSBub3QgaW4gKCJyIiwgInciKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibW9kZSBtdXN0IGJlICdyJyBvciAndyciKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGltcG9ydCBsem1hCiAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICByYWlzZSBDb21wcmVzc2lvbkVycm9yKCJsem1hIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlIikKCiAgICAgICAgZmlsZW9iaiA9IGx6bWEuTFpNQUZpbGUoZmlsZW9iaiBvciBuYW1lLCBtb2RlLCBwcmVzZXQ9cHJlc2V0KQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHQgPSBjbHMudGFyb3BlbihuYW1lLCBtb2RlLCBmaWxlb2JqLCAqKmt3YXJncykKICAgICAgICBleGNlcHQgKGx6bWEuTFpNQUVycm9yLCBFT0ZFcnJvcik6CiAgICAgICAgICAgIGZpbGVvYmouY2xvc2UoKQogICAgICAgICAgICByYWlzZSBSZWFkRXJyb3IoIm5vdCBhbiBsem1hIGZpbGUiKQogICAgICAgIHQuX2V4dGZpbGVvYmogPSBGYWxzZQogICAgICAgIHJldHVybiB0CgogICAgIyBBbGwgKm9wZW4oKSBtZXRob2RzIGFyZSByZWdpc3RlcmVkIGhlcmUuCiAgICBPUEVOX01FVEggPSB7CiAgICAgICAgInRhciI6ICJ0YXJvcGVuIiwgICAjIHVuY29tcHJlc3NlZCB0YXIKICAgICAgICAiZ3oiOiAgImd6b3BlbiIsICAgICMgZ3ppcCBjb21wcmVzc2VkIHRhcgogICAgICAgICJiejIiOiAiYnoyb3BlbiIsICAgIyBiemlwMiBjb21wcmVzc2VkIHRhcgogICAgICAgICJ4eiI6ICAieHpvcGVuIiAgICAgIyBsem1hIGNvbXByZXNzZWQgdGFyCiAgICB9CgogICAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFRoZSBwdWJsaWMgbWV0aG9kcyB3aGljaCBUYXJGaWxlIHByb3ZpZGVzOgoKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICAiIiJDbG9zZSB0aGUgVGFyRmlsZS4gSW4gd3JpdGUtbW9kZSwgdHdvIGZpbmlzaGluZyB6ZXJvIGJsb2NrcyBhcmUKICAgICAgICAgICBhcHBlbmRlZCB0byB0aGUgYXJjaGl2ZS4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIHNlbGYubW9kZSBpbiAiYXciOgogICAgICAgICAgICBzZWxmLmZpbGVvYmoud3JpdGUoTlVMICogKEJMT0NLU0laRSAqIDIpKQogICAgICAgICAgICBzZWxmLm9mZnNldCArPSAoQkxPQ0tTSVpFICogMikKICAgICAgICAgICAgIyBmaWxsIHVwIHRoZSBlbmQgd2l0aCB6ZXJvLWJsb2NrcwogICAgICAgICAgICAjIChsaWtlIG9wdGlvbiAtYjIwIGZvciB0YXIgZG9lcykKICAgICAgICAgICAgYmxvY2tzLCByZW1haW5kZXIgPSBkaXZtb2Qoc2VsZi5vZmZzZXQsIFJFQ09SRFNJWkUpCiAgICAgICAgICAgIGlmIHJlbWFpbmRlciA+IDA6CiAgICAgICAgICAgICAgICBzZWxmLmZpbGVvYmoud3JpdGUoTlVMICogKFJFQ09SRFNJWkUgLSByZW1haW5kZXIpKQoKICAgICAgICBpZiBub3Qgc2VsZi5fZXh0ZmlsZW9iajoKICAgICAgICAgICAgc2VsZi5maWxlb2JqLmNsb3NlKCkKICAgICAgICBzZWxmLmNsb3NlZCA9IFRydWUKCiAgICBkZWYgZ2V0bWVtYmVyKHNlbGYsIG5hbWUpOgogICAgICAgICIiIlJldHVybiBhIFRhckluZm8gb2JqZWN0IGZvciBtZW1iZXIgYG5hbWUnLiBJZiBgbmFtZScgY2FuIG5vdCBiZQogICAgICAgICAgIGZvdW5kIGluIHRoZSBhcmNoaXZlLCBLZXlFcnJvciBpcyByYWlzZWQuIElmIGEgbWVtYmVyIG9jY3VycyBtb3JlCiAgICAgICAgICAgdGhhbiBvbmNlIGluIHRoZSBhcmNoaXZlLCBpdHMgbGFzdCBvY2N1cnJlbmNlIGlzIGFzc3VtZWQgdG8gYmUgdGhlCiAgICAgICAgICAgbW9zdCB1cC10by1kYXRlIHZlcnNpb24uCiAgICAgICAgIiIiCiAgICAgICAgdGFyaW5mbyA9IHNlbGYuX2dldG1lbWJlcihuYW1lKQogICAgICAgIGlmIHRhcmluZm8gaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3IoImZpbGVuYW1lICVyIG5vdCBmb3VuZCIgJSBuYW1lKQogICAgICAgIHJldHVybiB0YXJpbmZvCgogICAgZGVmIGdldG1lbWJlcnMoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBtZW1iZXJzIG9mIHRoZSBhcmNoaXZlIGFzIGEgbGlzdCBvZiBUYXJJbmZvIG9iamVjdHMuIFRoZQogICAgICAgICAgIGxpc3QgaGFzIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSBtZW1iZXJzIGluIHRoZSBhcmNoaXZlLgogICAgICAgICIiIgogICAgICAgIHNlbGYuX2NoZWNrKCkKICAgICAgICBpZiBub3Qgc2VsZi5fbG9hZGVkOiAgICAjIGlmIHdlIHdhbnQgdG8gb2J0YWluIGEgbGlzdCBvZgogICAgICAgICAgICBzZWxmLl9sb2FkKCkgICAgICAgICMgYWxsIG1lbWJlcnMsIHdlIGZpcnN0IGhhdmUgdG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHNjYW4gdGhlIHdob2xlIGFyY2hpdmUuCiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVycwoKICAgIGRlZiBnZXRuYW1lcyhzZWxmKToKICAgICAgICAiIiJSZXR1cm4gdGhlIG1lbWJlcnMgb2YgdGhlIGFyY2hpdmUgYXMgYSBsaXN0IG9mIHRoZWlyIG5hbWVzLiBJdCBoYXMKICAgICAgICAgICB0aGUgc2FtZSBvcmRlciBhcyB0aGUgbGlzdCByZXR1cm5lZCBieSBnZXRtZW1iZXJzKCkuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIFt0YXJpbmZvLm5hbWUgZm9yIHRhcmluZm8gaW4gc2VsZi5nZXRtZW1iZXJzKCldCgogICAgZGVmIGdldHRhcmluZm8oc2VsZiwgbmFtZT1Ob25lLCBhcmNuYW1lPU5vbmUsIGZpbGVvYmo9Tm9uZSk6CiAgICAgICAgIiIiQ3JlYXRlIGEgVGFySW5mbyBvYmplY3QgZm9yIGVpdGhlciB0aGUgZmlsZSBgbmFtZScgb3IgdGhlIGZpbGUKICAgICAgICAgICBvYmplY3QgYGZpbGVvYmonICh1c2luZyBvcy5mc3RhdCBvbiBpdHMgZmlsZSBkZXNjcmlwdG9yKS4gWW91IGNhbgogICAgICAgICAgIG1vZGlmeSBzb21lIG9mIHRoZSBUYXJJbmZvJ3MgYXR0cmlidXRlcyBiZWZvcmUgeW91IGFkZCBpdCB1c2luZwogICAgICAgICAgIGFkZGZpbGUoKS4gSWYgZ2l2ZW4sIGBhcmNuYW1lJyBzcGVjaWZpZXMgYW4gYWx0ZXJuYXRpdmUgbmFtZSBmb3IgdGhlCiAgICAgICAgICAgZmlsZSBpbiB0aGUgYXJjaGl2ZS4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9jaGVjaygiYXciKQoKICAgICAgICAjIFdoZW4gZmlsZW9iaiBpcyBnaXZlbiwgcmVwbGFjZSBuYW1lIGJ5CiAgICAgICAgIyBmaWxlb2JqJ3MgcmVhbCBuYW1lLgogICAgICAgIGlmIGZpbGVvYmogaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG5hbWUgPSBmaWxlb2JqLm5hbWUKCiAgICAgICAgIyBCdWlsZGluZyB0aGUgbmFtZSBvZiB0aGUgbWVtYmVyIGluIHRoZSBhcmNoaXZlLgogICAgICAgICMgQmFja3dhcmQgc2xhc2hlcyBhcmUgY29udmVydGVkIHRvIGZvcndhcmQgc2xhc2hlcywKICAgICAgICAjIEFic29sdXRlIHBhdGhzIGFyZSB0dXJuZWQgdG8gcmVsYXRpdmUgcGF0aHMuCiAgICAgICAgaWYgYXJjbmFtZSBpcyBOb25lOgogICAgICAgICAgICBhcmNuYW1lID0gbmFtZQogICAgICAgIGRydiwgYXJjbmFtZSA9IG9zLnBhdGguc3BsaXRkcml2ZShhcmNuYW1lKQogICAgICAgIGFyY25hbWUgPSBhcmNuYW1lLnJlcGxhY2Uob3Muc2VwLCAiLyIpCiAgICAgICAgYXJjbmFtZSA9IGFyY25hbWUubHN0cmlwKCIvIikKCiAgICAgICAgIyBOb3csIGZpbGwgdGhlIFRhckluZm8gb2JqZWN0IHdpdGgKICAgICAgICAjIGluZm9ybWF0aW9uIHNwZWNpZmljIGZvciB0aGUgZmlsZS4KICAgICAgICB0YXJpbmZvID0gc2VsZi50YXJpbmZvKCkKICAgICAgICB0YXJpbmZvLnRhcmZpbGUgPSBzZWxmCgogICAgICAgICMgVXNlIG9zLnN0YXQgb3Igb3MubHN0YXQsIGRlcGVuZGluZyBvbiBwbGF0Zm9ybQogICAgICAgICMgYW5kIGlmIHN5bWxpbmtzIHNoYWxsIGJlIHJlc29sdmVkLgogICAgICAgIGlmIGZpbGVvYmogaXMgTm9uZToKICAgICAgICAgICAgaWYgaGFzYXR0cihvcywgImxzdGF0IikgYW5kIG5vdCBzZWxmLmRlcmVmZXJlbmNlOgogICAgICAgICAgICAgICAgc3RhdHJlcyA9IG9zLmxzdGF0KG5hbWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzdGF0cmVzID0gb3Muc3RhdChuYW1lKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN0YXRyZXMgPSBvcy5mc3RhdChmaWxlb2JqLmZpbGVubygpKQogICAgICAgIGxpbmtuYW1lID0gIiIKCiAgICAgICAgc3RtZCA9IHN0YXRyZXMuc3RfbW9kZQogICAgICAgIGlmIHN0YXQuU19JU1JFRyhzdG1kKToKICAgICAgICAgICAgaW5vZGUgPSAoc3RhdHJlcy5zdF9pbm8sIHN0YXRyZXMuc3RfZGV2KQogICAgICAgICAgICBpZiBub3Qgc2VsZi5kZXJlZmVyZW5jZSBhbmQgc3RhdHJlcy5zdF9ubGluayA+IDEgYW5kIFwKICAgICAgICAgICAgICAgICAgICBpbm9kZSBpbiBzZWxmLmlub2RlcyBhbmQgYXJjbmFtZSAhPSBzZWxmLmlub2Rlc1tpbm9kZV06CiAgICAgICAgICAgICAgICAjIElzIGl0IGEgaGFyZGxpbmsgdG8gYW4gYWxyZWFkeQogICAgICAgICAgICAgICAgIyBhcmNoaXZlZCBmaWxlPwogICAgICAgICAgICAgICAgdHlwZSA9IExOS1RZUEUKICAgICAgICAgICAgICAgIGxpbmtuYW1lID0gc2VsZi5pbm9kZXNbaW5vZGVdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIFRoZSBpbm9kZSBpcyBhZGRlZCBvbmx5IGlmIGl0cyB2YWxpZC4KICAgICAgICAgICAgICAgICMgRm9yIHdpbjMyIGl0IGlzIGFsd2F5cyAwLgogICAgICAgICAgICAgICAgdHlwZSA9IFJFR1RZUEUKICAgICAgICAgICAgICAgIGlmIGlub2RlWzBdOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaW5vZGVzW2lub2RlXSA9IGFyY25hbWUKICAgICAgICBlbGlmIHN0YXQuU19JU0RJUihzdG1kKToKICAgICAgICAgICAgdHlwZSA9IERJUlRZUEUKICAgICAgICBlbGlmIHN0YXQuU19JU0ZJRk8oc3RtZCk6CiAgICAgICAgICAgIHR5cGUgPSBGSUZPVFlQRQogICAgICAgIGVsaWYgc3RhdC5TX0lTTE5LKHN0bWQpOgogICAgICAgICAgICB0eXBlID0gU1lNVFlQRQogICAgICAgICAgICBsaW5rbmFtZSA9IG9zLnJlYWRsaW5rKG5hbWUpCiAgICAgICAgZWxpZiBzdGF0LlNfSVNDSFIoc3RtZCk6CiAgICAgICAgICAgIHR5cGUgPSBDSFJUWVBFCiAgICAgICAgZWxpZiBzdGF0LlNfSVNCTEsoc3RtZCk6CiAgICAgICAgICAgIHR5cGUgPSBCTEtUWVBFCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgIyBGaWxsIHRoZSBUYXJJbmZvIG9iamVjdCB3aXRoIGFsbAogICAgICAgICMgaW5mb3JtYXRpb24gd2UgY2FuIGdldC4KICAgICAgICB0YXJpbmZvLm5hbWUgPSBhcmNuYW1lCiAgICAgICAgdGFyaW5mby5tb2RlID0gc3RtZAogICAgICAgIHRhcmluZm8udWlkID0gc3RhdHJlcy5zdF91aWQKICAgICAgICB0YXJpbmZvLmdpZCA9IHN0YXRyZXMuc3RfZ2lkCiAgICAgICAgaWYgdHlwZSA9PSBSRUdUWVBFOgogICAgICAgICAgICB0YXJpbmZvLnNpemUgPSBzdGF0cmVzLnN0X3NpemUKICAgICAgICBlbHNlOgogICAgICAgICAgICB0YXJpbmZvLnNpemUgPSAwCiAgICAgICAgdGFyaW5mby5tdGltZSA9IHN0YXRyZXMuc3RfbXRpbWUKICAgICAgICB0YXJpbmZvLnR5cGUgPSB0eXBlCiAgICAgICAgdGFyaW5mby5saW5rbmFtZSA9IGxpbmtuYW1lCiAgICAgICAgaWYgcHdkOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB0YXJpbmZvLnVuYW1lID0gcHdkLmdldHB3dWlkKHRhcmluZm8udWlkKVswXQogICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgaWYgZ3JwOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB0YXJpbmZvLmduYW1lID0gZ3JwLmdldGdyZ2lkKHRhcmluZm8uZ2lkKVswXQogICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgIGlmIHR5cGUgaW4gKENIUlRZUEUsIEJMS1RZUEUpOgogICAgICAgICAgICBpZiBoYXNhdHRyKG9zLCAibWFqb3IiKSBhbmQgaGFzYXR0cihvcywgIm1pbm9yIik6CiAgICAgICAgICAgICAgICB0YXJpbmZvLmRldm1ham9yID0gb3MubWFqb3Ioc3RhdHJlcy5zdF9yZGV2KQogICAgICAgICAgICAgICAgdGFyaW5mby5kZXZtaW5vciA9IG9zLm1pbm9yKHN0YXRyZXMuc3RfcmRldikKICAgICAgICByZXR1cm4gdGFyaW5mbwoKICAgIGRlZiBsaXN0KHNlbGYsIHZlcmJvc2U9VHJ1ZSk6CiAgICAgICAgIiIiUHJpbnQgYSB0YWJsZSBvZiBjb250ZW50cyB0byBzeXMuc3Rkb3V0LiBJZiBgdmVyYm9zZScgaXMgRmFsc2UsIG9ubHkKICAgICAgICAgICB0aGUgbmFtZXMgb2YgdGhlIG1lbWJlcnMgYXJlIHByaW50ZWQuIElmIGl0IGlzIFRydWUsIGFuIGBscyAtbCctbGlrZQogICAgICAgICAgIG91dHB1dCBpcyBwcm9kdWNlZC4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9jaGVjaygpCgogICAgICAgIGZvciB0YXJpbmZvIGluIHNlbGY6CiAgICAgICAgICAgIGlmIHZlcmJvc2U6CiAgICAgICAgICAgICAgICBwcmludChzdGF0LmZpbGVtb2RlKHRhcmluZm8ubW9kZSksIGVuZD0nICcpCiAgICAgICAgICAgICAgICBwcmludCgiJXMvJXMiICUgKHRhcmluZm8udW5hbWUgb3IgdGFyaW5mby51aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmluZm8uZ25hbWUgb3IgdGFyaW5mby5naWQpLCBlbmQ9JyAnKQogICAgICAgICAgICAgICAgaWYgdGFyaW5mby5pc2NocigpIG9yIHRhcmluZm8uaXNibGsoKToKICAgICAgICAgICAgICAgICAgICBwcmludCgiJTEwcyIgJSAoIiVkLCVkIiBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICUgKHRhcmluZm8uZGV2bWFqb3IsIHRhcmluZm8uZGV2bWlub3IpKSwgZW5kPScgJykKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiUxMGQiICUgdGFyaW5mby5zaXplLCBlbmQ9JyAnKQogICAgICAgICAgICAgICAgcHJpbnQoIiVkLSUwMmQtJTAyZCAlMDJkOiUwMmQ6JTAyZCIgXAogICAgICAgICAgICAgICAgICAgICAgJSB0aW1lLmxvY2FsdGltZSh0YXJpbmZvLm10aW1lKVs6Nl0sIGVuZD0nICcpCgogICAgICAgICAgICBwcmludCh0YXJpbmZvLm5hbWUgKyAoIi8iIGlmIHRhcmluZm8uaXNkaXIoKSBlbHNlICIiKSwgZW5kPScgJykKCiAgICAgICAgICAgIGlmIHZlcmJvc2U6CiAgICAgICAgICAgICAgICBpZiB0YXJpbmZvLmlzc3ltKCk6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIi0+IiwgdGFyaW5mby5saW5rbmFtZSwgZW5kPScgJykKICAgICAgICAgICAgICAgIGlmIHRhcmluZm8uaXNsbmsoKToKICAgICAgICAgICAgICAgICAgICBwcmludCgibGluayB0byIsIHRhcmluZm8ubGlua25hbWUsIGVuZD0nICcpCiAgICAgICAgICAgIHByaW50KCkKCiAgICBkZWYgYWRkKHNlbGYsIG5hbWUsIGFyY25hbWU9Tm9uZSwgcmVjdXJzaXZlPVRydWUsIGV4Y2x1ZGU9Tm9uZSwgKiwgZmlsdGVyPU5vbmUpOgogICAgICAgICIiIkFkZCB0aGUgZmlsZSBgbmFtZScgdG8gdGhlIGFyY2hpdmUuIGBuYW1lJyBtYXkgYmUgYW55IHR5cGUgb2YgZmlsZQogICAgICAgICAgIChkaXJlY3RvcnksIGZpZm8sIHN5bWJvbGljIGxpbmssIGV0Yy4pLiBJZiBnaXZlbiwgYGFyY25hbWUnCiAgICAgICAgICAgc3BlY2lmaWVzIGFuIGFsdGVybmF0aXZlIG5hbWUgZm9yIHRoZSBmaWxlIGluIHRoZSBhcmNoaXZlLgogICAgICAgICAgIERpcmVjdG9yaWVzIGFyZSBhZGRlZCByZWN1cnNpdmVseSBieSBkZWZhdWx0LiBUaGlzIGNhbiBiZSBhdm9pZGVkIGJ5CiAgICAgICAgICAgc2V0dGluZyBgcmVjdXJzaXZlJyB0byBGYWxzZS4gYGV4Y2x1ZGUnIGlzIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQKICAgICAgICAgICByZXR1cm4gVHJ1ZSBmb3IgZWFjaCBmaWxlbmFtZSB0byBiZSBleGNsdWRlZC4gYGZpbHRlcicgaXMgYSBmdW5jdGlvbgogICAgICAgICAgIHRoYXQgZXhwZWN0cyBhIFRhckluZm8gb2JqZWN0IGFyZ3VtZW50IGFuZCByZXR1cm5zIHRoZSBjaGFuZ2VkCiAgICAgICAgICAgVGFySW5mbyBvYmplY3QsIGlmIGl0IHJldHVybnMgTm9uZSB0aGUgVGFySW5mbyBvYmplY3Qgd2lsbCBiZQogICAgICAgICAgIGV4Y2x1ZGVkIGZyb20gdGhlIGFyY2hpdmUuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fY2hlY2soImF3IikKCiAgICAgICAgaWYgYXJjbmFtZSBpcyBOb25lOgogICAgICAgICAgICBhcmNuYW1lID0gbmFtZQoKICAgICAgICAjIEV4Y2x1ZGUgcGF0aG5hbWVzLgogICAgICAgIGlmIGV4Y2x1ZGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGltcG9ydCB3YXJuaW5ncwogICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJ1c2UgdGhlIGZpbHRlciBhcmd1bWVudCBpbnN0ZWFkIiwKICAgICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsIDIpCiAgICAgICAgICAgIGlmIGV4Y2x1ZGUobmFtZSk6CiAgICAgICAgICAgICAgICBzZWxmLl9kYmcoMiwgInRhcmZpbGU6IEV4Y2x1ZGVkICVyIiAlIG5hbWUpCiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgIyBTa2lwIGlmIHNvbWVib2R5IHRyaWVzIHRvIGFyY2hpdmUgdGhlIGFyY2hpdmUuLi4KICAgICAgICBpZiBzZWxmLm5hbWUgaXMgbm90IE5vbmUgYW5kIG9zLnBhdGguYWJzcGF0aChuYW1lKSA9PSBzZWxmLm5hbWU6CiAgICAgICAgICAgIHNlbGYuX2RiZygyLCAidGFyZmlsZTogU2tpcHBlZCAlciIgJSBuYW1lKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZi5fZGJnKDEsIG5hbWUpCgogICAgICAgICMgQ3JlYXRlIGEgVGFySW5mbyBvYmplY3QgZnJvbSB0aGUgZmlsZS4KICAgICAgICB0YXJpbmZvID0gc2VsZi5nZXR0YXJpbmZvKG5hbWUsIGFyY25hbWUpCgogICAgICAgIGlmIHRhcmluZm8gaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5fZGJnKDEsICJ0YXJmaWxlOiBVbnN1cHBvcnRlZCB0eXBlICVyIiAlIG5hbWUpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICAjIENoYW5nZSBvciBleGNsdWRlIHRoZSBUYXJJbmZvIG9iamVjdC4KICAgICAgICBpZiBmaWx0ZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHRhcmluZm8gPSBmaWx0ZXIodGFyaW5mbykKICAgICAgICAgICAgaWYgdGFyaW5mbyBpcyBOb25lOgogICAgICAgICAgICAgICAgc2VsZi5fZGJnKDIsICJ0YXJmaWxlOiBFeGNsdWRlZCAlciIgJSBuYW1lKQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgQXBwZW5kIHRoZSB0YXIgaGVhZGVyIGFuZCBkYXRhIHRvIHRoZSBhcmNoaXZlLgogICAgICAgIGlmIHRhcmluZm8uaXNyZWcoKToKICAgICAgICAgICAgd2l0aCBibHRuX29wZW4obmFtZSwgInJiIikgYXMgZjoKICAgICAgICAgICAgICAgIHNlbGYuYWRkZmlsZSh0YXJpbmZvLCBmKQoKICAgICAgICBlbGlmIHRhcmluZm8uaXNkaXIoKToKICAgICAgICAgICAgc2VsZi5hZGRmaWxlKHRhcmluZm8pCiAgICAgICAgICAgIGlmIHJlY3Vyc2l2ZToKICAgICAgICAgICAgICAgIGZvciBmIGluIG9zLmxpc3RkaXIobmFtZSk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQob3MucGF0aC5qb2luKG5hbWUsIGYpLCBvcy5wYXRoLmpvaW4oYXJjbmFtZSwgZiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmUsIGV4Y2x1ZGUsIGZpbHRlcj1maWx0ZXIpCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuYWRkZmlsZSh0YXJpbmZvKQoKICAgIGRlZiBhZGRmaWxlKHNlbGYsIHRhcmluZm8sIGZpbGVvYmo9Tm9uZSk6CiAgICAgICAgIiIiQWRkIHRoZSBUYXJJbmZvIG9iamVjdCBgdGFyaW5mbycgdG8gdGhlIGFyY2hpdmUuIElmIGBmaWxlb2JqJyBpcwogICAgICAgICAgIGdpdmVuLCB0YXJpbmZvLnNpemUgYnl0ZXMgYXJlIHJlYWQgZnJvbSBpdCBhbmQgYWRkZWQgdG8gdGhlIGFyY2hpdmUuCiAgICAgICAgICAgWW91IGNhbiBjcmVhdGUgVGFySW5mbyBvYmplY3RzIHVzaW5nIGdldHRhcmluZm8oKS4KICAgICAgICAgICBPbiBXaW5kb3dzIHBsYXRmb3JtcywgYGZpbGVvYmonIHNob3VsZCBhbHdheXMgYmUgb3BlbmVkIHdpdGggbW9kZQogICAgICAgICAgICdyYicgdG8gYXZvaWQgaXJyaXRhdGlvbiBhYm91dCB0aGUgZmlsZSBzaXplLgogICAgICAgICIiIgogICAgICAgIHNlbGYuX2NoZWNrKCJhdyIpCgogICAgICAgIHRhcmluZm8gPSBjb3B5LmNvcHkodGFyaW5mbykKCiAgICAgICAgYnVmID0gdGFyaW5mby50b2J1ZihzZWxmLmZvcm1hdCwgc2VsZi5lbmNvZGluZywgc2VsZi5lcnJvcnMpCiAgICAgICAgc2VsZi5maWxlb2JqLndyaXRlKGJ1ZikKICAgICAgICBzZWxmLm9mZnNldCArPSBsZW4oYnVmKQoKICAgICAgICAjIElmIHRoZXJlJ3MgZGF0YSB0byBmb2xsb3csIGFwcGVuZCBpdC4KICAgICAgICBpZiBmaWxlb2JqIGlzIG5vdCBOb25lOgogICAgICAgICAgICBjb3B5ZmlsZW9iaihmaWxlb2JqLCBzZWxmLmZpbGVvYmosIHRhcmluZm8uc2l6ZSkKICAgICAgICAgICAgYmxvY2tzLCByZW1haW5kZXIgPSBkaXZtb2QodGFyaW5mby5zaXplLCBCTE9DS1NJWkUpCiAgICAgICAgICAgIGlmIHJlbWFpbmRlciA+IDA6CiAgICAgICAgICAgICAgICBzZWxmLmZpbGVvYmoud3JpdGUoTlVMICogKEJMT0NLU0laRSAtIHJlbWFpbmRlcikpCiAgICAgICAgICAgICAgICBibG9ja3MgKz0gMQogICAgICAgICAgICBzZWxmLm9mZnNldCArPSBibG9ja3MgKiBCTE9DS1NJWkUKCiAgICAgICAgc2VsZi5tZW1iZXJzLmFwcGVuZCh0YXJpbmZvKQoKICAgIGRlZiBleHRyYWN0YWxsKHNlbGYsIHBhdGg9Ii4iLCBtZW1iZXJzPU5vbmUpOgogICAgICAgICIiIkV4dHJhY3QgYWxsIG1lbWJlcnMgZnJvbSB0aGUgYXJjaGl2ZSB0byB0aGUgY3VycmVudCB3b3JraW5nCiAgICAgICAgICAgZGlyZWN0b3J5IGFuZCBzZXQgb3duZXIsIG1vZGlmaWNhdGlvbiB0aW1lIGFuZCBwZXJtaXNzaW9ucyBvbgogICAgICAgICAgIGRpcmVjdG9yaWVzIGFmdGVyd2FyZHMuIGBwYXRoJyBzcGVjaWZpZXMgYSBkaWZmZXJlbnQgZGlyZWN0b3J5CiAgICAgICAgICAgdG8gZXh0cmFjdCB0by4gYG1lbWJlcnMnIGlzIG9wdGlvbmFsIGFuZCBtdXN0IGJlIGEgc3Vic2V0IG9mIHRoZQogICAgICAgICAgIGxpc3QgcmV0dXJuZWQgYnkgZ2V0bWVtYmVycygpLgogICAgICAgICIiIgogICAgICAgIGRpcmVjdG9yaWVzID0gW10KCiAgICAgICAgaWYgbWVtYmVycyBpcyBOb25lOgogICAgICAgICAgICBtZW1iZXJzID0gc2VsZgoKICAgICAgICBmb3IgdGFyaW5mbyBpbiBtZW1iZXJzOgogICAgICAgICAgICBpZiB0YXJpbmZvLmlzZGlyKCk6CiAgICAgICAgICAgICAgICAjIEV4dHJhY3QgZGlyZWN0b3JpZXMgd2l0aCBhIHNhZmUgbW9kZS4KICAgICAgICAgICAgICAgIGRpcmVjdG9yaWVzLmFwcGVuZCh0YXJpbmZvKQogICAgICAgICAgICAgICAgdGFyaW5mbyA9IGNvcHkuY29weSh0YXJpbmZvKQogICAgICAgICAgICAgICAgdGFyaW5mby5tb2RlID0gMG83MDAKICAgICAgICAgICAgIyBEbyBub3Qgc2V0X2F0dHJzIGRpcmVjdG9yaWVzLCBhcyB3ZSB3aWxsIGRvIHRoYXQgZnVydGhlciBkb3duCiAgICAgICAgICAgIHNlbGYuZXh0cmFjdCh0YXJpbmZvLCBwYXRoLCBzZXRfYXR0cnM9bm90IHRhcmluZm8uaXNkaXIoKSkKCiAgICAgICAgIyBSZXZlcnNlIHNvcnQgZGlyZWN0b3JpZXMuCiAgICAgICAgZGlyZWN0b3JpZXMuc29ydChrZXk9bGFtYmRhIGE6IGEubmFtZSkKICAgICAgICBkaXJlY3Rvcmllcy5yZXZlcnNlKCkKCiAgICAgICAgIyBTZXQgY29ycmVjdCBvd25lciwgbXRpbWUgYW5kIGZpbGVtb2RlIG9uIGRpcmVjdG9yaWVzLgogICAgICAgIGZvciB0YXJpbmZvIGluIGRpcmVjdG9yaWVzOgogICAgICAgICAgICBkaXJwYXRoID0gb3MucGF0aC5qb2luKHBhdGgsIHRhcmluZm8ubmFtZSkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5jaG93bih0YXJpbmZvLCBkaXJwYXRoKQogICAgICAgICAgICAgICAgc2VsZi51dGltZSh0YXJpbmZvLCBkaXJwYXRoKQogICAgICAgICAgICAgICAgc2VsZi5jaG1vZCh0YXJpbmZvLCBkaXJwYXRoKQogICAgICAgICAgICBleGNlcHQgRXh0cmFjdEVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICBpZiBzZWxmLmVycm9ybGV2ZWwgPiAxOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2RiZygxLCAidGFyZmlsZTogJXMiICUgZSkKCiAgICBkZWYgZXh0cmFjdChzZWxmLCBtZW1iZXIsIHBhdGg9IiIsIHNldF9hdHRycz1UcnVlKToKICAgICAgICAiIiJFeHRyYWN0IGEgbWVtYmVyIGZyb20gdGhlIGFyY2hpdmUgdG8gdGhlIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnksCiAgICAgICAgICAgdXNpbmcgaXRzIGZ1bGwgbmFtZS4gSXRzIGZpbGUgaW5mb3JtYXRpb24gaXMgZXh0cmFjdGVkIGFzIGFjY3VyYXRlbHkKICAgICAgICAgICBhcyBwb3NzaWJsZS4gYG1lbWJlcicgbWF5IGJlIGEgZmlsZW5hbWUgb3IgYSBUYXJJbmZvIG9iamVjdC4gWW91IGNhbgogICAgICAgICAgIHNwZWNpZnkgYSBkaWZmZXJlbnQgZGlyZWN0b3J5IHVzaW5nIGBwYXRoJy4gRmlsZSBhdHRyaWJ1dGVzIChvd25lciwKICAgICAgICAgICBtdGltZSwgbW9kZSkgYXJlIHNldCB1bmxlc3MgYHNldF9hdHRycycgaXMgRmFsc2UuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fY2hlY2soInIiKQoKICAgICAgICBpZiBpc2luc3RhbmNlKG1lbWJlciwgc3RyKToKICAgICAgICAgICAgdGFyaW5mbyA9IHNlbGYuZ2V0bWVtYmVyKG1lbWJlcikKICAgICAgICBlbHNlOgogICAgICAgICAgICB0YXJpbmZvID0gbWVtYmVyCgogICAgICAgICMgUHJlcGFyZSB0aGUgbGluayB0YXJnZXQgZm9yIG1ha2VsaW5rKCkuCiAgICAgICAgaWYgdGFyaW5mby5pc2xuaygpOgogICAgICAgICAgICB0YXJpbmZvLl9saW5rX3RhcmdldCA9IG9zLnBhdGguam9pbihwYXRoLCB0YXJpbmZvLmxpbmtuYW1lKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuX2V4dHJhY3RfbWVtYmVyKHRhcmluZm8sIG9zLnBhdGguam9pbihwYXRoLCB0YXJpbmZvLm5hbWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRfYXR0cnM9c2V0X2F0dHJzKQogICAgICAgIGV4Y2VwdCBFbnZpcm9ubWVudEVycm9yIGFzIGU6CiAgICAgICAgICAgIGlmIHNlbGYuZXJyb3JsZXZlbCA+IDA6CiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgZS5maWxlbmFtZSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2RiZygxLCAidGFyZmlsZTogJXMiICUgZS5zdHJlcnJvcikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGJnKDEsICJ0YXJmaWxlOiAlcyAlciIgJSAoZS5zdHJlcnJvciwgZS5maWxlbmFtZSkpCiAgICAgICAgZXhjZXB0IEV4dHJhY3RFcnJvciBhcyBlOgogICAgICAgICAgICBpZiBzZWxmLmVycm9ybGV2ZWwgPiAxOgogICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuX2RiZygxLCAidGFyZmlsZTogJXMiICUgZSkKCiAgICBkZWYgZXh0cmFjdGZpbGUoc2VsZiwgbWVtYmVyKToKICAgICAgICAiIiJFeHRyYWN0IGEgbWVtYmVyIGZyb20gdGhlIGFyY2hpdmUgYXMgYSBmaWxlIG9iamVjdC4gYG1lbWJlcicgbWF5IGJlCiAgICAgICAgICAgYSBmaWxlbmFtZSBvciBhIFRhckluZm8gb2JqZWN0LiBJZiBgbWVtYmVyJyBpcyBhIHJlZ3VsYXIgZmlsZSBvciBhCiAgICAgICAgICAgbGluaywgYW4gaW8uQnVmZmVyZWRSZWFkZXIgb2JqZWN0IGlzIHJldHVybmVkLiBPdGhlcndpc2UsIE5vbmUgaXMKICAgICAgICAgICByZXR1cm5lZC4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9jaGVjaygiciIpCgogICAgICAgIGlmIGlzaW5zdGFuY2UobWVtYmVyLCBzdHIpOgogICAgICAgICAgICB0YXJpbmZvID0gc2VsZi5nZXRtZW1iZXIobWVtYmVyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRhcmluZm8gPSBtZW1iZXIKCiAgICAgICAgaWYgdGFyaW5mby5pc3JlZygpIG9yIHRhcmluZm8udHlwZSBub3QgaW4gU1VQUE9SVEVEX1RZUEVTOgogICAgICAgICAgICAjIE1lbWJlcnMgd2l0aCB1bmtub3duIHR5cGVzIGFyZSB0cmVhdGVkIGFzIHJlZ3VsYXIgZmlsZXMuCiAgICAgICAgICAgIHJldHVybiBzZWxmLmZpbGVvYmplY3Qoc2VsZiwgdGFyaW5mbykKCiAgICAgICAgZWxpZiB0YXJpbmZvLmlzbG5rKCkgb3IgdGFyaW5mby5pc3N5bSgpOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGYuZmlsZW9iaiwgX1N0cmVhbSk6CiAgICAgICAgICAgICAgICAjIEEgc21hbGwgYnV0IHVnbHkgd29ya2Fyb3VuZCBmb3IgdGhlIGNhc2UgdGhhdCBzb21lb25lIHRyaWVzCiAgICAgICAgICAgICAgICAjIHRvIGV4dHJhY3QgYSAoc3ltKWxpbmsgYXMgYSBmaWxlLW9iamVjdCBmcm9tIGEgbm9uLXNlZWthYmxlCiAgICAgICAgICAgICAgICAjIHN0cmVhbSBvZiB0YXIgYmxvY2tzLgogICAgICAgICAgICAgICAgcmFpc2UgU3RyZWFtRXJyb3IoImNhbm5vdCBleHRyYWN0IChzeW0pbGluayBhcyBmaWxlIG9iamVjdCIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIEEgKHN5bSlsaW5rJ3MgZmlsZSBvYmplY3QgaXMgaXRzIHRhcmdldCdzIGZpbGUgb2JqZWN0LgogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZXh0cmFjdGZpbGUoc2VsZi5fZmluZF9saW5rX3RhcmdldCh0YXJpbmZvKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIElmIHRoZXJlJ3Mgbm8gZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIG1lbWJlciAoZGlyZWN0b3J5LCBjaHJkZXYsCiAgICAgICAgICAgICMgYmxrZGV2LCBldGMuKSwgcmV0dXJuIE5vbmUgaW5zdGVhZCBvZiBhIGZpbGUgb2JqZWN0LgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBfZXh0cmFjdF9tZW1iZXIoc2VsZiwgdGFyaW5mbywgdGFyZ2V0cGF0aCwgc2V0X2F0dHJzPVRydWUpOgogICAgICAgICIiIkV4dHJhY3QgdGhlIFRhckluZm8gb2JqZWN0IHRhcmluZm8gdG8gYSBwaHlzaWNhbAogICAgICAgICAgIGZpbGUgY2FsbGVkIHRhcmdldHBhdGguCiAgICAgICAgIiIiCiAgICAgICAgIyBGZXRjaCB0aGUgVGFySW5mbyBvYmplY3QgZm9yIHRoZSBnaXZlbiBuYW1lCiAgICAgICAgIyBhbmQgYnVpbGQgdGhlIGRlc3RpbmF0aW9uIHBhdGhuYW1lLCByZXBsYWNpbmcKICAgICAgICAjIGZvcndhcmQgc2xhc2hlcyB0byBwbGF0Zm9ybSBzcGVjaWZpYyBzZXBhcmF0b3JzLgogICAgICAgIHRhcmdldHBhdGggPSB0YXJnZXRwYXRoLnJzdHJpcCgiLyIpCiAgICAgICAgdGFyZ2V0cGF0aCA9IHRhcmdldHBhdGgucmVwbGFjZSgiLyIsIG9zLnNlcCkKCiAgICAgICAgIyBDcmVhdGUgYWxsIHVwcGVyIGRpcmVjdG9yaWVzLgogICAgICAgIHVwcGVyZGlycyA9IG9zLnBhdGguZGlybmFtZSh0YXJnZXRwYXRoKQogICAgICAgIGlmIHVwcGVyZGlycyBhbmQgbm90IG9zLnBhdGguZXhpc3RzKHVwcGVyZGlycyk6CiAgICAgICAgICAgICMgQ3JlYXRlIGRpcmVjdG9yaWVzIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoZSBhcmNoaXZlIHdpdGgKICAgICAgICAgICAgIyBkZWZhdWx0IHBlcm1pc3Npb25zLgogICAgICAgICAgICBvcy5tYWtlZGlycyh1cHBlcmRpcnMpCgogICAgICAgIGlmIHRhcmluZm8uaXNsbmsoKSBvciB0YXJpbmZvLmlzc3ltKCk6CiAgICAgICAgICAgIHNlbGYuX2RiZygxLCAiJXMgLT4gJXMiICUgKHRhcmluZm8ubmFtZSwgdGFyaW5mby5saW5rbmFtZSkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5fZGJnKDEsIHRhcmluZm8ubmFtZSkKCiAgICAgICAgaWYgdGFyaW5mby5pc3JlZygpOgogICAgICAgICAgICBzZWxmLm1ha2VmaWxlKHRhcmluZm8sIHRhcmdldHBhdGgpCiAgICAgICAgZWxpZiB0YXJpbmZvLmlzZGlyKCk6CiAgICAgICAgICAgIHNlbGYubWFrZWRpcih0YXJpbmZvLCB0YXJnZXRwYXRoKQogICAgICAgIGVsaWYgdGFyaW5mby5pc2ZpZm8oKToKICAgICAgICAgICAgc2VsZi5tYWtlZmlmbyh0YXJpbmZvLCB0YXJnZXRwYXRoKQogICAgICAgIGVsaWYgdGFyaW5mby5pc2NocigpIG9yIHRhcmluZm8uaXNibGsoKToKICAgICAgICAgICAgc2VsZi5tYWtlZGV2KHRhcmluZm8sIHRhcmdldHBhdGgpCiAgICAgICAgZWxpZiB0YXJpbmZvLmlzbG5rKCkgb3IgdGFyaW5mby5pc3N5bSgpOgogICAgICAgICAgICBzZWxmLm1ha2VsaW5rKHRhcmluZm8sIHRhcmdldHBhdGgpCiAgICAgICAgZWxpZiB0YXJpbmZvLnR5cGUgbm90IGluIFNVUFBPUlRFRF9UWVBFUzoKICAgICAgICAgICAgc2VsZi5tYWtldW5rbm93bih0YXJpbmZvLCB0YXJnZXRwYXRoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYubWFrZWZpbGUodGFyaW5mbywgdGFyZ2V0cGF0aCkKCiAgICAgICAgaWYgc2V0X2F0dHJzOgogICAgICAgICAgICBzZWxmLmNob3duKHRhcmluZm8sIHRhcmdldHBhdGgpCiAgICAgICAgICAgIGlmIG5vdCB0YXJpbmZvLmlzc3ltKCk6CiAgICAgICAgICAgICAgICBzZWxmLmNobW9kKHRhcmluZm8sIHRhcmdldHBhdGgpCiAgICAgICAgICAgICAgICBzZWxmLnV0aW1lKHRhcmluZm8sIHRhcmdldHBhdGgpCgogICAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEJlbG93IGFyZSB0aGUgZGlmZmVyZW50IGZpbGUgbWV0aG9kcy4gVGhleSBhcmUgY2FsbGVkIHZpYQogICAgIyBfZXh0cmFjdF9tZW1iZXIoKSB3aGVuIGV4dHJhY3QoKSBpcyBjYWxsZWQuIFRoZXkgY2FuIGJlIHJlcGxhY2VkIGluIGEKICAgICMgc3ViY2xhc3MgdG8gaW1wbGVtZW50IG90aGVyIGZ1bmN0aW9uYWxpdHkuCgogICAgZGVmIG1ha2VkaXIoc2VsZiwgdGFyaW5mbywgdGFyZ2V0cGF0aCk6CiAgICAgICAgIiIiTWFrZSBhIGRpcmVjdG9yeSBjYWxsZWQgdGFyZ2V0cGF0aC4KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgICMgVXNlIGEgc2FmZSBtb2RlIGZvciB0aGUgZGlyZWN0b3J5LCB0aGUgcmVhbCBtb2RlIGlzIHNldAogICAgICAgICAgICAjIGxhdGVyIGluIF9leHRyYWN0X21lbWJlcigpLgogICAgICAgICAgICBvcy5ta2Rpcih0YXJnZXRwYXRoLCAwbzcwMCkKICAgICAgICBleGNlcHQgRmlsZUV4aXN0c0Vycm9yOgogICAgICAgICAgICBwYXNzCgogICAgZGVmIG1ha2VmaWxlKHNlbGYsIHRhcmluZm8sIHRhcmdldHBhdGgpOgogICAgICAgICIiIk1ha2UgYSBmaWxlIGNhbGxlZCB0YXJnZXRwYXRoLgogICAgICAgICIiIgogICAgICAgIHNvdXJjZSA9IHNlbGYuZmlsZW9iagogICAgICAgIHNvdXJjZS5zZWVrKHRhcmluZm8ub2Zmc2V0X2RhdGEpCiAgICAgICAgd2l0aCBibHRuX29wZW4odGFyZ2V0cGF0aCwgIndiIikgYXMgdGFyZ2V0OgogICAgICAgICAgICBpZiB0YXJpbmZvLnNwYXJzZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGZvciBvZmZzZXQsIHNpemUgaW4gdGFyaW5mby5zcGFyc2U6CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnNlZWsob2Zmc2V0KQogICAgICAgICAgICAgICAgICAgIGNvcHlmaWxlb2JqKHNvdXJjZSwgdGFyZ2V0LCBzaXplKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY29weWZpbGVvYmooc291cmNlLCB0YXJnZXQsIHRhcmluZm8uc2l6ZSkKICAgICAgICAgICAgdGFyZ2V0LnNlZWsodGFyaW5mby5zaXplKQogICAgICAgICAgICB0YXJnZXQudHJ1bmNhdGUoKQoKICAgIGRlZiBtYWtldW5rbm93bihzZWxmLCB0YXJpbmZvLCB0YXJnZXRwYXRoKToKICAgICAgICAiIiJNYWtlIGEgZmlsZSBmcm9tIGEgVGFySW5mbyBvYmplY3Qgd2l0aCBhbiB1bmtub3duIHR5cGUKICAgICAgICAgICBhdCB0YXJnZXRwYXRoLgogICAgICAgICIiIgogICAgICAgIHNlbGYubWFrZWZpbGUodGFyaW5mbywgdGFyZ2V0cGF0aCkKICAgICAgICBzZWxmLl9kYmcoMSwgInRhcmZpbGU6IFVua25vd24gZmlsZSB0eXBlICVyLCAiIFwKICAgICAgICAgICAgICAgICAgICAgImV4dHJhY3RlZCBhcyByZWd1bGFyIGZpbGUuIiAlIHRhcmluZm8udHlwZSkKCiAgICBkZWYgbWFrZWZpZm8oc2VsZiwgdGFyaW5mbywgdGFyZ2V0cGF0aCk6CiAgICAgICAgIiIiTWFrZSBhIGZpZm8gY2FsbGVkIHRhcmdldHBhdGguCiAgICAgICAgIiIiCiAgICAgICAgaWYgaGFzYXR0cihvcywgIm1rZmlmbyIpOgogICAgICAgICAgICBvcy5ta2ZpZm8odGFyZ2V0cGF0aCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeHRyYWN0RXJyb3IoImZpZm8gbm90IHN1cHBvcnRlZCBieSBzeXN0ZW0iKQoKICAgIGRlZiBtYWtlZGV2KHNlbGYsIHRhcmluZm8sIHRhcmdldHBhdGgpOgogICAgICAgICIiIk1ha2UgYSBjaGFyYWN0ZXIgb3IgYmxvY2sgZGV2aWNlIGNhbGxlZCB0YXJnZXRwYXRoLgogICAgICAgICIiIgogICAgICAgIGlmIG5vdCBoYXNhdHRyKG9zLCAibWtub2QiKSBvciBub3QgaGFzYXR0cihvcywgIm1ha2VkZXYiKToKICAgICAgICAgICAgcmFpc2UgRXh0cmFjdEVycm9yKCJzcGVjaWFsIGRldmljZXMgbm90IHN1cHBvcnRlZCBieSBzeXN0ZW0iKQoKICAgICAgICBtb2RlID0gdGFyaW5mby5tb2RlCiAgICAgICAgaWYgdGFyaW5mby5pc2JsaygpOgogICAgICAgICAgICBtb2RlIHw9IHN0YXQuU19JRkJMSwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1vZGUgfD0gc3RhdC5TX0lGQ0hSCgogICAgICAgIG9zLm1rbm9kKHRhcmdldHBhdGgsIG1vZGUsCiAgICAgICAgICAgICAgICAgb3MubWFrZWRldih0YXJpbmZvLmRldm1ham9yLCB0YXJpbmZvLmRldm1pbm9yKSkKCiAgICBkZWYgbWFrZWxpbmsoc2VsZiwgdGFyaW5mbywgdGFyZ2V0cGF0aCk6CiAgICAgICAgIiIiTWFrZSBhIChzeW1ib2xpYykgbGluayBjYWxsZWQgdGFyZ2V0cGF0aC4gSWYgaXQgY2Fubm90IGJlIGNyZWF0ZWQKICAgICAgICAgIChwbGF0Zm9ybSBsaW1pdGF0aW9uKSwgd2UgdHJ5IHRvIG1ha2UgYSBjb3B5IG9mIHRoZSByZWZlcmVuY2VkIGZpbGUKICAgICAgICAgIGluc3RlYWQgb2YgYSBsaW5rLgogICAgICAgICIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBGb3Igc3lzdGVtcyB0aGF0IHN1cHBvcnQgc3ltYm9saWMgYW5kIGhhcmQgbGlua3MuCiAgICAgICAgICAgIGlmIHRhcmluZm8uaXNzeW0oKToKICAgICAgICAgICAgICAgIG9zLnN5bWxpbmsodGFyaW5mby5saW5rbmFtZSwgdGFyZ2V0cGF0aCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMgU2VlIGV4dHJhY3QoKS4KICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKHRhcmluZm8uX2xpbmtfdGFyZ2V0KToKICAgICAgICAgICAgICAgICAgICBvcy5saW5rKHRhcmluZm8uX2xpbmtfdGFyZ2V0LCB0YXJnZXRwYXRoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLl9leHRyYWN0X21lbWJlcihzZWxmLl9maW5kX2xpbmtfdGFyZ2V0KHRhcmluZm8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHBhdGgpCiAgICAgICAgZXhjZXB0IHN5bWxpbmtfZXhjZXB0aW9uOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZWxmLl9leHRyYWN0X21lbWJlcihzZWxmLl9maW5kX2xpbmtfdGFyZ2V0KHRhcmluZm8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0cGF0aCkKICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgcmFpc2UgRXh0cmFjdEVycm9yKCJ1bmFibGUgdG8gcmVzb2x2ZSBsaW5rIGluc2lkZSBhcmNoaXZlIikKCiAgICBkZWYgY2hvd24oc2VsZiwgdGFyaW5mbywgdGFyZ2V0cGF0aCk6CiAgICAgICAgIiIiU2V0IG93bmVyIG9mIHRhcmdldHBhdGggYWNjb3JkaW5nIHRvIHRhcmluZm8uCiAgICAgICAgIiIiCiAgICAgICAgaWYgcHdkIGFuZCBoYXNhdHRyKG9zLCAiZ2V0ZXVpZCIpIGFuZCBvcy5nZXRldWlkKCkgPT0gMDoKICAgICAgICAgICAgIyBXZSBoYXZlIHRvIGJlIHJvb3QgdG8gZG8gc28uCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGcgPSBncnAuZ2V0Z3JuYW0odGFyaW5mby5nbmFtZSlbMl0KICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgZyA9IHRhcmluZm8uZ2lkCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHUgPSBwd2QuZ2V0cHduYW0odGFyaW5mby51bmFtZSlbMl0KICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgdSA9IHRhcmluZm8udWlkCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlmIHRhcmluZm8uaXNzeW0oKSBhbmQgaGFzYXR0cihvcywgImxjaG93biIpOgogICAgICAgICAgICAgICAgICAgIG9zLmxjaG93bih0YXJnZXRwYXRoLCB1LCBnKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBzeXMucGxhdGZvcm0gIT0gIm9zMmVteCI6CiAgICAgICAgICAgICAgICAgICAgICAgIG9zLmNob3duKHRhcmdldHBhdGgsIHUsIGcpCiAgICAgICAgICAgIGV4Y2VwdCBFbnZpcm9ubWVudEVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICByYWlzZSBFeHRyYWN0RXJyb3IoImNvdWxkIG5vdCBjaGFuZ2Ugb3duZXIiKQoKICAgIGRlZiBjaG1vZChzZWxmLCB0YXJpbmZvLCB0YXJnZXRwYXRoKToKICAgICAgICAiIiJTZXQgZmlsZSBwZXJtaXNzaW9ucyBvZiB0YXJnZXRwYXRoIGFjY29yZGluZyB0byB0YXJpbmZvLgogICAgICAgICIiIgogICAgICAgIGlmIGhhc2F0dHIob3MsICdjaG1vZCcpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBvcy5jaG1vZCh0YXJnZXRwYXRoLCB0YXJpbmZvLm1vZGUpCiAgICAgICAgICAgIGV4Y2VwdCBFbnZpcm9ubWVudEVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICByYWlzZSBFeHRyYWN0RXJyb3IoImNvdWxkIG5vdCBjaGFuZ2UgbW9kZSIpCgogICAgZGVmIHV0aW1lKHNlbGYsIHRhcmluZm8sIHRhcmdldHBhdGgpOgogICAgICAgICIiIlNldCBtb2RpZmljYXRpb24gdGltZSBvZiB0YXJnZXRwYXRoIGFjY29yZGluZyB0byB0YXJpbmZvLgogICAgICAgICIiIgogICAgICAgIGlmIG5vdCBoYXNhdHRyKG9zLCAndXRpbWUnKToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcy51dGltZSh0YXJnZXRwYXRoLCAodGFyaW5mby5tdGltZSwgdGFyaW5mby5tdGltZSkpCiAgICAgICAgZXhjZXB0IEVudmlyb25tZW50RXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgRXh0cmFjdEVycm9yKCJjb3VsZCBub3QgY2hhbmdlIG1vZGlmaWNhdGlvbiB0aW1lIikKCiAgICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGRlZiBuZXh0KHNlbGYpOgogICAgICAgICIiIlJldHVybiB0aGUgbmV4dCBtZW1iZXIgb2YgdGhlIGFyY2hpdmUgYXMgYSBUYXJJbmZvIG9iamVjdCwgd2hlbgogICAgICAgICAgIFRhckZpbGUgaXMgb3BlbmVkIGZvciByZWFkaW5nLiBSZXR1cm4gTm9uZSBpZiB0aGVyZSBpcyBubyBtb3JlCiAgICAgICAgICAgYXZhaWxhYmxlLgogICAgICAgICIiIgogICAgICAgIHNlbGYuX2NoZWNrKCJyYSIpCiAgICAgICAgaWYgc2VsZi5maXJzdG1lbWJlciBpcyBub3QgTm9uZToKICAgICAgICAgICAgbSA9IHNlbGYuZmlyc3RtZW1iZXIKICAgICAgICAgICAgc2VsZi5maXJzdG1lbWJlciA9IE5vbmUKICAgICAgICAgICAgcmV0dXJuIG0KCiAgICAgICAgIyBSZWFkIHRoZSBuZXh0IGJsb2NrLgogICAgICAgIHNlbGYuZmlsZW9iai5zZWVrKHNlbGYub2Zmc2V0KQogICAgICAgIHRhcmluZm8gPSBOb25lCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdGFyaW5mbyA9IHNlbGYudGFyaW5mby5mcm9tdGFyZmlsZShzZWxmKQogICAgICAgICAgICBleGNlcHQgRU9GSGVhZGVyRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgIGlmIHNlbGYuaWdub3JlX3plcm9zOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2RiZygyLCAiMHglWDogJXMiICUgKHNlbGYub2Zmc2V0LCBlKSkKICAgICAgICAgICAgICAgICAgICBzZWxmLm9mZnNldCArPSBCTE9DS1NJWkUKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBleGNlcHQgSW52YWxpZEhlYWRlckVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICBpZiBzZWxmLmlnbm9yZV96ZXJvczoKICAgICAgICAgICAgICAgICAgICBzZWxmLl9kYmcoMiwgIjB4JVg6ICVzIiAlIChzZWxmLm9mZnNldCwgZSkpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5vZmZzZXQgKz0gQkxPQ0tTSVpFCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGVsaWYgc2VsZi5vZmZzZXQgPT0gMDoKICAgICAgICAgICAgICAgICAgICByYWlzZSBSZWFkRXJyb3Ioc3RyKGUpKQogICAgICAgICAgICBleGNlcHQgRW1wdHlIZWFkZXJFcnJvcjoKICAgICAgICAgICAgICAgIGlmIHNlbGYub2Zmc2V0ID09IDA6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgUmVhZEVycm9yKCJlbXB0eSBmaWxlIikKICAgICAgICAgICAgZXhjZXB0IFRydW5jYXRlZEhlYWRlckVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICBpZiBzZWxmLm9mZnNldCA9PSAwOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIFJlYWRFcnJvcihzdHIoZSkpCiAgICAgICAgICAgIGV4Y2VwdCBTdWJzZXF1ZW50SGVhZGVyRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgIHJhaXNlIFJlYWRFcnJvcihzdHIoZSkpCiAgICAgICAgICAgIGJyZWFrCgogICAgICAgIGlmIHRhcmluZm8gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5hcHBlbmQodGFyaW5mbykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9sb2FkZWQgPSBUcnVlCgogICAgICAgIHJldHVybiB0YXJpbmZvCgogICAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIExpdHRsZSBoZWxwZXIgbWV0aG9kczoKCiAgICBkZWYgX2dldG1lbWJlcihzZWxmLCBuYW1lLCB0YXJpbmZvPU5vbmUsIG5vcm1hbGl6ZT1GYWxzZSk6CiAgICAgICAgIiIiRmluZCBhbiBhcmNoaXZlIG1lbWJlciBieSBuYW1lIGZyb20gYm90dG9tIHRvIHRvcC4KICAgICAgICAgICBJZiB0YXJpbmZvIGlzIGdpdmVuLCBpdCBpcyB1c2VkIGFzIHRoZSBzdGFydGluZyBwb2ludC4KICAgICAgICAiIiIKICAgICAgICAjIEVuc3VyZSB0aGF0IGFsbCBtZW1iZXJzIGhhdmUgYmVlbiBsb2FkZWQuCiAgICAgICAgbWVtYmVycyA9IHNlbGYuZ2V0bWVtYmVycygpCgogICAgICAgICMgTGltaXQgdGhlIG1lbWJlciBzZWFyY2ggbGlzdCB1cCB0byB0YXJpbmZvLgogICAgICAgIGlmIHRhcmluZm8gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1lbWJlcnMgPSBtZW1iZXJzWzptZW1iZXJzLmluZGV4KHRhcmluZm8pXQoKICAgICAgICBpZiBub3JtYWxpemU6CiAgICAgICAgICAgIG5hbWUgPSBvcy5wYXRoLm5vcm1wYXRoKG5hbWUpCgogICAgICAgIGZvciBtZW1iZXIgaW4gcmV2ZXJzZWQobWVtYmVycyk6CiAgICAgICAgICAgIGlmIG5vcm1hbGl6ZToKICAgICAgICAgICAgICAgIG1lbWJlcl9uYW1lID0gb3MucGF0aC5ub3JtcGF0aChtZW1iZXIubmFtZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG1lbWJlcl9uYW1lID0gbWVtYmVyLm5hbWUKCiAgICAgICAgICAgIGlmIG5hbWUgPT0gbWVtYmVyX25hbWU6CiAgICAgICAgICAgICAgICByZXR1cm4gbWVtYmVyCgogICAgZGVmIF9sb2FkKHNlbGYpOgogICAgICAgICIiIlJlYWQgdGhyb3VnaCB0aGUgZW50aXJlIGFyY2hpdmUgZmlsZSBhbmQgbG9vayBmb3IgcmVhZGFibGUKICAgICAgICAgICBtZW1iZXJzLgogICAgICAgICIiIgogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHRhcmluZm8gPSBzZWxmLm5leHQoKQogICAgICAgICAgICBpZiB0YXJpbmZvIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIHNlbGYuX2xvYWRlZCA9IFRydWUKCiAgICBkZWYgX2NoZWNrKHNlbGYsIG1vZGU9Tm9uZSk6CiAgICAgICAgIiIiQ2hlY2sgaWYgVGFyRmlsZSBpcyBzdGlsbCBvcGVuLCBhbmQgaWYgdGhlIG9wZXJhdGlvbidzIG1vZGUKICAgICAgICAgICBjb3JyZXNwb25kcyB0byBUYXJGaWxlJ3MgbW9kZS4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLmNsb3NlZDoKICAgICAgICAgICAgcmFpc2UgSU9FcnJvcigiJXMgaXMgY2xvc2VkIiAlIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fKQogICAgICAgIGlmIG1vZGUgaXMgbm90IE5vbmUgYW5kIHNlbGYubW9kZSBub3QgaW4gbW9kZToKICAgICAgICAgICAgcmFpc2UgSU9FcnJvcigiYmFkIG9wZXJhdGlvbiBmb3IgbW9kZSAlciIgJSBzZWxmLm1vZGUpCgogICAgZGVmIF9maW5kX2xpbmtfdGFyZ2V0KHNlbGYsIHRhcmluZm8pOgogICAgICAgICIiIkZpbmQgdGhlIHRhcmdldCBtZW1iZXIgb2YgYSBzeW1saW5rIG9yIGhhcmRsaW5rIG1lbWJlciBpbiB0aGUKICAgICAgICAgICBhcmNoaXZlLgogICAgICAgICIiIgogICAgICAgIGlmIHRhcmluZm8uaXNzeW0oKToKICAgICAgICAgICAgIyBBbHdheXMgc2VhcmNoIHRoZSBlbnRpcmUgYXJjaGl2ZS4KICAgICAgICAgICAgbGlua25hbWUgPSAiLyIuam9pbihmaWx0ZXIoTm9uZSwgKG9zLnBhdGguZGlybmFtZSh0YXJpbmZvLm5hbWUpLCB0YXJpbmZvLmxpbmtuYW1lKSkpCiAgICAgICAgICAgIGxpbWl0ID0gTm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgU2VhcmNoIHRoZSBhcmNoaXZlIGJlZm9yZSB0aGUgbGluaywgYmVjYXVzZSBhIGhhcmQgbGluayBpcwogICAgICAgICAgICAjIGp1c3QgYSByZWZlcmVuY2UgdG8gYW4gYWxyZWFkeSBhcmNoaXZlZCBmaWxlLgogICAgICAgICAgICBsaW5rbmFtZSA9IHRhcmluZm8ubGlua25hbWUKICAgICAgICAgICAgbGltaXQgPSB0YXJpbmZvCgogICAgICAgIG1lbWJlciA9IHNlbGYuX2dldG1lbWJlcihsaW5rbmFtZSwgdGFyaW5mbz1saW1pdCwgbm9ybWFsaXplPVRydWUpCiAgICAgICAgaWYgbWVtYmVyIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKCJsaW5rbmFtZSAlciBub3QgZm91bmQiICUgbGlua25hbWUpCiAgICAgICAgcmV0dXJuIG1lbWJlcgoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICAiIiJQcm92aWRlIGFuIGl0ZXJhdG9yIG9iamVjdC4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLl9sb2FkZWQ6CiAgICAgICAgICAgIHJldHVybiBpdGVyKHNlbGYubWVtYmVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gVGFySXRlcihzZWxmKQoKICAgIGRlZiBfZGJnKHNlbGYsIGxldmVsLCBtc2cpOgogICAgICAgICIiIldyaXRlIGRlYnVnZ2luZyBvdXRwdXQgdG8gc3lzLnN0ZGVyci4KICAgICAgICAiIiIKICAgICAgICBpZiBsZXZlbCA8PSBzZWxmLmRlYnVnOgogICAgICAgICAgICBwcmludChtc2csIGZpbGU9c3lzLnN0ZGVycikKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIHNlbGYuX2NoZWNrKCkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCB0eXBlLCB2YWx1ZSwgdHJhY2ViYWNrKToKICAgICAgICBpZiB0eXBlIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuY2xvc2UoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgQW4gZXhjZXB0aW9uIG9jY3VycmVkLiBXZSBtdXN0IG5vdCBjYWxsIGNsb3NlKCkgYmVjYXVzZQogICAgICAgICAgICAjIGl0IHdvdWxkIHRyeSB0byB3cml0ZSBlbmQtb2YtYXJjaGl2ZSBibG9ja3MgYW5kIHBhZGRpbmcuCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9leHRmaWxlb2JqOgogICAgICAgICAgICAgICAgc2VsZi5maWxlb2JqLmNsb3NlKCkKICAgICAgICAgICAgc2VsZi5jbG9zZWQgPSBUcnVlCiMgY2xhc3MgVGFyRmlsZQoKY2xhc3MgVGFySXRlcjoKICAgICIiIkl0ZXJhdG9yIENsYXNzLgoKICAgICAgIGZvciB0YXJpbmZvIGluIFRhckZpbGUoLi4uKToKICAgICAgICAgICBzdWl0ZS4uLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRhcmZpbGUpOgogICAgICAgICIiIkNvbnN0cnVjdCBhIFRhckl0ZXIgb2JqZWN0LgogICAgICAgICIiIgogICAgICAgIHNlbGYudGFyZmlsZSA9IHRhcmZpbGUKICAgICAgICBzZWxmLmluZGV4ID0gMAogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgICIiIlJldHVybiBpdGVyYXRvciBvYmplY3QuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICAiIiJSZXR1cm4gdGhlIG5leHQgaXRlbSB1c2luZyBUYXJGaWxlJ3MgbmV4dCgpIG1ldGhvZC4KICAgICAgICAgICBXaGVuIGFsbCBtZW1iZXJzIGhhdmUgYmVlbiByZWFkLCBzZXQgVGFyRmlsZSBhcyBfbG9hZGVkLgogICAgICAgICIiIgogICAgICAgICMgRml4IGZvciBTRiAjMTEwMDQyOTogVW5kZXIgcmFyZSBjaXJjdW1zdGFuY2VzIGl0IGNhbgogICAgICAgICMgaGFwcGVuIHRoYXQgZ2V0bWVtYmVycygpIGlzIGNhbGxlZCBkdXJpbmcgaXRlcmF0aW9uLAogICAgICAgICMgd2hpY2ggd2lsbCBjYXVzZSBUYXJJdGVyIHRvIHN0b3AgcHJlbWF0dXJlbHkuCiAgICAgICAgaWYgbm90IHNlbGYudGFyZmlsZS5fbG9hZGVkOgogICAgICAgICAgICB0YXJpbmZvID0gc2VsZi50YXJmaWxlLm5leHQoKQogICAgICAgICAgICBpZiBub3QgdGFyaW5mbzoKICAgICAgICAgICAgICAgIHNlbGYudGFyZmlsZS5fbG9hZGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgcmFpc2UgU3RvcEl0ZXJhdGlvbgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRhcmluZm8gPSBzZWxmLnRhcmZpbGUubWVtYmVyc1tzZWxmLmluZGV4XQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICBzZWxmLmluZGV4ICs9IDEKICAgICAgICByZXR1cm4gdGFyaW5mbwoKIy0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgZXhwb3J0ZWQgZnVuY3Rpb25zCiMtLS0tLS0tLS0tLS0tLS0tLS0tLQpkZWYgaXNfdGFyZmlsZShuYW1lKToKICAgICIiIlJldHVybiBUcnVlIGlmIG5hbWUgcG9pbnRzIHRvIGEgdGFyIGFyY2hpdmUgdGhhdCB3ZQogICAgICAgYXJlIGFibGUgdG8gaGFuZGxlLCBlbHNlIHJldHVybiBGYWxzZS4KICAgICIiIgogICAgdHJ5OgogICAgICAgIHQgPSBvcGVuKG5hbWUpCiAgICAgICAgdC5jbG9zZSgpCiAgICAgICAgcmV0dXJuIFRydWUKICAgIGV4Y2VwdCBUYXJFcnJvcjoKICAgICAgICByZXR1cm4gRmFsc2UKCmJsdG5fb3BlbiA9IG9wZW4Kb3BlbiA9IFRhckZpbGUub3Blbgo=',
'/Lib/random.py':'IiIiUmFuZG9tIHZhcmlhYmxlIGdlbmVyYXRvcnMuCgogICAgaW50ZWdlcnMKICAgIC0tLS0tLS0tCiAgICAgICAgICAgdW5pZm9ybSB3aXRoaW4gcmFuZ2UKCiAgICBzZXF1ZW5jZXMKICAgIC0tLS0tLS0tLQogICAgICAgICAgIHBpY2sgcmFuZG9tIGVsZW1lbnQKICAgICAgICAgICBwaWNrIHJhbmRvbSBzYW1wbGUKICAgICAgICAgICBnZW5lcmF0ZSByYW5kb20gcGVybXV0YXRpb24KCiAgICBkaXN0cmlidXRpb25zIG9uIHRoZSByZWFsIGxpbmU6CiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICB1bmlmb3JtCiAgICAgICAgICAgdHJpYW5ndWxhcgogICAgICAgICAgIG5vcm1hbCAoR2F1c3NpYW4pCiAgICAgICAgICAgbG9nbm9ybWFsCiAgICAgICAgICAgbmVnYXRpdmUgZXhwb25lbnRpYWwKICAgICAgICAgICBnYW1tYQogICAgICAgICAgIGJldGEKICAgICAgICAgICBwYXJldG8KICAgICAgICAgICBXZWlidWxsCgogICAgZGlzdHJpYnV0aW9ucyBvbiB0aGUgY2lyY2xlIChhbmdsZXMgMCB0byAycGkpCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICBjaXJjdWxhciB1bmlmb3JtCiAgICAgICAgICAgdm9uIE1pc2VzCgpHZW5lcmFsIG5vdGVzIG9uIHRoZSB1bmRlcmx5aW5nIE1lcnNlbm5lIFR3aXN0ZXIgY29yZSBnZW5lcmF0b3I6CgoqIFRoZSBwZXJpb2QgaXMgMioqMTk5MzctMS4KKiBJdCBpcyBvbmUgb2YgdGhlIG1vc3QgZXh0ZW5zaXZlbHkgdGVzdGVkIGdlbmVyYXRvcnMgaW4gZXhpc3RlbmNlLgoqIFRoZSByYW5kb20oKSBtZXRob2QgaXMgaW1wbGVtZW50ZWQgaW4gQywgZXhlY3V0ZXMgaW4gYSBzaW5nbGUgUHl0aG9uIHN0ZXAsCiAgYW5kIGlzLCB0aGVyZWZvcmUsIHRocmVhZHNhZmUuCgoiIiIKCmZyb20gd2FybmluZ3MgaW1wb3J0IHdhcm4gYXMgX3dhcm4KZnJvbSB0eXBlcyBpbXBvcnQgTWV0aG9kVHlwZSBhcyBfTWV0aG9kVHlwZSwgQnVpbHRpbk1ldGhvZFR5cGUgYXMgX0J1aWx0aW5NZXRob2RUeXBlCmZyb20gbWF0aCBpbXBvcnQgbG9nIGFzIF9sb2csIGV4cCBhcyBfZXhwLCBwaSBhcyBfcGksIGUgYXMgX2UsIGNlaWwgYXMgX2NlaWwKZnJvbSBtYXRoIGltcG9ydCBzcXJ0IGFzIF9zcXJ0LCBhY29zIGFzIF9hY29zLCBjb3MgYXMgX2Nvcywgc2luIGFzIF9zaW4KZnJvbSBvcyBpbXBvcnQgdXJhbmRvbSBhcyBfdXJhbmRvbQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBTZXQgYXMgX1NldCwgU2VxdWVuY2UgYXMgX1NlcXVlbmNlCmZyb20gaGFzaGxpYiBpbXBvcnQgc2hhNTEyIGFzIF9zaGE1MTIKCl9fYWxsX18gPSBbIlJhbmRvbSIsInNlZWQiLCJyYW5kb20iLCJ1bmlmb3JtIiwicmFuZGludCIsImNob2ljZSIsInNhbXBsZSIsCiAgICAgICAgICAgInJhbmRyYW5nZSIsInNodWZmbGUiLCJub3JtYWx2YXJpYXRlIiwibG9nbm9ybXZhcmlhdGUiLAogICAgICAgICAgICJleHBvdmFyaWF0ZSIsInZvbm1pc2VzdmFyaWF0ZSIsImdhbW1hdmFyaWF0ZSIsInRyaWFuZ3VsYXIiLAogICAgICAgICAgICJnYXVzcyIsImJldGF2YXJpYXRlIiwicGFyZXRvdmFyaWF0ZSIsIndlaWJ1bGx2YXJpYXRlIiwKICAgICAgICAgICAiZ2V0c3RhdGUiLCJzZXRzdGF0ZSIsICJnZXRyYW5kYml0cyIsCiAgICAgICAgICAgIlN5c3RlbVJhbmRvbSJdCgpOVl9NQUdJQ0NPTlNUID0gNCAqIF9leHAoLTAuNSkvX3NxcnQoMi4wKQpUV09QSSA9IDIuMCpfcGkKTE9HNCA9IF9sb2coNC4wKQpTR19NQUdJQ0NPTlNUID0gMS4wICsgX2xvZyg0LjUpCkJQRiA9IDUzICAgICAgICAjIE51bWJlciBvZiBiaXRzIGluIGEgZmxvYXQKUkVDSVBfQlBGID0gMioqLUJQRgoKCiMgVHJhbnNsYXRlZCBieSBHdWlkbyB2YW4gUm9zc3VtIGZyb20gQyBzb3VyY2UgcHJvdmlkZWQgYnkKIyBBZHJpYW4gQmFkZGVsZXkuICBBZGFwdGVkIGJ5IFJheW1vbmQgSGV0dGluZ2VyIGZvciB1c2Ugd2l0aAojIHRoZSBNZXJzZW5uZSBUd2lzdGVyICBhbmQgb3MudXJhbmRvbSgpIGNvcmUgZ2VuZXJhdG9ycy4KCmltcG9ydCBfcmFuZG9tCgpjbGFzcyBSYW5kb20oX3JhbmRvbS5SYW5kb20pOgogICAgIiIiUmFuZG9tIG51bWJlciBnZW5lcmF0b3IgYmFzZSBjbGFzcyB1c2VkIGJ5IGJvdW5kIG1vZHVsZSBmdW5jdGlvbnMuCgogICAgVXNlZCB0byBpbnN0YW50aWF0ZSBpbnN0YW5jZXMgb2YgUmFuZG9tIHRvIGdldCBnZW5lcmF0b3JzIHRoYXQgZG9uJ3QKICAgIHNoYXJlIHN0YXRlLgoKICAgIENsYXNzIFJhbmRvbSBjYW4gYWxzbyBiZSBzdWJjbGFzc2VkIGlmIHlvdSB3YW50IHRvIHVzZSBhIGRpZmZlcmVudCBiYXNpYwogICAgZ2VuZXJhdG9yIG9mIHlvdXIgb3duIGRldmlzaW5nOiBpbiB0aGF0IGNhc2UsIG92ZXJyaWRlIHRoZSBmb2xsb3dpbmcKICAgIG1ldGhvZHM6ICByYW5kb20oKSwgc2VlZCgpLCBnZXRzdGF0ZSgpLCBhbmQgc2V0c3RhdGUoKS4KICAgIE9wdGlvbmFsbHksIGltcGxlbWVudCBhIGdldHJhbmRiaXRzKCkgbWV0aG9kIHNvIHRoYXQgcmFuZHJhbmdlKCkKICAgIGNhbiBjb3ZlciBhcmJpdHJhcmlseSBsYXJnZSByYW5nZXMuCgogICAgIiIiCgogICAgVkVSU0lPTiA9IDMgICAgICMgdXNlZCBieSBnZXRzdGF0ZS9zZXRzdGF0ZQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB4PU5vbmUpOgogICAgICAgICIiIkluaXRpYWxpemUgYW4gaW5zdGFuY2UuCgogICAgICAgIE9wdGlvbmFsIGFyZ3VtZW50IHggY29udHJvbHMgc2VlZGluZywgYXMgZm9yIFJhbmRvbS5zZWVkKCkuCiAgICAgICAgIiIiCgogICAgICAgIHNlbGYuc2VlZCh4KQogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKCiAgICBkZWYgc2VlZChzZWxmLCBhPU5vbmUsIHZlcnNpb249Mik6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSBpbnRlcm5hbCBzdGF0ZSBmcm9tIGhhc2hhYmxlIG9iamVjdC4KCiAgICAgICAgTm9uZSBvciBubyBhcmd1bWVudCBzZWVkcyBmcm9tIGN1cnJlbnQgdGltZSBvciBmcm9tIGFuIG9wZXJhdGluZwogICAgICAgIHN5c3RlbSBzcGVjaWZpYyByYW5kb21uZXNzIHNvdXJjZSBpZiBhdmFpbGFibGUuCgogICAgICAgIEZvciB2ZXJzaW9uIDIgKHRoZSBkZWZhdWx0KSwgYWxsIG9mIHRoZSBiaXRzIGFyZSB1c2VkIGlmICphKiBpcyBhIHN0ciwKICAgICAgICBieXRlcywgb3IgYnl0ZWFycmF5LiAgRm9yIHZlcnNpb24gMSwgdGhlIGhhc2goKSBvZiAqYSogaXMgdXNlZCBpbnN0ZWFkLgoKICAgICAgICBJZiAqYSogaXMgYW4gaW50LCBhbGwgYml0cyBhcmUgdXNlZC4KCiAgICAgICAgIiIiCgogICAgICAgIGlmIGEgaXMgTm9uZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYSA9IGludC5mcm9tX2J5dGVzKF91cmFuZG9tKDMyKSwgJ2JpZycpCiAgICAgICAgICAgIGV4Y2VwdCBOb3RJbXBsZW1lbnRlZEVycm9yOgogICAgICAgICAgICAgICAgaW1wb3J0IHRpbWUKICAgICAgICAgICAgICAgIGEgPSBpbnQodGltZS50aW1lKCkgKiAyNTYpICMgdXNlIGZyYWN0aW9uYWwgc2Vjb25kcwoKICAgICAgICBpZiB2ZXJzaW9uID09IDI6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYSwgKHN0ciwgYnl0ZXMsIGJ5dGVhcnJheSkpOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShhLCBzdHIpOgogICAgICAgICAgICAgICAgICAgIGEgPSBhLmVuY29kZSgpCiAgICAgICAgICAgICAgICBhICs9IF9zaGE1MTIoYSkuZGlnZXN0KCkKICAgICAgICAgICAgICAgIGEgPSBpbnQuZnJvbV9ieXRlcyhhLCAnYmlnJykKCiAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAjc3VwZXIoKS5zZWVkKGEpCiAgICAgICAgX3JhbmRvbS5SYW5kb20uc2VlZChzZWxmLCBhKQogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKCiAgICBkZWYgZ2V0c3RhdGUoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGludGVybmFsIHN0YXRlOyBjYW4gYmUgcGFzc2VkIHRvIHNldHN0YXRlKCkgbGF0ZXIuIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuVkVSU0lPTiwgc3VwZXIoKS5nZXRzdGF0ZSgpLCBzZWxmLmdhdXNzX25leHQKCiAgICBkZWYgc2V0c3RhdGUoc2VsZiwgc3RhdGUpOgogICAgICAgICIiIlJlc3RvcmUgaW50ZXJuYWwgc3RhdGUgZnJvbSBvYmplY3QgcmV0dXJuZWQgYnkgZ2V0c3RhdGUoKS4iIiIKICAgICAgICB2ZXJzaW9uID0gc3RhdGVbMF0KICAgICAgICBpZiB2ZXJzaW9uID09IDM6CiAgICAgICAgICAgIHZlcnNpb24sIGludGVybmFsc3RhdGUsIHNlbGYuZ2F1c3NfbmV4dCA9IHN0YXRlCiAgICAgICAgICAgIHN1cGVyKCkuc2V0c3RhdGUoaW50ZXJuYWxzdGF0ZSkKICAgICAgICBlbGlmIHZlcnNpb24gPT0gMjoKICAgICAgICAgICAgdmVyc2lvbiwgaW50ZXJuYWxzdGF0ZSwgc2VsZi5nYXVzc19uZXh0ID0gc3RhdGUKICAgICAgICAgICAgIyBJbiB2ZXJzaW9uIDIsIHRoZSBzdGF0ZSB3YXMgc2F2ZWQgYXMgc2lnbmVkIGludHMsIHdoaWNoIGNhdXNlcwogICAgICAgICAgICAjICAgaW5jb25zaXN0ZW5jaWVzIGJldHdlZW4gMzIvNjQtYml0IHN5c3RlbXMuIFRoZSBzdGF0ZSBpcwogICAgICAgICAgICAjICAgcmVhbGx5IHVuc2lnbmVkIDMyLWJpdCBpbnRzLCBzbyB3ZSBjb252ZXJ0IG5lZ2F0aXZlIGludHMgZnJvbQogICAgICAgICAgICAjICAgdmVyc2lvbiAyIHRvIHBvc2l0aXZlIGxvbmdzIGZvciB2ZXJzaW9uIDMuCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGludGVybmFsc3RhdGUgPSB0dXBsZSh4ICUgKDIqKjMyKSBmb3IgeCBpbiBpbnRlcm5hbHN0YXRlKQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihlKQogICAgICAgICAgICAgICAgI3JhaXNlIFR5cGVFcnJvciBmcm9tIGUKICAgICAgICAgICAgc3VwZXIoKS5zZXRzdGF0ZShpbnRlcm5hbHN0YXRlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInN0YXRlIHdpdGggdmVyc2lvbiAlcyBwYXNzZWQgdG8gIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSYW5kb20uc2V0c3RhdGUoKSBvZiB2ZXJzaW9uICVzIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZlcnNpb24sIHNlbGYuVkVSU0lPTikpCgojIyAtLS0tIE1ldGhvZHMgYmVsb3cgdGhpcyBwb2ludCBkbyBub3QgbmVlZCB0byBiZSBvdmVycmlkZGVuIHdoZW4KIyMgLS0tLSBzdWJjbGFzc2luZyBmb3IgdGhlIHB1cnBvc2Ugb2YgdXNpbmcgYSBkaWZmZXJlbnQgY29yZSBnZW5lcmF0b3IuCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBwaWNrbGUgc3VwcG9ydCAgLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfX2dldHN0YXRlX18oc2VsZik6ICMgZm9yIHBpY2tsZQogICAgICAgIHJldHVybiBzZWxmLmdldHN0YXRlKCkKCiAgICBkZWYgX19zZXRzdGF0ZV9fKHNlbGYsIHN0YXRlKTogICMgZm9yIHBpY2tsZQogICAgICAgIHNlbGYuc2V0c3RhdGUoc3RhdGUpCgogICAgZGVmIF9fcmVkdWNlX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fLCAoKSwgc2VsZi5nZXRzdGF0ZSgpCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBpbnRlZ2VyIG1ldGhvZHMgIC0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgcmFuZHJhbmdlKHNlbGYsIHN0YXJ0LCBzdG9wPU5vbmUsIHN0ZXA9MSwgaW50PWludCk6CiAgICAgICAgIiIiQ2hvb3NlIGEgcmFuZG9tIGl0ZW0gZnJvbSByYW5nZShzdGFydCwgc3RvcFssIHN0ZXBdKS4KCiAgICAgICAgVGhpcyBmaXhlcyB0aGUgcHJvYmxlbSB3aXRoIHJhbmRpbnQoKSB3aGljaCBpbmNsdWRlcyB0aGUKICAgICAgICBlbmRwb2ludDsgaW4gUHl0aG9uIHRoaXMgaXMgdXN1YWxseSBub3Qgd2hhdCB5b3Ugd2FudC4KCiAgICAgICAgRG8gbm90IHN1cHBseSB0aGUgJ2ludCcgYXJndW1lbnQuCiAgICAgICAgIiIiCgogICAgICAgICMgVGhpcyBjb2RlIGlzIGEgYml0IG1lc3N5IHRvIG1ha2UgaXQgZmFzdCBmb3IgdGhlCiAgICAgICAgIyBjb21tb24gY2FzZSB3aGlsZSBzdGlsbCBkb2luZyBhZGVxdWF0ZSBlcnJvciBjaGVja2luZy4KICAgICAgICBpc3RhcnQgPSBpbnQoc3RhcnQpCiAgICAgICAgaWYgaXN0YXJ0ICE9IHN0YXJ0OgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJub24taW50ZWdlciBhcmcgMSBmb3IgcmFuZHJhbmdlKCkiKQogICAgICAgIGlmIHN0b3AgaXMgTm9uZToKICAgICAgICAgICAgaWYgaXN0YXJ0ID4gMDoKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9yYW5kYmVsb3coaXN0YXJ0KQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJlbXB0eSByYW5nZSBmb3IgcmFuZHJhbmdlKCkiKQoKICAgICAgICAjIHN0b3AgYXJndW1lbnQgc3VwcGxpZWQuCiAgICAgICAgaXN0b3AgPSBpbnQoc3RvcCkKICAgICAgICBpZiBpc3RvcCAhPSBzdG9wOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJub24taW50ZWdlciBzdG9wIGZvciByYW5kcmFuZ2UoKSIpCiAgICAgICAgd2lkdGggPSBpc3RvcCAtIGlzdGFydAogICAgICAgIGlmIHN0ZXAgPT0gMSBhbmQgd2lkdGggPiAwOgogICAgICAgICAgICByZXR1cm4gaXN0YXJ0ICsgc2VsZi5fcmFuZGJlbG93KHdpZHRoKQogICAgICAgIGlmIHN0ZXAgPT0gMToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZW1wdHkgcmFuZ2UgZm9yIHJhbmRyYW5nZSgpICglZCwlZCwgJWQpIiAlIChpc3RhcnQsIGlzdG9wLCB3aWR0aCkpCgogICAgICAgICMgTm9uLXVuaXQgc3RlcCBhcmd1bWVudCBzdXBwbGllZC4KICAgICAgICBpc3RlcCA9IGludChzdGVwKQogICAgICAgIGlmIGlzdGVwICE9IHN0ZXA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5vbi1pbnRlZ2VyIHN0ZXAgZm9yIHJhbmRyYW5nZSgpIikKICAgICAgICBpZiBpc3RlcCA+IDA6CiAgICAgICAgICAgIG4gPSAod2lkdGggKyBpc3RlcCAtIDEpIC8vIGlzdGVwCiAgICAgICAgZWxpZiBpc3RlcCA8IDA6CiAgICAgICAgICAgIG4gPSAod2lkdGggKyBpc3RlcCArIDEpIC8vIGlzdGVwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiemVybyBzdGVwIGZvciByYW5kcmFuZ2UoKSIpCgogICAgICAgIGlmIG4gPD0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZW1wdHkgcmFuZ2UgZm9yIHJhbmRyYW5nZSgpIikKCiAgICAgICAgcmV0dXJuIGlzdGFydCArIGlzdGVwKnNlbGYuX3JhbmRiZWxvdyhuKQoKICAgIGRlZiByYW5kaW50KHNlbGYsIGEsIGIpOgogICAgICAgICIiIlJldHVybiByYW5kb20gaW50ZWdlciBpbiByYW5nZSBbYSwgYl0sIGluY2x1ZGluZyBib3RoIGVuZCBwb2ludHMuCiAgICAgICAgIiIiCgogICAgICAgIHJldHVybiBzZWxmLnJhbmRyYW5nZShhLCBiKzEpCgogICAgZGVmIF9yYW5kYmVsb3coc2VsZiwgbiwgaW50PWludCwgbWF4c2l6ZT0xPDxCUEYsIHR5cGU9dHlwZSwKICAgICAgICAgICAgICAgICAgIE1ldGhvZD1fTWV0aG9kVHlwZSwgQnVpbHRpbk1ldGhvZD1fQnVpbHRpbk1ldGhvZFR5cGUpOgogICAgICAgICJSZXR1cm4gYSByYW5kb20gaW50IGluIHRoZSByYW5nZSBbMCxuKS4gIFJhaXNlcyBWYWx1ZUVycm9yIGlmIG49PTAuIgoKICAgICAgICBnZXRyYW5kYml0cyA9IHNlbGYuZ2V0cmFuZGJpdHMKICAgICAgICAjIE9ubHkgY2FsbCBzZWxmLmdldHJhbmRiaXRzIGlmIHRoZSBvcmlnaW5hbCByYW5kb20oKSBidWlsdGluIG1ldGhvZAogICAgICAgICMgaGFzIG5vdCBiZWVuIG92ZXJyaWRkZW4gb3IgaWYgYSBuZXcgZ2V0cmFuZGJpdHMoKSB3YXMgc3VwcGxpZWQuCiAgICAgICAgaWYgdHlwZShzZWxmLnJhbmRvbSkgaXMgQnVpbHRpbk1ldGhvZCBvciB0eXBlKGdldHJhbmRiaXRzKSBpcyBNZXRob2Q6CiAgICAgICAgICAgIGsgPSBuLmJpdF9sZW5ndGgoKSAgIyBkb24ndCB1c2UgKG4tMSkgaGVyZSBiZWNhdXNlIG4gY2FuIGJlIDEKICAgICAgICAgICAgciA9IGdldHJhbmRiaXRzKGspICAgICAgICAgICMgMCA8PSByIDwgMioqawogICAgICAgICAgICB3aGlsZSByID49IG46CiAgICAgICAgICAgICAgICByID0gZ2V0cmFuZGJpdHMoaykKICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAjIFRoZXJlJ3MgYW4gb3ZlcnJpZGVuIHJhbmRvbSgpIG1ldGhvZCBidXQgbm8gbmV3IGdldHJhbmRiaXRzKCkgbWV0aG9kLAogICAgICAgICMgc28gd2UgY2FuIG9ubHkgdXNlIHJhbmRvbSgpIGZyb20gaGVyZS4KICAgICAgICByYW5kb20gPSBzZWxmLnJhbmRvbQogICAgICAgIGlmIG4gPj0gbWF4c2l6ZToKICAgICAgICAgICAgX3dhcm4oIlVuZGVybHlpbmcgcmFuZG9tKCkgZ2VuZXJhdG9yIGRvZXMgbm90IHN1cHBseSBcbiIKICAgICAgICAgICAgICAgICJlbm91Z2ggYml0cyB0byBjaG9vc2UgZnJvbSBhIHBvcHVsYXRpb24gcmFuZ2UgdGhpcyBsYXJnZS5cbiIKICAgICAgICAgICAgICAgICJUbyByZW1vdmUgdGhlIHJhbmdlIGxpbWl0YXRpb24sIGFkZCBhIGdldHJhbmRiaXRzKCkgbWV0aG9kLiIpCiAgICAgICAgICAgIHJldHVybiBpbnQocmFuZG9tKCkgKiBuKQogICAgICAgIHJlbSA9IG1heHNpemUgJSBuCiAgICAgICAgbGltaXQgPSAobWF4c2l6ZSAtIHJlbSkgLyBtYXhzaXplICAgIyBpbnQobGltaXQgKiBtYXhzaXplKSAlIG4gPT0gMAogICAgICAgIHIgPSByYW5kb20oKQogICAgICAgIHdoaWxlIHIgPj0gbGltaXQ6CiAgICAgICAgICAgIHIgPSByYW5kb20oKQogICAgICAgIHJldHVybiBpbnQociptYXhzaXplKSAlIG4KCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIHNlcXVlbmNlIG1ldGhvZHMgIC0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgY2hvaWNlKHNlbGYsIHNlcSk6CiAgICAgICAgIiIiQ2hvb3NlIGEgcmFuZG9tIGVsZW1lbnQgZnJvbSBhIG5vbi1lbXB0eSBzZXF1ZW5jZS4iIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGkgPSBzZWxmLl9yYW5kYmVsb3cobGVuKHNlcSkpCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoJ0Nhbm5vdCBjaG9vc2UgZnJvbSBhbiBlbXB0eSBzZXF1ZW5jZScpCiAgICAgICAgcmV0dXJuIHNlcVtpXQoKICAgIGRlZiBzaHVmZmxlKHNlbGYsIHgsIHJhbmRvbT1Ob25lLCBpbnQ9aW50KToKICAgICAgICAiIiJ4LCByYW5kb209cmFuZG9tLnJhbmRvbSAtPiBzaHVmZmxlIGxpc3QgeCBpbiBwbGFjZTsgcmV0dXJuIE5vbmUuCgogICAgICAgIE9wdGlvbmFsIGFyZyByYW5kb20gaXMgYSAwLWFyZ3VtZW50IGZ1bmN0aW9uIHJldHVybmluZyBhIHJhbmRvbQogICAgICAgIGZsb2F0IGluIFswLjAsIDEuMCk7IGJ5IGRlZmF1bHQsIHRoZSBzdGFuZGFyZCByYW5kb20ucmFuZG9tLgogICAgICAgICIiIgoKICAgICAgICByYW5kYmVsb3cgPSBzZWxmLl9yYW5kYmVsb3cKICAgICAgICBmb3IgaSBpbiByZXZlcnNlZChyYW5nZSgxLCBsZW4oeCkpKToKICAgICAgICAgICAgIyBwaWNrIGFuIGVsZW1lbnQgaW4geFs6aSsxXSB3aXRoIHdoaWNoIHRvIGV4Y2hhbmdlIHhbaV0KICAgICAgICAgICAgaiA9IHJhbmRiZWxvdyhpKzEpIGlmIHJhbmRvbSBpcyBOb25lIGVsc2UgaW50KHJhbmRvbSgpICogKGkrMSkpCiAgICAgICAgICAgIHhbaV0sIHhbal0gPSB4W2pdLCB4W2ldCgogICAgZGVmIHNhbXBsZShzZWxmLCBwb3B1bGF0aW9uLCBrKToKICAgICAgICAiIiJDaG9vc2VzIGsgdW5pcXVlIHJhbmRvbSBlbGVtZW50cyBmcm9tIGEgcG9wdWxhdGlvbiBzZXF1ZW5jZSBvciBzZXQuCgogICAgICAgIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIGVsZW1lbnRzIGZyb20gdGhlIHBvcHVsYXRpb24gd2hpbGUKICAgICAgICBsZWF2aW5nIHRoZSBvcmlnaW5hbCBwb3B1bGF0aW9uIHVuY2hhbmdlZC4gIFRoZSByZXN1bHRpbmcgbGlzdCBpcwogICAgICAgIGluIHNlbGVjdGlvbiBvcmRlciBzbyB0aGF0IGFsbCBzdWItc2xpY2VzIHdpbGwgYWxzbyBiZSB2YWxpZCByYW5kb20KICAgICAgICBzYW1wbGVzLiAgVGhpcyBhbGxvd3MgcmFmZmxlIHdpbm5lcnMgKHRoZSBzYW1wbGUpIHRvIGJlIHBhcnRpdGlvbmVkCiAgICAgICAgaW50byBncmFuZCBwcml6ZSBhbmQgc2Vjb25kIHBsYWNlIHdpbm5lcnMgKHRoZSBzdWJzbGljZXMpLgoKICAgICAgICBNZW1iZXJzIG9mIHRoZSBwb3B1bGF0aW9uIG5lZWQgbm90IGJlIGhhc2hhYmxlIG9yIHVuaXF1ZS4gIElmIHRoZQogICAgICAgIHBvcHVsYXRpb24gY29udGFpbnMgcmVwZWF0cywgdGhlbiBlYWNoIG9jY3VycmVuY2UgaXMgYSBwb3NzaWJsZQogICAgICAgIHNlbGVjdGlvbiBpbiB0aGUgc2FtcGxlLgoKICAgICAgICBUbyBjaG9vc2UgYSBzYW1wbGUgaW4gYSByYW5nZSBvZiBpbnRlZ2VycywgdXNlIHJhbmdlIGFzIGFuIGFyZ3VtZW50LgogICAgICAgIFRoaXMgaXMgZXNwZWNpYWxseSBmYXN0IGFuZCBzcGFjZSBlZmZpY2llbnQgZm9yIHNhbXBsaW5nIGZyb20gYQogICAgICAgIGxhcmdlIHBvcHVsYXRpb246ICAgc2FtcGxlKHJhbmdlKDEwMDAwMDAwKSwgNjApCiAgICAgICAgIiIiCgogICAgICAgICMgU2FtcGxpbmcgd2l0aG91dCByZXBsYWNlbWVudCBlbnRhaWxzIHRyYWNraW5nIGVpdGhlciBwb3RlbnRpYWwKICAgICAgICAjIHNlbGVjdGlvbnMgKHRoZSBwb29sKSBpbiBhIGxpc3Qgb3IgcHJldmlvdXMgc2VsZWN0aW9ucyBpbiBhIHNldC4KCiAgICAgICAgIyBXaGVuIHRoZSBudW1iZXIgb2Ygc2VsZWN0aW9ucyBpcyBzbWFsbCBjb21wYXJlZCB0byB0aGUKICAgICAgICAjIHBvcHVsYXRpb24sIHRoZW4gdHJhY2tpbmcgc2VsZWN0aW9ucyBpcyBlZmZpY2llbnQsIHJlcXVpcmluZwogICAgICAgICMgb25seSBhIHNtYWxsIHNldCBhbmQgYW4gb2NjYXNpb25hbCByZXNlbGVjdGlvbi4gIEZvcgogICAgICAgICMgYSBsYXJnZXIgbnVtYmVyIG9mIHNlbGVjdGlvbnMsIHRoZSBwb29sIHRyYWNraW5nIG1ldGhvZCBpcwogICAgICAgICMgcHJlZmVycmVkIHNpbmNlIHRoZSBsaXN0IHRha2VzIGxlc3Mgc3BhY2UgdGhhbiB0aGUKICAgICAgICAjIHNldCBhbmQgaXQgZG9lc24ndCBzdWZmZXIgZnJvbSBmcmVxdWVudCByZXNlbGVjdGlvbnMuCgogICAgICAgIGlmIGlzaW5zdGFuY2UocG9wdWxhdGlvbiwgX1NldCk6CiAgICAgICAgICAgIHBvcHVsYXRpb24gPSB0dXBsZShwb3B1bGF0aW9uKQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBvcHVsYXRpb24sIF9TZXF1ZW5jZSk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiUG9wdWxhdGlvbiBtdXN0IGJlIGEgc2VxdWVuY2Ugb3Igc2V0LiAgRm9yIGRpY3RzLCB1c2UgbGlzdChkKS4iKQogICAgICAgIHJhbmRiZWxvdyA9IHNlbGYuX3JhbmRiZWxvdwogICAgICAgIG4gPSBsZW4ocG9wdWxhdGlvbikKICAgICAgICBpZiBub3QgMCA8PSBrIDw9IG46CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlNhbXBsZSBsYXJnZXIgdGhhbiBwb3B1bGF0aW9uIikKICAgICAgICByZXN1bHQgPSBbTm9uZV0gKiBrCiAgICAgICAgc2V0c2l6ZSA9IDIxICAgICAgICAjIHNpemUgb2YgYSBzbWFsbCBzZXQgbWludXMgc2l6ZSBvZiBhbiBlbXB0eSBsaXN0CiAgICAgICAgaWYgayA+IDU6CiAgICAgICAgICAgIHNldHNpemUgKz0gNCAqKiBfY2VpbChfbG9nKGsgKiAzLCA0KSkgIyB0YWJsZSBzaXplIGZvciBiaWcgc2V0cwogICAgICAgIGlmIG4gPD0gc2V0c2l6ZToKICAgICAgICAgICAgIyBBbiBuLWxlbmd0aCBsaXN0IGlzIHNtYWxsZXIgdGhhbiBhIGstbGVuZ3RoIHNldAogICAgICAgICAgICBwb29sID0gbGlzdChwb3B1bGF0aW9uKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShrKTogICAgICAgICAjIGludmFyaWFudDogIG5vbi1zZWxlY3RlZCBhdCBbMCxuLWkpCiAgICAgICAgICAgICAgICBqID0gcmFuZGJlbG93KG4taSkKICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IHBvb2xbal0KICAgICAgICAgICAgICAgIHBvb2xbal0gPSBwb29sW24taS0xXSAgICMgbW92ZSBub24tc2VsZWN0ZWQgaXRlbSBpbnRvIHZhY2FuY3kKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxlY3RlZCA9IHNldCgpCiAgICAgICAgICAgIHNlbGVjdGVkX2FkZCA9IHNlbGVjdGVkLmFkZAogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShrKToKICAgICAgICAgICAgICAgIGogPSByYW5kYmVsb3cobikKICAgICAgICAgICAgICAgIHdoaWxlIGogaW4gc2VsZWN0ZWQ6CiAgICAgICAgICAgICAgICAgICAgaiA9IHJhbmRiZWxvdyhuKQogICAgICAgICAgICAgICAgc2VsZWN0ZWRfYWRkKGopCiAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSBwb3B1bGF0aW9uW2pdCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gcmVhbC12YWx1ZWQgZGlzdHJpYnV0aW9ucyAgLS0tLS0tLS0tLS0tLS0tLS0tLQoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gdW5pZm9ybSBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiB1bmlmb3JtKHNlbGYsIGEsIGIpOgogICAgICAgICJHZXQgYSByYW5kb20gbnVtYmVyIGluIHRoZSByYW5nZSBbYSwgYikgb3IgW2EsIGJdIGRlcGVuZGluZyBvbiByb3VuZGluZy4iCiAgICAgICAgcmV0dXJuIGEgKyAoYi1hKSAqIHNlbGYucmFuZG9tKCkKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIHRyaWFuZ3VsYXIgLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgdHJpYW5ndWxhcihzZWxmLCBsb3c9MC4wLCBoaWdoPTEuMCwgbW9kZT1Ob25lKToKICAgICAgICAiIiJUcmlhbmd1bGFyIGRpc3RyaWJ1dGlvbi4KCiAgICAgICAgQ29udGludW91cyBkaXN0cmlidXRpb24gYm91bmRlZCBieSBnaXZlbiBsb3dlciBhbmQgdXBwZXIgbGltaXRzLAogICAgICAgIGFuZCBoYXZpbmcgYSBnaXZlbiBtb2RlIHZhbHVlIGluLWJldHdlZW4uCgogICAgICAgIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJpYW5ndWxhcl9kaXN0cmlidXRpb24KCiAgICAgICAgIiIiCiAgICAgICAgdSA9IHNlbGYucmFuZG9tKCkKICAgICAgICBjID0gMC41IGlmIG1vZGUgaXMgTm9uZSBlbHNlIChtb2RlIC0gbG93KSAvIChoaWdoIC0gbG93KQogICAgICAgIGlmIHUgPiBjOgogICAgICAgICAgICB1ID0gMS4wIC0gdQogICAgICAgICAgICBjID0gMS4wIC0gYwogICAgICAgICAgICBsb3csIGhpZ2ggPSBoaWdoLCBsb3cKICAgICAgICByZXR1cm4gbG93ICsgKGhpZ2ggLSBsb3cpICogKHUgKiBjKSAqKiAwLjUKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIG5vcm1hbCBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgbm9ybWFsdmFyaWF0ZShzZWxmLCBtdSwgc2lnbWEpOgogICAgICAgICIiIk5vcm1hbCBkaXN0cmlidXRpb24uCgogICAgICAgIG11IGlzIHRoZSBtZWFuLCBhbmQgc2lnbWEgaXMgdGhlIHN0YW5kYXJkIGRldmlhdGlvbi4KCiAgICAgICAgIiIiCiAgICAgICAgIyBtdSA9IG1lYW4sIHNpZ21hID0gc3RhbmRhcmQgZGV2aWF0aW9uCgogICAgICAgICMgVXNlcyBLaW5kZXJtYW4gYW5kIE1vbmFoYW4gbWV0aG9kLiBSZWZlcmVuY2U6IEtpbmRlcm1hbiwKICAgICAgICAjIEEuSi4gYW5kIE1vbmFoYW4sIEouRi4sICJDb21wdXRlciBnZW5lcmF0aW9uIG9mIHJhbmRvbQogICAgICAgICMgdmFyaWFibGVzIHVzaW5nIHRoZSByYXRpbyBvZiB1bmlmb3JtIGRldmlhdGVzIiwgQUNNIFRyYW5zCiAgICAgICAgIyBNYXRoIFNvZnR3YXJlLCAzLCAoMTk3NyksIHBwMjU3LTI2MC4KCiAgICAgICAgcmFuZG9tID0gc2VsZi5yYW5kb20KICAgICAgICB3aGlsZSAxOgogICAgICAgICAgICB1MSA9IHJhbmRvbSgpCiAgICAgICAgICAgIHUyID0gMS4wIC0gcmFuZG9tKCkKICAgICAgICAgICAgeiA9IE5WX01BR0lDQ09OU1QqKHUxLTAuNSkvdTIKICAgICAgICAgICAgenogPSB6KnovNC4wCiAgICAgICAgICAgIGlmIHp6IDw9IC1fbG9nKHUyKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgcmV0dXJuIG11ICsgeipzaWdtYQoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gbG9nbm9ybWFsIGRpc3RyaWJ1dGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBsb2dub3JtdmFyaWF0ZShzZWxmLCBtdSwgc2lnbWEpOgogICAgICAgICIiIkxvZyBub3JtYWwgZGlzdHJpYnV0aW9uLgoKICAgICAgICBJZiB5b3UgdGFrZSB0aGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgdGhpcyBkaXN0cmlidXRpb24sIHlvdSdsbCBnZXQgYQogICAgICAgIG5vcm1hbCBkaXN0cmlidXRpb24gd2l0aCBtZWFuIG11IGFuZCBzdGFuZGFyZCBkZXZpYXRpb24gc2lnbWEuCiAgICAgICAgbXUgY2FuIGhhdmUgYW55IHZhbHVlLCBhbmQgc2lnbWEgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby4KCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIF9leHAoc2VsZi5ub3JtYWx2YXJpYXRlKG11LCBzaWdtYSkpCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBleHBvbmVudGlhbCBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgZXhwb3ZhcmlhdGUoc2VsZiwgbGFtYmQpOgogICAgICAgICIiIkV4cG9uZW50aWFsIGRpc3RyaWJ1dGlvbi4KCiAgICAgICAgbGFtYmQgaXMgMS4wIGRpdmlkZWQgYnkgdGhlIGRlc2lyZWQgbWVhbi4gIEl0IHNob3VsZCBiZQogICAgICAgIG5vbnplcm8uICAoVGhlIHBhcmFtZXRlciB3b3VsZCBiZSBjYWxsZWQgImxhbWJkYSIsIGJ1dCB0aGF0IGlzCiAgICAgICAgYSByZXNlcnZlZCB3b3JkIGluIFB5dGhvbi4pICBSZXR1cm5lZCB2YWx1ZXMgcmFuZ2UgZnJvbSAwIHRvCiAgICAgICAgcG9zaXRpdmUgaW5maW5pdHkgaWYgbGFtYmQgaXMgcG9zaXRpdmUsIGFuZCBmcm9tIG5lZ2F0aXZlCiAgICAgICAgaW5maW5pdHkgdG8gMCBpZiBsYW1iZCBpcyBuZWdhdGl2ZS4KCiAgICAgICAgIiIiCiAgICAgICAgIyBsYW1iZDogcmF0ZSBsYW1iZCA9IDEvbWVhbgogICAgICAgICMgKCdsYW1iZGEnIGlzIGEgUHl0aG9uIHJlc2VydmVkIHdvcmQpCgogICAgICAgICMgd2UgdXNlIDEtcmFuZG9tKCkgaW5zdGVhZCBvZiByYW5kb20oKSB0byBwcmVjbHVkZSB0aGUKICAgICAgICAjIHBvc3NpYmlsaXR5IG9mIHRha2luZyB0aGUgbG9nIG9mIHplcm8uCiAgICAgICAgcmV0dXJuIC1fbG9nKDEuMCAtIHNlbGYucmFuZG9tKCkpL2xhbWJkCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSB2b24gTWlzZXMgZGlzdHJpYnV0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIHZvbm1pc2VzdmFyaWF0ZShzZWxmLCBtdSwga2FwcGEpOgogICAgICAgICIiIkNpcmN1bGFyIGRhdGEgZGlzdHJpYnV0aW9uLgoKICAgICAgICBtdSBpcyB0aGUgbWVhbiBhbmdsZSwgZXhwcmVzc2VkIGluIHJhZGlhbnMgYmV0d2VlbiAwIGFuZCAyKnBpLCBhbmQKICAgICAgICBrYXBwYSBpcyB0aGUgY29uY2VudHJhdGlvbiBwYXJhbWV0ZXIsIHdoaWNoIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yCiAgICAgICAgZXF1YWwgdG8gemVyby4gIElmIGthcHBhIGlzIGVxdWFsIHRvIHplcm8sIHRoaXMgZGlzdHJpYnV0aW9uIHJlZHVjZXMKICAgICAgICB0byBhIHVuaWZvcm0gcmFuZG9tIGFuZ2xlIG92ZXIgdGhlIHJhbmdlIDAgdG8gMipwaS4KCiAgICAgICAgIiIiCiAgICAgICAgIyBtdTogICAgbWVhbiBhbmdsZSAoaW4gcmFkaWFucyBiZXR3ZWVuIDAgYW5kIDIqcGkpCiAgICAgICAgIyBrYXBwYTogY29uY2VudHJhdGlvbiBwYXJhbWV0ZXIga2FwcGEgKD49IDApCiAgICAgICAgIyBpZiBrYXBwYSA9IDAgZ2VuZXJhdGUgdW5pZm9ybSByYW5kb20gYW5nbGUKCiAgICAgICAgIyBCYXNlZCB1cG9uIGFuIGFsZ29yaXRobSBwdWJsaXNoZWQgaW46IEZpc2hlciwgTi5JLiwKICAgICAgICAjICJTdGF0aXN0aWNhbCBBbmFseXNpcyBvZiBDaXJjdWxhciBEYXRhIiwgQ2FtYnJpZGdlCiAgICAgICAgIyBVbml2ZXJzaXR5IFByZXNzLCAxOTkzLgoKICAgICAgICAjIFRoYW5rcyB0byBNYWdudXMgS2Vzc2xlciBmb3IgYSBjb3JyZWN0aW9uIHRvIHRoZQogICAgICAgICMgaW1wbGVtZW50YXRpb24gb2Ygc3RlcCA0LgoKICAgICAgICByYW5kb20gPSBzZWxmLnJhbmRvbQogICAgICAgIGlmIGthcHBhIDw9IDFlLTY6CiAgICAgICAgICAgIHJldHVybiBUV09QSSAqIHJhbmRvbSgpCgogICAgICAgIGEgPSAxLjAgKyBfc3FydCgxLjAgKyA0LjAgKiBrYXBwYSAqIGthcHBhKQogICAgICAgIGIgPSAoYSAtIF9zcXJ0KDIuMCAqIGEpKS8oMi4wICoga2FwcGEpCiAgICAgICAgciA9ICgxLjAgKyBiICogYikvKDIuMCAqIGIpCgogICAgICAgIHdoaWxlIDE6CiAgICAgICAgICAgIHUxID0gcmFuZG9tKCkKCiAgICAgICAgICAgIHogPSBfY29zKF9waSAqIHUxKQogICAgICAgICAgICBmID0gKDEuMCArIHIgKiB6KS8ociArIHopCiAgICAgICAgICAgIGMgPSBrYXBwYSAqIChyIC0gZikKCiAgICAgICAgICAgIHUyID0gcmFuZG9tKCkKCiAgICAgICAgICAgIGlmIHUyIDwgYyAqICgyLjAgLSBjKSBvciB1MiA8PSBjICogX2V4cCgxLjAgLSBjKToKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHUzID0gcmFuZG9tKCkKICAgICAgICBpZiB1MyA+IDAuNToKICAgICAgICAgICAgdGhldGEgPSAobXUgJSBUV09QSSkgKyBfYWNvcyhmKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRoZXRhID0gKG11ICUgVFdPUEkpIC0gX2Fjb3MoZikKCiAgICAgICAgcmV0dXJuIHRoZXRhCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBnYW1tYSBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgZ2FtbWF2YXJpYXRlKHNlbGYsIGFscGhhLCBiZXRhKToKICAgICAgICAiIiJHYW1tYSBkaXN0cmlidXRpb24uICBOb3QgdGhlIGdhbW1hIGZ1bmN0aW9uIQoKICAgICAgICBDb25kaXRpb25zIG9uIHRoZSBwYXJhbWV0ZXJzIGFyZSBhbHBoYSA+IDAgYW5kIGJldGEgPiAwLgoKICAgICAgICBUaGUgcHJvYmFiaWxpdHkgZGlzdHJpYnV0aW9uIGZ1bmN0aW9uIGlzOgoKICAgICAgICAgICAgICAgICAgICB4ICoqIChhbHBoYSAtIDEpICogbWF0aC5leHAoLXggLyBiZXRhKQogICAgICAgICAgcGRmKHgpID0gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICAgICAgICBtYXRoLmdhbW1hKGFscGhhKSAqIGJldGEgKiogYWxwaGEKCiAgICAgICAgIiIiCgogICAgICAgICMgYWxwaGEgPiAwLCBiZXRhID4gMCwgbWVhbiBpcyBhbHBoYSpiZXRhLCB2YXJpYW5jZSBpcyBhbHBoYSpiZXRhKioyCgogICAgICAgICMgV2FybmluZzogYSBmZXcgb2xkZXIgc291cmNlcyBkZWZpbmUgdGhlIGdhbW1hIGRpc3RyaWJ1dGlvbiBpbiB0ZXJtcwogICAgICAgICMgb2YgYWxwaGEgPiAtMS4wCiAgICAgICAgaWYgYWxwaGEgPD0gMC4wIG9yIGJldGEgPD0gMC4wOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdnYW1tYXZhcmlhdGU6IGFscGhhIGFuZCBiZXRhIG11c3QgYmUgPiAwLjAnKQoKICAgICAgICByYW5kb20gPSBzZWxmLnJhbmRvbQogICAgICAgIGlmIGFscGhhID4gMS4wOgoKICAgICAgICAgICAgIyBVc2VzIFIuQy5ILiBDaGVuZywgIlRoZSBnZW5lcmF0aW9uIG9mIEdhbW1hCiAgICAgICAgICAgICMgdmFyaWFibGVzIHdpdGggbm9uLWludGVncmFsIHNoYXBlIHBhcmFtZXRlcnMiLAogICAgICAgICAgICAjIEFwcGxpZWQgU3RhdGlzdGljcywgKDE5NzcpLCAyNiwgTm8uIDEsIHA3MS03NAoKICAgICAgICAgICAgYWludiA9IF9zcXJ0KDIuMCAqIGFscGhhIC0gMS4wKQogICAgICAgICAgICBiYmIgPSBhbHBoYSAtIExPRzQKICAgICAgICAgICAgY2NjID0gYWxwaGEgKyBhaW52CgogICAgICAgICAgICB3aGlsZSAxOgogICAgICAgICAgICAgICAgdTEgPSByYW5kb20oKQogICAgICAgICAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAgICAgICAgICNpZiBub3QgMWUtNyA8IHUxIDwgLjk5OTk5OTk6CiAgICAgICAgICAgICAgICBpZiBub3QgMWUtNyA8IHUxIDwgMC45OTk5OTk5OgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICB1MiA9IDEuMCAtIHJhbmRvbSgpCiAgICAgICAgICAgICAgICB2ID0gX2xvZyh1MS8oMS4wLXUxKSkvYWludgogICAgICAgICAgICAgICAgeCA9IGFscGhhKl9leHAodikKICAgICAgICAgICAgICAgIHogPSB1MSp1MSp1MgogICAgICAgICAgICAgICAgciA9IGJiYitjY2Mqdi14CiAgICAgICAgICAgICAgICBpZiByICsgU0dfTUFHSUNDT05TVCAtIDQuNSp6ID49IDAuMCBvciByID49IF9sb2coeik6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHggKiBiZXRhCgogICAgICAgIGVsaWYgYWxwaGEgPT0gMS4wOgogICAgICAgICAgICAjIGV4cG92YXJpYXRlKDEpCiAgICAgICAgICAgIHUgPSByYW5kb20oKQogICAgICAgICAgICB3aGlsZSB1IDw9IDFlLTc6CiAgICAgICAgICAgICAgICB1ID0gcmFuZG9tKCkKICAgICAgICAgICAgcmV0dXJuIC1fbG9nKHUpICogYmV0YQoKICAgICAgICBlbHNlOiAgICMgYWxwaGEgaXMgYmV0d2VlbiAwIGFuZCAxIChleGNsdXNpdmUpCgogICAgICAgICAgICAjIFVzZXMgQUxHT1JJVEhNIEdTIG9mIFN0YXRpc3RpY2FsIENvbXB1dGluZyAtIEtlbm5lZHkgJiBHZW50bGUKCiAgICAgICAgICAgIHdoaWxlIDE6CiAgICAgICAgICAgICAgICB1ID0gcmFuZG9tKCkKICAgICAgICAgICAgICAgIGIgPSAoX2UgKyBhbHBoYSkvX2UKICAgICAgICAgICAgICAgIHAgPSBiKnUKICAgICAgICAgICAgICAgIGlmIHAgPD0gMS4wOgogICAgICAgICAgICAgICAgICAgIHggPSBwICoqICgxLjAvYWxwaGEpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHggPSAtX2xvZygoYi1wKS9hbHBoYSkKICAgICAgICAgICAgICAgIHUxID0gcmFuZG9tKCkKICAgICAgICAgICAgICAgIGlmIHAgPiAxLjA6CiAgICAgICAgICAgICAgICAgICAgaWYgdTEgPD0geCAqKiAoYWxwaGEgLSAxLjApOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiB1MSA8PSBfZXhwKC14KToKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICByZXR1cm4geCAqIGJldGEKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIEdhdXNzIChmYXN0ZXIgYWx0ZXJuYXRpdmUpIC0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGdhdXNzKHNlbGYsIG11LCBzaWdtYSk6CiAgICAgICAgIiIiR2F1c3NpYW4gZGlzdHJpYnV0aW9uLgoKICAgICAgICBtdSBpcyB0aGUgbWVhbiwgYW5kIHNpZ21hIGlzIHRoZSBzdGFuZGFyZCBkZXZpYXRpb24uICBUaGlzIGlzCiAgICAgICAgc2xpZ2h0bHkgZmFzdGVyIHRoYW4gdGhlIG5vcm1hbHZhcmlhdGUoKSBmdW5jdGlvbi4KCiAgICAgICAgTm90IHRocmVhZC1zYWZlIHdpdGhvdXQgYSBsb2NrIGFyb3VuZCBjYWxscy4KCiAgICAgICAgIiIiCgogICAgICAgICMgV2hlbiB4IGFuZCB5IGFyZSB0d28gdmFyaWFibGVzIGZyb20gWzAsIDEpLCB1bmlmb3JtbHkKICAgICAgICAjIGRpc3RyaWJ1dGVkLCB0aGVuCiAgICAgICAgIwogICAgICAgICMgICAgY29zKDIqcGkqeCkqc3FydCgtMipsb2coMS15KSkKICAgICAgICAjICAgIHNpbigyKnBpKngpKnNxcnQoLTIqbG9nKDEteSkpCiAgICAgICAgIwogICAgICAgICMgYXJlIHR3byAqaW5kZXBlbmRlbnQqIHZhcmlhYmxlcyB3aXRoIG5vcm1hbCBkaXN0cmlidXRpb24KICAgICAgICAjIChtdSA9IDAsIHNpZ21hID0gMSkuCiAgICAgICAgIyAoTGFtYmVydCBNZWVydGVucykKICAgICAgICAjIChjb3JyZWN0ZWQgdmVyc2lvbjsgYnVnIGRpc2NvdmVyZWQgYnkgTWlrZSBNaWxsZXIsIGZpeGVkIGJ5IExNKQoKICAgICAgICAjIE11bHRpdGhyZWFkaW5nIG5vdGU6IFdoZW4gdHdvIHRocmVhZHMgY2FsbCB0aGlzIGZ1bmN0aW9uCiAgICAgICAgIyBzaW11bHRhbmVvdXNseSwgaXQgaXMgcG9zc2libGUgdGhhdCB0aGV5IHdpbGwgcmVjZWl2ZSB0aGUKICAgICAgICAjIHNhbWUgcmV0dXJuIHZhbHVlLiAgVGhlIHdpbmRvdyBpcyB2ZXJ5IHNtYWxsIHRob3VnaC4gIFRvCiAgICAgICAgIyBhdm9pZCB0aGlzLCB5b3UgaGF2ZSB0byB1c2UgYSBsb2NrIGFyb3VuZCBhbGwgY2FsbHMuICAoSQogICAgICAgICMgZGlkbid0IHdhbnQgdG8gc2xvdyB0aGlzIGRvd24gaW4gdGhlIHNlcmlhbCBjYXNlIGJ5IHVzaW5nIGEKICAgICAgICAjIGxvY2sgaGVyZS4pCgogICAgICAgIHJhbmRvbSA9IHNlbGYucmFuZG9tCiAgICAgICAgeiA9IHNlbGYuZ2F1c3NfbmV4dAogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKICAgICAgICBpZiB6IGlzIE5vbmU6CiAgICAgICAgICAgIHgycGkgPSByYW5kb20oKSAqIFRXT1BJCiAgICAgICAgICAgIGcycmFkID0gX3NxcnQoLTIuMCAqIF9sb2coMS4wIC0gcmFuZG9tKCkpKQogICAgICAgICAgICB6ID0gX2Nvcyh4MnBpKSAqIGcycmFkCiAgICAgICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IF9zaW4oeDJwaSkgKiBnMnJhZAoKICAgICAgICByZXR1cm4gbXUgKyB6KnNpZ21hCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBiZXRhIC0tLS0tLS0tLS0tLS0tLS0tLS0tCiMjIFNlZQojIyBodHRwOi8vbWFpbC5weXRob24ub3JnL3BpcGVybWFpbC9weXRob24tYnVncy1saXN0LzIwMDEtSmFudWFyeS8wMDM3NTIuaHRtbAojIyBmb3IgSXZhbiBGcm9obmUncyBpbnNpZ2h0ZnVsIGFuYWx5c2lzIG9mIHdoeSB0aGUgb3JpZ2luYWwgaW1wbGVtZW50YXRpb246CiMjCiMjICAgIGRlZiBiZXRhdmFyaWF0ZShzZWxmLCBhbHBoYSwgYmV0YSk6CiMjICAgICAgICAjIERpc2NyZXRlIEV2ZW50IFNpbXVsYXRpb24gaW4gQywgcHAgODctODguCiMjCiMjICAgICAgICB5ID0gc2VsZi5leHBvdmFyaWF0ZShhbHBoYSkKIyMgICAgICAgIHogPSBzZWxmLmV4cG92YXJpYXRlKDEuMC9iZXRhKQojIyAgICAgICAgcmV0dXJuIHovKHkreikKIyMKIyMgd2FzIGRlYWQgd3JvbmcsIGFuZCBob3cgaXQgcHJvYmFibHkgZ290IHRoYXQgd2F5LgoKICAgIGRlZiBiZXRhdmFyaWF0ZShzZWxmLCBhbHBoYSwgYmV0YSk6CiAgICAgICAgIiIiQmV0YSBkaXN0cmlidXRpb24uCgogICAgICAgIENvbmRpdGlvbnMgb24gdGhlIHBhcmFtZXRlcnMgYXJlIGFscGhhID4gMCBhbmQgYmV0YSA+IDAuCiAgICAgICAgUmV0dXJuZWQgdmFsdWVzIHJhbmdlIGJldHdlZW4gMCBhbmQgMS4KCiAgICAgICAgIiIiCgogICAgICAgICMgVGhpcyB2ZXJzaW9uIGR1ZSB0byBKYW5uZSBTaW5ra29uZW4sIGFuZCBtYXRjaGVzIGFsbCB0aGUgc3RkCiAgICAgICAgIyB0ZXh0cyAoZS5nLiwgS251dGggVm9sIDIgRWQgMyBwZyAxMzQgInRoZSBiZXRhIGRpc3RyaWJ1dGlvbiIpLgogICAgICAgIHkgPSBzZWxmLmdhbW1hdmFyaWF0ZShhbHBoYSwgMS4pCiAgICAgICAgaWYgeSA9PSAwOgogICAgICAgICAgICByZXR1cm4gMC4wCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHkgLyAoeSArIHNlbGYuZ2FtbWF2YXJpYXRlKGJldGEsIDEuKSkKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIFBhcmV0byAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBwYXJldG92YXJpYXRlKHNlbGYsIGFscGhhKToKICAgICAgICAiIiJQYXJldG8gZGlzdHJpYnV0aW9uLiAgYWxwaGEgaXMgdGhlIHNoYXBlIHBhcmFtZXRlci4iIiIKICAgICAgICAjIEphaW4sIHBnLiA0OTUKCiAgICAgICAgdSA9IDEuMCAtIHNlbGYucmFuZG9tKCkKICAgICAgICByZXR1cm4gMS4wIC8gdSAqKiAoMS4wL2FscGhhKQoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gV2VpYnVsbCAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiB3ZWlidWxsdmFyaWF0ZShzZWxmLCBhbHBoYSwgYmV0YSk6CiAgICAgICAgIiIiV2VpYnVsbCBkaXN0cmlidXRpb24uCgogICAgICAgIGFscGhhIGlzIHRoZSBzY2FsZSBwYXJhbWV0ZXIgYW5kIGJldGEgaXMgdGhlIHNoYXBlIHBhcmFtZXRlci4KCiAgICAgICAgIiIiCiAgICAgICAgIyBKYWluLCBwZy4gNDk5OyBidWcgZml4IGNvdXJ0ZXN5IEJpbGwgQXJtcwoKICAgICAgICB1ID0gMS4wIC0gc2VsZi5yYW5kb20oKQogICAgICAgIHJldHVybiBhbHBoYSAqICgtX2xvZyh1KSkgKiogKDEuMC9iZXRhKQoKCiMjIC0tLS0tLS0tLS0tLS0tLSBPcGVyYXRpbmcgU3lzdGVtIFJhbmRvbSBTb3VyY2UgIC0tLS0tLS0tLS0tLS0tLS0tLQoKY2xhc3MgU3lzdGVtUmFuZG9tKFJhbmRvbSk6CiAgICAiIiJBbHRlcm5hdGUgcmFuZG9tIG51bWJlciBnZW5lcmF0b3IgdXNpbmcgc291cmNlcyBwcm92aWRlZAogICAgYnkgdGhlIG9wZXJhdGluZyBzeXN0ZW0gKHN1Y2ggYXMgL2Rldi91cmFuZG9tIG9uIFVuaXggb3IKICAgIENyeXB0R2VuUmFuZG9tIG9uIFdpbmRvd3MpLgoKICAgICBOb3QgYXZhaWxhYmxlIG9uIGFsbCBzeXN0ZW1zIChzZWUgb3MudXJhbmRvbSgpIGZvciBkZXRhaWxzKS4KICAgICIiIgoKICAgIGRlZiByYW5kb20oc2VsZik6CiAgICAgICAgIiIiR2V0IHRoZSBuZXh0IHJhbmRvbSBudW1iZXIgaW4gdGhlIHJhbmdlIFswLjAsIDEuMCkuIiIiCiAgICAgICAgcmV0dXJuIChpbnQuZnJvbV9ieXRlcyhfdXJhbmRvbSg3KSwgJ2JpZycpID4+IDMpICogUkVDSVBfQlBGCgogICAgZGVmIGdldHJhbmRiaXRzKHNlbGYsIGspOgogICAgICAgICIiImdldHJhbmRiaXRzKGspIC0+IHguICBHZW5lcmF0ZXMgYSBsb25nIGludCB3aXRoIGsgcmFuZG9tIGJpdHMuIiIiCiAgICAgICAgaWYgayA8PSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdudW1iZXIgb2YgYml0cyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvJykKICAgICAgICBpZiBrICE9IGludChrKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdudW1iZXIgb2YgYml0cyBzaG91bGQgYmUgYW4gaW50ZWdlcicpCiAgICAgICAgbnVtYnl0ZXMgPSAoayArIDcpIC8vIDggICAgICAgICAgICAgICAgICAgICAgICMgYml0cyAvIDggYW5kIHJvdW5kZWQgdXAKICAgICAgICB4ID0gaW50LmZyb21fYnl0ZXMoX3VyYW5kb20obnVtYnl0ZXMpLCAnYmlnJykKICAgICAgICByZXR1cm4geCA+PiAobnVtYnl0ZXMgKiA4IC0gaykgICAgICAgICAgICAgICAgIyB0cmltIGV4Y2VzcyBiaXRzCgogICAgZGVmIHNlZWQoc2VsZiwgKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgIlN0dWIgbWV0aG9kLiAgTm90IHVzZWQgZm9yIGEgc3lzdGVtIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yLiIKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBfbm90aW1wbGVtZW50ZWQoc2VsZiwgKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgIk1ldGhvZCBzaG91bGQgbm90IGJlIGNhbGxlZCBmb3IgYSBzeXN0ZW0gcmFuZG9tIG51bWJlciBnZW5lcmF0b3IuIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoJ1N5c3RlbSBlbnRyb3B5IHNvdXJjZSBkb2VzIG5vdCBoYXZlIHN0YXRlLicpCiAgICBnZXRzdGF0ZSA9IHNldHN0YXRlID0gX25vdGltcGxlbWVudGVkCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSB0ZXN0IHByb2dyYW0gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfdGVzdF9nZW5lcmF0b3IobiwgZnVuYywgYXJncyk6CiAgICBpbXBvcnQgdGltZQogICAgcHJpbnQobiwgJ3RpbWVzJywgZnVuYy5fX25hbWVfXykKICAgIHRvdGFsID0gMC4wCiAgICBzcXN1bSA9IDAuMAogICAgc21hbGxlc3QgPSAxZTEwCiAgICBsYXJnZXN0ID0gLTFlMTAKICAgIHQwID0gdGltZS50aW1lKCkKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIHggPSBmdW5jKCphcmdzKQogICAgICAgIHRvdGFsICs9IHgKICAgICAgICBzcXN1bSA9IHNxc3VtICsgeCp4CiAgICAgICAgc21hbGxlc3QgPSBtaW4oeCwgc21hbGxlc3QpCiAgICAgICAgbGFyZ2VzdCA9IG1heCh4LCBsYXJnZXN0KQogICAgdDEgPSB0aW1lLnRpbWUoKQogICAgcHJpbnQocm91bmQodDEtdDAsIDMpLCAnc2VjLCcsIGVuZD0nICcpCiAgICBhdmcgPSB0b3RhbC9uCiAgICBzdGRkZXYgPSBfc3FydChzcXN1bS9uIC0gYXZnKmF2ZykKICAgIHByaW50KCdhdmcgJWcsIHN0ZGRldiAlZywgbWluICVnLCBtYXggJWcnICUgXAogICAgICAgICAgICAgIChhdmcsIHN0ZGRldiwgc21hbGxlc3QsIGxhcmdlc3QpKQoKCmRlZiBfdGVzdChOPTIwMDApOgogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIHJhbmRvbSwgKCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgbm9ybWFsdmFyaWF0ZSwgKDAuMCwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBsb2dub3JtdmFyaWF0ZSwgKDAuMCwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCB2b25taXNlc3ZhcmlhdGUsICgwLjAsIDEuMCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgZ2FtbWF2YXJpYXRlLCAoMC4wMSwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBnYW1tYXZhcmlhdGUsICgwLjEsIDEuMCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgZ2FtbWF2YXJpYXRlLCAoMC4xLCAyLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhbW1hdmFyaWF0ZSwgKDAuNSwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBnYW1tYXZhcmlhdGUsICgwLjksIDEuMCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgZ2FtbWF2YXJpYXRlLCAoMS4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhbW1hdmFyaWF0ZSwgKDIuMCwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBnYW1tYXZhcmlhdGUsICgyMC4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhbW1hdmFyaWF0ZSwgKDIwMC4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhdXNzLCAoMC4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGJldGF2YXJpYXRlLCAoMy4wLCAzLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIHRyaWFuZ3VsYXIsICgwLjAsIDEuMCwgMS4wLzMuMCkpCgojIENyZWF0ZSBvbmUgaW5zdGFuY2UsIHNlZWRlZCBmcm9tIGN1cnJlbnQgdGltZSwgYW5kIGV4cG9ydCBpdHMgbWV0aG9kcwojIGFzIG1vZHVsZS1sZXZlbCBmdW5jdGlvbnMuICBUaGUgZnVuY3Rpb25zIHNoYXJlIHN0YXRlIGFjcm9zcyBhbGwgdXNlcwojKGJvdGggaW4gdGhlIHVzZXIncyBjb2RlIGFuZCBpbiB0aGUgUHl0aG9uIGxpYnJhcmllcyksIGJ1dCB0aGF0J3MgZmluZQojIGZvciBtb3N0IHByb2dyYW1zIGFuZCBpcyBlYXNpZXIgZm9yIHRoZSBjYXN1YWwgdXNlciB0aGFuIG1ha2luZyB0aGVtCiMgaW5zdGFudGlhdGUgdGhlaXIgb3duIFJhbmRvbSgpIGluc3RhbmNlLgoKX2luc3QgPSBSYW5kb20oKQpzZWVkID0gX2luc3Quc2VlZApyYW5kb20gPSBfaW5zdC5yYW5kb20KdW5pZm9ybSA9IF9pbnN0LnVuaWZvcm0KdHJpYW5ndWxhciA9IF9pbnN0LnRyaWFuZ3VsYXIKcmFuZGludCA9IF9pbnN0LnJhbmRpbnQKY2hvaWNlID0gX2luc3QuY2hvaWNlCnJhbmRyYW5nZSA9IF9pbnN0LnJhbmRyYW5nZQpzYW1wbGUgPSBfaW5zdC5zYW1wbGUKc2h1ZmZsZSA9IF9pbnN0LnNodWZmbGUKbm9ybWFsdmFyaWF0ZSA9IF9pbnN0Lm5vcm1hbHZhcmlhdGUKbG9nbm9ybXZhcmlhdGUgPSBfaW5zdC5sb2dub3JtdmFyaWF0ZQpleHBvdmFyaWF0ZSA9IF9pbnN0LmV4cG92YXJpYXRlCnZvbm1pc2VzdmFyaWF0ZSA9IF9pbnN0LnZvbm1pc2VzdmFyaWF0ZQpnYW1tYXZhcmlhdGUgPSBfaW5zdC5nYW1tYXZhcmlhdGUKZ2F1c3MgPSBfaW5zdC5nYXVzcwpiZXRhdmFyaWF0ZSA9IF9pbnN0LmJldGF2YXJpYXRlCnBhcmV0b3ZhcmlhdGUgPSBfaW5zdC5wYXJldG92YXJpYXRlCndlaWJ1bGx2YXJpYXRlID0gX2luc3Qud2VpYnVsbHZhcmlhdGUKZ2V0c3RhdGUgPSBfaW5zdC5nZXRzdGF0ZQpzZXRzdGF0ZSA9IF9pbnN0LnNldHN0YXRlCmdldHJhbmRiaXRzID0gX2luc3QuZ2V0cmFuZGJpdHMKCiNpZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgojICAgIF90ZXN0KCkKCg==',
'/Lib/site.py':'aW1wb3J0IHN5cwppbXBvcnQgZXh0ZXJuYWxfaW1wb3J0CnN5cy5wYXRoX2hvb2tzLmluc2VydCgwLGV4dGVybmFsX2ltcG9ydC5Nb2R1bGVGaW5kZXIpCg==',
'/Lib/pprint.py':'IyAgQXV0aG9yOiAgICAgIEZyZWQgTC4gRHJha2UsIEpyLg0KIyAgICAgICAgICAgICAgIGZkcmFrZUBhY20ub3JnDQojDQojICBUaGlzIGlzIGEgc2ltcGxlIGxpdHRsZSBtb2R1bGUgSSB3cm90ZSB0byBtYWtlIGxpZmUgZWFzaWVyLiAgSSBkaWRuJ3QNCiMgIHNlZSBhbnl0aGluZyBxdWl0ZSBsaWtlIGl0IGluIHRoZSBsaWJyYXJ5LCB0aG91Z2ggSSBtYXkgaGF2ZSBvdmVybG9va2VkDQojICBzb21ldGhpbmcuICBJIHdyb3RlIHRoaXMgd2hlbiBJIHdhcyB0cnlpbmcgdG8gcmVhZCBzb21lIGhlYXZpbHkgbmVzdGVkDQojICB0dXBsZXMgd2l0aCBmYWlybHkgbm9uLWRlc2NyaXB0aXZlIGNvbnRlbnQuICBUaGlzIGlzIG1vZGVsZWQgdmVyeSBtdWNoDQojICBhZnRlciBMaXNwL1NjaGVtZSAtIHN0eWxlIHByZXR0eS1wcmludGluZyBvZiBsaXN0cy4gIElmIHlvdSBmaW5kIGl0DQojICB1c2VmdWwsIHRoYW5rIHNtYWxsIGNoaWxkcmVuIHdobyBzbGVlcCBhdCBuaWdodC4NCg0KIiIiU3VwcG9ydCB0byBwcmV0dHktcHJpbnQgbGlzdHMsIHR1cGxlcywgJiBkaWN0aW9uYXJpZXMgcmVjdXJzaXZlbHkuDQoNClZlcnkgc2ltcGxlLCBidXQgdXNlZnVsLCBlc3BlY2lhbGx5IGluIGRlYnVnZ2luZyBkYXRhIHN0cnVjdHVyZXMuDQoNCkNsYXNzZXMNCi0tLS0tLS0NCg0KUHJldHR5UHJpbnRlcigpDQogICAgSGFuZGxlIHByZXR0eS1wcmludGluZyBvcGVyYXRpb25zIG9udG8gYSBzdHJlYW0gdXNpbmcgYSBjb25maWd1cmVkDQogICAgc2V0IG9mIGZvcm1hdHRpbmcgcGFyYW1ldGVycy4NCg0KRnVuY3Rpb25zDQotLS0tLS0tLS0NCg0KcGZvcm1hdCgpDQogICAgRm9ybWF0IGEgUHl0aG9uIG9iamVjdCBpbnRvIGEgcHJldHR5LXByaW50ZWQgcmVwcmVzZW50YXRpb24uDQoNCnBwcmludCgpDQogICAgUHJldHR5LXByaW50IGEgUHl0aG9uIG9iamVjdCB0byBhIHN0cmVhbSBbZGVmYXVsdCBpcyBzeXMuc3Rkb3V0XS4NCg0Kc2FmZXJlcHIoKQ0KICAgIEdlbmVyYXRlIGEgJ3N0YW5kYXJkJyByZXByKCktbGlrZSB2YWx1ZSwgYnV0IHByb3RlY3QgYWdhaW5zdCByZWN1cnNpdmUNCiAgICBkYXRhIHN0cnVjdHVyZXMuDQoNCiIiIg0KDQppbXBvcnQgc3lzIGFzIF9zeXMNCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE9yZGVyZWREaWN0IGFzIF9PcmRlcmVkRGljdA0KZnJvbSBpbyBpbXBvcnQgU3RyaW5nSU8gYXMgX1N0cmluZ0lPDQoNCl9fYWxsX18gPSBbInBwcmludCIsInBmb3JtYXQiLCJpc3JlYWRhYmxlIiwiaXNyZWN1cnNpdmUiLCJzYWZlcmVwciIsDQogICAgICAgICAgICJQcmV0dHlQcmludGVyIl0NCg0KIyBjYWNoZSB0aGVzZSBmb3IgZmFzdGVyIGFjY2VzczoNCl9jb21tYWpvaW4gPSAiLCAiLmpvaW4NCl9pZCA9IGlkDQpfbGVuID0gbGVuDQpfdHlwZSA9IHR5cGUNCg0KDQpkZWYgcHByaW50KG9iamVjdCwgc3RyZWFtPU5vbmUsIGluZGVudD0xLCB3aWR0aD04MCwgZGVwdGg9Tm9uZSk6DQogICAgIiIiUHJldHR5LXByaW50IGEgUHl0aG9uIG9iamVjdCB0byBhIHN0cmVhbSBbZGVmYXVsdCBpcyBzeXMuc3Rkb3V0XS4iIiINCiAgICBwcmludGVyID0gUHJldHR5UHJpbnRlcigNCiAgICAgICAgc3RyZWFtPXN0cmVhbSwgaW5kZW50PWluZGVudCwgd2lkdGg9d2lkdGgsIGRlcHRoPWRlcHRoKQ0KICAgIHByaW50ZXIucHByaW50KG9iamVjdCkNCg0KZGVmIHBmb3JtYXQob2JqZWN0LCBpbmRlbnQ9MSwgd2lkdGg9ODAsIGRlcHRoPU5vbmUpOg0KICAgICIiIkZvcm1hdCBhIFB5dGhvbiBvYmplY3QgaW50byBhIHByZXR0eS1wcmludGVkIHJlcHJlc2VudGF0aW9uLiIiIg0KICAgIHJldHVybiBQcmV0dHlQcmludGVyKGluZGVudD1pbmRlbnQsIHdpZHRoPXdpZHRoLCBkZXB0aD1kZXB0aCkucGZvcm1hdChvYmplY3QpDQoNCmRlZiBzYWZlcmVwcihvYmplY3QpOg0KICAgICIiIlZlcnNpb24gb2YgcmVwcigpIHdoaWNoIGNhbiBoYW5kbGUgcmVjdXJzaXZlIGRhdGEgc3RydWN0dXJlcy4iIiINCiAgICByZXR1cm4gX3NhZmVfcmVwcihvYmplY3QsIHt9LCBOb25lLCAwKVswXQ0KDQpkZWYgaXNyZWFkYWJsZShvYmplY3QpOg0KICAgICIiIkRldGVybWluZSBpZiBzYWZlcmVwcihvYmplY3QpIGlzIHJlYWRhYmxlIGJ5IGV2YWwoKS4iIiINCiAgICByZXR1cm4gX3NhZmVfcmVwcihvYmplY3QsIHt9LCBOb25lLCAwKVsxXQ0KDQpkZWYgaXNyZWN1cnNpdmUob2JqZWN0KToNCiAgICAiIiJEZXRlcm1pbmUgaWYgb2JqZWN0IHJlcXVpcmVzIGEgcmVjdXJzaXZlIHJlcHJlc2VudGF0aW9uLiIiIg0KICAgIHJldHVybiBfc2FmZV9yZXByKG9iamVjdCwge30sIE5vbmUsIDApWzJdDQoNCmNsYXNzIF9zYWZlX2tleToNCiAgICAiIiJIZWxwZXIgZnVuY3Rpb24gZm9yIGtleSBmdW5jdGlvbnMgd2hlbiBzb3J0aW5nIHVub3JkZXJhYmxlIG9iamVjdHMuDQoNCiAgICBUaGUgd3JhcHBlZC1vYmplY3Qgd2lsbCBmYWxsYmFjayB0byBhbiBQeTIueCBzdHlsZSBjb21wYXJpc29uIGZvcg0KICAgIHVub3JkZXJhYmxlIHR5cGVzIChzb3J0aW5nIGZpcnN0IGNvbXBhcmluZyB0aGUgdHlwZSBuYW1lIGFuZCB0aGVuIGJ5DQogICAgdGhlIG9iaiBpZHMpLiAgRG9lcyBub3Qgd29yayByZWN1cnNpdmVseSwgc28gZGljdC5pdGVtcygpIG11c3QgaGF2ZQ0KICAgIF9zYWZlX2tleSBhcHBsaWVkIHRvIGJvdGggdGhlIGtleSBhbmQgdGhlIHZhbHVlLg0KDQogICAgIiIiDQoNCiAgICBfX3Nsb3RzX18gPSBbJ29iaiddDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgb2JqKToNCiAgICAgICAgc2VsZi5vYmogPSBvYmoNCg0KICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBydiA9IHNlbGYub2JqLl9fbHRfXyhvdGhlci5vYmopDQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgICAgICBydiA9IE5vdEltcGxlbWVudGVkDQoNCiAgICAgICAgaWYgcnYgaXMgTm90SW1wbGVtZW50ZWQ6DQogICAgICAgICAgICBydiA9IChzdHIodHlwZShzZWxmLm9iaikpLCBpZChzZWxmLm9iaikpIDwgXA0KICAgICAgICAgICAgICAgICAoc3RyKHR5cGUob3RoZXIub2JqKSksIGlkKG90aGVyLm9iaikpDQogICAgICAgIHJldHVybiBydg0KDQpkZWYgX3NhZmVfdHVwbGUodCk6DQogICAgIkhlbHBlciBmdW5jdGlvbiBmb3IgY29tcGFyaW5nIDItdHVwbGVzIg0KICAgIHJldHVybiBfc2FmZV9rZXkodFswXSksIF9zYWZlX2tleSh0WzFdKQ0KDQpjbGFzcyBQcmV0dHlQcmludGVyOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbmRlbnQ9MSwgd2lkdGg9ODAsIGRlcHRoPU5vbmUsIHN0cmVhbT1Ob25lKToNCiAgICAgICAgIiIiSGFuZGxlIHByZXR0eSBwcmludGluZyBvcGVyYXRpb25zIG9udG8gYSBzdHJlYW0gdXNpbmcgYSBzZXQgb2YNCiAgICAgICAgY29uZmlndXJlZCBwYXJhbWV0ZXJzLg0KDQogICAgICAgIGluZGVudA0KICAgICAgICAgICAgTnVtYmVyIG9mIHNwYWNlcyB0byBpbmRlbnQgZm9yIGVhY2ggbGV2ZWwgb2YgbmVzdGluZy4NCg0KICAgICAgICB3aWR0aA0KICAgICAgICAgICAgQXR0ZW1wdGVkIG1heGltdW0gbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIG91dHB1dC4NCg0KICAgICAgICBkZXB0aA0KICAgICAgICAgICAgVGhlIG1heGltdW0gZGVwdGggdG8gcHJpbnQgb3V0IG5lc3RlZCBzdHJ1Y3R1cmVzLg0KDQogICAgICAgIHN0cmVhbQ0KICAgICAgICAgICAgVGhlIGRlc2lyZWQgb3V0cHV0IHN0cmVhbS4gIElmIG9taXR0ZWQgKG9yIGZhbHNlKSwgdGhlIHN0YW5kYXJkDQogICAgICAgICAgICBvdXRwdXQgc3RyZWFtIGF2YWlsYWJsZSBhdCBjb25zdHJ1Y3Rpb24gd2lsbCBiZSB1c2VkLg0KDQogICAgICAgICIiIg0KICAgICAgICBpbmRlbnQgPSBpbnQoaW5kZW50KQ0KICAgICAgICB3aWR0aCA9IGludCh3aWR0aCkNCiAgICAgICAgYXNzZXJ0IGluZGVudCA+PSAwLCAiaW5kZW50IG11c3QgYmUgPj0gMCINCiAgICAgICAgYXNzZXJ0IGRlcHRoIGlzIE5vbmUgb3IgZGVwdGggPiAwLCAiZGVwdGggbXVzdCBiZSA+IDAiDQogICAgICAgIGFzc2VydCB3aWR0aCwgIndpZHRoIG11c3QgYmUgIT0gMCINCiAgICAgICAgc2VsZi5fZGVwdGggPSBkZXB0aA0KICAgICAgICBzZWxmLl9pbmRlbnRfcGVyX2xldmVsID0gaW5kZW50DQogICAgICAgIHNlbGYuX3dpZHRoID0gd2lkdGgNCiAgICAgICAgaWYgc3RyZWFtIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgc2VsZi5fc3RyZWFtID0gc3RyZWFtDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLl9zdHJlYW0gPSBfc3lzLnN0ZG91dA0KDQogICAgZGVmIHBwcmludChzZWxmLCBvYmplY3QpOg0KICAgICAgICBzZWxmLl9mb3JtYXQob2JqZWN0LCBzZWxmLl9zdHJlYW0sIDAsIDAsIHt9LCAwKQ0KICAgICAgICBzZWxmLl9zdHJlYW0ud3JpdGUoIlxuIikNCg0KICAgIGRlZiBwZm9ybWF0KHNlbGYsIG9iamVjdCk6DQogICAgICAgIHNpbyA9IF9TdHJpbmdJTygpDQogICAgICAgIHNlbGYuX2Zvcm1hdChvYmplY3QsIHNpbywgMCwgMCwge30sIDApDQogICAgICAgIHJldHVybiBzaW8uZ2V0dmFsdWUoKQ0KDQogICAgZGVmIGlzcmVjdXJzaXZlKHNlbGYsIG9iamVjdCk6DQogICAgICAgIHJldHVybiBzZWxmLmZvcm1hdChvYmplY3QsIHt9LCAwLCAwKVsyXQ0KDQogICAgZGVmIGlzcmVhZGFibGUoc2VsZiwgb2JqZWN0KToNCiAgICAgICAgcywgcmVhZGFibGUsIHJlY3Vyc2l2ZSA9IHNlbGYuZm9ybWF0KG9iamVjdCwge30sIDAsIDApDQogICAgICAgIHJldHVybiByZWFkYWJsZSBhbmQgbm90IHJlY3Vyc2l2ZQ0KDQogICAgZGVmIF9mb3JtYXQoc2VsZiwgb2JqZWN0LCBzdHJlYW0sIGluZGVudCwgYWxsb3dhbmNlLCBjb250ZXh0LCBsZXZlbCk6DQogICAgICAgIGxldmVsID0gbGV2ZWwgKyAxDQogICAgICAgIG9iamlkID0gX2lkKG9iamVjdCkNCiAgICAgICAgaWYgb2JqaWQgaW4gY29udGV4dDoNCiAgICAgICAgICAgIHN0cmVhbS53cml0ZShfcmVjdXJzaW9uKG9iamVjdCkpDQogICAgICAgICAgICBzZWxmLl9yZWN1cnNpdmUgPSBUcnVlDQogICAgICAgICAgICBzZWxmLl9yZWFkYWJsZSA9IEZhbHNlDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgcmVwID0gc2VsZi5fcmVwcihvYmplY3QsIGNvbnRleHQsIGxldmVsIC0gMSkNCiAgICAgICAgdHlwID0gX3R5cGUob2JqZWN0KQ0KICAgICAgICBzZXBMaW5lcyA9IF9sZW4ocmVwKSA+IChzZWxmLl93aWR0aCAtIDEgLSBpbmRlbnQgLSBhbGxvd2FuY2UpDQogICAgICAgIHdyaXRlID0gc3RyZWFtLndyaXRlDQoNCiAgICAgICAgaWYgc2VsZi5fZGVwdGggYW5kIGxldmVsID4gc2VsZi5fZGVwdGg6DQogICAgICAgICAgICB3cml0ZShyZXApDQogICAgICAgICAgICByZXR1cm4NCg0KICAgICAgICBpZiBzZXBMaW5lczoNCiAgICAgICAgICAgIHIgPSBnZXRhdHRyKHR5cCwgIl9fcmVwcl9fIiwgTm9uZSkNCiAgICAgICAgICAgIGlmIGlzc3ViY2xhc3ModHlwLCBkaWN0KToNCiAgICAgICAgICAgICAgICB3cml0ZSgneycpDQogICAgICAgICAgICAgICAgaWYgc2VsZi5faW5kZW50X3Blcl9sZXZlbCA+IDE6DQogICAgICAgICAgICAgICAgICAgIHdyaXRlKChzZWxmLl9pbmRlbnRfcGVyX2xldmVsIC0gMSkgKiAnICcpDQogICAgICAgICAgICAgICAgbGVuZ3RoID0gX2xlbihvYmplY3QpDQogICAgICAgICAgICAgICAgaWYgbGVuZ3RoOg0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0W29iamlkXSA9IDENCiAgICAgICAgICAgICAgICAgICAgaW5kZW50ID0gaW5kZW50ICsgc2VsZi5faW5kZW50X3Blcl9sZXZlbA0KICAgICAgICAgICAgICAgICAgICBpZiBpc3N1YmNsYXNzKHR5cCwgX09yZGVyZWREaWN0KToNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gbGlzdChvYmplY3QuaXRlbXMoKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gc29ydGVkKG9iamVjdC5pdGVtcygpLCBrZXk9X3NhZmVfdHVwbGUpDQogICAgICAgICAgICAgICAgICAgIGtleSwgZW50ID0gaXRlbXNbMF0NCiAgICAgICAgICAgICAgICAgICAgcmVwID0gc2VsZi5fcmVwcihrZXksIGNvbnRleHQsIGxldmVsKQ0KICAgICAgICAgICAgICAgICAgICB3cml0ZShyZXApDQogICAgICAgICAgICAgICAgICAgIHdyaXRlKCc6ICcpDQogICAgICAgICAgICAgICAgICAgIHNlbGYuX2Zvcm1hdChlbnQsIHN0cmVhbSwgaW5kZW50ICsgX2xlbihyZXApICsgMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd2FuY2UgKyAxLCBjb250ZXh0LCBsZXZlbCkNCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuZ3RoID4gMToNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBrZXksIGVudCBpbiBpdGVtc1sxOl06DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwID0gc2VsZi5fcmVwcihrZXksIGNvbnRleHQsIGxldmVsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlKCcsXG4lcyVzOiAnICUgKCcgJyppbmRlbnQsIHJlcCkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZm9ybWF0KGVudCwgc3RyZWFtLCBpbmRlbnQgKyBfbGVuKHJlcCkgKyAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dhbmNlICsgMSwgY29udGV4dCwgbGV2ZWwpDQogICAgICAgICAgICAgICAgICAgIGluZGVudCA9IGluZGVudCAtIHNlbGYuX2luZGVudF9wZXJfbGV2ZWwNCiAgICAgICAgICAgICAgICAgICAgZGVsIGNvbnRleHRbb2JqaWRdDQogICAgICAgICAgICAgICAgd3JpdGUoJ30nKQ0KICAgICAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgICAgICBpZiAoKGlzc3ViY2xhc3ModHlwLCBsaXN0KSBhbmQgciBpcyBsaXN0Ll9fcmVwcl9fKSBvcg0KICAgICAgICAgICAgICAgIChpc3N1YmNsYXNzKHR5cCwgdHVwbGUpIGFuZCByIGlzIHR1cGxlLl9fcmVwcl9fKSBvcg0KICAgICAgICAgICAgICAgIChpc3N1YmNsYXNzKHR5cCwgc2V0KSBhbmQgciBpcyBzZXQuX19yZXByX18pIG9yDQogICAgICAgICAgICAgICAgKGlzc3ViY2xhc3ModHlwLCBmcm96ZW5zZXQpIGFuZCByIGlzIGZyb3plbnNldC5fX3JlcHJfXykNCiAgICAgICAgICAgICAgICk6DQogICAgICAgICAgICAgICAgbGVuZ3RoID0gX2xlbihvYmplY3QpDQogICAgICAgICAgICAgICAgaWYgaXNzdWJjbGFzcyh0eXAsIGxpc3QpOg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgnWycpDQogICAgICAgICAgICAgICAgICAgIGVuZGNoYXIgPSAnXScNCiAgICAgICAgICAgICAgICBlbGlmIGlzc3ViY2xhc3ModHlwLCBzZXQpOg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgbGVuZ3RoOg0KICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUoJ3NldCgpJykNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgneycpDQogICAgICAgICAgICAgICAgICAgIGVuZGNoYXIgPSAnfScNCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0gc29ydGVkKG9iamVjdCwga2V5PV9zYWZlX2tleSkNCiAgICAgICAgICAgICAgICBlbGlmIGlzc3ViY2xhc3ModHlwLCBmcm96ZW5zZXQpOg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgbGVuZ3RoOg0KICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUoJ2Zyb3plbnNldCgpJykNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgnZnJvemVuc2V0KHsnKQ0KICAgICAgICAgICAgICAgICAgICBlbmRjaGFyID0gJ30pJw0KICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBzb3J0ZWQob2JqZWN0LCBrZXk9X3NhZmVfa2V5KQ0KICAgICAgICAgICAgICAgICAgICBpbmRlbnQgKz0gMTANCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgnKCcpDQogICAgICAgICAgICAgICAgICAgIGVuZGNoYXIgPSAnKScNCiAgICAgICAgICAgICAgICBpZiBzZWxmLl9pbmRlbnRfcGVyX2xldmVsID4gMToNCiAgICAgICAgICAgICAgICAgICAgd3JpdGUoKHNlbGYuX2luZGVudF9wZXJfbGV2ZWwgLSAxKSAqICcgJykNCiAgICAgICAgICAgICAgICBpZiBsZW5ndGg6DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHRbb2JqaWRdID0gMQ0KICAgICAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgKyBzZWxmLl9pbmRlbnRfcGVyX2xldmVsDQogICAgICAgICAgICAgICAgICAgIHNlbGYuX2Zvcm1hdChvYmplY3RbMF0sIHN0cmVhbSwgaW5kZW50LCBhbGxvd2FuY2UgKyAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCwgbGV2ZWwpDQogICAgICAgICAgICAgICAgICAgIGlmIGxlbmd0aCA+IDE6DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgZW50IGluIG9iamVjdFsxOl06DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUoJyxcbicgKyAnICcqaW5kZW50KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2Zvcm1hdChlbnQsIHN0cmVhbSwgaW5kZW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dhbmNlICsgMSwgY29udGV4dCwgbGV2ZWwpDQogICAgICAgICAgICAgICAgICAgIGluZGVudCA9IGluZGVudCAtIHNlbGYuX2luZGVudF9wZXJfbGV2ZWwNCiAgICAgICAgICAgICAgICAgICAgZGVsIGNvbnRleHRbb2JqaWRdDQogICAgICAgICAgICAgICAgaWYgaXNzdWJjbGFzcyh0eXAsIHR1cGxlKSBhbmQgbGVuZ3RoID09IDE6DQogICAgICAgICAgICAgICAgICAgIHdyaXRlKCcsJykNCiAgICAgICAgICAgICAgICB3cml0ZShlbmRjaGFyKQ0KICAgICAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgIHdyaXRlKHJlcCkNCg0KICAgIGRlZiBfcmVwcihzZWxmLCBvYmplY3QsIGNvbnRleHQsIGxldmVsKToNCiAgICAgICAgcmVwciwgcmVhZGFibGUsIHJlY3Vyc2l2ZSA9IHNlbGYuZm9ybWF0KG9iamVjdCwgY29udGV4dC5jb3B5KCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kZXB0aCwgbGV2ZWwpDQogICAgICAgIGlmIG5vdCByZWFkYWJsZToNCiAgICAgICAgICAgIHNlbGYuX3JlYWRhYmxlID0gRmFsc2UNCiAgICAgICAgaWYgcmVjdXJzaXZlOg0KICAgICAgICAgICAgc2VsZi5fcmVjdXJzaXZlID0gVHJ1ZQ0KICAgICAgICByZXR1cm4gcmVwcg0KDQogICAgZGVmIGZvcm1hdChzZWxmLCBvYmplY3QsIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpOg0KICAgICAgICAiIiJGb3JtYXQgb2JqZWN0IGZvciBhIHNwZWNpZmljIGNvbnRleHQsIHJldHVybmluZyBhIHN0cmluZw0KICAgICAgICBhbmQgZmxhZ3MgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSByZXByZXNlbnRhdGlvbiBpcyAncmVhZGFibGUnDQogICAgICAgIGFuZCB3aGV0aGVyIHRoZSBvYmplY3QgcmVwcmVzZW50cyBhIHJlY3Vyc2l2ZSBjb25zdHJ1Y3QuDQogICAgICAgICIiIg0KICAgICAgICByZXR1cm4gX3NhZmVfcmVwcihvYmplY3QsIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpDQoNCg0KIyBSZXR1cm4gdHJpcGxlIChyZXByX3N0cmluZywgaXNyZWFkYWJsZSwgaXNyZWN1cnNpdmUpLg0KDQpkZWYgX3NhZmVfcmVwcihvYmplY3QsIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpOg0KICAgIHR5cCA9IF90eXBlKG9iamVjdCkNCiAgICBpZiB0eXAgaXMgc3RyOg0KICAgICAgICBpZiAnbG9jYWxlJyBub3QgaW4gX3N5cy5tb2R1bGVzOg0KICAgICAgICAgICAgcmV0dXJuIHJlcHIob2JqZWN0KSwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgaWYgIiciIGluIG9iamVjdCBhbmQgJyInIG5vdCBpbiBvYmplY3Q6DQogICAgICAgICAgICBjbG9zdXJlID0gJyInDQogICAgICAgICAgICBxdW90ZXMgPSB7JyInOiAnXFwiJ30NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGNsb3N1cmUgPSAiJyINCiAgICAgICAgICAgIHF1b3RlcyA9IHsiJyI6ICJcXCcifQ0KICAgICAgICBxZ2V0ID0gcXVvdGVzLmdldA0KICAgICAgICBzaW8gPSBfU3RyaW5nSU8oKQ0KICAgICAgICB3cml0ZSA9IHNpby53cml0ZQ0KICAgICAgICBmb3IgY2hhciBpbiBvYmplY3Q6DQogICAgICAgICAgICBpZiBjaGFyLmlzYWxwaGEoKToNCiAgICAgICAgICAgICAgICB3cml0ZShjaGFyKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICB3cml0ZShxZ2V0KGNoYXIsIHJlcHIoY2hhcilbMTotMV0pKQ0KICAgICAgICByZXR1cm4gKCIlcyVzJXMiICUgKGNsb3N1cmUsIHNpby5nZXR2YWx1ZSgpLCBjbG9zdXJlKSksIFRydWUsIEZhbHNlDQoNCiAgICByID0gZ2V0YXR0cih0eXAsICJfX3JlcHJfXyIsIE5vbmUpDQogICAgaWYgaXNzdWJjbGFzcyh0eXAsIGRpY3QpIGFuZCByIGlzIGRpY3QuX19yZXByX186DQogICAgICAgIGlmIG5vdCBvYmplY3Q6DQogICAgICAgICAgICByZXR1cm4gInt9IiwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgb2JqaWQgPSBfaWQob2JqZWN0KQ0KICAgICAgICBpZiBtYXhsZXZlbHMgYW5kIGxldmVsID49IG1heGxldmVsczoNCiAgICAgICAgICAgIHJldHVybiAiey4uLn0iLCBGYWxzZSwgb2JqaWQgaW4gY29udGV4dA0KICAgICAgICBpZiBvYmppZCBpbiBjb250ZXh0Og0KICAgICAgICAgICAgcmV0dXJuIF9yZWN1cnNpb24ob2JqZWN0KSwgRmFsc2UsIFRydWUNCiAgICAgICAgY29udGV4dFtvYmppZF0gPSAxDQogICAgICAgIHJlYWRhYmxlID0gVHJ1ZQ0KICAgICAgICByZWN1cnNpdmUgPSBGYWxzZQ0KICAgICAgICBjb21wb25lbnRzID0gW10NCiAgICAgICAgYXBwZW5kID0gY29tcG9uZW50cy5hcHBlbmQNCiAgICAgICAgbGV2ZWwgKz0gMQ0KICAgICAgICBzYWZlcmVwciA9IF9zYWZlX3JlcHINCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQob2JqZWN0Lml0ZW1zKCksIGtleT1fc2FmZV90dXBsZSkNCiAgICAgICAgZm9yIGssIHYgaW4gaXRlbXM6DQogICAgICAgICAgICBrcmVwciwga3JlYWRhYmxlLCBrcmVjdXIgPSBzYWZlcmVwcihrLCBjb250ZXh0LCBtYXhsZXZlbHMsIGxldmVsKQ0KICAgICAgICAgICAgdnJlcHIsIHZyZWFkYWJsZSwgdnJlY3VyID0gc2FmZXJlcHIodiwgY29udGV4dCwgbWF4bGV2ZWxzLCBsZXZlbCkNCiAgICAgICAgICAgIGFwcGVuZCgiJXM6ICVzIiAlIChrcmVwciwgdnJlcHIpKQ0KICAgICAgICAgICAgcmVhZGFibGUgPSByZWFkYWJsZSBhbmQga3JlYWRhYmxlIGFuZCB2cmVhZGFibGUNCiAgICAgICAgICAgIGlmIGtyZWN1ciBvciB2cmVjdXI6DQogICAgICAgICAgICAgICAgcmVjdXJzaXZlID0gVHJ1ZQ0KICAgICAgICBkZWwgY29udGV4dFtvYmppZF0NCiAgICAgICAgcmV0dXJuICJ7JXN9IiAlIF9jb21tYWpvaW4oY29tcG9uZW50cyksIHJlYWRhYmxlLCByZWN1cnNpdmUNCg0KICAgIGlmIChpc3N1YmNsYXNzKHR5cCwgbGlzdCkgYW5kIHIgaXMgbGlzdC5fX3JlcHJfXykgb3IgXA0KICAgICAgIChpc3N1YmNsYXNzKHR5cCwgdHVwbGUpIGFuZCByIGlzIHR1cGxlLl9fcmVwcl9fKToNCiAgICAgICAgaWYgaXNzdWJjbGFzcyh0eXAsIGxpc3QpOg0KICAgICAgICAgICAgaWYgbm90IG9iamVjdDoNCiAgICAgICAgICAgICAgICByZXR1cm4gIltdIiwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgICAgIGZvcm1hdCA9ICJbJXNdIg0KICAgICAgICBlbGlmIF9sZW4ob2JqZWN0KSA9PSAxOg0KICAgICAgICAgICAgZm9ybWF0ID0gIiglcywpIg0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaWYgbm90IG9iamVjdDoNCiAgICAgICAgICAgICAgICByZXR1cm4gIigpIiwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgICAgIGZvcm1hdCA9ICIoJXMpIg0KICAgICAgICBvYmppZCA9IF9pZChvYmplY3QpDQogICAgICAgIGlmIG1heGxldmVscyBhbmQgbGV2ZWwgPj0gbWF4bGV2ZWxzOg0KICAgICAgICAgICAgcmV0dXJuIGZvcm1hdCAlICIuLi4iLCBGYWxzZSwgb2JqaWQgaW4gY29udGV4dA0KICAgICAgICBpZiBvYmppZCBpbiBjb250ZXh0Og0KICAgICAgICAgICAgcmV0dXJuIF9yZWN1cnNpb24ob2JqZWN0KSwgRmFsc2UsIFRydWUNCiAgICAgICAgY29udGV4dFtvYmppZF0gPSAxDQogICAgICAgIHJlYWRhYmxlID0gVHJ1ZQ0KICAgICAgICByZWN1cnNpdmUgPSBGYWxzZQ0KICAgICAgICBjb21wb25lbnRzID0gW10NCiAgICAgICAgYXBwZW5kID0gY29tcG9uZW50cy5hcHBlbmQNCiAgICAgICAgbGV2ZWwgKz0gMQ0KICAgICAgICBmb3IgbyBpbiBvYmplY3Q6DQogICAgICAgICAgICBvcmVwciwgb3JlYWRhYmxlLCBvcmVjdXIgPSBfc2FmZV9yZXByKG8sIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpDQogICAgICAgICAgICBhcHBlbmQob3JlcHIpDQogICAgICAgICAgICBpZiBub3Qgb3JlYWRhYmxlOg0KICAgICAgICAgICAgICAgIHJlYWRhYmxlID0gRmFsc2UNCiAgICAgICAgICAgIGlmIG9yZWN1cjoNCiAgICAgICAgICAgICAgICByZWN1cnNpdmUgPSBUcnVlDQogICAgICAgIGRlbCBjb250ZXh0W29iamlkXQ0KICAgICAgICByZXR1cm4gZm9ybWF0ICUgX2NvbW1ham9pbihjb21wb25lbnRzKSwgcmVhZGFibGUsIHJlY3Vyc2l2ZQ0KDQogICAgcmVwID0gcmVwcihvYmplY3QpDQogICAgcmV0dXJuIHJlcCwgKHJlcCBhbmQgbm90IHJlcC5zdGFydHN3aXRoKCc8JykpLCBGYWxzZQ0KDQoNCmRlZiBfcmVjdXJzaW9uKG9iamVjdCk6DQogICAgcmV0dXJuICgiPFJlY3Vyc2lvbiBvbiAlcyB3aXRoIGlkPSVzPiINCiAgICAgICAgICAgICUgKF90eXBlKG9iamVjdCkuX19uYW1lX18sIF9pZChvYmplY3QpKSkNCg0KDQpkZWYgX3BlcmZjaGVjayhvYmplY3Q9Tm9uZSk6DQogICAgaW1wb3J0IHRpbWUNCiAgICBpZiBvYmplY3QgaXMgTm9uZToNCiAgICAgICAgb2JqZWN0ID0gWygic3RyaW5nIiwgKDEsIDIpLCBbMywgNF0sIHs1OiA2LCA3OiA4fSldICogMTAwMDAwDQogICAgcCA9IFByZXR0eVByaW50ZXIoKQ0KICAgIHQxID0gdGltZS50aW1lKCkNCiAgICBfc2FmZV9yZXByKG9iamVjdCwge30sIE5vbmUsIDApDQogICAgdDIgPSB0aW1lLnRpbWUoKQ0KICAgIHAucGZvcm1hdChvYmplY3QpDQogICAgdDMgPSB0aW1lLnRpbWUoKQ0KICAgIHByaW50KCJfc2FmZV9yZXByOiIsIHQyIC0gdDEpDQogICAgcHJpbnQoInBmb3JtYXQ6IiwgdDMgLSB0MikNCg0KaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoNCiAgICBfcGVyZmNoZWNrKCkNCg==',
'/Lib/textwrap.py':'IiIiVGV4dCB3cmFwcGluZyBhbmQgZmlsbGluZy4KIiIiCgojIENvcHlyaWdodCAoQykgMTk5OS0yMDAxIEdyZWdvcnkgUC4gV2FyZC4KIyBDb3B5cmlnaHQgKEMpIDIwMDIsIDIwMDMgUHl0aG9uIFNvZnR3YXJlIEZvdW5kYXRpb24uCiMgV3JpdHRlbiBieSBHcmVnIFdhcmQgPGd3YXJkQHB5dGhvbi5uZXQ+CgppbXBvcnQgcmUKCl9fYWxsX18gPSBbJ1RleHRXcmFwcGVyJywgJ3dyYXAnLCAnZmlsbCcsICdkZWRlbnQnLCAnaW5kZW50J10KCiMgSGFyZGNvZGUgdGhlIHJlY29nbml6ZWQgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHRvIHRoZSBVUy1BU0NJSQojIHdoaXRlc3BhY2UgY2hhcmFjdGVycy4gIFRoZSBtYWluIHJlYXNvbiBmb3IgZG9pbmcgdGhpcyBpcyB0aGF0IGluCiMgSVNPLTg4NTktMSwgMHhhMCBpcyBub24tYnJlYWtpbmcgd2hpdGVzcGFjZSwgc28gaW4gY2VydGFpbiBsb2NhbGVzCiMgdGhhdCBjaGFyYWN0ZXIgd2luZHMgdXAgaW4gc3RyaW5nLndoaXRlc3BhY2UuICBSZXNwZWN0aW5nCiMgc3RyaW5nLndoaXRlc3BhY2UgaW4gdGhvc2UgY2FzZXMgd291bGQgMSkgbWFrZSB0ZXh0d3JhcCB0cmVhdCAweGEwIHRoZQojIHNhbWUgYXMgYW55IG90aGVyIHdoaXRlc3BhY2UgY2hhciwgd2hpY2ggaXMgY2xlYXJseSB3cm9uZyAoaXQncyBhCiMgKm5vbi1icmVha2luZyogc3BhY2UpLCAyKSBwb3NzaWJseSBjYXVzZSBwcm9ibGVtcyB3aXRoIFVuaWNvZGUsCiMgc2luY2UgMHhhMCBpcyBub3QgaW4gcmFuZ2UoMTI4KS4KX3doaXRlc3BhY2UgPSAnXHRcblx4MGJceDBjXHIgJwoKY2xhc3MgVGV4dFdyYXBwZXI6CiAgICAiIiIKICAgIE9iamVjdCBmb3Igd3JhcHBpbmcvZmlsbGluZyB0ZXh0LiAgVGhlIHB1YmxpYyBpbnRlcmZhY2UgY29uc2lzdHMgb2YKICAgIHRoZSB3cmFwKCkgYW5kIGZpbGwoKSBtZXRob2RzOyB0aGUgb3RoZXIgbWV0aG9kcyBhcmUganVzdCB0aGVyZSBmb3IKICAgIHN1YmNsYXNzZXMgdG8gb3ZlcnJpZGUgaW4gb3JkZXIgdG8gdHdlYWsgdGhlIGRlZmF1bHQgYmVoYXZpb3VyLgogICAgSWYgeW91IHdhbnQgdG8gY29tcGxldGVseSByZXBsYWNlIHRoZSBtYWluIHdyYXBwaW5nIGFsZ29yaXRobSwKICAgIHlvdSdsbCBwcm9iYWJseSBoYXZlIHRvIG92ZXJyaWRlIF93cmFwX2NodW5rcygpLgoKICAgIFNldmVyYWwgaW5zdGFuY2UgYXR0cmlidXRlcyBjb250cm9sIHZhcmlvdXMgYXNwZWN0cyBvZiB3cmFwcGluZzoKICAgICAgd2lkdGggKGRlZmF1bHQ6IDcwKQogICAgICAgIHRoZSBtYXhpbXVtIHdpZHRoIG9mIHdyYXBwZWQgbGluZXMgKHVubGVzcyBicmVha19sb25nX3dvcmRzCiAgICAgICAgaXMgZmFsc2UpCiAgICAgIGluaXRpYWxfaW5kZW50IChkZWZhdWx0OiAiIikKICAgICAgICBzdHJpbmcgdGhhdCB3aWxsIGJlIHByZXBlbmRlZCB0byB0aGUgZmlyc3QgbGluZSBvZiB3cmFwcGVkCiAgICAgICAgb3V0cHV0LiAgQ291bnRzIHRvd2FyZHMgdGhlIGxpbmUncyB3aWR0aC4KICAgICAgc3Vic2VxdWVudF9pbmRlbnQgKGRlZmF1bHQ6ICIiKQogICAgICAgIHN0cmluZyB0aGF0IHdpbGwgYmUgcHJlcGVuZGVkIHRvIGFsbCBsaW5lcyBzYXZlIHRoZSBmaXJzdAogICAgICAgIG9mIHdyYXBwZWQgb3V0cHV0OyBhbHNvIGNvdW50cyB0b3dhcmRzIGVhY2ggbGluZSdzIHdpZHRoLgogICAgICBleHBhbmRfdGFicyAoZGVmYXVsdDogdHJ1ZSkKICAgICAgICBFeHBhbmQgdGFicyBpbiBpbnB1dCB0ZXh0IHRvIHNwYWNlcyBiZWZvcmUgZnVydGhlciBwcm9jZXNzaW5nLgogICAgICAgIEVhY2ggdGFiIHdpbGwgYmVjb21lIDAgLi4gJ3RhYnNpemUnIHNwYWNlcywgZGVwZW5kaW5nIG9uIGl0cyBwb3NpdGlvbgogICAgICAgIGluIGl0cyBsaW5lLiAgSWYgZmFsc2UsIGVhY2ggdGFiIGlzIHRyZWF0ZWQgYXMgYSBzaW5nbGUgY2hhcmFjdGVyLgogICAgICB0YWJzaXplIChkZWZhdWx0OiA4KQogICAgICAgIEV4cGFuZCB0YWJzIGluIGlucHV0IHRleHQgdG8gMCAuLiAndGFic2l6ZScgc3BhY2VzLCB1bmxlc3MKICAgICAgICAnZXhwYW5kX3RhYnMnIGlzIGZhbHNlLgogICAgICByZXBsYWNlX3doaXRlc3BhY2UgKGRlZmF1bHQ6IHRydWUpCiAgICAgICAgUmVwbGFjZSBhbGwgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGluIHRoZSBpbnB1dCB0ZXh0IGJ5IHNwYWNlcwogICAgICAgIGFmdGVyIHRhYiBleHBhbnNpb24uICBOb3RlIHRoYXQgaWYgZXhwYW5kX3RhYnMgaXMgZmFsc2UgYW5kCiAgICAgICAgcmVwbGFjZV93aGl0ZXNwYWNlIGlzIHRydWUsIGV2ZXJ5IHRhYiB3aWxsIGJlIGNvbnZlcnRlZCB0byBhCiAgICAgICAgc2luZ2xlIHNwYWNlIQogICAgICBmaXhfc2VudGVuY2VfZW5kaW5ncyAoZGVmYXVsdDogZmFsc2UpCiAgICAgICAgRW5zdXJlIHRoYXQgc2VudGVuY2UtZW5kaW5nIHB1bmN0dWF0aW9uIGlzIGFsd2F5cyBmb2xsb3dlZAogICAgICAgIGJ5IHR3byBzcGFjZXMuICBPZmYgYnkgZGVmYXVsdCBiZWNhdXNlIHRoZSBhbGdvcml0aG0gaXMKICAgICAgICAodW5hdm9pZGFibHkpIGltcGVyZmVjdC4KICAgICAgYnJlYWtfbG9uZ193b3JkcyAoZGVmYXVsdDogdHJ1ZSkKICAgICAgICBCcmVhayB3b3JkcyBsb25nZXIgdGhhbiAnd2lkdGgnLiAgSWYgZmFsc2UsIHRob3NlIHdvcmRzIHdpbGwgbm90CiAgICAgICAgYmUgYnJva2VuLCBhbmQgc29tZSBsaW5lcyBtaWdodCBiZSBsb25nZXIgdGhhbiAnd2lkdGgnLgogICAgICBicmVha19vbl9oeXBoZW5zIChkZWZhdWx0OiB0cnVlKQogICAgICAgIEFsbG93IGJyZWFraW5nIGh5cGhlbmF0ZWQgd29yZHMuIElmIHRydWUsIHdyYXBwaW5nIHdpbGwgb2NjdXIKICAgICAgICBwcmVmZXJhYmx5IG9uIHdoaXRlc3BhY2VzIGFuZCByaWdodCBhZnRlciBoeXBoZW5zIHBhcnQgb2YKICAgICAgICBjb21wb3VuZCB3b3Jkcy4KICAgICAgZHJvcF93aGl0ZXNwYWNlIChkZWZhdWx0OiB0cnVlKQogICAgICAgIERyb3AgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBmcm9tIGxpbmVzLgogICAgIiIiCgogICAgdW5pY29kZV93aGl0ZXNwYWNlX3RyYW5zID0ge30KICAgIHVzcGFjZSA9IG9yZCgnICcpCiAgICBmb3IgeCBpbiBfd2hpdGVzcGFjZToKICAgICAgICB1bmljb2RlX3doaXRlc3BhY2VfdHJhbnNbb3JkKHgpXSA9IHVzcGFjZQoKICAgICMgVGhpcyBmdW5reSBsaXR0bGUgcmVnZXggaXMganVzdCB0aGUgdHJpY2sgZm9yIHNwbGl0dGluZwogICAgIyB0ZXh0IHVwIGludG8gd29yZC13cmFwcGFibGUgY2h1bmtzLiAgRS5nLgogICAgIyAgICJIZWxsbyB0aGVyZSAtLSB5b3UgZ29vZi1iYWxsLCB1c2UgdGhlIC1iIG9wdGlvbiEiCiAgICAjIHNwbGl0cyBpbnRvCiAgICAjICAgSGVsbG8vIC90aGVyZS8gLy0tLyAveW91LyAvZ29vZi0vYmFsbCwvIC91c2UvIC90aGUvIC8tYi8gL29wdGlvbiEKICAgICMgKGFmdGVyIHN0cmlwcGluZyBvdXQgZW1wdHkgc3RyaW5ncykuCiAgICB3b3Jkc2VwX3JlID0gcmUuY29tcGlsZSgKICAgICAgICByJyhccyt8JyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGFueSB3aGl0ZXNwYWNlCiAgICAgICAgcidbXlxzXHddKlx3K1teMC05XFddLSg/PVx3K1teMC05XFddKXwnICAgIyBoeXBoZW5hdGVkIHdvcmRzCiAgICAgICAgcicoPzw9W1x3XCFcIlwnXCZcLlwsXD9dKS17Mix9KD89XHcpKScpICAgIyBlbS1kYXNoCgogICAgIyBUaGlzIGxlc3MgZnVua3kgbGl0dGxlIHJlZ2V4IGp1c3Qgc3BsaXQgb24gcmVjb2duaXplZCBzcGFjZXMuIEUuZy4KICAgICMgICAiSGVsbG8gdGhlcmUgLS0geW91IGdvb2YtYmFsbCwgdXNlIHRoZSAtYiBvcHRpb24hIgogICAgIyBzcGxpdHMgaW50bwogICAgIyAgIEhlbGxvLyAvdGhlcmUvIC8tLS8gL3lvdS8gL2dvb2YtYmFsbCwvIC91c2UvIC90aGUvIC8tYi8gL29wdGlvbiEvCiAgICB3b3Jkc2VwX3NpbXBsZV9yZSA9IHJlLmNvbXBpbGUocicoXHMrKScpCgogICAgIyBYWFggdGhpcyBpcyBub3QgbG9jYWxlLSBvciBjaGFyc2V0LWF3YXJlIC0tIHN0cmluZy5sb3dlcmNhc2UKICAgICMgaXMgVVMtQVNDSUkgb25seSAoYW5kIHRoZXJlZm9yZSBFbmdsaXNoLW9ubHkpCiAgICBzZW50ZW5jZV9lbmRfcmUgPSByZS5jb21waWxlKHInW2Etel0nICAgICAgICAgICAgICMgbG93ZXJjYXNlIGxldHRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByJ1tcLlwhXD9dJyAgICAgICAgICAjIHNlbnRlbmNlLWVuZGluZyBwdW5jdC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcidbXCJcJ10/JyAgICAgICAgICAgIyBvcHRpb25hbCBlbmQtb2YtcXVvdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcidcWicpICAgICAgICAgICAgICAgIyBlbmQgb2YgY2h1bmsKCgogICAgZGVmIF9faW5pdF9fKHNlbGYsCiAgICAgICAgICAgICAgICAgd2lkdGg9NzAsCiAgICAgICAgICAgICAgICAgaW5pdGlhbF9pbmRlbnQ9IiIsCiAgICAgICAgICAgICAgICAgc3Vic2VxdWVudF9pbmRlbnQ9IiIsCiAgICAgICAgICAgICAgICAgZXhwYW5kX3RhYnM9VHJ1ZSwKICAgICAgICAgICAgICAgICByZXBsYWNlX3doaXRlc3BhY2U9VHJ1ZSwKICAgICAgICAgICAgICAgICBmaXhfc2VudGVuY2VfZW5kaW5ncz1GYWxzZSwKICAgICAgICAgICAgICAgICBicmVha19sb25nX3dvcmRzPVRydWUsCiAgICAgICAgICAgICAgICAgZHJvcF93aGl0ZXNwYWNlPVRydWUsCiAgICAgICAgICAgICAgICAgYnJlYWtfb25faHlwaGVucz1UcnVlLAogICAgICAgICAgICAgICAgIHRhYnNpemU9OCk6CiAgICAgICAgc2VsZi53aWR0aCA9IHdpZHRoCiAgICAgICAgc2VsZi5pbml0aWFsX2luZGVudCA9IGluaXRpYWxfaW5kZW50CiAgICAgICAgc2VsZi5zdWJzZXF1ZW50X2luZGVudCA9IHN1YnNlcXVlbnRfaW5kZW50CiAgICAgICAgc2VsZi5leHBhbmRfdGFicyA9IGV4cGFuZF90YWJzCiAgICAgICAgc2VsZi5yZXBsYWNlX3doaXRlc3BhY2UgPSByZXBsYWNlX3doaXRlc3BhY2UKICAgICAgICBzZWxmLmZpeF9zZW50ZW5jZV9lbmRpbmdzID0gZml4X3NlbnRlbmNlX2VuZGluZ3MKICAgICAgICBzZWxmLmJyZWFrX2xvbmdfd29yZHMgPSBicmVha19sb25nX3dvcmRzCiAgICAgICAgc2VsZi5kcm9wX3doaXRlc3BhY2UgPSBkcm9wX3doaXRlc3BhY2UKICAgICAgICBzZWxmLmJyZWFrX29uX2h5cGhlbnMgPSBicmVha19vbl9oeXBoZW5zCiAgICAgICAgc2VsZi50YWJzaXplID0gdGFic2l6ZQoKCiAgICAjIC0tIFByaXZhdGUgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyAocG9zc2libHkgdXNlZnVsIGZvciBzdWJjbGFzc2VzIHRvIG92ZXJyaWRlKQoKICAgIGRlZiBfbXVuZ2Vfd2hpdGVzcGFjZShzZWxmLCB0ZXh0KToKICAgICAgICAiIiJfbXVuZ2Vfd2hpdGVzcGFjZSh0ZXh0IDogc3RyaW5nKSAtPiBzdHJpbmcKCiAgICAgICAgTXVuZ2Ugd2hpdGVzcGFjZSBpbiB0ZXh0OiBleHBhbmQgdGFicyBhbmQgY29udmVydCBhbGwgb3RoZXIKICAgICAgICB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgdG8gc3BhY2VzLiAgRWcuICIgZm9vXHRiYXJcblxuYmF6IgogICAgICAgIGJlY29tZXMgIiBmb28gICAgYmFyICBiYXoiLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuZXhwYW5kX3RhYnM6CiAgICAgICAgICAgIHRleHQgPSB0ZXh0LmV4cGFuZHRhYnMoc2VsZi50YWJzaXplKQogICAgICAgIGlmIHNlbGYucmVwbGFjZV93aGl0ZXNwYWNlOgogICAgICAgICAgICB0ZXh0ID0gdGV4dC50cmFuc2xhdGUoc2VsZi51bmljb2RlX3doaXRlc3BhY2VfdHJhbnMpCiAgICAgICAgcmV0dXJuIHRleHQKCgogICAgZGVmIF9zcGxpdChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJfc3BsaXQodGV4dCA6IHN0cmluZykgLT4gW3N0cmluZ10KCiAgICAgICAgU3BsaXQgdGhlIHRleHQgdG8gd3JhcCBpbnRvIGluZGl2aXNpYmxlIGNodW5rcy4gIENodW5rcyBhcmUKICAgICAgICBub3QgcXVpdGUgdGhlIHNhbWUgYXMgd29yZHM7IHNlZSBfd3JhcF9jaHVua3MoKSBmb3IgZnVsbAogICAgICAgIGRldGFpbHMuICBBcyBhbiBleGFtcGxlLCB0aGUgdGV4dAogICAgICAgICAgTG9vaywgZ29vZi1iYWxsIC0tIHVzZSB0aGUgLWIgb3B0aW9uIQogICAgICAgIGJyZWFrcyBpbnRvIHRoZSBmb2xsb3dpbmcgY2h1bmtzOgogICAgICAgICAgJ0xvb2ssJywgJyAnLCAnZ29vZi0nLCAnYmFsbCcsICcgJywgJy0tJywgJyAnLAogICAgICAgICAgJ3VzZScsICcgJywgJ3RoZScsICcgJywgJy1iJywgJyAnLCAnb3B0aW9uIScKICAgICAgICBpZiBicmVha19vbl9oeXBoZW5zIGlzIFRydWUsIG9yIGluOgogICAgICAgICAgJ0xvb2ssJywgJyAnLCAnZ29vZi1iYWxsJywgJyAnLCAnLS0nLCAnICcsCiAgICAgICAgICAndXNlJywgJyAnLCAndGhlJywgJyAnLCAnLWInLCAnICcsIG9wdGlvbiEnCiAgICAgICAgb3RoZXJ3aXNlLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuYnJlYWtfb25faHlwaGVucyBpcyBUcnVlOgogICAgICAgICAgICBjaHVua3MgPSBzZWxmLndvcmRzZXBfcmUuc3BsaXQodGV4dCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjaHVua3MgPSBzZWxmLndvcmRzZXBfc2ltcGxlX3JlLnNwbGl0KHRleHQpCiAgICAgICAgY2h1bmtzID0gW2MgZm9yIGMgaW4gY2h1bmtzIGlmIGNdCiAgICAgICAgcmV0dXJuIGNodW5rcwoKICAgIGRlZiBfZml4X3NlbnRlbmNlX2VuZGluZ3Moc2VsZiwgY2h1bmtzKToKICAgICAgICAiIiJfZml4X3NlbnRlbmNlX2VuZGluZ3MoY2h1bmtzIDogW3N0cmluZ10pCgogICAgICAgIENvcnJlY3QgZm9yIHNlbnRlbmNlIGVuZGluZ3MgYnVyaWVkIGluICdjaHVua3MnLiAgRWcuIHdoZW4gdGhlCiAgICAgICAgb3JpZ2luYWwgdGV4dCBjb250YWlucyAiLi4uIGZvby5cbkJhciAuLi4iLCBtdW5nZV93aGl0ZXNwYWNlKCkKICAgICAgICBhbmQgc3BsaXQoKSB3aWxsIGNvbnZlcnQgdGhhdCB0byBbLi4uLCAiZm9vLiIsICIgIiwgIkJhciIsIC4uLl0KICAgICAgICB3aGljaCBoYXMgb25lIHRvbyBmZXcgc3BhY2VzOyB0aGlzIG1ldGhvZCBzaW1wbHkgY2hhbmdlcyB0aGUgb25lCiAgICAgICAgc3BhY2UgdG8gdHdvLgogICAgICAgICIiIgogICAgICAgIGkgPSAwCiAgICAgICAgcGF0c2VhcmNoID0gc2VsZi5zZW50ZW5jZV9lbmRfcmUuc2VhcmNoCiAgICAgICAgd2hpbGUgaSA8IGxlbihjaHVua3MpLTE6CiAgICAgICAgICAgIGlmIGNodW5rc1tpKzFdID09ICIgIiBhbmQgcGF0c2VhcmNoKGNodW5rc1tpXSk6CiAgICAgICAgICAgICAgICBjaHVua3NbaSsxXSA9ICIgICIKICAgICAgICAgICAgICAgIGkgKz0gMgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaSArPSAxCgogICAgZGVmIF9oYW5kbGVfbG9uZ193b3JkKHNlbGYsIHJldmVyc2VkX2NodW5rcywgY3VyX2xpbmUsIGN1cl9sZW4sIHdpZHRoKToKICAgICAgICAiIiJfaGFuZGxlX2xvbmdfd29yZChjaHVua3MgOiBbc3RyaW5nXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJfbGluZSA6IFtzdHJpbmddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cl9sZW4gOiBpbnQsIHdpZHRoIDogaW50KQoKICAgICAgICBIYW5kbGUgYSBjaHVuayBvZiB0ZXh0IChtb3N0IGxpa2VseSBhIHdvcmQsIG5vdCB3aGl0ZXNwYWNlKSB0aGF0CiAgICAgICAgaXMgdG9vIGxvbmcgdG8gZml0IGluIGFueSBsaW5lLgogICAgICAgICIiIgogICAgICAgICMgRmlndXJlIG91dCB3aGVuIGluZGVudCBpcyBsYXJnZXIgdGhhbiB0aGUgc3BlY2lmaWVkIHdpZHRoLCBhbmQgbWFrZQogICAgICAgICMgc3VyZSBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyIGlzIHN0cmlwcGVkIG9mZiBvbiBldmVyeSBwYXNzCiAgICAgICAgaWYgd2lkdGggPCAxOgogICAgICAgICAgICBzcGFjZV9sZWZ0ID0gMQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNwYWNlX2xlZnQgPSB3aWR0aCAtIGN1cl9sZW4KCiAgICAgICAgIyBJZiB3ZSdyZSBhbGxvd2VkIHRvIGJyZWFrIGxvbmcgd29yZHMsIHRoZW4gZG8gc286IHB1dCBhcyBtdWNoCiAgICAgICAgIyBvZiB0aGUgbmV4dCBjaHVuayBvbnRvIHRoZSBjdXJyZW50IGxpbmUgYXMgd2lsbCBmaXQuCiAgICAgICAgaWYgc2VsZi5icmVha19sb25nX3dvcmRzOgogICAgICAgICAgICBjdXJfbGluZS5hcHBlbmQocmV2ZXJzZWRfY2h1bmtzWy0xXVs6c3BhY2VfbGVmdF0pCiAgICAgICAgICAgIHJldmVyc2VkX2NodW5rc1stMV0gPSByZXZlcnNlZF9jaHVua3NbLTFdW3NwYWNlX2xlZnQ6XQoKICAgICAgICAjIE90aGVyd2lzZSwgd2UgaGF2ZSB0byBwcmVzZXJ2ZSB0aGUgbG9uZyB3b3JkIGludGFjdC4gIE9ubHkgYWRkCiAgICAgICAgIyBpdCB0byB0aGUgY3VycmVudCBsaW5lIGlmIHRoZXJlJ3Mgbm90aGluZyBhbHJlYWR5IHRoZXJlIC0tCiAgICAgICAgIyB0aGF0IG1pbmltaXplcyBob3cgbXVjaCB3ZSB2aW9sYXRlIHRoZSB3aWR0aCBjb25zdHJhaW50LgogICAgICAgIGVsaWYgbm90IGN1cl9saW5lOgogICAgICAgICAgICBjdXJfbGluZS5hcHBlbmQocmV2ZXJzZWRfY2h1bmtzLnBvcCgpKQoKICAgICAgICAjIElmIHdlJ3JlIG5vdCBhbGxvd2VkIHRvIGJyZWFrIGxvbmcgd29yZHMsIGFuZCB0aGVyZSdzIGFscmVhZHkKICAgICAgICAjIHRleHQgb24gdGhlIGN1cnJlbnQgbGluZSwgZG8gbm90aGluZy4gIE5leHQgdGltZSB0aHJvdWdoIHRoZQogICAgICAgICMgbWFpbiBsb29wIG9mIF93cmFwX2NodW5rcygpLCB3ZSdsbCB3aW5kIHVwIGhlcmUgYWdhaW4sIGJ1dAogICAgICAgICMgY3VyX2xlbiB3aWxsIGJlIHplcm8sIHNvIHRoZSBuZXh0IGxpbmUgd2lsbCBiZSBlbnRpcmVseQogICAgICAgICMgZGV2b3RlZCB0byB0aGUgbG9uZyB3b3JkIHRoYXQgd2UgY2FuJ3QgaGFuZGxlIHJpZ2h0IG5vdy4KCiAgICBkZWYgX3dyYXBfY2h1bmtzKHNlbGYsIGNodW5rcyk6CiAgICAgICAgIiIiX3dyYXBfY2h1bmtzKGNodW5rcyA6IFtzdHJpbmddKSAtPiBbc3RyaW5nXQoKICAgICAgICBXcmFwIGEgc2VxdWVuY2Ugb2YgdGV4dCBjaHVua3MgYW5kIHJldHVybiBhIGxpc3Qgb2YgbGluZXMgb2YKICAgICAgICBsZW5ndGggJ3NlbGYud2lkdGgnIG9yIGxlc3MuICAoSWYgJ2JyZWFrX2xvbmdfd29yZHMnIGlzIGZhbHNlLAogICAgICAgIHNvbWUgbGluZXMgbWF5IGJlIGxvbmdlciB0aGFuIHRoaXMuKSAgQ2h1bmtzIGNvcnJlc3BvbmQgcm91Z2hseQogICAgICAgIHRvIHdvcmRzIGFuZCB0aGUgd2hpdGVzcGFjZSBiZXR3ZWVuIHRoZW06IGVhY2ggY2h1bmsgaXMKICAgICAgICBpbmRpdmlzaWJsZSAobW9kdWxvICdicmVha19sb25nX3dvcmRzJyksIGJ1dCBhIGxpbmUgYnJlYWsgY2FuCiAgICAgICAgY29tZSBiZXR3ZWVuIGFueSB0d28gY2h1bmtzLiAgQ2h1bmtzIHNob3VsZCBub3QgaGF2ZSBpbnRlcm5hbAogICAgICAgIHdoaXRlc3BhY2U7IGllLiBhIGNodW5rIGlzIGVpdGhlciBhbGwgd2hpdGVzcGFjZSBvciBhICJ3b3JkIi4KICAgICAgICBXaGl0ZXNwYWNlIGNodW5rcyB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YKICAgICAgICBsaW5lcywgYnV0IGFwYXJ0IGZyb20gdGhhdCB3aGl0ZXNwYWNlIGlzIHByZXNlcnZlZC4KICAgICAgICAiIiIKICAgICAgICBsaW5lcyA9IFtdCiAgICAgICAgaWYgc2VsZi53aWR0aCA8PSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHdpZHRoICVyIChtdXN0IGJlID4gMCkiICUgc2VsZi53aWR0aCkKCiAgICAgICAgIyBBcnJhbmdlIGluIHJldmVyc2Ugb3JkZXIgc28gaXRlbXMgY2FuIGJlIGVmZmljaWVudGx5IHBvcHBlZAogICAgICAgICMgZnJvbSBhIHN0YWNrIG9mIGNodWNrcy4KICAgICAgICBjaHVua3MucmV2ZXJzZSgpCgogICAgICAgIHdoaWxlIGNodW5rczoKCiAgICAgICAgICAgICMgU3RhcnQgdGhlIGxpc3Qgb2YgY2h1bmtzIHRoYXQgd2lsbCBtYWtlIHVwIHRoZSBjdXJyZW50IGxpbmUuCiAgICAgICAgICAgICMgY3VyX2xlbiBpcyBqdXN0IHRoZSBsZW5ndGggb2YgYWxsIHRoZSBjaHVua3MgaW4gY3VyX2xpbmUuCiAgICAgICAgICAgIGN1cl9saW5lID0gW10KICAgICAgICAgICAgY3VyX2xlbiA9IDAKCiAgICAgICAgICAgICMgRmlndXJlIG91dCB3aGljaCBzdGF0aWMgc3RyaW5nIHdpbGwgcHJlZml4IHRoaXMgbGluZS4KICAgICAgICAgICAgaWYgbGluZXM6CiAgICAgICAgICAgICAgICBpbmRlbnQgPSBzZWxmLnN1YnNlcXVlbnRfaW5kZW50CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpbmRlbnQgPSBzZWxmLmluaXRpYWxfaW5kZW50CgogICAgICAgICAgICAjIE1heGltdW0gd2lkdGggZm9yIHRoaXMgbGluZS4KICAgICAgICAgICAgd2lkdGggPSBzZWxmLndpZHRoIC0gbGVuKGluZGVudCkKCiAgICAgICAgICAgICMgRmlyc3QgY2h1bmsgb24gbGluZSBpcyB3aGl0ZXNwYWNlIC0tIGRyb3AgaXQsIHVubGVzcyB0aGlzCiAgICAgICAgICAgICMgaXMgdGhlIHZlcnkgYmVnaW5uaW5nIG9mIHRoZSB0ZXh0IChpZS4gbm8gbGluZXMgc3RhcnRlZCB5ZXQpLgogICAgICAgICAgICBpZiBzZWxmLmRyb3Bfd2hpdGVzcGFjZSBhbmQgY2h1bmtzWy0xXS5zdHJpcCgpID09ICcnIGFuZCBsaW5lczoKICAgICAgICAgICAgICAgIGRlbCBjaHVua3NbLTFdCgogICAgICAgICAgICB3aGlsZSBjaHVua3M6CiAgICAgICAgICAgICAgICBsID0gbGVuKGNodW5rc1stMV0pCgogICAgICAgICAgICAgICAgIyBDYW4gYXQgbGVhc3Qgc3F1ZWV6ZSB0aGlzIGNodW5rIG9udG8gdGhlIGN1cnJlbnQgbGluZS4KICAgICAgICAgICAgICAgIGlmIGN1cl9sZW4gKyBsIDw9IHdpZHRoOgogICAgICAgICAgICAgICAgICAgIGN1cl9saW5lLmFwcGVuZChjaHVua3MucG9wKCkpCiAgICAgICAgICAgICAgICAgICAgY3VyX2xlbiArPSBsCgogICAgICAgICAgICAgICAgIyBOb3BlLCB0aGlzIGxpbmUgaXMgZnVsbC4KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICMgVGhlIGN1cnJlbnQgbGluZSBpcyBmdWxsLCBhbmQgdGhlIG5leHQgY2h1bmsgaXMgdG9vIGJpZyB0bwogICAgICAgICAgICAjIGZpdCBvbiAqYW55KiBsaW5lIChub3QganVzdCB0aGlzIG9uZSkuCiAgICAgICAgICAgIGlmIGNodW5rcyBhbmQgbGVuKGNodW5rc1stMV0pID4gd2lkdGg6CiAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVfbG9uZ193b3JkKGNodW5rcywgY3VyX2xpbmUsIGN1cl9sZW4sIHdpZHRoKQoKICAgICAgICAgICAgIyBJZiB0aGUgbGFzdCBjaHVuayBvbiB0aGlzIGxpbmUgaXMgYWxsIHdoaXRlc3BhY2UsIGRyb3AgaXQuCiAgICAgICAgICAgIGlmIHNlbGYuZHJvcF93aGl0ZXNwYWNlIGFuZCBjdXJfbGluZSBhbmQgY3VyX2xpbmVbLTFdLnN0cmlwKCkgPT0gJyc6CiAgICAgICAgICAgICAgICBkZWwgY3VyX2xpbmVbLTFdCgogICAgICAgICAgICAjIENvbnZlcnQgY3VycmVudCBsaW5lIGJhY2sgdG8gYSBzdHJpbmcgYW5kIHN0b3JlIGl0IGluIGxpc3QKICAgICAgICAgICAgIyBvZiBhbGwgbGluZXMgKHJldHVybiB2YWx1ZSkuCiAgICAgICAgICAgIGlmIGN1cl9saW5lOgogICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKGluZGVudCArICcnLmpvaW4oY3VyX2xpbmUpKQoKICAgICAgICByZXR1cm4gbGluZXMKCgogICAgIyAtLSBQdWJsaWMgaW50ZXJmYWNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgd3JhcChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJ3cmFwKHRleHQgOiBzdHJpbmcpIC0+IFtzdHJpbmddCgogICAgICAgIFJlZm9ybWF0IHRoZSBzaW5nbGUgcGFyYWdyYXBoIGluICd0ZXh0JyBzbyBpdCBmaXRzIGluIGxpbmVzIG9mCiAgICAgICAgbm8gbW9yZSB0aGFuICdzZWxmLndpZHRoJyBjb2x1bW5zLCBhbmQgcmV0dXJuIGEgbGlzdCBvZiB3cmFwcGVkCiAgICAgICAgbGluZXMuICBUYWJzIGluICd0ZXh0JyBhcmUgZXhwYW5kZWQgd2l0aCBzdHJpbmcuZXhwYW5kdGFicygpLAogICAgICAgIGFuZCBhbGwgb3RoZXIgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIChpbmNsdWRpbmcgbmV3bGluZSkgYXJlCiAgICAgICAgY29udmVydGVkIHRvIHNwYWNlLgogICAgICAgICIiIgogICAgICAgIHRleHQgPSBzZWxmLl9tdW5nZV93aGl0ZXNwYWNlKHRleHQpCiAgICAgICAgY2h1bmtzID0gc2VsZi5fc3BsaXQodGV4dCkKICAgICAgICBpZiBzZWxmLmZpeF9zZW50ZW5jZV9lbmRpbmdzOgogICAgICAgICAgICBzZWxmLl9maXhfc2VudGVuY2VfZW5kaW5ncyhjaHVua3MpCiAgICAgICAgcmV0dXJuIHNlbGYuX3dyYXBfY2h1bmtzKGNodW5rcykKCiAgICBkZWYgZmlsbChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJmaWxsKHRleHQgOiBzdHJpbmcpIC0+IHN0cmluZwoKICAgICAgICBSZWZvcm1hdCB0aGUgc2luZ2xlIHBhcmFncmFwaCBpbiAndGV4dCcgdG8gZml0IGluIGxpbmVzIG9mIG5vCiAgICAgICAgbW9yZSB0aGFuICdzZWxmLndpZHRoJyBjb2x1bW5zLCBhbmQgcmV0dXJuIGEgbmV3IHN0cmluZwogICAgICAgIGNvbnRhaW5pbmcgdGhlIGVudGlyZSB3cmFwcGVkIHBhcmFncmFwaC4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gIlxuIi5qb2luKHNlbGYud3JhcCh0ZXh0KSkKCgojIC0tIENvbnZlbmllbmNlIGludGVyZmFjZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiB3cmFwKHRleHQsIHdpZHRoPTcwLCAqKmt3YXJncyk6CiAgICAiIiJXcmFwIGEgc2luZ2xlIHBhcmFncmFwaCBvZiB0ZXh0LCByZXR1cm5pbmcgYSBsaXN0IG9mIHdyYXBwZWQgbGluZXMuCgogICAgUmVmb3JtYXQgdGhlIHNpbmdsZSBwYXJhZ3JhcGggaW4gJ3RleHQnIHNvIGl0IGZpdHMgaW4gbGluZXMgb2Ygbm8KICAgIG1vcmUgdGhhbiAnd2lkdGgnIGNvbHVtbnMsIGFuZCByZXR1cm4gYSBsaXN0IG9mIHdyYXBwZWQgbGluZXMuICBCeQogICAgZGVmYXVsdCwgdGFicyBpbiAndGV4dCcgYXJlIGV4cGFuZGVkIHdpdGggc3RyaW5nLmV4cGFuZHRhYnMoKSwgYW5kCiAgICBhbGwgb3RoZXIgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIChpbmNsdWRpbmcgbmV3bGluZSkgYXJlIGNvbnZlcnRlZCB0bwogICAgc3BhY2UuICBTZWUgVGV4dFdyYXBwZXIgY2xhc3MgZm9yIGF2YWlsYWJsZSBrZXl3b3JkIGFyZ3MgdG8gY3VzdG9taXplCiAgICB3cmFwcGluZyBiZWhhdmlvdXIuCiAgICAiIiIKICAgIHcgPSBUZXh0V3JhcHBlcih3aWR0aD13aWR0aCwgKiprd2FyZ3MpCiAgICByZXR1cm4gdy53cmFwKHRleHQpCgpkZWYgZmlsbCh0ZXh0LCB3aWR0aD03MCwgKiprd2FyZ3MpOgogICAgIiIiRmlsbCBhIHNpbmdsZSBwYXJhZ3JhcGggb2YgdGV4dCwgcmV0dXJuaW5nIGEgbmV3IHN0cmluZy4KCiAgICBSZWZvcm1hdCB0aGUgc2luZ2xlIHBhcmFncmFwaCBpbiAndGV4dCcgdG8gZml0IGluIGxpbmVzIG9mIG5vIG1vcmUKICAgIHRoYW4gJ3dpZHRoJyBjb2x1bW5zLCBhbmQgcmV0dXJuIGEgbmV3IHN0cmluZyBjb250YWluaW5nIHRoZSBlbnRpcmUKICAgIHdyYXBwZWQgcGFyYWdyYXBoLiAgQXMgd2l0aCB3cmFwKCksIHRhYnMgYXJlIGV4cGFuZGVkIGFuZCBvdGhlcgogICAgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGNvbnZlcnRlZCB0byBzcGFjZS4gIFNlZSBUZXh0V3JhcHBlciBjbGFzcyBmb3IKICAgIGF2YWlsYWJsZSBrZXl3b3JkIGFyZ3MgdG8gY3VzdG9taXplIHdyYXBwaW5nIGJlaGF2aW91ci4KICAgICIiIgogICAgdyA9IFRleHRXcmFwcGVyKHdpZHRoPXdpZHRoLCAqKmt3YXJncykKICAgIHJldHVybiB3LmZpbGwodGV4dCkKCgojIC0tIExvb3NlbHkgcmVsYXRlZCBmdW5jdGlvbmFsaXR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCl93aGl0ZXNwYWNlX29ubHlfcmUgPSByZS5jb21waWxlKCdeWyBcdF0rJCcsIHJlLk1VTFRJTElORSkKX2xlYWRpbmdfd2hpdGVzcGFjZV9yZSA9IHJlLmNvbXBpbGUoJyheWyBcdF0qKSg/OlteIFx0XG5dKScsIHJlLk1VTFRJTElORSkKCmRlZiBkZWRlbnQodGV4dCk6CiAgICAiIiJSZW1vdmUgYW55IGNvbW1vbiBsZWFkaW5nIHdoaXRlc3BhY2UgZnJvbSBldmVyeSBsaW5lIGluIGB0ZXh0YC4KCiAgICBUaGlzIGNhbiBiZSB1c2VkIHRvIG1ha2UgdHJpcGxlLXF1b3RlZCBzdHJpbmdzIGxpbmUgdXAgd2l0aCB0aGUgbGVmdAogICAgZWRnZSBvZiB0aGUgZGlzcGxheSwgd2hpbGUgc3RpbGwgcHJlc2VudGluZyB0aGVtIGluIHRoZSBzb3VyY2UgY29kZQogICAgaW4gaW5kZW50ZWQgZm9ybS4KCiAgICBOb3RlIHRoYXQgdGFicyBhbmQgc3BhY2VzIGFyZSBib3RoIHRyZWF0ZWQgYXMgd2hpdGVzcGFjZSwgYnV0IHRoZXkKICAgIGFyZSBub3QgZXF1YWw6IHRoZSBsaW5lcyAiICBoZWxsbyIgYW5kICJcdGhlbGxvIiBhcmUKICAgIGNvbnNpZGVyZWQgdG8gaGF2ZSBubyBjb21tb24gbGVhZGluZyB3aGl0ZXNwYWNlLiAgKFRoaXMgYmVoYXZpb3VyIGlzCiAgICBuZXcgaW4gUHl0aG9uIDIuNTsgb2xkZXIgdmVyc2lvbnMgb2YgdGhpcyBtb2R1bGUgaW5jb3JyZWN0bHkKICAgIGV4cGFuZGVkIHRhYnMgYmVmb3JlIHNlYXJjaGluZyBmb3IgY29tbW9uIGxlYWRpbmcgd2hpdGVzcGFjZS4pCiAgICAiIiIKICAgICMgTG9vayBmb3IgdGhlIGxvbmdlc3QgbGVhZGluZyBzdHJpbmcgb2Ygc3BhY2VzIGFuZCB0YWJzIGNvbW1vbiB0bwogICAgIyBhbGwgbGluZXMuCiAgICBtYXJnaW4gPSBOb25lCiAgICB0ZXh0ID0gX3doaXRlc3BhY2Vfb25seV9yZS5zdWIoJycsIHRleHQpCiAgICBpbmRlbnRzID0gX2xlYWRpbmdfd2hpdGVzcGFjZV9yZS5maW5kYWxsKHRleHQpCiAgICBmb3IgaW5kZW50IGluIGluZGVudHM6CiAgICAgICAgaWYgbWFyZ2luIGlzIE5vbmU6CiAgICAgICAgICAgIG1hcmdpbiA9IGluZGVudAoKICAgICAgICAjIEN1cnJlbnQgbGluZSBtb3JlIGRlZXBseSBpbmRlbnRlZCB0aGFuIHByZXZpb3VzIHdpbm5lcjoKICAgICAgICAjIG5vIGNoYW5nZSAocHJldmlvdXMgd2lubmVyIGlzIHN0aWxsIG9uIHRvcCkuCiAgICAgICAgZWxpZiBpbmRlbnQuc3RhcnRzd2l0aChtYXJnaW4pOgogICAgICAgICAgICBwYXNzCgogICAgICAgICMgQ3VycmVudCBsaW5lIGNvbnNpc3RlbnQgd2l0aCBhbmQgbm8gZGVlcGVyIHRoYW4gcHJldmlvdXMgd2lubmVyOgogICAgICAgICMgaXQncyB0aGUgbmV3IHdpbm5lci4KICAgICAgICBlbGlmIG1hcmdpbi5zdGFydHN3aXRoKGluZGVudCk6CiAgICAgICAgICAgIG1hcmdpbiA9IGluZGVudAoKICAgICAgICAjIEN1cnJlbnQgbGluZSBhbmQgcHJldmlvdXMgd2lubmVyIGhhdmUgbm8gY29tbW9uIHdoaXRlc3BhY2U6CiAgICAgICAgIyB0aGVyZSBpcyBubyBtYXJnaW4uCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbWFyZ2luID0gIiIKICAgICAgICAgICAgYnJlYWsKCiAgICAjIHNhbml0eSBjaGVjayAodGVzdGluZy9kZWJ1Z2dpbmcgb25seSkKICAgIGlmIDAgYW5kIG1hcmdpbjoKICAgICAgICBmb3IgbGluZSBpbiB0ZXh0LnNwbGl0KCJcbiIpOgogICAgICAgICAgICBhc3NlcnQgbm90IGxpbmUgb3IgbGluZS5zdGFydHN3aXRoKG1hcmdpbiksIFwKICAgICAgICAgICAgICAgICAgICJsaW5lID0gJXIsIG1hcmdpbiA9ICVyIiAlIChsaW5lLCBtYXJnaW4pCgogICAgaWYgbWFyZ2luOgogICAgICAgIHRleHQgPSByZS5zdWIocicoP20pXicgKyBtYXJnaW4sICcnLCB0ZXh0KQogICAgcmV0dXJuIHRleHQKCgpkZWYgaW5kZW50KHRleHQsIHByZWZpeCwgcHJlZGljYXRlPU5vbmUpOgogICAgIiIiQWRkcyAncHJlZml4JyB0byB0aGUgYmVnaW5uaW5nIG9mIHNlbGVjdGVkIGxpbmVzIGluICd0ZXh0Jy4KCiAgICBJZiAncHJlZGljYXRlJyBpcyBwcm92aWRlZCwgJ3ByZWZpeCcgd2lsbCBvbmx5IGJlIGFkZGVkIHRvIHRoZSBsaW5lcwogICAgd2hlcmUgJ3ByZWRpY2F0ZShsaW5lKScgaXMgVHJ1ZS4gSWYgJ3ByZWRpY2F0ZScgaXMgbm90IHByb3ZpZGVkLAogICAgaXQgd2lsbCBkZWZhdWx0IHRvIGFkZGluZyAncHJlZml4JyB0byBhbGwgbm9uLWVtcHR5IGxpbmVzIHRoYXQgZG8gbm90CiAgICBjb25zaXN0IHNvbGVseSBvZiB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMuCiAgICAiIiIKICAgIGlmIHByZWRpY2F0ZSBpcyBOb25lOgogICAgICAgIGRlZiBwcmVkaWNhdGUobGluZSk6CiAgICAgICAgICAgIHJldHVybiBsaW5lLnN0cmlwKCkKCiAgICBkZWYgcHJlZml4ZWRfbGluZXMoKToKICAgICAgICBmb3IgbGluZSBpbiB0ZXh0LnNwbGl0bGluZXMoVHJ1ZSk6CiAgICAgICAgICAgIHlpZWxkIChwcmVmaXggKyBsaW5lIGlmIHByZWRpY2F0ZShsaW5lKSBlbHNlIGxpbmUpCiAgICByZXR1cm4gJycuam9pbihwcmVmaXhlZF9saW5lcygpKQoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICAjcHJpbnQgZGVkZW50KCJcdGZvb1xuXHRiYXIiKQogICAgI3ByaW50IGRlZGVudCgiICBcdGhlbGxvIHRoZXJlXG4gIFx0ICBob3cgYXJlIHlvdT8iKQogICAgcHJpbnQoZGVkZW50KCJIZWxsbyB0aGVyZS5cbiAgVGhpcyBpcyBpbmRlbnRlZC4iKSkK',
'/Lib/posixpath.py':'IiIiQ29tbW9uIG9wZXJhdGlvbnMgb24gUG9zaXggcGF0aG5hbWVzLgoKSW5zdGVhZCBvZiBpbXBvcnRpbmcgdGhpcyBtb2R1bGUgZGlyZWN0bHksIGltcG9ydCBvcyBhbmQgcmVmZXIgdG8KdGhpcyBtb2R1bGUgYXMgb3MucGF0aC4gIFRoZSAib3MucGF0aCIgbmFtZSBpcyBhbiBhbGlhcyBmb3IgdGhpcwptb2R1bGUgb24gUG9zaXggc3lzdGVtczsgb24gb3RoZXIgc3lzdGVtcyAoZS5nLiBNYWMsIFdpbmRvd3MpLApvcy5wYXRoIHByb3ZpZGVzIHRoZSBzYW1lIG9wZXJhdGlvbnMgaW4gYSBtYW5uZXIgc3BlY2lmaWMgdG8gdGhhdApwbGF0Zm9ybSwgYW5kIGlzIGFuIGFsaWFzIHRvIGFub3RoZXIgbW9kdWxlIChlLmcuIG1hY3BhdGgsIG50cGF0aCkuCgpTb21lIG9mIHRoaXMgY2FuIGFjdHVhbGx5IGJlIHVzZWZ1bCBvbiBub24tUG9zaXggc3lzdGVtcyB0b28sIGUuZy4KZm9yIG1hbmlwdWxhdGlvbiBvZiB0aGUgcGF0aG5hbWUgY29tcG9uZW50IG9mIFVSTHMuCiIiIgoKaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHN0YXQKaW1wb3J0IGdlbmVyaWNwYXRoCmZyb20gZ2VuZXJpY3BhdGggaW1wb3J0ICoKCl9fYWxsX18gPSBbIm5vcm1jYXNlIiwiaXNhYnMiLCJqb2luIiwic3BsaXRkcml2ZSIsInNwbGl0Iiwic3BsaXRleHQiLAogICAgICAgICAgICJiYXNlbmFtZSIsImRpcm5hbWUiLCJjb21tb25wcmVmaXgiLCJnZXRzaXplIiwiZ2V0bXRpbWUiLAogICAgICAgICAgICJnZXRhdGltZSIsImdldGN0aW1lIiwiaXNsaW5rIiwiZXhpc3RzIiwibGV4aXN0cyIsImlzZGlyIiwiaXNmaWxlIiwKICAgICAgICAgICAiaXNtb3VudCIsICJleHBhbmR1c2VyIiwiZXhwYW5kdmFycyIsIm5vcm1wYXRoIiwiYWJzcGF0aCIsCiAgICAgICAgICAgInNhbWVmaWxlIiwic2FtZW9wZW5maWxlIiwic2FtZXN0YXQiLAogICAgICAgICAgICJjdXJkaXIiLCJwYXJkaXIiLCJzZXAiLCJwYXRoc2VwIiwiZGVmcGF0aCIsImFsdHNlcCIsImV4dHNlcCIsCiAgICAgICAgICAgImRldm51bGwiLCJyZWFscGF0aCIsInN1cHBvcnRzX3VuaWNvZGVfZmlsZW5hbWVzIiwicmVscGF0aCJdCgojIFN0cmluZ3MgcmVwcmVzZW50aW5nIHZhcmlvdXMgcGF0aC1yZWxhdGVkIGJpdHMgYW5kIHBpZWNlcy4KIyBUaGVzZSBhcmUgcHJpbWFyaWx5IGZvciBleHBvcnQ7IGludGVybmFsbHksIHRoZXkgYXJlIGhhcmRjb2RlZC4KY3VyZGlyID0gJy4nCnBhcmRpciA9ICcuLicKZXh0c2VwID0gJy4nCnNlcCA9ICcvJwpwYXRoc2VwID0gJzonCmRlZnBhdGggPSAnOi9iaW46L3Vzci9iaW4nCmFsdHNlcCA9IE5vbmUKZGV2bnVsbCA9ICcvZGV2L251bGwnCgpkZWYgX2dldF9zZXAocGF0aCk6CiAgICBpZiBpc2luc3RhbmNlKHBhdGgsIGJ5dGVzKToKICAgICAgICByZXR1cm4gYicvJwogICAgZWxzZToKICAgICAgICByZXR1cm4gJy8nCgojIE5vcm1hbGl6ZSB0aGUgY2FzZSBvZiBhIHBhdGhuYW1lLiAgVHJpdmlhbCBpbiBQb3NpeCwgc3RyaW5nLmxvd2VyIG9uIE1hYy4KIyBPbiBNUy1ET1MgdGhpcyBtYXkgYWxzbyB0dXJuIHNsYXNoZXMgaW50byBiYWNrc2xhc2hlczsgaG93ZXZlciwgb3RoZXIKIyBub3JtYWxpemF0aW9ucyAoc3VjaCBhcyBvcHRpbWl6aW5nICcuLi8nIGF3YXkpIGFyZSBub3QgYWxsb3dlZAojIChhbm90aGVyIGZ1bmN0aW9uIHNob3VsZCBiZSBkZWZpbmVkIHRvIGRvIHRoYXQpLgoKZGVmIG5vcm1jYXNlKHMpOgogICAgIiIiTm9ybWFsaXplIGNhc2Ugb2YgcGF0aG5hbWUuICBIYXMgbm8gZWZmZWN0IHVuZGVyIFBvc2l4IiIiCiAgICAjIFRPRE86IG9uIE1hYyBPUyBYLCB0aGlzIHNob3VsZCByZWFsbHkgcmV0dXJuIHMubG93ZXIoKS4KICAgIGlmIG5vdCBpc2luc3RhbmNlKHMsIChieXRlcywgc3RyKSk6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJub3JtY2FzZSgpIGFyZ3VtZW50IG11c3QgYmUgc3RyIG9yIGJ5dGVzLCAiCiAgICAgICAgICAgICAgICAgICAgICAgICJub3QgJ3t9JyIuZm9ybWF0KHMuX19jbGFzc19fLl9fbmFtZV9fKSkKICAgIHJldHVybiBzCgoKIyBSZXR1cm4gd2hldGhlciBhIHBhdGggaXMgYWJzb2x1dGUuCiMgVHJpdmlhbCBpbiBQb3NpeCwgaGFyZGVyIG9uIHRoZSBNYWMgb3IgTVMtRE9TLgoKZGVmIGlzYWJzKHMpOgogICAgIiIiVGVzdCB3aGV0aGVyIGEgcGF0aCBpcyBhYnNvbHV0ZSIiIgogICAgc2VwID0gX2dldF9zZXAocykKICAgIHJldHVybiBzLnN0YXJ0c3dpdGgoc2VwKQoKCiMgSm9pbiBwYXRobmFtZXMuCiMgSWdub3JlIHRoZSBwcmV2aW91cyBwYXJ0cyBpZiBhIHBhcnQgaXMgYWJzb2x1dGUuCiMgSW5zZXJ0IGEgJy8nIHVubGVzcyB0aGUgZmlyc3QgcGFydCBpcyBlbXB0eSBvciBhbHJlYWR5IGVuZHMgaW4gJy8nLgoKZGVmIGpvaW4oYSwgKnApOgogICAgIiIiSm9pbiB0d28gb3IgbW9yZSBwYXRobmFtZSBjb21wb25lbnRzLCBpbnNlcnRpbmcgJy8nIGFzIG5lZWRlZC4KICAgIElmIGFueSBjb21wb25lbnQgaXMgYW4gYWJzb2x1dGUgcGF0aCwgYWxsIHByZXZpb3VzIHBhdGggY29tcG9uZW50cwogICAgd2lsbCBiZSBkaXNjYXJkZWQuICBBbiBlbXB0eSBsYXN0IHBhcnQgd2lsbCByZXN1bHQgaW4gYSBwYXRoIHRoYXQKICAgIGVuZHMgd2l0aCBhIHNlcGFyYXRvci4iIiIKICAgIHNlcCA9IF9nZXRfc2VwKGEpCiAgICBwYXRoID0gYQogICAgdHJ5OgogICAgICAgIGZvciBiIGluIHA6CiAgICAgICAgICAgIGlmIGIuc3RhcnRzd2l0aChzZXApOgogICAgICAgICAgICAgICAgcGF0aCA9IGIKICAgICAgICAgICAgZWxpZiBub3QgcGF0aCBvciBwYXRoLmVuZHN3aXRoKHNlcCk6CiAgICAgICAgICAgICAgICBwYXRoICs9IGIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHBhdGggKz0gc2VwICsgYgogICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICB2YWxpZF90eXBlcyA9IGFsbChpc2luc3RhbmNlKHMsIChzdHIsIGJ5dGVzLCBieXRlYXJyYXkpKQogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBzIGluIChhLCApICsgcCkKICAgICAgICBpZiB2YWxpZF90eXBlczoKICAgICAgICAgICAgIyBNdXN0IGhhdmUgYSBtaXh0dXJlIG9mIHRleHQgYW5kIGJpbmFyeSBkYXRhCiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiQ2FuJ3QgbWl4IHN0cmluZ3MgYW5kIGJ5dGVzIGluIHBhdGggY29tcG9uZW50cy4iKQogICAgICAgIHJhaXNlCiAgICByZXR1cm4gcGF0aAoKCiMgU3BsaXQgYSBwYXRoIGluIGhlYWQgKGV2ZXJ5dGhpbmcgdXAgdG8gdGhlIGxhc3QgJy8nKSBhbmQgdGFpbCAodGhlCiMgcmVzdCkuICBJZiB0aGUgcGF0aCBlbmRzIGluICcvJywgdGFpbCB3aWxsIGJlIGVtcHR5LiAgSWYgdGhlcmUgaXMgbm8KIyAnLycgaW4gdGhlIHBhdGgsIGhlYWQgIHdpbGwgYmUgZW1wdHkuCiMgVHJhaWxpbmcgJy8nZXMgYXJlIHN0cmlwcGVkIGZyb20gaGVhZCB1bmxlc3MgaXQgaXMgdGhlIHJvb3QuCgpkZWYgc3BsaXQocCk6CiAgICAiIiJTcGxpdCBhIHBhdGhuYW1lLiAgUmV0dXJucyB0dXBsZSAiKGhlYWQsIHRhaWwpIiB3aGVyZSAidGFpbCIgaXMKICAgIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpbmFsIHNsYXNoLiAgRWl0aGVyIHBhcnQgbWF5IGJlIGVtcHR5LiIiIgogICAgc2VwID0gX2dldF9zZXAocCkKICAgIGkgPSBwLnJmaW5kKHNlcCkgKyAxCiAgICBoZWFkLCB0YWlsID0gcFs6aV0sIHBbaTpdCiAgICBpZiBoZWFkIGFuZCBoZWFkICE9IHNlcCpsZW4oaGVhZCk6CiAgICAgICAgaGVhZCA9IGhlYWQucnN0cmlwKHNlcCkKICAgIHJldHVybiBoZWFkLCB0YWlsCgoKIyBTcGxpdCBhIHBhdGggaW4gcm9vdCBhbmQgZXh0ZW5zaW9uLgojIFRoZSBleHRlbnNpb24gaXMgZXZlcnl0aGluZyBzdGFydGluZyBhdCB0aGUgbGFzdCBkb3QgaW4gdGhlIGxhc3QKIyBwYXRobmFtZSBjb21wb25lbnQ7IHRoZSByb290IGlzIGV2ZXJ5dGhpbmcgYmVmb3JlIHRoYXQuCiMgSXQgaXMgYWx3YXlzIHRydWUgdGhhdCByb290ICsgZXh0ID09IHAuCgpkZWYgc3BsaXRleHQocCk6CiAgICBpZiBpc2luc3RhbmNlKHAsIGJ5dGVzKToKICAgICAgICBzZXAgPSBiJy8nCiAgICAgICAgZXh0c2VwID0gYicuJwogICAgZWxzZToKICAgICAgICBzZXAgPSAnLycKICAgICAgICBleHRzZXAgPSAnLicKICAgIHJldHVybiBnZW5lcmljcGF0aC5fc3BsaXRleHQocCwgc2VwLCBOb25lLCBleHRzZXApCnNwbGl0ZXh0Ll9fZG9jX18gPSBnZW5lcmljcGF0aC5fc3BsaXRleHQuX19kb2NfXwoKIyBTcGxpdCBhIHBhdGhuYW1lIGludG8gYSBkcml2ZSBzcGVjaWZpY2F0aW9uIGFuZCB0aGUgcmVzdCBvZiB0aGUKIyBwYXRoLiAgVXNlZnVsIG9uIERPUy9XaW5kb3dzL05UOyBvbiBVbml4LCB0aGUgZHJpdmUgaXMgYWx3YXlzIGVtcHR5LgoKZGVmIHNwbGl0ZHJpdmUocCk6CiAgICAiIiJTcGxpdCBhIHBhdGhuYW1lIGludG8gZHJpdmUgYW5kIHBhdGguIE9uIFBvc2l4LCBkcml2ZSBpcyBhbHdheXMKICAgIGVtcHR5LiIiIgogICAgcmV0dXJuIHBbOjBdLCBwCgoKIyBSZXR1cm4gdGhlIHRhaWwgKGJhc2VuYW1lKSBwYXJ0IG9mIGEgcGF0aCwgc2FtZSBhcyBzcGxpdChwYXRoKVsxXS4KCmRlZiBiYXNlbmFtZShwKToKICAgICIiIlJldHVybnMgdGhlIGZpbmFsIGNvbXBvbmVudCBvZiBhIHBhdGhuYW1lIiIiCiAgICBzZXAgPSBfZ2V0X3NlcChwKQogICAgaSA9IHAucmZpbmQoc2VwKSArIDEKICAgIHJldHVybiBwW2k6XQoKCiMgUmV0dXJuIHRoZSBoZWFkIChkaXJuYW1lKSBwYXJ0IG9mIGEgcGF0aCwgc2FtZSBhcyBzcGxpdChwYXRoKVswXS4KCmRlZiBkaXJuYW1lKHApOgogICAgIiIiUmV0dXJucyB0aGUgZGlyZWN0b3J5IGNvbXBvbmVudCBvZiBhIHBhdGhuYW1lIiIiCiAgICBzZXAgPSBfZ2V0X3NlcChwKQogICAgaSA9IHAucmZpbmQoc2VwKSArIDEKICAgIGhlYWQgPSBwWzppXQogICAgaWYgaGVhZCBhbmQgaGVhZCAhPSBzZXAqbGVuKGhlYWQpOgogICAgICAgIGhlYWQgPSBoZWFkLnJzdHJpcChzZXApCiAgICByZXR1cm4gaGVhZAoKCiMgSXMgYSBwYXRoIGEgc3ltYm9saWMgbGluaz8KIyBUaGlzIHdpbGwgYWx3YXlzIHJldHVybiBmYWxzZSBvbiBzeXN0ZW1zIHdoZXJlIG9zLmxzdGF0IGRvZXNuJ3QgZXhpc3QuCgpkZWYgaXNsaW5rKHBhdGgpOgogICAgIiIiVGVzdCB3aGV0aGVyIGEgcGF0aCBpcyBhIHN5bWJvbGljIGxpbmsiIiIKICAgIHRyeToKICAgICAgICBzdCA9IG9zLmxzdGF0KHBhdGgpCiAgICBleGNlcHQgKG9zLmVycm9yLCBBdHRyaWJ1dGVFcnJvcik6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICByZXR1cm4gc3RhdC5TX0lTTE5LKHN0LnN0X21vZGUpCgojIEJlaW5nIHRydWUgZm9yIGRhbmdsaW5nIHN5bWJvbGljIGxpbmtzIGlzIGFsc28gdXNlZnVsLgoKZGVmIGxleGlzdHMocGF0aCk6CiAgICAiIiJUZXN0IHdoZXRoZXIgYSBwYXRoIGV4aXN0cy4gIFJldHVybnMgVHJ1ZSBmb3IgYnJva2VuIHN5bWJvbGljIGxpbmtzIiIiCiAgICB0cnk6CiAgICAgICAgb3MubHN0YXQocGF0aCkKICAgIGV4Y2VwdCBvcy5lcnJvcjoKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiBUcnVlCgoKIyBBcmUgdHdvIGZpbGVuYW1lcyByZWFsbHkgcG9pbnRpbmcgdG8gdGhlIHNhbWUgZmlsZT8KCmRlZiBzYW1lZmlsZShmMSwgZjIpOgogICAgIiIiVGVzdCB3aGV0aGVyIHR3byBwYXRobmFtZXMgcmVmZXJlbmNlIHRoZSBzYW1lIGFjdHVhbCBmaWxlIiIiCiAgICBzMSA9IG9zLnN0YXQoZjEpCiAgICBzMiA9IG9zLnN0YXQoZjIpCiAgICByZXR1cm4gc2FtZXN0YXQoczEsIHMyKQoKCiMgQXJlIHR3byBvcGVuIGZpbGVzIHJlYWxseSByZWZlcmVuY2luZyB0aGUgc2FtZSBmaWxlPwojIChOb3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgZmlsZSBkZXNjcmlwdG9yISkKCmRlZiBzYW1lb3BlbmZpbGUoZnAxLCBmcDIpOgogICAgIiIiVGVzdCB3aGV0aGVyIHR3byBvcGVuIGZpbGUgb2JqZWN0cyByZWZlcmVuY2UgdGhlIHNhbWUgZmlsZSIiIgogICAgczEgPSBvcy5mc3RhdChmcDEpCiAgICBzMiA9IG9zLmZzdGF0KGZwMikKICAgIHJldHVybiBzYW1lc3RhdChzMSwgczIpCgoKIyBBcmUgdHdvIHN0YXQgYnVmZmVycyAob2J0YWluZWQgZnJvbSBzdGF0LCBmc3RhdCBvciBsc3RhdCkKIyBkZXNjcmliaW5nIHRoZSBzYW1lIGZpbGU/CgpkZWYgc2FtZXN0YXQoczEsIHMyKToKICAgICIiIlRlc3Qgd2hldGhlciB0d28gc3RhdCBidWZmZXJzIHJlZmVyZW5jZSB0aGUgc2FtZSBmaWxlIiIiCiAgICByZXR1cm4gczEuc3RfaW5vID09IHMyLnN0X2lubyBhbmQgXAogICAgICAgICAgIHMxLnN0X2RldiA9PSBzMi5zdF9kZXYKCgojIElzIGEgcGF0aCBhIG1vdW50IHBvaW50PwojIChEb2VzIHRoaXMgd29yayBmb3IgYWxsIFVOSVhlcz8gIElzIGl0IGV2ZW4gZ3VhcmFudGVlZCB0byB3b3JrIGJ5IFBvc2l4PykKCmRlZiBpc21vdW50KHBhdGgpOgogICAgIiIiVGVzdCB3aGV0aGVyIGEgcGF0aCBpcyBhIG1vdW50IHBvaW50IiIiCiAgICBpZiBpc2xpbmsocGF0aCk6CiAgICAgICAgIyBBIHN5bWxpbmsgY2FuIG5ldmVyIGJlIGEgbW91bnQgcG9pbnQKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHRyeToKICAgICAgICBzMSA9IG9zLmxzdGF0KHBhdGgpCiAgICAgICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6CiAgICAgICAgICAgIHBhcmVudCA9IGpvaW4ocGF0aCwgYicuLicpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGFyZW50ID0gam9pbihwYXRoLCAnLi4nKQogICAgICAgIHMyID0gb3MubHN0YXQocGFyZW50KQogICAgZXhjZXB0IG9zLmVycm9yOgogICAgICAgIHJldHVybiBGYWxzZSAjIEl0IGRvZXNuJ3QgZXhpc3QgLS0gc28gbm90IGEgbW91bnQgcG9pbnQgOi0pCiAgICBkZXYxID0gczEuc3RfZGV2CiAgICBkZXYyID0gczIuc3RfZGV2CiAgICBpZiBkZXYxICE9IGRldjI6CiAgICAgICAgcmV0dXJuIFRydWUgICAgICMgcGF0aC8uLiBvbiBhIGRpZmZlcmVudCBkZXZpY2UgYXMgcGF0aAogICAgaW5vMSA9IHMxLnN0X2lubwogICAgaW5vMiA9IHMyLnN0X2lubwogICAgaWYgaW5vMSA9PSBpbm8yOgogICAgICAgIHJldHVybiBUcnVlICAgICAjIHBhdGgvLi4gaXMgdGhlIHNhbWUgaS1ub2RlIGFzIHBhdGgKICAgIHJldHVybiBGYWxzZQoKCiMgRXhwYW5kIHBhdGhzIGJlZ2lubmluZyB3aXRoICd+JyBvciAnfnVzZXInLgojICd+JyBtZWFucyAkSE9NRTsgJ351c2VyJyBtZWFucyB0aGF0IHVzZXIncyBob21lIGRpcmVjdG9yeS4KIyBJZiB0aGUgcGF0aCBkb2Vzbid0IGJlZ2luIHdpdGggJ34nLCBvciBpZiB0aGUgdXNlciBvciAkSE9NRSBpcyB1bmtub3duLAojIHRoZSBwYXRoIGlzIHJldHVybmVkIHVuY2hhbmdlZCAobGVhdmluZyBlcnJvciByZXBvcnRpbmcgdG8gd2hhdGV2ZXIKIyBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCB0aGUgZXhwYW5kZWQgcGF0aCBhcyBhcmd1bWVudCkuCiMgU2VlIGFsc28gbW9kdWxlICdnbG9iJyBmb3IgZXhwYW5zaW9uIG9mICosID8gYW5kIFsuLi5dIGluIHBhdGhuYW1lcy4KIyAoQSBmdW5jdGlvbiBzaG91bGQgYWxzbyBiZSBkZWZpbmVkIHRvIGRvIGZ1bGwgKnNoLXN0eWxlIGVudmlyb25tZW50CiMgdmFyaWFibGUgZXhwYW5zaW9uLikKCmRlZiBleHBhbmR1c2VyKHBhdGgpOgogICAgIiIiRXhwYW5kIH4gYW5kIH51c2VyIGNvbnN0cnVjdGlvbnMuICBJZiB1c2VyIG9yICRIT01FIGlzIHVua25vd24sCiAgICBkbyBub3RoaW5nLiIiIgogICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6CiAgICAgICAgdGlsZGUgPSBiJ34nCiAgICBlbHNlOgogICAgICAgIHRpbGRlID0gJ34nCiAgICBpZiBub3QgcGF0aC5zdGFydHN3aXRoKHRpbGRlKToKICAgICAgICByZXR1cm4gcGF0aAogICAgc2VwID0gX2dldF9zZXAocGF0aCkKICAgIGkgPSBwYXRoLmZpbmQoc2VwLCAxKQogICAgaWYgaSA8IDA6CiAgICAgICAgaSA9IGxlbihwYXRoKQogICAgaWYgaSA9PSAxOgogICAgICAgIGlmICdIT01FJyBub3QgaW4gb3MuZW52aXJvbjoKICAgICAgICAgICAgaW1wb3J0IHB3ZAogICAgICAgICAgICB1c2VyaG9tZSA9IHB3ZC5nZXRwd3VpZChvcy5nZXR1aWQoKSkucHdfZGlyCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdXNlcmhvbWUgPSBvcy5lbnZpcm9uWydIT01FJ10KICAgIGVsc2U6CiAgICAgICAgaW1wb3J0IHB3ZAogICAgICAgIG5hbWUgPSBwYXRoWzE6aV0KICAgICAgICBpZiBpc2luc3RhbmNlKG5hbWUsIGJ5dGVzKToKICAgICAgICAgICAgbmFtZSA9IHN0cihuYW1lLCAnQVNDSUknKQogICAgICAgIHRyeToKICAgICAgICAgICAgcHdlbnQgPSBwd2QuZ2V0cHduYW0obmFtZSkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJldHVybiBwYXRoCiAgICAgICAgdXNlcmhvbWUgPSBwd2VudC5wd19kaXIKICAgIGlmIGlzaW5zdGFuY2UocGF0aCwgYnl0ZXMpOgogICAgICAgIHVzZXJob21lID0gb3MuZnNlbmNvZGUodXNlcmhvbWUpCiAgICAgICAgcm9vdCA9IGInLycKICAgIGVsc2U6CiAgICAgICAgcm9vdCA9ICcvJwogICAgdXNlcmhvbWUgPSB1c2VyaG9tZS5yc3RyaXAocm9vdCkKICAgIHJldHVybiAodXNlcmhvbWUgKyBwYXRoW2k6XSkgb3Igcm9vdAoKCiMgRXhwYW5kIHBhdGhzIGNvbnRhaW5pbmcgc2hlbGwgdmFyaWFibGUgc3Vic3RpdHV0aW9ucy4KIyBUaGlzIGV4cGFuZHMgdGhlIGZvcm1zICR2YXJpYWJsZSBhbmQgJHt2YXJpYWJsZX0gb25seS4KIyBOb24tZXhpc3RlbnQgdmFyaWFibGVzIGFyZSBsZWZ0IHVuY2hhbmdlZC4KCl92YXJwcm9nID0gTm9uZQpfdmFycHJvZ2IgPSBOb25lCgpkZWYgZXhwYW5kdmFycyhwYXRoKToKICAgICIiIkV4cGFuZCBzaGVsbCB2YXJpYWJsZXMgb2YgZm9ybSAkdmFyIGFuZCAke3Zhcn0uICBVbmtub3duIHZhcmlhYmxlcwogICAgYXJlIGxlZnQgdW5jaGFuZ2VkLiIiIgogICAgZ2xvYmFsIF92YXJwcm9nLCBfdmFycHJvZ2IKICAgIGlmIGlzaW5zdGFuY2UocGF0aCwgYnl0ZXMpOgogICAgICAgIGlmIGInJCcgbm90IGluIHBhdGg6CiAgICAgICAgICAgIHJldHVybiBwYXRoCiAgICAgICAgaWYgbm90IF92YXJwcm9nYjoKICAgICAgICAgICAgaW1wb3J0IHJlCiAgICAgICAgICAgIF92YXJwcm9nYiA9IHJlLmNvbXBpbGUoYnInXCQoXHcrfFx7W159XSpcfSknLCByZS5BU0NJSSkKICAgICAgICBzZWFyY2ggPSBfdmFycHJvZ2Iuc2VhcmNoCiAgICAgICAgc3RhcnQgPSBiJ3snCiAgICAgICAgZW5kID0gYid9JwogICAgZWxzZToKICAgICAgICBpZiAnJCcgbm90IGluIHBhdGg6CiAgICAgICAgICAgIHJldHVybiBwYXRoCiAgICAgICAgaWYgbm90IF92YXJwcm9nOgogICAgICAgICAgICBpbXBvcnQgcmUKICAgICAgICAgICAgX3ZhcnByb2cgPSByZS5jb21waWxlKHInXCQoXHcrfFx7W159XSpcfSknLCByZS5BU0NJSSkKICAgICAgICBzZWFyY2ggPSBfdmFycHJvZy5zZWFyY2gKICAgICAgICBzdGFydCA9ICd7JwogICAgICAgIGVuZCA9ICd9JwogICAgaSA9IDAKICAgIHdoaWxlIFRydWU6CiAgICAgICAgbSA9IHNlYXJjaChwYXRoLCBpKQogICAgICAgIGlmIG5vdCBtOgogICAgICAgICAgICBicmVhawogICAgICAgIGksIGogPSBtLnNwYW4oMCkKICAgICAgICBuYW1lID0gbS5ncm91cCgxKQogICAgICAgIGlmIG5hbWUuc3RhcnRzd2l0aChzdGFydCkgYW5kIG5hbWUuZW5kc3dpdGgoZW5kKToKICAgICAgICAgICAgbmFtZSA9IG5hbWVbMTotMV0KICAgICAgICBpZiBpc2luc3RhbmNlKG5hbWUsIGJ5dGVzKToKICAgICAgICAgICAgbmFtZSA9IHN0cihuYW1lLCAnQVNDSUknKQogICAgICAgIGlmIG5hbWUgaW4gb3MuZW52aXJvbjoKICAgICAgICAgICAgdGFpbCA9IHBhdGhbajpdCiAgICAgICAgICAgIHZhbHVlID0gb3MuZW52aXJvbltuYW1lXQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHBhdGgsIGJ5dGVzKToKICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuZW5jb2RlKCdBU0NJSScpCiAgICAgICAgICAgIHBhdGggPSBwYXRoWzppXSArIHZhbHVlCiAgICAgICAgICAgIGkgPSBsZW4ocGF0aCkKICAgICAgICAgICAgcGF0aCArPSB0YWlsCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaSA9IGoKICAgIHJldHVybiBwYXRoCgoKIyBOb3JtYWxpemUgYSBwYXRoLCBlLmcuIEEvL0IsIEEvLi9CIGFuZCBBL2Zvby8uLi9CIGFsbCBiZWNvbWUgQS9CLgojIEl0IHNob3VsZCBiZSB1bmRlcnN0b29kIHRoYXQgdGhpcyBtYXkgY2hhbmdlIHRoZSBtZWFuaW5nIG9mIHRoZSBwYXRoCiMgaWYgaXQgY29udGFpbnMgc3ltYm9saWMgbGlua3MhCgpkZWYgbm9ybXBhdGgocGF0aCk6CiAgICAiIiJOb3JtYWxpemUgcGF0aCwgZWxpbWluYXRpbmcgZG91YmxlIHNsYXNoZXMsIGV0Yy4iIiIKICAgIGlmIGlzaW5zdGFuY2UocGF0aCwgYnl0ZXMpOgogICAgICAgIHNlcCA9IGInLycKICAgICAgICBlbXB0eSA9IGInJwogICAgICAgIGRvdCA9IGInLicKICAgICAgICBkb3Rkb3QgPSBiJy4uJwogICAgZWxzZToKICAgICAgICBzZXAgPSAnLycKICAgICAgICBlbXB0eSA9ICcnCiAgICAgICAgZG90ID0gJy4nCiAgICAgICAgZG90ZG90ID0gJy4uJwogICAgaWYgcGF0aCA9PSBlbXB0eToKICAgICAgICByZXR1cm4gZG90CiAgICBpbml0aWFsX3NsYXNoZXMgPSBwYXRoLnN0YXJ0c3dpdGgoc2VwKQogICAgIyBQT1NJWCBhbGxvd3Mgb25lIG9yIHR3byBpbml0aWFsIHNsYXNoZXMsIGJ1dCB0cmVhdHMgdGhyZWUgb3IgbW9yZQogICAgIyBhcyBzaW5nbGUgc2xhc2guCiAgICBpZiAoaW5pdGlhbF9zbGFzaGVzIGFuZAogICAgICAgIHBhdGguc3RhcnRzd2l0aChzZXAqMikgYW5kIG5vdCBwYXRoLnN0YXJ0c3dpdGgoc2VwKjMpKToKICAgICAgICBpbml0aWFsX3NsYXNoZXMgPSAyCiAgICBjb21wcyA9IHBhdGguc3BsaXQoc2VwKQogICAgbmV3X2NvbXBzID0gW10KICAgIGZvciBjb21wIGluIGNvbXBzOgogICAgICAgIGlmIGNvbXAgaW4gKGVtcHR5LCBkb3QpOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGlmIChjb21wICE9IGRvdGRvdCBvciAobm90IGluaXRpYWxfc2xhc2hlcyBhbmQgbm90IG5ld19jb21wcykgb3IKICAgICAgICAgICAgIChuZXdfY29tcHMgYW5kIG5ld19jb21wc1stMV0gPT0gZG90ZG90KSk6CiAgICAgICAgICAgIG5ld19jb21wcy5hcHBlbmQoY29tcCkKICAgICAgICBlbGlmIG5ld19jb21wczoKICAgICAgICAgICAgbmV3X2NvbXBzLnBvcCgpCiAgICBjb21wcyA9IG5ld19jb21wcwogICAgcGF0aCA9IHNlcC5qb2luKGNvbXBzKQogICAgaWYgaW5pdGlhbF9zbGFzaGVzOgogICAgICAgICNmaXhtZSBieXRob24KICAgICAgICAjcGF0aCA9IHNlcCppbml0aWFsX3NsYXNoZXMgKyBwYXRoCiAgICAgICAgcGF0aCA9IHNlcCppbnQoaW5pdGlhbF9zbGFzaGVzKSArIHBhdGgKICAgIHJldHVybiBwYXRoIG9yIGRvdAoKCmRlZiBhYnNwYXRoKHBhdGgpOgogICAgIiIiUmV0dXJuIGFuIGFic29sdXRlIHBhdGguIiIiCiAgICBpZiBub3QgaXNhYnMocGF0aCk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6CiAgICAgICAgICAgIGN3ZCA9IG9zLmdldGN3ZGIoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGN3ZCA9IG9zLmdldGN3ZCgpCiAgICAgICAgcGF0aCA9IGpvaW4oY3dkLCBwYXRoKQogICAgcmV0dXJuIG5vcm1wYXRoKHBhdGgpCgoKIyBSZXR1cm4gYSBjYW5vbmljYWwgcGF0aCAoaS5lLiB0aGUgYWJzb2x1dGUgbG9jYXRpb24gb2YgYSBmaWxlIG9uIHRoZQojIGZpbGVzeXN0ZW0pLgoKZGVmIHJlYWxwYXRoKGZpbGVuYW1lKToKICAgICIiIlJldHVybiB0aGUgY2Fub25pY2FsIHBhdGggb2YgdGhlIHNwZWNpZmllZCBmaWxlbmFtZSwgZWxpbWluYXRpbmcgYW55CnN5bWJvbGljIGxpbmtzIGVuY291bnRlcmVkIGluIHRoZSBwYXRoLiIiIgogICAgaWYgaXNpbnN0YW5jZShmaWxlbmFtZSwgYnl0ZXMpOgogICAgICAgIHNlcCA9IGInLycKICAgICAgICBlbXB0eSA9IGInJwogICAgZWxzZToKICAgICAgICBzZXAgPSAnLycKICAgICAgICBlbXB0eSA9ICcnCiAgICBpZiBpc2FicyhmaWxlbmFtZSk6CiAgICAgICAgYml0cyA9IFtzZXBdICsgZmlsZW5hbWUuc3BsaXQoc2VwKVsxOl0KICAgIGVsc2U6CiAgICAgICAgYml0cyA9IFtlbXB0eV0gKyBmaWxlbmFtZS5zcGxpdChzZXApCgogICAgZm9yIGkgaW4gcmFuZ2UoMiwgbGVuKGJpdHMpKzEpOgogICAgICAgIGNvbXBvbmVudCA9IGpvaW4oKmJpdHNbMDppXSkKICAgICAgICAjIFJlc29sdmUgc3ltYm9saWMgbGlua3MuCiAgICAgICAgaWYgaXNsaW5rKGNvbXBvbmVudCk6CiAgICAgICAgICAgIHJlc29sdmVkID0gX3Jlc29sdmVfbGluayhjb21wb25lbnQpCiAgICAgICAgICAgIGlmIHJlc29sdmVkIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjIEluZmluaXRlIGxvb3AgLS0gcmV0dXJuIG9yaWdpbmFsIGNvbXBvbmVudCArIHJlc3Qgb2YgdGhlIHBhdGgKICAgICAgICAgICAgICAgIHJldHVybiBhYnNwYXRoKGpvaW4oKihbY29tcG9uZW50XSArIGJpdHNbaTpdKSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBuZXdwYXRoID0gam9pbigqKFtyZXNvbHZlZF0gKyBiaXRzW2k6XSkpCiAgICAgICAgICAgICAgICByZXR1cm4gcmVhbHBhdGgobmV3cGF0aCkKCiAgICByZXR1cm4gYWJzcGF0aChmaWxlbmFtZSkKCgpkZWYgX3Jlc29sdmVfbGluayhwYXRoKToKICAgICIiIkludGVybmFsIGhlbHBlciBmdW5jdGlvbi4gIFRha2VzIGEgcGF0aCBhbmQgZm9sbG93cyBzeW1saW5rcwogICAgdW50aWwgd2UgZWl0aGVyIGFycml2ZSBhdCBzb21ldGhpbmcgdGhhdCBpc24ndCBhIHN5bWxpbmssIG9yCiAgICBlbmNvdW50ZXIgYSBwYXRoIHdlJ3ZlIHNlZW4gYmVmb3JlIChtZWFuaW5nIHRoYXQgdGhlcmUncyBhIGxvb3ApLgogICAgIiIiCiAgICBwYXRoc19zZWVuID0gc2V0KCkKICAgIHdoaWxlIGlzbGluayhwYXRoKToKICAgICAgICBpZiBwYXRoIGluIHBhdGhzX3NlZW46CiAgICAgICAgICAgICMgQWxyZWFkeSBzZWVuIHRoaXMgcGF0aCwgc28gd2UgbXVzdCBoYXZlIGEgc3ltbGluayBsb29wCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgcGF0aHNfc2Vlbi5hZGQocGF0aCkKICAgICAgICAjIFJlc29sdmUgd2hlcmUgdGhlIGxpbmsgcG9pbnRzIHRvCiAgICAgICAgcmVzb2x2ZWQgPSBvcy5yZWFkbGluayhwYXRoKQogICAgICAgIGlmIG5vdCBpc2FicyhyZXNvbHZlZCk6CiAgICAgICAgICAgIGRpciA9IGRpcm5hbWUocGF0aCkKICAgICAgICAgICAgcGF0aCA9IG5vcm1wYXRoKGpvaW4oZGlyLCByZXNvbHZlZCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGF0aCA9IG5vcm1wYXRoKHJlc29sdmVkKQogICAgcmV0dXJuIHBhdGgKCnN1cHBvcnRzX3VuaWNvZGVfZmlsZW5hbWVzID0gKHN5cy5wbGF0Zm9ybSA9PSAnZGFyd2luJykKCmRlZiByZWxwYXRoKHBhdGgsIHN0YXJ0PU5vbmUpOgogICAgIiIiUmV0dXJuIGEgcmVsYXRpdmUgdmVyc2lvbiBvZiBhIHBhdGgiIiIKCiAgICBpZiBub3QgcGF0aDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJubyBwYXRoIHNwZWNpZmllZCIpCgogICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6CiAgICAgICAgY3VyZGlyID0gYicuJwogICAgICAgIHNlcCA9IGInLycKICAgICAgICBwYXJkaXIgPSBiJy4uJwogICAgZWxzZToKICAgICAgICBjdXJkaXIgPSAnLicKICAgICAgICBzZXAgPSAnLycKICAgICAgICBwYXJkaXIgPSAnLi4nCgogICAgaWYgc3RhcnQgaXMgTm9uZToKICAgICAgICBzdGFydCA9IGN1cmRpcgoKICAgIHN0YXJ0X2xpc3QgPSBbeCBmb3IgeCBpbiBhYnNwYXRoKHN0YXJ0KS5zcGxpdChzZXApIGlmIHhdCiAgICBwYXRoX2xpc3QgPSBbeCBmb3IgeCBpbiBhYnNwYXRoKHBhdGgpLnNwbGl0KHNlcCkgaWYgeF0KCiAgICAjIFdvcmsgb3V0IGhvdyBtdWNoIG9mIHRoZSBmaWxlcGF0aCBpcyBzaGFyZWQgYnkgc3RhcnQgYW5kIHBhdGguCiAgICBpID0gbGVuKGNvbW1vbnByZWZpeChbc3RhcnRfbGlzdCwgcGF0aF9saXN0XSkpCgogICAgcmVsX2xpc3QgPSBbcGFyZGlyXSAqIChsZW4oc3RhcnRfbGlzdCktaSkgKyBwYXRoX2xpc3RbaTpdCiAgICBpZiBub3QgcmVsX2xpc3Q6CiAgICAgICAgcmV0dXJuIGN1cmRpcgogICAgcmV0dXJuIGpvaW4oKnJlbF9saXN0KQo=',
'/Lib/struct.py':'X19hbGxfXyA9IFsKICAgICMgRnVuY3Rpb25zCiAgICAnY2FsY3NpemUnLCAncGFjaycsICdwYWNrX2ludG8nLCAndW5wYWNrJywgJ3VucGFja19mcm9tJywKCiAgICAjIENsYXNzZXMKICAgICdTdHJ1Y3QnLAoKICAgICMgRXhjZXB0aW9ucwogICAgJ2Vycm9yJwogICAgXQoKZnJvbSBfc3RydWN0IGltcG9ydCAqCmZyb20gX3N0cnVjdCBpbXBvcnQgX2NsZWFyY2FjaGUKZnJvbSBfc3RydWN0IGltcG9ydCBfX2RvY19fCg==',
'/Lib/_weakref.py':'Y2xhc3MgUHJveHlUeXBlOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLG9iaik6CiAgICAgICAgc2VsZi5vYmogPSBvYmoKCkNhbGxhYmxlUHJveHlUeXBlID0gUHJveHlUeXBlClByb3h5VHlwZXMgPSBbUHJveHlUeXBlLENhbGxhYmxlUHJveHlUeXBlXQoKY2xhc3MgUmVmZXJlbmNlVHlwZToKCiAgICBkZWYgX19pbml0X18oc2VsZixvYmosY2FsbGJhY2spOgogICAgICAgIHNlbGYub2JqID0gb2JqCiAgICAgICAgc2VsZi5jYWxsYmFjayA9IGNhbGxiYWNrCgpjbGFzcyByZWY6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsb2JqLGNhbGxiYWNrPU5vbmUpOgogICAgICAgIHNlbGYub2JqID0gUmVmZXJlbmNlVHlwZShvYmosY2FsbGJhY2spCiAgICAgICAgc2VsZi5jYWxsYmFjaz1jYWxsYmFjawoKZGVmIGdldHdlYWtyZWZjb3VudChvYmopOgogICAgcmV0dXJuIDEKCmRlZiBnZXR3ZWFrcmVmcyhvYmopOgogICAgcmV0dXJuIG9iagoKCmRlZiBwcm94eShvYmosY2FsbGJhY2spOgogICAgcmV0dXJuIFByb3h5VHlwZShvYmopCgo=',
'/Lib/_collections.py':'IyAiSGlnaCBwZXJmb3JtYW5jZSBkYXRhIHN0cnVjdHVyZXMKIyAiCiMgY29waWVkIGZyb20gcHlweSByZXBvCgojCiMgQ29waWVkIGFuZCBjb21wbGV0ZWQgZnJvbSB0aGUgc2FuZGJveCBvZiBDUHl0aG9uCiMgICAobm9uZGlzdC9zYW5kYm94L2NvbGxlY3Rpb25zL3B5ZGVxdWUucHkgcmV2IDEuMSwgUmF5bW9uZCBIZXR0aW5nZXIpCiMKIyBlZGl0ZWQgZm9yIEJyeXRob24gbGluZSA1NTggOiBjYXRjaCBJbXBvcnRFcnJvciBpbnN0ZWFkIG9mIEF0dHJpYnV0ZUVycm9yCgppbXBvcnQgb3BlcmF0b3IKI3RyeToKIyAgICBmcm9tIHRocmVhZCBpbXBvcnQgZ2V0X2lkZW50IGFzIF90aHJlYWRfaWRlbnQKI2V4Y2VwdCBJbXBvcnRFcnJvcjoKZGVmIF90aHJlYWRfaWRlbnQoKToKICAgIHJldHVybiAtMQoKCm4gPSAzMApMRlRMTksgPSBuClJHVExOSyA9IG4rMQpCTE9DS1NJWiA9IG4rMgoKIyBUaGUgZGVxdWUncyBzaXplIGxpbWl0IGlzIGQubWF4bGVuLiAgVGhlIGxpbWl0IGNhbiBiZSB6ZXJvIG9yIHBvc2l0aXZlLCBvcgojIE5vbmUuICBBZnRlciBhbiBpdGVtIGlzIGFkZGVkIHRvIGEgZGVxdWUsIHdlIGNoZWNrIHRvIHNlZSBpZiB0aGUgc2l6ZSBoYXMKIyBncm93biBwYXN0IHRoZSBsaW1pdC4gSWYgaXQgaGFzLCB3ZSBnZXQgdGhlIHNpemUgYmFjayBkb3duIHRvIHRoZSBsaW1pdCBieQojIHBvcHBpbmcgYW4gaXRlbSBvZmYgb2YgdGhlIG9wcG9zaXRlIGVuZC4gIFRoZSBtZXRob2RzIHRoYXQgY2FuIHRyaWdnZXIgdGhpcwojIGFyZSBhcHBlbmQoKSwgYXBwZW5kbGVmdCgpLCBleHRlbmQoKSwgYW5kIGV4dGVuZGxlZnQoKS4KCiNjbGFzcyBkZXF1ZShvYmplY3QpOgpjbGFzcyBkZXF1ZToKCiAgICBkZWYgX19uZXdfXyhjbHMsIGl0ZXJhYmxlPSgpLCAqYXJncywgKiprdyk6CiAgICAgICAgI2ZpeG1lCiAgICAgICAgI3NlbGYgPSBzdXBlcihkZXF1ZSwgY2xzKS5fX25ld19fKGNscywgKmFyZ3MsICoqa3cpCiAgICAgICAgc2VsZj1vYmplY3QuX19uZXdfXyhjbHMsICphcmdzLCAqKmt3KQogICAgICAgIHNlbGYuY2xlYXIoKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZXJhYmxlPSgpLCBtYXhsZW49Tm9uZSk6CiAgICAgICAgb2JqZWN0Ll9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5jbGVhcigpCiAgICAgICAgaWYgbWF4bGVuIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBtYXhsZW4gPCAwOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibWF4bGVuIG11c3QgYmUgbm9uLW5lZ2F0aXZlIikKICAgICAgICBzZWxmLl9tYXhsZW4gPSBtYXhsZW4KICAgICAgICBhZGQgPSBzZWxmLmFwcGVuZAogICAgICAgIGZvciBlbGVtIGluIGl0ZXJhYmxlOgogICAgICAgICAgICBhZGQoZWxlbSkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBtYXhsZW4oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX21heGxlbgoKICAgIGRlZiBjbGVhcihzZWxmKToKICAgICAgICBzZWxmLnJpZ2h0ID0gc2VsZi5sZWZ0ID0gW05vbmVdICogQkxPQ0tTSVoKICAgICAgICBzZWxmLnJpZ2h0bmR4ID0gbi8vMiAgICMgcG9pbnRzIHRvIGxhc3Qgd3JpdHRlbiBlbGVtZW50CiAgICAgICAgc2VsZi5sZWZ0bmR4ID0gbi8vMisxCiAgICAgICAgc2VsZi5sZW5ndGggPSAwCiAgICAgICAgc2VsZi5zdGF0ZSA9IDAKCiAgICBkZWYgYXBwZW5kKHNlbGYsIHgpOgogICAgICAgIHNlbGYuc3RhdGUgKz0gMQogICAgICAgIHNlbGYucmlnaHRuZHggKz0gMQogICAgICAgIGlmIHNlbGYucmlnaHRuZHggPT0gbjoKICAgICAgICAgICAgbmV3YmxvY2sgPSBbTm9uZV0gKiBCTE9DS1NJWgogICAgICAgICAgICBzZWxmLnJpZ2h0W1JHVExOS10gPSBuZXdibG9jawogICAgICAgICAgICBuZXdibG9ja1tMRlRMTktdID0gc2VsZi5yaWdodAogICAgICAgICAgICBzZWxmLnJpZ2h0ID0gbmV3YmxvY2sKICAgICAgICAgICAgc2VsZi5yaWdodG5keCA9IDAKICAgICAgICBzZWxmLmxlbmd0aCArPSAxCiAgICAgICAgc2VsZi5yaWdodFtzZWxmLnJpZ2h0bmR4XSA9IHgKICAgICAgICBpZiBzZWxmLm1heGxlbiBpcyBub3QgTm9uZSBhbmQgc2VsZi5sZW5ndGggPiBzZWxmLm1heGxlbjoKICAgICAgICAgICAgc2VsZi5wb3BsZWZ0KCkKCiAgICBkZWYgYXBwZW5kbGVmdChzZWxmLCB4KToKICAgICAgICBzZWxmLnN0YXRlICs9IDEKICAgICAgICBzZWxmLmxlZnRuZHggLT0gMQogICAgICAgIGlmIHNlbGYubGVmdG5keCA9PSAtMToKICAgICAgICAgICAgbmV3YmxvY2sgPSBbTm9uZV0gKiBCTE9DS1NJWgogICAgICAgICAgICBzZWxmLmxlZnRbTEZUTE5LXSA9IG5ld2Jsb2NrCiAgICAgICAgICAgIG5ld2Jsb2NrW1JHVExOS10gPSBzZWxmLmxlZnQKICAgICAgICAgICAgc2VsZi5sZWZ0ID0gbmV3YmxvY2sKICAgICAgICAgICAgc2VsZi5sZWZ0bmR4ID0gbi0xCiAgICAgICAgc2VsZi5sZW5ndGggKz0gMQogICAgICAgIHNlbGYubGVmdFtzZWxmLmxlZnRuZHhdID0geAogICAgICAgIGlmIHNlbGYubWF4bGVuIGlzIG5vdCBOb25lIGFuZCBzZWxmLmxlbmd0aCA+IHNlbGYubWF4bGVuOgogICAgICAgICAgICBzZWxmLnBvcCgpCgogICAgZGVmIGV4dGVuZChzZWxmLCBpdGVyYWJsZSk6CiAgICAgICAgaWYgaXRlcmFibGUgaXMgc2VsZjoKICAgICAgICAgICAgaXRlcmFibGUgPSBsaXN0KGl0ZXJhYmxlKQogICAgICAgIGZvciBlbGVtIGluIGl0ZXJhYmxlOgogICAgICAgICAgICBzZWxmLmFwcGVuZChlbGVtKQoKICAgIGRlZiBleHRlbmRsZWZ0KHNlbGYsIGl0ZXJhYmxlKToKICAgICAgICBpZiBpdGVyYWJsZSBpcyBzZWxmOgogICAgICAgICAgICBpdGVyYWJsZSA9IGxpc3QoaXRlcmFibGUpCiAgICAgICAgZm9yIGVsZW0gaW4gaXRlcmFibGU6CiAgICAgICAgICAgIHNlbGYuYXBwZW5kbGVmdChlbGVtKQoKICAgIGRlZiBwb3Aoc2VsZik6CiAgICAgICAgaWYgc2VsZi5sZWZ0IGlzIHNlbGYucmlnaHQgYW5kIHNlbGYubGVmdG5keCA+IHNlbGYucmlnaHRuZHg6CiAgICAgICAgICAgICNyYWlzZSBJbmRleEVycm9yLCAicG9wIGZyb20gYW4gZW1wdHkgZGVxdWUiICAjIGRvZXMgbm90IHdvcmsgaW4gYnJ5dGhvbgogICAgICAgICAgICByYWlzZSBJbmRleEVycm9yKCJwb3AgZnJvbSBhbiBlbXB0eSBkZXF1ZSIpCiAgICAgICAgeCA9IHNlbGYucmlnaHRbc2VsZi5yaWdodG5keF0KICAgICAgICBzZWxmLnJpZ2h0W3NlbGYucmlnaHRuZHhdID0gTm9uZQogICAgICAgIHNlbGYubGVuZ3RoIC09IDEKICAgICAgICBzZWxmLnJpZ2h0bmR4IC09IDEKICAgICAgICBzZWxmLnN0YXRlICs9IDEKICAgICAgICBpZiBzZWxmLnJpZ2h0bmR4ID09IC0xOgogICAgICAgICAgICBwcmV2YmxvY2sgPSBzZWxmLnJpZ2h0W0xGVExOS10KICAgICAgICAgICAgaWYgcHJldmJsb2NrIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjIHRoZSBkZXF1ZSBoYXMgYmVjb21lIGVtcHR5OyByZWNlbnRlciBpbnN0ZWFkIG9mIGZyZWVpbmcgYmxvY2sKICAgICAgICAgICAgICAgIHNlbGYucmlnaHRuZHggPSBuLy8yCiAgICAgICAgICAgICAgICBzZWxmLmxlZnRuZHggPSBuLy8yKzEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByZXZibG9ja1tSR1RMTktdID0gTm9uZQogICAgICAgICAgICAgICAgc2VsZi5yaWdodFtMRlRMTktdID0gTm9uZQogICAgICAgICAgICAgICAgc2VsZi5yaWdodCA9IHByZXZibG9jawogICAgICAgICAgICAgICAgc2VsZi5yaWdodG5keCA9IG4tMQogICAgICAgIHJldHVybiB4CgogICAgZGVmIHBvcGxlZnQoc2VsZik6CiAgICAgICAgaWYgc2VsZi5sZWZ0IGlzIHNlbGYucmlnaHQgYW5kIHNlbGYubGVmdG5keCA+IHNlbGYucmlnaHRuZHg6CiAgICAgICAgICAgICNyYWlzZSBJbmRleEVycm9yLCAicG9wIGZyb20gYW4gZW1wdHkgZGVxdWUiCiAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoInBvcCBmcm9tIGFuIGVtcHR5IGRlcXVlIikKICAgICAgICB4ID0gc2VsZi5sZWZ0W3NlbGYubGVmdG5keF0KICAgICAgICBzZWxmLmxlZnRbc2VsZi5sZWZ0bmR4XSA9IE5vbmUKICAgICAgICBzZWxmLmxlbmd0aCAtPSAxCiAgICAgICAgc2VsZi5sZWZ0bmR4ICs9IDEKICAgICAgICBzZWxmLnN0YXRlICs9IDEKICAgICAgICBpZiBzZWxmLmxlZnRuZHggPT0gbjoKICAgICAgICAgICAgcHJldmJsb2NrID0gc2VsZi5sZWZ0W1JHVExOS10KICAgICAgICAgICAgaWYgcHJldmJsb2NrIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjIHRoZSBkZXF1ZSBoYXMgYmVjb21lIGVtcHR5OyByZWNlbnRlciBpbnN0ZWFkIG9mIGZyZWVpbmcgYmxvY2sKICAgICAgICAgICAgICAgIHNlbGYucmlnaHRuZHggPSBuLy8yCiAgICAgICAgICAgICAgICBzZWxmLmxlZnRuZHggPSBuLy8yKzEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByZXZibG9ja1tMRlRMTktdID0gTm9uZQogICAgICAgICAgICAgICAgc2VsZi5sZWZ0W1JHVExOS10gPSBOb25lCiAgICAgICAgICAgICAgICBzZWxmLmxlZnQgPSBwcmV2YmxvY2sKICAgICAgICAgICAgICAgIHNlbGYubGVmdG5keCA9IDAKICAgICAgICByZXR1cm4geAoKICAgIGRlZiBjb3VudChzZWxmLCB2YWx1ZSk6CiAgICAgICAgYyA9IDAKICAgICAgICBmb3IgaXRlbSBpbiBzZWxmOgogICAgICAgICAgICBpZiBpdGVtID09IHZhbHVlOgogICAgICAgICAgICAgICAgYyArPSAxCiAgICAgICAgcmV0dXJuIGMKCiAgICBkZWYgcmVtb3ZlKHNlbGYsIHZhbHVlKToKICAgICAgICAjIE5lZWQgdG8gYmUgZGVmZW5zaXZlIGZvciBtdXRhdGluZyBjb21wYXJpc29ucwogICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihzZWxmKSk6CiAgICAgICAgICAgIGlmIHNlbGZbaV0gPT0gdmFsdWU6CiAgICAgICAgICAgICAgICBkZWwgc2VsZltpXQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZGVxdWUucmVtb3ZlKHgpOiB4IG5vdCBpbiBkZXF1ZSIpCgogICAgZGVmIHJvdGF0ZShzZWxmLCBuPTEpOgogICAgICAgIGxlbmd0aCA9IGxlbihzZWxmKQogICAgICAgIGlmIGxlbmd0aCA9PSAwOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBoYWxmbGVuID0gKGxlbmd0aCsxKSA+PiAxCiAgICAgICAgaWYgbiA+IGhhbGZsZW4gb3IgbiA8IC1oYWxmbGVuOgogICAgICAgICAgICBuICU9IGxlbmd0aAogICAgICAgICAgICBpZiBuID4gaGFsZmxlbjoKICAgICAgICAgICAgICAgIG4gLT0gbGVuZ3RoCiAgICAgICAgICAgIGVsaWYgbiA8IC1oYWxmbGVuOgogICAgICAgICAgICAgICAgbiArPSBsZW5ndGgKICAgICAgICB3aGlsZSBuID4gMDoKICAgICAgICAgICAgc2VsZi5hcHBlbmRsZWZ0KHNlbGYucG9wKCkpCiAgICAgICAgICAgIG4gLT0gMQogICAgICAgIHdoaWxlIG4gPCAwOgogICAgICAgICAgICBzZWxmLmFwcGVuZChzZWxmLnBvcGxlZnQoKSkKICAgICAgICAgICAgbiArPSAxCgogICAgZGVmIHJldmVyc2Uoc2VsZik6CiAgICAgICAgInJldmVyc2UgKklOIFBMQUNFKiIKICAgICAgICBsZWZ0YmxvY2sgPSBzZWxmLmxlZnQKICAgICAgICByaWdodGJsb2NrID0gc2VsZi5yaWdodAogICAgICAgIGxlZnRpbmRleCA9IHNlbGYubGVmdG5keAogICAgICAgIHJpZ2h0aW5kZXggPSBzZWxmLnJpZ2h0bmR4CiAgICAgICAgZm9yIGkgaW4gcmFuZ2Uoc2VsZi5sZW5ndGggLy8gMik6CiAgICAgICAgICAgICMgVmFsaWRhdGUgdGhhdCBwb2ludGVycyBoYXZlbid0IG1ldCBpbiB0aGUgbWlkZGxlCiAgICAgICAgICAgIGFzc2VydCBsZWZ0YmxvY2sgIT0gcmlnaHRibG9jayBvciBsZWZ0aW5kZXggPCByaWdodGluZGV4CgogICAgICAgICAgICAjIFN3YXAKICAgICAgICAgICAgKHJpZ2h0YmxvY2tbcmlnaHRpbmRleF0sIGxlZnRibG9ja1tsZWZ0aW5kZXhdKSA9ICgKICAgICAgICAgICAgICAgIGxlZnRibG9ja1tsZWZ0aW5kZXhdLCByaWdodGJsb2NrW3JpZ2h0aW5kZXhdKQoKICAgICAgICAgICAgIyBBZHZhbmNlIGxlZnQgYmxvY2svaW5kZXggcGFpcgogICAgICAgICAgICBsZWZ0aW5kZXggKz0gMQogICAgICAgICAgICBpZiBsZWZ0aW5kZXggPT0gbjoKICAgICAgICAgICAgICAgIGxlZnRibG9jayA9IGxlZnRibG9ja1tSR1RMTktdCiAgICAgICAgICAgICAgICBhc3NlcnQgbGVmdGJsb2NrIGlzIG5vdCBOb25lCiAgICAgICAgICAgICAgICBsZWZ0aW5kZXggPSAwCgogICAgICAgICAgICAjIFN0ZXAgYmFja3dhcmRzIHdpdGggdGhlIHJpZ2h0IGJsb2NrL2luZGV4IHBhaXIKICAgICAgICAgICAgcmlnaHRpbmRleCAtPSAxCiAgICAgICAgICAgIGlmIHJpZ2h0aW5kZXggPT0gLTE6CiAgICAgICAgICAgICAgICByaWdodGJsb2NrID0gcmlnaHRibG9ja1tMRlRMTktdCiAgICAgICAgICAgICAgICBhc3NlcnQgcmlnaHRibG9jayBpcyBub3QgTm9uZQogICAgICAgICAgICAgICAgcmlnaHRpbmRleCA9IG4gLSAxCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHRocmVhZGxvY2FsYXR0ciA9ICdfX3JlcHInICsgc3RyKF90aHJlYWRfaWRlbnQoKSkKICAgICAgICBpZiB0aHJlYWRsb2NhbGF0dHIgaW4gc2VsZi5fX2RpY3RfXzoKICAgICAgICAgICAgcmV0dXJuICdkZXF1ZShbLi4uXSknCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5fX2RpY3RfX1t0aHJlYWRsb2NhbGF0dHJdID0gVHJ1ZQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiBzZWxmLm1heGxlbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2RlcXVlKCVyLCBtYXhsZW49JXMpJyAlIChsaXN0KHNlbGYpLCBzZWxmLm1heGxlbikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdkZXF1ZSglciknICUgKGxpc3Qoc2VsZiksKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgZGVsIHNlbGYuX19kaWN0X19bdGhyZWFkbG9jYWxhdHRyXQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gZGVxdWVfaXRlcmF0b3Ioc2VsZiwgc2VsZi5faXRlcl9pbXBsKQoKICAgIGRlZiBfaXRlcl9pbXBsKHNlbGYsIG9yaWdpbmFsX3N0YXRlLCBnaXZldXApOgogICAgICAgIGlmIHNlbGYuc3RhdGUgIT0gb3JpZ2luYWxfc3RhdGU6CiAgICAgICAgICAgIGdpdmV1cCgpCiAgICAgICAgYmxvY2sgPSBzZWxmLmxlZnQKICAgICAgICB3aGlsZSBibG9jazoKICAgICAgICAgICAgbCwgciA9IDAsIG4KICAgICAgICAgICAgaWYgYmxvY2sgaXMgc2VsZi5sZWZ0OgogICAgICAgICAgICAgICAgbCA9IHNlbGYubGVmdG5keAogICAgICAgICAgICBpZiBibG9jayBpcyBzZWxmLnJpZ2h0OgogICAgICAgICAgICAgICAgciA9IHNlbGYucmlnaHRuZHggKyAxCiAgICAgICAgICAgIGZvciBlbGVtIGluIGJsb2NrW2w6cl06CiAgICAgICAgICAgICAgICB5aWVsZCBlbGVtCiAgICAgICAgICAgICAgICBpZiBzZWxmLnN0YXRlICE9IG9yaWdpbmFsX3N0YXRlOgogICAgICAgICAgICAgICAgICAgIGdpdmV1cCgpCiAgICAgICAgICAgIGJsb2NrID0gYmxvY2tbUkdUTE5LXQoKICAgIGRlZiBfX3JldmVyc2VkX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGRlcXVlX2l0ZXJhdG9yKHNlbGYsIHNlbGYuX3JldmVyc2VkX2ltcGwpCgogICAgZGVmIF9yZXZlcnNlZF9pbXBsKHNlbGYsIG9yaWdpbmFsX3N0YXRlLCBnaXZldXApOgogICAgICAgIGlmIHNlbGYuc3RhdGUgIT0gb3JpZ2luYWxfc3RhdGU6CiAgICAgICAgICAgIGdpdmV1cCgpCiAgICAgICAgYmxvY2sgPSBzZWxmLnJpZ2h0CiAgICAgICAgd2hpbGUgYmxvY2s6CiAgICAgICAgICAgIGwsIHIgPSAwLCBuCiAgICAgICAgICAgIGlmIGJsb2NrIGlzIHNlbGYubGVmdDoKICAgICAgICAgICAgICAgIGwgPSBzZWxmLmxlZnRuZHgKICAgICAgICAgICAgaWYgYmxvY2sgaXMgc2VsZi5yaWdodDoKICAgICAgICAgICAgICAgIHIgPSBzZWxmLnJpZ2h0bmR4ICsgMQogICAgICAgICAgICBmb3IgZWxlbSBpbiByZXZlcnNlZChibG9ja1tsOnJdKToKICAgICAgICAgICAgICAgIHlpZWxkIGVsZW0KICAgICAgICAgICAgICAgIGlmIHNlbGYuc3RhdGUgIT0gb3JpZ2luYWxfc3RhdGU6CiAgICAgICAgICAgICAgICAgICAgZ2l2ZXVwKCkKICAgICAgICAgICAgYmxvY2sgPSBibG9ja1tMRlRMTktdCgogICAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgICAgI3N1bSA9IDAKICAgICAgICAjYmxvY2sgPSBzZWxmLmxlZnQKICAgICAgICAjd2hpbGUgYmxvY2s6CiAgICAgICAgIyAgICBzdW0gKz0gbgogICAgICAgICMgICAgYmxvY2sgPSBibG9ja1tSR1RMTktdCiAgICAgICAgI3JldHVybiBzdW0gKyBzZWxmLnJpZ2h0bmR4IC0gc2VsZi5sZWZ0bmR4ICsgMSAtIG4KICAgICAgICByZXR1cm4gc2VsZi5sZW5ndGgKCiAgICBkZWYgX19nZXRyZWYoc2VsZiwgaW5kZXgpOgogICAgICAgIGlmIGluZGV4ID49IDA6CiAgICAgICAgICAgIGJsb2NrID0gc2VsZi5sZWZ0CiAgICAgICAgICAgIHdoaWxlIGJsb2NrOgogICAgICAgICAgICAgICAgbCwgciA9IDAsIG4KICAgICAgICAgICAgICAgIGlmIGJsb2NrIGlzIHNlbGYubGVmdDoKICAgICAgICAgICAgICAgICAgICBsID0gc2VsZi5sZWZ0bmR4CiAgICAgICAgICAgICAgICBpZiBibG9jayBpcyBzZWxmLnJpZ2h0OgogICAgICAgICAgICAgICAgICAgIHIgPSBzZWxmLnJpZ2h0bmR4ICsgMQogICAgICAgICAgICAgICAgc3BhbiA9IHItbAogICAgICAgICAgICAgICAgaWYgaW5kZXggPCBzcGFuOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBibG9jaywgbCtpbmRleAogICAgICAgICAgICAgICAgaW5kZXggLT0gc3BhbgogICAgICAgICAgICAgICAgYmxvY2sgPSBibG9ja1tSR1RMTktdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYmxvY2sgPSBzZWxmLnJpZ2h0CiAgICAgICAgICAgIHdoaWxlIGJsb2NrOgogICAgICAgICAgICAgICAgbCwgciA9IDAsIG4KICAgICAgICAgICAgICAgIGlmIGJsb2NrIGlzIHNlbGYubGVmdDoKICAgICAgICAgICAgICAgICAgICBsID0gc2VsZi5sZWZ0bmR4CiAgICAgICAgICAgICAgICBpZiBibG9jayBpcyBzZWxmLnJpZ2h0OgogICAgICAgICAgICAgICAgICAgIHIgPSBzZWxmLnJpZ2h0bmR4ICsgMQogICAgICAgICAgICAgICAgbmVnYXRpdmVfc3BhbiA9IGwtcgogICAgICAgICAgICAgICAgaWYgaW5kZXggPj0gbmVnYXRpdmVfc3BhbjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2ssIHIraW5kZXgKICAgICAgICAgICAgICAgIGluZGV4IC09IG5lZ2F0aXZlX3NwYW4KICAgICAgICAgICAgICAgIGJsb2NrID0gYmxvY2tbTEZUTE5LXQogICAgICAgIHJhaXNlIEluZGV4RXJyb3IoImRlcXVlIGluZGV4IG91dCBvZiByYW5nZSIpCgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGluZGV4KToKICAgICAgICBibG9jaywgaW5kZXggPSBzZWxmLl9fZ2V0cmVmKGluZGV4KQogICAgICAgIHJldHVybiBibG9ja1tpbmRleF0KCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwgaW5kZXgsIHZhbHVlKToKICAgICAgICBibG9jaywgaW5kZXggPSBzZWxmLl9fZ2V0cmVmKGluZGV4KQogICAgICAgIGJsb2NrW2luZGV4XSA9IHZhbHVlCgogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGluZGV4KToKICAgICAgICBsZW5ndGggPSBsZW4oc2VsZikKICAgICAgICBpZiBpbmRleCA+PSAwOgogICAgICAgICAgICBpZiBpbmRleCA+PSBsZW5ndGg6CiAgICAgICAgICAgICAgICByYWlzZSBJbmRleEVycm9yKCJkZXF1ZSBpbmRleCBvdXQgb2YgcmFuZ2UiKQogICAgICAgICAgICBzZWxmLnJvdGF0ZSgtaW5kZXgpCiAgICAgICAgICAgIHNlbGYucG9wbGVmdCgpCiAgICAgICAgICAgIHNlbGYucm90YXRlKGluZGV4KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICNpbmRleCA9IH5pbmRleCAgICAgICN0b2RvIHVudGlsIGJpdCB3aXNlIG9wZXJhdG9ycyBhcmUgaW4gYnl0aG9uCiAgICAgICAgICAgIGluZGV4PSBpbmRleF4oMioqMzEpCiAgICAgICAgICAgIGlmIGluZGV4ID49IGxlbmd0aDoKICAgICAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoImRlcXVlIGluZGV4IG91dCBvZiByYW5nZSIpCiAgICAgICAgICAgIHNlbGYucm90YXRlKGluZGV4KQogICAgICAgICAgICBzZWxmLnBvcCgpCiAgICAgICAgICAgIHNlbGYucm90YXRlKC1pbmRleCkKCiAgICBkZWYgX19yZWR1Y2VfZXhfXyhzZWxmLCBwcm90byk6CiAgICAgICAgcmV0dXJuIHR5cGUoc2VsZiksIChsaXN0KHNlbGYpLCBzZWxmLm1heGxlbikKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgI3JhaXNlIFR5cGVFcnJvciwgImRlcXVlIG9iamVjdHMgYXJlIHVuaGFzaGFibGUiCiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJkZXF1ZSBvYmplY3RzIGFyZSB1bmhhc2hhYmxlIikKCiAgICBkZWYgX19jb3B5X18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKHNlbGYsIHNlbGYubWF4bGVuKQoKICAgICMgWFhYIG1ha2UgY29tcGFyaXNvbiBtb3JlIGVmZmljaWVudAogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgZGVxdWUpOgogICAgICAgICAgICByZXR1cm4gbGlzdChzZWxmKSA9PSBsaXN0KG90aGVyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX25lX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRlcXVlKToKICAgICAgICAgICAgcmV0dXJuIGxpc3Qoc2VsZikgIT0gbGlzdChvdGhlcikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19sdF9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkZXF1ZSk6CiAgICAgICAgICAgIHJldHVybiBsaXN0KHNlbGYpIDwgbGlzdChvdGhlcikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkZXF1ZSk6CiAgICAgICAgICAgIHJldHVybiBsaXN0KHNlbGYpIDw9IGxpc3Qob3RoZXIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fZ3RfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgZGVxdWUpOgogICAgICAgICAgICByZXR1cm4gbGlzdChzZWxmKSA+IGxpc3Qob3RoZXIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fZ2VfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgZGVxdWUpOgogICAgICAgICAgICByZXR1cm4gbGlzdChzZWxmKSA+PSBsaXN0KG90aGVyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX2lhZGRfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgc2VsZi5leHRlbmQob3RoZXIpCiAgICAgICAgcmV0dXJuIHNlbGYKCgpjbGFzcyBkZXF1ZV9pdGVyYXRvcihvYmplY3QpOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkZXEsIGl0ZXJnZW4pOgogICAgICAgIHNlbGYuY291bnRlciA9IGxlbihkZXEpCiAgICAgICAgZGVmIGdpdmV1cCgpOgogICAgICAgICAgICBzZWxmLmNvdW50ZXIgPSAwCiAgICAgICAgICAgICNyYWlzZSBSdW50aW1lRXJyb3IsICJkZXF1ZSBtdXRhdGVkIGR1cmluZyBpdGVyYXRpb24iCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiZGVxdWUgbXV0YXRlZCBkdXJpbmcgaXRlcmF0aW9uIikKICAgICAgICBzZWxmLl9nZW4gPSBpdGVyZ2VuKGRlcS5zdGF0ZSwgZ2l2ZXVwKQoKICAgIGRlZiBuZXh0KHNlbGYpOgogICAgICAgIHJlcyA9ICBzZWxmLl9nZW4ubmV4dCgpCiAgICAgICAgc2VsZi5jb3VudGVyIC09IDEKICAgICAgICByZXR1cm4gcmVzCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgpjbGFzcyBkZWZhdWx0ZGljdChkaWN0KToKICAgIAogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3ZHMpOgogICAgICAgIGlmIGxlbihhcmdzKSA+IDA6CiAgICAgICAgICAgIGRlZmF1bHRfZmFjdG9yeSA9IGFyZ3NbMF0KICAgICAgICAgICAgYXJncyA9IGFyZ3NbMTpdCiAgICAgICAgICAgIGlmIG5vdCBjYWxsYWJsZShkZWZhdWx0X2ZhY3RvcnkpIGFuZCBkZWZhdWx0X2ZhY3RvcnkgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImZpcnN0IGFyZ3VtZW50IG11c3QgYmUgY2FsbGFibGUiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlZmF1bHRfZmFjdG9yeSA9IE5vbmUKICAgICAgICBkaWN0Ll9faW5pdF9fKHNlbGYsIGFyZ3MsIGt3ZHMpCiAgICAgICAgc2VsZi5kZWZhdWx0X2ZhY3RvcnkgPSBkZWZhdWx0X2ZhY3RvcnkKICAgICAgICBzZWxmLnVwZGF0ZShhcmdzLCBrd2RzKQogICAgICAgICNzdXBlcihkZWZhdWx0ZGljdCwgc2VsZikuX19pbml0X18oKmFyZ3MsICoqa3dkcykKCiAgICAjZml4bWUuLiAgaGFkIHRvIGFkZCB0aGlzIGZ1bmN0aW9uIHRvIGdldCBkZWZhdWx0ZGljdCB3b3JraW5nIHdpdGggYnJ5dGhvbiBjb3JyZWN0bHkKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIGlmIHNlbGYuX19jb250YWluc19fKGtleSk6ICAKICAgICAgICAgICByZXR1cm4gZGljdC5fX2dldGl0ZW1fXyhzZWxmLGtleSkKICAgIAogICAgICAgIHJldHVybiBzZWxmLl9fbWlzc2luZ19fKGtleSkKCiAgICBkZWYgX19taXNzaW5nX18oc2VsZiwga2V5KToKICAgICAgICAjIGZyb20gZGVmYXVsdGRpY3QgZG9jcwogICAgICAgIGlmIHNlbGYuZGVmYXVsdF9mYWN0b3J5IGlzIE5vbmU6IAogICAgICAgICAgICByYWlzZSBLZXlFcnJvcihrZXkpCiAgICAgICAgc2VsZltrZXldID0gdmFsdWUgPSBzZWxmLmRlZmF1bHRfZmFjdG9yeSgpCiAgICAgICAgcmV0dXJuIHZhbHVlCgogICAgZGVmIF9fcmVwcl9fKHNlbGYsIHJlY3Vyc2U9c2V0KCkpOgogICAgICAgIGlmIGlkKHNlbGYpIGluIHJlY3Vyc2U6CiAgICAgICAgICAgIHJldHVybiAiZGVmYXVsdGRpY3QoLi4uKSIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlY3Vyc2UuYWRkKGlkKHNlbGYpKQogICAgICAgICAgICByZXR1cm4gImRlZmF1bHRkaWN0KCVzLCAlcykiICUgKHJlcHIoc2VsZi5kZWZhdWx0X2ZhY3RvcnkpLCBzdXBlcihkZWZhdWx0ZGljdCwgc2VsZikuX19yZXByX18oKSkKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICByZWN1cnNlLnJlbW92ZShpZChzZWxmKSkKCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICByZXR1cm4gdHlwZShzZWxmKShzZWxmLmRlZmF1bHRfZmFjdG9yeSwgc2VsZikKICAgIAogICAgZGVmIF9fY29weV9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmNvcHkoKQoKICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYpOgogICAgICAgICMKICAgICAgICAjX19yZWR1Y2VfXyBtdXN0IHJldHVybiBhIDUtdHVwbGUgYXMgZm9sbG93czoKICAgICAgICAjCiAgICAgICAgIyAgIC0gZmFjdG9yeSBmdW5jdGlvbgogICAgICAgICMgICAtIHR1cGxlIG9mIGFyZ3MgZm9yIHRoZSBmYWN0b3J5IGZ1bmN0aW9uCiAgICAgICAgIyAgIC0gYWRkaXRpb25hbCBzdGF0ZSAoaGVyZSBOb25lKQogICAgICAgICMgICAtIHNlcXVlbmNlIGl0ZXJhdG9yIChoZXJlIE5vbmUpCiAgICAgICAgIyAgIC0gZGljdGlvbmFyeSBpdGVyYXRvciAoeWllbGRpbmcgc3VjY2Vzc2l2ZSAoa2V5LCB2YWx1ZSkgcGFpcnMKCiAgICAgICAgIyAgIFRoaXMgQVBJIGlzIHVzZWQgYnkgcGlja2xlLnB5IGFuZCBjb3B5LnB5LgogICAgICAgICMKICAgICAgICByZXR1cm4gKHR5cGUoc2VsZiksIChzZWxmLmRlZmF1bHRfZmFjdG9yeSwpLCBOb25lLCBOb25lLCBzZWxmLml0ZXJpdGVtcygpKQoKZnJvbSBvcGVyYXRvciBpbXBvcnQgaXRlbWdldHRlciBhcyBfaXRlbWdldHRlcgpmcm9tIGtleXdvcmQgaW1wb3J0IGlza2V5d29yZCBhcyBfaXNrZXl3b3JkCmltcG9ydCBzeXMgYXMgX3N5cwoKZGVmIG5hbWVkdHVwbGUodHlwZW5hbWUsIGZpZWxkX25hbWVzLCB2ZXJib3NlPUZhbHNlLCByZW5hbWU9RmFsc2UpOgogICAgIiIiUmV0dXJucyBhIG5ldyBzdWJjbGFzcyBvZiB0dXBsZSB3aXRoIG5hbWVkIGZpZWxkcy4KCiAgICA+Pj4gUG9pbnQgPSBuYW1lZHR1cGxlKCdQb2ludCcsICd4IHknKQogICAgPj4+IFBvaW50Ll9fZG9jX18gICAgICAgICAgICAgICAgICAgIyBkb2NzdHJpbmcgZm9yIHRoZSBuZXcgY2xhc3MKICAgICdQb2ludCh4LCB5KScKICAgID4+PiBwID0gUG9pbnQoMTEsIHk9MjIpICAgICAgICAgICAgICMgaW5zdGFudGlhdGUgd2l0aCBwb3NpdGlvbmFsIGFyZ3Mgb3Iga2V5d29yZHMKICAgID4+PiBwWzBdICsgcFsxXSAgICAgICAgICAgICAgICAgICAgICMgaW5kZXhhYmxlIGxpa2UgYSBwbGFpbiB0dXBsZQogICAgMzMKICAgID4+PiB4LCB5ID0gcCAgICAgICAgICAgICAgICAgICAgICAgICMgdW5wYWNrIGxpa2UgYSByZWd1bGFyIHR1cGxlCiAgICA+Pj4geCwgeQogICAgKDExLCAyMikKICAgID4+PiBwLnggKyBwLnkgICAgICAgICAgICAgICAgICAgICAgICMgZmllbGRzIGFsc28gYWNjZXNzYWJsZSBieSBuYW1lCiAgICAzMwogICAgPj4+IGQgPSBwLl9hc2RpY3QoKSAgICAgICAgICAgICAgICAgIyBjb252ZXJ0IHRvIGEgZGljdGlvbmFyeQogICAgPj4+IGRbJ3gnXQogICAgMTEKICAgID4+PiBQb2ludCgqKmQpICAgICAgICAgICAgICAgICAgICAgICMgY29udmVydCBmcm9tIGEgZGljdGlvbmFyeQogICAgUG9pbnQoeD0xMSwgeT0yMikKICAgID4+PiBwLl9yZXBsYWNlKHg9MTAwKSAgICAgICAgICAgICAgICMgX3JlcGxhY2UoKSBpcyBsaWtlIHN0ci5yZXBsYWNlKCkgYnV0IHRhcmdldHMgbmFtZWQgZmllbGRzCiAgICBQb2ludCh4PTEwMCwgeT0yMikKCiAgICAiIiIKCiAgICAjIFBhcnNlIGFuZCB2YWxpZGF0ZSB0aGUgZmllbGQgbmFtZXMuICBWYWxpZGF0aW9uIHNlcnZlcyB0d28gcHVycG9zZXMsCiAgICAjIGdlbmVyYXRpbmcgaW5mb3JtYXRpdmUgZXJyb3IgbWVzc2FnZXMgYW5kIHByZXZlbnRpbmcgdGVtcGxhdGUgaW5qZWN0aW9uIGF0dGFja3MuCiAgICBpZiBpc2luc3RhbmNlKGZpZWxkX25hbWVzLCBzdHIpOgogICAgICAgIGZpZWxkX25hbWVzID0gZmllbGRfbmFtZXMucmVwbGFjZSgnLCcsICcgJykuc3BsaXQoKSAjIG5hbWVzIHNlcGFyYXRlZCBieSB3aGl0ZXNwYWNlIGFuZC9vciBjb21tYXMKICAgIGZpZWxkX25hbWVzID0gdHVwbGUobWFwKHN0ciwgZmllbGRfbmFtZXMpKQogICAgaWYgcmVuYW1lOgogICAgICAgIG5hbWVzID0gbGlzdChmaWVsZF9uYW1lcykKICAgICAgICBzZWVuID0gc2V0KCkKICAgICAgICBmb3IgaSwgbmFtZSBpbiBlbnVtZXJhdGUobmFtZXMpOgogICAgICAgICAgICBpZiAobm90IG1pbihjLmlzYWxudW0oKSBvciBjPT0nXycgZm9yIGMgaW4gbmFtZSkgb3IgX2lza2V5d29yZChuYW1lKQogICAgICAgICAgICAgICAgb3Igbm90IG5hbWUgb3IgbmFtZVswXS5pc2RpZ2l0KCkgb3IgbmFtZS5zdGFydHN3aXRoKCdfJykKICAgICAgICAgICAgICAgIG9yIG5hbWUgaW4gc2Vlbik6CiAgICAgICAgICAgICAgICAgICAgbmFtZXNbaV0gPSAnXyVkJyAlIGkKICAgICAgICAgICAgc2Vlbi5hZGQobmFtZSkKICAgICAgICBmaWVsZF9uYW1lcyA9IHR1cGxlKG5hbWVzKQogICAgZm9yIG5hbWUgaW4gKHR5cGVuYW1lLCkgKyBmaWVsZF9uYW1lczoKICAgICAgICBpZiBub3QgbWluKGMuaXNhbG51bSgpIG9yIGM9PSdfJyBmb3IgYyBpbiBuYW1lKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVHlwZSBuYW1lcyBhbmQgZmllbGQgbmFtZXMgY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhbmQgdW5kZXJzY29yZXM6ICVyJyAlIG5hbWUpCiAgICAgICAgaWYgX2lza2V5d29yZChuYW1lKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVHlwZSBuYW1lcyBhbmQgZmllbGQgbmFtZXMgY2Fubm90IGJlIGEga2V5d29yZDogJXInICUgbmFtZSkKICAgICAgICBpZiBuYW1lWzBdLmlzZGlnaXQoKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVHlwZSBuYW1lcyBhbmQgZmllbGQgbmFtZXMgY2Fubm90IHN0YXJ0IHdpdGggYSBudW1iZXI6ICVyJyAlIG5hbWUpCiAgICBzZWVuX25hbWVzID0gc2V0KCkKICAgIGZvciBuYW1lIGluIGZpZWxkX25hbWVzOgogICAgICAgIGlmIG5hbWUuc3RhcnRzd2l0aCgnXycpIGFuZCBub3QgcmVuYW1lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdGaWVsZCBuYW1lcyBjYW5ub3Qgc3RhcnQgd2l0aCBhbiB1bmRlcnNjb3JlOiAlcicgJSBuYW1lKQogICAgICAgIGlmIG5hbWUgaW4gc2Vlbl9uYW1lczoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignRW5jb3VudGVyZWQgZHVwbGljYXRlIGZpZWxkIG5hbWU6ICVyJyAlIG5hbWUpCiAgICAgICAgc2Vlbl9uYW1lcy5hZGQobmFtZSkKCiAgICAjIENyZWF0ZSBhbmQgZmlsbC1pbiB0aGUgY2xhc3MgdGVtcGxhdGUKICAgIG51bWZpZWxkcyA9IGxlbihmaWVsZF9uYW1lcykKICAgIGFyZ3R4dCA9IHJlcHIoZmllbGRfbmFtZXMpLnJlcGxhY2UoIiciLCAiIilbMTotMV0gICAjIHR1cGxlIHJlcHIgd2l0aG91dCBwYXJlbnMgb3IgcXVvdGVzCiAgICByZXBydHh0ID0gJywgJy5qb2luKCclcz0lJXInICUgbmFtZSBmb3IgbmFtZSBpbiBmaWVsZF9uYW1lcykKICAgIHRlbXBsYXRlID0gJycnY2xhc3MgJSh0eXBlbmFtZSlzKHR1cGxlKToKICAgICAgICAnJSh0eXBlbmFtZSlzKCUoYXJndHh0KXMpJyBcbgogICAgICAgIF9fc2xvdHNfXyA9ICgpIFxuCiAgICAgICAgX2ZpZWxkcyA9ICUoZmllbGRfbmFtZXMpciBcbgogICAgICAgIGRlZiBfX25ld19fKF9jbHMsICUoYXJndHh0KXMpOgogICAgICAgICAgICByZXR1cm4gX3R1cGxlLl9fbmV3X18oX2NscywgKCUoYXJndHh0KXMpKSBcbgogICAgICAgIEBjbGFzc21ldGhvZAogICAgICAgIGRlZiBfbWFrZShjbHMsIGl0ZXJhYmxlLCBuZXc9dHVwbGUuX19uZXdfXywgbGVuPWxlbik6CiAgICAgICAgICAgICdNYWtlIGEgbmV3ICUodHlwZW5hbWUpcyBvYmplY3QgZnJvbSBhIHNlcXVlbmNlIG9yIGl0ZXJhYmxlJwogICAgICAgICAgICByZXN1bHQgPSBuZXcoY2xzLCBpdGVyYWJsZSkKICAgICAgICAgICAgaWYgbGVuKHJlc3VsdCkgIT0gJShudW1maWVsZHMpZDoKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignRXhwZWN0ZWQgJShudW1maWVsZHMpZCBhcmd1bWVudHMsIGdvdCAlJWQnICUlIGxlbihyZXN1bHQpKQogICAgICAgICAgICByZXR1cm4gcmVzdWx0IFxuCiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgICAgICByZXR1cm4gJyUodHlwZW5hbWUpcyglKHJlcHJ0eHQpcyknICUlIHNlbGYgXG4KICAgICAgICBkZWYgX2FzZGljdChzZWxmKToKICAgICAgICAgICAgJ1JldHVybiBhIG5ldyBkaWN0IHdoaWNoIG1hcHMgZmllbGQgbmFtZXMgdG8gdGhlaXIgdmFsdWVzJwogICAgICAgICAgICByZXR1cm4gZGljdCh6aXAoc2VsZi5fZmllbGRzLCBzZWxmKSkgXG4KICAgICAgICBkZWYgX3JlcGxhY2UoX3NlbGYsICoqa3dkcyk6CiAgICAgICAgICAgICdSZXR1cm4gYSBuZXcgJSh0eXBlbmFtZSlzIG9iamVjdCByZXBsYWNpbmcgc3BlY2lmaWVkIGZpZWxkcyB3aXRoIG5ldyB2YWx1ZXMnCiAgICAgICAgICAgIHJlc3VsdCA9IF9zZWxmLl9tYWtlKG1hcChrd2RzLnBvcCwgJShmaWVsZF9uYW1lcylyLCBfc2VsZikpCiAgICAgICAgICAgIGlmIGt3ZHM6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdHb3QgdW5leHBlY3RlZCBmaWVsZCBuYW1lczogJSVyJyAlJSBrd2RzLmtleXMoKSkKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCBcbgogICAgICAgIGRlZiBfX2dldG5ld2FyZ3NfXyhzZWxmKToKICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYpIFxuXG4nJycgJSBsb2NhbHMoKQogICAgZm9yIGksIG5hbWUgaW4gZW51bWVyYXRlKGZpZWxkX25hbWVzKToKICAgICAgICB0ZW1wbGF0ZSArPSAnICAgICAgICAlcyA9IF9wcm9wZXJ0eShfaXRlbWdldHRlciglZCkpXG4nICUgKG5hbWUsIGkpCiAgICAKICAgIGlmIHZlcmJvc2U6CiAgICAgICAgcHJpbnQodGVtcGxhdGUpCgogICAgIyBFeGVjdXRlIHRoZSB0ZW1wbGF0ZSBzdHJpbmcgaW4gYSB0ZW1wb3JhcnkgbmFtZXNwYWNlCiAgICBuYW1lc3BhY2UgPSBkaWN0KF9pdGVtZ2V0dGVyPV9pdGVtZ2V0dGVyLCBfX25hbWVfXz0nbmFtZWR0dXBsZV8lcycgJSB0eXBlbmFtZSwKICAgICAgICAgICAgICAgICAgICAgX3Byb3BlcnR5PXByb3BlcnR5LCBfdHVwbGU9dHVwbGUpCiAgICB0cnk6CiAgICAgICAgZXhlYyh0ZW1wbGF0ZSxuYW1lc3BhY2UpCiAgICBleGNlcHQgU3ludGF4RXJyb3IgYXMgZToKICAgICAgICByYWlzZSBTeW50YXhFcnJvcihlLm1lc3NhZ2UgKyAnOlxuJyArIHRlbXBsYXRlKQogICAgcmVzdWx0ID0gbmFtZXNwYWNlW3R5cGVuYW1lXQoKICAgICMgRm9yIHBpY2tsaW5nIHRvIHdvcmssIHRoZSBfX21vZHVsZV9fIHZhcmlhYmxlIG5lZWRzIHRvIGJlIHNldCB0byB0aGUgZnJhbWUKICAgICMgd2hlcmUgdGhlIG5hbWVkIHR1cGxlIGlzIGNyZWF0ZWQuICBCeXBhc3MgdGhpcyBzdGVwIGluIGVudmlyb21lbnRzIHdoZXJlCiAgICAjIHN5cy5fZ2V0ZnJhbWUgaXMgbm90IGRlZmluZWQgKEp5dGhvbiBmb3IgZXhhbXBsZSkgb3Igc3lzLl9nZXRmcmFtZSBpcyBub3QKICAgICMgZGVmaW5lZCBmb3IgYXJndW1lbnRzIGdyZWF0ZXIgdGhhbiAwIChJcm9uUHl0aG9uKS4KICAgIHRyeToKICAgICAgICByZXN1bHQuX19tb2R1bGVfXyA9IF9zeXMuX2dldGZyYW1lKDEpLmZfZ2xvYmFscy5nZXQoJ19fbmFtZV9fJywgJ19fbWFpbl9fJykKICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIFZhbHVlRXJyb3IpOgogICAgICAgIHBhc3MKCiAgICByZXR1cm4gcmVzdWx0CgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgUG9pbnQgPSBuYW1lZHR1cGxlKCdQb2ludCcsIFsneCcsICd5J10pCiAgICBwID0gUG9pbnQoMTEsIHk9MjIpCiAgICBwcmludChwWzBdK3BbMV0pCiAgICB4LHk9cAogICAgcHJpbnQoeCx5KQogICAgcHJpbnQocC54K3AueSkKICAgIHByaW50KHApCg==',
'/Lib/binascii.py':'IiIiQSBwdXJlIFB5dGhvbiBpbXBsZW1lbnRhdGlvbiBvZiBiaW5hc2NpaS4KClJhdGhlciBzbG93IGFuZCBidWdneSBpbiBjb3JuZXIgY2FzZXMuClB5UHkgcHJvdmlkZXMgYW4gUlB5dGhvbiB2ZXJzaW9uIHRvby4KIiIiCgojIGJvcnJvd2VkIGZyb20gaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvZjJiZjk0OTQzYTQxL2xpYl9weXB5L2JpbmFzY2lpLnB5CgpjbGFzcyBFcnJvcihFeGNlcHRpb24pOgogICAgcGFzcwoKY2xhc3MgRG9uZShFeGNlcHRpb24pOgogICAgcGFzcwoKY2xhc3MgSW5jb21wbGV0ZShFeGNlcHRpb24pOgogICAgcGFzcwoKZGVmIGEyYl91dShzKToKICAgIGlmIG5vdCBzOgogICAgICAgIHJldHVybiAnJwogICAgCiAgICBsZW5ndGggPSAob3JkKHNbMF0pIC0gMHgyMCkgJSA2NAoKICAgIGRlZiBxdWFkcnVwbGV0c19nZW4ocyk6CiAgICAgICAgd2hpbGUgczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgeWllbGQgb3JkKHNbMF0pLCBvcmQoc1sxXSksIG9yZChzWzJdKSwgb3JkKHNbM10pCiAgICAgICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOgogICAgICAgICAgICAgICAgcyArPSAnICAgJwogICAgICAgICAgICAgICAgeWllbGQgb3JkKHNbMF0pLCBvcmQoc1sxXSksIG9yZChzWzJdKSwgb3JkKHNbM10pCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgcyA9IHNbNDpdCgogICAgdHJ5OgogICAgICAgIHJlc3VsdCA9IFsnJy5qb2luKAogICAgICAgICAgICBbY2hyKChBIC0gMHgyMCkgPDwgMiB8ICgoKEIgLSAweDIwKSA+PiA0KSAmIDB4MykpLAogICAgICAgICAgICBjaHIoKChCIC0gMHgyMCkgJiAweGYpIDw8IDQgfCAoKChDIC0gMHgyMCkgPj4gMikgJiAweGYpKSwKICAgICAgICAgICAgY2hyKCgoQyAtIDB4MjApICYgMHgzKSA8PCA2IHwgKChEIC0gMHgyMCkgJiAweDNmKSkKICAgICAgICAgICAgXSkgZm9yIEEsIEIsIEMsIEQgaW4gcXVhZHJ1cGxldHNfZ2VuKHNbMTpdLnJzdHJpcCgpKV0KICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIHJhaXNlIEVycm9yKCdJbGxlZ2FsIGNoYXInKQogICAgcmVzdWx0ID0gJycuam9pbihyZXN1bHQpCiAgICB0cmFpbGluZ2RhdGEgPSByZXN1bHRbbGVuZ3RoOl0KICAgIGlmIHRyYWlsaW5nZGF0YS5zdHJpcCgnXHgwMCcpOgogICAgICAgIHJhaXNlIEVycm9yKCdUcmFpbGluZyBnYXJiYWdlJykKICAgIHJlc3VsdCA9IHJlc3VsdFs6bGVuZ3RoXQogICAgaWYgbGVuKHJlc3VsdCkgPCBsZW5ndGg6CiAgICAgICAgcmVzdWx0ICs9ICgobGVuZ3RoIC0gbGVuKHJlc3VsdCkpICogJ1x4MDAnKQogICAgcmV0dXJuIHJlc3VsdAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIApkZWYgYjJhX3V1KHMpOgogICAgbGVuZ3RoID0gbGVuKHMpCiAgICBpZiBsZW5ndGggPiA0NToKICAgICAgICByYWlzZSBFcnJvcignQXQgbW9zdCA0NSBieXRlcyBhdCBvbmNlJykKCiAgICBkZWYgdHJpcGxlc19nZW4ocyk6CiAgICAgICAgd2hpbGUgczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgeWllbGQgb3JkKHNbMF0pLCBvcmQoc1sxXSksIG9yZChzWzJdKQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgICAgIHMgKz0gJ1wwXDAnCiAgICAgICAgICAgICAgICB5aWVsZCBvcmQoc1swXSksIG9yZChzWzFdKSwgb3JkKHNbMl0pCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgcyA9IHNbMzpdCgogICAgcmVzdWx0ID0gWycnLmpvaW4oCiAgICAgICAgW2NocigweDIwICsgKCggQSA+PiAyICAgICAgICAgICAgICAgICAgICApICYgMHgzRikpLAogICAgICAgICBjaHIoMHgyMCArICgoKEEgPDwgNCkgfCAoKEIgPj4gNCkgJiAweEYpKSAmIDB4M0YpKSwKICAgICAgICAgY2hyKDB4MjAgKyAoKChCIDw8IDIpIHwgKChDID4+IDYpICYgMHgzKSkgJiAweDNGKSksCiAgICAgICAgIGNocigweDIwICsgKCggQyAgICAgICAgICAgICAgICAgICAgICAgICApICYgMHgzRikpXSkKICAgICAgICAgICAgICBmb3IgQSwgQiwgQyBpbiB0cmlwbGVzX2dlbihzKV0KICAgIHJldHVybiBjaHIob3JkKCcgJykgKyAobGVuZ3RoICYgMDc3KSkgKyAnJy5qb2luKHJlc3VsdCkgKyAnXG4nCgoKdGFibGVfYTJiX2Jhc2U2NCA9IHsKICAgICdBJzogMCwKICAgICdCJzogMSwKICAgICdDJzogMiwKICAgICdEJzogMywKICAgICdFJzogNCwKICAgICdGJzogNSwKICAgICdHJzogNiwKICAgICdIJzogNywKICAgICdJJzogOCwKICAgICdKJzogOSwKICAgICdLJzogMTAsCiAgICAnTCc6IDExLAogICAgJ00nOiAxMiwKICAgICdOJzogMTMsCiAgICAnTyc6IDE0LAogICAgJ1AnOiAxNSwKICAgICdRJzogMTYsCiAgICAnUic6IDE3LAogICAgJ1MnOiAxOCwKICAgICdUJzogMTksCiAgICAnVSc6IDIwLAogICAgJ1YnOiAyMSwKICAgICdXJzogMjIsCiAgICAnWCc6IDIzLAogICAgJ1knOiAyNCwKICAgICdaJzogMjUsCiAgICAnYSc6IDI2LAogICAgJ2InOiAyNywKICAgICdjJzogMjgsCiAgICAnZCc6IDI5LAogICAgJ2UnOiAzMCwKICAgICdmJzogMzEsCiAgICAnZyc6IDMyLAogICAgJ2gnOiAzMywKICAgICdpJzogMzQsCiAgICAnaic6IDM1LAogICAgJ2snOiAzNiwKICAgICdsJzogMzcsCiAgICAnbSc6IDM4LAogICAgJ24nOiAzOSwKICAgICdvJzogNDAsCiAgICAncCc6IDQxLAogICAgJ3EnOiA0MiwKICAgICdyJzogNDMsCiAgICAncyc6IDQ0LAogICAgJ3QnOiA0NSwKICAgICd1JzogNDYsCiAgICAndic6IDQ3LAogICAgJ3cnOiA0OCwKICAgICd4JzogNDksCiAgICAneSc6IDUwLAogICAgJ3onOiA1MSwKICAgICcwJzogNTIsCiAgICAnMSc6IDUzLAogICAgJzInOiA1NCwKICAgICczJzogNTUsCiAgICAnNCc6IDU2LAogICAgJzUnOiA1NywKICAgICc2JzogNTgsCiAgICAnNyc6IDU5LAogICAgJzgnOiA2MCwKICAgICc5JzogNjEsCiAgICAnKyc6IDYyLAogICAgJy8nOiA2MywKICAgICc9JzogMCwKfQoKCmRlZiBhMmJfYmFzZTY0KHMpOgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgKHN0ciwgdW5pY29kZSkpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgc3RyaW5nIG9yIHVuaWNvZGUsIGdvdCAlciIgJSAocywpKQogICAgcyA9IHMucnN0cmlwKCkKICAgICMgY2xlYW4gb3V0IGFsbCBpbnZhbGlkIGNoYXJhY3RlcnMsIHRoaXMgYWxzbyBzdHJpcHMgdGhlIGZpbmFsICc9JyBwYWRkaW5nCiAgICAjIGNoZWNrIGZvciBjb3JyZWN0IHBhZGRpbmcKCiAgICBkZWYgbmV4dF92YWxpZF9jaGFyKHMsIHBvcyk6CiAgICAgICAgZm9yIGkgaW4gcmFuZ2UocG9zICsgMSwgbGVuKHMpKToKICAgICAgICAgICAgYyA9IHNbaV0KICAgICAgICAgICAgaWYgYyA8ICdceDdmJzoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICB0YWJsZV9hMmJfYmFzZTY0W2NdCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMKICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgcmV0dXJuIE5vbmUKICAgIAogICAgcXVhZF9wb3MgPSAwCiAgICBsZWZ0Yml0cyA9IDAKICAgIGxlZnRjaGFyID0gMAogICAgcmVzID0gW10KICAgIGZvciBpLCBjIGluIGVudW1lcmF0ZShzKToKICAgICAgICBpZiBjID4gJ1x4N2YnIG9yIGMgPT0gJ1xuJyBvciBjID09ICdccicgb3IgYyA9PSAnICc6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgaWYgYyA9PSAnPSc6CiAgICAgICAgICAgIGlmIHF1YWRfcG9zIDwgMiBvciAocXVhZF9wb3MgPT0gMiBhbmQgbmV4dF92YWxpZF9jaGFyKHMsIGkpICE9ICc9Jyk6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbGVmdGJpdHMgPSAwCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIHRyeToKICAgICAgICAgICAgbmV4dF9jID0gdGFibGVfYTJiX2Jhc2U2NFtjXQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgY29udGludWUKICAgICAgICBxdWFkX3BvcyA9IChxdWFkX3BvcyArIDEpICYgMHgwMwogICAgICAgIGxlZnRjaGFyID0gKGxlZnRjaGFyIDw8IDYpIHwgbmV4dF9jCiAgICAgICAgbGVmdGJpdHMgKz0gNgogICAgICAgIGlmIGxlZnRiaXRzID49IDg6CiAgICAgICAgICAgIGxlZnRiaXRzIC09IDgKICAgICAgICAgICAgcmVzLmFwcGVuZCgobGVmdGNoYXIgPj4gbGVmdGJpdHMgJiAweGZmKSkKICAgICAgICAgICAgbGVmdGNoYXIgJj0gKCgxIDw8IGxlZnRiaXRzKSAtIDEpCiAgICBpZiBsZWZ0Yml0cyAhPSAwOgogICAgICAgIHJhaXNlIEVycm9yKCdJbmNvcnJlY3QgcGFkZGluZycpCiAgICAKICAgIHJldHVybiAnJy5qb2luKFtjaHIoaSkgZm9yIGkgaW4gcmVzXSkKICAgIAp0YWJsZV9iMmFfYmFzZTY0ID0gXAoiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyIKCmRlZiBiMmFfYmFzZTY0KHMpOgogICAgbGVuZ3RoID0gbGVuKHMpCiAgICBmaW5hbF9sZW5ndGggPSBsZW5ndGggJSAzCgogICAgZGVmIHRyaXBsZXNfZ2VuKHMpOgogICAgICAgIHdoaWxlIHM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHlpZWxkIG9yZChzWzBdKSwgb3JkKHNbMV0pLCBvcmQoc1syXSkKICAgICAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgICAgICBzICs9ICdcMFwwJwogICAgICAgICAgICAgICAgeWllbGQgb3JkKHNbMF0pLCBvcmQoc1sxXSksIG9yZChzWzJdKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIHMgPSBzWzM6XQoKICAgIAogICAgYSA9IHRyaXBsZXNfZ2VuKHNbIDpsZW5ndGggLSBmaW5hbF9sZW5ndGhdKQoKICAgIHJlc3VsdCA9IFsnJy5qb2luKAogICAgICAgIFt0YWJsZV9iMmFfYmFzZTY0WyggQSA+PiAyICAgICAgICAgICAgICAgICAgICApICYgMHgzRl0sCiAgICAgICAgIHRhYmxlX2IyYV9iYXNlNjRbKChBIDw8IDQpIHwgKChCID4+IDQpICYgMHhGKSkgJiAweDNGXSwKICAgICAgICAgdGFibGVfYjJhX2Jhc2U2NFsoKEIgPDwgMikgfCAoKEMgPj4gNikgJiAweDMpKSAmIDB4M0ZdLAogICAgICAgICB0YWJsZV9iMmFfYmFzZTY0WyggQyAgICAgICAgICAgICAgICAgICAgICAgICApICYgMHgzRl1dKQogICAgICAgICAgICAgIGZvciBBLCBCLCBDIGluIGFdCgogICAgZmluYWwgPSBzW2xlbmd0aCAtIGZpbmFsX2xlbmd0aDpdCiAgICBpZiBmaW5hbF9sZW5ndGggPT0gMDoKICAgICAgICBzbmlwcGV0ID0gJycKICAgIGVsaWYgZmluYWxfbGVuZ3RoID09IDE6CiAgICAgICAgYSA9IG9yZChmaW5hbFswXSkKICAgICAgICBzbmlwcGV0ID0gdGFibGVfYjJhX2Jhc2U2NFsoYSA+PiAyICkgJiAweDNGXSArIFwKICAgICAgICAgICAgICAgICAgdGFibGVfYjJhX2Jhc2U2NFsoYSA8PCA0ICkgJiAweDNGXSArICc9PScKICAgIGVsc2U6CiAgICAgICAgYSA9IG9yZChmaW5hbFswXSkKICAgICAgICBiID0gb3JkKGZpbmFsWzFdKQogICAgICAgIHNuaXBwZXQgPSB0YWJsZV9iMmFfYmFzZTY0WyhhID4+IDIpICYgMHgzRl0gKyBcCiAgICAgICAgICAgICAgICAgIHRhYmxlX2IyYV9iYXNlNjRbKChhIDw8IDQpIHwgKGIgPj4gNCkgJiAweEYpICYgMHgzRl0gKyBcCiAgICAgICAgICAgICAgICAgIHRhYmxlX2IyYV9iYXNlNjRbKGIgPDwgMikgJiAweDNGXSArICc9JwogICAgcmV0dXJuICcnLmpvaW4ocmVzdWx0KSArIHNuaXBwZXQgKyAnXG4nCgpkZWYgYTJiX3FwKHMsIGhlYWRlcj1GYWxzZSk6CiAgICBpbnAgPSAwCiAgICBvZGF0YSA9IFtdCiAgICB3aGlsZSBpbnAgPCBsZW4ocyk6CiAgICAgICAgaWYgc1tpbnBdID09ICc9JzoKICAgICAgICAgICAgaW5wICs9IDEKICAgICAgICAgICAgaWYgaW5wID49IGxlbihzKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICMgU29mdCBsaW5lIGJyZWFrcwogICAgICAgICAgICBpZiAoc1tpbnBdID09ICdcbicpIG9yIChzW2lucF0gPT0gJ1xyJyk6CiAgICAgICAgICAgICAgICBpZiBzW2lucF0gIT0gJ1xuJzoKICAgICAgICAgICAgICAgICAgICB3aGlsZSBpbnAgPCBsZW4ocykgYW5kIHNbaW5wXSAhPSAnXG4nOgogICAgICAgICAgICAgICAgICAgICAgICBpbnAgKz0gMQogICAgICAgICAgICAgICAgaWYgaW5wIDwgbGVuKHMpOgogICAgICAgICAgICAgICAgICAgIGlucCArPSAxCiAgICAgICAgICAgIGVsaWYgc1tpbnBdID09ICc9JzoKICAgICAgICAgICAgICAgICMgYnJva2VuIGNhc2UgZnJvbSBicm9rZW4gcHl0aG9uIHFwCiAgICAgICAgICAgICAgICBvZGF0YS5hcHBlbmQoJz0nKQogICAgICAgICAgICAgICAgaW5wICs9IDEKICAgICAgICAgICAgZWxpZiBzW2lucF0gaW4gaGV4X251bWJlcnMgYW5kIHNbaW5wICsgMV0gaW4gaGV4X251bWJlcnM6CiAgICAgICAgICAgICAgICBjaCA9IGNocihpbnQoc1tpbnA6aW5wKzJdLCAxNikpCiAgICAgICAgICAgICAgICBpbnAgKz0gMgogICAgICAgICAgICAgICAgb2RhdGEuYXBwZW5kKGNoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgb2RhdGEuYXBwZW5kKCc9JykKICAgICAgICBlbGlmIGhlYWRlciBhbmQgc1tpbnBdID09ICdfJzoKICAgICAgICAgICAgb2RhdGEuYXBwZW5kKCcgJykKICAgICAgICAgICAgaW5wICs9IDEKICAgICAgICBlbHNlOgogICAgICAgICAgICBvZGF0YS5hcHBlbmQoc1tpbnBdKQogICAgICAgICAgICBpbnAgKz0gMQogICAgcmV0dXJuICcnLmpvaW4ob2RhdGEpCgpkZWYgYjJhX3FwKGRhdGEsIHF1b3RldGFicz1GYWxzZSwgaXN0ZXh0PVRydWUsIGhlYWRlcj1GYWxzZSk6CiAgICAiIiJxdW90ZXRhYnM9VHJ1ZSBtZWFucyB0aGF0IHRhYiBhbmQgc3BhY2UgY2hhcmFjdGVycyBhcmUgYWx3YXlzCiAgICAgICBxdW90ZWQuCiAgICAgICBpc3RleHQ9RmFsc2UgbWVhbnMgdGhhdCBcciBhbmQgXG4gYXJlIHRyZWF0ZWQgYXMgcmVndWxhciBjaGFyYWN0ZXJzCiAgICAgICBoZWFkZXI9VHJ1ZSBlbmNvZGVzIHNwYWNlIGNoYXJhY3RlcnMgd2l0aCAnXycgYW5kIHJlcXVpcmVzCiAgICAgICByZWFsICdfJyBjaGFyYWN0ZXJzIHRvIGJlIHF1b3RlZC4KICAgICIiIgogICAgTUFYTElORVNJWkUgPSA3NgoKICAgICMgU2VlIGlmIHRoaXMgc3RyaW5nIGlzIHVzaW5nIENSTEYgbGluZSBlbmRzCiAgICBsZiA9IGRhdGEuZmluZCgnXG4nKQogICAgY3JsZiA9IGxmID4gMCBhbmQgZGF0YVtsZi0xXSA9PSAnXHInCgogICAgaW5wID0gMAogICAgbGluZWxlbiA9IDAKICAgIG9kYXRhID0gW10KICAgIHdoaWxlIGlucCA8IGxlbihkYXRhKToKICAgICAgICBjID0gZGF0YVtpbnBdCiAgICAgICAgaWYgKGMgPiAnficgb3IKICAgICAgICAgICAgYyA9PSAnPScgb3IKICAgICAgICAgICAgKGhlYWRlciBhbmQgYyA9PSAnXycpIG9yCiAgICAgICAgICAgIChjID09ICcuJyBhbmQgbGluZWxlbiA9PSAwIGFuZCAoaW5wKzEgPT0gbGVuKGRhdGEpIG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtpbnArMV0gPT0gJ1xuJyBvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaW5wKzFdID09ICdccicpKSBvcgogICAgICAgICAgICAobm90IGlzdGV4dCBhbmQgKGMgPT0gJ1xyJyBvciBjID09ICdcbicpKSBvcgogICAgICAgICAgICAoKGMgPT0gJ1x0JyBvciBjID09ICcgJykgYW5kIChpbnAgKyAxID09IGxlbihkYXRhKSkpIG9yCiAgICAgICAgICAgIChjIDw9ICcgJyBhbmQgYyAhPSAnXHInIGFuZCBjICE9ICdcbicgYW5kCiAgICAgICAgICAgICAocXVvdGV0YWJzIG9yIChub3QgcXVvdGV0YWJzIGFuZCAoYyAhPSAnXHQnIGFuZCBjICE9ICcgJykpKSkpOgogICAgICAgICAgICBsaW5lbGVuICs9IDMKICAgICAgICAgICAgaWYgbGluZWxlbiA+PSBNQVhMSU5FU0laRToKICAgICAgICAgICAgICAgIG9kYXRhLmFwcGVuZCgnPScpCiAgICAgICAgICAgICAgICBpZiBjcmxmOiBvZGF0YS5hcHBlbmQoJ1xyJykKICAgICAgICAgICAgICAgIG9kYXRhLmFwcGVuZCgnXG4nKQogICAgICAgICAgICAgICAgbGluZWxlbiA9IDMKICAgICAgICAgICAgb2RhdGEuYXBwZW5kKCc9JyArIHR3b19oZXhfZGlnaXRzKG9yZChjKSkpCiAgICAgICAgICAgIGlucCArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgKGlzdGV4dCBhbmQKICAgICAgICAgICAgICAgIChjID09ICdcbicgb3IgKGlucCsxIDwgbGVuKGRhdGEpIGFuZCBjID09ICdccicgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2lucCsxXSA9PSAnXG4nKSkpOgogICAgICAgICAgICAgICAgbGluZWxlbiA9IDAKICAgICAgICAgICAgICAgICMgUHJvdGVjdCBhZ2FpbnN0IHdoaXRlc3BhY2Ugb24gZW5kIG9mIGxpbmUKICAgICAgICAgICAgICAgIGlmIChsZW4ob2RhdGEpID4gMCBhbmQKICAgICAgICAgICAgICAgICAgICAob2RhdGFbLTFdID09ICcgJyBvciBvZGF0YVstMV0gPT0gJ1x0JykpOgogICAgICAgICAgICAgICAgICAgIGNoID0gb3JkKG9kYXRhWy0xXSkKICAgICAgICAgICAgICAgICAgICBvZGF0YVstMV0gPSAnPScKICAgICAgICAgICAgICAgICAgICBvZGF0YS5hcHBlbmQodHdvX2hleF9kaWdpdHMoY2gpKQoKICAgICAgICAgICAgICAgIGlmIGNybGY6IG9kYXRhLmFwcGVuZCgnXHInKQogICAgICAgICAgICAgICAgb2RhdGEuYXBwZW5kKCdcbicpCiAgICAgICAgICAgICAgICBpZiBjID09ICdccic6CiAgICAgICAgICAgICAgICAgICAgaW5wICs9IDIKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaW5wICs9IDEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIChpbnAgKyAxIDwgbGVuKGRhdGEpIGFuZAogICAgICAgICAgICAgICAgICAgIGRhdGFbaW5wKzFdICE9ICdcbicgYW5kCiAgICAgICAgICAgICAgICAgICAgKGxpbmVsZW4gKyAxKSA+PSBNQVhMSU5FU0laRSk6CiAgICAgICAgICAgICAgICAgICAgb2RhdGEuYXBwZW5kKCc9JykKICAgICAgICAgICAgICAgICAgICBpZiBjcmxmOiBvZGF0YS5hcHBlbmQoJ1xyJykKICAgICAgICAgICAgICAgICAgICBvZGF0YS5hcHBlbmQoJ1xuJykKICAgICAgICAgICAgICAgICAgICBsaW5lbGVuID0gMAoKICAgICAgICAgICAgICAgIGxpbmVsZW4gKz0gMQogICAgICAgICAgICAgICAgaWYgaGVhZGVyIGFuZCBjID09ICcgJzoKICAgICAgICAgICAgICAgICAgICBjID0gJ18nCiAgICAgICAgICAgICAgICBvZGF0YS5hcHBlbmQoYykKICAgICAgICAgICAgICAgIGlucCArPSAxCiAgICByZXR1cm4gJycuam9pbihvZGF0YSkKCmhleF9udW1iZXJzID0gJzAxMjM0NTY3ODlBQkNERUYnCmRlZiBoZXgobik6CiAgICBpZiBuID09IDA6CiAgICAgICAgcmV0dXJuICcwJwogICAgCiAgICBpZiBuIDwgMDoKICAgICAgICBuID0gLW4KICAgICAgICBzaWduID0gJy0nCiAgICBlbHNlOgogICAgICAgIHNpZ24gPSAnJwogICAgYXJyID0gW10KCiAgICBkZWYgaGV4X2dlbihuKToKICAgICAgICAiIiIgWWllbGQgYSBuaWJibGUgYXQgYSB0aW1lLiAiIiIKICAgICAgICB3aGlsZSBuOgogICAgICAgICAgICB5aWVsZCBuICUgMHgxMAogICAgICAgICAgICBuID0gbiAvIDB4MTAKCiAgICBmb3IgbmliYmxlIGluIGhleF9nZW4obik6CiAgICAgICAgYXJyID0gW2hleF9udW1iZXJzW25pYmJsZV1dICsgYXJyCiAgICByZXR1cm4gc2lnbiArICcnLmpvaW4oYXJyKQoKZGVmIHR3b19oZXhfZGlnaXRzKG4pOgogICAgcmV0dXJuIGhleF9udW1iZXJzW24gLyAweDEwXSArIGhleF9udW1iZXJzW24gJSAweDEwXQogICAgCgpkZWYgc3RyaGV4X3RvX2ludChzKToKICAgIGkgPSAwCiAgICBmb3IgYyBpbiBzOgogICAgICAgIGkgPSBpICogMHgxMCArIGhleF9udW1iZXJzLmluZGV4KGMpCiAgICByZXR1cm4gaQoKaHF4X2VuY29kaW5nID0gJyEiIyQlJlwnKCkqKywtMDEyMzQ1Njg5QEFCQ0RFRkdISUpLTE1OUFFSU1RVVlhZWltgYWJjZGVmaGlqa2xtcHFyJwoKRE9ORSA9IDB4N2YKU0tJUCA9IDB4N2UKRkFJTCA9IDB4N2QKICAgIAp0YWJsZV9hMmJfaHF4ID0gWwogICAgI15AICAgIF5BICAgIF5CICAgIF5DICAgIF5EICAgIF5FICAgIF5GICAgIF5HICAgCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgI1xiICAgIFx0ICAgIFxuICAgIF5LICAgIF5MICAgIFxyICAgIF5OICAgIF5PICAgCiAgICBGQUlMLCBGQUlMLCBTS0lQLCBGQUlMLCBGQUlMLCBTS0lQLCBGQUlMLCBGQUlMLAogICAgI15QICAgIF5RICAgIF5SICAgIF5TICAgIF5UICAgIF5VICAgIF5WICAgIF5XICAgCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgI15YICAgIF5ZICAgIF5aICAgIF5bICAgIF5cICAgIF5dICAgIF5eICAgIF5fICAgCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgIyAgICAgICEgICAgICIgICAgICMgICAgICQgICAgICUgICAgICYgICAgICcgICAKICAgIEZBSUwsIDB4MDAsIDB4MDEsIDB4MDIsIDB4MDMsIDB4MDQsIDB4MDUsIDB4MDYsCiAgICAjKCAgICAgKSAgICAgKiAgICAgKyAgICAgLCAgICAgLSAgICAgLiAgICAgLyAgIAogICAgMHgwNywgMHgwOCwgMHgwOSwgMHgwQSwgMHgwQiwgMHgwQywgRkFJTCwgRkFJTCwKICAgICMwICAgICAxICAgICAyICAgICAzICAgICA0ICAgICA1ICAgICA2ICAgICA3ICAgCiAgICAweDBELCAweDBFLCAweDBGLCAweDEwLCAweDExLCAweDEyLCAweDEzLCBGQUlMLAogICAgIzggICAgIDkgICAgIDogICAgIDsgICAgIDwgICAgID0gICAgID4gICAgID8gICAKICAgIDB4MTQsIDB4MTUsIERPTkUsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICAjQCAgICAgQSAgICAgQiAgICAgQyAgICAgRCAgICAgRSAgICAgRiAgICAgRyAgIAogICAgMHgxNiwgMHgxNywgMHgxOCwgMHgxOSwgMHgxQSwgMHgxQiwgMHgxQywgMHgxRCwKICAgICNIICAgICBJICAgICBKICAgICBLICAgICBMICAgICBNICAgICBOICAgICBPICAgCiAgICAweDFFLCAweDFGLCAweDIwLCAweDIxLCAweDIyLCAweDIzLCAweDI0LCBGQUlMLAogICAgI1AgICAgIFEgICAgIFIgICAgIFMgICAgIFQgICAgIFUgICAgIFYgICAgIFcgICAKICAgIDB4MjUsIDB4MjYsIDB4MjcsIDB4MjgsIDB4MjksIDB4MkEsIDB4MkIsIEZBSUwsCiAgICAjWCAgICAgWSAgICAgWiAgICAgWyAgICAgXCAgICAgXSAgICAgXiAgICAgXyAgIAogICAgMHgyQywgMHgyRCwgMHgyRSwgMHgyRiwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgICNgICAgICBhICAgICBiICAgICBjICAgICBkICAgICBlICAgICBmICAgICBnICAgCiAgICAweDMwLCAweDMxLCAweDMyLCAweDMzLCAweDM0LCAweDM1LCAweDM2LCBGQUlMLAogICAgI2ggICAgIGkgICAgIGogICAgIGsgICAgIGwgICAgIG0gICAgIG4gICAgIG8gICAKICAgIDB4MzcsIDB4MzgsIDB4MzksIDB4M0EsIDB4M0IsIDB4M0MsIEZBSUwsIEZBSUwsCiAgICAjcCAgICAgcSAgICAgciAgICAgcyAgICAgdCAgICAgdSAgICAgdiAgICAgdyAgIAogICAgMHgzRCwgMHgzRSwgMHgzRiwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgICN4ICAgICB5ICAgICB6ICAgICB7ICAgICB8ICAgICB9ICAgICB+ICAgIF4/ICAgCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKICAgIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsIEZBSUwsCiAgICBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLCBGQUlMLAogICAgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwgRkFJTCwKXQoKZGVmIGEyYl9ocXgocyk6CiAgICByZXN1bHQgPSBbXQoKICAgIGRlZiBxdWFkcnVwbGVzX2dlbihzKToKICAgICAgICB0ID0gW10KICAgICAgICBmb3IgYyBpbiBzOgogICAgICAgICAgICByZXMgPSB0YWJsZV9hMmJfaHF4W29yZChjKV0KICAgICAgICAgICAgaWYgcmVzID09IFNLSVA6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHJlcyA9PSBGQUlMOgogICAgICAgICAgICAgICAgcmFpc2UgRXJyb3IoJ0lsbGVnYWwgY2hhcmFjdGVyJykKICAgICAgICAgICAgZWxpZiByZXMgPT0gRE9ORToKICAgICAgICAgICAgICAgIHlpZWxkIHQKICAgICAgICAgICAgICAgIHJhaXNlIERvbmUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHQuYXBwZW5kKHJlcykKICAgICAgICAgICAgaWYgbGVuKHQpID09IDQ6CiAgICAgICAgICAgICAgICB5aWVsZCB0CiAgICAgICAgICAgICAgICB0ID0gW10KICAgICAgICB5aWVsZCB0CiAgICAgICAgCiAgICBkb25lID0gMAogICAgdHJ5OgogICAgICAgIGZvciBzbmlwcGV0IGluIHF1YWRydXBsZXNfZ2VuKHMpOgogICAgICAgICAgICBsZW5ndGggPSBsZW4oc25pcHBldCkKICAgICAgICAgICAgaWYgbGVuZ3RoID09IDQ6CiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGNocigoKHNuaXBwZXRbMF0gJiAweDNmKSA8PCAyKSB8IChzbmlwcGV0WzFdID4+IDQpKSkgCiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGNocigoKHNuaXBwZXRbMV0gJiAweDBmKSA8PCA0KSB8IChzbmlwcGV0WzJdID4+IDIpKSkgCiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGNocigoKHNuaXBwZXRbMl0gJiAweDAzKSA8PCA2KSB8IChzbmlwcGV0WzNdKSkpIAogICAgICAgICAgICBlbGlmIGxlbmd0aCA9PSAzOgogICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoKChzbmlwcGV0WzBdICYgMHgzZikgPDwgMikgfCAoc25pcHBldFsxXSA+PiA0KSkpIAogICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoKChzbmlwcGV0WzFdICYgMHgwZikgPDwgNCkgfCAoc25pcHBldFsyXSA+PiAyKSkpIAogICAgICAgICAgICBlbGlmIGxlbmd0aCA9PSAyOgogICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoKChzbmlwcGV0WzBdICYgMHgzZikgPDwgMikgfCAoc25pcHBldFsxXSA+PiA0KSkpIAogICAgZXhjZXB0IERvbmU6CiAgICAgICAgZG9uZSA9IDEKICAgIGV4Y2VwdCBFcnJvcjoKICAgICAgICByYWlzZQogICAgcmV0dXJuICgnJy5qb2luKHJlc3VsdCksIGRvbmUpCgpkZWYgYjJhX2hxeChzKToKICAgIHJlc3VsdCA9W10KCiAgICBkZWYgdHJpcGxlc19nZW4ocyk6CiAgICAgICAgd2hpbGUgczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgeWllbGQgb3JkKHNbMF0pLCBvcmQoc1sxXSksIG9yZChzWzJdKQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgICAgIHlpZWxkIHR1cGxlKFtvcmQoYykgZm9yIGMgaW4gc10pCiAgICAgICAgICAgIHMgPSBzWzM6XQoKICAgIGZvciBzbmlwcGV0IGluIHRyaXBsZXNfZ2VuKHMpOgogICAgICAgIGxlbmd0aCA9IGxlbihzbmlwcGV0KQogICAgICAgIGlmIGxlbmd0aCA9PSAzOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKAogICAgICAgICAgICAgICAgaHF4X2VuY29kaW5nWyhzbmlwcGV0WzBdICYgMHhmYykgPj4gMl0pCiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoaHF4X2VuY29kaW5nWwogICAgICAgICAgICAgICAgKChzbmlwcGV0WzBdICYgMHgwMykgPDwgNCkgfCAoKHNuaXBwZXRbMV0gJiAweGYwKSA+PiA0KV0pCiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoaHF4X2VuY29kaW5nWwogICAgICAgICAgICAgICAgKHNuaXBwZXRbMV0gJiAweDBmKSA8PCAyIHwgKChzbmlwcGV0WzJdICYgMHhjMCkgPj4gNildKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGhxeF9lbmNvZGluZ1tzbmlwcGV0WzJdICYgMHgzZl0pCiAgICAgICAgZWxpZiBsZW5ndGggPT0gMjoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgKICAgICAgICAgICAgICAgIGhxeF9lbmNvZGluZ1soc25pcHBldFswXSAmIDB4ZmMpID4+IDJdKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGhxeF9lbmNvZGluZ1sKICAgICAgICAgICAgICAgICgoc25pcHBldFswXSAmIDB4MDMpIDw8IDQpIHwgKChzbmlwcGV0WzFdICYgMHhmMCkgPj4gNCldKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGhxeF9lbmNvZGluZ1sKICAgICAgICAgICAgICAgIChzbmlwcGV0WzFdICYgMHgwZikgPDwgMl0pCiAgICAgICAgZWxpZiBsZW5ndGggPT0gMToKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgKICAgICAgICAgICAgICAgIGhxeF9lbmNvZGluZ1soc25pcHBldFswXSAmIDB4ZmMpID4+IDJdKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGhxeF9lbmNvZGluZ1sKICAgICAgICAgICAgICAgICgoc25pcHBldFswXSAmIDB4MDMpIDw8IDQpXSkKICAgIHJldHVybiAnJy5qb2luKHJlc3VsdCkKCmNyY3RhYl9ocXggPSBbCiAgICAgICAgMHgwMDAwLCAweDEwMjEsIDB4MjA0MiwgMHgzMDYzLCAweDQwODQsIDB4NTBhNSwgMHg2MGM2LCAweDcwZTcsCiAgICAgICAgMHg4MTA4LCAweDkxMjksIDB4YTE0YSwgMHhiMTZiLCAweGMxOGMsIDB4ZDFhZCwgMHhlMWNlLCAweGYxZWYsCiAgICAgICAgMHgxMjMxLCAweDAyMTAsIDB4MzI3MywgMHgyMjUyLCAweDUyYjUsIDB4NDI5NCwgMHg3MmY3LCAweDYyZDYsCiAgICAgICAgMHg5MzM5LCAweDgzMTgsIDB4YjM3YiwgMHhhMzVhLCAweGQzYmQsIDB4YzM5YywgMHhmM2ZmLCAweGUzZGUsCiAgICAgICAgMHgyNDYyLCAweDM0NDMsIDB4MDQyMCwgMHgxNDAxLCAweDY0ZTYsIDB4NzRjNywgMHg0NGE0LCAweDU0ODUsCiAgICAgICAgMHhhNTZhLCAweGI1NGIsIDB4ODUyOCwgMHg5NTA5LCAweGU1ZWUsIDB4ZjVjZiwgMHhjNWFjLCAweGQ1OGQsCiAgICAgICAgMHgzNjUzLCAweDI2NzIsIDB4MTYxMSwgMHgwNjMwLCAweDc2ZDcsIDB4NjZmNiwgMHg1Njk1LCAweDQ2YjQsCiAgICAgICAgMHhiNzViLCAweGE3N2EsIDB4OTcxOSwgMHg4NzM4LCAweGY3ZGYsIDB4ZTdmZSwgMHhkNzlkLCAweGM3YmMsCiAgICAgICAgMHg0OGM0LCAweDU4ZTUsIDB4Njg4NiwgMHg3OGE3LCAweDA4NDAsIDB4MTg2MSwgMHgyODAyLCAweDM4MjMsCiAgICAgICAgMHhjOWNjLCAweGQ5ZWQsIDB4ZTk4ZSwgMHhmOWFmLCAweDg5NDgsIDB4OTk2OSwgMHhhOTBhLCAweGI5MmIsCiAgICAgICAgMHg1YWY1LCAweDRhZDQsIDB4N2FiNywgMHg2YTk2LCAweDFhNzEsIDB4MGE1MCwgMHgzYTMzLCAweDJhMTIsCiAgICAgICAgMHhkYmZkLCAweGNiZGMsIDB4ZmJiZiwgMHhlYjllLCAweDliNzksIDB4OGI1OCwgMHhiYjNiLCAweGFiMWEsCiAgICAgICAgMHg2Y2E2LCAweDdjODcsIDB4NGNlNCwgMHg1Y2M1LCAweDJjMjIsIDB4M2MwMywgMHgwYzYwLCAweDFjNDEsCiAgICAgICAgMHhlZGFlLCAweGZkOGYsIDB4Y2RlYywgMHhkZGNkLCAweGFkMmEsIDB4YmQwYiwgMHg4ZDY4LCAweDlkNDksCiAgICAgICAgMHg3ZTk3LCAweDZlYjYsIDB4NWVkNSwgMHg0ZWY0LCAweDNlMTMsIDB4MmUzMiwgMHgxZTUxLCAweDBlNzAsCiAgICAgICAgMHhmZjlmLCAweGVmYmUsIDB4ZGZkZCwgMHhjZmZjLCAweGJmMWIsIDB4YWYzYSwgMHg5ZjU5LCAweDhmNzgsCiAgICAgICAgMHg5MTg4LCAweDgxYTksIDB4YjFjYSwgMHhhMWViLCAweGQxMGMsIDB4YzEyZCwgMHhmMTRlLCAweGUxNmYsCiAgICAgICAgMHgxMDgwLCAweDAwYTEsIDB4MzBjMiwgMHgyMGUzLCAweDUwMDQsIDB4NDAyNSwgMHg3MDQ2LCAweDYwNjcsCiAgICAgICAgMHg4M2I5LCAweDkzOTgsIDB4YTNmYiwgMHhiM2RhLCAweGMzM2QsIDB4ZDMxYywgMHhlMzdmLCAweGYzNWUsCiAgICAgICAgMHgwMmIxLCAweDEyOTAsIDB4MjJmMywgMHgzMmQyLCAweDQyMzUsIDB4NTIxNCwgMHg2Mjc3LCAweDcyNTYsCiAgICAgICAgMHhiNWVhLCAweGE1Y2IsIDB4OTVhOCwgMHg4NTg5LCAweGY1NmUsIDB4ZTU0ZiwgMHhkNTJjLCAweGM1MGQsCiAgICAgICAgMHgzNGUyLCAweDI0YzMsIDB4MTRhMCwgMHgwNDgxLCAweDc0NjYsIDB4NjQ0NywgMHg1NDI0LCAweDQ0MDUsCiAgICAgICAgMHhhN2RiLCAweGI3ZmEsIDB4ODc5OSwgMHg5N2I4LCAweGU3NWYsIDB4Zjc3ZSwgMHhjNzFkLCAweGQ3M2MsCiAgICAgICAgMHgyNmQzLCAweDM2ZjIsIDB4MDY5MSwgMHgxNmIwLCAweDY2NTcsIDB4NzY3NiwgMHg0NjE1LCAweDU2MzQsCiAgICAgICAgMHhkOTRjLCAweGM5NmQsIDB4ZjkwZSwgMHhlOTJmLCAweDk5YzgsIDB4ODllOSwgMHhiOThhLCAweGE5YWIsCiAgICAgICAgMHg1ODQ0LCAweDQ4NjUsIDB4NzgwNiwgMHg2ODI3LCAweDE4YzAsIDB4MDhlMSwgMHgzODgyLCAweDI4YTMsCiAgICAgICAgMHhjYjdkLCAweGRiNWMsIDB4ZWIzZiwgMHhmYjFlLCAweDhiZjksIDB4OWJkOCwgMHhhYmJiLCAweGJiOWEsCiAgICAgICAgMHg0YTc1LCAweDVhNTQsIDB4NmEzNywgMHg3YTE2LCAweDBhZjEsIDB4MWFkMCwgMHgyYWIzLCAweDNhOTIsCiAgICAgICAgMHhmZDJlLCAweGVkMGYsIDB4ZGQ2YywgMHhjZDRkLCAweGJkYWEsIDB4YWQ4YiwgMHg5ZGU4LCAweDhkYzksCiAgICAgICAgMHg3YzI2LCAweDZjMDcsIDB4NWM2NCwgMHg0YzQ1LCAweDNjYTIsIDB4MmM4MywgMHgxY2UwLCAweDBjYzEsCiAgICAgICAgMHhlZjFmLCAweGZmM2UsIDB4Y2Y1ZCwgMHhkZjdjLCAweGFmOWIsIDB4YmZiYSwgMHg4ZmQ5LCAweDlmZjgsCiAgICAgICAgMHg2ZTE3LCAweDdlMzYsIDB4NGU1NSwgMHg1ZTc0LCAweDJlOTMsIDB4M2ViMiwgMHgwZWQxLCAweDFlZjAsCl0KCmRlZiBjcmNfaHF4KHMsIGNyYyk6CiAgICBmb3IgYyBpbiBzOgogICAgICAgIGNyYyA9ICgoY3JjIDw8IDgpICYgMHhmZjAwKSBeIGNyY3RhYl9ocXhbKChjcmMgPj4gOCkgJiAweGZmKSBeIG9yZChjKV0KCiAgICByZXR1cm4gY3JjCgpkZWYgcmxlY29kZV9ocXgocyk6CiAgICAiIiIKICAgIFJ1biBsZW5ndGggZW5jb2RpbmcgZm9yIGJpbmhleDQuCiAgICBUaGUgQ1B5dGhvbiBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdCBkbyBydW4gbGVuZ3RoIGVuY29kaW5nCiAgICBvZiBceDkwIGNoYXJhY3RlcnMuIFRoaXMgaW1wbGVtZW50YXRpb24gZG9lcy4KICAgICIiIgogICAgaWYgbm90IHM6CiAgICAgICAgcmV0dXJuICcnCiAgICByZXN1bHQgPSBbXQogICAgcHJldiA9IHNbMF0KICAgIGNvdW50ID0gMQogICAgIyBBZGQgYSBkdW1teSBjaGFyYWN0ZXIgdG8gZ2V0IHRoZSBsb29wIHRvIGdvIG9uZSBleHRyYSByb3VuZC4KICAgICMgVGhlIGR1bW15IG11c3QgYmUgZGlmZmVyZW50IGZyb20gdGhlIGxhc3QgY2hhcmFjdGVyIG9mIHMuCiAgICAjIEluIHRoZSBzYW1lIHN0ZXAgd2UgcmVtb3ZlIHRoZSBmaXJzdCBjaGFyYWN0ZXIsIHdoaWNoIGhhcwogICAgIyBhbHJlYWR5IGJlZW4gc3RvcmVkIGluIHByZXYuCiAgICBpZiBzWy0xXSA9PSAnISc6CiAgICAgICAgcyA9IHNbMTpdICsgJz8nCiAgICBlbHNlOgogICAgICAgIHMgPSBzWzE6XSArICchJwogICAgICAgIAogICAgZm9yIGMgaW4gczoKICAgICAgICBpZiBjID09IHByZXYgYW5kIGNvdW50IDwgMjU1OgogICAgICAgICAgICBjb3VudCArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgY291bnQgPT0gMToKICAgICAgICAgICAgICAgIGlmIHByZXYgIT0gJ1x4OTAnOgogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQocHJldikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmV4dGVuZChbJ1x4OTAnLCAnXHgwMCddKQogICAgICAgICAgICBlbGlmIGNvdW50IDwgNDoKICAgICAgICAgICAgICAgIGlmIHByZXYgIT0gJ1x4OTAnOgogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5leHRlbmQoW3ByZXZdICogY291bnQpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5leHRlbmQoWydceDkwJywgJ1x4MDAnXSAqIGNvdW50KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgcHJldiAhPSAnXHg5MCc6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmV4dGVuZChbcHJldiwgJ1x4OTAnLCBjaHIoY291bnQpXSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmV4dGVuZChbJ1x4OTAnLCAnXHgwMCcsICdceDkwJywgY2hyKGNvdW50KV0pIAogICAgICAgICAgICBjb3VudCA9IDEKICAgICAgICAgICAgcHJldiA9IGMKICAgICAgICAKICAgIHJldHVybiAnJy5qb2luKHJlc3VsdCkKCmRlZiBybGVkZWNvZGVfaHF4KHMpOgogICAgcyA9IHMuc3BsaXQoJ1x4OTAnKQogICAgcmVzdWx0ID0gW3NbMF1dCiAgICBwcmV2ID0gc1swXQogICAgZm9yIHNuaXBwZXQgaW4gc1sxOl06CiAgICAgICAgY291bnQgPSBvcmQoc25pcHBldFswXSkKICAgICAgICBpZiBjb3VudCA+IDA6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQocHJldlstMV0gKiAoY291bnQtMSkpCiAgICAgICAgICAgIHByZXYgPSBzbmlwcGV0CiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXHg5MCcpCiAgICAgICAgICAgIHByZXYgPSAnXHg5MCcKICAgICAgICByZXN1bHQuYXBwZW5kKHNuaXBwZXRbMTpdKQoKICAgIHJldHVybiAnJy5qb2luKHJlc3VsdCkKCmNyY18zMl90YWIgPSBbCiAgICAweDAwMDAwMDAwLCAweDc3MDczMDk2LCAweGVlMGU2MTJjLCAweDk5MDk1MWJhLCAweDA3NmRjNDE5LAogICAgMHg3MDZhZjQ4ZiwgMHhlOTYzYTUzNSwgMHg5ZTY0OTVhMywgMHgwZWRiODgzMiwgMHg3OWRjYjhhNCwKICAgIDB4ZTBkNWU5MWUsIDB4OTdkMmQ5ODgsIDB4MDliNjRjMmIsIDB4N2ViMTdjYmQsIDB4ZTdiODJkMDcsCiAgICAweDkwYmYxZDkxLCAweDFkYjcxMDY0LCAweDZhYjAyMGYyLCAweGYzYjk3MTQ4LCAweDg0YmU0MWRlLAogICAgMHgxYWRhZDQ3ZCwgMHg2ZGRkZTRlYiwgMHhmNGQ0YjU1MSwgMHg4M2QzODVjNywgMHgxMzZjOTg1NiwKICAgIDB4NjQ2YmE4YzAsIDB4ZmQ2MmY5N2EsIDB4OGE2NWM5ZWMsIDB4MTQwMTVjNGYsIDB4NjMwNjZjZDksCiAgICAweGZhMGYzZDYzLCAweDhkMDgwZGY1LCAweDNiNmUyMGM4LCAweDRjNjkxMDVlLCAweGQ1NjA0MWU0LAogICAgMHhhMjY3NzE3MiwgMHgzYzAzZTRkMSwgMHg0YjA0ZDQ0NywgMHhkMjBkODVmZCwgMHhhNTBhYjU2YiwKICAgIDB4MzViNWE4ZmEsIDB4NDJiMjk4NmMsIDB4ZGJiYmM5ZDYsIDB4YWNiY2Y5NDAsIDB4MzJkODZjZTMsCiAgICAweDQ1ZGY1Yzc1LCAweGRjZDYwZGNmLCAweGFiZDEzZDU5LCAweDI2ZDkzMGFjLCAweDUxZGUwMDNhLAogICAgMHhjOGQ3NTE4MCwgMHhiZmQwNjExNiwgMHgyMWI0ZjRiNSwgMHg1NmIzYzQyMywgMHhjZmJhOTU5OSwKICAgIDB4YjhiZGE1MGYsIDB4MjgwMmI4OWUsIDB4NWYwNTg4MDgsIDB4YzYwY2Q5YjIsIDB4YjEwYmU5MjQsCiAgICAweDJmNmY3Yzg3LCAweDU4Njg0YzExLCAweGMxNjExZGFiLCAweGI2NjYyZDNkLCAweDc2ZGM0MTkwLAogICAgMHgwMWRiNzEwNiwgMHg5OGQyMjBiYywgMHhlZmQ1MTAyYSwgMHg3MWIxODU4OSwgMHgwNmI2YjUxZiwKICAgIDB4OWZiZmU0YTUsIDB4ZThiOGQ0MzMsIDB4NzgwN2M5YTIsIDB4MGYwMGY5MzQsIDB4OTYwOWE4OGUsCiAgICAweGUxMGU5ODE4LCAweDdmNmEwZGJiLCAweDA4NmQzZDJkLCAweDkxNjQ2Yzk3LCAweGU2NjM1YzAxLAogICAgMHg2YjZiNTFmNCwgMHgxYzZjNjE2MiwgMHg4NTY1MzBkOCwgMHhmMjYyMDA0ZSwgMHg2YzA2OTVlZCwKICAgIDB4MWIwMWE1N2IsIDB4ODIwOGY0YzEsIDB4ZjUwZmM0NTcsIDB4NjViMGQ5YzYsIDB4MTJiN2U5NTAsCiAgICAweDhiYmViOGVhLCAweGZjYjk4ODdjLCAweDYyZGQxZGRmLCAweDE1ZGEyZDQ5LCAweDhjZDM3Y2YzLAogICAgMHhmYmQ0NGM2NSwgMHg0ZGIyNjE1OCwgMHgzYWI1NTFjZSwgMHhhM2JjMDA3NCwgMHhkNGJiMzBlMiwKICAgIDB4NGFkZmE1NDEsIDB4M2RkODk1ZDcsIDB4YTRkMWM0NmQsIDB4ZDNkNmY0ZmIsIDB4NDM2OWU5NmEsCiAgICAweDM0NmVkOWZjLCAweGFkNjc4ODQ2LCAweGRhNjBiOGQwLCAweDQ0MDQyZDczLCAweDMzMDMxZGU1LAogICAgMHhhYTBhNGM1ZiwgMHhkZDBkN2NjOSwgMHg1MDA1NzEzYywgMHgyNzAyNDFhYSwgMHhiZTBiMTAxMCwKICAgIDB4YzkwYzIwODYsIDB4NTc2OGI1MjUsIDB4MjA2Zjg1YjMsIDB4Yjk2NmQ0MDksIDB4Y2U2MWU0OWYsCiAgICAweDVlZGVmOTBlLCAweDI5ZDljOTk4LCAweGIwZDA5ODIyLCAweGM3ZDdhOGI0LCAweDU5YjMzZDE3LAogICAgMHgyZWI0MGQ4MSwgMHhiN2JkNWMzYiwgMHhjMGJhNmNhZCwgMHhlZGI4ODMyMCwgMHg5YWJmYjNiNiwKICAgIDB4MDNiNmUyMGMsIDB4NzRiMWQyOWEsIDB4ZWFkNTQ3MzksIDB4OWRkMjc3YWYsIDB4MDRkYjI2MTUsCiAgICAweDczZGMxNjgzLCAweGUzNjMwYjEyLCAweDk0NjQzYjg0LCAweDBkNmQ2YTNlLCAweDdhNmE1YWE4LAogICAgMHhlNDBlY2YwYiwgMHg5MzA5ZmY5ZCwgMHgwYTAwYWUyNywgMHg3ZDA3OWViMSwgMHhmMDBmOTM0NCwKICAgIDB4ODcwOGEzZDIsIDB4MWUwMWYyNjgsIDB4NjkwNmMyZmUsIDB4Zjc2MjU3NWQsIDB4ODA2NTY3Y2IsCiAgICAweDE5NmMzNjcxLCAweDZlNmIwNmU3LCAweGZlZDQxYjc2LCAweDg5ZDMyYmUwLCAweDEwZGE3YTVhLAogICAgMHg2N2RkNGFjYywgMHhmOWI5ZGY2ZiwgMHg4ZWJlZWZmOSwgMHgxN2I3YmU0MywgMHg2MGIwOGVkNSwKICAgIDB4ZDZkNmEzZTgsIDB4YTFkMTkzN2UsIDB4MzhkOGMyYzQsIDB4NGZkZmYyNTIsIDB4ZDFiYjY3ZjEsCiAgICAweGE2YmM1NzY3LCAweDNmYjUwNmRkLCAweDQ4YjIzNjRiLCAweGQ4MGQyYmRhLCAweGFmMGExYjRjLAogICAgMHgzNjAzNGFmNiwgMHg0MTA0N2E2MCwgMHhkZjYwZWZjMywgMHhhODY3ZGY1NSwgMHgzMTZlOGVlZiwKICAgIDB4NDY2OWJlNzksIDB4Y2I2MWIzOGMsIDB4YmM2NjgzMWEsIDB4MjU2ZmQyYTAsIDB4NTI2OGUyMzYsCiAgICAweGNjMGM3Nzk1LCAweGJiMGI0NzAzLCAweDIyMDIxNmI5LCAweDU1MDUyNjJmLCAweGM1YmEzYmJlLAogICAgMHhiMmJkMGIyOCwgMHgyYmI0NWE5MiwgMHg1Y2IzNmEwNCwgMHhjMmQ3ZmZhNywgMHhiNWQwY2YzMSwKICAgIDB4MmNkOTllOGIsIDB4NWJkZWFlMWQsIDB4OWI2NGMyYjAsIDB4ZWM2M2YyMjYsIDB4NzU2YWEzOWMsCiAgICAweDAyNmQ5MzBhLCAweDljMDkwNmE5LCAweGViMGUzNjNmLCAweDcyMDc2Nzg1LCAweDA1MDA1NzEzLAogICAgMHg5NWJmNGE4MiwgMHhlMmI4N2ExNCwgMHg3YmIxMmJhZSwgMHgwY2I2MWIzOCwgMHg5MmQyOGU5YiwKICAgIDB4ZTVkNWJlMGQsIDB4N2NkY2VmYjcsIDB4MGJkYmRmMjEsIDB4ODZkM2QyZDQsIDB4ZjFkNGUyNDIsCiAgICAweDY4ZGRiM2Y4LCAweDFmZGE4MzZlLCAweDgxYmUxNmNkLCAweGY2YjkyNjViLCAweDZmYjA3N2UxLAogICAgMHgxOGI3NDc3NywgMHg4ODA4NWFlNiwgMHhmZjBmNmE3MCwgMHg2NjA2M2JjYSwgMHgxMTAxMGI1YywKICAgIDB4OGY2NTllZmYsIDB4Zjg2MmFlNjksIDB4NjE2YmZmZDMsIDB4MTY2Y2NmNDUsIDB4YTAwYWUyNzgsCiAgICAweGQ3MGRkMmVlLCAweDRlMDQ4MzU0LCAweDM5MDNiM2MyLCAweGE3NjcyNjYxLCAweGQwNjAxNmY3LAogICAgMHg0OTY5NDc0ZCwgMHgzZTZlNzdkYiwgMHhhZWQxNmE0YSwgMHhkOWQ2NWFkYywgMHg0MGRmMGI2NiwKICAgIDB4MzdkODNiZjAsIDB4YTliY2FlNTMsIDB4ZGViYjllYzUsIDB4NDdiMmNmN2YsIDB4MzBiNWZmZTksCiAgICAweGJkYmRmMjFjLCAweGNhYmFjMjhhLCAweDUzYjM5MzMwLCAweDI0YjRhM2E2LCAweGJhZDAzNjA1LAogICAgMHhjZGQ3MDY5MywgMHg1NGRlNTcyOSwgMHgyM2Q5NjdiZiwgMHhiMzY2N2EyZSwgMHhjNDYxNGFiOCwKICAgIDB4NWQ2ODFiMDIsIDB4MmE2ZjJiOTQsIDB4YjQwYmJlMzcsIDB4YzMwYzhlYTEsIDB4NWEwNWRmMWIsCiAgICAweDJkMDJlZjhkCl0KCmRlZiBjcmMzMihzLCBjcmM9MCk6CiAgICByZXN1bHQgPSAwCiAgICBjcmMgPSB+aW50KGNyYykgJiAweGZmZmZmZmZmCiAgICAjY3JjID0gfmxvbmcoY3JjKSAmIDB4ZmZmZmZmZmZMCiAgICBmb3IgYyBpbiBzOgogICAgICAgIGNyYyA9IGNyY18zMl90YWJbKGNyYyBeIGludChvcmQoYykpKSAmIDB4ZmZdIF4gKGNyYyA+PiA4KQogICAgICAgICNjcmMgPSBjcmNfMzJfdGFiWyhjcmMgXiBsb25nKG9yZChjKSkpICYgMHhmZkxdIF4gKGNyYyA+PiA4KQogICAgICAgICMvKiBOb3RlOiAgKGNyYyA+PiA4KSBNVVNUIHplcm8gZmlsbCBvbiBsZWZ0CgogICAgcmVzdWx0ID0gY3JjIF4gMHhmZmZmZmZmZgogICAgCiAgICBpZiByZXN1bHQgPiAyKiozMToKICAgICAgICByZXN1bHQgPSAoKHJlc3VsdCArIDIqKjMxKSAlIDIqKjMyKSAtIDIqKjMxCgogICAgcmV0dXJuIHJlc3VsdAoKZGVmIGIyYV9oZXgocyk6CiAgICByZXN1bHQgPSBbXQogICAgZm9yIGNoYXIgaW4gczoKICAgICAgICBjID0gKG9yZChjaGFyKSA+PiA0KSAmIDB4ZgogICAgICAgIGlmIGMgPiA5OgogICAgICAgICAgICBjID0gYyArIG9yZCgnYScpIC0gMTAKICAgICAgICBlbHNlOgogICAgICAgICAgICBjID0gYyArIG9yZCgnMCcpCiAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoYykpCiAgICAgICAgYyA9IG9yZChjaGFyKSAmIDB4ZgogICAgICAgIGlmIGMgPiA5OgogICAgICAgICAgICBjID0gYyArIG9yZCgnYScpIC0gMTAKICAgICAgICBlbHNlOgogICAgICAgICAgICBjID0gYyArIG9yZCgnMCcpCiAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoYykpCiAgICByZXR1cm4gJycuam9pbihyZXN1bHQpCgpoZXhsaWZ5ID0gYjJhX2hleAoKdGFibGVfaGV4ID0gWwogICAgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsCiAgICAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwKICAgIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLAogICAgMCwgMSwgMiwgMywgIDQsIDUsIDYsIDcsICA4LCA5LC0xLC0xLCAtMSwtMSwtMSwtMSwKICAgIC0xLDEwLDExLDEyLCAxMywxNCwxNSwtMSwgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLAogICAgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsCiAgICAtMSwxMCwxMSwxMiwgMTMsMTQsMTUsLTEsIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwKICAgIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xCl0KCgpkZWYgYTJiX2hleCh0KToKICAgIHJlc3VsdCA9IFtdCgogICAgZGVmIHBhaXJzX2dlbihzKToKICAgICAgICB3aGlsZSBzOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB5aWVsZCB0YWJsZV9oZXhbb3JkKHNbMF0pXSwgdGFibGVfaGV4W29yZChzWzFdKV0KICAgICAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgICAgICBpZiBsZW4ocyk6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdPZGQtbGVuZ3RoIHN0cmluZycpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgcyA9IHNbMjpdCgogICAgZm9yIGEsIGIgaW4gcGFpcnNfZ2VuKHQpOgogICAgICAgIGlmIGEgPCAwIG9yIGIgPCAwOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ05vbi1oZXhhZGVjaW1hbCBkaWdpdCBmb3VuZCcpCiAgICAgICAgcmVzdWx0LmFwcGVuZChjaHIoKGEgPDwgNCkgKyBiKSkKICAgIHJldHVybiAnJy5qb2luKHJlc3VsdCkKICAgIAoKdW5oZXhsaWZ5ID0gYTJiX2hleAo=',
'/Lib/antigravity.py':'aW1wb3J0IHdlYmJyb3dzZXIKaW1wb3J0IGhhc2hsaWIKCndlYmJyb3dzZXIub3BlbigiaHR0cDovL3hrY2QuY29tLzM1My8iKQoKZGVmIGdlb2hhc2gobGF0aXR1ZGUsIGxvbmdpdHVkZSwgZGF0ZWRvdyk6CiAgICAnJydDb21wdXRlIGdlb2hhc2goKSB1c2luZyB0aGUgTXVucm9lIGFsZ29yaXRobS4KCiAgICA+Pj4gZ2VvaGFzaCgzNy40MjE1NDIsIC0xMjIuMDg1NTg5LCBiJzIwMDUtMDUtMjYtMTA0NTguNjgnKQogICAgMzcuODU3NzEzIC0xMjIuNTQ0NTQzCgogICAgJycnCiAgICAjIGh0dHA6Ly94a2NkLmNvbS80MjYvCiAgICBoID0gaGFzaGxpYi5tZDUoZGF0ZWRvdykuaGV4ZGlnZXN0KCkKICAgIHAsIHEgPSBbKCclZicgJSBmbG9hdC5mcm9taGV4KCcwLicgKyB4KSkgZm9yIHggaW4gKGhbOjE2XSwgaFsxNjozMl0pXQogICAgcHJpbnQoJyVkJXMgJWQlcycgJSAobGF0aXR1ZGUsIHBbMTpdLCBsb25naXR1ZGUsIHFbMTpdKSkK',
'/Lib/platform.py':'IyEgL3Vzci9iaW4vcHl0aG9uMy4zCgoiIiIgVGhpcyBtb2R1bGUgdHJpZXMgdG8gcmV0cmlldmUgYXMgbXVjaCBwbGF0Zm9ybS1pZGVudGlmeWluZyBkYXRhIGFzCiAgICBwb3NzaWJsZS4gSXQgbWFrZXMgdGhpcyBpbmZvcm1hdGlvbiBhdmFpbGFibGUgdmlhIGZ1bmN0aW9uIEFQSXMuCgogICAgSWYgY2FsbGVkIGZyb20gdGhlIGNvbW1hbmQgbGluZSwgaXQgcHJpbnRzIHRoZSBwbGF0Zm9ybQogICAgaW5mb3JtYXRpb24gY29uY2F0ZW5hdGVkIGFzIHNpbmdsZSBzdHJpbmcgdG8gc3Rkb3V0LiBUaGUgb3V0cHV0CiAgICBmb3JtYXQgaXMgdXNlYWJsZSBhcyBwYXJ0IG9mIGEgZmlsZW5hbWUuCgoiIiIKIyAgICBUaGlzIG1vZHVsZSBpcyBtYWludGFpbmVkIGJ5IE1hcmMtQW5kcmUgTGVtYnVyZyA8bWFsQGVnZW5peC5jb20+LgojICAgIElmIHlvdSBmaW5kIHByb2JsZW1zLCBwbGVhc2Ugc3VibWl0IGJ1ZyByZXBvcnRzL3BhdGNoZXMgdmlhIHRoZQojICAgIFB5dGhvbiBidWcgdHJhY2tlciAoaHR0cDovL2J1Z3MucHl0aG9uLm9yZykgYW5kIGFzc2lnbiB0aGVtIHRvICJsZW1idXJnIi4KIwojICAgIFN0aWxsIG5lZWRlZDoKIyAgICAqIG1vcmUgc3VwcG9ydCBmb3IgV2luQ0UKIyAgICAqIHN1cHBvcnQgZm9yIE1TLURPUyAoUHl0aG9uRFggPykKIyAgICAqIHN1cHBvcnQgZm9yIEFtaWdhIGFuZCBvdGhlciBzdGlsbCB1bnN1cHBvcnRlZCBwbGF0Zm9ybXMgcnVubmluZyBQeXRob24KIyAgICAqIHN1cHBvcnQgZm9yIGFkZGl0aW9uYWwgTGludXggZGlzdHJpYnV0aW9ucwojCiMgICAgTWFueSB0aGFua3MgdG8gYWxsIHRob3NlIHdobyBoZWxwZWQgYWRkaW5nIHBsYXRmb3JtLXNwZWNpZmljCiMgICAgY2hlY2tzIChpbiBubyBwYXJ0aWN1bGFyIG9yZGVyKToKIwojICAgICAgQ2hhcmxlcyBHIFdhbGRtYW4sIERhdmlkIEFybm9sZCwgR29yZG9uIE1jTWlsbGFuLCBCZW4gRGFybmVsbCwKIyAgICAgIEplZmYgQmF1ZXIsIENsaWZmIENyYXdmb3JkLCBJdmFuIFZhbiBMYW5pbmdoYW0sIEpvc2VmCiMgICAgICBCZXRhbmNvdXJ0LCBSYW5kYWxsIEhvcHBlciwgS2FybCBQdXRsYW5kLCBKb2huIEZhcnJlbGwsIEdyZWcKIyAgICAgIEFuZHJ1aywgSnVzdCB2YW4gUm9zc3VtLCBUaG9tYXMgSGVsbGVyLCBNYXJrIFIuIExldmluc29uLCBNYXJrCiMgICAgICBIYW1tb25kLCBCaWxsIFR1dHQsIEhhbnMgTm93YWssIFV3ZSBaZXNzaW4gKE9wZW5WTVMgc3VwcG9ydCksCiMgICAgICBDb2xpbiBLb25nLCBUcmVudCBNaWNrLCBHdWlkbyB2YW4gUm9zc3VtLCBBbnRob255IEJheHRlcgojCiMgICAgSGlzdG9yeToKIwojICAgIDxzZWUgQ1ZTIGFuZCBTVk4gY2hlY2tpbiBtZXNzYWdlcyBmb3IgaGlzdG9yeT4KIwojICAgIDEuMC43IC0gYWRkZWQgREVWX05VTEwKIyAgICAxLjAuNiAtIGFkZGVkIGxpbnV4X2Rpc3RyaWJ1dGlvbigpCiMgICAgMS4wLjUgLSBmaXhlZCBKYXZhIHN1cHBvcnQgdG8gYWxsb3cgcnVubmluZyB0aGUgbW9kdWxlIG9uIEp5dGhvbgojICAgIDEuMC40IC0gYWRkZWQgSXJvblB5dGhvbiBzdXBwb3J0CiMgICAgMS4wLjMgLSBhZGRlZCBub3JtYWxpemF0aW9uIG9mIFdpbmRvd3Mgc3lzdGVtIG5hbWUKIyAgICAxLjAuMiAtIGFkZGVkIG1vcmUgV2luZG93cyBzdXBwb3J0CiMgICAgMS4wLjEgLSByZWZvcm1hdHRlZCB0byBtYWtlIGRvYy5weSBoYXBweQojICAgIDEuMC4wIC0gcmVmb3JtYXR0ZWQgYSBiaXQgYW5kIGNoZWNrZWQgaW50byBQeXRob24gQ1ZTCiMgICAgMC44LjAgLSBhZGRlZCBzeXMudmVyc2lvbiBwYXJzZXIgYW5kIHZhcmlvdXMgbmV3IGFjY2VzcwojICAgICAgICAgICAgQVBJcyAocHl0aG9uX3ZlcnNpb24oKSwgcHl0aG9uX2NvbXBpbGVyKCksIGV0Yy4pCiMgICAgMC43LjIgLSBmaXhlZCBhcmNoaXRlY3R1cmUoKSB0byB1c2Ugc2l6ZW9mKHBvaW50ZXIpIHdoZXJlIGF2YWlsYWJsZQojICAgIDAuNy4xIC0gYWRkZWQgc3VwcG9ydCBmb3IgQ2FsZGVyYSBPcGVuTGludXgKIyAgICAwLjcuMCAtIHNvbWUgZml4ZXMgZm9yIFdpbkNFOyB1bnRhYmlmaWVkIHRoZSBzb3VyY2UgZmlsZQojICAgIDAuNi4yIC0gc3VwcG9ydCBmb3IgT3BlblZNUyAtIHJlcXVpcmVzIHZlcnNpb24gMS41LjItVjAwNiBvciBoaWdoZXIgYW5kCiMgICAgICAgICAgICB2bXNfbGliLmdldHN5aSgpIGNvbmZpZ3VyZWQKIyAgICAwLjYuMSAtIGFkZGVkIGNvZGUgdG8gcHJldmVudCAndW5hbWUgLXAnIG9uIHBsYXRmb3JtcyB3aGljaCBhcmUKIyAgICAgICAgICAgIGtub3duIG5vdCB0byBzdXBwb3J0IGl0CiMgICAgMC42LjAgLSBmaXhlZCB3aW4zMl92ZXIoKSB0byBob3BlZnVsbHkgd29yayBvbiBXaW45NSw5OCxOVCBhbmQgV2luMms7CiMgICAgICAgICAgICBkaWQgc29tZSBjbGVhbnVwIG9mIHRoZSBpbnRlcmZhY2VzIC0gc29tZSBBUElzIGhhdmUgY2hhbmdlZAojICAgIDAuNS41IC0gZml4ZWQgYW5vdGhlciB0eXBlIGluIHRoZSBNYWNPUyBjb2RlLi4uIHNob3VsZCBoYXZlCiMgICAgICAgICAgICB1c2VkIG1vcmUgY29mZmVlIHRvZGF5IDstKQojICAgIDAuNS40IC0gZml4ZWQgYSBmZXcgdHlwb3MgaW4gdGhlIE1hY09TIGNvZGUKIyAgICAwLjUuMyAtIGFkZGVkIGV4cGVyaW1lbnRhbCBNYWNPUyBzdXBwb3J0OyBhZGRlZCBiZXR0ZXIgcG9wZW4oKQojICAgICAgICAgICAgd29ya2Fyb3VuZHMgaW4gX3N5c2NtZF92ZXIoKSAtLSBzdGlsbCBub3QgMTAwJSBlbGVnYW50CiMgICAgICAgICAgICB0aG91Z2gKIyAgICAwLjUuMiAtIGZpeGVkIHVuYW1lKCkgdG8gcmV0dXJuICcnIGluc3RlYWQgb2YgJ3Vua25vd24nIGluIGFsbAojICAgICAgICAgICAgcmV0dXJuIHZhbHVlcyAodGhlIHN5c3RlbSB1bmFtZSBjb21tYW5kIHRlbmRzIHRvIHJldHVybgojICAgICAgICAgICAgJ3Vua25vd24nIGluc3RlYWQgb2YganVzdCBsZWF2aW5nIHRoZSBmaWVsZCBlbXRweSkKIyAgICAwLjUuMSAtIGluY2x1ZGVkIGNvZGUgZm9yIHNsYWNrd2FyZSBkaXN0OyBhZGRlZCBleGNlcHRpb24gaGFuZGxlcnMKIyAgICAgICAgICAgIHRvIGNvdmVyIHVwIHNpdHVhdGlvbnMgd2hlcmUgcGxhdGZvcm1zIGRvbid0IGhhdmUgb3MucG9wZW4KIyAgICAgICAgICAgIChlLmcuIE1hYykgb3IgZmFpbCBvbiBzb2NrZXQuZ2V0aG9zdG5hbWUoKTsgZml4ZWQgbGliYwojICAgICAgICAgICAgZGV0ZWN0aW9uIFJFCiMgICAgMC41LjAgLSBjaGFuZ2VkIHRoZSBBUEkgbmFtZXMgcmVmZXJyaW5nIHRvIHN5c3RlbSBjb21tYW5kcyB0byAqc3lzY21kKjsKIyAgICAgICAgICAgIGFkZGVkIGphdmFfdmVyKCk7IG1hZGUgc3lzY21kX3ZlcigpIGEgcHJpdmF0ZQojICAgICAgICAgICAgQVBJICh3YXMgc3lzdGVtX3ZlcigpIGluIHByZXZpb3VzIHZlcnNpb25zKSAtLSB1c2UgdW5hbWUoKQojICAgICAgICAgICAgaW5zdGVhZDsgZXh0ZW5kZWQgdGhlIHdpbjMyX3ZlcigpIHRvIGFsc28gcmV0dXJuIHByb2Nlc3NvcgojICAgICAgICAgICAgdHlwZSBpbmZvcm1hdGlvbgojICAgIDAuNC4wIC0gYWRkZWQgd2luMzJfdmVyKCkgYW5kIG1vZGlmaWVkIHRoZSBwbGF0Zm9ybSgpIG91dHB1dCBmb3IgV2luWFgKIyAgICAwLjMuNCAtIGZpeGVkIGEgYnVnIGluIF9mb2xsb3dfc3ltbGlua3MoKQojICAgIDAuMy4zIC0gZml4ZWQgcG9wZW4oKSBhbmQgImZpbGUiIGNvbW1hbmQgaW52b2thdGlvbiBidWdzCiMgICAgMC4zLjIgLSBhZGRlZCBhcmNoaXRlY3R1cmUoKSBBUEkgYW5kIHN1cHBvcnQgZm9yIGl0IGluIHBsYXRmb3JtKCkKIyAgICAwLjMuMSAtIGZpeGVkIHN5c2NtZF92ZXIoKSBSRSB0byBzdXBwb3J0IFdpbmRvd3MgTlQKIyAgICAwLjMuMCAtIGFkZGVkIHN5c3RlbSBhbGlhcyBzdXBwb3J0CiMgICAgMC4yLjMgLSByZW1vdmVkICd3aW5jZScgYWdhaW4uLi4gb2ggd2VsbC4KIyAgICAwLjIuMiAtIGFkZGVkICd3aW5jZScgdG8gc3lzY21kX3ZlcigpIHN1cHBvcnRlZCBwbGF0Zm9ybXMKIyAgICAwLjIuMSAtIGFkZGVkIGNhY2hlIGxvZ2ljIGFuZCBjaGFuZ2VkIHRoZSBwbGF0Zm9ybSBzdHJpbmcgZm9ybWF0CiMgICAgMC4yLjAgLSBjaGFuZ2VkIHRoZSBBUEkgdG8gdXNlIGZ1bmN0aW9ucyBpbnN0ZWFkIG9mIG1vZHVsZSBnbG9iYWxzCiMgICAgICAgICAgICBzaW5jZSBzb21lIGFjdGlvbiB0YWtlIHRvbyBsb25nIHRvIGJlIHJ1biBvbiBtb2R1bGUgaW1wb3J0CiMgICAgMC4xLjAgLSBmaXJzdCByZWxlYXNlCiMKIyAgICBZb3UgY2FuIGFsd2F5cyBnZXQgdGhlIGxhdGVzdCB2ZXJzaW9uIG9mIHRoaXMgbW9kdWxlIGF0OgojCiMgICAgICAgICAgICAgaHR0cDovL3d3dy5lZ2VuaXguY29tL2ZpbGVzL3B5dGhvbi9wbGF0Zm9ybS5weQojCiMgICAgSWYgdGhhdCBVUkwgc2hvdWxkIGZhaWwsIHRyeSBjb250YWN0aW5nIHRoZSBhdXRob3IuCgpfX2NvcHlyaWdodF9fID0gIiIiCiAgICBDb3B5cmlnaHQgKGMpIDE5OTktMjAwMCwgTWFyYy1BbmRyZSBMZW1idXJnOyBtYWlsdG86bWFsQGxlbWJ1cmcuY29tCiAgICBDb3B5cmlnaHQgKGMpIDIwMDAtMjAxMCwgZUdlbml4LmNvbSBTb2Z0d2FyZSBHbWJIOyBtYWlsdG86aW5mb0BlZ2VuaXguY29tCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBhbmQgaXRzCiAgICBkb2N1bWVudGF0aW9uIGZvciBhbnkgcHVycG9zZSBhbmQgd2l0aG91dCBmZWUgb3Igcm95YWx0eSBpcyBoZXJlYnkgZ3JhbnRlZCwKICAgIHByb3ZpZGVkIHRoYXQgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYXBwZWFyIGluIGFsbCBjb3BpZXMgYW5kIHRoYXQKICAgIGJvdGggdGhhdCBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIGFwcGVhciBpbgogICAgc3VwcG9ydGluZyBkb2N1bWVudGF0aW9uIG9yIHBvcnRpb25zIHRoZXJlb2YsIGluY2x1ZGluZyBtb2RpZmljYXRpb25zLAogICAgdGhhdCB5b3UgbWFrZS4KCiAgICBFR0VOSVguQ09NIFNPRlRXQVJFIEdNQkggRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEggUkVHQVJEIFRPCiAgICBUSElTIFNPRlRXQVJFLCBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5ECiAgICBGSVRORVNTLCBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsCiAgICBJTkRJUkVDVCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcKICAgIEZST00gTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsCiAgICBORUdMSUdFTkNFIE9SIE9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTgogICAgV0lUSCBUSEUgVVNFIE9SIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUgIQoKIiIiCgpfX3ZlcnNpb25fXyA9ICcxLjAuNycKCmltcG9ydCBjb2xsZWN0aW9ucwppbXBvcnQgc3lzLCBvcywgcmUsIHN1YnByb2Nlc3MKCiMjIyBHbG9iYWxzICYgQ29uc3RhbnRzCgojIERldGVybWluZSB0aGUgcGxhdGZvcm0ncyAvZGV2L251bGwgZGV2aWNlCnRyeToKICAgIERFVl9OVUxMID0gb3MuZGV2bnVsbApleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAjIG9zLmRldm51bGwgd2FzIGFkZGVkIGluIFB5dGhvbiAyLjQsIHNvIGVtdWxhdGUgaXQgZm9yIGVhcmxpZXIKICAgICMgUHl0aG9uIHZlcnNpb25zCiAgICBpZiBzeXMucGxhdGZvcm0gaW4gKCdkb3MnLCd3aW4zMicsJ3dpbjE2Jywnb3MyJyk6CiAgICAgICAgIyBVc2UgdGhlIG9sZCBDUC9NIE5VTCBhcyBkZXZpY2UgbmFtZQogICAgICAgIERFVl9OVUxMID0gJ05VTCcKICAgIGVsc2U6CiAgICAgICAgIyBTdGFuZGFyZCBVbml4IHVzZXMgL2Rldi9udWxsCiAgICAgICAgREVWX05VTEwgPSAnL2Rldi9udWxsJwoKIyMjIFBsYXRmb3JtIHNwZWNpZmljIEFQSXMKCl9saWJjX3NlYXJjaCA9IHJlLmNvbXBpbGUoYicoX19saWJjX2luaXQpJwogICAgICAgICAgICAgICAgICAgICAgICAgIGInfCcKICAgICAgICAgICAgICAgICAgICAgICAgICBiJyhHTElCQ18oWzAtOS5dKykpJwogICAgICAgICAgICAgICAgICAgICAgICAgIGInfCcKICAgICAgICAgICAgICAgICAgICAgICAgICBicicobGliYyhfXHcrKT9cLnNvKD86XC4oXGRbMC05Ll0qKSk/KScsIHJlLkFTQ0lJKQoKZGVmIGxpYmNfdmVyKGV4ZWN1dGFibGU9c3lzLmV4ZWN1dGFibGUsbGliPScnLHZlcnNpb249JycsCgogICAgICAgICAgICAgY2h1bmtzaXplPTE2Mzg0KToKCiAgICAiIiIgVHJpZXMgdG8gZGV0ZXJtaW5lIHRoZSBsaWJjIHZlcnNpb24gdGhhdCB0aGUgZmlsZSBleGVjdXRhYmxlCiAgICAgICAgKHdoaWNoIGRlZmF1bHRzIHRvIHRoZSBQeXRob24gaW50ZXJwcmV0ZXIpIGlzIGxpbmtlZCBhZ2FpbnN0LgoKICAgICAgICBSZXR1cm5zIGEgdHVwbGUgb2Ygc3RyaW5ncyAobGliLHZlcnNpb24pIHdoaWNoIGRlZmF1bHQgdG8gdGhlCiAgICAgICAgZ2l2ZW4gcGFyYW1ldGVycyBpbiBjYXNlIHRoZSBsb29rdXAgZmFpbHMuCgogICAgICAgIE5vdGUgdGhhdCB0aGUgZnVuY3Rpb24gaGFzIGludGltYXRlIGtub3dsZWRnZSBvZiBob3cgZGlmZmVyZW50CiAgICAgICAgbGliYyB2ZXJzaW9ucyBhZGQgc3ltYm9scyB0byB0aGUgZXhlY3V0YWJsZSBhbmQgdGh1cyBpcyBwcm9iYWJseQogICAgICAgIG9ubHkgdXNlYWJsZSBmb3IgZXhlY3V0YWJsZXMgY29tcGlsZWQgdXNpbmcgZ2NjLgoKICAgICAgICBUaGUgZmlsZSBpcyByZWFkIGFuZCBzY2FubmVkIGluIGNodW5rcyBvZiBjaHVua3NpemUgYnl0ZXMuCgogICAgIiIiCiAgICBpZiBoYXNhdHRyKG9zLnBhdGgsICdyZWFscGF0aCcpOgogICAgICAgICMgUHl0aG9uIDIuMiBpbnRyb2R1Y2VkIG9zLnBhdGgucmVhbHBhdGgoKTsgaXQgaXMgdXNlZAogICAgICAgICMgaGVyZSB0byB3b3JrIGFyb3VuZCBwcm9ibGVtcyB3aXRoIEN5Z3dpbiBub3QgYmVpbmcKICAgICAgICAjIGFibGUgdG8gb3BlbiBzeW1saW5rcyBmb3IgcmVhZGluZwogICAgICAgIGV4ZWN1dGFibGUgPSBvcy5wYXRoLnJlYWxwYXRoKGV4ZWN1dGFibGUpCiAgICBmID0gb3BlbihleGVjdXRhYmxlLCdyYicpCiAgICBiaW5hcnkgPSBmLnJlYWQoY2h1bmtzaXplKQogICAgcG9zID0gMAogICAgd2hpbGUgMToKICAgICAgICBpZiBiJ2xpYmMnIGluIGJpbmFyeSBvciBiJ0dMSUJDJyBpbiBiaW5hcnk6CiAgICAgICAgICAgIG0gPSBfbGliY19zZWFyY2guc2VhcmNoKGJpbmFyeSxwb3MpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbSA9IE5vbmUKICAgICAgICBpZiBub3QgbToKICAgICAgICAgICAgYmluYXJ5ID0gZi5yZWFkKGNodW5rc2l6ZSkKICAgICAgICAgICAgaWYgbm90IGJpbmFyeToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIHBvcyA9IDAKICAgICAgICAgICAgY29udGludWUKICAgICAgICBsaWJjaW5pdCxnbGliYyxnbGliY3ZlcnNpb24sc28sdGhyZWFkcyxzb3ZlcnNpb24gPSBbCiAgICAgICAgICAgIHMuZGVjb2RlKCdsYXRpbjEnKSBpZiBzIGlzIG5vdCBOb25lIGVsc2UgcwogICAgICAgICAgICBmb3IgcyBpbiBtLmdyb3VwcygpXQogICAgICAgIGlmIGxpYmNpbml0IGFuZCBub3QgbGliOgogICAgICAgICAgICBsaWIgPSAnbGliYycKICAgICAgICBlbGlmIGdsaWJjOgogICAgICAgICAgICBpZiBsaWIgIT0gJ2dsaWJjJzoKICAgICAgICAgICAgICAgIGxpYiA9ICdnbGliYycKICAgICAgICAgICAgICAgIHZlcnNpb24gPSBnbGliY3ZlcnNpb24KICAgICAgICAgICAgZWxpZiBnbGliY3ZlcnNpb24gPiB2ZXJzaW9uOgogICAgICAgICAgICAgICAgdmVyc2lvbiA9IGdsaWJjdmVyc2lvbgogICAgICAgIGVsaWYgc286CiAgICAgICAgICAgIGlmIGxpYiAhPSAnZ2xpYmMnOgogICAgICAgICAgICAgICAgbGliID0gJ2xpYmMnCiAgICAgICAgICAgICAgICBpZiBzb3ZlcnNpb24gYW5kIHNvdmVyc2lvbiA+IHZlcnNpb246CiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbiA9IHNvdmVyc2lvbgogICAgICAgICAgICAgICAgaWYgdGhyZWFkcyBhbmQgdmVyc2lvblstbGVuKHRocmVhZHMpOl0gIT0gdGhyZWFkczoKICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdmVyc2lvbiArIHRocmVhZHMKICAgICAgICBwb3MgPSBtLmVuZCgpCiAgICBmLmNsb3NlKCkKICAgIHJldHVybiBsaWIsdmVyc2lvbgoKZGVmIF9kaXN0X3RyeV9oYXJkZXIoZGlzdG5hbWUsdmVyc2lvbixpZCk6CgogICAgIiIiIFRyaWVzIHNvbWUgc3BlY2lhbCB0cmlja3MgdG8gZ2V0IHRoZSBkaXN0cmlidXRpb24KICAgICAgICBpbmZvcm1hdGlvbiBpbiBjYXNlIHRoZSBkZWZhdWx0IG1ldGhvZCBmYWlscy4KCiAgICAgICAgQ3VycmVudGx5IHN1cHBvcnRzIG9sZGVyIFN1U0UgTGludXgsIENhbGRlcmEgT3BlbkxpbnV4IGFuZAogICAgICAgIFNsYWNrd2FyZSBMaW51eCBkaXN0cmlidXRpb25zLgoKICAgICIiIgogICAgaWYgb3MucGF0aC5leGlzdHMoJy92YXIvYWRtL2luc3QtbG9nL2luZm8nKToKICAgICAgICAjIFN1U0UgTGludXggc3RvcmVzIGRpc3RyaWJ1dGlvbiBpbmZvcm1hdGlvbiBpbiB0aGF0IGZpbGUKICAgICAgICBkaXN0bmFtZSA9ICdTdVNFJwogICAgICAgIGZvciBsaW5lIGluIG9wZW4oJy92YXIvYWRtL2luc3QtbG9nL2luZm8nKToKICAgICAgICAgICAgdHYgPSBsaW5lLnNwbGl0KCkKICAgICAgICAgICAgaWYgbGVuKHR2KSA9PSAyOgogICAgICAgICAgICAgICAgdGFnLHZhbHVlID0gdHYKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIHRhZyA9PSAnTUlOX0RJU1RfVkVSU0lPTic6CiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdmFsdWUuc3RyaXAoKQogICAgICAgICAgICBlbGlmIHRhZyA9PSAnRElTVF9JREVOVCc6CiAgICAgICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZS5zcGxpdCgnLScpCiAgICAgICAgICAgICAgICBpZCA9IHZhbHVlc1syXQogICAgICAgIHJldHVybiBkaXN0bmFtZSx2ZXJzaW9uLGlkCgogICAgaWYgb3MucGF0aC5leGlzdHMoJy9ldGMvLmluc3RhbGxlZCcpOgogICAgICAgICMgQ2FsZGVyYSBPcGVuTGludXggaGFzIHNvbWUgaW5mb3MgaW4gdGhhdCBmaWxlICh0aGFua3MgdG8gQ29saW4gS29uZykKICAgICAgICBmb3IgbGluZSBpbiBvcGVuKCcvZXRjLy5pbnN0YWxsZWQnKToKICAgICAgICAgICAgcGtnID0gbGluZS5zcGxpdCgnLScpCiAgICAgICAgICAgIGlmIGxlbihwa2cpID49IDIgYW5kIHBrZ1swXSA9PSAnT3BlbkxpbnV4JzoKICAgICAgICAgICAgICAgICMgWFhYIGRvZXMgQ2FsZGVyYSBzdXBwb3J0IG5vbiBJbnRlbCBwbGF0Zm9ybXMgPyBJZiB5ZXMsCiAgICAgICAgICAgICAgICAjICAgICB3aGVyZSBjYW4gd2UgZmluZCB0aGUgbmVlZGVkIGlkID8KICAgICAgICAgICAgICAgIHJldHVybiAnT3BlbkxpbnV4Jyxwa2dbMV0saWQKCiAgICBpZiBvcy5wYXRoLmlzZGlyKCcvdXNyL2xpYi9zZXR1cCcpOgogICAgICAgICMgQ2hlY2sgZm9yIHNsYWNrd2FyZSB2ZXJzb24gdGFnIGZpbGUgKHRoYW5rcyB0byBHcmVnIEFuZHJ1aykKICAgICAgICB2ZXJmaWxlcyA9IG9zLmxpc3RkaXIoJy91c3IvbGliL3NldHVwJykKICAgICAgICBmb3IgbiBpbiByYW5nZShsZW4odmVyZmlsZXMpLTEsIC0xLCAtMSk6CiAgICAgICAgICAgIGlmIHZlcmZpbGVzW25dWzoxNF0gIT0gJ3NsYWNrLXZlcnNpb24tJzoKICAgICAgICAgICAgICAgIGRlbCB2ZXJmaWxlc1tuXQogICAgICAgIGlmIHZlcmZpbGVzOgogICAgICAgICAgICB2ZXJmaWxlcy5zb3J0KCkKICAgICAgICAgICAgZGlzdG5hbWUgPSAnc2xhY2t3YXJlJwogICAgICAgICAgICB2ZXJzaW9uID0gdmVyZmlsZXNbLTFdWzE0Ol0KICAgICAgICAgICAgcmV0dXJuIGRpc3RuYW1lLHZlcnNpb24saWQKCiAgICByZXR1cm4gZGlzdG5hbWUsdmVyc2lvbixpZAoKX3JlbGVhc2VfZmlsZW5hbWUgPSByZS5jb21waWxlKHInKFx3KylbLV9dKHJlbGVhc2V8dmVyc2lvbiknLCByZS5BU0NJSSkKX2xzYl9yZWxlYXNlX3ZlcnNpb24gPSByZS5jb21waWxlKHInKC4rKScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHJlbGVhc2UgJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcoW1xkLl0rKScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnW14oXSooPzpcKCguKylcKSk/JywgcmUuQVNDSUkpCl9yZWxlYXNlX3ZlcnNpb24gPSByZS5jb21waWxlKHInKFteMC05XSspJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyg/OiByZWxlYXNlICk/JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyhbXGQuXSspJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1teKF0qKD86XCgoLispXCkpPycsIHJlLkFTQ0lJKQoKIyBTZWUgYWxzbyBodHRwOi8vd3d3Lm5vdmVsbC5jb20vY29vbHNvbHV0aW9ucy9mZWF0dXJlLzExMjUxLmh0bWwKIyBhbmQgaHR0cDovL2xpbnV4bWFmaWEuY29tL2ZhcS9BZG1pbi9yZWxlYXNlLWZpbGVzLmh0bWwKIyBhbmQgaHR0cDovL2RhdGEubGludXgtbnRmcy5vcmcvcnBtL3doaWNocnBtCiMgYW5kIGh0dHA6Ly93d3cuZGllLm5ldC9kb2MvbGludXgvbWFuL21hbjEvbHNiX3JlbGVhc2UuMS5odG1sCgpfc3VwcG9ydGVkX2Rpc3RzID0gKAogICAgJ1N1U0UnLCAnZGViaWFuJywgJ2ZlZG9yYScsICdyZWRoYXQnLCAnY2VudG9zJywKICAgICdtYW5kcmFrZScsICdtYW5kcml2YScsICdyb2NrcycsICdzbGFja3dhcmUnLCAneWVsbG93ZG9nJywgJ2dlbnRvbycsCiAgICAnVW5pdGVkTGludXgnLCAndHVyYm9saW51eCcsICdhcmNoJywgJ21hZ2VpYScsICdVYnVudHUnKQoKZGVmIF9wYXJzZV9yZWxlYXNlX2ZpbGUoZmlyc3RsaW5lKToKCiAgICAjIERlZmF1bHQgdG8gZW1wdHkgJ3ZlcnNpb24nIGFuZCAnaWQnIHN0cmluZ3MuICBCb3RoIGRlZmF1bHRzIGFyZSB1c2VkCiAgICAjIHdoZW4gJ2ZpcnN0bGluZScgaXMgZW1wdHkuICAnaWQnIGRlZmF1bHRzIHRvIGVtcHR5IHdoZW4gYW4gaWQgY2FuIG5vdAogICAgIyBiZSBkZWR1Y2VkLgoKICAgIHJldHVybiAnJywgJycsICcnCgpfZGlzdHJpYnV0b3JfaWRfZmlsZV9yZSA9IHJlLmNvbXBpbGUoIig/OkRJU1RSSUJfSURccyo9KVxzKiguKikiLCByZS5JKQpfcmVsZWFzZV9maWxlX3JlID0gcmUuY29tcGlsZSgiKD86RElTVFJJQl9SRUxFQVNFXHMqPSlccyooLiopIiwgcmUuSSkKX2NvZGVuYW1lX2ZpbGVfcmUgPSByZS5jb21waWxlKCIoPzpESVNUUklCX0NPREVOQU1FXHMqPSlccyooLiopIiwgcmUuSSkKCmRlZiBsaW51eF9kaXN0cmlidXRpb24oZGlzdG5hbWU9JycsIHZlcnNpb249JycsIGlkPScnLAoKICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRfZGlzdHM9X3N1cHBvcnRlZF9kaXN0cywKICAgICAgICAgICAgICAgICAgICAgICBmdWxsX2Rpc3RyaWJ1dGlvbl9uYW1lPTEpOgoKICAgICIiIiBUcmllcyB0byBkZXRlcm1pbmUgdGhlIG5hbWUgb2YgdGhlIExpbnV4IE9TIGRpc3RyaWJ1dGlvbiBuYW1lLgoKICAgICAgICBUaGUgZnVuY3Rpb24gZmlyc3QgbG9va3MgZm9yIGEgZGlzdHJpYnV0aW9uIHJlbGVhc2UgZmlsZSBpbgogICAgICAgIC9ldGMgYW5kIHRoZW4gcmV2ZXJ0cyB0byBfZGlzdF90cnlfaGFyZGVyKCkgaW4gY2FzZSBubwogICAgICAgIHN1aXRhYmxlIGZpbGVzIGFyZSBmb3VuZC4KCiAgICAgICAgc3VwcG9ydGVkX2Rpc3RzIG1heSBiZSBnaXZlbiB0byBkZWZpbmUgdGhlIHNldCBvZiBMaW51eAogICAgICAgIGRpc3RyaWJ1dGlvbnMgdG8gbG9vayBmb3IuIEl0IGRlZmF1bHRzIHRvIGEgbGlzdCBvZiBjdXJyZW50bHkKICAgICAgICBzdXBwb3J0ZWQgTGludXggZGlzdHJpYnV0aW9ucyBpZGVudGlmaWVkIGJ5IHRoZWlyIHJlbGVhc2UgZmlsZQogICAgICAgIG5hbWUuCgogICAgICAgIElmIGZ1bGxfZGlzdHJpYnV0aW9uX25hbWUgaXMgdHJ1ZSAoZGVmYXVsdCksIHRoZSBmdWxsCiAgICAgICAgZGlzdHJpYnV0aW9uIHJlYWQgZnJvbSB0aGUgT1MgaXMgcmV0dXJuZWQuIE90aGVyd2lzZSB0aGUgc2hvcnQKICAgICAgICBuYW1lIHRha2VuIGZyb20gc3VwcG9ydGVkX2Rpc3RzIGlzIHVzZWQuCgogICAgICAgIFJldHVybnMgYSB0dXBsZSAoZGlzdG5hbWUsdmVyc2lvbixpZCkgd2hpY2ggZGVmYXVsdCB0byB0aGUKICAgICAgICBhcmdzIGdpdmVuIGFzIHBhcmFtZXRlcnMuCgogICAgIiIiCiAgICAjIGNoZWNrIGZvciB0aGUgRGViaWFuL1VidW50dSAvZXRjL2xzYi1yZWxlYXNlIGZpbGUgZmlyc3QsIG5lZWRlZCBzbwogICAgIyB0aGF0IHRoZSBkaXN0cmlidXRpb24gZG9lc24ndCBnZXQgaWRlbnRpZmllZCBhcyBEZWJpYW4uCgogICAgcmV0dXJuIGRpc3RuYW1lLCB2ZXJzaW9uLCBpZAoKIyBUbyBtYWludGFpbiBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eToKCmRlZiBkaXN0KGRpc3RuYW1lPScnLHZlcnNpb249JycsaWQ9JycsCgogICAgICAgICBzdXBwb3J0ZWRfZGlzdHM9X3N1cHBvcnRlZF9kaXN0cyk6CgogICAgIiIiIFRyaWVzIHRvIGRldGVybWluZSB0aGUgbmFtZSBvZiB0aGUgTGludXggT1MgZGlzdHJpYnV0aW9uIG5hbWUuCgogICAgICAgIFRoZSBmdW5jdGlvbiBmaXJzdCBsb29rcyBmb3IgYSBkaXN0cmlidXRpb24gcmVsZWFzZSBmaWxlIGluCiAgICAgICAgL2V0YyBhbmQgdGhlbiByZXZlcnRzIHRvIF9kaXN0X3RyeV9oYXJkZXIoKSBpbiBjYXNlIG5vCiAgICAgICAgc3VpdGFibGUgZmlsZXMgYXJlIGZvdW5kLgoKICAgICAgICBSZXR1cm5zIGEgdHVwbGUgKGRpc3RuYW1lLHZlcnNpb24saWQpIHdoaWNoIGRlZmF1bHQgdG8gdGhlCiAgICAgICAgYXJncyBnaXZlbiBhcyBwYXJhbWV0ZXJzLgoKICAgICIiIgogICAgcmV0dXJuIGxpbnV4X2Rpc3RyaWJ1dGlvbihkaXN0bmFtZSwgdmVyc2lvbiwgaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZF9kaXN0cz1zdXBwb3J0ZWRfZGlzdHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxfZGlzdHJpYnV0aW9uX25hbWU9MCkKCmRlZiBwb3BlbihjbWQsIG1vZGU9J3InLCBidWZzaXplPS0xKToKCiAgICAiIiIgUG9ydGFibGUgcG9wZW4oKSBpbnRlcmZhY2UuCiAgICAiIiIKICAgIGltcG9ydCB3YXJuaW5ncwogICAgd2FybmluZ3Mud2FybigndXNlIG9zLnBvcGVuIGluc3RlYWQnLCBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MikKICAgIHJldHVybiBvcy5wb3BlbihjbWQsIG1vZGUsIGJ1ZnNpemUpCgpkZWYgX25vcm1fdmVyc2lvbih2ZXJzaW9uLCBidWlsZD0nJyk6CgogICAgIiIiIE5vcm1hbGl6ZSB0aGUgdmVyc2lvbiBhbmQgYnVpbGQgc3RyaW5ncyBhbmQgcmV0dXJuIGEgc2luZ2xlCiAgICAgICAgdmVyc2lvbiBzdHJpbmcgdXNpbmcgdGhlIGZvcm1hdCBtYWpvci5taW5vci5idWlsZCAob3IgcGF0Y2hsZXZlbCkuCiAgICAiIiIKCiAgICByZXR1cm4gJyVzLiVzLjAnICUgKHN5cy52ZXJzaW9uWzBdLCBzeXMudmVyc2lvblsxXSkKCl92ZXJfb3V0cHV0ID0gcmUuY29tcGlsZShyJyg/OihbXHcgXSspIChbXHcuXSspICcKICAgICAgICAgICAgICAgICAgICAgICAgICcuKicKICAgICAgICAgICAgICAgICAgICAgICAgICdcWy4qIChbXGQuXSspXF0pJykKCiMgRXhhbXBsZXMgb2YgVkVSIGNvbW1hbmQgb3V0cHV0OgojCiMgICBXaW5kb3dzIDIwMDA6ICBNaWNyb3NvZnQgV2luZG93cyAyMDAwIFtWZXJzaW9uIDUuMDAuMjE5NV0KIyAgIFdpbmRvd3MgWFA6ICAgIE1pY3Jvc29mdCBXaW5kb3dzIFhQIFtWZXJzaW9uIDUuMS4yNjAwXQojICAgV2luZG93cyBWaXN0YTogTWljcm9zb2Z0IFdpbmRvd3MgW1ZlcnNpb24gNi4wLjYwMDJdCiMKIyBOb3RlIHRoYXQgdGhlICJWZXJzaW9uIiBzdHJpbmcgZ2V0cyBsb2NhbGl6ZWQgb24gZGlmZmVyZW50CiMgV2luZG93cyB2ZXJzaW9ucy4KCmRlZiBfc3lzY21kX3ZlcihzeXN0ZW09JycsIHJlbGVhc2U9JycsIHZlcnNpb249JycsCgogICAgICAgICAgICAgICBzdXBwb3J0ZWRfcGxhdGZvcm1zPSgnd2luMzInLCd3aW4xNicsJ2RvcycsJ29zMicpKToKCiAgICAiIiIgVHJpZXMgdG8gZmlndXJlIG91dCB0aGUgT1MgdmVyc2lvbiB1c2VkIGFuZCByZXR1cm5zCiAgICAgICAgYSB0dXBsZSAoc3lzdGVtLHJlbGVhc2UsdmVyc2lvbikuCgogICAgICAgIEl0IHVzZXMgdGhlICJ2ZXIiIHNoZWxsIGNvbW1hbmQgZm9yIHRoaXMgd2hpY2ggaXMga25vd24KICAgICAgICB0byBleGlzdHMgb24gV2luZG93cywgRE9TIGFuZCBPUy8yLiBYWFggT3RoZXJzIHRvbyA/CgogICAgICAgIEluIGNhc2UgdGhpcyBmYWlscywgdGhlIGdpdmVuIHBhcmFtZXRlcnMgYXJlIHVzZWQgYXMKICAgICAgICBkZWZhdWx0cy4KCiAgICAiIiIKICAgIGlmIHN5cy5wbGF0Zm9ybSBub3QgaW4gc3VwcG9ydGVkX3BsYXRmb3JtczoKICAgICAgICByZXR1cm4gc3lzdGVtLHJlbGVhc2UsdmVyc2lvbgoKICAgICMgVHJ5IHNvbWUgY29tbW9uIGNtZCBzdHJpbmdzCiAgICBmb3IgY21kIGluICgndmVyJywnY29tbWFuZCAvYyB2ZXInLCdjbWQgL2MgdmVyJyk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBwaXBlID0gcG9wZW4oY21kKQogICAgICAgICAgICBpbmZvID0gcGlwZS5yZWFkKCkKICAgICAgICAgICAgaWYgcGlwZS5jbG9zZSgpOgogICAgICAgICAgICAgICAgcmFpc2Ugb3MuZXJyb3IoJ2NvbW1hbmQgZmFpbGVkJykKICAgICAgICAgICAgIyBYWFggSG93IGNhbiBJIHN1cHByZXNzIHNoZWxsIGVycm9ycyBmcm9tIGJlaW5nIHdyaXR0ZW4KICAgICAgICAgICAgIyAgICAgdG8gc3RkZXJyID8KICAgICAgICBleGNlcHQgb3MuZXJyb3IgYXMgd2h5OgogICAgICAgICAgICAjcHJpbnQgJ0NvbW1hbmQgJXMgZmFpbGVkOiAlcycgJSAoY21kLHdoeSkKICAgICAgICAgICAgY29udGludWUKICAgICAgICBleGNlcHQgSU9FcnJvciBhcyB3aHk6CiAgICAgICAgICAgICNwcmludCAnQ29tbWFuZCAlcyBmYWlsZWQ6ICVzJyAlIChjbWQsd2h5KQogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGJyZWFrCiAgICBlbHNlOgogICAgICAgIHJldHVybiBzeXN0ZW0scmVsZWFzZSx2ZXJzaW9uCgogICAgIyBQYXJzZSB0aGUgb3V0cHV0CiAgICBpbmZvID0gaW5mby5zdHJpcCgpCiAgICBtID0gX3Zlcl9vdXRwdXQubWF0Y2goaW5mbykKICAgIGlmIG0gaXMgbm90IE5vbmU6CiAgICAgICAgc3lzdGVtLHJlbGVhc2UsdmVyc2lvbiA9IG0uZ3JvdXBzKCkKICAgICAgICAjIFN0cmlwIHRyYWlsaW5nIGRvdHMgZnJvbSB2ZXJzaW9uIGFuZCByZWxlYXNlCiAgICAgICAgaWYgcmVsZWFzZVstMV0gPT0gJy4nOgogICAgICAgICAgICByZWxlYXNlID0gcmVsZWFzZVs6LTFdCiAgICAgICAgaWYgdmVyc2lvblstMV0gPT0gJy4nOgogICAgICAgICAgICB2ZXJzaW9uID0gdmVyc2lvbls6LTFdCiAgICAgICAgIyBOb3JtYWxpemUgdGhlIHZlcnNpb24gYW5kIGJ1aWxkIHN0cmluZ3MgKGVsaW1pbmF0aW5nIGFkZGl0aW9uYWwKICAgICAgICAjIHplcm9zKQogICAgICAgIHZlcnNpb24gPSBfbm9ybV92ZXJzaW9uKHZlcnNpb24pCiAgICByZXR1cm4gc3lzdGVtLHJlbGVhc2UsdmVyc2lvbgoKZGVmIF93aW4zMl9nZXR2YWx1ZShrZXksbmFtZSxkZWZhdWx0PScnKToKCiAgICAiIiIgUmVhZCBhIHZhbHVlIGZvciBuYW1lIGZyb20gdGhlIHJlZ2lzdHJ5IGtleS4KCiAgICAgICAgSW4gY2FzZSB0aGlzIGZhaWxzLCBkZWZhdWx0IGlzIHJldHVybmVkLgoKICAgICIiIgogICAgdHJ5OgogICAgICAgICMgVXNlIHdpbjMyYXBpIGlmIGF2YWlsYWJsZQogICAgICAgIGZyb20gd2luMzJhcGkgaW1wb3J0IFJlZ1F1ZXJ5VmFsdWVFeAogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICMgT24gUHl0aG9uIDIuMCBhbmQgbGF0ZXIsIGVtdWxhdGUgdXNpbmcgd2lucmVnCiAgICAgICAgaW1wb3J0IHdpbnJlZwogICAgICAgIFJlZ1F1ZXJ5VmFsdWVFeCA9IHdpbnJlZy5RdWVyeVZhbHVlRXgKICAgIHRyeToKICAgICAgICByZXR1cm4gUmVnUXVlcnlWYWx1ZUV4KGtleSxuYW1lKQogICAgZXhjZXB0OgogICAgICAgIHJldHVybiBkZWZhdWx0CgpkZWYgd2luMzJfdmVyKHJlbGVhc2U9JycsdmVyc2lvbj0nJyxjc2Q9JycscHR5cGU9JycpOgoKICAgICIiIiBHZXQgYWRkaXRpb25hbCB2ZXJzaW9uIGluZm9ybWF0aW9uIGZyb20gdGhlIFdpbmRvd3MgUmVnaXN0cnkKICAgICAgICBhbmQgcmV0dXJuIGEgdHVwbGUgKHZlcnNpb24sY3NkLHB0eXBlKSByZWZlcnJpbmcgdG8gdmVyc2lvbgogICAgICAgIG51bWJlciwgQ1NEIGxldmVsIChzZXJ2aWNlIHBhY2spLCBhbmQgT1MgdHlwZSAobXVsdGkvc2luZ2xlCiAgICAgICAgcHJvY2Vzc29yKS4KCiAgICAgICAgQXMgYSBoaW50OiBwdHlwZSByZXR1cm5zICdVbmlwcm9jZXNzb3IgRnJlZScgb24gc2luZ2xlCiAgICAgICAgcHJvY2Vzc29yIE5UIG1hY2hpbmVzIGFuZCAnTXVsdGlwcm9jZXNzb3IgRnJlZScgb24gbXVsdGkKICAgICAgICBwcm9jZXNzb3IgbWFjaGluZXMuIFRoZSAnRnJlZScgcmVmZXJzIHRvIHRoZSBPUyB2ZXJzaW9uIGJlaW5nCiAgICAgICAgZnJlZSBvZiBkZWJ1Z2dpbmcgY29kZS4gSXQgY291bGQgYWxzbyBzdGF0ZSAnQ2hlY2tlZCcgd2hpY2gKICAgICAgICBtZWFucyB0aGUgT1MgdmVyc2lvbiB1c2VzIGRlYnVnZ2luZyBjb2RlLCBpLmUuIGNvZGUgdGhhdAogICAgICAgIGNoZWNrcyBhcmd1bWVudHMsIHJhbmdlcywgZXRjLiAoVGhvbWFzIEhlbGxlcikuCgogICAgICAgIE5vdGU6IHRoaXMgZnVuY3Rpb24gd29ya3MgYmVzdCB3aXRoIE1hcmsgSGFtbW9uZCdzIHdpbjMyCiAgICAgICAgcGFja2FnZSBpbnN0YWxsZWQsIGJ1dCBhbHNvIG9uIFB5dGhvbiAyLjMgYW5kIGxhdGVyLiBJdAogICAgICAgIG9idmlvdXNseSBvbmx5IHJ1bnMgb24gV2luMzIgY29tcGF0aWJsZSBwbGF0Zm9ybXMuCgogICAgIiIiCiAgICAjIFhYWCBJcyB0aGVyZSBhbnkgd2F5IHRvIGZpbmQgb3V0IHRoZSBwcm9jZXNzb3IgdHlwZSBvbiBXaW5YWCA/CiAgICAjIFhYWCBJcyB3aW4zMiBhdmFpbGFibGUgb24gV2luZG93cyBDRSA/CiAgICAjCiAgICAjIEFkYXB0ZWQgZnJvbSBjb2RlIHBvc3RlZCBieSBLYXJsIFB1dGxhbmQgdG8gY29tcC5sYW5nLnB5dGhvbi4KICAgICMKICAgICMgVGhlIG1hcHBpbmdzIGJldHdlZW4gcmVnLiB2YWx1ZXMgYW5kIHJlbGVhc2UgbmFtZXMgY2FuIGJlIGZvdW5kCiAgICAjIGhlcmU6IGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vbGlicmFyeS9lbi11cy9zeXNpbmZvL2Jhc2Uvb3N2ZXJzaW9uaW5mb19zdHIuYXNwCgogICAgIyBJbXBvcnQgdGhlIG5lZWRlZCBBUElzCiAgICB0cnk6CiAgICAgICAgaW1wb3J0IHdpbjMyYXBpCiAgICAgICAgZnJvbSB3aW4zMmFwaSBpbXBvcnQgUmVnUXVlcnlWYWx1ZUV4LCBSZWdPcGVuS2V5RXgsIFwKICAgICAgICAgICAgIFJlZ0Nsb3NlS2V5LCBHZXRWZXJzaW9uRXgKICAgICAgICBmcm9tIHdpbjMyY29uIGltcG9ydCBIS0VZX0xPQ0FMX01BQ0hJTkUsIFZFUl9QTEFURk9STV9XSU4zMl9OVCwgXAogICAgICAgICAgICAgVkVSX1BMQVRGT1JNX1dJTjMyX1dJTkRPV1MsIFZFUl9OVF9XT1JLU1RBVElPTgogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICMgRW11bGF0ZSB0aGUgd2luMzJhcGkgbW9kdWxlIHVzaW5nIFB5dGhvbiBBUElzCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzeXMuZ2V0d2luZG93c3ZlcnNpb24KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgICMgTm8gZW11bGF0aW9uIHBvc3NpYmxlLCBzbyByZXR1cm4gdGhlIGRlZmF1bHRzLi4uCiAgICAgICAgICAgIHJldHVybiByZWxlYXNlLHZlcnNpb24sY3NkLHB0eXBlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBFbXVsYXRpb24gdXNpbmcgd2lucmVnIChhZGRlZCBpbiBQeXRob24gMi4wKSBhbmQKICAgICAgICAgICAgIyBzeXMuZ2V0d2luZG93c3ZlcnNpb24oKSAoYWRkZWQgaW4gUHl0aG9uIDIuMykKICAgICAgICAgICAgaW1wb3J0IHdpbnJlZwogICAgICAgICAgICBHZXRWZXJzaW9uRXggPSBzeXMuZ2V0d2luZG93c3ZlcnNpb24KICAgICAgICAgICAgUmVnUXVlcnlWYWx1ZUV4ID0gd2lucmVnLlF1ZXJ5VmFsdWVFeAogICAgICAgICAgICBSZWdPcGVuS2V5RXggPSB3aW5yZWcuT3BlbktleUV4CiAgICAgICAgICAgIFJlZ0Nsb3NlS2V5ID0gd2lucmVnLkNsb3NlS2V5CiAgICAgICAgICAgIEhLRVlfTE9DQUxfTUFDSElORSA9IHdpbnJlZy5IS0VZX0xPQ0FMX01BQ0hJTkUKICAgICAgICAgICAgVkVSX1BMQVRGT1JNX1dJTjMyX1dJTkRPV1MgPSAxCiAgICAgICAgICAgIFZFUl9QTEFURk9STV9XSU4zMl9OVCA9IDIKICAgICAgICAgICAgVkVSX05UX1dPUktTVEFUSU9OID0gMQogICAgICAgICAgICBWRVJfTlRfU0VSVkVSID0gMwogICAgICAgICAgICBSRUdfU1ogPSAxCgogICAgIyBGaW5kIG91dCB0aGUgcmVnaXN0cnkga2V5IGFuZCBzb21lIGdlbmVyYWwgdmVyc2lvbiBpbmZvcwogICAgd2ludmVyID0gR2V0VmVyc2lvbkV4KCkKICAgIG1haixtaW4sYnVpbGRubyxwbGF0LGNzZCA9IHdpbnZlcgogICAgdmVyc2lvbiA9ICclaS4laS4laScgJSAobWFqLG1pbixidWlsZG5vICYgMHhGRkZGKQogICAgaWYgaGFzYXR0cih3aW52ZXIsICJzZXJ2aWNlX3BhY2siKToKICAgICAgICBpZiB3aW52ZXIuc2VydmljZV9wYWNrICE9ICIiOgogICAgICAgICAgICBjc2QgPSAnU1AlcycgJSB3aW52ZXIuc2VydmljZV9wYWNrX21ham9yCiAgICBlbHNlOgogICAgICAgIGlmIGNzZFs6MTNdID09ICdTZXJ2aWNlIFBhY2sgJzoKICAgICAgICAgICAgY3NkID0gJ1NQJyArIGNzZFsxMzpdCgogICAgaWYgcGxhdCA9PSBWRVJfUExBVEZPUk1fV0lOMzJfV0lORE9XUzoKICAgICAgICByZWdrZXkgPSAnU09GVFdBUkVcXE1pY3Jvc29mdFxcV2luZG93c1xcQ3VycmVudFZlcnNpb24nCiAgICAgICAgIyBUcnkgdG8gZ3Vlc3MgdGhlIHJlbGVhc2UgbmFtZQogICAgICAgIGlmIG1haiA9PSA0OgogICAgICAgICAgICBpZiBtaW4gPT0gMDoKICAgICAgICAgICAgICAgIHJlbGVhc2UgPSAnOTUnCiAgICAgICAgICAgIGVsaWYgbWluID09IDEwOgogICAgICAgICAgICAgICAgcmVsZWFzZSA9ICc5OCcKICAgICAgICAgICAgZWxpZiBtaW4gPT0gOTA6CiAgICAgICAgICAgICAgICByZWxlYXNlID0gJ01lJwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmVsZWFzZSA9ICdwb3N0TWUnCiAgICAgICAgZWxpZiBtYWogPT0gNToKICAgICAgICAgICAgcmVsZWFzZSA9ICcyMDAwJwoKICAgIGVsaWYgcGxhdCA9PSBWRVJfUExBVEZPUk1fV0lOMzJfTlQ6CiAgICAgICAgcmVna2V5ID0gJ1NPRlRXQVJFXFxNaWNyb3NvZnRcXFdpbmRvd3MgTlRcXEN1cnJlbnRWZXJzaW9uJwogICAgICAgIGlmIG1haiA8PSA0OgogICAgICAgICAgICByZWxlYXNlID0gJ05UJwogICAgICAgIGVsaWYgbWFqID09IDU6CiAgICAgICAgICAgIGlmIG1pbiA9PSAwOgogICAgICAgICAgICAgICAgcmVsZWFzZSA9ICcyMDAwJwogICAgICAgICAgICBlbGlmIG1pbiA9PSAxOgogICAgICAgICAgICAgICAgcmVsZWFzZSA9ICdYUCcKICAgICAgICAgICAgZWxpZiBtaW4gPT0gMjoKICAgICAgICAgICAgICAgIHJlbGVhc2UgPSAnMjAwM1NlcnZlcicKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJlbGVhc2UgPSAncG9zdDIwMDMnCiAgICAgICAgZWxpZiBtYWogPT0gNjoKICAgICAgICAgICAgaWYgaGFzYXR0cih3aW52ZXIsICJwcm9kdWN0X3R5cGUiKToKICAgICAgICAgICAgICAgIHByb2R1Y3RfdHlwZSA9IHdpbnZlci5wcm9kdWN0X3R5cGUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByb2R1Y3RfdHlwZSA9IFZFUl9OVF9XT1JLU1RBVElPTgogICAgICAgICAgICAgICAgIyBXaXRob3V0IGFuIE9TVkVSU0lPTklORk9FWCBjYXBhYmxlIHN5cy5nZXR3aW5kb3dzdmVyc2lvbigpLAogICAgICAgICAgICAgICAgIyBvciBoZWxwIGZyb20gdGhlIHJlZ2lzdHJ5LCB3ZSBjYW5ub3QgcHJvcGVybHkgaWRlbnRpZnkKICAgICAgICAgICAgICAgICMgbm9uLXdvcmtzdGF0aW9uIHZlcnNpb25zLgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGtleSA9IFJlZ09wZW5LZXlFeChIS0VZX0xPQ0FMX01BQ0hJTkUsIHJlZ2tleSkKICAgICAgICAgICAgICAgICAgICBuYW1lLCB0eXBlID0gUmVnUXVlcnlWYWx1ZUV4KGtleSwgIlByb2R1Y3ROYW1lIikKICAgICAgICAgICAgICAgICAgICAjIERpc2NhcmQgYW55IHR5cGUgdGhhdCBpc24ndCBSRUdfU1oKICAgICAgICAgICAgICAgICAgICBpZiB0eXBlID09IFJFR19TWiBhbmQgbmFtZS5maW5kKCJTZXJ2ZXIiKSAhPSAtMToKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF90eXBlID0gVkVSX05UX1NFUlZFUgogICAgICAgICAgICAgICAgZXhjZXB0IFdpbmRvd3NFcnJvcjoKICAgICAgICAgICAgICAgICAgICAjIFVzZSBkZWZhdWx0IG9mIFZFUl9OVF9XT1JLU1RBVElPTgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIGlmIG1pbiA9PSAwOgogICAgICAgICAgICAgICAgaWYgcHJvZHVjdF90eXBlID09IFZFUl9OVF9XT1JLU1RBVElPTjoKICAgICAgICAgICAgICAgICAgICByZWxlYXNlID0gJ1Zpc3RhJwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByZWxlYXNlID0gJzIwMDhTZXJ2ZXInCiAgICAgICAgICAgIGVsaWYgbWluID09IDE6CiAgICAgICAgICAgICAgICBpZiBwcm9kdWN0X3R5cGUgPT0gVkVSX05UX1dPUktTVEFUSU9OOgogICAgICAgICAgICAgICAgICAgIHJlbGVhc2UgPSAnNycKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmVsZWFzZSA9ICcyMDA4U2VydmVyUjInCiAgICAgICAgICAgIGVsaWYgbWluID09IDI6CiAgICAgICAgICAgICAgICBpZiBwcm9kdWN0X3R5cGUgPT0gVkVSX05UX1dPUktTVEFUSU9OOgogICAgICAgICAgICAgICAgICAgIHJlbGVhc2UgPSAnOCcKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmVsZWFzZSA9ICcyMDEyU2VydmVyJwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmVsZWFzZSA9ICdwb3N0MjAxMlNlcnZlcicKCiAgICBlbHNlOgogICAgICAgIGlmIG5vdCByZWxlYXNlOgogICAgICAgICAgICAjIEUuZy4gV2luMy4xIHdpdGggd2luMzJzCiAgICAgICAgICAgIHJlbGVhc2UgPSAnJWkuJWknICUgKG1haixtaW4pCiAgICAgICAgcmV0dXJuIHJlbGVhc2UsdmVyc2lvbixjc2QscHR5cGUKCiAgICAjIE9wZW4gdGhlIHJlZ2lzdHJ5IGtleQogICAgdHJ5OgogICAgICAgIGtleUN1clZlciA9IFJlZ09wZW5LZXlFeChIS0VZX0xPQ0FMX01BQ0hJTkUsIHJlZ2tleSkKICAgICAgICAjIEdldCBhIHZhbHVlIHRvIG1ha2Ugc3VyZSB0aGUga2V5IGV4aXN0cy4uLgogICAgICAgIFJlZ1F1ZXJ5VmFsdWVFeChrZXlDdXJWZXIsICdTeXN0ZW1Sb290JykKICAgIGV4Y2VwdDoKICAgICAgICByZXR1cm4gcmVsZWFzZSx2ZXJzaW9uLGNzZCxwdHlwZQoKICAgICMgUGFyc2UgdmFsdWVzCiAgICAjc3VidmVyc2lvbiA9IF93aW4zMl9nZXR2YWx1ZShrZXlDdXJWZXIsCiAgICAjICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTdWJWZXJzaW9uTnVtYmVyJywKICAgICMgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCcnLDEpKVswXQogICAgI2lmIHN1YnZlcnNpb246CiAgICAjICAgcmVsZWFzZSA9IHJlbGVhc2UgKyBzdWJ2ZXJzaW9uICMgOTVhLCA5NWIsIGV0Yy4KICAgIGJ1aWxkID0gX3dpbjMyX2dldHZhbHVlKGtleUN1clZlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDdXJyZW50QnVpbGROdW1iZXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCcnLDEpKVswXQogICAgcHR5cGUgPSBfd2luMzJfZ2V0dmFsdWUoa2V5Q3VyVmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAnQ3VycmVudFR5cGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAocHR5cGUsMSkpWzBdCgogICAgIyBOb3JtYWxpemUgdmVyc2lvbgogICAgdmVyc2lvbiA9IF9ub3JtX3ZlcnNpb24odmVyc2lvbixidWlsZCkKCiAgICAjIENsb3NlIGtleQogICAgUmVnQ2xvc2VLZXkoa2V5Q3VyVmVyKQogICAgcmV0dXJuIHJlbGVhc2UsdmVyc2lvbixjc2QscHR5cGUKCmRlZiBfbWFjX3Zlcl9sb29rdXAoc2VsZWN0b3JzLGRlZmF1bHQ9Tm9uZSk6CgogICAgZnJvbSBfZ2VzdGFsdCBpbXBvcnQgZ2VzdGFsdAogICAgbCA9IFtdCiAgICBhcHBlbmQgPSBsLmFwcGVuZAogICAgZm9yIHNlbGVjdG9yIGluIHNlbGVjdG9yczoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGFwcGVuZChnZXN0YWx0KHNlbGVjdG9yKSkKICAgICAgICBleGNlcHQgKFJ1bnRpbWVFcnJvciwgT1NFcnJvcik6CiAgICAgICAgICAgIGFwcGVuZChkZWZhdWx0KQogICAgcmV0dXJuIGwKCmRlZiBfYmNkMnN0cihiY2QpOgoKICAgIHJldHVybiBoZXgoYmNkKVsyOl0KCmRlZiBfbWFjX3Zlcl9nZXN0YWx0KCk6CiAgICAiIiIKICAgICAgICBUaGFua3MgdG8gTWFyayBSLiBMZXZpbnNvbiBmb3IgbWFpbGluZyBkb2N1bWVudGF0aW9uIGxpbmtzIGFuZAogICAgICAgIGNvZGUgZXhhbXBsZXMgZm9yIHRoaXMgZnVuY3Rpb24uIERvY3VtZW50YXRpb24gZm9yIHRoZQogICAgICAgIGdlc3RhbHQoKSBBUEkgaXMgYXZhaWxhYmxlIG9ubGluZSBhdDoKCiAgICAgICAgICAgaHR0cDovL3d3dy5yZ2Fyb3MubmwvZ2VzdGFsdC8KICAgICIiIgogICAgIyBDaGVjayB3aGV0aGVyIHRoZSB2ZXJzaW9uIGluZm8gbW9kdWxlIGlzIGF2YWlsYWJsZQogICAgdHJ5OgogICAgICAgIGltcG9ydCBfZ2VzdGFsdAogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIHJldHVybiBOb25lCiAgICAjIEdldCB0aGUgaW5mb3MKICAgIHN5c3YsIHN5c2EgPSBfbWFjX3Zlcl9sb29rdXAoKCdzeXN2Jywnc3lzYScpKQogICAgIyBEZWNvZGUgdGhlIGluZm9zCiAgICBpZiBzeXN2OgogICAgICAgIG1ham9yID0gKHN5c3YgJiAweEZGMDApID4+IDgKICAgICAgICBtaW5vciA9IChzeXN2ICYgMHgwMEYwKSA+PiA0CiAgICAgICAgcGF0Y2ggPSAoc3lzdiAmIDB4MDAwRikKCiAgICAgICAgaWYgKG1ham9yLCBtaW5vcikgPj0gKDEwLCA0KToKICAgICAgICAgICAgIyB0aGUgJ3N5c3YnIGdlc3RhbGQgY2Fubm90IHJldHVybiBwYXRjaGxldmVscwogICAgICAgICAgICAjIGhpZ2hlciB0aGFuIDkuIEFwcGxlIGludHJvZHVjZWQgMyBuZXcKICAgICAgICAgICAgIyBnZXN0YWx0IGNvZGVzIGluIDEwLjQgdG8gZGVhbCB3aXRoIHRoaXMKICAgICAgICAgICAgIyBpc3N1ZSAobmVlZGVkIGJlY2F1c2UgcGF0Y2ggbGV2ZWxzIGNhbgogICAgICAgICAgICAjIHJ1biBoaWdoZXIgdGhhbiA5LCBzdWNoIGFzIDEwLjQuMTEpCiAgICAgICAgICAgIG1ham9yLG1pbm9yLHBhdGNoID0gX21hY192ZXJfbG9va3VwKCgnc3lzMScsJ3N5czInLCdzeXMzJykpCiAgICAgICAgICAgIHJlbGVhc2UgPSAnJWkuJWkuJWknICUobWFqb3IsIG1pbm9yLCBwYXRjaCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZWxlYXNlID0gJyVzLiVpLiVpJyAlIChfYmNkMnN0cihtYWpvciksbWlub3IscGF0Y2gpCgogICAgaWYgc3lzYToKICAgICAgICBtYWNoaW5lID0gezB4MTogJzY4aycsCiAgICAgICAgICAgICAgICAgICAweDI6ICdQb3dlclBDJywKICAgICAgICAgICAgICAgICAgIDB4YTogJ2kzODYnfS5nZXQoc3lzYSwnJykKCiAgICB2ZXJzaW9uaW5mbz0oJycsICcnLCAnJykKICAgIHJldHVybiByZWxlYXNlLHZlcnNpb25pbmZvLG1hY2hpbmUKCmRlZiBfbWFjX3Zlcl94bWwoKToKICAgIGZuID0gJy9TeXN0ZW0vTGlicmFyeS9Db3JlU2VydmljZXMvU3lzdGVtVmVyc2lvbi5wbGlzdCcKICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhmbik6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICB0cnk6CiAgICAgICAgaW1wb3J0IHBsaXN0bGliCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBwbCA9IHBsaXN0bGliLnJlYWRQbGlzdChmbikKICAgIHJlbGVhc2UgPSBwbFsnUHJvZHVjdFZlcnNpb24nXQogICAgdmVyc2lvbmluZm89KCcnLCAnJywgJycpCiAgICBtYWNoaW5lID0gb3MudW5hbWUoKS5tYWNoaW5lCiAgICBpZiBtYWNoaW5lIGluICgncHBjJywgJ1Bvd2VyIE1hY2ludG9zaCcpOgogICAgICAgICMgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgZ2VzdGFsdCBiYXNlZCBjb2RlCiAgICAgICAgbWFjaGluZSA9ICdQb3dlclBDJwoKICAgIHJldHVybiByZWxlYXNlLHZlcnNpb25pbmZvLG1hY2hpbmUKCgpkZWYgbWFjX3ZlcihyZWxlYXNlPScnLHZlcnNpb25pbmZvPSgnJywnJywnJyksbWFjaGluZT0nJyk6CgogICAgIiIiIEdldCBNYWNPUyB2ZXJzaW9uIGluZm9ybWF0aW9uIGFuZCByZXR1cm4gaXQgYXMgdHVwbGUgKHJlbGVhc2UsCiAgICAgICAgdmVyc2lvbmluZm8sIG1hY2hpbmUpIHdpdGggdmVyc2lvbmluZm8gYmVpbmcgYSB0dXBsZSAodmVyc2lvbiwKICAgICAgICBkZXZfc3RhZ2UsIG5vbl9yZWxlYXNlX3ZlcnNpb24pLgoKICAgICAgICBFbnRyaWVzIHdoaWNoIGNhbm5vdCBiZSBkZXRlcm1pbmVkIGFyZSBzZXQgdG8gdGhlIHBhcmFtdGVyIHZhbHVlcwogICAgICAgIHdoaWNoIGRlZmF1bHQgdG8gJycuIEFsbCB0dXBsZSBlbnRyaWVzIGFyZSBzdHJpbmdzLgogICAgIiIiCgogICAgIyBGaXJzdCB0cnkgcmVhZGluZyB0aGUgaW5mb3JtYXRpb24gZnJvbSBhbiBYTUwgZmlsZSB3aGljaCBzaG91bGQKICAgICMgYWx3YXlzIGJlIHByZXNlbnQKICAgIGluZm8gPSBfbWFjX3Zlcl94bWwoKQogICAgaWYgaW5mbyBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gaW5mbwoKICAgICMgSWYgdGhhdCBkb2Vzbid0IHdvcmsgZm9yIHNvbWUgcmVhc29uIGZhbGwgYmFjayB0byByZWFkaW5nIHRoZQogICAgIyBpbmZvcm1hdGlvbiB1c2luZyBnZXN0YWx0IGNhbGxzLgogICAgaW5mbyA9IF9tYWNfdmVyX2dlc3RhbHQoKQogICAgaWYgaW5mbyBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gaW5mbwoKICAgICMgSWYgdGhhdCBhbHNvIGRvZXNuJ3Qgd29yayByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWVzCiAgICByZXR1cm4gcmVsZWFzZSx2ZXJzaW9uaW5mbyxtYWNoaW5lCgpkZWYgX2phdmFfZ2V0cHJvcChuYW1lLGRlZmF1bHQpOgoKICAgIGZyb20gamF2YS5sYW5nIGltcG9ydCBTeXN0ZW0KICAgIHRyeToKICAgICAgICB2YWx1ZSA9IFN5c3RlbS5nZXRQcm9wZXJ0eShuYW1lKQogICAgICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0CiAgICAgICAgcmV0dXJuIHZhbHVlCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgcmV0dXJuIGRlZmF1bHQKCmRlZiBqYXZhX3ZlcihyZWxlYXNlPScnLHZlbmRvcj0nJyx2bWluZm89KCcnLCcnLCcnKSxvc2luZm89KCcnLCcnLCcnKSk6CgogICAgIiIiIFZlcnNpb24gaW50ZXJmYWNlIGZvciBKeXRob24uCgogICAgICAgIFJldHVybnMgYSB0dXBsZSAocmVsZWFzZSx2ZW5kb3Isdm1pbmZvLG9zaW5mbykgd2l0aCB2bWluZm8gYmVpbmcKICAgICAgICBhIHR1cGxlICh2bV9uYW1lLHZtX3JlbGVhc2Usdm1fdmVuZG9yKSBhbmQgb3NpbmZvIGJlaW5nIGEKICAgICAgICB0dXBsZSAob3NfbmFtZSxvc192ZXJzaW9uLG9zX2FyY2gpLgoKICAgICAgICBWYWx1ZXMgd2hpY2ggY2Fubm90IGJlIGRldGVybWluZWQgYXJlIHNldCB0byB0aGUgZGVmYXVsdHMKICAgICAgICBnaXZlbiBhcyBwYXJhbWV0ZXJzICh3aGljaCBhbGwgZGVmYXVsdCB0byAnJykuCgogICAgIiIiCiAgICAjIEltcG9ydCB0aGUgbmVlZGVkIEFQSXMKICAgIHRyeToKICAgICAgICBpbXBvcnQgamF2YS5sYW5nCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgcmV0dXJuIHJlbGVhc2UsdmVuZG9yLHZtaW5mbyxvc2luZm8KCiAgICB2ZW5kb3IgPSBfamF2YV9nZXRwcm9wKCdqYXZhLnZlbmRvcicsIHZlbmRvcikKICAgIHJlbGVhc2UgPSBfamF2YV9nZXRwcm9wKCdqYXZhLnZlcnNpb24nLCByZWxlYXNlKQogICAgdm1fbmFtZSwgdm1fcmVsZWFzZSwgdm1fdmVuZG9yID0gdm1pbmZvCiAgICB2bV9uYW1lID0gX2phdmFfZ2V0cHJvcCgnamF2YS52bS5uYW1lJywgdm1fbmFtZSkKICAgIHZtX3ZlbmRvciA9IF9qYXZhX2dldHByb3AoJ2phdmEudm0udmVuZG9yJywgdm1fdmVuZG9yKQogICAgdm1fcmVsZWFzZSA9IF9qYXZhX2dldHByb3AoJ2phdmEudm0udmVyc2lvbicsIHZtX3JlbGVhc2UpCiAgICB2bWluZm8gPSB2bV9uYW1lLCB2bV9yZWxlYXNlLCB2bV92ZW5kb3IKICAgIG9zX25hbWUsIG9zX3ZlcnNpb24sIG9zX2FyY2ggPSBvc2luZm8KICAgIG9zX2FyY2ggPSBfamF2YV9nZXRwcm9wKCdqYXZhLm9zLmFyY2gnLCBvc19hcmNoKQogICAgb3NfbmFtZSA9IF9qYXZhX2dldHByb3AoJ2phdmEub3MubmFtZScsIG9zX25hbWUpCiAgICBvc192ZXJzaW9uID0gX2phdmFfZ2V0cHJvcCgnamF2YS5vcy52ZXJzaW9uJywgb3NfdmVyc2lvbikKICAgIG9zaW5mbyA9IG9zX25hbWUsIG9zX3ZlcnNpb24sIG9zX2FyY2gKCiAgICByZXR1cm4gcmVsZWFzZSwgdmVuZG9yLCB2bWluZm8sIG9zaW5mbwoKIyMjIFN5c3RlbSBuYW1lIGFsaWFzaW5nCgpkZWYgc3lzdGVtX2FsaWFzKHN5c3RlbSxyZWxlYXNlLHZlcnNpb24pOgoKICAgICIiIiBSZXR1cm5zIChzeXN0ZW0scmVsZWFzZSx2ZXJzaW9uKSBhbGlhc2VkIHRvIGNvbW1vbgogICAgICAgIG1hcmtldGluZyBuYW1lcyB1c2VkIGZvciBzb21lIHN5c3RlbXMuCgogICAgICAgIEl0IGFsc28gZG9lcyBzb21lIHJlb3JkZXJpbmcgb2YgdGhlIGluZm9ybWF0aW9uIGluIHNvbWUgY2FzZXMKICAgICAgICB3aGVyZSBpdCB3b3VsZCBvdGhlcndpc2UgY2F1c2UgY29uZnVzaW9uLgoKICAgICIiIgogICAgaWYgc3lzdGVtID09ICdSaGFwc29keSc6CiAgICAgICAgIyBBcHBsZSdzIEJTRCBkZXJpdmF0aXZlCiAgICAgICAgIyBYWFggSG93IGNhbiB3ZSBkZXRlcm1pbmUgdGhlIG1hcmtldGluZyByZWxlYXNlIG51bWJlciA/CiAgICAgICAgcmV0dXJuICdNYWNPUyBYIFNlcnZlcicsc3lzdGVtK3JlbGVhc2UsdmVyc2lvbgoKICAgIGVsaWYgc3lzdGVtID09ICdTdW5PUyc6CiAgICAgICAgIyBTdW4ncyBPUwogICAgICAgIGlmIHJlbGVhc2UgPCAnNSc6CiAgICAgICAgICAgICMgVGhlc2UgcmVsZWFzZXMgdXNlIHRoZSBvbGQgbmFtZSBTdW5PUwogICAgICAgICAgICByZXR1cm4gc3lzdGVtLHJlbGVhc2UsdmVyc2lvbgogICAgICAgICMgTW9kaWZ5IHJlbGVhc2UgKG1hcmtldGluZyByZWxlYXNlID0gU3VuT1MgcmVsZWFzZSAtIDMpCiAgICAgICAgbCA9IHJlbGVhc2Uuc3BsaXQoJy4nKQogICAgICAgIGlmIGw6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG1ham9yID0gaW50KGxbMF0pCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbWFqb3IgPSBtYWpvciAtIDMKICAgICAgICAgICAgICAgIGxbMF0gPSBzdHIobWFqb3IpCiAgICAgICAgICAgICAgICByZWxlYXNlID0gJy4nLmpvaW4obCkKICAgICAgICBpZiByZWxlYXNlIDwgJzYnOgogICAgICAgICAgICBzeXN0ZW0gPSAnU29sYXJpcycKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIFhYWCBXaGF0ZXZlciB0aGUgbmV3IFN1bk9TIG1hcmtldGluZyBuYW1lIGlzLi4uCiAgICAgICAgICAgIHN5c3RlbSA9ICdTb2xhcmlzJwoKICAgIGVsaWYgc3lzdGVtID09ICdJUklYNjQnOgogICAgICAgICMgSVJJWCByZXBvcnRzIElSSVg2NCBvbiBwbGF0Zm9ybXMgd2l0aCA2NC1iaXQgc3VwcG9ydDsgeWV0IGl0CiAgICAgICAgIyBpcyByZWFsbHkgYSB2ZXJzaW9uIGFuZCBub3QgYSBkaWZmZXJlbnQgcGxhdGZvcm0sIHNpbmNlIDMyLWJpdAogICAgICAgICMgYXBwcyBhcmUgYWxzbyBzdXBwb3J0ZWQuLgogICAgICAgIHN5c3RlbSA9ICdJUklYJwogICAgICAgIGlmIHZlcnNpb246CiAgICAgICAgICAgIHZlcnNpb24gPSB2ZXJzaW9uICsgJyAoNjRiaXQpJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHZlcnNpb24gPSAnNjRiaXQnCgogICAgZWxpZiBzeXN0ZW0gaW4gKCd3aW4zMicsJ3dpbjE2Jyk6CiAgICAgICAgIyBJbiBjYXNlIG9uZSBvZiB0aGUgb3RoZXIgdHJpY2tzCiAgICAgICAgc3lzdGVtID0gJ1dpbmRvd3MnCgogICAgcmV0dXJuIHN5c3RlbSxyZWxlYXNlLHZlcnNpb24KCiMjIyBWYXJpb3VzIGludGVybmFsIGhlbHBlcnMKCmRlZiBfcGxhdGZvcm0oKmFyZ3MpOgoKICAgICIiIiBIZWxwZXIgdG8gZm9ybWF0IHRoZSBwbGF0Zm9ybSBzdHJpbmcgaW4gYSBmaWxlbmFtZQogICAgICAgIGNvbXBhdGlibGUgZm9ybWF0IGUuZy4gInN5c3RlbS12ZXJzaW9uLW1hY2hpbmUiLgogICAgIiIiCiAgICAjIEZvcm1hdCB0aGUgcGxhdGZvcm0gc3RyaW5nCiAgICBwbGF0Zm9ybSA9ICctJy5qb2luKHguc3RyaXAoKSBmb3IgeCBpbiBmaWx0ZXIobGVuLCBhcmdzKSkKCiAgICAjIENsZWFudXAgc29tZSBwb3NzaWJsZSBmaWxlbmFtZSBvYnN0YWNsZXMuLi4KICAgIHBsYXRmb3JtID0gcGxhdGZvcm0ucmVwbGFjZSgnICcsJ18nKQogICAgcGxhdGZvcm0gPSBwbGF0Zm9ybS5yZXBsYWNlKCcvJywnLScpCiAgICBwbGF0Zm9ybSA9IHBsYXRmb3JtLnJlcGxhY2UoJ1xcJywnLScpCiAgICBwbGF0Zm9ybSA9IHBsYXRmb3JtLnJlcGxhY2UoJzonLCctJykKICAgIHBsYXRmb3JtID0gcGxhdGZvcm0ucmVwbGFjZSgnOycsJy0nKQogICAgcGxhdGZvcm0gPSBwbGF0Zm9ybS5yZXBsYWNlKCciJywnLScpCiAgICBwbGF0Zm9ybSA9IHBsYXRmb3JtLnJlcGxhY2UoJygnLCctJykKICAgIHBsYXRmb3JtID0gcGxhdGZvcm0ucmVwbGFjZSgnKScsJy0nKQoKICAgICMgTm8gbmVlZCB0byByZXBvcnQgJ3Vua25vd24nIGluZm9ybWF0aW9uLi4uCiAgICBwbGF0Zm9ybSA9IHBsYXRmb3JtLnJlcGxhY2UoJ3Vua25vd24nLCcnKQoKICAgICMgRm9sZCAnLS0ncyBhbmQgcmVtb3ZlIHRyYWlsaW5nICctJwogICAgd2hpbGUgMToKICAgICAgICBjbGVhbmVkID0gcGxhdGZvcm0ucmVwbGFjZSgnLS0nLCctJykKICAgICAgICBpZiBjbGVhbmVkID09IHBsYXRmb3JtOgogICAgICAgICAgICBicmVhawogICAgICAgIHBsYXRmb3JtID0gY2xlYW5lZAogICAgd2hpbGUgcGxhdGZvcm1bLTFdID09ICctJzoKICAgICAgICBwbGF0Zm9ybSA9IHBsYXRmb3JtWzotMV0KCiAgICByZXR1cm4gcGxhdGZvcm0KCmRlZiBfbm9kZShkZWZhdWx0PScnKToKCiAgICAiIiIgSGVscGVyIHRvIGRldGVybWluZSB0aGUgbm9kZSBuYW1lIG9mIHRoaXMgbWFjaGluZS4KICAgICIiIgogICAgdHJ5OgogICAgICAgIGltcG9ydCBzb2NrZXQKICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAjIE5vIHNvY2tldHMuLi4KICAgICAgICByZXR1cm4gZGVmYXVsdAogICAgdHJ5OgogICAgICAgIHJldHVybiBzb2NrZXQuZ2V0aG9zdG5hbWUoKQogICAgZXhjZXB0IHNvY2tldC5lcnJvcjoKICAgICAgICAjIFN0aWxsIG5vdCB3b3JraW5nLi4uCiAgICAgICAgcmV0dXJuIGRlZmF1bHQKCmRlZiBfZm9sbG93X3N5bWxpbmtzKGZpbGVwYXRoKToKCiAgICAiIiIgSW4gY2FzZSBmaWxlcGF0aCBpcyBhIHN5bWxpbmssIGZvbGxvdyBpdCB1bnRpbCBhCiAgICAgICAgcmVhbCBmaWxlIGlzIHJlYWNoZWQuCiAgICAiIiIKICAgIGZpbGVwYXRoID0gb3MucGF0aC5hYnNwYXRoKGZpbGVwYXRoKQogICAgd2hpbGUgb3MucGF0aC5pc2xpbmsoZmlsZXBhdGgpOgogICAgICAgIGZpbGVwYXRoID0gb3MucGF0aC5ub3JtcGF0aCgKICAgICAgICAgICAgb3MucGF0aC5qb2luKG9zLnBhdGguZGlybmFtZShmaWxlcGF0aCksb3MucmVhZGxpbmsoZmlsZXBhdGgpKSkKICAgIHJldHVybiBmaWxlcGF0aAoKZGVmIF9zeXNjbWRfdW5hbWUob3B0aW9uLGRlZmF1bHQ9JycpOgoKICAgICIiIiBJbnRlcmZhY2UgdG8gdGhlIHN5c3RlbSdzIHVuYW1lIGNvbW1hbmQuCiAgICAiIiIKICAgIGlmIHN5cy5wbGF0Zm9ybSBpbiAoJ2RvcycsJ3dpbjMyJywnd2luMTYnLCdvczInKToKICAgICAgICAjIFhYWCBPdGhlcnMgdG9vID8KICAgICAgICByZXR1cm4gZGVmYXVsdAogICAgdHJ5OgogICAgICAgIGYgPSBvcy5wb3BlbigndW5hbWUgJXMgMj4gJXMnICUgKG9wdGlvbiwgREVWX05VTEwpKQogICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvcixvcy5lcnJvcik6CiAgICAgICAgcmV0dXJuIGRlZmF1bHQKICAgIG91dHB1dCA9IGYucmVhZCgpLnN0cmlwKCkKICAgIHJjID0gZi5jbG9zZSgpCiAgICBpZiBub3Qgb3V0cHV0IG9yIHJjOgogICAgICAgIHJldHVybiBkZWZhdWx0CiAgICBlbHNlOgogICAgICAgIHJldHVybiBvdXRwdXQKCmRlZiBfc3lzY21kX2ZpbGUodGFyZ2V0LGRlZmF1bHQ9JycpOgoKICAgICIiIiBJbnRlcmZhY2UgdG8gdGhlIHN5c3RlbSdzIGZpbGUgY29tbWFuZC4KCiAgICAgICAgVGhlIGZ1bmN0aW9uIHVzZXMgdGhlIC1iIG9wdGlvbiBvZiB0aGUgZmlsZSBjb21tYW5kIHRvIGhhdmUgaXQKICAgICAgICBvbWl0IHRoZSBmaWxlbmFtZSBpbiBpdHMgb3V0cHV0LiBGb2xsb3cgdGhlIHN5bWxpbmtzLiBJdCByZXR1cm5zCiAgICAgICAgZGVmYXVsdCBpbiBjYXNlIHRoZSBjb21tYW5kIHNob3VsZCBmYWlsLgoKICAgICIiIgogICAgaWYgc3lzLnBsYXRmb3JtIGluICgnZG9zJywnd2luMzInLCd3aW4xNicsJ29zMicpOgogICAgICAgICMgWFhYIE90aGVycyB0b28gPwogICAgICAgIHJldHVybiBkZWZhdWx0CiAgICB0YXJnZXQgPSBfZm9sbG93X3N5bWxpbmtzKHRhcmdldCkKICAgIHRyeToKICAgICAgICBwcm9jID0gc3VicHJvY2Vzcy5Qb3BlbihbJ2ZpbGUnLCB0YXJnZXRdLAogICAgICAgICAgICAgICAgc3Rkb3V0PXN1YnByb2Nlc3MuUElQRSwgc3RkZXJyPXN1YnByb2Nlc3MuU1RET1VUKQoKICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3Isb3MuZXJyb3IpOgogICAgICAgIHJldHVybiBkZWZhdWx0CiAgICBvdXRwdXQgPSBwcm9jLmNvbW11bmljYXRlKClbMF0uZGVjb2RlKCdsYXRpbi0xJykKICAgIHJjID0gcHJvYy53YWl0KCkKICAgIGlmIG5vdCBvdXRwdXQgb3IgcmM6CiAgICAgICAgcmV0dXJuIGRlZmF1bHQKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIG91dHB1dAoKIyMjIEluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VkIGFyY2hpdGVjdHVyZQoKIyBEZWZhdWx0IHZhbHVlcyBmb3IgYXJjaGl0ZWN0dXJlOyBub24tZW1wdHkgc3RyaW5ncyBvdmVycmlkZSB0aGUKIyBkZWZhdWx0cyBnaXZlbiBhcyBwYXJhbWV0ZXJzCl9kZWZhdWx0X2FyY2hpdGVjdHVyZSA9IHsKICAgICd3aW4zMic6ICgnJywnV2luZG93c1BFJyksCiAgICAnd2luMTYnOiAoJycsJ1dpbmRvd3MnKSwKICAgICdkb3MnOiAoJycsJ01TRE9TJyksCn0KCmRlZiBhcmNoaXRlY3R1cmUoZXhlY3V0YWJsZT1zeXMuZXhlY3V0YWJsZSxiaXRzPScnLGxpbmthZ2U9JycpOgoKICAgICIiIiBRdWVyaWVzIHRoZSBnaXZlbiBleGVjdXRhYmxlIChkZWZhdWx0cyB0byB0aGUgUHl0aG9uIGludGVycHJldGVyCiAgICAgICAgYmluYXJ5KSBmb3IgdmFyaW91cyBhcmNoaXRlY3R1cmUgaW5mb3JtYXRpb24uCgogICAgICAgIFJldHVybnMgYSB0dXBsZSAoYml0cyxsaW5rYWdlKSB3aGljaCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dAogICAgICAgIHRoZSBiaXQgYXJjaGl0ZWN0dXJlIGFuZCB0aGUgbGlua2FnZSBmb3JtYXQgdXNlZCBmb3IgdGhlCiAgICAgICAgZXhlY3V0YWJsZS4gQm90aCB2YWx1ZXMgYXJlIHJldHVybmVkIGFzIHN0cmluZ3MuCgogICAgICAgIFZhbHVlcyB0aGF0IGNhbm5vdCBiZSBkZXRlcm1pbmVkIGFyZSByZXR1cm5lZCBhcyBnaXZlbiBieSB0aGUKICAgICAgICBwYXJhbWV0ZXIgcHJlc2V0cy4gSWYgYml0cyBpcyBnaXZlbiBhcyAnJywgdGhlIHNpemVvZihwb2ludGVyKQogICAgICAgIChvciBzaXplb2YobG9uZykgb24gUHl0aG9uIHZlcnNpb24gPCAxLjUuMikgaXMgdXNlZCBhcwogICAgICAgIGluZGljYXRvciBmb3IgdGhlIHN1cHBvcnRlZCBwb2ludGVyIHNpemUuCgogICAgICAgIFRoZSBmdW5jdGlvbiByZWxpZXMgb24gdGhlIHN5c3RlbSdzICJmaWxlIiBjb21tYW5kIHRvIGRvIHRoZQogICAgICAgIGFjdHVhbCB3b3JrLiBUaGlzIGlzIGF2YWlsYWJsZSBvbiBtb3N0IGlmIG5vdCBhbGwgVW5peAogICAgICAgIHBsYXRmb3Jtcy4gT24gc29tZSBub24tVW5peCBwbGF0Zm9ybXMgd2hlcmUgdGhlICJmaWxlIiBjb21tYW5kCiAgICAgICAgZG9lcyBub3QgZXhpc3QgYW5kIHRoZSBleGVjdXRhYmxlIGlzIHNldCB0byB0aGUgUHl0aG9uIGludGVycHJldGVyCiAgICAgICAgYmluYXJ5IGRlZmF1bHRzIGZyb20gX2RlZmF1bHRfYXJjaGl0ZWN0dXJlIGFyZSB1c2VkLgoKICAgICIiIgogICAgIyBVc2UgdGhlIHNpemVvZihwb2ludGVyKSBhcyBkZWZhdWx0IG51bWJlciBvZiBiaXRzIGlmIG5vdGhpbmcKICAgICMgZWxzZSBpcyBnaXZlbiBhcyBkZWZhdWx0LgogICAgaWYgbm90IGJpdHM6CiAgICAgICAgaW1wb3J0IHN0cnVjdAogICAgICAgIHRyeToKICAgICAgICAgICAgc2l6ZSA9IHN0cnVjdC5jYWxjc2l6ZSgnUCcpCiAgICAgICAgZXhjZXB0IHN0cnVjdC5lcnJvcjoKICAgICAgICAgICAgIyBPbGRlciBpbnN0YWxsYXRpb25zIGNhbiBvbmx5IHF1ZXJ5IGxvbmdzCiAgICAgICAgICAgIHNpemUgPSBzdHJ1Y3QuY2FsY3NpemUoJ2wnKQogICAgICAgIGJpdHMgPSBzdHIoc2l6ZSo4KSArICdiaXQnCgogICAgIyBHZXQgZGF0YSBmcm9tIHRoZSAnZmlsZScgc3lzdGVtIGNvbW1hbmQKICAgIGlmIGV4ZWN1dGFibGU6CiAgICAgICAgZmlsZW91dCA9IF9zeXNjbWRfZmlsZShleGVjdXRhYmxlLCAnJykKICAgIGVsc2U6CiAgICAgICAgZmlsZW91dCA9ICcnCgogICAgaWYgbm90IGZpbGVvdXQgYW5kIFwKICAgICAgIGV4ZWN1dGFibGUgPT0gc3lzLmV4ZWN1dGFibGU6CiAgICAgICAgIyAiZmlsZSIgY29tbWFuZCBkaWQgbm90IHJldHVybiBhbnl0aGluZzsgd2UnbGwgdHJ5IHRvIHByb3ZpZGUKICAgICAgICAjIHNvbWUgc2Vuc2libGUgZGVmYXVsdHMgdGhlbi4uLgogICAgICAgIGlmIHN5cy5wbGF0Zm9ybSBpbiBfZGVmYXVsdF9hcmNoaXRlY3R1cmU6CiAgICAgICAgICAgIGIsbCA9IF9kZWZhdWx0X2FyY2hpdGVjdHVyZVtzeXMucGxhdGZvcm1dCiAgICAgICAgICAgIGlmIGI6CiAgICAgICAgICAgICAgICBiaXRzID0gYgogICAgICAgICAgICBpZiBsOgogICAgICAgICAgICAgICAgbGlua2FnZSA9IGwKICAgICAgICByZXR1cm4gYml0cyxsaW5rYWdlCgogICAgaWYgJ2V4ZWN1dGFibGUnIG5vdCBpbiBmaWxlb3V0OgogICAgICAgICMgRm9ybWF0IG5vdCBzdXBwb3J0ZWQKICAgICAgICByZXR1cm4gYml0cyxsaW5rYWdlCgogICAgIyBCaXRzCiAgICBpZiAnMzItYml0JyBpbiBmaWxlb3V0OgogICAgICAgIGJpdHMgPSAnMzJiaXQnCiAgICBlbGlmICdOMzInIGluIGZpbGVvdXQ6CiAgICAgICAgIyBPbiBJcml4IG9ubHkKICAgICAgICBiaXRzID0gJ24zMmJpdCcKICAgIGVsaWYgJzY0LWJpdCcgaW4gZmlsZW91dDoKICAgICAgICBiaXRzID0gJzY0Yml0JwoKICAgICMgTGlua2FnZQogICAgaWYgJ0VMRicgaW4gZmlsZW91dDoKICAgICAgICBsaW5rYWdlID0gJ0VMRicKICAgIGVsaWYgJ1BFJyBpbiBmaWxlb3V0OgogICAgICAgICMgRS5nLiBXaW5kb3dzIHVzZXMgdGhpcyBmb3JtYXQKICAgICAgICBpZiAnV2luZG93cycgaW4gZmlsZW91dDoKICAgICAgICAgICAgbGlua2FnZSA9ICdXaW5kb3dzUEUnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbGlua2FnZSA9ICdQRScKICAgIGVsaWYgJ0NPRkYnIGluIGZpbGVvdXQ6CiAgICAgICAgbGlua2FnZSA9ICdDT0ZGJwogICAgZWxpZiAnTVMtRE9TJyBpbiBmaWxlb3V0OgogICAgICAgIGxpbmthZ2UgPSAnTVNET1MnCiAgICBlbHNlOgogICAgICAgICMgWFhYIHRoZSBBLk9VVCBmb3JtYXQgYWxzbyBmYWxscyB1bmRlciB0aGlzIGNsYXNzLi4uCiAgICAgICAgcGFzcwoKICAgIHJldHVybiBiaXRzLGxpbmthZ2UKCiMjIyBQb3J0YWJsZSB1bmFtZSgpIGludGVyZmFjZQoKdW5hbWVfcmVzdWx0ID0gY29sbGVjdGlvbnMubmFtZWR0dXBsZSgidW5hbWVfcmVzdWx0IiwKICAgICAgICAgICAgICAgICAgICAic3lzdGVtIG5vZGUgcmVsZWFzZSB2ZXJzaW9uIG1hY2hpbmUgcHJvY2Vzc29yIikKCl91bmFtZV9jYWNoZSA9IE5vbmUKCmRlZiB1bmFtZSgpOgoKICAgICIiIiBGYWlybHkgcG9ydGFibGUgdW5hbWUgaW50ZXJmYWNlLiBSZXR1cm5zIGEgdHVwbGUKICAgICAgICBvZiBzdHJpbmdzIChzeXN0ZW0sbm9kZSxyZWxlYXNlLHZlcnNpb24sbWFjaGluZSxwcm9jZXNzb3IpCiAgICAgICAgaWRlbnRpZnlpbmcgdGhlIHVuZGVybHlpbmcgcGxhdGZvcm0uCgogICAgICAgIE5vdGUgdGhhdCB1bmxpa2UgdGhlIG9zLnVuYW1lIGZ1bmN0aW9uIHRoaXMgYWxzbyByZXR1cm5zCiAgICAgICAgcG9zc2libGUgcHJvY2Vzc29yIGluZm9ybWF0aW9uIGFzIGFuIGFkZGl0aW9uYWwgdHVwbGUgZW50cnkuCgogICAgICAgIEVudHJpZXMgd2hpY2ggY2Fubm90IGJlIGRldGVybWluZWQgYXJlIHNldCB0byAnJy4KCiAgICAiIiIKICAgIGdsb2JhbCBfdW5hbWVfY2FjaGUKICAgIG5vX29zX3VuYW1lID0gMAoKICAgIGlmIF91bmFtZV9jYWNoZSBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gX3VuYW1lX2NhY2hlCgogICAgcHJvY2Vzc29yID0gJycKCiAgICAjIEdldCBzb21lIGluZm9zIGZyb20gdGhlIGJ1aWx0aW4gb3MudW5hbWUgQVBJLi4uCiAgICB0cnk6CiAgICAgICAgc3lzdGVtLG5vZGUscmVsZWFzZSx2ZXJzaW9uLG1hY2hpbmUgPSBvcy51bmFtZSgpCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgbm9fb3NfdW5hbWUgPSAxCgogICAgaWYgbm9fb3NfdW5hbWUgb3Igbm90IGxpc3QoZmlsdGVyKE5vbmUsIChzeXN0ZW0sIG5vZGUsIHJlbGVhc2UsIHZlcnNpb24sIG1hY2hpbmUpKSk6CiAgICAgICAgIyBIbW0sIG5vIHRoZXJlIGlzIGVpdGhlciBubyB1bmFtZSBvciB1bmFtZSBoYXMgcmV0dXJuZWQKICAgICAgICAjJ3Vua25vd25zJy4uLiB3ZSdsbCBoYXZlIHRvIHBva2UgYXJvdW5kIHRoZSBzeXN0ZW0gdGhlbi4KICAgICAgICBpZiBub19vc191bmFtZToKICAgICAgICAgICAgc3lzdGVtID0gc3lzLnBsYXRmb3JtCiAgICAgICAgICAgIHJlbGVhc2UgPSAnJwogICAgICAgICAgICB2ZXJzaW9uID0gJycKICAgICAgICAgICAgbm9kZSA9IF9ub2RlKCkKICAgICAgICAgICAgbWFjaGluZSA9ICcnCgogICAgICAgIHVzZV9zeXNjbWRfdmVyID0gMQoKICAgICAgICAjIFRyeSB3aW4zMl92ZXIoKSBvbiB3aW4zMiBwbGF0Zm9ybXMKICAgICAgICBpZiBzeXN0ZW0gPT0gJ3dpbjMyJzoKICAgICAgICAgICAgcmVsZWFzZSx2ZXJzaW9uLGNzZCxwdHlwZSA9IHdpbjMyX3ZlcigpCiAgICAgICAgICAgIGlmIHJlbGVhc2UgYW5kIHZlcnNpb246CiAgICAgICAgICAgICAgICB1c2Vfc3lzY21kX3ZlciA9IDAKICAgICAgICAgICAgIyBUcnkgdG8gdXNlIHRoZSBQUk9DRVNTT1JfKiBlbnZpcm9ubWVudCB2YXJpYWJsZXMKICAgICAgICAgICAgIyBhdmFpbGFibGUgb24gV2luIFhQIGFuZCBsYXRlcjsgc2VlCiAgICAgICAgICAgICMgaHR0cDovL3N1cHBvcnQubWljcm9zb2Z0LmNvbS9rYi84ODg3MzEgYW5kCiAgICAgICAgICAgICMgaHR0cDovL3d3dy5nZW9jaXRpZXMuY29tL3JpY2tfbGl2ZWx5L01BTlVBTFMvRU5WL01TV0lOL1BST0NFU1NJLkhUTQogICAgICAgICAgICBpZiBub3QgbWFjaGluZToKICAgICAgICAgICAgICAgICMgV09XNjQgcHJvY2Vzc2VzIG1hc2sgdGhlIG5hdGl2ZSBhcmNoaXRlY3R1cmUKICAgICAgICAgICAgICAgIGlmICJQUk9DRVNTT1JfQVJDSElURVc2NDMyIiBpbiBvcy5lbnZpcm9uOgogICAgICAgICAgICAgICAgICAgIG1hY2hpbmUgPSBvcy5lbnZpcm9uLmdldCgiUFJPQ0VTU09SX0FSQ0hJVEVXNjQzMiIsICcnKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBtYWNoaW5lID0gb3MuZW52aXJvbi5nZXQoJ1BST0NFU1NPUl9BUkNISVRFQ1RVUkUnLCAnJykKICAgICAgICAgICAgaWYgbm90IHByb2Nlc3NvcjoKICAgICAgICAgICAgICAgIHByb2Nlc3NvciA9IG9zLmVudmlyb24uZ2V0KCdQUk9DRVNTT1JfSURFTlRJRklFUicsIG1hY2hpbmUpCgogICAgICAgICMgVHJ5IHRoZSAndmVyJyBzeXN0ZW0gY29tbWFuZCBhdmFpbGFibGUgb24gc29tZQogICAgICAgICMgcGxhdGZvcm1zCiAgICAgICAgaWYgdXNlX3N5c2NtZF92ZXI6CiAgICAgICAgICAgIHN5c3RlbSxyZWxlYXNlLHZlcnNpb24gPSBfc3lzY21kX3ZlcihzeXN0ZW0pCiAgICAgICAgICAgICMgTm9ybWFsaXplIHN5c3RlbSB0byB3aGF0IHdpbjMyX3ZlcigpIG5vcm1hbGx5IHJldHVybnMKICAgICAgICAgICAgIyAoX3N5c2NtZF92ZXIoKSB0ZW5kcyB0byByZXR1cm4gdGhlIHZlbmRvciBuYW1lIGFzIHdlbGwpCiAgICAgICAgICAgIGlmIHN5c3RlbSA9PSAnTWljcm9zb2Z0IFdpbmRvd3MnOgogICAgICAgICAgICAgICAgc3lzdGVtID0gJ1dpbmRvd3MnCiAgICAgICAgICAgIGVsaWYgc3lzdGVtID09ICdNaWNyb3NvZnQnIGFuZCByZWxlYXNlID09ICdXaW5kb3dzJzoKICAgICAgICAgICAgICAgICMgVW5kZXIgV2luZG93cyBWaXN0YSBhbmQgV2luZG93cyBTZXJ2ZXIgMjAwOCwKICAgICAgICAgICAgICAgICMgTWljcm9zb2Z0IGNoYW5nZWQgdGhlIG91dHB1dCBvZiB0aGUgdmVyIGNvbW1hbmQuIFRoZQogICAgICAgICAgICAgICAgIyByZWxlYXNlIGlzIG5vIGxvbmdlciBwcmludGVkLiAgVGhpcyBjYXVzZXMgdGhlCiAgICAgICAgICAgICAgICAjIHN5c3RlbSBhbmQgcmVsZWFzZSB0byBiZSBtaXNpZGVudGlmaWVkLgogICAgICAgICAgICAgICAgc3lzdGVtID0gJ1dpbmRvd3MnCiAgICAgICAgICAgICAgICBpZiAnNi4wJyA9PSB2ZXJzaW9uWzozXToKICAgICAgICAgICAgICAgICAgICByZWxlYXNlID0gJ1Zpc3RhJwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByZWxlYXNlID0gJycKCiAgICAgICAgIyBJbiBjYXNlIHdlIHN0aWxsIGRvbid0IGtub3cgYW55dGhpbmcgdXNlZnVsLCB3ZSdsbCB0cnkgdG8KICAgICAgICAjIGhlbHAgb3Vyc2VsdmVzCiAgICAgICAgaWYgc3lzdGVtIGluICgnd2luMzInLCd3aW4xNicpOgogICAgICAgICAgICBpZiBub3QgdmVyc2lvbjoKICAgICAgICAgICAgICAgIGlmIHN5c3RlbSA9PSAnd2luMzInOgogICAgICAgICAgICAgICAgICAgIHZlcnNpb24gPSAnMzJiaXQnCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHZlcnNpb24gPSAnMTZiaXQnCiAgICAgICAgICAgIHN5c3RlbSA9ICdXaW5kb3dzJwoKICAgICAgICBlbGlmIHN5c3RlbVs6NF0gPT0gJ2phdmEnOgogICAgICAgICAgICByZWxlYXNlLHZlbmRvcix2bWluZm8sb3NpbmZvID0gamF2YV92ZXIoKQogICAgICAgICAgICBzeXN0ZW0gPSAnSmF2YScKICAgICAgICAgICAgdmVyc2lvbiA9ICcsICcuam9pbih2bWluZm8pCiAgICAgICAgICAgIGlmIG5vdCB2ZXJzaW9uOgogICAgICAgICAgICAgICAgdmVyc2lvbiA9IHZlbmRvcgoKICAgICMgU3lzdGVtIHNwZWNpZmljIGV4dGVuc2lvbnMKICAgIGlmIHN5c3RlbSA9PSAnT3BlblZNUyc6CiAgICAgICAgIyBPcGVuVk1TIHNlZW1zIHRvIGhhdmUgcmVsZWFzZSBhbmQgdmVyc2lvbiBtaXhlZCB1cAogICAgICAgIGlmIG5vdCByZWxlYXNlIG9yIHJlbGVhc2UgPT0gJzAnOgogICAgICAgICAgICByZWxlYXNlID0gdmVyc2lvbgogICAgICAgICAgICB2ZXJzaW9uID0gJycKICAgICAgICAjIEdldCBwcm9jZXNzb3IgaW5mb3JtYXRpb24KICAgICAgICB0cnk6CiAgICAgICAgICAgIGltcG9ydCB2bXNfbGliCiAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY3NpZCwgY3B1X251bWJlciA9IHZtc19saWIuZ2V0c3lpKCdTWUkkX0NQVScsMCkKICAgICAgICAgICAgaWYgKGNwdV9udW1iZXIgPj0gMTI4KToKICAgICAgICAgICAgICAgIHByb2Nlc3NvciA9ICdBbHBoYScKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByb2Nlc3NvciA9ICdWQVgnCiAgICBpZiBub3QgcHJvY2Vzc29yOgogICAgICAgICMgR2V0IHByb2Nlc3NvciBpbmZvcm1hdGlvbiBmcm9tIHRoZSB1bmFtZSBzeXN0ZW0gY29tbWFuZAogICAgICAgIHByb2Nlc3NvciA9IF9zeXNjbWRfdW5hbWUoJy1wJywnJykKCiAgICAjSWYgYW55IHVua25vd25zIHN0aWxsIGV4aXN0LCByZXBsYWNlIHRoZW0gd2l0aCAnJ3MsIHdoaWNoIGFyZSBtb3JlIHBvcnRhYmxlCiAgICBpZiBzeXN0ZW0gPT0gJ3Vua25vd24nOgogICAgICAgIHN5c3RlbSA9ICcnCiAgICBpZiBub2RlID09ICd1bmtub3duJzoKICAgICAgICBub2RlID0gJycKICAgIGlmIHJlbGVhc2UgPT0gJ3Vua25vd24nOgogICAgICAgIHJlbGVhc2UgPSAnJwogICAgaWYgdmVyc2lvbiA9PSAndW5rbm93bic6CiAgICAgICAgdmVyc2lvbiA9ICcnCiAgICBpZiBtYWNoaW5lID09ICd1bmtub3duJzoKICAgICAgICBtYWNoaW5lID0gJycKICAgIGlmIHByb2Nlc3NvciA9PSAndW5rbm93bic6CiAgICAgICAgcHJvY2Vzc29yID0gJycKCiAgICAjICBub3JtYWxpemUgbmFtZQogICAgaWYgc3lzdGVtID09ICdNaWNyb3NvZnQnIGFuZCByZWxlYXNlID09ICdXaW5kb3dzJzoKICAgICAgICBzeXN0ZW0gPSAnV2luZG93cycKICAgICAgICByZWxlYXNlID0gJ1Zpc3RhJwoKICAgIF91bmFtZV9jYWNoZSA9IHVuYW1lX3Jlc3VsdChzeXN0ZW0sbm9kZSxyZWxlYXNlLHZlcnNpb24sbWFjaGluZSxwcm9jZXNzb3IpCiAgICByZXR1cm4gX3VuYW1lX2NhY2hlCgojIyMgRGlyZWN0IGludGVyZmFjZXMgdG8gc29tZSBvZiB0aGUgdW5hbWUoKSByZXR1cm4gdmFsdWVzCgpkZWYgc3lzdGVtKCk6CgogICAgIiIiIFJldHVybnMgdGhlIHN5c3RlbS9PUyBuYW1lLCBlLmcuICdMaW51eCcsICdXaW5kb3dzJyBvciAnSmF2YScuCgogICAgICAgIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBpZiB0aGUgdmFsdWUgY2Fubm90IGJlIGRldGVybWluZWQuCgogICAgIiIiCiAgICByZXR1cm4gdW5hbWUoKS5zeXN0ZW0KCmRlZiBub2RlKCk6CgogICAgIiIiIFJldHVybnMgdGhlIGNvbXB1dGVyJ3MgbmV0d29yayBuYW1lICh3aGljaCBtYXkgbm90IGJlIGZ1bGx5CiAgICAgICAgcXVhbGlmaWVkKQoKICAgICAgICBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgaWYgdGhlIHZhbHVlIGNhbm5vdCBiZSBkZXRlcm1pbmVkLgoKICAgICIiIgogICAgcmV0dXJuIHVuYW1lKCkubm9kZQoKZGVmIHJlbGVhc2UoKToKCiAgICAiIiIgUmV0dXJucyB0aGUgc3lzdGVtJ3MgcmVsZWFzZSwgZS5nLiAnMi4yLjAnIG9yICdOVCcKCiAgICAgICAgQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkIGlmIHRoZSB2YWx1ZSBjYW5ub3QgYmUgZGV0ZXJtaW5lZC4KCiAgICAiIiIKICAgIHJldHVybiB1bmFtZSgpLnJlbGVhc2UKCmRlZiB2ZXJzaW9uKCk6CgogICAgIiIiIFJldHVybnMgdGhlIHN5c3RlbSdzIHJlbGVhc2UgdmVyc2lvbiwgZS5nLiAnIzMgb24gZGVnYXMnCgogICAgICAgIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBpZiB0aGUgdmFsdWUgY2Fubm90IGJlIGRldGVybWluZWQuCgogICAgIiIiCiAgICByZXR1cm4gdW5hbWUoKS52ZXJzaW9uCgpkZWYgbWFjaGluZSgpOgoKICAgICIiIiBSZXR1cm5zIHRoZSBtYWNoaW5lIHR5cGUsIGUuZy4gJ2kzODYnCgogICAgICAgIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBpZiB0aGUgdmFsdWUgY2Fubm90IGJlIGRldGVybWluZWQuCgogICAgIiIiCiAgICByZXR1cm4gdW5hbWUoKS5tYWNoaW5lCgpkZWYgcHJvY2Vzc29yKCk6CgogICAgIiIiIFJldHVybnMgdGhlICh0cnVlKSBwcm9jZXNzb3IgbmFtZSwgZS5nLiAnYW1kazYnCgogICAgICAgIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBpZiB0aGUgdmFsdWUgY2Fubm90IGJlCiAgICAgICAgZGV0ZXJtaW5lZC4gTm90ZSB0aGF0IG1hbnkgcGxhdGZvcm1zIGRvIG5vdCBwcm92aWRlIHRoaXMKICAgICAgICBpbmZvcm1hdGlvbiBvciBzaW1wbHkgcmV0dXJuIHRoZSBzYW1lIHZhbHVlIGFzIGZvciBtYWNoaW5lKCksCiAgICAgICAgZS5nLiAgTmV0QlNEIGRvZXMgdGhpcy4KCiAgICAiIiIKICAgIHJldHVybiB1bmFtZSgpLnByb2Nlc3NvcgoKIyMjIFZhcmlvdXMgQVBJcyBmb3IgZXh0cmFjdGluZyBpbmZvcm1hdGlvbiBmcm9tIHN5cy52ZXJzaW9uCgpfc3lzX3ZlcnNpb25fcGFyc2VyID0gcmUuY29tcGlsZSgKICAgIHInKFtcdy4rXSspXHMqJwogICAgJ1woIz8oW14sXSspLFxzKihbXHcgXSspLFxzKihbXHcgOl0rKVwpXHMqJwogICAgJ1xbKFteXF1dKylcXT8nLCByZS5BU0NJSSkKCl9pcm9ucHl0aG9uX3N5c192ZXJzaW9uX3BhcnNlciA9IHJlLmNvbXBpbGUoCiAgICByJ0lyb25QeXRob25ccyonCiAgICAnKFtcZFwuXSspJwogICAgJyg/OiBcKChbXGRcLl0rKVwpKT8nCiAgICAnIG9uICguTkVUIFtcZFwuXSspJywgcmUuQVNDSUkpCgpfcHlweV9zeXNfdmVyc2lvbl9wYXJzZXIgPSByZS5jb21waWxlKAogICAgcicoW1x3LitdKylccyonCiAgICAnXCgjPyhbXixdKyksXHMqKFtcdyBdKyksXHMqKFtcdyA6XSspXClccyonCiAgICAnXFtQeVB5IFteXF1dK1xdPycpCgpfc3lzX3ZlcnNpb25fY2FjaGUgPSB7fQoKZGVmIF9zeXNfdmVyc2lvbihzeXNfdmVyc2lvbj1Ob25lKToKICAgICIiIiBSZXR1cm5zIGEgcGFyc2VkIHZlcnNpb24gb2YgUHl0aG9uJ3Mgc3lzLnZlcnNpb24gYXMgdHVwbGUKICAgICAgICAobmFtZSwgdmVyc2lvbiwgYnJhbmNoLCByZXZpc2lvbiwgYnVpbGRubywgYnVpbGRkYXRlLCBjb21waWxlcikKICAgICAgICByZWZlcnJpbmcgdG8gdGhlIFB5dGhvbiBpbXBsZW1lbnRhdGlvbiBuYW1lLCB2ZXJzaW9uLCBicmFuY2gsCiAgICAgICAgcmV2aXNpb24sIGJ1aWxkIG51bWJlciwgYnVpbGQgZGF0ZS90aW1lIGFzIHN0cmluZyBhbmQgdGhlIGNvbXBpbGVyCiAgICAgICAgaWRlbnRpZmljYXRpb24gc3RyaW5nLgoKICAgICAgICBOb3RlIHRoYXQgdW5saWtlIHRoZSBQeXRob24gc3lzLnZlcnNpb24sIHRoZSByZXR1cm5lZCB2YWx1ZQogICAgICAgIGZvciB0aGUgUHl0aG9uIHZlcnNpb24gd2lsbCBhbHdheXMgaW5jbHVkZSB0aGUgcGF0Y2hsZXZlbCAoaXQKICAgICAgICBkZWZhdWx0cyB0byAnLjAnKS4KCiAgICAgICAgVGhlIGZ1bmN0aW9uIHJldHVybnMgZW1wdHkgc3RyaW5ncyBmb3IgdHVwbGUgZW50cmllcyB0aGF0CiAgICAgICAgY2Fubm90IGJlIGRldGVybWluZWQuCgogICAgICAgIHN5c192ZXJzaW9uIG1heSBiZSBnaXZlbiB0byBwYXJzZSBhbiBhbHRlcm5hdGl2ZSB2ZXJzaW9uCiAgICAgICAgc3RyaW5nLCBlLmcuIGlmIHRoZSB2ZXJzaW9uIHdhcyByZWFkIGZyb20gYSBkaWZmZXJlbnQgUHl0aG9uCiAgICAgICAgaW50ZXJwcmV0ZXIuCgogICAgIiIiCiAgICAjIEdldCB0aGUgUHl0aG9uIHZlcnNpb24KICAgIGlmIHN5c192ZXJzaW9uIGlzIE5vbmU6CiAgICAgICAgc3lzX3ZlcnNpb24gPSBzeXMudmVyc2lvbgoKICAgIF9idWlsZGRhdGU9c3lzX3ZlcnNpb25bMl1bOjhdCiAgICBfdmVyc2lvbj0nJXMuJXMnICUgKHN5c192ZXJzaW9uWzBdLCBzeXNfdmVyc2lvblsxXSkKCiAgICByZXR1cm4gKCJCcnl0aG9uIiwgX3ZlcnNpb24sICcnLCAnJywgJ2RlZmF1bHQnLCBfYnVpbGRkYXRlLCAnJykKCiAgICAjIEJ1aWxkIGFuZCBjYWNoZSB0aGUgcmVzdWx0CiAgICAjcmVzdWx0ID0gKG5hbWUsIHZlcnNpb24sIGJyYW5jaCwgcmV2aXNpb24sIGJ1aWxkbm8sIGJ1aWxkZGF0ZSwgY29tcGlsZXIpCiAgICAjX3N5c192ZXJzaW9uX2NhY2hlW3N5c192ZXJzaW9uXSA9IHJlc3VsdAogICAgI3JldHVybiByZXN1bHQKCmRlZiBweXRob25faW1wbGVtZW50YXRpb24oKToKCiAgICAiIiIgUmV0dXJucyBhIHN0cmluZyBpZGVudGlmeWluZyB0aGUgUHl0aG9uIGltcGxlbWVudGF0aW9uLgoKICAgICAgICBDdXJyZW50bHksIHRoZSBmb2xsb3dpbmcgaW1wbGVtZW50YXRpb25zIGFyZSBpZGVudGlmaWVkOgogICAgICAgICAgJ0NQeXRob24nIChDIGltcGxlbWVudGF0aW9uIG9mIFB5dGhvbiksCiAgICAgICAgICAnSXJvblB5dGhvbicgKC5ORVQgaW1wbGVtZW50YXRpb24gb2YgUHl0aG9uKSwKICAgICAgICAgICdKeXRob24nIChKYXZhIGltcGxlbWVudGF0aW9uIG9mIFB5dGhvbiksCiAgICAgICAgICAnUHlQeScgKFB5dGhvbiBpbXBsZW1lbnRhdGlvbiBvZiBQeXRob24pLgoKICAgICIiIgogICAgcmV0dXJuICJCcnl0aG9uIiAgI19zeXNfdmVyc2lvbigpWzBdCgpkZWYgcHl0aG9uX3ZlcnNpb24oKToKCiAgICAiIiIgUmV0dXJucyB0aGUgUHl0aG9uIHZlcnNpb24gYXMgc3RyaW5nICdtYWpvci5taW5vci5wYXRjaGxldmVsJwoKICAgICAgICBOb3RlIHRoYXQgdW5saWtlIHRoZSBQeXRob24gc3lzLnZlcnNpb24sIHRoZSByZXR1cm5lZCB2YWx1ZQogICAgICAgIHdpbGwgYWx3YXlzIGluY2x1ZGUgdGhlIHBhdGNobGV2ZWwgKGl0IGRlZmF1bHRzIHRvIDApLgoKICAgICIiIgogICAgI3JldHVybiBfc3lzX3ZlcnNpb24oKVsxXQogICAgcmV0dXJuICclcy4lcycgJSAoc3lzLnZlcnNpb25bMF0sIHN5cy52ZXJzaW9uWzFdKQoKZGVmIHB5dGhvbl92ZXJzaW9uX3R1cGxlKCk6CgogICAgIiIiIFJldHVybnMgdGhlIFB5dGhvbiB2ZXJzaW9uIGFzIHR1cGxlIChtYWpvciwgbWlub3IsIHBhdGNobGV2ZWwpCiAgICAgICAgb2Ygc3RyaW5ncy4KCiAgICAgICAgTm90ZSB0aGF0IHVubGlrZSB0aGUgUHl0aG9uIHN5cy52ZXJzaW9uLCB0aGUgcmV0dXJuZWQgdmFsdWUKICAgICAgICB3aWxsIGFsd2F5cyBpbmNsdWRlIHRoZSBwYXRjaGxldmVsIChpdCBkZWZhdWx0cyB0byAwKS4KCiAgICAiIiIKICAgICNyZXR1cm4gdHVwbGUoX3N5c192ZXJzaW9uKClbMV0uc3BsaXQoJy4nKSkKICAgIHJldHVybiB0dXBsZShzeXMudmVyc2lvblswXSwgc3lzLnZlcnNpb25bMV0sIDApCgpkZWYgcHl0aG9uX2JyYW5jaCgpOgoKICAgICIiIiBSZXR1cm5zIGEgc3RyaW5nIGlkZW50aWZ5aW5nIHRoZSBQeXRob24gaW1wbGVtZW50YXRpb24KICAgICAgICBicmFuY2guCgogICAgICAgIEZvciBDUHl0aG9uIHRoaXMgaXMgdGhlIFN1YnZlcnNpb24gYnJhbmNoIGZyb20gd2hpY2ggdGhlCiAgICAgICAgUHl0aG9uIGJpbmFyeSB3YXMgYnVpbHQuCgogICAgICAgIElmIG5vdCBhdmFpbGFibGUsIGFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZC4KCiAgICAiIiIKCiAgICAjcmV0dXJuIF9zeXNfdmVyc2lvbigpWzJdCiAgICByZXR1cm4gJycKCmRlZiBweXRob25fcmV2aXNpb24oKToKCiAgICAiIiIgUmV0dXJucyBhIHN0cmluZyBpZGVudGlmeWluZyB0aGUgUHl0aG9uIGltcGxlbWVudGF0aW9uCiAgICAgICAgcmV2aXNpb24uCgogICAgICAgIEZvciBDUHl0aG9uIHRoaXMgaXMgdGhlIFN1YnZlcnNpb24gcmV2aXNpb24gZnJvbSB3aGljaCB0aGUKICAgICAgICBQeXRob24gYmluYXJ5IHdhcyBidWlsdC4KCiAgICAgICAgSWYgbm90IGF2YWlsYWJsZSwgYW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkLgoKICAgICIiIgogICAgI3JldHVybiBfc3lzX3ZlcnNpb24oKVszXQogICAgcmV0dXJuICcnCgpkZWYgcHl0aG9uX2J1aWxkKCk6CgogICAgIiIiIFJldHVybnMgYSB0dXBsZSAoYnVpbGRubywgYnVpbGRkYXRlKSBzdGF0aW5nIHRoZSBQeXRob24KICAgICAgICBidWlsZCBudW1iZXIgYW5kIGRhdGUgYXMgc3RyaW5ncy4KCiAgICAiIiIKICAgICNyZXR1cm4gX3N5c192ZXJzaW9uKClbNDo2XQogICAgcmV0dXJuIHR1cGxlKCcnLCAnJykKCmRlZiBweXRob25fY29tcGlsZXIoKToKCiAgICAiIiIgUmV0dXJucyBhIHN0cmluZyBpZGVudGlmeWluZyB0aGUgY29tcGlsZXIgdXNlZCBmb3IgY29tcGlsaW5nCiAgICAgICAgUHl0aG9uLgoKICAgICIiIgogICAgI3JldHVybiBfc3lzX3ZlcnNpb24oKVs2XQogICAgcmV0dXJuICcnCgojIyMgVGhlIE9wdXMgTWFnbnVtIG9mIHBsYXRmb3JtIHN0cmluZ3MgOi0pCgpfcGxhdGZvcm1fY2FjaGUgPSB7fQoKZGVmIHBsYXRmb3JtKGFsaWFzZWQ9MCwgdGVyc2U9MCk6CgogICAgIiIiIFJldHVybnMgYSBzaW5nbGUgc3RyaW5nIGlkZW50aWZ5aW5nIHRoZSB1bmRlcmx5aW5nIHBsYXRmb3JtCiAgICAgICAgd2l0aCBhcyBtdWNoIHVzZWZ1bCBpbmZvcm1hdGlvbiBhcyBwb3NzaWJsZSAoYnV0IG5vIG1vcmUgOikuCgogICAgICAgIFRoZSBvdXRwdXQgaXMgaW50ZW5kZWQgdG8gYmUgaHVtYW4gcmVhZGFibGUgcmF0aGVyIHRoYW4KICAgICAgICBtYWNoaW5lIHBhcnNlYWJsZS4gSXQgbWF5IGxvb2sgZGlmZmVyZW50IG9uIGRpZmZlcmVudAogICAgICAgIHBsYXRmb3JtcyBhbmQgdGhpcyBpcyBpbnRlbmRlZC4KCiAgICAgICAgSWYgImFsaWFzZWQiIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB3aWxsIHVzZSBhbGlhc2VzIGZvcgogICAgICAgIHZhcmlvdXMgcGxhdGZvcm1zIHRoYXQgcmVwb3J0IHN5c3RlbSBuYW1lcyB3aGljaCBkaWZmZXIgZnJvbQogICAgICAgIHRoZWlyIGNvbW1vbiBuYW1lcywgZS5nLiBTdW5PUyB3aWxsIGJlIHJlcG9ydGVkIGFzCiAgICAgICAgU29sYXJpcy4gVGhlIHN5c3RlbV9hbGlhcygpIGZ1bmN0aW9uIGlzIHVzZWQgdG8gaW1wbGVtZW50CiAgICAgICAgdGhpcy4KCiAgICAgICAgU2V0dGluZyB0ZXJzZSB0byB0cnVlIGNhdXNlcyB0aGUgZnVuY3Rpb24gdG8gcmV0dXJuIG9ubHkgdGhlCiAgICAgICAgYWJzb2x1dGUgbWluaW11bSBpbmZvcm1hdGlvbiBuZWVkZWQgdG8gaWRlbnRpZnkgdGhlIHBsYXRmb3JtLgoKICAgICIiIgoKICAgIHJldHVybiAiQnJvd3NlciIKCiMjIyBDb21tYW5kIGxpbmUgaW50ZXJmYWNlCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgIyBEZWZhdWx0IGlzIHRvIHByaW50IHRoZSBhbGlhc2VkIHZlcmJvc2UgcGxhdGZvcm0gc3RyaW5nCiAgICB0ZXJzZSA9ICgndGVyc2UnIGluIHN5cy5hcmd2IG9yICctLXRlcnNlJyBpbiBzeXMuYXJndikKICAgIGFsaWFzZWQgPSAobm90ICdub25hbGlhc2VkJyBpbiBzeXMuYXJndiBhbmQgbm90ICctLW5vbmFsaWFzZWQnIGluIHN5cy5hcmd2KQogICAgcHJpbnQocGxhdGZvcm0oYWxpYXNlZCx0ZXJzZSkpCiAgICBzeXMuZXhpdCgwKQo=',
'/Lib/optparse.py':'IiIiQSBwb3dlcmZ1bCwgZXh0ZW5zaWJsZSwgYW5kIGVhc3ktdG8tdXNlIG9wdGlvbiBwYXJzZXIuCgpCeSBHcmVnIFdhcmQgPGd3YXJkQHB5dGhvbi5uZXQ+CgpPcmlnaW5hbGx5IGRpc3RyaWJ1dGVkIGFzIE9wdGlrLgoKRm9yIHN1cHBvcnQsIHVzZSB0aGUgb3B0aWstdXNlcnNAbGlzdHMuc291cmNlZm9yZ2UubmV0IG1haWxpbmcgbGlzdAooaHR0cDovL2xpc3RzLnNvdXJjZWZvcmdlLm5ldC9saXN0cy9saXN0aW5mby9vcHRpay11c2VycykuCgpTaW1wbGUgdXNhZ2UgZXhhbXBsZToKCiAgIGZyb20gb3B0cGFyc2UgaW1wb3J0IE9wdGlvblBhcnNlcgoKICAgcGFyc2VyID0gT3B0aW9uUGFyc2VyKCkKICAgcGFyc2VyLmFkZF9vcHRpb24oIi1mIiwgIi0tZmlsZSIsIGRlc3Q9ImZpbGVuYW1lIiwKICAgICAgICAgICAgICAgICAgICAgaGVscD0id3JpdGUgcmVwb3J0IHRvIEZJTEUiLCBtZXRhdmFyPSJGSUxFIikKICAgcGFyc2VyLmFkZF9vcHRpb24oIi1xIiwgIi0tcXVpZXQiLAogICAgICAgICAgICAgICAgICAgICBhY3Rpb249InN0b3JlX2ZhbHNlIiwgZGVzdD0idmVyYm9zZSIsIGRlZmF1bHQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgaGVscD0iZG9uJ3QgcHJpbnQgc3RhdHVzIG1lc3NhZ2VzIHRvIHN0ZG91dCIpCgogICAob3B0aW9ucywgYXJncykgPSBwYXJzZXIucGFyc2VfYXJncygpCiIiIgoKX192ZXJzaW9uX18gPSAiMS41LjMiCgpfX2FsbF9fID0gWydPcHRpb24nLAogICAgICAgICAgICdtYWtlX29wdGlvbicsCiAgICAgICAgICAgJ1NVUFBSRVNTX0hFTFAnLAogICAgICAgICAgICdTVVBQUkVTU19VU0FHRScsCiAgICAgICAgICAgJ1ZhbHVlcycsCiAgICAgICAgICAgJ09wdGlvbkNvbnRhaW5lcicsCiAgICAgICAgICAgJ09wdGlvbkdyb3VwJywKICAgICAgICAgICAnT3B0aW9uUGFyc2VyJywKICAgICAgICAgICAnSGVscEZvcm1hdHRlcicsCiAgICAgICAgICAgJ0luZGVudGVkSGVscEZvcm1hdHRlcicsCiAgICAgICAgICAgJ1RpdGxlZEhlbHBGb3JtYXR0ZXInLAogICAgICAgICAgICdPcHRQYXJzZUVycm9yJywKICAgICAgICAgICAnT3B0aW9uRXJyb3InLAogICAgICAgICAgICdPcHRpb25Db25mbGljdEVycm9yJywKICAgICAgICAgICAnT3B0aW9uVmFsdWVFcnJvcicsCiAgICAgICAgICAgJ0JhZE9wdGlvbkVycm9yJ10KCl9fY29weXJpZ2h0X18gPSAiIiIKQ29weXJpZ2h0IChjKSAyMDAxLTIwMDYgR3JlZ29yeSBQLiBXYXJkLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC4KQ29weXJpZ2h0IChjKSAyMDAyLTIwMDYgUHl0aG9uIFNvZnR3YXJlIEZvdW5kYXRpb24uICBBbGwgcmlnaHRzIHJlc2VydmVkLgoKUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0Cm1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUKbWV0OgoKICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0CiAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCgogICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQKICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCgogICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgYXV0aG9yIG5vciB0aGUgbmFtZXMgb2YgaXRzCiAgICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbQogICAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KClRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTCklTIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRApUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEKUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIE9SCkNPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLApFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sClBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUgpQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GCkxJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HCk5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUwpTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KIiIiCgppbXBvcnQgc3lzLCBvcwppbXBvcnQgdGV4dHdyYXAKCmRlZiBfcmVwcihzZWxmKToKICAgIHJldHVybiAiPCVzIGF0IDB4JXg6ICVzPiIgJSAoc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIGlkKHNlbGYpLCBzZWxmKQoKCiMgVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgZnJvbToKIyAgIElkOiBvcHRpb25fcGFyc2VyLnB5IDUyNyAyMDA2LTA3LTIzIDE1OjIxOjMwWiBncmVnCiMgICBJZDogb3B0aW9uLnB5IDUyMiAyMDA2LTA2LTExIDE2OjIyOjAzWiBnd2FyZAojICAgSWQ6IGhlbHAucHkgNTI3IDIwMDYtMDctMjMgMTU6MjE6MzBaIGdyZWcKIyAgIElkOiBlcnJvcnMucHkgNTA5IDIwMDYtMDQtMjAgMDA6NTg6MjRaIGd3YXJkCgp0cnk6CiAgICBmcm9tIGdldHRleHQgaW1wb3J0IGdldHRleHQsIG5nZXR0ZXh0CmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGRlZiBnZXR0ZXh0KG1lc3NhZ2UpOgogICAgICAgIHJldHVybiBtZXNzYWdlCgogICAgZGVmIG5nZXR0ZXh0KHNpbmd1bGFyLCBwbHVyYWwsIG4pOgogICAgICAgIGlmIG4gPT0gMToKICAgICAgICAgICAgcmV0dXJuIHNpbmd1bGFyCiAgICAgICAgcmV0dXJuIHBsdXJhbAoKXyA9IGdldHRleHQKCgpjbGFzcyBPcHRQYXJzZUVycm9yIChFeGNlcHRpb24pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1zZyk6CiAgICAgICAgc2VsZi5tc2cgPSBtc2cKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5tc2cKCgpjbGFzcyBPcHRpb25FcnJvciAoT3B0UGFyc2VFcnJvcik6CiAgICAiIiIKICAgIFJhaXNlZCBpZiBhbiBPcHRpb24gaW5zdGFuY2UgaXMgY3JlYXRlZCB3aXRoIGludmFsaWQgb3IKICAgIGluY29uc2lzdGVudCBhcmd1bWVudHMuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbXNnLCBvcHRpb24pOgogICAgICAgIHNlbGYubXNnID0gbXNnCiAgICAgICAgc2VsZi5vcHRpb25faWQgPSBzdHIob3B0aW9uKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYub3B0aW9uX2lkOgogICAgICAgICAgICByZXR1cm4gIm9wdGlvbiAlczogJXMiICUgKHNlbGYub3B0aW9uX2lkLCBzZWxmLm1zZykKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2VsZi5tc2cKCmNsYXNzIE9wdGlvbkNvbmZsaWN0RXJyb3IgKE9wdGlvbkVycm9yKToKICAgICIiIgogICAgUmFpc2VkIGlmIGNvbmZsaWN0aW5nIG9wdGlvbnMgYXJlIGFkZGVkIHRvIGFuIE9wdGlvblBhcnNlci4KICAgICIiIgoKY2xhc3MgT3B0aW9uVmFsdWVFcnJvciAoT3B0UGFyc2VFcnJvcik6CiAgICAiIiIKICAgIFJhaXNlZCBpZiBhbiBpbnZhbGlkIG9wdGlvbiB2YWx1ZSBpcyBlbmNvdW50ZXJlZCBvbiB0aGUgY29tbWFuZAogICAgbGluZS4KICAgICIiIgoKY2xhc3MgQmFkT3B0aW9uRXJyb3IgKE9wdFBhcnNlRXJyb3IpOgogICAgIiIiCiAgICBSYWlzZWQgaWYgYW4gaW52YWxpZCBvcHRpb24gaXMgc2VlbiBvbiB0aGUgY29tbWFuZCBsaW5lLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgb3B0X3N0cik6CiAgICAgICAgc2VsZi5vcHRfc3RyID0gb3B0X3N0cgoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiBfKCJubyBzdWNoIG9wdGlvbjogJXMiKSAlIHNlbGYub3B0X3N0cgoKY2xhc3MgQW1iaWd1b3VzT3B0aW9uRXJyb3IgKEJhZE9wdGlvbkVycm9yKToKICAgICIiIgogICAgUmFpc2VkIGlmIGFuIGFtYmlndW91cyBvcHRpb24gaXMgc2VlbiBvbiB0aGUgY29tbWFuZCBsaW5lLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgb3B0X3N0ciwgcG9zc2liaWxpdGllcyk6CiAgICAgICAgQmFkT3B0aW9uRXJyb3IuX19pbml0X18oc2VsZiwgb3B0X3N0cikKICAgICAgICBzZWxmLnBvc3NpYmlsaXRpZXMgPSBwb3NzaWJpbGl0aWVzCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIChfKCJhbWJpZ3VvdXMgb3B0aW9uOiAlcyAoJXM/KSIpCiAgICAgICAgICAgICAgICAlIChzZWxmLm9wdF9zdHIsICIsICIuam9pbihzZWxmLnBvc3NpYmlsaXRpZXMpKSkKCgpjbGFzcyBIZWxwRm9ybWF0dGVyOgoKICAgICIiIgogICAgQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgZm9ybWF0dGluZyBvcHRpb24gaGVscC4gIE9wdGlvblBhcnNlcgogICAgaW5zdGFuY2VzIHNob3VsZCB1c2Ugb25lIG9mIHRoZSBIZWxwRm9ybWF0dGVyIHN1YmNsYXNzZXMgZm9yCiAgICBmb3JtYXR0aW5nIGhlbHA7IGJ5IGRlZmF1bHQgSW5kZW50ZWRIZWxwRm9ybWF0dGVyIGlzIHVzZWQuCgogICAgSW5zdGFuY2UgYXR0cmlidXRlczoKICAgICAgcGFyc2VyIDogT3B0aW9uUGFyc2VyCiAgICAgICAgdGhlIGNvbnRyb2xsaW5nIE9wdGlvblBhcnNlciBpbnN0YW5jZQogICAgICBpbmRlbnRfaW5jcmVtZW50IDogaW50CiAgICAgICAgdGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIGluZGVudCBwZXIgbmVzdGluZyBsZXZlbAogICAgICBtYXhfaGVscF9wb3NpdGlvbiA6IGludAogICAgICAgIHRoZSBtYXhpbXVtIHN0YXJ0aW5nIGNvbHVtbiBmb3Igb3B0aW9uIGhlbHAgdGV4dAogICAgICBoZWxwX3Bvc2l0aW9uIDogaW50CiAgICAgICAgdGhlIGNhbGN1bGF0ZWQgc3RhcnRpbmcgY29sdW1uIGZvciBvcHRpb24gaGVscCB0ZXh0OwogICAgICAgIGluaXRpYWxseSB0aGUgc2FtZSBhcyB0aGUgbWF4aW11bQogICAgICB3aWR0aCA6IGludAogICAgICAgIHRvdGFsIG51bWJlciBvZiBjb2x1bW5zIGZvciBvdXRwdXQgKHBhc3MgTm9uZSB0byBjb25zdHJ1Y3RvciBmb3IKICAgICAgICB0aGlzIHZhbHVlIHRvIGJlIHRha2VuIGZyb20gdGhlICRDT0xVTU5TIGVudmlyb25tZW50IHZhcmlhYmxlKQogICAgICBsZXZlbCA6IGludAogICAgICAgIGN1cnJlbnQgaW5kZW50YXRpb24gbGV2ZWwKICAgICAgY3VycmVudF9pbmRlbnQgOiBpbnQKICAgICAgICBjdXJyZW50IGluZGVudGF0aW9uIGxldmVsIChpbiBjb2x1bW5zKQogICAgICBoZWxwX3dpZHRoIDogaW50CiAgICAgICAgbnVtYmVyIG9mIGNvbHVtbnMgYXZhaWxhYmxlIGZvciBvcHRpb24gaGVscCB0ZXh0IChjYWxjdWxhdGVkKQogICAgICBkZWZhdWx0X3RhZyA6IHN0cgogICAgICAgIHRleHQgdG8gcmVwbGFjZSB3aXRoIGVhY2ggb3B0aW9uJ3MgZGVmYXVsdCB2YWx1ZSwgIiVkZWZhdWx0IgogICAgICAgIGJ5IGRlZmF1bHQuICBTZXQgdG8gZmFsc2UgdmFsdWUgdG8gZGlzYWJsZSBkZWZhdWx0IHZhbHVlIGV4cGFuc2lvbi4KICAgICAgb3B0aW9uX3N0cmluZ3MgOiB7IE9wdGlvbiA6IHN0ciB9CiAgICAgICAgbWFwcyBPcHRpb24gaW5zdGFuY2VzIHRvIHRoZSBzbmlwcGV0IG9mIGhlbHAgdGV4dCBleHBsYWluaW5nCiAgICAgICAgdGhlIHN5bnRheCBvZiB0aGF0IG9wdGlvbiwgZS5nLiAiLWgsIC0taGVscCIgb3IKICAgICAgICAiLWZGSUxFLCAtLWZpbGU9RklMRSIKICAgICAgX3Nob3J0X29wdF9mbXQgOiBzdHIKICAgICAgICBmb3JtYXQgc3RyaW5nIGNvbnRyb2xsaW5nIGhvdyBzaG9ydCBvcHRpb25zIHdpdGggdmFsdWVzIGFyZQogICAgICAgIHByaW50ZWQgaW4gaGVscCB0ZXh0LiAgTXVzdCBiZSBlaXRoZXIgIiVzJXMiICgiLWZGSUxFIikgb3IKICAgICAgICAiJXMgJXMiICgiLWYgRklMRSIpLCBiZWNhdXNlIHRob3NlIGFyZSB0aGUgdHdvIHN5bnRheGVzIHRoYXQKICAgICAgICBPcHRpayBzdXBwb3J0cy4KICAgICAgX2xvbmdfb3B0X2ZtdCA6IHN0cgogICAgICAgIHNpbWlsYXIgYnV0IGZvciBsb25nIG9wdGlvbnM7IG11c3QgYmUgZWl0aGVyICIlcyAlcyIgKCItLWZpbGUgRklMRSIpCiAgICAgICAgb3IgIiVzPSVzIiAoIi0tZmlsZT1GSUxFIikuCiAgICAiIiIKCiAgICBOT19ERUZBVUxUX1ZBTFVFID0gIm5vbmUiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsCiAgICAgICAgICAgICAgICAgaW5kZW50X2luY3JlbWVudCwKICAgICAgICAgICAgICAgICBtYXhfaGVscF9wb3NpdGlvbiwKICAgICAgICAgICAgICAgICB3aWR0aCwKICAgICAgICAgICAgICAgICBzaG9ydF9maXJzdCk6CiAgICAgICAgc2VsZi5wYXJzZXIgPSBOb25lCiAgICAgICAgc2VsZi5pbmRlbnRfaW5jcmVtZW50ID0gaW5kZW50X2luY3JlbWVudAogICAgICAgIHNlbGYuaGVscF9wb3NpdGlvbiA9IHNlbGYubWF4X2hlbHBfcG9zaXRpb24gPSBtYXhfaGVscF9wb3NpdGlvbgogICAgICAgIGlmIHdpZHRoIGlzIE5vbmU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHdpZHRoID0gaW50KG9zLmVudmlyb25bJ0NPTFVNTlMnXSkKICAgICAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgVmFsdWVFcnJvcik6CiAgICAgICAgICAgICAgICB3aWR0aCA9IDgwCiAgICAgICAgICAgIHdpZHRoIC09IDIKICAgICAgICBzZWxmLndpZHRoID0gd2lkdGgKICAgICAgICBzZWxmLmN1cnJlbnRfaW5kZW50ID0gMAogICAgICAgIHNlbGYubGV2ZWwgPSAwCiAgICAgICAgc2VsZi5oZWxwX3dpZHRoID0gTm9uZSAgICAgICAgICAjIGNvbXB1dGVkIGxhdGVyCiAgICAgICAgc2VsZi5zaG9ydF9maXJzdCA9IHNob3J0X2ZpcnN0CiAgICAgICAgc2VsZi5kZWZhdWx0X3RhZyA9ICIlZGVmYXVsdCIKICAgICAgICBzZWxmLm9wdGlvbl9zdHJpbmdzID0ge30KICAgICAgICBzZWxmLl9zaG9ydF9vcHRfZm10ID0gIiVzICVzIgogICAgICAgIHNlbGYuX2xvbmdfb3B0X2ZtdCA9ICIlcz0lcyIKCiAgICBkZWYgc2V0X3BhcnNlcihzZWxmLCBwYXJzZXIpOgogICAgICAgIHNlbGYucGFyc2VyID0gcGFyc2VyCgogICAgZGVmIHNldF9zaG9ydF9vcHRfZGVsaW1pdGVyKHNlbGYsIGRlbGltKToKICAgICAgICBpZiBkZWxpbSBub3QgaW4gKCIiLCAiICIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgImludmFsaWQgbWV0YXZhciBkZWxpbWl0ZXIgZm9yIHNob3J0IG9wdGlvbnM6ICVyIiAlIGRlbGltKQogICAgICAgIHNlbGYuX3Nob3J0X29wdF9mbXQgPSAiJXMiICsgZGVsaW0gKyAiJXMiCgogICAgZGVmIHNldF9sb25nX29wdF9kZWxpbWl0ZXIoc2VsZiwgZGVsaW0pOgogICAgICAgIGlmIGRlbGltIG5vdCBpbiAoIj0iLCAiICIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgImludmFsaWQgbWV0YXZhciBkZWxpbWl0ZXIgZm9yIGxvbmcgb3B0aW9uczogJXIiICUgZGVsaW0pCiAgICAgICAgc2VsZi5fbG9uZ19vcHRfZm10ID0gIiVzIiArIGRlbGltICsgIiVzIgoKICAgIGRlZiBpbmRlbnQoc2VsZik6CiAgICAgICAgc2VsZi5jdXJyZW50X2luZGVudCArPSBzZWxmLmluZGVudF9pbmNyZW1lbnQKICAgICAgICBzZWxmLmxldmVsICs9IDEKCiAgICBkZWYgZGVkZW50KHNlbGYpOgogICAgICAgIHNlbGYuY3VycmVudF9pbmRlbnQgLT0gc2VsZi5pbmRlbnRfaW5jcmVtZW50CiAgICAgICAgYXNzZXJ0IHNlbGYuY3VycmVudF9pbmRlbnQgPj0gMCwgIkluZGVudCBkZWNyZWFzZWQgYmVsb3cgMC4iCiAgICAgICAgc2VsZi5sZXZlbCAtPSAxCgogICAgZGVmIGZvcm1hdF91c2FnZShzZWxmLCB1c2FnZSk6CiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigic3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudCIpCgogICAgZGVmIGZvcm1hdF9oZWFkaW5nKHNlbGYsIGhlYWRpbmcpOgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoInN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnQiKQoKICAgIGRlZiBfZm9ybWF0X3RleHQoc2VsZiwgdGV4dCk6CiAgICAgICAgIiIiCiAgICAgICAgRm9ybWF0IGEgcGFyYWdyYXBoIG9mIGZyZWUtZm9ybSB0ZXh0IGZvciBpbmNsdXNpb24gaW4gdGhlCiAgICAgICAgaGVscCBvdXRwdXQgYXQgdGhlIGN1cnJlbnQgaW5kZW50YXRpb24gbGV2ZWwuCiAgICAgICAgIiIiCiAgICAgICAgdGV4dF93aWR0aCA9IHNlbGYud2lkdGggLSBzZWxmLmN1cnJlbnRfaW5kZW50CiAgICAgICAgaW5kZW50ID0gIiAiKnNlbGYuY3VycmVudF9pbmRlbnQKICAgICAgICByZXR1cm4gdGV4dHdyYXAuZmlsbCh0ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRfd2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbF9pbmRlbnQ9aW5kZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNlcXVlbnRfaW5kZW50PWluZGVudCkKCiAgICBkZWYgZm9ybWF0X2Rlc2NyaXB0aW9uKHNlbGYsIGRlc2NyaXB0aW9uKToKICAgICAgICBpZiBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2Zvcm1hdF90ZXh0KGRlc2NyaXB0aW9uKSArICJcbiIKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIiIKCiAgICBkZWYgZm9ybWF0X2VwaWxvZyhzZWxmLCBlcGlsb2cpOgogICAgICAgIGlmIGVwaWxvZzoKICAgICAgICAgICAgcmV0dXJuICJcbiIgKyBzZWxmLl9mb3JtYXRfdGV4dChlcGlsb2cpICsgIlxuIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAiIgoKCiAgICBkZWYgZXhwYW5kX2RlZmF1bHQoc2VsZiwgb3B0aW9uKToKICAgICAgICBpZiBzZWxmLnBhcnNlciBpcyBOb25lIG9yIG5vdCBzZWxmLmRlZmF1bHRfdGFnOgogICAgICAgICAgICByZXR1cm4gb3B0aW9uLmhlbHAKCiAgICAgICAgZGVmYXVsdF92YWx1ZSA9IHNlbGYucGFyc2VyLmRlZmF1bHRzLmdldChvcHRpb24uZGVzdCkKICAgICAgICBpZiBkZWZhdWx0X3ZhbHVlIGlzIE5PX0RFRkFVTFQgb3IgZGVmYXVsdF92YWx1ZSBpcyBOb25lOgogICAgICAgICAgICBkZWZhdWx0X3ZhbHVlID0gc2VsZi5OT19ERUZBVUxUX1ZBTFVFCgogICAgICAgIHJldHVybiBvcHRpb24uaGVscC5yZXBsYWNlKHNlbGYuZGVmYXVsdF90YWcsIHN0cihkZWZhdWx0X3ZhbHVlKSkKCiAgICBkZWYgZm9ybWF0X29wdGlvbihzZWxmLCBvcHRpb24pOgogICAgICAgICMgVGhlIGhlbHAgZm9yIGVhY2ggb3B0aW9uIGNvbnNpc3RzIG9mIHR3byBwYXJ0czoKICAgICAgICAjICAgKiB0aGUgb3B0IHN0cmluZ3MgYW5kIG1ldGF2YXJzCiAgICAgICAgIyAgICAgZWcuICgiLXgiLCBvciAiLWZGSUxFTkFNRSwgLS1maWxlPUZJTEVOQU1FIikKICAgICAgICAjICAgKiB0aGUgdXNlci1zdXBwbGllZCBoZWxwIHN0cmluZwogICAgICAgICMgICAgIGVnLiAoInR1cm4gb24gZXhwZXJ0IG1vZGUiLCAicmVhZCBkYXRhIGZyb20gRklMRU5BTUUiKQogICAgICAgICMKICAgICAgICAjIElmIHBvc3NpYmxlLCB3ZSB3cml0ZSBib3RoIG9mIHRoZXNlIG9uIHRoZSBzYW1lIGxpbmU6CiAgICAgICAgIyAgIC14ICAgICAgdHVybiBvbiBleHBlcnQgbW9kZQogICAgICAgICMKICAgICAgICAjIEJ1dCBpZiB0aGUgb3B0IHN0cmluZyBsaXN0IGlzIHRvbyBsb25nLCB3ZSBwdXQgdGhlIGhlbHAKICAgICAgICAjIHN0cmluZyBvbiBhIHNlY29uZCBsaW5lLCBpbmRlbnRlZCB0byB0aGUgc2FtZSBjb2x1bW4gaXQgd291bGQKICAgICAgICAjIHN0YXJ0IGluIGlmIGl0IGZpdCBvbiB0aGUgZmlyc3QgbGluZS4KICAgICAgICAjICAgLWZGSUxFTkFNRSwgLS1maWxlPUZJTEVOQU1FCiAgICAgICAgIyAgICAgICAgICAgcmVhZCBkYXRhIGZyb20gRklMRU5BTUUKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIG9wdHMgPSBzZWxmLm9wdGlvbl9zdHJpbmdzW29wdGlvbl0KICAgICAgICBvcHRfd2lkdGggPSBzZWxmLmhlbHBfcG9zaXRpb24gLSBzZWxmLmN1cnJlbnRfaW5kZW50IC0gMgogICAgICAgIGlmIGxlbihvcHRzKSA+IG9wdF93aWR0aDoKICAgICAgICAgICAgb3B0cyA9ICIlKnMlc1xuIiAlIChzZWxmLmN1cnJlbnRfaW5kZW50LCAiIiwgb3B0cykKICAgICAgICAgICAgaW5kZW50X2ZpcnN0ID0gc2VsZi5oZWxwX3Bvc2l0aW9uCiAgICAgICAgZWxzZTogICAgICAgICAgICAgICAgICAgICAgICMgc3RhcnQgaGVscCBvbiBzYW1lIGxpbmUgYXMgb3B0cwogICAgICAgICAgICBvcHRzID0gIiUqcyUtKnMgICIgJSAoc2VsZi5jdXJyZW50X2luZGVudCwgIiIsIG9wdF93aWR0aCwgb3B0cykKICAgICAgICAgICAgaW5kZW50X2ZpcnN0ID0gMAogICAgICAgIHJlc3VsdC5hcHBlbmQob3B0cykKICAgICAgICBpZiBvcHRpb24uaGVscDoKICAgICAgICAgICAgaGVscF90ZXh0ID0gc2VsZi5leHBhbmRfZGVmYXVsdChvcHRpb24pCiAgICAgICAgICAgIGhlbHBfbGluZXMgPSB0ZXh0d3JhcC53cmFwKGhlbHBfdGV4dCwgc2VsZi5oZWxwX3dpZHRoKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKCIlKnMlc1xuIiAlIChpbmRlbnRfZmlyc3QsICIiLCBoZWxwX2xpbmVzWzBdKSkKICAgICAgICAgICAgcmVzdWx0LmV4dGVuZChbIiUqcyVzXG4iICUgKHNlbGYuaGVscF9wb3NpdGlvbiwgIiIsIGxpbmUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGhlbHBfbGluZXNbMTpdXSkKICAgICAgICBlbGlmIG9wdHNbLTFdICE9ICJcbiI6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoIlxuIikKICAgICAgICByZXR1cm4gIiIuam9pbihyZXN1bHQpCgogICAgZGVmIHN0b3JlX29wdGlvbl9zdHJpbmdzKHNlbGYsIHBhcnNlcik6CiAgICAgICAgc2VsZi5pbmRlbnQoKQogICAgICAgIG1heF9sZW4gPSAwCiAgICAgICAgZm9yIG9wdCBpbiBwYXJzZXIub3B0aW9uX2xpc3Q6CiAgICAgICAgICAgIHN0cmluZ3MgPSBzZWxmLmZvcm1hdF9vcHRpb25fc3RyaW5ncyhvcHQpCiAgICAgICAgICAgIHNlbGYub3B0aW9uX3N0cmluZ3Nbb3B0XSA9IHN0cmluZ3MKICAgICAgICAgICAgbWF4X2xlbiA9IG1heChtYXhfbGVuLCBsZW4oc3RyaW5ncykgKyBzZWxmLmN1cnJlbnRfaW5kZW50KQogICAgICAgIHNlbGYuaW5kZW50KCkKICAgICAgICBmb3IgZ3JvdXAgaW4gcGFyc2VyLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIGZvciBvcHQgaW4gZ3JvdXAub3B0aW9uX2xpc3Q6CiAgICAgICAgICAgICAgICBzdHJpbmdzID0gc2VsZi5mb3JtYXRfb3B0aW9uX3N0cmluZ3Mob3B0KQogICAgICAgICAgICAgICAgc2VsZi5vcHRpb25fc3RyaW5nc1tvcHRdID0gc3RyaW5ncwogICAgICAgICAgICAgICAgbWF4X2xlbiA9IG1heChtYXhfbGVuLCBsZW4oc3RyaW5ncykgKyBzZWxmLmN1cnJlbnRfaW5kZW50KQogICAgICAgIHNlbGYuZGVkZW50KCkKICAgICAgICBzZWxmLmRlZGVudCgpCiAgICAgICAgc2VsZi5oZWxwX3Bvc2l0aW9uID0gbWluKG1heF9sZW4gKyAyLCBzZWxmLm1heF9oZWxwX3Bvc2l0aW9uKQogICAgICAgIHNlbGYuaGVscF93aWR0aCA9IHNlbGYud2lkdGggLSBzZWxmLmhlbHBfcG9zaXRpb24KCiAgICBkZWYgZm9ybWF0X29wdGlvbl9zdHJpbmdzKHNlbGYsIG9wdGlvbik6CiAgICAgICAgIiIiUmV0dXJuIGEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2Ygb3B0aW9uIHN0cmluZ3MgJiBtZXRhdmFyaWFibGVzLiIiIgogICAgICAgIGlmIG9wdGlvbi50YWtlc192YWx1ZSgpOgogICAgICAgICAgICBtZXRhdmFyID0gb3B0aW9uLm1ldGF2YXIgb3Igb3B0aW9uLmRlc3QudXBwZXIoKQogICAgICAgICAgICBzaG9ydF9vcHRzID0gW3NlbGYuX3Nob3J0X29wdF9mbXQgJSAoc29wdCwgbWV0YXZhcikKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3Igc29wdCBpbiBvcHRpb24uX3Nob3J0X29wdHNdCiAgICAgICAgICAgIGxvbmdfb3B0cyA9IFtzZWxmLl9sb25nX29wdF9mbXQgJSAobG9wdCwgbWV0YXZhcikKICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBsb3B0IGluIG9wdGlvbi5fbG9uZ19vcHRzXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNob3J0X29wdHMgPSBvcHRpb24uX3Nob3J0X29wdHMKICAgICAgICAgICAgbG9uZ19vcHRzID0gb3B0aW9uLl9sb25nX29wdHMKCiAgICAgICAgaWYgc2VsZi5zaG9ydF9maXJzdDoKICAgICAgICAgICAgb3B0cyA9IHNob3J0X29wdHMgKyBsb25nX29wdHMKICAgICAgICBlbHNlOgogICAgICAgICAgICBvcHRzID0gbG9uZ19vcHRzICsgc2hvcnRfb3B0cwoKICAgICAgICByZXR1cm4gIiwgIi5qb2luKG9wdHMpCgpjbGFzcyBJbmRlbnRlZEhlbHBGb3JtYXR0ZXIgKEhlbHBGb3JtYXR0ZXIpOgogICAgIiIiRm9ybWF0IGhlbHAgd2l0aCBpbmRlbnRlZCBzZWN0aW9uIGJvZGllcy4KICAgICIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLAogICAgICAgICAgICAgICAgIGluZGVudF9pbmNyZW1lbnQ9MiwKICAgICAgICAgICAgICAgICBtYXhfaGVscF9wb3NpdGlvbj0yNCwKICAgICAgICAgICAgICAgICB3aWR0aD1Ob25lLAogICAgICAgICAgICAgICAgIHNob3J0X2ZpcnN0PTEpOgogICAgICAgIEhlbHBGb3JtYXR0ZXIuX19pbml0X18oCiAgICAgICAgICAgIHNlbGYsIGluZGVudF9pbmNyZW1lbnQsIG1heF9oZWxwX3Bvc2l0aW9uLCB3aWR0aCwgc2hvcnRfZmlyc3QpCgogICAgZGVmIGZvcm1hdF91c2FnZShzZWxmLCB1c2FnZSk6CiAgICAgICAgcmV0dXJuIF8oIlVzYWdlOiAlc1xuIikgJSB1c2FnZQoKICAgIGRlZiBmb3JtYXRfaGVhZGluZyhzZWxmLCBoZWFkaW5nKToKICAgICAgICByZXR1cm4gIiUqcyVzOlxuIiAlIChzZWxmLmN1cnJlbnRfaW5kZW50LCAiIiwgaGVhZGluZykKCgpjbGFzcyBUaXRsZWRIZWxwRm9ybWF0dGVyIChIZWxwRm9ybWF0dGVyKToKICAgICIiIkZvcm1hdCBoZWxwIHdpdGggdW5kZXJsaW5lZCBzZWN0aW9uIGhlYWRlcnMuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwKICAgICAgICAgICAgICAgICBpbmRlbnRfaW5jcmVtZW50PTAsCiAgICAgICAgICAgICAgICAgbWF4X2hlbHBfcG9zaXRpb249MjQsCiAgICAgICAgICAgICAgICAgd2lkdGg9Tm9uZSwKICAgICAgICAgICAgICAgICBzaG9ydF9maXJzdD0wKToKICAgICAgICBIZWxwRm9ybWF0dGVyLl9faW5pdF9fICgKICAgICAgICAgICAgc2VsZiwgaW5kZW50X2luY3JlbWVudCwgbWF4X2hlbHBfcG9zaXRpb24sIHdpZHRoLCBzaG9ydF9maXJzdCkKCiAgICBkZWYgZm9ybWF0X3VzYWdlKHNlbGYsIHVzYWdlKToKICAgICAgICByZXR1cm4gIiVzICAlc1xuIiAlIChzZWxmLmZvcm1hdF9oZWFkaW5nKF8oIlVzYWdlIikpLCB1c2FnZSkKCiAgICBkZWYgZm9ybWF0X2hlYWRpbmcoc2VsZiwgaGVhZGluZyk6CiAgICAgICAgcmV0dXJuICIlc1xuJXNcbiIgJSAoaGVhZGluZywgIj0tIltzZWxmLmxldmVsXSAqIGxlbihoZWFkaW5nKSkKCgpkZWYgX3BhcnNlX251bSh2YWwsIHR5cGUpOgogICAgaWYgdmFsWzoyXS5sb3dlcigpID09ICIweCI6ICAgICAgICAgIyBoZXhhZGVjaW1hbAogICAgICAgIHJhZGl4ID0gMTYKICAgIGVsaWYgdmFsWzoyXS5sb3dlcigpID09ICIwYiI6ICAgICAgICMgYmluYXJ5CiAgICAgICAgcmFkaXggPSAyCiAgICAgICAgdmFsID0gdmFsWzI6XSBvciAiMCIgICAgICAgICAgICAjIGhhdmUgdG8gcmVtb3ZlICIwYiIgcHJlZml4CiAgICBlbGlmIHZhbFs6MV0gPT0gIjAiOiAgICAgICAgICAgICAgICAjIG9jdGFsCiAgICAgICAgcmFkaXggPSA4CiAgICBlbHNlOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGRlY2ltYWwKICAgICAgICByYWRpeCA9IDEwCgogICAgcmV0dXJuIHR5cGUodmFsLCByYWRpeCkKCmRlZiBfcGFyc2VfaW50KHZhbCk6CiAgICByZXR1cm4gX3BhcnNlX251bSh2YWwsIGludCkKCl9idWlsdGluX2N2dCA9IHsgImludCIgOiAoX3BhcnNlX2ludCwgXygiaW50ZWdlciIpKSwKICAgICAgICAgICAgICAgICAibG9uZyIgOiAoX3BhcnNlX2ludCwgXygiaW50ZWdlciIpKSwKICAgICAgICAgICAgICAgICAiZmxvYXQiIDogKGZsb2F0LCBfKCJmbG9hdGluZy1wb2ludCIpKSwKICAgICAgICAgICAgICAgICAiY29tcGxleCIgOiAoY29tcGxleCwgXygiY29tcGxleCIpKSB9CgpkZWYgY2hlY2tfYnVpbHRpbihvcHRpb24sIG9wdCwgdmFsdWUpOgogICAgKGN2dCwgd2hhdCkgPSBfYnVpbHRpbl9jdnRbb3B0aW9uLnR5cGVdCiAgICB0cnk6CiAgICAgICAgcmV0dXJuIGN2dCh2YWx1ZSkKICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIHJhaXNlIE9wdGlvblZhbHVlRXJyb3IoCiAgICAgICAgICAgIF8oIm9wdGlvbiAlczogaW52YWxpZCAlcyB2YWx1ZTogJXIiKSAlIChvcHQsIHdoYXQsIHZhbHVlKSkKCmRlZiBjaGVja19jaG9pY2Uob3B0aW9uLCBvcHQsIHZhbHVlKToKICAgIGlmIHZhbHVlIGluIG9wdGlvbi5jaG9pY2VzOgogICAgICAgIHJldHVybiB2YWx1ZQogICAgZWxzZToKICAgICAgICBjaG9pY2VzID0gIiwgIi5qb2luKG1hcChyZXByLCBvcHRpb24uY2hvaWNlcykpCiAgICAgICAgcmFpc2UgT3B0aW9uVmFsdWVFcnJvcigKICAgICAgICAgICAgXygib3B0aW9uICVzOiBpbnZhbGlkIGNob2ljZTogJXIgKGNob29zZSBmcm9tICVzKSIpCiAgICAgICAgICAgICUgKG9wdCwgdmFsdWUsIGNob2ljZXMpKQoKIyBOb3Qgc3VwcGx5aW5nIGEgZGVmYXVsdCBpcyBkaWZmZXJlbnQgZnJvbSBhIGRlZmF1bHQgb2YgTm9uZSwKIyBzbyB3ZSBuZWVkIGFuIGV4cGxpY2l0ICJub3Qgc3VwcGxpZWQiIHZhbHVlLgpOT19ERUZBVUxUID0gKCJOTyIsICJERUZBVUxUIikKCgpjbGFzcyBPcHRpb246CiAgICAiIiIKICAgIEluc3RhbmNlIGF0dHJpYnV0ZXM6CiAgICAgIF9zaG9ydF9vcHRzIDogW3N0cmluZ10KICAgICAgX2xvbmdfb3B0cyA6IFtzdHJpbmddCgogICAgICBhY3Rpb24gOiBzdHJpbmcKICAgICAgdHlwZSA6IHN0cmluZwogICAgICBkZXN0IDogc3RyaW5nCiAgICAgIGRlZmF1bHQgOiBhbnkKICAgICAgbmFyZ3MgOiBpbnQKICAgICAgY29uc3QgOiBhbnkKICAgICAgY2hvaWNlcyA6IFtzdHJpbmddCiAgICAgIGNhbGxiYWNrIDogZnVuY3Rpb24KICAgICAgY2FsbGJhY2tfYXJncyA6IChhbnkqKQogICAgICBjYWxsYmFja19rd2FyZ3MgOiB7IHN0cmluZyA6IGFueSB9CiAgICAgIGhlbHAgOiBzdHJpbmcKICAgICAgbWV0YXZhciA6IHN0cmluZwogICAgIiIiCgogICAgIyBUaGUgbGlzdCBvZiBpbnN0YW5jZSBhdHRyaWJ1dGVzIHRoYXQgbWF5IGJlIHNldCB0aHJvdWdoCiAgICAjIGtleXdvcmQgYXJncyB0byB0aGUgY29uc3RydWN0b3IuCiAgICBBVFRSUyA9IFsnYWN0aW9uJywKICAgICAgICAgICAgICd0eXBlJywKICAgICAgICAgICAgICdkZXN0JywKICAgICAgICAgICAgICdkZWZhdWx0JywKICAgICAgICAgICAgICduYXJncycsCiAgICAgICAgICAgICAnY29uc3QnLAogICAgICAgICAgICAgJ2Nob2ljZXMnLAogICAgICAgICAgICAgJ2NhbGxiYWNrJywKICAgICAgICAgICAgICdjYWxsYmFja19hcmdzJywKICAgICAgICAgICAgICdjYWxsYmFja19rd2FyZ3MnLAogICAgICAgICAgICAgJ2hlbHAnLAogICAgICAgICAgICAgJ21ldGF2YXInXQoKICAgICMgVGhlIHNldCBvZiBhY3Rpb25zIGFsbG93ZWQgYnkgb3B0aW9uIHBhcnNlcnMuICBFeHBsaWNpdGx5IGxpc3RlZAogICAgIyBoZXJlIHNvIHRoZSBjb25zdHJ1Y3RvciBjYW4gdmFsaWRhdGUgaXRzIGFyZ3VtZW50cy4KICAgIEFDVElPTlMgPSAoInN0b3JlIiwKICAgICAgICAgICAgICAgInN0b3JlX2NvbnN0IiwKICAgICAgICAgICAgICAgInN0b3JlX3RydWUiLAogICAgICAgICAgICAgICAic3RvcmVfZmFsc2UiLAogICAgICAgICAgICAgICAiYXBwZW5kIiwKICAgICAgICAgICAgICAgImFwcGVuZF9jb25zdCIsCiAgICAgICAgICAgICAgICJjb3VudCIsCiAgICAgICAgICAgICAgICJjYWxsYmFjayIsCiAgICAgICAgICAgICAgICJoZWxwIiwKICAgICAgICAgICAgICAgInZlcnNpb24iKQoKICAgICMgVGhlIHNldCBvZiBhY3Rpb25zIHRoYXQgaW52b2x2ZSBzdG9yaW5nIGEgdmFsdWUgc29tZXdoZXJlOwogICAgIyBhbHNvIGxpc3RlZCBqdXN0IGZvciBjb25zdHJ1Y3RvciBhcmd1bWVudCB2YWxpZGF0aW9uLiAgKElmCiAgICAjIHRoZSBhY3Rpb24gaXMgb25lIG9mIHRoZXNlLCB0aGVyZSBtdXN0IGJlIGEgZGVzdGluYXRpb24uKQogICAgU1RPUkVfQUNUSU9OUyA9ICgic3RvcmUiLAogICAgICAgICAgICAgICAgICAgICAic3RvcmVfY29uc3QiLAogICAgICAgICAgICAgICAgICAgICAic3RvcmVfdHJ1ZSIsCiAgICAgICAgICAgICAgICAgICAgICJzdG9yZV9mYWxzZSIsCiAgICAgICAgICAgICAgICAgICAgICJhcHBlbmQiLAogICAgICAgICAgICAgICAgICAgICAiYXBwZW5kX2NvbnN0IiwKICAgICAgICAgICAgICAgICAgICAgImNvdW50IikKCiAgICAjIFRoZSBzZXQgb2YgYWN0aW9ucyBmb3Igd2hpY2ggaXQgbWFrZXMgc2Vuc2UgdG8gc3VwcGx5IGEgdmFsdWUKICAgICMgdHlwZSwgaWUuIHdoaWNoIG1heSBjb25zdW1lIGFuIGFyZ3VtZW50IGZyb20gdGhlIGNvbW1hbmQgbGluZS4KICAgIFRZUEVEX0FDVElPTlMgPSAoInN0b3JlIiwKICAgICAgICAgICAgICAgICAgICAgImFwcGVuZCIsCiAgICAgICAgICAgICAgICAgICAgICJjYWxsYmFjayIpCgogICAgIyBUaGUgc2V0IG9mIGFjdGlvbnMgd2hpY2ggKnJlcXVpcmUqIGEgdmFsdWUgdHlwZSwgaWUuIHRoYXQKICAgICMgYWx3YXlzIGNvbnN1bWUgYW4gYXJndW1lbnQgZnJvbSB0aGUgY29tbWFuZCBsaW5lLgogICAgQUxXQVlTX1RZUEVEX0FDVElPTlMgPSAoInN0b3JlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcHBlbmQiKQoKICAgICMgVGhlIHNldCBvZiBhY3Rpb25zIHdoaWNoIHRha2UgYSAnY29uc3QnIGF0dHJpYnV0ZS4KICAgIENPTlNUX0FDVElPTlMgPSAoInN0b3JlX2NvbnN0IiwKICAgICAgICAgICAgICAgICAgICAgImFwcGVuZF9jb25zdCIpCgogICAgIyBUaGUgc2V0IG9mIGtub3duIHR5cGVzIGZvciBvcHRpb24gcGFyc2Vycy4gIEFnYWluLCBsaXN0ZWQgaGVyZSBmb3IKICAgICMgY29uc3RydWN0b3IgYXJndW1lbnQgdmFsaWRhdGlvbi4KICAgIFRZUEVTID0gKCJzdHJpbmciLCAiaW50IiwgImxvbmciLCAiZmxvYXQiLCAiY29tcGxleCIsICJjaG9pY2UiKQoKICAgICMgRGljdGlvbmFyeSBvZiBhcmd1bWVudCBjaGVja2luZyBmdW5jdGlvbnMsIHdoaWNoIGNvbnZlcnQgYW5kCiAgICAjIHZhbGlkYXRlIG9wdGlvbiBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZSBvcHRpb24gdHlwZS4KICAgICMKICAgICMgU2lnbmF0dXJlIG9mIGNoZWNraW5nIGZ1bmN0aW9ucyBpczoKICAgICMgICBjaGVjayhvcHRpb24gOiBPcHRpb24sIG9wdCA6IHN0cmluZywgdmFsdWUgOiBzdHJpbmcpIC0+IGFueQogICAgIyB3aGVyZQogICAgIyAgIG9wdGlvbiBpcyB0aGUgT3B0aW9uIGluc3RhbmNlIGNhbGxpbmcgdGhlIGNoZWNrZXIKICAgICMgICBvcHQgaXMgdGhlIGFjdHVhbCBvcHRpb24gc2VlbiBvbiB0aGUgY29tbWFuZC1saW5lCiAgICAjICAgICAoZWcuICItYSIsICItLWZpbGUiKQogICAgIyAgIHZhbHVlIGlzIHRoZSBvcHRpb24gYXJndW1lbnQgc2VlbiBvbiB0aGUgY29tbWFuZC1saW5lCiAgICAjCiAgICAjIFRoZSByZXR1cm4gdmFsdWUgc2hvdWxkIGJlIGluIHRoZSBhcHByb3ByaWF0ZSBQeXRob24gdHlwZQogICAgIyBmb3Igb3B0aW9uLnR5cGUgLS0gZWcuIGFuIGludGVnZXIgaWYgb3B0aW9uLnR5cGUgPT0gImludCIuCiAgICAjCiAgICAjIElmIG5vIGNoZWNrZXIgaXMgZGVmaW5lZCBmb3IgYSB0eXBlLCBhcmd1bWVudHMgd2lsbCBiZQogICAgIyB1bmNoZWNrZWQgYW5kIHJlbWFpbiBzdHJpbmdzLgogICAgVFlQRV9DSEVDS0VSID0geyAiaW50IiAgICA6IGNoZWNrX2J1aWx0aW4sCiAgICAgICAgICAgICAgICAgICAgICJsb25nIiAgIDogY2hlY2tfYnVpbHRpbiwKICAgICAgICAgICAgICAgICAgICAgImZsb2F0IiAgOiBjaGVja19idWlsdGluLAogICAgICAgICAgICAgICAgICAgICAiY29tcGxleCI6IGNoZWNrX2J1aWx0aW4sCiAgICAgICAgICAgICAgICAgICAgICJjaG9pY2UiIDogY2hlY2tfY2hvaWNlLAogICAgICAgICAgICAgICAgICAgfQoKCiAgICAjIENIRUNLX01FVEhPRFMgaXMgYSBsaXN0IG9mIHVuYm91bmQgbWV0aG9kIG9iamVjdHM7IHRoZXkgYXJlIGNhbGxlZAogICAgIyBieSB0aGUgY29uc3RydWN0b3IsIGluIG9yZGVyLCBhZnRlciBhbGwgYXR0cmlidXRlcyBhcmUKICAgICMgaW5pdGlhbGl6ZWQuICBUaGUgbGlzdCBpcyBjcmVhdGVkIGFuZCBmaWxsZWQgaW4gbGF0ZXIsIGFmdGVyIGFsbAogICAgIyB0aGUgbWV0aG9kcyBhcmUgYWN0dWFsbHkgZGVmaW5lZC4gIChJIGp1c3QgcHV0IGl0IGhlcmUgYmVjYXVzZSBJCiAgICAjIGxpa2UgdG8gZGVmaW5lIGFuZCBkb2N1bWVudCBhbGwgY2xhc3MgYXR0cmlidXRlcyBpbiB0aGUgc2FtZQogICAgIyBwbGFjZS4pICBTdWJjbGFzc2VzIHRoYXQgYWRkIGFub3RoZXIgX2NoZWNrXyooKSBtZXRob2Qgc2hvdWxkCiAgICAjIGRlZmluZSB0aGVpciBvd24gQ0hFQ0tfTUVUSE9EUyBsaXN0IHRoYXQgYWRkcyB0aGVpciBjaGVjayBtZXRob2QKICAgICMgdG8gdGhvc2UgZnJvbSB0aGlzIGNsYXNzLgogICAgQ0hFQ0tfTUVUSE9EUyA9IE5vbmUKCgogICAgIyAtLSBDb25zdHJ1Y3Rvci9pbml0aWFsaXphdGlvbiBtZXRob2RzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX19pbml0X18oc2VsZiwgKm9wdHMsICoqYXR0cnMpOgogICAgICAgICMgU2V0IF9zaG9ydF9vcHRzLCBfbG9uZ19vcHRzIGF0dHJzIGZyb20gJ29wdHMnIHR1cGxlLgogICAgICAgICMgSGF2ZSB0byBiZSBzZXQgbm93LCBpbiBjYXNlIG5vIG9wdGlvbiBzdHJpbmdzIGFyZSBzdXBwbGllZC4KICAgICAgICBzZWxmLl9zaG9ydF9vcHRzID0gW10KICAgICAgICBzZWxmLl9sb25nX29wdHMgPSBbXQogICAgICAgIG9wdHMgPSBzZWxmLl9jaGVja19vcHRfc3RyaW5ncyhvcHRzKQogICAgICAgIHNlbGYuX3NldF9vcHRfc3RyaW5ncyhvcHRzKQoKICAgICAgICAjIFNldCBhbGwgb3RoZXIgYXR0cnMgKGFjdGlvbiwgdHlwZSwgZXRjLikgZnJvbSAnYXR0cnMnIGRpY3QKICAgICAgICBzZWxmLl9zZXRfYXR0cnMoYXR0cnMpCgogICAgICAgICMgQ2hlY2sgYWxsIHRoZSBhdHRyaWJ1dGVzIHdlIGp1c3Qgc2V0LiAgVGhlcmUgYXJlIGxvdHMgb2YKICAgICAgICAjIGNvbXBsaWNhdGVkIGludGVyZGVwZW5kZW5jaWVzLCBidXQgbHVja2lseSB0aGV5IGNhbiBiZSBmYXJtZWQKICAgICAgICAjIG91dCB0byB0aGUgX2NoZWNrXyooKSBtZXRob2RzIGxpc3RlZCBpbiBDSEVDS19NRVRIT0RTIC0tIHdoaWNoCiAgICAgICAgIyBjb3VsZCBiZSBoYW5keSBmb3Igc3ViY2xhc3NlcyEgIFRoZSBvbmUgdGhpbmcgdGhlc2UgYWxsIHNoYXJlCiAgICAgICAgIyBpcyB0aGF0IHRoZXkgcmFpc2UgT3B0aW9uRXJyb3IgaWYgdGhleSBkaXNjb3ZlciBhIHByb2JsZW0uCiAgICAgICAgZm9yIGNoZWNrZXIgaW4gc2VsZi5DSEVDS19NRVRIT0RTOgogICAgICAgICAgICBjaGVja2VyKHNlbGYpCgogICAgZGVmIF9jaGVja19vcHRfc3RyaW5ncyhzZWxmLCBvcHRzKToKICAgICAgICAjIEZpbHRlciBvdXQgTm9uZSBiZWNhdXNlIGVhcmx5IHZlcnNpb25zIG9mIE9wdGlrIGhhZCBleGFjdGx5CiAgICAgICAgIyBvbmUgc2hvcnQgb3B0aW9uIGFuZCBvbmUgbG9uZyBvcHRpb24sIGVpdGhlciBvZiB3aGljaAogICAgICAgICMgY291bGQgYmUgTm9uZS4KICAgICAgICBvcHRzID0gW29wdCBmb3Igb3B0IGluIG9wdHMgaWYgb3B0XQogICAgICAgIGlmIG5vdCBvcHRzOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImF0IGxlYXN0IG9uZSBvcHRpb24gc3RyaW5nIG11c3QgYmUgc3VwcGxpZWQiKQogICAgICAgIHJldHVybiBvcHRzCgogICAgZGVmIF9zZXRfb3B0X3N0cmluZ3Moc2VsZiwgb3B0cyk6CiAgICAgICAgZm9yIG9wdCBpbiBvcHRzOgogICAgICAgICAgICBpZiBsZW4ob3B0KSA8IDI6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAiaW52YWxpZCBvcHRpb24gc3RyaW5nICVyOiAiCiAgICAgICAgICAgICAgICAgICAgIm11c3QgYmUgYXQgbGVhc3QgdHdvIGNoYXJhY3RlcnMgbG9uZyIgJSBvcHQsIHNlbGYpCiAgICAgICAgICAgIGVsaWYgbGVuKG9wdCkgPT0gMjoKICAgICAgICAgICAgICAgIGlmIG5vdCAob3B0WzBdID09ICItIiBhbmQgb3B0WzFdICE9ICItIik6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICJpbnZhbGlkIHNob3J0IG9wdGlvbiBzdHJpbmcgJXI6ICIKICAgICAgICAgICAgICAgICAgICAgICAgIm11c3QgYmUgb2YgdGhlIGZvcm0gLXgsICh4IGFueSBub24tZGFzaCBjaGFyKSIgJSBvcHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYpCiAgICAgICAgICAgICAgICBzZWxmLl9zaG9ydF9vcHRzLmFwcGVuZChvcHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBub3QgKG9wdFswOjJdID09ICItLSIgYW5kIG9wdFsyXSAhPSAiLSIpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAiaW52YWxpZCBsb25nIG9wdGlvbiBzdHJpbmcgJXI6ICIKICAgICAgICAgICAgICAgICAgICAgICAgIm11c3Qgc3RhcnQgd2l0aCAtLSwgZm9sbG93ZWQgYnkgbm9uLWRhc2giICUgb3B0LAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmKQogICAgICAgICAgICAgICAgc2VsZi5fbG9uZ19vcHRzLmFwcGVuZChvcHQpCgogICAgZGVmIF9zZXRfYXR0cnMoc2VsZiwgYXR0cnMpOgogICAgICAgIGZvciBhdHRyIGluIHNlbGYuQVRUUlM6CiAgICAgICAgICAgIGlmIGF0dHIgaW4gYXR0cnM6CiAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIGF0dHJzW2F0dHJdKQogICAgICAgICAgICAgICAgZGVsIGF0dHJzW2F0dHJdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBhdHRyID09ICdkZWZhdWx0JzoKICAgICAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIE5PX0RFRkFVTFQpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNldGF0dHIoc2VsZiwgYXR0ciwgTm9uZSkKICAgICAgICBpZiBhdHRyczoKICAgICAgICAgICAgYXR0cnMgPSBzb3J0ZWQoYXR0cnMua2V5cygpKQogICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICJpbnZhbGlkIGtleXdvcmQgYXJndW1lbnRzOiAlcyIgJSAiLCAiLmpvaW4oYXR0cnMpLAogICAgICAgICAgICAgICAgc2VsZikKCgogICAgIyAtLSBDb25zdHJ1Y3RvciB2YWxpZGF0aW9uIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX2NoZWNrX2FjdGlvbihzZWxmKToKICAgICAgICBpZiBzZWxmLmFjdGlvbiBpcyBOb25lOgogICAgICAgICAgICBzZWxmLmFjdGlvbiA9ICJzdG9yZSIKICAgICAgICBlbGlmIHNlbGYuYWN0aW9uIG5vdCBpbiBzZWxmLkFDVElPTlM6CiAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKCJpbnZhbGlkIGFjdGlvbjogJXIiICUgc2VsZi5hY3Rpb24sIHNlbGYpCgogICAgZGVmIF9jaGVja190eXBlKHNlbGYpOgogICAgICAgIGlmIHNlbGYudHlwZSBpcyBOb25lOgogICAgICAgICAgICBpZiBzZWxmLmFjdGlvbiBpbiBzZWxmLkFMV0FZU19UWVBFRF9BQ1RJT05TOgogICAgICAgICAgICAgICAgaWYgc2VsZi5jaG9pY2VzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICMgVGhlICJjaG9pY2VzIiBhdHRyaWJ1dGUgaW1wbGllcyAiY2hvaWNlIiB0eXBlLgogICAgICAgICAgICAgICAgICAgIHNlbGYudHlwZSA9ICJjaG9pY2UiCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgTm8gdHlwZSBnaXZlbj8gICJzdHJpbmciIGlzIHRoZSBtb3N0IHNlbnNpYmxlIGRlZmF1bHQuCiAgICAgICAgICAgICAgICAgICAgc2VsZi50eXBlID0gInN0cmluZyIKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIEFsbG93IHR5cGUgb2JqZWN0cyBvciBidWlsdGluIHR5cGUgY29udmVyc2lvbiBmdW5jdGlvbnMKICAgICAgICAgICAgIyAoaW50LCBzdHIsIGV0Yy4pIGFzIGFuIGFsdGVybmF0aXZlIHRvIHRoZWlyIG5hbWVzLiAgKFRoZQogICAgICAgICAgICAjIGNvbXBsaWNhdGVkIGNoZWNrIG9mIGJ1aWx0aW5zIGlzIG9ubHkgbmVjZXNzYXJ5IGZvcgogICAgICAgICAgICAjIFB5dGhvbiAyLjEgYW5kIGVhcmxpZXIsIGFuZCBpcyBzaG9ydC1jaXJjdWl0ZWQgYnkgdGhlCiAgICAgICAgICAgICMgZmlyc3QgY2hlY2sgb24gbW9kZXJuIFB5dGhvbnMuKQogICAgICAgICAgICBpbXBvcnQgYnVpbHRpbnMKICAgICAgICAgICAgaWYgKCBpc2luc3RhbmNlKHNlbGYudHlwZSwgdHlwZSkgb3IKICAgICAgICAgICAgICAgICAoaGFzYXR0cihzZWxmLnR5cGUsICJfX25hbWVfXyIpIGFuZAogICAgICAgICAgICAgICAgICBnZXRhdHRyKGJ1aWx0aW5zLCBzZWxmLnR5cGUuX19uYW1lX18sIE5vbmUpIGlzIHNlbGYudHlwZSkgKToKICAgICAgICAgICAgICAgIHNlbGYudHlwZSA9IHNlbGYudHlwZS5fX25hbWVfXwoKICAgICAgICAgICAgaWYgc2VsZi50eXBlID09ICJzdHIiOgogICAgICAgICAgICAgICAgc2VsZi50eXBlID0gInN0cmluZyIKCiAgICAgICAgICAgIGlmIHNlbGYudHlwZSBub3QgaW4gc2VsZi5UWVBFUzoKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKCJpbnZhbGlkIG9wdGlvbiB0eXBlOiAlciIgJSBzZWxmLnR5cGUsIHNlbGYpCiAgICAgICAgICAgIGlmIHNlbGYuYWN0aW9uIG5vdCBpbiBzZWxmLlRZUEVEX0FDVElPTlM6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAibXVzdCBub3Qgc3VwcGx5IGEgdHlwZSBmb3IgYWN0aW9uICVyIiAlIHNlbGYuYWN0aW9uLCBzZWxmKQoKICAgIGRlZiBfY2hlY2tfY2hvaWNlKHNlbGYpOgogICAgICAgIGlmIHNlbGYudHlwZSA9PSAiY2hvaWNlIjoKICAgICAgICAgICAgaWYgc2VsZi5jaG9pY2VzIGlzIE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAibXVzdCBzdXBwbHkgYSBsaXN0IG9mIGNob2ljZXMgZm9yIHR5cGUgJ2Nob2ljZSciLCBzZWxmKQogICAgICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKHNlbGYuY2hvaWNlcywgKHR1cGxlLCBsaXN0KSk6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAiY2hvaWNlcyBtdXN0IGJlIGEgbGlzdCBvZiBzdHJpbmdzICgnJXMnIHN1cHBsaWVkKSIKICAgICAgICAgICAgICAgICAgICAlIHN0cih0eXBlKHNlbGYuY2hvaWNlcykpLnNwbGl0KCInIilbMV0sIHNlbGYpCiAgICAgICAgZWxpZiBzZWxmLmNob2ljZXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgIm11c3Qgbm90IHN1cHBseSBjaG9pY2VzIGZvciB0eXBlICVyIiAlIHNlbGYudHlwZSwgc2VsZikKCiAgICBkZWYgX2NoZWNrX2Rlc3Qoc2VsZik6CiAgICAgICAgIyBObyBkZXN0aW5hdGlvbiBnaXZlbiwgYW5kIHdlIG5lZWQgb25lIGZvciB0aGlzIGFjdGlvbi4gIFRoZQogICAgICAgICMgc2VsZi50eXBlIGNoZWNrIGlzIGZvciBjYWxsYmFja3MgdGhhdCB0YWtlIGEgdmFsdWUuCiAgICAgICAgdGFrZXNfdmFsdWUgPSAoc2VsZi5hY3Rpb24gaW4gc2VsZi5TVE9SRV9BQ1RJT05TIG9yCiAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50eXBlIGlzIG5vdCBOb25lKQogICAgICAgIGlmIHNlbGYuZGVzdCBpcyBOb25lIGFuZCB0YWtlc192YWx1ZToKCiAgICAgICAgICAgICMgR2xlYW4gYSBkZXN0aW5hdGlvbiBmcm9tIHRoZSBmaXJzdCBsb25nIG9wdGlvbiBzdHJpbmcsCiAgICAgICAgICAgICMgb3IgZnJvbSB0aGUgZmlyc3Qgc2hvcnQgb3B0aW9uIHN0cmluZyBpZiBubyBsb25nIG9wdGlvbnMuCiAgICAgICAgICAgIGlmIHNlbGYuX2xvbmdfb3B0czoKICAgICAgICAgICAgICAgICMgZWcuICItLWZvby1iYXIiIC0+ICJmb29fYmFyIgogICAgICAgICAgICAgICAgc2VsZi5kZXN0ID0gc2VsZi5fbG9uZ19vcHRzWzBdWzI6XS5yZXBsYWNlKCctJywgJ18nKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5kZXN0ID0gc2VsZi5fc2hvcnRfb3B0c1swXVsxXQoKICAgIGRlZiBfY2hlY2tfY29uc3Qoc2VsZik6CiAgICAgICAgaWYgc2VsZi5hY3Rpb24gbm90IGluIHNlbGYuQ09OU1RfQUNUSU9OUyBhbmQgc2VsZi5jb25zdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAiJ2NvbnN0JyBtdXN0IG5vdCBiZSBzdXBwbGllZCBmb3IgYWN0aW9uICVyIiAlIHNlbGYuYWN0aW9uLAogICAgICAgICAgICAgICAgc2VsZikKCiAgICBkZWYgX2NoZWNrX25hcmdzKHNlbGYpOgogICAgICAgIGlmIHNlbGYuYWN0aW9uIGluIHNlbGYuVFlQRURfQUNUSU9OUzoKICAgICAgICAgICAgaWYgc2VsZi5uYXJncyBpcyBOb25lOgogICAgICAgICAgICAgICAgc2VsZi5uYXJncyA9IDEKICAgICAgICBlbGlmIHNlbGYubmFyZ3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgIiduYXJncycgbXVzdCBub3QgYmUgc3VwcGxpZWQgZm9yIGFjdGlvbiAlciIgJSBzZWxmLmFjdGlvbiwKICAgICAgICAgICAgICAgIHNlbGYpCgogICAgZGVmIF9jaGVja19jYWxsYmFjayhzZWxmKToKICAgICAgICBpZiBzZWxmLmFjdGlvbiA9PSAiY2FsbGJhY2siOgogICAgICAgICAgICBpZiBub3QgY2FsbGFibGUoc2VsZi5jYWxsYmFjayk6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAiY2FsbGJhY2sgbm90IGNhbGxhYmxlOiAlciIgJSBzZWxmLmNhbGxiYWNrLCBzZWxmKQogICAgICAgICAgICBpZiAoc2VsZi5jYWxsYmFja19hcmdzIGlzIG5vdCBOb25lIGFuZAogICAgICAgICAgICAgICAgbm90IGlzaW5zdGFuY2Uoc2VsZi5jYWxsYmFja19hcmdzLCB0dXBsZSkpOgogICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgImNhbGxiYWNrX2FyZ3MsIGlmIHN1cHBsaWVkLCBtdXN0IGJlIGEgdHVwbGU6IG5vdCAlciIKICAgICAgICAgICAgICAgICAgICAlIHNlbGYuY2FsbGJhY2tfYXJncywgc2VsZikKICAgICAgICAgICAgaWYgKHNlbGYuY2FsbGJhY2tfa3dhcmdzIGlzIG5vdCBOb25lIGFuZAogICAgICAgICAgICAgICAgbm90IGlzaW5zdGFuY2Uoc2VsZi5jYWxsYmFja19rd2FyZ3MsIGRpY3QpKToKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICJjYWxsYmFja19rd2FyZ3MsIGlmIHN1cHBsaWVkLCBtdXN0IGJlIGEgZGljdDogbm90ICVyIgogICAgICAgICAgICAgICAgICAgICUgc2VsZi5jYWxsYmFja19rd2FyZ3MsIHNlbGYpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgc2VsZi5jYWxsYmFjayBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICJjYWxsYmFjayBzdXBwbGllZCAoJXIpIGZvciBub24tY2FsbGJhY2sgb3B0aW9uIgogICAgICAgICAgICAgICAgICAgICUgc2VsZi5jYWxsYmFjaywgc2VsZikKICAgICAgICAgICAgaWYgc2VsZi5jYWxsYmFja19hcmdzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgImNhbGxiYWNrX2FyZ3Mgc3VwcGxpZWQgZm9yIG5vbi1jYWxsYmFjayBvcHRpb24iLCBzZWxmKQogICAgICAgICAgICBpZiBzZWxmLmNhbGxiYWNrX2t3YXJncyBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICJjYWxsYmFja19rd2FyZ3Mgc3VwcGxpZWQgZm9yIG5vbi1jYWxsYmFjayBvcHRpb24iLCBzZWxmKQoKCiAgICBDSEVDS19NRVRIT0RTID0gW19jaGVja19hY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgIF9jaGVja190eXBlLAogICAgICAgICAgICAgICAgICAgICBfY2hlY2tfY2hvaWNlLAogICAgICAgICAgICAgICAgICAgICBfY2hlY2tfZGVzdCwKICAgICAgICAgICAgICAgICAgICAgX2NoZWNrX2NvbnN0LAogICAgICAgICAgICAgICAgICAgICBfY2hlY2tfbmFyZ3MsCiAgICAgICAgICAgICAgICAgICAgIF9jaGVja19jYWxsYmFja10KCgogICAgIyAtLSBNaXNjZWxsYW5lb3VzIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIi8iLmpvaW4oc2VsZi5fc2hvcnRfb3B0cyArIHNlbGYuX2xvbmdfb3B0cykKCiAgICBfX3JlcHJfXyA9IF9yZXByCgogICAgZGVmIHRha2VzX3ZhbHVlKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnR5cGUgaXMgbm90IE5vbmUKCiAgICBkZWYgZ2V0X29wdF9zdHJpbmcoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fbG9uZ19vcHRzOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fbG9uZ19vcHRzWzBdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Nob3J0X29wdHNbMF0KCgogICAgIyAtLSBQcm9jZXNzaW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgY2hlY2tfdmFsdWUoc2VsZiwgb3B0LCB2YWx1ZSk6CiAgICAgICAgY2hlY2tlciA9IHNlbGYuVFlQRV9DSEVDS0VSLmdldChzZWxmLnR5cGUpCiAgICAgICAgaWYgY2hlY2tlciBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gdmFsdWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gY2hlY2tlcihzZWxmLCBvcHQsIHZhbHVlKQoKICAgIGRlZiBjb252ZXJ0X3ZhbHVlKHNlbGYsIG9wdCwgdmFsdWUpOgogICAgICAgIGlmIHZhbHVlIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBzZWxmLm5hcmdzID09IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5jaGVja192YWx1ZShvcHQsIHZhbHVlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIHR1cGxlKFtzZWxmLmNoZWNrX3ZhbHVlKG9wdCwgdikgZm9yIHYgaW4gdmFsdWVdKQoKICAgIGRlZiBwcm9jZXNzKHNlbGYsIG9wdCwgdmFsdWUsIHZhbHVlcywgcGFyc2VyKToKCiAgICAgICAgIyBGaXJzdCwgY29udmVydCB0aGUgdmFsdWUocykgdG8gdGhlIHJpZ2h0IHR5cGUuICBIb3dsIGlmIGFueQogICAgICAgICMgdmFsdWUocykgYXJlIGJvZ3VzLgogICAgICAgIHZhbHVlID0gc2VsZi5jb252ZXJ0X3ZhbHVlKG9wdCwgdmFsdWUpCgogICAgICAgICMgQW5kIHRoZW4gdGFrZSB3aGF0ZXZlciBhY3Rpb24gaXMgZXhwZWN0ZWQgb2YgdXMuCiAgICAgICAgIyBUaGlzIGlzIGEgc2VwYXJhdGUgbWV0aG9kIHRvIG1ha2UgbGlmZSBlYXNpZXIgZm9yCiAgICAgICAgIyBzdWJjbGFzc2VzIHRvIGFkZCBuZXcgYWN0aW9ucy4KICAgICAgICByZXR1cm4gc2VsZi50YWtlX2FjdGlvbigKICAgICAgICAgICAgc2VsZi5hY3Rpb24sIHNlbGYuZGVzdCwgb3B0LCB2YWx1ZSwgdmFsdWVzLCBwYXJzZXIpCgogICAgZGVmIHRha2VfYWN0aW9uKHNlbGYsIGFjdGlvbiwgZGVzdCwgb3B0LCB2YWx1ZSwgdmFsdWVzLCBwYXJzZXIpOgogICAgICAgIGlmIGFjdGlvbiA9PSAic3RvcmUiOgogICAgICAgICAgICBzZXRhdHRyKHZhbHVlcywgZGVzdCwgdmFsdWUpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gInN0b3JlX2NvbnN0IjoKICAgICAgICAgICAgc2V0YXR0cih2YWx1ZXMsIGRlc3QsIHNlbGYuY29uc3QpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gInN0b3JlX3RydWUiOgogICAgICAgICAgICBzZXRhdHRyKHZhbHVlcywgZGVzdCwgVHJ1ZSkKICAgICAgICBlbGlmIGFjdGlvbiA9PSAic3RvcmVfZmFsc2UiOgogICAgICAgICAgICBzZXRhdHRyKHZhbHVlcywgZGVzdCwgRmFsc2UpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gImFwcGVuZCI6CiAgICAgICAgICAgIHZhbHVlcy5lbnN1cmVfdmFsdWUoZGVzdCwgW10pLmFwcGVuZCh2YWx1ZSkKICAgICAgICBlbGlmIGFjdGlvbiA9PSAiYXBwZW5kX2NvbnN0IjoKICAgICAgICAgICAgdmFsdWVzLmVuc3VyZV92YWx1ZShkZXN0LCBbXSkuYXBwZW5kKHNlbGYuY29uc3QpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gImNvdW50IjoKICAgICAgICAgICAgc2V0YXR0cih2YWx1ZXMsIGRlc3QsIHZhbHVlcy5lbnN1cmVfdmFsdWUoZGVzdCwgMCkgKyAxKQogICAgICAgIGVsaWYgYWN0aW9uID09ICJjYWxsYmFjayI6CiAgICAgICAgICAgIGFyZ3MgPSBzZWxmLmNhbGxiYWNrX2FyZ3Mgb3IgKCkKICAgICAgICAgICAga3dhcmdzID0gc2VsZi5jYWxsYmFja19rd2FyZ3Mgb3Ige30KICAgICAgICAgICAgc2VsZi5jYWxsYmFjayhzZWxmLCBvcHQsIHZhbHVlLCBwYXJzZXIsICphcmdzLCAqKmt3YXJncykKICAgICAgICBlbGlmIGFjdGlvbiA9PSAiaGVscCI6CiAgICAgICAgICAgIHBhcnNlci5wcmludF9oZWxwKCkKICAgICAgICAgICAgcGFyc2VyLmV4aXQoKQogICAgICAgIGVsaWYgYWN0aW9uID09ICJ2ZXJzaW9uIjoKICAgICAgICAgICAgcGFyc2VyLnByaW50X3ZlcnNpb24oKQogICAgICAgICAgICBwYXJzZXIuZXhpdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidW5rbm93biBhY3Rpb24gJXIiICUgc2VsZi5hY3Rpb24pCgogICAgICAgIHJldHVybiAxCgojIGNsYXNzIE9wdGlvbgoKClNVUFBSRVNTX0hFTFAgPSAiU1VQUFJFU1MiKyJIRUxQIgpTVVBQUkVTU19VU0FHRSA9ICJTVVBQUkVTUyIrIlVTQUdFIgoKY2xhc3MgVmFsdWVzOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkZWZhdWx0cz1Ob25lKToKICAgICAgICBpZiBkZWZhdWx0czoKICAgICAgICAgICAgZm9yIChhdHRyLCB2YWwpIGluIGRlZmF1bHRzLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIHZhbCkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc3RyKHNlbGYuX19kaWN0X18pCgogICAgX19yZXByX18gPSBfcmVwcgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIFZhbHVlcyk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9fZGljdF9fID09IG90aGVyLl9fZGljdF9fCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKG90aGVyLCBkaWN0KToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19kaWN0X18gPT0gb3RoZXIKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX3VwZGF0ZV9jYXJlZnVsKHNlbGYsIGRpY3QpOgogICAgICAgICIiIgogICAgICAgIFVwZGF0ZSB0aGUgb3B0aW9uIHZhbHVlcyBmcm9tIGFuIGFyYml0cmFyeSBkaWN0aW9uYXJ5LCBidXQgb25seQogICAgICAgIHVzZSBrZXlzIGZyb20gZGljdCB0aGF0IGFscmVhZHkgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlCiAgICAgICAgaW4gc2VsZi4gIEFueSBrZXlzIGluIGRpY3Qgd2l0aG91dCBhIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlCiAgICAgICAgYXJlIHNpbGVudGx5IGlnbm9yZWQuCiAgICAgICAgIiIiCiAgICAgICAgZm9yIGF0dHIgaW4gZGlyKHNlbGYpOgogICAgICAgICAgICBpZiBhdHRyIGluIGRpY3Q6CiAgICAgICAgICAgICAgICBkdmFsID0gZGljdFthdHRyXQogICAgICAgICAgICAgICAgaWYgZHZhbCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIGR2YWwpCgogICAgZGVmIF91cGRhdGVfbG9vc2Uoc2VsZiwgZGljdCk6CiAgICAgICAgIiIiCiAgICAgICAgVXBkYXRlIHRoZSBvcHRpb24gdmFsdWVzIGZyb20gYW4gYXJiaXRyYXJ5IGRpY3Rpb25hcnksCiAgICAgICAgdXNpbmcgYWxsIGtleXMgZnJvbSB0aGUgZGljdGlvbmFyeSByZWdhcmRsZXNzIG9mIHdoZXRoZXIKICAgICAgICB0aGV5IGhhdmUgYSBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZSBpbiBzZWxmIG9yIG5vdC4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9fZGljdF9fLnVwZGF0ZShkaWN0KQoKICAgIGRlZiBfdXBkYXRlKHNlbGYsIGRpY3QsIG1vZGUpOgogICAgICAgIGlmIG1vZGUgPT0gImNhcmVmdWwiOgogICAgICAgICAgICBzZWxmLl91cGRhdGVfY2FyZWZ1bChkaWN0KQogICAgICAgIGVsaWYgbW9kZSA9PSAibG9vc2UiOgogICAgICAgICAgICBzZWxmLl91cGRhdGVfbG9vc2UoZGljdCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHVwZGF0ZSBtb2RlOiAlciIgJSBtb2RlKQoKICAgIGRlZiByZWFkX21vZHVsZShzZWxmLCBtb2RuYW1lLCBtb2RlPSJjYXJlZnVsIik6CiAgICAgICAgX19pbXBvcnRfXyhtb2RuYW1lKQogICAgICAgIG1vZCA9IHN5cy5tb2R1bGVzW21vZG5hbWVdCiAgICAgICAgc2VsZi5fdXBkYXRlKHZhcnMobW9kKSwgbW9kZSkKCiAgICBkZWYgcmVhZF9maWxlKHNlbGYsIGZpbGVuYW1lLCBtb2RlPSJjYXJlZnVsIik6CiAgICAgICAgdmFycyA9IHt9CiAgICAgICAgZXhlYyhvcGVuKGZpbGVuYW1lKS5yZWFkKCksIHZhcnMpCiAgICAgICAgc2VsZi5fdXBkYXRlKHZhcnMsIG1vZGUpCgogICAgZGVmIGVuc3VyZV92YWx1ZShzZWxmLCBhdHRyLCB2YWx1ZSk6CiAgICAgICAgaWYgbm90IGhhc2F0dHIoc2VsZiwgYXR0cikgb3IgZ2V0YXR0cihzZWxmLCBhdHRyKSBpcyBOb25lOgogICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIHZhbHVlKQogICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYsIGF0dHIpCgoKY2xhc3MgT3B0aW9uQ29udGFpbmVyOgoKICAgICIiIgogICAgQWJzdHJhY3QgYmFzZSBjbGFzcy4KCiAgICBDbGFzcyBhdHRyaWJ1dGVzOgogICAgICBzdGFuZGFyZF9vcHRpb25fbGlzdCA6IFtPcHRpb25dCiAgICAgICAgbGlzdCBvZiBzdGFuZGFyZCBvcHRpb25zIHRoYXQgd2lsbCBiZSBhY2NlcHRlZCBieSBhbGwgaW5zdGFuY2VzCiAgICAgICAgb2YgdGhpcyBwYXJzZXIgY2xhc3MgKGludGVuZGVkIHRvIGJlIG92ZXJyaWRkZW4gYnkgc3ViY2xhc3NlcykuCgogICAgSW5zdGFuY2UgYXR0cmlidXRlczoKICAgICAgb3B0aW9uX2xpc3QgOiBbT3B0aW9uXQogICAgICAgIHRoZSBsaXN0IG9mIE9wdGlvbiBvYmplY3RzIGNvbnRhaW5lZCBieSB0aGlzIE9wdGlvbkNvbnRhaW5lcgogICAgICBfc2hvcnRfb3B0IDogeyBzdHJpbmcgOiBPcHRpb24gfQogICAgICAgIGRpY3Rpb25hcnkgbWFwcGluZyBzaG9ydCBvcHRpb24gc3RyaW5ncywgZWcuICItZiIgb3IgIi1YIiwKICAgICAgICB0byB0aGUgT3B0aW9uIGluc3RhbmNlcyB0aGF0IGltcGxlbWVudCB0aGVtLiAgSWYgYW4gT3B0aW9uCiAgICAgICAgaGFzIG11bHRpcGxlIHNob3J0IG9wdGlvbiBzdHJpbmdzLCBpdCB3aWxsIGFwcGVhcnMgaW4gdGhpcwogICAgICAgIGRpY3Rpb25hcnkgbXVsdGlwbGUgdGltZXMuIFsxXQogICAgICBfbG9uZ19vcHQgOiB7IHN0cmluZyA6IE9wdGlvbiB9CiAgICAgICAgZGljdGlvbmFyeSBtYXBwaW5nIGxvbmcgb3B0aW9uIHN0cmluZ3MsIGVnLiAiLS1maWxlIiBvcgogICAgICAgICItLWV4Y2x1ZGUiLCB0byB0aGUgT3B0aW9uIGluc3RhbmNlcyB0aGF0IGltcGxlbWVudCB0aGVtLgogICAgICAgIEFnYWluLCBhIGdpdmVuIE9wdGlvbiBjYW4gb2NjdXIgbXVsdGlwbGUgdGltZXMgaW4gdGhpcwogICAgICAgIGRpY3Rpb25hcnkuIFsxXQogICAgICBkZWZhdWx0cyA6IHsgc3RyaW5nIDogYW55IH0KICAgICAgICBkaWN0aW9uYXJ5IG1hcHBpbmcgb3B0aW9uIGRlc3RpbmF0aW9uIG5hbWVzIHRvIGRlZmF1bHQKICAgICAgICB2YWx1ZXMgZm9yIGVhY2ggZGVzdGluYXRpb24gWzFdCgogICAgWzFdIFRoZXNlIG1hcHBpbmdzIGFyZSBjb21tb24gdG8gKHNoYXJlZCBieSkgYWxsIGNvbXBvbmVudHMgb2YgdGhlCiAgICAgICAgY29udHJvbGxpbmcgT3B0aW9uUGFyc2VyLCB3aGVyZSB0aGV5IGFyZSBpbml0aWFsbHkgY3JlYXRlZC4KCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgb3B0aW9uX2NsYXNzLCBjb25mbGljdF9oYW5kbGVyLCBkZXNjcmlwdGlvbik6CiAgICAgICAgIyBJbml0aWFsaXplIHRoZSBvcHRpb24gbGlzdCBhbmQgcmVsYXRlZCBkYXRhIHN0cnVjdHVyZXMuCiAgICAgICAgIyBUaGlzIG1ldGhvZCBtdXN0IGJlIHByb3ZpZGVkIGJ5IHN1YmNsYXNzZXMsIGFuZCBpdCBtdXN0CiAgICAgICAgIyBpbml0aWFsaXplIGF0IGxlYXN0IHRoZSBmb2xsb3dpbmcgaW5zdGFuY2UgYXR0cmlidXRlczoKICAgICAgICAjIG9wdGlvbl9saXN0LCBfc2hvcnRfb3B0LCBfbG9uZ19vcHQsIGRlZmF1bHRzLgogICAgICAgIHNlbGYuX2NyZWF0ZV9vcHRpb25fbGlzdCgpCgogICAgICAgIHNlbGYub3B0aW9uX2NsYXNzID0gb3B0aW9uX2NsYXNzCiAgICAgICAgc2VsZi5zZXRfY29uZmxpY3RfaGFuZGxlcihjb25mbGljdF9oYW5kbGVyKQogICAgICAgIHNlbGYuc2V0X2Rlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKQoKICAgIGRlZiBfY3JlYXRlX29wdGlvbl9tYXBwaW5ncyhzZWxmKToKICAgICAgICAjIEZvciB1c2UgYnkgT3B0aW9uUGFyc2VyIGNvbnN0cnVjdG9yIC0tIGNyZWF0ZSB0aGUgbWFzdGVyCiAgICAgICAgIyBvcHRpb24gbWFwcGluZ3MgdXNlZCBieSB0aGlzIE9wdGlvblBhcnNlciBhbmQgYWxsCiAgICAgICAgIyBPcHRpb25Hcm91cHMgdGhhdCBpdCBvd25zLgogICAgICAgIHNlbGYuX3Nob3J0X29wdCA9IHt9ICAgICAgICAgICAgIyBzaW5nbGUgbGV0dGVyIC0+IE9wdGlvbiBpbnN0YW5jZQogICAgICAgIHNlbGYuX2xvbmdfb3B0ID0ge30gICAgICAgICAgICAgIyBsb25nIG9wdGlvbiAtPiBPcHRpb24gaW5zdGFuY2UKICAgICAgICBzZWxmLmRlZmF1bHRzID0ge30gICAgICAgICAgICAgICMgbWFwcyBvcHRpb24gZGVzdCAtPiBkZWZhdWx0IHZhbHVlCgoKICAgIGRlZiBfc2hhcmVfb3B0aW9uX21hcHBpbmdzKHNlbGYsIHBhcnNlcik6CiAgICAgICAgIyBGb3IgdXNlIGJ5IE9wdGlvbkdyb3VwIGNvbnN0cnVjdG9yIC0tIHVzZSBzaGFyZWQgb3B0aW9uCiAgICAgICAgIyBtYXBwaW5ncyBmcm9tIHRoZSBPcHRpb25QYXJzZXIgdGhhdCBvd25zIHRoaXMgT3B0aW9uR3JvdXAuCiAgICAgICAgc2VsZi5fc2hvcnRfb3B0ID0gcGFyc2VyLl9zaG9ydF9vcHQKICAgICAgICBzZWxmLl9sb25nX29wdCA9IHBhcnNlci5fbG9uZ19vcHQKICAgICAgICBzZWxmLmRlZmF1bHRzID0gcGFyc2VyLmRlZmF1bHRzCgogICAgZGVmIHNldF9jb25mbGljdF9oYW5kbGVyKHNlbGYsIGhhbmRsZXIpOgogICAgICAgIGlmIGhhbmRsZXIgbm90IGluICgiZXJyb3IiLCAicmVzb2x2ZSIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIGNvbmZsaWN0X3Jlc29sdXRpb24gdmFsdWUgJXIiICUgaGFuZGxlcikKICAgICAgICBzZWxmLmNvbmZsaWN0X2hhbmRsZXIgPSBoYW5kbGVyCgogICAgZGVmIHNldF9kZXNjcmlwdGlvbihzZWxmLCBkZXNjcmlwdGlvbik6CiAgICAgICAgc2VsZi5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uCgogICAgZGVmIGdldF9kZXNjcmlwdGlvbihzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5kZXNjcmlwdGlvbgoKCiAgICBkZWYgZGVzdHJveShzZWxmKToKICAgICAgICAiIiJzZWUgT3B0aW9uUGFyc2VyLmRlc3Ryb3koKS4iIiIKICAgICAgICBkZWwgc2VsZi5fc2hvcnRfb3B0CiAgICAgICAgZGVsIHNlbGYuX2xvbmdfb3B0CiAgICAgICAgZGVsIHNlbGYuZGVmYXVsdHMKCgogICAgIyAtLSBPcHRpb24tYWRkaW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX2NoZWNrX2NvbmZsaWN0KHNlbGYsIG9wdGlvbik6CiAgICAgICAgY29uZmxpY3Rfb3B0cyA9IFtdCiAgICAgICAgZm9yIG9wdCBpbiBvcHRpb24uX3Nob3J0X29wdHM6CiAgICAgICAgICAgIGlmIG9wdCBpbiBzZWxmLl9zaG9ydF9vcHQ6CiAgICAgICAgICAgICAgICBjb25mbGljdF9vcHRzLmFwcGVuZCgob3B0LCBzZWxmLl9zaG9ydF9vcHRbb3B0XSkpCiAgICAgICAgZm9yIG9wdCBpbiBvcHRpb24uX2xvbmdfb3B0czoKICAgICAgICAgICAgaWYgb3B0IGluIHNlbGYuX2xvbmdfb3B0OgogICAgICAgICAgICAgICAgY29uZmxpY3Rfb3B0cy5hcHBlbmQoKG9wdCwgc2VsZi5fbG9uZ19vcHRbb3B0XSkpCgogICAgICAgIGlmIGNvbmZsaWN0X29wdHM6CiAgICAgICAgICAgIGhhbmRsZXIgPSBzZWxmLmNvbmZsaWN0X2hhbmRsZXIKICAgICAgICAgICAgaWYgaGFuZGxlciA9PSAiZXJyb3IiOgogICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uQ29uZmxpY3RFcnJvcigKICAgICAgICAgICAgICAgICAgICAiY29uZmxpY3Rpbmcgb3B0aW9uIHN0cmluZyhzKTogJXMiCiAgICAgICAgICAgICAgICAgICAgJSAiLCAiLmpvaW4oW2NvWzBdIGZvciBjbyBpbiBjb25mbGljdF9vcHRzXSksCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uKQogICAgICAgICAgICBlbGlmIGhhbmRsZXIgPT0gInJlc29sdmUiOgogICAgICAgICAgICAgICAgZm9yIChvcHQsIGNfb3B0aW9uKSBpbiBjb25mbGljdF9vcHRzOgogICAgICAgICAgICAgICAgICAgIGlmIG9wdC5zdGFydHN3aXRoKCItLSIpOgogICAgICAgICAgICAgICAgICAgICAgICBjX29wdGlvbi5fbG9uZ19vcHRzLnJlbW92ZShvcHQpCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLl9sb25nX29wdFtvcHRdCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgY19vcHRpb24uX3Nob3J0X29wdHMucmVtb3ZlKG9wdCkKICAgICAgICAgICAgICAgICAgICAgICAgZGVsIHNlbGYuX3Nob3J0X29wdFtvcHRdCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IChjX29wdGlvbi5fc2hvcnRfb3B0cyBvciBjX29wdGlvbi5fbG9uZ19vcHRzKToKICAgICAgICAgICAgICAgICAgICAgICAgY19vcHRpb24uY29udGFpbmVyLm9wdGlvbl9saXN0LnJlbW92ZShjX29wdGlvbikKCiAgICBkZWYgYWRkX29wdGlvbihzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgICIiImFkZF9vcHRpb24oT3B0aW9uKQogICAgICAgICAgIGFkZF9vcHRpb24ob3B0X3N0ciwgLi4uLCBrd2FyZz12YWwsIC4uLikKICAgICAgICAiIiIKICAgICAgICBpZiBpc2luc3RhbmNlKGFyZ3NbMF0sIHN0cik6CiAgICAgICAgICAgIG9wdGlvbiA9IHNlbGYub3B0aW9uX2NsYXNzKCphcmdzLCAqKmt3YXJncykKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAxIGFuZCBub3Qga3dhcmdzOgogICAgICAgICAgICBvcHRpb24gPSBhcmdzWzBdCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG9wdGlvbiwgT3B0aW9uKToKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibm90IGFuIE9wdGlvbiBpbnN0YW5jZTogJXIiICUgb3B0aW9uKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW52YWxpZCBhcmd1bWVudHMiKQoKICAgICAgICBzZWxmLl9jaGVja19jb25mbGljdChvcHRpb24pCgogICAgICAgIHNlbGYub3B0aW9uX2xpc3QuYXBwZW5kKG9wdGlvbikKICAgICAgICBvcHRpb24uY29udGFpbmVyID0gc2VsZgogICAgICAgIGZvciBvcHQgaW4gb3B0aW9uLl9zaG9ydF9vcHRzOgogICAgICAgICAgICBzZWxmLl9zaG9ydF9vcHRbb3B0XSA9IG9wdGlvbgogICAgICAgIGZvciBvcHQgaW4gb3B0aW9uLl9sb25nX29wdHM6CiAgICAgICAgICAgIHNlbGYuX2xvbmdfb3B0W29wdF0gPSBvcHRpb24KCiAgICAgICAgaWYgb3B0aW9uLmRlc3QgaXMgbm90IE5vbmU6ICAgICAjIG9wdGlvbiBoYXMgYSBkZXN0LCB3ZSBuZWVkIGEgZGVmYXVsdAogICAgICAgICAgICBpZiBvcHRpb24uZGVmYXVsdCBpcyBub3QgTk9fREVGQVVMVDoKICAgICAgICAgICAgICAgIHNlbGYuZGVmYXVsdHNbb3B0aW9uLmRlc3RdID0gb3B0aW9uLmRlZmF1bHQKICAgICAgICAgICAgZWxpZiBvcHRpb24uZGVzdCBub3QgaW4gc2VsZi5kZWZhdWx0czoKICAgICAgICAgICAgICAgIHNlbGYuZGVmYXVsdHNbb3B0aW9uLmRlc3RdID0gTm9uZQoKICAgICAgICByZXR1cm4gb3B0aW9uCgogICAgZGVmIGFkZF9vcHRpb25zKHNlbGYsIG9wdGlvbl9saXN0KToKICAgICAgICBmb3Igb3B0aW9uIGluIG9wdGlvbl9saXN0OgogICAgICAgICAgICBzZWxmLmFkZF9vcHRpb24ob3B0aW9uKQoKICAgICMgLS0gT3B0aW9uIHF1ZXJ5L3JlbW92YWwgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGdldF9vcHRpb24oc2VsZiwgb3B0X3N0cik6CiAgICAgICAgcmV0dXJuIChzZWxmLl9zaG9ydF9vcHQuZ2V0KG9wdF9zdHIpIG9yCiAgICAgICAgICAgICAgICBzZWxmLl9sb25nX29wdC5nZXQob3B0X3N0cikpCgogICAgZGVmIGhhc19vcHRpb24oc2VsZiwgb3B0X3N0cik6CiAgICAgICAgcmV0dXJuIChvcHRfc3RyIGluIHNlbGYuX3Nob3J0X29wdCBvcgogICAgICAgICAgICAgICAgb3B0X3N0ciBpbiBzZWxmLl9sb25nX29wdCkKCiAgICBkZWYgcmVtb3ZlX29wdGlvbihzZWxmLCBvcHRfc3RyKToKICAgICAgICBvcHRpb24gPSBzZWxmLl9zaG9ydF9vcHQuZ2V0KG9wdF9zdHIpCiAgICAgICAgaWYgb3B0aW9uIGlzIE5vbmU6CiAgICAgICAgICAgIG9wdGlvbiA9IHNlbGYuX2xvbmdfb3B0LmdldChvcHRfc3RyKQogICAgICAgIGlmIG9wdGlvbiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJubyBzdWNoIG9wdGlvbiAlciIgJSBvcHRfc3RyKQoKICAgICAgICBmb3Igb3B0IGluIG9wdGlvbi5fc2hvcnRfb3B0czoKICAgICAgICAgICAgZGVsIHNlbGYuX3Nob3J0X29wdFtvcHRdCiAgICAgICAgZm9yIG9wdCBpbiBvcHRpb24uX2xvbmdfb3B0czoKICAgICAgICAgICAgZGVsIHNlbGYuX2xvbmdfb3B0W29wdF0KICAgICAgICBvcHRpb24uY29udGFpbmVyLm9wdGlvbl9saXN0LnJlbW92ZShvcHRpb24pCgoKICAgICMgLS0gSGVscC1mb3JtYXR0aW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGZvcm1hdF9vcHRpb25faGVscChzZWxmLCBmb3JtYXR0ZXIpOgogICAgICAgIGlmIG5vdCBzZWxmLm9wdGlvbl9saXN0OgogICAgICAgICAgICByZXR1cm4gIiIKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIGZvciBvcHRpb24gaW4gc2VsZi5vcHRpb25fbGlzdDoKICAgICAgICAgICAgaWYgbm90IG9wdGlvbi5oZWxwIGlzIFNVUFBSRVNTX0hFTFA6CiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGZvcm1hdHRlci5mb3JtYXRfb3B0aW9uKG9wdGlvbikpCiAgICAgICAgcmV0dXJuICIiLmpvaW4ocmVzdWx0KQoKICAgIGRlZiBmb3JtYXRfZGVzY3JpcHRpb24oc2VsZiwgZm9ybWF0dGVyKToKICAgICAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdF9kZXNjcmlwdGlvbihzZWxmLmdldF9kZXNjcmlwdGlvbigpKQoKICAgIGRlZiBmb3JtYXRfaGVscChzZWxmLCBmb3JtYXR0ZXIpOgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaWYgc2VsZi5kZXNjcmlwdGlvbjoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChzZWxmLmZvcm1hdF9kZXNjcmlwdGlvbihmb3JtYXR0ZXIpKQogICAgICAgIGlmIHNlbGYub3B0aW9uX2xpc3Q6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoc2VsZi5mb3JtYXRfb3B0aW9uX2hlbHAoZm9ybWF0dGVyKSkKICAgICAgICByZXR1cm4gIlxuIi5qb2luKHJlc3VsdCkKCgpjbGFzcyBPcHRpb25Hcm91cCAoT3B0aW9uQ29udGFpbmVyKToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcGFyc2VyLCB0aXRsZSwgZGVzY3JpcHRpb249Tm9uZSk6CiAgICAgICAgc2VsZi5wYXJzZXIgPSBwYXJzZXIKICAgICAgICBPcHRpb25Db250YWluZXIuX19pbml0X18oCiAgICAgICAgICAgIHNlbGYsIHBhcnNlci5vcHRpb25fY2xhc3MsIHBhcnNlci5jb25mbGljdF9oYW5kbGVyLCBkZXNjcmlwdGlvbikKICAgICAgICBzZWxmLnRpdGxlID0gdGl0bGUKCiAgICBkZWYgX2NyZWF0ZV9vcHRpb25fbGlzdChzZWxmKToKICAgICAgICBzZWxmLm9wdGlvbl9saXN0ID0gW10KICAgICAgICBzZWxmLl9zaGFyZV9vcHRpb25fbWFwcGluZ3Moc2VsZi5wYXJzZXIpCgogICAgZGVmIHNldF90aXRsZShzZWxmLCB0aXRsZSk6CiAgICAgICAgc2VsZi50aXRsZSA9IHRpdGxlCgogICAgZGVmIGRlc3Ryb3koc2VsZik6CiAgICAgICAgIiIic2VlIE9wdGlvblBhcnNlci5kZXN0cm95KCkuIiIiCiAgICAgICAgT3B0aW9uQ29udGFpbmVyLmRlc3Ryb3koc2VsZikKICAgICAgICBkZWwgc2VsZi5vcHRpb25fbGlzdAoKICAgICMgLS0gSGVscC1mb3JtYXR0aW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGZvcm1hdF9oZWxwKHNlbGYsIGZvcm1hdHRlcik6CiAgICAgICAgcmVzdWx0ID0gZm9ybWF0dGVyLmZvcm1hdF9oZWFkaW5nKHNlbGYudGl0bGUpCiAgICAgICAgZm9ybWF0dGVyLmluZGVudCgpCiAgICAgICAgcmVzdWx0ICs9IE9wdGlvbkNvbnRhaW5lci5mb3JtYXRfaGVscChzZWxmLCBmb3JtYXR0ZXIpCiAgICAgICAgZm9ybWF0dGVyLmRlZGVudCgpCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKCmNsYXNzIE9wdGlvblBhcnNlciAoT3B0aW9uQ29udGFpbmVyKToKCiAgICAiIiIKICAgIENsYXNzIGF0dHJpYnV0ZXM6CiAgICAgIHN0YW5kYXJkX29wdGlvbl9saXN0IDogW09wdGlvbl0KICAgICAgICBsaXN0IG9mIHN0YW5kYXJkIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGFjY2VwdGVkIGJ5IGFsbCBpbnN0YW5jZXMKICAgICAgICBvZiB0aGlzIHBhcnNlciBjbGFzcyAoaW50ZW5kZWQgdG8gYmUgb3ZlcnJpZGRlbiBieSBzdWJjbGFzc2VzKS4KCiAgICBJbnN0YW5jZSBhdHRyaWJ1dGVzOgogICAgICB1c2FnZSA6IHN0cmluZwogICAgICAgIGEgdXNhZ2Ugc3RyaW5nIGZvciB5b3VyIHByb2dyYW0uICBCZWZvcmUgaXQgaXMgZGlzcGxheWVkCiAgICAgICAgdG8gdGhlIHVzZXIsICIlcHJvZyIgd2lsbCBiZSBleHBhbmRlZCB0byB0aGUgbmFtZSBvZgogICAgICAgIHlvdXIgcHJvZ3JhbSAoc2VsZi5wcm9nIG9yIG9zLnBhdGguYmFzZW5hbWUoc3lzLmFyZ3ZbMF0pKS4KICAgICAgcHJvZyA6IHN0cmluZwogICAgICAgIHRoZSBuYW1lIG9mIHRoZSBjdXJyZW50IHByb2dyYW0gKHRvIG92ZXJyaWRlCiAgICAgICAgb3MucGF0aC5iYXNlbmFtZShzeXMuYXJndlswXSkpLgogICAgICBkZXNjcmlwdGlvbiA6IHN0cmluZwogICAgICAgIEEgcGFyYWdyYXBoIG9mIHRleHQgZ2l2aW5nIGEgYnJpZWYgb3ZlcnZpZXcgb2YgeW91ciBwcm9ncmFtLgogICAgICAgIG9wdHBhcnNlIHJlZm9ybWF0cyB0aGlzIHBhcmFncmFwaCB0byBmaXQgdGhlIGN1cnJlbnQgdGVybWluYWwKICAgICAgICB3aWR0aCBhbmQgcHJpbnRzIGl0IHdoZW4gdGhlIHVzZXIgcmVxdWVzdHMgaGVscCAoYWZ0ZXIgdXNhZ2UsCiAgICAgICAgYnV0IGJlZm9yZSB0aGUgbGlzdCBvZiBvcHRpb25zKS4KICAgICAgZXBpbG9nIDogc3RyaW5nCiAgICAgICAgcGFyYWdyYXBoIG9mIGhlbHAgdGV4dCB0byBwcmludCBhZnRlciBvcHRpb24gaGVscAoKICAgICAgb3B0aW9uX2dyb3VwcyA6IFtPcHRpb25Hcm91cF0KICAgICAgICBsaXN0IG9mIG9wdGlvbiBncm91cHMgaW4gdGhpcyBwYXJzZXIgKG9wdGlvbiBncm91cHMgYXJlCiAgICAgICAgaXJyZWxldmFudCBmb3IgcGFyc2luZyB0aGUgY29tbWFuZC1saW5lLCBidXQgdmVyeSB1c2VmdWwKICAgICAgICBmb3IgZ2VuZXJhdGluZyBoZWxwKQoKICAgICAgYWxsb3dfaW50ZXJzcGVyc2VkX2FyZ3MgOiBib29sID0gdHJ1ZQogICAgICAgIGlmIHRydWUsIHBvc2l0aW9uYWwgYXJndW1lbnRzIG1heSBiZSBpbnRlcnNwZXJzZWQgd2l0aCBvcHRpb25zLgogICAgICAgIEFzc3VtaW5nIC1hIGFuZCAtYiBlYWNoIHRha2UgYSBzaW5nbGUgYXJndW1lbnQsIHRoZSBjb21tYW5kLWxpbmUKICAgICAgICAgIC1hYmxhaCBmb28gYmFyIC1iYm9vIGJhegogICAgICAgIHdpbGwgYmUgaW50ZXJwcmV0ZWQgdGhlIHNhbWUgYXMKICAgICAgICAgIC1hYmxhaCAtYmJvbyAtLSBmb28gYmFyIGJhegogICAgICAgIElmIHRoaXMgZmxhZyB3ZXJlIGZhbHNlLCB0aGF0IGNvbW1hbmQgbGluZSB3b3VsZCBiZSBpbnRlcnByZXRlZCBhcwogICAgICAgICAgLWFibGFoIC0tIGZvbyBiYXIgLWJib28gYmF6CiAgICAgICAgLS0gaWUuIHdlIHN0b3AgcHJvY2Vzc2luZyBvcHRpb25zIGFzIHNvb24gYXMgd2Ugc2VlIHRoZSBmaXJzdAogICAgICAgIG5vbi1vcHRpb24gYXJndW1lbnQuICAoVGhpcyBpcyB0aGUgdHJhZGl0aW9uIGZvbGxvd2VkIGJ5CiAgICAgICAgUHl0aG9uJ3MgZ2V0b3B0IG1vZHVsZSwgUGVybCdzIEdldG9wdDo6U3RkLCBhbmQgb3RoZXIgYXJndW1lbnQtCiAgICAgICAgcGFyc2luZyBsaWJyYXJpZXMsIGJ1dCBpdCBpcyBnZW5lcmFsbHkgYW5ub3lpbmcgdG8gdXNlcnMuKQoKICAgICAgcHJvY2Vzc19kZWZhdWx0X3ZhbHVlcyA6IGJvb2wgPSB0cnVlCiAgICAgICAgaWYgdHJ1ZSwgb3B0aW9uIGRlZmF1bHQgdmFsdWVzIGFyZSBwcm9jZXNzZWQgc2ltaWxhcmx5IHRvIG9wdGlvbgogICAgICAgIHZhbHVlcyBmcm9tIHRoZSBjb21tYW5kIGxpbmU6IHRoYXQgaXMsIHRoZXkgYXJlIHBhc3NlZCB0byB0aGUKICAgICAgICB0eXBlLWNoZWNraW5nIGZ1bmN0aW9uIGZvciB0aGUgb3B0aW9uJ3MgdHlwZSAoYXMgbG9uZyBhcyB0aGUKICAgICAgICBkZWZhdWx0IHZhbHVlIGlzIGEgc3RyaW5nKS4gIChUaGlzIHJlYWxseSBvbmx5IG1hdHRlcnMgaWYgeW91CiAgICAgICAgaGF2ZSBkZWZpbmVkIGN1c3RvbSB0eXBlczsgc2VlIFNGIGJ1ZyAjOTU1ODg5LikgIFNldCBpdCB0byBmYWxzZQogICAgICAgIHRvIHJlc3RvcmUgdGhlIGJlaGF2aW91ciBvZiBPcHRpayAxLjQuMSBhbmQgZWFybGllci4KCiAgICAgIHJhcmdzIDogW3N0cmluZ10KICAgICAgICB0aGUgYXJndW1lbnQgbGlzdCBjdXJyZW50bHkgYmVpbmcgcGFyc2VkLiAgT25seSBzZXQgd2hlbgogICAgICAgIHBhcnNlX2FyZ3MoKSBpcyBhY3RpdmUsIGFuZCBjb250aW51YWxseSB0cmltbWVkIGRvd24gYXMKICAgICAgICB3ZSBjb25zdW1lIGFyZ3VtZW50cy4gIE1haW5seSB0aGVyZSBmb3IgdGhlIGJlbmVmaXQgb2YKICAgICAgICBjYWxsYmFjayBvcHRpb25zLgogICAgICBsYXJncyA6IFtzdHJpbmddCiAgICAgICAgdGhlIGxpc3Qgb2YgbGVmdG92ZXIgYXJndW1lbnRzIHRoYXQgd2UgaGF2ZSBza2lwcGVkIHdoaWxlCiAgICAgICAgcGFyc2luZyBvcHRpb25zLiAgSWYgYWxsb3dfaW50ZXJzcGVyc2VkX2FyZ3MgaXMgZmFsc2UsIHRoaXMKICAgICAgICBsaXN0IGlzIGFsd2F5cyBlbXB0eS4KICAgICAgdmFsdWVzIDogVmFsdWVzCiAgICAgICAgdGhlIHNldCBvZiBvcHRpb24gdmFsdWVzIGN1cnJlbnRseSBiZWluZyBhY2N1bXVsYXRlZC4gIE9ubHkKICAgICAgICBzZXQgd2hlbiBwYXJzZV9hcmdzKCkgaXMgYWN0aXZlLiAgQWxzbyBtYWlubHkgZm9yIGNhbGxiYWNrcy4KCiAgICBCZWNhdXNlIG9mIHRoZSAncmFyZ3MnLCAnbGFyZ3MnLCBhbmQgJ3ZhbHVlcycgYXR0cmlidXRlcywKICAgIE9wdGlvblBhcnNlciBpcyBub3QgdGhyZWFkLXNhZmUuICBJZiwgZm9yIHNvbWUgcGVydmVyc2UgcmVhc29uLCB5b3UKICAgIG5lZWQgdG8gcGFyc2UgY29tbWFuZC1saW5lIGFyZ3VtZW50cyBzaW11bHRhbmVvdXNseSBpbiBkaWZmZXJlbnQKICAgIHRocmVhZHMsIHVzZSBkaWZmZXJlbnQgT3B0aW9uUGFyc2VyIGluc3RhbmNlcy4KCiAgICAiIiIKCiAgICBzdGFuZGFyZF9vcHRpb25fbGlzdCA9IFtdCgogICAgZGVmIF9faW5pdF9fKHNlbGYsCiAgICAgICAgICAgICAgICAgdXNhZ2U9Tm9uZSwKICAgICAgICAgICAgICAgICBvcHRpb25fbGlzdD1Ob25lLAogICAgICAgICAgICAgICAgIG9wdGlvbl9jbGFzcz1PcHRpb24sCiAgICAgICAgICAgICAgICAgdmVyc2lvbj1Ob25lLAogICAgICAgICAgICAgICAgIGNvbmZsaWN0X2hhbmRsZXI9ImVycm9yIiwKICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj1Ob25lLAogICAgICAgICAgICAgICAgIGZvcm1hdHRlcj1Ob25lLAogICAgICAgICAgICAgICAgIGFkZF9oZWxwX29wdGlvbj1UcnVlLAogICAgICAgICAgICAgICAgIHByb2c9Tm9uZSwKICAgICAgICAgICAgICAgICBlcGlsb2c9Tm9uZSk6CiAgICAgICAgT3B0aW9uQ29udGFpbmVyLl9faW5pdF9fKAogICAgICAgICAgICBzZWxmLCBvcHRpb25fY2xhc3MsIGNvbmZsaWN0X2hhbmRsZXIsIGRlc2NyaXB0aW9uKQogICAgICAgIHNlbGYuc2V0X3VzYWdlKHVzYWdlKQogICAgICAgIHNlbGYucHJvZyA9IHByb2cKICAgICAgICBzZWxmLnZlcnNpb24gPSB2ZXJzaW9uCiAgICAgICAgc2VsZi5hbGxvd19pbnRlcnNwZXJzZWRfYXJncyA9IFRydWUKICAgICAgICBzZWxmLnByb2Nlc3NfZGVmYXVsdF92YWx1ZXMgPSBUcnVlCiAgICAgICAgaWYgZm9ybWF0dGVyIGlzIE5vbmU6CiAgICAgICAgICAgIGZvcm1hdHRlciA9IEluZGVudGVkSGVscEZvcm1hdHRlcigpCiAgICAgICAgc2VsZi5mb3JtYXR0ZXIgPSBmb3JtYXR0ZXIKICAgICAgICBzZWxmLmZvcm1hdHRlci5zZXRfcGFyc2VyKHNlbGYpCiAgICAgICAgc2VsZi5lcGlsb2cgPSBlcGlsb2cKCiAgICAgICAgIyBQb3B1bGF0ZSB0aGUgb3B0aW9uIGxpc3Q7IGluaXRpYWwgc291cmNlcyBhcmUgdGhlCiAgICAgICAgIyBzdGFuZGFyZF9vcHRpb25fbGlzdCBjbGFzcyBhdHRyaWJ1dGUsIHRoZSAnb3B0aW9uX2xpc3QnCiAgICAgICAgIyBhcmd1bWVudCwgYW5kIChpZiBhcHBsaWNhYmxlKSB0aGUgX2FkZF92ZXJzaW9uX29wdGlvbigpIGFuZAogICAgICAgICMgX2FkZF9oZWxwX29wdGlvbigpIG1ldGhvZHMuCiAgICAgICAgc2VsZi5fcG9wdWxhdGVfb3B0aW9uX2xpc3Qob3B0aW9uX2xpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkX2hlbHA9YWRkX2hlbHBfb3B0aW9uKQoKICAgICAgICBzZWxmLl9pbml0X3BhcnNpbmdfc3RhdGUoKQoKCiAgICBkZWYgZGVzdHJveShzZWxmKToKICAgICAgICAiIiIKICAgICAgICBEZWNsYXJlIHRoYXQgeW91IGFyZSBkb25lIHdpdGggdGhpcyBPcHRpb25QYXJzZXIuICBUaGlzIGNsZWFucyB1cAogICAgICAgIHJlZmVyZW5jZSBjeWNsZXMgc28gdGhlIE9wdGlvblBhcnNlciAoYW5kIGFsbCBvYmplY3RzIHJlZmVyZW5jZWQgYnkKICAgICAgICBpdCkgY2FuIGJlIGdhcmJhZ2UtY29sbGVjdGVkIHByb21wdGx5LiAgQWZ0ZXIgY2FsbGluZyBkZXN0cm95KCksIHRoZQogICAgICAgIE9wdGlvblBhcnNlciBpcyB1bnVzYWJsZS4KICAgICAgICAiIiIKICAgICAgICBPcHRpb25Db250YWluZXIuZGVzdHJveShzZWxmKQogICAgICAgIGZvciBncm91cCBpbiBzZWxmLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIGdyb3VwLmRlc3Ryb3koKQogICAgICAgIGRlbCBzZWxmLm9wdGlvbl9saXN0CiAgICAgICAgZGVsIHNlbGYub3B0aW9uX2dyb3VwcwogICAgICAgIGRlbCBzZWxmLmZvcm1hdHRlcgoKCiAgICAjIC0tIFByaXZhdGUgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyAodXNlZCBieSBvdXIgb3IgT3B0aW9uQ29udGFpbmVyJ3MgY29uc3RydWN0b3IpCgogICAgZGVmIF9jcmVhdGVfb3B0aW9uX2xpc3Qoc2VsZik6CiAgICAgICAgc2VsZi5vcHRpb25fbGlzdCA9IFtdCiAgICAgICAgc2VsZi5vcHRpb25fZ3JvdXBzID0gW10KICAgICAgICBzZWxmLl9jcmVhdGVfb3B0aW9uX21hcHBpbmdzKCkKCiAgICBkZWYgX2FkZF9oZWxwX29wdGlvbihzZWxmKToKICAgICAgICBzZWxmLmFkZF9vcHRpb24oIi1oIiwgIi0taGVscCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj0iaGVscCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9Xygic2hvdyB0aGlzIGhlbHAgbWVzc2FnZSBhbmQgZXhpdCIpKQoKICAgIGRlZiBfYWRkX3ZlcnNpb25fb3B0aW9uKHNlbGYpOgogICAgICAgIHNlbGYuYWRkX29wdGlvbigiLS12ZXJzaW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPSJ2ZXJzaW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgaGVscD1fKCJzaG93IHByb2dyYW0ncyB2ZXJzaW9uIG51bWJlciBhbmQgZXhpdCIpKQoKICAgIGRlZiBfcG9wdWxhdGVfb3B0aW9uX2xpc3Qoc2VsZiwgb3B0aW9uX2xpc3QsIGFkZF9oZWxwPVRydWUpOgogICAgICAgIGlmIHNlbGYuc3RhbmRhcmRfb3B0aW9uX2xpc3Q6CiAgICAgICAgICAgIHNlbGYuYWRkX29wdGlvbnMoc2VsZi5zdGFuZGFyZF9vcHRpb25fbGlzdCkKICAgICAgICBpZiBvcHRpb25fbGlzdDoKICAgICAgICAgICAgc2VsZi5hZGRfb3B0aW9ucyhvcHRpb25fbGlzdCkKICAgICAgICBpZiBzZWxmLnZlcnNpb246CiAgICAgICAgICAgIHNlbGYuX2FkZF92ZXJzaW9uX29wdGlvbigpCiAgICAgICAgaWYgYWRkX2hlbHA6CiAgICAgICAgICAgIHNlbGYuX2FkZF9oZWxwX29wdGlvbigpCgogICAgZGVmIF9pbml0X3BhcnNpbmdfc3RhdGUoc2VsZik6CiAgICAgICAgIyBUaGVzZSBhcmUgc2V0IGluIHBhcnNlX2FyZ3MoKSBmb3IgdGhlIGNvbnZlbmllbmNlIG9mIGNhbGxiYWNrcy4KICAgICAgICBzZWxmLnJhcmdzID0gTm9uZQogICAgICAgIHNlbGYubGFyZ3MgPSBOb25lCiAgICAgICAgc2VsZi52YWx1ZXMgPSBOb25lCgoKICAgICMgLS0gU2ltcGxlIG1vZGlmaWVyIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIHNldF91c2FnZShzZWxmLCB1c2FnZSk6CiAgICAgICAgaWYgdXNhZ2UgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi51c2FnZSA9IF8oIiVwcm9nIFtvcHRpb25zXSIpCiAgICAgICAgZWxpZiB1c2FnZSBpcyBTVVBQUkVTU19VU0FHRToKICAgICAgICAgICAgc2VsZi51c2FnZSA9IE5vbmUKICAgICAgICAjIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIE9wdGlrIDEuMyBhbmQgZWFybGllci4KICAgICAgICBlbGlmIHVzYWdlLmxvd2VyKCkuc3RhcnRzd2l0aCgidXNhZ2U6ICIpOgogICAgICAgICAgICBzZWxmLnVzYWdlID0gdXNhZ2VbNzpdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi51c2FnZSA9IHVzYWdlCgogICAgZGVmIGVuYWJsZV9pbnRlcnNwZXJzZWRfYXJncyhzZWxmKToKICAgICAgICAiIiJTZXQgcGFyc2luZyB0byBub3Qgc3RvcCBvbiB0aGUgZmlyc3Qgbm9uLW9wdGlvbiwgYWxsb3dpbmcKICAgICAgICBpbnRlcnNwZXJzaW5nIHN3aXRjaGVzIHdpdGggY29tbWFuZCBhcmd1bWVudHMuIFRoaXMgaXMgdGhlCiAgICAgICAgZGVmYXVsdCBiZWhhdmlvci4gU2VlIGFsc28gZGlzYWJsZV9pbnRlcnNwZXJzZWRfYXJncygpIGFuZCB0aGUKICAgICAgICBjbGFzcyBkb2N1bWVudGF0aW9uIGRlc2NyaXB0aW9uIG9mIHRoZSBhdHRyaWJ1dGUKICAgICAgICBhbGxvd19pbnRlcnNwZXJzZWRfYXJncy4iIiIKICAgICAgICBzZWxmLmFsbG93X2ludGVyc3BlcnNlZF9hcmdzID0gVHJ1ZQoKICAgIGRlZiBkaXNhYmxlX2ludGVyc3BlcnNlZF9hcmdzKHNlbGYpOgogICAgICAgICIiIlNldCBwYXJzaW5nIHRvIHN0b3Agb24gdGhlIGZpcnN0IG5vbi1vcHRpb24uIFVzZSB0aGlzIGlmCiAgICAgICAgeW91IGhhdmUgYSBjb21tYW5kIHByb2Nlc3NvciB3aGljaCBydW5zIGFub3RoZXIgY29tbWFuZCB0aGF0CiAgICAgICAgaGFzIG9wdGlvbnMgb2YgaXRzIG93biBhbmQgeW91IHdhbnQgdG8gbWFrZSBzdXJlIHRoZXNlIG9wdGlvbnMKICAgICAgICBkb24ndCBnZXQgY29uZnVzZWQuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5hbGxvd19pbnRlcnNwZXJzZWRfYXJncyA9IEZhbHNlCgogICAgZGVmIHNldF9wcm9jZXNzX2RlZmF1bHRfdmFsdWVzKHNlbGYsIHByb2Nlc3MpOgogICAgICAgIHNlbGYucHJvY2Vzc19kZWZhdWx0X3ZhbHVlcyA9IHByb2Nlc3MKCiAgICBkZWYgc2V0X2RlZmF1bHQoc2VsZiwgZGVzdCwgdmFsdWUpOgogICAgICAgIHNlbGYuZGVmYXVsdHNbZGVzdF0gPSB2YWx1ZQoKICAgIGRlZiBzZXRfZGVmYXVsdHMoc2VsZiwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuZGVmYXVsdHMudXBkYXRlKGt3YXJncykKCiAgICBkZWYgX2dldF9hbGxfb3B0aW9ucyhzZWxmKToKICAgICAgICBvcHRpb25zID0gc2VsZi5vcHRpb25fbGlzdFs6XQogICAgICAgIGZvciBncm91cCBpbiBzZWxmLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIG9wdGlvbnMuZXh0ZW5kKGdyb3VwLm9wdGlvbl9saXN0KQogICAgICAgIHJldHVybiBvcHRpb25zCgogICAgZGVmIGdldF9kZWZhdWx0X3ZhbHVlcyhzZWxmKToKICAgICAgICBpZiBub3Qgc2VsZi5wcm9jZXNzX2RlZmF1bHRfdmFsdWVzOgogICAgICAgICAgICAjIE9sZCwgcHJlLU9wdGlrIDEuNSBiZWhhdmlvdXIuCiAgICAgICAgICAgIHJldHVybiBWYWx1ZXMoc2VsZi5kZWZhdWx0cykKCiAgICAgICAgZGVmYXVsdHMgPSBzZWxmLmRlZmF1bHRzLmNvcHkoKQogICAgICAgIGZvciBvcHRpb24gaW4gc2VsZi5fZ2V0X2FsbF9vcHRpb25zKCk6CiAgICAgICAgICAgIGRlZmF1bHQgPSBkZWZhdWx0cy5nZXQob3B0aW9uLmRlc3QpCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZGVmYXVsdCwgc3RyKToKICAgICAgICAgICAgICAgIG9wdF9zdHIgPSBvcHRpb24uZ2V0X29wdF9zdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmYXVsdHNbb3B0aW9uLmRlc3RdID0gb3B0aW9uLmNoZWNrX3ZhbHVlKG9wdF9zdHIsIGRlZmF1bHQpCgogICAgICAgIHJldHVybiBWYWx1ZXMoZGVmYXVsdHMpCgoKICAgICMgLS0gT3B0aW9uR3JvdXAgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGFkZF9vcHRpb25fZ3JvdXAoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAjIFhYWCBsb3RzIG9mIG92ZXJsYXAgd2l0aCBPcHRpb25Db250YWluZXIuYWRkX29wdGlvbigpCiAgICAgICAgaWYgaXNpbnN0YW5jZShhcmdzWzBdLCBzdHIpOgogICAgICAgICAgICBncm91cCA9IE9wdGlvbkdyb3VwKHNlbGYsICphcmdzLCAqKmt3YXJncykKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAxIGFuZCBub3Qga3dhcmdzOgogICAgICAgICAgICBncm91cCA9IGFyZ3NbMF0KICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZ3JvdXAsIE9wdGlvbkdyb3VwKToKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibm90IGFuIE9wdGlvbkdyb3VwIGluc3RhbmNlOiAlciIgJSBncm91cCkKICAgICAgICAgICAgaWYgZ3JvdXAucGFyc2VyIGlzIG5vdCBzZWxmOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCBPcHRpb25Hcm91cCAod3JvbmcgcGFyc2VyKSIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJpbnZhbGlkIGFyZ3VtZW50cyIpCgogICAgICAgIHNlbGYub3B0aW9uX2dyb3Vwcy5hcHBlbmQoZ3JvdXApCiAgICAgICAgcmV0dXJuIGdyb3VwCgogICAgZGVmIGdldF9vcHRpb25fZ3JvdXAoc2VsZiwgb3B0X3N0cik6CiAgICAgICAgb3B0aW9uID0gKHNlbGYuX3Nob3J0X29wdC5nZXQob3B0X3N0cikgb3IKICAgICAgICAgICAgICAgICAgc2VsZi5fbG9uZ19vcHQuZ2V0KG9wdF9zdHIpKQogICAgICAgIGlmIG9wdGlvbiBhbmQgb3B0aW9uLmNvbnRhaW5lciBpcyBub3Qgc2VsZjoKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5jb250YWluZXIKICAgICAgICByZXR1cm4gTm9uZQoKCiAgICAjIC0tIE9wdGlvbi1wYXJzaW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfZ2V0X2FyZ3Moc2VsZiwgYXJncyk6CiAgICAgICAgaWYgYXJncyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gc3lzLmFyZ3ZbMTpdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGFyZ3NbOl0gICAgICAgICAgICAgICMgZG9uJ3QgbW9kaWZ5IGNhbGxlcidzIGxpc3QKCiAgICBkZWYgcGFyc2VfYXJncyhzZWxmLCBhcmdzPU5vbmUsIHZhbHVlcz1Ob25lKToKICAgICAgICAiIiIKICAgICAgICBwYXJzZV9hcmdzKGFyZ3MgOiBbc3RyaW5nXSA9IHN5cy5hcmd2WzE6XSwKICAgICAgICAgICAgICAgICAgIHZhbHVlcyA6IFZhbHVlcyA9IE5vbmUpCiAgICAgICAgLT4gKHZhbHVlcyA6IFZhbHVlcywgYXJncyA6IFtzdHJpbmddKQoKICAgICAgICBQYXJzZSB0aGUgY29tbWFuZC1saW5lIG9wdGlvbnMgZm91bmQgaW4gJ2FyZ3MnIChkZWZhdWx0OgogICAgICAgIHN5cy5hcmd2WzE6XSkuICBBbnkgZXJyb3JzIHJlc3VsdCBpbiBhIGNhbGwgdG8gJ2Vycm9yKCknLCB3aGljaAogICAgICAgIGJ5IGRlZmF1bHQgcHJpbnRzIHRoZSB1c2FnZSBtZXNzYWdlIHRvIHN0ZGVyciBhbmQgY2FsbHMKICAgICAgICBzeXMuZXhpdCgpIHdpdGggYW4gZXJyb3IgbWVzc2FnZS4gIE9uIHN1Y2Nlc3MgcmV0dXJucyBhIHBhaXIKICAgICAgICAodmFsdWVzLCBhcmdzKSB3aGVyZSAndmFsdWVzJyBpcyBhbiBWYWx1ZXMgaW5zdGFuY2UgKHdpdGggYWxsCiAgICAgICAgeW91ciBvcHRpb24gdmFsdWVzKSBhbmQgJ2FyZ3MnIGlzIHRoZSBsaXN0IG9mIGFyZ3VtZW50cyBsZWZ0CiAgICAgICAgb3ZlciBhZnRlciBwYXJzaW5nIG9wdGlvbnMuCiAgICAgICAgIiIiCiAgICAgICAgcmFyZ3MgPSBzZWxmLl9nZXRfYXJncyhhcmdzKQogICAgICAgIGlmIHZhbHVlcyBpcyBOb25lOgogICAgICAgICAgICB2YWx1ZXMgPSBzZWxmLmdldF9kZWZhdWx0X3ZhbHVlcygpCgogICAgICAgICMgU3RvcmUgdGhlIGhhbHZlcyBvZiB0aGUgYXJndW1lbnQgbGlzdCBhcyBhdHRyaWJ1dGVzIGZvciB0aGUKICAgICAgICAjIGNvbnZlbmllbmNlIG9mIGNhbGxiYWNrczoKICAgICAgICAjICAgcmFyZ3MKICAgICAgICAjICAgICB0aGUgcmVzdCBvZiB0aGUgY29tbWFuZC1saW5lICh0aGUgInIiIHN0YW5kcyBmb3IKICAgICAgICAjICAgICAicmVtYWluaW5nIiBvciAicmlnaHQtaGFuZCIpCiAgICAgICAgIyAgIGxhcmdzCiAgICAgICAgIyAgICAgdGhlIGxlZnRvdmVyIGFyZ3VtZW50cyAtLSBpZS4gd2hhdCdzIGxlZnQgYWZ0ZXIgcmVtb3ZpbmcKICAgICAgICAjICAgICBvcHRpb25zIGFuZCB0aGVpciBhcmd1bWVudHMgKHRoZSAibCIgc3RhbmRzIGZvciAibGVmdG92ZXIiCiAgICAgICAgIyAgICAgb3IgImxlZnQtaGFuZCIpCiAgICAgICAgc2VsZi5yYXJncyA9IHJhcmdzCiAgICAgICAgc2VsZi5sYXJncyA9IGxhcmdzID0gW10KICAgICAgICBzZWxmLnZhbHVlcyA9IHZhbHVlcwoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHN0b3AgPSBzZWxmLl9wcm9jZXNzX2FyZ3MobGFyZ3MsIHJhcmdzLCB2YWx1ZXMpCiAgICAgICAgZXhjZXB0IChCYWRPcHRpb25FcnJvciwgT3B0aW9uVmFsdWVFcnJvcikgYXMgZXJyOgogICAgICAgICAgICBzZWxmLmVycm9yKHN0cihlcnIpKQoKICAgICAgICBhcmdzID0gbGFyZ3MgKyByYXJncwogICAgICAgIHJldHVybiBzZWxmLmNoZWNrX3ZhbHVlcyh2YWx1ZXMsIGFyZ3MpCgogICAgZGVmIGNoZWNrX3ZhbHVlcyhzZWxmLCB2YWx1ZXMsIGFyZ3MpOgogICAgICAgICIiIgogICAgICAgIGNoZWNrX3ZhbHVlcyh2YWx1ZXMgOiBWYWx1ZXMsIGFyZ3MgOiBbc3RyaW5nXSkKICAgICAgICAtPiAodmFsdWVzIDogVmFsdWVzLCBhcmdzIDogW3N0cmluZ10pCgogICAgICAgIENoZWNrIHRoYXQgdGhlIHN1cHBsaWVkIG9wdGlvbiB2YWx1ZXMgYW5kIGxlZnRvdmVyIGFyZ3VtZW50cyBhcmUKICAgICAgICB2YWxpZC4gIFJldHVybnMgdGhlIG9wdGlvbiB2YWx1ZXMgYW5kIGxlZnRvdmVyIGFyZ3VtZW50cwogICAgICAgIChwb3NzaWJseSBhZGp1c3RlZCwgcG9zc2libHkgY29tcGxldGVseSBuZXcgLS0gd2hhdGV2ZXIgeW91CiAgICAgICAgbGlrZSkuICBEZWZhdWx0IGltcGxlbWVudGF0aW9uIGp1c3QgcmV0dXJucyB0aGUgcGFzc2VkLWluCiAgICAgICAgdmFsdWVzOyBzdWJjbGFzc2VzIG1heSBvdmVycmlkZSBhcyBkZXNpcmVkLgogICAgICAgICIiIgogICAgICAgIHJldHVybiAodmFsdWVzLCBhcmdzKQoKICAgIGRlZiBfcHJvY2Vzc19hcmdzKHNlbGYsIGxhcmdzLCByYXJncywgdmFsdWVzKToKICAgICAgICAiIiJfcHJvY2Vzc19hcmdzKGxhcmdzIDogW3N0cmluZ10sCiAgICAgICAgICAgICAgICAgICAgICAgICByYXJncyA6IFtzdHJpbmddLAogICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzIDogVmFsdWVzKQoKICAgICAgICBQcm9jZXNzIGNvbW1hbmQtbGluZSBhcmd1bWVudHMgYW5kIHBvcHVsYXRlICd2YWx1ZXMnLCBjb25zdW1pbmcKICAgICAgICBvcHRpb25zIGFuZCBhcmd1bWVudHMgZnJvbSAncmFyZ3MnLiAgSWYgJ2FsbG93X2ludGVyc3BlcnNlZF9hcmdzJyBpcwogICAgICAgIGZhbHNlLCBzdG9wIGF0IHRoZSBmaXJzdCBub24tb3B0aW9uIGFyZ3VtZW50LiAgSWYgdHJ1ZSwgYWNjdW11bGF0ZSBhbnkKICAgICAgICBpbnRlcnNwZXJzZWQgbm9uLW9wdGlvbiBhcmd1bWVudHMgaW4gJ2xhcmdzJy4KICAgICAgICAiIiIKICAgICAgICB3aGlsZSByYXJnczoKICAgICAgICAgICAgYXJnID0gcmFyZ3NbMF0KICAgICAgICAgICAgIyBXZSBoYW5kbGUgYmFyZSAiLS0iIGV4cGxpY2l0bHksIGFuZCBiYXJlICItIiBpcyBoYW5kbGVkIGJ5IHRoZQogICAgICAgICAgICAjIHN0YW5kYXJkIGFyZyBoYW5kbGVyIHNpbmNlIHRoZSBzaG9ydCBhcmcgY2FzZSBlbnN1cmVzIHRoYXQgdGhlCiAgICAgICAgICAgICMgbGVuIG9mIHRoZSBvcHQgc3RyaW5nIGlzIGdyZWF0ZXIgdGhhbiAxLgogICAgICAgICAgICBpZiBhcmcgPT0gIi0tIjoKICAgICAgICAgICAgICAgIGRlbCByYXJnc1swXQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVsaWYgYXJnWzA6Ml0gPT0gIi0tIjoKICAgICAgICAgICAgICAgICMgcHJvY2VzcyBhIHNpbmdsZSBsb25nIG9wdGlvbiAocG9zc2libHkgd2l0aCB2YWx1ZShzKSkKICAgICAgICAgICAgICAgIHNlbGYuX3Byb2Nlc3NfbG9uZ19vcHQocmFyZ3MsIHZhbHVlcykKICAgICAgICAgICAgZWxpZiBhcmdbOjFdID09ICItIiBhbmQgbGVuKGFyZykgPiAxOgogICAgICAgICAgICAgICAgIyBwcm9jZXNzIGEgY2x1c3RlciBvZiBzaG9ydCBvcHRpb25zIChwb3NzaWJseSB3aXRoCiAgICAgICAgICAgICAgICAjIHZhbHVlKHMpIGZvciB0aGUgbGFzdCBvbmUgb25seSkKICAgICAgICAgICAgICAgIHNlbGYuX3Byb2Nlc3Nfc2hvcnRfb3B0cyhyYXJncywgdmFsdWVzKQogICAgICAgICAgICBlbGlmIHNlbGYuYWxsb3dfaW50ZXJzcGVyc2VkX2FyZ3M6CiAgICAgICAgICAgICAgICBsYXJncy5hcHBlbmQoYXJnKQogICAgICAgICAgICAgICAgZGVsIHJhcmdzWzBdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gICAgICAgICAgICAgICAgICAjIHN0b3Agbm93LCBsZWF2ZSB0aGlzIGFyZyBpbiByYXJncwoKICAgICAgICAjIFNheSB0aGlzIGlzIHRoZSBvcmlnaW5hbCBhcmd1bWVudCBsaXN0OgogICAgICAgICMgW2FyZzAsIGFyZzEsIC4uLiwgYXJnKGktMSksIGFyZyhpKSwgYXJnKGkrMSksIC4uLiwgYXJnKE4tMSldCiAgICAgICAgIyAgICAgICAgICAgICAgICAgICAgICAgICAgICBeCiAgICAgICAgIyAod2UgYXJlIGFib3V0IHRvIHByb2Nlc3MgYXJnKGkpKS4KICAgICAgICAjCiAgICAgICAgIyBUaGVuIHJhcmdzIGlzIFthcmcoaSksIC4uLiwgYXJnKE4tMSldIGFuZCBsYXJncyBpcyBhICpzdWJzZXQqIG9mCiAgICAgICAgIyBbYXJnMCwgLi4uLCBhcmcoaS0xKV0gKGFueSBvcHRpb25zIGFuZCB0aGVpciBhcmd1bWVudHMgd2lsbCBoYXZlCiAgICAgICAgIyBiZWVuIHJlbW92ZWQgZnJvbSBsYXJncykuCiAgICAgICAgIwogICAgICAgICMgVGhlIHdoaWxlIGxvb3Agd2lsbCB1c3VhbGx5IGNvbnN1bWUgMSBvciBtb3JlIGFyZ3VtZW50cyBwZXIgcGFzcy4KICAgICAgICAjIElmIGl0IGNvbnN1bWVzIDEgKGVnLiBhcmcgaXMgYW4gb3B0aW9uIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRzKSwKICAgICAgICAjIHRoZW4gYWZ0ZXIgX3Byb2Nlc3NfYXJnKCkgaXMgZG9uZSB0aGUgc2l0dWF0aW9uIGlzOgogICAgICAgICMKICAgICAgICAjICAgbGFyZ3MgPSBzdWJzZXQgb2YgW2FyZzAsIC4uLiwgYXJnKGkpXQogICAgICAgICMgICByYXJncyA9IFthcmcoaSsxKSwgLi4uLCBhcmcoTi0xKV0KICAgICAgICAjCiAgICAgICAgIyBJZiBhbGxvd19pbnRlcnNwZXJzZWRfYXJncyBpcyBmYWxzZSwgbGFyZ3Mgd2lsbCBhbHdheXMgYmUKICAgICAgICAjICplbXB0eSogLS0gc3RpbGwgYSBzdWJzZXQgb2YgW2FyZzAsIC4uLiwgYXJnKGktMSldLCBidXQKICAgICAgICAjIG5vdCBhIHZlcnkgaW50ZXJlc3Rpbmcgc3Vic2V0IQoKICAgIGRlZiBfbWF0Y2hfbG9uZ19vcHQoc2VsZiwgb3B0KToKICAgICAgICAiIiJfbWF0Y2hfbG9uZ19vcHQob3B0IDogc3RyaW5nKSAtPiBzdHJpbmcKCiAgICAgICAgRGV0ZXJtaW5lIHdoaWNoIGxvbmcgb3B0aW9uIHN0cmluZyAnb3B0JyBtYXRjaGVzLCBpZS4gd2hpY2ggb25lCiAgICAgICAgaXQgaXMgYW4gdW5hbWJpZ3VvdXMgYWJicmV2YXRpb24gZm9yLiAgUmFpc2VzIEJhZE9wdGlvbkVycm9yIGlmCiAgICAgICAgJ29wdCcgZG9lc24ndCB1bmFtYmlndW91c2x5IG1hdGNoIGFueSBsb25nIG9wdGlvbiBzdHJpbmcuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIF9tYXRjaF9hYmJyZXYob3B0LCBzZWxmLl9sb25nX29wdCkKCiAgICBkZWYgX3Byb2Nlc3NfbG9uZ19vcHQoc2VsZiwgcmFyZ3MsIHZhbHVlcyk6CiAgICAgICAgYXJnID0gcmFyZ3MucG9wKDApCgogICAgICAgICMgVmFsdWUgZXhwbGljaXRseSBhdHRhY2hlZCB0byBhcmc/ICBQcmV0ZW5kIGl0J3MgdGhlIG5leHQKICAgICAgICAjIGFyZ3VtZW50LgogICAgICAgIGlmICI9IiBpbiBhcmc6CiAgICAgICAgICAgIChvcHQsIG5leHRfYXJnKSA9IGFyZy5zcGxpdCgiPSIsIDEpCiAgICAgICAgICAgIHJhcmdzLmluc2VydCgwLCBuZXh0X2FyZykKICAgICAgICAgICAgaGFkX2V4cGxpY2l0X3ZhbHVlID0gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9wdCA9IGFyZwogICAgICAgICAgICBoYWRfZXhwbGljaXRfdmFsdWUgPSBGYWxzZQoKICAgICAgICBvcHQgPSBzZWxmLl9tYXRjaF9sb25nX29wdChvcHQpCiAgICAgICAgb3B0aW9uID0gc2VsZi5fbG9uZ19vcHRbb3B0XQogICAgICAgIGlmIG9wdGlvbi50YWtlc192YWx1ZSgpOgogICAgICAgICAgICBuYXJncyA9IG9wdGlvbi5uYXJncwogICAgICAgICAgICBpZiBsZW4ocmFyZ3MpIDwgbmFyZ3M6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yKG5nZXR0ZXh0KAogICAgICAgICAgICAgICAgICAgICIlKG9wdGlvbilzIG9wdGlvbiByZXF1aXJlcyAlKG51bWJlcilkIGFyZ3VtZW50IiwKICAgICAgICAgICAgICAgICAgICAiJShvcHRpb24pcyBvcHRpb24gcmVxdWlyZXMgJShudW1iZXIpZCBhcmd1bWVudHMiLAogICAgICAgICAgICAgICAgICAgIG5hcmdzKSAlIHsib3B0aW9uIjogb3B0LCAibnVtYmVyIjogbmFyZ3N9KQogICAgICAgICAgICBlbGlmIG5hcmdzID09IDE6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhcmdzLnBvcCgwKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdmFsdWUgPSB0dXBsZShyYXJnc1swOm5hcmdzXSkKICAgICAgICAgICAgICAgIGRlbCByYXJnc1swOm5hcmdzXQoKICAgICAgICBlbGlmIGhhZF9leHBsaWNpdF92YWx1ZToKICAgICAgICAgICAgc2VsZi5lcnJvcihfKCIlcyBvcHRpb24gZG9lcyBub3QgdGFrZSBhIHZhbHVlIikgJSBvcHQpCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHZhbHVlID0gTm9uZQoKICAgICAgICBvcHRpb24ucHJvY2VzcyhvcHQsIHZhbHVlLCB2YWx1ZXMsIHNlbGYpCgogICAgZGVmIF9wcm9jZXNzX3Nob3J0X29wdHMoc2VsZiwgcmFyZ3MsIHZhbHVlcyk6CiAgICAgICAgYXJnID0gcmFyZ3MucG9wKDApCiAgICAgICAgc3RvcCA9IEZhbHNlCiAgICAgICAgaSA9IDEKICAgICAgICBmb3IgY2ggaW4gYXJnWzE6XToKICAgICAgICAgICAgb3B0ID0gIi0iICsgY2gKICAgICAgICAgICAgb3B0aW9uID0gc2VsZi5fc2hvcnRfb3B0LmdldChvcHQpCiAgICAgICAgICAgIGkgKz0gMSAgICAgICAgICAgICAgICAgICAgICAjIHdlIGhhdmUgY29uc3VtZWQgYSBjaGFyYWN0ZXIKCiAgICAgICAgICAgIGlmIG5vdCBvcHRpb246CiAgICAgICAgICAgICAgICByYWlzZSBCYWRPcHRpb25FcnJvcihvcHQpCiAgICAgICAgICAgIGlmIG9wdGlvbi50YWtlc192YWx1ZSgpOgogICAgICAgICAgICAgICAgIyBBbnkgY2hhcmFjdGVycyBsZWZ0IGluIGFyZz8gIFByZXRlbmQgdGhleSdyZSB0aGUKICAgICAgICAgICAgICAgICMgbmV4dCBhcmcsIGFuZCBzdG9wIGNvbnN1bWluZyBjaGFyYWN0ZXJzIG9mIGFyZy4KICAgICAgICAgICAgICAgIGlmIGkgPCBsZW4oYXJnKToKICAgICAgICAgICAgICAgICAgICByYXJncy5pbnNlcnQoMCwgYXJnW2k6XSkKICAgICAgICAgICAgICAgICAgICBzdG9wID0gVHJ1ZQoKICAgICAgICAgICAgICAgIG5hcmdzID0gb3B0aW9uLm5hcmdzCiAgICAgICAgICAgICAgICBpZiBsZW4ocmFyZ3MpIDwgbmFyZ3M6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvcihuZ2V0dGV4dCgKICAgICAgICAgICAgICAgICAgICAgICAgIiUob3B0aW9uKXMgb3B0aW9uIHJlcXVpcmVzICUobnVtYmVyKWQgYXJndW1lbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiJShvcHRpb24pcyBvcHRpb24gcmVxdWlyZXMgJShudW1iZXIpZCBhcmd1bWVudHMiLAogICAgICAgICAgICAgICAgICAgICAgICBuYXJncykgJSB7Im9wdGlvbiI6IG9wdCwgIm51bWJlciI6IG5hcmdzfSkKICAgICAgICAgICAgICAgIGVsaWYgbmFyZ3MgPT0gMToKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhcmdzLnBvcCgwKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHR1cGxlKHJhcmdzWzA6bmFyZ3NdKQogICAgICAgICAgICAgICAgICAgIGRlbCByYXJnc1swOm5hcmdzXQoKICAgICAgICAgICAgZWxzZTogICAgICAgICAgICAgICAgICAgICAgICMgb3B0aW9uIGRvZXNuJ3QgdGFrZSBhIHZhbHVlCiAgICAgICAgICAgICAgICB2YWx1ZSA9IE5vbmUKCiAgICAgICAgICAgIG9wdGlvbi5wcm9jZXNzKG9wdCwgdmFsdWUsIHZhbHVlcywgc2VsZikKCiAgICAgICAgICAgIGlmIHN0b3A6CiAgICAgICAgICAgICAgICBicmVhawoKCiAgICAjIC0tIEZlZWRiYWNrIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBnZXRfcHJvZ19uYW1lKHNlbGYpOgogICAgICAgIGlmIHNlbGYucHJvZyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gb3MucGF0aC5iYXNlbmFtZShzeXMuYXJndlswXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2VsZi5wcm9nCgogICAgZGVmIGV4cGFuZF9wcm9nX25hbWUoc2VsZiwgcyk6CiAgICAgICAgcmV0dXJuIHMucmVwbGFjZSgiJXByb2ciLCBzZWxmLmdldF9wcm9nX25hbWUoKSkKCiAgICBkZWYgZ2V0X2Rlc2NyaXB0aW9uKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmV4cGFuZF9wcm9nX25hbWUoc2VsZi5kZXNjcmlwdGlvbikKCiAgICBkZWYgZXhpdChzZWxmLCBzdGF0dXM9MCwgbXNnPU5vbmUpOgogICAgICAgIGlmIG1zZzoKICAgICAgICAgICAgc3lzLnN0ZGVyci53cml0ZShtc2cpCiAgICAgICAgc3lzLmV4aXQoc3RhdHVzKQoKICAgIGRlZiBlcnJvcihzZWxmLCBtc2cpOgogICAgICAgICIiImVycm9yKG1zZyA6IHN0cmluZykKCiAgICAgICAgUHJpbnQgYSB1c2FnZSBtZXNzYWdlIGluY29ycG9yYXRpbmcgJ21zZycgdG8gc3RkZXJyIGFuZCBleGl0LgogICAgICAgIElmIHlvdSBvdmVycmlkZSB0aGlzIGluIGEgc3ViY2xhc3MsIGl0IHNob3VsZCBub3QgcmV0dXJuIC0tIGl0CiAgICAgICAgc2hvdWxkIGVpdGhlciBleGl0IG9yIHJhaXNlIGFuIGV4Y2VwdGlvbi4KICAgICAgICAiIiIKICAgICAgICBzZWxmLnByaW50X3VzYWdlKHN5cy5zdGRlcnIpCiAgICAgICAgc2VsZi5leGl0KDIsICIlczogZXJyb3I6ICVzXG4iICUgKHNlbGYuZ2V0X3Byb2dfbmFtZSgpLCBtc2cpKQoKICAgIGRlZiBnZXRfdXNhZ2Uoc2VsZik6CiAgICAgICAgaWYgc2VsZi51c2FnZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZm9ybWF0dGVyLmZvcm1hdF91c2FnZSgKICAgICAgICAgICAgICAgIHNlbGYuZXhwYW5kX3Byb2dfbmFtZShzZWxmLnVzYWdlKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIiIKCiAgICBkZWYgcHJpbnRfdXNhZ2Uoc2VsZiwgZmlsZT1Ob25lKToKICAgICAgICAiIiJwcmludF91c2FnZShmaWxlIDogZmlsZSA9IHN0ZG91dCkKCiAgICAgICAgUHJpbnQgdGhlIHVzYWdlIG1lc3NhZ2UgZm9yIHRoZSBjdXJyZW50IHByb2dyYW0gKHNlbGYudXNhZ2UpIHRvCiAgICAgICAgJ2ZpbGUnIChkZWZhdWx0IHN0ZG91dCkuICBBbnkgb2NjdXJyZW5jZSBvZiB0aGUgc3RyaW5nICIlcHJvZyIgaW4KICAgICAgICBzZWxmLnVzYWdlIGlzIHJlcGxhY2VkIHdpdGggdGhlIG5hbWUgb2YgdGhlIGN1cnJlbnQgcHJvZ3JhbQogICAgICAgIChiYXNlbmFtZSBvZiBzeXMuYXJndlswXSkuICBEb2VzIG5vdGhpbmcgaWYgc2VsZi51c2FnZSBpcyBlbXB0eQogICAgICAgIG9yIG5vdCBkZWZpbmVkLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYudXNhZ2U6CiAgICAgICAgICAgIHByaW50KHNlbGYuZ2V0X3VzYWdlKCksIGZpbGU9ZmlsZSkKCiAgICBkZWYgZ2V0X3ZlcnNpb24oc2VsZik6CiAgICAgICAgaWYgc2VsZi52ZXJzaW9uOgogICAgICAgICAgICByZXR1cm4gc2VsZi5leHBhbmRfcHJvZ19uYW1lKHNlbGYudmVyc2lvbikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIiIKCiAgICBkZWYgcHJpbnRfdmVyc2lvbihzZWxmLCBmaWxlPU5vbmUpOgogICAgICAgICIiInByaW50X3ZlcnNpb24oZmlsZSA6IGZpbGUgPSBzdGRvdXQpCgogICAgICAgIFByaW50IHRoZSB2ZXJzaW9uIG1lc3NhZ2UgZm9yIHRoaXMgcHJvZ3JhbSAoc2VsZi52ZXJzaW9uKSB0bwogICAgICAgICdmaWxlJyAoZGVmYXVsdCBzdGRvdXQpLiAgQXMgd2l0aCBwcmludF91c2FnZSgpLCBhbnkgb2NjdXJyZW5jZQogICAgICAgIG9mICIlcHJvZyIgaW4gc2VsZi52ZXJzaW9uIGlzIHJlcGxhY2VkIGJ5IHRoZSBjdXJyZW50IHByb2dyYW0ncwogICAgICAgIG5hbWUuICBEb2VzIG5vdGhpbmcgaWYgc2VsZi52ZXJzaW9uIGlzIGVtcHR5IG9yIHVuZGVmaW5lZC4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLnZlcnNpb246CiAgICAgICAgICAgIHByaW50KHNlbGYuZ2V0X3ZlcnNpb24oKSwgZmlsZT1maWxlKQoKICAgIGRlZiBmb3JtYXRfb3B0aW9uX2hlbHAoc2VsZiwgZm9ybWF0dGVyPU5vbmUpOgogICAgICAgIGlmIGZvcm1hdHRlciBpcyBOb25lOgogICAgICAgICAgICBmb3JtYXR0ZXIgPSBzZWxmLmZvcm1hdHRlcgogICAgICAgIGZvcm1hdHRlci5zdG9yZV9vcHRpb25fc3RyaW5ncyhzZWxmKQogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgcmVzdWx0LmFwcGVuZChmb3JtYXR0ZXIuZm9ybWF0X2hlYWRpbmcoXygiT3B0aW9ucyIpKSkKICAgICAgICBmb3JtYXR0ZXIuaW5kZW50KCkKICAgICAgICBpZiBzZWxmLm9wdGlvbl9saXN0OgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKE9wdGlvbkNvbnRhaW5lci5mb3JtYXRfb3B0aW9uX2hlbHAoc2VsZiwgZm9ybWF0dGVyKSkKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgiXG4iKQogICAgICAgIGZvciBncm91cCBpbiBzZWxmLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoZ3JvdXAuZm9ybWF0X2hlbHAoZm9ybWF0dGVyKSkKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgiXG4iKQogICAgICAgIGZvcm1hdHRlci5kZWRlbnQoKQogICAgICAgICMgRHJvcCB0aGUgbGFzdCAiXG4iLCBvciB0aGUgaGVhZGVyIGlmIG5vIG9wdGlvbnMgb3Igb3B0aW9uIGdyb3VwczoKICAgICAgICByZXR1cm4gIiIuam9pbihyZXN1bHRbOi0xXSkKCiAgICBkZWYgZm9ybWF0X2VwaWxvZyhzZWxmLCBmb3JtYXR0ZXIpOgogICAgICAgIHJldHVybiBmb3JtYXR0ZXIuZm9ybWF0X2VwaWxvZyhzZWxmLmVwaWxvZykKCiAgICBkZWYgZm9ybWF0X2hlbHAoc2VsZiwgZm9ybWF0dGVyPU5vbmUpOgogICAgICAgIGlmIGZvcm1hdHRlciBpcyBOb25lOgogICAgICAgICAgICBmb3JtYXR0ZXIgPSBzZWxmLmZvcm1hdHRlcgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaWYgc2VsZi51c2FnZToKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChzZWxmLmdldF91c2FnZSgpICsgIlxuIikKICAgICAgICBpZiBzZWxmLmRlc2NyaXB0aW9uOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKHNlbGYuZm9ybWF0X2Rlc2NyaXB0aW9uKGZvcm1hdHRlcikgKyAiXG4iKQogICAgICAgIHJlc3VsdC5hcHBlbmQoc2VsZi5mb3JtYXRfb3B0aW9uX2hlbHAoZm9ybWF0dGVyKSkKICAgICAgICByZXN1bHQuYXBwZW5kKHNlbGYuZm9ybWF0X2VwaWxvZyhmb3JtYXR0ZXIpKQogICAgICAgIHJldHVybiAiIi5qb2luKHJlc3VsdCkKCiAgICBkZWYgcHJpbnRfaGVscChzZWxmLCBmaWxlPU5vbmUpOgogICAgICAgICIiInByaW50X2hlbHAoZmlsZSA6IGZpbGUgPSBzdGRvdXQpCgogICAgICAgIFByaW50IGFuIGV4dGVuZGVkIGhlbHAgbWVzc2FnZSwgbGlzdGluZyBhbGwgb3B0aW9ucyBhbmQgYW55CiAgICAgICAgaGVscCB0ZXh0IHByb3ZpZGVkIHdpdGggdGhlbSwgdG8gJ2ZpbGUnIChkZWZhdWx0IHN0ZG91dCkuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZmlsZSBpcyBOb25lOgogICAgICAgICAgICBmaWxlID0gc3lzLnN0ZG91dAogICAgICAgIGZpbGUud3JpdGUoc2VsZi5mb3JtYXRfaGVscCgpKQoKIyBjbGFzcyBPcHRpb25QYXJzZXIKCgpkZWYgX21hdGNoX2FiYnJldihzLCB3b3JkbWFwKToKICAgICIiIl9tYXRjaF9hYmJyZXYocyA6IHN0cmluZywgd29yZG1hcCA6IHtzdHJpbmcgOiBPcHRpb259KSAtPiBzdHJpbmcKCiAgICBSZXR1cm4gdGhlIHN0cmluZyBrZXkgaW4gJ3dvcmRtYXAnIGZvciB3aGljaCAncycgaXMgYW4gdW5hbWJpZ3VvdXMKICAgIGFiYnJldmlhdGlvbi4gIElmICdzJyBpcyBmb3VuZCB0byBiZSBhbWJpZ3VvdXMgb3IgZG9lc24ndCBtYXRjaCBhbnkgb2YKICAgICd3b3JkcycsIHJhaXNlIEJhZE9wdGlvbkVycm9yLgogICAgIiIiCiAgICAjIElzIHRoZXJlIGFuIGV4YWN0IG1hdGNoPwogICAgaWYgcyBpbiB3b3JkbWFwOgogICAgICAgIHJldHVybiBzCiAgICBlbHNlOgogICAgICAgICMgSXNvbGF0ZSBhbGwgd29yZHMgd2l0aCBzIGFzIGEgcHJlZml4LgogICAgICAgIHBvc3NpYmlsaXRpZXMgPSBbd29yZCBmb3Igd29yZCBpbiB3b3JkbWFwLmtleXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgaWYgd29yZC5zdGFydHN3aXRoKHMpXQogICAgICAgICMgTm8gZXhhY3QgbWF0Y2gsIHNvIHRoZXJlIGhhZCBiZXR0ZXIgYmUganVzdCBvbmUgcG9zc2liaWxpdHkuCiAgICAgICAgaWYgbGVuKHBvc3NpYmlsaXRpZXMpID09IDE6CiAgICAgICAgICAgIHJldHVybiBwb3NzaWJpbGl0aWVzWzBdCiAgICAgICAgZWxpZiBub3QgcG9zc2liaWxpdGllczoKICAgICAgICAgICAgcmFpc2UgQmFkT3B0aW9uRXJyb3IocykKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIE1vcmUgdGhhbiBvbmUgcG9zc2libGUgY29tcGxldGlvbjogYW1iaWd1b3VzIHByZWZpeC4KICAgICAgICAgICAgcG9zc2liaWxpdGllcy5zb3J0KCkKICAgICAgICAgICAgcmFpc2UgQW1iaWd1b3VzT3B0aW9uRXJyb3IocywgcG9zc2liaWxpdGllcykKCgojIFNvbWUgZGF5LCB0aGVyZSBtaWdodCBiZSBtYW55IE9wdGlvbiBjbGFzc2VzLiAgQXMgb2YgT3B0aWsgMS4zLCB0aGUKIyBwcmVmZXJyZWQgd2F5IHRvIGluc3RhbnRpYXRlIE9wdGlvbnMgaXMgaW5kaXJlY3RseSwgdmlhIG1ha2Vfb3B0aW9uKCksCiMgd2hpY2ggd2lsbCBiZWNvbWUgYSBmYWN0b3J5IGZ1bmN0aW9uIHdoZW4gdGhlcmUgYXJlIG1hbnkgT3B0aW9uCiMgY2xhc3Nlcy4KbWFrZV9vcHRpb24gPSBPcHRpb24K',
'/Lib/tokenize.py':'IiIiVG9rZW5pemF0aW9uIGhlbHAgZm9yIFB5dGhvbiBwcm9ncmFtcy4KCnRva2VuaXplKHJlYWRsaW5lKSBpcyBhIGdlbmVyYXRvciB0aGF0IGJyZWFrcyBhIHN0cmVhbSBvZiBieXRlcyBpbnRvClB5dGhvbiB0b2tlbnMuICBJdCBkZWNvZGVzIHRoZSBieXRlcyBhY2NvcmRpbmcgdG8gUEVQLTAyNjMgZm9yCmRldGVybWluaW5nIHNvdXJjZSBmaWxlIGVuY29kaW5nLgoKSXQgYWNjZXB0cyBhIHJlYWRsaW5lLWxpa2UgbWV0aG9kIHdoaWNoIGlzIGNhbGxlZCByZXBlYXRlZGx5IHRvIGdldCB0aGUKbmV4dCBsaW5lIG9mIGlucHV0IChvciBiIiIgZm9yIEVPRikuICBJdCBnZW5lcmF0ZXMgNS10dXBsZXMgd2l0aCB0aGVzZQptZW1iZXJzOgoKICAgIHRoZSB0b2tlbiB0eXBlIChzZWUgdG9rZW4ucHkpCiAgICB0aGUgdG9rZW4gKGEgc3RyaW5nKQogICAgdGhlIHN0YXJ0aW5nIChyb3csIGNvbHVtbikgaW5kaWNlcyBvZiB0aGUgdG9rZW4gKGEgMi10dXBsZSBvZiBpbnRzKQogICAgdGhlIGVuZGluZyAocm93LCBjb2x1bW4pIGluZGljZXMgb2YgdGhlIHRva2VuIChhIDItdHVwbGUgb2YgaW50cykKICAgIHRoZSBvcmlnaW5hbCBsaW5lIChzdHJpbmcpCgpJdCBpcyBkZXNpZ25lZCB0byBtYXRjaCB0aGUgd29ya2luZyBvZiB0aGUgUHl0aG9uIHRva2VuaXplciBleGFjdGx5LCBleGNlcHQKdGhhdCBpdCBwcm9kdWNlcyBDT01NRU5UIHRva2VucyBmb3IgY29tbWVudHMgYW5kIGdpdmVzIHR5cGUgT1AgZm9yIGFsbApvcGVyYXRvcnMuICBBZGRpdGlvbmFsbHksIGFsbCB0b2tlbiBsaXN0cyBzdGFydCB3aXRoIGFuIEVOQ09ESU5HIHRva2VuCndoaWNoIHRlbGxzIHlvdSB3aGljaCBlbmNvZGluZyB3YXMgdXNlZCB0byBkZWNvZGUgdGhlIGJ5dGVzIHN0cmVhbS4KIiIiCgpfX2F1dGhvcl9fID0gJ0thLVBpbmcgWWVlIDxwaW5nQGxmdy5vcmc+JwpfX2NyZWRpdHNfXyA9ICgnR3ZSLCBFU1IsIFRpbSBQZXRlcnMsIFRob21hcyBXb3V0ZXJzLCBGcmVkIERyYWtlLCAnCiAgICAgICAgICAgICAgICdTa2lwIE1vbnRhbmFybywgUmF5bW9uZCBIZXR0aW5nZXIsIFRyZW50IE5lbHNvbiwgJwogICAgICAgICAgICAgICAnTWljaGFlbCBGb29yZCcpCgppbXBvcnQgYnVpbHRpbnMKaW1wb3J0IHJlCmltcG9ydCBzeXMKZnJvbSB0b2tlbiBpbXBvcnQgKgpmcm9tIGNvZGVjcyBpbXBvcnQgbG9va3VwLCBCT01fVVRGOAppbXBvcnQgY29sbGVjdGlvbnMKZnJvbSBpbyBpbXBvcnQgVGV4dElPV3JhcHBlcgpjb29raWVfcmUgPSByZS5jb21waWxlKCJjb2RpbmdbOj1dXHMqKFstXHcuXSspIikKCmltcG9ydCB0b2tlbgpfX2FsbF9fID0gdG9rZW4uX19hbGxfXyArIFsiQ09NTUVOVCIsICJ0b2tlbml6ZSIsICJkZXRlY3RfZW5jb2RpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAiTkwiLCAidW50b2tlbml6ZSIsICJFTkNPRElORyIsICJUb2tlbkluZm8iXQpkZWwgdG9rZW4KCkNPTU1FTlQgPSBOX1RPS0VOUwp0b2tfbmFtZVtDT01NRU5UXSA9ICdDT01NRU5UJwpOTCA9IE5fVE9LRU5TICsgMQp0b2tfbmFtZVtOTF0gPSAnTkwnCkVOQ09ESU5HID0gTl9UT0tFTlMgKyAyCnRva19uYW1lW0VOQ09ESU5HXSA9ICdFTkNPRElORycKTl9UT0tFTlMgKz0gMwpFWEFDVF9UT0tFTl9UWVBFUyA9IHsKICAgICcoJzogICBMUEFSLAogICAgJyknOiAgIFJQQVIsCiAgICAnWyc6ICAgTFNRQiwKICAgICddJzogICBSU1FCLAogICAgJzonOiAgIENPTE9OLAogICAgJywnOiAgIENPTU1BLAogICAgJzsnOiAgIFNFTUksCiAgICAnKyc6ICAgUExVUywKICAgICctJzogICBNSU5VUywKICAgICcqJzogICBTVEFSLAogICAgJy8nOiAgIFNMQVNILAogICAgJ3wnOiAgIFZCQVIsCiAgICAnJic6ICAgQU1QRVIsCiAgICAnPCc6ICAgTEVTUywKICAgICc+JzogICBHUkVBVEVSLAogICAgJz0nOiAgIEVRVUFMLAogICAgJy4nOiAgIERPVCwKICAgICclJzogICBQRVJDRU5ULAogICAgJ3snOiAgIExCUkFDRSwKICAgICd9JzogICBSQlJBQ0UsCiAgICAnPT0nOiAgRVFFUVVBTCwKICAgICchPSc6ICBOT1RFUVVBTCwKICAgICc8PSc6ICBMRVNTRVFVQUwsCiAgICAnPj0nOiAgR1JFQVRFUkVRVUFMLAogICAgJ34nOiAgIFRJTERFLAogICAgJ14nOiAgIENJUkNVTUZMRVgsCiAgICAnPDwnOiAgTEVGVFNISUZULAogICAgJz4+JzogIFJJR0hUU0hJRlQsCiAgICAnKionOiAgRE9VQkxFU1RBUiwKICAgICcrPSc6ICBQTFVTRVFVQUwsCiAgICAnLT0nOiAgTUlORVFVQUwsCiAgICAnKj0nOiAgU1RBUkVRVUFMLAogICAgJy89JzogIFNMQVNIRVFVQUwsCiAgICAnJT0nOiAgUEVSQ0VOVEVRVUFMLAogICAgJyY9JzogIEFNUEVSRVFVQUwsCiAgICAnfD0nOiAgVkJBUkVRVUFMLAogICAgJ149JzogQ0lSQ1VNRkxFWEVRVUFMLAogICAgJzw8PSc6IExFRlRTSElGVEVRVUFMLAogICAgJz4+PSc6IFJJR0hUU0hJRlRFUVVBTCwKICAgICcqKj0nOiBET1VCTEVTVEFSRVFVQUwsCiAgICAnLy8nOiAgRE9VQkxFU0xBU0gsCiAgICAnLy89JzogRE9VQkxFU0xBU0hFUVVBTCwKICAgICdAJzogICBBVAp9CgpjbGFzcyBUb2tlbkluZm8oY29sbGVjdGlvbnMubmFtZWR0dXBsZSgnVG9rZW5JbmZvJywgJ3R5cGUgc3RyaW5nIHN0YXJ0IGVuZCBsaW5lJykpOgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIGFubm90YXRlZF90eXBlID0gJyVkICglcyknICUgKHNlbGYudHlwZSwgdG9rX25hbWVbc2VsZi50eXBlXSkKICAgICAgICByZXR1cm4gKCdUb2tlbkluZm8odHlwZT0lcywgc3RyaW5nPSVyLCBzdGFydD0lciwgZW5kPSVyLCBsaW5lPSVyKScgJQogICAgICAgICAgICAgICAgc2VsZi5fcmVwbGFjZSh0eXBlPWFubm90YXRlZF90eXBlKSkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBleGFjdF90eXBlKHNlbGYpOgogICAgICAgIGlmIHNlbGYudHlwZSA9PSBPUCBhbmQgc2VsZi5zdHJpbmcgaW4gRVhBQ1RfVE9LRU5fVFlQRVM6CiAgICAgICAgICAgIHJldHVybiBFWEFDVF9UT0tFTl9UWVBFU1tzZWxmLnN0cmluZ10KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2VsZi50eXBlCgpkZWYgZ3JvdXAoKmNob2ljZXMpOiByZXR1cm4gJygnICsgJ3wnLmpvaW4oY2hvaWNlcykgKyAnKScKZGVmIGFueSgqY2hvaWNlcyk6IHJldHVybiBncm91cCgqY2hvaWNlcykgKyAnKicKZGVmIG1heWJlKCpjaG9pY2VzKTogcmV0dXJuIGdyb3VwKCpjaG9pY2VzKSArICc/JwoKIyBOb3RlOiB3ZSB1c2UgdW5pY29kZSBtYXRjaGluZyBmb3IgbmFtZXMgKCJcdyIpIGJ1dCBhc2NpaSBtYXRjaGluZyBmb3IKIyBudW1iZXIgbGl0ZXJhbHMuCldoaXRlc3BhY2UgPSByJ1sgXGZcdF0qJwpDb21tZW50ID0gcicjW15cclxuXSonCklnbm9yZSA9IFdoaXRlc3BhY2UgKyBhbnkocidcXFxyP1xuJyArIFdoaXRlc3BhY2UpICsgbWF5YmUoQ29tbWVudCkKTmFtZSA9IHInXHcrJwoKSGV4bnVtYmVyID0gcicwW3hYXVswLTlhLWZBLUZdKycKQmlubnVtYmVyID0gcicwW2JCXVswMV0rJwpPY3RudW1iZXIgPSByJzBbb09dWzAtN10rJwpEZWNudW1iZXIgPSByJyg/OjArfFsxLTldWzAtOV0qKScKSW50bnVtYmVyID0gZ3JvdXAoSGV4bnVtYmVyLCBCaW5udW1iZXIsIE9jdG51bWJlciwgRGVjbnVtYmVyKQpFeHBvbmVudCA9IHInW2VFXVstK10/WzAtOV0rJwpQb2ludGZsb2F0ID0gZ3JvdXAocidbMC05XStcLlswLTldKicsIHInXC5bMC05XSsnKSArIG1heWJlKEV4cG9uZW50KQpFeHBmbG9hdCA9IHInWzAtOV0rJyArIEV4cG9uZW50CkZsb2F0bnVtYmVyID0gZ3JvdXAoUG9pbnRmbG9hdCwgRXhwZmxvYXQpCkltYWdudW1iZXIgPSBncm91cChyJ1swLTldK1tqSl0nLCBGbG9hdG51bWJlciArIHInW2pKXScpCk51bWJlciA9IGdyb3VwKEltYWdudW1iZXIsIEZsb2F0bnVtYmVyLCBJbnRudW1iZXIpCgpTdHJpbmdQcmVmaXggPSByJyg/OltiQl1bclJdP3xbclJdW2JCXT98W3VVXSk/JwoKIyBUYWlsIGVuZCBvZiAnIHN0cmluZy4KU2luZ2xlID0gciJbXidcXF0qKD86XFwuW14nXFxdKikqJyIKIyBUYWlsIGVuZCBvZiAiIHN0cmluZy4KRG91YmxlID0gcidbXiJcXF0qKD86XFwuW14iXFxdKikqIicKIyBUYWlsIGVuZCBvZiAnJycgc3RyaW5nLgpTaW5nbGUzID0gciJbXidcXF0qKD86KD86XFwufCcoPyEnJykpW14nXFxdKikqJycnIgojIFRhaWwgZW5kIG9mICIiIiBzdHJpbmcuCkRvdWJsZTMgPSByJ1teIlxcXSooPzooPzpcXC58Iig/ISIiKSlbXiJcXF0qKSoiIiInClRyaXBsZSA9IGdyb3VwKFN0cmluZ1ByZWZpeCArICInJyciLCBTdHJpbmdQcmVmaXggKyAnIiIiJykKIyBTaW5nbGUtbGluZSAnIG9yICIgc3RyaW5nLgpTdHJpbmcgPSBncm91cChTdHJpbmdQcmVmaXggKyByIidbXlxuJ1xcXSooPzpcXC5bXlxuJ1xcXSopKiciLAogICAgICAgICAgICAgICBTdHJpbmdQcmVmaXggKyByJyJbXlxuIlxcXSooPzpcXC5bXlxuIlxcXSopKiInKQoKIyBCZWNhdXNlIG9mIGxlZnRtb3N0LXRoZW4tbG9uZ2VzdCBtYXRjaCBzZW1hbnRpY3MsIGJlIHN1cmUgdG8gcHV0IHRoZQojIGxvbmdlc3Qgb3BlcmF0b3JzIGZpcnN0IChlLmcuLCBpZiA9IGNhbWUgYmVmb3JlID09LCA9PSB3b3VsZCBnZXQKIyByZWNvZ25pemVkIGFzIHR3byBpbnN0YW5jZXMgb2YgPSkuCk9wZXJhdG9yID0gZ3JvdXAociJcKlwqPT8iLCByIj4+PT8iLCByIjw8PT8iLCByIiE9IiwKICAgICAgICAgICAgICAgICByIi8vPT8iLCByIi0+IiwKICAgICAgICAgICAgICAgICByIlsrXC0qLyUmfF49PD5dPT8iLAogICAgICAgICAgICAgICAgIHIifiIpCgpCcmFja2V0ID0gJ1tdWygpe31dJwpTcGVjaWFsID0gZ3JvdXAocidccj9cbicsIHInXC5cLlwuJywgcidbOjsuLEBdJykKRnVubnkgPSBncm91cChPcGVyYXRvciwgQnJhY2tldCwgU3BlY2lhbCkKClBsYWluVG9rZW4gPSBncm91cChOdW1iZXIsIEZ1bm55LCBTdHJpbmcsIE5hbWUpClRva2VuID0gSWdub3JlICsgUGxhaW5Ub2tlbgoKIyBGaXJzdCAob3Igb25seSkgbGluZSBvZiAnIG9yICIgc3RyaW5nLgpDb250U3RyID0gZ3JvdXAoU3RyaW5nUHJlZml4ICsgciInW15cbidcXF0qKD86XFwuW15cbidcXF0qKSoiICsKICAgICAgICAgICAgICAgIGdyb3VwKCInIiwgcidcXFxyP1xuJyksCiAgICAgICAgICAgICAgICBTdHJpbmdQcmVmaXggKyByJyJbXlxuIlxcXSooPzpcXC5bXlxuIlxcXSopKicgKwogICAgICAgICAgICAgICAgZ3JvdXAoJyInLCByJ1xcXHI/XG4nKSkKUHNldWRvRXh0cmFzID0gZ3JvdXAocidcXFxyP1xuJywgQ29tbWVudCwgVHJpcGxlKQpQc2V1ZG9Ub2tlbiA9IFdoaXRlc3BhY2UgKyBncm91cChQc2V1ZG9FeHRyYXMsIE51bWJlciwgRnVubnksIENvbnRTdHIsIE5hbWUpCgpkZWYgX2NvbXBpbGUoZXhwcik6CiAgICByZXR1cm4gcmUuY29tcGlsZShleHByLCByZS5VTklDT0RFKQoKZW5kcGF0cyA9IHsiJyI6IFNpbmdsZSwgJyInOiBEb3VibGUsCiAgICAgICAgICAgIicnJyI6IFNpbmdsZTMsICciIiInOiBEb3VibGUzLAogICAgICAgICAgICJyJycnIjogU2luZ2xlMywgJ3IiIiInOiBEb3VibGUzLAogICAgICAgICAgICJiJycnIjogU2luZ2xlMywgJ2IiIiInOiBEb3VibGUzLAogICAgICAgICAgICJSJycnIjogU2luZ2xlMywgJ1IiIiInOiBEb3VibGUzLAogICAgICAgICAgICJCJycnIjogU2luZ2xlMywgJ0IiIiInOiBEb3VibGUzLAogICAgICAgICAgICJicicnJyI6IFNpbmdsZTMsICdiciIiIic6IERvdWJsZTMsCiAgICAgICAgICAgImJSJycnIjogU2luZ2xlMywgJ2JSIiIiJzogRG91YmxlMywKICAgICAgICAgICAiQnInJyciOiBTaW5nbGUzLCAnQnIiIiInOiBEb3VibGUzLAogICAgICAgICAgICJCUicnJyI6IFNpbmdsZTMsICdCUiIiIic6IERvdWJsZTMsCiAgICAgICAgICAgInJiJycnIjogU2luZ2xlMywgJ3JiIiIiJzogRG91YmxlMywKICAgICAgICAgICAiUmInJyciOiBTaW5nbGUzLCAnUmIiIiInOiBEb3VibGUzLAogICAgICAgICAgICJyQicnJyI6IFNpbmdsZTMsICdyQiIiIic6IERvdWJsZTMsCiAgICAgICAgICAgIlJCJycnIjogU2luZ2xlMywgJ1JCIiIiJzogRG91YmxlMywKICAgICAgICAgICAidScnJyI6IFNpbmdsZTMsICd1IiIiJzogRG91YmxlMywKICAgICAgICAgICAiUicnJyI6IFNpbmdsZTMsICdSIiIiJzogRG91YmxlMywKICAgICAgICAgICAiVScnJyI6IFNpbmdsZTMsICdVIiIiJzogRG91YmxlMywKICAgICAgICAgICAncic6IE5vbmUsICdSJzogTm9uZSwgJ2InOiBOb25lLCAnQic6IE5vbmUsCiAgICAgICAgICAgJ3UnOiBOb25lLCAnVSc6IE5vbmV9Cgp0cmlwbGVfcXVvdGVkID0ge30KZm9yIHQgaW4gKCInJyciLCAnIiIiJywKICAgICAgICAgICJyJycnIiwgJ3IiIiInLCAiUicnJyIsICdSIiIiJywKICAgICAgICAgICJiJycnIiwgJ2IiIiInLCAiQicnJyIsICdCIiIiJywKICAgICAgICAgICJicicnJyIsICdiciIiIicsICJCcicnJyIsICdCciIiIicsCiAgICAgICAgICAiYlInJyciLCAnYlIiIiInLCAiQlInJyciLCAnQlIiIiInLAogICAgICAgICAgInJiJycnIiwgJ3JiIiIiJywgInJCJycnIiwgJ3JCIiIiJywKICAgICAgICAgICJSYicnJyIsICdSYiIiIicsICJSQicnJyIsICdSQiIiIicsCiAgICAgICAgICAidScnJyIsICd1IiIiJywgIlUnJyciLCAnVSIiIicsCiAgICAgICAgICApOgogICAgdHJpcGxlX3F1b3RlZFt0XSA9IHQKc2luZ2xlX3F1b3RlZCA9IHt9CmZvciB0IGluICgiJyIsICciJywKICAgICAgICAgICJyJyIsICdyIicsICJSJyIsICdSIicsCiAgICAgICAgICAiYiciLCAnYiInLCAiQiciLCAnQiInLAogICAgICAgICAgImJyJyIsICdiciInLCAiQnInIiwgJ0JyIicsCiAgICAgICAgICAiYlInIiwgJ2JSIicsICJCUiciLCAnQlIiJyAsCiAgICAgICAgICAicmInIiwgJ3JiIicsICJyQiciLCAnckIiJywKICAgICAgICAgICJSYiciLCAnUmIiJywgIlJCJyIsICdSQiInICwKICAgICAgICAgICJ1JyIsICd1IicsICJVJyIsICdVIicsCiAgICAgICAgICApOgogICAgc2luZ2xlX3F1b3RlZFt0XSA9IHQKCnRhYnNpemUgPSA4CgpjbGFzcyBUb2tlbkVycm9yKEV4Y2VwdGlvbik6IHBhc3MKCmNsYXNzIFN0b3BUb2tlbml6aW5nKEV4Y2VwdGlvbik6IHBhc3MKCgpjbGFzcyBVbnRva2VuaXplcjoKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi50b2tlbnMgPSBbXQogICAgICAgIHNlbGYucHJldl9yb3cgPSAxCiAgICAgICAgc2VsZi5wcmV2X2NvbCA9IDAKICAgICAgICBzZWxmLmVuY29kaW5nID0gTm9uZQoKICAgIGRlZiBhZGRfd2hpdGVzcGFjZShzZWxmLCBzdGFydCk6CiAgICAgICAgcm93LCBjb2wgPSBzdGFydAogICAgICAgIGFzc2VydCByb3cgPD0gc2VsZi5wcmV2X3JvdwogICAgICAgIGNvbF9vZmZzZXQgPSBjb2wgLSBzZWxmLnByZXZfY29sCiAgICAgICAgaWYgY29sX29mZnNldDoKICAgICAgICAgICAgc2VsZi50b2tlbnMuYXBwZW5kKCIgIiAqIGNvbF9vZmZzZXQpCgogICAgZGVmIHVudG9rZW5pemUoc2VsZiwgaXRlcmFibGUpOgogICAgICAgIGZvciB0IGluIGl0ZXJhYmxlOgogICAgICAgICAgICBpZiBsZW4odCkgPT0gMjoKICAgICAgICAgICAgICAgIHNlbGYuY29tcGF0KHQsIGl0ZXJhYmxlKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgdG9rX3R5cGUsIHRva2VuLCBzdGFydCwgZW5kLCBsaW5lID0gdAogICAgICAgICAgICBpZiB0b2tfdHlwZSA9PSBFTkNPRElORzoKICAgICAgICAgICAgICAgIHNlbGYuZW5jb2RpbmcgPSB0b2tlbgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgc2VsZi5hZGRfd2hpdGVzcGFjZShzdGFydCkKICAgICAgICAgICAgc2VsZi50b2tlbnMuYXBwZW5kKHRva2VuKQogICAgICAgICAgICBzZWxmLnByZXZfcm93LCBzZWxmLnByZXZfY29sID0gZW5kCiAgICAgICAgICAgIGlmIHRva190eXBlIGluIChORVdMSU5FLCBOTCk6CiAgICAgICAgICAgICAgICBzZWxmLnByZXZfcm93ICs9IDEKICAgICAgICAgICAgICAgIHNlbGYucHJldl9jb2wgPSAwCiAgICAgICAgcmV0dXJuICIiLmpvaW4oc2VsZi50b2tlbnMpCgogICAgZGVmIGNvbXBhdChzZWxmLCB0b2tlbiwgaXRlcmFibGUpOgogICAgICAgIHN0YXJ0bGluZSA9IEZhbHNlCiAgICAgICAgaW5kZW50cyA9IFtdCiAgICAgICAgdG9rc19hcHBlbmQgPSBzZWxmLnRva2Vucy5hcHBlbmQKICAgICAgICB0b2tudW0sIHRva3ZhbCA9IHRva2VuCgogICAgICAgIGlmIHRva251bSBpbiAoTkFNRSwgTlVNQkVSKToKICAgICAgICAgICAgdG9rdmFsICs9ICcgJwogICAgICAgIGlmIHRva251bSBpbiAoTkVXTElORSwgTkwpOgogICAgICAgICAgICBzdGFydGxpbmUgPSBUcnVlCiAgICAgICAgcHJldnN0cmluZyA9IEZhbHNlCiAgICAgICAgZm9yIHRvayBpbiBpdGVyYWJsZToKICAgICAgICAgICAgdG9rbnVtLCB0b2t2YWwgPSB0b2tbOjJdCiAgICAgICAgICAgIGlmIHRva251bSA9PSBFTkNPRElORzoKICAgICAgICAgICAgICAgIHNlbGYuZW5jb2RpbmcgPSB0b2t2YWwKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICBpZiB0b2tudW0gaW4gKE5BTUUsIE5VTUJFUik6CiAgICAgICAgICAgICAgICB0b2t2YWwgKz0gJyAnCgogICAgICAgICAgICAjIEluc2VydCBhIHNwYWNlIGJldHdlZW4gdHdvIGNvbnNlY3V0aXZlIHN0cmluZ3MKICAgICAgICAgICAgaWYgdG9rbnVtID09IFNUUklORzoKICAgICAgICAgICAgICAgIGlmIHByZXZzdHJpbmc6CiAgICAgICAgICAgICAgICAgICAgdG9rdmFsID0gJyAnICsgdG9rdmFsCiAgICAgICAgICAgICAgICBwcmV2c3RyaW5nID0gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJldnN0cmluZyA9IEZhbHNlCgogICAgICAgICAgICBpZiB0b2tudW0gPT0gSU5ERU5UOgogICAgICAgICAgICAgICAgaW5kZW50cy5hcHBlbmQodG9rdmFsKQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiB0b2tudW0gPT0gREVERU5UOgogICAgICAgICAgICAgICAgaW5kZW50cy5wb3AoKQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiB0b2tudW0gaW4gKE5FV0xJTkUsIE5MKToKICAgICAgICAgICAgICAgIHN0YXJ0bGluZSA9IFRydWUKICAgICAgICAgICAgZWxpZiBzdGFydGxpbmUgYW5kIGluZGVudHM6CiAgICAgICAgICAgICAgICB0b2tzX2FwcGVuZChpbmRlbnRzWy0xXSkKICAgICAgICAgICAgICAgIHN0YXJ0bGluZSA9IEZhbHNlCiAgICAgICAgICAgIHRva3NfYXBwZW5kKHRva3ZhbCkKCgpkZWYgdW50b2tlbml6ZShpdGVyYWJsZSk6CiAgICAiIiJUcmFuc2Zvcm0gdG9rZW5zIGJhY2sgaW50byBQeXRob24gc291cmNlIGNvZGUuCiAgICBJdCByZXR1cm5zIGEgYnl0ZXMgb2JqZWN0LCBlbmNvZGVkIHVzaW5nIHRoZSBFTkNPRElORwogICAgdG9rZW4sIHdoaWNoIGlzIHRoZSBmaXJzdCB0b2tlbiBzZXF1ZW5jZSBvdXRwdXQgYnkgdG9rZW5pemUuCgogICAgRWFjaCBlbGVtZW50IHJldHVybmVkIGJ5IHRoZSBpdGVyYWJsZSBtdXN0IGJlIGEgdG9rZW4gc2VxdWVuY2UKICAgIHdpdGggYXQgbGVhc3QgdHdvIGVsZW1lbnRzLCBhIHRva2VuIG51bWJlciBhbmQgdG9rZW4gdmFsdWUuICBJZgogICAgb25seSB0d28gdG9rZW5zIGFyZSBwYXNzZWQsIHRoZSByZXN1bHRpbmcgb3V0cHV0IGlzIHBvb3IuCgogICAgUm91bmQtdHJpcCBpbnZhcmlhbnQgZm9yIGZ1bGwgaW5wdXQ6CiAgICAgICAgVW50b2tlbml6ZWQgc291cmNlIHdpbGwgbWF0Y2ggaW5wdXQgc291cmNlIGV4YWN0bHkKCiAgICBSb3VuZC10cmlwIGludmFyaWFudCBmb3IgbGltaXRlZCBpbnRwdXQ6CiAgICAgICAgIyBPdXRwdXQgYnl0ZXMgd2lsbCB0b2tlbml6ZSB0aGUgYmFjayB0byB0aGUgaW5wdXQKICAgICAgICB0MSA9IFt0b2tbOjJdIGZvciB0b2sgaW4gdG9rZW5pemUoZi5yZWFkbGluZSldCiAgICAgICAgbmV3Y29kZSA9IHVudG9rZW5pemUodDEpCiAgICAgICAgcmVhZGxpbmUgPSBCeXRlc0lPKG5ld2NvZGUpLnJlYWRsaW5lCiAgICAgICAgdDIgPSBbdG9rWzoyXSBmb3IgdG9rIGluIHRva2VuaXplKHJlYWRsaW5lKV0KICAgICAgICBhc3NlcnQgdDEgPT0gdDIKICAgICIiIgogICAgdXQgPSBVbnRva2VuaXplcigpCiAgICBvdXQgPSB1dC51bnRva2VuaXplKGl0ZXJhYmxlKQogICAgaWYgdXQuZW5jb2RpbmcgaXMgbm90IE5vbmU6CiAgICAgICAgb3V0ID0gb3V0LmVuY29kZSh1dC5lbmNvZGluZykKICAgIHJldHVybiBvdXQKCgpkZWYgX2dldF9ub3JtYWxfbmFtZShvcmlnX2VuYyk6CiAgICAiIiJJbWl0YXRlcyBnZXRfbm9ybWFsX25hbWUgaW4gdG9rZW5pemVyLmMuIiIiCiAgICAjIE9ubHkgY2FyZSBhYm91dCB0aGUgZmlyc3QgMTIgY2hhcmFjdGVycy4KICAgIGVuYyA9IG9yaWdfZW5jWzoxMl0ubG93ZXIoKS5yZXBsYWNlKCJfIiwgIi0iKQogICAgaWYgZW5jID09ICJ1dGYtOCIgb3IgZW5jLnN0YXJ0c3dpdGgoInV0Zi04LSIpOgogICAgICAgIHJldHVybiAidXRmLTgiCiAgICBpZiBlbmMgaW4gKCJsYXRpbi0xIiwgImlzby04ODU5LTEiLCAiaXNvLWxhdGluLTEiKSBvciBcCiAgICAgICBlbmMuc3RhcnRzd2l0aCgoImxhdGluLTEtIiwgImlzby04ODU5LTEtIiwgImlzby1sYXRpbi0xLSIpKToKICAgICAgICByZXR1cm4gImlzby04ODU5LTEiCiAgICByZXR1cm4gb3JpZ19lbmMKCmRlZiBkZXRlY3RfZW5jb2RpbmcocmVhZGxpbmUpOgogICAgIiIiCiAgICBUaGUgZGV0ZWN0X2VuY29kaW5nKCkgZnVuY3Rpb24gaXMgdXNlZCB0byBkZXRlY3QgdGhlIGVuY29kaW5nIHRoYXQgc2hvdWxkCiAgICBiZSB1c2VkIHRvIGRlY29kZSBhIFB5dGhvbiBzb3VyY2UgZmlsZS4gIEl0IHJlcXVpcmVzIG9uZSBhcmdtZW50LCByZWFkbGluZSwKICAgIGluIHRoZSBzYW1lIHdheSBhcyB0aGUgdG9rZW5pemUoKSBnZW5lcmF0b3IuCgogICAgSXQgd2lsbCBjYWxsIHJlYWRsaW5lIGEgbWF4aW11bSBvZiB0d2ljZSwgYW5kIHJldHVybiB0aGUgZW5jb2RpbmcgdXNlZAogICAgKGFzIGEgc3RyaW5nKSBhbmQgYSBsaXN0IG9mIGFueSBsaW5lcyAobGVmdCBhcyBieXRlcykgaXQgaGFzIHJlYWQgaW4uCgogICAgSXQgZGV0ZWN0cyB0aGUgZW5jb2RpbmcgZnJvbSB0aGUgcHJlc2VuY2Ugb2YgYSB1dGYtOCBib20gb3IgYW4gZW5jb2RpbmcKICAgIGNvb2tpZSBhcyBzcGVjaWZpZWQgaW4gcGVwLTAyNjMuICBJZiBib3RoIGEgYm9tIGFuZCBhIGNvb2tpZSBhcmUgcHJlc2VudCwKICAgIGJ1dCBkaXNhZ3JlZSwgYSBTeW50YXhFcnJvciB3aWxsIGJlIHJhaXNlZC4gIElmIHRoZSBlbmNvZGluZyBjb29raWUgaXMgYW4KICAgIGludmFsaWQgY2hhcnNldCwgcmFpc2UgYSBTeW50YXhFcnJvci4gIE5vdGUgdGhhdCBpZiBhIHV0Zi04IGJvbSBpcyBmb3VuZCwKICAgICd1dGYtOC1zaWcnIGlzIHJldHVybmVkLgoKICAgIElmIG5vIGVuY29kaW5nIGlzIHNwZWNpZmllZCwgdGhlbiB0aGUgZGVmYXVsdCBvZiAndXRmLTgnIHdpbGwgYmUgcmV0dXJuZWQuCiAgICAiIiIKICAgIHRyeToKICAgICAgICBmaWxlbmFtZSA9IHJlYWRsaW5lLl9fc2VsZl9fLm5hbWUKICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICBmaWxlbmFtZSA9IE5vbmUKICAgIGJvbV9mb3VuZCA9IEZhbHNlCiAgICBlbmNvZGluZyA9IE5vbmUKICAgIGRlZmF1bHQgPSAndXRmLTgnCiAgICBkZWYgcmVhZF9vcl9zdG9wKCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gcmVhZGxpbmUoKQogICAgICAgIGV4Y2VwdCBTdG9wSXRlcmF0aW9uOgogICAgICAgICAgICByZXR1cm4gYicnCgogICAgZGVmIGZpbmRfY29va2llKGxpbmUpOgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBEZWNvZGUgYXMgVVRGLTguIEVpdGhlciB0aGUgbGluZSBpcyBhbiBlbmNvZGluZyBkZWNsYXJhdGlvbiwKICAgICAgICAgICAgIyBpbiB3aGljaCBjYXNlIGl0IHNob3VsZCBiZSBwdXJlIEFTQ0lJLCBvciBpdCBtdXN0IGJlIFVURi04CiAgICAgICAgICAgICMgcGVyIGRlZmF1bHQgZW5jb2RpbmcuCiAgICAgICAgICAgIGxpbmVfc3RyaW5nID0gbGluZS5kZWNvZGUoJ3V0Zi04JykKICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yOgogICAgICAgICAgICBtc2cgPSAiaW52YWxpZCBvciBtaXNzaW5nIGVuY29kaW5nIGRlY2xhcmF0aW9uIgogICAgICAgICAgICBpZiBmaWxlbmFtZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIG1zZyA9ICd7fSBmb3IgeyFyfScuZm9ybWF0KG1zZywgZmlsZW5hbWUpCiAgICAgICAgICAgIHJhaXNlIFN5bnRheEVycm9yKG1zZykKCiAgICAgICAgbWF0Y2hlcyA9IGNvb2tpZV9yZS5maW5kYWxsKGxpbmVfc3RyaW5nKQogICAgICAgIGlmIG5vdCBtYXRjaGVzOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGVuY29kaW5nID0gX2dldF9ub3JtYWxfbmFtZShtYXRjaGVzWzBdKQogICAgICAgIHRyeToKICAgICAgICAgICAgY29kZWMgPSBsb29rdXAoZW5jb2RpbmcpCiAgICAgICAgZXhjZXB0IExvb2t1cEVycm9yOgogICAgICAgICAgICAjIFRoaXMgYmVoYXZpb3VyIG1pbWljcyB0aGUgUHl0aG9uIGludGVycHJldGVyCiAgICAgICAgICAgIGlmIGZpbGVuYW1lIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBtc2cgPSAidW5rbm93biBlbmNvZGluZzogIiArIGVuY29kaW5nCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBtc2cgPSAidW5rbm93biBlbmNvZGluZyBmb3IgeyFyfToge30iLmZvcm1hdChmaWxlbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2RpbmcpCiAgICAgICAgICAgIHJhaXNlIFN5bnRheEVycm9yKG1zZykKCiAgICAgICAgaWYgYm9tX2ZvdW5kOgogICAgICAgICAgICBpZiBlbmNvZGluZyAhPSAndXRmLTgnOgogICAgICAgICAgICAgICAgIyBUaGlzIGJlaGF2aW91ciBtaW1pY3MgdGhlIFB5dGhvbiBpbnRlcnByZXRlcgogICAgICAgICAgICAgICAgaWYgZmlsZW5hbWUgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBtc2cgPSAnZW5jb2RpbmcgcHJvYmxlbTogdXRmLTgnCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG1zZyA9ICdlbmNvZGluZyBwcm9ibGVtIGZvciB7IXJ9OiB1dGYtOCcuZm9ybWF0KGZpbGVuYW1lKQogICAgICAgICAgICAgICAgcmFpc2UgU3ludGF4RXJyb3IobXNnKQogICAgICAgICAgICBlbmNvZGluZyArPSAnLXNpZycKICAgICAgICByZXR1cm4gZW5jb2RpbmcKCiAgICBmaXJzdCA9IHJlYWRfb3Jfc3RvcCgpCiAgICBpZiBmaXJzdC5zdGFydHN3aXRoKEJPTV9VVEY4KToKICAgICAgICBib21fZm91bmQgPSBUcnVlCiAgICAgICAgZmlyc3QgPSBmaXJzdFszOl0KICAgICAgICBkZWZhdWx0ID0gJ3V0Zi04LXNpZycKICAgIGlmIG5vdCBmaXJzdDoKICAgICAgICByZXR1cm4gZGVmYXVsdCwgW10KCiAgICBlbmNvZGluZyA9IGZpbmRfY29va2llKGZpcnN0KQogICAgaWYgZW5jb2Rpbmc6CiAgICAgICAgcmV0dXJuIGVuY29kaW5nLCBbZmlyc3RdCgogICAgc2Vjb25kID0gcmVhZF9vcl9zdG9wKCkKICAgIGlmIG5vdCBzZWNvbmQ6CiAgICAgICAgcmV0dXJuIGRlZmF1bHQsIFtmaXJzdF0KCiAgICBlbmNvZGluZyA9IGZpbmRfY29va2llKHNlY29uZCkKICAgIGlmIGVuY29kaW5nOgogICAgICAgIHJldHVybiBlbmNvZGluZywgW2ZpcnN0LCBzZWNvbmRdCgogICAgcmV0dXJuIGRlZmF1bHQsIFtmaXJzdCwgc2Vjb25kXQoKCmRlZiBvcGVuKGZpbGVuYW1lKToKICAgICIiIk9wZW4gYSBmaWxlIGluIHJlYWQgb25seSBtb2RlIHVzaW5nIHRoZSBlbmNvZGluZyBkZXRlY3RlZCBieQogICAgZGV0ZWN0X2VuY29kaW5nKCkuCiAgICAiIiIKICAgIGJ1ZmZlciA9IGJ1aWx0aW5zLm9wZW4oZmlsZW5hbWUsICdyYicpCiAgICBlbmNvZGluZywgbGluZXMgPSBkZXRlY3RfZW5jb2RpbmcoYnVmZmVyLnJlYWRsaW5lKQogICAgYnVmZmVyLnNlZWsoMCkKICAgIHRleHQgPSBUZXh0SU9XcmFwcGVyKGJ1ZmZlciwgZW5jb2RpbmcsIGxpbmVfYnVmZmVyaW5nPVRydWUpCiAgICB0ZXh0Lm1vZGUgPSAncicKICAgIHJldHVybiB0ZXh0CgoKZGVmIHRva2VuaXplKHJlYWRsaW5lKToKICAgICIiIgogICAgVGhlIHRva2VuaXplKCkgZ2VuZXJhdG9yIHJlcXVpcmVzIG9uZSBhcmdtZW50LCByZWFkbGluZSwgd2hpY2gKICAgIG11c3QgYmUgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcHJvdmlkZXMgdGhlIHNhbWUgaW50ZXJmYWNlIGFzIHRoZQogICAgcmVhZGxpbmUoKSBtZXRob2Qgb2YgYnVpbHQtaW4gZmlsZSBvYmplY3RzLiAgRWFjaCBjYWxsIHRvIHRoZSBmdW5jdGlvbgogICAgc2hvdWxkIHJldHVybiBvbmUgbGluZSBvZiBpbnB1dCBhcyBieXRlcy4gIEFsdGVybmF0ZWx5LCByZWFkbGluZQogICAgY2FuIGJlIGEgY2FsbGFibGUgZnVuY3Rpb24gdGVybWluYXRpbmcgd2l0aCBTdG9wSXRlcmF0aW9uOgogICAgICAgIHJlYWRsaW5lID0gb3BlbihteWZpbGUsICdyYicpLl9fbmV4dF9fICAjIEV4YW1wbGUgb2YgYWx0ZXJuYXRlIHJlYWRsaW5lCgogICAgVGhlIGdlbmVyYXRvciBwcm9kdWNlcyA1LXR1cGxlcyB3aXRoIHRoZXNlIG1lbWJlcnM6IHRoZSB0b2tlbiB0eXBlOyB0aGUKICAgIHRva2VuIHN0cmluZzsgYSAyLXR1cGxlIChzcm93LCBzY29sKSBvZiBpbnRzIHNwZWNpZnlpbmcgdGhlIHJvdyBhbmQKICAgIGNvbHVtbiB3aGVyZSB0aGUgdG9rZW4gYmVnaW5zIGluIHRoZSBzb3VyY2U7IGEgMi10dXBsZSAoZXJvdywgZWNvbCkgb2YKICAgIGludHMgc3BlY2lmeWluZyB0aGUgcm93IGFuZCBjb2x1bW4gd2hlcmUgdGhlIHRva2VuIGVuZHMgaW4gdGhlIHNvdXJjZTsKICAgIGFuZCB0aGUgbGluZSBvbiB3aGljaCB0aGUgdG9rZW4gd2FzIGZvdW5kLiAgVGhlIGxpbmUgcGFzc2VkIGlzIHRoZQogICAgbG9naWNhbCBsaW5lOyBjb250aW51YXRpb24gbGluZXMgYXJlIGluY2x1ZGVkLgoKICAgIFRoZSBmaXJzdCB0b2tlbiBzZXF1ZW5jZSB3aWxsIGFsd2F5cyBiZSBhbiBFTkNPRElORyB0b2tlbgogICAgd2hpY2ggdGVsbHMgeW91IHdoaWNoIGVuY29kaW5nIHdhcyB1c2VkIHRvIGRlY29kZSB0aGUgYnl0ZXMgc3RyZWFtLgogICAgIiIiCiAgICAjIFRoaXMgaW1wb3J0IGlzIGhlcmUgdG8gYXZvaWQgcHJvYmxlbXMgd2hlbiB0aGUgaXRlcnRvb2xzIG1vZHVsZSBpcyBub3QKICAgICMgYnVpbHQgeWV0IGFuZCB0b2tlbml6ZSBpcyBpbXBvcnRlZC4KICAgIGZyb20gaXRlcnRvb2xzIGltcG9ydCBjaGFpbiwgcmVwZWF0CiAgICBlbmNvZGluZywgY29uc3VtZWQgPSBkZXRlY3RfZW5jb2RpbmcocmVhZGxpbmUpCiAgICBybF9nZW4gPSBpdGVyKHJlYWRsaW5lLCBiIiIpCiAgICBlbXB0eSA9IHJlcGVhdChiIiIpCiAgICByZXR1cm4gX3Rva2VuaXplKGNoYWluKGNvbnN1bWVkLCBybF9nZW4sIGVtcHR5KS5fX25leHRfXywgZW5jb2RpbmcpCgoKZGVmIF90b2tlbml6ZShyZWFkbGluZSwgZW5jb2RpbmcpOgogICAgbG51bSA9IHBhcmVubGV2ID0gY29udGludWVkID0gMAogICAgbnVtY2hhcnMgPSAnMDEyMzQ1Njc4OScKICAgIGNvbnRzdHIsIG5lZWRjb250ID0gJycsIDAKICAgIGNvbnRsaW5lID0gTm9uZQogICAgaW5kZW50cyA9IFswXQoKICAgIGlmIGVuY29kaW5nIGlzIG5vdCBOb25lOgogICAgICAgIGlmIGVuY29kaW5nID09ICJ1dGYtOC1zaWciOgogICAgICAgICAgICAjIEJPTSB3aWxsIGFscmVhZHkgaGF2ZSBiZWVuIHN0cmlwcGVkLgogICAgICAgICAgICBlbmNvZGluZyA9ICJ1dGYtOCIKICAgICAgICB5aWVsZCBUb2tlbkluZm8oRU5DT0RJTkcsIGVuY29kaW5nLCAoMCwgMCksICgwLCAwKSwgJycpCiAgICB3aGlsZSBUcnVlOiAgICAgICAgICAgICAjIGxvb3Agb3ZlciBsaW5lcyBpbiBzdHJlYW0KICAgICAgICB0cnk6CiAgICAgICAgICAgIGxpbmUgPSByZWFkbGluZSgpCiAgICAgICAgZXhjZXB0IFN0b3BJdGVyYXRpb246CiAgICAgICAgICAgIGxpbmUgPSBiJycKCiAgICAgICAgaWYgZW5jb2RpbmcgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGxpbmUgPSBsaW5lLmRlY29kZShlbmNvZGluZykKICAgICAgICBsbnVtICs9IDEKICAgICAgICBwb3MsIG1heCA9IDAsIGxlbihsaW5lKQoKICAgICAgICBpZiBjb250c3RyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGNvbnRpbnVlZCBzdHJpbmcKICAgICAgICAgICAgaWYgbm90IGxpbmU6CiAgICAgICAgICAgICAgICByYWlzZSBUb2tlbkVycm9yKCJFT0YgaW4gbXVsdGktbGluZSBzdHJpbmciLCBzdHJzdGFydCkKICAgICAgICAgICAgZW5kbWF0Y2ggPSBlbmRwcm9nLm1hdGNoKGxpbmUpCiAgICAgICAgICAgIGlmIGVuZG1hdGNoOgogICAgICAgICAgICAgICAgcG9zID0gZW5kID0gZW5kbWF0Y2guZW5kKDApCiAgICAgICAgICAgICAgICB5aWVsZCBUb2tlbkluZm8oU1RSSU5HLCBjb250c3RyICsgbGluZVs6ZW5kXSwKICAgICAgICAgICAgICAgICAgICAgICBzdHJzdGFydCwgKGxudW0sIGVuZCksIGNvbnRsaW5lICsgbGluZSkKICAgICAgICAgICAgICAgIGNvbnRzdHIsIG5lZWRjb250ID0gJycsIDAKICAgICAgICAgICAgICAgIGNvbnRsaW5lID0gTm9uZQogICAgICAgICAgICBlbGlmIG5lZWRjb250IGFuZCBsaW5lWy0yOl0gIT0gJ1xcXG4nIGFuZCBsaW5lWy0zOl0gIT0gJ1xcXHJcbic6CiAgICAgICAgICAgICAgICB5aWVsZCBUb2tlbkluZm8oRVJST1JUT0tFTiwgY29udHN0ciArIGxpbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnN0YXJ0LCAobG51bSwgbGVuKGxpbmUpKSwgY29udGxpbmUpCiAgICAgICAgICAgICAgICBjb250c3RyID0gJycKICAgICAgICAgICAgICAgIGNvbnRsaW5lID0gTm9uZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNvbnRzdHIgPSBjb250c3RyICsgbGluZQogICAgICAgICAgICAgICAgY29udGxpbmUgPSBjb250bGluZSArIGxpbmUKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGVsaWYgcGFyZW5sZXYgPT0gMCBhbmQgbm90IGNvbnRpbnVlZDogICMgbmV3IHN0YXRlbWVudAogICAgICAgICAgICBpZiBub3QgbGluZTogYnJlYWsKICAgICAgICAgICAgY29sdW1uID0gMAogICAgICAgICAgICB3aGlsZSBwb3MgPCBtYXg6ICAgICAgICAgICAgICAgICAgICMgbWVhc3VyZSBsZWFkaW5nIHdoaXRlc3BhY2UKICAgICAgICAgICAgICAgIGlmIGxpbmVbcG9zXSA9PSAnICc6CiAgICAgICAgICAgICAgICAgICAgY29sdW1uICs9IDEKICAgICAgICAgICAgICAgIGVsaWYgbGluZVtwb3NdID09ICdcdCc6CiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gKGNvbHVtbi8vdGFic2l6ZSArIDEpKnRhYnNpemUKICAgICAgICAgICAgICAgIGVsaWYgbGluZVtwb3NdID09ICdcZic6CiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gMAogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgcG9zICs9IDEKICAgICAgICAgICAgaWYgcG9zID09IG1heDoKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICBpZiBsaW5lW3Bvc10gaW4gJyNcclxuJzogICAgICAgICAgICMgc2tpcCBjb21tZW50cyBvciBibGFuayBsaW5lcwogICAgICAgICAgICAgICAgaWYgbGluZVtwb3NdID09ICcjJzoKICAgICAgICAgICAgICAgICAgICBjb21tZW50X3Rva2VuID0gbGluZVtwb3M6XS5yc3RyaXAoJ1xyXG4nKQogICAgICAgICAgICAgICAgICAgIG5sX3BvcyA9IHBvcyArIGxlbihjb21tZW50X3Rva2VuKQogICAgICAgICAgICAgICAgICAgIHlpZWxkIFRva2VuSW5mbyhDT01NRU5ULCBjb21tZW50X3Rva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAobG51bSwgcG9zKSwgKGxudW0sIHBvcyArIGxlbihjb21tZW50X3Rva2VuKSksIGxpbmUpCiAgICAgICAgICAgICAgICAgICAgeWllbGQgVG9rZW5JbmZvKE5MLCBsaW5lW25sX3BvczpdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAobG51bSwgbmxfcG9zKSwgKGxudW0sIGxlbihsaW5lKSksIGxpbmUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHlpZWxkIFRva2VuSW5mbygoTkwsIENPTU1FTlQpW2xpbmVbcG9zXSA9PSAnIyddLCBsaW5lW3BvczpdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAobG51bSwgcG9zKSwgKGxudW0sIGxlbihsaW5lKSksIGxpbmUpCiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgaWYgY29sdW1uID4gaW5kZW50c1stMV06ICAgICAgICAgICAjIGNvdW50IGluZGVudHMgb3IgZGVkZW50cwogICAgICAgICAgICAgICAgaW5kZW50cy5hcHBlbmQoY29sdW1uKQogICAgICAgICAgICAgICAgeWllbGQgVG9rZW5JbmZvKElOREVOVCwgbGluZVs6cG9zXSwgKGxudW0sIDApLCAobG51bSwgcG9zKSwgbGluZSkKICAgICAgICAgICAgd2hpbGUgY29sdW1uIDwgaW5kZW50c1stMV06CiAgICAgICAgICAgICAgICBpZiBjb2x1bW4gbm90IGluIGluZGVudHM6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgSW5kZW50YXRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgInVuaW5kZW50IGRvZXMgbm90IG1hdGNoIGFueSBvdXRlciBpbmRlbnRhdGlvbiBsZXZlbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICgiPHRva2VuaXplPiIsIGxudW0sIHBvcywgbGluZSkpCiAgICAgICAgICAgICAgICBpbmRlbnRzID0gaW5kZW50c1s6LTFdCiAgICAgICAgICAgICAgICB5aWVsZCBUb2tlbkluZm8oREVERU5ULCAnJywgKGxudW0sIHBvcyksIChsbnVtLCBwb3MpLCBsaW5lKQoKICAgICAgICBlbHNlOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGNvbnRpbnVlZCBzdGF0ZW1lbnQKICAgICAgICAgICAgaWYgbm90IGxpbmU6CiAgICAgICAgICAgICAgICByYWlzZSBUb2tlbkVycm9yKCJFT0YgaW4gbXVsdGktbGluZSBzdGF0ZW1lbnQiLCAobG51bSwgMCkpCiAgICAgICAgICAgIGNvbnRpbnVlZCA9IDAKCiAgICAgICAgd2hpbGUgcG9zIDwgbWF4OgogICAgICAgICAgICBwc2V1ZG9tYXRjaCA9IF9jb21waWxlKFBzZXVkb1Rva2VuKS5tYXRjaChsaW5lLCBwb3MpCiAgICAgICAgICAgIGlmIHBzZXVkb21hdGNoOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBzY2FuIGZvciB0b2tlbnMKICAgICAgICAgICAgICAgIHN0YXJ0LCBlbmQgPSBwc2V1ZG9tYXRjaC5zcGFuKDEpCiAgICAgICAgICAgICAgICBzcG9zLCBlcG9zLCBwb3MgPSAobG51bSwgc3RhcnQpLCAobG51bSwgZW5kKSwgZW5kCiAgICAgICAgICAgICAgICB0b2tlbiwgaW5pdGlhbCA9IGxpbmVbc3RhcnQ6ZW5kXSwgbGluZVtzdGFydF0KCiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbCBpbiBudW1jaGFycyBvciAgICAgICAgICAgICAgICAgICMgb3JkaW5hcnkgbnVtYmVyCiAgICAgICAgICAgICAgICAgICAgKGluaXRpYWwgPT0gJy4nIGFuZCB0b2tlbiAhPSAnLicgYW5kIHRva2VuICE9ICcuLi4nKSk6CiAgICAgICAgICAgICAgICAgICAgeWllbGQgVG9rZW5JbmZvKE5VTUJFUiwgdG9rZW4sIHNwb3MsIGVwb3MsIGxpbmUpCiAgICAgICAgICAgICAgICBlbGlmIGluaXRpYWwgaW4gJ1xyXG4nOgogICAgICAgICAgICAgICAgICAgIHlpZWxkIFRva2VuSW5mbyhOTCBpZiBwYXJlbmxldiA+IDAgZWxzZSBORVdMSU5FLAogICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiwgc3BvcywgZXBvcywgbGluZSkKICAgICAgICAgICAgICAgIGVsaWYgaW5pdGlhbCA9PSAnIyc6CiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0IG5vdCB0b2tlbi5lbmRzd2l0aCgiXG4iKQogICAgICAgICAgICAgICAgICAgIHlpZWxkIFRva2VuSW5mbyhDT01NRU5ULCB0b2tlbiwgc3BvcywgZXBvcywgbGluZSkKICAgICAgICAgICAgICAgIGVsaWYgdG9rZW4gaW4gdHJpcGxlX3F1b3RlZDoKICAgICAgICAgICAgICAgICAgICBlbmRwcm9nID0gX2NvbXBpbGUoZW5kcGF0c1t0b2tlbl0pCiAgICAgICAgICAgICAgICAgICAgZW5kbWF0Y2ggPSBlbmRwcm9nLm1hdGNoKGxpbmUsIHBvcykKICAgICAgICAgICAgICAgICAgICBpZiBlbmRtYXRjaDogICAgICAgICAgICAgICAgICAgICAgICAgICAjIGFsbCBvbiBvbmUgbGluZQogICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSBlbmRtYXRjaC5lbmQoMCkKICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBsaW5lW3N0YXJ0OnBvc10KICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgVG9rZW5JbmZvKFNUUklORywgdG9rZW4sIHNwb3MsIChsbnVtLCBwb3MpLCBsaW5lKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cnN0YXJ0ID0gKGxudW0sIHN0YXJ0KSAgICAgICAgICAgIyBtdWx0aXBsZSBsaW5lcwogICAgICAgICAgICAgICAgICAgICAgICBjb250c3RyID0gbGluZVtzdGFydDpdCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRsaW5lID0gbGluZQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBpbml0aWFsIGluIHNpbmdsZV9xdW90ZWQgb3IgXAogICAgICAgICAgICAgICAgICAgIHRva2VuWzoyXSBpbiBzaW5nbGVfcXVvdGVkIG9yIFwKICAgICAgICAgICAgICAgICAgICB0b2tlbls6M10gaW4gc2luZ2xlX3F1b3RlZDoKICAgICAgICAgICAgICAgICAgICBpZiB0b2tlblstMV0gPT0gJ1xuJzogICAgICAgICAgICAgICAgICAjIGNvbnRpbnVlZCBzdHJpbmcKICAgICAgICAgICAgICAgICAgICAgICAgc3Ryc3RhcnQgPSAobG51bSwgc3RhcnQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHByb2cgPSBfY29tcGlsZShlbmRwYXRzW2luaXRpYWxdIG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRwYXRzW3Rva2VuWzFdXSBvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcGF0c1t0b2tlblsyXV0pCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRzdHIsIG5lZWRjb250ID0gbGluZVtzdGFydDpdLCAxCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRsaW5lID0gbGluZQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgb3JkaW5hcnkgc3RyaW5nCiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIFRva2VuSW5mbyhTVFJJTkcsIHRva2VuLCBzcG9zLCBlcG9zLCBsaW5lKQogICAgICAgICAgICAgICAgZWxpZiBpbml0aWFsLmlzaWRlbnRpZmllcigpOiAgICAgICAgICAgICAgICMgb3JkaW5hcnkgbmFtZQogICAgICAgICAgICAgICAgICAgIHlpZWxkIFRva2VuSW5mbyhOQU1FLCB0b2tlbiwgc3BvcywgZXBvcywgbGluZSkKICAgICAgICAgICAgICAgIGVsaWYgaW5pdGlhbCA9PSAnXFwnOiAgICAgICAgICAgICAgICAgICAgICAjIGNvbnRpbnVlZCBzdG10CiAgICAgICAgICAgICAgICAgICAgY29udGludWVkID0gMQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBpbml0aWFsIGluICcoW3snOgogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbmxldiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxpZiBpbml0aWFsIGluICcpXX0nOgogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbmxldiAtPSAxCiAgICAgICAgICAgICAgICAgICAgeWllbGQgVG9rZW5JbmZvKE9QLCB0b2tlbiwgc3BvcywgZXBvcywgbGluZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHlpZWxkIFRva2VuSW5mbyhFUlJPUlRPS0VOLCBsaW5lW3Bvc10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIChsbnVtLCBwb3MpLCAobG51bSwgcG9zKzEpLCBsaW5lKQogICAgICAgICAgICAgICAgcG9zICs9IDEKCiAgICBmb3IgaW5kZW50IGluIGluZGVudHNbMTpdOiAgICAgICAgICAgICAgICAgIyBwb3AgcmVtYWluaW5nIGluZGVudCBsZXZlbHMKICAgICAgICB5aWVsZCBUb2tlbkluZm8oREVERU5ULCAnJywgKGxudW0sIDApLCAobG51bSwgMCksICcnKQogICAgeWllbGQgVG9rZW5JbmZvKEVORE1BUktFUiwgJycsIChsbnVtLCAwKSwgKGxudW0sIDApLCAnJykKCgojIEFuIHVuZG9jdW1lbnRlZCwgYmFja3dhcmRzIGNvbXBhdGlibGUsIEFQSSBmb3IgYWxsIHRoZSBwbGFjZXMgaW4gdGhlIHN0YW5kYXJkCiMgbGlicmFyeSB0aGF0IGV4cGVjdCB0byBiZSBhYmxlIHRvIHVzZSB0b2tlbml6ZSB3aXRoIHN0cmluZ3MKZGVmIGdlbmVyYXRlX3Rva2VucyhyZWFkbGluZSk6CiAgICByZXR1cm4gX3Rva2VuaXplKHJlYWRsaW5lLCBOb25lKQoKZGVmIG1haW4oKToKICAgIGltcG9ydCBhcmdwYXJzZQoKICAgICMgSGVscGVyIGVycm9yIGhhbmRsaW5nIHJvdXRpbmVzCiAgICBkZWYgcGVycm9yKG1lc3NhZ2UpOgogICAgICAgIHByaW50KG1lc3NhZ2UsIGZpbGU9c3lzLnN0ZGVycikKCiAgICBkZWYgZXJyb3IobWVzc2FnZSwgZmlsZW5hbWU9Tm9uZSwgbG9jYXRpb249Tm9uZSk6CiAgICAgICAgaWYgbG9jYXRpb246CiAgICAgICAgICAgIGFyZ3MgPSAoZmlsZW5hbWUsKSArIGxvY2F0aW9uICsgKG1lc3NhZ2UsKQogICAgICAgICAgICBwZXJyb3IoIiVzOiVkOiVkOiBlcnJvcjogJXMiICUgYXJncykKICAgICAgICBlbGlmIGZpbGVuYW1lOgogICAgICAgICAgICBwZXJyb3IoIiVzOiBlcnJvcjogJXMiICUgKGZpbGVuYW1lLCBtZXNzYWdlKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwZXJyb3IoImVycm9yOiAlcyIgJSBtZXNzYWdlKQogICAgICAgIHN5cy5leGl0KDEpCgogICAgIyBQYXJzZSB0aGUgYXJndW1lbnRzIGFuZCBvcHRpb25zCiAgICBwYXJzZXIgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcihwcm9nPSdweXRob24gLW0gdG9rZW5pemUnKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudChkZXN0PSdmaWxlbmFtZScsIG5hcmdzPSc/JywKICAgICAgICAgICAgICAgICAgICAgICAgbWV0YXZhcj0nZmlsZW5hbWUucHknLAogICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSd0aGUgZmlsZSB0byB0b2tlbml6ZTsgZGVmYXVsdHMgdG8gc3RkaW4nKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgnLWUnLCAnLS1leGFjdCcsIGRlc3Q9J2V4YWN0JywgYWN0aW9uPSdzdG9yZV90cnVlJywKICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nZGlzcGxheSB0b2tlbiBuYW1lcyB1c2luZyB0aGUgZXhhY3QgdHlwZScpCiAgICBhcmdzID0gcGFyc2VyLnBhcnNlX2FyZ3MoKQoKICAgIHRyeToKICAgICAgICAjIFRva2VuaXplIHRoZSBpbnB1dAogICAgICAgIGlmIGFyZ3MuZmlsZW5hbWU6CiAgICAgICAgICAgIGZpbGVuYW1lID0gYXJncy5maWxlbmFtZQogICAgICAgICAgICB3aXRoIGJ1aWx0aW5zLm9wZW4oZmlsZW5hbWUsICdyYicpIGFzIGY6CiAgICAgICAgICAgICAgICB0b2tlbnMgPSBsaXN0KHRva2VuaXplKGYucmVhZGxpbmUpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGZpbGVuYW1lID0gIjxzdGRpbj4iCiAgICAgICAgICAgIHRva2VucyA9IF90b2tlbml6ZShzeXMuc3RkaW4ucmVhZGxpbmUsIE5vbmUpCgogICAgICAgICMgT3V0cHV0IHRoZSB0b2tlbml6YXRpb24KICAgICAgICBmb3IgdG9rZW4gaW4gdG9rZW5zOgogICAgICAgICAgICB0b2tlbl90eXBlID0gdG9rZW4udHlwZQogICAgICAgICAgICBpZiBhcmdzLmV4YWN0OgogICAgICAgICAgICAgICAgdG9rZW5fdHlwZSA9IHRva2VuLmV4YWN0X3R5cGUKICAgICAgICAgICAgdG9rZW5fcmFuZ2UgPSAiJWQsJWQtJWQsJWQ6IiAlICh0b2tlbi5zdGFydCArIHRva2VuLmVuZCkKICAgICAgICAgICAgcHJpbnQoIiUtMjBzJS0xNXMlLTE1ciIgJQogICAgICAgICAgICAgICAgICAodG9rZW5fcmFuZ2UsIHRva19uYW1lW3Rva2VuX3R5cGVdLCB0b2tlbi5zdHJpbmcpKQogICAgZXhjZXB0IEluZGVudGF0aW9uRXJyb3IgYXMgZXJyOgogICAgICAgIGxpbmUsIGNvbHVtbiA9IGVyci5hcmdzWzFdWzE6M10KICAgICAgICBlcnJvcihlcnIuYXJnc1swXSwgZmlsZW5hbWUsIChsaW5lLCBjb2x1bW4pKQogICAgZXhjZXB0IFRva2VuRXJyb3IgYXMgZXJyOgogICAgICAgIGxpbmUsIGNvbHVtbiA9IGVyci5hcmdzWzFdCiAgICAgICAgZXJyb3IoZXJyLmFyZ3NbMF0sIGZpbGVuYW1lLCAobGluZSwgY29sdW1uKSkKICAgIGV4Y2VwdCBTeW50YXhFcnJvciBhcyBlcnI6CiAgICAgICAgZXJyb3IoZXJyLCBmaWxlbmFtZSkKICAgIGV4Y2VwdCBJT0Vycm9yIGFzIGVycjoKICAgICAgICBlcnJvcihlcnIpCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgcHJpbnQoImludGVycnVwdGVkXG4iKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgcGVycm9yKCJ1bmV4cGVjdGVkIGVycm9yOiAlcyIgJSBlcnIpCiAgICAgICAgcmFpc2UKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKCkK',
'/Lib/_codecs.py':'CmRlZiBhc2NpaV9kZWNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgYXNjaWlfZW5jb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGNoYXJidWZmZXJfZW5jb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGNoYXJtYXBfYnVpbGQoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgY2hhcm1hcF9kZWNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgY2hhcm1hcF9lbmNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZGVjb2RlKCphcmdzLCoqa3cpOgogICAgIiIiZGVjb2RlKG9iaiwgW2VuY29kaW5nWyxlcnJvcnNdXSkgLT4gb2JqZWN0ICAgIAogICAgRGVjb2RlcyBvYmogdXNpbmcgdGhlIGNvZGVjIHJlZ2lzdGVyZWQgZm9yIGVuY29kaW5nLiBlbmNvZGluZyBkZWZhdWx0cwogICAgdG8gdGhlIGRlZmF1bHQgZW5jb2RpbmcuIGVycm9ycyBtYXkgYmUgZ2l2ZW4gdG8gc2V0IGEgZGlmZmVyZW50IGVycm9yCiAgICBoYW5kbGluZyBzY2hlbWUuIERlZmF1bHQgaXMgJ3N0cmljdCcgbWVhbmluZyB0aGF0IGVuY29kaW5nIGVycm9ycyByYWlzZQogICAgYSBWYWx1ZUVycm9yLiBPdGhlciBwb3NzaWJsZSB2YWx1ZXMgYXJlICdpZ25vcmUnIGFuZCAncmVwbGFjZScKICAgIGFzIHdlbGwgYXMgYW55IG90aGVyIG5hbWUgcmVnaXN0ZXJlZCB3aXRoIGNvZGVjcy5yZWdpc3Rlcl9lcnJvciB0aGF0IGlzCiAgICBhYmxlIHRvIGhhbmRsZSBWYWx1ZUVycm9ycy4iIiIKICAgIHBhc3MKCmRlZiBlbmNvZGUoKmFyZ3MsKiprdyk6CiAgICAiIiJlbmNvZGUob2JqLCBbZW5jb2RpbmdbLGVycm9yc11dKSAtPiBvYmplY3QgICAgCiAgICBFbmNvZGVzIG9iaiB1c2luZyB0aGUgY29kZWMgcmVnaXN0ZXJlZCBmb3IgZW5jb2RpbmcuIGVuY29kaW5nIGRlZmF1bHRzCiAgICB0byB0aGUgZGVmYXVsdCBlbmNvZGluZy4gZXJyb3JzIG1heSBiZSBnaXZlbiB0byBzZXQgYSBkaWZmZXJlbnQgZXJyb3IKICAgIGhhbmRsaW5nIHNjaGVtZS4gRGVmYXVsdCBpcyAnc3RyaWN0JyBtZWFuaW5nIHRoYXQgZW5jb2RpbmcgZXJyb3JzIHJhaXNlCiAgICBhIFZhbHVlRXJyb3IuIE90aGVyIHBvc3NpYmxlIHZhbHVlcyBhcmUgJ2lnbm9yZScsICdyZXBsYWNlJyBhbmQKICAgICd4bWxjaGFycmVmcmVwbGFjZScgYXMgd2VsbCBhcyBhbnkgb3RoZXIgbmFtZSByZWdpc3RlcmVkIHdpdGgKICAgIGNvZGVjcy5yZWdpc3Rlcl9lcnJvciB0aGF0IGNhbiBoYW5kbGUgVmFsdWVFcnJvcnMuIiIiCiAgICBwYXNzCgpkZWYgZXNjYXBlX2RlY29kZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBlc2NhcGVfZW5jb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGxhdGluXzFfZGVjb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGxhdGluXzFfZW5jb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGxvb2t1cChlbmNvZGluZyk6CiAgICAiIiJsb29rdXAoZW5jb2RpbmcpIC0+IENvZGVjSW5mbyAgICAKICAgIExvb2tzIHVwIGEgY29kZWMgdHVwbGUgaW4gdGhlIFB5dGhvbiBjb2RlYyByZWdpc3RyeSBhbmQgcmV0dXJucwogICAgYSBDb2RlY0luZm8gb2JqZWN0LiIiIgogICAgcHJpbnQoJ19jb2RlY3MgbG9va3VwJyxlbmNvZGluZykKICAgIHJldHVybiBlbmNvZGluZwoKZGVmIGxvb2t1cF9lcnJvcigqYXJncywqKmt3KToKICAgICIiImxvb2t1cF9lcnJvcihlcnJvcnMpIC0+IGhhbmRsZXIgICAgCiAgICBSZXR1cm4gdGhlIGVycm9yIGhhbmRsZXIgZm9yIHRoZSBzcGVjaWZpZWQgZXJyb3IgaGFuZGxpbmcgbmFtZQogICAgb3IgcmFpc2UgYSBMb29rdXBFcnJvciwgaWYgbm8gaGFuZGxlciBleGlzdHMgdW5kZXIgdGhpcyBuYW1lLiIiIgogICAgcGFzcwoKZGVmIG1iY3NfZGVjb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIG1iY3NfZW5jb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHJhd191bmljb2RlX2VzY2FwZV9kZWNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgcmF3X3VuaWNvZGVfZXNjYXBlX2VuY29kZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiByZWFkYnVmZmVyX2VuY29kZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiByZWdpc3RlcigqYXJncywqKmt3KToKICAgICIiInJlZ2lzdGVyKHNlYXJjaF9mdW5jdGlvbikgICAgCiAgICBSZWdpc3RlciBhIGNvZGVjIHNlYXJjaCBmdW5jdGlvbi4gU2VhcmNoIGZ1bmN0aW9ucyBhcmUgZXhwZWN0ZWQgdG8gdGFrZQogICAgb25lIGFyZ3VtZW50LCB0aGUgZW5jb2RpbmcgbmFtZSBpbiBhbGwgbG93ZXIgY2FzZSBsZXR0ZXJzLCBhbmQgcmV0dXJuCiAgICBhIHR1cGxlIG9mIGZ1bmN0aW9ucyAoZW5jb2RlciwgZGVjb2Rlciwgc3RyZWFtX3JlYWRlciwgc3RyZWFtX3dyaXRlcikKICAgIChvciBhIENvZGVjSW5mbyBvYmplY3QpLiIiIgogICAgcGFzcwoKZGVmIHJlZ2lzdGVyX2Vycm9yKCphcmdzLCoqa3cpOgogICAgIiIicmVnaXN0ZXJfZXJyb3IoZXJyb3JzLCBoYW5kbGVyKSAgICAKICAgIFJlZ2lzdGVyIHRoZSBzcGVjaWZpZWQgZXJyb3IgaGFuZGxlciB1bmRlciB0aGUgbmFtZQogICAgZXJyb3JzLiBoYW5kbGVyIG11c3QgYmUgYSBjYWxsYWJsZSBvYmplY3QsIHRoYXQKICAgIHdpbGwgYmUgY2FsbGVkIHdpdGggYW4gZXhjZXB0aW9uIGluc3RhbmNlIGNvbnRhaW5pbmcKICAgIGluZm9ybWF0aW9uIGFib3V0IHRoZSBsb2NhdGlvbiBvZiB0aGUgZW5jb2RpbmcvZGVjb2RpbmcKICAgIGVycm9yIGFuZCBtdXN0IHJldHVybiBhIChyZXBsYWNlbWVudCwgbmV3IHBvc2l0aW9uKSB0dXBsZS4iIiIKICAgIHBhc3MKCmRlZiB1bmljb2RlX2VzY2FwZV9kZWNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdW5pY29kZV9lc2NhcGVfZW5jb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHVuaWNvZGVfaW50ZXJuYWxfZGVjb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHVuaWNvZGVfaW50ZXJuYWxfZW5jb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHV0Zl8xNl9iZV9kZWNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdXRmXzE2X2JlX2VuY29kZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB1dGZfMTZfZGVjb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHV0Zl8xNl9lbmNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdXRmXzE2X2V4X2RlY29kZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB1dGZfMTZfbGVfZGVjb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHV0Zl8xNl9sZV9lbmNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdXRmXzMyX2JlX2RlY29kZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB1dGZfMzJfYmVfZW5jb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHV0Zl8zMl9kZWNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdXRmXzMyX2VuY29kZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB1dGZfMzJfZXhfZGVjb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHV0Zl8zMl9sZV9kZWNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdXRmXzMyX2xlX2VuY29kZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB1dGZfN19kZWNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdXRmXzdfZW5jb2RlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHV0Zl84X2RlY29kZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB1dGZfOF9lbmNvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCg==',
'/Lib/_markupbase.py':'IiIiU2hhcmVkIHN1cHBvcnQgZm9yIHNjYW5uaW5nIGRvY3VtZW50IHR5cGUgZGVjbGFyYXRpb25zIGluIEhUTUwgYW5kIFhIVE1MLgoKVGhpcyBtb2R1bGUgaXMgdXNlZCBhcyBhIGZvdW5kYXRpb24gZm9yIHRoZSBodG1sLnBhcnNlciBtb2R1bGUuICBJdCBoYXMgbm8KZG9jdW1lbnRlZCBwdWJsaWMgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuCgoiIiIKCmltcG9ydCByZQoKX2RlY2xuYW1lX21hdGNoID0gcmUuY29tcGlsZShyJ1thLXpBLVpdWy1fLmEtekEtWjAtOV0qXHMqJykubWF0Y2gKX2RlY2xzdHJpbmdsaXRfbWF0Y2ggPSByZS5jb21waWxlKHInKFwnW15cJ10qXCd8IlteIl0qIilccyonKS5tYXRjaApfY29tbWVudGNsb3NlID0gcmUuY29tcGlsZShyJy0tXHMqPicpCl9tYXJrZWRzZWN0aW9uY2xvc2UgPSByZS5jb21waWxlKHInXVxzKl1ccyo+JykKCiMgQW4gYW5hbHlzaXMgb2YgdGhlIE1TLVdvcmQgZXh0ZW5zaW9ucyBpcyBhdmFpbGFibGUgYXQKIyBodHRwOi8vd3d3LnBsYW5ldHB1Ymxpc2guY29tL3htbGFyZW5hL3hhcC9UaHVyc2RheS9Xb3JkdG9YTUwucGRmCgpfbXNtYXJrZWRzZWN0aW9uY2xvc2UgPSByZS5jb21waWxlKHInXVxzKj4nKQoKZGVsIHJlCgoKY2xhc3MgUGFyc2VyQmFzZToKICAgICIiIlBhcnNlciBiYXNlIGNsYXNzIHdoaWNoIHByb3ZpZGVzIHNvbWUgY29tbW9uIHN1cHBvcnQgbWV0aG9kcyB1c2VkCiAgICBieSB0aGUgU0dNTC9IVE1MIGFuZCBYSFRNTCBwYXJzZXJzLiIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9fY2xhc3NfXyBpcyBQYXJzZXJCYXNlOgogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoCiAgICAgICAgICAgICAgICAiX21hcmt1cGJhc2UuUGFyc2VyQmFzZSBtdXN0IGJlIHN1YmNsYXNzZWQiKQoKICAgIGRlZiBlcnJvcihzZWxmLCBtZXNzYWdlKToKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKAogICAgICAgICAgICAic3ViY2xhc3NlcyBvZiBQYXJzZXJCYXNlIG11c3Qgb3ZlcnJpZGUgZXJyb3IoKSIpCgogICAgZGVmIHJlc2V0KHNlbGYpOgogICAgICAgIHNlbGYubGluZW5vID0gMQogICAgICAgIHNlbGYub2Zmc2V0ID0gMAoKICAgIGRlZiBnZXRwb3Moc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGN1cnJlbnQgbGluZSBudW1iZXIgYW5kIG9mZnNldC4iIiIKICAgICAgICByZXR1cm4gc2VsZi5saW5lbm8sIHNlbGYub2Zmc2V0CgogICAgIyBJbnRlcm5hbCAtLSB1cGRhdGUgbGluZSBudW1iZXIgYW5kIG9mZnNldC4gIFRoaXMgc2hvdWxkIGJlCiAgICAjIGNhbGxlZCBmb3IgZWFjaCBwaWVjZSBvZiBkYXRhIGV4YWN0bHkgb25jZSwgaW4gb3JkZXIgLS0gaW4gb3RoZXIKICAgICMgd29yZHMgdGhlIGNvbmNhdGVuYXRpb24gb2YgYWxsIHRoZSBpbnB1dCBzdHJpbmdzIHRvIHRoaXMKICAgICMgZnVuY3Rpb24gc2hvdWxkIGJlIGV4YWN0bHkgdGhlIGVudGlyZSBpbnB1dC4KICAgIGRlZiB1cGRhdGVwb3Moc2VsZiwgaSwgaik6CiAgICAgICAgaWYgaSA+PSBqOgogICAgICAgICAgICByZXR1cm4gagogICAgICAgIHJhd2RhdGEgPSBzZWxmLnJhd2RhdGEKICAgICAgICBubGluZXMgPSByYXdkYXRhLmNvdW50KCJcbiIsIGksIGopCiAgICAgICAgaWYgbmxpbmVzOgogICAgICAgICAgICBzZWxmLmxpbmVubyA9IHNlbGYubGluZW5vICsgbmxpbmVzCiAgICAgICAgICAgIHBvcyA9IHJhd2RhdGEucmluZGV4KCJcbiIsIGksIGopICMgU2hvdWxkIG5vdCBmYWlsCiAgICAgICAgICAgIHNlbGYub2Zmc2V0ID0gai0ocG9zKzEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5vZmZzZXQgPSBzZWxmLm9mZnNldCArIGotaQogICAgICAgIHJldHVybiBqCgogICAgX2RlY2xfb3RoZXJjaGFycyA9ICcnCgogICAgIyBJbnRlcm5hbCAtLSBwYXJzZSBkZWNsYXJhdGlvbiAoZm9yIHVzZSBieSBzdWJjbGFzc2VzKS4KICAgIGRlZiBwYXJzZV9kZWNsYXJhdGlvbihzZWxmLCBpKToKICAgICAgICAjIFRoaXMgaXMgc29tZSBzb3J0IG9mIGRlY2xhcmF0aW9uOyBpbiAiSFRNTCBhcwogICAgICAgICMgZGVwbG95ZWQsIiB0aGlzIHNob3VsZCBvbmx5IGJlIHRoZSBkb2N1bWVudCB0eXBlCiAgICAgICAgIyBkZWNsYXJhdGlvbiAoIjwhRE9DVFlQRSBodG1sLi4uPiIpLgogICAgICAgICMgSVNPIDg4Nzk6MTk4NiwgaG93ZXZlciwgaGFzIG1vcmUgY29tcGxleAogICAgICAgICMgZGVjbGFyYXRpb24gc3ludGF4IGZvciBlbGVtZW50cyBpbiA8IS4uLj4sIGluY2x1ZGluZzoKICAgICAgICAjIC0tY29tbWVudC0tCiAgICAgICAgIyBbbWFya2VkIHNlY3Rpb25dCiAgICAgICAgIyBuYW1lIGluIHRoZSBmb2xsb3dpbmcgbGlzdDogRU5USVRZLCBET0NUWVBFLCBFTEVNRU5ULAogICAgICAgICMgQVRUTElTVCwgTk9UQVRJT04sIFNIT1JUUkVGLCBVU0VNQVAsCiAgICAgICAgIyBMSU5LVFlQRSwgTElOSywgSURMSU5LLCBVU0VMSU5LLCBTWVNURU0KICAgICAgICByYXdkYXRhID0gc2VsZi5yYXdkYXRhCiAgICAgICAgaiA9IGkgKyAyCiAgICAgICAgYXNzZXJ0IHJhd2RhdGFbaTpqXSA9PSAiPCEiLCAidW5leHBlY3RlZCBjYWxsIHRvIHBhcnNlX2RlY2xhcmF0aW9uIgogICAgICAgIGlmIHJhd2RhdGFbajpqKzFdID09ICI+IjoKICAgICAgICAgICAgIyB0aGUgZW1wdHkgY29tbWVudCA8IT4KICAgICAgICAgICAgcmV0dXJuIGogKyAxCiAgICAgICAgaWYgcmF3ZGF0YVtqOmorMV0gaW4gKCItIiwgIiIpOgogICAgICAgICAgICAjIFN0YXJ0IG9mIGNvbW1lbnQgZm9sbG93ZWQgYnkgYnVmZmVyIGJvdW5kYXJ5LAogICAgICAgICAgICAjIG9yIGp1c3QgYSBidWZmZXIgYm91bmRhcnkuCiAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICMgQSBzaW1wbGUsIHByYWN0aWNhbCB2ZXJzaW9uIGNvdWxkIGxvb2sgbGlrZTogKChuYW1lfHN0cmluZ2xpdCkgUyopICsgJz4nCiAgICAgICAgbiA9IGxlbihyYXdkYXRhKQogICAgICAgIGlmIHJhd2RhdGFbajpqKzJdID09ICctLSc6ICNjb21tZW50CiAgICAgICAgICAgICMgTG9jYXRlIC0tLiotLSBhcyB0aGUgYm9keSBvZiB0aGUgY29tbWVudAogICAgICAgICAgICByZXR1cm4gc2VsZi5wYXJzZV9jb21tZW50KGkpCiAgICAgICAgZWxpZiByYXdkYXRhW2pdID09ICdbJzogI21hcmtlZCBzZWN0aW9uCiAgICAgICAgICAgICMgTG9jYXRlIFtzdGF0dXNXb3JkIFsuLi5hcmJpdHJhcnkgU0dNTC4uLl1dIGFzIHRoZSBib2R5IG9mIHRoZSBtYXJrZWQgc2VjdGlvbgogICAgICAgICAgICAjIFdoZXJlIHN0YXR1c1dvcmQgaXMgb25lIG9mIFRFTVAsIENEQVRBLCBJR05PUkUsIElOQ0xVREUsIFJDREFUQQogICAgICAgICAgICAjIE5vdGUgdGhhdCB0aGlzIGlzIGV4dGVuZGVkIGJ5IE1pY3Jvc29mdCBPZmZpY2UgIlNhdmUgYXMgV2ViIiBmdW5jdGlvbgogICAgICAgICAgICAjIHRvIGluY2x1ZGUgW2lmLi4uXSBhbmQgW2VuZGlmXS4KICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VfbWFya2VkX3NlY3Rpb24oaSkKICAgICAgICBlbHNlOiAjYWxsIG90aGVyIGRlY2xhcmF0aW9uIGVsZW1lbnRzCiAgICAgICAgICAgIGRlY2x0eXBlLCBqID0gc2VsZi5fc2Nhbl9uYW1lKGosIGkpCiAgICAgICAgaWYgaiA8IDA6CiAgICAgICAgICAgIHJldHVybiBqCiAgICAgICAgaWYgZGVjbHR5cGUgPT0gImRvY3R5cGUiOgogICAgICAgICAgICBzZWxmLl9kZWNsX290aGVyY2hhcnMgPSAnJwogICAgICAgIHdoaWxlIGogPCBuOgogICAgICAgICAgICBjID0gcmF3ZGF0YVtqXQogICAgICAgICAgICBpZiBjID09ICI+IjoKICAgICAgICAgICAgICAgICMgZW5kIG9mIGRlY2xhcmF0aW9uIHN5bnRheAogICAgICAgICAgICAgICAgZGF0YSA9IHJhd2RhdGFbaSsyOmpdCiAgICAgICAgICAgICAgICBpZiBkZWNsdHlwZSA9PSAiZG9jdHlwZSI6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVfZGVjbChkYXRhKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAjIEFjY29yZGluZyB0byB0aGUgSFRNTDUgc3BlY3Mgc2VjdGlvbnMgIjguMi40LjQ0IEJvZ3VzCiAgICAgICAgICAgICAgICAgICAgIyBjb21tZW50IHN0YXRlIiBhbmQgIjguMi40LjQ1IE1hcmt1cCBkZWNsYXJhdGlvbiBvcGVuCiAgICAgICAgICAgICAgICAgICAgIyBzdGF0ZSIsIGEgY29tbWVudCB0b2tlbiBzaG91bGQgYmUgZW1pdHRlZC4KICAgICAgICAgICAgICAgICAgICAjIENhbGxpbmcgdW5rbm93bl9kZWNsIHByb3ZpZGVzIG1vcmUgZmxleGliaWxpdHkgdGhvdWdoLgogICAgICAgICAgICAgICAgICAgIHNlbGYudW5rbm93bl9kZWNsKGRhdGEpCiAgICAgICAgICAgICAgICByZXR1cm4gaiArIDEKICAgICAgICAgICAgaWYgYyBpbiAiXCInIjoKICAgICAgICAgICAgICAgIG0gPSBfZGVjbHN0cmluZ2xpdF9tYXRjaChyYXdkYXRhLCBqKQogICAgICAgICAgICAgICAgaWYgbm90IG06CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xICMgaW5jb21wbGV0ZQogICAgICAgICAgICAgICAgaiA9IG0uZW5kKCkKICAgICAgICAgICAgZWxpZiBjIGluICJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaIjoKICAgICAgICAgICAgICAgIG5hbWUsIGogPSBzZWxmLl9zY2FuX25hbWUoaiwgaSkKICAgICAgICAgICAgZWxpZiBjIGluIHNlbGYuX2RlY2xfb3RoZXJjaGFyczoKICAgICAgICAgICAgICAgIGogPSBqICsgMQogICAgICAgICAgICBlbGlmIGMgPT0gIlsiOgogICAgICAgICAgICAgICAgIyB0aGlzIGNvdWxkIGJlIGhhbmRsZWQgaW4gYSBzZXBhcmF0ZSBkb2N0eXBlIHBhcnNlcgogICAgICAgICAgICAgICAgaWYgZGVjbHR5cGUgPT0gImRvY3R5cGUiOgogICAgICAgICAgICAgICAgICAgIGogPSBzZWxmLl9wYXJzZV9kb2N0eXBlX3N1YnNldChqICsgMSwgaSkKICAgICAgICAgICAgICAgIGVsaWYgZGVjbHR5cGUgaW4geyJhdHRsaXN0IiwgImxpbmt0eXBlIiwgImxpbmsiLCAiZWxlbWVudCJ9OgogICAgICAgICAgICAgICAgICAgICMgbXVzdCB0b2xlcmF0ZSBbXSdkIGdyb3VwcyBpbiBhIGNvbnRlbnQgbW9kZWwgaW4gYW4gZWxlbWVudCBkZWNsYXJhdGlvbgogICAgICAgICAgICAgICAgICAgICMgYWxzbyBpbiBkYXRhIGF0dHJpYnV0ZSBzcGVjaWZpY2F0aW9ucyBvZiBhdHRsaXN0IGRlY2xhcmF0aW9uCiAgICAgICAgICAgICAgICAgICAgIyBhbHNvIGxpbmsgdHlwZSBkZWNsYXJhdGlvbiBzdWJzZXRzIGluIGxpbmt0eXBlIGRlY2xhcmF0aW9ucwogICAgICAgICAgICAgICAgICAgICMgYWxzbyBsaW5rIGF0dHJpYnV0ZSBzcGVjaWZpY2F0aW9uIGxpc3RzIGluIGxpbmsgZGVjbGFyYXRpb25zCiAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvcigidW5zdXBwb3J0ZWQgJ1snIGNoYXIgaW4gJXMgZGVjbGFyYXRpb24iICUgZGVjbHR5cGUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuZXJyb3IoInVuZXhwZWN0ZWQgJ1snIGNoYXIgaW4gZGVjbGFyYXRpb24iKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcigKICAgICAgICAgICAgICAgICAgICAidW5leHBlY3RlZCAlciBjaGFyIGluIGRlY2xhcmF0aW9uIiAlIHJhd2RhdGFbal0pCiAgICAgICAgICAgIGlmIGogPCAwOgogICAgICAgICAgICAgICAgcmV0dXJuIGoKICAgICAgICByZXR1cm4gLTEgIyBpbmNvbXBsZXRlCgogICAgIyBJbnRlcm5hbCAtLSBwYXJzZSBhIG1hcmtlZCBzZWN0aW9uCiAgICAjIE92ZXJyaWRlIHRoaXMgdG8gaGFuZGxlIE1TLXdvcmQgZXh0ZW5zaW9uIHN5bnRheCA8IVtpZiB3b3JkXT5jb250ZW50PCFbZW5kaWZdPgogICAgZGVmIHBhcnNlX21hcmtlZF9zZWN0aW9uKHNlbGYsIGksIHJlcG9ydD0xKToKICAgICAgICByYXdkYXRhPSBzZWxmLnJhd2RhdGEKICAgICAgICBhc3NlcnQgcmF3ZGF0YVtpOmkrM10gPT0gJzwhWycsICJ1bmV4cGVjdGVkIGNhbGwgdG8gcGFyc2VfbWFya2VkX3NlY3Rpb24oKSIKICAgICAgICBzZWN0TmFtZSwgaiA9IHNlbGYuX3NjYW5fbmFtZSggaSszLCBpICkKICAgICAgICBpZiBqIDwgMDoKICAgICAgICAgICAgcmV0dXJuIGoKICAgICAgICBpZiBzZWN0TmFtZSBpbiB7InRlbXAiLCAiY2RhdGEiLCAiaWdub3JlIiwgImluY2x1ZGUiLCAicmNkYXRhIn06CiAgICAgICAgICAgICMgbG9vayBmb3Igc3RhbmRhcmQgXV0+IGVuZGluZwogICAgICAgICAgICBtYXRjaD0gX21hcmtlZHNlY3Rpb25jbG9zZS5zZWFyY2gocmF3ZGF0YSwgaSszKQogICAgICAgIGVsaWYgc2VjdE5hbWUgaW4geyJpZiIsICJlbHNlIiwgImVuZGlmIn06CiAgICAgICAgICAgICMgbG9vayBmb3IgTVMgT2ZmaWNlIF0+IGVuZGluZwogICAgICAgICAgICBtYXRjaD0gX21zbWFya2Vkc2VjdGlvbmNsb3NlLnNlYXJjaChyYXdkYXRhLCBpKzMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5lcnJvcigndW5rbm93biBzdGF0dXMga2V5d29yZCAlciBpbiBtYXJrZWQgc2VjdGlvbicgJSByYXdkYXRhW2krMzpqXSkKICAgICAgICBpZiBub3QgbWF0Y2g6CiAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgIGlmIHJlcG9ydDoKICAgICAgICAgICAgaiA9IG1hdGNoLnN0YXJ0KDApCiAgICAgICAgICAgIHNlbGYudW5rbm93bl9kZWNsKHJhd2RhdGFbaSszOiBqXSkKICAgICAgICByZXR1cm4gbWF0Y2guZW5kKDApCgogICAgIyBJbnRlcm5hbCAtLSBwYXJzZSBjb21tZW50LCByZXR1cm4gbGVuZ3RoIG9yIC0xIGlmIG5vdCB0ZXJtaW5hdGVkCiAgICBkZWYgcGFyc2VfY29tbWVudChzZWxmLCBpLCByZXBvcnQ9MSk6CiAgICAgICAgcmF3ZGF0YSA9IHNlbGYucmF3ZGF0YQogICAgICAgIGlmIHJhd2RhdGFbaTppKzRdICE9ICc8IS0tJzoKICAgICAgICAgICAgc2VsZi5lcnJvcigndW5leHBlY3RlZCBjYWxsIHRvIHBhcnNlX2NvbW1lbnQoKScpCiAgICAgICAgbWF0Y2ggPSBfY29tbWVudGNsb3NlLnNlYXJjaChyYXdkYXRhLCBpKzQpCiAgICAgICAgaWYgbm90IG1hdGNoOgogICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICBpZiByZXBvcnQ6CiAgICAgICAgICAgIGogPSBtYXRjaC5zdGFydCgwKQogICAgICAgICAgICBzZWxmLmhhbmRsZV9jb21tZW50KHJhd2RhdGFbaSs0OiBqXSkKICAgICAgICByZXR1cm4gbWF0Y2guZW5kKDApCgogICAgIyBJbnRlcm5hbCAtLSBzY2FuIHBhc3QgdGhlIGludGVybmFsIHN1YnNldCBpbiBhIDwhRE9DVFlQRSBkZWNsYXJhdGlvbiwKICAgICMgcmV0dXJuaW5nIHRoZSBpbmRleCBqdXN0IHBhc3QgYW55IHdoaXRlc3BhY2UgZm9sbG93aW5nIHRoZSB0cmFpbGluZyAnXScuCiAgICBkZWYgX3BhcnNlX2RvY3R5cGVfc3Vic2V0KHNlbGYsIGksIGRlY2xzdGFydHBvcyk6CiAgICAgICAgcmF3ZGF0YSA9IHNlbGYucmF3ZGF0YQogICAgICAgIG4gPSBsZW4ocmF3ZGF0YSkKICAgICAgICBqID0gaQogICAgICAgIHdoaWxlIGogPCBuOgogICAgICAgICAgICBjID0gcmF3ZGF0YVtqXQogICAgICAgICAgICBpZiBjID09ICI8IjoKICAgICAgICAgICAgICAgIHMgPSByYXdkYXRhW2o6aisyXQogICAgICAgICAgICAgICAgaWYgcyA9PSAiPCI6CiAgICAgICAgICAgICAgICAgICAgIyBlbmQgb2YgYnVmZmVyOyBpbmNvbXBsZXRlCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICBpZiBzICE9ICI8ISI6CiAgICAgICAgICAgICAgICAgICAgc2VsZi51cGRhdGVwb3MoZGVjbHN0YXJ0cG9zLCBqICsgMSkKICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yKCJ1bmV4cGVjdGVkIGNoYXIgaW4gaW50ZXJuYWwgc3Vic2V0IChpbiAlcikiICUgcykKICAgICAgICAgICAgICAgIGlmIChqICsgMikgPT0gbjoKICAgICAgICAgICAgICAgICAgICAjIGVuZCBvZiBidWZmZXI7IGluY29tcGxldGUKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgIGlmIChqICsgNCkgPiBuOgogICAgICAgICAgICAgICAgICAgICMgZW5kIG9mIGJ1ZmZlcjsgaW5jb21wbGV0ZQogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICAgICAgaWYgcmF3ZGF0YVtqOmorNF0gPT0gIjwhLS0iOgogICAgICAgICAgICAgICAgICAgIGogPSBzZWxmLnBhcnNlX2NvbW1lbnQoaiwgcmVwb3J0PTApCiAgICAgICAgICAgICAgICAgICAgaWYgaiA8IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIG5hbWUsIGogPSBzZWxmLl9zY2FuX25hbWUoaiArIDIsIGRlY2xzdGFydHBvcykKICAgICAgICAgICAgICAgIGlmIGogPT0gLTE6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICBpZiBuYW1lIG5vdCBpbiB7ImF0dGxpc3QiLCAiZWxlbWVudCIsICJlbnRpdHkiLCAibm90YXRpb24ifToKICAgICAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZXBvcyhkZWNsc3RhcnRwb3MsIGogKyAyKQogICAgICAgICAgICAgICAgICAgIHNlbGYuZXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICJ1bmtub3duIGRlY2xhcmF0aW9uICVyIGluIGludGVybmFsIHN1YnNldCIgJSBuYW1lKQogICAgICAgICAgICAgICAgIyBoYW5kbGUgdGhlIGluZGl2aWR1YWwgbmFtZXMKICAgICAgICAgICAgICAgIG1ldGggPSBnZXRhdHRyKHNlbGYsICJfcGFyc2VfZG9jdHlwZV8iICsgbmFtZSkKICAgICAgICAgICAgICAgIGogPSBtZXRoKGosIGRlY2xzdGFydHBvcykKICAgICAgICAgICAgICAgIGlmIGogPCAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBqCiAgICAgICAgICAgIGVsaWYgYyA9PSAiJSI6CiAgICAgICAgICAgICAgICAjIHBhcmFtZXRlciBlbnRpdHkgcmVmZXJlbmNlCiAgICAgICAgICAgICAgICBpZiAoaiArIDEpID09IG46CiAgICAgICAgICAgICAgICAgICAgIyBlbmQgb2YgYnVmZmVyOyBpbmNvbXBsZXRlCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICBzLCBqID0gc2VsZi5fc2Nhbl9uYW1lKGogKyAxLCBkZWNsc3RhcnRwb3MpCiAgICAgICAgICAgICAgICBpZiBqIDwgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gagogICAgICAgICAgICAgICAgaWYgcmF3ZGF0YVtqXSA9PSAiOyI6CiAgICAgICAgICAgICAgICAgICAgaiA9IGogKyAxCiAgICAgICAgICAgIGVsaWYgYyA9PSAiXSI6CiAgICAgICAgICAgICAgICBqID0gaiArIDEKICAgICAgICAgICAgICAgIHdoaWxlIGogPCBuIGFuZCByYXdkYXRhW2pdLmlzc3BhY2UoKToKICAgICAgICAgICAgICAgICAgICBqID0gaiArIDEKICAgICAgICAgICAgICAgIGlmIGogPCBuOgogICAgICAgICAgICAgICAgICAgIGlmIHJhd2RhdGFbal0gPT0gIj4iOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gagogICAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlcG9zKGRlY2xzdGFydHBvcywgaikKICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yKCJ1bmV4cGVjdGVkIGNoYXIgYWZ0ZXIgaW50ZXJuYWwgc3Vic2V0IikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgIGVsaWYgYy5pc3NwYWNlKCk6CiAgICAgICAgICAgICAgICBqID0gaiArIDEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlcG9zKGRlY2xzdGFydHBvcywgaikKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3IoInVuZXhwZWN0ZWQgY2hhciAlciBpbiBpbnRlcm5hbCBzdWJzZXQiICUgYykKICAgICAgICAjIGVuZCBvZiBidWZmZXIgcmVhY2hlZAogICAgICAgIHJldHVybiAtMQoKICAgICMgSW50ZXJuYWwgLS0gc2NhbiBwYXN0IDwhRUxFTUVOVCBkZWNsYXJhdGlvbnMKICAgIGRlZiBfcGFyc2VfZG9jdHlwZV9lbGVtZW50KHNlbGYsIGksIGRlY2xzdGFydHBvcyk6CiAgICAgICAgbmFtZSwgaiA9IHNlbGYuX3NjYW5fbmFtZShpLCBkZWNsc3RhcnRwb3MpCiAgICAgICAgaWYgaiA9PSAtMToKICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgIyBzdHlsZSBjb250ZW50IG1vZGVsOyBqdXN0IHNraXAgdW50aWwgJz4nCiAgICAgICAgcmF3ZGF0YSA9IHNlbGYucmF3ZGF0YQogICAgICAgIGlmICc+JyBpbiByYXdkYXRhW2o6XToKICAgICAgICAgICAgcmV0dXJuIHJhd2RhdGEuZmluZCgiPiIsIGopICsgMQogICAgICAgIHJldHVybiAtMQoKICAgICMgSW50ZXJuYWwgLS0gc2NhbiBwYXN0IDwhQVRUTElTVCBkZWNsYXJhdGlvbnMKICAgIGRlZiBfcGFyc2VfZG9jdHlwZV9hdHRsaXN0KHNlbGYsIGksIGRlY2xzdGFydHBvcyk6CiAgICAgICAgcmF3ZGF0YSA9IHNlbGYucmF3ZGF0YQogICAgICAgIG5hbWUsIGogPSBzZWxmLl9zY2FuX25hbWUoaSwgZGVjbHN0YXJ0cG9zKQogICAgICAgIGMgPSByYXdkYXRhW2o6aisxXQogICAgICAgIGlmIGMgPT0gIiI6CiAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgIGlmIGMgPT0gIj4iOgogICAgICAgICAgICByZXR1cm4gaiArIDEKICAgICAgICB3aGlsZSAxOgogICAgICAgICAgICAjIHNjYW4gYSBzZXJpZXMgb2YgYXR0cmlidXRlIGRlc2NyaXB0aW9uczsgc2ltcGxpZmllZDoKICAgICAgICAgICAgIyAgIG5hbWUgdHlwZSBbdmFsdWVdIFsjY29uc3RyYWludF0KICAgICAgICAgICAgbmFtZSwgaiA9IHNlbGYuX3NjYW5fbmFtZShqLCBkZWNsc3RhcnRwb3MpCiAgICAgICAgICAgIGlmIGogPCAwOgogICAgICAgICAgICAgICAgcmV0dXJuIGoKICAgICAgICAgICAgYyA9IHJhd2RhdGFbajpqKzFdCiAgICAgICAgICAgIGlmIGMgPT0gIiI6CiAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgaWYgYyA9PSAiKCI6CiAgICAgICAgICAgICAgICAjIGFuIGVudW1lcmF0ZWQgdHlwZTsgbG9vayBmb3IgJyknCiAgICAgICAgICAgICAgICBpZiAiKSIgaW4gcmF3ZGF0YVtqOl06CiAgICAgICAgICAgICAgICAgICAgaiA9IHJhd2RhdGEuZmluZCgiKSIsIGopICsgMQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgIHdoaWxlIHJhd2RhdGFbajpqKzFdLmlzc3BhY2UoKToKICAgICAgICAgICAgICAgICAgICBqID0gaiArIDEKICAgICAgICAgICAgICAgIGlmIG5vdCByYXdkYXRhW2o6XToKICAgICAgICAgICAgICAgICAgICAjIGVuZCBvZiBidWZmZXIsIGluY29tcGxldGUKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG5hbWUsIGogPSBzZWxmLl9zY2FuX25hbWUoaiwgZGVjbHN0YXJ0cG9zKQogICAgICAgICAgICBjID0gcmF3ZGF0YVtqOmorMV0KICAgICAgICAgICAgaWYgbm90IGM6CiAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgaWYgYyBpbiAiJ1wiIjoKICAgICAgICAgICAgICAgIG0gPSBfZGVjbHN0cmluZ2xpdF9tYXRjaChyYXdkYXRhLCBqKQogICAgICAgICAgICAgICAgaWYgbToKICAgICAgICAgICAgICAgICAgICBqID0gbS5lbmQoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgIGMgPSByYXdkYXRhW2o6aisxXQogICAgICAgICAgICAgICAgaWYgbm90IGM6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgIGlmIGMgPT0gIiMiOgogICAgICAgICAgICAgICAgaWYgcmF3ZGF0YVtqOl0gPT0gIiMiOgogICAgICAgICAgICAgICAgICAgICMgZW5kIG9mIGJ1ZmZlcgogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICAgICAgbmFtZSwgaiA9IHNlbGYuX3NjYW5fbmFtZShqICsgMSwgZGVjbHN0YXJ0cG9zKQogICAgICAgICAgICAgICAgaWYgaiA8IDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGoKICAgICAgICAgICAgICAgIGMgPSByYXdkYXRhW2o6aisxXQogICAgICAgICAgICAgICAgaWYgbm90IGM6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgIGlmIGMgPT0gJz4nOgogICAgICAgICAgICAgICAgIyBhbGwgZG9uZQogICAgICAgICAgICAgICAgcmV0dXJuIGogKyAxCgogICAgIyBJbnRlcm5hbCAtLSBzY2FuIHBhc3QgPCFOT1RBVElPTiBkZWNsYXJhdGlvbnMKICAgIGRlZiBfcGFyc2VfZG9jdHlwZV9ub3RhdGlvbihzZWxmLCBpLCBkZWNsc3RhcnRwb3MpOgogICAgICAgIG5hbWUsIGogPSBzZWxmLl9zY2FuX25hbWUoaSwgZGVjbHN0YXJ0cG9zKQogICAgICAgIGlmIGogPCAwOgogICAgICAgICAgICByZXR1cm4gagogICAgICAgIHJhd2RhdGEgPSBzZWxmLnJhd2RhdGEKICAgICAgICB3aGlsZSAxOgogICAgICAgICAgICBjID0gcmF3ZGF0YVtqOmorMV0KICAgICAgICAgICAgaWYgbm90IGM6CiAgICAgICAgICAgICAgICAjIGVuZCBvZiBidWZmZXI7IGluY29tcGxldGUKICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICBpZiBjID09ICc+JzoKICAgICAgICAgICAgICAgIHJldHVybiBqICsgMQogICAgICAgICAgICBpZiBjIGluICInXCIiOgogICAgICAgICAgICAgICAgbSA9IF9kZWNsc3RyaW5nbGl0X21hdGNoKHJhd2RhdGEsIGopCiAgICAgICAgICAgICAgICBpZiBub3QgbToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgIGogPSBtLmVuZCgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBuYW1lLCBqID0gc2VsZi5fc2Nhbl9uYW1lKGosIGRlY2xzdGFydHBvcykKICAgICAgICAgICAgICAgIGlmIGogPCAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBqCgogICAgIyBJbnRlcm5hbCAtLSBzY2FuIHBhc3QgPCFFTlRJVFkgZGVjbGFyYXRpb25zCiAgICBkZWYgX3BhcnNlX2RvY3R5cGVfZW50aXR5KHNlbGYsIGksIGRlY2xzdGFydHBvcyk6CiAgICAgICAgcmF3ZGF0YSA9IHNlbGYucmF3ZGF0YQogICAgICAgIGlmIHJhd2RhdGFbaTppKzFdID09ICIlIjoKICAgICAgICAgICAgaiA9IGkgKyAxCiAgICAgICAgICAgIHdoaWxlIDE6CiAgICAgICAgICAgICAgICBjID0gcmF3ZGF0YVtqOmorMV0KICAgICAgICAgICAgICAgIGlmIG5vdCBjOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICAgICAgaWYgYy5pc3NwYWNlKCk6CiAgICAgICAgICAgICAgICAgICAgaiA9IGogKyAxCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaiA9IGkKICAgICAgICBuYW1lLCBqID0gc2VsZi5fc2Nhbl9uYW1lKGosIGRlY2xzdGFydHBvcykKICAgICAgICBpZiBqIDwgMDoKICAgICAgICAgICAgcmV0dXJuIGoKICAgICAgICB3aGlsZSAxOgogICAgICAgICAgICBjID0gc2VsZi5yYXdkYXRhW2o6aisxXQogICAgICAgICAgICBpZiBub3QgYzoKICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICBpZiBjIGluICInXCIiOgogICAgICAgICAgICAgICAgbSA9IF9kZWNsc3RyaW5nbGl0X21hdGNoKHJhd2RhdGEsIGopCiAgICAgICAgICAgICAgICBpZiBtOgogICAgICAgICAgICAgICAgICAgIGogPSBtLmVuZCgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMSAgICAjIGluY29tcGxldGUKICAgICAgICAgICAgZWxpZiBjID09ICI+IjoKICAgICAgICAgICAgICAgIHJldHVybiBqICsgMQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbmFtZSwgaiA9IHNlbGYuX3NjYW5fbmFtZShqLCBkZWNsc3RhcnRwb3MpCiAgICAgICAgICAgICAgICBpZiBqIDwgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gagoKICAgICMgSW50ZXJuYWwgLS0gc2NhbiBhIG5hbWUgdG9rZW4gYW5kIHRoZSBuZXcgcG9zaXRpb24gYW5kIHRoZSB0b2tlbiwgb3IKICAgICMgcmV0dXJuIC0xIGlmIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyLgogICAgZGVmIF9zY2FuX25hbWUoc2VsZiwgaSwgZGVjbHN0YXJ0cG9zKToKICAgICAgICByYXdkYXRhID0gc2VsZi5yYXdkYXRhCiAgICAgICAgbiA9IGxlbihyYXdkYXRhKQogICAgICAgIGlmIGkgPT0gbjoKICAgICAgICAgICAgcmV0dXJuIE5vbmUsIC0xCiAgICAgICAgbSA9IF9kZWNsbmFtZV9tYXRjaChyYXdkYXRhLCBpKQogICAgICAgIGlmIG06CiAgICAgICAgICAgIHMgPSBtLmdyb3VwKCkKICAgICAgICAgICAgbmFtZSA9IHMuc3RyaXAoKQogICAgICAgICAgICBpZiAoaSArIGxlbihzKSkgPT0gbjoKICAgICAgICAgICAgICAgIHJldHVybiBOb25lLCAtMSAgIyBlbmQgb2YgYnVmZmVyCiAgICAgICAgICAgIHJldHVybiBuYW1lLmxvd2VyKCksIG0uZW5kKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnVwZGF0ZXBvcyhkZWNsc3RhcnRwb3MsIGkpCiAgICAgICAgICAgIHNlbGYuZXJyb3IoImV4cGVjdGVkIG5hbWUgdG9rZW4gYXQgJXIiCiAgICAgICAgICAgICAgICAgICAgICAgJSByYXdkYXRhW2RlY2xzdGFydHBvczpkZWNsc3RhcnRwb3MrMjBdKQoKICAgICMgVG8gYmUgb3ZlcnJpZGRlbiAtLSBoYW5kbGVycyBmb3IgdW5rbm93biBvYmplY3RzCiAgICBkZWYgdW5rbm93bl9kZWNsKHNlbGYsIGRhdGEpOgogICAgICAgIHBhc3MK',
'/Lib/copyreg.py':'IiIiSGVscGVyIHRvIHByb3ZpZGUgZXh0ZW5zaWJpbGl0eSBmb3IgcGlja2xlLg0KDQpUaGlzIGlzIG9ubHkgdXNlZnVsIHRvIGFkZCBwaWNrbGUgc3VwcG9ydCBmb3IgZXh0ZW5zaW9uIHR5cGVzIGRlZmluZWQgaW4NCkMsIG5vdCBmb3IgaW5zdGFuY2VzIG9mIHVzZXItZGVmaW5lZCBjbGFzc2VzLg0KIiIiDQoNCl9fYWxsX18gPSBbInBpY2tsZSIsICJjb25zdHJ1Y3RvciIsDQogICAgICAgICAgICJhZGRfZXh0ZW5zaW9uIiwgInJlbW92ZV9leHRlbnNpb24iLCAiY2xlYXJfZXh0ZW5zaW9uX2NhY2hlIl0NCg0KZGlzcGF0Y2hfdGFibGUgPSB7fQ0KDQpkZWYgcGlja2xlKG9iX3R5cGUsIHBpY2tsZV9mdW5jdGlvbiwgY29uc3RydWN0b3Jfb2I9Tm9uZSk6DQogICAgaWYgbm90IGNhbGxhYmxlKHBpY2tsZV9mdW5jdGlvbik6DQogICAgICAgIHJhaXNlIFR5cGVFcnJvcigicmVkdWN0aW9uIGZ1bmN0aW9ucyBtdXN0IGJlIGNhbGxhYmxlIikNCiAgICBkaXNwYXRjaF90YWJsZVtvYl90eXBlXSA9IHBpY2tsZV9mdW5jdGlvbg0KDQogICAgIyBUaGUgY29uc3RydWN0b3Jfb2IgZnVuY3Rpb24gaXMgYSB2ZXN0aWdlIG9mIHNhZmUgZm9yIHVucGlja2xpbmcuDQogICAgIyBUaGVyZSBpcyBubyByZWFzb24gZm9yIHRoZSBjYWxsZXIgdG8gcGFzcyBpdCBhbnltb3JlLg0KICAgIGlmIGNvbnN0cnVjdG9yX29iIGlzIG5vdCBOb25lOg0KICAgICAgICBjb25zdHJ1Y3Rvcihjb25zdHJ1Y3Rvcl9vYikNCg0KZGVmIGNvbnN0cnVjdG9yKG9iamVjdCk6DQogICAgaWYgbm90IGNhbGxhYmxlKG9iamVjdCk6DQogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY29uc3RydWN0b3JzIG11c3QgYmUgY2FsbGFibGUiKQ0KDQojIEV4YW1wbGU6IHByb3ZpZGUgcGlja2xpbmcgc3VwcG9ydCBmb3IgY29tcGxleCBudW1iZXJzLg0KDQp0cnk6DQogICAgY29tcGxleA0KZXhjZXB0IE5hbWVFcnJvcjoNCiAgICBwYXNzDQplbHNlOg0KDQogICAgZGVmIHBpY2tsZV9jb21wbGV4KGMpOg0KICAgICAgICByZXR1cm4gY29tcGxleCwgKGMucmVhbCwgYy5pbWFnKQ0KDQogICAgcGlja2xlKGNvbXBsZXgsIHBpY2tsZV9jb21wbGV4LCBjb21wbGV4KQ0KDQojIFN1cHBvcnQgZm9yIHBpY2tsaW5nIG5ldy1zdHlsZSBvYmplY3RzDQoNCmRlZiBfcmVjb25zdHJ1Y3RvcihjbHMsIGJhc2UsIHN0YXRlKToNCiAgICBpZiBiYXNlIGlzIG9iamVjdDoNCiAgICAgICAgb2JqID0gb2JqZWN0Ll9fbmV3X18oY2xzKQ0KICAgIGVsc2U6DQogICAgICAgIG9iaiA9IGJhc2UuX19uZXdfXyhjbHMsIHN0YXRlKQ0KICAgICAgICBpZiBiYXNlLl9faW5pdF9fICE9IG9iamVjdC5fX2luaXRfXzoNCiAgICAgICAgICAgIGJhc2UuX19pbml0X18ob2JqLCBzdGF0ZSkNCiAgICByZXR1cm4gb2JqDQoNCl9IRUFQVFlQRSA9IDE8PDkNCg0KIyBQeXRob24gY29kZSBmb3Igb2JqZWN0Ll9fcmVkdWNlX2V4X18gZm9yIHByb3RvY29scyAwIGFuZCAxDQoNCmRlZiBfcmVkdWNlX2V4KHNlbGYsIHByb3RvKToNCiAgICBhc3NlcnQgcHJvdG8gPCAyDQogICAgZm9yIGJhc2UgaW4gc2VsZi5fX2NsYXNzX18uX19tcm9fXzoNCiAgICAgICAgaWYgaGFzYXR0cihiYXNlLCAnX19mbGFnc19fJykgYW5kIG5vdCBiYXNlLl9fZmxhZ3NfXyAmIF9IRUFQVFlQRToNCiAgICAgICAgICAgIGJyZWFrDQogICAgZWxzZToNCiAgICAgICAgYmFzZSA9IG9iamVjdCAjIG5vdCByZWFsbHkgcmVhY2hhYmxlDQogICAgaWYgYmFzZSBpcyBvYmplY3Q6DQogICAgICAgIHN0YXRlID0gTm9uZQ0KICAgIGVsc2U6DQogICAgICAgIGlmIGJhc2UgaXMgc2VsZi5fX2NsYXNzX186DQogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhbid0IHBpY2tsZSAlcyBvYmplY3RzIiAlIGJhc2UuX19uYW1lX18pDQogICAgICAgIHN0YXRlID0gYmFzZShzZWxmKQ0KICAgIGFyZ3MgPSAoc2VsZi5fX2NsYXNzX18sIGJhc2UsIHN0YXRlKQ0KICAgIHRyeToNCiAgICAgICAgZ2V0c3RhdGUgPSBzZWxmLl9fZ2V0c3RhdGVfXw0KICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoNCiAgICAgICAgaWYgZ2V0YXR0cihzZWxmLCAiX19zbG90c19fIiwgTm9uZSk6DQogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImEgY2xhc3MgdGhhdCBkZWZpbmVzIF9fc2xvdHNfXyB3aXRob3V0ICINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGVmaW5pbmcgX19nZXRzdGF0ZV9fIGNhbm5vdCBiZSBwaWNrbGVkIikNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZGljdCA9IHNlbGYuX19kaWN0X18NCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgZGljdCA9IE5vbmUNCiAgICBlbHNlOg0KICAgICAgICBkaWN0ID0gZ2V0c3RhdGUoKQ0KICAgIGlmIGRpY3Q6DQogICAgICAgIHJldHVybiBfcmVjb25zdHJ1Y3RvciwgYXJncywgZGljdA0KICAgIGVsc2U6DQogICAgICAgIHJldHVybiBfcmVjb25zdHJ1Y3RvciwgYXJncw0KDQojIEhlbHBlciBmb3IgX19yZWR1Y2VfZXhfXyBwcm90b2NvbCAyDQoNCmRlZiBfX25ld29ial9fKGNscywgKmFyZ3MpOg0KICAgIHJldHVybiBjbHMuX19uZXdfXyhjbHMsICphcmdzKQ0KDQpkZWYgX3Nsb3RuYW1lcyhjbHMpOg0KICAgICIiIlJldHVybiBhIGxpc3Qgb2Ygc2xvdCBuYW1lcyBmb3IgYSBnaXZlbiBjbGFzcy4NCg0KICAgIFRoaXMgbmVlZHMgdG8gZmluZCBzbG90cyBkZWZpbmVkIGJ5IHRoZSBjbGFzcyBhbmQgaXRzIGJhc2VzLCBzbyB3ZQ0KICAgIGNhbid0IHNpbXBseSByZXR1cm4gdGhlIF9fc2xvdHNfXyBhdHRyaWJ1dGUuICBXZSBtdXN0IHdhbGsgZG93bg0KICAgIHRoZSBNZXRob2QgUmVzb2x1dGlvbiBPcmRlciBhbmQgY29uY2F0ZW5hdGUgdGhlIF9fc2xvdHNfXyBvZiBlYWNoDQogICAgY2xhc3MgZm91bmQgdGhlcmUuICAoVGhpcyBhc3N1bWVzIGNsYXNzZXMgZG9uJ3QgbW9kaWZ5IHRoZWlyDQogICAgX19zbG90c19fIGF0dHJpYnV0ZSB0byBtaXNyZXByZXNlbnQgdGhlaXIgc2xvdHMgYWZ0ZXIgdGhlIGNsYXNzIGlzDQogICAgZGVmaW5lZC4pDQogICAgIiIiDQoNCiAgICAjIEdldCB0aGUgdmFsdWUgZnJvbSBhIGNhY2hlIGluIHRoZSBjbGFzcyBpZiBwb3NzaWJsZQ0KICAgIG5hbWVzID0gY2xzLl9fZGljdF9fLmdldCgiX19zbG90bmFtZXNfXyIpDQogICAgaWYgbmFtZXMgaXMgbm90IE5vbmU6DQogICAgICAgIHJldHVybiBuYW1lcw0KDQogICAgIyBOb3QgY2FjaGVkIC0tIGNhbGN1bGF0ZSB0aGUgdmFsdWUNCiAgICBuYW1lcyA9IFtdDQogICAgaWYgbm90IGhhc2F0dHIoY2xzLCAiX19zbG90c19fIik6DQogICAgICAgICMgVGhpcyBjbGFzcyBoYXMgbm8gc2xvdHMNCiAgICAgICAgcGFzcw0KICAgIGVsc2U6DQogICAgICAgICMgU2xvdHMgZm91bmQgLS0gZ2F0aGVyIHNsb3QgbmFtZXMgZnJvbSBhbGwgYmFzZSBjbGFzc2VzDQogICAgICAgIGZvciBjIGluIGNscy5fX21yb19fOg0KICAgICAgICAgICAgaWYgIl9fc2xvdHNfXyIgaW4gYy5fX2RpY3RfXzoNCiAgICAgICAgICAgICAgICBzbG90cyA9IGMuX19kaWN0X19bJ19fc2xvdHNfXyddDQogICAgICAgICAgICAgICAgIyBpZiBjbGFzcyBoYXMgYSBzaW5nbGUgc2xvdCwgaXQgY2FuIGJlIGdpdmVuIGFzIGEgc3RyaW5nDQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShzbG90cywgc3RyKToNCiAgICAgICAgICAgICAgICAgICAgc2xvdHMgPSAoc2xvdHMsKQ0KICAgICAgICAgICAgICAgIGZvciBuYW1lIGluIHNsb3RzOg0KICAgICAgICAgICAgICAgICAgICAjIHNwZWNpYWwgZGVzY3JpcHRvcnMNCiAgICAgICAgICAgICAgICAgICAgaWYgbmFtZSBpbiAoIl9fZGljdF9fIiwgIl9fd2Vha3JlZl9fIik6DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICAjIG1hbmdsZWQgbmFtZXMNCiAgICAgICAgICAgICAgICAgICAgZWxpZiBuYW1lLnN0YXJ0c3dpdGgoJ19fJykgYW5kIG5vdCBuYW1lLmVuZHN3aXRoKCdfXycpOg0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXMuYXBwZW5kKCdfJXMlcycgJSAoYy5fX25hbWVfXywgbmFtZSkpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lcy5hcHBlbmQobmFtZSkNCg0KICAgICMgQ2FjaGUgdGhlIG91dGNvbWUgaW4gdGhlIGNsYXNzIGlmIGF0IGFsbCBwb3NzaWJsZQ0KICAgIHRyeToNCiAgICAgICAgY2xzLl9fc2xvdG5hbWVzX18gPSBuYW1lcw0KICAgIGV4Y2VwdDoNCiAgICAgICAgcGFzcyAjIEJ1dCBkb24ndCBkaWUgaWYgd2UgY2FuJ3QNCg0KICAgIHJldHVybiBuYW1lcw0KDQojIEEgcmVnaXN0cnkgb2YgZXh0ZW5zaW9uIGNvZGVzLiAgVGhpcyBpcyBhbiBhZC1ob2MgY29tcHJlc3Npb24NCiMgbWVjaGFuaXNtLiAgV2hlbmV2ZXIgYSBnbG9iYWwgcmVmZXJlbmNlIHRvIDxtb2R1bGU+LCA8bmFtZT4gaXMgYWJvdXQNCiMgdG8gYmUgcGlja2xlZCwgdGhlICg8bW9kdWxlPiwgPG5hbWU+KSB0dXBsZSBpcyBsb29rZWQgdXAgaGVyZSB0byBzZWUNCiMgaWYgaXQgaXMgYSByZWdpc3RlcmVkIGV4dGVuc2lvbiBjb2RlIGZvciBpdC4gIEV4dGVuc2lvbiBjb2RlcyBhcmUNCiMgdW5pdmVyc2FsLCBzbyB0aGF0IHRoZSBtZWFuaW5nIG9mIGEgcGlja2xlIGRvZXMgbm90IGRlcGVuZCBvbg0KIyBjb250ZXh0LiAgKFRoZXJlIGFyZSBhbHNvIHNvbWUgY29kZXMgcmVzZXJ2ZWQgZm9yIGxvY2FsIHVzZSB0aGF0DQojIGRvbid0IGhhdmUgdGhpcyByZXN0cmljdGlvbi4pICBDb2RlcyBhcmUgcG9zaXRpdmUgaW50czsgMCBpcw0KIyByZXNlcnZlZC4NCg0KX2V4dGVuc2lvbl9yZWdpc3RyeSA9IHt9ICAgICAgICAgICAgICAgICMga2V5IC0+IGNvZGUNCl9pbnZlcnRlZF9yZWdpc3RyeSA9IHt9ICAgICAgICAgICAgICAgICAjIGNvZGUgLT4ga2V5DQpfZXh0ZW5zaW9uX2NhY2hlID0ge30gICAgICAgICAgICAgICAgICAgIyBjb2RlIC0+IG9iamVjdA0KIyBEb24ndCBldmVyIHJlYmluZCB0aG9zZSBuYW1lczogIHBpY2tsaW5nIGdyYWJzIGEgcmVmZXJlbmNlIHRvIHRoZW0gd2hlbg0KIyBpdCdzIGluaXRpYWxpemVkLCBhbmQgd29uJ3Qgc2VlIGEgcmViaW5kaW5nLg0KDQpkZWYgYWRkX2V4dGVuc2lvbihtb2R1bGUsIG5hbWUsIGNvZGUpOg0KICAgICIiIlJlZ2lzdGVyIGFuIGV4dGVuc2lvbiBjb2RlLiIiIg0KICAgIGNvZGUgPSBpbnQoY29kZSkNCiAgICBpZiBub3QgMSA8PSBjb2RlIDw9IDB4N2ZmZmZmZmY6DQogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImNvZGUgb3V0IG9mIHJhbmdlIikNCiAgICBrZXkgPSAobW9kdWxlLCBuYW1lKQ0KICAgIGlmIChfZXh0ZW5zaW9uX3JlZ2lzdHJ5LmdldChrZXkpID09IGNvZGUgYW5kDQogICAgICAgIF9pbnZlcnRlZF9yZWdpc3RyeS5nZXQoY29kZSkgPT0ga2V5KToNCiAgICAgICAgcmV0dXJuICMgUmVkdW5kYW50IHJlZ2lzdHJhdGlvbnMgYXJlIGJlbmlnbg0KICAgIGlmIGtleSBpbiBfZXh0ZW5zaW9uX3JlZ2lzdHJ5Og0KICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJrZXkgJXMgaXMgYWxyZWFkeSByZWdpc3RlcmVkIHdpdGggY29kZSAlcyIgJQ0KICAgICAgICAgICAgICAgICAgICAgICAgIChrZXksIF9leHRlbnNpb25fcmVnaXN0cnlba2V5XSkpDQogICAgaWYgY29kZSBpbiBfaW52ZXJ0ZWRfcmVnaXN0cnk6DQogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImNvZGUgJXMgaXMgYWxyZWFkeSBpbiB1c2UgZm9yIGtleSAlcyIgJQ0KICAgICAgICAgICAgICAgICAgICAgICAgIChjb2RlLCBfaW52ZXJ0ZWRfcmVnaXN0cnlbY29kZV0pKQ0KICAgIF9leHRlbnNpb25fcmVnaXN0cnlba2V5XSA9IGNvZGUNCiAgICBfaW52ZXJ0ZWRfcmVnaXN0cnlbY29kZV0gPSBrZXkNCg0KZGVmIHJlbW92ZV9leHRlbnNpb24obW9kdWxlLCBuYW1lLCBjb2RlKToNCiAgICAiIiJVbnJlZ2lzdGVyIGFuIGV4dGVuc2lvbiBjb2RlLiAgRm9yIHRlc3Rpbmcgb25seS4iIiINCiAgICBrZXkgPSAobW9kdWxlLCBuYW1lKQ0KICAgIGlmIChfZXh0ZW5zaW9uX3JlZ2lzdHJ5LmdldChrZXkpICE9IGNvZGUgb3INCiAgICAgICAgX2ludmVydGVkX3JlZ2lzdHJ5LmdldChjb2RlKSAhPSBrZXkpOg0KICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJrZXkgJXMgaXMgbm90IHJlZ2lzdGVyZWQgd2l0aCBjb2RlICVzIiAlDQogICAgICAgICAgICAgICAgICAgICAgICAgKGtleSwgY29kZSkpDQogICAgZGVsIF9leHRlbnNpb25fcmVnaXN0cnlba2V5XQ0KICAgIGRlbCBfaW52ZXJ0ZWRfcmVnaXN0cnlbY29kZV0NCiAgICBpZiBjb2RlIGluIF9leHRlbnNpb25fY2FjaGU6DQogICAgICAgIGRlbCBfZXh0ZW5zaW9uX2NhY2hlW2NvZGVdDQoNCmRlZiBjbGVhcl9leHRlbnNpb25fY2FjaGUoKToNCiAgICBfZXh0ZW5zaW9uX2NhY2hlLmNsZWFyKCkNCg0KIyBTdGFuZGFyZCBleHRlbnNpb24gY29kZSBhc3NpZ25tZW50cw0KDQojIFJlc2VydmVkIHJhbmdlcw0KDQojIEZpcnN0ICBMYXN0IENvdW50ICBQdXJwb3NlDQojICAgICAxICAgMTI3ICAgMTI3ICBSZXNlcnZlZCBmb3IgUHl0aG9uIHN0YW5kYXJkIGxpYnJhcnkNCiMgICAxMjggICAxOTEgICAgNjQgIFJlc2VydmVkIGZvciBab3BlDQojICAgMTkyICAgMjM5ICAgIDQ4ICBSZXNlcnZlZCBmb3IgM3JkIHBhcnRpZXMNCiMgICAyNDAgICAyNTUgICAgMTYgIFJlc2VydmVkIGZvciBwcml2YXRlIHVzZSAod2lsbCBuZXZlciBiZSBhc3NpZ25lZCkNCiMgICAyNTYgICBJbmYgICBJbmYgIFJlc2VydmVkIGZvciBmdXR1cmUgYXNzaWdubWVudA0KDQojIEV4dGVuc2lvbiBjb2RlcyBhcmUgYXNzaWduZWQgYnkgdGhlIFB5dGhvbiBTb2Z0d2FyZSBGb3VuZGF0aW9uLg0K',
'/Lib/base64.py':'IyEgL3Vzci9iaW4vcHl0aG9uMy4zCgoiIiJSRkMgMzU0ODogQmFzZTE2LCBCYXNlMzIsIEJhc2U2NCBEYXRhIEVuY29kaW5ncyIiIgoKIyBNb2RpZmllZCAwNC1PY3QtMTk5NSBieSBKYWNrIEphbnNlbiB0byB1c2UgYmluYXNjaWkgbW9kdWxlCiMgTW9kaWZpZWQgMzAtRGVjLTIwMDMgYnkgQmFycnkgV2Fyc2F3IHRvIGFkZCBmdWxsIFJGQyAzNTQ4IHN1cHBvcnQKIyBNb2RpZmllZCAyMi1NYXktMjAwNyBieSBHdWlkbyB2YW4gUm9zc3VtIHRvIHVzZSBieXRlcyBldmVyeXdoZXJlCgppbXBvcnQgcmUKaW1wb3J0IHN0cnVjdAppbXBvcnQgYmluYXNjaWkKCgpfX2FsbF9fID0gWwogICAgIyBMZWdhY3kgaW50ZXJmYWNlIGV4cG9ydHMgdHJhZGl0aW9uYWwgUkZDIDE1MjEgQmFzZTY0IGVuY29kaW5ncwogICAgJ2VuY29kZScsICdkZWNvZGUnLCAnZW5jb2RlYnl0ZXMnLCAnZGVjb2RlYnl0ZXMnLAogICAgIyBHZW5lcmFsaXplZCBpbnRlcmZhY2UgZm9yIG90aGVyIGVuY29kaW5ncwogICAgJ2I2NGVuY29kZScsICdiNjRkZWNvZGUnLCAnYjMyZW5jb2RlJywgJ2IzMmRlY29kZScsCiAgICAnYjE2ZW5jb2RlJywgJ2IxNmRlY29kZScsCiAgICAjIFN0YW5kYXJkIEJhc2U2NCBlbmNvZGluZwogICAgJ3N0YW5kYXJkX2I2NGVuY29kZScsICdzdGFuZGFyZF9iNjRkZWNvZGUnLAogICAgIyBTb21lIGNvbW1vbiBCYXNlNjQgYWx0ZXJuYXRpdmVzLiAgQXMgcmVmZXJlbmNlZCBieSBSRkMgMzQ1OCwgc2VlIHRocmVhZAogICAgIyBzdGFydGluZyBhdDoKICAgICMKICAgICMgaHR0cDovL3pncC5vcmcvcGlwZXJtYWlsL3AycC1oYWNrZXJzLzIwMDEtU2VwdGVtYmVyLzAwMDMxNi5odG1sCiAgICAndXJsc2FmZV9iNjRlbmNvZGUnLCAndXJsc2FmZV9iNjRkZWNvZGUnLAogICAgXQoKCmJ5dGVzX3R5cGVzID0gKGJ5dGVzLCBieXRlYXJyYXkpICAjIFR5cGVzIGFjY2VwdGFibGUgYXMgYmluYXJ5IGRhdGEKCmRlZiBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShzKToKICAgIGlmIGlzaW5zdGFuY2Uocywgc3RyKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBzLmVuY29kZSgnYXNjaWknKQogICAgICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ3N0cmluZyBhcmd1bWVudCBzaG91bGQgY29udGFpbiBvbmx5IEFTQ0lJIGNoYXJhY3RlcnMnKQogICAgZWxpZiBpc2luc3RhbmNlKHMsIGJ5dGVzX3R5cGVzKToKICAgICAgICByZXR1cm4gcwogICAgZWxzZToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoImFyZ3VtZW50IHNob3VsZCBiZSBieXRlcyBvciBBU0NJSSBzdHJpbmcsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKCgoKIyBCYXNlNjQgZW5jb2RpbmcvZGVjb2RpbmcgdXNlcyBiaW5hc2NpaQoKZGVmIGI2NGVuY29kZShzLCBhbHRjaGFycz1Ob25lKToKICAgICIiIkVuY29kZSBhIGJ5dGUgc3RyaW5nIHVzaW5nIEJhc2U2NC4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBlbmNvZGUuICBPcHRpb25hbCBhbHRjaGFycyBtdXN0IGJlIGEgYnl0ZQogICAgc3RyaW5nIG9mIGxlbmd0aCAyIHdoaWNoIHNwZWNpZmllcyBhbiBhbHRlcm5hdGl2ZSBhbHBoYWJldCBmb3IgdGhlCiAgICAnKycgYW5kICcvJyBjaGFyYWN0ZXJzLiAgVGhpcyBhbGxvd3MgYW4gYXBwbGljYXRpb24gdG8KICAgIGUuZy4gZ2VuZXJhdGUgdXJsIG9yIGZpbGVzeXN0ZW0gc2FmZSBCYXNlNjQgc3RyaW5ncy4KCiAgICBUaGUgZW5jb2RlZCBieXRlIHN0cmluZyBpcyByZXR1cm5lZC4KICAgICIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgICMgU3RyaXAgb2ZmIHRoZSB0cmFpbGluZyBuZXdsaW5lCiAgICBlbmNvZGVkID0gYmluYXNjaWkuYjJhX2Jhc2U2NChzKVs6LTFdCiAgICBpZiBhbHRjaGFycyBpcyBub3QgTm9uZToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhbHRjaGFycywgYnl0ZXNfdHlwZXMpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImV4cGVjdGVkIGJ5dGVzLCBub3QgJXMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAlIGFsdGNoYXJzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgICAgICBhc3NlcnQgbGVuKGFsdGNoYXJzKSA9PSAyLCByZXByKGFsdGNoYXJzKQogICAgICAgIHJldHVybiBlbmNvZGVkLnRyYW5zbGF0ZShieXRlcy5tYWtldHJhbnMoYicrLycsIGFsdGNoYXJzKSkKICAgIHJldHVybiBlbmNvZGVkCgoKZGVmIGI2NGRlY29kZShzLCBhbHRjaGFycz1Ob25lLCB2YWxpZGF0ZT1GYWxzZSk6CiAgICAiIiJEZWNvZGUgYSBCYXNlNjQgZW5jb2RlZCBieXRlIHN0cmluZy4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBkZWNvZGUuICBPcHRpb25hbCBhbHRjaGFycyBtdXN0IGJlIGEKICAgIHN0cmluZyBvZiBsZW5ndGggMiB3aGljaCBzcGVjaWZpZXMgdGhlIGFsdGVybmF0aXZlIGFscGhhYmV0IHVzZWQKICAgIGluc3RlYWQgb2YgdGhlICcrJyBhbmQgJy8nIGNoYXJhY3RlcnMuCgogICAgVGhlIGRlY29kZWQgc3RyaW5nIGlzIHJldHVybmVkLiAgQSBiaW5hc2NpaS5FcnJvciBpcyByYWlzZWQgaWYgcyBpcwogICAgaW5jb3JyZWN0bHkgcGFkZGVkLgoKICAgIElmIHZhbGlkYXRlIGlzIEZhbHNlICh0aGUgZGVmYXVsdCksIG5vbi1iYXNlNjQtYWxwaGFiZXQgY2hhcmFjdGVycyBhcmUKICAgIGRpc2NhcmRlZCBwcmlvciB0byB0aGUgcGFkZGluZyBjaGVjay4gIElmIHZhbGlkYXRlIGlzIFRydWUsCiAgICBub24tYmFzZTY0LWFscGhhYmV0IGNoYXJhY3RlcnMgaW4gdGhlIGlucHV0IHJlc3VsdCBpbiBhIGJpbmFzY2lpLkVycm9yLgogICAgIiIiCiAgICBzID0gX2J5dGVzX2Zyb21fZGVjb2RlX2RhdGEocykKICAgIGlmIGFsdGNoYXJzIGlzIG5vdCBOb25lOgogICAgICAgIGFsdGNoYXJzID0gX2J5dGVzX2Zyb21fZGVjb2RlX2RhdGEoYWx0Y2hhcnMpCiAgICAgICAgYXNzZXJ0IGxlbihhbHRjaGFycykgPT0gMiwgcmVwcihhbHRjaGFycykKICAgICAgICBzID0gcy50cmFuc2xhdGUoYnl0ZXMubWFrZXRyYW5zKGFsdGNoYXJzLCBiJysvJykpCiAgICBpZiB2YWxpZGF0ZSBhbmQgbm90IHJlLm1hdGNoKGInXltBLVphLXowLTkrL10qPXswLDJ9JCcsIHMpOgogICAgICAgIHJhaXNlIGJpbmFzY2lpLkVycm9yKCdOb24tYmFzZTY0IGRpZ2l0IGZvdW5kJykKICAgIHJldHVybiBiaW5hc2NpaS5hMmJfYmFzZTY0KHMpCgoKZGVmIHN0YW5kYXJkX2I2NGVuY29kZShzKToKICAgICIiIkVuY29kZSBhIGJ5dGUgc3RyaW5nIHVzaW5nIHRoZSBzdGFuZGFyZCBCYXNlNjQgYWxwaGFiZXQuCgogICAgcyBpcyB0aGUgYnl0ZSBzdHJpbmcgdG8gZW5jb2RlLiAgVGhlIGVuY29kZWQgYnl0ZSBzdHJpbmcgaXMgcmV0dXJuZWQuCiAgICAiIiIKICAgIHJldHVybiBiNjRlbmNvZGUocykKCmRlZiBzdGFuZGFyZF9iNjRkZWNvZGUocyk6CiAgICAiIiJEZWNvZGUgYSBieXRlIHN0cmluZyBlbmNvZGVkIHdpdGggdGhlIHN0YW5kYXJkIEJhc2U2NCBhbHBoYWJldC4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBkZWNvZGUuICBUaGUgZGVjb2RlZCBieXRlIHN0cmluZyBpcwogICAgcmV0dXJuZWQuICBiaW5hc2NpaS5FcnJvciBpcyByYWlzZWQgaWYgdGhlIGlucHV0IGlzIGluY29ycmVjdGx5CiAgICBwYWRkZWQgb3IgaWYgdGhlcmUgYXJlIG5vbi1hbHBoYWJldCBjaGFyYWN0ZXJzIHByZXNlbnQgaW4gdGhlCiAgICBpbnB1dC4KICAgICIiIgogICAgcmV0dXJuIGI2NGRlY29kZShzKQoKI2ZpeG1lIGJyeXRob24KI191cmxzYWZlX2VuY29kZV90cmFuc2xhdGlvbiA9IGJ5dGVzLm1ha2V0cmFucyhiJysvJywgYictXycpCiNfdXJsc2FmZV9kZWNvZGVfdHJhbnNsYXRpb24gPSBieXRlcy5tYWtldHJhbnMoYictXycsIGInKy8nKQoKZGVmIHVybHNhZmVfYjY0ZW5jb2RlKHMpOgogICAgIiIiRW5jb2RlIGEgYnl0ZSBzdHJpbmcgdXNpbmcgYSB1cmwtc2FmZSBCYXNlNjQgYWxwaGFiZXQuCgogICAgcyBpcyB0aGUgYnl0ZSBzdHJpbmcgdG8gZW5jb2RlLiAgVGhlIGVuY29kZWQgYnl0ZSBzdHJpbmcgaXMKICAgIHJldHVybmVkLiAgVGhlIGFscGhhYmV0IHVzZXMgJy0nIGluc3RlYWQgb2YgJysnIGFuZCAnXycgaW5zdGVhZCBvZgogICAgJy8nLgogICAgIiIiCiAgICByZXR1cm4gYjY0ZW5jb2RlKHMpLnRyYW5zbGF0ZShfdXJsc2FmZV9lbmNvZGVfdHJhbnNsYXRpb24pCgpkZWYgdXJsc2FmZV9iNjRkZWNvZGUocyk6CiAgICAiIiJEZWNvZGUgYSBieXRlIHN0cmluZyBlbmNvZGVkIHdpdGggdGhlIHN0YW5kYXJkIEJhc2U2NCBhbHBoYWJldC4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBkZWNvZGUuICBUaGUgZGVjb2RlZCBieXRlIHN0cmluZyBpcwogICAgcmV0dXJuZWQuICBiaW5hc2NpaS5FcnJvciBpcyByYWlzZWQgaWYgdGhlIGlucHV0IGlzIGluY29ycmVjdGx5CiAgICBwYWRkZWQgb3IgaWYgdGhlcmUgYXJlIG5vbi1hbHBoYWJldCBjaGFyYWN0ZXJzIHByZXNlbnQgaW4gdGhlCiAgICBpbnB1dC4KCiAgICBUaGUgYWxwaGFiZXQgdXNlcyAnLScgaW5zdGVhZCBvZiAnKycgYW5kICdfJyBpbnN0ZWFkIG9mICcvJy4KICAgICIiIgogICAgcyA9IF9ieXRlc19mcm9tX2RlY29kZV9kYXRhKHMpCiAgICBzID0gcy50cmFuc2xhdGUoX3VybHNhZmVfZGVjb2RlX3RyYW5zbGF0aW9uKQogICAgcmV0dXJuIGI2NGRlY29kZShzKQoKCgojIEJhc2UzMiBlbmNvZGluZy9kZWNvZGluZyBtdXN0IGJlIGRvbmUgaW4gUHl0aG9uCl9iMzJhbHBoYWJldCA9IHsKICAgIDA6IGInQScsICA5OiBiJ0onLCAxODogYidTJywgMjc6IGInMycsCiAgICAxOiBiJ0InLCAxMDogYidLJywgMTk6IGInVCcsIDI4OiBiJzQnLAogICAgMjogYidDJywgMTE6IGInTCcsIDIwOiBiJ1UnLCAyOTogYic1JywKICAgIDM6IGInRCcsIDEyOiBiJ00nLCAyMTogYidWJywgMzA6IGInNicsCiAgICA0OiBiJ0UnLCAxMzogYidOJywgMjI6IGInVycsIDMxOiBiJzcnLAogICAgNTogYidGJywgMTQ6IGInTycsIDIzOiBiJ1gnLAogICAgNjogYidHJywgMTU6IGInUCcsIDI0OiBiJ1knLAogICAgNzogYidIJywgMTY6IGInUScsIDI1OiBiJ1onLAogICAgODogYidJJywgMTc6IGInUicsIDI2OiBiJzInLAogICAgfQoKI2ZpeG1lIGJyeXRob24KI19iMzJ0YWIgPSBbdlswXSBmb3IgaywgdiBpbiBzb3J0ZWQoX2IzMmFscGhhYmV0Lml0ZW1zKCkpXQojX2IzMnJldiA9IGRpY3QoWyh2WzBdLCBrKSBmb3IgaywgdiBpbiBfYjMyYWxwaGFiZXQuaXRlbXMoKV0pCgoKZGVmIGIzMmVuY29kZShzKToKICAgICIiIkVuY29kZSBhIGJ5dGUgc3RyaW5nIHVzaW5nIEJhc2UzMi4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBlbmNvZGUuICBUaGUgZW5jb2RlZCBieXRlIHN0cmluZyBpcyByZXR1cm5lZC4KICAgICIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgIHF1YW50YSwgbGVmdG92ZXIgPSBkaXZtb2QobGVuKHMpLCA1KQogICAgIyBQYWQgdGhlIGxhc3QgcXVhbnR1bSB3aXRoIHplcm8gYml0cyBpZiBuZWNlc3NhcnkKICAgIGlmIGxlZnRvdmVyOgogICAgICAgIHMgPSBzICsgYnl0ZXMoNSAtIGxlZnRvdmVyKSAgIyBEb24ndCB1c2UgKz0gIQogICAgICAgIHF1YW50YSArPSAxCiAgICBlbmNvZGVkID0gYnl0ZXMoKQogICAgZm9yIGkgaW4gcmFuZ2UocXVhbnRhKToKICAgICAgICAjIGMxIGFuZCBjMiBhcmUgMTYgYml0cyB3aWRlLCBjMyBpcyA4IGJpdHMgd2lkZS4gIFRoZSBpbnRlbnQgb2YgdGhpcwogICAgICAgICMgY29kZSBpcyB0byBwcm9jZXNzIHRoZSA0MCBiaXRzIGluIHVuaXRzIG9mIDUgYml0cy4gIFNvIHdlIHRha2UgdGhlIDEKICAgICAgICAjIGxlZnRvdmVyIGJpdCBvZiBjMSBhbmQgdGFjayBpdCBvbnRvIGMyLiAgVGhlbiB3ZSB0YWtlIHRoZSAyIGxlZnRvdmVyCiAgICAgICAgIyBiaXRzIG9mIGMyIGFuZCB0YWNrIHRoZW0gb250byBjMy4gIFRoZSBzaGlmdHMgYW5kIG1hc2tzIGFyZSBpbnRlbmRlZAogICAgICAgICMgdG8gZ2l2ZSB1cyB2YWx1ZXMgb2YgZXhhY3RseSA1IGJpdHMgaW4gd2lkdGguCiAgICAgICAgYzEsIGMyLCBjMyA9IHN0cnVjdC51bnBhY2soJyFISEInLCBzW2kqNTooaSsxKSo1XSkKICAgICAgICBjMiArPSAoYzEgJiAxKSA8PCAxNiAjIDE3IGJpdHMgd2lkZQogICAgICAgIGMzICs9IChjMiAmIDMpIDw8IDggICMgMTAgYml0cyB3aWRlCiAgICAgICAgZW5jb2RlZCArPSBieXRlcyhbX2IzMnRhYltjMSA+PiAxMV0sICAgICAgICAgIyBiaXRzIDEgLSA1CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2IzMnRhYlsoYzEgPj4gNikgJiAweDFmXSwgIyBiaXRzIDYgLSAxMAogICAgICAgICAgICAgICAgICAgICAgICAgIF9iMzJ0YWJbKGMxID4+IDEpICYgMHgxZl0sICMgYml0cyAxMSAtIDE1CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2IzMnRhYltjMiA+PiAxMl0sICAgICAgICAgIyBiaXRzIDE2IC0gMjAgKDEgLSA1KQogICAgICAgICAgICAgICAgICAgICAgICAgIF9iMzJ0YWJbKGMyID4+IDcpICYgMHgxZl0sICMgYml0cyAyMSAtIDI1ICg2IC0gMTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2IzMnRhYlsoYzIgPj4gMikgJiAweDFmXSwgIyBiaXRzIDI2IC0gMzAgKDExIC0gMTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2IzMnRhYltjMyA+PiA1XSwgICAgICAgICAgIyBiaXRzIDMxIC0gMzUgKDEgLSA1KQogICAgICAgICAgICAgICAgICAgICAgICAgIF9iMzJ0YWJbYzMgJiAweDFmXSwgICAgICAgICMgYml0cyAzNiAtIDQwICgxIC0gNSkKICAgICAgICAgICAgICAgICAgICAgICAgICBdKQogICAgIyBBZGp1c3QgZm9yIGFueSBsZWZ0b3ZlciBwYXJ0aWFsIHF1YW50YQogICAgaWYgbGVmdG92ZXIgPT0gMToKICAgICAgICByZXR1cm4gZW5jb2RlZFs6LTZdICsgYic9PT09PT0nCiAgICBlbGlmIGxlZnRvdmVyID09IDI6CiAgICAgICAgcmV0dXJuIGVuY29kZWRbOi00XSArIGInPT09PScKICAgIGVsaWYgbGVmdG92ZXIgPT0gMzoKICAgICAgICByZXR1cm4gZW5jb2RlZFs6LTNdICsgYic9PT0nCiAgICBlbGlmIGxlZnRvdmVyID09IDQ6CiAgICAgICAgcmV0dXJuIGVuY29kZWRbOi0xXSArIGInPScKICAgIHJldHVybiBlbmNvZGVkCgoKZGVmIGIzMmRlY29kZShzLCBjYXNlZm9sZD1GYWxzZSwgbWFwMDE9Tm9uZSk6CiAgICAiIiJEZWNvZGUgYSBCYXNlMzIgZW5jb2RlZCBieXRlIHN0cmluZy4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBkZWNvZGUuICBPcHRpb25hbCBjYXNlZm9sZCBpcyBhIGZsYWcKICAgIHNwZWNpZnlpbmcgd2hldGhlciBhIGxvd2VyY2FzZSBhbHBoYWJldCBpcyBhY2NlcHRhYmxlIGFzIGlucHV0LgogICAgRm9yIHNlY3VyaXR5IHB1cnBvc2VzLCB0aGUgZGVmYXVsdCBpcyBGYWxzZS4KCiAgICBSRkMgMzU0OCBhbGxvd3MgZm9yIG9wdGlvbmFsIG1hcHBpbmcgb2YgdGhlIGRpZ2l0IDAgKHplcm8pIHRvIHRoZQogICAgbGV0dGVyIE8gKG9oKSwgYW5kIGZvciBvcHRpb25hbCBtYXBwaW5nIG9mIHRoZSBkaWdpdCAxIChvbmUpIHRvCiAgICBlaXRoZXIgdGhlIGxldHRlciBJIChleWUpIG9yIGxldHRlciBMIChlbCkuICBUaGUgb3B0aW9uYWwgYXJndW1lbnQKICAgIG1hcDAxIHdoZW4gbm90IE5vbmUsIHNwZWNpZmllcyB3aGljaCBsZXR0ZXIgdGhlIGRpZ2l0IDEgc2hvdWxkIGJlCiAgICBtYXBwZWQgdG8gKHdoZW4gbWFwMDEgaXMgbm90IE5vbmUsIHRoZSBkaWdpdCAwIGlzIGFsd2F5cyBtYXBwZWQgdG8KICAgIHRoZSBsZXR0ZXIgTykuICBGb3Igc2VjdXJpdHkgcHVycG9zZXMgdGhlIGRlZmF1bHQgaXMgTm9uZSwgc28gdGhhdAogICAgMCBhbmQgMSBhcmUgbm90IGFsbG93ZWQgaW4gdGhlIGlucHV0LgoKICAgIFRoZSBkZWNvZGVkIGJ5dGUgc3RyaW5nIGlzIHJldHVybmVkLiAgYmluYXNjaWkuRXJyb3IgaXMgcmFpc2VkIGlmCiAgICB0aGUgaW5wdXQgaXMgaW5jb3JyZWN0bHkgcGFkZGVkIG9yIGlmIHRoZXJlIGFyZSBub24tYWxwaGFiZXQKICAgIGNoYXJhY3RlcnMgcHJlc2VudCBpbiB0aGUgaW5wdXQuCiAgICAiIiIKICAgIHMgPSBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShzKQogICAgcXVhbnRhLCBsZWZ0b3ZlciA9IGRpdm1vZChsZW4ocyksIDgpCiAgICBpZiBsZWZ0b3ZlcjoKICAgICAgICByYWlzZSBiaW5hc2NpaS5FcnJvcignSW5jb3JyZWN0IHBhZGRpbmcnKQogICAgIyBIYW5kbGUgc2VjdGlvbiAyLjQgemVybyBhbmQgb25lIG1hcHBpbmcuICBUaGUgZmxhZyBtYXAwMSB3aWxsIGJlIGVpdGhlcgogICAgIyBGYWxzZSwgb3IgdGhlIGNoYXJhY3RlciB0byBtYXAgdGhlIGRpZ2l0IDEgKG9uZSkgdG8uICBJdCBzaG91bGQgYmUKICAgICMgZWl0aGVyIEwgKGVsKSBvciBJIChleWUpLgogICAgaWYgbWFwMDEgaXMgbm90IE5vbmU6CiAgICAgICAgbWFwMDEgPSBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShtYXAwMSkKICAgICAgICBhc3NlcnQgbGVuKG1hcDAxKSA9PSAxLCByZXByKG1hcDAxKQogICAgICAgIHMgPSBzLnRyYW5zbGF0ZShieXRlcy5tYWtldHJhbnMoYicwMScsIGInTycgKyBtYXAwMSkpCiAgICBpZiBjYXNlZm9sZDoKICAgICAgICBzID0gcy51cHBlcigpCiAgICAjIFN0cmlwIG9mZiBwYWQgY2hhcmFjdGVycyBmcm9tIHRoZSByaWdodC4gIFdlIG5lZWQgdG8gY291bnQgdGhlIHBhZAogICAgIyBjaGFyYWN0ZXJzIGJlY2F1c2UgdGhpcyB3aWxsIHRlbGwgdXMgaG93IG1hbnkgbnVsbCBieXRlcyB0byByZW1vdmUgZnJvbQogICAgIyB0aGUgZW5kIG9mIHRoZSBkZWNvZGVkIHN0cmluZy4KICAgIHBhZGNoYXJzID0gMAogICAgbW8gPSByZS5zZWFyY2goYicoP1A8cGFkPls9XSopJCcsIHMpCiAgICBpZiBtbzoKICAgICAgICBwYWRjaGFycyA9IGxlbihtby5ncm91cCgncGFkJykpCiAgICAgICAgaWYgcGFkY2hhcnMgPiAwOgogICAgICAgICAgICBzID0gc1s6LXBhZGNoYXJzXQogICAgIyBOb3cgZGVjb2RlIHRoZSBmdWxsIHF1YW50YQogICAgcGFydHMgPSBbXQogICAgYWNjID0gMAogICAgc2hpZnQgPSAzNQogICAgZm9yIGMgaW4gczoKICAgICAgICB2YWwgPSBfYjMycmV2LmdldChjKQogICAgICAgIGlmIHZhbCBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ05vbi1iYXNlMzIgZGlnaXQgZm91bmQnKQogICAgICAgIGFjYyArPSBfYjMycmV2W2NdIDw8IHNoaWZ0CiAgICAgICAgc2hpZnQgLT0gNQogICAgICAgIGlmIHNoaWZ0IDwgMDoKICAgICAgICAgICAgcGFydHMuYXBwZW5kKGJpbmFzY2lpLnVuaGV4bGlmeShieXRlcygnJTAxMHgnICUgYWNjLCAiYXNjaWkiKSkpCiAgICAgICAgICAgIGFjYyA9IDAKICAgICAgICAgICAgc2hpZnQgPSAzNQogICAgIyBQcm9jZXNzIHRoZSBsYXN0LCBwYXJ0aWFsIHF1YW50YQogICAgbGFzdCA9IGJpbmFzY2lpLnVuaGV4bGlmeShieXRlcygnJTAxMHgnICUgYWNjLCAiYXNjaWkiKSkKICAgIGlmIHBhZGNoYXJzID09IDA6CiAgICAgICAgbGFzdCA9IGInJyAgICAgICAgICAgICAgICAgICAgICAjIE5vIGNoYXJhY3RlcnMKICAgIGVsaWYgcGFkY2hhcnMgPT0gMToKICAgICAgICBsYXN0ID0gbGFzdFs6LTFdCiAgICBlbGlmIHBhZGNoYXJzID09IDM6CiAgICAgICAgbGFzdCA9IGxhc3RbOi0yXQogICAgZWxpZiBwYWRjaGFycyA9PSA0OgogICAgICAgIGxhc3QgPSBsYXN0WzotM10KICAgIGVsaWYgcGFkY2hhcnMgPT0gNjoKICAgICAgICBsYXN0ID0gbGFzdFs6LTRdCiAgICBlbHNlOgogICAgICAgIHJhaXNlIGJpbmFzY2lpLkVycm9yKCdJbmNvcnJlY3QgcGFkZGluZycpCiAgICBwYXJ0cy5hcHBlbmQobGFzdCkKICAgIHJldHVybiBiJycuam9pbihwYXJ0cykKCgoKIyBSRkMgMzU0OCwgQmFzZSAxNiBBbHBoYWJldCBzcGVjaWZpZXMgdXBwZXJjYXNlLCBidXQgaGV4bGlmeSgpIHJldHVybnMKIyBsb3dlcmNhc2UuICBUaGUgUkZDIGFsc28gcmVjb21tZW5kcyBhZ2FpbnN0IGFjY2VwdGluZyBpbnB1dCBjYXNlCiMgaW5zZW5zaXRpdmVseS4KZGVmIGIxNmVuY29kZShzKToKICAgICIiIkVuY29kZSBhIGJ5dGUgc3RyaW5nIHVzaW5nIEJhc2UxNi4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBlbmNvZGUuICBUaGUgZW5jb2RlZCBieXRlIHN0cmluZyBpcyByZXR1cm5lZC4KICAgICIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgIHJldHVybiBiaW5hc2NpaS5oZXhsaWZ5KHMpLnVwcGVyKCkKCgpkZWYgYjE2ZGVjb2RlKHMsIGNhc2Vmb2xkPUZhbHNlKToKICAgICIiIkRlY29kZSBhIEJhc2UxNiBlbmNvZGVkIGJ5dGUgc3RyaW5nLgoKICAgIHMgaXMgdGhlIGJ5dGUgc3RyaW5nIHRvIGRlY29kZS4gIE9wdGlvbmFsIGNhc2Vmb2xkIGlzIGEgZmxhZwogICAgc3BlY2lmeWluZyB3aGV0aGVyIGEgbG93ZXJjYXNlIGFscGhhYmV0IGlzIGFjY2VwdGFibGUgYXMgaW5wdXQuCiAgICBGb3Igc2VjdXJpdHkgcHVycG9zZXMsIHRoZSBkZWZhdWx0IGlzIEZhbHNlLgoKICAgIFRoZSBkZWNvZGVkIGJ5dGUgc3RyaW5nIGlzIHJldHVybmVkLiAgYmluYXNjaWkuRXJyb3IgaXMgcmFpc2VkIGlmCiAgICBzIHdlcmUgaW5jb3JyZWN0bHkgcGFkZGVkIG9yIGlmIHRoZXJlIGFyZSBub24tYWxwaGFiZXQgY2hhcmFjdGVycwogICAgcHJlc2VudCBpbiB0aGUgc3RyaW5nLgogICAgIiIiCiAgICBzID0gX2J5dGVzX2Zyb21fZGVjb2RlX2RhdGEocykKICAgIGlmIGNhc2Vmb2xkOgogICAgICAgIHMgPSBzLnVwcGVyKCkKICAgIGlmIHJlLnNlYXJjaChiJ1teMC05QS1GXScsIHMpOgogICAgICAgIHJhaXNlIGJpbmFzY2lpLkVycm9yKCdOb24tYmFzZTE2IGRpZ2l0IGZvdW5kJykKICAgIHJldHVybiBiaW5hc2NpaS51bmhleGxpZnkocykKCgoKIyBMZWdhY3kgaW50ZXJmYWNlLiAgVGhpcyBjb2RlIGNvdWxkIGJlIGNsZWFuZWQgdXAgc2luY2UgSSBkb24ndCBiZWxpZXZlCiMgYmluYXNjaWkgaGFzIGFueSBsaW5lIGxlbmd0aCBsaW1pdGF0aW9ucy4gIEl0IGp1c3QgZG9lc24ndCBzZWVtIHdvcnRoIGl0CiMgdGhvdWdoLiAgVGhlIGZpbGVzIHNob3VsZCBiZSBvcGVuZWQgaW4gYmluYXJ5IG1vZGUuCgpNQVhMSU5FU0laRSA9IDc2ICMgRXhjbHVkaW5nIHRoZSBDUkxGCk1BWEJJTlNJWkUgPSAoTUFYTElORVNJWkUvLzQpKjMKCmRlZiBlbmNvZGUoaW5wdXQsIG91dHB1dCk6CiAgICAiIiJFbmNvZGUgYSBmaWxlOyBpbnB1dCBhbmQgb3V0cHV0IGFyZSBiaW5hcnkgZmlsZXMuIiIiCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHMgPSBpbnB1dC5yZWFkKE1BWEJJTlNJWkUpCiAgICAgICAgaWYgbm90IHM6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgd2hpbGUgbGVuKHMpIDwgTUFYQklOU0laRToKICAgICAgICAgICAgbnMgPSBpbnB1dC5yZWFkKE1BWEJJTlNJWkUtbGVuKHMpKQogICAgICAgICAgICBpZiBub3QgbnM6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBzICs9IG5zCiAgICAgICAgbGluZSA9IGJpbmFzY2lpLmIyYV9iYXNlNjQocykKICAgICAgICBvdXRwdXQud3JpdGUobGluZSkKCgpkZWYgZGVjb2RlKGlucHV0LCBvdXRwdXQpOgogICAgIiIiRGVjb2RlIGEgZmlsZTsgaW5wdXQgYW5kIG91dHB1dCBhcmUgYmluYXJ5IGZpbGVzLiIiIgogICAgd2hpbGUgVHJ1ZToKICAgICAgICBsaW5lID0gaW5wdXQucmVhZGxpbmUoKQogICAgICAgIGlmIG5vdCBsaW5lOgogICAgICAgICAgICBicmVhawogICAgICAgIHMgPSBiaW5hc2NpaS5hMmJfYmFzZTY0KGxpbmUpCiAgICAgICAgb3V0cHV0LndyaXRlKHMpCgoKZGVmIGVuY29kZWJ5dGVzKHMpOgogICAgIiIiRW5jb2RlIGEgYnl0ZXN0cmluZyBpbnRvIGEgYnl0ZXN0cmluZyBjb250YWluaW5nIG11bHRpcGxlIGxpbmVzCiAgICBvZiBiYXNlLTY0IGRhdGEuIiIiCiAgICBpZiBub3QgaXNpbnN0YW5jZShzLCBieXRlc190eXBlcyk6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJleHBlY3RlZCBieXRlcywgbm90ICVzIiAlIHMuX19jbGFzc19fLl9fbmFtZV9fKQogICAgcGllY2VzID0gW10KICAgIGZvciBpIGluIHJhbmdlKDAsIGxlbihzKSwgTUFYQklOU0laRSk6CiAgICAgICAgY2h1bmsgPSBzW2kgOiBpICsgTUFYQklOU0laRV0KICAgICAgICBwaWVjZXMuYXBwZW5kKGJpbmFzY2lpLmIyYV9iYXNlNjQoY2h1bmspKQogICAgcmV0dXJuIGIiIi5qb2luKHBpZWNlcykKCmRlZiBlbmNvZGVzdHJpbmcocyk6CiAgICAiIiJMZWdhY3kgYWxpYXMgb2YgZW5jb2RlYnl0ZXMoKS4iIiIKICAgIGltcG9ydCB3YXJuaW5ncwogICAgd2FybmluZ3Mud2FybigiZW5jb2Rlc3RyaW5nKCkgaXMgYSBkZXByZWNhdGVkIGFsaWFzLCB1c2UgZW5jb2RlYnl0ZXMoKSIsCiAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgIHJldHVybiBlbmNvZGVieXRlcyhzKQoKCmRlZiBkZWNvZGVieXRlcyhzKToKICAgICIiIkRlY29kZSBhIGJ5dGVzdHJpbmcgb2YgYmFzZS02NCBkYXRhIGludG8gYSBieXRlc3RyaW5nLiIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgIHJldHVybiBiaW5hc2NpaS5hMmJfYmFzZTY0KHMpCgpkZWYgZGVjb2Rlc3RyaW5nKHMpOgogICAgIiIiTGVnYWN5IGFsaWFzIG9mIGRlY29kZWJ5dGVzKCkuIiIiCiAgICBpbXBvcnQgd2FybmluZ3MKICAgIHdhcm5pbmdzLndhcm4oImRlY29kZXN0cmluZygpIGlzIGEgZGVwcmVjYXRlZCBhbGlhcywgdXNlIGRlY29kZWJ5dGVzKCkiLAogICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsIDIpCiAgICByZXR1cm4gZGVjb2RlYnl0ZXMocykKCgojIFVzYWJsZSBhcyBhIHNjcmlwdC4uLgpkZWYgbWFpbigpOgogICAgIiIiU21hbGwgbWFpbiBwcm9ncmFtIiIiCiAgICBpbXBvcnQgc3lzLCBnZXRvcHQKICAgIHRyeToKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChzeXMuYXJndlsxOl0sICdkZXV0JykKICAgIGV4Y2VwdCBnZXRvcHQuZXJyb3IgYXMgbXNnOgogICAgICAgIHN5cy5zdGRvdXQgPSBzeXMuc3RkZXJyCiAgICAgICAgcHJpbnQobXNnKQogICAgICAgIHByaW50KCIiInVzYWdlOiAlcyBbLWR8LWV8LXV8LXRdIFtmaWxlfC1dCiAgICAgICAgLWQsIC11OiBkZWNvZGUKICAgICAgICAtZTogZW5jb2RlIChkZWZhdWx0KQogICAgICAgIC10OiBlbmNvZGUgYW5kIGRlY29kZSBzdHJpbmcgJ0FsYWRkaW46b3BlbiBzZXNhbWUnIiIiJXN5cy5hcmd2WzBdKQogICAgICAgIHN5cy5leGl0KDIpCiAgICBmdW5jID0gZW5jb2RlCiAgICBmb3IgbywgYSBpbiBvcHRzOgogICAgICAgIGlmIG8gPT0gJy1lJzogZnVuYyA9IGVuY29kZQogICAgICAgIGlmIG8gPT0gJy1kJzogZnVuYyA9IGRlY29kZQogICAgICAgIGlmIG8gPT0gJy11JzogZnVuYyA9IGRlY29kZQogICAgICAgIGlmIG8gPT0gJy10JzogdGVzdCgpOyByZXR1cm4KICAgIGlmIGFyZ3MgYW5kIGFyZ3NbMF0gIT0gJy0nOgogICAgICAgIHdpdGggb3BlbihhcmdzWzBdLCAncmInKSBhcyBmOgogICAgICAgICAgICBmdW5jKGYsIHN5cy5zdGRvdXQuYnVmZmVyKQogICAgZWxzZToKICAgICAgICBmdW5jKHN5cy5zdGRpbi5idWZmZXIsIHN5cy5zdGRvdXQuYnVmZmVyKQoKCmRlZiB0ZXN0KCk6CiAgICBzMCA9IGIiQWxhZGRpbjpvcGVuIHNlc2FtZSIKICAgIHByaW50KHJlcHIoczApKQogICAgczEgPSBlbmNvZGVieXRlcyhzMCkKICAgIHByaW50KHJlcHIoczEpKQogICAgczIgPSBkZWNvZGVieXRlcyhzMSkKICAgIHByaW50KHJlcHIoczIpKQogICAgYXNzZXJ0IHMwID09IHMyCgoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIG1haW4oKQo=',
'/Lib/pickle.py':'ZnJvbSBqc29uIGltcG9ydCAq',
'/Lib/token.py':'IiIiVG9rZW4gY29uc3RhbnRzIChmcm9tICJ0b2tlbi5oIikuIiIiDQoNCl9fYWxsX18gPSBbJ3Rva19uYW1lJywgJ0lTVEVSTUlOQUwnLCAnSVNOT05URVJNSU5BTCcsICdJU0VPRiddDQoNCiMgIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZDsgcGxlYXNlIGRvbid0IG11Y2sgaXQgdXAhDQojDQojICBUbyB1cGRhdGUgdGhlIHN5bWJvbHMgaW4gdGhpcyBmaWxlLCAnY2QnIHRvIHRoZSB0b3AgZGlyZWN0b3J5IG9mDQojICB0aGUgcHl0aG9uIHNvdXJjZSB0cmVlIGFmdGVyIGJ1aWxkaW5nIHRoZSBpbnRlcnByZXRlciBhbmQgcnVuOg0KIw0KIyAgICAuL3B5dGhvbiBMaWIvdG9rZW4ucHkNCg0KIy0tc3RhcnQgY29uc3RhbnRzLS0NCkVORE1BUktFUiA9IDANCk5BTUUgPSAxDQpOVU1CRVIgPSAyDQpTVFJJTkcgPSAzDQpORVdMSU5FID0gNA0KSU5ERU5UID0gNQ0KREVERU5UID0gNg0KTFBBUiA9IDcNClJQQVIgPSA4DQpMU1FCID0gOQ0KUlNRQiA9IDEwDQpDT0xPTiA9IDExDQpDT01NQSA9IDEyDQpTRU1JID0gMTMNClBMVVMgPSAxNA0KTUlOVVMgPSAxNQ0KU1RBUiA9IDE2DQpTTEFTSCA9IDE3DQpWQkFSID0gMTgNCkFNUEVSID0gMTkNCkxFU1MgPSAyMA0KR1JFQVRFUiA9IDIxDQpFUVVBTCA9IDIyDQpET1QgPSAyMw0KUEVSQ0VOVCA9IDI0DQpMQlJBQ0UgPSAyNQ0KUkJSQUNFID0gMjYNCkVRRVFVQUwgPSAyNw0KTk9URVFVQUwgPSAyOA0KTEVTU0VRVUFMID0gMjkNCkdSRUFURVJFUVVBTCA9IDMwDQpUSUxERSA9IDMxDQpDSVJDVU1GTEVYID0gMzINCkxFRlRTSElGVCA9IDMzDQpSSUdIVFNISUZUID0gMzQNCkRPVUJMRVNUQVIgPSAzNQ0KUExVU0VRVUFMID0gMzYNCk1JTkVRVUFMID0gMzcNClNUQVJFUVVBTCA9IDM4DQpTTEFTSEVRVUFMID0gMzkNClBFUkNFTlRFUVVBTCA9IDQwDQpBTVBFUkVRVUFMID0gNDENClZCQVJFUVVBTCA9IDQyDQpDSVJDVU1GTEVYRVFVQUwgPSA0Mw0KTEVGVFNISUZURVFVQUwgPSA0NA0KUklHSFRTSElGVEVRVUFMID0gNDUNCkRPVUJMRVNUQVJFUVVBTCA9IDQ2DQpET1VCTEVTTEFTSCA9IDQ3DQpET1VCTEVTTEFTSEVRVUFMID0gNDgNCkFUID0gNDkNClJBUlJPVyA9IDUwDQpFTExJUFNJUyA9IDUxDQpPUCA9IDUyDQpFUlJPUlRPS0VOID0gNTMNCk5fVE9LRU5TID0gNTQNCk5UX09GRlNFVCA9IDI1Ng0KIy0tZW5kIGNvbnN0YW50cy0tDQoNCnRva19uYW1lID0ge3ZhbHVlOiBuYW1lDQogICAgICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gZ2xvYmFscygpLml0ZW1zKCkNCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIGludCkgYW5kIG5vdCBuYW1lLnN0YXJ0c3dpdGgoJ18nKX0NCl9fYWxsX18uZXh0ZW5kKHRva19uYW1lLnZhbHVlcygpKQ0KDQpkZWYgSVNURVJNSU5BTCh4KToNCiAgICByZXR1cm4geCA8IE5UX09GRlNFVA0KDQpkZWYgSVNOT05URVJNSU5BTCh4KToNCiAgICByZXR1cm4geCA+PSBOVF9PRkZTRVQNCg0KZGVmIElTRU9GKHgpOg0KICAgIHJldHVybiB4ID09IEVORE1BUktFUg0KDQoNCmRlZiBfbWFpbigpOg0KICAgIGltcG9ydCByZQ0KICAgIGltcG9ydCBzeXMNCiAgICBhcmdzID0gc3lzLmFyZ3ZbMTpdDQogICAgaW5GaWxlTmFtZSA9IGFyZ3MgYW5kIGFyZ3NbMF0gb3IgIkluY2x1ZGUvdG9rZW4uaCINCiAgICBvdXRGaWxlTmFtZSA9ICJMaWIvdG9rZW4ucHkiDQogICAgaWYgbGVuKGFyZ3MpID4gMToNCiAgICAgICAgb3V0RmlsZU5hbWUgPSBhcmdzWzFdDQogICAgdHJ5Og0KICAgICAgICBmcCA9IG9wZW4oaW5GaWxlTmFtZSkNCiAgICBleGNlcHQgSU9FcnJvciBhcyBlcnI6DQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoIkkvTyBlcnJvcjogJXNcbiIgJSBzdHIoZXJyKSkNCiAgICAgICAgc3lzLmV4aXQoMSkNCiAgICBsaW5lcyA9IGZwLnJlYWQoKS5zcGxpdCgiXG4iKQ0KICAgIGZwLmNsb3NlKCkNCiAgICBwcm9nID0gcmUuY29tcGlsZSgNCiAgICAgICAgIiNkZWZpbmVbIFx0XVsgXHRdKihbQS1aMC05XVtBLVowLTlfXSopWyBcdF1bIFx0XSooWzAtOV1bMC05XSopIiwNCiAgICAgICAgcmUuSUdOT1JFQ0FTRSkNCiAgICB0b2tlbnMgPSB7fQ0KICAgIGZvciBsaW5lIGluIGxpbmVzOg0KICAgICAgICBtYXRjaCA9IHByb2cubWF0Y2gobGluZSkNCiAgICAgICAgaWYgbWF0Y2g6DQogICAgICAgICAgICBuYW1lLCB2YWwgPSBtYXRjaC5ncm91cCgxLCAyKQ0KICAgICAgICAgICAgdmFsID0gaW50KHZhbCkNCiAgICAgICAgICAgIHRva2Vuc1t2YWxdID0gbmFtZSAgICAgICAgICAjIHJldmVyc2Ugc28gd2UgY2FuIHNvcnQgdGhlbS4uLg0KICAgIGtleXMgPSBzb3J0ZWQodG9rZW5zLmtleXMoKSkNCiAgICAjIGxvYWQgdGhlIG91dHB1dCBza2VsZXRvbiBmcm9tIHRoZSB0YXJnZXQ6DQogICAgdHJ5Og0KICAgICAgICBmcCA9IG9wZW4ob3V0RmlsZU5hbWUpDQogICAgZXhjZXB0IElPRXJyb3IgYXMgZXJyOg0KICAgICAgICBzeXMuc3RkZXJyLndyaXRlKCJJL08gZXJyb3I6ICVzXG4iICUgc3RyKGVycikpDQogICAgICAgIHN5cy5leGl0KDIpDQogICAgZm9ybWF0ID0gZnAucmVhZCgpLnNwbGl0KCJcbiIpDQogICAgZnAuY2xvc2UoKQ0KICAgIHRyeToNCiAgICAgICAgc3RhcnQgPSBmb3JtYXQuaW5kZXgoIiMtLXN0YXJ0IGNvbnN0YW50cy0tIikgKyAxDQogICAgICAgIGVuZCA9IGZvcm1hdC5pbmRleCgiIy0tZW5kIGNvbnN0YW50cy0tIikNCiAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgc3lzLnN0ZGVyci53cml0ZSgidGFyZ2V0IGRvZXMgbm90IGNvbnRhaW4gZm9ybWF0IG1hcmtlcnMiKQ0KICAgICAgICBzeXMuZXhpdCgzKQ0KICAgIGxpbmVzID0gW10NCiAgICBmb3IgdmFsIGluIGtleXM6DQogICAgICAgIGxpbmVzLmFwcGVuZCgiJXMgPSAlZCIgJSAodG9rZW5zW3ZhbF0sIHZhbCkpDQogICAgZm9ybWF0W3N0YXJ0OmVuZF0gPSBsaW5lcw0KICAgIHRyeToNCiAgICAgICAgZnAgPSBvcGVuKG91dEZpbGVOYW1lLCAndycpDQogICAgZXhjZXB0IElPRXJyb3IgYXMgZXJyOg0KICAgICAgICBzeXMuc3RkZXJyLndyaXRlKCJJL08gZXJyb3I6ICVzXG4iICUgc3RyKGVycikpDQogICAgICAgIHN5cy5leGl0KDQpDQogICAgZnAud3JpdGUoIlxuIi5qb2luKGZvcm1hdCkpDQogICAgZnAuY2xvc2UoKQ0KDQoNCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6DQogICAgX21haW4oKQ0K',
'/Lib/tempfile.py':'IiIiVGVtcG9yYXJ5IGZpbGVzLg0KDQpUaGlzIG1vZHVsZSBwcm92aWRlcyBnZW5lcmljLCBsb3ctIGFuZCBoaWdoLWxldmVsIGludGVyZmFjZXMgZm9yDQpjcmVhdGluZyB0ZW1wb3JhcnkgZmlsZXMgYW5kIGRpcmVjdG9yaWVzLiAgVGhlIGludGVyZmFjZXMgbGlzdGVkDQphcyAic2FmZSIganVzdCBiZWxvdyBjYW4gYmUgdXNlZCB3aXRob3V0IGZlYXIgb2YgcmFjZSBjb25kaXRpb25zLg0KVGhvc2UgbGlzdGVkIGFzICJ1bnNhZmUiIGNhbm5vdCwgYW5kIGFyZSBwcm92aWRlZCBmb3IgYmFja3dhcmQNCmNvbXBhdGliaWxpdHkgb25seS4NCg0KVGhpcyBtb2R1bGUgYWxzbyBwcm92aWRlcyBzb21lIGRhdGEgaXRlbXMgdG8gdGhlIHVzZXI6DQoNCiAgVE1QX01BWCAgLSBtYXhpbXVtIG51bWJlciBvZiBuYW1lcyB0aGF0IHdpbGwgYmUgdHJpZWQgYmVmb3JlDQogICAgICAgICAgICAgZ2l2aW5nIHVwLg0KICB0ZW1wZGlyICAtIElmIHRoaXMgaXMgc2V0IHRvIGEgc3RyaW5nIGJlZm9yZSB0aGUgZmlyc3QgdXNlIG9mDQogICAgICAgICAgICAgYW55IHJvdXRpbmUgZnJvbSB0aGlzIG1vZHVsZSwgaXQgd2lsbCBiZSBjb25zaWRlcmVkIGFzDQogICAgICAgICAgICAgYW5vdGhlciBjYW5kaWRhdGUgbG9jYXRpb24gdG8gc3RvcmUgdGVtcG9yYXJ5IGZpbGVzLg0KIiIiDQoNCl9fYWxsX18gPSBbDQogICAgIk5hbWVkVGVtcG9yYXJ5RmlsZSIsICJUZW1wb3JhcnlGaWxlIiwgIyBoaWdoIGxldmVsIHNhZmUgaW50ZXJmYWNlcw0KICAgICJTcG9vbGVkVGVtcG9yYXJ5RmlsZSIsICJUZW1wb3JhcnlEaXJlY3RvcnkiLA0KICAgICJta3N0ZW1wIiwgIm1rZHRlbXAiLCAgICAgICAgICAgICAgICAgICMgbG93IGxldmVsIHNhZmUgaW50ZXJmYWNlcw0KICAgICJta3RlbXAiLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgZGVwcmVjYXRlZCB1bnNhZmUgaW50ZXJmYWNlDQogICAgIlRNUF9NQVgiLCAiZ2V0dGVtcHByZWZpeCIsICAgICAgICAgICAgIyBjb25zdGFudHMNCiAgICAidGVtcGRpciIsICJnZXR0ZW1wZGlyIg0KICAgXQ0KDQoNCiMgSW1wb3J0cy4NCg0KaW1wb3J0IHdhcm5pbmdzIGFzIF93YXJuaW5ncw0KaW1wb3J0IHN5cyBhcyBfc3lzDQppbXBvcnQgaW8gYXMgX2lvDQppbXBvcnQgb3MgYXMgX29zDQpmcm9tIHJhbmRvbSBpbXBvcnQgUmFuZG9tIGFzIF9SYW5kb20NCg0KdHJ5Og0KICAgIGltcG9ydCBmY250bCBhcyBfZmNudGwNCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgICBkZWYgX3NldF9jbG9leGVjKGZkKToNCiAgICAgICAgcGFzcw0KZWxzZToNCiAgICBkZWYgX3NldF9jbG9leGVjKGZkKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZmxhZ3MgPSBfZmNudGwuZmNudGwoZmQsIF9mY250bC5GX0dFVEZELCAwKQ0KICAgICAgICBleGNlcHQgT1NFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgICMgZmxhZ3MgcmVhZCBzdWNjZXNzZnVsbHksIG1vZGlmeQ0KICAgICAgICAgICAgZmxhZ3MgfD0gX2ZjbnRsLkZEX0NMT0VYRUMNCiAgICAgICAgICAgIF9mY250bC5mY250bChmZCwgX2ZjbnRsLkZfU0VURkQsIGZsYWdzKQ0KDQoNCnRyeToNCiAgICBpbXBvcnQgX3RocmVhZA0KZXhjZXB0IEltcG9ydEVycm9yOg0KICAgIGltcG9ydCBfZHVtbXlfdGhyZWFkIGFzIF90aHJlYWQNCl9hbGxvY2F0ZV9sb2NrID0gX3RocmVhZC5hbGxvY2F0ZV9sb2NrDQoNCl90ZXh0X29wZW5mbGFncyA9IF9vcy5PX1JEV1IgfCBfb3MuT19DUkVBVCB8IF9vcy5PX0VYQ0wNCmlmIGhhc2F0dHIoX29zLCAnT19OT0lOSEVSSVQnKToNCiAgICBfdGV4dF9vcGVuZmxhZ3MgfD0gX29zLk9fTk9JTkhFUklUDQppZiBoYXNhdHRyKF9vcywgJ09fTk9GT0xMT1cnKToNCiAgICBfdGV4dF9vcGVuZmxhZ3MgfD0gX29zLk9fTk9GT0xMT1cNCg0KX2Jpbl9vcGVuZmxhZ3MgPSBfdGV4dF9vcGVuZmxhZ3MNCmlmIGhhc2F0dHIoX29zLCAnT19CSU5BUlknKToNCiAgICBfYmluX29wZW5mbGFncyB8PSBfb3MuT19CSU5BUlkNCg0KaWYgaGFzYXR0cihfb3MsICdUTVBfTUFYJyk6DQogICAgVE1QX01BWCA9IF9vcy5UTVBfTUFYDQplbHNlOg0KICAgIFRNUF9NQVggPSAxMDAwMA0KDQojIEFsdGhvdWdoIGl0IGRvZXMgbm90IGhhdmUgYW4gdW5kZXJzY29yZSBmb3IgaGlzdG9yaWNhbCByZWFzb25zLCB0aGlzDQojIHZhcmlhYmxlIGlzIGFuIGludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCAoc2VlIGlzc3VlIDEwMzU0KS4NCnRlbXBsYXRlID0gInRtcCINCg0KIyBJbnRlcm5hbCByb3V0aW5lcy4NCg0KX29uY2VfbG9jayA9IF9hbGxvY2F0ZV9sb2NrKCkNCg0KaWYgaGFzYXR0cihfb3MsICJsc3RhdCIpOg0KICAgIF9zdGF0ID0gX29zLmxzdGF0DQplbGlmIGhhc2F0dHIoX29zLCAic3RhdCIpOg0KICAgIF9zdGF0ID0gX29zLnN0YXQNCmVsc2U6DQogICAgIyBGYWxsYmFjay4gIEFsbCB3ZSBuZWVkIGlzIHNvbWV0aGluZyB0aGF0IHJhaXNlcyBPU0Vycm9yIGlmIHRoZQ0KICAgICMgZmlsZSBkb2Vzbid0IGV4aXN0Lg0KICAgIGRlZiBfc3RhdChmbik6DQogICAgICAgIGYgPSBvcGVuKGZuKQ0KICAgICAgICBmLmNsb3NlKCkNCg0KZGVmIF9leGlzdHMoZm4pOg0KICAgIHRyeToNCiAgICAgICAgX3N0YXQoZm4pDQogICAgZXhjZXB0IE9TRXJyb3I6DQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIGVsc2U6DQogICAgICAgIHJldHVybiBUcnVlDQoNCmNsYXNzIF9SYW5kb21OYW1lU2VxdWVuY2U6DQogICAgIiIiQW4gaW5zdGFuY2Ugb2YgX1JhbmRvbU5hbWVTZXF1ZW5jZSBnZW5lcmF0ZXMgYW4gZW5kbGVzcw0KICAgIHNlcXVlbmNlIG9mIHVucHJlZGljdGFibGUgc3RyaW5ncyB3aGljaCBjYW4gc2FmZWx5IGJlIGluY29ycG9yYXRlZA0KICAgIGludG8gZmlsZSBuYW1lcy4gIEVhY2ggc3RyaW5nIGlzIHNpeCBjaGFyYWN0ZXJzIGxvbmcuICBNdWx0aXBsZQ0KICAgIHRocmVhZHMgY2FuIHNhZmVseSB1c2UgdGhlIHNhbWUgaW5zdGFuY2UgYXQgdGhlIHNhbWUgdGltZS4NCg0KICAgIF9SYW5kb21OYW1lU2VxdWVuY2UgaXMgYW4gaXRlcmF0b3IuIiIiDQoNCiAgICBjaGFyYWN0ZXJzID0gImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OV8iDQoNCiAgICBAcHJvcGVydHkNCiAgICBkZWYgcm5nKHNlbGYpOg0KICAgICAgICBjdXJfcGlkID0gX29zLmdldHBpZCgpDQogICAgICAgIGlmIGN1cl9waWQgIT0gZ2V0YXR0cihzZWxmLCAnX3JuZ19waWQnLCBOb25lKToNCiAgICAgICAgICAgIHNlbGYuX3JuZyA9IF9SYW5kb20oKQ0KICAgICAgICAgICAgc2VsZi5fcm5nX3BpZCA9IGN1cl9waWQNCiAgICAgICAgcmV0dXJuIHNlbGYuX3JuZw0KDQogICAgZGVmIF9faXRlcl9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZg0KDQogICAgZGVmIF9fbmV4dF9fKHNlbGYpOg0KICAgICAgICBjID0gc2VsZi5jaGFyYWN0ZXJzDQogICAgICAgIGNob29zZSA9IHNlbGYucm5nLmNob2ljZQ0KICAgICAgICBsZXR0ZXJzID0gW2Nob29zZShjKSBmb3IgZHVtbXkgaW4gIjEyMzQ1NiJdDQogICAgICAgIHJldHVybiAnJy5qb2luKGxldHRlcnMpDQoNCmRlZiBfY2FuZGlkYXRlX3RlbXBkaXJfbGlzdCgpOg0KICAgICIiIkdlbmVyYXRlIGEgbGlzdCBvZiBjYW5kaWRhdGUgdGVtcG9yYXJ5IGRpcmVjdG9yaWVzIHdoaWNoDQogICAgX2dldF9kZWZhdWx0X3RlbXBkaXIgd2lsbCB0cnkuIiIiDQoNCiAgICBkaXJsaXN0ID0gW10NCg0KICAgICMgRmlyc3QsIHRyeSB0aGUgZW52aXJvbm1lbnQuDQogICAgZm9yIGVudm5hbWUgaW4gJ1RNUERJUicsICdURU1QJywgJ1RNUCc6DQogICAgICAgIGRpcm5hbWUgPSBfb3MuZ2V0ZW52KGVudm5hbWUpDQogICAgICAgIGlmIGRpcm5hbWU6IGRpcmxpc3QuYXBwZW5kKGRpcm5hbWUpDQoNCiAgICAjIEZhaWxpbmcgdGhhdCwgdHJ5IE9TLXNwZWNpZmljIGxvY2F0aW9ucy4NCiAgICBpZiBfb3MubmFtZSA9PSAnbnQnOg0KICAgICAgICBkaXJsaXN0LmV4dGVuZChbIHInYzpcdGVtcCcsIHInYzpcdG1wJywgcidcdGVtcCcsIHInXHRtcCcgXSkNCiAgICBlbHNlOg0KICAgICAgICBkaXJsaXN0LmV4dGVuZChbICcvdG1wJywgJy92YXIvdG1wJywgJy91c3IvdG1wJyBdKQ0KDQogICAgIyBBcyBhIGxhc3QgcmVzb3J0LCB0aGUgY3VycmVudCBkaXJlY3RvcnkuDQogICAgdHJ5Og0KICAgICAgICBkaXJsaXN0LmFwcGVuZChfb3MuZ2V0Y3dkKCkpDQogICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvciwgT1NFcnJvcik6DQogICAgICAgIGRpcmxpc3QuYXBwZW5kKF9vcy5jdXJkaXIpDQoNCiAgICByZXR1cm4gZGlybGlzdA0KDQpkZWYgX2dldF9kZWZhdWx0X3RlbXBkaXIoKToNCiAgICAiIiJDYWxjdWxhdGUgdGhlIGRlZmF1bHQgZGlyZWN0b3J5IHRvIHVzZSBmb3IgdGVtcG9yYXJ5IGZpbGVzLg0KICAgIFRoaXMgcm91dGluZSBzaG91bGQgYmUgY2FsbGVkIGV4YWN0bHkgb25jZS4NCg0KICAgIFdlIGRldGVybWluZSB3aGV0aGVyIG9yIG5vdCBhIGNhbmRpZGF0ZSB0ZW1wIGRpciBpcyB1c2FibGUgYnkNCiAgICB0cnlpbmcgdG8gY3JlYXRlIGFuZCB3cml0ZSB0byBhIGZpbGUgaW4gdGhhdCBkaXJlY3RvcnkuICBJZiB0aGlzDQogICAgaXMgc3VjY2Vzc2Z1bCwgdGhlIHRlc3QgZmlsZSBpcyBkZWxldGVkLiAgVG8gcHJldmVudCBkZW5pYWwgb2YNCiAgICBzZXJ2aWNlLCB0aGUgbmFtZSBvZiB0aGUgdGVzdCBmaWxlIG11c3QgYmUgcmFuZG9taXplZC4iIiINCg0KICAgIG5hbWVyID0gX1JhbmRvbU5hbWVTZXF1ZW5jZSgpDQogICAgZGlybGlzdCA9IF9jYW5kaWRhdGVfdGVtcGRpcl9saXN0KCkNCg0KICAgIGZvciBkaXIgaW4gZGlybGlzdDoNCiAgICAgICAgaWYgZGlyICE9IF9vcy5jdXJkaXI6DQogICAgICAgICAgICBkaXIgPSBfb3MucGF0aC5ub3JtY2FzZShfb3MucGF0aC5hYnNwYXRoKGRpcikpDQogICAgICAgICMgVHJ5IG9ubHkgYSBmZXcgbmFtZXMgcGVyIGRpcmVjdG9yeS4NCiAgICAgICAgZm9yIHNlcSBpbiByYW5nZSgxMDApOg0KICAgICAgICAgICAgbmFtZSA9IG5leHQobmFtZXIpDQogICAgICAgICAgICBmaWxlbmFtZSA9IF9vcy5wYXRoLmpvaW4oZGlyLCBuYW1lKQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGZkID0gX29zLm9wZW4oZmlsZW5hbWUsIF9iaW5fb3BlbmZsYWdzLCAwbzYwMCkNCiAgICAgICAgICAgICAgICBmcCA9IF9pby5vcGVuKGZkLCAnd2InKQ0KICAgICAgICAgICAgICAgIGZwLndyaXRlKGInYmxhdCcpDQogICAgICAgICAgICAgICAgZnAuY2xvc2UoKQ0KICAgICAgICAgICAgICAgIF9vcy51bmxpbmsoZmlsZW5hbWUpDQogICAgICAgICAgICAgICAgZGVsIGZwLCBmZA0KICAgICAgICAgICAgICAgIHJldHVybiBkaXINCiAgICAgICAgICAgIGV4Y2VwdCBGaWxlRXhpc3RzRXJyb3I6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3I6DQogICAgICAgICAgICAgICAgYnJlYWsgICAjIG5vIHBvaW50IHRyeWluZyBtb3JlIG5hbWVzIGluIHRoaXMgZGlyZWN0b3J5DQogICAgcmFpc2UgRmlsZU5vdEZvdW5kRXJyb3IoIk5vIHVzYWJsZSB0ZW1wb3JhcnkgZGlyZWN0b3J5IGZvdW5kIGluICVzIiAlIGRpcmxpc3QpDQoNCl9uYW1lX3NlcXVlbmNlID0gTm9uZQ0KDQpkZWYgX2dldF9jYW5kaWRhdGVfbmFtZXMoKToNCiAgICAiIiJDb21tb24gc2V0dXAgc2VxdWVuY2UgZm9yIGFsbCB1c2VyLWNhbGxhYmxlIGludGVyZmFjZXMuIiIiDQoNCiAgICBnbG9iYWwgX25hbWVfc2VxdWVuY2UNCiAgICBpZiBfbmFtZV9zZXF1ZW5jZSBpcyBOb25lOg0KICAgICAgICBfb25jZV9sb2NrLmFjcXVpcmUoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBpZiBfbmFtZV9zZXF1ZW5jZSBpcyBOb25lOg0KICAgICAgICAgICAgICAgIF9uYW1lX3NlcXVlbmNlID0gX1JhbmRvbU5hbWVTZXF1ZW5jZSgpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBfb25jZV9sb2NrLnJlbGVhc2UoKQ0KICAgIHJldHVybiBfbmFtZV9zZXF1ZW5jZQ0KDQoNCmRlZiBfbWtzdGVtcF9pbm5lcihkaXIsIHByZSwgc3VmLCBmbGFncyk6DQogICAgIiIiQ29kZSBjb21tb24gdG8gbWtzdGVtcCwgVGVtcG9yYXJ5RmlsZSwgYW5kIE5hbWVkVGVtcG9yYXJ5RmlsZS4iIiINCg0KICAgIG5hbWVzID0gX2dldF9jYW5kaWRhdGVfbmFtZXMoKQ0KDQogICAgZm9yIHNlcSBpbiByYW5nZShUTVBfTUFYKToNCiAgICAgICAgbmFtZSA9IG5leHQobmFtZXMpDQogICAgICAgIGZpbGUgPSBfb3MucGF0aC5qb2luKGRpciwgcHJlICsgbmFtZSArIHN1ZikNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZmQgPSBfb3Mub3BlbihmaWxlLCBmbGFncywgMG82MDApDQogICAgICAgICAgICBfc2V0X2Nsb2V4ZWMoZmQpDQogICAgICAgICAgICByZXR1cm4gKGZkLCBfb3MucGF0aC5hYnNwYXRoKGZpbGUpKQ0KICAgICAgICBleGNlcHQgRmlsZUV4aXN0c0Vycm9yOg0KICAgICAgICAgICAgY29udGludWUgICAgIyB0cnkgYWdhaW4NCg0KICAgIHJhaXNlIEZpbGVFeGlzdHNFcnJvcigiTm8gdXNhYmxlIHRlbXBvcmFyeSBmaWxlIG5hbWUgZm91bmQiKQ0KDQoNCiMgVXNlciB2aXNpYmxlIGludGVyZmFjZXMuDQoNCmRlZiBnZXR0ZW1wcHJlZml4KCk6DQogICAgIiIiQWNjZXNzb3IgZm9yIHRlbXBkaXIudGVtcGxhdGUuIiIiDQogICAgcmV0dXJuIHRlbXBsYXRlDQoNCnRlbXBkaXIgPSBOb25lDQoNCmRlZiBnZXR0ZW1wZGlyKCk6DQogICAgIiIiQWNjZXNzb3IgZm9yIHRlbXBmaWxlLnRlbXBkaXIuIiIiDQogICAgZ2xvYmFsIHRlbXBkaXINCiAgICBpZiB0ZW1wZGlyIGlzIE5vbmU6DQogICAgICAgIF9vbmNlX2xvY2suYWNxdWlyZSgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGlmIHRlbXBkaXIgaXMgTm9uZToNCiAgICAgICAgICAgICAgICB0ZW1wZGlyID0gX2dldF9kZWZhdWx0X3RlbXBkaXIoKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgX29uY2VfbG9jay5yZWxlYXNlKCkNCiAgICByZXR1cm4gdGVtcGRpcg0KDQpkZWYgbWtzdGVtcChzdWZmaXg9IiIsIHByZWZpeD10ZW1wbGF0ZSwgZGlyPU5vbmUsIHRleHQ9RmFsc2UpOg0KICAgICIiIlVzZXItY2FsbGFibGUgZnVuY3Rpb24gdG8gY3JlYXRlIGFuZCByZXR1cm4gYSB1bmlxdWUgdGVtcG9yYXJ5DQogICAgZmlsZS4gIFRoZSByZXR1cm4gdmFsdWUgaXMgYSBwYWlyIChmZCwgbmFtZSkgd2hlcmUgZmQgaXMgdGhlDQogICAgZmlsZSBkZXNjcmlwdG9yIHJldHVybmVkIGJ5IG9zLm9wZW4sIGFuZCBuYW1lIGlzIHRoZSBmaWxlbmFtZS4NCg0KICAgIElmICdzdWZmaXgnIGlzIHNwZWNpZmllZCwgdGhlIGZpbGUgbmFtZSB3aWxsIGVuZCB3aXRoIHRoYXQgc3VmZml4LA0KICAgIG90aGVyd2lzZSB0aGVyZSB3aWxsIGJlIG5vIHN1ZmZpeC4NCg0KICAgIElmICdwcmVmaXgnIGlzIHNwZWNpZmllZCwgdGhlIGZpbGUgbmFtZSB3aWxsIGJlZ2luIHdpdGggdGhhdCBwcmVmaXgsDQogICAgb3RoZXJ3aXNlIGEgZGVmYXVsdCBwcmVmaXggaXMgdXNlZC4NCg0KICAgIElmICdkaXInIGlzIHNwZWNpZmllZCwgdGhlIGZpbGUgd2lsbCBiZSBjcmVhdGVkIGluIHRoYXQgZGlyZWN0b3J5LA0KICAgIG90aGVyd2lzZSBhIGRlZmF1bHQgZGlyZWN0b3J5IGlzIHVzZWQuDQoNCiAgICBJZiAndGV4dCcgaXMgc3BlY2lmaWVkIGFuZCB0cnVlLCB0aGUgZmlsZSBpcyBvcGVuZWQgaW4gdGV4dA0KICAgIG1vZGUuICBFbHNlICh0aGUgZGVmYXVsdCkgdGhlIGZpbGUgaXMgb3BlbmVkIGluIGJpbmFyeSBtb2RlLiAgT24NCiAgICBzb21lIG9wZXJhdGluZyBzeXN0ZW1zLCB0aGlzIG1ha2VzIG5vIGRpZmZlcmVuY2UuDQoNCiAgICBUaGUgZmlsZSBpcyByZWFkYWJsZSBhbmQgd3JpdGFibGUgb25seSBieSB0aGUgY3JlYXRpbmcgdXNlciBJRC4NCiAgICBJZiB0aGUgb3BlcmF0aW5nIHN5c3RlbSB1c2VzIHBlcm1pc3Npb24gYml0cyB0byBpbmRpY2F0ZSB3aGV0aGVyIGENCiAgICBmaWxlIGlzIGV4ZWN1dGFibGUsIHRoZSBmaWxlIGlzIGV4ZWN1dGFibGUgYnkgbm8gb25lLiBUaGUgZmlsZQ0KICAgIGRlc2NyaXB0b3IgaXMgbm90IGluaGVyaXRlZCBieSBjaGlsZHJlbiBvZiB0aGlzIHByb2Nlc3MuDQoNCiAgICBDYWxsZXIgaXMgcmVzcG9uc2libGUgZm9yIGRlbGV0aW5nIHRoZSBmaWxlIHdoZW4gZG9uZSB3aXRoIGl0Lg0KICAgICIiIg0KDQogICAgaWYgZGlyIGlzIE5vbmU6DQogICAgICAgIGRpciA9IGdldHRlbXBkaXIoKQ0KDQogICAgaWYgdGV4dDoNCiAgICAgICAgZmxhZ3MgPSBfdGV4dF9vcGVuZmxhZ3MNCiAgICBlbHNlOg0KICAgICAgICBmbGFncyA9IF9iaW5fb3BlbmZsYWdzDQoNCiAgICByZXR1cm4gX21rc3RlbXBfaW5uZXIoZGlyLCBwcmVmaXgsIHN1ZmZpeCwgZmxhZ3MpDQoNCg0KZGVmIG1rZHRlbXAoc3VmZml4PSIiLCBwcmVmaXg9dGVtcGxhdGUsIGRpcj1Ob25lKToNCiAgICAiIiJVc2VyLWNhbGxhYmxlIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhbmQgcmV0dXJuIGEgdW5pcXVlIHRlbXBvcmFyeQ0KICAgIGRpcmVjdG9yeS4gIFRoZSByZXR1cm4gdmFsdWUgaXMgdGhlIHBhdGhuYW1lIG9mIHRoZSBkaXJlY3RvcnkuDQoNCiAgICBBcmd1bWVudHMgYXJlIGFzIGZvciBta3N0ZW1wLCBleGNlcHQgdGhhdCB0aGUgJ3RleHQnIGFyZ3VtZW50IGlzDQogICAgbm90IGFjY2VwdGVkLg0KDQogICAgVGhlIGRpcmVjdG9yeSBpcyByZWFkYWJsZSwgd3JpdGFibGUsIGFuZCBzZWFyY2hhYmxlIG9ubHkgYnkgdGhlDQogICAgY3JlYXRpbmcgdXNlci4NCg0KICAgIENhbGxlciBpcyByZXNwb25zaWJsZSBmb3IgZGVsZXRpbmcgdGhlIGRpcmVjdG9yeSB3aGVuIGRvbmUgd2l0aCBpdC4NCiAgICAiIiINCg0KICAgIGlmIGRpciBpcyBOb25lOg0KICAgICAgICBkaXIgPSBnZXR0ZW1wZGlyKCkNCg0KICAgIG5hbWVzID0gX2dldF9jYW5kaWRhdGVfbmFtZXMoKQ0KDQogICAgZm9yIHNlcSBpbiByYW5nZShUTVBfTUFYKToNCiAgICAgICAgbmFtZSA9IG5leHQobmFtZXMpDQogICAgICAgIGZpbGUgPSBfb3MucGF0aC5qb2luKGRpciwgcHJlZml4ICsgbmFtZSArIHN1ZmZpeCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgX29zLm1rZGlyKGZpbGUsIDBvNzAwKQ0KICAgICAgICAgICAgcmV0dXJuIGZpbGUNCiAgICAgICAgZXhjZXB0IEZpbGVFeGlzdHNFcnJvcjoNCiAgICAgICAgICAgIGNvbnRpbnVlICAgICMgdHJ5IGFnYWluDQoNCiAgICByYWlzZSBGaWxlRXhpc3RzRXJyb3IoIk5vIHVzYWJsZSB0ZW1wb3JhcnkgZGlyZWN0b3J5IG5hbWUgZm91bmQiKQ0KDQpkZWYgbWt0ZW1wKHN1ZmZpeD0iIiwgcHJlZml4PXRlbXBsYXRlLCBkaXI9Tm9uZSk6DQogICAgIiIiVXNlci1jYWxsYWJsZSBmdW5jdGlvbiB0byByZXR1cm4gYSB1bmlxdWUgdGVtcG9yYXJ5IGZpbGUgbmFtZS4gIFRoZQ0KICAgIGZpbGUgaXMgbm90IGNyZWF0ZWQuDQoNCiAgICBBcmd1bWVudHMgYXJlIGFzIGZvciBta3N0ZW1wLCBleGNlcHQgdGhhdCB0aGUgJ3RleHQnIGFyZ3VtZW50IGlzDQogICAgbm90IGFjY2VwdGVkLg0KDQogICAgVGhpcyBmdW5jdGlvbiBpcyB1bnNhZmUgYW5kIHNob3VsZCBub3QgYmUgdXNlZC4gIFRoZSBmaWxlIG5hbWUNCiAgICByZWZlcnMgdG8gYSBmaWxlIHRoYXQgZGlkIG5vdCBleGlzdCBhdCBzb21lIHBvaW50LCBidXQgYnkgdGhlIHRpbWUNCiAgICB5b3UgZ2V0IGFyb3VuZCB0byBjcmVhdGluZyBpdCwgc29tZW9uZSBlbHNlIG1heSBoYXZlIGJlYXRlbiB5b3UgdG8NCiAgICB0aGUgcHVuY2guDQogICAgIiIiDQoNCiMjICAgIGZyb20gd2FybmluZ3MgaW1wb3J0IHdhcm4gYXMgX3dhcm4NCiMjICAgIF93YXJuKCJta3RlbXAgaXMgYSBwb3RlbnRpYWwgc2VjdXJpdHkgcmlzayB0byB5b3VyIHByb2dyYW0iLA0KIyMgICAgICAgICAgUnVudGltZVdhcm5pbmcsIHN0YWNrbGV2ZWw9MikNCg0KICAgIGlmIGRpciBpcyBOb25lOg0KICAgICAgICBkaXIgPSBnZXR0ZW1wZGlyKCkNCg0KICAgIG5hbWVzID0gX2dldF9jYW5kaWRhdGVfbmFtZXMoKQ0KICAgIGZvciBzZXEgaW4gcmFuZ2UoVE1QX01BWCk6DQogICAgICAgIG5hbWUgPSBuZXh0KG5hbWVzKQ0KICAgICAgICBmaWxlID0gX29zLnBhdGguam9pbihkaXIsIHByZWZpeCArIG5hbWUgKyBzdWZmaXgpDQogICAgICAgIGlmIG5vdCBfZXhpc3RzKGZpbGUpOg0KICAgICAgICAgICAgcmV0dXJuIGZpbGUNCg0KICAgIHJhaXNlIEZpbGVFeGlzdHNFcnJvcigiTm8gdXNhYmxlIHRlbXBvcmFyeSBmaWxlbmFtZSBmb3VuZCIpDQoNCg0KY2xhc3MgX1RlbXBvcmFyeUZpbGVXcmFwcGVyOg0KICAgICIiIlRlbXBvcmFyeSBmaWxlIHdyYXBwZXINCg0KICAgIFRoaXMgY2xhc3MgcHJvdmlkZXMgYSB3cmFwcGVyIGFyb3VuZCBmaWxlcyBvcGVuZWQgZm9yDQogICAgdGVtcG9yYXJ5IHVzZS4gIEluIHBhcnRpY3VsYXIsIGl0IHNlZWtzIHRvIGF1dG9tYXRpY2FsbHkNCiAgICByZW1vdmUgdGhlIGZpbGUgd2hlbiBpdCBpcyBubyBsb25nZXIgbmVlZGVkLg0KICAgICIiIg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZpbGUsIG5hbWUsIGRlbGV0ZT1UcnVlKToNCiAgICAgICAgc2VsZi5maWxlID0gZmlsZQ0KICAgICAgICBzZWxmLm5hbWUgPSBuYW1lDQogICAgICAgIHNlbGYuY2xvc2VfY2FsbGVkID0gRmFsc2UNCiAgICAgICAgc2VsZi5kZWxldGUgPSBkZWxldGUNCg0KICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBuYW1lKToNCiAgICAgICAgIyBBdHRyaWJ1dGUgbG9va3VwcyBhcmUgZGVsZWdhdGVkIHRvIHRoZSB1bmRlcmx5aW5nIGZpbGUNCiAgICAgICAgIyBhbmQgY2FjaGVkIGZvciBub24tbnVtZXJpYyByZXN1bHRzDQogICAgICAgICMgKGkuZS4gbWV0aG9kcyBhcmUgY2FjaGVkLCBjbG9zZWQgYW5kIGZyaWVuZHMgYXJlIG5vdCkNCiAgICAgICAgZmlsZSA9IHNlbGYuX19kaWN0X19bJ2ZpbGUnXQ0KICAgICAgICBhID0gZ2V0YXR0cihmaWxlLCBuYW1lKQ0KICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhLCBpbnQpOg0KICAgICAgICAgICAgc2V0YXR0cihzZWxmLCBuYW1lLCBhKQ0KICAgICAgICByZXR1cm4gYQ0KDQogICAgIyBUaGUgdW5kZXJseWluZyBfX2VudGVyX18gbWV0aG9kIHJldHVybnMgdGhlIHdyb25nIG9iamVjdA0KICAgICMgKHNlbGYuZmlsZSkgc28gb3ZlcnJpZGUgaXQgdG8gcmV0dXJuIHRoZSB3cmFwcGVyDQogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToNCiAgICAgICAgc2VsZi5maWxlLl9fZW50ZXJfXygpDQogICAgICAgIHJldHVybiBzZWxmDQoNCiAgICAjIGl0ZXIoKSBkb2Vzbid0IHVzZSBfX2dldGF0dHJfXyB0byBmaW5kIHRoZSBfX2l0ZXJfXyBtZXRob2QNCiAgICBkZWYgX19pdGVyX18oc2VsZik6DQogICAgICAgIHJldHVybiBpdGVyKHNlbGYuZmlsZSkNCg0KICAgICMgTlQgcHJvdmlkZXMgZGVsZXRlLW9uLWNsb3NlIGFzIGEgcHJpbWl0aXZlLCBzbyB3ZSBkb24ndCBuZWVkDQogICAgIyB0aGUgd3JhcHBlciB0byBkbyBhbnl0aGluZyBzcGVjaWFsLiAgV2Ugc3RpbGwgdXNlIGl0IHNvIHRoYXQNCiAgICAjIGZpbGUubmFtZSBpcyB1c2VmdWwgKGkuZS4gbm90ICIoZmRvcGVuKSIpIHdpdGggTmFtZWRUZW1wb3JhcnlGaWxlLg0KICAgIGlmIF9vcy5uYW1lICE9ICdudCc6DQogICAgICAgICMgQ2FjaGUgdGhlIHVubGlua2VyIHNvIHdlIGRvbid0IGdldCBzcHVyaW91cyBlcnJvcnMgYXQNCiAgICAgICAgIyBzaHV0ZG93biB3aGVuIHRoZSBtb2R1bGUtbGV2ZWwgIm9zIiBpcyBOb25lJ2Qgb3V0LiAgTm90ZQ0KICAgICAgICAjIHRoYXQgdGhpcyBtdXN0IGJlIHJlZmVyZW5jZWQgYXMgc2VsZi51bmxpbmssIGJlY2F1c2UgdGhlDQogICAgICAgICMgbmFtZSBUZW1wb3JhcnlGaWxlV3JhcHBlciBtYXkgYWxzbyBnZXQgTm9uZSdkIG91dCBiZWZvcmUNCiAgICAgICAgIyBfX2RlbF9fIGlzIGNhbGxlZC4NCiAgICAgICAgdW5saW5rID0gX29zLnVubGluaw0KDQogICAgICAgIGRlZiBjbG9zZShzZWxmKToNCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmNsb3NlX2NhbGxlZDoNCiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlX2NhbGxlZCA9IFRydWUNCiAgICAgICAgICAgICAgICBzZWxmLmZpbGUuY2xvc2UoKQ0KICAgICAgICAgICAgICAgIGlmIHNlbGYuZGVsZXRlOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLnVubGluayhzZWxmLm5hbWUpDQoNCiAgICAgICAgZGVmIF9fZGVsX18oc2VsZik6DQogICAgICAgICAgICBzZWxmLmNsb3NlKCkNCg0KICAgICAgICAjIE5lZWQgdG8gdHJhcCBfX2V4aXRfXyBhcyB3ZWxsIHRvIGVuc3VyZSB0aGUgZmlsZSBnZXRzDQogICAgICAgICMgZGVsZXRlZCB3aGVuIHVzZWQgaW4gYSB3aXRoIHN0YXRlbWVudA0KICAgICAgICBkZWYgX19leGl0X18oc2VsZiwgZXhjLCB2YWx1ZSwgdGIpOg0KICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5maWxlLl9fZXhpdF9fKGV4YywgdmFsdWUsIHRiKQ0KICAgICAgICAgICAgc2VsZi5jbG9zZSgpDQogICAgICAgICAgICByZXR1cm4gcmVzdWx0DQogICAgZWxzZToNCiAgICAgICAgZGVmIF9fZXhpdF9fKHNlbGYsIGV4YywgdmFsdWUsIHRiKToNCiAgICAgICAgICAgIHNlbGYuZmlsZS5fX2V4aXRfXyhleGMsIHZhbHVlLCB0YikNCg0KDQpkZWYgTmFtZWRUZW1wb3JhcnlGaWxlKG1vZGU9J3crYicsIGJ1ZmZlcmluZz0tMSwgZW5jb2Rpbmc9Tm9uZSwNCiAgICAgICAgICAgICAgICAgICAgICAgbmV3bGluZT1Ob25lLCBzdWZmaXg9IiIsIHByZWZpeD10ZW1wbGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgZGlyPU5vbmUsIGRlbGV0ZT1UcnVlKToNCiAgICAiIiJDcmVhdGUgYW5kIHJldHVybiBhIHRlbXBvcmFyeSBmaWxlLg0KICAgIEFyZ3VtZW50czoNCiAgICAncHJlZml4JywgJ3N1ZmZpeCcsICdkaXInIC0tIGFzIGZvciBta3N0ZW1wLg0KICAgICdtb2RlJyAtLSB0aGUgbW9kZSBhcmd1bWVudCB0byBpby5vcGVuIChkZWZhdWx0ICJ3K2IiKS4NCiAgICAnYnVmZmVyaW5nJyAtLSB0aGUgYnVmZmVyIHNpemUgYXJndW1lbnQgdG8gaW8ub3BlbiAoZGVmYXVsdCAtMSkuDQogICAgJ2VuY29kaW5nJyAtLSB0aGUgZW5jb2RpbmcgYXJndW1lbnQgdG8gaW8ub3BlbiAoZGVmYXVsdCBOb25lKQ0KICAgICduZXdsaW5lJyAtLSB0aGUgbmV3bGluZSBhcmd1bWVudCB0byBpby5vcGVuIChkZWZhdWx0IE5vbmUpDQogICAgJ2RlbGV0ZScgLS0gd2hldGhlciB0aGUgZmlsZSBpcyBkZWxldGVkIG9uIGNsb3NlIChkZWZhdWx0IFRydWUpLg0KICAgIFRoZSBmaWxlIGlzIGNyZWF0ZWQgYXMgbWtzdGVtcCgpIHdvdWxkIGRvIGl0Lg0KDQogICAgUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBhIGZpbGUtbGlrZSBpbnRlcmZhY2U7IHRoZSBuYW1lIG9mIHRoZSBmaWxlDQogICAgaXMgYWNjZXNzaWJsZSBhcyBmaWxlLm5hbWUuICBUaGUgZmlsZSB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZGVsZXRlZA0KICAgIHdoZW4gaXQgaXMgY2xvc2VkIHVubGVzcyB0aGUgJ2RlbGV0ZScgYXJndW1lbnQgaXMgc2V0IHRvIEZhbHNlLg0KICAgICIiIg0KDQogICAgaWYgZGlyIGlzIE5vbmU6DQogICAgICAgIGRpciA9IGdldHRlbXBkaXIoKQ0KDQogICAgZmxhZ3MgPSBfYmluX29wZW5mbGFncw0KDQogICAgIyBTZXR0aW5nIE9fVEVNUE9SQVJZIGluIHRoZSBmbGFncyBjYXVzZXMgdGhlIE9TIHRvIGRlbGV0ZQ0KICAgICMgdGhlIGZpbGUgd2hlbiBpdCBpcyBjbG9zZWQuICBUaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGJ5IFdpbmRvd3MuDQogICAgaWYgX29zLm5hbWUgPT0gJ250JyBhbmQgZGVsZXRlOg0KICAgICAgICBmbGFncyB8PSBfb3MuT19URU1QT1JBUlkNCg0KICAgIChmZCwgbmFtZSkgPSBfbWtzdGVtcF9pbm5lcihkaXIsIHByZWZpeCwgc3VmZml4LCBmbGFncykNCiAgICBmaWxlID0gX2lvLm9wZW4oZmQsIG1vZGUsIGJ1ZmZlcmluZz1idWZmZXJpbmcsDQogICAgICAgICAgICAgICAgICAgIG5ld2xpbmU9bmV3bGluZSwgZW5jb2Rpbmc9ZW5jb2RpbmcpDQoNCiAgICByZXR1cm4gX1RlbXBvcmFyeUZpbGVXcmFwcGVyKGZpbGUsIG5hbWUsIGRlbGV0ZSkNCg0KaWYgX29zLm5hbWUgIT0gJ3Bvc2l4JyBvciBfb3Muc3lzLnBsYXRmb3JtID09ICdjeWd3aW4nOg0KICAgICMgT24gbm9uLVBPU0lYIGFuZCBDeWd3aW4gc3lzdGVtcywgYXNzdW1lIHRoYXQgd2UgY2Fubm90IHVubGluayBhIGZpbGUNCiAgICAjIHdoaWxlIGl0IGlzIG9wZW4uDQogICAgVGVtcG9yYXJ5RmlsZSA9IE5hbWVkVGVtcG9yYXJ5RmlsZQ0KDQplbHNlOg0KICAgIGRlZiBUZW1wb3JhcnlGaWxlKG1vZGU9J3crYicsIGJ1ZmZlcmluZz0tMSwgZW5jb2Rpbmc9Tm9uZSwNCiAgICAgICAgICAgICAgICAgICAgICBuZXdsaW5lPU5vbmUsIHN1ZmZpeD0iIiwgcHJlZml4PXRlbXBsYXRlLA0KICAgICAgICAgICAgICAgICAgICAgIGRpcj1Ob25lKToNCiAgICAgICAgIiIiQ3JlYXRlIGFuZCByZXR1cm4gYSB0ZW1wb3JhcnkgZmlsZS4NCiAgICAgICAgQXJndW1lbnRzOg0KICAgICAgICAncHJlZml4JywgJ3N1ZmZpeCcsICdkaXInIC0tIGFzIGZvciBta3N0ZW1wLg0KICAgICAgICAnbW9kZScgLS0gdGhlIG1vZGUgYXJndW1lbnQgdG8gaW8ub3BlbiAoZGVmYXVsdCAidytiIikuDQogICAgICAgICdidWZmZXJpbmcnIC0tIHRoZSBidWZmZXIgc2l6ZSBhcmd1bWVudCB0byBpby5vcGVuIChkZWZhdWx0IC0xKS4NCiAgICAgICAgJ2VuY29kaW5nJyAtLSB0aGUgZW5jb2RpbmcgYXJndW1lbnQgdG8gaW8ub3BlbiAoZGVmYXVsdCBOb25lKQ0KICAgICAgICAnbmV3bGluZScgLS0gdGhlIG5ld2xpbmUgYXJndW1lbnQgdG8gaW8ub3BlbiAoZGVmYXVsdCBOb25lKQ0KICAgICAgICBUaGUgZmlsZSBpcyBjcmVhdGVkIGFzIG1rc3RlbXAoKSB3b3VsZCBkbyBpdC4NCg0KICAgICAgICBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGEgZmlsZS1saWtlIGludGVyZmFjZS4gIFRoZSBmaWxlIGhhcyBubw0KICAgICAgICBuYW1lLCBhbmQgd2lsbCBjZWFzZSB0byBleGlzdCB3aGVuIGl0IGlzIGNsb3NlZC4NCiAgICAgICAgIiIiDQoNCiAgICAgICAgaWYgZGlyIGlzIE5vbmU6DQogICAgICAgICAgICBkaXIgPSBnZXR0ZW1wZGlyKCkNCg0KICAgICAgICBmbGFncyA9IF9iaW5fb3BlbmZsYWdzDQoNCiAgICAgICAgKGZkLCBuYW1lKSA9IF9ta3N0ZW1wX2lubmVyKGRpciwgcHJlZml4LCBzdWZmaXgsIGZsYWdzKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBfb3MudW5saW5rKG5hbWUpDQogICAgICAgICAgICByZXR1cm4gX2lvLm9wZW4oZmQsIG1vZGUsIGJ1ZmZlcmluZz1idWZmZXJpbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3bGluZT1uZXdsaW5lLCBlbmNvZGluZz1lbmNvZGluZykNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgX29zLmNsb3NlKGZkKQ0KICAgICAgICAgICAgcmFpc2UNCg0KY2xhc3MgU3Bvb2xlZFRlbXBvcmFyeUZpbGU6DQogICAgIiIiVGVtcG9yYXJ5IGZpbGUgd3JhcHBlciwgc3BlY2lhbGl6ZWQgdG8gc3dpdGNoIGZyb20NCiAgICBTdHJpbmdJTyB0byBhIHJlYWwgZmlsZSB3aGVuIGl0IGV4Y2VlZHMgYSBjZXJ0YWluIHNpemUgb3INCiAgICB3aGVuIGEgZmlsZW5vIGlzIG5lZWRlZC4NCiAgICAiIiINCiAgICBfcm9sbGVkID0gRmFsc2UNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtYXhfc2l6ZT0wLCBtb2RlPSd3K2InLCBidWZmZXJpbmc9LTEsDQogICAgICAgICAgICAgICAgIGVuY29kaW5nPU5vbmUsIG5ld2xpbmU9Tm9uZSwNCiAgICAgICAgICAgICAgICAgc3VmZml4PSIiLCBwcmVmaXg9dGVtcGxhdGUsIGRpcj1Ob25lKToNCiAgICAgICAgaWYgJ2InIGluIG1vZGU6DQogICAgICAgICAgICBzZWxmLl9maWxlID0gX2lvLkJ5dGVzSU8oKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgIyBTZXR0aW5nIG5ld2xpbmU9IlxuIiBhdm9pZHMgbmV3bGluZSB0cmFuc2xhdGlvbjsNCiAgICAgICAgICAgICMgdGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSBvdGhlcndpc2Ugb24gV2luZG93cyB3ZSdkDQogICAgICAgICAgICAjIGhnZXQgZG91YmxlIG5ld2xpbmUgdHJhbnNsYXRpb24gdXBvbiByb2xsb3ZlcigpLg0KICAgICAgICAgICAgc2VsZi5fZmlsZSA9IF9pby5TdHJpbmdJTyhuZXdsaW5lPSJcbiIpDQogICAgICAgIHNlbGYuX21heF9zaXplID0gbWF4X3NpemUNCiAgICAgICAgc2VsZi5fcm9sbGVkID0gRmFsc2UNCiAgICAgICAgc2VsZi5fVGVtcG9yYXJ5RmlsZUFyZ3MgPSB7J21vZGUnOiBtb2RlLCAnYnVmZmVyaW5nJzogYnVmZmVyaW5nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3VmZml4Jzogc3VmZml4LCAncHJlZml4JzogcHJlZml4LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZW5jb2RpbmcnOiBlbmNvZGluZywgJ25ld2xpbmUnOiBuZXdsaW5lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGlyJzogZGlyfQ0KDQogICAgZGVmIF9jaGVjayhzZWxmLCBmaWxlKToNCiAgICAgICAgaWYgc2VsZi5fcm9sbGVkOiByZXR1cm4NCiAgICAgICAgbWF4X3NpemUgPSBzZWxmLl9tYXhfc2l6ZQ0KICAgICAgICBpZiBtYXhfc2l6ZSBhbmQgZmlsZS50ZWxsKCkgPiBtYXhfc2l6ZToNCiAgICAgICAgICAgIHNlbGYucm9sbG92ZXIoKQ0KDQogICAgZGVmIHJvbGxvdmVyKHNlbGYpOg0KICAgICAgICBpZiBzZWxmLl9yb2xsZWQ6IHJldHVybg0KICAgICAgICBmaWxlID0gc2VsZi5fZmlsZQ0KICAgICAgICBuZXdmaWxlID0gc2VsZi5fZmlsZSA9IFRlbXBvcmFyeUZpbGUoKipzZWxmLl9UZW1wb3JhcnlGaWxlQXJncykNCiAgICAgICAgZGVsIHNlbGYuX1RlbXBvcmFyeUZpbGVBcmdzDQoNCiAgICAgICAgbmV3ZmlsZS53cml0ZShmaWxlLmdldHZhbHVlKCkpDQogICAgICAgIG5ld2ZpbGUuc2VlayhmaWxlLnRlbGwoKSwgMCkNCg0KICAgICAgICBzZWxmLl9yb2xsZWQgPSBUcnVlDQoNCiAgICAjIFRoZSBtZXRob2QgY2FjaGluZyB0cmljayBmcm9tIE5hbWVkVGVtcG9yYXJ5RmlsZQ0KICAgICMgd29uJ3Qgd29yayBoZXJlLCBiZWNhdXNlIF9maWxlIG1heSBjaGFuZ2UgZnJvbSBhDQogICAgIyBfU3RyaW5nSU8gaW5zdGFuY2UgdG8gYSByZWFsIGZpbGUuIFNvIHdlIGxpc3QNCiAgICAjIGFsbCB0aGUgbWV0aG9kcyBkaXJlY3RseS4NCg0KICAgICMgQ29udGV4dCBtYW5hZ2VtZW50IHByb3RvY29sDQogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToNCiAgICAgICAgaWYgc2VsZi5fZmlsZS5jbG9zZWQ6DQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDYW5ub3QgZW50ZXIgY29udGV4dCB3aXRoIGNsb3NlZCBmaWxlIikNCiAgICAgICAgcmV0dXJuIHNlbGYNCg0KICAgIGRlZiBfX2V4aXRfXyhzZWxmLCBleGMsIHZhbHVlLCB0Yik6DQogICAgICAgIHNlbGYuX2ZpbGUuY2xvc2UoKQ0KDQogICAgIyBmaWxlIHByb3RvY29sDQogICAgZGVmIF9faXRlcl9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZi5fZmlsZS5fX2l0ZXJfXygpDQoNCiAgICBkZWYgY2xvc2Uoc2VsZik6DQogICAgICAgIHNlbGYuX2ZpbGUuY2xvc2UoKQ0KDQogICAgQHByb3BlcnR5DQogICAgZGVmIGNsb3NlZChzZWxmKToNCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbGUuY2xvc2VkDQoNCiAgICBAcHJvcGVydHkNCiAgICBkZWYgZW5jb2Rpbmcoc2VsZik6DQogICAgICAgIHJldHVybiBzZWxmLl9maWxlLmVuY29kaW5nDQoNCiAgICBkZWYgZmlsZW5vKHNlbGYpOg0KICAgICAgICBzZWxmLnJvbGxvdmVyKCkNCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbGUuZmlsZW5vKCkNCg0KICAgIGRlZiBmbHVzaChzZWxmKToNCiAgICAgICAgc2VsZi5fZmlsZS5mbHVzaCgpDQoNCiAgICBkZWYgaXNhdHR5KHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZi5fZmlsZS5pc2F0dHkoKQ0KDQogICAgQHByb3BlcnR5DQogICAgZGVmIG1vZGUoc2VsZik6DQogICAgICAgIHJldHVybiBzZWxmLl9maWxlLm1vZGUNCg0KICAgIEBwcm9wZXJ0eQ0KICAgIGRlZiBuYW1lKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZi5fZmlsZS5uYW1lDQoNCiAgICBAcHJvcGVydHkNCiAgICBkZWYgbmV3bGluZXMoc2VsZik6DQogICAgICAgIHJldHVybiBzZWxmLl9maWxlLm5ld2xpbmVzDQoNCiAgICBkZWYgbmV4dChzZWxmKToNCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbGUubmV4dA0KDQogICAgZGVmIHJlYWQoc2VsZiwgKmFyZ3MpOg0KICAgICAgICByZXR1cm4gc2VsZi5fZmlsZS5yZWFkKCphcmdzKQ0KDQogICAgZGVmIHJlYWRsaW5lKHNlbGYsICphcmdzKToNCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbGUucmVhZGxpbmUoKmFyZ3MpDQoNCiAgICBkZWYgcmVhZGxpbmVzKHNlbGYsICphcmdzKToNCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbGUucmVhZGxpbmVzKCphcmdzKQ0KDQogICAgZGVmIHNlZWsoc2VsZiwgKmFyZ3MpOg0KICAgICAgICBzZWxmLl9maWxlLnNlZWsoKmFyZ3MpDQoNCiAgICBAcHJvcGVydHkNCiAgICBkZWYgc29mdHNwYWNlKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZi5fZmlsZS5zb2Z0c3BhY2UNCg0KICAgIGRlZiB0ZWxsKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZi5fZmlsZS50ZWxsKCkNCg0KICAgIGRlZiB0cnVuY2F0ZShzZWxmLCBzaXplPU5vbmUpOg0KICAgICAgICBpZiBzaXplIGlzIE5vbmU6DQogICAgICAgICAgICBzZWxmLl9maWxlLnRydW5jYXRlKCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGlmIHNpemUgPiBzZWxmLl9tYXhfc2l6ZToNCiAgICAgICAgICAgICAgICBzZWxmLnJvbGxvdmVyKCkNCiAgICAgICAgICAgIHNlbGYuX2ZpbGUudHJ1bmNhdGUoc2l6ZSkNCg0KICAgIGRlZiB3cml0ZShzZWxmLCBzKToNCiAgICAgICAgZmlsZSA9IHNlbGYuX2ZpbGUNCiAgICAgICAgcnYgPSBmaWxlLndyaXRlKHMpDQogICAgICAgIHNlbGYuX2NoZWNrKGZpbGUpDQogICAgICAgIHJldHVybiBydg0KDQogICAgZGVmIHdyaXRlbGluZXMoc2VsZiwgaXRlcmFibGUpOg0KICAgICAgICBmaWxlID0gc2VsZi5fZmlsZQ0KICAgICAgICBydiA9IGZpbGUud3JpdGVsaW5lcyhpdGVyYWJsZSkNCiAgICAgICAgc2VsZi5fY2hlY2soZmlsZSkNCiAgICAgICAgcmV0dXJuIHJ2DQoNCiAgICBkZWYgeHJlYWRsaW5lcyhzZWxmLCAqYXJncyk6DQogICAgICAgIHJldHVybiBzZWxmLl9maWxlLnhyZWFkbGluZXMoKmFyZ3MpDQoNCg0KY2xhc3MgVGVtcG9yYXJ5RGlyZWN0b3J5KG9iamVjdCk6DQogICAgIiIiQ3JlYXRlIGFuZCByZXR1cm4gYSB0ZW1wb3JhcnkgZGlyZWN0b3J5LiAgVGhpcyBoYXMgdGhlIHNhbWUNCiAgICBiZWhhdmlvciBhcyBta2R0ZW1wIGJ1dCBjYW4gYmUgdXNlZCBhcyBhIGNvbnRleHQgbWFuYWdlci4gIEZvcg0KICAgIGV4YW1wbGU6DQoNCiAgICAgICAgd2l0aCBUZW1wb3JhcnlEaXJlY3RvcnkoKSBhcyB0bXBkaXI6DQogICAgICAgICAgICAuLi4NCg0KICAgIFVwb24gZXhpdGluZyB0aGUgY29udGV4dCwgdGhlIGRpcmVjdG9yeSBhbmQgZXZlcnRoaW5nIGNvbnRhaW5lZA0KICAgIGluIGl0IGFyZSByZW1vdmVkLg0KICAgICIiIg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN1ZmZpeD0iIiwgcHJlZml4PXRlbXBsYXRlLCBkaXI9Tm9uZSk6DQogICAgICAgIHNlbGYuX2Nsb3NlZCA9IEZhbHNlDQogICAgICAgIHNlbGYubmFtZSA9IE5vbmUgIyBIYW5kbGUgbWtkdGVtcCB0aHJvd2luZyBhbiBleGNlcHRpb24NCiAgICAgICAgc2VsZi5uYW1lID0gbWtkdGVtcChzdWZmaXgsIHByZWZpeCwgZGlyKQ0KDQogICAgZGVmIF9fcmVwcl9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gIjx7fSB7IXJ9PiIuZm9ybWF0KHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBzZWxmLm5hbWUpDQoNCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZi5uYW1lDQoNCiAgICBkZWYgY2xlYW51cChzZWxmLCBfd2Fybj1GYWxzZSk6DQogICAgICAgIGlmIHNlbGYubmFtZSBhbmQgbm90IHNlbGYuX2Nsb3NlZDoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBzZWxmLl9ybXRyZWUoc2VsZi5uYW1lKQ0KICAgICAgICAgICAgZXhjZXB0IChUeXBlRXJyb3IsIEF0dHJpYnV0ZUVycm9yKSBhcyBleDoNCiAgICAgICAgICAgICAgICAjIElzc3VlICMxMDE4ODogRW1pdCBhIHdhcm5pbmcgb24gc3RkZXJyDQogICAgICAgICAgICAgICAgIyBpZiB0aGUgZGlyZWN0b3J5IGNvdWxkIG5vdCBiZSBjbGVhbmVkDQogICAgICAgICAgICAgICAgIyB1cCBkdWUgdG8gbWlzc2luZyBnbG9iYWxzDQogICAgICAgICAgICAgICAgaWYgIk5vbmUiIG5vdCBpbiBzdHIoZXgpOg0KICAgICAgICAgICAgICAgICAgICByYWlzZQ0KICAgICAgICAgICAgICAgIHByaW50KCJFUlJPUjogeyFyfSB3aGlsZSBjbGVhbmluZyB1cCB7IXJ9Ii5mb3JtYXQoZXgsIHNlbGYsKSwNCiAgICAgICAgICAgICAgICAgICAgICBmaWxlPV9zeXMuc3RkZXJyKQ0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgc2VsZi5fY2xvc2VkID0gVHJ1ZQ0KICAgICAgICAgICAgaWYgX3dhcm46DQogICAgICAgICAgICAgICAgc2VsZi5fd2FybigiSW1wbGljaXRseSBjbGVhbmluZyB1cCB7IXJ9Ii5mb3JtYXQoc2VsZiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICBSZXNvdXJjZVdhcm5pbmcpDQoNCiAgICBkZWYgX19leGl0X18oc2VsZiwgZXhjLCB2YWx1ZSwgdGIpOg0KICAgICAgICBzZWxmLmNsZWFudXAoKQ0KDQogICAgZGVmIF9fZGVsX18oc2VsZik6DQogICAgICAgICMgSXNzdWUgYSBSZXNvdXJjZVdhcm5pbmcgaWYgaW1wbGljaXQgY2xlYW51cCBuZWVkZWQNCiAgICAgICAgc2VsZi5jbGVhbnVwKF93YXJuPVRydWUpDQoNCiAgICAjIFhYWCAobmNvZ2hsYW4pOiBUaGUgZm9sbG93aW5nIGNvZGUgYXR0ZW1wdHMgdG8gbWFrZQ0KICAgICMgdGhpcyBjbGFzcyB0b2xlcmFudCBvZiB0aGUgbW9kdWxlIG51bGxpbmcgb3V0IHByb2Nlc3MNCiAgICAjIHRoYXQgaGFwcGVucyBkdXJpbmcgQ1B5dGhvbiBpbnRlcnByZXRlciBzaHV0ZG93bg0KICAgICMgQWxhcywgaXQgZG9lc24ndCBhY3R1YWxseSBtYW5hZ2UgaXQuIFNlZSBpc3N1ZSAjMTAxODgNCiAgICBfbGlzdGRpciA9IHN0YXRpY21ldGhvZChfb3MubGlzdGRpcikNCiAgICBfcGF0aF9qb2luID0gc3RhdGljbWV0aG9kKF9vcy5wYXRoLmpvaW4pDQogICAgX2lzZGlyID0gc3RhdGljbWV0aG9kKF9vcy5wYXRoLmlzZGlyKQ0KICAgIF9pc2xpbmsgPSBzdGF0aWNtZXRob2QoX29zLnBhdGguaXNsaW5rKQ0KICAgIF9yZW1vdmUgPSBzdGF0aWNtZXRob2QoX29zLnJlbW92ZSkNCiAgICBfcm1kaXIgPSBzdGF0aWNtZXRob2QoX29zLnJtZGlyKQ0KICAgIF9vc19lcnJvciA9IE9TRXJyb3INCiAgICBfd2FybiA9IF93YXJuaW5ncy53YXJuDQoNCiAgICBkZWYgX3JtdHJlZShzZWxmLCBwYXRoKToNCiAgICAgICAgIyBFc3NlbnRpYWxseSBhIHN0cmlwcGVkIGRvd24gdmVyc2lvbiBvZiBzaHV0aWwucm10cmVlLiAgV2UgY2FuJ3QNCiAgICAgICAgIyB1c2UgZ2xvYmFscyBiZWNhdXNlIHRoZXkgbWF5IGJlIE5vbmUnZWQgb3V0IGF0IHNodXRkb3duLg0KICAgICAgICBmb3IgbmFtZSBpbiBzZWxmLl9saXN0ZGlyKHBhdGgpOg0KICAgICAgICAgICAgZnVsbG5hbWUgPSBzZWxmLl9wYXRoX2pvaW4ocGF0aCwgbmFtZSkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBpc2RpciA9IHNlbGYuX2lzZGlyKGZ1bGxuYW1lKSBhbmQgbm90IHNlbGYuX2lzbGluayhmdWxsbmFtZSkNCiAgICAgICAgICAgIGV4Y2VwdCBzZWxmLl9vc19lcnJvcjoNCiAgICAgICAgICAgICAgICBpc2RpciA9IEZhbHNlDQogICAgICAgICAgICBpZiBpc2RpcjoNCiAgICAgICAgICAgICAgICBzZWxmLl9ybXRyZWUoZnVsbG5hbWUpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVtb3ZlKGZ1bGxuYW1lKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCBzZWxmLl9vc19lcnJvcjoNCiAgICAgICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLl9ybWRpcihwYXRoKQ0KICAgICAgICBleGNlcHQgc2VsZi5fb3NfZXJyb3I6DQogICAgICAgICAgICBwYXNzDQo=',
'/Lib/posix.py':'IiIiVGhpcyBtb2R1bGUgcHJvdmlkZXMgYWNjZXNzIHRvIG9wZXJhdGluZyBzeXN0ZW0gZnVuY3Rpb25hbGl0eSB0aGF0IGlzCnN0YW5kYXJkaXplZCBieSB0aGUgQyBTdGFuZGFyZCBhbmQgdGhlIFBPU0lYIHN0YW5kYXJkIChhIHRoaW5seQpkaXNndWlzZWQgVW5peCBpbnRlcmZhY2UpLiAgUmVmZXIgdG8gdGhlIGxpYnJhcnkgbWFudWFsIGFuZApjb3JyZXNwb25kaW5nIFVuaXggbWFudWFsIGVudHJpZXMgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gY2FsbHMuIiIiCgppbXBvcnQgZGF0ZXRpbWUKCkZfT0sgPSAwCgpPX0FQUEVORCA9IDgKCk9fQklOQVJZID0gMzI3NjgKCk9fQ1JFQVQgPSAyNTYKCk9fRVhDTCA9IDEwMjQKCk9fTk9JTkhFUklUID0gMTI4CgpPX1JBTkRPTSA9IDE2CgpPX1JET05MWSA9IDAKCk9fUkRXUiA9IDIKCk9fU0VRVUVOVElBTCA9IDMyCgpPX1NIT1JUX0xJVkVEID0gNDA5NgoKT19URU1QT1JBUlkgPSA2NAoKT19URVhUID0gMTYzODQKCk9fVFJVTkMgPSA1MTIKCk9fV1JPTkxZID0gMQoKUF9ERVRBQ0ggPSA0CgpQX05PV0FJVCA9IDEKClBfTk9XQUlUTyA9IDMKClBfT1ZFUkxBWSA9IDIKClBfV0FJVCA9IDAKClJfT0sgPSA0CgpUTVBfTUFYID0gMzI3NjcKCldfT0sgPSAyCgpYX09LID0gMQoKY2xhc3MgX19sb2FkZXJfXzoKICAgIHBhc3MKCmRlZiBfZXhpdCgqYXJncywqKmt3KToKICAgICIiIl9leGl0KHN0YXR1cykgICAgCiAgICBFeGl0IHRvIHRoZSBzeXN0ZW0gd2l0aCBzcGVjaWZpZWQgc3RhdHVzLCB3aXRob3V0IG5vcm1hbCBleGl0IHByb2Nlc3NpbmcuIiIiCiAgICBwYXNzCgpkZWYgX2dldGRpc2t1c2FnZSgqYXJncywqKmt3KToKICAgICIiIl9nZXRkaXNrdXNhZ2UocGF0aCkgLT4gKHRvdGFsLCBmcmVlKSAgICAKICAgIFJldHVybiBkaXNrIHVzYWdlIHN0YXRpc3RpY3MgYWJvdXQgdGhlIGdpdmVuIHBhdGggYXMgKHRvdGFsLCBmcmVlKSB0dXBsZS4iIiIKICAgIHBhc3MKCmRlZiBfZ2V0ZmlsZWluZm9ybWF0aW9uKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIF9nZXRmaW5hbHBhdGhuYW1lKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIF9nZXRmdWxscGF0aG5hbWUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpfaGF2ZV9mdW5jdGlvbnMgPSBbJ01TX1dJTkRPV1MnXQoKZGVmIF9pc2RpcigqYXJncywqKmt3KToKICAgICIiIlJldHVybiB0cnVlIGlmIHRoZSBwYXRobmFtZSByZWZlcnMgdG8gYW4gZXhpc3RpbmcgZGlyZWN0b3J5LiIiIgogICAgcGFzcwoKZGVmIGFib3J0KCphcmdzLCoqa3cpOgogICAgIiIiYWJvcnQoKSAtPiBkb2VzIG5vdCByZXR1cm4hICAgIAogICAgQWJvcnQgdGhlIGludGVycHJldGVyIGltbWVkaWF0ZWx5LiAgVGhpcyAnZHVtcHMgY29yZScgb3Igb3RoZXJ3aXNlIGZhaWxzCiAgICBpbiB0aGUgaGFyZGVzdCB3YXkgcG9zc2libGUgb24gdGhlIGhvc3Rpbmcgb3BlcmF0aW5nIHN5c3RlbS4iIiIKICAgIHBhc3MKCmRlZiBhY2Nlc3MoKmFyZ3MsKiprdyk6CiAgICAiIiJhY2Nlc3MocGF0aCwgbW9kZSwgKiwgZGlyX2ZkPU5vbmUsIGVmZmVjdGl2ZV9pZHM9RmFsc2UsIGZvbGxvd19zeW1saW5rcz1UcnVlKSAgICAKICAgIFVzZSB0aGUgcmVhbCB1aWQvZ2lkIHRvIHRlc3QgZm9yIGFjY2VzcyB0byBhIHBhdGguICBSZXR1cm5zIFRydWUgaWYgZ3JhbnRlZCwKICAgIEZhbHNlIG90aGVyd2lzZS4KICAgIAogICAgSWYgZGlyX2ZkIGlzIG5vdCBOb25lLCBpdCBzaG91bGQgYmUgYSBmaWxlIGRlc2NyaXB0b3Igb3BlbiB0byBhIGRpcmVjdG9yeSwKICAgICAgYW5kIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlOyBwYXRoIHdpbGwgdGhlbiBiZSByZWxhdGl2ZSB0byB0aGF0IGRpcmVjdG9yeS4KICAgIElmIGVmZmVjdGl2ZV9pZHMgaXMgVHJ1ZSwgYWNjZXNzIHdpbGwgdXNlIHRoZSBlZmZlY3RpdmUgdWlkL2dpZCBpbnN0ZWFkIG9mCiAgICAgIHRoZSByZWFsIHVpZC9naWQuCiAgICBJZiBmb2xsb3dfc3ltbGlua3MgaXMgRmFsc2UsIGFuZCB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBwYXRoIGlzIGEgc3ltYm9saWMKICAgICAgbGluaywgYWNjZXNzIHdpbGwgZXhhbWluZSB0aGUgc3ltYm9saWMgbGluayBpdHNlbGYgaW5zdGVhZCBvZiB0aGUgZmlsZSB0aGUKICAgICAgbGluayBwb2ludHMgdG8uCiAgICBkaXJfZmQsIGVmZmVjdGl2ZV9pZHMsIGFuZCBmb2xsb3dfc3ltbGlua3MgbWF5IG5vdCBiZSBpbXBsZW1lbnRlZAogICAgICBvbiB5b3VyIHBsYXRmb3JtLiAgSWYgdGhleSBhcmUgdW5hdmFpbGFibGUsIHVzaW5nIHRoZW0gd2lsbCByYWlzZSBhCiAgICAgIE5vdEltcGxlbWVudGVkRXJyb3IuCiAgICAKICAgIE5vdGUgdGhhdCBtb3N0IG9wZXJhdGlvbnMgd2lsbCB1c2UgdGhlIGVmZmVjdGl2ZSB1aWQvZ2lkLCB0aGVyZWZvcmUgdGhpcwogICAgICByb3V0aW5lIGNhbiBiZSB1c2VkIGluIGEgc3VpZC9zZ2lkIGVudmlyb25tZW50IHRvIHRlc3QgaWYgdGhlIGludm9raW5nIHVzZXIKICAgICAgaGFzIHRoZSBzcGVjaWZpZWQgYWNjZXNzIHRvIHRoZSBwYXRoLgogICAgVGhlIG1vZGUgYXJndW1lbnQgY2FuIGJlIEZfT0sgdG8gdGVzdCBleGlzdGVuY2UsIG9yIHRoZSBpbmNsdXNpdmUtT1IKICAgICAgb2YgUl9PSywgV19PSywgYW5kIFhfT0suIiIiCiAgICBwYXNzCgpkZWYgY2hkaXIoKmFyZ3MsKiprdyk6CiAgICAiIiJjaGRpcihwYXRoKSAgICAKICAgIENoYW5nZSB0aGUgY3VycmVudCB3b3JraW5nIGRpcmVjdG9yeSB0byB0aGUgc3BlY2lmaWVkIHBhdGguCiAgICAKICAgIHBhdGggbWF5IGFsd2F5cyBiZSBzcGVjaWZpZWQgYXMgYSBzdHJpbmcuCiAgICBPbiBzb21lIHBsYXRmb3JtcywgcGF0aCBtYXkgYWxzbyBiZSBzcGVjaWZpZWQgYXMgYW4gb3BlbiBmaWxlIGRlc2NyaXB0b3IuCiAgICAgIElmIHRoaXMgZnVuY3Rpb25hbGl0eSBpcyB1bmF2YWlsYWJsZSwgdXNpbmcgaXQgcmFpc2VzIGFuIGV4Y2VwdGlvbi4iIiIKICAgIHBhc3MKCmRlZiBjaG1vZCgqYXJncywqKmt3KToKICAgICIiImNobW9kKHBhdGgsIG1vZGUsICosIGRpcl9mZD1Ob25lLCBmb2xsb3dfc3ltbGlua3M9VHJ1ZSkgICAgCiAgICBDaGFuZ2UgdGhlIGFjY2VzcyBwZXJtaXNzaW9ucyBvZiBhIGZpbGUuCiAgICAKICAgIHBhdGggbWF5IGFsd2F5cyBiZSBzcGVjaWZpZWQgYXMgYSBzdHJpbmcuCiAgICBPbiBzb21lIHBsYXRmb3JtcywgcGF0aCBtYXkgYWxzbyBiZSBzcGVjaWZpZWQgYXMgYW4gb3BlbiBmaWxlIGRlc2NyaXB0b3IuCiAgICAgIElmIHRoaXMgZnVuY3Rpb25hbGl0eSBpcyB1bmF2YWlsYWJsZSwgdXNpbmcgaXQgcmFpc2VzIGFuIGV4Y2VwdGlvbi4KICAgIElmIGRpcl9mZCBpcyBub3QgTm9uZSwgaXQgc2hvdWxkIGJlIGEgZmlsZSBkZXNjcmlwdG9yIG9wZW4gdG8gYSBkaXJlY3RvcnksCiAgICAgIGFuZCBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZTsgcGF0aCB3aWxsIHRoZW4gYmUgcmVsYXRpdmUgdG8gdGhhdCBkaXJlY3RvcnkuCiAgICBJZiBmb2xsb3dfc3ltbGlua3MgaXMgRmFsc2UsIGFuZCB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBwYXRoIGlzIGEgc3ltYm9saWMKICAgICAgbGluaywgY2htb2Qgd2lsbCBtb2RpZnkgdGhlIHN5bWJvbGljIGxpbmsgaXRzZWxmIGluc3RlYWQgb2YgdGhlIGZpbGUgdGhlCiAgICAgIGxpbmsgcG9pbnRzIHRvLgogICAgSXQgaXMgYW4gZXJyb3IgdG8gdXNlIGRpcl9mZCBvciBmb2xsb3dfc3ltbGlua3Mgd2hlbiBzcGVjaWZ5aW5nIHBhdGggYXMKICAgICAgYW4gb3BlbiBmaWxlIGRlc2NyaXB0b3IuCiAgICBkaXJfZmQgYW5kIGZvbGxvd19zeW1saW5rcyBtYXkgbm90IGJlIGltcGxlbWVudGVkIG9uIHlvdXIgcGxhdGZvcm0uCiAgICAgIElmIHRoZXkgYXJlIHVuYXZhaWxhYmxlLCB1c2luZyB0aGVtIHdpbGwgcmFpc2UgYSBOb3RJbXBsZW1lbnRlZEVycm9yLiIiIgogICAgcGFzcwoKZGVmIGNsb3NlKCphcmdzLCoqa3cpOgogICAgIiIiY2xvc2UoZmQpICAgIAogICAgQ2xvc2UgYSBmaWxlIGRlc2NyaXB0b3IgKGZvciBsb3cgbGV2ZWwgSU8pLiIiIgogICAgcGFzcwoKZGVmIGNsb3NlcmFuZ2UoKmFyZ3MsKiprdyk6CiAgICAiIiJjbG9zZXJhbmdlKGZkX2xvdywgZmRfaGlnaCkgICAgCiAgICBDbG9zZXMgYWxsIGZpbGUgZGVzY3JpcHRvcnMgaW4gW2ZkX2xvdywgZmRfaGlnaCksIGlnbm9yaW5nIGVycm9ycy4iIiIKICAgIHBhc3MKCmRlZiBkZXZpY2VfZW5jb2RpbmcoKmFyZ3MsKiprdyk6CiAgICAiIiJkZXZpY2VfZW5jb2RpbmcoZmQpIC0+IHN0ciAgICAKICAgIFJldHVybiBhIHN0cmluZyBkZXNjcmliaW5nIHRoZSBlbmNvZGluZyBvZiB0aGUgZGV2aWNlCiAgICBpZiB0aGUgb3V0cHV0IGlzIGEgdGVybWluYWw7IGVsc2UgcmV0dXJuIE5vbmUuIiIiCiAgICBwYXNzCgpkZWYgZHVwKCphcmdzLCoqa3cpOgogICAgIiIiZHVwKGZkKSAtPiBmZDIgICAgCiAgICBSZXR1cm4gYSBkdXBsaWNhdGUgb2YgYSBmaWxlIGRlc2NyaXB0b3IuIiIiCiAgICBwYXNzCgpkZWYgZHVwMigqYXJncywqKmt3KToKICAgICIiImR1cDIob2xkX2ZkLCBuZXdfZmQpICAgIAogICAgRHVwbGljYXRlIGZpbGUgZGVzY3JpcHRvci4iIiIKICAgIHBhc3MKCmVudmlyb24gPSB7fQoKZXJyb3IgPSBPU0Vycm9yCgpkZWYgZXhlY3YoKmFyZ3MsKiprdyk6CiAgICAiIiJleGVjdihwYXRoLCBhcmdzKSAgICAKICAgIEV4ZWN1dGUgYW4gZXhlY3V0YWJsZSBwYXRoIHdpdGggYXJndW1lbnRzLCByZXBsYWNpbmcgY3VycmVudCBwcm9jZXNzLgogICAgCiAgICAgICAgcGF0aDogcGF0aCBvZiBleGVjdXRhYmxlIGZpbGUKICAgICAgICBhcmdzOiB0dXBsZSBvciBsaXN0IG9mIHN0cmluZ3MiIiIKICAgIHBhc3MKCmRlZiBleGVjdmUoKmFyZ3MsKiprdyk6CiAgICAiIiJleGVjdmUocGF0aCwgYXJncywgZW52KSAgICAKICAgIEV4ZWN1dGUgYSBwYXRoIHdpdGggYXJndW1lbnRzIGFuZCBlbnZpcm9ubWVudCwgcmVwbGFjaW5nIGN1cnJlbnQgcHJvY2Vzcy4KICAgIAogICAgICAgIHBhdGg6IHBhdGggb2YgZXhlY3V0YWJsZSBmaWxlCiAgICAgICAgYXJnczogdHVwbGUgb3IgbGlzdCBvZiBhcmd1bWVudHMKICAgICAgICBlbnY6IGRpY3Rpb25hcnkgb2Ygc3RyaW5ncyBtYXBwaW5nIHRvIHN0cmluZ3MKICAgIAogICAgT24gc29tZSBwbGF0Zm9ybXMsIHlvdSBtYXkgc3BlY2lmeSBhbiBvcGVuIGZpbGUgZGVzY3JpcHRvciBmb3IgcGF0aDsKICAgICAgZXhlY3ZlIHdpbGwgZXhlY3V0ZSB0aGUgcHJvZ3JhbSB0aGUgZmlsZSBkZXNjcmlwdG9yIGlzIG9wZW4gdG8uCiAgICAgIElmIHRoaXMgZnVuY3Rpb25hbGl0eSBpcyB1bmF2YWlsYWJsZSwgdXNpbmcgaXQgcmFpc2VzIE5vdEltcGxlbWVudGVkRXJyb3IuIiIiCiAgICBwYXNzCgpkZWYgZnN0YXQoKmFyZ3MsKiprdyk6CiAgICAiIiJmc3RhdChmZCkgLT4gc3RhdCByZXN1bHQgICAgCiAgICBMaWtlIHN0YXQoKSwgYnV0IGZvciBhbiBvcGVuIGZpbGUgZGVzY3JpcHRvci4KICAgIEVxdWl2YWxlbnQgdG8gc3RhdChmZD1mZCkuIiIiCiAgICBwYXNzCgpkZWYgZnN5bmMoKmFyZ3MsKiprdyk6CiAgICAiIiJmc3luYyhmaWxkZXMpICAgIAogICAgZm9yY2Ugd3JpdGUgb2YgZmlsZSB3aXRoIGZpbGVkZXNjcmlwdG9yIHRvIGRpc2suIiIiCiAgICBwYXNzCgpkZWYgZ2V0X3Rlcm1pbmFsX3NpemUoKmFyZ3MsKiprdyk6CiAgICAiIiJSZXR1cm4gdGhlIHNpemUgb2YgdGhlIHRlcm1pbmFsIHdpbmRvdyBhcyAoY29sdW1ucywgbGluZXMpLiAgICAKICAgIFRoZSBvcHRpb25hbCBhcmd1bWVudCBmZCAoZGVmYXVsdCBzdGFuZGFyZCBvdXRwdXQpIHNwZWNpZmllcwogICAgd2hpY2ggZmlsZSBkZXNjcmlwdG9yIHNob3VsZCBiZSBxdWVyaWVkLgogICAgCiAgICBJZiB0aGUgZmlsZSBkZXNjcmlwdG9yIGlzIG5vdCBjb25uZWN0ZWQgdG8gYSB0ZXJtaW5hbCwgYW4gT1NFcnJvcgogICAgaXMgdGhyb3duLgogICAgCiAgICBUaGlzIGZ1bmN0aW9uIHdpbGwgb25seSBiZSBkZWZpbmVkIGlmIGFuIGltcGxlbWVudGF0aW9uIGlzCiAgICBhdmFpbGFibGUgZm9yIHRoaXMgc3lzdGVtLgogICAgCiAgICBzaHV0aWwuZ2V0X3Rlcm1pbmFsX3NpemUgaXMgdGhlIGhpZ2gtbGV2ZWwgZnVuY3Rpb24gd2hpY2ggc2hvdWxkIAogICAgbm9ybWFsbHkgYmUgdXNlZCwgb3MuZ2V0X3Rlcm1pbmFsX3NpemUgaXMgdGhlIGxvdy1sZXZlbCBpbXBsZW1lbnRhdGlvbi4iIiIKICAgIHBhc3MKCmRlZiBnZXRjd2QoKmFyZ3MsKiprdyk6CiAgICAiIiJnZXRjd2QoKSAtPiBwYXRoICAgIAogICAgUmV0dXJuIGEgdW5pY29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5LiIiIgogICAgcmV0dXJuIF9fQlJZVEhPTl9fLmJyeXRob25fcGF0aCAjIFhYWCBmaXggbWUKCmRlZiBnZXRjd2RiKCphcmdzLCoqa3cpOgogICAgIiIiZ2V0Y3dkYigpIC0+IHBhdGggICAgCiAgICBSZXR1cm4gYSBieXRlcyBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5LiIiIgogICAgcGFzcwoKZGVmIGdldGxvZ2luKCphcmdzLCoqa3cpOgogICAgIiIiZ2V0bG9naW4oKSAtPiBzdHJpbmcgICAgCiAgICBSZXR1cm4gdGhlIGFjdHVhbCBsb2dpbiBuYW1lLiIiIgogICAgcGFzcwoKZGVmIGdldHBpZCgqYXJncywqKmt3KToKICAgICIiImdldHBpZCgpIC0+IHBpZCAgICAKICAgIFJldHVybiB0aGUgY3VycmVudCBwcm9jZXNzIGlkIiIiCiAgICByZXR1cm4gMAoKZGVmIGdldHBwaWQoKmFyZ3MsKiprdyk6CiAgICAiIiJnZXRwcGlkKCkgLT4gcHBpZCAgICAKICAgIFJldHVybiB0aGUgcGFyZW50J3MgcHJvY2VzcyBpZC4gIElmIHRoZSBwYXJlbnQgcHJvY2VzcyBoYXMgYWxyZWFkeSBleGl0ZWQsCiAgICBXaW5kb3dzIG1hY2hpbmVzIHdpbGwgc3RpbGwgcmV0dXJuIGl0cyBpZDsgb3RoZXJzIHN5c3RlbXMgd2lsbCByZXR1cm4gdGhlIGlkCiAgICBvZiB0aGUgJ2luaXQnIHByb2Nlc3MgKDEpLiIiIgogICAgcGFzcwoKZGVmIGlzYXR0eSgqYXJncywqKmt3KToKICAgICIiImlzYXR0eShmZCkgLT4gYm9vbCAgICAKICAgIFJldHVybiBUcnVlIGlmIHRoZSBmaWxlIGRlc2NyaXB0b3IgJ2ZkJyBpcyBhbiBvcGVuIGZpbGUgZGVzY3JpcHRvcgogICAgY29ubmVjdGVkIHRvIHRoZSBzbGF2ZSBlbmQgb2YgYSB0ZXJtaW5hbC4iIiIKICAgIHBhc3MKCmRlZiBraWxsKCphcmdzLCoqa3cpOgogICAgIiIia2lsbChwaWQsIHNpZykgICAgCiAgICBLaWxsIGEgcHJvY2VzcyB3aXRoIGEgc2lnbmFsLiIiIgogICAgcGFzcwoKZGVmIGxpbmsoKmFyZ3MsKiprdyk6CiAgICAiIiJsaW5rKHNyYywgZHN0LCAqLCBzcmNfZGlyX2ZkPU5vbmUsIGRzdF9kaXJfZmQ9Tm9uZSwgZm9sbG93X3N5bWxpbmtzPVRydWUpICAgIAogICAgQ3JlYXRlIGEgaGFyZCBsaW5rIHRvIGEgZmlsZS4KICAgIAogICAgSWYgZWl0aGVyIHNyY19kaXJfZmQgb3IgZHN0X2Rpcl9mZCBpcyBub3QgTm9uZSwgaXQgc2hvdWxkIGJlIGEgZmlsZQogICAgICBkZXNjcmlwdG9yIG9wZW4gdG8gYSBkaXJlY3RvcnksIGFuZCB0aGUgcmVzcGVjdGl2ZSBwYXRoIHN0cmluZyAoc3JjIG9yIGRzdCkKICAgICAgc2hvdWxkIGJlIHJlbGF0aXZlOyB0aGUgcGF0aCB3aWxsIHRoZW4gYmUgcmVsYXRpdmUgdG8gdGhhdCBkaXJlY3RvcnkuCiAgICBJZiBmb2xsb3dfc3ltbGlua3MgaXMgRmFsc2UsIGFuZCB0aGUgbGFzdCBlbGVtZW50IG9mIHNyYyBpcyBhIHN5bWJvbGljCiAgICAgIGxpbmssIGxpbmsgd2lsbCBjcmVhdGUgYSBsaW5rIHRvIHRoZSBzeW1ib2xpYyBsaW5rIGl0c2VsZiBpbnN0ZWFkIG9mIHRoZQogICAgICBmaWxlIHRoZSBsaW5rIHBvaW50cyB0by4KICAgIHNyY19kaXJfZmQsIGRzdF9kaXJfZmQsIGFuZCBmb2xsb3dfc3ltbGlua3MgbWF5IG5vdCBiZSBpbXBsZW1lbnRlZCBvbiB5b3VyCiAgICAgIHBsYXRmb3JtLiAgSWYgdGhleSBhcmUgdW5hdmFpbGFibGUsIHVzaW5nIHRoZW0gd2lsbCByYWlzZSBhCiAgICAgIE5vdEltcGxlbWVudGVkRXJyb3IuIiIiCiAgICBwYXNzCgpkZWYgbGlzdGRpcigqYXJncywqKmt3KToKICAgICIiImxpc3RkaXIocGF0aD0nLicpIC0+IGxpc3Rfb2ZfZmlsZW5hbWVzICAgIAogICAgUmV0dXJuIGEgbGlzdCBjb250YWluaW5nIHRoZSBuYW1lcyBvZiB0aGUgZmlsZXMgaW4gdGhlIGRpcmVjdG9yeS4KICAgIFRoZSBsaXN0IGlzIGluIGFyYml0cmFyeSBvcmRlci4gIEl0IGRvZXMgbm90IGluY2x1ZGUgdGhlIHNwZWNpYWwKICAgIGVudHJpZXMgJy4nIGFuZCAnLi4nIGV2ZW4gaWYgdGhleSBhcmUgcHJlc2VudCBpbiB0aGUgZGlyZWN0b3J5LgogICAgCiAgICBwYXRoIGNhbiBiZSBzcGVjaWZpZWQgYXMgZWl0aGVyIHN0ciBvciBieXRlcy4gIElmIHBhdGggaXMgYnl0ZXMsCiAgICAgIHRoZSBmaWxlbmFtZXMgcmV0dXJuZWQgd2lsbCBhbHNvIGJlIGJ5dGVzOyBpbiBhbGwgb3RoZXIgY2lyY3Vtc3RhbmNlcwogICAgICB0aGUgZmlsZW5hbWVzIHJldHVybmVkIHdpbGwgYmUgc3RyLgogICAgT24gc29tZSBwbGF0Zm9ybXMsIHBhdGggbWF5IGFsc28gYmUgc3BlY2lmaWVkIGFzIGFuIG9wZW4gZmlsZSBkZXNjcmlwdG9yOwogICAgICB0aGUgZmlsZSBkZXNjcmlwdG9yIG11c3QgcmVmZXIgdG8gYSBkaXJlY3RvcnkuCiAgICAgIElmIHRoaXMgZnVuY3Rpb25hbGl0eSBpcyB1bmF2YWlsYWJsZSwgdXNpbmcgaXQgcmFpc2VzIE5vdEltcGxlbWVudGVkRXJyb3IuIiIiCiAgICBwYXNzCgpkZWYgbHNlZWsoKmFyZ3MsKiprdyk6CiAgICAiIiJsc2VlayhmZCwgcG9zLCBob3cpIC0+IG5ld3BvcyAgICAKICAgIFNldCB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiBhIGZpbGUgZGVzY3JpcHRvci4KICAgIFJldHVybiB0aGUgbmV3IGN1cnNvciBwb3NpdGlvbiBpbiBieXRlcywgc3RhcnRpbmcgZnJvbSB0aGUgYmVnaW5uaW5nLiIiIgogICAgcGFzcwoKZGVmIGxzdGF0KCphcmdzLCoqa3cpOgogICAgIiIibHN0YXQocGF0aCwgKiwgZGlyX2ZkPU5vbmUpIC0+IHN0YXQgcmVzdWx0ICAgIAogICAgTGlrZSBzdGF0KCksIGJ1dCBkbyBub3QgZm9sbG93IHN5bWJvbGljIGxpbmtzLgogICAgRXF1aXZhbGVudCB0byBzdGF0KHBhdGgsIGZvbGxvd19zeW1saW5rcz1GYWxzZSkuIiIiCiAgICByZXR1cm4gc3RhdF9yZXN1bHQoKQoKZGVmIG1rZGlyKCphcmdzLCoqa3cpOgogICAgIiIibWtkaXIocGF0aCwgbW9kZT0wbzc3NywgKiwgZGlyX2ZkPU5vbmUpICAgIAogICAgQ3JlYXRlIGEgZGlyZWN0b3J5LgogICAgCiAgICBJZiBkaXJfZmQgaXMgbm90IE5vbmUsIGl0IHNob3VsZCBiZSBhIGZpbGUgZGVzY3JpcHRvciBvcGVuIHRvIGEgZGlyZWN0b3J5LAogICAgICBhbmQgcGF0aCBzaG91bGQgYmUgcmVsYXRpdmU7IHBhdGggd2lsbCB0aGVuIGJlIHJlbGF0aXZlIHRvIHRoYXQgZGlyZWN0b3J5LgogICAgZGlyX2ZkIG1heSBub3QgYmUgaW1wbGVtZW50ZWQgb24geW91ciBwbGF0Zm9ybS4KICAgICAgSWYgaXQgaXMgdW5hdmFpbGFibGUsIHVzaW5nIGl0IHdpbGwgcmFpc2UgYSBOb3RJbXBsZW1lbnRlZEVycm9yLgogICAgCiAgICBUaGUgbW9kZSBhcmd1bWVudCBpcyBpZ25vcmVkIG9uIFdpbmRvd3MuIiIiCiAgICBwYXNzCgpkZWYgb3BlbigqYXJncywqKmt3KToKICAgICIiIm9wZW4ocGF0aCwgZmxhZ3MsIG1vZGU9MG83NzcsICosIGRpcl9mZD1Ob25lKSAgICAKICAgIE9wZW4gYSBmaWxlIGZvciBsb3cgbGV2ZWwgSU8uICBSZXR1cm5zIGEgZmlsZSBoYW5kbGUgKGludGVnZXIpLgogICAgCiAgICBJZiBkaXJfZmQgaXMgbm90IE5vbmUsIGl0IHNob3VsZCBiZSBhIGZpbGUgZGVzY3JpcHRvciBvcGVuIHRvIGEgZGlyZWN0b3J5LAogICAgICBhbmQgcGF0aCBzaG91bGQgYmUgcmVsYXRpdmU7IHBhdGggd2lsbCB0aGVuIGJlIHJlbGF0aXZlIHRvIHRoYXQgZGlyZWN0b3J5LgogICAgZGlyX2ZkIG1heSBub3QgYmUgaW1wbGVtZW50ZWQgb24geW91ciBwbGF0Zm9ybS4KICAgICAgSWYgaXQgaXMgdW5hdmFpbGFibGUsIHVzaW5nIGl0IHdpbGwgcmFpc2UgYSBOb3RJbXBsZW1lbnRlZEVycm9yLiIiIgogICAgcGFzcwoKZGVmIHBpcGUoKmFyZ3MsKiprdyk6CiAgICAiIiJwaXBlKCkgLT4gKHJlYWRfZW5kLCB3cml0ZV9lbmQpICAgIAogICAgQ3JlYXRlIGEgcGlwZS4iIiIKICAgIHBhc3MKCmRlZiBwdXRlbnYoKmFyZ3MsKiprdyk6CiAgICAiIiJwdXRlbnYoa2V5LCB2YWx1ZSkgICAgCiAgICBDaGFuZ2Ugb3IgYWRkIGFuIGVudmlyb25tZW50IHZhcmlhYmxlLiIiIgogICAgcGFzcwoKZGVmIHJlYWQoKmFyZ3MsKiprdyk6CiAgICAiIiJyZWFkKGZkLCBidWZmZXJzaXplKSAtPiBzdHJpbmcgICAgCiAgICBSZWFkIGEgZmlsZSBkZXNjcmlwdG9yLiIiIgogICAgcGFzcwoKZGVmIHJlYWRsaW5rKCphcmdzLCoqa3cpOgogICAgIiIicmVhZGxpbmsocGF0aCwgKiwgZGlyX2ZkPU5vbmUpIC0+IHBhdGggICAgCiAgICBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIHRvIHdoaWNoIHRoZSBzeW1ib2xpYyBsaW5rIHBvaW50cy4KICAgIAogICAgSWYgZGlyX2ZkIGlzIG5vdCBOb25lLCBpdCBzaG91bGQgYmUgYSBmaWxlIGRlc2NyaXB0b3Igb3BlbiB0byBhIGRpcmVjdG9yeSwKICAgICAgYW5kIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlOyBwYXRoIHdpbGwgdGhlbiBiZSByZWxhdGl2ZSB0byB0aGF0IGRpcmVjdG9yeS4KICAgIGRpcl9mZCBtYXkgbm90IGJlIGltcGxlbWVudGVkIG9uIHlvdXIgcGxhdGZvcm0uCiAgICAgIElmIGl0IGlzIHVuYXZhaWxhYmxlLCB1c2luZyBpdCB3aWxsIHJhaXNlIGEgTm90SW1wbGVtZW50ZWRFcnJvci4iIiIKICAgIHBhc3MKCmRlZiByZW1vdmUoKmFyZ3MsKiprdyk6CiAgICAiIiJyZW1vdmUocGF0aCwgKiwgZGlyX2ZkPU5vbmUpICAgIAogICAgUmVtb3ZlIGEgZmlsZSAoc2FtZSBhcyB1bmxpbmsoKSkuCiAgICAKICAgIElmIGRpcl9mZCBpcyBub3QgTm9uZSwgaXQgc2hvdWxkIGJlIGEgZmlsZSBkZXNjcmlwdG9yIG9wZW4gdG8gYSBkaXJlY3RvcnksCiAgICAgIGFuZCBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZTsgcGF0aCB3aWxsIHRoZW4gYmUgcmVsYXRpdmUgdG8gdGhhdCBkaXJlY3RvcnkuCiAgICBkaXJfZmQgbWF5IG5vdCBiZSBpbXBsZW1lbnRlZCBvbiB5b3VyIHBsYXRmb3JtLgogICAgICBJZiBpdCBpcyB1bmF2YWlsYWJsZSwgdXNpbmcgaXQgd2lsbCByYWlzZSBhIE5vdEltcGxlbWVudGVkRXJyb3IuIiIiCiAgICBwYXNzCgpkZWYgcmVuYW1lKCphcmdzLCoqa3cpOgogICAgIiIicmVuYW1lKHNyYywgZHN0LCAqLCBzcmNfZGlyX2ZkPU5vbmUsIGRzdF9kaXJfZmQ9Tm9uZSkgICAgCiAgICBSZW5hbWUgYSBmaWxlIG9yIGRpcmVjdG9yeS4KICAgIAogICAgSWYgZWl0aGVyIHNyY19kaXJfZmQgb3IgZHN0X2Rpcl9mZCBpcyBub3QgTm9uZSwgaXQgc2hvdWxkIGJlIGEgZmlsZQogICAgICBkZXNjcmlwdG9yIG9wZW4gdG8gYSBkaXJlY3RvcnksIGFuZCB0aGUgcmVzcGVjdGl2ZSBwYXRoIHN0cmluZyAoc3JjIG9yIGRzdCkKICAgICAgc2hvdWxkIGJlIHJlbGF0aXZlOyB0aGUgcGF0aCB3aWxsIHRoZW4gYmUgcmVsYXRpdmUgdG8gdGhhdCBkaXJlY3RvcnkuCiAgICBzcmNfZGlyX2ZkIGFuZCBkc3RfZGlyX2ZkLCBtYXkgbm90IGJlIGltcGxlbWVudGVkIG9uIHlvdXIgcGxhdGZvcm0uCiAgICAgIElmIHRoZXkgYXJlIHVuYXZhaWxhYmxlLCB1c2luZyB0aGVtIHdpbGwgcmFpc2UgYSBOb3RJbXBsZW1lbnRlZEVycm9yLiIiIgogICAgcGFzcwoKZGVmIHJlcGxhY2UoKmFyZ3MsKiprdyk6CiAgICAiIiJyZXBsYWNlKHNyYywgZHN0LCAqLCBzcmNfZGlyX2ZkPU5vbmUsIGRzdF9kaXJfZmQ9Tm9uZSkgICAgCiAgICBSZW5hbWUgYSBmaWxlIG9yIGRpcmVjdG9yeSwgb3ZlcndyaXRpbmcgdGhlIGRlc3RpbmF0aW9uLgogICAgCiAgICBJZiBlaXRoZXIgc3JjX2Rpcl9mZCBvciBkc3RfZGlyX2ZkIGlzIG5vdCBOb25lLCBpdCBzaG91bGQgYmUgYSBmaWxlCiAgICAgIGRlc2NyaXB0b3Igb3BlbiB0byBhIGRpcmVjdG9yeSwgYW5kIHRoZSByZXNwZWN0aXZlIHBhdGggc3RyaW5nIChzcmMgb3IgZHN0KQogICAgICBzaG91bGQgYmUgcmVsYXRpdmU7IHRoZSBwYXRoIHdpbGwgdGhlbiBiZSByZWxhdGl2ZSB0byB0aGF0IGRpcmVjdG9yeS4KICAgIHNyY19kaXJfZmQgYW5kIGRzdF9kaXJfZmQsIG1heSBub3QgYmUgaW1wbGVtZW50ZWQgb24geW91ciBwbGF0Zm9ybS4KICAgICAgSWYgdGhleSBhcmUgdW5hdmFpbGFibGUsIHVzaW5nIHRoZW0gd2lsbCByYWlzZSBhIE5vdEltcGxlbWVudGVkRXJyb3IuIiIiCiAgICBwYXNzCgpkZWYgcm1kaXIoKmFyZ3MsKiprdyk6CiAgICAiIiJybWRpcihwYXRoLCAqLCBkaXJfZmQ9Tm9uZSkgICAgCiAgICBSZW1vdmUgYSBkaXJlY3RvcnkuCiAgICAKICAgIElmIGRpcl9mZCBpcyBub3QgTm9uZSwgaXQgc2hvdWxkIGJlIGEgZmlsZSBkZXNjcmlwdG9yIG9wZW4gdG8gYSBkaXJlY3RvcnksCiAgICAgIGFuZCBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZTsgcGF0aCB3aWxsIHRoZW4gYmUgcmVsYXRpdmUgdG8gdGhhdCBkaXJlY3RvcnkuCiAgICBkaXJfZmQgbWF5IG5vdCBiZSBpbXBsZW1lbnRlZCBvbiB5b3VyIHBsYXRmb3JtLgogICAgICBJZiBpdCBpcyB1bmF2YWlsYWJsZSwgdXNpbmcgaXQgd2lsbCByYWlzZSBhIE5vdEltcGxlbWVudGVkRXJyb3IuIiIiCiAgICBwYXNzCgpkZWYgc3Bhd252KCphcmdzLCoqa3cpOgogICAgIiIic3Bhd252KG1vZGUsIHBhdGgsIGFyZ3MpICAgIAogICAgRXhlY3V0ZSB0aGUgcHJvZ3JhbSAncGF0aCcgaW4gYSBuZXcgcHJvY2Vzcy4KICAgIAogICAgICAgIG1vZGU6IG1vZGUgb2YgcHJvY2VzcyBjcmVhdGlvbgogICAgICAgIHBhdGg6IHBhdGggb2YgZXhlY3V0YWJsZSBmaWxlCiAgICAgICAgYXJnczogdHVwbGUgb3IgbGlzdCBvZiBzdHJpbmdzIiIiCiAgICBwYXNzCgpkZWYgc3Bhd252ZSgqYXJncywqKmt3KToKICAgICIiInNwYXdudmUobW9kZSwgcGF0aCwgYXJncywgZW52KSAgICAKICAgIEV4ZWN1dGUgdGhlIHByb2dyYW0gJ3BhdGgnIGluIGEgbmV3IHByb2Nlc3MuCiAgICAKICAgICAgICBtb2RlOiBtb2RlIG9mIHByb2Nlc3MgY3JlYXRpb24KICAgICAgICBwYXRoOiBwYXRoIG9mIGV4ZWN1dGFibGUgZmlsZQogICAgICAgIGFyZ3M6IHR1cGxlIG9yIGxpc3Qgb2YgYXJndW1lbnRzCiAgICAgICAgZW52OiBkaWN0aW9uYXJ5IG9mIHN0cmluZ3MgbWFwcGluZyB0byBzdHJpbmdzIiIiCiAgICBwYXNzCgpkZWYgc3RhcnRmaWxlKCphcmdzLCoqa3cpOgogICAgIiIic3RhcnRmaWxlKGZpbGVwYXRoIFssIG9wZXJhdGlvbl0pIC0gU3RhcnQgYSBmaWxlIHdpdGggaXRzIGFzc29jaWF0ZWQgICAgYXBwbGljYXRpb24uCiAgICAKICAgIFdoZW4gIm9wZXJhdGlvbiIgaXMgbm90IHNwZWNpZmllZCBvciAib3BlbiIsIHRoaXMgYWN0cyBsaWtlCiAgICBkb3VibGUtY2xpY2tpbmcgdGhlIGZpbGUgaW4gRXhwbG9yZXIsIG9yIGdpdmluZyB0aGUgZmlsZSBuYW1lIGFzIGFuCiAgICBhcmd1bWVudCB0byB0aGUgRE9TICJzdGFydCIgY29tbWFuZDogdGhlIGZpbGUgaXMgb3BlbmVkIHdpdGggd2hhdGV2ZXIKICAgIGFwcGxpY2F0aW9uIChpZiBhbnkpIGl0cyBleHRlbnNpb24gaXMgYXNzb2NpYXRlZC4KICAgIFdoZW4gYW5vdGhlciAib3BlcmF0aW9uIiBpcyBnaXZlbiwgaXQgc3BlY2lmaWVzIHdoYXQgc2hvdWxkIGJlIGRvbmUgd2l0aAogICAgdGhlIGZpbGUuICBBIHR5cGljYWwgb3BlcmF0aW9uIGlzICJwcmludCIuCiAgICAKICAgIHN0YXJ0ZmlsZSByZXR1cm5zIGFzIHNvb24gYXMgdGhlIGFzc29jaWF0ZWQgYXBwbGljYXRpb24gaXMgbGF1bmNoZWQuCiAgICBUaGVyZSBpcyBubyBvcHRpb24gdG8gd2FpdCBmb3IgdGhlIGFwcGxpY2F0aW9uIHRvIGNsb3NlLCBhbmQgbm8gd2F5CiAgICB0byByZXRyaWV2ZSB0aGUgYXBwbGljYXRpb24ncyBleGl0IHN0YXR1cy4KICAgIAogICAgVGhlIGZpbGVwYXRoIGlzIHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4gIElmIHlvdSB3YW50IHRvIHVzZQogICAgYW4gYWJzb2x1dGUgcGF0aCwgbWFrZSBzdXJlIHRoZSBmaXJzdCBjaGFyYWN0ZXIgaXMgbm90IGEgc2xhc2ggKCIvIik7CiAgICB0aGUgdW5kZXJseWluZyBXaW4zMiBTaGVsbEV4ZWN1dGUgZnVuY3Rpb24gZG9lc24ndCB3b3JrIGlmIGl0IGlzLiIiIgogICAgcGFzcwoKZGVmIHN0YXQoKmFyZ3MsKiprdyk6CiAgICAiIiJzdGF0KHBhdGgsICosIGRpcl9mZD1Ob25lLCBmb2xsb3dfc3ltbGlua3M9VHJ1ZSkgLT4gc3RhdCByZXN1bHQgICAgCiAgICBQZXJmb3JtIGEgc3RhdCBzeXN0ZW0gY2FsbCBvbiB0aGUgZ2l2ZW4gcGF0aC4KICAgIAogICAgcGF0aCBtYXkgYmUgc3BlY2lmaWVkIGFzIGVpdGhlciBhIHN0cmluZyBvciBhcyBhbiBvcGVuIGZpbGUgZGVzY3JpcHRvci4KICAgIAogICAgSWYgZGlyX2ZkIGlzIG5vdCBOb25lLCBpdCBzaG91bGQgYmUgYSBmaWxlIGRlc2NyaXB0b3Igb3BlbiB0byBhIGRpcmVjdG9yeSwKICAgICAgYW5kIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlOyBwYXRoIHdpbGwgdGhlbiBiZSByZWxhdGl2ZSB0byB0aGF0IGRpcmVjdG9yeS4KICAgICAgZGlyX2ZkIG1heSBub3QgYmUgc3VwcG9ydGVkIG9uIHlvdXIgcGxhdGZvcm07IGlmIGl0IGlzIHVuYXZhaWxhYmxlLCB1c2luZwogICAgICBpdCB3aWxsIHJhaXNlIGEgTm90SW1wbGVtZW50ZWRFcnJvci4KICAgIElmIGZvbGxvd19zeW1saW5rcyBpcyBGYWxzZSwgYW5kIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIHBhdGggaXMgYSBzeW1ib2xpYwogICAgICBsaW5rLCBzdGF0IHdpbGwgZXhhbWluZSB0aGUgc3ltYm9saWMgbGluayBpdHNlbGYgaW5zdGVhZCBvZiB0aGUgZmlsZSB0aGUKICAgICAgbGluayBwb2ludHMgdG8uCiAgICBJdCBpcyBhbiBlcnJvciB0byB1c2UgZGlyX2ZkIG9yIGZvbGxvd19zeW1saW5rcyB3aGVuIHNwZWNpZnlpbmcgcGF0aCBhcwogICAgICBhbiBvcGVuIGZpbGUgZGVzY3JpcHRvci4iIiIKICAgIHJldHVybiBzdGF0X3Jlc3VsdCgpCgpkZWYgc3RhdF9mbG9hdF90aW1lcygqYXJncywqKmt3KToKICAgICIiInN0YXRfZmxvYXRfdGltZXMoW25ld3ZhbF0pIC0+IG9sZHZhbCAgICAKICAgIERldGVybWluZSB3aGV0aGVyIG9zLltsZl1zdGF0IHJlcHJlc2VudHMgdGltZSBzdGFtcHMgYXMgZmxvYXQgb2JqZWN0cy4KICAgIElmIG5ld3ZhbCBpcyBUcnVlLCBmdXR1cmUgY2FsbHMgdG8gc3RhdCgpIHJldHVybiBmbG9hdHMsIGlmIGl0IGlzIEZhbHNlLAogICAgZnV0dXJlIGNhbGxzIHJldHVybiBpbnRzLiAKICAgIElmIG5ld3ZhbCBpcyBvbWl0dGVkLCByZXR1cm4gdGhlIGN1cnJlbnQgc2V0dGluZy4KICAgICIiIgogICAgcGFzcwoKY2xhc3Mgc3RhdF9yZXN1bHQ6CgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgICIiInN0X21vZGUgLSBwcm90ZWN0aW9uIGJpdHMsIAogICAgICAgIHN0X2lubyAtIGlub2RlIG51bWJlciwgCiAgICAgICAgc3RfZGV2IC0gZGV2aWNlLCAKICAgICAgICBzdF9ubGluayAtIG51bWJlciBvZiBoYXJkIGxpbmtzLCAKICAgICAgICBzdF91aWQgLSB1c2VyIGlkIG9mIG93bmVyLCAKICAgICAgICBzdF9naWQgLSBncm91cCBpZCBvZiBvd25lciwgCiAgICAgICAgc3Rfc2l6ZSAtIHNpemUgb2YgZmlsZSwgaW4gYnl0ZXMsIAogICAgICAgIHN0X2F0aW1lIC0gdGltZSBvZiBtb3N0IHJlY2VudCBhY2Nlc3MgZXhwcmVzc2VkIGluIHNlY29uZHMsIAogICAgICAgIHN0X210aW1lIC0gdGltZSBvZiBtb3N0IHJlY2VudCBjb250ZW50IG1vZGlmaWNhdGlvbiBleHByZXNzZWQgaW4gCiAgICAgICAgICAgIHNlY29uZHMsIAogICAgICAgIHN0X2N0aW1lIC0gcGxhdGZvcm0gZGVwZW5kZW50OyB0aW1lIG9mIG1vc3QgcmVjZW50IG1ldGFkYXRhIGNoYW5nZSBvbiAKICAgICAgICAgICAgVW5peCwgb3IgdGhlIHRpbWUgb2YgY3JlYXRpb24gb24gV2luZG93cywgZXhwcmVzc2VkIGluIHNlY29uZHMgCiAgICAgICAgc3RfYXRpbWVfbnMgLSB0aW1lIG9mIG1vc3QgcmVjZW50IGFjY2VzcyBleHByZXNzZWQgaW4gbmFub3NlY29uZHMgYXMgYW4KICAgICAgICAgICAgIGludGVnZXIsIAogICAgICAgIHN0X210aW1lX25zIC0gdGltZSBvZiBtb3N0IHJlY2VudCBjb250ZW50IG1vZGlmaWNhdGlvbiBleHByZXNzZWQgaW4gCiAgICAgICAgICAgIG5hbm9zZWNvbmRzIGFzIGFuIGludGVnZXIsIAogICAgICAgIHN0X2N0aW1lX25zIC0gcGxhdGZvcm0gZGVwZW5kZW50OyB0aW1lIG9mIG1vc3QgcmVjZW50IG1ldGFkYXRhIGNoYW5nZSAKICAgICAgICAgICAgb24gVW5peCwgb3IgdGhlIHRpbWUgb2YgY3JlYXRpb24gb24gV2luZG93cywgZXhwcmVzc2VkIGluIAogICAgICAgICAgICBuYW5vc2Vjb25kcyBhcyBhbiBpbnRlZ2VyICIiIgogICAgICAgICMgQnJ5dGhvbiA6IGZha2UgdmFsdWVzCiAgICAgICAgc2VsZi5zdF9hdGltZSA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpCiAgICAgICAgc2VsZi5zdF9tdGltZSA9IHNlbGYuc3RfY3RpbWUgPSBzZWxmLnN0X2F0aW1lX25zID0gXAogICAgICAgICAgICBzZWxmLnN0X210aW1lX25zID0gc2VsZi5zdF9jdGltZV9ucyA9IHNlbGYuc3RfYXRpbWUKICAgICAgICBzZWxmLnN0X3VpZCA9IHNlbGYuc3RfZ2lkID0gc2VsZi5zdF9pbm8gPSAtMQogICAgICAgIHNlbGYuc3RfbW9kZSA9IDAKICAgICAgICBzZWxmLnN0X3NpemUgPSAxCgpjbGFzcyBzdGF0dmZzX3Jlc3VsdDoKICAgIHBhc3MKCmRlZiBzdHJlcnJvcigqYXJncywqKmt3KToKICAgICIiInN0cmVycm9yKGNvZGUpIC0+IHN0cmluZyAgICAKICAgIFRyYW5zbGF0ZSBhbiBlcnJvciBjb2RlIHRvIGEgbWVzc2FnZSBzdHJpbmcuIiIiCiAgICBwYXNzCgpkZWYgc3ltbGluaygqYXJncywqKmt3KToKICAgICIiInN5bWxpbmsoc3JjLCBkc3QsIHRhcmdldF9pc19kaXJlY3Rvcnk9RmFsc2UsICosIGRpcl9mZD1Ob25lKSAgICAKICAgIENyZWF0ZSBhIHN5bWJvbGljIGxpbmsgcG9pbnRpbmcgdG8gc3JjIG5hbWVkIGRzdC4KICAgIAogICAgdGFyZ2V0X2lzX2RpcmVjdG9yeSBpcyByZXF1aXJlZCBvbiBXaW5kb3dzIGlmIHRoZSB0YXJnZXQgaXMgdG8gYmUKICAgICAgaW50ZXJwcmV0ZWQgYXMgYSBkaXJlY3RvcnkuICAoT24gV2luZG93cywgc3ltbGluayByZXF1aXJlcwogICAgICBXaW5kb3dzIDYuMCBvciBncmVhdGVyLCBhbmQgcmFpc2VzIGEgTm90SW1wbGVtZW50ZWRFcnJvciBvdGhlcndpc2UuKQogICAgICB0YXJnZXRfaXNfZGlyZWN0b3J5IGlzIGlnbm9yZWQgb24gbm9uLVdpbmRvd3MgcGxhdGZvcm1zLgogICAgCiAgICBJZiBkaXJfZmQgaXMgbm90IE5vbmUsIGl0IHNob3VsZCBiZSBhIGZpbGUgZGVzY3JpcHRvciBvcGVuIHRvIGEgZGlyZWN0b3J5LAogICAgICBhbmQgcGF0aCBzaG91bGQgYmUgcmVsYXRpdmU7IHBhdGggd2lsbCB0aGVuIGJlIHJlbGF0aXZlIHRvIHRoYXQgZGlyZWN0b3J5LgogICAgZGlyX2ZkIG1heSBub3QgYmUgaW1wbGVtZW50ZWQgb24geW91ciBwbGF0Zm9ybS4KICAgICAgSWYgaXQgaXMgdW5hdmFpbGFibGUsIHVzaW5nIGl0IHdpbGwgcmFpc2UgYSBOb3RJbXBsZW1lbnRlZEVycm9yLiIiIgogICAgcGFzcwoKZGVmIHN5c3RlbSgqYXJncywqKmt3KToKICAgICIiInN5c3RlbShjb21tYW5kKSAtPiBleGl0X3N0YXR1cyAgICAKICAgIEV4ZWN1dGUgdGhlIGNvbW1hbmQgKGEgc3RyaW5nKSBpbiBhIHN1YnNoZWxsLiIiIgogICAgcGFzcwoKY2xhc3MgdGVybWluYWxfc2l6ZToKICAgIHBhc3MKCmRlZiB0aW1lcygqYXJncywqKmt3KToKICAgICIiInRpbWVzKCkgLT4gdGltZXNfcmVzdWx0ICAgIAogICAgUmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIGZsb2F0aW5nIHBvaW50IG51bWJlcnMgaW5kaWNhdGluZyBwcm9jZXNzCiAgICB0aW1lcy4gIFRoZSBvYmplY3QgYmVoYXZlcyBsaWtlIGEgbmFtZWQgdHVwbGUgd2l0aCB0aGVzZSBmaWVsZHM6CiAgICAgICh1dGltZSwgc3RpbWUsIGN1dGltZSwgY3N0aW1lLCBlbGFwc2VkX3RpbWUpIiIiCiAgICBwYXNzCgpjbGFzcyB0aW1lc19yZXN1bHQ6CiAgICBwYXNzCgpkZWYgdW1hc2soKmFyZ3MsKiprdyk6CiAgICAiIiJ1bWFzayhuZXdfbWFzaykgLT4gb2xkX21hc2sgICAgCiAgICBTZXQgdGhlIGN1cnJlbnQgbnVtZXJpYyB1bWFzayBhbmQgcmV0dXJuIHRoZSBwcmV2aW91cyB1bWFzay4iIiIKICAgIHBhc3MKCmNsYXNzIHVuYW1lX3Jlc3VsdDoKICAgIHBhc3MKCmRlZiB1bmxpbmsoKmFyZ3MsKiprdyk6CiAgICAiIiJ1bmxpbmsocGF0aCwgKiwgZGlyX2ZkPU5vbmUpICAgIAogICAgUmVtb3ZlIGEgZmlsZSAoc2FtZSBhcyByZW1vdmUoKSkuCiAgICAKICAgIElmIGRpcl9mZCBpcyBub3QgTm9uZSwgaXQgc2hvdWxkIGJlIGEgZmlsZSBkZXNjcmlwdG9yIG9wZW4gdG8gYSBkaXJlY3RvcnksCiAgICAgIGFuZCBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZTsgcGF0aCB3aWxsIHRoZW4gYmUgcmVsYXRpdmUgdG8gdGhhdCBkaXJlY3RvcnkuCiAgICBkaXJfZmQgbWF5IG5vdCBiZSBpbXBsZW1lbnRlZCBvbiB5b3VyIHBsYXRmb3JtLgogICAgICBJZiBpdCBpcyB1bmF2YWlsYWJsZSwgdXNpbmcgaXQgd2lsbCByYWlzZSBhIE5vdEltcGxlbWVudGVkRXJyb3IuIiIiCiAgICBwYXNzCgpkZWYgdXJhbmRvbShuKToKICAgICIiInVyYW5kb20obikgLT4gc3RyICAgIAogICAgUmV0dXJuIG4gcmFuZG9tIGJ5dGVzIHN1aXRhYmxlIGZvciBjcnlwdG9ncmFwaGljIHVzZS4iIiIKICAgIHJldHVybiAnYScqbgoKZGVmIHV0aW1lKCphcmdzLCoqa3cpOgogICAgIiIidXRpbWUocGF0aCwgdGltZXM9Tm9uZSwgKiwgbnM9Tm9uZSwgZGlyX2ZkPU5vbmUsIGZvbGxvd19zeW1saW5rcz1UcnVlKSAgICBTZXQgdGhlIGFjY2VzcyBhbmQgbW9kaWZpZWQgdGltZSBvZiBwYXRoLgogICAgCiAgICBwYXRoIG1heSBhbHdheXMgYmUgc3BlY2lmaWVkIGFzIGEgc3RyaW5nLgogICAgT24gc29tZSBwbGF0Zm9ybXMsIHBhdGggbWF5IGFsc28gYmUgc3BlY2lmaWVkIGFzIGFuIG9wZW4gZmlsZSBkZXNjcmlwdG9yLgogICAgICBJZiB0aGlzIGZ1bmN0aW9uYWxpdHkgaXMgdW5hdmFpbGFibGUsIHVzaW5nIGl0IHJhaXNlcyBhbiBleGNlcHRpb24uCiAgICAKICAgIElmIHRpbWVzIGlzIG5vdCBOb25lLCBpdCBtdXN0IGJlIGEgdHVwbGUgKGF0aW1lLCBtdGltZSk7CiAgICAgICAgYXRpbWUgYW5kIG10aW1lIHNob3VsZCBiZSBleHByZXNzZWQgYXMgZmxvYXQgc2Vjb25kcyBzaW5jZSB0aGUgZXBvY2guCiAgICBJZiBucyBpcyBub3QgTm9uZSwgaXQgbXVzdCBiZSBhIHR1cGxlIChhdGltZV9ucywgbXRpbWVfbnMpOwogICAgICAgIGF0aW1lX25zIGFuZCBtdGltZV9ucyBzaG91bGQgYmUgZXhwcmVzc2VkIGFzIGludGVnZXIgbmFub3NlY29uZHMKICAgICAgICBzaW5jZSB0aGUgZXBvY2guCiAgICBJZiBib3RoIHRpbWVzIGFuZCBucyBhcmUgTm9uZSwgdXRpbWUgdXNlcyB0aGUgY3VycmVudCB0aW1lLgogICAgU3BlY2lmeWluZyB0dXBsZXMgZm9yIGJvdGggdGltZXMgYW5kIG5zIGlzIGFuIGVycm9yLgogICAgCiAgICBJZiBkaXJfZmQgaXMgbm90IE5vbmUsIGl0IHNob3VsZCBiZSBhIGZpbGUgZGVzY3JpcHRvciBvcGVuIHRvIGEgZGlyZWN0b3J5LAogICAgICBhbmQgcGF0aCBzaG91bGQgYmUgcmVsYXRpdmU7IHBhdGggd2lsbCB0aGVuIGJlIHJlbGF0aXZlIHRvIHRoYXQgZGlyZWN0b3J5LgogICAgSWYgZm9sbG93X3N5bWxpbmtzIGlzIEZhbHNlLCBhbmQgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgcGF0aCBpcyBhIHN5bWJvbGljCiAgICAgIGxpbmssIHV0aW1lIHdpbGwgbW9kaWZ5IHRoZSBzeW1ib2xpYyBsaW5rIGl0c2VsZiBpbnN0ZWFkIG9mIHRoZSBmaWxlIHRoZQogICAgICBsaW5rIHBvaW50cyB0by4KICAgIEl0IGlzIGFuIGVycm9yIHRvIHVzZSBkaXJfZmQgb3IgZm9sbG93X3N5bWxpbmtzIHdoZW4gc3BlY2lmeWluZyBwYXRoCiAgICAgIGFzIGFuIG9wZW4gZmlsZSBkZXNjcmlwdG9yLgogICAgZGlyX2ZkIGFuZCBmb2xsb3dfc3ltbGlua3MgbWF5IG5vdCBiZSBhdmFpbGFibGUgb24geW91ciBwbGF0Zm9ybS4KICAgICAgSWYgdGhleSBhcmUgdW5hdmFpbGFibGUsIHVzaW5nIHRoZW0gd2lsbCByYWlzZSBhIE5vdEltcGxlbWVudGVkRXJyb3IuIiIiCiAgICBwYXNzCgpkZWYgd2FpdHBpZCgqYXJncywqKmt3KToKICAgICIiIndhaXRwaWQocGlkLCBvcHRpb25zKSAtPiAocGlkLCBzdGF0dXMgPDwgOCkgICAgCiAgICBXYWl0IGZvciBjb21wbGV0aW9uIG9mIGEgZ2l2ZW4gcHJvY2Vzcy4gIG9wdGlvbnMgaXMgaWdub3JlZCBvbiBXaW5kb3dzLiIiIgogICAgcGFzcwoKZGVmIHdyaXRlKCphcmdzLCoqa3cpOgogICAgIiIid3JpdGUoZmQsIHN0cmluZykgLT4gYnl0ZXN3cml0dGVuICAgIAogICAgV3JpdGUgYSBzdHJpbmcgdG8gYSBmaWxlIGRlc2NyaXB0b3IuIiIiCiAgICBwYXNzCg==',
'/Lib/locale.py':'ZGVmIGdldGRlZmF1bHRsb2NhbGUoKToKICAgIHJldHVybiBfX0JSWVRIT05fXy5sYW5ndWFnZSxOb25l',
'/Lib/atexit.py':'IiIiYWxsb3cgcHJvZ3JhbW1lciB0byBkZWZpbmUgbXVsdGlwbGUgZXhpdCBmdW5jdGlvbnMgdG8gYmUgZXhlY3V0ZWR1cG9uIG5vcm1hbCBwcm9ncmFtIHRlcm1pbmF0aW9uLgoKVHdvIHB1YmxpYyBmdW5jdGlvbnMsIHJlZ2lzdGVyIGFuZCB1bnJlZ2lzdGVyLCBhcmUgZGVmaW5lZC4KIiIiCgoKY2xhc3MgX19sb2FkZXJfXyhvYmplY3QpOgogICAgcGFzcwoKZGVmIF9jbGVhcigqYXJncywqKmt3KToKICAgICIiIl9jbGVhcigpIC0+IE5vbmUgICAgCiAgICBDbGVhciB0aGUgbGlzdCBvZiBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgZXhpdCBmdW5jdGlvbnMuIiIiCiAgICBwYXNzCgpkZWYgX3J1bl9leGl0ZnVuY3MoKmFyZ3MsKiprdyk6CiAgICAiIiJfcnVuX2V4aXRmdW5jcygpIC0+IE5vbmUgICAgCiAgICBSdW4gYWxsIHJlZ2lzdGVyZWQgZXhpdCBmdW5jdGlvbnMuIiIiCiAgICBwYXNzCgpkZWYgcmVnaXN0ZXIoKmFyZ3MsKiprdyk6CiAgICAiIiJyZWdpc3RlcihmdW5jLCAqYXJncywgKiprd2FyZ3MpIC0+IGZ1bmMgICAgCiAgICBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIHVwb24gbm9ybWFsIHByb2dyYW0gdGVybWluYXRpb24KICAgIAogICAgICAgIGZ1bmMgLSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgYXQgZXhpdAogICAgICAgIGFyZ3MgLSBvcHRpb25hbCBhcmd1bWVudHMgdG8gcGFzcyB0byBmdW5jCiAgICAgICAga3dhcmdzIC0gb3B0aW9uYWwga2V5d29yZCBhcmd1bWVudHMgdG8gcGFzcyB0byBmdW5jCiAgICAKICAgICAgICBmdW5jIGlzIHJldHVybmVkIHRvIGZhY2lsaXRhdGUgdXNhZ2UgYXMgYSBkZWNvcmF0b3IuIiIiCiAgICBwYXNzCgpkZWYgdW5yZWdpc3RlcigqYXJncywqKmt3KToKICAgICIiInVucmVnaXN0ZXIoZnVuYykgLT4gTm9uZSAgICAKICAgIFVucmVnaXN0ZXIgYSBleGl0IGZ1bmN0aW9uIHdoaWNoIHdhcyBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgdXNpbmcKICAgIGF0ZXhpdC5yZWdpc3RlcgogICAgCiAgICAgICAgZnVuYyAtIGZ1bmN0aW9uIHRvIGJlIHVucmVnaXN0ZXJlZCIiIgogICAgcGFzcwo=',
'/Lib/dis.py':'ZGVmIGRpcyhzcmMpOgogICAgcmV0dXJuIF9fQlJZVEhPTl9fLkpTT2JqZWN0KF9fQlJZVEhPTl9fLnB5MmpzKHNyYykpLnRvX2pzKCkK',
'/Lib/types.py':'IiIiCkRlZmluZSBuYW1lcyBmb3IgYnVpbHQtaW4gdHlwZXMgdGhhdCBhcmVuJ3QgZGlyZWN0bHkgYWNjZXNzaWJsZSBhcyBhIGJ1aWx0aW4uCiIiIgppbXBvcnQgc3lzCgojIEl0ZXJhdG9ycyBpbiBQeXRob24gYXJlbid0IGEgbWF0dGVyIG9mIHR5cGUgYnV0IG9mIHByb3RvY29sLiAgQSBsYXJnZQojIGFuZCBjaGFuZ2luZyBudW1iZXIgb2YgYnVpbHRpbiB0eXBlcyBpbXBsZW1lbnQgKnNvbWUqIGZsYXZvciBvZgojIGl0ZXJhdG9yLiAgRG9uJ3QgY2hlY2sgdGhlIHR5cGUhICBVc2UgaGFzYXR0ciB0byBjaGVjayBmb3IgYm90aAojICJfX2l0ZXJfXyIgYW5kICJfX25leHRfXyIgYXR0cmlidXRlcyBpbnN0ZWFkLgoKI2RlZiBfZigpOiBwYXNzCiNGdW5jdGlvblR5cGUgPSB0eXBlKF9mKQojTGFtYmRhVHlwZSA9IHR5cGUobGFtYmRhOiBOb25lKSAgICAgICAgICMgU2FtZSBhcyBGdW5jdGlvblR5cGUKI0NvZGVUeXBlID0gdHlwZShfZi5fX2NvZGVfXykKCiNkZWYgX2coKToKIyAgICB5aWVsZCAxCiNHZW5lcmF0b3JUeXBlID0gdHlwZShfZygpKQoKY2xhc3MgX0M6CiAgICBkZWYgX20oc2VsZik6IHBhc3MKTWV0aG9kVHlwZSA9IHR5cGUoX0MoKS5fbSkKCkJ1aWx0aW5GdW5jdGlvblR5cGUgPSB0eXBlKGxlbikKQnVpbHRpbk1ldGhvZFR5cGUgPSB0eXBlKFtdLmFwcGVuZCkgICAgICMgU2FtZSBhcyBCdWlsdGluRnVuY3Rpb25UeXBlCgpNb2R1bGVUeXBlID0gdHlwZShzeXMpCmRlZiBmb28oKTpwYXNzCkZ1bmN0aW9uVHlwZSA9IHR5cGUoZm9vKQojdHJ5OgojICAgIHJhaXNlIFR5cGVFcnJvcgojZXhjZXB0IFR5cGVFcnJvcjoKIyAgICB0YiA9IHN5cy5leGNfaW5mbygpWzJdCiMgICAgVHJhY2ViYWNrVHlwZSA9IHR5cGUodGIpCiMgICAgRnJhbWVUeXBlID0gdHlwZSh0Yi50Yl9mcmFtZSkKIyAgICB0YiA9IE5vbmU7IGRlbCB0YgoKIyBGb3IgSnl0aG9uLCB0aGUgZm9sbG93aW5nIHR3byB0eXBlcyBhcmUgaWRlbnRpY2FsCiNHZXRTZXREZXNjcmlwdG9yVHlwZSA9IHR5cGUoRnVuY3Rpb25UeXBlLl9fY29kZV9fKQojTWVtYmVyRGVzY3JpcHRvclR5cGUgPSB0eXBlKEZ1bmN0aW9uVHlwZS5fX2dsb2JhbHNfXykKCiNmaXhtZSBicnl0aG9uCiNkZWwgc3lzLCBfZiwgX2csIF9DLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTm90IGZvciBleHBvcnQK',
'/Lib/_testcapi.py':'CkNIQVJfTUFYID0gMTI3CgpDSEFSX01JTiA9IC0xMjgKCkRCTF9NQVggPSAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOAoKREJMX01JTiA9IDIuMjI1MDczODU4NTA3MjAxNGUtMzA4CgpGTFRfTUFYID0gMy40MDI4MjM0NjYzODUyODg2ZSszOAoKRkxUX01JTiA9IDEuMTc1NDk0MzUwODIyMjg3NWUtMzgKCklOVF9NQVggPSAyMTQ3NDgzNjQ3CgpJTlRfTUlOID0gLTIxNDc0ODM2NDgKCkxMT05HX01BWCA9IDkyMjMzNzIwMzY4NTQ3NzU4MDcKCkxMT05HX01JTiA9IC05MjIzMzcyMDM2ODU0Nzc1ODA4CgpMT05HX01BWCA9IDIxNDc0ODM2NDcKCkxPTkdfTUlOID0gLTIxNDc0ODM2NDgKClBZX1NTSVpFX1RfTUFYID0gMjE0NzQ4MzY0NwoKUFlfU1NJWkVfVF9NSU4gPSAtMjE0NzQ4MzY0OAoKU0hSVF9NQVggPSAzMjc2NwoKU0hSVF9NSU4gPSAtMzI3NjgKClNJWkVPRl9QWUdDX0hFQUQgPSAxNgoKVUNIQVJfTUFYID0gMjU1CgpVSU5UX01BWCA9IDQyOTQ5NjcyOTUKClVMTE9OR19NQVggPSAxODQ0Njc0NDA3MzcwOTU1MTYxNQoKVUxPTkdfTUFYID0gNDI5NDk2NzI5NQoKVVNIUlRfTUFYID0gNjU1MzUKCl9fbG9hZGVyX18gPSAiPF9mcm96ZW5faW1wb3J0bGliLkV4dGVuc2lvbkZpbGVMb2FkZXIgb2JqZWN0IGF0IDB4MDBDOThERDA+IgoKZGVmIF9wZW5kaW5nX3RocmVhZGZ1bmMoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpjbGFzcyBfdGVzdF9zdHJ1Y3RtZW1iZXJzVHlwZShvYmplY3QpOgogICAgcGFzcwoKZGVmIF90ZXN0X3RocmVhZF9zdGF0ZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBhcmdwYXJzaW5nKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGNvZGVfbmV3ZW1wdHkoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgY29kZWNfaW5jcmVtZW50YWxkZWNvZGVyKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGNvZGVjX2luY3JlbWVudGFsZW5jb2RlcigqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBjcmFzaF9ub19jdXJyZW50X3RocmVhZCgqYXJncywqKmt3KToKICAgIHBhc3MKCmNsYXNzIGVycm9yKEV4Y2VwdGlvbik6CiAgICBwYXNzCgpkZWYgZXhjZXB0aW9uX3ByaW50KCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGdldGFyZ3NfQigqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBnZXRhcmdzX0goKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc19JKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGdldGFyZ3NfSygqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBnZXRhcmdzX0woKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc19aKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGdldGFyZ3NfWl9oYXNoKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGdldGFyZ3NfYigqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBnZXRhcmdzX2MoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc19oKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGdldGFyZ3NfaSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBnZXRhcmdzX2soKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc19rZXl3b3JkX29ubHkoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc19rZXl3b3JkcygqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBnZXRhcmdzX2woKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc19uKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGdldGFyZ3NfcCgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBnZXRhcmdzX3MoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc19zX2hhc2goKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc19zX3N0YXIoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc190dXBsZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBnZXRhcmdzX3UoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc191X2hhc2goKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc193X3N0YXIoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgZ2V0YXJnc195KCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGdldGFyZ3NfeV9oYXNoKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGdldGFyZ3NfeV9zdGFyKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGdldGFyZ3NfeigqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBnZXRhcmdzX3pfaGFzaCgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBnZXRhcmdzX3pfc3RhcigqYXJncywqKmt3KToKICAgIHBhc3MKCmNsYXNzIGluc3RhbmNlbWV0aG9kKG9iamVjdCk6CiAgICBwYXNzCgpkZWYgbWFrZV9leGNlcHRpb25fd2l0aF9kb2MoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgbWFrZV9tZW1vcnl2aWV3X2Zyb21fTlVMTF9wb2ludGVyKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHBhcnNlX3R1cGxlX2FuZF9rZXl3b3JkcygqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBweXRpbWVfb2JqZWN0X3RvX3RpbWVfdCgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBweXRpbWVfb2JqZWN0X3RvX3RpbWVzcGVjKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHB5dGltZV9vYmplY3RfdG9fdGltZXZhbCgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiByYWlzZV9leGNlcHRpb24oKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgcmFpc2VfbWVtb3J5ZXJyb3IoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgcnVuX2luX3N1YmludGVycCgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBzZXRfZXhjX2luZm8oKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdGVzdF9MX2NvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdGVzdF9aX2NvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdGVzdF9jYXBzdWxlKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHRlc3RfY29uZmlnKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHRlc3RfZGF0ZXRpbWVfY2FwaSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB0ZXN0X2RpY3RfaXRlcmF0aW9uKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHRlc3RfZW1wdHlfYXJncGFyc2UoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdGVzdF9rX2NvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdGVzdF9sYXp5X2hhc2hfaW5oZXJpdGFuY2UoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdGVzdF9saXN0X2FwaSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB0ZXN0X2xvbmdfYW5kX292ZXJmbG93KCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHRlc3RfbG9uZ19hcGkoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdGVzdF9sb25nX2FzX2RvdWJsZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB0ZXN0X2xvbmdfYXNfc2l6ZV90KCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHRlc3RfbG9uZ19sb25nX2FuZF9vdmVyZmxvdygqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB0ZXN0X2xvbmdfbnVtYml0cygqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB0ZXN0X2xvbmdsb25nX2FwaSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB0ZXN0X251bGxfc3RyaW5ncygqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB0ZXN0X3NfY29kZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB0ZXN0X3N0cmluZ19mcm9tX2Zvcm1hdCgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB0ZXN0X3N0cmluZ190b19kb3VibGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdGVzdF91X2NvZGUoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdGVzdF91bmljb2RlX2NvbXBhcmVfd2l0aF9hc2NpaSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB0ZXN0X3dpZGVjaGFyKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHRlc3Rfd2l0aF9kb2NzdHJpbmcoKmFyZ3MsKiprdyk6CiAgICAiIiJUaGlzIGlzIGEgcHJldHR5IG5vcm1hbCBkb2NzdHJpbmcuIiIiCiAgICBwYXNzCgpkZWYgdHJhY2ViYWNrX3ByaW50KCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHVuaWNvZGVfYXN3aWRlY2hhcigqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiB1bmljb2RlX2Fzd2lkZWNoYXJzdHJpbmcoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgdW5pY29kZV9lbmNvZGVkZWNpbWFsKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIHVuaWNvZGVfdHJhbnNmb3JtZGVjaW1hbHRvYXNjaWkoKmFyZ3MsKiprdyk6CiAgICBwYXNzCg==',
'/Lib/_weakrefset.py':'IyBBY2Nlc3MgV2Vha1NldCB0aHJvdWdoIHRoZSB3ZWFrcmVmIG1vZHVsZS4KIyBUaGlzIGNvZGUgaXMgc2VwYXJhdGVkLW91dCBiZWNhdXNlIGl0IGlzIG5lZWRlZAojIGJ5IGFiYy5weSB0byBsb2FkIGV2ZXJ5dGhpbmcgZWxzZSBhdCBzdGFydHVwLgoKZnJvbSBfd2Vha3JlZiBpbXBvcnQgcmVmCgpfX2FsbF9fID0gWydXZWFrU2V0J10KCgpjbGFzcyBfSXRlcmF0aW9uR3VhcmQ6CiAgICAjIFRoaXMgY29udGV4dCBtYW5hZ2VyIHJlZ2lzdGVycyBpdHNlbGYgaW4gdGhlIGN1cnJlbnQgaXRlcmF0b3JzIG9mIHRoZQogICAgIyB3ZWFrIGNvbnRhaW5lciwgc3VjaCBhcyB0byBkZWxheSBhbGwgcmVtb3ZhbHMgdW50aWwgdGhlIGNvbnRleHQgbWFuYWdlcgogICAgIyBleGl0cy4KICAgICMgVGhpcyB0ZWNobmlxdWUgc2hvdWxkIGJlIHJlbGF0aXZlbHkgdGhyZWFkLXNhZmUgKHNpbmNlIHNldHMgYXJlKS4KCiAgICBkZWYgX19pbml0X18oc2VsZiwgd2Vha2NvbnRhaW5lcik6CiAgICAgICAgIyBEb24ndCBjcmVhdGUgY3ljbGVzCiAgICAgICAgcHJpbnQoJ2NyZWF0ZSBpdGVyYXRpb24gZ3VhcmQnLCB3ZWFrY29udGFpbmVyKQogICAgICAgIHNlbGYud2Vha2NvbnRhaW5lciA9IHJlZih3ZWFrY29udGFpbmVyKQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgcHJpbnQoJ2VudGVyIGl0ZXJhdGlvbiBndWFyZCcpCiAgICAgICAgdyA9IHNlbGYud2Vha2NvbnRhaW5lcigpCiAgICAgICAgaWYgdyBpcyBub3QgTm9uZToKICAgICAgICAgICAgdy5faXRlcmF0aW5nLmFkZChzZWxmKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIGUsIHQsIGIpOgogICAgICAgIHcgPSBzZWxmLndlYWtjb250YWluZXIoKQogICAgICAgIGlmIHcgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHMgPSB3Ll9pdGVyYXRpbmcKICAgICAgICAgICAgcy5yZW1vdmUoc2VsZikKICAgICAgICAgICAgaWYgbm90IHM6CiAgICAgICAgICAgICAgICB3Ll9jb21taXRfcmVtb3ZhbHMoKQoKCmNsYXNzIFdlYWtTZXQ6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZGF0YT1Ob25lKToKICAgICAgICBzZWxmLmRhdGEgPSBzZXQoKQogICAgICAgIGRlZiBfcmVtb3ZlKGl0ZW0sIHNlbGZyZWY9cmVmKHNlbGYpKToKICAgICAgICAgICAgc2VsZiA9IHNlbGZyZWYoKQogICAgICAgICAgICBpZiBzZWxmIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgaWYgc2VsZi5faXRlcmF0aW5nOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMuYXBwZW5kKGl0ZW0pCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuZGF0YS5kaXNjYXJkKGl0ZW0pCiAgICAgICAgc2VsZi5fcmVtb3ZlID0gX3JlbW92ZQogICAgICAgICMgQSBsaXN0IG9mIGtleXMgdG8gYmUgcmVtb3ZlZAogICAgICAgIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMgPSBbXQogICAgICAgIHNlbGYuX2l0ZXJhdGluZyA9IHNldCgpCiAgICAgICAgaWYgZGF0YSBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi51cGRhdGUoZGF0YSkKCiAgICBkZWYgX2NvbW1pdF9yZW1vdmFscyhzZWxmKToKICAgICAgICBsID0gc2VsZi5fcGVuZGluZ19yZW1vdmFscwogICAgICAgIGRpc2NhcmQgPSBzZWxmLmRhdGEuZGlzY2FyZAogICAgICAgIHdoaWxlIGw6CiAgICAgICAgICAgIGRpc2NhcmQobC5wb3AoKSkKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgd2l0aCBfSXRlcmF0aW9uR3VhcmQoc2VsZik6CiAgICAgICAgICAgIGZvciBpdGVtcmVmIGluIHNlbGYuZGF0YToKICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtcmVmKCkKICAgICAgICAgICAgICAgIGlmIGl0ZW0gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgeWllbGQgaXRlbQoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiBsZW4oc2VsZi5kYXRhKSAtIGxlbihzZWxmLl9wZW5kaW5nX3JlbW92YWxzKQoKICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwgaXRlbSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB3ciA9IHJlZihpdGVtKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIHJldHVybiB3ciBpbiBzZWxmLmRhdGEKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCAobGlzdChzZWxmKSwpLAogICAgICAgICAgICAgICAgZ2V0YXR0cihzZWxmLCAnX19kaWN0X18nLCBOb25lKSkKCiAgICBkZWYgYWRkKHNlbGYsIGl0ZW0pOgogICAgICAgIGlmIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHM6CiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpCiAgICAgICAgc2VsZi5kYXRhLmFkZChyZWYoaXRlbSwgc2VsZi5fcmVtb3ZlKSkKCiAgICBkZWYgY2xlYXIoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoKICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkKICAgICAgICBzZWxmLmRhdGEuY2xlYXIoKQoKICAgIGRlZiBjb3B5KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXyhzZWxmKQoKICAgIGRlZiBwb3Aoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoKICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpdGVtcmVmID0gc2VsZi5kYXRhLnBvcCgpCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKCdwb3AgZnJvbSBlbXB0eSBXZWFrU2V0JykKICAgICAgICAgICAgaXRlbSA9IGl0ZW1yZWYoKQogICAgICAgICAgICBpZiBpdGVtIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0KCiAgICBkZWYgcmVtb3ZlKHNlbGYsIGl0ZW0pOgogICAgICAgIGlmIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHM6CiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpCiAgICAgICAgc2VsZi5kYXRhLnJlbW92ZShyZWYoaXRlbSkpCgogICAgZGVmIGRpc2NhcmQoc2VsZiwgaXRlbSk6CiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoKICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkKICAgICAgICBzZWxmLmRhdGEuZGlzY2FyZChyZWYoaXRlbSkpCgogICAgZGVmIHVwZGF0ZShzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoKICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkKICAgICAgICBmb3IgZWxlbWVudCBpbiBvdGhlcjoKICAgICAgICAgICAgc2VsZi5hZGQoZWxlbWVudCkKCiAgICBkZWYgX19pb3JfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgc2VsZi51cGRhdGUob3RoZXIpCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgZGlmZmVyZW5jZShzZWxmLCBvdGhlcik6CiAgICAgICAgbmV3c2V0ID0gc2VsZi5jb3B5KCkKICAgICAgICBuZXdzZXQuZGlmZmVyZW5jZV91cGRhdGUob3RoZXIpCiAgICAgICAgcmV0dXJuIG5ld3NldAogICAgX19zdWJfXyA9IGRpZmZlcmVuY2UKCiAgICBkZWYgZGlmZmVyZW5jZV91cGRhdGUoc2VsZiwgb3RoZXIpOgogICAgICAgIHNlbGYuX19pc3ViX18ob3RoZXIpCiAgICBkZWYgX19pc3ViX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHM6CiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpCiAgICAgICAgaWYgc2VsZiBpcyBvdGhlcjoKICAgICAgICAgICAgc2VsZi5kYXRhLmNsZWFyKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmRhdGEuZGlmZmVyZW5jZV91cGRhdGUocmVmKGl0ZW0pIGZvciBpdGVtIGluIG90aGVyKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIGludGVyc2VjdGlvbihzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKGl0ZW0gZm9yIGl0ZW0gaW4gb3RoZXIgaWYgaXRlbSBpbiBzZWxmKQogICAgX19hbmRfXyA9IGludGVyc2VjdGlvbgoKICAgIGRlZiBpbnRlcnNlY3Rpb25fdXBkYXRlKHNlbGYsIG90aGVyKToKICAgICAgICBzZWxmLl9faWFuZF9fKG90aGVyKQogICAgZGVmIF9faWFuZF9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBzZWxmLl9wZW5kaW5nX3JlbW92YWxzOgogICAgICAgICAgICBzZWxmLl9jb21taXRfcmVtb3ZhbHMoKQogICAgICAgIHNlbGYuZGF0YS5pbnRlcnNlY3Rpb25fdXBkYXRlKHJlZihpdGVtKSBmb3IgaXRlbSBpbiBvdGhlcikKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBpc3N1YnNldChzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIHNlbGYuZGF0YS5pc3N1YnNldChyZWYoaXRlbSkgZm9yIGl0ZW0gaW4gb3RoZXIpCiAgICBfX2xlX18gPSBpc3N1YnNldAoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIHJldHVybiBzZWxmLmRhdGEgPCBzZXQocmVmKGl0ZW0pIGZvciBpdGVtIGluIG90aGVyKQoKICAgIGRlZiBpc3N1cGVyc2V0KHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gc2VsZi5kYXRhLmlzc3VwZXJzZXQocmVmKGl0ZW0pIGZvciBpdGVtIGluIG90aGVyKQogICAgX19nZV9fID0gaXNzdXBlcnNldAoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIHJldHVybiBzZWxmLmRhdGEgPiBzZXQocmVmKGl0ZW0pIGZvciBpdGVtIGluIG90aGVyKQoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBzZWxmLl9fY2xhc3NfXyk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJldHVybiBzZWxmLmRhdGEgPT0gc2V0KHJlZihpdGVtKSBmb3IgaXRlbSBpbiBvdGhlcikKCiAgICBkZWYgc3ltbWV0cmljX2RpZmZlcmVuY2Uoc2VsZiwgb3RoZXIpOgogICAgICAgIG5ld3NldCA9IHNlbGYuY29weSgpCiAgICAgICAgbmV3c2V0LnN5bW1ldHJpY19kaWZmZXJlbmNlX3VwZGF0ZShvdGhlcikKICAgICAgICByZXR1cm4gbmV3c2V0CiAgICBfX3hvcl9fID0gc3ltbWV0cmljX2RpZmZlcmVuY2UKCiAgICBkZWYgc3ltbWV0cmljX2RpZmZlcmVuY2VfdXBkYXRlKHNlbGYsIG90aGVyKToKICAgICAgICBzZWxmLl9faXhvcl9fKG90aGVyKQogICAgZGVmIF9faXhvcl9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBzZWxmLl9wZW5kaW5nX3JlbW92YWxzOgogICAgICAgICAgICBzZWxmLl9jb21taXRfcmVtb3ZhbHMoKQogICAgICAgIGlmIHNlbGYgaXMgb3RoZXI6CiAgICAgICAgICAgIHNlbGYuZGF0YS5jbGVhcigpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5kYXRhLnN5bW1ldHJpY19kaWZmZXJlbmNlX3VwZGF0ZShyZWYoaXRlbSwgc2VsZi5fcmVtb3ZlKSBmb3IgaXRlbSBpbiBvdGhlcikKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiB1bmlvbihzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKGUgZm9yIHMgaW4gKHNlbGYsIG90aGVyKSBmb3IgZSBpbiBzKQogICAgX19vcl9fID0gdW5pb24KCiAgICBkZWYgaXNkaXNqb2ludChzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmludGVyc2VjdGlvbihvdGhlcikpID09IDAK',
'/Lib/warnings.py':'IiIiUHl0aG9uIHBhcnQgb2YgdGhlIHdhcm5pbmdzIHN1YnN5c3RlbS4iIiIKCiMgTm90ZTogZnVuY3Rpb24gbGV2ZWwgaW1wb3J0cyBzaG91bGQgKm5vdCogYmUgdXNlZAojIGluIHRoaXMgbW9kdWxlIGFzIGl0IG1heSBjYXVzZSBpbXBvcnQgbG9jayBkZWFkbG9jay4KIyBTZWUgYnVnIDY4MzY1OC4KaW1wb3J0IGxpbmVjYWNoZQppbXBvcnQgc3lzCgpfX2FsbF9fID0gWyJ3YXJuIiwgInNob3d3YXJuaW5nIiwgImZvcm1hdHdhcm5pbmciLCAiZmlsdGVyd2FybmluZ3MiLAogICAgICAgICAgICJyZXNldHdhcm5pbmdzIiwgImNhdGNoX3dhcm5pbmdzIl0KCgpkZWYgc2hvd3dhcm5pbmcobWVzc2FnZSwgY2F0ZWdvcnksIGZpbGVuYW1lLCBsaW5lbm8sIGZpbGU9Tm9uZSwgbGluZT1Ob25lKToKICAgICIiIkhvb2sgdG8gd3JpdGUgYSB3YXJuaW5nIHRvIGEgZmlsZTsgcmVwbGFjZSBpZiB5b3UgbGlrZS4iIiIKICAgIGlmIGZpbGUgaXMgTm9uZToKICAgICAgICBmaWxlID0gc3lzLnN0ZGVycgogICAgdHJ5OgogICAgICAgIGZpbGUud3JpdGUoZm9ybWF0d2FybmluZyhtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubywgbGluZSkpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwYXNzICMgdGhlIGZpbGUgKHByb2JhYmx5IHN0ZGVycikgaXMgaW52YWxpZCAtIHRoaXMgd2FybmluZyBnZXRzIGxvc3QuCgpkZWYgZm9ybWF0d2FybmluZyhtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubywgbGluZT1Ob25lKToKICAgICIiIkZ1bmN0aW9uIHRvIGZvcm1hdCBhIHdhcm5pbmcgdGhlIHN0YW5kYXJkIHdheS4iIiIKICAgIHMgPSAgIiVzOiVzOiAlczogJXNcbiIgJSAoZmlsZW5hbWUsIGxpbmVubywgY2F0ZWdvcnkuX19uYW1lX18sIG1lc3NhZ2UpCiAgICBsaW5lID0gbGluZWNhY2hlLmdldGxpbmUoZmlsZW5hbWUsIGxpbmVubykgaWYgbGluZSBpcyBOb25lIGVsc2UgbGluZQogICAgaWYgbGluZToKICAgICAgICBsaW5lID0gbGluZS5zdHJpcCgpCiAgICAgICAgcyArPSAiICAlc1xuIiAlIGxpbmUKICAgIHJldHVybiBzCgpkZWYgZmlsdGVyd2FybmluZ3MoYWN0aW9uLCBtZXNzYWdlPSIiLCBjYXRlZ29yeT1XYXJuaW5nLCBtb2R1bGU9IiIsIGxpbmVubz0wLAogICAgICAgICAgICAgICAgICAgYXBwZW5kPUZhbHNlKToKICAgICIiIkluc2VydCBhbiBlbnRyeSBpbnRvIHRoZSBsaXN0IG9mIHdhcm5pbmdzIGZpbHRlcnMgKGF0IHRoZSBmcm9udCkuCgogICAgJ2FjdGlvbicgLS0gb25lIG9mICJlcnJvciIsICJpZ25vcmUiLCAiYWx3YXlzIiwgImRlZmF1bHQiLCAibW9kdWxlIiwKICAgICAgICAgICAgICAgIG9yICJvbmNlIgogICAgJ21lc3NhZ2UnIC0tIGEgcmVnZXggdGhhdCB0aGUgd2FybmluZyBtZXNzYWdlIG11c3QgbWF0Y2gKICAgICdjYXRlZ29yeScgLS0gYSBjbGFzcyB0aGF0IHRoZSB3YXJuaW5nIG11c3QgYmUgYSBzdWJjbGFzcyBvZgogICAgJ21vZHVsZScgLS0gYSByZWdleCB0aGF0IHRoZSBtb2R1bGUgbmFtZSBtdXN0IG1hdGNoCiAgICAnbGluZW5vJyAtLSBhbiBpbnRlZ2VyIGxpbmUgbnVtYmVyLCAwIG1hdGNoZXMgYWxsIHdhcm5pbmdzCiAgICAnYXBwZW5kJyAtLSBpZiB0cnVlLCBhcHBlbmQgdG8gdGhlIGxpc3Qgb2YgZmlsdGVycwogICAgIiIiCiAgICBpbXBvcnQgcmUKICAgIGFzc2VydCBhY3Rpb24gaW4gKCJlcnJvciIsICJpZ25vcmUiLCAiYWx3YXlzIiwgImRlZmF1bHQiLCAibW9kdWxlIiwKICAgICAgICAgICAgICAgICAgICAgICJvbmNlIiksICJpbnZhbGlkIGFjdGlvbjogJXIiICUgKGFjdGlvbiwpCiAgICBhc3NlcnQgaXNpbnN0YW5jZShtZXNzYWdlLCBzdHIpLCAibWVzc2FnZSBtdXN0IGJlIGEgc3RyaW5nIgogICAgYXNzZXJ0IGlzaW5zdGFuY2UoY2F0ZWdvcnksIHR5cGUpLCAiY2F0ZWdvcnkgbXVzdCBiZSBhIGNsYXNzIgogICAgYXNzZXJ0IGlzc3ViY2xhc3MoY2F0ZWdvcnksIFdhcm5pbmcpLCAiY2F0ZWdvcnkgbXVzdCBiZSBhIFdhcm5pbmcgc3ViY2xhc3MiCiAgICBhc3NlcnQgaXNpbnN0YW5jZShtb2R1bGUsIHN0ciksICJtb2R1bGUgbXVzdCBiZSBhIHN0cmluZyIKICAgIGFzc2VydCBpc2luc3RhbmNlKGxpbmVubywgaW50KSBhbmQgbGluZW5vID49IDAsIFwKICAgICAgICAgICAibGluZW5vIG11c3QgYmUgYW4gaW50ID49IDAiCiAgICBpdGVtID0gKGFjdGlvbiwgcmUuY29tcGlsZShtZXNzYWdlLCByZS5JKSwgY2F0ZWdvcnksCiAgICAgICAgICAgIHJlLmNvbXBpbGUobW9kdWxlKSwgbGluZW5vKQogICAgaWYgYXBwZW5kOgogICAgICAgIGZpbHRlcnMuYXBwZW5kKGl0ZW0pCiAgICBlbHNlOgogICAgICAgIGZpbHRlcnMuaW5zZXJ0KDAsIGl0ZW0pCgpkZWYgc2ltcGxlZmlsdGVyKGFjdGlvbiwgY2F0ZWdvcnk9V2FybmluZywgbGluZW5vPTAsIGFwcGVuZD1GYWxzZSk6CiAgICAiIiJJbnNlcnQgYSBzaW1wbGUgZW50cnkgaW50byB0aGUgbGlzdCBvZiB3YXJuaW5ncyBmaWx0ZXJzIChhdCB0aGUgZnJvbnQpLgoKICAgIEEgc2ltcGxlIGZpbHRlciBtYXRjaGVzIGFsbCBtb2R1bGVzIGFuZCBtZXNzYWdlcy4KICAgICdhY3Rpb24nIC0tIG9uZSBvZiAiZXJyb3IiLCAiaWdub3JlIiwgImFsd2F5cyIsICJkZWZhdWx0IiwgIm1vZHVsZSIsCiAgICAgICAgICAgICAgICBvciAib25jZSIKICAgICdjYXRlZ29yeScgLS0gYSBjbGFzcyB0aGF0IHRoZSB3YXJuaW5nIG11c3QgYmUgYSBzdWJjbGFzcyBvZgogICAgJ2xpbmVubycgLS0gYW4gaW50ZWdlciBsaW5lIG51bWJlciwgMCBtYXRjaGVzIGFsbCB3YXJuaW5ncwogICAgJ2FwcGVuZCcgLS0gaWYgdHJ1ZSwgYXBwZW5kIHRvIHRoZSBsaXN0IG9mIGZpbHRlcnMKICAgICIiIgogICAgYXNzZXJ0IGFjdGlvbiBpbiAoImVycm9yIiwgImlnbm9yZSIsICJhbHdheXMiLCAiZGVmYXVsdCIsICJtb2R1bGUiLAogICAgICAgICAgICAgICAgICAgICAgIm9uY2UiKSwgImludmFsaWQgYWN0aW9uOiAlciIgJSAoYWN0aW9uLCkKICAgIGFzc2VydCBpc2luc3RhbmNlKGxpbmVubywgaW50KSBhbmQgbGluZW5vID49IDAsIFwKICAgICAgICAgICAibGluZW5vIG11c3QgYmUgYW4gaW50ID49IDAiCiAgICBpdGVtID0gKGFjdGlvbiwgTm9uZSwgY2F0ZWdvcnksIE5vbmUsIGxpbmVubykKICAgIGlmIGFwcGVuZDoKICAgICAgICBmaWx0ZXJzLmFwcGVuZChpdGVtKQogICAgZWxzZToKICAgICAgICBmaWx0ZXJzLmluc2VydCgwLCBpdGVtKQoKZGVmIHJlc2V0d2FybmluZ3MoKToKICAgICIiIkNsZWFyIHRoZSBsaXN0IG9mIHdhcm5pbmcgZmlsdGVycywgc28gdGhhdCBubyBmaWx0ZXJzIGFyZSBhY3RpdmUuIiIiCiAgICBmaWx0ZXJzWzpdID0gW10KCmNsYXNzIF9PcHRpb25FcnJvcihFeGNlcHRpb24pOgogICAgIiIiRXhjZXB0aW9uIHVzZWQgYnkgb3B0aW9uIHByb2Nlc3NpbmcgaGVscGVycy4iIiIKICAgIHBhc3MKCiMgSGVscGVyIHRvIHByb2Nlc3MgLVcgb3B0aW9ucyBwYXNzZWQgdmlhIHN5cy53YXJub3B0aW9ucwpkZWYgX3Byb2Nlc3NvcHRpb25zKGFyZ3MpOgogICAgZm9yIGFyZyBpbiBhcmdzOgogICAgICAgIHRyeToKICAgICAgICAgICAgX3NldG9wdGlvbihhcmcpCiAgICAgICAgZXhjZXB0IF9PcHRpb25FcnJvciBhcyBtc2c6CiAgICAgICAgICAgIHByaW50KCJJbnZhbGlkIC1XIG9wdGlvbiBpZ25vcmVkOiIsIG1zZywgZmlsZT1zeXMuc3RkZXJyKQoKIyBIZWxwZXIgZm9yIF9wcm9jZXNzb3B0aW9ucygpCmRlZiBfc2V0b3B0aW9uKGFyZyk6CiAgICBpbXBvcnQgcmUKICAgIHBhcnRzID0gYXJnLnNwbGl0KCc6JykKICAgIGlmIGxlbihwYXJ0cykgPiA1OgogICAgICAgIHJhaXNlIF9PcHRpb25FcnJvcigidG9vIG1hbnkgZmllbGRzIChtYXggNSk6ICVyIiAlIChhcmcsKSkKICAgIHdoaWxlIGxlbihwYXJ0cykgPCA1OgogICAgICAgIHBhcnRzLmFwcGVuZCgnJykKICAgIGFjdGlvbiwgbWVzc2FnZSwgY2F0ZWdvcnksIG1vZHVsZSwgbGluZW5vID0gW3Muc3RyaXAoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHMgaW4gcGFydHNdCiAgICBhY3Rpb24gPSBfZ2V0YWN0aW9uKGFjdGlvbikKICAgIG1lc3NhZ2UgPSByZS5lc2NhcGUobWVzc2FnZSkKICAgIGNhdGVnb3J5ID0gX2dldGNhdGVnb3J5KGNhdGVnb3J5KQogICAgbW9kdWxlID0gcmUuZXNjYXBlKG1vZHVsZSkKICAgIGlmIG1vZHVsZToKICAgICAgICBtb2R1bGUgPSBtb2R1bGUgKyAnJCcKICAgIGlmIGxpbmVubzoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGxpbmVubyA9IGludChsaW5lbm8pCiAgICAgICAgICAgIGlmIGxpbmVubyA8IDA6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yCiAgICAgICAgZXhjZXB0IChWYWx1ZUVycm9yLCBPdmVyZmxvd0Vycm9yKToKICAgICAgICAgICAgcmFpc2UgX09wdGlvbkVycm9yKCJpbnZhbGlkIGxpbmVubyAlciIgJSAobGluZW5vLCkpCiAgICBlbHNlOgogICAgICAgIGxpbmVubyA9IDAKICAgIGZpbHRlcndhcm5pbmdzKGFjdGlvbiwgbWVzc2FnZSwgY2F0ZWdvcnksIG1vZHVsZSwgbGluZW5vKQoKIyBIZWxwZXIgZm9yIF9zZXRvcHRpb24oKQpkZWYgX2dldGFjdGlvbihhY3Rpb24pOgogICAgaWYgbm90IGFjdGlvbjoKICAgICAgICByZXR1cm4gImRlZmF1bHQiCiAgICBpZiBhY3Rpb24gPT0gImFsbCI6IHJldHVybiAiYWx3YXlzIiAjIEFsaWFzCiAgICBmb3IgYSBpbiAoJ2RlZmF1bHQnLCAnYWx3YXlzJywgJ2lnbm9yZScsICdtb2R1bGUnLCAnb25jZScsICdlcnJvcicpOgogICAgICAgIGlmIGEuc3RhcnRzd2l0aChhY3Rpb24pOgogICAgICAgICAgICByZXR1cm4gYQogICAgcmFpc2UgX09wdGlvbkVycm9yKCJpbnZhbGlkIGFjdGlvbjogJXIiICUgKGFjdGlvbiwpKQoKIyBIZWxwZXIgZm9yIF9zZXRvcHRpb24oKQpkZWYgX2dldGNhdGVnb3J5KGNhdGVnb3J5KToKICAgIGltcG9ydCByZQogICAgaWYgbm90IGNhdGVnb3J5OgogICAgICAgIHJldHVybiBXYXJuaW5nCiAgICBpZiByZS5tYXRjaCgiXlthLXpBLVowLTlfXSskIiwgY2F0ZWdvcnkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY2F0ID0gZXZhbChjYXRlZ29yeSkKICAgICAgICBleGNlcHQgTmFtZUVycm9yOgogICAgICAgICAgICByYWlzZSBfT3B0aW9uRXJyb3IoInVua25vd24gd2FybmluZyBjYXRlZ29yeTogJXIiICUgKGNhdGVnb3J5LCkpCiAgICBlbHNlOgogICAgICAgIGkgPSBjYXRlZ29yeS5yZmluZCgiLiIpCiAgICAgICAgbW9kdWxlID0gY2F0ZWdvcnlbOmldCiAgICAgICAga2xhc3MgPSBjYXRlZ29yeVtpKzE6XQogICAgICAgIHRyeToKICAgICAgICAgICAgbSA9IF9faW1wb3J0X18obW9kdWxlLCBOb25lLCBOb25lLCBba2xhc3NdKQogICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgcmFpc2UgX09wdGlvbkVycm9yKCJpbnZhbGlkIG1vZHVsZSBuYW1lOiAlciIgJSAobW9kdWxlLCkpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBjYXQgPSBnZXRhdHRyKG0sIGtsYXNzKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcmFpc2UgX09wdGlvbkVycm9yKCJ1bmtub3duIHdhcm5pbmcgY2F0ZWdvcnk6ICVyIiAlIChjYXRlZ29yeSwpKQogICAgaWYgbm90IGlzc3ViY2xhc3MoY2F0LCBXYXJuaW5nKToKICAgICAgICByYWlzZSBfT3B0aW9uRXJyb3IoImludmFsaWQgd2FybmluZyBjYXRlZ29yeTogJXIiICUgKGNhdGVnb3J5LCkpCiAgICByZXR1cm4gY2F0CgoKIyBDb2RlIHR5cGljYWxseSByZXBsYWNlZCBieSBfd2FybmluZ3MKZGVmIHdhcm4obWVzc2FnZSwgY2F0ZWdvcnk9Tm9uZSwgc3RhY2tsZXZlbD0xKToKICAgICIiIklzc3VlIGEgd2FybmluZywgb3IgbWF5YmUgaWdub3JlIGl0IG9yIHJhaXNlIGFuIGV4Y2VwdGlvbi4iIiIKICAgICMgQ2hlY2sgaWYgbWVzc2FnZSBpcyBhbHJlYWR5IGEgV2FybmluZyBvYmplY3QKICAgIGlmIGlzaW5zdGFuY2UobWVzc2FnZSwgV2FybmluZyk6CiAgICAgICAgY2F0ZWdvcnkgPSBtZXNzYWdlLl9fY2xhc3NfXwogICAgIyBDaGVjayBjYXRlZ29yeSBhcmd1bWVudAogICAgaWYgY2F0ZWdvcnkgaXMgTm9uZToKICAgICAgICBjYXRlZ29yeSA9IFVzZXJXYXJuaW5nCiAgICBhc3NlcnQgaXNzdWJjbGFzcyhjYXRlZ29yeSwgV2FybmluZykKICAgICMgR2V0IGNvbnRleHQgaW5mb3JtYXRpb24KICAgIHRyeToKICAgICAgICBjYWxsZXIgPSBzeXMuX2dldGZyYW1lKHN0YWNrbGV2ZWwpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICBnbG9iYWxzID0gc3lzLl9fZGljdF9fCiAgICAgICAgbGluZW5vID0gMQogICAgZWxzZToKICAgICAgICBnbG9iYWxzID0gY2FsbGVyLmZfZ2xvYmFscwogICAgICAgIGxpbmVubyA9IGNhbGxlci5mX2xpbmVubwogICAgaWYgJ19fbmFtZV9fJyBpbiBnbG9iYWxzOgogICAgICAgIG1vZHVsZSA9IGdsb2JhbHNbJ19fbmFtZV9fJ10KICAgIGVsc2U6CiAgICAgICAgbW9kdWxlID0gIjxzdHJpbmc+IgogICAgZmlsZW5hbWUgPSBnbG9iYWxzLmdldCgnX19maWxlX18nKQogICAgaWYgZmlsZW5hbWU6CiAgICAgICAgZm5sID0gZmlsZW5hbWUubG93ZXIoKQogICAgICAgIGlmIGZubC5lbmRzd2l0aCgoIi5weWMiLCAiLnB5byIpKToKICAgICAgICAgICAgZmlsZW5hbWUgPSBmaWxlbmFtZVs6LTFdCiAgICBlbHNlOgogICAgICAgIGlmIG1vZHVsZSA9PSAiX19tYWluX18iOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IHN5cy5hcmd2WzBdCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgICMgZW1iZWRkZWQgaW50ZXJwcmV0ZXJzIGRvbid0IGhhdmUgc3lzLmFyZ3YsIHNlZSBidWcgIzgzOTE1MQogICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAnX19tYWluX18nCiAgICAgICAgaWYgbm90IGZpbGVuYW1lOgogICAgICAgICAgICBmaWxlbmFtZSA9IG1vZHVsZQogICAgcmVnaXN0cnkgPSBnbG9iYWxzLnNldGRlZmF1bHQoIl9fd2FybmluZ3JlZ2lzdHJ5X18iLCB7fSkKICAgIHdhcm5fZXhwbGljaXQobWVzc2FnZSwgY2F0ZWdvcnksIGZpbGVuYW1lLCBsaW5lbm8sIG1vZHVsZSwgcmVnaXN0cnksCiAgICAgICAgICAgICAgICAgIGdsb2JhbHMpCgpkZWYgd2Fybl9leHBsaWNpdChtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubywKICAgICAgICAgICAgICAgICAgbW9kdWxlPU5vbmUsIHJlZ2lzdHJ5PU5vbmUsIG1vZHVsZV9nbG9iYWxzPU5vbmUpOgogICAgbGluZW5vID0gaW50KGxpbmVubykKICAgIGlmIG1vZHVsZSBpcyBOb25lOgogICAgICAgIG1vZHVsZSA9IGZpbGVuYW1lIG9yICI8dW5rbm93bj4iCiAgICAgICAgaWYgbW9kdWxlWy0zOl0ubG93ZXIoKSA9PSAiLnB5IjoKICAgICAgICAgICAgbW9kdWxlID0gbW9kdWxlWzotM10gIyBYWFggV2hhdCBhYm91dCBsZWFkaW5nIHBhdGhuYW1lPwogICAgaWYgcmVnaXN0cnkgaXMgTm9uZToKICAgICAgICByZWdpc3RyeSA9IHt9CiAgICBpZiBpc2luc3RhbmNlKG1lc3NhZ2UsIFdhcm5pbmcpOgogICAgICAgIHRleHQgPSBzdHIobWVzc2FnZSkKICAgICAgICBjYXRlZ29yeSA9IG1lc3NhZ2UuX19jbGFzc19fCiAgICBlbHNlOgogICAgICAgIHRleHQgPSBtZXNzYWdlCiAgICAgICAgbWVzc2FnZSA9IGNhdGVnb3J5KG1lc3NhZ2UpCiAgICBrZXkgPSAodGV4dCwgY2F0ZWdvcnksIGxpbmVubykKICAgICMgUXVpY2sgdGVzdCBmb3IgY29tbW9uIGNhc2UKICAgIGlmIHJlZ2lzdHJ5LmdldChrZXkpOgogICAgICAgIHJldHVybgogICAgIyBTZWFyY2ggdGhlIGZpbHRlcnMKICAgIGZvciBpdGVtIGluIGZpbHRlcnM6CiAgICAgICAgYWN0aW9uLCBtc2csIGNhdCwgbW9kLCBsbiA9IGl0ZW0KICAgICAgICBpZiAoKG1zZyBpcyBOb25lIG9yIG1zZy5tYXRjaCh0ZXh0KSkgYW5kCiAgICAgICAgICAgIGlzc3ViY2xhc3MoY2F0ZWdvcnksIGNhdCkgYW5kCiAgICAgICAgICAgIChtb2QgaXMgTm9uZSBvciBtb2QubWF0Y2gobW9kdWxlKSkgYW5kCiAgICAgICAgICAgIChsbiA9PSAwIG9yIGxpbmVubyA9PSBsbikpOgogICAgICAgICAgICBicmVhawogICAgZWxzZToKICAgICAgICBhY3Rpb24gPSBkZWZhdWx0YWN0aW9uCiAgICAjIEVhcmx5IGV4aXQgYWN0aW9ucwogICAgaWYgYWN0aW9uID09ICJpZ25vcmUiOgogICAgICAgIHJlZ2lzdHJ5W2tleV0gPSAxCiAgICAgICAgcmV0dXJuCgogICAgIyBQcmltZSB0aGUgbGluZWNhY2hlIGZvciBmb3JtYXR0aW5nLCBpbiBjYXNlIHRoZQogICAgIyAiZmlsZSIgaXMgYWN0dWFsbHkgaW4gYSB6aXBmaWxlIG9yIHNvbWV0aGluZy4KICAgIGxpbmVjYWNoZS5nZXRsaW5lcyhmaWxlbmFtZSwgbW9kdWxlX2dsb2JhbHMpCgogICAgaWYgYWN0aW9uID09ICJlcnJvciI6CiAgICAgICAgcmFpc2UgbWVzc2FnZQogICAgIyBPdGhlciBhY3Rpb25zCiAgICBpZiBhY3Rpb24gPT0gIm9uY2UiOgogICAgICAgIHJlZ2lzdHJ5W2tleV0gPSAxCiAgICAgICAgb25jZWtleSA9ICh0ZXh0LCBjYXRlZ29yeSkKICAgICAgICBpZiBvbmNlcmVnaXN0cnkuZ2V0KG9uY2VrZXkpOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBvbmNlcmVnaXN0cnlbb25jZWtleV0gPSAxCiAgICBlbGlmIGFjdGlvbiA9PSAiYWx3YXlzIjoKICAgICAgICBwYXNzCiAgICBlbGlmIGFjdGlvbiA9PSAibW9kdWxlIjoKICAgICAgICByZWdpc3RyeVtrZXldID0gMQogICAgICAgIGFsdGtleSA9ICh0ZXh0LCBjYXRlZ29yeSwgMCkKICAgICAgICBpZiByZWdpc3RyeS5nZXQoYWx0a2V5KToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcmVnaXN0cnlbYWx0a2V5XSA9IDEKICAgIGVsaWYgYWN0aW9uID09ICJkZWZhdWx0IjoKICAgICAgICByZWdpc3RyeVtrZXldID0gMQogICAgZWxzZToKICAgICAgICAjIFVucmVjb2duaXplZCBhY3Rpb25zIGFyZSBlcnJvcnMKICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoCiAgICAgICAgICAgICAgIlVucmVjb2duaXplZCBhY3Rpb24gKCVyKSBpbiB3YXJuaW5ncy5maWx0ZXJzOlxuICVzIiAlCiAgICAgICAgICAgICAgKGFjdGlvbiwgaXRlbSkpCiAgICBpZiBub3QgY2FsbGFibGUoc2hvd3dhcm5pbmcpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigid2FybmluZ3Muc2hvd3dhcm5pbmcoKSBtdXN0IGJlIHNldCB0byBhICIKICAgICAgICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIG9yIG1ldGhvZCIpCiAgICAjIFByaW50IG1lc3NhZ2UgYW5kIGNvbnRleHQKICAgIHNob3d3YXJuaW5nKG1lc3NhZ2UsIGNhdGVnb3J5LCBmaWxlbmFtZSwgbGluZW5vKQoKCmNsYXNzIFdhcm5pbmdNZXNzYWdlKG9iamVjdCk6CgogICAgIiIiSG9sZHMgdGhlIHJlc3VsdCBvZiBhIHNpbmdsZSBzaG93d2FybmluZygpIGNhbGwuIiIiCgogICAgX1dBUk5JTkdfREVUQUlMUyA9ICgibWVzc2FnZSIsICJjYXRlZ29yeSIsICJmaWxlbmFtZSIsICJsaW5lbm8iLCAiZmlsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJsaW5lIikKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbWVzc2FnZSwgY2F0ZWdvcnksIGZpbGVuYW1lLCBsaW5lbm8sIGZpbGU9Tm9uZSwKICAgICAgICAgICAgICAgICAgICBsaW5lPU5vbmUpOgogICAgICAgIGxvY2FsX3ZhbHVlcyA9IGxvY2FscygpCiAgICAgICAgZm9yIGF0dHIgaW4gc2VsZi5fV0FSTklOR19ERVRBSUxTOgogICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIGxvY2FsX3ZhbHVlc1thdHRyXSkKICAgICAgICBzZWxmLl9jYXRlZ29yeV9uYW1lID0gY2F0ZWdvcnkuX19uYW1lX18gaWYgY2F0ZWdvcnkgZWxzZSBOb25lCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuICgie21lc3NhZ2UgOiAlciwgY2F0ZWdvcnkgOiAlciwgZmlsZW5hbWUgOiAlciwgbGluZW5vIDogJXMsICIKICAgICAgICAgICAgICAgICAgICAibGluZSA6ICVyfSIgJSAoc2VsZi5tZXNzYWdlLCBzZWxmLl9jYXRlZ29yeV9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpbGVuYW1lLCBzZWxmLmxpbmVubywgc2VsZi5saW5lKSkKCgpjbGFzcyBjYXRjaF93YXJuaW5ncyhvYmplY3QpOgoKICAgICIiIkEgY29udGV4dCBtYW5hZ2VyIHRoYXQgY29waWVzIGFuZCByZXN0b3JlcyB0aGUgd2FybmluZ3MgZmlsdGVyIHVwb24KICAgIGV4aXRpbmcgdGhlIGNvbnRleHQuCgogICAgVGhlICdyZWNvcmQnIGFyZ3VtZW50IHNwZWNpZmllcyB3aGV0aGVyIHdhcm5pbmdzIHNob3VsZCBiZSBjYXB0dXJlZCBieSBhCiAgICBjdXN0b20gaW1wbGVtZW50YXRpb24gb2Ygd2FybmluZ3Muc2hvd3dhcm5pbmcoKSBhbmQgYmUgYXBwZW5kZWQgdG8gYSBsaXN0CiAgICByZXR1cm5lZCBieSB0aGUgY29udGV4dCBtYW5hZ2VyLiBPdGhlcndpc2UgTm9uZSBpcyByZXR1cm5lZCBieSB0aGUgY29udGV4dAogICAgbWFuYWdlci4gVGhlIG9iamVjdHMgYXBwZW5kZWQgdG8gdGhlIGxpc3QgYXJlIGFyZ3VtZW50cyB3aG9zZSBhdHRyaWJ1dGVzCiAgICBtaXJyb3IgdGhlIGFyZ3VtZW50cyB0byBzaG93d2FybmluZygpLgoKICAgIFRoZSAnbW9kdWxlJyBhcmd1bWVudCBpcyB0byBzcGVjaWZ5IGFuIGFsdGVybmF0aXZlIG1vZHVsZSB0byB0aGUgbW9kdWxlCiAgICBuYW1lZCAnd2FybmluZ3MnIGFuZCBpbXBvcnRlZCB1bmRlciB0aGF0IG5hbWUuIFRoaXMgYXJndW1lbnQgaXMgb25seSB1c2VmdWwKICAgIHdoZW4gdGVzdGluZyB0aGUgd2FybmluZ3MgbW9kdWxlIGl0c2VsZi4KCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgKiwgcmVjb3JkPUZhbHNlLCBtb2R1bGU9Tm9uZSk6CiAgICAgICAgIiIiU3BlY2lmeSB3aGV0aGVyIHRvIHJlY29yZCB3YXJuaW5ncyBhbmQgaWYgYW4gYWx0ZXJuYXRpdmUgbW9kdWxlCiAgICAgICAgc2hvdWxkIGJlIHVzZWQgb3RoZXIgdGhhbiBzeXMubW9kdWxlc1snd2FybmluZ3MnXS4KCiAgICAgICAgRm9yIGNvbXBhdGliaWxpdHkgd2l0aCBQeXRob24gMy4wLCBwbGVhc2UgY29uc2lkZXIgYWxsIGFyZ3VtZW50cyB0byBiZQogICAgICAgIGtleXdvcmQtb25seS4KCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fcmVjb3JkID0gcmVjb3JkCiAgICAgICAgc2VsZi5fbW9kdWxlID0gc3lzLm1vZHVsZXNbJ3dhcm5pbmdzJ10gaWYgbW9kdWxlIGlzIE5vbmUgZWxzZSBtb2R1bGUKICAgICAgICBzZWxmLl9lbnRlcmVkID0gRmFsc2UKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgYXJncyA9IFtdCiAgICAgICAgaWYgc2VsZi5fcmVjb3JkOgogICAgICAgICAgICBhcmdzLmFwcGVuZCgicmVjb3JkPVRydWUiKQogICAgICAgIGlmIHNlbGYuX21vZHVsZSBpcyBub3Qgc3lzLm1vZHVsZXNbJ3dhcm5pbmdzJ106CiAgICAgICAgICAgIGFyZ3MuYXBwZW5kKCJtb2R1bGU9JXIiICUgc2VsZi5fbW9kdWxlKQogICAgICAgIG5hbWUgPSB0eXBlKHNlbGYpLl9fbmFtZV9fCiAgICAgICAgcmV0dXJuICIlcyglcykiICUgKG5hbWUsICIsICIuam9pbihhcmdzKSkKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX2VudGVyZWQ6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IGVudGVyICVyIHR3aWNlIiAlIHNlbGYpCiAgICAgICAgc2VsZi5fZW50ZXJlZCA9IFRydWUKICAgICAgICBzZWxmLl9maWx0ZXJzID0gc2VsZi5fbW9kdWxlLmZpbHRlcnMKICAgICAgICBzZWxmLl9tb2R1bGUuZmlsdGVycyA9IHNlbGYuX2ZpbHRlcnNbOl0KICAgICAgICBzZWxmLl9zaG93d2FybmluZyA9IHNlbGYuX21vZHVsZS5zaG93d2FybmluZwogICAgICAgIGlmIHNlbGYuX3JlY29yZDoKICAgICAgICAgICAgbG9nID0gW10KICAgICAgICAgICAgZGVmIHNob3d3YXJuaW5nKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgICAgICAgICBsb2cuYXBwZW5kKFdhcm5pbmdNZXNzYWdlKCphcmdzLCAqKmt3YXJncykpCiAgICAgICAgICAgIHNlbGYuX21vZHVsZS5zaG93d2FybmluZyA9IHNob3d3YXJuaW5nCiAgICAgICAgICAgIHJldHVybiBsb2cKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqZXhjX2luZm8pOgogICAgICAgIGlmIG5vdCBzZWxmLl9lbnRlcmVkOgogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBleGl0ICVyIHdpdGhvdXQgZW50ZXJpbmcgZmlyc3QiICUgc2VsZikKICAgICAgICBzZWxmLl9tb2R1bGUuZmlsdGVycyA9IHNlbGYuX2ZpbHRlcnMKICAgICAgICBzZWxmLl9tb2R1bGUuc2hvd3dhcm5pbmcgPSBzZWxmLl9zaG93d2FybmluZwoKCiMgZmlsdGVycyBjb250YWlucyBhIHNlcXVlbmNlIG9mIGZpbHRlciA1LXR1cGxlcwojIFRoZSBjb21wb25lbnRzIG9mIHRoZSA1LXR1cGxlIGFyZToKIyAtIGFuIGFjdGlvbjogZXJyb3IsIGlnbm9yZSwgYWx3YXlzLCBkZWZhdWx0LCBtb2R1bGUsIG9yIG9uY2UKIyAtIGEgY29tcGlsZWQgcmVnZXggdGhhdCBtdXN0IG1hdGNoIHRoZSB3YXJuaW5nIG1lc3NhZ2UKIyAtIGEgY2xhc3MgcmVwcmVzZW50aW5nIHRoZSB3YXJuaW5nIGNhdGVnb3J5CiMgLSBhIGNvbXBpbGVkIHJlZ2V4IHRoYXQgbXVzdCBtYXRjaCB0aGUgbW9kdWxlIHRoYXQgaXMgYmVpbmcgd2FybmVkCiMgLSBhIGxpbmUgbnVtYmVyIGZvciB0aGUgbGluZSBiZWluZyB3YXJuaW5nLCBvciAwIHRvIG1lYW4gYW55IGxpbmUKIyBJZiBlaXRoZXIgaWYgdGhlIGNvbXBpbGVkIHJlZ2V4cyBhcmUgTm9uZSwgbWF0Y2ggYW55dGhpbmcuCl93YXJuaW5nc19kZWZhdWx0cyA9IEZhbHNlCnRyeToKICAgIGZyb20gX3dhcm5pbmdzIGltcG9ydCAoZmlsdGVycywgX2RlZmF1bHRhY3Rpb24sIF9vbmNlcmVnaXN0cnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuLCB3YXJuX2V4cGxpY2l0KQogICAgZGVmYXVsdGFjdGlvbiA9IF9kZWZhdWx0YWN0aW9uCiAgICBvbmNlcmVnaXN0cnkgPSBfb25jZXJlZ2lzdHJ5CiAgICBfd2FybmluZ3NfZGVmYXVsdHMgPSBUcnVlCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGZpbHRlcnMgPSBbXQogICAgZGVmYXVsdGFjdGlvbiA9ICJkZWZhdWx0IgogICAgb25jZXJlZ2lzdHJ5ID0ge30KCgojIE1vZHVsZSBpbml0aWFsaXphdGlvbgpfcHJvY2Vzc29wdGlvbnMoc3lzLndhcm5vcHRpb25zKQppZiBub3QgX3dhcm5pbmdzX2RlZmF1bHRzOgogICAgc2lsZW5jZSA9IFtJbXBvcnRXYXJuaW5nLCBQZW5kaW5nRGVwcmVjYXRpb25XYXJuaW5nXQogICAgc2lsZW5jZS5hcHBlbmQoRGVwcmVjYXRpb25XYXJuaW5nKQogICAgZm9yIGNscyBpbiBzaWxlbmNlOgogICAgICAgIHNpbXBsZWZpbHRlcigiaWdub3JlIiwgY2F0ZWdvcnk9Y2xzKQogICAgYnl0ZXNfd2FybmluZyA9IHN5cy5mbGFncy5ieXRlc193YXJuaW5nCiAgICBpZiBieXRlc193YXJuaW5nID4gMToKICAgICAgICBieXRlc19hY3Rpb24gPSAiZXJyb3IiCiAgICBlbGlmIGJ5dGVzX3dhcm5pbmc6CiAgICAgICAgYnl0ZXNfYWN0aW9uID0gImRlZmF1bHQiCiAgICBlbHNlOgogICAgICAgIGJ5dGVzX2FjdGlvbiA9ICJpZ25vcmUiCiAgICBzaW1wbGVmaWx0ZXIoYnl0ZXNfYWN0aW9uLCBjYXRlZ29yeT1CeXRlc1dhcm5pbmcsIGFwcGVuZD0xKQogICAgIyByZXNvdXJjZSB1c2FnZSB3YXJuaW5ncyBhcmUgZW5hYmxlZCBieSBkZWZhdWx0IGluIHB5ZGVidWcgbW9kZQogICAgaWYgaGFzYXR0cihzeXMsICdnZXR0b3RhbHJlZmNvdW50Jyk6CiAgICAgICAgcmVzb3VyY2VfYWN0aW9uID0gImFsd2F5cyIKICAgIGVsc2U6CiAgICAgICAgcmVzb3VyY2VfYWN0aW9uID0gImlnbm9yZSIKICAgIHNpbXBsZWZpbHRlcihyZXNvdXJjZV9hY3Rpb24sIGNhdGVnb3J5PVJlc291cmNlV2FybmluZywgYXBwZW5kPTEpCgpkZWwgX3dhcm5pbmdzX2RlZmF1bHRzCg==',
'/Lib/_struct.py':'IwojIFRoaXMgbW9kdWxlIGlzIGEgcHVyZSBQeXRob24gdmVyc2lvbiBvZiBweXB5Lm1vZHVsZS5zdHJ1Y3QuCiMgSXQgaXMgb25seSBpbXBvcnRlZCBpZiB0aGUgdmFzdGx5IGZhc3RlciBweXB5Lm1vZHVsZS5zdHJ1Y3QgaXMgbm90CiMgY29tcGlsZWQgaW4uICBGb3Igbm93IHdlIGtlZXAgdGhpcyB2ZXJzaW9uIGZvciByZWZlcmVuY2UgYW5kCiMgYmVjYXVzZSBweXB5Lm1vZHVsZS5zdHJ1Y3QgaXMgbm90IG9vdHlwZS1iYWNrZW5kLWZyaWVuZGx5IHlldC4KIwoKIyB0aGlzIG1vZHVsZSAnYm9ycm93ZWQnIGZyb20gCiMgaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvMTg2MjY0NTlhOWIyL2xpYl9weXB5L19zdHJ1Y3QucHk/YXQ9cHkzay1saXN0dmlld19zdHIKCiIiIkZ1bmN0aW9ucyB0byBjb252ZXJ0IGJldHdlZW4gUHl0aG9uIHZhbHVlcyBhbmQgQyBzdHJ1Y3RzLgpQeXRob24gc3RyaW5ncyBhcmUgdXNlZCB0byBob2xkIHRoZSBkYXRhIHJlcHJlc2VudGluZyB0aGUgQyBzdHJ1Y3QKYW5kIGFsc28gYXMgZm9ybWF0IHN0cmluZ3MgdG8gZGVzY3JpYmUgdGhlIGxheW91dCBvZiBkYXRhIGluIHRoZSBDIHN0cnVjdC4KClRoZSBvcHRpb25hbCBmaXJzdCBmb3JtYXQgY2hhciBpbmRpY2F0ZXMgYnl0ZSBvcmRlciwgc2l6ZSBhbmQgYWxpZ25tZW50OgogQDogbmF0aXZlIG9yZGVyLCBzaXplICYgYWxpZ25tZW50IChkZWZhdWx0KQogPTogbmF0aXZlIG9yZGVyLCBzdGQuIHNpemUgJiBhbGlnbm1lbnQKIDw6IGxpdHRsZS1lbmRpYW4sIHN0ZC4gc2l6ZSAmIGFsaWdubWVudAogPjogYmlnLWVuZGlhbiwgc3RkLiBzaXplICYgYWxpZ25tZW50CiAhOiBzYW1lIGFzID4KClRoZSByZW1haW5pbmcgY2hhcnMgaW5kaWNhdGUgdHlwZXMgb2YgYXJncyBhbmQgbXVzdCBtYXRjaCBleGFjdGx5Owp0aGVzZSBjYW4gYmUgcHJlY2VkZWQgYnkgYSBkZWNpbWFsIHJlcGVhdCBjb3VudDoKICAgeDogcGFkIGJ5dGUgKG5vIGRhdGEpOwogICBjOmNoYXI7CiAgIGI6c2lnbmVkIGJ5dGU7CiAgIEI6dW5zaWduZWQgYnl0ZTsKICAgaDpzaG9ydDsKICAgSDp1bnNpZ25lZCBzaG9ydDsKICAgaTppbnQ7CiAgIEk6dW5zaWduZWQgaW50OwogICBsOmxvbmc7CiAgIEw6dW5zaWduZWQgbG9uZzsKICAgZjpmbG9hdDsKICAgZDpkb3VibGUuClNwZWNpYWwgY2FzZXMgKHByZWNlZGluZyBkZWNpbWFsIGNvdW50IGluZGljYXRlcyBsZW5ndGgpOgogICBzOnN0cmluZyAoYXJyYXkgb2YgY2hhcik7IHA6IHBhc2NhbCBzdHJpbmcgKHdpdGggY291bnQgYnl0ZSkuClNwZWNpYWwgY2FzZSAob25seSBhdmFpbGFibGUgaW4gbmF0aXZlIGZvcm1hdCk6CiAgIFA6YW4gaW50ZWdlciB0eXBlIHRoYXQgaXMgd2lkZSBlbm91Z2ggdG8gaG9sZCBhIHBvaW50ZXIuClNwZWNpYWwgY2FzZSAobm90IGluIG5hdGl2ZSBtb2RlIHVubGVzcyAnbG9uZyBsb25nJyBpbiBwbGF0Zm9ybSBDKToKICAgcTpsb25nIGxvbmc7CiAgIFE6dW5zaWduZWQgbG9uZyBsb25nCldoaXRlc3BhY2UgYmV0d2VlbiBmb3JtYXRzIGlzIGlnbm9yZWQuCgpUaGUgdmFyaWFibGUgc3RydWN0LmVycm9yIGlzIGFuIGV4Y2VwdGlvbiByYWlzZWQgb24gZXJyb3JzLiIiIgoKaW1wb3J0IG1hdGgsIHN5cwoKIyBUT0RPOiBYWFggRmluZCBhIHdheSB0byBnZXQgaW5mb3JtYXRpb24gb24gbmF0aXZlIHNpemVzIGFuZCBhbGlnbm1lbnRzCmNsYXNzIFN0cnVjdEVycm9yKEV4Y2VwdGlvbik6CiAgICBwYXNzCmVycm9yID0gU3RydWN0RXJyb3IKZGVmIHVucGFja19pbnQoZGF0YSxpbmRleCxzaXplLGxlKToKICAgIGJ5dGVzID0gW2IgZm9yIGIgaW4gZGF0YVtpbmRleDppbmRleCtzaXplXV0KICAgIGlmIGxlID09ICdsaXR0bGUnOgogICAgICAgIGJ5dGVzLnJldmVyc2UoKQogICAgbnVtYmVyID0gMAogICAgZm9yIGIgaW4gYnl0ZXM6CiAgICAgICAgbnVtYmVyID0gbnVtYmVyIDw8IDggfCBiCiAgICByZXR1cm4gaW50KG51bWJlcikKCmRlZiB1bnBhY2tfc2lnbmVkX2ludChkYXRhLGluZGV4LHNpemUsbGUpOgogICAgbnVtYmVyID0gdW5wYWNrX2ludChkYXRhLGluZGV4LHNpemUsbGUpCiAgICBtYXggPSAyKiooc2l6ZSo4KQogICAgaWYgbnVtYmVyID4gMioqKHNpemUqOCAtIDEpIC0gMToKICAgICAgICBudW1iZXIgPSBpbnQoLTEqKG1heCAtIG51bWJlcikpCiAgICByZXR1cm4gbnVtYmVyCgpJTkZJTklUWSA9IDFlMjAwICogMWUyMDAKTkFOID0gSU5GSU5JVFkgLyBJTkZJTklUWQoKZGVmIHVucGFja19jaGFyKGRhdGEsaW5kZXgsc2l6ZSxsZSk6CiAgICByZXR1cm4gZGF0YVtpbmRleDppbmRleCtzaXplXQoKZGVmIHBhY2tfaW50KG51bWJlcixzaXplLGxlKToKICAgIHg9bnVtYmVyCiAgICByZXM9W10KICAgIGZvciBpIGluIHJhbmdlKHNpemUpOgogICAgICAgIHJlcy5hcHBlbmQoeCYweGZmKQogICAgICAgIHggPj49IDgKICAgIGlmIGxlID09ICdiaWcnOgogICAgICAgIHJlcy5yZXZlcnNlKCkKICAgIHJldHVybiBieXRlcyhyZXMpCgpkZWYgcGFja19zaWduZWRfaW50KG51bWJlcixzaXplLGxlKToKICAgIGlmIG5vdCBpc2luc3RhbmNlKG51bWJlciwgaW50KToKICAgICAgICByYWlzZSBTdHJ1Y3RFcnJvcigiYXJndW1lbnQgZm9yIGksSSxsLEwscSxRLGgsSCBtdXN0IGJlIGludGVnZXIiKQogICAgaWYgIG51bWJlciA+IDIqKig4KnNpemUtMSktMSBvciBudW1iZXIgPCAtMSoyKiooOCpzaXplLTEpOgogICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoIk51bWJlcjolaSB0b28gbGFyZ2UgdG8gY29udmVydCIgJSBudW1iZXIpCiAgICByZXR1cm4gcGFja19pbnQobnVtYmVyLHNpemUsbGUpCgpkZWYgcGFja191bnNpZ25lZF9pbnQobnVtYmVyLHNpemUsbGUpOgogICAgaWYgbm90IGlzaW5zdGFuY2UobnVtYmVyLCBpbnQpOgogICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCJhcmd1bWVudCBmb3IgaSxJLGwsTCxxLFEsaCxIIG11c3QgYmUgaW50ZWdlciIpCiAgICBpZiBudW1iZXIgPCAwOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY2FuJ3QgY29udmVydCBuZWdhdGl2ZSBsb25nIHRvIHVuc2lnbmVkIikKICAgIGlmIG51bWJlciA+IDIqKig4KnNpemUpLTE6CiAgICAgICAgcmFpc2UgT3ZlcmZsb3dFcnJvcigiTnVtYmVyOiVpIHRvbyBsYXJnZSB0byBjb252ZXJ0IiAlIG51bWJlcikKICAgIHJldHVybiBwYWNrX2ludChudW1iZXIsc2l6ZSxsZSkKCmRlZiBwYWNrX2NoYXIoY2hhcixzaXplLGxlKToKICAgIHJldHVybiBieXRlcyhjaGFyKQoKZGVmIGlzaW5mKHgpOgogICAgcmV0dXJuIHggIT0gMC4wIGFuZCB4IC8gMiA9PSB4CmRlZiBpc25hbih2KToKICAgIHJldHVybiB2ICE9IHYqMS4wIG9yICh2ID09IDEuMCBhbmQgdiA9PSAyLjApCgpkZWYgcGFja19mbG9hdCh4LCBzaXplLCBsZSk6CiAgICB1bnNpZ25lZCA9IGZsb2F0X3BhY2soeCwgc2l6ZSkKICAgIHJlc3VsdCA9IFtdCiAgICBmb3IgaSBpbiByYW5nZSg4KToKICAgICAgICByZXN1bHQuYXBwZW5kKCh1bnNpZ25lZCA+PiAoaSAqIDgpKSAmIDB4RkYpCiAgICBpZiBsZSA9PSAiYmlnIjoKICAgICAgICByZXN1bHQucmV2ZXJzZSgpCiAgICByZXR1cm4gYnl0ZXMocmVzdWx0KQoKZGVmIHVucGFja19mbG9hdChkYXRhLCBpbmRleCwgc2l6ZSwgbGUpOgogICAgYmluYXJ5ID0gW2RhdGFbaV0gZm9yIGkgaW4gcmFuZ2UoaW5kZXgsIGluZGV4ICsgOCldCiAgICBpZiBsZSA9PSAiYmlnIjoKICAgICAgICBiaW5hcnkucmV2ZXJzZSgpCiAgICB1bnNpZ25lZCA9IDAKICAgIGZvciBpIGluIHJhbmdlKDgpOgogICAgICAgIHVuc2lnbmVkIHw9IGJpbmFyeVtpXSA8PCAoaSAqIDgpCiAgICByZXR1cm4gZmxvYXRfdW5wYWNrKHVuc2lnbmVkLCBzaXplLCBsZSkKCmRlZiByb3VuZF90b19uZWFyZXN0KHgpOgogICAgIiIiUHl0aG9uIDMgc3R5bGUgcm91bmQ6ICByb3VuZCBhIGZsb2F0IHggdG8gdGhlIG5lYXJlc3QgaW50LCBidXQKICAgIHVubGlrZSB0aGUgYnVpbHRpbiBQeXRob24gMi54IHJvdW5kIGZ1bmN0aW9uOgoKICAgICAgLSByZXR1cm4gYW4gaW50LCBub3QgYSBmbG9hdAogICAgICAtIGRvIHJvdW5kLWhhbGYtdG8tZXZlbiwgbm90IHJvdW5kLWhhbGYtYXdheS1mcm9tLXplcm8uCgogICAgV2UgYXNzdW1lIHRoYXQgeCBpcyBmaW5pdGUgYW5kIG5vbm5lZ2F0aXZlOyBleGNlcHQgd3JvbmcgcmVzdWx0cwogICAgaWYgeW91IHVzZSB0aGlzIGZvciBuZWdhdGl2ZSB4LgoKICAgICIiIgogICAgaW50X3BhcnQgPSBpbnQoeCkKICAgIGZyYWNfcGFydCA9IHggLSBpbnRfcGFydAogICAgaWYgZnJhY19wYXJ0ID4gMC41IG9yIGZyYWNfcGFydCA9PSAwLjUgYW5kIGludF9wYXJ0ICYgMSA9PSAxOgogICAgICAgIGludF9wYXJ0ICs9IDEKICAgIHJldHVybiBpbnRfcGFydAoKZGVmIGZsb2F0X3VucGFjayhRLCBzaXplLCBsZSk6CiAgICAiIiJDb252ZXJ0IGEgMzItYml0IG9yIDY0LWJpdCBpbnRlZ2VyIGNyZWF0ZWQKICAgIGJ5IGZsb2F0X3BhY2sgaW50byBhIFB5dGhvbiBmbG9hdC4iIiIKCiAgICBpZiBzaXplID09IDg6CiAgICAgICAgTUlOX0VYUCA9IC0xMDIxICAjID0gc3lzLmZsb2F0X2luZm8ubWluX2V4cAogICAgICAgIE1BWF9FWFAgPSAxMDI0ICAgIyA9IHN5cy5mbG9hdF9pbmZvLm1heF9leHAKICAgICAgICBNQU5UX0RJRyA9IDUzICAgICMgPSBzeXMuZmxvYXRfaW5mby5tYW50X2RpZwogICAgICAgIEJJVFMgPSA2NAogICAgZWxpZiBzaXplID09IDQ6CiAgICAgICAgTUlOX0VYUCA9IC0xMjUgICAjIEMncyBGTFRfTUlOX0VYUAogICAgICAgIE1BWF9FWFAgPSAxMjggICAgIyBGTFRfTUFYX0VYUAogICAgICAgIE1BTlRfRElHID0gMjQgICAgIyBGTFRfTUFOVF9ESUcKICAgICAgICBCSVRTID0gMzIKICAgIGVsc2U6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCBzaXplIHZhbHVlIikKCiAgICBpZiBRID4+IEJJVFM6CiAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImlucHV0IG91dCBvZiByYW5nZSIpCgogICAgIyBleHRyYWN0IHBpZWNlcwogICAgc2lnbiA9IFEgPj4gQklUUyAtIDEKICAgIGV4cCA9IChRICYgKCgxIDw8IEJJVFMgLSAxKSAtICgxIDw8IE1BTlRfRElHIC0gMSkpKSA+PiBNQU5UX0RJRyAtIDEKICAgIG1hbnQgPSBRICYgKCgxIDw8IE1BTlRfRElHIC0gMSkgLSAxKQoKICAgIGlmIGV4cCA9PSBNQVhfRVhQIC0gTUlOX0VYUCArIDI6CiAgICAgICAgIyBuYW4gb3IgaW5maW5pdHkKICAgICAgICByZXN1bHQgPSBmbG9hdCgnbmFuJykgaWYgbWFudCBlbHNlIGZsb2F0KCdpbmYnKQogICAgZWxpZiBleHAgPT0gMDoKICAgICAgICAjIHN1Ym5vcm1hbCBvciB6ZXJvCiAgICAgICAgcmVzdWx0ID0gbWF0aC5sZGV4cChmbG9hdChtYW50KSwgTUlOX0VYUCAtIE1BTlRfRElHKQogICAgZWxzZToKICAgICAgICAjIG5vcm1hbAogICAgICAgIG1hbnQgKz0gMSA8PCBNQU5UX0RJRyAtIDEKICAgICAgICByZXN1bHQgPSBtYXRoLmxkZXhwKGZsb2F0KG1hbnQpLCBleHAgKyBNSU5fRVhQIC0gTUFOVF9ESUcgLSAxKQogICAgcmV0dXJuIC1yZXN1bHQgaWYgc2lnbiBlbHNlIHJlc3VsdAoKCmRlZiBmbG9hdF9wYWNrKHgsIHNpemUpOgogICAgIiIiQ29udmVydCBhIFB5dGhvbiBmbG9hdCB4IGludG8gYSA2NC1iaXQgdW5zaWduZWQgaW50ZWdlcgogICAgd2l0aCB0aGUgc2FtZSBieXRlIHJlcHJlc2VudGF0aW9uLiIiIgoKICAgIGlmIHNpemUgPT0gODoKICAgICAgICBNSU5fRVhQID0gLTEwMjEgICMgPSBzeXMuZmxvYXRfaW5mby5taW5fZXhwCiAgICAgICAgTUFYX0VYUCA9IDEwMjQgICAjID0gc3lzLmZsb2F0X2luZm8ubWF4X2V4cAogICAgICAgIE1BTlRfRElHID0gNTMgICAgIyA9IHN5cy5mbG9hdF9pbmZvLm1hbnRfZGlnCiAgICAgICAgQklUUyA9IDY0CiAgICBlbGlmIHNpemUgPT0gNDoKICAgICAgICBNSU5fRVhQID0gLTEyNSAgICMgQydzIEZMVF9NSU5fRVhQCiAgICAgICAgTUFYX0VYUCA9IDEyOCAgICAjIEZMVF9NQVhfRVhQCiAgICAgICAgTUFOVF9ESUcgPSAyNCAgICAjIEZMVF9NQU5UX0RJRwogICAgICAgIEJJVFMgPSAzMgogICAgZWxzZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHNpemUgdmFsdWUiKQoKICAgIHNpZ24gPSBtYXRoLmNvcHlzaWduKDEuMCwgeCkgPCAwLjAKICAgIGlmIG1hdGguaXNpbmYoeCk6CiAgICAgICAgbWFudCA9IDAKICAgICAgICBleHAgPSBNQVhfRVhQIC0gTUlOX0VYUCArIDIKICAgIGVsaWYgbWF0aC5pc25hbih4KToKICAgICAgICBtYW50ID0gMSA8PCAoTUFOVF9ESUctMikgIyBvdGhlciB2YWx1ZXMgcG9zc2libGUKICAgICAgICBleHAgPSBNQVhfRVhQIC0gTUlOX0VYUCArIDIKICAgIGVsaWYgeCA9PSAwLjA6CiAgICAgICAgbWFudCA9IDAKICAgICAgICBleHAgPSAwCiAgICBlbHNlOgogICAgICAgIG0sIGUgPSBtYXRoLmZyZXhwKGFicyh4KSkgICMgYWJzKHgpID09IG0gKiAyKiplCiAgICAgICAgZXhwID0gZSAtIChNSU5fRVhQIC0gMSkKICAgICAgICBpZiBleHAgPiAwOgogICAgICAgICAgICAjIE5vcm1hbCBjYXNlLgogICAgICAgICAgICBtYW50ID0gcm91bmRfdG9fbmVhcmVzdChtICogKDEgPDwgTUFOVF9ESUcpKQogICAgICAgICAgICBtYW50IC09IDEgPDwgTUFOVF9ESUcgLSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBTdWJub3JtYWwgY2FzZS4KICAgICAgICAgICAgaWYgZXhwICsgTUFOVF9ESUcgLSAxID49IDA6CiAgICAgICAgICAgICAgICBtYW50ID0gcm91bmRfdG9fbmVhcmVzdChtICogKDEgPDwgZXhwICsgTUFOVF9ESUcgLSAxKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG1hbnQgPSAwCiAgICAgICAgICAgIGV4cCA9IDAKCiAgICAgICAgIyBTcGVjaWFsIGNhc2U6IHJvdW5kaW5nIHByb2R1Y2VkIGEgTUFOVF9ESUctYml0IG1hbnRpc3NhLgogICAgICAgIGFzc2VydCAwIDw9IG1hbnQgPD0gMSA8PCBNQU5UX0RJRyAtIDEKICAgICAgICBpZiBtYW50ID09IDEgPDwgTUFOVF9ESUcgLSAxOgogICAgICAgICAgICBtYW50ID0gMAogICAgICAgICAgICBleHAgKz0gMQoKICAgICAgICAjIFJhaXNlIG9uIG92ZXJmbG93IChpbiBzb21lIGNpcmN1bXN0YW5jZXMsIG1heSB3YW50IHRvIHJldHVybgogICAgICAgICMgaW5maW5pdHkgaW5zdGVhZCkuCiAgICAgICAgaWYgZXhwID49IE1BWF9FWFAgLSBNSU5fRVhQICsgMjoKICAgICAgICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoImZsb2F0IHRvbyBsYXJnZSB0byBwYWNrIGluIHRoaXMgZm9ybWF0IikKCiAgICAjIGNoZWNrIGNvbnN0cmFpbnRzCiAgICBhc3NlcnQgMCA8PSBtYW50IDwgMSA8PCBNQU5UX0RJRyAtIDEKICAgIGFzc2VydCAwIDw9IGV4cCA8PSBNQVhfRVhQIC0gTUlOX0VYUCArIDIKICAgIGFzc2VydCAwIDw9IHNpZ24gPD0gMQogICAgcmV0dXJuICgoc2lnbiA8PCBCSVRTIC0gMSkgfCAoZXhwIDw8IE1BTlRfRElHIC0gMSkpIHwgbWFudAoKCmJpZ19lbmRpYW5fZm9ybWF0ID0gewogICAgJ3gnOnsgJ3NpemUnIDogMSwgJ2FsaWdubWVudCcgOiAwLCAncGFjaycgOiBOb25lLCAndW5wYWNrJyA6IE5vbmV9LAogICAgJ2InOnsgJ3NpemUnIDogMSwgJ2FsaWdubWVudCcgOiAwLCAncGFjaycgOiBwYWNrX3NpZ25lZF9pbnQsICd1bnBhY2snIDogdW5wYWNrX3NpZ25lZF9pbnR9LAogICAgJ0InOnsgJ3NpemUnIDogMSwgJ2FsaWdubWVudCcgOiAwLCAncGFjaycgOiBwYWNrX3Vuc2lnbmVkX2ludCwgJ3VucGFjaycgOiB1bnBhY2tfaW50fSwKICAgICdjJzp7ICdzaXplJyA6IDEsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja19jaGFyLCAndW5wYWNrJyA6IHVucGFja19jaGFyfSwKICAgICdzJzp7ICdzaXplJyA6IDEsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogTm9uZSwgJ3VucGFjaycgOiBOb25lfSwKICAgICdwJzp7ICdzaXplJyA6IDEsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogTm9uZSwgJ3VucGFjaycgOiBOb25lfSwKICAgICdoJzp7ICdzaXplJyA6IDIsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja19zaWduZWRfaW50LCAndW5wYWNrJyA6IHVucGFja19zaWduZWRfaW50fSwKICAgICdIJzp7ICdzaXplJyA6IDIsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja191bnNpZ25lZF9pbnQsICd1bnBhY2snIDogdW5wYWNrX2ludH0sCiAgICAnaSc6eyAnc2l6ZScgOiA0LCAnYWxpZ25tZW50JyA6IDAsICdwYWNrJyA6IHBhY2tfc2lnbmVkX2ludCwgJ3VucGFjaycgOiB1bnBhY2tfc2lnbmVkX2ludH0sCiAgICAnSSc6eyAnc2l6ZScgOiA0LCAnYWxpZ25tZW50JyA6IDAsICdwYWNrJyA6IHBhY2tfdW5zaWduZWRfaW50LCAndW5wYWNrJyA6IHVucGFja19pbnR9LAogICAgJ2wnOnsgJ3NpemUnIDogNCwgJ2FsaWdubWVudCcgOiAwLCAncGFjaycgOiBwYWNrX3NpZ25lZF9pbnQsICd1bnBhY2snIDogdW5wYWNrX3NpZ25lZF9pbnR9LAogICAgJ0wnOnsgJ3NpemUnIDogNCwgJ2FsaWdubWVudCcgOiAwLCAncGFjaycgOiBwYWNrX3Vuc2lnbmVkX2ludCwgJ3VucGFjaycgOiB1bnBhY2tfaW50fSwKICAgICdxJzp7ICdzaXplJyA6IDgsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja19zaWduZWRfaW50LCAndW5wYWNrJyA6IHVucGFja19zaWduZWRfaW50fSwKICAgICdRJzp7ICdzaXplJyA6IDgsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja191bnNpZ25lZF9pbnQsICd1bnBhY2snIDogdW5wYWNrX2ludH0sCiAgICAnZic6eyAnc2l6ZScgOiA0LCAnYWxpZ25tZW50JyA6IDAsICdwYWNrJyA6IHBhY2tfZmxvYXQsICd1bnBhY2snIDogdW5wYWNrX2Zsb2F0fSwKICAgICdkJzp7ICdzaXplJyA6IDgsICdhbGlnbm1lbnQnIDogMCwgJ3BhY2snIDogcGFja19mbG9hdCwgJ3VucGFjaycgOiB1bnBhY2tfZmxvYXR9LAogICAgfQpkZWZhdWx0ID0gYmlnX2VuZGlhbl9mb3JtYXQKZm9ybWF0bW9kZT17ICc8JyA6IChkZWZhdWx0LCAnbGl0dGxlJyksCiAgICAgICAgICAgICAnPicgOiAoZGVmYXVsdCwgJ2JpZycpLAogICAgICAgICAgICAgJyEnIDogKGRlZmF1bHQsICdiaWcnKSwKICAgICAgICAgICAgICc9JyA6IChkZWZhdWx0LCBzeXMuYnl0ZW9yZGVyKSwKICAgICAgICAgICAgICdAJyA6IChkZWZhdWx0LCBzeXMuYnl0ZW9yZGVyKQogICAgICAgICAgICB9CgpkZWYgZ2V0bW9kZShmbXQpOgogICAgdHJ5OgogICAgICAgIGZvcm1hdGRlZixlbmRpYW5uZXNzID0gZm9ybWF0bW9kZVtmbXRbMF1dCiAgICAgICAgaW5kZXggPSAxCiAgICBleGNlcHQgKEluZGV4RXJyb3IsIEtleUVycm9yKToKICAgICAgICBmb3JtYXRkZWYsZW5kaWFubmVzcyA9IGZvcm1hdG1vZGVbJ0AnXQogICAgICAgIGluZGV4ID0gMAogICAgcmV0dXJuIGZvcm1hdGRlZixlbmRpYW5uZXNzLGluZGV4CmRlZiBnZXROdW0oZm10LGkpOgogICAgbnVtPU5vbmUKICAgIGN1ciA9IGZtdFtpXQogICAgd2hpbGUgKCcwJzw9IGN1ciApIGFuZCAoIGN1ciA8PSAnOScpOgogICAgICAgIGlmIG51bSA9PSBOb25lOgogICAgICAgICAgICBudW0gPSBpbnQoY3VyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG51bSA9IDEwKm51bSArIGludChjdXIpCiAgICAgICAgaSArPSAxCiAgICAgICAgY3VyID0gZm10W2ldCiAgICByZXR1cm4gbnVtLGkKCmRlZiBjYWxjc2l6ZShmbXQpOgogICAgIiIiY2FsY3NpemUoZm10KSAtPiBpbnQKICAgIFJldHVybiBzaXplIG9mIEMgc3RydWN0IGRlc2NyaWJlZCBieSBmb3JtYXQgc3RyaW5nIGZtdC4KICAgIFNlZSBzdHJ1Y3QuX19kb2NfXyBmb3IgbW9yZSBvbiBmb3JtYXQgc3RyaW5ncy4iIiIKCiAgICBmb3JtYXRkZWYsZW5kaWFubmVzcyxpID0gZ2V0bW9kZShmbXQpCiAgICBudW0gPSAwCiAgICByZXN1bHQgPSAwCiAgICB3aGlsZSBpPGxlbihmbXQpOgogICAgICAgIG51bSxpID0gZ2V0TnVtKGZtdCxpKQogICAgICAgIGN1ciA9IGZtdFtpXQogICAgICAgIHRyeToKICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0ZGVmW2N1cl0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCIlcyBpcyBub3QgYSB2YWxpZCBmb3JtYXQiICUgY3VyKQogICAgICAgIGlmIG51bSAhPSBOb25lIDoKICAgICAgICAgICAgcmVzdWx0ICs9IG51bSpmb3JtYXRbJ3NpemUnXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3VsdCArPSBmb3JtYXRbJ3NpemUnXQogICAgICAgIG51bSA9IDAKICAgICAgICBpICs9IDEKICAgIHJldHVybiByZXN1bHQKCmRlZiBwYWNrKGZtdCwqYXJncyk6CiAgICAiIiJwYWNrKGZtdCwgdjEsIHYyLCAuLi4pIC0+IHN0cmluZwogICAgICAgUmV0dXJuIHN0cmluZyBjb250YWluaW5nIHZhbHVlcyB2MSwgdjIsIC4uLiBwYWNrZWQgYWNjb3JkaW5nIHRvIGZtdC4KICAgICAgIFNlZSBzdHJ1Y3QuX19kb2NfXyBmb3IgbW9yZSBvbiBmb3JtYXQgc3RyaW5ncy4iIiIKICAgIGZvcm1hdGRlZixlbmRpYW5uZXNzLGkgPSBnZXRtb2RlKGZtdCkKICAgIGFyZ3MgPSBsaXN0KGFyZ3MpCiAgICBuX2FyZ3MgPSBsZW4oYXJncykKICAgIHJlc3VsdCA9IFtdCiAgICB3aGlsZSBpPGxlbihmbXQpOgogICAgICAgIG51bSxpID0gZ2V0TnVtKGZtdCxpKQogICAgICAgIGN1ciA9IGZtdFtpXQogICAgICAgIHRyeToKICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0ZGVmW2N1cl0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCIlcyBpcyBub3QgYSB2YWxpZCBmb3JtYXQiICUgY3VyKQogICAgICAgIGlmIG51bSA9PSBOb25lIDoKICAgICAgICAgICAgbnVtX3MgPSAwCiAgICAgICAgICAgIG51bSA9IDEKICAgICAgICBlbHNlOgogICAgICAgICAgICBudW1fcyA9IG51bQoKICAgICAgICBpZiBjdXIgPT0gJ3gnOgogICAgICAgICAgICByZXN1bHQgKz0gW2InXDAnKm51bV0KICAgICAgICBlbGlmIGN1ciA9PSAncyc6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYXJnc1swXSwgYnl0ZXMpOgogICAgICAgICAgICAgICAgcGFkZGluZyA9IG51bSAtIGxlbihhcmdzWzBdKQogICAgICAgICAgICAgICAgcmVzdWx0ICs9IFthcmdzWzBdWzpudW1dICsgYidcMCcqcGFkZGluZ10KICAgICAgICAgICAgICAgIGFyZ3MucG9wKDApCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBTdHJ1Y3RFcnJvcigiYXJnIGZvciBzdHJpbmcgZm9ybWF0IG5vdCBhIHN0cmluZyIpCiAgICAgICAgZWxpZiBjdXIgPT0gJ3AnOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGFyZ3NbMF0sIGJ5dGVzKToKICAgICAgICAgICAgICAgIHBhZGRpbmcgPSBudW0gLSBsZW4oYXJnc1swXSkgLSAxCgogICAgICAgICAgICAgICAgaWYgcGFkZGluZyA+IDA6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IFtieXRlcyhbbGVuKGFyZ3NbMF0pXSkgKyBhcmdzWzBdWzpudW0tMV0gKyBiJ1wwJypwYWRkaW5nXQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBudW08MjU1OgogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gW2J5dGVzKFtudW0tMV0pICsgYXJnc1swXVs6bnVtLTFdXQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBbYnl0ZXMoWzI1NV0pICsgYXJnc1swXVs6bnVtLTFdXQogICAgICAgICAgICAgICAgYXJncy5wb3AoMCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCJhcmcgZm9yIHN0cmluZyBmb3JtYXQgbm90IGEgc3RyaW5nIikKCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgbGVuKGFyZ3MpIDwgbnVtOgogICAgICAgICAgICAgICAgcmFpc2UgU3RydWN0RXJyb3IoImluc3VmZmljaWVudCBhcmd1bWVudHMgdG8gcGFjayIpCiAgICAgICAgICAgIGZvciB2YXIgaW4gYXJnc1s6bnVtXToKICAgICAgICAgICAgICAgIHJlc3VsdCArPSBbZm9ybWF0WydwYWNrJ10odmFyLGZvcm1hdFsnc2l6ZSddLGVuZGlhbm5lc3MpXQogICAgICAgICAgICBhcmdzPWFyZ3NbbnVtOl0KICAgICAgICBudW0gPSBOb25lCiAgICAgICAgaSArPSAxCiAgICBpZiBsZW4oYXJncykgIT0gMDoKICAgICAgICByYWlzZSBTdHJ1Y3RFcnJvcigidG9vIG1hbnkgYXJndW1lbnRzIGZvciBwYWNrIGZvcm1hdCIpCiAgICByZXR1cm4gYicnLmpvaW4ocmVzdWx0KQoKZGVmIHVucGFjayhmbXQsZGF0YSk6CiAgICAiIiJ1bnBhY2soZm10LCBzdHJpbmcpIC0+ICh2MSwgdjIsIC4uLikKICAgICAgIFVucGFjayB0aGUgc3RyaW5nLCBjb250YWluaW5nIHBhY2tlZCBDIHN0cnVjdHVyZSBkYXRhLCBhY2NvcmRpbmcKICAgICAgIHRvIGZtdC4gIFJlcXVpcmVzIGxlbihzdHJpbmcpPT1jYWxjc2l6ZShmbXQpLgogICAgICAgU2VlIHN0cnVjdC5fX2RvY19fIGZvciBtb3JlIG9uIGZvcm1hdCBzdHJpbmdzLiIiIgogICAgZm9ybWF0ZGVmLGVuZGlhbm5lc3MsaSA9IGdldG1vZGUoZm10KQogICAgaiA9IDAKICAgIG51bSA9IDAKICAgIHJlc3VsdCA9IFtdCiAgICBsZW5ndGg9IGNhbGNzaXplKGZtdCkKICAgIGlmIGxlbmd0aCAhPSBsZW4gKGRhdGEpOgogICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCJ1bnBhY2sgc3RyIHNpemUgZG9lcyBub3QgbWF0Y2ggZm9ybWF0IikKICAgIHdoaWxlIGk8bGVuKGZtdCk6CiAgICAgICAgbnVtLGk9Z2V0TnVtKGZtdCxpKQogICAgICAgIGN1ciA9IGZtdFtpXQogICAgICAgIGkgKz0gMQogICAgICAgIHRyeToKICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0ZGVmW2N1cl0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFN0cnVjdEVycm9yKCIlcyBpcyBub3QgYSB2YWxpZCBmb3JtYXQiICUgY3VyKQoKICAgICAgICBpZiBub3QgbnVtIDoKICAgICAgICAgICAgbnVtID0gMQoKICAgICAgICBpZiBjdXIgPT0gJ3gnOgogICAgICAgICAgICBqICs9IG51bQogICAgICAgIGVsaWYgY3VyID09ICdzJzoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChkYXRhW2o6aitudW1dKQogICAgICAgICAgICBqICs9IG51bQogICAgICAgIGVsaWYgY3VyID09ICdwJzoKICAgICAgICAgICAgbj1kYXRhW2pdCiAgICAgICAgICAgIGlmIG4gPj0gbnVtOgogICAgICAgICAgICAgICAgbiA9IG51bS0xCiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoZGF0YVtqKzE6aituKzFdKQogICAgICAgICAgICBqICs9IG51bQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGZvciBuIGluIHJhbmdlKG51bSk6CiAgICAgICAgICAgICAgICByZXN1bHQgKz0gW2Zvcm1hdFsndW5wYWNrJ10oZGF0YSxqLGZvcm1hdFsnc2l6ZSddLGVuZGlhbm5lc3MpXQogICAgICAgICAgICAgICAgaiArPSBmb3JtYXRbJ3NpemUnXQoKICAgIHJldHVybiB0dXBsZShyZXN1bHQpCgpkZWYgcGFja19pbnRvKGZtdCwgYnVmLCBvZmZzZXQsICphcmdzKToKICAgIGRhdGEgPSBwYWNrKGZtdCwgKmFyZ3MpCiAgICBidWZmZXIoYnVmKVtvZmZzZXQ6b2Zmc2V0K2xlbihkYXRhKV0gPSBkYXRhCgpkZWYgdW5wYWNrX2Zyb20oZm10LCBidWYsIG9mZnNldD0wKToKICAgIHNpemUgPSBjYWxjc2l6ZShmbXQpCiAgICBkYXRhID0gYnVmZmVyKGJ1Zilbb2Zmc2V0Om9mZnNldCtzaXplXQogICAgaWYgbGVuKGRhdGEpICE9IHNpemU6CiAgICAgICAgcmFpc2UgZXJyb3IoInVucGFja19mcm9tIHJlcXVpcmVzIGEgYnVmZmVyIG9mIGF0IGxlYXN0ICVkIGJ5dGVzIgogICAgICAgICAgICAgICAgICAgICUgKHNpemUsKSkKICAgIHJldHVybiB1bnBhY2soZm10LCBkYXRhKQoKZGVmIF9jbGVhcmNhY2hlKCk6CiAgICAiQ2xlYXIgdGhlIGludGVybmFsIGNhY2hlLiIKICAgICMgTm8gY2FjaGUgaW4gdGhpcyBpbXBsZW1lbnRhdGlvbgo=',
'/Lib/_warnings.py':'IiIiX3dhcm5pbmdzIHByb3ZpZGVzIGJhc2ljIHdhcm5pbmcgZmlsdGVyaW5nIHN1cHBvcnQuCkl0IGlzIGEgaGVscGVyIG1vZHVsZSB0byBzcGVlZCB1cCBpbnRlcnByZXRlciBzdGFydC11cC4iIiIKCgpkZWZhdWx0X2FjdGlvbiA9ICIiImRlZmF1bHQiIiIKCmZpbHRlcnMgPSAiWygnaWdub3JlJywgTm9uZSwgPHR5cGUgJ2V4Y2VwdGlvbnMuRGVwcmVjYXRpb25XYXJuaW5nJz4sIE5vbmUsIDApLCAKICAgICgnaWdub3JlJywgTm9uZSwgPHR5cGUgJ2V4Y2VwdGlvbnMuUGVuZGluZ0RlcHJlY2F0aW9uV2FybmluZyc+LCBOb25lLCAwKSwgCiAgICAoJ2lnbm9yZScsIE5vbmUsIDx0eXBlICdleGNlcHRpb25zLkltcG9ydFdhcm5pbmcnPiwgTm9uZSwgMCksIAogICAgKCdpZ25vcmUnLCBOb25lLCA8dHlwZSAnZXhjZXB0aW9ucy5CeXRlc1dhcm5pbmcnPiwgTm9uZSwgMCldIgoKb25jZV9yZWdpc3RyeSA9IHt9CgpkZWYgd2FybigqYXJncywqKmt3KToKICAgICIiIklzc3VlIGEgd2FybmluZywgb3IgbWF5YmUgaWdub3JlIGl0IG9yIHJhaXNlIGFuIGV4Y2VwdGlvbi4iIiIKICAgIHBhc3MKCmRlZiB3YXJuX2V4cGxpY2l0KCphcmdzLCoqa3cpOgogICAgIiIiTG93LWxldmVsIGluZmVyZmFjZSB0byB3YXJuaW5ncyBmdW5jdGlvbmFsaXR5LiIiIgogICAgcGFzcwo=',
'/Lib/_imp.py':'IiIiKEV4dHJlbWVseSkgbG93LWxldmVsIGltcG9ydCBtYWNoaW5lcnkgYml0cyBhcyB1c2VkIGJ5IGltcG9ydGxpYiBhbmQgaW1wLiIiIgoKCmNsYXNzIF9fbG9hZGVyX18ob2JqZWN0KTpwYXNzCgpkZWYgX2ZpeF9jb19maWxlbmFtZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBhY3F1aXJlX2xvY2soKmFyZ3MsKiprdyk6CiAgICAiIiJhY3F1aXJlX2xvY2soKSAtPiBOb25lICAgIEFjcXVpcmVzIHRoZSBpbnRlcnByZXRlcidzIGltcG9ydCBsb2NrIGZvciB0aGUgY3VycmVudCB0aHJlYWQuCiAgICBUaGlzIGxvY2sgc2hvdWxkIGJlIHVzZWQgYnkgaW1wb3J0IGhvb2tzIHRvIGVuc3VyZSB0aHJlYWQtc2FmZXR5CiAgICB3aGVuIGltcG9ydGluZyBtb2R1bGVzLgogICAgT24gcGxhdGZvcm1zIHdpdGhvdXQgdGhyZWFkcywgdGhpcyBmdW5jdGlvbiBkb2VzIG5vdGhpbmcuIiIiCiAgICBwYXNzCgpkZWYgZXh0ZW5zaW9uX3N1ZmZpeGVzKCphcmdzLCoqa3cpOgogICAgIiIiZXh0ZW5zaW9uX3N1ZmZpeGVzKCkgLT4gbGlzdCBvZiBzdHJpbmdzICAgIFJldHVybnMgdGhlIGxpc3Qgb2YgZmlsZSBzdWZmaXhlcyB1c2VkIHRvIGlkZW50aWZ5IGV4dGVuc2lvbiBtb2R1bGVzLiIiIgogICAgcmV0dXJuIFsnLnB5ZCddCgpkZWYgZ2V0X2Zyb3plbl9vYmplY3QoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgaW5pdF9idWlsdGluKG1vZHVsZSwqYXJncywqKmt3KToKICAgIHJldHVybiBfX2ltcG9ydF9fKG1vZHVsZSkKCmRlZiBpbml0X2Zyb3plbigqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBpc19idWlsdGluKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIGlzX2Zyb3plbigqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBpc19mcm96ZW5fcGFja2FnZSgqYXJncywqKmt3KToKICAgIHBhc3MKCmRlZiBsb2FkX2R5bmFtaWMoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgbG9ja19oZWxkKCphcmdzLCoqa3cpOgogICAgIiIibG9ja19oZWxkKCkgLT4gYm9vbGVhbiAgICBSZXR1cm4gVHJ1ZSBpZiB0aGUgaW1wb3J0IGxvY2sgaXMgY3VycmVudGx5IGhlbGQsIGVsc2UgRmFsc2UuCiAgICBPbiBwbGF0Zm9ybXMgd2l0aG91dCB0aHJlYWRzLCByZXR1cm4gRmFsc2UuIiIiCiAgICBwYXNzCgpkZWYgcmVsZWFzZV9sb2NrKCphcmdzLCoqa3cpOgogICAgIiIicmVsZWFzZV9sb2NrKCkgLT4gTm9uZSAgICBSZWxlYXNlIHRoZSBpbnRlcnByZXRlcidzIGltcG9ydCBsb2NrLgogICAgT24gcGxhdGZvcm1zIHdpdGhvdXQgdGhyZWFkcywgdGhpcyBmdW5jdGlvbiBkb2VzIG5vdGhpbmcuIiIiCiAgICBwYXNzCg==',
'/Lib/difflib.py':'IyEgL3Vzci9iaW4vZW52IHB5dGhvbjMKCiIiIgpNb2R1bGUgZGlmZmxpYiAtLSBoZWxwZXJzIGZvciBjb21wdXRpbmcgZGVsdGFzIGJldHdlZW4gb2JqZWN0cy4KCkZ1bmN0aW9uIGdldF9jbG9zZV9tYXRjaGVzKHdvcmQsIHBvc3NpYmlsaXRpZXMsIG49MywgY3V0b2ZmPTAuNik6CiAgICBVc2UgU2VxdWVuY2VNYXRjaGVyIHRvIHJldHVybiBsaXN0IG9mIHRoZSBiZXN0ICJnb29kIGVub3VnaCIgbWF0Y2hlcy4KCkZ1bmN0aW9uIGNvbnRleHRfZGlmZihhLCBiKToKICAgIEZvciB0d28gbGlzdHMgb2Ygc3RyaW5ncywgcmV0dXJuIGEgZGVsdGEgaW4gY29udGV4dCBkaWZmIGZvcm1hdC4KCkZ1bmN0aW9uIG5kaWZmKGEsIGIpOgogICAgUmV0dXJuIGEgZGVsdGE6IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gYGFgIGFuZCBgYmAgKGxpc3RzIG9mIHN0cmluZ3MpLgoKRnVuY3Rpb24gcmVzdG9yZShkZWx0YSwgd2hpY2gpOgogICAgUmV0dXJuIG9uZSBvZiB0aGUgdHdvIHNlcXVlbmNlcyB0aGF0IGdlbmVyYXRlZCBhbiBuZGlmZiBkZWx0YS4KCkZ1bmN0aW9uIHVuaWZpZWRfZGlmZihhLCBiKToKICAgIEZvciB0d28gbGlzdHMgb2Ygc3RyaW5ncywgcmV0dXJuIGEgZGVsdGEgaW4gdW5pZmllZCBkaWZmIGZvcm1hdC4KCkNsYXNzIFNlcXVlbmNlTWF0Y2hlcjoKICAgIEEgZmxleGlibGUgY2xhc3MgZm9yIGNvbXBhcmluZyBwYWlycyBvZiBzZXF1ZW5jZXMgb2YgYW55IHR5cGUuCgpDbGFzcyBEaWZmZXI6CiAgICBGb3IgcHJvZHVjaW5nIGh1bWFuLXJlYWRhYmxlIGRlbHRhcyBmcm9tIHNlcXVlbmNlcyBvZiBsaW5lcyBvZiB0ZXh0LgoKQ2xhc3MgSHRtbERpZmY6CiAgICBGb3IgcHJvZHVjaW5nIEhUTUwgc2lkZSBieSBzaWRlIGNvbXBhcmlzb24gd2l0aCBjaGFuZ2UgaGlnaGxpZ2h0cy4KIiIiCgpfX2FsbF9fID0gWydnZXRfY2xvc2VfbWF0Y2hlcycsICduZGlmZicsICdyZXN0b3JlJywgJ1NlcXVlbmNlTWF0Y2hlcicsCiAgICAgICAgICAgJ0RpZmZlcicsJ0lTX0NIQVJBQ1RFUl9KVU5LJywgJ0lTX0xJTkVfSlVOSycsICdjb250ZXh0X2RpZmYnLAogICAgICAgICAgICd1bmlmaWVkX2RpZmYnLCAnSHRtbERpZmYnLCAnTWF0Y2gnXQoKaW1wb3J0IHdhcm5pbmdzCmltcG9ydCBoZWFwcQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBuYW1lZHR1cGxlIGFzIF9uYW1lZHR1cGxlCgpNYXRjaCA9IF9uYW1lZHR1cGxlKCdNYXRjaCcsICdhIGIgc2l6ZScpCgpkZWYgX2NhbGN1bGF0ZV9yYXRpbyhtYXRjaGVzLCBsZW5ndGgpOgogICAgaWYgbGVuZ3RoOgogICAgICAgIHJldHVybiAyLjAgKiBtYXRjaGVzIC8gbGVuZ3RoCiAgICByZXR1cm4gMS4wCgpjbGFzcyBTZXF1ZW5jZU1hdGNoZXI6CgogICAgIiIiCiAgICBTZXF1ZW5jZU1hdGNoZXIgaXMgYSBmbGV4aWJsZSBjbGFzcyBmb3IgY29tcGFyaW5nIHBhaXJzIG9mIHNlcXVlbmNlcyBvZgogICAgYW55IHR5cGUsIHNvIGxvbmcgYXMgdGhlIHNlcXVlbmNlIGVsZW1lbnRzIGFyZSBoYXNoYWJsZS4gIFRoZSBiYXNpYwogICAgYWxnb3JpdGhtIHByZWRhdGVzLCBhbmQgaXMgYSBsaXR0bGUgZmFuY2llciB0aGFuLCBhbiBhbGdvcml0aG0KICAgIHB1Ymxpc2hlZCBpbiB0aGUgbGF0ZSAxOTgwJ3MgYnkgUmF0Y2xpZmYgYW5kIE9iZXJzaGVscCB1bmRlciB0aGUKICAgIGh5cGVyYm9saWMgbmFtZSAiZ2VzdGFsdCBwYXR0ZXJuIG1hdGNoaW5nIi4gIFRoZSBiYXNpYyBpZGVhIGlzIHRvIGZpbmQKICAgIHRoZSBsb25nZXN0IGNvbnRpZ3VvdXMgbWF0Y2hpbmcgc3Vic2VxdWVuY2UgdGhhdCBjb250YWlucyBubyAianVuayIKICAgIGVsZW1lbnRzIChSLU8gZG9lc24ndCBhZGRyZXNzIGp1bmspLiAgVGhlIHNhbWUgaWRlYSBpcyB0aGVuIGFwcGxpZWQKICAgIHJlY3Vyc2l2ZWx5IHRvIHRoZSBwaWVjZXMgb2YgdGhlIHNlcXVlbmNlcyB0byB0aGUgbGVmdCBhbmQgdG8gdGhlIHJpZ2h0CiAgICBvZiB0aGUgbWF0Y2hpbmcgc3Vic2VxdWVuY2UuICBUaGlzIGRvZXMgbm90IHlpZWxkIG1pbmltYWwgZWRpdAogICAgc2VxdWVuY2VzLCBidXQgZG9lcyB0ZW5kIHRvIHlpZWxkIG1hdGNoZXMgdGhhdCAibG9vayByaWdodCIgdG8gcGVvcGxlLgoKICAgIFNlcXVlbmNlTWF0Y2hlciB0cmllcyB0byBjb21wdXRlIGEgImh1bWFuLWZyaWVuZGx5IGRpZmYiIGJldHdlZW4gdHdvCiAgICBzZXF1ZW5jZXMuICBVbmxpa2UgZS5nLiBVTklYKHRtKSBkaWZmLCB0aGUgZnVuZGFtZW50YWwgbm90aW9uIGlzIHRoZQogICAgbG9uZ2VzdCAqY29udGlndW91cyogJiBqdW5rLWZyZWUgbWF0Y2hpbmcgc3Vic2VxdWVuY2UuICBUaGF0J3Mgd2hhdAogICAgY2F0Y2hlcyBwZW9wbGVzJyBleWVzLiAgVGhlIFdpbmRvd3ModG0pIHdpbmRpZmYgaGFzIGFub3RoZXIgaW50ZXJlc3RpbmcKICAgIG5vdGlvbiwgcGFpcmluZyB1cCBlbGVtZW50cyB0aGF0IGFwcGVhciB1bmlxdWVseSBpbiBlYWNoIHNlcXVlbmNlLgogICAgVGhhdCwgYW5kIHRoZSBtZXRob2QgaGVyZSwgYXBwZWFyIHRvIHlpZWxkIG1vcmUgaW50dWl0aXZlIGRpZmZlcmVuY2UKICAgIHJlcG9ydHMgdGhhbiBkb2VzIGRpZmYuICBUaGlzIG1ldGhvZCBhcHBlYXJzIHRvIGJlIHRoZSBsZWFzdCB2dWxuZXJhYmxlCiAgICB0byBzeW5jaGluZyB1cCBvbiBibG9ja3Mgb2YgImp1bmsgbGluZXMiLCB0aG91Z2ggKGxpa2UgYmxhbmsgbGluZXMgaW4KICAgIG9yZGluYXJ5IHRleHQgZmlsZXMsIG9yIG1heWJlICI8UD4iIGxpbmVzIGluIEhUTUwgZmlsZXMpLiAgVGhhdCBtYXkgYmUKICAgIGJlY2F1c2UgdGhpcyBpcyB0aGUgb25seSBtZXRob2Qgb2YgdGhlIDMgdGhhdCBoYXMgYSAqY29uY2VwdCogb2YKICAgICJqdW5rIiA8d2luaz4uCgogICAgRXhhbXBsZSwgY29tcGFyaW5nIHR3byBzdHJpbmdzLCBhbmQgY29uc2lkZXJpbmcgYmxhbmtzIHRvIGJlICJqdW5rIjoKCiAgICA+Pj4gcyA9IFNlcXVlbmNlTWF0Y2hlcihsYW1iZGEgeDogeCA9PSAiICIsCiAgICAuLi4gICAgICAgICAgICAgICAgICAgICAicHJpdmF0ZSBUaHJlYWQgY3VycmVudFRocmVhZDsiLAogICAgLi4uICAgICAgICAgICAgICAgICAgICAgInByaXZhdGUgdm9sYXRpbGUgVGhyZWFkIGN1cnJlbnRUaHJlYWQ7IikKICAgID4+PgoKICAgIC5yYXRpbygpIHJldHVybnMgYSBmbG9hdCBpbiBbMCwgMV0sIG1lYXN1cmluZyB0aGUgInNpbWlsYXJpdHkiIG9mIHRoZQogICAgc2VxdWVuY2VzLiAgQXMgYSBydWxlIG9mIHRodW1iLCBhIC5yYXRpbygpIHZhbHVlIG92ZXIgMC42IG1lYW5zIHRoZQogICAgc2VxdWVuY2VzIGFyZSBjbG9zZSBtYXRjaGVzOgoKICAgID4+PiBwcmludChyb3VuZChzLnJhdGlvKCksIDMpKQogICAgMC44NjYKICAgID4+PgoKICAgIElmIHlvdSdyZSBvbmx5IGludGVyZXN0ZWQgaW4gd2hlcmUgdGhlIHNlcXVlbmNlcyBtYXRjaCwKICAgIC5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkgaXMgaGFuZHk6CgogICAgPj4+IGZvciBibG9jayBpbiBzLmdldF9tYXRjaGluZ19ibG9ja3MoKToKICAgIC4uLiAgICAgcHJpbnQoImFbJWRdIGFuZCBiWyVkXSBtYXRjaCBmb3IgJWQgZWxlbWVudHMiICUgYmxvY2spCiAgICBhWzBdIGFuZCBiWzBdIG1hdGNoIGZvciA4IGVsZW1lbnRzCiAgICBhWzhdIGFuZCBiWzE3XSBtYXRjaCBmb3IgMjEgZWxlbWVudHMKICAgIGFbMjldIGFuZCBiWzM4XSBtYXRjaCBmb3IgMCBlbGVtZW50cwoKICAgIE5vdGUgdGhhdCB0aGUgbGFzdCB0dXBsZSByZXR1cm5lZCBieSAuZ2V0X21hdGNoaW5nX2Jsb2NrcygpIGlzIGFsd2F5cyBhCiAgICBkdW1teSwgKGxlbihhKSwgbGVuKGIpLCAwKSwgYW5kIHRoaXMgaXMgdGhlIG9ubHkgY2FzZSBpbiB3aGljaCB0aGUgbGFzdAogICAgdHVwbGUgZWxlbWVudCAobnVtYmVyIG9mIGVsZW1lbnRzIG1hdGNoZWQpIGlzIDAuCgogICAgSWYgeW91IHdhbnQgdG8ga25vdyBob3cgdG8gY2hhbmdlIHRoZSBmaXJzdCBzZXF1ZW5jZSBpbnRvIHRoZSBzZWNvbmQsCiAgICB1c2UgLmdldF9vcGNvZGVzKCk6CgogICAgPj4+IGZvciBvcGNvZGUgaW4gcy5nZXRfb3Bjb2RlcygpOgogICAgLi4uICAgICBwcmludCgiJTZzIGFbJWQ6JWRdIGJbJWQ6JWRdIiAlIG9wY29kZSkKICAgICBlcXVhbCBhWzA6OF0gYlswOjhdCiAgICBpbnNlcnQgYVs4OjhdIGJbODoxN10KICAgICBlcXVhbCBhWzg6MjldIGJbMTc6MzhdCgogICAgU2VlIHRoZSBEaWZmZXIgY2xhc3MgZm9yIGEgZmFuY3kgaHVtYW4tZnJpZW5kbHkgZmlsZSBkaWZmZXJlbmNlciwgd2hpY2gKICAgIHVzZXMgU2VxdWVuY2VNYXRjaGVyIGJvdGggdG8gY29tcGFyZSBzZXF1ZW5jZXMgb2YgbGluZXMsIGFuZCB0byBjb21wYXJlCiAgICBzZXF1ZW5jZXMgb2YgY2hhcmFjdGVycyB3aXRoaW4gc2ltaWxhciAobmVhci1tYXRjaGluZykgbGluZXMuCgogICAgU2VlIGFsc28gZnVuY3Rpb24gZ2V0X2Nsb3NlX21hdGNoZXMoKSBpbiB0aGlzIG1vZHVsZSwgd2hpY2ggc2hvd3MgaG93CiAgICBzaW1wbGUgY29kZSBidWlsZGluZyBvbiBTZXF1ZW5jZU1hdGNoZXIgY2FuIGJlIHVzZWQgdG8gZG8gdXNlZnVsIHdvcmsuCgogICAgVGltaW5nOiAgQmFzaWMgUi1PIGlzIGN1YmljIHRpbWUgd29yc3QgY2FzZSBhbmQgcXVhZHJhdGljIHRpbWUgZXhwZWN0ZWQKICAgIGNhc2UuICBTZXF1ZW5jZU1hdGNoZXIgaXMgcXVhZHJhdGljIHRpbWUgZm9yIHRoZSB3b3JzdCBjYXNlIGFuZCBoYXMKICAgIGV4cGVjdGVkLWNhc2UgYmVoYXZpb3IgZGVwZW5kZW50IGluIGEgY29tcGxpY2F0ZWQgd2F5IG9uIGhvdyBtYW55CiAgICBlbGVtZW50cyB0aGUgc2VxdWVuY2VzIGhhdmUgaW4gY29tbW9uOyBiZXN0IGNhc2UgdGltZSBpcyBsaW5lYXIuCgogICAgTWV0aG9kczoKCiAgICBfX2luaXRfXyhpc2p1bms9Tm9uZSwgYT0nJywgYj0nJykKICAgICAgICBDb25zdHJ1Y3QgYSBTZXF1ZW5jZU1hdGNoZXIuCgogICAgc2V0X3NlcXMoYSwgYikKICAgICAgICBTZXQgdGhlIHR3byBzZXF1ZW5jZXMgdG8gYmUgY29tcGFyZWQuCgogICAgc2V0X3NlcTEoYSkKICAgICAgICBTZXQgdGhlIGZpcnN0IHNlcXVlbmNlIHRvIGJlIGNvbXBhcmVkLgoKICAgIHNldF9zZXEyKGIpCiAgICAgICAgU2V0IHRoZSBzZWNvbmQgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQuCgogICAgZmluZF9sb25nZXN0X21hdGNoKGFsbywgYWhpLCBibG8sIGJoaSkKICAgICAgICBGaW5kIGxvbmdlc3QgbWF0Y2hpbmcgYmxvY2sgaW4gYVthbG86YWhpXSBhbmQgYltibG86YmhpXS4KCiAgICBnZXRfbWF0Y2hpbmdfYmxvY2tzKCkKICAgICAgICBSZXR1cm4gbGlzdCBvZiB0cmlwbGVzIGRlc2NyaWJpbmcgbWF0Y2hpbmcgc3Vic2VxdWVuY2VzLgoKICAgIGdldF9vcGNvZGVzKCkKICAgICAgICBSZXR1cm4gbGlzdCBvZiA1LXR1cGxlcyBkZXNjcmliaW5nIGhvdyB0byB0dXJuIGEgaW50byBiLgoKICAgIHJhdGlvKCkKICAgICAgICBSZXR1cm4gYSBtZWFzdXJlIG9mIHRoZSBzZXF1ZW5jZXMnIHNpbWlsYXJpdHkgKGZsb2F0IGluIFswLDFdKS4KCiAgICBxdWlja19yYXRpbygpCiAgICAgICAgUmV0dXJuIGFuIHVwcGVyIGJvdW5kIG9uIC5yYXRpbygpIHJlbGF0aXZlbHkgcXVpY2tseS4KCiAgICByZWFsX3F1aWNrX3JhdGlvKCkKICAgICAgICBSZXR1cm4gYW4gdXBwZXIgYm91bmQgb24gcmF0aW8oKSB2ZXJ5IHF1aWNrbHkuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaXNqdW5rPU5vbmUsIGE9JycsIGI9JycsIGF1dG9qdW5rPVRydWUpOgogICAgICAgICIiIkNvbnN0cnVjdCBhIFNlcXVlbmNlTWF0Y2hlci4KCiAgICAgICAgT3B0aW9uYWwgYXJnIGlzanVuayBpcyBOb25lICh0aGUgZGVmYXVsdCksIG9yIGEgb25lLWFyZ3VtZW50CiAgICAgICAgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHNlcXVlbmNlIGVsZW1lbnQgYW5kIHJldHVybnMgdHJ1ZSBpZmYgdGhlCiAgICAgICAgZWxlbWVudCBpcyBqdW5rLiAgTm9uZSBpcyBlcXVpdmFsZW50IHRvIHBhc3NpbmcgImxhbWJkYSB4OiAwIiwgaS5lLgogICAgICAgIG5vIGVsZW1lbnRzIGFyZSBjb25zaWRlcmVkIHRvIGJlIGp1bmsuICBGb3IgZXhhbXBsZSwgcGFzcwogICAgICAgICAgICBsYW1iZGEgeDogeCBpbiAiIFxcdCIKICAgICAgICBpZiB5b3UncmUgY29tcGFyaW5nIGxpbmVzIGFzIHNlcXVlbmNlcyBvZiBjaGFyYWN0ZXJzLCBhbmQgZG9uJ3QKICAgICAgICB3YW50IHRvIHN5bmNoIHVwIG9uIGJsYW5rcyBvciBoYXJkIHRhYnMuCgogICAgICAgIE9wdGlvbmFsIGFyZyBhIGlzIHRoZSBmaXJzdCBvZiB0d28gc2VxdWVuY2VzIHRvIGJlIGNvbXBhcmVkLiAgQnkKICAgICAgICBkZWZhdWx0LCBhbiBlbXB0eSBzdHJpbmcuICBUaGUgZWxlbWVudHMgb2YgYSBtdXN0IGJlIGhhc2hhYmxlLiAgU2VlCiAgICAgICAgYWxzbyAuc2V0X3NlcXMoKSBhbmQgLnNldF9zZXExKCkuCgogICAgICAgIE9wdGlvbmFsIGFyZyBiIGlzIHRoZSBzZWNvbmQgb2YgdHdvIHNlcXVlbmNlcyB0byBiZSBjb21wYXJlZC4gIEJ5CiAgICAgICAgZGVmYXVsdCwgYW4gZW1wdHkgc3RyaW5nLiAgVGhlIGVsZW1lbnRzIG9mIGIgbXVzdCBiZSBoYXNoYWJsZS4gU2VlCiAgICAgICAgYWxzbyAuc2V0X3NlcXMoKSBhbmQgLnNldF9zZXEyKCkuCgogICAgICAgIE9wdGlvbmFsIGFyZyBhdXRvanVuayBzaG91bGQgYmUgc2V0IHRvIEZhbHNlIHRvIGRpc2FibGUgdGhlCiAgICAgICAgImF1dG9tYXRpYyBqdW5rIGhldXJpc3RpYyIgdGhhdCB0cmVhdHMgcG9wdWxhciBlbGVtZW50cyBhcyBqdW5rCiAgICAgICAgKHNlZSBtb2R1bGUgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbikuCiAgICAgICAgIiIiCgogICAgICAgICMgTWVtYmVyczoKICAgICAgICAjIGEKICAgICAgICAjICAgICAgZmlyc3Qgc2VxdWVuY2UKICAgICAgICAjIGIKICAgICAgICAjICAgICAgc2Vjb25kIHNlcXVlbmNlOyBkaWZmZXJlbmNlcyBhcmUgY29tcHV0ZWQgYXMgIndoYXQgZG8KICAgICAgICAjICAgICAgd2UgbmVlZCB0byBkbyB0byAnYScgdG8gY2hhbmdlIGl0IGludG8gJ2InPyIKICAgICAgICAjIGIyagogICAgICAgICMgICAgICBmb3IgeCBpbiBiLCBiMmpbeF0gaXMgYSBsaXN0IG9mIHRoZSBpbmRpY2VzIChpbnRvIGIpCiAgICAgICAgIyAgICAgIGF0IHdoaWNoIHggYXBwZWFyczsganVuayBhbmQgcG9wdWxhciBlbGVtZW50cyBkbyBub3QgYXBwZWFyCiAgICAgICAgIyBmdWxsYmNvdW50CiAgICAgICAgIyAgICAgIGZvciB4IGluIGIsIGZ1bGxiY291bnRbeF0gPT0gdGhlIG51bWJlciBvZiB0aW1lcyB4CiAgICAgICAgIyAgICAgIGFwcGVhcnMgaW4gYjsgb25seSBtYXRlcmlhbGl6ZWQgaWYgcmVhbGx5IG5lZWRlZCAodXNlZAogICAgICAgICMgICAgICBvbmx5IGZvciBjb21wdXRpbmcgcXVpY2tfcmF0aW8oKSkKICAgICAgICAjIG1hdGNoaW5nX2Jsb2NrcwogICAgICAgICMgICAgICBhIGxpc3Qgb2YgKGksIGosIGspIHRyaXBsZXMsIHdoZXJlIGFbaTppK2tdID09IGJbajpqK2tdOwogICAgICAgICMgICAgICBhc2NlbmRpbmcgJiBub24tb3ZlcmxhcHBpbmcgaW4gaSBhbmQgaW4gajsgdGVybWluYXRlZCBieQogICAgICAgICMgICAgICBhIGR1bW15IChsZW4oYSksIGxlbihiKSwgMCkgc2VudGluZWwKICAgICAgICAjIG9wY29kZXMKICAgICAgICAjICAgICAgYSBsaXN0IG9mICh0YWcsIGkxLCBpMiwgajEsIGoyKSB0dXBsZXMsIHdoZXJlIHRhZyBpcwogICAgICAgICMgICAgICBvbmUgb2YKICAgICAgICAjICAgICAgICAgICdyZXBsYWNlJyAgIGFbaTE6aTJdIHNob3VsZCBiZSByZXBsYWNlZCBieSBiW2oxOmoyXQogICAgICAgICMgICAgICAgICAgJ2RlbGV0ZScgICAgYVtpMTppMl0gc2hvdWxkIGJlIGRlbGV0ZWQKICAgICAgICAjICAgICAgICAgICdpbnNlcnQnICAgIGJbajE6ajJdIHNob3VsZCBiZSBpbnNlcnRlZAogICAgICAgICMgICAgICAgICAgJ2VxdWFsJyAgICAgYVtpMTppMl0gPT0gYltqMTpqMl0KICAgICAgICAjIGlzanVuawogICAgICAgICMgICAgICBhIHVzZXItc3VwcGxpZWQgZnVuY3Rpb24gdGFraW5nIGEgc2VxdWVuY2UgZWxlbWVudCBhbmQKICAgICAgICAjICAgICAgcmV0dXJuaW5nIHRydWUgaWZmIHRoZSBlbGVtZW50IGlzICJqdW5rIiAtLSB0aGlzIGhhcwogICAgICAgICMgICAgICBzdWJ0bGUgYnV0IGhlbHBmdWwgZWZmZWN0cyBvbiB0aGUgYWxnb3JpdGhtLCB3aGljaCBJJ2xsCiAgICAgICAgIyAgICAgIGdldCBhcm91bmQgdG8gd3JpdGluZyB1cCBzb21lZGF5IDwwLjkgd2luaz4uCiAgICAgICAgIyAgICAgIERPTidUIFVTRSEgIE9ubHkgX19jaGFpbl9iIHVzZXMgdGhpcy4gIFVzZSAiaW4gc2VsZi5ianVuayIuCiAgICAgICAgIyBianVuawogICAgICAgICMgICAgICB0aGUgaXRlbXMgaW4gYiBmb3Igd2hpY2ggaXNqdW5rIGlzIFRydWUuCiAgICAgICAgIyBicG9wdWxhcgogICAgICAgICMgICAgICBub25qdW5rIGl0ZW1zIGluIGIgdHJlYXRlZCBhcyBqdW5rIGJ5IHRoZSBoZXVyaXN0aWMgKGlmIHVzZWQpLgoKICAgICAgICBzZWxmLmlzanVuayA9IGlzanVuawogICAgICAgIHNlbGYuYSA9IHNlbGYuYiA9IE5vbmUKICAgICAgICBzZWxmLmF1dG9qdW5rID0gYXV0b2p1bmsKICAgICAgICBzZWxmLnNldF9zZXFzKGEsIGIpCgogICAgZGVmIHNldF9zZXFzKHNlbGYsIGEsIGIpOgogICAgICAgICIiIlNldCB0aGUgdHdvIHNlcXVlbmNlcyB0byBiZSBjb21wYXJlZC4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoKQogICAgICAgID4+PiBzLnNldF9zZXFzKCJhYmNkIiwgImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAwLjc1CiAgICAgICAgIiIiCgogICAgICAgIHNlbGYuc2V0X3NlcTEoYSkKICAgICAgICBzZWxmLnNldF9zZXEyKGIpCgogICAgZGVmIHNldF9zZXExKHNlbGYsIGEpOgogICAgICAgICIiIlNldCB0aGUgZmlyc3Qgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQuCgogICAgICAgIFRoZSBzZWNvbmQgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQgaXMgbm90IGNoYW5nZWQuCgogICAgICAgID4+PiBzID0gU2VxdWVuY2VNYXRjaGVyKE5vbmUsICJhYmNkIiwgImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAwLjc1CiAgICAgICAgPj4+IHMuc2V0X3NlcTEoImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAxLjAKICAgICAgICA+Pj4KCiAgICAgICAgU2VxdWVuY2VNYXRjaGVyIGNvbXB1dGVzIGFuZCBjYWNoZXMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgdGhlCiAgICAgICAgc2Vjb25kIHNlcXVlbmNlLCBzbyBpZiB5b3Ugd2FudCB0byBjb21wYXJlIG9uZSBzZXF1ZW5jZSBTIGFnYWluc3QKICAgICAgICBtYW55IHNlcXVlbmNlcywgdXNlIC5zZXRfc2VxMihTKSBvbmNlIGFuZCBjYWxsIC5zZXRfc2VxMSh4KQogICAgICAgIHJlcGVhdGVkbHkgZm9yIGVhY2ggb2YgdGhlIG90aGVyIHNlcXVlbmNlcy4KCiAgICAgICAgU2VlIGFsc28gc2V0X3NlcXMoKSBhbmQgc2V0X3NlcTIoKS4KICAgICAgICAiIiIKCiAgICAgICAgaWYgYSBpcyBzZWxmLmE6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHNlbGYuYSA9IGEKICAgICAgICBzZWxmLm1hdGNoaW5nX2Jsb2NrcyA9IHNlbGYub3Bjb2RlcyA9IE5vbmUKCiAgICBkZWYgc2V0X3NlcTIoc2VsZiwgYik6CiAgICAgICAgIiIiU2V0IHRoZSBzZWNvbmQgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQuCgogICAgICAgIFRoZSBmaXJzdCBzZXF1ZW5jZSB0byBiZSBjb21wYXJlZCBpcyBub3QgY2hhbmdlZC4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoTm9uZSwgImFiY2QiLCAiYmNkZSIpCiAgICAgICAgPj4+IHMucmF0aW8oKQogICAgICAgIDAuNzUKICAgICAgICA+Pj4gcy5zZXRfc2VxMigiYWJjZCIpCiAgICAgICAgPj4+IHMucmF0aW8oKQogICAgICAgIDEuMAogICAgICAgID4+PgoKICAgICAgICBTZXF1ZW5jZU1hdGNoZXIgY29tcHV0ZXMgYW5kIGNhY2hlcyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUKICAgICAgICBzZWNvbmQgc2VxdWVuY2UsIHNvIGlmIHlvdSB3YW50IHRvIGNvbXBhcmUgb25lIHNlcXVlbmNlIFMgYWdhaW5zdAogICAgICAgIG1hbnkgc2VxdWVuY2VzLCB1c2UgLnNldF9zZXEyKFMpIG9uY2UgYW5kIGNhbGwgLnNldF9zZXExKHgpCiAgICAgICAgcmVwZWF0ZWRseSBmb3IgZWFjaCBvZiB0aGUgb3RoZXIgc2VxdWVuY2VzLgoKICAgICAgICBTZWUgYWxzbyBzZXRfc2VxcygpIGFuZCBzZXRfc2VxMSgpLgogICAgICAgICIiIgoKICAgICAgICBpZiBiIGlzIHNlbGYuYjoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgc2VsZi5iID0gYgogICAgICAgIHNlbGYubWF0Y2hpbmdfYmxvY2tzID0gc2VsZi5vcGNvZGVzID0gTm9uZQogICAgICAgIHNlbGYuZnVsbGJjb3VudCA9IE5vbmUKICAgICAgICBzZWxmLl9fY2hhaW5fYigpCgogICAgIyBGb3IgZWFjaCBlbGVtZW50IHggaW4gYiwgc2V0IGIyalt4XSB0byBhIGxpc3Qgb2YgdGhlIGluZGljZXMgaW4KICAgICMgYiB3aGVyZSB4IGFwcGVhcnM7IHRoZSBpbmRpY2VzIGFyZSBpbiBpbmNyZWFzaW5nIG9yZGVyOyBub3RlIHRoYXQKICAgICMgdGhlIG51bWJlciBvZiB0aW1lcyB4IGFwcGVhcnMgaW4gYiBpcyBsZW4oYjJqW3hdKSAuLi4KICAgICMgd2hlbiBzZWxmLmlzanVuayBpcyBkZWZpbmVkLCBqdW5rIGVsZW1lbnRzIGRvbid0IHNob3cgdXAgaW4gdGhpcwogICAgIyBtYXAgYXQgYWxsLCB3aGljaCBzdG9wcyB0aGUgY2VudHJhbCBmaW5kX2xvbmdlc3RfbWF0Y2ggbWV0aG9kCiAgICAjIGZyb20gc3RhcnRpbmcgYW55IG1hdGNoaW5nIGJsb2NrIGF0IGEganVuayBlbGVtZW50IC4uLgogICAgIyBiMmogYWxzbyBkb2VzIG5vdCBjb250YWluIGVudHJpZXMgZm9yICJwb3B1bGFyIiBlbGVtZW50cywgbWVhbmluZwogICAgIyBlbGVtZW50cyB0aGF0IGFjY291bnQgZm9yIG1vcmUgdGhhbiAxICsgMSUgb2YgdGhlIHRvdGFsIGVsZW1lbnRzLCBhbmQKICAgICMgd2hlbiB0aGUgc2VxdWVuY2UgaXMgcmVhc29uYWJseSBsYXJnZSAoPj0gMjAwIGVsZW1lbnRzKTsgdGhpcyBjYW4KICAgICMgYmUgdmlld2VkIGFzIGFuIGFkYXB0aXZlIG5vdGlvbiBvZiBzZW1pLWp1bmssIGFuZCB5aWVsZHMgYW4gZW5vcm1vdXMKICAgICMgc3BlZWR1cCB3aGVuLCBlLmcuLCBjb21wYXJpbmcgcHJvZ3JhbSBmaWxlcyB3aXRoIGh1bmRyZWRzIG9mCiAgICAjIGluc3RhbmNlcyBvZiAicmV0dXJuIE5VTEw7IiAuLi4KICAgICMgbm90ZSB0aGF0IHRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiBiIGNoYW5nZXM7IHNvIGZvciBjcm9zcy1wcm9kdWN0CiAgICAjIGtpbmRzIG9mIG1hdGNoZXMsIGl0J3MgYmVzdCB0byBjYWxsIHNldF9zZXEyIG9uY2UsIHRoZW4gc2V0X3NlcTEKICAgICMgcmVwZWF0ZWRseQoKICAgIGRlZiBfX2NoYWluX2Ioc2VsZik6CiAgICAgICAgIyBCZWNhdXNlIGlzanVuayBpcyBhIHVzZXItZGVmaW5lZCAobm90IEMpIGZ1bmN0aW9uLCBhbmQgd2UgdGVzdAogICAgICAgICMgZm9yIGp1bmsgYSBMT1QsIGl0J3MgaW1wb3J0YW50IHRvIG1pbmltaXplIHRoZSBudW1iZXIgb2YgY2FsbHMuCiAgICAgICAgIyBCZWZvcmUgdGhlIHRyaWNrcyBkZXNjcmliZWQgaGVyZSwgX19jaGFpbl9iIHdhcyBieSBmYXIgdGhlIG1vc3QKICAgICAgICAjIHRpbWUtY29uc3VtaW5nIHJvdXRpbmUgaW4gdGhlIHdob2xlIG1vZHVsZSEgIElmIGFueW9uZSBzZWVzCiAgICAgICAgIyBKaW0gUm9za2luZCwgdGhhbmsgaGltIGFnYWluIGZvciBwcm9maWxlLnB5IC0tIEkgbmV2ZXIgd291bGQKICAgICAgICAjIGhhdmUgZ3Vlc3NlZCB0aGF0LgogICAgICAgICMgVGhlIGZpcnN0IHRyaWNrIGlzIHRvIGJ1aWxkIGIyaiBpZ25vcmluZyB0aGUgcG9zc2liaWxpdHkKICAgICAgICAjIG9mIGp1bmsuICBJLmUuLCB3ZSBkb24ndCBjYWxsIGlzanVuayBhdCBhbGwgeWV0LiAgVGhyb3dpbmcKICAgICAgICAjIG91dCB0aGUganVuayBsYXRlciBpcyBtdWNoIGNoZWFwZXIgdGhhbiBidWlsZGluZyBiMmogInJpZ2h0IgogICAgICAgICMgZnJvbSB0aGUgc3RhcnQuCiAgICAgICAgYiA9IHNlbGYuYgogICAgICAgIHNlbGYuYjJqID0gYjJqID0ge30KCiAgICAgICAgZm9yIGksIGVsdCBpbiBlbnVtZXJhdGUoYik6CiAgICAgICAgICAgIGluZGljZXMgPSBiMmouc2V0ZGVmYXVsdChlbHQsIFtdKQogICAgICAgICAgICBpbmRpY2VzLmFwcGVuZChpKQoKICAgICAgICAjIFB1cmdlIGp1bmsgZWxlbWVudHMKICAgICAgICBzZWxmLmJqdW5rID0ganVuayA9IHNldCgpCiAgICAgICAgaXNqdW5rID0gc2VsZi5pc2p1bmsKICAgICAgICBpZiBpc2p1bms6CiAgICAgICAgICAgIGZvciBlbHQgaW4gYjJqLmtleXMoKToKICAgICAgICAgICAgICAgIGlmIGlzanVuayhlbHQpOgogICAgICAgICAgICAgICAgICAgIGp1bmsuYWRkKGVsdCkKICAgICAgICAgICAgZm9yIGVsdCBpbiBqdW5rOiAjIHNlcGFyYXRlIGxvb3AgYXZvaWRzIHNlcGFyYXRlIGxpc3Qgb2Yga2V5cwogICAgICAgICAgICAgICAgZGVsIGIyaltlbHRdCgogICAgICAgICMgUHVyZ2UgcG9wdWxhciBlbGVtZW50cyB0aGF0IGFyZSBub3QganVuawogICAgICAgIHNlbGYuYnBvcHVsYXIgPSBwb3B1bGFyID0gc2V0KCkKICAgICAgICBuID0gbGVuKGIpCiAgICAgICAgaWYgc2VsZi5hdXRvanVuayBhbmQgbiA+PSAyMDA6CiAgICAgICAgICAgIG50ZXN0ID0gbiAvLyAxMDAgKyAxCiAgICAgICAgICAgIGZvciBlbHQsIGlkeHMgaW4gYjJqLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBpZiBsZW4oaWR4cykgPiBudGVzdDoKICAgICAgICAgICAgICAgICAgICBwb3B1bGFyLmFkZChlbHQpCiAgICAgICAgICAgIGZvciBlbHQgaW4gcG9wdWxhcjogIyBkaXR0bzsgYXMgZmFzdCBmb3IgMSUgZGVsZXRpb24KICAgICAgICAgICAgICAgIGRlbCBiMmpbZWx0XQoKICAgIGRlZiBpc2JqdW5rKHNlbGYsIGl0ZW0pOgogICAgICAgICJEZXByZWNhdGVkOyB1c2UgJ2l0ZW0gaW4gU2VxdWVuY2VNYXRjaGVyKCkuYmp1bmsnLiIKICAgICAgICB3YXJuaW5ncy53YXJuKCInU2VxdWVuY2VNYXRjaGVyKCkuaXNianVuayhpdGVtKScgaXMgZGVwcmVjYXRlZDtcbiIKICAgICAgICAgICAgICAgICAgICAgICJ1c2UgJ2l0ZW0gaW4gU01pbnN0YW5jZS5ianVuaycgaW5zdGVhZC4iLAogICAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLCAyKQogICAgICAgIHJldHVybiBpdGVtIGluIHNlbGYuYmp1bmsKCiAgICBkZWYgaXNicG9wdWxhcihzZWxmLCBpdGVtKToKICAgICAgICAiRGVwcmVjYXRlZDsgdXNlICdpdGVtIGluIFNlcXVlbmNlTWF0Y2hlcigpLmJwb3B1bGFyJy4iCiAgICAgICAgd2FybmluZ3Mud2FybigiJ1NlcXVlbmNlTWF0Y2hlcigpLmlzYnBvcHVsYXIoaXRlbSknIGlzIGRlcHJlY2F0ZWQ7XG4iCiAgICAgICAgICAgICAgICAgICAgICAidXNlICdpdGVtIGluIFNNaW5zdGFuY2UuYnBvcHVsYXInIGluc3RlYWQuIiwKICAgICAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgICAgICByZXR1cm4gaXRlbSBpbiBzZWxmLmJwb3B1bGFyCgogICAgZGVmIGZpbmRfbG9uZ2VzdF9tYXRjaChzZWxmLCBhbG8sIGFoaSwgYmxvLCBiaGkpOgogICAgICAgICIiIkZpbmQgbG9uZ2VzdCBtYXRjaGluZyBibG9jayBpbiBhW2FsbzphaGldIGFuZCBiW2JsbzpiaGldLgoKICAgICAgICBJZiBpc2p1bmsgaXMgbm90IGRlZmluZWQ6CgogICAgICAgIFJldHVybiAoaSxqLGspIHN1Y2ggdGhhdCBhW2k6aStrXSBpcyBlcXVhbCB0byBiW2o6aitrXSwgd2hlcmUKICAgICAgICAgICAgYWxvIDw9IGkgPD0gaStrIDw9IGFoaQogICAgICAgICAgICBibG8gPD0gaiA8PSBqK2sgPD0gYmhpCiAgICAgICAgYW5kIGZvciBhbGwgKGknLGonLGsnKSBtZWV0aW5nIHRob3NlIGNvbmRpdGlvbnMsCiAgICAgICAgICAgIGsgPj0gaycKICAgICAgICAgICAgaSA8PSBpJwogICAgICAgICAgICBhbmQgaWYgaSA9PSBpJywgaiA8PSBqJwoKICAgICAgICBJbiBvdGhlciB3b3Jkcywgb2YgYWxsIG1heGltYWwgbWF0Y2hpbmcgYmxvY2tzLCByZXR1cm4gb25lIHRoYXQKICAgICAgICBzdGFydHMgZWFybGllc3QgaW4gYSwgYW5kIG9mIGFsbCB0aG9zZSBtYXhpbWFsIG1hdGNoaW5nIGJsb2NrcyB0aGF0CiAgICAgICAgc3RhcnQgZWFybGllc3QgaW4gYSwgcmV0dXJuIHRoZSBvbmUgdGhhdCBzdGFydHMgZWFybGllc3QgaW4gYi4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoTm9uZSwgIiBhYmNkIiwgImFiY2QgYWJjZCIpCiAgICAgICAgPj4+IHMuZmluZF9sb25nZXN0X21hdGNoKDAsIDUsIDAsIDkpCiAgICAgICAgTWF0Y2goYT0wLCBiPTQsIHNpemU9NSkKCiAgICAgICAgSWYgaXNqdW5rIGlzIGRlZmluZWQsIGZpcnN0IHRoZSBsb25nZXN0IG1hdGNoaW5nIGJsb2NrIGlzCiAgICAgICAgZGV0ZXJtaW5lZCBhcyBhYm92ZSwgYnV0IHdpdGggdGhlIGFkZGl0aW9uYWwgcmVzdHJpY3Rpb24gdGhhdCBubwogICAgICAgIGp1bmsgZWxlbWVudCBhcHBlYXJzIGluIHRoZSBibG9jay4gIFRoZW4gdGhhdCBibG9jayBpcyBleHRlbmRlZCBhcwogICAgICAgIGZhciBhcyBwb3NzaWJsZSBieSBtYXRjaGluZyAob25seSkganVuayBlbGVtZW50cyBvbiBib3RoIHNpZGVzLiAgU28KICAgICAgICB0aGUgcmVzdWx0aW5nIGJsb2NrIG5ldmVyIG1hdGNoZXMgb24ganVuayBleGNlcHQgYXMgaWRlbnRpY2FsIGp1bmsKICAgICAgICBoYXBwZW5zIHRvIGJlIGFkamFjZW50IHRvIGFuICJpbnRlcmVzdGluZyIgbWF0Y2guCgogICAgICAgIEhlcmUncyB0aGUgc2FtZSBleGFtcGxlIGFzIGJlZm9yZSwgYnV0IGNvbnNpZGVyaW5nIGJsYW5rcyB0byBiZQogICAgICAgIGp1bmsuICBUaGF0IHByZXZlbnRzICIgYWJjZCIgZnJvbSBtYXRjaGluZyB0aGUgIiBhYmNkIiBhdCB0aGUgdGFpbAogICAgICAgIGVuZCBvZiB0aGUgc2Vjb25kIHNlcXVlbmNlIGRpcmVjdGx5LiAgSW5zdGVhZCBvbmx5IHRoZSAiYWJjZCIgY2FuCiAgICAgICAgbWF0Y2gsIGFuZCBtYXRjaGVzIHRoZSBsZWZ0bW9zdCAiYWJjZCIgaW4gdGhlIHNlY29uZCBzZXF1ZW5jZToKCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIobGFtYmRhIHg6IHg9PSIgIiwgIiBhYmNkIiwgImFiY2QgYWJjZCIpCiAgICAgICAgPj4+IHMuZmluZF9sb25nZXN0X21hdGNoKDAsIDUsIDAsIDkpCiAgICAgICAgTWF0Y2goYT0xLCBiPTAsIHNpemU9NCkKCiAgICAgICAgSWYgbm8gYmxvY2tzIG1hdGNoLCByZXR1cm4gKGFsbywgYmxvLCAwKS4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoTm9uZSwgImFiIiwgImMiKQogICAgICAgID4+PiBzLmZpbmRfbG9uZ2VzdF9tYXRjaCgwLCAyLCAwLCAxKQogICAgICAgIE1hdGNoKGE9MCwgYj0wLCBzaXplPTApCiAgICAgICAgIiIiCgogICAgICAgICMgQ0FVVElPTjogIHN0cmlwcGluZyBjb21tb24gcHJlZml4IG9yIHN1ZmZpeCB3b3VsZCBiZSBpbmNvcnJlY3QuCiAgICAgICAgIyBFLmcuLAogICAgICAgICMgICAgYWIKICAgICAgICAjICAgIGFjYWIKICAgICAgICAjIExvbmdlc3QgbWF0Y2hpbmcgYmxvY2sgaXMgImFiIiwgYnV0IGlmIGNvbW1vbiBwcmVmaXggaXMKICAgICAgICAjIHN0cmlwcGVkLCBpdCdzICJhIiAodGllZCB3aXRoICJiIikuICBVTklYKHRtKSBkaWZmIGRvZXMgc28KICAgICAgICAjIHN0cmlwLCBzbyBlbmRzIHVwIGNsYWltaW5nIHRoYXQgYWIgaXMgY2hhbmdlZCB0byBhY2FiIGJ5CiAgICAgICAgIyBpbnNlcnRpbmcgImNhIiBpbiB0aGUgbWlkZGxlLiAgVGhhdCdzIG1pbmltYWwgYnV0IHVuaW50dWl0aXZlOgogICAgICAgICMgIml0J3Mgb2J2aW91cyIgdGhhdCBzb21lb25lIGluc2VydGVkICJhYyIgYXQgdGhlIGZyb250LgogICAgICAgICMgV2luZGlmZiBlbmRzIHVwIGF0IHRoZSBzYW1lIHBsYWNlIGFzIGRpZmYsIGJ1dCBieSBwYWlyaW5nIHVwCiAgICAgICAgIyB0aGUgdW5pcXVlICdiJ3MgYW5kIHRoZW4gbWF0Y2hpbmcgdGhlIGZpcnN0IHR3byAnYSdzLgoKICAgICAgICBhLCBiLCBiMmosIGlzYmp1bmsgPSBzZWxmLmEsIHNlbGYuYiwgc2VsZi5iMmosIHNlbGYuYmp1bmsuX19jb250YWluc19fCiAgICAgICAgYmVzdGksIGJlc3RqLCBiZXN0c2l6ZSA9IGFsbywgYmxvLCAwCiAgICAgICAgIyBmaW5kIGxvbmdlc3QganVuay1mcmVlIG1hdGNoCiAgICAgICAgIyBkdXJpbmcgYW4gaXRlcmF0aW9uIG9mIHRoZSBsb29wLCBqMmxlbltqXSA9IGxlbmd0aCBvZiBsb25nZXN0CiAgICAgICAgIyBqdW5rLWZyZWUgbWF0Y2ggZW5kaW5nIHdpdGggYVtpLTFdIGFuZCBiW2pdCiAgICAgICAgajJsZW4gPSB7fQogICAgICAgIG5vdGhpbmcgPSBbXQogICAgICAgIGZvciBpIGluIHJhbmdlKGFsbywgYWhpKToKICAgICAgICAgICAgIyBsb29rIGF0IGFsbCBpbnN0YW5jZXMgb2YgYVtpXSBpbiBiOyBub3RlIHRoYXQgYmVjYXVzZQogICAgICAgICAgICAjIGIyaiBoYXMgbm8ganVuayBrZXlzLCB0aGUgbG9vcCBpcyBza2lwcGVkIGlmIGFbaV0gaXMganVuawogICAgICAgICAgICBqMmxlbmdldCA9IGoybGVuLmdldAogICAgICAgICAgICBuZXdqMmxlbiA9IHt9CiAgICAgICAgICAgIGZvciBqIGluIGIyai5nZXQoYVtpXSwgbm90aGluZyk6CiAgICAgICAgICAgICAgICAjIGFbaV0gbWF0Y2hlcyBiW2pdCiAgICAgICAgICAgICAgICBpZiBqIDwgYmxvOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBpZiBqID49IGJoaToKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgayA9IG5ld2oybGVuW2pdID0gajJsZW5nZXQoai0xLCAwKSArIDEKICAgICAgICAgICAgICAgIGlmIGsgPiBiZXN0c2l6ZToKICAgICAgICAgICAgICAgICAgICBiZXN0aSwgYmVzdGosIGJlc3RzaXplID0gaS1rKzEsIGotaysxLCBrCiAgICAgICAgICAgIGoybGVuID0gbmV3ajJsZW4KCiAgICAgICAgIyBFeHRlbmQgdGhlIGJlc3QgYnkgbm9uLWp1bmsgZWxlbWVudHMgb24gZWFjaCBlbmQuICBJbiBwYXJ0aWN1bGFyLAogICAgICAgICMgInBvcHVsYXIiIG5vbi1qdW5rIGVsZW1lbnRzIGFyZW4ndCBpbiBiMmosIHdoaWNoIGdyZWF0bHkgc3BlZWRzCiAgICAgICAgIyB0aGUgaW5uZXIgbG9vcCBhYm92ZSwgYnV0IGFsc28gbWVhbnMgInRoZSBiZXN0IiBtYXRjaCBzbyBmYXIKICAgICAgICAjIGRvZXNuJ3QgY29udGFpbiBhbnkganVuayAqb3IqIHBvcHVsYXIgbm9uLWp1bmsgZWxlbWVudHMuCiAgICAgICAgd2hpbGUgYmVzdGkgPiBhbG8gYW5kIGJlc3RqID4gYmxvIGFuZCBcCiAgICAgICAgICAgICAgbm90IGlzYmp1bmsoYltiZXN0ai0xXSkgYW5kIFwKICAgICAgICAgICAgICBhW2Jlc3RpLTFdID09IGJbYmVzdGotMV06CiAgICAgICAgICAgIGJlc3RpLCBiZXN0aiwgYmVzdHNpemUgPSBiZXN0aS0xLCBiZXN0ai0xLCBiZXN0c2l6ZSsxCiAgICAgICAgd2hpbGUgYmVzdGkrYmVzdHNpemUgPCBhaGkgYW5kIGJlc3RqK2Jlc3RzaXplIDwgYmhpIGFuZCBcCiAgICAgICAgICAgICAgbm90IGlzYmp1bmsoYltiZXN0aitiZXN0c2l6ZV0pIGFuZCBcCiAgICAgICAgICAgICAgYVtiZXN0aStiZXN0c2l6ZV0gPT0gYltiZXN0aitiZXN0c2l6ZV06CiAgICAgICAgICAgIGJlc3RzaXplICs9IDEKCiAgICAgICAgIyBOb3cgdGhhdCB3ZSBoYXZlIGEgd2hvbGx5IGludGVyZXN0aW5nIG1hdGNoIChhbGJlaXQgcG9zc2libHkKICAgICAgICAjIGVtcHR5ISksIHdlIG1heSBhcyB3ZWxsIHN1Y2sgdXAgdGhlIG1hdGNoaW5nIGp1bmsgb24gZWFjaAogICAgICAgICMgc2lkZSBvZiBpdCB0b28uICBDYW4ndCB0aGluayBvZiBhIGdvb2QgcmVhc29uIG5vdCB0bywgYW5kIGl0CiAgICAgICAgIyBzYXZlcyBwb3N0LXByb2Nlc3NpbmcgdGhlIChwb3NzaWJseSBjb25zaWRlcmFibGUpIGV4cGVuc2Ugb2YKICAgICAgICAjIGZpZ3VyaW5nIG91dCB3aGF0IHRvIGRvIHdpdGggaXQuICBJbiB0aGUgY2FzZSBvZiBhbiBlbXB0eQogICAgICAgICMgaW50ZXJlc3RpbmcgbWF0Y2gsIHRoaXMgaXMgY2xlYXJseSB0aGUgcmlnaHQgdGhpbmcgdG8gZG8sCiAgICAgICAgIyBiZWNhdXNlIG5vIG90aGVyIGtpbmQgb2YgbWF0Y2ggaXMgcG9zc2libGUgaW4gdGhlIHJlZ2lvbnMuCiAgICAgICAgd2hpbGUgYmVzdGkgPiBhbG8gYW5kIGJlc3RqID4gYmxvIGFuZCBcCiAgICAgICAgICAgICAgaXNianVuayhiW2Jlc3RqLTFdKSBhbmQgXAogICAgICAgICAgICAgIGFbYmVzdGktMV0gPT0gYltiZXN0ai0xXToKICAgICAgICAgICAgYmVzdGksIGJlc3RqLCBiZXN0c2l6ZSA9IGJlc3RpLTEsIGJlc3RqLTEsIGJlc3RzaXplKzEKICAgICAgICB3aGlsZSBiZXN0aStiZXN0c2l6ZSA8IGFoaSBhbmQgYmVzdGorYmVzdHNpemUgPCBiaGkgYW5kIFwKICAgICAgICAgICAgICBpc2JqdW5rKGJbYmVzdGorYmVzdHNpemVdKSBhbmQgXAogICAgICAgICAgICAgIGFbYmVzdGkrYmVzdHNpemVdID09IGJbYmVzdGorYmVzdHNpemVdOgogICAgICAgICAgICBiZXN0c2l6ZSA9IGJlc3RzaXplICsgMQoKICAgICAgICByZXR1cm4gTWF0Y2goYmVzdGksIGJlc3RqLCBiZXN0c2l6ZSkKCiAgICBkZWYgZ2V0X21hdGNoaW5nX2Jsb2NrcyhzZWxmKToKICAgICAgICAiIiJSZXR1cm4gbGlzdCBvZiB0cmlwbGVzIGRlc2NyaWJpbmcgbWF0Y2hpbmcgc3Vic2VxdWVuY2VzLgoKICAgICAgICBFYWNoIHRyaXBsZSBpcyBvZiB0aGUgZm9ybSAoaSwgaiwgbiksIGFuZCBtZWFucyB0aGF0CiAgICAgICAgYVtpOmkrbl0gPT0gYltqOmorbl0uICBUaGUgdHJpcGxlcyBhcmUgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIGluCiAgICAgICAgaSBhbmQgaW4gai4gIE5ldyBpbiBQeXRob24gMi41LCBpdCdzIGFsc28gZ3VhcmFudGVlZCB0aGF0IGlmCiAgICAgICAgKGksIGosIG4pIGFuZCAoaScsIGonLCBuJykgYXJlIGFkamFjZW50IHRyaXBsZXMgaW4gdGhlIGxpc3QsIGFuZAogICAgICAgIHRoZSBzZWNvbmQgaXMgbm90IHRoZSBsYXN0IHRyaXBsZSBpbiB0aGUgbGlzdCwgdGhlbiBpK24gIT0gaScgb3IKICAgICAgICBqK24gIT0gaicuICBJT1csIGFkamFjZW50IHRyaXBsZXMgbmV2ZXIgZGVzY3JpYmUgYWRqYWNlbnQgZXF1YWwKICAgICAgICBibG9ja3MuCgogICAgICAgIFRoZSBsYXN0IHRyaXBsZSBpcyBhIGR1bW15LCAobGVuKGEpLCBsZW4oYiksIDApLCBhbmQgaXMgdGhlIG9ubHkKICAgICAgICB0cmlwbGUgd2l0aCBuPT0wLgoKICAgICAgICA+Pj4gcyA9IFNlcXVlbmNlTWF0Y2hlcihOb25lLCAiYWJ4Y2QiLCAiYWJjZCIpCiAgICAgICAgPj4+IGxpc3Qocy5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkpCiAgICAgICAgW01hdGNoKGE9MCwgYj0wLCBzaXplPTIpLCBNYXRjaChhPTMsIGI9Miwgc2l6ZT0yKSwgTWF0Y2goYT01LCBiPTQsIHNpemU9MCldCiAgICAgICAgIiIiCgogICAgICAgIGlmIHNlbGYubWF0Y2hpbmdfYmxvY2tzIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gc2VsZi5tYXRjaGluZ19ibG9ja3MKICAgICAgICBsYSwgbGIgPSBsZW4oc2VsZi5hKSwgbGVuKHNlbGYuYikKCiAgICAgICAgIyBUaGlzIGlzIG1vc3QgbmF0dXJhbGx5IGV4cHJlc3NlZCBhcyBhIHJlY3Vyc2l2ZSBhbGdvcml0aG0sIGJ1dAogICAgICAgICMgYXQgbGVhc3Qgb25lIHVzZXIgYnVtcGVkIGludG8gZXh0cmVtZSB1c2UgY2FzZXMgdGhhdCBleGNlZWRlZAogICAgICAgICMgdGhlIHJlY3Vyc2lvbiBsaW1pdCBvbiB0aGVpciBib3guICBTbywgbm93IHdlIG1haW50YWluIGEgbGlzdAogICAgICAgICMgKCdxdWV1ZWApIG9mIGJsb2NrcyB3ZSBzdGlsbCBuZWVkIHRvIGxvb2sgYXQsIGFuZCBhcHBlbmQgcGFydGlhbAogICAgICAgICMgcmVzdWx0cyB0byBgbWF0Y2hpbmdfYmxvY2tzYCBpbiBhIGxvb3A7IHRoZSBtYXRjaGVzIGFyZSBzb3J0ZWQKICAgICAgICAjIGF0IHRoZSBlbmQuCiAgICAgICAgcXVldWUgPSBbKDAsIGxhLCAwLCBsYildCiAgICAgICAgbWF0Y2hpbmdfYmxvY2tzID0gW10KICAgICAgICB3aGlsZSBxdWV1ZToKICAgICAgICAgICAgYWxvLCBhaGksIGJsbywgYmhpID0gcXVldWUucG9wKCkKICAgICAgICAgICAgaSwgaiwgayA9IHggPSBzZWxmLmZpbmRfbG9uZ2VzdF9tYXRjaChhbG8sIGFoaSwgYmxvLCBiaGkpCiAgICAgICAgICAgICMgYVthbG86aV0gdnMgYltibG86al0gdW5rbm93bgogICAgICAgICAgICAjIGFbaTppK2tdIHNhbWUgYXMgYltqOmora10KICAgICAgICAgICAgIyBhW2krazphaGldIHZzIGJbaitrOmJoaV0gdW5rbm93bgogICAgICAgICAgICBpZiBrOiAgICMgaWYgayBpcyAwLCB0aGVyZSB3YXMgbm8gbWF0Y2hpbmcgYmxvY2sKICAgICAgICAgICAgICAgIG1hdGNoaW5nX2Jsb2Nrcy5hcHBlbmQoeCkKICAgICAgICAgICAgICAgIGlmIGFsbyA8IGkgYW5kIGJsbyA8IGo6CiAgICAgICAgICAgICAgICAgICAgcXVldWUuYXBwZW5kKChhbG8sIGksIGJsbywgaikpCiAgICAgICAgICAgICAgICBpZiBpK2sgPCBhaGkgYW5kIGorayA8IGJoaToKICAgICAgICAgICAgICAgICAgICBxdWV1ZS5hcHBlbmQoKGkraywgYWhpLCBqK2ssIGJoaSkpCiAgICAgICAgbWF0Y2hpbmdfYmxvY2tzLnNvcnQoKQoKICAgICAgICAjIEl0J3MgcG9zc2libGUgdGhhdCB3ZSBoYXZlIGFkamFjZW50IGVxdWFsIGJsb2NrcyBpbiB0aGUKICAgICAgICAjIG1hdGNoaW5nX2Jsb2NrcyBsaXN0IG5vdy4gIFN0YXJ0aW5nIHdpdGggMi41LCB0aGlzIGNvZGUgd2FzIGFkZGVkCiAgICAgICAgIyB0byBjb2xsYXBzZSB0aGVtLgogICAgICAgIGkxID0gajEgPSBrMSA9IDAKICAgICAgICBub25fYWRqYWNlbnQgPSBbXQogICAgICAgIGZvciBpMiwgajIsIGsyIGluIG1hdGNoaW5nX2Jsb2NrczoKICAgICAgICAgICAgIyBJcyB0aGlzIGJsb2NrIGFkamFjZW50IHRvIGkxLCBqMSwgazE/CiAgICAgICAgICAgIGlmIGkxICsgazEgPT0gaTIgYW5kIGoxICsgazEgPT0gajI6CiAgICAgICAgICAgICAgICAjIFllcywgc28gY29sbGFwc2UgdGhlbSAtLSB0aGlzIGp1c3QgaW5jcmVhc2VzIHRoZSBsZW5ndGggb2YKICAgICAgICAgICAgICAgICMgdGhlIGZpcnN0IGJsb2NrIGJ5IHRoZSBsZW5ndGggb2YgdGhlIHNlY29uZCwgYW5kIHRoZSBmaXJzdAogICAgICAgICAgICAgICAgIyBibG9jayBzbyBsZW5ndGhlbmVkIHJlbWFpbnMgdGhlIGJsb2NrIHRvIGNvbXBhcmUgYWdhaW5zdC4KICAgICAgICAgICAgICAgIGsxICs9IGsyCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIE5vdCBhZGphY2VudC4gIFJlbWVtYmVyIHRoZSBmaXJzdCBibG9jayAoazE9PTAgbWVhbnMgaXQncwogICAgICAgICAgICAgICAgIyB0aGUgZHVtbXkgd2Ugc3RhcnRlZCB3aXRoKSwgYW5kIG1ha2UgdGhlIHNlY29uZCBibG9jayB0aGUKICAgICAgICAgICAgICAgICMgbmV3IGJsb2NrIHRvIGNvbXBhcmUgYWdhaW5zdC4KICAgICAgICAgICAgICAgIGlmIGsxOgogICAgICAgICAgICAgICAgICAgIG5vbl9hZGphY2VudC5hcHBlbmQoKGkxLCBqMSwgazEpKQogICAgICAgICAgICAgICAgaTEsIGoxLCBrMSA9IGkyLCBqMiwgazIKICAgICAgICBpZiBrMToKICAgICAgICAgICAgbm9uX2FkamFjZW50LmFwcGVuZCgoaTEsIGoxLCBrMSkpCgogICAgICAgIG5vbl9hZGphY2VudC5hcHBlbmQoIChsYSwgbGIsIDApICkKICAgICAgICBzZWxmLm1hdGNoaW5nX2Jsb2NrcyA9IG5vbl9hZGphY2VudAogICAgICAgIHJldHVybiBtYXAoTWF0Y2guX21ha2UsIHNlbGYubWF0Y2hpbmdfYmxvY2tzKQoKICAgIGRlZiBnZXRfb3Bjb2RlcyhzZWxmKToKICAgICAgICAiIiJSZXR1cm4gbGlzdCBvZiA1LXR1cGxlcyBkZXNjcmliaW5nIGhvdyB0byB0dXJuIGEgaW50byBiLgoKICAgICAgICBFYWNoIHR1cGxlIGlzIG9mIHRoZSBmb3JtICh0YWcsIGkxLCBpMiwgajEsIGoyKS4gIFRoZSBmaXJzdCB0dXBsZQogICAgICAgIGhhcyBpMSA9PSBqMSA9PSAwLCBhbmQgcmVtYWluaW5nIHR1cGxlcyBoYXZlIGkxID09IHRoZSBpMiBmcm9tIHRoZQogICAgICAgIHR1cGxlIHByZWNlZGluZyBpdCwgYW5kIGxpa2V3aXNlIGZvciBqMSA9PSB0aGUgcHJldmlvdXMgajIuCgogICAgICAgIFRoZSB0YWdzIGFyZSBzdHJpbmdzLCB3aXRoIHRoZXNlIG1lYW5pbmdzOgoKICAgICAgICAncmVwbGFjZSc6ICBhW2kxOmkyXSBzaG91bGQgYmUgcmVwbGFjZWQgYnkgYltqMTpqMl0KICAgICAgICAnZGVsZXRlJzogICBhW2kxOmkyXSBzaG91bGQgYmUgZGVsZXRlZC4KICAgICAgICAgICAgICAgICAgICBOb3RlIHRoYXQgajE9PWoyIGluIHRoaXMgY2FzZS4KICAgICAgICAnaW5zZXJ0JzogICBiW2oxOmoyXSBzaG91bGQgYmUgaW5zZXJ0ZWQgYXQgYVtpMTppMV0uCiAgICAgICAgICAgICAgICAgICAgTm90ZSB0aGF0IGkxPT1pMiBpbiB0aGlzIGNhc2UuCiAgICAgICAgJ2VxdWFsJzogICAgYVtpMTppMl0gPT0gYltqMTpqMl0KCiAgICAgICAgPj4+IGEgPSAicWFieGNkIgogICAgICAgID4+PiBiID0gImFieWNkZiIKICAgICAgICA+Pj4gcyA9IFNlcXVlbmNlTWF0Y2hlcihOb25lLCBhLCBiKQogICAgICAgID4+PiBmb3IgdGFnLCBpMSwgaTIsIGoxLCBqMiBpbiBzLmdldF9vcGNvZGVzKCk6CiAgICAgICAgLi4uICAgIHByaW50KCgiJTdzIGFbJWQ6JWRdICglcykgYlslZDolZF0gKCVzKSIgJQogICAgICAgIC4uLiAgICAgICAgICAgKHRhZywgaTEsIGkyLCBhW2kxOmkyXSwgajEsIGoyLCBiW2oxOmoyXSkpKQogICAgICAgICBkZWxldGUgYVswOjFdIChxKSBiWzA6MF0gKCkKICAgICAgICAgIGVxdWFsIGFbMTozXSAoYWIpIGJbMDoyXSAoYWIpCiAgICAgICAgcmVwbGFjZSBhWzM6NF0gKHgpIGJbMjozXSAoeSkKICAgICAgICAgIGVxdWFsIGFbNDo2XSAoY2QpIGJbMzo1XSAoY2QpCiAgICAgICAgIGluc2VydCBhWzY6Nl0gKCkgYls1OjZdIChmKQogICAgICAgICIiIgoKICAgICAgICBpZiBzZWxmLm9wY29kZXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLm9wY29kZXMKICAgICAgICBpID0gaiA9IDAKICAgICAgICBzZWxmLm9wY29kZXMgPSBhbnN3ZXIgPSBbXQogICAgICAgIGZvciBhaSwgYmosIHNpemUgaW4gc2VsZi5nZXRfbWF0Y2hpbmdfYmxvY2tzKCk6CiAgICAgICAgICAgICMgaW52YXJpYW50OiAgd2UndmUgcHVtcGVkIG91dCBjb3JyZWN0IGRpZmZzIHRvIGNoYW5nZQogICAgICAgICAgICAjIGFbOmldIGludG8gYls6al0sIGFuZCB0aGUgbmV4dCBtYXRjaGluZyBibG9jayBpcwogICAgICAgICAgICAjIGFbYWk6YWkrc2l6ZV0gPT0gYltiajpiaitzaXplXS4gIFNvIHdlIG5lZWQgdG8gcHVtcAogICAgICAgICAgICAjIG91dCBhIGRpZmYgdG8gY2hhbmdlIGFbaTphaV0gaW50byBiW2o6YmpdLCBwdW1wIG91dAogICAgICAgICAgICAjIHRoZSBtYXRjaGluZyBibG9jaywgYW5kIG1vdmUgKGksaikgYmV5b25kIHRoZSBtYXRjaAogICAgICAgICAgICB0YWcgPSAnJwogICAgICAgICAgICBpZiBpIDwgYWkgYW5kIGogPCBiajoKICAgICAgICAgICAgICAgIHRhZyA9ICdyZXBsYWNlJwogICAgICAgICAgICBlbGlmIGkgPCBhaToKICAgICAgICAgICAgICAgIHRhZyA9ICdkZWxldGUnCiAgICAgICAgICAgIGVsaWYgaiA8IGJqOgogICAgICAgICAgICAgICAgdGFnID0gJ2luc2VydCcKICAgICAgICAgICAgaWYgdGFnOgogICAgICAgICAgICAgICAgYW5zd2VyLmFwcGVuZCggKHRhZywgaSwgYWksIGosIGJqKSApCiAgICAgICAgICAgIGksIGogPSBhaStzaXplLCBiaitzaXplCiAgICAgICAgICAgICMgdGhlIGxpc3Qgb2YgbWF0Y2hpbmcgYmxvY2tzIGlzIHRlcm1pbmF0ZWQgYnkgYQogICAgICAgICAgICAjIHNlbnRpbmVsIHdpdGggc2l6ZSAwCiAgICAgICAgICAgIGlmIHNpemU6CiAgICAgICAgICAgICAgICBhbnN3ZXIuYXBwZW5kKCAoJ2VxdWFsJywgYWksIGksIGJqLCBqKSApCiAgICAgICAgcmV0dXJuIGFuc3dlcgoKICAgIGRlZiBnZXRfZ3JvdXBlZF9vcGNvZGVzKHNlbGYsIG49Myk6CiAgICAgICAgIiIiIElzb2xhdGUgY2hhbmdlIGNsdXN0ZXJzIGJ5IGVsaW1pbmF0aW5nIHJhbmdlcyB3aXRoIG5vIGNoYW5nZXMuCgogICAgICAgIFJldHVybiBhIGdlbmVyYXRvciBvZiBncm91cHMgd2l0aCB1cHRvIG4gbGluZXMgb2YgY29udGV4dC4KICAgICAgICBFYWNoIGdyb3VwIGlzIGluIHRoZSBzYW1lIGZvcm1hdCBhcyByZXR1cm5lZCBieSBnZXRfb3Bjb2RlcygpLgoKICAgICAgICA+Pj4gZnJvbSBwcHJpbnQgaW1wb3J0IHBwcmludAogICAgICAgID4+PiBhID0gbGlzdChtYXAoc3RyLCByYW5nZSgxLDQwKSkpCiAgICAgICAgPj4+IGIgPSBhWzpdCiAgICAgICAgPj4+IGJbODo4XSA9IFsnaSddICAgICAjIE1ha2UgYW4gaW5zZXJ0aW9uCiAgICAgICAgPj4+IGJbMjBdICs9ICd4JyAgICAgICAjIE1ha2UgYSByZXBsYWNlbWVudAogICAgICAgID4+PiBiWzIzOjI4XSA9IFtdICAgICAgIyBNYWtlIGEgZGVsZXRpb24KICAgICAgICA+Pj4gYlszMF0gKz0gJ3knICAgICAgICMgTWFrZSBhbm90aGVyIHJlcGxhY2VtZW50CiAgICAgICAgPj4+IHBwcmludChsaXN0KFNlcXVlbmNlTWF0Y2hlcihOb25lLGEsYikuZ2V0X2dyb3VwZWRfb3Bjb2RlcygpKSkKICAgICAgICBbWygnZXF1YWwnLCA1LCA4LCA1LCA4KSwgKCdpbnNlcnQnLCA4LCA4LCA4LCA5KSwgKCdlcXVhbCcsIDgsIDExLCA5LCAxMildLAogICAgICAgICBbKCdlcXVhbCcsIDE2LCAxOSwgMTcsIDIwKSwKICAgICAgICAgICgncmVwbGFjZScsIDE5LCAyMCwgMjAsIDIxKSwKICAgICAgICAgICgnZXF1YWwnLCAyMCwgMjIsIDIxLCAyMyksCiAgICAgICAgICAoJ2RlbGV0ZScsIDIyLCAyNywgMjMsIDIzKSwKICAgICAgICAgICgnZXF1YWwnLCAyNywgMzAsIDIzLCAyNildLAogICAgICAgICBbKCdlcXVhbCcsIDMxLCAzNCwgMjcsIDMwKSwKICAgICAgICAgICgncmVwbGFjZScsIDM0LCAzNSwgMzAsIDMxKSwKICAgICAgICAgICgnZXF1YWwnLCAzNSwgMzgsIDMxLCAzNCldXQogICAgICAgICIiIgoKICAgICAgICBjb2RlcyA9IHNlbGYuZ2V0X29wY29kZXMoKQogICAgICAgIGlmIG5vdCBjb2RlczoKICAgICAgICAgICAgY29kZXMgPSBbKCJlcXVhbCIsIDAsIDEsIDAsIDEpXQogICAgICAgICMgRml4dXAgbGVhZGluZyBhbmQgdHJhaWxpbmcgZ3JvdXBzIGlmIHRoZXkgc2hvdyBubyBjaGFuZ2VzLgogICAgICAgIGlmIGNvZGVzWzBdWzBdID09ICdlcXVhbCc6CiAgICAgICAgICAgIHRhZywgaTEsIGkyLCBqMSwgajIgPSBjb2Rlc1swXQogICAgICAgICAgICBjb2Rlc1swXSA9IHRhZywgbWF4KGkxLCBpMi1uKSwgaTIsIG1heChqMSwgajItbiksIGoyCiAgICAgICAgaWYgY29kZXNbLTFdWzBdID09ICdlcXVhbCc6CiAgICAgICAgICAgIHRhZywgaTEsIGkyLCBqMSwgajIgPSBjb2Rlc1stMV0KICAgICAgICAgICAgY29kZXNbLTFdID0gdGFnLCBpMSwgbWluKGkyLCBpMStuKSwgajEsIG1pbihqMiwgajErbikKCiAgICAgICAgbm4gPSBuICsgbgogICAgICAgIGdyb3VwID0gW10KICAgICAgICBmb3IgdGFnLCBpMSwgaTIsIGoxLCBqMiBpbiBjb2RlczoKICAgICAgICAgICAgIyBFbmQgdGhlIGN1cnJlbnQgZ3JvdXAgYW5kIHN0YXJ0IGEgbmV3IG9uZSB3aGVuZXZlcgogICAgICAgICAgICAjIHRoZXJlIGlzIGEgbGFyZ2UgcmFuZ2Ugd2l0aCBubyBjaGFuZ2VzLgogICAgICAgICAgICBpZiB0YWcgPT0gJ2VxdWFsJyBhbmQgaTItaTEgPiBubjoKICAgICAgICAgICAgICAgIGdyb3VwLmFwcGVuZCgodGFnLCBpMSwgbWluKGkyLCBpMStuKSwgajEsIG1pbihqMiwgajErbikpKQogICAgICAgICAgICAgICAgeWllbGQgZ3JvdXAKICAgICAgICAgICAgICAgIGdyb3VwID0gW10KICAgICAgICAgICAgICAgIGkxLCBqMSA9IG1heChpMSwgaTItbiksIG1heChqMSwgajItbikKICAgICAgICAgICAgZ3JvdXAuYXBwZW5kKCh0YWcsIGkxLCBpMiwgajEgLGoyKSkKICAgICAgICBpZiBncm91cCBhbmQgbm90IChsZW4oZ3JvdXApPT0xIGFuZCBncm91cFswXVswXSA9PSAnZXF1YWwnKToKICAgICAgICAgICAgeWllbGQgZ3JvdXAKCiAgICBkZWYgcmF0aW8oc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGEgbWVhc3VyZSBvZiB0aGUgc2VxdWVuY2VzJyBzaW1pbGFyaXR5IChmbG9hdCBpbiBbMCwxXSkuCgogICAgICAgIFdoZXJlIFQgaXMgdGhlIHRvdGFsIG51bWJlciBvZiBlbGVtZW50cyBpbiBib3RoIHNlcXVlbmNlcywgYW5kCiAgICAgICAgTSBpcyB0aGUgbnVtYmVyIG9mIG1hdGNoZXMsIHRoaXMgaXMgMi4wKk0gLyBULgogICAgICAgIE5vdGUgdGhhdCB0aGlzIGlzIDEgaWYgdGhlIHNlcXVlbmNlcyBhcmUgaWRlbnRpY2FsLCBhbmQgMCBpZgogICAgICAgIHRoZXkgaGF2ZSBub3RoaW5nIGluIGNvbW1vbi4KCiAgICAgICAgLnJhdGlvKCkgaXMgZXhwZW5zaXZlIHRvIGNvbXB1dGUgaWYgeW91IGhhdmVuJ3QgYWxyZWFkeSBjb21wdXRlZAogICAgICAgIC5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkgb3IgLmdldF9vcGNvZGVzKCksIGluIHdoaWNoIGNhc2UgeW91IG1heQogICAgICAgIHdhbnQgdG8gdHJ5IC5xdWlja19yYXRpbygpIG9yIC5yZWFsX3F1aWNrX3JhdGlvKCkgZmlyc3QgdG8gZ2V0IGFuCiAgICAgICAgdXBwZXIgYm91bmQuCgogICAgICAgID4+PiBzID0gU2VxdWVuY2VNYXRjaGVyKE5vbmUsICJhYmNkIiwgImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAwLjc1CiAgICAgICAgPj4+IHMucXVpY2tfcmF0aW8oKQogICAgICAgIDAuNzUKICAgICAgICA+Pj4gcy5yZWFsX3F1aWNrX3JhdGlvKCkKICAgICAgICAxLjAKICAgICAgICAiIiIKCiAgICAgICAgbWF0Y2hlcyA9IHN1bSh0cmlwbGVbLTFdIGZvciB0cmlwbGUgaW4gc2VsZi5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkpCiAgICAgICAgcmV0dXJuIF9jYWxjdWxhdGVfcmF0aW8obWF0Y2hlcywgbGVuKHNlbGYuYSkgKyBsZW4oc2VsZi5iKSkKCiAgICBkZWYgcXVpY2tfcmF0aW8oc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGFuIHVwcGVyIGJvdW5kIG9uIHJhdGlvKCkgcmVsYXRpdmVseSBxdWlja2x5LgoKICAgICAgICBUaGlzIGlzbid0IGRlZmluZWQgYmV5b25kIHRoYXQgaXQgaXMgYW4gdXBwZXIgYm91bmQgb24gLnJhdGlvKCksIGFuZAogICAgICAgIGlzIGZhc3RlciB0byBjb21wdXRlLgogICAgICAgICIiIgoKICAgICAgICAjIHZpZXdpbmcgYSBhbmQgYiBhcyBtdWx0aXNldHMsIHNldCBtYXRjaGVzIHRvIHRoZSBjYXJkaW5hbGl0eQogICAgICAgICMgb2YgdGhlaXIgaW50ZXJzZWN0aW9uOyB0aGlzIGNvdW50cyB0aGUgbnVtYmVyIG9mIG1hdGNoZXMKICAgICAgICAjIHdpdGhvdXQgcmVnYXJkIHRvIG9yZGVyLCBzbyBpcyBjbGVhcmx5IGFuIHVwcGVyIGJvdW5kCiAgICAgICAgaWYgc2VsZi5mdWxsYmNvdW50IGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuZnVsbGJjb3VudCA9IGZ1bGxiY291bnQgPSB7fQogICAgICAgICAgICBmb3IgZWx0IGluIHNlbGYuYjoKICAgICAgICAgICAgICAgIGZ1bGxiY291bnRbZWx0XSA9IGZ1bGxiY291bnQuZ2V0KGVsdCwgMCkgKyAxCiAgICAgICAgZnVsbGJjb3VudCA9IHNlbGYuZnVsbGJjb3VudAogICAgICAgICMgYXZhaWxbeF0gaXMgdGhlIG51bWJlciBvZiB0aW1lcyB4IGFwcGVhcnMgaW4gJ2InIGxlc3MgdGhlCiAgICAgICAgIyBudW1iZXIgb2YgdGltZXMgd2UndmUgc2VlbiBpdCBpbiAnYScgc28gZmFyIC4uLiBraW5kYQogICAgICAgIGF2YWlsID0ge30KICAgICAgICBhdmFpbGhhcywgbWF0Y2hlcyA9IGF2YWlsLl9fY29udGFpbnNfXywgMAogICAgICAgIGZvciBlbHQgaW4gc2VsZi5hOgogICAgICAgICAgICBpZiBhdmFpbGhhcyhlbHQpOgogICAgICAgICAgICAgICAgbnVtYiA9IGF2YWlsW2VsdF0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG51bWIgPSBmdWxsYmNvdW50LmdldChlbHQsIDApCiAgICAgICAgICAgIGF2YWlsW2VsdF0gPSBudW1iIC0gMQogICAgICAgICAgICBpZiBudW1iID4gMDoKICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBtYXRjaGVzICsgMQogICAgICAgIHJldHVybiBfY2FsY3VsYXRlX3JhdGlvKG1hdGNoZXMsIGxlbihzZWxmLmEpICsgbGVuKHNlbGYuYikpCgogICAgZGVmIHJlYWxfcXVpY2tfcmF0aW8oc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGFuIHVwcGVyIGJvdW5kIG9uIHJhdGlvKCkgdmVyeSBxdWlja2x5LgoKICAgICAgICBUaGlzIGlzbid0IGRlZmluZWQgYmV5b25kIHRoYXQgaXQgaXMgYW4gdXBwZXIgYm91bmQgb24gLnJhdGlvKCksIGFuZAogICAgICAgIGlzIGZhc3RlciB0byBjb21wdXRlIHRoYW4gZWl0aGVyIC5yYXRpbygpIG9yIC5xdWlja19yYXRpbygpLgogICAgICAgICIiIgoKICAgICAgICBsYSwgbGIgPSBsZW4oc2VsZi5hKSwgbGVuKHNlbGYuYikKICAgICAgICAjIGNhbid0IGhhdmUgbW9yZSBtYXRjaGVzIHRoYW4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUKICAgICAgICAjIHNob3J0ZXIgc2VxdWVuY2UKICAgICAgICByZXR1cm4gX2NhbGN1bGF0ZV9yYXRpbyhtaW4obGEsIGxiKSwgbGEgKyBsYikKCmRlZiBnZXRfY2xvc2VfbWF0Y2hlcyh3b3JkLCBwb3NzaWJpbGl0aWVzLCBuPTMsIGN1dG9mZj0wLjYpOgogICAgIiIiVXNlIFNlcXVlbmNlTWF0Y2hlciB0byByZXR1cm4gbGlzdCBvZiB0aGUgYmVzdCAiZ29vZCBlbm91Z2giIG1hdGNoZXMuCgogICAgd29yZCBpcyBhIHNlcXVlbmNlIGZvciB3aGljaCBjbG9zZSBtYXRjaGVzIGFyZSBkZXNpcmVkICh0eXBpY2FsbHkgYQogICAgc3RyaW5nKS4KCiAgICBwb3NzaWJpbGl0aWVzIGlzIGEgbGlzdCBvZiBzZXF1ZW5jZXMgYWdhaW5zdCB3aGljaCB0byBtYXRjaCB3b3JkCiAgICAodHlwaWNhbGx5IGEgbGlzdCBvZiBzdHJpbmdzKS4KCiAgICBPcHRpb25hbCBhcmcgbiAoZGVmYXVsdCAzKSBpcyB0aGUgbWF4aW11bSBudW1iZXIgb2YgY2xvc2UgbWF0Y2hlcyB0bwogICAgcmV0dXJuLiAgbiBtdXN0IGJlID4gMC4KCiAgICBPcHRpb25hbCBhcmcgY3V0b2ZmIChkZWZhdWx0IDAuNikgaXMgYSBmbG9hdCBpbiBbMCwgMV0uICBQb3NzaWJpbGl0aWVzCiAgICB0aGF0IGRvbid0IHNjb3JlIGF0IGxlYXN0IHRoYXQgc2ltaWxhciB0byB3b3JkIGFyZSBpZ25vcmVkLgoKICAgIFRoZSBiZXN0IChubyBtb3JlIHRoYW4gbikgbWF0Y2hlcyBhbW9uZyB0aGUgcG9zc2liaWxpdGllcyBhcmUgcmV0dXJuZWQKICAgIGluIGEgbGlzdCwgc29ydGVkIGJ5IHNpbWlsYXJpdHkgc2NvcmUsIG1vc3Qgc2ltaWxhciBmaXJzdC4KCiAgICA+Pj4gZ2V0X2Nsb3NlX21hdGNoZXMoImFwcGVsIiwgWyJhcGUiLCAiYXBwbGUiLCAicGVhY2giLCAicHVwcHkiXSkKICAgIFsnYXBwbGUnLCAnYXBlJ10KICAgID4+PiBpbXBvcnQga2V5d29yZCBhcyBfa2V5d29yZAogICAgPj4+IGdldF9jbG9zZV9tYXRjaGVzKCJ3aGVlbCIsIF9rZXl3b3JkLmt3bGlzdCkKICAgIFsnd2hpbGUnXQogICAgPj4+IGdldF9jbG9zZV9tYXRjaGVzKCJBcHBsZSIsIF9rZXl3b3JkLmt3bGlzdCkKICAgIFtdCiAgICA+Pj4gZ2V0X2Nsb3NlX21hdGNoZXMoImFjY2VwdCIsIF9rZXl3b3JkLmt3bGlzdCkKICAgIFsnZXhjZXB0J10KICAgICIiIgoKICAgIGlmIG5vdCBuID4gIDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibiBtdXN0IGJlID4gMDogJXIiICUgKG4sKSkKICAgIGlmIG5vdCAwLjAgPD0gY3V0b2ZmIDw9IDEuMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJjdXRvZmYgbXVzdCBiZSBpbiBbMC4wLCAxLjBdOiAlciIgJSAoY3V0b2ZmLCkpCiAgICByZXN1bHQgPSBbXQogICAgcyA9IFNlcXVlbmNlTWF0Y2hlcigpCiAgICBzLnNldF9zZXEyKHdvcmQpCiAgICBmb3IgeCBpbiBwb3NzaWJpbGl0aWVzOgogICAgICAgIHMuc2V0X3NlcTEoeCkKICAgICAgICBpZiBzLnJlYWxfcXVpY2tfcmF0aW8oKSA+PSBjdXRvZmYgYW5kIFwKICAgICAgICAgICBzLnF1aWNrX3JhdGlvKCkgPj0gY3V0b2ZmIGFuZCBcCiAgICAgICAgICAgcy5yYXRpbygpID49IGN1dG9mZjoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgocy5yYXRpbygpLCB4KSkKCiAgICAjIE1vdmUgdGhlIGJlc3Qgc2NvcmVycyB0byBoZWFkIG9mIGxpc3QKICAgIHJlc3VsdCA9IGhlYXBxLm5sYXJnZXN0KG4sIHJlc3VsdCkKICAgICMgU3RyaXAgc2NvcmVzIGZvciB0aGUgYmVzdCBuIG1hdGNoZXMKICAgIHJldHVybiBbeCBmb3Igc2NvcmUsIHggaW4gcmVzdWx0XQoKZGVmIF9jb3VudF9sZWFkaW5nKGxpbmUsIGNoKToKICAgICIiIgogICAgUmV0dXJuIG51bWJlciBvZiBgY2hgIGNoYXJhY3RlcnMgYXQgdGhlIHN0YXJ0IG9mIGBsaW5lYC4KCiAgICBFeGFtcGxlOgoKICAgID4+PiBfY291bnRfbGVhZGluZygnICAgYWJjJywgJyAnKQogICAgMwogICAgIiIiCgogICAgaSwgbiA9IDAsIGxlbihsaW5lKQogICAgd2hpbGUgaSA8IG4gYW5kIGxpbmVbaV0gPT0gY2g6CiAgICAgICAgaSArPSAxCiAgICByZXR1cm4gaQoKY2xhc3MgRGlmZmVyOgogICAgciIiIgogICAgRGlmZmVyIGlzIGEgY2xhc3MgZm9yIGNvbXBhcmluZyBzZXF1ZW5jZXMgb2YgbGluZXMgb2YgdGV4dCwgYW5kCiAgICBwcm9kdWNpbmcgaHVtYW4tcmVhZGFibGUgZGlmZmVyZW5jZXMgb3IgZGVsdGFzLiAgRGlmZmVyIHVzZXMKICAgIFNlcXVlbmNlTWF0Y2hlciBib3RoIHRvIGNvbXBhcmUgc2VxdWVuY2VzIG9mIGxpbmVzLCBhbmQgdG8gY29tcGFyZQogICAgc2VxdWVuY2VzIG9mIGNoYXJhY3RlcnMgd2l0aGluIHNpbWlsYXIgKG5lYXItbWF0Y2hpbmcpIGxpbmVzLgoKICAgIEVhY2ggbGluZSBvZiBhIERpZmZlciBkZWx0YSBiZWdpbnMgd2l0aCBhIHR3by1sZXR0ZXIgY29kZToKCiAgICAgICAgJy0gJyAgICBsaW5lIHVuaXF1ZSB0byBzZXF1ZW5jZSAxCiAgICAgICAgJysgJyAgICBsaW5lIHVuaXF1ZSB0byBzZXF1ZW5jZSAyCiAgICAgICAgJyAgJyAgICBsaW5lIGNvbW1vbiB0byBib3RoIHNlcXVlbmNlcwogICAgICAgICc/ICcgICAgbGluZSBub3QgcHJlc2VudCBpbiBlaXRoZXIgaW5wdXQgc2VxdWVuY2UKCiAgICBMaW5lcyBiZWdpbm5pbmcgd2l0aCAnPyAnIGF0dGVtcHQgdG8gZ3VpZGUgdGhlIGV5ZSB0byBpbnRyYWxpbmUKICAgIGRpZmZlcmVuY2VzLCBhbmQgd2VyZSBub3QgcHJlc2VudCBpbiBlaXRoZXIgaW5wdXQgc2VxdWVuY2UuICBUaGVzZSBsaW5lcwogICAgY2FuIGJlIGNvbmZ1c2luZyBpZiB0aGUgc2VxdWVuY2VzIGNvbnRhaW4gdGFiIGNoYXJhY3RlcnMuCgogICAgTm90ZSB0aGF0IERpZmZlciBtYWtlcyBubyBjbGFpbSB0byBwcm9kdWNlIGEgKm1pbmltYWwqIGRpZmYuICBUbyB0aGUKICAgIGNvbnRyYXJ5LCBtaW5pbWFsIGRpZmZzIGFyZSBvZnRlbiBjb3VudGVyLWludHVpdGl2ZSwgYmVjYXVzZSB0aGV5IHN5bmNoCiAgICB1cCBhbnl3aGVyZSBwb3NzaWJsZSwgc29tZXRpbWVzIGFjY2lkZW50YWwgbWF0Y2hlcyAxMDAgcGFnZXMgYXBhcnQuCiAgICBSZXN0cmljdGluZyBzeW5jaCBwb2ludHMgdG8gY29udGlndW91cyBtYXRjaGVzIHByZXNlcnZlcyBzb21lIG5vdGlvbiBvZgogICAgbG9jYWxpdHksIGF0IHRoZSBvY2Nhc2lvbmFsIGNvc3Qgb2YgcHJvZHVjaW5nIGEgbG9uZ2VyIGRpZmYuCgogICAgRXhhbXBsZTogQ29tcGFyaW5nIHR3byB0ZXh0cy4KCiAgICBGaXJzdCB3ZSBzZXQgdXAgdGhlIHRleHRzLCBzZXF1ZW5jZXMgb2YgaW5kaXZpZHVhbCBzaW5nbGUtbGluZSBzdHJpbmdzCiAgICBlbmRpbmcgd2l0aCBuZXdsaW5lcyAoc3VjaCBzZXF1ZW5jZXMgY2FuIGFsc28gYmUgb2J0YWluZWQgZnJvbSB0aGUKICAgIGByZWFkbGluZXMoKWAgbWV0aG9kIG9mIGZpbGUtbGlrZSBvYmplY3RzKToKCiAgICA+Pj4gdGV4dDEgPSAnJycgIDEuIEJlYXV0aWZ1bCBpcyBiZXR0ZXIgdGhhbiB1Z2x5LgogICAgLi4uICAgMi4gRXhwbGljaXQgaXMgYmV0dGVyIHRoYW4gaW1wbGljaXQuCiAgICAuLi4gICAzLiBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgIC4uLiAgIDQuIENvbXBsZXggaXMgYmV0dGVyIHRoYW4gY29tcGxpY2F0ZWQuCiAgICAuLi4gJycnLnNwbGl0bGluZXMoa2VlcGVuZHM9VHJ1ZSkKICAgID4+PiBsZW4odGV4dDEpCiAgICA0CiAgICA+Pj4gdGV4dDFbMF1bLTFdCiAgICAnXG4nCiAgICA+Pj4gdGV4dDIgPSAnJycgIDEuIEJlYXV0aWZ1bCBpcyBiZXR0ZXIgdGhhbiB1Z2x5LgogICAgLi4uICAgMy4gICBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgIC4uLiAgIDQuIENvbXBsaWNhdGVkIGlzIGJldHRlciB0aGFuIGNvbXBsZXguCiAgICAuLi4gICA1LiBGbGF0IGlzIGJldHRlciB0aGFuIG5lc3RlZC4KICAgIC4uLiAnJycuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKQoKICAgIE5leHQgd2UgaW5zdGFudGlhdGUgYSBEaWZmZXIgb2JqZWN0OgoKICAgID4+PiBkID0gRGlmZmVyKCkKCiAgICBOb3RlIHRoYXQgd2hlbiBpbnN0YW50aWF0aW5nIGEgRGlmZmVyIG9iamVjdCB3ZSBtYXkgcGFzcyBmdW5jdGlvbnMgdG8KICAgIGZpbHRlciBvdXQgbGluZSBhbmQgY2hhcmFjdGVyICdqdW5rJy4gIFNlZSBEaWZmZXIuX19pbml0X18gZm9yIGRldGFpbHMuCgogICAgRmluYWxseSwgd2UgY29tcGFyZSB0aGUgdHdvOgoKICAgID4+PiByZXN1bHQgPSBsaXN0KGQuY29tcGFyZSh0ZXh0MSwgdGV4dDIpKQoKICAgICdyZXN1bHQnIGlzIGEgbGlzdCBvZiBzdHJpbmdzLCBzbyBsZXQncyBwcmV0dHktcHJpbnQgaXQ6CgogICAgPj4+IGZyb20gcHByaW50IGltcG9ydCBwcHJpbnQgYXMgX3BwcmludAogICAgPj4+IF9wcHJpbnQocmVzdWx0KQogICAgWycgICAgMS4gQmVhdXRpZnVsIGlzIGJldHRlciB0aGFuIHVnbHkuXG4nLAogICAgICctICAgMi4gRXhwbGljaXQgaXMgYmV0dGVyIHRoYW4gaW1wbGljaXQuXG4nLAogICAgICctICAgMy4gU2ltcGxlIGlzIGJldHRlciB0aGFuIGNvbXBsZXguXG4nLAogICAgICcrICAgMy4gICBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC5cbicsCiAgICAgJz8gICAgICsrXG4nLAogICAgICctICAgNC4gQ29tcGxleCBpcyBiZXR0ZXIgdGhhbiBjb21wbGljYXRlZC5cbicsCiAgICAgJz8gICAgICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgLS0tLSBeXG4nLAogICAgICcrICAgNC4gQ29tcGxpY2F0ZWQgaXMgYmV0dGVyIHRoYW4gY29tcGxleC5cbicsCiAgICAgJz8gICAgICAgICAgICsrKysgXiAgICAgICAgICAgICAgICAgICAgICBeXG4nLAogICAgICcrICAgNS4gRmxhdCBpcyBiZXR0ZXIgdGhhbiBuZXN0ZWQuXG4nXQoKICAgIEFzIGEgc2luZ2xlIG11bHRpLWxpbmUgc3RyaW5nIGl0IGxvb2tzIGxpa2UgdGhpczoKCiAgICA+Pj4gcHJpbnQoJycuam9pbihyZXN1bHQpLCBlbmQ9IiIpCiAgICAgICAgMS4gQmVhdXRpZnVsIGlzIGJldHRlciB0aGFuIHVnbHkuCiAgICAtICAgMi4gRXhwbGljaXQgaXMgYmV0dGVyIHRoYW4gaW1wbGljaXQuCiAgICAtICAgMy4gU2ltcGxlIGlzIGJldHRlciB0aGFuIGNvbXBsZXguCiAgICArICAgMy4gICBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgID8gICAgICsrCiAgICAtICAgNC4gQ29tcGxleCBpcyBiZXR0ZXIgdGhhbiBjb21wbGljYXRlZC4KICAgID8gICAgICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgLS0tLSBeCiAgICArICAgNC4gQ29tcGxpY2F0ZWQgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgID8gICAgICAgICAgICsrKysgXiAgICAgICAgICAgICAgICAgICAgICBeCiAgICArICAgNS4gRmxhdCBpcyBiZXR0ZXIgdGhhbiBuZXN0ZWQuCgogICAgTWV0aG9kczoKCiAgICBfX2luaXRfXyhsaW5lanVuaz1Ob25lLCBjaGFyanVuaz1Ob25lKQogICAgICAgIENvbnN0cnVjdCBhIHRleHQgZGlmZmVyZW5jZXIsIHdpdGggb3B0aW9uYWwgZmlsdGVycy4KCiAgICBjb21wYXJlKGEsIGIpCiAgICAgICAgQ29tcGFyZSB0d28gc2VxdWVuY2VzIG9mIGxpbmVzOyBnZW5lcmF0ZSB0aGUgcmVzdWx0aW5nIGRlbHRhLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGxpbmVqdW5rPU5vbmUsIGNoYXJqdW5rPU5vbmUpOgogICAgICAgICIiIgogICAgICAgIENvbnN0cnVjdCBhIHRleHQgZGlmZmVyZW5jZXIsIHdpdGggb3B0aW9uYWwgZmlsdGVycy4KCiAgICAgICAgVGhlIHR3byBvcHRpb25hbCBrZXl3b3JkIHBhcmFtZXRlcnMgYXJlIGZvciBmaWx0ZXIgZnVuY3Rpb25zOgoKICAgICAgICAtIGBsaW5lanVua2A6IEEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYWNjZXB0IGEgc2luZ2xlIHN0cmluZyBhcmd1bWVudCwKICAgICAgICAgIGFuZCByZXR1cm4gdHJ1ZSBpZmYgdGhlIHN0cmluZyBpcyBqdW5rLiBUaGUgbW9kdWxlLWxldmVsIGZ1bmN0aW9uCiAgICAgICAgICBgSVNfTElORV9KVU5LYCBtYXkgYmUgdXNlZCB0byBmaWx0ZXIgb3V0IGxpbmVzIHdpdGhvdXQgdmlzaWJsZQogICAgICAgICAgY2hhcmFjdGVycywgZXhjZXB0IGZvciBhdCBtb3N0IG9uZSBzcGxhdCAoJyMnKS4gIEl0IGlzIHJlY29tbWVuZGVkCiAgICAgICAgICB0byBsZWF2ZSBsaW5lanVuayBOb25lOyBhcyBvZiBQeXRob24gMi4zLCB0aGUgdW5kZXJseWluZwogICAgICAgICAgU2VxdWVuY2VNYXRjaGVyIGNsYXNzIGhhcyBncm93biBhbiBhZGFwdGl2ZSBub3Rpb24gb2YgIm5vaXNlIiBsaW5lcwogICAgICAgICAgdGhhdCdzIGJldHRlciB0aGFuIGFueSBzdGF0aWMgZGVmaW5pdGlvbiB0aGUgYXV0aG9yIGhhcyBldmVyIGJlZW4KICAgICAgICAgIGFibGUgdG8gY3JhZnQuCgogICAgICAgIC0gYGNoYXJqdW5rYDogQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBhY2NlcHQgYSBzdHJpbmcgb2YgbGVuZ3RoIDEuIFRoZQogICAgICAgICAgbW9kdWxlLWxldmVsIGZ1bmN0aW9uIGBJU19DSEFSQUNURVJfSlVOS2AgbWF5IGJlIHVzZWQgdG8gZmlsdGVyIG91dAogICAgICAgICAgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIChhIGJsYW5rIG9yIHRhYjsgKipub3RlKio6IGJhZCBpZGVhIHRvIGluY2x1ZGUKICAgICAgICAgIG5ld2xpbmUgaW4gdGhpcyEpLiAgVXNlIG9mIElTX0NIQVJBQ1RFUl9KVU5LIGlzIHJlY29tbWVuZGVkLgogICAgICAgICIiIgoKICAgICAgICBzZWxmLmxpbmVqdW5rID0gbGluZWp1bmsKICAgICAgICBzZWxmLmNoYXJqdW5rID0gY2hhcmp1bmsKCiAgICBkZWYgY29tcGFyZShzZWxmLCBhLCBiKToKICAgICAgICByIiIiCiAgICAgICAgQ29tcGFyZSB0d28gc2VxdWVuY2VzIG9mIGxpbmVzOyBnZW5lcmF0ZSB0aGUgcmVzdWx0aW5nIGRlbHRhLgoKICAgICAgICBFYWNoIHNlcXVlbmNlIG11c3QgY29udGFpbiBpbmRpdmlkdWFsIHNpbmdsZS1saW5lIHN0cmluZ3MgZW5kaW5nIHdpdGgKICAgICAgICBuZXdsaW5lcy4gU3VjaCBzZXF1ZW5jZXMgY2FuIGJlIG9idGFpbmVkIGZyb20gdGhlIGByZWFkbGluZXMoKWAgbWV0aG9kCiAgICAgICAgb2YgZmlsZS1saWtlIG9iamVjdHMuICBUaGUgZGVsdGEgZ2VuZXJhdGVkIGFsc28gY29uc2lzdHMgb2YgbmV3bGluZS0KICAgICAgICB0ZXJtaW5hdGVkIHN0cmluZ3MsIHJlYWR5IHRvIGJlIHByaW50ZWQgYXMtaXMgdmlhIHRoZSB3cml0ZWxpbmUoKQogICAgICAgIG1ldGhvZCBvZiBhIGZpbGUtbGlrZSBvYmplY3QuCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgID4+PiBwcmludCgnJy5qb2luKERpZmZlcigpLmNvbXBhcmUoJ29uZVxudHdvXG50aHJlZVxuJy5zcGxpdGxpbmVzKFRydWUpLAogICAgICAgIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29yZVxudHJlZVxuZW11XG4nLnNwbGl0bGluZXMoVHJ1ZSkpKSwKICAgICAgICAuLi4gICAgICAgZW5kPSIiKQogICAgICAgIC0gb25lCiAgICAgICAgPyAgXgogICAgICAgICsgb3JlCiAgICAgICAgPyAgXgogICAgICAgIC0gdHdvCiAgICAgICAgLSB0aHJlZQogICAgICAgID8gIC0KICAgICAgICArIHRyZWUKICAgICAgICArIGVtdQogICAgICAgICIiIgoKICAgICAgICBjcnVuY2hlciA9IFNlcXVlbmNlTWF0Y2hlcihzZWxmLmxpbmVqdW5rLCBhLCBiKQogICAgICAgIGZvciB0YWcsIGFsbywgYWhpLCBibG8sIGJoaSBpbiBjcnVuY2hlci5nZXRfb3Bjb2RlcygpOgogICAgICAgICAgICBpZiB0YWcgPT0gJ3JlcGxhY2UnOgogICAgICAgICAgICAgICAgZyA9IHNlbGYuX2ZhbmN5X3JlcGxhY2UoYSwgYWxvLCBhaGksIGIsIGJsbywgYmhpKQogICAgICAgICAgICBlbGlmIHRhZyA9PSAnZGVsZXRlJzoKICAgICAgICAgICAgICAgIGcgPSBzZWxmLl9kdW1wKCctJywgYSwgYWxvLCBhaGkpCiAgICAgICAgICAgIGVsaWYgdGFnID09ICdpbnNlcnQnOgogICAgICAgICAgICAgICAgZyA9IHNlbGYuX2R1bXAoJysnLCBiLCBibG8sIGJoaSkKICAgICAgICAgICAgZWxpZiB0YWcgPT0gJ2VxdWFsJzoKICAgICAgICAgICAgICAgIGcgPSBzZWxmLl9kdW1wKCcgJywgYSwgYWxvLCBhaGkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCd1bmtub3duIHRhZyAlcicgJSAodGFnLCkpCgogICAgICAgICAgICBmb3IgbGluZSBpbiBnOgogICAgICAgICAgICAgICAgeWllbGQgbGluZQoKICAgIGRlZiBfZHVtcChzZWxmLCB0YWcsIHgsIGxvLCBoaSk6CiAgICAgICAgIiIiR2VuZXJhdGUgY29tcGFyaXNvbiByZXN1bHRzIGZvciBhIHNhbWUtdGFnZ2VkIHJhbmdlLiIiIgogICAgICAgIGZvciBpIGluIHJhbmdlKGxvLCBoaSk6CiAgICAgICAgICAgIHlpZWxkICclcyAlcycgJSAodGFnLCB4W2ldKQoKICAgIGRlZiBfcGxhaW5fcmVwbGFjZShzZWxmLCBhLCBhbG8sIGFoaSwgYiwgYmxvLCBiaGkpOgogICAgICAgIGFzc2VydCBhbG8gPCBhaGkgYW5kIGJsbyA8IGJoaQogICAgICAgICMgZHVtcCB0aGUgc2hvcnRlciBibG9jayBmaXJzdCAtLSByZWR1Y2VzIHRoZSBidXJkZW4gb24gc2hvcnQtdGVybQogICAgICAgICMgbWVtb3J5IGlmIHRoZSBibG9ja3MgYXJlIG9mIHZlcnkgZGlmZmVyZW50IHNpemVzCiAgICAgICAgaWYgYmhpIC0gYmxvIDwgYWhpIC0gYWxvOgogICAgICAgICAgICBmaXJzdCAgPSBzZWxmLl9kdW1wKCcrJywgYiwgYmxvLCBiaGkpCiAgICAgICAgICAgIHNlY29uZCA9IHNlbGYuX2R1bXAoJy0nLCBhLCBhbG8sIGFoaSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBmaXJzdCAgPSBzZWxmLl9kdW1wKCctJywgYSwgYWxvLCBhaGkpCiAgICAgICAgICAgIHNlY29uZCA9IHNlbGYuX2R1bXAoJysnLCBiLCBibG8sIGJoaSkKCiAgICAgICAgZm9yIGcgaW4gZmlyc3QsIHNlY29uZDoKICAgICAgICAgICAgZm9yIGxpbmUgaW4gZzoKICAgICAgICAgICAgICAgIHlpZWxkIGxpbmUKCiAgICBkZWYgX2ZhbmN5X3JlcGxhY2Uoc2VsZiwgYSwgYWxvLCBhaGksIGIsIGJsbywgYmhpKToKICAgICAgICByIiIiCiAgICAgICAgV2hlbiByZXBsYWNpbmcgb25lIGJsb2NrIG9mIGxpbmVzIHdpdGggYW5vdGhlciwgc2VhcmNoIHRoZSBibG9ja3MKICAgICAgICBmb3IgKnNpbWlsYXIqIGxpbmVzOyB0aGUgYmVzdC1tYXRjaGluZyBwYWlyIChpZiBhbnkpIGlzIHVzZWQgYXMgYQogICAgICAgIHN5bmNoIHBvaW50LCBhbmQgaW50cmFsaW5lIGRpZmZlcmVuY2UgbWFya2luZyBpcyBkb25lIG9uIHRoZQogICAgICAgIHNpbWlsYXIgcGFpci4gTG90cyBvZiB3b3JrLCBidXQgb2Z0ZW4gd29ydGggaXQuCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgID4+PiBkID0gRGlmZmVyKCkKICAgICAgICA+Pj4gcmVzdWx0cyA9IGQuX2ZhbmN5X3JlcGxhY2UoWydhYmNEZWZnaGlKa2xcbiddLCAwLCAxLAogICAgICAgIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ2FiY2RlZkdoaWprbFxuJ10sIDAsIDEpCiAgICAgICAgPj4+IHByaW50KCcnLmpvaW4ocmVzdWx0cyksIGVuZD0iIikKICAgICAgICAtIGFiY0RlZmdoaUprbAogICAgICAgID8gICAgXiAgXiAgXgogICAgICAgICsgYWJjZGVmR2hpamtsCiAgICAgICAgPyAgICBeICBeICBeCiAgICAgICAgIiIiCgogICAgICAgICMgZG9uJ3Qgc3luY2ggdXAgdW5sZXNzIHRoZSBsaW5lcyBoYXZlIGEgc2ltaWxhcml0eSBzY29yZSBvZiBhdAogICAgICAgICMgbGVhc3QgY3V0b2ZmOyBiZXN0X3JhdGlvIHRyYWNrcyB0aGUgYmVzdCBzY29yZSBzZWVuIHNvIGZhcgogICAgICAgIGJlc3RfcmF0aW8sIGN1dG9mZiA9IDAuNzQsIDAuNzUKICAgICAgICBjcnVuY2hlciA9IFNlcXVlbmNlTWF0Y2hlcihzZWxmLmNoYXJqdW5rKQogICAgICAgIGVxaSwgZXFqID0gTm9uZSwgTm9uZSAgICMgMXN0IGluZGljZXMgb2YgZXF1YWwgbGluZXMgKGlmIGFueSkKCiAgICAgICAgIyBzZWFyY2ggZm9yIHRoZSBwYWlyIHRoYXQgbWF0Y2hlcyBiZXN0IHdpdGhvdXQgYmVpbmcgaWRlbnRpY2FsCiAgICAgICAgIyAoaWRlbnRpY2FsIGxpbmVzIG11c3QgYmUganVuayBsaW5lcywgJiB3ZSBkb24ndCB3YW50IHRvIHN5bmNoIHVwCiAgICAgICAgIyBvbiBqdW5rIC0tIHVubGVzcyB3ZSBoYXZlIHRvKQogICAgICAgIGZvciBqIGluIHJhbmdlKGJsbywgYmhpKToKICAgICAgICAgICAgYmogPSBiW2pdCiAgICAgICAgICAgIGNydW5jaGVyLnNldF9zZXEyKGJqKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShhbG8sIGFoaSk6CiAgICAgICAgICAgICAgICBhaSA9IGFbaV0KICAgICAgICAgICAgICAgIGlmIGFpID09IGJqOgogICAgICAgICAgICAgICAgICAgIGlmIGVxaSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBlcWksIGVxaiA9IGksIGoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgY3J1bmNoZXIuc2V0X3NlcTEoYWkpCiAgICAgICAgICAgICAgICAjIGNvbXB1dGluZyBzaW1pbGFyaXR5IGlzIGV4cGVuc2l2ZSwgc28gdXNlIHRoZSBxdWljawogICAgICAgICAgICAgICAgIyB1cHBlciBib3VuZHMgZmlyc3QgLS0gaGF2ZSBzZWVuIHRoaXMgc3BlZWQgdXAgbWVzc3kKICAgICAgICAgICAgICAgICMgY29tcGFyZXMgYnkgYSBmYWN0b3Igb2YgMy4KICAgICAgICAgICAgICAgICMgbm90ZSB0aGF0IHJhdGlvKCkgaXMgb25seSBleHBlbnNpdmUgdG8gY29tcHV0ZSB0aGUgZmlyc3QKICAgICAgICAgICAgICAgICMgdGltZSBpdCdzIGNhbGxlZCBvbiBhIHNlcXVlbmNlIHBhaXI7IHRoZSBleHBlbnNpdmUgcGFydAogICAgICAgICAgICAgICAgIyBvZiB0aGUgY29tcHV0YXRpb24gaXMgY2FjaGVkIGJ5IGNydW5jaGVyCiAgICAgICAgICAgICAgICBpZiBjcnVuY2hlci5yZWFsX3F1aWNrX3JhdGlvKCkgPiBiZXN0X3JhdGlvIGFuZCBcCiAgICAgICAgICAgICAgICAgICAgICBjcnVuY2hlci5xdWlja19yYXRpbygpID4gYmVzdF9yYXRpbyBhbmQgXAogICAgICAgICAgICAgICAgICAgICAgY3J1bmNoZXIucmF0aW8oKSA+IGJlc3RfcmF0aW86CiAgICAgICAgICAgICAgICAgICAgYmVzdF9yYXRpbywgYmVzdF9pLCBiZXN0X2ogPSBjcnVuY2hlci5yYXRpbygpLCBpLCBqCiAgICAgICAgaWYgYmVzdF9yYXRpbyA8IGN1dG9mZjoKICAgICAgICAgICAgIyBubyBub24taWRlbnRpY2FsICJwcmV0dHkgY2xvc2UiIHBhaXIKICAgICAgICAgICAgaWYgZXFpIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjIG5vIGlkZW50aWNhbCBwYWlyIGVpdGhlciAtLSB0cmVhdCBpdCBhcyBhIHN0cmFpZ2h0IHJlcGxhY2UKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIHNlbGYuX3BsYWluX3JlcGxhY2UoYSwgYWxvLCBhaGksIGIsIGJsbywgYmhpKToKICAgICAgICAgICAgICAgICAgICB5aWVsZCBsaW5lCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgIyBubyBjbG9zZSBwYWlyLCBidXQgYW4gaWRlbnRpY2FsIHBhaXIgLS0gc3luY2ggdXAgb24gdGhhdAogICAgICAgICAgICBiZXN0X2ksIGJlc3RfaiwgYmVzdF9yYXRpbyA9IGVxaSwgZXFqLCAxLjAKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIHRoZXJlJ3MgYSBjbG9zZSBwYWlyLCBzbyBmb3JnZXQgdGhlIGlkZW50aWNhbCBwYWlyIChpZiBhbnkpCiAgICAgICAgICAgIGVxaSA9IE5vbmUKCiAgICAgICAgIyBhW2Jlc3RfaV0gdmVyeSBzaW1pbGFyIHRvIGJbYmVzdF9qXTsgZXFpIGlzIE5vbmUgaWZmIHRoZXkncmUgbm90CiAgICAgICAgIyBpZGVudGljYWwKCiAgICAgICAgIyBwdW1wIG91dCBkaWZmcyBmcm9tIGJlZm9yZSB0aGUgc3luY2ggcG9pbnQKICAgICAgICBmb3IgbGluZSBpbiBzZWxmLl9mYW5jeV9oZWxwZXIoYSwgYWxvLCBiZXN0X2ksIGIsIGJsbywgYmVzdF9qKToKICAgICAgICAgICAgeWllbGQgbGluZQoKICAgICAgICAjIGRvIGludHJhbGluZSBtYXJraW5nIG9uIHRoZSBzeW5jaCBwYWlyCiAgICAgICAgYWVsdCwgYmVsdCA9IGFbYmVzdF9pXSwgYltiZXN0X2pdCiAgICAgICAgaWYgZXFpIGlzIE5vbmU6CiAgICAgICAgICAgICMgcHVtcCBvdXQgYSAnLScsICc/JywgJysnLCAnPycgcXVhZCBmb3IgdGhlIHN5bmNoZWQgbGluZXMKICAgICAgICAgICAgYXRhZ3MgPSBidGFncyA9ICIiCiAgICAgICAgICAgIGNydW5jaGVyLnNldF9zZXFzKGFlbHQsIGJlbHQpCiAgICAgICAgICAgIGZvciB0YWcsIGFpMSwgYWkyLCBiajEsIGJqMiBpbiBjcnVuY2hlci5nZXRfb3Bjb2RlcygpOgogICAgICAgICAgICAgICAgbGEsIGxiID0gYWkyIC0gYWkxLCBiajIgLSBiajEKICAgICAgICAgICAgICAgIGlmIHRhZyA9PSAncmVwbGFjZSc6CiAgICAgICAgICAgICAgICAgICAgYXRhZ3MgKz0gJ14nICogbGEKICAgICAgICAgICAgICAgICAgICBidGFncyArPSAnXicgKiBsYgogICAgICAgICAgICAgICAgZWxpZiB0YWcgPT0gJ2RlbGV0ZSc6CiAgICAgICAgICAgICAgICAgICAgYXRhZ3MgKz0gJy0nICogbGEKICAgICAgICAgICAgICAgIGVsaWYgdGFnID09ICdpbnNlcnQnOgogICAgICAgICAgICAgICAgICAgIGJ0YWdzICs9ICcrJyAqIGxiCiAgICAgICAgICAgICAgICBlbGlmIHRhZyA9PSAnZXF1YWwnOgogICAgICAgICAgICAgICAgICAgIGF0YWdzICs9ICcgJyAqIGxhCiAgICAgICAgICAgICAgICAgICAgYnRhZ3MgKz0gJyAnICogbGIKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigndW5rbm93biB0YWcgJXInICUgKHRhZywpKQogICAgICAgICAgICBmb3IgbGluZSBpbiBzZWxmLl9xZm9ybWF0KGFlbHQsIGJlbHQsIGF0YWdzLCBidGFncyk6CiAgICAgICAgICAgICAgICB5aWVsZCBsaW5lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyB0aGUgc3luY2ggcGFpciBpcyBpZGVudGljYWwKICAgICAgICAgICAgeWllbGQgJyAgJyArIGFlbHQKCiAgICAgICAgIyBwdW1wIG91dCBkaWZmcyBmcm9tIGFmdGVyIHRoZSBzeW5jaCBwb2ludAogICAgICAgIGZvciBsaW5lIGluIHNlbGYuX2ZhbmN5X2hlbHBlcihhLCBiZXN0X2krMSwgYWhpLCBiLCBiZXN0X2orMSwgYmhpKToKICAgICAgICAgICAgeWllbGQgbGluZQoKICAgIGRlZiBfZmFuY3lfaGVscGVyKHNlbGYsIGEsIGFsbywgYWhpLCBiLCBibG8sIGJoaSk6CiAgICAgICAgZyA9IFtdCiAgICAgICAgaWYgYWxvIDwgYWhpOgogICAgICAgICAgICBpZiBibG8gPCBiaGk6CiAgICAgICAgICAgICAgICBnID0gc2VsZi5fZmFuY3lfcmVwbGFjZShhLCBhbG8sIGFoaSwgYiwgYmxvLCBiaGkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBnID0gc2VsZi5fZHVtcCgnLScsIGEsIGFsbywgYWhpKQogICAgICAgIGVsaWYgYmxvIDwgYmhpOgogICAgICAgICAgICBnID0gc2VsZi5fZHVtcCgnKycsIGIsIGJsbywgYmhpKQoKICAgICAgICBmb3IgbGluZSBpbiBnOgogICAgICAgICAgICB5aWVsZCBsaW5lCgogICAgZGVmIF9xZm9ybWF0KHNlbGYsIGFsaW5lLCBibGluZSwgYXRhZ3MsIGJ0YWdzKToKICAgICAgICByIiIiCiAgICAgICAgRm9ybWF0ICI/IiBvdXRwdXQgYW5kIGRlYWwgd2l0aCBsZWFkaW5nIHRhYnMuCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgID4+PiBkID0gRGlmZmVyKCkKICAgICAgICA+Pj4gcmVzdWx0cyA9IGQuX3Fmb3JtYXQoJ1x0YWJjRGVmZ2hpSmtsXG4nLCAnXHRhYmNkZWZHaGlqa2xcbicsCiAgICAgICAgLi4uICAgICAgICAgICAgICAgICAgICAgICcgIF4gXiAgXiAgICAgICcsICcgIF4gXiAgXiAgICAgICcpCiAgICAgICAgPj4+IGZvciBsaW5lIGluIHJlc3VsdHM6IHByaW50KHJlcHIobGluZSkpCiAgICAgICAgLi4uCiAgICAgICAgJy0gXHRhYmNEZWZnaGlKa2xcbicKICAgICAgICAnPyBcdCBeIF4gIF5cbicKICAgICAgICAnKyBcdGFiY2RlZkdoaWprbFxuJwogICAgICAgICc/IFx0IF4gXiAgXlxuJwogICAgICAgICIiIgoKICAgICAgICAjIENhbiBodXJ0LCBidXQgd2lsbCBwcm9iYWJseSBoZWxwIG1vc3Qgb2YgdGhlIHRpbWUuCiAgICAgICAgY29tbW9uID0gbWluKF9jb3VudF9sZWFkaW5nKGFsaW5lLCAiXHQiKSwKICAgICAgICAgICAgICAgICAgICAgX2NvdW50X2xlYWRpbmcoYmxpbmUsICJcdCIpKQogICAgICAgIGNvbW1vbiA9IG1pbihjb21tb24sIF9jb3VudF9sZWFkaW5nKGF0YWdzWzpjb21tb25dLCAiICIpKQogICAgICAgIGNvbW1vbiA9IG1pbihjb21tb24sIF9jb3VudF9sZWFkaW5nKGJ0YWdzWzpjb21tb25dLCAiICIpKQogICAgICAgIGF0YWdzID0gYXRhZ3NbY29tbW9uOl0ucnN0cmlwKCkKICAgICAgICBidGFncyA9IGJ0YWdzW2NvbW1vbjpdLnJzdHJpcCgpCgogICAgICAgIHlpZWxkICItICIgKyBhbGluZQogICAgICAgIGlmIGF0YWdzOgogICAgICAgICAgICB5aWVsZCAiPyAlcyVzXG4iICUgKCJcdCIgKiBjb21tb24sIGF0YWdzKQoKICAgICAgICB5aWVsZCAiKyAiICsgYmxpbmUKICAgICAgICBpZiBidGFnczoKICAgICAgICAgICAgeWllbGQgIj8gJXMlc1xuIiAlICgiXHQiICogY29tbW9uLCBidGFncykKCiMgV2l0aCByZXNwZWN0IHRvIGp1bmssIGFuIGVhcmxpZXIgdmVyc2lvbiBvZiBuZGlmZiBzaW1wbHkgcmVmdXNlZCB0bwojICpzdGFydCogYSBtYXRjaCB3aXRoIGEganVuayBlbGVtZW50LiAgVGhlIHJlc3VsdCB3YXMgY2FzZXMgbGlrZSB0aGlzOgojICAgICBiZWZvcmU6IHByaXZhdGUgVGhyZWFkIGN1cnJlbnRUaHJlYWQ7CiMgICAgIGFmdGVyOiAgcHJpdmF0ZSB2b2xhdGlsZSBUaHJlYWQgY3VycmVudFRocmVhZDsKIyBJZiB5b3UgY29uc2lkZXIgd2hpdGVzcGFjZSB0byBiZSBqdW5rLCB0aGUgbG9uZ2VzdCBjb250aWd1b3VzIG1hdGNoCiMgbm90IHN0YXJ0aW5nIHdpdGgganVuayBpcyAiZSBUaHJlYWQgY3VycmVudFRocmVhZCIuICBTbyBuZGlmZiByZXBvcnRlZAojIHRoYXQgImUgdm9sYXRpbCIgd2FzIGluc2VydGVkIGJldHdlZW4gdGhlICd0JyBhbmQgdGhlICdlJyBpbiAicHJpdmF0ZSIuCiMgV2hpbGUgYW4gYWNjdXJhdGUgdmlldywgdG8gcGVvcGxlIHRoYXQncyBhYnN1cmQuICBUaGUgY3VycmVudCB2ZXJzaW9uCiMgbG9va3MgZm9yIG1hdGNoaW5nIGJsb2NrcyB0aGF0IGFyZSBlbnRpcmVseSBqdW5rLWZyZWUsIHRoZW4gZXh0ZW5kcyB0aGUKIyBsb25nZXN0IG9uZSBvZiB0aG9zZSBhcyBmYXIgYXMgcG9zc2libGUgYnV0IG9ubHkgd2l0aCBtYXRjaGluZyBqdW5rLgojIFNvIG5vdyAiY3VycmVudFRocmVhZCIgaXMgbWF0Y2hlZCwgdGhlbiBleHRlbmRlZCB0byBzdWNrIHVwIHRoZQojIHByZWNlZGluZyBibGFuazsgdGhlbiAicHJpdmF0ZSIgaXMgbWF0Y2hlZCwgYW5kIGV4dGVuZGVkIHRvIHN1Y2sgdXAgdGhlCiMgZm9sbG93aW5nIGJsYW5rOyB0aGVuICJUaHJlYWQiIGlzIG1hdGNoZWQ7IGFuZCBmaW5hbGx5IG5kaWZmIHJlcG9ydHMKIyB0aGF0ICJ2b2xhdGlsZSAiIHdhcyBpbnNlcnRlZCBiZWZvcmUgIlRocmVhZCIuICBUaGUgb25seSBxdWliYmxlCiMgcmVtYWluaW5nIGlzIHRoYXQgcGVyaGFwcyBpdCB3YXMgcmVhbGx5IHRoZSBjYXNlIHRoYXQgIiB2b2xhdGlsZSIKIyB3YXMgaW5zZXJ0ZWQgYWZ0ZXIgInByaXZhdGUiLiAgSSBjYW4gbGl2ZSB3aXRoIHRoYXQgPHdpbms+LgoKaW1wb3J0IHJlCgpkZWYgSVNfTElORV9KVU5LKGxpbmUsIHBhdD1yZS5jb21waWxlKHIiXHMqIz9ccyokIikubWF0Y2gpOgogICAgciIiIgogICAgUmV0dXJuIDEgZm9yIGlnbm9yYWJsZSBsaW5lOiBpZmYgYGxpbmVgIGlzIGJsYW5rIG9yIGNvbnRhaW5zIGEgc2luZ2xlICcjJy4KCiAgICBFeGFtcGxlczoKCiAgICA+Pj4gSVNfTElORV9KVU5LKCdcbicpCiAgICBUcnVlCiAgICA+Pj4gSVNfTElORV9KVU5LKCcgICMgICBcbicpCiAgICBUcnVlCiAgICA+Pj4gSVNfTElORV9KVU5LKCdoZWxsb1xuJykKICAgIEZhbHNlCiAgICAiIiIKCiAgICByZXR1cm4gcGF0KGxpbmUpIGlzIG5vdCBOb25lCgpkZWYgSVNfQ0hBUkFDVEVSX0pVTksoY2gsIHdzPSIgXHQiKToKICAgIHIiIiIKICAgIFJldHVybiAxIGZvciBpZ25vcmFibGUgY2hhcmFjdGVyOiBpZmYgYGNoYCBpcyBhIHNwYWNlIG9yIHRhYi4KCiAgICBFeGFtcGxlczoKCiAgICA+Pj4gSVNfQ0hBUkFDVEVSX0pVTksoJyAnKQogICAgVHJ1ZQogICAgPj4+IElTX0NIQVJBQ1RFUl9KVU5LKCdcdCcpCiAgICBUcnVlCiAgICA+Pj4gSVNfQ0hBUkFDVEVSX0pVTksoJ1xuJykKICAgIEZhbHNlCiAgICA+Pj4gSVNfQ0hBUkFDVEVSX0pVTksoJ3gnKQogICAgRmFsc2UKICAgICIiIgoKICAgIHJldHVybiBjaCBpbiB3cwoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgIFVuaWZpZWQgRGlmZgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZiBfZm9ybWF0X3JhbmdlX3VuaWZpZWQoc3RhcnQsIHN0b3ApOgogICAgJ0NvbnZlcnQgcmFuZ2UgdG8gdGhlICJlZCIgZm9ybWF0JwogICAgIyBQZXIgdGhlIGRpZmYgc3BlYyBhdCBodHRwOi8vd3d3LnVuaXgub3JnL3NpbmdsZV91bml4X3NwZWNpZmljYXRpb24vCiAgICBiZWdpbm5pbmcgPSBzdGFydCArIDEgICAgICMgbGluZXMgc3RhcnQgbnVtYmVyaW5nIHdpdGggb25lCiAgICBsZW5ndGggPSBzdG9wIC0gc3RhcnQKICAgIGlmIGxlbmd0aCA9PSAxOgogICAgICAgIHJldHVybiAne30nLmZvcm1hdChiZWdpbm5pbmcpCiAgICBpZiBub3QgbGVuZ3RoOgogICAgICAgIGJlZ2lubmluZyAtPSAxICAgICAgICAjIGVtcHR5IHJhbmdlcyBiZWdpbiBhdCBsaW5lIGp1c3QgYmVmb3JlIHRoZSByYW5nZQogICAgcmV0dXJuICd7fSx7fScuZm9ybWF0KGJlZ2lubmluZywgbGVuZ3RoKQoKZGVmIHVuaWZpZWRfZGlmZihhLCBiLCBmcm9tZmlsZT0nJywgdG9maWxlPScnLCBmcm9tZmlsZWRhdGU9JycsCiAgICAgICAgICAgICAgICAgdG9maWxlZGF0ZT0nJywgbj0zLCBsaW5ldGVybT0nXG4nKToKICAgIHIiIiIKICAgIENvbXBhcmUgdHdvIHNlcXVlbmNlcyBvZiBsaW5lczsgZ2VuZXJhdGUgdGhlIGRlbHRhIGFzIGEgdW5pZmllZCBkaWZmLgoKICAgIFVuaWZpZWQgZGlmZnMgYXJlIGEgY29tcGFjdCB3YXkgb2Ygc2hvd2luZyBsaW5lIGNoYW5nZXMgYW5kIGEgZmV3CiAgICBsaW5lcyBvZiBjb250ZXh0LiAgVGhlIG51bWJlciBvZiBjb250ZXh0IGxpbmVzIGlzIHNldCBieSAnbicgd2hpY2gKICAgIGRlZmF1bHRzIHRvIHRocmVlLgoKICAgIEJ5IGRlZmF1bHQsIHRoZSBkaWZmIGNvbnRyb2wgbGluZXMgKHRob3NlIHdpdGggLS0tLCArKyssIG9yIEBAKSBhcmUKICAgIGNyZWF0ZWQgd2l0aCBhIHRyYWlsaW5nIG5ld2xpbmUuICBUaGlzIGlzIGhlbHBmdWwgc28gdGhhdCBpbnB1dHMKICAgIGNyZWF0ZWQgZnJvbSBmaWxlLnJlYWRsaW5lcygpIHJlc3VsdCBpbiBkaWZmcyB0aGF0IGFyZSBzdWl0YWJsZSBmb3IKICAgIGZpbGUud3JpdGVsaW5lcygpIHNpbmNlIGJvdGggdGhlIGlucHV0cyBhbmQgb3V0cHV0cyBoYXZlIHRyYWlsaW5nCiAgICBuZXdsaW5lcy4KCiAgICBGb3IgaW5wdXRzIHRoYXQgZG8gbm90IGhhdmUgdHJhaWxpbmcgbmV3bGluZXMsIHNldCB0aGUgbGluZXRlcm0KICAgIGFyZ3VtZW50IHRvICIiIHNvIHRoYXQgdGhlIG91dHB1dCB3aWxsIGJlIHVuaWZvcm1seSBuZXdsaW5lIGZyZWUuCgogICAgVGhlIHVuaWRpZmYgZm9ybWF0IG5vcm1hbGx5IGhhcyBhIGhlYWRlciBmb3IgZmlsZW5hbWVzIGFuZCBtb2RpZmljYXRpb24KICAgIHRpbWVzLiAgQW55IG9yIGFsbCBvZiB0aGVzZSBtYXkgYmUgc3BlY2lmaWVkIHVzaW5nIHN0cmluZ3MgZm9yCiAgICAnZnJvbWZpbGUnLCAndG9maWxlJywgJ2Zyb21maWxlZGF0ZScsIGFuZCAndG9maWxlZGF0ZScuCiAgICBUaGUgbW9kaWZpY2F0aW9uIHRpbWVzIGFyZSBub3JtYWxseSBleHByZXNzZWQgaW4gdGhlIElTTyA4NjAxIGZvcm1hdC4KCiAgICBFeGFtcGxlOgoKICAgID4+PiBmb3IgbGluZSBpbiB1bmlmaWVkX2RpZmYoJ29uZSB0d28gdGhyZWUgZm91cicuc3BsaXQoKSwKICAgIC4uLiAgICAgICAgICAgICAnemVybyBvbmUgdHJlZSBmb3VyJy5zcGxpdCgpLCAnT3JpZ2luYWwnLCAnQ3VycmVudCcsCiAgICAuLi4gICAgICAgICAgICAgJzIwMDUtMDEtMjYgMjM6MzA6NTAnLCAnMjAxMC0wNC0wMiAxMDoyMDo1MicsCiAgICAuLi4gICAgICAgICAgICAgbGluZXRlcm09JycpOgogICAgLi4uICAgICBwcmludChsaW5lKSAgICAgICAgICAgICAgICAgIyBkb2N0ZXN0OiArTk9STUFMSVpFX1dISVRFU1BBQ0UKICAgIC0tLSBPcmlnaW5hbCAgICAgICAgMjAwNS0wMS0yNiAyMzozMDo1MAogICAgKysrIEN1cnJlbnQgICAgICAgICAyMDEwLTA0LTAyIDEwOjIwOjUyCiAgICBAQCAtMSw0ICsxLDQgQEAKICAgICt6ZXJvCiAgICAgb25lCiAgICAtdHdvCiAgICAtdGhyZWUKICAgICt0cmVlCiAgICAgZm91cgogICAgIiIiCgogICAgc3RhcnRlZCA9IEZhbHNlCiAgICBmb3IgZ3JvdXAgaW4gU2VxdWVuY2VNYXRjaGVyKE5vbmUsYSxiKS5nZXRfZ3JvdXBlZF9vcGNvZGVzKG4pOgogICAgICAgIGlmIG5vdCBzdGFydGVkOgogICAgICAgICAgICBzdGFydGVkID0gVHJ1ZQogICAgICAgICAgICBmcm9tZGF0ZSA9ICdcdHt9Jy5mb3JtYXQoZnJvbWZpbGVkYXRlKSBpZiBmcm9tZmlsZWRhdGUgZWxzZSAnJwogICAgICAgICAgICB0b2RhdGUgPSAnXHR7fScuZm9ybWF0KHRvZmlsZWRhdGUpIGlmIHRvZmlsZWRhdGUgZWxzZSAnJwogICAgICAgICAgICB5aWVsZCAnLS0tIHt9e317fScuZm9ybWF0KGZyb21maWxlLCBmcm9tZGF0ZSwgbGluZXRlcm0pCiAgICAgICAgICAgIHlpZWxkICcrKysge317fXt9Jy5mb3JtYXQodG9maWxlLCB0b2RhdGUsIGxpbmV0ZXJtKQoKICAgICAgICBmaXJzdCwgbGFzdCA9IGdyb3VwWzBdLCBncm91cFstMV0KICAgICAgICBmaWxlMV9yYW5nZSA9IF9mb3JtYXRfcmFuZ2VfdW5pZmllZChmaXJzdFsxXSwgbGFzdFsyXSkKICAgICAgICBmaWxlMl9yYW5nZSA9IF9mb3JtYXRfcmFuZ2VfdW5pZmllZChmaXJzdFszXSwgbGFzdFs0XSkKICAgICAgICB5aWVsZCAnQEAgLXt9ICt7fSBAQHt9Jy5mb3JtYXQoZmlsZTFfcmFuZ2UsIGZpbGUyX3JhbmdlLCBsaW5ldGVybSkKCiAgICAgICAgZm9yIHRhZywgaTEsIGkyLCBqMSwgajIgaW4gZ3JvdXA6CiAgICAgICAgICAgIGlmIHRhZyA9PSAnZXF1YWwnOgogICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gYVtpMTppMl06CiAgICAgICAgICAgICAgICAgICAgeWllbGQgJyAnICsgbGluZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgaWYgdGFnIGluIHsncmVwbGFjZScsICdkZWxldGUnfToKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGFbaTE6aTJdOgogICAgICAgICAgICAgICAgICAgIHlpZWxkICctJyArIGxpbmUKICAgICAgICAgICAgaWYgdGFnIGluIHsncmVwbGFjZScsICdpbnNlcnQnfToKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGJbajE6ajJdOgogICAgICAgICAgICAgICAgICAgIHlpZWxkICcrJyArIGxpbmUKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjICBDb250ZXh0IERpZmYKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWYgX2Zvcm1hdF9yYW5nZV9jb250ZXh0KHN0YXJ0LCBzdG9wKToKICAgICdDb252ZXJ0IHJhbmdlIHRvIHRoZSAiZWQiIGZvcm1hdCcKICAgICMgUGVyIHRoZSBkaWZmIHNwZWMgYXQgaHR0cDovL3d3dy51bml4Lm9yZy9zaW5nbGVfdW5peF9zcGVjaWZpY2F0aW9uLwogICAgYmVnaW5uaW5nID0gc3RhcnQgKyAxICAgICAjIGxpbmVzIHN0YXJ0IG51bWJlcmluZyB3aXRoIG9uZQogICAgbGVuZ3RoID0gc3RvcCAtIHN0YXJ0CiAgICBpZiBub3QgbGVuZ3RoOgogICAgICAgIGJlZ2lubmluZyAtPSAxICAgICAgICAjIGVtcHR5IHJhbmdlcyBiZWdpbiBhdCBsaW5lIGp1c3QgYmVmb3JlIHRoZSByYW5nZQogICAgaWYgbGVuZ3RoIDw9IDE6CiAgICAgICAgcmV0dXJuICd7fScuZm9ybWF0KGJlZ2lubmluZykKICAgIHJldHVybiAne30se30nLmZvcm1hdChiZWdpbm5pbmcsIGJlZ2lubmluZyArIGxlbmd0aCAtIDEpCgojIFNlZSBodHRwOi8vd3d3LnVuaXgub3JnL3NpbmdsZV91bml4X3NwZWNpZmljYXRpb24vCmRlZiBjb250ZXh0X2RpZmYoYSwgYiwgZnJvbWZpbGU9JycsIHRvZmlsZT0nJywKICAgICAgICAgICAgICAgICBmcm9tZmlsZWRhdGU9JycsIHRvZmlsZWRhdGU9JycsIG49MywgbGluZXRlcm09J1xuJyk6CiAgICByIiIiCiAgICBDb21wYXJlIHR3byBzZXF1ZW5jZXMgb2YgbGluZXM7IGdlbmVyYXRlIHRoZSBkZWx0YSBhcyBhIGNvbnRleHQgZGlmZi4KCiAgICBDb250ZXh0IGRpZmZzIGFyZSBhIGNvbXBhY3Qgd2F5IG9mIHNob3dpbmcgbGluZSBjaGFuZ2VzIGFuZCBhIGZldwogICAgbGluZXMgb2YgY29udGV4dC4gIFRoZSBudW1iZXIgb2YgY29udGV4dCBsaW5lcyBpcyBzZXQgYnkgJ24nIHdoaWNoCiAgICBkZWZhdWx0cyB0byB0aHJlZS4KCiAgICBCeSBkZWZhdWx0LCB0aGUgZGlmZiBjb250cm9sIGxpbmVzICh0aG9zZSB3aXRoICoqKiBvciAtLS0pIGFyZQogICAgY3JlYXRlZCB3aXRoIGEgdHJhaWxpbmcgbmV3bGluZS4gIFRoaXMgaXMgaGVscGZ1bCBzbyB0aGF0IGlucHV0cwogICAgY3JlYXRlZCBmcm9tIGZpbGUucmVhZGxpbmVzKCkgcmVzdWx0IGluIGRpZmZzIHRoYXQgYXJlIHN1aXRhYmxlIGZvcgogICAgZmlsZS53cml0ZWxpbmVzKCkgc2luY2UgYm90aCB0aGUgaW5wdXRzIGFuZCBvdXRwdXRzIGhhdmUgdHJhaWxpbmcKICAgIG5ld2xpbmVzLgoKICAgIEZvciBpbnB1dHMgdGhhdCBkbyBub3QgaGF2ZSB0cmFpbGluZyBuZXdsaW5lcywgc2V0IHRoZSBsaW5ldGVybQogICAgYXJndW1lbnQgdG8gIiIgc28gdGhhdCB0aGUgb3V0cHV0IHdpbGwgYmUgdW5pZm9ybWx5IG5ld2xpbmUgZnJlZS4KCiAgICBUaGUgY29udGV4dCBkaWZmIGZvcm1hdCBub3JtYWxseSBoYXMgYSBoZWFkZXIgZm9yIGZpbGVuYW1lcyBhbmQKICAgIG1vZGlmaWNhdGlvbiB0aW1lcy4gIEFueSBvciBhbGwgb2YgdGhlc2UgbWF5IGJlIHNwZWNpZmllZCB1c2luZwogICAgc3RyaW5ncyBmb3IgJ2Zyb21maWxlJywgJ3RvZmlsZScsICdmcm9tZmlsZWRhdGUnLCBhbmQgJ3RvZmlsZWRhdGUnLgogICAgVGhlIG1vZGlmaWNhdGlvbiB0aW1lcyBhcmUgbm9ybWFsbHkgZXhwcmVzc2VkIGluIHRoZSBJU08gODYwMSBmb3JtYXQuCiAgICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgc3RyaW5ncyBkZWZhdWx0IHRvIGJsYW5rcy4KCiAgICBFeGFtcGxlOgoKICAgID4+PiBwcmludCgnJy5qb2luKGNvbnRleHRfZGlmZignb25lXG50d29cbnRocmVlXG5mb3VyXG4nLnNwbGl0bGluZXMoVHJ1ZSksCiAgICAuLi4gICAgICAgJ3plcm9cbm9uZVxudHJlZVxuZm91clxuJy5zcGxpdGxpbmVzKFRydWUpLCAnT3JpZ2luYWwnLCAnQ3VycmVudCcpKSwKICAgIC4uLiAgICAgICBlbmQ9IiIpCiAgICAqKiogT3JpZ2luYWwKICAgIC0tLSBDdXJyZW50CiAgICAqKioqKioqKioqKioqKioKICAgICoqKiAxLDQgKioqKgogICAgICBvbmUKICAgICEgdHdvCiAgICAhIHRocmVlCiAgICAgIGZvdXIKICAgIC0tLSAxLDQgLS0tLQogICAgKyB6ZXJvCiAgICAgIG9uZQogICAgISB0cmVlCiAgICAgIGZvdXIKICAgICIiIgoKICAgIHByZWZpeCA9IGRpY3QoaW5zZXJ0PScrICcsIGRlbGV0ZT0nLSAnLCByZXBsYWNlPSchICcsIGVxdWFsPScgICcpCiAgICBzdGFydGVkID0gRmFsc2UKICAgIGZvciBncm91cCBpbiBTZXF1ZW5jZU1hdGNoZXIoTm9uZSxhLGIpLmdldF9ncm91cGVkX29wY29kZXMobik6CiAgICAgICAgaWYgbm90IHN0YXJ0ZWQ6CiAgICAgICAgICAgIHN0YXJ0ZWQgPSBUcnVlCiAgICAgICAgICAgIGZyb21kYXRlID0gJ1x0e30nLmZvcm1hdChmcm9tZmlsZWRhdGUpIGlmIGZyb21maWxlZGF0ZSBlbHNlICcnCiAgICAgICAgICAgIHRvZGF0ZSA9ICdcdHt9Jy5mb3JtYXQodG9maWxlZGF0ZSkgaWYgdG9maWxlZGF0ZSBlbHNlICcnCiAgICAgICAgICAgIHlpZWxkICcqKioge317fXt9Jy5mb3JtYXQoZnJvbWZpbGUsIGZyb21kYXRlLCBsaW5ldGVybSkKICAgICAgICAgICAgeWllbGQgJy0tLSB7fXt9e30nLmZvcm1hdCh0b2ZpbGUsIHRvZGF0ZSwgbGluZXRlcm0pCgogICAgICAgIGZpcnN0LCBsYXN0ID0gZ3JvdXBbMF0sIGdyb3VwWy0xXQogICAgICAgIHlpZWxkICcqKioqKioqKioqKioqKionICsgbGluZXRlcm0KCiAgICAgICAgZmlsZTFfcmFuZ2UgPSBfZm9ybWF0X3JhbmdlX2NvbnRleHQoZmlyc3RbMV0sIGxhc3RbMl0pCiAgICAgICAgeWllbGQgJyoqKiB7fSAqKioqe30nLmZvcm1hdChmaWxlMV9yYW5nZSwgbGluZXRlcm0pCgogICAgICAgIGlmIGFueSh0YWcgaW4geydyZXBsYWNlJywgJ2RlbGV0ZSd9IGZvciB0YWcsIF8sIF8sIF8sIF8gaW4gZ3JvdXApOgogICAgICAgICAgICBmb3IgdGFnLCBpMSwgaTIsIF8sIF8gaW4gZ3JvdXA6CiAgICAgICAgICAgICAgICBpZiB0YWcgIT0gJ2luc2VydCc6CiAgICAgICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gYVtpMTppMl06CiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHByZWZpeFt0YWddICsgbGluZQoKICAgICAgICBmaWxlMl9yYW5nZSA9IF9mb3JtYXRfcmFuZ2VfY29udGV4dChmaXJzdFszXSwgbGFzdFs0XSkKICAgICAgICB5aWVsZCAnLS0tIHt9IC0tLS17fScuZm9ybWF0KGZpbGUyX3JhbmdlLCBsaW5ldGVybSkKCiAgICAgICAgaWYgYW55KHRhZyBpbiB7J3JlcGxhY2UnLCAnaW5zZXJ0J30gZm9yIHRhZywgXywgXywgXywgXyBpbiBncm91cCk6CiAgICAgICAgICAgIGZvciB0YWcsIF8sIF8sIGoxLCBqMiBpbiBncm91cDoKICAgICAgICAgICAgICAgIGlmIHRhZyAhPSAnZGVsZXRlJzoKICAgICAgICAgICAgICAgICAgICBmb3IgbGluZSBpbiBiW2oxOmoyXToKICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcHJlZml4W3RhZ10gKyBsaW5lCgpkZWYgbmRpZmYoYSwgYiwgbGluZWp1bms9Tm9uZSwgY2hhcmp1bms9SVNfQ0hBUkFDVEVSX0pVTkspOgogICAgciIiIgogICAgQ29tcGFyZSBgYWAgYW5kIGBiYCAobGlzdHMgb2Ygc3RyaW5ncyk7IHJldHVybiBhIGBEaWZmZXJgLXN0eWxlIGRlbHRhLgoKICAgIE9wdGlvbmFsIGtleXdvcmQgcGFyYW1ldGVycyBgbGluZWp1bmtgIGFuZCBgY2hhcmp1bmtgIGFyZSBmb3IgZmlsdGVyCiAgICBmdW5jdGlvbnMgKG9yIE5vbmUpOgoKICAgIC0gbGluZWp1bms6IEEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYWNjZXB0IGEgc2luZ2xlIHN0cmluZyBhcmd1bWVudCwgYW5kCiAgICAgIHJldHVybiB0cnVlIGlmZiB0aGUgc3RyaW5nIGlzIGp1bmsuICBUaGUgZGVmYXVsdCBpcyBOb25lLCBhbmQgaXMKICAgICAgcmVjb21tZW5kZWQ7IGFzIG9mIFB5dGhvbiAyLjMsIGFuIGFkYXB0aXZlIG5vdGlvbiBvZiAibm9pc2UiIGxpbmVzIGlzCiAgICAgIHVzZWQgdGhhdCBkb2VzIGEgZ29vZCBqb2Igb24gaXRzIG93bi4KCiAgICAtIGNoYXJqdW5rOiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGFjY2VwdCBhIHN0cmluZyBvZiBsZW5ndGggMS4gVGhlCiAgICAgIGRlZmF1bHQgaXMgbW9kdWxlLWxldmVsIGZ1bmN0aW9uIElTX0NIQVJBQ1RFUl9KVU5LLCB3aGljaCBmaWx0ZXJzIG91dAogICAgICB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgKGEgYmxhbmsgb3IgdGFiOyBub3RlOiBiYWQgaWRlYSB0byBpbmNsdWRlIG5ld2xpbmUKICAgICAgaW4gdGhpcyEpLgoKICAgIFRvb2xzL3NjcmlwdHMvbmRpZmYucHkgaXMgYSBjb21tYW5kLWxpbmUgZnJvbnQtZW5kIHRvIHRoaXMgZnVuY3Rpb24uCgogICAgRXhhbXBsZToKCiAgICA+Pj4gZGlmZiA9IG5kaWZmKCdvbmVcbnR3b1xudGhyZWVcbicuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKSwKICAgIC4uLiAgICAgICAgICAgICAgJ29yZVxudHJlZVxuZW11XG4nLnNwbGl0bGluZXMoa2VlcGVuZHM9VHJ1ZSkpCiAgICA+Pj4gcHJpbnQoJycuam9pbihkaWZmKSwgZW5kPSIiKQogICAgLSBvbmUKICAgID8gIF4KICAgICsgb3JlCiAgICA/ICBeCiAgICAtIHR3bwogICAgLSB0aHJlZQogICAgPyAgLQogICAgKyB0cmVlCiAgICArIGVtdQogICAgIiIiCiAgICByZXR1cm4gRGlmZmVyKGxpbmVqdW5rLCBjaGFyanVuaykuY29tcGFyZShhLCBiKQoKZGVmIF9tZGlmZihmcm9tbGluZXMsIHRvbGluZXMsIGNvbnRleHQ9Tm9uZSwgbGluZWp1bms9Tm9uZSwKICAgICAgICAgICBjaGFyanVuaz1JU19DSEFSQUNURVJfSlVOSyk6CiAgICByIiIiUmV0dXJucyBnZW5lcmF0b3IgeWllbGRpbmcgbWFya2VkIHVwIGZyb20vdG8gc2lkZSBieSBzaWRlIGRpZmZlcmVuY2VzLgoKICAgIEFyZ3VtZW50czoKICAgIGZyb21saW5lcyAtLSBsaXN0IG9mIHRleHQgbGluZXMgdG8gY29tcGFyZWQgdG8gdG9saW5lcwogICAgdG9saW5lcyAtLSBsaXN0IG9mIHRleHQgbGluZXMgdG8gYmUgY29tcGFyZWQgdG8gZnJvbWxpbmVzCiAgICBjb250ZXh0IC0tIG51bWJlciBvZiBjb250ZXh0IGxpbmVzIHRvIGRpc3BsYXkgb24gZWFjaCBzaWRlIG9mIGRpZmZlcmVuY2UsCiAgICAgICAgICAgICAgIGlmIE5vbmUsIGFsbCBmcm9tL3RvIHRleHQgbGluZXMgd2lsbCBiZSBnZW5lcmF0ZWQuCiAgICBsaW5lanVuayAtLSBwYXNzZWQgb24gdG8gbmRpZmYgKHNlZSBuZGlmZiBkb2N1bWVudGF0aW9uKQogICAgY2hhcmp1bmsgLS0gcGFzc2VkIG9uIHRvIG5kaWZmIChzZWUgbmRpZmYgZG9jdW1lbnRhdGlvbikKCiAgICBUaGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gaW50ZXJhdG9yIHdoaWNoIHJldHVybnMgYSB0dXBsZToKICAgIChmcm9tIGxpbmUgdHVwbGUsIHRvIGxpbmUgdHVwbGUsIGJvb2xlYW4gZmxhZykKCiAgICBmcm9tL3RvIGxpbmUgdHVwbGUgLS0gKGxpbmUgbnVtLCBsaW5lIHRleHQpCiAgICAgICAgbGluZSBudW0gLS0gaW50ZWdlciBvciBOb25lICh0byBpbmRpY2F0ZSBhIGNvbnRleHQgc2VwYXJhdGlvbikKICAgICAgICBsaW5lIHRleHQgLS0gb3JpZ2luYWwgbGluZSB0ZXh0IHdpdGggZm9sbG93aW5nIG1hcmtlcnMgaW5zZXJ0ZWQ6CiAgICAgICAgICAgICdcMCsnIC0tIG1hcmtzIHN0YXJ0IG9mIGFkZGVkIHRleHQKICAgICAgICAgICAgJ1wwLScgLS0gbWFya3Mgc3RhcnQgb2YgZGVsZXRlZCB0ZXh0CiAgICAgICAgICAgICdcMF4nIC0tIG1hcmtzIHN0YXJ0IG9mIGNoYW5nZWQgdGV4dAogICAgICAgICAgICAnXDEnIC0tIG1hcmtzIGVuZCBvZiBhZGRlZC9kZWxldGVkL2NoYW5nZWQgdGV4dAoKICAgIGJvb2xlYW4gZmxhZyAtLSBOb25lIGluZGljYXRlcyBjb250ZXh0IHNlcGFyYXRpb24sIFRydWUgaW5kaWNhdGVzCiAgICAgICAgZWl0aGVyICJmcm9tIiBvciAidG8iIGxpbmUgY29udGFpbnMgYSBjaGFuZ2UsIG90aGVyd2lzZSBGYWxzZS4KCiAgICBUaGlzIGZ1bmN0aW9uL2l0ZXJhdG9yIHdhcyBvcmlnaW5hbGx5IGRldmVsb3BlZCB0byBnZW5lcmF0ZSBzaWRlIGJ5IHNpZGUKICAgIGZpbGUgZGlmZmVyZW5jZSBmb3IgbWFraW5nIEhUTUwgcGFnZXMgKHNlZSBIdG1sRGlmZiBjbGFzcyBmb3IgZXhhbXBsZQogICAgdXNhZ2UpLgoKICAgIE5vdGUsIHRoaXMgZnVuY3Rpb24gdXRpbGl6ZXMgdGhlIG5kaWZmIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBzaWRlIGJ5CiAgICBzaWRlIGRpZmZlcmVuY2UgbWFya3VwLiAgT3B0aW9uYWwgbmRpZmYgYXJndW1lbnRzIG1heSBiZSBwYXNzZWQgdG8gdGhpcwogICAgZnVuY3Rpb24gYW5kIHRoZXkgaW4gdHVybiB3aWxsIGJlIHBhc3NlZCB0byBuZGlmZi4KICAgICIiIgogICAgaW1wb3J0IHJlCgogICAgIyByZWd1bGFyIGV4cHJlc3Npb24gZm9yIGZpbmRpbmcgaW50cmFsaW5lIGNoYW5nZSBpbmRpY2VzCiAgICBjaGFuZ2VfcmUgPSByZS5jb21waWxlKCcoXCsrfFwtK3xcXispJykKCiAgICAjIGNyZWF0ZSB0aGUgZGlmZmVyZW5jZSBpdGVyYXRvciB0byBnZW5lcmF0ZSB0aGUgZGlmZmVyZW5jZXMKICAgIGRpZmZfbGluZXNfaXRlcmF0b3IgPSBuZGlmZihmcm9tbGluZXMsdG9saW5lcyxsaW5lanVuayxjaGFyanVuaykKCiAgICBkZWYgX21ha2VfbGluZShsaW5lcywgZm9ybWF0X2tleSwgc2lkZSwgbnVtX2xpbmVzPVswLDBdKToKICAgICAgICAiIiJSZXR1cm5zIGxpbmUgb2YgdGV4dCB3aXRoIHVzZXIncyBjaGFuZ2UgbWFya3VwIGFuZCBsaW5lIGZvcm1hdHRpbmcuCgogICAgICAgIGxpbmVzIC0tIGxpc3Qgb2YgbGluZXMgZnJvbSB0aGUgbmRpZmYgZ2VuZXJhdG9yIHRvIHByb2R1Y2UgYSBsaW5lIG9mCiAgICAgICAgICAgICAgICAgdGV4dCBmcm9tLiAgV2hlbiBwcm9kdWNpbmcgdGhlIGxpbmUgb2YgdGV4dCB0byByZXR1cm4sIHRoZQogICAgICAgICAgICAgICAgIGxpbmVzIHVzZWQgYXJlIHJlbW92ZWQgZnJvbSB0aGlzIGxpc3QuCiAgICAgICAgZm9ybWF0X2tleSAtLSAnKycgcmV0dXJuIGZpcnN0IGxpbmUgaW4gbGlzdCB3aXRoICJhZGQiIG1hcmt1cCBhcm91bmQKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZW50aXJlIGxpbmUuCiAgICAgICAgICAgICAgICAgICAgICAnLScgcmV0dXJuIGZpcnN0IGxpbmUgaW4gbGlzdCB3aXRoICJkZWxldGUiIG1hcmt1cCBhcm91bmQKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZW50aXJlIGxpbmUuCiAgICAgICAgICAgICAgICAgICAgICAnPycgcmV0dXJuIGZpcnN0IGxpbmUgaW4gbGlzdCB3aXRoIGFkZC9kZWxldGUvY2hhbmdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW50cmFsaW5lIG1hcmt1cCAoaW5kaWNlcyBvYnRhaW5lZCBmcm9tIHNlY29uZCBsaW5lKQogICAgICAgICAgICAgICAgICAgICAgTm9uZSByZXR1cm4gZmlyc3QgbGluZSBpbiBsaXN0IHdpdGggbm8gbWFya3VwCiAgICAgICAgc2lkZSAtLSBpbmRpY2UgaW50byB0aGUgbnVtX2xpbmVzIGxpc3QgKDA9ZnJvbSwxPXRvKQogICAgICAgIG51bV9saW5lcyAtLSBmcm9tL3RvIGN1cnJlbnQgbGluZSBudW1iZXIuICBUaGlzIGlzIE5PVCBpbnRlbmRlZCB0byBiZSBhCiAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCBwYXJhbWV0ZXIuICBJdCBpcyBwcmVzZW50IGFzIGEga2V5d29yZCBhcmd1bWVudCB0bwogICAgICAgICAgICAgICAgICAgICBtYWludGFpbiBtZW1vcnkgb2YgdGhlIGN1cnJlbnQgbGluZSBudW1iZXJzIGJldHdlZW4gY2FsbHMKICAgICAgICAgICAgICAgICAgICAgb2YgdGhpcyBmdW5jdGlvbi4KCiAgICAgICAgTm90ZSwgdGhpcyBmdW5jdGlvbiBpcyBwdXJwb3NlZnVsbHkgbm90IGRlZmluZWQgYXQgdGhlIG1vZHVsZSBzY29wZSBzbwogICAgICAgIHRoYXQgZGF0YSBpdCBuZWVkcyBmcm9tIGl0cyBwYXJlbnQgZnVuY3Rpb24gKHdpdGhpbiB3aG9zZSBjb250ZXh0IGl0CiAgICAgICAgaXMgZGVmaW5lZCkgZG9lcyBub3QgbmVlZCB0byBiZSBvZiBtb2R1bGUgc2NvcGUuCiAgICAgICAgIiIiCiAgICAgICAgbnVtX2xpbmVzW3NpZGVdICs9IDEKICAgICAgICAjIEhhbmRsZSBjYXNlIHdoZXJlIG5vIHVzZXIgbWFya3VwIGlzIHRvIGJlIGFkZGVkLCBqdXN0IHJldHVybiBsaW5lIG9mCiAgICAgICAgIyB0ZXh0IHdpdGggdXNlcidzIGxpbmUgZm9ybWF0IHRvIGFsbG93IGZvciB1c2FnZSBvZiB0aGUgbGluZSBudW1iZXIuCiAgICAgICAgaWYgZm9ybWF0X2tleSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKG51bV9saW5lc1tzaWRlXSxsaW5lcy5wb3AoMClbMjpdKQogICAgICAgICMgSGFuZGxlIGNhc2Ugb2YgaW50cmFsaW5lIGNoYW5nZXMKICAgICAgICBpZiBmb3JtYXRfa2V5ID09ICc/JzoKICAgICAgICAgICAgdGV4dCwgbWFya2VycyA9IGxpbmVzLnBvcCgwKSwgbGluZXMucG9wKDApCiAgICAgICAgICAgICMgZmluZCBpbnRyYWxpbmUgY2hhbmdlcyAoc3RvcmUgY2hhbmdlIHR5cGUgYW5kIGluZGljZXMgaW4gdHVwbGVzKQogICAgICAgICAgICBzdWJfaW5mbyA9IFtdCiAgICAgICAgICAgIGRlZiByZWNvcmRfc3ViX2luZm8obWF0Y2hfb2JqZWN0LHN1Yl9pbmZvPXN1Yl9pbmZvKToKICAgICAgICAgICAgICAgIHN1Yl9pbmZvLmFwcGVuZChbbWF0Y2hfb2JqZWN0Lmdyb3VwKDEpWzBdLG1hdGNoX29iamVjdC5zcGFuKCldKQogICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoX29iamVjdC5ncm91cCgxKQogICAgICAgICAgICBjaGFuZ2VfcmUuc3ViKHJlY29yZF9zdWJfaW5mbyxtYXJrZXJzKQogICAgICAgICAgICAjIHByb2Nlc3MgZWFjaCB0dXBsZSBpbnNlcnRpbmcgb3VyIHNwZWNpYWwgbWFya3MgdGhhdCB3b24ndCBiZQogICAgICAgICAgICAjIG5vdGljZWQgYnkgYW4geG1sL2h0bWwgZXNjYXBlci4KICAgICAgICAgICAgZm9yIGtleSwoYmVnaW4sZW5kKSBpbiBzdWJfaW5mb1s6Oi0xXToKICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0WzA6YmVnaW5dKydcMCcra2V5K3RleHRbYmVnaW46ZW5kXSsnXDEnK3RleHRbZW5kOl0KICAgICAgICAgICAgdGV4dCA9IHRleHRbMjpdCiAgICAgICAgIyBIYW5kbGUgY2FzZSBvZiBhZGQvZGVsZXRlIGVudGlyZSBsaW5lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdGV4dCA9IGxpbmVzLnBvcCgwKVsyOl0KICAgICAgICAgICAgIyBpZiBsaW5lIG9mIHRleHQgaXMganVzdCBhIG5ld2xpbmUsIGluc2VydCBhIHNwYWNlIHNvIHRoZXJlIGlzCiAgICAgICAgICAgICMgc29tZXRoaW5nIGZvciB0aGUgdXNlciB0byBoaWdobGlnaHQgYW5kIHNlZS4KICAgICAgICAgICAgaWYgbm90IHRleHQ6CiAgICAgICAgICAgICAgICB0ZXh0ID0gJyAnCiAgICAgICAgICAgICMgaW5zZXJ0IG1hcmtzIHRoYXQgd29uJ3QgYmUgbm90aWNlZCBieSBhbiB4bWwvaHRtbCBlc2NhcGVyLgogICAgICAgICAgICB0ZXh0ID0gJ1wwJyArIGZvcm1hdF9rZXkgKyB0ZXh0ICsgJ1wxJwogICAgICAgICMgUmV0dXJuIGxpbmUgb2YgdGV4dCwgZmlyc3QgYWxsb3cgdXNlcidzIGxpbmUgZm9ybWF0dGVyIHRvIGRvIGl0cwogICAgICAgICMgdGhpbmcgKHN1Y2ggYXMgYWRkaW5nIHRoZSBsaW5lIG51bWJlcikgdGhlbiByZXBsYWNlIHRoZSBzcGVjaWFsCiAgICAgICAgIyBtYXJrcyB3aXRoIHdoYXQgdGhlIHVzZXIncyBjaGFuZ2UgbWFya3VwLgogICAgICAgIHJldHVybiAobnVtX2xpbmVzW3NpZGVdLHRleHQpCgogICAgZGVmIF9saW5lX2l0ZXJhdG9yKCk6CiAgICAgICAgIiIiWWllbGRzIGZyb20vdG8gbGluZXMgb2YgdGV4dCB3aXRoIGEgY2hhbmdlIGluZGljYXRpb24uCgogICAgICAgIFRoaXMgZnVuY3Rpb24gaXMgYW4gaXRlcmF0b3IuICBJdCBpdHNlbGYgcHVsbHMgbGluZXMgZnJvbSBhCiAgICAgICAgZGlmZmVyZW5jaW5nIGl0ZXJhdG9yLCBwcm9jZXNzZXMgdGhlbSBhbmQgeWllbGRzIHRoZW0uICBXaGVuIGl0IGNhbgogICAgICAgIGl0IHlpZWxkcyBib3RoIGEgImZyb20iIGFuZCBhICJ0byIgbGluZSwgb3RoZXJ3aXNlIGl0IHdpbGwgeWllbGQgb25lCiAgICAgICAgb3IgdGhlIG90aGVyLiAgSW4gYWRkaXRpb24gdG8geWllbGRpbmcgdGhlIGxpbmVzIG9mIGZyb20vdG8gdGV4dCwgYQogICAgICAgIGJvb2xlYW4gZmxhZyBpcyB5aWVsZGVkIHRvIGluZGljYXRlIGlmIHRoZSB0ZXh0IGxpbmUocykgaGF2ZQogICAgICAgIGRpZmZlcmVuY2VzIGluIHRoZW0uCgogICAgICAgIE5vdGUsIHRoaXMgZnVuY3Rpb24gaXMgcHVycG9zZWZ1bGx5IG5vdCBkZWZpbmVkIGF0IHRoZSBtb2R1bGUgc2NvcGUgc28KICAgICAgICB0aGF0IGRhdGEgaXQgbmVlZHMgZnJvbSBpdHMgcGFyZW50IGZ1bmN0aW9uICh3aXRoaW4gd2hvc2UgY29udGV4dCBpdAogICAgICAgIGlzIGRlZmluZWQpIGRvZXMgbm90IG5lZWQgdG8gYmUgb2YgbW9kdWxlIHNjb3BlLgogICAgICAgICIiIgogICAgICAgIGxpbmVzID0gW10KICAgICAgICBudW1fYmxhbmtzX3BlbmRpbmcsIG51bV9ibGFua3NfdG9feWllbGQgPSAwLCAwCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgIyBMb2FkIHVwIG5leHQgNCBsaW5lcyBzbyB3ZSBjYW4gbG9vayBhaGVhZCwgY3JlYXRlIHN0cmluZ3Mgd2hpY2gKICAgICAgICAgICAgIyBhcmUgYSBjb25jYXRlbmF0aW9uIG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgZWFjaCBvZiB0aGUgNCBsaW5lcwogICAgICAgICAgICAjIHNvIHdlIGNhbiBkbyBzb21lIHZlcnkgcmVhZGFibGUgY29tcGFyaXNvbnMuCiAgICAgICAgICAgIHdoaWxlIGxlbihsaW5lcykgPCA0OgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChuZXh0KGRpZmZfbGluZXNfaXRlcmF0b3IpKQogICAgICAgICAgICAgICAgZXhjZXB0IFN0b3BJdGVyYXRpb246CiAgICAgICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKCdYJykKICAgICAgICAgICAgcyA9ICcnLmpvaW4oW2xpbmVbMF0gZm9yIGxpbmUgaW4gbGluZXNdKQogICAgICAgICAgICBpZiBzLnN0YXJ0c3dpdGgoJ1gnKToKICAgICAgICAgICAgICAgICMgV2hlbiBubyBtb3JlIGxpbmVzLCBwdW1wIG91dCBhbnkgcmVtYWluaW5nIGJsYW5rIGxpbmVzIHNvIHRoZQogICAgICAgICAgICAgICAgIyBjb3JyZXNwb25kaW5nIGFkZC9kZWxldGUgbGluZXMgZ2V0IGEgbWF0Y2hpbmcgYmxhbmsgbGluZSBzbwogICAgICAgICAgICAgICAgIyBhbGwgbGluZSBwYWlycyBnZXQgeWllbGRlZCBhdCB0aGUgbmV4dCBsZXZlbC4KICAgICAgICAgICAgICAgIG51bV9ibGFua3NfdG9feWllbGQgPSBudW1fYmxhbmtzX3BlbmRpbmcKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJy0/Kz8nKToKICAgICAgICAgICAgICAgICMgc2ltcGxlIGludHJhbGluZSBjaGFuZ2UKICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2xpbmUobGluZXMsJz8nLDApLCBfbWFrZV9saW5lKGxpbmVzLCc/JywxKSwgVHJ1ZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJy0tKysnKToKICAgICAgICAgICAgICAgICMgaW4gZGVsZXRlIGJsb2NrLCBhZGQgYmxvY2sgY29taW5nOiB3ZSBkbyBOT1Qgd2FudCB0byBnZXQKICAgICAgICAgICAgICAgICMgY2F1Z2h0IHVwIG9uIGJsYW5rIGxpbmVzIHlldCwganVzdCBwcm9jZXNzIHRoZSBkZWxldGUgbGluZQogICAgICAgICAgICAgICAgbnVtX2JsYW5rc19wZW5kaW5nIC09IDEKICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2xpbmUobGluZXMsJy0nLDApLCBOb25lLCBUcnVlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHMuc3RhcnRzd2l0aCgoJy0tPysnLCAnLS0rJywgJy0gJykpOgogICAgICAgICAgICAgICAgIyBpbiBkZWxldGUgYmxvY2sgYW5kIHNlZSBhIGludHJhbGluZSBjaGFuZ2Ugb3IgdW5jaGFuZ2VkIGxpbmUKICAgICAgICAgICAgICAgICMgY29taW5nOiB5aWVsZCB0aGUgZGVsZXRlIGxpbmUgYW5kIHRoZW4gYmxhbmtzCiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsdG9fbGluZSA9IF9tYWtlX2xpbmUobGluZXMsJy0nLDApLCBOb25lCiAgICAgICAgICAgICAgICBudW1fYmxhbmtzX3RvX3lpZWxkLG51bV9ibGFua3NfcGVuZGluZyA9IG51bV9ibGFua3NfcGVuZGluZy0xLDAKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJy0rPycpOgogICAgICAgICAgICAgICAgIyBpbnRyYWxpbmUgY2hhbmdlCiAgICAgICAgICAgICAgICB5aWVsZCBfbWFrZV9saW5lKGxpbmVzLE5vbmUsMCksIF9tYWtlX2xpbmUobGluZXMsJz8nLDEpLCBUcnVlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHMuc3RhcnRzd2l0aCgnLT8rJyk6CiAgICAgICAgICAgICAgICAjIGludHJhbGluZSBjaGFuZ2UKICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2xpbmUobGluZXMsJz8nLDApLCBfbWFrZV9saW5lKGxpbmVzLE5vbmUsMSksIFRydWUKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsaWYgcy5zdGFydHN3aXRoKCctJyk6CiAgICAgICAgICAgICAgICAjIGRlbGV0ZSBGUk9NIGxpbmUKICAgICAgICAgICAgICAgIG51bV9ibGFua3NfcGVuZGluZyAtPSAxCiAgICAgICAgICAgICAgICB5aWVsZCBfbWFrZV9saW5lKGxpbmVzLCctJywwKSwgTm9uZSwgVHJ1ZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJystLScpOgogICAgICAgICAgICAgICAgIyBpbiBhZGQgYmxvY2ssIGRlbGV0ZSBibG9jayBjb21pbmc6IHdlIGRvIE5PVCB3YW50IHRvIGdldAogICAgICAgICAgICAgICAgIyBjYXVnaHQgdXAgb24gYmxhbmsgbGluZXMgeWV0LCBqdXN0IHByb2Nlc3MgdGhlIGFkZCBsaW5lCiAgICAgICAgICAgICAgICBudW1fYmxhbmtzX3BlbmRpbmcgKz0gMQogICAgICAgICAgICAgICAgeWllbGQgTm9uZSwgX21ha2VfbGluZShsaW5lcywnKycsMSksIFRydWUKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsaWYgcy5zdGFydHN3aXRoKCgnKyAnLCAnKy0nKSk6CiAgICAgICAgICAgICAgICAjIHdpbGwgYmUgbGVhdmluZyBhbiBhZGQgYmxvY2s6IHlpZWxkIGJsYW5rcyB0aGVuIGFkZCBsaW5lCiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUgPSBOb25lLCBfbWFrZV9saW5lKGxpbmVzLCcrJywxKQogICAgICAgICAgICAgICAgbnVtX2JsYW5rc190b195aWVsZCxudW1fYmxhbmtzX3BlbmRpbmcgPSBudW1fYmxhbmtzX3BlbmRpbmcrMSwwCiAgICAgICAgICAgIGVsaWYgcy5zdGFydHN3aXRoKCcrJyk6CiAgICAgICAgICAgICAgICAjIGluc2lkZSBhbiBhZGQgYmxvY2ssIHlpZWxkIHRoZSBhZGQgbGluZQogICAgICAgICAgICAgICAgbnVtX2JsYW5rc19wZW5kaW5nICs9IDEKICAgICAgICAgICAgICAgIHlpZWxkIE5vbmUsIF9tYWtlX2xpbmUobGluZXMsJysnLDEpLCBUcnVlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHMuc3RhcnRzd2l0aCgnICcpOgogICAgICAgICAgICAgICAgIyB1bmNoYW5nZWQgdGV4dCwgeWllbGQgaXQgdG8gYm90aCBzaWRlcwogICAgICAgICAgICAgICAgeWllbGQgX21ha2VfbGluZShsaW5lc1s6XSxOb25lLDApLF9tYWtlX2xpbmUobGluZXMsTm9uZSwxKSxGYWxzZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIyBDYXRjaCB1cCBvbiB0aGUgYmxhbmsgbGluZXMgc28gd2hlbiB3ZSB5aWVsZCB0aGUgbmV4dCBmcm9tL3RvCiAgICAgICAgICAgICMgcGFpciwgdGhleSBhcmUgbGluZWQgdXAuCiAgICAgICAgICAgIHdoaWxlKG51bV9ibGFua3NfdG9feWllbGQgPCAwKToKICAgICAgICAgICAgICAgIG51bV9ibGFua3NfdG9feWllbGQgKz0gMQogICAgICAgICAgICAgICAgeWllbGQgTm9uZSwoJycsJ1xuJyksVHJ1ZQogICAgICAgICAgICB3aGlsZShudW1fYmxhbmtzX3RvX3lpZWxkID4gMCk6CiAgICAgICAgICAgICAgICBudW1fYmxhbmtzX3RvX3lpZWxkIC09IDEKICAgICAgICAgICAgICAgIHlpZWxkICgnJywnXG4nKSxOb25lLFRydWUKICAgICAgICAgICAgaWYgcy5zdGFydHN3aXRoKCdYJyk6CiAgICAgICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB5aWVsZCBmcm9tX2xpbmUsdG9fbGluZSxUcnVlCgogICAgZGVmIF9saW5lX3BhaXJfaXRlcmF0b3IoKToKICAgICAgICAiIiJZaWVsZHMgZnJvbS90byBsaW5lcyBvZiB0ZXh0IHdpdGggYSBjaGFuZ2UgaW5kaWNhdGlvbi4KCiAgICAgICAgVGhpcyBmdW5jdGlvbiBpcyBhbiBpdGVyYXRvci4gIEl0IGl0c2VsZiBwdWxscyBsaW5lcyBmcm9tIHRoZSBsaW5lCiAgICAgICAgaXRlcmF0b3IuICBJdHMgZGlmZmVyZW5jZSBmcm9tIHRoYXQgaXRlcmF0b3IgaXMgdGhhdCB0aGlzIGZ1bmN0aW9uCiAgICAgICAgYWx3YXlzIHlpZWxkcyBhIHBhaXIgb2YgZnJvbS90byB0ZXh0IGxpbmVzICh3aXRoIHRoZSBjaGFuZ2UKICAgICAgICBpbmRpY2F0aW9uKS4gIElmIG5lY2Vzc2FyeSBpdCB3aWxsIGNvbGxlY3Qgc2luZ2xlIGZyb20vdG8gbGluZXMKICAgICAgICB1bnRpbCBpdCBoYXMgYSBtYXRjaGluZyBwYWlyIGZyb20vdG8gcGFpciB0byB5aWVsZC4KCiAgICAgICAgTm90ZSwgdGhpcyBmdW5jdGlvbiBpcyBwdXJwb3NlZnVsbHkgbm90IGRlZmluZWQgYXQgdGhlIG1vZHVsZSBzY29wZSBzbwogICAgICAgIHRoYXQgZGF0YSBpdCBuZWVkcyBmcm9tIGl0cyBwYXJlbnQgZnVuY3Rpb24gKHdpdGhpbiB3aG9zZSBjb250ZXh0IGl0CiAgICAgICAgaXMgZGVmaW5lZCkgZG9lcyBub3QgbmVlZCB0byBiZSBvZiBtb2R1bGUgc2NvcGUuCiAgICAgICAgIiIiCiAgICAgICAgbGluZV9pdGVyYXRvciA9IF9saW5lX2l0ZXJhdG9yKCkKICAgICAgICBmcm9tbGluZXMsdG9saW5lcz1bXSxbXQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICMgQ29sbGVjdGluZyBsaW5lcyBvZiB0ZXh0IHVudGlsIHdlIGhhdmUgYSBmcm9tL3RvIHBhaXIKICAgICAgICAgICAgd2hpbGUgKGxlbihmcm9tbGluZXMpPT0wIG9yIGxlbih0b2xpbmVzKT09MCk6CiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYgPSBuZXh0KGxpbmVfaXRlcmF0b3IpCiAgICAgICAgICAgICAgICBpZiBmcm9tX2xpbmUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgZnJvbWxpbmVzLmFwcGVuZCgoZnJvbV9saW5lLGZvdW5kX2RpZmYpKQogICAgICAgICAgICAgICAgaWYgdG9fbGluZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICB0b2xpbmVzLmFwcGVuZCgodG9fbGluZSxmb3VuZF9kaWZmKSkKICAgICAgICAgICAgIyBPbmNlIHdlIGhhdmUgYSBwYWlyLCByZW1vdmUgdGhlbSBmcm9tIHRoZSBjb2xsZWN0aW9uIGFuZCB5aWVsZCBpdAogICAgICAgICAgICBmcm9tX2xpbmUsIGZyb21EaWZmID0gZnJvbWxpbmVzLnBvcCgwKQogICAgICAgICAgICB0b19saW5lLCB0b19kaWZmID0gdG9saW5lcy5wb3AoMCkKICAgICAgICAgICAgeWllbGQgKGZyb21fbGluZSx0b19saW5lLGZyb21EaWZmIG9yIHRvX2RpZmYpCgogICAgIyBIYW5kbGUgY2FzZSB3aGVyZSB1c2VyIGRvZXMgbm90IHdhbnQgY29udGV4dCBkaWZmZXJlbmNpbmcsIGp1c3QgeWllbGQKICAgICMgdGhlbSB1cCB3aXRob3V0IGRvaW5nIGFueXRoaW5nIGVsc2Ugd2l0aCB0aGVtLgogICAgbGluZV9wYWlyX2l0ZXJhdG9yID0gX2xpbmVfcGFpcl9pdGVyYXRvcigpCiAgICBpZiBjb250ZXh0IGlzIE5vbmU6CiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgeWllbGQgbmV4dChsaW5lX3BhaXJfaXRlcmF0b3IpCiAgICAjIEhhbmRsZSBjYXNlIHdoZXJlIHVzZXIgd2FudHMgY29udGV4dCBkaWZmZXJlbmNpbmcuICBXZSBtdXN0IGRvIHNvbWUKICAgICMgc3RvcmFnZSBvZiBsaW5lcyB1bnRpbCB3ZSBrbm93IGZvciBzdXJlIHRoYXQgdGhleSBhcmUgdG8gYmUgeWllbGRlZC4KICAgIGVsc2U6CiAgICAgICAgY29udGV4dCArPSAxCiAgICAgICAgbGluZXNfdG9fd3JpdGUgPSAwCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgIyBTdG9yZSBsaW5lcyB1cCB1bnRpbCB3ZSBmaW5kIGEgZGlmZmVyZW5jZSwgbm90ZSB1c2Ugb2YgYQogICAgICAgICAgICAjIGNpcmN1bGFyIHF1ZXVlIGJlY2F1c2Ugd2Ugb25seSBuZWVkIHRvIGtlZXAgYXJvdW5kIHdoYXQKICAgICAgICAgICAgIyB3ZSBuZWVkIGZvciBjb250ZXh0LgogICAgICAgICAgICBpbmRleCwgY29udGV4dExpbmVzID0gMCwgW05vbmVdKihjb250ZXh0KQogICAgICAgICAgICBmb3VuZF9kaWZmID0gRmFsc2UKICAgICAgICAgICAgd2hpbGUoZm91bmRfZGlmZiBpcyBGYWxzZSk6CiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYgPSBuZXh0KGxpbmVfcGFpcl9pdGVyYXRvcikKICAgICAgICAgICAgICAgIGkgPSBpbmRleCAlIGNvbnRleHQKICAgICAgICAgICAgICAgIGNvbnRleHRMaW5lc1tpXSA9IChmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYpCiAgICAgICAgICAgICAgICBpbmRleCArPSAxCiAgICAgICAgICAgICMgWWllbGQgbGluZXMgdGhhdCB3ZSBoYXZlIGNvbGxlY3RlZCBzbyBmYXIsIGJ1dCBmaXJzdCB5aWVsZAogICAgICAgICAgICAjIHRoZSB1c2VyJ3Mgc2VwYXJhdG9yLgogICAgICAgICAgICBpZiBpbmRleCA+IGNvbnRleHQ6CiAgICAgICAgICAgICAgICB5aWVsZCBOb25lLCBOb25lLCBOb25lCiAgICAgICAgICAgICAgICBsaW5lc190b193cml0ZSA9IGNvbnRleHQKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGxpbmVzX3RvX3dyaXRlID0gaW5kZXgKICAgICAgICAgICAgICAgIGluZGV4ID0gMAogICAgICAgICAgICB3aGlsZShsaW5lc190b193cml0ZSk6CiAgICAgICAgICAgICAgICBpID0gaW5kZXggJSBjb250ZXh0CiAgICAgICAgICAgICAgICBpbmRleCArPSAxCiAgICAgICAgICAgICAgICB5aWVsZCBjb250ZXh0TGluZXNbaV0KICAgICAgICAgICAgICAgIGxpbmVzX3RvX3dyaXRlIC09IDEKICAgICAgICAgICAgIyBOb3cgeWllbGQgdGhlIGNvbnRleHQgbGluZXMgYWZ0ZXIgdGhlIGNoYW5nZQogICAgICAgICAgICBsaW5lc190b193cml0ZSA9IGNvbnRleHQtMQogICAgICAgICAgICB3aGlsZShsaW5lc190b193cml0ZSk6CiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYgPSBuZXh0KGxpbmVfcGFpcl9pdGVyYXRvcikKICAgICAgICAgICAgICAgICMgSWYgYW5vdGhlciBjaGFuZ2Ugd2l0aGluIHRoZSBjb250ZXh0LCBleHRlbmQgdGhlIGNvbnRleHQKICAgICAgICAgICAgICAgIGlmIGZvdW5kX2RpZmY6CiAgICAgICAgICAgICAgICAgICAgbGluZXNfdG9fd3JpdGUgPSBjb250ZXh0LTEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbGluZXNfdG9fd3JpdGUgLT0gMQogICAgICAgICAgICAgICAgeWllbGQgZnJvbV9saW5lLCB0b19saW5lLCBmb3VuZF9kaWZmCgoKX2ZpbGVfdGVtcGxhdGUgPSAiIiIKPCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgVHJhbnNpdGlvbmFsLy9FTiIKICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS10cmFuc2l0aW9uYWwuZHRkIj4KCjxodG1sPgoKPGhlYWQ+CiAgICA8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiCiAgICAgICAgICBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9SVNPLTg4NTktMSIgLz4KICAgIDx0aXRsZT48L3RpdGxlPgogICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4lKHN0eWxlcylzCiAgICA8L3N0eWxlPgo8L2hlYWQ+Cgo8Ym9keT4KICAgICUodGFibGUpcyUobGVnZW5kKXMKPC9ib2R5PgoKPC9odG1sPiIiIgoKX3N0eWxlcyA9ICIiIgogICAgICAgIHRhYmxlLmRpZmYge2ZvbnQtZmFtaWx5OkNvdXJpZXI7IGJvcmRlcjptZWRpdW07fQogICAgICAgIC5kaWZmX2hlYWRlciB7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfQogICAgICAgIHRkLmRpZmZfaGVhZGVyIHt0ZXh0LWFsaWduOnJpZ2h0fQogICAgICAgIC5kaWZmX25leHQge2JhY2tncm91bmQtY29sb3I6I2MwYzBjMH0KICAgICAgICAuZGlmZl9hZGQge2JhY2tncm91bmQtY29sb3I6I2FhZmZhYX0KICAgICAgICAuZGlmZl9jaGcge2JhY2tncm91bmQtY29sb3I6I2ZmZmY3N30KICAgICAgICAuZGlmZl9zdWIge2JhY2tncm91bmQtY29sb3I6I2ZmYWFhYX0iIiIKCl90YWJsZV90ZW1wbGF0ZSA9ICIiIgogICAgPHRhYmxlIGNsYXNzPSJkaWZmIiBpZD0iZGlmZmxpYl9jaGdfJShwcmVmaXgpc190b3AiCiAgICAgICAgICAgY2VsbHNwYWNpbmc9IjAiIGNlbGxwYWRkaW5nPSIwIiBydWxlcz0iZ3JvdXBzIiA+CiAgICAgICAgPGNvbGdyb3VwPjwvY29sZ3JvdXA+IDxjb2xncm91cD48L2NvbGdyb3VwPiA8Y29sZ3JvdXA+PC9jb2xncm91cD4KICAgICAgICA8Y29sZ3JvdXA+PC9jb2xncm91cD4gPGNvbGdyb3VwPjwvY29sZ3JvdXA+IDxjb2xncm91cD48L2NvbGdyb3VwPgogICAgICAgICUoaGVhZGVyX3JvdylzCiAgICAgICAgPHRib2R5PgolKGRhdGFfcm93cylzICAgICAgICA8L3Rib2R5PgogICAgPC90YWJsZT4iIiIKCl9sZWdlbmQgPSAiIiIKICAgIDx0YWJsZSBjbGFzcz0iZGlmZiIgc3VtbWFyeT0iTGVnZW5kcyI+CiAgICAgICAgPHRyPiA8dGggY29sc3Bhbj0iMiI+IExlZ2VuZHMgPC90aD4gPC90cj4KICAgICAgICA8dHI+IDx0ZD4gPHRhYmxlIGJvcmRlcj0iIiBzdW1tYXJ5PSJDb2xvcnMiPgogICAgICAgICAgICAgICAgICAgICAgPHRyPjx0aD4gQ29sb3JzIDwvdGg+IDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJkaWZmX2FkZCI+Jm5ic3A7QWRkZWQmbmJzcDs8L3RkPjwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJkaWZmX2NoZyI+Q2hhbmdlZDwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJkaWZmX3N1YiI+RGVsZXRlZDwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgIDwvdGFibGU+PC90ZD4KICAgICAgICAgICAgIDx0ZD4gPHRhYmxlIGJvcmRlcj0iIiBzdW1tYXJ5PSJMaW5rcyI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRoIGNvbHNwYW49IjIiPiBMaW5rcyA8L3RoPiA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZD4oZilpcnN0IGNoYW5nZTwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkPihuKWV4dCBjaGFuZ2U8L3RkPiA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZD4odClvcDwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgIDwvdGFibGU+PC90ZD4gPC90cj4KICAgIDwvdGFibGU+IiIiCgpjbGFzcyBIdG1sRGlmZihvYmplY3QpOgogICAgIiIiRm9yIHByb2R1Y2luZyBIVE1MIHNpZGUgYnkgc2lkZSBjb21wYXJpc29uIHdpdGggY2hhbmdlIGhpZ2hsaWdodHMuCgogICAgVGhpcyBjbGFzcyBjYW4gYmUgdXNlZCB0byBjcmVhdGUgYW4gSFRNTCB0YWJsZSAob3IgYSBjb21wbGV0ZSBIVE1MIGZpbGUKICAgIGNvbnRhaW5pbmcgdGhlIHRhYmxlKSBzaG93aW5nIGEgc2lkZSBieSBzaWRlLCBsaW5lIGJ5IGxpbmUgY29tcGFyaXNvbgogICAgb2YgdGV4dCB3aXRoIGludGVyLWxpbmUgYW5kIGludHJhLWxpbmUgY2hhbmdlIGhpZ2hsaWdodHMuICBUaGUgdGFibGUgY2FuCiAgICBiZSBnZW5lcmF0ZWQgaW4gZWl0aGVyIGZ1bGwgb3IgY29udGV4dHVhbCBkaWZmZXJlbmNlIG1vZGUuCgogICAgVGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSBwcm92aWRlZCBmb3IgSFRNTCBnZW5lcmF0aW9uOgoKICAgIG1ha2VfdGFibGUgLS0gZ2VuZXJhdGVzIEhUTUwgZm9yIGEgc2luZ2xlIHNpZGUgYnkgc2lkZSB0YWJsZQogICAgbWFrZV9maWxlIC0tIGdlbmVyYXRlcyBjb21wbGV0ZSBIVE1MIGZpbGUgd2l0aCBhIHNpbmdsZSBzaWRlIGJ5IHNpZGUgdGFibGUKCiAgICBTZWUgdG9vbHMvc2NyaXB0cy9kaWZmLnB5IGZvciBhbiBleGFtcGxlIHVzYWdlIG9mIHRoaXMgY2xhc3MuCiAgICAiIiIKCiAgICBfZmlsZV90ZW1wbGF0ZSA9IF9maWxlX3RlbXBsYXRlCiAgICBfc3R5bGVzID0gX3N0eWxlcwogICAgX3RhYmxlX3RlbXBsYXRlID0gX3RhYmxlX3RlbXBsYXRlCiAgICBfbGVnZW5kID0gX2xlZ2VuZAogICAgX2RlZmF1bHRfcHJlZml4ID0gMAoKICAgIGRlZiBfX2luaXRfXyhzZWxmLHRhYnNpemU9OCx3cmFwY29sdW1uPU5vbmUsbGluZWp1bms9Tm9uZSwKICAgICAgICAgICAgICAgICBjaGFyanVuaz1JU19DSEFSQUNURVJfSlVOSyk6CiAgICAgICAgIiIiSHRtbERpZmYgaW5zdGFuY2UgaW5pdGlhbGl6ZXIKCiAgICAgICAgQXJndW1lbnRzOgogICAgICAgIHRhYnNpemUgLS0gdGFiIHN0b3Agc3BhY2luZywgZGVmYXVsdHMgdG8gOC4KICAgICAgICB3cmFwY29sdW1uIC0tIGNvbHVtbiBudW1iZXIgd2hlcmUgbGluZXMgYXJlIGJyb2tlbiBhbmQgd3JhcHBlZCwKICAgICAgICAgICAgZGVmYXVsdHMgdG8gTm9uZSB3aGVyZSBsaW5lcyBhcmUgbm90IHdyYXBwZWQuCiAgICAgICAgbGluZWp1bmssY2hhcmp1bmsgLS0ga2V5d29yZCBhcmd1bWVudHMgcGFzc2VkIGludG8gbmRpZmYoKSAodXNlZCB0byBieQogICAgICAgICAgICBIdG1sRGlmZigpIHRvIGdlbmVyYXRlIHRoZSBzaWRlIGJ5IHNpZGUgSFRNTCBkaWZmZXJlbmNlcykuICBTZWUKICAgICAgICAgICAgbmRpZmYoKSBkb2N1bWVudGF0aW9uIGZvciBhcmd1bWVudCBkZWZhdWx0IHZhbHVlcyBhbmQgZGVzY3JpcHRpb25zLgogICAgICAgICIiIgogICAgICAgIHNlbGYuX3RhYnNpemUgPSB0YWJzaXplCiAgICAgICAgc2VsZi5fd3JhcGNvbHVtbiA9IHdyYXBjb2x1bW4KICAgICAgICBzZWxmLl9saW5lanVuayA9IGxpbmVqdW5rCiAgICAgICAgc2VsZi5fY2hhcmp1bmsgPSBjaGFyanVuawoKICAgIGRlZiBtYWtlX2ZpbGUoc2VsZixmcm9tbGluZXMsdG9saW5lcyxmcm9tZGVzYz0nJyx0b2Rlc2M9JycsY29udGV4dD1GYWxzZSwKICAgICAgICAgICAgICAgICAgbnVtbGluZXM9NSk6CiAgICAgICAgIiIiUmV0dXJucyBIVE1MIGZpbGUgb2Ygc2lkZSBieSBzaWRlIGNvbXBhcmlzb24gd2l0aCBjaGFuZ2UgaGlnaGxpZ2h0cwoKICAgICAgICBBcmd1bWVudHM6CiAgICAgICAgZnJvbWxpbmVzIC0tIGxpc3Qgb2YgImZyb20iIGxpbmVzCiAgICAgICAgdG9saW5lcyAtLSBsaXN0IG9mICJ0byIgbGluZXMKICAgICAgICBmcm9tZGVzYyAtLSAiZnJvbSIgZmlsZSBjb2x1bW4gaGVhZGVyIHN0cmluZwogICAgICAgIHRvZGVzYyAtLSAidG8iIGZpbGUgY29sdW1uIGhlYWRlciBzdHJpbmcKICAgICAgICBjb250ZXh0IC0tIHNldCB0byBUcnVlIGZvciBjb250ZXh0dWFsIGRpZmZlcmVuY2VzIChkZWZhdWx0cyB0byBGYWxzZQogICAgICAgICAgICB3aGljaCBzaG93cyBmdWxsIGRpZmZlcmVuY2VzKS4KICAgICAgICBudW1saW5lcyAtLSBudW1iZXIgb2YgY29udGV4dCBsaW5lcy4gIFdoZW4gY29udGV4dCBpcyBzZXQgVHJ1ZSwKICAgICAgICAgICAgY29udHJvbHMgbnVtYmVyIG9mIGxpbmVzIGRpc3BsYXllZCBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjaGFuZ2UuCiAgICAgICAgICAgIFdoZW4gY29udGV4dCBpcyBGYWxzZSwgY29udHJvbHMgdGhlIG51bWJlciBvZiBsaW5lcyB0byBwbGFjZQogICAgICAgICAgICB0aGUgIm5leHQiIGxpbmsgYW5jaG9ycyBiZWZvcmUgdGhlIG5leHQgY2hhbmdlIChzbyBjbGljayBvZgogICAgICAgICAgICAibmV4dCIgbGluayBqdW1wcyB0byBqdXN0IGJlZm9yZSB0aGUgY2hhbmdlKS4KICAgICAgICAiIiIKCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbGVfdGVtcGxhdGUgJSBkaWN0KAogICAgICAgICAgICBzdHlsZXMgPSBzZWxmLl9zdHlsZXMsCiAgICAgICAgICAgIGxlZ2VuZCA9IHNlbGYuX2xlZ2VuZCwKICAgICAgICAgICAgdGFibGUgPSBzZWxmLm1ha2VfdGFibGUoZnJvbWxpbmVzLHRvbGluZXMsZnJvbWRlc2MsdG9kZXNjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0PWNvbnRleHQsbnVtbGluZXM9bnVtbGluZXMpKQoKICAgIGRlZiBfdGFiX25ld2xpbmVfcmVwbGFjZShzZWxmLGZyb21saW5lcyx0b2xpbmVzKToKICAgICAgICAiIiJSZXR1cm5zIGZyb20vdG8gbGluZSBsaXN0cyB3aXRoIHRhYnMgZXhwYW5kZWQgYW5kIG5ld2xpbmVzIHJlbW92ZWQuCgogICAgICAgIEluc3RlYWQgb2YgdGFiIGNoYXJhY3RlcnMgYmVpbmcgcmVwbGFjZWQgYnkgdGhlIG51bWJlciBvZiBzcGFjZXMKICAgICAgICBuZWVkZWQgdG8gZmlsbCBpbiB0byB0aGUgbmV4dCB0YWIgc3RvcCwgdGhpcyBmdW5jdGlvbiB3aWxsIGZpbGwKICAgICAgICB0aGUgc3BhY2Ugd2l0aCB0YWIgY2hhcmFjdGVycy4gIFRoaXMgaXMgZG9uZSBzbyB0aGF0IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgYWxnb3JpdGhtcyBjYW4gaWRlbnRpZnkgY2hhbmdlcyBpbiBhIGZpbGUgd2hlbiB0YWJzIGFyZSByZXBsYWNlZCBieQogICAgICAgIHNwYWNlcyBhbmQgdmljZSB2ZXJzYS4gIEF0IHRoZSBlbmQgb2YgdGhlIEhUTUwgZ2VuZXJhdGlvbiwgdGhlIHRhYgogICAgICAgIGNoYXJhY3RlcnMgd2lsbCBiZSByZXBsYWNlZCB3aXRoIGEgbm9uYnJlYWthYmxlIHNwYWNlLgogICAgICAgICIiIgogICAgICAgIGRlZiBleHBhbmRfdGFicyhsaW5lKToKICAgICAgICAgICAgIyBoaWRlIHJlYWwgc3BhY2VzCiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnJlcGxhY2UoJyAnLCdcMCcpCiAgICAgICAgICAgICMgZXhwYW5kIHRhYnMgaW50byBzcGFjZXMKICAgICAgICAgICAgbGluZSA9IGxpbmUuZXhwYW5kdGFicyhzZWxmLl90YWJzaXplKQogICAgICAgICAgICAjIHJlcGxhY2Ugc3BhY2VzIGZyb20gZXhwYW5kZWQgdGFicyBiYWNrIGludG8gdGFiIGNoYXJhY3RlcnMKICAgICAgICAgICAgIyAod2UnbGwgcmVwbGFjZSB0aGVtIHdpdGggbWFya3VwIGFmdGVyIHdlIGRvIGRpZmZlcmVuY2luZykKICAgICAgICAgICAgbGluZSA9IGxpbmUucmVwbGFjZSgnICcsJ1x0JykKICAgICAgICAgICAgcmV0dXJuIGxpbmUucmVwbGFjZSgnXDAnLCcgJykucnN0cmlwKCdcbicpCiAgICAgICAgZnJvbWxpbmVzID0gW2V4cGFuZF90YWJzKGxpbmUpIGZvciBsaW5lIGluIGZyb21saW5lc10KICAgICAgICB0b2xpbmVzID0gW2V4cGFuZF90YWJzKGxpbmUpIGZvciBsaW5lIGluIHRvbGluZXNdCiAgICAgICAgcmV0dXJuIGZyb21saW5lcyx0b2xpbmVzCgogICAgZGVmIF9zcGxpdF9saW5lKHNlbGYsZGF0YV9saXN0LGxpbmVfbnVtLHRleHQpOgogICAgICAgICIiIkJ1aWxkcyBsaXN0IG9mIHRleHQgbGluZXMgYnkgc3BsaXR0aW5nIHRleHQgbGluZXMgYXQgd3JhcCBwb2ludAoKICAgICAgICBUaGlzIGZ1bmN0aW9uIHdpbGwgZGV0ZXJtaW5lIGlmIHRoZSBpbnB1dCB0ZXh0IGxpbmUgbmVlZHMgdG8gYmUKICAgICAgICB3cmFwcGVkIChzcGxpdCkgaW50byBzZXBhcmF0ZSBsaW5lcy4gIElmIHNvLCB0aGUgZmlyc3Qgd3JhcCBwb2ludAogICAgICAgIHdpbGwgYmUgZGV0ZXJtaW5lZCBhbmQgdGhlIGZpcnN0IGxpbmUgYXBwZW5kZWQgdG8gdGhlIG91dHB1dAogICAgICAgIHRleHQgbGluZSBsaXN0LiAgVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHJlY3Vyc2l2ZWx5IHRvIGhhbmRsZQogICAgICAgIHRoZSBzZWNvbmQgcGFydCBvZiB0aGUgc3BsaXQgbGluZSB0byBmdXJ0aGVyIHNwbGl0IGl0LgogICAgICAgICIiIgogICAgICAgICMgaWYgYmxhbmsgbGluZSBvciBjb250ZXh0IHNlcGFyYXRvciwganVzdCBhZGQgaXQgdG8gdGhlIG91dHB1dCBsaXN0CiAgICAgICAgaWYgbm90IGxpbmVfbnVtOgogICAgICAgICAgICBkYXRhX2xpc3QuYXBwZW5kKChsaW5lX251bSx0ZXh0KSkKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgaWYgbGluZSB0ZXh0IGRvZXNuJ3QgbmVlZCB3cmFwcGluZywganVzdCBhZGQgaXQgdG8gdGhlIG91dHB1dCBsaXN0CiAgICAgICAgc2l6ZSA9IGxlbih0ZXh0KQogICAgICAgIG1heCA9IHNlbGYuX3dyYXBjb2x1bW4KICAgICAgICBpZiAoc2l6ZSA8PSBtYXgpIG9yICgoc2l6ZSAtKHRleHQuY291bnQoJ1wwJykqMykpIDw9IG1heCk6CiAgICAgICAgICAgIGRhdGFfbGlzdC5hcHBlbmQoKGxpbmVfbnVtLHRleHQpKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgIyBzY2FuIHRleHQgbG9va2luZyBmb3IgdGhlIHdyYXAgcG9pbnQsIGtlZXBpbmcgdHJhY2sgaWYgdGhlIHdyYXAKICAgICAgICAjIHBvaW50IGlzIGluc2lkZSBtYXJrZXJzCiAgICAgICAgaSA9IDAKICAgICAgICBuID0gMAogICAgICAgIG1hcmsgPSAnJwogICAgICAgIHdoaWxlIG4gPCBtYXggYW5kIGkgPCBzaXplOgogICAgICAgICAgICBpZiB0ZXh0W2ldID09ICdcMCc6CiAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgICAgIG1hcmsgPSB0ZXh0W2ldCiAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgZWxpZiB0ZXh0W2ldID09ICdcMSc6CiAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgICAgIG1hcmsgPSAnJwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaSArPSAxCiAgICAgICAgICAgICAgICBuICs9IDEKCiAgICAgICAgIyB3cmFwIHBvaW50IGlzIGluc2lkZSB0ZXh0LCBicmVhayBpdCB1cCBpbnRvIHNlcGFyYXRlIGxpbmVzCiAgICAgICAgbGluZTEgPSB0ZXh0WzppXQogICAgICAgIGxpbmUyID0gdGV4dFtpOl0KCiAgICAgICAgIyBpZiB3cmFwIHBvaW50IGlzIGluc2lkZSBtYXJrZXJzLCBwbGFjZSBlbmQgbWFya2VyIGF0IGVuZCBvZiBmaXJzdAogICAgICAgICMgbGluZSBhbmQgc3RhcnQgbWFya2VyIGF0IGJlZ2lubmluZyBvZiBzZWNvbmQgbGluZSBiZWNhdXNlIGVhY2gKICAgICAgICAjIGxpbmUgd2lsbCBoYXZlIGl0cyBvd24gdGFibGUgdGFnIG1hcmt1cCBhcm91bmQgaXQuCiAgICAgICAgaWYgbWFyazoKICAgICAgICAgICAgbGluZTEgPSBsaW5lMSArICdcMScKICAgICAgICAgICAgbGluZTIgPSAnXDAnICsgbWFyayArIGxpbmUyCgogICAgICAgICMgdGFjayBvbiBmaXJzdCBsaW5lIG9udG8gdGhlIG91dHB1dCBsaXN0CiAgICAgICAgZGF0YV9saXN0LmFwcGVuZCgobGluZV9udW0sbGluZTEpKQoKICAgICAgICAjIHVzZSB0aGlzIHJvdXRpbmUgYWdhaW4gdG8gd3JhcCB0aGUgcmVtYWluaW5nIHRleHQKICAgICAgICBzZWxmLl9zcGxpdF9saW5lKGRhdGFfbGlzdCwnPicsbGluZTIpCgogICAgZGVmIF9saW5lX3dyYXBwZXIoc2VsZixkaWZmcyk6CiAgICAgICAgIiIiUmV0dXJucyBpdGVyYXRvciB0aGF0IHNwbGl0cyAod3JhcHMpIG1kaWZmIHRleHQgbGluZXMiIiIKCiAgICAgICAgIyBwdWxsIGZyb20vdG8gZGF0YSBhbmQgZmxhZ3MgZnJvbSBtZGlmZiBpdGVyYXRvcgogICAgICAgIGZvciBmcm9tZGF0YSx0b2RhdGEsZmxhZyBpbiBkaWZmczoKICAgICAgICAgICAgIyBjaGVjayBmb3IgY29udGV4dCBzZXBhcmF0b3JzIGFuZCBwYXNzIHRoZW0gdGhyb3VnaAogICAgICAgICAgICBpZiBmbGFnIGlzIE5vbmU6CiAgICAgICAgICAgICAgICB5aWVsZCBmcm9tZGF0YSx0b2RhdGEsZmxhZwogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgKGZyb21saW5lLGZyb210ZXh0KSwodG9saW5lLHRvdGV4dCkgPSBmcm9tZGF0YSx0b2RhdGEKICAgICAgICAgICAgIyBmb3IgZWFjaCBmcm9tL3RvIGxpbmUgc3BsaXQgaXQgYXQgdGhlIHdyYXAgY29sdW1uIHRvIGZvcm0KICAgICAgICAgICAgIyBsaXN0IG9mIHRleHQgbGluZXMuCiAgICAgICAgICAgIGZyb21saXN0LHRvbGlzdCA9IFtdLFtdCiAgICAgICAgICAgIHNlbGYuX3NwbGl0X2xpbmUoZnJvbWxpc3QsZnJvbWxpbmUsZnJvbXRleHQpCiAgICAgICAgICAgIHNlbGYuX3NwbGl0X2xpbmUodG9saXN0LHRvbGluZSx0b3RleHQpCiAgICAgICAgICAgICMgeWllbGQgZnJvbS90byBsaW5lIGluIHBhaXJzIGluc2VydGluZyBibGFuayBsaW5lcyBhcwogICAgICAgICAgICAjIG5lY2Vzc2FyeSB3aGVuIG9uZSBzaWRlIGhhcyBtb3JlIHdyYXBwZWQgbGluZXMKICAgICAgICAgICAgd2hpbGUgZnJvbWxpc3Qgb3IgdG9saXN0OgogICAgICAgICAgICAgICAgaWYgZnJvbWxpc3Q6CiAgICAgICAgICAgICAgICAgICAgZnJvbWRhdGEgPSBmcm9tbGlzdC5wb3AoMCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZnJvbWRhdGEgPSAoJycsJyAnKQogICAgICAgICAgICAgICAgaWYgdG9saXN0OgogICAgICAgICAgICAgICAgICAgIHRvZGF0YSA9IHRvbGlzdC5wb3AoMCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdG9kYXRhID0gKCcnLCcgJykKICAgICAgICAgICAgICAgIHlpZWxkIGZyb21kYXRhLHRvZGF0YSxmbGFnCgogICAgZGVmIF9jb2xsZWN0X2xpbmVzKHNlbGYsZGlmZnMpOgogICAgICAgICIiIkNvbGxlY3RzIG1kaWZmIG91dHB1dCBpbnRvIHNlcGFyYXRlIGxpc3RzCgogICAgICAgIEJlZm9yZSBzdG9yaW5nIHRoZSBtZGlmZiBmcm9tL3RvIGRhdGEgaW50byBhIGxpc3QsIGl0IGlzIGNvbnZlcnRlZAogICAgICAgIGludG8gYSBzaW5nbGUgbGluZSBvZiB0ZXh0IHdpdGggSFRNTCBtYXJrdXAuCiAgICAgICAgIiIiCgogICAgICAgIGZyb21saXN0LHRvbGlzdCxmbGFnbGlzdCA9IFtdLFtdLFtdCiAgICAgICAgIyBwdWxsIGZyb20vdG8gZGF0YSBhbmQgZmxhZ3MgZnJvbSBtZGlmZiBzdHlsZSBpdGVyYXRvcgogICAgICAgIGZvciBmcm9tZGF0YSx0b2RhdGEsZmxhZyBpbiBkaWZmczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgIyBzdG9yZSBIVE1MIG1hcmt1cCBvZiB0aGUgbGluZXMgaW50byB0aGUgbGlzdHMKICAgICAgICAgICAgICAgIGZyb21saXN0LmFwcGVuZChzZWxmLl9mb3JtYXRfbGluZSgwLGZsYWcsKmZyb21kYXRhKSkKICAgICAgICAgICAgICAgIHRvbGlzdC5hcHBlbmQoc2VsZi5fZm9ybWF0X2xpbmUoMSxmbGFnLCp0b2RhdGEpKQogICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAgICAgIyBleGNlcHRpb25zIG9jY3VyIGZvciBsaW5lcyB3aGVyZSBjb250ZXh0IHNlcGFyYXRvcnMgZ28KICAgICAgICAgICAgICAgIGZyb21saXN0LmFwcGVuZChOb25lKQogICAgICAgICAgICAgICAgdG9saXN0LmFwcGVuZChOb25lKQogICAgICAgICAgICBmbGFnbGlzdC5hcHBlbmQoZmxhZykKICAgICAgICByZXR1cm4gZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0CgogICAgZGVmIF9mb3JtYXRfbGluZShzZWxmLHNpZGUsZmxhZyxsaW5lbnVtLHRleHQpOgogICAgICAgICIiIlJldHVybnMgSFRNTCBtYXJrdXAgb2YgImZyb20iIC8gInRvIiB0ZXh0IGxpbmVzCgogICAgICAgIHNpZGUgLS0gMCBvciAxIGluZGljYXRpbmcgImZyb20iIG9yICJ0byIgdGV4dAogICAgICAgIGZsYWcgLS0gaW5kaWNhdGVzIGlmIGRpZmZlcmVuY2Ugb24gbGluZQogICAgICAgIGxpbmVudW0gLS0gbGluZSBudW1iZXIgKHVzZWQgZm9yIGxpbmUgbnVtYmVyIGNvbHVtbikKICAgICAgICB0ZXh0IC0tIGxpbmUgdGV4dCB0byBiZSBtYXJrZWQgdXAKICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGxpbmVudW0gPSAnJWQnICUgbGluZW51bQogICAgICAgICAgICBpZCA9ICcgaWQ9IiVzJXMiJyAlIChzZWxmLl9wcmVmaXhbc2lkZV0sbGluZW51bSkKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAjIGhhbmRsZSBibGFuayBsaW5lcyB3aGVyZSBsaW5lbnVtIGlzICc+JyBvciAnJwogICAgICAgICAgICBpZCA9ICcnCiAgICAgICAgIyByZXBsYWNlIHRob3NlIHRoaW5ncyB0aGF0IHdvdWxkIGdldCBjb25mdXNlZCB3aXRoIEhUTUwgc3ltYm9scwogICAgICAgIHRleHQ9dGV4dC5yZXBsYWNlKCImIiwiJmFtcDsiKS5yZXBsYWNlKCI+IiwiJmd0OyIpLnJlcGxhY2UoIjwiLCImbHQ7IikKCiAgICAgICAgIyBtYWtlIHNwYWNlIG5vbi1icmVha2FibGUgc28gdGhleSBkb24ndCBnZXQgY29tcHJlc3NlZCBvciBsaW5lIHdyYXBwZWQKICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCcgJywnJm5ic3A7JykucnN0cmlwKCkKCiAgICAgICAgcmV0dXJuICc8dGQgY2xhc3M9ImRpZmZfaGVhZGVyIiVzPiVzPC90ZD48dGQgbm93cmFwPSJub3dyYXAiPiVzPC90ZD4nIFwKICAgICAgICAgICAgICAgJSAoaWQsbGluZW51bSx0ZXh0KQoKICAgIGRlZiBfbWFrZV9wcmVmaXgoc2VsZik6CiAgICAgICAgIiIiQ3JlYXRlIHVuaXF1ZSBhbmNob3IgcHJlZml4ZXMiIiIKCiAgICAgICAgIyBHZW5lcmF0ZSBhIHVuaXF1ZSBhbmNob3IgcHJlZml4IHNvIG11bHRpcGxlIHRhYmxlcwogICAgICAgICMgY2FuIGV4aXN0IG9uIHRoZSBzYW1lIEhUTUwgcGFnZSB3aXRob3V0IGNvbmZsaWN0cy4KICAgICAgICBmcm9tcHJlZml4ID0gImZyb20lZF8iICUgSHRtbERpZmYuX2RlZmF1bHRfcHJlZml4CiAgICAgICAgdG9wcmVmaXggPSAidG8lZF8iICUgSHRtbERpZmYuX2RlZmF1bHRfcHJlZml4CiAgICAgICAgSHRtbERpZmYuX2RlZmF1bHRfcHJlZml4ICs9IDEKICAgICAgICAjIHN0b3JlIHByZWZpeGVzIHNvIGxpbmUgZm9ybWF0IG1ldGhvZCBoYXMgYWNjZXNzCiAgICAgICAgc2VsZi5fcHJlZml4ID0gW2Zyb21wcmVmaXgsdG9wcmVmaXhdCgogICAgZGVmIF9jb252ZXJ0X2ZsYWdzKHNlbGYsZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0LGNvbnRleHQsbnVtbGluZXMpOgogICAgICAgICIiIk1ha2VzIGxpc3Qgb2YgIm5leHQiIGxpbmtzIiIiCgogICAgICAgICMgYWxsIGFuY2hvciBuYW1lcyB3aWxsIGJlIGdlbmVyYXRlZCB1c2luZyB0aGUgdW5pcXVlICJ0byIgcHJlZml4CiAgICAgICAgdG9wcmVmaXggPSBzZWxmLl9wcmVmaXhbMV0KCiAgICAgICAgIyBwcm9jZXNzIGNoYW5nZSBmbGFncywgZ2VuZXJhdGluZyBtaWRkbGUgY29sdW1uIG9mIG5leHQgYW5jaG9ycy9saW5rcwogICAgICAgIG5leHRfaWQgPSBbJyddKmxlbihmbGFnbGlzdCkKICAgICAgICBuZXh0X2hyZWYgPSBbJyddKmxlbihmbGFnbGlzdCkKICAgICAgICBudW1fY2hnLCBpbl9jaGFuZ2UgPSAwLCBGYWxzZQogICAgICAgIGxhc3QgPSAwCiAgICAgICAgZm9yIGksZmxhZyBpbiBlbnVtZXJhdGUoZmxhZ2xpc3QpOgogICAgICAgICAgICBpZiBmbGFnOgogICAgICAgICAgICAgICAgaWYgbm90IGluX2NoYW5nZToKICAgICAgICAgICAgICAgICAgICBpbl9jaGFuZ2UgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgbGFzdCA9IGkKICAgICAgICAgICAgICAgICAgICAjIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBjaGFuZ2UsIGRyb3AgYW4gYW5jaG9yIGEgZmV3IGxpbmVzCiAgICAgICAgICAgICAgICAgICAgIyAodGhlIGNvbnRleHQgbGluZXMpIGJlZm9yZSB0aGUgY2hhbmdlIGZvciB0aGUgcHJldmlvdXMKICAgICAgICAgICAgICAgICAgICAjIGxpbmsKICAgICAgICAgICAgICAgICAgICBpID0gbWF4KFswLGktbnVtbGluZXNdKQogICAgICAgICAgICAgICAgICAgIG5leHRfaWRbaV0gPSAnIGlkPSJkaWZmbGliX2NoZ18lc18lZCInICUgKHRvcHJlZml4LG51bV9jaGcpCiAgICAgICAgICAgICAgICAgICAgIyBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgY2hhbmdlLCBkcm9wIGEgbGluayB0byB0aGUgbmV4dAogICAgICAgICAgICAgICAgICAgICMgY2hhbmdlCiAgICAgICAgICAgICAgICAgICAgbnVtX2NoZyArPSAxCiAgICAgICAgICAgICAgICAgICAgbmV4dF9ocmVmW2xhc3RdID0gJzxhIGhyZWY9IiNkaWZmbGliX2NoZ18lc18lZCI+bjwvYT4nICUgKAogICAgICAgICAgICAgICAgICAgICAgICAgdG9wcmVmaXgsbnVtX2NoZykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGluX2NoYW5nZSA9IEZhbHNlCiAgICAgICAgIyBjaGVjayBmb3IgY2FzZXMgd2hlcmUgdGhlcmUgaXMgbm8gY29udGVudCB0byBhdm9pZCBleGNlcHRpb25zCiAgICAgICAgaWYgbm90IGZsYWdsaXN0OgogICAgICAgICAgICBmbGFnbGlzdCA9IFtGYWxzZV0KICAgICAgICAgICAgbmV4dF9pZCA9IFsnJ10KICAgICAgICAgICAgbmV4dF9ocmVmID0gWycnXQogICAgICAgICAgICBsYXN0ID0gMAogICAgICAgICAgICBpZiBjb250ZXh0OgogICAgICAgICAgICAgICAgZnJvbWxpc3QgPSBbJzx0ZD48L3RkPjx0ZD4mbmJzcDtObyBEaWZmZXJlbmNlcyBGb3VuZCZuYnNwOzwvdGQ+J10KICAgICAgICAgICAgICAgIHRvbGlzdCA9IGZyb21saXN0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBmcm9tbGlzdCA9IHRvbGlzdCA9IFsnPHRkPjwvdGQ+PHRkPiZuYnNwO0VtcHR5IEZpbGUmbmJzcDs8L3RkPiddCiAgICAgICAgIyBpZiBub3QgYSBjaGFuZ2Ugb24gZmlyc3QgbGluZSwgZHJvcCBhIGxpbmsKICAgICAgICBpZiBub3QgZmxhZ2xpc3RbMF06CiAgICAgICAgICAgIG5leHRfaHJlZlswXSA9ICc8YSBocmVmPSIjZGlmZmxpYl9jaGdfJXNfMCI+ZjwvYT4nICUgdG9wcmVmaXgKICAgICAgICAjIHJlZG8gdGhlIGxhc3QgbGluayB0byBsaW5rIHRvIHRoZSB0b3AKICAgICAgICBuZXh0X2hyZWZbbGFzdF0gPSAnPGEgaHJlZj0iI2RpZmZsaWJfY2hnXyVzX3RvcCI+dDwvYT4nICUgKHRvcHJlZml4KQoKICAgICAgICByZXR1cm4gZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0LG5leHRfaHJlZixuZXh0X2lkCgogICAgZGVmIG1ha2VfdGFibGUoc2VsZixmcm9tbGluZXMsdG9saW5lcyxmcm9tZGVzYz0nJyx0b2Rlc2M9JycsY29udGV4dD1GYWxzZSwKICAgICAgICAgICAgICAgICAgIG51bWxpbmVzPTUpOgogICAgICAgICIiIlJldHVybnMgSFRNTCB0YWJsZSBvZiBzaWRlIGJ5IHNpZGUgY29tcGFyaXNvbiB3aXRoIGNoYW5nZSBoaWdobGlnaHRzCgogICAgICAgIEFyZ3VtZW50czoKICAgICAgICBmcm9tbGluZXMgLS0gbGlzdCBvZiAiZnJvbSIgbGluZXMKICAgICAgICB0b2xpbmVzIC0tIGxpc3Qgb2YgInRvIiBsaW5lcwogICAgICAgIGZyb21kZXNjIC0tICJmcm9tIiBmaWxlIGNvbHVtbiBoZWFkZXIgc3RyaW5nCiAgICAgICAgdG9kZXNjIC0tICJ0byIgZmlsZSBjb2x1bW4gaGVhZGVyIHN0cmluZwogICAgICAgIGNvbnRleHQgLS0gc2V0IHRvIFRydWUgZm9yIGNvbnRleHR1YWwgZGlmZmVyZW5jZXMgKGRlZmF1bHRzIHRvIEZhbHNlCiAgICAgICAgICAgIHdoaWNoIHNob3dzIGZ1bGwgZGlmZmVyZW5jZXMpLgogICAgICAgIG51bWxpbmVzIC0tIG51bWJlciBvZiBjb250ZXh0IGxpbmVzLiAgV2hlbiBjb250ZXh0IGlzIHNldCBUcnVlLAogICAgICAgICAgICBjb250cm9scyBudW1iZXIgb2YgbGluZXMgZGlzcGxheWVkIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIGNoYW5nZS4KICAgICAgICAgICAgV2hlbiBjb250ZXh0IGlzIEZhbHNlLCBjb250cm9scyB0aGUgbnVtYmVyIG9mIGxpbmVzIHRvIHBsYWNlCiAgICAgICAgICAgIHRoZSAibmV4dCIgbGluayBhbmNob3JzIGJlZm9yZSB0aGUgbmV4dCBjaGFuZ2UgKHNvIGNsaWNrIG9mCiAgICAgICAgICAgICJuZXh0IiBsaW5rIGp1bXBzIHRvIGp1c3QgYmVmb3JlIHRoZSBjaGFuZ2UpLgogICAgICAgICIiIgoKICAgICAgICAjIG1ha2UgdW5pcXVlIGFuY2hvciBwcmVmaXhlcyBzbyB0aGF0IG11bHRpcGxlIHRhYmxlcyBtYXkgZXhpc3QKICAgICAgICAjIG9uIHRoZSBzYW1lIHBhZ2Ugd2l0aG91dCBjb25mbGljdC4KICAgICAgICBzZWxmLl9tYWtlX3ByZWZpeCgpCgogICAgICAgICMgY2hhbmdlIHRhYnMgdG8gc3BhY2VzIGJlZm9yZSBpdCBnZXRzIG1vcmUgZGlmZmljdWx0IGFmdGVyIHdlIGluc2VydAogICAgICAgICMgbWFya2t1cAogICAgICAgIGZyb21saW5lcyx0b2xpbmVzID0gc2VsZi5fdGFiX25ld2xpbmVfcmVwbGFjZShmcm9tbGluZXMsdG9saW5lcykKCiAgICAgICAgIyBjcmVhdGUgZGlmZnMgaXRlcmF0b3Igd2hpY2ggZ2VuZXJhdGVzIHNpZGUgYnkgc2lkZSBmcm9tL3RvIGRhdGEKICAgICAgICBpZiBjb250ZXh0OgogICAgICAgICAgICBjb250ZXh0X2xpbmVzID0gbnVtbGluZXMKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb250ZXh0X2xpbmVzID0gTm9uZQogICAgICAgIGRpZmZzID0gX21kaWZmKGZyb21saW5lcyx0b2xpbmVzLGNvbnRleHRfbGluZXMsbGluZWp1bms9c2VsZi5fbGluZWp1bmssCiAgICAgICAgICAgICAgICAgICAgICBjaGFyanVuaz1zZWxmLl9jaGFyanVuaykKCiAgICAgICAgIyBzZXQgdXAgaXRlcmF0b3IgdG8gd3JhcCBsaW5lcyB0aGF0IGV4Y2VlZCBkZXNpcmVkIHdpZHRoCiAgICAgICAgaWYgc2VsZi5fd3JhcGNvbHVtbjoKICAgICAgICAgICAgZGlmZnMgPSBzZWxmLl9saW5lX3dyYXBwZXIoZGlmZnMpCgogICAgICAgICMgY29sbGVjdCB1cCBmcm9tL3RvIGxpbmVzIGFuZCBmbGFncyBpbnRvIGxpc3RzIChhbHNvIGZvcm1hdCB0aGUgbGluZXMpCiAgICAgICAgZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0ID0gc2VsZi5fY29sbGVjdF9saW5lcyhkaWZmcykKCiAgICAgICAgIyBwcm9jZXNzIGNoYW5nZSBmbGFncywgZ2VuZXJhdGluZyBtaWRkbGUgY29sdW1uIG9mIG5leHQgYW5jaG9ycy9saW5rcwogICAgICAgIGZyb21saXN0LHRvbGlzdCxmbGFnbGlzdCxuZXh0X2hyZWYsbmV4dF9pZCA9IHNlbGYuX2NvbnZlcnRfZmxhZ3MoCiAgICAgICAgICAgIGZyb21saXN0LHRvbGlzdCxmbGFnbGlzdCxjb250ZXh0LG51bWxpbmVzKQoKICAgICAgICBzID0gW10KICAgICAgICBmbXQgPSAnICAgICAgICAgICAgPHRyPjx0ZCBjbGFzcz0iZGlmZl9uZXh0IiVzPiVzPC90ZD4lcycgKyBcCiAgICAgICAgICAgICAgJzx0ZCBjbGFzcz0iZGlmZl9uZXh0Ij4lczwvdGQ+JXM8L3RyPlxuJwogICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihmbGFnbGlzdCkpOgogICAgICAgICAgICBpZiBmbGFnbGlzdFtpXSBpcyBOb25lOgogICAgICAgICAgICAgICAgIyBtZGlmZiB5aWVsZHMgTm9uZSBvbiBzZXBhcmF0b3IgbGluZXMgc2tpcCB0aGUgYm9ndXMgb25lcwogICAgICAgICAgICAgICAgIyBnZW5lcmF0ZWQgZm9yIHRoZSBmaXJzdCBsaW5lCiAgICAgICAgICAgICAgICBpZiBpID4gMDoKICAgICAgICAgICAgICAgICAgICBzLmFwcGVuZCgnICAgICAgICA8L3Rib2R5PiAgICAgICAgXG4gICAgICAgIDx0Ym9keT5cbicpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzLmFwcGVuZCggZm10ICUgKG5leHRfaWRbaV0sbmV4dF9ocmVmW2ldLGZyb21saXN0W2ldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dF9ocmVmW2ldLHRvbGlzdFtpXSkpCiAgICAgICAgaWYgZnJvbWRlc2Mgb3IgdG9kZXNjOgogICAgICAgICAgICBoZWFkZXJfcm93ID0gJzx0aGVhZD48dHI+JXMlcyVzJXM8L3RyPjwvdGhlYWQ+JyAlICgKICAgICAgICAgICAgICAgICc8dGggY2xhc3M9ImRpZmZfbmV4dCI+PGJyIC8+PC90aD4nLAogICAgICAgICAgICAgICAgJzx0aCBjb2xzcGFuPSIyIiBjbGFzcz0iZGlmZl9oZWFkZXIiPiVzPC90aD4nICUgZnJvbWRlc2MsCiAgICAgICAgICAgICAgICAnPHRoIGNsYXNzPSJkaWZmX25leHQiPjxiciAvPjwvdGg+JywKICAgICAgICAgICAgICAgICc8dGggY29sc3Bhbj0iMiIgY2xhc3M9ImRpZmZfaGVhZGVyIj4lczwvdGg+JyAlIHRvZGVzYykKICAgICAgICBlbHNlOgogICAgICAgICAgICBoZWFkZXJfcm93ID0gJycKCiAgICAgICAgdGFibGUgPSBzZWxmLl90YWJsZV90ZW1wbGF0ZSAlIGRpY3QoCiAgICAgICAgICAgIGRhdGFfcm93cz0nJy5qb2luKHMpLAogICAgICAgICAgICBoZWFkZXJfcm93PWhlYWRlcl9yb3csCiAgICAgICAgICAgIHByZWZpeD1zZWxmLl9wcmVmaXhbMV0pCgogICAgICAgIHJldHVybiB0YWJsZS5yZXBsYWNlKCdcMCsnLCc8c3BhbiBjbGFzcz0iZGlmZl9hZGQiPicpLiBcCiAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2UoJ1wwLScsJzxzcGFuIGNsYXNzPSJkaWZmX3N1YiI+JykuIFwKICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZSgnXDBeJywnPHNwYW4gY2xhc3M9ImRpZmZfY2hnIj4nKS4gXAogICAgICAgICAgICAgICAgICAgICByZXBsYWNlKCdcMScsJzwvc3Bhbj4nKS4gXAogICAgICAgICAgICAgICAgICAgICByZXBsYWNlKCdcdCcsJyZuYnNwOycpCgpkZWwgcmUKCmRlZiByZXN0b3JlKGRlbHRhLCB3aGljaCk6CiAgICByIiIiCiAgICBHZW5lcmF0ZSBvbmUgb2YgdGhlIHR3byBzZXF1ZW5jZXMgdGhhdCBnZW5lcmF0ZWQgYSBkZWx0YS4KCiAgICBHaXZlbiBhIGBkZWx0YWAgcHJvZHVjZWQgYnkgYERpZmZlci5jb21wYXJlKClgIG9yIGBuZGlmZigpYCwgZXh0cmFjdAogICAgbGluZXMgb3JpZ2luYXRpbmcgZnJvbSBmaWxlIDEgb3IgMiAocGFyYW1ldGVyIGB3aGljaGApLCBzdHJpcHBpbmcgb2ZmIGxpbmUKICAgIHByZWZpeGVzLgoKICAgIEV4YW1wbGVzOgoKICAgID4+PiBkaWZmID0gbmRpZmYoJ29uZVxudHdvXG50aHJlZVxuJy5zcGxpdGxpbmVzKGtlZXBlbmRzPVRydWUpLAogICAgLi4uICAgICAgICAgICAgICAnb3JlXG50cmVlXG5lbXVcbicuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKSkKICAgID4+PiBkaWZmID0gbGlzdChkaWZmKQogICAgPj4+IHByaW50KCcnLmpvaW4ocmVzdG9yZShkaWZmLCAxKSksIGVuZD0iIikKICAgIG9uZQogICAgdHdvCiAgICB0aHJlZQogICAgPj4+IHByaW50KCcnLmpvaW4ocmVzdG9yZShkaWZmLCAyKSksIGVuZD0iIikKICAgIG9yZQogICAgdHJlZQogICAgZW11CiAgICAiIiIKICAgIHRyeToKICAgICAgICB0YWcgPSB7MTogIi0gIiwgMjogIisgIn1baW50KHdoaWNoKV0KICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCd1bmtub3duIGRlbHRhIGNob2ljZSAobXVzdCBiZSAxIG9yIDIpOiAlcicKICAgICAgICAgICAgICAgICAgICAgICAgICAgJSB3aGljaCkKICAgIHByZWZpeGVzID0gKCIgICIsIHRhZykKICAgIGZvciBsaW5lIGluIGRlbHRhOgogICAgICAgIGlmIGxpbmVbOjJdIGluIHByZWZpeGVzOgogICAgICAgICAgICB5aWVsZCBsaW5lWzI6XQoKZGVmIF90ZXN0KCk6CiAgICBpbXBvcnQgZG9jdGVzdCwgZGlmZmxpYgogICAgcmV0dXJuIGRvY3Rlc3QudGVzdG1vZChkaWZmbGliKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIF90ZXN0KCkK',
'/Lib/string.py':'IiIiQSBjb2xsZWN0aW9uIG9mIHN0cmluZyBjb25zdGFudHMuCgpQdWJsaWMgbW9kdWxlIHZhcmlhYmxlczoKCndoaXRlc3BhY2UgLS0gYSBzdHJpbmcgY29udGFpbmluZyBhbGwgQVNDSUkgd2hpdGVzcGFjZQphc2NpaV9sb3dlcmNhc2UgLS0gYSBzdHJpbmcgY29udGFpbmluZyBhbGwgQVNDSUkgbG93ZXJjYXNlIGxldHRlcnMKYXNjaWlfdXBwZXJjYXNlIC0tIGEgc3RyaW5nIGNvbnRhaW5pbmcgYWxsIEFTQ0lJIHVwcGVyY2FzZSBsZXR0ZXJzCmFzY2lpX2xldHRlcnMgLS0gYSBzdHJpbmcgY29udGFpbmluZyBhbGwgQVNDSUkgbGV0dGVycwpkaWdpdHMgLS0gYSBzdHJpbmcgY29udGFpbmluZyBhbGwgQVNDSUkgZGVjaW1hbCBkaWdpdHMKaGV4ZGlnaXRzIC0tIGEgc3RyaW5nIGNvbnRhaW5pbmcgYWxsIEFTQ0lJIGhleGFkZWNpbWFsIGRpZ2l0cwpvY3RkaWdpdHMgLS0gYSBzdHJpbmcgY29udGFpbmluZyBhbGwgQVNDSUkgb2N0YWwgZGlnaXRzCnB1bmN0dWF0aW9uIC0tIGEgc3RyaW5nIGNvbnRhaW5pbmcgYWxsIEFTQ0lJIHB1bmN0dWF0aW9uIGNoYXJhY3RlcnMKcHJpbnRhYmxlIC0tIGEgc3RyaW5nIGNvbnRhaW5pbmcgYWxsIEFTQ0lJIGNoYXJhY3RlcnMgY29uc2lkZXJlZCBwcmludGFibGUKCiIiIgoKaW1wb3J0IF9zdHJpbmcKCiMgU29tZSBzdHJpbmdzIGZvciBjdHlwZS1zdHlsZSBjaGFyYWN0ZXIgY2xhc3NpZmljYXRpb24Kd2hpdGVzcGFjZSA9ICcgXHRcblxyXHZcZicKYXNjaWlfbG93ZXJjYXNlID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6Jwphc2NpaV91cHBlcmNhc2UgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonCmFzY2lpX2xldHRlcnMgPSBhc2NpaV9sb3dlcmNhc2UgKyBhc2NpaV91cHBlcmNhc2UKZGlnaXRzID0gJzAxMjM0NTY3ODknCmhleGRpZ2l0cyA9IGRpZ2l0cyArICdhYmNkZWYnICsgJ0FCQ0RFRicKb2N0ZGlnaXRzID0gJzAxMjM0NTY3JwpwdW5jdHVhdGlvbiA9ICIiIiEiIyQlJicoKSorLC0uLzo7PD0+P0BbXF1eX2B7fH1+IiIiCnByaW50YWJsZSA9IGRpZ2l0cyArIGFzY2lpX2xldHRlcnMgKyBwdW5jdHVhdGlvbiArIHdoaXRlc3BhY2UKCiMgRnVuY3Rpb25zIHdoaWNoIGFyZW4ndCBhdmFpbGFibGUgYXMgc3RyaW5nIG1ldGhvZHMuCgojIENhcGl0YWxpemUgdGhlIHdvcmRzIGluIGEgc3RyaW5nLCBlLmcuICIgYUJjICBkRWYgIiAtPiAiQWJjIERlZiIuCmRlZiBjYXB3b3JkcyhzLCBzZXA9Tm9uZSk6CiAgICAiIiJjYXB3b3JkcyhzIFssc2VwXSkgLT4gc3RyaW5nCgogICAgU3BsaXQgdGhlIGFyZ3VtZW50IGludG8gd29yZHMgdXNpbmcgc3BsaXQsIGNhcGl0YWxpemUgZWFjaAogICAgd29yZCB1c2luZyBjYXBpdGFsaXplLCBhbmQgam9pbiB0aGUgY2FwaXRhbGl6ZWQgd29yZHMgdXNpbmcKICAgIGpvaW4uICBJZiB0aGUgb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IHNlcCBpcyBhYnNlbnQgb3IgTm9uZSwKICAgIHJ1bnMgb2Ygd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGFyZSByZXBsYWNlZCBieSBhIHNpbmdsZSBzcGFjZQogICAgYW5kIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UgYXJlIHJlbW92ZWQsIG90aGVyd2lzZQogICAgc2VwIGlzIHVzZWQgdG8gc3BsaXQgYW5kIGpvaW4gdGhlIHdvcmRzLgoKICAgICIiIgogICAgcmV0dXJuIChzZXAgb3IgJyAnKS5qb2luKHguY2FwaXRhbGl6ZSgpIGZvciB4IGluIHMuc3BsaXQoc2VwKSkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwppbXBvcnQgcmUgYXMgX3JlCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IENoYWluTWFwCgpjbGFzcyBfVGVtcGxhdGVNZXRhY2xhc3ModHlwZSk6CiAgICBwYXR0ZXJuID0gciIiIgogICAgJShkZWxpbSlzKD86CiAgICAgICg/UDxlc2NhcGVkPiUoZGVsaW0pcykgfCAgICMgRXNjYXBlIHNlcXVlbmNlIG9mIHR3byBkZWxpbWl0ZXJzCiAgICAgICg/UDxuYW1lZD4lKGlkKXMpICAgICAgfCAgICMgZGVsaW1pdGVyIGFuZCBhIFB5dGhvbiBpZGVudGlmaWVyCiAgICAgIHsoP1A8YnJhY2VkPiUoaWQpcyl9ICAgfCAgICMgZGVsaW1pdGVyIGFuZCBhIGJyYWNlZCBpZGVudGlmaWVyCiAgICAgICg/UDxpbnZhbGlkPikgICAgICAgICAgICAgICMgT3RoZXIgaWxsLWZvcm1lZCBkZWxpbWl0ZXIgZXhwcnMKICAgICkKICAgICIiIgoKICAgIGRlZiBfX2luaXRfXyhjbHMsIG5hbWUsIGJhc2VzLCBkY3QpOgogICAgICAgIHN1cGVyKF9UZW1wbGF0ZU1ldGFjbGFzcywgY2xzKS5fX2luaXRfXyhuYW1lLCBiYXNlcywgZGN0KQogICAgICAgIGlmICdwYXR0ZXJuJyBpbiBkY3Q6CiAgICAgICAgICAgIHBhdHRlcm4gPSBjbHMucGF0dGVybgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHBhdHRlcm4gPSBfVGVtcGxhdGVNZXRhY2xhc3MucGF0dGVybiAlIHsKICAgICAgICAgICAgICAgICdkZWxpbScgOiBfcmUuZXNjYXBlKGNscy5kZWxpbWl0ZXIpLAogICAgICAgICAgICAgICAgJ2lkJyAgICA6IGNscy5pZHBhdHRlcm4sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgY2xzLnBhdHRlcm4gPSBfcmUuY29tcGlsZShwYXR0ZXJuLCBjbHMuZmxhZ3MgfCBfcmUuVkVSQk9TRSkKCgpjbGFzcyBUZW1wbGF0ZShtZXRhY2xhc3M9X1RlbXBsYXRlTWV0YWNsYXNzKToKICAgICIiIkEgc3RyaW5nIGNsYXNzIGZvciBzdXBwb3J0aW5nICQtc3Vic3RpdHV0aW9ucy4iIiIKCiAgICBkZWxpbWl0ZXIgPSAnJCcKICAgIGlkcGF0dGVybiA9IHInW19hLXpdW19hLXowLTldKicKICAgIGZsYWdzID0gX3JlLklHTk9SRUNBU0UKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGVtcGxhdGUpOgogICAgICAgIHNlbGYudGVtcGxhdGUgPSB0ZW1wbGF0ZQoKICAgICMgU2VhcmNoIGZvciAkJCwgJGlkZW50aWZpZXIsICR7aWRlbnRpZmllcn0sIGFuZCBhbnkgYmFyZSAkJ3MKCiAgICBkZWYgX2ludmFsaWQoc2VsZiwgbW8pOgogICAgICAgIGkgPSBtby5zdGFydCgnaW52YWxpZCcpCiAgICAgICAgbGluZXMgPSBzZWxmLnRlbXBsYXRlWzppXS5zcGxpdGxpbmVzKGtlZXBlbmRzPVRydWUpCiAgICAgICAgaWYgbm90IGxpbmVzOgogICAgICAgICAgICBjb2xubyA9IDEKICAgICAgICAgICAgbGluZW5vID0gMQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNvbG5vID0gaSAtIGxlbignJy5qb2luKGxpbmVzWzotMV0pKQogICAgICAgICAgICBsaW5lbm8gPSBsZW4obGluZXMpCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignSW52YWxpZCBwbGFjZWhvbGRlciBpbiBzdHJpbmc6IGxpbmUgJWQsIGNvbCAlZCcgJQogICAgICAgICAgICAgICAgICAgICAgICAgKGxpbmVubywgY29sbm8pKQoKICAgIGRlZiBzdWJzdGl0dXRlKHNlbGYsICphcmdzLCAqKmt3cyk6CiAgICAgICAgaWYgbGVuKGFyZ3MpID4gMToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdUb28gbWFueSBwb3NpdGlvbmFsIGFyZ3VtZW50cycpCiAgICAgICAgaWYgbm90IGFyZ3M6CiAgICAgICAgICAgIG1hcHBpbmcgPSBrd3MKICAgICAgICBlbGlmIGt3czoKICAgICAgICAgICAgbWFwcGluZyA9IENoYWluTWFwKGt3cywgYXJnc1swXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBtYXBwaW5nID0gYXJnc1swXQogICAgICAgICMgSGVscGVyIGZ1bmN0aW9uIGZvciAuc3ViKCkKICAgICAgICBkZWYgY29udmVydChtbyk6CiAgICAgICAgICAgICMgQ2hlY2sgdGhlIG1vc3QgY29tbW9uIHBhdGggZmlyc3QuCiAgICAgICAgICAgIG5hbWVkID0gbW8uZ3JvdXAoJ25hbWVkJykgb3IgbW8uZ3JvdXAoJ2JyYWNlZCcpCiAgICAgICAgICAgIGlmIG5hbWVkIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgdmFsID0gbWFwcGluZ1tuYW1lZF0KICAgICAgICAgICAgICAgICMgV2UgdXNlIHRoaXMgaWRpb20gaW5zdGVhZCBvZiBzdHIoKSBiZWNhdXNlIHRoZSBsYXR0ZXIgd2lsbAogICAgICAgICAgICAgICAgIyBmYWlsIGlmIHZhbCBpcyBhIFVuaWNvZGUgY29udGFpbmluZyBub24tQVNDSUkgY2hhcmFjdGVycy4KICAgICAgICAgICAgICAgIHJldHVybiAnJXMnICUgKHZhbCwpCiAgICAgICAgICAgIGlmIG1vLmdyb3VwKCdlc2NhcGVkJykgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5kZWxpbWl0ZXIKICAgICAgICAgICAgaWYgbW8uZ3JvdXAoJ2ludmFsaWQnKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHNlbGYuX2ludmFsaWQobW8pCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ1VucmVjb2duaXplZCBuYW1lZCBncm91cCBpbiBwYXR0ZXJuJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhdHRlcm4pCiAgICAgICAgcmV0dXJuIHNlbGYucGF0dGVybi5zdWIoY29udmVydCwgc2VsZi50ZW1wbGF0ZSkKCiAgICBkZWYgc2FmZV9zdWJzdGl0dXRlKHNlbGYsICphcmdzLCAqKmt3cyk6CiAgICAgICAgaWYgbGVuKGFyZ3MpID4gMToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdUb28gbWFueSBwb3NpdGlvbmFsIGFyZ3VtZW50cycpCiAgICAgICAgaWYgbm90IGFyZ3M6CiAgICAgICAgICAgIG1hcHBpbmcgPSBrd3MKICAgICAgICBlbGlmIGt3czoKICAgICAgICAgICAgbWFwcGluZyA9IENoYWluTWFwKGt3cywgYXJnc1swXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBtYXBwaW5nID0gYXJnc1swXQogICAgICAgICMgSGVscGVyIGZ1bmN0aW9uIGZvciAuc3ViKCkKICAgICAgICBkZWYgY29udmVydChtbyk6CiAgICAgICAgICAgIG5hbWVkID0gbW8uZ3JvdXAoJ25hbWVkJykgb3IgbW8uZ3JvdXAoJ2JyYWNlZCcpCiAgICAgICAgICAgIGlmIG5hbWVkIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICMgV2UgdXNlIHRoaXMgaWRpb20gaW5zdGVhZCBvZiBzdHIoKSBiZWNhdXNlIHRoZSBsYXR0ZXIKICAgICAgICAgICAgICAgICAgICAjIHdpbGwgZmFpbCBpZiB2YWwgaXMgYSBVbmljb2RlIGNvbnRhaW5pbmcgbm9uLUFTQ0lJCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICclcycgJSAobWFwcGluZ1tuYW1lZF0sKQogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBtby5ncm91cCgpCiAgICAgICAgICAgIGlmIG1vLmdyb3VwKCdlc2NhcGVkJykgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5kZWxpbWl0ZXIKICAgICAgICAgICAgaWYgbW8uZ3JvdXAoJ2ludmFsaWQnKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiBtby5ncm91cCgpCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ1VucmVjb2duaXplZCBuYW1lZCBncm91cCBpbiBwYXR0ZXJuJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhdHRlcm4pCiAgICAgICAgcmV0dXJuIHNlbGYucGF0dGVybi5zdWIoY29udmVydCwgc2VsZi50ZW1wbGF0ZSkKCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgdGhlIEZvcm1hdHRlciBjbGFzcwojIHNlZSBQRVAgMzEwMSBmb3IgZGV0YWlscyBhbmQgcHVycG9zZSBvZiB0aGlzIGNsYXNzCgojIFRoZSBoYXJkIHBhcnRzIGFyZSByZXVzZWQgZnJvbSB0aGUgQyBpbXBsZW1lbnRhdGlvbi4gIFRoZXkncmUgZXhwb3NlZCBhcyAiXyIKIyBwcmVmaXhlZCBtZXRob2RzIG9mIHN0ci4KCiMgVGhlIG92ZXJhbGwgcGFyc2VyIGlzIGltcGxlbWVudGVkIGluIF9zdHJpbmcuZm9ybWF0dGVyX3BhcnNlci4KIyBUaGUgZmllbGQgbmFtZSBwYXJzZXIgaXMgaW1wbGVtZW50ZWQgaW4gX3N0cmluZy5mb3JtYXR0ZXJfZmllbGRfbmFtZV9zcGxpdAoKY2xhc3MgRm9ybWF0dGVyOgogICAgZGVmIGZvcm1hdChzZWxmLCBmb3JtYXRfc3RyaW5nLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIHJldHVybiBzZWxmLnZmb3JtYXQoZm9ybWF0X3N0cmluZywgYXJncywga3dhcmdzKQoKICAgIGRlZiB2Zm9ybWF0KHNlbGYsIGZvcm1hdF9zdHJpbmcsIGFyZ3MsIGt3YXJncyk6CiAgICAgICAgdXNlZF9hcmdzID0gc2V0KCkKICAgICAgICByZXN1bHQgPSBzZWxmLl92Zm9ybWF0KGZvcm1hdF9zdHJpbmcsIGFyZ3MsIGt3YXJncywgdXNlZF9hcmdzLCAyKQogICAgICAgIHNlbGYuY2hlY2tfdW51c2VkX2FyZ3ModXNlZF9hcmdzLCBhcmdzLCBrd2FyZ3MpCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBfdmZvcm1hdChzZWxmLCBmb3JtYXRfc3RyaW5nLCBhcmdzLCBrd2FyZ3MsIHVzZWRfYXJncywgcmVjdXJzaW9uX2RlcHRoKToKICAgICAgICBpZiByZWN1cnNpb25fZGVwdGggPCAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdNYXggc3RyaW5nIHJlY3Vyc2lvbiBleGNlZWRlZCcpCiAgICAgICAgcmVzdWx0ID0gW10KICAgICAgICBmb3IgbGl0ZXJhbF90ZXh0LCBmaWVsZF9uYW1lLCBmb3JtYXRfc3BlYywgY29udmVyc2lvbiBpbiBcCiAgICAgICAgICAgICAgICBzZWxmLnBhcnNlKGZvcm1hdF9zdHJpbmcpOgoKICAgICAgICAgICAgIyBvdXRwdXQgdGhlIGxpdGVyYWwgdGV4dAogICAgICAgICAgICBpZiBsaXRlcmFsX3RleHQ6CiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGxpdGVyYWxfdGV4dCkKCiAgICAgICAgICAgICMgaWYgdGhlcmUncyBhIGZpZWxkLCBvdXRwdXQgaXQKICAgICAgICAgICAgaWYgZmllbGRfbmFtZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICMgdGhpcyBpcyBzb21lIG1hcmt1cCwgZmluZCB0aGUgb2JqZWN0IGFuZCBkbwogICAgICAgICAgICAgICAgIyAgdGhlIGZvcm1hdHRpbmcKCiAgICAgICAgICAgICAgICAjIGdpdmVuIHRoZSBmaWVsZF9uYW1lLCBmaW5kIHRoZSBvYmplY3QgaXQgcmVmZXJlbmNlcwogICAgICAgICAgICAgICAgIyAgYW5kIHRoZSBhcmd1bWVudCBpdCBjYW1lIGZyb20KICAgICAgICAgICAgICAgIG9iaiwgYXJnX3VzZWQgPSBzZWxmLmdldF9maWVsZChmaWVsZF9uYW1lLCBhcmdzLCBrd2FyZ3MpCiAgICAgICAgICAgICAgICB1c2VkX2FyZ3MuYWRkKGFyZ191c2VkKQoKICAgICAgICAgICAgICAgICMgZG8gYW55IGNvbnZlcnNpb24gb24gdGhlIHJlc3VsdGluZyBvYmplY3QKICAgICAgICAgICAgICAgIG9iaiA9IHNlbGYuY29udmVydF9maWVsZChvYmosIGNvbnZlcnNpb24pCgogICAgICAgICAgICAgICAgIyBleHBhbmQgdGhlIGZvcm1hdCBzcGVjLCBpZiBuZWVkZWQKICAgICAgICAgICAgICAgIGZvcm1hdF9zcGVjID0gc2VsZi5fdmZvcm1hdChmb3JtYXRfc3BlYywgYXJncywga3dhcmdzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRfYXJncywgcmVjdXJzaW9uX2RlcHRoLTEpCgogICAgICAgICAgICAgICAgIyBmb3JtYXQgdGhlIG9iamVjdCBhbmQgYXBwZW5kIHRvIHRoZSByZXN1bHQKICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoc2VsZi5mb3JtYXRfZmllbGQob2JqLCBmb3JtYXRfc3BlYykpCgogICAgICAgIHJldHVybiAnJy5qb2luKHJlc3VsdCkKCgogICAgZGVmIGdldF92YWx1ZShzZWxmLCBrZXksIGFyZ3MsIGt3YXJncyk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShrZXksIGludCk6CiAgICAgICAgICAgIHJldHVybiBhcmdzW2tleV0KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4ga3dhcmdzW2tleV0KCgogICAgZGVmIGNoZWNrX3VudXNlZF9hcmdzKHNlbGYsIHVzZWRfYXJncywgYXJncywga3dhcmdzKToKICAgICAgICBwYXNzCgoKICAgIGRlZiBmb3JtYXRfZmllbGQoc2VsZiwgdmFsdWUsIGZvcm1hdF9zcGVjKToKICAgICAgICByZXR1cm4gZm9ybWF0KHZhbHVlLCBmb3JtYXRfc3BlYykKCgogICAgZGVmIGNvbnZlcnRfZmllbGQoc2VsZiwgdmFsdWUsIGNvbnZlcnNpb24pOgogICAgICAgICMgZG8gYW55IGNvbnZlcnNpb24gb24gdGhlIHJlc3VsdGluZyBvYmplY3QKICAgICAgICBpZiBjb252ZXJzaW9uIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiB2YWx1ZQogICAgICAgIGVsaWYgY29udmVyc2lvbiA9PSAncyc6CiAgICAgICAgICAgIHJldHVybiBzdHIodmFsdWUpCiAgICAgICAgZWxpZiBjb252ZXJzaW9uID09ICdyJzoKICAgICAgICAgICAgcmV0dXJuIHJlcHIodmFsdWUpCiAgICAgICAgZWxpZiBjb252ZXJzaW9uID09ICdhJzoKICAgICAgICAgICAgcmV0dXJuIGFzY2lpKHZhbHVlKQogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVua25vd24gY29udmVyc2lvbiBzcGVjaWZpZXIgezAhc30iLmZvcm1hdChjb252ZXJzaW9uKSkKCgogICAgIyByZXR1cm5zIGFuIGl0ZXJhYmxlIHRoYXQgY29udGFpbnMgdHVwbGVzIG9mIHRoZSBmb3JtOgogICAgIyAobGl0ZXJhbF90ZXh0LCBmaWVsZF9uYW1lLCBmb3JtYXRfc3BlYywgY29udmVyc2lvbikKICAgICMgbGl0ZXJhbF90ZXh0IGNhbiBiZSB6ZXJvIGxlbmd0aAogICAgIyBmaWVsZF9uYW1lIGNhbiBiZSBOb25lLCBpbiB3aGljaCBjYXNlIHRoZXJlJ3Mgbm8KICAgICMgIG9iamVjdCB0byBmb3JtYXQgYW5kIG91dHB1dAogICAgIyBpZiBmaWVsZF9uYW1lIGlzIG5vdCBOb25lLCBpdCBpcyBsb29rZWQgdXAsIGZvcm1hdHRlZAogICAgIyAgd2l0aCBmb3JtYXRfc3BlYyBhbmQgY29udmVyc2lvbiBhbmQgdGhlbiB1c2VkCiAgICBkZWYgcGFyc2Uoc2VsZiwgZm9ybWF0X3N0cmluZyk6CiAgICAgICAgcmV0dXJuIF9zdHJpbmcuZm9ybWF0dGVyX3BhcnNlcihmb3JtYXRfc3RyaW5nKQoKCiAgICAjIGdpdmVuIGEgZmllbGRfbmFtZSwgZmluZCB0aGUgb2JqZWN0IGl0IHJlZmVyZW5jZXMuCiAgICAjICBmaWVsZF9uYW1lOiAgIHRoZSBmaWVsZCBiZWluZyBsb29rZWQgdXAsIGUuZy4gIjAubmFtZSIKICAgICMgICAgICAgICAgICAgICAgIG9yICJsb29rdXBbM10iCiAgICAjICB1c2VkX2FyZ3M6ICAgIGEgc2V0IG9mIHdoaWNoIGFyZ3MgaGF2ZSBiZWVuIHVzZWQKICAgICMgIGFyZ3MsIGt3YXJnczogYXMgcGFzc2VkIGluIHRvIHZmb3JtYXQKICAgIGRlZiBnZXRfZmllbGQoc2VsZiwgZmllbGRfbmFtZSwgYXJncywga3dhcmdzKToKICAgICAgICBmaXJzdCwgcmVzdCA9IF9zdHJpbmcuZm9ybWF0dGVyX2ZpZWxkX25hbWVfc3BsaXQoZmllbGRfbmFtZSkKCiAgICAgICAgb2JqID0gc2VsZi5nZXRfdmFsdWUoZmlyc3QsIGFyZ3MsIGt3YXJncykKCiAgICAgICAgIyBsb29wIHRocm91Z2ggdGhlIHJlc3Qgb2YgdGhlIGZpZWxkX25hbWUsIGRvaW5nCiAgICAgICAgIyAgZ2V0YXR0ciBvciBnZXRpdGVtIGFzIG5lZWRlZAogICAgICAgIGZvciBpc19hdHRyLCBpIGluIHJlc3Q6CiAgICAgICAgICAgIGlmIGlzX2F0dHI6CiAgICAgICAgICAgICAgICBvYmogPSBnZXRhdHRyKG9iaiwgaSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG9iaiA9IG9ialtpXQoKICAgICAgICByZXR1cm4gb2JqLCBmaXJzdAo=',
'/Lib/genericpath.py':'IiIiDQpQYXRoIG9wZXJhdGlvbnMgY29tbW9uIHRvIG1vcmUgdGhhbiBvbmUgT1MNCkRvIG5vdCB1c2UgZGlyZWN0bHkuICBUaGUgT1Mgc3BlY2lmaWMgbW9kdWxlcyBpbXBvcnQgdGhlIGFwcHJvcHJpYXRlDQpmdW5jdGlvbnMgZnJvbSB0aGlzIG1vZHVsZSB0aGVtc2VsdmVzLg0KIiIiDQppbXBvcnQgb3MNCmltcG9ydCBzdGF0DQoNCl9fYWxsX18gPSBbJ2NvbW1vbnByZWZpeCcsICdleGlzdHMnLCAnZ2V0YXRpbWUnLCAnZ2V0Y3RpbWUnLCAnZ2V0bXRpbWUnLA0KICAgICAgICAgICAnZ2V0c2l6ZScsICdpc2RpcicsICdpc2ZpbGUnXQ0KDQoNCiMgRG9lcyBhIHBhdGggZXhpc3Q/DQojIFRoaXMgaXMgZmFsc2UgZm9yIGRhbmdsaW5nIHN5bWJvbGljIGxpbmtzIG9uIHN5c3RlbXMgdGhhdCBzdXBwb3J0IHRoZW0uDQpkZWYgZXhpc3RzKHBhdGgpOg0KICAgICIiIlRlc3Qgd2hldGhlciBhIHBhdGggZXhpc3RzLiAgUmV0dXJucyBGYWxzZSBmb3IgYnJva2VuIHN5bWJvbGljIGxpbmtzIiIiDQogICAgdHJ5Og0KICAgICAgICBvcy5zdGF0KHBhdGgpDQogICAgZXhjZXB0IG9zLmVycm9yOg0KICAgICAgICByZXR1cm4gRmFsc2UNCiAgICByZXR1cm4gVHJ1ZQ0KDQoNCiMgVGhpcyBmb2xsb3dzIHN5bWJvbGljIGxpbmtzLCBzbyBib3RoIGlzbGluaygpIGFuZCBpc2RpcigpIGNhbiBiZSB0cnVlDQojIGZvciB0aGUgc2FtZSBwYXRoIG9ubyBzeXN0ZW1zIHRoYXQgc3VwcG9ydCBzeW1saW5rcw0KZGVmIGlzZmlsZShwYXRoKToNCiAgICAiIiJUZXN0IHdoZXRoZXIgYSBwYXRoIGlzIGEgcmVndWxhciBmaWxlIiIiDQogICAgdHJ5Og0KICAgICAgICBzdCA9IG9zLnN0YXQocGF0aCkNCiAgICBleGNlcHQgb3MuZXJyb3I6DQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIHJldHVybiBzdGF0LlNfSVNSRUcoc3Quc3RfbW9kZSkNCg0KDQojIElzIGEgcGF0aCBhIGRpcmVjdG9yeT8NCiMgVGhpcyBmb2xsb3dzIHN5bWJvbGljIGxpbmtzLCBzbyBib3RoIGlzbGluaygpIGFuZCBpc2RpcigpDQojIGNhbiBiZSB0cnVlIGZvciB0aGUgc2FtZSBwYXRoIG9uIHN5c3RlbXMgdGhhdCBzdXBwb3J0IHN5bWxpbmtzDQpkZWYgaXNkaXIocyk6DQogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIHBhdGhuYW1lIHJlZmVycyB0byBhbiBleGlzdGluZyBkaXJlY3RvcnkuIiIiDQogICAgdHJ5Og0KICAgICAgICBzdCA9IG9zLnN0YXQocykNCiAgICBleGNlcHQgb3MuZXJyb3I6DQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIHJldHVybiBzdGF0LlNfSVNESVIoc3Quc3RfbW9kZSkNCg0KDQpkZWYgZ2V0c2l6ZShmaWxlbmFtZSk6DQogICAgIiIiUmV0dXJuIHRoZSBzaXplIG9mIGEgZmlsZSwgcmVwb3J0ZWQgYnkgb3Muc3RhdCgpLiIiIg0KICAgIHJldHVybiBvcy5zdGF0KGZpbGVuYW1lKS5zdF9zaXplDQoNCg0KZGVmIGdldG10aW1lKGZpbGVuYW1lKToNCiAgICAiIiJSZXR1cm4gdGhlIGxhc3QgbW9kaWZpY2F0aW9uIHRpbWUgb2YgYSBmaWxlLCByZXBvcnRlZCBieSBvcy5zdGF0KCkuIiIiDQogICAgcmV0dXJuIG9zLnN0YXQoZmlsZW5hbWUpLnN0X210aW1lDQoNCg0KZGVmIGdldGF0aW1lKGZpbGVuYW1lKToNCiAgICAiIiJSZXR1cm4gdGhlIGxhc3QgYWNjZXNzIHRpbWUgb2YgYSBmaWxlLCByZXBvcnRlZCBieSBvcy5zdGF0KCkuIiIiDQogICAgcmV0dXJuIG9zLnN0YXQoZmlsZW5hbWUpLnN0X2F0aW1lDQoNCg0KZGVmIGdldGN0aW1lKGZpbGVuYW1lKToNCiAgICAiIiJSZXR1cm4gdGhlIG1ldGFkYXRhIGNoYW5nZSB0aW1lIG9mIGEgZmlsZSwgcmVwb3J0ZWQgYnkgb3Muc3RhdCgpLiIiIg0KICAgIHJldHVybiBvcy5zdGF0KGZpbGVuYW1lKS5zdF9jdGltZQ0KDQoNCiMgUmV0dXJuIHRoZSBsb25nZXN0IHByZWZpeCBvZiBhbGwgbGlzdCBlbGVtZW50cy4NCmRlZiBjb21tb25wcmVmaXgobSk6DQogICAgIkdpdmVuIGEgbGlzdCBvZiBwYXRobmFtZXMsIHJldHVybnMgdGhlIGxvbmdlc3QgY29tbW9uIGxlYWRpbmcgY29tcG9uZW50Ig0KICAgIGlmIG5vdCBtOiByZXR1cm4gJycNCiAgICBzMSA9IG1pbihtKQ0KICAgIHMyID0gbWF4KG0pDQogICAgZm9yIGksIGMgaW4gZW51bWVyYXRlKHMxKToNCiAgICAgICAgaWYgYyAhPSBzMltpXToNCiAgICAgICAgICAgIHJldHVybiBzMVs6aV0NCiAgICByZXR1cm4gczENCg0KIyBTcGxpdCBhIHBhdGggaW4gcm9vdCBhbmQgZXh0ZW5zaW9uLg0KIyBUaGUgZXh0ZW5zaW9uIGlzIGV2ZXJ5dGhpbmcgc3RhcnRpbmcgYXQgdGhlIGxhc3QgZG90IGluIHRoZSBsYXN0DQojIHBhdGhuYW1lIGNvbXBvbmVudDsgdGhlIHJvb3QgaXMgZXZlcnl0aGluZyBiZWZvcmUgdGhhdC4NCiMgSXQgaXMgYWx3YXlzIHRydWUgdGhhdCByb290ICsgZXh0ID09IHAuDQoNCiMgR2VuZXJpYyBpbXBsZW1lbnRhdGlvbiBvZiBzcGxpdGV4dCwgdG8gYmUgcGFyYW1ldHJpemVkIHdpdGgNCiMgdGhlIHNlcGFyYXRvcnMNCmRlZiBfc3BsaXRleHQocCwgc2VwLCBhbHRzZXAsIGV4dHNlcCk6DQogICAgIiIiU3BsaXQgdGhlIGV4dGVuc2lvbiBmcm9tIGEgcGF0aG5hbWUuDQoNCiAgICBFeHRlbnNpb24gaXMgZXZlcnl0aGluZyBmcm9tIHRoZSBsYXN0IGRvdCB0byB0aGUgZW5kLCBpZ25vcmluZw0KICAgIGxlYWRpbmcgZG90cy4gIFJldHVybnMgIihyb290LCBleHQpIjsgZXh0IG1heSBiZSBlbXB0eS4iIiINCiAgICAjIE5PVEU6IFRoaXMgY29kZSBtdXN0IHdvcmsgZm9yIHRleHQgYW5kIGJ5dGVzIHN0cmluZ3MuDQoNCiAgICBzZXBJbmRleCA9IHAucmZpbmQoc2VwKQ0KICAgIGlmIGFsdHNlcDoNCiAgICAgICAgYWx0c2VwSW5kZXggPSBwLnJmaW5kKGFsdHNlcCkNCiAgICAgICAgc2VwSW5kZXggPSBtYXgoc2VwSW5kZXgsIGFsdHNlcEluZGV4KQ0KDQogICAgZG90SW5kZXggPSBwLnJmaW5kKGV4dHNlcCkNCiAgICBpZiBkb3RJbmRleCA+IHNlcEluZGV4Og0KICAgICAgICAjIHNraXAgYWxsIGxlYWRpbmcgZG90cw0KICAgICAgICBmaWxlbmFtZUluZGV4ID0gc2VwSW5kZXggKyAxDQogICAgICAgIHdoaWxlIGZpbGVuYW1lSW5kZXggPCBkb3RJbmRleDoNCiAgICAgICAgICAgIGlmIHBbZmlsZW5hbWVJbmRleDpmaWxlbmFtZUluZGV4KzFdICE9IGV4dHNlcDoNCiAgICAgICAgICAgICAgICByZXR1cm4gcFs6ZG90SW5kZXhdLCBwW2RvdEluZGV4Ol0NCiAgICAgICAgICAgIGZpbGVuYW1lSW5kZXggKz0gMQ0KDQogICAgcmV0dXJuIHAsIHBbOjBdDQo=',
'/Lib/webbrowser.py':'X19hbGxfXyA9IFsiRXJyb3IiLCAib3BlbiIsICJvcGVuX25ldyIsICJvcGVuX25ld190YWIiXQoKY2xhc3MgRXJyb3IoRXhjZXB0aW9uKToKICAgIHBhc3MKCl90YXJnZXQgPSB7IDA6ICcnLCAxOiAnX2JsYW5rJywgMjogJ19uZXcnIH0gICMgaGFjay4uLgoKCmRlZiBvcGVuKHVybCwgbmV3PTAsIGF1dG9yYWlzZT1UcnVlKToKICAgICIiIiAKICAgIG5ldyB3aW5kb3cgb3IgdGFiIGlzIG5vdCBjb250cm9sbGFibGUKICAgIG9uIHRoZSBjbGllbnQgc2lkZS4gYXV0b3JhaXNlIG5vdCBhdmFpbGFibGUuCiAgICAiIiIKICAgIGlmIHdpbi5vcGVuKHVybCwgX3RhcmdldFtuZXddKToKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQoKZGVmIG9wZW5fbmV3KHVybCk6CiAgICByZXR1cm4gb3Blbih1cmwsIDEpCgpkZWYgb3Blbl9uZXdfdGFiKHVybCk6CiAgICByZXR1cm4gb3Blbih1cmwsIDIpCgoK',
'/Lib/this.py':'cyA9ICIiIkd1ciBNcmEgYnMgQ2xndWJhLCBvbCBHdnogQ3JncmVmCgpPcm5oZ3ZzaHkgdmYgb3JnZ3JlIGd1bmEgaHR5bC4KUmtjeXZwdmcgdmYgb3JnZ3JlIGd1bmEgdnpjeXZwdmcuCkZ2emN5ciB2ZiBvcmdncmUgZ3VuYSBwYnpjeXJrLgpQYnpjeXJrIHZmIG9yZ2dyZSBndW5hIHBiemN5dnBuZ3JxLgpTeW5nIHZmIG9yZ2dyZSBndW5hIGFyZmdycS4KRmNuZWZyIHZmIG9yZ2dyZSBndW5hIHFyYWZyLgpFcm5xbm92eXZnbCBwYmhhZ2YuCkZjcnB2bnkgcG5mcmYgbmVyYSdnIGZjcnB2bnkgcmFiaHR1IGdiIG9lcm54IGd1ciBlaHlyZi4KTnlndWJodHUgY2VucGd2cG55dmdsIG9ybmdmIGNoZXZnbC4KUmVlYmVmIGZ1Ymh5cSBhcmlyZSBjbmZmIGZ2eXJhZ3lsLgpIYXlyZmYgcmtjeXZwdmd5bCBmdnlyYXBycS4KVmEgZ3VyIHNucHIgYnMgbnpvdnRodmdsLCBlcnNoZnIgZ3VyIGdyemNnbmd2YmEgZ2IgdGhyZmYuCkd1cmVyIGZ1Ymh5cSBvciBiYXItLSBuYXEgY2Vyc3Jlbm95bCBiYXlsIGJhciAtLWJvaXZiaGYgam5sIGdiIHFiIHZnLgpOeWd1Ymh0dSBndW5nIGpubCB6bmwgYWJnIG9yIGJvaXZiaGYgbmcgc3ZlZmcgaGF5cmZmIGxiaCdlciBRaGdwdS4KQWJqIHZmIG9yZ2dyZSBndW5hIGFyaXJlLgpOeWd1Ymh0dSBhcmlyZSB2ZiBic2dyYSBvcmdncmUgZ3VuYSAqZXZ0dWcqIGFiai4KVnMgZ3VyIHZ6Y3lyenJhZ25ndmJhIHZmIHVuZXEgZ2IgcmtjeW52YSwgdmcnZiBuIG9ucSB2cXJuLgpWcyBndXIgdnpjeXJ6cmFnbmd2YmEgdmYgcm5mbCBnYiBya2N5bnZhLCB2ZyB6bmwgb3IgbiB0YmJxIHZxcm4uCkFuenJmY25wcmYgbmVyIGJhciB1YmF4dmF0IHRlcm5nIHZxcm4gLS0geXJnJ2YgcWIgemJlciBicyBndWJmciEiIiIKCmQgPSB7fQpmb3IgYyBpbiAoNjUsIDk3KToKICAgIGZvciBpIGluIHJhbmdlKDI2KToKICAgICAgICBkW2NocihpK2MpXSA9IGNocigoaSsxMykgJSAyNiArIGMpCgpwcmludCgiIi5qb2luKFtkLmdldChjLCBjKSBmb3IgYyBpbiBzXSkpCg==',
'/Lib/datetime.py':'IiIiQ29uY3JldGUgZGF0ZS90aW1lIGFuZCByZWxhdGVkIHR5cGVzIC0tIHByb3RvdHlwZSBpbXBsZW1lbnRlZCBpbiBQeXRob24uCgpTZWUgaHR0cDovL3d3dy56b3BlLm9yZy9NZW1iZXJzL2ZkcmFrZS9EYXRlVGltZVdpa2kvRnJvbnRQYWdlCgpTZWUgYWxzbyBodHRwOi8vZGlyLnlhaG9vLmNvbS9SZWZlcmVuY2UvY2FsZW5kYXJzLwoKRm9yIGEgcHJpbWVyIG9uIERTVCwgaW5jbHVkaW5nIG1hbnkgY3VycmVudCBEU1QgcnVsZXMsIHNlZQpodHRwOi8vd2ViZXhoaWJpdHMub3JnL2RheWxpZ2h0c2F2aW5nLwoKRm9yIG1vcmUgYWJvdXQgRFNUIHRoYW4geW91IGV2ZXIgd2FudGVkIHRvIGtub3csIHNlZQpmdHA6Ly9lbHNpZS5uY2kubmloLmdvdi9wdWIvCgpTb3VyY2VzIGZvciB0aW1lIHpvbmUgYW5kIERTVCBkYXRhOiBodHRwOi8vd3d3LnR3aW5zdW4uY29tL3R6L3R6LWxpbmsuaHRtCgpUaGlzIHdhcyBvcmlnaW5hbGx5IGNvcGllZCBmcm9tIHRoZSBzYW5kYm94IG9mIHRoZSBDUHl0aG9uIENWUyByZXBvc2l0b3J5LgpUaGFua3MgdG8gVGltIFBldGVycyBmb3Igc3VnZ2VzdGluZyB1c2luZyBpdC4KIiIiCgppbXBvcnQgdGltZSBhcyBfdGltZQppbXBvcnQgbWF0aCBhcyBfbWF0aAoKZGVmIF9zdGF0ZV9jbXAoeCwgeSk6CiAgICByZXR1cm4gMCBpZiB4ID09IHkgZWxzZSAxIGlmIHggPiB5IGVsc2UgLTEKCmRlZiBfdHVwbGVfY21wKHgsIHkpOgogICAgcmV0dXJuIDAgaWYgeCA9PSB5IGVsc2UgMSBpZiB4ID4geSBlbHNlIC0xCgpNSU5ZRUFSID0gMQpNQVhZRUFSID0gOTk5OQpfTUFYT1JESU5BTCA9IDM2NTIwNTkgIyBkYXRlLm1heC50b29yZGluYWwoKQoKIyBVdGlsaXR5IGZ1bmN0aW9ucywgYWRhcHRlZCBmcm9tIFB5dGhvbidzIERlbW8vY2xhc3Nlcy9EYXRlcy5weSwgd2hpY2gKIyBhbHNvIGFzc3VtZXMgdGhlIGN1cnJlbnQgR3JlZ29yaWFuIGNhbGVuZGFyIGluZGVmaW5pdGVseSBleHRlbmRlZCBpbgojIGJvdGggZGlyZWN0aW9ucy4gIERpZmZlcmVuY2U6ICBEYXRlcy5weSBjYWxscyBKYW51YXJ5IDEgb2YgeWVhciAwIGRheQojIG51bWJlciAxLiAgVGhlIGNvZGUgaGVyZSBjYWxscyBKYW51YXJ5IDEgb2YgeWVhciAxIGRheSBudW1iZXIgMS4gIFRoaXMgaXMKIyB0byBtYXRjaCB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgInByb2xlcHRpYyBHcmVnb3JpYW4iIGNhbGVuZGFyIGluIERlcnNob3dpdHoKIyBhbmQgUmVpbmdvbGQncyAiQ2FsZW5kcmljYWwgQ2FsY3VsYXRpb25zIiwgd2hlcmUgaXQncyB0aGUgYmFzZSBjYWxlbmRhcgojIGZvciBhbGwgY29tcHV0YXRpb25zLiAgU2VlIHRoZSBib29rIGZvciBhbGdvcml0aG1zIGZvciBjb252ZXJ0aW5nIGJldHdlZW4KIyBwcm9sZXB0aWMgR3JlZ29yaWFuIG9yZGluYWxzIGFuZCBtYW55IG90aGVyIGNhbGVuZGFyIHN5c3RlbXMuCgpfREFZU19JTl9NT05USCA9IFtOb25lLCAzMSwgMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXQoKX0RBWVNfQkVGT1JFX01PTlRIID0gW05vbmVdCmRibSA9IDAKZm9yIGRpbSBpbiBfREFZU19JTl9NT05USFsxOl06CiAgICBfREFZU19CRUZPUkVfTU9OVEguYXBwZW5kKGRibSkKICAgIGRibSArPSBkaW0KI2RlbCBkYm0sIGRpbQoKZGVmIF9pc19sZWFwKHllYXIpOgogICAgInllYXIgLT4gMSBpZiBsZWFwIHllYXIsIGVsc2UgMC4iCiAgICByZXR1cm4geWVhciAlIDQgPT0gMCBhbmQgKHllYXIgJSAxMDAgIT0gMCBvciB5ZWFyICUgNDAwID09IDApCgpkZWYgX2RheXNfYmVmb3JlX3llYXIoeWVhcik6CiAgICAieWVhciAtPiBudW1iZXIgb2YgZGF5cyBiZWZvcmUgSmFudWFyeSAxc3Qgb2YgeWVhci4iCiAgICB5ID0geWVhciAtIDEKICAgIHJldHVybiB5KjM2NSArIHkvLzQgLSB5Ly8xMDAgKyB5Ly80MDAKCmRlZiBfZGF5c19pbl9tb250aCh5ZWFyLCBtb250aCk6CiAgICAieWVhciwgbW9udGggLT4gbnVtYmVyIG9mIGRheXMgaW4gdGhhdCBtb250aCBpbiB0aGF0IHllYXIuIgogICAgYXNzZXJ0IDEgPD0gbW9udGggPD0gMTIsIG1vbnRoCiAgICBpZiBtb250aCA9PSAyIGFuZCBfaXNfbGVhcCh5ZWFyKToKICAgICAgICByZXR1cm4gMjkKICAgIHJldHVybiBfREFZU19JTl9NT05USFttb250aF0KCmRlZiBfZGF5c19iZWZvcmVfbW9udGgoeWVhciwgbW9udGgpOgogICAgInllYXIsIG1vbnRoIC0+IG51bWJlciBvZiBkYXlzIGluIHllYXIgcHJlY2VlZGluZyBmaXJzdCBkYXkgb2YgbW9udGguIgogICAgYXNzZXJ0IDEgPD0gbW9udGggPD0gMTIsICdtb250aCBtdXN0IGJlIGluIDEuLjEyJwogICAgcmV0dXJuIF9EQVlTX0JFRk9SRV9NT05USFttb250aF0gKyAobW9udGggPiAyIGFuZCBfaXNfbGVhcCh5ZWFyKSkKCmRlZiBfeW1kMm9yZCh5ZWFyLCBtb250aCwgZGF5KToKICAgICJ5ZWFyLCBtb250aCwgZGF5IC0+IG9yZGluYWwsIGNvbnNpZGVyaW5nIDAxLUphbi0wMDAxIGFzIGRheSAxLiIKICAgIGFzc2VydCAxIDw9IG1vbnRoIDw9IDEyLCAnbW9udGggbXVzdCBiZSBpbiAxLi4xMicKICAgIGRpbSA9IF9kYXlzX2luX21vbnRoKHllYXIsIG1vbnRoKQogICAgYXNzZXJ0IDEgPD0gZGF5IDw9IGRpbSwgKCdkYXkgbXVzdCBiZSBpbiAxLi4lZCcgJSBkaW0pCiAgICByZXR1cm4gKF9kYXlzX2JlZm9yZV95ZWFyKHllYXIpICsKICAgICAgICAgICAgX2RheXNfYmVmb3JlX21vbnRoKHllYXIsIG1vbnRoKSArCiAgICAgICAgICAgIGRheSkKCl9ESTQwMFkgPSBfZGF5c19iZWZvcmVfeWVhcig0MDEpICAgICMgbnVtYmVyIG9mIGRheXMgaW4gNDAwIHllYXJzCl9ESTEwMFkgPSBfZGF5c19iZWZvcmVfeWVhcigxMDEpICAgICMgICAgIiAgICAiICAgIiAgICIgMTAwICAgIgpfREk0WSAgID0gX2RheXNfYmVmb3JlX3llYXIoNSkgICAgICAjICAgICIgICAgIiAgICIgICAiICAgNCAgICIKCiMgQSA0LXllYXIgY3ljbGUgaGFzIGFuIGV4dHJhIGxlYXAgZGF5IG92ZXIgd2hhdCB3ZSdkIGdldCBmcm9tIHBhc3RpbmcKIyB0b2dldGhlciA0IHNpbmdsZSB5ZWFycy4KYXNzZXJ0IF9ESTRZID09IDQgKiAzNjUgKyAxCgojIFNpbWlsYXJseSwgYSA0MDAteWVhciBjeWNsZSBoYXMgYW4gZXh0cmEgbGVhcCBkYXkgb3ZlciB3aGF0IHdlJ2QgZ2V0IGZyb20KIyBwYXN0aW5nIHRvZ2V0aGVyIDQgMTAwLXllYXIgY3ljbGVzLgphc3NlcnQgX0RJNDAwWSA9PSA0ICogX0RJMTAwWSArIDEKCiMgT1RPSCwgYSAxMDAteWVhciBjeWNsZSBoYXMgb25lIGZld2VyIGxlYXAgZGF5IHRoYW4gd2UnZCBnZXQgZnJvbQojIHBhc3RpbmcgdG9nZXRoZXIgMjUgNC15ZWFyIGN5Y2xlcy4KYXNzZXJ0IF9ESTEwMFkgPT0gMjUgKiBfREk0WSAtIDEKCmRlZiBfb3JkMnltZChuKToKICAgICJvcmRpbmFsIC0+ICh5ZWFyLCBtb250aCwgZGF5KSwgY29uc2lkZXJpbmcgMDEtSmFuLTAwMDEgYXMgZGF5IDEuIgoKICAgICMgbiBpcyBhIDEtYmFzZWQgaW5kZXgsIHN0YXJ0aW5nIGF0IDEtSmFuLTEuICBUaGUgcGF0dGVybiBvZiBsZWFwIHllYXJzCiAgICAjIHJlcGVhdHMgZXhhY3RseSBldmVyeSA0MDAgeWVhcnMuICBUaGUgYmFzaWMgc3RyYXRlZ3kgaXMgdG8gZmluZCB0aGUKICAgICMgY2xvc2VzdCA0MDAteWVhciBib3VuZGFyeSBhdCBvciBiZWZvcmUgbiwgdGhlbiB3b3JrIHdpdGggdGhlIG9mZnNldAogICAgIyBmcm9tIHRoYXQgYm91bmRhcnkgdG8gbi4gIExpZmUgaXMgbXVjaCBjbGVhcmVyIGlmIHdlIHN1YnRyYWN0IDEgZnJvbQogICAgIyBuIGZpcnN0IC0tIHRoZW4gdGhlIHZhbHVlcyBvZiBuIGF0IDQwMC15ZWFyIGJvdW5kYXJpZXMgYXJlIGV4YWN0bHkKICAgICMgdGhvc2UgZGl2aXNpYmxlIGJ5IF9ESTQwMFk6CiAgICAjCiAgICAjICAgICBEICBNICAgWSAgICAgICAgICAgIG4gICAgICAgICAgICAgIG4tMQogICAgIyAgICAgLS0gLS0tIC0tLS0gICAgICAgIC0tLS0tLS0tLS0gICAgIC0tLS0tLS0tLS0tLS0tLS0KICAgICMgICAgIDMxIERlYyAtNDAwICAgICAgICAtX0RJNDAwWSAgICAgICAtX0RJNDAwWSAtMQogICAgIyAgICAgIDEgSmFuIC0zOTkgICAgICAgICAtX0RJNDAwWSArMSAgIC1fREk0MDBZICAgICAgNDAwLXllYXIgYm91bmRhcnkKICAgICMgICAgIC4uLgogICAgIyAgICAgMzAgRGVjICAwMDAgICAgICAgIC0xICAgICAgICAgICAgIC0yCiAgICAjICAgICAzMSBEZWMgIDAwMCAgICAgICAgIDAgICAgICAgICAgICAgLTEKICAgICMgICAgICAxIEphbiAgMDAxICAgICAgICAgMSAgICAgICAgICAgICAgMCAgICAgICAgICAgIDQwMC15ZWFyIGJvdW5kYXJ5CiAgICAjICAgICAgMiBKYW4gIDAwMSAgICAgICAgIDIgICAgICAgICAgICAgIDEKICAgICMgICAgICAzIEphbiAgMDAxICAgICAgICAgMyAgICAgICAgICAgICAgMgogICAgIyAgICAgLi4uCiAgICAjICAgICAzMSBEZWMgIDQwMCAgICAgICAgIF9ESTQwMFkgICAgICAgIF9ESTQwMFkgLTEKICAgICMgICAgICAxIEphbiAgNDAxICAgICAgICAgX0RJNDAwWSArMSAgICAgX0RJNDAwWSAgICAgIDQwMC15ZWFyIGJvdW5kYXJ5CiAgICBuIC09IDEKICAgIG40MDAsIG4gPSBkaXZtb2QobiwgX0RJNDAwWSkKICAgIHllYXIgPSBuNDAwICogNDAwICsgMSAgICMgLi4uLCAtMzk5LCAxLCA0MDEsIC4uLgoKICAgICMgTm93IG4gaXMgdGhlIChub24tbmVnYXRpdmUpIG9mZnNldCwgaW4gZGF5cywgZnJvbSBKYW51YXJ5IDEgb2YgeWVhciwgdG8KICAgICMgdGhlIGRlc2lyZWQgZGF0ZS4gIE5vdyBjb21wdXRlIGhvdyBtYW55IDEwMC15ZWFyIGN5Y2xlcyBwcmVjZWRlIG4uCiAgICAjIE5vdGUgdGhhdCBpdCdzIHBvc3NpYmxlIGZvciBuMTAwIHRvIGVxdWFsIDQhICBJbiB0aGF0IGNhc2UgNCBmdWxsCiAgICAjIDEwMC15ZWFyIGN5Y2xlcyBwcmVjZWRlIHRoZSBkZXNpcmVkIGRheSwgd2hpY2ggaW1wbGllcyB0aGUgZGVzaXJlZAogICAgIyBkYXkgaXMgRGVjZW1iZXIgMzEgYXQgdGhlIGVuZCBvZiBhIDQwMC15ZWFyIGN5Y2xlLgogICAgbjEwMCwgbiA9IGRpdm1vZChuLCBfREkxMDBZKQoKICAgICMgTm93IGNvbXB1dGUgaG93IG1hbnkgNC15ZWFyIGN5Y2xlcyBwcmVjZWRlIGl0LgogICAgbjQsIG4gPSBkaXZtb2QobiwgX0RJNFkpCgogICAgIyBBbmQgbm93IGhvdyBtYW55IHNpbmdsZSB5ZWFycy4gIEFnYWluIG4xIGNhbiBiZSA0LCBhbmQgYWdhaW4gbWVhbmluZwogICAgIyB0aGF0IHRoZSBkZXNpcmVkIGRheSBpcyBEZWNlbWJlciAzMSBhdCB0aGUgZW5kIG9mIHRoZSA0LXllYXIgY3ljbGUuCiAgICBuMSwgbiA9IGRpdm1vZChuLCAzNjUpCgogICAgeWVhciArPSBuMTAwICogMTAwICsgbjQgKiA0ICsgbjEKICAgIGlmIG4xID09IDQgb3IgbjEwMCA9PSA0OgogICAgICAgIGFzc2VydCBuID09IDAKICAgICAgICByZXR1cm4geWVhci0xLCAxMiwgMzEKCiAgICAjIE5vdyB0aGUgeWVhciBpcyBjb3JyZWN0LCBhbmQgbiBpcyB0aGUgb2Zmc2V0IGZyb20gSmFudWFyeSAxLiAgV2UgZmluZAogICAgIyB0aGUgbW9udGggdmlhIGFuIGVzdGltYXRlIHRoYXQncyBlaXRoZXIgZXhhY3Qgb3Igb25lIHRvbyBsYXJnZS4KICAgIGxlYXB5ZWFyID0gbjEgPT0gMyBhbmQgKG40ICE9IDI0IG9yIG4xMDAgPT0gMykKICAgIGFzc2VydCBsZWFweWVhciA9PSBfaXNfbGVhcCh5ZWFyKQogICAgbW9udGggPSAobiArIDUwKSA+PiA1CiAgICBwcmVjZWRpbmcgPSBfREFZU19CRUZPUkVfTU9OVEhbbW9udGhdICsgKG1vbnRoID4gMiBhbmQgbGVhcHllYXIpCiAgICBpZiBwcmVjZWRpbmcgPiBuOiAgIyBlc3RpbWF0ZSBpcyB0b28gbGFyZ2UKICAgICAgICBtb250aCAtPSAxCiAgICAgICAgcHJlY2VkaW5nIC09IF9EQVlTX0lOX01PTlRIW21vbnRoXSArIChtb250aCA9PSAyIGFuZCBsZWFweWVhcikKICAgIG4gLT0gcHJlY2VkaW5nCiAgICBhc3NlcnQgMCA8PSBuIDwgX2RheXNfaW5fbW9udGgoeWVhciwgbW9udGgpCgogICAgIyBOb3cgdGhlIHllYXIgYW5kIG1vbnRoIGFyZSBjb3JyZWN0LCBhbmQgbiBpcyB0aGUgb2Zmc2V0IGZyb20gdGhlCiAgICAjIHN0YXJ0IG9mIHRoYXQgbW9udGg6ICB3ZSdyZSBkb25lIQogICAgcmV0dXJuIHllYXIsIG1vbnRoLCBuKzEKCiMgTW9udGggYW5kIGRheSBuYW1lcy4gIEZvciBsb2NhbGl6ZWQgdmVyc2lvbnMsIHNlZSB0aGUgY2FsZW5kYXIgbW9kdWxlLgpfTU9OVEhOQU1FUyA9IFtOb25lLCAiSmFuIiwgIkZlYiIsICJNYXIiLCAiQXByIiwgIk1heSIsICJKdW4iLAogICAgICAgICAgICAgICAgICAgICAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiXQpfREFZTkFNRVMgPSBbTm9uZSwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0IiwgIlN1biJdCgoKZGVmIF9idWlsZF9zdHJ1Y3RfdGltZSh5LCBtLCBkLCBoaCwgbW0sIHNzLCBkc3RmbGFnKToKICAgIHdkYXkgPSAoX3ltZDJvcmQoeSwgbSwgZCkgKyA2KSAlIDcKICAgIGRudW0gPSBfZGF5c19iZWZvcmVfbW9udGgoeSwgbSkgKyBkCiAgICByZXR1cm4gX3RpbWUuc3RydWN0X3RpbWUoKHksIG0sIGQsIGhoLCBtbSwgc3MsIHdkYXksIGRudW0sIGRzdGZsYWcpKQoKZGVmIF9mb3JtYXRfdGltZShoaCwgbW0sIHNzLCB1cyk6CiAgICAjIFNraXAgdHJhaWxpbmcgbWljcm9zZWNvbmRzIHdoZW4gdXM9PTAuCiAgICByZXN1bHQgPSAiJTAyZDolMDJkOiUwMmQiICUgKGhoLCBtbSwgc3MpCiAgICBpZiB1czoKICAgICAgICByZXN1bHQgKz0gIi4lMDZkIiAlIHVzCiAgICByZXR1cm4gcmVzdWx0CgojIENvcnJlY3RseSBzdWJzdGl0dXRlIGZvciAleiBhbmQgJVogZXNjYXBlcyBpbiBzdHJmdGltZSBmb3JtYXRzLgpkZWYgX3dyYXBfc3RyZnRpbWUob2JqZWN0LCBmb3JtYXQsIHRpbWV0dXBsZSk6CiAgICB5ZWFyID0gdGltZXR1cGxlWzBdCiAgICBpZiB5ZWFyIDwgMTAwMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ5ZWFyPSVkIGlzIGJlZm9yZSAxMDAwOyB0aGUgZGF0ZXRpbWUgc3RyZnRpbWUoKSAiCiAgICAgICAgICAgICAgICAgICAgICAgICAibWV0aG9kcyByZXF1aXJlIHllYXIgPj0gMTAwMCIgJSB5ZWFyKQogICAgIyBEb24ndCBjYWxsIHV0Y29mZnNldCgpIG9yIHR6bmFtZSgpIHVubGVzcyBhY3R1YWxseSBuZWVkZWQuCiAgICBmcmVwbGFjZSA9IE5vbmUgIyB0aGUgc3RyaW5nIHRvIHVzZSBmb3IgJWYKICAgIHpyZXBsYWNlID0gTm9uZSAjIHRoZSBzdHJpbmcgdG8gdXNlIGZvciAlegogICAgWnJlcGxhY2UgPSBOb25lICMgdGhlIHN0cmluZyB0byB1c2UgZm9yICVaCgogICAgIyBTY2FuIGZvcm1hdCBmb3IgJXogYW5kICVaIGVzY2FwZXMsIHJlcGxhY2luZyBhcyBuZWVkZWQuCiAgICBuZXdmb3JtYXQgPSBbXQogICAgcHVzaCA9IG5ld2Zvcm1hdC5hcHBlbmQKICAgIGksIG4gPSAwLCBsZW4oZm9ybWF0KQogICAgd2hpbGUgaSA8IG46CiAgICAgICAgY2ggPSBmb3JtYXRbaV0KICAgICAgICBpICs9IDEKICAgICAgICBpZiBjaCA9PSAnJSc6CiAgICAgICAgICAgIGlmIGkgPCBuOgogICAgICAgICAgICAgICAgY2ggPSBmb3JtYXRbaV0KICAgICAgICAgICAgICAgIGkgKz0gMQogICAgICAgICAgICAgICAgaWYgY2ggPT0gJ2YnOgogICAgICAgICAgICAgICAgICAgIGlmIGZyZXBsYWNlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGZyZXBsYWNlID0gJyUwNmQnICUgZ2V0YXR0cihvYmplY3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWljcm9zZWNvbmQnLCAwKQogICAgICAgICAgICAgICAgICAgIG5ld2Zvcm1hdC5hcHBlbmQoZnJlcGxhY2UpCiAgICAgICAgICAgICAgICBlbGlmIGNoID09ICd6JzoKICAgICAgICAgICAgICAgICAgICBpZiB6cmVwbGFjZSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICB6cmVwbGFjZSA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAidXRjb2Zmc2V0Iik6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBvYmplY3QudXRjb2Zmc2V0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9mZnNldCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gJysnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgb2Zmc2V0LmRheXMgPCAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAtb2Zmc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ24gPSAnLScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLCBtID0gZGl2bW9kKG9mZnNldCwgdGltZWRlbHRhKGhvdXJzPTEpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBub3QgbSAlIHRpbWVkZWx0YShtaW51dGVzPTEpLCAid2hvbGUgbWludXRlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gLy89IHRpbWVkZWx0YShtaW51dGVzPTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgenJlcGxhY2UgPSAnJWMlMDJkJTAyZCcgJSAoc2lnbiwgaCwgbSkKICAgICAgICAgICAgICAgICAgICBhc3NlcnQgJyUnIG5vdCBpbiB6cmVwbGFjZQogICAgICAgICAgICAgICAgICAgIG5ld2Zvcm1hdC5hcHBlbmQoenJlcGxhY2UpCiAgICAgICAgICAgICAgICBlbGlmIGNoID09ICdaJzoKICAgICAgICAgICAgICAgICAgICBpZiBacmVwbGFjZSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBacmVwbGFjZSA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAidHpuYW1lIik6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gb2JqZWN0LnR6bmFtZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgc3RyZnRpbWUgaXMgZ29pbmcgdG8gaGF2ZSBhdCB0aGlzOiBlc2NhcGUgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFpyZXBsYWNlID0gcy5yZXBsYWNlKCclJywgJyUlJykKICAgICAgICAgICAgICAgICAgICBuZXdmb3JtYXQuYXBwZW5kKFpyZXBsYWNlKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwdXNoKCclJykKICAgICAgICAgICAgICAgICAgICBwdXNoKGNoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHVzaCgnJScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHVzaChjaCkKICAgIG5ld2Zvcm1hdCA9ICIiLmpvaW4obmV3Zm9ybWF0KQogICAgcmV0dXJuIF90aW1lLnN0cmZ0aW1lKG5ld2Zvcm1hdCwgdGltZXR1cGxlKQoKZGVmIF9jYWxsX3R6aW5mb19tZXRob2QodHppbmZvLCBtZXRobmFtZSwgdHppbmZvYXJnKToKICAgIGlmIHR6aW5mbyBpcyBOb25lOgogICAgICAgIHJldHVybiBOb25lCiAgICByZXR1cm4gZ2V0YXR0cih0emluZm8sIG1ldGhuYW1lKSh0emluZm9hcmcpCgojIEp1c3QgcmFpc2UgVHlwZUVycm9yIGlmIHRoZSBhcmcgaXNuJ3QgTm9uZSBvciBhIHN0cmluZy4KZGVmIF9jaGVja190em5hbWUobmFtZSk6CiAgICBpZiBuYW1lIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShuYW1lLCBzdHIpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigidHppbmZvLnR6bmFtZSgpIG11c3QgcmV0dXJuIE5vbmUgb3Igc3RyaW5nLCAiCiAgICAgICAgICAgICAgICAgICAgICAgICJub3QgJyVzJyIgJSB0eXBlKG5hbWUpKQoKIyBuYW1lIGlzIHRoZSBvZmZzZXQtcHJvZHVjaW5nIG1ldGhvZCwgInV0Y29mZnNldCIgb3IgImRzdCIuCiMgb2Zmc2V0IGlzIHdoYXQgaXQgcmV0dXJuZWQuCiMgSWYgb2Zmc2V0IGlzbid0IE5vbmUgb3IgdGltZWRlbHRhLCByYWlzZXMgVHlwZUVycm9yLgojIElmIG9mZnNldCBpcyBOb25lLCByZXR1cm5zIE5vbmUuCiMgRWxzZSBvZmZzZXQgaXMgY2hlY2tlZCBmb3IgYmVpbmcgaW4gcmFuZ2UsIGFuZCBhIHdob2xlICMgb2YgbWludXRlcy4KIyBJZiBpdCBpcywgaXRzIGludGVnZXIgdmFsdWUgaXMgcmV0dXJuZWQuICBFbHNlIFZhbHVlRXJyb3IgaXMgcmFpc2VkLgpkZWYgX2NoZWNrX3V0Y19vZmZzZXQobmFtZSwgb2Zmc2V0KToKICAgIGFzc2VydCBuYW1lIGluICgidXRjb2Zmc2V0IiwgImRzdCIpCiAgICBpZiBvZmZzZXQgaXMgTm9uZToKICAgICAgICByZXR1cm4KICAgIGlmIG5vdCBpc2luc3RhbmNlKG9mZnNldCwgdGltZWRlbHRhKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoInR6aW5mby4lcygpIG11c3QgcmV0dXJuIE5vbmUgIgogICAgICAgICAgICAgICAgICAgICAgICAib3IgdGltZWRlbHRhLCBub3QgJyVzJyIgJSAobmFtZSwgdHlwZShvZmZzZXQpKSkKICAgIGlmIG9mZnNldCAlIHRpbWVkZWx0YShtaW51dGVzPTEpIG9yIG9mZnNldC5taWNyb3NlY29uZHM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidHppbmZvLiVzKCkgbXVzdCByZXR1cm4gYSB3aG9sZSBudW1iZXIgIgogICAgICAgICAgICAgICAgICAgICAgICAgIm9mIG1pbnV0ZXMsIGdvdCAlcyIgJSAobmFtZSwgb2Zmc2V0KSkKICAgIGlmIG5vdCAtdGltZWRlbHRhKDEpIDwgb2Zmc2V0IDwgdGltZWRlbHRhKDEpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIiVzKCk9JXMsIG11c3QgYmUgbXVzdCBiZSBzdHJpY3RseSBiZXR3ZWVuIgogICAgICAgICAgICAgICAgICAgICAgICAgIiAtdGltZWRlbHRhKGhvdXJzPTI0KSBhbmQgdGltZWRlbHRhKGhvdXJzPTI0KSIKICAgICAgICAgICAgICAgICAgICAgICAgICUgKG5hbWUsIG9mZnNldCkpCgpkZWYgX2NoZWNrX2RhdGVfZmllbGRzKHllYXIsIG1vbnRoLCBkYXkpOgogICAgaWYgbm90IGlzaW5zdGFuY2UoeWVhciwgaW50KToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ludCBleHBlY3RlZCcpCiAgICBpZiBub3QgTUlOWUVBUiA8PSB5ZWFyIDw9IE1BWFlFQVI6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigneWVhciBtdXN0IGJlIGluICVkLi4lZCcgJSAoTUlOWUVBUiwgTUFYWUVBUiksIHllYXIpCiAgICBpZiBub3QgMSA8PSBtb250aCA8PSAxMjoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdtb250aCBtdXN0IGJlIGluIDEuLjEyJywgbW9udGgpCiAgICBkaW0gPSBfZGF5c19pbl9tb250aCh5ZWFyLCBtb250aCkKICAgIGlmIG5vdCAxIDw9IGRheSA8PSBkaW06CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignZGF5IG11c3QgYmUgaW4gMS4uJWQnICUgZGltLCBkYXkpCgpkZWYgX2NoZWNrX3RpbWVfZmllbGRzKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWNyb3NlY29uZCk6CiAgICBpZiBub3QgaXNpbnN0YW5jZShob3VyLCBpbnQpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcignaW50IGV4cGVjdGVkJykKICAgIGlmIG5vdCAwIDw9IGhvdXIgPD0gMjM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignaG91ciBtdXN0IGJlIGluIDAuLjIzJywgaG91cikKICAgIGlmIG5vdCAwIDw9IG1pbnV0ZSA8PSA1OToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdtaW51dGUgbXVzdCBiZSBpbiAwLi41OScsIG1pbnV0ZSkKICAgIGlmIG5vdCAwIDw9IHNlY29uZCA8PSA1OToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdzZWNvbmQgbXVzdCBiZSBpbiAwLi41OScsIHNlY29uZCkKICAgIGlmIG5vdCAwIDw9IG1pY3Jvc2Vjb25kIDw9IDk5OTk5OToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdtaWNyb3NlY29uZCBtdXN0IGJlIGluIDAuLjk5OTk5OScsIG1pY3Jvc2Vjb25kKQoKZGVmIF9jaGVja190emluZm9fYXJnKHR6KToKICAgIGlmIHR6IGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZSh0eiwgdHppbmZvKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoInR6aW5mbyBhcmd1bWVudCBtdXN0IGJlIE5vbmUgb3Igb2YgYSB0emluZm8gc3ViY2xhc3MiKQoKZGVmIF9jbXBlcnJvcih4LCB5KToKICAgIHJhaXNlIFR5cGVFcnJvcigiY2FuJ3QgY29tcGFyZSAnJXMnIHRvICclcyciICUgKAogICAgICAgICAgICAgICAgICAgIHR5cGUoeCkuX19uYW1lX18sIHR5cGUoeSkuX19uYW1lX18pKQoKY2xhc3MgdGltZWRlbHRhOgogICAgIiIiUmVwcmVzZW50IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdHdvIGRhdGV0aW1lIG9iamVjdHMuCgogICAgU3VwcG9ydGVkIG9wZXJhdG9yczoKCiAgICAtIGFkZCwgc3VidHJhY3QgdGltZWRlbHRhCiAgICAtIHVuYXJ5IHBsdXMsIG1pbnVzLCBhYnMKICAgIC0gY29tcGFyZSB0byB0aW1lZGVsdGEKICAgIC0gbXVsdGlwbHksIGRpdmlkZSBieSBpbnQvbG9uZwoKICAgIEluIGFkZGl0aW9uLCBkYXRldGltZSBzdXBwb3J0cyBzdWJ0cmFjdGlvbiBvZiB0d28gZGF0ZXRpbWUgb2JqZWN0cwogICAgcmV0dXJuaW5nIGEgdGltZWRlbHRhLCBhbmQgYWRkaXRpb24gb3Igc3VidHJhY3Rpb24gb2YgYSBkYXRldGltZQogICAgYW5kIGEgdGltZWRlbHRhIGdpdmluZyBhIGRhdGV0aW1lLgoKICAgIFJlcHJlc2VudGF0aW9uOiAoZGF5cywgc2Vjb25kcywgbWljcm9zZWNvbmRzKS4gIFdoeT8gIEJlY2F1c2UgSQogICAgZmVsdCBsaWtlIGl0LgogICAgIiIiCiAgICBfX3Nsb3RzX18gPSAnX2RheXMnLCAnX3NlY29uZHMnLCAnX21pY3Jvc2Vjb25kcycKCiAgICBkZWYgX19uZXdfXyhjbHMsIGRheXM9MCwgc2Vjb25kcz0wLCBtaWNyb3NlY29uZHM9MCwKICAgICAgICAgICAgICAgIG1pbGxpc2Vjb25kcz0wLCBtaW51dGVzPTAsIGhvdXJzPTAsIHdlZWtzPTApOgogICAgICAgICMgRG9pbmcgdGhpcyBlZmZpY2llbnRseSBhbmQgYWNjdXJhdGVseSBpbiBDIGlzIGdvaW5nIHRvIGJlIGRpZmZpY3VsdAogICAgICAgICMgYW5kIGVycm9yLXByb25lLCBkdWUgdG8gdWJpcXVpdG91cyBvdmVyZmxvdyBwb3NzaWJpbGl0aWVzLCBhbmQgdGhhdAogICAgICAgICMgQyBkb3VibGUgZG9lc24ndCBoYXZlIGVub3VnaCBiaXRzIG9mIHByZWNpc2lvbiB0byByZXByZXNlbnQKICAgICAgICAjIG1pY3Jvc2Vjb25kcyBvdmVyIDEwSyB5ZWFycyBmYWl0aGZ1bGx5LiAgVGhlIGNvZGUgaGVyZSB0cmllcyB0byBtYWtlCiAgICAgICAgIyBleHBsaWNpdCB3aGVyZSBnby1mYXN0IGFzc3VtcHRpb25zIGNhbiBiZSByZWxpZWQgb24sIGluIG9yZGVyIHRvCiAgICAgICAgIyBndWlkZSB0aGUgQyBpbXBsZW1lbnRhdGlvbjsgaXQncyB3YXkgbW9yZSBjb252b2x1dGVkIHRoYW4gc3BlZWQtCiAgICAgICAgIyBpZ25vcmluZyBhdXRvLW92ZXJmbG93LXRvLWxvbmcgaWRpb21hdGljIFB5dGhvbiBjb3VsZCBiZS4KCiAgICAgICAgIyBYWFggQ2hlY2sgdGhhdCBhbGwgaW5wdXRzIGFyZSBpbnRzIG9yIGZsb2F0cy4KCiAgICAgICAgIyBGaW5hbCB2YWx1ZXMsIGFsbCBpbnRlZ2VyLgogICAgICAgICMgcyBhbmQgdXMgZml0IGluIDMyLWJpdCBzaWduZWQgaW50czsgZCBpc24ndCBib3VuZGVkLgogICAgICAgIGQgPSBzID0gdXMgPSAwCgogICAgICAgICMgTm9ybWFsaXplIGV2ZXJ5dGhpbmcgdG8gZGF5cywgc2Vjb25kcywgbWljcm9zZWNvbmRzLgogICAgICAgIGRheXMgKz0gd2Vla3MqNwogICAgICAgIHNlY29uZHMgKz0gbWludXRlcyo2MCArIGhvdXJzKjM2MDAKICAgICAgICBtaWNyb3NlY29uZHMgKz0gbWlsbGlzZWNvbmRzKjEwMDAKCiAgICAgICAgIyBHZXQgcmlkIG9mIGFsbCBmcmFjdGlvbnMsIGFuZCBub3JtYWxpemUgcyBhbmQgdXMuCiAgICAgICAgIyBUYWtlIGEgZGVlcCBicmVhdGggPHdpbms+LgogICAgICAgIGlmIGlzaW5zdGFuY2UoZGF5cywgZmxvYXQpOgogICAgICAgICAgICBkYXlmcmFjLCBkYXlzID0gX21hdGgubW9kZihkYXlzKQogICAgICAgICAgICBkYXlzZWNvbmRzZnJhYywgZGF5c2Vjb25kc3dob2xlID0gX21hdGgubW9kZihkYXlmcmFjICogKDI0LiozNjAwLikpCiAgICAgICAgICAgIGFzc2VydCBkYXlzZWNvbmRzd2hvbGUgPT0gaW50KGRheXNlY29uZHN3aG9sZSkgICMgY2FuJ3Qgb3ZlcmZsb3cKICAgICAgICAgICAgcyA9IGludChkYXlzZWNvbmRzd2hvbGUpCiAgICAgICAgICAgIGFzc2VydCBkYXlzID09IGludChkYXlzKQogICAgICAgICAgICBkID0gaW50KGRheXMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGF5c2Vjb25kc2ZyYWMgPSAwLjAKICAgICAgICAgICAgZCA9IGRheXMKICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShkYXlzZWNvbmRzZnJhYywgZmxvYXQpCiAgICAgICAgYXNzZXJ0IGFicyhkYXlzZWNvbmRzZnJhYykgPD0gMS4wCiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoZCwgaW50KQogICAgICAgIGFzc2VydCBhYnMocykgPD0gMjQgKiAzNjAwCiAgICAgICAgIyBkYXlzIGlzbid0IHJlZmVyZW5jZWQgYWdhaW4gYmVmb3JlIHJlZGVmaW5pdGlvbgoKICAgICAgICBpZiBpc2luc3RhbmNlKHNlY29uZHMsIGZsb2F0KToKICAgICAgICAgICAgc2Vjb25kc2ZyYWMsIHNlY29uZHMgPSBfbWF0aC5tb2RmKHNlY29uZHMpCiAgICAgICAgICAgIGFzc2VydCBzZWNvbmRzID09IGludChzZWNvbmRzKQogICAgICAgICAgICBzZWNvbmRzID0gaW50KHNlY29uZHMpCiAgICAgICAgICAgIHNlY29uZHNmcmFjICs9IGRheXNlY29uZHNmcmFjCiAgICAgICAgICAgIGFzc2VydCBhYnMoc2Vjb25kc2ZyYWMpIDw9IDIuMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlY29uZHNmcmFjID0gZGF5c2Vjb25kc2ZyYWMKICAgICAgICAjIGRheXNlY29uZHNmcmFjIGlzbid0IHJlZmVyZW5jZWQgYWdhaW4KICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShzZWNvbmRzZnJhYywgZmxvYXQpCiAgICAgICAgYXNzZXJ0IGFicyhzZWNvbmRzZnJhYykgPD0gMi4wCgogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHNlY29uZHMsIGludCkKICAgICAgICBkYXlzLCBzZWNvbmRzID0gZGl2bW9kKHNlY29uZHMsIDI0KjM2MDApCiAgICAgICAgZCArPSBkYXlzCiAgICAgICAgcyArPSBpbnQoc2Vjb25kcykgICAgIyBjYW4ndCBvdmVyZmxvdwogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHMsIGludCkKICAgICAgICBhc3NlcnQgYWJzKHMpIDw9IDIgKiAyNCAqIDM2MDAKICAgICAgICAjIHNlY29uZHMgaXNuJ3QgcmVmZXJlbmNlZCBhZ2FpbiBiZWZvcmUgcmVkZWZpbml0aW9uCgogICAgICAgIHVzZG91YmxlID0gc2Vjb25kc2ZyYWMgKiAxZTYKICAgICAgICBhc3NlcnQgYWJzKHVzZG91YmxlKSA8IDIuMWU2ICAgICMgZXhhY3QgdmFsdWUgbm90IGNyaXRpY2FsCiAgICAgICAgIyBzZWNvbmRzZnJhYyBpc24ndCByZWZlcmVuY2VkIGFnYWluCiAgICAgICAgCiAgICAgICAgaWYgaXNpbnN0YW5jZShtaWNyb3NlY29uZHMsIGZsb2F0KToKICAgICAgICAgICAgbWljcm9zZWNvbmRzICs9IHVzZG91YmxlCiAgICAgICAgICAgIG1pY3Jvc2Vjb25kcyA9IHJvdW5kKG1pY3Jvc2Vjb25kcywgMCkKICAgICAgICAgICAgc2Vjb25kcywgbWljcm9zZWNvbmRzID0gZGl2bW9kKG1pY3Jvc2Vjb25kcywgMWU2KQogICAgICAgICAgICBhc3NlcnQgbWljcm9zZWNvbmRzID09IGludChtaWNyb3NlY29uZHMpCiAgICAgICAgICAgIGFzc2VydCBzZWNvbmRzID09IGludChzZWNvbmRzKQogICAgICAgICAgICBkYXlzLCBzZWNvbmRzID0gZGl2bW9kKHNlY29uZHMsIDI0LiozNjAwLikKICAgICAgICAgICAgYXNzZXJ0IGRheXMgPT0gaW50KGRheXMpCiAgICAgICAgICAgIGFzc2VydCBzZWNvbmRzID09IGludChzZWNvbmRzKQogICAgICAgICAgICBkICs9IGludChkYXlzKQogICAgICAgICAgICBzICs9IGludChzZWNvbmRzKSAgICMgY2FuJ3Qgb3ZlcmZsb3cKICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UocywgaW50KQogICAgICAgICAgICBhc3NlcnQgYWJzKHMpIDw9IDMgKiAyNCAqIDM2MDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWNvbmRzLCBtaWNyb3NlY29uZHMgPSBkaXZtb2QobWljcm9zZWNvbmRzLCAxMDAwMDAwKQogICAgICAgICAgICBkYXlzLCBzZWNvbmRzID0gZGl2bW9kKHNlY29uZHMsIDI0KjM2MDApCiAgICAgICAgICAgIGQgKz0gZGF5cwogICAgICAgICAgICBzICs9IGludChzZWNvbmRzKSAgICAjIGNhbid0IG92ZXJmbG93CiAgICAgICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHMsIGludCkKICAgICAgICAgICAgYXNzZXJ0IGFicyhzKSA8PSAzICogMjQgKiAzNjAwCiAgICAgICAgICAgIG1pY3Jvc2Vjb25kcyA9IGZsb2F0KG1pY3Jvc2Vjb25kcykKICAgICAgICAgICAgbWljcm9zZWNvbmRzICs9IHVzZG91YmxlCiAgICAgICAgICAgIG1pY3Jvc2Vjb25kcyA9IHJvdW5kKG1pY3Jvc2Vjb25kcywgMCkKICAgICAgICBhc3NlcnQgYWJzKHMpIDw9IDMgKiAyNCAqIDM2MDAKICAgICAgICBhc3NlcnQgYWJzKG1pY3Jvc2Vjb25kcykgPCAzLjFlNgoKICAgICAgICAjIEp1c3QgYSBsaXR0bGUgYml0IG9mIGNhcnJ5aW5nIHBvc3NpYmxlIGZvciBtaWNyb3NlY29uZHMgYW5kIHNlY29uZHMuCiAgICAgICAgI2lzIHRoZSBiZWxvdyB0d28gc3RhdGVtZW50cyBldmVuIHBvc3NpYmxlPwogICAgICAgICNhc3NlcnQgaXNpbnN0YW5jZShtaWNyb3NlY29uZHMsIGZsb2F0KQogICAgICAgICNhc3NlcnQgaW50KG1pY3Jvc2Vjb25kcykgPT0gbWljcm9zZWNvbmRzCiAgICAgICAgdXMgPSBpbnQobWljcm9zZWNvbmRzKQogICAgICAgIHNlY29uZHMsIHVzID0gZGl2bW9kKHVzLCAxMDAwMDAwKQogICAgICAgIHMgKz0gc2Vjb25kcyAgICAjIGNhbnQndCBvdmVyZmxvdwogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHMsIGludCkKICAgICAgICBkYXlzLCBzID0gZGl2bW9kKHMsIDI0KjM2MDApCiAgICAgICAgZCArPSBkYXlzCgogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKGQsIGludCkKICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShzLCBpbnQpIGFuZCAwIDw9IHMgPCAyNCozNjAwCiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UodXMsIGludCkgYW5kIDAgPD0gdXMgPCAxMDAwMDAwCgogICAgICAgIHNlbGYgPSBvYmplY3QuX19uZXdfXyhjbHMpCgogICAgICAgIHNlbGYuX2RheXMgPSBkCiAgICAgICAgc2VsZi5fc2Vjb25kcyA9IHMKICAgICAgICBzZWxmLl9taWNyb3NlY29uZHMgPSB1cwoKICAgICAgICBpZiBhYnMoZCkgPiA5OTk5OTk5OTk6CiAgICAgICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoInRpbWVkZWx0YSAjIG9mIGRheXMgaXMgdG9vIGxhcmdlOiAlZCIgJSBkKQoKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9taWNyb3NlY29uZHM6CiAgICAgICAgICAgIHJldHVybiAiJXMoJWQsICVkLCAlZCkiICUgKCdkYXRldGltZS4nICsgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RheXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX21pY3Jvc2Vjb25kcykKICAgICAgICBpZiBzZWxmLl9zZWNvbmRzOgogICAgICAgICAgICByZXR1cm4gIiVzKCVkLCAlZCkiICUgKCdkYXRldGltZS4nICsgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGF5cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZWNvbmRzKQogICAgICAgIHJldHVybiAiJXMoJWQpIiAlICgnZGF0ZXRpbWUuJyArIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBzZWxmLl9kYXlzKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIG1tLCBzcyA9IGRpdm1vZChzZWxmLl9zZWNvbmRzLCA2MCkKICAgICAgICBoaCwgbW0gPSBkaXZtb2QobW0sIDYwKQogICAgICAgIHMgPSAiJWQ6JTAyZDolMDJkIiAlIChoaCwgbW0sIHNzKQogICAgICAgIGlmIHNlbGYuX2RheXM6CiAgICAgICAgICAgIGRlZiBwbHVyYWwobik6CiAgICAgICAgICAgICAgICByZXR1cm4gbiwgYWJzKG4pICE9IDEgYW5kICJzIiBvciAiIgogICAgICAgICAgICBzID0gKCIlZCBkYXklcywgIiAlIHBsdXJhbChzZWxmLl9kYXlzKSkgKyBzCiAgICAgICAgaWYgc2VsZi5fbWljcm9zZWNvbmRzOgogICAgICAgICAgICBzID0gcyArICIuJTA2ZCIgJSBzZWxmLl9taWNyb3NlY29uZHMKICAgICAgICByZXR1cm4gcwoKICAgIGRlZiB0b3RhbF9zZWNvbmRzKHNlbGYpOgogICAgICAgICIiIlRvdGFsIHNlY29uZHMgaW4gdGhlIGR1cmF0aW9uLiIiIgogICAgICAgIHJldHVybiAoKHNlbGYuZGF5cyAqIDg2NDAwICsgc2VsZi5zZWNvbmRzKSoxMCoqNiArCiAgICAgICAgICAgICAgICBzZWxmLm1pY3Jvc2Vjb25kcykgLyAxMCoqNgoKICAgICMgUmVhZC1vbmx5IGZpZWxkIGFjY2Vzc29ycwogICAgQHByb3BlcnR5CiAgICBkZWYgZGF5cyhzZWxmKToKICAgICAgICAiIiJkYXlzIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX2RheXMKCiAgICBAcHJvcGVydHkKICAgIGRlZiBzZWNvbmRzKHNlbGYpOgogICAgICAgICIiInNlY29uZHMiIiIKICAgICAgICByZXR1cm4gc2VsZi5fc2Vjb25kcwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1pY3Jvc2Vjb25kcyhzZWxmKToKICAgICAgICAiIiJtaWNyb3NlY29uZHMiIiIKICAgICAgICByZXR1cm4gc2VsZi5fbWljcm9zZWNvbmRzCgogICAgZGVmIF9fYWRkX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgICMgZm9yIENQeXRob24gY29tcGF0aWJpbGl0eSwgd2UgY2Fubm90IHVzZQogICAgICAgICAgICAjIG91ciBfX2NsYXNzX18gaGVyZSwgYnV0IG5lZWQgYSByZWFsIHRpbWVkZWx0YQogICAgICAgICAgICByZXR1cm4gdGltZWRlbHRhKHNlbGYuX2RheXMgKyBvdGhlci5fZGF5cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZWNvbmRzICsgb3RoZXIuX3NlY29uZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmRzICsgb3RoZXIuX21pY3Jvc2Vjb25kcykKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBfX3JhZGRfXyA9IF9fYWRkX18KCiAgICBkZWYgX19zdWJfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgIyBmb3IgQ1B5dGhvbiBjb21wYXRpYmlsaXR5LCB3ZSBjYW5ub3QgdXNlCiAgICAgICAgICAgICMgb3VyIF9fY2xhc3NfXyBoZXJlLCBidXQgbmVlZCBhIHJlYWwgdGltZWRlbHRhCiAgICAgICAgICAgIHJldHVybiB0aW1lZGVsdGEoc2VsZi5fZGF5cyAtIG90aGVyLl9kYXlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMgLSBvdGhlci5fc2Vjb25kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZHMgLSBvdGhlci5fbWljcm9zZWNvbmRzKQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX3JzdWJfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIC1zZWxmICsgb3RoZXIKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19uZWdfXyhzZWxmKToKICAgICAgICAjIGZvciBDUHl0aG9uIGNvbXBhdGliaWxpdHksIHdlIGNhbm5vdCB1c2UKICAgICAgICAjIG91ciBfX2NsYXNzX18gaGVyZSwgYnV0IG5lZWQgYSByZWFsIHRpbWVkZWx0YQogICAgICAgIHJldHVybiB0aW1lZGVsdGEoLXNlbGYuX2RheXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAtc2VsZi5fc2Vjb25kcywKICAgICAgICAgICAgICAgICAgICAgICAgIC1zZWxmLl9taWNyb3NlY29uZHMpCgogICAgZGVmIF9fcG9zX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19hYnNfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9kYXlzIDwgMDoKICAgICAgICAgICAgcmV0dXJuIC1zZWxmCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19tdWxfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgaW50KToKICAgICAgICAgICAgIyBmb3IgQ1B5dGhvbiBjb21wYXRpYmlsaXR5LCB3ZSBjYW5ub3QgdXNlCiAgICAgICAgICAgICMgb3VyIF9fY2xhc3NfXyBoZXJlLCBidXQgbmVlZCBhIHJlYWwgdGltZWRlbHRhCiAgICAgICAgICAgIHJldHVybiB0aW1lZGVsdGEoc2VsZi5fZGF5cyAqIG90aGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMgKiBvdGhlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZHMgKiBvdGhlcikKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBmbG9hdCk6CiAgICAgICAgICAgIGEsIGIgPSBvdGhlci5hc19pbnRlZ2VyX3JhdGlvKCkKICAgICAgICAgICAgcmV0dXJuIHNlbGYgKiBhIC8gYgogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIF9fcm11bF9fID0gX19tdWxfXwoKICAgIGRlZiBfdG9fbWljcm9zZWNvbmRzKHNlbGYpOgogICAgICAgIHJldHVybiAoKHNlbGYuX2RheXMgKiAoMjQqMzYwMCkgKyBzZWxmLl9zZWNvbmRzKSAqIDEwMDAwMDAgKwogICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmRzKQoKICAgIGRlZiBfX2Zsb29yZGl2X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCAoaW50LCB0aW1lZGVsdGEpKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgdXNlYyA9IHNlbGYuX3RvX21pY3Jvc2Vjb25kcygpCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIHVzZWMgLy8gb3RoZXIuX3RvX21pY3Jvc2Vjb25kcygpCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgaW50KToKICAgICAgICAgICAgcmV0dXJuIHRpbWVkZWx0YSgwLCAwLCB1c2VjIC8vIG90aGVyKQoKICAgIGRlZiBfX3RydWVkaXZfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIChpbnQsIGZsb2F0LCB0aW1lZGVsdGEpKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgdXNlYyA9IHNlbGYuX3RvX21pY3Jvc2Vjb25kcygpCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIHVzZWMgLyBvdGhlci5fdG9fbWljcm9zZWNvbmRzKCkKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBpbnQpOgogICAgICAgICAgICByZXR1cm4gdGltZWRlbHRhKDAsIDAsIHVzZWMgLyBvdGhlcikKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBmbG9hdCk6CiAgICAgICAgICAgIGEsIGIgPSBvdGhlci5hc19pbnRlZ2VyX3JhdGlvKCkKICAgICAgICAgICAgcmV0dXJuIHRpbWVkZWx0YSgwLCAwLCBiICogdXNlYyAvIGEpCgogICAgZGVmIF9fbW9kX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHIgPSBzZWxmLl90b19taWNyb3NlY29uZHMoKSAlIG90aGVyLl90b19taWNyb3NlY29uZHMoKQogICAgICAgICAgICByZXR1cm4gdGltZWRlbHRhKDAsIDAsIHIpCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fZGl2bW9kX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHEsIHIgPSBkaXZtb2Qoc2VsZi5fdG9fbWljcm9zZWNvbmRzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXIuX3RvX21pY3Jvc2Vjb25kcygpKQogICAgICAgICAgICByZXR1cm4gcSwgdGltZWRlbHRhKDAsIDAsIHIpCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgIyBDb21wYXJpc29ucyBvZiB0aW1lZGVsdGEgb2JqZWN0cyB3aXRoIG90aGVyLgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID09IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSAhPSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA8PSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDwgMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA+PSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID4gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX2NtcChzZWxmLCBvdGhlcik6CiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSkKICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICNyZXR1cm4gX2NtcChzZWxmLl9nZXRzdGF0ZSgpLCBvdGhlci5fZ2V0c3RhdGUoKSkKICAgICAgICByZXR1cm4gX3N0YXRlX2NtcChzZWxmLl9nZXRzdGF0ZSgpLCBvdGhlci5fZ2V0c3RhdGUoKSkKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fZ2V0c3RhdGUoKSkKCiAgICBkZWYgX19ib29sX18oc2VsZik6CiAgICAgICAgcmV0dXJuIChzZWxmLl9kYXlzICE9IDAgb3IKICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMgIT0gMCBvcgogICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmRzICE9IDApCgogICAgIyBQaWNrbGUgc3VwcG9ydC4KCiAgICBkZWYgX2dldHN0YXRlKHNlbGYpOgogICAgICAgIHJldHVybiAoc2VsZi5fZGF5cywgc2VsZi5fc2Vjb25kcywgc2VsZi5fbWljcm9zZWNvbmRzKQoKICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYpOgogICAgICAgIHJldHVybiAoc2VsZi5fX2NsYXNzX18sIHNlbGYuX2dldHN0YXRlKCkpCgp0aW1lZGVsdGEubWluID0gdGltZWRlbHRhKC05OTk5OTk5OTkpCnRpbWVkZWx0YS5tYXggPSB0aW1lZGVsdGEoZGF5cz05OTk5OTk5OTksIGhvdXJzPTIzLCBtaW51dGVzPTU5LCBzZWNvbmRzPTU5LAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kcz05OTk5OTkpCnRpbWVkZWx0YS5yZXNvbHV0aW9uID0gdGltZWRlbHRhKG1pY3Jvc2Vjb25kcz0xKQoKY2xhc3MgZGF0ZToKICAgICIiIkNvbmNyZXRlIGRhdGUgdHlwZS4KCiAgICBDb25zdHJ1Y3RvcnM6CgogICAgX19uZXdfXygpCiAgICBmcm9tdGltZXN0YW1wKCkKICAgIHRvZGF5KCkKICAgIGZyb21vcmRpbmFsKCkKCiAgICBPcGVyYXRvcnM6CgogICAgX19yZXByX18sIF9fc3RyX18KICAgIF9fY21wX18sIF9faGFzaF9fCiAgICBfX2FkZF9fLCBfX3JhZGRfXywgX19zdWJfXyAoYWRkL3JhZGQgb25seSB3aXRoIHRpbWVkZWx0YSBhcmcpCgogICAgTWV0aG9kczoKCiAgICB0aW1ldHVwbGUoKQogICAgdG9vcmRpbmFsKCkKICAgIHdlZWtkYXkoKQogICAgaXNvd2Vla2RheSgpLCBpc29jYWxlbmRhcigpLCBpc29mb3JtYXQoKQogICAgY3RpbWUoKQogICAgc3RyZnRpbWUoKQoKICAgIFByb3BlcnRpZXMgKHJlYWRvbmx5KToKICAgIHllYXIsIG1vbnRoLCBkYXkKICAgICIiIgogICAgX19zbG90c19fID0gJ195ZWFyJywgJ19tb250aCcsICdfZGF5JwoKICAgIGRlZiBfX25ld19fKGNscywgeWVhciwgbW9udGg9Tm9uZSwgZGF5PU5vbmUpOgogICAgICAgICIiIkNvbnN0cnVjdG9yLgoKICAgICAgICBBcmd1bWVudHM6CgogICAgICAgIHllYXIsIG1vbnRoLCBkYXkgKHJlcXVpcmVkLCBiYXNlIDEpCiAgICAgICAgIiIiCiAgICAgICAgaWYgKGlzaW5zdGFuY2UoeWVhciwgYnl0ZXMpIGFuZCBsZW4oeWVhcikgPT0gNCBhbmQKICAgICAgICAgICAgMSA8PSB5ZWFyWzJdIDw9IDEyIGFuZCBtb250aCBpcyBOb25lKTogICMgTW9udGggaXMgc2FuZQogICAgICAgICAgICAjIFBpY2tsZSBzdXBwb3J0CiAgICAgICAgICAgIHNlbGYgPSBvYmplY3QuX19uZXdfXyhjbHMpCiAgICAgICAgICAgIHNlbGYuX19zZXRzdGF0ZSh5ZWFyKQogICAgICAgICAgICByZXR1cm4gc2VsZgogICAgICAgIF9jaGVja19kYXRlX2ZpZWxkcyh5ZWFyLCBtb250aCwgZGF5KQogICAgICAgIHNlbGYgPSBvYmplY3QuX19uZXdfXyhjbHMpCiAgICAgICAgc2VsZi5feWVhciA9IHllYXIKICAgICAgICBzZWxmLl9tb250aCA9IG1vbnRoCiAgICAgICAgc2VsZi5fZGF5ID0gZGF5CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICAjIEFkZGl0aW9uYWwgY29uc3RydWN0b3JzCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbXRpbWVzdGFtcChjbHMsIHQpOgogICAgICAgICJDb25zdHJ1Y3QgYSBkYXRlIGZyb20gYSBQT1NJWCB0aW1lc3RhbXAgKGxpa2UgdGltZS50aW1lKCkpLiIKICAgICAgICB5LCBtLCBkLCBoaCwgbW0sIHNzLCB3ZWVrZGF5LCBqZGF5LCBkc3QgPSBfdGltZS5sb2NhbHRpbWUodCkKICAgICAgICByZXR1cm4gY2xzKHksIG0sIGQpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgdG9kYXkoY2xzKToKICAgICAgICAiQ29uc3RydWN0IGEgZGF0ZSBmcm9tIHRpbWUudGltZSgpLiIKICAgICAgICB0ID0gX3RpbWUudGltZSgpCiAgICAgICAgcmV0dXJuIGNscy5mcm9tdGltZXN0YW1wKHQpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbW9yZGluYWwoY2xzLCBuKToKICAgICAgICAiIiJDb250cnVjdCBhIGRhdGUgZnJvbSBhIHByb2xlcHRpYyBHcmVnb3JpYW4gb3JkaW5hbC4KCiAgICAgICAgSmFudWFyeSAxIG9mIHllYXIgMSBpcyBkYXkgMS4gIE9ubHkgdGhlIHllYXIsIG1vbnRoIGFuZCBkYXkgYXJlCiAgICAgICAgbm9uLXplcm8gaW4gdGhlIHJlc3VsdC4KICAgICAgICAiIiIKICAgICAgICB5LCBtLCBkID0gX29yZDJ5bWQobikKICAgICAgICByZXR1cm4gY2xzKHksIG0sIGQpCgogICAgIyBDb252ZXJzaW9ucyB0byBzdHJpbmcKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgIiIiQ29udmVydCB0byBmb3JtYWwgc3RyaW5nLCBmb3IgcmVwcigpLgoKICAgICAgICA+Pj4gZHQgPSBkYXRldGltZSgyMDEwLCAxLCAxKQogICAgICAgID4+PiByZXByKGR0KQogICAgICAgICdkYXRldGltZS5kYXRldGltZSgyMDEwLCAxLCAxLCAwLCAwKScKCiAgICAgICAgPj4+IGR0ID0gZGF0ZXRpbWUoMjAxMCwgMSwgMSwgdHppbmZvPXRpbWV6b25lLnV0YykKICAgICAgICA+Pj4gcmVwcihkdCkKICAgICAgICAnZGF0ZXRpbWUuZGF0ZXRpbWUoMjAxMCwgMSwgMSwgMCwgMCwgdHppbmZvPWRhdGV0aW1lLnRpbWV6b25lLnV0YyknCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuICIlcyglZCwgJWQsICVkKSIgJSAoJ2RhdGV0aW1lLicgKyBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl95ZWFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX21vbnRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RheSkKICAgICMgWFhYIFRoZXNlIHNob3VsZG4ndCBkZXBlbmQgb24gdGltZS5sb2NhbHRpbWUoKSwgYmVjYXVzZSB0aGF0CiAgICAjIGNsaXBzIHRoZSB1c2FibGUgZGF0ZXMgdG8gWzE5NzAgLi4gMjAzOCkuICBBdCBsZWFzdCBjdGltZSgpIGlzCiAgICAjIGVhc2lseSBkb25lIHdpdGhvdXQgdXNpbmcgc3RyZnRpbWUoKSAtLSB0aGF0J3MgYmV0dGVyIHRvbyBiZWNhdXNlCiAgICAjIHN0cmZ0aW1lKCIlYyIsIC4uLikgaXMgbG9jYWxlIHNwZWNpZmljLgoKCiAgICBkZWYgY3RpbWUoc2VsZik6CiAgICAgICAgIlJldHVybiBjdGltZSgpIHN0eWxlIHN0cmluZy4iCiAgICAgICAgd2Vla2RheSA9IHNlbGYudG9vcmRpbmFsKCkgJSA3IG9yIDcKICAgICAgICByZXR1cm4gIiVzICVzICUyZCAwMDowMDowMCAlMDRkIiAlICgKICAgICAgICAgICAgX0RBWU5BTUVTW3dlZWtkYXldLAogICAgICAgICAgICBfTU9OVEhOQU1FU1tzZWxmLl9tb250aF0sCiAgICAgICAgICAgIHNlbGYuX2RheSwgc2VsZi5feWVhcikKCiAgICBkZWYgc3RyZnRpbWUoc2VsZiwgZm10KToKICAgICAgICAiRm9ybWF0IHVzaW5nIHN0cmZ0aW1lKCkuIgogICAgICAgIHJldHVybiBfd3JhcF9zdHJmdGltZShzZWxmLCBmbXQsIHNlbGYudGltZXR1cGxlKCkpCgogICAgZGVmIF9fZm9ybWF0X18oc2VsZiwgZm10KToKICAgICAgICBpZiBsZW4oZm10KSAhPSAwOgogICAgICAgICAgICByZXR1cm4gc2VsZi5zdHJmdGltZShmbXQpCiAgICAgICAgcmV0dXJuIHN0cihzZWxmKQoKICAgIGRlZiBpc29mb3JtYXQoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBkYXRlIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gSVNPLgoKICAgICAgICBUaGlzIGlzICdZWVlZLU1NLUREJy4KCiAgICAgICAgUmVmZXJlbmNlczoKICAgICAgICAtIGh0dHA6Ly93d3cudzMub3JnL1RSL05PVEUtZGF0ZXRpbWUKICAgICAgICAtIGh0dHA6Ly93d3cuY2wuY2FtLmFjLnVrL35tZ2syNS9pc28tdGltZS5odG1sCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuICIlMDRkLSUwMmQtJTAyZCIgJSAoc2VsZi5feWVhciwgc2VsZi5fbW9udGgsIHNlbGYuX2RheSkKCiAgICBfX3N0cl9fID0gaXNvZm9ybWF0CgogICAgIyBSZWFkLW9ubHkgZmllbGQgYWNjZXNzb3JzCiAgICBAcHJvcGVydHkKICAgIGRlZiB5ZWFyKHNlbGYpOgogICAgICAgICIiInllYXIgKDEtOTk5OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5feWVhcgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1vbnRoKHNlbGYpOgogICAgICAgICIiIm1vbnRoICgxLTEyKSIiIgogICAgICAgIHJldHVybiBzZWxmLl9tb250aAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGRheShzZWxmKToKICAgICAgICAiIiJkYXkgKDEtMzEpIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX2RheQoKICAgICMgU3RhbmRhcmQgY29udmVyc2lvbnMsIF9fY21wX18sIF9faGFzaF9fIChhbmQgaGVscGVycykKCiAgICBkZWYgdGltZXR1cGxlKHNlbGYpOgogICAgICAgICJSZXR1cm4gbG9jYWwgdGltZSB0dXBsZSBjb21wYXRpYmxlIHdpdGggdGltZS5sb2NhbHRpbWUoKS4iCiAgICAgICAgcmV0dXJuIF9idWlsZF9zdHJ1Y3RfdGltZShzZWxmLl95ZWFyLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwgMCwgMCwgLTEpCgogICAgZGVmIHRvb3JkaW5hbChzZWxmKToKICAgICAgICAiIiJSZXR1cm4gcHJvbGVwdGljIEdyZWdvcmlhbiBvcmRpbmFsIGZvciB0aGUgeWVhciwgbW9udGggYW5kIGRheS4KCiAgICAgICAgSmFudWFyeSAxIG9mIHllYXIgMSBpcyBkYXkgMS4gIE9ubHkgdGhlIHllYXIsIG1vbnRoIGFuZCBkYXkgdmFsdWVzCiAgICAgICAgY29udHJpYnV0ZSB0byB0aGUgcmVzdWx0LgogICAgICAgICIiIgogICAgICAgIHJldHVybiBfeW1kMm9yZChzZWxmLl95ZWFyLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5KQoKICAgIGRlZiByZXBsYWNlKHNlbGYsIHllYXI9Tm9uZSwgbW9udGg9Tm9uZSwgZGF5PU5vbmUpOgogICAgICAgICIiIlJldHVybiBhIG5ldyBkYXRlIHdpdGggbmV3IHZhbHVlcyBmb3IgdGhlIHNwZWNpZmllZCBmaWVsZHMuIiIiCiAgICAgICAgaWYgeWVhciBpcyBOb25lOgogICAgICAgICAgICB5ZWFyID0gc2VsZi5feWVhcgogICAgICAgIGlmIG1vbnRoIGlzIE5vbmU6CiAgICAgICAgICAgIG1vbnRoID0gc2VsZi5fbW9udGgKICAgICAgICBpZiBkYXkgaXMgTm9uZToKICAgICAgICAgICAgZGF5ID0gc2VsZi5fZGF5CiAgICAgICAgX2NoZWNrX2RhdGVfZmllbGRzKHllYXIsIG1vbnRoLCBkYXkpCiAgICAgICAgcmV0dXJuIGRhdGUoeWVhciwgbW9udGgsIGRheSkKCiAgICAjIENvbXBhcmlzb25zIG9mIGRhdGUgb2JqZWN0cyB3aXRoIG90aGVyLgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA9PSAwCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgZGF0ZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpICE9IDAKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPD0gMAogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA8IDAKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPj0gMAogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA+IDAKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX2NtcChzZWxmLCBvdGhlcik6CiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpCiAgICAgICAgeSwgbSwgZCA9IHNlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXkKICAgICAgICB5MiwgbTIsIGQyID0gb3RoZXIuX3llYXIsIG90aGVyLl9tb250aCwgb3RoZXIuX2RheQogICAgICAgICNmaXhtZSBicnl0aG9uCiAgICAgICAgI3JldHVybiBfY21wKCh5LCBtLCBkKSwgKHkyLCBtMiwgZDIpKQogICAgICAgIHJldHVybiBfc3RhdGVfY21wKCh5LCBtLCBkKSwgKHkyLCBtMiwgZDIpKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICAiSGFzaC4iCiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fZ2V0c3RhdGUoKSkKCiAgICAjIENvbXB1dGF0aW9ucwoKICAgIGRlZiBfX2FkZF9fKHNlbGYsIG90aGVyKToKICAgICAgICAiQWRkIGEgZGF0ZSB0byBhIHRpbWVkZWx0YS4iCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgbyA9IHNlbGYudG9vcmRpbmFsKCkgKyBvdGhlci5kYXlzCiAgICAgICAgICAgIGlmIDAgPCBvIDw9IF9NQVhPUkRJTkFMOgogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGUuZnJvbW9yZGluYWwobykKICAgICAgICAgICAgcmFpc2UgT3ZlcmZsb3dFcnJvcigicmVzdWx0IG91dCBvZiByYW5nZSIpCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgX19yYWRkX18gPSBfX2FkZF9fCgogICAgZGVmIF9fc3ViX18oc2VsZiwgb3RoZXIpOgogICAgICAgICIiIlN1YnRyYWN0IHR3byBkYXRlcywgb3IgYSBkYXRlIGFuZCBhIHRpbWVkZWx0YS4iIiIKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZiArIHRpbWVkZWx0YSgtb3RoZXIuZGF5cykKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgZGF5czEgPSBzZWxmLnRvb3JkaW5hbCgpCiAgICAgICAgICAgIGRheXMyID0gb3RoZXIudG9vcmRpbmFsKCkKICAgICAgICAgICAgcmV0dXJuIHRpbWVkZWx0YShkYXlzMSAtIGRheXMyKQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiB3ZWVrZGF5KHNlbGYpOgogICAgICAgICJSZXR1cm4gZGF5IG9mIHRoZSB3ZWVrLCB3aGVyZSBNb25kYXkgPT0gMCAuLi4gU3VuZGF5ID09IDYuIgogICAgICAgIHJldHVybiAoc2VsZi50b29yZGluYWwoKSArIDYpICUgNwoKICAgICMgRGF5LW9mLXRoZS13ZWVrIGFuZCB3ZWVrLW9mLXRoZS15ZWFyLCBhY2NvcmRpbmcgdG8gSVNPCgogICAgZGVmIGlzb3dlZWtkYXkoc2VsZik6CiAgICAgICAgIlJldHVybiBkYXkgb2YgdGhlIHdlZWssIHdoZXJlIE1vbmRheSA9PSAxIC4uLiBTdW5kYXkgPT0gNy4iCiAgICAgICAgIyAxLUphbi0wMDAxIGlzIGEgTW9uZGF5CiAgICAgICAgcmV0dXJuIHNlbGYudG9vcmRpbmFsKCkgJSA3IG9yIDcKCiAgICBkZWYgaXNvY2FsZW5kYXIoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGEgMy10dXBsZSBjb250YWluaW5nIElTTyB5ZWFyLCB3ZWVrIG51bWJlciwgYW5kIHdlZWtkYXkuCgogICAgICAgIFRoZSBmaXJzdCBJU08gd2VlayBvZiB0aGUgeWVhciBpcyB0aGUgKE1vbi1TdW4pIHdlZWsKICAgICAgICBjb250YWluaW5nIHRoZSB5ZWFyJ3MgZmlyc3QgVGh1cnNkYXk7IGV2ZXJ5dGhpbmcgZWxzZSBkZXJpdmVzCiAgICAgICAgZnJvbSB0aGF0LgoKICAgICAgICBUaGUgZmlyc3Qgd2VlayBpcyAxOyBNb25kYXkgaXMgMSAuLi4gU3VuZGF5IGlzIDcuCgogICAgICAgIElTTyBjYWxlbmRhciBhbGdvcml0aG0gdGFrZW4gZnJvbQogICAgICAgIGh0dHA6Ly93d3cucGh5cy51dS5ubC9+dmdlbnQvY2FsZW5kYXIvaXNvY2FsZW5kYXIuaHRtCiAgICAgICAgIiIiCiAgICAgICAgeWVhciA9IHNlbGYuX3llYXIKICAgICAgICB3ZWVrMW1vbmRheSA9IF9pc293ZWVrMW1vbmRheSh5ZWFyKQogICAgICAgIHRvZGF5ID0gX3ltZDJvcmQoc2VsZi5feWVhciwgc2VsZi5fbW9udGgsIHNlbGYuX2RheSkKICAgICAgICAjIEludGVybmFsbHksIHdlZWsgYW5kIGRheSBoYXZlIG9yaWdpbiAwCiAgICAgICAgd2VlaywgZGF5ID0gZGl2bW9kKHRvZGF5IC0gd2VlazFtb25kYXksIDcpCiAgICAgICAgaWYgd2VlayA8IDA6CiAgICAgICAgICAgIHllYXIgLT0gMQogICAgICAgICAgICB3ZWVrMW1vbmRheSA9IF9pc293ZWVrMW1vbmRheSh5ZWFyKQogICAgICAgICAgICB3ZWVrLCBkYXkgPSBkaXZtb2QodG9kYXkgLSB3ZWVrMW1vbmRheSwgNykKICAgICAgICBlbGlmIHdlZWsgPj0gNTI6CiAgICAgICAgICAgIGlmIHRvZGF5ID49IF9pc293ZWVrMW1vbmRheSh5ZWFyKzEpOgogICAgICAgICAgICAgICAgeWVhciArPSAxCiAgICAgICAgICAgICAgICB3ZWVrID0gMAogICAgICAgIHJldHVybiB5ZWFyLCB3ZWVrKzEsIGRheSsxCgogICAgIyBQaWNrbGUgc3VwcG9ydC4KCiAgICBkZWYgX2dldHN0YXRlKHNlbGYpOgogICAgICAgIHloaSwgeWxvID0gZGl2bW9kKHNlbGYuX3llYXIsIDI1NikKICAgICAgICByZXR1cm4gYnl0ZXMoW3loaSwgeWxvLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5XSksCgogICAgZGVmIF9fc2V0c3RhdGUoc2VsZiwgc3RyaW5nKToKICAgICAgICBpZiBsZW4oc3RyaW5nKSAhPSA0IG9yIG5vdCAoMSA8PSBzdHJpbmdbMl0gPD0gMTIpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm5vdCBlbm91Z2ggYXJndW1lbnRzIikKICAgICAgICB5aGksIHlsbywgc2VsZi5fbW9udGgsIHNlbGYuX2RheSA9IHN0cmluZwogICAgICAgIHNlbGYuX3llYXIgPSB5aGkgKiAyNTYgKyB5bG8KCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCBzZWxmLl9nZXRzdGF0ZSgpKQoKX2RhdGVfY2xhc3MgPSBkYXRlICAjIHNvIGZ1bmN0aW9ucyB3LyBhcmdzIG5hbWVkICJkYXRlIiBjYW4gZ2V0IGF0IHRoZSBjbGFzcwoKZGF0ZS5taW4gPSBkYXRlKDEsIDEsIDEpCmRhdGUubWF4ID0gZGF0ZSg5OTk5LCAxMiwgMzEpCmRhdGUucmVzb2x1dGlvbiA9IHRpbWVkZWx0YShkYXlzPTEpCgpjbGFzcyB0emluZm86CiAgICAiIiJBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciB0aW1lIHpvbmUgaW5mbyBjbGFzc2VzLgoKICAgIFN1YmNsYXNzZXMgbXVzdCBvdmVycmlkZSB0aGUgbmFtZSgpLCB1dGNvZmZzZXQoKSBhbmQgZHN0KCkgbWV0aG9kcy4KICAgICIiIgogICAgX19zbG90c19fID0gKCkKICAgIGRlZiB0em5hbWUoc2VsZiwgZHQpOgogICAgICAgICJkYXRldGltZSAtPiBzdHJpbmcgbmFtZSBvZiB0aW1lIHpvbmUuIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoInR6aW5mbyBzdWJjbGFzcyBtdXN0IG92ZXJyaWRlIHR6bmFtZSgpIikKCiAgICBkZWYgdXRjb2Zmc2V0KHNlbGYsIGR0KToKICAgICAgICAiZGF0ZXRpbWUgLT4gbWludXRlcyBlYXN0IG9mIFVUQyAobmVnYXRpdmUgZm9yIHdlc3Qgb2YgVVRDKSIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJ0emluZm8gc3ViY2xhc3MgbXVzdCBvdmVycmlkZSB1dGNvZmZzZXQoKSIpCgogICAgZGVmIGRzdChzZWxmLCBkdCk6CiAgICAgICAgIiIiZGF0ZXRpbWUgLT4gRFNUIG9mZnNldCBpbiBtaW51dGVzIGVhc3Qgb2YgVVRDLgoKICAgICAgICBSZXR1cm4gMCBpZiBEU1Qgbm90IGluIGVmZmVjdC4gIHV0Y29mZnNldCgpIG11c3QgaW5jbHVkZSB0aGUgRFNUCiAgICAgICAgb2Zmc2V0LgogICAgICAgICIiIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoInR6aW5mbyBzdWJjbGFzcyBtdXN0IG92ZXJyaWRlIGRzdCgpIikKCiAgICBkZWYgZnJvbXV0YyhzZWxmLCBkdCk6CiAgICAgICAgImRhdGV0aW1lIGluIFVUQyAtPiBkYXRldGltZSBpbiBsb2NhbCB0aW1lLiIKCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZHQsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJmcm9tdXRjKCkgcmVxdWlyZXMgYSBkYXRldGltZSBhcmd1bWVudCIpCiAgICAgICAgaWYgZHQudHppbmZvIGlzIG5vdCBzZWxmOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkdC50emluZm8gaXMgbm90IHNlbGYiKQoKICAgICAgICBkdG9mZiA9IGR0LnV0Y29mZnNldCgpCiAgICAgICAgaWYgZHRvZmYgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZnJvbXV0YygpIHJlcXVpcmVzIGEgbm9uLU5vbmUgdXRjb2Zmc2V0KCkgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJyZXN1bHQiKQoKICAgICAgICAjIFNlZSB0aGUgbG9uZyBjb21tZW50IGJsb2NrIGF0IHRoZSBlbmQgb2YgdGhpcyBmaWxlIGZvciBhbgogICAgICAgICMgZXhwbGFuYXRpb24gb2YgdGhpcyBhbGdvcml0aG0uCiAgICAgICAgZHRkc3QgPSBkdC5kc3QoKQogICAgICAgIGlmIGR0ZHN0IGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImZyb211dGMoKSByZXF1aXJlcyBhIG5vbi1Ob25lIGRzdCgpIHJlc3VsdCIpCiAgICAgICAgZGVsdGEgPSBkdG9mZiAtIGR0ZHN0CiAgICAgICAgaWYgZGVsdGE6CiAgICAgICAgICAgIGR0ICs9IGRlbHRhCiAgICAgICAgICAgIGR0ZHN0ID0gZHQuZHN0KCkKICAgICAgICAgICAgaWYgZHRkc3QgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImZyb211dGMoKTogZHQuZHN0IGdhdmUgaW5jb25zaXN0ZW50ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInJlc3VsdHM7IGNhbm5vdCBjb252ZXJ0IikKICAgICAgICByZXR1cm4gZHQgKyBkdGRzdAoKICAgICMgUGlja2xlIHN1cHBvcnQuCgogICAgZGVmIF9fcmVkdWNlX18oc2VsZik6CiAgICAgICAgZ2V0aW5pdGFyZ3MgPSBnZXRhdHRyKHNlbGYsICJfX2dldGluaXRhcmdzX18iLCBOb25lKQogICAgICAgIGlmIGdldGluaXRhcmdzOgogICAgICAgICAgICBhcmdzID0gZ2V0aW5pdGFyZ3MoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFyZ3MgPSAoKQogICAgICAgIGdldHN0YXRlID0gZ2V0YXR0cihzZWxmLCAiX19nZXRzdGF0ZV9fIiwgTm9uZSkKICAgICAgICBpZiBnZXRzdGF0ZToKICAgICAgICAgICAgc3RhdGUgPSBnZXRzdGF0ZSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc3RhdGUgPSBnZXRhdHRyKHNlbGYsICJfX2RpY3RfXyIsIE5vbmUpIG9yIE5vbmUKICAgICAgICBpZiBzdGF0ZSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCBhcmdzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAoc2VsZi5fX2NsYXNzX18sIGFyZ3MsIHN0YXRlKQoKX3R6aW5mb19jbGFzcyA9IHR6aW5mbwoKY2xhc3MgdGltZToKICAgICIiIlRpbWUgd2l0aCB0aW1lIHpvbmUuCgogICAgQ29uc3RydWN0b3JzOgoKICAgIF9fbmV3X18oKQoKICAgIE9wZXJhdG9yczoKCiAgICBfX3JlcHJfXywgX19zdHJfXwogICAgX19jbXBfXywgX19oYXNoX18KCiAgICBNZXRob2RzOgoKICAgIHN0cmZ0aW1lKCkKICAgIGlzb2Zvcm1hdCgpCiAgICB1dGNvZmZzZXQoKQogICAgdHpuYW1lKCkKICAgIGRzdCgpCgogICAgUHJvcGVydGllcyAocmVhZG9ubHkpOgogICAgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pY3Jvc2Vjb25kLCB0emluZm8KICAgICIiIgoKICAgIGRlZiBfX25ld19fKGNscywgaG91cj0wLCBtaW51dGU9MCwgc2Vjb25kPTAsIG1pY3Jvc2Vjb25kPTAsIHR6aW5mbz1Ob25lKToKICAgICAgICAiIiJDb25zdHJ1Y3Rvci4KCiAgICAgICAgQXJndW1lbnRzOgoKICAgICAgICBob3VyLCBtaW51dGUgKHJlcXVpcmVkKQogICAgICAgIHNlY29uZCwgbWljcm9zZWNvbmQgKGRlZmF1bHQgdG8gemVybykKICAgICAgICB0emluZm8gKGRlZmF1bHQgdG8gTm9uZSkKICAgICAgICAiIiIKICAgICAgICBzZWxmID0gb2JqZWN0Ll9fbmV3X18oY2xzKQogICAgICAgIGlmIGlzaW5zdGFuY2UoaG91ciwgYnl0ZXMpIGFuZCBsZW4oaG91cikgPT0gNjoKICAgICAgICAgICAgIyBQaWNrbGUgc3VwcG9ydAogICAgICAgICAgICBzZWxmLl9fc2V0c3RhdGUoaG91ciwgbWludXRlIG9yIE5vbmUpCiAgICAgICAgICAgIHJldHVybiBzZWxmCiAgICAgICAgX2NoZWNrX3R6aW5mb19hcmcodHppbmZvKQogICAgICAgIF9jaGVja190aW1lX2ZpZWxkcyhob3VyLCBtaW51dGUsIHNlY29uZCwgbWljcm9zZWNvbmQpCiAgICAgICAgc2VsZi5faG91ciA9IGhvdXIKICAgICAgICBzZWxmLl9taW51dGUgPSBtaW51dGUKICAgICAgICBzZWxmLl9zZWNvbmQgPSBzZWNvbmQKICAgICAgICBzZWxmLl9taWNyb3NlY29uZCA9IG1pY3Jvc2Vjb25kCiAgICAgICAgc2VsZi5fdHppbmZvID0gdHppbmZvCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICAjIFJlYWQtb25seSBmaWVsZCBhY2Nlc3NvcnMKICAgIEBwcm9wZXJ0eQogICAgZGVmIGhvdXIoc2VsZik6CiAgICAgICAgIiIiaG91ciAoMC0yMykiIiIKICAgICAgICByZXR1cm4gc2VsZi5faG91cgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1pbnV0ZShzZWxmKToKICAgICAgICAiIiJtaW51dGUgKDAtNTkpIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX21pbnV0ZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHNlY29uZChzZWxmKToKICAgICAgICAiIiJzZWNvbmQgKDAtNTkpIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX3NlY29uZAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1pY3Jvc2Vjb25kKHNlbGYpOgogICAgICAgICIiIm1pY3Jvc2Vjb25kICgwLTk5OTk5OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5fbWljcm9zZWNvbmQKCiAgICBAcHJvcGVydHkKICAgIGRlZiB0emluZm8oc2VsZik6CiAgICAgICAgIiIidGltZXpvbmUgaW5mbyBvYmplY3QiIiIKICAgICAgICByZXR1cm4gc2VsZi5fdHppbmZvCgogICAgIyBTdGFuZGFyZCBjb252ZXJzaW9ucywgX19oYXNoX18gKGFuZCBoZWxwZXJzKQoKICAgICMgQ29tcGFyaXNvbnMgb2YgdGltZSBvYmplY3RzIHdpdGggb3RoZXIuCgogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID09IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgIT0gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIF9fbGVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDw9IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBfY21wZXJyb3Ioc2VsZiwgb3RoZXIpCgogICAgZGVmIF9fbHRfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDwgMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPj0gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19ndF9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPiAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfY21wKHNlbGYsIG90aGVyKToKICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShvdGhlciwgdGltZSkKICAgICAgICBteXR6ID0gc2VsZi5fdHppbmZvCiAgICAgICAgb3R0eiA9IG90aGVyLl90emluZm8KICAgICAgICBteW9mZiA9IG90b2ZmID0gTm9uZQoKICAgICAgICBpZiBteXR6IGlzIG90dHo6CiAgICAgICAgICAgIGJhc2VfY29tcGFyZSA9IFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBteW9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICAgICAgb3RvZmYgPSBvdGhlci51dGNvZmZzZXQoKQogICAgICAgICAgICBiYXNlX2NvbXBhcmUgPSBteW9mZiA9PSBvdG9mZgoKICAgICAgICBpZiBiYXNlX2NvbXBhcmU6CiAgICAgICAgICAgICNmaXhtZSBicnl0aG9uCiAgICAgICAgICAgICNyZXR1cm4gX2NtcCgoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICMgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpLAogICAgICAgICAgICAjICAgICAgICAgICAob3RoZXIuX2hvdXIsIG90aGVyLl9taW51dGUsIG90aGVyLl9zZWNvbmQsCiAgICAgICAgICAgICMgICAgICAgICAgICBvdGhlci5fbWljcm9zZWNvbmQpKQogICAgICAgICAgICByZXR1cm4gX3R1cGxlX2NtcCgoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZCksCiAgICAgICAgICAgICAgICAgICAgICAgKG90aGVyLl9ob3VyLCBvdGhlci5fbWludXRlLCBvdGhlci5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICBvdGhlci5fbWljcm9zZWNvbmQpKQogICAgICAgIGlmIG15b2ZmIGlzIE5vbmUgb3Igb3RvZmYgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYW5ub3QgY29tcGFyZSBuYWl2ZSBhbmQgYXdhcmUgdGltZXMiKQogICAgICAgIG15aGhtbSA9IHNlbGYuX2hvdXIgKiA2MCArIHNlbGYuX21pbnV0ZSAtIG15b2ZmLy90aW1lZGVsdGEobWludXRlcz0xKQogICAgICAgIG90aGhtbSA9IG90aGVyLl9ob3VyICogNjAgKyBvdGhlci5fbWludXRlIC0gb3RvZmYvL3RpbWVkZWx0YShtaW51dGVzPTEpCiAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAjcmV0dXJuIF9jbXAoKG15aGhtbSwgc2VsZi5fc2Vjb25kLCBzZWxmLl9taWNyb3NlY29uZCksCiAgICAgICAgIyAgICAgICAgICAgIChvdGhobW0sIG90aGVyLl9zZWNvbmQsIG90aGVyLl9taWNyb3NlY29uZCkpCiAgICAgICAgcmV0dXJuIF90dXBsZV9jbXAoKG15aGhtbSwgc2VsZi5fc2Vjb25kLCBzZWxmLl9taWNyb3NlY29uZCksCiAgICAgICAgICAgICAgICAgICAgKG90aGhtbSwgb3RoZXIuX3NlY29uZCwgb3RoZXIuX21pY3Jvc2Vjb25kKSkKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgIiIiSGFzaC4iIiIKICAgICAgICB0em9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBpZiBub3QgdHpvZmY6ICMgemVybyBvciBOb25lCiAgICAgICAgICAgIHJldHVybiBoYXNoKHNlbGYuX2dldHN0YXRlKClbMF0pCiAgICAgICAgaCwgbSA9IGRpdm1vZCh0aW1lZGVsdGEoaG91cnM9c2VsZi5ob3VyLCBtaW51dGVzPXNlbGYubWludXRlKSAtIHR6b2ZmLAogICAgICAgICAgICAgICAgICAgICAgdGltZWRlbHRhKGhvdXJzPTEpKQogICAgICAgIGFzc2VydCBub3QgbSAlIHRpbWVkZWx0YShtaW51dGVzPTEpLCAid2hvbGUgbWludXRlIgogICAgICAgIG0gLy89IHRpbWVkZWx0YShtaW51dGVzPTEpCiAgICAgICAgaWYgMCA8PSBoIDwgMjQ6CiAgICAgICAgICAgIHJldHVybiBoYXNoKHRpbWUoaCwgbSwgc2VsZi5zZWNvbmQsIHNlbGYubWljcm9zZWNvbmQpKQogICAgICAgIHJldHVybiBoYXNoKChoLCBtLCBzZWxmLnNlY29uZCwgc2VsZi5taWNyb3NlY29uZCkpCgogICAgIyBDb252ZXJzaW9uIHRvIHN0cmluZwoKICAgIGRlZiBfdHpzdHIoc2VsZiwgc2VwPSI6Iik6CiAgICAgICAgIiIiUmV0dXJuIGZvcm1hdHRlZCB0aW1lem9uZSBvZmZzZXQgKCt4eDp4eCkgb3IgTm9uZS4iIiIKICAgICAgICBvZmYgPSBzZWxmLnV0Y29mZnNldCgpCiAgICAgICAgaWYgb2ZmIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBvZmYuZGF5cyA8IDA6CiAgICAgICAgICAgICAgICBzaWduID0gIi0iCiAgICAgICAgICAgICAgICBvZmYgPSAtb2ZmCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzaWduID0gIisiCiAgICAgICAgICAgIGhoLCBtbSA9IGRpdm1vZChvZmYsIHRpbWVkZWx0YShob3Vycz0xKSkKICAgICAgICAgICAgYXNzZXJ0IG5vdCBtbSAlIHRpbWVkZWx0YShtaW51dGVzPTEpLCAid2hvbGUgbWludXRlIgogICAgICAgICAgICBtbSAvLz0gdGltZWRlbHRhKG1pbnV0ZXM9MSkKICAgICAgICAgICAgYXNzZXJ0IDAgPD0gaGggPCAyNAogICAgICAgICAgICBvZmYgPSAiJXMlMDJkJXMlMDJkIiAlIChzaWduLCBoaCwgc2VwLCBtbSkKICAgICAgICByZXR1cm4gb2ZmCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgICIiIkNvbnZlcnQgdG8gZm9ybWFsIHN0cmluZywgZm9yIHJlcHIoKS4iIiIKICAgICAgICBpZiBzZWxmLl9taWNyb3NlY29uZCAhPSAwOgogICAgICAgICAgICBzID0gIiwgJWQsICVkIiAlIChzZWxmLl9zZWNvbmQsIHNlbGYuX21pY3Jvc2Vjb25kKQogICAgICAgIGVsaWYgc2VsZi5fc2Vjb25kICE9IDA6CiAgICAgICAgICAgIHMgPSAiLCAlZCIgJSBzZWxmLl9zZWNvbmQKICAgICAgICBlbHNlOgogICAgICAgICAgICBzID0gIiIKICAgICAgICBzPSAiJXMoJWQsICVkJXMpIiAlICgnZGF0ZXRpbWUuJyArIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgcykKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGFzc2VydCBzWy0xOl0gPT0gIikiCiAgICAgICAgICAgIHMgPSBzWzotMV0gKyAiLCB0emluZm89JXIiICUgc2VsZi5fdHppbmZvICsgIikiCiAgICAgICAgcmV0dXJuIHMKCiAgICBkZWYgaXNvZm9ybWF0KHNlbGYpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZSBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIElTTy4KCiAgICAgICAgVGhpcyBpcyAnSEg6TU06U1MubW1tbW1tK3p6Onp6Jywgb3IgJ0hIOk1NOlNTK3p6Onp6JyBpZgogICAgICAgIHNlbGYubWljcm9zZWNvbmQgPT0gMC4KICAgICAgICAiIiIKICAgICAgICBzID0gX2Zvcm1hdF90aW1lKHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgc2VsZi5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpCiAgICAgICAgdHogPSBzZWxmLl90enN0cigpCiAgICAgICAgaWYgdHo6CiAgICAgICAgICAgIHMgKz0gdHoKICAgICAgICByZXR1cm4gcwoKICAgIF9fc3RyX18gPSBpc29mb3JtYXQKCiAgICBkZWYgc3RyZnRpbWUoc2VsZiwgZm10KToKICAgICAgICAiIiJGb3JtYXQgdXNpbmcgc3RyZnRpbWUoKS4gIFRoZSBkYXRlIHBhcnQgb2YgdGhlIHRpbWVzdGFtcCBwYXNzZWQKICAgICAgICB0byB1bmRlcmx5aW5nIHN0cmZ0aW1lIHNob3VsZCBub3QgYmUgdXNlZC4KICAgICAgICAiIiIKICAgICAgICAjIFRoZSB5ZWFyIG11c3QgYmUgPj0gMTAwMCBlbHNlIFB5dGhvbidzIHN0cmZ0aW1lIGltcGxlbWVudGF0aW9uCiAgICAgICAgIyBjYW4gcmFpc2UgYSBib2d1cyBleGNlcHRpb24uCiAgICAgICAgdGltZXR1cGxlID0gKDE5MDAsIDEsIDEsCiAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgc2VsZi5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAwLCAxLCAtMSkKICAgICAgICByZXR1cm4gX3dyYXBfc3RyZnRpbWUoc2VsZiwgZm10LCB0aW1ldHVwbGUpCgogICAgZGVmIF9fZm9ybWF0X18oc2VsZiwgZm10KToKICAgICAgICBpZiBsZW4oZm10KSAhPSAwOgogICAgICAgICAgICByZXR1cm4gc2VsZi5zdHJmdGltZShmbXQpCiAgICAgICAgcmV0dXJuIHN0cihzZWxmKQoKICAgICMgVGltZXpvbmUgZnVuY3Rpb25zCgogICAgZGVmIHV0Y29mZnNldChzZWxmKToKICAgICAgICAiIiJSZXR1cm4gdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaW51dGVzIGVhc3Qgb2YgVVRDIChuZWdhdGl2ZSB3ZXN0IG9mCiAgICAgICAgVVRDKS4iIiIKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBvZmZzZXQgPSBzZWxmLl90emluZm8udXRjb2Zmc2V0KE5vbmUpCiAgICAgICAgX2NoZWNrX3V0Y19vZmZzZXQoInV0Y29mZnNldCIsIG9mZnNldCkKICAgICAgICByZXR1cm4gb2Zmc2V0CgogICAgZGVmIHR6bmFtZShzZWxmKToKICAgICAgICAiIiJSZXR1cm4gdGhlIHRpbWV6b25lIG5hbWUuCgogICAgICAgIE5vdGUgdGhhdCB0aGUgbmFtZSBpcyAxMDAlIGluZm9ybWF0aW9uYWwgLS0gdGhlcmUncyBubyByZXF1aXJlbWVudCB0aGF0CiAgICAgICAgaXQgbWVhbiBhbnl0aGluZyBpbiBwYXJ0aWN1bGFyLiBGb3IgZXhhbXBsZSwgIkdNVCIsICJVVEMiLCAiLTUwMCIsCiAgICAgICAgIi01OjAwIiwgIkVEVCIsICJVUy9FYXN0ZXJuIiwgIkFtZXJpY2EvTmV3IFlvcmsiIGFyZSBhbGwgdmFsaWQgcmVwbGllcy4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBuYW1lID0gc2VsZi5fdHppbmZvLnR6bmFtZShOb25lKQogICAgICAgIF9jaGVja190em5hbWUobmFtZSkKICAgICAgICByZXR1cm4gbmFtZQoKICAgIGRlZiBkc3Qoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIDAgaWYgRFNUIGlzIG5vdCBpbiBlZmZlY3QsIG9yIHRoZSBEU1Qgb2Zmc2V0IChpbiBtaW51dGVzCiAgICAgICAgZWFzdHdhcmQpIGlmIERTVCBpcyBpbiBlZmZlY3QuCgogICAgICAgIFRoaXMgaXMgcHVyZWx5IGluZm9ybWF0aW9uYWw7IHRoZSBEU1Qgb2Zmc2V0IGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQgdG8KICAgICAgICB0aGUgVVRDIG9mZnNldCByZXR1cm5lZCBieSB1dGNvZmZzZXQoKSBpZiBhcHBsaWNhYmxlLCBzbyB0aGVyZSdzIG5vCiAgICAgICAgbmVlZCB0byBjb25zdWx0IGRzdCgpIHVubGVzcyB5b3UncmUgaW50ZXJlc3RlZCBpbiBkaXNwbGF5aW5nIHRoZSBEU1QKICAgICAgICBpbmZvLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIG9mZnNldCA9IHNlbGYuX3R6aW5mby5kc3QoTm9uZSkKICAgICAgICBfY2hlY2tfdXRjX29mZnNldCgiZHN0Iiwgb2Zmc2V0KQogICAgICAgIHJldHVybiBvZmZzZXQKCiAgICBkZWYgcmVwbGFjZShzZWxmLCBob3VyPU5vbmUsIG1pbnV0ZT1Ob25lLCBzZWNvbmQ9Tm9uZSwgbWljcm9zZWNvbmQ9Tm9uZSwKICAgICAgICAgICAgICAgIHR6aW5mbz1UcnVlKToKICAgICAgICAiIiJSZXR1cm4gYSBuZXcgdGltZSB3aXRoIG5ldyB2YWx1ZXMgZm9yIHRoZSBzcGVjaWZpZWQgZmllbGRzLiIiIgogICAgICAgIGlmIGhvdXIgaXMgTm9uZToKICAgICAgICAgICAgaG91ciA9IHNlbGYuaG91cgogICAgICAgIGlmIG1pbnV0ZSBpcyBOb25lOgogICAgICAgICAgICBtaW51dGUgPSBzZWxmLm1pbnV0ZQogICAgICAgIGlmIHNlY29uZCBpcyBOb25lOgogICAgICAgICAgICBzZWNvbmQgPSBzZWxmLnNlY29uZAogICAgICAgIGlmIG1pY3Jvc2Vjb25kIGlzIE5vbmU6CiAgICAgICAgICAgIG1pY3Jvc2Vjb25kID0gc2VsZi5taWNyb3NlY29uZAogICAgICAgIGlmIHR6aW5mbyBpcyBUcnVlOgogICAgICAgICAgICB0emluZm8gPSBzZWxmLnR6aW5mbwogICAgICAgIF9jaGVja190aW1lX2ZpZWxkcyhob3VyLCBtaW51dGUsIHNlY29uZCwgbWljcm9zZWNvbmQpCiAgICAgICAgX2NoZWNrX3R6aW5mb19hcmcodHppbmZvKQogICAgICAgIHJldHVybiB0aW1lKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWNyb3NlY29uZCwgdHppbmZvKQoKICAgIGRlZiBfX2Jvb2xfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLnNlY29uZCBvciBzZWxmLm1pY3Jvc2Vjb25kOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIG9mZnNldCA9IHNlbGYudXRjb2Zmc2V0KCkgb3IgdGltZWRlbHRhKDApCiAgICAgICAgcmV0dXJuIHRpbWVkZWx0YShob3Vycz1zZWxmLmhvdXIsIG1pbnV0ZXM9c2VsZi5taW51dGUpICE9IG9mZnNldAoKICAgICMgUGlja2xlIHN1cHBvcnQuCgogICAgZGVmIF9nZXRzdGF0ZShzZWxmKToKICAgICAgICB1czIsIHVzMyA9IGRpdm1vZChzZWxmLl9taWNyb3NlY29uZCwgMjU2KQogICAgICAgIHVzMSwgdXMyID0gZGl2bW9kKHVzMiwgMjU2KQogICAgICAgIGJhc2VzdGF0ZSA9IGJ5dGVzKFtzZWxmLl9ob3VyLCBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgdXMxLCB1czIsIHVzM10pCiAgICAgICAgaWYgc2VsZi5fdHppbmZvIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiAoYmFzZXN0YXRlLCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gKGJhc2VzdGF0ZSwgc2VsZi5fdHppbmZvKQoKICAgIGRlZiBfX3NldHN0YXRlKHNlbGYsIHN0cmluZywgdHppbmZvKToKICAgICAgICBpZiBsZW4oc3RyaW5nKSAhPSA2IG9yIHN0cmluZ1swXSA+PSAyNDoKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJhbiBpbnRlZ2VyIGlzIHJlcXVpcmVkIikKICAgICAgICAoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgIHVzMSwgdXMyLCB1czMpID0gc3RyaW5nCiAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQgPSAoKCh1czEgPDwgOCkgfCB1czIpIDw8IDgpIHwgdXMzCiAgICAgICAgaWYgdHppbmZvIGlzIE5vbmUgb3IgaXNpbnN0YW5jZSh0emluZm8sIF90emluZm9fY2xhc3MpOgogICAgICAgICAgICBzZWxmLl90emluZm8gPSB0emluZm8KICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImJhZCB0emluZm8gc3RhdGUgYXJnICVyIiAlIHR6aW5mbykKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHRpbWUsIHNlbGYuX2dldHN0YXRlKCkpCgpfdGltZV9jbGFzcyA9IHRpbWUgICMgc28gZnVuY3Rpb25zIHcvIGFyZ3MgbmFtZWQgInRpbWUiIGNhbiBnZXQgYXQgdGhlIGNsYXNzCgp0aW1lLm1pbiA9IHRpbWUoMCwgMCwgMCkKdGltZS5tYXggPSB0aW1lKDIzLCA1OSwgNTksIDk5OTk5OSkKdGltZS5yZXNvbHV0aW9uID0gdGltZWRlbHRhKG1pY3Jvc2Vjb25kcz0xKQoKY2xhc3MgZGF0ZXRpbWUoZGF0ZSk6CiAgICAiIiJkYXRldGltZSh5ZWFyLCBtb250aCwgZGF5WywgaG91clssIG1pbnV0ZVssIHNlY29uZFssIG1pY3Jvc2Vjb25kWyx0emluZm9dXV1dXSkKCiAgICBUaGUgeWVhciwgbW9udGggYW5kIGRheSBhcmd1bWVudHMgYXJlIHJlcXVpcmVkLiB0emluZm8gbWF5IGJlIE5vbmUsIG9yIGFuCiAgICBpbnN0YW5jZSBvZiBhIHR6aW5mbyBzdWJjbGFzcy4gVGhlIHJlbWFpbmluZyBhcmd1bWVudHMgbWF5IGJlIGludHMgb3IgbG9uZ3MuCiAgICAiIiIKCiAgICAjZml4bWUgYnJ5dGhvbgogICAgI19fc2xvdHNfXyA9IGRhdGUuX19zbG90c19fICsgKAogICAgX19zbG90c19fID0gKCdfeWVhcicsICdfbW9udGgnLCAnX2RheScsIAogICAgICAgICAgICAgICAgICdfaG91cicsJ19taW51dGUnLCdfc2Vjb25kJywnX21pY3Jvc2Vjb25kJywnX3R6aW5mbycpCiAgICBkZWYgX19uZXdfXyhjbHMsIHllYXIsIG1vbnRoPU5vbmUsIGRheT1Ob25lLCBob3VyPTAsIG1pbnV0ZT0wLCBzZWNvbmQ9MCwKICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kPTAsIHR6aW5mbz1Ob25lKToKICAgICAgICAgICAgIAogICAgICAgIGlmIGlzaW5zdGFuY2UoeWVhciwgYnl0ZXMpIGFuZCBsZW4oeWVhcikgPT0gMTA6CiAgICAgICAgICAgICMgUGlja2xlIHN1cHBvcnQKICAgICAgICAgICAgc2VsZiA9IGRhdGUuX19uZXdfXyhjbHMsIHllYXJbOjRdKQogICAgICAgICAgICBzZWxmLl9fc2V0c3RhdGUoeWVhciwgbW9udGgpCiAgICAgICAgICAgIHJldHVybiBzZWxmCiAgICAgICAgX2NoZWNrX3R6aW5mb19hcmcodHppbmZvKQogICAgICAgIF9jaGVja190aW1lX2ZpZWxkcyhob3VyLCBtaW51dGUsIHNlY29uZCwgbWljcm9zZWNvbmQpCiAgICAgICAgI3ByaW50KGRpcihkYXRlKSkKICAgICAgICBzZWxmID0gZGF0ZS5fX25ld19fKGNscywgeWVhciwgbW9udGgsIGRheSkKICAgICAgICBzZWxmLl9ob3VyID0gaG91cgogICAgICAgIHNlbGYuX21pbnV0ZSA9IG1pbnV0ZQogICAgICAgIHNlbGYuX3NlY29uZCA9IHNlY29uZAogICAgICAgIHNlbGYuX21pY3Jvc2Vjb25kID0gbWljcm9zZWNvbmQKICAgICAgICBzZWxmLl90emluZm8gPSB0emluZm8KICAgICAgICByZXR1cm4gc2VsZgoKICAgICMgUmVhZC1vbmx5IGZpZWxkIGFjY2Vzc29ycwogICAgQHByb3BlcnR5CiAgICBkZWYgaG91cihzZWxmKToKICAgICAgICAiIiJob3VyICgwLTIzKSIiIgogICAgICAgIHJldHVybiBzZWxmLl9ob3VyCgogICAgQHByb3BlcnR5CiAgICBkZWYgbWludXRlKHNlbGYpOgogICAgICAgICIiIm1pbnV0ZSAoMC01OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5fbWludXRlCgogICAgQHByb3BlcnR5CiAgICBkZWYgc2Vjb25kKHNlbGYpOgogICAgICAgICIiInNlY29uZCAoMC01OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5fc2Vjb25kCgogICAgQHByb3BlcnR5CiAgICBkZWYgbWljcm9zZWNvbmQoc2VsZik6CiAgICAgICAgIiIibWljcm9zZWNvbmQgKDAtOTk5OTk5KSIiIgogICAgICAgIHJldHVybiBzZWxmLl9taWNyb3NlY29uZAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHR6aW5mbyhzZWxmKToKICAgICAgICAiIiJ0aW1lem9uZSBpbmZvIG9iamVjdCIiIgogICAgICAgIHJldHVybiBzZWxmLl90emluZm8KCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tdGltZXN0YW1wKGNscywgdCwgdHo9Tm9uZSk6CiAgICAgICAgIiIiQ29uc3RydWN0IGEgZGF0ZXRpbWUgZnJvbSBhIFBPU0lYIHRpbWVzdGFtcCAobGlrZSB0aW1lLnRpbWUoKSkuCgogICAgICAgIEEgdGltZXpvbmUgaW5mbyBvYmplY3QgbWF5IGJlIHBhc3NlZCBpbiBhcyB3ZWxsLgogICAgICAgICIiIgogICAgICAgIF9jaGVja190emluZm9fYXJnKHR6KQoKICAgICAgICBjb252ZXJ0ZXIgPSBfdGltZS5sb2NhbHRpbWUgaWYgdHogaXMgTm9uZSBlbHNlIF90aW1lLmdtdGltZQoKICAgICAgICB0LCBmcmFjID0gZGl2bW9kKHQsIDEuMCkKICAgICAgICB1cyA9IHJvdW5kKGZyYWMgKiAxZTYpCgogICAgICAgICMgSWYgdGltZXN0YW1wIGlzIGxlc3MgdGhhbiBvbmUgbWljcm9zZWNvbmQgc21hbGxlciB0aGFuIGEKICAgICAgICAjIGZ1bGwgc2Vjb25kLCB1cyBjYW4gYmUgcm91bmRlZCB1cCB0byAxMDAwMDAwLiAgSW4gdGhpcyBjYXNlLAogICAgICAgICMgcm9sbCBvdmVyIHRvIHNlY29uZHMsIG90aGVyd2lzZSwgVmFsdWVFcnJvciBpcyByYWlzZWQKICAgICAgICAjIGJ5IHRoZSBjb25zdHJ1Y3Rvci4KICAgICAgICBpZiB1cyA9PSAxMDAwMDAwOgogICAgICAgICAgICB0ICs9IDEKICAgICAgICAgICAgdXMgPSAwCiAgICAgICAgeSwgbSwgZCwgaGgsIG1tLCBzcywgd2Vla2RheSwgamRheSwgZHN0ID0gY29udmVydGVyKHQpCiAgICAgICAgc3MgPSBtaW4oc3MsIDU5KSAgICAjIGNsYW1wIG91dCBsZWFwIHNlY29uZHMgaWYgdGhlIHBsYXRmb3JtIGhhcyB0aGVtCiAgICAgICAgcmVzdWx0ID0gY2xzKHksIG0sIGQsIGhoLCBtbSwgc3MsIHVzLCB0eikKICAgICAgICBpZiB0eiBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmVzdWx0ID0gdHouZnJvbXV0YyhyZXN1bHQpCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHV0Y2Zyb210aW1lc3RhbXAoY2xzLCB0KToKICAgICAgICAiQ29uc3RydWN0IGEgVVRDIGRhdGV0aW1lIGZyb20gYSBQT1NJWCB0aW1lc3RhbXAgKGxpa2UgdGltZS50aW1lKCkpLiIKICAgICAgICB0LCBmcmFjID0gZGl2bW9kKHQsIDEuMCkKICAgICAgICB1cyA9IHJvdW5kKGZyYWMgKiAxZTYpCgogICAgICAgICMgSWYgdGltZXN0YW1wIGlzIGxlc3MgdGhhbiBvbmUgbWljcm9zZWNvbmQgc21hbGxlciB0aGFuIGEKICAgICAgICAjIGZ1bGwgc2Vjb25kLCB1cyBjYW4gYmUgcm91bmRlZCB1cCB0byAxMDAwMDAwLiAgSW4gdGhpcyBjYXNlLAogICAgICAgICMgcm9sbCBvdmVyIHRvIHNlY29uZHMsIG90aGVyd2lzZSwgVmFsdWVFcnJvciBpcyByYWlzZWQKICAgICAgICAjIGJ5IHRoZSBjb25zdHJ1Y3Rvci4KICAgICAgICBpZiB1cyA9PSAxMDAwMDAwOgogICAgICAgICAgICB0ICs9IDEKICAgICAgICAgICAgdXMgPSAwCiAgICAgICAgeSwgbSwgZCwgaGgsIG1tLCBzcywgd2Vla2RheSwgamRheSwgZHN0ID0gX3RpbWUuZ210aW1lKHQpCiAgICAgICAgc3MgPSBtaW4oc3MsIDU5KSAgICAjIGNsYW1wIG91dCBsZWFwIHNlY29uZHMgaWYgdGhlIHBsYXRmb3JtIGhhcyB0aGVtCiAgICAgICAgcmV0dXJuIGNscyh5LCBtLCBkLCBoaCwgbW0sIHNzLCB1cykKCiAgICAjIFhYWCBUaGlzIGlzIHN1cHBvc2VkIHRvIGRvIGJldHRlciB0aGFuIHdlICpjYW4qIGRvIGJ5IHVzaW5nIHRpbWUudGltZSgpLAogICAgIyBYWFggaWYgdGhlIHBsYXRmb3JtIHN1cHBvcnRzIGEgbW9yZSBhY2N1cmF0ZSB3YXkuICBUaGUgQyBpbXBsZW1lbnRhdGlvbgogICAgIyBYWFggdXNlcyBnZXR0aW1lb2ZkYXkgb24gcGxhdGZvcm1zIHRoYXQgaGF2ZSBpdCwgYnV0IHRoYXQgaXNuJ3QKICAgICMgWFhYIGF2YWlsYWJsZSBmcm9tIFB5dGhvbi4gIFNvIG5vdygpIG1heSByZXR1cm4gZGlmZmVyZW50IHJlc3VsdHMKICAgICMgWFhYIGFjcm9zcyB0aGUgaW1wbGVtZW50YXRpb25zLgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgbm93KGNscywgdHo9Tm9uZSk6CiAgICAgICAgIkNvbnN0cnVjdCBhIGRhdGV0aW1lIGZyb20gdGltZS50aW1lKCkgYW5kIG9wdGlvbmFsIHRpbWUgem9uZSBpbmZvLiIKICAgICAgICB0ID0gX3RpbWUudGltZSgpCiAgICAgICAgcmV0dXJuIGNscy5mcm9tdGltZXN0YW1wKHQsIHR6KQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHV0Y25vdyhjbHMpOgogICAgICAgICJDb25zdHJ1Y3QgYSBVVEMgZGF0ZXRpbWUgZnJvbSB0aW1lLnRpbWUoKS4iCiAgICAgICAgdCA9IF90aW1lLnRpbWUoKQogICAgICAgIHJldHVybiBjbHMudXRjZnJvbXRpbWVzdGFtcCh0KQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGNvbWJpbmUoY2xzLCBkYXRlLCB0aW1lKToKICAgICAgICAiQ29uc3RydWN0IGEgZGF0ZXRpbWUgZnJvbSBhIGdpdmVuIGRhdGUgYW5kIGEgZ2l2ZW4gdGltZS4iCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZGF0ZSwgX2RhdGVfY2xhc3MpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImRhdGUgYXJndW1lbnQgbXVzdCBiZSBhIGRhdGUgaW5zdGFuY2UiKQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHRpbWUsIF90aW1lX2NsYXNzKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ0aW1lIGFyZ3VtZW50IG11c3QgYmUgYSB0aW1lIGluc3RhbmNlIikKICAgICAgICByZXR1cm4gY2xzKGRhdGUueWVhciwgZGF0ZS5tb250aCwgZGF0ZS5kYXksCiAgICAgICAgICAgICAgICAgICB0aW1lLmhvdXIsIHRpbWUubWludXRlLCB0aW1lLnNlY29uZCwgdGltZS5taWNyb3NlY29uZCwKICAgICAgICAgICAgICAgICAgIHRpbWUudHppbmZvKQoKICAgIGRlZiB0aW1ldHVwbGUoc2VsZik6CiAgICAgICAgIlJldHVybiBsb2NhbCB0aW1lIHR1cGxlIGNvbXBhdGlibGUgd2l0aCB0aW1lLmxvY2FsdGltZSgpLiIKICAgICAgICBkc3QgPSBzZWxmLmRzdCgpCiAgICAgICAgaWYgZHN0IGlzIE5vbmU6CiAgICAgICAgICAgIGRzdCA9IC0xCiAgICAgICAgZWxpZiBkc3Q6CiAgICAgICAgICAgIGRzdCA9IDEKICAgICAgICBlbHNlOgogICAgICAgICAgICBkc3QgPSAwCiAgICAgICAgcmV0dXJuIF9idWlsZF9zdHJ1Y3RfdGltZShzZWxmLnllYXIsIHNlbGYubW9udGgsIHNlbGYuZGF5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyLCBzZWxmLm1pbnV0ZSwgc2VsZi5zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3QpCgogICAgZGVmIHV0Y3RpbWV0dXBsZShzZWxmKToKICAgICAgICAiUmV0dXJuIFVUQyB0aW1lIHR1cGxlIGNvbXBhdGlibGUgd2l0aCB0aW1lLmdtdGltZSgpLiIKICAgICAgICBvZmZzZXQgPSBzZWxmLnV0Y29mZnNldCgpCiAgICAgICAgaWYgb2Zmc2V0OgogICAgICAgICAgICBzZWxmIC09IG9mZnNldAogICAgICAgIHksIG0sIGQgPSBzZWxmLnllYXIsIHNlbGYubW9udGgsIHNlbGYuZGF5CiAgICAgICAgaGgsIG1tLCBzcyA9IHNlbGYuaG91ciwgc2VsZi5taW51dGUsIHNlbGYuc2Vjb25kCiAgICAgICAgcmV0dXJuIF9idWlsZF9zdHJ1Y3RfdGltZSh5LCBtLCBkLCBoaCwgbW0sIHNzLCAwKQoKICAgIGRlZiBkYXRlKHNlbGYpOgogICAgICAgICJSZXR1cm4gdGhlIGRhdGUgcGFydC4iCiAgICAgICAgcmV0dXJuIGRhdGUoc2VsZi5feWVhciwgc2VsZi5fbW9udGgsIHNlbGYuX2RheSkKCiAgICBkZWYgdGltZShzZWxmKToKICAgICAgICAiUmV0dXJuIHRoZSB0aW1lIHBhcnQsIHdpdGggdHppbmZvIE5vbmUuIgogICAgICAgIHJldHVybiB0aW1lKHNlbGYuaG91ciwgc2VsZi5taW51dGUsIHNlbGYuc2Vjb25kLCBzZWxmLm1pY3Jvc2Vjb25kKQoKICAgIGRlZiB0aW1ldHooc2VsZik6CiAgICAgICAgIlJldHVybiB0aGUgdGltZSBwYXJ0LCB3aXRoIHNhbWUgdHppbmZvLiIKICAgICAgICByZXR1cm4gdGltZShzZWxmLmhvdXIsIHNlbGYubWludXRlLCBzZWxmLnNlY29uZCwgc2VsZi5taWNyb3NlY29uZCwKICAgICAgICAgICAgICAgICAgICBzZWxmLl90emluZm8pCgogICAgZGVmIHJlcGxhY2Uoc2VsZiwgeWVhcj1Ob25lLCBtb250aD1Ob25lLCBkYXk9Tm9uZSwgaG91cj1Ob25lLAogICAgICAgICAgICAgICAgbWludXRlPU5vbmUsIHNlY29uZD1Ob25lLCBtaWNyb3NlY29uZD1Ob25lLCB0emluZm89VHJ1ZSk6CiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IGRhdGV0aW1lIHdpdGggbmV3IHZhbHVlcyBmb3IgdGhlIHNwZWNpZmllZCBmaWVsZHMuIiIiCiAgICAgICAgaWYgeWVhciBpcyBOb25lOgogICAgICAgICAgICB5ZWFyID0gc2VsZi55ZWFyCiAgICAgICAgaWYgbW9udGggaXMgTm9uZToKICAgICAgICAgICAgbW9udGggPSBzZWxmLm1vbnRoCiAgICAgICAgaWYgZGF5IGlzIE5vbmU6CiAgICAgICAgICAgIGRheSA9IHNlbGYuZGF5CiAgICAgICAgaWYgaG91ciBpcyBOb25lOgogICAgICAgICAgICBob3VyID0gc2VsZi5ob3VyCiAgICAgICAgaWYgbWludXRlIGlzIE5vbmU6CiAgICAgICAgICAgIG1pbnV0ZSA9IHNlbGYubWludXRlCiAgICAgICAgaWYgc2Vjb25kIGlzIE5vbmU6CiAgICAgICAgICAgIHNlY29uZCA9IHNlbGYuc2Vjb25kCiAgICAgICAgaWYgbWljcm9zZWNvbmQgaXMgTm9uZToKICAgICAgICAgICAgbWljcm9zZWNvbmQgPSBzZWxmLm1pY3Jvc2Vjb25kCiAgICAgICAgaWYgdHppbmZvIGlzIFRydWU6CiAgICAgICAgICAgIHR6aW5mbyA9IHNlbGYudHppbmZvCiAgICAgICAgX2NoZWNrX2RhdGVfZmllbGRzKHllYXIsIG1vbnRoLCBkYXkpCiAgICAgICAgX2NoZWNrX3RpbWVfZmllbGRzKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWNyb3NlY29uZCkKICAgICAgICBfY2hlY2tfdHppbmZvX2FyZyh0emluZm8pCiAgICAgICAgcmV0dXJuIGRhdGV0aW1lKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kLCB0emluZm8pCgogICAgZGVmIGFzdGltZXpvbmUoc2VsZiwgdHopOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHR6LCB0emluZm8pOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInR6IGFyZ3VtZW50IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgdHppbmZvIikKCiAgICAgICAgbXl0eiA9IHNlbGYudHppbmZvCiAgICAgICAgaWYgbXl0eiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJhc3RpbWV6b25lKCkgcmVxdWlyZXMgYW4gYXdhcmUgZGF0ZXRpbWUiKQoKICAgICAgICBpZiB0eiBpcyBteXR6OgogICAgICAgICAgICByZXR1cm4gc2VsZgoKICAgICAgICAjIENvbnZlcnQgc2VsZiB0byBVVEMsIGFuZCBhdHRhY2ggdGhlIG5ldyB0aW1lIHpvbmUgb2JqZWN0LgogICAgICAgIG15b2Zmc2V0ID0gc2VsZi51dGNvZmZzZXQoKQogICAgICAgIGlmIG15b2Zmc2V0IGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImFzdGltZXpvbmUoKSByZXF1aXJlcyBhbiBhd2FyZSBkYXRldGltZSIpCiAgICAgICAgdXRjID0gKHNlbGYgLSBteW9mZnNldCkucmVwbGFjZSh0emluZm89dHopCgogICAgICAgICMgQ29udmVydCBmcm9tIFVUQyB0byB0eidzIGxvY2FsIHRpbWUuCiAgICAgICAgcmV0dXJuIHR6LmZyb211dGModXRjKQoKICAgICMgV2F5cyB0byBwcm9kdWNlIGEgc3RyaW5nLgoKICAgIGRlZiBjdGltZShzZWxmKToKICAgICAgICAiUmV0dXJuIGN0aW1lKCkgc3R5bGUgc3RyaW5nLiIKICAgICAgICB3ZWVrZGF5ID0gc2VsZi50b29yZGluYWwoKSAlIDcgb3IgNwogICAgICAgIHJldHVybiAiJXMgJXMgJTJkICUwMmQ6JTAyZDolMDJkICUwNGQiICUgKAogICAgICAgICAgICBfREFZTkFNRVNbd2Vla2RheV0sCiAgICAgICAgICAgIF9NT05USE5BTUVTW3NlbGYuX21vbnRoXSwKICAgICAgICAgICAgc2VsZi5fZGF5LAogICAgICAgICAgICBzZWxmLl9ob3VyLCBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwKICAgICAgICAgICAgc2VsZi5feWVhcikKCiAgICBkZWYgaXNvZm9ybWF0KHNlbGYsIHNlcD0nVCcpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZSBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIElTTy4KCiAgICAgICAgVGhpcyBpcyAnWVlZWS1NTS1ERCBISDpNTTpTUy5tbW1tbW0nLCBvciAnWVlZWS1NTS1ERCBISDpNTTpTUycgaWYKICAgICAgICBzZWxmLm1pY3Jvc2Vjb25kID09IDAuCgogICAgICAgIElmIHNlbGYudHppbmZvIGlzIG5vdCBOb25lLCB0aGUgVVRDIG9mZnNldCBpcyBhbHNvIGF0dGFjaGVkLCBnaXZpbmcKICAgICAgICAnWVlZWS1NTS1ERCBISDpNTTpTUy5tbW1tbW0rSEg6TU0nIG9yICdZWVlZLU1NLUREIEhIOk1NOlNTK0hIOk1NJy4KCiAgICAgICAgT3B0aW9uYWwgYXJndW1lbnQgc2VwIHNwZWNpZmllcyB0aGUgc2VwYXJhdG9yIGJldHdlZW4gZGF0ZSBhbmQKICAgICAgICB0aW1lLCBkZWZhdWx0ICdUJy4KICAgICAgICAiIiIKICAgICAgICBzID0gKCIlMDRkLSUwMmQtJTAyZCVjIiAlIChzZWxmLl95ZWFyLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwKSArCiAgICAgICAgICAgICAgICBfZm9ybWF0X3RpbWUoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpKQogICAgICAgIG9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBpZiBvZmYgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIG9mZi5kYXlzIDwgMDoKICAgICAgICAgICAgICAgIHNpZ24gPSAiLSIKICAgICAgICAgICAgICAgIG9mZiA9IC1vZmYKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNpZ24gPSAiKyIKICAgICAgICAgICAgaGgsIG1tID0gZGl2bW9kKG9mZiwgdGltZWRlbHRhKGhvdXJzPTEpKQogICAgICAgICAgICBhc3NlcnQgbm90IG1tICUgdGltZWRlbHRhKG1pbnV0ZXM9MSksICJ3aG9sZSBtaW51dGUiCiAgICAgICAgICAgIG1tIC8vPSB0aW1lZGVsdGEobWludXRlcz0xKQogICAgICAgICAgICBzICs9ICIlcyUwMmQ6JTAyZCIgJSAoc2lnbiwgaGgsIG1tKQogICAgICAgIHJldHVybiBzCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgICIiIkNvbnZlcnQgdG8gZm9ybWFsIHN0cmluZywgZm9yIHJlcHIoKS4iIiIKICAgICAgICBMID0gW3NlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXksICMgVGhlc2UgYXJlIG5ldmVyIHplcm8KICAgICAgICAgICAgIHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgc2VsZi5fc2Vjb25kLCBzZWxmLl9taWNyb3NlY29uZF0KICAgICAgICBpZiBMWy0xXSA9PSAwOgogICAgICAgICAgICBkZWwgTFstMV0KICAgICAgICBpZiBMWy0xXSA9PSAwOgogICAgICAgICAgICBkZWwgTFstMV0KICAgICAgICBzID0gIiwgIi5qb2luKG1hcChzdHIsIEwpKQogICAgICAgIHMgPSAiJXMoJXMpIiAlICgnZGF0ZXRpbWUuJyArIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBzKQogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBub3QgTm9uZToKICAgICAgICAgICAgYXNzZXJ0IHNbLTE6XSA9PSAiKSIKICAgICAgICAgICAgcyA9IHNbOi0xXSArICIsIHR6aW5mbz0lciIgJSBzZWxmLl90emluZm8gKyAiKSIKICAgICAgICByZXR1cm4gcwoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgICJDb252ZXJ0IHRvIHN0cmluZywgZm9yIHN0cigpLiIKICAgICAgICByZXR1cm4gc2VsZi5pc29mb3JtYXQoc2VwPScgJykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBzdHJwdGltZShjbHMsIGRhdGVfc3RyaW5nLCBmb3JtYXQpOgogICAgICAgICdzdHJpbmcsIGZvcm1hdCAtPiBuZXcgZGF0ZXRpbWUgcGFyc2VkIGZyb20gYSBzdHJpbmcgKGxpa2UgdGltZS5zdHJwdGltZSgpKS4nCiAgICAgICAgaW1wb3J0IF9zdHJwdGltZQogICAgICAgIHJldHVybiBfc3RycHRpbWUuX3N0cnB0aW1lX2RhdGV0aW1lKGNscywgZGF0ZV9zdHJpbmcsIGZvcm1hdCkKCiAgICBkZWYgdXRjb2Zmc2V0KHNlbGYpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZXpvbmUgb2Zmc2V0IGluIG1pbnV0ZXMgZWFzdCBvZiBVVEMgKG5lZ2F0aXZlIHdlc3Qgb2YKICAgICAgICBVVEMpLiIiIgogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIG9mZnNldCA9IHNlbGYuX3R6aW5mby51dGNvZmZzZXQoc2VsZikKICAgICAgICBfY2hlY2tfdXRjX29mZnNldCgidXRjb2Zmc2V0Iiwgb2Zmc2V0KQogICAgICAgIHJldHVybiBvZmZzZXQKCiAgICBkZWYgdHpuYW1lKHNlbGYpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZXpvbmUgbmFtZS4KCiAgICAgICAgTm90ZSB0aGF0IHRoZSBuYW1lIGlzIDEwMCUgaW5mb3JtYXRpb25hbCAtLSB0aGVyZSdzIG5vIHJlcXVpcmVtZW50IHRoYXQKICAgICAgICBpdCBtZWFuIGFueXRoaW5nIGluIHBhcnRpY3VsYXIuIEZvciBleGFtcGxlLCAiR01UIiwgIlVUQyIsICItNTAwIiwKICAgICAgICAiLTU6MDAiLCAiRURUIiwgIlVTL0Vhc3Rlcm4iLCAiQW1lcmljYS9OZXcgWW9yayIgYXJlIGFsbCB2YWxpZCByZXBsaWVzLgogICAgICAgICIiIgogICAgICAgIG5hbWUgPSBfY2FsbF90emluZm9fbWV0aG9kKHNlbGYuX3R6aW5mbywgInR6bmFtZSIsIHNlbGYpCiAgICAgICAgX2NoZWNrX3R6bmFtZShuYW1lKQogICAgICAgIHJldHVybiBuYW1lCgogICAgZGVmIGRzdChzZWxmKToKICAgICAgICAiIiJSZXR1cm4gMCBpZiBEU1QgaXMgbm90IGluIGVmZmVjdCwgb3IgdGhlIERTVCBvZmZzZXQgKGluIG1pbnV0ZXMKICAgICAgICBlYXN0d2FyZCkgaWYgRFNUIGlzIGluIGVmZmVjdC4KCiAgICAgICAgVGhpcyBpcyBwdXJlbHkgaW5mb3JtYXRpb25hbDsgdGhlIERTVCBvZmZzZXQgaGFzIGFscmVhZHkgYmVlbiBhZGRlZCB0bwogICAgICAgIHRoZSBVVEMgb2Zmc2V0IHJldHVybmVkIGJ5IHV0Y29mZnNldCgpIGlmIGFwcGxpY2FibGUsIHNvIHRoZXJlJ3Mgbm8KICAgICAgICBuZWVkIHRvIGNvbnN1bHQgZHN0KCkgdW5sZXNzIHlvdSdyZSBpbnRlcmVzdGVkIGluIGRpc3BsYXlpbmcgdGhlIERTVAogICAgICAgIGluZm8uCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VsZi5fdHppbmZvIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgb2Zmc2V0ID0gc2VsZi5fdHppbmZvLmRzdChzZWxmKQogICAgICAgIF9jaGVja191dGNfb2Zmc2V0KCJkc3QiLCBvZmZzZXQpCiAgICAgICAgcmV0dXJuIG9mZnNldAoKICAgICMgQ29tcGFyaXNvbnMgb2YgZGF0ZXRpbWUgb2JqZWN0cyB3aXRoIG90aGVyLgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPT0gMAogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpICE9IDAKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDw9IDAKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPCAwCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgZGF0ZSk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID49IDAKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPiAwCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgZGF0ZSk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX2NtcChzZWxmLCBvdGhlcik6CiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKQogICAgICAgIG15dHogPSBzZWxmLl90emluZm8KICAgICAgICBvdHR6ID0gb3RoZXIuX3R6aW5mbwogICAgICAgIG15b2ZmID0gb3RvZmYgPSBOb25lCgogICAgICAgIGlmIG15dHogaXMgb3R0ejoKICAgICAgICAgICAgYmFzZV9jb21wYXJlID0gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIG15dHogaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBteW9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICAgICAgaWYgb3R0eiBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIG90b2ZmID0gb3RoZXIudXRjb2Zmc2V0KCkKICAgICAgICAgICAgYmFzZV9jb21wYXJlID0gbXlvZmYgPT0gb3RvZmYKCiAgICAgICAgaWYgYmFzZV9jb21wYXJlOgogICAgICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICAgICAjcmV0dXJuIF9jbXAoKHNlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXksCiAgICAgICAgICAgICMgICAgICAgICAgICAgc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICMgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpLAogICAgICAgICAgICAjICAgICAgICAgICAob3RoZXIuX3llYXIsIG90aGVyLl9tb250aCwgb3RoZXIuX2RheSwKICAgICAgICAgICAgIyAgICAgICAgICAgIG90aGVyLl9ob3VyLCBvdGhlci5fbWludXRlLCBvdGhlci5fc2Vjb25kLAogICAgICAgICAgICAjICAgICAgICAgICAgb3RoZXIuX21pY3Jvc2Vjb25kKSkKICAgICAgICAgICAgcmV0dXJuIF90dXBsZV9jbXAoKHNlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXksCiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9ob3VyLCBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwKICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX21pY3Jvc2Vjb25kKSwKICAgICAgICAgICAgICAgICAgICAgICAob3RoZXIuX3llYXIsIG90aGVyLl9tb250aCwgb3RoZXIuX2RheSwKICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXIuX2hvdXIsIG90aGVyLl9taW51dGUsIG90aGVyLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyLl9taWNyb3NlY29uZCkpCiAgICAgICAgaWYgbXlvZmYgaXMgTm9uZSBvciBvdG9mZiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhbm5vdCBjb21wYXJlIG5haXZlIGFuZCBhd2FyZSBkYXRldGltZXMiKQogICAgICAgICMgWFhYIFdoYXQgZm9sbG93cyBjb3VsZCBiZSBkb25lIG1vcmUgZWZmaWNpZW50bHkuLi4KICAgICAgICBkaWZmID0gc2VsZiAtIG90aGVyICAgICAjIHRoaXMgd2lsbCB0YWtlIG9mZnNldHMgaW50byBhY2NvdW50CiAgICAgICAgaWYgZGlmZi5kYXlzIDwgMDoKICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgcmV0dXJuIGRpZmYgYW5kIDEgb3IgMAoKICAgIGRlZiBfX2FkZF9fKHNlbGYsIG90aGVyKToKICAgICAgICAiQWRkIGEgZGF0ZXRpbWUgYW5kIGEgdGltZWRlbHRhLiIKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZGVsdGEgPSB0aW1lZGVsdGEoc2VsZi50b29yZGluYWwoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBob3Vycz1zZWxmLl9ob3VyLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXM9c2VsZi5fbWludXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM9c2VsZi5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kcz1zZWxmLl9taWNyb3NlY29uZCkKICAgICAgICBkZWx0YSArPSBvdGhlcgogICAgICAgIGhvdXIsIHJlbSA9IGRpdm1vZChkZWx0YS5zZWNvbmRzLCAzNjAwKQogICAgICAgIG1pbnV0ZSwgc2Vjb25kID0gZGl2bW9kKHJlbSwgNjApCiAgICAgICAgaWYgMCA8IGRlbHRhLmRheXMgPD0gX01BWE9SRElOQUw6CiAgICAgICAgICAgIHJldHVybiBkYXRldGltZS5jb21iaW5lKGRhdGUuZnJvbW9yZGluYWwoZGVsdGEuZGF5cyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUoaG91ciwgbWludXRlLCBzZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGEubWljcm9zZWNvbmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR6aW5mbz1zZWxmLl90emluZm8pKQogICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoInJlc3VsdCBvdXQgb2YgcmFuZ2UiKQoKICAgIF9fcmFkZF9fID0gX19hZGRfXwoKICAgIGRlZiBfX3N1Yl9fKHNlbGYsIG90aGVyKToKICAgICAgICAiU3VidHJhY3QgdHdvIGRhdGV0aW1lcywgb3IgYSBkYXRldGltZSBhbmQgYSB0aW1lZGVsdGEuIgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZiArIC1vdGhlcgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICAgICAgZGF5czEgPSBzZWxmLnRvb3JkaW5hbCgpCiAgICAgICAgZGF5czIgPSBvdGhlci50b29yZGluYWwoKQogICAgICAgIHNlY3MxID0gc2VsZi5fc2Vjb25kICsgc2VsZi5fbWludXRlICogNjAgKyBzZWxmLl9ob3VyICogMzYwMAogICAgICAgIHNlY3MyID0gb3RoZXIuX3NlY29uZCArIG90aGVyLl9taW51dGUgKiA2MCArIG90aGVyLl9ob3VyICogMzYwMAogICAgICAgIGJhc2UgPSB0aW1lZGVsdGEoZGF5czEgLSBkYXlzMiwKICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3MxIC0gc2VjczIsCiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZCAtIG90aGVyLl9taWNyb3NlY29uZCkKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgb3RoZXIuX3R6aW5mbzoKICAgICAgICAgICAgcmV0dXJuIGJhc2UKICAgICAgICBteW9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBvdG9mZiA9IG90aGVyLnV0Y29mZnNldCgpCiAgICAgICAgaWYgbXlvZmYgPT0gb3RvZmY6CiAgICAgICAgICAgIHJldHVybiBiYXNlCiAgICAgICAgaWYgbXlvZmYgaXMgTm9uZSBvciBvdG9mZiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhbm5vdCBtaXggbmFpdmUgYW5kIHRpbWV6b25lLWF3YXJlIHRpbWUiKQogICAgICAgIHJldHVybiBiYXNlICsgb3RvZmYgLSBteW9mZgoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICB0em9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBpZiB0em9mZiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gaGFzaChzZWxmLl9nZXRzdGF0ZSgpWzBdKQogICAgICAgIGRheXMgPSBfeW1kMm9yZChzZWxmLnllYXIsIHNlbGYubW9udGgsIHNlbGYuZGF5KQogICAgICAgIHNlY29uZHMgPSBzZWxmLmhvdXIgKiAzNjAwICsgc2VsZi5taW51dGUgKiA2MCArIHNlbGYuc2Vjb25kCiAgICAgICAgcmV0dXJuIGhhc2godGltZWRlbHRhKGRheXMsIHNlY29uZHMsIHNlbGYubWljcm9zZWNvbmQpIC0gdHpvZmYpCgogICAgIyBQaWNrbGUgc3VwcG9ydC4KCiAgICBkZWYgX2dldHN0YXRlKHNlbGYpOgogICAgICAgIHloaSwgeWxvID0gZGl2bW9kKHNlbGYuX3llYXIsIDI1NikKICAgICAgICB1czIsIHVzMyA9IGRpdm1vZChzZWxmLl9taWNyb3NlY29uZCwgMjU2KQogICAgICAgIHVzMSwgdXMyID0gZGl2bW9kKHVzMiwgMjU2KQogICAgICAgIGJhc2VzdGF0ZSA9IGJ5dGVzKFt5aGksIHlsbywgc2VsZi5fbW9udGgsIHNlbGYuX2RheSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzMSwgdXMyLCB1czNdKQogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKGJhc2VzdGF0ZSwpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIChiYXNlc3RhdGUsIHNlbGYuX3R6aW5mbykKCiAgICBkZWYgX19zZXRzdGF0ZShzZWxmLCBzdHJpbmcsIHR6aW5mbyk6CiAgICAgICAgKHloaSwgeWxvLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5LCBzZWxmLl9ob3VyLAogICAgICAgICBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwgdXMxLCB1czIsIHVzMykgPSBzdHJpbmcKICAgICAgICBzZWxmLl95ZWFyID0geWhpICogMjU2ICsgeWxvCiAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQgPSAoKCh1czEgPDwgOCkgfCB1czIpIDw8IDgpIHwgdXMzCiAgICAgICAgaWYgdHppbmZvIGlzIE5vbmUgb3IgaXNpbnN0YW5jZSh0emluZm8sIF90emluZm9fY2xhc3MpOgogICAgICAgICAgICBzZWxmLl90emluZm8gPSB0emluZm8KICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImJhZCB0emluZm8gc3RhdGUgYXJnICVyIiAlIHR6aW5mbykKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCBzZWxmLl9nZXRzdGF0ZSgpKQoKI2ZpeG1lIGJyeXRob24KI2RhdGV0aW1lLm1pbiA9IGRhdGV0aW1lKDEsIDEsIDEpCiNkYXRldGltZS5tYXggPSBkYXRldGltZSg5OTk5LCAxMiwgMzEsIDIzLCA1OSwgNTksIDk5OTk5OSkKI2RhdGV0aW1lLnJlc29sdXRpb24gPSB0aW1lZGVsdGEobWljcm9zZWNvbmRzPTEpCgoKZGVmIF9pc293ZWVrMW1vbmRheSh5ZWFyKToKICAgICMgSGVscGVyIHRvIGNhbGN1bGF0ZSB0aGUgZGF5IG51bWJlciBvZiB0aGUgTW9uZGF5IHN0YXJ0aW5nIHdlZWsgMQogICAgIyBYWFggVGhpcyBjb3VsZCBiZSBkb25lIG1vcmUgZWZmaWNpZW50bHkKICAgIFRIVVJTREFZID0gMwogICAgZmlyc3RkYXkgPSBfeW1kMm9yZCh5ZWFyLCAxLCAxKQogICAgZmlyc3R3ZWVrZGF5ID0gKGZpcnN0ZGF5ICsgNikgJSA3ICMgU2VlIHdlZWtkYXkoKSBhYm92ZQogICAgd2VlazFtb25kYXkgPSBmaXJzdGRheSAtIGZpcnN0d2Vla2RheQogICAgaWYgZmlyc3R3ZWVrZGF5ID4gVEhVUlNEQVk6CiAgICAgICAgd2VlazFtb25kYXkgKz0gNwogICAgcmV0dXJuIHdlZWsxbW9uZGF5CgpjbGFzcyB0aW1lem9uZSh0emluZm8pOgogICAgX19zbG90c19fID0gJ19vZmZzZXQnLCAnX25hbWUnCgogICAgIyBTZW50aW5lbCB2YWx1ZSB0byBkaXNhbGxvdyBOb25lCiAgICBfT21pdHRlZCA9IG9iamVjdCgpCiAgICAjZml4bWUgYnJ5dGhvbgogICAgI2RlZiBfX25ld19fKGNscywgb2Zmc2V0LCBuYW1lPV9PbWl0dGVkKToKICAgIGRlZiBfX25ld19fKGNscywgb2Zmc2V0LCBuYW1lPU5vbmUpOgogICAgICAgIGlmIG5hbWUgaXMgTm9uZToKICAgICAgICAgICBuYW1lPV9PbWl0dGVkCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob2Zmc2V0LCB0aW1lZGVsdGEpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm9mZnNldCBtdXN0IGJlIGEgdGltZWRlbHRhIikKICAgICAgICBpZiBuYW1lIGlzIGNscy5fT21pdHRlZDoKICAgICAgICAgICAgaWYgbm90IG9mZnNldDoKICAgICAgICAgICAgICAgIHJldHVybiBjbHMudXRjCiAgICAgICAgICAgIG5hbWUgPSBOb25lCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShuYW1lLCBzdHIpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm5hbWUgbXVzdCBiZSBhIHN0cmluZyIpCiAgICAgICAgaWYgbm90IGNscy5fbWlub2Zmc2V0IDw9IG9mZnNldCA8PSBjbHMuX21heG9mZnNldDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigib2Zmc2V0IG11c3QgYmUgYSB0aW1lZGVsdGEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBzdHJpY3RseSBiZXR3ZWVuIC10aW1lZGVsdGEoaG91cnM9MjQpIGFuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIHRpbWVkZWx0YShob3Vycz0yNCkuIikKICAgICAgICBpZiAob2Zmc2V0Lm1pY3Jvc2Vjb25kcyAhPSAwIG9yCiAgICAgICAgICAgIG9mZnNldC5zZWNvbmRzICUgNjAgIT0gMCk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm9mZnNldCBtdXN0IGJlIGEgdGltZWRlbHRhIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgcmVwcmVzZW50aW5nIGEgd2hvbGUgbnVtYmVyIG9mIG1pbnV0ZXMiKQogICAgICAgIHJldHVybiBjbHMuX2NyZWF0ZShvZmZzZXQsIG5hbWUpCgogICAgI0BjbGFzc21ldGhvZAogICAgZGVmIF9jcmVhdGUoY2xzLCBvZmZzZXQsIG5hbWU9Tm9uZSk6CiAgICAgICAgc2VsZiA9IHR6aW5mby5fX25ld19fKGNscykKICAgICAgICBzZWxmLl9vZmZzZXQgPSBvZmZzZXQKICAgICAgICBzZWxmLl9uYW1lID0gbmFtZQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZ2V0aW5pdGFyZ3NfXyhzZWxmKToKICAgICAgICAiIiJwaWNrbGUgc3VwcG9ydCIiIgogICAgICAgIGlmIHNlbGYuX25hbWUgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIChzZWxmLl9vZmZzZXQsKQogICAgICAgIHJldHVybiAoc2VsZi5fb2Zmc2V0LCBzZWxmLl9uYW1lKQoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIHR5cGUob3RoZXIpICE9IHRpbWV6b25lOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gc2VsZi5fb2Zmc2V0ID09IG90aGVyLl9vZmZzZXQKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fb2Zmc2V0KQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICAiIiJDb252ZXJ0IHRvIGZvcm1hbCBzdHJpbmcsIGZvciByZXByKCkuCgogICAgICAgID4+PiB0eiA9IHRpbWV6b25lLnV0YwogICAgICAgID4+PiByZXByKHR6KQogICAgICAgICdkYXRldGltZS50aW1lem9uZS51dGMnCiAgICAgICAgPj4+IHR6ID0gdGltZXpvbmUodGltZWRlbHRhKGhvdXJzPS01KSwgJ0VTVCcpCiAgICAgICAgPj4+IHJlcHIodHopCiAgICAgICAgImRhdGV0aW1lLnRpbWV6b25lKGRhdGV0aW1lLnRpbWVkZWx0YSgtMSwgNjg0MDApLCAnRVNUJykiCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VsZiBpcyBzZWxmLnV0YzoKICAgICAgICAgICAgcmV0dXJuICdkYXRldGltZS50aW1lem9uZS51dGMnCiAgICAgICAgaWYgc2VsZi5fbmFtZSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gIiVzKCVyKSIgJSAoJ2RhdGV0aW1lLicgKyBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX29mZnNldCkKICAgICAgICByZXR1cm4gIiVzKCVyLCAlcikiICUgKCdkYXRldGltZS4nICsgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9vZmZzZXQsIHNlbGYuX25hbWUpCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYudHpuYW1lKE5vbmUpCgogICAgZGVmIHV0Y29mZnNldChzZWxmLCBkdCk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShkdCwgZGF0ZXRpbWUpIG9yIGR0IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9vZmZzZXQKICAgICAgICByYWlzZSBUeXBlRXJyb3IoInV0Y29mZnNldCgpIGFyZ3VtZW50IG11c3QgYmUgYSBkYXRldGltZSBpbnN0YW5jZSIKICAgICAgICAgICAgICAgICAgICAgICAgIiBvciBOb25lIikKCiAgICBkZWYgdHpuYW1lKHNlbGYsIGR0KToKICAgICAgICBpZiBpc2luc3RhbmNlKGR0LCBkYXRldGltZSkgb3IgZHQgaXMgTm9uZToKICAgICAgICAgICAgaWYgc2VsZi5fbmFtZSBpcyBOb25lOgogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX25hbWVfZnJvbV9vZmZzZXQoc2VsZi5fb2Zmc2V0KQogICAgICAgICAgICByZXR1cm4gc2VsZi5fbmFtZQogICAgICAgIHJhaXNlIFR5cGVFcnJvcigidHpuYW1lKCkgYXJndW1lbnQgbXVzdCBiZSBhIGRhdGV0aW1lIGluc3RhbmNlIgogICAgICAgICAgICAgICAgICAgICAgICAiIG9yIE5vbmUiKQoKICAgIGRlZiBkc3Qoc2VsZiwgZHQpOgogICAgICAgIGlmIGlzaW5zdGFuY2UoZHQsIGRhdGV0aW1lKSBvciBkdCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZHN0KCkgYXJndW1lbnQgbXVzdCBiZSBhIGRhdGV0aW1lIGluc3RhbmNlIgogICAgICAgICAgICAgICAgICAgICAgICAiIG9yIE5vbmUiKQoKICAgIGRlZiBmcm9tdXRjKHNlbGYsIGR0KToKICAgICAgICBpZiBpc2luc3RhbmNlKGR0LCBkYXRldGltZSk6CiAgICAgICAgICAgIGlmIGR0LnR6aW5mbyBpcyBub3Qgc2VsZjoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImZyb211dGM6IGR0LnR6aW5mbyAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJpcyBub3Qgc2VsZiIpCiAgICAgICAgICAgIHJldHVybiBkdCArIHNlbGYuX29mZnNldAogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZnJvbXV0YygpIGFyZ3VtZW50IG11c3QgYmUgYSBkYXRldGltZSBpbnN0YW5jZSIKICAgICAgICAgICAgICAgICAgICAgICAgIiBvciBOb25lIikKCiAgICAjX21heG9mZnNldCA9IHRpbWVkZWx0YShob3Vycz0yMywgbWludXRlcz01OSkKICAgICNfbWlub2Zmc2V0ID0gLV9tYXhvZmZzZXQKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgX25hbWVfZnJvbV9vZmZzZXQoZGVsdGEpOgogICAgICAgIGlmIGRlbHRhIDwgdGltZWRlbHRhKDApOgogICAgICAgICAgICBzaWduID0gJy0nCiAgICAgICAgICAgIGRlbHRhID0gLWRlbHRhCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2lnbiA9ICcrJwogICAgICAgIGhvdXJzLCByZXN0ID0gZGl2bW9kKGRlbHRhLCB0aW1lZGVsdGEoaG91cnM9MSkpCiAgICAgICAgbWludXRlcyA9IHJlc3QgLy8gdGltZWRlbHRhKG1pbnV0ZXM9MSkKICAgICAgICByZXR1cm4gJ1VUQ3t9ezowMmR9Ons6MDJkfScuZm9ybWF0KHNpZ24sIGhvdXJzLCBtaW51dGVzKQoKI2ZpeG1lIGJyeXRob24KI3RpbWV6b25lLnV0YyA9IHRpbWV6b25lLl9jcmVhdGUodGltZWRlbHRhKDApKQojdGltZXpvbmUubWluID0gdGltZXpvbmUuX2NyZWF0ZSh0aW1lem9uZS5fbWlub2Zmc2V0KQojdGltZXpvbmUubWF4ID0gdGltZXpvbmUuX2NyZWF0ZSh0aW1lem9uZS5fbWF4b2Zmc2V0KQoK',
'/Lib/colorsys.py':'IiIiQ29udmVyc2lvbiBmdW5jdGlvbnMgYmV0d2VlbiBSR0IgYW5kIG90aGVyIGNvbG9yIHN5c3RlbXMuCgpUaGlzIG1vZHVsZXMgcHJvdmlkZXMgdHdvIGZ1bmN0aW9ucyBmb3IgZWFjaCBjb2xvciBzeXN0ZW0gQUJDOgoKICByZ2JfdG9fYWJjKHIsIGcsIGIpIC0tPiBhLCBiLCBjCiAgYWJjX3RvX3JnYihhLCBiLCBjKSAtLT4gciwgZywgYgoKQWxsIGlucHV0cyBhbmQgb3V0cHV0cyBhcmUgdHJpcGxlcyBvZiBmbG9hdHMgaW4gdGhlIHJhbmdlIFswLjAuLi4xLjBdCih3aXRoIHRoZSBleGNlcHRpb24gb2YgSSBhbmQgUSwgd2hpY2ggY292ZXJzIGEgc2xpZ2h0bHkgbGFyZ2VyIHJhbmdlKS4KSW5wdXRzIG91dHNpZGUgdGhlIHZhbGlkIHJhbmdlIG1heSBjYXVzZSBleGNlcHRpb25zIG9yIGludmFsaWQgb3V0cHV0cy4KClN1cHBvcnRlZCBjb2xvciBzeXN0ZW1zOgpSR0I6IFJlZCwgR3JlZW4sIEJsdWUgY29tcG9uZW50cwpZSVE6IEx1bWluYW5jZSwgQ2hyb21pbmFuY2UgKHVzZWQgYnkgY29tcG9zaXRlIHZpZGVvIHNpZ25hbHMpCkhMUzogSHVlLCBMdW1pbmFuY2UsIFNhdHVyYXRpb24KSFNWOiBIdWUsIFNhdHVyYXRpb24sIFZhbHVlCiIiIgoKIyBSZWZlcmVuY2VzOgojIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvWUlRCiMgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9ITFNfY29sb3Jfc3BhY2UKIyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hTVl9jb2xvcl9zcGFjZQoKX19hbGxfXyA9IFsicmdiX3RvX3lpcSIsInlpcV90b19yZ2IiLCJyZ2JfdG9faGxzIiwiaGxzX3RvX3JnYiIsCiAgICAgICAgICAgInJnYl90b19oc3YiLCJoc3ZfdG9fcmdiIl0KCiMgU29tZSBmbG9hdGluZyBwb2ludCBjb25zdGFudHMKCk9ORV9USElSRCA9IDEuMC8zLjAKT05FX1NJWFRIID0gMS4wLzYuMApUV09fVEhJUkQgPSAyLjAvMy4wCgojIFlJUTogdXNlZCBieSBjb21wb3NpdGUgdmlkZW8gc2lnbmFscyAobGluZWFyIGNvbWJpbmF0aW9ucyBvZiBSR0IpCiMgWTogcGVyY2VpdmVkIGdyZXkgbGV2ZWwgKDAuMCA9PSBibGFjaywgMS4wID09IHdoaXRlKQojIEksIFE6IGNvbG9yIGNvbXBvbmVudHMKCmRlZiByZ2JfdG9feWlxKHIsIGcsIGIpOgogICAgeSA9IDAuMzAqciArIDAuNTkqZyArIDAuMTEqYgogICAgaSA9IDAuNjAqciAtIDAuMjgqZyAtIDAuMzIqYgogICAgcSA9IDAuMjEqciAtIDAuNTIqZyArIDAuMzEqYgogICAgcmV0dXJuICh5LCBpLCBxKQoKZGVmIHlpcV90b19yZ2IoeSwgaSwgcSk6CiAgICByID0geSArIDAuOTQ4MjYyKmkgKyAwLjYyNDAxMypxCiAgICBnID0geSAtIDAuMjc2MDY2KmkgLSAwLjYzOTgxMCpxCiAgICBiID0geSAtIDEuMTA1NDUwKmkgKyAxLjcyOTg2MCpxCiAgICBpZiByIDwgMC4wOgogICAgICAgIHIgPSAwLjAKICAgIGlmIGcgPCAwLjA6CiAgICAgICAgZyA9IDAuMAogICAgaWYgYiA8IDAuMDoKICAgICAgICBiID0gMC4wCiAgICBpZiByID4gMS4wOgogICAgICAgIHIgPSAxLjAKICAgIGlmIGcgPiAxLjA6CiAgICAgICAgZyA9IDEuMAogICAgaWYgYiA+IDEuMDoKICAgICAgICBiID0gMS4wCiAgICByZXR1cm4gKHIsIGcsIGIpCgoKIyBITFM6IEh1ZSwgTHVtaW5hbmNlLCBTYXR1cmF0aW9uCiMgSDogcG9zaXRpb24gaW4gdGhlIHNwZWN0cnVtCiMgTDogY29sb3IgbGlnaHRuZXNzCiMgUzogY29sb3Igc2F0dXJhdGlvbgoKZGVmIHJnYl90b19obHMociwgZywgYik6CiAgICBtYXhjID0gbWF4KHIsIGcsIGIpCiAgICBtaW5jID0gbWluKHIsIGcsIGIpCiAgICAjIFhYWCBDYW4gb3B0aW1pemUgKG1heGMrbWluYykgYW5kIChtYXhjLW1pbmMpCiAgICBsID0gKG1pbmMrbWF4YykvMi4wCiAgICBpZiBtaW5jID09IG1heGM6CiAgICAgICAgcmV0dXJuIDAuMCwgbCwgMC4wCiAgICBpZiBsIDw9IDAuNToKICAgICAgICBzID0gKG1heGMtbWluYykgLyAobWF4YyttaW5jKQogICAgZWxzZToKICAgICAgICBzID0gKG1heGMtbWluYykgLyAoMi4wLW1heGMtbWluYykKICAgIHJjID0gKG1heGMtcikgLyAobWF4Yy1taW5jKQogICAgZ2MgPSAobWF4Yy1nKSAvIChtYXhjLW1pbmMpCiAgICBiYyA9IChtYXhjLWIpIC8gKG1heGMtbWluYykKICAgIGlmIHIgPT0gbWF4YzoKICAgICAgICBoID0gYmMtZ2MKICAgIGVsaWYgZyA9PSBtYXhjOgogICAgICAgIGggPSAyLjArcmMtYmMKICAgIGVsc2U6CiAgICAgICAgaCA9IDQuMCtnYy1yYwogICAgaCA9IChoLzYuMCkgJSAxLjAKICAgIHJldHVybiBoLCBsLCBzCgpkZWYgaGxzX3RvX3JnYihoLCBsLCBzKToKICAgIGlmIHMgPT0gMC4wOgogICAgICAgIHJldHVybiBsLCBsLCBsCiAgICBpZiBsIDw9IDAuNToKICAgICAgICBtMiA9IGwgKiAoMS4wK3MpCiAgICBlbHNlOgogICAgICAgIG0yID0gbCtzLShsKnMpCiAgICBtMSA9IDIuMCpsIC0gbTIKICAgIHJldHVybiAoX3YobTEsIG0yLCBoK09ORV9USElSRCksIF92KG0xLCBtMiwgaCksIF92KG0xLCBtMiwgaC1PTkVfVEhJUkQpKQoKZGVmIF92KG0xLCBtMiwgaHVlKToKICAgIGh1ZSA9IGh1ZSAlIDEuMAogICAgaWYgaHVlIDwgT05FX1NJWFRIOgogICAgICAgIHJldHVybiBtMSArIChtMi1tMSkqaHVlKjYuMAogICAgaWYgaHVlIDwgMC41OgogICAgICAgIHJldHVybiBtMgogICAgaWYgaHVlIDwgVFdPX1RISVJEOgogICAgICAgIHJldHVybiBtMSArIChtMi1tMSkqKFRXT19USElSRC1odWUpKjYuMAogICAgcmV0dXJuIG0xCgoKIyBIU1Y6IEh1ZSwgU2F0dXJhdGlvbiwgVmFsdWUKIyBIOiBwb3NpdGlvbiBpbiB0aGUgc3BlY3RydW0KIyBTOiBjb2xvciBzYXR1cmF0aW9uICgicHVyaXR5IikKIyBWOiBjb2xvciBicmlnaHRuZXNzCgpkZWYgcmdiX3RvX2hzdihyLCBnLCBiKToKICAgIG1heGMgPSBtYXgociwgZywgYikKICAgIG1pbmMgPSBtaW4ociwgZywgYikKICAgIHYgPSBtYXhjCiAgICBpZiBtaW5jID09IG1heGM6CiAgICAgICAgcmV0dXJuIDAuMCwgMC4wLCB2CiAgICBzID0gKG1heGMtbWluYykgLyBtYXhjCiAgICByYyA9IChtYXhjLXIpIC8gKG1heGMtbWluYykKICAgIGdjID0gKG1heGMtZykgLyAobWF4Yy1taW5jKQogICAgYmMgPSAobWF4Yy1iKSAvIChtYXhjLW1pbmMpCiAgICBpZiByID09IG1heGM6CiAgICAgICAgaCA9IGJjLWdjCiAgICBlbGlmIGcgPT0gbWF4YzoKICAgICAgICBoID0gMi4wK3JjLWJjCiAgICBlbHNlOgogICAgICAgIGggPSA0LjArZ2MtcmMKICAgIGggPSAoaC82LjApICUgMS4wCiAgICByZXR1cm4gaCwgcywgdgoKZGVmIGhzdl90b19yZ2IoaCwgcywgdik6CiAgICBpZiBzID09IDAuMDoKICAgICAgICByZXR1cm4gdiwgdiwgdgogICAgaSA9IGludChoKjYuMCkgIyBYWFggYXNzdW1lIGludCgpIHRydW5jYXRlcyEKICAgIGYgPSAoaCo2LjApIC0gaQogICAgcCA9IHYqKDEuMCAtIHMpCiAgICBxID0gdiooMS4wIC0gcypmKQogICAgdCA9IHYqKDEuMCAtIHMqKDEuMC1mKSkKICAgIGkgPSBpJTYKICAgIGlmIGkgPT0gMDoKICAgICAgICByZXR1cm4gdiwgdCwgcAogICAgaWYgaSA9PSAxOgogICAgICAgIHJldHVybiBxLCB2LCBwCiAgICBpZiBpID09IDI6CiAgICAgICAgcmV0dXJuIHAsIHYsIHQKICAgIGlmIGkgPT0gMzoKICAgICAgICByZXR1cm4gcCwgcSwgdgogICAgaWYgaSA9PSA0OgogICAgICAgIHJldHVybiB0LCBwLCB2CiAgICBpZiBpID09IDU6CiAgICAgICAgcmV0dXJuIHYsIHAsIHEKICAgICMgQ2Fubm90IGdldCBoZXJlCg==',
'/Lib/traceback.py':'aW1wb3J0IHN5cwpkZWYgcHJpbnRfZXhjKGZpbGU9c3lzLnN0ZGVycik6CiAgICBleGMgPSBfX0JSWVRIT05fXy5leGNlcHRpb25fc3RhY2tbLTFdCiAgICBmaWxlLndyaXRlKGV4Yy5pbmZvKQogICAgZmlsZS53cml0ZSgnXG4nK2V4Yy5fX25hbWVfXykKICAgIGlmIGV4Yy5tZXNzYWdlOgogICAgICAgIGZpbGUud3JpdGUoJzogJytleGMubWVzc2FnZSkKICAgIGZpbGUud3JpdGUoJ1xuJykKCmRlZiBmb3JtYXRfZXhjKGxpbWl0PU5vbmUsY2hhaW49VHJ1ZSk6CiAgICBleGMgPSBfX0JSWVRIT05fXy5leGNlcHRpb25fc3RhY2tbLTFdCiAgICByZXMgPSBleGMuaW5mbysnXG4nK2V4Yy5fX25hbWVfXwogICAgaWYgZXhjLm1lc3NhZ2U6CiAgICAgICAgcmVzICs9ICc6ICcrZXhjLm1lc3NhZ2UKICAgIHJldHVybiByZXMrJ1xuJwoKZGVmIGZvcm1hdF9leGNlcHRpb24oX3R5cGUsIHZhbHVlLCB0YiwgbGltaXQ9Tm9uZSwgY2hhaW49VHJ1ZSk6CiAgICByZXR1cm4gWyclc1xuJyAlX3R5cGUsJyVzXG4nICV2YWx1ZV0gICAgCg==',
'/Lib/_random.py':'aW1wb3J0IF9vcwpmcm9tIG9zIGltcG9ydCB1cmFuZG9tIGFzIF91cmFuZG9tCmNsYXNzIFJhbmRvbToKICAgICIiIlJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIGJhc2UgY2xhc3MgdXNlZCBieSBib3VuZCBtb2R1bGUgZnVuY3Rpb25zLgoKICAgIFVzZWQgdG8gaW5zdGFudGlhdGUgaW5zdGFuY2VzIG9mIFJhbmRvbSB0byBnZXQgZ2VuZXJhdG9ycyB0aGF0IGRvbid0CiAgICBzaGFyZSBzdGF0ZS4KCiAgICBDbGFzcyBSYW5kb20gY2FuIGFsc28gYmUgc3ViY2xhc3NlZCBpZiB5b3Ugd2FudCB0byB1c2UgYSBkaWZmZXJlbnQgYmFzaWMKICAgIGdlbmVyYXRvciBvZiB5b3VyIG93biBkZXZpc2luZzogaW4gdGhhdCBjYXNlLCBvdmVycmlkZSB0aGUgZm9sbG93aW5nCiAgICBtZXRob2RzOiAgcmFuZG9tKCksIHNlZWQoKSwgZ2V0c3RhdGUoKSwgYW5kIHNldHN0YXRlKCkuCiAgICBPcHRpb25hbGx5LCBpbXBsZW1lbnQgYSBnZXRyYW5kYml0cygpIG1ldGhvZCBzbyB0aGF0IHJhbmRyYW5nZSgpCiAgICBjYW4gY292ZXIgYXJiaXRyYXJpbHkgbGFyZ2UgcmFuZ2VzLgoKICAgICIiIgogICAgI3JhbmRvbQogICAgI3NlZWQKICAgICNnZXRzdGF0ZQogICAgI3NldHN0YXRlCgoKICAgIFZFUlNJT04gPSAzICAgICAjIHVzZWQgYnkgZ2V0c3RhdGUvc2V0c3RhdGUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgeD1Ob25lKToKICAgICAgICAiIiJJbml0aWFsaXplIGFuIGluc3RhbmNlLgoKICAgICAgICBPcHRpb25hbCBhcmd1bWVudCB4IGNvbnRyb2xzIHNlZWRpbmcsIGFzIGZvciBSYW5kb20uc2VlZCgpLgogICAgICAgICIiIgoKICAgICAgICBzZWxmLl9zdGF0ZT14CgogICAgZGVmIHNlZWQoc2VsZiwgYT1Ob25lLCB2ZXJzaW9uPTIpOgogICAgICAgICIiIkluaXRpYWxpemUgaW50ZXJuYWwgc3RhdGUgZnJvbSBoYXNoYWJsZSBvYmplY3QuCgogICAgICAgIE5vbmUgb3Igbm8gYXJndW1lbnQgc2VlZHMgZnJvbSBjdXJyZW50IHRpbWUgb3IgZnJvbSBhbiBvcGVyYXRpbmcKICAgICAgICBzeXN0ZW0gc3BlY2lmaWMgcmFuZG9tbmVzcyBzb3VyY2UgaWYgYXZhaWxhYmxlLgoKICAgICAgICBGb3IgdmVyc2lvbiAyICh0aGUgZGVmYXVsdCksIGFsbCBvZiB0aGUgYml0cyBhcmUgdXNlZCBpZiAqYSogaXMgYSBzdHIsCiAgICAgICAgYnl0ZXMsIG9yIGJ5dGVhcnJheS4gIEZvciB2ZXJzaW9uIDEsIHRoZSBoYXNoKCkgb2YgKmEqIGlzIHVzZWQgaW5zdGVhZC4KCiAgICAgICAgSWYgKmEqIGlzIGFuIGludCwgYWxsIGJpdHMgYXJlIHVzZWQuCgogICAgICAgICIiIgoKICAgICAgICBzZWxmLl9zdGF0ZT1hCiAgICAgICAgc2VsZi5nYXVzc19uZXh0ID0gTm9uZQoKICAgIGRlZiBnZXRzdGF0ZShzZWxmKToKICAgICAgICAiIiJSZXR1cm4gaW50ZXJuYWwgc3RhdGU7IGNhbiBiZSBwYXNzZWQgdG8gc2V0c3RhdGUoKSBsYXRlci4iIiIKICAgICAgICByZXR1cm4gc2VsZi5fc3RhdGUKCiAgICBkZWYgc2V0c3RhdGUoc2VsZiwgc3RhdGUpOgogICAgICAgICIiIlJlc3RvcmUgaW50ZXJuYWwgc3RhdGUgZnJvbSBvYmplY3QgcmV0dXJuZWQgYnkgZ2V0c3RhdGUoKS4iIiIKICAgICAgICBzZWxmLl9zdGF0ZT1zdGF0ZQoKICAgIGRlZiByYW5kb20oc2VsZik6CiAgICAgICAgIiIiR2V0IHRoZSBuZXh0IHJhbmRvbSBudW1iZXIgaW4gdGhlIHJhbmdlIFswLjAsIDEuMCkuIiIiCiAgICAgICAgcmV0dXJuIF9vcy5yYW5kb20oKQoKICAgIGRlZiBnZXRyYW5kYml0cyhzZWxmLCBrKToKICAgICAgICAiIiJnZXRyYW5kYml0cyhrKSAtPiB4LiAgR2VuZXJhdGVzIGEgbG9uZyBpbnQgd2l0aCBrIHJhbmRvbSBiaXRzLiIiIgogICAgICAgIGlmIGsgPD0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbnVtYmVyIG9mIGJpdHMgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVybycpCiAgICAgICAgaWYgayAhPSBpbnQoayk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignbnVtYmVyIG9mIGJpdHMgc2hvdWxkIGJlIGFuIGludGVnZXInKQogICAgICAgIG51bWJ5dGVzID0gKGsgKyA3KSAvLyA4ICAgICAgICAgICAgICAgICAgICAgICAjIGJpdHMgLyA4IGFuZCByb3VuZGVkIHVwCiAgICAgICAgeCA9IGludC5mcm9tX2J5dGVzKF91cmFuZG9tKG51bWJ5dGVzKSwgJ2JpZycpCiAgICAgICAgcmV0dXJuIHggPj4gKG51bWJ5dGVzICogOCAtIGspICAgICAgICAgICAgICAgICMgdHJpbSBleGNlc3MgYml0cwo=',
'/Lib/signal.py':'IiIiVGhpcyBtb2R1bGUgcHJvdmlkZXMgbWVjaGFuaXNtcyB0byB1c2Ugc2lnbmFsIGhhbmRsZXJzIGluIFB5dGhvbi4KCkZ1bmN0aW9uczoKCmFsYXJtKCkgLS0gY2F1c2UgU0lHQUxSTSBhZnRlciBhIHNwZWNpZmllZCB0aW1lIFtVbml4IG9ubHldCnNldGl0aW1lcigpIC0tIGNhdXNlIGEgc2lnbmFsIChkZXNjcmliZWQgYmVsb3cpIGFmdGVyIGEgc3BlY2lmaWVkCiAgICAgICAgICAgICAgIGZsb2F0IHRpbWUgYW5kIHRoZSB0aW1lciBtYXkgcmVzdGFydCB0aGVuIFtVbml4IG9ubHldCmdldGl0aW1lcigpIC0tIGdldCBjdXJyZW50IHZhbHVlIG9mIHRpbWVyIFtVbml4IG9ubHldCnNpZ25hbCgpIC0tIHNldCB0aGUgYWN0aW9uIGZvciBhIGdpdmVuIHNpZ25hbApnZXRzaWduYWwoKSAtLSBnZXQgdGhlIHNpZ25hbCBhY3Rpb24gZm9yIGEgZ2l2ZW4gc2lnbmFsCnBhdXNlKCkgLS0gd2FpdCB1bnRpbCBhIHNpZ25hbCBhcnJpdmVzIFtVbml4IG9ubHldCmRlZmF1bHRfaW50X2hhbmRsZXIoKSAtLSBkZWZhdWx0IFNJR0lOVCBoYW5kbGVyCgpzaWduYWwgY29uc3RhbnRzOgpTSUdfREZMIC0tIHVzZWQgdG8gcmVmZXIgdG8gdGhlIHN5c3RlbSBkZWZhdWx0IGhhbmRsZXIKU0lHX0lHTiAtLSB1c2VkIHRvIGlnbm9yZSB0aGUgc2lnbmFsCk5TSUcgLS0gbnVtYmVyIG9mIGRlZmluZWQgc2lnbmFscwpTSUdJTlQsIFNJR1RFUk0sIGV0Yy4gLS0gc2lnbmFsIG51bWJlcnMKCml0aW1lciBjb25zdGFudHM6CklUSU1FUl9SRUFMIC0tIGRlY3JlbWVudHMgaW4gcmVhbCB0aW1lLCBhbmQgZGVsaXZlcnMgU0lHQUxSTSB1cG9uCiAgICAgICAgICAgICAgIGV4cGlyYXRpb24KSVRJTUVSX1ZJUlRVQUwgLS0gZGVjcmVtZW50cyBvbmx5IHdoZW4gdGhlIHByb2Nlc3MgaXMgZXhlY3V0aW5nLAogICAgICAgICAgICAgICBhbmQgZGVsaXZlcnMgU0lHVlRBTFJNIHVwb24gZXhwaXJhdGlvbgpJVElNRVJfUFJPRiAtLSBkZWNyZW1lbnRzIGJvdGggd2hlbiB0aGUgcHJvY2VzcyBpcyBleGVjdXRpbmcgYW5kCiAgICAgICAgICAgICAgIHdoZW4gdGhlIHN5c3RlbSBpcyBleGVjdXRpbmcgb24gYmVoYWxmIG9mIHRoZSBwcm9jZXNzLgogICAgICAgICAgICAgICBDb3VwbGVkIHdpdGggSVRJTUVSX1ZJUlRVQUwsIHRoaXMgdGltZXIgaXMgdXN1YWxseQogICAgICAgICAgICAgICB1c2VkIHRvIHByb2ZpbGUgdGhlIHRpbWUgc3BlbnQgYnkgdGhlIGFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgIGluIHVzZXIgYW5kIGtlcm5lbCBzcGFjZS4gU0lHUFJPRiBpcyBkZWxpdmVyZWQgdXBvbgogICAgICAgICAgICAgICBleHBpcmF0aW9uLgoKCioqKiBJTVBPUlRBTlQgTk9USUNFICoqKgpBIHNpZ25hbCBoYW5kbGVyIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIHR3byBhcmd1bWVudHM6CnRoZSBmaXJzdCBpcyB0aGUgc2lnbmFsIG51bWJlciwgdGhlIHNlY29uZCBpcyB0aGUgaW50ZXJydXB0ZWQgc3RhY2sgZnJhbWUuIiIiCgpDVFJMX0JSRUFLX0VWRU5UPTEKQ1RSTF9DX0VWRU5UPTAKTlNJRz0yMwpTSUdBQlJUPTIyClNJR0JSRUFLPTIxClNJR0ZQRT04ClNJR0lMTD00ClNJR0lOVD0yClNJR1NFR1Y9MTEKU0lHVEVSTT0xNQpTSUdfREZMPTAKU0lHX0lHTj0xCgpkZWYgc2lnbmFsKHNpZ25hbG51bSwgaGFuZGxlcikgOgogICAgcGFzcwo=',
'/Lib/bisect.py':'IiIiQmlzZWN0aW9uIGFsZ29yaXRobXMuIiIiCgpkZWYgaW5zb3J0X3JpZ2h0KGEsIHgsIGxvPTAsIGhpPU5vbmUpOgogICAgIiIiSW5zZXJ0IGl0ZW0geCBpbiBsaXN0IGEsIGFuZCBrZWVwIGl0IHNvcnRlZCBhc3N1bWluZyBhIGlzIHNvcnRlZC4KCiAgICBJZiB4IGlzIGFscmVhZHkgaW4gYSwgaW5zZXJ0IGl0IHRvIHRoZSByaWdodCBvZiB0aGUgcmlnaHRtb3N0IHguCgogICAgT3B0aW9uYWwgYXJncyBsbyAoZGVmYXVsdCAwKSBhbmQgaGkgKGRlZmF1bHQgbGVuKGEpKSBib3VuZCB0aGUKICAgIHNsaWNlIG9mIGEgdG8gYmUgc2VhcmNoZWQuCiAgICAiIiIKCiAgICBpZiBsbyA8IDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbG8gbXVzdCBiZSBub24tbmVnYXRpdmUnKQogICAgaWYgaGkgaXMgTm9uZToKICAgICAgICBoaSA9IGxlbihhKQogICAgd2hpbGUgbG8gPCBoaToKICAgICAgICBtaWQgPSAobG8raGkpLy8yCiAgICAgICAgaWYgeCA8IGFbbWlkXTogaGkgPSBtaWQKICAgICAgICBlbHNlOiBsbyA9IG1pZCsxCiAgICBhLmluc2VydChsbywgeCkKCmluc29ydCA9IGluc29ydF9yaWdodCAgICMgYmFja3dhcmQgY29tcGF0aWJpbGl0eQoKZGVmIGJpc2VjdF9yaWdodChhLCB4LCBsbz0wLCBoaT1Ob25lKToKICAgICIiIlJldHVybiB0aGUgaW5kZXggd2hlcmUgdG8gaW5zZXJ0IGl0ZW0geCBpbiBsaXN0IGEsIGFzc3VtaW5nIGEgaXMgc29ydGVkLgoKICAgIFRoZSByZXR1cm4gdmFsdWUgaSBpcyBzdWNoIHRoYXQgYWxsIGUgaW4gYVs6aV0gaGF2ZSBlIDw9IHgsIGFuZCBhbGwgZSBpbgogICAgYVtpOl0gaGF2ZSBlID4geC4gIFNvIGlmIHggYWxyZWFkeSBhcHBlYXJzIGluIHRoZSBsaXN0LCBhLmluc2VydCh4KSB3aWxsCiAgICBpbnNlcnQganVzdCBhZnRlciB0aGUgcmlnaHRtb3N0IHggYWxyZWFkeSB0aGVyZS4KCiAgICBPcHRpb25hbCBhcmdzIGxvIChkZWZhdWx0IDApIGFuZCBoaSAoZGVmYXVsdCBsZW4oYSkpIGJvdW5kIHRoZQogICAgc2xpY2Ugb2YgYSB0byBiZSBzZWFyY2hlZC4KICAgICIiIgoKICAgIGlmIGxvIDwgMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdsbyBtdXN0IGJlIG5vbi1uZWdhdGl2ZScpCiAgICBpZiBoaSBpcyBOb25lOgogICAgICAgIGhpID0gbGVuKGEpCiAgICB3aGlsZSBsbyA8IGhpOgogICAgICAgIG1pZCA9IChsbytoaSkvLzIKICAgICAgICBpZiB4IDwgYVttaWRdOiBoaSA9IG1pZAogICAgICAgIGVsc2U6IGxvID0gbWlkKzEKICAgIHJldHVybiBsbwoKYmlzZWN0ID0gYmlzZWN0X3JpZ2h0ICAgIyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5CgpkZWYgaW5zb3J0X2xlZnQoYSwgeCwgbG89MCwgaGk9Tm9uZSk6CiAgICAiIiJJbnNlcnQgaXRlbSB4IGluIGxpc3QgYSwgYW5kIGtlZXAgaXQgc29ydGVkIGFzc3VtaW5nIGEgaXMgc29ydGVkLgoKICAgIElmIHggaXMgYWxyZWFkeSBpbiBhLCBpbnNlcnQgaXQgdG8gdGhlIGxlZnQgb2YgdGhlIGxlZnRtb3N0IHguCgogICAgT3B0aW9uYWwgYXJncyBsbyAoZGVmYXVsdCAwKSBhbmQgaGkgKGRlZmF1bHQgbGVuKGEpKSBib3VuZCB0aGUKICAgIHNsaWNlIG9mIGEgdG8gYmUgc2VhcmNoZWQuCiAgICAiIiIKCiAgICBpZiBsbyA8IDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbG8gbXVzdCBiZSBub24tbmVnYXRpdmUnKQogICAgaWYgaGkgaXMgTm9uZToKICAgICAgICBoaSA9IGxlbihhKQogICAgd2hpbGUgbG8gPCBoaToKICAgICAgICBtaWQgPSAobG8raGkpLy8yCiAgICAgICAgaWYgYVttaWRdIDwgeDogbG8gPSBtaWQrMQogICAgICAgIGVsc2U6IGhpID0gbWlkCiAgICBhLmluc2VydChsbywgeCkKCgpkZWYgYmlzZWN0X2xlZnQoYSwgeCwgbG89MCwgaGk9Tm9uZSk6CiAgICAiIiJSZXR1cm4gdGhlIGluZGV4IHdoZXJlIHRvIGluc2VydCBpdGVtIHggaW4gbGlzdCBhLCBhc3N1bWluZyBhIGlzIHNvcnRlZC4KCiAgICBUaGUgcmV0dXJuIHZhbHVlIGkgaXMgc3VjaCB0aGF0IGFsbCBlIGluIGFbOmldIGhhdmUgZSA8IHgsIGFuZCBhbGwgZSBpbgogICAgYVtpOl0gaGF2ZSBlID49IHguICBTbyBpZiB4IGFscmVhZHkgYXBwZWFycyBpbiB0aGUgbGlzdCwgYS5pbnNlcnQoeCkgd2lsbAogICAgaW5zZXJ0IGp1c3QgYmVmb3JlIHRoZSBsZWZ0bW9zdCB4IGFscmVhZHkgdGhlcmUuCgogICAgT3B0aW9uYWwgYXJncyBsbyAoZGVmYXVsdCAwKSBhbmQgaGkgKGRlZmF1bHQgbGVuKGEpKSBib3VuZCB0aGUKICAgIHNsaWNlIG9mIGEgdG8gYmUgc2VhcmNoZWQuCiAgICAiIiIKCiAgICBpZiBsbyA8IDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbG8gbXVzdCBiZSBub24tbmVnYXRpdmUnKQogICAgaWYgaGkgaXMgTm9uZToKICAgICAgICBoaSA9IGxlbihhKQogICAgd2hpbGUgbG8gPCBoaToKICAgICAgICBtaWQgPSAobG8raGkpLy8yCiAgICAgICAgaWYgYVttaWRdIDwgeDogbG8gPSBtaWQrMQogICAgICAgIGVsc2U6IGhpID0gbWlkCiAgICByZXR1cm4gbG8KCiMgZG9udCcgbmVlZCB0aGlzIGZvciBicnl0aG9uCiMgT3ZlcndyaXRlIGFib3ZlIGRlZmluaXRpb25zIHdpdGggYSBmYXN0IEMgaW1wbGVtZW50YXRpb24KI3RyeToKIyAgICBmcm9tIF9iaXNlY3QgaW1wb3J0ICoKI2V4Y2VwdCBJbXBvcnRFcnJvcjoKIyAgICBwYXNzCg==',
'/Lib/VFS_import.py':'aW1wb3J0IG9zCmZyb20gYnJvd3NlciBpbXBvcnQgZG9jCgojX3NjcmlwdHM9ZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpCiNfc2NyaXB0cy5zcmM9Ii9zcmMvcHlfVkZTLmpzIgojX3NjcmlwdHMudHlwZT0idGV4dC9qYXZhc2NyaXB0IgojZG9jLmdldCh0YWc9J2hlYWQnKVswXS5hcHBlbmRDaGlsZChfc2NyaXB0cykKClZGUz1kaWN0KEpTT2JqZWN0KF9fQlJZVEhPTl9fLnB5X1ZGUykpCmNsYXNzIFZGU01vZHVsZUZpbmRlcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwYXRoX2VudHJ5KToKICAgICAgICBwcmludCgiaW4gVkZTTW9kdWxlRmluZGVyIikKICAgICAgICBpZiBwYXRoX2VudHJ5LnN0YXJ0c3dpdGgoJy9saWJzJykgb3IgcGF0aF9lbnRyeS5zdGFydHN3aXRoKCcvTGliJyk6CiAgICAgICAgICAgc2VsZi5wYXRoX2VudHJ5PXBhdGhfZW50cnkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcigpCiAgICAgICAgCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gJzwlcyBmb3IgIiVzIj4nICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBzZWxmLnBhdGhfZW50cnkpCiAgICAgICAgCiAgICBkZWYgZmluZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUsIHBhdGg9Tm9uZSk6CiAgICAgICAgcGF0aCA9IHBhdGggb3Igc2VsZi5wYXRoX2VudHJ5CiAgICAgICAgI3ByaW50KCdsb29raW5nIGZvciAiJXMiIGluICVzIC4uLicgJSAoZnVsbG5hbWUsIHBhdGgpKQogICAgICAgIGZvciBfZXh0IGluIFsnanMnLCAncHlqJywgJ3B5J106CiAgICAgICAgICAgIF9maWxlcGF0aD1vcy5wYXRoLmpvaW4oc2VsZi5wYXRoX2VudHJ5LCAnJXMuJXMnICUgKGZ1bGxuYW1lLCBfZXh0KSkKICAgICAgICAgICAgaWYgX2ZpbGVwYXRoIGluIFZGUzoKICAgICAgICAgICAgICAgcHJpbnQoIm1vZHVsZSBmb3VuZCBhdCAlczolcyIgJSAoX2ZpbGVwYXRoLCBmdWxsbmFtZSkpCiAgICAgICAgICAgICAgIHJldHVybiBWRlNNb2R1bGVMb2FkZXIoX2ZpbGVwYXRoLCBmdWxsbmFtZSkKCiAgICAgICAgcHJpbnQoJ21vZHVsZSAlcyBub3QgZm91bmQnICUgZnVsbG5hbWUpCiAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoKQogICAgICAgIHJldHVybiBOb25lCgpjbGFzcyBWRlNNb2R1bGVMb2FkZXI6CiAgICAiIiJMb2FkIHNvdXJjZSBmb3IgbW9kdWxlcyIiIgogICAgCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlsZXBhdGgsIG5hbWUpOgogICAgICAgIHNlbGYuX2ZpbGVwYXRoPWZpbGVwYXRoCiAgICAgICAgc2VsZi5fbmFtZT1uYW1lCiAgICAgICAgCiAgICBkZWYgZ2V0X3NvdXJjZShzZWxmKToKICAgICAgICBpZiBzZWxmLl9maWxlcGF0aCBpbiBWRlM6CiAgICAgICAgICAgcmV0dXJuIEpTT2JqZWN0KHJlYWRGcm9tVkZTKHNlbGYuX2ZpbGVwYXRoKSkKCiAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoJ2NvdWxkIG5vdCBmaW5kIHNvdXJjZSBmb3IgJXMnICUgZnVsbG5hbWUpCgogICAgZGVmIGlzX3BhY2thZ2Uoc2VsZik6CiAgICAgICAgcmV0dXJuICcuJyBpbiBzZWxmLl9uYW1lCiAgICAgICAgICAgIAogICAgZGVmIGxvYWRfbW9kdWxlKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX25hbWUgaW4gc3lzLm1vZHVsZXM6CiAgICAgICAgICAgI3ByaW50KCdyZXVzaW5nIGV4aXN0aW5nIG1vZHVsZSBmcm9tIHByZXZpb3VzIGltcG9ydCBvZiAiJXMiJyAlIGZ1bGxuYW1lKQogICAgICAgICAgIG1vZCA9IHN5cy5tb2R1bGVzW3NlbGYuX25hbWVdCiAgICAgICAgICAgcmV0dXJuIG1vZAogICAgICAgIAogICAgICAgIF9zcmM9c2VsZi5nZXRfc291cmNlKCkKICAgICAgICBpZiBzZWxmLl9maWxlcGF0aC5lbmRzd2l0aCgnLmpzJyk6CiAgICAgICAgICAgbW9kPUpTT2JqZWN0KGltcG9ydF9qc19tb2R1bGUoX3NyYywgc2VsZi5fZmlsZXBhdGgsIHNlbGYuX25hbWUpKQogICAgICAgIGVsaWYgc2VsZi5fZmlsZXBhdGguZW5kc3dpdGgoJy5weScpOgogICAgICAgICAgIG1vZD1KU09iamVjdChpbXBvcnRfcHlfbW9kdWxlKF9zcmMsIHNlbGYuX2ZpbGVwYXRoLCBzZWxmLl9uYW1lKSkKICAgICAgICBlbGlmIHNlbGYuX2ZpbGVwYXRoLmVuZHN3aXRoKCcucHlqJyk6CiAgICAgICAgICAgbW9kPUpTT2JqZWN0KGltcG9ydF9weWpfbW9kdWxlKF9zcmMsIHNlbGYuX2ZpbGVwYXRoLCBzZWxmLl9uYW1lKSkKICAgICAgICBlbHNlOgogICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKCdJbnZhbGlkIE1vZHVsZTogJXMnICUgc2VsZi5fZmlsZXBhdGgpCgogICAgICAgICMgU2V0IGEgZmV3IHByb3BlcnRpZXMgcmVxdWlyZWQgYnkgUEVQIDMwMgogICAgICAgIG1vZC5fX2ZpbGVfXyA9IHNlbGYuX2ZpbGVwYXRoCiAgICAgICAgbW9kLl9fbmFtZV9fID0gc2VsZi5fbmFtZQogICAgICAgIG1vZC5fX3BhdGhfXyA9IG9zLnBhdGguYWJzcGF0aChzZWxmLl9maWxlcGF0aCkKICAgICAgICBtb2QuX19sb2FkZXJfXyA9IHNlbGYKICAgICAgICBtb2QuX19wYWNrYWdlX18gPSAnLicuam9pbihzZWxmLl9uYW1lLnNwbGl0KCcuJylbOi0xXSkKICAgICAgICAKICAgICAgICBpZiBzZWxmLmlzX3BhY2thZ2UoKToKICAgICAgICAgICBwcmludCgnYWRkaW5nIHBhdGggZm9yIHBhY2thZ2UnKQogICAgICAgICAgICMgU2V0IF9fcGF0aF9fIGZvciBwYWNrYWdlcwogICAgICAgICAgICMgc28gd2UgY2FuIGZpbmQgdGhlIHN1Yi1tb2R1bGVzLgogICAgICAgICAgIG1vZC5fX3BhdGhfXyA9IFsgc2VsZi5wYXRoX2VudHJ5IF0KICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgnaW1wb3J0ZWQgYXMgcmVndWxhciBtb2R1bGUnKQogICAgICAgIAogICAgICAgIHByaW50KCdjcmVhdGluZyBhIG5ldyBtb2R1bGUgb2JqZWN0IGZvciAiJXMiJyAlIHNlbGYuX25hbWUpCiAgICAgICAgc3lzLm1vZHVsZXMuc2V0ZGVmYXVsdChzZWxmLl9uYW1lLCBtb2QpCiAgICAgICAgSlNPYmplY3QoX19CUllUSE9OX18uaW1wb3J0ZWQpW3NlbGYuX25hbWVdPW1vZAoKICAgICAgICByZXR1cm4gbW9kCgpKU09iamVjdChfX0JSWVRIT05fXy5wYXRoX2hvb2tzLmluc2VydCgwLCBWRlNNb2R1bGVGaW5kZXIpKQo=',
'/Lib/external_import.py':'aW1wb3J0IG9zCmZyb20gYnJvd3NlciBpbXBvcnQgZG9jCmltcG9ydCB1cmxsaWIucmVxdWVzdAoKIyMgdGhpcyBtb2R1bGUgaXMgYWJsZSB0byBkb3dubG9hZCBtb2R1bGVzIHRoYXQgYXJlIGV4dGVybmFsIHRvCiMjIGxvY2FsaG9zdC9zcmMKIyMgc28gd2UgY291bGQgZG93bmxvYWQgZnJvbSBhbnkgVVJMCgpjbGFzcyBNb2R1bGVGaW5kZXI6CiAgICBkZWYgX19pbml0X18oc2VsZiwgcGF0aF9lbnRyeSk6CiAgICAgICAgcHJpbnQoImV4dGVybmFsX2ltcG9ydCBoZXJlLi4iKQogICAgICAgICNwcmludChwYXRoX2VudHJ5KQogICAgICAgIHNlbGYuX21vZHVsZT1Ob25lCiAgICAgICAgaWYgcGF0aF9lbnRyeS5zdGFydHN3aXRoKCdodHRwOi8vJyk6CiAgICAgICAgICAgc2VsZi5wYXRoX2VudHJ5PXBhdGhfZW50cnkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcigpCiAgICAgICAgCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gJzwlcyBmb3IgIiVzIj4nICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBzZWxmLnBhdGhfZW50cnkpCiAgICAgICAgCiAgICBkZWYgZmluZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUsIHBhdGg9Tm9uZSk6CiAgICAgICAgcGF0aCA9IHBhdGggb3Igc2VsZi5wYXRoX2VudHJ5CiAgICAgICAgI3ByaW50KCdsb29raW5nIGZvciAiJXMiIGluICVzIC4uLicgJSAoZnVsbG5hbWUsIHBhdGgpKQogICAgICAgIGZvciBfZXh0IGluIFsnanMnLCAncHlqJywgJ3B5J106CiAgICAgICAgICAgIF9mcCxfdXJsLF9oZWFkZXJzPXVybGxpYi5yZXF1ZXN0LnVybG9wZW4ocGF0aCArICcvJyArICclcy4lcycgJSAoZnVsbG5hbWUsIF9leHQpKQogICAgICAgICAgICBzZWxmLl9tb2R1bGU9X2ZwLnJlYWQoKQogICAgICAgICAgICBfZnAuY2xvc2UoKQogICAgICAgICAgICBpZiBzZWxmLl9tb2R1bGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgIHByaW50KCJtb2R1bGUgZm91bmQgYXQgJXM6JXMiICUgKHBhdGgsIGZ1bGxuYW1lKSkKICAgICAgICAgICAgICAgcmV0dXJuIE1vZHVsZUxvYWRlcihwYXRoLCBmdWxsbmFtZSwgc2VsZi5fbW9kdWxlKQoKICAgICAgICBwcmludCgnbW9kdWxlICVzIG5vdCBmb3VuZCcgJSBmdWxsbmFtZSkKICAgICAgICByYWlzZSBJbXBvcnRFcnJvcigpCiAgICAgICAgcmV0dXJuIE5vbmUKCmNsYXNzIE1vZHVsZUxvYWRlcjoKICAgICIiIkxvYWQgc291cmNlIGZvciBtb2R1bGVzIiIiCiAgICAKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmaWxlcGF0aCwgbmFtZSwgbW9kdWxlX3NvdXJjZSk6CiAgICAgICAgc2VsZi5fZmlsZXBhdGg9ZmlsZXBhdGgKICAgICAgICBzZWxmLl9uYW1lPW5hbWUKICAgICAgICBzZWxmLl9tb2R1bGVfc291cmNlPW1vZHVsZV9zb3VyY2UKICAgICAgICAKICAgIGRlZiBnZXRfc291cmNlKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9tb2R1bGVfc291cmNlCgogICAgZGVmIGlzX3BhY2thZ2Uoc2VsZik6CiAgICAgICAgcmV0dXJuICcuJyBpbiBzZWxmLl9uYW1lCiAgICAgICAgICAgIAogICAgZGVmIGxvYWRfbW9kdWxlKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX25hbWUgaW4gc3lzLm1vZHVsZXM6CiAgICAgICAgICAgI3ByaW50KCdyZXVzaW5nIGV4aXN0aW5nIG1vZHVsZSBmcm9tIHByZXZpb3VzIGltcG9ydCBvZiAiJXMiJyAlIGZ1bGxuYW1lKQogICAgICAgICAgIG1vZCA9IHN5cy5tb2R1bGVzW3NlbGYuX25hbWVdCiAgICAgICAgICAgcmV0dXJuIG1vZAogICAgICAgIAogICAgICAgIF9zcmM9c2VsZi5nZXRfc291cmNlKCkKICAgICAgICBpZiBzZWxmLl9maWxlcGF0aC5lbmRzd2l0aCgnLmpzJyk6CiAgICAgICAgICAgbW9kPUpTT2JqZWN0KGltcG9ydF9qc19tb2R1bGUoX3NyYywgc2VsZi5fZmlsZXBhdGgsIHNlbGYuX25hbWUpKQogICAgICAgIGVsaWYgc2VsZi5fZmlsZXBhdGguZW5kc3dpdGgoJy5weScpOgogICAgICAgICAgIG1vZD1KU09iamVjdChpbXBvcnRfcHlfbW9kdWxlKF9zcmMsIHNlbGYuX2ZpbGVwYXRoLCBzZWxmLl9uYW1lKSkKICAgICAgICBlbGlmIHNlbGYuX2ZpbGVwYXRoLmVuZHN3aXRoKCcucHlqJyk6CiAgICAgICAgICAgbW9kPUpTT2JqZWN0KGltcG9ydF9weWpfbW9kdWxlKF9zcmMsIHNlbGYuX2ZpbGVwYXRoLCBzZWxmLl9uYW1lKSkKICAgICAgICBlbHNlOgogICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKCdJbnZhbGlkIE1vZHVsZTogJXMnICUgc2VsZi5fZmlsZXBhdGgpCgogICAgICAgICMgU2V0IGEgZmV3IHByb3BlcnRpZXMgcmVxdWlyZWQgYnkgUEVQIDMwMgogICAgICAgIG1vZC5fX2ZpbGVfXyA9IHNlbGYuX2ZpbGVwYXRoCiAgICAgICAgbW9kLl9fbmFtZV9fID0gc2VsZi5fbmFtZQogICAgICAgIG1vZC5fX3BhdGhfXyA9IG9zLnBhdGguYWJzcGF0aChzZWxmLl9maWxlcGF0aCkKICAgICAgICBtb2QuX19sb2FkZXJfXyA9IHNlbGYKICAgICAgICBtb2QuX19wYWNrYWdlX18gPSAnLicuam9pbihzZWxmLl9uYW1lLnNwbGl0KCcuJylbOi0xXSkKICAgICAgICAKICAgICAgICBpZiBzZWxmLmlzX3BhY2thZ2UoKToKICAgICAgICAgICBwcmludCgnYWRkaW5nIHBhdGggZm9yIHBhY2thZ2UnKQogICAgICAgICAgICMgU2V0IF9fcGF0aF9fIGZvciBwYWNrYWdlcwogICAgICAgICAgICMgc28gd2UgY2FuIGZpbmQgdGhlIHN1Yi1tb2R1bGVzLgogICAgICAgICAgIG1vZC5fX3BhdGhfXyA9IFsgc2VsZi5fZmlsZXBhdGggXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCdpbXBvcnRlZCBhcyByZWd1bGFyIG1vZHVsZScpCiAgICAgICAgCiAgICAgICAgcHJpbnQoJ2NyZWF0aW5nIGEgbmV3IG1vZHVsZSBvYmplY3QgZm9yICIlcyInICUgc2VsZi5fbmFtZSkKICAgICAgICBzeXMubW9kdWxlcy5zZXRkZWZhdWx0KHNlbGYuX25hbWUsIG1vZCkKICAgICAgICBKU09iamVjdChfX0JSWVRIT05fXy5pbXBvcnRlZClbc2VsZi5fbmFtZV09bW9kCgogICAgICAgIHJldHVybiBtb2QK',
'/Lib/contextlib.py':'IiIiVXRpbGl0aWVzIGZvciB3aXRoLXN0YXRlbWVudCBjb250ZXh0cy4gIFNlZSBQRVAgMzQzLiIiIg0KDQppbXBvcnQgc3lzDQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZXF1ZQ0KZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHdyYXBzDQoNCl9fYWxsX18gPSBbImNvbnRleHRtYW5hZ2VyIiwgImNsb3NpbmciLCAiQ29udGV4dERlY29yYXRvciIsICJFeGl0U3RhY2siXQ0KDQoNCmNsYXNzIENvbnRleHREZWNvcmF0b3Iob2JqZWN0KToNCiAgICAiQSBiYXNlIGNsYXNzIG9yIG1peGluIHRoYXQgZW5hYmxlcyBjb250ZXh0IG1hbmFnZXJzIHRvIHdvcmsgYXMgZGVjb3JhdG9ycy4iDQoNCiAgICBkZWYgX3JlY3JlYXRlX2NtKHNlbGYpOg0KICAgICAgICAiIiJSZXR1cm4gYSByZWNyZWF0ZWQgaW5zdGFuY2Ugb2Ygc2VsZi4NCg0KICAgICAgICBBbGxvd3MgYW4gb3RoZXJ3aXNlIG9uZS1zaG90IGNvbnRleHQgbWFuYWdlciBsaWtlDQogICAgICAgIF9HZW5lcmF0b3JDb250ZXh0TWFuYWdlciB0byBzdXBwb3J0IHVzZSBhcw0KICAgICAgICBhIGRlY29yYXRvciB2aWEgaW1wbGljaXQgcmVjcmVhdGlvbi4NCg0KICAgICAgICBUaGlzIGlzIGEgcHJpdmF0ZSBpbnRlcmZhY2UganVzdCBmb3IgX0dlbmVyYXRvckNvbnRleHRNYW5hZ2VyLg0KICAgICAgICBTZWUgaXNzdWUgIzExNjQ3IGZvciBkZXRhaWxzLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHNlbGYNCg0KICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBmdW5jKToNCiAgICAgICAgQHdyYXBzKGZ1bmMpDQogICAgICAgIGRlZiBpbm5lcigqYXJncywgKiprd2RzKToNCiAgICAgICAgICAgIHdpdGggc2VsZi5fcmVjcmVhdGVfY20oKToNCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYygqYXJncywgKiprd2RzKQ0KICAgICAgICByZXR1cm4gaW5uZXINCg0KDQpjbGFzcyBfR2VuZXJhdG9yQ29udGV4dE1hbmFnZXIoQ29udGV4dERlY29yYXRvcik6DQogICAgIiIiSGVscGVyIGZvciBAY29udGV4dG1hbmFnZXIgZGVjb3JhdG9yLiIiIg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZ1bmMsICphcmdzLCAqKmt3ZHMpOg0KICAgICAgICBzZWxmLmdlbiA9IGZ1bmMoKmFyZ3MsICoqa3dkcykNCiAgICAgICAgc2VsZi5mdW5jLCBzZWxmLmFyZ3MsIHNlbGYua3dkcyA9IGZ1bmMsIGFyZ3MsIGt3ZHMNCg0KICAgIGRlZiBfcmVjcmVhdGVfY20oc2VsZik6DQogICAgICAgICMgX0dDTSBpbnN0YW5jZXMgYXJlIG9uZS1zaG90IGNvbnRleHQgbWFuYWdlcnMsIHNvIHRoZQ0KICAgICAgICAjIENNIG11c3QgYmUgcmVjcmVhdGVkIGVhY2ggdGltZSBhIGRlY29yYXRlZCBmdW5jdGlvbiBpcw0KICAgICAgICAjIGNhbGxlZA0KICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18oc2VsZi5mdW5jLCAqc2VsZi5hcmdzLCAqKnNlbGYua3dkcykNCg0KICAgIGRlZiBfX2VudGVyX18oc2VsZik6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJldHVybiBuZXh0KHNlbGYuZ2VuKQ0KICAgICAgICBleGNlcHQgU3RvcEl0ZXJhdGlvbjoNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiZ2VuZXJhdG9yIGRpZG4ndCB5aWVsZCIpDQoNCiAgICBkZWYgX19leGl0X18oc2VsZiwgdHlwZSwgdmFsdWUsIHRyYWNlYmFjayk6DQogICAgICAgIGlmIHR5cGUgaXMgTm9uZToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBuZXh0KHNlbGYuZ2VuKQ0KICAgICAgICAgICAgZXhjZXB0IFN0b3BJdGVyYXRpb246DQogICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiZ2VuZXJhdG9yIGRpZG4ndCBzdG9wIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGlmIHZhbHVlIGlzIE5vbmU6DQogICAgICAgICAgICAgICAgIyBOZWVkIHRvIGZvcmNlIGluc3RhbnRpYXRpb24gc28gd2UgY2FuIHJlbGlhYmx5DQogICAgICAgICAgICAgICAgIyB0ZWxsIGlmIHdlIGdldCB0aGUgc2FtZSBleGNlcHRpb24gYmFjaw0KICAgICAgICAgICAgICAgIHZhbHVlID0gdHlwZSgpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5nZW4udGhyb3codHlwZSwgdmFsdWUsIHRyYWNlYmFjaykNCiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoImdlbmVyYXRvciBkaWRuJ3Qgc3RvcCBhZnRlciB0aHJvdygpIikNCiAgICAgICAgICAgIGV4Y2VwdCBTdG9wSXRlcmF0aW9uIGFzIGV4YzoNCiAgICAgICAgICAgICAgICAjIFN1cHByZXNzIHRoZSBleGNlcHRpb24gKnVubGVzcyogaXQncyB0aGUgc2FtZSBleGNlcHRpb24gdGhhdA0KICAgICAgICAgICAgICAgICMgd2FzIHBhc3NlZCB0byB0aHJvdygpLiAgVGhpcyBwcmV2ZW50cyBhIFN0b3BJdGVyYXRpb24NCiAgICAgICAgICAgICAgICAjIHJhaXNlZCBpbnNpZGUgdGhlICJ3aXRoIiBzdGF0ZW1lbnQgZnJvbSBiZWluZyBzdXBwcmVzc2VkDQogICAgICAgICAgICAgICAgcmV0dXJuIGV4YyBpcyBub3QgdmFsdWUNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICAjIG9ubHkgcmUtcmFpc2UgaWYgaXQncyAqbm90KiB0aGUgZXhjZXB0aW9uIHRoYXQgd2FzDQogICAgICAgICAgICAgICAgIyBwYXNzZWQgdG8gdGhyb3coKSwgYmVjYXVzZSBfX2V4aXRfXygpIG11c3Qgbm90IHJhaXNlDQogICAgICAgICAgICAgICAgIyBhbiBleGNlcHRpb24gdW5sZXNzIF9fZXhpdF9fKCkgaXRzZWxmIGZhaWxlZC4gIEJ1dCB0aHJvdygpDQogICAgICAgICAgICAgICAgIyBoYXMgdG8gcmFpc2UgdGhlIGV4Y2VwdGlvbiB0byBzaWduYWwgcHJvcGFnYXRpb24sIHNvIHRoaXMNCiAgICAgICAgICAgICAgICAjIGZpeGVzIHRoZSBpbXBlZGFuY2UgbWlzbWF0Y2ggYmV0d2VlbiB0aGUgdGhyb3coKSBwcm90b2NvbA0KICAgICAgICAgICAgICAgICMgYW5kIHRoZSBfX2V4aXRfXygpIHByb3RvY29sLg0KICAgICAgICAgICAgICAgICMNCiAgICAgICAgICAgICAgICBpZiBzeXMuZXhjX2luZm8oKVsxXSBpcyBub3QgdmFsdWU6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlDQoNCg0KZGVmIGNvbnRleHRtYW5hZ2VyKGZ1bmMpOg0KICAgICIiIkBjb250ZXh0bWFuYWdlciBkZWNvcmF0b3IuDQoNCiAgICBUeXBpY2FsIHVzYWdlOg0KDQogICAgICAgIEBjb250ZXh0bWFuYWdlcg0KICAgICAgICBkZWYgc29tZV9nZW5lcmF0b3IoPGFyZ3VtZW50cz4pOg0KICAgICAgICAgICAgPHNldHVwPg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIHlpZWxkIDx2YWx1ZT4NCiAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgPGNsZWFudXA+DQoNCiAgICBUaGlzIG1ha2VzIHRoaXM6DQoNCiAgICAgICAgd2l0aCBzb21lX2dlbmVyYXRvcig8YXJndW1lbnRzPikgYXMgPHZhcmlhYmxlPjoNCiAgICAgICAgICAgIDxib2R5Pg0KDQogICAgZXF1aXZhbGVudCB0byB0aGlzOg0KDQogICAgICAgIDxzZXR1cD4NCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgPHZhcmlhYmxlPiA9IDx2YWx1ZT4NCiAgICAgICAgICAgIDxib2R5Pg0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgPGNsZWFudXA+DQoNCiAgICAiIiINCiAgICBAd3JhcHMoZnVuYykNCiAgICBkZWYgaGVscGVyKCphcmdzLCAqKmt3ZHMpOg0KICAgICAgICByZXR1cm4gX0dlbmVyYXRvckNvbnRleHRNYW5hZ2VyKGZ1bmMsICphcmdzLCAqKmt3ZHMpDQogICAgcmV0dXJuIGhlbHBlcg0KDQoNCmNsYXNzIGNsb3Npbmcob2JqZWN0KToNCiAgICAiIiJDb250ZXh0IHRvIGF1dG9tYXRpY2FsbHkgY2xvc2Ugc29tZXRoaW5nIGF0IHRoZSBlbmQgb2YgYSBibG9jay4NCg0KICAgIENvZGUgbGlrZSB0aGlzOg0KDQogICAgICAgIHdpdGggY2xvc2luZyg8bW9kdWxlPi5vcGVuKDxhcmd1bWVudHM+KSkgYXMgZjoNCiAgICAgICAgICAgIDxibG9jaz4NCg0KICAgIGlzIGVxdWl2YWxlbnQgdG8gdGhpczoNCg0KICAgICAgICBmID0gPG1vZHVsZT4ub3Blbig8YXJndW1lbnRzPikNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgPGJsb2NrPg0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgZi5jbG9zZSgpDQoNCiAgICAiIiINCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGhpbmcpOg0KICAgICAgICBzZWxmLnRoaW5nID0gdGhpbmcNCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZi50aGluZw0KICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqZXhjX2luZm8pOg0KICAgICAgICBzZWxmLnRoaW5nLmNsb3NlKCkNCg0KDQojIEluc3BpcmVkIGJ5IGRpc2N1c3Npb25zIG9uIGh0dHA6Ly9idWdzLnB5dGhvbi5vcmcvaXNzdWUxMzU4NQ0KY2xhc3MgRXhpdFN0YWNrKG9iamVjdCk6DQogICAgIiIiQ29udGV4dCBtYW5hZ2VyIGZvciBkeW5hbWljIG1hbmFnZW1lbnQgb2YgYSBzdGFjayBvZiBleGl0IGNhbGxiYWNrcw0KDQogICAgRm9yIGV4YW1wbGU6DQoNCiAgICAgICAgd2l0aCBFeGl0U3RhY2soKSBhcyBzdGFjazoNCiAgICAgICAgICAgIGZpbGVzID0gW3N0YWNrLmVudGVyX2NvbnRleHQob3BlbihmbmFtZSkpIGZvciBmbmFtZSBpbiBmaWxlbmFtZXNdDQogICAgICAgICAgICAjIEFsbCBvcGVuZWQgZmlsZXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIGNsb3NlZCBhdCB0aGUgZW5kIG9mDQogICAgICAgICAgICAjIHRoZSB3aXRoIHN0YXRlbWVudCwgZXZlbiBpZiBhdHRlbXB0cyB0byBvcGVuIGZpbGVzIGxhdGVyDQogICAgICAgICAgICAjIGluIHRoZSBsaXN0IHRocm93IGFuIGV4Y2VwdGlvbg0KDQogICAgIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBzZWxmLl9leGl0X2NhbGxiYWNrcyA9IGRlcXVlKCkNCg0KICAgIGRlZiBwb3BfYWxsKHNlbGYpOg0KICAgICAgICAiIiJQcmVzZXJ2ZSB0aGUgY29udGV4dCBzdGFjayBieSB0cmFuc2ZlcnJpbmcgaXQgdG8gYSBuZXcgaW5zdGFuY2UiIiINCiAgICAgICAgbmV3X3N0YWNrID0gdHlwZShzZWxmKSgpDQogICAgICAgIG5ld19zdGFjay5fZXhpdF9jYWxsYmFja3MgPSBzZWxmLl9leGl0X2NhbGxiYWNrcw0KICAgICAgICBzZWxmLl9leGl0X2NhbGxiYWNrcyA9IGRlcXVlKCkNCiAgICAgICAgcmV0dXJuIG5ld19zdGFjaw0KDQogICAgZGVmIF9wdXNoX2NtX2V4aXQoc2VsZiwgY20sIGNtX2V4aXQpOg0KICAgICAgICAiIiJIZWxwZXIgdG8gY29ycmVjdGx5IHJlZ2lzdGVyIGNhbGxiYWNrcyB0byBfX2V4aXRfXyBtZXRob2RzIiIiDQogICAgICAgIGRlZiBfZXhpdF93cmFwcGVyKCpleGNfZGV0YWlscyk6DQogICAgICAgICAgICByZXR1cm4gY21fZXhpdChjbSwgKmV4Y19kZXRhaWxzKQ0KICAgICAgICBfZXhpdF93cmFwcGVyLl9fc2VsZl9fID0gY20NCiAgICAgICAgc2VsZi5wdXNoKF9leGl0X3dyYXBwZXIpDQoNCiAgICBkZWYgcHVzaChzZWxmLCBleGl0KToNCiAgICAgICAgIiIiUmVnaXN0ZXJzIGEgY2FsbGJhY2sgd2l0aCB0aGUgc3RhbmRhcmQgX19leGl0X18gbWV0aG9kIHNpZ25hdHVyZQ0KDQogICAgICAgIENhbiBzdXBwcmVzcyBleGNlcHRpb25zIHRoZSBzYW1lIHdheSBfX2V4aXRfXyBtZXRob2RzIGNhbi4NCg0KICAgICAgICBBbHNvIGFjY2VwdHMgYW55IG9iamVjdCB3aXRoIGFuIF9fZXhpdF9fIG1ldGhvZCAocmVnaXN0ZXJpbmcgYSBjYWxsDQogICAgICAgIHRvIHRoZSBtZXRob2QgaW5zdGVhZCBvZiB0aGUgb2JqZWN0IGl0c2VsZikNCiAgICAgICAgIiIiDQogICAgICAgICMgV2UgdXNlIGFuIHVuYm91bmQgbWV0aG9kIHJhdGhlciB0aGFuIGEgYm91bmQgbWV0aG9kIHRvIGZvbGxvdw0KICAgICAgICAjIHRoZSBzdGFuZGFyZCBsb29rdXAgYmVoYXZpb3VyIGZvciBzcGVjaWFsIG1ldGhvZHMNCiAgICAgICAgX2NiX3R5cGUgPSB0eXBlKGV4aXQpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGV4aXRfbWV0aG9kID0gX2NiX3R5cGUuX19leGl0X18NCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgIyBOb3QgYSBjb250ZXh0IG1hbmFnZXIsIHNvIGFzc3VtZSBpdHMgYSBjYWxsYWJsZQ0KICAgICAgICAgICAgc2VsZi5fZXhpdF9jYWxsYmFja3MuYXBwZW5kKGV4aXQpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLl9wdXNoX2NtX2V4aXQoZXhpdCwgZXhpdF9tZXRob2QpDQogICAgICAgIHJldHVybiBleGl0ICMgQWxsb3cgdXNlIGFzIGEgZGVjb3JhdG9yDQoNCiAgICBkZWYgY2FsbGJhY2soc2VsZiwgY2FsbGJhY2ssICphcmdzLCAqKmt3ZHMpOg0KICAgICAgICAiIiJSZWdpc3RlcnMgYW4gYXJiaXRyYXJ5IGNhbGxiYWNrIGFuZCBhcmd1bWVudHMuDQoNCiAgICAgICAgQ2Fubm90IHN1cHByZXNzIGV4Y2VwdGlvbnMuDQogICAgICAgICIiIg0KICAgICAgICBkZWYgX2V4aXRfd3JhcHBlcihleGNfdHlwZSwgZXhjLCB0Yik6DQogICAgICAgICAgICBjYWxsYmFjaygqYXJncywgKiprd2RzKQ0KICAgICAgICAjIFdlIGNoYW5nZWQgdGhlIHNpZ25hdHVyZSwgc28gdXNpbmcgQHdyYXBzIGlzIG5vdCBhcHByb3ByaWF0ZSwgYnV0DQogICAgICAgICMgc2V0dGluZyBfX3dyYXBwZWRfXyBtYXkgc3RpbGwgaGVscCB3aXRoIGludHJvc3BlY3Rpb24NCiAgICAgICAgX2V4aXRfd3JhcHBlci5fX3dyYXBwZWRfXyA9IGNhbGxiYWNrDQogICAgICAgIHNlbGYucHVzaChfZXhpdF93cmFwcGVyKQ0KICAgICAgICByZXR1cm4gY2FsbGJhY2sgIyBBbGxvdyB1c2UgYXMgYSBkZWNvcmF0b3INCg0KICAgIGRlZiBlbnRlcl9jb250ZXh0KHNlbGYsIGNtKToNCiAgICAgICAgIiIiRW50ZXJzIHRoZSBzdXBwbGllZCBjb250ZXh0IG1hbmFnZXINCg0KICAgICAgICBJZiBzdWNjZXNzZnVsLCBhbHNvIHB1c2hlcyBpdHMgX19leGl0X18gbWV0aG9kIGFzIGEgY2FsbGJhY2sgYW5kDQogICAgICAgIHJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgX19lbnRlcl9fIG1ldGhvZC4NCiAgICAgICAgIiIiDQogICAgICAgICMgV2UgbG9vayB1cCB0aGUgc3BlY2lhbCBtZXRob2RzIG9uIHRoZSB0eXBlIHRvIG1hdGNoIHRoZSB3aXRoIHN0YXRlbWVudA0KICAgICAgICBfY21fdHlwZSA9IHR5cGUoY20pDQogICAgICAgIF9leGl0ID0gX2NtX3R5cGUuX19leGl0X18NCiAgICAgICAgcmVzdWx0ID0gX2NtX3R5cGUuX19lbnRlcl9fKGNtKQ0KICAgICAgICBzZWxmLl9wdXNoX2NtX2V4aXQoY20sIF9leGl0KQ0KICAgICAgICByZXR1cm4gcmVzdWx0DQoNCiAgICBkZWYgY2xvc2Uoc2VsZik6DQogICAgICAgICIiIkltbWVkaWF0ZWx5IHVud2luZCB0aGUgY29udGV4dCBzdGFjayIiIg0KICAgICAgICBzZWxmLl9fZXhpdF9fKE5vbmUsIE5vbmUsIE5vbmUpDQoNCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZg0KDQogICAgZGVmIF9fZXhpdF9fKHNlbGYsICpleGNfZGV0YWlscyk6DQogICAgICAgICMgV2UgbWFuaXB1bGF0ZSB0aGUgZXhjZXB0aW9uIHN0YXRlIHNvIGl0IGJlaGF2ZXMgYXMgdGhvdWdoDQogICAgICAgICMgd2Ugd2VyZSBhY3R1YWxseSBuZXN0aW5nIG11bHRpcGxlIHdpdGggc3RhdGVtZW50cw0KICAgICAgICBmcmFtZV9leGMgPSBzeXMuZXhjX2luZm8oKVsxXQ0KICAgICAgICBkZWYgX2ZpeF9leGNlcHRpb25fY29udGV4dChuZXdfZXhjLCBvbGRfZXhjKToNCiAgICAgICAgICAgIHdoaWxlIDE6DQogICAgICAgICAgICAgICAgZXhjX2NvbnRleHQgPSBuZXdfZXhjLl9fY29udGV4dF9fDQogICAgICAgICAgICAgICAgaWYgZXhjX2NvbnRleHQgaW4gKE5vbmUsIGZyYW1lX2V4Yyk6DQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgbmV3X2V4YyA9IGV4Y19jb250ZXh0DQogICAgICAgICAgICBuZXdfZXhjLl9fY29udGV4dF9fID0gb2xkX2V4Yw0KDQogICAgICAgICMgQ2FsbGJhY2tzIGFyZSBpbnZva2VkIGluIExJRk8gb3JkZXIgdG8gbWF0Y2ggdGhlIGJlaGF2aW91ciBvZg0KICAgICAgICAjIG5lc3RlZCBjb250ZXh0IG1hbmFnZXJzDQogICAgICAgIHN1cHByZXNzZWRfZXhjID0gRmFsc2UNCiAgICAgICAgd2hpbGUgc2VsZi5fZXhpdF9jYWxsYmFja3M6DQogICAgICAgICAgICBjYiA9IHNlbGYuX2V4aXRfY2FsbGJhY2tzLnBvcCgpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaWYgY2IoKmV4Y19kZXRhaWxzKToNCiAgICAgICAgICAgICAgICAgICAgc3VwcHJlc3NlZF9leGMgPSBUcnVlDQogICAgICAgICAgICAgICAgICAgIGV4Y19kZXRhaWxzID0gKE5vbmUsIE5vbmUsIE5vbmUpDQogICAgICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICAgICAgbmV3X2V4Y19kZXRhaWxzID0gc3lzLmV4Y19pbmZvKCkNCiAgICAgICAgICAgICAgICAjIHNpbXVsYXRlIHRoZSBzdGFjayBvZiBleGNlcHRpb25zIGJ5IHNldHRpbmcgdGhlIGNvbnRleHQNCiAgICAgICAgICAgICAgICBfZml4X2V4Y2VwdGlvbl9jb250ZXh0KG5ld19leGNfZGV0YWlsc1sxXSwgZXhjX2RldGFpbHNbMV0pDQogICAgICAgICAgICAgICAgaWYgbm90IHNlbGYuX2V4aXRfY2FsbGJhY2tzOg0KICAgICAgICAgICAgICAgICAgICByYWlzZQ0KICAgICAgICAgICAgICAgIGV4Y19kZXRhaWxzID0gbmV3X2V4Y19kZXRhaWxzDQogICAgICAgIHJldHVybiBzdXBwcmVzc2VkX2V4Yw0K',
'/Lib/abc.py':'IyBDb3B5cmlnaHQgMjAwNyBHb29nbGUsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KIyBMaWNlbnNlZCB0byBQU0YgdW5kZXIgYSBDb250cmlidXRvciBBZ3JlZW1lbnQuCgoiIiJBYnN0cmFjdCBCYXNlIENsYXNzZXMgKEFCQ3MpIGFjY29yZGluZyB0byBQRVAgMzExOS4iIiIKCmZyb20gX3dlYWtyZWZzZXQgaW1wb3J0IFdlYWtTZXQKCmRlZiBhYnN0cmFjdG1ldGhvZChmdW5jb2JqKToKICAgICIiIkEgZGVjb3JhdG9yIGluZGljYXRpbmcgYWJzdHJhY3QgbWV0aG9kcy4KCiAgICBSZXF1aXJlcyB0aGF0IHRoZSBtZXRhY2xhc3MgaXMgQUJDTWV0YSBvciBkZXJpdmVkIGZyb20gaXQuICBBCiAgICBjbGFzcyB0aGF0IGhhcyBhIG1ldGFjbGFzcyBkZXJpdmVkIGZyb20gQUJDTWV0YSBjYW5ub3QgYmUKICAgIGluc3RhbnRpYXRlZCB1bmxlc3MgYWxsIG9mIGl0cyBhYnN0cmFjdCBtZXRob2RzIGFyZSBvdmVycmlkZGVuLgogICAgVGhlIGFic3RyYWN0IG1ldGhvZHMgY2FuIGJlIGNhbGxlZCB1c2luZyBhbnkgb2YgdGhlIG5vcm1hbAogICAgJ3N1cGVyJyBjYWxsIG1lY2hhbmlzbXMuCgogICAgVXNhZ2U6CgogICAgICAgIGNsYXNzIEMobWV0YWNsYXNzPUFCQ01ldGEpOgogICAgICAgICAgICBAYWJzdHJhY3RtZXRob2QKICAgICAgICAgICAgZGVmIG15X2Fic3RyYWN0X21ldGhvZChzZWxmLCAuLi4pOgogICAgICAgICAgICAgICAgLi4uCiAgICAiIiIKICAgIGZ1bmNvYmouX19pc2Fic3RyYWN0bWV0aG9kX18gPSBUcnVlCiAgICByZXR1cm4gZnVuY29iagoKCmNsYXNzIGFic3RyYWN0Y2xhc3NtZXRob2QoY2xhc3NtZXRob2QpOgogICAgIiIiCiAgICBBIGRlY29yYXRvciBpbmRpY2F0aW5nIGFic3RyYWN0IGNsYXNzbWV0aG9kcy4KCiAgICBTaW1pbGFyIHRvIGFic3RyYWN0bWV0aG9kLgoKICAgIFVzYWdlOgoKICAgICAgICBjbGFzcyBDKG1ldGFjbGFzcz1BQkNNZXRhKToKICAgICAgICAgICAgQGFic3RyYWN0Y2xhc3NtZXRob2QKICAgICAgICAgICAgZGVmIG15X2Fic3RyYWN0X2NsYXNzbWV0aG9kKGNscywgLi4uKToKICAgICAgICAgICAgICAgIC4uLgoKICAgICdhYnN0cmFjdGNsYXNzbWV0aG9kJyBpcyBkZXByZWNhdGVkLiBVc2UgJ2NsYXNzbWV0aG9kJyB3aXRoCiAgICAnYWJzdHJhY3RtZXRob2QnIGluc3RlYWQuCiAgICAiIiIKCiAgICBfX2lzYWJzdHJhY3RtZXRob2RfXyA9IFRydWUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgY2FsbGFibGUpOgogICAgICAgIGNhbGxhYmxlLl9faXNhYnN0cmFjdG1ldGhvZF9fID0gVHJ1ZQogICAgICAgIHN1cGVyKCkuX19pbml0X18oY2FsbGFibGUpCgoKY2xhc3MgYWJzdHJhY3RzdGF0aWNtZXRob2Qoc3RhdGljbWV0aG9kKToKICAgICIiIgogICAgQSBkZWNvcmF0b3IgaW5kaWNhdGluZyBhYnN0cmFjdCBzdGF0aWNtZXRob2RzLgoKICAgIFNpbWlsYXIgdG8gYWJzdHJhY3RtZXRob2QuCgogICAgVXNhZ2U6CgogICAgICAgIGNsYXNzIEMobWV0YWNsYXNzPUFCQ01ldGEpOgogICAgICAgICAgICBAYWJzdHJhY3RzdGF0aWNtZXRob2QKICAgICAgICAgICAgZGVmIG15X2Fic3RyYWN0X3N0YXRpY21ldGhvZCguLi4pOgogICAgICAgICAgICAgICAgLi4uCgogICAgJ2Fic3RyYWN0c3RhdGljbWV0aG9kJyBpcyBkZXByZWNhdGVkLiBVc2UgJ3N0YXRpY21ldGhvZCcgd2l0aAogICAgJ2Fic3RyYWN0bWV0aG9kJyBpbnN0ZWFkLgogICAgIiIiCgogICAgX19pc2Fic3RyYWN0bWV0aG9kX18gPSBUcnVlCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGNhbGxhYmxlKToKICAgICAgICBjYWxsYWJsZS5fX2lzYWJzdHJhY3RtZXRob2RfXyA9IFRydWUKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGNhbGxhYmxlKQoKCmNsYXNzIGFic3RyYWN0cHJvcGVydHkocHJvcGVydHkpOgogICAgIiIiCiAgICBBIGRlY29yYXRvciBpbmRpY2F0aW5nIGFic3RyYWN0IHByb3BlcnRpZXMuCgogICAgUmVxdWlyZXMgdGhhdCB0aGUgbWV0YWNsYXNzIGlzIEFCQ01ldGEgb3IgZGVyaXZlZCBmcm9tIGl0LiAgQQogICAgY2xhc3MgdGhhdCBoYXMgYSBtZXRhY2xhc3MgZGVyaXZlZCBmcm9tIEFCQ01ldGEgY2Fubm90IGJlCiAgICBpbnN0YW50aWF0ZWQgdW5sZXNzIGFsbCBvZiBpdHMgYWJzdHJhY3QgcHJvcGVydGllcyBhcmUgb3ZlcnJpZGRlbi4KICAgIFRoZSBhYnN0cmFjdCBwcm9wZXJ0aWVzIGNhbiBiZSBjYWxsZWQgdXNpbmcgYW55IG9mIHRoZSBub3JtYWwKICAgICdzdXBlcicgY2FsbCBtZWNoYW5pc21zLgoKICAgIFVzYWdlOgoKICAgICAgICBjbGFzcyBDKG1ldGFjbGFzcz1BQkNNZXRhKToKICAgICAgICAgICAgQGFic3RyYWN0cHJvcGVydHkKICAgICAgICAgICAgZGVmIG15X2Fic3RyYWN0X3Byb3BlcnR5KHNlbGYpOgogICAgICAgICAgICAgICAgLi4uCgogICAgVGhpcyBkZWZpbmVzIGEgcmVhZC1vbmx5IHByb3BlcnR5OyB5b3UgY2FuIGFsc28gZGVmaW5lIGEgcmVhZC13cml0ZQogICAgYWJzdHJhY3QgcHJvcGVydHkgdXNpbmcgdGhlICdsb25nJyBmb3JtIG9mIHByb3BlcnR5IGRlY2xhcmF0aW9uOgoKICAgICAgICBjbGFzcyBDKG1ldGFjbGFzcz1BQkNNZXRhKToKICAgICAgICAgICAgZGVmIGdldHgoc2VsZik6IC4uLgogICAgICAgICAgICBkZWYgc2V0eChzZWxmLCB2YWx1ZSk6IC4uLgogICAgICAgICAgICB4ID0gYWJzdHJhY3Rwcm9wZXJ0eShnZXR4LCBzZXR4KQoKICAgICdhYnN0cmFjdHByb3BlcnR5JyBpcyBkZXByZWNhdGVkLiBVc2UgJ3Byb3BlcnR5JyB3aXRoICdhYnN0cmFjdG1ldGhvZCcKICAgIGluc3RlYWQuCiAgICAiIiIKCiAgICBfX2lzYWJzdHJhY3RtZXRob2RfXyA9IFRydWUKCgpjbGFzcyBBQkNNZXRhKHR5cGUpOgoKICAgICIiIk1ldGFjbGFzcyBmb3IgZGVmaW5pbmcgQWJzdHJhY3QgQmFzZSBDbGFzc2VzIChBQkNzKS4KCiAgICBVc2UgdGhpcyBtZXRhY2xhc3MgdG8gY3JlYXRlIGFuIEFCQy4gIEFuIEFCQyBjYW4gYmUgc3ViY2xhc3NlZAogICAgZGlyZWN0bHksIGFuZCB0aGVuIGFjdHMgYXMgYSBtaXgtaW4gY2xhc3MuICBZb3UgY2FuIGFsc28gcmVnaXN0ZXIKICAgIHVucmVsYXRlZCBjb25jcmV0ZSBjbGFzc2VzIChldmVuIGJ1aWx0LWluIGNsYXNzZXMpIGFuZCB1bnJlbGF0ZWQKICAgIEFCQ3MgYXMgJ3ZpcnR1YWwgc3ViY2xhc3NlcycgLS0gdGhlc2UgYW5kIHRoZWlyIGRlc2NlbmRhbnRzIHdpbGwKICAgIGJlIGNvbnNpZGVyZWQgc3ViY2xhc3NlcyBvZiB0aGUgcmVnaXN0ZXJpbmcgQUJDIGJ5IHRoZSBidWlsdC1pbgogICAgaXNzdWJjbGFzcygpIGZ1bmN0aW9uLCBidXQgdGhlIHJlZ2lzdGVyaW5nIEFCQyB3b24ndCBzaG93IHVwIGluCiAgICB0aGVpciBNUk8gKE1ldGhvZCBSZXNvbHV0aW9uIE9yZGVyKSBub3Igd2lsbCBtZXRob2QKICAgIGltcGxlbWVudGF0aW9ucyBkZWZpbmVkIGJ5IHRoZSByZWdpc3RlcmluZyBBQkMgYmUgY2FsbGFibGUgKG5vdAogICAgZXZlbiB2aWEgc3VwZXIoKSkuCgogICAgIiIiCgogICAgIyBBIGdsb2JhbCBjb3VudGVyIHRoYXQgaXMgaW5jcmVtZW50ZWQgZWFjaCB0aW1lIGEgY2xhc3MgaXMKICAgICMgcmVnaXN0ZXJlZCBhcyBhIHZpcnR1YWwgc3ViY2xhc3Mgb2YgYW55dGhpbmcuICBJdCBmb3JjZXMgdGhlCiAgICAjIG5lZ2F0aXZlIGNhY2hlIHRvIGJlIGNsZWFyZWQgYmVmb3JlIGl0cyBuZXh0IHVzZS4KICAgIF9hYmNfaW52YWxpZGF0aW9uX2NvdW50ZXIgPSAwCgogICAgZGVmIF9fbmV3X18obWNscywgbmFtZSwgYmFzZXMsIG5hbWVzcGFjZSk6CiAgICAgICAgY2xzID0gc3VwZXIoKS5fX25ld19fKG1jbHMsIG5hbWUsIGJhc2VzLCBuYW1lc3BhY2UpCiAgICAgICAgIyBDb21wdXRlIHNldCBvZiBhYnN0cmFjdCBtZXRob2QgbmFtZXMKICAgICAgICBhYnN0cmFjdHMgPSB7bmFtZQogICAgICAgICAgICAgICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gbmFtZXNwYWNlLml0ZW1zKCkKICAgICAgICAgICAgICAgICAgICAgaWYgZ2V0YXR0cih2YWx1ZSwgIl9faXNhYnN0cmFjdG1ldGhvZF9fIiwgRmFsc2UpfQogICAgICAgIGZvciBiYXNlIGluIGJhc2VzOgogICAgICAgICAgICBfbmFtZXMgPSBnZXRhdHRyKGJhc2UsIl9fYWJzdHJhY3RtZXRob2RzX18iLHNldCgpKQogICAgICAgICAgICBmb3IgbmFtZSBpbiBnZXRhdHRyKGJhc2UsICJfX2Fic3RyYWN0bWV0aG9kc19fIiwgc2V0KCkpOgogICAgICAgICAgICAgICAgdmFsdWUgPSBnZXRhdHRyKGNscywgbmFtZSwgTm9uZSkKICAgICAgICAgICAgICAgIGlmIGdldGF0dHIodmFsdWUsICJfX2lzYWJzdHJhY3RtZXRob2RfXyIsIEZhbHNlKToKICAgICAgICAgICAgICAgICAgICBhYnN0cmFjdHMuYWRkKG5hbWUpCiAgICAgICAgY2xzLl9fYWJzdHJhY3RtZXRob2RzX18gPSBmcm96ZW5zZXQoYWJzdHJhY3RzKQogICAgICAgICMgU2V0IHVwIGluaGVyaXRhbmNlIHJlZ2lzdHJ5CiAgICAgICAgY2xzLl9hYmNfcmVnaXN0cnkgPSBXZWFrU2V0KCkKICAgICAgICBjbHMuX2FiY19jYWNoZSA9IFdlYWtTZXQoKQogICAgICAgIGNscy5fYWJjX25lZ2F0aXZlX2NhY2hlID0gV2Vha1NldCgpCiAgICAgICAgY2xzLl9hYmNfbmVnYXRpdmVfY2FjaGVfdmVyc2lvbiA9IEFCQ01ldGEuX2FiY19pbnZhbGlkYXRpb25fY291bnRlcgogICAgICAgIHJldHVybiBjbHMKCiAgICBkZWYgcmVnaXN0ZXIoY2xzLCBzdWJjbGFzcyk6CiAgICAgICAgIiIiUmVnaXN0ZXIgYSB2aXJ0dWFsIHN1YmNsYXNzIG9mIGFuIEFCQy4KCiAgICAgICAgUmV0dXJucyB0aGUgc3ViY2xhc3MsIHRvIGFsbG93IHVzYWdlIGFzIGEgY2xhc3MgZGVjb3JhdG9yLgogICAgICAgICIiIgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHN1YmNsYXNzLCB0eXBlKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJDYW4gb25seSByZWdpc3RlciBjbGFzc2VzIikKICAgICAgICBpZiBpc3N1YmNsYXNzKHN1YmNsYXNzLCBjbHMpOgogICAgICAgICAgICByZXR1cm4gc3ViY2xhc3MgICMgQWxyZWFkeSBhIHN1YmNsYXNzCiAgICAgICAgIyBTdWJ0bGU6IHRlc3QgZm9yIGN5Y2xlcyAqYWZ0ZXIqIHRlc3RpbmcgZm9yICJhbHJlYWR5IGEgc3ViY2xhc3MiOwogICAgICAgICMgdGhpcyBtZWFucyB3ZSBhbGxvdyBYLnJlZ2lzdGVyKFgpIGFuZCBpbnRlcnByZXQgaXQgYXMgYSBuby1vcC4KICAgICAgICBpZiBpc3N1YmNsYXNzKGNscywgc3ViY2xhc3MpOgogICAgICAgICAgICAjIFRoaXMgd291bGQgY3JlYXRlIGEgY3ljbGUsIHdoaWNoIGlzIGJhZCBmb3IgdGhlIGFsZ29yaXRobSBiZWxvdwogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIlJlZnVzaW5nIHRvIGNyZWF0ZSBhbiBpbmhlcml0YW5jZSBjeWNsZSIpCiAgICAgICAgY2xzLl9hYmNfcmVnaXN0cnkuYWRkKHN1YmNsYXNzKQogICAgICAgIEFCQ01ldGEuX2FiY19pbnZhbGlkYXRpb25fY291bnRlciArPSAxICAjIEludmFsaWRhdGUgbmVnYXRpdmUgY2FjaGUKICAgICAgICByZXR1cm4gc3ViY2xhc3MKCiAgICBkZWYgX2R1bXBfcmVnaXN0cnkoY2xzLCBmaWxlPU5vbmUpOgogICAgICAgICIiIkRlYnVnIGhlbHBlciB0byBwcmludCB0aGUgQUJDIHJlZ2lzdHJ5LiIiIgogICAgICAgIHByaW50KCJDbGFzczogJXMuJXMiICUgKGNscy5fX21vZHVsZV9fLCBjbHMuX19uYW1lX18pLCBmaWxlPWZpbGUpCiAgICAgICAgcHJpbnQoIkludi5jb3VudGVyOiAlcyIgJSBBQkNNZXRhLl9hYmNfaW52YWxpZGF0aW9uX2NvdW50ZXIsIGZpbGU9ZmlsZSkKICAgICAgICBmb3IgbmFtZSBpbiBzb3J0ZWQoY2xzLl9fZGljdF9fLmtleXMoKSk6CiAgICAgICAgICAgIGlmIG5hbWUuc3RhcnRzd2l0aCgiX2FiY18iKToKICAgICAgICAgICAgICAgIHZhbHVlID0gZ2V0YXR0cihjbHMsIG5hbWUpCiAgICAgICAgICAgICAgICBwcmludCgiJXM6ICVyIiAlIChuYW1lLCB2YWx1ZSksIGZpbGU9ZmlsZSkKCiAgICBkZWYgX19pbnN0YW5jZWNoZWNrX18oY2xzLCBpbnN0YW5jZSk6CiAgICAgICAgIiIiT3ZlcnJpZGUgZm9yIGlzaW5zdGFuY2UoaW5zdGFuY2UsIGNscykuIiIiCiAgICAgICAgIyBJbmxpbmUgdGhlIGNhY2hlIGNoZWNraW5nCiAgICAgICAgc3ViY2xhc3MgPSBpbnN0YW5jZS5fX2NsYXNzX18KICAgICAgICBpZiBzdWJjbGFzcyBpbiBjbHMuX2FiY19jYWNoZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBzdWJ0eXBlID0gdHlwZShpbnN0YW5jZSkKICAgICAgICBpZiBzdWJ0eXBlIGlzIHN1YmNsYXNzOgogICAgICAgICAgICBpZiAoY2xzLl9hYmNfbmVnYXRpdmVfY2FjaGVfdmVyc2lvbiA9PQogICAgICAgICAgICAgICAgQUJDTWV0YS5fYWJjX2ludmFsaWRhdGlvbl9jb3VudGVyIGFuZAogICAgICAgICAgICAgICAgc3ViY2xhc3MgaW4gY2xzLl9hYmNfbmVnYXRpdmVfY2FjaGUpOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICMgRmFsbCBiYWNrIHRvIHRoZSBzdWJjbGFzcyBjaGVjay4KICAgICAgICAgICAgcmV0dXJuIGNscy5fX3N1YmNsYXNzY2hlY2tfXyhzdWJjbGFzcykKICAgICAgICByZXR1cm4gYW55KGNscy5fX3N1YmNsYXNzY2hlY2tfXyhjKSBmb3IgYyBpbiB7c3ViY2xhc3MsIHN1YnR5cGV9KQoKICAgIGRlZiBfX3N1YmNsYXNzY2hlY2tfXyhjbHMsIHN1YmNsYXNzKToKICAgICAgICAiIiJPdmVycmlkZSBmb3IgaXNzdWJjbGFzcyhzdWJjbGFzcywgY2xzKS4iIiIKICAgICAgICAjIENoZWNrIGNhY2hlCiAgICAgICAgaWYgc3ViY2xhc3MgaW4gY2xzLl9hYmNfY2FjaGU6CiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgIyBDaGVjayBuZWdhdGl2ZSBjYWNoZTsgbWF5IGhhdmUgdG8gaW52YWxpZGF0ZQogICAgICAgIGlmIGNscy5fYWJjX25lZ2F0aXZlX2NhY2hlX3ZlcnNpb24gPCBBQkNNZXRhLl9hYmNfaW52YWxpZGF0aW9uX2NvdW50ZXI6CiAgICAgICAgICAgICMgSW52YWxpZGF0ZSB0aGUgbmVnYXRpdmUgY2FjaGUKICAgICAgICAgICAgY2xzLl9hYmNfbmVnYXRpdmVfY2FjaGUgPSBXZWFrU2V0KCkKICAgICAgICAgICAgY2xzLl9hYmNfbmVnYXRpdmVfY2FjaGVfdmVyc2lvbiA9IEFCQ01ldGEuX2FiY19pbnZhbGlkYXRpb25fY291bnRlcgogICAgICAgIGVsaWYgc3ViY2xhc3MgaW4gY2xzLl9hYmNfbmVnYXRpdmVfY2FjaGU6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICMgQ2hlY2sgdGhlIHN1YmNsYXNzIGhvb2sKICAgICAgICBvayA9IGNscy5fX3N1YmNsYXNzaG9va19fKHN1YmNsYXNzKQogICAgICAgIGlmIG9rIGlzIG5vdCBOb3RJbXBsZW1lbnRlZDoKICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uob2ssIGJvb2wpCiAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgY2xzLl9hYmNfY2FjaGUuYWRkKHN1YmNsYXNzKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY2xzLl9hYmNfbmVnYXRpdmVfY2FjaGUuYWRkKHN1YmNsYXNzKQogICAgICAgICAgICByZXR1cm4gb2sKICAgICAgICAjIENoZWNrIGlmIGl0J3MgYSBkaXJlY3Qgc3ViY2xhc3MKICAgICAgICBpZiBjbHMgaW4gZ2V0YXR0cihzdWJjbGFzcywgJ19fbXJvX18nLCAoKSk6CiAgICAgICAgICAgIGNscy5fYWJjX2NhY2hlLmFkZChzdWJjbGFzcykKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAjIENoZWNrIGlmIGl0J3MgYSBzdWJjbGFzcyBvZiBhIHJlZ2lzdGVyZWQgY2xhc3MgKHJlY3Vyc2l2ZSkKICAgICAgICBmb3IgcmNscyBpbiBjbHMuX2FiY19yZWdpc3RyeToKICAgICAgICAgICAgaWYgaXNzdWJjbGFzcyhzdWJjbGFzcywgcmNscyk6CiAgICAgICAgICAgICAgICBjbHMuX2FiY19jYWNoZS5hZGQoc3ViY2xhc3MpCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICMgQ2hlY2sgaWYgaXQncyBhIHN1YmNsYXNzIG9mIGEgc3ViY2xhc3MgKHJlY3Vyc2l2ZSkKICAgICAgICBmb3Igc2NscyBpbiBjbHMuX19zdWJjbGFzc2VzX18oKToKICAgICAgICAgICAgaWYgaXNzdWJjbGFzcyhzdWJjbGFzcywgc2Nscyk6CiAgICAgICAgICAgICAgICBjbHMuX2FiY19jYWNoZS5hZGQoc3ViY2xhc3MpCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICMgTm8gZGljZTsgdXBkYXRlIG5lZ2F0aXZlIGNhY2hlCiAgICAgICAgY2xzLl9hYmNfbmVnYXRpdmVfY2FjaGUuYWRkKHN1YmNsYXNzKQogICAgICAgIHJldHVybiBGYWxzZQo=',
'/Lib/functools.py':'IiIiZnVuY3Rvb2xzLnB5IC0gVG9vbHMgZm9yIHdvcmtpbmcgd2l0aCBmdW5jdGlvbnMgYW5kIGNhbGxhYmxlIG9iamVjdHMKIiIiCiMgUHl0aG9uIG1vZHVsZSB3cmFwcGVyIGZvciBfZnVuY3Rvb2xzIEMgbW9kdWxlCiMgdG8gYWxsb3cgdXRpbGl0aWVzIHdyaXR0ZW4gaW4gUHl0aG9uIHRvIGJlIGFkZGVkCiMgdG8gdGhlIGZ1bmN0b29scyBtb2R1bGUuCiMgV3JpdHRlbiBieSBOaWNrIENvZ2hsYW4gPG5jb2dobGFuIGF0IGdtYWlsLmNvbT4KIyBhbmQgUmF5bW9uZCBIZXR0aW5nZXIgPHB5dGhvbiBhdCByY24uY29tPgojICAgQ29weXJpZ2h0IChDKSAyMDA2LTIwMTAgUHl0aG9uIFNvZnR3YXJlIEZvdW5kYXRpb24uCiMgU2VlIEMgc291cmNlIGNvZGUgZm9yIF9mdW5jdG9vbHMgY3JlZGl0cy9jb3B5cmlnaHQKCl9fYWxsX18gPSBbJ3VwZGF0ZV93cmFwcGVyJywgJ3dyYXBzJywgJ1dSQVBQRVJfQVNTSUdOTUVOVFMnLCAnV1JBUFBFUl9VUERBVEVTJywKICAgICAgICAgICAndG90YWxfb3JkZXJpbmcnLCAnY21wX3RvX2tleScsICdscnVfY2FjaGUnLCAncmVkdWNlJywgJ3BhcnRpYWwnXQoKZnJvbSBfZnVuY3Rvb2xzIGltcG9ydCBwYXJ0aWFsLCByZWR1Y2UKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgbmFtZWR0dXBsZQp0cnk6CiAgICBmcm9tIF90aHJlYWQgaW1wb3J0IGFsbG9jYXRlX2xvY2sgYXMgTG9jawpleGNlcHQ6CiAgICBmcm9tIF9kdW1teV90aHJlYWQgaW1wb3J0IGFsbG9jYXRlX2xvY2sgYXMgTG9jawoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyB1cGRhdGVfd3JhcHBlcigpIGFuZCB3cmFwcygpIGRlY29yYXRvcgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyB1cGRhdGVfd3JhcHBlcigpIGFuZCB3cmFwcygpIGFyZSB0b29scyB0byBoZWxwIHdyaXRlCiMgd3JhcHBlciBmdW5jdGlvbnMgdGhhdCBjYW4gaGFuZGxlIG5haXZlIGludHJvc3BlY3Rpb24KCldSQVBQRVJfQVNTSUdOTUVOVFMgPSAoJ19fbW9kdWxlX18nLCAnX19uYW1lX18nLCAnX19xdWFsbmFtZV9fJywgJ19fZG9jX18nLAogICAgICAgICAgICAgICAgICAgICAgICdfX2Fubm90YXRpb25zX18nKQpXUkFQUEVSX1VQREFURVMgPSAoJ19fZGljdF9fJywpCmRlZiB1cGRhdGVfd3JhcHBlcih3cmFwcGVyLAogICAgICAgICAgICAgICAgICAgd3JhcHBlZCwKICAgICAgICAgICAgICAgICAgIGFzc2lnbmVkID0gV1JBUFBFUl9BU1NJR05NRU5UUywKICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQgPSBXUkFQUEVSX1VQREFURVMpOgogICAgIiIiVXBkYXRlIGEgd3JhcHBlciBmdW5jdGlvbiB0byBsb29rIGxpa2UgdGhlIHdyYXBwZWQgZnVuY3Rpb24KCiAgICAgICB3cmFwcGVyIGlzIHRoZSBmdW5jdGlvbiB0byBiZSB1cGRhdGVkCiAgICAgICB3cmFwcGVkIGlzIHRoZSBvcmlnaW5hbCBmdW5jdGlvbgogICAgICAgYXNzaWduZWQgaXMgYSB0dXBsZSBuYW1pbmcgdGhlIGF0dHJpYnV0ZXMgYXNzaWduZWQgZGlyZWN0bHkKICAgICAgIGZyb20gdGhlIHdyYXBwZWQgZnVuY3Rpb24gdG8gdGhlIHdyYXBwZXIgZnVuY3Rpb24gKGRlZmF1bHRzIHRvCiAgICAgICBmdW5jdG9vbHMuV1JBUFBFUl9BU1NJR05NRU5UUykKICAgICAgIHVwZGF0ZWQgaXMgYSB0dXBsZSBuYW1pbmcgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIHdyYXBwZXIgdGhhdAogICAgICAgYXJlIHVwZGF0ZWQgd2l0aCB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGUgZnJvbSB0aGUgd3JhcHBlZAogICAgICAgZnVuY3Rpb24gKGRlZmF1bHRzIHRvIGZ1bmN0b29scy5XUkFQUEVSX1VQREFURVMpCiAgICAiIiIKICAgIHdyYXBwZXIuX193cmFwcGVkX18gPSB3cmFwcGVkCiAgICBmb3IgYXR0ciBpbiBhc3NpZ25lZDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHZhbHVlID0gZ2V0YXR0cih3cmFwcGVkLCBhdHRyKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNldGF0dHIod3JhcHBlciwgYXR0ciwgdmFsdWUpCiAgICBmb3IgYXR0ciBpbiB1cGRhdGVkOgogICAgICAgIGdldGF0dHIod3JhcHBlciwgYXR0cikudXBkYXRlKGdldGF0dHIod3JhcHBlZCwgYXR0ciwge30pKQogICAgIyBSZXR1cm4gdGhlIHdyYXBwZXIgc28gdGhpcyBjYW4gYmUgdXNlZCBhcyBhIGRlY29yYXRvciB2aWEgcGFydGlhbCgpCiAgICByZXR1cm4gd3JhcHBlcgoKZGVmIHdyYXBzKHdyYXBwZWQsCiAgICAgICAgICBhc3NpZ25lZCA9IFdSQVBQRVJfQVNTSUdOTUVOVFMsCiAgICAgICAgICB1cGRhdGVkID0gV1JBUFBFUl9VUERBVEVTKToKICAgICIiIkRlY29yYXRvciBmYWN0b3J5IHRvIGFwcGx5IHVwZGF0ZV93cmFwcGVyKCkgdG8gYSB3cmFwcGVyIGZ1bmN0aW9uCgogICAgICAgUmV0dXJucyBhIGRlY29yYXRvciB0aGF0IGludm9rZXMgdXBkYXRlX3dyYXBwZXIoKSB3aXRoIHRoZSBkZWNvcmF0ZWQKICAgICAgIGZ1bmN0aW9uIGFzIHRoZSB3cmFwcGVyIGFyZ3VtZW50IGFuZCB0aGUgYXJndW1lbnRzIHRvIHdyYXBzKCkgYXMgdGhlCiAgICAgICByZW1haW5pbmcgYXJndW1lbnRzLiBEZWZhdWx0IGFyZ3VtZW50cyBhcmUgYXMgZm9yIHVwZGF0ZV93cmFwcGVyKCkuCiAgICAgICBUaGlzIGlzIGEgY29udmVuaWVuY2UgZnVuY3Rpb24gdG8gc2ltcGxpZnkgYXBwbHlpbmcgcGFydGlhbCgpIHRvCiAgICAgICB1cGRhdGVfd3JhcHBlcigpLgogICAgIiIiCiAgICByZXR1cm4gcGFydGlhbCh1cGRhdGVfd3JhcHBlciwgd3JhcHBlZD13cmFwcGVkLAogICAgICAgICAgICAgICAgICAgYXNzaWduZWQ9YXNzaWduZWQsIHVwZGF0ZWQ9dXBkYXRlZCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgdG90YWxfb3JkZXJpbmcgY2xhc3MgZGVjb3JhdG9yCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWYgdG90YWxfb3JkZXJpbmcoY2xzKToKICAgICIiIkNsYXNzIGRlY29yYXRvciB0aGF0IGZpbGxzIGluIG1pc3Npbmcgb3JkZXJpbmcgbWV0aG9kcyIiIgogICAgY29udmVydCA9IHsKICAgICAgICAnX19sdF9fJzogWygnX19ndF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3QgKHNlbGYgPCBvdGhlciBvciBzZWxmID09IG90aGVyKSksCiAgICAgICAgICAgICAgICAgICAoJ19fbGVfXycsIGxhbWJkYSBzZWxmLCBvdGhlcjogc2VsZiA8IG90aGVyIG9yIHNlbGYgPT0gb3RoZXIpLAogICAgICAgICAgICAgICAgICAgKCdfX2dlX18nLCBsYW1iZGEgc2VsZiwgb3RoZXI6IG5vdCBzZWxmIDwgb3RoZXIpXSwKICAgICAgICAnX19sZV9fJzogWygnX19nZV9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3Qgc2VsZiA8PSBvdGhlciBvciBzZWxmID09IG90aGVyKSwKICAgICAgICAgICAgICAgICAgICgnX19sdF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBzZWxmIDw9IG90aGVyIGFuZCBub3Qgc2VsZiA9PSBvdGhlciksCiAgICAgICAgICAgICAgICAgICAoJ19fZ3RfXycsIGxhbWJkYSBzZWxmLCBvdGhlcjogbm90IHNlbGYgPD0gb3RoZXIpXSwKICAgICAgICAnX19ndF9fJzogWygnX19sdF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3QgKHNlbGYgPiBvdGhlciBvciBzZWxmID09IG90aGVyKSksCiAgICAgICAgICAgICAgICAgICAoJ19fZ2VfXycsIGxhbWJkYSBzZWxmLCBvdGhlcjogc2VsZiA+IG90aGVyIG9yIHNlbGYgPT0gb3RoZXIpLAogICAgICAgICAgICAgICAgICAgKCdfX2xlX18nLCBsYW1iZGEgc2VsZiwgb3RoZXI6IG5vdCBzZWxmID4gb3RoZXIpXSwKICAgICAgICAnX19nZV9fJzogWygnX19sZV9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiAobm90IHNlbGYgPj0gb3RoZXIpIG9yIHNlbGYgPT0gb3RoZXIpLAogICAgICAgICAgICAgICAgICAgKCdfX2d0X18nLCBsYW1iZGEgc2VsZiwgb3RoZXI6IHNlbGYgPj0gb3RoZXIgYW5kIG5vdCBzZWxmID09IG90aGVyKSwKICAgICAgICAgICAgICAgICAgICgnX19sdF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3Qgc2VsZiA+PSBvdGhlcildCiAgICB9CiAgICAjIEZpbmQgdXNlci1kZWZpbmVkIGNvbXBhcmlzb25zIChub3QgdGhvc2UgaW5oZXJpdGVkIGZyb20gb2JqZWN0KS4KICAgIHJvb3RzID0gW29wIGZvciBvcCBpbiBjb252ZXJ0IGlmIGdldGF0dHIoY2xzLCBvcCwgTm9uZSkgaXMgbm90IGdldGF0dHIob2JqZWN0LCBvcCwgTm9uZSldCiAgICBpZiBub3Qgcm9vdHM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbXVzdCBkZWZpbmUgYXQgbGVhc3Qgb25lIG9yZGVyaW5nIG9wZXJhdGlvbjogPCA+IDw9ID49JykKICAgIHJvb3QgPSBtYXgocm9vdHMpICAgICAgICMgcHJlZmVyIF9fbHRfXyB0byBfX2xlX18gdG8gX19ndF9fIHRvIF9fZ2VfXwogICAgZm9yIG9wbmFtZSwgb3BmdW5jIGluIGNvbnZlcnRbcm9vdF06CiAgICAgICAgaWYgb3BuYW1lIG5vdCBpbiByb290czoKICAgICAgICAgICAgb3BmdW5jLl9fbmFtZV9fID0gb3BuYW1lCiAgICAgICAgICAgIG9wZnVuYy5fX2RvY19fID0gZ2V0YXR0cihpbnQsIG9wbmFtZSkuX19kb2NfXwogICAgICAgICAgICBzZXRhdHRyKGNscywgb3BuYW1lLCBvcGZ1bmMpCiAgICByZXR1cm4gY2xzCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIGNtcF90b19rZXkoKSBmdW5jdGlvbiBjb252ZXJ0ZXIKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZiBjbXBfdG9fa2V5KG15Y21wKToKICAgICIiIkNvbnZlcnQgYSBjbXA9IGZ1bmN0aW9uIGludG8gYSBrZXk9IGZ1bmN0aW9uIiIiCiAgICBjbGFzcyBLKG9iamVjdCk6CiAgICAgICAgX19zbG90c19fID0gWydvYmonXQogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvYmopOgogICAgICAgICAgICBzZWxmLm9iaiA9IG9iagogICAgICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgICAgICByZXR1cm4gbXljbXAoc2VsZi5vYmosIG90aGVyLm9iaikgPCAwCiAgICAgICAgZGVmIF9fZ3RfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgICAgIHJldHVybiBteWNtcChzZWxmLm9iaiwgb3RoZXIub2JqKSA+IDAKICAgICAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopID09IDAKICAgICAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopIDw9IDAKICAgICAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopID49IDAKICAgICAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopICE9IDAKICAgICAgICBfX2hhc2hfXyA9IE5vbmUKICAgIHJldHVybiBLCgp0cnk6CiAgICBmcm9tIF9mdW5jdG9vbHMgaW1wb3J0IGNtcF90b19rZXkKZXhjZXB0IEltcG9ydEVycm9yOgogICAgcGFzcwoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyBMUlUgQ2FjaGUgZnVuY3Rpb24gZGVjb3JhdG9yCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpfQ2FjaGVJbmZvID0gbmFtZWR0dXBsZSgiQ2FjaGVJbmZvIiwgWyJoaXRzIiwgIm1pc3NlcyIsICJtYXhzaXplIiwgImN1cnJzaXplIl0pCgpjbGFzcyBfSGFzaGVkU2VxKGxpc3QpOgogICAgX19zbG90c19fID0gJ2hhc2h2YWx1ZScKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdHVwLCBoYXNoPWhhc2gpOgogICAgICAgIHNlbGZbOl0gPSB0dXAKICAgICAgICBzZWxmLmhhc2h2YWx1ZSA9IGhhc2godHVwKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5oYXNodmFsdWUKCmRlZiBfbWFrZV9rZXkoYXJncywga3dkcywgdHlwZWQsCiAgICAgICAgICAgICBrd2RfbWFyayA9IChvYmplY3QoKSwpLAogICAgICAgICAgICAgZmFzdHR5cGVzID0ge2ludCwgc3RyLCBmcm96ZW5zZXQsIHR5cGUoTm9uZSl9LAogICAgICAgICAgICAgc29ydGVkPXNvcnRlZCwgdHVwbGU9dHVwbGUsIHR5cGU9dHlwZSwgbGVuPWxlbik6CiAgICAnTWFrZSBhIGNhY2hlIGtleSBmcm9tIG9wdGlvbmFsbHkgdHlwZWQgcG9zaXRpb25hbCBhbmQga2V5d29yZCBhcmd1bWVudHMnCiAgICBrZXkgPSBhcmdzCiAgICBpZiBrd2RzOgogICAgICAgIHNvcnRlZF9pdGVtcyA9IHNvcnRlZChrd2RzLml0ZW1zKCkpCiAgICAgICAga2V5ICs9IGt3ZF9tYXJrCiAgICAgICAgZm9yIGl0ZW0gaW4gc29ydGVkX2l0ZW1zOgogICAgICAgICAgICBrZXkgKz0gaXRlbQogICAgaWYgdHlwZWQ6CiAgICAgICAga2V5ICs9IHR1cGxlKHR5cGUodikgZm9yIHYgaW4gYXJncykKICAgICAgICBpZiBrd2RzOgogICAgICAgICAgICBrZXkgKz0gdHVwbGUodHlwZSh2KSBmb3IgaywgdiBpbiBzb3J0ZWRfaXRlbXMpCiAgICBlbGlmIGxlbihrZXkpID09IDEgYW5kIHR5cGUoa2V5WzBdKSBpbiBmYXN0dHlwZXM6CiAgICAgICAgcmV0dXJuIGtleVswXQogICAgcmV0dXJuIF9IYXNoZWRTZXEoa2V5KQoKZGVmIGxydV9jYWNoZShtYXhzaXplPTEyOCwgdHlwZWQ9RmFsc2UpOgogICAgIiIiTGVhc3QtcmVjZW50bHktdXNlZCBjYWNoZSBkZWNvcmF0b3IuCgogICAgSWYgKm1heHNpemUqIGlzIHNldCB0byBOb25lLCB0aGUgTFJVIGZlYXR1cmVzIGFyZSBkaXNhYmxlZCBhbmQgdGhlIGNhY2hlCiAgICBjYW4gZ3JvdyB3aXRob3V0IGJvdW5kLgoKICAgIElmICp0eXBlZCogaXMgVHJ1ZSwgYXJndW1lbnRzIG9mIGRpZmZlcmVudCB0eXBlcyB3aWxsIGJlIGNhY2hlZCBzZXBhcmF0ZWx5LgogICAgRm9yIGV4YW1wbGUsIGYoMy4wKSBhbmQgZigzKSB3aWxsIGJlIHRyZWF0ZWQgYXMgZGlzdGluY3QgY2FsbHMgd2l0aAogICAgZGlzdGluY3QgcmVzdWx0cy4KCiAgICBBcmd1bWVudHMgdG8gdGhlIGNhY2hlZCBmdW5jdGlvbiBtdXN0IGJlIGhhc2hhYmxlLgoKICAgIFZpZXcgdGhlIGNhY2hlIHN0YXRpc3RpY3MgbmFtZWQgdHVwbGUgKGhpdHMsIG1pc3NlcywgbWF4c2l6ZSwgY3VycnNpemUpCiAgICB3aXRoIGYuY2FjaGVfaW5mbygpLiAgQ2xlYXIgdGhlIGNhY2hlIGFuZCBzdGF0aXN0aWNzIHdpdGggZi5jYWNoZV9jbGVhcigpLgogICAgQWNjZXNzIHRoZSB1bmRlcmx5aW5nIGZ1bmN0aW9uIHdpdGggZi5fX3dyYXBwZWRfXy4KCiAgICBTZWU6ICBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NhY2hlX2FsZ29yaXRobXMjTGVhc3RfUmVjZW50bHlfVXNlZAoKICAgICIiIgoKICAgICMgVXNlcnMgc2hvdWxkIG9ubHkgYWNjZXNzIHRoZSBscnVfY2FjaGUgdGhyb3VnaCBpdHMgcHVibGljIEFQSToKICAgICMgICAgICAgY2FjaGVfaW5mbywgY2FjaGVfY2xlYXIsIGFuZCBmLl9fd3JhcHBlZF9fCiAgICAjIFRoZSBpbnRlcm5hbHMgb2YgdGhlIGxydV9jYWNoZSBhcmUgZW5jYXBzdWxhdGVkIGZvciB0aHJlYWQgc2FmZXR5IGFuZAogICAgIyB0byBhbGxvdyB0aGUgaW1wbGVtZW50YXRpb24gdG8gY2hhbmdlIChpbmNsdWRpbmcgYSBwb3NzaWJsZSBDIHZlcnNpb24pLgoKICAgICMgQ29uc3RhbnRzIHNoYXJlZCBieSBhbGwgbHJ1IGNhY2hlIGluc3RhbmNlczoKICAgIHNlbnRpbmVsID0gb2JqZWN0KCkgICAgICAgICAgIyB1bmlxdWUgb2JqZWN0IHVzZWQgdG8gc2lnbmFsIGNhY2hlIG1pc3NlcwogICAgbWFrZV9rZXkgPSBfbWFrZV9rZXkgICAgICAgICAjIGJ1aWxkIGEga2V5IGZyb20gdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cwogICAgUFJFViwgTkVYVCwgS0VZLCBSRVNVTFQgPSAwLCAxLCAyLCAzICAgIyBuYW1lcyBmb3IgdGhlIGxpbmsgZmllbGRzCgogICAgZGVmIGRlY29yYXRpbmdfZnVuY3Rpb24odXNlcl9mdW5jdGlvbik6CgogICAgICAgIGNhY2hlID0ge30KICAgICAgICBoaXRzID0gbWlzc2VzID0gY3VycnNpemUgPSAwCiAgICAgICAgZnVsbCA9IEZhbHNlCiAgICAgICAgY2FjaGVfZ2V0ID0gY2FjaGUuZ2V0ICAgICMgYm91bmQgbWV0aG9kIHRvIGxvb2t1cCBhIGtleSBvciByZXR1cm4gTm9uZQogICAgICAgIGxvY2sgPSBMb2NrKCkgICAgICAgICAgICAjIGJlY2F1c2UgbGlua2VkbGlzdCB1cGRhdGVzIGFyZW4ndCB0aHJlYWRzYWZlCiAgICAgICAgcm9vdCA9IFtdICAgICAgICAgICAgICAgICMgcm9vdCBvZiB0aGUgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0CiAgICAgICAgcm9vdFs6XSA9IFtyb290LCByb290LCBOb25lLCBOb25lXSAgICAgIyBpbml0aWFsaXplIGJ5IHBvaW50aW5nIHRvIHNlbGYKCiAgICAgICAgaWYgbWF4c2l6ZSA9PSAwOgoKICAgICAgICAgICAgZGVmIHdyYXBwZXIoKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgICAgICAgICAjIG5vIGNhY2hpbmcsIGp1c3QgYSBzdGF0aXN0aWNzIHVwZGF0ZSBhZnRlciBhIHN1Y2Nlc3NmdWwgY2FsbAogICAgICAgICAgICAgICAgbm9ubG9jYWwgbWlzc2VzCiAgICAgICAgICAgICAgICByZXN1bHQgPSB1c2VyX2Z1bmN0aW9uKCphcmdzLCAqKmt3ZHMpCiAgICAgICAgICAgICAgICBtaXNzZXMgKz0gMQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgICAgICBlbGlmIG1heHNpemUgaXMgTm9uZToKCiAgICAgICAgICAgIGRlZiB3cmFwcGVyKCphcmdzLCAqKmt3ZHMpOgogICAgICAgICAgICAgICAgIyBzaW1wbGUgY2FjaGluZyB3aXRob3V0IG9yZGVyaW5nIG9yIHNpemUgbGltaXQKICAgICAgICAgICAgICAgIG5vbmxvY2FsIGhpdHMsIG1pc3NlcywgY3VycnNpemUKICAgICAgICAgICAgICAgIGtleSA9IG1ha2Vfa2V5KGFyZ3MsIGt3ZHMsIHR5cGVkKQogICAgICAgICAgICAgICAgcmVzdWx0ID0gY2FjaGVfZ2V0KGtleSwgc2VudGluZWwpCiAgICAgICAgICAgICAgICBpZiByZXN1bHQgaXMgbm90IHNlbnRpbmVsOgogICAgICAgICAgICAgICAgICAgIGhpdHMgKz0gMQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHVzZXJfZnVuY3Rpb24oKmFyZ3MsICoqa3dkcykKICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSByZXN1bHQKICAgICAgICAgICAgICAgIG1pc3NlcyArPSAxCiAgICAgICAgICAgICAgICBjdXJyc2l6ZSArPSAxCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgICAgIGVsc2U6CgogICAgICAgICAgICBkZWYgd3JhcHBlcigqYXJncywgKiprd2RzKToKICAgICAgICAgICAgICAgICMgc2l6ZSBsaW1pdGVkIGNhY2hpbmcgdGhhdCB0cmFja3MgYWNjZXNzZXMgYnkgcmVjZW5jeQogICAgICAgICAgICAgICAgbm9ubG9jYWwgcm9vdCwgaGl0cywgbWlzc2VzLCBjdXJyc2l6ZSwgZnVsbAogICAgICAgICAgICAgICAga2V5ID0gbWFrZV9rZXkoYXJncywga3dkcywgdHlwZWQpCiAgICAgICAgICAgICAgICB3aXRoIGxvY2s6CiAgICAgICAgICAgICAgICAgICAgbGluayA9IGNhY2hlX2dldChrZXkpCiAgICAgICAgICAgICAgICAgICAgaWYgbGluayBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgIyBtb3ZlIHRoZSBsaW5rIHRvIHRoZSBmcm9udCBvZiB0aGUgY2lyY3VsYXIgcXVldWUKICAgICAgICAgICAgICAgICAgICAgICAgbGlua19wcmV2LCBsaW5rX25leHQsIGtleSwgcmVzdWx0ID0gbGluawogICAgICAgICAgICAgICAgICAgICAgICBsaW5rX3ByZXZbTkVYVF0gPSBsaW5rX25leHQKICAgICAgICAgICAgICAgICAgICAgICAgbGlua19uZXh0W1BSRVZdID0gbGlua19wcmV2CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSByb290W1BSRVZdCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RbTkVYVF0gPSByb290W1BSRVZdID0gbGluawogICAgICAgICAgICAgICAgICAgICAgICBsaW5rW1BSRVZdID0gbGFzdAogICAgICAgICAgICAgICAgICAgICAgICBsaW5rW05FWFRdID0gcm9vdAogICAgICAgICAgICAgICAgICAgICAgICBoaXRzICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgICAgICAgICAgICAgcmVzdWx0ID0gdXNlcl9mdW5jdGlvbigqYXJncywgKiprd2RzKQogICAgICAgICAgICAgICAgd2l0aCBsb2NrOgogICAgICAgICAgICAgICAgICAgIGlmIGtleSBpbiBjYWNoZToKICAgICAgICAgICAgICAgICAgICAgICAgIyBnZXR0aW5nIGhlcmUgbWVhbnMgdGhhdCB0aGlzIHNhbWUga2V5IHdhcyBhZGRlZCB0byB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgIyBjYWNoZSB3aGlsZSB0aGUgbG9jayB3YXMgcmVsZWFzZWQuICBzaW5jZSB0aGUgbGluawogICAgICAgICAgICAgICAgICAgICAgICAjIHVwZGF0ZSBpcyBhbHJlYWR5IGRvbmUsIHdlIG5lZWQgb25seSByZXR1cm4gdGhlCiAgICAgICAgICAgICAgICAgICAgICAgICMgY29tcHV0ZWQgcmVzdWx0IGFuZCB1cGRhdGUgdGhlIGNvdW50IG9mIG1pc3Nlcy4KICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgICAgIGVsaWYgZnVsbDoKICAgICAgICAgICAgICAgICAgICAgICAgIyB1c2Ugcm9vdCB0byBzdG9yZSB0aGUgbmV3IGtleSBhbmQgcmVzdWx0CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RbS0VZXSA9IGtleQogICAgICAgICAgICAgICAgICAgICAgICByb290W1JFU1VMVF0gPSByZXN1bHQKICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVba2V5XSA9IHJvb3QKICAgICAgICAgICAgICAgICAgICAgICAgIyBlbXB0eSB0aGUgb2xkZXN0IGxpbmsgYW5kIG1ha2UgaXQgdGhlIG5ldyByb290CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QgPSByb290W05FWFRdCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbCBjYWNoZVtyb290W0tFWV1dCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RbS0VZXSA9IHJvb3RbUkVTVUxUXSA9IE5vbmUKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAjIHB1dCByZXN1bHQgaW4gYSBuZXcgbGluayBhdCB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSByb290W1BSRVZdCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSBbbGFzdCwgcm9vdCwga2V5LCByZXN1bHRdCiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSBsYXN0W05FWFRdID0gcm9vdFtQUkVWXSA9IGxpbmsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycnNpemUgKz0gMQogICAgICAgICAgICAgICAgICAgICAgICBmdWxsID0gKGN1cnJzaXplID09IG1heHNpemUpCiAgICAgICAgICAgICAgICAgICAgbWlzc2VzICs9IDEKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKCiAgICAgICAgZGVmIGNhY2hlX2luZm8oKToKICAgICAgICAgICAgIiIiUmVwb3J0IGNhY2hlIHN0YXRpc3RpY3MiIiIKICAgICAgICAgICAgd2l0aCBsb2NrOgogICAgICAgICAgICAgICAgcmV0dXJuIF9DYWNoZUluZm8oaGl0cywgbWlzc2VzLCBtYXhzaXplLCBjdXJyc2l6ZSkKCiAgICAgICAgZGVmIGNhY2hlX2NsZWFyKCk6CiAgICAgICAgICAgICIiIkNsZWFyIHRoZSBjYWNoZSBhbmQgY2FjaGUgc3RhdGlzdGljcyIiIgogICAgICAgICAgICBub25sb2NhbCBoaXRzLCBtaXNzZXMsIGN1cnJzaXplLCBmdWxsCiAgICAgICAgICAgIHdpdGggbG9jazoKICAgICAgICAgICAgICAgIGNhY2hlLmNsZWFyKCkKICAgICAgICAgICAgICAgIHJvb3RbOl0gPSBbcm9vdCwgcm9vdCwgTm9uZSwgTm9uZV0KICAgICAgICAgICAgICAgIGhpdHMgPSBtaXNzZXMgPSBjdXJyc2l6ZSA9IDAKICAgICAgICAgICAgICAgIGZ1bGwgPSBGYWxzZQoKICAgICAgICB3cmFwcGVyLmNhY2hlX2luZm8gPSBjYWNoZV9pbmZvCiAgICAgICAgd3JhcHBlci5jYWNoZV9jbGVhciA9IGNhY2hlX2NsZWFyCiAgICAgICAgcmV0dXJuIHVwZGF0ZV93cmFwcGVyKHdyYXBwZXIsIHVzZXJfZnVuY3Rpb24pCgogICAgcmV0dXJuIGRlY29yYXRpbmdfZnVuY3Rpb24K',
'/Lib/weakref.py':'IiIiV2VhayByZWZlcmVuY2Ugc3VwcG9ydCBmb3IgUHl0aG9uLg0KDQpUaGlzIG1vZHVsZSBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBQRVAgMjA1Og0KDQpodHRwOi8vd3d3LnB5dGhvbi5vcmcvZGV2L3BlcHMvcGVwLTAyMDUvDQoiIiINCg0KIyBOYW1pbmcgY29udmVudGlvbjogVmFyaWFibGVzIG5hbWVkICJ3ciIgYXJlIHdlYWsgcmVmZXJlbmNlIG9iamVjdHM7DQojIHRoZXkgYXJlIGNhbGxlZCB0aGlzIGluc3RlYWQgb2YgInJlZiIgdG8gYXZvaWQgbmFtZSBjb2xsaXNpb25zIHdpdGgNCiMgdGhlIG1vZHVsZS1nbG9iYWwgcmVmKCkgZnVuY3Rpb24gaW1wb3J0ZWQgZnJvbSBfd2Vha3JlZi4NCg0KZnJvbSBfd2Vha3JlZiBpbXBvcnQgKA0KICAgICBnZXR3ZWFrcmVmY291bnQsDQogICAgIGdldHdlYWtyZWZzLA0KICAgICByZWYsDQogICAgIHByb3h5LA0KICAgICBDYWxsYWJsZVByb3h5VHlwZSwNCiAgICAgUHJveHlUeXBlLA0KICAgICBSZWZlcmVuY2VUeXBlKQ0KDQpmcm9tIF93ZWFrcmVmc2V0IGltcG9ydCBXZWFrU2V0LCBfSXRlcmF0aW9uR3VhcmQNCg0KaW1wb3J0IGNvbGxlY3Rpb25zICAjIEltcG9ydCBhZnRlciBfd2Vha3JlZiB0byBhdm9pZCBjaXJjdWxhciBpbXBvcnQuDQoNClByb3h5VHlwZXMgPSAoUHJveHlUeXBlLCBDYWxsYWJsZVByb3h5VHlwZSkNCg0KX19hbGxfXyA9IFsicmVmIiwgInByb3h5IiwgImdldHdlYWtyZWZjb3VudCIsICJnZXR3ZWFrcmVmcyIsDQogICAgICAgICAgICJXZWFrS2V5RGljdGlvbmFyeSIsICJSZWZlcmVuY2VUeXBlIiwgIlByb3h5VHlwZSIsDQogICAgICAgICAgICJDYWxsYWJsZVByb3h5VHlwZSIsICJQcm94eVR5cGVzIiwgIldlYWtWYWx1ZURpY3Rpb25hcnkiLA0KICAgICAgICAgICAiV2Vha1NldCJdDQoNCg0KY2xhc3MgV2Vha1ZhbHVlRGljdGlvbmFyeShjb2xsZWN0aW9ucy5NdXRhYmxlTWFwcGluZyk6DQogICAgIiIiTWFwcGluZyBjbGFzcyB0aGF0IHJlZmVyZW5jZXMgdmFsdWVzIHdlYWtseS4NCg0KICAgIEVudHJpZXMgaW4gdGhlIGRpY3Rpb25hcnkgd2lsbCBiZSBkaXNjYXJkZWQgd2hlbiBubyBzdHJvbmcNCiAgICByZWZlcmVuY2UgdG8gdGhlIHZhbHVlIGV4aXN0cyBhbnltb3JlDQogICAgIiIiDQogICAgIyBXZSBpbmhlcml0IHRoZSBjb25zdHJ1Y3RvciB3aXRob3V0IHdvcnJ5aW5nIGFib3V0IHRoZSBpbnB1dA0KICAgICMgZGljdGlvbmFyeTsgc2luY2UgaXQgdXNlcyBvdXIgLnVwZGF0ZSgpIG1ldGhvZCwgd2UgZ2V0IHRoZSByaWdodA0KICAgICMgY2hlY2tzIChpZiB0aGUgb3RoZXIgZGljdGlvbmFyeSBpcyBhIFdlYWtWYWx1ZURpY3Rpb25hcnksDQogICAgIyBvYmplY3RzIGFyZSB1bndyYXBwZWQgb24gdGhlIHdheSBvdXQsIGFuZCB3ZSBhbHdheXMgd3JhcCBvbiB0aGUNCiAgICAjIHdheSBpbikuDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3cpOg0KICAgICAgICBkZWYgcmVtb3ZlKHdyLCBzZWxmcmVmPXJlZihzZWxmKSk6DQogICAgICAgICAgICBzZWxmID0gc2VsZnJlZigpDQogICAgICAgICAgICBpZiBzZWxmIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIGlmIHNlbGYuX2l0ZXJhdGluZzoNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGVuZGluZ19yZW1vdmFscy5hcHBlbmQod3Iua2V5KQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLmRhdGFbd3Iua2V5XQ0KICAgICAgICBzZWxmLl9yZW1vdmUgPSByZW1vdmUNCiAgICAgICAgIyBBIGxpc3Qgb2Yga2V5cyB0byBiZSByZW1vdmVkDQogICAgICAgIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMgPSBbXQ0KICAgICAgICBzZWxmLl9pdGVyYXRpbmcgPSBzZXQoKQ0KICAgICAgICBzZWxmLmRhdGEgPSBkID0ge30NCiAgICAgICAgc2VsZi51cGRhdGUoKmFyZ3MsICoqa3cpDQoNCiAgICBkZWYgX2NvbW1pdF9yZW1vdmFscyhzZWxmKToNCiAgICAgICAgbCA9IHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMNCiAgICAgICAgZCA9IHNlbGYuZGF0YQ0KICAgICAgICAjIFdlIHNob3VsZG4ndCBlbmNvdW50ZXIgYW55IEtleUVycm9yLCBiZWNhdXNlIHRoaXMgbWV0aG9kIHNob3VsZA0KICAgICAgICAjIGFsd2F5cyBiZSBjYWxsZWQgKmJlZm9yZSogbXV0YXRpbmcgdGhlIGRpY3QuDQogICAgICAgIHdoaWxlIGw6DQogICAgICAgICAgICBkZWwgZFtsLnBvcCgpXQ0KDQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6DQogICAgICAgIG8gPSBzZWxmLmRhdGFba2V5XSgpDQogICAgICAgIGlmIG8gaXMgTm9uZToNCiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBvDQoNCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5KToNCiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpDQogICAgICAgIGRlbCBzZWxmLmRhdGFba2V5XQ0KDQogICAgZGVmIF9fbGVuX18oc2VsZik6DQogICAgICAgIHJldHVybiBsZW4oc2VsZi5kYXRhKSAtIGxlbihzZWxmLl9wZW5kaW5nX3JlbW92YWxzKQ0KDQogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBvID0gc2VsZi5kYXRhW2tleV0oKQ0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgcmV0dXJuIG8gaXMgbm90IE5vbmUNCg0KICAgIGRlZiBfX3JlcHJfXyhzZWxmKToNCiAgICAgICAgcmV0dXJuICI8V2Vha1ZhbHVlRGljdGlvbmFyeSBhdCAlcz4iICUgaWQoc2VsZikNCg0KICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXksIHZhbHVlKToNCiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpDQogICAgICAgIHNlbGYuZGF0YVtrZXldID0gS2V5ZWRSZWYodmFsdWUsIHNlbGYuX3JlbW92ZSwga2V5KQ0KDQogICAgZGVmIGNvcHkoc2VsZik6DQogICAgICAgIG5ldyA9IFdlYWtWYWx1ZURpY3Rpb25hcnkoKQ0KICAgICAgICBmb3Iga2V5LCB3ciBpbiBzZWxmLmRhdGEuaXRlbXMoKToNCiAgICAgICAgICAgIG8gPSB3cigpDQogICAgICAgICAgICBpZiBvIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIG5ld1trZXldID0gbw0KICAgICAgICByZXR1cm4gbmV3DQoNCiAgICBfX2NvcHlfXyA9IGNvcHkNCg0KICAgIGRlZiBfX2RlZXBjb3B5X18oc2VsZiwgbWVtbyk6DQogICAgICAgIGZyb20gY29weSBpbXBvcnQgZGVlcGNvcHkNCiAgICAgICAgbmV3ID0gc2VsZi5fX2NsYXNzX18oKQ0KICAgICAgICBmb3Iga2V5LCB3ciBpbiBzZWxmLmRhdGEuaXRlbXMoKToNCiAgICAgICAgICAgIG8gPSB3cigpDQogICAgICAgICAgICBpZiBvIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIG5ld1tkZWVwY29weShrZXksIG1lbW8pXSA9IG8NCiAgICAgICAgcmV0dXJuIG5ldw0KDQogICAgZGVmIGdldChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdyID0gc2VsZi5kYXRhW2tleV0NCiAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHQNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIG8gPSB3cigpDQogICAgICAgICAgICBpZiBvIGlzIE5vbmU6DQogICAgICAgICAgICAgICAgIyBUaGlzIHNob3VsZCBvbmx5IGhhcHBlbg0KICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0DQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHJldHVybiBvDQoNCiAgICBkZWYgaXRlbXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIGssIHdyIGluIHNlbGYuZGF0YS5pdGVtcygpOg0KICAgICAgICAgICAgICAgIHYgPSB3cigpDQogICAgICAgICAgICAgICAgaWYgdiBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgeWllbGQgaywgdg0KDQogICAgZGVmIGtleXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIGssIHdyIGluIHNlbGYuZGF0YS5pdGVtcygpOg0KICAgICAgICAgICAgICAgIGlmIHdyKCkgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgICAgIHlpZWxkIGsNCg0KICAgIF9faXRlcl9fID0ga2V5cw0KDQogICAgZGVmIGl0ZXJ2YWx1ZXJlZnMoc2VsZik6DQogICAgICAgICIiIlJldHVybiBhbiBpdGVyYXRvciB0aGF0IHlpZWxkcyB0aGUgd2VhayByZWZlcmVuY2VzIHRvIHRoZSB2YWx1ZXMuDQoNCiAgICAgICAgVGhlIHJlZmVyZW5jZXMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlICdsaXZlJyBhdCB0aGUgdGltZQ0KICAgICAgICB0aGV5IGFyZSB1c2VkLCBzbyB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIHJlZmVyZW5jZXMgbmVlZHMNCiAgICAgICAgdG8gYmUgY2hlY2tlZCBiZWZvcmUgYmVpbmcgdXNlZC4gIFRoaXMgY2FuIGJlIHVzZWQgdG8gYXZvaWQNCiAgICAgICAgY3JlYXRpbmcgcmVmZXJlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvDQogICAgICAgIGtlZXAgdGhlIHZhbHVlcyBhcm91bmQgbG9uZ2VyIHRoYW4gbmVlZGVkLg0KDQogICAgICAgICIiIg0KICAgICAgICB3aXRoIF9JdGVyYXRpb25HdWFyZChzZWxmKToNCiAgICAgICAgICAgIGZvciB3ciBpbiBzZWxmLmRhdGEudmFsdWVzKCk6DQogICAgICAgICAgICAgICAgeWllbGQgd3INCg0KICAgIGRlZiB2YWx1ZXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIHdyIGluIHNlbGYuZGF0YS52YWx1ZXMoKToNCiAgICAgICAgICAgICAgICBvYmogPSB3cigpDQogICAgICAgICAgICAgICAgaWYgb2JqIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICAgICB5aWVsZCBvYmoNCg0KICAgIGRlZiBwb3BpdGVtKHNlbGYpOg0KICAgICAgICBpZiBzZWxmLl9wZW5kaW5nX3JlbW92YWxzOg0KICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkNCiAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIGtleSwgd3IgPSBzZWxmLmRhdGEucG9waXRlbSgpDQogICAgICAgICAgICBvID0gd3IoKQ0KICAgICAgICAgICAgaWYgbyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICByZXR1cm4ga2V5LCBvDQoNCiAgICBkZWYgcG9wKHNlbGYsIGtleSwgKmFyZ3MpOg0KICAgICAgICBpZiBzZWxmLl9wZW5kaW5nX3JlbW92YWxzOg0KICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbyA9IHNlbGYuZGF0YS5wb3Aoa2V5KSgpDQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgICAgIGlmIGFyZ3M6DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3NbMF0NCiAgICAgICAgICAgIHJhaXNlDQogICAgICAgIGlmIG8gaXMgTm9uZToNCiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBvDQoNCiAgICBkZWYgc2V0ZGVmYXVsdChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdyID0gc2VsZi5kYXRhW2tleV0NCiAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgICAgICBzZWxmLl9jb21taXRfcmVtb3ZhbHMoKQ0KICAgICAgICAgICAgc2VsZi5kYXRhW2tleV0gPSBLZXllZFJlZihkZWZhdWx0LCBzZWxmLl9yZW1vdmUsIGtleSkNCiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0DQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXR1cm4gd3IoKQ0KDQogICAgZGVmIHVwZGF0ZShzZWxmLCBkaWN0PU5vbmUsICoqa3dhcmdzKToNCiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpDQogICAgICAgIGQgPSBzZWxmLmRhdGENCiAgICAgICAgaWYgZGljdCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIGlmIG5vdCBoYXNhdHRyKGRpY3QsICJpdGVtcyIpOg0KICAgICAgICAgICAgICAgIGRpY3QgPSB0eXBlKHt9KShkaWN0KQ0KICAgICAgICAgICAgZm9yIGtleSwgbyBpbiBkaWN0Lml0ZW1zKCk6DQogICAgICAgICAgICAgICAgZFtrZXldID0gS2V5ZWRSZWYobywgc2VsZi5fcmVtb3ZlLCBrZXkpDQogICAgICAgIGlmIGxlbihrd2FyZ3MpOg0KICAgICAgICAgICAgc2VsZi51cGRhdGUoa3dhcmdzKQ0KDQogICAgZGVmIHZhbHVlcmVmcyhzZWxmKToNCiAgICAgICAgIiIiUmV0dXJuIGEgbGlzdCBvZiB3ZWFrIHJlZmVyZW5jZXMgdG8gdGhlIHZhbHVlcy4NCg0KICAgICAgICBUaGUgcmVmZXJlbmNlcyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgJ2xpdmUnIGF0IHRoZSB0aW1lDQogICAgICAgIHRoZXkgYXJlIHVzZWQsIHNvIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgcmVmZXJlbmNlcyBuZWVkcw0KICAgICAgICB0byBiZSBjaGVja2VkIGJlZm9yZSBiZWluZyB1c2VkLiAgVGhpcyBjYW4gYmUgdXNlZCB0byBhdm9pZA0KICAgICAgICBjcmVhdGluZyByZWZlcmVuY2VzIHRoYXQgd2lsbCBjYXVzZSB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IgdG8NCiAgICAgICAga2VlcCB0aGUgdmFsdWVzIGFyb3VuZCBsb25nZXIgdGhhbiBuZWVkZWQuDQoNCiAgICAgICAgIiIiDQogICAgICAgIHJldHVybiBsaXN0KHNlbGYuZGF0YS52YWx1ZXMoKSkNCg0KDQpjbGFzcyBLZXllZFJlZihyZWYpOg0KICAgICIiIlNwZWNpYWxpemVkIHJlZmVyZW5jZSB0aGF0IGluY2x1ZGVzIGEga2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHZhbHVlLg0KDQogICAgVGhpcyBpcyB1c2VkIGluIHRoZSBXZWFrVmFsdWVEaWN0aW9uYXJ5IHRvIGF2b2lkIGhhdmluZyB0byBjcmVhdGUNCiAgICBhIGZ1bmN0aW9uIG9iamVjdCBmb3IgZWFjaCBrZXkgc3RvcmVkIGluIHRoZSBtYXBwaW5nLiAgQSBzaGFyZWQNCiAgICBjYWxsYmFjayBvYmplY3QgY2FuIHVzZSB0aGUgJ2tleScgYXR0cmlidXRlIG9mIGEgS2V5ZWRSZWYgaW5zdGVhZA0KICAgIG9mIGdldHRpbmcgYSByZWZlcmVuY2UgdG8gdGhlIGtleSBmcm9tIGFuIGVuY2xvc2luZyBzY29wZS4NCg0KICAgICIiIg0KDQogICAgX19zbG90c19fID0gImtleSIsDQoNCiAgICBkZWYgX19uZXdfXyh0eXBlLCBvYiwgY2FsbGJhY2ssIGtleSk6DQogICAgICAgIHNlbGYgPSByZWYuX19uZXdfXyh0eXBlLCBvYiwgY2FsbGJhY2spDQogICAgICAgIHNlbGYua2V5ID0ga2V5DQogICAgICAgIHJldHVybiBzZWxmDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgb2IsIGNhbGxiYWNrLCBrZXkpOg0KICAgICAgICBzdXBlcigpLl9faW5pdF9fKG9iLCBjYWxsYmFjaykNCg0KDQpjbGFzcyBXZWFrS2V5RGljdGlvbmFyeShjb2xsZWN0aW9ucy5NdXRhYmxlTWFwcGluZyk6DQogICAgIiIiIE1hcHBpbmcgY2xhc3MgdGhhdCByZWZlcmVuY2VzIGtleXMgd2Vha2x5Lg0KDQogICAgRW50cmllcyBpbiB0aGUgZGljdGlvbmFyeSB3aWxsIGJlIGRpc2NhcmRlZCB3aGVuIHRoZXJlIGlzIG5vDQogICAgbG9uZ2VyIGEgc3Ryb25nIHJlZmVyZW5jZSB0byB0aGUga2V5LiBUaGlzIGNhbiBiZSB1c2VkIHRvDQogICAgYXNzb2NpYXRlIGFkZGl0aW9uYWwgZGF0YSB3aXRoIGFuIG9iamVjdCBvd25lZCBieSBvdGhlciBwYXJ0cyBvZg0KICAgIGFuIGFwcGxpY2F0aW9uIHdpdGhvdXQgYWRkaW5nIGF0dHJpYnV0ZXMgdG8gdGhvc2Ugb2JqZWN0cy4gVGhpcw0KICAgIGNhbiBiZSBlc3BlY2lhbGx5IHVzZWZ1bCB3aXRoIG9iamVjdHMgdGhhdCBvdmVycmlkZSBhdHRyaWJ1dGUNCiAgICBhY2Nlc3Nlcy4NCiAgICAiIiINCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkaWN0PU5vbmUpOg0KICAgICAgICBzZWxmLmRhdGEgPSB7fQ0KICAgICAgICBkZWYgcmVtb3ZlKGssIHNlbGZyZWY9cmVmKHNlbGYpKToNCiAgICAgICAgICAgIHNlbGYgPSBzZWxmcmVmKCkNCiAgICAgICAgICAgIGlmIHNlbGYgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgaWYgc2VsZi5faXRlcmF0aW5nOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLl9wZW5kaW5nX3JlbW92YWxzLmFwcGVuZChrKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLmRhdGFba10NCiAgICAgICAgc2VsZi5fcmVtb3ZlID0gcmVtb3ZlDQogICAgICAgICMgQSBsaXN0IG9mIGRlYWQgd2Vha3JlZnMgKGtleXMgdG8gYmUgcmVtb3ZlZCkNCiAgICAgICAgc2VsZi5fcGVuZGluZ19yZW1vdmFscyA9IFtdDQogICAgICAgIHNlbGYuX2l0ZXJhdGluZyA9IHNldCgpDQogICAgICAgIGlmIGRpY3QgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBzZWxmLnVwZGF0ZShkaWN0KQ0KDQogICAgZGVmIF9jb21taXRfcmVtb3ZhbHMoc2VsZik6DQogICAgICAgICMgTk9URTogV2UgZG9uJ3QgbmVlZCB0byBjYWxsIHRoaXMgbWV0aG9kIGJlZm9yZSBtdXRhdGluZyB0aGUgZGljdCwNCiAgICAgICAgIyBiZWNhdXNlIGEgZGVhZCB3ZWFrcmVmIG5ldmVyIGNvbXBhcmVzIGVxdWFsIHRvIGEgbGl2ZSB3ZWFrcmVmLA0KICAgICAgICAjIGV2ZW4gaWYgdGhleSBoYXBwZW5lZCB0byByZWZlciB0byBlcXVhbCBvYmplY3RzLg0KICAgICAgICAjIEhvd2V2ZXIsIGl0IG1lYW5zIGtleXMgbWF5IGFscmVhZHkgaGF2ZSBiZWVuIHJlbW92ZWQuDQogICAgICAgIGwgPSBzZWxmLl9wZW5kaW5nX3JlbW92YWxzDQogICAgICAgIGQgPSBzZWxmLmRhdGENCiAgICAgICAgd2hpbGUgbDoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBkZWwgZFtsLnBvcCgpXQ0KICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXkpOg0KICAgICAgICBkZWwgc2VsZi5kYXRhW3JlZihrZXkpXQ0KDQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6DQogICAgICAgIHJldHVybiBzZWxmLmRhdGFbcmVmKGtleSldDQoNCiAgICBkZWYgX19sZW5fXyhzZWxmKToNCiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmRhdGEpIC0gbGVuKHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMpDQoNCiAgICBkZWYgX19yZXByX18oc2VsZik6DQogICAgICAgIHJldHVybiAiPFdlYWtLZXlEaWN0aW9uYXJ5IGF0ICVzPiIgJSBpZChzZWxmKQ0KDQogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgdmFsdWUpOg0KICAgICAgICBzZWxmLmRhdGFbcmVmKGtleSwgc2VsZi5fcmVtb3ZlKV0gPSB2YWx1ZQ0KDQogICAgZGVmIGNvcHkoc2VsZik6DQogICAgICAgIG5ldyA9IFdlYWtLZXlEaWN0aW9uYXJ5KCkNCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gc2VsZi5kYXRhLml0ZW1zKCk6DQogICAgICAgICAgICBvID0ga2V5KCkNCiAgICAgICAgICAgIGlmIG8gaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgbmV3W29dID0gdmFsdWUNCiAgICAgICAgcmV0dXJuIG5ldw0KDQogICAgX19jb3B5X18gPSBjb3B5DQoNCiAgICBkZWYgX19kZWVwY29weV9fKHNlbGYsIG1lbW8pOg0KICAgICAgICBmcm9tIGNvcHkgaW1wb3J0IGRlZXBjb3B5DQogICAgICAgIG5ldyA9IHNlbGYuX19jbGFzc19fKCkNCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gc2VsZi5kYXRhLml0ZW1zKCk6DQogICAgICAgICAgICBvID0ga2V5KCkNCiAgICAgICAgICAgIGlmIG8gaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgbmV3W29dID0gZGVlcGNvcHkodmFsdWUsIG1lbW8pDQogICAgICAgIHJldHVybiBuZXcNCg0KICAgIGRlZiBnZXQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOg0KICAgICAgICByZXR1cm4gc2VsZi5kYXRhLmdldChyZWYoa2V5KSxkZWZhdWx0KQ0KDQogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB3ciA9IHJlZihrZXkpDQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgcmV0dXJuIHdyIGluIHNlbGYuZGF0YQ0KDQogICAgZGVmIGl0ZW1zKHNlbGYpOg0KICAgICAgICB3aXRoIF9JdGVyYXRpb25HdWFyZChzZWxmKToNCiAgICAgICAgICAgIGZvciB3ciwgdmFsdWUgaW4gc2VsZi5kYXRhLml0ZW1zKCk6DQogICAgICAgICAgICAgICAga2V5ID0gd3IoKQ0KICAgICAgICAgICAgICAgIGlmIGtleSBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgeWllbGQga2V5LCB2YWx1ZQ0KDQogICAgZGVmIGtleXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIHdyIGluIHNlbGYuZGF0YToNCiAgICAgICAgICAgICAgICBvYmogPSB3cigpDQogICAgICAgICAgICAgICAgaWYgb2JqIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICAgICB5aWVsZCBvYmoNCg0KICAgIF9faXRlcl9fID0ga2V5cw0KDQogICAgZGVmIHZhbHVlcyhzZWxmKToNCiAgICAgICAgd2l0aCBfSXRlcmF0aW9uR3VhcmQoc2VsZik6DQogICAgICAgICAgICBmb3Igd3IsIHZhbHVlIGluIHNlbGYuZGF0YS5pdGVtcygpOg0KICAgICAgICAgICAgICAgIGlmIHdyKCkgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgICAgIHlpZWxkIHZhbHVlDQoNCiAgICBkZWYga2V5cmVmcyhzZWxmKToNCiAgICAgICAgIiIiUmV0dXJuIGEgbGlzdCBvZiB3ZWFrIHJlZmVyZW5jZXMgdG8gdGhlIGtleXMuDQoNCiAgICAgICAgVGhlIHJlZmVyZW5jZXMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlICdsaXZlJyBhdCB0aGUgdGltZQ0KICAgICAgICB0aGV5IGFyZSB1c2VkLCBzbyB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIHJlZmVyZW5jZXMgbmVlZHMNCiAgICAgICAgdG8gYmUgY2hlY2tlZCBiZWZvcmUgYmVpbmcgdXNlZC4gIFRoaXMgY2FuIGJlIHVzZWQgdG8gYXZvaWQNCiAgICAgICAgY3JlYXRpbmcgcmVmZXJlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvDQogICAgICAgIGtlZXAgdGhlIGtleXMgYXJvdW5kIGxvbmdlciB0aGFuIG5lZWRlZC4NCg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIGxpc3Qoc2VsZi5kYXRhKQ0KDQogICAgZGVmIHBvcGl0ZW0oc2VsZik6DQogICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICBrZXksIHZhbHVlID0gc2VsZi5kYXRhLnBvcGl0ZW0oKQ0KICAgICAgICAgICAgbyA9IGtleSgpDQogICAgICAgICAgICBpZiBvIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIHJldHVybiBvLCB2YWx1ZQ0KDQogICAgZGVmIHBvcChzZWxmLCBrZXksICphcmdzKToNCiAgICAgICAgcmV0dXJuIHNlbGYuZGF0YS5wb3AocmVmKGtleSksICphcmdzKQ0KDQogICAgZGVmIHNldGRlZmF1bHQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOg0KICAgICAgICByZXR1cm4gc2VsZi5kYXRhLnNldGRlZmF1bHQocmVmKGtleSwgc2VsZi5fcmVtb3ZlKSxkZWZhdWx0KQ0KDQogICAgZGVmIHVwZGF0ZShzZWxmLCBkaWN0PU5vbmUsICoqa3dhcmdzKToNCiAgICAgICAgZCA9IHNlbGYuZGF0YQ0KICAgICAgICBpZiBkaWN0IGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgaWYgbm90IGhhc2F0dHIoZGljdCwgIml0ZW1zIik6DQogICAgICAgICAgICAgICAgZGljdCA9IHR5cGUoe30pKGRpY3QpDQogICAgICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBkaWN0Lml0ZW1zKCk6DQogICAgICAgICAgICAgICAgZFtyZWYoa2V5LCBzZWxmLl9yZW1vdmUpXSA9IHZhbHVlDQogICAgICAgIGlmIGxlbihrd2FyZ3MpOg0KICAgICAgICAgICAgc2VsZi51cGRhdGUoa3dhcmdzKQ0K',
'/Lib/codecs.py':'IiIiIGNvZGVjcyAtLSBQeXRob24gQ29kZWMgUmVnaXN0cnksIEFQSSBhbmQgaGVscGVycy4KCgpXcml0dGVuIGJ5IE1hcmMtQW5kcmUgTGVtYnVyZyAobWFsQGxlbWJ1cmcuY29tKS4KCihjKSBDb3B5cmlnaHQgQ05SSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZC4gTk8gV0FSUkFOVFkuCgoiIiIjIgoKaW1wb3J0IGJ1aWx0aW5zLCBzeXMKCiMjIyBSZWdpc3RyeSBhbmQgYnVpbHRpbiBzdGF0ZWxlc3MgY29kZWMgZnVuY3Rpb25zCgp0cnk6CiAgICBmcm9tIF9jb2RlY3MgaW1wb3J0ICoKZXhjZXB0IEltcG9ydEVycm9yIGFzIHdoeToKICAgIHJhaXNlIFN5c3RlbUVycm9yKCdGYWlsZWQgdG8gbG9hZCB0aGUgYnVpbHRpbiBjb2RlY3M6ICVzJyAlIHdoeSkKCl9fYWxsX18gPSBbInJlZ2lzdGVyIiwgImxvb2t1cCIsICJvcGVuIiwgIkVuY29kZWRGaWxlIiwgIkJPTSIsICJCT01fQkUiLAogICAgICAgICAgICJCT01fTEUiLCAiQk9NMzJfQkUiLCAiQk9NMzJfTEUiLCAiQk9NNjRfQkUiLCAiQk9NNjRfTEUiLAogICAgICAgICAgICJCT01fVVRGOCIsICJCT01fVVRGMTYiLCAiQk9NX1VURjE2X0xFIiwgIkJPTV9VVEYxNl9CRSIsCiAgICAgICAgICAgIkJPTV9VVEYzMiIsICJCT01fVVRGMzJfTEUiLCAiQk9NX1VURjMyX0JFIiwKICAgICAgICAgICAic3RyaWN0X2Vycm9ycyIsICJpZ25vcmVfZXJyb3JzIiwgInJlcGxhY2VfZXJyb3JzIiwKICAgICAgICAgICAieG1sY2hhcnJlZnJlcGxhY2VfZXJyb3JzIiwKICAgICAgICAgICAicmVnaXN0ZXJfZXJyb3IiLCAibG9va3VwX2Vycm9yIl0KCiMjIyBDb25zdGFudHMKCiMKIyBCeXRlIE9yZGVyIE1hcmsgKEJPTSA9IFpFUk8gV0lEVEggTk8tQlJFQUsgU1BBQ0UgPSBVK0ZFRkYpCiMgYW5kIGl0cyBwb3NzaWJsZSBieXRlIHN0cmluZyB2YWx1ZXMKIyBmb3IgVVRGOC9VVEYxNi9VVEYzMiBvdXRwdXQgYW5kIGxpdHRsZS9iaWcgZW5kaWFuIG1hY2hpbmVzCiMKCiMgVVRGLTgKQk9NX1VURjggPSBiJ1x4ZWZceGJiXHhiZicKCiMgVVRGLTE2LCBsaXR0bGUgZW5kaWFuCkJPTV9MRSA9IEJPTV9VVEYxNl9MRSA9IGInXHhmZlx4ZmUnCgojIFVURi0xNiwgYmlnIGVuZGlhbgpCT01fQkUgPSBCT01fVVRGMTZfQkUgPSBiJ1x4ZmVceGZmJwoKIyBVVEYtMzIsIGxpdHRsZSBlbmRpYW4KQk9NX1VURjMyX0xFID0gYidceGZmXHhmZVx4MDBceDAwJwoKIyBVVEYtMzIsIGJpZyBlbmRpYW4KQk9NX1VURjMyX0JFID0gYidceDAwXHgwMFx4ZmVceGZmJwoKaWYgc3lzLmJ5dGVvcmRlciA9PSAnbGl0dGxlJzoKCiAgICAjIFVURi0xNiwgbmF0aXZlIGVuZGlhbm5lc3MKICAgIEJPTSA9IEJPTV9VVEYxNiA9IEJPTV9VVEYxNl9MRQoKICAgICMgVVRGLTMyLCBuYXRpdmUgZW5kaWFubmVzcwogICAgQk9NX1VURjMyID0gQk9NX1VURjMyX0xFCgplbHNlOgoKICAgICMgVVRGLTE2LCBuYXRpdmUgZW5kaWFubmVzcwogICAgQk9NID0gQk9NX1VURjE2ID0gQk9NX1VURjE2X0JFCgogICAgIyBVVEYtMzIsIG5hdGl2ZSBlbmRpYW5uZXNzCiAgICBCT01fVVRGMzIgPSBCT01fVVRGMzJfQkUKCiMgT2xkIGJyb2tlbiBuYW1lcyAoZG9uJ3QgdXNlIGluIG5ldyBjb2RlKQpCT00zMl9MRSA9IEJPTV9VVEYxNl9MRQpCT00zMl9CRSA9IEJPTV9VVEYxNl9CRQpCT002NF9MRSA9IEJPTV9VVEYzMl9MRQpCT002NF9CRSA9IEJPTV9VVEYzMl9CRQoKCiMjIyBDb2RlYyBiYXNlIGNsYXNzZXMgKGRlZmluaW5nIHRoZSBBUEkpCgpjbGFzcyBDb2RlY0luZm8odHVwbGUpOgoKICAgIGRlZiBfX25ld19fKGNscywgZW5jb2RlLCBkZWNvZGUsIHN0cmVhbXJlYWRlcj1Ob25lLCBzdHJlYW13cml0ZXI9Tm9uZSwKICAgICAgICBpbmNyZW1lbnRhbGVuY29kZXI9Tm9uZSwgaW5jcmVtZW50YWxkZWNvZGVyPU5vbmUsIG5hbWU9Tm9uZSk6CiAgICAgICAgc2VsZiA9IHR1cGxlLl9fbmV3X18oY2xzLCAoZW5jb2RlLCBkZWNvZGUsIHN0cmVhbXJlYWRlciwgc3RyZWFtd3JpdGVyKSkKICAgICAgICBzZWxmLm5hbWUgPSBuYW1lCiAgICAgICAgc2VsZi5lbmNvZGUgPSBlbmNvZGUKICAgICAgICBzZWxmLmRlY29kZSA9IGRlY29kZQogICAgICAgIHNlbGYuaW5jcmVtZW50YWxlbmNvZGVyID0gaW5jcmVtZW50YWxlbmNvZGVyCiAgICAgICAgc2VsZi5pbmNyZW1lbnRhbGRlY29kZXIgPSBpbmNyZW1lbnRhbGRlY29kZXIKICAgICAgICBzZWxmLnN0cmVhbXdyaXRlciA9IHN0cmVhbXdyaXRlcgogICAgICAgIHNlbGYuc3RyZWFtcmVhZGVyID0gc3RyZWFtcmVhZGVyCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICI8JXMuJXMgb2JqZWN0IGZvciBlbmNvZGluZyAlcyBhdCAweCV4PiIgJSBcCiAgICAgICAgICAgICAgICAoc2VsZi5fX2NsYXNzX18uX19tb2R1bGVfXywgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgICAgICAgc2VsZi5uYW1lLCBpZChzZWxmKSkKCmNsYXNzIENvZGVjOgoKICAgICIiIiBEZWZpbmVzIHRoZSBpbnRlcmZhY2UgZm9yIHN0YXRlbGVzcyBlbmNvZGVycy9kZWNvZGVycy4KCiAgICAgICAgVGhlIC5lbmNvZGUoKS8uZGVjb2RlKCkgbWV0aG9kcyBtYXkgdXNlIGRpZmZlcmVudCBlcnJvcgogICAgICAgIGhhbmRsaW5nIHNjaGVtZXMgYnkgcHJvdmlkaW5nIHRoZSBlcnJvcnMgYXJndW1lbnQuIFRoZXNlCiAgICAgICAgc3RyaW5nIHZhbHVlcyBhcmUgcHJlZGVmaW5lZDoKCiAgICAgICAgICdzdHJpY3QnIC0gcmFpc2UgYSBWYWx1ZUVycm9yIGVycm9yIChvciBhIHN1YmNsYXNzKQogICAgICAgICAnaWdub3JlJyAtIGlnbm9yZSB0aGUgY2hhcmFjdGVyIGFuZCBjb250aW51ZSB3aXRoIHRoZSBuZXh0CiAgICAgICAgICdyZXBsYWNlJyAtIHJlcGxhY2Ugd2l0aCBhIHN1aXRhYmxlIHJlcGxhY2VtZW50IGNoYXJhY3RlcjsKICAgICAgICAgICAgICAgICAgICBQeXRob24gd2lsbCB1c2UgdGhlIG9mZmljaWFsIFUrRkZGRCBSRVBMQUNFTUVOVAogICAgICAgICAgICAgICAgICAgIENIQVJBQ1RFUiBmb3IgdGhlIGJ1aWx0aW4gVW5pY29kZSBjb2RlY3Mgb24KICAgICAgICAgICAgICAgICAgICBkZWNvZGluZyBhbmQgJz8nIG9uIGVuY29kaW5nLgogICAgICAgICAneG1sY2hhcnJlZnJlcGxhY2UnIC0gUmVwbGFjZSB3aXRoIHRoZSBhcHByb3ByaWF0ZSBYTUwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlciByZWZlcmVuY2UgKG9ubHkgZm9yIGVuY29kaW5nKS4KICAgICAgICAgJ2JhY2tzbGFzaHJlcGxhY2UnICAtIFJlcGxhY2Ugd2l0aCBiYWNrc2xhc2hlZCBlc2NhcGUgc2VxdWVuY2VzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob25seSBmb3IgZW5jb2RpbmcpLgoKICAgICAgICBUaGUgc2V0IG9mIGFsbG93ZWQgdmFsdWVzIGNhbiBiZSBleHRlbmRlZCB2aWEgcmVnaXN0ZXJfZXJyb3IuCgogICAgIiIiCiAgICBkZWYgZW5jb2RlKHNlbGYsIGlucHV0LCBlcnJvcnM9J3N0cmljdCcpOgoKICAgICAgICAiIiIgRW5jb2RlcyB0aGUgb2JqZWN0IGlucHV0IGFuZCByZXR1cm5zIGEgdHVwbGUgKG91dHB1dAogICAgICAgICAgICBvYmplY3QsIGxlbmd0aCBjb25zdW1lZCkuCgogICAgICAgICAgICBlcnJvcnMgZGVmaW5lcyB0aGUgZXJyb3IgaGFuZGxpbmcgdG8gYXBwbHkuIEl0IGRlZmF1bHRzIHRvCiAgICAgICAgICAgICdzdHJpY3QnIGhhbmRsaW5nLgoKICAgICAgICAgICAgVGhlIG1ldGhvZCBtYXkgbm90IHN0b3JlIHN0YXRlIGluIHRoZSBDb2RlYyBpbnN0YW5jZS4gVXNlCiAgICAgICAgICAgIFN0cmVhbUNvZGVjIGZvciBjb2RlY3Mgd2hpY2ggaGF2ZSB0byBrZWVwIHN0YXRlIGluIG9yZGVyIHRvCiAgICAgICAgICAgIG1ha2UgZW5jb2RpbmcvZGVjb2RpbmcgZWZmaWNpZW50LgoKICAgICAgICAgICAgVGhlIGVuY29kZXIgbXVzdCBiZSBhYmxlIHRvIGhhbmRsZSB6ZXJvIGxlbmd0aCBpbnB1dCBhbmQKICAgICAgICAgICAgcmV0dXJuIGFuIGVtcHR5IG9iamVjdCBvZiB0aGUgb3V0cHV0IG9iamVjdCB0eXBlIGluIHRoaXMKICAgICAgICAgICAgc2l0dWF0aW9uLgoKICAgICAgICAiIiIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yCgogICAgZGVmIGRlY29kZShzZWxmLCBpbnB1dCwgZXJyb3JzPSdzdHJpY3QnKToKCiAgICAgICAgIiIiIERlY29kZXMgdGhlIG9iamVjdCBpbnB1dCBhbmQgcmV0dXJucyBhIHR1cGxlIChvdXRwdXQKICAgICAgICAgICAgb2JqZWN0LCBsZW5ndGggY29uc3VtZWQpLgoKICAgICAgICAgICAgaW5wdXQgbXVzdCBiZSBhbiBvYmplY3Qgd2hpY2ggcHJvdmlkZXMgdGhlIGJmX2dldHJlYWRidWYKICAgICAgICAgICAgYnVmZmVyIHNsb3QuIFB5dGhvbiBzdHJpbmdzLCBidWZmZXIgb2JqZWN0cyBhbmQgbWVtb3J5CiAgICAgICAgICAgIG1hcHBlZCBmaWxlcyBhcmUgZXhhbXBsZXMgb2Ygb2JqZWN0cyBwcm92aWRpbmcgdGhpcyBzbG90LgoKICAgICAgICAgICAgZXJyb3JzIGRlZmluZXMgdGhlIGVycm9yIGhhbmRsaW5nIHRvIGFwcGx5LiBJdCBkZWZhdWx0cyB0bwogICAgICAgICAgICAnc3RyaWN0JyBoYW5kbGluZy4KCiAgICAgICAgICAgIFRoZSBtZXRob2QgbWF5IG5vdCBzdG9yZSBzdGF0ZSBpbiB0aGUgQ29kZWMgaW5zdGFuY2UuIFVzZQogICAgICAgICAgICBTdHJlYW1Db2RlYyBmb3IgY29kZWNzIHdoaWNoIGhhdmUgdG8ga2VlcCBzdGF0ZSBpbiBvcmRlciB0bwogICAgICAgICAgICBtYWtlIGVuY29kaW5nL2RlY29kaW5nIGVmZmljaWVudC4KCiAgICAgICAgICAgIFRoZSBkZWNvZGVyIG11c3QgYmUgYWJsZSB0byBoYW5kbGUgemVybyBsZW5ndGggaW5wdXQgYW5kCiAgICAgICAgICAgIHJldHVybiBhbiBlbXB0eSBvYmplY3Qgb2YgdGhlIG91dHB1dCBvYmplY3QgdHlwZSBpbiB0aGlzCiAgICAgICAgICAgIHNpdHVhdGlvbi4KCiAgICAgICAgIiIiCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcgoKY2xhc3MgSW5jcmVtZW50YWxFbmNvZGVyKG9iamVjdCk6CiAgICAiIiIKICAgIEFuIEluY3JlbWVudGFsRW5jb2RlciBlbmNvZGVzIGFuIGlucHV0IGluIG11bHRpcGxlIHN0ZXBzLiBUaGUgaW5wdXQgY2FuCiAgICBiZSBwYXNzZWQgcGllY2UgYnkgcGllY2UgdG8gdGhlIGVuY29kZSgpIG1ldGhvZC4gVGhlIEluY3JlbWVudGFsRW5jb2RlcgogICAgcmVtZW1iZXJzIHRoZSBzdGF0ZSBvZiB0aGUgZW5jb2RpbmcgcHJvY2VzcyBiZXR3ZWVuIGNhbGxzIHRvIGVuY29kZSgpLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgZXJyb3JzPSdzdHJpY3QnKToKICAgICAgICAiIiIKICAgICAgICBDcmVhdGVzIGFuIEluY3JlbWVudGFsRW5jb2RlciBpbnN0YW5jZS4KCiAgICAgICAgVGhlIEluY3JlbWVudGFsRW5jb2RlciBtYXkgdXNlIGRpZmZlcmVudCBlcnJvciBoYW5kbGluZyBzY2hlbWVzIGJ5CiAgICAgICAgcHJvdmlkaW5nIHRoZSBlcnJvcnMga2V5d29yZCBhcmd1bWVudC4gU2VlIHRoZSBtb2R1bGUgZG9jc3RyaW5nCiAgICAgICAgZm9yIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5lcnJvcnMgPSBlcnJvcnMKICAgICAgICBzZWxmLmJ1ZmZlciA9ICIiCgogICAgZGVmIGVuY29kZShzZWxmLCBpbnB1dCwgZmluYWw9RmFsc2UpOgogICAgICAgICIiIgogICAgICAgIEVuY29kZXMgaW5wdXQgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBvYmplY3QuCiAgICAgICAgIiIiCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcgoKICAgIGRlZiByZXNldChzZWxmKToKICAgICAgICAiIiIKICAgICAgICBSZXNldHMgdGhlIGVuY29kZXIgdG8gdGhlIGluaXRpYWwgc3RhdGUuCiAgICAgICAgIiIiCgogICAgZGVmIGdldHN0YXRlKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZW5jb2Rlci4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gMAoKICAgIGRlZiBzZXRzdGF0ZShzZWxmLCBzdGF0ZSk6CiAgICAgICAgIiIiCiAgICAgICAgU2V0IHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBlbmNvZGVyLiBzdGF0ZSBtdXN0IGhhdmUgYmVlbgogICAgICAgIHJldHVybmVkIGJ5IGdldHN0YXRlKCkuCiAgICAgICAgIiIiCgpjbGFzcyBCdWZmZXJlZEluY3JlbWVudGFsRW5jb2RlcihJbmNyZW1lbnRhbEVuY29kZXIpOgogICAgIiIiCiAgICBUaGlzIHN1YmNsYXNzIG9mIEluY3JlbWVudGFsRW5jb2RlciBjYW4gYmUgdXNlZCBhcyB0aGUgYmFzZWNsYXNzIGZvciBhbgogICAgaW5jcmVtZW50YWwgZW5jb2RlciBpZiB0aGUgZW5jb2RlciBtdXN0IGtlZXAgc29tZSBvZiB0aGUgb3V0cHV0IGluIGEKICAgIGJ1ZmZlciBiZXR3ZWVuIGNhbGxzIHRvIGVuY29kZSgpLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgZXJyb3JzPSdzdHJpY3QnKToKICAgICAgICBJbmNyZW1lbnRhbEVuY29kZXIuX19pbml0X18oc2VsZiwgZXJyb3JzKQogICAgICAgICMgdW5lbmNvZGVkIGlucHV0IHRoYXQgaXMga2VwdCBiZXR3ZWVuIGNhbGxzIHRvIGVuY29kZSgpCiAgICAgICAgc2VsZi5idWZmZXIgPSAiIgoKICAgIGRlZiBfYnVmZmVyX2VuY29kZShzZWxmLCBpbnB1dCwgZXJyb3JzLCBmaW5hbCk6CiAgICAgICAgIyBPdmVyd3JpdGUgdGhpcyBtZXRob2QgaW4gc3ViY2xhc3NlczogSXQgbXVzdCBlbmNvZGUgaW5wdXQKICAgICAgICAjIGFuZCByZXR1cm4gYW4gKG91dHB1dCwgbGVuZ3RoIGNvbnN1bWVkKSB0dXBsZQogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IKCiAgICBkZWYgZW5jb2RlKHNlbGYsIGlucHV0LCBmaW5hbD1GYWxzZSk6CiAgICAgICAgIyBlbmNvZGUgaW5wdXQgKHRha2luZyB0aGUgYnVmZmVyIGludG8gYWNjb3VudCkKICAgICAgICBkYXRhID0gc2VsZi5idWZmZXIgKyBpbnB1dAogICAgICAgIChyZXN1bHQsIGNvbnN1bWVkKSA9IHNlbGYuX2J1ZmZlcl9lbmNvZGUoZGF0YSwgc2VsZi5lcnJvcnMsIGZpbmFsKQogICAgICAgICMga2VlcCB1bmVuY29kZWQgaW5wdXQgdW50aWwgdGhlIG5leHQgY2FsbAogICAgICAgIHNlbGYuYnVmZmVyID0gZGF0YVtjb25zdW1lZDpdCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiByZXNldChzZWxmKToKICAgICAgICBJbmNyZW1lbnRhbEVuY29kZXIucmVzZXQoc2VsZikKICAgICAgICBzZWxmLmJ1ZmZlciA9ICIiCgogICAgZGVmIGdldHN0YXRlKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlciBvciAwCgogICAgZGVmIHNldHN0YXRlKHNlbGYsIHN0YXRlKToKICAgICAgICBzZWxmLmJ1ZmZlciA9IHN0YXRlIG9yICIiCgpjbGFzcyBJbmNyZW1lbnRhbERlY29kZXIob2JqZWN0KToKICAgICIiIgogICAgQW4gSW5jcmVtZW50YWxEZWNvZGVyIGRlY29kZXMgYW4gaW5wdXQgaW4gbXVsdGlwbGUgc3RlcHMuIFRoZSBpbnB1dCBjYW4KICAgIGJlIHBhc3NlZCBwaWVjZSBieSBwaWVjZSB0byB0aGUgZGVjb2RlKCkgbWV0aG9kLiBUaGUgSW5jcmVtZW50YWxEZWNvZGVyCiAgICByZW1lbWJlcnMgdGhlIHN0YXRlIG9mIHRoZSBkZWNvZGluZyBwcm9jZXNzIGJldHdlZW4gY2FsbHMgdG8gZGVjb2RlKCkuCiAgICAiIiIKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBlcnJvcnM9J3N0cmljdCcpOgogICAgICAgICIiIgogICAgICAgIENyZWF0ZSBhIEluY3JlbWVudGFsRGVjb2RlciBpbnN0YW5jZS4KCiAgICAgICAgVGhlIEluY3JlbWVudGFsRGVjb2RlciBtYXkgdXNlIGRpZmZlcmVudCBlcnJvciBoYW5kbGluZyBzY2hlbWVzIGJ5CiAgICAgICAgcHJvdmlkaW5nIHRoZSBlcnJvcnMga2V5d29yZCBhcmd1bWVudC4gU2VlIHRoZSBtb2R1bGUgZG9jc3RyaW5nCiAgICAgICAgZm9yIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5lcnJvcnMgPSBlcnJvcnMKCiAgICBkZWYgZGVjb2RlKHNlbGYsIGlucHV0LCBmaW5hbD1GYWxzZSk6CiAgICAgICAgIiIiCiAgICAgICAgRGVjb2RlIGlucHV0IGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgb2JqZWN0LgogICAgICAgICIiIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IKCiAgICBkZWYgcmVzZXQoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgUmVzZXQgdGhlIGRlY29kZXIgdG8gdGhlIGluaXRpYWwgc3RhdGUuCiAgICAgICAgIiIiCgogICAgZGVmIGdldHN0YXRlKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZGVjb2Rlci4KCiAgICAgICAgVGhpcyBtdXN0IGJlIGEgKGJ1ZmZlcmVkX2lucHV0LCBhZGRpdGlvbmFsX3N0YXRlX2luZm8pIHR1cGxlLgogICAgICAgIGJ1ZmZlcmVkX2lucHV0IG11c3QgYmUgYSBieXRlcyBvYmplY3QgY29udGFpbmluZyBieXRlcyB0aGF0CiAgICAgICAgd2VyZSBwYXNzZWQgdG8gZGVjb2RlKCkgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBjb252ZXJ0ZWQuCiAgICAgICAgYWRkaXRpb25hbF9zdGF0ZV9pbmZvIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlcgogICAgICAgIHJlcHJlc2VudGluZyB0aGUgc3RhdGUgb2YgdGhlIGRlY29kZXIgV0lUSE9VVCB5ZXQgaGF2aW5nCiAgICAgICAgcHJvY2Vzc2VkIHRoZSBjb250ZW50cyBvZiBidWZmZXJlZF9pbnB1dC4gIEluIHRoZSBpbml0aWFsIHN0YXRlCiAgICAgICAgYW5kIGFmdGVyIHJlc2V0KCksIGdldHN0YXRlKCkgbXVzdCByZXR1cm4gKGIiIiwgMCkuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIChiIiIsIDApCgogICAgZGVmIHNldHN0YXRlKHNlbGYsIHN0YXRlKToKICAgICAgICAiIiIKICAgICAgICBTZXQgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRlY29kZXIuCgogICAgICAgIHN0YXRlIG11c3QgaGF2ZSBiZWVuIHJldHVybmVkIGJ5IGdldHN0YXRlKCkuICBUaGUgZWZmZWN0IG9mCiAgICAgICAgc2V0c3RhdGUoKGIiIiwgMCkpIG11c3QgYmUgZXF1aXZhbGVudCB0byByZXNldCgpLgogICAgICAgICIiIgoKY2xhc3MgQnVmZmVyZWRJbmNyZW1lbnRhbERlY29kZXIoSW5jcmVtZW50YWxEZWNvZGVyKToKICAgICIiIgogICAgVGhpcyBzdWJjbGFzcyBvZiBJbmNyZW1lbnRhbERlY29kZXIgY2FuIGJlIHVzZWQgYXMgdGhlIGJhc2VjbGFzcyBmb3IgYW4KICAgIGluY3JlbWVudGFsIGRlY29kZXIgaWYgdGhlIGRlY29kZXIgbXVzdCBiZSBhYmxlIHRvIGhhbmRsZSBpbmNvbXBsZXRlCiAgICBieXRlIHNlcXVlbmNlcy4KICAgICIiIgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGVycm9ycz0nc3RyaWN0Jyk6CiAgICAgICAgSW5jcmVtZW50YWxEZWNvZGVyLl9faW5pdF9fKHNlbGYsIGVycm9ycykKICAgICAgICAjIHVuZGVjb2RlZCBpbnB1dCB0aGF0IGlzIGtlcHQgYmV0d2VlbiBjYWxscyB0byBkZWNvZGUoKQogICAgICAgIHNlbGYuYnVmZmVyID0gYiIiCgogICAgZGVmIF9idWZmZXJfZGVjb2RlKHNlbGYsIGlucHV0LCBlcnJvcnMsIGZpbmFsKToKICAgICAgICAjIE92ZXJ3cml0ZSB0aGlzIG1ldGhvZCBpbiBzdWJjbGFzc2VzOiBJdCBtdXN0IGRlY29kZSBpbnB1dAogICAgICAgICMgYW5kIHJldHVybiBhbiAob3V0cHV0LCBsZW5ndGggY29uc3VtZWQpIHR1cGxlCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcgoKICAgIGRlZiBkZWNvZGUoc2VsZiwgaW5wdXQsIGZpbmFsPUZhbHNlKToKICAgICAgICAjIGRlY29kZSBpbnB1dCAodGFraW5nIHRoZSBidWZmZXIgaW50byBhY2NvdW50KQogICAgICAgIGRhdGEgPSBzZWxmLmJ1ZmZlciArIGlucHV0CiAgICAgICAgKHJlc3VsdCwgY29uc3VtZWQpID0gc2VsZi5fYnVmZmVyX2RlY29kZShkYXRhLCBzZWxmLmVycm9ycywgZmluYWwpCiAgICAgICAgIyBrZWVwIHVuZGVjb2RlZCBpbnB1dCB1bnRpbCB0aGUgbmV4dCBjYWxsCiAgICAgICAgc2VsZi5idWZmZXIgPSBkYXRhW2NvbnN1bWVkOl0KICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIHJlc2V0KHNlbGYpOgogICAgICAgIEluY3JlbWVudGFsRGVjb2Rlci5yZXNldChzZWxmKQogICAgICAgIHNlbGYuYnVmZmVyID0gYiIiCgogICAgZGVmIGdldHN0YXRlKHNlbGYpOgogICAgICAgICMgYWRkaXRpb25hbCBzdGF0ZSBpbmZvIGlzIGFsd2F5cyAwCiAgICAgICAgcmV0dXJuIChzZWxmLmJ1ZmZlciwgMCkKCiAgICBkZWYgc2V0c3RhdGUoc2VsZiwgc3RhdGUpOgogICAgICAgICMgaWdub3JlIGFkZGl0aW9uYWwgc3RhdGUgaW5mbwogICAgICAgIHNlbGYuYnVmZmVyID0gc3RhdGVbMF0KCiMKIyBUaGUgU3RyZWFtV3JpdGVyIGFuZCBTdHJlYW1SZWFkZXIgY2xhc3MgcHJvdmlkZSBnZW5lcmljIHdvcmtpbmcKIyBpbnRlcmZhY2VzIHdoaWNoIGNhbiBiZSB1c2VkIHRvIGltcGxlbWVudCBuZXcgZW5jb2Rpbmcgc3VibW9kdWxlcwojIHZlcnkgZWFzaWx5LiBTZWUgZW5jb2RpbmdzL3V0Zl84LnB5IGZvciBhbiBleGFtcGxlIG9uIGhvdyB0aGlzIGlzCiMgZG9uZS4KIwoKY2xhc3MgU3RyZWFtV3JpdGVyKENvZGVjKToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RyZWFtLCBlcnJvcnM9J3N0cmljdCcpOgoKICAgICAgICAiIiIgQ3JlYXRlcyBhIFN0cmVhbVdyaXRlciBpbnN0YW5jZS4KCiAgICAgICAgICAgIHN0cmVhbSBtdXN0IGJlIGEgZmlsZS1saWtlIG9iamVjdCBvcGVuIGZvciB3cml0aW5nCiAgICAgICAgICAgIChiaW5hcnkpIGRhdGEuCgogICAgICAgICAgICBUaGUgU3RyZWFtV3JpdGVyIG1heSB1c2UgZGlmZmVyZW50IGVycm9yIGhhbmRsaW5nCiAgICAgICAgICAgIHNjaGVtZXMgYnkgcHJvdmlkaW5nIHRoZSBlcnJvcnMga2V5d29yZCBhcmd1bWVudC4gVGhlc2UKICAgICAgICAgICAgcGFyYW1ldGVycyBhcmUgcHJlZGVmaW5lZDoKCiAgICAgICAgICAgICAnc3RyaWN0JyAtIHJhaXNlIGEgVmFsdWVFcnJvciAob3IgYSBzdWJjbGFzcykKICAgICAgICAgICAgICdpZ25vcmUnIC0gaWdub3JlIHRoZSBjaGFyYWN0ZXIgYW5kIGNvbnRpbnVlIHdpdGggdGhlIG5leHQKICAgICAgICAgICAgICdyZXBsYWNlJy0gcmVwbGFjZSB3aXRoIGEgc3VpdGFibGUgcmVwbGFjZW1lbnQgY2hhcmFjdGVyCiAgICAgICAgICAgICAneG1sY2hhcnJlZnJlcGxhY2UnIC0gUmVwbGFjZSB3aXRoIHRoZSBhcHByb3ByaWF0ZSBYTUwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXIgcmVmZXJlbmNlLgogICAgICAgICAgICAgJ2JhY2tzbGFzaHJlcGxhY2UnICAtIFJlcGxhY2Ugd2l0aCBiYWNrc2xhc2hlZCBlc2NhcGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZXMgKG9ubHkgZm9yIGVuY29kaW5nKS4KCiAgICAgICAgICAgIFRoZSBzZXQgb2YgYWxsb3dlZCBwYXJhbWV0ZXIgdmFsdWVzIGNhbiBiZSBleHRlbmRlZCB2aWEKICAgICAgICAgICAgcmVnaXN0ZXJfZXJyb3IuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5zdHJlYW0gPSBzdHJlYW0KICAgICAgICBzZWxmLmVycm9ycyA9IGVycm9ycwoKICAgIGRlZiB3cml0ZShzZWxmLCBvYmplY3QpOgoKICAgICAgICAiIiIgV3JpdGVzIHRoZSBvYmplY3QncyBjb250ZW50cyBlbmNvZGVkIHRvIHNlbGYuc3RyZWFtLgogICAgICAgICIiIgogICAgICAgIGRhdGEsIGNvbnN1bWVkID0gc2VsZi5lbmNvZGUob2JqZWN0LCBzZWxmLmVycm9ycykKICAgICAgICBzZWxmLnN0cmVhbS53cml0ZShkYXRhKQoKICAgIGRlZiB3cml0ZWxpbmVzKHNlbGYsIGxpc3QpOgoKICAgICAgICAiIiIgV3JpdGVzIHRoZSBjb25jYXRlbmF0ZWQgbGlzdCBvZiBzdHJpbmdzIHRvIHRoZSBzdHJlYW0KICAgICAgICAgICAgdXNpbmcgLndyaXRlKCkuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi53cml0ZSgnJy5qb2luKGxpc3QpKQoKICAgIGRlZiByZXNldChzZWxmKToKCiAgICAgICAgIiIiIEZsdXNoZXMgYW5kIHJlc2V0cyB0aGUgY29kZWMgYnVmZmVycyB1c2VkIGZvciBrZWVwaW5nIHN0YXRlLgoKICAgICAgICAgICAgQ2FsbGluZyB0aGlzIG1ldGhvZCBzaG91bGQgZW5zdXJlIHRoYXQgdGhlIGRhdGEgb24gdGhlCiAgICAgICAgICAgIG91dHB1dCBpcyBwdXQgaW50byBhIGNsZWFuIHN0YXRlLCB0aGF0IGFsbG93cyBhcHBlbmRpbmcKICAgICAgICAgICAgb2YgbmV3IGZyZXNoIGRhdGEgd2l0aG91dCBoYXZpbmcgdG8gcmVzY2FuIHRoZSB3aG9sZQogICAgICAgICAgICBzdHJlYW0gdG8gcmVjb3ZlciBzdGF0ZS4KCiAgICAgICAgIiIiCiAgICAgICAgcGFzcwoKICAgIGRlZiBzZWVrKHNlbGYsIG9mZnNldCwgd2hlbmNlPTApOgogICAgICAgIHNlbGYuc3RyZWFtLnNlZWsob2Zmc2V0LCB3aGVuY2UpCiAgICAgICAgaWYgd2hlbmNlID09IDAgYW5kIG9mZnNldCA9PSAwOgogICAgICAgICAgICBzZWxmLnJlc2V0KCkKCiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgbmFtZSwKICAgICAgICAgICAgICAgICAgICBnZXRhdHRyPWdldGF0dHIpOgoKICAgICAgICAiIiIgSW5oZXJpdCBhbGwgb3RoZXIgbWV0aG9kcyBmcm9tIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gZ2V0YXR0cihzZWxmLnN0cmVhbSwgbmFtZSkKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIHR5cGUsIHZhbHVlLCB0Yik6CiAgICAgICAgc2VsZi5zdHJlYW0uY2xvc2UoKQoKIyMjCgpjbGFzcyBTdHJlYW1SZWFkZXIoQ29kZWMpOgoKICAgIGNoYXJidWZmZXJ0eXBlID0gc3RyCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbSwgZXJyb3JzPSdzdHJpY3QnKToKCiAgICAgICAgIiIiIENyZWF0ZXMgYSBTdHJlYW1SZWFkZXIgaW5zdGFuY2UuCgogICAgICAgICAgICBzdHJlYW0gbXVzdCBiZSBhIGZpbGUtbGlrZSBvYmplY3Qgb3BlbiBmb3IgcmVhZGluZwogICAgICAgICAgICAoYmluYXJ5KSBkYXRhLgoKICAgICAgICAgICAgVGhlIFN0cmVhbVJlYWRlciBtYXkgdXNlIGRpZmZlcmVudCBlcnJvciBoYW5kbGluZwogICAgICAgICAgICBzY2hlbWVzIGJ5IHByb3ZpZGluZyB0aGUgZXJyb3JzIGtleXdvcmQgYXJndW1lbnQuIFRoZXNlCiAgICAgICAgICAgIHBhcmFtZXRlcnMgYXJlIHByZWRlZmluZWQ6CgogICAgICAgICAgICAgJ3N0cmljdCcgLSByYWlzZSBhIFZhbHVlRXJyb3IgKG9yIGEgc3ViY2xhc3MpCiAgICAgICAgICAgICAnaWdub3JlJyAtIGlnbm9yZSB0aGUgY2hhcmFjdGVyIGFuZCBjb250aW51ZSB3aXRoIHRoZSBuZXh0CiAgICAgICAgICAgICAncmVwbGFjZSctIHJlcGxhY2Ugd2l0aCBhIHN1aXRhYmxlIHJlcGxhY2VtZW50IGNoYXJhY3RlcjsKCiAgICAgICAgICAgIFRoZSBzZXQgb2YgYWxsb3dlZCBwYXJhbWV0ZXIgdmFsdWVzIGNhbiBiZSBleHRlbmRlZCB2aWEKICAgICAgICAgICAgcmVnaXN0ZXJfZXJyb3IuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5zdHJlYW0gPSBzdHJlYW0KICAgICAgICBzZWxmLmVycm9ycyA9IGVycm9ycwogICAgICAgIHNlbGYuYnl0ZWJ1ZmZlciA9IGIiIgogICAgICAgIHNlbGYuX2VtcHR5X2NoYXJidWZmZXIgPSBzZWxmLmNoYXJidWZmZXJ0eXBlKCkKICAgICAgICBzZWxmLmNoYXJidWZmZXIgPSBzZWxmLl9lbXB0eV9jaGFyYnVmZmVyCiAgICAgICAgc2VsZi5saW5lYnVmZmVyID0gTm9uZQoKICAgIGRlZiBkZWNvZGUoc2VsZiwgaW5wdXQsIGVycm9ycz0nc3RyaWN0Jyk6CiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcgoKICAgIGRlZiByZWFkKHNlbGYsIHNpemU9LTEsIGNoYXJzPS0xLCBmaXJzdGxpbmU9RmFsc2UpOgoKICAgICAgICAiIiIgRGVjb2RlcyBkYXRhIGZyb20gdGhlIHN0cmVhbSBzZWxmLnN0cmVhbSBhbmQgcmV0dXJucyB0aGUKICAgICAgICAgICAgcmVzdWx0aW5nIG9iamVjdC4KCiAgICAgICAgICAgIGNoYXJzIGluZGljYXRlcyB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgdG8gcmVhZCBmcm9tIHRoZQogICAgICAgICAgICBzdHJlYW0uIHJlYWQoKSB3aWxsIG5ldmVyIHJldHVybiBtb3JlIHRoYW4gY2hhcnMKICAgICAgICAgICAgY2hhcmFjdGVycywgYnV0IGl0IG1pZ2h0IHJldHVybiBsZXNzLCBpZiB0aGVyZSBhcmUgbm90IGVub3VnaAogICAgICAgICAgICBjaGFyYWN0ZXJzIGF2YWlsYWJsZS4KCiAgICAgICAgICAgIHNpemUgaW5kaWNhdGVzIHRoZSBhcHByb3hpbWF0ZSBtYXhpbXVtIG51bWJlciBvZiBieXRlcyB0bwogICAgICAgICAgICByZWFkIGZyb20gdGhlIHN0cmVhbSBmb3IgZGVjb2RpbmcgcHVycG9zZXMuIFRoZSBkZWNvZGVyCiAgICAgICAgICAgIGNhbiBtb2RpZnkgdGhpcyBzZXR0aW5nIGFzIGFwcHJvcHJpYXRlLiBUaGUgZGVmYXVsdCB2YWx1ZQogICAgICAgICAgICAtMSBpbmRpY2F0ZXMgdG8gcmVhZCBhbmQgZGVjb2RlIGFzIG11Y2ggYXMgcG9zc2libGUuICBzaXplCiAgICAgICAgICAgIGlzIGludGVuZGVkIHRvIHByZXZlbnQgaGF2aW5nIHRvIGRlY29kZSBodWdlIGZpbGVzIGluIG9uZQogICAgICAgICAgICBzdGVwLgoKICAgICAgICAgICAgSWYgZmlyc3RsaW5lIGlzIHRydWUsIGFuZCBhIFVuaWNvZGVEZWNvZGVFcnJvciBoYXBwZW5zCiAgICAgICAgICAgIGFmdGVyIHRoZSBmaXJzdCBsaW5lIHRlcm1pbmF0b3IgaW4gdGhlIGlucHV0IG9ubHkgdGhlIGZpcnN0IGxpbmUKICAgICAgICAgICAgd2lsbCBiZSByZXR1cm5lZCwgdGhlIHJlc3Qgb2YgdGhlIGlucHV0IHdpbGwgYmUga2VwdCB1bnRpbCB0aGUKICAgICAgICAgICAgbmV4dCBjYWxsIHRvIHJlYWQoKS4KCiAgICAgICAgICAgIFRoZSBtZXRob2Qgc2hvdWxkIHVzZSBhIGdyZWVkeSByZWFkIHN0cmF0ZWd5IG1lYW5pbmcgdGhhdAogICAgICAgICAgICBpdCBzaG91bGQgcmVhZCBhcyBtdWNoIGRhdGEgYXMgaXMgYWxsb3dlZCB3aXRoaW4gdGhlCiAgICAgICAgICAgIGRlZmluaXRpb24gb2YgdGhlIGVuY29kaW5nIGFuZCB0aGUgZ2l2ZW4gc2l6ZSwgZS5nLiAgaWYKICAgICAgICAgICAgb3B0aW9uYWwgZW5jb2RpbmcgZW5kaW5ncyBvciBzdGF0ZSBtYXJrZXJzIGFyZSBhdmFpbGFibGUKICAgICAgICAgICAgb24gdGhlIHN0cmVhbSwgdGhlc2Ugc2hvdWxkIGJlIHJlYWQgdG9vLgogICAgICAgICIiIgogICAgICAgICMgSWYgd2UgaGF2ZSBsaW5lcyBjYWNoZWQsIGZpcnN0IG1lcmdlIHRoZW0gYmFjayBpbnRvIGNoYXJhY3RlcnMKICAgICAgICBpZiBzZWxmLmxpbmVidWZmZXI6CiAgICAgICAgICAgIHNlbGYuY2hhcmJ1ZmZlciA9IHNlbGYuX2VtcHR5X2NoYXJidWZmZXIuam9pbihzZWxmLmxpbmVidWZmZXIpCiAgICAgICAgICAgIHNlbGYubGluZWJ1ZmZlciA9IE5vbmUKCiAgICAgICAgIyByZWFkIHVudGlsIHdlIGdldCB0aGUgcmVxdWlyZWQgbnVtYmVyIG9mIGNoYXJhY3RlcnMgKGlmIGF2YWlsYWJsZSkKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAjIGNhbiB0aGUgcmVxdWVzdCBjYW4gYmUgc2F0aXNmaWVkIGZyb20gdGhlIGNoYXJhY3RlciBidWZmZXI/CiAgICAgICAgICAgIGlmIGNoYXJzIDwgMDoKICAgICAgICAgICAgICAgIGlmIHNpemUgPCAwOgogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuY2hhcmJ1ZmZlcjoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsaWYgbGVuKHNlbGYuY2hhcmJ1ZmZlcikgPj0gc2l6ZToKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgbGVuKHNlbGYuY2hhcmJ1ZmZlcikgPj0gY2hhcnM6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgIyB3ZSBuZWVkIG1vcmUgZGF0YQogICAgICAgICAgICBpZiBzaXplIDwgMDoKICAgICAgICAgICAgICAgIG5ld2RhdGEgPSBzZWxmLnN0cmVhbS5yZWFkKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG5ld2RhdGEgPSBzZWxmLnN0cmVhbS5yZWFkKHNpemUpCiAgICAgICAgICAgICMgZGVjb2RlIGJ5dGVzICh0aG9zZSByZW1haW5pbmcgZnJvbSB0aGUgbGFzdCBjYWxsIGluY2x1ZGVkKQogICAgICAgICAgICBkYXRhID0gc2VsZi5ieXRlYnVmZmVyICsgbmV3ZGF0YQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBuZXdjaGFycywgZGVjb2RlZGJ5dGVzID0gc2VsZi5kZWNvZGUoZGF0YSwgc2VsZi5lcnJvcnMpCiAgICAgICAgICAgIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3IgYXMgZXhjOgogICAgICAgICAgICAgICAgaWYgZmlyc3RsaW5lOgogICAgICAgICAgICAgICAgICAgIG5ld2NoYXJzLCBkZWNvZGVkYnl0ZXMgPSBcCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGVjb2RlKGRhdGFbOmV4Yy5zdGFydF0sIHNlbGYuZXJyb3JzKQogICAgICAgICAgICAgICAgICAgIGxpbmVzID0gbmV3Y2hhcnMuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKQogICAgICAgICAgICAgICAgICAgIGlmIGxlbihsaW5lcyk8PTE6CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICMga2VlcCB1bmRlY29kZWQgYnl0ZXMgdW50aWwgdGhlIG5leHQgY2FsbAogICAgICAgICAgICBzZWxmLmJ5dGVidWZmZXIgPSBkYXRhW2RlY29kZWRieXRlczpdCiAgICAgICAgICAgICMgcHV0IG5ldyBjaGFyYWN0ZXJzIGluIHRoZSBjaGFyYWN0ZXIgYnVmZmVyCiAgICAgICAgICAgIHNlbGYuY2hhcmJ1ZmZlciArPSBuZXdjaGFycwogICAgICAgICAgICAjIHRoZXJlIHdhcyBubyBkYXRhIGF2YWlsYWJsZQogICAgICAgICAgICBpZiBub3QgbmV3ZGF0YToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgaWYgY2hhcnMgPCAwOgogICAgICAgICAgICAjIFJldHVybiBldmVyeXRoaW5nIHdlJ3ZlIGdvdAogICAgICAgICAgICByZXN1bHQgPSBzZWxmLmNoYXJidWZmZXIKICAgICAgICAgICAgc2VsZi5jaGFyYnVmZmVyID0gc2VsZi5fZW1wdHlfY2hhcmJ1ZmZlcgogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgUmV0dXJuIHRoZSBmaXJzdCBjaGFycyBjaGFyYWN0ZXJzCiAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYuY2hhcmJ1ZmZlcls6Y2hhcnNdCiAgICAgICAgICAgIHNlbGYuY2hhcmJ1ZmZlciA9IHNlbGYuY2hhcmJ1ZmZlcltjaGFyczpdCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiByZWFkbGluZShzZWxmLCBzaXplPU5vbmUsIGtlZXBlbmRzPVRydWUpOgoKICAgICAgICAiIiIgUmVhZCBvbmUgbGluZSBmcm9tIHRoZSBpbnB1dCBzdHJlYW0gYW5kIHJldHVybiB0aGUKICAgICAgICAgICAgZGVjb2RlZCBkYXRhLgoKICAgICAgICAgICAgc2l6ZSwgaWYgZ2l2ZW4sIGlzIHBhc3NlZCBhcyBzaXplIGFyZ3VtZW50IHRvIHRoZQogICAgICAgICAgICByZWFkKCkgbWV0aG9kLgoKICAgICAgICAiIiIKICAgICAgICAjIElmIHdlIGhhdmUgbGluZXMgY2FjaGVkIGZyb20gYW4gZWFybGllciByZWFkLCByZXR1cm4KICAgICAgICAjIHRoZW0gdW5jb25kaXRpb25hbGx5CiAgICAgICAgaWYgc2VsZi5saW5lYnVmZmVyOgogICAgICAgICAgICBsaW5lID0gc2VsZi5saW5lYnVmZmVyWzBdCiAgICAgICAgICAgIGRlbCBzZWxmLmxpbmVidWZmZXJbMF0KICAgICAgICAgICAgaWYgbGVuKHNlbGYubGluZWJ1ZmZlcikgPT0gMToKICAgICAgICAgICAgICAgICMgcmV2ZXJ0IHRvIGNoYXJidWZmZXIgbW9kZTsgd2UgbWlnaHQgbmVlZCBtb3JlIGRhdGEKICAgICAgICAgICAgICAgICMgbmV4dCB0aW1lCiAgICAgICAgICAgICAgICBzZWxmLmNoYXJidWZmZXIgPSBzZWxmLmxpbmVidWZmZXJbMF0KICAgICAgICAgICAgICAgIHNlbGYubGluZWJ1ZmZlciA9IE5vbmUKICAgICAgICAgICAgaWYgbm90IGtlZXBlbmRzOgogICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc3BsaXRsaW5lcyhrZWVwZW5kcz1GYWxzZSlbMF0KICAgICAgICAgICAgcmV0dXJuIGxpbmUKCiAgICAgICAgcmVhZHNpemUgPSBzaXplIG9yIDcyCiAgICAgICAgbGluZSA9IHNlbGYuX2VtcHR5X2NoYXJidWZmZXIKICAgICAgICAjIElmIHNpemUgaXMgZ2l2ZW4sIHdlIGNhbGwgcmVhZCgpIG9ubHkgb25jZQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIGRhdGEgPSBzZWxmLnJlYWQocmVhZHNpemUsIGZpcnN0bGluZT1UcnVlKQogICAgICAgICAgICBpZiBkYXRhOgogICAgICAgICAgICAgICAgIyBJZiB3ZSdyZSBhdCBhICJcciIgcmVhZCBvbmUgZXh0cmEgY2hhcmFjdGVyICh3aGljaCBtaWdodAogICAgICAgICAgICAgICAgIyBiZSBhICJcbiIpIHRvIGdldCBhIHByb3BlciBsaW5lIGVuZGluZy4gSWYgdGhlIHN0cmVhbSBpcwogICAgICAgICAgICAgICAgIyB0ZW1wb3JhcmlseSBleGhhdXN0ZWQgd2UgcmV0dXJuIHRoZSB3cm9uZyBsaW5lIGVuZGluZy4KICAgICAgICAgICAgICAgIGlmIChpc2luc3RhbmNlKGRhdGEsIHN0cikgYW5kIGRhdGEuZW5kc3dpdGgoIlxyIikpIG9yIFwKICAgICAgICAgICAgICAgICAgIChpc2luc3RhbmNlKGRhdGEsIGJ5dGVzKSBhbmQgZGF0YS5lbmRzd2l0aChiIlxyIikpOgogICAgICAgICAgICAgICAgICAgIGRhdGEgKz0gc2VsZi5yZWFkKHNpemU9MSwgY2hhcnM9MSkKCiAgICAgICAgICAgIGxpbmUgKz0gZGF0YQogICAgICAgICAgICBsaW5lcyA9IGxpbmUuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKQogICAgICAgICAgICBpZiBsaW5lczoKICAgICAgICAgICAgICAgIGlmIGxlbihsaW5lcykgPiAxOgogICAgICAgICAgICAgICAgICAgICMgTW9yZSB0aGFuIG9uZSBsaW5lIHJlc3VsdDsgdGhlIGZpcnN0IGxpbmUgaXMgYSBmdWxsIGxpbmUKICAgICAgICAgICAgICAgICAgICAjIHRvIHJldHVybgogICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lc1swXQogICAgICAgICAgICAgICAgICAgIGRlbCBsaW5lc1swXQogICAgICAgICAgICAgICAgICAgIGlmIGxlbihsaW5lcykgPiAxOgogICAgICAgICAgICAgICAgICAgICAgICAjIGNhY2hlIHRoZSByZW1haW5pbmcgbGluZXMKICAgICAgICAgICAgICAgICAgICAgICAgbGluZXNbLTFdICs9IHNlbGYuY2hhcmJ1ZmZlcgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxpbmVidWZmZXIgPSBsaW5lcwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYXJidWZmZXIgPSBOb25lCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgIyBvbmx5IG9uZSByZW1haW5pbmcgbGluZSwgcHV0IGl0IGJhY2sgaW50byBjaGFyYnVmZmVyCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhcmJ1ZmZlciA9IGxpbmVzWzBdICsgc2VsZi5jaGFyYnVmZmVyCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGtlZXBlbmRzOgogICAgICAgICAgICAgICAgICAgICAgICBsaW5lID0gbGluZS5zcGxpdGxpbmVzKGtlZXBlbmRzPUZhbHNlKVswXQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBsaW5lMHdpdGhlbmQgPSBsaW5lc1swXQogICAgICAgICAgICAgICAgbGluZTB3aXRob3V0ZW5kID0gbGluZXNbMF0uc3BsaXRsaW5lcyhrZWVwZW5kcz1GYWxzZSlbMF0KICAgICAgICAgICAgICAgIGlmIGxpbmUwd2l0aGVuZCAhPSBsaW5lMHdpdGhvdXRlbmQ6ICMgV2UgcmVhbGx5IGhhdmUgYSBsaW5lIGVuZAogICAgICAgICAgICAgICAgICAgICMgUHV0IHRoZSByZXN0IGJhY2sgdG9nZXRoZXIgYW5kIGtlZXAgaXQgdW50aWwgdGhlIG5leHQgY2FsbAogICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhcmJ1ZmZlciA9IHNlbGYuX2VtcHR5X2NoYXJidWZmZXIuam9pbihsaW5lc1sxOl0pICsgXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhcmJ1ZmZlcgogICAgICAgICAgICAgICAgICAgIGlmIGtlZXBlbmRzOgogICAgICAgICAgICAgICAgICAgICAgICBsaW5lID0gbGluZTB3aXRoZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgbGluZSA9IGxpbmUwd2l0aG91dGVuZAogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICMgd2UgZGlkbid0IGdldCBhbnl0aGluZyBvciB0aGlzIHdhcyBvdXIgb25seSB0cnkKICAgICAgICAgICAgaWYgbm90IGRhdGEgb3Igc2l6ZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGlmIGxpbmUgYW5kIG5vdCBrZWVwZW5kczoKICAgICAgICAgICAgICAgICAgICBsaW5lID0gbGluZS5zcGxpdGxpbmVzKGtlZXBlbmRzPUZhbHNlKVswXQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgaWYgcmVhZHNpemUgPCA4MDAwOgogICAgICAgICAgICAgICAgcmVhZHNpemUgKj0gMgogICAgICAgIHJldHVybiBsaW5lCgogICAgZGVmIHJlYWRsaW5lcyhzZWxmLCBzaXplaGludD1Ob25lLCBrZWVwZW5kcz1UcnVlKToKCiAgICAgICAgIiIiIFJlYWQgYWxsIGxpbmVzIGF2YWlsYWJsZSBvbiB0aGUgaW5wdXQgc3RyZWFtCiAgICAgICAgICAgIGFuZCByZXR1cm4gdGhlbSBhcyBsaXN0IG9mIGxpbmVzLgoKICAgICAgICAgICAgTGluZSBicmVha3MgYXJlIGltcGxlbWVudGVkIHVzaW5nIHRoZSBjb2RlYydzIGRlY29kZXIKICAgICAgICAgICAgbWV0aG9kIGFuZCBhcmUgaW5jbHVkZWQgaW4gdGhlIGxpc3QgZW50cmllcy4KCiAgICAgICAgICAgIHNpemVoaW50LCBpZiBnaXZlbiwgaXMgaWdub3JlZCBzaW5jZSB0aGVyZSBpcyBubyBlZmZpY2llbnQKICAgICAgICAgICAgd2F5IHRvIGZpbmRpbmcgdGhlIHRydWUgZW5kLW9mLWxpbmUuCgogICAgICAgICIiIgogICAgICAgIGRhdGEgPSBzZWxmLnJlYWQoKQogICAgICAgIHJldHVybiBkYXRhLnNwbGl0bGluZXMoa2VlcGVuZHMpCgogICAgZGVmIHJlc2V0KHNlbGYpOgoKICAgICAgICAiIiIgUmVzZXRzIHRoZSBjb2RlYyBidWZmZXJzIHVzZWQgZm9yIGtlZXBpbmcgc3RhdGUuCgogICAgICAgICAgICBOb3RlIHRoYXQgbm8gc3RyZWFtIHJlcG9zaXRpb25pbmcgc2hvdWxkIHRha2UgcGxhY2UuCiAgICAgICAgICAgIFRoaXMgbWV0aG9kIGlzIHByaW1hcmlseSBpbnRlbmRlZCB0byBiZSBhYmxlIHRvIHJlY292ZXIKICAgICAgICAgICAgZnJvbSBkZWNvZGluZyBlcnJvcnMuCgogICAgICAgICIiIgogICAgICAgIHNlbGYuYnl0ZWJ1ZmZlciA9IGIiIgogICAgICAgIHNlbGYuY2hhcmJ1ZmZlciA9IHNlbGYuX2VtcHR5X2NoYXJidWZmZXIKICAgICAgICBzZWxmLmxpbmVidWZmZXIgPSBOb25lCgogICAgZGVmIHNlZWsoc2VsZiwgb2Zmc2V0LCB3aGVuY2U9MCk6CiAgICAgICAgIiIiIFNldCB0aGUgaW5wdXQgc3RyZWFtJ3MgY3VycmVudCBwb3NpdGlvbi4KCiAgICAgICAgICAgIFJlc2V0cyB0aGUgY29kZWMgYnVmZmVycyB1c2VkIGZvciBrZWVwaW5nIHN0YXRlLgogICAgICAgICIiIgogICAgICAgIHNlbGYuc3RyZWFtLnNlZWsob2Zmc2V0LCB3aGVuY2UpCiAgICAgICAgc2VsZi5yZXNldCgpCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgoKICAgICAgICAiIiIgUmV0dXJuIHRoZSBuZXh0IGRlY29kZWQgbGluZSBmcm9tIHRoZSBpbnB1dCBzdHJlYW0uIiIiCiAgICAgICAgbGluZSA9IHNlbGYucmVhZGxpbmUoKQogICAgICAgIGlmIGxpbmU6CiAgICAgICAgICAgIHJldHVybiBsaW5lCiAgICAgICAgcmFpc2UgU3RvcEl0ZXJhdGlvbgoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBuYW1lLAogICAgICAgICAgICAgICAgICAgIGdldGF0dHI9Z2V0YXR0cik6CgogICAgICAgICIiIiBJbmhlcml0IGFsbCBvdGhlciBtZXRob2RzIGZyb20gdGhlIHVuZGVybHlpbmcgc3RyZWFtLgogICAgICAgICIiIgogICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYuc3RyZWFtLCBuYW1lKQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19leGl0X18oc2VsZiwgdHlwZSwgdmFsdWUsIHRiKToKICAgICAgICBzZWxmLnN0cmVhbS5jbG9zZSgpCgojIyMKCmNsYXNzIFN0cmVhbVJlYWRlcldyaXRlcjoKCiAgICAiIiIgU3RyZWFtUmVhZGVyV3JpdGVyIGluc3RhbmNlcyBhbGxvdyB3cmFwcGluZyBzdHJlYW1zIHdoaWNoCiAgICAgICAgd29yayBpbiBib3RoIHJlYWQgYW5kIHdyaXRlIG1vZGVzLgoKICAgICAgICBUaGUgZGVzaWduIGlzIHN1Y2ggdGhhdCBvbmUgY2FuIHVzZSB0aGUgZmFjdG9yeSBmdW5jdGlvbnMKICAgICAgICByZXR1cm5lZCBieSB0aGUgY29kZWMubG9va3VwKCkgZnVuY3Rpb24gdG8gY29uc3RydWN0IHRoZQogICAgICAgIGluc3RhbmNlLgoKICAgICIiIgogICAgIyBPcHRpb25hbCBhdHRyaWJ1dGVzIHNldCBieSB0aGUgZmlsZSB3cmFwcGVycyBiZWxvdwogICAgZW5jb2RpbmcgPSAndW5rbm93bicKCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RyZWFtLCBSZWFkZXIsIFdyaXRlciwgZXJyb3JzPSdzdHJpY3QnKToKCiAgICAgICAgIiIiIENyZWF0ZXMgYSBTdHJlYW1SZWFkZXJXcml0ZXIgaW5zdGFuY2UuCgogICAgICAgICAgICBzdHJlYW0gbXVzdCBiZSBhIFN0cmVhbS1saWtlIG9iamVjdC4KCiAgICAgICAgICAgIFJlYWRlciwgV3JpdGVyIG11c3QgYmUgZmFjdG9yeSBmdW5jdGlvbnMgb3IgY2xhc3NlcwogICAgICAgICAgICBwcm92aWRpbmcgdGhlIFN0cmVhbVJlYWRlciwgU3RyZWFtV3JpdGVyIGludGVyZmFjZSByZXNwLgoKICAgICAgICAgICAgRXJyb3IgaGFuZGxpbmcgaXMgZG9uZSBpbiB0aGUgc2FtZSB3YXkgYXMgZGVmaW5lZCBmb3IgdGhlCiAgICAgICAgICAgIFN0cmVhbVdyaXRlci9SZWFkZXJzLgoKICAgICAgICAiIiIKICAgICAgICBzZWxmLnN0cmVhbSA9IHN0cmVhbQogICAgICAgIHNlbGYucmVhZGVyID0gUmVhZGVyKHN0cmVhbSwgZXJyb3JzKQogICAgICAgIHNlbGYud3JpdGVyID0gV3JpdGVyKHN0cmVhbSwgZXJyb3JzKQogICAgICAgIHNlbGYuZXJyb3JzID0gZXJyb3JzCgogICAgZGVmIHJlYWQoc2VsZiwgc2l6ZT0tMSk6CgogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5yZWFkKHNpemUpCgogICAgZGVmIHJlYWRsaW5lKHNlbGYsIHNpemU9Tm9uZSk6CgogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5yZWFkbGluZShzaXplKQoKICAgIGRlZiByZWFkbGluZXMoc2VsZiwgc2l6ZWhpbnQ9Tm9uZSk6CgogICAgICAgIHJldHVybiBzZWxmLnJlYWRlci5yZWFkbGluZXMoc2l6ZWhpbnQpCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgoKICAgICAgICAiIiIgUmV0dXJuIHRoZSBuZXh0IGRlY29kZWQgbGluZSBmcm9tIHRoZSBpbnB1dCBzdHJlYW0uIiIiCiAgICAgICAgcmV0dXJuIG5leHQoc2VsZi5yZWFkZXIpCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIHdyaXRlKHNlbGYsIGRhdGEpOgoKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIud3JpdGUoZGF0YSkKCiAgICBkZWYgd3JpdGVsaW5lcyhzZWxmLCBsaXN0KToKCiAgICAgICAgcmV0dXJuIHNlbGYud3JpdGVyLndyaXRlbGluZXMobGlzdCkKCiAgICBkZWYgcmVzZXQoc2VsZik6CgogICAgICAgIHNlbGYucmVhZGVyLnJlc2V0KCkKICAgICAgICBzZWxmLndyaXRlci5yZXNldCgpCgogICAgZGVmIHNlZWsoc2VsZiwgb2Zmc2V0LCB3aGVuY2U9MCk6CiAgICAgICAgc2VsZi5zdHJlYW0uc2VlayhvZmZzZXQsIHdoZW5jZSkKICAgICAgICBzZWxmLnJlYWRlci5yZXNldCgpCiAgICAgICAgaWYgd2hlbmNlID09IDAgYW5kIG9mZnNldCA9PSAwOgogICAgICAgICAgICBzZWxmLndyaXRlci5yZXNldCgpCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIG5hbWUsCiAgICAgICAgICAgICAgICAgICAgZ2V0YXR0cj1nZXRhdHRyKToKCiAgICAgICAgIiIiIEluaGVyaXQgYWxsIG90aGVyIG1ldGhvZHMgZnJvbSB0aGUgdW5kZXJseWluZyBzdHJlYW0uCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5zdHJlYW0sIG5hbWUpCgogICAgIyB0aGVzZSBhcmUgbmVlZGVkIHRvIG1ha2UgIndpdGggY29kZWNzLm9wZW4oLi4uKSIgd29yayBwcm9wZXJseQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19leGl0X18oc2VsZiwgdHlwZSwgdmFsdWUsIHRiKToKICAgICAgICBzZWxmLnN0cmVhbS5jbG9zZSgpCgojIyMKCmNsYXNzIFN0cmVhbVJlY29kZXI6CgogICAgIiIiIFN0cmVhbVJlY29kZXIgaW5zdGFuY2VzIHByb3ZpZGUgYSBmcm9udGVuZCAtIGJhY2tlbmQKICAgICAgICB2aWV3IG9mIGVuY29kaW5nIGRhdGEuCgogICAgICAgIFRoZXkgdXNlIHRoZSBjb21wbGV0ZSBzZXQgb2YgQVBJcyByZXR1cm5lZCBieSB0aGUKICAgICAgICBjb2RlY3MubG9va3VwKCkgZnVuY3Rpb24gdG8gaW1wbGVtZW50IHRoZWlyIHRhc2suCgogICAgICAgIERhdGEgd3JpdHRlbiB0byB0aGUgc3RyZWFtIGlzIGZpcnN0IGRlY29kZWQgaW50byBhbgogICAgICAgIGludGVybWVkaWF0ZSBmb3JtYXQgKHdoaWNoIGlzIGRlcGVuZGVudCBvbiB0aGUgZ2l2ZW4gY29kZWMKICAgICAgICBjb21iaW5hdGlvbikgYW5kIHRoZW4gd3JpdHRlbiB0byB0aGUgc3RyZWFtIHVzaW5nIGFuIGluc3RhbmNlCiAgICAgICAgb2YgdGhlIHByb3ZpZGVkIFdyaXRlciBjbGFzcy4KCiAgICAgICAgSW4gdGhlIG90aGVyIGRpcmVjdGlvbiwgZGF0YSBpcyByZWFkIGZyb20gdGhlIHN0cmVhbSB1c2luZyBhCiAgICAgICAgUmVhZGVyIGluc3RhbmNlIGFuZCB0aGVuIHJldHVybiBlbmNvZGVkIGRhdGEgdG8gdGhlIGNhbGxlci4KCiAgICAiIiIKICAgICMgT3B0aW9uYWwgYXR0cmlidXRlcyBzZXQgYnkgdGhlIGZpbGUgd3JhcHBlcnMgYmVsb3cKICAgIGRhdGFfZW5jb2RpbmcgPSAndW5rbm93bicKICAgIGZpbGVfZW5jb2RpbmcgPSAndW5rbm93bicKCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RyZWFtLCBlbmNvZGUsIGRlY29kZSwgUmVhZGVyLCBXcml0ZXIsCiAgICAgICAgICAgICAgICAgZXJyb3JzPSdzdHJpY3QnKToKCiAgICAgICAgIiIiIENyZWF0ZXMgYSBTdHJlYW1SZWNvZGVyIGluc3RhbmNlIHdoaWNoIGltcGxlbWVudHMgYSB0d28td2F5CiAgICAgICAgICAgIGNvbnZlcnNpb246IGVuY29kZSBhbmQgZGVjb2RlIHdvcmsgb24gdGhlIGZyb250ZW5kICh0aGUKICAgICAgICAgICAgaW5wdXQgdG8gLnJlYWQoKSBhbmQgb3V0cHV0IG9mIC53cml0ZSgpKSB3aGlsZQogICAgICAgICAgICBSZWFkZXIgYW5kIFdyaXRlciB3b3JrIG9uIHRoZSBiYWNrZW5kIChyZWFkaW5nIGFuZAogICAgICAgICAgICB3cml0aW5nIHRvIHRoZSBzdHJlYW0pLgoKICAgICAgICAgICAgWW91IGNhbiB1c2UgdGhlc2Ugb2JqZWN0cyB0byBkbyB0cmFuc3BhcmVudCBkaXJlY3QKICAgICAgICAgICAgcmVjb2RpbmdzIGZyb20gZS5nLiBsYXRpbi0xIHRvIHV0Zi04IGFuZCBiYWNrLgoKICAgICAgICAgICAgc3RyZWFtIG11c3QgYmUgYSBmaWxlLWxpa2Ugb2JqZWN0LgoKICAgICAgICAgICAgZW5jb2RlLCBkZWNvZGUgbXVzdCBhZGhlcmUgdG8gdGhlIENvZGVjIGludGVyZmFjZSwgUmVhZGVyLAogICAgICAgICAgICBXcml0ZXIgbXVzdCBiZSBmYWN0b3J5IGZ1bmN0aW9ucyBvciBjbGFzc2VzIHByb3ZpZGluZyB0aGUKICAgICAgICAgICAgU3RyZWFtUmVhZGVyLCBTdHJlYW1Xcml0ZXIgaW50ZXJmYWNlIHJlc3AuCgogICAgICAgICAgICBlbmNvZGUgYW5kIGRlY29kZSBhcmUgbmVlZGVkIGZvciB0aGUgZnJvbnRlbmQgdHJhbnNsYXRpb24sCiAgICAgICAgICAgIFJlYWRlciBhbmQgV3JpdGVyIGZvciB0aGUgYmFja2VuZCB0cmFuc2xhdGlvbi4gVW5pY29kZSBpcwogICAgICAgICAgICB1c2VkIGFzIGludGVybWVkaWF0ZSBlbmNvZGluZy4KCiAgICAgICAgICAgIEVycm9yIGhhbmRsaW5nIGlzIGRvbmUgaW4gdGhlIHNhbWUgd2F5IGFzIGRlZmluZWQgZm9yIHRoZQogICAgICAgICAgICBTdHJlYW1Xcml0ZXIvUmVhZGVycy4KCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5zdHJlYW0gPSBzdHJlYW0KICAgICAgICBzZWxmLmVuY29kZSA9IGVuY29kZQogICAgICAgIHNlbGYuZGVjb2RlID0gZGVjb2RlCiAgICAgICAgc2VsZi5yZWFkZXIgPSBSZWFkZXIoc3RyZWFtLCBlcnJvcnMpCiAgICAgICAgc2VsZi53cml0ZXIgPSBXcml0ZXIoc3RyZWFtLCBlcnJvcnMpCiAgICAgICAgc2VsZi5lcnJvcnMgPSBlcnJvcnMKCiAgICBkZWYgcmVhZChzZWxmLCBzaXplPS0xKToKCiAgICAgICAgZGF0YSA9IHNlbGYucmVhZGVyLnJlYWQoc2l6ZSkKICAgICAgICBkYXRhLCBieXRlc2VuY29kZWQgPSBzZWxmLmVuY29kZShkYXRhLCBzZWxmLmVycm9ycykKICAgICAgICByZXR1cm4gZGF0YQoKICAgIGRlZiByZWFkbGluZShzZWxmLCBzaXplPU5vbmUpOgoKICAgICAgICBpZiBzaXplIGlzIE5vbmU6CiAgICAgICAgICAgIGRhdGEgPSBzZWxmLnJlYWRlci5yZWFkbGluZSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGF0YSA9IHNlbGYucmVhZGVyLnJlYWRsaW5lKHNpemUpCiAgICAgICAgZGF0YSwgYnl0ZXNlbmNvZGVkID0gc2VsZi5lbmNvZGUoZGF0YSwgc2VsZi5lcnJvcnMpCiAgICAgICAgcmV0dXJuIGRhdGEKCiAgICBkZWYgcmVhZGxpbmVzKHNlbGYsIHNpemVoaW50PU5vbmUpOgoKICAgICAgICBkYXRhID0gc2VsZi5yZWFkZXIucmVhZCgpCiAgICAgICAgZGF0YSwgYnl0ZXNlbmNvZGVkID0gc2VsZi5lbmNvZGUoZGF0YSwgc2VsZi5lcnJvcnMpCiAgICAgICAgcmV0dXJuIGRhdGEuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKQoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKCiAgICAgICAgIiIiIFJldHVybiB0aGUgbmV4dCBkZWNvZGVkIGxpbmUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtLiIiIgogICAgICAgIGRhdGEgPSBuZXh0KHNlbGYucmVhZGVyKQogICAgICAgIGRhdGEsIGJ5dGVzZW5jb2RlZCA9IHNlbGYuZW5jb2RlKGRhdGEsIHNlbGYuZXJyb3JzKQogICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIHdyaXRlKHNlbGYsIGRhdGEpOgoKICAgICAgICBkYXRhLCBieXRlc2RlY29kZWQgPSBzZWxmLmRlY29kZShkYXRhLCBzZWxmLmVycm9ycykKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIud3JpdGUoZGF0YSkKCiAgICBkZWYgd3JpdGVsaW5lcyhzZWxmLCBsaXN0KToKCiAgICAgICAgZGF0YSA9ICcnLmpvaW4obGlzdCkKICAgICAgICBkYXRhLCBieXRlc2RlY29kZWQgPSBzZWxmLmRlY29kZShkYXRhLCBzZWxmLmVycm9ycykKICAgICAgICByZXR1cm4gc2VsZi53cml0ZXIud3JpdGUoZGF0YSkKCiAgICBkZWYgcmVzZXQoc2VsZik6CgogICAgICAgIHNlbGYucmVhZGVyLnJlc2V0KCkKICAgICAgICBzZWxmLndyaXRlci5yZXNldCgpCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIG5hbWUsCiAgICAgICAgICAgICAgICAgICAgZ2V0YXR0cj1nZXRhdHRyKToKCiAgICAgICAgIiIiIEluaGVyaXQgYWxsIG90aGVyIG1ldGhvZHMgZnJvbSB0aGUgdW5kZXJseWluZyBzdHJlYW0uCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5zdHJlYW0sIG5hbWUpCgogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCB0eXBlLCB2YWx1ZSwgdGIpOgogICAgICAgIHNlbGYuc3RyZWFtLmNsb3NlKCkKCiMjIyBTaG9ydGN1dHMKCmRlZiBvcGVuKGZpbGVuYW1lLCBtb2RlPSdyYicsIGVuY29kaW5nPU5vbmUsIGVycm9ycz0nc3RyaWN0JywgYnVmZmVyaW5nPTEpOgoKICAgICIiIiBPcGVuIGFuIGVuY29kZWQgZmlsZSB1c2luZyB0aGUgZ2l2ZW4gbW9kZSBhbmQgcmV0dXJuCiAgICAgICAgYSB3cmFwcGVkIHZlcnNpb24gcHJvdmlkaW5nIHRyYW5zcGFyZW50IGVuY29kaW5nL2RlY29kaW5nLgoKICAgICAgICBOb3RlOiBUaGUgd3JhcHBlZCB2ZXJzaW9uIHdpbGwgb25seSBhY2NlcHQgdGhlIG9iamVjdCBmb3JtYXQKICAgICAgICBkZWZpbmVkIGJ5IHRoZSBjb2RlY3MsIGkuZS4gVW5pY29kZSBvYmplY3RzIGZvciBtb3N0IGJ1aWx0aW4KICAgICAgICBjb2RlY3MuIE91dHB1dCBpcyBhbHNvIGNvZGVjIGRlcGVuZGVudCBhbmQgd2lsbCB1c3VhbGx5IGJlCiAgICAgICAgVW5pY29kZSBhcyB3ZWxsLgoKICAgICAgICBGaWxlcyBhcmUgYWx3YXlzIG9wZW5lZCBpbiBiaW5hcnkgbW9kZSwgZXZlbiBpZiBubyBiaW5hcnkgbW9kZQogICAgICAgIHdhcyBzcGVjaWZpZWQuIFRoaXMgaXMgZG9uZSB0byBhdm9pZCBkYXRhIGxvc3MgZHVlIHRvIGVuY29kaW5ncwogICAgICAgIHVzaW5nIDgtYml0IHZhbHVlcy4gVGhlIGRlZmF1bHQgZmlsZSBtb2RlIGlzICdyYicgbWVhbmluZyB0bwogICAgICAgIG9wZW4gdGhlIGZpbGUgaW4gYmluYXJ5IHJlYWQgbW9kZS4KCiAgICAgICAgZW5jb2Rpbmcgc3BlY2lmaWVzIHRoZSBlbmNvZGluZyB3aGljaCBpcyB0byBiZSB1c2VkIGZvciB0aGUKICAgICAgICBmaWxlLgoKICAgICAgICBlcnJvcnMgbWF5IGJlIGdpdmVuIHRvIGRlZmluZSB0aGUgZXJyb3IgaGFuZGxpbmcuIEl0IGRlZmF1bHRzCiAgICAgICAgdG8gJ3N0cmljdCcgd2hpY2ggY2F1c2VzIFZhbHVlRXJyb3JzIHRvIGJlIHJhaXNlZCBpbiBjYXNlIGFuCiAgICAgICAgZW5jb2RpbmcgZXJyb3Igb2NjdXJzLgoKICAgICAgICBidWZmZXJpbmcgaGFzIHRoZSBzYW1lIG1lYW5pbmcgYXMgZm9yIHRoZSBidWlsdGluIG9wZW4oKSBBUEkuCiAgICAgICAgSXQgZGVmYXVsdHMgdG8gbGluZSBidWZmZXJlZC4KCiAgICAgICAgVGhlIHJldHVybmVkIHdyYXBwZWQgZmlsZSBvYmplY3QgcHJvdmlkZXMgYW4gZXh0cmEgYXR0cmlidXRlCiAgICAgICAgLmVuY29kaW5nIHdoaWNoIGFsbG93cyBxdWVyeWluZyB0aGUgdXNlZCBlbmNvZGluZy4gVGhpcwogICAgICAgIGF0dHJpYnV0ZSBpcyBvbmx5IGF2YWlsYWJsZSBpZiBhbiBlbmNvZGluZyB3YXMgc3BlY2lmaWVkIGFzCiAgICAgICAgcGFyYW1ldGVyLgoKICAgICIiIgogICAgaWYgZW5jb2RpbmcgaXMgbm90IE5vbmUgYW5kIFwKICAgICAgICdiJyBub3QgaW4gbW9kZToKICAgICAgICAjIEZvcmNlIG9wZW5pbmcgb2YgdGhlIGZpbGUgaW4gYmluYXJ5IG1vZGUKICAgICAgICBtb2RlID0gbW9kZSArICdiJwogICAgZmlsZSA9IGJ1aWx0aW5zLm9wZW4oZmlsZW5hbWUsIG1vZGUsIGJ1ZmZlcmluZykKICAgIGlmIGVuY29kaW5nIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIGZpbGUKICAgIGluZm8gPSBsb29rdXAoZW5jb2RpbmcpCiAgICBzcncgPSBTdHJlYW1SZWFkZXJXcml0ZXIoZmlsZSwgaW5mby5zdHJlYW1yZWFkZXIsIGluZm8uc3RyZWFtd3JpdGVyLCBlcnJvcnMpCiAgICAjIEFkZCBhdHRyaWJ1dGVzIHRvIHNpbXBsaWZ5IGludHJvc3BlY3Rpb24KICAgIHNydy5lbmNvZGluZyA9IGVuY29kaW5nCiAgICByZXR1cm4gc3J3CgpkZWYgRW5jb2RlZEZpbGUoZmlsZSwgZGF0YV9lbmNvZGluZywgZmlsZV9lbmNvZGluZz1Ob25lLCBlcnJvcnM9J3N0cmljdCcpOgoKICAgICIiIiBSZXR1cm4gYSB3cmFwcGVkIHZlcnNpb24gb2YgZmlsZSB3aGljaCBwcm92aWRlcyB0cmFuc3BhcmVudAogICAgICAgIGVuY29kaW5nIHRyYW5zbGF0aW9uLgoKICAgICAgICBTdHJpbmdzIHdyaXR0ZW4gdG8gdGhlIHdyYXBwZWQgZmlsZSBhcmUgaW50ZXJwcmV0ZWQgYWNjb3JkaW5nCiAgICAgICAgdG8gdGhlIGdpdmVuIGRhdGFfZW5jb2RpbmcgYW5kIHRoZW4gd3JpdHRlbiB0byB0aGUgb3JpZ2luYWwKICAgICAgICBmaWxlIGFzIHN0cmluZyB1c2luZyBmaWxlX2VuY29kaW5nLiBUaGUgaW50ZXJtZWRpYXRlIGVuY29kaW5nCiAgICAgICAgd2lsbCB1c3VhbGx5IGJlIFVuaWNvZGUgYnV0IGRlcGVuZHMgb24gdGhlIHNwZWNpZmllZCBjb2RlY3MuCgogICAgICAgIFN0cmluZ3MgYXJlIHJlYWQgZnJvbSB0aGUgZmlsZSB1c2luZyBmaWxlX2VuY29kaW5nIGFuZCB0aGVuCiAgICAgICAgcGFzc2VkIGJhY2sgdG8gdGhlIGNhbGxlciBhcyBzdHJpbmcgdXNpbmcgZGF0YV9lbmNvZGluZy4KCiAgICAgICAgSWYgZmlsZV9lbmNvZGluZyBpcyBub3QgZ2l2ZW4sIGl0IGRlZmF1bHRzIHRvIGRhdGFfZW5jb2RpbmcuCgogICAgICAgIGVycm9ycyBtYXkgYmUgZ2l2ZW4gdG8gZGVmaW5lIHRoZSBlcnJvciBoYW5kbGluZy4gSXQgZGVmYXVsdHMKICAgICAgICB0byAnc3RyaWN0JyB3aGljaCBjYXVzZXMgVmFsdWVFcnJvcnMgdG8gYmUgcmFpc2VkIGluIGNhc2UgYW4KICAgICAgICBlbmNvZGluZyBlcnJvciBvY2N1cnMuCgogICAgICAgIFRoZSByZXR1cm5lZCB3cmFwcGVkIGZpbGUgb2JqZWN0IHByb3ZpZGVzIHR3byBleHRyYSBhdHRyaWJ1dGVzCiAgICAgICAgLmRhdGFfZW5jb2RpbmcgYW5kIC5maWxlX2VuY29kaW5nIHdoaWNoIHJlZmxlY3QgdGhlIGdpdmVuCiAgICAgICAgcGFyYW1ldGVycyBvZiB0aGUgc2FtZSBuYW1lLiBUaGUgYXR0cmlidXRlcyBjYW4gYmUgdXNlZCBmb3IKICAgICAgICBpbnRyb3NwZWN0aW9uIGJ5IFB5dGhvbiBwcm9ncmFtcy4KCiAgICAiIiIKICAgIGlmIGZpbGVfZW5jb2RpbmcgaXMgTm9uZToKICAgICAgICBmaWxlX2VuY29kaW5nID0gZGF0YV9lbmNvZGluZwogICAgZGF0YV9pbmZvID0gbG9va3VwKGRhdGFfZW5jb2RpbmcpCiAgICBmaWxlX2luZm8gPSBsb29rdXAoZmlsZV9lbmNvZGluZykKICAgIHNyID0gU3RyZWFtUmVjb2RlcihmaWxlLCBkYXRhX2luZm8uZW5jb2RlLCBkYXRhX2luZm8uZGVjb2RlLAogICAgICAgICAgICAgICAgICAgICAgIGZpbGVfaW5mby5zdHJlYW1yZWFkZXIsIGZpbGVfaW5mby5zdHJlYW13cml0ZXIsIGVycm9ycykKICAgICMgQWRkIGF0dHJpYnV0ZXMgdG8gc2ltcGxpZnkgaW50cm9zcGVjdGlvbgogICAgc3IuZGF0YV9lbmNvZGluZyA9IGRhdGFfZW5jb2RpbmcKICAgIHNyLmZpbGVfZW5jb2RpbmcgPSBmaWxlX2VuY29kaW5nCiAgICByZXR1cm4gc3IKCiMjIyBIZWxwZXJzIGZvciBjb2RlYyBsb29rdXAKCmRlZiBnZXRlbmNvZGVyKGVuY29kaW5nKToKCiAgICAiIiIgTG9va3VwIHVwIHRoZSBjb2RlYyBmb3IgdGhlIGdpdmVuIGVuY29kaW5nIGFuZCByZXR1cm4KICAgICAgICBpdHMgZW5jb2RlciBmdW5jdGlvbi4KCiAgICAgICAgUmFpc2VzIGEgTG9va3VwRXJyb3IgaW4gY2FzZSB0aGUgZW5jb2RpbmcgY2Fubm90IGJlIGZvdW5kLgoKICAgICIiIgogICAgcmV0dXJuIGxvb2t1cChlbmNvZGluZykuZW5jb2RlCgpkZWYgZ2V0ZGVjb2RlcihlbmNvZGluZyk6CgogICAgIiIiIExvb2t1cCB1cCB0aGUgY29kZWMgZm9yIHRoZSBnaXZlbiBlbmNvZGluZyBhbmQgcmV0dXJuCiAgICAgICAgaXRzIGRlY29kZXIgZnVuY3Rpb24uCgogICAgICAgIFJhaXNlcyBhIExvb2t1cEVycm9yIGluIGNhc2UgdGhlIGVuY29kaW5nIGNhbm5vdCBiZSBmb3VuZC4KCiAgICAiIiIKICAgIHJldHVybiBsb29rdXAoZW5jb2RpbmcpLmRlY29kZQoKZGVmIGdldGluY3JlbWVudGFsZW5jb2RlcihlbmNvZGluZyk6CgogICAgIiIiIExvb2t1cCB1cCB0aGUgY29kZWMgZm9yIHRoZSBnaXZlbiBlbmNvZGluZyBhbmQgcmV0dXJuCiAgICAgICAgaXRzIEluY3JlbWVudGFsRW5jb2RlciBjbGFzcyBvciBmYWN0b3J5IGZ1bmN0aW9uLgoKICAgICAgICBSYWlzZXMgYSBMb29rdXBFcnJvciBpbiBjYXNlIHRoZSBlbmNvZGluZyBjYW5ub3QgYmUgZm91bmQKICAgICAgICBvciB0aGUgY29kZWNzIGRvZXNuJ3QgcHJvdmlkZSBhbiBpbmNyZW1lbnRhbCBlbmNvZGVyLgoKICAgICIiIgogICAgZW5jb2RlciA9IGxvb2t1cChlbmNvZGluZykuaW5jcmVtZW50YWxlbmNvZGVyCiAgICBpZiBlbmNvZGVyIGlzIE5vbmU6CiAgICAgICAgcmFpc2UgTG9va3VwRXJyb3IoZW5jb2RpbmcpCiAgICByZXR1cm4gZW5jb2RlcgoKZGVmIGdldGluY3JlbWVudGFsZGVjb2RlcihlbmNvZGluZyk6CgogICAgIiIiIExvb2t1cCB1cCB0aGUgY29kZWMgZm9yIHRoZSBnaXZlbiBlbmNvZGluZyBhbmQgcmV0dXJuCiAgICAgICAgaXRzIEluY3JlbWVudGFsRGVjb2RlciBjbGFzcyBvciBmYWN0b3J5IGZ1bmN0aW9uLgoKICAgICAgICBSYWlzZXMgYSBMb29rdXBFcnJvciBpbiBjYXNlIHRoZSBlbmNvZGluZyBjYW5ub3QgYmUgZm91bmQKICAgICAgICBvciB0aGUgY29kZWNzIGRvZXNuJ3QgcHJvdmlkZSBhbiBpbmNyZW1lbnRhbCBkZWNvZGVyLgoKICAgICIiIgogICAgZGVjb2RlciA9IGxvb2t1cChlbmNvZGluZykuaW5jcmVtZW50YWxkZWNvZGVyCiAgICBpZiBkZWNvZGVyIGlzIE5vbmU6CiAgICAgICAgcmFpc2UgTG9va3VwRXJyb3IoZW5jb2RpbmcpCiAgICByZXR1cm4gZGVjb2RlcgoKZGVmIGdldHJlYWRlcihlbmNvZGluZyk6CgogICAgIiIiIExvb2t1cCB1cCB0aGUgY29kZWMgZm9yIHRoZSBnaXZlbiBlbmNvZGluZyBhbmQgcmV0dXJuCiAgICAgICAgaXRzIFN0cmVhbVJlYWRlciBjbGFzcyBvciBmYWN0b3J5IGZ1bmN0aW9uLgoKICAgICAgICBSYWlzZXMgYSBMb29rdXBFcnJvciBpbiBjYXNlIHRoZSBlbmNvZGluZyBjYW5ub3QgYmUgZm91bmQuCgogICAgIiIiCiAgICByZXR1cm4gbG9va3VwKGVuY29kaW5nKS5zdHJlYW1yZWFkZXIKCmRlZiBnZXR3cml0ZXIoZW5jb2RpbmcpOgoKICAgICIiIiBMb29rdXAgdXAgdGhlIGNvZGVjIGZvciB0aGUgZ2l2ZW4gZW5jb2RpbmcgYW5kIHJldHVybgogICAgICAgIGl0cyBTdHJlYW1Xcml0ZXIgY2xhc3Mgb3IgZmFjdG9yeSBmdW5jdGlvbi4KCiAgICAgICAgUmFpc2VzIGEgTG9va3VwRXJyb3IgaW4gY2FzZSB0aGUgZW5jb2RpbmcgY2Fubm90IGJlIGZvdW5kLgoKICAgICIiIgogICAgcmV0dXJuIGxvb2t1cChlbmNvZGluZykuc3RyZWFtd3JpdGVyCgpkZWYgaXRlcmVuY29kZShpdGVyYXRvciwgZW5jb2RpbmcsIGVycm9ycz0nc3RyaWN0JywgKiprd2FyZ3MpOgogICAgIiIiCiAgICBFbmNvZGluZyBpdGVyYXRvci4KCiAgICBFbmNvZGVzIHRoZSBpbnB1dCBzdHJpbmdzIGZyb20gdGhlIGl0ZXJhdG9yIHVzaW5nIGEgSW5jcmVtZW50YWxFbmNvZGVyLgoKICAgIGVycm9ycyBhbmQga3dhcmdzIGFyZSBwYXNzZWQgdGhyb3VnaCB0byB0aGUgSW5jcmVtZW50YWxFbmNvZGVyCiAgICBjb25zdHJ1Y3Rvci4KICAgICIiIgogICAgZW5jb2RlciA9IGdldGluY3JlbWVudGFsZW5jb2RlcihlbmNvZGluZykoZXJyb3JzLCAqKmt3YXJncykKICAgIGZvciBpbnB1dCBpbiBpdGVyYXRvcjoKICAgICAgICBvdXRwdXQgPSBlbmNvZGVyLmVuY29kZShpbnB1dCkKICAgICAgICBpZiBvdXRwdXQ6CiAgICAgICAgICAgIHlpZWxkIG91dHB1dAogICAgb3V0cHV0ID0gZW5jb2Rlci5lbmNvZGUoIiIsIFRydWUpCiAgICBpZiBvdXRwdXQ6CiAgICAgICAgeWllbGQgb3V0cHV0CgpkZWYgaXRlcmRlY29kZShpdGVyYXRvciwgZW5jb2RpbmcsIGVycm9ycz0nc3RyaWN0JywgKiprd2FyZ3MpOgogICAgIiIiCiAgICBEZWNvZGluZyBpdGVyYXRvci4KCiAgICBEZWNvZGVzIHRoZSBpbnB1dCBzdHJpbmdzIGZyb20gdGhlIGl0ZXJhdG9yIHVzaW5nIGEgSW5jcmVtZW50YWxEZWNvZGVyLgoKICAgIGVycm9ycyBhbmQga3dhcmdzIGFyZSBwYXNzZWQgdGhyb3VnaCB0byB0aGUgSW5jcmVtZW50YWxEZWNvZGVyCiAgICBjb25zdHJ1Y3Rvci4KICAgICIiIgogICAgZGVjb2RlciA9IGdldGluY3JlbWVudGFsZGVjb2RlcihlbmNvZGluZykoZXJyb3JzLCAqKmt3YXJncykKICAgIGZvciBpbnB1dCBpbiBpdGVyYXRvcjoKICAgICAgICBvdXRwdXQgPSBkZWNvZGVyLmRlY29kZShpbnB1dCkKICAgICAgICBpZiBvdXRwdXQ6CiAgICAgICAgICAgIHlpZWxkIG91dHB1dAogICAgb3V0cHV0ID0gZGVjb2Rlci5kZWNvZGUoYiIiLCBUcnVlKQogICAgaWYgb3V0cHV0OgogICAgICAgIHlpZWxkIG91dHB1dAoKIyMjIEhlbHBlcnMgZm9yIGNoYXJtYXAtYmFzZWQgY29kZWNzCgpkZWYgbWFrZV9pZGVudGl0eV9kaWN0KHJuZyk6CgogICAgIiIiIG1ha2VfaWRlbnRpdHlfZGljdChybmcpIC0+IGRpY3QKCiAgICAgICAgUmV0dXJuIGEgZGljdGlvbmFyeSB3aGVyZSBlbGVtZW50cyBvZiB0aGUgcm5nIHNlcXVlbmNlIGFyZQogICAgICAgIG1hcHBlZCB0byB0aGVtc2VsdmVzLgoKICAgICIiIgogICAgcmV0dXJuIHtpOmkgZm9yIGkgaW4gcm5nfQoKZGVmIG1ha2VfZW5jb2RpbmdfbWFwKGRlY29kaW5nX21hcCk6CgogICAgIiIiIENyZWF0ZXMgYW4gZW5jb2RpbmcgbWFwIGZyb20gYSBkZWNvZGluZyBtYXAuCgogICAgICAgIElmIGEgdGFyZ2V0IG1hcHBpbmcgaW4gdGhlIGRlY29kaW5nIG1hcCBvY2N1cnMgbXVsdGlwbGUKICAgICAgICB0aW1lcywgdGhlbiB0aGF0IHRhcmdldCBpcyBtYXBwZWQgdG8gTm9uZSAodW5kZWZpbmVkIG1hcHBpbmcpLAogICAgICAgIGNhdXNpbmcgYW4gZXhjZXB0aW9uIHdoZW4gZW5jb3VudGVyZWQgYnkgdGhlIGNoYXJtYXAgY29kZWMKICAgICAgICBkdXJpbmcgdHJhbnNsYXRpb24uCgogICAgICAgIE9uZSBleGFtcGxlIHdoZXJlIHRoaXMgaGFwcGVucyBpcyBjcDg3NS5weSB3aGljaCBkZWNvZGVzCiAgICAgICAgbXVsdGlwbGUgY2hhcmFjdGVyIHRvIFx1MDAxYS4KCiAgICAiIiIKICAgIG0gPSB7fQogICAgZm9yIGssdiBpbiBkZWNvZGluZ19tYXAuaXRlbXMoKToKICAgICAgICBpZiBub3QgdiBpbiBtOgogICAgICAgICAgICBtW3ZdID0gawogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1bdl0gPSBOb25lCiAgICByZXR1cm4gbQoKIyMjIGVycm9yIGhhbmRsZXJzCgp0cnk6CiAgICBzdHJpY3RfZXJyb3JzID0gbG9va3VwX2Vycm9yKCJzdHJpY3QiKQogICAgaWdub3JlX2Vycm9ycyA9IGxvb2t1cF9lcnJvcigiaWdub3JlIikKICAgIHJlcGxhY2VfZXJyb3JzID0gbG9va3VwX2Vycm9yKCJyZXBsYWNlIikKICAgIHhtbGNoYXJyZWZyZXBsYWNlX2Vycm9ycyA9IGxvb2t1cF9lcnJvcigieG1sY2hhcnJlZnJlcGxhY2UiKQogICAgYmFja3NsYXNocmVwbGFjZV9lcnJvcnMgPSBsb29rdXBfZXJyb3IoImJhY2tzbGFzaHJlcGxhY2UiKQpleGNlcHQgTG9va3VwRXJyb3I6CiAgICAjIEluIC0tZGlzYWJsZS11bmljb2RlIGJ1aWxkcywgdGhlc2UgZXJyb3IgaGFuZGxlciBhcmUgbWlzc2luZwogICAgc3RyaWN0X2Vycm9ycyA9IE5vbmUKICAgIGlnbm9yZV9lcnJvcnMgPSBOb25lCiAgICByZXBsYWNlX2Vycm9ycyA9IE5vbmUKICAgIHhtbGNoYXJyZWZyZXBsYWNlX2Vycm9ycyA9IE5vbmUKICAgIGJhY2tzbGFzaHJlcGxhY2VfZXJyb3JzID0gTm9uZQoKIyBUZWxsIG1vZHVsZWZpbmRlciB0aGF0IHVzaW5nIGNvZGVjcyBwcm9iYWJseSBuZWVkcyB0aGUgZW5jb2RpbmdzCiMgcGFja2FnZQpfZmFsc2UgPSAwCmlmIF9mYWxzZToKICAgIGltcG9ydCBlbmNvZGluZ3MKCiMjIyBUZXN0cwoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKCiAgICAjIE1ha2Ugc3Rkb3V0IHRyYW5zbGF0ZSBMYXRpbi0xIG91dHB1dCBpbnRvIFVURi04IG91dHB1dAogICAgc3lzLnN0ZG91dCA9IEVuY29kZWRGaWxlKHN5cy5zdGRvdXQsICdsYXRpbi0xJywgJ3V0Zi04JykKCiAgICAjIEhhdmUgc3RkaW4gdHJhbnNsYXRlIExhdGluLTEgaW5wdXQgaW50byBVVEYtOCBpbnB1dAogICAgc3lzLnN0ZGluID0gRW5jb2RlZEZpbGUoc3lzLnN0ZGluLCAndXRmLTgnLCAnbGF0aW4tMScpCg==',
'/Lib/linecache.py':'IiIiQ2FjaGUgbGluZXMgZnJvbSBmaWxlcy4KClRoaXMgaXMgaW50ZW5kZWQgdG8gcmVhZCBsaW5lcyBmcm9tIG1vZHVsZXMgaW1wb3J0ZWQgLS0gaGVuY2UgaWYgYSBmaWxlbmFtZQppcyBub3QgZm91bmQsIGl0IHdpbGwgbG9vayBkb3duIHRoZSBtb2R1bGUgc2VhcmNoIHBhdGggZm9yIGEgZmlsZSBieQp0aGF0IG5hbWUuCiIiIgoKaW1wb3J0IHN5cwppbXBvcnQgb3MKI2ZpeG1lIGJyeXRob24KI2ltcG9ydCB0b2tlbml6ZQoKX19hbGxfXyA9IFsiZ2V0bGluZSIsICJjbGVhcmNhY2hlIiwgImNoZWNrY2FjaGUiXQoKZGVmIGdldGxpbmUoZmlsZW5hbWUsIGxpbmVubywgbW9kdWxlX2dsb2JhbHM9Tm9uZSk6CiAgICBsaW5lcyA9IGdldGxpbmVzKGZpbGVuYW1lLCBtb2R1bGVfZ2xvYmFscykKICAgIGlmIDEgPD0gbGluZW5vIDw9IGxlbihsaW5lcyk6CiAgICAgICAgcmV0dXJuIGxpbmVzW2xpbmVuby0xXQogICAgZWxzZToKICAgICAgICByZXR1cm4gJycKCgojIFRoZSBjYWNoZQoKY2FjaGUgPSB7fSAjIFRoZSBjYWNoZQoKCmRlZiBjbGVhcmNhY2hlKCk6CiAgICAiIiJDbGVhciB0aGUgY2FjaGUgZW50aXJlbHkuIiIiCgogICAgZ2xvYmFsIGNhY2hlCiAgICBjYWNoZSA9IHt9CgoKZGVmIGdldGxpbmVzKGZpbGVuYW1lLCBtb2R1bGVfZ2xvYmFscz1Ob25lKToKICAgICIiIkdldCB0aGUgbGluZXMgZm9yIGEgZmlsZSBmcm9tIHRoZSBjYWNoZS4KICAgIFVwZGF0ZSB0aGUgY2FjaGUgaWYgaXQgZG9lc24ndCBjb250YWluIGFuIGVudHJ5IGZvciB0aGlzIGZpbGUgYWxyZWFkeS4iIiIKCiAgICBpZiBmaWxlbmFtZSBpbiBjYWNoZToKICAgICAgICByZXR1cm4gY2FjaGVbZmlsZW5hbWVdWzJdCiAgICBlbHNlOgogICAgICAgIHJldHVybiB1cGRhdGVjYWNoZShmaWxlbmFtZSwgbW9kdWxlX2dsb2JhbHMpCgoKZGVmIGNoZWNrY2FjaGUoZmlsZW5hbWU9Tm9uZSk6CiAgICAiIiJEaXNjYXJkIGNhY2hlIGVudHJpZXMgdGhhdCBhcmUgb3V0IG9mIGRhdGUuCiAgICAoVGhpcyBpcyBub3QgY2hlY2tlZCB1cG9uIGVhY2ggY2FsbCEpIiIiCgogICAgaWYgZmlsZW5hbWUgaXMgTm9uZToKICAgICAgICBmaWxlbmFtZXMgPSBsaXN0KGNhY2hlLmtleXMoKSkKICAgIGVsc2U6CiAgICAgICAgaWYgZmlsZW5hbWUgaW4gY2FjaGU6CiAgICAgICAgICAgIGZpbGVuYW1lcyA9IFtmaWxlbmFtZV0KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4KCiAgICBmb3IgZmlsZW5hbWUgaW4gZmlsZW5hbWVzOgogICAgICAgIHNpemUsIG10aW1lLCBsaW5lcywgZnVsbG5hbWUgPSBjYWNoZVtmaWxlbmFtZV0KICAgICAgICBpZiBtdGltZSBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZSAgICMgbm8tb3AgZm9yIGZpbGVzIGxvYWRlZCB2aWEgYSBfX2xvYWRlcl9fCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzdGF0ID0gb3Muc3RhdChmdWxsbmFtZSkKICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICNleGNlcHQgb3MuZXJyb3I6CiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBkZWwgY2FjaGVbZmlsZW5hbWVdCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgaWYgc2l6ZSAhPSBzdGF0LnN0X3NpemUgb3IgbXRpbWUgIT0gc3RhdC5zdF9tdGltZToKICAgICAgICAgICAgZGVsIGNhY2hlW2ZpbGVuYW1lXQoKCmRlZiB1cGRhdGVjYWNoZShmaWxlbmFtZSwgbW9kdWxlX2dsb2JhbHM9Tm9uZSk6CiAgICAiIiJVcGRhdGUgYSBjYWNoZSBlbnRyeSBhbmQgcmV0dXJuIGl0cyBsaXN0IG9mIGxpbmVzLgogICAgSWYgc29tZXRoaW5nJ3Mgd3JvbmcsIHByaW50IGEgbWVzc2FnZSwgZGlzY2FyZCB0aGUgY2FjaGUgZW50cnksCiAgICBhbmQgcmV0dXJuIGFuIGVtcHR5IGxpc3QuIiIiCgogICAgaWYgZmlsZW5hbWUgaW4gY2FjaGU6CiAgICAgICAgZGVsIGNhY2hlW2ZpbGVuYW1lXQogICAgaWYgbm90IGZpbGVuYW1lIG9yIChmaWxlbmFtZS5zdGFydHN3aXRoKCc8JykgYW5kIGZpbGVuYW1lLmVuZHN3aXRoKCc+JykpOgogICAgICAgIHJldHVybiBbXQoKICAgIGZ1bGxuYW1lID0gZmlsZW5hbWUKICAgIHRyeToKICAgICAgICBzdGF0ID0gb3Muc3RhdChmdWxsbmFtZSkKICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgIGJhc2VuYW1lID0gZmlsZW5hbWUKCiAgICAgICAgIyBUcnkgZm9yIGEgX19sb2FkZXJfXywgaWYgYXZhaWxhYmxlCiAgICAgICAgaWYgbW9kdWxlX2dsb2JhbHMgYW5kICdfX2xvYWRlcl9fJyBpbiBtb2R1bGVfZ2xvYmFsczoKICAgICAgICAgICAgbmFtZSA9IG1vZHVsZV9nbG9iYWxzLmdldCgnX19uYW1lX18nKQogICAgICAgICAgICBsb2FkZXIgPSBtb2R1bGVfZ2xvYmFsc1snX19sb2FkZXJfXyddCiAgICAgICAgICAgIGdldF9zb3VyY2UgPSBnZXRhdHRyKGxvYWRlciwgJ2dldF9zb3VyY2UnLCBOb25lKQoKICAgICAgICAgICAgaWYgbmFtZSBhbmQgZ2V0X3NvdXJjZToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBkYXRhID0gZ2V0X3NvdXJjZShuYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0IChJbXBvcnRFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBkYXRhIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICMgTm8gbHVjaywgdGhlIFBFUDMwMiBsb2FkZXIgY2Fubm90IGZpbmQgdGhlIHNvdXJjZQogICAgICAgICAgICAgICAgICAgICAgICAjIGZvciB0aGlzIG1vZHVsZS4KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdCiAgICAgICAgICAgICAgICAgICAgY2FjaGVbZmlsZW5hbWVdID0gKAogICAgICAgICAgICAgICAgICAgICAgICBsZW4oZGF0YSksIE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgIFtsaW5lKydcbicgZm9yIGxpbmUgaW4gZGF0YS5zcGxpdGxpbmVzKCldLCBmdWxsbmFtZQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVbZmlsZW5hbWVdWzJdCgogICAgICAgICMgVHJ5IGxvb2tpbmcgdGhyb3VnaCB0aGUgbW9kdWxlIHNlYXJjaCBwYXRoLCB3aGljaCBpcyBvbmx5IHVzZWZ1bAogICAgICAgICMgd2hlbiBoYW5kbGluZyBhIHJlbGF0aXZlIGZpbGVuYW1lLgogICAgICAgIGlmIG9zLnBhdGguaXNhYnMoZmlsZW5hbWUpOgogICAgICAgICAgICByZXR1cm4gW10KCiAgICAgICAgIyBUYWtlIGNhcmUgdG8gaGFuZGxlIHBhY2thZ2VzLgogICAgICAgIGlmIGJhc2VuYW1lID09ICdfX2luaXRfXy5weSc6CiAgICAgICAgICAgICMgZmlsZW5hbWUgcmVmZXJlcyB0byBhIHBhY2thZ2UKICAgICAgICAgICAgYmFzZW5hbWUgPSBmaWxlbmFtZQoKICAgICAgICBmb3IgZGlybmFtZSBpbiBzeXMucGF0aDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZnVsbG5hbWUgPSBvcy5wYXRoLmpvaW4oZGlybmFtZSwgYmFzZW5hbWUpCiAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBBdHRyaWJ1dGVFcnJvcik6CiAgICAgICAgICAgICAgICAjIE5vdCBzdWZmaWNpZW50bHkgc3RyaW5nLWxpa2UgdG8gZG8gYW55dGhpbmcgdXNlZnVsIHdpdGguCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzdGF0ID0gb3Muc3RhdChmdWxsbmFtZSkKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICNmaXhtZSBicnl0aG9uLCBpbnZhbGlkIHN5bnRheCAKICAgICAgICAgICAgI2V4Y2VwdCBvcy5lcnJvcjoKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICNmaXhtZSBicnl0aG9uIHVuZXhwZWN0ZWQgdG9rZW4gZWxzZQogICAgICAgICNlbHNlOgogICAgICAgICMgICAgcmV0dXJuIFtdCiAgICB0cnk6CiAgICAgICAgZnA9b3BlbihmdWxsbmFtZSkKICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICN3aXRoIHRva2VuaXplLm9wZW4oZnVsbG5hbWUpIGFzIGZwOgogICAgICAgIGxpbmVzID0gZnAucmVhZGxpbmVzKCkKICAgICAgICBmcC5jbG9zZSgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICByZXR1cm4gW10KICAgIGlmIGxpbmVzIGFuZCBub3QgbGluZXNbLTFdLmVuZHN3aXRoKCdcbicpOgogICAgICAgIGxpbmVzWy0xXSArPSAnXG4nCiAgICBzaXplLCBtdGltZSA9IHN0YXQuc3Rfc2l6ZSwgc3RhdC5zdF9tdGltZQogICAgY2FjaGVbZmlsZW5hbWVdID0gc2l6ZSwgbXRpbWUsIGxpbmVzLCBmdWxsbmFtZQogICAgcmV0dXJuIGxpbmVzCg==',
'/Lib/_thread.py':'IiIiRHJvcC1pbiByZXBsYWNlbWVudCBmb3IgdGhlIHRocmVhZCBtb2R1bGUuCgpNZWFudCB0byBiZSB1c2VkIGFzIGEgYnJhaW4tZGVhZCBzdWJzdGl0dXRlIHNvIHRoYXQgdGhyZWFkZWQgY29kZSBkb2VzCm5vdCBuZWVkIHRvIGJlIHJld3JpdHRlbiBmb3Igd2hlbiB0aGUgdGhyZWFkIG1vZHVsZSBpcyBub3QgcHJlc2VudC4KClN1Z2dlc3RlZCB1c2FnZSBpczo6CgogICAgdHJ5OgogICAgICAgIGltcG9ydCBfdGhyZWFkCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgaW1wb3J0IF9kdW1teV90aHJlYWQgYXMgX3RocmVhZAoKIiIiCiMgRXhwb3J0cyBvbmx5IHRoaW5ncyBzcGVjaWZpZWQgYnkgdGhyZWFkIGRvY3VtZW50YXRpb247CiMgc2tpcHBpbmcgb2Jzb2xldGUgc3lub255bXMgYWxsb2NhdGUoKSwgc3RhcnRfbmV3KCksIGV4aXRfdGhyZWFkKCkuCl9fYWxsX18gPSBbJ2Vycm9yJywgJ3N0YXJ0X25ld190aHJlYWQnLCAnZXhpdCcsICdnZXRfaWRlbnQnLCAnYWxsb2NhdGVfbG9jaycsCiAgICAgICAgICAgJ2ludGVycnVwdF9tYWluJywgJ0xvY2tUeXBlJ10KCiMgQSBkdW1teSB2YWx1ZQpUSU1FT1VUX01BWCA9IDIqKjMxCgojIE5PVEU6IHRoaXMgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBlYXJseSBpbiB0aGUgZXh0ZW5zaW9uIGJ1aWxkaW5nIHByb2Nlc3MsCiMgYW5kIHNvIHRvcCBsZXZlbCBpbXBvcnRzIG9mIG90aGVyIG1vZHVsZXMgc2hvdWxkIGJlIGF2b2lkZWQuICBJbnN0ZWFkLCBhbGwKIyBpbXBvcnRzIGFyZSBkb25lIHdoZW4gbmVlZGVkIG9uIGEgZnVuY3Rpb24tYnktZnVuY3Rpb24gYmFzaXMuICBTaW5jZSB0aHJlYWRzCiMgYXJlIGRpc2FibGVkLCB0aGUgaW1wb3J0IGxvY2sgc2hvdWxkIG5vdCBiZSBhbiBpc3N1ZSBhbnl3YXkgKD8/KS4KCmVycm9yID0gUnVudGltZUVycm9yCgpkZWYgc3RhcnRfbmV3X3RocmVhZChmdW5jdGlvbiwgYXJncywga3dhcmdzPXt9KToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuc3RhcnRfbmV3X3RocmVhZCgpLgoKICAgIENvbXBhdGliaWxpdHkgaXMgbWFpbnRhaW5lZCBieSBtYWtpbmcgc3VyZSB0aGF0IGBgYXJnc2BgIGlzIGEKICAgIHR1cGxlIGFuZCBgYGt3YXJnc2BgIGlzIGEgZGljdGlvbmFyeS4gIElmIGFuIGV4Y2VwdGlvbiBpcyByYWlzZWQKICAgIGFuZCBpdCBpcyBTeXN0ZW1FeGl0ICh3aGljaCBjYW4gYmUgZG9uZSBieSBfdGhyZWFkLmV4aXQoKSkgaXQgaXMKICAgIGNhdWdodCBhbmQgbm90aGluZyBpcyBkb25lOyBhbGwgb3RoZXIgZXhjZXB0aW9ucyBhcmUgcHJpbnRlZCBvdXQKICAgIGJ5IHVzaW5nIHRyYWNlYmFjay5wcmludF9leGMoKS4KCiAgICBJZiB0aGUgZXhlY3V0ZWQgZnVuY3Rpb24gY2FsbHMgaW50ZXJydXB0X21haW4gdGhlIEtleWJvYXJkSW50ZXJydXB0IHdpbGwgYmUKICAgIHJhaXNlZCB3aGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zLgoKICAgICIiIgogICAgaWYgdHlwZShhcmdzKSAhPSB0eXBlKHR1cGxlKCkpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiMm5kIGFyZyBtdXN0IGJlIGEgdHVwbGUiKQogICAgaWYgdHlwZShrd2FyZ3MpICE9IHR5cGUoZGljdCgpKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoIjNyZCBhcmcgbXVzdCBiZSBhIGRpY3QiKQogICAgZ2xvYmFsIF9tYWluCiAgICBfbWFpbiA9IEZhbHNlCiAgICB0cnk6CiAgICAgICAgZnVuY3Rpb24oKmFyZ3MsICoqa3dhcmdzKQogICAgZXhjZXB0IFN5c3RlbUV4aXQ6CiAgICAgICAgcGFzcwogICAgZXhjZXB0OgogICAgICAgIGltcG9ydCB0cmFjZWJhY2sKICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkKICAgIF9tYWluID0gVHJ1ZQogICAgZ2xvYmFsIF9pbnRlcnJ1cHQKICAgIGlmIF9pbnRlcnJ1cHQ6CiAgICAgICAgX2ludGVycnVwdCA9IEZhbHNlCiAgICAgICAgcmFpc2UgS2V5Ym9hcmRJbnRlcnJ1cHQKCmRlZiBleGl0KCk6CiAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLmV4aXQoKS4iIiIKICAgIHJhaXNlIFN5c3RlbUV4aXQKCmRlZiBnZXRfaWRlbnQoKToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuZ2V0X2lkZW50KCkuCgogICAgU2luY2UgdGhpcyBtb2R1bGUgc2hvdWxkIG9ubHkgYmUgdXNlZCB3aGVuIF90aHJlYWRtb2R1bGUgaXMgbm90CiAgICBhdmFpbGFibGUsIGl0IGlzIHNhZmUgdG8gYXNzdW1lIHRoYXQgdGhlIGN1cnJlbnQgcHJvY2VzcyBpcyB0aGUKICAgIG9ubHkgdGhyZWFkLiAgVGh1cyBhIGNvbnN0YW50IGNhbiBiZSBzYWZlbHkgcmV0dXJuZWQuCiAgICAiIiIKICAgIHJldHVybiAtMQoKZGVmIGFsbG9jYXRlX2xvY2soKToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuYWxsb2NhdGVfbG9jaygpLiIiIgogICAgcmV0dXJuIExvY2tUeXBlKCkKCmRlZiBzdGFja19zaXplKHNpemU9Tm9uZSk6CiAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLnN0YWNrX3NpemUoKS4iIiIKICAgIGlmIHNpemUgaXMgbm90IE5vbmU6CiAgICAgICAgcmFpc2UgZXJyb3IoInNldHRpbmcgdGhyZWFkIHN0YWNrIHNpemUgbm90IHN1cHBvcnRlZCIpCiAgICByZXR1cm4gMAoKY2xhc3MgTG9ja1R5cGUob2JqZWN0KToKICAgICIiIkNsYXNzIGltcGxlbWVudGluZyBkdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLkxvY2tUeXBlLgoKICAgIENvbXBhdGliaWxpdHkgaXMgbWFpbnRhaW5lZCBieSBtYWludGFpbmluZyBzZWxmLmxvY2tlZF9zdGF0dXMKICAgIHdoaWNoIGlzIGEgYm9vbGVhbiB0aGF0IHN0b3JlcyB0aGUgc3RhdGUgb2YgdGhlIGxvY2suICBQaWNrbGluZyBvZgogICAgdGhlIGxvY2ssIHRob3VnaCwgc2hvdWxkIG5vdCBiZSBkb25lIHNpbmNlIGlmIHRoZSBfdGhyZWFkIG1vZHVsZSBpcwogICAgdGhlbiB1c2VkIHdpdGggYW4gdW5waWNrbGVkIGBgbG9jaygpYGAgZnJvbSBoZXJlIHByb2JsZW1zIGNvdWxkCiAgICBvY2N1ciBmcm9tIHRoaXMgY2xhc3Mgbm90IGhhdmluZyBhdG9taWMgbWV0aG9kcy4KCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5sb2NrZWRfc3RhdHVzID0gRmFsc2UKCiAgICBkZWYgYWNxdWlyZShzZWxmLCB3YWl0ZmxhZz1Ob25lLCB0aW1lb3V0PS0xKToKICAgICAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBhY3F1aXJlKCkuCgogICAgICAgIEZvciBibG9ja2luZyBjYWxscywgc2VsZi5sb2NrZWRfc3RhdHVzIGlzIGF1dG9tYXRpY2FsbHkgc2V0IHRvCiAgICAgICAgVHJ1ZSBhbmQgcmV0dXJuZWQgYXBwcm9wcmlhdGVseSBiYXNlZCBvbiB2YWx1ZSBvZgogICAgICAgIGBgd2FpdGZsYWdgYC4gIElmIGl0IGlzIG5vbi1ibG9ja2luZywgdGhlbiB0aGUgdmFsdWUgaXMKICAgICAgICBhY3R1YWxseSBjaGVja2VkIGFuZCBub3Qgc2V0IGlmIGl0IGlzIGFscmVhZHkgYWNxdWlyZWQuICBUaGlzCiAgICAgICAgaXMgYWxsIGRvbmUgc28gdGhhdCB0aHJlYWRpbmcuQ29uZGl0aW9uJ3MgYXNzZXJ0IHN0YXRlbWVudHMKICAgICAgICBhcmVuJ3QgdHJpZ2dlcmVkIGFuZCB0aHJvdyBhIGxpdHRsZSBmaXQuCgogICAgICAgICIiIgogICAgICAgIGlmIHdhaXRmbGFnIGlzIE5vbmUgb3Igd2FpdGZsYWc6CiAgICAgICAgICAgIHNlbGYubG9ja2VkX3N0YXR1cyA9IFRydWUKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5sb2NrZWRfc3RhdHVzOgogICAgICAgICAgICAgICAgc2VsZi5sb2NrZWRfc3RhdHVzID0gVHJ1ZQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIHRpbWVvdXQgPiAwOgogICAgICAgICAgICAgICAgICAgIGltcG9ydCB0aW1lCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCh0aW1lb3V0KQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgX19lbnRlcl9fID0gYWNxdWlyZQoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCB0eXAsIHZhbCwgdGIpOgogICAgICAgIHNlbGYucmVsZWFzZSgpCgogICAgZGVmIHJlbGVhc2Uoc2VsZik6CiAgICAgICAgIiIiUmVsZWFzZSB0aGUgZHVtbXkgbG9jay4iIiIKICAgICAgICAjIFhYWCBQZXJoYXBzIHNob3VsZG4ndCBhY3R1YWxseSBib3RoZXIgdG8gdGVzdD8gIENvdWxkIGxlYWQKICAgICAgICAjICAgICB0byBwcm9ibGVtcyBmb3IgY29tcGxleCwgdGhyZWFkZWQgY29kZS4KICAgICAgICBpZiBub3Qgc2VsZi5sb2NrZWRfc3RhdHVzOgogICAgICAgICAgICByYWlzZSBlcnJvcgogICAgICAgIHNlbGYubG9ja2VkX3N0YXR1cyA9IEZhbHNlCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgbG9ja2VkKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmxvY2tlZF9zdGF0dXMKCiMgVXNlZCB0byBzaWduYWwgdGhhdCBpbnRlcnJ1cHRfbWFpbiB3YXMgY2FsbGVkIGluIGEgInRocmVhZCIKX2ludGVycnVwdCA9IEZhbHNlCiMgVHJ1ZSB3aGVuIG5vdCBleGVjdXRpbmcgaW4gYSAidGhyZWFkIgpfbWFpbiA9IFRydWUKCmRlZiBpbnRlcnJ1cHRfbWFpbigpOgogICAgIiIiU2V0IF9pbnRlcnJ1cHQgZmxhZyB0byBUcnVlIHRvIGhhdmUgc3RhcnRfbmV3X3RocmVhZCByYWlzZQogICAgS2V5Ym9hcmRJbnRlcnJ1cHQgdXBvbiBleGl0aW5nLiIiIgogICAgaWYgX21haW46CiAgICAgICAgcmFpc2UgS2V5Ym9hcmRJbnRlcnJ1cHQKICAgIGVsc2U6CiAgICAgICAgZ2xvYmFsIF9pbnRlcnJ1cHQKICAgICAgICBfaW50ZXJydXB0ID0gVHJ1ZQoKIyBCcnl0aG9uLXNwZWNpZmljIHRvIGF2b2lkIGNpcmN1bGFyIHJlZmVyZW5jZXMgYmV0d2VlbiB0aHJlYWRpbmcgYW5kIF90aHJlYWRpbmdfbG9jYWwKY2xhc3MgX2xvY2FsOgogICAgcGFzcw==',
'/Lib/imp.py':'IiIiVGhpcyBtb2R1bGUgcHJvdmlkZXMgdGhlIGNvbXBvbmVudHMgbmVlZGVkIHRvIGJ1aWxkIHlvdXIgb3duIF9faW1wb3J0X18KZnVuY3Rpb24uICBVbmRvY3VtZW50ZWQgZnVuY3Rpb25zIGFyZSBvYnNvbGV0ZS4KCkluIG1vc3QgY2FzZXMgaXQgaXMgcHJlZmVycmVkIHlvdSBjb25zaWRlciB1c2luZyB0aGUgaW1wb3J0bGliIG1vZHVsZSdzCmZ1bmN0aW9uYWxpdHkgb3ZlciB0aGlzIG1vZHVsZS4KCiIiIgojIChQcm9iYWJseSkgbmVlZCB0byBzdGF5IGluIF9pbXAKCmZyb20gX2ltcCBpbXBvcnQgKGxvY2tfaGVsZCwgYWNxdWlyZV9sb2NrLCByZWxlYXNlX2xvY2ssCiAgICAgICAgICAgICAgICAgIGxvYWRfZHluYW1pYywgZ2V0X2Zyb3plbl9vYmplY3QsIGlzX2Zyb3plbl9wYWNrYWdlLAogICAgICAgICAgICAgICAgICBpbml0X2J1aWx0aW4sIGluaXRfZnJvemVuLCBpc19idWlsdGluLCBpc19mcm96ZW4sCiAgICAgICAgICAgICAgICAgIF9maXhfY29fZmlsZW5hbWUpCiMgRGlyZWN0bHkgZXhwb3NlZCBieSB0aGlzIG1vZHVsZQpmcm9tIGltcG9ydGxpYi5fYm9vdHN0cmFwIGltcG9ydCBuZXdfbW9kdWxlCmZyb20gaW1wb3J0bGliLl9ib290c3RyYXAgaW1wb3J0IGNhY2hlX2Zyb21fc291cmNlLCBzb3VyY2VfZnJvbV9jYWNoZQoKCmZyb20gaW1wb3J0bGliIGltcG9ydCBfYm9vdHN0cmFwCmZyb20gaW1wb3J0bGliIGltcG9ydCBtYWNoaW5lcnkKaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHRva2VuaXplCmltcG9ydCB3YXJuaW5ncwoKIyBERVBSRUNBVEVEClNFQVJDSF9FUlJPUiA9IDAKUFlfU09VUkNFID0gMQpQWV9DT01QSUxFRCA9IDIKQ19FWFRFTlNJT04gPSAzClBZX1JFU09VUkNFID0gNApQS0dfRElSRUNUT1JZID0gNQpDX0JVSUxUSU4gPSA2ClBZX0ZST1pFTiA9IDcKUFlfQ09ERVJFU09VUkNFID0gOApJTVBfSE9PSyA9IDkKCgpkZWYgZ2V0X21hZ2ljKCk6CiAgICAiIiJSZXR1cm4gdGhlIG1hZ2ljIG51bWJlciBmb3IgLnB5YyBvciAucHlvIGZpbGVzLiIiIgogICAgcmV0dXJuIF9ib290c3RyYXAuX01BR0lDX0JZVEVTCgoKZGVmIGdldF90YWcoKToKICAgICIiIlJldHVybiB0aGUgbWFnaWMgdGFnIGZvciAucHljIG9yIC5weW8gZmlsZXMuIiIiCiAgICByZXR1cm4gc3lzLmltcGxlbWVudGF0aW9uLmNhY2hlX3RhZwoKCmRlZiBnZXRfc3VmZml4ZXMoKToKICAgIHdhcm5pbmdzLndhcm4oJ2ltcC5nZXRfc3VmZml4ZXMoKSBpcyBkZXByZWNhdGVkOyB1c2UgdGhlIGNvbnN0YW50cyAnCiAgICAgICAgICAgICAgICAgICdkZWZpbmVkIG9uIGltcG9ydGxpYi5tYWNoaW5lcnkgaW5zdGVhZCcsCiAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgIGV4dGVuc2lvbnMgPSBbKHMsICdyYicsIENfRVhURU5TSU9OKSBmb3IgcyBpbiBtYWNoaW5lcnkuRVhURU5TSU9OX1NVRkZJWEVTXQogICAgc291cmNlID0gWyhzLCAnVScsIFBZX1NPVVJDRSkgZm9yIHMgaW4gbWFjaGluZXJ5LlNPVVJDRV9TVUZGSVhFU10KICAgIGJ5dGVjb2RlID0gWyhzLCAncmInLCBQWV9DT01QSUxFRCkgZm9yIHMgaW4gbWFjaGluZXJ5LkJZVEVDT0RFX1NVRkZJWEVTXQoKICAgIHJldHVybiBleHRlbnNpb25zICsgc291cmNlICsgYnl0ZWNvZGUKCgpjbGFzcyBOdWxsSW1wb3J0ZXI6CgogICAgIiIiTnVsbCBpbXBvcnQgb2JqZWN0LiIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwYXRoKToKICAgICAgICBpZiBwYXRoID09ICcnOgogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcignZW1wdHkgcGF0aG5hbWUnLCBwYXRoPScnKQogICAgICAgIGVsaWYgb3MucGF0aC5pc2RpcihwYXRoKToKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoJ2V4aXN0aW5nIGRpcmVjdG9yeScsIHBhdGg9cGF0aCkKCiAgICBkZWYgZmluZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgICIiIkFsd2F5cyByZXR1cm5zIE5vbmUuIiIiCiAgICAgICAgcmV0dXJuIE5vbmUKCgpjbGFzcyBfSGFja2VkR2V0RGF0YToKCiAgICAiIiJDb21wYXRpYmlpbHR5IHN1cHBvcnQgZm9yICdmaWxlJyBhcmd1bWVudHMgb2YgdmFyaW91cyBsb2FkXyooKQogICAgZnVuY3Rpb25zLiIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmdWxsbmFtZSwgcGF0aCwgZmlsZT1Ob25lKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGZ1bGxuYW1lLCBwYXRoKQogICAgICAgIHNlbGYuZmlsZSA9IGZpbGUKCiAgICBkZWYgZ2V0X2RhdGEoc2VsZiwgcGF0aCk6CiAgICAgICAgIiIiR3Jvc3MgaGFjayB0byBjb250b3J0IGxvYWRlciB0byBkZWFsIHcvIGxvYWRfKigpJ3MgYmFkIEFQSS4iIiIKICAgICAgICBpZiBzZWxmLmZpbGUgYW5kIHBhdGggPT0gc2VsZi5wYXRoOgogICAgICAgICAgICB3aXRoIHNlbGYuZmlsZToKICAgICAgICAgICAgICAgICMgVGVjaG5pY2FsbHkgc2hvdWxkIGJlIHJldHVybmluZyBieXRlcywgYnV0CiAgICAgICAgICAgICAgICAjIFNvdXJjZUxvYWRlci5nZXRfY29kZSgpIGp1c3QgcGFzc2VkIHdoYXQgaXMgcmV0dXJuZWQgdG8KICAgICAgICAgICAgICAgICMgY29tcGlsZSgpIHdoaWNoIGNhbiBoYW5kbGUgc3RyLiBBbmQgY29udmVydGluZyB0byBieXRlcyB3b3VsZAogICAgICAgICAgICAgICAgIyByZXF1aXJlIGZpZ3VyaW5nIG91dCB0aGUgZW5jb2RpbmcgdG8gZGVjb2RlIHRvIGFuZAogICAgICAgICAgICAgICAgIyB0b2tlbml6ZS5kZXRlY3RfZW5jb2RpbmcoKSBvbmx5IGFjY2VwdHMgYnl0ZXMuCiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5maWxlLnJlYWQoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBzdXBlcigpLmdldF9kYXRhKHBhdGgpCgoKY2xhc3MgX0xvYWRTb3VyY2VDb21wYXRpYmlsaXR5KF9IYWNrZWRHZXREYXRhLCBfYm9vdHN0cmFwLlNvdXJjZUZpbGVMb2FkZXIpOgoKICAgICIiIkNvbXBhdGliaWxpdHkgc3VwcG9ydCBmb3IgaW1wbGVtZW50aW5nIGxvYWRfc291cmNlKCkuIiIiCgoKZGVmIGxvYWRfc291cmNlKG5hbWUsIHBhdGhuYW1lLCBmaWxlPU5vbmUpOgogICAgbXNnID0gKCdpbXAubG9hZF9zb3VyY2UoKSBpcyBkZXByZWNhdGVkOyB1c2UgJwogICAgICAgICAgICdpbXBvcnRsaWIubWFjaGluZXJ5LlNvdXJjZUZpbGVMb2FkZXIobmFtZSwgcGF0aG5hbWUpLmxvYWRfbW9kdWxlKCknCiAgICAgICAgICAgJyBpbnN0ZWFkJykKICAgIHdhcm5pbmdzLndhcm4obXNnLCBEZXByZWNhdGlvbldhcm5pbmcsIDIpCiAgICByZXR1cm4gX0xvYWRTb3VyY2VDb21wYXRpYmlsaXR5KG5hbWUsIHBhdGhuYW1lLCBmaWxlKS5sb2FkX21vZHVsZShuYW1lKQoKCmNsYXNzIF9Mb2FkQ29tcGlsZWRDb21wYXRpYmlsaXR5KF9IYWNrZWRHZXREYXRhLAogICAgICAgIF9ib290c3RyYXAuU291cmNlbGVzc0ZpbGVMb2FkZXIpOgoKICAgICIiIkNvbXBhdGliaWxpdHkgc3VwcG9ydCBmb3IgaW1wbGVtZW50aW5nIGxvYWRfY29tcGlsZWQoKS4iIiIKCgpkZWYgbG9hZF9jb21waWxlZChuYW1lLCBwYXRobmFtZSwgZmlsZT1Ob25lKToKICAgIG1zZyA9ICgnaW1wLmxvYWRfY29tcGlsZWQoKSBpcyBkZXByZWNhdGVkOyB1c2UgJwogICAgICAgICAgICdpbXBvcnRsaWIubWFjaGluZXJ5LlNvdXJjZWxlc3NGaWxlTG9hZGVyKG5hbWUsIHBhdGhuYW1lKS4nCiAgICAgICAgICAgJ2xvYWRfbW9kdWxlKCkgaW5zdGVhZCAnKQogICAgd2FybmluZ3Mud2Fybihtc2csIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgIHJldHVybiBfTG9hZENvbXBpbGVkQ29tcGF0aWJpbGl0eShuYW1lLCBwYXRobmFtZSwgZmlsZSkubG9hZF9tb2R1bGUobmFtZSkKCgpkZWYgbG9hZF9wYWNrYWdlKG5hbWUsIHBhdGgpOgogICAgbXNnID0gKCdpbXAubG9hZF9wYWNrYWdlKCkgaXMgZGVwcmVjYXRlZDsgdXNlIGVpdGhlciAnCiAgICAgICAgICAgJ2ltcG9ydGxpYi5tYWNoaW5lcnkuU291cmNlRmlsZUxvYWRlcigpIG9yICcKICAgICAgICAgICAnaW1wb3J0bGliLm1hY2hpbmVyeS5Tb3VyY2VsZXNzRmlsZUxvYWRlcigpIGluc3RlYWQnKQogICAgd2FybmluZ3Mud2Fybihtc2csIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgIGlmIG9zLnBhdGguaXNkaXIocGF0aCk6CiAgICAgICAgZXh0ZW5zaW9ucyA9IChtYWNoaW5lcnkuU09VUkNFX1NVRkZJWEVTWzpdICsKICAgICAgICAgICAgICAgICAgICAgIG1hY2hpbmVyeS5CWVRFQ09ERV9TVUZGSVhFU1s6XSkKICAgICAgICBmb3IgZXh0ZW5zaW9uIGluIGV4dGVuc2lvbnM6CiAgICAgICAgICAgIHBhdGggPSBvcy5wYXRoLmpvaW4ocGF0aCwgJ19faW5pdF9fJytleHRlbnNpb24pCiAgICAgICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKHBhdGgpOgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCd7IXJ9IGlzIG5vdCBhIHBhY2thZ2UnLmZvcm1hdChwYXRoKSkKICAgIHJldHVybiBfYm9vdHN0cmFwLlNvdXJjZUZpbGVMb2FkZXIobmFtZSwgcGF0aCkubG9hZF9tb2R1bGUobmFtZSkKCgpkZWYgbG9hZF9tb2R1bGUobmFtZSwgZmlsZSwgZmlsZW5hbWUsIGRldGFpbHMpOgogICAgIiIiKipERVBSRUNBVEVEKioKCiAgICBMb2FkIGEgbW9kdWxlLCBnaXZlbiBpbmZvcm1hdGlvbiByZXR1cm5lZCBieSBmaW5kX21vZHVsZSgpLgoKICAgIFRoZSBtb2R1bGUgbmFtZSBtdXN0IGluY2x1ZGUgdGhlIGZ1bGwgcGFja2FnZSBuYW1lLCBpZiBhbnkuCgogICAgIiIiCiAgICBzdWZmaXgsIG1vZGUsIHR5cGVfID0gZGV0YWlscwogICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOgogICAgICAgIHdhcm5pbmdzLnNpbXBsZWZpbHRlcignaWdub3JlJykKICAgICAgICBpZiBtb2RlIGFuZCAobm90IG1vZGUuc3RhcnRzd2l0aCgoJ3InLCAnVScpKSBvciAnKycgaW4gbW9kZSk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ2ludmFsaWQgZmlsZSBvcGVuIG1vZGUgeyFyfScuZm9ybWF0KG1vZGUpKQogICAgICAgIGVsaWYgZmlsZSBpcyBOb25lIGFuZCB0eXBlXyBpbiB7UFlfU09VUkNFLCBQWV9DT01QSUxFRH06CiAgICAgICAgICAgIG1zZyA9ICdmaWxlIG9iamVjdCByZXF1aXJlZCBmb3IgaW1wb3J0ICh0eXBlIGNvZGUge30pJy5mb3JtYXQodHlwZV8pCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IobXNnKQogICAgICAgIGVsaWYgdHlwZV8gPT0gUFlfU09VUkNFOgogICAgICAgICAgICByZXR1cm4gbG9hZF9zb3VyY2UobmFtZSwgZmlsZW5hbWUsIGZpbGUpCiAgICAgICAgZWxpZiB0eXBlXyA9PSBQWV9DT01QSUxFRDoKICAgICAgICAgICAgcmV0dXJuIGxvYWRfY29tcGlsZWQobmFtZSwgZmlsZW5hbWUsIGZpbGUpCiAgICAgICAgZWxpZiB0eXBlXyA9PSBQS0dfRElSRUNUT1JZOgogICAgICAgICAgICByZXR1cm4gbG9hZF9wYWNrYWdlKG5hbWUsIGZpbGVuYW1lKQogICAgICAgIGVsaWYgdHlwZV8gPT0gQ19CVUlMVElOOgogICAgICAgICAgICByZXR1cm4gaW5pdF9idWlsdGluKG5hbWUpCiAgICAgICAgZWxpZiB0eXBlXyA9PSBQWV9GUk9aRU46CiAgICAgICAgICAgIHJldHVybiBpbml0X2Zyb3plbihuYW1lKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1zZyA9ICAiRG9uJ3Qga25vdyBob3cgdG8gaW1wb3J0IHt9ICh0eXBlIGNvZGUge30iLmZvcm1hdChuYW1lLCB0eXBlXykKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IobXNnLCBuYW1lPW5hbWUpCgoKZGVmIGZpbmRfbW9kdWxlKG5hbWUsIHBhdGg9Tm9uZSk6CiAgICAiIiIqKkRFUFJFQ0FURUQqKgoKICAgIFNlYXJjaCBmb3IgYSBtb2R1bGUuCgogICAgSWYgcGF0aCBpcyBvbWl0dGVkIG9yIE5vbmUsIHNlYXJjaCBmb3IgYSBidWlsdC1pbiwgZnJvemVuIG9yIHNwZWNpYWwKICAgIG1vZHVsZSBhbmQgY29udGludWUgc2VhcmNoIGluIHN5cy5wYXRoLiBUaGUgbW9kdWxlIG5hbWUgY2Fubm90CiAgICBjb250YWluICcuJzsgdG8gc2VhcmNoIGZvciBhIHN1Ym1vZHVsZSBvZiBhIHBhY2thZ2UsIHBhc3MgdGhlCiAgICBzdWJtb2R1bGUgbmFtZSBhbmQgdGhlIHBhY2thZ2UncyBfX3BhdGhfXy4KCiAgICAiIiIKICAgIGlmIG5vdCBpc2luc3RhbmNlKG5hbWUsIHN0cik6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCInbmFtZScgbXVzdCBiZSBhIHN0ciwgbm90IHt9Ii5mb3JtYXQodHlwZShuYW1lKSkpCiAgICBlbGlmIG5vdCBpc2luc3RhbmNlKHBhdGgsICh0eXBlKE5vbmUpLCBsaXN0KSk6CiAgICAgICAgIyBCYWNrd2FyZHMtY29tcGF0aWJpbGl0eQogICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiJ2xpc3QnIG11c3QgYmUgTm9uZSBvciBhIGxpc3QsICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5vdCB7fSIuZm9ybWF0KHR5cGUobmFtZSkpKQoKICAgIGlmIHBhdGggaXMgTm9uZToKICAgICAgICBpZiBpc19idWlsdGluKG5hbWUpOgogICAgICAgICAgICByZXR1cm4gTm9uZSwgTm9uZSwgKCcnLCAnJywgQ19CVUlMVElOKQogICAgICAgIGVsaWYgaXNfZnJvemVuKG5hbWUpOgogICAgICAgICAgICByZXR1cm4gTm9uZSwgTm9uZSwgKCcnLCAnJywgUFlfRlJPWkVOKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHBhdGggPSBzeXMucGF0aAoKICAgIGZvciBlbnRyeSBpbiBwYXRoOgogICAgICAgIHBhY2thZ2VfZGlyZWN0b3J5ID0gb3MucGF0aC5qb2luKGVudHJ5LCBuYW1lKQogICAgICAgIGZvciBzdWZmaXggaW4gWycucHknLCBtYWNoaW5lcnkuQllURUNPREVfU1VGRklYRVNbMF1dOgogICAgICAgICAgICBwYWNrYWdlX2ZpbGVfbmFtZSA9ICdfX2luaXRfXycgKyBzdWZmaXgKICAgICAgICAgICAgZmlsZV9wYXRoID0gb3MucGF0aC5qb2luKHBhY2thZ2VfZGlyZWN0b3J5LCBwYWNrYWdlX2ZpbGVfbmFtZSkKICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUoZmlsZV9wYXRoKToKICAgICAgICAgICAgICAgIHJldHVybiBOb25lLCBwYWNrYWdlX2RpcmVjdG9yeSwgKCcnLCAnJywgUEtHX0RJUkVDVE9SWSkKICAgICAgICB3aXRoIHdhcm5pbmdzLmNhdGNoX3dhcm5pbmdzKCk6CiAgICAgICAgICAgIHdhcm5pbmdzLnNpbXBsZWZpbHRlcignaWdub3JlJykKICAgICAgICAgICAgZm9yIHN1ZmZpeCwgbW9kZSwgdHlwZV8gaW4gZ2V0X3N1ZmZpeGVzKCk6CiAgICAgICAgICAgICAgICBmaWxlX25hbWUgPSBuYW1lICsgc3VmZml4CiAgICAgICAgICAgICAgICBmaWxlX3BhdGggPSBvcy5wYXRoLmpvaW4oZW50cnksIGZpbGVfbmFtZSkKICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKGZpbGVfcGF0aCk6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGJyZWFrICAjIEJyZWFrIG91dCBvZiBvdXRlciBsb29wIHdoZW4gYnJlYWtpbmcgb3V0IG9mIGlubmVyIGxvb3AuCiAgICBlbHNlOgogICAgICAgIHJhaXNlIEltcG9ydEVycm9yKF9ib290c3RyYXAuX0VSUl9NU0cuZm9ybWF0KG5hbWUpLCBuYW1lPW5hbWUpCgogICAgZW5jb2RpbmcgPSBOb25lCiAgICBpZiBtb2RlID09ICdVJzoKICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAncmInKSBhcyBmaWxlOgogICAgICAgICAgICBlbmNvZGluZyA9IHRva2VuaXplLmRldGVjdF9lbmNvZGluZyhmaWxlLnJlYWRsaW5lKVswXQogICAgZmlsZSA9IG9wZW4oZmlsZV9wYXRoLCBtb2RlLCBlbmNvZGluZz1lbmNvZGluZykKICAgIHJldHVybiBmaWxlLCBmaWxlX3BhdGgsIChzdWZmaXgsIG1vZGUsIHR5cGVfKQoKCl9SRUxPQURJTkcgPSB7fQoKZGVmIHJlbG9hZChtb2R1bGUpOgogICAgIiIiUmVsb2FkIHRoZSBtb2R1bGUgYW5kIHJldHVybiBpdC4KCiAgICBUaGUgbW9kdWxlIG11c3QgaGF2ZSBiZWVuIHN1Y2Nlc3NmdWxseSBpbXBvcnRlZCBiZWZvcmUuCgogICAgIiIiCiAgICBpZiBub3QgbW9kdWxlIG9yIHR5cGUobW9kdWxlKSAhPSB0eXBlKHN5cyk6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJyZWxvYWQoKSBhcmd1bWVudCBtdXN0IGJlIG1vZHVsZSIpCiAgICBuYW1lID0gbW9kdWxlLl9fbmFtZV9fCiAgICBpZiBuYW1lIG5vdCBpbiBzeXMubW9kdWxlczoKICAgICAgICBtc2cgPSAibW9kdWxlIHt9IG5vdCBpbiBzeXMubW9kdWxlcyIKICAgICAgICByYWlzZSBJbXBvcnRFcnJvcihtc2cuZm9ybWF0KG5hbWUpLCBuYW1lPW5hbWUpCiAgICBpZiBuYW1lIGluIF9SRUxPQURJTkc6CiAgICAgICAgcmV0dXJuIF9SRUxPQURJTkdbbmFtZV0KICAgIF9SRUxPQURJTkdbbmFtZV0gPSBtb2R1bGUKICAgIHRyeToKICAgICAgICBwYXJlbnRfbmFtZSA9IG5hbWUucnBhcnRpdGlvbignLicpWzBdCiAgICAgICAgaWYgcGFyZW50X25hbWUgYW5kIHBhcmVudF9uYW1lIG5vdCBpbiBzeXMubW9kdWxlczoKICAgICAgICAgICAgbXNnID0gInBhcmVudCB7IXJ9IG5vdCBpbiBzeXMubW9kdWxlcyIKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IobXNnLmZvcm1hdChwYXJlbnRuYW1lKSwgbmFtZT1wYXJlbnRfbmFtZSkKICAgICAgICByZXR1cm4gbW9kdWxlLl9fbG9hZGVyX18ubG9hZF9tb2R1bGUobmFtZSkKICAgIGZpbmFsbHk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBkZWwgX1JFTE9BRElOR1tuYW1lXQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcGFzcwo=',
'/Lib/_abcoll.py':'IyBDb3B5cmlnaHQgMjAwNyBHb29nbGUsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KIyBMaWNlbnNlZCB0byBQU0YgdW5kZXIgYSBDb250cmlidXRvciBBZ3JlZW1lbnQuCgoiIiJBYnN0cmFjdCBCYXNlIENsYXNzZXMgKEFCQ3MpIGZvciBjb2xsZWN0aW9ucywgYWNjb3JkaW5nIHRvIFBFUCAzMTE5LgoKRE9OJ1QgVVNFIFRISVMgTU9EVUxFIERJUkVDVExZISAgVGhlIGNsYXNzZXMgaGVyZSBzaG91bGQgYmUgaW1wb3J0ZWQKdmlhIGNvbGxlY3Rpb25zOyB0aGV5IGFyZSBkZWZpbmVkIGhlcmUgb25seSB0byBhbGxldmlhdGUgY2VydGFpbgpib290c3RyYXBwaW5nIGlzc3Vlcy4gIFVuaXQgdGVzdHMgYXJlIGluIHRlc3RfY29sbGVjdGlvbnMuCiIiIgoKI2Zyb20gYWJjIGltcG9ydCBBQkNNZXRhLCBhYnN0cmFjdG1ldGhvZAppbXBvcnQgc3lzCgpfX2FsbF9fID0gWyJIYXNoYWJsZSIsICJJdGVyYWJsZSIsICJJdGVyYXRvciIsCiAgICAgICAgICAgIlNpemVkIiwgIkNvbnRhaW5lciIsICJDYWxsYWJsZSIsCiAgICAgICAgICAgIlNldCIsICJNdXRhYmxlU2V0IiwKICAgICAgICAgICAiTWFwcGluZyIsICJNdXRhYmxlTWFwcGluZyIsCiAgICAgICAgICAgIk1hcHBpbmdWaWV3IiwgIktleXNWaWV3IiwgIkl0ZW1zVmlldyIsICJWYWx1ZXNWaWV3IiwKICAgICAgICAgICAiU2VxdWVuY2UiLCAiTXV0YWJsZVNlcXVlbmNlIiwKICAgICAgICAgICAiQnl0ZVN0cmluZyIsCiAgICAgICAgICAgXQoKIiIiCiMjIyBjb2xsZWN0aW9uIHJlbGF0ZWQgdHlwZXMgd2hpY2ggYXJlIG5vdCBleHBvc2VkIHRocm91Z2ggYnVpbHRpbiAjIyMKIyMgaXRlcmF0b3JzICMjCiNmaXhtZSBicnl0aG9uCiNieXRlc19pdGVyYXRvciA9IHR5cGUoaXRlcihiJycpKQpieXRlc19pdGVyYXRvciA9IHR5cGUoaXRlcignJykpCiNmaXhtZSBicnl0aG9uCiNieXRlYXJyYXlfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoYnl0ZWFycmF5KCkpKQojY2FsbGFibGVfaXRlcmF0b3IgPSA/Pz8KZGljdF9rZXlpdGVyYXRvciA9IHR5cGUoaXRlcih7fS5rZXlzKCkpKQpkaWN0X3ZhbHVlaXRlcmF0b3IgPSB0eXBlKGl0ZXIoe30udmFsdWVzKCkpKQpkaWN0X2l0ZW1pdGVyYXRvciA9IHR5cGUoaXRlcih7fS5pdGVtcygpKSkKbGlzdF9pdGVyYXRvciA9IHR5cGUoaXRlcihbXSkpCmxpc3RfcmV2ZXJzZWl0ZXJhdG9yID0gdHlwZShpdGVyKHJldmVyc2VkKFtdKSkpCnJhbmdlX2l0ZXJhdG9yID0gdHlwZShpdGVyKHJhbmdlKDApKSkKc2V0X2l0ZXJhdG9yID0gdHlwZShpdGVyKHNldCgpKSkKc3RyX2l0ZXJhdG9yID0gdHlwZShpdGVyKCIiKSkKdHVwbGVfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoKCkpKQp6aXBfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoemlwKCkpKQojIyB2aWV3cyAjIwpkaWN0X2tleXMgPSB0eXBlKHt9LmtleXMoKSkKZGljdF92YWx1ZXMgPSB0eXBlKHt9LnZhbHVlcygpKQpkaWN0X2l0ZW1zID0gdHlwZSh7fS5pdGVtcygpKQojIyBtaXNjICMjCmRpY3RfcHJveHkgPSB0eXBlKHR5cGUuX19kaWN0X18pCiIiIgoKZGVmIGFic3RyYWN0bWV0aG9kKHNlbGYpOgogICAgcmV0dXJuIHNlbGYKCiMjIyBPTkUtVFJJQ0sgUE9OSUVTICMjIwoKCiNjbGFzcyBJdGVyYWJsZShtZXRhY2xhc3M9QUJDTWV0YSk6CmNsYXNzIEl0ZXJhYmxlOgoKICAgIEBhYnN0cmFjdG1ldGhvZAogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHdoaWxlIEZhbHNlOgogICAgICAgICAgICB5aWVsZCBOb25lCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX19zdWJjbGFzc2hvb2tfXyhjbHMsIEMpOgogICAgICAgIGlmIGNscyBpcyBJdGVyYWJsZToKICAgICAgICAgICAgaWYgYW55KCJfX2l0ZXJfXyIgaW4gQi5fX2RpY3RfXyBmb3IgQiBpbiBDLl9fbXJvX18pOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCgojY2xhc3MgU2l6ZWQobWV0YWNsYXNzPUFCQ01ldGEpOgpjbGFzcyBTaXplZDoKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiAwCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX19zdWJjbGFzc2hvb2tfXyhjbHMsIEMpOgogICAgICAgIGlmIGNscyBpcyBTaXplZDoKICAgICAgICAgICAgaWYgYW55KCJfX2xlbl9fIiBpbiBCLl9fZGljdF9fIGZvciBCIGluIEMuX19tcm9fXyk6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKCiNjbGFzcyBDb250YWluZXIobWV0YWNsYXNzPUFCQ01ldGEpOgpjbGFzcyBDb250YWluZXI6CgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIHgpOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIF9fc3ViY2xhc3Nob29rX18oY2xzLCBDKToKICAgICAgICBpZiBjbHMgaXMgQ29udGFpbmVyOgogICAgICAgICAgICBpZiBhbnkoIl9fY29udGFpbnNfXyIgaW4gQi5fX2RpY3RfXyBmb3IgQiBpbiBDLl9fbXJvX18pOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiMjIyBNQVBQSU5HUyAjIyMKCgpjbGFzcyBNYXBwaW5nKFNpemVkLCBJdGVyYWJsZSwgQ29udGFpbmVyKToKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIHJhaXNlIEtleUVycm9yCgogICAgZGVmIGdldChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZltrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICByZXR1cm4gZGVmYXVsdAoKICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwga2V5KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGZba2V5XQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYga2V5cyhzZWxmKToKICAgICAgICByZXR1cm4gS2V5c1ZpZXcoc2VsZikKCiAgICBkZWYgaXRlbXMoc2VsZik6CiAgICAgICAgcmV0dXJuIEl0ZW1zVmlldyhzZWxmKQoKICAgIGRlZiB2YWx1ZXMoc2VsZik6CiAgICAgICAgcmV0dXJuIFZhbHVlc1ZpZXcoc2VsZikKCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgTWFwcGluZyk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJldHVybiBkaWN0KHNlbGYuaXRlbXMoKSkgPT0gZGljdChvdGhlci5pdGVtcygpKQoKICAgIGRlZiBfX25lX18oc2VsZiwgb3RoZXIpOgogICAgICAgIHJldHVybiBub3QgKHNlbGYgPT0gb3RoZXIpCgoKY2xhc3MgTXV0YWJsZU1hcHBpbmcoTWFwcGluZyk6CgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWx1ZSk6CiAgICAgICAgcmFpc2UgS2V5RXJyb3IKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIHJhaXNlIEtleUVycm9yCgogICAgX19tYXJrZXIgPSBvYmplY3QoKQoKICAgIGRlZiBwb3Aoc2VsZiwga2V5LCBkZWZhdWx0PV9fbWFya2VyKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHZhbHVlID0gc2VsZltrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBpZiBkZWZhdWx0IGlzIHNlbGYuX19tYXJrZXI6CiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlbCBzZWxmW2tleV0KICAgICAgICAgICAgcmV0dXJuIHZhbHVlCgogICAgZGVmIHBvcGl0ZW0oc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBrZXkgPSBuZXh0KGl0ZXIoc2VsZikpCiAgICAgICAgZXhjZXB0IFN0b3BJdGVyYXRpb246CiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yCiAgICAgICAgdmFsdWUgPSBzZWxmW2tleV0KICAgICAgICBkZWwgc2VsZltrZXldCiAgICAgICAgcmV0dXJuIGtleSwgdmFsdWUKCiAgICBkZWYgY2xlYXIoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgc2VsZi5wb3BpdGVtKCkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHBhc3MKCiAgICBkZWYgdXBkYXRlKCphcmdzLCAqKmt3ZHMpOgogICAgICAgIGlmIGxlbihhcmdzKSA+IDI6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidXBkYXRlKCkgdGFrZXMgYXQgbW9zdCAyIHBvc2l0aW9uYWwgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyZ3VtZW50cyAoe30gZ2l2ZW4pIi5mb3JtYXQobGVuKGFyZ3MpKSkKICAgICAgICBlbGlmIG5vdCBhcmdzOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInVwZGF0ZSgpIHRha2VzIGF0IGxlYXN0IDEgYXJndW1lbnQgKDAgZ2l2ZW4pIikKICAgICAgICBzZWxmID0gYXJnc1swXQogICAgICAgIG90aGVyID0gYXJnc1sxXSBpZiBsZW4oYXJncykgPj0gMiBlbHNlICgpCgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIE1hcHBpbmcpOgogICAgICAgICAgICBmb3Iga2V5IGluIG90aGVyOgogICAgICAgICAgICAgICAgc2VsZltrZXldID0gb3RoZXJba2V5XQogICAgICAgIGVsaWYgaGFzYXR0cihvdGhlciwgImtleXMiKToKICAgICAgICAgICAgZm9yIGtleSBpbiBvdGhlci5rZXlzKCk6CiAgICAgICAgICAgICAgICBzZWxmW2tleV0gPSBvdGhlcltrZXldCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gb3RoZXI6CiAgICAgICAgICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGt3ZHMuaXRlbXMoKToKICAgICAgICAgICAgc2VsZltrZXldID0gdmFsdWUKCiAgICBkZWYgc2V0ZGVmYXVsdChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZltrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBzZWxmW2tleV0gPSBkZWZhdWx0CiAgICAgICAgcmV0dXJuIGRlZmF1bHQKCiNNdXRhYmxlTWFwcGluZy5yZWdpc3RlcihkaWN0KQo=',
'/Lib/copy.py':'IiIiR2VuZXJpYyAoc2hhbGxvdyBhbmQgZGVlcCkgY29weWluZyBvcGVyYXRpb25zLgoKSW50ZXJmYWNlIHN1bW1hcnk6CgogICAgICAgIGltcG9ydCBjb3B5CgogICAgICAgIHggPSBjb3B5LmNvcHkoeSkgICAgICAgICMgbWFrZSBhIHNoYWxsb3cgY29weSBvZiB5CiAgICAgICAgeCA9IGNvcHkuZGVlcGNvcHkoeSkgICAgIyBtYWtlIGEgZGVlcCBjb3B5IG9mIHkKCkZvciBtb2R1bGUgc3BlY2lmaWMgZXJyb3JzLCBjb3B5LkVycm9yIGlzIHJhaXNlZC4KClRoZSBkaWZmZXJlbmNlIGJldHdlZW4gc2hhbGxvdyBhbmQgZGVlcCBjb3B5aW5nIGlzIG9ubHkgcmVsZXZhbnQgZm9yCmNvbXBvdW5kIG9iamVjdHMgKG9iamVjdHMgdGhhdCBjb250YWluIG90aGVyIG9iamVjdHMsIGxpa2UgbGlzdHMgb3IKY2xhc3MgaW5zdGFuY2VzKS4KCi0gQSBzaGFsbG93IGNvcHkgY29uc3RydWN0cyBhIG5ldyBjb21wb3VuZCBvYmplY3QgYW5kIHRoZW4gKHRvIHRoZQogIGV4dGVudCBwb3NzaWJsZSkgaW5zZXJ0cyAqdGhlIHNhbWUgb2JqZWN0cyogaW50byBpdCB0aGF0IHRoZQogIG9yaWdpbmFsIGNvbnRhaW5zLgoKLSBBIGRlZXAgY29weSBjb25zdHJ1Y3RzIGEgbmV3IGNvbXBvdW5kIG9iamVjdCBhbmQgdGhlbiwgcmVjdXJzaXZlbHksCiAgaW5zZXJ0cyAqY29waWVzKiBpbnRvIGl0IG9mIHRoZSBvYmplY3RzIGZvdW5kIGluIHRoZSBvcmlnaW5hbC4KClR3byBwcm9ibGVtcyBvZnRlbiBleGlzdCB3aXRoIGRlZXAgY29weSBvcGVyYXRpb25zIHRoYXQgZG9uJ3QgZXhpc3QKd2l0aCBzaGFsbG93IGNvcHkgb3BlcmF0aW9uczoKCiBhKSByZWN1cnNpdmUgb2JqZWN0cyAoY29tcG91bmQgb2JqZWN0cyB0aGF0LCBkaXJlY3RseSBvciBpbmRpcmVjdGx5LAogICAgY29udGFpbiBhIHJlZmVyZW5jZSB0byB0aGVtc2VsdmVzKSBtYXkgY2F1c2UgYSByZWN1cnNpdmUgbG9vcAoKIGIpIGJlY2F1c2UgZGVlcCBjb3B5IGNvcGllcyAqZXZlcnl0aGluZyogaXQgbWF5IGNvcHkgdG9vIG11Y2gsIGUuZy4KICAgIGFkbWluaXN0cmF0aXZlIGRhdGEgc3RydWN0dXJlcyB0aGF0IHNob3VsZCBiZSBzaGFyZWQgZXZlbiBiZXR3ZWVuCiAgICBjb3BpZXMKClB5dGhvbidzIGRlZXAgY29weSBvcGVyYXRpb24gYXZvaWRzIHRoZXNlIHByb2JsZW1zIGJ5OgoKIGEpIGtlZXBpbmcgYSB0YWJsZSBvZiBvYmplY3RzIGFscmVhZHkgY29waWVkIGR1cmluZyB0aGUgY3VycmVudAogICAgY29weWluZyBwYXNzCgogYikgbGV0dGluZyB1c2VyLWRlZmluZWQgY2xhc3NlcyBvdmVycmlkZSB0aGUgY29weWluZyBvcGVyYXRpb24gb3IgdGhlCiAgICBzZXQgb2YgY29tcG9uZW50cyBjb3BpZWQKClRoaXMgdmVyc2lvbiBkb2VzIG5vdCBjb3B5IHR5cGVzIGxpa2UgbW9kdWxlLCBjbGFzcywgZnVuY3Rpb24sIG1ldGhvZCwKbm9yIHN0YWNrIHRyYWNlLCBzdGFjayBmcmFtZSwgbm9yIGZpbGUsIHNvY2tldCwgd2luZG93LCBub3IgYXJyYXksIG5vcgphbnkgc2ltaWxhciB0eXBlcy4KCkNsYXNzZXMgY2FuIHVzZSB0aGUgc2FtZSBpbnRlcmZhY2VzIHRvIGNvbnRyb2wgY29weWluZyB0aGF0IHRoZXkgdXNlCnRvIGNvbnRyb2wgcGlja2xpbmc6IHRoZXkgY2FuIGRlZmluZSBtZXRob2RzIGNhbGxlZCBfX2dldGluaXRhcmdzX18oKSwKX19nZXRzdGF0ZV9fKCkgYW5kIF9fc2V0c3RhdGVfXygpLiAgU2VlIHRoZSBkb2N1bWVudGF0aW9uIGZvciBtb2R1bGUKInBpY2tsZSIgZm9yIGluZm9ybWF0aW9uIG9uIHRoZXNlIG1ldGhvZHMuCiIiIgoKaW1wb3J0IHR5cGVzCmltcG9ydCB3ZWFrcmVmCiMgQkUsIGNvcHlyZWcgaXMgZm9yIEMgY2xhc3NlcywgZXRjLCBzbyBtYXliZSBub3QgbmVlZCBpdCBmb3IgYnJ5dGhvbgojZnJvbSBjb3B5cmVnIGltcG9ydCBkaXNwYXRjaF90YWJsZQpkaXNwYXRjaF90YWJsZT17fQppbXBvcnQgYnVpbHRpbnMKCmNsYXNzIEVycm9yKEV4Y2VwdGlvbik6CiAgICBwYXNzCmVycm9yID0gRXJyb3IgICAjIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkKCiN0cnk6CiMgICAgZnJvbSBvcmcucHl0aG9uLmNvcmUgaW1wb3J0IFB5U3RyaW5nTWFwCiNleGNlcHQgSW1wb3J0RXJyb3I6CiMgICAgUHlTdHJpbmdNYXAgPSBOb25lClB5U3RyaW5nTWFwID0gTm9uZQoKX19hbGxfXyA9IFsiRXJyb3IiLCAiY29weSIsICJkZWVwY29weSJdCgpkZWYgY29weSh4KToKICAgICIiIlNoYWxsb3cgY29weSBvcGVyYXRpb24gb24gYXJiaXRyYXJ5IFB5dGhvbiBvYmplY3RzLgoKICAgIFNlZSB0aGUgbW9kdWxlJ3MgX19kb2NfXyBzdHJpbmcgZm9yIG1vcmUgaW5mby4KICAgICIiIgoKICAgIGNscyA9IHR5cGUoeCkKCiAgICBjb3BpZXIgPSBfY29weV9kaXNwYXRjaC5nZXQoY2xzKQogICAgaWYgY29waWVyOgogICAgICAgIHJldHVybiBjb3BpZXIoeCkKCiAgICBjb3BpZXIgPSBnZXRhdHRyKGNscywgIl9fY29weV9fIiwgTm9uZSkKICAgIGlmIGNvcGllcjoKICAgICAgICByZXR1cm4gY29waWVyKHgpCgogICAgcmVkdWN0b3IgPSBkaXNwYXRjaF90YWJsZS5nZXQoY2xzKQogICAgaWYgcmVkdWN0b3I6CiAgICAgICAgcnYgPSByZWR1Y3Rvcih4KQogICAgZWxzZToKICAgICAgICByZWR1Y3RvciA9IGdldGF0dHIoeCwgIl9fcmVkdWNlX2V4X18iLCBOb25lKQogICAgICAgIGlmIHJlZHVjdG9yOgogICAgICAgICAgICBydiA9IHJlZHVjdG9yKDIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVkdWN0b3IgPSBnZXRhdHRyKHgsICJfX3JlZHVjZV9fIiwgTm9uZSkKICAgICAgICAgICAgaWYgcmVkdWN0b3I6CiAgICAgICAgICAgICAgICBydiA9IHJlZHVjdG9yKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlIEVycm9yKCJ1bihzaGFsbG93KWNvcHlhYmxlIG9iamVjdCBvZiB0eXBlICVzIiAlIGNscykKCiAgICByZXR1cm4gX3JlY29uc3RydWN0KHgsIHJ2LCAwKQoKCl9jb3B5X2Rpc3BhdGNoID0gZCA9IHt9CgpkZWYgX2NvcHlfaW1tdXRhYmxlKHgpOgogICAgcmV0dXJuIHgKZm9yIHQgaW4gKHR5cGUoTm9uZSksIGludCwgZmxvYXQsIGJvb2wsIHN0ciwgdHVwbGUsCiAgICAgICAgICBmcm96ZW5zZXQsIHR5cGUsIHJhbmdlLAogICAgICAgICAgdHlwZXMuQnVpbHRpbkZ1bmN0aW9uVHlwZSwgdHlwZShFbGxpcHNpcyksCiAgICAgICAgICB0eXBlcy5GdW5jdGlvblR5cGUsIHdlYWtyZWYucmVmKToKICAgIGRbdF0gPSBfY29weV9pbW11dGFibGUKdCA9IGdldGF0dHIodHlwZXMsICJDb2RlVHlwZSIsIE5vbmUpCmlmIHQgaXMgbm90IE5vbmU6CiAgICBkW3RdID0gX2NvcHlfaW1tdXRhYmxlCmZvciBuYW1lIGluICgiY29tcGxleCIsICJ1bmljb2RlIik6CiAgICB0ID0gZ2V0YXR0cihidWlsdGlucywgbmFtZSwgTm9uZSkKICAgIGlmIHQgaXMgbm90IE5vbmU6CiAgICAgICAgZFt0XSA9IF9jb3B5X2ltbXV0YWJsZQoKZGVmIF9jb3B5X3dpdGhfY29uc3RydWN0b3IoeCk6CiAgICByZXR1cm4gdHlwZSh4KSh4KQpmb3IgdCBpbiAobGlzdCwgZGljdCwgc2V0KToKICAgIGRbdF0gPSBfY29weV93aXRoX2NvbnN0cnVjdG9yCgpkZWYgX2NvcHlfd2l0aF9jb3B5X21ldGhvZCh4KToKICAgIHJldHVybiB4LmNvcHkoKQppZiBQeVN0cmluZ01hcCBpcyBub3QgTm9uZToKICAgIGRbUHlTdHJpbmdNYXBdID0gX2NvcHlfd2l0aF9jb3B5X21ldGhvZAoKZGVsIGQKCmRlZiBkZWVwY29weSh4LCBtZW1vPU5vbmUsIF9uaWw9W10pOgogICAgIiIiRGVlcCBjb3B5IG9wZXJhdGlvbiBvbiBhcmJpdHJhcnkgUHl0aG9uIG9iamVjdHMuCgogICAgU2VlIHRoZSBtb2R1bGUncyBfX2RvY19fIHN0cmluZyBmb3IgbW9yZSBpbmZvLgogICAgIiIiCgogICAgaWYgbWVtbyBpcyBOb25lOgogICAgICAgIG1lbW8gPSB7fQoKICAgIGQgPSBpZCh4KQogICAgeSA9IG1lbW8uZ2V0KGQsIF9uaWwpCiAgICBpZiB5IGlzIG5vdCBfbmlsOgogICAgICAgIHJldHVybiB5CgogICAgY2xzID0gdHlwZSh4KQoKICAgIGNvcGllciA9IF9kZWVwY29weV9kaXNwYXRjaC5nZXQoY2xzKQogICAgaWYgY29waWVyOgogICAgICAgIHkgPSBjb3BpZXIoeCwgbWVtbykKICAgIGVsc2U6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpc3NjID0gaXNzdWJjbGFzcyhjbHMsIHR5cGUpCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjogIyBjbHMgaXMgbm90IGEgY2xhc3MgKG9sZCBCb29zdDsgc2VlIFNGICM1MDIwODUpCiAgICAgICAgICAgIGlzc2MgPSAwCiAgICAgICAgaWYgaXNzYzoKICAgICAgICAgICAgeSA9IF9kZWVwY29weV9hdG9taWMoeCwgbWVtbykKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb3BpZXIgPSBnZXRhdHRyKHgsICJfX2RlZXBjb3B5X18iLCBOb25lKQogICAgICAgICAgICBpZiBjb3BpZXI6CiAgICAgICAgICAgICAgICB5ID0gY29waWVyKG1lbW8pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZWR1Y3RvciA9IGRpc3BhdGNoX3RhYmxlLmdldChjbHMpCiAgICAgICAgICAgICAgICBpZiByZWR1Y3RvcjoKICAgICAgICAgICAgICAgICAgICBydiA9IHJlZHVjdG9yKHgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJlZHVjdG9yID0gZ2V0YXR0cih4LCAiX19yZWR1Y2VfZXhfXyIsIE5vbmUpCiAgICAgICAgICAgICAgICAgICAgaWYgcmVkdWN0b3I6CiAgICAgICAgICAgICAgICAgICAgICAgIHJ2ID0gcmVkdWN0b3IoMikKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICByZWR1Y3RvciA9IGdldGF0dHIoeCwgIl9fcmVkdWNlX18iLCBOb25lKQogICAgICAgICAgICAgICAgICAgICAgICBpZiByZWR1Y3RvcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ2ID0gcmVkdWN0b3IoKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInVuKGRlZXApY29weWFibGUgb2JqZWN0IG9mIHR5cGUgJXMiICUgY2xzKQogICAgICAgICAgICAgICAgeSA9IF9yZWNvbnN0cnVjdCh4LCBydiwgMSwgbWVtbykKCiAgICAjIElmIGlzIGl0cyBvd24gY29weSwgZG9uJ3QgbWVtb2l6ZS4KICAgIGlmIHkgaXMgbm90IHg6CiAgICAgICAgbWVtb1tkXSA9IHkKICAgICAgICBfa2VlcF9hbGl2ZSh4LCBtZW1vKSAjIE1ha2Ugc3VyZSB4IGxpdmVzIGF0IGxlYXN0IGFzIGxvbmcgYXMgZAogICAgcmV0dXJuIHkKCl9kZWVwY29weV9kaXNwYXRjaCA9IGQgPSB7fQoKZGVmIF9kZWVwY29weV9hdG9taWMoeCwgbWVtbyk6CiAgICByZXR1cm4geApkW3R5cGUoTm9uZSldID0gX2RlZXBjb3B5X2F0b21pYwpkW3R5cGUoRWxsaXBzaXMpXSA9IF9kZWVwY29weV9hdG9taWMKZFtpbnRdID0gX2RlZXBjb3B5X2F0b21pYwpkW2Zsb2F0XSA9IF9kZWVwY29weV9hdG9taWMKZFtib29sXSA9IF9kZWVwY29weV9hdG9taWMKdHJ5OgogICAgZFtjb21wbGV4XSA9IF9kZWVwY29weV9hdG9taWMKZXhjZXB0IE5hbWVFcnJvcjoKICAgIHBhc3MKZFtieXRlc10gPSBfZGVlcGNvcHlfYXRvbWljCmRbc3RyXSA9IF9kZWVwY29weV9hdG9taWMKdHJ5OgogICAgZFt0eXBlcy5Db2RlVHlwZV0gPSBfZGVlcGNvcHlfYXRvbWljCmV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgIHBhc3MKZFt0eXBlXSA9IF9kZWVwY29weV9hdG9taWMKZFtyYW5nZV0gPSBfZGVlcGNvcHlfYXRvbWljCmRbdHlwZXMuQnVpbHRpbkZ1bmN0aW9uVHlwZV0gPSBfZGVlcGNvcHlfYXRvbWljCmRbdHlwZXMuRnVuY3Rpb25UeXBlXSA9IF9kZWVwY29weV9hdG9taWMKZFt3ZWFrcmVmLnJlZl0gPSBfZGVlcGNvcHlfYXRvbWljCgpkZWYgX2RlZXBjb3B5X2xpc3QoeCwgbWVtbyk6CiAgICB5ID0gW10KICAgIG1lbW9baWQoeCldID0geQogICAgZm9yIGEgaW4geDoKICAgICAgICB5LmFwcGVuZChkZWVwY29weShhLCBtZW1vKSkKICAgIHJldHVybiB5CmRbbGlzdF0gPSBfZGVlcGNvcHlfbGlzdAoKZGVmIF9kZWVwY29weV90dXBsZSh4LCBtZW1vKToKICAgIHkgPSBbXQogICAgZm9yIGEgaW4geDoKICAgICAgICB5LmFwcGVuZChkZWVwY29weShhLCBtZW1vKSkKICAgICMgV2UncmUgbm90IGdvaW5nIHRvIHB1dCB0aGUgdHVwbGUgaW4gdGhlIG1lbW8sIGJ1dCBpdCdzIHN0aWxsIGltcG9ydGFudCB3ZQogICAgIyBjaGVjayBmb3IgaXQsIGluIGNhc2UgdGhlIHR1cGxlIGNvbnRhaW5zIHJlY3Vyc2l2ZSBtdXRhYmxlIHN0cnVjdHVyZXMuCiAgICB0cnk6CiAgICAgICAgcmV0dXJuIG1lbW9baWQoeCldCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgcGFzcwogICAgZm9yIGkgaW4gcmFuZ2UobGVuKHgpKToKICAgICAgICBpZiB4W2ldIGlzIG5vdCB5W2ldOgogICAgICAgICAgICB5ID0gdHVwbGUoeSkKICAgICAgICAgICAgYnJlYWsKICAgIGVsc2U6CiAgICAgICAgeSA9IHgKICAgIHJldHVybiB5CmRbdHVwbGVdID0gX2RlZXBjb3B5X3R1cGxlCgpkZWYgX2RlZXBjb3B5X2RpY3QoeCwgbWVtbyk6CiAgICB5ID0ge30KICAgIG1lbW9baWQoeCldID0geQogICAgZm9yIGtleSwgdmFsdWUgaW4geC5pdGVtcygpOgogICAgICAgIHlbZGVlcGNvcHkoa2V5LCBtZW1vKV0gPSBkZWVwY29weSh2YWx1ZSwgbWVtbykKICAgIHJldHVybiB5CmRbZGljdF0gPSBfZGVlcGNvcHlfZGljdAppZiBQeVN0cmluZ01hcCBpcyBub3QgTm9uZToKICAgIGRbUHlTdHJpbmdNYXBdID0gX2RlZXBjb3B5X2RpY3QKCmRlZiBfZGVlcGNvcHlfbWV0aG9kKHgsIG1lbW8pOiAjIENvcHkgaW5zdGFuY2UgbWV0aG9kcwogICAgcmV0dXJuIHR5cGUoeCkoeC5fX2Z1bmNfXywgZGVlcGNvcHkoeC5fX3NlbGZfXywgbWVtbykpCl9kZWVwY29weV9kaXNwYXRjaFt0eXBlcy5NZXRob2RUeXBlXSA9IF9kZWVwY29weV9tZXRob2QKCmRlZiBfa2VlcF9hbGl2ZSh4LCBtZW1vKToKICAgICIiIktlZXBzIGEgcmVmZXJlbmNlIHRvIHRoZSBvYmplY3QgeCBpbiB0aGUgbWVtby4KCiAgICBCZWNhdXNlIHdlIHJlbWVtYmVyIG9iamVjdHMgYnkgdGhlaXIgaWQsIHdlIGhhdmUKICAgIHRvIGFzc3VyZSB0aGF0IHBvc3NpYmx5IHRlbXBvcmFyeSBvYmplY3RzIGFyZSBrZXB0CiAgICBhbGl2ZSBieSByZWZlcmVuY2luZyB0aGVtLgogICAgV2Ugc3RvcmUgYSByZWZlcmVuY2UgYXQgdGhlIGlkIG9mIHRoZSBtZW1vLCB3aGljaCBzaG91bGQKICAgIG5vcm1hbGx5IG5vdCBiZSB1c2VkIHVubGVzcyBzb21lb25lIHRyaWVzIHRvIGRlZXBjb3B5CiAgICB0aGUgbWVtbyBpdHNlbGYuLi4KICAgICIiIgogICAgdHJ5OgogICAgICAgIG1lbW9baWQobWVtbyldLmFwcGVuZCh4KQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICMgYWhhLCB0aGlzIGlzIHRoZSBmaXJzdCBvbmUgOi0pCiAgICAgICAgbWVtb1tpZChtZW1vKV09W3hdCgpkZWYgX3JlY29uc3RydWN0KHgsIGluZm8sIGRlZXAsIG1lbW89Tm9uZSk6CiAgICBpZiBpc2luc3RhbmNlKGluZm8sIHN0cik6CiAgICAgICAgcmV0dXJuIHgKICAgIGFzc2VydCBpc2luc3RhbmNlKGluZm8sIHR1cGxlKQogICAgaWYgbWVtbyBpcyBOb25lOgogICAgICAgIG1lbW8gPSB7fQogICAgbiA9IGxlbihpbmZvKQogICAgYXNzZXJ0IG4gaW4gKDIsIDMsIDQsIDUpCiAgICBjYWxsYWJsZSwgYXJncyA9IGluZm9bOjJdCiAgICBpZiBuID4gMjoKICAgICAgICBzdGF0ZSA9IGluZm9bMl0KICAgIGVsc2U6CiAgICAgICAgc3RhdGUgPSB7fQogICAgaWYgbiA+IDM6CiAgICAgICAgbGlzdGl0ZXIgPSBpbmZvWzNdCiAgICBlbHNlOgogICAgICAgIGxpc3RpdGVyID0gTm9uZQogICAgaWYgbiA+IDQ6CiAgICAgICAgZGljdGl0ZXIgPSBpbmZvWzRdCiAgICBlbHNlOgogICAgICAgIGRpY3RpdGVyID0gTm9uZQogICAgaWYgZGVlcDoKICAgICAgICBhcmdzID0gZGVlcGNvcHkoYXJncywgbWVtbykKICAgIHkgPSBjYWxsYWJsZSgqYXJncykKICAgIG1lbW9baWQoeCldID0geQoKICAgIGlmIHN0YXRlOgogICAgICAgIGlmIGRlZXA6CiAgICAgICAgICAgIHN0YXRlID0gZGVlcGNvcHkoc3RhdGUsIG1lbW8pCiAgICAgICAgaWYgaGFzYXR0cih5LCAnX19zZXRzdGF0ZV9fJyk6CiAgICAgICAgICAgIHkuX19zZXRzdGF0ZV9fKHN0YXRlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uoc3RhdGUsIHR1cGxlKSBhbmQgbGVuKHN0YXRlKSA9PSAyOgogICAgICAgICAgICAgICAgc3RhdGUsIHNsb3RzdGF0ZSA9IHN0YXRlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzbG90c3RhdGUgPSBOb25lCiAgICAgICAgICAgIGlmIHN0YXRlIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgeS5fX2RpY3RfXy51cGRhdGUoc3RhdGUpCiAgICAgICAgICAgIGlmIHNsb3RzdGF0ZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIHNsb3RzdGF0ZS5pdGVtcygpOgogICAgICAgICAgICAgICAgICAgIHNldGF0dHIoeSwga2V5LCB2YWx1ZSkKCiAgICBpZiBsaXN0aXRlciBpcyBub3QgTm9uZToKICAgICAgICBmb3IgaXRlbSBpbiBsaXN0aXRlcjoKICAgICAgICAgICAgaWYgZGVlcDoKICAgICAgICAgICAgICAgIGl0ZW0gPSBkZWVwY29weShpdGVtLCBtZW1vKQogICAgICAgICAgICB5LmFwcGVuZChpdGVtKQogICAgaWYgZGljdGl0ZXIgaXMgbm90IE5vbmU6CiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZGljdGl0ZXI6CiAgICAgICAgICAgIGlmIGRlZXA6CiAgICAgICAgICAgICAgICBrZXkgPSBkZWVwY29weShrZXksIG1lbW8pCiAgICAgICAgICAgICAgICB2YWx1ZSA9IGRlZXBjb3B5KHZhbHVlLCBtZW1vKQogICAgICAgICAgICB5W2tleV0gPSB2YWx1ZQogICAgcmV0dXJuIHkKCmRlbCBkCgpkZWwgdHlwZXMKCiMgSGVscGVyIGZvciBpbnN0YW5jZSBjcmVhdGlvbiB3aXRob3V0IGNhbGxpbmcgX19pbml0X18KY2xhc3MgX0VtcHR5Q2xhc3M6CiAgICBwYXNzCg==',
'/Lib/queue.py':'JycnQSBtdWx0aS1wcm9kdWNlciwgbXVsdGktY29uc3VtZXIgcXVldWUuJycnDQoNCnRyeToNCiAgICBpbXBvcnQgdGhyZWFkaW5nDQpleGNlcHQgSW1wb3J0RXJyb3I6DQogICAgaW1wb3J0IGR1bW15X3RocmVhZGluZyBhcyB0aHJlYWRpbmcNCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlDQpmcm9tIGhlYXBxIGltcG9ydCBoZWFwcHVzaCwgaGVhcHBvcA0KdHJ5Og0KICAgIGZyb20gdGltZSBpbXBvcnQgbW9ub3RvbmljIGFzIHRpbWUNCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgICBmcm9tIHRpbWUgaW1wb3J0IHRpbWUNCg0KX19hbGxfXyA9IFsnRW1wdHknLCAnRnVsbCcsICdRdWV1ZScsICdQcmlvcml0eVF1ZXVlJywgJ0xpZm9RdWV1ZSddDQoNCmNsYXNzIEVtcHR5KEV4Y2VwdGlvbik6DQogICAgJ0V4Y2VwdGlvbiByYWlzZWQgYnkgUXVldWUuZ2V0KGJsb2NrPTApL2dldF9ub3dhaXQoKS4nDQogICAgcGFzcw0KDQpjbGFzcyBGdWxsKEV4Y2VwdGlvbik6DQogICAgJ0V4Y2VwdGlvbiByYWlzZWQgYnkgUXVldWUucHV0KGJsb2NrPTApL3B1dF9ub3dhaXQoKS4nDQogICAgcGFzcw0KDQpjbGFzcyBRdWV1ZToNCiAgICAnJydDcmVhdGUgYSBxdWV1ZSBvYmplY3Qgd2l0aCBhIGdpdmVuIG1heGltdW0gc2l6ZS4NCg0KICAgIElmIG1heHNpemUgaXMgPD0gMCwgdGhlIHF1ZXVlIHNpemUgaXMgaW5maW5pdGUuDQogICAgJycnDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgbWF4c2l6ZT0wKToNCiAgICAgICAgc2VsZi5tYXhzaXplID0gbWF4c2l6ZQ0KICAgICAgICBzZWxmLl9pbml0KG1heHNpemUpDQoNCiAgICAgICAgIyBtdXRleCBtdXN0IGJlIGhlbGQgd2hlbmV2ZXIgdGhlIHF1ZXVlIGlzIG11dGF0aW5nLiAgQWxsIG1ldGhvZHMNCiAgICAgICAgIyB0aGF0IGFjcXVpcmUgbXV0ZXggbXVzdCByZWxlYXNlIGl0IGJlZm9yZSByZXR1cm5pbmcuICBtdXRleA0KICAgICAgICAjIGlzIHNoYXJlZCBiZXR3ZWVuIHRoZSB0aHJlZSBjb25kaXRpb25zLCBzbyBhY3F1aXJpbmcgYW5kDQogICAgICAgICMgcmVsZWFzaW5nIHRoZSBjb25kaXRpb25zIGFsc28gYWNxdWlyZXMgYW5kIHJlbGVhc2VzIG11dGV4Lg0KICAgICAgICBzZWxmLm11dGV4ID0gdGhyZWFkaW5nLkxvY2soKQ0KDQogICAgICAgICMgTm90aWZ5IG5vdF9lbXB0eSB3aGVuZXZlciBhbiBpdGVtIGlzIGFkZGVkIHRvIHRoZSBxdWV1ZTsgYQ0KICAgICAgICAjIHRocmVhZCB3YWl0aW5nIHRvIGdldCBpcyBub3RpZmllZCB0aGVuLg0KICAgICAgICBzZWxmLm5vdF9lbXB0eSA9IHRocmVhZGluZy5Db25kaXRpb24oc2VsZi5tdXRleCkNCg0KICAgICAgICAjIE5vdGlmeSBub3RfZnVsbCB3aGVuZXZlciBhbiBpdGVtIGlzIHJlbW92ZWQgZnJvbSB0aGUgcXVldWU7DQogICAgICAgICMgYSB0aHJlYWQgd2FpdGluZyB0byBwdXQgaXMgbm90aWZpZWQgdGhlbi4NCiAgICAgICAgc2VsZi5ub3RfZnVsbCA9IHRocmVhZGluZy5Db25kaXRpb24oc2VsZi5tdXRleCkNCg0KICAgICAgICAjIE5vdGlmeSBhbGxfdGFza3NfZG9uZSB3aGVuZXZlciB0aGUgbnVtYmVyIG9mIHVuZmluaXNoZWQgdGFza3MNCiAgICAgICAgIyBkcm9wcyB0byB6ZXJvOyB0aHJlYWQgd2FpdGluZyB0byBqb2luKCkgaXMgbm90aWZpZWQgdG8gcmVzdW1lDQogICAgICAgIHNlbGYuYWxsX3Rhc2tzX2RvbmUgPSB0aHJlYWRpbmcuQ29uZGl0aW9uKHNlbGYubXV0ZXgpDQogICAgICAgIHNlbGYudW5maW5pc2hlZF90YXNrcyA9IDANCg0KICAgIGRlZiB0YXNrX2RvbmUoc2VsZik6DQogICAgICAgICcnJ0luZGljYXRlIHRoYXQgYSBmb3JtZXJseSBlbnF1ZXVlZCB0YXNrIGlzIGNvbXBsZXRlLg0KDQogICAgICAgIFVzZWQgYnkgUXVldWUgY29uc3VtZXIgdGhyZWFkcy4gIEZvciBlYWNoIGdldCgpIHVzZWQgdG8gZmV0Y2ggYSB0YXNrLA0KICAgICAgICBhIHN1YnNlcXVlbnQgY2FsbCB0byB0YXNrX2RvbmUoKSB0ZWxscyB0aGUgcXVldWUgdGhhdCB0aGUgcHJvY2Vzc2luZw0KICAgICAgICBvbiB0aGUgdGFzayBpcyBjb21wbGV0ZS4NCg0KICAgICAgICBJZiBhIGpvaW4oKSBpcyBjdXJyZW50bHkgYmxvY2tpbmcsIGl0IHdpbGwgcmVzdW1lIHdoZW4gYWxsIGl0ZW1zDQogICAgICAgIGhhdmUgYmVlbiBwcm9jZXNzZWQgKG1lYW5pbmcgdGhhdCBhIHRhc2tfZG9uZSgpIGNhbGwgd2FzIHJlY2VpdmVkDQogICAgICAgIGZvciBldmVyeSBpdGVtIHRoYXQgaGFkIGJlZW4gcHV0KCkgaW50byB0aGUgcXVldWUpLg0KDQogICAgICAgIFJhaXNlcyBhIFZhbHVlRXJyb3IgaWYgY2FsbGVkIG1vcmUgdGltZXMgdGhhbiB0aGVyZSB3ZXJlIGl0ZW1zDQogICAgICAgIHBsYWNlZCBpbiB0aGUgcXVldWUuDQogICAgICAgICcnJw0KICAgICAgICB3aXRoIHNlbGYuYWxsX3Rhc2tzX2RvbmU6DQogICAgICAgICAgICB1bmZpbmlzaGVkID0gc2VsZi51bmZpbmlzaGVkX3Rhc2tzIC0gMQ0KICAgICAgICAgICAgaWYgdW5maW5pc2hlZCA8PSAwOg0KICAgICAgICAgICAgICAgIGlmIHVuZmluaXNoZWQgPCAwOg0KICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCd0YXNrX2RvbmUoKSBjYWxsZWQgdG9vIG1hbnkgdGltZXMnKQ0KICAgICAgICAgICAgICAgIHNlbGYuYWxsX3Rhc2tzX2RvbmUubm90aWZ5X2FsbCgpDQogICAgICAgICAgICBzZWxmLnVuZmluaXNoZWRfdGFza3MgPSB1bmZpbmlzaGVkDQoNCiAgICBkZWYgam9pbihzZWxmKToNCiAgICAgICAgJycnQmxvY2tzIHVudGlsIGFsbCBpdGVtcyBpbiB0aGUgUXVldWUgaGF2ZSBiZWVuIGdvdHRlbiBhbmQgcHJvY2Vzc2VkLg0KDQogICAgICAgIFRoZSBjb3VudCBvZiB1bmZpbmlzaGVkIHRhc2tzIGdvZXMgdXAgd2hlbmV2ZXIgYW4gaXRlbSBpcyBhZGRlZCB0byB0aGUNCiAgICAgICAgcXVldWUuIFRoZSBjb3VudCBnb2VzIGRvd24gd2hlbmV2ZXIgYSBjb25zdW1lciB0aHJlYWQgY2FsbHMgdGFza19kb25lKCkNCiAgICAgICAgdG8gaW5kaWNhdGUgdGhlIGl0ZW0gd2FzIHJldHJpZXZlZCBhbmQgYWxsIHdvcmsgb24gaXQgaXMgY29tcGxldGUuDQoNCiAgICAgICAgV2hlbiB0aGUgY291bnQgb2YgdW5maW5pc2hlZCB0YXNrcyBkcm9wcyB0byB6ZXJvLCBqb2luKCkgdW5ibG9ja3MuDQogICAgICAgICcnJw0KICAgICAgICB3aXRoIHNlbGYuYWxsX3Rhc2tzX2RvbmU6DQogICAgICAgICAgICB3aGlsZSBzZWxmLnVuZmluaXNoZWRfdGFza3M6DQogICAgICAgICAgICAgICAgc2VsZi5hbGxfdGFza3NfZG9uZS53YWl0KCkNCg0KICAgIGRlZiBxc2l6ZShzZWxmKToNCiAgICAgICAgJycnUmV0dXJuIHRoZSBhcHByb3hpbWF0ZSBzaXplIG9mIHRoZSBxdWV1ZSAobm90IHJlbGlhYmxlISkuJycnDQogICAgICAgIHdpdGggc2VsZi5tdXRleDoNCiAgICAgICAgICAgIHJldHVybiBzZWxmLl9xc2l6ZSgpDQoNCiAgICBkZWYgZW1wdHkoc2VsZik6DQogICAgICAgICcnJ1JldHVybiBUcnVlIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eSwgRmFsc2Ugb3RoZXJ3aXNlIChub3QgcmVsaWFibGUhKS4NCg0KICAgICAgICBUaGlzIG1ldGhvZCBpcyBsaWtlbHkgdG8gYmUgcmVtb3ZlZCBhdCBzb21lIHBvaW50LiAgVXNlIHFzaXplKCkgPT0gMA0KICAgICAgICBhcyBhIGRpcmVjdCBzdWJzdGl0dXRlLCBidXQgYmUgYXdhcmUgdGhhdCBlaXRoZXIgYXBwcm9hY2ggcmlza3MgYSByYWNlDQogICAgICAgIGNvbmRpdGlvbiB3aGVyZSBhIHF1ZXVlIGNhbiBncm93IGJlZm9yZSB0aGUgcmVzdWx0IG9mIGVtcHR5KCkgb3INCiAgICAgICAgcXNpemUoKSBjYW4gYmUgdXNlZC4NCg0KICAgICAgICBUbyBjcmVhdGUgY29kZSB0aGF0IG5lZWRzIHRvIHdhaXQgZm9yIGFsbCBxdWV1ZWQgdGFza3MgdG8gYmUNCiAgICAgICAgY29tcGxldGVkLCB0aGUgcHJlZmVycmVkIHRlY2huaXF1ZSBpcyB0byB1c2UgdGhlIGpvaW4oKSBtZXRob2QuDQogICAgICAgICcnJw0KICAgICAgICB3aXRoIHNlbGYubXV0ZXg6DQogICAgICAgICAgICByZXR1cm4gbm90IHNlbGYuX3FzaXplKCkNCg0KICAgIGRlZiBmdWxsKHNlbGYpOg0KICAgICAgICAnJydSZXR1cm4gVHJ1ZSBpZiB0aGUgcXVldWUgaXMgZnVsbCwgRmFsc2Ugb3RoZXJ3aXNlIChub3QgcmVsaWFibGUhKS4NCg0KICAgICAgICBUaGlzIG1ldGhvZCBpcyBsaWtlbHkgdG8gYmUgcmVtb3ZlZCBhdCBzb21lIHBvaW50LiAgVXNlIHFzaXplKCkgPj0gbg0KICAgICAgICBhcyBhIGRpcmVjdCBzdWJzdGl0dXRlLCBidXQgYmUgYXdhcmUgdGhhdCBlaXRoZXIgYXBwcm9hY2ggcmlza3MgYSByYWNlDQogICAgICAgIGNvbmRpdGlvbiB3aGVyZSBhIHF1ZXVlIGNhbiBzaHJpbmsgYmVmb3JlIHRoZSByZXN1bHQgb2YgZnVsbCgpIG9yDQogICAgICAgIHFzaXplKCkgY2FuIGJlIHVzZWQuDQogICAgICAgICcnJw0KICAgICAgICB3aXRoIHNlbGYubXV0ZXg6DQogICAgICAgICAgICByZXR1cm4gMCA8IHNlbGYubWF4c2l6ZSA8PSBzZWxmLl9xc2l6ZSgpDQoNCiAgICBkZWYgcHV0KHNlbGYsIGl0ZW0sIGJsb2NrPVRydWUsIHRpbWVvdXQ9Tm9uZSk6DQogICAgICAgICcnJ1B1dCBhbiBpdGVtIGludG8gdGhlIHF1ZXVlLg0KDQogICAgICAgIElmIG9wdGlvbmFsIGFyZ3MgJ2Jsb2NrJyBpcyB0cnVlIGFuZCAndGltZW91dCcgaXMgTm9uZSAodGhlIGRlZmF1bHQpLA0KICAgICAgICBibG9jayBpZiBuZWNlc3NhcnkgdW50aWwgYSBmcmVlIHNsb3QgaXMgYXZhaWxhYmxlLiBJZiAndGltZW91dCcgaXMNCiAgICAgICAgYSBwb3NpdGl2ZSBudW1iZXIsIGl0IGJsb2NrcyBhdCBtb3N0ICd0aW1lb3V0JyBzZWNvbmRzIGFuZCByYWlzZXMNCiAgICAgICAgdGhlIEZ1bGwgZXhjZXB0aW9uIGlmIG5vIGZyZWUgc2xvdCB3YXMgYXZhaWxhYmxlIHdpdGhpbiB0aGF0IHRpbWUuDQogICAgICAgIE90aGVyd2lzZSAoJ2Jsb2NrJyBpcyBmYWxzZSksIHB1dCBhbiBpdGVtIG9uIHRoZSBxdWV1ZSBpZiBhIGZyZWUgc2xvdA0KICAgICAgICBpcyBpbW1lZGlhdGVseSBhdmFpbGFibGUsIGVsc2UgcmFpc2UgdGhlIEZ1bGwgZXhjZXB0aW9uICgndGltZW91dCcNCiAgICAgICAgaXMgaWdub3JlZCBpbiB0aGF0IGNhc2UpLg0KICAgICAgICAnJycNCiAgICAgICAgd2l0aCBzZWxmLm5vdF9mdWxsOg0KICAgICAgICAgICAgaWYgc2VsZi5tYXhzaXplID4gMDoNCiAgICAgICAgICAgICAgICBpZiBub3QgYmxvY2s6DQogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX3FzaXplKCkgPj0gc2VsZi5tYXhzaXplOg0KICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRnVsbA0KICAgICAgICAgICAgICAgIGVsaWYgdGltZW91dCBpcyBOb25lOg0KICAgICAgICAgICAgICAgICAgICB3aGlsZSBzZWxmLl9xc2l6ZSgpID49IHNlbGYubWF4c2l6ZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubm90X2Z1bGwud2FpdCgpDQogICAgICAgICAgICAgICAgZWxpZiB0aW1lb3V0IDwgMDoNCiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiJ3RpbWVvdXQnIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIiKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGVuZHRpbWUgPSB0aW1lKCkgKyB0aW1lb3V0DQogICAgICAgICAgICAgICAgICAgIHdoaWxlIHNlbGYuX3FzaXplKCkgPj0gc2VsZi5tYXhzaXplOg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nID0gZW5kdGltZSAtIHRpbWUoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVtYWluaW5nIDw9IDAuMDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBGdWxsDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5vdF9mdWxsLndhaXQocmVtYWluaW5nKQ0KICAgICAgICAgICAgc2VsZi5fcHV0KGl0ZW0pDQogICAgICAgICAgICBzZWxmLnVuZmluaXNoZWRfdGFza3MgKz0gMQ0KICAgICAgICAgICAgc2VsZi5ub3RfZW1wdHkubm90aWZ5KCkNCg0KICAgIGRlZiBnZXQoc2VsZiwgYmxvY2s9VHJ1ZSwgdGltZW91dD1Ob25lKToNCiAgICAgICAgJycnUmVtb3ZlIGFuZCByZXR1cm4gYW4gaXRlbSBmcm9tIHRoZSBxdWV1ZS4NCg0KICAgICAgICBJZiBvcHRpb25hbCBhcmdzICdibG9jaycgaXMgdHJ1ZSBhbmQgJ3RpbWVvdXQnIGlzIE5vbmUgKHRoZSBkZWZhdWx0KSwNCiAgICAgICAgYmxvY2sgaWYgbmVjZXNzYXJ5IHVudGlsIGFuIGl0ZW0gaXMgYXZhaWxhYmxlLiBJZiAndGltZW91dCcgaXMNCiAgICAgICAgYSBwb3NpdGl2ZSBudW1iZXIsIGl0IGJsb2NrcyBhdCBtb3N0ICd0aW1lb3V0JyBzZWNvbmRzIGFuZCByYWlzZXMNCiAgICAgICAgdGhlIEVtcHR5IGV4Y2VwdGlvbiBpZiBubyBpdGVtIHdhcyBhdmFpbGFibGUgd2l0aGluIHRoYXQgdGltZS4NCiAgICAgICAgT3RoZXJ3aXNlICgnYmxvY2snIGlzIGZhbHNlKSwgcmV0dXJuIGFuIGl0ZW0gaWYgb25lIGlzIGltbWVkaWF0ZWx5DQogICAgICAgIGF2YWlsYWJsZSwgZWxzZSByYWlzZSB0aGUgRW1wdHkgZXhjZXB0aW9uICgndGltZW91dCcgaXMgaWdub3JlZA0KICAgICAgICBpbiB0aGF0IGNhc2UpLg0KICAgICAgICAnJycNCiAgICAgICAgd2l0aCBzZWxmLm5vdF9lbXB0eToNCiAgICAgICAgICAgIGlmIG5vdCBibG9jazoNCiAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5fcXNpemUoKToNCiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRW1wdHkNCiAgICAgICAgICAgIGVsaWYgdGltZW91dCBpcyBOb25lOg0KICAgICAgICAgICAgICAgIHdoaWxlIG5vdCBzZWxmLl9xc2l6ZSgpOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLm5vdF9lbXB0eS53YWl0KCkNCiAgICAgICAgICAgIGVsaWYgdGltZW91dCA8IDA6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiJ3RpbWVvdXQnIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIiKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBlbmR0aW1lID0gdGltZSgpICsgdGltZW91dA0KICAgICAgICAgICAgICAgIHdoaWxlIG5vdCBzZWxmLl9xc2l6ZSgpOg0KICAgICAgICAgICAgICAgICAgICByZW1haW5pbmcgPSBlbmR0aW1lIC0gdGltZSgpDQogICAgICAgICAgICAgICAgICAgIGlmIHJlbWFpbmluZyA8PSAwLjA6DQogICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBFbXB0eQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLm5vdF9lbXB0eS53YWl0KHJlbWFpbmluZykNCiAgICAgICAgICAgIGl0ZW0gPSBzZWxmLl9nZXQoKQ0KICAgICAgICAgICAgc2VsZi5ub3RfZnVsbC5ub3RpZnkoKQ0KICAgICAgICAgICAgcmV0dXJuIGl0ZW0NCg0KICAgIGRlZiBwdXRfbm93YWl0KHNlbGYsIGl0ZW0pOg0KICAgICAgICAnJydQdXQgYW4gaXRlbSBpbnRvIHRoZSBxdWV1ZSB3aXRob3V0IGJsb2NraW5nLg0KDQogICAgICAgIE9ubHkgZW5xdWV1ZSB0aGUgaXRlbSBpZiBhIGZyZWUgc2xvdCBpcyBpbW1lZGlhdGVseSBhdmFpbGFibGUuDQogICAgICAgIE90aGVyd2lzZSByYWlzZSB0aGUgRnVsbCBleGNlcHRpb24uDQogICAgICAgICcnJw0KICAgICAgICByZXR1cm4gc2VsZi5wdXQoaXRlbSwgYmxvY2s9RmFsc2UpDQoNCiAgICBkZWYgZ2V0X25vd2FpdChzZWxmKToNCiAgICAgICAgJycnUmVtb3ZlIGFuZCByZXR1cm4gYW4gaXRlbSBmcm9tIHRoZSBxdWV1ZSB3aXRob3V0IGJsb2NraW5nLg0KDQogICAgICAgIE9ubHkgZ2V0IGFuIGl0ZW0gaWYgb25lIGlzIGltbWVkaWF0ZWx5IGF2YWlsYWJsZS4gT3RoZXJ3aXNlDQogICAgICAgIHJhaXNlIHRoZSBFbXB0eSBleGNlcHRpb24uDQogICAgICAgICcnJw0KICAgICAgICByZXR1cm4gc2VsZi5nZXQoYmxvY2s9RmFsc2UpDQoNCiAgICAjIE92ZXJyaWRlIHRoZXNlIG1ldGhvZHMgdG8gaW1wbGVtZW50IG90aGVyIHF1ZXVlIG9yZ2FuaXphdGlvbnMNCiAgICAjIChlLmcuIHN0YWNrIG9yIHByaW9yaXR5IHF1ZXVlKS4NCiAgICAjIFRoZXNlIHdpbGwgb25seSBiZSBjYWxsZWQgd2l0aCBhcHByb3ByaWF0ZSBsb2NrcyBoZWxkDQoNCiAgICAjIEluaXRpYWxpemUgdGhlIHF1ZXVlIHJlcHJlc2VudGF0aW9uDQogICAgZGVmIF9pbml0KHNlbGYsIG1heHNpemUpOg0KICAgICAgICBzZWxmLnF1ZXVlID0gZGVxdWUoKQ0KDQogICAgZGVmIF9xc2l6ZShzZWxmKToNCiAgICAgICAgcmV0dXJuIGxlbihzZWxmLnF1ZXVlKQ0KDQogICAgIyBQdXQgYSBuZXcgaXRlbSBpbiB0aGUgcXVldWUNCiAgICBkZWYgX3B1dChzZWxmLCBpdGVtKToNCiAgICAgICAgc2VsZi5xdWV1ZS5hcHBlbmQoaXRlbSkNCg0KICAgICMgR2V0IGFuIGl0ZW0gZnJvbSB0aGUgcXVldWUNCiAgICBkZWYgX2dldChzZWxmKToNCiAgICAgICAgcmV0dXJuIHNlbGYucXVldWUucG9wbGVmdCgpDQoNCg0KY2xhc3MgUHJpb3JpdHlRdWV1ZShRdWV1ZSk6DQogICAgJycnVmFyaWFudCBvZiBRdWV1ZSB0aGF0IHJldHJpZXZlcyBvcGVuIGVudHJpZXMgaW4gcHJpb3JpdHkgb3JkZXIgKGxvd2VzdCBmaXJzdCkuDQoNCiAgICBFbnRyaWVzIGFyZSB0eXBpY2FsbHkgdHVwbGVzIG9mIHRoZSBmb3JtOiAgKHByaW9yaXR5IG51bWJlciwgZGF0YSkuDQogICAgJycnDQoNCiAgICBkZWYgX2luaXQoc2VsZiwgbWF4c2l6ZSk6DQogICAgICAgIHNlbGYucXVldWUgPSBbXQ0KDQogICAgZGVmIF9xc2l6ZShzZWxmKToNCiAgICAgICAgcmV0dXJuIGxlbihzZWxmLnF1ZXVlKQ0KDQogICAgZGVmIF9wdXQoc2VsZiwgaXRlbSk6DQogICAgICAgIGhlYXBwdXNoKHNlbGYucXVldWUsIGl0ZW0pDQoNCiAgICBkZWYgX2dldChzZWxmKToNCiAgICAgICAgcmV0dXJuIGhlYXBwb3Aoc2VsZi5xdWV1ZSkNCg0KDQpjbGFzcyBMaWZvUXVldWUoUXVldWUpOg0KICAgICcnJ1ZhcmlhbnQgb2YgUXVldWUgdGhhdCByZXRyaWV2ZXMgbW9zdCByZWNlbnRseSBhZGRlZCBlbnRyaWVzIGZpcnN0LicnJw0KDQogICAgZGVmIF9pbml0KHNlbGYsIG1heHNpemUpOg0KICAgICAgICBzZWxmLnF1ZXVlID0gW10NCg0KICAgIGRlZiBfcXNpemUoc2VsZik6DQogICAgICAgIHJldHVybiBsZW4oc2VsZi5xdWV1ZSkNCg0KICAgIGRlZiBfcHV0KHNlbGYsIGl0ZW0pOg0KICAgICAgICBzZWxmLnF1ZXVlLmFwcGVuZChpdGVtKQ0KDQogICAgZGVmIF9nZXQoc2VsZik6DQogICAgICAgIHJldHVybiBzZWxmLnF1ZXVlLnBvcCgpDQo=',
'/Lib/keyword.py':'a3dsaXN0ID0gWwojLS1zdGFydCBrZXl3b3Jkcy0tCiAgICAgICAgJ0ZhbHNlJywKICAgICAgICAnTm9uZScsCiAgICAgICAgJ1RydWUnLAogICAgICAgICdhbmQnLAogICAgICAgICdhcycsCiAgICAgICAgJ2Fzc2VydCcsCiAgICAgICAgJ2JyZWFrJywKICAgICAgICAnY2xhc3MnLAogICAgICAgICdjb250aW51ZScsCiAgICAgICAgJ2RlZicsCiAgICAgICAgJ2RlbCcsCiAgICAgICAgJ2VsaWYnLAogICAgICAgICdlbHNlJywKICAgICAgICAnZXhjZXB0JywKICAgICAgICAnZmluYWxseScsCiAgICAgICAgJ2ZvcicsCiAgICAgICAgJ2Zyb20nLAogICAgICAgICdnbG9iYWwnLAogICAgICAgICdpZicsCiAgICAgICAgJ2ltcG9ydCcsCiAgICAgICAgJ2luJywKICAgICAgICAnaXMnLAogICAgICAgICdsYW1iZGEnLAogICAgICAgICdub25sb2NhbCcsCiAgICAgICAgJ25vdCcsCiAgICAgICAgJ29yJywKICAgICAgICAncGFzcycsCiAgICAgICAgJ3JhaXNlJywKICAgICAgICAncmV0dXJuJywKICAgICAgICAndHJ5JywKICAgICAgICAnd2hpbGUnLAogICAgICAgICd3aXRoJywKICAgICAgICAneWllbGQnLAojLS1lbmQga2V5d29yZHMtLQogICAgICAgIF0KCmRlZiBpc2tleXdvcmQod29yZCk6CiAgICByZXR1cm4gd29yZCBpbiBrd2xpc3QK',
'/Lib/subprocess.py':'IiIic3VicHJvY2VzcyAtIFN1YnByb2Nlc3NlcyB3aXRoIGFjY2Vzc2libGUgSS9PIHN0cmVhbXMKClRoaXMgbW9kdWxlIGFsbG93cyB5b3UgdG8gc3Bhd24gcHJvY2Vzc2VzLCBjb25uZWN0IHRvIHRoZWlyCmlucHV0L291dHB1dC9lcnJvciBwaXBlcywgYW5kIG9idGFpbiB0aGVpciByZXR1cm4gY29kZXMuICBUaGlzIG1vZHVsZQppbnRlbmRzIHRvIHJlcGxhY2Ugc2V2ZXJhbCBvdGhlciwgb2xkZXIgbW9kdWxlcyBhbmQgZnVuY3Rpb25zLCBsaWtlOgoKb3Muc3lzdGVtCm9zLnNwYXduKgpvcy5wb3BlbioKcG9wZW4yLioKY29tbWFuZHMuKgoKSW5mb3JtYXRpb24gYWJvdXQgaG93IHRoZSBzdWJwcm9jZXNzIG1vZHVsZSBjYW4gYmUgdXNlZCB0byByZXBsYWNlIHRoZXNlCm1vZHVsZXMgYW5kIGZ1bmN0aW9ucyBjYW4gYmUgZm91bmQgYmVsb3cuCgoKClVzaW5nIHRoZSBzdWJwcm9jZXNzIG1vZHVsZQo9PT09PT09PT09PT09PT09PT09PT09PT09PT0KVGhpcyBtb2R1bGUgZGVmaW5lcyBvbmUgY2xhc3MgY2FsbGVkIFBvcGVuOgoKY2xhc3MgUG9wZW4oYXJncywgYnVmc2l6ZT0wLCBleGVjdXRhYmxlPU5vbmUsCiAgICAgICAgICAgIHN0ZGluPU5vbmUsIHN0ZG91dD1Ob25lLCBzdGRlcnI9Tm9uZSwKICAgICAgICAgICAgcHJlZXhlY19mbj1Ob25lLCBjbG9zZV9mZHM9RmFsc2UsIHNoZWxsPUZhbHNlLAogICAgICAgICAgICBjd2Q9Tm9uZSwgZW52PU5vbmUsIHVuaXZlcnNhbF9uZXdsaW5lcz1GYWxzZSwKICAgICAgICAgICAgc3RhcnR1cGluZm89Tm9uZSwgY3JlYXRpb25mbGFncz0wKToKCgpBcmd1bWVudHMgYXJlOgoKYXJncyBzaG91bGQgYmUgYSBzdHJpbmcsIG9yIGEgc2VxdWVuY2Ugb2YgcHJvZ3JhbSBhcmd1bWVudHMuICBUaGUKcHJvZ3JhbSB0byBleGVjdXRlIGlzIG5vcm1hbGx5IHRoZSBmaXJzdCBpdGVtIGluIHRoZSBhcmdzIHNlcXVlbmNlIG9yCnN0cmluZywgYnV0IGNhbiBiZSBleHBsaWNpdGx5IHNldCBieSB1c2luZyB0aGUgZXhlY3V0YWJsZSBhcmd1bWVudC4KCk9uIFVOSVgsIHdpdGggc2hlbGw9RmFsc2UgKGRlZmF1bHQpOiBJbiB0aGlzIGNhc2UsIHRoZSBQb3BlbiBjbGFzcwp1c2VzIG9zLmV4ZWN2cCgpIHRvIGV4ZWN1dGUgdGhlIGNoaWxkIHByb2dyYW0uICBhcmdzIHNob3VsZCBub3JtYWxseQpiZSBhIHNlcXVlbmNlLiAgQSBzdHJpbmcgd2lsbCBiZSB0cmVhdGVkIGFzIGEgc2VxdWVuY2Ugd2l0aCB0aGUgc3RyaW5nCmFzIHRoZSBvbmx5IGl0ZW0gKHRoZSBwcm9ncmFtIHRvIGV4ZWN1dGUpLgoKT24gVU5JWCwgd2l0aCBzaGVsbD1UcnVlOiBJZiBhcmdzIGlzIGEgc3RyaW5nLCBpdCBzcGVjaWZpZXMgdGhlCmNvbW1hbmQgc3RyaW5nIHRvIGV4ZWN1dGUgdGhyb3VnaCB0aGUgc2hlbGwuICBJZiBhcmdzIGlzIGEgc2VxdWVuY2UsCnRoZSBmaXJzdCBpdGVtIHNwZWNpZmllcyB0aGUgY29tbWFuZCBzdHJpbmcsIGFuZCBhbnkgYWRkaXRpb25hbCBpdGVtcwp3aWxsIGJlIHRyZWF0ZWQgYXMgYWRkaXRpb25hbCBzaGVsbCBhcmd1bWVudHMuCgpPbiBXaW5kb3dzOiB0aGUgUG9wZW4gY2xhc3MgdXNlcyBDcmVhdGVQcm9jZXNzKCkgdG8gZXhlY3V0ZSB0aGUgY2hpbGQKcHJvZ3JhbSwgd2hpY2ggb3BlcmF0ZXMgb24gc3RyaW5ncy4gIElmIGFyZ3MgaXMgYSBzZXF1ZW5jZSwgaXQgd2lsbCBiZQpjb252ZXJ0ZWQgdG8gYSBzdHJpbmcgdXNpbmcgdGhlIGxpc3QyY21kbGluZSBtZXRob2QuICBQbGVhc2Ugbm90ZSB0aGF0Cm5vdCBhbGwgTVMgV2luZG93cyBhcHBsaWNhdGlvbnMgaW50ZXJwcmV0IHRoZSBjb21tYW5kIGxpbmUgdGhlIHNhbWUKd2F5OiBUaGUgbGlzdDJjbWRsaW5lIGlzIGRlc2lnbmVkIGZvciBhcHBsaWNhdGlvbnMgdXNpbmcgdGhlIHNhbWUKcnVsZXMgYXMgdGhlIE1TIEMgcnVudGltZS4KCmJ1ZnNpemUsIGlmIGdpdmVuLCBoYXMgdGhlIHNhbWUgbWVhbmluZyBhcyB0aGUgY29ycmVzcG9uZGluZyBhcmd1bWVudAp0byB0aGUgYnVpbHQtaW4gb3BlbigpIGZ1bmN0aW9uOiAwIG1lYW5zIHVuYnVmZmVyZWQsIDEgbWVhbnMgbGluZQpidWZmZXJlZCwgYW55IG90aGVyIHBvc2l0aXZlIHZhbHVlIG1lYW5zIHVzZSBhIGJ1ZmZlciBvZgooYXBwcm94aW1hdGVseSkgdGhhdCBzaXplLiAgQSBuZWdhdGl2ZSBidWZzaXplIG1lYW5zIHRvIHVzZSB0aGUgc3lzdGVtCmRlZmF1bHQsIHdoaWNoIHVzdWFsbHkgbWVhbnMgZnVsbHkgYnVmZmVyZWQuICBUaGUgZGVmYXVsdCB2YWx1ZSBmb3IKYnVmc2l6ZSBpcyAwICh1bmJ1ZmZlcmVkKS4KCnN0ZGluLCBzdGRvdXQgYW5kIHN0ZGVyciBzcGVjaWZ5IHRoZSBleGVjdXRlZCBwcm9ncmFtcycgc3RhbmRhcmQKaW5wdXQsIHN0YW5kYXJkIG91dHB1dCBhbmQgc3RhbmRhcmQgZXJyb3IgZmlsZSBoYW5kbGVzLCByZXNwZWN0aXZlbHkuClZhbGlkIHZhbHVlcyBhcmUgUElQRSwgYW4gZXhpc3RpbmcgZmlsZSBkZXNjcmlwdG9yIChhIHBvc2l0aXZlCmludGVnZXIpLCBhbiBleGlzdGluZyBmaWxlIG9iamVjdCwgYW5kIE5vbmUuICBQSVBFIGluZGljYXRlcyB0aGF0IGEKbmV3IHBpcGUgdG8gdGhlIGNoaWxkIHNob3VsZCBiZSBjcmVhdGVkLiAgV2l0aCBOb25lLCBubyByZWRpcmVjdGlvbgp3aWxsIG9jY3VyOyB0aGUgY2hpbGQncyBmaWxlIGhhbmRsZXMgd2lsbCBiZSBpbmhlcml0ZWQgZnJvbSB0aGUKcGFyZW50LiAgQWRkaXRpb25hbGx5LCBzdGRlcnIgY2FuIGJlIFNURE9VVCwgd2hpY2ggaW5kaWNhdGVzIHRoYXQgdGhlCnN0ZGVyciBkYXRhIGZyb20gdGhlIGFwcGxpY2F0aW9ucyBzaG91bGQgYmUgY2FwdHVyZWQgaW50byB0aGUgc2FtZQpmaWxlIGhhbmRsZSBhcyBmb3Igc3Rkb3V0LgoKSWYgcHJlZXhlY19mbiBpcyBzZXQgdG8gYSBjYWxsYWJsZSBvYmplY3QsIHRoaXMgb2JqZWN0IHdpbGwgYmUgY2FsbGVkCmluIHRoZSBjaGlsZCBwcm9jZXNzIGp1c3QgYmVmb3JlIHRoZSBjaGlsZCBpcyBleGVjdXRlZC4KCklmIGNsb3NlX2ZkcyBpcyB0cnVlLCBhbGwgZmlsZSBkZXNjcmlwdG9ycyBleGNlcHQgMCwgMSBhbmQgMiB3aWxsIGJlCmNsb3NlZCBiZWZvcmUgdGhlIGNoaWxkIHByb2Nlc3MgaXMgZXhlY3V0ZWQuCgppZiBzaGVsbCBpcyB0cnVlLCB0aGUgc3BlY2lmaWVkIGNvbW1hbmQgd2lsbCBiZSBleGVjdXRlZCB0aHJvdWdoIHRoZQpzaGVsbC4KCklmIGN3ZCBpcyBub3QgTm9uZSwgdGhlIGN1cnJlbnQgZGlyZWN0b3J5IHdpbGwgYmUgY2hhbmdlZCB0byBjd2QKYmVmb3JlIHRoZSBjaGlsZCBpcyBleGVjdXRlZC4KCklmIGVudiBpcyBub3QgTm9uZSwgaXQgZGVmaW5lcyB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciB0aGUgbmV3CnByb2Nlc3MuCgpJZiB1bml2ZXJzYWxfbmV3bGluZXMgaXMgdHJ1ZSwgdGhlIGZpbGUgb2JqZWN0cyBzdGRvdXQgYW5kIHN0ZGVyciBhcmUKb3BlbmVkIGFzIGEgdGV4dCBmaWxlcywgYnV0IGxpbmVzIG1heSBiZSB0ZXJtaW5hdGVkIGJ5IGFueSBvZiAnXG4nLAp0aGUgVW5peCBlbmQtb2YtbGluZSBjb252ZW50aW9uLCAnXHInLCB0aGUgTWFjaW50b3NoIGNvbnZlbnRpb24gb3IKJ1xyXG4nLCB0aGUgV2luZG93cyBjb252ZW50aW9uLiAgQWxsIG9mIHRoZXNlIGV4dGVybmFsIHJlcHJlc2VudGF0aW9ucwphcmUgc2VlbiBhcyAnXG4nIGJ5IHRoZSBQeXRob24gcHJvZ3JhbS4gIE5vdGU6IFRoaXMgZmVhdHVyZSBpcyBvbmx5CmF2YWlsYWJsZSBpZiBQeXRob24gaXMgYnVpbHQgd2l0aCB1bml2ZXJzYWwgbmV3bGluZSBzdXBwb3J0ICh0aGUKZGVmYXVsdCkuICBBbHNvLCB0aGUgbmV3bGluZXMgYXR0cmlidXRlIG9mIHRoZSBmaWxlIG9iamVjdHMgc3Rkb3V0LApzdGRpbiBhbmQgc3RkZXJyIGFyZSBub3QgdXBkYXRlZCBieSB0aGUgY29tbXVuaWNhdGUoKSBtZXRob2QuCgpUaGUgc3RhcnR1cGluZm8gYW5kIGNyZWF0aW9uZmxhZ3MsIGlmIGdpdmVuLCB3aWxsIGJlIHBhc3NlZCB0byB0aGUKdW5kZXJseWluZyBDcmVhdGVQcm9jZXNzKCkgZnVuY3Rpb24uICBUaGV5IGNhbiBzcGVjaWZ5IHRoaW5ncyBzdWNoIGFzCmFwcGVhcmFuY2Ugb2YgdGhlIG1haW4gd2luZG93IGFuZCBwcmlvcml0eSBmb3IgdGhlIG5ldyBwcm9jZXNzLgooV2luZG93cyBvbmx5KQoKClRoaXMgbW9kdWxlIGFsc28gZGVmaW5lcyBzb21lIHNob3J0Y3V0IGZ1bmN0aW9uczoKCmNhbGwoKnBvcGVuYXJncywgKiprd2FyZ3MpOgogICAgUnVuIGNvbW1hbmQgd2l0aCBhcmd1bWVudHMuICBXYWl0IGZvciBjb21tYW5kIHRvIGNvbXBsZXRlLCB0aGVuCiAgICByZXR1cm4gdGhlIHJldHVybmNvZGUgYXR0cmlidXRlLgoKICAgIFRoZSBhcmd1bWVudHMgYXJlIHRoZSBzYW1lIGFzIGZvciB0aGUgUG9wZW4gY29uc3RydWN0b3IuICBFeGFtcGxlOgoKICAgIHJldGNvZGUgPSBjYWxsKFsibHMiLCAiLWwiXSkKCmNoZWNrX2NhbGwoKnBvcGVuYXJncywgKiprd2FyZ3MpOgogICAgUnVuIGNvbW1hbmQgd2l0aCBhcmd1bWVudHMuICBXYWl0IGZvciBjb21tYW5kIHRvIGNvbXBsZXRlLiAgSWYgdGhlCiAgICBleGl0IGNvZGUgd2FzIHplcm8gdGhlbiByZXR1cm4sIG90aGVyd2lzZSByYWlzZQogICAgQ2FsbGVkUHJvY2Vzc0Vycm9yLiAgVGhlIENhbGxlZFByb2Nlc3NFcnJvciBvYmplY3Qgd2lsbCBoYXZlIHRoZQogICAgcmV0dXJuIGNvZGUgaW4gdGhlIHJldHVybmNvZGUgYXR0cmlidXRlLgoKICAgIFRoZSBhcmd1bWVudHMgYXJlIHRoZSBzYW1lIGFzIGZvciB0aGUgUG9wZW4gY29uc3RydWN0b3IuICBFeGFtcGxlOgoKICAgIGNoZWNrX2NhbGwoWyJscyIsICItbCJdKQoKY2hlY2tfb3V0cHV0KCpwb3BlbmFyZ3MsICoqa3dhcmdzKToKICAgIFJ1biBjb21tYW5kIHdpdGggYXJndW1lbnRzIGFuZCByZXR1cm4gaXRzIG91dHB1dCBhcyBhIGJ5dGUgc3RyaW5nLgoKICAgIElmIHRoZSBleGl0IGNvZGUgd2FzIG5vbi16ZXJvIGl0IHJhaXNlcyBhIENhbGxlZFByb2Nlc3NFcnJvci4gIFRoZQogICAgQ2FsbGVkUHJvY2Vzc0Vycm9yIG9iamVjdCB3aWxsIGhhdmUgdGhlIHJldHVybiBjb2RlIGluIHRoZSByZXR1cm5jb2RlCiAgICBhdHRyaWJ1dGUgYW5kIG91dHB1dCBpbiB0aGUgb3V0cHV0IGF0dHJpYnV0ZS4KCiAgICBUaGUgYXJndW1lbnRzIGFyZSB0aGUgc2FtZSBhcyBmb3IgdGhlIFBvcGVuIGNvbnN0cnVjdG9yLiAgRXhhbXBsZToKCiAgICBvdXRwdXQgPSBjaGVja19vdXRwdXQoWyJscyIsICItbCIsICIvZGV2L251bGwiXSkKCgpFeGNlcHRpb25zCi0tLS0tLS0tLS0KRXhjZXB0aW9ucyByYWlzZWQgaW4gdGhlIGNoaWxkIHByb2Nlc3MsIGJlZm9yZSB0aGUgbmV3IHByb2dyYW0gaGFzCnN0YXJ0ZWQgdG8gZXhlY3V0ZSwgd2lsbCBiZSByZS1yYWlzZWQgaW4gdGhlIHBhcmVudC4gIEFkZGl0aW9uYWxseSwKdGhlIGV4Y2VwdGlvbiBvYmplY3Qgd2lsbCBoYXZlIG9uZSBleHRyYSBhdHRyaWJ1dGUgY2FsbGVkCidjaGlsZF90cmFjZWJhY2snLCB3aGljaCBpcyBhIHN0cmluZyBjb250YWluaW5nIHRyYWNlYmFjayBpbmZvcm1hdGlvbgpmcm9tIHRoZSBjaGlsZHMgcG9pbnQgb2Ygdmlldy4KClRoZSBtb3N0IGNvbW1vbiBleGNlcHRpb24gcmFpc2VkIGlzIE9TRXJyb3IuICBUaGlzIG9jY3VycywgZm9yCmV4YW1wbGUsIHdoZW4gdHJ5aW5nIHRvIGV4ZWN1dGUgYSBub24tZXhpc3RlbnQgZmlsZS4gIEFwcGxpY2F0aW9ucwpzaG91bGQgcHJlcGFyZSBmb3IgT1NFcnJvcnMuCgpBIFZhbHVlRXJyb3Igd2lsbCBiZSByYWlzZWQgaWYgUG9wZW4gaXMgY2FsbGVkIHdpdGggaW52YWxpZCBhcmd1bWVudHMuCgpjaGVja19jYWxsKCkgYW5kIGNoZWNrX291dHB1dCgpIHdpbGwgcmFpc2UgQ2FsbGVkUHJvY2Vzc0Vycm9yLCBpZiB0aGUKY2FsbGVkIHByb2Nlc3MgcmV0dXJucyBhIG5vbi16ZXJvIHJldHVybiBjb2RlLgoKClNlY3VyaXR5Ci0tLS0tLS0tClVubGlrZSBzb21lIG90aGVyIHBvcGVuIGZ1bmN0aW9ucywgdGhpcyBpbXBsZW1lbnRhdGlvbiB3aWxsIG5ldmVyIGNhbGwKL2Jpbi9zaCBpbXBsaWNpdGx5LiAgVGhpcyBtZWFucyB0aGF0IGFsbCBjaGFyYWN0ZXJzLCBpbmNsdWRpbmcgc2hlbGwKbWV0YWNoYXJhY3RlcnMsIGNhbiBzYWZlbHkgYmUgcGFzc2VkIHRvIGNoaWxkIHByb2Nlc3Nlcy4KCgpQb3BlbiBvYmplY3RzCj09PT09PT09PT09PT0KSW5zdGFuY2VzIG9mIHRoZSBQb3BlbiBjbGFzcyBoYXZlIHRoZSBmb2xsb3dpbmcgbWV0aG9kczoKCnBvbGwoKQogICAgQ2hlY2sgaWYgY2hpbGQgcHJvY2VzcyBoYXMgdGVybWluYXRlZC4gIFJldHVybnMgcmV0dXJuY29kZQogICAgYXR0cmlidXRlLgoKd2FpdCgpCiAgICBXYWl0IGZvciBjaGlsZCBwcm9jZXNzIHRvIHRlcm1pbmF0ZS4gIFJldHVybnMgcmV0dXJuY29kZSBhdHRyaWJ1dGUuCgpjb21tdW5pY2F0ZShpbnB1dD1Ob25lKQogICAgSW50ZXJhY3Qgd2l0aCBwcm9jZXNzOiBTZW5kIGRhdGEgdG8gc3RkaW4uICBSZWFkIGRhdGEgZnJvbSBzdGRvdXQKICAgIGFuZCBzdGRlcnIsIHVudGlsIGVuZC1vZi1maWxlIGlzIHJlYWNoZWQuICBXYWl0IGZvciBwcm9jZXNzIHRvCiAgICB0ZXJtaW5hdGUuICBUaGUgb3B0aW9uYWwgaW5wdXQgYXJndW1lbnQgc2hvdWxkIGJlIGEgc3RyaW5nIHRvIGJlCiAgICBzZW50IHRvIHRoZSBjaGlsZCBwcm9jZXNzLCBvciBOb25lLCBpZiBubyBkYXRhIHNob3VsZCBiZSBzZW50IHRvCiAgICB0aGUgY2hpbGQuCgogICAgY29tbXVuaWNhdGUoKSByZXR1cm5zIGEgdHVwbGUgKHN0ZG91dCwgc3RkZXJyKS4KCiAgICBOb3RlOiBUaGUgZGF0YSByZWFkIGlzIGJ1ZmZlcmVkIGluIG1lbW9yeSwgc28gZG8gbm90IHVzZSB0aGlzCiAgICBtZXRob2QgaWYgdGhlIGRhdGEgc2l6ZSBpcyBsYXJnZSBvciB1bmxpbWl0ZWQuCgpUaGUgZm9sbG93aW5nIGF0dHJpYnV0ZXMgYXJlIGFsc28gYXZhaWxhYmxlOgoKc3RkaW4KICAgIElmIHRoZSBzdGRpbiBhcmd1bWVudCBpcyBQSVBFLCB0aGlzIGF0dHJpYnV0ZSBpcyBhIGZpbGUgb2JqZWN0CiAgICB0aGF0IHByb3ZpZGVzIGlucHV0IHRvIHRoZSBjaGlsZCBwcm9jZXNzLiAgT3RoZXJ3aXNlLCBpdCBpcyBOb25lLgoKc3Rkb3V0CiAgICBJZiB0aGUgc3Rkb3V0IGFyZ3VtZW50IGlzIFBJUEUsIHRoaXMgYXR0cmlidXRlIGlzIGEgZmlsZSBvYmplY3QKICAgIHRoYXQgcHJvdmlkZXMgb3V0cHV0IGZyb20gdGhlIGNoaWxkIHByb2Nlc3MuICBPdGhlcndpc2UsIGl0IGlzCiAgICBOb25lLgoKc3RkZXJyCiAgICBJZiB0aGUgc3RkZXJyIGFyZ3VtZW50IGlzIFBJUEUsIHRoaXMgYXR0cmlidXRlIGlzIGZpbGUgb2JqZWN0IHRoYXQKICAgIHByb3ZpZGVzIGVycm9yIG91dHB1dCBmcm9tIHRoZSBjaGlsZCBwcm9jZXNzLiAgT3RoZXJ3aXNlLCBpdCBpcwogICAgTm9uZS4KCnBpZAogICAgVGhlIHByb2Nlc3MgSUQgb2YgdGhlIGNoaWxkIHByb2Nlc3MuCgpyZXR1cm5jb2RlCiAgICBUaGUgY2hpbGQgcmV0dXJuIGNvZGUuICBBIE5vbmUgdmFsdWUgaW5kaWNhdGVzIHRoYXQgdGhlIHByb2Nlc3MKICAgIGhhc24ndCB0ZXJtaW5hdGVkIHlldC4gIEEgbmVnYXRpdmUgdmFsdWUgLU4gaW5kaWNhdGVzIHRoYXQgdGhlCiAgICBjaGlsZCB3YXMgdGVybWluYXRlZCBieSBzaWduYWwgTiAoVU5JWCBvbmx5KS4KCgpSZXBsYWNpbmcgb2xkZXIgZnVuY3Rpb25zIHdpdGggdGhlIHN1YnByb2Nlc3MgbW9kdWxlCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KSW4gdGhpcyBzZWN0aW9uLCAiYSA9PT4gYiIgbWVhbnMgdGhhdCBiIGNhbiBiZSB1c2VkIGFzIGEgcmVwbGFjZW1lbnQKZm9yIGEuCgpOb3RlOiBBbGwgZnVuY3Rpb25zIGluIHRoaXMgc2VjdGlvbiBmYWlsIChtb3JlIG9yIGxlc3MpIHNpbGVudGx5IGlmCnRoZSBleGVjdXRlZCBwcm9ncmFtIGNhbm5vdCBiZSBmb3VuZDsgdGhpcyBtb2R1bGUgcmFpc2VzIGFuIE9TRXJyb3IKZXhjZXB0aW9uLgoKSW4gdGhlIGZvbGxvd2luZyBleGFtcGxlcywgd2UgYXNzdW1lIHRoYXQgdGhlIHN1YnByb2Nlc3MgbW9kdWxlIGlzCmltcG9ydGVkIHdpdGggImZyb20gc3VicHJvY2VzcyBpbXBvcnQgKiIuCgoKUmVwbGFjaW5nIC9iaW4vc2ggc2hlbGwgYmFja3F1b3RlCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpvdXRwdXQ9YG15Y21kIG15YXJnYAo9PT4Kb3V0cHV0ID0gUG9wZW4oWyJteWNtZCIsICJteWFyZyJdLCBzdGRvdXQ9UElQRSkuY29tbXVuaWNhdGUoKVswXQoKClJlcGxhY2luZyBzaGVsbCBwaXBlIGxpbmUKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpvdXRwdXQ9YGRtZXNnIHwgZ3JlcCBoZGFgCj09PgpwMSA9IFBvcGVuKFsiZG1lc2ciXSwgc3Rkb3V0PVBJUEUpCnAyID0gUG9wZW4oWyJncmVwIiwgImhkYSJdLCBzdGRpbj1wMS5zdGRvdXQsIHN0ZG91dD1QSVBFKQpvdXRwdXQgPSBwMi5jb21tdW5pY2F0ZSgpWzBdCgoKUmVwbGFjaW5nIG9zLnN5c3RlbSgpCi0tLS0tLS0tLS0tLS0tLS0tLS0tLQpzdHMgPSBvcy5zeXN0ZW0oIm15Y21kIiArICIgbXlhcmciKQo9PT4KcCA9IFBvcGVuKCJteWNtZCIgKyAiIG15YXJnIiwgc2hlbGw9VHJ1ZSkKcGlkLCBzdHMgPSBvcy53YWl0cGlkKHAucGlkLCAwKQoKTm90ZToKCiogQ2FsbGluZyB0aGUgcHJvZ3JhbSB0aHJvdWdoIHRoZSBzaGVsbCBpcyB1c3VhbGx5IG5vdCByZXF1aXJlZC4KCiogSXQncyBlYXNpZXIgdG8gbG9vayBhdCB0aGUgcmV0dXJuY29kZSBhdHRyaWJ1dGUgdGhhbiB0aGUKICBleGl0c3RhdHVzLgoKQSBtb3JlIHJlYWwtd29ybGQgZXhhbXBsZSB3b3VsZCBsb29rIGxpa2UgdGhpczoKCnRyeToKICAgIHJldGNvZGUgPSBjYWxsKCJteWNtZCIgKyAiIG15YXJnIiwgc2hlbGw9VHJ1ZSkKICAgIGlmIHJldGNvZGUgPCAwOgogICAgICAgIHByaW50ID4+c3lzLnN0ZGVyciwgIkNoaWxkIHdhcyB0ZXJtaW5hdGVkIGJ5IHNpZ25hbCIsIC1yZXRjb2RlCiAgICBlbHNlOgogICAgICAgIHByaW50ID4+c3lzLnN0ZGVyciwgIkNoaWxkIHJldHVybmVkIiwgcmV0Y29kZQpleGNlcHQgT1NFcnJvciwgZToKICAgIHByaW50ID4+c3lzLnN0ZGVyciwgIkV4ZWN1dGlvbiBmYWlsZWQ6IiwgZQoKClJlcGxhY2luZyBvcy5zcGF3bioKLS0tLS0tLS0tLS0tLS0tLS0tLQpQX05PV0FJVCBleGFtcGxlOgoKcGlkID0gb3Muc3Bhd25scChvcy5QX05PV0FJVCwgIi9iaW4vbXljbWQiLCAibXljbWQiLCAibXlhcmciKQo9PT4KcGlkID0gUG9wZW4oWyIvYmluL215Y21kIiwgIm15YXJnIl0pLnBpZAoKClBfV0FJVCBleGFtcGxlOgoKcmV0Y29kZSA9IG9zLnNwYXdubHAob3MuUF9XQUlULCAiL2Jpbi9teWNtZCIsICJteWNtZCIsICJteWFyZyIpCj09PgpyZXRjb2RlID0gY2FsbChbIi9iaW4vbXljbWQiLCAibXlhcmciXSkKCgpWZWN0b3IgZXhhbXBsZToKCm9zLnNwYXdudnAob3MuUF9OT1dBSVQsIHBhdGgsIGFyZ3MpCj09PgpQb3BlbihbcGF0aF0gKyBhcmdzWzE6XSkKCgpFbnZpcm9ubWVudCBleGFtcGxlOgoKb3Muc3Bhd25scGUob3MuUF9OT1dBSVQsICIvYmluL215Y21kIiwgIm15Y21kIiwgIm15YXJnIiwgZW52KQo9PT4KUG9wZW4oWyIvYmluL215Y21kIiwgIm15YXJnIl0sIGVudj17IlBBVEgiOiAiL3Vzci9iaW4ifSkKCgpSZXBsYWNpbmcgb3MucG9wZW4qCi0tLS0tLS0tLS0tLS0tLS0tLS0KcGlwZSA9IG9zLnBvcGVuKCJjbWQiLCBtb2RlPSdyJywgYnVmc2l6ZSkKPT0+CnBpcGUgPSBQb3BlbigiY21kIiwgc2hlbGw9VHJ1ZSwgYnVmc2l6ZT1idWZzaXplLCBzdGRvdXQ9UElQRSkuc3Rkb3V0CgpwaXBlID0gb3MucG9wZW4oImNtZCIsIG1vZGU9J3cnLCBidWZzaXplKQo9PT4KcGlwZSA9IFBvcGVuKCJjbWQiLCBzaGVsbD1UcnVlLCBidWZzaXplPWJ1ZnNpemUsIHN0ZGluPVBJUEUpLnN0ZGluCgoKKGNoaWxkX3N0ZGluLCBjaGlsZF9zdGRvdXQpID0gb3MucG9wZW4yKCJjbWQiLCBtb2RlLCBidWZzaXplKQo9PT4KcCA9IFBvcGVuKCJjbWQiLCBzaGVsbD1UcnVlLCBidWZzaXplPWJ1ZnNpemUsCiAgICAgICAgICBzdGRpbj1QSVBFLCBzdGRvdXQ9UElQRSwgY2xvc2VfZmRzPVRydWUpCihjaGlsZF9zdGRpbiwgY2hpbGRfc3Rkb3V0KSA9IChwLnN0ZGluLCBwLnN0ZG91dCkKCgooY2hpbGRfc3RkaW4sCiBjaGlsZF9zdGRvdXQsCiBjaGlsZF9zdGRlcnIpID0gb3MucG9wZW4zKCJjbWQiLCBtb2RlLCBidWZzaXplKQo9PT4KcCA9IFBvcGVuKCJjbWQiLCBzaGVsbD1UcnVlLCBidWZzaXplPWJ1ZnNpemUsCiAgICAgICAgICBzdGRpbj1QSVBFLCBzdGRvdXQ9UElQRSwgc3RkZXJyPVBJUEUsIGNsb3NlX2Zkcz1UcnVlKQooY2hpbGRfc3RkaW4sCiBjaGlsZF9zdGRvdXQsCiBjaGlsZF9zdGRlcnIpID0gKHAuc3RkaW4sIHAuc3Rkb3V0LCBwLnN0ZGVycikKCgooY2hpbGRfc3RkaW4sIGNoaWxkX3N0ZG91dF9hbmRfc3RkZXJyKSA9IG9zLnBvcGVuNCgiY21kIiwgbW9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmc2l6ZSkKPT0+CnAgPSBQb3BlbigiY21kIiwgc2hlbGw9VHJ1ZSwgYnVmc2l6ZT1idWZzaXplLAogICAgICAgICAgc3RkaW49UElQRSwgc3Rkb3V0PVBJUEUsIHN0ZGVycj1TVERPVVQsIGNsb3NlX2Zkcz1UcnVlKQooY2hpbGRfc3RkaW4sIGNoaWxkX3N0ZG91dF9hbmRfc3RkZXJyKSA9IChwLnN0ZGluLCBwLnN0ZG91dCkKCk9uIFVuaXgsIG9zLnBvcGVuMiwgb3MucG9wZW4zIGFuZCBvcy5wb3BlbjQgYWxzbyBhY2NlcHQgYSBzZXF1ZW5jZSBhcwp0aGUgY29tbWFuZCB0byBleGVjdXRlLCBpbiB3aGljaCBjYXNlIGFyZ3VtZW50cyB3aWxsIGJlIHBhc3NlZApkaXJlY3RseSB0byB0aGUgcHJvZ3JhbSB3aXRob3V0IHNoZWxsIGludGVydmVudGlvbi4gIFRoaXMgdXNhZ2UgY2FuIGJlCnJlcGxhY2VkIGFzIGZvbGxvd3M6CgooY2hpbGRfc3RkaW4sIGNoaWxkX3N0ZG91dCkgPSBvcy5wb3BlbjIoWyIvYmluL2xzIiwgIi1sIl0sIG1vZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZzaXplKQo9PT4KcCA9IFBvcGVuKFsiL2Jpbi9scyIsICItbCJdLCBidWZzaXplPWJ1ZnNpemUsIHN0ZGluPVBJUEUsIHN0ZG91dD1QSVBFKQooY2hpbGRfc3RkaW4sIGNoaWxkX3N0ZG91dCkgPSAocC5zdGRpbiwgcC5zdGRvdXQpCgpSZXR1cm4gY29kZSBoYW5kbGluZyB0cmFuc2xhdGVzIGFzIGZvbGxvd3M6CgpwaXBlID0gb3MucG9wZW4oImNtZCIsICd3JykKLi4uCnJjID0gcGlwZS5jbG9zZSgpCmlmIHJjIGlzIG5vdCBOb25lIGFuZCByYyAlIDI1NjoKICAgIHByaW50ICJUaGVyZSB3ZXJlIHNvbWUgZXJyb3JzIgo9PT4KcHJvY2VzcyA9IFBvcGVuKCJjbWQiLCAndycsIHNoZWxsPVRydWUsIHN0ZGluPVBJUEUpCi4uLgpwcm9jZXNzLnN0ZGluLmNsb3NlKCkKaWYgcHJvY2Vzcy53YWl0KCkgIT0gMDoKICAgIHByaW50ICJUaGVyZSB3ZXJlIHNvbWUgZXJyb3JzIgoKClJlcGxhY2luZyBwb3BlbjIuKgotLS0tLS0tLS0tLS0tLS0tLS0KKGNoaWxkX3N0ZG91dCwgY2hpbGRfc3RkaW4pID0gcG9wZW4yLnBvcGVuMigic29tZXN0cmluZyIsIGJ1ZnNpemUsIG1vZGUpCj09PgpwID0gUG9wZW4oWyJzb21lc3RyaW5nIl0sIHNoZWxsPVRydWUsIGJ1ZnNpemU9YnVmc2l6ZQogICAgICAgICAgc3RkaW49UElQRSwgc3Rkb3V0PVBJUEUsIGNsb3NlX2Zkcz1UcnVlKQooY2hpbGRfc3Rkb3V0LCBjaGlsZF9zdGRpbikgPSAocC5zdGRvdXQsIHAuc3RkaW4pCgpPbiBVbml4LCBwb3BlbjIgYWxzbyBhY2NlcHRzIGEgc2VxdWVuY2UgYXMgdGhlIGNvbW1hbmQgdG8gZXhlY3V0ZSwgaW4Kd2hpY2ggY2FzZSBhcmd1bWVudHMgd2lsbCBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIHByb2dyYW0gd2l0aG91dApzaGVsbCBpbnRlcnZlbnRpb24uICBUaGlzIHVzYWdlIGNhbiBiZSByZXBsYWNlZCBhcyBmb2xsb3dzOgoKKGNoaWxkX3N0ZG91dCwgY2hpbGRfc3RkaW4pID0gcG9wZW4yLnBvcGVuMihbIm15Y21kIiwgIm15YXJnIl0sIGJ1ZnNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZSkKPT0+CnAgPSBQb3BlbihbIm15Y21kIiwgIm15YXJnIl0sIGJ1ZnNpemU9YnVmc2l6ZSwKICAgICAgICAgIHN0ZGluPVBJUEUsIHN0ZG91dD1QSVBFLCBjbG9zZV9mZHM9VHJ1ZSkKKGNoaWxkX3N0ZG91dCwgY2hpbGRfc3RkaW4pID0gKHAuc3Rkb3V0LCBwLnN0ZGluKQoKVGhlIHBvcGVuMi5Qb3BlbjMgYW5kIHBvcGVuMi5Qb3BlbjQgYmFzaWNhbGx5IHdvcmtzIGFzIHN1YnByb2Nlc3MuUG9wZW4sCmV4Y2VwdCB0aGF0OgoKKiBzdWJwcm9jZXNzLlBvcGVuIHJhaXNlcyBhbiBleGNlcHRpb24gaWYgdGhlIGV4ZWN1dGlvbiBmYWlscwoqIHRoZSBjYXB0dXJlc3RkZXJyIGFyZ3VtZW50IGlzIHJlcGxhY2VkIHdpdGggdGhlIHN0ZGVyciBhcmd1bWVudC4KKiBzdGRpbj1QSVBFIGFuZCBzdGRvdXQ9UElQRSBtdXN0IGJlIHNwZWNpZmllZC4KKiBwb3BlbjIgY2xvc2VzIGFsbCBmaWxlZGVzY3JpcHRvcnMgYnkgZGVmYXVsdCwgYnV0IHlvdSBoYXZlIHRvIHNwZWNpZnkKICBjbG9zZV9mZHM9VHJ1ZSB3aXRoIHN1YnByb2Nlc3MuUG9wZW4uCiIiIgoKCkNSRUFURV9ORVdfQ09OU09MRSA9IDE2CgpDUkVBVEVfTkVXX1BST0NFU1NfR1JPVVAgPSA1MTIKCmNsYXNzIENhbGxlZFByb2Nlc3NFcnJvcihFeGNlcHRpb24pOgogICAgcGFzcwoKTUFYRkQgPSAyNTYKClBJUEUgPSAtMQoKY2xhc3MgUG9wZW4ob2JqZWN0KToKICAgIHBhc3MKClNUQVJURl9VU0VTSE9XV0lORE9XID0gMQoKU1RBUlRGX1VTRVNUREhBTkRMRVMgPSAyNTYKCmNsYXNzIFNUQVJUVVBJTkZPOgogICAgcGFzcwoKU1RET1VUID0gLTIKClNURF9FUlJPUl9IQU5ETEUgPSAtMTIKClNURF9JTlBVVF9IQU5ETEUgPSAtMTAKClNURF9PVVRQVVRfSEFORExFID0gLTExCgpTV19ISURFID0gMAoKX19hbGxfXyA9ICJbJ1BvcGVuJywgJ1BJUEUnLCAnU1RET1VUJywgJ2NhbGwnLCAnY2hlY2tfY2FsbCcsICdjaGVja19vdXRwdXQnLCAnQ2FsbGVkUHJvY2Vzc0Vycm9yJywgCiAgICAnQ1JFQVRFX05FV19DT05TT0xFJywgJ0NSRUFURV9ORVdfUFJPQ0VTU19HUk9VUCcsICdTVERfSU5QVVRfSEFORExFJywgJ1NURF9PVVRQVVRfSEFORExFJywgCiAgICAnU1REX0VSUk9SX0hBTkRMRScsICdTV19ISURFJywgJ1NUQVJURl9VU0VTVERIQU5ETEVTJywgJ1NUQVJURl9VU0VTSE9XV0lORE9XJ10iCgpfYWN0aXZlID0gIltdIgoKZGVmIF9jbGVhbnVwKCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIF9kZW1vX3Bvc2l4KCphcmdzLCoqa3cpOgogICAgcGFzcwoKZGVmIF9kZW1vX3dpbmRvd3MoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpkZWYgX2VpbnRyX3JldHJ5X2NhbGwoKmFyZ3MsKiprdyk6CiAgICBwYXNzCgpfc3VicHJvY2VzcyA9ICI8bW9kdWxlICdfc3VicHJvY2VzcycgKGJ1aWx0LWluKT4iCgpkZWYgY2FsbCgqYXJncywqKmt3KToKICAgICIiIlJ1biBjb21tYW5kIHdpdGggYXJndW1lbnRzLiAgV2FpdCBmb3IgY29tbWFuZCB0byBjb21wbGV0ZSwgdGhlbiAgICAgICAgcmV0dXJuIHRoZSByZXR1cm5jb2RlIGF0dHJpYnV0ZS4KICAgIAogICAgICAgIFRoZSBhcmd1bWVudHMgYXJlIHRoZSBzYW1lIGFzIGZvciB0aGUgUG9wZW4gY29uc3RydWN0b3IuICBFeGFtcGxlOgogICAgCiAgICAgICAgcmV0Y29kZSA9IGNhbGwoWyJscyIsICItbCJdKQogICAgICAgICIiIgogICAgcGFzcwoKZGVmIGNoZWNrX2NhbGwoKmFyZ3MsKiprdyk6CiAgICAiIiJSdW4gY29tbWFuZCB3aXRoIGFyZ3VtZW50cy4gIFdhaXQgZm9yIGNvbW1hbmQgdG8gY29tcGxldGUuICBJZiAgICAgICAgdGhlIGV4aXQgY29kZSB3YXMgemVybyB0aGVuIHJldHVybiwgb3RoZXJ3aXNlIHJhaXNlCiAgICAgICAgQ2FsbGVkUHJvY2Vzc0Vycm9yLiAgVGhlIENhbGxlZFByb2Nlc3NFcnJvciBvYmplY3Qgd2lsbCBoYXZlIHRoZQogICAgICAgIHJldHVybiBjb2RlIGluIHRoZSByZXR1cm5jb2RlIGF0dHJpYnV0ZS4KICAgIAogICAgICAgIFRoZSBhcmd1bWVudHMgYXJlIHRoZSBzYW1lIGFzIGZvciB0aGUgUG9wZW4gY29uc3RydWN0b3IuICBFeGFtcGxlOgogICAgCiAgICAgICAgY2hlY2tfY2FsbChbImxzIiwgIi1sIl0pCiAgICAgICAgIiIiCiAgICBwYXNzCgpkZWYgY2hlY2tfb3V0cHV0KCphcmdzLCoqa3cpOgogICAgIiIiUnVuIGNvbW1hbmQgd2l0aCBhcmd1bWVudHMgYW5kIHJldHVybiBpdHMgb3V0cHV0IGFzIGEgYnl0ZSBzdHJpbmcuICAgIAogICAgICAgIElmIHRoZSBleGl0IGNvZGUgd2FzIG5vbi16ZXJvIGl0IHJhaXNlcyBhIENhbGxlZFByb2Nlc3NFcnJvci4gIFRoZQogICAgICAgIENhbGxlZFByb2Nlc3NFcnJvciBvYmplY3Qgd2lsbCBoYXZlIHRoZSByZXR1cm4gY29kZSBpbiB0aGUgcmV0dXJuY29kZQogICAgICAgIGF0dHJpYnV0ZSBhbmQgb3V0cHV0IGluIHRoZSBvdXRwdXQgYXR0cmlidXRlLgogICAgCiAgICAgICAgVGhlIGFyZ3VtZW50cyBhcmUgdGhlIHNhbWUgYXMgZm9yIHRoZSBQb3BlbiBjb25zdHJ1Y3Rvci4gIEV4YW1wbGU6CiAgICAKICAgICAgICA+Pj4gY2hlY2tfb3V0cHV0KFsibHMiLCAiLWwiLCAiL2Rldi9udWxsIl0pCiAgICAgICAgJ2Nydy1ydy1ydy0gMSByb290IHJvb3QgMSwgMyBPY3QgMTggIDIwMDcgL2Rldi9udWxsXG4nCiAgICAKICAgICAgICBUaGUgc3Rkb3V0IGFyZ3VtZW50IGlzIG5vdCBhbGxvd2VkIGFzIGl0IGlzIHVzZWQgaW50ZXJuYWxseS4KICAgICAgICBUbyBjYXB0dXJlIHN0YW5kYXJkIGVycm9yIGluIHRoZSByZXN1bHQsIHVzZSBzdGRlcnI9U1RET1VULgogICAgCiAgICAgICAgPj4+IGNoZWNrX291dHB1dChbIi9iaW4vc2giLCAiLWMiLAogICAgICAgIC4uLiAgICAgICAgICAgICAgICJscyAtbCBub25fZXhpc3RlbnRfZmlsZSA7IGV4aXQgMCJdLAogICAgICAgIC4uLiAgICAgICAgICAgICAgc3RkZXJyPVNURE9VVCkKICAgICAgICAnbHM6IG5vbl9leGlzdGVudF9maWxlOiBObyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5XG4nCiAgICAgICAgIiIiCiAgICBwYXNzCgplcnJubyA9ICI8bW9kdWxlICdlcnJubycgKGJ1aWx0LWluKT4iCgpnYyA9ICI8bW9kdWxlICdnYycgKGJ1aWx0LWluKT4iCgpkZWYgbGlzdDJjbWRsaW5lKCphcmdzLCoqa3cpOgogICAgIiIiICAgICAgICBUcmFuc2xhdGUgYSBzZXF1ZW5jZSBvZiBhcmd1bWVudHMgaW50byBhIGNvbW1hbmQgbGluZQogICAgICAgIHN0cmluZywgdXNpbmcgdGhlIHNhbWUgcnVsZXMgYXMgdGhlIE1TIEMgcnVudGltZToKICAgIAogICAgICAgIDEpIEFyZ3VtZW50cyBhcmUgZGVsaW1pdGVkIGJ5IHdoaXRlIHNwYWNlLCB3aGljaCBpcyBlaXRoZXIgYQogICAgICAgICAgIHNwYWNlIG9yIGEgdGFiLgogICAgCiAgICAgICAgMikgQSBzdHJpbmcgc3Vycm91bmRlZCBieSBkb3VibGUgcXVvdGF0aW9uIG1hcmtzIGlzCiAgICAgICAgICAgaW50ZXJwcmV0ZWQgYXMgYSBzaW5nbGUgYXJndW1lbnQsIHJlZ2FyZGxlc3Mgb2Ygd2hpdGUgc3BhY2UKICAgICAgICAgICBjb250YWluZWQgd2l0aGluLiAgQSBxdW90ZWQgc3RyaW5nIGNhbiBiZSBlbWJlZGRlZCBpbiBhbgogICAgICAgICAgIGFyZ3VtZW50LgogICAgCiAgICAgICAgMykgQSBkb3VibGUgcXVvdGF0aW9uIG1hcmsgcHJlY2VkZWQgYnkgYSBiYWNrc2xhc2ggaXMKICAgICAgICAgICBpbnRlcnByZXRlZCBhcyBhIGxpdGVyYWwgZG91YmxlIHF1b3RhdGlvbiBtYXJrLgogICAgCiAgICAgICAgNCkgQmFja3NsYXNoZXMgYXJlIGludGVycHJldGVkIGxpdGVyYWxseSwgdW5sZXNzIHRoZXkKICAgICAgICAgICBpbW1lZGlhdGVseSBwcmVjZWRlIGEgZG91YmxlIHF1b3RhdGlvbiBtYXJrLgogICAgCiAgICAgICAgNSkgSWYgYmFja3NsYXNoZXMgaW1tZWRpYXRlbHkgcHJlY2VkZSBhIGRvdWJsZSBxdW90YXRpb24gbWFyaywKICAgICAgICAgICBldmVyeSBwYWlyIG9mIGJhY2tzbGFzaGVzIGlzIGludGVycHJldGVkIGFzIGEgbGl0ZXJhbAogICAgICAgICAgIGJhY2tzbGFzaC4gIElmIHRoZSBudW1iZXIgb2YgYmFja3NsYXNoZXMgaXMgb2RkLCB0aGUgbGFzdAogICAgICAgICAgIGJhY2tzbGFzaCBlc2NhcGVzIHRoZSBuZXh0IGRvdWJsZSBxdW90YXRpb24gbWFyayBhcwogICAgICAgICAgIGRlc2NyaWJlZCBpbiBydWxlIDMuCiAgICAgICAgIiIiCiAgICBwYXNzCgptc3ZjcnQgPSAiPG1vZHVsZSAnbXN2Y3J0JyAoYnVpbHQtaW4pPiIKCm1zd2luZG93cyA9IFRydWUKCm9zID0gIjxtb2R1bGUgJ29zJyBmcm9tICdjOlxweXRob24yN1xsaWJcb3MucHljJz4iCgpjbGFzcyBweXdpbnR5cGVzOgogICAgcGFzcwoKc2lnbmFsID0gIjxtb2R1bGUgJ3NpZ25hbCcgKGJ1aWx0LWluKT4iCgpzeXMgPSAiPG1vZHVsZSAnc3lzJyAoYnVpbHQtaW4pPiIKCnRocmVhZGluZyA9ICI8bW9kdWxlICd0aHJlYWRpbmcnIGZyb20gJ2M6XHB5dGhvbjI3XGxpYlx0aHJlYWRpbmcucHljJz4iCgp0cmFjZWJhY2sgPSAiPG1vZHVsZSAndHJhY2ViYWNrJyBmcm9tICdjOlxweXRob24yN1xsaWJcdHJhY2ViYWNrLnB5Yyc+IgoKdHlwZXMgPSAiPG1vZHVsZSAndHlwZXMnIGZyb20gJ2M6XHB5dGhvbjI3XGxpYlx0eXBlcy5weWMnPiIK',
'/Lib/stat.py':'IiIiQ29uc3RhbnRzL2Z1bmN0aW9ucyBmb3IgaW50ZXJwcmV0aW5nIHJlc3VsdHMgb2Ygb3Muc3RhdCgpIGFuZCBvcy5sc3RhdCgpLg0KDQpTdWdnZXN0ZWQgdXNhZ2U6IGZyb20gc3RhdCBpbXBvcnQgKg0KIiIiDQoNCiMgSW5kaWNlcyBmb3Igc3RhdCBzdHJ1Y3QgbWVtYmVycyBpbiB0aGUgdHVwbGUgcmV0dXJuZWQgYnkgb3Muc3RhdCgpDQoNClNUX01PREUgID0gMA0KU1RfSU5PICAgPSAxDQpTVF9ERVYgICA9IDINClNUX05MSU5LID0gMw0KU1RfVUlEICAgPSA0DQpTVF9HSUQgICA9IDUNClNUX1NJWkUgID0gNg0KU1RfQVRJTUUgPSA3DQpTVF9NVElNRSA9IDgNClNUX0NUSU1FID0gOQ0KDQojIEV4dHJhY3QgYml0cyBmcm9tIHRoZSBtb2RlDQoNCmRlZiBTX0lNT0RFKG1vZGUpOg0KICAgICIiIlJldHVybiB0aGUgcG9ydGlvbiBvZiB0aGUgZmlsZSdzIG1vZGUgdGhhdCBjYW4gYmUgc2V0IGJ5DQogICAgb3MuY2htb2QoKS4NCiAgICAiIiINCiAgICByZXR1cm4gbW9kZSAmIDBvNzc3Nw0KDQpkZWYgU19JRk1UKG1vZGUpOg0KICAgICIiIlJldHVybiB0aGUgcG9ydGlvbiBvZiB0aGUgZmlsZSdzIG1vZGUgdGhhdCBkZXNjcmliZXMgdGhlDQogICAgZmlsZSB0eXBlLg0KICAgICIiIg0KICAgIHJldHVybiBtb2RlICYgMG8xNzAwMDANCg0KIyBDb25zdGFudHMgdXNlZCBhcyBTX0lGTVQoKSBmb3IgdmFyaW91cyBmaWxlIHR5cGVzDQojIChub3QgYWxsIGFyZSBpbXBsZW1lbnRlZCBvbiBhbGwgc3lzdGVtcykNCg0KU19JRkRJUiAgPSAwbzA0MDAwMCAgIyBkaXJlY3RvcnkNClNfSUZDSFIgID0gMG8wMjAwMDAgICMgY2hhcmFjdGVyIGRldmljZQ0KU19JRkJMSyAgPSAwbzA2MDAwMCAgIyBibG9jayBkZXZpY2UNClNfSUZSRUcgID0gMG8xMDAwMDAgICMgcmVndWxhciBmaWxlDQpTX0lGSUZPICA9IDBvMDEwMDAwICAjIGZpZm8gKG5hbWVkIHBpcGUpDQpTX0lGTE5LICA9IDBvMTIwMDAwICAjIHN5bWJvbGljIGxpbmsNClNfSUZTT0NLID0gMG8xNDAwMDAgICMgc29ja2V0IGZpbGUNCg0KIyBGdW5jdGlvbnMgdG8gdGVzdCBmb3IgZWFjaCBmaWxlIHR5cGUNCg0KZGVmIFNfSVNESVIobW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgZGlyZWN0b3J5LiIiIg0KICAgIHJldHVybiBTX0lGTVQobW9kZSkgPT0gU19JRkRJUg0KDQpkZWYgU19JU0NIUihtb2RlKToNCiAgICAiIiJSZXR1cm4gVHJ1ZSBpZiBtb2RlIGlzIGZyb20gYSBjaGFyYWN0ZXIgc3BlY2lhbCBkZXZpY2UgZmlsZS4iIiINCiAgICByZXR1cm4gU19JRk1UKG1vZGUpID09IFNfSUZDSFINCg0KZGVmIFNfSVNCTEsobW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgYmxvY2sgc3BlY2lhbCBkZXZpY2UgZmlsZS4iIiINCiAgICByZXR1cm4gU19JRk1UKG1vZGUpID09IFNfSUZCTEsNCg0KZGVmIFNfSVNSRUcobW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgcmVndWxhciBmaWxlLiIiIg0KICAgIHJldHVybiBTX0lGTVQobW9kZSkgPT0gU19JRlJFRw0KDQpkZWYgU19JU0ZJRk8obW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgRklGTyAobmFtZWQgcGlwZSkuIiIiDQogICAgcmV0dXJuIFNfSUZNVChtb2RlKSA9PSBTX0lGSUZPDQoNCmRlZiBTX0lTTE5LKG1vZGUpOg0KICAgICIiIlJldHVybiBUcnVlIGlmIG1vZGUgaXMgZnJvbSBhIHN5bWJvbGljIGxpbmsuIiIiDQogICAgcmV0dXJuIFNfSUZNVChtb2RlKSA9PSBTX0lGTE5LDQoNCmRlZiBTX0lTU09DSyhtb2RlKToNCiAgICAiIiJSZXR1cm4gVHJ1ZSBpZiBtb2RlIGlzIGZyb20gYSBzb2NrZXQuIiIiDQogICAgcmV0dXJuIFNfSUZNVChtb2RlKSA9PSBTX0lGU09DSw0KDQojIE5hbWVzIGZvciBwZXJtaXNzaW9uIGJpdHMNCg0KU19JU1VJRCA9IDBvNDAwMCAgIyBzZXQgVUlEIGJpdA0KU19JU0dJRCA9IDBvMjAwMCAgIyBzZXQgR0lEIGJpdA0KU19FTkZNVCA9IFNfSVNHSUQgIyBmaWxlIGxvY2tpbmcgZW5mb3JjZW1lbnQNClNfSVNWVFggPSAwbzEwMDAgICMgc3RpY2t5IGJpdA0KU19JUkVBRCA9IDBvMDQwMCAgIyBVbml4IFY3IHN5bm9ueW0gZm9yIFNfSVJVU1INClNfSVdSSVRFID0gMG8wMjAwICMgVW5peCBWNyBzeW5vbnltIGZvciBTX0lXVVNSDQpTX0lFWEVDID0gMG8wMTAwICAjIFVuaXggVjcgc3lub255bSBmb3IgU19JWFVTUg0KU19JUldYVSA9IDBvMDcwMCAgIyBtYXNrIGZvciBvd25lciBwZXJtaXNzaW9ucw0KU19JUlVTUiA9IDBvMDQwMCAgIyByZWFkIGJ5IG93bmVyDQpTX0lXVVNSID0gMG8wMjAwICAjIHdyaXRlIGJ5IG93bmVyDQpTX0lYVVNSID0gMG8wMTAwICAjIGV4ZWN1dGUgYnkgb3duZXINClNfSVJXWEcgPSAwbzAwNzAgICMgbWFzayBmb3IgZ3JvdXAgcGVybWlzc2lvbnMNClNfSVJHUlAgPSAwbzAwNDAgICMgcmVhZCBieSBncm91cA0KU19JV0dSUCA9IDBvMDAyMCAgIyB3cml0ZSBieSBncm91cA0KU19JWEdSUCA9IDBvMDAxMCAgIyBleGVjdXRlIGJ5IGdyb3VwDQpTX0lSV1hPID0gMG8wMDA3ICAjIG1hc2sgZm9yIG90aGVycyAobm90IGluIGdyb3VwKSBwZXJtaXNzaW9ucw0KU19JUk9USCA9IDBvMDAwNCAgIyByZWFkIGJ5IG90aGVycw0KU19JV09USCA9IDBvMDAwMiAgIyB3cml0ZSBieSBvdGhlcnMNClNfSVhPVEggPSAwbzAwMDEgICMgZXhlY3V0ZSBieSBvdGhlcnMNCg0KIyBOYW1lcyBmb3IgZmlsZSBmbGFncw0KDQpVRl9OT0RVTVAgICAgPSAweDAwMDAwMDAxICAjIGRvIG5vdCBkdW1wIGZpbGUNClVGX0lNTVVUQUJMRSA9IDB4MDAwMDAwMDIgICMgZmlsZSBtYXkgbm90IGJlIGNoYW5nZWQNClVGX0FQUEVORCAgICA9IDB4MDAwMDAwMDQgICMgZmlsZSBtYXkgb25seSBiZSBhcHBlbmRlZCB0bw0KVUZfT1BBUVVFICAgID0gMHgwMDAwMDAwOCAgIyBkaXJlY3RvcnkgaXMgb3BhcXVlIHdoZW4gdmlld2VkIHRocm91Z2ggYSB1bmlvbiBzdGFjaw0KVUZfTk9VTkxJTksgID0gMHgwMDAwMDAxMCAgIyBmaWxlIG1heSBub3QgYmUgcmVuYW1lZCBvciBkZWxldGVkDQpVRl9DT01QUkVTU0VEID0gMHgwMDAwMDAyMCAjIE9TIFg6IGZpbGUgaXMgaGZzLWNvbXByZXNzZWQNClVGX0hJRERFTiAgICA9IDB4MDAwMDgwMDAgICMgT1MgWDogZmlsZSBzaG91bGQgbm90IGJlIGRpc3BsYXllZA0KU0ZfQVJDSElWRUQgID0gMHgwMDAxMDAwMCAgIyBmaWxlIG1heSBiZSBhcmNoaXZlZA0KU0ZfSU1NVVRBQkxFID0gMHgwMDAyMDAwMCAgIyBmaWxlIG1heSBub3QgYmUgY2hhbmdlZA0KU0ZfQVBQRU5EICAgID0gMHgwMDA0MDAwMCAgIyBmaWxlIG1heSBvbmx5IGJlIGFwcGVuZGVkIHRvDQpTRl9OT1VOTElOSyAgPSAweDAwMTAwMDAwICAjIGZpbGUgbWF5IG5vdCBiZSByZW5hbWVkIG9yIGRlbGV0ZWQNClNGX1NOQVBTSE9UICA9IDB4MDAyMDAwMDAgICMgZmlsZSBpcyBhIHNuYXBzaG90IGZpbGUNCg0KDQpfZmlsZW1vZGVfdGFibGUgPSAoDQogICAgKChTX0lGTE5LLCAgICAgICAgICJsIiksDQogICAgIChTX0lGUkVHLCAgICAgICAgICItIiksDQogICAgIChTX0lGQkxLLCAgICAgICAgICJiIiksDQogICAgIChTX0lGRElSLCAgICAgICAgICJkIiksDQogICAgIChTX0lGQ0hSLCAgICAgICAgICJjIiksDQogICAgIChTX0lGSUZPLCAgICAgICAgICJwIikpLA0KDQogICAgKChTX0lSVVNSLCAgICAgICAgICJyIiksKSwNCiAgICAoKFNfSVdVU1IsICAgICAgICAgInciKSwpLA0KICAgICgoU19JWFVTUnxTX0lTVUlELCAicyIpLA0KICAgICAoU19JU1VJRCwgICAgICAgICAiUyIpLA0KICAgICAoU19JWFVTUiwgICAgICAgICAieCIpKSwNCg0KICAgICgoU19JUkdSUCwgICAgICAgICAiciIpLCksDQogICAgKChTX0lXR1JQLCAgICAgICAgICJ3IiksKSwNCiAgICAoKFNfSVhHUlB8U19JU0dJRCwgInMiKSwNCiAgICAgKFNfSVNHSUQsICAgICAgICAgIlMiKSwNCiAgICAgKFNfSVhHUlAsICAgICAgICAgIngiKSksDQoNCiAgICAoKFNfSVJPVEgsICAgICAgICAgInIiKSwpLA0KICAgICgoU19JV09USCwgICAgICAgICAidyIpLCksDQogICAgKChTX0lYT1RIfFNfSVNWVFgsICJ0IiksDQogICAgIChTX0lTVlRYLCAgICAgICAgICJUIiksDQogICAgIChTX0lYT1RILCAgICAgICAgICJ4IikpDQopDQoNCmRlZiBmaWxlbW9kZShtb2RlKToNCiAgICAiIiJDb252ZXJ0IGEgZmlsZSdzIG1vZGUgdG8gYSBzdHJpbmcgb2YgdGhlIGZvcm0gJy1yd3hyd3hyd3gnLiIiIg0KICAgIHBlcm0gPSBbXQ0KICAgIGZvciB0YWJsZSBpbiBfZmlsZW1vZGVfdGFibGU6DQogICAgICAgIGZvciBiaXQsIGNoYXIgaW4gdGFibGU6DQogICAgICAgICAgICBpZiBtb2RlICYgYml0ID09IGJpdDoNCiAgICAgICAgICAgICAgICBwZXJtLmFwcGVuZChjaGFyKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwZXJtLmFwcGVuZCgiLSIpDQogICAgcmV0dXJuICIiLmpvaW4ocGVybSkNCg==',
'/Lib/inspect.py':'IiIiR2V0IHVzZWZ1bCBpbmZvcm1hdGlvbiBmcm9tIGxpdmUgUHl0aG9uIG9iamVjdHMuCgpUaGlzIG1vZHVsZSBlbmNhcHN1bGF0ZXMgdGhlIGludGVyZmFjZSBwcm92aWRlZCBieSB0aGUgaW50ZXJuYWwgc3BlY2lhbAphdHRyaWJ1dGVzIChjb18qLCBpbV8qLCB0Yl8qLCBldGMuKSBpbiBhIGZyaWVuZGxpZXIgZmFzaGlvbi4KSXQgYWxzbyBwcm92aWRlcyBzb21lIGhlbHAgZm9yIGV4YW1pbmluZyBzb3VyY2UgY29kZSBhbmQgY2xhc3MgbGF5b3V0LgoKSGVyZSBhcmUgc29tZSBvZiB0aGUgdXNlZnVsIGZ1bmN0aW9ucyBwcm92aWRlZCBieSB0aGlzIG1vZHVsZToKCiAgICBpc21vZHVsZSgpLCBpc2NsYXNzKCksIGlzbWV0aG9kKCksIGlzZnVuY3Rpb24oKSwgaXNnZW5lcmF0b3JmdW5jdGlvbigpLAogICAgICAgIGlzZ2VuZXJhdG9yKCksIGlzdHJhY2ViYWNrKCksIGlzZnJhbWUoKSwgaXNjb2RlKCksIGlzYnVpbHRpbigpLAogICAgICAgIGlzcm91dGluZSgpIC0gY2hlY2sgb2JqZWN0IHR5cGVzCiAgICBnZXRtZW1iZXJzKCkgLSBnZXQgbWVtYmVycyBvZiBhbiBvYmplY3QgdGhhdCBzYXRpc2Z5IGEgZ2l2ZW4gY29uZGl0aW9uCgogICAgZ2V0ZmlsZSgpLCBnZXRzb3VyY2VmaWxlKCksIGdldHNvdXJjZSgpIC0gZmluZCBhbiBvYmplY3QncyBzb3VyY2UgY29kZQogICAgZ2V0ZG9jKCksIGdldGNvbW1lbnRzKCkgLSBnZXQgZG9jdW1lbnRhdGlvbiBvbiBhbiBvYmplY3QKICAgIGdldG1vZHVsZSgpIC0gZGV0ZXJtaW5lIHRoZSBtb2R1bGUgdGhhdCBhbiBvYmplY3QgY2FtZSBmcm9tCiAgICBnZXRjbGFzc3RyZWUoKSAtIGFycmFuZ2UgY2xhc3NlcyBzbyBhcyB0byByZXByZXNlbnQgdGhlaXIgaGllcmFyY2h5CgogICAgZ2V0YXJnc3BlYygpLCBnZXRhcmd2YWx1ZXMoKSwgZ2V0Y2FsbGFyZ3MoKSAtIGdldCBpbmZvIGFib3V0IGZ1bmN0aW9uIGFyZ3VtZW50cwogICAgZ2V0ZnVsbGFyZ3NwZWMoKSAtIHNhbWUsIHdpdGggc3VwcG9ydCBmb3IgUHl0aG9uLTMwMDAgZmVhdHVyZXMKICAgIGZvcm1hdGFyZ3NwZWMoKSwgZm9ybWF0YXJndmFsdWVzKCkgLSBmb3JtYXQgYW4gYXJndW1lbnQgc3BlYwogICAgZ2V0b3V0ZXJmcmFtZXMoKSwgZ2V0aW5uZXJmcmFtZXMoKSAtIGdldCBpbmZvIGFib3V0IGZyYW1lcwogICAgY3VycmVudGZyYW1lKCkgLSBnZXQgdGhlIGN1cnJlbnQgc3RhY2sgZnJhbWUKICAgIHN0YWNrKCksIHRyYWNlKCkgLSBnZXQgaW5mbyBhYm91dCBmcmFtZXMgb24gdGhlIHN0YWNrIG9yIGluIGEgdHJhY2ViYWNrCgogICAgc2lnbmF0dXJlKCkgLSBnZXQgYSBTaWduYXR1cmUgb2JqZWN0IGZvciB0aGUgY2FsbGFibGUKIiIiCgojIFRoaXMgbW9kdWxlIGlzIGluIHRoZSBwdWJsaWMgZG9tYWluLiAgTm8gd2FycmFudGllcy4KCl9fYXV0aG9yX18gPSAoJ0thLVBpbmcgWWVlIDxwaW5nQGxmdy5vcmc+JywKICAgICAgICAgICAgICAnWXVyeSBTZWxpdmFub3YgPHlzZWxpdmFub3ZAc3ByeW1peC5jb20+JykKCmltcG9ydCBpbXAKaW1wb3J0IGltcG9ydGxpYi5tYWNoaW5lcnkKaW1wb3J0IGl0ZXJ0b29scwppbXBvcnQgbGluZWNhY2hlCmltcG9ydCBvcwppbXBvcnQgcmUKaW1wb3J0IHN5cwppbXBvcnQgdG9rZW5pemUKaW1wb3J0IHR5cGVzCmltcG9ydCB3YXJuaW5ncwppbXBvcnQgZnVuY3Rvb2xzCmltcG9ydCBidWlsdGlucwpmcm9tIG9wZXJhdG9yIGltcG9ydCBhdHRyZ2V0dGVyCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IG5hbWVkdHVwbGUsIE9yZGVyZWREaWN0CgojIENyZWF0ZSBjb25zdGFudHMgZm9yIHRoZSBjb21waWxlciBmbGFncyBpbiBJbmNsdWRlL2NvZGUuaAojIFdlIHRyeSB0byBnZXQgdGhlbSBmcm9tIGRpcyB0byBhdm9pZCBkdXBsaWNhdGlvbiwgYnV0IGZhbGwKIyBiYWNrIHRvIGhhcmRjb3JkaW5nIHNvIHRoZSBkZXBlbmRlbmN5IGlzIG9wdGlvbmFsCnRyeToKICAgIGZyb20gZGlzIGltcG9ydCBDT01QSUxFUl9GTEFHX05BTUVTIGFzIF9mbGFnX25hbWVzCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIENPX09QVElNSVpFRCwgQ09fTkVXTE9DQUxTID0gMHgxLCAweDIKICAgIENPX1ZBUkFSR1MsIENPX1ZBUktFWVdPUkRTID0gMHg0LCAweDgKICAgIENPX05FU1RFRCwgQ09fR0VORVJBVE9SLCBDT19OT0ZSRUUgPSAweDEwLCAweDIwLCAweDQwCmVsc2U6CiAgICBtb2RfZGljdCA9IGdsb2JhbHMoKQogICAgZm9yIGssIHYgaW4gX2ZsYWdfbmFtZXMuaXRlbXMoKToKICAgICAgICBtb2RfZGljdFsiQ09fIiArIHZdID0gawoKIyBTZWUgSW5jbHVkZS9vYmplY3QuaApUUEZMQUdTX0lTX0FCU1RSQUNUID0gMSA8PCAyMAoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB0eXBlLWNoZWNraW5nCmRlZiBpc21vZHVsZShvYmplY3QpOgogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIG1vZHVsZS4KCiAgICBNb2R1bGUgb2JqZWN0cyBwcm92aWRlIHRoZXNlIGF0dHJpYnV0ZXM6CiAgICAgICAgX19jYWNoZWRfXyAgICAgIHBhdGhuYW1lIHRvIGJ5dGUgY29tcGlsZWQgZmlsZQogICAgICAgIF9fZG9jX18gICAgICAgICBkb2N1bWVudGF0aW9uIHN0cmluZwogICAgICAgIF9fZmlsZV9fICAgICAgICBmaWxlbmFtZSAobWlzc2luZyBmb3IgYnVpbHQtaW4gbW9kdWxlcykiIiIKICAgIHJldHVybiBpc2luc3RhbmNlKG9iamVjdCwgdHlwZXMuTW9kdWxlVHlwZSkKCmRlZiBpc2NsYXNzKG9iamVjdCk6CiAgICAiIiJSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIGEgY2xhc3MuCgogICAgQ2xhc3Mgb2JqZWN0cyBwcm92aWRlIHRoZXNlIGF0dHJpYnV0ZXM6CiAgICAgICAgX19kb2NfXyAgICAgICAgIGRvY3VtZW50YXRpb24gc3RyaW5nCiAgICAgICAgX19tb2R1bGVfXyAgICAgIG5hbWUgb2YgbW9kdWxlIGluIHdoaWNoIHRoaXMgY2xhc3Mgd2FzIGRlZmluZWQiIiIKICAgIHJldHVybiBpc2luc3RhbmNlKG9iamVjdCwgdHlwZSkKCmRlZiBpc21ldGhvZChvYmplY3QpOgogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhbiBpbnN0YW5jZSBtZXRob2QuCgogICAgSW5zdGFuY2UgbWV0aG9kIG9iamVjdHMgcHJvdmlkZSB0aGVzZSBhdHRyaWJ1dGVzOgogICAgICAgIF9fZG9jX18gICAgICAgICBkb2N1bWVudGF0aW9uIHN0cmluZwogICAgICAgIF9fbmFtZV9fICAgICAgICBuYW1lIHdpdGggd2hpY2ggdGhpcyBtZXRob2Qgd2FzIGRlZmluZWQKICAgICAgICBfX2Z1bmNfXyAgICAgICAgZnVuY3Rpb24gb2JqZWN0IGNvbnRhaW5pbmcgaW1wbGVtZW50YXRpb24gb2YgbWV0aG9kCiAgICAgICAgX19zZWxmX18gICAgICAgIGluc3RhbmNlIHRvIHdoaWNoIHRoaXMgbWV0aG9kIGlzIGJvdW5kIiIiCiAgICByZXR1cm4gaXNpbnN0YW5jZShvYmplY3QsIHR5cGVzLk1ldGhvZFR5cGUpCgpkZWYgaXNtZXRob2RkZXNjcmlwdG9yKG9iamVjdCk6CiAgICAiIiJSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIGEgbWV0aG9kIGRlc2NyaXB0b3IuCgogICAgQnV0IG5vdCBpZiBpc21ldGhvZCgpIG9yIGlzY2xhc3MoKSBvciBpc2Z1bmN0aW9uKCkgYXJlIHRydWUuCgogICAgVGhpcyBpcyBuZXcgaW4gUHl0aG9uIDIuMiwgYW5kLCBmb3IgZXhhbXBsZSwgaXMgdHJ1ZSBvZiBpbnQuX19hZGRfXy4KICAgIEFuIG9iamVjdCBwYXNzaW5nIHRoaXMgdGVzdCBoYXMgYSBfX2dldF9fIGF0dHJpYnV0ZSBidXQgbm90IGEgX19zZXRfXwogICAgYXR0cmlidXRlLCBidXQgYmV5b25kIHRoYXQgdGhlIHNldCBvZiBhdHRyaWJ1dGVzIHZhcmllcy4gIF9fbmFtZV9fIGlzCiAgICB1c3VhbGx5IHNlbnNpYmxlLCBhbmQgX19kb2NfXyBvZnRlbiBpcy4KCiAgICBNZXRob2RzIGltcGxlbWVudGVkIHZpYSBkZXNjcmlwdG9ycyB0aGF0IGFsc28gcGFzcyBvbmUgb2YgdGhlIG90aGVyCiAgICB0ZXN0cyByZXR1cm4gZmFsc2UgZnJvbSB0aGUgaXNtZXRob2RkZXNjcmlwdG9yKCkgdGVzdCwgc2ltcGx5IGJlY2F1c2UKICAgIHRoZSBvdGhlciB0ZXN0cyBwcm9taXNlIG1vcmUgLS0geW91IGNhbiwgZS5nLiwgY291bnQgb24gaGF2aW5nIHRoZQogICAgX19mdW5jX18gYXR0cmlidXRlIChldGMpIHdoZW4gYW4gb2JqZWN0IHBhc3NlcyBpc21ldGhvZCgpLiIiIgogICAgaWYgaXNjbGFzcyhvYmplY3QpIG9yIGlzbWV0aG9kKG9iamVjdCkgb3IgaXNmdW5jdGlvbihvYmplY3QpOgogICAgICAgICMgbXV0dWFsIGV4Y2x1c2lvbgogICAgICAgIHJldHVybiBGYWxzZQogICAgdHAgPSB0eXBlKG9iamVjdCkKICAgIHJldHVybiBoYXNhdHRyKHRwLCAiX19nZXRfXyIpIGFuZCBub3QgaGFzYXR0cih0cCwgIl9fc2V0X18iKQoKZGVmIGlzZGF0YWRlc2NyaXB0b3Iob2JqZWN0KToKICAgICIiIlJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgaXMgYSBkYXRhIGRlc2NyaXB0b3IuCgogICAgRGF0YSBkZXNjcmlwdG9ycyBoYXZlIGJvdGggYSBfX2dldF9fIGFuZCBhIF9fc2V0X18gYXR0cmlidXRlLiAgRXhhbXBsZXMgYXJlCiAgICBwcm9wZXJ0aWVzIChkZWZpbmVkIGluIFB5dGhvbikgYW5kIGdldHNldHMgYW5kIG1lbWJlcnMgKGRlZmluZWQgaW4gQykuCiAgICBUeXBpY2FsbHksIGRhdGEgZGVzY3JpcHRvcnMgd2lsbCBhbHNvIGhhdmUgX19uYW1lX18gYW5kIF9fZG9jX18gYXR0cmlidXRlcwogICAgKHByb3BlcnRpZXMsIGdldHNldHMsIGFuZCBtZW1iZXJzIGhhdmUgYm90aCBvZiB0aGVzZSBhdHRyaWJ1dGVzKSwgYnV0IHRoaXMKICAgIGlzIG5vdCBndWFyYW50ZWVkLiIiIgogICAgaWYgaXNjbGFzcyhvYmplY3QpIG9yIGlzbWV0aG9kKG9iamVjdCkgb3IgaXNmdW5jdGlvbihvYmplY3QpOgogICAgICAgICMgbXV0dWFsIGV4Y2x1c2lvbgogICAgICAgIHJldHVybiBGYWxzZQogICAgdHAgPSB0eXBlKG9iamVjdCkKICAgIHJldHVybiBoYXNhdHRyKHRwLCAiX19zZXRfXyIpIGFuZCBoYXNhdHRyKHRwLCAiX19nZXRfXyIpCgppZiBoYXNhdHRyKHR5cGVzLCAnTWVtYmVyRGVzY3JpcHRvclR5cGUnKToKICAgICMgQ1B5dGhvbiBhbmQgZXF1aXZhbGVudAogICAgZGVmIGlzbWVtYmVyZGVzY3JpcHRvcihvYmplY3QpOgogICAgICAgICIiIlJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgaXMgYSBtZW1iZXIgZGVzY3JpcHRvci4KCiAgICAgICAgTWVtYmVyIGRlc2NyaXB0b3JzIGFyZSBzcGVjaWFsaXplZCBkZXNjcmlwdG9ycyBkZWZpbmVkIGluIGV4dGVuc2lvbgogICAgICAgIG1vZHVsZXMuIiIiCiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2Uob2JqZWN0LCB0eXBlcy5NZW1iZXJEZXNjcmlwdG9yVHlwZSkKZWxzZToKICAgICMgT3RoZXIgaW1wbGVtZW50YXRpb25zCiAgICBkZWYgaXNtZW1iZXJkZXNjcmlwdG9yKG9iamVjdCk6CiAgICAgICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIG1lbWJlciBkZXNjcmlwdG9yLgoKICAgICAgICBNZW1iZXIgZGVzY3JpcHRvcnMgYXJlIHNwZWNpYWxpemVkIGRlc2NyaXB0b3JzIGRlZmluZWQgaW4gZXh0ZW5zaW9uCiAgICAgICAgbW9kdWxlcy4iIiIKICAgICAgICByZXR1cm4gRmFsc2UKCmlmIGhhc2F0dHIodHlwZXMsICdHZXRTZXREZXNjcmlwdG9yVHlwZScpOgogICAgIyBDUHl0aG9uIGFuZCBlcXVpdmFsZW50CiAgICBkZWYgaXNnZXRzZXRkZXNjcmlwdG9yKG9iamVjdCk6CiAgICAgICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIGdldHNldCBkZXNjcmlwdG9yLgoKICAgICAgICBnZXRzZXQgZGVzY3JpcHRvcnMgYXJlIHNwZWNpYWxpemVkIGRlc2NyaXB0b3JzIGRlZmluZWQgaW4gZXh0ZW5zaW9uCiAgICAgICAgbW9kdWxlcy4iIiIKICAgICAgICByZXR1cm4gaXNpbnN0YW5jZShvYmplY3QsIHR5cGVzLkdldFNldERlc2NyaXB0b3JUeXBlKQplbHNlOgogICAgIyBPdGhlciBpbXBsZW1lbnRhdGlvbnMKICAgIGRlZiBpc2dldHNldGRlc2NyaXB0b3Iob2JqZWN0KToKICAgICAgICAiIiJSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIGEgZ2V0c2V0IGRlc2NyaXB0b3IuCgogICAgICAgIGdldHNldCBkZXNjcmlwdG9ycyBhcmUgc3BlY2lhbGl6ZWQgZGVzY3JpcHRvcnMgZGVmaW5lZCBpbiBleHRlbnNpb24KICAgICAgICBtb2R1bGVzLiIiIgogICAgICAgIHJldHVybiBGYWxzZQoKZGVmIGlzZnVuY3Rpb24ob2JqZWN0KToKICAgICIiIlJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgaXMgYSB1c2VyLWRlZmluZWQgZnVuY3Rpb24uCgogICAgRnVuY3Rpb24gb2JqZWN0cyBwcm92aWRlIHRoZXNlIGF0dHJpYnV0ZXM6CiAgICAgICAgX19kb2NfXyAgICAgICAgIGRvY3VtZW50YXRpb24gc3RyaW5nCiAgICAgICAgX19uYW1lX18gICAgICAgIG5hbWUgd2l0aCB3aGljaCB0aGlzIGZ1bmN0aW9uIHdhcyBkZWZpbmVkCiAgICAgICAgX19jb2RlX18gICAgICAgIGNvZGUgb2JqZWN0IGNvbnRhaW5pbmcgY29tcGlsZWQgZnVuY3Rpb24gYnl0ZWNvZGUKICAgICAgICBfX2RlZmF1bHRzX18gICAgdHVwbGUgb2YgYW55IGRlZmF1bHQgdmFsdWVzIGZvciBhcmd1bWVudHMKICAgICAgICBfX2dsb2JhbHNfXyAgICAgZ2xvYmFsIG5hbWVzcGFjZSBpbiB3aGljaCB0aGlzIGZ1bmN0aW9uIHdhcyBkZWZpbmVkCiAgICAgICAgX19hbm5vdGF0aW9uc19fIGRpY3Qgb2YgcGFyYW1ldGVyIGFubm90YXRpb25zCiAgICAgICAgX19rd2RlZmF1bHRzX18gIGRpY3Qgb2Yga2V5d29yZCBvbmx5IHBhcmFtZXRlcnMgd2l0aCBkZWZhdWx0cyIiIgogICAgcmV0dXJuIGlzaW5zdGFuY2Uob2JqZWN0LCB0eXBlcy5GdW5jdGlvblR5cGUpCgpkZWYgaXNnZW5lcmF0b3JmdW5jdGlvbihvYmplY3QpOgogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIHVzZXItZGVmaW5lZCBnZW5lcmF0b3IgZnVuY3Rpb24uCgogICAgR2VuZXJhdG9yIGZ1bmN0aW9uIG9iamVjdHMgcHJvdmlkZXMgc2FtZSBhdHRyaWJ1dGVzIGFzIGZ1bmN0aW9ucy4KCiAgICBTZWUgaGVscChpc2Z1bmN0aW9uKSBmb3IgYXR0cmlidXRlcyBsaXN0aW5nLiIiIgogICAgcmV0dXJuIGJvb2woKGlzZnVuY3Rpb24ob2JqZWN0KSBvciBpc21ldGhvZChvYmplY3QpKSBhbmQKICAgICAgICAgICAgICAgIG9iamVjdC5fX2NvZGVfXy5jb19mbGFncyAmIENPX0dFTkVSQVRPUikKCmRlZiBpc2dlbmVyYXRvcihvYmplY3QpOgogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIGdlbmVyYXRvci4KCiAgICBHZW5lcmF0b3Igb2JqZWN0cyBwcm92aWRlIHRoZXNlIGF0dHJpYnV0ZXM6CiAgICAgICAgX19pdGVyX18gICAgICAgIGRlZmluZWQgdG8gc3VwcG9ydCBpbnRlcmF0aW9uIG92ZXIgY29udGFpbmVyCiAgICAgICAgY2xvc2UgICAgICAgICAgIHJhaXNlcyBhIG5ldyBHZW5lcmF0b3JFeGl0IGV4Y2VwdGlvbiBpbnNpZGUgdGhlCiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRvciB0byB0ZXJtaW5hdGUgdGhlIGl0ZXJhdGlvbgogICAgICAgIGdpX2NvZGUgICAgICAgICBjb2RlIG9iamVjdAogICAgICAgIGdpX2ZyYW1lICAgICAgICBmcmFtZSBvYmplY3Qgb3IgcG9zc2libHkgTm9uZSBvbmNlIHRoZSBnZW5lcmF0b3IgaGFzCiAgICAgICAgICAgICAgICAgICAgICAgIGJlZW4gZXhoYXVzdGVkCiAgICAgICAgZ2lfcnVubmluZyAgICAgIHNldCB0byAxIHdoZW4gZ2VuZXJhdG9yIGlzIGV4ZWN1dGluZywgMCBvdGhlcndpc2UKICAgICAgICBuZXh0ICAgICAgICAgICAgcmV0dXJuIHRoZSBuZXh0IGl0ZW0gZnJvbSB0aGUgY29udGFpbmVyCiAgICAgICAgc2VuZCAgICAgICAgICAgIHJlc3VtZXMgdGhlIGdlbmVyYXRvciBhbmQgInNlbmRzIiBhIHZhbHVlIHRoYXQgYmVjb21lcwogICAgICAgICAgICAgICAgICAgICAgICB0aGUgcmVzdWx0IG9mIHRoZSBjdXJyZW50IHlpZWxkLWV4cHJlc3Npb24KICAgICAgICB0aHJvdyAgICAgICAgICAgdXNlZCB0byByYWlzZSBhbiBleGNlcHRpb24gaW5zaWRlIHRoZSBnZW5lcmF0b3IiIiIKICAgIHJldHVybiBpc2luc3RhbmNlKG9iamVjdCwgdHlwZXMuR2VuZXJhdG9yVHlwZSkKCmRlZiBpc3RyYWNlYmFjayhvYmplY3QpOgogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIHRyYWNlYmFjay4KCiAgICBUcmFjZWJhY2sgb2JqZWN0cyBwcm92aWRlIHRoZXNlIGF0dHJpYnV0ZXM6CiAgICAgICAgdGJfZnJhbWUgICAgICAgIGZyYW1lIG9iamVjdCBhdCB0aGlzIGxldmVsCiAgICAgICAgdGJfbGFzdGkgICAgICAgIGluZGV4IG9mIGxhc3QgYXR0ZW1wdGVkIGluc3RydWN0aW9uIGluIGJ5dGVjb2RlCiAgICAgICAgdGJfbGluZW5vICAgICAgIGN1cnJlbnQgbGluZSBudW1iZXIgaW4gUHl0aG9uIHNvdXJjZSBjb2RlCiAgICAgICAgdGJfbmV4dCAgICAgICAgIG5leHQgaW5uZXIgdHJhY2ViYWNrIG9iamVjdCAoY2FsbGVkIGJ5IHRoaXMgbGV2ZWwpIiIiCiAgICByZXR1cm4gaXNpbnN0YW5jZShvYmplY3QsIHR5cGVzLlRyYWNlYmFja1R5cGUpCgpkZWYgaXNmcmFtZShvYmplY3QpOgogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIGZyYW1lIG9iamVjdC4KCiAgICBGcmFtZSBvYmplY3RzIHByb3ZpZGUgdGhlc2UgYXR0cmlidXRlczoKICAgICAgICBmX2JhY2sgICAgICAgICAgbmV4dCBvdXRlciBmcmFtZSBvYmplY3QgKHRoaXMgZnJhbWUncyBjYWxsZXIpCiAgICAgICAgZl9idWlsdGlucyAgICAgIGJ1aWx0LWluIG5hbWVzcGFjZSBzZWVuIGJ5IHRoaXMgZnJhbWUKICAgICAgICBmX2NvZGUgICAgICAgICAgY29kZSBvYmplY3QgYmVpbmcgZXhlY3V0ZWQgaW4gdGhpcyBmcmFtZQogICAgICAgIGZfZ2xvYmFscyAgICAgICBnbG9iYWwgbmFtZXNwYWNlIHNlZW4gYnkgdGhpcyBmcmFtZQogICAgICAgIGZfbGFzdGkgICAgICAgICBpbmRleCBvZiBsYXN0IGF0dGVtcHRlZCBpbnN0cnVjdGlvbiBpbiBieXRlY29kZQogICAgICAgIGZfbGluZW5vICAgICAgICBjdXJyZW50IGxpbmUgbnVtYmVyIGluIFB5dGhvbiBzb3VyY2UgY29kZQogICAgICAgIGZfbG9jYWxzICAgICAgICBsb2NhbCBuYW1lc3BhY2Ugc2VlbiBieSB0aGlzIGZyYW1lCiAgICAgICAgZl90cmFjZSAgICAgICAgIHRyYWNpbmcgZnVuY3Rpb24gZm9yIHRoaXMgZnJhbWUsIG9yIE5vbmUiIiIKICAgIHJldHVybiBpc2luc3RhbmNlKG9iamVjdCwgdHlwZXMuRnJhbWVUeXBlKQoKZGVmIGlzY29kZShvYmplY3QpOgogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIGNvZGUgb2JqZWN0LgoKICAgIENvZGUgb2JqZWN0cyBwcm92aWRlIHRoZXNlIGF0dHJpYnV0ZXM6CiAgICAgICAgY29fYXJnY291bnQgICAgIG51bWJlciBvZiBhcmd1bWVudHMgKG5vdCBpbmNsdWRpbmcgKiBvciAqKiBhcmdzKQogICAgICAgIGNvX2NvZGUgICAgICAgICBzdHJpbmcgb2YgcmF3IGNvbXBpbGVkIGJ5dGVjb2RlCiAgICAgICAgY29fY29uc3RzICAgICAgIHR1cGxlIG9mIGNvbnN0YW50cyB1c2VkIGluIHRoZSBieXRlY29kZQogICAgICAgIGNvX2ZpbGVuYW1lICAgICBuYW1lIG9mIGZpbGUgaW4gd2hpY2ggdGhpcyBjb2RlIG9iamVjdCB3YXMgY3JlYXRlZAogICAgICAgIGNvX2ZpcnN0bGluZW5vICBudW1iZXIgb2YgZmlyc3QgbGluZSBpbiBQeXRob24gc291cmNlIGNvZGUKICAgICAgICBjb19mbGFncyAgICAgICAgYml0bWFwOiAxPW9wdGltaXplZCB8IDI9bmV3bG9jYWxzIHwgND0qYXJnIHwgOD0qKmFyZwogICAgICAgIGNvX2xub3RhYiAgICAgICBlbmNvZGVkIG1hcHBpbmcgb2YgbGluZSBudW1iZXJzIHRvIGJ5dGVjb2RlIGluZGljZXMKICAgICAgICBjb19uYW1lICAgICAgICAgbmFtZSB3aXRoIHdoaWNoIHRoaXMgY29kZSBvYmplY3Qgd2FzIGRlZmluZWQKICAgICAgICBjb19uYW1lcyAgICAgICAgdHVwbGUgb2YgbmFtZXMgb2YgbG9jYWwgdmFyaWFibGVzCiAgICAgICAgY29fbmxvY2FscyAgICAgIG51bWJlciBvZiBsb2NhbCB2YXJpYWJsZXMKICAgICAgICBjb19zdGFja3NpemUgICAgdmlydHVhbCBtYWNoaW5lIHN0YWNrIHNwYWNlIHJlcXVpcmVkCiAgICAgICAgY29fdmFybmFtZXMgICAgIHR1cGxlIG9mIG5hbWVzIG9mIGFyZ3VtZW50cyBhbmQgbG9jYWwgdmFyaWFibGVzIiIiCiAgICByZXR1cm4gaXNpbnN0YW5jZShvYmplY3QsIHR5cGVzLkNvZGVUeXBlKQoKZGVmIGlzYnVpbHRpbihvYmplY3QpOgogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIGJ1aWx0LWluIGZ1bmN0aW9uIG9yIG1ldGhvZC4KCiAgICBCdWlsdC1pbiBmdW5jdGlvbnMgYW5kIG1ldGhvZHMgcHJvdmlkZSB0aGVzZSBhdHRyaWJ1dGVzOgogICAgICAgIF9fZG9jX18gICAgICAgICBkb2N1bWVudGF0aW9uIHN0cmluZwogICAgICAgIF9fbmFtZV9fICAgICAgICBvcmlnaW5hbCBuYW1lIG9mIHRoaXMgZnVuY3Rpb24gb3IgbWV0aG9kCiAgICAgICAgX19zZWxmX18gICAgICAgIGluc3RhbmNlIHRvIHdoaWNoIGEgbWV0aG9kIGlzIGJvdW5kLCBvciBOb25lIiIiCiAgICByZXR1cm4gaXNpbnN0YW5jZShvYmplY3QsIHR5cGVzLkJ1aWx0aW5GdW5jdGlvblR5cGUpCgpkZWYgaXNyb3V0aW5lKG9iamVjdCk6CiAgICAiIiJSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIGFueSBraW5kIG9mIGZ1bmN0aW9uIG9yIG1ldGhvZC4iIiIKICAgIHJldHVybiAoaXNidWlsdGluKG9iamVjdCkKICAgICAgICAgICAgb3IgaXNmdW5jdGlvbihvYmplY3QpCiAgICAgICAgICAgIG9yIGlzbWV0aG9kKG9iamVjdCkKICAgICAgICAgICAgb3IgaXNtZXRob2RkZXNjcmlwdG9yKG9iamVjdCkpCgpkZWYgaXNhYnN0cmFjdChvYmplY3QpOgogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIChBQkMpLiIiIgogICAgcmV0dXJuIGJvb2woaXNpbnN0YW5jZShvYmplY3QsIHR5cGUpIGFuZCBvYmplY3QuX19mbGFnc19fICYgVFBGTEFHU19JU19BQlNUUkFDVCkKCmRlZiBnZXRtZW1iZXJzKG9iamVjdCwgcHJlZGljYXRlPU5vbmUpOgogICAgIiIiUmV0dXJuIGFsbCBtZW1iZXJzIG9mIGFuIG9iamVjdCBhcyAobmFtZSwgdmFsdWUpIHBhaXJzIHNvcnRlZCBieSBuYW1lLgogICAgT3B0aW9uYWxseSwgb25seSByZXR1cm4gbWVtYmVycyB0aGF0IHNhdGlzZnkgYSBnaXZlbiBwcmVkaWNhdGUuIiIiCiAgICBpZiBpc2NsYXNzKG9iamVjdCk6CiAgICAgICAgbXJvID0gKG9iamVjdCwpICsgZ2V0bXJvKG9iamVjdCkKICAgIGVsc2U6CiAgICAgICAgbXJvID0gKCkKICAgIHJlc3VsdHMgPSBbXQogICAgZm9yIGtleSBpbiBkaXIob2JqZWN0KToKICAgICAgICAjIEZpcnN0IHRyeSB0byBnZXQgdGhlIHZhbHVlIHZpYSBfX2RpY3RfXy4gU29tZSBkZXNjcmlwdG9ycyBkb24ndAogICAgICAgICMgbGlrZSBjYWxsaW5nIHRoZWlyIF9fZ2V0X18gKHNlZSBidWcgIzE3ODUpLgogICAgICAgIGZvciBiYXNlIGluIG1ybzoKICAgICAgICAgICAgaWYga2V5IGluIGJhc2UuX19kaWN0X186CiAgICAgICAgICAgICAgICB2YWx1ZSA9IGJhc2UuX19kaWN0X19ba2V5XQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IGdldGF0dHIob2JqZWN0LCBrZXkpCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgaWYgbm90IHByZWRpY2F0ZSBvciBwcmVkaWNhdGUodmFsdWUpOgogICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgoa2V5LCB2YWx1ZSkpCiAgICByZXN1bHRzLnNvcnQoKQogICAgcmV0dXJuIHJlc3VsdHMKCkF0dHJpYnV0ZSA9IG5hbWVkdHVwbGUoJ0F0dHJpYnV0ZScsICduYW1lIGtpbmQgZGVmaW5pbmdfY2xhc3Mgb2JqZWN0JykKCmRlZiBjbGFzc2lmeV9jbGFzc19hdHRycyhjbHMpOgogICAgIiIiUmV0dXJuIGxpc3Qgb2YgYXR0cmlidXRlLWRlc2NyaXB0b3IgdHVwbGVzLgoKICAgIEZvciBlYWNoIG5hbWUgaW4gZGlyKGNscyksIHRoZSByZXR1cm4gbGlzdCBjb250YWlucyBhIDQtdHVwbGUKICAgIHdpdGggdGhlc2UgZWxlbWVudHM6CgogICAgICAgIDAuIFRoZSBuYW1lIChhIHN0cmluZykuCgogICAgICAgIDEuIFRoZSBraW5kIG9mIGF0dHJpYnV0ZSB0aGlzIGlzLCBvbmUgb2YgdGhlc2Ugc3RyaW5nczoKICAgICAgICAgICAgICAgJ2NsYXNzIG1ldGhvZCcgICAgY3JlYXRlZCB2aWEgY2xhc3NtZXRob2QoKQogICAgICAgICAgICAgICAnc3RhdGljIG1ldGhvZCcgICBjcmVhdGVkIHZpYSBzdGF0aWNtZXRob2QoKQogICAgICAgICAgICAgICAncHJvcGVydHknICAgICAgICBjcmVhdGVkIHZpYSBwcm9wZXJ0eSgpCiAgICAgICAgICAgICAgICdtZXRob2QnICAgICAgICAgIGFueSBvdGhlciBmbGF2b3Igb2YgbWV0aG9kCiAgICAgICAgICAgICAgICdkYXRhJyAgICAgICAgICAgIG5vdCBhIG1ldGhvZAoKICAgICAgICAyLiBUaGUgY2xhc3Mgd2hpY2ggZGVmaW5lZCB0aGlzIGF0dHJpYnV0ZSAoYSBjbGFzcykuCgogICAgICAgIDMuIFRoZSBvYmplY3QgYXMgb2J0YWluZWQgZGlyZWN0bHkgZnJvbSB0aGUgZGVmaW5pbmcgY2xhc3MncwogICAgICAgICAgIF9fZGljdF9fLCBub3QgdmlhIGdldGF0dHIuICBUaGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IGZvcgogICAgICAgICAgIGRhdGEgYXR0cmlidXRlczogIEMuZGF0YSBpcyBqdXN0IGEgZGF0YSBvYmplY3QsIGJ1dAogICAgICAgICAgIEMuX19kaWN0X19bJ2RhdGEnXSBtYXkgYmUgYSBkYXRhIGRlc2NyaXB0b3Igd2l0aCBhZGRpdGlvbmFsCiAgICAgICAgICAgaW5mbywgbGlrZSBhIF9fZG9jX18gc3RyaW5nLgogICAgIiIiCgogICAgbXJvID0gZ2V0bXJvKGNscykKICAgIG5hbWVzID0gZGlyKGNscykKICAgIHJlc3VsdCA9IFtdCiAgICBmb3IgbmFtZSBpbiBuYW1lczoKICAgICAgICAjIEdldCB0aGUgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGUgbmFtZSwgYW5kIHdoZXJlIGl0IHdhcyBkZWZpbmVkLgogICAgICAgICMgR2V0dGluZyBhbiBvYmogZnJvbSB0aGUgX19kaWN0X18gc29tZXRpbWVzIHJldmVhbHMgbW9yZSB0aGFuCiAgICAgICAgIyB1c2luZyBnZXRhdHRyLiAgU3RhdGljIGFuZCBjbGFzcyBtZXRob2RzIGFyZSBkcmFtYXRpYyBleGFtcGxlcy4KICAgICAgICAjIEZ1cnRoZXJtb3JlLCBzb21lIG9iamVjdHMgbWF5IHJhaXNlIGFuIEV4Y2VwdGlvbiB3aGVuIGZldGNoZWQgd2l0aAogICAgICAgICMgZ2V0YXR0cigpLiBUaGlzIGlzIHRoZSBjYXNlIHdpdGggc29tZSBkZXNjcmlwdG9ycyAoYnVnICMxNzg1KS4KICAgICAgICAjIFRodXMsIHdlIG9ubHkgdXNlIGdldGF0dHIoKSBhcyBhIGxhc3QgcmVzb3J0LgogICAgICAgIGhvbWVjbHMgPSBOb25lCiAgICAgICAgZm9yIGJhc2UgaW4gKGNscywpICsgbXJvOgogICAgICAgICAgICBpZiBuYW1lIGluIGJhc2UuX19kaWN0X186CiAgICAgICAgICAgICAgICBvYmogPSBiYXNlLl9fZGljdF9fW25hbWVdCiAgICAgICAgICAgICAgICBob21lY2xzID0gYmFzZQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbHNlOgogICAgICAgICAgICBvYmogPSBnZXRhdHRyKGNscywgbmFtZSkKICAgICAgICAgICAgaG9tZWNscyA9IGdldGF0dHIob2JqLCAiX19vYmpjbGFzc19fIiwgaG9tZWNscykKCiAgICAgICAgIyBDbGFzc2lmeSB0aGUgb2JqZWN0LgogICAgICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBzdGF0aWNtZXRob2QpOgogICAgICAgICAgICBraW5kID0gInN0YXRpYyBtZXRob2QiCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKG9iaiwgY2xhc3NtZXRob2QpOgogICAgICAgICAgICBraW5kID0gImNsYXNzIG1ldGhvZCIKICAgICAgICBlbGlmIGlzaW5zdGFuY2Uob2JqLCBwcm9wZXJ0eSk6CiAgICAgICAgICAgIGtpbmQgPSAicHJvcGVydHkiCiAgICAgICAgZWxpZiBpc21ldGhvZGRlc2NyaXB0b3Iob2JqKToKICAgICAgICAgICAga2luZCA9ICJtZXRob2QiCiAgICAgICAgZWxpZiBpc2RhdGFkZXNjcmlwdG9yKG9iaik6CiAgICAgICAgICAgIGtpbmQgPSAiZGF0YSIKICAgICAgICBlbHNlOgogICAgICAgICAgICBvYmpfdmlhX2dldGF0dHIgPSBnZXRhdHRyKGNscywgbmFtZSkKICAgICAgICAgICAgaWYgKGlzZnVuY3Rpb24ob2JqX3ZpYV9nZXRhdHRyKSBvcgogICAgICAgICAgICAgICAgaXNtZXRob2RkZXNjcmlwdG9yKG9ial92aWFfZ2V0YXR0cikpOgogICAgICAgICAgICAgICAga2luZCA9ICJtZXRob2QiCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBraW5kID0gImRhdGEiCiAgICAgICAgICAgIG9iaiA9IG9ial92aWFfZ2V0YXR0cgoKICAgICAgICByZXN1bHQuYXBwZW5kKEF0dHJpYnV0ZShuYW1lLCBraW5kLCBob21lY2xzLCBvYmopKQoKICAgIHJldHVybiByZXN1bHQKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gY2xhc3MgaGVscGVycwoKZGVmIGdldG1ybyhjbHMpOgogICAgIlJldHVybiB0dXBsZSBvZiBiYXNlIGNsYXNzZXMgKGluY2x1ZGluZyBjbHMpIGluIG1ldGhvZCByZXNvbHV0aW9uIG9yZGVyLiIKICAgIHJldHVybiBjbHMuX19tcm9fXwoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBzb3VyY2UgY29kZSBleHRyYWN0aW9uCmRlZiBpbmRlbnRzaXplKGxpbmUpOgogICAgIiIiUmV0dXJuIHRoZSBpbmRlbnQgc2l6ZSwgaW4gc3BhY2VzLCBhdCB0aGUgc3RhcnQgb2YgYSBsaW5lIG9mIHRleHQuIiIiCiAgICBleHBsaW5lID0gbGluZS5leHBhbmR0YWJzKCkKICAgIHJldHVybiBsZW4oZXhwbGluZSkgLSBsZW4oZXhwbGluZS5sc3RyaXAoKSkKCmRlZiBnZXRkb2Mob2JqZWN0KToKICAgICIiIkdldCB0aGUgZG9jdW1lbnRhdGlvbiBzdHJpbmcgZm9yIGFuIG9iamVjdC4KCiAgICBBbGwgdGFicyBhcmUgZXhwYW5kZWQgdG8gc3BhY2VzLiAgVG8gY2xlYW4gdXAgZG9jc3RyaW5ncyB0aGF0IGFyZQogICAgaW5kZW50ZWQgdG8gbGluZSB1cCB3aXRoIGJsb2NrcyBvZiBjb2RlLCBhbnkgd2hpdGVzcGFjZSB0aGFuIGNhbiBiZQogICAgdW5pZm9ybWx5IHJlbW92ZWQgZnJvbSB0aGUgc2Vjb25kIGxpbmUgb253YXJkcyBpcyByZW1vdmVkLiIiIgogICAgdHJ5OgogICAgICAgIGRvYyA9IG9iamVjdC5fX2RvY19fCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGlmIG5vdCBpc2luc3RhbmNlKGRvYywgc3RyKToKICAgICAgICByZXR1cm4gTm9uZQogICAgcmV0dXJuIGNsZWFuZG9jKGRvYykKCmRlZiBjbGVhbmRvYyhkb2MpOgogICAgIiIiQ2xlYW4gdXAgaW5kZW50YXRpb24gZnJvbSBkb2NzdHJpbmdzLgoKICAgIEFueSB3aGl0ZXNwYWNlIHRoYXQgY2FuIGJlIHVuaWZvcm1seSByZW1vdmVkIGZyb20gdGhlIHNlY29uZCBsaW5lCiAgICBvbndhcmRzIGlzIHJlbW92ZWQuIiIiCiAgICB0cnk6CiAgICAgICAgbGluZXMgPSBkb2MuZXhwYW5kdGFicygpLnNwbGl0KCdcbicpCiAgICBleGNlcHQgVW5pY29kZUVycm9yOgogICAgICAgIHJldHVybiBOb25lCiAgICBlbHNlOgogICAgICAgICMgRmluZCBtaW5pbXVtIGluZGVudGF0aW9uIG9mIGFueSBub24tYmxhbmsgbGluZXMgYWZ0ZXIgZmlyc3QgbGluZS4KICAgICAgICBtYXJnaW4gPSBzeXMubWF4c2l6ZQogICAgICAgIGZvciBsaW5lIGluIGxpbmVzWzE6XToKICAgICAgICAgICAgY29udGVudCA9IGxlbihsaW5lLmxzdHJpcCgpKQogICAgICAgICAgICBpZiBjb250ZW50OgogICAgICAgICAgICAgICAgaW5kZW50ID0gbGVuKGxpbmUpIC0gY29udGVudAogICAgICAgICAgICAgICAgbWFyZ2luID0gbWluKG1hcmdpbiwgaW5kZW50KQogICAgICAgICMgUmVtb3ZlIGluZGVudGF0aW9uLgogICAgICAgIGlmIGxpbmVzOgogICAgICAgICAgICBsaW5lc1swXSA9IGxpbmVzWzBdLmxzdHJpcCgpCiAgICAgICAgaWYgbWFyZ2luIDwgc3lzLm1heHNpemU6CiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEsIGxlbihsaW5lcykpOiBsaW5lc1tpXSA9IGxpbmVzW2ldW21hcmdpbjpdCiAgICAgICAgIyBSZW1vdmUgYW55IHRyYWlsaW5nIG9yIGxlYWRpbmcgYmxhbmsgbGluZXMuCiAgICAgICAgd2hpbGUgbGluZXMgYW5kIG5vdCBsaW5lc1stMV06CiAgICAgICAgICAgIGxpbmVzLnBvcCgpCiAgICAgICAgd2hpbGUgbGluZXMgYW5kIG5vdCBsaW5lc1swXToKICAgICAgICAgICAgbGluZXMucG9wKDApCiAgICAgICAgcmV0dXJuICdcbicuam9pbihsaW5lcykKCmRlZiBnZXRmaWxlKG9iamVjdCk6CiAgICAiIiJXb3JrIG91dCB3aGljaCBzb3VyY2Ugb3IgY29tcGlsZWQgZmlsZSBhbiBvYmplY3Qgd2FzIGRlZmluZWQgaW4uIiIiCiAgICBpZiBpc21vZHVsZShvYmplY3QpOgogICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAnX19maWxlX18nKToKICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5fX2ZpbGVfXwogICAgICAgIHJhaXNlIFR5cGVFcnJvcigneyFyfSBpcyBhIGJ1aWx0LWluIG1vZHVsZScuZm9ybWF0KG9iamVjdCkpCiAgICBpZiBpc2NsYXNzKG9iamVjdCk6CiAgICAgICAgb2JqZWN0ID0gc3lzLm1vZHVsZXMuZ2V0KG9iamVjdC5fX21vZHVsZV9fKQogICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAnX19maWxlX18nKToKICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5fX2ZpbGVfXwogICAgICAgIHJhaXNlIFR5cGVFcnJvcigneyFyfSBpcyBhIGJ1aWx0LWluIGNsYXNzJy5mb3JtYXQob2JqZWN0KSkKICAgIGlmIGlzbWV0aG9kKG9iamVjdCk6CiAgICAgICAgb2JqZWN0ID0gb2JqZWN0Ll9fZnVuY19fCiAgICBpZiBpc2Z1bmN0aW9uKG9iamVjdCk6CiAgICAgICAgb2JqZWN0ID0gb2JqZWN0Ll9fY29kZV9fCiAgICBpZiBpc3RyYWNlYmFjayhvYmplY3QpOgogICAgICAgIG9iamVjdCA9IG9iamVjdC50Yl9mcmFtZQogICAgaWYgaXNmcmFtZShvYmplY3QpOgogICAgICAgIG9iamVjdCA9IG9iamVjdC5mX2NvZGUKICAgIGlmIGlzY29kZShvYmplY3QpOgogICAgICAgIHJldHVybiBvYmplY3QuY29fZmlsZW5hbWUKICAgIHJhaXNlIFR5cGVFcnJvcigneyFyfSBpcyBub3QgYSBtb2R1bGUsIGNsYXNzLCBtZXRob2QsICcKICAgICAgICAgICAgICAgICAgICAnZnVuY3Rpb24sIHRyYWNlYmFjaywgZnJhbWUsIG9yIGNvZGUgb2JqZWN0Jy5mb3JtYXQob2JqZWN0KSkKCk1vZHVsZUluZm8gPSBuYW1lZHR1cGxlKCdNb2R1bGVJbmZvJywgJ25hbWUgc3VmZml4IG1vZGUgbW9kdWxlX3R5cGUnKQoKZGVmIGdldG1vZHVsZWluZm8ocGF0aCk6CiAgICAiIiJHZXQgdGhlIG1vZHVsZSBuYW1lLCBzdWZmaXgsIG1vZGUsIGFuZCBtb2R1bGUgdHlwZSBmb3IgYSBnaXZlbiBmaWxlLiIiIgogICAgd2FybmluZ3Mud2FybignaW5zcGVjdC5nZXRtb2R1bGVpbmZvKCkgaXMgZGVwcmVjYXRlZCcsIERlcHJlY2F0aW9uV2FybmluZywKICAgICAgICAgICAgICAgICAgMikKICAgIGZpbGVuYW1lID0gb3MucGF0aC5iYXNlbmFtZShwYXRoKQogICAgc3VmZml4ZXMgPSBbKC1sZW4oc3VmZml4KSwgc3VmZml4LCBtb2RlLCBtdHlwZSkKICAgICAgICAgICAgICAgICAgICBmb3Igc3VmZml4LCBtb2RlLCBtdHlwZSBpbiBpbXAuZ2V0X3N1ZmZpeGVzKCldCiAgICBzdWZmaXhlcy5zb3J0KCkgIyB0cnkgbG9uZ2VzdCBzdWZmaXhlcyBmaXJzdCwgaW4gY2FzZSB0aGV5IG92ZXJsYXAKICAgIGZvciBuZWdsZW4sIHN1ZmZpeCwgbW9kZSwgbXR5cGUgaW4gc3VmZml4ZXM6CiAgICAgICAgaWYgZmlsZW5hbWVbbmVnbGVuOl0gPT0gc3VmZml4OgogICAgICAgICAgICByZXR1cm4gTW9kdWxlSW5mbyhmaWxlbmFtZVs6bmVnbGVuXSwgc3VmZml4LCBtb2RlLCBtdHlwZSkKCmRlZiBnZXRtb2R1bGVuYW1lKHBhdGgpOgogICAgIiIiUmV0dXJuIHRoZSBtb2R1bGUgbmFtZSBmb3IgYSBnaXZlbiBmaWxlLCBvciBOb25lLiIiIgogICAgZm5hbWUgPSBvcy5wYXRoLmJhc2VuYW1lKHBhdGgpCiAgICAjIENoZWNrIGZvciBwYXRocyB0aGF0IGxvb2sgbGlrZSBhbiBhY3R1YWwgbW9kdWxlIGZpbGUKICAgIHN1ZmZpeGVzID0gWygtbGVuKHN1ZmZpeCksIHN1ZmZpeCkKICAgICAgICAgICAgICAgICAgICBmb3Igc3VmZml4IGluIGltcG9ydGxpYi5tYWNoaW5lcnkuYWxsX3N1ZmZpeGVzKCldCiAgICBzdWZmaXhlcy5zb3J0KCkgIyB0cnkgbG9uZ2VzdCBzdWZmaXhlcyBmaXJzdCwgaW4gY2FzZSB0aGV5IG92ZXJsYXAKICAgIGZvciBuZWdsZW4sIHN1ZmZpeCBpbiBzdWZmaXhlczoKICAgICAgICBpZiBmbmFtZS5lbmRzd2l0aChzdWZmaXgpOgogICAgICAgICAgICByZXR1cm4gZm5hbWVbOm5lZ2xlbl0KICAgIHJldHVybiBOb25lCgpkZWYgZ2V0c291cmNlZmlsZShvYmplY3QpOgogICAgIiIiUmV0dXJuIHRoZSBmaWxlbmFtZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGxvY2F0ZSBhbiBvYmplY3QncyBzb3VyY2UuCiAgICBSZXR1cm4gTm9uZSBpZiBubyB3YXkgY2FuIGJlIGlkZW50aWZpZWQgdG8gZ2V0IHRoZSBzb3VyY2UuCiAgICAiIiIKICAgIGZpbGVuYW1lID0gZ2V0ZmlsZShvYmplY3QpCiAgICBhbGxfYnl0ZWNvZGVfc3VmZml4ZXMgPSBpbXBvcnRsaWIubWFjaGluZXJ5LkRFQlVHX0JZVEVDT0RFX1NVRkZJWEVTWzpdCiAgICBhbGxfYnl0ZWNvZGVfc3VmZml4ZXMgKz0gaW1wb3J0bGliLm1hY2hpbmVyeS5PUFRJTUlaRURfQllURUNPREVfU1VGRklYRVNbOl0KICAgIGlmIGFueShmaWxlbmFtZS5lbmRzd2l0aChzKSBmb3IgcyBpbiBhbGxfYnl0ZWNvZGVfc3VmZml4ZXMpOgogICAgICAgIGZpbGVuYW1lID0gKG9zLnBhdGguc3BsaXRleHQoZmlsZW5hbWUpWzBdICsKICAgICAgICAgICAgICAgICAgICBpbXBvcnRsaWIubWFjaGluZXJ5LlNPVVJDRV9TVUZGSVhFU1swXSkKICAgIGVsaWYgYW55KGZpbGVuYW1lLmVuZHN3aXRoKHMpIGZvciBzIGluCiAgICAgICAgICAgICAgICAgaW1wb3J0bGliLm1hY2hpbmVyeS5FWFRFTlNJT05fU1VGRklYRVMpOgogICAgICAgIHJldHVybiBOb25lCiAgICBpZiBvcy5wYXRoLmV4aXN0cyhmaWxlbmFtZSk6CiAgICAgICAgcmV0dXJuIGZpbGVuYW1lCiAgICAjIG9ubHkgcmV0dXJuIGEgbm9uLWV4aXN0ZW50IGZpbGVuYW1lIGlmIHRoZSBtb2R1bGUgaGFzIGEgUEVQIDMwMiBsb2FkZXIKICAgIGlmIGhhc2F0dHIoZ2V0bW9kdWxlKG9iamVjdCwgZmlsZW5hbWUpLCAnX19sb2FkZXJfXycpOgogICAgICAgIHJldHVybiBmaWxlbmFtZQogICAgIyBvciBpdCBpcyBpbiB0aGUgbGluZWNhY2hlCiAgICBpZiBmaWxlbmFtZSBpbiBsaW5lY2FjaGUuY2FjaGU6CiAgICAgICAgcmV0dXJuIGZpbGVuYW1lCgpkZWYgZ2V0YWJzZmlsZShvYmplY3QsIF9maWxlbmFtZT1Ob25lKToKICAgICIiIlJldHVybiBhbiBhYnNvbHV0ZSBwYXRoIHRvIHRoZSBzb3VyY2Ugb3IgY29tcGlsZWQgZmlsZSBmb3IgYW4gb2JqZWN0LgoKICAgIFRoZSBpZGVhIGlzIGZvciBlYWNoIG9iamVjdCB0byBoYXZlIGEgdW5pcXVlIG9yaWdpbiwgc28gdGhpcyByb3V0aW5lCiAgICBub3JtYWxpemVzIHRoZSByZXN1bHQgYXMgbXVjaCBhcyBwb3NzaWJsZS4iIiIKICAgIGlmIF9maWxlbmFtZSBpcyBOb25lOgogICAgICAgIF9maWxlbmFtZSA9IGdldHNvdXJjZWZpbGUob2JqZWN0KSBvciBnZXRmaWxlKG9iamVjdCkKICAgIHJldHVybiBvcy5wYXRoLm5vcm1jYXNlKG9zLnBhdGguYWJzcGF0aChfZmlsZW5hbWUpKQoKbW9kdWxlc2J5ZmlsZSA9IHt9Cl9maWxlc2J5bW9kbmFtZSA9IHt9CgpkZWYgZ2V0bW9kdWxlKG9iamVjdCwgX2ZpbGVuYW1lPU5vbmUpOgogICAgIiIiUmV0dXJuIHRoZSBtb2R1bGUgYW4gb2JqZWN0IHdhcyBkZWZpbmVkIGluLCBvciBOb25lIGlmIG5vdCBmb3VuZC4iIiIKICAgIGlmIGlzbW9kdWxlKG9iamVjdCk6CiAgICAgICAgcmV0dXJuIG9iamVjdAogICAgaWYgaGFzYXR0cihvYmplY3QsICdfX21vZHVsZV9fJyk6CiAgICAgICAgcmV0dXJuIHN5cy5tb2R1bGVzLmdldChvYmplY3QuX19tb2R1bGVfXykKICAgICMgVHJ5IHRoZSBmaWxlbmFtZSB0byBtb2R1bGVuYW1lIGNhY2hlCiAgICBpZiBfZmlsZW5hbWUgaXMgbm90IE5vbmUgYW5kIF9maWxlbmFtZSBpbiBtb2R1bGVzYnlmaWxlOgogICAgICAgIHJldHVybiBzeXMubW9kdWxlcy5nZXQobW9kdWxlc2J5ZmlsZVtfZmlsZW5hbWVdKQogICAgIyBUcnkgdGhlIGNhY2hlIGFnYWluIHdpdGggdGhlIGFic29sdXRlIGZpbGUgbmFtZQogICAgdHJ5OgogICAgICAgIGZpbGUgPSBnZXRhYnNmaWxlKG9iamVjdCwgX2ZpbGVuYW1lKQogICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICByZXR1cm4gTm9uZQogICAgaWYgZmlsZSBpbiBtb2R1bGVzYnlmaWxlOgogICAgICAgIHJldHVybiBzeXMubW9kdWxlcy5nZXQobW9kdWxlc2J5ZmlsZVtmaWxlXSkKICAgICMgVXBkYXRlIHRoZSBmaWxlbmFtZSB0byBtb2R1bGUgbmFtZSBjYWNoZSBhbmQgY2hlY2sgeWV0IGFnYWluCiAgICAjIENvcHkgc3lzLm1vZHVsZXMgaW4gb3JkZXIgdG8gY29wZSB3aXRoIGNoYW5nZXMgd2hpbGUgaXRlcmF0aW5nCiAgICBmb3IgbW9kbmFtZSwgbW9kdWxlIGluIGxpc3Qoc3lzLm1vZHVsZXMuaXRlbXMoKSk6CiAgICAgICAgaWYgaXNtb2R1bGUobW9kdWxlKSBhbmQgaGFzYXR0cihtb2R1bGUsICdfX2ZpbGVfXycpOgogICAgICAgICAgICBmID0gbW9kdWxlLl9fZmlsZV9fCiAgICAgICAgICAgIGlmIGYgPT0gX2ZpbGVzYnltb2RuYW1lLmdldChtb2RuYW1lLCBOb25lKToKICAgICAgICAgICAgICAgICMgSGF2ZSBhbHJlYWR5IG1hcHBlZCB0aGlzIG1vZHVsZSwgc28gc2tpcCBpdAogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgX2ZpbGVzYnltb2RuYW1lW21vZG5hbWVdID0gZgogICAgICAgICAgICBmID0gZ2V0YWJzZmlsZShtb2R1bGUpCiAgICAgICAgICAgICMgQWx3YXlzIG1hcCB0byB0aGUgbmFtZSB0aGUgbW9kdWxlIGtub3dzIGl0c2VsZiBieQogICAgICAgICAgICBtb2R1bGVzYnlmaWxlW2ZdID0gbW9kdWxlc2J5ZmlsZVsKICAgICAgICAgICAgICAgIG9zLnBhdGgucmVhbHBhdGgoZildID0gbW9kdWxlLl9fbmFtZV9fCiAgICBpZiBmaWxlIGluIG1vZHVsZXNieWZpbGU6CiAgICAgICAgcmV0dXJuIHN5cy5tb2R1bGVzLmdldChtb2R1bGVzYnlmaWxlW2ZpbGVdKQogICAgIyBDaGVjayB0aGUgbWFpbiBtb2R1bGUKICAgIG1haW4gPSBzeXMubW9kdWxlc1snX19tYWluX18nXQogICAgaWYgbm90IGhhc2F0dHIob2JqZWN0LCAnX19uYW1lX18nKToKICAgICAgICByZXR1cm4gTm9uZQogICAgaWYgaGFzYXR0cihtYWluLCBvYmplY3QuX19uYW1lX18pOgogICAgICAgIG1haW5vYmplY3QgPSBnZXRhdHRyKG1haW4sIG9iamVjdC5fX25hbWVfXykKICAgICAgICBpZiBtYWlub2JqZWN0IGlzIG9iamVjdDoKICAgICAgICAgICAgcmV0dXJuIG1haW4KICAgICMgQ2hlY2sgYnVpbHRpbnMKICAgIGJ1aWx0aW4gPSBzeXMubW9kdWxlc1snYnVpbHRpbnMnXQogICAgaWYgaGFzYXR0cihidWlsdGluLCBvYmplY3QuX19uYW1lX18pOgogICAgICAgIGJ1aWx0aW5vYmplY3QgPSBnZXRhdHRyKGJ1aWx0aW4sIG9iamVjdC5fX25hbWVfXykKICAgICAgICBpZiBidWlsdGlub2JqZWN0IGlzIG9iamVjdDoKICAgICAgICAgICAgcmV0dXJuIGJ1aWx0aW4KCmRlZiBmaW5kc291cmNlKG9iamVjdCk6CiAgICAiIiJSZXR1cm4gdGhlIGVudGlyZSBzb3VyY2UgZmlsZSBhbmQgc3RhcnRpbmcgbGluZSBudW1iZXIgZm9yIGFuIG9iamVjdC4KCiAgICBUaGUgYXJndW1lbnQgbWF5IGJlIGEgbW9kdWxlLCBjbGFzcywgbWV0aG9kLCBmdW5jdGlvbiwgdHJhY2ViYWNrLCBmcmFtZSwKICAgIG9yIGNvZGUgb2JqZWN0LiAgVGhlIHNvdXJjZSBjb2RlIGlzIHJldHVybmVkIGFzIGEgbGlzdCBvZiBhbGwgdGhlIGxpbmVzCiAgICBpbiB0aGUgZmlsZSBhbmQgdGhlIGxpbmUgbnVtYmVyIGluZGV4ZXMgYSBsaW5lIGluIHRoYXQgbGlzdC4gIEFuIElPRXJyb3IKICAgIGlzIHJhaXNlZCBpZiB0aGUgc291cmNlIGNvZGUgY2Fubm90IGJlIHJldHJpZXZlZC4iIiIKCiAgICBmaWxlID0gZ2V0ZmlsZShvYmplY3QpCiAgICBzb3VyY2VmaWxlID0gZ2V0c291cmNlZmlsZShvYmplY3QpCiAgICBpZiBub3Qgc291cmNlZmlsZSBhbmQgZmlsZVswXSArIGZpbGVbLTFdICE9ICc8Pic6CiAgICAgICAgcmFpc2UgSU9FcnJvcignc291cmNlIGNvZGUgbm90IGF2YWlsYWJsZScpCiAgICBmaWxlID0gc291cmNlZmlsZSBpZiBzb3VyY2VmaWxlIGVsc2UgZmlsZQoKICAgIG1vZHVsZSA9IGdldG1vZHVsZShvYmplY3QsIGZpbGUpCiAgICBpZiBtb2R1bGU6CiAgICAgICAgbGluZXMgPSBsaW5lY2FjaGUuZ2V0bGluZXMoZmlsZSwgbW9kdWxlLl9fZGljdF9fKQogICAgZWxzZToKICAgICAgICBsaW5lcyA9IGxpbmVjYWNoZS5nZXRsaW5lcyhmaWxlKQogICAgaWYgbm90IGxpbmVzOgogICAgICAgIHJhaXNlIElPRXJyb3IoJ2NvdWxkIG5vdCBnZXQgc291cmNlIGNvZGUnKQoKICAgIGlmIGlzbW9kdWxlKG9iamVjdCk6CiAgICAgICAgcmV0dXJuIGxpbmVzLCAwCgogICAgaWYgaXNjbGFzcyhvYmplY3QpOgogICAgICAgIG5hbWUgPSBvYmplY3QuX19uYW1lX18KICAgICAgICBwYXQgPSByZS5jb21waWxlKHInXihccyopY2xhc3NccyonICsgbmFtZSArIHInXGInKQogICAgICAgICMgbWFrZSBzb21lIGVmZm9ydCB0byBmaW5kIHRoZSBiZXN0IG1hdGNoaW5nIGNsYXNzIGRlZmluaXRpb246CiAgICAgICAgIyB1c2UgdGhlIG9uZSB3aXRoIHRoZSBsZWFzdCBpbmRlbnRhdGlvbiwgd2hpY2ggaXMgdGhlIG9uZQogICAgICAgICMgdGhhdCdzIG1vc3QgcHJvYmFibHkgbm90IGluc2lkZSBhIGZ1bmN0aW9uIGRlZmluaXRpb24uCiAgICAgICAgY2FuZGlkYXRlcyA9IFtdCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKGxpbmVzKSk6CiAgICAgICAgICAgIG1hdGNoID0gcGF0Lm1hdGNoKGxpbmVzW2ldKQogICAgICAgICAgICBpZiBtYXRjaDoKICAgICAgICAgICAgICAgICMgaWYgaXQncyBhdCB0b3BsZXZlbCwgaXQncyBhbHJlYWR5IHRoZSBiZXN0IG9uZQogICAgICAgICAgICAgICAgaWYgbGluZXNbaV1bMF0gPT0gJ2MnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5lcywgaQogICAgICAgICAgICAgICAgIyBlbHNlIGFkZCB3aGl0ZXNwYWNlIHRvIGNhbmRpZGF0ZSBsaXN0CiAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLmFwcGVuZCgobWF0Y2guZ3JvdXAoMSksIGkpKQogICAgICAgIGlmIGNhbmRpZGF0ZXM6CiAgICAgICAgICAgICMgdGhpcyB3aWxsIHNvcnQgYnkgd2hpdGVzcGFjZSwgYW5kIGJ5IGxpbmUgbnVtYmVyLAogICAgICAgICAgICAjIGxlc3Mgd2hpdGVzcGFjZSBmaXJzdAogICAgICAgICAgICBjYW5kaWRhdGVzLnNvcnQoKQogICAgICAgICAgICByZXR1cm4gbGluZXMsIGNhbmRpZGF0ZXNbMF1bMV0KICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBJT0Vycm9yKCdjb3VsZCBub3QgZmluZCBjbGFzcyBkZWZpbml0aW9uJykKCiAgICBpZiBpc21ldGhvZChvYmplY3QpOgogICAgICAgIG9iamVjdCA9IG9iamVjdC5fX2Z1bmNfXwogICAgaWYgaXNmdW5jdGlvbihvYmplY3QpOgogICAgICAgIG9iamVjdCA9IG9iamVjdC5fX2NvZGVfXwogICAgaWYgaXN0cmFjZWJhY2sob2JqZWN0KToKICAgICAgICBvYmplY3QgPSBvYmplY3QudGJfZnJhbWUKICAgIGlmIGlzZnJhbWUob2JqZWN0KToKICAgICAgICBvYmplY3QgPSBvYmplY3QuZl9jb2RlCiAgICBpZiBpc2NvZGUob2JqZWN0KToKICAgICAgICBpZiBub3QgaGFzYXR0cihvYmplY3QsICdjb19maXJzdGxpbmVubycpOgogICAgICAgICAgICByYWlzZSBJT0Vycm9yKCdjb3VsZCBub3QgZmluZCBmdW5jdGlvbiBkZWZpbml0aW9uJykKICAgICAgICBsbnVtID0gb2JqZWN0LmNvX2ZpcnN0bGluZW5vIC0gMQogICAgICAgIHBhdCA9IHJlLmNvbXBpbGUocideKFxzKmRlZlxzKXwoLiooPzwhXHcpbGFtYmRhKDp8XHMpKXxeKFxzKkApJykKICAgICAgICB3aGlsZSBsbnVtID4gMDoKICAgICAgICAgICAgaWYgcGF0Lm1hdGNoKGxpbmVzW2xudW1dKTogYnJlYWsKICAgICAgICAgICAgbG51bSA9IGxudW0gLSAxCiAgICAgICAgcmV0dXJuIGxpbmVzLCBsbnVtCiAgICByYWlzZSBJT0Vycm9yKCdjb3VsZCBub3QgZmluZCBjb2RlIG9iamVjdCcpCgpkZWYgZ2V0Y29tbWVudHMob2JqZWN0KToKICAgICIiIkdldCBsaW5lcyBvZiBjb21tZW50cyBpbW1lZGlhdGVseSBwcmVjZWRpbmcgYW4gb2JqZWN0J3Mgc291cmNlIGNvZGUuCgogICAgUmV0dXJucyBOb25lIHdoZW4gc291cmNlIGNhbid0IGJlIGZvdW5kLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgbGluZXMsIGxudW0gPSBmaW5kc291cmNlKG9iamVjdCkKICAgIGV4Y2VwdCAoSU9FcnJvciwgVHlwZUVycm9yKToKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGlmIGlzbW9kdWxlKG9iamVjdCk6CiAgICAgICAgIyBMb29rIGZvciBhIGNvbW1lbnQgYmxvY2sgYXQgdGhlIHRvcCBvZiB0aGUgZmlsZS4KICAgICAgICBzdGFydCA9IDAKICAgICAgICBpZiBsaW5lcyBhbmQgbGluZXNbMF1bOjJdID09ICcjISc6IHN0YXJ0ID0gMQogICAgICAgIHdoaWxlIHN0YXJ0IDwgbGVuKGxpbmVzKSBhbmQgbGluZXNbc3RhcnRdLnN0cmlwKCkgaW4gKCcnLCAnIycpOgogICAgICAgICAgICBzdGFydCA9IHN0YXJ0ICsgMQogICAgICAgIGlmIHN0YXJ0IDwgbGVuKGxpbmVzKSBhbmQgbGluZXNbc3RhcnRdWzoxXSA9PSAnIyc6CiAgICAgICAgICAgIGNvbW1lbnRzID0gW10KICAgICAgICAgICAgZW5kID0gc3RhcnQKICAgICAgICAgICAgd2hpbGUgZW5kIDwgbGVuKGxpbmVzKSBhbmQgbGluZXNbZW5kXVs6MV0gPT0gJyMnOgogICAgICAgICAgICAgICAgY29tbWVudHMuYXBwZW5kKGxpbmVzW2VuZF0uZXhwYW5kdGFicygpKQogICAgICAgICAgICAgICAgZW5kID0gZW5kICsgMQogICAgICAgICAgICByZXR1cm4gJycuam9pbihjb21tZW50cykKCiAgICAjIExvb2sgZm9yIGEgcHJlY2VkaW5nIGJsb2NrIG9mIGNvbW1lbnRzIGF0IHRoZSBzYW1lIGluZGVudGF0aW9uLgogICAgZWxpZiBsbnVtID4gMDoKICAgICAgICBpbmRlbnQgPSBpbmRlbnRzaXplKGxpbmVzW2xudW1dKQogICAgICAgIGVuZCA9IGxudW0gLSAxCiAgICAgICAgaWYgZW5kID49IDAgYW5kIGxpbmVzW2VuZF0ubHN0cmlwKClbOjFdID09ICcjJyBhbmQgXAogICAgICAgICAgICBpbmRlbnRzaXplKGxpbmVzW2VuZF0pID09IGluZGVudDoKICAgICAgICAgICAgY29tbWVudHMgPSBbbGluZXNbZW5kXS5leHBhbmR0YWJzKCkubHN0cmlwKCldCiAgICAgICAgICAgIGlmIGVuZCA+IDA6CiAgICAgICAgICAgICAgICBlbmQgPSBlbmQgLSAxCiAgICAgICAgICAgICAgICBjb21tZW50ID0gbGluZXNbZW5kXS5leHBhbmR0YWJzKCkubHN0cmlwKCkKICAgICAgICAgICAgICAgIHdoaWxlIGNvbW1lbnRbOjFdID09ICcjJyBhbmQgaW5kZW50c2l6ZShsaW5lc1tlbmRdKSA9PSBpbmRlbnQ6CiAgICAgICAgICAgICAgICAgICAgY29tbWVudHNbOjBdID0gW2NvbW1lbnRdCiAgICAgICAgICAgICAgICAgICAgZW5kID0gZW5kIC0gMQogICAgICAgICAgICAgICAgICAgIGlmIGVuZCA8IDA6IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgY29tbWVudCA9IGxpbmVzW2VuZF0uZXhwYW5kdGFicygpLmxzdHJpcCgpCiAgICAgICAgICAgIHdoaWxlIGNvbW1lbnRzIGFuZCBjb21tZW50c1swXS5zdHJpcCgpID09ICcjJzoKICAgICAgICAgICAgICAgIGNvbW1lbnRzWzoxXSA9IFtdCiAgICAgICAgICAgIHdoaWxlIGNvbW1lbnRzIGFuZCBjb21tZW50c1stMV0uc3RyaXAoKSA9PSAnIyc6CiAgICAgICAgICAgICAgICBjb21tZW50c1stMTpdID0gW10KICAgICAgICAgICAgcmV0dXJuICcnLmpvaW4oY29tbWVudHMpCgpjbGFzcyBFbmRPZkJsb2NrKEV4Y2VwdGlvbik6IHBhc3MKCmNsYXNzIEJsb2NrRmluZGVyOgogICAgIiIiUHJvdmlkZSBhIHRva2VuZWF0ZXIoKSBtZXRob2QgdG8gZGV0ZWN0IHRoZSBlbmQgb2YgYSBjb2RlIGJsb2NrLiIiIgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuaW5kZW50ID0gMAogICAgICAgIHNlbGYuaXNsYW1iZGEgPSBGYWxzZQogICAgICAgIHNlbGYuc3RhcnRlZCA9IEZhbHNlCiAgICAgICAgc2VsZi5wYXNzbGluZSA9IEZhbHNlCiAgICAgICAgc2VsZi5sYXN0ID0gMQoKICAgIGRlZiB0b2tlbmVhdGVyKHNlbGYsIHR5cGUsIHRva2VuLCBzcm93Y29sLCBlcm93Y29sLCBsaW5lKToKICAgICAgICBpZiBub3Qgc2VsZi5zdGFydGVkOgogICAgICAgICAgICAjIGxvb2sgZm9yIHRoZSBmaXJzdCAiZGVmIiwgImNsYXNzIiBvciAibGFtYmRhIgogICAgICAgICAgICBpZiB0b2tlbiBpbiAoImRlZiIsICJjbGFzcyIsICJsYW1iZGEiKToKICAgICAgICAgICAgICAgIGlmIHRva2VuID09ICJsYW1iZGEiOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaXNsYW1iZGEgPSBUcnVlCiAgICAgICAgICAgICAgICBzZWxmLnN0YXJ0ZWQgPSBUcnVlCiAgICAgICAgICAgIHNlbGYucGFzc2xpbmUgPSBUcnVlICAgICMgc2tpcCB0byB0aGUgZW5kIG9mIHRoZSBsaW5lCiAgICAgICAgZWxpZiB0eXBlID09IHRva2VuaXplLk5FV0xJTkU6CiAgICAgICAgICAgIHNlbGYucGFzc2xpbmUgPSBGYWxzZSAgICMgc3RvcCBza2lwcGluZyB3aGVuIGEgTkVXTElORSBpcyBzZWVuCiAgICAgICAgICAgIHNlbGYubGFzdCA9IHNyb3djb2xbMF0KICAgICAgICAgICAgaWYgc2VsZi5pc2xhbWJkYTogICAgICAgIyBsYW1iZGFzIGFsd2F5cyBlbmQgYXQgdGhlIGZpcnN0IE5FV0xJTkUKICAgICAgICAgICAgICAgIHJhaXNlIEVuZE9mQmxvY2sKICAgICAgICBlbGlmIHNlbGYucGFzc2xpbmU6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBlbGlmIHR5cGUgPT0gdG9rZW5pemUuSU5ERU5UOgogICAgICAgICAgICBzZWxmLmluZGVudCA9IHNlbGYuaW5kZW50ICsgMQogICAgICAgICAgICBzZWxmLnBhc3NsaW5lID0gVHJ1ZQogICAgICAgIGVsaWYgdHlwZSA9PSB0b2tlbml6ZS5ERURFTlQ6CiAgICAgICAgICAgIHNlbGYuaW5kZW50ID0gc2VsZi5pbmRlbnQgLSAxCiAgICAgICAgICAgICMgdGhlIGVuZCBvZiBtYXRjaGluZyBpbmRlbnQvZGVkZW50IHBhaXJzIGVuZCBhIGJsb2NrCiAgICAgICAgICAgICMgKG5vdGUgdGhhdCB0aGlzIG9ubHkgd29ya3MgZm9yICJkZWYiLyJjbGFzcyIgYmxvY2tzLAogICAgICAgICAgICAjICBub3QgZS5nLiBmb3IgImlmOiBlbHNlOiIgb3IgInRyeTogZmluYWxseToiIGJsb2NrcykKICAgICAgICAgICAgaWYgc2VsZi5pbmRlbnQgPD0gMDoKICAgICAgICAgICAgICAgIHJhaXNlIEVuZE9mQmxvY2sKICAgICAgICBlbGlmIHNlbGYuaW5kZW50ID09IDAgYW5kIHR5cGUgbm90IGluICh0b2tlbml6ZS5DT01NRU5ULCB0b2tlbml6ZS5OTCk6CiAgICAgICAgICAgICMgYW55IG90aGVyIHRva2VuIG9uIHRoZSBzYW1lIGluZGVudGF0aW9uIGxldmVsIGVuZCB0aGUgcHJldmlvdXMKICAgICAgICAgICAgIyBibG9jayBhcyB3ZWxsLCBleGNlcHQgdGhlIHBzZXVkby10b2tlbnMgQ09NTUVOVCBhbmQgTkwuCiAgICAgICAgICAgIHJhaXNlIEVuZE9mQmxvY2sKCmRlZiBnZXRibG9jayhsaW5lcyk6CiAgICAiIiJFeHRyYWN0IHRoZSBibG9jayBvZiBjb2RlIGF0IHRoZSB0b3Agb2YgdGhlIGdpdmVuIGxpc3Qgb2YgbGluZXMuIiIiCiAgICBibG9ja2ZpbmRlciA9IEJsb2NrRmluZGVyKCkKICAgIHRyeToKICAgICAgICB0b2tlbnMgPSB0b2tlbml6ZS5nZW5lcmF0ZV90b2tlbnMoaXRlcihsaW5lcykuX19uZXh0X18pCiAgICAgICAgZm9yIF90b2tlbiBpbiB0b2tlbnM6CiAgICAgICAgICAgIGJsb2NrZmluZGVyLnRva2VuZWF0ZXIoKl90b2tlbikKICAgIGV4Y2VwdCAoRW5kT2ZCbG9jaywgSW5kZW50YXRpb25FcnJvcik6CiAgICAgICAgcGFzcwogICAgcmV0dXJuIGxpbmVzWzpibG9ja2ZpbmRlci5sYXN0XQoKZGVmIGdldHNvdXJjZWxpbmVzKG9iamVjdCk6CiAgICAiIiJSZXR1cm4gYSBsaXN0IG9mIHNvdXJjZSBsaW5lcyBhbmQgc3RhcnRpbmcgbGluZSBudW1iZXIgZm9yIGFuIG9iamVjdC4KCiAgICBUaGUgYXJndW1lbnQgbWF5IGJlIGEgbW9kdWxlLCBjbGFzcywgbWV0aG9kLCBmdW5jdGlvbiwgdHJhY2ViYWNrLCBmcmFtZSwKICAgIG9yIGNvZGUgb2JqZWN0LiAgVGhlIHNvdXJjZSBjb2RlIGlzIHJldHVybmVkIGFzIGEgbGlzdCBvZiB0aGUgbGluZXMKICAgIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9iamVjdCBhbmQgdGhlIGxpbmUgbnVtYmVyIGluZGljYXRlcyB3aGVyZSBpbiB0aGUKICAgIG9yaWdpbmFsIHNvdXJjZSBmaWxlIHRoZSBmaXJzdCBsaW5lIG9mIGNvZGUgd2FzIGZvdW5kLiAgQW4gSU9FcnJvciBpcwogICAgcmFpc2VkIGlmIHRoZSBzb3VyY2UgY29kZSBjYW5ub3QgYmUgcmV0cmlldmVkLiIiIgogICAgbGluZXMsIGxudW0gPSBmaW5kc291cmNlKG9iamVjdCkKCiAgICBpZiBpc21vZHVsZShvYmplY3QpOiByZXR1cm4gbGluZXMsIDAKICAgIGVsc2U6IHJldHVybiBnZXRibG9jayhsaW5lc1tsbnVtOl0pLCBsbnVtICsgMQoKZGVmIGdldHNvdXJjZShvYmplY3QpOgogICAgIiIiUmV0dXJuIHRoZSB0ZXh0IG9mIHRoZSBzb3VyY2UgY29kZSBmb3IgYW4gb2JqZWN0LgoKICAgIFRoZSBhcmd1bWVudCBtYXkgYmUgYSBtb2R1bGUsIGNsYXNzLCBtZXRob2QsIGZ1bmN0aW9uLCB0cmFjZWJhY2ssIGZyYW1lLAogICAgb3IgY29kZSBvYmplY3QuICBUaGUgc291cmNlIGNvZGUgaXMgcmV0dXJuZWQgYXMgYSBzaW5nbGUgc3RyaW5nLiAgQW4KICAgIElPRXJyb3IgaXMgcmFpc2VkIGlmIHRoZSBzb3VyY2UgY29kZSBjYW5ub3QgYmUgcmV0cmlldmVkLiIiIgogICAgbGluZXMsIGxudW0gPSBnZXRzb3VyY2VsaW5lcyhvYmplY3QpCiAgICByZXR1cm4gJycuam9pbihsaW5lcykKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGNsYXNzIHRyZWUgZXh0cmFjdGlvbgpkZWYgd2Fsa3RyZWUoY2xhc3NlcywgY2hpbGRyZW4sIHBhcmVudCk6CiAgICAiIiJSZWN1cnNpdmUgaGVscGVyIGZ1bmN0aW9uIGZvciBnZXRjbGFzc3RyZWUoKS4iIiIKICAgIHJlc3VsdHMgPSBbXQogICAgY2xhc3Nlcy5zb3J0KGtleT1hdHRyZ2V0dGVyKCdfX21vZHVsZV9fJywgJ19fbmFtZV9fJykpCiAgICBmb3IgYyBpbiBjbGFzc2VzOgogICAgICAgIHJlc3VsdHMuYXBwZW5kKChjLCBjLl9fYmFzZXNfXykpCiAgICAgICAgaWYgYyBpbiBjaGlsZHJlbjoKICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQod2Fsa3RyZWUoY2hpbGRyZW5bY10sIGNoaWxkcmVuLCBjKSkKICAgIHJldHVybiByZXN1bHRzCgpkZWYgZ2V0Y2xhc3N0cmVlKGNsYXNzZXMsIHVuaXF1ZT1GYWxzZSk6CiAgICAiIiJBcnJhbmdlIHRoZSBnaXZlbiBsaXN0IG9mIGNsYXNzZXMgaW50byBhIGhpZXJhcmNoeSBvZiBuZXN0ZWQgbGlzdHMuCgogICAgV2hlcmUgYSBuZXN0ZWQgbGlzdCBhcHBlYXJzLCBpdCBjb250YWlucyBjbGFzc2VzIGRlcml2ZWQgZnJvbSB0aGUgY2xhc3MKICAgIHdob3NlIGVudHJ5IGltbWVkaWF0ZWx5IHByZWNlZGVzIHRoZSBsaXN0LiAgRWFjaCBlbnRyeSBpcyBhIDItdHVwbGUKICAgIGNvbnRhaW5pbmcgYSBjbGFzcyBhbmQgYSB0dXBsZSBvZiBpdHMgYmFzZSBjbGFzc2VzLiAgSWYgdGhlICd1bmlxdWUnCiAgICBhcmd1bWVudCBpcyB0cnVlLCBleGFjdGx5IG9uZSBlbnRyeSBhcHBlYXJzIGluIHRoZSByZXR1cm5lZCBzdHJ1Y3R1cmUKICAgIGZvciBlYWNoIGNsYXNzIGluIHRoZSBnaXZlbiBsaXN0LiAgT3RoZXJ3aXNlLCBjbGFzc2VzIHVzaW5nIG11bHRpcGxlCiAgICBpbmhlcml0YW5jZSBhbmQgdGhlaXIgZGVzY2VuZGFudHMgd2lsbCBhcHBlYXIgbXVsdGlwbGUgdGltZXMuIiIiCiAgICBjaGlsZHJlbiA9IHt9CiAgICByb290cyA9IFtdCiAgICBmb3IgYyBpbiBjbGFzc2VzOgogICAgICAgIGlmIGMuX19iYXNlc19fOgogICAgICAgICAgICBmb3IgcGFyZW50IGluIGMuX19iYXNlc19fOgogICAgICAgICAgICAgICAgaWYgbm90IHBhcmVudCBpbiBjaGlsZHJlbjoKICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbltwYXJlbnRdID0gW10KICAgICAgICAgICAgICAgIGNoaWxkcmVuW3BhcmVudF0uYXBwZW5kKGMpCiAgICAgICAgICAgICAgICBpZiB1bmlxdWUgYW5kIHBhcmVudCBpbiBjbGFzc2VzOiBicmVhawogICAgICAgIGVsaWYgYyBub3QgaW4gcm9vdHM6CiAgICAgICAgICAgIHJvb3RzLmFwcGVuZChjKQogICAgZm9yIHBhcmVudCBpbiBjaGlsZHJlbjoKICAgICAgICBpZiBwYXJlbnQgbm90IGluIGNsYXNzZXM6CiAgICAgICAgICAgIHJvb3RzLmFwcGVuZChwYXJlbnQpCiAgICByZXR1cm4gd2Fsa3RyZWUocm9vdHMsIGNoaWxkcmVuLCBOb25lKQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gYXJndW1lbnQgbGlzdCBleHRyYWN0aW9uCkFyZ3VtZW50cyA9IG5hbWVkdHVwbGUoJ0FyZ3VtZW50cycsICdhcmdzLCB2YXJhcmdzLCB2YXJrdycpCgpkZWYgZ2V0YXJncyhjbyk6CiAgICAiIiJHZXQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGFyZ3VtZW50cyBhY2NlcHRlZCBieSBhIGNvZGUgb2JqZWN0LgoKICAgIFRocmVlIHRoaW5ncyBhcmUgcmV0dXJuZWQ6IChhcmdzLCB2YXJhcmdzLCB2YXJrdyksIHdoZXJlCiAgICAnYXJncycgaXMgdGhlIGxpc3Qgb2YgYXJndW1lbnQgbmFtZXMuIEtleXdvcmQtb25seSBhcmd1bWVudHMgYXJlCiAgICBhcHBlbmRlZC4gJ3ZhcmFyZ3MnIGFuZCAndmFya3cnIGFyZSB0aGUgbmFtZXMgb2YgdGhlICogYW5kICoqCiAgICBhcmd1bWVudHMgb3IgTm9uZS4iIiIKICAgIGFyZ3MsIHZhcmFyZ3MsIGt3b25seWFyZ3MsIHZhcmt3ID0gX2dldGZ1bGxhcmdzKGNvKQogICAgcmV0dXJuIEFyZ3VtZW50cyhhcmdzICsga3dvbmx5YXJncywgdmFyYXJncywgdmFya3cpCgpkZWYgX2dldGZ1bGxhcmdzKGNvKToKICAgICIiIkdldCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYXJndW1lbnRzIGFjY2VwdGVkIGJ5IGEgY29kZSBvYmplY3QuCgogICAgRm91ciB0aGluZ3MgYXJlIHJldHVybmVkOiAoYXJncywgdmFyYXJncywga3dvbmx5YXJncywgdmFya3cpLCB3aGVyZQogICAgJ2FyZ3MnIGFuZCAna3dvbmx5YXJncycgYXJlIGxpc3RzIG9mIGFyZ3VtZW50IG5hbWVzLCBhbmQgJ3ZhcmFyZ3MnCiAgICBhbmQgJ3Zhcmt3JyBhcmUgdGhlIG5hbWVzIG9mIHRoZSAqIGFuZCAqKiBhcmd1bWVudHMgb3IgTm9uZS4iIiIKCiAgICBpZiBub3QgaXNjb2RlKGNvKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ3shcn0gaXMgbm90IGEgY29kZSBvYmplY3QnLmZvcm1hdChjbykpCgogICAgbmFyZ3MgPSBjby5jb19hcmdjb3VudAogICAgbmFtZXMgPSBjby5jb192YXJuYW1lcwogICAgbmt3YXJncyA9IGNvLmNvX2t3b25seWFyZ2NvdW50CiAgICBhcmdzID0gbGlzdChuYW1lc1s6bmFyZ3NdKQogICAga3dvbmx5YXJncyA9IGxpc3QobmFtZXNbbmFyZ3M6bmFyZ3Mrbmt3YXJnc10pCiAgICBzdGVwID0gMAoKICAgIG5hcmdzICs9IG5rd2FyZ3MKICAgIHZhcmFyZ3MgPSBOb25lCiAgICBpZiBjby5jb19mbGFncyAmIENPX1ZBUkFSR1M6CiAgICAgICAgdmFyYXJncyA9IGNvLmNvX3Zhcm5hbWVzW25hcmdzXQogICAgICAgIG5hcmdzID0gbmFyZ3MgKyAxCiAgICB2YXJrdyA9IE5vbmUKICAgIGlmIGNvLmNvX2ZsYWdzICYgQ09fVkFSS0VZV09SRFM6CiAgICAgICAgdmFya3cgPSBjby5jb192YXJuYW1lc1tuYXJnc10KICAgIHJldHVybiBhcmdzLCB2YXJhcmdzLCBrd29ubHlhcmdzLCB2YXJrdwoKCkFyZ1NwZWMgPSBuYW1lZHR1cGxlKCdBcmdTcGVjJywgJ2FyZ3MgdmFyYXJncyBrZXl3b3JkcyBkZWZhdWx0cycpCgpkZWYgZ2V0YXJnc3BlYyhmdW5jKToKICAgICIiIkdldCB0aGUgbmFtZXMgYW5kIGRlZmF1bHQgdmFsdWVzIG9mIGEgZnVuY3Rpb24ncyBhcmd1bWVudHMuCgogICAgQSB0dXBsZSBvZiBmb3VyIHRoaW5ncyBpcyByZXR1cm5lZDogKGFyZ3MsIHZhcmFyZ3MsIHZhcmt3LCBkZWZhdWx0cykuCiAgICAnYXJncycgaXMgYSBsaXN0IG9mIHRoZSBhcmd1bWVudCBuYW1lcy4KICAgICdhcmdzJyB3aWxsIGluY2x1ZGUga2V5d29yZC1vbmx5IGFyZ3VtZW50IG5hbWVzLgogICAgJ3ZhcmFyZ3MnIGFuZCAndmFya3cnIGFyZSB0aGUgbmFtZXMgb2YgdGhlICogYW5kICoqIGFyZ3VtZW50cyBvciBOb25lLgogICAgJ2RlZmF1bHRzJyBpcyBhbiBuLXR1cGxlIG9mIHRoZSBkZWZhdWx0IHZhbHVlcyBvZiB0aGUgbGFzdCBuIGFyZ3VtZW50cy4KCiAgICBVc2UgdGhlIGdldGZ1bGxhcmdzcGVjKCkgQVBJIGZvciBQeXRob24tMzAwMCBjb2RlLCBhcyBhbm5vdGF0aW9ucwogICAgYW5kIGtleXdvcmQgYXJndW1lbnRzIGFyZSBzdXBwb3J0ZWQuIGdldGFyZ3NwZWMoKSB3aWxsIHJhaXNlIFZhbHVlRXJyb3IKICAgIGlmIHRoZSBmdW5jIGhhcyBlaXRoZXIgYW5ub3RhdGlvbnMgb3Iga2V5d29yZCBhcmd1bWVudHMuCiAgICAiIiIKCiAgICBhcmdzLCB2YXJhcmdzLCB2YXJrdywgZGVmYXVsdHMsIGt3b25seWFyZ3MsIGt3b25seWRlZmF1bHRzLCBhbm4gPSBcCiAgICAgICAgZ2V0ZnVsbGFyZ3NwZWMoZnVuYykKICAgIGlmIGt3b25seWFyZ3Mgb3IgYW5uOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkZ1bmN0aW9uIGhhcyBrZXl3b3JkLW9ubHkgYXJndW1lbnRzIG9yIGFubm90YXRpb25zIgogICAgICAgICAgICAgICAgICAgICAgICAgIiwgdXNlIGdldGZ1bGxhcmdzcGVjKCkgQVBJIHdoaWNoIGNhbiBzdXBwb3J0IHRoZW0iKQogICAgcmV0dXJuIEFyZ1NwZWMoYXJncywgdmFyYXJncywgdmFya3csIGRlZmF1bHRzKQoKRnVsbEFyZ1NwZWMgPSBuYW1lZHR1cGxlKCdGdWxsQXJnU3BlYycsCiAgICAnYXJncywgdmFyYXJncywgdmFya3csIGRlZmF1bHRzLCBrd29ubHlhcmdzLCBrd29ubHlkZWZhdWx0cywgYW5ub3RhdGlvbnMnKQoKZGVmIGdldGZ1bGxhcmdzcGVjKGZ1bmMpOgogICAgIiIiR2V0IHRoZSBuYW1lcyBhbmQgZGVmYXVsdCB2YWx1ZXMgb2YgYSBmdW5jdGlvbidzIGFyZ3VtZW50cy4KCiAgICBBIHR1cGxlIG9mIHNldmVuIHRoaW5ncyBpcyByZXR1cm5lZDoKICAgIChhcmdzLCB2YXJhcmdzLCB2YXJrdywgZGVmYXVsdHMsIGt3b25seWFyZ3MsIGt3b25seWRlZmF1bHRzIGFubm90YXRpb25zKS4KICAgICdhcmdzJyBpcyBhIGxpc3Qgb2YgdGhlIGFyZ3VtZW50IG5hbWVzLgogICAgJ3ZhcmFyZ3MnIGFuZCAndmFya3cnIGFyZSB0aGUgbmFtZXMgb2YgdGhlICogYW5kICoqIGFyZ3VtZW50cyBvciBOb25lLgogICAgJ2RlZmF1bHRzJyBpcyBhbiBuLXR1cGxlIG9mIHRoZSBkZWZhdWx0IHZhbHVlcyBvZiB0aGUgbGFzdCBuIGFyZ3VtZW50cy4KICAgICdrd29ubHlhcmdzJyBpcyBhIGxpc3Qgb2Yga2V5d29yZC1vbmx5IGFyZ3VtZW50IG5hbWVzLgogICAgJ2t3b25seWRlZmF1bHRzJyBpcyBhIGRpY3Rpb25hcnkgbWFwcGluZyBuYW1lcyBmcm9tIGt3b25seWFyZ3MgdG8gZGVmYXVsdHMuCiAgICAnYW5ub3RhdGlvbnMnIGlzIGEgZGljdGlvbmFyeSBtYXBwaW5nIGFyZ3VtZW50IG5hbWVzIHRvIGFubm90YXRpb25zLgoKICAgIFRoZSBmaXJzdCBmb3VyIGl0ZW1zIGluIHRoZSB0dXBsZSBjb3JyZXNwb25kIHRvIGdldGFyZ3NwZWMoKS4KICAgICIiIgoKICAgIGlmIGlzbWV0aG9kKGZ1bmMpOgogICAgICAgIGZ1bmMgPSBmdW5jLl9fZnVuY19fCiAgICBpZiBub3QgaXNmdW5jdGlvbihmdW5jKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ3shcn0gaXMgbm90IGEgUHl0aG9uIGZ1bmN0aW9uJy5mb3JtYXQoZnVuYykpCiAgICBhcmdzLCB2YXJhcmdzLCBrd29ubHlhcmdzLCB2YXJrdyA9IF9nZXRmdWxsYXJncyhmdW5jLl9fY29kZV9fKQogICAgcmV0dXJuIEZ1bGxBcmdTcGVjKGFyZ3MsIHZhcmFyZ3MsIHZhcmt3LCBmdW5jLl9fZGVmYXVsdHNfXywKICAgICAgICAgICAga3dvbmx5YXJncywgZnVuYy5fX2t3ZGVmYXVsdHNfXywgZnVuYy5fX2Fubm90YXRpb25zX18pCgpBcmdJbmZvID0gbmFtZWR0dXBsZSgnQXJnSW5mbycsICdhcmdzIHZhcmFyZ3Mga2V5d29yZHMgbG9jYWxzJykKCmRlZiBnZXRhcmd2YWx1ZXMoZnJhbWUpOgogICAgIiIiR2V0IGluZm9ybWF0aW9uIGFib3V0IGFyZ3VtZW50cyBwYXNzZWQgaW50byBhIHBhcnRpY3VsYXIgZnJhbWUuCgogICAgQSB0dXBsZSBvZiBmb3VyIHRoaW5ncyBpcyByZXR1cm5lZDogKGFyZ3MsIHZhcmFyZ3MsIHZhcmt3LCBsb2NhbHMpLgogICAgJ2FyZ3MnIGlzIGEgbGlzdCBvZiB0aGUgYXJndW1lbnQgbmFtZXMuCiAgICAndmFyYXJncycgYW5kICd2YXJrdycgYXJlIHRoZSBuYW1lcyBvZiB0aGUgKiBhbmQgKiogYXJndW1lbnRzIG9yIE5vbmUuCiAgICAnbG9jYWxzJyBpcyB0aGUgbG9jYWxzIGRpY3Rpb25hcnkgb2YgdGhlIGdpdmVuIGZyYW1lLiIiIgogICAgYXJncywgdmFyYXJncywgdmFya3cgPSBnZXRhcmdzKGZyYW1lLmZfY29kZSkKICAgIHJldHVybiBBcmdJbmZvKGFyZ3MsIHZhcmFyZ3MsIHZhcmt3LCBmcmFtZS5mX2xvY2FscykKCmRlZiBmb3JtYXRhbm5vdGF0aW9uKGFubm90YXRpb24sIGJhc2VfbW9kdWxlPU5vbmUpOgogICAgaWYgaXNpbnN0YW5jZShhbm5vdGF0aW9uLCB0eXBlKToKICAgICAgICBpZiBhbm5vdGF0aW9uLl9fbW9kdWxlX18gaW4gKCdidWlsdGlucycsIGJhc2VfbW9kdWxlKToKICAgICAgICAgICAgcmV0dXJuIGFubm90YXRpb24uX19uYW1lX18KICAgICAgICByZXR1cm4gYW5ub3RhdGlvbi5fX21vZHVsZV9fKycuJythbm5vdGF0aW9uLl9fbmFtZV9fCiAgICByZXR1cm4gcmVwcihhbm5vdGF0aW9uKQoKZGVmIGZvcm1hdGFubm90YXRpb25yZWxhdGl2ZXRvKG9iamVjdCk6CiAgICBtb2R1bGUgPSBnZXRhdHRyKG9iamVjdCwgJ19fbW9kdWxlX18nLCBOb25lKQogICAgZGVmIF9mb3JtYXRhbm5vdGF0aW9uKGFubm90YXRpb24pOgogICAgICAgIHJldHVybiBmb3JtYXRhbm5vdGF0aW9uKGFubm90YXRpb24sIG1vZHVsZSkKICAgIHJldHVybiBfZm9ybWF0YW5ub3RhdGlvbgoKZGVmIGZvcm1hdGFyZ3NwZWMoYXJncywgdmFyYXJncz1Ob25lLCB2YXJrdz1Ob25lLCBkZWZhdWx0cz1Ob25lLAogICAgICAgICAgICAgICAgICBrd29ubHlhcmdzPSgpLCBrd29ubHlkZWZhdWx0cz17fSwgYW5ub3RhdGlvbnM9e30sCiAgICAgICAgICAgICAgICAgIGZvcm1hdGFyZz1zdHIsCiAgICAgICAgICAgICAgICAgIGZvcm1hdHZhcmFyZ3M9bGFtYmRhIG5hbWU6ICcqJyArIG5hbWUsCiAgICAgICAgICAgICAgICAgIGZvcm1hdHZhcmt3PWxhbWJkYSBuYW1lOiAnKionICsgbmFtZSwKICAgICAgICAgICAgICAgICAgZm9ybWF0dmFsdWU9bGFtYmRhIHZhbHVlOiAnPScgKyByZXByKHZhbHVlKSwKICAgICAgICAgICAgICAgICAgZm9ybWF0cmV0dXJucz1sYW1iZGEgdGV4dDogJyAtPiAnICsgdGV4dCwKICAgICAgICAgICAgICAgICAgZm9ybWF0YW5ub3RhdGlvbj1mb3JtYXRhbm5vdGF0aW9uKToKICAgICIiIkZvcm1hdCBhbiBhcmd1bWVudCBzcGVjIGZyb20gdGhlIHZhbHVlcyByZXR1cm5lZCBieSBnZXRhcmdzcGVjCiAgICBvciBnZXRmdWxsYXJnc3BlYy4KCiAgICBUaGUgZmlyc3Qgc2V2ZW4gYXJndW1lbnRzIGFyZSAoYXJncywgdmFyYXJncywgdmFya3csIGRlZmF1bHRzLAogICAga3dvbmx5YXJncywga3dvbmx5ZGVmYXVsdHMsIGFubm90YXRpb25zKS4gIFRoZSBvdGhlciBmaXZlIGFyZ3VtZW50cwogICAgYXJlIHRoZSBjb3JyZXNwb25kaW5nIG9wdGlvbmFsIGZvcm1hdHRpbmcgZnVuY3Rpb25zIHRoYXQgYXJlIGNhbGxlZCB0bwogICAgdHVybiBuYW1lcyBhbmQgdmFsdWVzIGludG8gc3RyaW5ncy4gIFRoZSBsYXN0IGFyZ3VtZW50IGlzIGFuIG9wdGlvbmFsCiAgICBmdW5jdGlvbiB0byBmb3JtYXQgdGhlIHNlcXVlbmNlIG9mIGFyZ3VtZW50cy4iIiIKICAgIGRlZiBmb3JtYXRhcmdhbmRhbm5vdGF0aW9uKGFyZyk6CiAgICAgICAgcmVzdWx0ID0gZm9ybWF0YXJnKGFyZykKICAgICAgICBpZiBhcmcgaW4gYW5ub3RhdGlvbnM6CiAgICAgICAgICAgIHJlc3VsdCArPSAnOiAnICsgZm9ybWF0YW5ub3RhdGlvbihhbm5vdGF0aW9uc1thcmddKQogICAgICAgIHJldHVybiByZXN1bHQKICAgIHNwZWNzID0gW10KICAgIGlmIGRlZmF1bHRzOgogICAgICAgIGZpcnN0ZGVmYXVsdCA9IGxlbihhcmdzKSAtIGxlbihkZWZhdWx0cykKICAgIGZvciBpLCBhcmcgaW4gZW51bWVyYXRlKGFyZ3MpOgogICAgICAgIHNwZWMgPSBmb3JtYXRhcmdhbmRhbm5vdGF0aW9uKGFyZykKICAgICAgICBpZiBkZWZhdWx0cyBhbmQgaSA+PSBmaXJzdGRlZmF1bHQ6CiAgICAgICAgICAgIHNwZWMgPSBzcGVjICsgZm9ybWF0dmFsdWUoZGVmYXVsdHNbaSAtIGZpcnN0ZGVmYXVsdF0pCiAgICAgICAgc3BlY3MuYXBwZW5kKHNwZWMpCiAgICBpZiB2YXJhcmdzIGlzIG5vdCBOb25lOgogICAgICAgIHNwZWNzLmFwcGVuZChmb3JtYXR2YXJhcmdzKGZvcm1hdGFyZ2FuZGFubm90YXRpb24odmFyYXJncykpKQogICAgZWxzZToKICAgICAgICBpZiBrd29ubHlhcmdzOgogICAgICAgICAgICBzcGVjcy5hcHBlbmQoJyonKQogICAgaWYga3dvbmx5YXJnczoKICAgICAgICBmb3Iga3dvbmx5YXJnIGluIGt3b25seWFyZ3M6CiAgICAgICAgICAgIHNwZWMgPSBmb3JtYXRhcmdhbmRhbm5vdGF0aW9uKGt3b25seWFyZykKICAgICAgICAgICAgaWYga3dvbmx5ZGVmYXVsdHMgYW5kIGt3b25seWFyZyBpbiBrd29ubHlkZWZhdWx0czoKICAgICAgICAgICAgICAgIHNwZWMgKz0gZm9ybWF0dmFsdWUoa3dvbmx5ZGVmYXVsdHNba3dvbmx5YXJnXSkKICAgICAgICAgICAgc3BlY3MuYXBwZW5kKHNwZWMpCiAgICBpZiB2YXJrdyBpcyBub3QgTm9uZToKICAgICAgICBzcGVjcy5hcHBlbmQoZm9ybWF0dmFya3coZm9ybWF0YXJnYW5kYW5ub3RhdGlvbih2YXJrdykpKQogICAgcmVzdWx0ID0gJygnICsgJywgJy5qb2luKHNwZWNzKSArICcpJwogICAgaWYgJ3JldHVybicgaW4gYW5ub3RhdGlvbnM6CiAgICAgICAgcmVzdWx0ICs9IGZvcm1hdHJldHVybnMoZm9ybWF0YW5ub3RhdGlvbihhbm5vdGF0aW9uc1sncmV0dXJuJ10pKQogICAgcmV0dXJuIHJlc3VsdAoKZGVmIGZvcm1hdGFyZ3ZhbHVlcyhhcmdzLCB2YXJhcmdzLCB2YXJrdywgbG9jYWxzLAogICAgICAgICAgICAgICAgICAgIGZvcm1hdGFyZz1zdHIsCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dmFyYXJncz1sYW1iZGEgbmFtZTogJyonICsgbmFtZSwKICAgICAgICAgICAgICAgICAgICBmb3JtYXR2YXJrdz1sYW1iZGEgbmFtZTogJyoqJyArIG5hbWUsCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dmFsdWU9bGFtYmRhIHZhbHVlOiAnPScgKyByZXByKHZhbHVlKSk6CiAgICAiIiJGb3JtYXQgYW4gYXJndW1lbnQgc3BlYyBmcm9tIHRoZSA0IHZhbHVlcyByZXR1cm5lZCBieSBnZXRhcmd2YWx1ZXMuCgogICAgVGhlIGZpcnN0IGZvdXIgYXJndW1lbnRzIGFyZSAoYXJncywgdmFyYXJncywgdmFya3csIGxvY2FscykuICBUaGUKICAgIG5leHQgZm91ciBhcmd1bWVudHMgYXJlIHRoZSBjb3JyZXNwb25kaW5nIG9wdGlvbmFsIGZvcm1hdHRpbmcgZnVuY3Rpb25zCiAgICB0aGF0IGFyZSBjYWxsZWQgdG8gdHVybiBuYW1lcyBhbmQgdmFsdWVzIGludG8gc3RyaW5ncy4gIFRoZSBuaW50aAogICAgYXJndW1lbnQgaXMgYW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gZm9ybWF0IHRoZSBzZXF1ZW5jZSBvZiBhcmd1bWVudHMuIiIiCiAgICBkZWYgY29udmVydChuYW1lLCBsb2NhbHM9bG9jYWxzLAogICAgICAgICAgICAgICAgZm9ybWF0YXJnPWZvcm1hdGFyZywgZm9ybWF0dmFsdWU9Zm9ybWF0dmFsdWUpOgogICAgICAgIHJldHVybiBmb3JtYXRhcmcobmFtZSkgKyBmb3JtYXR2YWx1ZShsb2NhbHNbbmFtZV0pCiAgICBzcGVjcyA9IFtdCiAgICBmb3IgaSBpbiByYW5nZShsZW4oYXJncykpOgogICAgICAgIHNwZWNzLmFwcGVuZChjb252ZXJ0KGFyZ3NbaV0pKQogICAgaWYgdmFyYXJnczoKICAgICAgICBzcGVjcy5hcHBlbmQoZm9ybWF0dmFyYXJncyh2YXJhcmdzKSArIGZvcm1hdHZhbHVlKGxvY2Fsc1t2YXJhcmdzXSkpCiAgICBpZiB2YXJrdzoKICAgICAgICBzcGVjcy5hcHBlbmQoZm9ybWF0dmFya3codmFya3cpICsgZm9ybWF0dmFsdWUobG9jYWxzW3Zhcmt3XSkpCiAgICByZXR1cm4gJygnICsgJywgJy5qb2luKHNwZWNzKSArICcpJwoKZGVmIF9taXNzaW5nX2FyZ3VtZW50cyhmX25hbWUsIGFyZ25hbWVzLCBwb3MsIHZhbHVlcyk6CiAgICBuYW1lcyA9IFtyZXByKG5hbWUpIGZvciBuYW1lIGluIGFyZ25hbWVzIGlmIG5hbWUgbm90IGluIHZhbHVlc10KICAgIG1pc3NpbmcgPSBsZW4obmFtZXMpCiAgICBpZiBtaXNzaW5nID09IDE6CiAgICAgICAgcyA9IG5hbWVzWzBdCiAgICBlbGlmIG1pc3NpbmcgPT0gMjoKICAgICAgICBzID0gInt9IGFuZCB7fSIuZm9ybWF0KCpuYW1lcykKICAgIGVsc2U6CiAgICAgICAgdGFpbCA9ICIsIHt9IGFuZCB7fSIuZm9ybWF0KG5hbWVzWy0yOl0pCiAgICAgICAgZGVsIG5hbWVzWy0yOl0KICAgICAgICBzID0gIiwgIi5qb2luKG5hbWVzKSArIHRhaWwKICAgIHJhaXNlIFR5cGVFcnJvcigiJXMoKSBtaXNzaW5nICVpIHJlcXVpcmVkICVzIGFyZ3VtZW50JXM6ICVzIiAlCiAgICAgICAgICAgICAgICAgICAgKGZfbmFtZSwgbWlzc2luZywKICAgICAgICAgICAgICAgICAgICAgICJwb3NpdGlvbmFsIiBpZiBwb3MgZWxzZSAia2V5d29yZC1vbmx5IiwKICAgICAgICAgICAgICAgICAgICAgICIiIGlmIG1pc3NpbmcgPT0gMSBlbHNlICJzIiwgcykpCgpkZWYgX3Rvb19tYW55KGZfbmFtZSwgYXJncywga3dvbmx5LCB2YXJhcmdzLCBkZWZjb3VudCwgZ2l2ZW4sIHZhbHVlcyk6CiAgICBhdGxlYXN0ID0gbGVuKGFyZ3MpIC0gZGVmY291bnQKICAgIGt3b25seV9naXZlbiA9IGxlbihbYXJnIGZvciBhcmcgaW4ga3dvbmx5IGlmIGFyZyBpbiB2YWx1ZXNdKQogICAgaWYgdmFyYXJnczoKICAgICAgICBwbHVyYWwgPSBhdGxlYXN0ICE9IDEKICAgICAgICBzaWcgPSAiYXQgbGVhc3QgJWQiICUgKGF0bGVhc3QsKQogICAgZWxpZiBkZWZjb3VudDoKICAgICAgICBwbHVyYWwgPSBUcnVlCiAgICAgICAgc2lnID0gImZyb20gJWQgdG8gJWQiICUgKGF0bGVhc3QsIGxlbihhcmdzKSkKICAgIGVsc2U6CiAgICAgICAgcGx1cmFsID0gbGVuKGFyZ3MpICE9IDEKICAgICAgICBzaWcgPSBzdHIobGVuKGFyZ3MpKQogICAga3dvbmx5X3NpZyA9ICIiCiAgICBpZiBrd29ubHlfZ2l2ZW46CiAgICAgICAgbXNnID0gIiBwb3NpdGlvbmFsIGFyZ3VtZW50JXMgKGFuZCAlZCBrZXl3b3JkLW9ubHkgYXJndW1lbnQlcykiCiAgICAgICAga3dvbmx5X3NpZyA9IChtc2cgJSAoInMiIGlmIGdpdmVuICE9IDEgZWxzZSAiIiwga3dvbmx5X2dpdmVuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzIiBpZiBrd29ubHlfZ2l2ZW4gIT0gMSBlbHNlICIiKSkKICAgIHJhaXNlIFR5cGVFcnJvcigiJXMoKSB0YWtlcyAlcyBwb3NpdGlvbmFsIGFyZ3VtZW50JXMgYnV0ICVkJXMgJXMgZ2l2ZW4iICUKICAgICAgICAgICAgKGZfbmFtZSwgc2lnLCAicyIgaWYgcGx1cmFsIGVsc2UgIiIsIGdpdmVuLCBrd29ubHlfc2lnLAogICAgICAgICAgICAgIndhcyIgaWYgZ2l2ZW4gPT0gMSBhbmQgbm90IGt3b25seV9naXZlbiBlbHNlICJ3ZXJlIikpCgpkZWYgZ2V0Y2FsbGFyZ3MoZnVuYywgKnBvc2l0aW9uYWwsICoqbmFtZWQpOgogICAgIiIiR2V0IHRoZSBtYXBwaW5nIG9mIGFyZ3VtZW50cyB0byB2YWx1ZXMuCgogICAgQSBkaWN0IGlzIHJldHVybmVkLCB3aXRoIGtleXMgdGhlIGZ1bmN0aW9uIGFyZ3VtZW50IG5hbWVzIChpbmNsdWRpbmcgdGhlCiAgICBuYW1lcyBvZiB0aGUgKiBhbmQgKiogYXJndW1lbnRzLCBpZiBhbnkpLCBhbmQgdmFsdWVzIHRoZSByZXNwZWN0aXZlIGJvdW5kCiAgICB2YWx1ZXMgZnJvbSAncG9zaXRpb25hbCcgYW5kICduYW1lZCcuIiIiCiAgICBzcGVjID0gZ2V0ZnVsbGFyZ3NwZWMoZnVuYykKICAgIGFyZ3MsIHZhcmFyZ3MsIHZhcmt3LCBkZWZhdWx0cywga3dvbmx5YXJncywga3dvbmx5ZGVmYXVsdHMsIGFubiA9IHNwZWMKICAgIGZfbmFtZSA9IGZ1bmMuX19uYW1lX18KICAgIGFyZzJ2YWx1ZSA9IHt9CgoKICAgIGlmIGlzbWV0aG9kKGZ1bmMpIGFuZCBmdW5jLl9fc2VsZl9fIGlzIG5vdCBOb25lOgogICAgICAgICMgaW1wbGljaXQgJ3NlbGYnIChvciAnY2xzJyBmb3IgY2xhc3NtZXRob2RzKSBhcmd1bWVudAogICAgICAgIHBvc2l0aW9uYWwgPSAoZnVuYy5fX3NlbGZfXywpICsgcG9zaXRpb25hbAogICAgbnVtX3BvcyA9IGxlbihwb3NpdGlvbmFsKQogICAgbnVtX2FyZ3MgPSBsZW4oYXJncykKICAgIG51bV9kZWZhdWx0cyA9IGxlbihkZWZhdWx0cykgaWYgZGVmYXVsdHMgZWxzZSAwCgogICAgbiA9IG1pbihudW1fcG9zLCBudW1fYXJncykKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIGFyZzJ2YWx1ZVthcmdzW2ldXSA9IHBvc2l0aW9uYWxbaV0KICAgIGlmIHZhcmFyZ3M6CiAgICAgICAgYXJnMnZhbHVlW3ZhcmFyZ3NdID0gdHVwbGUocG9zaXRpb25hbFtuOl0pCiAgICBwb3NzaWJsZV9rd2FyZ3MgPSBzZXQoYXJncyArIGt3b25seWFyZ3MpCiAgICBpZiB2YXJrdzoKICAgICAgICBhcmcydmFsdWVbdmFya3ddID0ge30KICAgIGZvciBrdywgdmFsdWUgaW4gbmFtZWQuaXRlbXMoKToKICAgICAgICBpZiBrdyBub3QgaW4gcG9zc2libGVfa3dhcmdzOgogICAgICAgICAgICBpZiBub3QgdmFya3c6CiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIiVzKCkgZ290IGFuIHVuZXhwZWN0ZWQga2V5d29yZCBhcmd1bWVudCAlciIgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmX25hbWUsIGt3KSkKICAgICAgICAgICAgYXJnMnZhbHVlW3Zhcmt3XVtrd10gPSB2YWx1ZQogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGlmIGt3IGluIGFyZzJ2YWx1ZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCIlcygpIGdvdCBtdWx0aXBsZSB2YWx1ZXMgZm9yIGFyZ3VtZW50ICVyIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZl9uYW1lLCBrdykpCiAgICAgICAgYXJnMnZhbHVlW2t3XSA9IHZhbHVlCiAgICBpZiBudW1fcG9zID4gbnVtX2FyZ3MgYW5kIG5vdCB2YXJhcmdzOgogICAgICAgIF90b29fbWFueShmX25hbWUsIGFyZ3MsIGt3b25seWFyZ3MsIHZhcmFyZ3MsIG51bV9kZWZhdWx0cywKICAgICAgICAgICAgICAgICAgIG51bV9wb3MsIGFyZzJ2YWx1ZSkKICAgIGlmIG51bV9wb3MgPCBudW1fYXJnczoKICAgICAgICByZXEgPSBhcmdzWzpudW1fYXJncyAtIG51bV9kZWZhdWx0c10KICAgICAgICBmb3IgYXJnIGluIHJlcToKICAgICAgICAgICAgaWYgYXJnIG5vdCBpbiBhcmcydmFsdWU6CiAgICAgICAgICAgICAgICBfbWlzc2luZ19hcmd1bWVudHMoZl9uYW1lLCByZXEsIFRydWUsIGFyZzJ2YWx1ZSkKICAgICAgICBmb3IgaSwgYXJnIGluIGVudW1lcmF0ZShhcmdzW251bV9hcmdzIC0gbnVtX2RlZmF1bHRzOl0pOgogICAgICAgICAgICBpZiBhcmcgbm90IGluIGFyZzJ2YWx1ZToKICAgICAgICAgICAgICAgIGFyZzJ2YWx1ZVthcmddID0gZGVmYXVsdHNbaV0KICAgIG1pc3NpbmcgPSAwCiAgICBmb3Iga3dhcmcgaW4ga3dvbmx5YXJnczoKICAgICAgICBpZiBrd2FyZyBub3QgaW4gYXJnMnZhbHVlOgogICAgICAgICAgICBpZiBrd2FyZyBpbiBrd29ubHlkZWZhdWx0czoKICAgICAgICAgICAgICAgIGFyZzJ2YWx1ZVtrd2FyZ10gPSBrd29ubHlkZWZhdWx0c1trd2FyZ10KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG1pc3NpbmcgKz0gMQogICAgaWYgbWlzc2luZzoKICAgICAgICBfbWlzc2luZ19hcmd1bWVudHMoZl9uYW1lLCBrd29ubHlhcmdzLCBGYWxzZSwgYXJnMnZhbHVlKQogICAgcmV0dXJuIGFyZzJ2YWx1ZQoKQ2xvc3VyZVZhcnMgPSBuYW1lZHR1cGxlKCdDbG9zdXJlVmFycycsICdub25sb2NhbHMgZ2xvYmFscyBidWlsdGlucyB1bmJvdW5kJykKCmRlZiBnZXRjbG9zdXJldmFycyhmdW5jKToKICAgICIiIgogICAgR2V0IHRoZSBtYXBwaW5nIG9mIGZyZWUgdmFyaWFibGVzIHRvIHRoZWlyIGN1cnJlbnQgdmFsdWVzLgoKICAgIFJldHVybnMgYSBuYW1lZCB0dXBsZSBvZiBkaWN0cyBtYXBwaW5nIHRoZSBjdXJyZW50IG5vbmxvY2FsLCBnbG9iYWwKICAgIGFuZCBidWlsdGluIHJlZmVyZW5jZXMgYXMgc2VlbiBieSB0aGUgYm9keSBvZiB0aGUgZnVuY3Rpb24uIEEgZmluYWwKICAgIHNldCBvZiB1bmJvdW5kIG5hbWVzIHRoYXQgY291bGQgbm90IGJlIHJlc29sdmVkIGlzIGFsc28gcHJvdmlkZWQuCiAgICAiIiIKCiAgICBpZiBpc21ldGhvZChmdW5jKToKICAgICAgICBmdW5jID0gZnVuYy5fX2Z1bmNfXwoKICAgIGlmIG5vdCBpc2Z1bmN0aW9uKGZ1bmMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiJ3shcn0nIGlzIG5vdCBhIFB5dGhvbiBmdW5jdGlvbiIuZm9ybWF0KGZ1bmMpKQoKICAgIGNvZGUgPSBmdW5jLl9fY29kZV9fCiAgICAjIE5vbmxvY2FsIHJlZmVyZW5jZXMgYXJlIG5hbWVkIGluIGNvX2ZyZWV2YXJzIGFuZCByZXNvbHZlZAogICAgIyBieSBsb29raW5nIHRoZW0gdXAgaW4gX19jbG9zdXJlX18gYnkgcG9zaXRpb25hbCBpbmRleAogICAgaWYgZnVuYy5fX2Nsb3N1cmVfXyBpcyBOb25lOgogICAgICAgIG5vbmxvY2FsX3ZhcnMgPSB7fQogICAgZWxzZToKICAgICAgICBub25sb2NhbF92YXJzID0gewogICAgICAgICAgICB2YXIgOiBjZWxsLmNlbGxfY29udGVudHMKICAgICAgICAgICAgZm9yIHZhciwgY2VsbCBpbiB6aXAoY29kZS5jb19mcmVldmFycywgZnVuYy5fX2Nsb3N1cmVfXykKICAgICAgIH0KCiAgICAjIEdsb2JhbCBhbmQgYnVpbHRpbiByZWZlcmVuY2VzIGFyZSBuYW1lZCBpbiBjb19uYW1lcyBhbmQgcmVzb2x2ZWQKICAgICMgYnkgbG9va2luZyB0aGVtIHVwIGluIF9fZ2xvYmFsc19fIG9yIF9fYnVpbHRpbnNfXwogICAgZ2xvYmFsX25zID0gZnVuYy5fX2dsb2JhbHNfXwogICAgYnVpbHRpbl9ucyA9IGdsb2JhbF9ucy5nZXQoIl9fYnVpbHRpbnNfXyIsIGJ1aWx0aW5zLl9fZGljdF9fKQogICAgaWYgaXNtb2R1bGUoYnVpbHRpbl9ucyk6CiAgICAgICAgYnVpbHRpbl9ucyA9IGJ1aWx0aW5fbnMuX19kaWN0X18KICAgIGdsb2JhbF92YXJzID0ge30KICAgIGJ1aWx0aW5fdmFycyA9IHt9CiAgICB1bmJvdW5kX25hbWVzID0gc2V0KCkKICAgIGZvciBuYW1lIGluIGNvZGUuY29fbmFtZXM6CiAgICAgICAgaWYgbmFtZSBpbiAoIk5vbmUiLCAiVHJ1ZSIsICJGYWxzZSIpOgogICAgICAgICAgICAjIEJlY2F1c2UgdGhlc2UgdXNlZCB0byBiZSBidWlsdGlucyBpbnN0ZWFkIG9mIGtleXdvcmRzLCB0aGV5CiAgICAgICAgICAgICMgbWF5IHN0aWxsIHNob3cgdXAgYXMgbmFtZSByZWZlcmVuY2VzLiBXZSBpZ25vcmUgdGhlbS4KICAgICAgICAgICAgY29udGludWUKICAgICAgICB0cnk6CiAgICAgICAgICAgIGdsb2JhbF92YXJzW25hbWVdID0gZ2xvYmFsX25zW25hbWVdCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBidWlsdGluX3ZhcnNbbmFtZV0gPSBidWlsdGluX25zW25hbWVdCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHVuYm91bmRfbmFtZXMuYWRkKG5hbWUpCgogICAgcmV0dXJuIENsb3N1cmVWYXJzKG5vbmxvY2FsX3ZhcnMsIGdsb2JhbF92YXJzLAogICAgICAgICAgICAgICAgICAgICAgIGJ1aWx0aW5fdmFycywgdW5ib3VuZF9uYW1lcykKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gc3RhY2sgZnJhbWUgZXh0cmFjdGlvbgoKVHJhY2ViYWNrID0gbmFtZWR0dXBsZSgnVHJhY2ViYWNrJywgJ2ZpbGVuYW1lIGxpbmVubyBmdW5jdGlvbiBjb2RlX2NvbnRleHQgaW5kZXgnKQoKZGVmIGdldGZyYW1laW5mbyhmcmFtZSwgY29udGV4dD0xKToKICAgICIiIkdldCBpbmZvcm1hdGlvbiBhYm91dCBhIGZyYW1lIG9yIHRyYWNlYmFjayBvYmplY3QuCgogICAgQSB0dXBsZSBvZiBmaXZlIHRoaW5ncyBpcyByZXR1cm5lZDogdGhlIGZpbGVuYW1lLCB0aGUgbGluZSBudW1iZXIgb2YKICAgIHRoZSBjdXJyZW50IGxpbmUsIHRoZSBmdW5jdGlvbiBuYW1lLCBhIGxpc3Qgb2YgbGluZXMgb2YgY29udGV4dCBmcm9tCiAgICB0aGUgc291cmNlIGNvZGUsIGFuZCB0aGUgaW5kZXggb2YgdGhlIGN1cnJlbnQgbGluZSB3aXRoaW4gdGhhdCBsaXN0LgogICAgVGhlIG9wdGlvbmFsIHNlY29uZCBhcmd1bWVudCBzcGVjaWZpZXMgdGhlIG51bWJlciBvZiBsaW5lcyBvZiBjb250ZXh0CiAgICB0byByZXR1cm4sIHdoaWNoIGFyZSBjZW50ZXJlZCBhcm91bmQgdGhlIGN1cnJlbnQgbGluZS4iIiIKICAgIGlmIGlzdHJhY2ViYWNrKGZyYW1lKToKICAgICAgICBsaW5lbm8gPSBmcmFtZS50Yl9saW5lbm8KICAgICAgICBmcmFtZSA9IGZyYW1lLnRiX2ZyYW1lCiAgICBlbHNlOgogICAgICAgIGxpbmVubyA9IGZyYW1lLmZfbGluZW5vCiAgICBpZiBub3QgaXNmcmFtZShmcmFtZSk6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCd7IXJ9IGlzIG5vdCBhIGZyYW1lIG9yIHRyYWNlYmFjayBvYmplY3QnLmZvcm1hdChmcmFtZSkpCgogICAgZmlsZW5hbWUgPSBnZXRzb3VyY2VmaWxlKGZyYW1lKSBvciBnZXRmaWxlKGZyYW1lKQogICAgaWYgY29udGV4dCA+IDA6CiAgICAgICAgc3RhcnQgPSBsaW5lbm8gLSAxIC0gY29udGV4dC8vMgogICAgICAgIHRyeToKICAgICAgICAgICAgbGluZXMsIGxudW0gPSBmaW5kc291cmNlKGZyYW1lKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBsaW5lcyA9IGluZGV4ID0gTm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN0YXJ0ID0gbWF4KHN0YXJ0LCAxKQogICAgICAgICAgICBzdGFydCA9IG1heCgwLCBtaW4oc3RhcnQsIGxlbihsaW5lcykgLSBjb250ZXh0KSkKICAgICAgICAgICAgbGluZXMgPSBsaW5lc1tzdGFydDpzdGFydCtjb250ZXh0XQogICAgICAgICAgICBpbmRleCA9IGxpbmVubyAtIDEgLSBzdGFydAogICAgZWxzZToKICAgICAgICBsaW5lcyA9IGluZGV4ID0gTm9uZQoKICAgIHJldHVybiBUcmFjZWJhY2soZmlsZW5hbWUsIGxpbmVubywgZnJhbWUuZl9jb2RlLmNvX25hbWUsIGxpbmVzLCBpbmRleCkKCmRlZiBnZXRsaW5lbm8oZnJhbWUpOgogICAgIiIiR2V0IHRoZSBsaW5lIG51bWJlciBmcm9tIGEgZnJhbWUgb2JqZWN0LCBhbGxvd2luZyBmb3Igb3B0aW1pemF0aW9uLiIiIgogICAgIyBGcmFtZVR5cGUuZl9saW5lbm8gaXMgbm93IGEgZGVzY3JpcHRvciB0aGF0IGdyb3ZlbHMgY29fbG5vdGFiCiAgICByZXR1cm4gZnJhbWUuZl9saW5lbm8KCmRlZiBnZXRvdXRlcmZyYW1lcyhmcmFtZSwgY29udGV4dD0xKToKICAgICIiIkdldCBhIGxpc3Qgb2YgcmVjb3JkcyBmb3IgYSBmcmFtZSBhbmQgYWxsIGhpZ2hlciAoY2FsbGluZykgZnJhbWVzLgoKICAgIEVhY2ggcmVjb3JkIGNvbnRhaW5zIGEgZnJhbWUgb2JqZWN0LCBmaWxlbmFtZSwgbGluZSBudW1iZXIsIGZ1bmN0aW9uCiAgICBuYW1lLCBhIGxpc3Qgb2YgbGluZXMgb2YgY29udGV4dCwgYW5kIGluZGV4IHdpdGhpbiB0aGUgY29udGV4dC4iIiIKICAgIGZyYW1lbGlzdCA9IFtdCiAgICB3aGlsZSBmcmFtZToKICAgICAgICBmcmFtZWxpc3QuYXBwZW5kKChmcmFtZSwpICsgZ2V0ZnJhbWVpbmZvKGZyYW1lLCBjb250ZXh0KSkKICAgICAgICBmcmFtZSA9IGZyYW1lLmZfYmFjawogICAgcmV0dXJuIGZyYW1lbGlzdAoKZGVmIGdldGlubmVyZnJhbWVzKHRiLCBjb250ZXh0PTEpOgogICAgIiIiR2V0IGEgbGlzdCBvZiByZWNvcmRzIGZvciBhIHRyYWNlYmFjaydzIGZyYW1lIGFuZCBhbGwgbG93ZXIgZnJhbWVzLgoKICAgIEVhY2ggcmVjb3JkIGNvbnRhaW5zIGEgZnJhbWUgb2JqZWN0LCBmaWxlbmFtZSwgbGluZSBudW1iZXIsIGZ1bmN0aW9uCiAgICBuYW1lLCBhIGxpc3Qgb2YgbGluZXMgb2YgY29udGV4dCwgYW5kIGluZGV4IHdpdGhpbiB0aGUgY29udGV4dC4iIiIKICAgIGZyYW1lbGlzdCA9IFtdCiAgICB3aGlsZSB0YjoKICAgICAgICBmcmFtZWxpc3QuYXBwZW5kKCh0Yi50Yl9mcmFtZSwpICsgZ2V0ZnJhbWVpbmZvKHRiLCBjb250ZXh0KSkKICAgICAgICB0YiA9IHRiLnRiX25leHQKICAgIHJldHVybiBmcmFtZWxpc3QKCmRlZiBjdXJyZW50ZnJhbWUoKToKICAgICIiIlJldHVybiB0aGUgZnJhbWUgb2YgdGhlIGNhbGxlciBvciBOb25lIGlmIHRoaXMgaXMgbm90IHBvc3NpYmxlLiIiIgogICAgcmV0dXJuIHN5cy5fZ2V0ZnJhbWUoMSkgaWYgaGFzYXR0cihzeXMsICJfZ2V0ZnJhbWUiKSBlbHNlIE5vbmUKCmRlZiBzdGFjayhjb250ZXh0PTEpOgogICAgIiIiUmV0dXJuIGEgbGlzdCBvZiByZWNvcmRzIGZvciB0aGUgc3RhY2sgYWJvdmUgdGhlIGNhbGxlcidzIGZyYW1lLiIiIgogICAgcmV0dXJuIGdldG91dGVyZnJhbWVzKHN5cy5fZ2V0ZnJhbWUoMSksIGNvbnRleHQpCgpkZWYgdHJhY2UoY29udGV4dD0xKToKICAgICIiIlJldHVybiBhIGxpc3Qgb2YgcmVjb3JkcyBmb3IgdGhlIHN0YWNrIGJlbG93IHRoZSBjdXJyZW50IGV4Y2VwdGlvbi4iIiIKICAgIHJldHVybiBnZXRpbm5lcmZyYW1lcyhzeXMuZXhjX2luZm8oKVsyXSwgY29udGV4dCkKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBzdGF0aWMgdmVyc2lvbiBvZiBnZXRhdHRyCgpfc2VudGluZWwgPSBvYmplY3QoKQoKZGVmIF9zdGF0aWNfZ2V0bXJvKGtsYXNzKToKICAgIHJldHVybiB0eXBlLl9fZGljdF9fWydfX21yb19fJ10uX19nZXRfXyhrbGFzcykKCmRlZiBfY2hlY2tfaW5zdGFuY2Uob2JqLCBhdHRyKToKICAgIGluc3RhbmNlX2RpY3QgPSB7fQogICAgdHJ5OgogICAgICAgIGluc3RhbmNlX2RpY3QgPSBvYmplY3QuX19nZXRhdHRyaWJ1dGVfXyhvYmosICJfX2RpY3RfXyIpCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgcGFzcwogICAgcmV0dXJuIGRpY3QuZ2V0KGluc3RhbmNlX2RpY3QsIGF0dHIsIF9zZW50aW5lbCkKCgpkZWYgX2NoZWNrX2NsYXNzKGtsYXNzLCBhdHRyKToKICAgIGZvciBlbnRyeSBpbiBfc3RhdGljX2dldG1ybyhrbGFzcyk6CiAgICAgICAgaWYgX3NoYWRvd2VkX2RpY3QodHlwZShlbnRyeSkpIGlzIF9zZW50aW5lbDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5Ll9fZGljdF9fW2F0dHJdCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHBhc3MKICAgIHJldHVybiBfc2VudGluZWwKCmRlZiBfaXNfdHlwZShvYmopOgogICAgdHJ5OgogICAgICAgIF9zdGF0aWNfZ2V0bXJvKG9iaikKICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICByZXR1cm4gVHJ1ZQoKZGVmIF9zaGFkb3dlZF9kaWN0KGtsYXNzKToKICAgIGRpY3RfYXR0ciA9IHR5cGUuX19kaWN0X19bIl9fZGljdF9fIl0KICAgIGZvciBlbnRyeSBpbiBfc3RhdGljX2dldG1ybyhrbGFzcyk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBjbGFzc19kaWN0ID0gZGljdF9hdHRyLl9fZ2V0X18oZW50cnkpWyJfX2RpY3RfXyJdCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgbm90ICh0eXBlKGNsYXNzX2RpY3QpIGlzIHR5cGVzLkdldFNldERlc2NyaXB0b3JUeXBlIGFuZAogICAgICAgICAgICAgICAgICAgIGNsYXNzX2RpY3QuX19uYW1lX18gPT0gIl9fZGljdF9fIiBhbmQKICAgICAgICAgICAgICAgICAgICBjbGFzc19kaWN0Ll9fb2JqY2xhc3NfXyBpcyBlbnRyeSk6CiAgICAgICAgICAgICAgICByZXR1cm4gY2xhc3NfZGljdAogICAgcmV0dXJuIF9zZW50aW5lbAoKZGVmIGdldGF0dHJfc3RhdGljKG9iaiwgYXR0ciwgZGVmYXVsdD1fc2VudGluZWwpOgogICAgIiIiUmV0cmlldmUgYXR0cmlidXRlcyB3aXRob3V0IHRyaWdnZXJpbmcgZHluYW1pYyBsb29rdXAgdmlhIHRoZQogICAgICAgZGVzY3JpcHRvciBwcm90b2NvbCwgIF9fZ2V0YXR0cl9fIG9yIF9fZ2V0YXR0cmlidXRlX18uCgogICAgICAgTm90ZTogdGhpcyBmdW5jdGlvbiBtYXkgbm90IGJlIGFibGUgdG8gcmV0cmlldmUgYWxsIGF0dHJpYnV0ZXMKICAgICAgIHRoYXQgZ2V0YXR0ciBjYW4gZmV0Y2ggKGxpa2UgZHluYW1pY2FsbHkgY3JlYXRlZCBhdHRyaWJ1dGVzKQogICAgICAgYW5kIG1heSBmaW5kIGF0dHJpYnV0ZXMgdGhhdCBnZXRhdHRyIGNhbid0IChsaWtlIGRlc2NyaXB0b3JzCiAgICAgICB0aGF0IHJhaXNlIEF0dHJpYnV0ZUVycm9yKS4gSXQgY2FuIGFsc28gcmV0dXJuIGRlc2NyaXB0b3Igb2JqZWN0cwogICAgICAgaW5zdGVhZCBvZiBpbnN0YW5jZSBtZW1iZXJzIGluIHNvbWUgY2FzZXMuIFNlZSB0aGUKICAgICAgIGRvY3VtZW50YXRpb24gZm9yIGRldGFpbHMuCiAgICAiIiIKICAgIGluc3RhbmNlX3Jlc3VsdCA9IF9zZW50aW5lbAogICAgaWYgbm90IF9pc190eXBlKG9iaik6CiAgICAgICAga2xhc3MgPSB0eXBlKG9iaikKICAgICAgICBkaWN0X2F0dHIgPSBfc2hhZG93ZWRfZGljdChrbGFzcykKICAgICAgICBpZiAoZGljdF9hdHRyIGlzIF9zZW50aW5lbCBvcgogICAgICAgICAgICB0eXBlKGRpY3RfYXR0cikgaXMgdHlwZXMuTWVtYmVyRGVzY3JpcHRvclR5cGUpOgogICAgICAgICAgICBpbnN0YW5jZV9yZXN1bHQgPSBfY2hlY2tfaW5zdGFuY2Uob2JqLCBhdHRyKQogICAgZWxzZToKICAgICAgICBrbGFzcyA9IG9iagoKICAgIGtsYXNzX3Jlc3VsdCA9IF9jaGVja19jbGFzcyhrbGFzcywgYXR0cikKCiAgICBpZiBpbnN0YW5jZV9yZXN1bHQgaXMgbm90IF9zZW50aW5lbCBhbmQga2xhc3NfcmVzdWx0IGlzIG5vdCBfc2VudGluZWw6CiAgICAgICAgaWYgKF9jaGVja19jbGFzcyh0eXBlKGtsYXNzX3Jlc3VsdCksICdfX2dldF9fJykgaXMgbm90IF9zZW50aW5lbCBhbmQKICAgICAgICAgICAgX2NoZWNrX2NsYXNzKHR5cGUoa2xhc3NfcmVzdWx0KSwgJ19fc2V0X18nKSBpcyBub3QgX3NlbnRpbmVsKToKICAgICAgICAgICAgcmV0dXJuIGtsYXNzX3Jlc3VsdAoKICAgIGlmIGluc3RhbmNlX3Jlc3VsdCBpcyBub3QgX3NlbnRpbmVsOgogICAgICAgIHJldHVybiBpbnN0YW5jZV9yZXN1bHQKICAgIGlmIGtsYXNzX3Jlc3VsdCBpcyBub3QgX3NlbnRpbmVsOgogICAgICAgIHJldHVybiBrbGFzc19yZXN1bHQKCiAgICBpZiBvYmogaXMga2xhc3M6CiAgICAgICAgIyBmb3IgdHlwZXMgd2UgY2hlY2sgdGhlIG1ldGFjbGFzcyB0b28KICAgICAgICBmb3IgZW50cnkgaW4gX3N0YXRpY19nZXRtcm8odHlwZShrbGFzcykpOgogICAgICAgICAgICBpZiBfc2hhZG93ZWRfZGljdCh0eXBlKGVudHJ5KSkgaXMgX3NlbnRpbmVsOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5fX2RpY3RfX1thdHRyXQogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgIGlmIGRlZmF1bHQgaXMgbm90IF9zZW50aW5lbDoKICAgICAgICByZXR1cm4gZGVmYXVsdAogICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoYXR0cikKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBnZW5lcmF0b3IgaW50cm9zcGVjdGlvbgoKR0VOX0NSRUFURUQgPSAnR0VOX0NSRUFURUQnCkdFTl9SVU5OSU5HID0gJ0dFTl9SVU5OSU5HJwpHRU5fU1VTUEVOREVEID0gJ0dFTl9TVVNQRU5ERUQnCkdFTl9DTE9TRUQgPSAnR0VOX0NMT1NFRCcKCmRlZiBnZXRnZW5lcmF0b3JzdGF0ZShnZW5lcmF0b3IpOgogICAgIiIiR2V0IGN1cnJlbnQgc3RhdGUgb2YgYSBnZW5lcmF0b3ItaXRlcmF0b3IuCgogICAgUG9zc2libGUgc3RhdGVzIGFyZToKICAgICAgR0VOX0NSRUFURUQ6IFdhaXRpbmcgdG8gc3RhcnQgZXhlY3V0aW9uLgogICAgICBHRU5fUlVOTklORzogQ3VycmVudGx5IGJlaW5nIGV4ZWN1dGVkIGJ5IHRoZSBpbnRlcnByZXRlci4KICAgICAgR0VOX1NVU1BFTkRFRDogQ3VycmVudGx5IHN1c3BlbmRlZCBhdCBhIHlpZWxkIGV4cHJlc3Npb24uCiAgICAgIEdFTl9DTE9TRUQ6IEV4ZWN1dGlvbiBoYXMgY29tcGxldGVkLgogICAgIiIiCiAgICBpZiBnZW5lcmF0b3IuZ2lfcnVubmluZzoKICAgICAgICByZXR1cm4gR0VOX1JVTk5JTkcKICAgIGlmIGdlbmVyYXRvci5naV9mcmFtZSBpcyBOb25lOgogICAgICAgIHJldHVybiBHRU5fQ0xPU0VECiAgICBpZiBnZW5lcmF0b3IuZ2lfZnJhbWUuZl9sYXN0aSA9PSAtMToKICAgICAgICByZXR1cm4gR0VOX0NSRUFURUQKICAgIHJldHVybiBHRU5fU1VTUEVOREVECgoKZGVmIGdldGdlbmVyYXRvcmxvY2FscyhnZW5lcmF0b3IpOgogICAgIiIiCiAgICBHZXQgdGhlIG1hcHBpbmcgb2YgZ2VuZXJhdG9yIGxvY2FsIHZhcmlhYmxlcyB0byB0aGVpciBjdXJyZW50IHZhbHVlcy4KCiAgICBBIGRpY3QgaXMgcmV0dXJuZWQsIHdpdGggdGhlIGtleXMgdGhlIGxvY2FsIHZhcmlhYmxlIG5hbWVzIGFuZCB2YWx1ZXMgdGhlCiAgICBib3VuZCB2YWx1ZXMuIiIiCgogICAgaWYgbm90IGlzZ2VuZXJhdG9yKGdlbmVyYXRvcik6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCIneyFyfScgaXMgbm90IGEgUHl0aG9uIGdlbmVyYXRvciIuZm9ybWF0KGdlbmVyYXRvcikpCgogICAgZnJhbWUgPSBnZXRhdHRyKGdlbmVyYXRvciwgImdpX2ZyYW1lIiwgTm9uZSkKICAgIGlmIGZyYW1lIGlzIG5vdCBOb25lOgogICAgICAgIHJldHVybiBnZW5lcmF0b3IuZ2lfZnJhbWUuZl9sb2NhbHMKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIHt9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyBGdW5jdGlvbiBTaWduYXR1cmUgT2JqZWN0IChQRVAgMzYyKQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKX1dyYXBwZXJEZXNjcmlwdG9yID0gdHlwZSh0eXBlLl9fY2FsbF9fKQpfTWV0aG9kV3JhcHBlciA9IHR5cGUoYWxsLl9fY2FsbF9fKQoKX05vblVzZXJEZWZpbmVkQ2FsbGFibGVzID0gKF9XcmFwcGVyRGVzY3JpcHRvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9NZXRob2RXcmFwcGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXMuQnVpbHRpbkZ1bmN0aW9uVHlwZSkKCgpkZWYgX2dldF91c2VyX2RlZmluZWRfbWV0aG9kKGNscywgbWV0aG9kX25hbWUpOgogICAgdHJ5OgogICAgICAgIG1ldGggPSBnZXRhdHRyKGNscywgbWV0aG9kX25hbWUpCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgcmV0dXJuCiAgICBlbHNlOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG1ldGgsIF9Ob25Vc2VyRGVmaW5lZENhbGxhYmxlcyk6CiAgICAgICAgICAgICMgT25jZSAnX19zaWduYXR1cmVfXycgd2lsbCBiZSBhZGRlZCB0byAnQyctbGV2ZWwKICAgICAgICAgICAgIyBjYWxsYWJsZXMsIHRoaXMgY2hlY2sgd29uJ3QgYmUgbmVjZXNzYXJ5CiAgICAgICAgICAgIHJldHVybiBtZXRoCgoKZGVmIHNpZ25hdHVyZShvYmopOgogICAgJycnR2V0IGEgc2lnbmF0dXJlIG9iamVjdCBmb3IgdGhlIHBhc3NlZCBjYWxsYWJsZS4nJycKCiAgICBpZiBub3QgY2FsbGFibGUob2JqKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ3shcn0gaXMgbm90IGEgY2FsbGFibGUgb2JqZWN0Jy5mb3JtYXQob2JqKSkKCiAgICBpZiBpc2luc3RhbmNlKG9iaiwgdHlwZXMuTWV0aG9kVHlwZSk6CiAgICAgICAgIyBJbiB0aGlzIGNhc2Ugd2Ugc2tpcCB0aGUgZmlyc3QgcGFyYW1ldGVyIG9mIHRoZSB1bmRlcmx5aW5nCiAgICAgICAgIyBmdW5jdGlvbiAodXN1YWxseSBgc2VsZmAgb3IgYGNsc2ApLgogICAgICAgIHNpZyA9IHNpZ25hdHVyZShvYmouX19mdW5jX18pCiAgICAgICAgcmV0dXJuIHNpZy5yZXBsYWNlKHBhcmFtZXRlcnM9dHVwbGUoc2lnLnBhcmFtZXRlcnMudmFsdWVzKCkpWzE6XSkKCiAgICB0cnk6CiAgICAgICAgc2lnID0gb2JqLl9fc2lnbmF0dXJlX18KICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICBwYXNzCiAgICBlbHNlOgogICAgICAgIGlmIHNpZyBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmV0dXJuIHNpZwoKICAgIHRyeToKICAgICAgICAjIFdhcyB0aGlzIGZ1bmN0aW9uIHdyYXBwZWQgYnkgYSBkZWNvcmF0b3I/CiAgICAgICAgd3JhcHBlZCA9IG9iai5fX3dyYXBwZWRfXwogICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIHNpZ25hdHVyZSh3cmFwcGVkKQoKICAgIGlmIGlzaW5zdGFuY2Uob2JqLCB0eXBlcy5GdW5jdGlvblR5cGUpOgogICAgICAgIHJldHVybiBTaWduYXR1cmUuZnJvbV9mdW5jdGlvbihvYmopCgogICAgaWYgaXNpbnN0YW5jZShvYmosIGZ1bmN0b29scy5wYXJ0aWFsKToKICAgICAgICBzaWcgPSBzaWduYXR1cmUob2JqLmZ1bmMpCgogICAgICAgIG5ld19wYXJhbXMgPSBPcmRlcmVkRGljdChzaWcucGFyYW1ldGVycy5pdGVtcygpKQoKICAgICAgICBwYXJ0aWFsX2FyZ3MgPSBvYmouYXJncyBvciAoKQogICAgICAgIHBhcnRpYWxfa2V5d29yZHMgPSBvYmoua2V5d29yZHMgb3Ige30KICAgICAgICB0cnk6CiAgICAgICAgICAgIGJhID0gc2lnLmJpbmRfcGFydGlhbCgqcGFydGlhbF9hcmdzLCAqKnBhcnRpYWxfa2V5d29yZHMpCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvciBhcyBleDoKICAgICAgICAgICAgbXNnID0gJ3BhcnRpYWwgb2JqZWN0IHshcn0gaGFzIGluY29ycmVjdCBhcmd1bWVudHMnLmZvcm1hdChvYmopCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IobXNnKSBmcm9tIGV4CgogICAgICAgIGZvciBhcmdfbmFtZSwgYXJnX3ZhbHVlIGluIGJhLmFyZ3VtZW50cy5pdGVtcygpOgogICAgICAgICAgICBwYXJhbSA9IG5ld19wYXJhbXNbYXJnX25hbWVdCiAgICAgICAgICAgIGlmIGFyZ19uYW1lIGluIHBhcnRpYWxfa2V5d29yZHM6CiAgICAgICAgICAgICAgICAjIFdlIHNldCBhIG5ldyBkZWZhdWx0IHZhbHVlLCBiZWNhdXNlIHRoZSBmb2xsb3dpbmcgY29kZQogICAgICAgICAgICAgICAgIyBpcyBjb3JyZWN0OgogICAgICAgICAgICAgICAgIwogICAgICAgICAgICAgICAgIyAgID4+PiBkZWYgZm9vKGEpOiBwcmludChhKQogICAgICAgICAgICAgICAgIyAgID4+PiBwcmludChwYXJ0aWFsKHBhcnRpYWwoZm9vLCBhPTEwKSwgYT0yMCkoKSkKICAgICAgICAgICAgICAgICMgICAyMAogICAgICAgICAgICAgICAgIyAgID4+PiBwcmludChwYXJ0aWFsKHBhcnRpYWwoZm9vLCBhPTEwKSwgYT0yMCkoYT0zMCkpCiAgICAgICAgICAgICAgICAjICAgMzAKICAgICAgICAgICAgICAgICMKICAgICAgICAgICAgICAgICMgU28sIHdpdGggJ3BhcnRpYWwnIG9iamVjdHMsIHBhc3NpbmcgYSBrZXl3b3JkIGFyZ3VtZW50IGlzCiAgICAgICAgICAgICAgICAjIGxpa2Ugc2V0dGluZyBhIG5ldyBkZWZhdWx0IHZhbHVlIGZvciB0aGUgY29ycmVzcG9uZGluZwogICAgICAgICAgICAgICAgIyBwYXJhbWV0ZXIKICAgICAgICAgICAgICAgICMKICAgICAgICAgICAgICAgICMgV2UgYWxzbyBtYXJrIHRoaXMgcGFyYW1ldGVyIHdpdGggJ19wYXJ0aWFsX2t3YXJnJwogICAgICAgICAgICAgICAgIyBmbGFnLiAgTGF0ZXIsIGluICdfYmluZCcsIHRoZSAnZGVmYXVsdCcgdmFsdWUgb2YgdGhpcwogICAgICAgICAgICAgICAgIyBwYXJhbWV0ZXIgd2lsbCBiZSBhZGRlZCB0byAna3dhcmdzJywgdG8gc2ltdWxhdGUKICAgICAgICAgICAgICAgICMgdGhlICdmdW5jdG9vbHMucGFydGlhbCcgcmVhbCBjYWxsLgogICAgICAgICAgICAgICAgbmV3X3BhcmFtc1thcmdfbmFtZV0gPSBwYXJhbS5yZXBsYWNlKGRlZmF1bHQ9YXJnX3ZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wYXJ0aWFsX2t3YXJnPVRydWUpCgogICAgICAgICAgICBlbGlmIChwYXJhbS5raW5kIG5vdCBpbiAoX1ZBUl9LRVlXT1JELCBfVkFSX1BPU0lUSU9OQUwpIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IHBhcmFtLl9wYXJ0aWFsX2t3YXJnKToKICAgICAgICAgICAgICAgIG5ld19wYXJhbXMucG9wKGFyZ19uYW1lKQoKICAgICAgICByZXR1cm4gc2lnLnJlcGxhY2UocGFyYW1ldGVycz1uZXdfcGFyYW1zLnZhbHVlcygpKQoKICAgIHNpZyA9IE5vbmUKICAgIGlmIGlzaW5zdGFuY2Uob2JqLCB0eXBlKToKICAgICAgICAjIG9iaiBpcyBhIGNsYXNzIG9yIGEgbWV0YWNsYXNzCgogICAgICAgICMgRmlyc3QsIGxldCdzIHNlZSBpZiBpdCBoYXMgYW4gb3ZlcmxvYWRlZCBfX2NhbGxfXyBkZWZpbmVkCiAgICAgICAgIyBpbiBpdHMgbWV0YWNsYXNzCiAgICAgICAgY2FsbCA9IF9nZXRfdXNlcl9kZWZpbmVkX21ldGhvZCh0eXBlKG9iaiksICdfX2NhbGxfXycpCiAgICAgICAgaWYgY2FsbCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2lnID0gc2lnbmF0dXJlKGNhbGwpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBOb3cgd2UgY2hlY2sgaWYgdGhlICdvYmonIGNsYXNzIGhhcyBhICdfX25ld19fJyBtZXRob2QKICAgICAgICAgICAgbmV3ID0gX2dldF91c2VyX2RlZmluZWRfbWV0aG9kKG9iaiwgJ19fbmV3X18nKQogICAgICAgICAgICBpZiBuZXcgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBzaWcgPSBzaWduYXR1cmUobmV3KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyBGaW5hbGx5LCB3ZSBzaG91bGQgaGF2ZSBhdCBsZWFzdCBfX2luaXRfXyBpbXBsZW1lbnRlZAogICAgICAgICAgICAgICAgaW5pdCA9IF9nZXRfdXNlcl9kZWZpbmVkX21ldGhvZChvYmosICdfX2luaXRfXycpCiAgICAgICAgICAgICAgICBpZiBpbml0IGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHNpZyA9IHNpZ25hdHVyZShpbml0KQogICAgZWxpZiBub3QgaXNpbnN0YW5jZShvYmosIF9Ob25Vc2VyRGVmaW5lZENhbGxhYmxlcyk6CiAgICAgICAgIyBBbiBvYmplY3Qgd2l0aCBfX2NhbGxfXwogICAgICAgICMgV2UgYWxzbyBjaGVjayB0aGF0IHRoZSAnb2JqJyBpcyBub3QgYW4gaW5zdGFuY2Ugb2YKICAgICAgICAjIF9XcmFwcGVyRGVzY3JpcHRvciBvciBfTWV0aG9kV3JhcHBlciB0byBhdm9pZAogICAgICAgICMgaW5maW5pdGUgcmVjdXJzaW9uIChhbmQgZXZlbiBwb3RlbnRpYWwgc2VnZmF1bHQpCiAgICAgICAgY2FsbCA9IF9nZXRfdXNlcl9kZWZpbmVkX21ldGhvZCh0eXBlKG9iaiksICdfX2NhbGxfXycpCiAgICAgICAgaWYgY2FsbCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2lnID0gc2lnbmF0dXJlKGNhbGwpCgogICAgaWYgc2lnIGlzIG5vdCBOb25lOgogICAgICAgICMgRm9yIGNsYXNzZXMgYW5kIG9iamVjdHMgd2Ugc2tpcCB0aGUgZmlyc3QgcGFyYW1ldGVyIG9mIHRoZWlyCiAgICAgICAgIyBfX2NhbGxfXywgX19uZXdfXywgb3IgX19pbml0X18gbWV0aG9kcwogICAgICAgIHJldHVybiBzaWcucmVwbGFjZShwYXJhbWV0ZXJzPXR1cGxlKHNpZy5wYXJhbWV0ZXJzLnZhbHVlcygpKVsxOl0pCgogICAgaWYgaXNpbnN0YW5jZShvYmosIHR5cGVzLkJ1aWx0aW5GdW5jdGlvblR5cGUpOgogICAgICAgICMgUmFpc2UgYSBuaWNlciBlcnJvciBtZXNzYWdlIGZvciBidWlsdGlucwogICAgICAgIG1zZyA9ICdubyBzaWduYXR1cmUgZm91bmQgZm9yIGJ1aWx0aW4gZnVuY3Rpb24geyFyfScuZm9ybWF0KG9iaikKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKG1zZykKCiAgICByYWlzZSBWYWx1ZUVycm9yKCdjYWxsYWJsZSB7IXJ9IGlzIG5vdCBzdXBwb3J0ZWQgYnkgc2lnbmF0dXJlJy5mb3JtYXQob2JqKSkKCgpjbGFzcyBfdm9pZDoKICAgICcnJ0EgcHJpdmF0ZSBtYXJrZXIgLSB1c2VkIGluIFBhcmFtZXRlciAmIFNpZ25hdHVyZScnJwoKCmNsYXNzIF9lbXB0eToKICAgIHBhc3MKCgpjbGFzcyBfUGFyYW1ldGVyS2luZChpbnQpOgogICAgI2ZpeG1lIGJyeXRob24uLgogICAgI2RlZiBfX25ld19fKHNlbGYsICphcmdzLCBuYW1lKToKICAgIGRlZiBfX25ld19fKHNlbGYsICphcmdzLCBuYW1lPU5vbmUpOgogICAgICAgIG9iaiA9IGludC5fX25ld19fKHNlbGYsICphcmdzKQogICAgICAgIG9iai5fbmFtZSA9IG5hbWUKICAgICAgICByZXR1cm4gb2JqCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX25hbWUKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICc8X1BhcmFtZXRlcktpbmQ6IHshcn0+Jy5mb3JtYXQoc2VsZi5fbmFtZSkKCgpfUE9TSVRJT05BTF9PTkxZICAgICAgICA9IF9QYXJhbWV0ZXJLaW5kKDAsIG5hbWU9J1BPU0lUSU9OQUxfT05MWScpCl9QT1NJVElPTkFMX09SX0tFWVdPUkQgID0gX1BhcmFtZXRlcktpbmQoMSwgbmFtZT0nUE9TSVRJT05BTF9PUl9LRVlXT1JEJykKX1ZBUl9QT1NJVElPTkFMICAgICAgICAgPSBfUGFyYW1ldGVyS2luZCgyLCBuYW1lPSdWQVJfUE9TSVRJT05BTCcpCl9LRVlXT1JEX09OTFkgICAgICAgICAgID0gX1BhcmFtZXRlcktpbmQoMywgbmFtZT0nS0VZV09SRF9PTkxZJykKX1ZBUl9LRVlXT1JEICAgICAgICAgICAgPSBfUGFyYW1ldGVyS2luZCg0LCBuYW1lPSdWQVJfS0VZV09SRCcpCgoKY2xhc3MgUGFyYW1ldGVyOgogICAgJycnUmVwcmVzZW50cyBhIHBhcmFtZXRlciBpbiBhIGZ1bmN0aW9uIHNpZ25hdHVyZS4KCiAgICBIYXMgdGhlIGZvbGxvd2luZyBwdWJsaWMgYXR0cmlidXRlczoKCiAgICAqIG5hbWUgOiBzdHIKICAgICAgICBUaGUgbmFtZSBvZiB0aGUgcGFyYW1ldGVyIGFzIGEgc3RyaW5nLgogICAgKiBkZWZhdWx0IDogb2JqZWN0CiAgICAgICAgVGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBwYXJhbWV0ZXIgaWYgc3BlY2lmaWVkLiAgSWYgdGhlCiAgICAgICAgcGFyYW1ldGVyIGhhcyBubyBkZWZhdWx0IHZhbHVlLCB0aGlzIGF0dHJpYnV0ZSBpcyBub3Qgc2V0LgogICAgKiBhbm5vdGF0aW9uCiAgICAgICAgVGhlIGFubm90YXRpb24gZm9yIHRoZSBwYXJhbWV0ZXIgaWYgc3BlY2lmaWVkLiAgSWYgdGhlCiAgICAgICAgcGFyYW1ldGVyIGhhcyBubyBhbm5vdGF0aW9uLCB0aGlzIGF0dHJpYnV0ZSBpcyBub3Qgc2V0LgogICAgKiBraW5kIDogc3RyCiAgICAgICAgRGVzY3JpYmVzIGhvdyBhcmd1bWVudCB2YWx1ZXMgYXJlIGJvdW5kIHRvIHRoZSBwYXJhbWV0ZXIuCiAgICAgICAgUG9zc2libGUgdmFsdWVzOiBgUGFyYW1ldGVyLlBPU0lUSU9OQUxfT05MWWAsCiAgICAgICAgYFBhcmFtZXRlci5QT1NJVElPTkFMX09SX0tFWVdPUkRgLCBgUGFyYW1ldGVyLlZBUl9QT1NJVElPTkFMYCwKICAgICAgICBgUGFyYW1ldGVyLktFWVdPUkRfT05MWWAsIGBQYXJhbWV0ZXIuVkFSX0tFWVdPUkRgLgogICAgJycnCgogICAgX19zbG90c19fID0gKCdfbmFtZScsICdfa2luZCcsICdfZGVmYXVsdCcsICdfYW5ub3RhdGlvbicsICdfcGFydGlhbF9rd2FyZycpCgogICAgUE9TSVRJT05BTF9PTkxZICAgICAgICAgPSBfUE9TSVRJT05BTF9PTkxZCiAgICBQT1NJVElPTkFMX09SX0tFWVdPUkQgICA9IF9QT1NJVElPTkFMX09SX0tFWVdPUkQKICAgIFZBUl9QT1NJVElPTkFMICAgICAgICAgID0gX1ZBUl9QT1NJVElPTkFMCiAgICBLRVlXT1JEX09OTFkgICAgICAgICAgICA9IF9LRVlXT1JEX09OTFkKICAgIFZBUl9LRVlXT1JEICAgICAgICAgICAgID0gX1ZBUl9LRVlXT1JECgogICAgZW1wdHkgPSBfZW1wdHkKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSwga2luZCwgKiwgZGVmYXVsdD1fZW1wdHksIGFubm90YXRpb249X2VtcHR5LAogICAgICAgICAgICAgICAgIF9wYXJ0aWFsX2t3YXJnPUZhbHNlKToKCiAgICAgICAgaWYga2luZCBub3QgaW4gKF9QT1NJVElPTkFMX09OTFksIF9QT1NJVElPTkFMX09SX0tFWVdPUkQsCiAgICAgICAgICAgICAgICAgICAgICAgIF9WQVJfUE9TSVRJT05BTCwgX0tFWVdPUkRfT05MWSwgX1ZBUl9LRVlXT1JEKToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCB2YWx1ZSBmb3IgJ1BhcmFtZXRlci5raW5kJyBhdHRyaWJ1dGUiKQogICAgICAgIHNlbGYuX2tpbmQgPSBraW5kCgogICAgICAgIGlmIGRlZmF1bHQgaXMgbm90IF9lbXB0eToKICAgICAgICAgICAgaWYga2luZCBpbiAoX1ZBUl9QT1NJVElPTkFMLCBfVkFSX0tFWVdPUkQpOgogICAgICAgICAgICAgICAgbXNnID0gJ3t9IHBhcmFtZXRlcnMgY2Fubm90IGhhdmUgZGVmYXVsdCB2YWx1ZXMnLmZvcm1hdChraW5kKQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihtc2cpCiAgICAgICAgc2VsZi5fZGVmYXVsdCA9IGRlZmF1bHQKICAgICAgICBzZWxmLl9hbm5vdGF0aW9uID0gYW5ub3RhdGlvbgoKICAgICAgICBpZiBuYW1lIGlzIE5vbmU6CiAgICAgICAgICAgIGlmIGtpbmQgIT0gX1BPU0lUSU9OQUxfT05MWToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk5vbmUgaXMgbm90IGEgdmFsaWQgbmFtZSBmb3IgYSAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJub24tcG9zaXRpb25hbC1vbmx5IHBhcmFtZXRlciIpCiAgICAgICAgICAgIHNlbGYuX25hbWUgPSBuYW1lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbmFtZSA9IHN0cihuYW1lKQogICAgICAgICAgICBpZiBraW5kICE9IF9QT1NJVElPTkFMX09OTFkgYW5kIG5vdCBuYW1lLmlzaWRlbnRpZmllcigpOgogICAgICAgICAgICAgICAgbXNnID0gJ3shcn0gaXMgbm90IGEgdmFsaWQgcGFyYW1ldGVyIG5hbWUnLmZvcm1hdChuYW1lKQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihtc2cpCiAgICAgICAgICAgIHNlbGYuX25hbWUgPSBuYW1lCgogICAgICAgIHNlbGYuX3BhcnRpYWxfa3dhcmcgPSBfcGFydGlhbF9rd2FyZwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG5hbWUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX25hbWUKCiAgICBAcHJvcGVydHkKICAgIGRlZiBkZWZhdWx0KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9kZWZhdWx0CgogICAgQHByb3BlcnR5CiAgICBkZWYgYW5ub3RhdGlvbihzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fYW5ub3RhdGlvbgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGtpbmQoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX2tpbmQKCiAgICBkZWYgcmVwbGFjZShzZWxmLCAqLCBuYW1lPV92b2lkLCBraW5kPV92b2lkLCBhbm5vdGF0aW9uPV92b2lkLAogICAgICAgICAgICAgICAgZGVmYXVsdD1fdm9pZCwgX3BhcnRpYWxfa3dhcmc9X3ZvaWQpOgogICAgICAgICcnJ0NyZWF0ZXMgYSBjdXN0b21pemVkIGNvcHkgb2YgdGhlIFBhcmFtZXRlci4nJycKCiAgICAgICAgaWYgbmFtZSBpcyBfdm9pZDoKICAgICAgICAgICAgbmFtZSA9IHNlbGYuX25hbWUKCiAgICAgICAgaWYga2luZCBpcyBfdm9pZDoKICAgICAgICAgICAga2luZCA9IHNlbGYuX2tpbmQKCiAgICAgICAgaWYgYW5ub3RhdGlvbiBpcyBfdm9pZDoKICAgICAgICAgICAgYW5ub3RhdGlvbiA9IHNlbGYuX2Fubm90YXRpb24KCiAgICAgICAgaWYgZGVmYXVsdCBpcyBfdm9pZDoKICAgICAgICAgICAgZGVmYXVsdCA9IHNlbGYuX2RlZmF1bHQKCiAgICAgICAgaWYgX3BhcnRpYWxfa3dhcmcgaXMgX3ZvaWQ6CiAgICAgICAgICAgIF9wYXJ0aWFsX2t3YXJnID0gc2VsZi5fcGFydGlhbF9rd2FyZwoKICAgICAgICByZXR1cm4gdHlwZShzZWxmKShuYW1lLCBraW5kLCBkZWZhdWx0PWRlZmF1bHQsIGFubm90YXRpb249YW5ub3RhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICBfcGFydGlhbF9rd2FyZz1fcGFydGlhbF9rd2FyZykKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICBraW5kID0gc2VsZi5raW5kCgogICAgICAgIGZvcm1hdHRlZCA9IHNlbGYuX25hbWUKICAgICAgICBpZiBraW5kID09IF9QT1NJVElPTkFMX09OTFk6CiAgICAgICAgICAgIGlmIGZvcm1hdHRlZCBpcyBOb25lOgogICAgICAgICAgICAgICAgZm9ybWF0dGVkID0gJycKICAgICAgICAgICAgZm9ybWF0dGVkID0gJzx7fT4nLmZvcm1hdChmb3JtYXR0ZWQpCgogICAgICAgICMgQWRkIGFubm90YXRpb24gYW5kIGRlZmF1bHQgdmFsdWUKICAgICAgICBpZiBzZWxmLl9hbm5vdGF0aW9uIGlzIG5vdCBfZW1wdHk6CiAgICAgICAgICAgIGZvcm1hdHRlZCA9ICd7fTp7fScuZm9ybWF0KGZvcm1hdHRlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0YW5ub3RhdGlvbihzZWxmLl9hbm5vdGF0aW9uKSkKCiAgICAgICAgaWYgc2VsZi5fZGVmYXVsdCBpcyBub3QgX2VtcHR5OgogICAgICAgICAgICBmb3JtYXR0ZWQgPSAne309e30nLmZvcm1hdChmb3JtYXR0ZWQsIHJlcHIoc2VsZi5fZGVmYXVsdCkpCgogICAgICAgIGlmIGtpbmQgPT0gX1ZBUl9QT1NJVElPTkFMOgogICAgICAgICAgICBmb3JtYXR0ZWQgPSAnKicgKyBmb3JtYXR0ZWQKICAgICAgICBlbGlmIGtpbmQgPT0gX1ZBUl9LRVlXT1JEOgogICAgICAgICAgICBmb3JtYXR0ZWQgPSAnKionICsgZm9ybWF0dGVkCgogICAgICAgIHJldHVybiBmb3JtYXR0ZWQKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICc8e30gYXQgezojeH0geyFyfT4nLmZvcm1hdChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkKHNlbGYpLCBzZWxmLm5hbWUpCgogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIChpc3N1YmNsYXNzKG90aGVyLl9fY2xhc3NfXywgUGFyYW1ldGVyKSBhbmQKICAgICAgICAgICAgICAgIHNlbGYuX25hbWUgPT0gb3RoZXIuX25hbWUgYW5kCiAgICAgICAgICAgICAgICBzZWxmLl9raW5kID09IG90aGVyLl9raW5kIGFuZAogICAgICAgICAgICAgICAgc2VsZi5fZGVmYXVsdCA9PSBvdGhlci5fZGVmYXVsdCBhbmQKICAgICAgICAgICAgICAgIHNlbGYuX2Fubm90YXRpb24gPT0gb3RoZXIuX2Fubm90YXRpb24pCgogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIG5vdCBzZWxmLl9fZXFfXyhvdGhlcikKCgpjbGFzcyBCb3VuZEFyZ3VtZW50czoKICAgICcnJ1Jlc3VsdCBvZiBgU2lnbmF0dXJlLmJpbmRgIGNhbGwuICBIb2xkcyB0aGUgbWFwcGluZyBvZiBhcmd1bWVudHMKICAgIHRvIHRoZSBmdW5jdGlvbidzIHBhcmFtZXRlcnMuCgogICAgSGFzIHRoZSBmb2xsb3dpbmcgcHVibGljIGF0dHJpYnV0ZXM6CgogICAgKiBhcmd1bWVudHMgOiBPcmRlcmVkRGljdAogICAgICAgIEFuIG9yZGVyZWQgbXV0YWJsZSBtYXBwaW5nIG9mIHBhcmFtZXRlcnMnIG5hbWVzIHRvIGFyZ3VtZW50cycgdmFsdWVzLgogICAgICAgIERvZXMgbm90IGNvbnRhaW4gYXJndW1lbnRzJyBkZWZhdWx0IHZhbHVlcy4KICAgICogc2lnbmF0dXJlIDogU2lnbmF0dXJlCiAgICAgICAgVGhlIFNpZ25hdHVyZSBvYmplY3QgdGhhdCBjcmVhdGVkIHRoaXMgaW5zdGFuY2UuCiAgICAqIGFyZ3MgOiB0dXBsZQogICAgICAgIFR1cGxlIG9mIHBvc2l0aW9uYWwgYXJndW1lbnRzIHZhbHVlcy4KICAgICoga3dhcmdzIDogZGljdAogICAgICAgIERpY3Qgb2Yga2V5d29yZCBhcmd1bWVudHMgdmFsdWVzLgogICAgJycnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHNpZ25hdHVyZSwgYXJndW1lbnRzKToKICAgICAgICBzZWxmLmFyZ3VtZW50cyA9IGFyZ3VtZW50cwogICAgICAgIHNlbGYuX3NpZ25hdHVyZSA9IHNpZ25hdHVyZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHNpZ25hdHVyZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fc2lnbmF0dXJlCgogICAgQHByb3BlcnR5CiAgICBkZWYgYXJncyhzZWxmKToKICAgICAgICBhcmdzID0gW10KICAgICAgICBmb3IgcGFyYW1fbmFtZSwgcGFyYW0gaW4gc2VsZi5fc2lnbmF0dXJlLnBhcmFtZXRlcnMuaXRlbXMoKToKICAgICAgICAgICAgaWYgKHBhcmFtLmtpbmQgaW4gKF9WQVJfS0VZV09SRCwgX0tFWVdPUkRfT05MWSkgb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtLl9wYXJ0aWFsX2t3YXJnKToKICAgICAgICAgICAgICAgICMgS2V5d29yZCBhcmd1bWVudHMgbWFwcGVkIGJ5ICdmdW5jdG9vbHMucGFydGlhbCcKICAgICAgICAgICAgICAgICMgKFBhcmFtZXRlci5fcGFydGlhbF9rd2FyZyBpcyBUcnVlKSBhcmUgbWFwcGVkCiAgICAgICAgICAgICAgICAjIGluICdCb3VuZEFyZ3VtZW50cy5rd2FyZ3MnLCBhbG9uZyB3aXRoIFZBUl9LRVlXT1JEICYKICAgICAgICAgICAgICAgICMgS0VZV09SRF9PTkxZCiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYXJnID0gc2VsZi5hcmd1bWVudHNbcGFyYW1fbmFtZV0KICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgIyBXZSdyZSBkb25lIGhlcmUuIE90aGVyIGFyZ3VtZW50cwogICAgICAgICAgICAgICAgIyB3aWxsIGJlIG1hcHBlZCBpbiAnQm91bmRBcmd1bWVudHMua3dhcmdzJwogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIHBhcmFtLmtpbmQgPT0gX1ZBUl9QT1NJVElPTkFMOgogICAgICAgICAgICAgICAgICAgICMgKmFyZ3MKICAgICAgICAgICAgICAgICAgICBhcmdzLmV4dGVuZChhcmcpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgcGxhaW4gYXJndW1lbnQKICAgICAgICAgICAgICAgICAgICBhcmdzLmFwcGVuZChhcmcpCgogICAgICAgIHJldHVybiB0dXBsZShhcmdzKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGt3YXJncyhzZWxmKToKICAgICAgICBrd2FyZ3MgPSB7fQogICAgICAgIGt3YXJnc19zdGFydGVkID0gRmFsc2UKICAgICAgICBmb3IgcGFyYW1fbmFtZSwgcGFyYW0gaW4gc2VsZi5fc2lnbmF0dXJlLnBhcmFtZXRlcnMuaXRlbXMoKToKICAgICAgICAgICAgaWYgbm90IGt3YXJnc19zdGFydGVkOgogICAgICAgICAgICAgICAgaWYgKHBhcmFtLmtpbmQgaW4gKF9WQVJfS0VZV09SRCwgX0tFWVdPUkRfT05MWSkgb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW0uX3BhcnRpYWxfa3dhcmcpOgogICAgICAgICAgICAgICAgICAgIGt3YXJnc19zdGFydGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBwYXJhbV9uYW1lIG5vdCBpbiBzZWxmLmFyZ3VtZW50czoKICAgICAgICAgICAgICAgICAgICAgICAga3dhcmdzX3N0YXJ0ZWQgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICBpZiBub3Qga3dhcmdzX3N0YXJ0ZWQ6CiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYXJnID0gc2VsZi5hcmd1bWVudHNbcGFyYW1fbmFtZV0KICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgcGFyYW0ua2luZCA9PSBfVkFSX0tFWVdPUkQ6CiAgICAgICAgICAgICAgICAgICAgIyAqKmt3YXJncwogICAgICAgICAgICAgICAgICAgIGt3YXJncy51cGRhdGUoYXJnKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAjIHBsYWluIGtleXdvcmQgYXJndW1lbnQKICAgICAgICAgICAgICAgICAgICBrd2FyZ3NbcGFyYW1fbmFtZV0gPSBhcmcKCiAgICAgICAgcmV0dXJuIGt3YXJncwoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIHJldHVybiAoaXNzdWJjbGFzcyhvdGhlci5fX2NsYXNzX18sIEJvdW5kQXJndW1lbnRzKSBhbmQKICAgICAgICAgICAgICAgIHNlbGYuc2lnbmF0dXJlID09IG90aGVyLnNpZ25hdHVyZSBhbmQKICAgICAgICAgICAgICAgIHNlbGYuYXJndW1lbnRzID09IG90aGVyLmFyZ3VtZW50cykKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gbm90IHNlbGYuX19lcV9fKG90aGVyKQoKCmNsYXNzIFNpZ25hdHVyZToKICAgICcnJ0EgU2lnbmF0dXJlIG9iamVjdCByZXByZXNlbnRzIHRoZSBvdmVyYWxsIHNpZ25hdHVyZSBvZiBhIGZ1bmN0aW9uLgogICAgSXQgc3RvcmVzIGEgUGFyYW1ldGVyIG9iamVjdCBmb3IgZWFjaCBwYXJhbWV0ZXIgYWNjZXB0ZWQgYnkgdGhlCiAgICBmdW5jdGlvbiwgYXMgd2VsbCBhcyBpbmZvcm1hdGlvbiBzcGVjaWZpYyB0byB0aGUgZnVuY3Rpb24gaXRzZWxmLgoKICAgIEEgU2lnbmF0dXJlIG9iamVjdCBoYXMgdGhlIGZvbGxvd2luZyBwdWJsaWMgYXR0cmlidXRlcyBhbmQgbWV0aG9kczoKCiAgICAqIHBhcmFtZXRlcnMgOiBPcmRlcmVkRGljdAogICAgICAgIEFuIG9yZGVyZWQgbWFwcGluZyBvZiBwYXJhbWV0ZXJzJyBuYW1lcyB0byB0aGUgY29ycmVzcG9uZGluZwogICAgICAgIFBhcmFtZXRlciBvYmplY3RzIChrZXl3b3JkLW9ubHkgYXJndW1lbnRzIGFyZSBpbiB0aGUgc2FtZSBvcmRlcgogICAgICAgIGFzIGxpc3RlZCBpbiBgY29kZS5jb192YXJuYW1lc2ApLgogICAgKiByZXR1cm5fYW5ub3RhdGlvbiA6IG9iamVjdAogICAgICAgIFRoZSBhbm5vdGF0aW9uIGZvciB0aGUgcmV0dXJuIHR5cGUgb2YgdGhlIGZ1bmN0aW9uIGlmIHNwZWNpZmllZC4KICAgICAgICBJZiB0aGUgZnVuY3Rpb24gaGFzIG5vIGFubm90YXRpb24gZm9yIGl0cyByZXR1cm4gdHlwZSwgdGhpcwogICAgICAgIGF0dHJpYnV0ZSBpcyBub3Qgc2V0LgogICAgKiBiaW5kKCphcmdzLCAqKmt3YXJncykgLT4gQm91bmRBcmd1bWVudHMKICAgICAgICBDcmVhdGVzIGEgbWFwcGluZyBmcm9tIHBvc2l0aW9uYWwgYW5kIGtleXdvcmQgYXJndW1lbnRzIHRvCiAgICAgICAgcGFyYW1ldGVycy4KICAgICogYmluZF9wYXJ0aWFsKCphcmdzLCAqKmt3YXJncykgLT4gQm91bmRBcmd1bWVudHMKICAgICAgICBDcmVhdGVzIGEgcGFydGlhbCBtYXBwaW5nIGZyb20gcG9zaXRpb25hbCBhbmQga2V5d29yZCBhcmd1bWVudHMKICAgICAgICB0byBwYXJhbWV0ZXJzIChzaW11bGF0aW5nICdmdW5jdG9vbHMucGFydGlhbCcgYmVoYXZpb3IuKQogICAgJycnCgogICAgX19zbG90c19fID0gKCdfcmV0dXJuX2Fubm90YXRpb24nLCAnX3BhcmFtZXRlcnMnKQoKICAgIF9wYXJhbWV0ZXJfY2xzID0gUGFyYW1ldGVyCiAgICBfYm91bmRfYXJndW1lbnRzX2NscyA9IEJvdW5kQXJndW1lbnRzCgogICAgZW1wdHkgPSBfZW1wdHkKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcGFyYW1ldGVycz1Ob25lLCAqLCByZXR1cm5fYW5ub3RhdGlvbj1fZW1wdHksCiAgICAgICAgICAgICAgICAgX192YWxpZGF0ZV9wYXJhbWV0ZXJzX189VHJ1ZSk6CiAgICAgICAgJycnQ29uc3RydWN0cyBTaWduYXR1cmUgZnJvbSB0aGUgZ2l2ZW4gbGlzdCBvZiBQYXJhbWV0ZXIKICAgICAgICBvYmplY3RzIGFuZCAncmV0dXJuX2Fubm90YXRpb24nLiAgQWxsIGFyZ3VtZW50cyBhcmUgb3B0aW9uYWwuCiAgICAgICAgJycnCgogICAgICAgIGlmIHBhcmFtZXRlcnMgaXMgTm9uZToKICAgICAgICAgICAgcGFyYW1zID0gT3JkZXJlZERpY3QoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIF9fdmFsaWRhdGVfcGFyYW1ldGVyc19fOgogICAgICAgICAgICAgICAgcGFyYW1zID0gT3JkZXJlZERpY3QoKQogICAgICAgICAgICAgICAgdG9wX2tpbmQgPSBfUE9TSVRJT05BTF9PTkxZCgogICAgICAgICAgICAgICAgZm9yIGlkeCwgcGFyYW0gaW4gZW51bWVyYXRlKHBhcmFtZXRlcnMpOgogICAgICAgICAgICAgICAgICAgIGtpbmQgPSBwYXJhbS5raW5kCiAgICAgICAgICAgICAgICAgICAgaWYga2luZCA8IHRvcF9raW5kOgogICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSAnd3JvbmcgcGFyYW1ldGVyIG9yZGVyOiB7fSBiZWZvcmUge30nCiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9IG1zZy5mb3JtYXQodG9wX2tpbmQsIHBhcmFtLmtpbmQpCiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IobXNnKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRvcF9raW5kID0ga2luZAoKICAgICAgICAgICAgICAgICAgICBuYW1lID0gcGFyYW0ubmFtZQogICAgICAgICAgICAgICAgICAgIGlmIG5hbWUgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHN0cihpZHgpCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtID0gcGFyYW0ucmVwbGFjZShuYW1lPW5hbWUpCgogICAgICAgICAgICAgICAgICAgIGlmIG5hbWUgaW4gcGFyYW1zOgogICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSAnZHVwbGljYXRlIHBhcmFtZXRlciBuYW1lOiB7IXJ9Jy5mb3JtYXQobmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihtc2cpCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zW25hbWVdID0gcGFyYW0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHBhcmFtcyA9IE9yZGVyZWREaWN0KCgocGFyYW0ubmFtZSwgcGFyYW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBwYXJhbSBpbiBwYXJhbWV0ZXJzKSkKCiAgICAgICAgc2VsZi5fcGFyYW1ldGVycyA9IHR5cGVzLk1hcHBpbmdQcm94eVR5cGUocGFyYW1zKQogICAgICAgIHNlbGYuX3JldHVybl9hbm5vdGF0aW9uID0gcmV0dXJuX2Fubm90YXRpb24KCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tX2Z1bmN0aW9uKGNscywgZnVuYyk6CiAgICAgICAgJycnQ29uc3RydWN0cyBTaWduYXR1cmUgZm9yIHRoZSBnaXZlbiBweXRob24gZnVuY3Rpb24nJycKCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZnVuYywgdHlwZXMuRnVuY3Rpb25UeXBlKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCd7IXJ9IGlzIG5vdCBhIFB5dGhvbiBmdW5jdGlvbicuZm9ybWF0KGZ1bmMpKQoKICAgICAgICBQYXJhbWV0ZXIgPSBjbHMuX3BhcmFtZXRlcl9jbHMKCiAgICAgICAgIyBQYXJhbWV0ZXIgaW5mb3JtYXRpb24uCiAgICAgICAgZnVuY19jb2RlID0gZnVuYy5fX2NvZGVfXwogICAgICAgIHBvc19jb3VudCA9IGZ1bmNfY29kZS5jb19hcmdjb3VudAogICAgICAgIGFyZ19uYW1lcyA9IGZ1bmNfY29kZS5jb192YXJuYW1lcwogICAgICAgIHBvc2l0aW9uYWwgPSB0dXBsZShhcmdfbmFtZXNbOnBvc19jb3VudF0pCiAgICAgICAga2V5d29yZF9vbmx5X2NvdW50ID0gZnVuY19jb2RlLmNvX2t3b25seWFyZ2NvdW50CiAgICAgICAga2V5d29yZF9vbmx5ID0gYXJnX25hbWVzW3Bvc19jb3VudDoocG9zX2NvdW50ICsga2V5d29yZF9vbmx5X2NvdW50KV0KICAgICAgICBhbm5vdGF0aW9ucyA9IGZ1bmMuX19hbm5vdGF0aW9uc19fCiAgICAgICAgZGVmYXVsdHMgPSBmdW5jLl9fZGVmYXVsdHNfXwogICAgICAgIGt3ZGVmYXVsdHMgPSBmdW5jLl9fa3dkZWZhdWx0c19fCgogICAgICAgIGlmIGRlZmF1bHRzOgogICAgICAgICAgICBwb3NfZGVmYXVsdF9jb3VudCA9IGxlbihkZWZhdWx0cykKICAgICAgICBlbHNlOgogICAgICAgICAgICBwb3NfZGVmYXVsdF9jb3VudCA9IDAKCiAgICAgICAgcGFyYW1ldGVycyA9IFtdCgogICAgICAgICMgTm9uLWtleXdvcmQtb25seSBwYXJhbWV0ZXJzIHcvbyBkZWZhdWx0cy4KICAgICAgICBub25fZGVmYXVsdF9jb3VudCA9IHBvc19jb3VudCAtIHBvc19kZWZhdWx0X2NvdW50CiAgICAgICAgZm9yIG5hbWUgaW4gcG9zaXRpb25hbFs6bm9uX2RlZmF1bHRfY291bnRdOgogICAgICAgICAgICBhbm5vdGF0aW9uID0gYW5ub3RhdGlvbnMuZ2V0KG5hbWUsIF9lbXB0eSkKICAgICAgICAgICAgcGFyYW1ldGVycy5hcHBlbmQoUGFyYW1ldGVyKG5hbWUsIGFubm90YXRpb249YW5ub3RhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ9X1BPU0lUSU9OQUxfT1JfS0VZV09SRCkpCgogICAgICAgICMgLi4uIHcvIGRlZmF1bHRzLgogICAgICAgIGZvciBvZmZzZXQsIG5hbWUgaW4gZW51bWVyYXRlKHBvc2l0aW9uYWxbbm9uX2RlZmF1bHRfY291bnQ6XSk6CiAgICAgICAgICAgIGFubm90YXRpb24gPSBhbm5vdGF0aW9ucy5nZXQobmFtZSwgX2VtcHR5KQogICAgICAgICAgICBwYXJhbWV0ZXJzLmFwcGVuZChQYXJhbWV0ZXIobmFtZSwgYW5ub3RhdGlvbj1hbm5vdGF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZD1fUE9TSVRJT05BTF9PUl9LRVlXT1JELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdD1kZWZhdWx0c1tvZmZzZXRdKSkKCiAgICAgICAgIyAqYXJncwogICAgICAgIGlmIGZ1bmNfY29kZS5jb19mbGFncyAmIDB4MDQ6CiAgICAgICAgICAgIG5hbWUgPSBhcmdfbmFtZXNbcG9zX2NvdW50ICsga2V5d29yZF9vbmx5X2NvdW50XQogICAgICAgICAgICBhbm5vdGF0aW9uID0gYW5ub3RhdGlvbnMuZ2V0KG5hbWUsIF9lbXB0eSkKICAgICAgICAgICAgcGFyYW1ldGVycy5hcHBlbmQoUGFyYW1ldGVyKG5hbWUsIGFubm90YXRpb249YW5ub3RhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ9X1ZBUl9QT1NJVElPTkFMKSkKCiAgICAgICAgIyBLZXl3b3JkLW9ubHkgcGFyYW1ldGVycy4KICAgICAgICBmb3IgbmFtZSBpbiBrZXl3b3JkX29ubHk6CiAgICAgICAgICAgIGRlZmF1bHQgPSBfZW1wdHkKICAgICAgICAgICAgaWYga3dkZWZhdWx0cyBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGRlZmF1bHQgPSBrd2RlZmF1bHRzLmdldChuYW1lLCBfZW1wdHkpCgogICAgICAgICAgICBhbm5vdGF0aW9uID0gYW5ub3RhdGlvbnMuZ2V0KG5hbWUsIF9lbXB0eSkKICAgICAgICAgICAgcGFyYW1ldGVycy5hcHBlbmQoUGFyYW1ldGVyKG5hbWUsIGFubm90YXRpb249YW5ub3RhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ9X0tFWVdPUkRfT05MWSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ9ZGVmYXVsdCkpCiAgICAgICAgIyAqKmt3YXJncwogICAgICAgIGlmIGZ1bmNfY29kZS5jb19mbGFncyAmIDB4MDg6CiAgICAgICAgICAgIGluZGV4ID0gcG9zX2NvdW50ICsga2V5d29yZF9vbmx5X2NvdW50CiAgICAgICAgICAgIGlmIGZ1bmNfY29kZS5jb19mbGFncyAmIDB4MDQ6CiAgICAgICAgICAgICAgICBpbmRleCArPSAxCgogICAgICAgICAgICBuYW1lID0gYXJnX25hbWVzW2luZGV4XQogICAgICAgICAgICBhbm5vdGF0aW9uID0gYW5ub3RhdGlvbnMuZ2V0KG5hbWUsIF9lbXB0eSkKICAgICAgICAgICAgcGFyYW1ldGVycy5hcHBlbmQoUGFyYW1ldGVyKG5hbWUsIGFubm90YXRpb249YW5ub3RhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ9X1ZBUl9LRVlXT1JEKSkKCiAgICAgICAgcmV0dXJuIGNscyhwYXJhbWV0ZXJzLAogICAgICAgICAgICAgICAgICAgcmV0dXJuX2Fubm90YXRpb249YW5ub3RhdGlvbnMuZ2V0KCdyZXR1cm4nLCBfZW1wdHkpLAogICAgICAgICAgICAgICAgICAgX192YWxpZGF0ZV9wYXJhbWV0ZXJzX189RmFsc2UpCgogICAgQHByb3BlcnR5CiAgICBkZWYgcGFyYW1ldGVycyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fcGFyYW1ldGVycwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHJldHVybl9hbm5vdGF0aW9uKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9yZXR1cm5fYW5ub3RhdGlvbgoKICAgIGRlZiByZXBsYWNlKHNlbGYsICosIHBhcmFtZXRlcnM9X3ZvaWQsIHJldHVybl9hbm5vdGF0aW9uPV92b2lkKToKICAgICAgICAnJydDcmVhdGVzIGEgY3VzdG9taXplZCBjb3B5IG9mIHRoZSBTaWduYXR1cmUuCiAgICAgICAgUGFzcyAncGFyYW1ldGVycycgYW5kL29yICdyZXR1cm5fYW5ub3RhdGlvbicgYXJndW1lbnRzCiAgICAgICAgdG8gb3ZlcnJpZGUgdGhlbSBpbiB0aGUgbmV3IGNvcHkuCiAgICAgICAgJycnCgogICAgICAgIGlmIHBhcmFtZXRlcnMgaXMgX3ZvaWQ6CiAgICAgICAgICAgIHBhcmFtZXRlcnMgPSBzZWxmLnBhcmFtZXRlcnMudmFsdWVzKCkKCiAgICAgICAgaWYgcmV0dXJuX2Fubm90YXRpb24gaXMgX3ZvaWQ6CiAgICAgICAgICAgIHJldHVybl9hbm5vdGF0aW9uID0gc2VsZi5fcmV0dXJuX2Fubm90YXRpb24KCiAgICAgICAgcmV0dXJuIHR5cGUoc2VsZikocGFyYW1ldGVycywKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5fYW5ub3RhdGlvbj1yZXR1cm5fYW5ub3RhdGlvbikKCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiAobm90IGlzc3ViY2xhc3ModHlwZShvdGhlciksIFNpZ25hdHVyZSkgb3IKICAgICAgICAgICAgICAgICAgICBzZWxmLnJldHVybl9hbm5vdGF0aW9uICE9IG90aGVyLnJldHVybl9hbm5vdGF0aW9uIG9yCiAgICAgICAgICAgICAgICAgICAgbGVuKHNlbGYucGFyYW1ldGVycykgIT0gbGVuKG90aGVyLnBhcmFtZXRlcnMpKToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgIG90aGVyX3Bvc2l0aW9ucyA9IHtwYXJhbTogaWR4CiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpZHgsIHBhcmFtIGluIGVudW1lcmF0ZShvdGhlci5wYXJhbWV0ZXJzLmtleXMoKSl9CgogICAgICAgIGZvciBpZHgsIChwYXJhbV9uYW1lLCBwYXJhbSkgaW4gZW51bWVyYXRlKHNlbGYucGFyYW1ldGVycy5pdGVtcygpKToKICAgICAgICAgICAgaWYgcGFyYW0ua2luZCA9PSBfS0VZV09SRF9PTkxZOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIG90aGVyX3BhcmFtID0gb3RoZXIucGFyYW1ldGVyc1twYXJhbV9uYW1lXQogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBwYXJhbSAhPSBvdGhlcl9wYXJhbToKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgb3RoZXJfaWR4ID0gb3RoZXJfcG9zaXRpb25zW3BhcmFtX25hbWVdCiAgICAgICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIChpZHggIT0gb3RoZXJfaWR4IG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtICE9IG90aGVyLnBhcmFtZXRlcnNbcGFyYW1fbmFtZV0pOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gbm90IHNlbGYuX19lcV9fKG90aGVyKQoKICAgIGRlZiBfYmluZChzZWxmLCBhcmdzLCBrd2FyZ3MsICosIHBhcnRpYWw9RmFsc2UpOgogICAgICAgICcnJ1ByaXZhdGUgbWV0aG9kLiAgRG9uJ3QgdXNlIGRpcmVjdGx5LicnJwoKICAgICAgICBhcmd1bWVudHMgPSBPcmRlcmVkRGljdCgpCgogICAgICAgIHBhcmFtZXRlcnMgPSBpdGVyKHNlbGYucGFyYW1ldGVycy52YWx1ZXMoKSkKICAgICAgICBwYXJhbWV0ZXJzX2V4ID0gKCkKICAgICAgICBhcmdfdmFscyA9IGl0ZXIoYXJncykKCiAgICAgICAgaWYgcGFydGlhbDoKICAgICAgICAgICAgIyBTdXBwb3J0IGZvciBiaW5kaW5nIGFyZ3VtZW50cyB0byAnZnVuY3Rvb2xzLnBhcnRpYWwnIG9iamVjdHMuCiAgICAgICAgICAgICMgU2VlICdmdW5jdG9vbHMucGFydGlhbCcgY2FzZSBpbiAnc2lnbmF0dXJlKCknIGltcGxlbWVudGF0aW9uCiAgICAgICAgICAgICMgZm9yIGRldGFpbHMuCiAgICAgICAgICAgIGZvciBwYXJhbV9uYW1lLCBwYXJhbSBpbiBzZWxmLnBhcmFtZXRlcnMuaXRlbXMoKToKICAgICAgICAgICAgICAgIGlmIChwYXJhbS5fcGFydGlhbF9rd2FyZyBhbmQgcGFyYW1fbmFtZSBub3QgaW4ga3dhcmdzKToKICAgICAgICAgICAgICAgICAgICAjIFNpbXVsYXRpbmcgJ2Z1bmN0b29scy5wYXJ0aWFsJyBiZWhhdmlvcgogICAgICAgICAgICAgICAgICAgIGt3YXJnc1twYXJhbV9uYW1lXSA9IHBhcmFtLmRlZmF1bHQKCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgIyBMZXQncyBpdGVyYXRlIHRocm91Z2ggdGhlIHBvc2l0aW9uYWwgYXJndW1lbnRzIGFuZCBjb3JyZXNwb25kaW5nCiAgICAgICAgICAgICMgcGFyYW1ldGVycwogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBhcmdfdmFsID0gbmV4dChhcmdfdmFscykKICAgICAgICAgICAgZXhjZXB0IFN0b3BJdGVyYXRpb246CiAgICAgICAgICAgICAgICAjIE5vIG1vcmUgcG9zaXRpb25hbCBhcmd1bWVudHMKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBwYXJhbSA9IG5leHQocGFyYW1ldGVycykKICAgICAgICAgICAgICAgIGV4Y2VwdCBTdG9wSXRlcmF0aW9uOgogICAgICAgICAgICAgICAgICAgICMgTm8gbW9yZSBwYXJhbWV0ZXJzLiBUaGF0J3MgaXQuIEp1c3QgbmVlZCB0byBjaGVjayB0aGF0CiAgICAgICAgICAgICAgICAgICAgIyB3ZSBoYXZlIG5vIGBrd2FyZ3NgIGFmdGVyIHRoaXMgd2hpbGUgbG9vcAogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIHBhcmFtLmtpbmQgPT0gX1ZBUl9QT1NJVElPTkFMOgogICAgICAgICAgICAgICAgICAgICAgICAjIFRoYXQncyBPSywganVzdCBlbXB0eSAqYXJncy4gIExldCdzIHN0YXJ0IHBhcnNpbmcKICAgICAgICAgICAgICAgICAgICAgICAgIyBrd2FyZ3MKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbGlmIHBhcmFtLm5hbWUgaW4ga3dhcmdzOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBwYXJhbS5raW5kID09IF9QT1NJVElPTkFMX09OTFk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSAne2FyZyFyfSBwYXJhbWV0ZXIgaXMgcG9zaXRpb25hbCBvbmx5LCAnIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXQgd2FzIHBhc3NlZCBhcyBhIGtleXdvcmQnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSBtc2cuZm9ybWF0KGFyZz1wYXJhbS5uYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKG1zZykgZnJvbSBOb25lCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnNfZXggPSAocGFyYW0sKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsaWYgKHBhcmFtLmtpbmQgPT0gX1ZBUl9LRVlXT1JEIG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtLmRlZmF1bHQgaXMgbm90IF9lbXB0eSk6CiAgICAgICAgICAgICAgICAgICAgICAgICMgVGhhdCdzIGZpbmUgdG9vIC0gd2UgaGF2ZSBhIGRlZmF1bHQgdmFsdWUgZm9yIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgIyBwYXJhbWV0ZXIuICBTbywgbGV0cyBzdGFydCBwYXJzaW5nIGBrd2FyZ3NgLCBzdGFydGluZwogICAgICAgICAgICAgICAgICAgICAgICAjIHdpdGggdGhlIGN1cnJlbnQgcGFyYW1ldGVyCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnNfZXggPSAocGFyYW0sKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBhcnRpYWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzX2V4ID0gKHBhcmFtLCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSAne2FyZyFyfSBwYXJhbWV0ZXIgbGFja2luZyBkZWZhdWx0IHZhbHVlJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gbXNnLmZvcm1hdChhcmc9cGFyYW0ubmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihtc2cpIGZyb20gTm9uZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyBXZSBoYXZlIGEgcG9zaXRpb25hbCBhcmd1bWVudCB0byBwcm9jZXNzCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgcGFyYW0gPSBuZXh0KHBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICBleGNlcHQgU3RvcEl0ZXJhdGlvbjoKICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ3RvbyBtYW55IHBvc2l0aW9uYWwgYXJndW1lbnRzJykgZnJvbSBOb25lCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIHBhcmFtLmtpbmQgaW4gKF9WQVJfS0VZV09SRCwgX0tFWVdPUkRfT05MWSk6CiAgICAgICAgICAgICAgICAgICAgICAgICMgTG9va3MgbGlrZSB3ZSBoYXZlIG5vIHBhcmFtZXRlciBmb3IgdGhpcyBwb3NpdGlvbmFsCiAgICAgICAgICAgICAgICAgICAgICAgICMgYXJndW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCd0b28gbWFueSBwb3NpdGlvbmFsIGFyZ3VtZW50cycpCgogICAgICAgICAgICAgICAgICAgIGlmIHBhcmFtLmtpbmQgPT0gX1ZBUl9QT1NJVElPTkFMOgogICAgICAgICAgICAgICAgICAgICAgICAjIFdlIGhhdmUgYW4gJyphcmdzJy1saWtlIGFyZ3VtZW50LCBsZXQncyBmaWxsIGl0IHdpdGgKICAgICAgICAgICAgICAgICAgICAgICAgIyBhbGwgcG9zaXRpb25hbCBhcmd1bWVudHMgd2UgaGF2ZSBsZWZ0IGFuZCBtb3ZlIG9uIHRvCiAgICAgICAgICAgICAgICAgICAgICAgICMgdGhlIG5leHQgcGhhc2UKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gW2FyZ192YWxdCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5leHRlbmQoYXJnX3ZhbHMpCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1twYXJhbS5uYW1lXSA9IHR1cGxlKHZhbHVlcykKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICAgICAgaWYgcGFyYW0ubmFtZSBpbiBrd2FyZ3M6CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignbXVsdGlwbGUgdmFsdWVzIGZvciBhcmd1bWVudCAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2FyZyFyfScuZm9ybWF0KGFyZz1wYXJhbS5uYW1lKSkKCiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzW3BhcmFtLm5hbWVdID0gYXJnX3ZhbAoKICAgICAgICAjIE5vdywgd2UgaXRlcmF0ZSB0aHJvdWdoIHRoZSByZW1haW5pbmcgcGFyYW1ldGVycyB0byBwcm9jZXNzCiAgICAgICAgIyBrZXl3b3JkIGFyZ3VtZW50cwogICAgICAgIGt3YXJnc19wYXJhbSA9IE5vbmUKICAgICAgICBmb3IgcGFyYW0gaW4gaXRlcnRvb2xzLmNoYWluKHBhcmFtZXRlcnNfZXgsIHBhcmFtZXRlcnMpOgogICAgICAgICAgICBpZiBwYXJhbS5raW5kID09IF9QT1NJVElPTkFMX09OTFk6CiAgICAgICAgICAgICAgICAjIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbiBpbiBjYXNlIG9mIGEgcHJvcGVybHkgYnVpbHQKICAgICAgICAgICAgICAgICMgU2lnbmF0dXJlIG9iamVjdCAoYnV0IGxldCdzIGhhdmUgdGhpcyBjaGVjayBoZXJlCiAgICAgICAgICAgICAgICAjIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW91ciBqdXN0IGluIGNhc2UpCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ3thcmchcn0gcGFyYW1ldGVyIGlzIHBvc2l0aW9uYWwgb25seSwgJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXQgd2FzIHBhc3NlZCBhcyBhIGtleXdvcmQnLiBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0KGFyZz1wYXJhbS5uYW1lKSkKCiAgICAgICAgICAgIGlmIHBhcmFtLmtpbmQgPT0gX1ZBUl9LRVlXT1JEOgogICAgICAgICAgICAgICAgIyBNZW1vcml6ZSB0aGF0IHdlIGhhdmUgYSAnKiprd2FyZ3MnLWxpa2UgcGFyYW1ldGVyCiAgICAgICAgICAgICAgICBrd2FyZ3NfcGFyYW0gPSBwYXJhbQogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIHBhcmFtX25hbWUgPSBwYXJhbS5uYW1lCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGFyZ192YWwgPSBrd2FyZ3MucG9wKHBhcmFtX25hbWUpCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgICMgV2UgaGF2ZSBubyB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIuICBJdCdzIGZpbmUgdGhvdWdoLAogICAgICAgICAgICAgICAgIyBpZiBpdCBoYXMgYSBkZWZhdWx0IHZhbHVlLCBvciBpdCBpcyBhbiAnKmFyZ3MnLWxpa2UKICAgICAgICAgICAgICAgICMgcGFyYW1ldGVyLCBsZWZ0IGFsb25lIGJ5IHRoZSBwcm9jZXNzaW5nIG9mIHBvc2l0aW9uYWwKICAgICAgICAgICAgICAgICMgYXJndW1lbnRzLgogICAgICAgICAgICAgICAgaWYgKG5vdCBwYXJ0aWFsIGFuZCBwYXJhbS5raW5kICE9IF9WQVJfUE9TSVRJT05BTCBhbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtLmRlZmF1bHQgaXMgX2VtcHR5KToKICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ3thcmchcn0gcGFyYW1ldGVyIGxhY2tpbmcgZGVmYXVsdCB2YWx1ZScuIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0KGFyZz1wYXJhbV9uYW1lKSkgZnJvbSBOb25lCgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYXJndW1lbnRzW3BhcmFtX25hbWVdID0gYXJnX3ZhbAoKICAgICAgICBpZiBrd2FyZ3M6CiAgICAgICAgICAgIGlmIGt3YXJnc19wYXJhbSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICMgUHJvY2VzcyBvdXIgJyoqa3dhcmdzJy1saWtlIHBhcmFtZXRlcgogICAgICAgICAgICAgICAgYXJndW1lbnRzW2t3YXJnc19wYXJhbS5uYW1lXSA9IGt3YXJncwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCd0b28gbWFueSBrZXl3b3JkIGFyZ3VtZW50cycpCgogICAgICAgIHJldHVybiBzZWxmLl9ib3VuZF9hcmd1bWVudHNfY2xzKHNlbGYsIGFyZ3VtZW50cykKCiAgICBkZWYgYmluZChfX2JpbmRfc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAnJydHZXQgYSBCb3VuZEFyZ3VtZW50cyBvYmplY3QsIHRoYXQgbWFwcyB0aGUgcGFzc2VkIGBhcmdzYAogICAgICAgIGFuZCBga3dhcmdzYCB0byB0aGUgZnVuY3Rpb24ncyBzaWduYXR1cmUuICBSYWlzZXMgYFR5cGVFcnJvcmAKICAgICAgICBpZiB0aGUgcGFzc2VkIGFyZ3VtZW50cyBjYW4gbm90IGJlIGJvdW5kLgogICAgICAgICcnJwogICAgICAgIHJldHVybiBfX2JpbmRfc2VsZi5fYmluZChhcmdzLCBrd2FyZ3MpCgogICAgZGVmIGJpbmRfcGFydGlhbChfX2JpbmRfc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAnJydHZXQgYSBCb3VuZEFyZ3VtZW50cyBvYmplY3QsIHRoYXQgcGFydGlhbGx5IG1hcHMgdGhlCiAgICAgICAgcGFzc2VkIGBhcmdzYCBhbmQgYGt3YXJnc2AgdG8gdGhlIGZ1bmN0aW9uJ3Mgc2lnbmF0dXJlLgogICAgICAgIFJhaXNlcyBgVHlwZUVycm9yYCBpZiB0aGUgcGFzc2VkIGFyZ3VtZW50cyBjYW4gbm90IGJlIGJvdW5kLgogICAgICAgICcnJwogICAgICAgIHJldHVybiBfX2JpbmRfc2VsZi5fYmluZChhcmdzLCBrd2FyZ3MsIHBhcnRpYWw9VHJ1ZSkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIHJlbmRlcl9rd19vbmx5X3NlcGFyYXRvciA9IFRydWUKICAgICAgICBmb3IgaWR4LCBwYXJhbSBpbiBlbnVtZXJhdGUoc2VsZi5wYXJhbWV0ZXJzLnZhbHVlcygpKToKICAgICAgICAgICAgZm9ybWF0dGVkID0gc3RyKHBhcmFtKQoKICAgICAgICAgICAga2luZCA9IHBhcmFtLmtpbmQKICAgICAgICAgICAgaWYga2luZCA9PSBfVkFSX1BPU0lUSU9OQUw6CiAgICAgICAgICAgICAgICAjIE9LLCB3ZSBoYXZlIGFuICcqYXJncyctbGlrZSBwYXJhbWV0ZXIsIHNvIHdlIHdvbid0IG5lZWQKICAgICAgICAgICAgICAgICMgYSAnKicgdG8gc2VwYXJhdGUga2V5d29yZC1vbmx5IGFyZ3VtZW50cwogICAgICAgICAgICAgICAgcmVuZGVyX2t3X29ubHlfc2VwYXJhdG9yID0gRmFsc2UKICAgICAgICAgICAgZWxpZiBraW5kID09IF9LRVlXT1JEX09OTFkgYW5kIHJlbmRlcl9rd19vbmx5X3NlcGFyYXRvcjoKICAgICAgICAgICAgICAgICMgV2UgaGF2ZSBhIGtleXdvcmQtb25seSBwYXJhbWV0ZXIgdG8gcmVuZGVyIGFuZCB3ZSBoYXZlbid0CiAgICAgICAgICAgICAgICAjIHJlbmRlcmVkIGFuICcqYXJncyctbGlrZSBwYXJhbWV0ZXIgYmVmb3JlLCBzbyBhZGQgYSAnKicKICAgICAgICAgICAgICAgICMgc2VwYXJhdG9yIHRvIHRoZSBwYXJhbWV0ZXJzIGxpc3QgKCJmb28oYXJnMSwgKiwgYXJnMikiIGNhc2UpCiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKCcqJykKICAgICAgICAgICAgICAgICMgVGhpcyBjb25kaXRpb24gc2hvdWxkIGJlIG9ubHkgdHJpZ2dlcmVkIG9uY2UsIHNvCiAgICAgICAgICAgICAgICAjIHJlc2V0IHRoZSBmbGFnCiAgICAgICAgICAgICAgICByZW5kZXJfa3dfb25seV9zZXBhcmF0b3IgPSBGYWxzZQoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChmb3JtYXR0ZWQpCgogICAgICAgIHJlbmRlcmVkID0gJyh7fSknLmZvcm1hdCgnLCAnLmpvaW4ocmVzdWx0KSkKCiAgICAgICAgaWYgc2VsZi5yZXR1cm5fYW5ub3RhdGlvbiBpcyBub3QgX2VtcHR5OgogICAgICAgICAgICBhbm5vID0gZm9ybWF0YW5ub3RhdGlvbihzZWxmLnJldHVybl9hbm5vdGF0aW9uKQogICAgICAgICAgICByZW5kZXJlZCArPSAnIC0+IHt9Jy5mb3JtYXQoYW5ubykKCiAgICAgICAgcmV0dXJuIHJlbmRlcmVkCg==',
'/Lib/_dummy_thread.py':'IiIiRHJvcC1pbiByZXBsYWNlbWVudCBmb3IgdGhlIHRocmVhZCBtb2R1bGUuCgpNZWFudCB0byBiZSB1c2VkIGFzIGEgYnJhaW4tZGVhZCBzdWJzdGl0dXRlIHNvIHRoYXQgdGhyZWFkZWQgY29kZSBkb2VzCm5vdCBuZWVkIHRvIGJlIHJld3JpdHRlbiBmb3Igd2hlbiB0aGUgdGhyZWFkIG1vZHVsZSBpcyBub3QgcHJlc2VudC4KClN1Z2dlc3RlZCB1c2FnZSBpczo6CgogICAgdHJ5OgogICAgICAgIGltcG9ydCBfdGhyZWFkCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgaW1wb3J0IF9kdW1teV90aHJlYWQgYXMgX3RocmVhZAoKIiIiCiMgRXhwb3J0cyBvbmx5IHRoaW5ncyBzcGVjaWZpZWQgYnkgdGhyZWFkIGRvY3VtZW50YXRpb247CiMgc2tpcHBpbmcgb2Jzb2xldGUgc3lub255bXMgYWxsb2NhdGUoKSwgc3RhcnRfbmV3KCksIGV4aXRfdGhyZWFkKCkuCl9fYWxsX18gPSBbJ2Vycm9yJywgJ3N0YXJ0X25ld190aHJlYWQnLCAnZXhpdCcsICdnZXRfaWRlbnQnLCAnYWxsb2NhdGVfbG9jaycsCiAgICAgICAgICAgJ2ludGVycnVwdF9tYWluJywgJ0xvY2tUeXBlJ10KCiMgQSBkdW1teSB2YWx1ZQpUSU1FT1VUX01BWCA9IDIqKjMxCgojIE5PVEU6IHRoaXMgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBlYXJseSBpbiB0aGUgZXh0ZW5zaW9uIGJ1aWxkaW5nIHByb2Nlc3MsCiMgYW5kIHNvIHRvcCBsZXZlbCBpbXBvcnRzIG9mIG90aGVyIG1vZHVsZXMgc2hvdWxkIGJlIGF2b2lkZWQuICBJbnN0ZWFkLCBhbGwKIyBpbXBvcnRzIGFyZSBkb25lIHdoZW4gbmVlZGVkIG9uIGEgZnVuY3Rpb24tYnktZnVuY3Rpb24gYmFzaXMuICBTaW5jZSB0aHJlYWRzCiMgYXJlIGRpc2FibGVkLCB0aGUgaW1wb3J0IGxvY2sgc2hvdWxkIG5vdCBiZSBhbiBpc3N1ZSBhbnl3YXkgKD8/KS4KCmVycm9yID0gUnVudGltZUVycm9yCgpkZWYgc3RhcnRfbmV3X3RocmVhZChmdW5jdGlvbiwgYXJncywga3dhcmdzPXt9KToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuc3RhcnRfbmV3X3RocmVhZCgpLgoKICAgIENvbXBhdGliaWxpdHkgaXMgbWFpbnRhaW5lZCBieSBtYWtpbmcgc3VyZSB0aGF0IGBgYXJnc2BgIGlzIGEKICAgIHR1cGxlIGFuZCBgYGt3YXJnc2BgIGlzIGEgZGljdGlvbmFyeS4gIElmIGFuIGV4Y2VwdGlvbiBpcyByYWlzZWQKICAgIGFuZCBpdCBpcyBTeXN0ZW1FeGl0ICh3aGljaCBjYW4gYmUgZG9uZSBieSBfdGhyZWFkLmV4aXQoKSkgaXQgaXMKICAgIGNhdWdodCBhbmQgbm90aGluZyBpcyBkb25lOyBhbGwgb3RoZXIgZXhjZXB0aW9ucyBhcmUgcHJpbnRlZCBvdXQKICAgIGJ5IHVzaW5nIHRyYWNlYmFjay5wcmludF9leGMoKS4KCiAgICBJZiB0aGUgZXhlY3V0ZWQgZnVuY3Rpb24gY2FsbHMgaW50ZXJydXB0X21haW4gdGhlIEtleWJvYXJkSW50ZXJydXB0IHdpbGwgYmUKICAgIHJhaXNlZCB3aGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zLgoKICAgICIiIgogICAgaWYgdHlwZShhcmdzKSAhPSB0eXBlKHR1cGxlKCkpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiMm5kIGFyZyBtdXN0IGJlIGEgdHVwbGUiKQogICAgaWYgdHlwZShrd2FyZ3MpICE9IHR5cGUoZGljdCgpKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoIjNyZCBhcmcgbXVzdCBiZSBhIGRpY3QiKQogICAgZ2xvYmFsIF9tYWluCiAgICBfbWFpbiA9IEZhbHNlCiAgICB0cnk6CiAgICAgICAgZnVuY3Rpb24oKmFyZ3MsICoqa3dhcmdzKQogICAgZXhjZXB0IFN5c3RlbUV4aXQ6CiAgICAgICAgcGFzcwogICAgZXhjZXB0OgogICAgICAgIGltcG9ydCB0cmFjZWJhY2sKICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkKICAgIF9tYWluID0gVHJ1ZQogICAgZ2xvYmFsIF9pbnRlcnJ1cHQKICAgIGlmIF9pbnRlcnJ1cHQ6CiAgICAgICAgX2ludGVycnVwdCA9IEZhbHNlCiAgICAgICAgcmFpc2UgS2V5Ym9hcmRJbnRlcnJ1cHQKCmRlZiBleGl0KCk6CiAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLmV4aXQoKS4iIiIKICAgIHJhaXNlIFN5c3RlbUV4aXQKCmRlZiBnZXRfaWRlbnQoKToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuZ2V0X2lkZW50KCkuCgogICAgU2luY2UgdGhpcyBtb2R1bGUgc2hvdWxkIG9ubHkgYmUgdXNlZCB3aGVuIF90aHJlYWRtb2R1bGUgaXMgbm90CiAgICBhdmFpbGFibGUsIGl0IGlzIHNhZmUgdG8gYXNzdW1lIHRoYXQgdGhlIGN1cnJlbnQgcHJvY2VzcyBpcyB0aGUKICAgIG9ubHkgdGhyZWFkLiAgVGh1cyBhIGNvbnN0YW50IGNhbiBiZSBzYWZlbHkgcmV0dXJuZWQuCiAgICAiIiIKICAgIHJldHVybiAtMQoKZGVmIGFsbG9jYXRlX2xvY2soKToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuYWxsb2NhdGVfbG9jaygpLiIiIgogICAgcmV0dXJuIExvY2tUeXBlKCkKCmRlZiBzdGFja19zaXplKHNpemU9Tm9uZSk6CiAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLnN0YWNrX3NpemUoKS4iIiIKICAgIGlmIHNpemUgaXMgbm90IE5vbmU6CiAgICAgICAgcmFpc2UgZXJyb3IoInNldHRpbmcgdGhyZWFkIHN0YWNrIHNpemUgbm90IHN1cHBvcnRlZCIpCiAgICByZXR1cm4gMAoKY2xhc3MgTG9ja1R5cGUob2JqZWN0KToKICAgICIiIkNsYXNzIGltcGxlbWVudGluZyBkdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLkxvY2tUeXBlLgoKICAgIENvbXBhdGliaWxpdHkgaXMgbWFpbnRhaW5lZCBieSBtYWludGFpbmluZyBzZWxmLmxvY2tlZF9zdGF0dXMKICAgIHdoaWNoIGlzIGEgYm9vbGVhbiB0aGF0IHN0b3JlcyB0aGUgc3RhdGUgb2YgdGhlIGxvY2suICBQaWNrbGluZyBvZgogICAgdGhlIGxvY2ssIHRob3VnaCwgc2hvdWxkIG5vdCBiZSBkb25lIHNpbmNlIGlmIHRoZSBfdGhyZWFkIG1vZHVsZSBpcwogICAgdGhlbiB1c2VkIHdpdGggYW4gdW5waWNrbGVkIGBgbG9jaygpYGAgZnJvbSBoZXJlIHByb2JsZW1zIGNvdWxkCiAgICBvY2N1ciBmcm9tIHRoaXMgY2xhc3Mgbm90IGhhdmluZyBhdG9taWMgbWV0aG9kcy4KCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5sb2NrZWRfc3RhdHVzID0gRmFsc2UKCiAgICBkZWYgYWNxdWlyZShzZWxmLCB3YWl0ZmxhZz1Ob25lLCB0aW1lb3V0PS0xKToKICAgICAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBhY3F1aXJlKCkuCgogICAgICAgIEZvciBibG9ja2luZyBjYWxscywgc2VsZi5sb2NrZWRfc3RhdHVzIGlzIGF1dG9tYXRpY2FsbHkgc2V0IHRvCiAgICAgICAgVHJ1ZSBhbmQgcmV0dXJuZWQgYXBwcm9wcmlhdGVseSBiYXNlZCBvbiB2YWx1ZSBvZgogICAgICAgIGBgd2FpdGZsYWdgYC4gIElmIGl0IGlzIG5vbi1ibG9ja2luZywgdGhlbiB0aGUgdmFsdWUgaXMKICAgICAgICBhY3R1YWxseSBjaGVja2VkIGFuZCBub3Qgc2V0IGlmIGl0IGlzIGFscmVhZHkgYWNxdWlyZWQuICBUaGlzCiAgICAgICAgaXMgYWxsIGRvbmUgc28gdGhhdCB0aHJlYWRpbmcuQ29uZGl0aW9uJ3MgYXNzZXJ0IHN0YXRlbWVudHMKICAgICAgICBhcmVuJ3QgdHJpZ2dlcmVkIGFuZCB0aHJvdyBhIGxpdHRsZSBmaXQuCgogICAgICAgICIiIgogICAgICAgIGlmIHdhaXRmbGFnIGlzIE5vbmUgb3Igd2FpdGZsYWc6CiAgICAgICAgICAgIHNlbGYubG9ja2VkX3N0YXR1cyA9IFRydWUKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5sb2NrZWRfc3RhdHVzOgogICAgICAgICAgICAgICAgc2VsZi5sb2NrZWRfc3RhdHVzID0gVHJ1ZQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIHRpbWVvdXQgPiAwOgogICAgICAgICAgICAgICAgICAgIGltcG9ydCB0aW1lCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCh0aW1lb3V0KQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgX19lbnRlcl9fID0gYWNxdWlyZQoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCB0eXAsIHZhbCwgdGIpOgogICAgICAgIHNlbGYucmVsZWFzZSgpCgogICAgZGVmIHJlbGVhc2Uoc2VsZik6CiAgICAgICAgIiIiUmVsZWFzZSB0aGUgZHVtbXkgbG9jay4iIiIKICAgICAgICAjIFhYWCBQZXJoYXBzIHNob3VsZG4ndCBhY3R1YWxseSBib3RoZXIgdG8gdGVzdD8gIENvdWxkIGxlYWQKICAgICAgICAjICAgICB0byBwcm9ibGVtcyBmb3IgY29tcGxleCwgdGhyZWFkZWQgY29kZS4KICAgICAgICBpZiBub3Qgc2VsZi5sb2NrZWRfc3RhdHVzOgogICAgICAgICAgICByYWlzZSBlcnJvcgogICAgICAgIHNlbGYubG9ja2VkX3N0YXR1cyA9IEZhbHNlCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgbG9ja2VkKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmxvY2tlZF9zdGF0dXMKCiMgVXNlZCB0byBzaWduYWwgdGhhdCBpbnRlcnJ1cHRfbWFpbiB3YXMgY2FsbGVkIGluIGEgInRocmVhZCIKX2ludGVycnVwdCA9IEZhbHNlCiMgVHJ1ZSB3aGVuIG5vdCBleGVjdXRpbmcgaW4gYSAidGhyZWFkIgpfbWFpbiA9IFRydWUKCmRlZiBpbnRlcnJ1cHRfbWFpbigpOgogICAgIiIiU2V0IF9pbnRlcnJ1cHQgZmxhZyB0byBUcnVlIHRvIGhhdmUgc3RhcnRfbmV3X3RocmVhZCByYWlzZQogICAgS2V5Ym9hcmRJbnRlcnJ1cHQgdXBvbiBleGl0aW5nLiIiIgogICAgaWYgX21haW46CiAgICAgICAgcmFpc2UgS2V5Ym9hcmRJbnRlcnJ1cHQKICAgIGVsc2U6CiAgICAgICAgZ2xvYmFsIF9pbnRlcnJ1cHQKICAgICAgICBfaW50ZXJydXB0ID0gVHJ1ZQo=',
'/Lib/_threading_local.py':'IiIiVGhyZWFkLWxvY2FsIG9iamVjdHMuDQoNCihOb3RlIHRoYXQgdGhpcyBtb2R1bGUgcHJvdmlkZXMgYSBQeXRob24gdmVyc2lvbiBvZiB0aGUgdGhyZWFkaW5nLmxvY2FsDQogY2xhc3MuICBEZXBlbmRpbmcgb24gdGhlIHZlcnNpb24gb2YgUHl0aG9uIHlvdSdyZSB1c2luZywgdGhlcmUgbWF5IGJlIGENCiBmYXN0ZXIgb25lIGF2YWlsYWJsZS4gIFlvdSBzaG91bGQgYWx3YXlzIGltcG9ydCB0aGUgYGxvY2FsYCBjbGFzcyBmcm9tDQogYHRocmVhZGluZ2AuKQ0KDQpUaHJlYWQtbG9jYWwgb2JqZWN0cyBzdXBwb3J0IHRoZSBtYW5hZ2VtZW50IG9mIHRocmVhZC1sb2NhbCBkYXRhLg0KSWYgeW91IGhhdmUgZGF0YSB0aGF0IHlvdSB3YW50IHRvIGJlIGxvY2FsIHRvIGEgdGhyZWFkLCBzaW1wbHkgY3JlYXRlDQphIHRocmVhZC1sb2NhbCBvYmplY3QgYW5kIHVzZSBpdHMgYXR0cmlidXRlczoNCg0KICA+Pj4gbXlkYXRhID0gbG9jYWwoKQ0KICA+Pj4gbXlkYXRhLm51bWJlciA9IDQyDQogID4+PiBteWRhdGEubnVtYmVyDQogIDQyDQoNCllvdSBjYW4gYWxzbyBhY2Nlc3MgdGhlIGxvY2FsLW9iamVjdCdzIGRpY3Rpb25hcnk6DQoNCiAgPj4+IG15ZGF0YS5fX2RpY3RfXw0KICB7J251bWJlcic6IDQyfQ0KICA+Pj4gbXlkYXRhLl9fZGljdF9fLnNldGRlZmF1bHQoJ3dpZGdldHMnLCBbXSkNCiAgW10NCiAgPj4+IG15ZGF0YS53aWRnZXRzDQogIFtdDQoNCldoYXQncyBpbXBvcnRhbnQgYWJvdXQgdGhyZWFkLWxvY2FsIG9iamVjdHMgaXMgdGhhdCB0aGVpciBkYXRhIGFyZQ0KbG9jYWwgdG8gYSB0aHJlYWQuIElmIHdlIGFjY2VzcyB0aGUgZGF0YSBpbiBhIGRpZmZlcmVudCB0aHJlYWQ6DQoNCiAgPj4+IGxvZyA9IFtdDQogID4+PiBkZWYgZigpOg0KICAuLi4gICAgIGl0ZW1zID0gc29ydGVkKG15ZGF0YS5fX2RpY3RfXy5pdGVtcygpKQ0KICAuLi4gICAgIGxvZy5hcHBlbmQoaXRlbXMpDQogIC4uLiAgICAgbXlkYXRhLm51bWJlciA9IDExDQogIC4uLiAgICAgbG9nLmFwcGVuZChteWRhdGEubnVtYmVyKQ0KDQogID4+PiBpbXBvcnQgdGhyZWFkaW5nDQogID4+PiB0aHJlYWQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1mKQ0KICA+Pj4gdGhyZWFkLnN0YXJ0KCkNCiAgPj4+IHRocmVhZC5qb2luKCkNCiAgPj4+IGxvZw0KICBbW10sIDExXQ0KDQp3ZSBnZXQgZGlmZmVyZW50IGRhdGEuICBGdXJ0aGVybW9yZSwgY2hhbmdlcyBtYWRlIGluIHRoZSBvdGhlciB0aHJlYWQNCmRvbid0IGFmZmVjdCBkYXRhIHNlZW4gaW4gdGhpcyB0aHJlYWQ6DQoNCiAgPj4+IG15ZGF0YS5udW1iZXINCiAgNDINCg0KT2YgY291cnNlLCB2YWx1ZXMgeW91IGdldCBmcm9tIGEgbG9jYWwgb2JqZWN0LCBpbmNsdWRpbmcgYSBfX2RpY3RfXw0KYXR0cmlidXRlLCBhcmUgZm9yIHdoYXRldmVyIHRocmVhZCB3YXMgY3VycmVudCBhdCB0aGUgdGltZSB0aGUNCmF0dHJpYnV0ZSB3YXMgcmVhZC4gIEZvciB0aGF0IHJlYXNvbiwgeW91IGdlbmVyYWxseSBkb24ndCB3YW50IHRvIHNhdmUNCnRoZXNlIHZhbHVlcyBhY3Jvc3MgdGhyZWFkcywgYXMgdGhleSBhcHBseSBvbmx5IHRvIHRoZSB0aHJlYWQgdGhleQ0KY2FtZSBmcm9tLg0KDQpZb3UgY2FuIGNyZWF0ZSBjdXN0b20gbG9jYWwgb2JqZWN0cyBieSBzdWJjbGFzc2luZyB0aGUgbG9jYWwgY2xhc3M6DQoNCiAgPj4+IGNsYXNzIE15TG9jYWwobG9jYWwpOg0KICAuLi4gICAgIG51bWJlciA9IDINCiAgLi4uICAgICBpbml0aWFsaXplZCA9IEZhbHNlDQogIC4uLiAgICAgZGVmIF9faW5pdF9fKHNlbGYsICoqa3cpOg0KICAuLi4gICAgICAgICBpZiBzZWxmLmluaXRpYWxpemVkOg0KICAuLi4gICAgICAgICAgICAgcmFpc2UgU3lzdGVtRXJyb3IoJ19faW5pdF9fIGNhbGxlZCB0b28gbWFueSB0aW1lcycpDQogIC4uLiAgICAgICAgIHNlbGYuaW5pdGlhbGl6ZWQgPSBUcnVlDQogIC4uLiAgICAgICAgIHNlbGYuX19kaWN0X18udXBkYXRlKGt3KQ0KICAuLi4gICAgIGRlZiBzcXVhcmVkKHNlbGYpOg0KICAuLi4gICAgICAgICByZXR1cm4gc2VsZi5udW1iZXIgKiogMg0KDQpUaGlzIGNhbiBiZSB1c2VmdWwgdG8gc3VwcG9ydCBkZWZhdWx0IHZhbHVlcywgbWV0aG9kcyBhbmQNCmluaXRpYWxpemF0aW9uLiAgTm90ZSB0aGF0IGlmIHlvdSBkZWZpbmUgYW4gX19pbml0X18gbWV0aG9kLCBpdCB3aWxsIGJlDQpjYWxsZWQgZWFjaCB0aW1lIHRoZSBsb2NhbCBvYmplY3QgaXMgdXNlZCBpbiBhIHNlcGFyYXRlIHRocmVhZC4gIFRoaXMNCmlzIG5lY2Vzc2FyeSB0byBpbml0aWFsaXplIGVhY2ggdGhyZWFkJ3MgZGljdGlvbmFyeS4NCg0KTm93IGlmIHdlIGNyZWF0ZSBhIGxvY2FsIG9iamVjdDoNCg0KICA+Pj4gbXlkYXRhID0gTXlMb2NhbChjb2xvcj0ncmVkJykNCg0KTm93IHdlIGhhdmUgYSBkZWZhdWx0IG51bWJlcjoNCg0KICA+Pj4gbXlkYXRhLm51bWJlcg0KICAyDQoNCmFuIGluaXRpYWwgY29sb3I6DQoNCiAgPj4+IG15ZGF0YS5jb2xvcg0KICAncmVkJw0KICA+Pj4gZGVsIG15ZGF0YS5jb2xvcg0KDQpBbmQgYSBtZXRob2QgdGhhdCBvcGVyYXRlcyBvbiB0aGUgZGF0YToNCg0KICA+Pj4gbXlkYXRhLnNxdWFyZWQoKQ0KICA0DQoNCkFzIGJlZm9yZSwgd2UgY2FuIGFjY2VzcyB0aGUgZGF0YSBpbiBhIHNlcGFyYXRlIHRocmVhZDoNCg0KICA+Pj4gbG9nID0gW10NCiAgPj4+IHRocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWYpDQogID4+PiB0aHJlYWQuc3RhcnQoKQ0KICA+Pj4gdGhyZWFkLmpvaW4oKQ0KICA+Pj4gbG9nDQogIFtbKCdjb2xvcicsICdyZWQnKSwgKCdpbml0aWFsaXplZCcsIFRydWUpXSwgMTFdDQoNCndpdGhvdXQgYWZmZWN0aW5nIHRoaXMgdGhyZWFkJ3MgZGF0YToNCg0KICA+Pj4gbXlkYXRhLm51bWJlcg0KICAyDQogID4+PiBteWRhdGEuY29sb3INCiAgVHJhY2ViYWNrIChtb3N0IHJlY2VudCBjYWxsIGxhc3QpOg0KICAuLi4NCiAgQXR0cmlidXRlRXJyb3I6ICdNeUxvY2FsJyBvYmplY3QgaGFzIG5vIGF0dHJpYnV0ZSAnY29sb3InDQoNCk5vdGUgdGhhdCBzdWJjbGFzc2VzIGNhbiBkZWZpbmUgc2xvdHMsIGJ1dCB0aGV5IGFyZSBub3QgdGhyZWFkDQpsb2NhbC4gVGhleSBhcmUgc2hhcmVkIGFjcm9zcyB0aHJlYWRzOg0KDQogID4+PiBjbGFzcyBNeUxvY2FsKGxvY2FsKToNCiAgLi4uICAgICBfX3Nsb3RzX18gPSAnbnVtYmVyJw0KDQogID4+PiBteWRhdGEgPSBNeUxvY2FsKCkNCiAgPj4+IG15ZGF0YS5udW1iZXIgPSA0Mg0KICA+Pj4gbXlkYXRhLmNvbG9yID0gJ3JlZCcNCg0KU28sIHRoZSBzZXBhcmF0ZSB0aHJlYWQ6DQoNCiAgPj4+IHRocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWYpDQogID4+PiB0aHJlYWQuc3RhcnQoKQ0KICA+Pj4gdGhyZWFkLmpvaW4oKQ0KDQphZmZlY3RzIHdoYXQgd2Ugc2VlOg0KDQogID4+PiBteWRhdGEubnVtYmVyDQogIDExDQoNCj4+PiBkZWwgbXlkYXRhDQoiIiINCg0KZnJvbSB3ZWFrcmVmIGltcG9ydCByZWYNCmZyb20gY29udGV4dGxpYiBpbXBvcnQgY29udGV4dG1hbmFnZXINCg0KX19hbGxfXyA9IFsibG9jYWwiXQ0KDQojIFdlIG5lZWQgdG8gdXNlIG9iamVjdHMgZnJvbSB0aGUgdGhyZWFkaW5nIG1vZHVsZSwgYnV0IHRoZSB0aHJlYWRpbmcNCiMgbW9kdWxlIG1heSBhbHNvIHdhbnQgdG8gdXNlIG91ciBgbG9jYWxgIGNsYXNzLCBpZiBzdXBwb3J0IGZvciBsb2NhbHMNCiMgaXNuJ3QgY29tcGlsZWQgaW4gdG8gdGhlIGB0aHJlYWRgIG1vZHVsZS4gIFRoaXMgY3JlYXRlcyBwb3RlbnRpYWwgcHJvYmxlbXMNCiMgd2l0aCBjaXJjdWxhciBpbXBvcnRzLiAgRm9yIHRoYXQgcmVhc29uLCB3ZSBkb24ndCBpbXBvcnQgYHRocmVhZGluZ2ANCiMgdW50aWwgdGhlIGJvdHRvbSBvZiB0aGlzIGZpbGUgKGEgaGFjayBzdWZmaWNpZW50IHRvIHdvcm0gYXJvdW5kIHRoZQ0KIyBwb3RlbnRpYWwgcHJvYmxlbXMpLiAgTm90ZSB0aGF0IGFsbCBwbGF0Zm9ybXMgb24gQ1B5dGhvbiBkbyBoYXZlIHN1cHBvcnQNCiMgZm9yIGxvY2FscyBpbiB0aGUgYHRocmVhZGAgbW9kdWxlLCBhbmQgdGhlcmUgaXMgbm8gY2lyY3VsYXIgaW1wb3J0IHByb2JsZW0NCiMgdGhlbiwgc28gcHJvYmxlbXMgaW50cm9kdWNlZCBieSBmaWRkbGluZyB0aGUgb3JkZXIgb2YgaW1wb3J0cyBoZXJlIHdvbid0DQojIG1hbmlmZXN0Lg0KDQpjbGFzcyBfbG9jYWxpbXBsOg0KICAgICIiIkEgY2xhc3MgbWFuYWdpbmcgdGhyZWFkLWxvY2FsIGRpY3RzIiIiDQogICAgX19zbG90c19fID0gJ2tleScsICdkaWN0cycsICdsb2NhbGFyZ3MnLCAnbG9jYWxsb2NrJywgJ19fd2Vha3JlZl9fJw0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICAjIFRoZSBrZXkgdXNlZCBpbiB0aGUgVGhyZWFkIG9iamVjdHMnIGF0dHJpYnV0ZSBkaWN0cy4NCiAgICAgICAgIyBXZSBrZWVwIGl0IGEgc3RyaW5nIGZvciBzcGVlZCBidXQgbWFrZSBpdCB1bmxpa2VseSB0byBjbGFzaCB3aXRoDQogICAgICAgICMgYSAicmVhbCIgYXR0cmlidXRlLg0KICAgICAgICBzZWxmLmtleSA9ICdfdGhyZWFkaW5nX2xvY2FsLl9sb2NhbGltcGwuJyArIHN0cihpZChzZWxmKSkNCiAgICAgICAgIyB7IGlkKFRocmVhZCkgLT4gKHJlZihUaHJlYWQpLCB0aHJlYWQtbG9jYWwgZGljdCkgfQ0KICAgICAgICBzZWxmLmRpY3RzID0ge30NCg0KICAgIGRlZiBnZXRfZGljdChzZWxmKToNCiAgICAgICAgIiIiUmV0dXJuIHRoZSBkaWN0IGZvciB0aGUgY3VycmVudCB0aHJlYWQuIFJhaXNlcyBLZXlFcnJvciBpZiBub25lDQogICAgICAgIGRlZmluZWQuIiIiDQogICAgICAgIHRocmVhZCA9IGN1cnJlbnRfdGhyZWFkKCkNCiAgICAgICAgcmV0dXJuIHNlbGYuZGljdHNbaWQodGhyZWFkKV1bMV0NCg0KICAgIGRlZiBjcmVhdGVfZGljdChzZWxmKToNCiAgICAgICAgIiIiQ3JlYXRlIGEgbmV3IGRpY3QgZm9yIHRoZSBjdXJyZW50IHRocmVhZCwgYW5kIHJldHVybiBpdC4iIiINCiAgICAgICAgbG9jYWxkaWN0ID0ge30NCiAgICAgICAga2V5ID0gc2VsZi5rZXkNCiAgICAgICAgdGhyZWFkID0gY3VycmVudF90aHJlYWQoKQ0KICAgICAgICBpZHQgPSBpZCh0aHJlYWQpDQogICAgICAgIGRlZiBsb2NhbF9kZWxldGVkKF8sIGtleT1rZXkpOg0KICAgICAgICAgICAgIyBXaGVuIHRoZSBsb2NhbGltcGwgaXMgZGVsZXRlZCwgcmVtb3ZlIHRoZSB0aHJlYWQgYXR0cmlidXRlLg0KICAgICAgICAgICAgdGhyZWFkID0gd3J0aHJlYWQoKQ0KICAgICAgICAgICAgaWYgdGhyZWFkIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIGRlbCB0aHJlYWQuX19kaWN0X19ba2V5XQ0KICAgICAgICBkZWYgdGhyZWFkX2RlbGV0ZWQoXywgaWR0PWlkdCk6DQogICAgICAgICAgICAjIFdoZW4gdGhlIHRocmVhZCBpcyBkZWxldGVkLCByZW1vdmUgdGhlIGxvY2FsIGRpY3QuDQogICAgICAgICAgICAjIE5vdGUgdGhhdCB0aGlzIGlzIHN1Ym9wdGltYWwgaWYgdGhlIHRocmVhZCBvYmplY3QgZ2V0cw0KICAgICAgICAgICAgIyBjYXVnaHQgaW4gYSByZWZlcmVuY2UgbG9vcC4gV2Ugd291bGQgbGlrZSB0byBiZSBjYWxsZWQNCiAgICAgICAgICAgICMgYXMgc29vbiBhcyB0aGUgT1MtbGV2ZWwgdGhyZWFkIGVuZHMgaW5zdGVhZC4NCiAgICAgICAgICAgIGxvY2FsID0gd3Jsb2NhbCgpDQogICAgICAgICAgICBpZiBsb2NhbCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICBkY3QgPSBsb2NhbC5kaWN0cy5wb3AoaWR0KQ0KICAgICAgICB3cmxvY2FsID0gcmVmKHNlbGYsIGxvY2FsX2RlbGV0ZWQpDQogICAgICAgIHdydGhyZWFkID0gcmVmKHRocmVhZCwgdGhyZWFkX2RlbGV0ZWQpDQogICAgICAgIHRocmVhZC5fX2RpY3RfX1trZXldID0gd3Jsb2NhbA0KICAgICAgICBzZWxmLmRpY3RzW2lkdF0gPSB3cnRocmVhZCwgbG9jYWxkaWN0DQogICAgICAgIHJldHVybiBsb2NhbGRpY3QNCg0KDQpAY29udGV4dG1hbmFnZXINCmRlZiBfcGF0Y2goc2VsZik6DQogICAgaW1wbCA9IG9iamVjdC5fX2dldGF0dHJpYnV0ZV9fKHNlbGYsICdfbG9jYWxfX2ltcGwnKQ0KICAgIHRyeToNCiAgICAgICAgZGN0ID0gaW1wbC5nZXRfZGljdCgpDQogICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICBkY3QgPSBpbXBsLmNyZWF0ZV9kaWN0KCkNCiAgICAgICAgYXJncywga3cgPSBpbXBsLmxvY2FsYXJncw0KICAgICAgICBzZWxmLl9faW5pdF9fKCphcmdzLCAqKmt3KQ0KICAgIHdpdGggaW1wbC5sb2NhbGxvY2s6DQogICAgICAgIG9iamVjdC5fX3NldGF0dHJfXyhzZWxmLCAnX19kaWN0X18nLCBkY3QpDQogICAgICAgIHlpZWxkDQoNCg0KY2xhc3MgbG9jYWw6DQogICAgX19zbG90c19fID0gJ19sb2NhbF9faW1wbCcsICdfX2RpY3RfXycNCg0KICAgIGRlZiBfX25ld19fKGNscywgKmFyZ3MsICoqa3cpOg0KICAgICAgICBpZiAoYXJncyBvciBrdykgYW5kIChjbHMuX19pbml0X18gaXMgb2JqZWN0Ll9faW5pdF9fKToNCiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiSW5pdGlhbGl6YXRpb24gYXJndW1lbnRzIGFyZSBub3Qgc3VwcG9ydGVkIikNCiAgICAgICAgc2VsZiA9IG9iamVjdC5fX25ld19fKGNscykNCiAgICAgICAgaW1wbCA9IF9sb2NhbGltcGwoKQ0KICAgICAgICBpbXBsLmxvY2FsYXJncyA9IChhcmdzLCBrdykNCiAgICAgICAgaW1wbC5sb2NhbGxvY2sgPSBSTG9jaygpDQogICAgICAgIG9iamVjdC5fX3NldGF0dHJfXyhzZWxmLCAnX2xvY2FsX19pbXBsJywgaW1wbCkNCiAgICAgICAgIyBXZSBuZWVkIHRvIGNyZWF0ZSB0aGUgdGhyZWFkIGRpY3QgaW4gYW50aWNpcGF0aW9uIG9mDQogICAgICAgICMgX19pbml0X18gYmVpbmcgY2FsbGVkLCB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgY2FsbCBpdA0KICAgICAgICAjIGFnYWluIG91cnNlbHZlcy4NCiAgICAgICAgaW1wbC5jcmVhdGVfZGljdCgpDQogICAgICAgIHJldHVybiBzZWxmDQoNCiAgICBkZWYgX19nZXRhdHRyaWJ1dGVfXyhzZWxmLCBuYW1lKToNCiAgICAgICAgd2l0aCBfcGF0Y2goc2VsZik6DQogICAgICAgICAgICByZXR1cm4gb2JqZWN0Ll9fZ2V0YXR0cmlidXRlX18oc2VsZiwgbmFtZSkNCg0KICAgIGRlZiBfX3NldGF0dHJfXyhzZWxmLCBuYW1lLCB2YWx1ZSk6DQogICAgICAgIGlmIG5hbWUgPT0gJ19fZGljdF9fJzoNCiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKA0KICAgICAgICAgICAgICAgICIlciBvYmplY3QgYXR0cmlidXRlICdfX2RpY3RfXycgaXMgcmVhZC1vbmx5Ig0KICAgICAgICAgICAgICAgICUgc2VsZi5fX2NsYXNzX18uX19uYW1lX18pDQogICAgICAgIHdpdGggX3BhdGNoKHNlbGYpOg0KICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5fX3NldGF0dHJfXyhzZWxmLCBuYW1lLCB2YWx1ZSkNCg0KICAgIGRlZiBfX2RlbGF0dHJfXyhzZWxmLCBuYW1lKToNCiAgICAgICAgaWYgbmFtZSA9PSAnX19kaWN0X18nOg0KICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoDQogICAgICAgICAgICAgICAgIiVyIG9iamVjdCBhdHRyaWJ1dGUgJ19fZGljdF9fJyBpcyByZWFkLW9ubHkiDQogICAgICAgICAgICAgICAgJSBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXykNCiAgICAgICAgd2l0aCBfcGF0Y2goc2VsZik6DQogICAgICAgICAgICByZXR1cm4gb2JqZWN0Ll9fZGVsYXR0cl9fKHNlbGYsIG5hbWUpDQoNCg0KZnJvbSB0aHJlYWRpbmcgaW1wb3J0IGN1cnJlbnRfdGhyZWFkLCBSTG9jaw0K',
'/Lib/reprlib.py':'IiIiUmVkbyB0aGUgYnVpbHRpbiByZXByKCkgKHJlcHJlc2VudGF0aW9uKSBidXQgd2l0aCBsaW1pdHMgb24gbW9zdCBzaXplcy4iIiINCg0KX19hbGxfXyA9IFsiUmVwciIsICJyZXByIiwgInJlY3Vyc2l2ZV9yZXByIl0NCg0KaW1wb3J0IGJ1aWx0aW5zDQpmcm9tIGl0ZXJ0b29scyBpbXBvcnQgaXNsaWNlDQp0cnk6DQogICAgZnJvbSBfdGhyZWFkIGltcG9ydCBnZXRfaWRlbnQNCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgICBmcm9tIF9kdW1teV90aHJlYWQgaW1wb3J0IGdldF9pZGVudA0KDQpkZWYgcmVjdXJzaXZlX3JlcHIoZmlsbHZhbHVlPScuLi4nKToNCiAgICAnRGVjb3JhdG9yIHRvIG1ha2UgYSByZXByIGZ1bmN0aW9uIHJldHVybiBmaWxsdmFsdWUgZm9yIGEgcmVjdXJzaXZlIGNhbGwnDQoNCiAgICBkZWYgZGVjb3JhdGluZ19mdW5jdGlvbih1c2VyX2Z1bmN0aW9uKToNCiAgICAgICAgcmVwcl9ydW5uaW5nID0gc2V0KCkNCg0KICAgICAgICBkZWYgd3JhcHBlcihzZWxmKToNCiAgICAgICAgICAgIGtleSA9IGlkKHNlbGYpLCBnZXRfaWRlbnQoKQ0KICAgICAgICAgICAgaWYga2V5IGluIHJlcHJfcnVubmluZzoNCiAgICAgICAgICAgICAgICByZXR1cm4gZmlsbHZhbHVlDQogICAgICAgICAgICByZXByX3J1bm5pbmcuYWRkKGtleSkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICByZXN1bHQgPSB1c2VyX2Z1bmN0aW9uKHNlbGYpDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHJlcHJfcnVubmluZy5kaXNjYXJkKGtleSkNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgICAgICAjIENhbid0IHVzZSBmdW5jdG9vbHMud3JhcHMoKSBoZXJlIGJlY2F1c2Ugb2YgYm9vdHN0cmFwIGlzc3Vlcw0KICAgICAgICB3cmFwcGVyLl9fbW9kdWxlX18gPSBnZXRhdHRyKHVzZXJfZnVuY3Rpb24sICdfX21vZHVsZV9fJykNCiAgICAgICAgd3JhcHBlci5fX2RvY19fID0gZ2V0YXR0cih1c2VyX2Z1bmN0aW9uLCAnX19kb2NfXycpDQogICAgICAgIHdyYXBwZXIuX19uYW1lX18gPSBnZXRhdHRyKHVzZXJfZnVuY3Rpb24sICdfX25hbWVfXycpDQogICAgICAgIHdyYXBwZXIuX19hbm5vdGF0aW9uc19fID0gZ2V0YXR0cih1c2VyX2Z1bmN0aW9uLCAnX19hbm5vdGF0aW9uc19fJywge30pDQogICAgICAgIHJldHVybiB3cmFwcGVyDQoNCiAgICByZXR1cm4gZGVjb3JhdGluZ19mdW5jdGlvbg0KDQpjbGFzcyBSZXByOg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBzZWxmLm1heGxldmVsID0gNg0KICAgICAgICBzZWxmLm1heHR1cGxlID0gNg0KICAgICAgICBzZWxmLm1heGxpc3QgPSA2DQogICAgICAgIHNlbGYubWF4YXJyYXkgPSA1DQogICAgICAgIHNlbGYubWF4ZGljdCA9IDQNCiAgICAgICAgc2VsZi5tYXhzZXQgPSA2DQogICAgICAgIHNlbGYubWF4ZnJvemVuc2V0ID0gNg0KICAgICAgICBzZWxmLm1heGRlcXVlID0gNg0KICAgICAgICBzZWxmLm1heHN0cmluZyA9IDMwDQogICAgICAgIHNlbGYubWF4bG9uZyA9IDQwDQogICAgICAgIHNlbGYubWF4b3RoZXIgPSAzMA0KDQogICAgZGVmIHJlcHIoc2VsZiwgeCk6DQogICAgICAgIHJldHVybiBzZWxmLnJlcHIxKHgsIHNlbGYubWF4bGV2ZWwpDQoNCiAgICBkZWYgcmVwcjEoc2VsZiwgeCwgbGV2ZWwpOg0KICAgICAgICB0eXBlbmFtZSA9IHR5cGUoeCkuX19uYW1lX18NCiAgICAgICAgaWYgJyAnIGluIHR5cGVuYW1lOg0KICAgICAgICAgICAgcGFydHMgPSB0eXBlbmFtZS5zcGxpdCgpDQogICAgICAgICAgICB0eXBlbmFtZSA9ICdfJy5qb2luKHBhcnRzKQ0KICAgICAgICBpZiBoYXNhdHRyKHNlbGYsICdyZXByXycgKyB0eXBlbmFtZSk6DQogICAgICAgICAgICByZXR1cm4gZ2V0YXR0cihzZWxmLCAncmVwcl8nICsgdHlwZW5hbWUpKHgsIGxldmVsKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcmV0dXJuIHNlbGYucmVwcl9pbnN0YW5jZSh4LCBsZXZlbCkNCg0KICAgIGRlZiBfcmVwcl9pdGVyYWJsZShzZWxmLCB4LCBsZXZlbCwgbGVmdCwgcmlnaHQsIG1heGl0ZXIsIHRyYWlsPScnKToNCiAgICAgICAgbiA9IGxlbih4KQ0KICAgICAgICBpZiBsZXZlbCA8PSAwIGFuZCBuOg0KICAgICAgICAgICAgcyA9ICcuLi4nDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBuZXdsZXZlbCA9IGxldmVsIC0gMQ0KICAgICAgICAgICAgcmVwcjEgPSBzZWxmLnJlcHIxDQogICAgICAgICAgICBwaWVjZXMgPSBbcmVwcjEoZWxlbSwgbmV3bGV2ZWwpIGZvciBlbGVtIGluIGlzbGljZSh4LCBtYXhpdGVyKV0NCiAgICAgICAgICAgIGlmIG4gPiBtYXhpdGVyOiAgcGllY2VzLmFwcGVuZCgnLi4uJykNCiAgICAgICAgICAgIHMgPSAnLCAnLmpvaW4ocGllY2VzKQ0KICAgICAgICAgICAgaWYgbiA9PSAxIGFuZCB0cmFpbDogIHJpZ2h0ID0gdHJhaWwgKyByaWdodA0KICAgICAgICByZXR1cm4gJyVzJXMlcycgJSAobGVmdCwgcywgcmlnaHQpDQoNCiAgICBkZWYgcmVwcl90dXBsZShzZWxmLCB4LCBsZXZlbCk6DQogICAgICAgIHJldHVybiBzZWxmLl9yZXByX2l0ZXJhYmxlKHgsIGxldmVsLCAnKCcsICcpJywgc2VsZi5tYXh0dXBsZSwgJywnKQ0KDQogICAgZGVmIHJlcHJfbGlzdChzZWxmLCB4LCBsZXZlbCk6DQogICAgICAgIHJldHVybiBzZWxmLl9yZXByX2l0ZXJhYmxlKHgsIGxldmVsLCAnWycsICddJywgc2VsZi5tYXhsaXN0KQ0KDQogICAgZGVmIHJlcHJfYXJyYXkoc2VsZiwgeCwgbGV2ZWwpOg0KICAgICAgICBoZWFkZXIgPSAiYXJyYXkoJyVzJywgWyIgJSB4LnR5cGVjb2RlDQogICAgICAgIHJldHVybiBzZWxmLl9yZXByX2l0ZXJhYmxlKHgsIGxldmVsLCBoZWFkZXIsICddKScsIHNlbGYubWF4YXJyYXkpDQoNCiAgICBkZWYgcmVwcl9zZXQoc2VsZiwgeCwgbGV2ZWwpOg0KICAgICAgICB4ID0gX3Bvc3NpYmx5X3NvcnRlZCh4KQ0KICAgICAgICByZXR1cm4gc2VsZi5fcmVwcl9pdGVyYWJsZSh4LCBsZXZlbCwgJ3NldChbJywgJ10pJywgc2VsZi5tYXhzZXQpDQoNCiAgICBkZWYgcmVwcl9mcm96ZW5zZXQoc2VsZiwgeCwgbGV2ZWwpOg0KICAgICAgICB4ID0gX3Bvc3NpYmx5X3NvcnRlZCh4KQ0KICAgICAgICByZXR1cm4gc2VsZi5fcmVwcl9pdGVyYWJsZSh4LCBsZXZlbCwgJ2Zyb3plbnNldChbJywgJ10pJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXhmcm96ZW5zZXQpDQoNCiAgICBkZWYgcmVwcl9kZXF1ZShzZWxmLCB4LCBsZXZlbCk6DQogICAgICAgIHJldHVybiBzZWxmLl9yZXByX2l0ZXJhYmxlKHgsIGxldmVsLCAnZGVxdWUoWycsICddKScsIHNlbGYubWF4ZGVxdWUpDQoNCiAgICBkZWYgcmVwcl9kaWN0KHNlbGYsIHgsIGxldmVsKToNCiAgICAgICAgbiA9IGxlbih4KQ0KICAgICAgICBpZiBuID09IDA6IHJldHVybiAne30nDQogICAgICAgIGlmIGxldmVsIDw9IDA6IHJldHVybiAney4uLn0nDQogICAgICAgIG5ld2xldmVsID0gbGV2ZWwgLSAxDQogICAgICAgIHJlcHIxID0gc2VsZi5yZXByMQ0KICAgICAgICBwaWVjZXMgPSBbXQ0KICAgICAgICBmb3Iga2V5IGluIGlzbGljZShfcG9zc2libHlfc29ydGVkKHgpLCBzZWxmLm1heGRpY3QpOg0KICAgICAgICAgICAga2V5cmVwciA9IHJlcHIxKGtleSwgbmV3bGV2ZWwpDQogICAgICAgICAgICB2YWxyZXByID0gcmVwcjEoeFtrZXldLCBuZXdsZXZlbCkNCiAgICAgICAgICAgIHBpZWNlcy5hcHBlbmQoJyVzOiAlcycgJSAoa2V5cmVwciwgdmFscmVwcikpDQogICAgICAgIGlmIG4gPiBzZWxmLm1heGRpY3Q6IHBpZWNlcy5hcHBlbmQoJy4uLicpDQogICAgICAgIHMgPSAnLCAnLmpvaW4ocGllY2VzKQ0KICAgICAgICByZXR1cm4gJ3slc30nICUgKHMsKQ0KDQogICAgZGVmIHJlcHJfc3RyKHNlbGYsIHgsIGxldmVsKToNCiAgICAgICAgcyA9IGJ1aWx0aW5zLnJlcHIoeFs6c2VsZi5tYXhzdHJpbmddKQ0KICAgICAgICBpZiBsZW4ocykgPiBzZWxmLm1heHN0cmluZzoNCiAgICAgICAgICAgIGkgPSBtYXgoMCwgKHNlbGYubWF4c3RyaW5nLTMpLy8yKQ0KICAgICAgICAgICAgaiA9IG1heCgwLCBzZWxmLm1heHN0cmluZy0zLWkpDQogICAgICAgICAgICBzID0gYnVpbHRpbnMucmVwcih4WzppXSArIHhbbGVuKHgpLWo6XSkNCiAgICAgICAgICAgIHMgPSBzWzppXSArICcuLi4nICsgc1tsZW4ocyktajpdDQogICAgICAgIHJldHVybiBzDQoNCiAgICBkZWYgcmVwcl9pbnQoc2VsZiwgeCwgbGV2ZWwpOg0KICAgICAgICBzID0gYnVpbHRpbnMucmVwcih4KSAjIFhYWCBIb3BlIHRoaXMgaXNuJ3QgdG9vIHNsb3cuLi4NCiAgICAgICAgaWYgbGVuKHMpID4gc2VsZi5tYXhsb25nOg0KICAgICAgICAgICAgaSA9IG1heCgwLCAoc2VsZi5tYXhsb25nLTMpLy8yKQ0KICAgICAgICAgICAgaiA9IG1heCgwLCBzZWxmLm1heGxvbmctMy1pKQ0KICAgICAgICAgICAgcyA9IHNbOmldICsgJy4uLicgKyBzW2xlbihzKS1qOl0NCiAgICAgICAgcmV0dXJuIHMNCg0KICAgIGRlZiByZXByX2luc3RhbmNlKHNlbGYsIHgsIGxldmVsKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgcyA9IGJ1aWx0aW5zLnJlcHIoeCkNCiAgICAgICAgICAgICMgQnVncyBpbiB4Ll9fcmVwcl9fKCkgY2FuIGNhdXNlIGFyYml0cmFyeQ0KICAgICAgICAgICAgIyBleGNlcHRpb25zIC0tIHRoZW4gbWFrZSB1cCBzb21ldGhpbmcNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgICAgIHJldHVybiAnPCVzIGluc3RhbmNlIGF0ICV4PicgJSAoeC5fX2NsYXNzX18uX19uYW1lX18sIGlkKHgpKQ0KICAgICAgICBpZiBsZW4ocykgPiBzZWxmLm1heG90aGVyOg0KICAgICAgICAgICAgaSA9IG1heCgwLCAoc2VsZi5tYXhvdGhlci0zKS8vMikNCiAgICAgICAgICAgIGogPSBtYXgoMCwgc2VsZi5tYXhvdGhlci0zLWkpDQogICAgICAgICAgICBzID0gc1s6aV0gKyAnLi4uJyArIHNbbGVuKHMpLWo6XQ0KICAgICAgICByZXR1cm4gcw0KDQoNCmRlZiBfcG9zc2libHlfc29ydGVkKHgpOg0KICAgICMgU2luY2Ugbm90IGFsbCBzZXF1ZW5jZXMgb2YgaXRlbXMgY2FuIGJlIHNvcnRlZCBhbmQgY29tcGFyaXNvbg0KICAgICMgZnVuY3Rpb25zIG1heSByYWlzZSBhcmJpdHJhcnkgZXhjZXB0aW9ucywgcmV0dXJuIGFuIHVuc29ydGVkDQogICAgIyBzZXF1ZW5jZSBpbiB0aGF0IGNhc2UuDQogICAgdHJ5Og0KICAgICAgICByZXR1cm4gc29ydGVkKHgpDQogICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgcmV0dXJuIGxpc3QoeCkNCg0KYVJlcHIgPSBSZXByKCkNCnJlcHIgPSBhUmVwci5yZXByDQo=',
'/Lib/operator.py':'IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMw0KIiIiDQpPcGVyYXRvciBJbnRlcmZhY2UNCg0KVGhpcyBtb2R1bGUgZXhwb3J0cyBhIHNldCBvZiBmdW5jdGlvbnMgY29ycmVzcG9uZGluZyB0byB0aGUgaW50cmluc2ljIA0Kb3BlcmF0b3JzIG9mIFB5dGhvbi4gIEZvciBleGFtcGxlLCBvcGVyYXRvci5hZGQoeCwgeSkgaXMgZXF1aXZhbGVudCANCnRvIHRoZSBleHByZXNzaW9uIHgreS4gIFRoZSBmdW5jdGlvbiBuYW1lcyBhcmUgdGhvc2UgdXNlZCBmb3Igc3BlY2lhbCANCm1ldGhvZHM7IHZhcmlhbnRzIHdpdGhvdXQgbGVhZGluZyBhbmQgdHJhaWxpbmcgJ19fJyBhcmUgYWxzbyBwcm92aWRlZCANCmZvciBjb252ZW5pZW5jZS4NCg0KVGhpcyBpcyB0aGUgcHVyZSBQeXRob24gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1vZHVsZS4NCiIiIg0KDQojIGRvd25sb2FkZWQgZnJvbSBodHRwOi8vYnVncy5weXRob24ub3JnL2ZpbGUyODMyNy9vcGVyYXRvci5weQ0KDQojaW1wb3J0IGJ1aWx0aW5zIGFzIF9iaSAgI3RoZXJlIGlzIG5vIGJ1aWx0aW5zIG1vZHVsZQ0KDQpkZWYgbHQoYSwgYik6DQogICAgIlNhbWUgYXMgYSA8IGIuIg0KICAgIHJldHVybiBhIDwgYg0KX19sdF9fID0gbHQNCg0KZGVmIGxlKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPD0gYi4iDQogICAgcmV0dXJuIGEgPD0gYg0KX19sZV9fID0gbGUNCg0KZGVmIGVxKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPT0gYi4iDQogICAgcmV0dXJuIGEgPT0gYg0KX19lcV9fID0gZXENCg0KZGVmIG5lKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgIT0gYi4iDQogICAgcmV0dXJuIGEgIT0gYg0KX19uZV9fID0gbmUNCg0KZGVmIGdlKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPj0gYi4iDQogICAgcmV0dXJuIGEgPj0gYg0KX19nZV9fID0gZ2UNCg0KZGVmIGd0KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPiBiLiINCiAgICByZXR1cm4gYSA+IGINCl9fZ3RfXyA9IGd0DQoNCmRlZiBub3RfKGEpOg0KICAgICJTYW1lIGFzIG5vdCBhLiINCiAgICByZXR1cm4gbm90IGENCl9fbm90X18gPSBub3RfDQoNCmRlZiB0cnV0aChhKToNCiAgICAiUmV0dXJuIFRydWUgaWYgYSBpcyB0cnVlLCBGYWxzZSBvdGhlcndpc2UuIg0KICAgICNyZXR1cm4gX2JpLmJvb2woYSkNCiAgICByZXR1cm4gYm9vbChhKQ0KDQpkZWYgaXNfKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgaXMgYi4iDQogICAgcmV0dXJuIGEgaXMgYg0KDQojIGJyeXRob24gZG9lcyBub3QgbGlrZSAgKGNhdXNlcyBzeW50YXggZXJyb3IpDQojZGVmIGlzX25vdChhLCBiKToNCiMgICAgIlNhbWUgYXMgYSBpcyBub3QgYi4iDQojICAgIHJldHVybiBhIGlzIG5vdCBiDQoNCiNyZWN1cnNpb24gZXJyb3Igb3IganVzdCBjb21tZW50IG91dCBhbmQgYWRkIGNvZGUgYmVsb3cgZnVuY3Rpb24NCiNkZWYgYWJzKGEpOg0KIyAgICAiU2FtZSBhcyBhYnMoYSkuIg0KIyAgICAjcmV0dXJuIF9iaS5hYnMoYSkNCiMgICAgcmV0dXJuIGFicyhhKQ0KX19hYnNfXyA9IGFicw0KYWJzPWFicw0KDQoNCmRlZiBhZGQoYSwgYik6DQogICAgIlNhbWUgYXMgYSArIGIuIg0KICAgIHJldHVybiBhICsgYg0KX19hZGRfXyA9IGFkZA0KDQpkZWYgYW5kXyhhLCBiKToNCiAgICAiU2FtZSBhcyBhICYgYi4iDQogICAgcmV0dXJuIGEgJiBiDQpfX2FuZF9fID0gYW5kXw0KDQpkZWYgZmxvb3JkaXYoYSwgYik6DQogICAgIlNhbWUgYXMgYSAvLyBiLiINCiAgICByZXR1cm4gYSAvLyBiDQpfX2Zsb29yZGl2X18gPSBmbG9vcmRpdg0KDQpkZWYgaW5kZXgoYSk6DQogICAgIlNhbWUgYXMgYS5fX2luZGV4X18oKS4iDQogICAgcmV0dXJuIGEuX19pbmRleF9fKCkNCl9faW5kZXhfXyA9IGluZGV4DQoNCmRlZiBpbnYoYSk6DQogICAgIlNhbWUgYXMgfmEuIg0KICAgICNyZXR1cm4gfmEgICAgI2JyeXRob24gZG9lcyBub3QgbGlrZQ0KICAgIHJldHVybiBhXigyKiozMSkNCmludmVydCA9IF9faW52X18gPSBfX2ludmVydF9fID0gaW52DQoNCmRlZiBsc2hpZnQoYSwgYik6DQogICAgIlNhbWUgYXMgYSA8PCBiLiINCiAgICByZXR1cm4gYSA8PCBiDQpfX2xzaGlmdF9fID0gbHNoaWZ0DQoNCmRlZiBtb2QoYSwgYik6DQogICAgIlNhbWUgYXMgYSAlIGIuIg0KICAgIHJldHVybiBhICUgYg0KX19tb2RfXyA9IG1vZA0KDQpkZWYgbXVsKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgKiBiLiINCiAgICByZXR1cm4gYSAqIGINCl9fbXVsX18gPSBtdWwNCg0KZGVmIG5lZyhhKToNCiAgICAiU2FtZSBhcyAtYS4iDQogICAgcmV0dXJuIC1hDQpfX25lZ19fID0gbmVnDQoNCmRlZiBvcl8oYSwgYik6DQogICAgIlNhbWUgYXMgYSB8IGIuIg0KICAgIHJldHVybiBhIHwgYg0KX19vcl9fID0gb3JfDQoNCmRlZiBwb3MoYSk6DQogICAgIlNhbWUgYXMgK2EuIg0KICAgICNyZXR1cm4gK2EgICAgI2JyeXRob24gZG9lcyBub3QgbGlrZQ0KICAgIGlmIGEgPj0gMDogcmV0dXJuIGENCiAgICByZXR1cm4gLWENCl9fcG9zX18gPSBwb3MNCg0KZGVmIHBvdyhhLCBiKToNCiAgICAiU2FtZSBhcyBhICoqIGIuIg0KICAgIHJldHVybiBhICoqIGINCl9fcG93X18gPSBwb3cNCg0KZGVmIHJzaGlmdChhLCBiKToNCiAgICAiU2FtZSBhcyBhID4+IGIuIg0KICAgIHJldHVybiBhID4+IGINCl9fcnNoaWZ0X18gPSByc2hpZnQNCg0KZGVmIHN1YihhLCBiKToNCiAgICAiU2FtZSBhcyBhIC0gYi4iDQogICAgcmV0dXJuIGEgLSBiDQpfX3N1Yl9fID0gc3ViDQoNCmRlZiB0cnVlZGl2KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgLyBiLiINCiAgICByZXR1cm4gYSAvIGINCl9fdHJ1ZWRpdl9fID0gdHJ1ZWRpdg0KDQpkZWYgeG9yKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgXiBiLiINCiAgICByZXR1cm4gYSBeIGINCl9feG9yX18gPSB4b3INCg0KZGVmIGNvbmNhdChhLCBiKToNCiAgICAiU2FtZSBhcyBhICsgYiwgZm9yIGEgYW5kIGIgc2VxdWVuY2VzLiINCiAgICBpZiBub3QgKGhhc2F0dHIoYSwgJ19fZ2V0aXRlbV9fJykgYW5kIGhhc2F0dHIoYiwgJ19fZ2V0aXRlbV9fJykpOg0KICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2EgYW5kIGIgbXVzdCBiZSBzZXF1ZW5jZXMnKQ0KICAgIHJldHVybiBhICsgYg0KX19jb25jYXRfXyA9IGNvbmNhdA0KDQpkZWYgY29udGFpbnMoYSwgYik6DQogICAgIlNhbWUgYXMgYiBpbiBhIChub3RlIHJldmVyc2VkIG9wZXJhbmRzKS4iDQogICAgcmV0dXJuIGIgaW4gYQ0KX19jb250YWluc19fID0gY29udGFpbnMNCg0KZGVmIGNvdW50T2YoYSwgYik6DQogICAgIlJldHVybiB0aGUgbnVtYmVyIG9mIHRpbWVzIGIgb2NjdXJzIGluIGEuIg0KICAgIGNvdW50ID0gMA0KICAgIGZvciBpIGluIGE6DQogICAgICAgIGlmIGkgPT0gYjoNCiAgICAgICAgICAgIGNvdW50ICs9IDENCiAgICByZXR1cm4gY291bnQNCg0KZGVmIGRlbGl0ZW0oYSwgYik6DQogICAgIlNhbWUgYXMgZGVsIGFbYl0uIg0KICAgIGRlbCBhW2JdDQpfX2RlbGl0ZW1fXyA9IGRlbGl0ZW0NCg0KZGVmIGdldGl0ZW0oYSwgYik6DQogICAgIlNhbWUgYXMgYVtiXS4iDQogICAgcmV0dXJuIGFbYl0NCl9fZ2V0aXRlbV9fID0gZ2V0aXRlbQ0KDQojZml4bWUgIGJyeXRob24gZG9lc24ndCBsaWtlIHRoaXMgZnVuY3Rpb24NCiNkZWYgaW5kZXhPZihhLCBiKToNCiMgICAgIlJldHVybiB0aGUgZmlyc3QgaW5kZXggb2YgYiBpbiBhLiINCiMgICAgZm9yIGksIGogaW4gX2JpLmVudW1lcmF0ZShhKToNCiMgICAgICAgIGlmIGogPT0gYjoNCiMgICAgICAgICAgICByZXR1cm4gaQ0KIyAgICBlbHNlOg0KIyAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignYiBub3QgZm91bmQgaW4gYScpDQoNCmRlZiBzZXRpdGVtKGEsIGIsIGMpOg0KICAgICJTYW1lIGFzIGFbYl0gPSBjLiINCiAgICBhW2JdID0gYw0KX19zZXRpdGVtX18gPSBzZXRpdGVtDQoNCg0KDQpjbGFzcyBhdHRyZ2V0dGVyOg0KICAgICIiIg0KICAgIFJldHVybiBhIGNhbGxhYmxlIG9iamVjdCB0aGF0IGZldGNoZXMgdGhlIGdpdmVuIGF0dHJpYnV0ZShzKSBmcm9tIGl0cyBvcGVyYW5kLg0KICAgIEFmdGVyIGY9YXR0cmdldHRlcignbmFtZScpLCB0aGUgY2FsbCBmKHIpIHJldHVybnMgci5uYW1lLg0KICAgIEFmdGVyIGc9YXR0cmdldHRlcignbmFtZScsICdkYXRlJyksIHRoZSBjYWxsIGcocikgcmV0dXJucyAoci5uYW1lLCByLmRhdGUpLg0KICAgIEFmdGVyIGg9YXR0cmdldHRlcignbmFtZS5maXJzdCcsICduYW1lLmxhc3QnKSwgdGhlIGNhbGwgaChyKSByZXR1cm5zDQogICAgKHIubmFtZS5maXJzdCwgci5uYW1lLmxhc3QpLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhdHRyLCAqYXR0cnMpOg0KICAgICAgICBzZWxmLl9hdHRycyA9IChhdHRyLCkNCiAgICAgICAgc2VsZi5fYXR0cnMgKz0gYXR0cnMNCiAgICAgICAgaWYgYW55KG5vdCBpc2luc3RhbmNlKGF0dHIsIHN0cikgZm9yIGF0dHIgaW4gc2VsZi5fYXR0cnMpOg0KICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdhdHRyaWJ1dGUgbmFtZSBtdXN0IGJlIGEgc3RyaW5nJykNCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgX3Jlc29sdmVfYXR0cihvYmosIGF0dHIpOg0KICAgICAgICBmb3IgbmFtZSBpbiBhdHRyLnNwbGl0KCcuJyk6DQogICAgICAgICAgICAjb2JqID0gX2JpLmdldGF0dHIob2JqLCBuYW1lKQ0KICAgICAgICAgICAgb2JqID0gZ2V0YXR0cihvYmosIG5hbWUpDQogICAgICAgIHJldHVybiBvYmoNCg0KICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBvYmopOg0KICAgICAgICBpZiBsZW4oc2VsZi5fYXR0cnMpID09IDE6DQogICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVzb2x2ZV9hdHRyKG9iaiwgc2VsZi5fYXR0cnNbMF0pDQogICAgICAgIHJldHVybiB0dXBsZShzZWxmLl9yZXNvbHZlX2F0dHIob2JqLCBhdHRyKSBmb3IgYXR0ciBpbiBzZWxmLl9hdHRycykNCg0KY2xhc3MgaXRlbWdldHRlcjoNCiAgICAiIiINCiAgICBSZXR1cm4gYSBjYWxsYWJsZSBvYmplY3QgdGhhdCBmZXRjaGVzIHRoZSBnaXZlbiBpdGVtKHMpIGZyb20gaXRzIG9wZXJhbmQuDQogICAgQWZ0ZXIgZj1pdGVtZ2V0dGVyKDIpLCB0aGUgY2FsbCBmKHIpIHJldHVybnMgclsyXS4NCiAgICBBZnRlciBnPWl0ZW1nZXR0ZXIoMiw1LDMpLCB0aGUgY2FsbCBnKHIpIHJldHVybnMgKHJbMl0sIHJbNV0sIHJbM10pDQogICAgIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZW0sICppdGVtcyk6DQogICAgICAgIHNlbGYuX2l0ZW1zID0gKGl0ZW0sKQ0KICAgICAgICBzZWxmLl9pdGVtcyArPSBpdGVtcw0KDQogICAgZGVmIF9fY2FsbF9fKHNlbGYsIG9iaik6DQogICAgICAgIGlmIGxlbihzZWxmLl9pdGVtcykgPT0gMToNCiAgICAgICAgICAgIHJldHVybiBvYmpbc2VsZi5faXRlbXNbMF1dDQogICAgICAgIHJldHVybiB0dXBsZShvYmpbaXRlbV0gZm9yIGl0ZW0gaW4gc2VsZi5faXRlbXMpDQoNCmNsYXNzIG1ldGhvZGNhbGxlcjoNCiAgICAiIiINCiAgICBSZXR1cm4gYSBjYWxsYWJsZSBvYmplY3QgdGhhdCBjYWxscyB0aGUgZ2l2ZW4gbWV0aG9kIG9uIGl0cyBvcGVyYW5kLg0KICAgIEFmdGVyIGYgPSBtZXRob2RjYWxsZXIoJ25hbWUnKSwgdGhlIGNhbGwgZihyKSByZXR1cm5zIHIubmFtZSgpLg0KICAgIEFmdGVyIGcgPSBtZXRob2RjYWxsZXIoJ25hbWUnLCAnZGF0ZScsIGZvbz0xKSwgdGhlIGNhbGwgZyhyKSByZXR1cm5zDQogICAgci5uYW1lKCdkYXRlJywgZm9vPTEpLg0KICAgICIiIg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgIHNlbGYuX25hbWUgPSBuYW1lDQogICAgICAgIHNlbGYuX2FyZ3MgPSBhcmdzDQogICAgICAgIHNlbGYuX2t3YXJncyA9IGt3YXJncw0KDQogICAgZGVmIF9fY2FsbF9fKHNlbGYsIG9iaik6DQogICAgICAgIHJldHVybiBnZXRhdHRyKG9iaiwgc2VsZi5fbmFtZSkoKnNlbGYuX2FyZ3MsICoqc2VsZi5fa3dhcmdzKQ0KDQoNCmRlZiBpYWRkKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgKz0gYi4iDQogICAgYSArPSBiDQogICAgcmV0dXJuIGENCl9faWFkZF9fID0gaWFkZA0KDQpkZWYgaWFuZChhLCBiKToNCiAgICAiU2FtZSBhcyBhICY9IGIuIg0KICAgIGEgJj0gYg0KICAgIHJldHVybiBhDQpfX2lhbmRfXyA9IGlhbmQNCg0KZGVmIGljb25jYXQoYSwgYik6DQogICAgIlNhbWUgYXMgYSArPSBiLCBmb3IgYSBhbmQgYiBzZXF1ZW5jZXMuIg0KICAgIGlmIG5vdCAoaGFzYXR0cihhLCAnX19nZXRpdGVtX18nKSBhbmQgaGFzYXR0cihiLCAnX19nZXRpdGVtX18nKSk6DQogICAgICAgIHJhaXNlIFR5cGVFcnJvcignYSBhbmQgYiBtdXN0IGJlIHNlcXVlbmNlcycpDQogICAgYSArPSBiDQogICAgcmV0dXJuIGENCl9faWNvbmNhdF9fID0gaWNvbmNhdA0KDQpkZWYgaWZsb29yZGl2KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgLy89IGIuIg0KICAgIGEgLy89IGINCiAgICByZXR1cm4gYQ0KX19pZmxvb3JkaXZfXyA9IGlmbG9vcmRpdg0KDQpkZWYgaWxzaGlmdChhLCBiKToNCiAgICAiU2FtZSBhcyBhIDw8PSBiLiINCiAgICBhIDw8PSBiDQogICAgcmV0dXJuIGENCl9faWxzaGlmdF9fID0gaWxzaGlmdA0KDQpkZWYgaW1vZChhLCBiKToNCiAgICAiU2FtZSBhcyBhICU9IGIuIg0KICAgIGEgJT0gYg0KICAgIHJldHVybiBhDQpfX2ltb2RfXyA9IGltb2QNCg0KZGVmIGltdWwoYSwgYik6DQogICAgIlNhbWUgYXMgYSAqPSBiLiINCiAgICBhICo9IGINCiAgICByZXR1cm4gYQ0KX19pbXVsX18gPSBpbXVsDQoNCmRlZiBpb3IoYSwgYik6DQogICAgIlNhbWUgYXMgYSB8PSBiLiINCiAgICBhIHw9IGINCiAgICByZXR1cm4gYQ0KX19pb3JfXyA9IGlvcg0KDQpkZWYgaXBvdyhhLCBiKToNCiAgICAiU2FtZSBhcyBhICoqPSBiLiINCiAgICBhICoqPWINCiAgICByZXR1cm4gYQ0KX19pcG93X18gPSBpcG93DQoNCmRlZiBpcnNoaWZ0KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPj49IGIuIg0KICAgIGEgPj49IGINCiAgICByZXR1cm4gYQ0KX19pcnNoaWZ0X18gPSBpcnNoaWZ0DQoNCmRlZiBpc3ViKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgLT0gYi4iDQogICAgYSAtPSBiDQogICAgcmV0dXJuIGENCl9faXN1Yl9fID0gaXN1Yg0KDQpkZWYgaXRydWVkaXYoYSwgYik6DQogICAgIlNhbWUgYXMgYSAvPSBiLiINCiAgICBhIC89IGINCiAgICByZXR1cm4gYQ0KX19pdHJ1ZWRpdl9fID0gaXRydWVkaXYNCg0KZGVmIGl4b3IoYSwgYik6DQogICAgIlNhbWUgYXMgYSBePSBiLiINCiAgICBhIF49IGINCiAgICByZXR1cm4gYQ0KX19peG9yX18gPSBpeG9yDQoNCmRlZiBsZW5ndGhfaGludChvYmosIGRlZmF1bHQ9MCk6DQogICAgIiIiDQogICAgUmV0dXJuIGFuIGVzdGltYXRlIG9mIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gb2JqLg0KICAgIFRoaXMgaXMgdXNlZnVsIGZvciBwcmVzaXppbmcgY29udGFpbmVycyB3aGVuIGJ1aWxkaW5nIGZyb20gYW4gaXRlcmFibGUuDQoNCiAgICBJZiB0aGUgb2JqZWN0IHN1cHBvcnRzIGxlbigpLCB0aGUgcmVzdWx0IHdpbGwgYmUgZXhhY3QuIE90aGVyd2lzZSwgaXQgbWF5DQogICAgb3Zlci0gb3IgdW5kZXItZXN0aW1hdGUgYnkgYW4gYXJiaXRyYXJ5IGFtb3VudC4gVGhlIHJlc3VsdCB3aWxsIGJlIGFuDQogICAgaW50ZWdlciA+PSAwLg0KICAgICIiIg0KICAgIHRyeToNCiAgICAgICAgcmV0dXJuIGxlbihvYmopDQogICAgZXhjZXB0IFR5cGVFcnJvcjoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdmFsID0gb2JqLl9fbGVuZ3RoX2hpbnRfXygpDQogICAgICAgICAgICBpZiB2YWwgaXMgTm90SW1wbGVtZW50ZWQ6DQogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yDQogICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIFR5cGVFcnJvcik6DQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdA0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaWYgbm90IHZhbCA+IDA6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignZGVmYXVsdCBtdXN0IGJlID4gMCcpDQogICAgICAgICAgICByZXR1cm4gdmFsDQoNCiN0cnk6DQojICAgIGZyb20gX29wZXJhdG9yIGltcG9ydCAqDQojICAgIGZyb20gX29wZXJhdG9yIGltcG9ydCBfX2RvY19fDQojZXhjZXB0IEltcG9ydEVycm9yOg0KIyAgIHBhc3MNCg==',
'/Lib/sys.py':'IyBoYWNrIHRvIHJldHVybiBzcGVjaWFsIGF0dHJpYnV0ZXMKZnJvbSBfc3lzIGltcG9ydCAqCmZyb20gamF2YXNjcmlwdCBpbXBvcnQgSlNPYmplY3QKCmZyb20gYnJvd3NlciBpbXBvcnQgZG9jCl9fc3Rkb3V0X189Z2V0YXR0cihkb2MsIiRzdGRvdXQiKQpfX3N0ZGVycl9fPWdldGF0dHIoZG9jLCIkc3RkZXJyIikKCnN0ZG91dCA9IGdldGF0dHIoZG9jLCIkc3Rkb3V0IikKc3RkZXJyID0gZ2V0YXR0cihkb2MsIiRzdGRlcnIiKQoKCmhhc19sb2NhbF9zdG9yYWdlPV9fQlJZVEhPTl9fLmhhc19sb2NhbF9zdG9yYWdlCmhhc19qc29uPV9fQlJZVEhPTl9fLmhhc19qc29uCgphcmd2ID0gWydfX21haW5fXyddCgpiYXNlX2V4ZWNfcHJlZml4ID0gX19CUllUSE9OX18uYnJ5dGhvbl9wYXRoCgpiYXNlX3ByZWZpeCA9IF9fQlJZVEhPTl9fLmJyeXRob25fcGF0aAoKYnVpbHRpbl9tb2R1bGVfbmFtZXM9X19CUllUSE9OX18uYnVpbHRpbl9tb2R1bGVfbmFtZXMKCmJ5dGVvcmRlcj0nbGl0dGxlJwoKZGVmIGV4Y19pbmZvKCk6CiAgICBleGMgPSBfX0JSWVRIT05fXy5leGNlcHRpb25fc3RhY2tbLTFdCiAgICByZXR1cm4gKGV4Yy5fX2NsYXNzX18sZXhjLE5vbmUpCiAgICAKZXhlY19wcmVmaXggPSBfX0JSWVRIT05fXy5icnl0aG9uX3BhdGgKCmV4ZWN1dGFibGUgPSBfX0JSWVRIT05fXy5icnl0aG9uX3BhdGgrJy9icnl0aG9uLmpzJwoKZGVmIGV4aXQoaT1Ob25lKToKICAgIHJhaXNlIFN5c3RlbUV4aXQoJycpCgpjbGFzcyBmbGFnX2NsYXNzOgogIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgc2VsZi5kZWJ1Zz0wCiAgICAgIHNlbGYuaW5zcGVjdD0wCiAgICAgIHNlbGYuaW50ZXJhY3RpdmU9MAogICAgICBzZWxmLm9wdGltaXplPTAKICAgICAgc2VsZi5kb250X3dyaXRlX2J5dGVjb2RlPTAKICAgICAgc2VsZi5ub191c2VyX3NpdGU9MAogICAgICBzZWxmLm5vX3NpdGU9MAogICAgICBzZWxmLmlnbm9yZV9lbnZpcm9ubWVudD0wCiAgICAgIHNlbGYudmVyYm9zZT0wCiAgICAgIHNlbGYuYnl0ZXNfd2FybmluZz0wCiAgICAgIHNlbGYucXVpZXQ9MAogICAgICBzZWxmLmhhc2hfcmFuZG9taXphdGlvbj0xCgpmbGFncz1mbGFnX2NsYXNzKCkKCmRlZiBnZXRmaWxlc3lzdGVtZW5jb2RpbmcoKmFyZ3MsKiprdyk6CiAgICAiIiJnZXRmaWxlc3lzdGVtZW5jb2RpbmcoKSAtPiBzdHJpbmcgICAgCiAgICBSZXR1cm4gdGhlIGVuY29kaW5nIHVzZWQgdG8gY29udmVydCBVbmljb2RlIGZpbGVuYW1lcyBpbgogICAgb3BlcmF0aW5nIHN5c3RlbSBmaWxlbmFtZXMuIiIiCiAgICByZXR1cm4gJ3V0Zi04JwogICAgCm1heHNpemU9OTAwNzE5OTI1NDc0MDk5MiAgICNsYXJnZXN0IGludGVnZXIuLgoKbWF4aW50PTkwMDcxOTkyNTQ3NDA5OTIgICAjbGFyZ2VzdCBpbnRlZ2VyLi4KCm1heHVuaWNvZGU9MTExNDExMQoKcGF0aCA9IF9fQlJZVEhPTl9fLnBhdGgKCnBhdGhfaG9va3MgPSBsaXN0KEpTT2JqZWN0KF9fQlJZVEhPTl9fLnBhdGhfaG9va3MpKQoKcGxhdGZvcm09ImJyeXRob24iCgpwcmVmaXggPSBfX0JSWVRIT05fXy5icnl0aG9uX3BhdGgKCnZlcnNpb24gPSAnLicuam9pbihzdHIoeCkgZm9yIHggaW4gX19CUllUSE9OX18udmVyc2lvbl9pbmZvKQpoZXh2ZXJzaW9uID0gMHgwMzAwMDAwMCAgICMgcHl0aG9uIDMuMAoKY2xhc3MgX192ZXJzaW9uX2luZm8ob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2ZXJzaW9uX2luZm8pOgogICAgICAgIHNlbGYudmVyc2lvbl9pbmZvID0gdmVyc2lvbl9pbmZvCiAgICAgICAgc2VsZi5tYWpvciA9IHZlcnNpb25faW5mb1swXQogICAgICAgIHNlbGYubWlub3IgPSB2ZXJzaW9uX2luZm9bMV0KICAgICAgICBzZWxmLm1pY3JvID0gdmVyc2lvbl9pbmZvWzJdCiAgICAgICAgc2VsZi5yZWxlYXNlbGV2ZWwgPSB2ZXJzaW9uX2luZm9bM10KICAgICAgICBzZWxmLnNlcmlhbCA9IHZlcnNpb25faW5mb1s0XQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpbmRleCk6CiAgICAgICAgcmV0dXJuIHNlbGYudmVyc2lvbl9pbmZvW2luZGV4XQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzdHIoc2VsZi52ZXJzaW9uX2luZm8pCiAgICAgCnZlcnNpb25faW5mbz1fX3ZlcnNpb25faW5mbyhfX0JSWVRIT05fXy52ZXJzaW9uX2luZm8pCgp3YXJub3B0aW9ucz1bXQoK',
'/Lib/io.py':'aW1wb3J0IGJ1aWx0aW5zCgpvcGVuID0gYnVpbHRpbnMub3BlbgoKIyBmb3Igc2VlaygpClNFRUtfU0VUID0gMApTRUVLX0NVUiA9IDEKU0VFS19FTkQgPSAyCgpjbGFzcyBTdHJpbmdJTzoKCiAgICBkZWYgX19pbml0X18oc2VsZixpbml0aWFsX3ZhbHVlPScnLG5ld2xpbmU9Tm9uZSk6CiAgICAgICAgc2VsZi52YWx1ZSA9IGluaXRpYWxfdmFsdWUKICAgICAgICBzZWxmLm5ld2xpbmUgPSBuZXdsaW5lCiAgICAgICAgc2VsZi5fcG9zID0gbGVuKGluaXRpYWxfdmFsdWUpCiAgICAKICAgIGRlZiB3cml0ZShzZWxmLGRhdGEpOgogICAgICAgIHNlbGYudmFsdWUgKz0gZGF0YQogICAgCiAgICBkZWYgcmVhZChzZWxmLG5iPS0xKToKICAgICAgICBpZiBuYiE9LTE6CiAgICAgICAgICAgIHJlcyA9IHNlbGYudmFsdWVbc2VsZi5fcG9zOnNlbGYuX3BvcytuYl0KICAgICAgICAgICAgc2VsZi5fcG9zID0gbWluKHNlbGYuX3BvcytuYixsZW4oc2VsZi52YWx1ZSktMSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXMgPSBzZWxmLnZhbHVlW3NlbGYuX3BvczpdCiAgICAgICAgICAgIHNlbGYuX3BvcyA9IGxlbihzZWxmLnZhbHVlKS0xCiAgICAgICAgcmV0dXJuIHJlcwoKVGV4dElPV3JhcHBlciA9IFN0cmluZ0lPCgpjbGFzcyBSYXdJT0Jhc2U6CgogICAgZGVmIHJlYWQoc2VsZixuPS0xKToKICAgICAgICBwYXNzCiAgICBkZWYgcmVhZGFsbChzZWxmKToKICAgICAgICBwYXNzCiAgICBkZWYgcmVhZGludG8oc2VsZixiKToKICAgICAgICBwYXNzCiAgICBkZWYgd3JpdGUoc2VsZixiKToKICAgICAgICBwYXNzCgpCdWZmZXJlZFJlYWRlciA9IFJhd0lPQmFzZQo=',
'/Lib/os.py':'ciIiIk9TIHJvdXRpbmVzIGZvciBNYWMsIE5ULCBvciBQb3NpeCBkZXBlbmRpbmcgb24gd2hhdCBzeXN0ZW0gd2UncmUgb24uCgpUaGlzIGV4cG9ydHM6CiAgLSBhbGwgZnVuY3Rpb25zIGZyb20gcG9zaXgsIG50LCBvczIsIG9yIGNlLCBlLmcuIHVubGluaywgc3RhdCwgZXRjLgogIC0gb3MucGF0aCBpcyBlaXRoZXIgcG9zaXhwYXRoIG9yIG50cGF0aAogIC0gb3MubmFtZSBpcyBlaXRoZXIgJ3Bvc2l4JywgJ250JywgJ29zMicgb3IgJ2NlJy4KICAtIG9zLmN1cmRpciBpcyBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgZGlyZWN0b3J5ICgnLicgb3IgJzonKQogIC0gb3MucGFyZGlyIGlzIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGFyZW50IGRpcmVjdG9yeSAoJy4uJyBvciAnOjonKQogIC0gb3Muc2VwIGlzIHRoZSAob3IgYSBtb3N0IGNvbW1vbikgcGF0aG5hbWUgc2VwYXJhdG9yICgnLycgb3IgJzonIG9yICdcXCcpCiAgLSBvcy5leHRzZXAgaXMgdGhlIGV4dGVuc2lvbiBzZXBhcmF0b3IgKGFsd2F5cyAnLicpCiAgLSBvcy5hbHRzZXAgaXMgdGhlIGFsdGVybmF0ZSBwYXRobmFtZSBzZXBhcmF0b3IgKE5vbmUgb3IgJy8nKQogIC0gb3MucGF0aHNlcCBpcyB0aGUgY29tcG9uZW50IHNlcGFyYXRvciB1c2VkIGluICRQQVRIIGV0YwogIC0gb3MubGluZXNlcCBpcyB0aGUgbGluZSBzZXBhcmF0b3IgaW4gdGV4dCBmaWxlcyAoJ1xyJyBvciAnXG4nIG9yICdcclxuJykKICAtIG9zLmRlZnBhdGggaXMgdGhlIGRlZmF1bHQgc2VhcmNoIHBhdGggZm9yIGV4ZWN1dGFibGVzCiAgLSBvcy5kZXZudWxsIGlzIHRoZSBmaWxlIHBhdGggb2YgdGhlIG51bGwgZGV2aWNlICgnL2Rldi9udWxsJywgZXRjLikKClByb2dyYW1zIHRoYXQgaW1wb3J0IGFuZCB1c2UgJ29zJyBzdGFuZCBhIGJldHRlciBjaGFuY2Ugb2YgYmVpbmcKcG9ydGFibGUgYmV0d2VlbiBkaWZmZXJlbnQgcGxhdGZvcm1zLiAgT2YgY291cnNlLCB0aGV5IG11c3QgdGhlbgpvbmx5IHVzZSBmdW5jdGlvbnMgdGhhdCBhcmUgZGVmaW5lZCBieSBhbGwgcGxhdGZvcm1zIChlLmcuLCB1bmxpbmsKYW5kIG9wZW5kaXIpLCBhbmQgbGVhdmUgYWxsIHBhdGhuYW1lIG1hbmlwdWxhdGlvbiB0byBvcy5wYXRoCihlLmcuLCBzcGxpdCBhbmQgam9pbikuCiIiIgoKIycKCmltcG9ydCBzeXMsIGVycm5vCmltcG9ydCBzdGF0IGFzIHN0CgpfbmFtZXMgPSBzeXMuYnVpbHRpbl9tb2R1bGVfbmFtZXMKCiMgTm90ZTogIG1vcmUgbmFtZXMgYXJlIGFkZGVkIHRvIF9fYWxsX18gbGF0ZXIuCl9fYWxsX18gPSBbImFsdHNlcCIsICJjdXJkaXIiLCAicGFyZGlyIiwgInNlcCIsICJwYXRoc2VwIiwgImxpbmVzZXAiLAogICAgICAgICAgICJkZWZwYXRoIiwgIm5hbWUiLCAicGF0aCIsICJkZXZudWxsIiwgIlNFRUtfU0VUIiwgIlNFRUtfQ1VSIiwKICAgICAgICAgICAiU0VFS19FTkQiLCAiZnNlbmNvZGUiLCAiZnNkZWNvZGUiLCAiZ2V0X2V4ZWNfcGF0aCIsICJmZG9wZW4iLAogICAgICAgICAgICJwb3BlbiIsICJleHRzZXAiXQoKZGVmIF9leGlzdHMobmFtZSk6CiAgICByZXR1cm4gbmFtZSBpbiBnbG9iYWxzKCkKCmRlZiBfZ2V0X2V4cG9ydHNfbGlzdChtb2R1bGUpOgogICAgdHJ5OgogICAgICAgIHJldHVybiBsaXN0KG1vZHVsZS5fX2FsbF9fKQogICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgIHJldHVybiBbbiBmb3IgbiBpbiBkaXIobW9kdWxlKSBpZiBuWzBdICE9ICdfJ10KCiMgQW55IG5ldyBkZXBlbmRlbmNpZXMgb2YgdGhlIG9zIG1vZHVsZSBhbmQvb3IgY2hhbmdlcyBpbiBwYXRoIHNlcGFyYXRvcgojIHJlcXVpcmVzIHVwZGF0aW5nIGltcG9ydGxpYiBhcyB3ZWxsLgppZiAncG9zaXgnIGluIF9uYW1lczoKICAgIG5hbWUgPSAncG9zaXgnCiAgICBsaW5lc2VwID0gJ1xuJwogICAgZnJvbSBwb3NpeCBpbXBvcnQgKgogICAgdHJ5OgogICAgICAgIGZyb20gcG9zaXggaW1wb3J0IF9leGl0CiAgICAgICAgX19hbGxfXy5hcHBlbmQoJ19leGl0JykKICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICBwYXNzCiAgICBpbXBvcnQgcG9zaXhwYXRoIGFzIHBhdGgKCiAgICB0cnk6CiAgICAgICAgZnJvbSBwb3NpeCBpbXBvcnQgX2hhdmVfZnVuY3Rpb25zCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgcGFzcwoKZWxpZiAnbnQnIGluIF9uYW1lczoKICAgIG5hbWUgPSAnbnQnCiAgICBsaW5lc2VwID0gJ1xyXG4nCiAgICBmcm9tIG50IGltcG9ydCAqCiAgICB0cnk6CiAgICAgICAgZnJvbSBudCBpbXBvcnQgX2V4aXQKICAgICAgICBfX2FsbF9fLmFwcGVuZCgnX2V4aXQnKQogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIHBhc3MKICAgIGltcG9ydCBudHBhdGggYXMgcGF0aAoKICAgIGltcG9ydCBudAogICAgX19hbGxfXy5leHRlbmQoX2dldF9leHBvcnRzX2xpc3QobnQpKQogICAgZGVsIG50CgogICAgdHJ5OgogICAgICAgIGZyb20gbnQgaW1wb3J0IF9oYXZlX2Z1bmN0aW9ucwogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIHBhc3MKCmVsaWYgJ29zMicgaW4gX25hbWVzOgogICAgbmFtZSA9ICdvczInCiAgICBsaW5lc2VwID0gJ1xyXG4nCiAgICBmcm9tIG9zMiBpbXBvcnQgKgogICAgdHJ5OgogICAgICAgIGZyb20gb3MyIGltcG9ydCBfZXhpdAogICAgICAgIF9fYWxsX18uYXBwZW5kKCdfZXhpdCcpCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgcGFzcwogICAgaWYgc3lzLnZlcnNpb24uZmluZCgnRU1YIEdDQycpID09IC0xOgogICAgICAgIGltcG9ydCBudHBhdGggYXMgcGF0aAogICAgZWxzZToKICAgICAgICBpbXBvcnQgb3MyZW14cGF0aCBhcyBwYXRoCiAgICAgICAgZnJvbSBfZW14X2xpbmsgaW1wb3J0IGxpbmsKCiAgICBpbXBvcnQgb3MyCiAgICBfX2FsbF9fLmV4dGVuZChfZ2V0X2V4cG9ydHNfbGlzdChvczIpKQogICAgZGVsIG9zMgoKICAgIHRyeToKICAgICAgICBmcm9tIG9zMiBpbXBvcnQgX2hhdmVfZnVuY3Rpb25zCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgcGFzcwoKZWxpZiAnY2UnIGluIF9uYW1lczoKICAgIG5hbWUgPSAnY2UnCiAgICBsaW5lc2VwID0gJ1xyXG4nCiAgICBmcm9tIGNlIGltcG9ydCAqCiAgICB0cnk6CiAgICAgICAgZnJvbSBjZSBpbXBvcnQgX2V4aXQKICAgICAgICBfX2FsbF9fLmFwcGVuZCgnX2V4aXQnKQogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIHBhc3MKICAgICMgV2UgY2FuIHVzZSB0aGUgc3RhbmRhcmQgV2luZG93cyBwYXRoLgogICAgaW1wb3J0IG50cGF0aCBhcyBwYXRoCgogICAgaW1wb3J0IGNlCiAgICBfX2FsbF9fLmV4dGVuZChfZ2V0X2V4cG9ydHNfbGlzdChjZSkpCiAgICBkZWwgY2UKCiAgICB0cnk6CiAgICAgICAgZnJvbSBjZSBpbXBvcnQgX2hhdmVfZnVuY3Rpb25zCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgcGFzcwoKZWxzZToKICAgIHJhaXNlIEltcG9ydEVycm9yKCdubyBvcyBzcGVjaWZpYyBtb2R1bGUgZm91bmQnKQoKc3lzLm1vZHVsZXNbJ29zLnBhdGgnXSA9IHBhdGgKZnJvbSBvcy5wYXRoIGltcG9ydCAoY3VyZGlyLCBwYXJkaXIsIHNlcCwgcGF0aHNlcCwgZGVmcGF0aCwgZXh0c2VwLCBhbHRzZXAsCiAgICBkZXZudWxsKQoKZGVsIF9uYW1lcwoKCmlmIF9leGlzdHMoIl9oYXZlX2Z1bmN0aW9ucyIpOgogICAgX2dsb2JhbHMgPSBnbG9iYWxzKCkKICAgIGRlZiBfYWRkKHN0ciwgZm4pOgogICAgICAgIGlmIChmbiBpbiBfZ2xvYmFscykgYW5kIChzdHIgaW4gX2hhdmVfZnVuY3Rpb25zKToKICAgICAgICAgICAgX3NldC5hZGQoX2dsb2JhbHNbZm5dKQoKICAgIF9zZXQgPSBzZXQoKQogICAgX2FkZCgiSEFWRV9GQUNDRVNTQVQiLCAgImFjY2VzcyIpCiAgICBfYWRkKCJIQVZFX0ZDSE1PREFUIiwgICAiY2htb2QiKQogICAgX2FkZCgiSEFWRV9GQ0hPV05BVCIsICAgImNob3duIikKICAgIF9hZGQoIkhBVkVfRlNUQVRBVCIsICAgICJzdGF0IikKICAgIF9hZGQoIkhBVkVfRlVUSU1FU0FUIiwgICJ1dGltZSIpCiAgICBfYWRkKCJIQVZFX0xJTktBVCIsICAgICAibGluayIpCiAgICBfYWRkKCJIQVZFX01LRElSQVQiLCAgICAibWtkaXIiKQogICAgX2FkZCgiSEFWRV9NS0ZJRk9BVCIsICAgIm1rZmlmbyIpCiAgICBfYWRkKCJIQVZFX01LTk9EQVQiLCAgICAibWtub2QiKQogICAgX2FkZCgiSEFWRV9PUEVOQVQiLCAgICAgIm9wZW4iKQogICAgX2FkZCgiSEFWRV9SRUFETElOS0FUIiwgInJlYWRsaW5rIikKICAgIF9hZGQoIkhBVkVfUkVOQU1FQVQiLCAgICJyZW5hbWUiKQogICAgX2FkZCgiSEFWRV9TWU1MSU5LQVQiLCAgInN5bWxpbmsiKQogICAgX2FkZCgiSEFWRV9VTkxJTktBVCIsICAgInVubGluayIpCiAgICBfYWRkKCJIQVZFX1VOTElOS0FUIiwgICAicm1kaXIiKQogICAgX2FkZCgiSEFWRV9VVElNRU5TQVQiLCAgInV0aW1lIikKICAgIHN1cHBvcnRzX2Rpcl9mZCA9IF9zZXQKCiAgICBfc2V0ID0gc2V0KCkKICAgIF9hZGQoIkhBVkVfRkFDQ0VTU0FUIiwgICJhY2Nlc3MiKQogICAgc3VwcG9ydHNfZWZmZWN0aXZlX2lkcyA9IF9zZXQKCiAgICBfc2V0ID0gc2V0KCkKICAgIF9hZGQoIkhBVkVfRkNIRElSIiwgICAgICJjaGRpciIpCiAgICBfYWRkKCJIQVZFX0ZDSE1PRCIsICAgICAiY2htb2QiKQogICAgX2FkZCgiSEFWRV9GQ0hPV04iLCAgICAgImNob3duIikKICAgIF9hZGQoIkhBVkVfRkRPUEVORElSIiwgICJsaXN0ZGlyIikKICAgIF9hZGQoIkhBVkVfRkVYRUNWRSIsICAgICJleGVjdmUiKQogICAgX3NldC5hZGQoc3RhdCkgIyBmc3RhdCBhbHdheXMgd29ya3MKICAgIF9hZGQoIkhBVkVfRlRSVU5DQVRFIiwgICJ0cnVuY2F0ZSIpCiAgICBfYWRkKCJIQVZFX0ZVVElNRU5TIiwgICAidXRpbWUiKQogICAgX2FkZCgiSEFWRV9GVVRJTUVTIiwgICAgInV0aW1lIikKICAgIF9hZGQoIkhBVkVfRlBBVEhDT05GIiwgICJwYXRoY29uZiIpCiAgICBpZiBfZXhpc3RzKCJzdGF0dmZzIikgYW5kIF9leGlzdHMoImZzdGF0dmZzIik6ICMgbWFjIG9zIHgxMC4zCiAgICAgICAgX2FkZCgiSEFWRV9GU1RBVFZGUyIsICJzdGF0dmZzIikKICAgIHN1cHBvcnRzX2ZkID0gX3NldAoKICAgIF9zZXQgPSBzZXQoKQogICAgX2FkZCgiSEFWRV9GQUNDRVNTQVQiLCAgImFjY2VzcyIpCiAgICAjIFNvbWUgcGxhdGZvcm1zIGRvbid0IHN1cHBvcnQgbGNobW9kKCkuICBPZnRlbiB0aGUgZnVuY3Rpb24gZXhpc3RzCiAgICAjIGFueXdheSwgYXMgYSBzdHViIHRoYXQgYWx3YXlzIHJldHVybnMgRU5PU1VQIG9yIHBlcmhhcHMgRU9QTk9UU1VQUC4KICAgICMgKE5vLCBJIGRvbid0IGtub3cgd2h5IHRoYXQncyBhIGdvb2QgZGVzaWduLikgIC4vY29uZmlndXJlIHdpbGwgZGV0ZWN0CiAgICAjIHRoaXMgYW5kIHJlamVjdCBpdC0tc28gSEFWRV9MQ0hNT0Qgc3RpbGwgd29uJ3QgYmUgZGVmaW5lZCBvbiBzdWNoCiAgICAjIHBsYXRmb3Jtcy4gIFRoaXMgaXMgVmVyeSBIZWxwZnVsLgogICAgIwogICAgIyBIb3dldmVyLCBzb21ldGltZXMgcGxhdGZvcm1zIHdpdGhvdXQgYSB3b3JraW5nIGxjaG1vZCgpICpkbyogaGF2ZQogICAgIyBmY2htb2RhdCgpLiAgKEV4YW1wbGVzOiBMaW51eCBrZXJuZWwgMy4yIHdpdGggZ2xpYmMgMi4xNSwKICAgICMgT3BlbkluZGlhbmEgMy54LikgIEFuZCBmY2htb2RhdCgpIGhhcyBhIGZsYWcgdGhhdCB0aGVvcmV0aWNhbGx5IG1ha2VzCiAgICAjIGl0IGJlaGF2ZSBsaWtlIGxjaG1vZCgpLiAgU28gaW4gdGhlb3J5IGl0IHdvdWxkIGJlIGEgc3VpdGFibGUKICAgICMgcmVwbGFjZW1lbnQgZm9yIGxjaG1vZCgpLiAgQnV0IHdoZW4gbGNobW9kKCkgZG9lc24ndCB3b3JrLCBmY2htb2RhdCgpJ3MKICAgICMgZmxhZyBkb2Vzbid0IHdvcmsgKmVpdGhlciouICBTYWRseSAuL2NvbmZpZ3VyZSBpc24ndCBzb3BoaXN0aWNhdGVkCiAgICAjIGVub3VnaCB0byBkZXRlY3QgdGhpcyBjb25kaXRpb24tLWl0IG9ubHkgZGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdAogICAgIyBmY2htb2RhdCgpIG1pbmltYWxseSB3b3Jrcy4KICAgICMKICAgICMgVGhlcmVmb3JlIHdlIHNpbXBseSBpZ25vcmUgZmNobW9kYXQoKSB3aGVuIGRlY2lkaW5nIHdoZXRoZXIgb3Igbm90CiAgICAjIG9zLmNobW9kIHN1cHBvcnRzIGZvbGxvd19zeW1saW5rcy4gIEp1c3QgY2hlY2tpbmcgbGNobW9kKCkgaXMKICAgICMgc3VmZmljaWVudC4gIEFmdGVyIGFsbC0taWYgeW91IGhhdmUgYSB3b3JraW5nIGZjaG1vZGF0KCksIHlvdXIKICAgICMgbGNobW9kKCkgYWxtb3N0IGNlcnRhaW5seSB3b3JrcyB0b28uCiAgICAjCiAgICAjIF9hZGQoIkhBVkVfRkNITU9EQVQiLCAgICJjaG1vZCIpCiAgICBfYWRkKCJIQVZFX0ZDSE9XTkFUIiwgICAiY2hvd24iKQogICAgX2FkZCgiSEFWRV9GU1RBVEFUIiwgICAgInN0YXQiKQogICAgX2FkZCgiSEFWRV9MQ0hGTEFHUyIsICAgImNoZmxhZ3MiKQogICAgX2FkZCgiSEFWRV9MQ0hNT0QiLCAgICAgImNobW9kIikKICAgIGlmIF9leGlzdHMoImxjaG93biIpOiAjIG1hYyBvcyB4MTAuMwogICAgICAgIF9hZGQoIkhBVkVfTENIT1dOIiwgImNob3duIikKICAgIF9hZGQoIkhBVkVfTElOS0FUIiwgICAgICJsaW5rIikKICAgIF9hZGQoIkhBVkVfTFVUSU1FUyIsICAgICJ1dGltZSIpCiAgICBfYWRkKCJIQVZFX0xTVEFUIiwgICAgICAic3RhdCIpCiAgICBfYWRkKCJIQVZFX0ZTVEFUQVQiLCAgICAic3RhdCIpCiAgICBfYWRkKCJIQVZFX1VUSU1FTlNBVCIsICAidXRpbWUiKQogICAgX2FkZCgiTVNfV0lORE9XUyIsICAgICAgInN0YXQiKQogICAgc3VwcG9ydHNfZm9sbG93X3N5bWxpbmtzID0gX3NldAoKICAgIGRlbCBfc2V0CiAgICBkZWwgX2hhdmVfZnVuY3Rpb25zCiAgICBkZWwgX2dsb2JhbHMKICAgIGRlbCBfYWRkCgoKIyBQeXRob24gdXNlcyBmaXhlZCB2YWx1ZXMgZm9yIHRoZSBTRUVLXyBjb25zdGFudHM7IHRoZXkgYXJlIG1hcHBlZAojIHRvIG5hdGl2ZSBjb25zdGFudHMgaWYgbmVjZXNzYXJ5IGluIHBvc2l4bW9kdWxlLmMKIyBPdGhlciBwb3NzaWJsZSBTRUVLIHZhbHVlcyBhcmUgZGlyZWN0bHkgaW1wb3J0ZWQgZnJvbSBwb3NpeG1vZHVsZS5jClNFRUtfU0VUID0gMApTRUVLX0NVUiA9IDEKU0VFS19FTkQgPSAyCgoKZGVmIF9nZXRfbWFza2VkX21vZGUobW9kZSk6CiAgICBtYXNrID0gdW1hc2soMCkKICAgIHVtYXNrKG1hc2spCiAgICByZXR1cm4gbW9kZSAmIH5tYXNrCgojIFN1cGVyIGRpcmVjdG9yeSB1dGlsaXRpZXMuCiMgKEluc3BpcmVkIGJ5IEVyaWMgUmF5bW9uZDsgdGhlIGRvYyBzdHJpbmdzIGFyZSBtb3N0bHkgaGlzKQoKZGVmIG1ha2VkaXJzKG5hbWUsIG1vZGU9MG83NzcsIGV4aXN0X29rPUZhbHNlKToKICAgICIiIm1ha2VkaXJzKHBhdGggWywgbW9kZT0wbzc3N11bLCBleGlzdF9vaz1GYWxzZV0pCgogICAgU3VwZXItbWtkaXI7IGNyZWF0ZSBhIGxlYWYgZGlyZWN0b3J5IGFuZCBhbGwgaW50ZXJtZWRpYXRlIG9uZXMuCiAgICBXb3JrcyBsaWtlIG1rZGlyLCBleGNlcHQgdGhhdCBhbnkgaW50ZXJtZWRpYXRlIHBhdGggc2VnbWVudCAobm90CiAgICBqdXN0IHRoZSByaWdodG1vc3QpIHdpbGwgYmUgY3JlYXRlZCBpZiBpdCBkb2VzIG5vdCBleGlzdC4gSWYgdGhlCiAgICB0YXJnZXQgZGlyZWN0b3J5IHdpdGggdGhlIHNhbWUgbW9kZSBhcyB3ZSBzcGVjaWZpZWQgYWxyZWFkeSBleGlzdHMsCiAgICByYWlzZXMgYW4gT1NFcnJvciBpZiBleGlzdF9vayBpcyBGYWxzZSwgb3RoZXJ3aXNlIG5vIGV4Y2VwdGlvbiBpcwogICAgcmFpc2VkLiAgVGhpcyBpcyByZWN1cnNpdmUuCgogICAgIiIiCiAgICBoZWFkLCB0YWlsID0gcGF0aC5zcGxpdChuYW1lKQogICAgaWYgbm90IHRhaWw6CiAgICAgICAgaGVhZCwgdGFpbCA9IHBhdGguc3BsaXQoaGVhZCkKICAgIGlmIGhlYWQgYW5kIHRhaWwgYW5kIG5vdCBwYXRoLmV4aXN0cyhoZWFkKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG1ha2VkaXJzKGhlYWQsIG1vZGUsIGV4aXN0X29rKQogICAgICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGU6CiAgICAgICAgICAgICMgYmUgaGFwcHkgaWYgc29tZW9uZSBhbHJlYWR5IGNyZWF0ZWQgdGhlIHBhdGgKICAgICAgICAgICAgaWYgZS5lcnJubyAhPSBlcnJuby5FRVhJU1Q6CiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgIGlmIHRhaWwgPT0gY3VyZGlyOiAgICAgICAgICAgIyB4eHgvbmV3ZGlyLy4gZXhpc3RzIGlmIHh4eC9uZXdkaXIgZXhpc3RzCiAgICAgICAgICAgIHJldHVybgogICAgdHJ5OgogICAgICAgIG1rZGlyKG5hbWUsIG1vZGUpCiAgICBleGNlcHQgT1NFcnJvciBhcyBlOgogICAgICAgIGRpcl9leGlzdHMgPSBwYXRoLmlzZGlyKG5hbWUpCiAgICAgICAgZXhwZWN0ZWRfbW9kZSA9IF9nZXRfbWFza2VkX21vZGUobW9kZSkKICAgICAgICBpZiBkaXJfZXhpc3RzOgogICAgICAgICAgICAjIFNfSVNHSUQgaXMgYXV0b21hdGljYWxseSBjb3BpZWQgYnkgdGhlIE9TIGZyb20gcGFyZW50IHRvIGNoaWxkCiAgICAgICAgICAgICMgZGlyZWN0b3JpZXMgb24gbWtkaXIuICBEb24ndCBjb25zaWRlciBpdCBiZWluZyBzZXQgdG8gYmUgYSBtb2RlCiAgICAgICAgICAgICMgbWlzbWF0Y2ggYXMgbWtkaXIgZG9lcyBub3QgdW5zZXQgaXQgd2hlbiBub3Qgc3BlY2lmaWVkIGluIG1vZGUuCiAgICAgICAgICAgIGFjdHVhbF9tb2RlID0gc3QuU19JTU9ERShsc3RhdChuYW1lKS5zdF9tb2RlKSAmIH5zdC5TX0lTR0lECiAgICAgICAgZWxzZToKICAgICAgICAgICAgYWN0dWFsX21vZGUgPSAtMQogICAgICAgIGlmIG5vdCAoZS5lcnJubyA9PSBlcnJuby5FRVhJU1QgYW5kIGV4aXN0X29rIGFuZCBkaXJfZXhpc3RzIGFuZAogICAgICAgICAgICAgICAgYWN0dWFsX21vZGUgPT0gZXhwZWN0ZWRfbW9kZSk6CiAgICAgICAgICAgIGlmIGRpcl9leGlzdHMgYW5kIGFjdHVhbF9tb2RlICE9IGV4cGVjdGVkX21vZGU6CiAgICAgICAgICAgICAgICBlLnN0cmVycm9yICs9ICcgKG1vZGUgJW8gIT0gZXhwZWN0ZWQgbW9kZSAlbyknICUgKAogICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxfbW9kZSwgZXhwZWN0ZWRfbW9kZSkKICAgICAgICAgICAgcmFpc2UKCmRlZiByZW1vdmVkaXJzKG5hbWUpOgogICAgIiIicmVtb3ZlZGlycyhwYXRoKQoKICAgIFN1cGVyLXJtZGlyOyByZW1vdmUgYSBsZWFmIGRpcmVjdG9yeSBhbmQgYWxsIGVtcHR5IGludGVybWVkaWF0ZQogICAgb25lcy4gIFdvcmtzIGxpa2Ugcm1kaXIgZXhjZXB0IHRoYXQsIGlmIHRoZSBsZWFmIGRpcmVjdG9yeSBpcwogICAgc3VjY2Vzc2Z1bGx5IHJlbW92ZWQsIGRpcmVjdG9yaWVzIGNvcnJlc3BvbmRpbmcgdG8gcmlnaHRtb3N0IHBhdGgKICAgIHNlZ21lbnRzIHdpbGwgYmUgcHJ1bmVkIGF3YXkgdW50aWwgZWl0aGVyIHRoZSB3aG9sZSBwYXRoIGlzCiAgICBjb25zdW1lZCBvciBhbiBlcnJvciBvY2N1cnMuICBFcnJvcnMgZHVyaW5nIHRoaXMgbGF0dGVyIHBoYXNlIGFyZQogICAgaWdub3JlZCAtLSB0aGV5IGdlbmVyYWxseSBtZWFuIHRoYXQgYSBkaXJlY3Rvcnkgd2FzIG5vdCBlbXB0eS4KCiAgICAiIiIKICAgIHJtZGlyKG5hbWUpCiAgICBoZWFkLCB0YWlsID0gcGF0aC5zcGxpdChuYW1lKQogICAgaWYgbm90IHRhaWw6CiAgICAgICAgaGVhZCwgdGFpbCA9IHBhdGguc3BsaXQoaGVhZCkKICAgIHdoaWxlIGhlYWQgYW5kIHRhaWw6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBybWRpcihoZWFkKQogICAgICAgIGV4Y2VwdCBlcnJvcjoKICAgICAgICAgICAgYnJlYWsKICAgICAgICBoZWFkLCB0YWlsID0gcGF0aC5zcGxpdChoZWFkKQoKZGVmIHJlbmFtZXMob2xkLCBuZXcpOgogICAgIiIicmVuYW1lcyhvbGQsIG5ldykKCiAgICBTdXBlci1yZW5hbWU7IGNyZWF0ZSBkaXJlY3RvcmllcyBhcyBuZWNlc3NhcnkgYW5kIGRlbGV0ZSBhbnkgbGVmdAogICAgZW1wdHkuICBXb3JrcyBsaWtlIHJlbmFtZSwgZXhjZXB0IGNyZWF0aW9uIG9mIGFueSBpbnRlcm1lZGlhdGUKICAgIGRpcmVjdG9yaWVzIG5lZWRlZCB0byBtYWtlIHRoZSBuZXcgcGF0aG5hbWUgZ29vZCBpcyBhdHRlbXB0ZWQKICAgIGZpcnN0LiAgQWZ0ZXIgdGhlIHJlbmFtZSwgZGlyZWN0b3JpZXMgY29ycmVzcG9uZGluZyB0byByaWdodG1vc3QKICAgIHBhdGggc2VnbWVudHMgb2YgdGhlIG9sZCBuYW1lIHdpbGwgYmUgcHJ1bmVkIHdheSB1bnRpbCBlaXRoZXIgdGhlCiAgICB3aG9sZSBwYXRoIGlzIGNvbnN1bWVkIG9yIGEgbm9uZW1wdHkgZGlyZWN0b3J5IGlzIGZvdW5kLgoKICAgIE5vdGU6IHRoaXMgZnVuY3Rpb24gY2FuIGZhaWwgd2l0aCB0aGUgbmV3IGRpcmVjdG9yeSBzdHJ1Y3R1cmUgbWFkZQogICAgaWYgeW91IGxhY2sgcGVybWlzc2lvbnMgbmVlZGVkIHRvIHVubGluayB0aGUgbGVhZiBkaXJlY3Rvcnkgb3IKICAgIGZpbGUuCgogICAgIiIiCiAgICBoZWFkLCB0YWlsID0gcGF0aC5zcGxpdChuZXcpCiAgICBpZiBoZWFkIGFuZCB0YWlsIGFuZCBub3QgcGF0aC5leGlzdHMoaGVhZCk6CiAgICAgICAgbWFrZWRpcnMoaGVhZCkKICAgIHJlbmFtZShvbGQsIG5ldykKICAgIGhlYWQsIHRhaWwgPSBwYXRoLnNwbGl0KG9sZCkKICAgIGlmIGhlYWQgYW5kIHRhaWw6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZW1vdmVkaXJzKGhlYWQpCiAgICAgICAgZXhjZXB0IGVycm9yOgogICAgICAgICAgICBwYXNzCgpfX2FsbF9fLmV4dGVuZChbIm1ha2VkaXJzIiwgInJlbW92ZWRpcnMiLCAicmVuYW1lcyJdKQoKZGVmIHdhbGsodG9wLCB0b3Bkb3duPVRydWUsIG9uZXJyb3I9Tm9uZSwgZm9sbG93bGlua3M9RmFsc2UpOgogICAgIiIiRGlyZWN0b3J5IHRyZWUgZ2VuZXJhdG9yLgoKICAgIEZvciBlYWNoIGRpcmVjdG9yeSBpbiB0aGUgZGlyZWN0b3J5IHRyZWUgcm9vdGVkIGF0IHRvcCAoaW5jbHVkaW5nIHRvcAogICAgaXRzZWxmLCBidXQgZXhjbHVkaW5nICcuJyBhbmQgJy4uJyksIHlpZWxkcyBhIDMtdHVwbGUKCiAgICAgICAgZGlycGF0aCwgZGlybmFtZXMsIGZpbGVuYW1lcwoKICAgIGRpcnBhdGggaXMgYSBzdHJpbmcsIHRoZSBwYXRoIHRvIHRoZSBkaXJlY3RvcnkuICBkaXJuYW1lcyBpcyBhIGxpc3Qgb2YKICAgIHRoZSBuYW1lcyBvZiB0aGUgc3ViZGlyZWN0b3JpZXMgaW4gZGlycGF0aCAoZXhjbHVkaW5nICcuJyBhbmQgJy4uJykuCiAgICBmaWxlbmFtZXMgaXMgYSBsaXN0IG9mIHRoZSBuYW1lcyBvZiB0aGUgbm9uLWRpcmVjdG9yeSBmaWxlcyBpbiBkaXJwYXRoLgogICAgTm90ZSB0aGF0IHRoZSBuYW1lcyBpbiB0aGUgbGlzdHMgYXJlIGp1c3QgbmFtZXMsIHdpdGggbm8gcGF0aCBjb21wb25lbnRzLgogICAgVG8gZ2V0IGEgZnVsbCBwYXRoICh3aGljaCBiZWdpbnMgd2l0aCB0b3ApIHRvIGEgZmlsZSBvciBkaXJlY3RvcnkgaW4KICAgIGRpcnBhdGgsIGRvIG9zLnBhdGguam9pbihkaXJwYXRoLCBuYW1lKS4KCiAgICBJZiBvcHRpb25hbCBhcmcgJ3RvcGRvd24nIGlzIHRydWUgb3Igbm90IHNwZWNpZmllZCwgdGhlIHRyaXBsZSBmb3IgYQogICAgZGlyZWN0b3J5IGlzIGdlbmVyYXRlZCBiZWZvcmUgdGhlIHRyaXBsZXMgZm9yIGFueSBvZiBpdHMgc3ViZGlyZWN0b3JpZXMKICAgIChkaXJlY3RvcmllcyBhcmUgZ2VuZXJhdGVkIHRvcCBkb3duKS4gIElmIHRvcGRvd24gaXMgZmFsc2UsIHRoZSB0cmlwbGUKICAgIGZvciBhIGRpcmVjdG9yeSBpcyBnZW5lcmF0ZWQgYWZ0ZXIgdGhlIHRyaXBsZXMgZm9yIGFsbCBvZiBpdHMKICAgIHN1YmRpcmVjdG9yaWVzIChkaXJlY3RvcmllcyBhcmUgZ2VuZXJhdGVkIGJvdHRvbSB1cCkuCgogICAgV2hlbiB0b3Bkb3duIGlzIHRydWUsIHRoZSBjYWxsZXIgY2FuIG1vZGlmeSB0aGUgZGlybmFtZXMgbGlzdCBpbi1wbGFjZQogICAgKGUuZy4sIHZpYSBkZWwgb3Igc2xpY2UgYXNzaWdubWVudCksIGFuZCB3YWxrIHdpbGwgb25seSByZWN1cnNlIGludG8gdGhlCiAgICBzdWJkaXJlY3RvcmllcyB3aG9zZSBuYW1lcyByZW1haW4gaW4gZGlybmFtZXM7IHRoaXMgY2FuIGJlIHVzZWQgdG8gcHJ1bmUKICAgIHRoZSBzZWFyY2gsIG9yIHRvIGltcG9zZSBhIHNwZWNpZmljIG9yZGVyIG9mIHZpc2l0aW5nLiAgTW9kaWZ5aW5nCiAgICBkaXJuYW1lcyB3aGVuIHRvcGRvd24gaXMgZmFsc2UgaXMgaW5lZmZlY3RpdmUsIHNpbmNlIHRoZSBkaXJlY3RvcmllcyBpbgogICAgZGlybmFtZXMgaGF2ZSBhbHJlYWR5IGJlZW4gZ2VuZXJhdGVkIGJ5IHRoZSB0aW1lIGRpcm5hbWVzIGl0c2VsZiBpcwogICAgZ2VuZXJhdGVkLgoKICAgIEJ5IGRlZmF1bHQgZXJyb3JzIGZyb20gdGhlIG9zLmxpc3RkaXIoKSBjYWxsIGFyZSBpZ25vcmVkLiAgSWYKICAgIG9wdGlvbmFsIGFyZyAnb25lcnJvcicgaXMgc3BlY2lmaWVkLCBpdCBzaG91bGQgYmUgYSBmdW5jdGlvbjsgaXQKICAgIHdpbGwgYmUgY2FsbGVkIHdpdGggb25lIGFyZ3VtZW50LCBhbiBvcy5lcnJvciBpbnN0YW5jZS4gIEl0IGNhbgogICAgcmVwb3J0IHRoZSBlcnJvciB0byBjb250aW51ZSB3aXRoIHRoZSB3YWxrLCBvciByYWlzZSB0aGUgZXhjZXB0aW9uCiAgICB0byBhYm9ydCB0aGUgd2Fsay4gIE5vdGUgdGhhdCB0aGUgZmlsZW5hbWUgaXMgYXZhaWxhYmxlIGFzIHRoZQogICAgZmlsZW5hbWUgYXR0cmlidXRlIG9mIHRoZSBleGNlcHRpb24gb2JqZWN0LgoKICAgIEJ5IGRlZmF1bHQsIG9zLndhbGsgZG9lcyBub3QgZm9sbG93IHN5bWJvbGljIGxpbmtzIHRvIHN1YmRpcmVjdG9yaWVzIG9uCiAgICBzeXN0ZW1zIHRoYXQgc3VwcG9ydCB0aGVtLiAgSW4gb3JkZXIgdG8gZ2V0IHRoaXMgZnVuY3Rpb25hbGl0eSwgc2V0IHRoZQogICAgb3B0aW9uYWwgYXJndW1lbnQgJ2ZvbGxvd2xpbmtzJyB0byB0cnVlLgoKICAgIENhdXRpb246ICBpZiB5b3UgcGFzcyBhIHJlbGF0aXZlIHBhdGhuYW1lIGZvciB0b3AsIGRvbid0IGNoYW5nZSB0aGUKICAgIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkgYmV0d2VlbiByZXN1bXB0aW9ucyBvZiB3YWxrLiAgd2FsayBuZXZlcgogICAgY2hhbmdlcyB0aGUgY3VycmVudCBkaXJlY3RvcnksIGFuZCBhc3N1bWVzIHRoYXQgdGhlIGNsaWVudCBkb2Vzbid0CiAgICBlaXRoZXIuCgogICAgRXhhbXBsZToKCiAgICBpbXBvcnQgb3MKICAgIGZyb20gb3MucGF0aCBpbXBvcnQgam9pbiwgZ2V0c2l6ZQogICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsoJ3B5dGhvbi9MaWIvZW1haWwnKToKICAgICAgICBwcmludChyb290LCAiY29uc3VtZXMiLCBlbmQ9IiIpCiAgICAgICAgcHJpbnQoc3VtKFtnZXRzaXplKGpvaW4ocm9vdCwgbmFtZSkpIGZvciBuYW1lIGluIGZpbGVzXSksIGVuZD0iIikKICAgICAgICBwcmludCgiYnl0ZXMgaW4iLCBsZW4oZmlsZXMpLCAibm9uLWRpcmVjdG9yeSBmaWxlcyIpCiAgICAgICAgaWYgJ0NWUycgaW4gZGlyczoKICAgICAgICAgICAgZGlycy5yZW1vdmUoJ0NWUycpICAjIGRvbid0IHZpc2l0IENWUyBkaXJlY3RvcmllcwogICAgIiIiCgogICAgaXNsaW5rLCBqb2luLCBpc2RpciA9IHBhdGguaXNsaW5rLCBwYXRoLmpvaW4sIHBhdGguaXNkaXIKCiAgICAjIFdlIG1heSBub3QgaGF2ZSByZWFkIHBlcm1pc3Npb24gZm9yIHRvcCwgaW4gd2hpY2ggY2FzZSB3ZSBjYW4ndAogICAgIyBnZXQgYSBsaXN0IG9mIHRoZSBmaWxlcyB0aGUgZGlyZWN0b3J5IGNvbnRhaW5zLiAgb3Mud2FsawogICAgIyBhbHdheXMgc3VwcHJlc3NlZCB0aGUgZXhjZXB0aW9uIHRoZW4sIHJhdGhlciB0aGFuIGJsb3cgdXAgZm9yIGEKICAgICMgbWlub3IgcmVhc29uIHdoZW4gKHNheSkgYSB0aG91c2FuZCByZWFkYWJsZSBkaXJlY3RvcmllcyBhcmUgc3RpbGwKICAgICMgbGVmdCB0byB2aXNpdC4gIFRoYXQgbG9naWMgaXMgY29waWVkIGhlcmUuCiAgICB0cnk6CiAgICAgICAgIyBOb3RlIHRoYXQgbGlzdGRpciBhbmQgZXJyb3IgYXJlIGdsb2JhbHMgaW4gdGhpcyBtb2R1bGUgZHVlCiAgICAgICAgIyB0byBlYXJsaWVyIGltcG9ydC0qLgogICAgICAgIG5hbWVzID0gbGlzdGRpcih0b3ApCiAgICBleGNlcHQgZXJyb3IgYXMgZXJyOgogICAgICAgIGlmIG9uZXJyb3IgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG9uZXJyb3IoZXJyKQogICAgICAgIHJldHVybgoKICAgIGRpcnMsIG5vbmRpcnMgPSBbXSwgW10KICAgIGZvciBuYW1lIGluIG5hbWVzOgogICAgICAgIGlmIGlzZGlyKGpvaW4odG9wLCBuYW1lKSk6CiAgICAgICAgICAgIGRpcnMuYXBwZW5kKG5hbWUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbm9uZGlycy5hcHBlbmQobmFtZSkKCiAgICBpZiB0b3Bkb3duOgogICAgICAgIHlpZWxkIHRvcCwgZGlycywgbm9uZGlycwogICAgZm9yIG5hbWUgaW4gZGlyczoKICAgICAgICBuZXdfcGF0aCA9IGpvaW4odG9wLCBuYW1lKQogICAgICAgIGlmIGZvbGxvd2xpbmtzIG9yIG5vdCBpc2xpbmsobmV3X3BhdGgpOgogICAgICAgICAgICB5aWVsZCBmcm9tIHdhbGsobmV3X3BhdGgsIHRvcGRvd24sIG9uZXJyb3IsIGZvbGxvd2xpbmtzKQogICAgaWYgbm90IHRvcGRvd246CiAgICAgICAgeWllbGQgdG9wLCBkaXJzLCBub25kaXJzCgpfX2FsbF9fLmFwcGVuZCgid2FsayIpCgppZiB7b3Blbiwgc3RhdH0gPD0gc3VwcG9ydHNfZGlyX2ZkIGFuZCB7bGlzdGRpciwgc3RhdH0gPD0gc3VwcG9ydHNfZmQ6CgogICAgZGVmIGZ3YWxrKHRvcD0iLiIsIHRvcGRvd249VHJ1ZSwgb25lcnJvcj1Ob25lLCAqLCBmb2xsb3dfc3ltbGlua3M9RmFsc2UsIGRpcl9mZD1Ob25lKToKICAgICAgICAiIiJEaXJlY3RvcnkgdHJlZSBnZW5lcmF0b3IuCgogICAgICAgIFRoaXMgYmVoYXZlcyBleGFjdGx5IGxpa2Ugd2FsaygpLCBleGNlcHQgdGhhdCBpdCB5aWVsZHMgYSA0LXR1cGxlCgogICAgICAgICAgICBkaXJwYXRoLCBkaXJuYW1lcywgZmlsZW5hbWVzLCBkaXJmZAoKICAgICAgICBgZGlycGF0aGAsIGBkaXJuYW1lc2AgYW5kIGBmaWxlbmFtZXNgIGFyZSBpZGVudGljYWwgdG8gd2FsaygpIG91dHB1dCwKICAgICAgICBhbmQgYGRpcmZkYCBpcyBhIGZpbGUgZGVzY3JpcHRvciByZWZlcnJpbmcgdG8gdGhlIGRpcmVjdG9yeSBgZGlycGF0aGAuCgogICAgICAgIFRoZSBhZHZhbnRhZ2Ugb2YgZndhbGsoKSBvdmVyIHdhbGsoKSBpcyB0aGF0IGl0J3Mgc2FmZSBhZ2FpbnN0IHN5bWxpbmsKICAgICAgICByYWNlcyAod2hlbiBmb2xsb3dfc3ltbGlua3MgaXMgRmFsc2UpLgoKICAgICAgICBJZiBkaXJfZmQgaXMgbm90IE5vbmUsIGl0IHNob3VsZCBiZSBhIGZpbGUgZGVzY3JpcHRvciBvcGVuIHRvIGEgZGlyZWN0b3J5LAogICAgICAgICAgYW5kIHRvcCBzaG91bGQgYmUgcmVsYXRpdmU7IHRvcCB3aWxsIHRoZW4gYmUgcmVsYXRpdmUgdG8gdGhhdCBkaXJlY3RvcnkuCiAgICAgICAgICAoZGlyX2ZkIGlzIGFsd2F5cyBzdXBwb3J0ZWQgZm9yIGZ3YWxrLikKCiAgICAgICAgQ2F1dGlvbjoKICAgICAgICBTaW5jZSBmd2FsaygpIHlpZWxkcyBmaWxlIGRlc2NyaXB0b3JzLCB0aG9zZSBhcmUgb25seSB2YWxpZCB1bnRpbCB0aGUKICAgICAgICBuZXh0IGl0ZXJhdGlvbiBzdGVwLCBzbyB5b3Ugc2hvdWxkIGR1cCgpIHRoZW0gaWYgeW91IHdhbnQgdG8ga2VlcCB0aGVtCiAgICAgICAgZm9yIGEgbG9uZ2VyIHBlcmlvZC4KCiAgICAgICAgRXhhbXBsZToKCiAgICAgICAgaW1wb3J0IG9zCiAgICAgICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzLCByb290ZmQgaW4gb3MuZndhbGsoJ3B5dGhvbi9MaWIvZW1haWwnKToKICAgICAgICAgICAgcHJpbnQocm9vdCwgImNvbnN1bWVzIiwgZW5kPSIiKQogICAgICAgICAgICBwcmludChzdW0oW29zLnN0YXQobmFtZSwgZGlyX2ZkPXJvb3RmZCkuc3Rfc2l6ZSBmb3IgbmFtZSBpbiBmaWxlc10pLAogICAgICAgICAgICAgICAgICBlbmQ9IiIpCiAgICAgICAgICAgIHByaW50KCJieXRlcyBpbiIsIGxlbihmaWxlcyksICJub24tZGlyZWN0b3J5IGZpbGVzIikKICAgICAgICAgICAgaWYgJ0NWUycgaW4gZGlyczoKICAgICAgICAgICAgICAgIGRpcnMucmVtb3ZlKCdDVlMnKSAgIyBkb24ndCB2aXNpdCBDVlMgZGlyZWN0b3JpZXMKICAgICAgICAiIiIKICAgICAgICAjIE5vdGU6IFRvIGd1YXJkIGFnYWluc3Qgc3ltbGluayByYWNlcywgd2UgdXNlIHRoZSBzdGFuZGFyZAogICAgICAgICMgbHN0YXQoKS9vcGVuKCkvZnN0YXQoKSB0cmljay4KICAgICAgICBvcmlnX3N0ID0gc3RhdCh0b3AsIGZvbGxvd19zeW1saW5rcz1GYWxzZSwgZGlyX2ZkPWRpcl9mZCkKICAgICAgICB0b3BmZCA9IG9wZW4odG9wLCBPX1JET05MWSwgZGlyX2ZkPWRpcl9mZCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIChmb2xsb3dfc3ltbGlua3Mgb3IgKHN0LlNfSVNESVIob3JpZ19zdC5zdF9tb2RlKSBhbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5zYW1lc3RhdChvcmlnX3N0LCBzdGF0KHRvcGZkKSkpKToKICAgICAgICAgICAgICAgIHlpZWxkIGZyb20gX2Z3YWxrKHRvcGZkLCB0b3AsIHRvcGRvd24sIG9uZXJyb3IsIGZvbGxvd19zeW1saW5rcykKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICBjbG9zZSh0b3BmZCkKCiAgICBkZWYgX2Z3YWxrKHRvcGZkLCB0b3BwYXRoLCB0b3Bkb3duLCBvbmVycm9yLCBmb2xsb3dfc3ltbGlua3MpOgogICAgICAgICMgTm90ZTogVGhpcyB1c2VzIE8oZGVwdGggb2YgdGhlIGRpcmVjdG9yeSB0cmVlKSBmaWxlIGRlc2NyaXB0b3JzOiBpZgogICAgICAgICMgbmVjZXNzYXJ5LCBpdCBjYW4gYmUgYWRhcHRlZCB0byBvbmx5IHJlcXVpcmUgTygxKSBGRHMsIHNlZSBpc3N1ZQogICAgICAgICMgIzEzNzM0LgoKICAgICAgICBuYW1lcyA9IGxpc3RkaXIodG9wZmQpCiAgICAgICAgZGlycywgbm9uZGlycyA9IFtdLCBbXQogICAgICAgIGZvciBuYW1lIGluIG5hbWVzOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAjIEhlcmUsIHdlIGRvbid0IHVzZSBBVF9TWU1MSU5LX05PRk9MTE9XIHRvIGJlIGNvbnNpc3RlbnQgd2l0aAogICAgICAgICAgICAgICAgIyB3YWxrKCkgd2hpY2ggcmVwb3J0cyBzeW1saW5rcyB0byBkaXJlY3RvcmllcyBhcyBkaXJlY3Rvcmllcy4KICAgICAgICAgICAgICAgICMgV2UgZG8gaG93ZXZlciBjaGVjayBmb3Igc3ltbGlua3MgYmVmb3JlIHJlY3Vyc2luZyBpbnRvCiAgICAgICAgICAgICAgICAjIGEgc3ViZGlyZWN0b3J5LgogICAgICAgICAgICAgICAgaWYgc3QuU19JU0RJUihzdGF0KG5hbWUsIGRpcl9mZD10b3BmZCkuc3RfbW9kZSk6CiAgICAgICAgICAgICAgICAgICAgZGlycy5hcHBlbmQobmFtZSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbm9uZGlycy5hcHBlbmQobmFtZSkKICAgICAgICAgICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICMgQWRkIGRhbmdsaW5nIHN5bWxpbmtzLCBpZ25vcmUgZGlzYXBwZWFyZWQgZmlsZXMKICAgICAgICAgICAgICAgICAgICBpZiBzdC5TX0lTTE5LKHN0YXQobmFtZSwgZGlyX2ZkPXRvcGZkLCBmb2xsb3dfc3ltbGlua3M9RmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0X21vZGUpOgogICAgICAgICAgICAgICAgICAgICAgICBub25kaXJzLmFwcGVuZChuYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGlmIHRvcGRvd246CiAgICAgICAgICAgIHlpZWxkIHRvcHBhdGgsIGRpcnMsIG5vbmRpcnMsIHRvcGZkCgogICAgICAgIGZvciBuYW1lIGluIGRpcnM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG9yaWdfc3QgPSBzdGF0KG5hbWUsIGRpcl9mZD10b3BmZCwgZm9sbG93X3N5bWxpbmtzPWZvbGxvd19zeW1saW5rcykKICAgICAgICAgICAgICAgIGRpcmZkID0gb3BlbihuYW1lLCBPX1JET05MWSwgZGlyX2ZkPXRvcGZkKQogICAgICAgICAgICBleGNlcHQgZXJyb3IgYXMgZXJyOgogICAgICAgICAgICAgICAgaWYgb25lcnJvciBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBvbmVycm9yKGVycikKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiBmb2xsb3dfc3ltbGlua3Mgb3IgcGF0aC5zYW1lc3RhdChvcmlnX3N0LCBzdGF0KGRpcmZkKSk6CiAgICAgICAgICAgICAgICAgICAgZGlycGF0aCA9IHBhdGguam9pbih0b3BwYXRoLCBuYW1lKQogICAgICAgICAgICAgICAgICAgIHlpZWxkIGZyb20gX2Z3YWxrKGRpcmZkLCBkaXJwYXRoLCB0b3Bkb3duLCBvbmVycm9yLCBmb2xsb3dfc3ltbGlua3MpCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBjbG9zZShkaXJmZCkKCiAgICAgICAgaWYgbm90IHRvcGRvd246CiAgICAgICAgICAgIHlpZWxkIHRvcHBhdGgsIGRpcnMsIG5vbmRpcnMsIHRvcGZkCgogICAgX19hbGxfXy5hcHBlbmQoImZ3YWxrIikKCiMgTWFrZSBzdXJlIG9zLmVudmlyb24gZXhpc3RzLCBhdCBsZWFzdAp0cnk6CiAgICBlbnZpcm9uCmV4Y2VwdCBOYW1lRXJyb3I6CiAgICBlbnZpcm9uID0ge30KCmRlZiBleGVjbChmaWxlLCAqYXJncyk6CiAgICAiIiJleGVjbChmaWxlLCAqYXJncykKCiAgICBFeGVjdXRlIHRoZSBleGVjdXRhYmxlIGZpbGUgd2l0aCBhcmd1bWVudCBsaXN0IGFyZ3MsIHJlcGxhY2luZyB0aGUKICAgIGN1cnJlbnQgcHJvY2Vzcy4gIiIiCiAgICBleGVjdihmaWxlLCBhcmdzKQoKZGVmIGV4ZWNsZShmaWxlLCAqYXJncyk6CiAgICAiIiJleGVjbGUoZmlsZSwgKmFyZ3MsIGVudikKCiAgICBFeGVjdXRlIHRoZSBleGVjdXRhYmxlIGZpbGUgd2l0aCBhcmd1bWVudCBsaXN0IGFyZ3MgYW5kCiAgICBlbnZpcm9ubWVudCBlbnYsIHJlcGxhY2luZyB0aGUgY3VycmVudCBwcm9jZXNzLiAiIiIKICAgIGVudiA9IGFyZ3NbLTFdCiAgICBleGVjdmUoZmlsZSwgYXJnc1s6LTFdLCBlbnYpCgpkZWYgZXhlY2xwKGZpbGUsICphcmdzKToKICAgICIiImV4ZWNscChmaWxlLCAqYXJncykKCiAgICBFeGVjdXRlIHRoZSBleGVjdXRhYmxlIGZpbGUgKHdoaWNoIGlzIHNlYXJjaGVkIGZvciBhbG9uZyAkUEFUSCkKICAgIHdpdGggYXJndW1lbnQgbGlzdCBhcmdzLCByZXBsYWNpbmcgdGhlIGN1cnJlbnQgcHJvY2Vzcy4gIiIiCiAgICBleGVjdnAoZmlsZSwgYXJncykKCmRlZiBleGVjbHBlKGZpbGUsICphcmdzKToKICAgICIiImV4ZWNscGUoZmlsZSwgKmFyZ3MsIGVudikKCiAgICBFeGVjdXRlIHRoZSBleGVjdXRhYmxlIGZpbGUgKHdoaWNoIGlzIHNlYXJjaGVkIGZvciBhbG9uZyAkUEFUSCkKICAgIHdpdGggYXJndW1lbnQgbGlzdCBhcmdzIGFuZCBlbnZpcm9ubWVudCBlbnYsIHJlcGxhY2luZyB0aGUgY3VycmVudAogICAgcHJvY2Vzcy4gIiIiCiAgICBlbnYgPSBhcmdzWy0xXQogICAgZXhlY3ZwZShmaWxlLCBhcmdzWzotMV0sIGVudikKCmRlZiBleGVjdnAoZmlsZSwgYXJncyk6CiAgICAiIiJleGVjdnAoZmlsZSwgYXJncykKCiAgICBFeGVjdXRlIHRoZSBleGVjdXRhYmxlIGZpbGUgKHdoaWNoIGlzIHNlYXJjaGVkIGZvciBhbG9uZyAkUEFUSCkKICAgIHdpdGggYXJndW1lbnQgbGlzdCBhcmdzLCByZXBsYWNpbmcgdGhlIGN1cnJlbnQgcHJvY2Vzcy4KICAgIGFyZ3MgbWF5IGJlIGEgbGlzdCBvciB0dXBsZSBvZiBzdHJpbmdzLiAiIiIKICAgIF9leGVjdnBlKGZpbGUsIGFyZ3MpCgpkZWYgZXhlY3ZwZShmaWxlLCBhcmdzLCBlbnYpOgogICAgIiIiZXhlY3ZwZShmaWxlLCBhcmdzLCBlbnYpCgogICAgRXhlY3V0ZSB0aGUgZXhlY3V0YWJsZSBmaWxlICh3aGljaCBpcyBzZWFyY2hlZCBmb3IgYWxvbmcgJFBBVEgpCiAgICB3aXRoIGFyZ3VtZW50IGxpc3QgYXJncyBhbmQgZW52aXJvbm1lbnQgZW52ICwgcmVwbGFjaW5nIHRoZQogICAgY3VycmVudCBwcm9jZXNzLgogICAgYXJncyBtYXkgYmUgYSBsaXN0IG9yIHR1cGxlIG9mIHN0cmluZ3MuICIiIgogICAgX2V4ZWN2cGUoZmlsZSwgYXJncywgZW52KQoKX19hbGxfXy5leHRlbmQoWyJleGVjbCIsImV4ZWNsZSIsImV4ZWNscCIsImV4ZWNscGUiLCJleGVjdnAiLCJleGVjdnBlIl0pCgpkZWYgX2V4ZWN2cGUoZmlsZSwgYXJncywgZW52PU5vbmUpOgogICAgaWYgZW52IGlzIG5vdCBOb25lOgogICAgICAgIGV4ZWNfZnVuYyA9IGV4ZWN2ZQogICAgICAgIGFyZ3Jlc3QgPSAoYXJncywgZW52KQogICAgZWxzZToKICAgICAgICBleGVjX2Z1bmMgPSBleGVjdgogICAgICAgIGFyZ3Jlc3QgPSAoYXJncywpCiAgICAgICAgZW52ID0gZW52aXJvbgoKICAgIGhlYWQsIHRhaWwgPSBwYXRoLnNwbGl0KGZpbGUpCiAgICBpZiBoZWFkOgogICAgICAgIGV4ZWNfZnVuYyhmaWxlLCAqYXJncmVzdCkKICAgICAgICByZXR1cm4KICAgIGxhc3RfZXhjID0gc2F2ZWRfZXhjID0gTm9uZQogICAgc2F2ZWRfdGIgPSBOb25lCiAgICBwYXRoX2xpc3QgPSBnZXRfZXhlY19wYXRoKGVudikKICAgIGlmIG5hbWUgIT0gJ250JzoKICAgICAgICBmaWxlID0gZnNlbmNvZGUoZmlsZSkKICAgICAgICBwYXRoX2xpc3QgPSBtYXAoZnNlbmNvZGUsIHBhdGhfbGlzdCkKICAgIGZvciBkaXIgaW4gcGF0aF9saXN0OgogICAgICAgIGZ1bGxuYW1lID0gcGF0aC5qb2luKGRpciwgZmlsZSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGV4ZWNfZnVuYyhmdWxsbmFtZSwgKmFyZ3Jlc3QpCiAgICAgICAgZXhjZXB0IGVycm9yIGFzIGU6CiAgICAgICAgICAgIGxhc3RfZXhjID0gZQogICAgICAgICAgICB0YiA9IHN5cy5leGNfaW5mbygpWzJdCiAgICAgICAgICAgIGlmIChlLmVycm5vICE9IGVycm5vLkVOT0VOVCBhbmQgZS5lcnJubyAhPSBlcnJuby5FTk9URElSCiAgICAgICAgICAgICAgICBhbmQgc2F2ZWRfZXhjIGlzIE5vbmUpOgogICAgICAgICAgICAgICAgc2F2ZWRfZXhjID0gZQogICAgICAgICAgICAgICAgc2F2ZWRfdGIgPSB0YgogICAgaWYgc2F2ZWRfZXhjOgogICAgICAgIHJhaXNlIHNhdmVkX2V4Yy53aXRoX3RyYWNlYmFjayhzYXZlZF90YikKICAgIHJhaXNlIGxhc3RfZXhjLndpdGhfdHJhY2ViYWNrKHRiKQoKCmRlZiBnZXRfZXhlY19wYXRoKGVudj1Ob25lKToKICAgICIiIlJldHVybnMgdGhlIHNlcXVlbmNlIG9mIGRpcmVjdG9yaWVzIHRoYXQgd2lsbCBiZSBzZWFyY2hlZCBmb3IgdGhlCiAgICBuYW1lZCBleGVjdXRhYmxlIChzaW1pbGFyIHRvIGEgc2hlbGwpIHdoZW4gbGF1bmNoaW5nIGEgcHJvY2Vzcy4KCiAgICAqZW52KiBtdXN0IGJlIGFuIGVudmlyb25tZW50IHZhcmlhYmxlIGRpY3Qgb3IgTm9uZS4gIElmICplbnYqIGlzIE5vbmUsCiAgICBvcy5lbnZpcm9uIHdpbGwgYmUgdXNlZC4KICAgICIiIgogICAgIyBVc2UgYSBsb2NhbCBpbXBvcnQgaW5zdGVhZCBvZiBhIGdsb2JhbCBpbXBvcnQgdG8gbGltaXQgdGhlIG51bWJlciBvZgogICAgIyBtb2R1bGVzIGxvYWRlZCBhdCBzdGFydHVwOiB0aGUgb3MgbW9kdWxlIGlzIGFsd2F5cyBsb2FkZWQgYXQgc3RhcnR1cCBieQogICAgIyBQeXRob24uIEl0IG1heSBhbHNvIGF2b2lkIGEgYm9vdHN0cmFwIGlzc3VlLgogICAgaW1wb3J0IHdhcm5pbmdzCgogICAgaWYgZW52IGlzIE5vbmU6CiAgICAgICAgZW52ID0gZW52aXJvbgoKICAgICMge2InUEFUSCc6IC4uLn0uZ2V0KCdQQVRIJykgYW5kIHsnUEFUSCc6IC4uLn0uZ2V0KGInUEFUSCcpIGVtaXQgYQogICAgIyBCeXRlc1dhcm5pbmcgd2hlbiB1c2luZyBweXRob24gLWIgb3IgcHl0aG9uIC1iYjogaWdub3JlIHRoZSB3YXJuaW5nCiAgICB3aXRoIHdhcm5pbmdzLmNhdGNoX3dhcm5pbmdzKCk6CiAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJpZ25vcmUiLCBCeXRlc1dhcm5pbmcpCgogICAgICAgIHRyeToKICAgICAgICAgICAgcGF0aF9saXN0ID0gZW52LmdldCgnUEFUSCcpCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICAgICAgcGF0aF9saXN0ID0gTm9uZQoKICAgICAgICBpZiBzdXBwb3J0c19ieXRlc19lbnZpcm9uOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBwYXRoX2xpc3RiID0gZW52W2InUEFUSCddCiAgICAgICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIFR5cGVFcnJvcik6CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBwYXRoX2xpc3QgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgImVudiBjYW5ub3QgY29udGFpbiAnUEFUSCcgYW5kIGInUEFUSCcga2V5cyIpCiAgICAgICAgICAgICAgICBwYXRoX2xpc3QgPSBwYXRoX2xpc3RiCgogICAgICAgICAgICBpZiBwYXRoX2xpc3QgaXMgbm90IE5vbmUgYW5kIGlzaW5zdGFuY2UocGF0aF9saXN0LCBieXRlcyk6CiAgICAgICAgICAgICAgICBwYXRoX2xpc3QgPSBmc2RlY29kZShwYXRoX2xpc3QpCgogICAgaWYgcGF0aF9saXN0IGlzIE5vbmU6CiAgICAgICAgcGF0aF9saXN0ID0gZGVmcGF0aAogICAgcmV0dXJuIHBhdGhfbGlzdC5zcGxpdChwYXRoc2VwKQoKCiMgQ2hhbmdlIGVudmlyb24gdG8gYXV0b21hdGljYWxseSBjYWxsIHB1dGVudigpLCB1bnNldGVudiBpZiB0aGV5IGV4aXN0Lgpmcm9tIGNvbGxlY3Rpb25zLmFiYyBpbXBvcnQgTXV0YWJsZU1hcHBpbmcKCmNsYXNzIF9FbnZpcm9uKE11dGFibGVNYXBwaW5nKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkYXRhLCBlbmNvZGVrZXksIGRlY29kZWtleSwgZW5jb2RldmFsdWUsIGRlY29kZXZhbHVlLCBwdXRlbnYsIHVuc2V0ZW52KToKICAgICAgICBzZWxmLmVuY29kZWtleSA9IGVuY29kZWtleQogICAgICAgIHNlbGYuZGVjb2Rla2V5ID0gZGVjb2Rla2V5CiAgICAgICAgc2VsZi5lbmNvZGV2YWx1ZSA9IGVuY29kZXZhbHVlCiAgICAgICAgc2VsZi5kZWNvZGV2YWx1ZSA9IGRlY29kZXZhbHVlCiAgICAgICAgc2VsZi5wdXRlbnYgPSBwdXRlbnYKICAgICAgICBzZWxmLnVuc2V0ZW52ID0gdW5zZXRlbnYKICAgICAgICBzZWxmLl9kYXRhID0gZGF0YQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIHZhbHVlID0gc2VsZi5fZGF0YVtzZWxmLmVuY29kZWtleShrZXkpXQogICAgICAgIHJldHVybiBzZWxmLmRlY29kZXZhbHVlKHZhbHVlKQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXksIHZhbHVlKToKICAgICAgICBrZXkgPSBzZWxmLmVuY29kZWtleShrZXkpCiAgICAgICAgdmFsdWUgPSBzZWxmLmVuY29kZXZhbHVlKHZhbHVlKQogICAgICAgIHNlbGYucHV0ZW52KGtleSwgdmFsdWUpCiAgICAgICAgc2VsZi5fZGF0YVtrZXldID0gdmFsdWUKCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5KToKICAgICAgICBrZXkgPSBzZWxmLmVuY29kZWtleShrZXkpCiAgICAgICAgc2VsZi51bnNldGVudihrZXkpCiAgICAgICAgZGVsIHNlbGYuX2RhdGFba2V5XQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICBmb3Iga2V5IGluIHNlbGYuX2RhdGE6CiAgICAgICAgICAgIHlpZWxkIHNlbGYuZGVjb2Rla2V5KGtleSkKCiAgICBkZWYgX19sZW5fXyhzZWxmKToKICAgICAgICByZXR1cm4gbGVuKHNlbGYuX2RhdGEpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAnZW52aXJvbih7e3t9fX0pJy5mb3JtYXQoJywgJy5qb2luKAogICAgICAgICAgICAoJ3shcn06IHshcn0nLmZvcm1hdChzZWxmLmRlY29kZWtleShrZXkpLCBzZWxmLmRlY29kZXZhbHVlKHZhbHVlKSkKICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gc2VsZi5fZGF0YS5pdGVtcygpKSkpCgogICAgZGVmIGNvcHkoc2VsZik6CiAgICAgICAgcmV0dXJuIGRpY3Qoc2VsZikKCiAgICBkZWYgc2V0ZGVmYXVsdChzZWxmLCBrZXksIHZhbHVlKToKICAgICAgICBpZiBrZXkgbm90IGluIHNlbGY6CiAgICAgICAgICAgIHNlbGZba2V5XSA9IHZhbHVlCiAgICAgICAgcmV0dXJuIHNlbGZba2V5XQoKdHJ5OgogICAgX3B1dGVudiA9IHB1dGVudgpleGNlcHQgTmFtZUVycm9yOgogICAgX3B1dGVudiA9IGxhbWJkYSBrZXksIHZhbHVlOiBOb25lCmVsc2U6CiAgICBfX2FsbF9fLmFwcGVuZCgicHV0ZW52IikKCnRyeToKICAgIF91bnNldGVudiA9IHVuc2V0ZW52CmV4Y2VwdCBOYW1lRXJyb3I6CiAgICBfdW5zZXRlbnYgPSBsYW1iZGEga2V5OiBfcHV0ZW52KGtleSwgIiIpCmVsc2U6CiAgICBfX2FsbF9fLmFwcGVuZCgidW5zZXRlbnYiKQoKZGVmIF9jcmVhdGVlbnZpcm9uKCk6CiAgICBpZiBuYW1lIGluICgnb3MyJywgJ250Jyk6CiAgICAgICAgIyBXaGVyZSBFbnYgVmFyIE5hbWVzIE11c3QgQmUgVVBQRVJDQVNFCiAgICAgICAgZGVmIGNoZWNrX3N0cih2YWx1ZSk6CiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBzdHIpOgogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJzdHIgZXhwZWN0ZWQsIG5vdCAlcyIgJSB0eXBlKHZhbHVlKS5fX25hbWVfXykKICAgICAgICAgICAgcmV0dXJuIHZhbHVlCiAgICAgICAgZW5jb2RlID0gY2hlY2tfc3RyCiAgICAgICAgZGVjb2RlID0gc3RyCiAgICAgICAgZGVmIGVuY29kZWtleShrZXkpOgogICAgICAgICAgICByZXR1cm4gZW5jb2RlKGtleSkudXBwZXIoKQogICAgICAgIGRhdGEgPSB7fQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGVudmlyb24uaXRlbXMoKToKICAgICAgICAgICAgZGF0YVtlbmNvZGVrZXkoa2V5KV0gPSB2YWx1ZQogICAgZWxzZToKICAgICAgICAjIFdoZXJlIEVudiBWYXIgTmFtZXMgQ2FuIEJlIE1peGVkIENhc2UKICAgICAgICBlbmNvZGluZyA9IHN5cy5nZXRmaWxlc3lzdGVtZW5jb2RpbmcoKQogICAgICAgIGRlZiBlbmNvZGUodmFsdWUpOgogICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWx1ZSwgc3RyKToKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigic3RyIGV4cGVjdGVkLCBub3QgJXMiICUgdHlwZSh2YWx1ZSkuX19uYW1lX18pCiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5lbmNvZGUoZW5jb2RpbmcsICdzdXJyb2dhdGVlc2NhcGUnKQogICAgICAgIGRlZiBkZWNvZGUodmFsdWUpOgogICAgICAgICAgICByZXR1cm4gdmFsdWUuZGVjb2RlKGVuY29kaW5nLCAnc3Vycm9nYXRlZXNjYXBlJykKICAgICAgICBlbmNvZGVrZXkgPSBlbmNvZGUKICAgICAgICBkYXRhID0gZW52aXJvbgogICAgcmV0dXJuIF9FbnZpcm9uKGRhdGEsCiAgICAgICAgZW5jb2Rla2V5LCBkZWNvZGUsCiAgICAgICAgZW5jb2RlLCBkZWNvZGUsCiAgICAgICAgX3B1dGVudiwgX3Vuc2V0ZW52KQoKIyB1bmljb2RlIGVudmlyb24KZW52aXJvbiA9IF9jcmVhdGVlbnZpcm9uKCkKZGVsIF9jcmVhdGVlbnZpcm9uCgoKZGVmIGdldGVudihrZXksIGRlZmF1bHQ9Tm9uZSk6CiAgICAiIiJHZXQgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUsIHJldHVybiBOb25lIGlmIGl0IGRvZXNuJ3QgZXhpc3QuCiAgICBUaGUgb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IGNhbiBzcGVjaWZ5IGFuIGFsdGVybmF0ZSBkZWZhdWx0LgogICAga2V5LCBkZWZhdWx0IGFuZCB0aGUgcmVzdWx0IGFyZSBzdHIuIiIiCiAgICByZXR1cm4gZW52aXJvbi5nZXQoa2V5LCBkZWZhdWx0KQoKc3VwcG9ydHNfYnl0ZXNfZW52aXJvbiA9IG5hbWUgbm90IGluICgnb3MyJywgJ250JykKX19hbGxfXy5leHRlbmQoKCJnZXRlbnYiLCAic3VwcG9ydHNfYnl0ZXNfZW52aXJvbiIpKQoKaWYgc3VwcG9ydHNfYnl0ZXNfZW52aXJvbjoKICAgIGRlZiBfY2hlY2tfYnl0ZXModmFsdWUpOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBieXRlcyk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYnl0ZXMgZXhwZWN0ZWQsIG5vdCAlcyIgJSB0eXBlKHZhbHVlKS5fX25hbWVfXykKICAgICAgICByZXR1cm4gdmFsdWUKCiAgICAjIGJ5dGVzIGVudmlyb24KICAgIGVudmlyb25iID0gX0Vudmlyb24oZW52aXJvbi5fZGF0YSwKICAgICAgICBfY2hlY2tfYnl0ZXMsIGJ5dGVzLAogICAgICAgIF9jaGVja19ieXRlcywgYnl0ZXMsCiAgICAgICAgX3B1dGVudiwgX3Vuc2V0ZW52KQogICAgZGVsIF9jaGVja19ieXRlcwoKICAgIGRlZiBnZXRlbnZiKGtleSwgZGVmYXVsdD1Ob25lKToKICAgICAgICAiIiJHZXQgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUsIHJldHVybiBOb25lIGlmIGl0IGRvZXNuJ3QgZXhpc3QuCiAgICAgICAgVGhlIG9wdGlvbmFsIHNlY29uZCBhcmd1bWVudCBjYW4gc3BlY2lmeSBhbiBhbHRlcm5hdGUgZGVmYXVsdC4KICAgICAgICBrZXksIGRlZmF1bHQgYW5kIHRoZSByZXN1bHQgYXJlIGJ5dGVzLiIiIgogICAgICAgIHJldHVybiBlbnZpcm9uYi5nZXQoa2V5LCBkZWZhdWx0KQoKICAgIF9fYWxsX18uZXh0ZW5kKCgiZW52aXJvbmIiLCAiZ2V0ZW52YiIpKQoKZGVmIF9mc2NvZGVjKCk6CiAgICBlbmNvZGluZyA9IHN5cy5nZXRmaWxlc3lzdGVtZW5jb2RpbmcoKQogICAgaWYgZW5jb2RpbmcgPT0gJ21iY3MnOgogICAgICAgIGVycm9ycyA9ICdzdHJpY3QnCiAgICBlbHNlOgogICAgICAgIGVycm9ycyA9ICdzdXJyb2dhdGVlc2NhcGUnCgogICAgZGVmIGZzZW5jb2RlKGZpbGVuYW1lKToKICAgICAgICAiIiIKICAgICAgICBFbmNvZGUgZmlsZW5hbWUgdG8gdGhlIGZpbGVzeXN0ZW0gZW5jb2Rpbmcgd2l0aCAnc3Vycm9nYXRlZXNjYXBlJyBlcnJvcgogICAgICAgIGhhbmRsZXIsIHJldHVybiBieXRlcyB1bmNoYW5nZWQuIE9uIFdpbmRvd3MsIHVzZSAnc3RyaWN0JyBlcnJvciBoYW5kbGVyIGlmCiAgICAgICAgdGhlIGZpbGUgc3lzdGVtIGVuY29kaW5nIGlzICdtYmNzJyAod2hpY2ggaXMgdGhlIGRlZmF1bHQgZW5jb2RpbmcpLgogICAgICAgICIiIgogICAgICAgIGlmIGlzaW5zdGFuY2UoZmlsZW5hbWUsIGJ5dGVzKToKICAgICAgICAgICAgcmV0dXJuIGZpbGVuYW1lCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKGZpbGVuYW1lLCBzdHIpOgogICAgICAgICAgICByZXR1cm4gZmlsZW5hbWUuZW5jb2RlKGVuY29kaW5nLCBlcnJvcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJleHBlY3QgYnl0ZXMgb3Igc3RyLCBub3QgJXMiICUgdHlwZShmaWxlbmFtZSkuX19uYW1lX18pCgogICAgZGVmIGZzZGVjb2RlKGZpbGVuYW1lKToKICAgICAgICAiIiIKICAgICAgICBEZWNvZGUgZmlsZW5hbWUgZnJvbSB0aGUgZmlsZXN5c3RlbSBlbmNvZGluZyB3aXRoICdzdXJyb2dhdGVlc2NhcGUnIGVycm9yCiAgICAgICAgaGFuZGxlciwgcmV0dXJuIHN0ciB1bmNoYW5nZWQuIE9uIFdpbmRvd3MsIHVzZSAnc3RyaWN0JyBlcnJvciBoYW5kbGVyIGlmCiAgICAgICAgdGhlIGZpbGUgc3lzdGVtIGVuY29kaW5nIGlzICdtYmNzJyAod2hpY2ggaXMgdGhlIGRlZmF1bHQgZW5jb2RpbmcpLgogICAgICAgICIiIgogICAgICAgIGlmIGlzaW5zdGFuY2UoZmlsZW5hbWUsIHN0cik6CiAgICAgICAgICAgIHJldHVybiBmaWxlbmFtZQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShmaWxlbmFtZSwgYnl0ZXMpOgogICAgICAgICAgICByZXR1cm4gZmlsZW5hbWUuZGVjb2RlKGVuY29kaW5nLCBlcnJvcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJleHBlY3QgYnl0ZXMgb3Igc3RyLCBub3QgJXMiICUgdHlwZShmaWxlbmFtZSkuX19uYW1lX18pCgogICAgcmV0dXJuIGZzZW5jb2RlLCBmc2RlY29kZQoKZnNlbmNvZGUsIGZzZGVjb2RlID0gX2ZzY29kZWMoKQpkZWwgX2ZzY29kZWMKCiMgU3VwcGx5IHNwYXduKigpIChwcm9iYWJseSBvbmx5IGZvciBVbml4KQppZiBfZXhpc3RzKCJmb3JrIikgYW5kIG5vdCBfZXhpc3RzKCJzcGF3bnYiKSBhbmQgX2V4aXN0cygiZXhlY3YiKToKCiAgICBQX1dBSVQgPSAwCiAgICBQX05PV0FJVCA9IFBfTk9XQUlUTyA9IDEKCiAgICBfX2FsbF9fLmV4dGVuZChbIlBfV0FJVCIsICJQX05PV0FJVCIsICJQX05PV0FJVE8iXSkKCiAgICAjIFhYWCBTaG91bGQgd2Ugc3VwcG9ydCBQX0RFVEFDSD8gIEkgc3VwcG9zZSBpdCBjb3VsZCBmb3JrKCkqKjIKICAgICMgYW5kIGNsb3NlIHRoZSBzdGQgSS9PIHN0cmVhbXMuICBBbHNvLCBQX09WRVJMQVkgaXMgdGhlIHNhbWUKICAgICMgYXMgZXhlY3YqKCk/CgogICAgZGVmIF9zcGF3bnZlZihtb2RlLCBmaWxlLCBhcmdzLCBlbnYsIGZ1bmMpOgogICAgICAgICMgSW50ZXJuYWwgaGVscGVyOyBmdW5jIGlzIHRoZSBleGVjKigpIGZ1bmN0aW9uIHRvIHVzZQogICAgICAgIHBpZCA9IGZvcmsoKQogICAgICAgIGlmIG5vdCBwaWQ6CiAgICAgICAgICAgICMgQ2hpbGQKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaWYgZW52IGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgZnVuYyhmaWxlLCBhcmdzKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBmdW5jKGZpbGUsIGFyZ3MsIGVudikKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgX2V4aXQoMTI3KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgUGFyZW50CiAgICAgICAgICAgIGlmIG1vZGUgPT0gUF9OT1dBSVQ6CiAgICAgICAgICAgICAgICByZXR1cm4gcGlkICMgQ2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciB3YWl0aW5nIQogICAgICAgICAgICB3aGlsZSAxOgogICAgICAgICAgICAgICAgd3BpZCwgc3RzID0gd2FpdHBpZChwaWQsIDApCiAgICAgICAgICAgICAgICBpZiBXSUZTVE9QUEVEKHN0cyk6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGVsaWYgV0lGU0lHTkFMRUQoc3RzKToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLVdURVJNU0lHKHN0cykKICAgICAgICAgICAgICAgIGVsaWYgV0lGRVhJVEVEKHN0cyk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdFWElUU1RBVFVTKHN0cykKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgZXJyb3IoIk5vdCBzdG9wcGVkLCBzaWduYWxlZCBvciBleGl0ZWQ/Pz8iKQoKICAgIGRlZiBzcGF3bnYobW9kZSwgZmlsZSwgYXJncyk6CiAgICAgICAgIiIic3Bhd252KG1vZGUsIGZpbGUsIGFyZ3MpIC0+IGludGVnZXIKCkV4ZWN1dGUgZmlsZSB3aXRoIGFyZ3VtZW50cyBmcm9tIGFyZ3MgaW4gYSBzdWJwcm9jZXNzLgpJZiBtb2RlID09IFBfTk9XQUlUIHJldHVybiB0aGUgcGlkIG9mIHRoZSBwcm9jZXNzLgpJZiBtb2RlID09IFBfV0FJVCByZXR1cm4gdGhlIHByb2Nlc3MncyBleGl0IGNvZGUgaWYgaXQgZXhpdHMgbm9ybWFsbHk7Cm90aGVyd2lzZSByZXR1cm4gLVNJRywgd2hlcmUgU0lHIGlzIHRoZSBzaWduYWwgdGhhdCBraWxsZWQgaXQuICIiIgogICAgICAgIHJldHVybiBfc3Bhd252ZWYobW9kZSwgZmlsZSwgYXJncywgTm9uZSwgZXhlY3YpCgogICAgZGVmIHNwYXdudmUobW9kZSwgZmlsZSwgYXJncywgZW52KToKICAgICAgICAiIiJzcGF3bnZlKG1vZGUsIGZpbGUsIGFyZ3MsIGVudikgLT4gaW50ZWdlcgoKRXhlY3V0ZSBmaWxlIHdpdGggYXJndW1lbnRzIGZyb20gYXJncyBpbiBhIHN1YnByb2Nlc3Mgd2l0aCB0aGUKc3BlY2lmaWVkIGVudmlyb25tZW50LgpJZiBtb2RlID09IFBfTk9XQUlUIHJldHVybiB0aGUgcGlkIG9mIHRoZSBwcm9jZXNzLgpJZiBtb2RlID09IFBfV0FJVCByZXR1cm4gdGhlIHByb2Nlc3MncyBleGl0IGNvZGUgaWYgaXQgZXhpdHMgbm9ybWFsbHk7Cm90aGVyd2lzZSByZXR1cm4gLVNJRywgd2hlcmUgU0lHIGlzIHRoZSBzaWduYWwgdGhhdCBraWxsZWQgaXQuICIiIgogICAgICAgIHJldHVybiBfc3Bhd252ZWYobW9kZSwgZmlsZSwgYXJncywgZW52LCBleGVjdmUpCgogICAgIyBOb3RlOiBzcGF3bnZwW2VdIGlzJ3QgY3VycmVudGx5IHN1cHBvcnRlZCBvbiBXaW5kb3dzCgogICAgZGVmIHNwYXdudnAobW9kZSwgZmlsZSwgYXJncyk6CiAgICAgICAgIiIic3Bhd252cChtb2RlLCBmaWxlLCBhcmdzKSAtPiBpbnRlZ2VyCgpFeGVjdXRlIGZpbGUgKHdoaWNoIGlzIGxvb2tlZCBmb3IgYWxvbmcgJFBBVEgpIHdpdGggYXJndW1lbnRzIGZyb20KYXJncyBpbiBhIHN1YnByb2Nlc3MuCklmIG1vZGUgPT0gUF9OT1dBSVQgcmV0dXJuIHRoZSBwaWQgb2YgdGhlIHByb2Nlc3MuCklmIG1vZGUgPT0gUF9XQUlUIHJldHVybiB0aGUgcHJvY2VzcydzIGV4aXQgY29kZSBpZiBpdCBleGl0cyBub3JtYWxseTsKb3RoZXJ3aXNlIHJldHVybiAtU0lHLCB3aGVyZSBTSUcgaXMgdGhlIHNpZ25hbCB0aGF0IGtpbGxlZCBpdC4gIiIiCiAgICAgICAgcmV0dXJuIF9zcGF3bnZlZihtb2RlLCBmaWxlLCBhcmdzLCBOb25lLCBleGVjdnApCgogICAgZGVmIHNwYXdudnBlKG1vZGUsIGZpbGUsIGFyZ3MsIGVudik6CiAgICAgICAgIiIic3Bhd252cGUobW9kZSwgZmlsZSwgYXJncywgZW52KSAtPiBpbnRlZ2VyCgpFeGVjdXRlIGZpbGUgKHdoaWNoIGlzIGxvb2tlZCBmb3IgYWxvbmcgJFBBVEgpIHdpdGggYXJndW1lbnRzIGZyb20KYXJncyBpbiBhIHN1YnByb2Nlc3Mgd2l0aCB0aGUgc3VwcGxpZWQgZW52aXJvbm1lbnQuCklmIG1vZGUgPT0gUF9OT1dBSVQgcmV0dXJuIHRoZSBwaWQgb2YgdGhlIHByb2Nlc3MuCklmIG1vZGUgPT0gUF9XQUlUIHJldHVybiB0aGUgcHJvY2VzcydzIGV4aXQgY29kZSBpZiBpdCBleGl0cyBub3JtYWxseTsKb3RoZXJ3aXNlIHJldHVybiAtU0lHLCB3aGVyZSBTSUcgaXMgdGhlIHNpZ25hbCB0aGF0IGtpbGxlZCBpdC4gIiIiCiAgICAgICAgcmV0dXJuIF9zcGF3bnZlZihtb2RlLCBmaWxlLCBhcmdzLCBlbnYsIGV4ZWN2cGUpCgppZiBfZXhpc3RzKCJzcGF3bnYiKToKICAgICMgVGhlc2UgYXJlbid0IHN1cHBsaWVkIGJ5IHRoZSBiYXNpYyBXaW5kb3dzIGNvZGUKICAgICMgYnV0IGNhbiBiZSBlYXNpbHkgaW1wbGVtZW50ZWQgaW4gUHl0aG9uCgogICAgZGVmIHNwYXdubChtb2RlLCBmaWxlLCAqYXJncyk6CiAgICAgICAgIiIic3Bhd25sKG1vZGUsIGZpbGUsICphcmdzKSAtPiBpbnRlZ2VyCgpFeGVjdXRlIGZpbGUgd2l0aCBhcmd1bWVudHMgZnJvbSBhcmdzIGluIGEgc3VicHJvY2Vzcy4KSWYgbW9kZSA9PSBQX05PV0FJVCByZXR1cm4gdGhlIHBpZCBvZiB0aGUgcHJvY2Vzcy4KSWYgbW9kZSA9PSBQX1dBSVQgcmV0dXJuIHRoZSBwcm9jZXNzJ3MgZXhpdCBjb2RlIGlmIGl0IGV4aXRzIG5vcm1hbGx5OwpvdGhlcndpc2UgcmV0dXJuIC1TSUcsIHdoZXJlIFNJRyBpcyB0aGUgc2lnbmFsIHRoYXQga2lsbGVkIGl0LiAiIiIKICAgICAgICByZXR1cm4gc3Bhd252KG1vZGUsIGZpbGUsIGFyZ3MpCgogICAgZGVmIHNwYXdubGUobW9kZSwgZmlsZSwgKmFyZ3MpOgogICAgICAgICIiInNwYXdubGUobW9kZSwgZmlsZSwgKmFyZ3MsIGVudikgLT4gaW50ZWdlcgoKRXhlY3V0ZSBmaWxlIHdpdGggYXJndW1lbnRzIGZyb20gYXJncyBpbiBhIHN1YnByb2Nlc3Mgd2l0aCB0aGUKc3VwcGxpZWQgZW52aXJvbm1lbnQuCklmIG1vZGUgPT0gUF9OT1dBSVQgcmV0dXJuIHRoZSBwaWQgb2YgdGhlIHByb2Nlc3MuCklmIG1vZGUgPT0gUF9XQUlUIHJldHVybiB0aGUgcHJvY2VzcydzIGV4aXQgY29kZSBpZiBpdCBleGl0cyBub3JtYWxseTsKb3RoZXJ3aXNlIHJldHVybiAtU0lHLCB3aGVyZSBTSUcgaXMgdGhlIHNpZ25hbCB0aGF0IGtpbGxlZCBpdC4gIiIiCiAgICAgICAgZW52ID0gYXJnc1stMV0KICAgICAgICByZXR1cm4gc3Bhd252ZShtb2RlLCBmaWxlLCBhcmdzWzotMV0sIGVudikKCgogICAgX19hbGxfXy5leHRlbmQoWyJzcGF3bnYiLCAic3Bhd252ZSIsICJzcGF3bmwiLCAic3Bhd25sZSIsXSkKCgppZiBfZXhpc3RzKCJzcGF3bnZwIik6CiAgICAjIEF0IHRoZSBtb21lbnQsIFdpbmRvd3MgZG9lc24ndCBpbXBsZW1lbnQgc3Bhd252cFtlXSwKICAgICMgc28gaXQgd29uJ3QgaGF2ZSBzcGF3bmxwW2VdIGVpdGhlci4KICAgIGRlZiBzcGF3bmxwKG1vZGUsIGZpbGUsICphcmdzKToKICAgICAgICAiIiJzcGF3bmxwKG1vZGUsIGZpbGUsICphcmdzKSAtPiBpbnRlZ2VyCgpFeGVjdXRlIGZpbGUgKHdoaWNoIGlzIGxvb2tlZCBmb3IgYWxvbmcgJFBBVEgpIHdpdGggYXJndW1lbnRzIGZyb20KYXJncyBpbiBhIHN1YnByb2Nlc3Mgd2l0aCB0aGUgc3VwcGxpZWQgZW52aXJvbm1lbnQuCklmIG1vZGUgPT0gUF9OT1dBSVQgcmV0dXJuIHRoZSBwaWQgb2YgdGhlIHByb2Nlc3MuCklmIG1vZGUgPT0gUF9XQUlUIHJldHVybiB0aGUgcHJvY2VzcydzIGV4aXQgY29kZSBpZiBpdCBleGl0cyBub3JtYWxseTsKb3RoZXJ3aXNlIHJldHVybiAtU0lHLCB3aGVyZSBTSUcgaXMgdGhlIHNpZ25hbCB0aGF0IGtpbGxlZCBpdC4gIiIiCiAgICAgICAgcmV0dXJuIHNwYXdudnAobW9kZSwgZmlsZSwgYXJncykKCiAgICBkZWYgc3Bhd25scGUobW9kZSwgZmlsZSwgKmFyZ3MpOgogICAgICAgICIiInNwYXdubHBlKG1vZGUsIGZpbGUsICphcmdzLCBlbnYpIC0+IGludGVnZXIKCkV4ZWN1dGUgZmlsZSAod2hpY2ggaXMgbG9va2VkIGZvciBhbG9uZyAkUEFUSCkgd2l0aCBhcmd1bWVudHMgZnJvbQphcmdzIGluIGEgc3VicHJvY2VzcyB3aXRoIHRoZSBzdXBwbGllZCBlbnZpcm9ubWVudC4KSWYgbW9kZSA9PSBQX05PV0FJVCByZXR1cm4gdGhlIHBpZCBvZiB0aGUgcHJvY2Vzcy4KSWYgbW9kZSA9PSBQX1dBSVQgcmV0dXJuIHRoZSBwcm9jZXNzJ3MgZXhpdCBjb2RlIGlmIGl0IGV4aXRzIG5vcm1hbGx5OwpvdGhlcndpc2UgcmV0dXJuIC1TSUcsIHdoZXJlIFNJRyBpcyB0aGUgc2lnbmFsIHRoYXQga2lsbGVkIGl0LiAiIiIKICAgICAgICBlbnYgPSBhcmdzWy0xXQogICAgICAgIHJldHVybiBzcGF3bnZwZShtb2RlLCBmaWxlLCBhcmdzWzotMV0sIGVudikKCgogICAgX19hbGxfXy5leHRlbmQoWyJzcGF3bnZwIiwgInNwYXdudnBlIiwgInNwYXdubHAiLCAic3Bhd25scGUiLF0pCgppbXBvcnQgY29weXJlZyBhcyBfY29weXJlZwoKZGVmIF9tYWtlX3N0YXRfcmVzdWx0KHR1cCwgZGljdCk6CiAgICByZXR1cm4gc3RhdF9yZXN1bHQodHVwLCBkaWN0KQoKZGVmIF9waWNrbGVfc3RhdF9yZXN1bHQoc3IpOgogICAgKHR5cGUsIGFyZ3MpID0gc3IuX19yZWR1Y2VfXygpCiAgICByZXR1cm4gKF9tYWtlX3N0YXRfcmVzdWx0LCBhcmdzKQoKdHJ5OgogICAgX2NvcHlyZWcucGlja2xlKHN0YXRfcmVzdWx0LCBfcGlja2xlX3N0YXRfcmVzdWx0LCBfbWFrZV9zdGF0X3Jlc3VsdCkKZXhjZXB0IE5hbWVFcnJvcjogIyBzdGF0X3Jlc3VsdCBtYXkgbm90IGV4aXN0CiAgICBwYXNzCgpkZWYgX21ha2Vfc3RhdHZmc19yZXN1bHQodHVwLCBkaWN0KToKICAgIHJldHVybiBzdGF0dmZzX3Jlc3VsdCh0dXAsIGRpY3QpCgpkZWYgX3BpY2tsZV9zdGF0dmZzX3Jlc3VsdChzcik6CiAgICAodHlwZSwgYXJncykgPSBzci5fX3JlZHVjZV9fKCkKICAgIHJldHVybiAoX21ha2Vfc3RhdHZmc19yZXN1bHQsIGFyZ3MpCgp0cnk6CiAgICBfY29weXJlZy5waWNrbGUoc3RhdHZmc19yZXN1bHQsIF9waWNrbGVfc3RhdHZmc19yZXN1bHQsCiAgICAgICAgICAgICAgICAgICAgIF9tYWtlX3N0YXR2ZnNfcmVzdWx0KQpleGNlcHQgTmFtZUVycm9yOiAjIHN0YXR2ZnNfcmVzdWx0IG1heSBub3QgZXhpc3QKICAgIHBhc3MKCiMgU3VwcGx5IG9zLnBvcGVuKCkKZGVmIHBvcGVuKGNtZCwgbW9kZT0iciIsIGJ1ZmZlcmluZz0tMSk6CiAgICBpZiBub3QgaXNpbnN0YW5jZShjbWQsIHN0cik6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJpbnZhbGlkIGNtZCB0eXBlICglcywgZXhwZWN0ZWQgc3RyaW5nKSIgJSB0eXBlKGNtZCkpCiAgICBpZiBtb2RlIG5vdCBpbiAoInIiLCAidyIpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImludmFsaWQgbW9kZSAlciIgJSBtb2RlKQogICAgaWYgYnVmZmVyaW5nID09IDAgb3IgYnVmZmVyaW5nID09IE5vbmU6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicG9wZW4oKSBkb2VzIG5vdCBzdXBwb3J0IHVuYnVmZmVyZWQgc3RyZWFtcyIpCiAgICBpbXBvcnQgc3VicHJvY2VzcywgaW8KICAgIGlmIG1vZGUgPT0gInIiOgogICAgICAgIHByb2MgPSBzdWJwcm9jZXNzLlBvcGVuKGNtZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGVsbD1UcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZG91dD1zdWJwcm9jZXNzLlBJUEUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmc2l6ZT1idWZmZXJpbmcpCiAgICAgICAgcmV0dXJuIF93cmFwX2Nsb3NlKGlvLlRleHRJT1dyYXBwZXIocHJvYy5zdGRvdXQpLCBwcm9jKQogICAgZWxzZToKICAgICAgICBwcm9jID0gc3VicHJvY2Vzcy5Qb3BlbihjbWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hlbGw9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRpbj1zdWJwcm9jZXNzLlBJUEUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmc2l6ZT1idWZmZXJpbmcpCiAgICAgICAgcmV0dXJuIF93cmFwX2Nsb3NlKGlvLlRleHRJT1dyYXBwZXIocHJvYy5zdGRpbiksIHByb2MpCgojIEhlbHBlciBmb3IgcG9wZW4oKSAtLSBhIHByb3h5IGZvciBhIGZpbGUgd2hvc2UgY2xvc2Ugd2FpdHMgZm9yIHRoZSBwcm9jZXNzCmNsYXNzIF93cmFwX2Nsb3NlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbSwgcHJvYyk6CiAgICAgICAgc2VsZi5fc3RyZWFtID0gc3RyZWFtCiAgICAgICAgc2VsZi5fcHJvYyA9IHByb2MKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICBzZWxmLl9zdHJlYW0uY2xvc2UoKQogICAgICAgIHJldHVybmNvZGUgPSBzZWxmLl9wcm9jLndhaXQoKQogICAgICAgIGlmIHJldHVybmNvZGUgPT0gMDoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBpZiBuYW1lID09ICdudCc6CiAgICAgICAgICAgIHJldHVybiByZXR1cm5jb2RlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHJldHVybmNvZGUgPDwgOCAgIyBTaGlmdCBsZWZ0IHRvIG1hdGNoIG9sZCBiZWhhdmlvcgogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgogICAgZGVmIF9fZXhpdF9fKHNlbGYsICphcmdzKToKICAgICAgICBzZWxmLmNsb3NlKCkKICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBuYW1lKToKICAgICAgICByZXR1cm4gZ2V0YXR0cihzZWxmLl9zdHJlYW0sIG5hbWUpCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGl0ZXIoc2VsZi5fc3RyZWFtKQoKIyBTdXBwbHkgb3MuZmRvcGVuKCkKZGVmIGZkb3BlbihmZCwgKmFyZ3MsICoqa3dhcmdzKToKICAgIGlmIG5vdCBpc2luc3RhbmNlKGZkLCBpbnQpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW52YWxpZCBmZCB0eXBlICglcywgZXhwZWN0ZWQgaW50ZWdlcikiICUgdHlwZShmZCkpCiAgICBpbXBvcnQgaW8KICAgIHJldHVybiBpby5vcGVuKGZkLCAqYXJncywgKiprd2FyZ3MpCg==',
'/Lib/browser/markdown.py':'aW1wb3J0IGJyb3dzZXIuaHRtbAppbXBvcnQgcmUKCmNsYXNzIFVSTDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLHNyYyk6CiAgICAgICAgZWx0cyA9IHNyYy5zcGxpdChtYXhzcGxpdD0xKQogICAgICAgIHNlbGYuaHJlZiA9IGVsdHNbMF0KICAgICAgICBzZWxmLmFsdCA9ICcnCiAgICAgICAgaWYgbGVuKGVsdHMpPT0yOgogICAgICAgICAgICBhbHQgPSBlbHRzWzFdCiAgICAgICAgICAgIGlmIGFsdFswXT09JyInIGFuZCBhbHRbLTFdPT0nIic6c2VsZi5hbHQ9YWx0WzE6LTFdCiAgICAgICAgICAgIGVsaWYgYWx0WzBdPT0iJyIgYW5kIGFsdFstMV09PSInIjpzZWxmLmFsdD1hbHRbMTotMV0KICAgICAgICAgICAgZWxpZiBhbHRbMF09PSIoIiBhbmQgYWx0Wy0xXT09IikiOnNlbGYuYWx0PWFsdFsxOi0xXQogICAgICAgIApjbGFzcyBDb2RlQmxvY2s6CiAgICBkZWYgX19pbml0X18oc2VsZixsaW5lKToKICAgICAgICBzZWxmLmxpbmVzID0gW2xpbmVdCiAgICAKICAgIGRlZiB0b19odG1sKHNlbGYpOgogICAgICAgIHJlcyA9IGVzY2FwZSgnXG4nLmpvaW4oc2VsZi5saW5lcykpCiAgICAgICAgcmVzID0gdW5tYXJrKHJlcykKICAgICAgICByZXMgPSAnPHByZSBjbGFzcz0ibWFya2VkIj4lczwvcHJlPlxuJyAlcmVzCiAgICAgICAgcmV0dXJuIHJlcyxbXQoKY2xhc3MgTWFya2VkOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYubGluZXMgPSBbXQogICAgICAgIHNlbGYuY2hpbGRyZW4gPSBbXQoKICAgIGRlZiB0b19odG1sKHNlbGYpOgogICAgICAgIHJldHVybiBhcHBseV9tYXJrZG93bignXG4nLmpvaW4oc2VsZi5saW5lcykpCiAgICAgICAgCiMgZ2V0IHJlZmVyZW5jZXMKcmVmcyA9IHt9CnJlZl9wYXR0ZXJuID0gciJeXFsoLiopXF06XHMrKC4qKSIKCmRlZiBtYXJrKHNyYyk6CgogICAgZ2xvYmFsIHJlZnMKICAgIHJlZnMgPSB7fQogICAgIyBzcGxpdCBzb3VyY2UgaW4gc2VjdGlvbnMKICAgICMgc2VjdGlvbnMgY2FuIGJlIDoKICAgICMgLSBhIGJsb2NrLWxldmVsIEhUTUwgZWxlbWVudCAobWFya2Rvd24gc3ludGF4IHdpbGwgbm90IGJlIHByb2Nlc3NlZCkKICAgICMgLSBhIHNjcmlwdAogICAgIyAtIGEgc3Bhbi1sZXZlbCBIVE1MIHRhZyAobWFya2Rvd24gc3ludGF4IHdpbGwgYmUgcHJvY2Vzc2VkKQogICAgIyAtIGEgY29kZSBibG9jawogICAgCiAgICBsaW5lcyA9IHNyYy5zcGxpdCgnXG4nKQogICAgCiAgICBzZWN0aW9ucyA9IFtdCiAgICBzY3JpcHRzID0gW10KICAgIHNlY3Rpb24gPSBNYXJrZWQoKQoKICAgIGkgPSAwCiAgICB3aGlsZSBpPGxlbihsaW5lcyk6CiAgICAgICAgbGluZSA9IGxpbmVzW2ldCiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWN0aW9uLE1hcmtlZCk6CiAgICAgICAgICAgIGlmIGxpbmUubG93ZXIoKS5zdGFydHN3aXRoKCc8c2NyaXB0Jyk6CiAgICAgICAgICAgICAgICBqID0gaSsxCiAgICAgICAgICAgICAgICB3aGlsZSBqPGxlbihsaW5lcyk6CiAgICAgICAgICAgICAgICAgICAgaWYgbGluZXNbal0ubG93ZXIoKS5zdGFydHN3aXRoKCc8L3NjcmlwdD4nKToKICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0cy5hcHBlbmQoJ1xuJy5qb2luKGxpbmVzW2krMTpqXSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBrIGluIHJhbmdlKGksaisxKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzW2tdID0gJycKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgIGkgPSBqKzEKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGxpbmUuc3RyaXAoKSBhbmQgbGluZS5zdGFydHN3aXRoKCcgICAgJyk6CiAgICAgICAgICAgICAgICBpZiBzZWN0aW9uLmxpbmVzOgogICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zLmFwcGVuZChzZWN0aW9uKQogICAgICAgICAgICAgICAgc2VjdGlvbiA9IENvZGVCbG9jayhsaW5lWzQ6XSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG1vID0gcmUuc2VhcmNoKHJlZl9wYXR0ZXJuLGxpbmUpCiAgICAgICAgICAgICAgICBpZiBtbyBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBrZXkgPSBtby5ncm91cHMoKVswXQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gVVJMKG1vLmdyb3VwcygpWzFdKQogICAgICAgICAgICAgICAgICAgIHJlZnNba2V5Lmxvd2VyKCldID0gdmFsdWUKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5saW5lcy5hcHBlbmQobGluZSkKICAgICAgICBlbGlmIGlzaW5zdGFuY2Uoc2VjdGlvbixDb2RlQmxvY2spOgogICAgICAgICAgICBpZiBsaW5lLnN0YXJ0c3dpdGgoJyAgICAnKSBvciBub3QgbGluZS5zdHJpcCgpOgogICAgICAgICAgICAgICAgc2VjdGlvbi5saW5lcy5hcHBlbmQobGluZVs0Ol0pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWN0aW9ucy5hcHBlbmQoc2VjdGlvbikKICAgICAgICAgICAgICAgIHNlY3Rpb24gPSBNYXJrZWQoKSAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHNlY3Rpb24ubGluZXMuYXBwZW5kKGxpbmUpCiAgICAgICAgaSArPSAxCiAgICBpZiBzZWN0aW9uLmxpbmVzOgogICAgICAgIHNlY3Rpb25zLmFwcGVuZChzZWN0aW9uKQoKICAgIHJlcyA9ICcnCiAgICBmb3Igc2VjdGlvbiBpbiBzZWN0aW9uczoKICAgICAgICBtayxfc2NyaXB0cyA9IHNlY3Rpb24udG9faHRtbCgpCiAgICAgICAgcmVzICs9IG1rCiAgICAgICAgc2NyaXB0cyArPSBfc2NyaXB0cwogICAgcmV0dXJuIHJlcyxzY3JpcHRzCgpkZWYgZXNjYXBlKGN6b25lKToKICAgIGN6b25lID0gY3pvbmUucmVwbGFjZSgnJicsJyZhbXA7JykKICAgIGN6b25lID0gY3pvbmUucmVwbGFjZSgnPCcsJyZsdDsnKQogICAgY3pvbmUgPSBjem9uZS5yZXBsYWNlKCc+JywnJmd0OycpCiAgICByZXR1cm4gY3pvbmUKCmRlZiBzX2VzY2FwZShtbyk6CiAgICAjIHVzZWQgaW4gcmUuc3ViCiAgICBjem9uZSA9IG1vLnN0cmluZ1ttby5zdGFydCgpOm1vLmVuZCgpXQogICAgcmV0dXJuIGVzY2FwZShjem9uZSkKCmRlZiB1bm1hcmsoY29kZV96b25lKToKICAgICMgY29udmVydCBfIHRvICYjOTU7IGluc2lkZSBpbmxpbmUgY29kZQogICAgY29kZV96b25lID0gY29kZV96b25lLnJlcGxhY2UoJ18nLCcmIzk1OycpCiAgICByZXR1cm4gY29kZV96b25lCgpkZWYgc191bm1hcmsobW8pOgogICAgIyBjb252ZXJ0IF8gdG8gJiM5NTsgaW5zaWRlIGlubGluZSBjb2RlCiAgICBjb2RlX3pvbmUgPSBtby5zdHJpbmdbbW8uc3RhcnQoKTptby5lbmQoKV0KICAgIGNvZGVfem9uZSA9IGNvZGVfem9uZS5yZXBsYWNlKCdfJywnJiM5NTsnKQogICAgcmV0dXJuIGNvZGVfem9uZQoKZGVmIGFwcGx5X21hcmtkb3duKHNyYyk6CgogICAgc2NyaXB0cyA9IFtdCgogICAgIyBibG9ja3F1b3RlcwogICAgbGluZXMgPSBzcmMuc3BsaXQoJ1xuJykKICAgIHdoaWxlIFRydWU6CiAgICAgICAgbmIgPSAwCiAgICAgICAgaSA9IDAKICAgICAgICB3aGlsZSBpPGxlbihsaW5lcyk6CiAgICAgICAgICAgIGlmIGxpbmVzW2ldLnN0YXJ0c3dpdGgoJz4nKToKICAgICAgICAgICAgICAgIGhlYWQgPSAnXG4nLmpvaW4obGluZXNbOmldKQogICAgICAgICAgICAgICAgYnFsaW5lcyA9IFtdCiAgICAgICAgICAgICAgICBuYiArPSAxCiAgICAgICAgICAgICAgICByZXN0ID0gbGluZXNbaV1bMTpdCiAgICAgICAgICAgICAgICBpZiByZXN0LmxzdHJpcCgpLnN0YXJ0c3dpdGgoJz4nKToKICAgICAgICAgICAgICAgICAgICByZXN0ID0gcmVzdC5sc3RyaXAoKQogICAgICAgICAgICAgICAgYnFsaW5lcy5hcHBlbmQocmVzdCkKICAgICAgICAgICAgICAgIGogPSBpKzEKICAgICAgICAgICAgICAgIHdoaWxlIGo8bGVuKGxpbmVzKToKICAgICAgICAgICAgICAgICAgICBpZiBsaW5lc1tqXS5zdGFydHN3aXRoKCc+Jyk6CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3QgPSBsaW5lc1tqXVsxOl0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVzdC5sc3RyaXAoKS5zdGFydHN3aXRoKCc+Jyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN0ID0gcmVzdC5sc3RyaXAoKQogICAgICAgICAgICAgICAgICAgICAgICBicWxpbmVzLmFwcGVuZChyZXN0KQogICAgICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgICAgICBlbGlmIGxpbmVzW2pdLnN0cmlwKCkgYW5kIGxpbmVzW2pdWzBdIT0nICc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJxbGluZXMuYXBwZW5kKGxpbmVzW2pdKQogICAgICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgIyBicWxpbmVzIGhvbGRzIHRoZSBsaW5lcyBpbiB0aGUgYmxvY2txdW90ZSwgc3RyaXBwZWQgb2YKICAgICAgICAgICAgICAgICMgdGhlIGxlYWRpbmcgPgogICAgICAgICAgICAgICAgIyB3ZSBhcHBseSB0aGUgd2hvbGUgbWFya2Rvd24gcHJvY2VzcyB0byB0aGVzZSBsaW5lcwogICAgICAgICAgICAgICAgbWssX3NjcmlwdHMgPSBtYXJrKCdcbicuam9pbihicWxpbmVzKSkKICAgICAgICAgICAgICAgIHNjcmlwdHMgKz0gX3NjcmlwdHMKICAgICAgICAgICAgICAgIHNyYyA9IGhlYWQKICAgICAgICAgICAgICAgIHNyYyArPSAnXG48YmxvY2txdW90ZT4nICsgbWsgKyAnPC9ibG9ja3F1b3RlPicKICAgICAgICAgICAgICAgIHNyYyArPSAnXG4nLmpvaW4obGluZXNbajpdKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgaSArPSAxCiAgICAgICAgaWYgbmI9PTA6YnJlYWsKICAgICAgICBsaW5lcyA9IHNyYy5zcGxpdGxpbmVzKCkKCiAgICAjIHJlcGxhY2UgXGAgYnkgJiM5NjsKICAgIHNyYyA9IHJlLnN1YihyJ1xcXGAnLCcmIzk2Oycsc3JjKQoKICAgICMgZXNjYXBlIDwgPiAmIGluIGlubGluZSBjb2RlCiAgICBjb2RlX3BhdHRlcm4gPSByJ1xgKFxTLio/XFMpXGAnCiAgICBzcmMgPSByZS5zdWIoY29kZV9wYXR0ZXJuLHNfZXNjYXBlLHNyYykKICAgICMgYWxzbyBjb252ZXJ0IF8KICAgIHNyYyA9IHJlLnN1Yihjb2RlX3BhdHRlcm4sc191bm1hcmssc3JjKQogICAgCiAgICAjIGlubGluZSBsaW5rcwogICAgbGlua19wYXR0ZXJuMSA9IHInXFsoLis/KVxdXHM/XCgoLis/KVwpJwogICAgZGVmIHJlcGwobW8pOgogICAgICAgIGcxLGcyID0gbW8uZ3JvdXBzKCkKICAgICAgICBnMiA9IHJlLnN1YignXycsJyYjOTU7JyxnMikKICAgICAgICByZXR1cm4gJzxhIGhyZWY9IiVzIj4lczwvYT4nICUoZzIsZzEpCiAgICBzcmMgPSByZS5zdWIobGlua19wYXR0ZXJuMSxyZXBsLHNyYykKCiAgICAjIHJlZmVyZW5jZSBsaW5rcwogICAgbGlua19wYXR0ZXJuMiA9IHInXFsoLis/KVxdXHM/XFsoLio/KVxdJwogICAgd2hpbGUgVHJ1ZToKICAgICAgICBtbyA9IHJlLnNlYXJjaChsaW5rX3BhdHRlcm4yLHNyYykKICAgICAgICBpZiBtbyBpcyBOb25lOmJyZWFrCiAgICAgICAgdGV4dCxrZXkgPSBtby5ncm91cHMoKQogICAgICAgIHByaW50KHRleHQsa2V5KQogICAgICAgIGlmIG5vdCBrZXk6a2V5PXRleHQgIyBpbXBsaWNpdCBsaW5rIG5hbWUKICAgICAgICBpZiBrZXkubG93ZXIoKSBub3QgaW4gcmVmczoKICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3IoJ3Vua25vdyByZWZlcmVuY2UgJXMnICVrZXkpCiAgICAgICAgdXJsID0gcmVmc1trZXkubG93ZXIoKV0KICAgICAgICByZXBsID0gJzxhIGhyZWY9IicrdXJsLmhyZWYrJyInCiAgICAgICAgaWYgdXJsLmFsdDoKICAgICAgICAgICAgcmVwbCArPSAnIHRpdGxlPSInK3VybC5hbHQrJyInCiAgICAgICAgcmVwbCArPSAnPiVzPC9hPicgJXRleHQKICAgICAgICBzcmMgPSByZS5zdWIobGlua19wYXR0ZXJuMixyZXBsLHNyYyxjb3VudD0xKQoKICAgICMgZW1waGFzaXMKCiAgICAjIHJlcGxhY2UgXCogYnkgJiM0MjsKICAgIHNyYyA9IHJlLnN1YihyJ1xcXConLCcmIzQyOycsc3JjKQogICAgIyByZXBsYWNlIFxfIGJ5ICYjOTU7CiAgICBzcmMgPSByZS5zdWIocidcXFxfJywnJiM5NTsnLHNyYykKICAgICMgXyBhbmQgKiBzdXJyb3VuZGVkIGJ5IHNwYWNlcyBhcmUgbm90IG1hcmt1cAogICAgc3JjID0gcmUuc3ViKHInIF8gJywnICYjOTU7ICcsc3JjKQogICAgc3JjID0gcmUuc3ViKHInIFwqICcsJyAmIzQyOyAnLHNyYykKCiAgICBzdHJvbmdfcGF0dGVybnMgPSBbKCdTVFJPTkcnLHInXCpcKiguKj8pXCpcKicpLCgnQicscidfXyguKj8pX18nKV0KICAgIGZvciB0YWcsc3Ryb25nX3BhdHRlcm4gaW4gc3Ryb25nX3BhdHRlcm5zOgogICAgICAgIHNyYyA9IHJlLnN1YihzdHJvbmdfcGF0dGVybixyJzwlcz5cMTwvJXM+JyAlKHRhZyx0YWcpLHNyYykKCiAgICBlbV9wYXR0ZXJucyA9IFsoJ0VNJyxyJ1wqKC4qPylcKicpLCgnSScscidcXyguKj8pXF8nKV0KICAgIGZvciB0YWcsZW1fcGF0dGVybiBpbiBlbV9wYXR0ZXJuczoKICAgICAgICBzcmMgPSByZS5zdWIoZW1fcGF0dGVybixyJzwlcz5cMTwvJXM+JyAlKHRhZyx0YWcpLHNyYykKCiAgICAjIGlubGluZSBjb2RlCiAgICAjIHJlcGxhY2UgXGAgYnkgJiM5NjsKICAgIHNyYyA9IHJlLnN1YihyJ1xcXGAnLCcmIzk2Oycsc3JjKQoKICAgIGNvZGVfcGF0dGVybiA9IHInXGAoLio/KVxgJwogICAgc3JjID0gcmUuc3ViKGNvZGVfcGF0dGVybixyJzxjb2RlPlwxPC9jb2RlPicsc3JjKQoKICAgICMgdW5vcmRlcmVkIGxpc3RzCiAgICBsaW5lcyA9IHNyYy5zcGxpdCgnXG4nKQogICAgd2hpbGUgVHJ1ZToKICAgICAgICBuYiA9IDAKICAgICAgICBpID0gMAogICAgICAgIHdoaWxlIGk8bGVuKGxpbmVzKToKICAgICAgICAgICAgbW8gPSByZS5zZWFyY2gocideKCAqWysqLV0pJyxsaW5lc1tpXSkKICAgICAgICAgICAgaWYgbW86CiAgICAgICAgICAgICAgICBzdGFydGVyID0gbW8uZ3JvdXBzKClbMF0KICAgICAgICAgICAgICAgIGlmIG5vdCBsaW5lc1tpXS5zdHJpcChzdGFydGVyKToKICAgICAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgbmIgKz0gMQogICAgICAgICAgICAgICAgbGluZXNbaV0gPSAnPHVsPlxuPGxpPicrbGluZXNbaV1bbGVuKHN0YXJ0ZXIpOl0KICAgICAgICAgICAgICAgIGogPSBpKzEKICAgICAgICAgICAgICAgIHdoaWxlIGo8bGVuKGxpbmVzKToKICAgICAgICAgICAgICAgICAgICBpZiBsaW5lc1tqXS5zdGFydHN3aXRoKHN0YXJ0ZXIpOgogICAgICAgICAgICAgICAgICAgICAgICBsaW5lc1tqXSA9ICc8bGk+JytsaW5lc1tqXVtsZW4oc3RhcnRlcik6XQogICAgICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgICAgICBlbGlmIGxpbmVzW2pdLnN0YXJ0c3dpdGgoJyAnKSBhbmQgbGluZXNbal0ubHN0cmlwKCkuc3RhcnRzd2l0aChzdGFydGVyKToKICAgICAgICAgICAgICAgICAgICAgICAgaiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxpZiBub3QgbGluZXNbal0uc3RyaXAoKToKICAgICAgICAgICAgICAgICAgICAgICAgais9MQogICAgICAgICAgICAgICAgICAgIGVsaWYgbGluZXNbal0uc3RhcnRzd2l0aCgnICcqbGVuKHN0YXJ0ZXIpKToKICAgICAgICAgICAgICAgICAgICAgICAgais9MQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBsaW5lc1tqLTFdICs9ICdcbjwvdWw+JwogICAgICAgICAgICBpICs9IDEKICAgICAgICBzcmMgPSAnXG4nLmpvaW4obGluZXMpCiAgICAgICAgaWYgbmI9PTA6YnJlYWsKICAgICAgICBsaW5lcyA9IHNyYy5zcGxpdGxpbmVzKCkKCiAgICAjIG9yZGVyZWQgbGlzdHMKICAgIGxpbmVzID0gc3JjLnNwbGl0KCdcbicpCiAgICB3aGlsZSBUcnVlOgogICAgICAgIG5iID0gMAogICAgICAgIGkgPSAwCiAgICAgICAgd2hpbGUgaTxsZW4obGluZXMpOgogICAgICAgICAgICBpZiByZS5zZWFyY2gocideXGQrXC4nLGxpbmVzW2ldKToKICAgICAgICAgICAgICAgIG5iICs9IDEKICAgICAgICAgICAgICAgIGxpbmVzW2ldID0gJzxvbD5cbjxsaT4nK2xpbmVzW2ldW2xpbmVzW2ldLmZpbmQoJy4nKSsxOl0KICAgICAgICAgICAgICAgIGogPSBpKzEKICAgICAgICAgICAgICAgIHdoaWxlIGo8bGVuKGxpbmVzKToKICAgICAgICAgICAgICAgICAgICBpZiByZS5zZWFyY2gocideXGQrXC4nLGxpbmVzW2pdKToKICAgICAgICAgICAgICAgICAgICAgICAgbGluZXNbal0gPSAnPGxpPicrbGluZXNbal1bbGluZXNbal0uZmluZCgnLicpKzE6XQogICAgICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgbGluZXNbai0xXSArPSAnXG48L29sPicKICAgICAgICAgICAgaSArPSAxCiAgICAgICAgc3JjID0gJ1xuJy5qb2luKGxpbmVzKQogICAgICAgIGlmIG5iPT0wOmJyZWFrCiAgICAgICAgbGluZXMgPSBzcmMuc3BsaXRsaW5lcygpCgogICAgIyBoZWFkZXJzCiAgICBpID0gMQogICAgd2hpbGUgaTxsZW4obGluZXMpOgogICAgICAgIGxpbmUgPSBsaW5lc1tpXQogICAgICAgIGlmIGxpbmUuc3RhcnRzd2l0aCgnPScpIGFuZCBub3QgbGluZS5zdHJpcCgnPScpLnN0cmlwKCk6CiAgICAgICAgICAgIGxpbmVzW2ktMV0gPSAnPEgxPiVzPC9IMT4nICVsaW5lc1tpLTFdCiAgICAgICAgICAgIGRlbCBsaW5lc1tpXQogICAgICAgIGVsaWYgbGluZS5zdGFydHN3aXRoKCctJykgYW5kIG5vdCBsaW5lLnN0cmlwKCctJykuc3RyaXAoKToKICAgICAgICAgICAgbGluZXNbaS0xXSA9ICc8SDI+JXM8L0gyPicgJWxpbmVzW2ktMV0KICAgICAgICAgICAgZGVsIGxpbmVzW2ldCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaSArPSAxCiAgICAgICAgICAgCiAgICBhdHhfaGVhZGVyX3BhdHRlcm4gPSAnXigjKykoLiopKCMqKScKICAgIGZvciBpLGxpbmUgaW4gZW51bWVyYXRlKGxpbmVzKToKICAgICAgICBtbyA9IHJlLnNlYXJjaChhdHhfaGVhZGVyX3BhdHRlcm4sbGluZSkKICAgICAgICBpZiBub3QgbW86Y29udGludWUKICAgICAgICBsZXZlbCA9IGxlbihtby5ncm91cHMoKVswXSkKICAgICAgICBsaW5lc1tpXSA9IHJlLnN1YihhdHhfaGVhZGVyX3BhdHRlcm4sCiAgICAgICAgICAgICc8SCVzPiVzPC9IJXM+XG4nICUobGV2ZWwsbW8uZ3JvdXBzKClbMV0sbGV2ZWwpLAogICAgICAgICAgICBsaW5lLGNvdW50PTEpCgogICAgc3JjID0gJ1xuJy5qb2luKGxpbmVzKSAgICAgIAogICAgc3JjID0gcmUuc3ViKCdcblxuKycsJ1xuPHA+JyxzcmMpKydcbicKCiAgICByZXR1cm4gc3JjLHNjcmlwdHMK',
'/Lib/browser/timer.py':'ZnJvbSBfdGltZXIgaW1wb3J0ICo=',
'/Lib/browser/svg.py':'ZnJvbSBfc3ZnIGltcG9ydCAq',
'/Lib/browser/slideshow.py':'ZnJvbSBicm93c2VyIGltcG9ydCBkb2MsbWFya2Rvd24saHRtbAoKZGVmIGtleWRvd24oZXYscGF0aCx6b25lLHBhZ2UpOgogICAgaWYgZXYua2V5Q29kZSBpbiBbMzksNDBdOiAjIGtleSByaWdodCBvciBkb3duIDogbmV4dCBwYWdlCiAgICAgICAgc2hvdyhwYXRoLHpvbmUscGFnZSsxKQogICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCkgICAgCiAgICBlbGlmIGV2LmtleUNvZGUgaW4gWzM3LDM4XTogI2tleSBsZWZ0IG9yIHVwOiBwcmV2aW91cyBwYWdlCiAgICAgICAgc2hvdyhwYXRoLHpvbmUscGFnZS0xKQogICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCkKCmRlZiBtb3ZlX3RvKGV2LHBhdGgsem9uZSxuYl9wYWdlcyk6CiAgICBwYyA9IChldi54LWV2LnRhcmdldC5sZWZ0KS9ldi50YXJnZXQud2lkdGgKICAgIHBhZ2UgPSByb3VuZChuYl9wYWdlcypwYykKICAgIG5ld19wb3MgPSAnJXNweCcgJShldi54LWV2LnRhcmdldC5sZWZ0LShkb2NbJ3RsX3BvcyddLndpZHRoLzIpKQogICAgIyBzaG93IHBhZ2UgYXQgc3BlY2lmaWVkIHBvc2l0aW9uCiAgICBzaG93KHBhdGgsem9uZSxwYWdlKQogICAgIyBzZXQgbmV3IGN1cnNvciBwb3NpdGlvbgogICAgZG9jWyd0bF9wb3MnXS5zdHlsZS5sZWZ0ID0gbmV3X3BvcwoKZGVmIGNsaWNrX29uX3RsX3Bvcyhldik6CiAgICAjIGRvbid0IG1vdmUgaWYgdXNlciBjbGlja3Mgb24gY3VycmVudCB0aW1lbGluZSBwb3NpdGlvbgogICAgZXYuc3RvcFByb3BhZ2F0aW9uKCkKCmRlZiBzaG93KHBhdGgsem9uZSxwYWdlPTApOgogICAgc3JjID0gb3BlbihwYXRoKS5yZWFkKCkKICAgIHRpdGxlID0gJycKICAgIHBhZ2VfbnVtID0gRmFsc2UKICAgIHdoaWxlIHNyYy5zdGFydHN3aXRoKCdAJyk6CiAgICAgICAgbGluZV9lbmQgPSBzcmMuZmluZCgnXG4nKQogICAgICAgIGtleSx2YWx1ZSA9IHNyY1s6bGluZV9lbmRdLnNwbGl0KCcgJywxKQogICAgICAgIGlmIGtleT09J0B0aXRsZSc6CiAgICAgICAgICAgIHRpdGxlID0gdmFsdWUKICAgICAgICBlbGlmIGtleT09J0BwYWdlbnVtJzoKICAgICAgICAgICAgcGFnZV9udW0gPSBUcnVlCiAgICAgICAgc3JjID0gc3JjW2xpbmVfZW5kKzE6XQoKICAgIHpvbmUuaHRtbCA9ICcnCiAgICBwYWdlcyA9IHNyYy5zcGxpdCgnLi4vLi5cbicpCiAgICBpZiBwYWdlPDA6CiAgICAgICAgcGFnZSA9IDAKICAgIGVsaWYgcGFnZSA+PSBsZW4ocGFnZXMpOgogICAgICAgIHBhZ2UgPSBsZW4ocGFnZXMpLTEKICAgIGRvYy51bmJpbmQoJ2tleWRvd24nKQogICAgZG9jLmJpbmQoJ2tleWRvd24nLGxhbWJkYSBldjprZXlkb3duKGV2LHBhdGgsem9uZSxwYWdlKSkKICAgIGJvZHkgPSBodG1sLkRJVigpCiAgICBib2R5Lmh0bWwgPSBtYXJrZG93bi5tYXJrKHBhZ2VzW3BhZ2VdKVswXQoKICAgIGZvb3RlciA9IGh0bWwuRElWKElkPSJmb290ZXIiKQogICAgaWYgdGl0bGU6CiAgICAgICAgZm9vdGVyIDw9IGh0bWwuRElWKHRpdGxlLHN0eWxlPWRpY3QoZGlzcGxheT0naW5saW5lJykpCiAgICBpZiBwYWdlX251bToKICAgICAgICBmb290ZXIgPD0gaHRtbC5TUEFOKCcgKCVzLyVzKScgJShwYWdlKzEsbGVuKHBhZ2VzKSksCiAgICAgICAgICAgIHN0eWxlPWRpY3QoZGlzcGxheT0naW5saW5lJykpCiAgICB0aW1lbGluZSA9IGh0bWwuRElWKElkPSd0aW1lbGluZScpCiAgICB0bF9wb3MgPSBodG1sLkRJVihJZD0ndGxfcG9zJykKICAgIHRpbWVsaW5lIDw9IHRsX3BvcwogICAgdGltZWxpbmUuYmluZCgnY2xpY2snLGxhbWJkYSBldjptb3ZlX3RvKGV2LHBhdGgsem9uZSxsZW4ocGFnZXMpKSkKICAgIHRsX3Bvcy5iaW5kKCdjbGljaycsY2xpY2tfb25fdGxfcG9zKQogICAgem9uZSA8PSBib2R5K2Zvb3Rlcit0aW1lbGluZQogICAgdGxfcG9zLnN0eWxlLmxlZnQgPSAnJXNweCcgJSh0aW1lbGluZS53aWR0aCpwYWdlL2xlbihwYWdlcykpCgo=',
'/Lib/browser/websocket.py':'ZnJvbSBfd2Vic29ja2V0IGltcG9ydCAq',
'/Lib/browser/local_storage.py':'IyBsb2NhbCBzdG9yYWdlIGluIGJyb3dzZXIKCmNsYXNzIExvY2FsU3RvcmFnZToKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgaWYgbm90IF9fQlJZVEhPTl9fLmhhc19sb2NhbF9zdG9yYWdlOgogICAgICAgICAgICByYWlzZSBOYW1lRXJyb3IoJ2xvY2FsIHN0b3JhZ2UgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlcicpCiAgICAgICAgc2VsZi5zdG9yZSA9IF9fQlJZVEhPTl9fLmxvY2FsX3N0b3JhZ2UoKQogICAgICAgIAogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsa2V5KToKICAgICAgICBzZWxmLnN0b3JlLnJlbW92ZUl0ZW0oa2V5KQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLGtleSk6CiAgICAgICAgcmVzPXNlbGYuc3RvcmUuZ2V0SXRlbShrZXkpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgIHJldHVybiByZXMKICAgICAgICByYWlzZSBLZXlFcnJvcihrZXkpCgogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsa2V5LHZhbHVlKToKICAgICAgICBzZWxmLnN0b3JlLnNldEl0ZW0oa2V5LHZhbHVlKQoKICAgICNpbXBsZW1lbnQgImluIiBmdW5jdGlvbmFsaXR5CiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGtleSk6CiAgICAgICAgcmVzPXNlbGYuc3RvcmUuZ2V0SXRlbShrZXkpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBrZXlzKHNlbGYpOgogICAgICAgIHJldHVybiBsaXN0KHNlbGYuc3RvcmUpCgogICAgZGVmIHZhbHVlcyhzZWxmKToKICAgICAgICByZXR1cm4gW3NlbGYuX19nZXRpdGVtX18oaykgZm9yIGsgaW4gc2VsZi5rZXlzKCldCgogICAgZGVmIGl0ZW1zKHNlbGYpOgogICAgICAgIHJldHVybiB6aXAoc2VsZi5rZXlzKCksc2VsZi52YWx1ZXMoKSkKCnN0b3JhZ2UgPSBMb2NhbFN0b3JhZ2UoKQoK',
'/Lib/browser/indexed_db.py':'Y2xhc3MgRXZlbnRMaXN0ZW5lcjoKICBkZWYgX19pbml0X18oc2VsZiwgZXZlbnRzPVtdKToKICAgICAgc2VsZi5fZXZlbnRzPWV2ZW50cwoKICBkZWYgYXBwZW5kKHNlbGYsIGV2ZW50KToKICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZChldmVudCkKCiAgZGVmIGZpcmUoc2VsZiwgZSk6CiAgICAgIGZvciBfZXZlbnQgaW4gc2VsZi5fZXZlbnRzOgogICAgICAgICAgX2V2ZW50KGUpCgpjbGFzcyBJbmRleGVkREI6CiAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICBpZiBub3QgX19CUllUSE9OX18uaGFzX2luZGV4ZWREQjoKICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJOb3RJbXBsZW1lbnRlZEVycm9yIiwgIllvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgaW5kZXhlZERCIikKICAgICAgICAgcmV0dXJuCgogICAgICBzZWxmLl9pbmRleGVkREI9X19CUllUSE9OX18uaW5kZXhlZERCKCkKICAgICAgc2VsZi5fZGI9Tm9uZQogICAgICBzZWxmLl92ZXJzaW9uPU5vbmUKCiAgZGVmIF9vbnN1Y2Nlc3Moc2VsZiwgZXZlbnQpOgogICAgICBzZWxmLl9kYj1ldmVudC50YXJnZXQucmVzdWx0CgogIGRlZiBvcGVuKHNlbGYsIG5hbWUsIG9uc3VjY2VzcywgdmVyc2lvbj0xLjAsIG9uZXJyb3I9Tm9uZSwgCiAgICAgICAgICAgb251cGdyYWRlbmVlZGVkPU5vbmUpOgogICAgICBzZWxmLl92ZXJzaW9uPXZlcnNpb24KICAgICAgX3Jlc3VsdD1zZWxmLl9pbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKQogICAgICBfc3VjY2Vzcz1FdmVudExpc3RlbmVyKFtzZWxmLl9vbnN1Y2Nlc3MsIG9uc3VjY2Vzc10pCiAgICAgIF9yZXN1bHQub25zdWNjZXNzPV9zdWNjZXNzLmZpcmUKICAgICAgX3Jlc3VsdC5vbnVwZ3JhZGVuZWVkZWQ9b251cGdyYWRlbmVlZGVkCgogICAgICAjaWYgb25lcnJvciBpcyBOb25lOgogICAgICBkZWYgb25lcnJvcihlKToKICAgICAgICAgIHByaW50KCJvbmVycm9yOiAlczolcyIgJSAgKGUudHlwZSwgZS50YXJnZXQucmVzdWx0KSkKCiAgICAgIGRlZiBvbmJsb2NrZWQoZSk6CiAgICAgICAgICBwcmludCgiYmxvY2tlZDogJXM6JXMiICUgIChlLnR5cGUsIGUucmVzdWx0KSkKCiAgICAgIF9yZXN1bHQub25lcnJvcj1vbmVycm9yCiAgICAgIF9yZXN1bHQub25ibG9ja2VkPW9uYmxvY2tlZAoKICBkZWYgdHJhbnNhY3Rpb24oc2VsZiwgZW50aXRpZXMsIG1vZGU9J3JlYWQnKToKICAgICAgcmV0dXJuIFRyYW5zYWN0aW9uKHNlbGYuX2RiLnRyYW5zYWN0aW9uKGVudGl0aWVzLCBtb2RlKSkKCmNsYXNzIFRyYW5zYWN0aW9uOgogIGRlZiBfX2luaXRfXyhzZWxmLCB0cmFuc2FjdGlvbik6CiAgICAgIHNlbGYuX3RyYW5zYWN0aW9uPXRyYW5zYWN0aW9uCgogIGRlZiBvYmplY3RTdG9yZShzZWxmLCBuYW1lKToKICAgICAgcmV0dXJuIE9iamVjdFN0b3JlKHNlbGYuX3RyYW5zYWN0aW9uLm9iamVjdFN0b3JlKG5hbWUpKQoKY2xhc3MgT2JqZWN0U3RvcmU6CiAgZGVmIF9faW5pdF9fKHNlbGYsIG9iamVjdFN0b3JlKToKICAgICAgc2VsZi5fb2JqZWN0U3RvcmU9b2JqZWN0U3RvcmUKICAgICAgc2VsZi5fZGF0YT1bXQoKICBkZWYgY2xlYXIoc2VsZiwgb25zdWNjZXNzPU5vbmUsIG9uZXJyb3I9Tm9uZSk6CiAgICAgIF9yZXN1bHQ9c2VsZi5fb2JqZWN0U3RvcmUuY2xlYXIoKQoKICAgICAgaWYgb25zdWNjZXNzIGlzIG5vdCBOb25lOgogICAgICAgICBfcmVzdWx0Lm9uc3VjY2Vzcz1vbnN1Y2Nlc3MKCiAgICAgIGlmIG9uZXJyb3IgaXMgbm90IE5vbmU6CiAgICAgICAgIF9yZXN1bHQub25lcnJvcj1vbmVycm9yCgogIGRlZiBfaGVscGVyKHNlbGYsIGZ1bmMsIG9iamVjdCwgb25zdWNjZXNzPU5vbmUsIG9uZXJyb3I9Tm9uZSk6CiAgICAgIF9yZXN1bHQ9ZnVuYyhvYmplY3QpCgogICAgICBpZiBvbnN1Y2Nlc3MgaXMgbm90IE5vbmU6CiAgICAgICAgIF9yZXN1bHQub25zdWNjZXNzPW9uc3VjY2VzcwoKICAgICAgaWYgb25lcnJvciBpcyBub3QgTm9uZToKICAgICAgICAgX3Jlc3VsdC5vbmVycm9yPW9uZXJyb3IKCiAgZGVmIHB1dChzZWxmLCBvYmplY3QsIGtleT1Ob25lLCBvbnN1Y2Nlc3M9Tm9uZSwgb25lcnJvcj1Ob25lKToKICAgICAgX3I9c2VsZi5fb2JqZWN0U3RvcmUucHV0KG9iamVjdCwga2V5KQogICAgICBfci5vbnN1Y2Nlc3M9b25zdWNjZXNzCiAgICAgIF9yLm9uZXJyb3I9b25lcnJvcgoKICBkZWYgYWRkKHNlbGYsIG9iamVjdCwgb25zdWNjZXNzPU5vbmUsIG9uZXJyb3I9Tm9uZSk6CiAgICAgIHNlbGYuX2hlbHBlcihzZWxmLl9vYmplY3RTdG9yZS5hZGQsIG9iamVjdCwgb25zdWNjZXNzLCBvbmVycm9yKQoKICBkZWYgZGVsZXRlKHNlbGYsIGluZGV4LCBvbnN1Y2Nlc3M9Tm9uZSwgb25lcnJvcj1Ob25lKTogCiAgICAgIHNlbGYuX2hlbHBlcihzZWxmLl9vYmplY3RTdG9yZS5kZWxldGUsIGluZGV4LCBvbnN1Y2Nlc3MsIG9uZXJyb3IpCiAgICAgCiAgZGVmIHF1ZXJ5KHNlbGYsICphcmdzKToKICAgICAgc2VsZi5fZGF0YT1bXQogICAgICBkZWYgb25zdWNjZXNzKGV2ZW50KToKICAgICAgICAgIGN1cnNvcj1ldmVudC50YXJnZXQucmVzdWx0CiAgICAgICAgICBpZiBjdXJzb3IgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICBzZWxmLl9kYXRhLmFwcGVuZChjdXJzb3IudmFsdWUpCiAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKQoKICAgICAgc2VsZi5fb2JqZWN0U3RvcmUub3BlbkN1cnNvcihhcmdzKS5vbnN1Y2Nlc3M9b25zdWNjZXNzCgogIGRlZiBmZXRjaGFsbChzZWxmKToKICAgICAgeWllbGQgc2VsZi5fZGF0YQoKICBkZWYgZ2V0KHNlbGYsIGtleSwgb25zdWNjZXNzPU5vbmUsIG9uZXJyb3I9Tm9uZSk6CiAgICAgIHNlbGYuX2hlbHBlcihzZWxmLl9vYmplY3RTdG9yZS5nZXQsIGtleSwgb25zdWNjZXNzLCBvbmVycm9yKQo=',
'/Lib/browser/__init__.py':'ZnJvbSBfYnJvd3NlciBpbXBvcnQgKgo=',
'/Lib/browser/ajax.py':'ZnJvbSBfYWpheCBpbXBvcnQgKg==',
'/Lib/browser/html.py':'ZnJvbSBfaHRtbCBpbXBvcnQgKg==',
'/Lib/browser/pydom.py':'ZnJvbSBicm93c2VyIGltcG9ydCBkb2MKCmNsYXNzIFNlbGVjdG9yOgogIHRhZ3M9WydBJywnQUJCUicsJ0FDUk9OWU0nLCdBRERSRVNTJywnQVBQTEVUJywnQicsJ0JETycsJ0JJRycsJ0JMT0NLUVVPVEUnLAogICAgICAgICdCVVRUT04nLCdDQVBUSU9OJywnQ0VOVEVSJywnQ0lURScsJ0NPREUnLCdERUwnLCdERk4nLCdESVInLCdESVYnLCdETCcsCiAgICAgICAgJ0VNJywnRklFTERTRVQnLCdGT05UJywnRk9STScsJ0ZSQU1FU0VUJywnSDEnLCdIMicsJ0gzJywnSDQnLCdINScsJ0g2JywKICAgICAgICAnSScsJ0lGUkFNRScsJ0lOUycsJ0tCRCcsJ0xBQkVMJywnTEVHRU5EJywnTUFQJywnTUVOVScsJ05PRlJBTUVTJywgCiAgICAgICAgJ05PU0NSSVBUJywnT0JKRUNUJywnT0wnLCdPUFRHUk9VUCcsJ1BSRScsJ1EnLCdTJywnU0FNUCcsJ1NDUklQVCcsIAogICAgICAgICdTRUxFQ1QnLCdTTUFMTCcsJ1NQQU4nLCdTVFJJS0UnLCdTVFJPTkcnLCdTVFlMRScsJ1NVQicsJ1NVUCcsJ1RBQkxFJywKICAgICAgICAnVEVYVEFSRUEnLCdUSVRMRScsJ1RUJywnVScsJ1VMJywnVkFSJywnQk9EWScsJ0NPTEdST1VQJywnREQnLCdEVCcsCiAgICAgICAgJ0hFQUQnLCdIVE1MJywnTEknLCdQJywnVEJPRFknLCdPUFRJT04nLCdURCcsJ1RGT09UJywnVEgnLCdUSEVBRCcsJ1RSJywKICAgICAgICAnQVJFQScsJ0JBU0UnLCdCQVNFRk9OVCcsJ0JSJywnQ09MJywnRlJBTUUnLCdIUicsJ0lNRycsJ0lOUFVUJywKICAgICAgICAnSVNJTkRFWCcsJ0xJTksnLCdNRVRBJywnUEFSQU0nLCAgI0hUTUwgNSBlbGVtZW50cy4uLgogICAgICAgICdBUlRJQ0xFJywnQVNJREUnLCdBVURJTycsJ0JESScsJ0NBTlZBUycsJ0NPTU1BTkQnLCdEQVRBTElTVCcsCiAgICAgICAgJ0RFVEFJTFMnLCdESUFMT0cnLCdFTUJFRCcsJ0ZJR0NBUFRJT04nLCdGSUdVUkUnLCdGT09URVInLCdIRUFERVInLAogICAgICAgICdLRVlHRU4nLCdNQVJLJywnTUVURVInLCdOQVYnLCdPVVRQVVQnLCdQUk9HUkVTUycsJ1JQJywnUlQnLAogICAgICAgICdSVUJZJywnU0VDVElPTicsJ1NPVVJDRScsJ1NVTU1BUlknLCdUSU1FJywnVFJBQ0snLCdWSURFTycsJ1dCUiddCgogIGRlZiBfX2luaXRfXyhzZWxmLCBzZWxlY3Rvciwgc3RhcnRfbm9kZT1kb2MpOgogICAgICBzZWxmLl9kb2M9c3RhcnRfbm9kZQoKICAgICAgaWYgKGlzaW5zdGFuY2Uoc2VsZWN0b3IsIHN0cikpOgogICAgICAgICBpZiBzZWxlY3Rvci5zdGFydHN3aXRoKCIuIik6ICAgI2NsYXNzIHNlbGVjdG9yCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yPXNlbGVjdG9yWzE6XQogICAgICAgICAgICBzZWxmLl9zZWxlY3Rvcl90eXBlPSJjbGFzc25hbWUiCiAgICAgICAgIGVsaWYgc2VsZWN0b3Iuc3RhcnRzd2l0aCgiIyIpOiAgI2lkIHNlbGVjdG9yCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yPXNlbGVjdG9yWzE6XQogICAgICAgICAgICBzZWxmLl9zZWxlY3Rvcl90eXBlPSJpZCIKICAgICAgICAgZWxpZiBzZWxlY3Rvci51cHBlcigpIGluIHRhZ3M6CiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yPXNlbGVjdG9yLnVwcGVyKCkKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3JfdHlwZT0idGFnIgogICAgICAgICBlbHNlOiAgCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yPXNlbGVjdG9yCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yX3R5cGU9InNlbGVjdG9yIgogICAgICBlbHNlOiAgI3RoaXMgaXMgYSBmdW5jdGlvbgogICAgICAgICBzZWxmLl9zZWxlY3Rvcl90eXBlPSJzZWxlY3RvciIKICAgICAgICAgc2VsZi5fZnVuY3Rpb249c2VsZWN0b3IKICAgICAgICAgc2VsZi5nZXQ9c2VsZi5fZnVuY3Rpb25fZ2V0CgogIGRlZiBfZnVuY3Rpb25fZ2V0KHNlbGYpOgogICAgICBkZWYgcmVjdXJzZShub2RlKToKICAgICAgICAgIF9saXN0PVtdCiAgICAgICAgICBpZiBzZWxmLl9mdW5jdGlvbihub2RlKToKICAgICAgICAgICAgIF9saXN0LmFwcGVuZChub2RlKQoKICAgICAgICAgIGZvciBfbm9kZSBpbiBub2RlLmNoaWxkTm9kZXM6CiAgICAgICAgICAgICAgX2xpc3QrPXJlY3Vyc2UoX25vZGUpCgogICAgICAgICAgcmV0dXJuIF9saXN0CgogICAgICBfbWF0Y2hlZF9ub2Rlcz1yZWN1cnNlKHNlbGYuX2RvYykKICAgICAgcmV0dXJuIE5vZGVDb2xsZWN0aW9uKF9tYXRjaGVkX25vZGVzKQoKICBkZWYgZ2V0KHNlbGYpOgogICAgICBpZiBzZWxmLl9zZWxlY3Rvcl90eXBlPT0iaWQiOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KGlkPXNlbGYuX3NlbGVjdG9yKQogICAgICBlbGlmIHNlbGYuX3NlbGVjdG9yX3R5cGU9PSJjbGFzc25hbWUiOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KGNsYXNzbmFtZT1zZWxmLl9zZWxlY3RvcikKICAgICAgZWxpZiBzZWxmLl9zZWxlY3Rvcl90eXBlID09ICJ0YWciOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KHRhZz1zZWxmLl9zZWxlY3RvcikKICAgICAgZWxpZiBzZWxmLl9zZWxlY3Rvcl90eXBlPT0ic2VsZWN0b3IiOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KHNlbGVjdG9yPXNlbGYuX3NlbGVjdG9yKQogICAgICBlbHNlOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1bXQogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oX21hdGNoZWRfbm9kZXMpCgpjbGFzcyBOb2RlQ29sbGVjdGlvblNlbGVjdG9yKFNlbGVjdG9yKToKICBkZWYgX19pbml0X18oc2VsZiwgc2VsZWN0b3IsIGNvbGxlY3Rpb24pOgogICAgICBTZWxlY3Rvci5fX2luaXRfXyhzZWxmLCBzZWxlY3RvcikKICAgICAgc2VsZi5fY29sbGVjdGlvbj1jb2xsZWN0aW9uCgogICAgICBpZiBzZWxmLl9zZWxlY3Rvcl90eXBlID09ICdpZCc6CiAgICAgICAgIHNlbGYuX21hdGNoPXNlbGYuX21hdGNoX2lkCiAgICAgIGVsaWYgc2VsZi5fc2VsZWN0b3JfdHlwZSA9PSd0YWcnOgogICAgICAgICBzZWxmLl9tYXRjaD1zZWxmLl9tYXRjaF90YWcKICAgICAgZWxpZiBzZWxmLl9zZWxlY3Rvcl90eXBlID09ICdjbGFzc25hbWUnOgogICAgICAgICBzZWxmLl9tYXRjaD1zZWxmLl9tYXRjaF9jbGFzc25hbWUKCiAgZGVmIF9tYXRjaF9pZChzZWxmLCBub2RlKToKICAgICAgaWYgbm9kZS5pZCBpcyBOb25lOiByZXR1cm4gRmFsc2UKICAgICAgcmV0dXJuIG5vZGUuaWQgPT0gc2VsZi5fc2VsZWN0b3IKCiAgZGVmIF9tYXRjaF90YWcoc2VsZiwgbm9kZSk6CiAgICAgIHJldHVybiBub2RlLnRhZ05hbWUgPT0gc2VsZi5fc2VsZWN0b3IKCiAgZGVmIF9tYXRjaF9jbGFzc25hbWUoc2VsZiwgbm9kZSk6CiAgICAgIHJldHVybiBzZWxmLl9zZWxlY3RvciBpbiBub2RlLmNsYXNzbmFtZQoKICBkZWYgZ2V0KHNlbGYpOgogICAgICBfYzE9Tm9kZUNvbGxlY3Rpb24oKQogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fY29sbGVjdGlvbjoKICAgICAgICAgIGlmIHNlbGYuX21hdGNoKF9ub2RlKToKICAgICAgICAgICAgIF9jMS5hcHBlbmQoX25vZGUpCgogICAgICByZXR1cm4gX2MxCgpjbGFzcyBOb2RlQ29sbGVjdGlvbjoKICBkZWYgX19pbml0X18oc2VsZiwgbm9kZXM9W10pOgogICAgICBzZWxmLl9ub2Rlcz1ub2RlcwoKICBkZWYgX19sZW5fXyhzZWxmKToKICAgICAgcmV0dXJuIGxlbihzZWxmLl9ub2RlcykKCiAgZGVmIF9faXRlbV9fKHNlbGYsIGkpOgogICAgICByZXR1cm4gc2VsZi5fbm9kZXNbaV0KCiAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGkpOgogICAgICByZXR1cm4gc2VsZi5fbm9kZXNbaV0KCiAgZGVmIF9fYWRkX18oc2VsZiwgbm9kZXMpOgogICAgICBzZWxmLl9ub2Rlcys9bm9kZXMKCiAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgIF9zdHI9W10KICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX3N0ci5hcHBlbmQoX25vZGUuX19zdHJfXygpKQoKICAgICAgcmV0dXJuICc8YnI+Jy5qb2luKF9zdHIpCgogIGRlZiBhcHBlbmQoc2VsZiwgbm9kZSk6ICAgICAgICAKICAgICAgc2VsZi5fbm9kZXMuYXBwZW5kKG5vZGUpCgogIGRlZiBuZXh0KHNlbGYpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICB5aWVsZCBfbm9kZQoKICBkZWYgYWRkKHNlbGYsIHNlbGVjdG9yLCBjb250ZXh0KToKICAgICAgX25zPU5vZGVDb2xsZWN0aW9uU2VsZWN0b3Ioc2VsZWN0b3IsIHNlbGYpCiAgICAgIHNlbGYuX25vZGVzKz1fbnMuZ2V0KCkKCiAgZGVmIGFkZEJhY2soc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIGFkZENsYXNzKHNlbGYsIGNsYXNzbmFtZSk6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmFkZENsYXNzKGNsYXNzbmFtZSkKCiAgZGVmIGFmdGVyKHNlbGYsIGNvbnRlbnQpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5hZnRlcihjb250ZW50KQoKICBkZWYgYXBwZW5kX2NvbnRlbnQoc2VsZiwgY29udGVudCk6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmFwcGVuZChjb250ZW50KQoKICBkZWYgYXBwZW5kVG8oc2VsZiwgc2VsZWN0b3IpOgogICAgICBfcz1TZWxlY3RvcihzZWxlY3RvcikKCiAgICAgIGZvciBfbm9kZSBpbiBfcy5nZXQoKToKICAgICAgICAgIF9ub2RlLmFwcGVuZChzZWxmLl9ub2RlWzBdLmNsb25lKCkpCgogIGRlZiBhdHRyKHNlbGYsIHByb3BlcnR5LCB2YWx1ZT1Ob25lKToKICAgICAgaWYgdmFsdWUgaXMgTm9uZToKICAgICAgICAgcmV0dXJuIHNlbGYuX25vZGVzWzBdW3Byb3BlcnR5XQoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGVbcHJvcGVydHldPXZhbHVlCgogIGRlZiBiZWZvcmUoc2VsZiwgY29udGVudCk6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmJlZm9yZShjb250ZW50KQoKICBkZWYgYmluZChzZWxmLCBldmVudCwgaGFuZGxlcik6CiAgICAgIGlmICcgJyBpbiBldmVudDoKICAgICAgICAgX2V2ZW50cz0nICcuc3BsaXQoZXZlbnQpCiAgICAgICAgIGZvciBfZXZlbnQgaW4gX2V2ZW50czoKICAgICAgICAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgICAgICAgICBfbm9kZVsnb24lcycgJSBldmVudF09aGFuZGxlcgogICAgICAgICByZXR1cm4KCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlWydvbiVzJyAlIGV2ZW50XT1oYW5kbGVyCgogIGRlZiBibHVyKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGNoYW5nZShzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBjaGlsZHJlbihzZWxmLCBzZWxlY3Rvcj1Ob25lKToKICAgICAgX2M9Tm9kZUNvbGxlY3Rpb24oKQogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBmb3IgX2NoaWxkIGluIF9ub2RlLmdldF9jaGlsZHJlbigpOgogICAgICAgICAgICAgIF9jLmFwcGVuZChfY2hpbGQpCgogICAgICBpZiBzZWxlY3RvciBpcyBOb25lOgogICAgICAgICByZXR1cm4gX2MKCiAgICAgICNzZWxlY3RvciBpcyBub3QgTm9uZQogICAgICBfbnM9Tm9kZUNvbGxlY3Rpb25TZWxlY3RvcihzZWxlY3RvciwgX2MpCiAgICAgIHJldHVybiBfbnMuZ2V0KCkKCiAgZGVmIGNsaWNrKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGNsb25lKHNlbGYpOgogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oW19ub2RlLmNsb25lKCkgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzXSkKCiAgZGVmIGNsb3Nlc3Qoc2VsZiwgc2VsZWN0b3IpOgogICAgICBpZiBpc2luc3RhbmNlKHNlbGVjdG9yLCBzdHIpOgogICAgICAgICBfbnM9U2VsZWN0b3Ioc2VsZWN0b3IpCiAgICAgICAgIHNlbGVjdG9yPV9ucy5nZXQoKQoKICAgICAgX2M9Tm9kZUNvbGxlY3Rpb24oKQogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfYy5hcHBlbmQoX25vZGUuY2xvc2VzdChzZWxlY3RvcikpCgogICAgICByZXR1cm4gX2MKCiAgZGVmIGNvbnRhaW5zKHNlbGYsIHRleHQpOgogICAgICBwYXNzCgogIGRlZiBjb250ZW50cyhzZWxmKToKICAgICAgcGFzcwoKICBkZWYgY3NzKHNlbGYsIHByb3BlcnR5LCB2YWx1ZT1Ob25lKToKICAgICAgaWYgdmFsdWUgaXMgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UocHJvcGVydHksIGRpY3QpOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF0uY3NzKHByb3BlcnR5KQoKICAgICAgaWYgaXNpbnN0YW5jZShwcm9wZXJ0eSwgZGljdCk6CiAgICAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgICAgIF9ub2RlLmNzcyhwcm9wZXJ0eSkKICAgICAgZWxzZToKICAgICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgICAgX25vZGUuY3NzKHByb3BlcnR5LCB2YWx1ZSkKCiAgZGVmIGRhdGEoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIGRibGNsaWNrKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGRldGFjaChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgZWFjaChzZWxmLCBmdW5jKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgZnVuYyhfbm9kZSkKCiAgZGVmIGVtcHR5KHNlbGYpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5lbXB0eSgpCgogIGRlZiBlcShzZWxmLCBpbmRleCk6CiAgICAgIGlmIGluZGV4IDwgbGVuKHNlbGYuX25vZGVzKToKICAgICAgICAgcmV0dXJuIE5vZGVDb2xsZWN0aW9ucyhzZWxmLl9ub2Rlc1tpbmRleF0pCgogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb25zKCkKCiAgZGVmIGVycm9yKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGZhZGVJbihzZWxmKToKICAgICAgcGFzcwoKICBkZWYgZmFkZU91dChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgZmFkZVRvKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBmYWRlVG9nZ2xlKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBmaWx0ZXIoc2VsZiwgc2VsZWN0b3IpOgogICAgICBfbnM9Tm9kZUNvbGxlY3Rpb25TZWxlY3RvcihzZWxlY3Rvciwgc2VsZikKICAgICAgcmV0dXJuIF9ucy5nZXQoKQoKICBkZWYgZmluZChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgZmlyc3Qoc2VsZik6CiAgICAgIGlmIGxlbihzZWxmLl9ub2RlcykgPT0gMDoKICAgICAgICAgcmV0dXJuIE5vZGVDb2xsZWN0aW9uKCkKCiAgICAgIHJldHVybiBOb2RlQ29sbGVjdGlvbihbc2VsZi5fbm9kZXNbMF1dKQoKICBkZWYgZm9jdXMoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgZm9jdXNpbihzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBmb2N1c291dChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBnZXQoc2VsZiwgaW5kZXg9Tm9uZSk6CiAgICAgIGlmIGluZGV4IGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBbX25vZGUgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzXQoKICAgICAgcmV0dXJuIHNlbGYuX25vZGVzW2luZGV4XQoKICBkZWYgZ3Qoc2VsZiwgaW5kZXgpOgogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oW3NlbGYuX25vZGVzW2luZGV4Ol1dKQoKICBkZWYgaGFzKHNlbGYsIHNlbGVjdG9yKToKICAgICAgcGFzcwogIAogIGRlZiBoYXNDbGFzcyhzZWxmLCBuYW1lKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgaWYgX25vZGUuaGFzQ2xhc3MobmFtZSk6CiAgICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgICAgcmV0dXJuIEZhbHNlCgogIGRlZiBoZWlnaHQoc2VsZiwgdmFsdWU9Tm9uZSk6CiAgICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1swXS5jc3MoJ2hlaWdodCcpCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydoZWlnaHQnOiB2YWx1ZX0pCgogIGRlZiBoaWRlKHNlbGYpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ25vbmUnfSkKCiAgZGVmIGhvdmVyKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGh0bWwoc2VsZiwgY29udGVudD1Ob25lKToKICAgICAgaWYgY29udGVudCBpcyBOb25lOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF0uZ2V0X2h0bWwoKQoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuc2V0X2h0bWwoY29udGVudCkKCiAgZGVmIGlubmVySGVpZ2h0KHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBpbm5lcldpZHRoKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBpbnNlcnRBZnRlcihzZWxmLCB0YXJnZXQpOgogICAgICBwYXNzCgogIGRlZiBpbnNlcnRCZWZvcmUoc2VsZiwgdGFyZ2V0KToKICAgICAgcGFzcwoKICAjZGVmIGlzKHNlbGYsIHNlbGVjdG9yKToKICAjICAgIHBhc3MKCiAgZGVmIGtleWRvd24oc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYga2V5cHJlc3Moc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYga2V5dXAoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbGFzdChzZWxmKToKICAgICAgcmV0dXJuIHNlbGYuX25vZGVzWy0xXQoKICBAcHJvcGVydHkKICBkZWYgbGVuZ3RoKHNlbGYpOgogICAgICByZXR1cm4gbGVuKHNlbGYuX25vZGVzKQoKICBkZWYgbW91c2Vkb3duKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIG1vdXNlZW50ZXIoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbW91c2VsZWF2ZShzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBtb3VzZW1vdmUoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbW91c2VvdXQoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbW91c2VvdmVyKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIG1vdXNldXAoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbmV4dChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgbmV4dEFsbChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgbmV4dFV0aWwoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIG9mZihzZWxmLCBoYW5kbGVyKToKICAgICAgcGFzcwoKICBkZWYgb2Zmc2V0KHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBvZmZzZXRQYXJlbnQoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIG9uKHNlbGYsIGhhbmRsZXIpOgogICAgICBwYXNzCgogIGRlZiBvdXRlckhlaWdodChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgb3V0ZXJXaWR0aChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgcGFyZW50KHNlbGYpOgogICAgICBfcD1Ob2RlQ29sbGVjdGlvbigpCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9wLmFwcGVuZChfbm9kZS5nZXRfcGFyZW50KCkpCgogIGRlZiBwYXJlbnRzKHNlbGYsIHNlbGVjdG9yPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBwYXJlbnRzVW50aWwoc2VsZiwgc2VsZWN0b3I9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHBvc2l0aW9uKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBwcmVwZW5kKHNlbGYsIGNvbnRlbnQpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5wcmVwZW5kKGNvbnRlbnQpCgogIGRlZiBwcmVwZW5kVG8oc2VsZiwgdGFyZ2V0KToKICAgICAgcGFzcwoKICBkZWYgcHJldihzZWxmKToKICAgICAgX3AxPU5vZGVDb2xsZWN0aW9uKCkKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX3BhcmVudD1fbm9kZS5nZXRfcGFyZW50KCkKICAgICAgICAgIGZvciBfaSBpbiByYW5nZShsZW4oX3BhcmVudC5jaGlsZE5vZGVzKSk6CiAgICAgICAgICAgICAgaWYgX3BhcmVudC5jaGlsZE5vZGVzW19pXSA9PSBfbm9kZToKICAgICAgICAgICAgICAgICBpZiBfaSA+IDA6CiAgICAgICAgICAgICAgICAgICAgX3AxLmFwcGVuZChfcGFyZW50LmNoaWxkTm9kZXNbX2ktMV0pCiAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgIHJldHVybiBfcDEKCiAgZGVmIHByZXZBbGwoc2VsZiwgc2VsZWN0b3I9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHByZXZVbnRpbChzZWxmLCBzZWxlY3Rvcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgcHJvcChzZWxmLCBwcm9wZXJ0eSwgdmFsdWU9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHJlYWR5KHNlbGYsIGZ1bmMpOgogICAgICBwYXNzCgogIGRlZiByZW1vdmUoc2VsZik6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmdldF9wYXJlbnQoKS5yZW1vdmVDaGlsZChfbm9kZSkgCgogIGRlZiByZW1vdmVBdHRyKHNlbGYsIGF0dHIpOgogICAgICBwYXNzCgogIGRlZiByZW1vdmVDbGFzcyhzZWxmLCBuYW1lKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUucmVtb3ZlQ2xhc3MobmFtZSkKCiAgZGVmIHJlbW92ZVByb3Aoc2VsZiwgcHJvcGVydHkpOgogICAgICBwYXNzCgogIGRlZiByZXBsYWNlQWxsKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiByZXBsYWNlV2l0aChzZWxmLCBjb250ZW50KToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuZ2V0X3BhcmVudCgpLnJlcGxhY2VXaXRoKGNvbnRlbnQsIF9ub2RlKQoKICBkZWYgcmVzaXplKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHNjcm9sbChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBzY3JvbGxMZWZ0KHNlbGYsIHZhbHVlPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBzY3JvbGxUb3Aoc2VsZiwgdmFsdWU9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHNlbGVjdChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBzaG93KHNlbGYpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ2Jsb2NrJ30pCgogIGRlZiBzaWJsaW5ncyhzZWxmLCBzZWxlY3Rvcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgc2l6ZShzZWxmKToKICAgICAgcGFzcwoKICBkZWYgc2xpY2Uoc2VsZiwgaW5kZXgxPU5vbmUsIGluZGV4Mj1Ob25lKToKICAgICAgaWYgaW5kZXgxIGlzIE5vbmUgYW5kIGluZGV4MiBpcyBOb25lOgogICAgICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oKQoKICAgICAgcmV0dXJuIE5vZGVDb2xsZWN0aW9uKHNlbGYuX25vZGVzW2luZGV4MTppbmRleDJdKQoKICBkZWYgc2xpZGVEb3duKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBzbGlkZVRvZ2dsZShzZWxmKToKICAgICAgcGFzcwoKICBkZWYgc2xpZGVVcChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgc3VibWl0KHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHRleHQoc2VsZiwgY29udGVudD1Ob25lKToKICAgICAgaWYgY29udGVudCBpcyBOb25lOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF0uZ2V0X3RleHQoKQoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuc2V0X3RleHQoY29udGVudCkgCgogIGRlZiB0b2dnbGUoc2VsZiwgRnVuY3Rpb249Tm9uZSk6CiAgICAgIGlmIEZ1bmN0aW9uIGlzIE5vbmU6CiAgICAgICAgIF9zaG93PVRydWUKICAgICAgICAgaWYgc2VsZi5fbm9kZXNbMF0uY3NzKCdkaXNwbGF5JykgIT0gJ25vbmUnOgogICAgICAgICAgICBfc2hvdz1GYWxzZQogICAgICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICAgICBpZiBfc2hvdzoKICAgICAgICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J2Rpc3BsYXknOiAnYmxvY2snfSkKICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ25vbmUnfSkKICAKICAgICAgICAgICAgIF9zaG93PW5vdCBfc2hvdwoKICAgICAgICAgcmV0dXJuCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBpZiBGdW5jdGlvbihfbm9kZSk6CiAgICAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ2Jsb2NrJ30pCiAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgX25vZGUuc2V0X3N0eWxlKHsnZGlzcGxheSc6ICdub25lJ30pCgogIGRlZiB0b2dnbGVDbGFzcyhzZWxmKToKICAgICAgcGFzcwoKICBkZWYgdG9MaXN0KHNlbGYpOgogICAgICByZXR1cm4gc2VsZi5fbm9kZXMKCiAgdG9BcnJheT10b0xpc3QgICAjZm9yIGpRdWVyeSBjb21wYXRpYmlsaXR5CgogIGRlZiB0b3VjaGVuZChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiB0b3VjaG1vdmUoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgdG91Y2hzdGFydChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiB0cmlnZ2VyKHNlbGYsIGV2ZW50X3R5cGUpOgogICAgICBwYXNzCgogIGRlZiB0cmlnZ2VySGFuZGxlcihzZWxmLCBldmVudF90eXBlKToKICAgICAgcGFzcwoKCiAgZGVmIHVuYmluZChzZWxmLCBldmVudCwgaGFuZGxlcik6CiAgICAgIGlmICcgJyBpbiBldmVudDoKICAgICAgICAgX2V2ZW50cz0nICcuc3BsaXQoZXZlbnQpCiAgICAgICAgIGZvciBfZXZlbnQgaW4gX2V2ZW50czoKICAgICAgICAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgICAgICAgICBwcmludCgiZml4IG1lISIpCiAgICAgICAgIHJldHVybgoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgI2xvb2sgaW50byBob3cgdG8gZGV0YWNoIGFuIGV2ZW50CiAgICAgICAgICBwcmludCgiZml4IG1lIikKCgogIGRlZiB1bmxvYWQoc2VsZiwgaGFuZGxlcik6CiAgICAgIHBhc3MKCiAgZGVmIHVud3JhcChzZWxmKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX3BhcmVudD1fbm9kZS5nZXRfcGFyZW50KCkKICAgICAgICAgIF9ncmFuZHBhcmVudD1fcGFyZW50LmdldF9wYXJlbnQoKQogICAgICAgICAgX2dyYW5kcGFyZW50LnJlcGxhY2VDaGlsZChfbm9kZSwgX3BhcmVudCkKCiAgICAgICAgICBfcGFyZW50LnJlbW92ZSgpCgogIGRlZiB2YWwoc2VsZiwgdmFsdWU9Tm9uZSk6CiAgICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1swXVsndGV4dCddICAgI2lzIHRleHQgdGhlIGJlc3QgaGVyZT8KCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlWyd0ZXh0J109dmFsdWUKCiAgZGVmIHdpZHRoKHNlbGYsIHdpZHRoPU5vbmUpOgogICAgICBpZiB3aWR0aCBpcyBOb25lOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF0uY3NzKCd3aWR0aCcpCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeyd3aWR0aCc6IHdpZHRofSkKCiAgZGVmIHdyYXAoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIHdyYXBBbGwoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIHdyYXBJbm5lcihzZWxmKToKICAgICAgcGFzcwoKZGVmIGJ5SWQoaWQpOgogICAgX3Jlc3VsdD1kb2MuZ2V0KGlkPWlkKQogICAgcmV0dXJuIF9yZXN1bHRbMF0KCmRlZiBjcmVhdGVDU1NDbGFzcyhjc3N0ZXh0KToKICAgIF9zdHlsZT1kb2MuY3JlYXRlRWxlbWVudCgnc3R5bGUnKQogICAgX3N0eWxlLnR5cGU9J3RleHQvY3NzJwogICAgX3N0eWxlLmlubmVySFRNTCA9IGNzc3RleHQKICAgIGRvYy5nZXQodGFnPSdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoX3N0eWxlKQo=',
'/Lib/unittest/mock.py':'IyBtb2NrLnB5DQojIFRlc3QgdG9vbHMgZm9yIG1vY2tpbmcgYW5kIHBhdGNoaW5nLg0KIyBNYWludGFpbmVkIGJ5IE1pY2hhZWwgRm9vcmQNCiMgQmFja3BvcnQgZm9yIG90aGVyIHZlcnNpb25zIG9mIFB5dGhvbiBhdmFpbGFibGUgZnJvbQ0KIyBodHRwOi8vcHlwaS5weXRob24ub3JnL3B5cGkvbW9jaw0KDQpfX2FsbF9fID0gKA0KICAgICdNb2NrJywNCiAgICAnTWFnaWNNb2NrJywNCiAgICAncGF0Y2gnLA0KICAgICdzZW50aW5lbCcsDQogICAgJ0RFRkFVTFQnLA0KICAgICdBTlknLA0KICAgICdjYWxsJywNCiAgICAnY3JlYXRlX2F1dG9zcGVjJywNCiAgICAnRklMVEVSX0RJUicsDQogICAgJ05vbkNhbGxhYmxlTW9jaycsDQogICAgJ05vbkNhbGxhYmxlTWFnaWNNb2NrJywNCiAgICAnbW9ja19vcGVuJywNCiAgICAnUHJvcGVydHlNb2NrJywNCikNCg0KDQpfX3ZlcnNpb25fXyA9ICcxLjAnDQoNCg0KaW1wb3J0IGluc3BlY3QNCmltcG9ydCBwcHJpbnQNCmltcG9ydCBzeXMNCmZyb20gZnVuY3Rvb2xzIGltcG9ydCB3cmFwcw0KDQoNCkJhc2VFeGNlcHRpb25zID0gKEJhc2VFeGNlcHRpb24sKQ0KaWYgJ2phdmEnIGluIHN5cy5wbGF0Zm9ybToNCiAgICAjIGp5dGhvbg0KICAgIGltcG9ydCBqYXZhDQogICAgQmFzZUV4Y2VwdGlvbnMgPSAoQmFzZUV4Y2VwdGlvbiwgamF2YS5sYW5nLlRocm93YWJsZSkNCg0KDQpGSUxURVJfRElSID0gVHJ1ZQ0KDQojIFdvcmthcm91bmQgZm9yIGlzc3VlICMxMjM3MA0KIyBXaXRob3V0IHRoaXMsIHRoZSBfX2NsYXNzX18gcHJvcGVydGllcyB3b3VsZG4ndCBiZSBzZXQgY29ycmVjdGx5DQpfc2FmZV9zdXBlciA9IHN1cGVyDQoNCmRlZiBfaXNfaW5zdGFuY2VfbW9jayhvYmopOg0KICAgICMgY2FuJ3QgdXNlIGlzaW5zdGFuY2Ugb24gTW9jayBvYmplY3RzIGJlY2F1c2UgdGhleSBvdmVycmlkZSBfX2NsYXNzX18NCiAgICAjIFRoZSBiYXNlIGNsYXNzIGZvciBhbGwgbW9ja3MgaXMgTm9uQ2FsbGFibGVNb2NrDQogICAgcmV0dXJuIGlzc3ViY2xhc3ModHlwZShvYmopLCBOb25DYWxsYWJsZU1vY2spDQoNCg0KZGVmIF9pc19leGNlcHRpb24ob2JqKToNCiAgICByZXR1cm4gKA0KICAgICAgICBpc2luc3RhbmNlKG9iaiwgQmFzZUV4Y2VwdGlvbnMpIG9yDQogICAgICAgIGlzaW5zdGFuY2Uob2JqLCB0eXBlKSBhbmQgaXNzdWJjbGFzcyhvYmosIEJhc2VFeGNlcHRpb25zKQ0KICAgICkNCg0KDQpjbGFzcyBfc2xvdHRlZChvYmplY3QpOg0KICAgIF9fc2xvdHNfXyA9IFsnYSddDQoNCg0KRGVzY3JpcHRvclR5cGVzID0gKA0KICAgIHR5cGUoX3Nsb3R0ZWQuYSksDQogICAgcHJvcGVydHksDQopDQoNCg0KZGVmIF9nZXRzaWduYXR1cmUoZnVuYywgc2tpcGZpcnN0LCBpbnN0YW5jZT1GYWxzZSk6DQogICAgaWYgaXNpbnN0YW5jZShmdW5jLCB0eXBlKSBhbmQgbm90IGluc3RhbmNlOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBmdW5jID0gZnVuYy5fX2luaXRfXw0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgc2tpcGZpcnN0ID0gVHJ1ZQ0KICAgIGVsaWYgbm90IGlzaW5zdGFuY2UoZnVuYywgRnVuY3Rpb25UeXBlcyk6DQogICAgICAgICMgZm9yIGNsYXNzZXMgd2hlcmUgaW5zdGFuY2UgaXMgVHJ1ZSB3ZSBlbmQgdXAgaGVyZSB0b28NCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZnVuYyA9IGZ1bmMuX19jYWxsX18NCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgcmV0dXJuDQoNCiAgICB0cnk6DQogICAgICAgIGFyZ3NwZWMgPSBpbnNwZWN0LmdldGZ1bGxhcmdzcGVjKGZ1bmMpDQogICAgZXhjZXB0IFR5cGVFcnJvcjoNCiAgICAgICAgIyBDIGZ1bmN0aW9uIC8gbWV0aG9kLCBwb3NzaWJseSBpbmhlcml0ZWQgb2JqZWN0KCkuX19pbml0X18NCiAgICAgICAgcmV0dXJuDQoNCiAgICByZWdhcmdzLCB2YXJhcmdzLCB2YXJrdywgZGVmYXVsdHMsIGt3b25seSwga3dvbmx5ZGVmLCBhbm4gPSBhcmdzcGVjDQoNCg0KICAgICMgaW5zdGFuY2UgbWV0aG9kcyBhbmQgY2xhc3NtZXRob2RzIG5lZWQgdG8gbG9zZSB0aGUgc2VsZiBhcmd1bWVudA0KICAgIGlmIGdldGF0dHIoZnVuYywgJ19fc2VsZl9fJywgTm9uZSkgaXMgbm90IE5vbmU6DQogICAgICAgIHJlZ2FyZ3MgPSByZWdhcmdzWzE6XQ0KICAgIGlmIHNraXBmaXJzdDoNCiAgICAgICAgIyB0aGlzIGNvbmRpdGlvbiBhbmQgdGhlIGFib3ZlIG9uZSBhcmUgbmV2ZXIgYm90aCBUcnVlIC0gd2h5Pw0KICAgICAgICByZWdhcmdzID0gcmVnYXJnc1sxOl0NCg0KICAgIHNpZ25hdHVyZSA9IGluc3BlY3QuZm9ybWF0YXJnc3BlYygNCiAgICAgICAgcmVnYXJncywgdmFyYXJncywgdmFya3csIGRlZmF1bHRzLA0KICAgICAgICBrd29ubHksIGt3b25seWRlZiwgYW5uLCBmb3JtYXR2YWx1ZT1sYW1iZGEgdmFsdWU6ICIiKQ0KICAgIHJldHVybiBzaWduYXR1cmVbMTotMV0sIGZ1bmMNCg0KDQpkZWYgX2NoZWNrX3NpZ25hdHVyZShmdW5jLCBtb2NrLCBza2lwZmlyc3QsIGluc3RhbmNlPUZhbHNlKToNCiAgICBpZiBub3QgX2NhbGxhYmxlKGZ1bmMpOg0KICAgICAgICByZXR1cm4NCg0KICAgIHJlc3VsdCA9IF9nZXRzaWduYXR1cmUoZnVuYywgc2tpcGZpcnN0LCBpbnN0YW5jZSkNCiAgICBpZiByZXN1bHQgaXMgTm9uZToNCiAgICAgICAgcmV0dXJuDQogICAgc2lnbmF0dXJlLCBmdW5jID0gcmVzdWx0DQoNCiAgICAjIGNhbid0IHVzZSBzZWxmIGJlY2F1c2UgInNlbGYiIGlzIGNvbW1vbiBhcyBhbiBhcmd1bWVudCBuYW1lDQogICAgIyB1bmZvcnR1bmF0ZWx5IGV2ZW4gbm90IGluIHRoZSBmaXJzdCBwbGFjZQ0KICAgIHNyYyA9ICJsYW1iZGEgX21vY2tfc2VsZiwgJXM6IE5vbmUiICUgc2lnbmF0dXJlDQogICAgY2hlY2tzaWcgPSBldmFsKHNyYywge30pDQogICAgX2NvcHlfZnVuY19kZXRhaWxzKGZ1bmMsIGNoZWNrc2lnKQ0KICAgIHR5cGUobW9jaykuX21vY2tfY2hlY2tfc2lnID0gY2hlY2tzaWcNCg0KDQpkZWYgX2NvcHlfZnVuY19kZXRhaWxzKGZ1bmMsIGZ1bmNvcHkpOg0KICAgIGZ1bmNvcHkuX19uYW1lX18gPSBmdW5jLl9fbmFtZV9fDQogICAgZnVuY29weS5fX2RvY19fID0gZnVuYy5fX2RvY19fDQogICAgIyB3ZSBleHBsaWNpdGx5IGRvbid0IGNvcHkgZnVuYy5fX2RpY3RfXyBpbnRvIHRoaXMgY29weSBhcyBpdCB3b3VsZA0KICAgICMgZXhwb3NlIG9yaWdpbmFsIGF0dHJpYnV0ZXMgdGhhdCBzaG91bGQgYmUgbW9ja2VkDQogICAgZnVuY29weS5fX21vZHVsZV9fID0gZnVuYy5fX21vZHVsZV9fDQogICAgZnVuY29weS5fX2RlZmF1bHRzX18gPSBmdW5jLl9fZGVmYXVsdHNfXw0KICAgIGZ1bmNvcHkuX19rd2RlZmF1bHRzX18gPSBmdW5jLl9fa3dkZWZhdWx0c19fDQoNCg0KZGVmIF9jYWxsYWJsZShvYmopOg0KICAgIGlmIGlzaW5zdGFuY2Uob2JqLCB0eXBlKToNCiAgICAgICAgcmV0dXJuIFRydWUNCiAgICBpZiBnZXRhdHRyKG9iaiwgJ19fY2FsbF9fJywgTm9uZSkgaXMgbm90IE5vbmU6DQogICAgICAgIHJldHVybiBUcnVlDQogICAgcmV0dXJuIEZhbHNlDQoNCg0KZGVmIF9pc19saXN0KG9iaik6DQogICAgIyBjaGVja3MgZm9yIGxpc3Qgb3IgdHVwbGVzDQogICAgIyBYWFhYIGJhZGx5IG5hbWVkIQ0KICAgIHJldHVybiB0eXBlKG9iaikgaW4gKGxpc3QsIHR1cGxlKQ0KDQoNCmRlZiBfaW5zdGFuY2VfY2FsbGFibGUob2JqKToNCiAgICAiIiJHaXZlbiBhbiBvYmplY3QsIHJldHVybiBUcnVlIGlmIHRoZSBvYmplY3QgaXMgY2FsbGFibGUuDQogICAgRm9yIGNsYXNzZXMsIHJldHVybiBUcnVlIGlmIGluc3RhbmNlcyB3b3VsZCBiZSBjYWxsYWJsZS4iIiINCiAgICBpZiBub3QgaXNpbnN0YW5jZShvYmosIHR5cGUpOg0KICAgICAgICAjIGFscmVhZHkgYW4gaW5zdGFuY2UNCiAgICAgICAgcmV0dXJuIGdldGF0dHIob2JqLCAnX19jYWxsX18nLCBOb25lKSBpcyBub3QgTm9uZQ0KDQogICAgIyAqY291bGQqIGJlIGJyb2tlbiBieSBhIGNsYXNzIG92ZXJyaWRpbmcgX19tcm9fXyBvciBfX2RpY3RfXyB2aWENCiAgICAjIGEgbWV0YWNsYXNzDQogICAgZm9yIGJhc2UgaW4gKG9iaiwpICsgb2JqLl9fbXJvX186DQogICAgICAgIGlmIGJhc2UuX19kaWN0X18uZ2V0KCdfX2NhbGxfXycpIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICByZXR1cm4gRmFsc2UNCg0KDQpkZWYgX3NldF9zaWduYXR1cmUobW9jaywgb3JpZ2luYWwsIGluc3RhbmNlPUZhbHNlKToNCiAgICAjIGNyZWF0ZXMgYSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSAoKmFyZ3MsICoqa3dhcmdzKSB0aGF0IGRlbGVnYXRlcyB0byBhDQogICAgIyBtb2NrLiBJdCBzdGlsbCBkb2VzIHNpZ25hdHVyZSBjaGVja2luZyBieSBjYWxsaW5nIGEgbGFtYmRhIHdpdGggdGhlIHNhbWUNCiAgICAjIHNpZ25hdHVyZSBhcyB0aGUgb3JpZ2luYWwuDQogICAgaWYgbm90IF9jYWxsYWJsZShvcmlnaW5hbCk6DQogICAgICAgIHJldHVybg0KDQogICAgc2tpcGZpcnN0ID0gaXNpbnN0YW5jZShvcmlnaW5hbCwgdHlwZSkNCiAgICByZXN1bHQgPSBfZ2V0c2lnbmF0dXJlKG9yaWdpbmFsLCBza2lwZmlyc3QsIGluc3RhbmNlKQ0KICAgIGlmIHJlc3VsdCBpcyBOb25lOg0KICAgICAgICAjIHdhcyBhIEMgZnVuY3Rpb24gKGUuZy4gb2JqZWN0KCkuX19pbml0X18gKSB0aGF0IGNhbid0IGJlIG1vY2tlZA0KICAgICAgICByZXR1cm4NCg0KICAgIHNpZ25hdHVyZSwgZnVuYyA9IHJlc3VsdA0KDQogICAgc3JjID0gImxhbWJkYSAlczogTm9uZSIgJSBzaWduYXR1cmUNCiAgICBjaGVja3NpZyA9IGV2YWwoc3JjLCB7fSkNCiAgICBfY29weV9mdW5jX2RldGFpbHMoZnVuYywgY2hlY2tzaWcpDQoNCiAgICBuYW1lID0gb3JpZ2luYWwuX19uYW1lX18NCiAgICBpZiBub3QgbmFtZS5pc2lkZW50aWZpZXIoKToNCiAgICAgICAgbmFtZSA9ICdmdW5jb3B5Jw0KICAgIGNvbnRleHQgPSB7J19jaGVja3NpZ18nOiBjaGVja3NpZywgJ21vY2snOiBtb2NrfQ0KICAgIHNyYyA9ICIiImRlZiAlcygqYXJncywgKiprd2FyZ3MpOg0KICAgIF9jaGVja3NpZ18oKmFyZ3MsICoqa3dhcmdzKQ0KICAgIHJldHVybiBtb2NrKCphcmdzLCAqKmt3YXJncykiIiIgJSBuYW1lDQogICAgZXhlYyAoc3JjLCBjb250ZXh0KQ0KICAgIGZ1bmNvcHkgPSBjb250ZXh0W25hbWVdDQogICAgX3NldHVwX2Z1bmMoZnVuY29weSwgbW9jaykNCiAgICByZXR1cm4gZnVuY29weQ0KDQoNCmRlZiBfc2V0dXBfZnVuYyhmdW5jb3B5LCBtb2NrKToNCiAgICBmdW5jb3B5Lm1vY2sgPSBtb2NrDQoNCiAgICAjIGNhbid0IHVzZSBpc2luc3RhbmNlIHdpdGggbW9ja3MNCiAgICBpZiBub3QgX2lzX2luc3RhbmNlX21vY2sobW9jayk6DQogICAgICAgIHJldHVybg0KDQogICAgZGVmIGFzc2VydF9jYWxsZWRfd2l0aCgqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICByZXR1cm4gbW9jay5hc3NlcnRfY2FsbGVkX3dpdGgoKmFyZ3MsICoqa3dhcmdzKQ0KICAgIGRlZiBhc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICByZXR1cm4gbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgqYXJncywgKiprd2FyZ3MpDQogICAgZGVmIGFzc2VydF9oYXNfY2FsbHMoKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgcmV0dXJuIG1vY2suYXNzZXJ0X2hhc19jYWxscygqYXJncywgKiprd2FyZ3MpDQogICAgZGVmIGFzc2VydF9hbnlfY2FsbCgqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICByZXR1cm4gbW9jay5hc3NlcnRfYW55X2NhbGwoKmFyZ3MsICoqa3dhcmdzKQ0KICAgIGRlZiByZXNldF9tb2NrKCk6DQogICAgICAgIGZ1bmNvcHkubWV0aG9kX2NhbGxzID0gX0NhbGxMaXN0KCkNCiAgICAgICAgZnVuY29weS5tb2NrX2NhbGxzID0gX0NhbGxMaXN0KCkNCiAgICAgICAgbW9jay5yZXNldF9tb2NrKCkNCiAgICAgICAgcmV0ID0gZnVuY29weS5yZXR1cm5fdmFsdWUNCiAgICAgICAgaWYgX2lzX2luc3RhbmNlX21vY2socmV0KSBhbmQgbm90IHJldCBpcyBtb2NrOg0KICAgICAgICAgICAgcmV0LnJlc2V0X21vY2soKQ0KDQogICAgZnVuY29weS5jYWxsZWQgPSBGYWxzZQ0KICAgIGZ1bmNvcHkuY2FsbF9jb3VudCA9IDANCiAgICBmdW5jb3B5LmNhbGxfYXJncyA9IE5vbmUNCiAgICBmdW5jb3B5LmNhbGxfYXJnc19saXN0ID0gX0NhbGxMaXN0KCkNCiAgICBmdW5jb3B5Lm1ldGhvZF9jYWxscyA9IF9DYWxsTGlzdCgpDQogICAgZnVuY29weS5tb2NrX2NhbGxzID0gX0NhbGxMaXN0KCkNCg0KICAgIGZ1bmNvcHkucmV0dXJuX3ZhbHVlID0gbW9jay5yZXR1cm5fdmFsdWUNCiAgICBmdW5jb3B5LnNpZGVfZWZmZWN0ID0gbW9jay5zaWRlX2VmZmVjdA0KICAgIGZ1bmNvcHkuX21vY2tfY2hpbGRyZW4gPSBtb2NrLl9tb2NrX2NoaWxkcmVuDQoNCiAgICBmdW5jb3B5LmFzc2VydF9jYWxsZWRfd2l0aCA9IGFzc2VydF9jYWxsZWRfd2l0aA0KICAgIGZ1bmNvcHkuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGggPSBhc3NlcnRfY2FsbGVkX29uY2Vfd2l0aA0KICAgIGZ1bmNvcHkuYXNzZXJ0X2hhc19jYWxscyA9IGFzc2VydF9oYXNfY2FsbHMNCiAgICBmdW5jb3B5LmFzc2VydF9hbnlfY2FsbCA9IGFzc2VydF9hbnlfY2FsbA0KICAgIGZ1bmNvcHkucmVzZXRfbW9jayA9IHJlc2V0X21vY2sNCg0KICAgIG1vY2suX21vY2tfZGVsZWdhdGUgPSBmdW5jb3B5DQoNCg0KZGVmIF9pc19tYWdpYyhuYW1lKToNCiAgICByZXR1cm4gJ19fJXNfXycgJSBuYW1lWzI6LTJdID09IG5hbWUNCg0KDQpjbGFzcyBfU2VudGluZWxPYmplY3Qob2JqZWN0KToNCiAgICAiQSB1bmlxdWUsIG5hbWVkLCBzZW50aW5lbCBvYmplY3QuIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lKToNCiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQ0KDQogICAgZGVmIF9fcmVwcl9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gJ3NlbnRpbmVsLiVzJyAlIHNlbGYubmFtZQ0KDQoNCmNsYXNzIF9TZW50aW5lbChvYmplY3QpOg0KICAgICIiIkFjY2VzcyBhdHRyaWJ1dGVzIHRvIHJldHVybiBhIG5hbWVkIG9iamVjdCwgdXNhYmxlIGFzIGEgc2VudGluZWwuIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBzZWxmLl9zZW50aW5lbHMgPSB7fQ0KDQogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIG5hbWUpOg0KICAgICAgICBpZiBuYW1lID09ICdfX2Jhc2VzX18nOg0KICAgICAgICAgICAgIyBXaXRob3V0IHRoaXMgaGVscCh1bml0dGVzdC5tb2NrKSByYWlzZXMgYW4gZXhjZXB0aW9uDQogICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcg0KICAgICAgICByZXR1cm4gc2VsZi5fc2VudGluZWxzLnNldGRlZmF1bHQobmFtZSwgX1NlbnRpbmVsT2JqZWN0KG5hbWUpKQ0KDQoNCnNlbnRpbmVsID0gX1NlbnRpbmVsKCkNCg0KREVGQVVMVCA9IHNlbnRpbmVsLkRFRkFVTFQNCl9taXNzaW5nID0gc2VudGluZWwuTUlTU0lORw0KX2RlbGV0ZWQgPSBzZW50aW5lbC5ERUxFVEVEDQoNCg0KZGVmIF9jb3B5KHZhbHVlKToNCiAgICBpZiB0eXBlKHZhbHVlKSBpbiAoZGljdCwgbGlzdCwgdHVwbGUsIHNldCk6DQogICAgICAgIHJldHVybiB0eXBlKHZhbHVlKSh2YWx1ZSkNCiAgICByZXR1cm4gdmFsdWUNCg0KDQpfYWxsb3dlZF9uYW1lcyA9IHNldCgNCiAgICBbDQogICAgICAgICdyZXR1cm5fdmFsdWUnLCAnX21vY2tfcmV0dXJuX3ZhbHVlJywgJ3NpZGVfZWZmZWN0JywNCiAgICAgICAgJ19tb2NrX3NpZGVfZWZmZWN0JywgJ19tb2NrX3BhcmVudCcsICdfbW9ja19uZXdfcGFyZW50JywNCiAgICAgICAgJ19tb2NrX25hbWUnLCAnX21vY2tfbmV3X25hbWUnDQogICAgXQ0KKQ0KDQoNCmRlZiBfZGVsZWdhdGluZ19wcm9wZXJ0eShuYW1lKToNCiAgICBfYWxsb3dlZF9uYW1lcy5hZGQobmFtZSkNCiAgICBfdGhlX25hbWUgPSAnX21vY2tfJyArIG5hbWUNCiAgICBkZWYgX2dldChzZWxmLCBuYW1lPW5hbWUsIF90aGVfbmFtZT1fdGhlX25hbWUpOg0KICAgICAgICBzaWcgPSBzZWxmLl9tb2NrX2RlbGVnYXRlDQogICAgICAgIGlmIHNpZyBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZiwgX3RoZV9uYW1lKQ0KICAgICAgICByZXR1cm4gZ2V0YXR0cihzaWcsIG5hbWUpDQogICAgZGVmIF9zZXQoc2VsZiwgdmFsdWUsIG5hbWU9bmFtZSwgX3RoZV9uYW1lPV90aGVfbmFtZSk6DQogICAgICAgIHNpZyA9IHNlbGYuX21vY2tfZGVsZWdhdGUNCiAgICAgICAgaWYgc2lnIGlzIE5vbmU6DQogICAgICAgICAgICBzZWxmLl9fZGljdF9fW190aGVfbmFtZV0gPSB2YWx1ZQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2V0YXR0cihzaWcsIG5hbWUsIHZhbHVlKQ0KDQogICAgcmV0dXJuIHByb3BlcnR5KF9nZXQsIF9zZXQpDQoNCg0KDQpjbGFzcyBfQ2FsbExpc3QobGlzdCk6DQoNCiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIHZhbHVlKToNCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodmFsdWUsIGxpc3QpOg0KICAgICAgICAgICAgcmV0dXJuIGxpc3QuX19jb250YWluc19fKHNlbGYsIHZhbHVlKQ0KICAgICAgICBsZW5fdmFsdWUgPSBsZW4odmFsdWUpDQogICAgICAgIGxlbl9zZWxmID0gbGVuKHNlbGYpDQogICAgICAgIGlmIGxlbl92YWx1ZSA+IGxlbl9zZWxmOg0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuX3NlbGYgLSBsZW5fdmFsdWUgKyAxKToNCiAgICAgICAgICAgIHN1Yl9saXN0ID0gc2VsZltpOmkrbGVuX3ZhbHVlXQ0KICAgICAgICAgICAgaWYgc3ViX2xpc3QgPT0gdmFsdWU6DQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICBkZWYgX19yZXByX18oc2VsZik6DQogICAgICAgIHJldHVybiBwcHJpbnQucGZvcm1hdChsaXN0KHNlbGYpKQ0KDQoNCmRlZiBfY2hlY2tfYW5kX3NldF9wYXJlbnQocGFyZW50LCB2YWx1ZSwgbmFtZSwgbmV3X25hbWUpOg0KICAgIGlmIG5vdCBfaXNfaW5zdGFuY2VfbW9jayh2YWx1ZSk6DQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIGlmICgodmFsdWUuX21vY2tfbmFtZSBvciB2YWx1ZS5fbW9ja19uZXdfbmFtZSkgb3INCiAgICAgICAgKHZhbHVlLl9tb2NrX3BhcmVudCBpcyBub3QgTm9uZSkgb3INCiAgICAgICAgKHZhbHVlLl9tb2NrX25ld19wYXJlbnQgaXMgbm90IE5vbmUpKToNCiAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICBfcGFyZW50ID0gcGFyZW50DQogICAgd2hpbGUgX3BhcmVudCBpcyBub3QgTm9uZToNCiAgICAgICAgIyBzZXR0aW5nIGEgbW9jayAodmFsdWUpIGFzIGEgY2hpbGQgb3IgcmV0dXJuIHZhbHVlIG9mIGl0c2VsZg0KICAgICAgICAjIHNob3VsZCBub3QgbW9kaWZ5IHRoZSBtb2NrDQogICAgICAgIGlmIF9wYXJlbnQgaXMgdmFsdWU6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgX3BhcmVudCA9IF9wYXJlbnQuX21vY2tfbmV3X3BhcmVudA0KDQogICAgaWYgbmV3X25hbWU6DQogICAgICAgIHZhbHVlLl9tb2NrX25ld19wYXJlbnQgPSBwYXJlbnQNCiAgICAgICAgdmFsdWUuX21vY2tfbmV3X25hbWUgPSBuZXdfbmFtZQ0KICAgIGlmIG5hbWU6DQogICAgICAgIHZhbHVlLl9tb2NrX3BhcmVudCA9IHBhcmVudA0KICAgICAgICB2YWx1ZS5fbW9ja19uYW1lID0gbmFtZQ0KICAgIHJldHVybiBUcnVlDQoNCg0KDQpjbGFzcyBCYXNlKG9iamVjdCk6DQogICAgX21vY2tfcmV0dXJuX3ZhbHVlID0gREVGQVVMVA0KICAgIF9tb2NrX3NpZGVfZWZmZWN0ID0gTm9uZQ0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICBwYXNzDQoNCg0KDQpjbGFzcyBOb25DYWxsYWJsZU1vY2soQmFzZSk6DQogICAgIiIiQSBub24tY2FsbGFibGUgdmVyc2lvbiBvZiBgTW9ja2AiIiINCg0KICAgIGRlZiBfX25ld19fKGNscywgKmFyZ3MsICoqa3cpOg0KICAgICAgICAjIGV2ZXJ5IGluc3RhbmNlIGhhcyBpdHMgb3duIGNsYXNzDQogICAgICAgICMgc28gd2UgY2FuIGNyZWF0ZSBtYWdpYyBtZXRob2RzIG9uIHRoZQ0KICAgICAgICAjIGNsYXNzIHdpdGhvdXQgc3RvbXBpbmcgb24gb3RoZXIgbW9ja3MNCiAgICAgICAgbmV3ID0gdHlwZShjbHMuX19uYW1lX18sIChjbHMsKSwgeydfX2RvY19fJzogY2xzLl9fZG9jX199KQ0KICAgICAgICBpbnN0YW5jZSA9IG9iamVjdC5fX25ld19fKG5ldykNCiAgICAgICAgcmV0dXJuIGluc3RhbmNlDQoNCg0KICAgIGRlZiBfX2luaXRfXygNCiAgICAgICAgICAgIHNlbGYsIHNwZWM9Tm9uZSwgd3JhcHM9Tm9uZSwgbmFtZT1Ob25lLCBzcGVjX3NldD1Ob25lLA0KICAgICAgICAgICAgcGFyZW50PU5vbmUsIF9zcGVjX3N0YXRlPU5vbmUsIF9uZXdfbmFtZT0nJywgX25ld19wYXJlbnQ9Tm9uZSwNCiAgICAgICAgICAgICoqa3dhcmdzDQogICAgICAgICk6DQogICAgICAgIGlmIF9uZXdfcGFyZW50IGlzIE5vbmU6DQogICAgICAgICAgICBfbmV3X3BhcmVudCA9IHBhcmVudA0KDQogICAgICAgIF9fZGljdF9fID0gc2VsZi5fX2RpY3RfXw0KICAgICAgICBfX2RpY3RfX1snX21vY2tfcGFyZW50J10gPSBwYXJlbnQNCiAgICAgICAgX19kaWN0X19bJ19tb2NrX25hbWUnXSA9IG5hbWUNCiAgICAgICAgX19kaWN0X19bJ19tb2NrX25ld19uYW1lJ10gPSBfbmV3X25hbWUNCiAgICAgICAgX19kaWN0X19bJ19tb2NrX25ld19wYXJlbnQnXSA9IF9uZXdfcGFyZW50DQoNCiAgICAgICAgaWYgc3BlY19zZXQgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBzcGVjID0gc3BlY19zZXQNCiAgICAgICAgICAgIHNwZWNfc2V0ID0gVHJ1ZQ0KDQogICAgICAgIHNlbGYuX21vY2tfYWRkX3NwZWMoc3BlYywgc3BlY19zZXQpDQoNCiAgICAgICAgX19kaWN0X19bJ19tb2NrX2NoaWxkcmVuJ10gPSB7fQ0KICAgICAgICBfX2RpY3RfX1snX21vY2tfd3JhcHMnXSA9IHdyYXBzDQogICAgICAgIF9fZGljdF9fWydfbW9ja19kZWxlZ2F0ZSddID0gTm9uZQ0KDQogICAgICAgIF9fZGljdF9fWydfbW9ja19jYWxsZWQnXSA9IEZhbHNlDQogICAgICAgIF9fZGljdF9fWydfbW9ja19jYWxsX2FyZ3MnXSA9IE5vbmUNCiAgICAgICAgX19kaWN0X19bJ19tb2NrX2NhbGxfY291bnQnXSA9IDANCiAgICAgICAgX19kaWN0X19bJ19tb2NrX2NhbGxfYXJnc19saXN0J10gPSBfQ2FsbExpc3QoKQ0KICAgICAgICBfX2RpY3RfX1snX21vY2tfbW9ja19jYWxscyddID0gX0NhbGxMaXN0KCkNCg0KICAgICAgICBfX2RpY3RfX1snbWV0aG9kX2NhbGxzJ10gPSBfQ2FsbExpc3QoKQ0KDQogICAgICAgIGlmIGt3YXJnczoNCiAgICAgICAgICAgIHNlbGYuY29uZmlndXJlX21vY2soKiprd2FyZ3MpDQoNCiAgICAgICAgX3NhZmVfc3VwZXIoTm9uQ2FsbGFibGVNb2NrLCBzZWxmKS5fX2luaXRfXygNCiAgICAgICAgICAgIHNwZWMsIHdyYXBzLCBuYW1lLCBzcGVjX3NldCwgcGFyZW50LA0KICAgICAgICAgICAgX3NwZWNfc3RhdGUNCiAgICAgICAgKQ0KDQoNCiAgICBkZWYgYXR0YWNoX21vY2soc2VsZiwgbW9jaywgYXR0cmlidXRlKToNCiAgICAgICAgIiIiDQogICAgICAgIEF0dGFjaCBhIG1vY2sgYXMgYW4gYXR0cmlidXRlIG9mIHRoaXMgb25lLCByZXBsYWNpbmcgaXRzIG5hbWUgYW5kDQogICAgICAgIHBhcmVudC4gQ2FsbHMgdG8gdGhlIGF0dGFjaGVkIG1vY2sgd2lsbCBiZSByZWNvcmRlZCBpbiB0aGUNCiAgICAgICAgYG1ldGhvZF9jYWxsc2AgYW5kIGBtb2NrX2NhbGxzYCBhdHRyaWJ1dGVzIG9mIHRoaXMgb25lLiIiIg0KICAgICAgICBtb2NrLl9tb2NrX3BhcmVudCA9IE5vbmUNCiAgICAgICAgbW9jay5fbW9ja19uZXdfcGFyZW50ID0gTm9uZQ0KICAgICAgICBtb2NrLl9tb2NrX25hbWUgPSAnJw0KICAgICAgICBtb2NrLl9tb2NrX25ld19uYW1lID0gTm9uZQ0KDQogICAgICAgIHNldGF0dHIoc2VsZiwgYXR0cmlidXRlLCBtb2NrKQ0KDQoNCiAgICBkZWYgbW9ja19hZGRfc3BlYyhzZWxmLCBzcGVjLCBzcGVjX3NldD1GYWxzZSk6DQogICAgICAgICIiIkFkZCBhIHNwZWMgdG8gYSBtb2NrLiBgc3BlY2AgY2FuIGVpdGhlciBiZSBhbiBvYmplY3Qgb3IgYQ0KICAgICAgICBsaXN0IG9mIHN0cmluZ3MuIE9ubHkgYXR0cmlidXRlcyBvbiB0aGUgYHNwZWNgIGNhbiBiZSBmZXRjaGVkIGFzDQogICAgICAgIGF0dHJpYnV0ZXMgZnJvbSB0aGUgbW9jay4NCg0KICAgICAgICBJZiBgc3BlY19zZXRgIGlzIFRydWUgdGhlbiBvbmx5IGF0dHJpYnV0ZXMgb24gdGhlIHNwZWMgY2FuIGJlIHNldC4iIiINCiAgICAgICAgc2VsZi5fbW9ja19hZGRfc3BlYyhzcGVjLCBzcGVjX3NldCkNCg0KDQogICAgZGVmIF9tb2NrX2FkZF9zcGVjKHNlbGYsIHNwZWMsIHNwZWNfc2V0KToNCiAgICAgICAgX3NwZWNfY2xhc3MgPSBOb25lDQoNCiAgICAgICAgaWYgc3BlYyBpcyBub3QgTm9uZSBhbmQgbm90IF9pc19saXN0KHNwZWMpOg0KICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShzcGVjLCB0eXBlKToNCiAgICAgICAgICAgICAgICBfc3BlY19jbGFzcyA9IHNwZWMNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgX3NwZWNfY2xhc3MgPSBfZ2V0X2NsYXNzKHNwZWMpDQoNCiAgICAgICAgICAgIHNwZWMgPSBkaXIoc3BlYykNCg0KICAgICAgICBfX2RpY3RfXyA9IHNlbGYuX19kaWN0X18NCiAgICAgICAgX19kaWN0X19bJ19zcGVjX2NsYXNzJ10gPSBfc3BlY19jbGFzcw0KICAgICAgICBfX2RpY3RfX1snX3NwZWNfc2V0J10gPSBzcGVjX3NldA0KICAgICAgICBfX2RpY3RfX1snX21vY2tfbWV0aG9kcyddID0gc3BlYw0KDQoNCiAgICBkZWYgX19nZXRfcmV0dXJuX3ZhbHVlKHNlbGYpOg0KICAgICAgICByZXQgPSBzZWxmLl9tb2NrX3JldHVybl92YWx1ZQ0KICAgICAgICBpZiBzZWxmLl9tb2NrX2RlbGVnYXRlIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgcmV0ID0gc2VsZi5fbW9ja19kZWxlZ2F0ZS5yZXR1cm5fdmFsdWUNCg0KICAgICAgICBpZiByZXQgaXMgREVGQVVMVDoNCiAgICAgICAgICAgIHJldCA9IHNlbGYuX2dldF9jaGlsZF9tb2NrKA0KICAgICAgICAgICAgICAgIF9uZXdfcGFyZW50PXNlbGYsIF9uZXdfbmFtZT0nKCknDQogICAgICAgICAgICApDQogICAgICAgICAgICBzZWxmLnJldHVybl92YWx1ZSA9IHJldA0KICAgICAgICByZXR1cm4gcmV0DQoNCg0KICAgIGRlZiBfX3NldF9yZXR1cm5fdmFsdWUoc2VsZiwgdmFsdWUpOg0KICAgICAgICBpZiBzZWxmLl9tb2NrX2RlbGVnYXRlIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgc2VsZi5fbW9ja19kZWxlZ2F0ZS5yZXR1cm5fdmFsdWUgPSB2YWx1ZQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5fbW9ja19yZXR1cm5fdmFsdWUgPSB2YWx1ZQ0KICAgICAgICAgICAgX2NoZWNrX2FuZF9zZXRfcGFyZW50KHNlbGYsIHZhbHVlLCBOb25lLCAnKCknKQ0KDQogICAgX19yZXR1cm5fdmFsdWVfZG9jID0gIlRoZSB2YWx1ZSB0byBiZSByZXR1cm5lZCB3aGVuIHRoZSBtb2NrIGlzIGNhbGxlZC4iDQogICAgcmV0dXJuX3ZhbHVlID0gcHJvcGVydHkoX19nZXRfcmV0dXJuX3ZhbHVlLCBfX3NldF9yZXR1cm5fdmFsdWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX19yZXR1cm5fdmFsdWVfZG9jKQ0KDQoNCiAgICBAcHJvcGVydHkNCiAgICBkZWYgX19jbGFzc19fKHNlbGYpOg0KICAgICAgICBpZiBzZWxmLl9zcGVjX2NsYXNzIGlzIE5vbmU6DQogICAgICAgICAgICByZXR1cm4gdHlwZShzZWxmKQ0KICAgICAgICByZXR1cm4gc2VsZi5fc3BlY19jbGFzcw0KDQogICAgY2FsbGVkID0gX2RlbGVnYXRpbmdfcHJvcGVydHkoJ2NhbGxlZCcpDQogICAgY2FsbF9jb3VudCA9IF9kZWxlZ2F0aW5nX3Byb3BlcnR5KCdjYWxsX2NvdW50JykNCiAgICBjYWxsX2FyZ3MgPSBfZGVsZWdhdGluZ19wcm9wZXJ0eSgnY2FsbF9hcmdzJykNCiAgICBjYWxsX2FyZ3NfbGlzdCA9IF9kZWxlZ2F0aW5nX3Byb3BlcnR5KCdjYWxsX2FyZ3NfbGlzdCcpDQogICAgbW9ja19jYWxscyA9IF9kZWxlZ2F0aW5nX3Byb3BlcnR5KCdtb2NrX2NhbGxzJykNCg0KDQogICAgZGVmIF9fZ2V0X3NpZGVfZWZmZWN0KHNlbGYpOg0KICAgICAgICBkZWxlZ2F0ZWQgPSBzZWxmLl9tb2NrX2RlbGVnYXRlDQogICAgICAgIGlmIGRlbGVnYXRlZCBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIHNlbGYuX21vY2tfc2lkZV9lZmZlY3QNCiAgICAgICAgcmV0dXJuIGRlbGVnYXRlZC5zaWRlX2VmZmVjdA0KDQogICAgZGVmIF9fc2V0X3NpZGVfZWZmZWN0KHNlbGYsIHZhbHVlKToNCiAgICAgICAgdmFsdWUgPSBfdHJ5X2l0ZXIodmFsdWUpDQogICAgICAgIGRlbGVnYXRlZCA9IHNlbGYuX21vY2tfZGVsZWdhdGUNCiAgICAgICAgaWYgZGVsZWdhdGVkIGlzIE5vbmU6DQogICAgICAgICAgICBzZWxmLl9tb2NrX3NpZGVfZWZmZWN0ID0gdmFsdWUNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGRlbGVnYXRlZC5zaWRlX2VmZmVjdCA9IHZhbHVlDQoNCiAgICBzaWRlX2VmZmVjdCA9IHByb3BlcnR5KF9fZ2V0X3NpZGVfZWZmZWN0LCBfX3NldF9zaWRlX2VmZmVjdCkNCg0KDQogICAgZGVmIHJlc2V0X21vY2soc2VsZik6DQogICAgICAgICJSZXN0b3JlIHRoZSBtb2NrIG9iamVjdCB0byBpdHMgaW5pdGlhbCBzdGF0ZS4iDQogICAgICAgIHNlbGYuY2FsbGVkID0gRmFsc2UNCiAgICAgICAgc2VsZi5jYWxsX2FyZ3MgPSBOb25lDQogICAgICAgIHNlbGYuY2FsbF9jb3VudCA9IDANCiAgICAgICAgc2VsZi5tb2NrX2NhbGxzID0gX0NhbGxMaXN0KCkNCiAgICAgICAgc2VsZi5jYWxsX2FyZ3NfbGlzdCA9IF9DYWxsTGlzdCgpDQogICAgICAgIHNlbGYubWV0aG9kX2NhbGxzID0gX0NhbGxMaXN0KCkNCg0KICAgICAgICBmb3IgY2hpbGQgaW4gc2VsZi5fbW9ja19jaGlsZHJlbi52YWx1ZXMoKToNCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY2hpbGQsIF9TcGVjU3RhdGUpOg0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBjaGlsZC5yZXNldF9tb2NrKCkNCg0KICAgICAgICByZXQgPSBzZWxmLl9tb2NrX3JldHVybl92YWx1ZQ0KICAgICAgICBpZiBfaXNfaW5zdGFuY2VfbW9jayhyZXQpIGFuZCByZXQgaXMgbm90IHNlbGY6DQogICAgICAgICAgICByZXQucmVzZXRfbW9jaygpDQoNCg0KICAgIGRlZiBjb25maWd1cmVfbW9jayhzZWxmLCAqKmt3YXJncyk6DQogICAgICAgICIiIlNldCBhdHRyaWJ1dGVzIG9uIHRoZSBtb2NrIHRocm91Z2gga2V5d29yZCBhcmd1bWVudHMuDQoNCiAgICAgICAgQXR0cmlidXRlcyBwbHVzIHJldHVybiB2YWx1ZXMgYW5kIHNpZGUgZWZmZWN0cyBjYW4gYmUgc2V0IG9uIGNoaWxkDQogICAgICAgIG1vY2tzIHVzaW5nIHN0YW5kYXJkIGRvdCBub3RhdGlvbiBhbmQgdW5wYWNraW5nIGEgZGljdGlvbmFyeSBpbiB0aGUNCiAgICAgICAgbWV0aG9kIGNhbGw6DQoNCiAgICAgICAgPj4+IGF0dHJzID0geydtZXRob2QucmV0dXJuX3ZhbHVlJzogMywgJ290aGVyLnNpZGVfZWZmZWN0JzogS2V5RXJyb3J9DQogICAgICAgID4+PiBtb2NrLmNvbmZpZ3VyZV9tb2NrKCoqYXR0cnMpIiIiDQogICAgICAgIGZvciBhcmcsIHZhbCBpbiBzb3J0ZWQoa3dhcmdzLml0ZW1zKCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyB3ZSBzb3J0IG9uIHRoZSBudW1iZXIgb2YgZG90cyBzbyB0aGF0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBhdHRyaWJ1dGVzIGFyZSBzZXQgYmVmb3JlIHdlIHNldCBhdHRyaWJ1dGVzIG9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBhdHRyaWJ1dGVzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PWxhbWJkYSBlbnRyeTogZW50cnlbMF0uY291bnQoJy4nKSk6DQogICAgICAgICAgICBhcmdzID0gYXJnLnNwbGl0KCcuJykNCiAgICAgICAgICAgIGZpbmFsID0gYXJncy5wb3AoKQ0KICAgICAgICAgICAgb2JqID0gc2VsZg0KICAgICAgICAgICAgZm9yIGVudHJ5IGluIGFyZ3M6DQogICAgICAgICAgICAgICAgb2JqID0gZ2V0YXR0cihvYmosIGVudHJ5KQ0KICAgICAgICAgICAgc2V0YXR0cihvYmosIGZpbmFsLCB2YWwpDQoNCg0KICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBuYW1lKToNCiAgICAgICAgaWYgbmFtZSA9PSAnX21vY2tfbWV0aG9kcyc6DQogICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihuYW1lKQ0KICAgICAgICBlbGlmIHNlbGYuX21vY2tfbWV0aG9kcyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIGlmIG5hbWUgbm90IGluIHNlbGYuX21vY2tfbWV0aG9kcyBvciBuYW1lIGluIF9hbGxfbWFnaWNzOg0KICAgICAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKCJNb2NrIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICVyIiAlIG5hbWUpDQogICAgICAgIGVsaWYgX2lzX21hZ2ljKG5hbWUpOg0KICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IobmFtZSkNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLl9tb2NrX2NoaWxkcmVuLmdldChuYW1lKQ0KICAgICAgICBpZiByZXN1bHQgaXMgX2RlbGV0ZWQ6DQogICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihuYW1lKQ0KICAgICAgICBlbGlmIHJlc3VsdCBpcyBOb25lOg0KICAgICAgICAgICAgd3JhcHMgPSBOb25lDQogICAgICAgICAgICBpZiBzZWxmLl9tb2NrX3dyYXBzIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICMgWFhYWCBzaG91bGQgd2UgZ2V0IHRoZSBhdHRyaWJ1dGUgd2l0aG91dCB0cmlnZ2VyaW5nIGNvZGUNCiAgICAgICAgICAgICAgICAjIGV4ZWN1dGlvbj8NCiAgICAgICAgICAgICAgICB3cmFwcyA9IGdldGF0dHIoc2VsZi5fbW9ja193cmFwcywgbmFtZSkNCg0KICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5fZ2V0X2NoaWxkX21vY2soDQogICAgICAgICAgICAgICAgcGFyZW50PXNlbGYsIG5hbWU9bmFtZSwgd3JhcHM9d3JhcHMsIF9uZXdfbmFtZT1uYW1lLA0KICAgICAgICAgICAgICAgIF9uZXdfcGFyZW50PXNlbGYNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIHNlbGYuX21vY2tfY2hpbGRyZW5bbmFtZV0gID0gcmVzdWx0DQoNCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHJlc3VsdCwgX1NwZWNTdGF0ZSk6DQogICAgICAgICAgICByZXN1bHQgPSBjcmVhdGVfYXV0b3NwZWMoDQogICAgICAgICAgICAgICAgcmVzdWx0LnNwZWMsIHJlc3VsdC5zcGVjX3NldCwgcmVzdWx0Lmluc3RhbmNlLA0KICAgICAgICAgICAgICAgIHJlc3VsdC5wYXJlbnQsIHJlc3VsdC5uYW1lDQogICAgICAgICAgICApDQogICAgICAgICAgICBzZWxmLl9tb2NrX2NoaWxkcmVuW25hbWVdICA9IHJlc3VsdA0KDQogICAgICAgIHJldHVybiByZXN1bHQNCg0KDQogICAgZGVmIF9fcmVwcl9fKHNlbGYpOg0KICAgICAgICBfbmFtZV9saXN0ID0gW3NlbGYuX21vY2tfbmV3X25hbWVdDQogICAgICAgIF9wYXJlbnQgPSBzZWxmLl9tb2NrX25ld19wYXJlbnQNCiAgICAgICAgbGFzdCA9IHNlbGYNCg0KICAgICAgICBkb3QgPSAnLicNCiAgICAgICAgaWYgX25hbWVfbGlzdCA9PSBbJygpJ106DQogICAgICAgICAgICBkb3QgPSAnJw0KICAgICAgICBzZWVuID0gc2V0KCkNCiAgICAgICAgd2hpbGUgX3BhcmVudCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIGxhc3QgPSBfcGFyZW50DQoNCiAgICAgICAgICAgIF9uYW1lX2xpc3QuYXBwZW5kKF9wYXJlbnQuX21vY2tfbmV3X25hbWUgKyBkb3QpDQogICAgICAgICAgICBkb3QgPSAnLicNCiAgICAgICAgICAgIGlmIF9wYXJlbnQuX21vY2tfbmV3X25hbWUgPT0gJygpJzoNCiAgICAgICAgICAgICAgICBkb3QgPSAnJw0KDQogICAgICAgICAgICBfcGFyZW50ID0gX3BhcmVudC5fbW9ja19uZXdfcGFyZW50DQoNCiAgICAgICAgICAgICMgdXNlIGlkcyBoZXJlIHNvIGFzIG5vdCB0byBjYWxsIF9faGFzaF9fIG9uIHRoZSBtb2Nrcw0KICAgICAgICAgICAgaWYgaWQoX3BhcmVudCkgaW4gc2VlbjoNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgc2Vlbi5hZGQoaWQoX3BhcmVudCkpDQoNCiAgICAgICAgX25hbWVfbGlzdCA9IGxpc3QocmV2ZXJzZWQoX25hbWVfbGlzdCkpDQogICAgICAgIF9maXJzdCA9IGxhc3QuX21vY2tfbmFtZSBvciAnbW9jaycNCiAgICAgICAgaWYgbGVuKF9uYW1lX2xpc3QpID4gMToNCiAgICAgICAgICAgIGlmIF9uYW1lX2xpc3RbMV0gbm90IGluICgnKCknLCAnKCkuJyk6DQogICAgICAgICAgICAgICAgX2ZpcnN0ICs9ICcuJw0KICAgICAgICBfbmFtZV9saXN0WzBdID0gX2ZpcnN0DQogICAgICAgIG5hbWUgPSAnJy5qb2luKF9uYW1lX2xpc3QpDQoNCiAgICAgICAgbmFtZV9zdHJpbmcgPSAnJw0KICAgICAgICBpZiBuYW1lIG5vdCBpbiAoJ21vY2snLCAnbW9jay4nKToNCiAgICAgICAgICAgIG5hbWVfc3RyaW5nID0gJyBuYW1lPSVyJyAlIG5hbWUNCg0KICAgICAgICBzcGVjX3N0cmluZyA9ICcnDQogICAgICAgIGlmIHNlbGYuX3NwZWNfY2xhc3MgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBzcGVjX3N0cmluZyA9ICcgc3BlYz0lcicNCiAgICAgICAgICAgIGlmIHNlbGYuX3NwZWNfc2V0Og0KICAgICAgICAgICAgICAgIHNwZWNfc3RyaW5nID0gJyBzcGVjX3NldD0lcicNCiAgICAgICAgICAgIHNwZWNfc3RyaW5nID0gc3BlY19zdHJpbmcgJSBzZWxmLl9zcGVjX2NsYXNzLl9fbmFtZV9fDQogICAgICAgIHJldHVybiAiPCVzJXMlcyBpZD0nJXMnPiIgJSAoDQogICAgICAgICAgICB0eXBlKHNlbGYpLl9fbmFtZV9fLA0KICAgICAgICAgICAgbmFtZV9zdHJpbmcsDQogICAgICAgICAgICBzcGVjX3N0cmluZywNCiAgICAgICAgICAgIGlkKHNlbGYpDQogICAgICAgICkNCg0KDQogICAgZGVmIF9fZGlyX18oc2VsZik6DQogICAgICAgICIiIkZpbHRlciB0aGUgb3V0cHV0IG9mIGBkaXIobW9jaylgIHRvIG9ubHkgdXNlZnVsIG1lbWJlcnMuIiIiDQogICAgICAgIGlmIG5vdCBGSUxURVJfRElSOg0KICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5fX2Rpcl9fKHNlbGYpDQoNCiAgICAgICAgZXh0cmFzID0gc2VsZi5fbW9ja19tZXRob2RzIG9yIFtdDQogICAgICAgIGZyb21fdHlwZSA9IGRpcih0eXBlKHNlbGYpKQ0KICAgICAgICBmcm9tX2RpY3QgPSBsaXN0KHNlbGYuX19kaWN0X18pDQoNCiAgICAgICAgZnJvbV90eXBlID0gW2UgZm9yIGUgaW4gZnJvbV90eXBlIGlmIG5vdCBlLnN0YXJ0c3dpdGgoJ18nKV0NCiAgICAgICAgZnJvbV9kaWN0ID0gW2UgZm9yIGUgaW4gZnJvbV9kaWN0IGlmIG5vdCBlLnN0YXJ0c3dpdGgoJ18nKSBvcg0KICAgICAgICAgICAgICAgICAgICAgX2lzX21hZ2ljKGUpXQ0KICAgICAgICByZXR1cm4gc29ydGVkKHNldChleHRyYXMgKyBmcm9tX3R5cGUgKyBmcm9tX2RpY3QgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0KHNlbGYuX21vY2tfY2hpbGRyZW4pKSkNCg0KDQogICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIG5hbWUsIHZhbHVlKToNCiAgICAgICAgaWYgbmFtZSBpbiBfYWxsb3dlZF9uYW1lczoNCiAgICAgICAgICAgICMgcHJvcGVydHkgc2V0dGVycyBnbyB0aHJvdWdoIGhlcmUNCiAgICAgICAgICAgIHJldHVybiBvYmplY3QuX19zZXRhdHRyX18oc2VsZiwgbmFtZSwgdmFsdWUpDQogICAgICAgIGVsaWYgKHNlbGYuX3NwZWNfc2V0IGFuZCBzZWxmLl9tb2NrX21ldGhvZHMgaXMgbm90IE5vbmUgYW5kDQogICAgICAgICAgICBuYW1lIG5vdCBpbiBzZWxmLl9tb2NrX21ldGhvZHMgYW5kDQogICAgICAgICAgICBuYW1lIG5vdCBpbiBzZWxmLl9fZGljdF9fKToNCiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKCJNb2NrIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICclcyciICUgbmFtZSkNCiAgICAgICAgZWxpZiBuYW1lIGluIF91bnN1cHBvcnRlZF9tYWdpY3M6DQogICAgICAgICAgICBtc2cgPSAnQXR0ZW1wdGluZyB0byBzZXQgdW5zdXBwb3J0ZWQgbWFnaWMgbWV0aG9kICVyLicgJSBuYW1lDQogICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihtc2cpDQogICAgICAgIGVsaWYgbmFtZSBpbiBfYWxsX21hZ2ljczoNCiAgICAgICAgICAgIGlmIHNlbGYuX21vY2tfbWV0aG9kcyBpcyBub3QgTm9uZSBhbmQgbmFtZSBub3QgaW4gc2VsZi5fbW9ja19tZXRob2RzOg0KICAgICAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKCJNb2NrIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICclcyciICUgbmFtZSkNCg0KICAgICAgICAgICAgaWYgbm90IF9pc19pbnN0YW5jZV9tb2NrKHZhbHVlKToNCiAgICAgICAgICAgICAgICBzZXRhdHRyKHR5cGUoc2VsZiksIG5hbWUsIF9nZXRfbWV0aG9kKG5hbWUsIHZhbHVlKSkNCiAgICAgICAgICAgICAgICBvcmlnaW5hbCA9IHZhbHVlDQogICAgICAgICAgICAgICAgdmFsdWUgPSBsYW1iZGEgKmFyZ3MsICoqa3c6IG9yaWdpbmFsKHNlbGYsICphcmdzLCAqKmt3KQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAjIG9ubHkgc2V0IF9uZXdfbmFtZSBhbmQgbm90IG5hbWUgc28gdGhhdCBtb2NrX2NhbGxzIGlzIHRyYWNrZWQNCiAgICAgICAgICAgICAgICAjIGJ1dCBub3QgbWV0aG9kIGNhbGxzDQogICAgICAgICAgICAgICAgX2NoZWNrX2FuZF9zZXRfcGFyZW50KHNlbGYsIHZhbHVlLCBOb25lLCBuYW1lKQ0KICAgICAgICAgICAgICAgIHNldGF0dHIodHlwZShzZWxmKSwgbmFtZSwgdmFsdWUpDQogICAgICAgICAgICAgICAgc2VsZi5fbW9ja19jaGlsZHJlbltuYW1lXSA9IHZhbHVlDQogICAgICAgIGVsaWYgbmFtZSA9PSAnX19jbGFzc19fJzoNCiAgICAgICAgICAgIHNlbGYuX3NwZWNfY2xhc3MgPSB2YWx1ZQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBpZiBfY2hlY2tfYW5kX3NldF9wYXJlbnQoc2VsZiwgdmFsdWUsIG5hbWUsIG5hbWUpOg0KICAgICAgICAgICAgICAgIHNlbGYuX21vY2tfY2hpbGRyZW5bbmFtZV0gPSB2YWx1ZQ0KICAgICAgICByZXR1cm4gb2JqZWN0Ll9fc2V0YXR0cl9fKHNlbGYsIG5hbWUsIHZhbHVlKQ0KDQoNCiAgICBkZWYgX19kZWxhdHRyX18oc2VsZiwgbmFtZSk6DQogICAgICAgIGlmIG5hbWUgaW4gX2FsbF9tYWdpY3MgYW5kIG5hbWUgaW4gdHlwZShzZWxmKS5fX2RpY3RfXzoNCiAgICAgICAgICAgIGRlbGF0dHIodHlwZShzZWxmKSwgbmFtZSkNCiAgICAgICAgICAgIGlmIG5hbWUgbm90IGluIHNlbGYuX19kaWN0X186DQogICAgICAgICAgICAgICAgIyBmb3IgbWFnaWMgbWV0aG9kcyB0aGF0IGFyZSBzdGlsbCBNYWdpY1Byb3h5IG9iamVjdHMgYW5kDQogICAgICAgICAgICAgICAgIyBub3Qgc2V0IG9uIHRoZSBpbnN0YW5jZSBpdHNlbGYNCiAgICAgICAgICAgICAgICByZXR1cm4NCg0KICAgICAgICBpZiBuYW1lIGluIHNlbGYuX19kaWN0X186DQogICAgICAgICAgICBvYmplY3QuX19kZWxhdHRyX18oc2VsZiwgbmFtZSkNCg0KICAgICAgICBvYmogPSBzZWxmLl9tb2NrX2NoaWxkcmVuLmdldChuYW1lLCBfbWlzc2luZykNCiAgICAgICAgaWYgb2JqIGlzIF9kZWxldGVkOg0KICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IobmFtZSkNCiAgICAgICAgaWYgb2JqIGlzIG5vdCBfbWlzc2luZzoNCiAgICAgICAgICAgIGRlbCBzZWxmLl9tb2NrX2NoaWxkcmVuW25hbWVdDQogICAgICAgIHNlbGYuX21vY2tfY2hpbGRyZW5bbmFtZV0gPSBfZGVsZXRlZA0KDQoNCg0KICAgIGRlZiBfZm9ybWF0X21vY2tfY2FsbF9zaWduYXR1cmUoc2VsZiwgYXJncywga3dhcmdzKToNCiAgICAgICAgbmFtZSA9IHNlbGYuX21vY2tfbmFtZSBvciAnbW9jaycNCiAgICAgICAgcmV0dXJuIF9mb3JtYXRfY2FsbF9zaWduYXR1cmUobmFtZSwgYXJncywga3dhcmdzKQ0KDQoNCiAgICBkZWYgX2Zvcm1hdF9tb2NrX2ZhaWx1cmVfbWVzc2FnZShzZWxmLCBhcmdzLCBrd2FyZ3MpOg0KICAgICAgICBtZXNzYWdlID0gJ0V4cGVjdGVkIGNhbGw6ICVzXG5BY3R1YWwgY2FsbDogJXMnDQogICAgICAgIGV4cGVjdGVkX3N0cmluZyA9IHNlbGYuX2Zvcm1hdF9tb2NrX2NhbGxfc2lnbmF0dXJlKGFyZ3MsIGt3YXJncykNCiAgICAgICAgY2FsbF9hcmdzID0gc2VsZi5jYWxsX2FyZ3MNCiAgICAgICAgaWYgbGVuKGNhbGxfYXJncykgPT0gMzoNCiAgICAgICAgICAgIGNhbGxfYXJncyA9IGNhbGxfYXJnc1sxOl0NCiAgICAgICAgYWN0dWFsX3N0cmluZyA9IHNlbGYuX2Zvcm1hdF9tb2NrX2NhbGxfc2lnbmF0dXJlKCpjYWxsX2FyZ3MpDQogICAgICAgIHJldHVybiBtZXNzYWdlICUgKGV4cGVjdGVkX3N0cmluZywgYWN0dWFsX3N0cmluZykNCg0KDQogICAgZGVmIGFzc2VydF9jYWxsZWRfd2l0aChfbW9ja19zZWxmLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAiIiJhc3NlcnQgdGhhdCB0aGUgbW9jayB3YXMgY2FsbGVkIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuDQoNCiAgICAgICAgUmFpc2VzIGFuIEFzc2VydGlvbkVycm9yIGlmIHRoZSBhcmdzIGFuZCBrZXl3b3JkIGFyZ3MgcGFzc2VkIGluIGFyZQ0KICAgICAgICBkaWZmZXJlbnQgdG8gdGhlIGxhc3QgY2FsbCB0byB0aGUgbW9jay4iIiINCiAgICAgICAgc2VsZiA9IF9tb2NrX3NlbGYNCiAgICAgICAgaWYgc2VsZi5jYWxsX2FyZ3MgaXMgTm9uZToNCiAgICAgICAgICAgIGV4cGVjdGVkID0gc2VsZi5fZm9ybWF0X21vY2tfY2FsbF9zaWduYXR1cmUoYXJncywga3dhcmdzKQ0KICAgICAgICAgICAgcmFpc2UgQXNzZXJ0aW9uRXJyb3IoJ0V4cGVjdGVkIGNhbGw6ICVzXG5Ob3QgY2FsbGVkJyAlIChleHBlY3RlZCwpKQ0KDQogICAgICAgIGlmIHNlbGYuY2FsbF9hcmdzICE9IChhcmdzLCBrd2FyZ3MpOg0KICAgICAgICAgICAgbXNnID0gc2VsZi5fZm9ybWF0X21vY2tfZmFpbHVyZV9tZXNzYWdlKGFyZ3MsIGt3YXJncykNCiAgICAgICAgICAgIHJhaXNlIEFzc2VydGlvbkVycm9yKG1zZykNCg0KDQogICAgZGVmIGFzc2VydF9jYWxsZWRfb25jZV93aXRoKF9tb2NrX3NlbGYsICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICIiImFzc2VydCB0aGF0IHRoZSBtb2NrIHdhcyBjYWxsZWQgZXhhY3RseSBvbmNlIGFuZCB3aXRoIHRoZSBzcGVjaWZpZWQNCiAgICAgICAgYXJndW1lbnRzLiIiIg0KICAgICAgICBzZWxmID0gX21vY2tfc2VsZg0KICAgICAgICBpZiBub3Qgc2VsZi5jYWxsX2NvdW50ID09IDE6DQogICAgICAgICAgICBtc2cgPSAoIkV4cGVjdGVkIHRvIGJlIGNhbGxlZCBvbmNlLiBDYWxsZWQgJXMgdGltZXMuIiAlDQogICAgICAgICAgICAgICAgICAgc2VsZi5jYWxsX2NvdW50KQ0KICAgICAgICAgICAgcmFpc2UgQXNzZXJ0aW9uRXJyb3IobXNnKQ0KICAgICAgICByZXR1cm4gc2VsZi5hc3NlcnRfY2FsbGVkX3dpdGgoKmFyZ3MsICoqa3dhcmdzKQ0KDQoNCiAgICBkZWYgYXNzZXJ0X2hhc19jYWxscyhzZWxmLCBjYWxscywgYW55X29yZGVyPUZhbHNlKToNCiAgICAgICAgIiIiYXNzZXJ0IHRoZSBtb2NrIGhhcyBiZWVuIGNhbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgY2FsbHMuDQogICAgICAgIFRoZSBgbW9ja19jYWxsc2AgbGlzdCBpcyBjaGVja2VkIGZvciB0aGUgY2FsbHMuDQoNCiAgICAgICAgSWYgYGFueV9vcmRlcmAgaXMgRmFsc2UgKHRoZSBkZWZhdWx0KSB0aGVuIHRoZSBjYWxscyBtdXN0IGJlDQogICAgICAgIHNlcXVlbnRpYWwuIFRoZXJlIGNhbiBiZSBleHRyYSBjYWxscyBiZWZvcmUgb3IgYWZ0ZXIgdGhlDQogICAgICAgIHNwZWNpZmllZCBjYWxscy4NCg0KICAgICAgICBJZiBgYW55X29yZGVyYCBpcyBUcnVlIHRoZW4gdGhlIGNhbGxzIGNhbiBiZSBpbiBhbnkgb3JkZXIsIGJ1dA0KICAgICAgICB0aGV5IG11c3QgYWxsIGFwcGVhciBpbiBgbW9ja19jYWxsc2AuIiIiDQogICAgICAgIGlmIG5vdCBhbnlfb3JkZXI6DQogICAgICAgICAgICBpZiBjYWxscyBub3QgaW4gc2VsZi5tb2NrX2NhbGxzOg0KICAgICAgICAgICAgICAgIHJhaXNlIEFzc2VydGlvbkVycm9yKA0KICAgICAgICAgICAgICAgICAgICAnQ2FsbHMgbm90IGZvdW5kLlxuRXhwZWN0ZWQ6ICVyXG4nDQogICAgICAgICAgICAgICAgICAgICdBY3R1YWw6ICVyJyAlIChjYWxscywgc2VsZi5tb2NrX2NhbGxzKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgIGFsbF9jYWxscyA9IGxpc3Qoc2VsZi5tb2NrX2NhbGxzKQ0KDQogICAgICAgIG5vdF9mb3VuZCA9IFtdDQogICAgICAgIGZvciBrYWxsIGluIGNhbGxzOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGFsbF9jYWxscy5yZW1vdmUoa2FsbCkNCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgICAgIG5vdF9mb3VuZC5hcHBlbmQoa2FsbCkNCiAgICAgICAgaWYgbm90X2ZvdW5kOg0KICAgICAgICAgICAgcmFpc2UgQXNzZXJ0aW9uRXJyb3IoDQogICAgICAgICAgICAgICAgJyVyIG5vdCBhbGwgZm91bmQgaW4gY2FsbCBsaXN0JyAlICh0dXBsZShub3RfZm91bmQpLCkNCiAgICAgICAgICAgICkNCg0KDQogICAgZGVmIGFzc2VydF9hbnlfY2FsbChzZWxmLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAiIiJhc3NlcnQgdGhlIG1vY2sgaGFzIGJlZW4gY2FsbGVkIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuDQoNCiAgICAgICAgVGhlIGFzc2VydCBwYXNzZXMgaWYgdGhlIG1vY2sgaGFzICpldmVyKiBiZWVuIGNhbGxlZCwgdW5saWtlDQogICAgICAgIGBhc3NlcnRfY2FsbGVkX3dpdGhgIGFuZCBgYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGhgIHRoYXQgb25seSBwYXNzIGlmDQogICAgICAgIHRoZSBjYWxsIGlzIHRoZSBtb3N0IHJlY2VudCBvbmUuIiIiDQogICAgICAgIGthbGwgPSBjYWxsKCphcmdzLCAqKmt3YXJncykNCiAgICAgICAgaWYga2FsbCBub3QgaW4gc2VsZi5jYWxsX2FyZ3NfbGlzdDoNCiAgICAgICAgICAgIGV4cGVjdGVkX3N0cmluZyA9IHNlbGYuX2Zvcm1hdF9tb2NrX2NhbGxfc2lnbmF0dXJlKGFyZ3MsIGt3YXJncykNCiAgICAgICAgICAgIHJhaXNlIEFzc2VydGlvbkVycm9yKA0KICAgICAgICAgICAgICAgICclcyBjYWxsIG5vdCBmb3VuZCcgJSBleHBlY3RlZF9zdHJpbmcNCiAgICAgICAgICAgICkNCg0KDQogICAgZGVmIF9nZXRfY2hpbGRfbW9jayhzZWxmLCAqKmt3KToNCiAgICAgICAgIiIiQ3JlYXRlIHRoZSBjaGlsZCBtb2NrcyBmb3IgYXR0cmlidXRlcyBhbmQgcmV0dXJuIHZhbHVlLg0KICAgICAgICBCeSBkZWZhdWx0IGNoaWxkIG1vY2tzIHdpbGwgYmUgdGhlIHNhbWUgdHlwZSBhcyB0aGUgcGFyZW50Lg0KICAgICAgICBTdWJjbGFzc2VzIG9mIE1vY2sgbWF5IHdhbnQgdG8gb3ZlcnJpZGUgdGhpcyB0byBjdXN0b21pemUgdGhlIHdheQ0KICAgICAgICBjaGlsZCBtb2NrcyBhcmUgbWFkZS4NCg0KICAgICAgICBGb3Igbm9uLWNhbGxhYmxlIG1vY2tzIHRoZSBjYWxsYWJsZSB2YXJpYW50IHdpbGwgYmUgdXNlZCAocmF0aGVyIHRoYW4NCiAgICAgICAgYW55IGN1c3RvbSBzdWJjbGFzcykuIiIiDQogICAgICAgIF90eXBlID0gdHlwZShzZWxmKQ0KICAgICAgICBpZiBub3QgaXNzdWJjbGFzcyhfdHlwZSwgQ2FsbGFibGVNaXhpbik6DQogICAgICAgICAgICBpZiBpc3N1YmNsYXNzKF90eXBlLCBOb25DYWxsYWJsZU1hZ2ljTW9jayk6DQogICAgICAgICAgICAgICAga2xhc3MgPSBNYWdpY01vY2sNCiAgICAgICAgICAgIGVsaWYgaXNzdWJjbGFzcyhfdHlwZSwgTm9uQ2FsbGFibGVNb2NrKSA6DQogICAgICAgICAgICAgICAga2xhc3MgPSBNb2NrDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBrbGFzcyA9IF90eXBlLl9fbXJvX19bMV0NCiAgICAgICAgcmV0dXJuIGtsYXNzKCoqa3cpDQoNCg0KDQpkZWYgX3RyeV9pdGVyKG9iaik6DQogICAgaWYgb2JqIGlzIE5vbmU6DQogICAgICAgIHJldHVybiBvYmoNCiAgICBpZiBfaXNfZXhjZXB0aW9uKG9iaik6DQogICAgICAgIHJldHVybiBvYmoNCiAgICBpZiBfY2FsbGFibGUob2JqKToNCiAgICAgICAgcmV0dXJuIG9iag0KICAgIHRyeToNCiAgICAgICAgcmV0dXJuIGl0ZXIob2JqKQ0KICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgICMgWFhYWCBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQ0KICAgICAgICAjIGJ1dCB0aGlzIHdpbGwgYmxvdyB1cCBvbiBmaXJzdCBjYWxsIC0gc28gbWF5YmUgd2Ugc2hvdWxkIGZhaWwgZWFybHk/DQogICAgICAgIHJldHVybiBvYmoNCg0KDQoNCmNsYXNzIENhbGxhYmxlTWl4aW4oQmFzZSk6DQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3BlYz1Ob25lLCBzaWRlX2VmZmVjdD1Ob25lLCByZXR1cm5fdmFsdWU9REVGQVVMVCwNCiAgICAgICAgICAgICAgICAgd3JhcHM9Tm9uZSwgbmFtZT1Ob25lLCBzcGVjX3NldD1Ob25lLCBwYXJlbnQ9Tm9uZSwNCiAgICAgICAgICAgICAgICAgX3NwZWNfc3RhdGU9Tm9uZSwgX25ld19uYW1lPScnLCBfbmV3X3BhcmVudD1Ob25lLCAqKmt3YXJncyk6DQogICAgICAgIHNlbGYuX19kaWN0X19bJ19tb2NrX3JldHVybl92YWx1ZSddID0gcmV0dXJuX3ZhbHVlDQoNCiAgICAgICAgX3NhZmVfc3VwZXIoQ2FsbGFibGVNaXhpbiwgc2VsZikuX19pbml0X18oDQogICAgICAgICAgICBzcGVjLCB3cmFwcywgbmFtZSwgc3BlY19zZXQsIHBhcmVudCwNCiAgICAgICAgICAgIF9zcGVjX3N0YXRlLCBfbmV3X25hbWUsIF9uZXdfcGFyZW50LCAqKmt3YXJncw0KICAgICAgICApDQoNCiAgICAgICAgc2VsZi5zaWRlX2VmZmVjdCA9IHNpZGVfZWZmZWN0DQoNCg0KICAgIGRlZiBfbW9ja19jaGVja19zaWcoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgIyBzdHViIG1ldGhvZCB0aGF0IGNhbiBiZSByZXBsYWNlZCB3aXRoIG9uZSB3aXRoIGEgc3BlY2lmaWMgc2lnbmF0dXJlDQogICAgICAgIHBhc3MNCg0KDQogICAgZGVmIF9fY2FsbF9fKF9tb2NrX3NlbGYsICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICMgY2FuJ3QgdXNlIHNlbGYgaW4tY2FzZSBhIGZ1bmN0aW9uIC8gbWV0aG9kIHdlIGFyZSBtb2NraW5nIHVzZXMgc2VsZg0KICAgICAgICAjIGluIHRoZSBzaWduYXR1cmUNCiAgICAgICAgX21vY2tfc2VsZi5fbW9ja19jaGVja19zaWcoKmFyZ3MsICoqa3dhcmdzKQ0KICAgICAgICByZXR1cm4gX21vY2tfc2VsZi5fbW9ja19jYWxsKCphcmdzLCAqKmt3YXJncykNCg0KDQogICAgZGVmIF9tb2NrX2NhbGwoX21vY2tfc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgc2VsZiA9IF9tb2NrX3NlbGYNCiAgICAgICAgc2VsZi5jYWxsZWQgPSBUcnVlDQogICAgICAgIHNlbGYuY2FsbF9jb3VudCArPSAxDQogICAgICAgIHNlbGYuY2FsbF9hcmdzID0gX0NhbGwoKGFyZ3MsIGt3YXJncyksIHR3bz1UcnVlKQ0KICAgICAgICBzZWxmLmNhbGxfYXJnc19saXN0LmFwcGVuZChfQ2FsbCgoYXJncywga3dhcmdzKSwgdHdvPVRydWUpKQ0KDQogICAgICAgIF9uZXdfbmFtZSA9IHNlbGYuX21vY2tfbmV3X25hbWUNCiAgICAgICAgX25ld19wYXJlbnQgPSBzZWxmLl9tb2NrX25ld19wYXJlbnQNCiAgICAgICAgc2VsZi5tb2NrX2NhbGxzLmFwcGVuZChfQ2FsbCgoJycsIGFyZ3MsIGt3YXJncykpKQ0KDQogICAgICAgIHNlZW4gPSBzZXQoKQ0KICAgICAgICBza2lwX25leHRfZG90ID0gX25ld19uYW1lID09ICcoKScNCiAgICAgICAgZG9fbWV0aG9kX2NhbGxzID0gc2VsZi5fbW9ja19wYXJlbnQgaXMgbm90IE5vbmUNCiAgICAgICAgbmFtZSA9IHNlbGYuX21vY2tfbmFtZQ0KICAgICAgICB3aGlsZSBfbmV3X3BhcmVudCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIHRoaXNfbW9ja19jYWxsID0gX0NhbGwoKF9uZXdfbmFtZSwgYXJncywga3dhcmdzKSkNCiAgICAgICAgICAgIGlmIF9uZXdfcGFyZW50Ll9tb2NrX25ld19uYW1lOg0KICAgICAgICAgICAgICAgIGRvdCA9ICcuJw0KICAgICAgICAgICAgICAgIGlmIHNraXBfbmV4dF9kb3Q6DQogICAgICAgICAgICAgICAgICAgIGRvdCA9ICcnDQoNCiAgICAgICAgICAgICAgICBza2lwX25leHRfZG90ID0gRmFsc2UNCiAgICAgICAgICAgICAgICBpZiBfbmV3X3BhcmVudC5fbW9ja19uZXdfbmFtZSA9PSAnKCknOg0KICAgICAgICAgICAgICAgICAgICBza2lwX25leHRfZG90ID0gVHJ1ZQ0KDQogICAgICAgICAgICAgICAgX25ld19uYW1lID0gX25ld19wYXJlbnQuX21vY2tfbmV3X25hbWUgKyBkb3QgKyBfbmV3X25hbWUNCg0KICAgICAgICAgICAgaWYgZG9fbWV0aG9kX2NhbGxzOg0KICAgICAgICAgICAgICAgIGlmIF9uZXdfbmFtZSA9PSBuYW1lOg0KICAgICAgICAgICAgICAgICAgICB0aGlzX21ldGhvZF9jYWxsID0gdGhpc19tb2NrX2NhbGwNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICB0aGlzX21ldGhvZF9jYWxsID0gX0NhbGwoKG5hbWUsIGFyZ3MsIGt3YXJncykpDQogICAgICAgICAgICAgICAgX25ld19wYXJlbnQubWV0aG9kX2NhbGxzLmFwcGVuZCh0aGlzX21ldGhvZF9jYWxsKQ0KDQogICAgICAgICAgICAgICAgZG9fbWV0aG9kX2NhbGxzID0gX25ld19wYXJlbnQuX21vY2tfcGFyZW50IGlzIG5vdCBOb25lDQogICAgICAgICAgICAgICAgaWYgZG9fbWV0aG9kX2NhbGxzOg0KICAgICAgICAgICAgICAgICAgICBuYW1lID0gX25ld19wYXJlbnQuX21vY2tfbmFtZSArICcuJyArIG5hbWUNCg0KICAgICAgICAgICAgX25ld19wYXJlbnQubW9ja19jYWxscy5hcHBlbmQodGhpc19tb2NrX2NhbGwpDQogICAgICAgICAgICBfbmV3X3BhcmVudCA9IF9uZXdfcGFyZW50Ll9tb2NrX25ld19wYXJlbnQNCg0KICAgICAgICAgICAgIyB1c2UgaWRzIGhlcmUgc28gYXMgbm90IHRvIGNhbGwgX19oYXNoX18gb24gdGhlIG1vY2tzDQogICAgICAgICAgICBfbmV3X3BhcmVudF9pZCA9IGlkKF9uZXdfcGFyZW50KQ0KICAgICAgICAgICAgaWYgX25ld19wYXJlbnRfaWQgaW4gc2VlbjoNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgc2Vlbi5hZGQoX25ld19wYXJlbnRfaWQpDQoNCiAgICAgICAgcmV0X3ZhbCA9IERFRkFVTFQNCiAgICAgICAgZWZmZWN0ID0gc2VsZi5zaWRlX2VmZmVjdA0KICAgICAgICBpZiBlZmZlY3QgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBpZiBfaXNfZXhjZXB0aW9uKGVmZmVjdCk6DQogICAgICAgICAgICAgICAgcmFpc2UgZWZmZWN0DQoNCiAgICAgICAgICAgIGlmIG5vdCBfY2FsbGFibGUoZWZmZWN0KToNCiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXh0KGVmZmVjdCkNCiAgICAgICAgICAgICAgICBpZiBfaXNfZXhjZXB0aW9uKHJlc3VsdCk6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIHJlc3VsdA0KICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgICAgICAgICAgcmV0X3ZhbCA9IGVmZmVjdCgqYXJncywgKiprd2FyZ3MpDQogICAgICAgICAgICBpZiByZXRfdmFsIGlzIERFRkFVTFQ6DQogICAgICAgICAgICAgICAgcmV0X3ZhbCA9IHNlbGYucmV0dXJuX3ZhbHVlDQoNCiAgICAgICAgaWYgKHNlbGYuX21vY2tfd3JhcHMgaXMgbm90IE5vbmUgYW5kDQogICAgICAgICAgICAgc2VsZi5fbW9ja19yZXR1cm5fdmFsdWUgaXMgREVGQVVMVCk6DQogICAgICAgICAgICByZXR1cm4gc2VsZi5fbW9ja193cmFwcygqYXJncywgKiprd2FyZ3MpDQogICAgICAgIGlmIHJldF92YWwgaXMgREVGQVVMVDoNCiAgICAgICAgICAgIHJldF92YWwgPSBzZWxmLnJldHVybl92YWx1ZQ0KICAgICAgICByZXR1cm4gcmV0X3ZhbA0KDQoNCg0KY2xhc3MgTW9jayhDYWxsYWJsZU1peGluLCBOb25DYWxsYWJsZU1vY2spOg0KICAgICIiIg0KICAgIENyZWF0ZSBhIG5ldyBgTW9ja2Agb2JqZWN0LiBgTW9ja2AgdGFrZXMgc2V2ZXJhbCBvcHRpb25hbCBhcmd1bWVudHMNCiAgICB0aGF0IHNwZWNpZnkgdGhlIGJlaGF2aW91ciBvZiB0aGUgTW9jayBvYmplY3Q6DQoNCiAgICAqIGBzcGVjYDogVGhpcyBjYW4gYmUgZWl0aGVyIGEgbGlzdCBvZiBzdHJpbmdzIG9yIGFuIGV4aXN0aW5nIG9iamVjdCAoYQ0KICAgICAgY2xhc3Mgb3IgaW5zdGFuY2UpIHRoYXQgYWN0cyBhcyB0aGUgc3BlY2lmaWNhdGlvbiBmb3IgdGhlIG1vY2sgb2JqZWN0LiBJZg0KICAgICAgeW91IHBhc3MgaW4gYW4gb2JqZWN0IHRoZW4gYSBsaXN0IG9mIHN0cmluZ3MgaXMgZm9ybWVkIGJ5IGNhbGxpbmcgZGlyIG9uDQogICAgICB0aGUgb2JqZWN0IChleGNsdWRpbmcgdW5zdXBwb3J0ZWQgbWFnaWMgYXR0cmlidXRlcyBhbmQgbWV0aG9kcykuIEFjY2Vzc2luZw0KICAgICAgYW55IGF0dHJpYnV0ZSBub3QgaW4gdGhpcyBsaXN0IHdpbGwgcmFpc2UgYW4gYEF0dHJpYnV0ZUVycm9yYC4NCg0KICAgICAgSWYgYHNwZWNgIGlzIGFuIG9iamVjdCAocmF0aGVyIHRoYW4gYSBsaXN0IG9mIHN0cmluZ3MpIHRoZW4NCiAgICAgIGBtb2NrLl9fY2xhc3NfX2AgcmV0dXJucyB0aGUgY2xhc3Mgb2YgdGhlIHNwZWMgb2JqZWN0LiBUaGlzIGFsbG93cyBtb2Nrcw0KICAgICAgdG8gcGFzcyBgaXNpbnN0YW5jZWAgdGVzdHMuDQoNCiAgICAqIGBzcGVjX3NldGA6IEEgc3RyaWN0ZXIgdmFyaWFudCBvZiBgc3BlY2AuIElmIHVzZWQsIGF0dGVtcHRpbmcgdG8gKnNldCoNCiAgICAgIG9yIGdldCBhbiBhdHRyaWJ1dGUgb24gdGhlIG1vY2sgdGhhdCBpc24ndCBvbiB0aGUgb2JqZWN0IHBhc3NlZCBhcw0KICAgICAgYHNwZWNfc2V0YCB3aWxsIHJhaXNlIGFuIGBBdHRyaWJ1dGVFcnJvcmAuDQoNCiAgICAqIGBzaWRlX2VmZmVjdGA6IEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW5ldmVyIHRoZSBNb2NrIGlzIGNhbGxlZC4gU2VlDQogICAgICB0aGUgYHNpZGVfZWZmZWN0YCBhdHRyaWJ1dGUuIFVzZWZ1bCBmb3IgcmFpc2luZyBleGNlcHRpb25zIG9yDQogICAgICBkeW5hbWljYWxseSBjaGFuZ2luZyByZXR1cm4gdmFsdWVzLiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIHNhbWUNCiAgICAgIGFyZ3VtZW50cyBhcyB0aGUgbW9jaywgYW5kIHVubGVzcyBpdCByZXR1cm5zIGBERUZBVUxUYCwgdGhlIHJldHVybg0KICAgICAgdmFsdWUgb2YgdGhpcyBmdW5jdGlvbiBpcyB1c2VkIGFzIHRoZSByZXR1cm4gdmFsdWUuDQoNCiAgICAgIElmIGBzaWRlX2VmZmVjdGAgaXMgYW4gaXRlcmFibGUgdGhlbiBlYWNoIGNhbGwgdG8gdGhlIG1vY2sgd2lsbCByZXR1cm4NCiAgICAgIHRoZSBuZXh0IHZhbHVlIGZyb20gdGhlIGl0ZXJhYmxlLiBJZiBhbnkgb2YgdGhlIG1lbWJlcnMgb2YgdGhlIGl0ZXJhYmxlDQogICAgICBhcmUgZXhjZXB0aW9ucyB0aGV5IHdpbGwgYmUgcmFpc2VkIGluc3RlYWQgb2YgcmV0dXJuZWQuDQoNCiAgICAgIElmIGBzaWRlX2VmZmVjdGAgaXMgYW4gaXRlcmFibGUgdGhlbiBlYWNoIGNhbGwgdG8gdGhlIG1vY2sgd2lsbCByZXR1cm4NCiAgICAgIHRoZSBuZXh0IHZhbHVlIGZyb20gdGhlIGl0ZXJhYmxlLg0KDQogICAgKiBgcmV0dXJuX3ZhbHVlYDogVGhlIHZhbHVlIHJldHVybmVkIHdoZW4gdGhlIG1vY2sgaXMgY2FsbGVkLiBCeSBkZWZhdWx0DQogICAgICB0aGlzIGlzIGEgbmV3IE1vY2sgKGNyZWF0ZWQgb24gZmlyc3QgYWNjZXNzKS4gU2VlIHRoZQ0KICAgICAgYHJldHVybl92YWx1ZWAgYXR0cmlidXRlLg0KDQogICAgKiBgd3JhcHNgOiBJdGVtIGZvciB0aGUgbW9jayBvYmplY3QgdG8gd3JhcC4gSWYgYHdyYXBzYCBpcyBub3QgTm9uZSB0aGVuDQogICAgICBjYWxsaW5nIHRoZSBNb2NrIHdpbGwgcGFzcyB0aGUgY2FsbCB0aHJvdWdoIHRvIHRoZSB3cmFwcGVkIG9iamVjdA0KICAgICAgKHJldHVybmluZyB0aGUgcmVhbCByZXN1bHQpLiBBdHRyaWJ1dGUgYWNjZXNzIG9uIHRoZSBtb2NrIHdpbGwgcmV0dXJuIGENCiAgICAgIE1vY2sgb2JqZWN0IHRoYXQgd3JhcHMgdGhlIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlIG9mIHRoZSB3cmFwcGVkIG9iamVjdA0KICAgICAgKHNvIGF0dGVtcHRpbmcgdG8gYWNjZXNzIGFuIGF0dHJpYnV0ZSB0aGF0IGRvZXNuJ3QgZXhpc3Qgd2lsbCByYWlzZSBhbg0KICAgICAgYEF0dHJpYnV0ZUVycm9yYCkuDQoNCiAgICAgIElmIHRoZSBtb2NrIGhhcyBhbiBleHBsaWNpdCBgcmV0dXJuX3ZhbHVlYCBzZXQgdGhlbiBjYWxscyBhcmUgbm90IHBhc3NlZA0KICAgICAgdG8gdGhlIHdyYXBwZWQgb2JqZWN0IGFuZCB0aGUgYHJldHVybl92YWx1ZWAgaXMgcmV0dXJuZWQgaW5zdGVhZC4NCg0KICAgICogYG5hbWVgOiBJZiB0aGUgbW9jayBoYXMgYSBuYW1lIHRoZW4gaXQgd2lsbCBiZSB1c2VkIGluIHRoZSByZXByIG9mIHRoZQ0KICAgICAgbW9jay4gVGhpcyBjYW4gYmUgdXNlZnVsIGZvciBkZWJ1Z2dpbmcuIFRoZSBuYW1lIGlzIHByb3BhZ2F0ZWQgdG8gY2hpbGQNCiAgICAgIG1vY2tzLg0KDQogICAgTW9ja3MgY2FuIGFsc28gYmUgY2FsbGVkIHdpdGggYXJiaXRyYXJ5IGtleXdvcmQgYXJndW1lbnRzLiBUaGVzZSB3aWxsIGJlDQogICAgdXNlZCB0byBzZXQgYXR0cmlidXRlcyBvbiB0aGUgbW9jayBhZnRlciBpdCBpcyBjcmVhdGVkLg0KICAgICIiIg0KDQoNCg0KZGVmIF9kb3RfbG9va3VwKHRoaW5nLCBjb21wLCBpbXBvcnRfcGF0aCk6DQogICAgdHJ5Og0KICAgICAgICByZXR1cm4gZ2V0YXR0cih0aGluZywgY29tcCkNCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgIF9faW1wb3J0X18oaW1wb3J0X3BhdGgpDQogICAgICAgIHJldHVybiBnZXRhdHRyKHRoaW5nLCBjb21wKQ0KDQoNCmRlZiBfaW1wb3J0ZXIodGFyZ2V0KToNCiAgICBjb21wb25lbnRzID0gdGFyZ2V0LnNwbGl0KCcuJykNCiAgICBpbXBvcnRfcGF0aCA9IGNvbXBvbmVudHMucG9wKDApDQogICAgdGhpbmcgPSBfX2ltcG9ydF9fKGltcG9ydF9wYXRoKQ0KDQogICAgZm9yIGNvbXAgaW4gY29tcG9uZW50czoNCiAgICAgICAgaW1wb3J0X3BhdGggKz0gIi4lcyIgJSBjb21wDQogICAgICAgIHRoaW5nID0gX2RvdF9sb29rdXAodGhpbmcsIGNvbXAsIGltcG9ydF9wYXRoKQ0KICAgIHJldHVybiB0aGluZw0KDQoNCmRlZiBfaXNfc3RhcnRlZChwYXRjaGVyKToNCiAgICAjIFhYWFggaG9ycmlibGUNCiAgICByZXR1cm4gaGFzYXR0cihwYXRjaGVyLCAnaXNfbG9jYWwnKQ0KDQoNCmNsYXNzIF9wYXRjaChvYmplY3QpOg0KDQogICAgYXR0cmlidXRlX25hbWUgPSBOb25lDQogICAgX2FjdGl2ZV9wYXRjaGVzID0gc2V0KCkNCg0KICAgIGRlZiBfX2luaXRfXygNCiAgICAgICAgICAgIHNlbGYsIGdldHRlciwgYXR0cmlidXRlLCBuZXcsIHNwZWMsIGNyZWF0ZSwNCiAgICAgICAgICAgIHNwZWNfc2V0LCBhdXRvc3BlYywgbmV3X2NhbGxhYmxlLCBrd2FyZ3MNCiAgICAgICAgKToNCiAgICAgICAgaWYgbmV3X2NhbGxhYmxlIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgaWYgbmV3IGlzIG5vdCBERUZBVUxUOg0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoDQogICAgICAgICAgICAgICAgICAgICJDYW5ub3QgdXNlICduZXcnIGFuZCAnbmV3X2NhbGxhYmxlJyB0b2dldGhlciINCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICBpZiBhdXRvc3BlYyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKA0KICAgICAgICAgICAgICAgICAgICAiQ2Fubm90IHVzZSAnYXV0b3NwZWMnIGFuZCAnbmV3X2NhbGxhYmxlJyB0b2dldGhlciINCiAgICAgICAgICAgICAgICApDQoNCiAgICAgICAgc2VsZi5nZXR0ZXIgPSBnZXR0ZXINCiAgICAgICAgc2VsZi5hdHRyaWJ1dGUgPSBhdHRyaWJ1dGUNCiAgICAgICAgc2VsZi5uZXcgPSBuZXcNCiAgICAgICAgc2VsZi5uZXdfY2FsbGFibGUgPSBuZXdfY2FsbGFibGUNCiAgICAgICAgc2VsZi5zcGVjID0gc3BlYw0KICAgICAgICBzZWxmLmNyZWF0ZSA9IGNyZWF0ZQ0KICAgICAgICBzZWxmLmhhc19sb2NhbCA9IEZhbHNlDQogICAgICAgIHNlbGYuc3BlY19zZXQgPSBzcGVjX3NldA0KICAgICAgICBzZWxmLmF1dG9zcGVjID0gYXV0b3NwZWMNCiAgICAgICAgc2VsZi5rd2FyZ3MgPSBrd2FyZ3MNCiAgICAgICAgc2VsZi5hZGRpdGlvbmFsX3BhdGNoZXJzID0gW10NCg0KDQogICAgZGVmIGNvcHkoc2VsZik6DQogICAgICAgIHBhdGNoZXIgPSBfcGF0Y2goDQogICAgICAgICAgICBzZWxmLmdldHRlciwgc2VsZi5hdHRyaWJ1dGUsIHNlbGYubmV3LCBzZWxmLnNwZWMsDQogICAgICAgICAgICBzZWxmLmNyZWF0ZSwgc2VsZi5zcGVjX3NldCwNCiAgICAgICAgICAgIHNlbGYuYXV0b3NwZWMsIHNlbGYubmV3X2NhbGxhYmxlLCBzZWxmLmt3YXJncw0KICAgICAgICApDQogICAgICAgIHBhdGNoZXIuYXR0cmlidXRlX25hbWUgPSBzZWxmLmF0dHJpYnV0ZV9uYW1lDQogICAgICAgIHBhdGNoZXIuYWRkaXRpb25hbF9wYXRjaGVycyA9IFsNCiAgICAgICAgICAgIHAuY29weSgpIGZvciBwIGluIHNlbGYuYWRkaXRpb25hbF9wYXRjaGVycw0KICAgICAgICBdDQogICAgICAgIHJldHVybiBwYXRjaGVyDQoNCg0KICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBmdW5jKToNCiAgICAgICAgaWYgaXNpbnN0YW5jZShmdW5jLCB0eXBlKToNCiAgICAgICAgICAgIHJldHVybiBzZWxmLmRlY29yYXRlX2NsYXNzKGZ1bmMpDQogICAgICAgIHJldHVybiBzZWxmLmRlY29yYXRlX2NhbGxhYmxlKGZ1bmMpDQoNCg0KICAgIGRlZiBkZWNvcmF0ZV9jbGFzcyhzZWxmLCBrbGFzcyk6DQogICAgICAgIGZvciBhdHRyIGluIGRpcihrbGFzcyk6DQogICAgICAgICAgICBpZiBub3QgYXR0ci5zdGFydHN3aXRoKHBhdGNoLlRFU1RfUFJFRklYKToNCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KDQogICAgICAgICAgICBhdHRyX3ZhbHVlID0gZ2V0YXR0cihrbGFzcywgYXR0cikNCiAgICAgICAgICAgIGlmIG5vdCBoYXNhdHRyKGF0dHJfdmFsdWUsICJfX2NhbGxfXyIpOg0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQoNCiAgICAgICAgICAgIHBhdGNoZXIgPSBzZWxmLmNvcHkoKQ0KICAgICAgICAgICAgc2V0YXR0cihrbGFzcywgYXR0ciwgcGF0Y2hlcihhdHRyX3ZhbHVlKSkNCiAgICAgICAgcmV0dXJuIGtsYXNzDQoNCg0KICAgIGRlZiBkZWNvcmF0ZV9jYWxsYWJsZShzZWxmLCBmdW5jKToNCiAgICAgICAgaWYgaGFzYXR0cihmdW5jLCAncGF0Y2hpbmdzJyk6DQogICAgICAgICAgICBmdW5jLnBhdGNoaW5ncy5hcHBlbmQoc2VsZikNCiAgICAgICAgICAgIHJldHVybiBmdW5jDQoNCiAgICAgICAgQHdyYXBzKGZ1bmMpDQogICAgICAgIGRlZiBwYXRjaGVkKCphcmdzLCAqKmtleXdhcmdzKToNCiAgICAgICAgICAgIGV4dHJhX2FyZ3MgPSBbXQ0KICAgICAgICAgICAgZW50ZXJlZF9wYXRjaGVycyA9IFtdDQoNCiAgICAgICAgICAgIGV4Y19pbmZvID0gdHVwbGUoKQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGZvciBwYXRjaGluZyBpbiBwYXRjaGVkLnBhdGNoaW5nczoNCiAgICAgICAgICAgICAgICAgICAgYXJnID0gcGF0Y2hpbmcuX19lbnRlcl9fKCkNCiAgICAgICAgICAgICAgICAgICAgZW50ZXJlZF9wYXRjaGVycy5hcHBlbmQocGF0Y2hpbmcpDQogICAgICAgICAgICAgICAgICAgIGlmIHBhdGNoaW5nLmF0dHJpYnV0ZV9uYW1lIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICAgICAgICAga2V5d2FyZ3MudXBkYXRlKGFyZykNCiAgICAgICAgICAgICAgICAgICAgZWxpZiBwYXRjaGluZy5uZXcgaXMgREVGQVVMVDoNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhX2FyZ3MuYXBwZW5kKGFyZykNCg0KICAgICAgICAgICAgICAgIGFyZ3MgKz0gdHVwbGUoZXh0cmFfYXJncykNCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYygqYXJncywgKiprZXl3YXJncykNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBpZiAocGF0Y2hpbmcgbm90IGluIGVudGVyZWRfcGF0Y2hlcnMgYW5kDQogICAgICAgICAgICAgICAgICAgIF9pc19zdGFydGVkKHBhdGNoaW5nKSk6DQogICAgICAgICAgICAgICAgICAgICMgdGhlIHBhdGNoZXIgbWF5IGhhdmUgYmVlbiBzdGFydGVkLCBidXQgYW4gZXhjZXB0aW9uDQogICAgICAgICAgICAgICAgICAgICMgcmFpc2VkIHdoaWxzdCBlbnRlcmluZyBvbmUgb2YgaXRzIGFkZGl0aW9uYWxfcGF0Y2hlcnMNCiAgICAgICAgICAgICAgICAgICAgZW50ZXJlZF9wYXRjaGVycy5hcHBlbmQocGF0Y2hpbmcpDQogICAgICAgICAgICAgICAgIyBQYXNzIHRoZSBleGNlcHRpb24gdG8gX19leGl0X18NCiAgICAgICAgICAgICAgICBleGNfaW5mbyA9IHN5cy5leGNfaW5mbygpDQogICAgICAgICAgICAgICAgIyByZS1yYWlzZSB0aGUgZXhjZXB0aW9uDQogICAgICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgZm9yIHBhdGNoaW5nIGluIHJldmVyc2VkKGVudGVyZWRfcGF0Y2hlcnMpOg0KICAgICAgICAgICAgICAgICAgICBwYXRjaGluZy5fX2V4aXRfXygqZXhjX2luZm8pDQoNCiAgICAgICAgcGF0Y2hlZC5wYXRjaGluZ3MgPSBbc2VsZl0NCiAgICAgICAgcmV0dXJuIHBhdGNoZWQNCg0KDQogICAgZGVmIGdldF9vcmlnaW5hbChzZWxmKToNCiAgICAgICAgdGFyZ2V0ID0gc2VsZi5nZXR0ZXIoKQ0KICAgICAgICBuYW1lID0gc2VsZi5hdHRyaWJ1dGUNCg0KICAgICAgICBvcmlnaW5hbCA9IERFRkFVTFQNCiAgICAgICAgbG9jYWwgPSBGYWxzZQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIG9yaWdpbmFsID0gdGFyZ2V0Ll9fZGljdF9fW25hbWVdDQogICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIEtleUVycm9yKToNCiAgICAgICAgICAgIG9yaWdpbmFsID0gZ2V0YXR0cih0YXJnZXQsIG5hbWUsIERFRkFVTFQpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBsb2NhbCA9IFRydWUNCg0KICAgICAgICBpZiBub3Qgc2VsZi5jcmVhdGUgYW5kIG9yaWdpbmFsIGlzIERFRkFVTFQ6DQogICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcigNCiAgICAgICAgICAgICAgICAiJXMgZG9lcyBub3QgaGF2ZSB0aGUgYXR0cmlidXRlICVyIiAlICh0YXJnZXQsIG5hbWUpDQogICAgICAgICAgICApDQogICAgICAgIHJldHVybiBvcmlnaW5hbCwgbG9jYWwNCg0KDQogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToNCiAgICAgICAgIiIiUGVyZm9ybSB0aGUgcGF0Y2guIiIiDQogICAgICAgIG5ldywgc3BlYywgc3BlY19zZXQgPSBzZWxmLm5ldywgc2VsZi5zcGVjLCBzZWxmLnNwZWNfc2V0DQogICAgICAgIGF1dG9zcGVjLCBrd2FyZ3MgPSBzZWxmLmF1dG9zcGVjLCBzZWxmLmt3YXJncw0KICAgICAgICBuZXdfY2FsbGFibGUgPSBzZWxmLm5ld19jYWxsYWJsZQ0KICAgICAgICBzZWxmLnRhcmdldCA9IHNlbGYuZ2V0dGVyKCkNCg0KICAgICAgICAjIG5vcm1hbGlzZSBGYWxzZSB0byBOb25lDQogICAgICAgIGlmIHNwZWMgaXMgRmFsc2U6DQogICAgICAgICAgICBzcGVjID0gTm9uZQ0KICAgICAgICBpZiBzcGVjX3NldCBpcyBGYWxzZToNCiAgICAgICAgICAgIHNwZWNfc2V0ID0gTm9uZQ0KICAgICAgICBpZiBhdXRvc3BlYyBpcyBGYWxzZToNCiAgICAgICAgICAgIGF1dG9zcGVjID0gTm9uZQ0KDQogICAgICAgIGlmIHNwZWMgaXMgbm90IE5vbmUgYW5kIGF1dG9zcGVjIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJDYW4ndCBzcGVjaWZ5IHNwZWMgYW5kIGF1dG9zcGVjIikNCiAgICAgICAgaWYgKChzcGVjIGlzIG5vdCBOb25lIG9yIGF1dG9zcGVjIGlzIG5vdCBOb25lKSBhbmQNCiAgICAgICAgICAgIHNwZWNfc2V0IG5vdCBpbiAoVHJ1ZSwgTm9uZSkpOg0KICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJDYW4ndCBwcm92aWRlIGV4cGxpY2l0IHNwZWNfc2V0ICphbmQqIHNwZWMgb3IgYXV0b3NwZWMiKQ0KDQogICAgICAgIG9yaWdpbmFsLCBsb2NhbCA9IHNlbGYuZ2V0X29yaWdpbmFsKCkNCg0KICAgICAgICBpZiBuZXcgaXMgREVGQVVMVCBhbmQgYXV0b3NwZWMgaXMgTm9uZToNCiAgICAgICAgICAgIGluaGVyaXQgPSBGYWxzZQ0KICAgICAgICAgICAgaWYgc3BlYyBpcyBUcnVlOg0KICAgICAgICAgICAgICAgICMgc2V0IHNwZWMgdG8gdGhlIG9iamVjdCB3ZSBhcmUgcmVwbGFjaW5nDQogICAgICAgICAgICAgICAgc3BlYyA9IG9yaWdpbmFsDQogICAgICAgICAgICAgICAgaWYgc3BlY19zZXQgaXMgVHJ1ZToNCiAgICAgICAgICAgICAgICAgICAgc3BlY19zZXQgPSBvcmlnaW5hbA0KICAgICAgICAgICAgICAgICAgICBzcGVjID0gTm9uZQ0KICAgICAgICAgICAgZWxpZiBzcGVjIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIGlmIHNwZWNfc2V0IGlzIFRydWU6DQogICAgICAgICAgICAgICAgICAgIHNwZWNfc2V0ID0gc3BlYw0KICAgICAgICAgICAgICAgICAgICBzcGVjID0gTm9uZQ0KICAgICAgICAgICAgZWxpZiBzcGVjX3NldCBpcyBUcnVlOg0KICAgICAgICAgICAgICAgIHNwZWNfc2V0ID0gb3JpZ2luYWwNCg0KICAgICAgICAgICAgaWYgc3BlYyBpcyBub3QgTm9uZSBvciBzcGVjX3NldCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICBpZiBvcmlnaW5hbCBpcyBERUZBVUxUOg0KICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbid0IHVzZSAnc3BlYycgd2l0aCBjcmVhdGU9VHJ1ZSIpDQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShvcmlnaW5hbCwgdHlwZSk6DQogICAgICAgICAgICAgICAgICAgICMgSWYgd2UncmUgcGF0Y2hpbmcgb3V0IGEgY2xhc3MgYW5kIHRoZXJlIGlzIGEgc3BlYw0KICAgICAgICAgICAgICAgICAgICBpbmhlcml0ID0gVHJ1ZQ0KDQogICAgICAgICAgICBLbGFzcyA9IE1hZ2ljTW9jaw0KICAgICAgICAgICAgX2t3YXJncyA9IHt9DQogICAgICAgICAgICBpZiBuZXdfY2FsbGFibGUgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgS2xhc3MgPSBuZXdfY2FsbGFibGUNCiAgICAgICAgICAgIGVsaWYgc3BlYyBpcyBub3QgTm9uZSBvciBzcGVjX3NldCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICB0aGlzX3NwZWMgPSBzcGVjDQogICAgICAgICAgICAgICAgaWYgc3BlY19zZXQgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgICAgIHRoaXNfc3BlYyA9IHNwZWNfc2V0DQogICAgICAgICAgICAgICAgaWYgX2lzX2xpc3QodGhpc19zcGVjKToNCiAgICAgICAgICAgICAgICAgICAgbm90X2NhbGxhYmxlID0gJ19fY2FsbF9fJyBub3QgaW4gdGhpc19zcGVjDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgbm90X2NhbGxhYmxlID0gbm90IGNhbGxhYmxlKHRoaXNfc3BlYykNCiAgICAgICAgICAgICAgICBpZiBub3RfY2FsbGFibGU6DQogICAgICAgICAgICAgICAgICAgIEtsYXNzID0gTm9uQ2FsbGFibGVNYWdpY01vY2sNCg0KICAgICAgICAgICAgaWYgc3BlYyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICBfa3dhcmdzWydzcGVjJ10gPSBzcGVjDQogICAgICAgICAgICBpZiBzcGVjX3NldCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICBfa3dhcmdzWydzcGVjX3NldCddID0gc3BlY19zZXQNCg0KICAgICAgICAgICAgIyBhZGQgYSBuYW1lIHRvIG1vY2tzDQogICAgICAgICAgICBpZiAoaXNpbnN0YW5jZShLbGFzcywgdHlwZSkgYW5kDQogICAgICAgICAgICAgICAgaXNzdWJjbGFzcyhLbGFzcywgTm9uQ2FsbGFibGVNb2NrKSBhbmQgc2VsZi5hdHRyaWJ1dGUpOg0KICAgICAgICAgICAgICAgIF9rd2FyZ3NbJ25hbWUnXSA9IHNlbGYuYXR0cmlidXRlDQoNCiAgICAgICAgICAgIF9rd2FyZ3MudXBkYXRlKGt3YXJncykNCiAgICAgICAgICAgIG5ldyA9IEtsYXNzKCoqX2t3YXJncykNCg0KICAgICAgICAgICAgaWYgaW5oZXJpdCBhbmQgX2lzX2luc3RhbmNlX21vY2sobmV3KToNCiAgICAgICAgICAgICAgICAjIHdlIGNhbiBvbmx5IHRlbGwgaWYgdGhlIGluc3RhbmNlIHNob3VsZCBiZSBjYWxsYWJsZSBpZiB0aGUNCiAgICAgICAgICAgICAgICAjIHNwZWMgaXMgbm90IGEgbGlzdA0KICAgICAgICAgICAgICAgIHRoaXNfc3BlYyA9IHNwZWMNCiAgICAgICAgICAgICAgICBpZiBzcGVjX3NldCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgdGhpc19zcGVjID0gc3BlY19zZXQNCiAgICAgICAgICAgICAgICBpZiAobm90IF9pc19saXN0KHRoaXNfc3BlYykgYW5kIG5vdA0KICAgICAgICAgICAgICAgICAgICBfaW5zdGFuY2VfY2FsbGFibGUodGhpc19zcGVjKSk6DQogICAgICAgICAgICAgICAgICAgIEtsYXNzID0gTm9uQ2FsbGFibGVNYWdpY01vY2sNCg0KICAgICAgICAgICAgICAgIF9rd2FyZ3MucG9wKCduYW1lJykNCiAgICAgICAgICAgICAgICBuZXcucmV0dXJuX3ZhbHVlID0gS2xhc3MoX25ld19wYXJlbnQ9bmV3LCBfbmV3X25hbWU9JygpJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKipfa3dhcmdzKQ0KICAgICAgICBlbGlmIGF1dG9zcGVjIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgIyBzcGVjIGlzIGlnbm9yZWQsIG5ldyAqbXVzdCogYmUgZGVmYXVsdCwgc3BlY19zZXQgaXMgdHJlYXRlZA0KICAgICAgICAgICAgIyBhcyBhIGJvb2xlYW4uIFNob3VsZCB3ZSBjaGVjayBzcGVjIGlzIG5vdCBOb25lIGFuZCB0aGF0IHNwZWNfc2V0DQogICAgICAgICAgICAjIGlzIGEgYm9vbD8NCiAgICAgICAgICAgIGlmIG5ldyBpcyBub3QgREVGQVVMVDoNCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoDQogICAgICAgICAgICAgICAgICAgICJhdXRvc3BlYyBjcmVhdGVzIHRoZSBtb2NrIGZvciB5b3UuIENhbid0IHNwZWNpZnkgIg0KICAgICAgICAgICAgICAgICAgICAiYXV0b3NwZWMgYW5kIG5ldy4iDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgaWYgb3JpZ2luYWwgaXMgREVGQVVMVDoNCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbid0IHVzZSAnYXV0b3NwZWMnIHdpdGggY3JlYXRlPVRydWUiKQ0KICAgICAgICAgICAgc3BlY19zZXQgPSBib29sKHNwZWNfc2V0KQ0KICAgICAgICAgICAgaWYgYXV0b3NwZWMgaXMgVHJ1ZToNCiAgICAgICAgICAgICAgICBhdXRvc3BlYyA9IG9yaWdpbmFsDQoNCiAgICAgICAgICAgIG5ldyA9IGNyZWF0ZV9hdXRvc3BlYyhhdXRvc3BlYywgc3BlY19zZXQ9c3BlY19zZXQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX25hbWU9c2VsZi5hdHRyaWJ1dGUsICoqa3dhcmdzKQ0KICAgICAgICBlbGlmIGt3YXJnczoNCiAgICAgICAgICAgICMgY2FuJ3Qgc2V0IGtleXdvcmQgYXJncyB3aGVuIHdlIGFyZW4ndCBjcmVhdGluZyB0aGUgbW9jaw0KICAgICAgICAgICAgIyBYWFhYIElmIG5ldyBpcyBhIE1vY2sgd2UgY291bGQgY2FsbCBuZXcuY29uZmlndXJlX21vY2soKiprd2FyZ3MpDQogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbid0IHBhc3Mga3dhcmdzIHRvIGEgbW9jayB3ZSBhcmVuJ3QgY3JlYXRpbmciKQ0KDQogICAgICAgIG5ld19hdHRyID0gbmV3DQoNCiAgICAgICAgc2VsZi50ZW1wX29yaWdpbmFsID0gb3JpZ2luYWwNCiAgICAgICAgc2VsZi5pc19sb2NhbCA9IGxvY2FsDQogICAgICAgIHNldGF0dHIoc2VsZi50YXJnZXQsIHNlbGYuYXR0cmlidXRlLCBuZXdfYXR0cikNCiAgICAgICAgaWYgc2VsZi5hdHRyaWJ1dGVfbmFtZSBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIGV4dHJhX2FyZ3MgPSB7fQ0KICAgICAgICAgICAgaWYgc2VsZi5uZXcgaXMgREVGQVVMVDoNCiAgICAgICAgICAgICAgICBleHRyYV9hcmdzW3NlbGYuYXR0cmlidXRlX25hbWVdID0gIG5ldw0KICAgICAgICAgICAgZm9yIHBhdGNoaW5nIGluIHNlbGYuYWRkaXRpb25hbF9wYXRjaGVyczoNCiAgICAgICAgICAgICAgICBhcmcgPSBwYXRjaGluZy5fX2VudGVyX18oKQ0KICAgICAgICAgICAgICAgIGlmIHBhdGNoaW5nLm5ldyBpcyBERUZBVUxUOg0KICAgICAgICAgICAgICAgICAgICBleHRyYV9hcmdzLnVwZGF0ZShhcmcpDQogICAgICAgICAgICByZXR1cm4gZXh0cmFfYXJncw0KDQogICAgICAgIHJldHVybiBuZXcNCg0KDQogICAgZGVmIF9fZXhpdF9fKHNlbGYsICpleGNfaW5mbyk6DQogICAgICAgICIiIlVuZG8gdGhlIHBhdGNoLiIiIg0KICAgICAgICBpZiBub3QgX2lzX3N0YXJ0ZWQoc2VsZik6DQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoJ3N0b3AgY2FsbGVkIG9uIHVuc3RhcnRlZCBwYXRjaGVyJykNCg0KICAgICAgICBpZiBzZWxmLmlzX2xvY2FsIGFuZCBzZWxmLnRlbXBfb3JpZ2luYWwgaXMgbm90IERFRkFVTFQ6DQogICAgICAgICAgICBzZXRhdHRyKHNlbGYudGFyZ2V0LCBzZWxmLmF0dHJpYnV0ZSwgc2VsZi50ZW1wX29yaWdpbmFsKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgZGVsYXR0cihzZWxmLnRhcmdldCwgc2VsZi5hdHRyaWJ1dGUpDQogICAgICAgICAgICBpZiBub3Qgc2VsZi5jcmVhdGUgYW5kIG5vdCBoYXNhdHRyKHNlbGYudGFyZ2V0LCBzZWxmLmF0dHJpYnV0ZSk6DQogICAgICAgICAgICAgICAgIyBuZWVkZWQgZm9yIHByb3h5IG9iamVjdHMgbGlrZSBkamFuZ28gc2V0dGluZ3MNCiAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYudGFyZ2V0LCBzZWxmLmF0dHJpYnV0ZSwgc2VsZi50ZW1wX29yaWdpbmFsKQ0KDQogICAgICAgIGRlbCBzZWxmLnRlbXBfb3JpZ2luYWwNCiAgICAgICAgZGVsIHNlbGYuaXNfbG9jYWwNCiAgICAgICAgZGVsIHNlbGYudGFyZ2V0DQogICAgICAgIGZvciBwYXRjaGVyIGluIHJldmVyc2VkKHNlbGYuYWRkaXRpb25hbF9wYXRjaGVycyk6DQogICAgICAgICAgICBpZiBfaXNfc3RhcnRlZChwYXRjaGVyKToNCiAgICAgICAgICAgICAgICBwYXRjaGVyLl9fZXhpdF9fKCpleGNfaW5mbykNCg0KDQogICAgZGVmIHN0YXJ0KHNlbGYpOg0KICAgICAgICAiIiJBY3RpdmF0ZSBhIHBhdGNoLCByZXR1cm5pbmcgYW55IGNyZWF0ZWQgbW9jay4iIiINCiAgICAgICAgcmVzdWx0ID0gc2VsZi5fX2VudGVyX18oKQ0KICAgICAgICBzZWxmLl9hY3RpdmVfcGF0Y2hlcy5hZGQoc2VsZikNCiAgICAgICAgcmV0dXJuIHJlc3VsdA0KDQoNCiAgICBkZWYgc3RvcChzZWxmKToNCiAgICAgICAgIiIiU3RvcCBhbiBhY3RpdmUgcGF0Y2guIiIiDQogICAgICAgIHNlbGYuX2FjdGl2ZV9wYXRjaGVzLmRpc2NhcmQoc2VsZikNCiAgICAgICAgcmV0dXJuIHNlbGYuX19leGl0X18oKQ0KDQoNCg0KZGVmIF9nZXRfdGFyZ2V0KHRhcmdldCk6DQogICAgdHJ5Og0KICAgICAgICB0YXJnZXQsIGF0dHJpYnV0ZSA9IHRhcmdldC5yc3BsaXQoJy4nLCAxKQ0KICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBWYWx1ZUVycm9yKToNCiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJOZWVkIGEgdmFsaWQgdGFyZ2V0IHRvIHBhdGNoLiBZb3Ugc3VwcGxpZWQ6ICVyIiAlDQogICAgICAgICAgICAgICAgICAgICAgICAodGFyZ2V0LCkpDQogICAgZ2V0dGVyID0gbGFtYmRhOiBfaW1wb3J0ZXIodGFyZ2V0KQ0KICAgIHJldHVybiBnZXR0ZXIsIGF0dHJpYnV0ZQ0KDQoNCmRlZiBfcGF0Y2hfb2JqZWN0KA0KICAgICAgICB0YXJnZXQsIGF0dHJpYnV0ZSwgbmV3PURFRkFVTFQsIHNwZWM9Tm9uZSwNCiAgICAgICAgY3JlYXRlPUZhbHNlLCBzcGVjX3NldD1Ob25lLCBhdXRvc3BlYz1Ob25lLA0KICAgICAgICBuZXdfY2FsbGFibGU9Tm9uZSwgKiprd2FyZ3MNCiAgICApOg0KICAgICIiIg0KICAgIHBhdGNoIHRoZSBuYW1lZCBtZW1iZXIgKGBhdHRyaWJ1dGVgKSBvbiBhbiBvYmplY3QgKGB0YXJnZXRgKSB3aXRoIGEgbW9jaw0KICAgIG9iamVjdC4NCg0KICAgIGBwYXRjaC5vYmplY3RgIGNhbiBiZSB1c2VkIGFzIGEgZGVjb3JhdG9yLCBjbGFzcyBkZWNvcmF0b3Igb3IgYSBjb250ZXh0DQogICAgbWFuYWdlci4gQXJndW1lbnRzIGBuZXdgLCBgc3BlY2AsIGBjcmVhdGVgLCBgc3BlY19zZXRgLA0KICAgIGBhdXRvc3BlY2AgYW5kIGBuZXdfY2FsbGFibGVgIGhhdmUgdGhlIHNhbWUgbWVhbmluZyBhcyBmb3IgYHBhdGNoYC4gTGlrZQ0KICAgIGBwYXRjaGAsIGBwYXRjaC5vYmplY3RgIHRha2VzIGFyYml0cmFyeSBrZXl3b3JkIGFyZ3VtZW50cyBmb3IgY29uZmlndXJpbmcNCiAgICB0aGUgbW9jayBvYmplY3QgaXQgY3JlYXRlcy4NCg0KICAgIFdoZW4gdXNlZCBhcyBhIGNsYXNzIGRlY29yYXRvciBgcGF0Y2gub2JqZWN0YCBob25vdXJzIGBwYXRjaC5URVNUX1BSRUZJWGANCiAgICBmb3IgY2hvb3Npbmcgd2hpY2ggbWV0aG9kcyB0byB3cmFwLg0KICAgICIiIg0KICAgIGdldHRlciA9IGxhbWJkYTogdGFyZ2V0DQogICAgcmV0dXJuIF9wYXRjaCgNCiAgICAgICAgZ2V0dGVyLCBhdHRyaWJ1dGUsIG5ldywgc3BlYywgY3JlYXRlLA0KICAgICAgICBzcGVjX3NldCwgYXV0b3NwZWMsIG5ld19jYWxsYWJsZSwga3dhcmdzDQogICAgKQ0KDQoNCmRlZiBfcGF0Y2hfbXVsdGlwbGUodGFyZ2V0LCBzcGVjPU5vbmUsIGNyZWF0ZT1GYWxzZSwgc3BlY19zZXQ9Tm9uZSwNCiAgICAgICAgICAgICAgICAgICAgYXV0b3NwZWM9Tm9uZSwgbmV3X2NhbGxhYmxlPU5vbmUsICoqa3dhcmdzKToNCiAgICAiIiJQZXJmb3JtIG11bHRpcGxlIHBhdGNoZXMgaW4gYSBzaW5nbGUgY2FsbC4gSXQgdGFrZXMgdGhlIG9iamVjdCB0byBiZQ0KICAgIHBhdGNoZWQgKGVpdGhlciBhcyBhbiBvYmplY3Qgb3IgYSBzdHJpbmcgdG8gZmV0Y2ggdGhlIG9iamVjdCBieSBpbXBvcnRpbmcpDQogICAgYW5kIGtleXdvcmQgYXJndW1lbnRzIGZvciB0aGUgcGF0Y2hlczo6DQoNCiAgICAgICAgd2l0aCBwYXRjaC5tdWx0aXBsZShzZXR0aW5ncywgRklSU1RfUEFUQ0g9J29uZScsIFNFQ09ORF9QQVRDSD0ndHdvJyk6DQogICAgICAgICAgICAuLi4NCg0KICAgIFVzZSBgREVGQVVMVGAgYXMgdGhlIHZhbHVlIGlmIHlvdSB3YW50IGBwYXRjaC5tdWx0aXBsZWAgdG8gY3JlYXRlDQogICAgbW9ja3MgZm9yIHlvdS4gSW4gdGhpcyBjYXNlIHRoZSBjcmVhdGVkIG1vY2tzIGFyZSBwYXNzZWQgaW50byBhIGRlY29yYXRlZA0KICAgIGZ1bmN0aW9uIGJ5IGtleXdvcmQsIGFuZCBhIGRpY3Rpb25hcnkgaXMgcmV0dXJuZWQgd2hlbiBgcGF0Y2gubXVsdGlwbGVgIGlzDQogICAgdXNlZCBhcyBhIGNvbnRleHQgbWFuYWdlci4NCg0KICAgIGBwYXRjaC5tdWx0aXBsZWAgY2FuIGJlIHVzZWQgYXMgYSBkZWNvcmF0b3IsIGNsYXNzIGRlY29yYXRvciBvciBhIGNvbnRleHQNCiAgICBtYW5hZ2VyLiBUaGUgYXJndW1lbnRzIGBzcGVjYCwgYHNwZWNfc2V0YCwgYGNyZWF0ZWAsDQogICAgYGF1dG9zcGVjYCBhbmQgYG5ld19jYWxsYWJsZWAgaGF2ZSB0aGUgc2FtZSBtZWFuaW5nIGFzIGZvciBgcGF0Y2hgLiBUaGVzZQ0KICAgIGFyZ3VtZW50cyB3aWxsIGJlIGFwcGxpZWQgdG8gKmFsbCogcGF0Y2hlcyBkb25lIGJ5IGBwYXRjaC5tdWx0aXBsZWAuDQoNCiAgICBXaGVuIHVzZWQgYXMgYSBjbGFzcyBkZWNvcmF0b3IgYHBhdGNoLm11bHRpcGxlYCBob25vdXJzIGBwYXRjaC5URVNUX1BSRUZJWGANCiAgICBmb3IgY2hvb3Npbmcgd2hpY2ggbWV0aG9kcyB0byB3cmFwLg0KICAgICIiIg0KICAgIGlmIHR5cGUodGFyZ2V0KSBpcyBzdHI6DQogICAgICAgIGdldHRlciA9IGxhbWJkYTogX2ltcG9ydGVyKHRhcmdldCkNCiAgICBlbHNlOg0KICAgICAgICBnZXR0ZXIgPSBsYW1iZGE6IHRhcmdldA0KDQogICAgaWYgbm90IGt3YXJnczoNCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigNCiAgICAgICAgICAgICdNdXN0IHN1cHBseSBhdCBsZWFzdCBvbmUga2V5d29yZCBhcmd1bWVudCB3aXRoIHBhdGNoLm11bHRpcGxlJw0KICAgICAgICApDQogICAgIyBuZWVkIHRvIHdyYXAgaW4gYSBsaXN0IGZvciBweXRob24gMywgd2hlcmUgaXRlbXMgaXMgYSB2aWV3DQogICAgaXRlbXMgPSBsaXN0KGt3YXJncy5pdGVtcygpKQ0KICAgIGF0dHJpYnV0ZSwgbmV3ID0gaXRlbXNbMF0NCiAgICBwYXRjaGVyID0gX3BhdGNoKA0KICAgICAgICBnZXR0ZXIsIGF0dHJpYnV0ZSwgbmV3LCBzcGVjLCBjcmVhdGUsIHNwZWNfc2V0LA0KICAgICAgICBhdXRvc3BlYywgbmV3X2NhbGxhYmxlLCB7fQ0KICAgICkNCiAgICBwYXRjaGVyLmF0dHJpYnV0ZV9uYW1lID0gYXR0cmlidXRlDQogICAgZm9yIGF0dHJpYnV0ZSwgbmV3IGluIGl0ZW1zWzE6XToNCiAgICAgICAgdGhpc19wYXRjaGVyID0gX3BhdGNoKA0KICAgICAgICAgICAgZ2V0dGVyLCBhdHRyaWJ1dGUsIG5ldywgc3BlYywgY3JlYXRlLCBzcGVjX3NldCwNCiAgICAgICAgICAgIGF1dG9zcGVjLCBuZXdfY2FsbGFibGUsIHt9DQogICAgICAgICkNCiAgICAgICAgdGhpc19wYXRjaGVyLmF0dHJpYnV0ZV9uYW1lID0gYXR0cmlidXRlDQogICAgICAgIHBhdGNoZXIuYWRkaXRpb25hbF9wYXRjaGVycy5hcHBlbmQodGhpc19wYXRjaGVyKQ0KICAgIHJldHVybiBwYXRjaGVyDQoNCg0KZGVmIHBhdGNoKA0KICAgICAgICB0YXJnZXQsIG5ldz1ERUZBVUxULCBzcGVjPU5vbmUsIGNyZWF0ZT1GYWxzZSwNCiAgICAgICAgc3BlY19zZXQ9Tm9uZSwgYXV0b3NwZWM9Tm9uZSwgbmV3X2NhbGxhYmxlPU5vbmUsICoqa3dhcmdzDQogICAgKToNCiAgICAiIiINCiAgICBgcGF0Y2hgIGFjdHMgYXMgYSBmdW5jdGlvbiBkZWNvcmF0b3IsIGNsYXNzIGRlY29yYXRvciBvciBhIGNvbnRleHQNCiAgICBtYW5hZ2VyLiBJbnNpZGUgdGhlIGJvZHkgb2YgdGhlIGZ1bmN0aW9uIG9yIHdpdGggc3RhdGVtZW50LCB0aGUgYHRhcmdldGANCiAgICBpcyBwYXRjaGVkIHdpdGggYSBgbmV3YCBvYmplY3QuIFdoZW4gdGhlIGZ1bmN0aW9uL3dpdGggc3RhdGVtZW50IGV4aXRzDQogICAgdGhlIHBhdGNoIGlzIHVuZG9uZS4NCg0KICAgIElmIGBuZXdgIGlzIG9taXR0ZWQsIHRoZW4gdGhlIHRhcmdldCBpcyByZXBsYWNlZCB3aXRoIGENCiAgICBgTWFnaWNNb2NrYC4gSWYgYHBhdGNoYCBpcyB1c2VkIGFzIGEgZGVjb3JhdG9yIGFuZCBgbmV3YCBpcw0KICAgIG9taXR0ZWQsIHRoZSBjcmVhdGVkIG1vY2sgaXMgcGFzc2VkIGluIGFzIGFuIGV4dHJhIGFyZ3VtZW50IHRvIHRoZQ0KICAgIGRlY29yYXRlZCBmdW5jdGlvbi4gSWYgYHBhdGNoYCBpcyB1c2VkIGFzIGEgY29udGV4dCBtYW5hZ2VyIHRoZSBjcmVhdGVkDQogICAgbW9jayBpcyByZXR1cm5lZCBieSB0aGUgY29udGV4dCBtYW5hZ2VyLg0KDQogICAgYHRhcmdldGAgc2hvdWxkIGJlIGEgc3RyaW5nIGluIHRoZSBmb3JtIGAncGFja2FnZS5tb2R1bGUuQ2xhc3NOYW1lJ2AuIFRoZQ0KICAgIGB0YXJnZXRgIGlzIGltcG9ydGVkIGFuZCB0aGUgc3BlY2lmaWVkIG9iamVjdCByZXBsYWNlZCB3aXRoIHRoZSBgbmV3YA0KICAgIG9iamVjdCwgc28gdGhlIGB0YXJnZXRgIG11c3QgYmUgaW1wb3J0YWJsZSBmcm9tIHRoZSBlbnZpcm9ubWVudCB5b3UgYXJlDQogICAgY2FsbGluZyBgcGF0Y2hgIGZyb20uIFRoZSB0YXJnZXQgaXMgaW1wb3J0ZWQgd2hlbiB0aGUgZGVjb3JhdGVkIGZ1bmN0aW9uDQogICAgaXMgZXhlY3V0ZWQsIG5vdCBhdCBkZWNvcmF0aW9uIHRpbWUuDQoNCiAgICBUaGUgYHNwZWNgIGFuZCBgc3BlY19zZXRgIGtleXdvcmQgYXJndW1lbnRzIGFyZSBwYXNzZWQgdG8gdGhlIGBNYWdpY01vY2tgDQogICAgaWYgcGF0Y2ggaXMgY3JlYXRpbmcgb25lIGZvciB5b3UuDQoNCiAgICBJbiBhZGRpdGlvbiB5b3UgY2FuIHBhc3MgYHNwZWM9VHJ1ZWAgb3IgYHNwZWNfc2V0PVRydWVgLCB3aGljaCBjYXVzZXMNCiAgICBwYXRjaCB0byBwYXNzIGluIHRoZSBvYmplY3QgYmVpbmcgbW9ja2VkIGFzIHRoZSBzcGVjL3NwZWNfc2V0IG9iamVjdC4NCg0KICAgIGBuZXdfY2FsbGFibGVgIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBhIGRpZmZlcmVudCBjbGFzcywgb3IgY2FsbGFibGUgb2JqZWN0LA0KICAgIHRoYXQgd2lsbCBiZSBjYWxsZWQgdG8gY3JlYXRlIHRoZSBgbmV3YCBvYmplY3QuIEJ5IGRlZmF1bHQgYE1hZ2ljTW9ja2AgaXMNCiAgICB1c2VkLg0KDQogICAgQSBtb3JlIHBvd2VyZnVsIGZvcm0gb2YgYHNwZWNgIGlzIGBhdXRvc3BlY2AuIElmIHlvdSBzZXQgYGF1dG9zcGVjPVRydWVgDQogICAgdGhlbiB0aGUgbW9jayB3aXRoIGJlIGNyZWF0ZWQgd2l0aCBhIHNwZWMgZnJvbSB0aGUgb2JqZWN0IGJlaW5nIHJlcGxhY2VkLg0KICAgIEFsbCBhdHRyaWJ1dGVzIG9mIHRoZSBtb2NrIHdpbGwgYWxzbyBoYXZlIHRoZSBzcGVjIG9mIHRoZSBjb3JyZXNwb25kaW5nDQogICAgYXR0cmlidXRlIG9mIHRoZSBvYmplY3QgYmVpbmcgcmVwbGFjZWQuIE1ldGhvZHMgYW5kIGZ1bmN0aW9ucyBiZWluZw0KICAgIG1vY2tlZCB3aWxsIGhhdmUgdGhlaXIgYXJndW1lbnRzIGNoZWNrZWQgYW5kIHdpbGwgcmFpc2UgYSBgVHlwZUVycm9yYCBpZg0KICAgIHRoZXkgYXJlIGNhbGxlZCB3aXRoIHRoZSB3cm9uZyBzaWduYXR1cmUuIEZvciBtb2NrcyByZXBsYWNpbmcgYSBjbGFzcywNCiAgICB0aGVpciByZXR1cm4gdmFsdWUgKHRoZSAnaW5zdGFuY2UnKSB3aWxsIGhhdmUgdGhlIHNhbWUgc3BlYyBhcyB0aGUgY2xhc3MuDQoNCiAgICBJbnN0ZWFkIG9mIGBhdXRvc3BlYz1UcnVlYCB5b3UgY2FuIHBhc3MgYGF1dG9zcGVjPXNvbWVfb2JqZWN0YCB0byB1c2UgYW4NCiAgICBhcmJpdHJhcnkgb2JqZWN0IGFzIHRoZSBzcGVjIGluc3RlYWQgb2YgdGhlIG9uZSBiZWluZyByZXBsYWNlZC4NCg0KICAgIEJ5IGRlZmF1bHQgYHBhdGNoYCB3aWxsIGZhaWwgdG8gcmVwbGFjZSBhdHRyaWJ1dGVzIHRoYXQgZG9uJ3QgZXhpc3QuIElmDQogICAgeW91IHBhc3MgaW4gYGNyZWF0ZT1UcnVlYCwgYW5kIHRoZSBhdHRyaWJ1dGUgZG9lc24ndCBleGlzdCwgcGF0Y2ggd2lsbA0KICAgIGNyZWF0ZSB0aGUgYXR0cmlidXRlIGZvciB5b3Ugd2hlbiB0aGUgcGF0Y2hlZCBmdW5jdGlvbiBpcyBjYWxsZWQsIGFuZA0KICAgIGRlbGV0ZSBpdCBhZ2FpbiBhZnRlcndhcmRzLiBUaGlzIGlzIHVzZWZ1bCBmb3Igd3JpdGluZyB0ZXN0cyBhZ2FpbnN0DQogICAgYXR0cmlidXRlcyB0aGF0IHlvdXIgcHJvZHVjdGlvbiBjb2RlIGNyZWF0ZXMgYXQgcnVudGltZS4gSXQgaXMgb2ZmIGJ5IGJ5DQogICAgZGVmYXVsdCBiZWNhdXNlIGl0IGNhbiBiZSBkYW5nZXJvdXMuIFdpdGggaXQgc3dpdGNoZWQgb24geW91IGNhbiB3cml0ZQ0KICAgIHBhc3NpbmcgdGVzdHMgYWdhaW5zdCBBUElzIHRoYXQgZG9uJ3QgYWN0dWFsbHkgZXhpc3QhDQoNCiAgICBQYXRjaCBjYW4gYmUgdXNlZCBhcyBhIGBUZXN0Q2FzZWAgY2xhc3MgZGVjb3JhdG9yLiBJdCB3b3JrcyBieQ0KICAgIGRlY29yYXRpbmcgZWFjaCB0ZXN0IG1ldGhvZCBpbiB0aGUgY2xhc3MuIFRoaXMgcmVkdWNlcyB0aGUgYm9pbGVycGxhdGUNCiAgICBjb2RlIHdoZW4geW91ciB0ZXN0IG1ldGhvZHMgc2hhcmUgYSBjb21tb24gcGF0Y2hpbmdzIHNldC4gYHBhdGNoYCBmaW5kcw0KICAgIHRlc3RzIGJ5IGxvb2tpbmcgZm9yIG1ldGhvZCBuYW1lcyB0aGF0IHN0YXJ0IHdpdGggYHBhdGNoLlRFU1RfUFJFRklYYC4NCiAgICBCeSBkZWZhdWx0IHRoaXMgaXMgYHRlc3RgLCB3aGljaCBtYXRjaGVzIHRoZSB3YXkgYHVuaXR0ZXN0YCBmaW5kcyB0ZXN0cy4NCiAgICBZb3UgY2FuIHNwZWNpZnkgYW4gYWx0ZXJuYXRpdmUgcHJlZml4IGJ5IHNldHRpbmcgYHBhdGNoLlRFU1RfUFJFRklYYC4NCg0KICAgIFBhdGNoIGNhbiBiZSB1c2VkIGFzIGEgY29udGV4dCBtYW5hZ2VyLCB3aXRoIHRoZSB3aXRoIHN0YXRlbWVudC4gSGVyZSB0aGUNCiAgICBwYXRjaGluZyBhcHBsaWVzIHRvIHRoZSBpbmRlbnRlZCBibG9jayBhZnRlciB0aGUgd2l0aCBzdGF0ZW1lbnQuIElmIHlvdQ0KICAgIHVzZSAiYXMiIHRoZW4gdGhlIHBhdGNoZWQgb2JqZWN0IHdpbGwgYmUgYm91bmQgdG8gdGhlIG5hbWUgYWZ0ZXIgdGhlDQogICAgImFzIjsgdmVyeSB1c2VmdWwgaWYgYHBhdGNoYCBpcyBjcmVhdGluZyBhIG1vY2sgb2JqZWN0IGZvciB5b3UuDQoNCiAgICBgcGF0Y2hgIHRha2VzIGFyYml0cmFyeSBrZXl3b3JkIGFyZ3VtZW50cy4gVGhlc2Ugd2lsbCBiZSBwYXNzZWQgdG8NCiAgICB0aGUgYE1vY2tgIChvciBgbmV3X2NhbGxhYmxlYCkgb24gY29uc3RydWN0aW9uLg0KDQogICAgYHBhdGNoLmRpY3QoLi4uKWAsIGBwYXRjaC5tdWx0aXBsZSguLi4pYCBhbmQgYHBhdGNoLm9iamVjdCguLi4pYCBhcmUNCiAgICBhdmFpbGFibGUgZm9yIGFsdGVybmF0ZSB1c2UtY2FzZXMuDQogICAgIiIiDQogICAgZ2V0dGVyLCBhdHRyaWJ1dGUgPSBfZ2V0X3RhcmdldCh0YXJnZXQpDQogICAgcmV0dXJuIF9wYXRjaCgNCiAgICAgICAgZ2V0dGVyLCBhdHRyaWJ1dGUsIG5ldywgc3BlYywgY3JlYXRlLA0KICAgICAgICBzcGVjX3NldCwgYXV0b3NwZWMsIG5ld19jYWxsYWJsZSwga3dhcmdzDQogICAgKQ0KDQoNCmNsYXNzIF9wYXRjaF9kaWN0KG9iamVjdCk6DQogICAgIiIiDQogICAgUGF0Y2ggYSBkaWN0aW9uYXJ5LCBvciBkaWN0aW9uYXJ5IGxpa2Ugb2JqZWN0LCBhbmQgcmVzdG9yZSB0aGUgZGljdGlvbmFyeQ0KICAgIHRvIGl0cyBvcmlnaW5hbCBzdGF0ZSBhZnRlciB0aGUgdGVzdC4NCg0KICAgIGBpbl9kaWN0YCBjYW4gYmUgYSBkaWN0aW9uYXJ5IG9yIGEgbWFwcGluZyBsaWtlIGNvbnRhaW5lci4gSWYgaXQgaXMgYQ0KICAgIG1hcHBpbmcgdGhlbiBpdCBtdXN0IGF0IGxlYXN0IHN1cHBvcnQgZ2V0dGluZywgc2V0dGluZyBhbmQgZGVsZXRpbmcgaXRlbXMNCiAgICBwbHVzIGl0ZXJhdGluZyBvdmVyIGtleXMuDQoNCiAgICBgaW5fZGljdGAgY2FuIGFsc28gYmUgYSBzdHJpbmcgc3BlY2lmeWluZyB0aGUgbmFtZSBvZiB0aGUgZGljdGlvbmFyeSwgd2hpY2gNCiAgICB3aWxsIHRoZW4gYmUgZmV0Y2hlZCBieSBpbXBvcnRpbmcgaXQuDQoNCiAgICBgdmFsdWVzYCBjYW4gYmUgYSBkaWN0aW9uYXJ5IG9mIHZhbHVlcyB0byBzZXQgaW4gdGhlIGRpY3Rpb25hcnkuIGB2YWx1ZXNgDQogICAgY2FuIGFsc28gYmUgYW4gaXRlcmFibGUgb2YgYChrZXksIHZhbHVlKWAgcGFpcnMuDQoNCiAgICBJZiBgY2xlYXJgIGlzIFRydWUgdGhlbiB0aGUgZGljdGlvbmFyeSB3aWxsIGJlIGNsZWFyZWQgYmVmb3JlIHRoZSBuZXcNCiAgICB2YWx1ZXMgYXJlIHNldC4NCg0KICAgIGBwYXRjaC5kaWN0YCBjYW4gYWxzbyBiZSBjYWxsZWQgd2l0aCBhcmJpdHJhcnkga2V5d29yZCBhcmd1bWVudHMgdG8gc2V0DQogICAgdmFsdWVzIGluIHRoZSBkaWN0aW9uYXJ5OjoNCg0KICAgICAgICB3aXRoIHBhdGNoLmRpY3QoJ3N5cy5tb2R1bGVzJywgbXltb2R1bGU9TW9jaygpLCBvdGhlcl9tb2R1bGU9TW9jaygpKToNCiAgICAgICAgICAgIC4uLg0KDQogICAgYHBhdGNoLmRpY3RgIGNhbiBiZSB1c2VkIGFzIGEgY29udGV4dCBtYW5hZ2VyLCBkZWNvcmF0b3Igb3IgY2xhc3MNCiAgICBkZWNvcmF0b3IuIFdoZW4gdXNlZCBhcyBhIGNsYXNzIGRlY29yYXRvciBgcGF0Y2guZGljdGAgaG9ub3Vycw0KICAgIGBwYXRjaC5URVNUX1BSRUZJWGAgZm9yIGNob29zaW5nIHdoaWNoIG1ldGhvZHMgdG8gd3JhcC4NCiAgICAiIiINCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbl9kaWN0LCB2YWx1ZXM9KCksIGNsZWFyPUZhbHNlLCAqKmt3YXJncyk6DQogICAgICAgIGlmIGlzaW5zdGFuY2UoaW5fZGljdCwgc3RyKToNCiAgICAgICAgICAgIGluX2RpY3QgPSBfaW1wb3J0ZXIoaW5fZGljdCkNCiAgICAgICAgc2VsZi5pbl9kaWN0ID0gaW5fZGljdA0KICAgICAgICAjIHN1cHBvcnQgYW55IGFyZ3VtZW50IHN1cHBvcnRlZCBieSBkaWN0KC4uLikgY29uc3RydWN0b3INCiAgICAgICAgc2VsZi52YWx1ZXMgPSBkaWN0KHZhbHVlcykNCiAgICAgICAgc2VsZi52YWx1ZXMudXBkYXRlKGt3YXJncykNCiAgICAgICAgc2VsZi5jbGVhciA9IGNsZWFyDQogICAgICAgIHNlbGYuX29yaWdpbmFsID0gTm9uZQ0KDQoNCiAgICBkZWYgX19jYWxsX18oc2VsZiwgZik6DQogICAgICAgIGlmIGlzaW5zdGFuY2UoZiwgdHlwZSk6DQogICAgICAgICAgICByZXR1cm4gc2VsZi5kZWNvcmF0ZV9jbGFzcyhmKQ0KICAgICAgICBAd3JhcHMoZikNCiAgICAgICAgZGVmIF9pbm5lcigqYXJncywgKiprdyk6DQogICAgICAgICAgICBzZWxmLl9wYXRjaF9kaWN0KCkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICByZXR1cm4gZigqYXJncywgKiprdykNCiAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgc2VsZi5fdW5wYXRjaF9kaWN0KCkNCg0KICAgICAgICByZXR1cm4gX2lubmVyDQoNCg0KICAgIGRlZiBkZWNvcmF0ZV9jbGFzcyhzZWxmLCBrbGFzcyk6DQogICAgICAgIGZvciBhdHRyIGluIGRpcihrbGFzcyk6DQogICAgICAgICAgICBhdHRyX3ZhbHVlID0gZ2V0YXR0cihrbGFzcywgYXR0cikNCiAgICAgICAgICAgIGlmIChhdHRyLnN0YXJ0c3dpdGgocGF0Y2guVEVTVF9QUkVGSVgpIGFuZA0KICAgICAgICAgICAgICAgICBoYXNhdHRyKGF0dHJfdmFsdWUsICJfX2NhbGxfXyIpKToNCiAgICAgICAgICAgICAgICBkZWNvcmF0b3IgPSBfcGF0Y2hfZGljdChzZWxmLmluX2RpY3QsIHNlbGYudmFsdWVzLCBzZWxmLmNsZWFyKQ0KICAgICAgICAgICAgICAgIGRlY29yYXRlZCA9IGRlY29yYXRvcihhdHRyX3ZhbHVlKQ0KICAgICAgICAgICAgICAgIHNldGF0dHIoa2xhc3MsIGF0dHIsIGRlY29yYXRlZCkNCiAgICAgICAgcmV0dXJuIGtsYXNzDQoNCg0KICAgIGRlZiBfX2VudGVyX18oc2VsZik6DQogICAgICAgICIiIlBhdGNoIHRoZSBkaWN0LiIiIg0KICAgICAgICBzZWxmLl9wYXRjaF9kaWN0KCkNCg0KDQogICAgZGVmIF9wYXRjaF9kaWN0KHNlbGYpOg0KICAgICAgICB2YWx1ZXMgPSBzZWxmLnZhbHVlcw0KICAgICAgICBpbl9kaWN0ID0gc2VsZi5pbl9kaWN0DQogICAgICAgIGNsZWFyID0gc2VsZi5jbGVhcg0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIG9yaWdpbmFsID0gaW5fZGljdC5jb3B5KCkNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgIyBkaWN0IGxpa2Ugb2JqZWN0IHdpdGggbm8gY29weSBtZXRob2QNCiAgICAgICAgICAgICMgbXVzdCBzdXBwb3J0IGl0ZXJhdGlvbiBvdmVyIGtleXMNCiAgICAgICAgICAgIG9yaWdpbmFsID0ge30NCiAgICAgICAgICAgIGZvciBrZXkgaW4gaW5fZGljdDoNCiAgICAgICAgICAgICAgICBvcmlnaW5hbFtrZXldID0gaW5fZGljdFtrZXldDQogICAgICAgIHNlbGYuX29yaWdpbmFsID0gb3JpZ2luYWwNCg0KICAgICAgICBpZiBjbGVhcjoNCiAgICAgICAgICAgIF9jbGVhcl9kaWN0KGluX2RpY3QpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaW5fZGljdC51cGRhdGUodmFsdWVzKQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICAjIGRpY3QgbGlrZSBvYmplY3Qgd2l0aCBubyB1cGRhdGUgbWV0aG9kDQogICAgICAgICAgICBmb3Iga2V5IGluIHZhbHVlczoNCiAgICAgICAgICAgICAgICBpbl9kaWN0W2tleV0gPSB2YWx1ZXNba2V5XQ0KDQoNCiAgICBkZWYgX3VucGF0Y2hfZGljdChzZWxmKToNCiAgICAgICAgaW5fZGljdCA9IHNlbGYuaW5fZGljdA0KICAgICAgICBvcmlnaW5hbCA9IHNlbGYuX29yaWdpbmFsDQoNCiAgICAgICAgX2NsZWFyX2RpY3QoaW5fZGljdCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBpbl9kaWN0LnVwZGF0ZShvcmlnaW5hbCkNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgZm9yIGtleSBpbiBvcmlnaW5hbDoNCiAgICAgICAgICAgICAgICBpbl9kaWN0W2tleV0gPSBvcmlnaW5hbFtrZXldDQoNCg0KICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqYXJncyk6DQogICAgICAgICIiIlVucGF0Y2ggdGhlIGRpY3QuIiIiDQogICAgICAgIHNlbGYuX3VucGF0Y2hfZGljdCgpDQogICAgICAgIHJldHVybiBGYWxzZQ0KDQogICAgc3RhcnQgPSBfX2VudGVyX18NCiAgICBzdG9wID0gX19leGl0X18NCg0KDQpkZWYgX2NsZWFyX2RpY3QoaW5fZGljdCk6DQogICAgdHJ5Og0KICAgICAgICBpbl9kaWN0LmNsZWFyKCkNCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgIGtleXMgPSBsaXN0KGluX2RpY3QpDQogICAgICAgIGZvciBrZXkgaW4ga2V5czoNCiAgICAgICAgICAgIGRlbCBpbl9kaWN0W2tleV0NCg0KDQpkZWYgX3BhdGNoX3N0b3BhbGwoKToNCiAgICAiIiJTdG9wIGFsbCBhY3RpdmUgcGF0Y2hlcy4iIiINCiAgICBmb3IgcGF0Y2ggaW4gbGlzdChfcGF0Y2guX2FjdGl2ZV9wYXRjaGVzKToNCiAgICAgICAgcGF0Y2guc3RvcCgpDQoNCg0KcGF0Y2gub2JqZWN0ID0gX3BhdGNoX29iamVjdA0KcGF0Y2guZGljdCA9IF9wYXRjaF9kaWN0DQpwYXRjaC5tdWx0aXBsZSA9IF9wYXRjaF9tdWx0aXBsZQ0KcGF0Y2guc3RvcGFsbCA9IF9wYXRjaF9zdG9wYWxsDQpwYXRjaC5URVNUX1BSRUZJWCA9ICd0ZXN0Jw0KDQptYWdpY19tZXRob2RzID0gKA0KICAgICJsdCBsZSBndCBnZSBlcSBuZSAiDQogICAgImdldGl0ZW0gc2V0aXRlbSBkZWxpdGVtICINCiAgICAibGVuIGNvbnRhaW5zIGl0ZXIgIg0KICAgICJoYXNoIHN0ciBzaXplb2YgIg0KICAgICJlbnRlciBleGl0ICINCiAgICAiZGl2bW9kIG5lZyBwb3MgYWJzIGludmVydCAiDQogICAgImNvbXBsZXggaW50IGZsb2F0IGluZGV4ICINCiAgICAidHJ1bmMgZmxvb3IgY2VpbCAiDQogICAgImJvb2wgbmV4dCAiDQopDQoNCm51bWVyaWNzID0gImFkZCBzdWIgbXVsIGRpdiBmbG9vcmRpdiBtb2QgbHNoaWZ0IHJzaGlmdCBhbmQgeG9yIG9yIHBvdyAiDQppbnBsYWNlID0gJyAnLmpvaW4oJ2klcycgJSBuIGZvciBuIGluIG51bWVyaWNzLnNwbGl0KCkpDQpyaWdodCA9ICcgJy5qb2luKCdyJXMnICUgbiBmb3IgbiBpbiBudW1lcmljcy5zcGxpdCgpKQ0KDQojIG5vdCBpbmNsdWRpbmcgX19wcmVwYXJlX18sIF9faW5zdGFuY2VjaGVja19fLCBfX3N1YmNsYXNzY2hlY2tfXw0KIyAoYXMgdGhleSBhcmUgbWV0YWNsYXNzIG1ldGhvZHMpDQojIF9fZGVsX18gaXMgbm90IHN1cHBvcnRlZCBhdCBhbGwgYXMgaXQgY2F1c2VzIHByb2JsZW1zIGlmIGl0IGV4aXN0cw0KDQpfbm9uX2RlZmF1bHRzID0gc2V0KCdfXyVzX18nICUgbWV0aG9kIGZvciBtZXRob2QgaW4gWw0KICAgICdnZXQnLCAnc2V0JywgJ2RlbGV0ZScsICdyZXZlcnNlZCcsICdtaXNzaW5nJywgJ3JlZHVjZScsICdyZWR1Y2VfZXgnLA0KICAgICdnZXRpbml0YXJncycsICdnZXRuZXdhcmdzJywgJ2dldHN0YXRlJywgJ3NldHN0YXRlJywgJ2dldGZvcm1hdCcsDQogICAgJ3NldGZvcm1hdCcsICdyZXByJywgJ2RpcicsICdzdWJjbGFzc2VzJywgJ2Zvcm1hdCcsDQpdKQ0KDQoNCmRlZiBfZ2V0X21ldGhvZChuYW1lLCBmdW5jKToNCiAgICAiVHVybnMgYSBjYWxsYWJsZSBvYmplY3QgKGxpa2UgYSBtb2NrKSBpbnRvIGEgcmVhbCBmdW5jdGlvbiINCiAgICBkZWYgbWV0aG9kKHNlbGYsICphcmdzLCAqKmt3KToNCiAgICAgICAgcmV0dXJuIGZ1bmMoc2VsZiwgKmFyZ3MsICoqa3cpDQogICAgbWV0aG9kLl9fbmFtZV9fID0gbmFtZQ0KICAgIHJldHVybiBtZXRob2QNCg0KDQpfbWFnaWNzID0gc2V0KA0KICAgICdfXyVzX18nICUgbWV0aG9kIGZvciBtZXRob2QgaW4NCiAgICAnICcuam9pbihbbWFnaWNfbWV0aG9kcywgbnVtZXJpY3MsIGlucGxhY2UsIHJpZ2h0XSkuc3BsaXQoKQ0KKQ0KDQpfYWxsX21hZ2ljcyA9IF9tYWdpY3MgfCBfbm9uX2RlZmF1bHRzDQoNCl91bnN1cHBvcnRlZF9tYWdpY3MgPSBzZXQoWw0KICAgICdfX2dldGF0dHJfXycsICdfX3NldGF0dHJfXycsDQogICAgJ19faW5pdF9fJywgJ19fbmV3X18nLCAnX19wcmVwYXJlX18nDQogICAgJ19faW5zdGFuY2VjaGVja19fJywgJ19fc3ViY2xhc3NjaGVja19fJywNCiAgICAnX19kZWxfXycNCl0pDQoNCl9jYWxjdWxhdGVfcmV0dXJuX3ZhbHVlID0gew0KICAgICdfX2hhc2hfXyc6IGxhbWJkYSBzZWxmOiBvYmplY3QuX19oYXNoX18oc2VsZiksDQogICAgJ19fc3RyX18nOiBsYW1iZGEgc2VsZjogb2JqZWN0Ll9fc3RyX18oc2VsZiksDQogICAgJ19fc2l6ZW9mX18nOiBsYW1iZGEgc2VsZjogb2JqZWN0Ll9fc2l6ZW9mX18oc2VsZiksDQp9DQoNCl9yZXR1cm5fdmFsdWVzID0gew0KICAgICdfX2x0X18nOiBOb3RJbXBsZW1lbnRlZCwNCiAgICAnX19ndF9fJzogTm90SW1wbGVtZW50ZWQsDQogICAgJ19fbGVfXyc6IE5vdEltcGxlbWVudGVkLA0KICAgICdfX2dlX18nOiBOb3RJbXBsZW1lbnRlZCwNCiAgICAnX19pbnRfXyc6IDEsDQogICAgJ19fY29udGFpbnNfXyc6IEZhbHNlLA0KICAgICdfX2xlbl9fJzogMCwNCiAgICAnX19leGl0X18nOiBGYWxzZSwNCiAgICAnX19jb21wbGV4X18nOiAxaiwNCiAgICAnX19mbG9hdF9fJzogMS4wLA0KICAgICdfX2Jvb2xfXyc6IFRydWUsDQogICAgJ19faW5kZXhfXyc6IDEsDQp9DQoNCg0KZGVmIF9nZXRfZXEoc2VsZik6DQogICAgZGVmIF9fZXFfXyhvdGhlcik6DQogICAgICAgIHJldF92YWwgPSBzZWxmLl9fZXFfXy5fbW9ja19yZXR1cm5fdmFsdWUNCiAgICAgICAgaWYgcmV0X3ZhbCBpcyBub3QgREVGQVVMVDoNCiAgICAgICAgICAgIHJldHVybiByZXRfdmFsDQogICAgICAgIHJldHVybiBzZWxmIGlzIG90aGVyDQogICAgcmV0dXJuIF9fZXFfXw0KDQpkZWYgX2dldF9uZShzZWxmKToNCiAgICBkZWYgX19uZV9fKG90aGVyKToNCiAgICAgICAgaWYgc2VsZi5fX25lX18uX21vY2tfcmV0dXJuX3ZhbHVlIGlzIG5vdCBERUZBVUxUOg0KICAgICAgICAgICAgcmV0dXJuIERFRkFVTFQNCiAgICAgICAgcmV0dXJuIHNlbGYgaXMgbm90IG90aGVyDQogICAgcmV0dXJuIF9fbmVfXw0KDQpkZWYgX2dldF9pdGVyKHNlbGYpOg0KICAgIGRlZiBfX2l0ZXJfXygpOg0KICAgICAgICByZXRfdmFsID0gc2VsZi5fX2l0ZXJfXy5fbW9ja19yZXR1cm5fdmFsdWUNCiAgICAgICAgaWYgcmV0X3ZhbCBpcyBERUZBVUxUOg0KICAgICAgICAgICAgcmV0dXJuIGl0ZXIoW10pDQogICAgICAgICMgaWYgcmV0X3ZhbCB3YXMgYWxyZWFkeSBhbiBpdGVyYXRvciwgdGhlbiBjYWxsaW5nIGl0ZXIgb24gaXQgc2hvdWxkDQogICAgICAgICMgcmV0dXJuIHRoZSBpdGVyYXRvciB1bmNoYW5nZWQNCiAgICAgICAgcmV0dXJuIGl0ZXIocmV0X3ZhbCkNCiAgICByZXR1cm4gX19pdGVyX18NCg0KX3NpZGVfZWZmZWN0X21ldGhvZHMgPSB7DQogICAgJ19fZXFfXyc6IF9nZXRfZXEsDQogICAgJ19fbmVfXyc6IF9nZXRfbmUsDQogICAgJ19faXRlcl9fJzogX2dldF9pdGVyLA0KfQ0KDQoNCg0KZGVmIF9zZXRfcmV0dXJuX3ZhbHVlKG1vY2ssIG1ldGhvZCwgbmFtZSk6DQogICAgZml4ZWQgPSBfcmV0dXJuX3ZhbHVlcy5nZXQobmFtZSwgREVGQVVMVCkNCiAgICBpZiBmaXhlZCBpcyBub3QgREVGQVVMVDoNCiAgICAgICAgbWV0aG9kLnJldHVybl92YWx1ZSA9IGZpeGVkDQogICAgICAgIHJldHVybg0KDQogICAgcmV0dXJuX2NhbHVsYXRvciA9IF9jYWxjdWxhdGVfcmV0dXJuX3ZhbHVlLmdldChuYW1lKQ0KICAgIGlmIHJldHVybl9jYWx1bGF0b3IgaXMgbm90IE5vbmU6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJldHVybl92YWx1ZSA9IHJldHVybl9jYWx1bGF0b3IobW9jaykNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgIyBYWFhYIHdoeSBkbyB3ZSByZXR1cm4gQXR0cmlidXRlRXJyb3IgaGVyZT8NCiAgICAgICAgICAgICMgICAgICBzZXQgaXQgYXMgYSBzaWRlX2VmZmVjdCBpbnN0ZWFkPw0KICAgICAgICAgICAgcmV0dXJuX3ZhbHVlID0gQXR0cmlidXRlRXJyb3IobmFtZSkNCiAgICAgICAgbWV0aG9kLnJldHVybl92YWx1ZSA9IHJldHVybl92YWx1ZQ0KICAgICAgICByZXR1cm4NCg0KICAgIHNpZGVfZWZmZWN0b3IgPSBfc2lkZV9lZmZlY3RfbWV0aG9kcy5nZXQobmFtZSkNCiAgICBpZiBzaWRlX2VmZmVjdG9yIGlzIG5vdCBOb25lOg0KICAgICAgICBtZXRob2Quc2lkZV9lZmZlY3QgPSBzaWRlX2VmZmVjdG9yKG1vY2spDQoNCg0KDQpjbGFzcyBNYWdpY01peGluKG9iamVjdCk6DQogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3KToNCiAgICAgICAgX3NhZmVfc3VwZXIoTWFnaWNNaXhpbiwgc2VsZikuX19pbml0X18oKmFyZ3MsICoqa3cpDQogICAgICAgIHNlbGYuX21vY2tfc2V0X21hZ2ljcygpDQoNCg0KICAgIGRlZiBfbW9ja19zZXRfbWFnaWNzKHNlbGYpOg0KICAgICAgICB0aGVzZV9tYWdpY3MgPSBfbWFnaWNzDQoNCiAgICAgICAgaWYgc2VsZi5fbW9ja19tZXRob2RzIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgdGhlc2VfbWFnaWNzID0gX21hZ2ljcy5pbnRlcnNlY3Rpb24oc2VsZi5fbW9ja19tZXRob2RzKQ0KDQogICAgICAgICAgICByZW1vdmVfbWFnaWNzID0gc2V0KCkNCiAgICAgICAgICAgIHJlbW92ZV9tYWdpY3MgPSBfbWFnaWNzIC0gdGhlc2VfbWFnaWNzDQoNCiAgICAgICAgICAgIGZvciBlbnRyeSBpbiByZW1vdmVfbWFnaWNzOg0KICAgICAgICAgICAgICAgIGlmIGVudHJ5IGluIHR5cGUoc2VsZikuX19kaWN0X186DQogICAgICAgICAgICAgICAgICAgICMgcmVtb3ZlIHVubmVlZGVkIG1hZ2ljIG1ldGhvZHMNCiAgICAgICAgICAgICAgICAgICAgZGVsYXR0cihzZWxmLCBlbnRyeSkNCg0KICAgICAgICAjIGRvbid0IG92ZXJ3cml0ZSBleGlzdGluZyBhdHRyaWJ1dGVzIGlmIGNhbGxlZCBhIHNlY29uZCB0aW1lDQogICAgICAgIHRoZXNlX21hZ2ljcyA9IHRoZXNlX21hZ2ljcyAtIHNldCh0eXBlKHNlbGYpLl9fZGljdF9fKQ0KDQogICAgICAgIF90eXBlID0gdHlwZShzZWxmKQ0KICAgICAgICBmb3IgZW50cnkgaW4gdGhlc2VfbWFnaWNzOg0KICAgICAgICAgICAgc2V0YXR0cihfdHlwZSwgZW50cnksIE1hZ2ljUHJveHkoZW50cnksIHNlbGYpKQ0KDQoNCg0KY2xhc3MgTm9uQ2FsbGFibGVNYWdpY01vY2soTWFnaWNNaXhpbiwgTm9uQ2FsbGFibGVNb2NrKToNCiAgICAiIiJBIHZlcnNpb24gb2YgYE1hZ2ljTW9ja2AgdGhhdCBpc24ndCBjYWxsYWJsZS4iIiINCiAgICBkZWYgbW9ja19hZGRfc3BlYyhzZWxmLCBzcGVjLCBzcGVjX3NldD1GYWxzZSk6DQogICAgICAgICIiIkFkZCBhIHNwZWMgdG8gYSBtb2NrLiBgc3BlY2AgY2FuIGVpdGhlciBiZSBhbiBvYmplY3Qgb3IgYQ0KICAgICAgICBsaXN0IG9mIHN0cmluZ3MuIE9ubHkgYXR0cmlidXRlcyBvbiB0aGUgYHNwZWNgIGNhbiBiZSBmZXRjaGVkIGFzDQogICAgICAgIGF0dHJpYnV0ZXMgZnJvbSB0aGUgbW9jay4NCg0KICAgICAgICBJZiBgc3BlY19zZXRgIGlzIFRydWUgdGhlbiBvbmx5IGF0dHJpYnV0ZXMgb24gdGhlIHNwZWMgY2FuIGJlIHNldC4iIiINCiAgICAgICAgc2VsZi5fbW9ja19hZGRfc3BlYyhzcGVjLCBzcGVjX3NldCkNCiAgICAgICAgc2VsZi5fbW9ja19zZXRfbWFnaWNzKCkNCg0KDQoNCmNsYXNzIE1hZ2ljTW9jayhNYWdpY01peGluLCBNb2NrKToNCiAgICAiIiINCiAgICBNYWdpY01vY2sgaXMgYSBzdWJjbGFzcyBvZiBNb2NrIHdpdGggZGVmYXVsdCBpbXBsZW1lbnRhdGlvbnMNCiAgICBvZiBtb3N0IG9mIHRoZSBtYWdpYyBtZXRob2RzLiBZb3UgY2FuIHVzZSBNYWdpY01vY2sgd2l0aG91dCBoYXZpbmcgdG8NCiAgICBjb25maWd1cmUgdGhlIG1hZ2ljIG1ldGhvZHMgeW91cnNlbGYuDQoNCiAgICBJZiB5b3UgdXNlIHRoZSBgc3BlY2Agb3IgYHNwZWNfc2V0YCBhcmd1bWVudHMgdGhlbiAqb25seSogbWFnaWMNCiAgICBtZXRob2RzIHRoYXQgZXhpc3QgaW4gdGhlIHNwZWMgd2lsbCBiZSBjcmVhdGVkLg0KDQogICAgQXR0cmlidXRlcyBhbmQgdGhlIHJldHVybiB2YWx1ZSBvZiBhIGBNYWdpY01vY2tgIHdpbGwgYWxzbyBiZSBgTWFnaWNNb2Nrc2AuDQogICAgIiIiDQogICAgZGVmIG1vY2tfYWRkX3NwZWMoc2VsZiwgc3BlYywgc3BlY19zZXQ9RmFsc2UpOg0KICAgICAgICAiIiJBZGQgYSBzcGVjIHRvIGEgbW9jay4gYHNwZWNgIGNhbiBlaXRoZXIgYmUgYW4gb2JqZWN0IG9yIGENCiAgICAgICAgbGlzdCBvZiBzdHJpbmdzLiBPbmx5IGF0dHJpYnV0ZXMgb24gdGhlIGBzcGVjYCBjYW4gYmUgZmV0Y2hlZCBhcw0KICAgICAgICBhdHRyaWJ1dGVzIGZyb20gdGhlIG1vY2suDQoNCiAgICAgICAgSWYgYHNwZWNfc2V0YCBpcyBUcnVlIHRoZW4gb25seSBhdHRyaWJ1dGVzIG9uIHRoZSBzcGVjIGNhbiBiZSBzZXQuIiIiDQogICAgICAgIHNlbGYuX21vY2tfYWRkX3NwZWMoc3BlYywgc3BlY19zZXQpDQogICAgICAgIHNlbGYuX21vY2tfc2V0X21hZ2ljcygpDQoNCg0KDQpjbGFzcyBNYWdpY1Byb3h5KG9iamVjdCk6DQogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIHBhcmVudCk6DQogICAgICAgIHNlbGYubmFtZSA9IG5hbWUNCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQNCg0KICAgIGRlZiBfX2NhbGxfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICBtID0gc2VsZi5jcmVhdGVfbW9jaygpDQogICAgICAgIHJldHVybiBtKCphcmdzLCAqKmt3YXJncykNCg0KICAgIGRlZiBjcmVhdGVfbW9jayhzZWxmKToNCiAgICAgICAgZW50cnkgPSBzZWxmLm5hbWUNCiAgICAgICAgcGFyZW50ID0gc2VsZi5wYXJlbnQNCiAgICAgICAgbSA9IHBhcmVudC5fZ2V0X2NoaWxkX21vY2sobmFtZT1lbnRyeSwgX25ld19uYW1lPWVudHJ5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbmV3X3BhcmVudD1wYXJlbnQpDQogICAgICAgIHNldGF0dHIocGFyZW50LCBlbnRyeSwgbSkNCiAgICAgICAgX3NldF9yZXR1cm5fdmFsdWUocGFyZW50LCBtLCBlbnRyeSkNCiAgICAgICAgcmV0dXJuIG0NCg0KICAgIGRlZiBfX2dldF9fKHNlbGYsIG9iaiwgX3R5cGU9Tm9uZSk6DQogICAgICAgIHJldHVybiBzZWxmLmNyZWF0ZV9tb2NrKCkNCg0KDQoNCmNsYXNzIF9BTlkob2JqZWN0KToNCiAgICAiQSBoZWxwZXIgb2JqZWN0IHRoYXQgY29tcGFyZXMgZXF1YWwgdG8gZXZlcnl0aGluZy4iDQoNCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgcmV0dXJuIFRydWUNCg0KICAgIGRlZiBfX25lX18oc2VsZiwgb3RoZXIpOg0KICAgICAgICByZXR1cm4gRmFsc2UNCg0KICAgIGRlZiBfX3JlcHJfXyhzZWxmKToNCiAgICAgICAgcmV0dXJuICc8QU5ZPicNCg0KQU5ZID0gX0FOWSgpDQoNCg0KDQpkZWYgX2Zvcm1hdF9jYWxsX3NpZ25hdHVyZShuYW1lLCBhcmdzLCBrd2FyZ3MpOg0KICAgIG1lc3NhZ2UgPSAnJXMoJSVzKScgJSBuYW1lDQogICAgZm9ybWF0dGVkX2FyZ3MgPSAnJw0KICAgIGFyZ3Nfc3RyaW5nID0gJywgJy5qb2luKFtyZXByKGFyZykgZm9yIGFyZyBpbiBhcmdzXSkNCiAgICBrd2FyZ3Nfc3RyaW5nID0gJywgJy5qb2luKFsNCiAgICAgICAgJyVzPSVyJyAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiBrd2FyZ3MuaXRlbXMoKQ0KICAgIF0pDQogICAgaWYgYXJnc19zdHJpbmc6DQogICAgICAgIGZvcm1hdHRlZF9hcmdzID0gYXJnc19zdHJpbmcNCiAgICBpZiBrd2FyZ3Nfc3RyaW5nOg0KICAgICAgICBpZiBmb3JtYXR0ZWRfYXJnczoNCiAgICAgICAgICAgIGZvcm1hdHRlZF9hcmdzICs9ICcsICcNCiAgICAgICAgZm9ybWF0dGVkX2FyZ3MgKz0ga3dhcmdzX3N0cmluZw0KDQogICAgcmV0dXJuIG1lc3NhZ2UgJSBmb3JtYXR0ZWRfYXJncw0KDQoNCg0KY2xhc3MgX0NhbGwodHVwbGUpOg0KICAgICIiIg0KICAgIEEgdHVwbGUgZm9yIGhvbGRpbmcgdGhlIHJlc3VsdHMgb2YgYSBjYWxsIHRvIGEgbW9jaywgZWl0aGVyIGluIHRoZSBmb3JtDQogICAgYChhcmdzLCBrd2FyZ3MpYCBvciBgKG5hbWUsIGFyZ3MsIGt3YXJncylgLg0KDQogICAgSWYgYXJncyBvciBrd2FyZ3MgYXJlIGVtcHR5IHRoZW4gYSBjYWxsIHR1cGxlIHdpbGwgY29tcGFyZSBlcXVhbCB0bw0KICAgIGEgdHVwbGUgd2l0aG91dCB0aG9zZSB2YWx1ZXMuIFRoaXMgbWFrZXMgY29tcGFyaXNvbnMgbGVzcyB2ZXJib3NlOjoNCg0KICAgICAgICBfQ2FsbCgoJ25hbWUnLCAoKSwge30pKSA9PSAoJ25hbWUnLCkNCiAgICAgICAgX0NhbGwoKCduYW1lJywgKDEsKSwge30pKSA9PSAoJ25hbWUnLCAoMSwpKQ0KICAgICAgICBfQ2FsbCgoKCksIHsnYSc6ICdiJ30pKSA9PSAoeydhJzogJ2InfSwpDQoNCiAgICBUaGUgYF9DYWxsYCBvYmplY3QgcHJvdmlkZXMgYSB1c2VmdWwgc2hvcnRjdXQgZm9yIGNvbXBhcmluZyB3aXRoIGNhbGw6Og0KDQogICAgICAgIF9DYWxsKCgoMSwgMiksIHsnYSc6IDN9KSkgPT0gY2FsbCgxLCAyLCBhPTMpDQogICAgICAgIF9DYWxsKCgnZm9vJywgKDEsIDIpLCB7J2EnOiAzfSkpID09IGNhbGwuZm9vKDEsIDIsIGE9MykNCg0KICAgIElmIHRoZSBfQ2FsbCBoYXMgbm8gbmFtZSB0aGVuIGl0IHdpbGwgbWF0Y2ggYW55IG5hbWUuDQogICAgIiIiDQogICAgZGVmIF9fbmV3X18oY2xzLCB2YWx1ZT0oKSwgbmFtZT1Ob25lLCBwYXJlbnQ9Tm9uZSwgdHdvPUZhbHNlLA0KICAgICAgICAgICAgICAgIGZyb21fa2FsbD1UcnVlKToNCiAgICAgICAgbmFtZSA9ICcnDQogICAgICAgIGFyZ3MgPSAoKQ0KICAgICAgICBrd2FyZ3MgPSB7fQ0KICAgICAgICBfbGVuID0gbGVuKHZhbHVlKQ0KICAgICAgICBpZiBfbGVuID09IDM6DQogICAgICAgICAgICBuYW1lLCBhcmdzLCBrd2FyZ3MgPSB2YWx1ZQ0KICAgICAgICBlbGlmIF9sZW4gPT0gMjoNCiAgICAgICAgICAgIGZpcnN0LCBzZWNvbmQgPSB2YWx1ZQ0KICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShmaXJzdCwgc3RyKToNCiAgICAgICAgICAgICAgICBuYW1lID0gZmlyc3QNCiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHNlY29uZCwgdHVwbGUpOg0KICAgICAgICAgICAgICAgICAgICBhcmdzID0gc2Vjb25kDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAga3dhcmdzID0gc2Vjb25kDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGFyZ3MsIGt3YXJncyA9IGZpcnN0LCBzZWNvbmQNCiAgICAgICAgZWxpZiBfbGVuID09IDE6DQogICAgICAgICAgICB2YWx1ZSwgPSB2YWx1ZQ0KICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWx1ZSwgc3RyKToNCiAgICAgICAgICAgICAgICBuYW1lID0gdmFsdWUNCiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2YWx1ZSwgdHVwbGUpOg0KICAgICAgICAgICAgICAgIGFyZ3MgPSB2YWx1ZQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBrd2FyZ3MgPSB2YWx1ZQ0KDQogICAgICAgIGlmIHR3bzoNCiAgICAgICAgICAgIHJldHVybiB0dXBsZS5fX25ld19fKGNscywgKGFyZ3MsIGt3YXJncykpDQoNCiAgICAgICAgcmV0dXJuIHR1cGxlLl9fbmV3X18oY2xzLCAobmFtZSwgYXJncywga3dhcmdzKSkNCg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlPSgpLCBuYW1lPU5vbmUsIHBhcmVudD1Ob25lLCB0d289RmFsc2UsDQogICAgICAgICAgICAgICAgIGZyb21fa2FsbD1UcnVlKToNCiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQ0KICAgICAgICBzZWxmLnBhcmVudCA9IHBhcmVudA0KICAgICAgICBzZWxmLmZyb21fa2FsbCA9IGZyb21fa2FsbA0KDQoNCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgaWYgb3RoZXIgaXMgQU5ZOg0KICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbGVuX290aGVyID0gbGVuKG90aGVyKQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICAgICAgc2VsZl9uYW1lID0gJycNCiAgICAgICAgaWYgbGVuKHNlbGYpID09IDI6DQogICAgICAgICAgICBzZWxmX2FyZ3MsIHNlbGZfa3dhcmdzID0gc2VsZg0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZl9uYW1lLCBzZWxmX2FyZ3MsIHNlbGZfa3dhcmdzID0gc2VsZg0KDQogICAgICAgIG90aGVyX25hbWUgPSAnJw0KICAgICAgICBpZiBsZW5fb3RoZXIgPT0gMDoNCiAgICAgICAgICAgIG90aGVyX2FyZ3MsIG90aGVyX2t3YXJncyA9ICgpLCB7fQ0KICAgICAgICBlbGlmIGxlbl9vdGhlciA9PSAzOg0KICAgICAgICAgICAgb3RoZXJfbmFtZSwgb3RoZXJfYXJncywgb3RoZXJfa3dhcmdzID0gb3RoZXINCiAgICAgICAgZWxpZiBsZW5fb3RoZXIgPT0gMToNCiAgICAgICAgICAgIHZhbHVlLCA9IG90aGVyDQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCB0dXBsZSk6DQogICAgICAgICAgICAgICAgb3RoZXJfYXJncyA9IHZhbHVlDQogICAgICAgICAgICAgICAgb3RoZXJfa3dhcmdzID0ge30NCiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2YWx1ZSwgc3RyKToNCiAgICAgICAgICAgICAgICBvdGhlcl9uYW1lID0gdmFsdWUNCiAgICAgICAgICAgICAgICBvdGhlcl9hcmdzLCBvdGhlcl9rd2FyZ3MgPSAoKSwge30NCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgb3RoZXJfYXJncyA9ICgpDQogICAgICAgICAgICAgICAgb3RoZXJfa3dhcmdzID0gdmFsdWUNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgICMgbGVuIDINCiAgICAgICAgICAgICMgY291bGQgYmUgKG5hbWUsIGFyZ3MpIG9yIChuYW1lLCBrd2FyZ3MpIG9yIChhcmdzLCBrd2FyZ3MpDQogICAgICAgICAgICBmaXJzdCwgc2Vjb25kID0gb3RoZXINCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZmlyc3QsIHN0cik6DQogICAgICAgICAgICAgICAgb3RoZXJfbmFtZSA9IGZpcnN0DQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShzZWNvbmQsIHR1cGxlKToNCiAgICAgICAgICAgICAgICAgICAgb3RoZXJfYXJncywgb3RoZXJfa3dhcmdzID0gc2Vjb25kLCB7fQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIG90aGVyX2FyZ3MsIG90aGVyX2t3YXJncyA9ICgpLCBzZWNvbmQNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgb3RoZXJfYXJncywgb3RoZXJfa3dhcmdzID0gZmlyc3QsIHNlY29uZA0KDQogICAgICAgIGlmIHNlbGZfbmFtZSBhbmQgb3RoZXJfbmFtZSAhPSBzZWxmX25hbWU6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCg0KICAgICAgICAjIHRoaXMgb3JkZXIgaXMgaW1wb3J0YW50IGZvciBBTlkgdG8gd29yayENCiAgICAgICAgcmV0dXJuIChvdGhlcl9hcmdzLCBvdGhlcl9rd2FyZ3MpID09IChzZWxmX2FyZ3MsIHNlbGZfa3dhcmdzKQ0KDQoNCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgcmV0dXJuIG5vdCBzZWxmLl9fZXFfXyhvdGhlcikNCg0KDQogICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgIGlmIHNlbGYubmFtZSBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIF9DYWxsKCgnJywgYXJncywga3dhcmdzKSwgbmFtZT0nKCknKQ0KDQogICAgICAgIG5hbWUgPSBzZWxmLm5hbWUgKyAnKCknDQogICAgICAgIHJldHVybiBfQ2FsbCgoc2VsZi5uYW1lLCBhcmdzLCBrd2FyZ3MpLCBuYW1lPW5hbWUsIHBhcmVudD1zZWxmKQ0KDQoNCiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgYXR0cik6DQogICAgICAgIGlmIHNlbGYubmFtZSBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIF9DYWxsKG5hbWU9YXR0ciwgZnJvbV9rYWxsPUZhbHNlKQ0KICAgICAgICBuYW1lID0gJyVzLiVzJyAlIChzZWxmLm5hbWUsIGF0dHIpDQogICAgICAgIHJldHVybiBfQ2FsbChuYW1lPW5hbWUsIHBhcmVudD1zZWxmLCBmcm9tX2thbGw9RmFsc2UpDQoNCg0KICAgIGRlZiBfX3JlcHJfXyhzZWxmKToNCiAgICAgICAgaWYgbm90IHNlbGYuZnJvbV9rYWxsOg0KICAgICAgICAgICAgbmFtZSA9IHNlbGYubmFtZSBvciAnY2FsbCcNCiAgICAgICAgICAgIGlmIG5hbWUuc3RhcnRzd2l0aCgnKCknKToNCiAgICAgICAgICAgICAgICBuYW1lID0gJ2NhbGwlcycgJSBuYW1lDQogICAgICAgICAgICByZXR1cm4gbmFtZQ0KDQogICAgICAgIGlmIGxlbihzZWxmKSA9PSAyOg0KICAgICAgICAgICAgbmFtZSA9ICdjYWxsJw0KICAgICAgICAgICAgYXJncywga3dhcmdzID0gc2VsZg0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgbmFtZSwgYXJncywga3dhcmdzID0gc2VsZg0KICAgICAgICAgICAgaWYgbm90IG5hbWU6DQogICAgICAgICAgICAgICAgbmFtZSA9ICdjYWxsJw0KICAgICAgICAgICAgZWxpZiBub3QgbmFtZS5zdGFydHN3aXRoKCcoKScpOg0KICAgICAgICAgICAgICAgIG5hbWUgPSAnY2FsbC4lcycgJSBuYW1lDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIG5hbWUgPSAnY2FsbCVzJyAlIG5hbWUNCiAgICAgICAgcmV0dXJuIF9mb3JtYXRfY2FsbF9zaWduYXR1cmUobmFtZSwgYXJncywga3dhcmdzKQ0KDQoNCiAgICBkZWYgY2FsbF9saXN0KHNlbGYpOg0KICAgICAgICAiIiJGb3IgYSBjYWxsIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgbXVsdGlwbGUgY2FsbHMsIGBjYWxsX2xpc3RgDQogICAgICAgIHJldHVybnMgYSBsaXN0IG9mIGFsbCB0aGUgaW50ZXJtZWRpYXRlIGNhbGxzIGFzIHdlbGwgYXMgdGhlDQogICAgICAgIGZpbmFsIGNhbGwuIiIiDQogICAgICAgIHZhbHMgPSBbXQ0KICAgICAgICB0aGluZyA9IHNlbGYNCiAgICAgICAgd2hpbGUgdGhpbmcgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBpZiB0aGluZy5mcm9tX2thbGw6DQogICAgICAgICAgICAgICAgdmFscy5hcHBlbmQodGhpbmcpDQogICAgICAgICAgICB0aGluZyA9IHRoaW5nLnBhcmVudA0KICAgICAgICByZXR1cm4gX0NhbGxMaXN0KHJldmVyc2VkKHZhbHMpKQ0KDQoNCmNhbGwgPSBfQ2FsbChmcm9tX2thbGw9RmFsc2UpDQoNCg0KDQpkZWYgY3JlYXRlX2F1dG9zcGVjKHNwZWMsIHNwZWNfc2V0PUZhbHNlLCBpbnN0YW5jZT1GYWxzZSwgX3BhcmVudD1Ob25lLA0KICAgICAgICAgICAgICAgICAgICBfbmFtZT1Ob25lLCAqKmt3YXJncyk6DQogICAgIiIiQ3JlYXRlIGEgbW9jayBvYmplY3QgdXNpbmcgYW5vdGhlciBvYmplY3QgYXMgYSBzcGVjLiBBdHRyaWJ1dGVzIG9uIHRoZQ0KICAgIG1vY2sgd2lsbCB1c2UgdGhlIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlIG9uIHRoZSBgc3BlY2Agb2JqZWN0IGFzIHRoZWlyDQogICAgc3BlYy4NCg0KICAgIEZ1bmN0aW9ucyBvciBtZXRob2RzIGJlaW5nIG1vY2tlZCB3aWxsIGhhdmUgdGhlaXIgYXJndW1lbnRzIGNoZWNrZWQNCiAgICB0byBjaGVjayB0aGF0IHRoZXkgYXJlIGNhbGxlZCB3aXRoIHRoZSBjb3JyZWN0IHNpZ25hdHVyZS4NCg0KICAgIElmIGBzcGVjX3NldGAgaXMgVHJ1ZSB0aGVuIGF0dGVtcHRpbmcgdG8gc2V0IGF0dHJpYnV0ZXMgdGhhdCBkb24ndCBleGlzdA0KICAgIG9uIHRoZSBzcGVjIG9iamVjdCB3aWxsIHJhaXNlIGFuIGBBdHRyaWJ1dGVFcnJvcmAuDQoNCiAgICBJZiBhIGNsYXNzIGlzIHVzZWQgYXMgYSBzcGVjIHRoZW4gdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgbW9jayAodGhlDQogICAgaW5zdGFuY2Ugb2YgdGhlIGNsYXNzKSB3aWxsIGhhdmUgdGhlIHNhbWUgc3BlYy4gWW91IGNhbiB1c2UgYSBjbGFzcyBhcyB0aGUNCiAgICBzcGVjIGZvciBhbiBpbnN0YW5jZSBvYmplY3QgYnkgcGFzc2luZyBgaW5zdGFuY2U9VHJ1ZWAuIFRoZSByZXR1cm5lZCBtb2NrDQogICAgd2lsbCBvbmx5IGJlIGNhbGxhYmxlIGlmIGluc3RhbmNlcyBvZiB0aGUgbW9jayBhcmUgY2FsbGFibGUuDQoNCiAgICBgY3JlYXRlX2F1dG9zcGVjYCBhbHNvIHRha2VzIGFyYml0cmFyeSBrZXl3b3JkIGFyZ3VtZW50cyB0aGF0IGFyZSBwYXNzZWQgdG8NCiAgICB0aGUgY29uc3RydWN0b3Igb2YgdGhlIGNyZWF0ZWQgbW9jay4iIiINCiAgICBpZiBfaXNfbGlzdChzcGVjKToNCiAgICAgICAgIyBjYW4ndCBwYXNzIGEgbGlzdCBpbnN0YW5jZSB0byB0aGUgbW9jayBjb25zdHJ1Y3RvciBhcyBpdCB3aWxsIGJlDQogICAgICAgICMgaW50ZXJwcmV0ZWQgYXMgYSBsaXN0IG9mIHN0cmluZ3MNCiAgICAgICAgc3BlYyA9IHR5cGUoc3BlYykNCg0KICAgIGlzX3R5cGUgPSBpc2luc3RhbmNlKHNwZWMsIHR5cGUpDQoNCiAgICBfa3dhcmdzID0geydzcGVjJzogc3BlY30NCiAgICBpZiBzcGVjX3NldDoNCiAgICAgICAgX2t3YXJncyA9IHsnc3BlY19zZXQnOiBzcGVjfQ0KICAgIGVsaWYgc3BlYyBpcyBOb25lOg0KICAgICAgICAjIE5vbmUgd2UgbW9jayB3aXRoIGEgbm9ybWFsIG1vY2sgd2l0aG91dCBhIHNwZWMNCiAgICAgICAgX2t3YXJncyA9IHt9DQoNCiAgICBfa3dhcmdzLnVwZGF0ZShrd2FyZ3MpDQoNCiAgICBLbGFzcyA9IE1hZ2ljTW9jaw0KICAgIGlmIHR5cGUoc3BlYykgaW4gRGVzY3JpcHRvclR5cGVzOg0KICAgICAgICAjIGRlc2NyaXB0b3JzIGRvbid0IGhhdmUgYSBzcGVjDQogICAgICAgICMgYmVjYXVzZSB3ZSBkb24ndCBrbm93IHdoYXQgdHlwZSB0aGV5IHJldHVybg0KICAgICAgICBfa3dhcmdzID0ge30NCiAgICBlbGlmIG5vdCBfY2FsbGFibGUoc3BlYyk6DQogICAgICAgIEtsYXNzID0gTm9uQ2FsbGFibGVNYWdpY01vY2sNCiAgICBlbGlmIGlzX3R5cGUgYW5kIGluc3RhbmNlIGFuZCBub3QgX2luc3RhbmNlX2NhbGxhYmxlKHNwZWMpOg0KICAgICAgICBLbGFzcyA9IE5vbkNhbGxhYmxlTWFnaWNNb2NrDQoNCiAgICBfbmV3X25hbWUgPSBfbmFtZQ0KICAgIGlmIF9wYXJlbnQgaXMgTm9uZToNCiAgICAgICAgIyBmb3IgYSB0b3AgbGV2ZWwgb2JqZWN0IG5vIF9uZXdfbmFtZSBzaG91bGQgYmUgc2V0DQogICAgICAgIF9uZXdfbmFtZSA9ICcnDQoNCiAgICBtb2NrID0gS2xhc3MocGFyZW50PV9wYXJlbnQsIF9uZXdfcGFyZW50PV9wYXJlbnQsIF9uZXdfbmFtZT1fbmV3X25hbWUsDQogICAgICAgICAgICAgICAgIG5hbWU9X25hbWUsICoqX2t3YXJncykNCg0KICAgIGlmIGlzaW5zdGFuY2Uoc3BlYywgRnVuY3Rpb25UeXBlcyk6DQogICAgICAgICMgc2hvdWxkIG9ubHkgaGFwcGVuIGF0IHRoZSB0b3AgbGV2ZWwgYmVjYXVzZSB3ZSBkb24ndA0KICAgICAgICAjIHJlY3Vyc2UgZm9yIGZ1bmN0aW9ucw0KICAgICAgICBtb2NrID0gX3NldF9zaWduYXR1cmUobW9jaywgc3BlYykNCiAgICBlbHNlOg0KICAgICAgICBfY2hlY2tfc2lnbmF0dXJlKHNwZWMsIG1vY2ssIGlzX3R5cGUsIGluc3RhbmNlKQ0KDQogICAgaWYgX3BhcmVudCBpcyBub3QgTm9uZSBhbmQgbm90IGluc3RhbmNlOg0KICAgICAgICBfcGFyZW50Ll9tb2NrX2NoaWxkcmVuW19uYW1lXSA9IG1vY2sNCg0KICAgIGlmIGlzX3R5cGUgYW5kIG5vdCBpbnN0YW5jZSBhbmQgJ3JldHVybl92YWx1ZScgbm90IGluIGt3YXJnczoNCiAgICAgICAgbW9jay5yZXR1cm5fdmFsdWUgPSBjcmVhdGVfYXV0b3NwZWMoc3BlYywgc3BlY19zZXQsIGluc3RhbmNlPVRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9uYW1lPScoKScsIF9wYXJlbnQ9bW9jaykNCg0KICAgIGZvciBlbnRyeSBpbiBkaXIoc3BlYyk6DQogICAgICAgIGlmIF9pc19tYWdpYyhlbnRyeSk6DQogICAgICAgICAgICAjIE1hZ2ljTW9jayBhbHJlYWR5IGRvZXMgdGhlIHVzZWZ1bCBtYWdpYyBtZXRob2RzIGZvciB1cw0KICAgICAgICAgICAgY29udGludWUNCg0KICAgICAgICAjIFhYWFggZG8gd2UgbmVlZCBhIGJldHRlciB3YXkgb2YgZ2V0dGluZyBhdHRyaWJ1dGVzIHdpdGhvdXQNCiAgICAgICAgIyB0cmlnZ2VyaW5nIGNvZGUgZXhlY3V0aW9uICg/KSBQcm9iYWJseSBub3QgLSB3ZSBuZWVkIHRoZSBhY3R1YWwNCiAgICAgICAgIyBvYmplY3QgdG8gbW9jayBpdCBzbyB3ZSB3b3VsZCByYXRoZXIgdHJpZ2dlciBhIHByb3BlcnR5IHRoYW4gbW9jaw0KICAgICAgICAjIHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yLiBMaWtld2lzZSB3ZSB3YW50IHRvIG1vY2sgb3V0IGR5bmFtaWNhbGx5DQogICAgICAgICMgcHJvdmlkZWQgYXR0cmlidXRlcy4NCiAgICAgICAgIyBYWFhYIHdoYXQgYWJvdXQgYXR0cmlidXRlcyB0aGF0IHJhaXNlIGV4Y2VwdGlvbnMgb3RoZXIgdGhhbg0KICAgICAgICAjIEF0dHJpYnV0ZUVycm9yIG9uIGJlaW5nIGZldGNoZWQ/DQogICAgICAgICMgd2UgY291bGQgYmUgcmVzaWxpZW50IGFnYWluc3QgaXQsIG9yIGNhdGNoIGFuZCBwcm9wYWdhdGUgdGhlDQogICAgICAgICMgZXhjZXB0aW9uIHdoZW4gdGhlIGF0dHJpYnV0ZSBpcyBmZXRjaGVkIGZyb20gdGhlIG1vY2sNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgb3JpZ2luYWwgPSBnZXRhdHRyKHNwZWMsIGVudHJ5KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBjb250aW51ZQ0KDQogICAgICAgIGt3YXJncyA9IHsnc3BlYyc6IG9yaWdpbmFsfQ0KICAgICAgICBpZiBzcGVjX3NldDoNCiAgICAgICAgICAgIGt3YXJncyA9IHsnc3BlY19zZXQnOiBvcmlnaW5hbH0NCg0KICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvcmlnaW5hbCwgRnVuY3Rpb25UeXBlcyk6DQogICAgICAgICAgICBuZXcgPSBfU3BlY1N0YXRlKG9yaWdpbmFsLCBzcGVjX3NldCwgbW9jaywgZW50cnksIGluc3RhbmNlKQ0KICAgICAgICAgICAgbW9jay5fbW9ja19jaGlsZHJlbltlbnRyeV0gPSBuZXcNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHBhcmVudCA9IG1vY2sNCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uoc3BlYywgRnVuY3Rpb25UeXBlcyk6DQogICAgICAgICAgICAgICAgcGFyZW50ID0gbW9jay5tb2NrDQoNCiAgICAgICAgICAgIG5ldyA9IE1hZ2ljTW9jayhwYXJlbnQ9cGFyZW50LCBuYW1lPWVudHJ5LCBfbmV3X25hbWU9ZW50cnksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX25ld19wYXJlbnQ9cGFyZW50LCAqKmt3YXJncykNCiAgICAgICAgICAgIG1vY2suX21vY2tfY2hpbGRyZW5bZW50cnldID0gbmV3DQogICAgICAgICAgICBza2lwZmlyc3QgPSBfbXVzdF9za2lwKHNwZWMsIGVudHJ5LCBpc190eXBlKQ0KICAgICAgICAgICAgX2NoZWNrX3NpZ25hdHVyZShvcmlnaW5hbCwgbmV3LCBza2lwZmlyc3Q9c2tpcGZpcnN0KQ0KDQogICAgICAgICMgc28gZnVuY3Rpb25zIGNyZWF0ZWQgd2l0aCBfc2V0X3NpZ25hdHVyZSBiZWNvbWUgaW5zdGFuY2UgYXR0cmlidXRlcywNCiAgICAgICAgIyAqcGx1cyogdGhlaXIgdW5kZXJseWluZyBtb2NrIGV4aXN0cyBpbiBfbW9ja19jaGlsZHJlbiBvZiB0aGUgcGFyZW50DQogICAgICAgICMgbW9jay4gQWRkaW5nIHRvIF9tb2NrX2NoaWxkcmVuIG1heSBiZSB1bm5lY2Vzc2FyeSB3aGVyZSB3ZSBhcmUgYWxzbw0KICAgICAgICAjIHNldHRpbmcgYXMgYW4gaW5zdGFuY2UgYXR0cmlidXRlPw0KICAgICAgICBpZiBpc2luc3RhbmNlKG5ldywgRnVuY3Rpb25UeXBlcyk6DQogICAgICAgICAgICBzZXRhdHRyKG1vY2ssIGVudHJ5LCBuZXcpDQoNCiAgICByZXR1cm4gbW9jaw0KDQoNCmRlZiBfbXVzdF9za2lwKHNwZWMsIGVudHJ5LCBpc190eXBlKToNCiAgICBpZiBub3QgaXNpbnN0YW5jZShzcGVjLCB0eXBlKToNCiAgICAgICAgaWYgZW50cnkgaW4gZ2V0YXR0cihzcGVjLCAnX19kaWN0X18nLCB7fSk6DQogICAgICAgICAgICAjIGluc3RhbmNlIGF0dHJpYnV0ZSAtIHNob3VsZG4ndCBza2lwDQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgc3BlYyA9IHNwZWMuX19jbGFzc19fDQoNCiAgICBmb3Iga2xhc3MgaW4gc3BlYy5fX21yb19fOg0KICAgICAgICByZXN1bHQgPSBrbGFzcy5fX2RpY3RfXy5nZXQoZW50cnksIERFRkFVTFQpDQogICAgICAgIGlmIHJlc3VsdCBpcyBERUZBVUxUOg0KICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgaWYgaXNpbnN0YW5jZShyZXN1bHQsIChzdGF0aWNtZXRob2QsIGNsYXNzbWV0aG9kKSk6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgcmV0dXJuIGlzX3R5cGUNCg0KICAgICMgc2hvdWxkbid0IGdldCBoZXJlIHVubGVzcyBmdW5jdGlvbiBpcyBhIGR5bmFtaWNhbGx5IHByb3ZpZGVkIGF0dHJpYnV0ZQ0KICAgICMgWFhYWCB1bnRlc3RlZCBiZWhhdmlvdXINCiAgICByZXR1cm4gaXNfdHlwZQ0KDQoNCmRlZiBfZ2V0X2NsYXNzKG9iaik6DQogICAgdHJ5Og0KICAgICAgICByZXR1cm4gb2JqLl9fY2xhc3NfXw0KICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoNCiAgICAgICAgIyBpdCBpcyBwb3NzaWJsZSBmb3Igb2JqZWN0cyB0byBoYXZlIG5vIF9fY2xhc3NfXw0KICAgICAgICByZXR1cm4gdHlwZShvYmopDQoNCg0KY2xhc3MgX1NwZWNTdGF0ZShvYmplY3QpOg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIHNwZWMsIHNwZWNfc2V0PUZhbHNlLCBwYXJlbnQ9Tm9uZSwNCiAgICAgICAgICAgICAgICAgbmFtZT1Ob25lLCBpZHM9Tm9uZSwgaW5zdGFuY2U9RmFsc2UpOg0KICAgICAgICBzZWxmLnNwZWMgPSBzcGVjDQogICAgICAgIHNlbGYuaWRzID0gaWRzDQogICAgICAgIHNlbGYuc3BlY19zZXQgPSBzcGVjX3NldA0KICAgICAgICBzZWxmLnBhcmVudCA9IHBhcmVudA0KICAgICAgICBzZWxmLmluc3RhbmNlID0gaW5zdGFuY2UNCiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQ0KDQoNCkZ1bmN0aW9uVHlwZXMgPSAoDQogICAgIyBweXRob24gZnVuY3Rpb24NCiAgICB0eXBlKGNyZWF0ZV9hdXRvc3BlYyksDQogICAgIyBpbnN0YW5jZSBtZXRob2QNCiAgICB0eXBlKEFOWS5fX2VxX18pLA0KKQ0KDQoNCmZpbGVfc3BlYyA9IE5vbmUNCg0KDQpkZWYgbW9ja19vcGVuKG1vY2s9Tm9uZSwgcmVhZF9kYXRhPScnKToNCiAgICAiIiINCiAgICBBIGhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBtb2NrIHRvIHJlcGxhY2UgdGhlIHVzZSBvZiBgb3BlbmAuIEl0IHdvcmtzDQogICAgZm9yIGBvcGVuYCBjYWxsZWQgZGlyZWN0bHkgb3IgdXNlZCBhcyBhIGNvbnRleHQgbWFuYWdlci4NCg0KICAgIFRoZSBgbW9ja2AgYXJndW1lbnQgaXMgdGhlIG1vY2sgb2JqZWN0IHRvIGNvbmZpZ3VyZS4gSWYgYE5vbmVgICh0aGUNCiAgICBkZWZhdWx0KSB0aGVuIGEgYE1hZ2ljTW9ja2Agd2lsbCBiZSBjcmVhdGVkIGZvciB5b3UsIHdpdGggdGhlIEFQSSBsaW1pdGVkDQogICAgdG8gbWV0aG9kcyBvciBhdHRyaWJ1dGVzIGF2YWlsYWJsZSBvbiBzdGFuZGFyZCBmaWxlIGhhbmRsZXMuDQoNCiAgICBgcmVhZF9kYXRhYCBpcyBhIHN0cmluZyBmb3IgdGhlIGByZWFkYCBtZXRob2Qgb2YgdGhlIGZpbGUgaGFuZGxlIHRvIHJldHVybi4NCiAgICBUaGlzIGlzIGFuIGVtcHR5IHN0cmluZyBieSBkZWZhdWx0Lg0KICAgICIiIg0KICAgIGdsb2JhbCBmaWxlX3NwZWMNCiAgICBpZiBmaWxlX3NwZWMgaXMgTm9uZToNCiAgICAgICAgaW1wb3J0IF9pbw0KICAgICAgICBmaWxlX3NwZWMgPSBsaXN0KHNldChkaXIoX2lvLlRleHRJT1dyYXBwZXIpKS51bmlvbihzZXQoZGlyKF9pby5CeXRlc0lPKSkpKQ0KDQogICAgaWYgbW9jayBpcyBOb25lOg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKG5hbWU9J29wZW4nLCBzcGVjPW9wZW4pDQoNCiAgICBoYW5kbGUgPSBNYWdpY01vY2soc3BlYz1maWxlX3NwZWMpDQogICAgaGFuZGxlLndyaXRlLnJldHVybl92YWx1ZSA9IE5vbmUNCiAgICBoYW5kbGUuX19lbnRlcl9fLnJldHVybl92YWx1ZSA9IGhhbmRsZQ0KICAgIGhhbmRsZS5yZWFkLnJldHVybl92YWx1ZSA9IHJlYWRfZGF0YQ0KDQogICAgbW9jay5yZXR1cm5fdmFsdWUgPSBoYW5kbGUNCiAgICByZXR1cm4gbW9jaw0KDQoNCmNsYXNzIFByb3BlcnR5TW9jayhNb2NrKToNCiAgICAiIiINCiAgICBBIG1vY2sgaW50ZW5kZWQgdG8gYmUgdXNlZCBhcyBhIHByb3BlcnR5LCBvciBvdGhlciBkZXNjcmlwdG9yLCBvbiBhIGNsYXNzLg0KICAgIGBQcm9wZXJ0eU1vY2tgIHByb3ZpZGVzIGBfX2dldF9fYCBhbmQgYF9fc2V0X19gIG1ldGhvZHMgc28geW91IGNhbiBzcGVjaWZ5DQogICAgYSByZXR1cm4gdmFsdWUgd2hlbiBpdCBpcyBmZXRjaGVkLg0KDQogICAgRmV0Y2hpbmcgYSBgUHJvcGVydHlNb2NrYCBpbnN0YW5jZSBmcm9tIGFuIG9iamVjdCBjYWxscyB0aGUgbW9jaywgd2l0aA0KICAgIG5vIGFyZ3MuIFNldHRpbmcgaXQgY2FsbHMgdGhlIG1vY2sgd2l0aCB0aGUgdmFsdWUgYmVpbmcgc2V0Lg0KICAgICIiIg0KICAgIGRlZiBfZ2V0X2NoaWxkX21vY2soc2VsZiwgKiprd2FyZ3MpOg0KICAgICAgICByZXR1cm4gTWFnaWNNb2NrKCoqa3dhcmdzKQ0KDQogICAgZGVmIF9fZ2V0X18oc2VsZiwgb2JqLCBvYmpfdHlwZSk6DQogICAgICAgIHJldHVybiBzZWxmKCkNCiAgICBkZWYgX19zZXRfXyhzZWxmLCBvYmosIHZhbCk6DQogICAgICAgIHNlbGYodmFsKQ0K',
'/Lib/unittest/suite.py':'IiIiVGVzdFN1aXRlIiIiCgppbXBvcnQgc3lzCgpmcm9tIC4gaW1wb3J0IGNhc2UKZnJvbSAuIGltcG9ydCB1dGlsCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKCmRlZiBfY2FsbF9pZl9leGlzdHMocGFyZW50LCBhdHRyKToKICAgIGZ1bmMgPSBnZXRhdHRyKHBhcmVudCwgYXR0ciwgbGFtYmRhOiBOb25lKQogICAgZnVuYygpCgoKY2xhc3MgQmFzZVRlc3RTdWl0ZShvYmplY3QpOgogICAgIiIiQSBzaW1wbGUgdGVzdCBzdWl0ZSB0aGF0IGRvZXNuJ3QgcHJvdmlkZSBjbGFzcyBvciBtb2R1bGUgc2hhcmVkIGZpeHR1cmVzLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGVzdHM9KCkpOgogICAgICAgIHNlbGYuX3Rlc3RzID0gW10KICAgICAgICBzZWxmLmFkZFRlc3RzKHRlc3RzKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIjwlcyB0ZXN0cz0lcz4iICUgKHV0aWwuc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pLCBsaXN0KHNlbGYpKQoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBzZWxmLl9fY2xhc3NfXyk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJldHVybiBsaXN0KHNlbGYpID09IGxpc3Qob3RoZXIpCgogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIG5vdCBzZWxmID09IG90aGVyCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBpdGVyKHNlbGYuX3Rlc3RzKQoKICAgIGRlZiBjb3VudFRlc3RDYXNlcyhzZWxmKToKICAgICAgICBjYXNlcyA9IDAKICAgICAgICBmb3IgdGVzdCBpbiBzZWxmOgogICAgICAgICAgICBjYXNlcyArPSB0ZXN0LmNvdW50VGVzdENhc2VzKCkKICAgICAgICByZXR1cm4gY2FzZXMKCiAgICBkZWYgYWRkVGVzdChzZWxmLCB0ZXN0KToKICAgICAgICAjIHNhbml0eSBjaGVja3MKICAgICAgICBpZiBub3QgY2FsbGFibGUodGVzdCk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigie30gaXMgbm90IGNhbGxhYmxlIi5mb3JtYXQocmVwcih0ZXN0KSkpCiAgICAgICAgaWYgaXNpbnN0YW5jZSh0ZXN0LCB0eXBlKSBhbmQgaXNzdWJjbGFzcyh0ZXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNhc2UuVGVzdENhc2UsIFRlc3RTdWl0ZSkpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlRlc3RDYXNlcyBhbmQgVGVzdFN1aXRlcyBtdXN0IGJlIGluc3RhbnRpYXRlZCAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYmVmb3JlIHBhc3NpbmcgdGhlbSB0byBhZGRUZXN0KCkiKQogICAgICAgIHNlbGYuX3Rlc3RzLmFwcGVuZCh0ZXN0KQoKICAgIGRlZiBhZGRUZXN0cyhzZWxmLCB0ZXN0cyk6CiAgICAgICAgaWYgaXNpbnN0YW5jZSh0ZXN0cywgc3RyKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ0ZXN0cyBtdXN0IGJlIGFuIGl0ZXJhYmxlIG9mIHRlc3RzLCBub3QgYSBzdHJpbmciKQogICAgICAgIGZvciB0ZXN0IGluIHRlc3RzOgogICAgICAgICAgICBzZWxmLmFkZFRlc3QodGVzdCkKCiAgICBkZWYgcnVuKHNlbGYsIHJlc3VsdCk6CiAgICAgICAgZm9yIHRlc3QgaW4gc2VsZjoKICAgICAgICAgICAgaWYgcmVzdWx0LnNob3VsZFN0b3A6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB0ZXN0KHJlc3VsdCkKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3ZHMpOgogICAgICAgIHJldHVybiBzZWxmLnJ1bigqYXJncywgKiprd2RzKQoKICAgIGRlZiBkZWJ1ZyhzZWxmKToKICAgICAgICAiIiJSdW4gdGhlIHRlc3RzIHdpdGhvdXQgY29sbGVjdGluZyBlcnJvcnMgaW4gYSBUZXN0UmVzdWx0IiIiCiAgICAgICAgZm9yIHRlc3QgaW4gc2VsZjoKICAgICAgICAgICAgdGVzdC5kZWJ1ZygpCgoKY2xhc3MgVGVzdFN1aXRlKEJhc2VUZXN0U3VpdGUpOgogICAgIiIiQSB0ZXN0IHN1aXRlIGlzIGEgY29tcG9zaXRlIHRlc3QgY29uc2lzdGluZyBvZiBhIG51bWJlciBvZiBUZXN0Q2FzZXMuCgogICAgRm9yIHVzZSwgY3JlYXRlIGFuIGluc3RhbmNlIG9mIFRlc3RTdWl0ZSwgdGhlbiBhZGQgdGVzdCBjYXNlIGluc3RhbmNlcy4KICAgIFdoZW4gYWxsIHRlc3RzIGhhdmUgYmVlbiBhZGRlZCwgdGhlIHN1aXRlIGNhbiBiZSBwYXNzZWQgdG8gYSB0ZXN0CiAgICBydW5uZXIsIHN1Y2ggYXMgVGV4dFRlc3RSdW5uZXIuIEl0IHdpbGwgcnVuIHRoZSBpbmRpdmlkdWFsIHRlc3QgY2FzZXMKICAgIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IHdlcmUgYWRkZWQsIGFnZ3JlZ2F0aW5nIHRoZSByZXN1bHRzLiBXaGVuCiAgICBzdWJjbGFzc2luZywgZG8gbm90IGZvcmdldCB0byBjYWxsIHRoZSBiYXNlIGNsYXNzIGNvbnN0cnVjdG9yLgogICAgIiIiCgogICAgZGVmIHJ1bihzZWxmLCByZXN1bHQsIGRlYnVnPUZhbHNlKToKICAgICAgICB0b3BMZXZlbCA9IEZhbHNlCiAgICAgICAgaWYgZ2V0YXR0cihyZXN1bHQsICdfdGVzdFJ1bkVudGVyZWQnLCBGYWxzZSkgaXMgRmFsc2U6CiAgICAgICAgICAgIHJlc3VsdC5fdGVzdFJ1bkVudGVyZWQgPSB0b3BMZXZlbCA9IFRydWUKCiAgICAgICAgZm9yIHRlc3QgaW4gc2VsZjoKICAgICAgICAgICAgaWYgcmVzdWx0LnNob3VsZFN0b3A6CiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgaWYgX2lzbm90c3VpdGUodGVzdCk6CiAgICAgICAgICAgICAgICBzZWxmLl90ZWFyRG93blByZXZpb3VzQ2xhc3ModGVzdCwgcmVzdWx0KQogICAgICAgICAgICAgICAgc2VsZi5faGFuZGxlTW9kdWxlRml4dHVyZSh0ZXN0LCByZXN1bHQpCiAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVDbGFzc1NldFVwKHRlc3QsIHJlc3VsdCkKICAgICAgICAgICAgICAgIHJlc3VsdC5fcHJldmlvdXNUZXN0Q2xhc3MgPSB0ZXN0Ll9fY2xhc3NfXwoKICAgICAgICAgICAgICAgIGlmIChnZXRhdHRyKHRlc3QuX19jbGFzc19fLCAnX2NsYXNzU2V0dXBGYWlsZWQnLCBGYWxzZSkgb3IKICAgICAgICAgICAgICAgICAgICBnZXRhdHRyKHJlc3VsdCwgJ19tb2R1bGVTZXRVcEZhaWxlZCcsIEZhbHNlKSk6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIGlmIG5vdCBkZWJ1ZzoKICAgICAgICAgICAgICAgIHRlc3QocmVzdWx0KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdGVzdC5kZWJ1ZygpCgogICAgICAgIGlmIHRvcExldmVsOgogICAgICAgICAgICBzZWxmLl90ZWFyRG93blByZXZpb3VzQ2xhc3MoTm9uZSwgcmVzdWx0KQogICAgICAgICAgICBzZWxmLl9oYW5kbGVNb2R1bGVUZWFyRG93bihyZXN1bHQpCiAgICAgICAgICAgIHJlc3VsdC5fdGVzdFJ1bkVudGVyZWQgPSBGYWxzZQogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgZGVidWcoc2VsZik6CiAgICAgICAgIiIiUnVuIHRoZSB0ZXN0cyB3aXRob3V0IGNvbGxlY3RpbmcgZXJyb3JzIGluIGEgVGVzdFJlc3VsdCIiIgogICAgICAgIGRlYnVnID0gX0RlYnVnUmVzdWx0KCkKICAgICAgICBzZWxmLnJ1bihkZWJ1ZywgVHJ1ZSkKCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAgIGRlZiBfaGFuZGxlQ2xhc3NTZXRVcChzZWxmLCB0ZXN0LCByZXN1bHQpOgogICAgICAgIHByZXZpb3VzQ2xhc3MgPSBnZXRhdHRyKHJlc3VsdCwgJ19wcmV2aW91c1Rlc3RDbGFzcycsIE5vbmUpCiAgICAgICAgY3VycmVudENsYXNzID0gdGVzdC5fX2NsYXNzX18KICAgICAgICBpZiBjdXJyZW50Q2xhc3MgPT0gcHJldmlvdXNDbGFzczoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgcmVzdWx0Ll9tb2R1bGVTZXRVcEZhaWxlZDoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgZ2V0YXR0cihjdXJyZW50Q2xhc3MsICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRyeToKICAgICAgICAgICAgY3VycmVudENsYXNzLl9jbGFzc1NldHVwRmFpbGVkID0gRmFsc2UKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAjIHRlc3QgbWF5IGFjdHVhbGx5IGJlIGEgZnVuY3Rpb24KICAgICAgICAgICAgIyBzbyBpdHMgY2xhc3Mgd2lsbCBiZSBhIGJ1aWx0aW4tdHlwZQogICAgICAgICAgICBwYXNzCgogICAgICAgIHNldFVwQ2xhc3MgPSBnZXRhdHRyKGN1cnJlbnRDbGFzcywgJ3NldFVwQ2xhc3MnLCBOb25lKQogICAgICAgIGlmIHNldFVwQ2xhc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfc2V0dXBTdGRvdXQnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZXRVcENsYXNzKCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShyZXN1bHQsIF9EZWJ1Z1Jlc3VsdCk6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgICAgIGN1cnJlbnRDbGFzcy5fY2xhc3NTZXR1cEZhaWxlZCA9IFRydWUKICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IHV0aWwuc3RyY2xhc3MoY3VycmVudENsYXNzKQogICAgICAgICAgICAgICAgZXJyb3JOYW1lID0gJ3NldFVwQ2xhc3MgKCVzKScgJSBjbGFzc05hbWUKICAgICAgICAgICAgICAgIHNlbGYuX2FkZENsYXNzT3JNb2R1bGVMZXZlbEV4Y2VwdGlvbihyZXN1bHQsIGUsIGVycm9yTmFtZSkKICAgICAgICAgICAgZmluYWxseToKICAgICAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfcmVzdG9yZVN0ZG91dCcpCgogICAgZGVmIF9nZXRfcHJldmlvdXNfbW9kdWxlKHNlbGYsIHJlc3VsdCk6CiAgICAgICAgcHJldmlvdXNNb2R1bGUgPSBOb25lCiAgICAgICAgcHJldmlvdXNDbGFzcyA9IGdldGF0dHIocmVzdWx0LCAnX3ByZXZpb3VzVGVzdENsYXNzJywgTm9uZSkKICAgICAgICBpZiBwcmV2aW91c0NsYXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBwcmV2aW91c01vZHVsZSA9IHByZXZpb3VzQ2xhc3MuX19tb2R1bGVfXwogICAgICAgIHJldHVybiBwcmV2aW91c01vZHVsZQoKCiAgICBkZWYgX2hhbmRsZU1vZHVsZUZpeHR1cmUoc2VsZiwgdGVzdCwgcmVzdWx0KToKICAgICAgICBwcmV2aW91c01vZHVsZSA9IHNlbGYuX2dldF9wcmV2aW91c19tb2R1bGUocmVzdWx0KQogICAgICAgIGN1cnJlbnRNb2R1bGUgPSB0ZXN0Ll9fY2xhc3NfXy5fX21vZHVsZV9fCiAgICAgICAgaWYgY3VycmVudE1vZHVsZSA9PSBwcmV2aW91c01vZHVsZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYuX2hhbmRsZU1vZHVsZVRlYXJEb3duKHJlc3VsdCkKCgogICAgICAgIHJlc3VsdC5fbW9kdWxlU2V0VXBGYWlsZWQgPSBGYWxzZQogICAgICAgIHRyeToKICAgICAgICAgICAgbW9kdWxlID0gc3lzLm1vZHVsZXNbY3VycmVudE1vZHVsZV0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHNldFVwTW9kdWxlID0gZ2V0YXR0cihtb2R1bGUsICdzZXRVcE1vZHVsZScsIE5vbmUpCiAgICAgICAgaWYgc2V0VXBNb2R1bGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfc2V0dXBTdGRvdXQnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZXRVcE1vZHVsZSgpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocmVzdWx0LCBfRGVidWdSZXN1bHQpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICByZXN1bHQuX21vZHVsZVNldFVwRmFpbGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgZXJyb3JOYW1lID0gJ3NldFVwTW9kdWxlICglcyknICUgY3VycmVudE1vZHVsZQogICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NPck1vZHVsZUxldmVsRXhjZXB0aW9uKHJlc3VsdCwgZSwgZXJyb3JOYW1lKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgX2NhbGxfaWZfZXhpc3RzKHJlc3VsdCwgJ19yZXN0b3JlU3Rkb3V0JykKCiAgICBkZWYgX2FkZENsYXNzT3JNb2R1bGVMZXZlbEV4Y2VwdGlvbihzZWxmLCByZXN1bHQsIGV4Y2VwdGlvbiwgZXJyb3JOYW1lKToKICAgICAgICBlcnJvciA9IF9FcnJvckhvbGRlcihlcnJvck5hbWUpCiAgICAgICAgYWRkU2tpcCA9IGdldGF0dHIocmVzdWx0LCAnYWRkU2tpcCcsIE5vbmUpCiAgICAgICAgaWYgYWRkU2tpcCBpcyBub3QgTm9uZSBhbmQgaXNpbnN0YW5jZShleGNlcHRpb24sIGNhc2UuU2tpcFRlc3QpOgogICAgICAgICAgICBhZGRTa2lwKGVycm9yLCBzdHIoZXhjZXB0aW9uKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXN1bHQuYWRkRXJyb3IoZXJyb3IsIHN5cy5leGNfaW5mbygpKQoKICAgIGRlZiBfaGFuZGxlTW9kdWxlVGVhckRvd24oc2VsZiwgcmVzdWx0KToKICAgICAgICBwcmV2aW91c01vZHVsZSA9IHNlbGYuX2dldF9wcmV2aW91c19tb2R1bGUocmVzdWx0KQogICAgICAgIGlmIHByZXZpb3VzTW9kdWxlIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGlmIHJlc3VsdC5fbW9kdWxlU2V0VXBGYWlsZWQ6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW3ByZXZpb3VzTW9kdWxlXQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRlYXJEb3duTW9kdWxlID0gZ2V0YXR0cihtb2R1bGUsICd0ZWFyRG93bk1vZHVsZScsIE5vbmUpCiAgICAgICAgaWYgdGVhckRvd25Nb2R1bGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfc2V0dXBTdGRvdXQnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB0ZWFyRG93bk1vZHVsZSgpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocmVzdWx0LCBfRGVidWdSZXN1bHQpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBlcnJvck5hbWUgPSAndGVhckRvd25Nb2R1bGUgKCVzKScgJSBwcmV2aW91c01vZHVsZQogICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NPck1vZHVsZUxldmVsRXhjZXB0aW9uKHJlc3VsdCwgZSwgZXJyb3JOYW1lKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgX2NhbGxfaWZfZXhpc3RzKHJlc3VsdCwgJ19yZXN0b3JlU3Rkb3V0JykKCiAgICBkZWYgX3RlYXJEb3duUHJldmlvdXNDbGFzcyhzZWxmLCB0ZXN0LCByZXN1bHQpOgogICAgICAgIHByZXZpb3VzQ2xhc3MgPSBnZXRhdHRyKHJlc3VsdCwgJ19wcmV2aW91c1Rlc3RDbGFzcycsIE5vbmUpCiAgICAgICAgY3VycmVudENsYXNzID0gdGVzdC5fX2NsYXNzX18KICAgICAgICBpZiBjdXJyZW50Q2xhc3MgPT0gcHJldmlvdXNDbGFzczoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgZ2V0YXR0cihwcmV2aW91c0NsYXNzLCAnX2NsYXNzU2V0dXBGYWlsZWQnLCBGYWxzZSk6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGlmIGdldGF0dHIocmVzdWx0LCAnX21vZHVsZVNldFVwRmFpbGVkJywgRmFsc2UpOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBpZiBnZXRhdHRyKHByZXZpb3VzQ2xhc3MsICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRlYXJEb3duQ2xhc3MgPSBnZXRhdHRyKHByZXZpb3VzQ2xhc3MsICd0ZWFyRG93bkNsYXNzJywgTm9uZSkKICAgICAgICBpZiB0ZWFyRG93bkNsYXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBfY2FsbF9pZl9leGlzdHMocmVzdWx0LCAnX3NldHVwU3Rkb3V0JykKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdGVhckRvd25DbGFzcygpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocmVzdWx0LCBfRGVidWdSZXN1bHQpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSB1dGlsLnN0cmNsYXNzKHByZXZpb3VzQ2xhc3MpCiAgICAgICAgICAgICAgICBlcnJvck5hbWUgPSAndGVhckRvd25DbGFzcyAoJXMpJyAlIGNsYXNzTmFtZQogICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NPck1vZHVsZUxldmVsRXhjZXB0aW9uKHJlc3VsdCwgZSwgZXJyb3JOYW1lKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgX2NhbGxfaWZfZXhpc3RzKHJlc3VsdCwgJ19yZXN0b3JlU3Rkb3V0JykKCgpjbGFzcyBfRXJyb3JIb2xkZXIob2JqZWN0KToKICAgICIiIgogICAgUGxhY2Vob2xkZXIgZm9yIGEgVGVzdENhc2UgaW5zaWRlIGEgcmVzdWx0LiBBcyBmYXIgYXMgYSBUZXN0UmVzdWx0CiAgICBpcyBjb25jZXJuZWQsIHRoaXMgbG9va3MgZXhhY3RseSBsaWtlIGEgdW5pdCB0ZXN0LiBVc2VkIHRvIGluc2VydAogICAgYXJiaXRyYXJ5IGVycm9ycyBpbnRvIGEgdGVzdCBzdWl0ZSBydW4uCiAgICAiIiIKICAgICMgSW5zcGlyZWQgYnkgdGhlIEVycm9ySG9sZGVyIGZyb20gVHdpc3RlZDoKICAgICMgaHR0cDovL3R3aXN0ZWRtYXRyaXguY29tL3RyYWMvYnJvd3Nlci90cnVuay90d2lzdGVkL3RyaWFsL3J1bm5lci5weQoKICAgICMgYXR0cmlidXRlIHVzZWQgYnkgVGVzdFJlc3VsdC5fZXhjX2luZm9fdG9fc3RyaW5nCiAgICBmYWlsdXJlRXhjZXB0aW9uID0gTm9uZQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkZXNjcmlwdGlvbik6CiAgICAgICAgc2VsZi5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uCgogICAgZGVmIGlkKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmRlc2NyaXB0aW9uCgogICAgZGVmIHNob3J0RGVzY3JpcHRpb24oc2VsZik6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICI8RXJyb3JIb2xkZXIgZGVzY3JpcHRpb249JXI+IiAlIChzZWxmLmRlc2NyaXB0aW9uLCkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5pZCgpCgogICAgZGVmIHJ1bihzZWxmLCByZXN1bHQpOgogICAgICAgICMgY291bGQgY2FsbCByZXN1bHQuYWRkRXJyb3IoLi4uKSAtIGJ1dCB0aGlzIHRlc3QtbGlrZSBvYmplY3QKICAgICAgICAjIHNob3VsZG4ndCBiZSBydW4gYW55d2F5CiAgICAgICAgcGFzcwoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCByZXN1bHQpOgogICAgICAgIHJldHVybiBzZWxmLnJ1bihyZXN1bHQpCgogICAgZGVmIGNvdW50VGVzdENhc2VzKHNlbGYpOgogICAgICAgIHJldHVybiAwCgpkZWYgX2lzbm90c3VpdGUodGVzdCk6CiAgICAiQSBjcnVkZSB3YXkgdG8gdGVsbCBhcGFydCB0ZXN0Y2FzZXMgYW5kIHN1aXRlcyB3aXRoIGR1Y2stdHlwaW5nIgogICAgdHJ5OgogICAgICAgIGl0ZXIodGVzdCkKICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQoKCmNsYXNzIF9EZWJ1Z1Jlc3VsdChvYmplY3QpOgogICAgIlVzZWQgYnkgdGhlIFRlc3RTdWl0ZSB0byBob2xkIHByZXZpb3VzIGNsYXNzIHdoZW4gcnVubmluZyBpbiBkZWJ1Zy4iCiAgICBfcHJldmlvdXNUZXN0Q2xhc3MgPSBOb25lCiAgICBfbW9kdWxlU2V0VXBGYWlsZWQgPSBGYWxzZQogICAgc2hvdWxkU3RvcCA9IEZhbHNlCg==',
'/Lib/unittest/runner.py':'IiIiUnVubmluZyB0ZXN0cyIiIgoKaW1wb3J0IHN5cwppbXBvcnQgdGltZQppbXBvcnQgd2FybmluZ3MKCmZyb20gLiBpbXBvcnQgcmVzdWx0CmZyb20gLnNpZ25hbHMgaW1wb3J0IHJlZ2lzdGVyUmVzdWx0CgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKCmNsYXNzIF9Xcml0ZWxuRGVjb3JhdG9yKG9iamVjdCk6CiAgICAiIiJVc2VkIHRvIGRlY29yYXRlIGZpbGUtbGlrZSBvYmplY3RzIHdpdGggYSBoYW5keSAnd3JpdGVsbicgbWV0aG9kIiIiCiAgICBkZWYgX19pbml0X18oc2VsZixzdHJlYW0pOgogICAgICAgIHNlbGYuc3RyZWFtID0gc3RyZWFtCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHIpOgogICAgICAgIGlmIGF0dHIgaW4gKCdzdHJlYW0nLCAnX19nZXRzdGF0ZV9fJyk6CiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKGF0dHIpCiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5zdHJlYW0sYXR0cikKCiAgICBkZWYgd3JpdGVsbihzZWxmLCBhcmc9Tm9uZSk6CiAgICAgICAgaWYgYXJnOgogICAgICAgICAgICBzZWxmLndyaXRlKGFyZykKICAgICAgICBzZWxmLndyaXRlKCdcbicpICMgdGV4dC1tb2RlIHN0cmVhbXMgdHJhbnNsYXRlIHRvIFxyXG4gaWYgbmVlZGVkCgoKY2xhc3MgVGV4dFRlc3RSZXN1bHQocmVzdWx0LlRlc3RSZXN1bHQpOgogICAgIiIiQSB0ZXN0IHJlc3VsdCBjbGFzcyB0aGF0IGNhbiBwcmludCBmb3JtYXR0ZWQgdGV4dCByZXN1bHRzIHRvIGEgc3RyZWFtLgoKICAgIFVzZWQgYnkgVGV4dFRlc3RSdW5uZXIuCiAgICAiIiIKICAgIHNlcGFyYXRvcjEgPSAnPScgKiA3MAogICAgc2VwYXJhdG9yMiA9ICctJyAqIDcwCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbSwgZGVzY3JpcHRpb25zLCB2ZXJib3NpdHkpOgogICAgICAgIHN1cGVyKFRleHRUZXN0UmVzdWx0LCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5zdHJlYW0gPSBzdHJlYW0KICAgICAgICBzZWxmLnNob3dBbGwgPSB2ZXJib3NpdHkgPiAxCiAgICAgICAgc2VsZi5kb3RzID0gdmVyYm9zaXR5ID09IDEKICAgICAgICBzZWxmLmRlc2NyaXB0aW9ucyA9IGRlc2NyaXB0aW9ucwoKICAgIGRlZiBnZXREZXNjcmlwdGlvbihzZWxmLCB0ZXN0KToKICAgICAgICBkb2NfZmlyc3RfbGluZSA9IHRlc3Quc2hvcnREZXNjcmlwdGlvbigpCiAgICAgICAgaWYgc2VsZi5kZXNjcmlwdGlvbnMgYW5kIGRvY19maXJzdF9saW5lOgogICAgICAgICAgICByZXR1cm4gJ1xuJy5qb2luKChzdHIodGVzdCksIGRvY19maXJzdF9saW5lKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc3RyKHRlc3QpCgogICAgZGVmIHN0YXJ0VGVzdChzZWxmLCB0ZXN0KToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuc3RhcnRUZXN0KHRlc3QpCiAgICAgICAgaWYgc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZShzZWxmLmdldERlc2NyaXB0aW9uKHRlc3QpKQogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZSgiIC4uLiAiKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZFN1Y2Nlc3Moc2VsZiwgdGVzdCk6CiAgICAgICAgc3VwZXIoVGV4dFRlc3RSZXN1bHQsIHNlbGYpLmFkZFN1Y2Nlc3ModGVzdCkKICAgICAgICBpZiBzZWxmLnNob3dBbGw6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oIm9rIikKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoJy4nKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZEVycm9yKHNlbGYsIHRlc3QsIGVycik6CiAgICAgICAgc3VwZXIoVGV4dFRlc3RSZXN1bHQsIHNlbGYpLmFkZEVycm9yKHRlc3QsIGVycikKICAgICAgICBpZiBzZWxmLnNob3dBbGw6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oIkVSUk9SIikKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoJ0UnKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZEZhaWx1cmUoc2VsZiwgdGVzdCwgZXJyKToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuYWRkRmFpbHVyZSh0ZXN0LCBlcnIpCiAgICAgICAgaWYgc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCJGQUlMIikKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoJ0YnKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZFNraXAoc2VsZiwgdGVzdCwgcmVhc29uKToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuYWRkU2tpcCh0ZXN0LCByZWFzb24pCiAgICAgICAgaWYgc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCJza2lwcGVkIHswIXJ9Ii5mb3JtYXQocmVhc29uKSkKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoInMiKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZEV4cGVjdGVkRmFpbHVyZShzZWxmLCB0ZXN0LCBlcnIpOgogICAgICAgIHN1cGVyKFRleHRUZXN0UmVzdWx0LCBzZWxmKS5hZGRFeHBlY3RlZEZhaWx1cmUodGVzdCwgZXJyKQogICAgICAgIGlmIHNlbGYuc2hvd0FsbDoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbigiZXhwZWN0ZWQgZmFpbHVyZSIpCiAgICAgICAgZWxpZiBzZWxmLmRvdHM6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlKCJ4IikKICAgICAgICAgICAgc2VsZi5zdHJlYW0uZmx1c2goKQoKICAgIGRlZiBhZGRVbmV4cGVjdGVkU3VjY2VzcyhzZWxmLCB0ZXN0KToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuYWRkVW5leHBlY3RlZFN1Y2Nlc3ModGVzdCkKICAgICAgICBpZiBzZWxmLnNob3dBbGw6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oInVuZXhwZWN0ZWQgc3VjY2VzcyIpCiAgICAgICAgZWxpZiBzZWxmLmRvdHM6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlKCJ1IikKICAgICAgICAgICAgc2VsZi5zdHJlYW0uZmx1c2goKQoKICAgIGRlZiBwcmludEVycm9ycyhzZWxmKToKICAgICAgICBpZiBzZWxmLmRvdHMgb3Igc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCkKICAgICAgICBzZWxmLnByaW50RXJyb3JMaXN0KCdFUlJPUicsIHNlbGYuZXJyb3JzKQogICAgICAgIHNlbGYucHJpbnRFcnJvckxpc3QoJ0ZBSUwnLCBzZWxmLmZhaWx1cmVzKQoKICAgIGRlZiBwcmludEVycm9yTGlzdChzZWxmLCBmbGF2b3VyLCBlcnJvcnMpOgogICAgICAgIGZvciB0ZXN0LCBlcnIgaW4gZXJyb3JzOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKHNlbGYuc2VwYXJhdG9yMSkKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbigiJXM6ICVzIiAlIChmbGF2b3VyLHNlbGYuZ2V0RGVzY3JpcHRpb24odGVzdCkpKQogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKHNlbGYuc2VwYXJhdG9yMikKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbigiJXMiICUgZXJyKQoKCmNsYXNzIFRleHRUZXN0UnVubmVyKG9iamVjdCk6CiAgICAiIiJBIHRlc3QgcnVubmVyIGNsYXNzIHRoYXQgZGlzcGxheXMgcmVzdWx0cyBpbiB0ZXh0dWFsIGZvcm0uCgogICAgSXQgcHJpbnRzIG91dCB0aGUgbmFtZXMgb2YgdGVzdHMgYXMgdGhleSBhcmUgcnVuLCBlcnJvcnMgYXMgdGhleQogICAgb2NjdXIsIGFuZCBhIHN1bW1hcnkgb2YgdGhlIHJlc3VsdHMgYXQgdGhlIGVuZCBvZiB0aGUgdGVzdCBydW4uCiAgICAiIiIKICAgIHJlc3VsdGNsYXNzID0gVGV4dFRlc3RSZXN1bHQKCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RyZWFtPU5vbmUsIGRlc2NyaXB0aW9ucz1UcnVlLCB2ZXJib3NpdHk9MSwKICAgICAgICAgICAgICAgICBmYWlsZmFzdD1GYWxzZSwgYnVmZmVyPUZhbHNlLCByZXN1bHRjbGFzcz1Ob25lLCB3YXJuaW5ncz1Ob25lKToKICAgICAgICBpZiBzdHJlYW0gaXMgTm9uZToKICAgICAgICAgICAgc3RyZWFtID0gc3lzLnN0ZGVycgogICAgICAgIHNlbGYuc3RyZWFtID0gX1dyaXRlbG5EZWNvcmF0b3Ioc3RyZWFtKQogICAgICAgIHNlbGYuZGVzY3JpcHRpb25zID0gZGVzY3JpcHRpb25zCiAgICAgICAgc2VsZi52ZXJib3NpdHkgPSB2ZXJib3NpdHkKICAgICAgICBzZWxmLmZhaWxmYXN0ID0gZmFpbGZhc3QKICAgICAgICBzZWxmLmJ1ZmZlciA9IGJ1ZmZlcgogICAgICAgIHNlbGYud2FybmluZ3MgPSB3YXJuaW5ncwogICAgICAgIGlmIHJlc3VsdGNsYXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLnJlc3VsdGNsYXNzID0gcmVzdWx0Y2xhc3MKCiAgICBkZWYgX21ha2VSZXN1bHQoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmVzdWx0Y2xhc3Moc2VsZi5zdHJlYW0sIHNlbGYuZGVzY3JpcHRpb25zLCBzZWxmLnZlcmJvc2l0eSkKCiAgICBkZWYgcnVuKHNlbGYsIHRlc3QpOgogICAgICAgICJSdW4gdGhlIGdpdmVuIHRlc3QgY2FzZSBvciB0ZXN0IHN1aXRlLiIKICAgICAgICByZXN1bHQgPSBzZWxmLl9tYWtlUmVzdWx0KCkKICAgICAgICByZWdpc3RlclJlc3VsdChyZXN1bHQpCiAgICAgICAgcmVzdWx0LmZhaWxmYXN0ID0gc2VsZi5mYWlsZmFzdAogICAgICAgIHJlc3VsdC5idWZmZXIgPSBzZWxmLmJ1ZmZlcgogICAgICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKToKICAgICAgICAgICAgaWYgc2VsZi53YXJuaW5nczoKICAgICAgICAgICAgICAgICMgaWYgc2VsZi53YXJuaW5ncyBpcyBzZXQsIHVzZSBpdCB0byBmaWx0ZXIgYWxsIHRoZSB3YXJuaW5ncwogICAgICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKHNlbGYud2FybmluZ3MpCiAgICAgICAgICAgICAgICAjIGlmIHRoZSBmaWx0ZXIgaXMgJ2RlZmF1bHQnIG9yICdhbHdheXMnLCBzcGVjaWFsLWNhc2UgdGhlCiAgICAgICAgICAgICAgICAjIHdhcm5pbmdzIGZyb20gdGhlIGRlcHJlY2F0ZWQgdW5pdHRlc3QgbWV0aG9kcyB0byBzaG93IHRoZW0KICAgICAgICAgICAgICAgICMgbm8gbW9yZSB0aGFuIG9uY2UgcGVyIG1vZHVsZSwgYmVjYXVzZSB0aGV5IGNhbiBiZSBmYWlybHkKICAgICAgICAgICAgICAgICMgbm9pc3kuICBUaGUgLVdkIGFuZCAtV2EgZmxhZ3MgY2FuIGJlIHVzZWQgdG8gYnlwYXNzIHRoaXMKICAgICAgICAgICAgICAgICMgb25seSB3aGVuIHNlbGYud2FybmluZ3MgaXMgTm9uZS4KICAgICAgICAgICAgICAgIGlmIHNlbGYud2FybmluZ3MgaW4gWydkZWZhdWx0JywgJ2Fsd2F5cyddOgogICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzLmZpbHRlcndhcm5pbmdzKCdtb2R1bGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk9RGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT0nUGxlYXNlIHVzZSBhc3NlcnRcdysgaW5zdGVhZC4nKQogICAgICAgICAgICBzdGFydFRpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgICAgICBzdGFydFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0YXJ0VGVzdFJ1bicsIE5vbmUpCiAgICAgICAgICAgIGlmIHN0YXJ0VGVzdFJ1biBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHN0YXJ0VGVzdFJ1bigpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRlc3QocmVzdWx0KQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgc3RvcFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0b3BUZXN0UnVuJywgTm9uZSkKICAgICAgICAgICAgICAgIGlmIHN0b3BUZXN0UnVuIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHN0b3BUZXN0UnVuKCkKICAgICAgICAgICAgc3RvcFRpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgIHRpbWVUYWtlbiA9IHN0b3BUaW1lIC0gc3RhcnRUaW1lCiAgICAgICAgcmVzdWx0LnByaW50RXJyb3JzKCkKICAgICAgICBpZiBoYXNhdHRyKHJlc3VsdCwgJ3NlcGFyYXRvcjInKToKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbihyZXN1bHQuc2VwYXJhdG9yMikKICAgICAgICBydW4gPSByZXN1bHQudGVzdHNSdW4KICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCJSYW4gJWQgdGVzdCVzIGluICUuM2ZzIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocnVuLCBydW4gIT0gMSBhbmQgInMiIG9yICIiLCB0aW1lVGFrZW4pKQogICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oKQoKICAgICAgICBleHBlY3RlZEZhaWxzID0gdW5leHBlY3RlZFN1Y2Nlc3NlcyA9IHNraXBwZWQgPSAwCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXN1bHRzID0gbWFwKGxlbiwgKHJlc3VsdC5leHBlY3RlZEZhaWx1cmVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC51bmV4cGVjdGVkU3VjY2Vzc2VzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5za2lwcGVkKSkKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBlbHNlOgogICAgICAgICAgICBleHBlY3RlZEZhaWxzLCB1bmV4cGVjdGVkU3VjY2Vzc2VzLCBza2lwcGVkID0gcmVzdWx0cwoKICAgICAgICBpbmZvcyA9IFtdCiAgICAgICAgaWYgbm90IHJlc3VsdC53YXNTdWNjZXNzZnVsKCk6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlKCJGQUlMRUQiKQogICAgICAgICAgICBmYWlsZWQsIGVycm9yZWQgPSBsZW4ocmVzdWx0LmZhaWx1cmVzKSwgbGVuKHJlc3VsdC5lcnJvcnMpCiAgICAgICAgICAgIGlmIGZhaWxlZDoKICAgICAgICAgICAgICAgIGluZm9zLmFwcGVuZCgiZmFpbHVyZXM9JWQiICUgZmFpbGVkKQogICAgICAgICAgICBpZiBlcnJvcmVkOgogICAgICAgICAgICAgICAgaW5mb3MuYXBwZW5kKCJlcnJvcnM9JWQiICUgZXJyb3JlZCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZSgiT0siKQogICAgICAgIGlmIHNraXBwZWQ6CiAgICAgICAgICAgIGluZm9zLmFwcGVuZCgic2tpcHBlZD0lZCIgJSBza2lwcGVkKQogICAgICAgIGlmIGV4cGVjdGVkRmFpbHM6CiAgICAgICAgICAgIGluZm9zLmFwcGVuZCgiZXhwZWN0ZWQgZmFpbHVyZXM9JWQiICUgZXhwZWN0ZWRGYWlscykKICAgICAgICBpZiB1bmV4cGVjdGVkU3VjY2Vzc2VzOgogICAgICAgICAgICBpbmZvcy5hcHBlbmQoInVuZXhwZWN0ZWQgc3VjY2Vzc2VzPSVkIiAlIHVuZXhwZWN0ZWRTdWNjZXNzZXMpCiAgICAgICAgaWYgaW5mb3M6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oIiAoJXMpIiAlICgiLCAiLmpvaW4oaW5mb3MpLCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoIlxuIikKICAgICAgICByZXR1cm4gcmVzdWx0Cg==',
'/Lib/unittest/result.py':'IiIiVGVzdCByZXN1bHQgb2JqZWN0IiIiDQoNCmltcG9ydCBpbw0KaW1wb3J0IHN5cw0KaW1wb3J0IHRyYWNlYmFjaw0KDQpmcm9tIC4gaW1wb3J0IHV0aWwNCmZyb20gZnVuY3Rvb2xzIGltcG9ydCB3cmFwcw0KDQpfX3VuaXR0ZXN0ID0gVHJ1ZQ0KDQpkZWYgZmFpbGZhc3QobWV0aG9kKToNCiAgICBAd3JhcHMobWV0aG9kKQ0KICAgIGRlZiBpbm5lcihzZWxmLCAqYXJncywgKiprdyk6DQogICAgICAgIGlmIGdldGF0dHIoc2VsZiwgJ2ZhaWxmYXN0JywgRmFsc2UpOg0KICAgICAgICAgICAgc2VsZi5zdG9wKCkNCiAgICAgICAgcmV0dXJuIG1ldGhvZChzZWxmLCAqYXJncywgKiprdykNCiAgICByZXR1cm4gaW5uZXINCg0KU1RET1VUX0xJTkUgPSAnXG5TdGRvdXQ6XG4lcycNClNUREVSUl9MSU5FID0gJ1xuU3RkZXJyOlxuJXMnDQoNCg0KY2xhc3MgVGVzdFJlc3VsdChvYmplY3QpOg0KICAgICIiIkhvbGRlciBmb3IgdGVzdCByZXN1bHQgaW5mb3JtYXRpb24uDQoNCiAgICBUZXN0IHJlc3VsdHMgYXJlIGF1dG9tYXRpY2FsbHkgbWFuYWdlZCBieSB0aGUgVGVzdENhc2UgYW5kIFRlc3RTdWl0ZQ0KICAgIGNsYXNzZXMsIGFuZCBkbyBub3QgbmVlZCB0byBiZSBleHBsaWNpdGx5IG1hbmlwdWxhdGVkIGJ5IHdyaXRlcnMgb2YgdGVzdHMuDQoNCiAgICBFYWNoIGluc3RhbmNlIGhvbGRzIHRoZSB0b3RhbCBudW1iZXIgb2YgdGVzdHMgcnVuLCBhbmQgY29sbGVjdGlvbnMgb2YNCiAgICBmYWlsdXJlcyBhbmQgZXJyb3JzIHRoYXQgb2NjdXJyZWQgYW1vbmcgdGhvc2UgdGVzdCBydW5zLiBUaGUgY29sbGVjdGlvbnMNCiAgICBjb250YWluIHR1cGxlcyBvZiAodGVzdGNhc2UsIGV4Y2VwdGlvbmluZm8pLCB3aGVyZSBleGNlcHRpb25pbmZvIGlzIHRoZQ0KICAgIGZvcm1hdHRlZCB0cmFjZWJhY2sgb2YgdGhlIGVycm9yIHRoYXQgb2NjdXJyZWQuDQogICAgIiIiDQogICAgX3ByZXZpb3VzVGVzdENsYXNzID0gTm9uZQ0KICAgIF90ZXN0UnVuRW50ZXJlZCA9IEZhbHNlDQogICAgX21vZHVsZVNldFVwRmFpbGVkID0gRmFsc2UNCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RyZWFtPU5vbmUsIGRlc2NyaXB0aW9ucz1Ob25lLCB2ZXJib3NpdHk9Tm9uZSk6DQogICAgICAgIHNlbGYuZmFpbGZhc3QgPSBGYWxzZQ0KICAgICAgICBzZWxmLmZhaWx1cmVzID0gW10NCiAgICAgICAgc2VsZi5lcnJvcnMgPSBbXQ0KICAgICAgICBzZWxmLnRlc3RzUnVuID0gMA0KICAgICAgICBzZWxmLnNraXBwZWQgPSBbXQ0KICAgICAgICBzZWxmLmV4cGVjdGVkRmFpbHVyZXMgPSBbXQ0KICAgICAgICBzZWxmLnVuZXhwZWN0ZWRTdWNjZXNzZXMgPSBbXQ0KICAgICAgICBzZWxmLnNob3VsZFN0b3AgPSBGYWxzZQ0KICAgICAgICBzZWxmLmJ1ZmZlciA9IEZhbHNlDQogICAgICAgIHNlbGYuX3N0ZG91dF9idWZmZXIgPSBOb25lDQogICAgICAgIHNlbGYuX3N0ZGVycl9idWZmZXIgPSBOb25lDQogICAgICAgIHNlbGYuX29yaWdpbmFsX3N0ZG91dCA9IHN5cy5zdGRvdXQNCiAgICAgICAgc2VsZi5fb3JpZ2luYWxfc3RkZXJyID0gc3lzLnN0ZGVycg0KICAgICAgICBzZWxmLl9taXJyb3JPdXRwdXQgPSBGYWxzZQ0KDQogICAgZGVmIHByaW50RXJyb3JzKHNlbGYpOg0KICAgICAgICAiQ2FsbGVkIGJ5IFRlc3RSdW5uZXIgYWZ0ZXIgdGVzdCBydW4iDQoNCiAgICBkZWYgc3RhcnRUZXN0KHNlbGYsIHRlc3QpOg0KICAgICAgICAiQ2FsbGVkIHdoZW4gdGhlIGdpdmVuIHRlc3QgaXMgYWJvdXQgdG8gYmUgcnVuIg0KICAgICAgICBzZWxmLnRlc3RzUnVuICs9IDENCiAgICAgICAgc2VsZi5fbWlycm9yT3V0cHV0ID0gRmFsc2UNCiAgICAgICAgc2VsZi5fc2V0dXBTdGRvdXQoKQ0KDQogICAgZGVmIF9zZXR1cFN0ZG91dChzZWxmKToNCiAgICAgICAgaWYgc2VsZi5idWZmZXI6DQogICAgICAgICAgICBpZiBzZWxmLl9zdGRlcnJfYnVmZmVyIGlzIE5vbmU6DQogICAgICAgICAgICAgICAgc2VsZi5fc3RkZXJyX2J1ZmZlciA9IGlvLlN0cmluZ0lPKCkNCiAgICAgICAgICAgICAgICBzZWxmLl9zdGRvdXRfYnVmZmVyID0gaW8uU3RyaW5nSU8oKQ0KICAgICAgICAgICAgc3lzLnN0ZG91dCA9IHNlbGYuX3N0ZG91dF9idWZmZXINCiAgICAgICAgICAgIHN5cy5zdGRlcnIgPSBzZWxmLl9zdGRlcnJfYnVmZmVyDQoNCiAgICBkZWYgc3RhcnRUZXN0UnVuKHNlbGYpOg0KICAgICAgICAiIiJDYWxsZWQgb25jZSBiZWZvcmUgYW55IHRlc3RzIGFyZSBleGVjdXRlZC4NCg0KICAgICAgICBTZWUgc3RhcnRUZXN0IGZvciBhIG1ldGhvZCBjYWxsZWQgYmVmb3JlIGVhY2ggdGVzdC4NCiAgICAgICAgIiIiDQoNCiAgICBkZWYgc3RvcFRlc3Qoc2VsZiwgdGVzdCk6DQogICAgICAgICIiIkNhbGxlZCB3aGVuIHRoZSBnaXZlbiB0ZXN0IGhhcyBiZWVuIHJ1biIiIg0KICAgICAgICBzZWxmLl9yZXN0b3JlU3Rkb3V0KCkNCiAgICAgICAgc2VsZi5fbWlycm9yT3V0cHV0ID0gRmFsc2UNCg0KICAgIGRlZiBfcmVzdG9yZVN0ZG91dChzZWxmKToNCiAgICAgICAgaWYgc2VsZi5idWZmZXI6DQogICAgICAgICAgICBpZiBzZWxmLl9taXJyb3JPdXRwdXQ6DQogICAgICAgICAgICAgICAgb3V0cHV0ID0gc3lzLnN0ZG91dC5nZXR2YWx1ZSgpDQogICAgICAgICAgICAgICAgZXJyb3IgPSBzeXMuc3RkZXJyLmdldHZhbHVlKCkNCiAgICAgICAgICAgICAgICBpZiBvdXRwdXQ6DQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBvdXRwdXQuZW5kc3dpdGgoJ1xuJyk6DQogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gJ1xuJw0KICAgICAgICAgICAgICAgICAgICBzZWxmLl9vcmlnaW5hbF9zdGRvdXQud3JpdGUoU1RET1VUX0xJTkUgJSBvdXRwdXQpDQogICAgICAgICAgICAgICAgaWYgZXJyb3I6DQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBlcnJvci5lbmRzd2l0aCgnXG4nKToNCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yICs9ICdcbicNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fb3JpZ2luYWxfc3RkZXJyLndyaXRlKFNUREVSUl9MSU5FICUgZXJyb3IpDQoNCiAgICAgICAgICAgIHN5cy5zdGRvdXQgPSBzZWxmLl9vcmlnaW5hbF9zdGRvdXQNCiAgICAgICAgICAgIHN5cy5zdGRlcnIgPSBzZWxmLl9vcmlnaW5hbF9zdGRlcnINCiAgICAgICAgICAgIHNlbGYuX3N0ZG91dF9idWZmZXIuc2VlaygwKQ0KICAgICAgICAgICAgc2VsZi5fc3Rkb3V0X2J1ZmZlci50cnVuY2F0ZSgpDQogICAgICAgICAgICBzZWxmLl9zdGRlcnJfYnVmZmVyLnNlZWsoMCkNCiAgICAgICAgICAgIHNlbGYuX3N0ZGVycl9idWZmZXIudHJ1bmNhdGUoKQ0KDQogICAgZGVmIHN0b3BUZXN0UnVuKHNlbGYpOg0KICAgICAgICAiIiJDYWxsZWQgb25jZSBhZnRlciBhbGwgdGVzdHMgYXJlIGV4ZWN1dGVkLg0KDQogICAgICAgIFNlZSBzdG9wVGVzdCBmb3IgYSBtZXRob2QgY2FsbGVkIGFmdGVyIGVhY2ggdGVzdC4NCiAgICAgICAgIiIiDQoNCiAgICBAZmFpbGZhc3QNCiAgICBkZWYgYWRkRXJyb3Ioc2VsZiwgdGVzdCwgZXJyKToNCiAgICAgICAgIiIiQ2FsbGVkIHdoZW4gYW4gZXJyb3IgaGFzIG9jY3VycmVkLiAnZXJyJyBpcyBhIHR1cGxlIG9mIHZhbHVlcyBhcw0KICAgICAgICByZXR1cm5lZCBieSBzeXMuZXhjX2luZm8oKS4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuZXJyb3JzLmFwcGVuZCgodGVzdCwgc2VsZi5fZXhjX2luZm9fdG9fc3RyaW5nKGVyciwgdGVzdCkpKQ0KICAgICAgICBzZWxmLl9taXJyb3JPdXRwdXQgPSBUcnVlDQoNCiAgICBAZmFpbGZhc3QNCiAgICBkZWYgYWRkRmFpbHVyZShzZWxmLCB0ZXN0LCBlcnIpOg0KICAgICAgICAiIiJDYWxsZWQgd2hlbiBhbiBlcnJvciBoYXMgb2NjdXJyZWQuICdlcnInIGlzIGEgdHVwbGUgb2YgdmFsdWVzIGFzDQogICAgICAgIHJldHVybmVkIGJ5IHN5cy5leGNfaW5mbygpLiIiIg0KICAgICAgICBzZWxmLmZhaWx1cmVzLmFwcGVuZCgodGVzdCwgc2VsZi5fZXhjX2luZm9fdG9fc3RyaW5nKGVyciwgdGVzdCkpKQ0KICAgICAgICBzZWxmLl9taXJyb3JPdXRwdXQgPSBUcnVlDQoNCiAgICBkZWYgYWRkU3VjY2VzcyhzZWxmLCB0ZXN0KToNCiAgICAgICAgIkNhbGxlZCB3aGVuIGEgdGVzdCBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseSINCiAgICAgICAgcGFzcw0KDQogICAgZGVmIGFkZFNraXAoc2VsZiwgdGVzdCwgcmVhc29uKToNCiAgICAgICAgIiIiQ2FsbGVkIHdoZW4gYSB0ZXN0IGlzIHNraXBwZWQuIiIiDQogICAgICAgIHNlbGYuc2tpcHBlZC5hcHBlbmQoKHRlc3QsIHJlYXNvbikpDQoNCiAgICBkZWYgYWRkRXhwZWN0ZWRGYWlsdXJlKHNlbGYsIHRlc3QsIGVycik6DQogICAgICAgICIiIkNhbGxlZCB3aGVuIGFuIGV4cGVjdGVkIGZhaWx1cmUvZXJyb3Igb2NjdXJlZC4iIiINCiAgICAgICAgc2VsZi5leHBlY3RlZEZhaWx1cmVzLmFwcGVuZCgNCiAgICAgICAgICAgICh0ZXN0LCBzZWxmLl9leGNfaW5mb190b19zdHJpbmcoZXJyLCB0ZXN0KSkpDQoNCiAgICBAZmFpbGZhc3QNCiAgICBkZWYgYWRkVW5leHBlY3RlZFN1Y2Nlc3Moc2VsZiwgdGVzdCk6DQogICAgICAgICIiIkNhbGxlZCB3aGVuIGEgdGVzdCB3YXMgZXhwZWN0ZWQgdG8gZmFpbCwgYnV0IHN1Y2NlZWQuIiIiDQogICAgICAgIHNlbGYudW5leHBlY3RlZFN1Y2Nlc3Nlcy5hcHBlbmQodGVzdCkNCg0KICAgIGRlZiB3YXNTdWNjZXNzZnVsKHNlbGYpOg0KICAgICAgICAiVGVsbHMgd2hldGhlciBvciBub3QgdGhpcyByZXN1bHQgd2FzIGEgc3VjY2VzcyINCiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmZhaWx1cmVzKSA9PSBsZW4oc2VsZi5lcnJvcnMpID09IDANCg0KICAgIGRlZiBzdG9wKHNlbGYpOg0KICAgICAgICAiSW5kaWNhdGVzIHRoYXQgdGhlIHRlc3RzIHNob3VsZCBiZSBhYm9ydGVkIg0KICAgICAgICBzZWxmLnNob3VsZFN0b3AgPSBUcnVlDQoNCiAgICBkZWYgX2V4Y19pbmZvX3RvX3N0cmluZyhzZWxmLCBlcnIsIHRlc3QpOg0KICAgICAgICAiIiJDb252ZXJ0cyBhIHN5cy5leGNfaW5mbygpLXN0eWxlIHR1cGxlIG9mIHZhbHVlcyBpbnRvIGEgc3RyaW5nLiIiIg0KICAgICAgICBleGN0eXBlLCB2YWx1ZSwgdGIgPSBlcnINCiAgICAgICAgIyBTa2lwIHRlc3QgcnVubmVyIHRyYWNlYmFjayBsZXZlbHMNCiAgICAgICAgd2hpbGUgdGIgYW5kIHNlbGYuX2lzX3JlbGV2YW50X3RiX2xldmVsKHRiKToNCiAgICAgICAgICAgIHRiID0gdGIudGJfbmV4dA0KDQogICAgICAgIGlmIGV4Y3R5cGUgaXMgdGVzdC5mYWlsdXJlRXhjZXB0aW9uOg0KICAgICAgICAgICAgIyBTa2lwIGFzc2VydCooKSB0cmFjZWJhY2sgbGV2ZWxzDQogICAgICAgICAgICBsZW5ndGggPSBzZWxmLl9jb3VudF9yZWxldmFudF90Yl9sZXZlbHModGIpDQogICAgICAgICAgICBtc2dMaW5lcyA9IHRyYWNlYmFjay5mb3JtYXRfZXhjZXB0aW9uKGV4Y3R5cGUsIHZhbHVlLCB0YiwgbGVuZ3RoKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgbXNnTGluZXMgPSB0cmFjZWJhY2suZm9ybWF0X2V4Y2VwdGlvbihleGN0eXBlLCB2YWx1ZSwgdGIpDQoNCiAgICAgICAgaWYgc2VsZi5idWZmZXI6DQogICAgICAgICAgICBvdXRwdXQgPSBzeXMuc3Rkb3V0LmdldHZhbHVlKCkNCiAgICAgICAgICAgIGVycm9yID0gc3lzLnN0ZGVyci5nZXR2YWx1ZSgpDQogICAgICAgICAgICBpZiBvdXRwdXQ6DQogICAgICAgICAgICAgICAgaWYgbm90IG91dHB1dC5lbmRzd2l0aCgnXG4nKToNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9ICdcbicNCiAgICAgICAgICAgICAgICBtc2dMaW5lcy5hcHBlbmQoU1RET1VUX0xJTkUgJSBvdXRwdXQpDQogICAgICAgICAgICBpZiBlcnJvcjoNCiAgICAgICAgICAgICAgICBpZiBub3QgZXJyb3IuZW5kc3dpdGgoJ1xuJyk6DQogICAgICAgICAgICAgICAgICAgIGVycm9yICs9ICdcbicNCiAgICAgICAgICAgICAgICBtc2dMaW5lcy5hcHBlbmQoU1RERVJSX0xJTkUgJSBlcnJvcikNCiAgICAgICAgcmV0dXJuICcnLmpvaW4obXNnTGluZXMpDQoNCg0KICAgIGRlZiBfaXNfcmVsZXZhbnRfdGJfbGV2ZWwoc2VsZiwgdGIpOg0KICAgICAgICByZXR1cm4gJ19fdW5pdHRlc3QnIGluIHRiLnRiX2ZyYW1lLmZfZ2xvYmFscw0KDQogICAgZGVmIF9jb3VudF9yZWxldmFudF90Yl9sZXZlbHMoc2VsZiwgdGIpOg0KICAgICAgICBsZW5ndGggPSAwDQogICAgICAgIHdoaWxlIHRiIGFuZCBub3Qgc2VsZi5faXNfcmVsZXZhbnRfdGJfbGV2ZWwodGIpOg0KICAgICAgICAgICAgbGVuZ3RoICs9IDENCiAgICAgICAgICAgIHRiID0gdGIudGJfbmV4dA0KICAgICAgICByZXR1cm4gbGVuZ3RoDQoNCiAgICBkZWYgX19yZXByX18oc2VsZik6DQogICAgICAgIHJldHVybiAoIjwlcyBydW49JWkgZXJyb3JzPSVpIGZhaWx1cmVzPSVpPiIgJQ0KICAgICAgICAgICAgICAgKHV0aWwuc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pLCBzZWxmLnRlc3RzUnVuLCBsZW4oc2VsZi5lcnJvcnMpLA0KICAgICAgICAgICAgICAgIGxlbihzZWxmLmZhaWx1cmVzKSkpDQo=',
'/Lib/unittest/__init__.py':'IiIiDQpQeXRob24gdW5pdCB0ZXN0aW5nIGZyYW1ld29yaywgYmFzZWQgb24gRXJpY2ggR2FtbWEncyBKVW5pdCBhbmQgS2VudCBCZWNrJ3MNClNtYWxsdGFsayB0ZXN0aW5nIGZyYW1ld29yay4NCg0KVGhpcyBtb2R1bGUgY29udGFpbnMgdGhlIGNvcmUgZnJhbWV3b3JrIGNsYXNzZXMgdGhhdCBmb3JtIHRoZSBiYXNpcyBvZg0Kc3BlY2lmaWMgdGVzdCBjYXNlcyBhbmQgc3VpdGVzIChUZXN0Q2FzZSwgVGVzdFN1aXRlIGV0Yy4pLCBhbmQgYWxzbyBhDQp0ZXh0LWJhc2VkIHV0aWxpdHkgY2xhc3MgZm9yIHJ1bm5pbmcgdGhlIHRlc3RzIGFuZCByZXBvcnRpbmcgdGhlIHJlc3VsdHMNCiAoVGV4dFRlc3RSdW5uZXIpLg0KDQpTaW1wbGUgdXNhZ2U6DQoNCiAgICBpbXBvcnQgdW5pdHRlc3QNCg0KICAgIGNsYXNzIEludGVnZXJBcml0aG1lbnRpY1Rlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgZGVmIHRlc3RBZGQoc2VsZik6ICAjIyB0ZXN0IG1ldGhvZCBuYW1lcyBiZWdpbiAndGVzdConDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKCgxICsgMiksIDMpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKDAgKyAxLCAxKQ0KICAgICAgICBkZWYgdGVzdE11bHRpcGx5KHNlbGYpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgoMCAqIDEwKSwgMCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoKDUgKiA4KSwgNDApDQoNCiAgICBpZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgICAgICB1bml0dGVzdC5tYWluKCkNCg0KRnVydGhlciBpbmZvcm1hdGlvbiBpcyBhdmFpbGFibGUgaW4gdGhlIGJ1bmRsZWQgZG9jdW1lbnRhdGlvbiwgYW5kIGZyb20NCg0KICBodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvdW5pdHRlc3QuaHRtbA0KDQpDb3B5cmlnaHQgKGMpIDE5OTktMjAwMyBTdGV2ZSBQdXJjZWxsDQpDb3B5cmlnaHQgKGMpIDIwMDMtMjAxMCBQeXRob24gU29mdHdhcmUgRm91bmRhdGlvbg0KVGhpcyBtb2R1bGUgaXMgZnJlZSBzb2Z0d2FyZSwgYW5kIHlvdSBtYXkgcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkNCml0IHVuZGVyIHRoZSBzYW1lIHRlcm1zIGFzIFB5dGhvbiBpdHNlbGYsIHNvIGxvbmcgYXMgdGhpcyBjb3B5cmlnaHQgbWVzc2FnZQ0KYW5kIGRpc2NsYWltZXIgYXJlIHJldGFpbmVkIGluIHRoZWlyIG9yaWdpbmFsIGZvcm0uDQoNCklOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIFRPIEFOWSBQQVJUWSBGT1IgRElSRUNULCBJTkRJUkVDVCwNClNQRUNJQUwsIElOQ0lERU5UQUwsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBBUklTSU5HIE9VVCBPRiBUSEUgVVNFIE9GDQpUSElTIENPREUsIEVWRU4gSUYgVEhFIEFVVEhPUiBIQVMgQkVFTiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIDQpEQU1BR0UuDQoNClRIRSBBVVRIT1IgU1BFQ0lGSUNBTExZIERJU0NMQUlNUyBBTlkgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UDQpMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQQ0KUEFSVElDVUxBUiBQVVJQT1NFLiAgVEhFIENPREUgUFJPVklERUQgSEVSRVVOREVSIElTIE9OIEFOICJBUyBJUyIgQkFTSVMsDQpBTkQgVEhFUkUgSVMgTk8gT0JMSUdBVElPTiBXSEFUU09FVkVSIFRPIFBST1ZJREUgTUFJTlRFTkFOQ0UsDQpTVVBQT1JULCBVUERBVEVTLCBFTkhBTkNFTUVOVFMsIE9SIE1PRElGSUNBVElPTlMuDQoiIiINCg0KX19hbGxfXyA9IFsnVGVzdFJlc3VsdCcsICdUZXN0Q2FzZScsICdUZXN0U3VpdGUnLA0KICAgICAgICAgICAnVGV4dFRlc3RSdW5uZXInLCAnVGVzdExvYWRlcicsICdGdW5jdGlvblRlc3RDYXNlJywgJ21haW4nLA0KICAgICAgICAgICAnZGVmYXVsdFRlc3RMb2FkZXInLCAnU2tpcFRlc3QnLCAnc2tpcCcsICdza2lwSWYnLCAnc2tpcFVubGVzcycsDQogICAgICAgICAgICdleHBlY3RlZEZhaWx1cmUnLCAnVGV4dFRlc3RSZXN1bHQnLCAnaW5zdGFsbEhhbmRsZXInLA0KICAgICAgICAgICAncmVnaXN0ZXJSZXN1bHQnLCAncmVtb3ZlUmVzdWx0JywgJ3JlbW92ZUhhbmRsZXInXQ0KDQojIEV4cG9zZSBvYnNvbGV0ZSBmdW5jdGlvbnMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5DQpfX2FsbF9fLmV4dGVuZChbJ2dldFRlc3RDYXNlTmFtZXMnLCAnbWFrZVN1aXRlJywgJ2ZpbmRUZXN0Q2FzZXMnXSkNCg0KX191bml0dGVzdCA9IFRydWUNCg0KZnJvbSAucmVzdWx0IGltcG9ydCBUZXN0UmVzdWx0DQpmcm9tIC5jYXNlIGltcG9ydCAoVGVzdENhc2UsIEZ1bmN0aW9uVGVzdENhc2UsIFNraXBUZXN0LCBza2lwLCBza2lwSWYsDQogICAgICAgICAgICAgICAgICAgc2tpcFVubGVzcywgZXhwZWN0ZWRGYWlsdXJlKQ0KZnJvbSAuc3VpdGUgaW1wb3J0IEJhc2VUZXN0U3VpdGUsIFRlc3RTdWl0ZQ0KZnJvbSAubG9hZGVyIGltcG9ydCAoVGVzdExvYWRlciwgZGVmYXVsdFRlc3RMb2FkZXIsIG1ha2VTdWl0ZSwgZ2V0VGVzdENhc2VOYW1lcywNCiAgICAgICAgICAgICAgICAgICAgIGZpbmRUZXN0Q2FzZXMpDQpmcm9tIC5tYWluIGltcG9ydCBUZXN0UHJvZ3JhbSwgbWFpbg0KZnJvbSAucnVubmVyIGltcG9ydCBUZXh0VGVzdFJ1bm5lciwgVGV4dFRlc3RSZXN1bHQNCmZyb20gLnNpZ25hbHMgaW1wb3J0IGluc3RhbGxIYW5kbGVyLCByZWdpc3RlclJlc3VsdCwgcmVtb3ZlUmVzdWx0LCByZW1vdmVIYW5kbGVyDQoNCiMgZGVwcmVjYXRlZA0KX1RleHRUZXN0UmVzdWx0ID0gVGV4dFRlc3RSZXN1bHQNCg==',
'/Lib/unittest/__main__.py':'IiIiTWFpbiBlbnRyeSBwb2ludCIiIg0KDQppbXBvcnQgc3lzDQppZiBzeXMuYXJndlswXS5lbmRzd2l0aCgiX19tYWluX18ucHkiKToNCiAgICBzeXMuYXJndlswXSA9ICJweXRob24gLW0gdW5pdHRlc3QiDQoNCl9fdW5pdHRlc3QgPSBUcnVlDQoNCmZyb20gLm1haW4gaW1wb3J0IG1haW4sIFRlc3RQcm9ncmFtLCBVU0FHRV9BU19NQUlODQpUZXN0UHJvZ3JhbS5VU0FHRSA9IFVTQUdFX0FTX01BSU4NCg0KbWFpbihtb2R1bGU9Tm9uZSkNCg==',
'/Lib/unittest/util.py':'IiIiVmFyaW91cyB1dGlsaXR5IGZ1bmN0aW9ucy4iIiINCg0KZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgbmFtZWR0dXBsZSwgT3JkZXJlZERpY3QNCg0KX191bml0dGVzdCA9IFRydWUNCg0KX01BWF9MRU5HVEggPSA4MA0KZGVmIHNhZmVfcmVwcihvYmosIHNob3J0PUZhbHNlKToNCiAgICB0cnk6DQogICAgICAgIHJlc3VsdCA9IHJlcHIob2JqKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb246DQogICAgICAgIHJlc3VsdCA9IG9iamVjdC5fX3JlcHJfXyhvYmopDQogICAgaWYgbm90IHNob3J0IG9yIGxlbihyZXN1bHQpIDwgX01BWF9MRU5HVEg6DQogICAgICAgIHJldHVybiByZXN1bHQNCiAgICByZXR1cm4gcmVzdWx0WzpfTUFYX0xFTkdUSF0gKyAnIFt0cnVuY2F0ZWRdLi4uJw0KDQpkZWYgc3RyY2xhc3MoY2xzKToNCiAgICByZXR1cm4gIiVzLiVzIiAlIChjbHMuX19tb2R1bGVfXywgY2xzLl9fbmFtZV9fKQ0KDQpkZWYgc29ydGVkX2xpc3RfZGlmZmVyZW5jZShleHBlY3RlZCwgYWN0dWFsKToNCiAgICAiIiJGaW5kcyBlbGVtZW50cyBpbiBvbmx5IG9uZSBvciB0aGUgb3RoZXIgb2YgdHdvLCBzb3J0ZWQgaW5wdXQgbGlzdHMuDQoNCiAgICBSZXR1cm5zIGEgdHdvLWVsZW1lbnQgdHVwbGUgb2YgbGlzdHMuICAgIFRoZSBmaXJzdCBsaXN0IGNvbnRhaW5zIHRob3NlDQogICAgZWxlbWVudHMgaW4gdGhlICJleHBlY3RlZCIgbGlzdCBidXQgbm90IGluIHRoZSAiYWN0dWFsIiBsaXN0LCBhbmQgdGhlDQogICAgc2Vjb25kIGNvbnRhaW5zIHRob3NlIGVsZW1lbnRzIGluIHRoZSAiYWN0dWFsIiBsaXN0IGJ1dCBub3QgaW4gdGhlDQogICAgImV4cGVjdGVkIiBsaXN0LiAgICBEdXBsaWNhdGUgZWxlbWVudHMgaW4gZWl0aGVyIGlucHV0IGxpc3QgYXJlIGlnbm9yZWQuDQogICAgIiIiDQogICAgaSA9IGogPSAwDQogICAgbWlzc2luZyA9IFtdDQogICAgdW5leHBlY3RlZCA9IFtdDQogICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZSA9IGV4cGVjdGVkW2ldDQogICAgICAgICAgICBhID0gYWN0dWFsW2pdDQogICAgICAgICAgICBpZiBlIDwgYToNCiAgICAgICAgICAgICAgICBtaXNzaW5nLmFwcGVuZChlKQ0KICAgICAgICAgICAgICAgIGkgKz0gMQ0KICAgICAgICAgICAgICAgIHdoaWxlIGV4cGVjdGVkW2ldID09IGU6DQogICAgICAgICAgICAgICAgICAgIGkgKz0gMQ0KICAgICAgICAgICAgZWxpZiBlID4gYToNCiAgICAgICAgICAgICAgICB1bmV4cGVjdGVkLmFwcGVuZChhKQ0KICAgICAgICAgICAgICAgIGogKz0gMQ0KICAgICAgICAgICAgICAgIHdoaWxlIGFjdHVhbFtqXSA9PSBhOg0KICAgICAgICAgICAgICAgICAgICBqICs9IDENCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgaSArPSAxDQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICB3aGlsZSBleHBlY3RlZFtpXSA9PSBlOg0KICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAxDQogICAgICAgICAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgICAgICAgICAgaiArPSAxDQogICAgICAgICAgICAgICAgICAgIHdoaWxlIGFjdHVhbFtqXSA9PSBhOg0KICAgICAgICAgICAgICAgICAgICAgICAgaiArPSAxDQogICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOg0KICAgICAgICAgICAgbWlzc2luZy5leHRlbmQoZXhwZWN0ZWRbaTpdKQ0KICAgICAgICAgICAgdW5leHBlY3RlZC5leHRlbmQoYWN0dWFsW2o6XSkNCiAgICAgICAgICAgIGJyZWFrDQogICAgcmV0dXJuIG1pc3NpbmcsIHVuZXhwZWN0ZWQNCg0KDQpkZWYgdW5vcmRlcmFibGVfbGlzdF9kaWZmZXJlbmNlKGV4cGVjdGVkLCBhY3R1YWwpOg0KICAgICIiIlNhbWUgYmVoYXZpb3IgYXMgc29ydGVkX2xpc3RfZGlmZmVyZW5jZSBidXQNCiAgICBmb3IgbGlzdHMgb2YgdW5vcmRlcmFibGUgaXRlbXMgKGxpa2UgZGljdHMpLg0KDQogICAgQXMgaXQgZG9lcyBhIGxpbmVhciBzZWFyY2ggcGVyIGl0ZW0gKHJlbW92ZSkgaXQNCiAgICBoYXMgTyhuKm4pIHBlcmZvcm1hbmNlLiIiIg0KICAgIG1pc3NpbmcgPSBbXQ0KICAgIHdoaWxlIGV4cGVjdGVkOg0KICAgICAgICBpdGVtID0gZXhwZWN0ZWQucG9wKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgYWN0dWFsLnJlbW92ZShpdGVtKQ0KICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgICAgIG1pc3NpbmcuYXBwZW5kKGl0ZW0pDQoNCiAgICAjIGFueXRoaW5nIGxlZnQgaW4gYWN0dWFsIGlzIHVuZXhwZWN0ZWQNCiAgICByZXR1cm4gbWlzc2luZywgYWN0dWFsDQoNCmRlZiB0aHJlZV93YXlfY21wKHgsIHkpOg0KICAgICIiIlJldHVybiAtMSBpZiB4IDwgeSwgMCBpZiB4ID09IHkgYW5kIDEgaWYgeCA+IHkiIiINCiAgICByZXR1cm4gKHggPiB5KSAtICh4IDwgeSkNCg0KX01pc21hdGNoID0gbmFtZWR0dXBsZSgnTWlzbWF0Y2gnLCAnYWN0dWFsIGV4cGVjdGVkIHZhbHVlJykNCg0KZGVmIF9jb3VudF9kaWZmX2FsbF9wdXJwb3NlKGFjdHVhbCwgZXhwZWN0ZWQpOg0KICAgICdSZXR1cm5zIGxpc3Qgb2YgKGNudF9hY3QsIGNudF9leHAsIGVsZW0pIHRyaXBsZXMgd2hlcmUgdGhlIGNvdW50cyBkaWZmZXInDQogICAgIyBlbGVtZW50cyBuZWVkIG5vdCBiZSBoYXNoYWJsZQ0KICAgIHMsIHQgPSBsaXN0KGFjdHVhbCksIGxpc3QoZXhwZWN0ZWQpDQogICAgbSwgbiA9IGxlbihzKSwgbGVuKHQpDQogICAgTlVMTCA9IG9iamVjdCgpDQogICAgcmVzdWx0ID0gW10NCiAgICBmb3IgaSwgZWxlbSBpbiBlbnVtZXJhdGUocyk6DQogICAgICAgIGlmIGVsZW0gaXMgTlVMTDoNCiAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIGNudF9zID0gY250X3QgPSAwDQogICAgICAgIGZvciBqIGluIHJhbmdlKGksIG0pOg0KICAgICAgICAgICAgaWYgc1tqXSA9PSBlbGVtOg0KICAgICAgICAgICAgICAgIGNudF9zICs9IDENCiAgICAgICAgICAgICAgICBzW2pdID0gTlVMTA0KICAgICAgICBmb3Igaiwgb3RoZXJfZWxlbSBpbiBlbnVtZXJhdGUodCk6DQogICAgICAgICAgICBpZiBvdGhlcl9lbGVtID09IGVsZW06DQogICAgICAgICAgICAgICAgY250X3QgKz0gMQ0KICAgICAgICAgICAgICAgIHRbal0gPSBOVUxMDQogICAgICAgIGlmIGNudF9zICE9IGNudF90Og0KICAgICAgICAgICAgZGlmZiA9IF9NaXNtYXRjaChjbnRfcywgY250X3QsIGVsZW0pDQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGRpZmYpDQoNCiAgICBmb3IgaSwgZWxlbSBpbiBlbnVtZXJhdGUodCk6DQogICAgICAgIGlmIGVsZW0gaXMgTlVMTDoNCiAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIGNudF90ID0gMA0KICAgICAgICBmb3IgaiBpbiByYW5nZShpLCBuKToNCiAgICAgICAgICAgIGlmIHRbal0gPT0gZWxlbToNCiAgICAgICAgICAgICAgICBjbnRfdCArPSAxDQogICAgICAgICAgICAgICAgdFtqXSA9IE5VTEwNCiAgICAgICAgZGlmZiA9IF9NaXNtYXRjaCgwLCBjbnRfdCwgZWxlbSkNCiAgICAgICAgcmVzdWx0LmFwcGVuZChkaWZmKQ0KICAgIHJldHVybiByZXN1bHQNCg0KZGVmIF9vcmRlcmVkX2NvdW50KGl0ZXJhYmxlKToNCiAgICAnUmV0dXJuIGRpY3Qgb2YgZWxlbWVudCBjb3VudHMsIGluIHRoZSBvcmRlciB0aGV5IHdlcmUgZmlyc3Qgc2VlbicNCiAgICBjID0gT3JkZXJlZERpY3QoKQ0KICAgIGZvciBlbGVtIGluIGl0ZXJhYmxlOg0KICAgICAgICBjW2VsZW1dID0gYy5nZXQoZWxlbSwgMCkgKyAxDQogICAgcmV0dXJuIGMNCg0KZGVmIF9jb3VudF9kaWZmX2hhc2hhYmxlKGFjdHVhbCwgZXhwZWN0ZWQpOg0KICAgICdSZXR1cm5zIGxpc3Qgb2YgKGNudF9hY3QsIGNudF9leHAsIGVsZW0pIHRyaXBsZXMgd2hlcmUgdGhlIGNvdW50cyBkaWZmZXInDQogICAgIyBlbGVtZW50cyBtdXN0IGJlIGhhc2hhYmxlDQogICAgcywgdCA9IF9vcmRlcmVkX2NvdW50KGFjdHVhbCksIF9vcmRlcmVkX2NvdW50KGV4cGVjdGVkKQ0KICAgIHJlc3VsdCA9IFtdDQogICAgZm9yIGVsZW0sIGNudF9zIGluIHMuaXRlbXMoKToNCiAgICAgICAgY250X3QgPSB0LmdldChlbGVtLCAwKQ0KICAgICAgICBpZiBjbnRfcyAhPSBjbnRfdDoNCiAgICAgICAgICAgIGRpZmYgPSBfTWlzbWF0Y2goY250X3MsIGNudF90LCBlbGVtKQ0KICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChkaWZmKQ0KICAgIGZvciBlbGVtLCBjbnRfdCBpbiB0Lml0ZW1zKCk6DQogICAgICAgIGlmIGVsZW0gbm90IGluIHM6DQogICAgICAgICAgICBkaWZmID0gX01pc21hdGNoKDAsIGNudF90LCBlbGVtKQ0KICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChkaWZmKQ0KICAgIHJldHVybiByZXN1bHQNCg==',
'/Lib/unittest/loader.py':'IiIiTG9hZGluZyB1bml0dGVzdHMuIiIiCgppbXBvcnQgb3MKaW1wb3J0IHJlCmltcG9ydCBzeXMKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgdHlwZXMKaW1wb3J0IGZ1bmN0b29scwoKZnJvbSBmbm1hdGNoIGltcG9ydCBmbm1hdGNoCgpmcm9tIC4gaW1wb3J0IGNhc2UsIHN1aXRlLCB1dGlsCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKIyB3aGF0IGFib3V0IC5weWMgb3IgLnB5byAoZXRjKQojIHdlIHdvdWxkIG5lZWQgdG8gYXZvaWQgbG9hZGluZyB0aGUgc2FtZSB0ZXN0cyBtdWx0aXBsZSB0aW1lcwojIGZyb20gJy5weScsICcucHljJyAqYW5kKiAnLnB5bycKVkFMSURfTU9EVUxFX05BTUUgPSByZS5jb21waWxlKHInW19hLXpdXHcqXC5weSQnLCByZS5JR05PUkVDQVNFKQoKCmRlZiBfbWFrZV9mYWlsZWRfaW1wb3J0X3Rlc3QobmFtZSwgc3VpdGVDbGFzcyk6CiAgICBtZXNzYWdlID0gJ0ZhaWxlZCB0byBpbXBvcnQgdGVzdCBtb2R1bGU6ICVzXG4lcycgJSAobmFtZSwgdHJhY2ViYWNrLmZvcm1hdF9leGMoKSkKICAgIHJldHVybiBfbWFrZV9mYWlsZWRfdGVzdCgnTW9kdWxlSW1wb3J0RmFpbHVyZScsIG5hbWUsIEltcG9ydEVycm9yKG1lc3NhZ2UpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1aXRlQ2xhc3MpCgpkZWYgX21ha2VfZmFpbGVkX2xvYWRfdGVzdHMobmFtZSwgZXhjZXB0aW9uLCBzdWl0ZUNsYXNzKToKICAgIHJldHVybiBfbWFrZV9mYWlsZWRfdGVzdCgnTG9hZFRlc3RzRmFpbHVyZScsIG5hbWUsIGV4Y2VwdGlvbiwgc3VpdGVDbGFzcykKCmRlZiBfbWFrZV9mYWlsZWRfdGVzdChjbGFzc25hbWUsIG1ldGhvZG5hbWUsIGV4Y2VwdGlvbiwgc3VpdGVDbGFzcyk6CiAgICBkZWYgdGVzdEZhaWx1cmUoc2VsZik6CiAgICAgICAgcmFpc2UgZXhjZXB0aW9uCiAgICBhdHRycyA9IHttZXRob2RuYW1lOiB0ZXN0RmFpbHVyZX0KICAgIFRlc3RDbGFzcyA9IHR5cGUoY2xhc3NuYW1lLCAoY2FzZS5UZXN0Q2FzZSwpLCBhdHRycykKICAgIHJldHVybiBzdWl0ZUNsYXNzKChUZXN0Q2xhc3MobWV0aG9kbmFtZSksKSkKCmRlZiBfanl0aG9uX2F3YXJlX3NwbGl0ZXh0KHBhdGgpOgogICAgaWYgcGF0aC5sb3dlcigpLmVuZHN3aXRoKCckcHkuY2xhc3MnKToKICAgICAgICByZXR1cm4gcGF0aFs6LTldCiAgICByZXR1cm4gb3MucGF0aC5zcGxpdGV4dChwYXRoKVswXQoKCmNsYXNzIFRlc3RMb2FkZXIob2JqZWN0KToKICAgICIiIgogICAgVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgbG9hZGluZyB0ZXN0cyBhY2NvcmRpbmcgdG8gdmFyaW91cyBjcml0ZXJpYQogICAgYW5kIHJldHVybmluZyB0aGVtIHdyYXBwZWQgaW4gYSBUZXN0U3VpdGUKICAgICIiIgogICAgdGVzdE1ldGhvZFByZWZpeCA9ICd0ZXN0JwogICAgc29ydFRlc3RNZXRob2RzVXNpbmcgPSBzdGF0aWNtZXRob2QodXRpbC50aHJlZV93YXlfY21wKQogICAgc3VpdGVDbGFzcyA9IHN1aXRlLlRlc3RTdWl0ZQogICAgX3RvcF9sZXZlbF9kaXIgPSBOb25lCgogICAgZGVmIGxvYWRUZXN0c0Zyb21UZXN0Q2FzZShzZWxmLCB0ZXN0Q2FzZUNsYXNzKToKICAgICAgICAiIiJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgY29udGFpbmVkIGluIHRlc3RDYXNlQ2xhc3MiIiIKICAgICAgICBpZiBpc3N1YmNsYXNzKHRlc3RDYXNlQ2xhc3MsIHN1aXRlLlRlc3RTdWl0ZSk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVGVzdCBjYXNlcyBzaG91bGQgbm90IGJlIGRlcml2ZWQgZnJvbSBUZXN0U3VpdGUuIiBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBNYXliZSB5b3UgbWVhbnQgdG8gZGVyaXZlIGZyb20gVGVzdENhc2U/IikKICAgICAgICB0ZXN0Q2FzZU5hbWVzID0gc2VsZi5nZXRUZXN0Q2FzZU5hbWVzKHRlc3RDYXNlQ2xhc3MpCiAgICAgICAgaWYgbm90IHRlc3RDYXNlTmFtZXMgYW5kIGhhc2F0dHIodGVzdENhc2VDbGFzcywgJ3J1blRlc3QnKToKICAgICAgICAgICAgdGVzdENhc2VOYW1lcyA9IFsncnVuVGVzdCddCiAgICAgICAgbG9hZGVkX3N1aXRlID0gc2VsZi5zdWl0ZUNsYXNzKG1hcCh0ZXN0Q2FzZUNsYXNzLCB0ZXN0Q2FzZU5hbWVzKSkKICAgICAgICByZXR1cm4gbG9hZGVkX3N1aXRlCgogICAgZGVmIGxvYWRUZXN0c0Zyb21Nb2R1bGUoc2VsZiwgbW9kdWxlLCB1c2VfbG9hZF90ZXN0cz1UcnVlKToKICAgICAgICAiIiJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgY29udGFpbmVkIGluIHRoZSBnaXZlbiBtb2R1bGUiIiIKICAgICAgICB0ZXN0cyA9IFtdCiAgICAgICAgZm9yIG5hbWUgaW4gZGlyKG1vZHVsZSk6CiAgICAgICAgICAgIG9iaiA9IGdldGF0dHIobW9kdWxlLCBuYW1lKQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgdHlwZSkgYW5kIGlzc3ViY2xhc3Mob2JqLCBjYXNlLlRlc3RDYXNlKToKICAgICAgICAgICAgICAgIHRlc3RzLmFwcGVuZChzZWxmLmxvYWRUZXN0c0Zyb21UZXN0Q2FzZShvYmopKQoKICAgICAgICBsb2FkX3Rlc3RzID0gZ2V0YXR0cihtb2R1bGUsICdsb2FkX3Rlc3RzJywgTm9uZSkKICAgICAgICB0ZXN0cyA9IHNlbGYuc3VpdGVDbGFzcyh0ZXN0cykKICAgICAgICBpZiB1c2VfbG9hZF90ZXN0cyBhbmQgbG9hZF90ZXN0cyBpcyBub3QgTm9uZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIGxvYWRfdGVzdHMoc2VsZiwgdGVzdHMsIE5vbmUpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHJldHVybiBfbWFrZV9mYWlsZWRfbG9hZF90ZXN0cyhtb2R1bGUuX19uYW1lX18sIGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdWl0ZUNsYXNzKQogICAgICAgIHJldHVybiB0ZXN0cwoKICAgIGRlZiBsb2FkVGVzdHNGcm9tTmFtZShzZWxmLCBuYW1lLCBtb2R1bGU9Tm9uZSk6CiAgICAgICAgIiIiUmV0dXJuIGEgc3VpdGUgb2YgYWxsIHRlc3RzIGNhc2VzIGdpdmVuIGEgc3RyaW5nIHNwZWNpZmllci4KCiAgICAgICAgVGhlIG5hbWUgbWF5IHJlc29sdmUgZWl0aGVyIHRvIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYQogICAgICAgIHRlc3QgbWV0aG9kIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2gKICAgICAgICByZXR1cm5zIGEgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLgoKICAgICAgICBUaGUgbWV0aG9kIG9wdGlvbmFsbHkgcmVzb2x2ZXMgdGhlIG5hbWVzIHJlbGF0aXZlIHRvIGEgZ2l2ZW4gbW9kdWxlLgogICAgICAgICIiIgogICAgICAgIHBhcnRzID0gbmFtZS5zcGxpdCgnLicpCiAgICAgICAgaWYgbW9kdWxlIGlzIE5vbmU6CiAgICAgICAgICAgIHBhcnRzX2NvcHkgPSBwYXJ0c1s6XQogICAgICAgICAgICB3aGlsZSBwYXJ0c19jb3B5OgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIG1vZHVsZSA9IF9faW1wb3J0X18oJy4nLmpvaW4ocGFydHNfY29weSkpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgICAgICBkZWwgcGFydHNfY29weVstMV0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgcGFydHNfY29weToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgcGFydHMgPSBwYXJ0c1sxOl0KICAgICAgICBvYmogPSBtb2R1bGUKICAgICAgICBmb3IgcGFydCBpbiBwYXJ0czoKICAgICAgICAgICAgcGFyZW50LCBvYmogPSBvYmosIGdldGF0dHIob2JqLCBwYXJ0KQoKICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgdHlwZXMuTW9kdWxlVHlwZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmxvYWRUZXN0c0Zyb21Nb2R1bGUob2JqKQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShvYmosIHR5cGUpIGFuZCBpc3N1YmNsYXNzKG9iaiwgY2FzZS5UZXN0Q2FzZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmxvYWRUZXN0c0Zyb21UZXN0Q2FzZShvYmopCiAgICAgICAgZWxpZiAoaXNpbnN0YW5jZShvYmosIHR5cGVzLkZ1bmN0aW9uVHlwZSkgYW5kCiAgICAgICAgICAgICAgaXNpbnN0YW5jZShwYXJlbnQsIHR5cGUpIGFuZAogICAgICAgICAgICAgIGlzc3ViY2xhc3MocGFyZW50LCBjYXNlLlRlc3RDYXNlKSk6CiAgICAgICAgICAgIG5hbWUgPSBvYmouX19uYW1lX18KICAgICAgICAgICAgaW5zdCA9IHBhcmVudChuYW1lKQogICAgICAgICAgICAjIHN0YXRpYyBtZXRob2RzIGZvbGxvdyBhIGRpZmZlcmVudCBwYXRoCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGdldGF0dHIoaW5zdCwgbmFtZSksIHR5cGVzLkZ1bmN0aW9uVHlwZSk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5zdWl0ZUNsYXNzKFtpbnN0XSkKICAgICAgICBlbGlmIGlzaW5zdGFuY2Uob2JqLCBzdWl0ZS5UZXN0U3VpdGUpOgogICAgICAgICAgICByZXR1cm4gb2JqCiAgICAgICAgaWYgY2FsbGFibGUob2JqKToKICAgICAgICAgICAgdGVzdCA9IG9iaigpCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodGVzdCwgc3VpdGUuVGVzdFN1aXRlKToKICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0CiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZSh0ZXN0LCBjYXNlLlRlc3RDYXNlKToKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnN1aXRlQ2xhc3MoW3Rlc3RdKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYWxsaW5nICVzIHJldHVybmVkICVzLCBub3QgYSB0ZXN0IiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9iaiwgdGVzdCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJkb24ndCBrbm93IGhvdyB0byBtYWtlIHRlc3QgZnJvbTogJXMiICUgb2JqKQoKICAgIGRlZiBsb2FkVGVzdHNGcm9tTmFtZXMoc2VsZiwgbmFtZXMsIG1vZHVsZT1Ob25lKToKICAgICAgICAiIiJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgZm91bmQgdXNpbmcgdGhlIGdpdmVuIHNlcXVlbmNlCiAgICAgICAgb2Ygc3RyaW5nIHNwZWNpZmllcnMuIFNlZSAnbG9hZFRlc3RzRnJvbU5hbWUoKScuCiAgICAgICAgIiIiCiAgICAgICAgc3VpdGVzID0gW3NlbGYubG9hZFRlc3RzRnJvbU5hbWUobmFtZSwgbW9kdWxlKSBmb3IgbmFtZSBpbiBuYW1lc10KICAgICAgICByZXR1cm4gc2VsZi5zdWl0ZUNsYXNzKHN1aXRlcykKCiAgICBkZWYgZ2V0VGVzdENhc2VOYW1lcyhzZWxmLCB0ZXN0Q2FzZUNsYXNzKToKICAgICAgICAiIiJSZXR1cm4gYSBzb3J0ZWQgc2VxdWVuY2Ugb2YgbWV0aG9kIG5hbWVzIGZvdW5kIHdpdGhpbiB0ZXN0Q2FzZUNsYXNzCiAgICAgICAgIiIiCiAgICAgICAgZGVmIGlzVGVzdE1ldGhvZChhdHRybmFtZSwgdGVzdENhc2VDbGFzcz10ZXN0Q2FzZUNsYXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4PXNlbGYudGVzdE1ldGhvZFByZWZpeCk6CiAgICAgICAgICAgIHJldHVybiBhdHRybmFtZS5zdGFydHN3aXRoKHByZWZpeCkgYW5kIFwKICAgICAgICAgICAgICAgIGNhbGxhYmxlKGdldGF0dHIodGVzdENhc2VDbGFzcywgYXR0cm5hbWUpKQogICAgICAgIHRlc3RGbk5hbWVzID0gbGlzdChmaWx0ZXIoaXNUZXN0TWV0aG9kLCBkaXIodGVzdENhc2VDbGFzcykpKQogICAgICAgIGlmIHNlbGYuc29ydFRlc3RNZXRob2RzVXNpbmc6CiAgICAgICAgICAgIHRlc3RGbk5hbWVzLnNvcnQoa2V5PWZ1bmN0b29scy5jbXBfdG9fa2V5KHNlbGYuc29ydFRlc3RNZXRob2RzVXNpbmcpKQogICAgICAgIHJldHVybiB0ZXN0Rm5OYW1lcwoKICAgIGRlZiBkaXNjb3ZlcihzZWxmLCBzdGFydF9kaXIsIHBhdHRlcm49J3Rlc3QqLnB5JywgdG9wX2xldmVsX2Rpcj1Ob25lKToKICAgICAgICAiIiJGaW5kIGFuZCByZXR1cm4gYWxsIHRlc3QgbW9kdWxlcyBmcm9tIHRoZSBzcGVjaWZpZWQgc3RhcnQKICAgICAgICBkaXJlY3RvcnksIHJlY3Vyc2luZyBpbnRvIHN1YmRpcmVjdG9yaWVzIHRvIGZpbmQgdGhlbSBhbmQgcmV0dXJuIGFsbAogICAgICAgIHRlc3RzIGZvdW5kIHdpdGhpbiB0aGVtLiBPbmx5IHRlc3QgZmlsZXMgdGhhdCBtYXRjaCB0aGUgcGF0dGVybiB3aWxsCiAgICAgICAgYmUgbG9hZGVkLiAoVXNpbmcgc2hlbGwgc3R5bGUgcGF0dGVybiBtYXRjaGluZy4pCgogICAgICAgIEFsbCB0ZXN0IG1vZHVsZXMgbXVzdCBiZSBpbXBvcnRhYmxlIGZyb20gdGhlIHRvcCBsZXZlbCBvZiB0aGUgcHJvamVjdC4KICAgICAgICBJZiB0aGUgc3RhcnQgZGlyZWN0b3J5IGlzIG5vdCB0aGUgdG9wIGxldmVsIGRpcmVjdG9yeSB0aGVuIHRoZSB0b3AKICAgICAgICBsZXZlbCBkaXJlY3RvcnkgbXVzdCBiZSBzcGVjaWZpZWQgc2VwYXJhdGVseS4KCiAgICAgICAgSWYgYSB0ZXN0IHBhY2thZ2UgbmFtZSAoZGlyZWN0b3J5IHdpdGggJ19faW5pdF9fLnB5JykgbWF0Y2hlcyB0aGUKICAgICAgICBwYXR0ZXJuIHRoZW4gdGhlIHBhY2thZ2Ugd2lsbCBiZSBjaGVja2VkIGZvciBhICdsb2FkX3Rlc3RzJyBmdW5jdGlvbi4gSWYKICAgICAgICB0aGlzIGV4aXN0cyB0aGVuIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggbG9hZGVyLCB0ZXN0cywgcGF0dGVybi4KCiAgICAgICAgSWYgbG9hZF90ZXN0cyBleGlzdHMgdGhlbiBkaXNjb3ZlcnkgZG9lcyAgKm5vdCogcmVjdXJzZSBpbnRvIHRoZSBwYWNrYWdlLAogICAgICAgIGxvYWRfdGVzdHMgaXMgcmVzcG9uc2libGUgZm9yIGxvYWRpbmcgYWxsIHRlc3RzIGluIHRoZSBwYWNrYWdlLgoKICAgICAgICBUaGUgcGF0dGVybiBpcyBkZWxpYmVyYXRlbHkgbm90IHN0b3JlZCBhcyBhIGxvYWRlciBhdHRyaWJ1dGUgc28gdGhhdAogICAgICAgIHBhY2thZ2VzIGNhbiBjb250aW51ZSBkaXNjb3ZlcnkgdGhlbXNlbHZlcy4gdG9wX2xldmVsX2RpciBpcyBzdG9yZWQgc28KICAgICAgICBsb2FkX3Rlc3RzIGRvZXMgbm90IG5lZWQgdG8gcGFzcyB0aGlzIGFyZ3VtZW50IGluIHRvIGxvYWRlci5kaXNjb3ZlcigpLgogICAgICAgICIiIgogICAgICAgIHNldF9pbXBsaWNpdF90b3AgPSBGYWxzZQogICAgICAgIGlmIHRvcF9sZXZlbF9kaXIgaXMgTm9uZSBhbmQgc2VsZi5fdG9wX2xldmVsX2RpciBpcyBub3QgTm9uZToKICAgICAgICAgICAgIyBtYWtlIHRvcF9sZXZlbF9kaXIgb3B0aW9uYWwgaWYgY2FsbGVkIGZyb20gbG9hZF90ZXN0cyBpbiBhIHBhY2thZ2UKICAgICAgICAgICAgdG9wX2xldmVsX2RpciA9IHNlbGYuX3RvcF9sZXZlbF9kaXIKICAgICAgICBlbGlmIHRvcF9sZXZlbF9kaXIgaXMgTm9uZToKICAgICAgICAgICAgc2V0X2ltcGxpY2l0X3RvcCA9IFRydWUKICAgICAgICAgICAgdG9wX2xldmVsX2RpciA9IHN0YXJ0X2RpcgoKICAgICAgICB0b3BfbGV2ZWxfZGlyID0gb3MucGF0aC5hYnNwYXRoKHRvcF9sZXZlbF9kaXIpCgogICAgICAgIGlmIG5vdCB0b3BfbGV2ZWxfZGlyIGluIHN5cy5wYXRoOgogICAgICAgICAgICAjIGFsbCB0ZXN0IG1vZHVsZXMgbXVzdCBiZSBpbXBvcnRhYmxlIGZyb20gdGhlIHRvcCBsZXZlbCBkaXJlY3RvcnkKICAgICAgICAgICAgIyBzaG91bGQgd2UgKnVuY29uZGl0aW9uYWxseSogcHV0IHRoZSBzdGFydCBkaXJlY3RvcnkgaW4gZmlyc3QKICAgICAgICAgICAgIyBpbiBzeXMucGF0aCB0byBtaW5pbWlzZSBsaWtlbGlob29kIG9mIGNvbmZsaWN0cyBiZXR3ZWVuIGluc3RhbGxlZAogICAgICAgICAgICAjIG1vZHVsZXMgYW5kIGRldmVsb3BtZW50IHZlcnNpb25zPwogICAgICAgICAgICBzeXMucGF0aC5pbnNlcnQoMCwgdG9wX2xldmVsX2RpcikKICAgICAgICBzZWxmLl90b3BfbGV2ZWxfZGlyID0gdG9wX2xldmVsX2RpcgoKICAgICAgICBpc19ub3RfaW1wb3J0YWJsZSA9IEZhbHNlCiAgICAgICAgaWYgb3MucGF0aC5pc2Rpcihvcy5wYXRoLmFic3BhdGgoc3RhcnRfZGlyKSk6CiAgICAgICAgICAgIHN0YXJ0X2RpciA9IG9zLnBhdGguYWJzcGF0aChzdGFydF9kaXIpCiAgICAgICAgICAgIGlmIHN0YXJ0X2RpciAhPSB0b3BfbGV2ZWxfZGlyOgogICAgICAgICAgICAgICAgaXNfbm90X2ltcG9ydGFibGUgPSBub3Qgb3MucGF0aC5pc2ZpbGUob3MucGF0aC5qb2luKHN0YXJ0X2RpciwgJ19faW5pdF9fLnB5JykpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBzdXBwb3J0IGZvciBkaXNjb3ZlcnkgZnJvbSBkb3R0ZWQgbW9kdWxlIG5hbWVzCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIF9faW1wb3J0X18oc3RhcnRfZGlyKQogICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICBpc19ub3RfaW1wb3J0YWJsZSA9IFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRoZV9tb2R1bGUgPSBzeXMubW9kdWxlc1tzdGFydF9kaXJdCiAgICAgICAgICAgICAgICB0b3BfcGFydCA9IHN0YXJ0X2Rpci5zcGxpdCgnLicpWzBdCiAgICAgICAgICAgICAgICBzdGFydF9kaXIgPSBvcy5wYXRoLmFic3BhdGgob3MucGF0aC5kaXJuYW1lKCh0aGVfbW9kdWxlLl9fZmlsZV9fKSkpCiAgICAgICAgICAgICAgICBpZiBzZXRfaW1wbGljaXRfdG9wOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX3RvcF9sZXZlbF9kaXIgPSBzZWxmLl9nZXRfZGlyZWN0b3J5X2NvbnRhaW5pbmdfbW9kdWxlKHRvcF9wYXJ0KQogICAgICAgICAgICAgICAgICAgIHN5cy5wYXRoLnJlbW92ZSh0b3BfbGV2ZWxfZGlyKQoKICAgICAgICBpZiBpc19ub3RfaW1wb3J0YWJsZToKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoJ1N0YXJ0IGRpcmVjdG9yeSBpcyBub3QgaW1wb3J0YWJsZTogJXInICUgc3RhcnRfZGlyKQoKICAgICAgICB0ZXN0cyA9IGxpc3Qoc2VsZi5fZmluZF90ZXN0cyhzdGFydF9kaXIsIHBhdHRlcm4pKQogICAgICAgIHJldHVybiBzZWxmLnN1aXRlQ2xhc3ModGVzdHMpCgogICAgZGVmIF9nZXRfZGlyZWN0b3J5X2NvbnRhaW5pbmdfbW9kdWxlKHNlbGYsIG1vZHVsZV9uYW1lKToKICAgICAgICBtb2R1bGUgPSBzeXMubW9kdWxlc1ttb2R1bGVfbmFtZV0KICAgICAgICBmdWxsX3BhdGggPSBvcy5wYXRoLmFic3BhdGgobW9kdWxlLl9fZmlsZV9fKQoKICAgICAgICBpZiBvcy5wYXRoLmJhc2VuYW1lKGZ1bGxfcGF0aCkubG93ZXIoKS5zdGFydHN3aXRoKCdfX2luaXRfXy5weScpOgogICAgICAgICAgICByZXR1cm4gb3MucGF0aC5kaXJuYW1lKG9zLnBhdGguZGlybmFtZShmdWxsX3BhdGgpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgaGVyZSB3ZSBoYXZlIGJlZW4gZ2l2ZW4gYSBtb2R1bGUgcmF0aGVyIHRoYW4gYSBwYWNrYWdlIC0gc28KICAgICAgICAgICAgIyBhbGwgd2UgY2FuIGRvIGlzIHNlYXJjaCB0aGUgKnNhbWUqIGRpcmVjdG9yeSB0aGUgbW9kdWxlIGlzIGluCiAgICAgICAgICAgICMgc2hvdWxkIGFuIGV4Y2VwdGlvbiBiZSByYWlzZWQgaW5zdGVhZAogICAgICAgICAgICByZXR1cm4gb3MucGF0aC5kaXJuYW1lKGZ1bGxfcGF0aCkKCiAgICBkZWYgX2dldF9uYW1lX2Zyb21fcGF0aChzZWxmLCBwYXRoKToKICAgICAgICBwYXRoID0gX2p5dGhvbl9hd2FyZV9zcGxpdGV4dChvcy5wYXRoLm5vcm1wYXRoKHBhdGgpKQoKICAgICAgICBfcmVscGF0aCA9IG9zLnBhdGgucmVscGF0aChwYXRoLCBzZWxmLl90b3BfbGV2ZWxfZGlyKQogICAgICAgIGFzc2VydCBub3Qgb3MucGF0aC5pc2FicyhfcmVscGF0aCksICJQYXRoIG11c3QgYmUgd2l0aGluIHRoZSBwcm9qZWN0IgogICAgICAgIGFzc2VydCBub3QgX3JlbHBhdGguc3RhcnRzd2l0aCgnLi4nKSwgIlBhdGggbXVzdCBiZSB3aXRoaW4gdGhlIHByb2plY3QiCgogICAgICAgIG5hbWUgPSBfcmVscGF0aC5yZXBsYWNlKG9zLnBhdGguc2VwLCAnLicpCiAgICAgICAgcmV0dXJuIG5hbWUKCiAgICBkZWYgX2dldF9tb2R1bGVfZnJvbV9uYW1lKHNlbGYsIG5hbWUpOgogICAgICAgIF9faW1wb3J0X18obmFtZSkKICAgICAgICByZXR1cm4gc3lzLm1vZHVsZXNbbmFtZV0KCiAgICBkZWYgX21hdGNoX3BhdGgoc2VsZiwgcGF0aCwgZnVsbF9wYXRoLCBwYXR0ZXJuKToKICAgICAgICAjIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIHVzZSBhbHRlcm5hdGl2ZSBtYXRjaGluZyBzdHJhdGVneQogICAgICAgIHJldHVybiBmbm1hdGNoKHBhdGgsIHBhdHRlcm4pCgogICAgZGVmIF9maW5kX3Rlc3RzKHNlbGYsIHN0YXJ0X2RpciwgcGF0dGVybik6CiAgICAgICAgIiIiVXNlZCBieSBkaXNjb3ZlcnkuIFlpZWxkcyB0ZXN0IHN1aXRlcyBpdCBsb2Fkcy4iIiIKICAgICAgICBwYXRocyA9IG9zLmxpc3RkaXIoc3RhcnRfZGlyKQoKICAgICAgICBmb3IgcGF0aCBpbiBwYXRoczoKICAgICAgICAgICAgZnVsbF9wYXRoID0gb3MucGF0aC5qb2luKHN0YXJ0X2RpciwgcGF0aCkKICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUoZnVsbF9wYXRoKToKICAgICAgICAgICAgICAgIGlmIG5vdCBWQUxJRF9NT0RVTEVfTkFNRS5tYXRjaChwYXRoKToKICAgICAgICAgICAgICAgICAgICAjIHZhbGlkIFB5dGhvbiBpZGVudGlmaWVycyBvbmx5CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9tYXRjaF9wYXRoKHBhdGgsIGZ1bGxfcGF0aCwgcGF0dGVybik6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICMgaWYgdGhlIHRlc3QgZmlsZSBtYXRjaGVzLCBsb2FkIGl0CiAgICAgICAgICAgICAgICBuYW1lID0gc2VsZi5fZ2V0X25hbWVfZnJvbV9wYXRoKGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBtb2R1bGUgPSBzZWxmLl9nZXRfbW9kdWxlX2Zyb21fbmFtZShuYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2ZhaWxlZF9pbXBvcnRfdGVzdChuYW1lLCBzZWxmLnN1aXRlQ2xhc3MpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG1vZF9maWxlID0gb3MucGF0aC5hYnNwYXRoKGdldGF0dHIobW9kdWxlLCAnX19maWxlX18nLCBmdWxsX3BhdGgpKQogICAgICAgICAgICAgICAgICAgIHJlYWxwYXRoID0gX2p5dGhvbl9hd2FyZV9zcGxpdGV4dChtb2RfZmlsZSkKICAgICAgICAgICAgICAgICAgICBmdWxscGF0aF9ub2V4dCA9IF9qeXRob25fYXdhcmVfc3BsaXRleHQoZnVsbF9wYXRoKQogICAgICAgICAgICAgICAgICAgIGlmIHJlYWxwYXRoLmxvd2VyKCkgIT0gZnVsbHBhdGhfbm9leHQubG93ZXIoKToKICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlX2RpciA9IG9zLnBhdGguZGlybmFtZShyZWFscGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgbW9kX25hbWUgPSBfanl0aG9uX2F3YXJlX3NwbGl0ZXh0KG9zLnBhdGguYmFzZW5hbWUoZnVsbF9wYXRoKSkKICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfZGlyID0gb3MucGF0aC5kaXJuYW1lKGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gKCIlciBtb2R1bGUgaW5jb3JyZWN0bHkgaW1wb3J0ZWQgZnJvbSAlci4gRXhwZWN0ZWQgJXIuICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJcyB0aGlzIG1vZHVsZSBnbG9iYWxseSBpbnN0YWxsZWQ/IikKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IobXNnICUgKG1vZF9uYW1lLCBtb2R1bGVfZGlyLCBleHBlY3RlZF9kaXIpKQogICAgICAgICAgICAgICAgICAgIHlpZWxkIHNlbGYubG9hZFRlc3RzRnJvbU1vZHVsZShtb2R1bGUpCiAgICAgICAgICAgIGVsaWYgb3MucGF0aC5pc2RpcihmdWxsX3BhdGgpOgogICAgICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguaXNmaWxlKG9zLnBhdGguam9pbihmdWxsX3BhdGgsICdfX2luaXRfXy5weScpKToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIGxvYWRfdGVzdHMgPSBOb25lCiAgICAgICAgICAgICAgICB0ZXN0cyA9IE5vbmUKICAgICAgICAgICAgICAgIGlmIGZubWF0Y2gocGF0aCwgcGF0dGVybik6CiAgICAgICAgICAgICAgICAgICAgIyBvbmx5IGNoZWNrIGxvYWRfdGVzdHMgaWYgdGhlIHBhY2thZ2UgZGlyZWN0b3J5IGl0c2VsZiBtYXRjaGVzIHRoZSBmaWx0ZXIKICAgICAgICAgICAgICAgICAgICBuYW1lID0gc2VsZi5fZ2V0X25hbWVfZnJvbV9wYXRoKGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgICAgICBwYWNrYWdlID0gc2VsZi5fZ2V0X21vZHVsZV9mcm9tX25hbWUobmFtZSkKICAgICAgICAgICAgICAgICAgICBsb2FkX3Rlc3RzID0gZ2V0YXR0cihwYWNrYWdlLCAnbG9hZF90ZXN0cycsIE5vbmUpCiAgICAgICAgICAgICAgICAgICAgdGVzdHMgPSBzZWxmLmxvYWRUZXN0c0Zyb21Nb2R1bGUocGFja2FnZSwgdXNlX2xvYWRfdGVzdHM9RmFsc2UpCgogICAgICAgICAgICAgICAgaWYgbG9hZF90ZXN0cyBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgIGlmIHRlc3RzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAjIHRlc3RzIGxvYWRlZCBmcm9tIHBhY2thZ2UgZmlsZQogICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0ZXN0cwogICAgICAgICAgICAgICAgICAgICMgcmVjdXJzZSBpbnRvIHRoZSBwYWNrYWdlCiAgICAgICAgICAgICAgICAgICAgZm9yIHRlc3QgaW4gc2VsZi5fZmluZF90ZXN0cyhmdWxsX3BhdGgsIHBhdHRlcm4pOgogICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0ZXN0CiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgbG9hZF90ZXN0cyhzZWxmLCB0ZXN0cywgcGF0dGVybikKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2ZhaWxlZF9sb2FkX3Rlc3RzKHBhY2thZ2UuX19uYW1lX18sIGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3VpdGVDbGFzcykKCmRlZmF1bHRUZXN0TG9hZGVyID0gVGVzdExvYWRlcigpCgoKZGVmIF9tYWtlTG9hZGVyKHByZWZpeCwgc29ydFVzaW5nLCBzdWl0ZUNsYXNzPU5vbmUpOgogICAgbG9hZGVyID0gVGVzdExvYWRlcigpCiAgICBsb2FkZXIuc29ydFRlc3RNZXRob2RzVXNpbmcgPSBzb3J0VXNpbmcKICAgIGxvYWRlci50ZXN0TWV0aG9kUHJlZml4ID0gcHJlZml4CiAgICBpZiBzdWl0ZUNsYXNzOgogICAgICAgIGxvYWRlci5zdWl0ZUNsYXNzID0gc3VpdGVDbGFzcwogICAgcmV0dXJuIGxvYWRlcgoKZGVmIGdldFRlc3RDYXNlTmFtZXModGVzdENhc2VDbGFzcywgcHJlZml4LCBzb3J0VXNpbmc9dXRpbC50aHJlZV93YXlfY21wKToKICAgIHJldHVybiBfbWFrZUxvYWRlcihwcmVmaXgsIHNvcnRVc2luZykuZ2V0VGVzdENhc2VOYW1lcyh0ZXN0Q2FzZUNsYXNzKQoKZGVmIG1ha2VTdWl0ZSh0ZXN0Q2FzZUNsYXNzLCBwcmVmaXg9J3Rlc3QnLCBzb3J0VXNpbmc9dXRpbC50aHJlZV93YXlfY21wLAogICAgICAgICAgICAgIHN1aXRlQ2xhc3M9c3VpdGUuVGVzdFN1aXRlKToKICAgIHJldHVybiBfbWFrZUxvYWRlcihwcmVmaXgsIHNvcnRVc2luZywgc3VpdGVDbGFzcykubG9hZFRlc3RzRnJvbVRlc3RDYXNlKAogICAgICAgIHRlc3RDYXNlQ2xhc3MpCgpkZWYgZmluZFRlc3RDYXNlcyhtb2R1bGUsIHByZWZpeD0ndGVzdCcsIHNvcnRVc2luZz11dGlsLnRocmVlX3dheV9jbXAsCiAgICAgICAgICAgICAgICAgIHN1aXRlQ2xhc3M9c3VpdGUuVGVzdFN1aXRlKToKICAgIHJldHVybiBfbWFrZUxvYWRlcihwcmVmaXgsIHNvcnRVc2luZywgc3VpdGVDbGFzcykubG9hZFRlc3RzRnJvbU1vZHVsZShcCiAgICAgICAgbW9kdWxlKQo=',
'/Lib/unittest/signals.py':'aW1wb3J0IHNpZ25hbA0KaW1wb3J0IHdlYWtyZWYNCg0KZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHdyYXBzDQoNCl9fdW5pdHRlc3QgPSBUcnVlDQoNCg0KY2xhc3MgX0ludGVycnVwdEhhbmRsZXIob2JqZWN0KToNCiAgICBkZWYgX19pbml0X18oc2VsZiwgZGVmYXVsdF9oYW5kbGVyKToNCiAgICAgICAgc2VsZi5jYWxsZWQgPSBGYWxzZQ0KICAgICAgICBzZWxmLmRlZmF1bHRfaGFuZGxlciA9IGRlZmF1bHRfaGFuZGxlcg0KDQogICAgZGVmIF9fY2FsbF9fKHNlbGYsIHNpZ251bSwgZnJhbWUpOg0KICAgICAgICBpbnN0YWxsZWRfaGFuZGxlciA9IHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCkNCiAgICAgICAgaWYgaW5zdGFsbGVkX2hhbmRsZXIgaXMgbm90IHNlbGY6DQogICAgICAgICAgICAjIGlmIHdlIGFyZW4ndCB0aGUgaW5zdGFsbGVkIGhhbmRsZXIsIHRoZW4gZGVsZWdhdGUgaW1tZWRpYXRlbHkNCiAgICAgICAgICAgICMgdG8gdGhlIGRlZmF1bHQgaGFuZGxlcg0KICAgICAgICAgICAgc2VsZi5kZWZhdWx0X2hhbmRsZXIoc2lnbnVtLCBmcmFtZSkNCg0KICAgICAgICBpZiBzZWxmLmNhbGxlZDoNCiAgICAgICAgICAgIHNlbGYuZGVmYXVsdF9oYW5kbGVyKHNpZ251bSwgZnJhbWUpDQogICAgICAgIHNlbGYuY2FsbGVkID0gVHJ1ZQ0KICAgICAgICBmb3IgcmVzdWx0IGluIF9yZXN1bHRzLmtleXMoKToNCiAgICAgICAgICAgIHJlc3VsdC5zdG9wKCkNCg0KX3Jlc3VsdHMgPSB3ZWFrcmVmLldlYWtLZXlEaWN0aW9uYXJ5KCkNCmRlZiByZWdpc3RlclJlc3VsdChyZXN1bHQpOg0KICAgIF9yZXN1bHRzW3Jlc3VsdF0gPSAxDQoNCmRlZiByZW1vdmVSZXN1bHQocmVzdWx0KToNCiAgICByZXR1cm4gYm9vbChfcmVzdWx0cy5wb3AocmVzdWx0LCBOb25lKSkNCg0KX2ludGVycnVwdF9oYW5kbGVyID0gTm9uZQ0KZGVmIGluc3RhbGxIYW5kbGVyKCk6DQogICAgZ2xvYmFsIF9pbnRlcnJ1cHRfaGFuZGxlcg0KICAgIGlmIF9pbnRlcnJ1cHRfaGFuZGxlciBpcyBOb25lOg0KICAgICAgICBkZWZhdWx0X2hhbmRsZXIgPSBzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpDQogICAgICAgIF9pbnRlcnJ1cHRfaGFuZGxlciA9IF9JbnRlcnJ1cHRIYW5kbGVyKGRlZmF1bHRfaGFuZGxlcikNCiAgICAgICAgc2lnbmFsLnNpZ25hbChzaWduYWwuU0lHSU5ULCBfaW50ZXJydXB0X2hhbmRsZXIpDQoNCg0KZGVmIHJlbW92ZUhhbmRsZXIobWV0aG9kPU5vbmUpOg0KICAgIGlmIG1ldGhvZCBpcyBub3QgTm9uZToNCiAgICAgICAgQHdyYXBzKG1ldGhvZCkNCiAgICAgICAgZGVmIGlubmVyKCphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICAgICBpbml0aWFsID0gc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKQ0KICAgICAgICAgICAgcmVtb3ZlSGFuZGxlcigpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgcmV0dXJuIG1ldGhvZCgqYXJncywgKiprd2FyZ3MpDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHNpZ25hbC5zaWduYWwoc2lnbmFsLlNJR0lOVCwgaW5pdGlhbCkNCiAgICAgICAgcmV0dXJuIGlubmVyDQoNCiAgICBnbG9iYWwgX2ludGVycnVwdF9oYW5kbGVyDQogICAgaWYgX2ludGVycnVwdF9oYW5kbGVyIGlzIG5vdCBOb25lOg0KICAgICAgICBzaWduYWwuc2lnbmFsKHNpZ25hbC5TSUdJTlQsIF9pbnRlcnJ1cHRfaGFuZGxlci5kZWZhdWx0X2hhbmRsZXIpDQo=',
'/Lib/unittest/case.py':'IiIiVGVzdCBjYXNlIGltcGxlbWVudGF0aW9uIiIiCgppbXBvcnQgc3lzCmltcG9ydCBmdW5jdG9vbHMKaW1wb3J0IGRpZmZsaWIKaW1wb3J0IHBwcmludAppbXBvcnQgcmUKaW1wb3J0IHdhcm5pbmdzCmltcG9ydCBjb2xsZWN0aW9ucwoKZnJvbSAuIGltcG9ydCByZXN1bHQKZnJvbSAudXRpbCBpbXBvcnQgKHN0cmNsYXNzLCBzYWZlX3JlcHIsIF9jb3VudF9kaWZmX2FsbF9wdXJwb3NlLAogICAgICAgICAgICAgICAgICAgX2NvdW50X2RpZmZfaGFzaGFibGUpCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKCkRJRkZfT01JVFRFRCA9ICgnXG5EaWZmIGlzICVzIGNoYXJhY3RlcnMgbG9uZy4gJwogICAgICAgICAgICAgICAgICdTZXQgc2VsZi5tYXhEaWZmIHRvIE5vbmUgdG8gc2VlIGl0LicpCgpjbGFzcyBTa2lwVGVzdChFeGNlcHRpb24pOgogICAgIiIiCiAgICBSYWlzZSB0aGlzIGV4Y2VwdGlvbiBpbiBhIHRlc3QgdG8gc2tpcCBpdC4KCiAgICBVc3VhbGx5IHlvdSBjYW4gdXNlIFRlc3RSZXN1bHQuc2tpcCgpIG9yIG9uZSBvZiB0aGUgc2tpcHBpbmcgZGVjb3JhdG9ycwogICAgaW5zdGVhZCBvZiByYWlzaW5nIHRoaXMgZGlyZWN0bHkuCiAgICAiIiIKCmNsYXNzIF9FeHBlY3RlZEZhaWx1cmUoRXhjZXB0aW9uKToKICAgICIiIgogICAgUmFpc2UgdGhpcyB3aGVuIGEgdGVzdCBpcyBleHBlY3RlZCB0byBmYWlsLgoKICAgIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlsLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGV4Y19pbmZvKToKICAgICAgICBzdXBlcihfRXhwZWN0ZWRGYWlsdXJlLCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5leGNfaW5mbyA9IGV4Y19pbmZvCgpjbGFzcyBfVW5leHBlY3RlZFN1Y2Nlc3MoRXhjZXB0aW9uKToKICAgICIiIgogICAgVGhlIHRlc3Qgd2FzIHN1cHBvc2VkIHRvIGZhaWwsIGJ1dCBpdCBkaWRuJ3QhCiAgICAiIiIKCgpjbGFzcyBfT3V0Y29tZShvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuc3VjY2VzcyA9IFRydWUKICAgICAgICBzZWxmLnNraXBwZWQgPSBOb25lCiAgICAgICAgc2VsZi51bmV4cGVjdGVkU3VjY2VzcyA9IE5vbmUKICAgICAgICBzZWxmLmV4cGVjdGVkRmFpbHVyZSA9IE5vbmUKICAgICAgICBzZWxmLmVycm9ycyA9IFtdCiAgICAgICAgc2VsZi5mYWlsdXJlcyA9IFtdCgoKZGVmIF9pZChvYmopOgogICAgcmV0dXJuIG9iagoKZGVmIHNraXAocmVhc29uKToKICAgICIiIgogICAgVW5jb25kaXRpb25hbGx5IHNraXAgYSB0ZXN0LgogICAgIiIiCiAgICBkZWYgZGVjb3JhdG9yKHRlc3RfaXRlbSk6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodGVzdF9pdGVtLCB0eXBlKToKICAgICAgICAgICAgQGZ1bmN0b29scy53cmFwcyh0ZXN0X2l0ZW0pCiAgICAgICAgICAgIGRlZiBza2lwX3dyYXBwZXIoKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAgICAgICAgIHJhaXNlIFNraXBUZXN0KHJlYXNvbikKICAgICAgICAgICAgdGVzdF9pdGVtID0gc2tpcF93cmFwcGVyCgogICAgICAgIHRlc3RfaXRlbS5fX3VuaXR0ZXN0X3NraXBfXyA9IFRydWUKICAgICAgICB0ZXN0X2l0ZW0uX191bml0dGVzdF9za2lwX3doeV9fID0gcmVhc29uCiAgICAgICAgcmV0dXJuIHRlc3RfaXRlbQogICAgcmV0dXJuIGRlY29yYXRvcgoKZGVmIHNraXBJZihjb25kaXRpb24sIHJlYXNvbik6CiAgICAiIiIKICAgIFNraXAgYSB0ZXN0IGlmIHRoZSBjb25kaXRpb24gaXMgdHJ1ZS4KICAgICIiIgogICAgaWYgY29uZGl0aW9uOgogICAgICAgIHJldHVybiBza2lwKHJlYXNvbikKICAgIHJldHVybiBfaWQKCmRlZiBza2lwVW5sZXNzKGNvbmRpdGlvbiwgcmVhc29uKToKICAgICIiIgogICAgU2tpcCBhIHRlc3QgdW5sZXNzIHRoZSBjb25kaXRpb24gaXMgdHJ1ZS4KICAgICIiIgogICAgaWYgbm90IGNvbmRpdGlvbjoKICAgICAgICByZXR1cm4gc2tpcChyZWFzb24pCiAgICByZXR1cm4gX2lkCgoKZGVmIGV4cGVjdGVkRmFpbHVyZShmdW5jKToKICAgIEBmdW5jdG9vbHMud3JhcHMoZnVuYykKICAgIGRlZiB3cmFwcGVyKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmdW5jKCphcmdzLCAqKmt3YXJncykKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByYWlzZSBfRXhwZWN0ZWRGYWlsdXJlKHN5cy5leGNfaW5mbygpKQogICAgICAgIHJhaXNlIF9VbmV4cGVjdGVkU3VjY2VzcwogICAgcmV0dXJuIHdyYXBwZXIKCgpjbGFzcyBfQXNzZXJ0UmFpc2VzQmFzZUNvbnRleHQob2JqZWN0KToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgZXhwZWN0ZWQsIHRlc3RfY2FzZSwgY2FsbGFibGVfb2JqPU5vbmUsCiAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXg9Tm9uZSk6CiAgICAgICAgc2VsZi5leHBlY3RlZCA9IGV4cGVjdGVkCiAgICAgICAgc2VsZi50ZXN0X2Nhc2UgPSB0ZXN0X2Nhc2UKICAgICAgICBpZiBjYWxsYWJsZV9vYmogaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYub2JqX25hbWUgPSBjYWxsYWJsZV9vYmouX19uYW1lX18KICAgICAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICAgICAgc2VsZi5vYmpfbmFtZSA9IHN0cihjYWxsYWJsZV9vYmopCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5vYmpfbmFtZSA9IE5vbmUKICAgICAgICBpZiBpc2luc3RhbmNlKGV4cGVjdGVkX3JlZ2V4LCAoYnl0ZXMsIHN0cikpOgogICAgICAgICAgICBleHBlY3RlZF9yZWdleCA9IHJlLmNvbXBpbGUoZXhwZWN0ZWRfcmVnZXgpCiAgICAgICAgc2VsZi5leHBlY3RlZF9yZWdleCA9IGV4cGVjdGVkX3JlZ2V4CiAgICAgICAgc2VsZi5tc2cgPSBOb25lCgogICAgZGVmIF9yYWlzZUZhaWx1cmUoc2VsZiwgc3RhbmRhcmRNc2cpOgogICAgICAgIG1zZyA9IHNlbGYudGVzdF9jYXNlLl9mb3JtYXRNZXNzYWdlKHNlbGYubXNnLCBzdGFuZGFyZE1zZykKICAgICAgICByYWlzZSBzZWxmLnRlc3RfY2FzZS5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgaGFuZGxlKHNlbGYsIG5hbWUsIGNhbGxhYmxlX29iaiwgYXJncywga3dhcmdzKToKICAgICAgICAiIiIKICAgICAgICBJZiBjYWxsYWJsZV9vYmogaXMgTm9uZSwgYXNzZXJ0UmFpc2VzL1dhcm5zIGlzIGJlaW5nIHVzZWQgYXMgYQogICAgICAgIGNvbnRleHQgbWFuYWdlciwgc28gY2hlY2sgZm9yIGEgJ21zZycga3dhcmcgYW5kIHJldHVybiBzZWxmLgogICAgICAgIElmIGNhbGxhYmxlX29iaiBpcyBub3QgTm9uZSwgY2FsbCBpdCBwYXNzaW5nIGFyZ3MgYW5kIGt3YXJncy4KICAgICAgICAiIiIKICAgICAgICBpZiBjYWxsYWJsZV9vYmogaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5tc2cgPSBrd2FyZ3MucG9wKCdtc2cnLCBOb25lKQogICAgICAgICAgICByZXR1cm4gc2VsZgogICAgICAgIHdpdGggc2VsZjoKICAgICAgICAgICAgY2FsbGFibGVfb2JqKCphcmdzLCAqKmt3YXJncykKCgoKY2xhc3MgX0Fzc2VydFJhaXNlc0NvbnRleHQoX0Fzc2VydFJhaXNlc0Jhc2VDb250ZXh0KToKICAgICIiIkEgY29udGV4dCBtYW5hZ2VyIHVzZWQgdG8gaW1wbGVtZW50IFRlc3RDYXNlLmFzc2VydFJhaXNlcyogbWV0aG9kcy4iIiIKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIGV4Y190eXBlLCBleGNfdmFsdWUsIHRiKToKICAgICAgICBpZiBleGNfdHlwZSBpcyBOb25lOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBleGNfbmFtZSA9IHNlbGYuZXhwZWN0ZWQuX19uYW1lX18KICAgICAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICAgICAgZXhjX25hbWUgPSBzdHIoc2VsZi5leHBlY3RlZCkKICAgICAgICAgICAgaWYgc2VsZi5vYmpfbmFtZToKICAgICAgICAgICAgICAgIHNlbGYuX3JhaXNlRmFpbHVyZSgie30gbm90IHJhaXNlZCBieSB7fSIuZm9ybWF0KGV4Y19uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vYmpfbmFtZSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLl9yYWlzZUZhaWx1cmUoInt9IG5vdCByYWlzZWQiLmZvcm1hdChleGNfbmFtZSkpCiAgICAgICAgaWYgbm90IGlzc3ViY2xhc3MoZXhjX3R5cGUsIHNlbGYuZXhwZWN0ZWQpOgogICAgICAgICAgICAjIGxldCB1bmV4cGVjdGVkIGV4Y2VwdGlvbnMgcGFzcyB0aHJvdWdoCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICMgc3RvcmUgZXhjZXB0aW9uLCB3aXRob3V0IHRyYWNlYmFjaywgZm9yIGxhdGVyIHJldHJpZXZhbAogICAgICAgIHNlbGYuZXhjZXB0aW9uID0gZXhjX3ZhbHVlLndpdGhfdHJhY2ViYWNrKE5vbmUpCiAgICAgICAgaWYgc2VsZi5leHBlY3RlZF9yZWdleCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgICAgICBleHBlY3RlZF9yZWdleCA9IHNlbGYuZXhwZWN0ZWRfcmVnZXgKICAgICAgICBpZiBub3QgZXhwZWN0ZWRfcmVnZXguc2VhcmNoKHN0cihleGNfdmFsdWUpKToKICAgICAgICAgICAgc2VsZi5fcmFpc2VGYWlsdXJlKCcie30iIGRvZXMgbm90IG1hdGNoICJ7fSInLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXgucGF0dGVybiwgc3RyKGV4Y192YWx1ZSkpKQogICAgICAgIHJldHVybiBUcnVlCgoKY2xhc3MgX0Fzc2VydFdhcm5zQ29udGV4dChfQXNzZXJ0UmFpc2VzQmFzZUNvbnRleHQpOgogICAgIiIiQSBjb250ZXh0IG1hbmFnZXIgdXNlZCB0byBpbXBsZW1lbnQgVGVzdENhc2UuYXNzZXJ0V2FybnMqIG1ldGhvZHMuIiIiCgogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToKICAgICAgICAjIFRoZSBfX3dhcm5pbmdyZWdpc3RyeV9fJ3MgbmVlZCB0byBiZSBpbiBhIHByaXN0aW5lIHN0YXRlIGZvciB0ZXN0cwogICAgICAgICMgdG8gd29yayBwcm9wZXJseS4KICAgICAgICBmb3IgdiBpbiBzeXMubW9kdWxlcy52YWx1ZXMoKToKICAgICAgICAgICAgaWYgZ2V0YXR0cih2LCAnX193YXJuaW5ncmVnaXN0cnlfXycsIE5vbmUpOgogICAgICAgICAgICAgICAgdi5fX3dhcm5pbmdyZWdpc3RyeV9fID0ge30KICAgICAgICBzZWxmLndhcm5pbmdzX21hbmFnZXIgPSB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncyhyZWNvcmQ9VHJ1ZSkKICAgICAgICBzZWxmLndhcm5pbmdzID0gc2VsZi53YXJuaW5nc19tYW5hZ2VyLl9fZW50ZXJfXygpCiAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJhbHdheXMiLCBzZWxmLmV4cGVjdGVkKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIGV4Y190eXBlLCBleGNfdmFsdWUsIHRiKToKICAgICAgICBzZWxmLndhcm5pbmdzX21hbmFnZXIuX19leGl0X18oZXhjX3R5cGUsIGV4Y192YWx1ZSwgdGIpCiAgICAgICAgaWYgZXhjX3R5cGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICMgbGV0IHVuZXhwZWN0ZWQgZXhjZXB0aW9ucyBwYXNzIHRocm91Z2gKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgdHJ5OgogICAgICAgICAgICBleGNfbmFtZSA9IHNlbGYuZXhwZWN0ZWQuX19uYW1lX18KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIGV4Y19uYW1lID0gc3RyKHNlbGYuZXhwZWN0ZWQpCiAgICAgICAgZmlyc3RfbWF0Y2hpbmcgPSBOb25lCiAgICAgICAgZm9yIG0gaW4gc2VsZi53YXJuaW5nczoKICAgICAgICAgICAgdyA9IG0ubWVzc2FnZQogICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh3LCBzZWxmLmV4cGVjdGVkKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGZpcnN0X21hdGNoaW5nIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBmaXJzdF9tYXRjaGluZyA9IHcKICAgICAgICAgICAgaWYgKHNlbGYuZXhwZWN0ZWRfcmVnZXggaXMgbm90IE5vbmUgYW5kCiAgICAgICAgICAgICAgICBub3Qgc2VsZi5leHBlY3RlZF9yZWdleC5zZWFyY2goc3RyKHcpKSk6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAjIHN0b3JlIHdhcm5pbmcgZm9yIGxhdGVyIHJldHJpZXZhbAogICAgICAgICAgICBzZWxmLndhcm5pbmcgPSB3CiAgICAgICAgICAgIHNlbGYuZmlsZW5hbWUgPSBtLmZpbGVuYW1lCiAgICAgICAgICAgIHNlbGYubGluZW5vID0gbS5saW5lbm8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgIyBOb3cgd2Ugc2ltcGx5IHRyeSB0byBjaG9vc2UgYSBoZWxwZnVsIGZhaWx1cmUgbWVzc2FnZQogICAgICAgIGlmIGZpcnN0X21hdGNoaW5nIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLl9yYWlzZUZhaWx1cmUoJyJ7fSIgZG9lcyBub3QgbWF0Y2ggInt9IicuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICBzZWxmLmV4cGVjdGVkX3JlZ2V4LnBhdHRlcm4sIHN0cihmaXJzdF9tYXRjaGluZykpKQogICAgICAgIGlmIHNlbGYub2JqX25hbWU6CiAgICAgICAgICAgIHNlbGYuX3JhaXNlRmFpbHVyZSgie30gbm90IHRyaWdnZXJlZCBieSB7fSIuZm9ybWF0KGV4Y19uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9ial9uYW1lKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9yYWlzZUZhaWx1cmUoInt9IG5vdCB0cmlnZ2VyZWQiLmZvcm1hdChleGNfbmFtZSkpCgoKY2xhc3MgVGVzdENhc2Uob2JqZWN0KToKICAgICIiIkEgY2xhc3Mgd2hvc2UgaW5zdGFuY2VzIGFyZSBzaW5nbGUgdGVzdCBjYXNlcy4KCiAgICBCeSBkZWZhdWx0LCB0aGUgdGVzdCBjb2RlIGl0c2VsZiBzaG91bGQgYmUgcGxhY2VkIGluIGEgbWV0aG9kIG5hbWVkCiAgICAncnVuVGVzdCcuCgogICAgSWYgdGhlIGZpeHR1cmUgbWF5IGJlIHVzZWQgZm9yIG1hbnkgdGVzdCBjYXNlcywgY3JlYXRlIGFzCiAgICBtYW55IHRlc3QgbWV0aG9kcyBhcyBhcmUgbmVlZGVkLiBXaGVuIGluc3RhbnRpYXRpbmcgc3VjaCBhIFRlc3RDYXNlCiAgICBzdWJjbGFzcywgc3BlY2lmeSBpbiB0aGUgY29uc3RydWN0b3IgYXJndW1lbnRzIHRoZSBuYW1lIG9mIHRoZSB0ZXN0IG1ldGhvZAogICAgdGhhdCB0aGUgaW5zdGFuY2UgaXMgdG8gZXhlY3V0ZS4KCiAgICBUZXN0IGF1dGhvcnMgc2hvdWxkIHN1YmNsYXNzIFRlc3RDYXNlIGZvciB0aGVpciBvd24gdGVzdHMuIENvbnN0cnVjdGlvbgogICAgYW5kIGRlY29uc3RydWN0aW9uIG9mIHRoZSB0ZXN0J3MgZW52aXJvbm1lbnQgKCdmaXh0dXJlJykgY2FuIGJlCiAgICBpbXBsZW1lbnRlZCBieSBvdmVycmlkaW5nIHRoZSAnc2V0VXAnIGFuZCAndGVhckRvd24nIG1ldGhvZHMgcmVzcGVjdGl2ZWx5LgoKICAgIElmIGl0IGlzIG5lY2Vzc2FyeSB0byBvdmVycmlkZSB0aGUgX19pbml0X18gbWV0aG9kLCB0aGUgYmFzZSBjbGFzcwogICAgX19pbml0X18gbWV0aG9kIG11c3QgYWx3YXlzIGJlIGNhbGxlZC4gSXQgaXMgaW1wb3J0YW50IHRoYXQgc3ViY2xhc3NlcwogICAgc2hvdWxkIG5vdCBjaGFuZ2UgdGhlIHNpZ25hdHVyZSBvZiB0aGVpciBfX2luaXRfXyBtZXRob2QsIHNpbmNlIGluc3RhbmNlcwogICAgb2YgdGhlIGNsYXNzZXMgYXJlIGluc3RhbnRpYXRlZCBhdXRvbWF0aWNhbGx5IGJ5IHBhcnRzIG9mIHRoZSBmcmFtZXdvcmsKICAgIGluIG9yZGVyIHRvIGJlIHJ1bi4KICAgICIiIgoKICAgICMgVGhpcyBhdHRyaWJ1dGUgZGV0ZXJtaW5lcyB3aGljaCBleGNlcHRpb24gd2lsbCBiZSByYWlzZWQgd2hlbgogICAgIyB0aGUgaW5zdGFuY2UncyBhc3NlcnRpb24gbWV0aG9kcyBmYWlsOyB0ZXN0IG1ldGhvZHMgcmFpc2luZyB0aGlzCiAgICAjIGV4Y2VwdGlvbiB3aWxsIGJlIGRlZW1lZCB0byBoYXZlICdmYWlsZWQnIHJhdGhlciB0aGFuICdlcnJvcmVkJwoKICAgIGZhaWx1cmVFeGNlcHRpb24gPSBBc3NlcnRpb25FcnJvcgoKICAgICMgVGhpcyBhdHRyaWJ1dGUgZGV0ZXJtaW5lcyB3aGV0aGVyIGxvbmcgbWVzc2FnZXMgKGluY2x1ZGluZyByZXByIG9mCiAgICAjIG9iamVjdHMgdXNlZCBpbiBhc3NlcnQgbWV0aG9kcykgd2lsbCBiZSBwcmludGVkIG9uIGZhaWx1cmUgaW4gKmFkZGl0aW9uKgogICAgIyB0byBhbnkgZXhwbGljaXQgbWVzc2FnZSBwYXNzZWQuCgogICAgbG9uZ01lc3NhZ2UgPSBUcnVlCgogICAgIyBUaGlzIGF0dHJpYnV0ZSBzZXRzIHRoZSBtYXhpbXVtIGxlbmd0aCBvZiBhIGRpZmYgaW4gZmFpbHVyZSBtZXNzYWdlcwogICAgIyBieSBhc3NlcnQgbWV0aG9kcyB1c2luZyBkaWZmbGliLiBJdCBpcyBsb29rZWQgdXAgYXMgYW4gaW5zdGFuY2UgYXR0cmlidXRlCiAgICAjIHNvIGNhbiBiZSBjb25maWd1cmVkIGJ5IGluZGl2aWR1YWwgdGVzdHMgaWYgcmVxdWlyZWQuCgogICAgbWF4RGlmZiA9IDgwKjgKCiAgICAjIElmIGEgc3RyaW5nIGlzIGxvbmdlciB0aGFuIF9kaWZmVGhyZXNob2xkLCB1c2Ugbm9ybWFsIGNvbXBhcmlzb24gaW5zdGVhZAogICAgIyBvZiBkaWZmbGliLiAgU2VlICMxMTc2My4KICAgIF9kaWZmVGhyZXNob2xkID0gMioqMTYKCiAgICAjIEF0dHJpYnV0ZSB1c2VkIGJ5IFRlc3RTdWl0ZSBmb3IgY2xhc3NTZXRVcAoKICAgIF9jbGFzc1NldHVwRmFpbGVkID0gRmFsc2UKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbWV0aG9kTmFtZT0ncnVuVGVzdCcpOgogICAgICAgICIiIkNyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgY2xhc3MgdGhhdCB3aWxsIHVzZSB0aGUgbmFtZWQgdGVzdAogICAgICAgICAgIG1ldGhvZCB3aGVuIGV4ZWN1dGVkLiBSYWlzZXMgYSBWYWx1ZUVycm9yIGlmIHRoZSBpbnN0YW5jZSBkb2VzCiAgICAgICAgICAgbm90IGhhdmUgYSBtZXRob2Qgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fdGVzdE1ldGhvZE5hbWUgPSBtZXRob2ROYW1lCiAgICAgICAgc2VsZi5fb3V0Y29tZUZvckRvQ2xlYW51cHMgPSBOb25lCiAgICAgICAgc2VsZi5fdGVzdE1ldGhvZERvYyA9ICdObyB0ZXN0JwogICAgICAgIHRyeToKICAgICAgICAgICAgdGVzdE1ldGhvZCA9IGdldGF0dHIoc2VsZiwgbWV0aG9kTmFtZSkKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIGlmIG1ldGhvZE5hbWUgIT0gJ3J1blRlc3QnOgogICAgICAgICAgICAgICAgIyB3ZSBhbGxvdyBpbnN0YW50aWF0aW9uIHdpdGggbm8gZXhwbGljaXQgbWV0aG9kIG5hbWUKICAgICAgICAgICAgICAgICMgYnV0IG5vdCBhbiAqaW5jb3JyZWN0KiBvciBtaXNzaW5nIG1ldGhvZCBuYW1lCiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJubyBzdWNoIHRlc3QgbWV0aG9kIGluICVzOiAlcyIgJQogICAgICAgICAgICAgICAgICAgICAgKHNlbGYuX19jbGFzc19fLCBtZXRob2ROYW1lKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl90ZXN0TWV0aG9kRG9jID0gdGVzdE1ldGhvZC5fX2RvY19fCiAgICAgICAgc2VsZi5fY2xlYW51cHMgPSBbXQoKICAgICAgICAjIE1hcCB0eXBlcyB0byBjdXN0b20gYXNzZXJ0RXF1YWwgZnVuY3Rpb25zIHRoYXQgd2lsbCBjb21wYXJlCiAgICAgICAgIyBpbnN0YW5jZXMgb2Ygc2FpZCB0eXBlIGluIG1vcmUgZGV0YWlsIHRvIGdlbmVyYXRlIGEgbW9yZSB1c2VmdWwKICAgICAgICAjIGVycm9yIG1lc3NhZ2UuCiAgICAgICAgc2VsZi5fdHlwZV9lcXVhbGl0eV9mdW5jcyA9IHt9CiAgICAgICAgc2VsZi5hZGRUeXBlRXF1YWxpdHlGdW5jKGRpY3QsICdhc3NlcnREaWN0RXF1YWwnKQogICAgICAgIHNlbGYuYWRkVHlwZUVxdWFsaXR5RnVuYyhsaXN0LCAnYXNzZXJ0TGlzdEVxdWFsJykKICAgICAgICBzZWxmLmFkZFR5cGVFcXVhbGl0eUZ1bmModHVwbGUsICdhc3NlcnRUdXBsZUVxdWFsJykKICAgICAgICBzZWxmLmFkZFR5cGVFcXVhbGl0eUZ1bmMoc2V0LCAnYXNzZXJ0U2V0RXF1YWwnKQogICAgICAgIHNlbGYuYWRkVHlwZUVxdWFsaXR5RnVuYyhmcm96ZW5zZXQsICdhc3NlcnRTZXRFcXVhbCcpCiAgICAgICAgc2VsZi5hZGRUeXBlRXF1YWxpdHlGdW5jKHN0ciwgJ2Fzc2VydE11bHRpTGluZUVxdWFsJykKCiAgICBkZWYgYWRkVHlwZUVxdWFsaXR5RnVuYyhzZWxmLCB0eXBlb2JqLCBmdW5jdGlvbik6CiAgICAgICAgIiIiQWRkIGEgdHlwZSBzcGVjaWZpYyBhc3NlcnRFcXVhbCBzdHlsZSBmdW5jdGlvbiB0byBjb21wYXJlIGEgdHlwZS4KCiAgICAgICAgVGhpcyBtZXRob2QgaXMgZm9yIHVzZSBieSBUZXN0Q2FzZSBzdWJjbGFzc2VzIHRoYXQgbmVlZCB0byByZWdpc3RlcgogICAgICAgIHRoZWlyIG93biB0eXBlIGVxdWFsaXR5IGZ1bmN0aW9ucyB0byBwcm92aWRlIG5pY2VyIGVycm9yIG1lc3NhZ2VzLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICB0eXBlb2JqOiBUaGUgZGF0YSB0eXBlIHRvIGNhbGwgdGhpcyBmdW5jdGlvbiBvbiB3aGVuIGJvdGggdmFsdWVzCiAgICAgICAgICAgICAgICAgICAgYXJlIG9mIHRoZSBzYW1lIHR5cGUgaW4gYXNzZXJ0RXF1YWwoKS4KICAgICAgICAgICAgZnVuY3Rpb246IFRoZSBjYWxsYWJsZSB0YWtpbmcgdHdvIGFyZ3VtZW50cyBhbmQgYW4gb3B0aW9uYWwKICAgICAgICAgICAgICAgICAgICBtc2c9IGFyZ3VtZW50IHRoYXQgcmFpc2VzIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiB3aXRoIGEKICAgICAgICAgICAgICAgICAgICB1c2VmdWwgZXJyb3IgbWVzc2FnZSB3aGVuIHRoZSB0d28gYXJndW1lbnRzIGFyZSBub3QgZXF1YWwuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fdHlwZV9lcXVhbGl0eV9mdW5jc1t0eXBlb2JqXSA9IGZ1bmN0aW9uCgogICAgZGVmIGFkZENsZWFudXAoc2VsZiwgZnVuY3Rpb24sICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgIiIiQWRkIGEgZnVuY3Rpb24sIHdpdGggYXJndW1lbnRzLCB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdGVzdCBpcwogICAgICAgIGNvbXBsZXRlZC4gRnVuY3Rpb25zIGFkZGVkIGFyZSBjYWxsZWQgb24gYSBMSUZPIGJhc2lzIGFuZCBhcmUKICAgICAgICBjYWxsZWQgYWZ0ZXIgdGVhckRvd24gb24gdGVzdCBmYWlsdXJlIG9yIHN1Y2Nlc3MuCgogICAgICAgIENsZWFudXAgaXRlbXMgYXJlIGNhbGxlZCBldmVuIGlmIHNldFVwIGZhaWxzICh1bmxpa2UgdGVhckRvd24pLiIiIgogICAgICAgIHNlbGYuX2NsZWFudXBzLmFwcGVuZCgoZnVuY3Rpb24sIGFyZ3MsIGt3YXJncykpCgogICAgZGVmIHNldFVwKHNlbGYpOgogICAgICAgICJIb29rIG1ldGhvZCBmb3Igc2V0dGluZyB1cCB0aGUgdGVzdCBmaXh0dXJlIGJlZm9yZSBleGVyY2lzaW5nIGl0LiIKICAgICAgICBwYXNzCgogICAgZGVmIHRlYXJEb3duKHNlbGYpOgogICAgICAgICJIb29rIG1ldGhvZCBmb3IgZGVjb25zdHJ1Y3RpbmcgdGhlIHRlc3QgZml4dHVyZSBhZnRlciB0ZXN0aW5nIGl0LiIKICAgICAgICBwYXNzCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgc2V0VXBDbGFzcyhjbHMpOgogICAgICAgICJIb29rIG1ldGhvZCBmb3Igc2V0dGluZyB1cCBjbGFzcyBmaXh0dXJlIGJlZm9yZSBydW5uaW5nIHRlc3RzIGluIHRoZSBjbGFzcy4iCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgdGVhckRvd25DbGFzcyhjbHMpOgogICAgICAgICJIb29rIG1ldGhvZCBmb3IgZGVjb25zdHJ1Y3RpbmcgdGhlIGNsYXNzIGZpeHR1cmUgYWZ0ZXIgcnVubmluZyBhbGwgdGVzdHMgaW4gdGhlIGNsYXNzLiIKCiAgICBkZWYgY291bnRUZXN0Q2FzZXMoc2VsZik6CiAgICAgICAgcmV0dXJuIDEKCiAgICBkZWYgZGVmYXVsdFRlc3RSZXN1bHQoc2VsZik6CiAgICAgICAgcmV0dXJuIHJlc3VsdC5UZXN0UmVzdWx0KCkKCiAgICBkZWYgc2hvcnREZXNjcmlwdGlvbihzZWxmKToKICAgICAgICAiIiJSZXR1cm5zIGEgb25lLWxpbmUgZGVzY3JpcHRpb24gb2YgdGhlIHRlc3QsIG9yIE5vbmUgaWYgbm8KICAgICAgICBkZXNjcmlwdGlvbiBoYXMgYmVlbiBwcm92aWRlZC4KCiAgICAgICAgVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgbGluZSBvZgogICAgICAgIHRoZSBzcGVjaWZpZWQgdGVzdCBtZXRob2QncyBkb2NzdHJpbmcuCiAgICAgICAgIiIiCiAgICAgICAgZG9jID0gc2VsZi5fdGVzdE1ldGhvZERvYwogICAgICAgIHJldHVybiBkb2MgYW5kIGRvYy5zcGxpdCgiXG4iKVswXS5zdHJpcCgpIG9yIE5vbmUKCgogICAgZGVmIGlkKHNlbGYpOgogICAgICAgIHJldHVybiAiJXMuJXMiICUgKHN0cmNsYXNzKHNlbGYuX19jbGFzc19fKSwgc2VsZi5fdGVzdE1ldGhvZE5hbWUpCgogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgdHlwZShzZWxmKSBpcyBub3QgdHlwZShvdGhlcik6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgICAgICByZXR1cm4gc2VsZi5fdGVzdE1ldGhvZE5hbWUgPT0gb3RoZXIuX3Rlc3RNZXRob2ROYW1lCgogICAgZGVmIF9faGFzaF9fKHNlbGYpOgogICAgICAgIHJldHVybiBoYXNoKCh0eXBlKHNlbGYpLCBzZWxmLl90ZXN0TWV0aG9kTmFtZSkpCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuICIlcyAoJXMpIiAlIChzZWxmLl90ZXN0TWV0aG9kTmFtZSwgc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIjwlcyB0ZXN0TWV0aG9kPSVzPiIgJSBcCiAgICAgICAgICAgICAgIChzdHJjbGFzcyhzZWxmLl9fY2xhc3NfXyksIHNlbGYuX3Rlc3RNZXRob2ROYW1lKQoKICAgIGRlZiBfYWRkU2tpcChzZWxmLCByZXN1bHQsIHJlYXNvbik6CiAgICAgICAgYWRkU2tpcCA9IGdldGF0dHIocmVzdWx0LCAnYWRkU2tpcCcsIE5vbmUpCiAgICAgICAgaWYgYWRkU2tpcCBpcyBub3QgTm9uZToKICAgICAgICAgICAgYWRkU2tpcChzZWxmLCByZWFzb24pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgd2FybmluZ3Mud2FybigiVGVzdFJlc3VsdCBoYXMgbm8gYWRkU2tpcCBtZXRob2QsIHNraXBzIG5vdCByZXBvcnRlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgUnVudGltZVdhcm5pbmcsIDIpCiAgICAgICAgICAgIHJlc3VsdC5hZGRTdWNjZXNzKHNlbGYpCgogICAgZGVmIF9leGVjdXRlVGVzdFBhcnQoc2VsZiwgZnVuY3Rpb24sIG91dGNvbWUsIGlzVGVzdD1GYWxzZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmdW5jdGlvbigpCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgICAgICByYWlzZQogICAgICAgIGV4Y2VwdCBTa2lwVGVzdCBhcyBlOgogICAgICAgICAgICBvdXRjb21lLnN1Y2Nlc3MgPSBGYWxzZQogICAgICAgICAgICBvdXRjb21lLnNraXBwZWQgPSBzdHIoZSkKICAgICAgICBleGNlcHQgX1VuZXhwZWN0ZWRTdWNjZXNzOgogICAgICAgICAgICBleGNfaW5mbyA9IHN5cy5leGNfaW5mbygpCiAgICAgICAgICAgIG91dGNvbWUuc3VjY2VzcyA9IEZhbHNlCiAgICAgICAgICAgIGlmIGlzVGVzdDoKICAgICAgICAgICAgICAgIG91dGNvbWUudW5leHBlY3RlZFN1Y2Nlc3MgPSBleGNfaW5mbwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgb3V0Y29tZS5lcnJvcnMuYXBwZW5kKGV4Y19pbmZvKQogICAgICAgIGV4Y2VwdCBfRXhwZWN0ZWRGYWlsdXJlOgogICAgICAgICAgICBvdXRjb21lLnN1Y2Nlc3MgPSBGYWxzZQogICAgICAgICAgICBleGNfaW5mbyA9IHN5cy5leGNfaW5mbygpCiAgICAgICAgICAgIGlmIGlzVGVzdDoKICAgICAgICAgICAgICAgIG91dGNvbWUuZXhwZWN0ZWRGYWlsdXJlID0gZXhjX2luZm8KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG91dGNvbWUuZXJyb3JzLmFwcGVuZChleGNfaW5mbykKICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uOgogICAgICAgICAgICBvdXRjb21lLnN1Y2Nlc3MgPSBGYWxzZQogICAgICAgICAgICBvdXRjb21lLmZhaWx1cmVzLmFwcGVuZChzeXMuZXhjX2luZm8oKSkKICAgICAgICAgICAgZXhjX2luZm8gPSBzeXMuZXhjX2luZm8oKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgb3V0Y29tZS5zdWNjZXNzID0gRmFsc2UKICAgICAgICAgICAgb3V0Y29tZS5lcnJvcnMuYXBwZW5kKHN5cy5leGNfaW5mbygpKQoKICAgIGRlZiBydW4oc2VsZiwgcmVzdWx0PU5vbmUpOgogICAgICAgIG9yaWdfcmVzdWx0ID0gcmVzdWx0CiAgICAgICAgaWYgcmVzdWx0IGlzIE5vbmU6CiAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYuZGVmYXVsdFRlc3RSZXN1bHQoKQogICAgICAgICAgICBzdGFydFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0YXJ0VGVzdFJ1bicsIE5vbmUpCiAgICAgICAgICAgIGlmIHN0YXJ0VGVzdFJ1biBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHN0YXJ0VGVzdFJ1bigpCgogICAgICAgIHJlc3VsdC5zdGFydFRlc3Qoc2VsZikKCiAgICAgICAgdGVzdE1ldGhvZCA9IGdldGF0dHIoc2VsZiwgc2VsZi5fdGVzdE1ldGhvZE5hbWUpCiAgICAgICAgaWYgKGdldGF0dHIoc2VsZi5fX2NsYXNzX18sICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKSBvcgogICAgICAgICAgICBnZXRhdHRyKHRlc3RNZXRob2QsICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKSk6CiAgICAgICAgICAgICMgSWYgdGhlIGNsYXNzIG9yIG1ldGhvZCB3YXMgc2tpcHBlZC4KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2tpcF93aHkgPSAoZ2V0YXR0cihzZWxmLl9fY2xhc3NfXywgJ19fdW5pdHRlc3Rfc2tpcF93aHlfXycsICcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgZ2V0YXR0cih0ZXN0TWV0aG9kLCAnX191bml0dGVzdF9za2lwX3doeV9fJywgJycpKQogICAgICAgICAgICAgICAgc2VsZi5fYWRkU2tpcChyZXN1bHQsIHNraXBfd2h5KQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgcmVzdWx0LnN0b3BUZXN0KHNlbGYpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIHRyeToKICAgICAgICAgICAgb3V0Y29tZSA9IF9PdXRjb21lKCkKICAgICAgICAgICAgc2VsZi5fb3V0Y29tZUZvckRvQ2xlYW51cHMgPSBvdXRjb21lCgogICAgICAgICAgICBzZWxmLl9leGVjdXRlVGVzdFBhcnQoc2VsZi5zZXRVcCwgb3V0Y29tZSkKICAgICAgICAgICAgaWYgb3V0Y29tZS5zdWNjZXNzOgogICAgICAgICAgICAgICAgc2VsZi5fZXhlY3V0ZVRlc3RQYXJ0KHRlc3RNZXRob2QsIG91dGNvbWUsIGlzVGVzdD1UcnVlKQogICAgICAgICAgICAgICAgc2VsZi5fZXhlY3V0ZVRlc3RQYXJ0KHNlbGYudGVhckRvd24sIG91dGNvbWUpCgogICAgICAgICAgICBzZWxmLmRvQ2xlYW51cHMoKQogICAgICAgICAgICBpZiBvdXRjb21lLnN1Y2Nlc3M6CiAgICAgICAgICAgICAgICByZXN1bHQuYWRkU3VjY2VzcyhzZWxmKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgb3V0Y29tZS5za2lwcGVkIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2FkZFNraXAocmVzdWx0LCBvdXRjb21lLnNraXBwZWQpCiAgICAgICAgICAgICAgICBmb3IgZXhjX2luZm8gaW4gb3V0Y29tZS5lcnJvcnM6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFkZEVycm9yKHNlbGYsIGV4Y19pbmZvKQogICAgICAgICAgICAgICAgZm9yIGV4Y19pbmZvIGluIG91dGNvbWUuZmFpbHVyZXM6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFkZEZhaWx1cmUoc2VsZiwgZXhjX2luZm8pCiAgICAgICAgICAgICAgICBpZiBvdXRjb21lLnVuZXhwZWN0ZWRTdWNjZXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIGFkZFVuZXhwZWN0ZWRTdWNjZXNzID0gZ2V0YXR0cihyZXN1bHQsICdhZGRVbmV4cGVjdGVkU3VjY2VzcycsIE5vbmUpCiAgICAgICAgICAgICAgICAgICAgaWYgYWRkVW5leHBlY3RlZFN1Y2Nlc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFVuZXhwZWN0ZWRTdWNjZXNzKHNlbGYpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybigiVGVzdFJlc3VsdCBoYXMgbm8gYWRkVW5leHBlY3RlZFN1Y2Nlc3MgbWV0aG9kLCByZXBvcnRpbmcgYXMgZmFpbHVyZXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJ1bnRpbWVXYXJuaW5nKQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYWRkRmFpbHVyZShzZWxmLCBvdXRjb21lLnVuZXhwZWN0ZWRTdWNjZXNzKQoKICAgICAgICAgICAgICAgIGlmIG91dGNvbWUuZXhwZWN0ZWRGYWlsdXJlIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIGFkZEV4cGVjdGVkRmFpbHVyZSA9IGdldGF0dHIocmVzdWx0LCAnYWRkRXhwZWN0ZWRGYWlsdXJlJywgTm9uZSkKICAgICAgICAgICAgICAgICAgICBpZiBhZGRFeHBlY3RlZEZhaWx1cmUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV4cGVjdGVkRmFpbHVyZShzZWxmLCBvdXRjb21lLmV4cGVjdGVkRmFpbHVyZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJUZXN0UmVzdWx0IGhhcyBubyBhZGRFeHBlY3RlZEZhaWx1cmUgbWV0aG9kLCByZXBvcnRpbmcgYXMgcGFzc2VzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSdW50aW1lV2FybmluZykKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFkZFN1Y2Nlc3Moc2VsZikKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHJlc3VsdC5zdG9wVGVzdChzZWxmKQogICAgICAgICAgICBpZiBvcmlnX3Jlc3VsdCBpcyBOb25lOgogICAgICAgICAgICAgICAgc3RvcFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0b3BUZXN0UnVuJywgTm9uZSkKICAgICAgICAgICAgICAgIGlmIHN0b3BUZXN0UnVuIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHN0b3BUZXN0UnVuKCkKCiAgICBkZWYgZG9DbGVhbnVwcyhzZWxmKToKICAgICAgICAiIiJFeGVjdXRlIGFsbCBjbGVhbnVwIGZ1bmN0aW9ucy4gTm9ybWFsbHkgY2FsbGVkIGZvciB5b3UgYWZ0ZXIKICAgICAgICB0ZWFyRG93bi4iIiIKICAgICAgICBvdXRjb21lID0gc2VsZi5fb3V0Y29tZUZvckRvQ2xlYW51cHMgb3IgX091dGNvbWUoKQogICAgICAgIHdoaWxlIHNlbGYuX2NsZWFudXBzOgogICAgICAgICAgICBmdW5jdGlvbiwgYXJncywga3dhcmdzID0gc2VsZi5fY2xlYW51cHMucG9wKCkKICAgICAgICAgICAgcGFydCA9IGxhbWJkYTogZnVuY3Rpb24oKmFyZ3MsICoqa3dhcmdzKQogICAgICAgICAgICBzZWxmLl9leGVjdXRlVGVzdFBhcnQocGFydCwgb3V0Y29tZSkKCiAgICAgICAgIyByZXR1cm4gdGhpcyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkKICAgICAgICAjIGV2ZW4gdGhvdWdoIHdlIG5vIGxvbmdlciB1cyBpdCBpbnRlcm5hbGx5CiAgICAgICAgcmV0dXJuIG91dGNvbWUuc3VjY2VzcwoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCAqYXJncywgKiprd2RzKToKICAgICAgICByZXR1cm4gc2VsZi5ydW4oKmFyZ3MsICoqa3dkcykKCiAgICBkZWYgZGVidWcoc2VsZik6CiAgICAgICAgIiIiUnVuIHRoZSB0ZXN0IHdpdGhvdXQgY29sbGVjdGluZyBlcnJvcnMgaW4gYSBUZXN0UmVzdWx0IiIiCiAgICAgICAgc2VsZi5zZXRVcCgpCiAgICAgICAgZ2V0YXR0cihzZWxmLCBzZWxmLl90ZXN0TWV0aG9kTmFtZSkoKQogICAgICAgIHNlbGYudGVhckRvd24oKQogICAgICAgIHdoaWxlIHNlbGYuX2NsZWFudXBzOgogICAgICAgICAgICBmdW5jdGlvbiwgYXJncywga3dhcmdzID0gc2VsZi5fY2xlYW51cHMucG9wKC0xKQogICAgICAgICAgICBmdW5jdGlvbigqYXJncywgKiprd2FyZ3MpCgogICAgZGVmIHNraXBUZXN0KHNlbGYsIHJlYXNvbik6CiAgICAgICAgIiIiU2tpcCB0aGlzIHRlc3QuIiIiCiAgICAgICAgcmFpc2UgU2tpcFRlc3QocmVhc29uKQoKICAgIGRlZiBmYWlsKHNlbGYsIG1zZz1Ob25lKToKICAgICAgICAiIiJGYWlsIGltbWVkaWF0ZWx5LCB3aXRoIHRoZSBnaXZlbiBtZXNzYWdlLiIiIgogICAgICAgIHJhaXNlIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbihtc2cpCgogICAgZGVmIGFzc2VydEZhbHNlKHNlbGYsIGV4cHIsIG1zZz1Ob25lKToKICAgICAgICAiIiJDaGVjayB0aGF0IHRoZSBleHByZXNzaW9uIGlzIGZhbHNlLiIiIgogICAgICAgIGlmIGV4cHI6CiAgICAgICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCAiJXMgaXMgbm90IGZhbHNlIiAlIHNhZmVfcmVwcihleHByKSkKICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgYXNzZXJ0VHJ1ZShzZWxmLCBleHByLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiQ2hlY2sgdGhhdCB0aGUgZXhwcmVzc2lvbiBpcyB0cnVlLiIiIgogICAgICAgIGlmIG5vdCBleHByOgogICAgICAgICAgICBtc2cgPSBzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgIiVzIGlzIG5vdCB0cnVlIiAlIHNhZmVfcmVwcihleHByKSkKICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgX2Zvcm1hdE1lc3NhZ2Uoc2VsZiwgbXNnLCBzdGFuZGFyZE1zZyk6CiAgICAgICAgIiIiSG9ub3VyIHRoZSBsb25nTWVzc2FnZSBhdHRyaWJ1dGUgd2hlbiBnZW5lcmF0aW5nIGZhaWx1cmUgbWVzc2FnZXMuCiAgICAgICAgSWYgbG9uZ01lc3NhZ2UgaXMgRmFsc2UgdGhpcyBtZWFuczoKICAgICAgICAqIFVzZSBvbmx5IGFuIGV4cGxpY2l0IG1lc3NhZ2UgaWYgaXQgaXMgcHJvdmlkZWQKICAgICAgICAqIE90aGVyd2lzZSB1c2UgdGhlIHN0YW5kYXJkIG1lc3NhZ2UgZm9yIHRoZSBhc3NlcnQKCiAgICAgICAgSWYgbG9uZ01lc3NhZ2UgaXMgVHJ1ZToKICAgICAgICAqIFVzZSB0aGUgc3RhbmRhcmQgbWVzc2FnZQogICAgICAgICogSWYgYW4gZXhwbGljaXQgbWVzc2FnZSBpcyBwcm92aWRlZCwgcGx1cyAnIDogJyBhbmQgdGhlIGV4cGxpY2l0IG1lc3NhZ2UKICAgICAgICAiIiIKICAgICAgICBpZiBub3Qgc2VsZi5sb25nTWVzc2FnZToKICAgICAgICAgICAgcmV0dXJuIG1zZyBvciBzdGFuZGFyZE1zZwogICAgICAgIGlmIG1zZyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRNc2cKICAgICAgICB0cnk6CiAgICAgICAgICAgICMgZG9uJ3Qgc3dpdGNoIHRvICd7fScgZm9ybWF0dGluZyBpbiBQeXRob24gMi5YCiAgICAgICAgICAgICMgaXQgY2hhbmdlcyB0aGUgd2F5IHVuaWNvZGUgaW5wdXQgaXMgaGFuZGxlZAogICAgICAgICAgICByZXR1cm4gJyVzIDogJXMnICUgKHN0YW5kYXJkTXNnLCBtc2cpCiAgICAgICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvcjoKICAgICAgICAgICAgcmV0dXJuICAnJXMgOiAlcycgJSAoc2FmZV9yZXByKHN0YW5kYXJkTXNnKSwgc2FmZV9yZXByKG1zZykpCgogICAgZGVmIGFzc2VydFJhaXNlcyhzZWxmLCBleGNDbGFzcywgY2FsbGFibGVPYmo9Tm9uZSwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAiIiJGYWlsIHVubGVzcyBhbiBleGNlcHRpb24gb2YgY2xhc3MgZXhjQ2xhc3MgaXMgdGhyb3duCiAgICAgICAgICAgYnkgY2FsbGFibGVPYmogd2hlbiBpbnZva2VkIHdpdGggYXJndW1lbnRzIGFyZ3MgYW5kIGtleXdvcmQKICAgICAgICAgICBhcmd1bWVudHMga3dhcmdzLiBJZiBhIGRpZmZlcmVudCB0eXBlIG9mIGV4Y2VwdGlvbiBpcwogICAgICAgICAgIHRocm93biwgaXQgd2lsbCBub3QgYmUgY2F1Z2h0LCBhbmQgdGhlIHRlc3QgY2FzZSB3aWxsIGJlCiAgICAgICAgICAgZGVlbWVkIHRvIGhhdmUgc3VmZmVyZWQgYW4gZXJyb3IsIGV4YWN0bHkgYXMgZm9yIGFuCiAgICAgICAgICAgdW5leHBlY3RlZCBleGNlcHRpb24uCgogICAgICAgICAgIElmIGNhbGxlZCB3aXRoIGNhbGxhYmxlT2JqIG9taXR0ZWQgb3IgTm9uZSwgd2lsbCByZXR1cm4gYQogICAgICAgICAgIGNvbnRleHQgb2JqZWN0IHVzZWQgbGlrZSB0aGlzOjoKCiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKFNvbWVFeGNlcHRpb24pOgogICAgICAgICAgICAgICAgICAgIGRvX3NvbWV0aGluZygpCgogICAgICAgICAgIEFuIG9wdGlvbmFsIGtleXdvcmQgYXJndW1lbnQgJ21zZycgY2FuIGJlIHByb3ZpZGVkIHdoZW4gYXNzZXJ0UmFpc2VzCiAgICAgICAgICAgaXMgdXNlZCBhcyBhIGNvbnRleHQgb2JqZWN0LgoKICAgICAgICAgICBUaGUgY29udGV4dCBtYW5hZ2VyIGtlZXBzIGEgcmVmZXJlbmNlIHRvIHRoZSBleGNlcHRpb24gYXMKICAgICAgICAgICB0aGUgJ2V4Y2VwdGlvbicgYXR0cmlidXRlLiBUaGlzIGFsbG93cyB5b3UgdG8gaW5zcGVjdCB0aGUKICAgICAgICAgICBleGNlcHRpb24gYWZ0ZXIgdGhlIGFzc2VydGlvbjo6CgogICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKFNvbWVFeGNlcHRpb24pIGFzIGNtOgogICAgICAgICAgICAgICAgICAgZG9fc29tZXRoaW5nKCkKICAgICAgICAgICAgICAgdGhlX2V4Y2VwdGlvbiA9IGNtLmV4Y2VwdGlvbgogICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRoZV9leGNlcHRpb24uZXJyb3JfY29kZSwgMykKICAgICAgICAiIiIKICAgICAgICBjb250ZXh0ID0gX0Fzc2VydFJhaXNlc0NvbnRleHQoZXhjQ2xhc3MsIHNlbGYsIGNhbGxhYmxlT2JqKQogICAgICAgIHJldHVybiBjb250ZXh0LmhhbmRsZSgnYXNzZXJ0UmFpc2VzJywgY2FsbGFibGVPYmosIGFyZ3MsIGt3YXJncykKCiAgICBkZWYgYXNzZXJ0V2FybnMoc2VsZiwgZXhwZWN0ZWRfd2FybmluZywgY2FsbGFibGVfb2JqPU5vbmUsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgIiIiRmFpbCB1bmxlc3MgYSB3YXJuaW5nIG9mIGNsYXNzIHdhcm5DbGFzcyBpcyB0cmlnZ2VyZWQKICAgICAgICAgICBieSBjYWxsYWJsZV9vYmogd2hlbiBpbnZva2VkIHdpdGggYXJndW1lbnRzIGFyZ3MgYW5kIGtleXdvcmQKICAgICAgICAgICBhcmd1bWVudHMga3dhcmdzLiAgSWYgYSBkaWZmZXJlbnQgdHlwZSBvZiB3YXJuaW5nIGlzCiAgICAgICAgICAgdHJpZ2dlcmVkLCBpdCB3aWxsIG5vdCBiZSBoYW5kbGVkOiBkZXBlbmRpbmcgb24gdGhlIG90aGVyCiAgICAgICAgICAgd2FybmluZyBmaWx0ZXJpbmcgcnVsZXMgaW4gZWZmZWN0LCBpdCBtaWdodCBiZSBzaWxlbmNlZCwgcHJpbnRlZAogICAgICAgICAgIG91dCwgb3IgcmFpc2VkIGFzIGFuIGV4Y2VwdGlvbi4KCiAgICAgICAgICAgSWYgY2FsbGVkIHdpdGggY2FsbGFibGVfb2JqIG9taXR0ZWQgb3IgTm9uZSwgd2lsbCByZXR1cm4gYQogICAgICAgICAgIGNvbnRleHQgb2JqZWN0IHVzZWQgbGlrZSB0aGlzOjoKCiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnMoU29tZVdhcm5pbmcpOgogICAgICAgICAgICAgICAgICAgIGRvX3NvbWV0aGluZygpCgogICAgICAgICAgIEFuIG9wdGlvbmFsIGtleXdvcmQgYXJndW1lbnQgJ21zZycgY2FuIGJlIHByb3ZpZGVkIHdoZW4gYXNzZXJ0V2FybnMKICAgICAgICAgICBpcyB1c2VkIGFzIGEgY29udGV4dCBvYmplY3QuCgogICAgICAgICAgIFRoZSBjb250ZXh0IG1hbmFnZXIga2VlcHMgYSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IG1hdGNoaW5nCiAgICAgICAgICAgd2FybmluZyBhcyB0aGUgJ3dhcm5pbmcnIGF0dHJpYnV0ZTsgc2ltaWxhcmx5LCB0aGUgJ2ZpbGVuYW1lJwogICAgICAgICAgIGFuZCAnbGluZW5vJyBhdHRyaWJ1dGVzIGdpdmUgeW91IGluZm9ybWF0aW9uIGFib3V0IHRoZSBsaW5lCiAgICAgICAgICAgb2YgUHl0aG9uIGNvZGUgZnJvbSB3aGljaCB0aGUgd2FybmluZyB3YXMgdHJpZ2dlcmVkLgogICAgICAgICAgIFRoaXMgYWxsb3dzIHlvdSB0byBpbnNwZWN0IHRoZSB3YXJuaW5nIGFmdGVyIHRoZSBhc3NlcnRpb246OgoKICAgICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKFNvbWVXYXJuaW5nKSBhcyBjbToKICAgICAgICAgICAgICAgICAgIGRvX3NvbWV0aGluZygpCiAgICAgICAgICAgICAgIHRoZV93YXJuaW5nID0gY20ud2FybmluZwogICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRoZV93YXJuaW5nLnNvbWVfYXR0cmlidXRlLCAxNDcpCiAgICAgICAgIiIiCiAgICAgICAgY29udGV4dCA9IF9Bc3NlcnRXYXJuc0NvbnRleHQoZXhwZWN0ZWRfd2FybmluZywgc2VsZiwgY2FsbGFibGVfb2JqKQogICAgICAgIHJldHVybiBjb250ZXh0LmhhbmRsZSgnYXNzZXJ0V2FybnMnLCBjYWxsYWJsZV9vYmosIGFyZ3MsIGt3YXJncykKCiAgICBkZWYgX2dldEFzc2VydEVxdWFsaXR5RnVuYyhzZWxmLCBmaXJzdCwgc2Vjb25kKToKICAgICAgICAiIiJHZXQgYSBkZXRhaWxlZCBjb21wYXJpc29uIGZ1bmN0aW9uIGZvciB0aGUgdHlwZXMgb2YgdGhlIHR3byBhcmdzLgoKICAgICAgICBSZXR1cm5zOiBBIGNhbGxhYmxlIGFjY2VwdGluZyAoZmlyc3QsIHNlY29uZCwgbXNnPU5vbmUpIHRoYXQgd2lsbAogICAgICAgIHJhaXNlIGEgZmFpbHVyZSBleGNlcHRpb24gaWYgZmlyc3QgIT0gc2Vjb25kIHdpdGggYSB1c2VmdWwgaHVtYW4KICAgICAgICByZWFkYWJsZSBlcnJvciBtZXNzYWdlIGZvciB0aG9zZSB0eXBlcy4KICAgICAgICAiIiIKICAgICAgICAjCiAgICAgICAgIyBOT1RFKGdyZWdvcnkucC5zbWl0aCk6IEkgY29uc2lkZXJlZCBpc2luc3RhbmNlKGZpcnN0LCB0eXBlKHNlY29uZCkpCiAgICAgICAgIyBhbmQgdmljZSB2ZXJzYS4gIEkgb3B0ZWQgZm9yIHRoZSBjb25zZXJ2YXRpdmUgYXBwcm9hY2ggaW4gY2FzZQogICAgICAgICMgc3ViY2xhc3NlcyBhcmUgbm90IGludGVuZGVkIHRvIGJlIGNvbXBhcmVkIGluIGRldGFpbCB0byB0aGVpciBzdXBlcgogICAgICAgICMgY2xhc3MgaW5zdGFuY2VzIHVzaW5nIGEgdHlwZSBlcXVhbGl0eSBmdW5jLiAgVGhpcyBtZWFucyB0ZXN0aW5nCiAgICAgICAgIyBzdWJ0eXBlcyB3b24ndCBhdXRvbWFnaWNhbGx5IHVzZSB0aGUgZGV0YWlsZWQgY29tcGFyaXNvbi4gIENhbGxlcnMKICAgICAgICAjIHNob3VsZCB1c2UgdGhlaXIgdHlwZSBzcGVjaWZpYyBhc3NlcnRTcGFtRXF1YWwgbWV0aG9kIHRvIGNvbXBhcmUKICAgICAgICAjIHN1YmNsYXNzZXMgaWYgdGhlIGRldGFpbGVkIGNvbXBhcmlzb24gaXMgZGVzaXJlZCBhbmQgYXBwcm9wcmlhdGUuCiAgICAgICAgIyBTZWUgdGhlIGRpc2N1c3Npb24gaW4gaHR0cDovL2J1Z3MucHl0aG9uLm9yZy9pc3N1ZTI1NzguCiAgICAgICAgIwogICAgICAgIGlmIHR5cGUoZmlyc3QpIGlzIHR5cGUoc2Vjb25kKToKICAgICAgICAgICAgYXNzZXJ0ZXIgPSBzZWxmLl90eXBlX2VxdWFsaXR5X2Z1bmNzLmdldCh0eXBlKGZpcnN0KSkKICAgICAgICAgICAgaWYgYXNzZXJ0ZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGFzc2VydGVyLCBzdHIpOgogICAgICAgICAgICAgICAgICAgIGFzc2VydGVyID0gZ2V0YXR0cihzZWxmLCBhc3NlcnRlcikKICAgICAgICAgICAgICAgIHJldHVybiBhc3NlcnRlcgoKICAgICAgICByZXR1cm4gc2VsZi5fYmFzZUFzc2VydEVxdWFsCgogICAgZGVmIF9iYXNlQXNzZXJ0RXF1YWwoc2VsZiwgZmlyc3QsIHNlY29uZCwgbXNnPU5vbmUpOgogICAgICAgICIiIlRoZSBkZWZhdWx0IGFzc2VydEVxdWFsIGltcGxlbWVudGF0aW9uLCBub3QgdHlwZSBzcGVjaWZpYy4iIiIKICAgICAgICBpZiBub3QgZmlyc3QgPT0gc2Vjb25kOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyAhPSAlcycgJSAoc2FmZV9yZXByKGZpcnN0KSwgc2FmZV9yZXByKHNlY29uZCkpCiAgICAgICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykKICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgYXNzZXJ0RXF1YWwoc2VsZiwgZmlyc3QsIHNlY29uZCwgbXNnPU5vbmUpOgogICAgICAgICIiIkZhaWwgaWYgdGhlIHR3byBvYmplY3RzIGFyZSB1bmVxdWFsIGFzIGRldGVybWluZWQgYnkgdGhlICc9PScKICAgICAgICAgICBvcGVyYXRvci4KICAgICAgICAiIiIKICAgICAgICBhc3NlcnRpb25fZnVuYyA9IHNlbGYuX2dldEFzc2VydEVxdWFsaXR5RnVuYyhmaXJzdCwgc2Vjb25kKQogICAgICAgIGFzc2VydGlvbl9mdW5jKGZpcnN0LCBzZWNvbmQsIG1zZz1tc2cpCgogICAgZGVmIGFzc2VydE5vdEVxdWFsKHNlbGYsIGZpcnN0LCBzZWNvbmQsIG1zZz1Ob25lKToKICAgICAgICAiIiJGYWlsIGlmIHRoZSB0d28gb2JqZWN0cyBhcmUgZXF1YWwgYXMgZGV0ZXJtaW5lZCBieSB0aGUgJz09JwogICAgICAgICAgIG9wZXJhdG9yLgogICAgICAgICIiIgogICAgICAgIGlmIG5vdCBmaXJzdCAhPSBzZWNvbmQ6CiAgICAgICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCAnJXMgPT0gJXMnICUgKHNhZmVfcmVwcihmaXJzdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoc2Vjb25kKSkpCiAgICAgICAgICAgIHJhaXNlIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbihtc2cpCgogICAgZGVmIGFzc2VydEFsbW9zdEVxdWFsKHNlbGYsIGZpcnN0LCBzZWNvbmQsIHBsYWNlcz1Ob25lLCBtc2c9Tm9uZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YT1Ob25lKToKICAgICAgICAiIiJGYWlsIGlmIHRoZSB0d28gb2JqZWN0cyBhcmUgdW5lcXVhbCBhcyBkZXRlcm1pbmVkIGJ5IHRoZWlyCiAgICAgICAgICAgZGlmZmVyZW5jZSByb3VuZGVkIHRvIHRoZSBnaXZlbiBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMKICAgICAgICAgICAoZGVmYXVsdCA3KSBhbmQgY29tcGFyaW5nIHRvIHplcm8sIG9yIGJ5IGNvbXBhcmluZyB0aGF0IHRoZQogICAgICAgICAgIGJldHdlZW4gdGhlIHR3byBvYmplY3RzIGlzIG1vcmUgdGhhbiB0aGUgZ2l2ZW4gZGVsdGEuCgogICAgICAgICAgIE5vdGUgdGhhdCBkZWNpbWFsIHBsYWNlcyAoZnJvbSB6ZXJvKSBhcmUgdXN1YWxseSBub3QgdGhlIHNhbWUKICAgICAgICAgICBhcyBzaWduaWZpY2FudCBkaWdpdHMgKG1lYXN1cmVkIGZyb20gdGhlIG1vc3Qgc2lnbmZpY2FudCBkaWdpdCkuCgogICAgICAgICAgIElmIHRoZSB0d28gb2JqZWN0cyBjb21wYXJlIGVxdWFsIHRoZW4gdGhleSB3aWxsIGF1dG9tYXRpY2FsbHkKICAgICAgICAgICBjb21wYXJlIGFsbW9zdCBlcXVhbC4KICAgICAgICAiIiIKICAgICAgICBpZiBmaXJzdCA9PSBzZWNvbmQ6CiAgICAgICAgICAgICMgc2hvcnRjdXQKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgZGVsdGEgaXMgbm90IE5vbmUgYW5kIHBsYWNlcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJzcGVjaWZ5IGRlbHRhIG9yIHBsYWNlcyBub3QgYm90aCIpCgogICAgICAgIGlmIGRlbHRhIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBhYnMoZmlyc3QgLSBzZWNvbmQpIDw9IGRlbHRhOgogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyAhPSAlcyB3aXRoaW4gJXMgZGVsdGEnICUgKHNhZmVfcmVwcihmaXJzdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKHNlY29uZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKGRlbHRhKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBwbGFjZXMgaXMgTm9uZToKICAgICAgICAgICAgICAgIHBsYWNlcyA9IDcKCiAgICAgICAgICAgIGlmIHJvdW5kKGFicyhzZWNvbmQtZmlyc3QpLCBwbGFjZXMpID09IDA6CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzICE9ICVzIHdpdGhpbiAlciBwbGFjZXMnICUgKHNhZmVfcmVwcihmaXJzdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoc2Vjb25kKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlcykKICAgICAgICBtc2cgPSBzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpCiAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgYXNzZXJ0Tm90QWxtb3N0RXF1YWwoc2VsZiwgZmlyc3QsIHNlY29uZCwgcGxhY2VzPU5vbmUsIG1zZz1Ob25lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhPU5vbmUpOgogICAgICAgICIiIkZhaWwgaWYgdGhlIHR3byBvYmplY3RzIGFyZSBlcXVhbCBhcyBkZXRlcm1pbmVkIGJ5IHRoZWlyCiAgICAgICAgICAgZGlmZmVyZW5jZSByb3VuZGVkIHRvIHRoZSBnaXZlbiBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMKICAgICAgICAgICAoZGVmYXVsdCA3KSBhbmQgY29tcGFyaW5nIHRvIHplcm8sIG9yIGJ5IGNvbXBhcmluZyB0aGF0IHRoZQogICAgICAgICAgIGJldHdlZW4gdGhlIHR3byBvYmplY3RzIGlzIGxlc3MgdGhhbiB0aGUgZ2l2ZW4gZGVsdGEuCgogICAgICAgICAgIE5vdGUgdGhhdCBkZWNpbWFsIHBsYWNlcyAoZnJvbSB6ZXJvKSBhcmUgdXN1YWxseSBub3QgdGhlIHNhbWUKICAgICAgICAgICBhcyBzaWduaWZpY2FudCBkaWdpdHMgKG1lYXN1cmVkIGZyb20gdGhlIG1vc3Qgc2lnbmZpY2FudCBkaWdpdCkuCgogICAgICAgICAgIE9iamVjdHMgdGhhdCBhcmUgZXF1YWwgYXV0b21hdGljYWxseSBmYWlsLgogICAgICAgICIiIgogICAgICAgIGlmIGRlbHRhIGlzIG5vdCBOb25lIGFuZCBwbGFjZXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigic3BlY2lmeSBkZWx0YSBvciBwbGFjZXMgbm90IGJvdGgiKQogICAgICAgIGlmIGRlbHRhIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBub3QgKGZpcnN0ID09IHNlY29uZCkgYW5kIGFicyhmaXJzdCAtIHNlY29uZCkgPiBkZWx0YToKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyA9PSAlcyB3aXRoaW4gJXMgZGVsdGEnICUgKHNhZmVfcmVwcihmaXJzdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKHNlY29uZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKGRlbHRhKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBwbGFjZXMgaXMgTm9uZToKICAgICAgICAgICAgICAgIHBsYWNlcyA9IDcKICAgICAgICAgICAgaWYgbm90IChmaXJzdCA9PSBzZWNvbmQpIGFuZCByb3VuZChhYnMoc2Vjb25kLWZpcnN0KSwgcGxhY2VzKSAhPSAwOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzID09ICVzIHdpdGhpbiAlciBwbGFjZXMnICUgKHNhZmVfcmVwcihmaXJzdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfcmVwcihzZWNvbmQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZXMpCgogICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykKICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKCiAgICBkZWYgYXNzZXJ0U2VxdWVuY2VFcXVhbChzZWxmLCBzZXExLCBzZXEyLCBtc2c9Tm9uZSwgc2VxX3R5cGU9Tm9uZSk6CiAgICAgICAgIiIiQW4gZXF1YWxpdHkgYXNzZXJ0aW9uIGZvciBvcmRlcmVkIHNlcXVlbmNlcyAobGlrZSBsaXN0cyBhbmQgdHVwbGVzKS4KCiAgICAgICAgRm9yIHRoZSBwdXJwb3NlcyBvZiB0aGlzIGZ1bmN0aW9uLCBhIHZhbGlkIG9yZGVyZWQgc2VxdWVuY2UgdHlwZSBpcyBvbmUKICAgICAgICB3aGljaCBjYW4gYmUgaW5kZXhlZCwgaGFzIGEgbGVuZ3RoLCBhbmQgaGFzIGFuIGVxdWFsaXR5IG9wZXJhdG9yLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBzZXExOiBUaGUgZmlyc3Qgc2VxdWVuY2UgdG8gY29tcGFyZS4KICAgICAgICAgICAgc2VxMjogVGhlIHNlY29uZCBzZXF1ZW5jZSB0byBjb21wYXJlLgogICAgICAgICAgICBzZXFfdHlwZTogVGhlIGV4cGVjdGVkIGRhdGF0eXBlIG9mIHRoZSBzZXF1ZW5jZXMsIG9yIE5vbmUgaWYgbm8KICAgICAgICAgICAgICAgICAgICBkYXRhdHlwZSBzaG91bGQgYmUgZW5mb3JjZWQuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB0byB1c2Ugb24gZmFpbHVyZSBpbnN0ZWFkIG9mIGEgbGlzdCBvZgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLgogICAgICAgICIiIgogICAgICAgIGlmIHNlcV90eXBlICE9IE5vbmU6CiAgICAgICAgICAgIHNlcV90eXBlX25hbWUgPSBzZXFfdHlwZS5fX25hbWVfXwogICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShzZXExLCBzZXFfdHlwZSk6CiAgICAgICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24oJ0ZpcnN0IHNlcXVlbmNlIGlzIG5vdCBhICVzOiAlcycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICUgKHNlcV90eXBlX25hbWUsIHNhZmVfcmVwcihzZXExKSkpCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHNlcTIsIHNlcV90eXBlKToKICAgICAgICAgICAgICAgIHJhaXNlIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbignU2Vjb25kIHNlcXVlbmNlIGlzIG5vdCBhICVzOiAlcycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICUgKHNlcV90eXBlX25hbWUsIHNhZmVfcmVwcihzZXEyKSkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VxX3R5cGVfbmFtZSA9ICJzZXF1ZW5jZSIKCiAgICAgICAgZGlmZmVyaW5nID0gTm9uZQogICAgICAgIHRyeToKICAgICAgICAgICAgbGVuMSA9IGxlbihzZXExKQogICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yKToKICAgICAgICAgICAgZGlmZmVyaW5nID0gJ0ZpcnN0ICVzIGhhcyBubyBsZW5ndGguICAgIE5vbi1zZXF1ZW5jZT8nICUgKAogICAgICAgICAgICAgICAgICAgIHNlcV90eXBlX25hbWUpCgogICAgICAgIGlmIGRpZmZlcmluZyBpcyBOb25lOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBsZW4yID0gbGVuKHNlcTIpCiAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yKToKICAgICAgICAgICAgICAgIGRpZmZlcmluZyA9ICdTZWNvbmQgJXMgaGFzIG5vIGxlbmd0aC4gICAgTm9uLXNlcXVlbmNlPycgJSAoCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcV90eXBlX25hbWUpCgogICAgICAgIGlmIGRpZmZlcmluZyBpcyBOb25lOgogICAgICAgICAgICBpZiBzZXExID09IHNlcTI6CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIHNlcTFfcmVwciA9IHNhZmVfcmVwcihzZXExKQogICAgICAgICAgICBzZXEyX3JlcHIgPSBzYWZlX3JlcHIoc2VxMikKICAgICAgICAgICAgaWYgbGVuKHNlcTFfcmVwcikgPiAzMDoKICAgICAgICAgICAgICAgIHNlcTFfcmVwciA9IHNlcTFfcmVwcls6MzBdICsgJy4uLicKICAgICAgICAgICAgaWYgbGVuKHNlcTJfcmVwcikgPiAzMDoKICAgICAgICAgICAgICAgIHNlcTJfcmVwciA9IHNlcTJfcmVwcls6MzBdICsgJy4uLicKICAgICAgICAgICAgZWxlbWVudHMgPSAoc2VxX3R5cGVfbmFtZS5jYXBpdGFsaXplKCksIHNlcTFfcmVwciwgc2VxMl9yZXByKQogICAgICAgICAgICBkaWZmZXJpbmcgPSAnJXNzIGRpZmZlcjogJXMgIT0gJXNcbicgJSBlbGVtZW50cwoKICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobWluKGxlbjEsIGxlbjIpKToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBpdGVtMSA9IHNlcTFbaV0KICAgICAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBJbmRleEVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yKToKICAgICAgICAgICAgICAgICAgICBkaWZmZXJpbmcgKz0gKCdcblVuYWJsZSB0byBpbmRleCBlbGVtZW50ICVkIG9mIGZpcnN0ICVzXG4nICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGksIHNlcV90eXBlX25hbWUpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGl0ZW0yID0gc2VxMltpXQogICAgICAgICAgICAgICAgZXhjZXB0IChUeXBlRXJyb3IsIEluZGV4RXJyb3IsIE5vdEltcGxlbWVudGVkRXJyb3IpOgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmluZyArPSAoJ1xuVW5hYmxlIHRvIGluZGV4IGVsZW1lbnQgJWQgb2Ygc2Vjb25kICVzXG4nICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGksIHNlcV90eXBlX25hbWUpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgaWYgaXRlbTEgIT0gaXRlbTI6CiAgICAgICAgICAgICAgICAgICAgZGlmZmVyaW5nICs9ICgnXG5GaXJzdCBkaWZmZXJpbmcgZWxlbWVudCAlZDpcbiVzXG4lc1xuJyAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpLCBpdGVtMSwgaXRlbTIpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiAobGVuMSA9PSBsZW4yIGFuZCBzZXFfdHlwZSBpcyBOb25lIGFuZAogICAgICAgICAgICAgICAgICAgIHR5cGUoc2VxMSkgIT0gdHlwZShzZXEyKSk6CiAgICAgICAgICAgICAgICAgICAgIyBUaGUgc2VxdWVuY2VzIGFyZSB0aGUgc2FtZSwgYnV0IGhhdmUgZGlmZmVyaW5nIHR5cGVzLgogICAgICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgaWYgbGVuMSA+IGxlbjI6CiAgICAgICAgICAgICAgICBkaWZmZXJpbmcgKz0gKCdcbkZpcnN0ICVzIGNvbnRhaW5zICVkIGFkZGl0aW9uYWwgJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlbGVtZW50cy5cbicgJSAoc2VxX3R5cGVfbmFtZSwgbGVuMSAtIGxlbjIpKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmluZyArPSAoJ0ZpcnN0IGV4dHJhIGVsZW1lbnQgJWQ6XG4lc1xuJyAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobGVuMiwgc2VxMVtsZW4yXSkpCiAgICAgICAgICAgICAgICBleGNlcHQgKFR5cGVFcnJvciwgSW5kZXhFcnJvciwgTm90SW1wbGVtZW50ZWRFcnJvcik6CiAgICAgICAgICAgICAgICAgICAgZGlmZmVyaW5nICs9ICgnVW5hYmxlIHRvIGluZGV4IGVsZW1lbnQgJWQgJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29mIGZpcnN0ICVzXG4nICUgKGxlbjIsIHNlcV90eXBlX25hbWUpKQogICAgICAgICAgICBlbGlmIGxlbjEgPCBsZW4yOgogICAgICAgICAgICAgICAgZGlmZmVyaW5nICs9ICgnXG5TZWNvbmQgJXMgY29udGFpbnMgJWQgYWRkaXRpb25hbCAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VsZW1lbnRzLlxuJyAlIChzZXFfdHlwZV9uYW1lLCBsZW4yIC0gbGVuMSkpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgZGlmZmVyaW5nICs9ICgnRmlyc3QgZXh0cmEgZWxlbWVudCAlZDpcbiVzXG4nICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsZW4xLCBzZXEyW2xlbjFdKSkKICAgICAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBJbmRleEVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yKToKICAgICAgICAgICAgICAgICAgICBkaWZmZXJpbmcgKz0gKCdVbmFibGUgdG8gaW5kZXggZWxlbWVudCAlZCAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb2Ygc2Vjb25kICVzXG4nICUgKGxlbjEsIHNlcV90eXBlX25hbWUpKQogICAgICAgIHN0YW5kYXJkTXNnID0gZGlmZmVyaW5nCiAgICAgICAgZGlmZk1zZyA9ICdcbicgKyAnXG4nLmpvaW4oCiAgICAgICAgICAgIGRpZmZsaWIubmRpZmYocHByaW50LnBmb3JtYXQoc2VxMSkuc3BsaXRsaW5lcygpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBwcmludC5wZm9ybWF0KHNlcTIpLnNwbGl0bGluZXMoKSkpCgogICAgICAgIHN0YW5kYXJkTXNnID0gc2VsZi5fdHJ1bmNhdGVNZXNzYWdlKHN0YW5kYXJkTXNnLCBkaWZmTXNnKQogICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykKICAgICAgICBzZWxmLmZhaWwobXNnKQoKICAgIGRlZiBfdHJ1bmNhdGVNZXNzYWdlKHNlbGYsIG1lc3NhZ2UsIGRpZmYpOgogICAgICAgIG1heF9kaWZmID0gc2VsZi5tYXhEaWZmCiAgICAgICAgaWYgbWF4X2RpZmYgaXMgTm9uZSBvciBsZW4oZGlmZikgPD0gbWF4X2RpZmY6CiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlICsgZGlmZgogICAgICAgIHJldHVybiBtZXNzYWdlICsgKERJRkZfT01JVFRFRCAlIGxlbihkaWZmKSkKCiAgICBkZWYgYXNzZXJ0TGlzdEVxdWFsKHNlbGYsIGxpc3QxLCBsaXN0MiwgbXNnPU5vbmUpOgogICAgICAgICIiIkEgbGlzdC1zcGVjaWZpYyBlcXVhbGl0eSBhc3NlcnRpb24uCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGxpc3QxOiBUaGUgZmlyc3QgbGlzdCB0byBjb21wYXJlLgogICAgICAgICAgICBsaXN0MjogVGhlIHNlY29uZCBsaXN0IHRvIGNvbXBhcmUuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB0byB1c2Ugb24gZmFpbHVyZSBpbnN0ZWFkIG9mIGEgbGlzdCBvZgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLgoKICAgICAgICAiIiIKICAgICAgICBzZWxmLmFzc2VydFNlcXVlbmNlRXF1YWwobGlzdDEsIGxpc3QyLCBtc2csIHNlcV90eXBlPWxpc3QpCgogICAgZGVmIGFzc2VydFR1cGxlRXF1YWwoc2VsZiwgdHVwbGUxLCB0dXBsZTIsIG1zZz1Ob25lKToKICAgICAgICAiIiJBIHR1cGxlLXNwZWNpZmljIGVxdWFsaXR5IGFzc2VydGlvbi4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgdHVwbGUxOiBUaGUgZmlyc3QgdHVwbGUgdG8gY29tcGFyZS4KICAgICAgICAgICAgdHVwbGUyOiBUaGUgc2Vjb25kIHR1cGxlIHRvIGNvbXBhcmUuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB0byB1c2Ugb24gZmFpbHVyZSBpbnN0ZWFkIG9mIGEgbGlzdCBvZgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLgogICAgICAgICIiIgogICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbCh0dXBsZTEsIHR1cGxlMiwgbXNnLCBzZXFfdHlwZT10dXBsZSkKCiAgICBkZWYgYXNzZXJ0U2V0RXF1YWwoc2VsZiwgc2V0MSwgc2V0MiwgbXNnPU5vbmUpOgogICAgICAgICIiIkEgc2V0LXNwZWNpZmljIGVxdWFsaXR5IGFzc2VydGlvbi4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgc2V0MTogVGhlIGZpcnN0IHNldCB0byBjb21wYXJlLgogICAgICAgICAgICBzZXQyOiBUaGUgc2Vjb25kIHNldCB0byBjb21wYXJlLgogICAgICAgICAgICBtc2c6IE9wdGlvbmFsIG1lc3NhZ2UgdG8gdXNlIG9uIGZhaWx1cmUgaW5zdGVhZCBvZiBhIGxpc3Qgb2YKICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy4KCiAgICAgICAgYXNzZXJ0U2V0RXF1YWwgdXNlcyBkdWNrdHlwaW5nIHRvIHN1cHBvcnQgZGlmZmVyZW50IHR5cGVzIG9mIHNldHMsIGFuZAogICAgICAgIGlzIG9wdGltaXplZCBmb3Igc2V0cyBzcGVjaWZpY2FsbHkgKHBhcmFtZXRlcnMgbXVzdCBzdXBwb3J0IGEKICAgICAgICBkaWZmZXJlbmNlIG1ldGhvZCkuCiAgICAgICAgIiIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICBkaWZmZXJlbmNlMSA9IHNldDEuZGlmZmVyZW5jZShzZXQyKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3IgYXMgZToKICAgICAgICAgICAgc2VsZi5mYWlsKCdpbnZhbGlkIHR5cGUgd2hlbiBhdHRlbXB0aW5nIHNldCBkaWZmZXJlbmNlOiAlcycgJSBlKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlOgogICAgICAgICAgICBzZWxmLmZhaWwoJ2ZpcnN0IGFyZ3VtZW50IGRvZXMgbm90IHN1cHBvcnQgc2V0IGRpZmZlcmVuY2U6ICVzJyAlIGUpCgogICAgICAgIHRyeToKICAgICAgICAgICAgZGlmZmVyZW5jZTIgPSBzZXQyLmRpZmZlcmVuY2Uoc2V0MSkKICAgICAgICBleGNlcHQgVHlwZUVycm9yIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZmFpbCgnaW52YWxpZCB0eXBlIHdoZW4gYXR0ZW1wdGluZyBzZXQgZGlmZmVyZW5jZTogJXMnICUgZSkKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToKICAgICAgICAgICAgc2VsZi5mYWlsKCdzZWNvbmQgYXJndW1lbnQgZG9lcyBub3Qgc3VwcG9ydCBzZXQgZGlmZmVyZW5jZTogJXMnICUgZSkKCiAgICAgICAgaWYgbm90IChkaWZmZXJlbmNlMSBvciBkaWZmZXJlbmNlMik6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBsaW5lcyA9IFtdCiAgICAgICAgaWYgZGlmZmVyZW5jZTE6CiAgICAgICAgICAgIGxpbmVzLmFwcGVuZCgnSXRlbXMgaW4gdGhlIGZpcnN0IHNldCBidXQgbm90IHRoZSBzZWNvbmQ6JykKICAgICAgICAgICAgZm9yIGl0ZW0gaW4gZGlmZmVyZW5jZTE6CiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQocmVwcihpdGVtKSkKICAgICAgICBpZiBkaWZmZXJlbmNlMjoKICAgICAgICAgICAgbGluZXMuYXBwZW5kKCdJdGVtcyBpbiB0aGUgc2Vjb25kIHNldCBidXQgbm90IHRoZSBmaXJzdDonKQogICAgICAgICAgICBmb3IgaXRlbSBpbiBkaWZmZXJlbmNlMjoKICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChyZXByKGl0ZW0pKQoKICAgICAgICBzdGFuZGFyZE1zZyA9ICdcbicuam9pbihsaW5lcykKICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0SW4oc2VsZiwgbWVtYmVyLCBjb250YWluZXIsIG1zZz1Ob25lKToKICAgICAgICAiIiJKdXN0IGxpa2Ugc2VsZi5hc3NlcnRUcnVlKGEgaW4gYiksIGJ1dCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIG1lbWJlciBub3QgaW4gY29udGFpbmVyOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyBub3QgZm91bmQgaW4gJXMnICUgKHNhZmVfcmVwcihtZW1iZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfcmVwcihjb250YWluZXIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0Tm90SW4oc2VsZiwgbWVtYmVyLCBjb250YWluZXIsIG1zZz1Ob25lKToKICAgICAgICAiIiJKdXN0IGxpa2Ugc2VsZi5hc3NlcnRUcnVlKGEgbm90IGluIGIpLCBidXQgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBtZW1iZXIgaW4gY29udGFpbmVyOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyB1bmV4cGVjdGVkbHkgZm91bmQgaW4gJXMnICUgKHNhZmVfcmVwcihtZW1iZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfcmVwcihjb250YWluZXIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0SXMoc2VsZiwgZXhwcjEsIGV4cHIyLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiSnVzdCBsaWtlIHNlbGYuYXNzZXJ0VHJ1ZShhIGlzIGIpLCBidXQgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBleHByMSBpcyBub3QgZXhwcjI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIGlzIG5vdCAlcycgJSAoc2FmZV9yZXByKGV4cHIxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKGV4cHIyKSkKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydElzTm90KHNlbGYsIGV4cHIxLCBleHByMiwgbXNnPU5vbmUpOgogICAgICAgICIiIkp1c3QgbGlrZSBzZWxmLmFzc2VydFRydWUoYSBpcyBub3QgYiksIGJ1dCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIGV4cHIxIGlzIGV4cHIyOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICd1bmV4cGVjdGVkbHkgaWRlbnRpY2FsOiAlcycgJSAoc2FmZV9yZXByKGV4cHIxKSwpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnREaWN0RXF1YWwoc2VsZiwgZDEsIGQyLCBtc2c9Tm9uZSk6CiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGQxLCBkaWN0LCAnRmlyc3QgYXJndW1lbnQgaXMgbm90IGEgZGljdGlvbmFyeScpCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGQyLCBkaWN0LCAnU2Vjb25kIGFyZ3VtZW50IGlzIG5vdCBhIGRpY3Rpb25hcnknKQoKICAgICAgICBpZiBkMSAhPSBkMjoKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnJXMgIT0gJXMnICUgKHNhZmVfcmVwcihkMSwgVHJ1ZSksIHNhZmVfcmVwcihkMiwgVHJ1ZSkpCiAgICAgICAgICAgIGRpZmYgPSAoJ1xuJyArICdcbicuam9pbihkaWZmbGliLm5kaWZmKAogICAgICAgICAgICAgICAgICAgICAgICAgICBwcHJpbnQucGZvcm1hdChkMSkuc3BsaXRsaW5lcygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICBwcHJpbnQucGZvcm1hdChkMikuc3BsaXRsaW5lcygpKSkpCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gc2VsZi5fdHJ1bmNhdGVNZXNzYWdlKHN0YW5kYXJkTXNnLCBkaWZmKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0KHNlbGYsIHN1YnNldCwgZGljdGlvbmFyeSwgbXNnPU5vbmUpOgogICAgICAgICIiIkNoZWNrcyB3aGV0aGVyIGRpY3Rpb25hcnkgaXMgYSBzdXBlcnNldCBvZiBzdWJzZXQuIiIiCiAgICAgICAgd2FybmluZ3Mud2FybignYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0IGlzIGRlcHJlY2F0ZWQnLAogICAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nKQogICAgICAgIG1pc3NpbmcgPSBbXQogICAgICAgIG1pc21hdGNoZWQgPSBbXQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIHN1YnNldC5pdGVtcygpOgogICAgICAgICAgICBpZiBrZXkgbm90IGluIGRpY3Rpb25hcnk6CiAgICAgICAgICAgICAgICBtaXNzaW5nLmFwcGVuZChrZXkpCiAgICAgICAgICAgIGVsaWYgdmFsdWUgIT0gZGljdGlvbmFyeVtrZXldOgogICAgICAgICAgICAgICAgbWlzbWF0Y2hlZC5hcHBlbmQoJyVzLCBleHBlY3RlZDogJXMsIGFjdHVhbDogJXMnICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzYWZlX3JlcHIoa2V5KSwgc2FmZV9yZXByKHZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoZGljdGlvbmFyeVtrZXldKSkpCgogICAgICAgIGlmIG5vdCAobWlzc2luZyBvciBtaXNtYXRjaGVkKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHN0YW5kYXJkTXNnID0gJycKICAgICAgICBpZiBtaXNzaW5nOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICdNaXNzaW5nOiAlcycgJSAnLCcuam9pbihzYWZlX3JlcHIobSkgZm9yIG0gaW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pc3NpbmcpCiAgICAgICAgaWYgbWlzbWF0Y2hlZDoKICAgICAgICAgICAgaWYgc3RhbmRhcmRNc2c6CiAgICAgICAgICAgICAgICBzdGFuZGFyZE1zZyArPSAnOyAnCiAgICAgICAgICAgIHN0YW5kYXJkTXNnICs9ICdNaXNtYXRjaGVkIHZhbHVlczogJXMnICUgJywnLmpvaW4obWlzbWF0Y2hlZCkKCiAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgoKICAgIGRlZiBhc3NlcnRDb3VudEVxdWFsKHNlbGYsIGZpcnN0LCBzZWNvbmQsIG1zZz1Ob25lKToKICAgICAgICAiIiJBbiB1bm9yZGVyZWQgc2VxdWVuY2UgY29tcGFyaXNvbiBhc3NlcnRpbmcgdGhhdCB0aGUgc2FtZSBlbGVtZW50cywKICAgICAgICByZWdhcmRsZXNzIG9mIG9yZGVyLiAgSWYgdGhlIHNhbWUgZWxlbWVudCBvY2N1cnMgbW9yZSB0aGFuIG9uY2UsCiAgICAgICAgaXQgdmVyaWZpZXMgdGhhdCB0aGUgZWxlbWVudHMgb2NjdXIgdGhlIHNhbWUgbnVtYmVyIG9mIHRpbWVzLgoKICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChDb3VudGVyKGxpc3QoZmlyc3QpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb3VudGVyKGxpc3Qoc2Vjb25kKSkpCgogICAgICAgICBFeGFtcGxlOgogICAgICAgICAgICAtIFswLCAxLCAxXSBhbmQgWzEsIDAsIDFdIGNvbXBhcmUgZXF1YWwuCiAgICAgICAgICAgIC0gWzAsIDAsIDFdIGFuZCBbMCwgMV0gY29tcGFyZSB1bmVxdWFsLgoKICAgICAgICAiIiIKICAgICAgICBmaXJzdF9zZXEsIHNlY29uZF9zZXEgPSBsaXN0KGZpcnN0KSwgbGlzdChzZWNvbmQpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmaXJzdCA9IGNvbGxlY3Rpb25zLkNvdW50ZXIoZmlyc3Rfc2VxKQogICAgICAgICAgICBzZWNvbmQgPSBjb2xsZWN0aW9ucy5Db3VudGVyKHNlY29uZF9zZXEpCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICAgICAgIyBIYW5kbGUgY2FzZSB3aXRoIHVuaGFzaGFibGUgZWxlbWVudHMKICAgICAgICAgICAgZGlmZmVyZW5jZXMgPSBfY291bnRfZGlmZl9hbGxfcHVycG9zZShmaXJzdF9zZXEsIHNlY29uZF9zZXEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgZmlyc3QgPT0gc2Vjb25kOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGRpZmZlcmVuY2VzID0gX2NvdW50X2RpZmZfaGFzaGFibGUoZmlyc3Rfc2VxLCBzZWNvbmRfc2VxKQoKICAgICAgICBpZiBkaWZmZXJlbmNlczoKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnRWxlbWVudCBjb3VudHMgd2VyZSBub3QgZXF1YWw6XG4nCiAgICAgICAgICAgIGxpbmVzID0gWydGaXJzdCBoYXMgJWQsIFNlY29uZCBoYXMgJWQ6ICAlcicgJSBkaWZmIGZvciBkaWZmIGluIGRpZmZlcmVuY2VzXQogICAgICAgICAgICBkaWZmTXNnID0gJ1xuJy5qb2luKGxpbmVzKQogICAgICAgICAgICBzdGFuZGFyZE1zZyA9IHNlbGYuX3RydW5jYXRlTWVzc2FnZShzdGFuZGFyZE1zZywgZGlmZk1zZykKICAgICAgICAgICAgbXNnID0gc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKQogICAgICAgICAgICBzZWxmLmZhaWwobXNnKQoKICAgIGRlZiBhc3NlcnRNdWx0aUxpbmVFcXVhbChzZWxmLCBmaXJzdCwgc2Vjb25kLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiQXNzZXJ0IHRoYXQgdHdvIG11bHRpLWxpbmUgc3RyaW5ncyBhcmUgZXF1YWwuIiIiCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGZpcnN0LCBzdHIsICdGaXJzdCBhcmd1bWVudCBpcyBub3QgYSBzdHJpbmcnKQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzZWNvbmQsIHN0ciwgJ1NlY29uZCBhcmd1bWVudCBpcyBub3QgYSBzdHJpbmcnKQoKICAgICAgICBpZiBmaXJzdCAhPSBzZWNvbmQ6CiAgICAgICAgICAgICMgZG9uJ3QgdXNlIGRpZmZsaWIgaWYgdGhlIHN0cmluZ3MgYXJlIHRvbyBsb25nCiAgICAgICAgICAgIGlmIChsZW4oZmlyc3QpID4gc2VsZi5fZGlmZlRocmVzaG9sZCBvcgogICAgICAgICAgICAgICAgbGVuKHNlY29uZCkgPiBzZWxmLl9kaWZmVGhyZXNob2xkKToKICAgICAgICAgICAgICAgIHNlbGYuX2Jhc2VBc3NlcnRFcXVhbChmaXJzdCwgc2Vjb25kLCBtc2cpCiAgICAgICAgICAgIGZpcnN0bGluZXMgPSBmaXJzdC5zcGxpdGxpbmVzKGtlZXBlbmRzPVRydWUpCiAgICAgICAgICAgIHNlY29uZGxpbmVzID0gc2Vjb25kLnNwbGl0bGluZXMoa2VlcGVuZHM9VHJ1ZSkKICAgICAgICAgICAgaWYgbGVuKGZpcnN0bGluZXMpID09IDEgYW5kIGZpcnN0LnN0cmlwKCdcclxuJykgPT0gZmlyc3Q6CiAgICAgICAgICAgICAgICBmaXJzdGxpbmVzID0gW2ZpcnN0ICsgJ1xuJ10KICAgICAgICAgICAgICAgIHNlY29uZGxpbmVzID0gW3NlY29uZCArICdcbiddCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzICE9ICVzJyAlIChzYWZlX3JlcHIoZmlyc3QsIFRydWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKHNlY29uZCwgVHJ1ZSkpCiAgICAgICAgICAgIGRpZmYgPSAnXG4nICsgJycuam9pbihkaWZmbGliLm5kaWZmKGZpcnN0bGluZXMsIHNlY29uZGxpbmVzKSkKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSBzZWxmLl90cnVuY2F0ZU1lc3NhZ2Uoc3RhbmRhcmRNc2csIGRpZmYpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnRMZXNzKHNlbGYsIGEsIGIsIG1zZz1Ob25lKToKICAgICAgICAiIiJKdXN0IGxpa2Ugc2VsZi5hc3NlcnRUcnVlKGEgPCBiKSwgYnV0IHdpdGggYSBuaWNlciBkZWZhdWx0IG1lc3NhZ2UuIiIiCiAgICAgICAgaWYgbm90IGEgPCBiOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyBub3QgbGVzcyB0aGFuICVzJyAlIChzYWZlX3JlcHIoYSksIHNhZmVfcmVwcihiKSkKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydExlc3NFcXVhbChzZWxmLCBhLCBiLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiSnVzdCBsaWtlIHNlbGYuYXNzZXJ0VHJ1ZShhIDw9IGIpLCBidXQgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBub3QgYSA8PSBiOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyBub3QgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJyAlIChzYWZlX3JlcHIoYSksIHNhZmVfcmVwcihiKSkKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydEdyZWF0ZXIoc2VsZiwgYSwgYiwgbXNnPU5vbmUpOgogICAgICAgICIiIkp1c3QgbGlrZSBzZWxmLmFzc2VydFRydWUoYSA+IGIpLCBidXQgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBub3QgYSA+IGI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIG5vdCBncmVhdGVyIHRoYW4gJXMnICUgKHNhZmVfcmVwcihhKSwgc2FmZV9yZXByKGIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0R3JlYXRlckVxdWFsKHNlbGYsIGEsIGIsIG1zZz1Ob25lKToKICAgICAgICAiIiJKdXN0IGxpa2Ugc2VsZi5hc3NlcnRUcnVlKGEgPj0gYiksIGJ1dCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIG5vdCBhID49IGI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIG5vdCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMnICUgKHNhZmVfcmVwcihhKSwgc2FmZV9yZXByKGIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0SXNOb25lKHNlbGYsIG9iaiwgbXNnPU5vbmUpOgogICAgICAgICIiIlNhbWUgYXMgc2VsZi5hc3NlcnRUcnVlKG9iaiBpcyBOb25lKSwgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBvYmogaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIGlzIG5vdCBOb25lJyAlIChzYWZlX3JlcHIob2JqKSwpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnRJc05vdE5vbmUoc2VsZiwgb2JqLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiSW5jbHVkZWQgZm9yIHN5bW1ldHJ5IHdpdGggYXNzZXJ0SXNOb25lLiIiIgogICAgICAgIGlmIG9iaiBpcyBOb25lOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICd1bmV4cGVjdGVkbHkgTm9uZScKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydElzSW5zdGFuY2Uoc2VsZiwgb2JqLCBjbHMsIG1zZz1Ob25lKToKICAgICAgICAiIiJTYW1lIGFzIHNlbGYuYXNzZXJ0VHJ1ZShpc2luc3RhbmNlKG9iaiwgY2xzKSksIHdpdGggYSBuaWNlcgogICAgICAgIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvYmosIGNscyk6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiAlcicgJSAoc2FmZV9yZXByKG9iaiksIGNscykKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydE5vdElzSW5zdGFuY2Uoc2VsZiwgb2JqLCBjbHMsIG1zZz1Ob25lKToKICAgICAgICAiIiJJbmNsdWRlZCBmb3Igc3ltbWV0cnkgd2l0aCBhc3NlcnRJc0luc3RhbmNlLiIiIgogICAgICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBjbHMpOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyBpcyBhbiBpbnN0YW5jZSBvZiAlcicgJSAoc2FmZV9yZXByKG9iaiksIGNscykKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydFJhaXNlc1JlZ2V4KHNlbGYsIGV4cGVjdGVkX2V4Y2VwdGlvbiwgZXhwZWN0ZWRfcmVnZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGFibGVfb2JqPU5vbmUsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgIiIiQXNzZXJ0cyB0aGF0IHRoZSBtZXNzYWdlIGluIGEgcmFpc2VkIGV4Y2VwdGlvbiBtYXRjaGVzIGEgcmVnZXguCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGV4cGVjdGVkX2V4Y2VwdGlvbjogRXhjZXB0aW9uIGNsYXNzIGV4cGVjdGVkIHRvIGJlIHJhaXNlZC4KICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXg6IFJlZ2V4IChyZSBwYXR0ZXJuIG9iamVjdCBvciBzdHJpbmcpIGV4cGVjdGVkCiAgICAgICAgICAgICAgICAgICAgdG8gYmUgZm91bmQgaW4gZXJyb3IgbWVzc2FnZS4KICAgICAgICAgICAgY2FsbGFibGVfb2JqOiBGdW5jdGlvbiB0byBiZSBjYWxsZWQuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB1c2VkIGluIGNhc2Ugb2YgZmFpbHVyZS4gQ2FuIG9ubHkgYmUgdXNlZAogICAgICAgICAgICAgICAgICAgIHdoZW4gYXNzZXJ0UmFpc2VzUmVnZXggaXMgdXNlZCBhcyBhIGNvbnRleHQgbWFuYWdlci4KICAgICAgICAgICAgYXJnczogRXh0cmEgYXJncy4KICAgICAgICAgICAga3dhcmdzOiBFeHRyYSBrd2FyZ3MuCiAgICAgICAgIiIiCiAgICAgICAgY29udGV4dCA9IF9Bc3NlcnRSYWlzZXNDb250ZXh0KGV4cGVjdGVkX2V4Y2VwdGlvbiwgc2VsZiwgY2FsbGFibGVfb2JqLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZF9yZWdleCkKCiAgICAgICAgcmV0dXJuIGNvbnRleHQuaGFuZGxlKCdhc3NlcnRSYWlzZXNSZWdleCcsIGNhbGxhYmxlX29iaiwgYXJncywga3dhcmdzKQoKICAgIGRlZiBhc3NlcnRXYXJuc1JlZ2V4KHNlbGYsIGV4cGVjdGVkX3dhcm5pbmcsIGV4cGVjdGVkX3JlZ2V4LAogICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGFibGVfb2JqPU5vbmUsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgIiIiQXNzZXJ0cyB0aGF0IHRoZSBtZXNzYWdlIGluIGEgdHJpZ2dlcmVkIHdhcm5pbmcgbWF0Y2hlcyBhIHJlZ2V4cC4KICAgICAgICBCYXNpYyBmdW5jdGlvbmluZyBpcyBzaW1pbGFyIHRvIGFzc2VydFdhcm5zKCkgd2l0aCB0aGUgYWRkaXRpb24KICAgICAgICB0aGF0IG9ubHkgd2FybmluZ3Mgd2hvc2UgbWVzc2FnZXMgYWxzbyBtYXRjaCB0aGUgcmVndWxhciBleHByZXNzaW9uCiAgICAgICAgYXJlIGNvbnNpZGVyZWQgc3VjY2Vzc2Z1bCBtYXRjaGVzLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBleHBlY3RlZF93YXJuaW5nOiBXYXJuaW5nIGNsYXNzIGV4cGVjdGVkIHRvIGJlIHRyaWdnZXJlZC4KICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXg6IFJlZ2V4IChyZSBwYXR0ZXJuIG9iamVjdCBvciBzdHJpbmcpIGV4cGVjdGVkCiAgICAgICAgICAgICAgICAgICAgdG8gYmUgZm91bmQgaW4gZXJyb3IgbWVzc2FnZS4KICAgICAgICAgICAgY2FsbGFibGVfb2JqOiBGdW5jdGlvbiB0byBiZSBjYWxsZWQuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB1c2VkIGluIGNhc2Ugb2YgZmFpbHVyZS4gQ2FuIG9ubHkgYmUgdXNlZAogICAgICAgICAgICAgICAgICAgIHdoZW4gYXNzZXJ0V2FybnNSZWdleCBpcyB1c2VkIGFzIGEgY29udGV4dCBtYW5hZ2VyLgogICAgICAgICAgICBhcmdzOiBFeHRyYSBhcmdzLgogICAgICAgICAgICBrd2FyZ3M6IEV4dHJhIGt3YXJncy4KICAgICAgICAiIiIKICAgICAgICBjb250ZXh0ID0gX0Fzc2VydFdhcm5zQ29udGV4dChleHBlY3RlZF93YXJuaW5nLCBzZWxmLCBjYWxsYWJsZV9vYmosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXgpCiAgICAgICAgcmV0dXJuIGNvbnRleHQuaGFuZGxlKCdhc3NlcnRXYXJuc1JlZ2V4JywgY2FsbGFibGVfb2JqLCBhcmdzLCBrd2FyZ3MpCgogICAgZGVmIGFzc2VydFJlZ2V4KHNlbGYsIHRleHQsIGV4cGVjdGVkX3JlZ2V4LCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiRmFpbCB0aGUgdGVzdCB1bmxlc3MgdGhlIHRleHQgbWF0Y2hlcyB0aGUgcmVndWxhciBleHByZXNzaW9uLiIiIgogICAgICAgIGlmIGlzaW5zdGFuY2UoZXhwZWN0ZWRfcmVnZXgsIChzdHIsIGJ5dGVzKSk6CiAgICAgICAgICAgIGFzc2VydCBleHBlY3RlZF9yZWdleCwgImV4cGVjdGVkX3JlZ2V4IG11c3Qgbm90IGJlIGVtcHR5LiIKICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXggPSByZS5jb21waWxlKGV4cGVjdGVkX3JlZ2V4KQogICAgICAgIGlmIG5vdCBleHBlY3RlZF9yZWdleC5zZWFyY2godGV4dCk6CiAgICAgICAgICAgIG1zZyA9IG1zZyBvciAiUmVnZXggZGlkbid0IG1hdGNoIgogICAgICAgICAgICBtc2cgPSAnJXM6ICVyIG5vdCBmb3VuZCBpbiAlcicgJSAobXNnLCBleHBlY3RlZF9yZWdleC5wYXR0ZXJuLCB0ZXh0KQogICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKICAgIGRlZiBhc3NlcnROb3RSZWdleChzZWxmLCB0ZXh0LCB1bmV4cGVjdGVkX3JlZ2V4LCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiRmFpbCB0aGUgdGVzdCBpZiB0aGUgdGV4dCBtYXRjaGVzIHRoZSByZWd1bGFyIGV4cHJlc3Npb24uIiIiCiAgICAgICAgaWYgaXNpbnN0YW5jZSh1bmV4cGVjdGVkX3JlZ2V4LCAoc3RyLCBieXRlcykpOgogICAgICAgICAgICB1bmV4cGVjdGVkX3JlZ2V4ID0gcmUuY29tcGlsZSh1bmV4cGVjdGVkX3JlZ2V4KQogICAgICAgIG1hdGNoID0gdW5leHBlY3RlZF9yZWdleC5zZWFyY2godGV4dCkKICAgICAgICBpZiBtYXRjaDoKICAgICAgICAgICAgbXNnID0gbXNnIG9yICJSZWdleCBtYXRjaGVkIgogICAgICAgICAgICBtc2cgPSAnJXM6ICVyIG1hdGNoZXMgJXIgaW4gJXInICUgKG1zZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0W21hdGNoLnN0YXJ0KCk6bWF0Y2guZW5kKCldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZXhwZWN0ZWRfcmVnZXgucGF0dGVybiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0KQogICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKCiAgICBkZWYgX2RlcHJlY2F0ZShvcmlnaW5hbF9mdW5jKToKICAgICAgICBkZWYgZGVwcmVjYXRlZF9mdW5jKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgICAgICAnUGxlYXNlIHVzZSB7MH0gaW5zdGVhZC4nLmZvcm1hdChvcmlnaW5hbF9mdW5jLl9fbmFtZV9fKSwKICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsX2Z1bmMoKmFyZ3MsICoqa3dhcmdzKQogICAgICAgIHJldHVybiBkZXByZWNhdGVkX2Z1bmMKCiAgICAjIHNlZSAjOTQyNAogICAgZmFpbFVubGVzc0VxdWFsID0gYXNzZXJ0RXF1YWxzID0gX2RlcHJlY2F0ZShhc3NlcnRFcXVhbCkKICAgIGZhaWxJZkVxdWFsID0gYXNzZXJ0Tm90RXF1YWxzID0gX2RlcHJlY2F0ZShhc3NlcnROb3RFcXVhbCkKICAgIGZhaWxVbmxlc3NBbG1vc3RFcXVhbCA9IGFzc2VydEFsbW9zdEVxdWFscyA9IF9kZXByZWNhdGUoYXNzZXJ0QWxtb3N0RXF1YWwpCiAgICBmYWlsSWZBbG1vc3RFcXVhbCA9IGFzc2VydE5vdEFsbW9zdEVxdWFscyA9IF9kZXByZWNhdGUoYXNzZXJ0Tm90QWxtb3N0RXF1YWwpCiAgICBmYWlsVW5sZXNzID0gYXNzZXJ0XyA9IF9kZXByZWNhdGUoYXNzZXJ0VHJ1ZSkKICAgIGZhaWxVbmxlc3NSYWlzZXMgPSBfZGVwcmVjYXRlKGFzc2VydFJhaXNlcykKICAgIGZhaWxJZiA9IF9kZXByZWNhdGUoYXNzZXJ0RmFsc2UpCiAgICBhc3NlcnRSYWlzZXNSZWdleHAgPSBfZGVwcmVjYXRlKGFzc2VydFJhaXNlc1JlZ2V4KQogICAgYXNzZXJ0UmVnZXhwTWF0Y2hlcyA9IF9kZXByZWNhdGUoYXNzZXJ0UmVnZXgpCgoKCmNsYXNzIEZ1bmN0aW9uVGVzdENhc2UoVGVzdENhc2UpOgogICAgIiIiQSB0ZXN0IGNhc2UgdGhhdCB3cmFwcyBhIHRlc3QgZnVuY3Rpb24uCgogICAgVGhpcyBpcyB1c2VmdWwgZm9yIHNsaXBwaW5nIHByZS1leGlzdGluZyB0ZXN0IGZ1bmN0aW9ucyBpbnRvIHRoZQogICAgdW5pdHRlc3QgZnJhbWV3b3JrLiBPcHRpb25hbGx5LCBzZXQtdXAgYW5kIHRpZHktdXAgZnVuY3Rpb25zIGNhbiBiZQogICAgc3VwcGxpZWQuIEFzIHdpdGggVGVzdENhc2UsIHRoZSB0aWR5LXVwICgndGVhckRvd24nKSBmdW5jdGlvbiB3aWxsCiAgICBhbHdheXMgYmUgY2FsbGVkIGlmIHRoZSBzZXQtdXAgKCdzZXRVcCcpIGZ1bmN0aW9uIHJhbiBzdWNjZXNzZnVsbHkuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGVzdEZ1bmMsIHNldFVwPU5vbmUsIHRlYXJEb3duPU5vbmUsIGRlc2NyaXB0aW9uPU5vbmUpOgogICAgICAgIHN1cGVyKEZ1bmN0aW9uVGVzdENhc2UsIHNlbGYpLl9faW5pdF9fKCkKICAgICAgICBzZWxmLl9zZXRVcEZ1bmMgPSBzZXRVcAogICAgICAgIHNlbGYuX3RlYXJEb3duRnVuYyA9IHRlYXJEb3duCiAgICAgICAgc2VsZi5fdGVzdEZ1bmMgPSB0ZXN0RnVuYwogICAgICAgIHNlbGYuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24KCiAgICBkZWYgc2V0VXAoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fc2V0VXBGdW5jIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLl9zZXRVcEZ1bmMoKQoKICAgIGRlZiB0ZWFyRG93bihzZWxmKToKICAgICAgICBpZiBzZWxmLl90ZWFyRG93bkZ1bmMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuX3RlYXJEb3duRnVuYygpCgogICAgZGVmIHJ1blRlc3Qoc2VsZik6CiAgICAgICAgc2VsZi5fdGVzdEZ1bmMoKQoKICAgIGRlZiBpZChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fdGVzdEZ1bmMuX19uYW1lX18KCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgc2VsZi5fX2NsYXNzX18pOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICAgICAgcmV0dXJuIHNlbGYuX3NldFVwRnVuYyA9PSBvdGhlci5fc2V0VXBGdW5jIGFuZCBcCiAgICAgICAgICAgICAgIHNlbGYuX3RlYXJEb3duRnVuYyA9PSBvdGhlci5fdGVhckRvd25GdW5jIGFuZCBcCiAgICAgICAgICAgICAgIHNlbGYuX3Rlc3RGdW5jID09IG90aGVyLl90ZXN0RnVuYyBhbmQgXAogICAgICAgICAgICAgICBzZWxmLl9kZXNjcmlwdGlvbiA9PSBvdGhlci5fZGVzY3JpcHRpb24KCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gbm90IHNlbGYgPT0gb3RoZXIKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2goKHR5cGUoc2VsZiksIHNlbGYuX3NldFVwRnVuYywgc2VsZi5fdGVhckRvd25GdW5jLAogICAgICAgICAgICAgICAgICAgICBzZWxmLl90ZXN0RnVuYywgc2VsZi5fZGVzY3JpcHRpb24pKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiAiJXMgKCVzKSIgJSAoc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fdGVzdEZ1bmMuX19uYW1lX18pCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAiPCVzIHRlYz0lcz4iICUgKHN0cmNsYXNzKHNlbGYuX19jbGFzc19fKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3Rlc3RGdW5jKQoKICAgIGRlZiBzaG9ydERlc2NyaXB0aW9uKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX2Rlc2NyaXB0aW9uIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fZGVzY3JpcHRpb24KICAgICAgICBkb2MgPSBzZWxmLl90ZXN0RnVuYy5fX2RvY19fCiAgICAgICAgcmV0dXJuIGRvYyBhbmQgZG9jLnNwbGl0KCJcbiIpWzBdLnN0cmlwKCkgb3IgTm9uZQo=',
'/Lib/unittest/main.py':'IiIiVW5pdHRlc3QgbWFpbiBwcm9ncmFtIiIiCgppbXBvcnQgc3lzCmltcG9ydCBvcHRwYXJzZQppbXBvcnQgb3MKCmZyb20gLiBpbXBvcnQgbG9hZGVyLCBydW5uZXIKZnJvbSAuc2lnbmFscyBpbXBvcnQgaW5zdGFsbEhhbmRsZXIKCl9fdW5pdHRlc3QgPSBUcnVlCgpGQUlMRkFTVCAgICAgPSAiICAtZiwgLS1mYWlsZmFzdCAgIFN0b3Agb24gZmlyc3QgZmFpbHVyZVxuIgpDQVRDSEJSRUFLICAgPSAiICAtYywgLS1jYXRjaCAgICAgIENhdGNoIGNvbnRyb2wtQyBhbmQgZGlzcGxheSByZXN1bHRzXG4iCkJVRkZFUk9VVFBVVCA9ICIgIC1iLCAtLWJ1ZmZlciAgICAgQnVmZmVyIHN0ZG91dCBhbmQgc3RkZXJyIGR1cmluZyB0ZXN0IHJ1bnNcbiIKClVTQUdFX0FTX01BSU4gPSAiIiJcClVzYWdlOiAlKHByb2dOYW1lKXMgW29wdGlvbnNdIFt0ZXN0c10KCk9wdGlvbnM6CiAgLWgsIC0taGVscCAgICAgICBTaG93IHRoaXMgbWVzc2FnZQogIC12LCAtLXZlcmJvc2UgICAgVmVyYm9zZSBvdXRwdXQKICAtcSwgLS1xdWlldCAgICAgIE1pbmltYWwgb3V0cHV0CiUoZmFpbGZhc3QpcyUoY2F0Y2hicmVhaylzJShidWZmZXIpcwpFeGFtcGxlczoKICAlKHByb2dOYW1lKXMgdGVzdF9tb2R1bGUgICAgICAgICAgICAgICAtIHJ1biB0ZXN0cyBmcm9tIHRlc3RfbW9kdWxlCiAgJShwcm9nTmFtZSlzIG1vZHVsZS5UZXN0Q2xhc3MgICAgICAgICAgLSBydW4gdGVzdHMgZnJvbSBtb2R1bGUuVGVzdENsYXNzCiAgJShwcm9nTmFtZSlzIG1vZHVsZS5DbGFzcy50ZXN0X21ldGhvZCAgLSBydW4gc3BlY2lmaWVkIHRlc3QgbWV0aG9kCgpbdGVzdHNdIGNhbiBiZSBhIGxpc3Qgb2YgYW55IG51bWJlciBvZiB0ZXN0IG1vZHVsZXMsIGNsYXNzZXMgYW5kIHRlc3QKbWV0aG9kcy4KCkFsdGVybmF0aXZlIFVzYWdlOiAlKHByb2dOYW1lKXMgZGlzY292ZXIgW29wdGlvbnNdCgpPcHRpb25zOgogIC12LCAtLXZlcmJvc2UgICAgVmVyYm9zZSBvdXRwdXQKJShmYWlsZmFzdClzJShjYXRjaGJyZWFrKXMlKGJ1ZmZlcilzICAtcyBkaXJlY3RvcnkgICAgIERpcmVjdG9yeSB0byBzdGFydCBkaXNjb3ZlcnkgKCcuJyBkZWZhdWx0KQogIC1wIHBhdHRlcm4gICAgICAgUGF0dGVybiB0byBtYXRjaCB0ZXN0IGZpbGVzICgndGVzdCoucHknIGRlZmF1bHQpCiAgLXQgZGlyZWN0b3J5ICAgICBUb3AgbGV2ZWwgZGlyZWN0b3J5IG9mIHByb2plY3QgKGRlZmF1bHQgdG8KICAgICAgICAgICAgICAgICAgIHN0YXJ0IGRpcmVjdG9yeSkKCkZvciB0ZXN0IGRpc2NvdmVyeSBhbGwgdGVzdCBtb2R1bGVzIG11c3QgYmUgaW1wb3J0YWJsZSBmcm9tIHRoZSB0b3AKbGV2ZWwgZGlyZWN0b3J5IG9mIHRoZSBwcm9qZWN0LgoiIiIKClVTQUdFX0ZST01fTU9EVUxFID0gIiIiXApVc2FnZTogJShwcm9nTmFtZSlzIFtvcHRpb25zXSBbdGVzdF0gWy4uLl0KCk9wdGlvbnM6CiAgLWgsIC0taGVscCAgICAgICBTaG93IHRoaXMgbWVzc2FnZQogIC12LCAtLXZlcmJvc2UgICAgVmVyYm9zZSBvdXRwdXQKICAtcSwgLS1xdWlldCAgICAgIE1pbmltYWwgb3V0cHV0CiUoZmFpbGZhc3QpcyUoY2F0Y2hicmVhaylzJShidWZmZXIpcwpFeGFtcGxlczoKICAlKHByb2dOYW1lKXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBydW4gZGVmYXVsdCBzZXQgb2YgdGVzdHMKICAlKHByb2dOYW1lKXMgTXlUZXN0U3VpdGUgICAgICAgICAgICAgICAgICAgLSBydW4gc3VpdGUgJ015VGVzdFN1aXRlJwogICUocHJvZ05hbWUpcyBNeVRlc3RDYXNlLnRlc3RTb21ldGhpbmcgICAgICAtIHJ1biBNeVRlc3RDYXNlLnRlc3RTb21ldGhpbmcKICAlKHByb2dOYW1lKXMgTXlUZXN0Q2FzZSAgICAgICAgICAgICAgICAgICAgLSBydW4gYWxsICd0ZXN0KicgdGVzdCBtZXRob2RzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gTXlUZXN0Q2FzZQoiIiIKCmRlZiBfY29udmVydF9uYW1lKG5hbWUpOgogICAgIyBvbiBMaW51eCAvIE1hYyBPUyBYICdmb28uUFknIGlzIG5vdCBpbXBvcnRhYmxlLCBidXQgb24KICAgICMgV2luZG93cyBpdCBpcy4gU2ltcGxlciB0byBkbyBhIGNhc2UgaW5zZW5zaXRpdmUgbWF0Y2gKICAgICMgYSBiZXR0ZXIgY2hlY2sgd291bGQgYmUgdG8gY2hlY2sgdGhhdCB0aGUgbmFtZSBpcyBhCiAgICAjIHZhbGlkIFB5dGhvbiBtb2R1bGUgbmFtZS4KICAgIGlmIG9zLnBhdGguaXNmaWxlKG5hbWUpIGFuZCBuYW1lLmxvd2VyKCkuZW5kc3dpdGgoJy5weScpOgogICAgICAgIGlmIG9zLnBhdGguaXNhYnMobmFtZSk6CiAgICAgICAgICAgIHJlbF9wYXRoID0gb3MucGF0aC5yZWxwYXRoKG5hbWUsIG9zLmdldGN3ZCgpKQogICAgICAgICAgICBpZiBvcy5wYXRoLmlzYWJzKHJlbF9wYXRoKSBvciByZWxfcGF0aC5zdGFydHN3aXRoKG9zLnBhcmRpcik6CiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZQogICAgICAgICAgICBuYW1lID0gcmVsX3BhdGgKICAgICAgICAjIG9uIFdpbmRvd3MgYm90aCAnXCcgYW5kICcvJyBhcmUgdXNlZCBhcyBwYXRoCiAgICAgICAgIyBzZXBhcmF0b3JzLiBCZXR0ZXIgdG8gcmVwbGFjZSBib3RoIHRoYW4gcmVseSBvbiBvcy5wYXRoLnNlcAogICAgICAgIHJldHVybiBuYW1lWzotM10ucmVwbGFjZSgnXFwnLCAnLicpLnJlcGxhY2UoJy8nLCAnLicpCiAgICByZXR1cm4gbmFtZQoKZGVmIF9jb252ZXJ0X25hbWVzKG5hbWVzKToKICAgIHJldHVybiBbX2NvbnZlcnRfbmFtZShuYW1lKSBmb3IgbmFtZSBpbiBuYW1lc10KCgpjbGFzcyBUZXN0UHJvZ3JhbShvYmplY3QpOgogICAgIiIiQSBjb21tYW5kLWxpbmUgcHJvZ3JhbSB0aGF0IHJ1bnMgYSBzZXQgb2YgdGVzdHM7IHRoaXMgaXMgcHJpbWFyaWx5CiAgICAgICBmb3IgbWFraW5nIHRlc3QgbW9kdWxlcyBjb252ZW5pZW50bHkgZXhlY3V0YWJsZS4KICAgICIiIgogICAgVVNBR0UgPSBVU0FHRV9GUk9NX01PRFVMRQoKICAgICMgZGVmYXVsdHMgZm9yIHRlc3RpbmcKICAgIGZhaWxmYXN0ID0gY2F0Y2hicmVhayA9IGJ1ZmZlciA9IHByb2dOYW1lID0gd2FybmluZ3MgPSBOb25lCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1vZHVsZT0nX19tYWluX18nLCBkZWZhdWx0VGVzdD1Ob25lLCBhcmd2PU5vbmUsCiAgICAgICAgICAgICAgICAgICAgdGVzdFJ1bm5lcj1Ob25lLCB0ZXN0TG9hZGVyPWxvYWRlci5kZWZhdWx0VGVzdExvYWRlciwKICAgICAgICAgICAgICAgICAgICBleGl0PVRydWUsIHZlcmJvc2l0eT0xLCBmYWlsZmFzdD1Ob25lLCBjYXRjaGJyZWFrPU5vbmUsCiAgICAgICAgICAgICAgICAgICAgYnVmZmVyPU5vbmUsIHdhcm5pbmdzPU5vbmUpOgogICAgICAgIGlmIGlzaW5zdGFuY2UobW9kdWxlLCBzdHIpOgogICAgICAgICAgICBzZWxmLm1vZHVsZSA9IF9faW1wb3J0X18obW9kdWxlKQogICAgICAgICAgICBmb3IgcGFydCBpbiBtb2R1bGUuc3BsaXQoJy4nKVsxOl06CiAgICAgICAgICAgICAgICBzZWxmLm1vZHVsZSA9IGdldGF0dHIoc2VsZi5tb2R1bGUsIHBhcnQpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5tb2R1bGUgPSBtb2R1bGUKICAgICAgICBpZiBhcmd2IGlzIE5vbmU6CiAgICAgICAgICAgIGFyZ3YgPSBzeXMuYXJndgoKICAgICAgICBzZWxmLmV4aXQgPSBleGl0CiAgICAgICAgc2VsZi5mYWlsZmFzdCA9IGZhaWxmYXN0CiAgICAgICAgc2VsZi5jYXRjaGJyZWFrID0gY2F0Y2hicmVhawogICAgICAgIHNlbGYudmVyYm9zaXR5ID0gdmVyYm9zaXR5CiAgICAgICAgc2VsZi5idWZmZXIgPSBidWZmZXIKICAgICAgICBpZiB3YXJuaW5ncyBpcyBOb25lIGFuZCBub3Qgc3lzLndhcm5vcHRpb25zOgogICAgICAgICAgICAjIGV2ZW4gaWYgRHJlcHJlY2F0aW9uV2FybmluZ3MgYXJlIGlnbm9yZWQgYnkgZGVmYXVsdAogICAgICAgICAgICAjIHByaW50IHRoZW0gYW55d2F5IHVubGVzcyBvdGhlciB3YXJuaW5ncyBzZXR0aW5ncyBhcmUKICAgICAgICAgICAgIyBzcGVjaWZpZWQgYnkgdGhlIHdhcm5pbmdzIGFyZyBvciB0aGUgLVcgcHl0aG9uIGZsYWcKICAgICAgICAgICAgc2VsZi53YXJuaW5ncyA9ICdkZWZhdWx0JwogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgaGVyZSBzZWxmLndhcm5pbmdzIGlzIHNldCBlaXRoZXIgdG8gdGhlIHZhbHVlIHBhc3NlZAogICAgICAgICAgICAjIHRvIHRoZSB3YXJuaW5ncyBhcmdzIG9yIHRvIE5vbmUuCiAgICAgICAgICAgICMgSWYgdGhlIHVzZXIgZGlkbid0IHBhc3MgYSB2YWx1ZSBzZWxmLndhcm5pbmdzIHdpbGwKICAgICAgICAgICAgIyBiZSBOb25lLiBUaGlzIG1lYW5zIHRoYXQgdGhlIGJlaGF2aW9yIGlzIHVuY2hhbmdlZAogICAgICAgICAgICAjIGFuZCBkZXBlbmRzIG9uIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIC1XLgogICAgICAgICAgICBzZWxmLndhcm5pbmdzID0gd2FybmluZ3MKICAgICAgICBzZWxmLmRlZmF1bHRUZXN0ID0gZGVmYXVsdFRlc3QKICAgICAgICBzZWxmLnRlc3RSdW5uZXIgPSB0ZXN0UnVubmVyCiAgICAgICAgc2VsZi50ZXN0TG9hZGVyID0gdGVzdExvYWRlcgogICAgICAgIHNlbGYucHJvZ05hbWUgPSBvcy5wYXRoLmJhc2VuYW1lKGFyZ3ZbMF0pCiAgICAgICAgc2VsZi5wYXJzZUFyZ3MoYXJndikKICAgICAgICBzZWxmLnJ1blRlc3RzKCkKCiAgICBkZWYgdXNhZ2VFeGl0KHNlbGYsIG1zZz1Ob25lKToKICAgICAgICBpZiBtc2c6CiAgICAgICAgICAgIHByaW50KG1zZykKICAgICAgICB1c2FnZSA9IHsncHJvZ05hbWUnOiBzZWxmLnByb2dOYW1lLCAnY2F0Y2hicmVhayc6ICcnLCAnZmFpbGZhc3QnOiAnJywKICAgICAgICAgICAgICAgICAnYnVmZmVyJzogJyd9CiAgICAgICAgaWYgc2VsZi5mYWlsZmFzdCAhPSBGYWxzZToKICAgICAgICAgICAgdXNhZ2VbJ2ZhaWxmYXN0J10gPSBGQUlMRkFTVAogICAgICAgIGlmIHNlbGYuY2F0Y2hicmVhayAhPSBGYWxzZToKICAgICAgICAgICAgdXNhZ2VbJ2NhdGNoYnJlYWsnXSA9IENBVENIQlJFQUsKICAgICAgICBpZiBzZWxmLmJ1ZmZlciAhPSBGYWxzZToKICAgICAgICAgICAgdXNhZ2VbJ2J1ZmZlciddID0gQlVGRkVST1VUUFVUCiAgICAgICAgcHJpbnQoc2VsZi5VU0FHRSAlIHVzYWdlKQogICAgICAgIHN5cy5leGl0KDIpCgogICAgZGVmIHBhcnNlQXJncyhzZWxmLCBhcmd2KToKICAgICAgICBpZiAoKGxlbihhcmd2KSA+IDEgYW5kIGFyZ3ZbMV0ubG93ZXIoKSA9PSAnZGlzY292ZXInKSBvcgogICAgICAgICAgICAobGVuKGFyZ3YpID09IDEgYW5kIHNlbGYubW9kdWxlIGlzIE5vbmUpKToKICAgICAgICAgICAgc2VsZi5fZG9fZGlzY292ZXJ5KGFyZ3ZbMjpdKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgcGFyc2VyID0gc2VsZi5fZ2V0T3B0UGFyc2VyKCkKICAgICAgICBvcHRpb25zLCBhcmdzID0gcGFyc2VyLnBhcnNlX2FyZ3MoYXJndlsxOl0pCiAgICAgICAgc2VsZi5fc2V0QXR0cmlidXRlc0Zyb21PcHRpb25zKG9wdGlvbnMpCgogICAgICAgIGlmIGxlbihhcmdzKSA9PSAwIGFuZCBzZWxmLm1vZHVsZSBpcyBOb25lOgogICAgICAgICAgICAjIHRoaXMgYWxsb3dzICJweXRob24gLW0gdW5pdHRlc3QgLXYiIHRvIHN0aWxsIHdvcmsgZm9yCiAgICAgICAgICAgICMgdGVzdCBkaXNjb3ZlcnkuIFRoaXMgbWVhbnMgLWMgLyAtYiAvIC12IC8gLWYgb3B0aW9ucyB3aWxsCiAgICAgICAgICAgICMgYmUgaGFuZGxlZCB0d2ljZSwgd2hpY2ggaXMgaGFybWxlc3MgYnV0IG5vdCBpZGVhbC4KICAgICAgICAgICAgc2VsZi5fZG9fZGlzY292ZXJ5KGFyZ3ZbMTpdKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgbGVuKGFyZ3MpID09IDAgYW5kIHNlbGYuZGVmYXVsdFRlc3QgaXMgTm9uZToKICAgICAgICAgICAgIyBjcmVhdGVUZXN0cyB3aWxsIGxvYWQgdGVzdHMgZnJvbSBzZWxmLm1vZHVsZQogICAgICAgICAgICBzZWxmLnRlc3ROYW1lcyA9IE5vbmUKICAgICAgICBlbGlmIGxlbihhcmdzKSA+IDA6CiAgICAgICAgICAgIHNlbGYudGVzdE5hbWVzID0gX2NvbnZlcnRfbmFtZXMoYXJncykKICAgICAgICAgICAgaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgICAgICAgICAgICAgICMgdG8gc3VwcG9ydCBweXRob24gLW0gdW5pdHRlc3QgLi4uCiAgICAgICAgICAgICAgICBzZWxmLm1vZHVsZSA9IE5vbmUKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnRlc3ROYW1lcyA9IChzZWxmLmRlZmF1bHRUZXN0LCkKICAgICAgICBzZWxmLmNyZWF0ZVRlc3RzKCkKCiAgICBkZWYgY3JlYXRlVGVzdHMoc2VsZik6CiAgICAgICAgaWYgc2VsZi50ZXN0TmFtZXMgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi50ZXN0ID0gc2VsZi50ZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21Nb2R1bGUoc2VsZi5tb2R1bGUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi50ZXN0ID0gc2VsZi50ZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhzZWxmLnRlc3ROYW1lcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1vZHVsZSkKCiAgICBkZWYgX2dldE9wdFBhcnNlcihzZWxmKToKICAgICAgICBwYXJzZXIgPSBvcHRwYXJzZS5PcHRpb25QYXJzZXIoKQogICAgICAgIHBhcnNlci5wcm9nID0gc2VsZi5wcm9nTmFtZQogICAgICAgIHBhcnNlci5hZGRfb3B0aW9uKCctdicsICctLXZlcmJvc2UnLCBkZXN0PSd2ZXJib3NlJywgZGVmYXVsdD1GYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSdWZXJib3NlIG91dHB1dCcsIGFjdGlvbj0nc3RvcmVfdHJ1ZScpCiAgICAgICAgcGFyc2VyLmFkZF9vcHRpb24oJy1xJywgJy0tcXVpZXQnLCBkZXN0PSdxdWlldCcsIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nUXVpZXQgb3V0cHV0JywgYWN0aW9uPSdzdG9yZV90cnVlJykKCiAgICAgICAgaWYgc2VsZi5mYWlsZmFzdCAhPSBGYWxzZToKICAgICAgICAgICAgcGFyc2VyLmFkZF9vcHRpb24oJy1mJywgJy0tZmFpbGZhc3QnLCBkZXN0PSdmYWlsZmFzdCcsIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9J1N0b3Agb24gZmlyc3QgZmFpbCBvciBlcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj0nc3RvcmVfdHJ1ZScpCiAgICAgICAgaWYgc2VsZi5jYXRjaGJyZWFrICE9IEZhbHNlOgogICAgICAgICAgICBwYXJzZXIuYWRkX29wdGlvbignLWMnLCAnLS1jYXRjaCcsIGRlc3Q9J2NhdGNoYnJlYWsnLCBkZWZhdWx0PUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSdDYXRjaCBjdHJsLUMgYW5kIGRpc3BsYXkgcmVzdWx0cyBzbyBmYXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249J3N0b3JlX3RydWUnKQogICAgICAgIGlmIHNlbGYuYnVmZmVyICE9IEZhbHNlOgogICAgICAgICAgICBwYXJzZXIuYWRkX29wdGlvbignLWInLCAnLS1idWZmZXInLCBkZXN0PSdidWZmZXInLCBkZWZhdWx0PUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSdCdWZmZXIgc3Rkb3V0IGFuZCBzdGRlcnIgZHVyaW5nIHRlc3RzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPSdzdG9yZV90cnVlJykKICAgICAgICByZXR1cm4gcGFyc2VyCgogICAgZGVmIF9zZXRBdHRyaWJ1dGVzRnJvbU9wdGlvbnMoc2VsZiwgb3B0aW9ucyk6CiAgICAgICAgIyBvbmx5IHNldCBvcHRpb25zIGZyb20gdGhlIHBhcnNpbmcgaGVyZQogICAgICAgICMgaWYgdGhleSB3ZXJlbid0IHNldCBleHBsaWNpdGx5IGluIHRoZSBjb25zdHJ1Y3RvcgogICAgICAgIGlmIHNlbGYuZmFpbGZhc3QgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5mYWlsZmFzdCA9IG9wdGlvbnMuZmFpbGZhc3QKICAgICAgICBpZiBzZWxmLmNhdGNoYnJlYWsgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5jYXRjaGJyZWFrID0gb3B0aW9ucy5jYXRjaGJyZWFrCiAgICAgICAgaWYgc2VsZi5idWZmZXIgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5idWZmZXIgPSBvcHRpb25zLmJ1ZmZlcgoKICAgICAgICBpZiBvcHRpb25zLnZlcmJvc2U6CiAgICAgICAgICAgIHNlbGYudmVyYm9zaXR5ID0gMgogICAgICAgIGVsaWYgb3B0aW9ucy5xdWlldDoKICAgICAgICAgICAgc2VsZi52ZXJib3NpdHkgPSAwCgogICAgZGVmIF9hZGREaXNjb3ZlcnlPcHRpb25zKHNlbGYsIHBhcnNlcik6CiAgICAgICAgcGFyc2VyLmFkZF9vcHRpb24oJy1zJywgJy0tc3RhcnQtZGlyZWN0b3J5JywgZGVzdD0nc3RhcnQnLCBkZWZhdWx0PScuJywKICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJEaXJlY3RvcnkgdG8gc3RhcnQgZGlzY292ZXJ5ICgnLicgZGVmYXVsdCkiKQogICAgICAgIHBhcnNlci5hZGRfb3B0aW9uKCctcCcsICctLXBhdHRlcm4nLCBkZXN0PSdwYXR0ZXJuJywgZGVmYXVsdD0ndGVzdCoucHknLAogICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9IlBhdHRlcm4gdG8gbWF0Y2ggdGVzdHMgKCd0ZXN0Ki5weScgZGVmYXVsdCkiKQogICAgICAgIHBhcnNlci5hZGRfb3B0aW9uKCctdCcsICctLXRvcC1sZXZlbC1kaXJlY3RvcnknLCBkZXN0PSd0b3AnLCBkZWZhdWx0PU5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nVG9wIGxldmVsIGRpcmVjdG9yeSBvZiBwcm9qZWN0IChkZWZhdWx0cyB0byBzdGFydCBkaXJlY3RvcnkpJykKCiAgICBkZWYgX2RvX2Rpc2NvdmVyeShzZWxmLCBhcmd2LCBMb2FkZXI9bG9hZGVyLlRlc3RMb2FkZXIpOgogICAgICAgICMgaGFuZGxlIGNvbW1hbmQgbGluZSBhcmdzIGZvciB0ZXN0IGRpc2NvdmVyeQogICAgICAgIHNlbGYucHJvZ05hbWUgPSAnJXMgZGlzY292ZXInICUgc2VsZi5wcm9nTmFtZQogICAgICAgIHBhcnNlciA9IHNlbGYuX2dldE9wdFBhcnNlcigpCiAgICAgICAgc2VsZi5fYWRkRGlzY292ZXJ5T3B0aW9ucyhwYXJzZXIpCgogICAgICAgIG9wdGlvbnMsIGFyZ3MgPSBwYXJzZXIucGFyc2VfYXJncyhhcmd2KQogICAgICAgIGlmIGxlbihhcmdzKSA+IDM6CiAgICAgICAgICAgIHNlbGYudXNhZ2VFeGl0KCkKCiAgICAgICAgZm9yIG5hbWUsIHZhbHVlIGluIHppcCgoJ3N0YXJ0JywgJ3BhdHRlcm4nLCAndG9wJyksIGFyZ3MpOgogICAgICAgICAgICBzZXRhdHRyKG9wdGlvbnMsIG5hbWUsIHZhbHVlKQoKICAgICAgICBzZWxmLl9zZXRBdHRyaWJ1dGVzRnJvbU9wdGlvbnMob3B0aW9ucykKCiAgICAgICAgc3RhcnRfZGlyID0gb3B0aW9ucy5zdGFydAogICAgICAgIHBhdHRlcm4gPSBvcHRpb25zLnBhdHRlcm4KICAgICAgICB0b3BfbGV2ZWxfZGlyID0gb3B0aW9ucy50b3AKCiAgICAgICAgbG9hZGVyID0gTG9hZGVyKCkKICAgICAgICBzZWxmLnRlc3QgPSBsb2FkZXIuZGlzY292ZXIoc3RhcnRfZGlyLCBwYXR0ZXJuLCB0b3BfbGV2ZWxfZGlyKQoKICAgIGRlZiBydW5UZXN0cyhzZWxmKToKICAgICAgICBpZiBzZWxmLmNhdGNoYnJlYWs6CiAgICAgICAgICAgIGluc3RhbGxIYW5kbGVyKCkKICAgICAgICBpZiBzZWxmLnRlc3RSdW5uZXIgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi50ZXN0UnVubmVyID0gcnVubmVyLlRleHRUZXN0UnVubmVyCiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLnRlc3RSdW5uZXIsIHR5cGUpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB0ZXN0UnVubmVyID0gc2VsZi50ZXN0UnVubmVyKHZlcmJvc2l0eT1zZWxmLnZlcmJvc2l0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGZhc3Q9c2VsZi5mYWlsZmFzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyPXNlbGYuYnVmZmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz1zZWxmLndhcm5pbmdzKQogICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAgICAgIyBkaWRuJ3QgYWNjZXB0IHRoZSB2ZXJib3NpdHksIGJ1ZmZlciBvciBmYWlsZmFzdCBhcmd1bWVudHMKICAgICAgICAgICAgICAgIHRlc3RSdW5uZXIgPSBzZWxmLnRlc3RSdW5uZXIoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgaXQgaXMgYXNzdW1lZCB0byBiZSBhIFRlc3RSdW5uZXIgaW5zdGFuY2UKICAgICAgICAgICAgdGVzdFJ1bm5lciA9IHNlbGYudGVzdFJ1bm5lcgogICAgICAgIHNlbGYucmVzdWx0ID0gdGVzdFJ1bm5lci5ydW4oc2VsZi50ZXN0KQogICAgICAgIGlmIHNlbGYuZXhpdDoKICAgICAgICAgICAgc3lzLmV4aXQobm90IHNlbGYucmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkKCm1haW4gPSBUZXN0UHJvZ3JhbQo=',
'/Lib/unittest/test/support.py':'aW1wb3J0IHVuaXR0ZXN0DQoNCg0KY2xhc3MgVGVzdEVxdWFsaXR5KG9iamVjdCk6DQogICAgIiIiVXNlZCBhcyBhIG1peGluIGZvciBUZXN0Q2FzZSIiIg0KDQogICAgIyBDaGVjayBmb3IgYSB2YWxpZCBfX2VxX18gaW1wbGVtZW50YXRpb24NCiAgICBkZWYgdGVzdF9lcShzZWxmKToNCiAgICAgICAgZm9yIG9ial8xLCBvYmpfMiBpbiBzZWxmLmVxX3BhaXJzOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvYmpfMSwgb2JqXzIpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG9ial8yLCBvYmpfMSkNCg0KICAgICMgQ2hlY2sgZm9yIGEgdmFsaWQgX19uZV9fIGltcGxlbWVudGF0aW9uDQogICAgZGVmIHRlc3RfbmUoc2VsZik6DQogICAgICAgIGZvciBvYmpfMSwgb2JqXzIgaW4gc2VsZi5uZV9wYWlyczoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwob2JqXzEsIG9ial8yKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChvYmpfMiwgb2JqXzEpDQoNCmNsYXNzIFRlc3RIYXNoaW5nKG9iamVjdCk6DQogICAgIiIiVXNlZCBhcyBhIG1peGluIGZvciBUZXN0Q2FzZSIiIg0KDQogICAgIyBDaGVjayBmb3IgYSB2YWxpZCBfX2hhc2hfXyBpbXBsZW1lbnRhdGlvbg0KICAgIGRlZiB0ZXN0X2hhc2goc2VsZik6DQogICAgICAgIGZvciBvYmpfMSwgb2JqXzIgaW4gc2VsZi5lcV9wYWlyczoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBpZiBub3QgaGFzaChvYmpfMSkgPT0gaGFzaChvYmpfMik6DQogICAgICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgiJXIgYW5kICVyIGRvIG5vdCBoYXNoIGVxdWFsIiAlIChvYmpfMSwgb2JqXzIpKQ0KICAgICAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgICAgIHJhaXNlDQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCJQcm9ibGVtIGhhc2hpbmcgJXIgYW5kICVyOiAlcyIgJSAob2JqXzEsIG9ial8yLCBlKSkNCg0KICAgICAgICBmb3Igb2JqXzEsIG9ial8yIGluIHNlbGYubmVfcGFpcnM6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaWYgaGFzaChvYmpfMSkgPT0gaGFzaChvYmpfMik6DQogICAgICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgiJXMgYW5kICVzIGhhc2ggZXF1YWwsIGJ1dCBzaG91bGRuJ3QiICUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvYmpfMSwgb2JqXzIpKQ0KICAgICAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgICAgIHJhaXNlDQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCJQcm9ibGVtIGhhc2hpbmcgJXMgYW5kICVzOiAlcyIgJSAob2JqXzEsIG9ial8yLCBlKSkNCg0KDQpjbGFzcyBMb2dnaW5nUmVzdWx0KHVuaXR0ZXN0LlRlc3RSZXN1bHQpOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsb2cpOg0KICAgICAgICBzZWxmLl9ldmVudHMgPSBsb2cNCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpDQoNCiAgICBkZWYgc3RhcnRUZXN0KHNlbGYsIHRlc3QpOg0KICAgICAgICBzZWxmLl9ldmVudHMuYXBwZW5kKCdzdGFydFRlc3QnKQ0KICAgICAgICBzdXBlcigpLnN0YXJ0VGVzdCh0ZXN0KQ0KDQogICAgZGVmIHN0YXJ0VGVzdFJ1bihzZWxmKToNCiAgICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZCgnc3RhcnRUZXN0UnVuJykNCiAgICAgICAgc3VwZXIoTG9nZ2luZ1Jlc3VsdCwgc2VsZikuc3RhcnRUZXN0UnVuKCkNCg0KICAgIGRlZiBzdG9wVGVzdChzZWxmLCB0ZXN0KToNCiAgICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZCgnc3RvcFRlc3QnKQ0KICAgICAgICBzdXBlcigpLnN0b3BUZXN0KHRlc3QpDQoNCiAgICBkZWYgc3RvcFRlc3RSdW4oc2VsZik6DQogICAgICAgIHNlbGYuX2V2ZW50cy5hcHBlbmQoJ3N0b3BUZXN0UnVuJykNCiAgICAgICAgc3VwZXIoTG9nZ2luZ1Jlc3VsdCwgc2VsZikuc3RvcFRlc3RSdW4oKQ0KDQogICAgZGVmIGFkZEZhaWx1cmUoc2VsZiwgKmFyZ3MpOg0KICAgICAgICBzZWxmLl9ldmVudHMuYXBwZW5kKCdhZGRGYWlsdXJlJykNCiAgICAgICAgc3VwZXIoKS5hZGRGYWlsdXJlKCphcmdzKQ0KDQogICAgZGVmIGFkZFN1Y2Nlc3Moc2VsZiwgKmFyZ3MpOg0KICAgICAgICBzZWxmLl9ldmVudHMuYXBwZW5kKCdhZGRTdWNjZXNzJykNCiAgICAgICAgc3VwZXIoTG9nZ2luZ1Jlc3VsdCwgc2VsZikuYWRkU3VjY2VzcygqYXJncykNCg0KICAgIGRlZiBhZGRFcnJvcihzZWxmLCAqYXJncyk6DQogICAgICAgIHNlbGYuX2V2ZW50cy5hcHBlbmQoJ2FkZEVycm9yJykNCiAgICAgICAgc3VwZXIoKS5hZGRFcnJvcigqYXJncykNCg0KICAgIGRlZiBhZGRTa2lwKHNlbGYsICphcmdzKToNCiAgICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZCgnYWRkU2tpcCcpDQogICAgICAgIHN1cGVyKExvZ2dpbmdSZXN1bHQsIHNlbGYpLmFkZFNraXAoKmFyZ3MpDQoNCiAgICBkZWYgYWRkRXhwZWN0ZWRGYWlsdXJlKHNlbGYsICphcmdzKToNCiAgICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZCgnYWRkRXhwZWN0ZWRGYWlsdXJlJykNCiAgICAgICAgc3VwZXIoTG9nZ2luZ1Jlc3VsdCwgc2VsZikuYWRkRXhwZWN0ZWRGYWlsdXJlKCphcmdzKQ0KDQogICAgZGVmIGFkZFVuZXhwZWN0ZWRTdWNjZXNzKHNlbGYsICphcmdzKToNCiAgICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZCgnYWRkVW5leHBlY3RlZFN1Y2Nlc3MnKQ0KICAgICAgICBzdXBlcihMb2dnaW5nUmVzdWx0LCBzZWxmKS5hZGRVbmV4cGVjdGVkU3VjY2VzcygqYXJncykNCg0KDQpjbGFzcyBSZXN1bHRXaXRoTm9TdGFydFRlc3RSdW5TdG9wVGVzdFJ1bihvYmplY3QpOg0KICAgICIiIkFuIG9iamVjdCBob25vdXJpbmcgVGVzdFJlc3VsdCBiZWZvcmUgc3RhcnRUZXN0UnVuL3N0b3BUZXN0UnVuLiIiIg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBzZWxmLmZhaWx1cmVzID0gW10NCiAgICAgICAgc2VsZi5lcnJvcnMgPSBbXQ0KICAgICAgICBzZWxmLnRlc3RzUnVuID0gMA0KICAgICAgICBzZWxmLnNraXBwZWQgPSBbXQ0KICAgICAgICBzZWxmLmV4cGVjdGVkRmFpbHVyZXMgPSBbXQ0KICAgICAgICBzZWxmLnVuZXhwZWN0ZWRTdWNjZXNzZXMgPSBbXQ0KICAgICAgICBzZWxmLnNob3VsZFN0b3AgPSBGYWxzZQ0KDQogICAgZGVmIHN0YXJ0VGVzdChzZWxmLCB0ZXN0KToNCiAgICAgICAgcGFzcw0KDQogICAgZGVmIHN0b3BUZXN0KHNlbGYsIHRlc3QpOg0KICAgICAgICBwYXNzDQoNCiAgICBkZWYgYWRkRXJyb3Ioc2VsZiwgdGVzdCk6DQogICAgICAgIHBhc3MNCg0KICAgIGRlZiBhZGRGYWlsdXJlKHNlbGYsIHRlc3QpOg0KICAgICAgICBwYXNzDQoNCiAgICBkZWYgYWRkU3VjY2VzcyhzZWxmLCB0ZXN0KToNCiAgICAgICAgcGFzcw0KDQogICAgZGVmIHdhc1N1Y2Nlc3NmdWwoc2VsZik6DQogICAgICAgIHJldHVybiBUcnVlDQo=',
'/Lib/unittest/test/test_case.py':'aW1wb3J0IGRpZmZsaWINCmltcG9ydCBwcHJpbnQNCmltcG9ydCBwaWNrbGUNCmltcG9ydCByZQ0KaW1wb3J0IHN5cw0KaW1wb3J0IHdhcm5pbmdzDQppbXBvcnQgd2Vha3JlZg0KaW1wb3J0IGluc3BlY3QNCg0KZnJvbSBjb3B5IGltcG9ydCBkZWVwY29weQ0KZnJvbSB0ZXN0IGltcG9ydCBzdXBwb3J0DQoNCmltcG9ydCB1bml0dGVzdA0KDQpmcm9tIC5zdXBwb3J0IGltcG9ydCAoDQogICAgVGVzdEVxdWFsaXR5LCBUZXN0SGFzaGluZywgTG9nZ2luZ1Jlc3VsdCwNCiAgICBSZXN1bHRXaXRoTm9TdGFydFRlc3RSdW5TdG9wVGVzdFJ1bg0KKQ0KDQoNCmNsYXNzIFRlc3Qob2JqZWN0KToNCiAgICAiS2VlcCB0aGVzZSBUZXN0Q2FzZSBjbGFzc2VzIG91dCBvZiB0aGUgbWFpbiBuYW1lc3BhY2UiDQoNCiAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICBkZWYgcnVuVGVzdChzZWxmKTogcGFzcw0KICAgICAgICBkZWYgdGVzdDEoc2VsZik6IHBhc3MNCg0KICAgIGNsYXNzIEJhcihGb28pOg0KICAgICAgICBkZWYgdGVzdDIoc2VsZik6IHBhc3MNCg0KICAgIGNsYXNzIExvZ2dpbmdUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICIiIkEgdGVzdCBjYXNlIHdoaWNoIGxvZ3MgaXRzIGNhbGxzLiIiIg0KDQogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBldmVudHMpOg0KICAgICAgICAgICAgc3VwZXIoVGVzdC5Mb2dnaW5nVGVzdENhc2UsIHNlbGYpLl9faW5pdF9fKCd0ZXN0JykNCiAgICAgICAgICAgIHNlbGYuZXZlbnRzID0gZXZlbnRzDQoNCiAgICAgICAgZGVmIHNldFVwKHNlbGYpOg0KICAgICAgICAgICAgc2VsZi5ldmVudHMuYXBwZW5kKCdzZXRVcCcpDQoNCiAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICBzZWxmLmV2ZW50cy5hcHBlbmQoJ3Rlc3QnKQ0KDQogICAgICAgIGRlZiB0ZWFyRG93bihzZWxmKToNCiAgICAgICAgICAgIHNlbGYuZXZlbnRzLmFwcGVuZCgndGVhckRvd24nKQ0KDQoNCmNsYXNzIFRlc3RfVGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UsIFRlc3RFcXVhbGl0eSwgVGVzdEhhc2hpbmcpOg0KDQogICAgIyMjIFNldCB1cCBhdHRyaWJ1dGVzIHVzZWQgYnkgaW5oZXJpdGVkIHRlc3RzDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgIyBVc2VkIGJ5IFRlc3RIYXNoaW5nLnRlc3RfaGFzaCBhbmQgVGVzdEVxdWFsaXR5LnRlc3RfZXENCiAgICBlcV9wYWlycyA9IFsoVGVzdC5Gb28oJ3Rlc3QxJyksIFRlc3QuRm9vKCd0ZXN0MScpKV0NCg0KICAgICMgVXNlZCBieSBUZXN0RXF1YWxpdHkudGVzdF9uZQ0KICAgIG5lX3BhaXJzID0gWyhUZXN0LkZvbygndGVzdDEnKSwgVGVzdC5Gb28oJ3J1blRlc3QnKSksDQogICAgICAgICAgICAgICAgKFRlc3QuRm9vKCd0ZXN0MScpLCBUZXN0LkJhcigndGVzdDEnKSksDQogICAgICAgICAgICAgICAgKFRlc3QuRm9vKCd0ZXN0MScpLCBUZXN0LkJhcigndGVzdDInKSldDQoNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyMjIC9TZXQgdXAgYXR0cmlidXRlcyB1c2VkIGJ5IGluaGVyaXRlZCB0ZXN0cw0KDQoNCiAgICAjICJjbGFzcyBUZXN0Q2FzZShbbWV0aG9kTmFtZV0pIg0KICAgICMgLi4uDQogICAgIyAiRWFjaCBpbnN0YW5jZSBvZiBUZXN0Q2FzZSB3aWxsIHJ1biBhIHNpbmdsZSB0ZXN0IG1ldGhvZDogdGhlDQogICAgIyBtZXRob2QgbmFtZWQgbWV0aG9kTmFtZS4iDQogICAgIyAuLi4NCiAgICAjICJtZXRob2ROYW1lIGRlZmF1bHRzIHRvICJydW5UZXN0Ii4iDQogICAgIw0KICAgICMgTWFrZSBzdXJlIGl0IHJlYWxseSBpcyBvcHRpb25hbCwgYW5kIHRoYXQgaXQgZGVmYXVsdHMgdG8gdGhlIHByb3Blcg0KICAgICMgdGhpbmcuDQogICAgZGVmIHRlc3RfaW5pdF9fbm9fdGVzdF9uYW1lKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW5UZXN0KHNlbGYpOiByYWlzZSBNeUV4Y2VwdGlvbigpDQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKTogcGFzcw0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoVGVzdCgpLmlkKClbLTEzOl0sICcuVGVzdC5ydW5UZXN0JykNCg0KICAgICAgICAjIHRlc3QgdGhhdCBUZXN0Q2FzZSBjYW4gYmUgaW5zdGFudGlhdGVkIHdpdGggbm8gYXJncw0KICAgICAgICAjIHByaW1hcmlseSBmb3IgdXNlIGF0IHRoZSBpbnRlcmFjdGl2ZSBpbnRlcnByZXRlcg0KICAgICAgICB0ZXN0ID0gdW5pdHRlc3QuVGVzdENhc2UoKQ0KICAgICAgICB0ZXN0LmFzc2VydEVxdWFsKDMsIDMpDQogICAgICAgIHdpdGggdGVzdC5hc3NlcnRSYWlzZXModGVzdC5mYWlsdXJlRXhjZXB0aW9uKToNCiAgICAgICAgICAgIHRlc3QuYXNzZXJ0RXF1YWwoMywgMikNCg0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yKToNCiAgICAgICAgICAgIHRlc3QucnVuKCkNCg0KICAgICMgImNsYXNzIFRlc3RDYXNlKFttZXRob2ROYW1lXSkiDQogICAgIyAuLi4NCiAgICAjICJFYWNoIGluc3RhbmNlIG9mIFRlc3RDYXNlIHdpbGwgcnVuIGEgc2luZ2xlIHRlc3QgbWV0aG9kOiB0aGUNCiAgICAjIG1ldGhvZCBuYW1lZCBtZXRob2ROYW1lLiINCiAgICBkZWYgdGVzdF9pbml0X190ZXN0X25hbWVfX3ZhbGlkKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW5UZXN0KHNlbGYpOiByYWlzZSBNeUV4Y2VwdGlvbigpDQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKTogcGFzcw0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoVGVzdCgndGVzdCcpLmlkKClbLTEwOl0sICcuVGVzdC50ZXN0JykNCg0KICAgICMgImNsYXNzIFRlc3RDYXNlKFttZXRob2ROYW1lXSkiDQogICAgIyAuLi4NCiAgICAjICJFYWNoIGluc3RhbmNlIG9mIFRlc3RDYXNlIHdpbGwgcnVuIGEgc2luZ2xlIHRlc3QgbWV0aG9kOiB0aGUNCiAgICAjIG1ldGhvZCBuYW1lZCBtZXRob2ROYW1lLiINCiAgICBkZWYgdGVzdF9pbml0X190ZXN0X25hbWVfX2ludmFsaWQoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHJ1blRlc3Qoc2VsZik6IHJhaXNlIE15RXhjZXB0aW9uKCkNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOiBwYXNzDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgVGVzdCgndGVzdGZvbycpDQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJGYWlsZWQgdG8gcmFpc2UgVmFsdWVFcnJvciIpDQoNCiAgICAjICJSZXR1cm4gdGhlIG51bWJlciBvZiB0ZXN0cyByZXByZXNlbnRlZCBieSB0aGUgdGhpcyB0ZXN0IG9iamVjdC4gRm9yDQogICAgIyBUZXN0Q2FzZSBpbnN0YW5jZXMsIHRoaXMgd2lsbCBhbHdheXMgYmUgMSINCiAgICBkZWYgdGVzdF9jb3VudFRlc3RDYXNlcyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOiBwYXNzDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28oJ3Rlc3QnKS5jb3VudFRlc3RDYXNlcygpLCAxKQ0KDQogICAgIyAiUmV0dXJuIHRoZSBkZWZhdWx0IHR5cGUgb2YgdGVzdCByZXN1bHQgb2JqZWN0IHRvIGJlIHVzZWQgdG8gcnVuIHRoaXMNCiAgICAjIHRlc3QuIEZvciBUZXN0Q2FzZSBpbnN0YW5jZXMsIHRoaXMgd2lsbCBhbHdheXMgYmUNCiAgICAjIHVuaXR0ZXN0LlRlc3RSZXN1bHQ7ICBzdWJjbGFzc2VzIG9mIFRlc3RDYXNlIHNob3VsZA0KICAgICMgb3ZlcnJpZGUgdGhpcyBhcyBuZWNlc3NhcnkuIg0KICAgIGRlZiB0ZXN0X2RlZmF1bHRUZXN0UmVzdWx0KHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHJ1blRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHJlc3VsdCA9IEZvbygpLmRlZmF1bHRUZXN0UmVzdWx0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCh0eXBlKHJlc3VsdCksIHVuaXR0ZXN0LlRlc3RSZXN1bHQpDQoNCiAgICAjICJXaGVuIGEgc2V0VXAoKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlIHRlc3QgcnVubmVyIHdpbGwgcnVuIHRoYXQgbWV0aG9kDQogICAgIyBwcmlvciB0byBlYWNoIHRlc3QuIExpa2V3aXNlLCBpZiBhIHRlYXJEb3duKCkgbWV0aG9kIGlzIGRlZmluZWQsIHRoZQ0KICAgICMgdGVzdCBydW5uZXIgd2lsbCBpbnZva2UgdGhhdCBtZXRob2QgYWZ0ZXIgZWFjaCB0ZXN0LiBJbiB0aGUgZXhhbXBsZSwNCiAgICAjIHNldFVwKCkgd2FzIHVzZWQgdG8gY3JlYXRlIGEgZnJlc2ggc2VxdWVuY2UgZm9yIGVhY2ggdGVzdC4iDQogICAgIw0KICAgICMgTWFrZSBzdXJlIHRoZSBwcm9wZXIgY2FsbCBvcmRlciBpcyBtYWludGFpbmVkLCBldmVuIGlmIHNldFVwKCkgcmFpc2VzDQogICAgIyBhbiBleGNlcHRpb24uDQogICAgZGVmIHRlc3RfcnVuX2NhbGxfb3JkZXJfX2Vycm9yX2luX3NldFVwKHNlbGYpOg0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICByZXN1bHQgPSBMb2dnaW5nUmVzdWx0KGV2ZW50cykNCg0KICAgICAgICBjbGFzcyBGb28oVGVzdC5Mb2dnaW5nVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHNldFVwKHNlbGYpOg0KICAgICAgICAgICAgICAgIHN1cGVyKEZvbywgc2VsZikuc2V0VXAoKQ0KICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigncmFpc2VkIGJ5IEZvby5zZXRVcCcpDQoNCiAgICAgICAgRm9vKGV2ZW50cykucnVuKHJlc3VsdCkNCiAgICAgICAgZXhwZWN0ZWQgPSBbJ3N0YXJ0VGVzdCcsICdzZXRVcCcsICdhZGRFcnJvcicsICdzdG9wVGVzdCddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldpdGggYSB0ZW1wb3JhcnkgcmVzdWx0IHN0b3BUZXN0UnVuIGlzIGNhbGxlZCB3aGVuIHNldFVwIGVycm9ycy4NCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fc2V0VXBfZGVmYXVsdF9yZXN1bHQoc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQoNCiAgICAgICAgY2xhc3MgRm9vKFRlc3QuTG9nZ2luZ1Rlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBkZWZhdWx0VGVzdFJlc3VsdChzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTG9nZ2luZ1Jlc3VsdChzZWxmLmV2ZW50cykNCg0KICAgICAgICAgICAgZGVmIHNldFVwKHNlbGYpOg0KICAgICAgICAgICAgICAgIHN1cGVyKEZvbywgc2VsZikuc2V0VXAoKQ0KICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigncmFpc2VkIGJ5IEZvby5zZXRVcCcpDQoNCiAgICAgICAgRm9vKGV2ZW50cykucnVuKCkNCiAgICAgICAgZXhwZWN0ZWQgPSBbJ3N0YXJ0VGVzdFJ1bicsICdzdGFydFRlc3QnLCAnc2V0VXAnLCAnYWRkRXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAnc3RvcFRlc3QnLCAnc3RvcFRlc3RSdW4nXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgZXhwZWN0ZWQpDQoNCiAgICAjICJXaGVuIGEgc2V0VXAoKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlIHRlc3QgcnVubmVyIHdpbGwgcnVuIHRoYXQgbWV0aG9kDQogICAgIyBwcmlvciB0byBlYWNoIHRlc3QuIExpa2V3aXNlLCBpZiBhIHRlYXJEb3duKCkgbWV0aG9kIGlzIGRlZmluZWQsIHRoZQ0KICAgICMgdGVzdCBydW5uZXIgd2lsbCBpbnZva2UgdGhhdCBtZXRob2QgYWZ0ZXIgZWFjaCB0ZXN0LiBJbiB0aGUgZXhhbXBsZSwNCiAgICAjIHNldFVwKCkgd2FzIHVzZWQgdG8gY3JlYXRlIGEgZnJlc2ggc2VxdWVuY2UgZm9yIGVhY2ggdGVzdC4iDQogICAgIw0KICAgICMgTWFrZSBzdXJlIHRoZSBwcm9wZXIgY2FsbCBvcmRlciBpcyBtYWludGFpbmVkLCBldmVuIGlmIHRoZSB0ZXN0IHJhaXNlcw0KICAgICMgYW4gZXJyb3IgKGFzIG9wcG9zZWQgdG8gYSBmYWlsdXJlKS4NCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fdGVzdChzZWxmKToNCiAgICAgICAgZXZlbnRzID0gW10NCiAgICAgICAgcmVzdWx0ID0gTG9nZ2luZ1Jlc3VsdChldmVudHMpDQoNCiAgICAgICAgY2xhc3MgRm9vKFRlc3QuTG9nZ2luZ1Rlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHN1cGVyKEZvbywgc2VsZikudGVzdCgpDQogICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCdyYWlzZWQgYnkgRm9vLnRlc3QnKQ0KDQogICAgICAgIGV4cGVjdGVkID0gWydzdGFydFRlc3QnLCAnc2V0VXAnLCAndGVzdCcsICd0ZWFyRG93bicsDQogICAgICAgICAgICAgICAgICAgICdhZGRFcnJvcicsICdzdG9wVGVzdCddDQogICAgICAgIEZvbyhldmVudHMpLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldpdGggYSBkZWZhdWx0IHJlc3VsdCwgYW4gZXJyb3IgaW4gdGhlIHRlc3Qgc3RpbGwgcmVzdWx0cyBpbiBzdG9wVGVzdFJ1bg0KICAgICMgYmVpbmcgY2FsbGVkLiINCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fdGVzdF9kZWZhdWx0X3Jlc3VsdChzZWxmKToNCiAgICAgICAgZXZlbnRzID0gW10NCg0KICAgICAgICBjbGFzcyBGb28oVGVzdC5Mb2dnaW5nVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIGRlZmF1bHRUZXN0UmVzdWx0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiBMb2dnaW5nUmVzdWx0KHNlbGYuZXZlbnRzKQ0KDQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBzdXBlcihGb28sIHNlbGYpLnRlc3QoKQ0KICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigncmFpc2VkIGJ5IEZvby50ZXN0JykNCg0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0UnVuJywgJ3N0YXJ0VGVzdCcsICdzZXRVcCcsICd0ZXN0JywNCiAgICAgICAgICAgICAgICAgICAgJ3RlYXJEb3duJywgJ2FkZEVycm9yJywgJ3N0b3BUZXN0JywgJ3N0b3BUZXN0UnVuJ10NCiAgICAgICAgRm9vKGV2ZW50cykucnVuKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIGV4cGVjdGVkKQ0KDQogICAgIyAiV2hlbiBhIHNldFVwKCkgbWV0aG9kIGlzIGRlZmluZWQsIHRoZSB0ZXN0IHJ1bm5lciB3aWxsIHJ1biB0aGF0IG1ldGhvZA0KICAgICMgcHJpb3IgdG8gZWFjaCB0ZXN0LiBMaWtld2lzZSwgaWYgYSB0ZWFyRG93bigpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUNCiAgICAjIHRlc3QgcnVubmVyIHdpbGwgaW52b2tlIHRoYXQgbWV0aG9kIGFmdGVyIGVhY2ggdGVzdC4gSW4gdGhlIGV4YW1wbGUsDQogICAgIyBzZXRVcCgpIHdhcyB1c2VkIHRvIGNyZWF0ZSBhIGZyZXNoIHNlcXVlbmNlIGZvciBlYWNoIHRlc3QuIg0KICAgICMNCiAgICAjIE1ha2Ugc3VyZSB0aGUgcHJvcGVyIGNhbGwgb3JkZXIgaXMgbWFpbnRhaW5lZCwgZXZlbiBpZiB0aGUgdGVzdCBzaWduYWxzDQogICAgIyBhIGZhaWx1cmUgKGFzIG9wcG9zZWQgdG8gYW4gZXJyb3IpLg0KICAgIGRlZiB0ZXN0X3J1bl9jYWxsX29yZGVyX19mYWlsdXJlX2luX3Rlc3Qoc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGNsYXNzIEZvbyhUZXN0LkxvZ2dpbmdUZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBzdXBlcihGb28sIHNlbGYpLnRlc3QoKQ0KICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgncmFpc2VkIGJ5IEZvby50ZXN0JykNCg0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLA0KICAgICAgICAgICAgICAgICAgICAnYWRkRmFpbHVyZScsICdzdG9wVGVzdCddDQogICAgICAgIEZvbyhldmVudHMpLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldoZW4gYSB0ZXN0IGZhaWxzIHdpdGggYSBkZWZhdWx0IHJlc3VsdCBzdG9wVGVzdFJ1biBpcyBzdGlsbCBjYWxsZWQuIg0KICAgIGRlZiB0ZXN0X3J1bl9jYWxsX29yZGVyX19mYWlsdXJlX2luX3Rlc3RfZGVmYXVsdF9yZXN1bHQoc2VsZik6DQoNCiAgICAgICAgY2xhc3MgRm9vKFRlc3QuTG9nZ2luZ1Rlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBkZWZhdWx0VGVzdFJlc3VsdChzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTG9nZ2luZ1Jlc3VsdChzZWxmLmV2ZW50cykNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHN1cGVyKEZvbywgc2VsZikudGVzdCgpDQogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCdyYWlzZWQgYnkgRm9vLnRlc3QnKQ0KDQogICAgICAgIGV4cGVjdGVkID0gWydzdGFydFRlc3RSdW4nLCAnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLA0KICAgICAgICAgICAgICAgICAgICAndGVhckRvd24nLCAnYWRkRmFpbHVyZScsICdzdG9wVGVzdCcsICdzdG9wVGVzdFJ1biddDQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIEZvbyhldmVudHMpLnJ1bigpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldoZW4gYSBzZXRVcCgpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUgdGVzdCBydW5uZXIgd2lsbCBydW4gdGhhdCBtZXRob2QNCiAgICAjIHByaW9yIHRvIGVhY2ggdGVzdC4gTGlrZXdpc2UsIGlmIGEgdGVhckRvd24oKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlDQogICAgIyB0ZXN0IHJ1bm5lciB3aWxsIGludm9rZSB0aGF0IG1ldGhvZCBhZnRlciBlYWNoIHRlc3QuIEluIHRoZSBleGFtcGxlLA0KICAgICMgc2V0VXAoKSB3YXMgdXNlZCB0byBjcmVhdGUgYSBmcmVzaCBzZXF1ZW5jZSBmb3IgZWFjaCB0ZXN0LiINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgdGhlIHByb3BlciBjYWxsIG9yZGVyIGlzIG1haW50YWluZWQsIGV2ZW4gaWYgdGVhckRvd24oKSByYWlzZXMNCiAgICAjIGFuIGV4Y2VwdGlvbi4NCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fdGVhckRvd24oc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGNsYXNzIEZvbyhUZXN0LkxvZ2dpbmdUZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVhckRvd24oc2VsZik6DQogICAgICAgICAgICAgICAgc3VwZXIoRm9vLCBzZWxmKS50ZWFyRG93bigpDQogICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCdyYWlzZWQgYnkgRm9vLnRlYXJEb3duJykNCg0KICAgICAgICBGb28oZXZlbnRzKS5ydW4ocmVzdWx0KQ0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLCAnYWRkRXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAnc3RvcFRlc3QnXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgZXhwZWN0ZWQpDQoNCiAgICAjICJXaGVuIHRlYXJEb3duIGVycm9ycyB3aXRoIGEgZGVmYXVsdCByZXN1bHQgc3RvcFRlc3RSdW4gaXMgc3RpbGwgY2FsbGVkLiINCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fdGVhckRvd25fZGVmYXVsdF9yZXN1bHQoc2VsZik6DQoNCiAgICAgICAgY2xhc3MgRm9vKFRlc3QuTG9nZ2luZ1Rlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBkZWZhdWx0VGVzdFJlc3VsdChzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTG9nZ2luZ1Jlc3VsdChzZWxmLmV2ZW50cykNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bihzZWxmKToNCiAgICAgICAgICAgICAgICBzdXBlcihGb28sIHNlbGYpLnRlYXJEb3duKCkNCiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoJ3JhaXNlZCBieSBGb28udGVhckRvd24nKQ0KDQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIEZvbyhldmVudHMpLnJ1bigpDQogICAgICAgIGV4cGVjdGVkID0gWydzdGFydFRlc3RSdW4nLCAnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLA0KICAgICAgICAgICAgICAgICAgICAnYWRkRXJyb3InLCAnc3RvcFRlc3QnLCAnc3RvcFRlc3RSdW4nXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgZXhwZWN0ZWQpDQoNCiAgICAjICJUZXN0Q2FzZS5ydW4oKSBzdGlsbCB3b3JrcyB3aGVuIHRoZSBkZWZhdWx0VGVzdFJlc3VsdCBpcyBhIFRlc3RSZXN1bHQNCiAgICAjIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBzdGFydFRlc3RSdW4gYW5kIHN0b3BUZXN0UnVuLg0KICAgIGRlZiB0ZXN0X3J1bl9jYWxsX29yZGVyX2RlZmF1bHRfcmVzdWx0KHNlbGYpOg0KDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgZGVmYXVsdFRlc3RSZXN1bHQoc2VsZik6DQogICAgICAgICAgICAgICAgcmV0dXJuIFJlc3VsdFdpdGhOb1N0YXJ0VGVzdFJ1blN0b3BUZXN0UnVuKCkNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBGb28oJ3Rlc3QnKS5ydW4oKQ0KDQogICAgIyAiVGhpcyBjbGFzcyBhdHRyaWJ1dGUgZ2l2ZXMgdGhlIGV4Y2VwdGlvbiByYWlzZWQgYnkgdGhlIHRlc3QoKSBtZXRob2QuDQogICAgIyBJZiBhIHRlc3QgZnJhbWV3b3JrIG5lZWRzIHRvIHVzZSBhIHNwZWNpYWxpemVkIGV4Y2VwdGlvbiwgcG9zc2libHkgdG8NCiAgICAjIGNhcnJ5IGFkZGl0aW9uYWwgaW5mb3JtYXRpb24sIGl0IG11c3Qgc3ViY2xhc3MgdGhpcyBleGNlcHRpb24gaW4NCiAgICAjIG9yZGVyIHRvIGBgcGxheSBmYWlyJycgd2l0aCB0aGUgZnJhbWV3b3JrLiAgVGhlIGluaXRpYWwgdmFsdWUgb2YgdGhpcw0KICAgICMgYXR0cmlidXRlIGlzIEFzc2VydGlvbkVycm9yIg0KICAgIGRlZiB0ZXN0X2ZhaWx1cmVFeGNlcHRpb25fX2RlZmF1bHQoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKEZvbygndGVzdCcpLmZhaWx1cmVFeGNlcHRpb24gaXMgQXNzZXJ0aW9uRXJyb3IpDQoNCiAgICAjICJUaGlzIGNsYXNzIGF0dHJpYnV0ZSBnaXZlcyB0aGUgZXhjZXB0aW9uIHJhaXNlZCBieSB0aGUgdGVzdCgpIG1ldGhvZC4NCiAgICAjIElmIGEgdGVzdCBmcmFtZXdvcmsgbmVlZHMgdG8gdXNlIGEgc3BlY2lhbGl6ZWQgZXhjZXB0aW9uLCBwb3NzaWJseSB0bw0KICAgICMgY2FycnkgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiwgaXQgbXVzdCBzdWJjbGFzcyB0aGlzIGV4Y2VwdGlvbiBpbg0KICAgICMgb3JkZXIgdG8gYGBwbGF5IGZhaXInJyB3aXRoIHRoZSBmcmFtZXdvcmsuIg0KICAgICMNCiAgICAjIE1ha2Ugc3VyZSBUZXN0Q2FzZS5ydW4oKSByZXNwZWN0cyB0aGUgZGVzaWduYXRlZCBmYWlsdXJlRXhjZXB0aW9uDQogICAgZGVmIHRlc3RfZmFpbHVyZUV4Y2VwdGlvbl9fc3ViY2xhc3NpbmdfX2V4cGxpY2l0X3JhaXNlKHNlbGYpOg0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICByZXN1bHQgPSBMb2dnaW5nUmVzdWx0KGV2ZW50cykNCg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCkNCg0KICAgICAgICAgICAgZmFpbHVyZUV4Y2VwdGlvbiA9IFJ1bnRpbWVFcnJvcg0KDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShGb28oJ3Rlc3QnKS5mYWlsdXJlRXhjZXB0aW9uIGlzIFJ1bnRpbWVFcnJvcikNCg0KDQogICAgICAgIEZvbygndGVzdCcpLnJ1bihyZXN1bHQpDQogICAgICAgIGV4cGVjdGVkID0gWydzdGFydFRlc3QnLCAnYWRkRmFpbHVyZScsICdzdG9wVGVzdCddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIlRoaXMgY2xhc3MgYXR0cmlidXRlIGdpdmVzIHRoZSBleGNlcHRpb24gcmFpc2VkIGJ5IHRoZSB0ZXN0KCkgbWV0aG9kLg0KICAgICMgSWYgYSB0ZXN0IGZyYW1ld29yayBuZWVkcyB0byB1c2UgYSBzcGVjaWFsaXplZCBleGNlcHRpb24sIHBvc3NpYmx5IHRvDQogICAgIyBjYXJyeSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLCBpdCBtdXN0IHN1YmNsYXNzIHRoaXMgZXhjZXB0aW9uIGluDQogICAgIyBvcmRlciB0byBgYHBsYXkgZmFpcicnIHdpdGggdGhlIGZyYW1ld29yay4iDQogICAgIw0KICAgICMgTWFrZSBzdXJlIFRlc3RDYXNlLnJ1bigpIHJlc3BlY3RzIHRoZSBkZXNpZ25hdGVkIGZhaWx1cmVFeGNlcHRpb24NCiAgICBkZWYgdGVzdF9mYWlsdXJlRXhjZXB0aW9uX19zdWJjbGFzc2luZ19faW1wbGljaXRfcmFpc2Uoc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBzZWxmLmZhaWwoImZvbyIpDQoNCiAgICAgICAgICAgIGZhaWx1cmVFeGNlcHRpb24gPSBSdW50aW1lRXJyb3INCg0KICAgICAgICBzZWxmLmFzc2VydFRydWUoRm9vKCd0ZXN0JykuZmFpbHVyZUV4Y2VwdGlvbiBpcyBSdW50aW1lRXJyb3IpDQoNCg0KICAgICAgICBGb28oJ3Rlc3QnKS5ydW4ocmVzdWx0KQ0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ2FkZEZhaWx1cmUnLCAnc3RvcFRlc3QnXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgZXhwZWN0ZWQpDQoNCiAgICAjICJUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdGhpbmcuIg0KICAgIGRlZiB0ZXN0X3NldFVwKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHJ1blRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgICMgLi4uIGFuZCBub3RoaW5nIHNob3VsZCBoYXBwZW4NCiAgICAgICAgRm9vKCkuc2V0VXAoKQ0KDQogICAgIyAiVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gZG9lcyBub3RoaW5nLiINCiAgICBkZWYgdGVzdF90ZWFyRG93bihzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW5UZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICAjIC4uLiBhbmQgbm90aGluZyBzaG91bGQgaGFwcGVuDQogICAgICAgIEZvbygpLnRlYXJEb3duKCkNCg0KICAgICMgIlJldHVybiBhIHN0cmluZyBpZGVudGlmeWluZyB0aGUgc3BlY2lmaWMgdGVzdCBjYXNlLiINCiAgICAjDQogICAgIyBCZWNhdXNlIG9mIHRoZSB2YWd1ZSBuYXR1cmUgb2YgdGhlIGRvY3MsIEknbSBub3QgZ29pbmcgdG8gbG9jayB0aGlzDQogICAgIyB0ZXN0IGRvd24gdG9vIG11Y2guIFJlYWxseSBhbGwgdGhhdCBjYW4gYmUgYXNzZXJ0ZWQgaXMgdGhhdCB0aGUgaWQoKQ0KICAgICMgd2lsbCBiZSBhIHN0cmluZyAoZWl0aGVyIDgtYnl0ZSBvciB1bmljb2RlIC0tIGFnYWluLCBiZWNhdXNlIHRoZSBkb2NzDQogICAgIyBqdXN0IHNheSAic3RyaW5nIikNCiAgICBkZWYgdGVzdF9pZChzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW5UZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoRm9vKCkuaWQoKSwgc3RyKQ0KDQoNCiAgICAjICJJZiByZXN1bHQgaXMgb21pdHRlZCBvciBOb25lLCBhIHRlbXBvcmFyeSByZXN1bHQgb2JqZWN0IGlzIGNyZWF0ZWQsDQogICAgIyB1c2VkLCBhbmQgaXMgbWFkZSBhdmFpbGFibGUgdG8gdGhlIGNhbGxlci4gQXMgVGVzdENhc2Ugb3ducyB0aGUNCiAgICAjIHRlbXBvcmFyeSByZXN1bHQgc3RhcnRUZXN0UnVuIGFuZCBzdG9wVGVzdFJ1biBhcmUgY2FsbGVkLg0KDQogICAgZGVmIHRlc3RfcnVuX191c2VzX2RlZmF1bHRUZXN0UmVzdWx0KHNlbGYpOg0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICBkZWZhdWx0UmVzdWx0ID0gTG9nZ2luZ1Jlc3VsdChldmVudHMpDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIGV2ZW50cy5hcHBlbmQoJ3Rlc3QnKQ0KDQogICAgICAgICAgICBkZWYgZGVmYXVsdFRlc3RSZXN1bHQoc2VsZik6DQogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRSZXN1bHQNCg0KICAgICAgICAjIE1ha2UgcnVuKCkgZmluZCBhIHJlc3VsdCBvYmplY3Qgb24gaXRzIG93bg0KICAgICAgICByZXN1bHQgPSBGb28oJ3Rlc3QnKS5ydW4oKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmVzdWx0LCBkZWZhdWx0UmVzdWx0KQ0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0UnVuJywgJ3N0YXJ0VGVzdCcsICd0ZXN0JywgJ2FkZFN1Y2Nlc3MnLA0KICAgICAgICAgICAgJ3N0b3BUZXN0JywgJ3N0b3BUZXN0UnVuJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIGV4cGVjdGVkKQ0KDQoNCiAgICAjICJUaGUgcmVzdWx0IG9iamVjdCBpcyByZXR1cm5lZCB0byBydW4ncyBjYWxsZXIiDQogICAgZGVmIHRlc3RfcnVuX19yZXR1cm5zX2dpdmVuX3Jlc3VsdChzZWxmKToNCg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KDQogICAgICAgIHJldHZhbCA9IEZvbygndGVzdCcpLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmV0dmFsLCByZXN1bHQpDQoNCg0KICAgICMgIlRoZSBzYW1lIGVmZmVjdCBbYXMgbWV0aG9kIHJ1bl0gbWF5IGJlIGhhZCBieSBzaW1wbHkgY2FsbGluZyB0aGUNCiAgICAjIFRlc3RDYXNlIGluc3RhbmNlLiINCiAgICBkZWYgdGVzdF9jYWxsX19pbnZva2luZ19hbl9pbnN0YW5jZV9kZWxlZ2F0ZXNfdG9fcnVuKHNlbGYpOg0KICAgICAgICByZXN1bHRJbiA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICByZXN1bHRPdXQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgICAgICBkZWYgcnVuKHNlbGYsIHJlc3VsdCk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhyZXN1bHQsIHJlc3VsdEluKQ0KICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPdXQNCg0KICAgICAgICByZXR2YWwgPSBGb28oJ3Rlc3QnKShyZXN1bHRJbikNCg0KICAgICAgICBzZWxmLmFzc2VydElzKHJldHZhbCwgcmVzdWx0T3V0KQ0KDQoNCiAgICBkZWYgdGVzdFNob3J0RGVzY3JpcHRpb25XaXRob3V0RG9jc3RyaW5nKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydElzTm9uZShzZWxmLnNob3J0RGVzY3JpcHRpb24oKSkNCg0KICAgIEB1bml0dGVzdC5za2lwSWYoc3lzLmZsYWdzLm9wdGltaXplID49IDIsDQogICAgICAgICAgICAgICAgICAgICAiRG9jc3RyaW5ncyBhcmUgb21pdHRlZCB3aXRoIC1PMiBhbmQgYWJvdmUiKQ0KICAgIGRlZiB0ZXN0U2hvcnREZXNjcmlwdGlvbldpdGhPbmVMaW5lRG9jc3RyaW5nKHNlbGYpOg0KICAgICAgICAiIiJUZXN0cyBzaG9ydERlc2NyaXB0aW9uKCkgZm9yIGEgbWV0aG9kIHdpdGggYSBkb2NzdHJpbmcuIiIiDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICAgICAgc2VsZi5zaG9ydERlc2NyaXB0aW9uKCksDQogICAgICAgICAgICAgICAgJ1Rlc3RzIHNob3J0RGVzY3JpcHRpb24oKSBmb3IgYSBtZXRob2Qgd2l0aCBhIGRvY3N0cmluZy4nKQ0KDQogICAgQHVuaXR0ZXN0LnNraXBJZihzeXMuZmxhZ3Mub3B0aW1pemUgPj0gMiwNCiAgICAgICAgICAgICAgICAgICAgICJEb2NzdHJpbmdzIGFyZSBvbWl0dGVkIHdpdGggLU8yIGFuZCBhYm92ZSIpDQogICAgZGVmIHRlc3RTaG9ydERlc2NyaXB0aW9uV2l0aE11bHRpTGluZURvY3N0cmluZyhzZWxmKToNCiAgICAgICAgIiIiVGVzdHMgc2hvcnREZXNjcmlwdGlvbigpIGZvciBhIG1ldGhvZCB3aXRoIGEgbG9uZ2VyIGRvY3N0cmluZy4NCg0KICAgICAgICBUaGlzIG1ldGhvZCBlbnN1cmVzIHRoYXQgb25seSB0aGUgZmlyc3QgbGluZSBvZiBhIGRvY3N0cmluZyBpcw0KICAgICAgICByZXR1cm5lZCB1c2VkIGluIHRoZSBzaG9ydCBkZXNjcmlwdGlvbiwgbm8gbWF0dGVyIGhvdyBsb25nIHRoZQ0KICAgICAgICB3aG9sZSB0aGluZyBpcy4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICAgICAgc2VsZi5zaG9ydERlc2NyaXB0aW9uKCksDQogICAgICAgICAgICAgICAgICdUZXN0cyBzaG9ydERlc2NyaXB0aW9uKCkgZm9yIGEgbWV0aG9kIHdpdGggYSBsb25nZXIgJw0KICAgICAgICAgICAgICAgICAnZG9jc3RyaW5nLicpDQoNCiAgICBkZWYgdGVzdEFkZFR5cGVFcXVhbGl0eUZ1bmMoc2VsZik6DQogICAgICAgIGNsYXNzIFNhZFNuYWtlKG9iamVjdCk6DQogICAgICAgICAgICAiIiJEdW1teSBjbGFzcyBmb3IgdGVzdF9hZGRUeXBlRXF1YWxpdHlGdW5jLiIiIg0KICAgICAgICBzMSwgczIgPSBTYWRTbmFrZSgpLCBTYWRTbmFrZSgpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoczEgPT0gczIpDQogICAgICAgIGRlZiBBbGxTbmFrZXNDcmVhdGVkRXF1YWwoYSwgYiwgbXNnPU5vbmUpOg0KICAgICAgICAgICAgcmV0dXJuIHR5cGUoYSkgPT0gdHlwZShiKSA9PSBTYWRTbmFrZQ0KICAgICAgICBzZWxmLmFkZFR5cGVFcXVhbGl0eUZ1bmMoU2FkU25ha2UsIEFsbFNuYWtlc0NyZWF0ZWRFcXVhbCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzMSwgczIpDQogICAgICAgICMgTm8gdGhpcyBkb2Vzbid0IGNsZWFuIHVwIGFuZCByZW1vdmUgdGhlIFNhZFNuYWtlIGVxdWFsaXR5IGZ1bmMNCiAgICAgICAgIyBmcm9tIHRoaXMgVGVzdENhc2UgaW5zdGFuY2UgYnV0IHNpbmNlIGl0cyBhIGxvY2FsIG5vdGhpbmcgZWxzZQ0KICAgICAgICAjIHdpbGwgZXZlciBub3RpY2UgdGhhdC4NCg0KICAgIGRlZiB0ZXN0QXNzZXJ0SXMoc2VsZik6DQogICAgICAgIHRoaW5nID0gb2JqZWN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRJcyh0aGluZywgdGhpbmcpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRJcywgdGhpbmcsIG9iamVjdCgpKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRJc05vdChzZWxmKToNCiAgICAgICAgdGhpbmcgPSBvYmplY3QoKQ0KICAgICAgICBzZWxmLmFzc2VydElzTm90KHRoaW5nLCBvYmplY3QoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydElzTm90LCB0aGluZywgdGhpbmcpDQoNCiAgICBkZWYgdGVzdEFzc2VydElzSW5zdGFuY2Uoc2VsZik6DQogICAgICAgIHRoaW5nID0gW10NCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHRoaW5nLCBsaXN0KQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmcsIGRpY3QpDQoNCiAgICBkZWYgdGVzdEFzc2VydE5vdElzSW5zdGFuY2Uoc2VsZik6DQogICAgICAgIHRoaW5nID0gW10NCiAgICAgICAgc2VsZi5hc3NlcnROb3RJc0luc3RhbmNlKHRoaW5nLCBkaWN0KQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Tm90SXNJbnN0YW5jZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmcsIGxpc3QpDQoNCiAgICBkZWYgdGVzdEFzc2VydEluKHNlbGYpOg0KICAgICAgICBhbmltYWxzID0geydtb25rZXknOiAnYmFuYW5hJywgJ2Nvdyc6ICdncmFzcycsICdzZWFsJzogJ2Zpc2gnfQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oJ2EnLCAnYWJjJykNCiAgICAgICAgc2VsZi5hc3NlcnRJbigyLCBbMSwgMiwgM10pDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oJ21vbmtleScsIGFuaW1hbHMpDQoNCiAgICAgICAgc2VsZi5hc3NlcnROb3RJbignZCcsICdhYmMnKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKDAsIFsxLCAyLCAzXSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RJbignb3R0ZXInLCBhbmltYWxzKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRJbiwgJ3gnLCAnYWJjJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydEluLCA0LCBbMSwgMiwgM10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRJbiwgJ2VsZXBoYW50JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWFscykNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Tm90SW4sICdjJywgJ2FiYycpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnROb3RJbiwgMSwgWzEsIDIsIDNdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Tm90SW4sICdjb3cnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYWxzKQ0KDQogICAgZGVmIHRlc3RBc3NlcnREaWN0Q29udGFpbnNTdWJzZXQoc2VsZik6DQogICAgICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKToNCiAgICAgICAgICAgIHdhcm5pbmdzLnNpbXBsZWZpbHRlcigiaWdub3JlIiwgRGVwcmVjYXRpb25XYXJuaW5nKQ0KDQogICAgICAgICAgICBzZWxmLmFzc2VydERpY3RDb250YWluc1N1YnNldCh7fSwge30pDQogICAgICAgICAgICBzZWxmLmFzc2VydERpY3RDb250YWluc1N1YnNldCh7fSwgeydhJzogMX0pDQogICAgICAgICAgICBzZWxmLmFzc2VydERpY3RDb250YWluc1N1YnNldCh7J2EnOiAxfSwgeydhJzogMX0pDQogICAgICAgICAgICBzZWxmLmFzc2VydERpY3RDb250YWluc1N1YnNldCh7J2EnOiAxfSwgeydhJzogMSwgJ2InOiAyfSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0KHsnYSc6IDEsICdiJzogMn0sIHsnYSc6IDEsICdiJzogMn0pDQoNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydERpY3RDb250YWluc1N1YnNldCh7MTogIm9uZSJ9LCB7fSkNCg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0KHsnYSc6IDJ9LCB7J2EnOiAxfSkNCg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0KHsnYyc6IDF9LCB7J2EnOiAxfSkNCg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0KHsnYSc6IDEsICdjJzogMX0sIHsnYSc6IDF9KQ0KDQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnREaWN0Q29udGFpbnNTdWJzZXQoeydhJzogMSwgJ2MnOiAxfSwgeydhJzogMX0pDQoNCiAgICAgICAgICAgIG9uZSA9ICcnLmpvaW4oY2hyKGkpIGZvciBpIGluIHJhbmdlKDI1NSkpDQogICAgICAgICAgICAjIHRoaXMgdXNlZCB0byBjYXVzZSBhIFVuaWNvZGVEZWNvZGVFcnJvciBjb25zdHJ1Y3RpbmcgdGhlIGZhaWx1cmUgbXNnDQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnREaWN0Q29udGFpbnNTdWJzZXQoeydmb28nOiBvbmV9LCB7J2Zvbyc6ICdcdUZGRkQnfSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0RXF1YWwoc2VsZik6DQogICAgICAgIGVxdWFsX3BhaXJzID0gWw0KICAgICAgICAgICAgICAgICgoKSwgKCkpLA0KICAgICAgICAgICAgICAgICh7fSwge30pLA0KICAgICAgICAgICAgICAgIChbXSwgW10pLA0KICAgICAgICAgICAgICAgIChzZXQoKSwgc2V0KCkpLA0KICAgICAgICAgICAgICAgIChmcm96ZW5zZXQoKSwgZnJvemVuc2V0KCkpXQ0KICAgICAgICBmb3IgYSwgYiBpbiBlcXVhbF9wYWlyczoNCiAgICAgICAgICAgICMgVGhpcyBtZXNzIG9mIHRyeSBleGNlcHRzIGlzIHRvIHRlc3QgdGhlIGFzc2VydEVxdWFsIGJlaGF2aW9yDQogICAgICAgICAgICAjIGl0c2VsZi4NCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGEsIGIpDQogICAgICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uOg0KICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgnYXNzZXJ0RXF1YWwoJXIsICVyKSBmYWlsZWQnICUgKGEsIGIpKQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYSwgYiwgbXNnPSdmb28nKQ0KICAgICAgICAgICAgZXhjZXB0IHNlbGYuZmFpbHVyZUV4Y2VwdGlvbjoNCiAgICAgICAgICAgICAgICBzZWxmLmZhaWwoJ2Fzc2VydEVxdWFsKCVyLCAlcikgd2l0aCBtc2c9IGZhaWxlZCcgJSAoYSwgYikpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhLCBiLCAnZm9vJykNCiAgICAgICAgICAgIGV4Y2VwdCBzZWxmLmZhaWx1cmVFeGNlcHRpb246DQogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCdhc3NlcnRFcXVhbCglciwgJXIpIHdpdGggdGhpcmQgcGFyYW1ldGVyIGZhaWxlZCcgJQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAoYSwgYikpDQoNCiAgICAgICAgdW5lcXVhbF9wYWlycyA9IFsNCiAgICAgICAgICAgICAgICgoKSwgW10pLA0KICAgICAgICAgICAgICAgKHt9LCBzZXQoKSksDQogICAgICAgICAgICAgICAoc2V0KFs0LDFdKSwgZnJvemVuc2V0KFs0LDJdKSksDQogICAgICAgICAgICAgICAoZnJvemVuc2V0KFs0LDVdKSwgc2V0KFsyLDNdKSksDQogICAgICAgICAgICAgICAoc2V0KFszLDRdKSwgc2V0KFs1LDRdKSldDQogICAgICAgIGZvciBhLCBiIGluIHVuZXF1YWxfcGFpcnM6DQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0RXF1YWwsIGEsIGIpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0RXF1YWwsIGEsIGIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9vJykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRFcXVhbCwgYSwgYiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZz0nZm9vJykNCg0KICAgIGRlZiB0ZXN0RXF1YWxpdHkoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TGlzdEVxdWFsKFtdLCBbXSkNCiAgICAgICAgc2VsZi5hc3NlcnRUdXBsZUVxdWFsKCgpLCAoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRTZXF1ZW5jZUVxdWFsKFtdLCAoKSkNCg0KICAgICAgICBhID0gWzAsICdhJywgW11dDQogICAgICAgIGIgPSBbXQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyh1bml0dGVzdC5UZXN0Q2FzZS5mYWlsdXJlRXhjZXB0aW9uLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydExpc3RFcXVhbCwgYSwgYikNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXModW5pdHRlc3QuVGVzdENhc2UuZmFpbHVyZUV4Y2VwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRMaXN0RXF1YWwsIHR1cGxlKGEpLCB0dXBsZShiKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXModW5pdHRlc3QuVGVzdENhc2UuZmFpbHVyZUV4Y2VwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRTZXF1ZW5jZUVxdWFsLCBhLCB0dXBsZShiKSkNCg0KICAgICAgICBiLmV4dGVuZChhKQ0KICAgICAgICBzZWxmLmFzc2VydExpc3RFcXVhbChhLCBiKQ0KICAgICAgICBzZWxmLmFzc2VydFR1cGxlRXF1YWwodHVwbGUoYSksIHR1cGxlKGIpKQ0KICAgICAgICBzZWxmLmFzc2VydFNlcXVlbmNlRXF1YWwoYSwgdHVwbGUoYikpDQogICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbCh0dXBsZShhKSwgYikNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0TGlzdEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBhLCB0dXBsZShiKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFR1cGxlRXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIHR1cGxlKGEpLCBiKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0TGlzdEVxdWFsLCBOb25lLCBiKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0VHVwbGVFcXVhbCwgTm9uZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGUoYikpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRTZXF1ZW5jZUVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBOb25lLCB0dXBsZShiKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydExpc3RFcXVhbCwgMSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFR1cGxlRXF1YWwsIDEsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRTZXF1ZW5jZUVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAxLCAxKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RGljdEVxdWFsKHt9LCB7fSkNCg0KICAgICAgICBjID0geyAneCc6IDEgfQ0KICAgICAgICBkID0ge30NCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXModW5pdHRlc3QuVGVzdENhc2UuZmFpbHVyZUV4Y2VwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnREaWN0RXF1YWwsIGMsIGQpDQoNCiAgICAgICAgZC51cGRhdGUoYykNCiAgICAgICAgc2VsZi5hc3NlcnREaWN0RXF1YWwoYywgZCkNCg0KICAgICAgICBkWyd4J10gPSAwDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHVuaXR0ZXN0LlRlc3RDYXNlLmZhaWx1cmVFeGNlcHRpb24sDQogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RGljdEVxdWFsLCBjLCBkLCAnVGhlc2UgYXJlIHVuZXF1YWwnKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnREaWN0RXF1YWwsIE5vbmUsIGQpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnREaWN0RXF1YWwsIFtdLCBkKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0RGljdEVxdWFsLCAxLCAxKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRTZXF1ZW5jZUVxdWFsTWF4RGlmZihzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzZWxmLm1heERpZmYsIDgwKjgpDQogICAgICAgIHNlcTEgPSAnYScgKyAneCcgKiA4MCoqMg0KICAgICAgICBzZXEyID0gJ2InICsgJ3gnICogODAqKjINCiAgICAgICAgZGlmZiA9ICdcbicuam9pbihkaWZmbGliLm5kaWZmKHBwcmludC5wZm9ybWF0KHNlcTEpLnNwbGl0bGluZXMoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBwcmludC5wZm9ybWF0KHNlcTIpLnNwbGl0bGluZXMoKSkpDQogICAgICAgICMgdGhlICsxIGlzIHRoZSBsZWFkaW5nIFxuIGFkZGVkIGJ5IGFzc2VydFNlcXVlbmNlRXF1YWwNCiAgICAgICAgb21pdHRlZCA9IHVuaXR0ZXN0LmNhc2UuRElGRl9PTUlUVEVEICUgKGxlbihkaWZmKSArIDEsKQ0KDQogICAgICAgIHNlbGYubWF4RGlmZiA9IGxlbihkaWZmKS8vMg0KICAgICAgICB0cnk6DQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbChzZXExLCBzZXEyKQ0KICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBtc2cgPSBlLmFyZ3NbMF0NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgnYXNzZXJ0U2VxdWVuY2VFcXVhbCBkaWQgbm90IGZhaWwuJykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGxlbihtc2cpIDwgbGVuKGRpZmYpKQ0KICAgICAgICBzZWxmLmFzc2VydEluKG9taXR0ZWQsIG1zZykNCg0KICAgICAgICBzZWxmLm1heERpZmYgPSBsZW4oZGlmZikgKiAyDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbChzZXExLCBzZXEyKQ0KICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBtc2cgPSBlLmFyZ3NbMF0NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgnYXNzZXJ0U2VxdWVuY2VFcXVhbCBkaWQgbm90IGZhaWwuJykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGxlbihtc2cpID4gbGVuKGRpZmYpKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKG9taXR0ZWQsIG1zZykNCg0KICAgICAgICBzZWxmLm1heERpZmYgPSBOb25lDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbChzZXExLCBzZXEyKQ0KICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBtc2cgPSBlLmFyZ3NbMF0NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgnYXNzZXJ0U2VxdWVuY2VFcXVhbCBkaWQgbm90IGZhaWwuJykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGxlbihtc2cpID4gbGVuKGRpZmYpKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKG9taXR0ZWQsIG1zZykNCg0KICAgIGRlZiB0ZXN0VHJ1bmNhdGVNZXNzYWdlKHNlbGYpOg0KICAgICAgICBzZWxmLm1heERpZmYgPSAxDQogICAgICAgIG1lc3NhZ2UgPSBzZWxmLl90cnVuY2F0ZU1lc3NhZ2UoJ2ZvbycsICdiYXInKQ0KICAgICAgICBvbWl0dGVkID0gdW5pdHRlc3QuY2FzZS5ESUZGX09NSVRURUQgJSBsZW4oJ2JhcicpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobWVzc2FnZSwgJ2ZvbycgKyBvbWl0dGVkKQ0KDQogICAgICAgIHNlbGYubWF4RGlmZiA9IE5vbmUNCiAgICAgICAgbWVzc2FnZSA9IHNlbGYuX3RydW5jYXRlTWVzc2FnZSgnZm9vJywgJ2JhcicpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobWVzc2FnZSwgJ2Zvb2JhcicpDQoNCiAgICAgICAgc2VsZi5tYXhEaWZmID0gNA0KICAgICAgICBtZXNzYWdlID0gc2VsZi5fdHJ1bmNhdGVNZXNzYWdlKCdmb28nLCAnYmFyJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtZXNzYWdlLCAnZm9vYmFyJykNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0RGljdEVxdWFsVHJ1bmNhdGVzKHNlbGYpOg0KICAgICAgICB0ZXN0ID0gdW5pdHRlc3QuVGVzdENhc2UoJ2Fzc2VydEVxdWFsJykNCiAgICAgICAgZGVmIHRydW5jYXRlKG1zZywgZGlmZik6DQogICAgICAgICAgICByZXR1cm4gJ2ZvbycNCiAgICAgICAgdGVzdC5fdHJ1bmNhdGVNZXNzYWdlID0gdHJ1bmNhdGUNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGVzdC5hc3NlcnREaWN0RXF1YWwoe30sIHsxOiAwfSkNCiAgICAgICAgZXhjZXB0IHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksICdmb28nKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCdhc3NlcnREaWN0RXF1YWwgZGlkIG5vdCBmYWlsJykNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0TXVsdGlMaW5lRXF1YWxUcnVuY2F0ZXMoc2VsZik6DQogICAgICAgIHRlc3QgPSB1bml0dGVzdC5UZXN0Q2FzZSgnYXNzZXJ0RXF1YWwnKQ0KICAgICAgICBkZWYgdHJ1bmNhdGUobXNnLCBkaWZmKToNCiAgICAgICAgICAgIHJldHVybiAnZm9vJw0KICAgICAgICB0ZXN0Ll90cnVuY2F0ZU1lc3NhZ2UgPSB0cnVuY2F0ZQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0ZXN0LmFzc2VydE11bHRpTGluZUVxdWFsKCdmb28nLCAnYmFyJykNCiAgICAgICAgZXhjZXB0IHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksICdmb28nKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCdhc3NlcnRNdWx0aUxpbmVFcXVhbCBkaWQgbm90IGZhaWwnKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRFcXVhbF9kaWZmVGhyZXNob2xkKHNlbGYpOg0KICAgICAgICAjIGNoZWNrIHRocmVzaG9sZCB2YWx1ZQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNlbGYuX2RpZmZUaHJlc2hvbGQsIDIqKjE2KQ0KICAgICAgICAjIGRpc2FibGUgbWFkRGlmZiB0byBnZXQgZGlmZiBtYXJrZXJzDQogICAgICAgIHNlbGYubWF4RGlmZiA9IE5vbmUNCg0KICAgICAgICAjIHNldCBhIGxvd2VyIHRocmVzaG9sZCB2YWx1ZSBhbmQgYWRkIGEgY2xlYW51cCB0byByZXN0b3JlIGl0DQogICAgICAgIG9sZF90aHJlc2hvbGQgPSBzZWxmLl9kaWZmVGhyZXNob2xkDQogICAgICAgIHNlbGYuX2RpZmZUaHJlc2hvbGQgPSAyKio4DQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChsYW1iZGE6IHNldGF0dHIoc2VsZiwgJ19kaWZmVGhyZXNob2xkJywgb2xkX3RocmVzaG9sZCkpDQoNCiAgICAgICAgIyB1bmRlciB0aGUgdGhyZXNob2xkOiBkaWZmIG1hcmtlciAoXikgaW4gZXJyb3IgbWVzc2FnZQ0KICAgICAgICBzID0gJ3gnICogKDIqKjcpDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKSBhcyBjbToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocyArICdhJywgcyArICdiJykNCiAgICAgICAgc2VsZi5hc3NlcnRJbignXicsIHN0cihjbS5leGNlcHRpb24pKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHMgKyAnYScsIHMgKyAnYScpDQoNCiAgICAgICAgIyBvdmVyIHRoZSB0aHJlc2hvbGQ6IGRpZmYgbm90IHVzZWQgYW5kIG1hcmtlciAoXikgbm90IGluIGVycm9yIG1lc3NhZ2UNCiAgICAgICAgcyA9ICd4JyAqICgyKio5KQ0KICAgICAgICAjIGlmIHRoZSBwYXRoIHRoYXQgdXNlcyBkaWZmbGliIGlzIHRha2VuLCBfdHJ1bmNhdGVNZXNzYWdlIHdpbGwgYmUNCiAgICAgICAgIyBjYWxsZWQgLS0gcmVwbGFjZSBpdCB3aXRoIGV4cGxvZGluZ1RydW5jYXRpb24gdG8gdmVyaWZ5IHRoYXQgdGhpcw0KICAgICAgICAjIGRvZXNuJ3QgaGFwcGVuDQogICAgICAgIGRlZiBleHBsb2RpbmdUcnVuY2F0aW9uKG1lc3NhZ2UsIGRpZmYpOg0KICAgICAgICAgICAgcmFpc2UgU3lzdGVtRXJyb3IoJ3RoaXMgc2hvdWxkIG5vdCBiZSByYWlzZWQnKQ0KICAgICAgICBvbGRfdHJ1bmNhdGUgPSBzZWxmLl90cnVuY2F0ZU1lc3NhZ2UNCiAgICAgICAgc2VsZi5fdHJ1bmNhdGVNZXNzYWdlID0gZXhwbG9kaW5nVHJ1bmNhdGlvbg0KICAgICAgICBzZWxmLmFkZENsZWFudXAobGFtYmRhOiBzZXRhdHRyKHNlbGYsICdfdHJ1bmNhdGVNZXNzYWdlJywgb2xkX3RydW5jYXRlKSkNCg0KICAgICAgICBzMSwgczIgPSBzICsgJ2EnLCBzICsgJ2InDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKSBhcyBjbToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoczEsIHMyKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKCdeJywgc3RyKGNtLmV4Y2VwdGlvbikpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKGNtLmV4Y2VwdGlvbiksICclciAhPSAlcicgJSAoczEsIHMyKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzICsgJ2EnLCBzICsgJ2EnKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRDb3VudEVxdWFsKHNlbGYpOg0KICAgICAgICBhID0gb2JqZWN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRDb3VudEVxdWFsKFsxLCAyLCAzXSwgWzMsIDIsIDFdKQ0KICAgICAgICBzZWxmLmFzc2VydENvdW50RXF1YWwoWydmb28nLCAnYmFyJywgJ2JheiddLCBbJ2JhcicsICdiYXonLCAnZm9vJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0Q291bnRFcXVhbChbYSwgYSwgMiwgMiwgM10sIChhLCAyLCAzLCBhLCAyKSkNCiAgICAgICAgc2VsZi5hc3NlcnRDb3VudEVxdWFsKFsxLCAiMiIsICJhIiwgImEiXSwgWyJhIiwgIjIiLCBUcnVlLCAiYSJdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Q291bnRFcXVhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgWzEsIDJdICsgWzNdICogMTAwLCBbMV0gKiAxMDAgKyBbMiwgM10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRDb3VudEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBbMSwgIjIiLCAiYSIsICJhIl0sIFsiYSIsICIyIiwgVHJ1ZSwgMV0pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRDb3VudEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBbMTBdLCBbMTAsIDExXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydENvdW50RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIFsxMCwgMTFdLCBbMTBdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Q291bnRFcXVhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgWzEwLCAxMSwgMTBdLCBbMTAsIDExXSkNCg0KICAgICAgICAjIFRlc3QgdGhhdCBzZXF1ZW5jZXMgb2YgdW5oYXNoYWJsZSBvYmplY3RzIGNhbiBiZSB0ZXN0ZWQgZm9yIHNhbWVuZXNzOg0KICAgICAgICBzZWxmLmFzc2VydENvdW50RXF1YWwoW1sxLCAyXSwgWzMsIDRdLCAwXSwgW0ZhbHNlLCBbMywgNF0sIFsxLCAyXV0pDQogICAgICAgICMgVGVzdCB0aGF0IGl0ZXJhdG9yIG9mIHVuaGFzaGFibGUgb2JqZWN0cyBjYW4gYmUgdGVzdGVkIGZvciBzYW1lbmVzczoNCiAgICAgICAgc2VsZi5hc3NlcnRDb3VudEVxdWFsKGl0ZXIoWzEsIDIsIFtdLCAzLCA0XSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyKFsxLCAyLCBbXSwgMywgNF0pKQ0KDQogICAgICAgICMgaGFzaGFibGUgdHlwZXMsIGJ1dCBub3Qgb3JkZXJhYmxlDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRDb3VudEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBbXSwgW2Rpdm1vZCwgJ3gnLCAxLCA1aiwgMmosIGZyb3plbnNldCgpXSkNCiAgICAgICAgIyBjb21wYXJpbmcgZGljdHMNCiAgICAgICAgc2VsZi5hc3NlcnRDb3VudEVxdWFsKFt7J2EnOiAxfSwgeydiJzogMn1dLCBbeydiJzogMn0sIHsnYSc6IDF9XSkNCiAgICAgICAgIyBjb21wYXJpbmcgaGV0ZXJvZ2Vub3VzIG5vbi1oYXNoYWJsZSBzZXF1ZW5jZXMNCiAgICAgICAgc2VsZi5hc3NlcnRDb3VudEVxdWFsKFsxLCAneCcsIGRpdm1vZCwgW11dLCBbZGl2bW9kLCBbXSwgJ3gnLCAxXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydENvdW50RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIFtdLCBbZGl2bW9kLCBbXSwgJ3gnLCAxLCA1aiwgMmosIHNldCgpXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydENvdW50RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIFtbMV1dLCBbWzJdXSkNCg0KICAgICAgICAjIFNhbWUgZWxlbWVudHMsIGJ1dCBub3Qgc2FtZSBzZXF1ZW5jZSBsZW5ndGgNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydENvdW50RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIFsxLCAxLCAyXSwgWzIsIDFdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Q291bnRFcXVhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgWzEsIDEsICIyIiwgImEiLCAiYSJdLCBbIjIiLCAiMiIsIFRydWUsICJhIl0pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRDb3VudEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBbMSwgeydiJzogMn0sIE5vbmUsIFRydWVdLCBbeydiJzogMn0sIFRydWUsIE5vbmVdKQ0KDQogICAgICAgICMgU2FtZSBlbGVtZW50cyB3aGljaCBkb24ndCByZWxpYWJseSBjb21wYXJlLCBpbg0KICAgICAgICAjIGRpZmZlcmVudCBvcmRlciwgc2VlIGlzc3VlIDEwMjQyDQogICAgICAgIGEgPSBbezIsNH0sIHsxLDJ9XQ0KICAgICAgICBiID0gYVs6Oi0xXQ0KICAgICAgICBzZWxmLmFzc2VydENvdW50RXF1YWwoYSwgYikNCg0KICAgICAgICAjIHRlc3QgdXRpbGl0eSBmdW5jdGlvbnMgc3VwcG9ydGluZyBhc3NlcnRDb3VudEVxdWFsKCkNCg0KICAgICAgICBkaWZmcyA9IHNldCh1bml0dGVzdC51dGlsLl9jb3VudF9kaWZmX2FsbF9wdXJwb3NlKCdhYWFiY2NkJywgJ2FiYmJjY2UnKSkNCiAgICAgICAgZXhwZWN0ZWQgPSB7KDMsMSwnYScpLCAoMSwzLCdiJyksICgxLDAsJ2QnKSwgKDAsMSwnZScpfQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGRpZmZzLCBleHBlY3RlZCkNCg0KICAgICAgICBkaWZmcyA9IHVuaXR0ZXN0LnV0aWwuX2NvdW50X2RpZmZfYWxsX3B1cnBvc2UoW1tdXSwgW10pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZGlmZnMsIFsoMSwgMCwgW10pXSkNCg0KICAgICAgICBkaWZmcyA9IHNldCh1bml0dGVzdC51dGlsLl9jb3VudF9kaWZmX2hhc2hhYmxlKCdhYWFiY2NkJywgJ2FiYmJjY2UnKSkNCiAgICAgICAgZXhwZWN0ZWQgPSB7KDMsMSwnYScpLCAoMSwzLCdiJyksICgxLDAsJ2QnKSwgKDAsMSwnZScpfQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGRpZmZzLCBleHBlY3RlZCkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0U2V0RXF1YWwoc2VsZik6DQogICAgICAgIHNldDEgPSBzZXQoKQ0KICAgICAgICBzZXQyID0gc2V0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRTZXRFcXVhbChzZXQxLCBzZXQyKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRTZXRFcXVhbCwgTm9uZSwgc2V0MikNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFNldEVxdWFsLCBbXSwgc2V0MikNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFNldEVxdWFsLCBzZXQxLCBOb25lKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0U2V0RXF1YWwsIHNldDEsIFtdKQ0KDQogICAgICAgIHNldDEgPSBzZXQoWydhJ10pDQogICAgICAgIHNldDIgPSBzZXQoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0U2V0RXF1YWwsIHNldDEsIHNldDIpDQoNCiAgICAgICAgc2V0MSA9IHNldChbJ2EnXSkNCiAgICAgICAgc2V0MiA9IHNldChbJ2EnXSkNCiAgICAgICAgc2VsZi5hc3NlcnRTZXRFcXVhbChzZXQxLCBzZXQyKQ0KDQogICAgICAgIHNldDEgPSBzZXQoWydhJ10pDQogICAgICAgIHNldDIgPSBzZXQoWydhJywgJ2InXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFNldEVxdWFsLCBzZXQxLCBzZXQyKQ0KDQogICAgICAgIHNldDEgPSBzZXQoWydhJ10pDQogICAgICAgIHNldDIgPSBmcm96ZW5zZXQoWydhJywgJ2InXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFNldEVxdWFsLCBzZXQxLCBzZXQyKQ0KDQogICAgICAgIHNldDEgPSBzZXQoWydhJywgJ2InXSkNCiAgICAgICAgc2V0MiA9IGZyb3plbnNldChbJ2EnLCAnYiddKQ0KICAgICAgICBzZWxmLmFzc2VydFNldEVxdWFsKHNldDEsIHNldDIpDQoNCiAgICAgICAgc2V0MSA9IHNldCgpDQogICAgICAgIHNldDIgPSAiZm9vIg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0U2V0RXF1YWwsIHNldDEsIHNldDIpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRTZXRFcXVhbCwgc2V0Miwgc2V0MSkNCg0KICAgICAgICAjIG1ha2Ugc3VyZSBhbnkgc3RyaW5nIGZvcm1hdHRpbmcgaXMgdHVwbGUtc2FmZQ0KICAgICAgICBzZXQxID0gc2V0KFsoMCwgMSksICgyLCAzKV0pDQogICAgICAgIHNldDIgPSBzZXQoWyg0LCA1KV0pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRTZXRFcXVhbCwgc2V0MSwgc2V0MikNCg0KICAgIGRlZiB0ZXN0SW5lcXVhbGl0eShzZWxmKToNCiAgICAgICAgIyBUcnkgaW50cw0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXIoMiwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRHcmVhdGVyRXF1YWwoMiwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRHcmVhdGVyRXF1YWwoMSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzKDEsIDIpDQogICAgICAgIHNlbGYuYXNzZXJ0TGVzc0VxdWFsKDEsIDIpDQogICAgICAgIHNlbGYuYXNzZXJ0TGVzc0VxdWFsKDEsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRHcmVhdGVyLCAxLCAyKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlciwgMSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydEdyZWF0ZXJFcXVhbCwgMSwgMikNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydExlc3MsIDIsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzLCAxLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0TGVzc0VxdWFsLCAyLCAxKQ0KDQogICAgICAgICMgVHJ5IEZsb2F0cw0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXIoMS4xLCAxLjApDQogICAgICAgIHNlbGYuYXNzZXJ0R3JlYXRlckVxdWFsKDEuMSwgMS4wKQ0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXJFcXVhbCgxLjAsIDEuMCkNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzKDEuMCwgMS4xKQ0KICAgICAgICBzZWxmLmFzc2VydExlc3NFcXVhbCgxLjAsIDEuMSkNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzRXF1YWwoMS4wLCAxLjApDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRHcmVhdGVyLCAxLjAsIDEuMSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydEdyZWF0ZXIsIDEuMCwgMS4wKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlckVxdWFsLCAxLjAsIDEuMSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydExlc3MsIDEuMSwgMS4wKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0TGVzcywgMS4wLCAxLjApDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzRXF1YWwsIDEuMSwgMS4wKQ0KDQogICAgICAgICMgVHJ5IFN0cmluZ3MNCiAgICAgICAgc2VsZi5hc3NlcnRHcmVhdGVyKCdidWcnLCAnYW50JykNCiAgICAgICAgc2VsZi5hc3NlcnRHcmVhdGVyRXF1YWwoJ2J1ZycsICdhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXJFcXVhbCgnYW50JywgJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0TGVzcygnYW50JywgJ2J1ZycpDQogICAgICAgIHNlbGYuYXNzZXJ0TGVzc0VxdWFsKCdhbnQnLCAnYnVnJykNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzRXF1YWwoJ2FudCcsICdhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlciwgJ2FudCcsICdidWcnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlciwgJ2FudCcsICdhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlckVxdWFsLCAnYW50JywgJ2J1ZycpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzLCAnYnVnJywgJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzLCAnYW50JywgJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzRXF1YWwsICdidWcnLCAnYW50JykNCg0KICAgICAgICAjIFRyeSBieXRlcw0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXIoYididWcnLCBiJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0R3JlYXRlckVxdWFsKGInYnVnJywgYidhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydEdyZWF0ZXJFcXVhbChiJ2FudCcsIGInYW50JykNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzKGInYW50JywgYididWcnKQ0KICAgICAgICBzZWxmLmFzc2VydExlc3NFcXVhbChiJ2FudCcsIGInYnVnJykNCiAgICAgICAgc2VsZi5hc3NlcnRMZXNzRXF1YWwoYidhbnQnLCBiJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRHcmVhdGVyLCBiJ2FudCcsIGInYnVnJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydEdyZWF0ZXIsIGInYW50JywgYidhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0R3JlYXRlckVxdWFsLCBiJ2FudCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgIGInYnVnJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydExlc3MsIGInYnVnJywgYidhbnQnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0TGVzcywgYidhbnQnLCBiJ2FudCcpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgc2VsZi5hc3NlcnRMZXNzRXF1YWwsIGInYnVnJywgYidhbnQnKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRNdWx0aUxpbmVFcXVhbChzZWxmKToNCiAgICAgICAgc2FtcGxlX3RleHQgPSAiIiJcDQpodHRwOi8vd3d3LnB5dGhvbi5vcmcvZG9jLzIuMy9saWIvbW9kdWxlLXVuaXR0ZXN0Lmh0bWwNCnRlc3QgY2FzZQ0KICAgIEEgdGVzdCBjYXNlIGlzIHRoZSBzbWFsbGVzdCB1bml0IG9mIHRlc3RpbmcuIFsuLi5dDQoiIiINCiAgICAgICAgcmV2aXNlZF9zYW1wbGVfdGV4dCA9ICIiIlwNCmh0dHA6Ly93d3cucHl0aG9uLm9yZy9kb2MvMi40LjEvbGliL21vZHVsZS11bml0dGVzdC5odG1sDQp0ZXN0IGNhc2UNCiAgICBBIHRlc3QgY2FzZSBpcyB0aGUgc21hbGxlc3QgdW5pdCBvZiB0ZXN0aW5nLiBbLi4uXSBZb3UgbWF5IHByb3ZpZGUgeW91cg0KICAgIG93biBpbXBsZW1lbnRhdGlvbiB0aGF0IGRvZXMgbm90IHN1YmNsYXNzIGZyb20gVGVzdENhc2UsIG9mIGNvdXJzZS4NCiIiIg0KICAgICAgICBzYW1wbGVfdGV4dF9lcnJvciA9ICIiIlwNCi0gaHR0cDovL3d3dy5weXRob24ub3JnL2RvYy8yLjMvbGliL21vZHVsZS11bml0dGVzdC5odG1sDQo/ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeDQorIGh0dHA6Ly93d3cucHl0aG9uLm9yZy9kb2MvMi40LjEvbGliL21vZHVsZS11bml0dGVzdC5odG1sDQo/ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl4NCiAgdGVzdCBjYXNlDQotICAgICBBIHRlc3QgY2FzZSBpcyB0aGUgc21hbGxlc3QgdW5pdCBvZiB0ZXN0aW5nLiBbLi4uXQ0KKyAgICAgQSB0ZXN0IGNhc2UgaXMgdGhlIHNtYWxsZXN0IHVuaXQgb2YgdGVzdGluZy4gWy4uLl0gWW91IG1heSBwcm92aWRlIHlvdXINCj8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKysrKysrKysrKysrKysrKysrKysrDQorICAgICBvd24gaW1wbGVtZW50YXRpb24gdGhhdCBkb2VzIG5vdCBzdWJjbGFzcyBmcm9tIFRlc3RDYXNlLCBvZiBjb3Vyc2UuDQoiIiINCiAgICAgICAgc2VsZi5tYXhEaWZmID0gTm9uZQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydE11bHRpTGluZUVxdWFsKHNhbXBsZV90ZXh0LCByZXZpc2VkX3NhbXBsZV90ZXh0KQ0KICAgICAgICBleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICAjIG5lZWQgdG8gcmVtb3ZlIHRoZSBmaXJzdCBsaW5lIG9mIHRoZSBlcnJvciBtZXNzYWdlDQogICAgICAgICAgICBlcnJvciA9IHN0cihlKS5zcGxpdCgnXG4nLCAxKVsxXQ0KDQogICAgICAgICAgICAjIG5vIGZhaXIgdGVzdGluZyBvdXJzZWxmIHdpdGggb3Vyc2VsZiwgYW5kIGFzc2VydEVxdWFsIGlzIHVzZWQgZm9yIHN0cmluZ3MNCiAgICAgICAgICAgICMgc28gY2FuJ3QgdXNlIGFzc2VydEVxdWFsIGVpdGhlci4gSnVzdCB1c2UgYXNzZXJ0VHJ1ZS4NCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShzYW1wbGVfdGV4dF9lcnJvciA9PSBlcnJvcikNCg0KICAgIGRlZiB0ZXN0QXNlcnRFcXVhbFNpbmdsZUxpbmUoc2VsZik6DQogICAgICAgIHNhbXBsZV90ZXh0ID0gImxhZGVuIHN3YWxsb3dzIGZseSBzbG93bHkiDQogICAgICAgIHJldmlzZWRfc2FtcGxlX3RleHQgPSAidW5sYWRlbiBzd2FsbG93cyBmbHkgcXVpY2tseSINCiAgICAgICAgc2FtcGxlX3RleHRfZXJyb3IgPSAiIiJcDQotIGxhZGVuIHN3YWxsb3dzIGZseSBzbG93bHkNCj8gICAgICAgICAgICAgICAgICAgIF5eXl4NCisgdW5sYWRlbiBzd2FsbG93cyBmbHkgcXVpY2tseQ0KPyArKyAgICAgICAgICAgICAgICAgICBeXl5eXg0KIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2FtcGxlX3RleHQsIHJldmlzZWRfc2FtcGxlX3RleHQpDQogICAgICAgIGV4Y2VwdCBzZWxmLmZhaWx1cmVFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIGVycm9yID0gc3RyKGUpLnNwbGl0KCdcbicsIDEpWzFdDQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoc2FtcGxlX3RleHRfZXJyb3IgPT0gZXJyb3IpDQoNCiAgICBkZWYgdGVzdEFzc2VydElzTm9uZShzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vbmUoTm9uZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydElzTm9uZSwgRmFsc2UpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb3ROb25lKCdEalpvUGxvR2VhcnMgb24gUmFpbHMnKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0SXNOb3ROb25lLCBOb25lKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRSZWdleChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRSZWdleCgnYXNkZmFiYXNkZicsIHInYWIrJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydFJlZ2V4LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAnc2FhYXMnLCByJ2FhYWEnKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRSYWlzZXNSZWdleChzZWxmKToNCiAgICAgICAgY2xhc3MgRXhjZXB0aW9uTW9jayhFeGNlcHRpb24pOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGRlZiBTdHViKCk6DQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb25Nb2NrKCdXZSBleHBlY3QnKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgoRXhjZXB0aW9uTW9jaywgcmUuY29tcGlsZSgnZXhwZWN0JCcpLCBTdHViKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KEV4Y2VwdGlvbk1vY2ssICdleHBlY3QkJywgU3R1YikNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0Tm90UmFpc2VzUmVnZXgoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgoDQogICAgICAgICAgICAgICAgc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCAnXkV4Y2VwdGlvbiBub3QgcmFpc2VkIGJ5IDxsYW1iZGE+JCcsDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXNSZWdleCwgRXhjZXB0aW9uLCByZS5jb21waWxlKCd4JyksDQogICAgICAgICAgICAgICAgbGFtYmRhOiBOb25lKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KA0KICAgICAgICAgICAgICAgIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwgJ15FeGNlcHRpb24gbm90IHJhaXNlZCBieSA8bGFtYmRhPiQnLA0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgsIEV4Y2VwdGlvbiwgJ3gnLA0KICAgICAgICAgICAgICAgIGxhbWJkYTogTm9uZSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0UmFpc2VzUmVnZXhNaXNtYXRjaChzZWxmKToNCiAgICAgICAgZGVmIFN0dWIoKToNCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbignVW5leHBlY3RlZCcpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXNSZWdleCgNCiAgICAgICAgICAgICAgICBzZWxmLmZhaWx1cmVFeGNlcHRpb24sDQogICAgICAgICAgICAgICAgciciXF5FeHBlY3RlZFwkIiBkb2VzIG5vdCBtYXRjaCAiVW5leHBlY3RlZCInLA0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgsIEV4Y2VwdGlvbiwgJ15FeHBlY3RlZCQnLA0KICAgICAgICAgICAgICAgIFN0dWIpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgoDQogICAgICAgICAgICAgICAgc2VsZi5mYWlsdXJlRXhjZXB0aW9uLA0KICAgICAgICAgICAgICAgIHInIlxeRXhwZWN0ZWRcJCIgZG9lcyBub3QgbWF0Y2ggIlVuZXhwZWN0ZWQiJywNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4LCBFeGNlcHRpb24sDQogICAgICAgICAgICAgICAgcmUuY29tcGlsZSgnXkV4cGVjdGVkJCcpLCBTdHViKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRSYWlzZXNFeGNWYWx1ZShzZWxmKToNCiAgICAgICAgY2xhc3MgRXhjZXB0aW9uTW9jayhFeGNlcHRpb24pOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGRlZiBTdHViKGZvbyk6DQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb25Nb2NrKGZvbykNCiAgICAgICAgdiA9ICJwYXJ0aWN1bGFyIHZhbHVlIg0KDQogICAgICAgIGN0eCA9IHNlbGYuYXNzZXJ0UmFpc2VzKEV4Y2VwdGlvbk1vY2spDQogICAgICAgIHdpdGggY3R4Og0KICAgICAgICAgICAgU3R1Yih2KQ0KICAgICAgICBlID0gY3R4LmV4Y2VwdGlvbg0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoZSwgRXhjZXB0aW9uTW9jaykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChlLmFyZ3NbMF0sIHYpDQoNCiAgICBkZWYgdGVzdEFzc2VydFdhcm5zQ2FsbGFibGUoc2VsZik6DQogICAgICAgIGRlZiBfcnVudGltZV93YXJuKCk6DQogICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJmb28iLCBSdW50aW1lV2FybmluZykNCiAgICAgICAgIyBTdWNjZXNzIHdoZW4gdGhlIHJpZ2h0IHdhcm5pbmcgaXMgdHJpZ2dlcmVkLCBldmVuIHNldmVyYWwgdGltZXMNCiAgICAgICAgc2VsZi5hc3NlcnRXYXJucyhSdW50aW1lV2FybmluZywgX3J1bnRpbWVfd2FybikNCiAgICAgICAgc2VsZi5hc3NlcnRXYXJucyhSdW50aW1lV2FybmluZywgX3J1bnRpbWVfd2FybikNCiAgICAgICAgIyBBIHR1cGxlIG9mIHdhcm5pbmcgY2xhc3NlcyBpcyBhY2NlcHRlZA0KICAgICAgICBzZWxmLmFzc2VydFdhcm5zKChEZXByZWNhdGlvbldhcm5pbmcsIFJ1bnRpbWVXYXJuaW5nKSwgX3J1bnRpbWVfd2FybikNCiAgICAgICAgIyAqYXJncyBhbmQgKiprd2FyZ3MgYWxzbyB3b3JrDQogICAgICAgIHNlbGYuYXNzZXJ0V2FybnMoUnVudGltZVdhcm5pbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybiwgImZvbyIsIGNhdGVnb3J5PVJ1bnRpbWVXYXJuaW5nKQ0KICAgICAgICAjIEZhaWx1cmUgd2hlbiBubyB3YXJuaW5nIGlzIHRyaWdnZXJlZA0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICBzZWxmLmFzc2VydFdhcm5zKFJ1bnRpbWVXYXJuaW5nLCBsYW1iZGE6IDApDQogICAgICAgICMgRmFpbHVyZSB3aGVuIGFub3RoZXIgd2FybmluZyBpcyB0cmlnZ2VyZWQNCiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOg0KICAgICAgICAgICAgIyBGb3JjZSBkZWZhdWx0IGZpbHRlciAoaW4gY2FzZSB0ZXN0cyBhcmUgcnVuIHdpdGggLVdlKQ0KICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJkZWZhdWx0IiwgUnVudGltZVdhcm5pbmcpDQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRXYXJucyhEZXByZWNhdGlvbldhcm5pbmcsIF9ydW50aW1lX3dhcm4pDQogICAgICAgICMgRmlsdGVycyBmb3Igb3RoZXIgd2FybmluZ3MgYXJlIG5vdCBtb2RpZmllZA0KICAgICAgICB3aXRoIHdhcm5pbmdzLmNhdGNoX3dhcm5pbmdzKCk6DQogICAgICAgICAgICB3YXJuaW5ncy5zaW1wbGVmaWx0ZXIoImVycm9yIiwgUnVudGltZVdhcm5pbmcpDQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKFJ1bnRpbWVXYXJuaW5nKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFdhcm5zKERlcHJlY2F0aW9uV2FybmluZywgX3J1bnRpbWVfd2FybikNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0V2FybnNDb250ZXh0KHNlbGYpOg0KICAgICAgICAjIEJlbGlldmUgaXQgb3Igbm90LCBpdCBpcyBwcmVmZXJyYWJsZSB0byBkdXBsaWNhdGUgYWxsIHRlc3RzIGFib3ZlLA0KICAgICAgICAjIHRvIG1ha2Ugc3VyZSB0aGUgX193YXJuaW5ncmVnaXN0cnlfXyAkQCBpcyBjaXJjdW12ZW50ZWQgY29ycmVjdGx5Lg0KICAgICAgICBkZWYgX3J1bnRpbWVfd2FybigpOg0KICAgICAgICAgICAgd2FybmluZ3Mud2FybigiZm9vIiwgUnVudGltZVdhcm5pbmcpDQogICAgICAgIF9ydW50aW1lX3dhcm5fbGluZW5vID0gaW5zcGVjdC5nZXRzb3VyY2VsaW5lcyhfcnVudGltZV93YXJuKVsxXQ0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnMoUnVudGltZVdhcm5pbmcpIGFzIGNtOg0KICAgICAgICAgICAgX3J1bnRpbWVfd2FybigpDQogICAgICAgICMgQSB0dXBsZSBvZiB3YXJuaW5nIGNsYXNzZXMgaXMgYWNjZXB0ZWQNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKChEZXByZWNhdGlvbldhcm5pbmcsIFJ1bnRpbWVXYXJuaW5nKSkgYXMgY206DQogICAgICAgICAgICBfcnVudGltZV93YXJuKCkNCiAgICAgICAgIyBUaGUgY29udGV4dCBtYW5hZ2VyIGV4cG9zZXMgdmFyaW91cyB1c2VmdWwgYXR0cmlidXRlcw0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoY20ud2FybmluZywgUnVudGltZVdhcm5pbmcpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoY20ud2FybmluZy5hcmdzWzBdLCAiZm9vIikNCiAgICAgICAgc2VsZi5hc3NlcnRJbigidGVzdF9jYXNlLnB5IiwgY20uZmlsZW5hbWUpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoY20ubGluZW5vLCBfcnVudGltZV93YXJuX2xpbmVubyArIDEpDQogICAgICAgICMgU2FtZSB3aXRoIHNldmVyYWwgd2FybmluZ3MNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKFJ1bnRpbWVXYXJuaW5nKToNCiAgICAgICAgICAgIF9ydW50aW1lX3dhcm4oKQ0KICAgICAgICAgICAgX3J1bnRpbWVfd2FybigpDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRXYXJucyhSdW50aW1lV2FybmluZyk6DQogICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJmb28iLCBjYXRlZ29yeT1SdW50aW1lV2FybmluZykNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gbm8gd2FybmluZyBpcyB0cmlnZ2VyZWQNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKFJ1bnRpbWVXYXJuaW5nKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICMgRmFpbHVyZSB3aGVuIGFub3RoZXIgd2FybmluZyBpcyB0cmlnZ2VyZWQNCiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOg0KICAgICAgICAgICAgIyBGb3JjZSBkZWZhdWx0IGZpbHRlciAoaW4gY2FzZSB0ZXN0cyBhcmUgcnVuIHdpdGggLVdlKQ0KICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJkZWZhdWx0IiwgUnVudGltZVdhcm5pbmcpDQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKERlcHJlY2F0aW9uV2FybmluZyk6DQogICAgICAgICAgICAgICAgICAgIF9ydW50aW1lX3dhcm4oKQ0KICAgICAgICAjIEZpbHRlcnMgZm9yIG90aGVyIHdhcm5pbmdzIGFyZSBub3QgbW9kaWZpZWQNCiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOg0KICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJlcnJvciIsIFJ1bnRpbWVXYXJuaW5nKQ0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhSdW50aW1lV2FybmluZyk6DQogICAgICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKERlcHJlY2F0aW9uV2FybmluZyk6DQogICAgICAgICAgICAgICAgICAgIF9ydW50aW1lX3dhcm4oKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRXYXJuc1JlZ2V4Q2FsbGFibGUoc2VsZik6DQogICAgICAgIGRlZiBfcnVudGltZV93YXJuKG1zZyk6DQogICAgICAgICAgICB3YXJuaW5ncy53YXJuKG1zZywgUnVudGltZVdhcm5pbmcpDQogICAgICAgIHNlbGYuYXNzZXJ0V2FybnNSZWdleChSdW50aW1lV2FybmluZywgIm8rIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ydW50aW1lX3dhcm4sICJmb294IikNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gbm8gd2FybmluZyBpcyB0cmlnZ2VyZWQNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRXYXJuc1JlZ2V4KFJ1bnRpbWVXYXJuaW5nLCAibysiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbWJkYTogMCkNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gYW5vdGhlciB3YXJuaW5nIGlzIHRyaWdnZXJlZA0KICAgICAgICB3aXRoIHdhcm5pbmdzLmNhdGNoX3dhcm5pbmdzKCk6DQogICAgICAgICAgICAjIEZvcmNlIGRlZmF1bHQgZmlsdGVyIChpbiBjYXNlIHRlc3RzIGFyZSBydW4gd2l0aCAtV2UpDQogICAgICAgICAgICB3YXJuaW5ncy5zaW1wbGVmaWx0ZXIoImRlZmF1bHQiLCBSdW50aW1lV2FybmluZykNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFdhcm5zUmVnZXgoRGVwcmVjYXRpb25XYXJuaW5nLCAibysiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcnVudGltZV93YXJuLCAiZm9veCIpDQogICAgICAgICMgRmFpbHVyZSB3aGVuIG1lc3NhZ2UgZG9lc24ndCBtYXRjaA0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbik6DQogICAgICAgICAgICBzZWxmLmFzc2VydFdhcm5zUmVnZXgoUnVudGltZVdhcm5pbmcsICJvKyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3J1bnRpbWVfd2FybiwgImJhcnoiKQ0KICAgICAgICAjIEEgbGl0dGxlIHRyaWNraWVyOiB3ZSBhc2sgUnVudGltZVdhcm5pbmdzIHRvIGJlIHJhaXNlZCwgYW5kIHRoZW4NCiAgICAgICAgIyBjaGVjayBmb3Igc29tZSBvZiB0aGVtLiAgSXQgaXMgaW1wbGVtZW50YXRpb24tZGVmaW5lZCB3aGV0aGVyDQogICAgICAgICMgbm9uLW1hdGNoaW5nIFJ1bnRpbWVXYXJuaW5ncyBhcmUgc2ltcGx5IHJlLXJhaXNlZCwgb3IgcHJvZHVjZSBhDQogICAgICAgICMgZmFpbHVyZUV4Y2VwdGlvbi4NCiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOg0KICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJlcnJvciIsIFJ1bnRpbWVXYXJuaW5nKQ0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcygoUnVudGltZVdhcm5pbmcsIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbikpOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0V2FybnNSZWdleChSdW50aW1lV2FybmluZywgIm8rIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3J1bnRpbWVfd2FybiwgImJhcnoiKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRXYXJuc1JlZ2V4Q29udGV4dChzZWxmKToNCiAgICAgICAgIyBTYW1lIGFzIGFib3ZlLCBidXQgd2l0aCBhc3NlcnRXYXJuc1JlZ2V4IGFzIGEgY29udGV4dCBtYW5hZ2VyDQogICAgICAgIGRlZiBfcnVudGltZV93YXJuKG1zZyk6DQogICAgICAgICAgICB3YXJuaW5ncy53YXJuKG1zZywgUnVudGltZVdhcm5pbmcpDQogICAgICAgIF9ydW50aW1lX3dhcm5fbGluZW5vID0gaW5zcGVjdC5nZXRzb3VyY2VsaW5lcyhfcnVudGltZV93YXJuKVsxXQ0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnNSZWdleChSdW50aW1lV2FybmluZywgIm8rIikgYXMgY206DQogICAgICAgICAgICBfcnVudGltZV93YXJuKCJmb294IikNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGNtLndhcm5pbmcsIFJ1bnRpbWVXYXJuaW5nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGNtLndhcm5pbmcuYXJnc1swXSwgImZvb3giKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCJ0ZXN0X2Nhc2UucHkiLCBjbS5maWxlbmFtZSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjbS5saW5lbm8sIF9ydW50aW1lX3dhcm5fbGluZW5vICsgMSkNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gbm8gd2FybmluZyBpcyB0cmlnZ2VyZWQNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24pOg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zUmVnZXgoUnVudGltZVdhcm5pbmcsICJvKyIpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gYW5vdGhlciB3YXJuaW5nIGlzIHRyaWdnZXJlZA0KICAgICAgICB3aXRoIHdhcm5pbmdzLmNhdGNoX3dhcm5pbmdzKCk6DQogICAgICAgICAgICAjIEZvcmNlIGRlZmF1bHQgZmlsdGVyIChpbiBjYXNlIHRlc3RzIGFyZSBydW4gd2l0aCAtV2UpDQogICAgICAgICAgICB3YXJuaW5ncy5zaW1wbGVmaWx0ZXIoImRlZmF1bHQiLCBSdW50aW1lV2FybmluZykNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKToNCiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnNSZWdleChEZXByZWNhdGlvbldhcm5pbmcsICJvKyIpOg0KICAgICAgICAgICAgICAgICAgICBfcnVudGltZV93YXJuKCJmb294IikNCiAgICAgICAgIyBGYWlsdXJlIHdoZW4gbWVzc2FnZSBkb2Vzbid0IG1hdGNoDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uKToNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRXYXJuc1JlZ2V4KFJ1bnRpbWVXYXJuaW5nLCAibysiKToNCiAgICAgICAgICAgICAgICBfcnVudGltZV93YXJuKCJiYXJ6IikNCiAgICAgICAgIyBBIGxpdHRsZSB0cmlja2llcjogd2UgYXNrIFJ1bnRpbWVXYXJuaW5ncyB0byBiZSByYWlzZWQsIGFuZCB0aGVuDQogICAgICAgICMgY2hlY2sgZm9yIHNvbWUgb2YgdGhlbS4gIEl0IGlzIGltcGxlbWVudGF0aW9uLWRlZmluZWQgd2hldGhlcg0KICAgICAgICAjIG5vbi1tYXRjaGluZyBSdW50aW1lV2FybmluZ3MgYXJlIHNpbXBseSByZS1yYWlzZWQsIG9yIHByb2R1Y2UgYQ0KICAgICAgICAjIGZhaWx1cmVFeGNlcHRpb24uDQogICAgICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKToNCiAgICAgICAgICAgIHdhcm5pbmdzLnNpbXBsZWZpbHRlcigiZXJyb3IiLCBSdW50aW1lV2FybmluZykNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoKFJ1bnRpbWVXYXJuaW5nLCBzZWxmLmZhaWx1cmVFeGNlcHRpb24pKToNCiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnNSZWdleChSdW50aW1lV2FybmluZywgIm8rIik6DQogICAgICAgICAgICAgICAgICAgIF9ydW50aW1lX3dhcm4oImJhcnoiKQ0KDQogICAgZGVmIHRlc3REZXByZWNhdGVkTWV0aG9kTmFtZXMoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBUZXN0IHRoYXQgdGhlIGRlcHJlY2F0ZWQgbWV0aG9kcyByYWlzZSBhIERlcHJlY2F0aW9uV2FybmluZy4gU2VlICM5NDI0Lg0KICAgICAgICAiIiINCiAgICAgICAgb2xkID0gKA0KICAgICAgICAgICAgKHNlbGYuZmFpbElmRXF1YWwsICgzLCA1KSksDQogICAgICAgICAgICAoc2VsZi5hc3NlcnROb3RFcXVhbHMsICgzLCA1KSksDQogICAgICAgICAgICAoc2VsZi5mYWlsVW5sZXNzRXF1YWwsICgzLCAzKSksDQogICAgICAgICAgICAoc2VsZi5hc3NlcnRFcXVhbHMsICgzLCAzKSksDQogICAgICAgICAgICAoc2VsZi5mYWlsVW5sZXNzQWxtb3N0RXF1YWwsICgyLjAsIDIuMCkpLA0KICAgICAgICAgICAgKHNlbGYuYXNzZXJ0QWxtb3N0RXF1YWxzLCAoMi4wLCAyLjApKSwNCiAgICAgICAgICAgIChzZWxmLmZhaWxJZkFsbW9zdEVxdWFsLCAoMy4wLCA1LjApKSwNCiAgICAgICAgICAgIChzZWxmLmFzc2VydE5vdEFsbW9zdEVxdWFscywgKDMuMCwgNS4wKSksDQogICAgICAgICAgICAoc2VsZi5mYWlsVW5sZXNzLCAoVHJ1ZSwpKSwNCiAgICAgICAgICAgIChzZWxmLmFzc2VydF8sIChUcnVlLCkpLA0KICAgICAgICAgICAgKHNlbGYuZmFpbFVubGVzc1JhaXNlcywgKFR5cGVFcnJvciwgbGFtYmRhIF86IDMuMTQgKyAnc3BhbScpKSwNCiAgICAgICAgICAgIChzZWxmLmZhaWxJZiwgKEZhbHNlLCkpLA0KICAgICAgICAgICAgKHNlbGYuYXNzZXJ0RGljdENvbnRhaW5zU3Vic2V0LCAoZGljdChhPTEsIGI9MiksIGRpY3QoYT0xLCBiPTIsIGM9MykpKSwNCiAgICAgICAgICAgIChzZWxmLmFzc2VydFJhaXNlc1JlZ2V4cCwgKEtleUVycm9yLCAnZm9vJywgbGFtYmRhOiB7fVsnZm9vJ10pKSwNCiAgICAgICAgICAgIChzZWxmLmFzc2VydFJlZ2V4cE1hdGNoZXMsICgnYmFyJywgJ2JhcicpKSwNCiAgICAgICAgKQ0KICAgICAgICBmb3IgbWV0aCwgYXJncyBpbiBvbGQ6DQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnMoRGVwcmVjYXRpb25XYXJuaW5nKToNCiAgICAgICAgICAgICAgICBtZXRoKCphcmdzKQ0KDQogICAgIyBkaXNhYmxlIHRoaXMgdGVzdCBmb3Igbm93LiBXaGVuIHRoZSB2ZXJzaW9uIHdoZXJlIHRoZSBmYWlsKiBtZXRob2RzIHdpbGwNCiAgICAjIGJlIHJlbW92ZWQgaXMgZGVjaWRlZCwgcmUtZW5hYmxlIGl0IGFuZCB1cGRhdGUgdGhlIHZlcnNpb24NCiAgICBkZWYgX3Rlc3REZXByZWNhdGVkRmFpbE1ldGhvZHMoc2VsZik6DQogICAgICAgICIiIlRlc3QgdGhhdCB0aGUgZGVwcmVjYXRlZCBmYWlsKiBtZXRob2RzIGdldCByZW1vdmVkIGluIDMueCIiIg0KICAgICAgICBpZiBzeXMudmVyc2lvbl9pbmZvWzoyXSA8ICgzLCAzKToNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBkZXByZWNhdGVkX25hbWVzID0gWw0KICAgICAgICAgICAgJ2ZhaWxJZkVxdWFsJywgJ2ZhaWxVbmxlc3NFcXVhbCcsICdmYWlsVW5sZXNzQWxtb3N0RXF1YWwnLA0KICAgICAgICAgICAgJ2ZhaWxJZkFsbW9zdEVxdWFsJywgJ2ZhaWxVbmxlc3MnLCAnZmFpbFVubGVzc1JhaXNlcycsICdmYWlsSWYnLA0KICAgICAgICAgICAgJ2Fzc2VydERpY3RDb250YWluc1N1YnNldCcsDQogICAgICAgIF0NCiAgICAgICAgZm9yIGRlcHJlY2F0ZWRfbmFtZSBpbiBkZXByZWNhdGVkX25hbWVzOg0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvcik6DQogICAgICAgICAgICAgICAgZ2V0YXR0cihzZWxmLCBkZXByZWNhdGVkX25hbWUpICAjIHJlbW92ZSB0aGVzZSBpbiAzLngNCg0KICAgIGRlZiB0ZXN0RGVlcGNvcHkoc2VsZik6DQogICAgICAgICMgSXNzdWU6IDU2NjANCiAgICAgICAgY2xhc3MgVGVzdGFibGVUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0Tm90aGluZyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgdGVzdCA9IFRlc3RhYmxlVGVzdCgndGVzdE5vdGhpbmcnKQ0KDQogICAgICAgICMgVGhpcyBzaG91bGRuJ3QgYmxvdyB1cA0KICAgICAgICBkZWVwY29weSh0ZXN0KQ0KDQogICAgZGVmIHRlc3RQaWNrbGUoc2VsZik6DQogICAgICAgICMgSXNzdWUgMTAzMjYNCg0KICAgICAgICAjIENhbid0IHVzZSBUZXN0Q2FzZSBjbGFzc2VzIGRlZmluZWQgaW4gVGVzdCBjbGFzcyBhcw0KICAgICAgICAjIHBpY2tsZSBkb2VzIG5vdCB3b3JrIHdpdGggaW5uZXIgY2xhc3Nlcw0KICAgICAgICB0ZXN0ID0gdW5pdHRlc3QuVGVzdENhc2UoJ3J1bicpDQogICAgICAgIGZvciBwcm90b2NvbCBpbiByYW5nZShwaWNrbGUuSElHSEVTVF9QUk9UT0NPTCArIDEpOg0KDQogICAgICAgICAgICAjIGJsZXcgdXAgcHJpb3IgdG8gZml4DQogICAgICAgICAgICBwaWNrbGVkX3Rlc3QgPSBwaWNrbGUuZHVtcHModGVzdCwgcHJvdG9jb2w9cHJvdG9jb2wpDQogICAgICAgICAgICB1bnBpY2tsZWRfdGVzdCA9IHBpY2tsZS5sb2FkcyhwaWNrbGVkX3Rlc3QpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRlc3QsIHVucGlja2xlZF90ZXN0KQ0KDQogICAgICAgICAgICAjIGV4ZXJjaXNlIHRoZSBUZXN0Q2FzZSBpbnN0YW5jZSBpbiBhIHdheSB0aGF0IHdpbGwgaW52b2tlDQogICAgICAgICAgICAjIHRoZSB0eXBlIGVxdWFsaXR5IGxvb2t1cCBtZWNoYW5pc20NCiAgICAgICAgICAgIHVucGlja2xlZF90ZXN0LmFzc2VydEVxdWFsKHNldCgpLCBzZXQoKSkNCg0KICAgIGRlZiB0ZXN0S2V5Ym9hcmRJbnRlcnJ1cHQoc2VsZik6DQogICAgICAgIGRlZiBfcmFpc2Uoc2VsZj1Ob25lKToNCiAgICAgICAgICAgIHJhaXNlIEtleWJvYXJkSW50ZXJydXB0DQogICAgICAgIGRlZiBub3RoaW5nKHNlbGYpOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIFRlc3QxKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gX3JhaXNlDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgc2V0VXAgPSBfcmFpc2UNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gbm90aGluZw0KDQogICAgICAgIGNsYXNzIFRlc3QzKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gbm90aGluZw0KICAgICAgICAgICAgdGVhckRvd24gPSBfcmFpc2UNCg0KICAgICAgICBjbGFzcyBUZXN0NCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF9zb21ldGhpbmcoc2VsZik6DQogICAgICAgICAgICAgICAgc2VsZi5hZGRDbGVhbnVwKF9yYWlzZSkNCg0KICAgICAgICBmb3Iga2xhc3MgaW4gKFRlc3QxLCBUZXN0MiwgVGVzdDMsIFRlc3Q0KToNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoS2V5Ym9hcmRJbnRlcnJ1cHQpOg0KICAgICAgICAgICAgICAgIGtsYXNzKCd0ZXN0X3NvbWV0aGluZycpLnJ1bigpDQoNCiAgICBkZWYgdGVzdFNraXBwaW5nRXZlcnl3aGVyZShzZWxmKToNCiAgICAgICAgZGVmIF9za2lwKHNlbGY9Tm9uZSk6DQogICAgICAgICAgICByYWlzZSB1bml0dGVzdC5Ta2lwVGVzdCgnc29tZSByZWFzb24nKQ0KICAgICAgICBkZWYgbm90aGluZyhzZWxmKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBUZXN0MSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICB0ZXN0X3NvbWV0aGluZyA9IF9za2lwDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgc2V0VXAgPSBfc2tpcA0KICAgICAgICAgICAgdGVzdF9zb21ldGhpbmcgPSBub3RoaW5nDQoNCiAgICAgICAgY2xhc3MgVGVzdDModW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgdGVzdF9zb21ldGhpbmcgPSBub3RoaW5nDQogICAgICAgICAgICB0ZWFyRG93biA9IF9za2lwDQoNCiAgICAgICAgY2xhc3MgVGVzdDQodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Rfc29tZXRoaW5nKHNlbGYpOg0KICAgICAgICAgICAgICAgIHNlbGYuYWRkQ2xlYW51cChfc2tpcCkNCg0KICAgICAgICBmb3Iga2xhc3MgaW4gKFRlc3QxLCBUZXN0MiwgVGVzdDMsIFRlc3Q0KToNCiAgICAgICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICAgICAga2xhc3MoJ3Rlc3Rfc29tZXRoaW5nJykucnVuKHJlc3VsdCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5za2lwcGVkKSwgMSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAxKQ0KDQogICAgZGVmIHRlc3RTeXN0ZW1FeGl0KHNlbGYpOg0KICAgICAgICBkZWYgX3JhaXNlKHNlbGY9Tm9uZSk6DQogICAgICAgICAgICByYWlzZSBTeXN0ZW1FeGl0DQogICAgICAgIGRlZiBub3RoaW5nKHNlbGYpOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIFRlc3QxKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gX3JhaXNlDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgc2V0VXAgPSBfcmFpc2UNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gbm90aGluZw0KDQogICAgICAgIGNsYXNzIFRlc3QzKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRlc3Rfc29tZXRoaW5nID0gbm90aGluZw0KICAgICAgICAgICAgdGVhckRvd24gPSBfcmFpc2UNCg0KICAgICAgICBjbGFzcyBUZXN0NCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF9zb21ldGhpbmcoc2VsZik6DQogICAgICAgICAgICAgICAgc2VsZi5hZGRDbGVhbnVwKF9yYWlzZSkNCg0KICAgICAgICBmb3Iga2xhc3MgaW4gKFRlc3QxLCBUZXN0MiwgVGVzdDMsIFRlc3Q0KToNCiAgICAgICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICAgICAga2xhc3MoJ3Rlc3Rfc29tZXRoaW5nJykucnVuKHJlc3VsdCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDEpDQoNCiAgICBAc3VwcG9ydC5jcHl0aG9uX29ubHkNCiAgICBkZWYgdGVzdE5vQ3ljbGVzKHNlbGYpOg0KICAgICAgICBjYXNlID0gdW5pdHRlc3QuVGVzdENhc2UoKQ0KICAgICAgICB3ciA9IHdlYWtyZWYucmVmKGNhc2UpDQogICAgICAgIHdpdGggc3VwcG9ydC5kaXNhYmxlX2djKCk6DQogICAgICAgICAgICBkZWwgY2FzZQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRGYWxzZSh3cigpKQ0K',
'/Lib/unittest/test/test_skipping.py':'aW1wb3J0IHVuaXR0ZXN0DQoNCmZyb20gLnN1cHBvcnQgaW1wb3J0IExvZ2dpbmdSZXN1bHQNCg0KDQpjbGFzcyBUZXN0X1Rlc3RTa2lwcGluZyh1bml0dGVzdC5UZXN0Q2FzZSk6DQoNCiAgICBkZWYgdGVzdF9za2lwcGluZyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0X3NraXBfbWUoc2VsZik6DQogICAgICAgICAgICAgICAgc2VsZi5za2lwVGVzdCgic2tpcCIpDQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KICAgICAgICB0ZXN0ID0gRm9vKCJ0ZXN0X3NraXBfbWUiKQ0KICAgICAgICB0ZXN0LnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBbJ3N0YXJ0VGVzdCcsICdhZGRTa2lwJywgJ3N0b3BUZXN0J10pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNraXBwZWQsIFsodGVzdCwgInNraXAiKV0pDQoNCiAgICAgICAgIyBUcnkgbGV0dGluZyBzZXRVcCBza2lwIHRoZSB0ZXN0IG5vdy4NCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBzZXRVcChzZWxmKToNCiAgICAgICAgICAgICAgICBzZWxmLnNraXBUZXN0KCJ0ZXN0aW5nIikNCiAgICAgICAgICAgIGRlZiB0ZXN0X25vdGhpbmcoc2VsZik6IHBhc3MNCiAgICAgICAgZXZlbnRzID0gW10NCiAgICAgICAgcmVzdWx0ID0gTG9nZ2luZ1Jlc3VsdChldmVudHMpDQogICAgICAgIHRlc3QgPSBGb28oInRlc3Rfbm90aGluZyIpDQogICAgICAgIHRlc3QucnVuKHJlc3VsdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIFsnc3RhcnRUZXN0JywgJ2FkZFNraXAnLCAnc3RvcFRlc3QnXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuc2tpcHBlZCwgWyh0ZXN0LCAidGVzdGluZyIpXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDEpDQoNCiAgICBkZWYgdGVzdF9za2lwcGluZ19kZWNvcmF0b3JzKHNlbGYpOg0KICAgICAgICBvcF90YWJsZSA9ICgodW5pdHRlc3Quc2tpcFVubGVzcywgRmFsc2UsIFRydWUpLA0KICAgICAgICAgICAgICAgICAgICAodW5pdHRlc3Quc2tpcElmLCBUcnVlLCBGYWxzZSkpDQogICAgICAgIGZvciBkZWNvLCBkb19za2lwLCBkb250X3NraXAgaW4gb3BfdGFibGU6DQogICAgICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgICAgIEBkZWNvKGRvX3NraXAsICJ0ZXN0aW5nIikNCiAgICAgICAgICAgICAgICBkZWYgdGVzdF9za2lwKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgICAgICAgICBAZGVjbyhkb250X3NraXAsICJ0ZXN0aW5nIikNCiAgICAgICAgICAgICAgICBkZWYgdGVzdF9kb250X3NraXAoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIHRlc3RfZG9fc2tpcCA9IEZvbygidGVzdF9za2lwIikNCiAgICAgICAgICAgIHRlc3RfZG9udF9za2lwID0gRm9vKCJ0ZXN0X2RvbnRfc2tpcCIpDQogICAgICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbdGVzdF9kb19za2lwLCB0ZXN0X2RvbnRfc2tpcF0pDQogICAgICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICAgICAgcmVzdWx0ID0gTG9nZ2luZ1Jlc3VsdChldmVudHMpDQogICAgICAgICAgICBzdWl0ZS5ydW4ocmVzdWx0KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LnNraXBwZWQpLCAxKQ0KICAgICAgICAgICAgZXhwZWN0ZWQgPSBbJ3N0YXJ0VGVzdCcsICdhZGRTa2lwJywgJ3N0b3BUZXN0JywNCiAgICAgICAgICAgICAgICAgICAgICAgICdzdGFydFRlc3QnLCAnYWRkU3VjY2VzcycsICdzdG9wVGVzdCddDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgZXhwZWN0ZWQpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNraXBwZWQsIFsodGVzdF9kb19za2lwLCAidGVzdGluZyIpXSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQud2FzU3VjY2Vzc2Z1bCgpKQ0KDQogICAgZGVmIHRlc3Rfc2tpcF9jbGFzcyhzZWxmKToNCiAgICAgICAgQHVuaXR0ZXN0LnNraXAoInRlc3RpbmciKQ0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RfMShzZWxmKToNCiAgICAgICAgICAgICAgICByZWNvcmQuYXBwZW5kKDEpDQogICAgICAgIHJlY29yZCA9IFtdDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB0ZXN0ID0gRm9vKCJ0ZXN0XzEiKQ0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbdGVzdF0pDQogICAgICAgIHN1aXRlLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNraXBwZWQsIFsodGVzdCwgInRlc3RpbmciKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVjb3JkLCBbXSkNCg0KICAgIGRlZiB0ZXN0X3NraXBfbm9uX3VuaXR0ZXN0X2NsYXNzKHNlbGYpOg0KICAgICAgICBAdW5pdHRlc3Quc2tpcCgidGVzdGluZyIpDQogICAgICAgIGNsYXNzIE1peGluOg0KICAgICAgICAgICAgZGVmIHRlc3RfMShzZWxmKToNCiAgICAgICAgICAgICAgICByZWNvcmQuYXBwZW5kKDEpDQogICAgICAgIGNsYXNzIEZvbyhNaXhpbiwgdW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICByZWNvcmQgPSBbXQ0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgdGVzdCA9IEZvbygidGVzdF8xIikNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW3Rlc3RdKQ0KICAgICAgICBzdWl0ZS5ydW4ocmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5za2lwcGVkLCBbKHRlc3QsICJ0ZXN0aW5nIildKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlY29yZCwgW10pDQoNCiAgICBkZWYgdGVzdF9leHBlY3RlZF9mYWlsdXJlKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgQHVuaXR0ZXN0LmV4cGVjdGVkRmFpbHVyZQ0KICAgICAgICAgICAgZGVmIHRlc3RfZGllKHNlbGYpOg0KICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgiaGVscCBtZSEiKQ0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICByZXN1bHQgPSBMb2dnaW5nUmVzdWx0KGV2ZW50cykNCiAgICAgICAgdGVzdCA9IEZvbygidGVzdF9kaWUiKQ0KICAgICAgICB0ZXN0LnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLA0KICAgICAgICAgICAgICAgICAgICAgICAgIFsnc3RhcnRUZXN0JywgJ2FkZEV4cGVjdGVkRmFpbHVyZScsICdzdG9wVGVzdCddKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5leHBlY3RlZEZhaWx1cmVzWzBdWzBdLCB0ZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkNCg0KICAgIGRlZiB0ZXN0X3VuZXhwZWN0ZWRfc3VjY2VzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIEB1bml0dGVzdC5leHBlY3RlZEZhaWx1cmUNCiAgICAgICAgICAgIGRlZiB0ZXN0X2RpZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KICAgICAgICB0ZXN0ID0gRm9vKCJ0ZXN0X2RpZSIpDQogICAgICAgIHRlc3QucnVuKHJlc3VsdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgWydzdGFydFRlc3QnLCAnYWRkVW5leHBlY3RlZFN1Y2Nlc3MnLCAnc3RvcFRlc3QnXSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShyZXN1bHQuZmFpbHVyZXMpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnVuZXhwZWN0ZWRTdWNjZXNzZXMsIFt0ZXN0XSkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC53YXNTdWNjZXNzZnVsKCkpDQoNCiAgICBkZWYgdGVzdF9za2lwX2RvZXNudF9ydW5fc2V0dXAoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICB3YXNTZXRVcCA9IEZhbHNlDQogICAgICAgICAgICB3YXNUb3JuRG93biA9IEZhbHNlDQogICAgICAgICAgICBkZWYgc2V0VXAoc2VsZik6DQogICAgICAgICAgICAgICAgRm9vLndhc1NldFVwID0gVHJ1ZQ0KICAgICAgICAgICAgZGVmIHRvcm5Eb3duKHNlbGYpOg0KICAgICAgICAgICAgICAgIEZvby53YXNUb3JuRG93biA9IFRydWUNCiAgICAgICAgICAgIEB1bml0dGVzdC5za2lwKCd0ZXN0aW5nJykNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB0ZXN0ID0gRm9vKCJ0ZXN0XzEiKQ0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbdGVzdF0pDQogICAgICAgIHN1aXRlLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNraXBwZWQsIFsodGVzdCwgInRlc3RpbmciKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoRm9vLndhc1NldFVwKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKEZvby53YXNUb3JuRG93bikNCg0KICAgIGRlZiB0ZXN0X2RlY29yYXRlZF9za2lwKHNlbGYpOg0KICAgICAgICBkZWYgZGVjb3JhdG9yKGZ1bmMpOg0KICAgICAgICAgICAgZGVmIGlubmVyKCphKToNCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYygqYSkNCiAgICAgICAgICAgIHJldHVybiBpbm5lcg0KDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBAZGVjb3JhdG9yDQogICAgICAgICAgICBAdW5pdHRlc3Quc2tpcCgndGVzdGluZycpDQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgdGVzdCA9IEZvbygidGVzdF8xIikNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW3Rlc3RdKQ0KICAgICAgICBzdWl0ZS5ydW4ocmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5za2lwcGVkLCBbKHRlc3QsICJ0ZXN0aW5nIildKQ0K',
'/Lib/unittest/test/test_program.py':'aW1wb3J0IGlvDQoNCmltcG9ydCBvcw0KaW1wb3J0IHN5cw0KaW1wb3J0IHVuaXR0ZXN0DQoNCg0KY2xhc3MgVGVzdF9UZXN0UHJvZ3JhbSh1bml0dGVzdC5UZXN0Q2FzZSk6DQoNCiAgICBkZWYgdGVzdF9kaXNjb3ZlcnlfZnJvbV9kb3R0ZWRfcGF0aChzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgdGVzdHMgPSBbc2VsZl0NCiAgICAgICAgZXhwZWN0ZWRQYXRoID0gb3MucGF0aC5hYnNwYXRoKG9zLnBhdGguZGlybmFtZSh1bml0dGVzdC50ZXN0Ll9fZmlsZV9fKSkNCg0KICAgICAgICBzZWxmLndhc1J1biA9IEZhbHNlDQogICAgICAgIGRlZiBfZmluZF90ZXN0cyhzdGFydF9kaXIsIHBhdHRlcm4pOg0KICAgICAgICAgICAgc2VsZi53YXNSdW4gPSBUcnVlDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0YXJ0X2RpciwgZXhwZWN0ZWRQYXRoKQ0KICAgICAgICAgICAgcmV0dXJuIHRlc3RzDQogICAgICAgIGxvYWRlci5fZmluZF90ZXN0cyA9IF9maW5kX3Rlc3RzDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmRpc2NvdmVyKCd1bml0dGVzdC50ZXN0JykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHNlbGYud2FzUnVuKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLl90ZXN0cywgdGVzdHMpDQoNCiAgICAjIEhvcnJpYmxlIHdoaXRlIGJveCB0ZXN0DQogICAgZGVmIHRlc3ROb0V4aXQoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IG9iamVjdCgpDQogICAgICAgIHRlc3QgPSBvYmplY3QoKQ0KDQogICAgICAgIGNsYXNzIEZha2VSdW5uZXIob2JqZWN0KToNCiAgICAgICAgICAgIGRlZiBydW4oc2VsZiwgdGVzdCk6DQogICAgICAgICAgICAgICAgc2VsZi50ZXN0ID0gdGVzdA0KICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgICAgICBydW5uZXIgPSBGYWtlUnVubmVyKCkNCg0KICAgICAgICBvbGRQYXJzZUFyZ3MgPSB1bml0dGVzdC5UZXN0UHJvZ3JhbS5wYXJzZUFyZ3MNCiAgICAgICAgZGVmIHJlc3RvcmVQYXJzZUFyZ3MoKToNCiAgICAgICAgICAgIHVuaXR0ZXN0LlRlc3RQcm9ncmFtLnBhcnNlQXJncyA9IG9sZFBhcnNlQXJncw0KICAgICAgICB1bml0dGVzdC5UZXN0UHJvZ3JhbS5wYXJzZUFyZ3MgPSBsYW1iZGEgKmFyZ3M6IE5vbmUNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHJlc3RvcmVQYXJzZUFyZ3MpDQoNCiAgICAgICAgZGVmIHJlbW92ZVRlc3QoKToNCiAgICAgICAgICAgIGRlbCB1bml0dGVzdC5UZXN0UHJvZ3JhbS50ZXN0DQogICAgICAgIHVuaXR0ZXN0LlRlc3RQcm9ncmFtLnRlc3QgPSB0ZXN0DQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChyZW1vdmVUZXN0KQ0KDQogICAgICAgIHByb2dyYW0gPSB1bml0dGVzdC5UZXN0UHJvZ3JhbSh0ZXN0UnVubmVyPXJ1bm5lciwgZXhpdD1GYWxzZSwgdmVyYm9zaXR5PTIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnJlc3VsdCwgcmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJ1bm5lci50ZXN0LCB0ZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udmVyYm9zaXR5LCAyKQ0KDQogICAgY2xhc3MgRm9vQmFyKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgZGVmIHRlc3RQYXNzKHNlbGYpOg0KICAgICAgICAgICAgYXNzZXJ0IFRydWUNCiAgICAgICAgZGVmIHRlc3RGYWlsKHNlbGYpOg0KICAgICAgICAgICAgYXNzZXJ0IEZhbHNlDQoNCiAgICBjbGFzcyBGb29CYXJMb2FkZXIodW5pdHRlc3QuVGVzdExvYWRlcik6DQogICAgICAgICIiIlRlc3QgbG9hZGVyIHRoYXQgcmV0dXJucyBhIHN1aXRlIGNvbnRhaW5pbmcgRm9vQmFyLiIiIg0KICAgICAgICBkZWYgbG9hZFRlc3RzRnJvbU1vZHVsZShzZWxmLCBtb2R1bGUpOg0KICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3VpdGVDbGFzcygNCiAgICAgICAgICAgICAgICBbc2VsZi5sb2FkVGVzdHNGcm9tVGVzdENhc2UoVGVzdF9UZXN0UHJvZ3JhbS5Gb29CYXIpXSkNCg0KDQogICAgZGVmIHRlc3RfTm9uRXhpdChzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IHVuaXR0ZXN0Lm1haW4oZXhpdD1GYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndj1bImZvb2JhciJdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0UnVubmVyPXVuaXR0ZXN0LlRleHRUZXN0UnVubmVyKHN0cmVhbT1pby5TdHJpbmdJTygpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdExvYWRlcj1zZWxmLkZvb0JhckxvYWRlcigpKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoaGFzYXR0cihwcm9ncmFtLCAncmVzdWx0JykpDQoNCg0KICAgIGRlZiB0ZXN0X0V4aXQoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKA0KICAgICAgICAgICAgU3lzdGVtRXhpdCwNCiAgICAgICAgICAgIHVuaXR0ZXN0Lm1haW4sDQogICAgICAgICAgICBhcmd2PVsiZm9vYmFyIl0sDQogICAgICAgICAgICB0ZXN0UnVubmVyPXVuaXR0ZXN0LlRleHRUZXN0UnVubmVyKHN0cmVhbT1pby5TdHJpbmdJTygpKSwNCiAgICAgICAgICAgIGV4aXQ9VHJ1ZSwNCiAgICAgICAgICAgIHRlc3RMb2FkZXI9c2VsZi5Gb29CYXJMb2FkZXIoKSkNCg0KDQogICAgZGVmIHRlc3RfRXhpdEFzRGVmYXVsdChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoDQogICAgICAgICAgICBTeXN0ZW1FeGl0LA0KICAgICAgICAgICAgdW5pdHRlc3QubWFpbiwNCiAgICAgICAgICAgIGFyZ3Y9WyJmb29iYXIiXSwNCiAgICAgICAgICAgIHRlc3RSdW5uZXI9dW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoc3RyZWFtPWlvLlN0cmluZ0lPKCkpLA0KICAgICAgICAgICAgdGVzdExvYWRlcj1zZWxmLkZvb0JhckxvYWRlcigpKQ0KDQoNCmNsYXNzIEluaXRpYWxpc2FibGVQcm9ncmFtKHVuaXR0ZXN0LlRlc3RQcm9ncmFtKToNCiAgICBleGl0ID0gRmFsc2UNCiAgICByZXN1bHQgPSBOb25lDQogICAgdmVyYm9zaXR5ID0gMQ0KICAgIGRlZmF1bHRUZXN0ID0gTm9uZQ0KICAgIHRlc3RSdW5uZXIgPSBOb25lDQogICAgdGVzdExvYWRlciA9IHVuaXR0ZXN0LmRlZmF1bHRUZXN0TG9hZGVyDQogICAgbW9kdWxlID0gJ19fbWFpbl9fJw0KICAgIHByb2dOYW1lID0gJ3Rlc3QnDQogICAgdGVzdCA9ICd0ZXN0Jw0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncyk6DQogICAgICAgIHBhc3MNCg0KUkVTVUxUID0gb2JqZWN0KCkNCg0KY2xhc3MgRmFrZVJ1bm5lcihvYmplY3QpOg0KICAgIGluaXRBcmdzID0gTm9uZQ0KICAgIHRlc3QgPSBOb25lDQogICAgcmFpc2VFcnJvciA9IEZhbHNlDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgKiprd2FyZ3MpOg0KICAgICAgICBGYWtlUnVubmVyLmluaXRBcmdzID0ga3dhcmdzDQogICAgICAgIGlmIEZha2VSdW5uZXIucmFpc2VFcnJvcjoNCiAgICAgICAgICAgIEZha2VSdW5uZXIucmFpc2VFcnJvciA9IEZhbHNlDQogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3INCg0KICAgIGRlZiBydW4oc2VsZiwgdGVzdCk6DQogICAgICAgIEZha2VSdW5uZXIudGVzdCA9IHRlc3QNCiAgICAgICAgcmV0dXJuIFJFU1VMVA0KDQpjbGFzcyBUZXN0Q29tbWFuZExpbmVBcmdzKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiBzZXRVcChzZWxmKToNCiAgICAgICAgc2VsZi5wcm9ncmFtID0gSW5pdGlhbGlzYWJsZVByb2dyYW0oKQ0KICAgICAgICBzZWxmLnByb2dyYW0uY3JlYXRlVGVzdHMgPSBsYW1iZGE6IE5vbmUNCiAgICAgICAgRmFrZVJ1bm5lci5pbml0QXJncyA9IE5vbmUNCiAgICAgICAgRmFrZVJ1bm5lci50ZXN0ID0gTm9uZQ0KICAgICAgICBGYWtlUnVubmVyLnJhaXNlRXJyb3IgPSBGYWxzZQ0KDQogICAgZGVmIHRlc3RWZXJib3NpdHkoc2VsZik6DQogICAgICAgIHByb2dyYW0gPSBzZWxmLnByb2dyYW0NCg0KICAgICAgICBmb3Igb3B0IGluICctcScsICctLXF1aWV0JzoNCiAgICAgICAgICAgIHByb2dyYW0udmVyYm9zaXR5ID0gMQ0KICAgICAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoW05vbmUsIG9wdF0pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udmVyYm9zaXR5LCAwKQ0KDQogICAgICAgIGZvciBvcHQgaW4gJy12JywgJy0tdmVyYm9zZSc6DQogICAgICAgICAgICBwcm9ncmFtLnZlcmJvc2l0eSA9IDENCiAgICAgICAgICAgIHByb2dyYW0ucGFyc2VBcmdzKFtOb25lLCBvcHRdKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnZlcmJvc2l0eSwgMikNCg0KICAgIGRlZiB0ZXN0QnVmZmVyQ2F0Y2hGYWlsZmFzdChzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IHNlbGYucHJvZ3JhbQ0KICAgICAgICBmb3IgYXJnLCBhdHRyIGluICgoJ2J1ZmZlcicsICdidWZmZXInKSwgKCdmYWlsZmFzdCcsICdmYWlsZmFzdCcpLA0KICAgICAgICAgICAgICAgICAgICAgICgnY2F0Y2gnLCAnY2F0Y2hicmVhaycpKToNCiAgICAgICAgICAgIGlmIGF0dHIgPT0gJ2NhdGNoJyBhbmQgbm90IGhhc0luc3RhbGxIYW5kbGVyOg0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQoNCiAgICAgICAgICAgIHNob3J0X29wdCA9ICctJXMnICUgYXJnWzBdDQogICAgICAgICAgICBsb25nX29wdCA9ICctLSVzJyAlIGFyZw0KICAgICAgICAgICAgZm9yIG9wdCBpbiBzaG9ydF9vcHQsIGxvbmdfb3B0Og0KICAgICAgICAgICAgICAgIHNldGF0dHIocHJvZ3JhbSwgYXR0ciwgTm9uZSkNCg0KICAgICAgICAgICAgICAgIHByb2dyYW0ucGFyc2VBcmdzKFtOb25lLCBvcHRdKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShnZXRhdHRyKHByb2dyYW0sIGF0dHIpKQ0KDQogICAgICAgICAgICBmb3Igb3B0IGluIHNob3J0X29wdCwgbG9uZ19vcHQ6DQogICAgICAgICAgICAgICAgbm90X25vbmUgPSBvYmplY3QoKQ0KICAgICAgICAgICAgICAgIHNldGF0dHIocHJvZ3JhbSwgYXR0ciwgbm90X25vbmUpDQoNCiAgICAgICAgICAgICAgICBwcm9ncmFtLnBhcnNlQXJncyhbTm9uZSwgb3B0XSkNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGdldGF0dHIocHJvZ3JhbSwgYXR0ciksIG5vdF9ub25lKQ0KDQogICAgZGVmIHRlc3RXYXJuaW5nKHNlbGYpOg0KICAgICAgICAiIiJUZXN0IHRoZSB3YXJuaW5ncyBhcmd1bWVudCIiIg0KICAgICAgICAjIHNlZSAjMTA1MzUNCiAgICAgICAgY2xhc3MgRmFrZVRQKHVuaXR0ZXN0LlRlc3RQcm9ncmFtKToNCiAgICAgICAgICAgIGRlZiBwYXJzZUFyZ3Moc2VsZiwgKmFyZ3MsICoqa3cpOiBwYXNzDQogICAgICAgICAgICBkZWYgcnVuVGVzdHMoc2VsZiwgKmFyZ3MsICoqa3cpOiBwYXNzDQogICAgICAgIHdhcm5vcHRpb25zID0gc3lzLndhcm5vcHRpb25zWzpdDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHN5cy53YXJub3B0aW9uc1s6XSA9IFtdDQogICAgICAgICAgICAjIG5vIHdhcm4gb3B0aW9ucywgbm8gYXJnIC0+IGRlZmF1bHQNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRmFrZVRQKCkud2FybmluZ3MsICdkZWZhdWx0JykNCiAgICAgICAgICAgICMgbm8gd2FybiBvcHRpb25zLCB3LyBhcmcgLT4gYXJnIHZhbHVlDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZha2VUUCh3YXJuaW5ncz0naWdub3JlJykud2FybmluZ3MsICdpZ25vcmUnKQ0KICAgICAgICAgICAgc3lzLndhcm5vcHRpb25zWzpdID0gWydzb21ldmFsdWUnXQ0KICAgICAgICAgICAgIyB3YXJuIG9wdGlvbnMsIG5vIGFyZyAtPiBOb25lDQogICAgICAgICAgICAjIHdhcm4gb3B0aW9ucywgdy8gYXJnIC0+IGFyZyB2YWx1ZQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGYWtlVFAoKS53YXJuaW5ncywgTm9uZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRmFrZVRQKHdhcm5pbmdzPSdpZ25vcmUnKS53YXJuaW5ncywgJ2lnbm9yZScpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBzeXMud2Fybm9wdGlvbnNbOl0gPSB3YXJub3B0aW9ucw0KDQogICAgZGVmIHRlc3RSdW5UZXN0c1J1bm5lckNsYXNzKHNlbGYpOg0KICAgICAgICBwcm9ncmFtID0gc2VsZi5wcm9ncmFtDQoNCiAgICAgICAgcHJvZ3JhbS50ZXN0UnVubmVyID0gRmFrZVJ1bm5lcg0KICAgICAgICBwcm9ncmFtLnZlcmJvc2l0eSA9ICd2ZXJib3NpdHknDQogICAgICAgIHByb2dyYW0uZmFpbGZhc3QgPSAnZmFpbGZhc3QnDQogICAgICAgIHByb2dyYW0uYnVmZmVyID0gJ2J1ZmZlcicNCiAgICAgICAgcHJvZ3JhbS53YXJuaW5ncyA9ICd3YXJuaW5ncycNCg0KICAgICAgICBwcm9ncmFtLnJ1blRlc3RzKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZha2VSdW5uZXIuaW5pdEFyZ3MsIHsndmVyYm9zaXR5JzogJ3ZlcmJvc2l0eScsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmFpbGZhc3QnOiAnZmFpbGZhc3QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1ZmZlcic6ICdidWZmZXInLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmdzJzogJ3dhcm5pbmdzJ30pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRmFrZVJ1bm5lci50ZXN0LCAndGVzdCcpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocHJvZ3JhbS5yZXN1bHQsIFJFU1VMVCkNCg0KICAgIGRlZiB0ZXN0UnVuVGVzdHNSdW5uZXJJbnN0YW5jZShzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IHNlbGYucHJvZ3JhbQ0KDQogICAgICAgIHByb2dyYW0udGVzdFJ1bm5lciA9IEZha2VSdW5uZXIoKQ0KICAgICAgICBGYWtlUnVubmVyLmluaXRBcmdzID0gTm9uZQ0KDQogICAgICAgIHByb2dyYW0ucnVuVGVzdHMoKQ0KDQogICAgICAgICMgQSBuZXcgRmFrZVJ1bm5lciBzaG91bGQgbm90IGhhdmUgYmVlbiBpbnN0YW50aWF0ZWQNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vbmUoRmFrZVJ1bm5lci5pbml0QXJncykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZha2VSdW5uZXIudGVzdCwgJ3Rlc3QnKQ0KICAgICAgICBzZWxmLmFzc2VydElzKHByb2dyYW0ucmVzdWx0LCBSRVNVTFQpDQoNCiAgICBkZWYgdGVzdFJ1blRlc3RzT2xkUnVubmVyQ2xhc3Moc2VsZik6DQogICAgICAgIHByb2dyYW0gPSBzZWxmLnByb2dyYW0NCg0KICAgICAgICBGYWtlUnVubmVyLnJhaXNlRXJyb3IgPSBUcnVlDQogICAgICAgIHByb2dyYW0udGVzdFJ1bm5lciA9IEZha2VSdW5uZXINCiAgICAgICAgcHJvZ3JhbS52ZXJib3NpdHkgPSAndmVyYm9zaXR5Jw0KICAgICAgICBwcm9ncmFtLmZhaWxmYXN0ID0gJ2ZhaWxmYXN0Jw0KICAgICAgICBwcm9ncmFtLmJ1ZmZlciA9ICdidWZmZXInDQogICAgICAgIHByb2dyYW0udGVzdCA9ICd0ZXN0Jw0KDQogICAgICAgIHByb2dyYW0ucnVuVGVzdHMoKQ0KDQogICAgICAgICMgSWYgaW5pdGlhbGlzaW5nIHJhaXNlcyBhIHR5cGUgZXJyb3IgaXQgc2hvdWxkIGJlIHJldHJpZWQNCiAgICAgICAgIyB3aXRob3V0IHRoZSBuZXcga2V5d29yZCBhcmd1bWVudHMNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGYWtlUnVubmVyLmluaXRBcmdzLCB7fSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGYWtlUnVubmVyLnRlc3QsICd0ZXN0JykNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhwcm9ncmFtLnJlc3VsdCwgUkVTVUxUKQ0KDQogICAgZGVmIHRlc3RDYXRjaEJyZWFrSW5zdGFsbHNIYW5kbGVyKHNlbGYpOg0KICAgICAgICBtb2R1bGUgPSBzeXMubW9kdWxlc1sndW5pdHRlc3QubWFpbiddDQogICAgICAgIG9yaWdpbmFsID0gbW9kdWxlLmluc3RhbGxIYW5kbGVyDQogICAgICAgIGRlZiByZXN0b3JlKCk6DQogICAgICAgICAgICBtb2R1bGUuaW5zdGFsbEhhbmRsZXIgPSBvcmlnaW5hbA0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZSkNCg0KICAgICAgICBzZWxmLmluc3RhbGxlZCA9IEZhbHNlDQogICAgICAgIGRlZiBmYWtlSW5zdGFsbEhhbmRsZXIoKToNCiAgICAgICAgICAgIHNlbGYuaW5zdGFsbGVkID0gVHJ1ZQ0KICAgICAgICBtb2R1bGUuaW5zdGFsbEhhbmRsZXIgPSBmYWtlSW5zdGFsbEhhbmRsZXINCg0KICAgICAgICBwcm9ncmFtID0gc2VsZi5wcm9ncmFtDQogICAgICAgIHByb2dyYW0uY2F0Y2hicmVhayA9IFRydWUNCg0KICAgICAgICBwcm9ncmFtLnRlc3RSdW5uZXIgPSBGYWtlUnVubmVyDQoNCiAgICAgICAgcHJvZ3JhbS5ydW5UZXN0cygpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShzZWxmLmluc3RhbGxlZCkNCg0KICAgIGRlZiBfcGF0Y2hfaXNmaWxlKHNlbGYsIG5hbWVzLCBleGlzdHM9VHJ1ZSk6DQogICAgICAgIGRlZiBpc2ZpbGUocGF0aCk6DQogICAgICAgICAgICByZXR1cm4gcGF0aCBpbiBuYW1lcw0KICAgICAgICBvcmlnaW5hbCA9IG9zLnBhdGguaXNmaWxlDQogICAgICAgIG9zLnBhdGguaXNmaWxlID0gaXNmaWxlDQogICAgICAgIGRlZiByZXN0b3JlKCk6DQogICAgICAgICAgICBvcy5wYXRoLmlzZmlsZSA9IG9yaWdpbmFsDQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChyZXN0b3JlKQ0KDQoNCiAgICBkZWYgdGVzdFBhcnNlQXJnc0ZpbGVOYW1lcyhzZWxmKToNCiAgICAgICAgIyBydW5uaW5nIHRlc3RzIHdpdGggZmlsZW5hbWVzIGluc3RlYWQgb2YgbW9kdWxlIG5hbWVzDQogICAgICAgIHByb2dyYW0gPSBzZWxmLnByb2dyYW0NCiAgICAgICAgYXJndiA9IFsncHJvZ25hbWUnLCAnZm9vLnB5JywgJ2Jhci5QeScsICdiYXouUFknLCAnd2luZy50eHQnXQ0KICAgICAgICBzZWxmLl9wYXRjaF9pc2ZpbGUoYXJndikNCg0KICAgICAgICBwcm9ncmFtLmNyZWF0ZVRlc3RzID0gbGFtYmRhOiBOb25lDQogICAgICAgIHByb2dyYW0ucGFyc2VBcmdzKGFyZ3YpDQoNCiAgICAgICAgIyBub3RlIHRoYXQgJ3dpbmcudHh0JyBpcyBub3QgYSBQeXRob24gZmlsZSBzbyB0aGUgbmFtZSBzaG91bGQNCiAgICAgICAgIyAqbm90KiBiZSBjb252ZXJ0ZWQgdG8gYSBtb2R1bGUgbmFtZQ0KICAgICAgICBleHBlY3RlZCA9IFsnZm9vJywgJ2JhcicsICdiYXonLCAnd2luZy50eHQnXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdE5hbWVzLCBleHBlY3RlZCkNCg0KDQogICAgZGVmIHRlc3RQYXJzZUFyZ3NGaWxlUGF0aHMoc2VsZik6DQogICAgICAgIHByb2dyYW0gPSBzZWxmLnByb2dyYW0NCiAgICAgICAgYXJndiA9IFsncHJvZ25hbWUnLCAnZm9vL2Jhci9iYXoucHknLCAnZ3JlZW5cXHJlZC5weSddDQogICAgICAgIHNlbGYuX3BhdGNoX2lzZmlsZShhcmd2KQ0KDQogICAgICAgIHByb2dyYW0uY3JlYXRlVGVzdHMgPSBsYW1iZGE6IE5vbmUNCiAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoYXJndikNCg0KICAgICAgICBleHBlY3RlZCA9IFsnZm9vLmJhci5iYXonLCAnZ3JlZW4ucmVkJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnRlc3ROYW1lcywgZXhwZWN0ZWQpDQoNCg0KICAgIGRlZiB0ZXN0UGFyc2VBcmdzTm9uRXhpc3RlbnRGaWxlcyhzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IHNlbGYucHJvZ3JhbQ0KICAgICAgICBhcmd2ID0gWydwcm9nbmFtZScsICdmb28vYmFyL2Jhei5weScsICdncmVlblxccmVkLnB5J10NCiAgICAgICAgc2VsZi5fcGF0Y2hfaXNmaWxlKFtdKQ0KDQogICAgICAgIHByb2dyYW0uY3JlYXRlVGVzdHMgPSBsYW1iZGE6IE5vbmUNCiAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoYXJndikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdE5hbWVzLCBhcmd2WzE6XSkNCg0KICAgIGRlZiB0ZXN0UGFyc2VBcmdzQWJzb2x1dGVQYXRoc1RoYXRDYW5CZUNvbnZlcnRlZChzZWxmKToNCiAgICAgICAgY3VyX2RpciA9IG9zLmdldGN3ZCgpDQogICAgICAgIHByb2dyYW0gPSBzZWxmLnByb2dyYW0NCiAgICAgICAgZGVmIF9qb2luKG5hbWUpOg0KICAgICAgICAgICAgcmV0dXJuIG9zLnBhdGguam9pbihjdXJfZGlyLCBuYW1lKQ0KICAgICAgICBhcmd2ID0gWydwcm9nbmFtZScsIF9qb2luKCdmb28vYmFyL2Jhei5weScpLCBfam9pbignZ3JlZW5cXHJlZC5weScpXQ0KICAgICAgICBzZWxmLl9wYXRjaF9pc2ZpbGUoYXJndikNCg0KICAgICAgICBwcm9ncmFtLmNyZWF0ZVRlc3RzID0gbGFtYmRhOiBOb25lDQogICAgICAgIHByb2dyYW0ucGFyc2VBcmdzKGFyZ3YpDQoNCiAgICAgICAgZXhwZWN0ZWQgPSBbJ2Zvby5iYXIuYmF6JywgJ2dyZWVuLnJlZCddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJvZ3JhbS50ZXN0TmFtZXMsIGV4cGVjdGVkKQ0KDQogICAgZGVmIHRlc3RQYXJzZUFyZ3NBYnNvbHV0ZVBhdGhzVGhhdENhbm5vdEJlQ29udmVydGVkKHNlbGYpOg0KICAgICAgICBwcm9ncmFtID0gc2VsZi5wcm9ncmFtDQogICAgICAgICMgZXZlbiBvbiBXaW5kb3dzICcvLi4uJyBpcyBjb25zaWRlcmVkIGFic29sdXRlIGJ5IG9zLnBhdGguYWJzcGF0aA0KICAgICAgICBhcmd2ID0gWydwcm9nbmFtZScsICcvZm9vL2Jhci9iYXoucHknLCAnL2dyZWVuL3JlZC5weSddDQogICAgICAgIHNlbGYuX3BhdGNoX2lzZmlsZShhcmd2KQ0KDQogICAgICAgIHByb2dyYW0uY3JlYXRlVGVzdHMgPSBsYW1iZGE6IE5vbmUNCiAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoYXJndikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdE5hbWVzLCBhcmd2WzE6XSkNCg0KICAgICAgICAjIGl0IG1heSBiZSBiZXR0ZXIgdG8gdXNlIHBsYXRmb3JtIHNwZWNpZmljIGZ1bmN0aW9ucyB0byBub3JtYWxpc2UgcGF0aHMNCiAgICAgICAgIyByYXRoZXIgdGhhbiBhY2NlcHRpbmcgJy5QWScgYW5kICdcJyBhcyBmaWxlIHNlcHJhdG9yIG9uIExpbnV4IC8gTWFjDQogICAgICAgICMgaXQgd291bGQgYWxzbyBiZSBiZXR0ZXIgdG8gY2hlY2sgdGhhdCBhIGZpbGVuYW1lIGlzIGEgdmFsaWQgbW9kdWxlDQogICAgICAgICMgaWRlbnRpZmllciAod2UgaGF2ZSBhIHJlZ2V4IGZvciB0aGlzIGluIGxvYWRlci5weSkNCiAgICAgICAgIyBmb3IgaW52YWxpZCBmaWxlbmFtZXMgc2hvdWxkIHdlIHJhaXNlIGEgdXNlZnVsIGVycm9yIHJhdGhlciB0aGFuDQogICAgICAgICMgbGVhdmluZyB0aGUgY3VycmVudCBlcnJvciBtZXNzYWdlIChpbXBvcnQgb2YgZmlsZW5hbWUgZmFpbHMpIGluIHBsYWNlPw0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/unittest/test/test_assertions.py':'aW1wb3J0IGRhdGV0aW1lDQppbXBvcnQgd2FybmluZ3MNCmltcG9ydCB1bml0dGVzdA0KZnJvbSBpdGVydG9vbHMgaW1wb3J0IHByb2R1Y3QNCg0KDQpjbGFzcyBUZXN0X0Fzc2VydGlvbnModW5pdHRlc3QuVGVzdENhc2UpOg0KICAgIGRlZiB0ZXN0X0FsbW9zdEVxdWFsKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydEFsbW9zdEVxdWFsKDEuMDAwMDAwMDEsIDEuMCkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RBbG1vc3RFcXVhbCgxLjAwMDAwMDEsIDEuMCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEFsbW9zdEVxdWFsLCAxLjAwMDAwMDEsIDEuMCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydE5vdEFsbW9zdEVxdWFsLCAxLjAwMDAwMDAxLCAxLjApDQoNCiAgICAgICAgc2VsZi5hc3NlcnRBbG1vc3RFcXVhbCgxLjEsIDEuMCwgcGxhY2VzPTApDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRBbG1vc3RFcXVhbCwgMS4xLCAxLjAsIHBsYWNlcz0xKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0QWxtb3N0RXF1YWwoMCwgLjErLjFqLCBwbGFjZXM9MCkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RBbG1vc3RFcXVhbCgwLCAuMSsuMWosIHBsYWNlcz0xKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sDQogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0QWxtb3N0RXF1YWwsIDAsIC4xKy4xaiwgcGxhY2VzPTEpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnROb3RBbG1vc3RFcXVhbCwgMCwgLjErLjFqLCBwbGFjZXM9MCkNCg0KICAgICAgICBzZWxmLmFzc2VydEFsbW9zdEVxdWFsKGZsb2F0KCdpbmYnKSwgZmxvYXQoJ2luZicpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhzZWxmLmZhaWx1cmVFeGNlcHRpb24sIHNlbGYuYXNzZXJ0Tm90QWxtb3N0RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0KCdpbmYnKSwgZmxvYXQoJ2luZicpKQ0KDQogICAgZGVmIHRlc3RfQW1vc3RFcXVhbFdpdGhEZWx0YShzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRBbG1vc3RFcXVhbCgxLjEsIDEuMCwgZGVsdGE9MC41KQ0KICAgICAgICBzZWxmLmFzc2VydEFsbW9zdEVxdWFsKDEuMCwgMS4xLCBkZWx0YT0wLjUpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90QWxtb3N0RXF1YWwoMS4xLCAxLjAsIGRlbHRhPTAuMDUpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90QWxtb3N0RXF1YWwoMS4wLCAxLjEsIGRlbHRhPTAuMDUpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydEFsbW9zdEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAxLjEsIDEuMCwgZGVsdGE9MC4wNSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoc2VsZi5mYWlsdXJlRXhjZXB0aW9uLCBzZWxmLmFzc2VydE5vdEFsbW9zdEVxdWFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAxLjEsIDEuMCwgZGVsdGE9MC41KQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgc2VsZi5hc3NlcnRBbG1vc3RFcXVhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgMS4xLCAxLjAsIHBsYWNlcz0yLCBkZWx0YT0yKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIHNlbGYuYXNzZXJ0Tm90QWxtb3N0RXF1YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIDEuMSwgMS4wLCBwbGFjZXM9MiwgZGVsdGE9MikNCg0KICAgICAgICBmaXJzdCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpDQogICAgICAgIHNlY29uZCA9IGZpcnN0ICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9MTApDQogICAgICAgIHNlbGYuYXNzZXJ0QWxtb3N0RXF1YWwoZmlyc3QsIHNlY29uZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YT1kYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz0yMCkpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90QWxtb3N0RXF1YWwoZmlyc3QsIHNlY29uZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YT1kYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz01KSkNCg0KICAgIGRlZiB0ZXN0X2Fzc2VydFJhaXNlcyhzZWxmKToNCiAgICAgICAgZGVmIF9yYWlzZShlKToNCiAgICAgICAgICAgIHJhaXNlIGUNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoS2V5RXJyb3IsIF9yYWlzZSwgS2V5RXJyb3IpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yLCBfcmFpc2UsIEtleUVycm9yKCJrZXkiKSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoS2V5RXJyb3IsIGxhbWJkYTogTm9uZSkNCiAgICAgICAgZXhjZXB0IHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiS2V5RXJyb3Igbm90IHJhaXNlZCIsIHN0cihlKSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiYXNzZXJ0UmFpc2VzKCkgZGlkbid0IGZhaWwiKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhLZXlFcnJvciwgX3JhaXNlLCBWYWx1ZUVycm9yKQ0KICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiYXNzZXJ0UmFpc2VzKCkgZGlkbid0IGxldCBleGNlcHRpb24gcGFzcyB0aHJvdWdoIikNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhLZXlFcnJvcikgYXMgY206DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3INCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgICBleGMgPSBlDQogICAgICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhjbS5leGNlcHRpb24sIGV4YykNCg0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yKToNCiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKCJrZXkiKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIGV4Y2VwdCBzZWxmLmZhaWx1cmVFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIktleUVycm9yIG5vdCByYWlzZWQiLCBzdHIoZSkpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoImFzc2VydFJhaXNlcygpIGRpZG4ndCBmYWlsIikNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhLZXlFcnJvcik6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcg0KICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiYXNzZXJ0UmFpc2VzKCkgZGlkbid0IGxldCBleGNlcHRpb24gcGFzcyB0aHJvdWdoIikNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0Tm90UmVnZXgoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0Tm90UmVnZXgoJ0FsYSBtYSBrb3RhJywgcidyKycpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90UmVnZXgoJ0FsYSBtYSBrb3RhJywgcidrLnQnLCAnTWVzc2FnZScpDQogICAgICAgIGV4Y2VwdCBzZWxmLmZhaWx1cmVFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIidrb3QnIiwgZS5hcmdzWzBdKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbignTWVzc2FnZScsIGUuYXJnc1swXSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgnYXNzZXJ0Tm90UmVnZXggc2hvdWxkIGhhdmUgZmFpbGVkLicpDQoNCg0KY2xhc3MgVGVzdExvbmdNZXNzYWdlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAiIiJUZXN0IHRoYXQgdGhlIGluZGl2aWR1YWwgYXNzZXJ0cyBob25vdXIgbG9uZ01lc3NhZ2UuDQogICAgVGhpcyBhY3R1YWxseSB0ZXN0cyBhbGwgdGhlIG1lc3NhZ2UgYmVoYXZpb3VyIGZvcg0KICAgIGFzc2VydHMgdGhhdCB1c2UgbG9uZ01lc3NhZ2UuIiIiDQoNCiAgICBkZWYgc2V0VXAoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3RhYmxlVGVzdEZhbHNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGxvbmdNZXNzYWdlID0gRmFsc2UNCiAgICAgICAgICAgIGZhaWx1cmVFeGNlcHRpb24gPSBzZWxmLmZhaWx1cmVFeGNlcHRpb24NCg0KICAgICAgICAgICAgZGVmIHRlc3RUZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBUZXN0YWJsZVRlc3RUcnVlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGxvbmdNZXNzYWdlID0gVHJ1ZQ0KICAgICAgICAgICAgZmFpbHVyZUV4Y2VwdGlvbiA9IHNlbGYuZmFpbHVyZUV4Y2VwdGlvbg0KDQogICAgICAgICAgICBkZWYgdGVzdFRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHNlbGYudGVzdGFibGVUcnVlID0gVGVzdGFibGVUZXN0VHJ1ZSgndGVzdFRlc3QnKQ0KICAgICAgICBzZWxmLnRlc3RhYmxlRmFsc2UgPSBUZXN0YWJsZVRlc3RGYWxzZSgndGVzdFRlc3QnKQ0KDQogICAgZGVmIHRlc3REZWZhdWx0KHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydFRydWUodW5pdHRlc3QuVGVzdENhc2UubG9uZ01lc3NhZ2UpDQoNCiAgICBkZWYgdGVzdF9mb3JtYXRNc2coc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2VsZi50ZXN0YWJsZUZhbHNlLl9mb3JtYXRNZXNzYWdlKE5vbmUsICJmb28iKSwgImZvbyIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2VsZi50ZXN0YWJsZUZhbHNlLl9mb3JtYXRNZXNzYWdlKCJmb28iLCAiYmFyIiksICJmb28iKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2VsZi50ZXN0YWJsZVRydWUuX2Zvcm1hdE1lc3NhZ2UoTm9uZSwgImZvbyIpLCAiZm9vIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzZWxmLnRlc3RhYmxlVHJ1ZS5fZm9ybWF0TWVzc2FnZSgiZm9vIiwgImJhciIpLCAiYmFyIDogZm9vIikNCg0KICAgICAgICAjIFRoaXMgYmxvd3MgdXAgaWYgX2Zvcm1hdE1lc3NhZ2UgdXNlcyBzdHJpbmcgY29uY2F0ZW5hdGlvbg0KICAgICAgICBzZWxmLnRlc3RhYmxlVHJ1ZS5fZm9ybWF0TWVzc2FnZShvYmplY3QoKSwgJ2ZvbycpDQoNCiAgICBkZWYgdGVzdF9mb3JtYXRNZXNzYWdlX3VuaWNvZGVfZXJyb3Ioc2VsZik6DQogICAgICAgIG9uZSA9ICcnLmpvaW4oY2hyKGkpIGZvciBpIGluIHJhbmdlKDI1NSkpDQogICAgICAgICMgdGhpcyB1c2VkIHRvIGNhdXNlIGEgVW5pY29kZURlY29kZUVycm9yIGNvbnN0cnVjdGluZyBtc2cNCiAgICAgICAgc2VsZi50ZXN0YWJsZVRydWUuX2Zvcm1hdE1lc3NhZ2Uob25lLCAnXHVGRkZEJykNCg0KICAgIGRlZiBhc3NlcnRNZXNzYWdlcyhzZWxmLCBtZXRob2ROYW1lLCBhcmdzLCBlcnJvcnMpOg0KICAgICAgICAiIiINCiAgICAgICAgQ2hlY2sgdGhhdCBtZXRob2ROYW1lKCphcmdzKSByYWlzZXMgdGhlIGNvcnJlY3QgZXJyb3IgbWVzc2FnZXMuDQogICAgICAgIGVycm9ycyBzaG91bGQgYmUgYSBsaXN0IG9mIDQgcmVnZXggdGhhdCBtYXRjaCB0aGUgZXJyb3Igd2hlbjoNCiAgICAgICAgICAxKSBsb25nTWVzc2FnZSA9IEZhbHNlIGFuZCBubyBtc2cgcGFzc2VkOw0KICAgICAgICAgIDIpIGxvbmdNZXNzYWdlID0gRmFsc2UgYW5kIG1zZyBwYXNzZWQ7DQogICAgICAgICAgMykgbG9uZ01lc3NhZ2UgPSBUcnVlIGFuZCBubyBtc2cgcGFzc2VkOw0KICAgICAgICAgIDQpIGxvbmdNZXNzYWdlID0gVHJ1ZSBhbmQgbXNnIHBhc3NlZDsNCiAgICAgICAgIiIiDQogICAgICAgIGRlZiBnZXRNZXRob2QoaSk6DQogICAgICAgICAgICB1c2VUZXN0YWJsZUZhbHNlICA9IGkgPCAyDQogICAgICAgICAgICBpZiB1c2VUZXN0YWJsZUZhbHNlOg0KICAgICAgICAgICAgICAgIHRlc3QgPSBzZWxmLnRlc3RhYmxlRmFsc2UNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgdGVzdCA9IHNlbGYudGVzdGFibGVUcnVlDQogICAgICAgICAgICByZXR1cm4gZ2V0YXR0cih0ZXN0LCBtZXRob2ROYW1lKQ0KDQogICAgICAgIGZvciBpLCBleHBlY3RlZF9yZWdleCBpbiBlbnVtZXJhdGUoZXJyb3JzKToNCiAgICAgICAgICAgIHRlc3RNZXRob2QgPSBnZXRNZXRob2QoaSkNCiAgICAgICAgICAgIGt3YXJncyA9IHt9DQogICAgICAgICAgICB3aXRoTXNnID0gaSAlIDINCiAgICAgICAgICAgIGlmIHdpdGhNc2c6DQogICAgICAgICAgICAgICAga3dhcmdzID0geyJtc2ciOiAib29wcyJ9DQoNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXNSZWdleChzZWxmLmZhaWx1cmVFeGNlcHRpb24sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXg9ZXhwZWN0ZWRfcmVnZXgpOg0KICAgICAgICAgICAgICAgIHRlc3RNZXRob2QoKmFyZ3MsICoqa3dhcmdzKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRUcnVlKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRUcnVlJywgKEZhbHNlLCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJeRmFsc2UgaXMgbm90IHRydWUkIiwgIl5vb3BzJCIsICJeRmFsc2UgaXMgbm90IHRydWUkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl5GYWxzZSBpcyBub3QgdHJ1ZSA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdEFzc2VydEZhbHNlKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRGYWxzZScsIChUcnVlLCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJeVHJ1ZSBpcyBub3QgZmFsc2UkIiwgIl5vb3BzJCIsICJeVHJ1ZSBpcyBub3QgZmFsc2UkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl5UcnVlIGlzIG5vdCBmYWxzZSA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdE5vdEVxdWFsKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnROb3RFcXVhbCcsICgxLCAxKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIl4xID09IDEkIiwgIl5vb3BzJCIsICJeMSA9PSAxJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJeMSA9PSAxIDogb29wcyQiXSkNCg0KICAgIGRlZiB0ZXN0QWxtb3N0RXF1YWwoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ2Fzc2VydEFsbW9zdEVxdWFsJywgKDEsIDIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiXjEgIT0gMiB3aXRoaW4gNyBwbGFjZXMkIiwgIl5vb3BzJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJeMSAhPSAyIHdpdGhpbiA3IHBsYWNlcyQiLCAiXjEgIT0gMiB3aXRoaW4gNyBwbGFjZXMgOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3ROb3RBbG1vc3RFcXVhbChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0Tm90QWxtb3N0RXF1YWwnLCAoMSwgMSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJeMSA9PSAxIHdpdGhpbiA3IHBsYWNlcyQiLCAiXm9vcHMkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4xID09IDEgd2l0aGluIDcgcGxhY2VzJCIsICJeMSA9PSAxIHdpdGhpbiA3IHBsYWNlcyA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdF9iYXNlQXNzZXJ0RXF1YWwoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ19iYXNlQXNzZXJ0RXF1YWwnLCAoMSwgMiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJeMSAhPSAyJCIsICJeb29wcyQiLCAiXjEgIT0gMiQiLCAiXjEgIT0gMiA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdEFzc2VydFNlcXVlbmNlRXF1YWwoc2VsZik6DQogICAgICAgICMgRXJyb3IgbWVzc2FnZXMgYXJlIG11bHRpbGluZSBzbyBub3QgdGVzdGluZyBvbiBmdWxsIG1lc3NhZ2UNCiAgICAgICAgIyBhc3NlcnRUdXBsZUVxdWFsIGFuZCBhc3NlcnRMaXN0RXF1YWwgZGVsZWdhdGUgdG8gdGhpcyBtZXRob2QNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0U2VxdWVuY2VFcXVhbCcsIChbXSwgW05vbmVdKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIlwrIFxbTm9uZVxdJCIsICJeb29wcyQiLCByIlwrIFxbTm9uZVxdJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIiXCsgXFtOb25lXF0gOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRTZXRFcXVhbChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0U2V0RXF1YWwnLCAoc2V0KCksIHNldChbTm9uZV0pKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIk5vbmUkIiwgIl5vb3BzJCIsICJOb25lJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb25lIDogb29wcyQiXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0SW4oc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ2Fzc2VydEluJywgKE5vbmUsIFtdKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ15Ob25lIG5vdCBmb3VuZCBpbiBcW1xdJCcsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXk5vbmUgbm90IGZvdW5kIGluIFxbXF0kJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15Ob25lIG5vdCBmb3VuZCBpbiBcW1xdIDogb29wcyQnXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0Tm90SW4oc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ2Fzc2VydE5vdEluJywgKE5vbmUsIFtOb25lXSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWydeTm9uZSB1bmV4cGVjdGVkbHkgZm91bmQgaW4gXFtOb25lXF0kJywgIl5vb3BzJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeTm9uZSB1bmV4cGVjdGVkbHkgZm91bmQgaW4gXFtOb25lXF0kJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15Ob25lIHVuZXhwZWN0ZWRseSBmb3VuZCBpbiBcW05vbmVcXSA6IG9vcHMkJ10pDQoNCiAgICBkZWYgdGVzdEFzc2VydERpY3RFcXVhbChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0RGljdEVxdWFsJywgKHt9LCB7J2tleSc6ICd2YWx1ZSd9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbciJcKyBceydrZXknOiAndmFsdWUnXH0kIiwgIl5vb3BzJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJcKyBceydrZXknOiAndmFsdWUnXH0kIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlwrIFx7J2tleSc6ICd2YWx1ZSdcfSA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdEFzc2VydERpY3RDb250YWluc1N1YnNldChzZWxmKToNCiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOg0KICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKCJpZ25vcmUiLCBEZXByZWNhdGlvbldhcm5pbmcpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ2Fzc2VydERpY3RDb250YWluc1N1YnNldCcsICh7J2tleSc6ICd2YWx1ZSd9LCB7fSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiXk1pc3Npbmc6ICdrZXknJCIsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl5NaXNzaW5nOiAna2V5JyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl5NaXNzaW5nOiAna2V5JyA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdEFzc2VydE11bHRpTGluZUVxdWFsKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRNdWx0aUxpbmVFcXVhbCcsICgiIiwgImZvbyIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtyIlwrIGZvbyQiLCAiXm9vcHMkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciJcKyBmb28kIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciJcKyBmb28gOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRMZXNzKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRMZXNzJywgKDIsIDEpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiXjIgbm90IGxlc3MgdGhhbiAxJCIsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXjIgbm90IGxlc3MgdGhhbiAxJCIsICJeMiBub3QgbGVzcyB0aGFuIDEgOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRMZXNzRXF1YWwoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXMoJ2Fzc2VydExlc3NFcXVhbCcsICgyLCAxKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIl4yIG5vdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMSQiLCAiXm9vcHMkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4yIG5vdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMSQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXjIgbm90IGxlc3MgdGhhbiBvciBlcXVhbCB0byAxIDogb29wcyQiXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0R3JlYXRlcihzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0R3JlYXRlcicsICgxLCAyKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIl4xIG5vdCBncmVhdGVyIHRoYW4gMiQiLCAiXm9vcHMkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4xIG5vdCBncmVhdGVyIHRoYW4gMiQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXjEgbm90IGdyZWF0ZXIgdGhhbiAyIDogb29wcyQiXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0R3JlYXRlckVxdWFsKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRHcmVhdGVyRXF1YWwnLCAoMSwgMiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJeMSBub3QgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDIkIiwgIl5vb3BzJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJeMSBub3QgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDIkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4xIG5vdCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMiA6IG9vcHMkIl0pDQoNCiAgICBkZWYgdGVzdEFzc2VydElzTm9uZShzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0SXNOb25lJywgKCdub3QgTm9uZScsKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIl4nbm90IE5vbmUnIGlzIG5vdCBOb25lJCIsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXidub3QgTm9uZScgaXMgbm90IE5vbmUkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4nbm90IE5vbmUnIGlzIG5vdCBOb25lIDogb29wcyQiXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0SXNOb3ROb25lKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzKCdhc3NlcnRJc05vdE5vbmUnLCAoTm9uZSwpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiXnVuZXhwZWN0ZWRseSBOb25lJCIsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXnVuZXhwZWN0ZWRseSBOb25lJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJedW5leHBlY3RlZGx5IE5vbmUgOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRJcyhzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0SXMnLCAoTm9uZSwgJ2ZvbycpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiXk5vbmUgaXMgbm90ICdmb28nJCIsICJeb29wcyQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXk5vbmUgaXMgbm90ICdmb28nJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJeTm9uZSBpcyBub3QgJ2ZvbycgOiBvb3BzJCJdKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRJc05vdChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlcygnYXNzZXJ0SXNOb3QnLCAoTm9uZSwgTm9uZSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJedW5leHBlY3RlZGx5IGlkZW50aWNhbDogTm9uZSQiLCAiXm9vcHMkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl51bmV4cGVjdGVkbHkgaWRlbnRpY2FsOiBOb25lJCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJedW5leHBlY3RlZGx5IGlkZW50aWNhbDogTm9uZSA6IG9vcHMkIl0pDQoNCg0KICAgIGRlZiBhc3NlcnRNZXNzYWdlc0NNKHNlbGYsIG1ldGhvZE5hbWUsIGFyZ3MsIGZ1bmMsIGVycm9ycyk6DQogICAgICAgICIiIg0KICAgICAgICBDaGVjayB0aGF0IHRoZSBjb3JyZWN0IGVycm9yIG1lc3NhZ2VzIGFyZSByYWlzZWQgd2hpbGUgZXhlY3V0aW5nOg0KICAgICAgICAgIHdpdGggbWV0aG9kKCphcmdzKToNCiAgICAgICAgICAgICAgZnVuYygpDQogICAgICAgICplcnJvcnMqIHNob3VsZCBiZSBhIGxpc3Qgb2YgNCByZWdleCB0aGF0IG1hdGNoIHRoZSBlcnJvciB3aGVuOg0KICAgICAgICAgIDEpIGxvbmdNZXNzYWdlID0gRmFsc2UgYW5kIG5vIG1zZyBwYXNzZWQ7DQogICAgICAgICAgMikgbG9uZ01lc3NhZ2UgPSBGYWxzZSBhbmQgbXNnIHBhc3NlZDsNCiAgICAgICAgICAzKSBsb25nTWVzc2FnZSA9IFRydWUgYW5kIG5vIG1zZyBwYXNzZWQ7DQogICAgICAgICAgNCkgbG9uZ01lc3NhZ2UgPSBUcnVlIGFuZCBtc2cgcGFzc2VkOw0KICAgICAgICAiIiINCiAgICAgICAgcCA9IHByb2R1Y3QoKHNlbGYudGVzdGFibGVGYWxzZSwgc2VsZi50ZXN0YWJsZVRydWUpLA0KICAgICAgICAgICAgICAgICAgICAoe30sIHsibXNnIjogIm9vcHMifSkpDQogICAgICAgIGZvciAoY2xzLCBrd2FyZ3MpLCBlcnIgaW4gemlwKHAsIGVycm9ycyk6DQogICAgICAgICAgICBtZXRob2QgPSBnZXRhdHRyKGNscywgbWV0aG9kTmFtZSkNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXNSZWdleChjbHMuZmFpbHVyZUV4Y2VwdGlvbiwgZXJyKToNCiAgICAgICAgICAgICAgICB3aXRoIG1ldGhvZCgqYXJncywgKiprd2FyZ3MpIGFzIGNtOg0KICAgICAgICAgICAgICAgICAgICBmdW5jKCkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0UmFpc2VzKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzQ00oJ2Fzc2VydFJhaXNlcycsIChUeXBlRXJyb3IsKSwgbGFtYmRhOiBOb25lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydeVHlwZUVycm9yIG5vdCByYWlzZWQkJywgJ15vb3BzJCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15UeXBlRXJyb3Igbm90IHJhaXNlZCQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeVHlwZUVycm9yIG5vdCByYWlzZWQgOiBvb3BzJCddKQ0KDQogICAgZGVmIHRlc3RBc3NlcnRSYWlzZXNSZWdleChzZWxmKToNCiAgICAgICAgIyB0ZXN0IGVycm9yIG5vdCByYWlzZWQNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlc0NNKCdhc3NlcnRSYWlzZXNSZWdleCcsIChUeXBlRXJyb3IsICd1bnVzZWQgcmVnZXgnKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbWJkYTogTm9uZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnXlR5cGVFcnJvciBub3QgcmFpc2VkJCcsICdeb29wcyQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeVHlwZUVycm9yIG5vdCByYWlzZWQkJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXlR5cGVFcnJvciBub3QgcmFpc2VkIDogb29wcyQnXSkNCiAgICAgICAgIyB0ZXN0IGVycm9yIHJhaXNlZCBidXQgd2l0aCB3cm9uZyBtZXNzYWdlDQogICAgICAgIGRlZiByYWlzZV93cm9uZ19tZXNzYWdlKCk6DQogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ZvbycpDQogICAgICAgIHNlbGYuYXNzZXJ0TWVzc2FnZXNDTSgnYXNzZXJ0UmFpc2VzUmVnZXgnLCAoVHlwZUVycm9yLCAncmVnZXgnKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlX3dyb25nX21lc3NhZ2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ14icmVnZXgiIGRvZXMgbm90IG1hdGNoICJmb28iJCcsICdeb29wcyQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeInJlZ2V4IiBkb2VzIG5vdCBtYXRjaCAiZm9vIiQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeInJlZ2V4IiBkb2VzIG5vdCBtYXRjaCAiZm9vIiA6IG9vcHMkJ10pDQoNCiAgICBkZWYgdGVzdEFzc2VydFdhcm5zKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzQ00oJ2Fzc2VydFdhcm5zJywgKFVzZXJXYXJuaW5nLCksIGxhbWJkYTogTm9uZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnXlVzZXJXYXJuaW5nIG5vdCB0cmlnZ2VyZWQkJywgJ15vb3BzJCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15Vc2VyV2FybmluZyBub3QgdHJpZ2dlcmVkJCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15Vc2VyV2FybmluZyBub3QgdHJpZ2dlcmVkIDogb29wcyQnXSkNCg0KICAgIGRlZiB0ZXN0QXNzZXJ0V2FybnNSZWdleChzZWxmKToNCiAgICAgICAgIyB0ZXN0IGVycm9yIG5vdCByYWlzZWQNCiAgICAgICAgc2VsZi5hc3NlcnRNZXNzYWdlc0NNKCdhc3NlcnRXYXJuc1JlZ2V4JywgKFVzZXJXYXJuaW5nLCAndW51c2VkIHJlZ2V4JyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW1iZGE6IE5vbmUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ15Vc2VyV2FybmluZyBub3QgdHJpZ2dlcmVkJCcsICdeb29wcyQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeVXNlcldhcm5pbmcgbm90IHRyaWdnZXJlZCQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdeVXNlcldhcm5pbmcgbm90IHRyaWdnZXJlZCA6IG9vcHMkJ10pDQogICAgICAgICMgdGVzdCB3YXJuaW5nIHJhaXNlZCBidXQgd2l0aCB3cm9uZyBtZXNzYWdlDQogICAgICAgIGRlZiByYWlzZV93cm9uZ19tZXNzYWdlKCk6DQogICAgICAgICAgICB3YXJuaW5ncy53YXJuKCdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydE1lc3NhZ2VzQ00oJ2Fzc2VydFdhcm5zUmVnZXgnLCAoVXNlcldhcm5pbmcsICdyZWdleCcpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2Vfd3JvbmdfbWVzc2FnZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnXiJyZWdleCIgZG9lcyBub3QgbWF0Y2ggImZvbyIkJywgJ15vb3BzJCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ14icmVnZXgiIGRvZXMgbm90IG1hdGNoICJmb28iJCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ14icmVnZXgiIGRvZXMgbm90IG1hdGNoICJmb28iIDogb29wcyQnXSkNCg==',
'/Lib/unittest/test/test_break.py':'aW1wb3J0IGdjDQppbXBvcnQgaW8NCmltcG9ydCBvcw0KaW1wb3J0IHN5cw0KaW1wb3J0IHNpZ25hbA0KaW1wb3J0IHdlYWtyZWYNCg0KaW1wb3J0IHVuaXR0ZXN0DQoNCg0KQHVuaXR0ZXN0LnNraXBVbmxlc3MoaGFzYXR0cihvcywgJ2tpbGwnKSwgIlRlc3QgcmVxdWlyZXMgb3Mua2lsbCIpDQpAdW5pdHRlc3Quc2tpcElmKHN5cy5wbGF0Zm9ybSA9PSJ3aW4zMiIsICJUZXN0IGNhbm5vdCBydW4gb24gV2luZG93cyIpDQpAdW5pdHRlc3Quc2tpcElmKHN5cy5wbGF0Zm9ybSA9PSAnZnJlZWJzZDYnLCAiVGVzdCBraWxscyByZWdydGVzdCBvbiBmcmVlYnNkNiAiDQogICAgImlmIHRocmVhZHMgaGF2ZSBiZWVuIHVzZWQiKQ0KY2xhc3MgVGVzdEJyZWFrKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiBzZXRVcChzZWxmKToNCiAgICAgICAgc2VsZi5fZGVmYXVsdF9oYW5kbGVyID0gc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKQ0KDQogICAgZGVmIHRlYXJEb3duKHNlbGYpOg0KICAgICAgICBzaWduYWwuc2lnbmFsKHNpZ25hbC5TSUdJTlQsIHNlbGYuX2RlZmF1bHRfaGFuZGxlcikNCiAgICAgICAgdW5pdHRlc3Quc2lnbmFscy5fcmVzdWx0cyA9IHdlYWtyZWYuV2Vha0tleURpY3Rpb25hcnkoKQ0KICAgICAgICB1bml0dGVzdC5zaWduYWxzLl9pbnRlcnJ1cHRfaGFuZGxlciA9IE5vbmUNCg0KDQogICAgZGVmIHRlc3RJbnN0YWxsSGFuZGxlcihzZWxmKToNCiAgICAgICAgZGVmYXVsdF9oYW5kbGVyID0gc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKQ0KICAgICAgICB1bml0dGVzdC5pbnN0YWxsSGFuZGxlcigpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKSwgZGVmYXVsdF9oYW5kbGVyKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHBpZCA9IG9zLmdldHBpZCgpDQogICAgICAgICAgICBvcy5raWxsKHBpZCwgc2lnbmFsLlNJR0lOVCkNCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgc2VsZi5mYWlsKCJLZXlib2FyZEludGVycnVwdCBub3QgaGFuZGxlZCIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHVuaXR0ZXN0LnNpZ25hbHMuX2ludGVycnVwdF9oYW5kbGVyLmNhbGxlZCkNCg0KICAgIGRlZiB0ZXN0UmVnaXN0ZXJSZXN1bHQoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5yZWdpc3RlclJlc3VsdChyZXN1bHQpDQoNCiAgICAgICAgZm9yIHJlZiBpbiB1bml0dGVzdC5zaWduYWxzLl9yZXN1bHRzOg0KICAgICAgICAgICAgaWYgcmVmIGlzIHJlc3VsdDoNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZWxpZiByZWYgaXMgbm90IHJlc3VsdDoNCiAgICAgICAgICAgICAgICBzZWxmLmZhaWwoIm9kZCBvYmplY3QgaW4gcmVzdWx0IHNldCIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoInJlc3VsdCBub3QgZm91bmQiKQ0KDQoNCiAgICBkZWYgdGVzdEludGVycnVwdENhdWdodChzZWxmKToNCiAgICAgICAgZGVmYXVsdF9oYW5kbGVyID0gc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKQ0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5pbnN0YWxsSGFuZGxlcigpDQogICAgICAgIHVuaXR0ZXN0LnJlZ2lzdGVyUmVzdWx0KHJlc3VsdCkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCksIGRlZmF1bHRfaGFuZGxlcikNCg0KICAgICAgICBkZWYgdGVzdChyZXN1bHQpOg0KICAgICAgICAgICAgcGlkID0gb3MuZ2V0cGlkKCkNCiAgICAgICAgICAgIG9zLmtpbGwocGlkLCBzaWduYWwuU0lHSU5UKQ0KICAgICAgICAgICAgcmVzdWx0LmJyZWFrQ2F1Z2h0ID0gVHJ1ZQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC5zaG91bGRTdG9wKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRlc3QocmVzdWx0KQ0KICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6DQogICAgICAgICAgICBzZWxmLmZhaWwoIktleWJvYXJkSW50ZXJydXB0IG5vdCBoYW5kbGVkIikNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC5icmVha0NhdWdodCkNCg0KDQogICAgZGVmIHRlc3RTZWNvbmRJbnRlcnJ1cHQoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5pbnN0YWxsSGFuZGxlcigpDQogICAgICAgIHVuaXR0ZXN0LnJlZ2lzdGVyUmVzdWx0KHJlc3VsdCkNCg0KICAgICAgICBkZWYgdGVzdChyZXN1bHQpOg0KICAgICAgICAgICAgcGlkID0gb3MuZ2V0cGlkKCkNCiAgICAgICAgICAgIG9zLmtpbGwocGlkLCBzaWduYWwuU0lHSU5UKQ0KICAgICAgICAgICAgcmVzdWx0LmJyZWFrQ2F1Z2h0ID0gVHJ1ZQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC5zaG91bGRTdG9wKQ0KICAgICAgICAgICAgb3Mua2lsbChwaWQsIHNpZ25hbC5TSUdJTlQpDQogICAgICAgICAgICBzZWxmLmZhaWwoIlNlY29uZCBLZXlib2FyZEludGVycnVwdCBub3QgcmFpc2VkIikNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0ZXN0KHJlc3VsdCkNCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJTZWNvbmQgS2V5Ym9hcmRJbnRlcnJ1cHQgbm90IHJhaXNlZCIpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQuYnJlYWtDYXVnaHQpDQoNCg0KICAgIGRlZiB0ZXN0VHdvUmVzdWx0cyhzZWxmKToNCiAgICAgICAgdW5pdHRlc3QuaW5zdGFsbEhhbmRsZXIoKQ0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5yZWdpc3RlclJlc3VsdChyZXN1bHQpDQogICAgICAgIG5ld19oYW5kbGVyID0gc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKQ0KDQogICAgICAgIHJlc3VsdDIgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgdW5pdHRlc3QucmVnaXN0ZXJSZXN1bHQocmVzdWx0MikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpLCBuZXdfaGFuZGxlcikNCg0KICAgICAgICByZXN1bHQzID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQoNCiAgICAgICAgZGVmIHRlc3QocmVzdWx0KToNCiAgICAgICAgICAgIHBpZCA9IG9zLmdldHBpZCgpDQogICAgICAgICAgICBvcy5raWxsKHBpZCwgc2lnbmFsLlNJR0lOVCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0ZXN0KHJlc3VsdCkNCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgc2VsZi5mYWlsKCJLZXlib2FyZEludGVycnVwdCBub3QgaGFuZGxlZCIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC5zaG91bGRTdG9wKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0Mi5zaG91bGRTdG9wKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKHJlc3VsdDMuc2hvdWxkU3RvcCkNCg0KDQogICAgZGVmIHRlc3RIYW5kbGVyUmVwbGFjZWRCdXRDYWxsZWQoc2VsZik6DQogICAgICAgICMgSWYgb3VyIGhhbmRsZXIgaGFzIGJlZW4gcmVwbGFjZWQgKGlzIG5vIGxvbmdlciBpbnN0YWxsZWQpIGJ1dCBpcw0KICAgICAgICAjIGNhbGxlZCBieSB0aGUgKm5ldyogaGFuZGxlciwgdGhlbiBpdCBpc24ndCBzYWZlIHRvIGRlbGF5IHRoZQ0KICAgICAgICAjIFNJR0lOVCBhbmQgd2Ugc2hvdWxkIGltbWVkaWF0ZWx5IGRlbGVnYXRlIHRvIHRoZSBkZWZhdWx0IGhhbmRsZXINCiAgICAgICAgdW5pdHRlc3QuaW5zdGFsbEhhbmRsZXIoKQ0KDQogICAgICAgIGhhbmRsZXIgPSBzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpDQogICAgICAgIGRlZiBuZXdfaGFuZGxlcihmcmFtZSwgc2lnbnVtKToNCiAgICAgICAgICAgIGhhbmRsZXIoZnJhbWUsIHNpZ251bSkNCiAgICAgICAgc2lnbmFsLnNpZ25hbChzaWduYWwuU0lHSU5ULCBuZXdfaGFuZGxlcikNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBwaWQgPSBvcy5nZXRwaWQoKQ0KICAgICAgICAgICAgb3Mua2lsbChwaWQsIHNpZ25hbC5TSUdJTlQpDQogICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgicmVwbGFjZWQgYnV0IGRlbGVnYXRlZCBoYW5kbGVyIGRvZXNuJ3QgcmFpc2UgaW50ZXJydXB0IikNCg0KICAgIGRlZiB0ZXN0UnVubmVyKHNlbGYpOg0KICAgICAgICAjIENyZWF0aW5nIGEgVGV4dFRlc3RSdW5uZXIgd2l0aCB0aGUgYXBwcm9wcmlhdGUgYXJndW1lbnQgc2hvdWxkDQogICAgICAgICMgcmVnaXN0ZXIgdGhlIFRleHRUZXN0UmVzdWx0IGl0IGNyZWF0ZXMNCiAgICAgICAgcnVubmVyID0gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoc3RyZWFtPWlvLlN0cmluZ0lPKCkpDQoNCiAgICAgICAgcmVzdWx0ID0gcnVubmVyLnJ1bih1bml0dGVzdC5UZXN0U3VpdGUoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRJbihyZXN1bHQsIHVuaXR0ZXN0LnNpZ25hbHMuX3Jlc3VsdHMpDQoNCiAgICBkZWYgdGVzdFdlYWtSZWZlcmVuY2VzKHNlbGYpOg0KICAgICAgICAjIENhbGxpbmcgcmVnaXN0ZXJSZXN1bHQgb24gYSByZXN1bHQgc2hvdWxkIG5vdCBrZWVwIGl0IGFsaXZlDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5yZWdpc3RlclJlc3VsdChyZXN1bHQpDQoNCiAgICAgICAgcmVmID0gd2Vha3JlZi5yZWYocmVzdWx0KQ0KICAgICAgICBkZWwgcmVzdWx0DQoNCiAgICAgICAgIyBGb3Igbm9uLXJlZmVyZW5jZSBjb3VudGluZyBpbXBsZW1lbnRhdGlvbnMNCiAgICAgICAgZ2MuY29sbGVjdCgpO2djLmNvbGxlY3QoKQ0KICAgICAgICBzZWxmLmFzc2VydElzTm9uZShyZWYoKSkNCg0KDQogICAgZGVmIHRlc3RSZW1vdmVSZXN1bHQoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICB1bml0dGVzdC5yZWdpc3RlclJlc3VsdChyZXN1bHQpDQoNCiAgICAgICAgdW5pdHRlc3QuaW5zdGFsbEhhbmRsZXIoKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUodW5pdHRlc3QucmVtb3ZlUmVzdWx0KHJlc3VsdCkpDQoNCiAgICAgICAgIyBTaG91bGQgdGhpcyByYWlzZSBhbiBlcnJvciBpbnN0ZWFkPw0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKHVuaXR0ZXN0LnJlbW92ZVJlc3VsdCh1bml0dGVzdC5UZXN0UmVzdWx0KCkpKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHBpZCA9IG9zLmdldHBpZCgpDQogICAgICAgICAgICBvcy5raWxsKHBpZCwgc2lnbmFsLlNJR0lOVCkNCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocmVzdWx0LnNob3VsZFN0b3ApDQoNCiAgICBkZWYgdGVzdE1haW5JbnN0YWxsc0hhbmRsZXIoc2VsZik6DQogICAgICAgIGZhaWxmYXN0ID0gb2JqZWN0KCkNCiAgICAgICAgdGVzdCA9IG9iamVjdCgpDQogICAgICAgIHZlcmJvc2l0eSA9IG9iamVjdCgpDQogICAgICAgIHJlc3VsdCA9IG9iamVjdCgpDQogICAgICAgIGRlZmF1bHRfaGFuZGxlciA9IHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCkNCg0KICAgICAgICBjbGFzcyBGYWtlUnVubmVyKG9iamVjdCk6DQogICAgICAgICAgICBpbml0QXJncyA9IFtdDQogICAgICAgICAgICBydW5BcmdzID0gW10NCiAgICAgICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAgICAgICAgIHNlbGYuaW5pdEFyZ3MuYXBwZW5kKChhcmdzLCBrd2FyZ3MpKQ0KICAgICAgICAgICAgZGVmIHJ1bihzZWxmLCB0ZXN0KToNCiAgICAgICAgICAgICAgICBzZWxmLnJ1bkFyZ3MuYXBwZW5kKHRlc3QpDQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdA0KDQogICAgICAgIGNsYXNzIFByb2dyYW0odW5pdHRlc3QuVGVzdFByb2dyYW0pOg0KICAgICAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIGNhdGNoYnJlYWspOg0KICAgICAgICAgICAgICAgIHNlbGYuZXhpdCA9IEZhbHNlDQogICAgICAgICAgICAgICAgc2VsZi52ZXJib3NpdHkgPSB2ZXJib3NpdHkNCiAgICAgICAgICAgICAgICBzZWxmLmZhaWxmYXN0ID0gZmFpbGZhc3QNCiAgICAgICAgICAgICAgICBzZWxmLmNhdGNoYnJlYWsgPSBjYXRjaGJyZWFrDQogICAgICAgICAgICAgICAgc2VsZi50ZXN0UnVubmVyID0gRmFrZVJ1bm5lcg0KICAgICAgICAgICAgICAgIHNlbGYudGVzdCA9IHRlc3QNCiAgICAgICAgICAgICAgICBzZWxmLnJlc3VsdCA9IE5vbmUNCg0KICAgICAgICBwID0gUHJvZ3JhbShGYWxzZSkNCiAgICAgICAgcC5ydW5UZXN0cygpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGYWtlUnVubmVyLmluaXRBcmdzLCBbKCgpLCB7J2J1ZmZlcic6IE5vbmUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2ZXJib3NpdHknOiB2ZXJib3NpdHksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmYWlsZmFzdCc6IGZhaWxmYXN0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd2FybmluZ3MnOiBOb25lfSldKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZha2VSdW5uZXIucnVuQXJncywgW3Rlc3RdKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHAucmVzdWx0LCByZXN1bHQpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpLCBkZWZhdWx0X2hhbmRsZXIpDQoNCiAgICAgICAgRmFrZVJ1bm5lci5pbml0QXJncyA9IFtdDQogICAgICAgIEZha2VSdW5uZXIucnVuQXJncyA9IFtdDQogICAgICAgIHAgPSBQcm9ncmFtKFRydWUpDQogICAgICAgIHAucnVuVGVzdHMoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRmFrZVJ1bm5lci5pbml0QXJncywgWygoKSwgeydidWZmZXInOiBOb25lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmVyYm9zaXR5JzogdmVyYm9zaXR5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmFpbGZhc3QnOiBmYWlsZmFzdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmdzJzogTm9uZX0pXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGYWtlUnVubmVyLnJ1bkFyZ3MsIFt0ZXN0XSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwLnJlc3VsdCwgcmVzdWx0KQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKSwgZGVmYXVsdF9oYW5kbGVyKQ0KDQogICAgZGVmIHRlc3RSZW1vdmVIYW5kbGVyKHNlbGYpOg0KICAgICAgICBkZWZhdWx0X2hhbmRsZXIgPSBzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpDQogICAgICAgIHVuaXR0ZXN0Lmluc3RhbGxIYW5kbGVyKCkNCiAgICAgICAgdW5pdHRlc3QucmVtb3ZlSGFuZGxlcigpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKSwgZGVmYXVsdF9oYW5kbGVyKQ0KDQogICAgICAgICMgY2hlY2sgdGhhdCBjYWxsaW5nIHJlbW92ZUhhbmRsZXIgbXVsdGlwbGUgdGltZXMgaGFzIG5vIGlsbC1lZmZlY3QNCiAgICAgICAgdW5pdHRlc3QucmVtb3ZlSGFuZGxlcigpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2lnbmFsLmdldHNpZ25hbChzaWduYWwuU0lHSU5UKSwgZGVmYXVsdF9oYW5kbGVyKQ0KDQogICAgZGVmIHRlc3RSZW1vdmVIYW5kbGVyQXNEZWNvcmF0b3Ioc2VsZik6DQogICAgICAgIGRlZmF1bHRfaGFuZGxlciA9IHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCkNCiAgICAgICAgdW5pdHRlc3QuaW5zdGFsbEhhbmRsZXIoKQ0KDQogICAgICAgIEB1bml0dGVzdC5yZW1vdmVIYW5kbGVyDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCksIGRlZmF1bHRfaGFuZGxlcikNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpLCBkZWZhdWx0X2hhbmRsZXIpDQo=',
'/Lib/unittest/test/_test_warnings.py':'IyBoZWxwZXIgbW9kdWxlIGZvciB0ZXN0X3J1bm5lci5UZXN0X1RleHRUZXN0UnVubmVyLnRlc3Rfd2FybmluZ3MNCg0KIiIiDQpUaGlzIG1vZHVsZSBoYXMgYSBudW1iZXIgb2YgdGVzdHMgdGhhdCByYWlzZSBkaWZmZXJlbnQga2luZHMgb2Ygd2FybmluZ3MuDQpXaGVuIHRoZSB0ZXN0cyBhcmUgcnVuLCB0aGUgd2FybmluZ3MgYXJlIGNhdWdodCBhbmQgdGhlaXIgbWVzc2FnZXMgYXJlIHByaW50ZWQNCnRvIHN0ZG91dC4gIFRoaXMgbW9kdWxlIGFsc28gYWNjZXB0cyBhbiBhcmcgdGhhdCBpcyB0aGVuIHBhc3NlZCB0bw0KdW5pdHRlc3QubWFpbiB0byBhZmZlY3QgdGhlIGJlaGF2aW9yIG9mIHdhcm5pbmdzLg0KVGVzdF9UZXh0VGVzdFJ1bm5lci50ZXN0X3dhcm5pbmdzIGV4ZWN1dGVzIHRoaXMgc2NyaXB0IHdpdGggZGlmZmVyZW50DQpjb21iaW5hdGlvbnMgb2Ygd2FybmluZ3MgYXJncyBhbmQgLVcgZmxhZ3MgYW5kIGNoZWNrIHRoYXQgdGhlIG91dHB1dCBpcyBjb3JyZWN0Lg0KU2VlICMxMDUzNS4NCiIiIg0KDQppbXBvcnQgc3lzDQppbXBvcnQgdW5pdHRlc3QNCmltcG9ydCB3YXJuaW5ncw0KDQpkZWYgd2FybmZ1bigpOg0KICAgIHdhcm5pbmdzLndhcm4oJ3J3JywgUnVudGltZVdhcm5pbmcpDQoNCmNsYXNzIFRlc3RXYXJuaW5ncyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgIyB1bml0dGVzdCB3YXJuaW5ncyB3aWxsIGJlIHByaW50ZWQgYXQgbW9zdCBvbmNlIHBlciB0eXBlIChtYXggb25lIG1lc3NhZ2UNCiAgICAjIGZvciB0aGUgZmFpbCogbWV0aG9kcywgYW5kIG9uZSBmb3IgdGhlIGFzc2VydCogbWV0aG9kcykNCiAgICBkZWYgdGVzdF9hc3NlcnQoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWxzKDIrMiwgNCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbHMoMioyLCA0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFscygyKioyLCA0KQ0KDQogICAgZGVmIHRlc3RfZmFpbChzZWxmKToNCiAgICAgICAgc2VsZi5mYWlsVW5sZXNzKDEpDQogICAgICAgIHNlbGYuZmFpbFVubGVzcyhUcnVlKQ0KDQogICAgZGVmIHRlc3Rfb3RoZXJfdW5pdHRlc3Qoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0QWxtb3N0RXF1YWwoMisyLCA0KQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEFsbW9zdEVxdWFsKDQrNCwgMikNCg0KICAgICMgdGhlc2Ugd2FybmluZ3MgYXJlIG5vcm1hbGx5IHNpbGVuY2VkLCBidXQgdGhleSBhcmUgcHJpbnRlZCBpbiB1bml0dGVzdA0KICAgIGRlZiB0ZXN0X2RlcHJlY2F0aW9uKHNlbGYpOg0KICAgICAgICB3YXJuaW5ncy53YXJuKCdkdycsIERlcHJlY2F0aW9uV2FybmluZykNCiAgICAgICAgd2FybmluZ3Mud2FybignZHcnLCBEZXByZWNhdGlvbldhcm5pbmcpDQogICAgICAgIHdhcm5pbmdzLndhcm4oJ2R3JywgRGVwcmVjYXRpb25XYXJuaW5nKQ0KDQogICAgZGVmIHRlc3RfaW1wb3J0KHNlbGYpOg0KICAgICAgICB3YXJuaW5ncy53YXJuKCdpdycsIEltcG9ydFdhcm5pbmcpDQogICAgICAgIHdhcm5pbmdzLndhcm4oJ2l3JywgSW1wb3J0V2FybmluZykNCiAgICAgICAgd2FybmluZ3Mud2FybignaXcnLCBJbXBvcnRXYXJuaW5nKQ0KDQogICAgIyB1c2VyIHdhcm5pbmdzIHNob3VsZCBhbHdheXMgYmUgcHJpbnRlZA0KICAgIGRlZiB0ZXN0X3dhcm5pbmcoc2VsZik6DQogICAgICAgIHdhcm5pbmdzLndhcm4oJ3V3JykNCiAgICAgICAgd2FybmluZ3Mud2FybigndXcnKQ0KICAgICAgICB3YXJuaW5ncy53YXJuKCd1dycpDQoNCiAgICAjIHRoZXNlIHdhcm5pbmdzIGNvbWUgZnJvbSB0aGUgc2FtZSBwbGFjZTsgdGhleSB3aWxsIGJlIHByaW50ZWQNCiAgICAjIG9ubHkgb25jZSBieSBkZWZhdWx0IG9yIHRocmVlIHRpbWVzIGlmIHRoZSAnYWx3YXlzJyBmaWx0ZXIgaXMgdXNlZA0KICAgIGRlZiB0ZXN0X2Z1bmN0aW9uKHNlbGYpOg0KDQogICAgICAgIHdhcm5mdW4oKQ0KICAgICAgICB3YXJuZnVuKCkNCiAgICAgICAgd2FybmZ1bigpDQoNCg0KDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MocmVjb3JkPVRydWUpIGFzIHdzOg0KICAgICAgICAjIGlmIGFuIGFyZyBpcyBwcm92aWRlZCBwYXNzIGl0IHRvIHVuaXR0ZXN0Lm1haW4gYXMgJ3dhcm5pbmdzJw0KICAgICAgICBpZiBsZW4oc3lzLmFyZ3YpID09IDI6DQogICAgICAgICAgICB1bml0dGVzdC5tYWluKGV4aXQ9RmFsc2UsIHdhcm5pbmdzPXN5cy5hcmd2LnBvcCgpKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgdW5pdHRlc3QubWFpbihleGl0PUZhbHNlKQ0KDQogICAgIyBwcmludCBhbGwgdGhlIHdhcm5pbmcgbWVzc2FnZXMgY29sbGVjdGVkDQogICAgZm9yIHcgaW4gd3M6DQogICAgICAgIHByaW50KHcubWVzc2FnZSkNCg==',
'/Lib/unittest/test/test_loader.py':'aW1wb3J0IHN5cw0KaW1wb3J0IHR5cGVzDQoNCg0KaW1wb3J0IHVuaXR0ZXN0DQoNCg0KY2xhc3MgVGVzdF9UZXN0TG9hZGVyKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgICMjIyBUZXN0cyBmb3IgVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiAgICAjICJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgY29udGFpbmVkIGluIHRoZSBUZXN0Q2FzZS1kZXJpdmVkDQogICAgIyBjbGFzcyB0ZXN0Q2FzZUNsYXNzIg0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21UZXN0Q2FzZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgdGVzdHMgPSB1bml0dGVzdC5UZXN0U3VpdGUoW0ZvbygndGVzdF8xJyksIEZvbygndGVzdF8yJyldKQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoRm9vKSwgdGVzdHMpDQoNCiAgICAjICJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgY29udGFpbmVkIGluIHRoZSBUZXN0Q2FzZS1kZXJpdmVkDQogICAgIyBjbGFzcyB0ZXN0Q2FzZUNsYXNzIg0KICAgICMNCiAgICAjIE1ha2Ugc3VyZSBpdCBkb2VzIHRoZSByaWdodCB0aGluZyBldmVuIGlmIG5vIHRlc3RzIHdlcmUgZm91bmQNCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tVGVzdENhc2VfX25vX21hdGNoZXMoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgZm9vX2JhcihzZWxmKTogcGFzcw0KDQogICAgICAgIGVtcHR5X3N1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIubG9hZFRlc3RzRnJvbVRlc3RDYXNlKEZvbyksIGVtcHR5X3N1aXRlKQ0KDQogICAgIyAiUmV0dXJuIGEgc3VpdGUgb2YgYWxsIHRlc3RzIGNhc2VzIGNvbnRhaW5lZCBpbiB0aGUgVGVzdENhc2UtZGVyaXZlZA0KICAgICMgY2xhc3MgdGVzdENhc2VDbGFzcyINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgaWYgbG9hZFRlc3RzRnJvbVRlc3RDYXNlKCkgaXMgZ2l2ZW4gYW4gb2JqZWN0DQogICAgIyB0aGF0IGlzbid0IGEgc3ViY2xhc3Mgb2YgVGVzdENhc2U/IFNwZWNpZmljYWxseSwgd2hhdCBoYXBwZW5zDQogICAgIyBpZiB0ZXN0Q2FzZUNsYXNzIGlzIGEgc3ViY2xhc3Mgb2YgVGVzdFN1aXRlPw0KICAgICMNCiAgICAjIFRoaXMgaXMgY2hlY2tlZCBmb3Igc3BlY2lmaWNhbGx5IGluIHRoZSBjb2RlLCBzbyB3ZSBiZXR0ZXIgYWRkIGENCiAgICAjIHRlc3QgZm9yIGl0Lg0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21UZXN0Q2FzZV9fVGVzdFN1aXRlX3N1YmNsYXNzKHNlbGYpOg0KICAgICAgICBjbGFzcyBOb3RBVGVzdENhc2UodW5pdHRlc3QuVGVzdFN1aXRlKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbG9hZGVyLmxvYWRUZXN0c0Zyb21UZXN0Q2FzZShOb3RBVGVzdENhc2UpDQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoJ1Nob3VsZCByYWlzZSBUeXBlRXJyb3InKQ0KDQogICAgIyAiUmV0dXJuIGEgc3VpdGUgb2YgYWxsIHRlc3RzIGNhc2VzIGNvbnRhaW5lZCBpbiB0aGUgVGVzdENhc2UtZGVyaXZlZA0KICAgICMgY2xhc3MgdGVzdENhc2VDbGFzcyINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgbG9hZFRlc3RzRnJvbVRlc3RDYXNlKCkgcGlja3MgdXAgdGhlIGRlZmF1bHQgdGVzdCBtZXRob2QNCiAgICAjIG5hbWUgKGFzIHNwZWNpZmllZCBieSBUZXN0Q2FzZSksIGV2ZW4gdGhvdWdoIHRoZSBtZXRob2QgbmFtZSBkb2VzDQogICAgIyBub3QgbWF0Y2ggdGhlIGRlZmF1bHQgVGVzdExvYWRlci50ZXN0TWV0aG9kUHJlZml4IHN0cmluZw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21UZXN0Q2FzZV9fZGVmYXVsdF9tZXRob2RfbmFtZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW5UZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgIyBUaGlzIGhhcyB0byBiZSBmYWxzZSBmb3IgdGhlIHRlc3QgdG8gc3VjY2VlZA0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKCdydW5UZXN0Jy5zdGFydHN3aXRoKGxvYWRlci50ZXN0TWV0aG9kUHJlZml4KSkNCg0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoRm9vKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbRm9vKCdydW5UZXN0JyldKQ0KDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICMjIyAvVGVzdHMgZm9yIFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbVRlc3RDYXNlDQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU1vZHVsZQ0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KICAgICMgIlRoaXMgbWV0aG9kIHNlYXJjaGVzIGBtb2R1bGVgIGZvciBjbGFzc2VzIGRlcml2ZWQgZnJvbSBUZXN0Q2FzZSINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTW9kdWxlX19UZXN0Q2FzZV9zdWJjbGFzcyhzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBjbGFzcyBNeVRlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbS50ZXN0Y2FzZV8xID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQoNCiAgICAgICAgZXhwZWN0ZWQgPSBbbG9hZGVyLnN1aXRlQ2xhc3MoW015VGVzdENhc2UoJ3Rlc3QnKV0pXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBleHBlY3RlZCkNCg0KICAgICMgIlRoaXMgbWV0aG9kIHNlYXJjaGVzIGBtb2R1bGVgIGZvciBjbGFzc2VzIGRlcml2ZWQgZnJvbSBUZXN0Q2FzZSINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgaWYgbm8gdGVzdHMgYXJlIGZvdW5kIChubyBUZXN0Q2FzZSBpbnN0YW5jZXMpPw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21Nb2R1bGVfX25vX1Rlc3RDYXNlX2luc3RhbmNlcyhzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtdKQ0KDQogICAgIyAiVGhpcyBtZXRob2Qgc2VhcmNoZXMgYG1vZHVsZWAgZm9yIGNsYXNzZXMgZGVyaXZlZCBmcm9tIFRlc3RDYXNlIg0KICAgICMNCiAgICAjIFdoYXQgaGFwcGVucyBpZiBubyB0ZXN0cyBhcmUgZm91bmQgKFRlc3RDYXNlcyBpbnN0YW5jZXMsIGJ1dCBubyB0ZXN0cyk/DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU1vZHVsZV9fbm9fVGVzdENhc2VfdGVzdHMoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgTXlUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIG0udGVzdGNhc2VfMSA9IE15VGVzdENhc2UNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU1vZHVsZShtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtsb2FkZXIuc3VpdGVDbGFzcygpXSkNCg0KICAgICMgIlRoaXMgbWV0aG9kIHNlYXJjaGVzIGBtb2R1bGVgIGZvciBjbGFzc2VzIGRlcml2ZWQgZnJvbSBUZXN0Q2FzZSJzDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIGlmIGxvYWRUZXN0c0Zyb21Nb2R1bGUoKSBpcyBnaXZlbiBzb21ldGhpbmcgb3RoZXINCiAgICAjIHRoYW4gYSBtb2R1bGU/DQogICAgIw0KICAgICMgWFhYIEN1cnJlbnRseSwgaXQgc3VjY2VlZHMgYW55d2F5LiBUaGlzIGZsZXhpYmlsaXR5DQogICAgIyBzaG91bGQgZWl0aGVyIGJlIGRvY3VtZW50ZWQgb3IgbG9hZFRlc3RzRnJvbU1vZHVsZSgpIHNob3VsZA0KICAgICMgcmFpc2UgYSBUeXBlRXJyb3INCiAgICAjDQogICAgIyBYWFggQ2VydGFpbiBwZW9wbGUgYXJlIHVzaW5nIHRoaXMgYmVoYXZpb3VyLiBXZSdsbCBhZGQgYSB0ZXN0IGZvciBpdA0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21Nb2R1bGVfX25vdF9hX21vZHVsZShzZWxmKToNCiAgICAgICAgY2xhc3MgTXlUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgY2xhc3MgTm90QU1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgdGVzdF8yID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKE5vdEFNb2R1bGUpDQoNCiAgICAgICAgcmVmZXJlbmNlID0gW3VuaXR0ZXN0LlRlc3RTdWl0ZShbTXlUZXN0Q2FzZSgndGVzdCcpXSldDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIHJlZmVyZW5jZSkNCg0KDQogICAgIyBDaGVjayB0aGF0IGxvYWRUZXN0c0Zyb21Nb2R1bGUgaG9ub3JzIChvciBub3QpIGEgbW9kdWxlDQogICAgIyB3aXRoIGEgbG9hZF90ZXN0cyBmdW5jdGlvbi4NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTW9kdWxlX19sb2FkX3Rlc3RzKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIE15VGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBtLnRlc3RjYXNlXzEgPSBNeVRlc3RDYXNlDQoNCiAgICAgICAgbG9hZF90ZXN0c19hcmdzID0gW10NCiAgICAgICAgZGVmIGxvYWRfdGVzdHMobG9hZGVyLCB0ZXN0cywgcGF0dGVybik6DQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UodGVzdHMsIHVuaXR0ZXN0LlRlc3RTdWl0ZSkNCiAgICAgICAgICAgIGxvYWRfdGVzdHNfYXJncy5leHRlbmQoKGxvYWRlciwgdGVzdHMsIHBhdHRlcm4pKQ0KICAgICAgICAgICAgcmV0dXJuIHRlc3RzDQogICAgICAgIG0ubG9hZF90ZXN0cyA9IGxvYWRfdGVzdHMNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU1vZHVsZShtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIHVuaXR0ZXN0LlRlc3RTdWl0ZSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkX3Rlc3RzX2FyZ3MsIFtsb2FkZXIsIHN1aXRlLCBOb25lXSkNCg0KICAgICAgICBsb2FkX3Rlc3RzX2FyZ3MgPSBbXQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG0sIHVzZV9sb2FkX3Rlc3RzPUZhbHNlKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRfdGVzdHNfYXJncywgW10pDQoNCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTW9kdWxlX19mYXVsdHlfbG9hZF90ZXN0cyhzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KDQogICAgICAgIGRlZiBsb2FkX3Rlc3RzKGxvYWRlciwgdGVzdHMsIHBhdHRlcm4pOg0KICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdzb21lIGZhaWx1cmUnKQ0KICAgICAgICBtLmxvYWRfdGVzdHMgPSBsb2FkX3Rlc3RzDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21Nb2R1bGUobSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCB1bml0dGVzdC5UZXN0U3VpdGUpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUuY291bnRUZXN0Q2FzZXMoKSwgMSkNCiAgICAgICAgdGVzdCA9IGxpc3Qoc3VpdGUpWzBdDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXNSZWdleChUeXBlRXJyb3IsICJzb21lIGZhaWx1cmUiLCB0ZXN0Lm0pDQoNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyMjIC9UZXN0cyBmb3IgVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKCkNCg0KICAgICMjIyBUZXN0cyBmb3IgVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgpDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjDQogICAgIyBJcyBWYWx1ZUVycm9yIHJhaXNlZCBpbiByZXNwb25zZSB0byBhbiBlbXB0eSBuYW1lPw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19lbXB0eV9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJycpDQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yIGFzIGU6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihlKSwgIkVtcHR5IG1vZHVsZSBuYW1lIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSBmYWlsZWQgdG8gcmFpc2UgVmFsdWVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSBlaXRoZXIgdG8NCiAgICAjIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYSBUZXN0U3VpdGUgaW5zdGFuY2UsIGEgdGVzdCBtZXRob2QNCiAgICAjIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhDQogICAgIyBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UuIg0KICAgICMNCiAgICAjIFdoYXQgaGFwcGVucyB3aGVuIHRoZSBuYW1lIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycz8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fbWFsZm9ybWVkX25hbWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgICMgWFhYIFNob3VsZCB0aGlzIHJhaXNlIFZhbHVlRXJyb3Igb3IgSW1wb3J0RXJyb3I/DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgnYWJjICgpIC8vJykNCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSBmYWlsZWQgdG8gcmFpc2UgVmFsdWVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSAuLi4gdG8gYQ0KICAgICMgbW9kdWxlIg0KICAgICMNCiAgICAjIFdoYXQgaGFwcGVucyB3aGVuIGEgbW9kdWxlIGJ5IHRoYXQgbmFtZSBjYW4ndCBiZSBmb3VuZD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fdW5rbm93bl9tb2R1bGVfbmFtZShzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lKCdzZGFzZmFzZmFzZGYnKQ0KICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3IgYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKGUpLCAiTm8gbW9kdWxlIG5hbWVkICdzZGFzZmFzZmFzZGYnIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSBmYWlsZWQgdG8gcmFpc2UgSW1wb3J0RXJyb3IiKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgd2hlbiB0aGUgbW9kdWxlIGlzIGZvdW5kLCBidXQgdGhlIGF0dHJpYnV0ZSBjYW4ndD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fdW5rbm93bl9hdHRyX25hbWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndW5pdHRlc3Quc2Rhc2Zhc2Zhc2RmJykNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGU6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihlKSwgIidtb2R1bGUnIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICdzZGFzZmFzZmFzZGYnIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSBmYWlsZWQgdG8gcmFpc2UgQXR0cmlidXRlRXJyb3IiKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgd2hlbiB3ZSBwcm92aWRlIHRoZSBtb2R1bGUsIGJ1dCB0aGUgYXR0cmlidXRlIGNhbid0IGJlDQogICAgIyBmb3VuZD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfdW5rbm93bl9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJ3NkYXNmYXNmYXNkZicsIHVuaXR0ZXN0KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKGUpLCAiJ21vZHVsZScgb2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgJ3NkYXNmYXNmYXNkZiciKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lIGZhaWxlZCB0byByYWlzZSBBdHRyaWJ1dGVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSBlaXRoZXIgdG8NCiAgICAjIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYSBUZXN0U3VpdGUgaW5zdGFuY2UsIGEgdGVzdCBtZXRob2QNCiAgICAjIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhDQogICAgIyBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UuIg0KICAgICMgLi4uDQogICAgIyAiVGhlIG1ldGhvZCBvcHRpb25hbGx5IHJlc29sdmVzIG5hbWUgcmVsYXRpdmUgdG8gdGhlIGdpdmVuIG1vZHVsZSINCiAgICAjDQogICAgIyBEb2VzIGxvYWRUZXN0c0Zyb21OYW1lIHJhaXNlIFZhbHVlRXJyb3Igd2hlbiBwYXNzZWQgYW4gZW1wdHkNCiAgICAjIG5hbWUgcmVsYXRpdmUgdG8gYSBwcm92aWRlZCBtb2R1bGU/DQogICAgIw0KICAgICMgWFhYIFNob3VsZCBwcm9iYWJseSByYWlzZSBhIFZhbHVlRXJyb3IgaW5zdGVhZCBvZiBhbiBBdHRyaWJ1dGVFcnJvcg0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19yZWxhdGl2ZV9lbXB0eV9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJycsIHVuaXR0ZXN0KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiRmFpbGVkIHRvIHJhaXNlIEF0dHJpYnV0ZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIyAuLi4NCiAgICAjICJUaGUgbWV0aG9kIG9wdGlvbmFsbHkgcmVzb2x2ZXMgbmFtZSByZWxhdGl2ZSB0byB0aGUgZ2l2ZW4gbW9kdWxlIg0KICAgICMNCiAgICAjIFdoYXQgaGFwcGVucyB3aGVuIGFuIGltcG9zc2libGUgbmFtZSBpcyBnaXZlbiwgcmVsYXRpdmUgdG8gdGhlIHByb3ZpZGVkDQogICAgIyBgbW9kdWxlYD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfbWFsZm9ybWVkX25hbWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgICMgWFhYIFNob3VsZCB0aGlzIHJhaXNlIEF0dHJpYnV0ZUVycm9yIG9yIFZhbHVlRXJyb3I/DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgnYWJjICgpIC8vJywgdW5pdHRlc3QpDQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoIlRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUgZmFpbGVkIHRvIHJhaXNlIFZhbHVlRXJyb3IiKQ0KDQogICAgIyAiVGhlIG1ldGhvZCBvcHRpb25hbGx5IHJlc29sdmVzIG5hbWUgcmVsYXRpdmUgdG8gdGhlIGdpdmVuIG1vZHVsZSINCiAgICAjDQogICAgIyBEb2VzIGxvYWRUZXN0c0Zyb21OYW1lIHJhaXNlIFR5cGVFcnJvciB3aGVuIHRoZSBgbW9kdWxlYCBhcmd1bWVudA0KICAgICMgaXNuJ3QgYSBtb2R1bGUgb2JqZWN0Pw0KICAgICMNCiAgICAjIFhYWCBBY2NlcHRzIHRoZSBub3QtYS1tb2R1bGUgb2JqZWN0LCBpZ25vcm5pbmcgdGhlIG9iamVjdCdzIHR5cGUNCiAgICAjIFRoaXMgc2hvdWxkIHJhaXNlIGFuIGV4Y2VwdGlvbiBvciB0aGUgbWV0aG9kIG5hbWUgc2hvdWxkIGJlIGNoYW5nZWQNCiAgICAjDQogICAgIyBYWFggU29tZSBwZW9wbGUgYXJlIHJlbHlpbmcgb24gdGhpcywgc28ga2VlcCBpdCBmb3Igbm93DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVfX3JlbGF0aXZlX25vdF9hX21vZHVsZShzZWxmKToNCiAgICAgICAgY2xhc3MgTXlUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgY2xhc3MgTm90QU1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgdGVzdF8yID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndGVzdF8yJywgTm90QU1vZHVsZSkNCg0KICAgICAgICByZWZlcmVuY2UgPSBbTXlUZXN0Q2FzZSgndGVzdCcpXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCByZWZlcmVuY2UpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSBlaXRoZXIgdG8NCiAgICAjIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYSBUZXN0U3VpdGUgaW5zdGFuY2UsIGEgdGVzdCBtZXRob2QNCiAgICAjIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhDQogICAgIyBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UuIg0KICAgICMNCiAgICAjIERvZXMgaXQgcmFpc2UgYW4gZXhjZXB0aW9uIGlmIHRoZSBuYW1lIHJlc29sdmVzIHRvIGFuIGludmFsaWQNCiAgICAjIG9iamVjdD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfYmFkX29iamVjdChzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBtLnRlc3RjYXNlXzEgPSBvYmplY3QoKQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJ3Rlc3RjYXNlXzEnLCBtKQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJTaG91bGQgaGF2ZSByYWlzZWQgVHlwZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heQ0KICAgICMgcmVzb2x2ZSBlaXRoZXIgdG8gLi4uIGEgdGVzdCBjYXNlIGNsYXNzIg0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19yZWxhdGl2ZV9UZXN0Q2FzZV9zdWJjbGFzcyhzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBjbGFzcyBNeVRlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbS50ZXN0Y2FzZV8xID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndGVzdGNhc2VfMScsIG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtNeVRlc3RDYXNlKCd0ZXN0JyldKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfVGVzdFN1aXRlKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIE15VGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBtLnRlc3RzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbTXlUZXN0Q2FzZSgndGVzdCcpXSkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJ3Rlc3RzdWl0ZScsIG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW015VGVzdENhc2UoJ3Rlc3QnKV0pDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSAuLi4gdG8NCiAgICAjIC4uLiBhIHRlc3QgbWV0aG9kIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcyINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfdGVzdG1ldGhvZChzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBjbGFzcyBNeVRlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbS50ZXN0Y2FzZV8xID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndGVzdGNhc2VfMS50ZXN0JywgbSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbTXlUZXN0Q2FzZSgndGVzdCcpXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIw0KICAgICMgRG9lcyBsb2FkVGVzdHNGcm9tTmFtZSgpIHJhaXNlIHRoZSBwcm9wZXIgZXhjZXB0aW9uIHdoZW4gdHJ5aW5nIHRvDQogICAgIyByZXNvbHZlICJhIHRlc3QgbWV0aG9kIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcyIgdGhhdCBkb2Vzbid0IGV4aXN0DQogICAgIyBmb3IgdGhlIGdpdmVuIG5hbWUgKHJlbGF0aXZlIHRvIGEgcHJvdmlkZWQgbW9kdWxlKT8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fcmVsYXRpdmVfaW52YWxpZF90ZXN0bWV0aG9kKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIE15VGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBtLnRlc3RjYXNlXzEgPSBNeVRlc3RDYXNlDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndGVzdGNhc2VfMS50ZXN0Zm9vJywgbSkNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGU6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihlKSwgInR5cGUgb2JqZWN0ICdNeVRlc3RDYXNlJyBoYXMgbm8gYXR0cmlidXRlICd0ZXN0Zm9vJyIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoIkZhaWxlZCB0byByYWlzZSBBdHRyaWJ1dGVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSAuLi4gdG8NCiAgICAjIC4uLiBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGEgLi4uIFRlc3RTdWl0ZSBpbnN0YW5jZSINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fY2FsbGFibGVfX1Rlc3RTdWl0ZShzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICB0ZXN0Y2FzZV8xID0gdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZShsYW1iZGE6IE5vbmUpDQogICAgICAgIHRlc3RjYXNlXzIgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgZGVmIHJldHVybl9UZXN0U3VpdGUoKToNCiAgICAgICAgICAgIHJldHVybiB1bml0dGVzdC5UZXN0U3VpdGUoW3Rlc3RjYXNlXzEsIHRlc3RjYXNlXzJdKQ0KICAgICAgICBtLnJldHVybl9UZXN0U3VpdGUgPSByZXR1cm5fVGVzdFN1aXRlDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lKCdyZXR1cm5fVGVzdFN1aXRlJywgbSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW3Rlc3RjYXNlXzEsIHRlc3RjYXNlXzJdKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgLi4uIHRvDQogICAgIyAuLi4gYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhIFRlc3RDYXNlIC4uLiBpbnN0YW5jZSINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fY2FsbGFibGVfX1Rlc3RDYXNlX2luc3RhbmNlKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIHRlc3RjYXNlXzEgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgZGVmIHJldHVybl9UZXN0Q2FzZSgpOg0KICAgICAgICAgICAgcmV0dXJuIHRlc3RjYXNlXzENCiAgICAgICAgbS5yZXR1cm5fVGVzdENhc2UgPSByZXR1cm5fVGVzdENhc2UNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJ3JldHVybl9UZXN0Q2FzZScsIG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFt0ZXN0Y2FzZV8xXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0bw0KICAgICMgLi4uIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYSBUZXN0Q2FzZSAuLi4gaW5zdGFuY2UiDQogICAgIyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgI092ZXJyaWRlIHRoZSBzdWl0ZUNsYXNzIGF0dHJpYnV0ZSB0byBlbnN1cmUgdGhhdCB0aGUgc3VpdGVDbGFzcw0KICAgICNhdHRyaWJ1dGUgaXMgdXNlZA0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19jYWxsYWJsZV9fVGVzdENhc2VfaW5zdGFuY2VfUHJvcGVyU3VpdGVDbGFzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgU3ViVGVzdFN1aXRlKHVuaXR0ZXN0LlRlc3RTdWl0ZSk6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgdGVzdGNhc2VfMSA9IHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KICAgICAgICBkZWYgcmV0dXJuX1Rlc3RDYXNlKCk6DQogICAgICAgICAgICByZXR1cm4gdGVzdGNhc2VfMQ0KICAgICAgICBtLnJldHVybl9UZXN0Q2FzZSA9IHJldHVybl9UZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBsb2FkZXIuc3VpdGVDbGFzcyA9IFN1YlRlc3RTdWl0ZQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgncmV0dXJuX1Rlc3RDYXNlJywgbSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW3Rlc3RjYXNlXzFdKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgLi4uIHRvDQogICAgIyAuLi4gYSB0ZXN0IG1ldGhvZCB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MiDQogICAgIyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgI092ZXJyaWRlIHRoZSBzdWl0ZUNsYXNzIGF0dHJpYnV0ZSB0byBlbnN1cmUgdGhhdCB0aGUgc3VpdGVDbGFzcw0KICAgICNhdHRyaWJ1dGUgaXMgdXNlZA0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19yZWxhdGl2ZV90ZXN0bWV0aG9kX1Byb3BlclN1aXRlQ2xhc3Moc2VsZik6DQogICAgICAgIGNsYXNzIFN1YlRlc3RTdWl0ZSh1bml0dGVzdC5UZXN0U3VpdGUpOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIE15VGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBtLnRlc3RjYXNlXzEgPSBNeVRlc3RDYXNlDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIGxvYWRlci5zdWl0ZUNsYXNzPVN1YlRlc3RTdWl0ZQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndGVzdGNhc2VfMS50ZXN0JywgbSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbTXlUZXN0Q2FzZSgndGVzdCcpXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0bw0KICAgICMgLi4uIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYSBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UiDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIGlmIHRoZSBjYWxsYWJsZSByZXR1cm5zIHNvbWV0aGluZyBlbHNlPw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lX19jYWxsYWJsZV9fd3JvbmdfdHlwZShzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBkZWYgcmV0dXJuX3dyb25nKCk6DQogICAgICAgICAgICByZXR1cm4gNg0KICAgICAgICBtLnJldHVybl93cm9uZyA9IHJldHVybl93cm9uZw0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgncmV0dXJuX3dyb25nJywgbSkNCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSBmYWlsZWQgdG8gcmFpc2UgVHlwZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgY2FuIHJlZmVyIHRvIG1vZHVsZXMgYW5kIHBhY2thZ2VzIHdoaWNoIGhhdmUgbm90IGJlZW4NCiAgICAjIGltcG9ydGVkOyB0aGV5IHdpbGwgYmUgaW1wb3J0ZWQgYXMgYSBzaWRlLWVmZmVjdCINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZV9fbW9kdWxlX25vdF9sb2FkZWQoc2VsZik6DQogICAgICAgICMgV2UncmUgZ29pbmcgdG8gdHJ5IHRvIGxvYWQgdGhpcyBtb2R1bGUgYXMgYSBzaWRlLWVmZmVjdCwgc28gaXQNCiAgICAgICAgIyBiZXR0ZXIgbm90IGJlIGxvYWRlZCBiZWZvcmUgd2UgdHJ5Lg0KICAgICAgICAjDQogICAgICAgIG1vZHVsZV9uYW1lID0gJ3VuaXR0ZXN0LnRlc3QuZHVtbXknDQogICAgICAgIHN5cy5tb2R1bGVzLnBvcChtb2R1bGVfbmFtZSwgTm9uZSkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUobW9kdWxlX25hbWUpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbXSkNCg0KICAgICAgICAgICAgIyBtb2R1bGUgc2hvdWxkIG5vdyBiZSBsb2FkZWQsIHRoYW5rcyB0byBsb2FkVGVzdHNGcm9tTmFtZSgpDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKG1vZHVsZV9uYW1lLCBzeXMubW9kdWxlcykNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGlmIG1vZHVsZV9uYW1lIGluIHN5cy5tb2R1bGVzOg0KICAgICAgICAgICAgICAgIGRlbCBzeXMubW9kdWxlc1ttb2R1bGVfbmFtZV0NCg0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoKQ0KDQogICAgIyMjIFRlc3RzIGZvciBUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcygpDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgIyAiU2ltaWxhciB0byBsb2FkVGVzdHNGcm9tTmFtZSgpLCBidXQgdGFrZXMgYSBzZXF1ZW5jZSBvZiBuYW1lcyByYXRoZXINCiAgICAjIHRoYW4gYSBzaW5nbGUgbmFtZS4iDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIGlmIHRoYXQgc2VxdWVuY2Ugb2YgbmFtZXMgaXMgZW1wdHk/DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19lbXB0eV9uYW1lX2xpc3Qoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbXSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW10pDQoNCiAgICAjICJTaW1pbGFyIHRvIGxvYWRUZXN0c0Zyb21OYW1lKCksIGJ1dCB0YWtlcyBhIHNlcXVlbmNlIG9mIG5hbWVzIHJhdGhlcg0KICAgICMgdGhhbiBhIHNpbmdsZSBuYW1lLiINCiAgICAjIC4uLg0KICAgICMgIlRoZSBtZXRob2Qgb3B0aW9uYWxseSByZXNvbHZlcyBuYW1lIHJlbGF0aXZlIHRvIHRoZSBnaXZlbiBtb2R1bGUiDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIGlmIHRoYXQgc2VxdWVuY2Ugb2YgbmFtZXMgaXMgZW1wdHk/DQogICAgIw0KICAgICMgWFhYIFNob3VsZCB0aGlzIHJhaXNlIGEgVmFsdWVFcnJvciBvciBqdXN0IHJldHVybiBhbiBlbXB0eSBUZXN0U3VpdGU/DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19yZWxhdGl2ZV9lbXB0eV9uYW1lX2xpc3Qoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbXSwgdW5pdHRlc3QpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtdKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjDQogICAgIyBJcyBWYWx1ZUVycm9yIHJhaXNlZCBpbiByZXNwb25zZSB0byBhbiBlbXB0eSBuYW1lPw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lc19fZW1wdHlfbmFtZShzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbJyddKQ0KICAgICAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksICJFbXB0eSBtb2R1bGUgbmFtZSIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoIlRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzIGZhaWxlZCB0byByYWlzZSBWYWx1ZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIHdoZW4gcHJlc2VudGVkIHdpdGggYW4gaW1wb3NzaWJsZSBtb2R1bGUgbmFtZT8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX21hbGZvcm1lZF9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICAjIFhYWCBTaG91bGQgdGhpcyByYWlzZSBWYWx1ZUVycm9yIG9yIEltcG9ydEVycm9yPw0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnYWJjICgpIC8vJ10pDQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoIlRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzIGZhaWxlZCB0byByYWlzZSBWYWx1ZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIHdoZW4gbm8gbW9kdWxlIGNhbiBiZSBmb3VuZCBmb3IgdGhlIGdpdmVuIG5hbWU/DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX191bmtub3duX21vZHVsZV9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnc2Rhc2Zhc2Zhc2RmJ10pDQogICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvciBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksICJObyBtb2R1bGUgbmFtZWQgJ3NkYXNmYXNmYXNkZiciKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyBmYWlsZWQgdG8gcmFpc2UgSW1wb3J0RXJyb3IiKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgd2hlbiB0aGUgbW9kdWxlIGNhbiBiZSBmb3VuZCwgYnV0IG5vdCB0aGUgYXR0cmlidXRlPw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lc19fdW5rbm93bl9hdHRyX25hbWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZXMoWyd1bml0dGVzdC5zZGFzZmFzZmFzZGYnLCAndW5pdHRlc3QnXSkNCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGU6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihlKSwgIidtb2R1bGUnIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICdzZGFzZmFzZmFzZGYnIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiVGVzdExvYWRlci5sb2FkVGVzdHNGcm9tTmFtZXMgZmFpbGVkIHRvIHJhaXNlIEF0dHJpYnV0ZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIyAuLi4NCiAgICAjICJUaGUgbWV0aG9kIG9wdGlvbmFsbHkgcmVzb2x2ZXMgbmFtZSByZWxhdGl2ZSB0byB0aGUgZ2l2ZW4gbW9kdWxlIg0KICAgICMNCiAgICAjIFdoYXQgaGFwcGVucyB3aGVuIGdpdmVuIGFuIHVua25vd24gYXR0cmlidXRlIG9uIGEgc3BlY2lmaWVkIGBtb2R1bGVgDQogICAgIyBhcmd1bWVudD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3Vua25vd25fbmFtZV9yZWxhdGl2ZV8xKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnc2Rhc2Zhc2Zhc2RmJ10sIHVuaXR0ZXN0KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKGUpLCAiJ21vZHVsZScgb2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgJ3NkYXNmYXNmYXNkZiciKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lIGZhaWxlZCB0byByYWlzZSBBdHRyaWJ1dGVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSBlaXRoZXIgdG8NCiAgICAjIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYSBUZXN0U3VpdGUgaW5zdGFuY2UsIGEgdGVzdCBtZXRob2QNCiAgICAjIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhDQogICAgIyBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UuIg0KICAgICMgLi4uDQogICAgIyAiVGhlIG1ldGhvZCBvcHRpb25hbGx5IHJlc29sdmVzIG5hbWUgcmVsYXRpdmUgdG8gdGhlIGdpdmVuIG1vZHVsZSINCiAgICAjDQogICAgIyBEbyB1bmtub3duIGF0dHJpYnV0ZXMgKHJlbGF0aXZlIHRvIGEgcHJvdmlkZWQgbW9kdWxlKSBzdGlsbCByYWlzZSBhbg0KICAgICMgZXhjZXB0aW9uIGV2ZW4gaW4gdGhlIHByZXNlbmNlIG9mIHZhbGlkIGF0dHJpYnV0ZSBuYW1lcz8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3Vua25vd25fbmFtZV9yZWxhdGl2ZV8yKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnVGVzdENhc2UnLCAnc2Rhc2Zhc2Zhc2RmJ10sIHVuaXR0ZXN0KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKGUpLCAiJ21vZHVsZScgb2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgJ3NkYXNmYXNmYXNkZiciKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lIGZhaWxlZCB0byByYWlzZSBBdHRyaWJ1dGVFcnJvciIpDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSBlaXRoZXIgdG8NCiAgICAjIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYSBUZXN0U3VpdGUgaW5zdGFuY2UsIGEgdGVzdCBtZXRob2QNCiAgICAjIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhDQogICAgIyBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UuIg0KICAgICMgLi4uDQogICAgIyAiVGhlIG1ldGhvZCBvcHRpb25hbGx5IHJlc29sdmVzIG5hbWUgcmVsYXRpdmUgdG8gdGhlIGdpdmVuIG1vZHVsZSINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgd2hlbiBmYWNlZCB3aXRoIHRoZSBlbXB0eSBzdHJpbmc/DQogICAgIw0KICAgICMgWFhYIFRoaXMgY3VycmVudGx5IHJhaXNlcyBBdHRyaWJ1dGVFcnJvciwgdGhvdWdoIFZhbHVlRXJyb3IgaXMgcHJvYmFibHkNCiAgICAjIG1vcmUgYXBwcm9wcmlhdGUNCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3JlbGF0aXZlX2VtcHR5X25hbWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZXMoWycnXSwgdW5pdHRlc3QpDQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiRmFpbGVkIHRvIHJhaXNlIFZhbHVlRXJyb3IiKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgZWl0aGVyIHRvDQogICAgIyBhIG1vZHVsZSwgYSB0ZXN0IGNhc2UgY2xhc3MsIGEgVGVzdFN1aXRlIGluc3RhbmNlLCBhIHRlc3QgbWV0aG9kDQogICAgIyB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MsIG9yIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYQ0KICAgICMgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLiINCiAgICAjIC4uLg0KICAgICMgIlRoZSBtZXRob2Qgb3B0aW9uYWxseSByZXNvbHZlcyBuYW1lIHJlbGF0aXZlIHRvIHRoZSBnaXZlbiBtb2R1bGUiDQogICAgIw0KICAgICMgV2hhdCBoYXBwZW5zIHdoZW4gcHJlc2VudGVkIHdpdGggYW4gaW1wb3NzaWJsZSBhdHRyaWJ1dGUgbmFtZT8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3JlbGF0aXZlX21hbGZvcm1lZF9uYW1lKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICAjIFhYWCBTaG91bGQgdGhpcyByYWlzZSBBdHRyaWJ1dGVFcnJvciBvciBWYWx1ZUVycm9yPw0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnYWJjICgpIC8vJ10sIHVuaXR0ZXN0KQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyBmYWlsZWQgdG8gcmFpc2UgVmFsdWVFcnJvciIpDQoNCiAgICAjICJUaGUgbWV0aG9kIG9wdGlvbmFsbHkgcmVzb2x2ZXMgbmFtZSByZWxhdGl2ZSB0byB0aGUgZ2l2ZW4gbW9kdWxlIg0KICAgICMNCiAgICAjIERvZXMgbG9hZFRlc3RzRnJvbU5hbWVzKCkgbWFrZSBzdXJlIHRoZSBwcm92aWRlZCBgbW9kdWxlYCBpcyBpbiBmYWN0DQogICAgIyBhIG1vZHVsZT8NCiAgICAjDQogICAgIyBYWFggVGhpcyB2YWxpZGF0aW9uIGlzIGN1cnJlbnRseSBub3QgZG9uZS4gVGhpcyBmbGV4aWJpbGl0eSBzaG91bGQNCiAgICAjIGVpdGhlciBiZSBkb2N1bWVudGVkIG9yIGEgVHlwZUVycm9yIHNob3VsZCBiZSByYWlzZWQuDQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19yZWxhdGl2ZV9ub3RfYV9tb2R1bGUoc2VsZik6DQogICAgICAgIGNsYXNzIE15VGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIE5vdEFNb2R1bGUob2JqZWN0KToNCiAgICAgICAgICAgIHRlc3RfMiA9IE15VGVzdENhc2UNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsndGVzdF8yJ10sIE5vdEFNb2R1bGUpDQoNCiAgICAgICAgcmVmZXJlbmNlID0gW3VuaXR0ZXN0LlRlc3RTdWl0ZShbTXlUZXN0Q2FzZSgndGVzdCcpXSldDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIHJlZmVyZW5jZSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIGVpdGhlciB0bw0KICAgICMgYSBtb2R1bGUsIGEgdGVzdCBjYXNlIGNsYXNzLCBhIFRlc3RTdWl0ZSBpbnN0YW5jZSwgYSB0ZXN0IG1ldGhvZA0KICAgICMgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzLCBvciBhIGNhbGxhYmxlIG9iamVjdCB3aGljaCByZXR1cm5zIGENCiAgICAjIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZS4iDQogICAgIw0KICAgICMgRG9lcyBpdCByYWlzZSBhbiBleGNlcHRpb24gaWYgdGhlIG5hbWUgcmVzb2x2ZXMgdG8gYW4gaW52YWxpZA0KICAgICMgb2JqZWN0Pw0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lc19fcmVsYXRpdmVfYmFkX29iamVjdChzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBtLnRlc3RjYXNlXzEgPSBvYmplY3QoKQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsndGVzdGNhc2VfMSddLCBtKQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJTaG91bGQgaGF2ZSByYWlzZWQgVHlwZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0bw0KICAgICMgLi4uIGEgdGVzdCBjYXNlIGNsYXNzIg0KICAgIGRlZiB0ZXN0X2xvYWRUZXN0c0Zyb21OYW1lc19fcmVsYXRpdmVfVGVzdENhc2Vfc3ViY2xhc3Moc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgTXlUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIG0udGVzdGNhc2VfMSA9IE15VGVzdENhc2UNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsndGVzdGNhc2VfMSddLCBtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KDQogICAgICAgIGV4cGVjdGVkID0gbG9hZGVyLnN1aXRlQ2xhc3MoW015VGVzdENhc2UoJ3Rlc3QnKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtleHBlY3RlZF0pDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSAuLi4gdG8NCiAgICAjIC4uLiBhIFRlc3RTdWl0ZSBpbnN0YW5jZSINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3JlbGF0aXZlX1Rlc3RTdWl0ZShzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBjbGFzcyBNeVRlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbS50ZXN0c3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW015VGVzdENhc2UoJ3Rlc3QnKV0pDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbJ3Rlc3RzdWl0ZSddLCBtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFttLnRlc3RzdWl0ZV0pDQoNCiAgICAjICJUaGUgc3BlY2lmaWVyIG5hbWUgaXMgYSBgYGRvdHRlZCBuYW1lJycgdGhhdCBtYXkgcmVzb2x2ZSAuLi4gdG8gLi4uIGENCiAgICAjIHRlc3QgbWV0aG9kIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcyINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3JlbGF0aXZlX3Rlc3RtZXRob2Qoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgTXlUZXN0Q2FzZSh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdChzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIG0udGVzdGNhc2VfMSA9IE15VGVzdENhc2UNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsndGVzdGNhc2VfMS50ZXN0J10sIG0pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzdWl0ZSwgbG9hZGVyLnN1aXRlQ2xhc3MpDQoNCiAgICAgICAgcmVmX3N1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtNeVRlc3RDYXNlKCd0ZXN0JyldKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbcmVmX3N1aXRlXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0byAuLi4gYQ0KICAgICMgdGVzdCBtZXRob2Qgd2l0aGluIGEgdGVzdCBjYXNlIGNsYXNzIg0KICAgICMNCiAgICAjIERvZXMgdGhlIG1ldGhvZCBncmFjZWZ1bGx5IGhhbmRsZSBuYW1lcyB0aGF0IGluaXRpYWxseSBsb29rIGxpa2UgdGhleQ0KICAgICMgcmVzb2x2ZSB0byAiYSB0ZXN0IG1ldGhvZCB3aXRoaW4gYSB0ZXN0IGNhc2UgY2xhc3MiIGJ1dCBkb24ndD8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX3JlbGF0aXZlX2ludmFsaWRfdGVzdG1ldGhvZChzZWxmKToNCiAgICAgICAgbSA9IHR5cGVzLk1vZHVsZVR5cGUoJ20nKQ0KICAgICAgICBjbGFzcyBNeVRlc3RDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbS50ZXN0Y2FzZV8xID0gTXlUZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsndGVzdGNhc2VfMS50ZXN0Zm9vJ10sIG0pDQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksICJ0eXBlIG9iamVjdCAnTXlUZXN0Q2FzZScgaGFzIG5vIGF0dHJpYnV0ZSAndGVzdGZvbyciKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJGYWlsZWQgdG8gcmFpc2UgQXR0cmlidXRlRXJyb3IiKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgLi4uIHRvDQogICAgIyAuLi4gYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhIC4uLiBUZXN0U3VpdGUgaW5zdGFuY2UiDQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19jYWxsYWJsZV9fVGVzdFN1aXRlKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIHRlc3RjYXNlXzEgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgdGVzdGNhc2VfMiA9IHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KICAgICAgICBkZWYgcmV0dXJuX1Rlc3RTdWl0ZSgpOg0KICAgICAgICAgICAgcmV0dXJuIHVuaXR0ZXN0LlRlc3RTdWl0ZShbdGVzdGNhc2VfMSwgdGVzdGNhc2VfMl0pDQogICAgICAgIG0ucmV0dXJuX1Rlc3RTdWl0ZSA9IHJldHVybl9UZXN0U3VpdGUNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsncmV0dXJuX1Rlc3RTdWl0ZSddLCBtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KDQogICAgICAgIGV4cGVjdGVkID0gdW5pdHRlc3QuVGVzdFN1aXRlKFt0ZXN0Y2FzZV8xLCB0ZXN0Y2FzZV8yXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW2V4cGVjdGVkXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0bw0KICAgICMgLi4uIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYSBUZXN0Q2FzZSAuLi4gaW5zdGFuY2UiDQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19jYWxsYWJsZV9fVGVzdENhc2VfaW5zdGFuY2Uoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgdGVzdGNhc2VfMSA9IHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KICAgICAgICBkZWYgcmV0dXJuX1Rlc3RDYXNlKCk6DQogICAgICAgICAgICByZXR1cm4gdGVzdGNhc2VfMQ0KICAgICAgICBtLnJldHVybl9UZXN0Q2FzZSA9IHJldHVybl9UZXN0Q2FzZQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZXMoWydyZXR1cm5fVGVzdENhc2UnXSwgbSkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHN1aXRlLCBsb2FkZXIuc3VpdGVDbGFzcykNCg0KICAgICAgICByZWZfc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW3Rlc3RjYXNlXzFdKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3Qoc3VpdGUpLCBbcmVmX3N1aXRlXSkNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgbmFtZSBpcyBhIGBgZG90dGVkIG5hbWUnJyB0aGF0IG1heSByZXNvbHZlIC4uLiB0bw0KICAgICMgLi4uIGEgY2FsbGFibGUgb2JqZWN0IHdoaWNoIHJldHVybnMgYSBUZXN0Q2FzZSBvciBUZXN0U3VpdGUgaW5zdGFuY2UiDQogICAgIw0KICAgICMgQXJlIHN0YXRpY21ldGhvZHMgaGFuZGxlZCBjb3JyZWN0bHk/DQogICAgZGVmIHRlc3RfbG9hZFRlc3RzRnJvbU5hbWVzX19jYWxsYWJsZV9fY2FsbF9zdGF0aWNtZXRob2Qoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgVGVzdDEodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHRlc3RjYXNlXzEgPSBUZXN0MSgndGVzdCcpDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgZm9vKCk6DQogICAgICAgICAgICAgICAgcmV0dXJuIHRlc3RjYXNlXzENCiAgICAgICAgbS5Gb28gPSBGb28NCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgc3VpdGUgPSBsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnRm9vLmZvbyddLCBtKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KDQogICAgICAgIHJlZl9zdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbdGVzdGNhc2VfMV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFtyZWZfc3VpdGVdKQ0KDQogICAgIyAiVGhlIHNwZWNpZmllciBuYW1lIGlzIGEgYGBkb3R0ZWQgbmFtZScnIHRoYXQgbWF5IHJlc29sdmUgLi4uIHRvDQogICAgIyAuLi4gYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2ggcmV0dXJucyBhIFRlc3RDYXNlIG9yIFRlc3RTdWl0ZSBpbnN0YW5jZSINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgd2hlbiB0aGUgY2FsbGFibGUgcmV0dXJucyBzb21ldGhpbmcgZWxzZT8NCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX2NhbGxhYmxlX193cm9uZ190eXBlKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGRlZiByZXR1cm5fd3JvbmcoKToNCiAgICAgICAgICAgIHJldHVybiA2DQogICAgICAgIG0ucmV0dXJuX3dyb25nID0gcmV0dXJuX3dyb25nDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbJ3JldHVybl93cm9uZyddLCBtKQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyBmYWlsZWQgdG8gcmFpc2UgVHlwZUVycm9yIikNCg0KICAgICMgIlRoZSBzcGVjaWZpZXIgY2FuIHJlZmVyIHRvIG1vZHVsZXMgYW5kIHBhY2thZ2VzIHdoaWNoIGhhdmUgbm90IGJlZW4NCiAgICAjIGltcG9ydGVkOyB0aGV5IHdpbGwgYmUgaW1wb3J0ZWQgYXMgYSBzaWRlLWVmZmVjdCINCiAgICBkZWYgdGVzdF9sb2FkVGVzdHNGcm9tTmFtZXNfX21vZHVsZV9ub3RfbG9hZGVkKHNlbGYpOg0KICAgICAgICAjIFdlJ3JlIGdvaW5nIHRvIHRyeSB0byBsb2FkIHRoaXMgbW9kdWxlIGFzIGEgc2lkZS1lZmZlY3QsIHNvIGl0DQogICAgICAgICMgYmV0dGVyIG5vdCBiZSBsb2FkZWQgYmVmb3JlIHdlIHRyeS4NCiAgICAgICAgIw0KICAgICAgICBtb2R1bGVfbmFtZSA9ICd1bml0dGVzdC50ZXN0LmR1bW15Jw0KICAgICAgICBzeXMubW9kdWxlcy5wb3AobW9kdWxlX25hbWUsIE5vbmUpDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHN1aXRlID0gbG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcyhbbW9kdWxlX25hbWVdKQ0KDQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3VpdGUsIGxvYWRlci5zdWl0ZUNsYXNzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW3VuaXR0ZXN0LlRlc3RTdWl0ZSgpXSkNCg0KICAgICAgICAgICAgIyBtb2R1bGUgc2hvdWxkIG5vdyBiZSBsb2FkZWQsIHRoYW5rcyB0byBsb2FkVGVzdHNGcm9tTmFtZSgpDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKG1vZHVsZV9uYW1lLCBzeXMubW9kdWxlcykNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGlmIG1vZHVsZV9uYW1lIGluIHN5cy5tb2R1bGVzOg0KICAgICAgICAgICAgICAgIGRlbCBzeXMubW9kdWxlc1ttb2R1bGVfbmFtZV0NCg0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAjIyMgL1Rlc3RzIGZvciBUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lcygpDQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIuZ2V0VGVzdENhc2VOYW1lcygpDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgIyAiUmV0dXJuIGEgc29ydGVkIHNlcXVlbmNlIG9mIG1ldGhvZCBuYW1lcyBmb3VuZCB3aXRoaW4gdGVzdENhc2VDbGFzcyINCiAgICAjDQogICAgIyBUZXN0LmZvb2JhciBpcyBkZWZpbmVkIHRvIG1ha2Ugc3VyZSBnZXRUZXN0Q2FzZU5hbWVzKCkgcmVzcGVjdHMNCiAgICAjIGxvYWRlci50ZXN0TWV0aG9kUHJlZml4DQogICAgZGVmIHRlc3RfZ2V0VGVzdENhc2VOYW1lcyhzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgZm9vYmFyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIuZ2V0VGVzdENhc2VOYW1lcyhUZXN0KSwgWyd0ZXN0XzEnLCAndGVzdF8yJ10pDQoNCiAgICAjICJSZXR1cm4gYSBzb3J0ZWQgc2VxdWVuY2Ugb2YgbWV0aG9kIG5hbWVzIGZvdW5kIHdpdGhpbiB0ZXN0Q2FzZUNsYXNzIg0KICAgICMNCiAgICAjIERvZXMgZ2V0VGVzdENhc2VOYW1lcygpIGJlaGF2ZSBhcHByb3ByaWF0ZWx5IGlmIG5vIHRlc3RzIGFyZSBmb3VuZD8NCiAgICBkZWYgdGVzdF9nZXRUZXN0Q2FzZU5hbWVzX19ub190ZXN0cyhzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgZm9vYmFyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIuZ2V0VGVzdENhc2VOYW1lcyhUZXN0KSwgW10pDQoNCiAgICAjICJSZXR1cm4gYSBzb3J0ZWQgc2VxdWVuY2Ugb2YgbWV0aG9kIG5hbWVzIGZvdW5kIHdpdGhpbiB0ZXN0Q2FzZUNsYXNzIg0KICAgICMNCiAgICAjIEFyZSBub3QtVGVzdENhc2VzIGhhbmRsZWQgZ3JhY2VmdWxseT8NCiAgICAjDQogICAgIyBYWFggVGhpcyBzaG91bGQgcmFpc2UgYSBUeXBlRXJyb3IsIG5vdCByZXR1cm4gYSBsaXN0DQogICAgIw0KICAgICMgWFhYIEl0J3MgdG9vIGxhdGUgaW4gdGhlIDIuNSByZWxlYXNlIGN5Y2xlIHRvIGZpeCB0aGlzLCBidXQgaXQgc2hvdWxkDQogICAgIyBwcm9iYWJseSBiZSByZXZpc2l0ZWQgZm9yIDIuNg0KICAgIGRlZiB0ZXN0X2dldFRlc3RDYXNlTmFtZXNfX25vdF9hX1Rlc3RDYXNlKHNlbGYpOg0KICAgICAgICBjbGFzcyBCYWRDYXNlKGludCk6DQogICAgICAgICAgICBkZWYgdGVzdF9mb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBuYW1lcyA9IGxvYWRlci5nZXRUZXN0Q2FzZU5hbWVzKEJhZENhc2UpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChuYW1lcywgWyd0ZXN0X2ZvbyddKQ0KDQogICAgIyAiUmV0dXJuIGEgc29ydGVkIHNlcXVlbmNlIG9mIG1ldGhvZCBuYW1lcyBmb3VuZCB3aXRoaW4gdGVzdENhc2VDbGFzcyINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgaW5oZXJpdGVkIG5hbWVzIGFyZSBoYW5kbGVkLg0KICAgICMNCiAgICAjIFRlc3RQLmZvb2JhciBpcyBkZWZpbmVkIHRvIG1ha2Ugc3VyZSBnZXRUZXN0Q2FzZU5hbWVzKCkgcmVzcGVjdHMNCiAgICAjIGxvYWRlci50ZXN0TWV0aG9kUHJlZml4DQogICAgZGVmIHRlc3RfZ2V0VGVzdENhc2VOYW1lc19faW5oZXJpdGFuY2Uoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3RQKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29iYXIoc2VsZik6IHBhc3MNCg0KICAgICAgICBjbGFzcyBUZXN0QyhUZXN0UCk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8zKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgbmFtZXMgPSBbJ3Rlc3RfMScsICd0ZXN0XzInLCAndGVzdF8zJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIuZ2V0VGVzdENhc2VOYW1lcyhUZXN0QyksIG5hbWVzKQ0KDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICMjIyAvVGVzdHMgZm9yIFRlc3RMb2FkZXIuZ2V0VGVzdENhc2VOYW1lcygpDQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIudGVzdE1ldGhvZFByZWZpeA0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KICAgICMgIlN0cmluZyBnaXZpbmcgdGhlIHByZWZpeCBvZiBtZXRob2QgbmFtZXMgd2hpY2ggd2lsbCBiZSBpbnRlcnByZXRlZCBhcw0KICAgICMgdGVzdCBtZXRob2RzIg0KICAgICMNCiAgICAjIEltcGxpY2l0IGluIHRoZSBkb2N1bWVudGF0aW9uIGlzIHRoYXQgdGVzdE1ldGhvZFByZWZpeCBpcyByZXNwZWN0ZWQgYnkNCiAgICAjIGFsbCBsb2FkVGVzdHNGcm9tKiBtZXRob2RzLg0KICAgIGRlZiB0ZXN0X3Rlc3RNZXRob2RQcmVmaXhfX2xvYWRUZXN0c0Zyb21UZXN0Q2FzZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgdGVzdHNfMSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbRm9vKCdmb29fYmFyJyldKQ0KICAgICAgICB0ZXN0c18yID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfMScpLCBGb28oJ3Rlc3RfMicpXSkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnRlc3RNZXRob2RQcmVmaXggPSAnZm9vJw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoRm9vKSwgdGVzdHNfMSkNCg0KICAgICAgICBsb2FkZXIudGVzdE1ldGhvZFByZWZpeCA9ICd0ZXN0Jw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoRm9vKSwgdGVzdHNfMikNCg0KICAgICMgIlN0cmluZyBnaXZpbmcgdGhlIHByZWZpeCBvZiBtZXRob2QgbmFtZXMgd2hpY2ggd2lsbCBiZSBpbnRlcnByZXRlZCBhcw0KICAgICMgdGVzdCBtZXRob2RzIg0KICAgICMNCiAgICAjIEltcGxpY2l0IGluIHRoZSBkb2N1bWVudGF0aW9uIGlzIHRoYXQgdGVzdE1ldGhvZFByZWZpeCBpcyByZXNwZWN0ZWQgYnkNCiAgICAjIGFsbCBsb2FkVGVzdHNGcm9tKiBtZXRob2RzLg0KICAgIGRlZiB0ZXN0X3Rlc3RNZXRob2RQcmVmaXhfX2xvYWRUZXN0c0Zyb21Nb2R1bGUoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQogICAgICAgIG0uRm9vID0gRm9vDQoNCiAgICAgICAgdGVzdHNfMSA9IFt1bml0dGVzdC5UZXN0U3VpdGUoW0ZvbygnZm9vX2JhcicpXSldDQogICAgICAgIHRlc3RzXzIgPSBbdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfMScpLCBGb28oJ3Rlc3RfMicpXSldDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIGxvYWRlci50ZXN0TWV0aG9kUHJlZml4ID0gJ2ZvbycNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG0pKSwgdGVzdHNfMSkNCg0KICAgICAgICBsb2FkZXIudGVzdE1ldGhvZFByZWZpeCA9ICd0ZXN0Jw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3QobG9hZGVyLmxvYWRUZXN0c0Zyb21Nb2R1bGUobSkpLCB0ZXN0c18yKQ0KDQogICAgIyAiU3RyaW5nIGdpdmluZyB0aGUgcHJlZml4IG9mIG1ldGhvZCBuYW1lcyB3aGljaCB3aWxsIGJlIGludGVycHJldGVkIGFzDQogICAgIyB0ZXN0IG1ldGhvZHMiDQogICAgIw0KICAgICMgSW1wbGljaXQgaW4gdGhlIGRvY3VtZW50YXRpb24gaXMgdGhhdCB0ZXN0TWV0aG9kUHJlZml4IGlzIHJlc3BlY3RlZCBieQ0KICAgICMgYWxsIGxvYWRUZXN0c0Zyb20qIG1ldGhvZHMuDQogICAgZGVmIHRlc3RfdGVzdE1ldGhvZFByZWZpeF9fbG9hZFRlc3RzRnJvbU5hbWUoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQogICAgICAgIG0uRm9vID0gRm9vDQoNCiAgICAgICAgdGVzdHNfMSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbRm9vKCdmb29fYmFyJyldKQ0KICAgICAgICB0ZXN0c18yID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfMScpLCBGb28oJ3Rlc3RfMicpXSkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnRlc3RNZXRob2RQcmVmaXggPSAnZm9vJw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgnRm9vJywgbSksIHRlc3RzXzEpDQoNCiAgICAgICAgbG9hZGVyLnRlc3RNZXRob2RQcmVmaXggPSAndGVzdCcNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWUoJ0ZvbycsIG0pLCB0ZXN0c18yKQ0KDQogICAgIyAiU3RyaW5nIGdpdmluZyB0aGUgcHJlZml4IG9mIG1ldGhvZCBuYW1lcyB3aGljaCB3aWxsIGJlIGludGVycHJldGVkIGFzDQogICAgIyB0ZXN0IG1ldGhvZHMiDQogICAgIw0KICAgICMgSW1wbGljaXQgaW4gdGhlIGRvY3VtZW50YXRpb24gaXMgdGhhdCB0ZXN0TWV0aG9kUHJlZml4IGlzIHJlc3BlY3RlZCBieQ0KICAgICMgYWxsIGxvYWRUZXN0c0Zyb20qIG1ldGhvZHMuDQogICAgZGVmIHRlc3RfdGVzdE1ldGhvZFByZWZpeF9fbG9hZFRlc3RzRnJvbU5hbWVzKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgZm9vX2JhcihzZWxmKTogcGFzcw0KICAgICAgICBtLkZvbyA9IEZvbw0KDQogICAgICAgIHRlc3RzXzEgPSB1bml0dGVzdC5UZXN0U3VpdGUoW3VuaXR0ZXN0LlRlc3RTdWl0ZShbRm9vKCdmb29fYmFyJyldKV0pDQogICAgICAgIHRlc3RzXzIgPSB1bml0dGVzdC5UZXN0U3VpdGUoW0ZvbygndGVzdF8xJyksIEZvbygndGVzdF8yJyldKQ0KICAgICAgICB0ZXN0c18yID0gdW5pdHRlc3QuVGVzdFN1aXRlKFt0ZXN0c18yXSkNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnRlc3RNZXRob2RQcmVmaXggPSAnZm9vJw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZXMoWydGb28nXSwgbSksIHRlc3RzXzEpDQoNCiAgICAgICAgbG9hZGVyLnRlc3RNZXRob2RQcmVmaXggPSAndGVzdCcNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnRm9vJ10sIG0pLCB0ZXN0c18yKQ0KDQogICAgIyAiVGhlIGRlZmF1bHQgdmFsdWUgaXMgJ3Rlc3QnIg0KICAgIGRlZiB0ZXN0X3Rlc3RNZXRob2RQcmVmaXhfX2RlZmF1bHRfdmFsdWUoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci50ZXN0TWV0aG9kUHJlZml4LCAndGVzdCcpDQoNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyMjIC9UZXN0cyBmb3IgVGVzdExvYWRlci50ZXN0TWV0aG9kUHJlZml4DQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIuc29ydFRlc3RNZXRob2RzVXNpbmcNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiAgICAjICJGdW5jdGlvbiB0byBiZSB1c2VkIHRvIGNvbXBhcmUgbWV0aG9kIG5hbWVzIHdoZW4gc29ydGluZyB0aGVtIGluDQogICAgIyBnZXRUZXN0Q2FzZU5hbWVzKCkgYW5kIGFsbCB0aGUgbG9hZFRlc3RzRnJvbVgoKSBtZXRob2RzIg0KICAgIGRlZiB0ZXN0X3NvcnRUZXN0TWV0aG9kc1VzaW5nX19sb2FkVGVzdHNGcm9tVGVzdENhc2Uoc2VsZik6DQogICAgICAgIGRlZiByZXZlcnNlZF9jbXAoeCwgeSk6DQogICAgICAgICAgICByZXR1cm4gLSgoeCA+IHkpIC0gKHggPCB5KSkNCg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RfMShzZWxmKTogcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3RfMihzZWxmKTogcGFzcw0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBsb2FkZXIuc29ydFRlc3RNZXRob2RzVXNpbmcgPSByZXZlcnNlZF9jbXANCg0KICAgICAgICB0ZXN0cyA9IGxvYWRlci5zdWl0ZUNsYXNzKFtGb28oJ3Rlc3RfMicpLCBGb28oJ3Rlc3RfMScpXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIubG9hZFRlc3RzRnJvbVRlc3RDYXNlKEZvbyksIHRlc3RzKQ0KDQogICAgIyAiRnVuY3Rpb24gdG8gYmUgdXNlZCB0byBjb21wYXJlIG1ldGhvZCBuYW1lcyB3aGVuIHNvcnRpbmcgdGhlbSBpbg0KICAgICMgZ2V0VGVzdENhc2VOYW1lcygpIGFuZCBhbGwgdGhlIGxvYWRUZXN0c0Zyb21YKCkgbWV0aG9kcyINCiAgICBkZWYgdGVzdF9zb3J0VGVzdE1ldGhvZHNVc2luZ19fbG9hZFRlc3RzRnJvbU1vZHVsZShzZWxmKToNCiAgICAgICAgZGVmIHJldmVyc2VkX2NtcCh4LCB5KToNCiAgICAgICAgICAgIHJldHVybiAtKCh4ID4geSkgLSAoeCA8IHkpKQ0KDQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgbS5Gb28gPSBGb28NCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnNvcnRUZXN0TWV0aG9kc1VzaW5nID0gcmV2ZXJzZWRfY21wDQoNCiAgICAgICAgdGVzdHMgPSBbbG9hZGVyLnN1aXRlQ2xhc3MoW0ZvbygndGVzdF8yJyksIEZvbygndGVzdF8xJyldKV0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG0pKSwgdGVzdHMpDQoNCiAgICAjICJGdW5jdGlvbiB0byBiZSB1c2VkIHRvIGNvbXBhcmUgbWV0aG9kIG5hbWVzIHdoZW4gc29ydGluZyB0aGVtIGluDQogICAgIyBnZXRUZXN0Q2FzZU5hbWVzKCkgYW5kIGFsbCB0aGUgbG9hZFRlc3RzRnJvbVgoKSBtZXRob2RzIg0KICAgIGRlZiB0ZXN0X3NvcnRUZXN0TWV0aG9kc1VzaW5nX19sb2FkVGVzdHNGcm9tTmFtZShzZWxmKToNCiAgICAgICAgZGVmIHJldmVyc2VkX2NtcCh4LCB5KToNCiAgICAgICAgICAgIHJldHVybiAtKCh4ID4geSkgLSAoeCA8IHkpKQ0KDQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgbS5Gb28gPSBGb28NCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnNvcnRUZXN0TWV0aG9kc1VzaW5nID0gcmV2ZXJzZWRfY21wDQoNCiAgICAgICAgdGVzdHMgPSBsb2FkZXIuc3VpdGVDbGFzcyhbRm9vKCd0ZXN0XzInKSwgRm9vKCd0ZXN0XzEnKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lKCdGb28nLCBtKSwgdGVzdHMpDQoNCiAgICAjICJGdW5jdGlvbiB0byBiZSB1c2VkIHRvIGNvbXBhcmUgbWV0aG9kIG5hbWVzIHdoZW4gc29ydGluZyB0aGVtIGluDQogICAgIyBnZXRUZXN0Q2FzZU5hbWVzKCkgYW5kIGFsbCB0aGUgbG9hZFRlc3RzRnJvbVgoKSBtZXRob2RzIg0KICAgIGRlZiB0ZXN0X3NvcnRUZXN0TWV0aG9kc1VzaW5nX19sb2FkVGVzdHNGcm9tTmFtZXMoc2VsZik6DQogICAgICAgIGRlZiByZXZlcnNlZF9jbXAoeCwgeSk6DQogICAgICAgICAgICByZXR1cm4gLSgoeCA+IHkpIC0gKHggPCB5KSkNCg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQogICAgICAgIG0uRm9vID0gRm9vDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIGxvYWRlci5zb3J0VGVzdE1ldGhvZHNVc2luZyA9IHJldmVyc2VkX2NtcA0KDQogICAgICAgIHRlc3RzID0gW2xvYWRlci5zdWl0ZUNsYXNzKFtGb28oJ3Rlc3RfMicpLCBGb28oJ3Rlc3RfMScpXSldDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnRm9vJ10sIG0pKSwgdGVzdHMpDQoNCiAgICAjICJGdW5jdGlvbiB0byBiZSB1c2VkIHRvIGNvbXBhcmUgbWV0aG9kIG5hbWVzIHdoZW4gc29ydGluZyB0aGVtIGluDQogICAgIyBnZXRUZXN0Q2FzZU5hbWVzKCkiDQogICAgIw0KICAgICMgRG9lcyBpdCBhY3R1YWxseSBhZmZlY3QgZ2V0VGVzdENhc2VOYW1lcygpPw0KICAgIGRlZiB0ZXN0X3NvcnRUZXN0TWV0aG9kc1VzaW5nX19nZXRUZXN0Q2FzZU5hbWVzKHNlbGYpOg0KICAgICAgICBkZWYgcmV2ZXJzZWRfY21wKHgsIHkpOg0KICAgICAgICAgICAgcmV0dXJuIC0oKHggPiB5KSAtICh4IDwgeSkpDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnNvcnRUZXN0TWV0aG9kc1VzaW5nID0gcmV2ZXJzZWRfY21wDQoNCiAgICAgICAgdGVzdF9uYW1lcyA9IFsndGVzdF8yJywgJ3Rlc3RfMSddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9hZGVyLmdldFRlc3RDYXNlTmFtZXMoRm9vKSwgdGVzdF9uYW1lcykNCg0KICAgICMgIlRoZSBkZWZhdWx0IHZhbHVlIGlzIHRoZSBidWlsdC1pbiBjbXAoKSBmdW5jdGlvbiINCiAgICAjIFNpbmNlIGNtcCBpcyBub3cgZGVmdW5jdCwgd2Ugc2ltcGx5IHZlcmlmeSB0aGF0IHRoZSByZXN1bHRzDQogICAgIyBvY2N1ciBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGV5IHdvdWxkIHdpdGggdGhlIGRlZmF1bHQgc29ydC4NCiAgICBkZWYgdGVzdF9zb3J0VGVzdE1ldGhvZHNVc2luZ19fZGVmYXVsdF92YWx1ZShzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzMoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCg0KICAgICAgICB0ZXN0X25hbWVzID0gWyd0ZXN0XzInLCAndGVzdF8zJywgJ3Rlc3RfMSddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9hZGVyLmdldFRlc3RDYXNlTmFtZXMoRm9vKSwgc29ydGVkKHRlc3RfbmFtZXMpKQ0KDQoNCiAgICAjICJpdCBjYW4gYmUgc2V0IHRvIE5vbmUgdG8gZGlzYWJsZSB0aGUgc29ydC4iDQogICAgIw0KICAgICMgWFhYIEhvdyBpcyB0aGlzIGRpZmZlcmVudCBmcm9tIHJlYXNzaWduaW5nIGNtcD8gQXJlIHRoZSB0ZXN0cyByZXR1cm5lZA0KICAgICMgaW4gYSByYW5kb20gb3JkZXIgb3Igc29tZXRoaW5nPyBUaGlzIGJlaGF2aW91ciBzaG91bGQgZGllDQogICAgZGVmIHRlc3Rfc29ydFRlc3RNZXRob2RzVXNpbmdfX05vbmUoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIGxvYWRlci5zb3J0VGVzdE1ldGhvZHNVc2luZyA9IE5vbmUNCg0KICAgICAgICB0ZXN0X25hbWVzID0gWyd0ZXN0XzInLCAndGVzdF8xJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzZXQobG9hZGVyLmdldFRlc3RDYXNlTmFtZXMoRm9vKSksIHNldCh0ZXN0X25hbWVzKSkNCg0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAjIyMgL1Rlc3RzIGZvciBUZXN0TG9hZGVyLnNvcnRUZXN0TWV0aG9kc1VzaW5nDQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RMb2FkZXIuc3VpdGVDbGFzcw0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KICAgICMgIkNhbGxhYmxlIG9iamVjdCB0aGF0IGNvbnN0cnVjdHMgYSB0ZXN0IHN1aXRlIGZyb20gYSBsaXN0IG9mIHRlc3RzLiINCiAgICBkZWYgdGVzdF9zdWl0ZUNsYXNzX19sb2FkVGVzdHNGcm9tVGVzdENhc2Uoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgZm9vX2JhcihzZWxmKTogcGFzcw0KDQogICAgICAgIHRlc3RzID0gW0ZvbygndGVzdF8xJyksIEZvbygndGVzdF8yJyldDQoNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIGxvYWRlci5zdWl0ZUNsYXNzID0gbGlzdA0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoRm9vKSwgdGVzdHMpDQoNCiAgICAjIEl0IGlzIGltcGxpY2l0IGluIHRoZSBkb2N1bWVudGF0aW9uIGZvciBUZXN0TG9hZGVyLnN1aXRlQ2xhc3MgdGhhdA0KICAgICMgYWxsIFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbSogbWV0aG9kcyByZXNwZWN0IGl0LiBMZXQncyBtYWtlIHN1cmUNCiAgICBkZWYgdGVzdF9zdWl0ZUNsYXNzX19sb2FkVGVzdHNGcm9tTW9kdWxlKHNlbGYpOg0KICAgICAgICBtID0gdHlwZXMuTW9kdWxlVHlwZSgnbScpDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF8yKHNlbGYpOiBwYXNzDQogICAgICAgICAgICBkZWYgZm9vX2JhcihzZWxmKTogcGFzcw0KICAgICAgICBtLkZvbyA9IEZvbw0KDQogICAgICAgIHRlc3RzID0gW1tGb28oJ3Rlc3RfMScpLCBGb28oJ3Rlc3RfMicpXV0NCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnN1aXRlQ2xhc3MgPSBsaXN0DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9hZGVyLmxvYWRUZXN0c0Zyb21Nb2R1bGUobSksIHRlc3RzKQ0KDQogICAgIyBJdCBpcyBpbXBsaWNpdCBpbiB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgVGVzdExvYWRlci5zdWl0ZUNsYXNzIHRoYXQNCiAgICAjIGFsbCBUZXN0TG9hZGVyLmxvYWRUZXN0c0Zyb20qIG1ldGhvZHMgcmVzcGVjdCBpdC4gTGV0J3MgbWFrZSBzdXJlDQogICAgZGVmIHRlc3Rfc3VpdGVDbGFzc19fbG9hZFRlc3RzRnJvbU5hbWUoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQogICAgICAgIG0uRm9vID0gRm9vDQoNCiAgICAgICAgdGVzdHMgPSBbRm9vKCd0ZXN0XzEnKSwgRm9vKCd0ZXN0XzInKV0NCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLnN1aXRlQ2xhc3MgPSBsaXN0DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9hZGVyLmxvYWRUZXN0c0Zyb21OYW1lKCdGb28nLCBtKSwgdGVzdHMpDQoNCiAgICAjIEl0IGlzIGltcGxpY2l0IGluIHRoZSBkb2N1bWVudGF0aW9uIGZvciBUZXN0TG9hZGVyLnN1aXRlQ2xhc3MgdGhhdA0KICAgICMgYWxsIFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbSogbWV0aG9kcyByZXNwZWN0IGl0LiBMZXQncyBtYWtlIHN1cmUNCiAgICBkZWYgdGVzdF9zdWl0ZUNsYXNzX19sb2FkVGVzdHNGcm9tTmFtZXMoc2VsZik6DQogICAgICAgIG0gPSB0eXBlcy5Nb2R1bGVUeXBlKCdtJykNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiBmb29fYmFyKHNlbGYpOiBwYXNzDQogICAgICAgIG0uRm9vID0gRm9vDQoNCiAgICAgICAgdGVzdHMgPSBbW0ZvbygndGVzdF8xJyksIEZvbygndGVzdF8yJyldXQ0KDQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KICAgICAgICBsb2FkZXIuc3VpdGVDbGFzcyA9IGxpc3QNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKFsnRm9vJ10sIG0pLCB0ZXN0cykNCg0KICAgICMgIlRoZSBkZWZhdWx0IHZhbHVlIGlzIHRoZSBUZXN0U3VpdGUgY2xhc3MiDQogICAgZGVmIHRlc3Rfc3VpdGVDbGFzc19fZGVmYXVsdF92YWx1ZShzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShsb2FkZXIuc3VpdGVDbGFzcyBpcyB1bml0dGVzdC5UZXN0U3VpdGUpDQo=',
'/Lib/unittest/test/test_discovery.py':'aW1wb3J0IG9zDQppbXBvcnQgcmUNCmltcG9ydCBzeXMNCg0KaW1wb3J0IHVuaXR0ZXN0DQoNCg0KY2xhc3MgVGVzdGFibGVUZXN0UHJvZ3JhbSh1bml0dGVzdC5UZXN0UHJvZ3JhbSk6DQogICAgbW9kdWxlID0gJ19fbWFpbl9fJw0KICAgIGV4aXQgPSBUcnVlDQogICAgZGVmYXVsdFRlc3QgPSBmYWlsZmFzdCA9IGNhdGNoYnJlYWsgPSBidWZmZXIgPSBOb25lDQogICAgdmVyYm9zaXR5ID0gMQ0KICAgIHByb2dOYW1lID0gJycNCiAgICB0ZXN0UnVubmVyID0gdGVzdExvYWRlciA9IE5vbmUNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKToNCiAgICAgICAgcGFzcw0KDQoNCmNsYXNzIFRlc3REaXNjb3ZlcnkodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgIyBIZWF2aWx5IG1vY2tlZCB0ZXN0cyBzbyBJIGNhbiBhdm9pZCBoaXR0aW5nIHRoZSBmaWxlc3lzdGVtDQogICAgZGVmIHRlc3RfZ2V0X25hbWVfZnJvbV9wYXRoKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCiAgICAgICAgbG9hZGVyLl90b3BfbGV2ZWxfZGlyID0gJy9mb28nDQogICAgICAgIG5hbWUgPSBsb2FkZXIuX2dldF9uYW1lX2Zyb21fcGF0aCgnL2Zvby9iYXIvYmF6LnB5JykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChuYW1lLCAnYmFyLmJheicpDQoNCiAgICAgICAgaWYgbm90IF9fZGVidWdfXzoNCiAgICAgICAgICAgICMgYXNzZXJ0cyBhcmUgb2ZmDQogICAgICAgICAgICByZXR1cm4NCg0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKEFzc2VydGlvbkVycm9yKToNCiAgICAgICAgICAgIGxvYWRlci5fZ2V0X25hbWVfZnJvbV9wYXRoKCcvYmFyL2Jhei5weScpDQoNCiAgICBkZWYgdGVzdF9maW5kX3Rlc3RzKHNlbGYpOg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICBvcmlnaW5hbF9saXN0ZGlyID0gb3MubGlzdGRpcg0KICAgICAgICBkZWYgcmVzdG9yZV9saXN0ZGlyKCk6DQogICAgICAgICAgICBvcy5saXN0ZGlyID0gb3JpZ2luYWxfbGlzdGRpcg0KICAgICAgICBvcmlnaW5hbF9pc2ZpbGUgPSBvcy5wYXRoLmlzZmlsZQ0KICAgICAgICBkZWYgcmVzdG9yZV9pc2ZpbGUoKToNCiAgICAgICAgICAgIG9zLnBhdGguaXNmaWxlID0gb3JpZ2luYWxfaXNmaWxlDQogICAgICAgIG9yaWdpbmFsX2lzZGlyID0gb3MucGF0aC5pc2Rpcg0KICAgICAgICBkZWYgcmVzdG9yZV9pc2RpcigpOg0KICAgICAgICAgICAgb3MucGF0aC5pc2RpciA9IG9yaWdpbmFsX2lzZGlyDQoNCiAgICAgICAgcGF0aF9saXN0cyA9IFtbJ3Rlc3QxLnB5JywgJ3Rlc3QyLnB5JywgJ25vdF9hX3Rlc3QucHknLCAndGVzdF9kaXInLA0KICAgICAgICAgICAgICAgICAgICAgICAndGVzdC5mb28nLCAndGVzdC1ub3QtYS1tb2R1bGUucHknLCAnYW5vdGhlcl9kaXInXSwNCiAgICAgICAgICAgICAgICAgICAgICBbJ3Rlc3QzLnB5JywgJ3Rlc3Q0LnB5JywgXV0NCiAgICAgICAgb3MubGlzdGRpciA9IGxhbWJkYSBwYXRoOiBwYXRoX2xpc3RzLnBvcCgwKQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZV9saXN0ZGlyKQ0KDQogICAgICAgIGRlZiBpc2RpcihwYXRoKToNCiAgICAgICAgICAgIHJldHVybiBwYXRoLmVuZHN3aXRoKCdkaXInKQ0KICAgICAgICBvcy5wYXRoLmlzZGlyID0gaXNkaXINCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHJlc3RvcmVfaXNkaXIpDQoNCiAgICAgICAgZGVmIGlzZmlsZShwYXRoKToNCiAgICAgICAgICAgICMgYW5vdGhlcl9kaXIgaXMgbm90IGEgcGFja2FnZSBhbmQgc28gc2hvdWxkbid0IGJlIHJlY3Vyc2VkIGludG8NCiAgICAgICAgICAgIHJldHVybiBub3QgcGF0aC5lbmRzd2l0aCgnZGlyJykgYW5kIG5vdCAnYW5vdGhlcl9kaXInIGluIHBhdGgNCiAgICAgICAgb3MucGF0aC5pc2ZpbGUgPSBpc2ZpbGUNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHJlc3RvcmVfaXNmaWxlKQ0KDQogICAgICAgIGxvYWRlci5fZ2V0X21vZHVsZV9mcm9tX25hbWUgPSBsYW1iZGEgcGF0aDogcGF0aCArICcgbW9kdWxlJw0KICAgICAgICBsb2FkZXIubG9hZFRlc3RzRnJvbU1vZHVsZSA9IGxhbWJkYSBtb2R1bGU6IG1vZHVsZSArICcgdGVzdHMnDQoNCiAgICAgICAgdG9wX2xldmVsID0gb3MucGF0aC5hYnNwYXRoKCcvZm9vJykNCiAgICAgICAgbG9hZGVyLl90b3BfbGV2ZWxfZGlyID0gdG9wX2xldmVsDQogICAgICAgIHN1aXRlID0gbGlzdChsb2FkZXIuX2ZpbmRfdGVzdHModG9wX2xldmVsLCAndGVzdCoucHknKSkNCg0KICAgICAgICBleHBlY3RlZCA9IFtuYW1lICsgJyBtb2R1bGUgdGVzdHMnIGZvciBuYW1lIGluDQogICAgICAgICAgICAgICAgICAgICgndGVzdDEnLCAndGVzdDInKV0NCiAgICAgICAgZXhwZWN0ZWQuZXh0ZW5kKFsoJ3Rlc3RfZGlyLiVzJyAlIG5hbWUpICsgJyBtb2R1bGUgdGVzdHMnIGZvciBuYW1lIGluDQogICAgICAgICAgICAgICAgICAgICgndGVzdDMnLCAndGVzdDQnKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUsIGV4cGVjdGVkKQ0KDQogICAgZGVmIHRlc3RfZmluZF90ZXN0c193aXRoX3BhY2thZ2Uoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIG9yaWdpbmFsX2xpc3RkaXIgPSBvcy5saXN0ZGlyDQogICAgICAgIGRlZiByZXN0b3JlX2xpc3RkaXIoKToNCiAgICAgICAgICAgIG9zLmxpc3RkaXIgPSBvcmlnaW5hbF9saXN0ZGlyDQogICAgICAgIG9yaWdpbmFsX2lzZmlsZSA9IG9zLnBhdGguaXNmaWxlDQogICAgICAgIGRlZiByZXN0b3JlX2lzZmlsZSgpOg0KICAgICAgICAgICAgb3MucGF0aC5pc2ZpbGUgPSBvcmlnaW5hbF9pc2ZpbGUNCiAgICAgICAgb3JpZ2luYWxfaXNkaXIgPSBvcy5wYXRoLmlzZGlyDQogICAgICAgIGRlZiByZXN0b3JlX2lzZGlyKCk6DQogICAgICAgICAgICBvcy5wYXRoLmlzZGlyID0gb3JpZ2luYWxfaXNkaXINCg0KICAgICAgICBkaXJlY3RvcmllcyA9IFsnYV9kaXJlY3RvcnknLCAndGVzdF9kaXJlY3RvcnknLCAndGVzdF9kaXJlY3RvcnkyJ10NCiAgICAgICAgcGF0aF9saXN0cyA9IFtkaXJlY3RvcmllcywgW10sIFtdLCBbXV0NCiAgICAgICAgb3MubGlzdGRpciA9IGxhbWJkYSBwYXRoOiBwYXRoX2xpc3RzLnBvcCgwKQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZV9saXN0ZGlyKQ0KDQogICAgICAgIG9zLnBhdGguaXNkaXIgPSBsYW1iZGEgcGF0aDogVHJ1ZQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZV9pc2RpcikNCg0KICAgICAgICBvcy5wYXRoLmlzZmlsZSA9IGxhbWJkYSBwYXRoOiBvcy5wYXRoLmJhc2VuYW1lKHBhdGgpIG5vdCBpbiBkaXJlY3Rvcmllcw0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZV9pc2ZpbGUpDQoNCiAgICAgICAgY2xhc3MgTW9kdWxlKG9iamVjdCk6DQogICAgICAgICAgICBwYXRocyA9IFtdDQogICAgICAgICAgICBsb2FkX3Rlc3RzX2FyZ3MgPSBbXQ0KDQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgcGF0aCk6DQogICAgICAgICAgICAgICAgc2VsZi5wYXRoID0gcGF0aA0KICAgICAgICAgICAgICAgIHNlbGYucGF0aHMuYXBwZW5kKHBhdGgpDQogICAgICAgICAgICAgICAgaWYgb3MucGF0aC5iYXNlbmFtZShwYXRoKSA9PSAndGVzdF9kaXJlY3RvcnknOg0KICAgICAgICAgICAgICAgICAgICBkZWYgbG9hZF90ZXN0cyhsb2FkZXIsIHRlc3RzLCBwYXR0ZXJuKToNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZF90ZXN0c19hcmdzLmFwcGVuZCgobG9hZGVyLCB0ZXN0cywgcGF0dGVybikpDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2xvYWRfdGVzdHMnDQogICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZF90ZXN0cyA9IGxvYWRfdGVzdHMNCg0KICAgICAgICAgICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6DQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGF0aCA9PSBvdGhlci5wYXRoDQoNCiAgICAgICAgbG9hZGVyLl9nZXRfbW9kdWxlX2Zyb21fbmFtZSA9IGxhbWJkYSBuYW1lOiBNb2R1bGUobmFtZSkNCiAgICAgICAgZGVmIGxvYWRUZXN0c0Zyb21Nb2R1bGUobW9kdWxlLCB1c2VfbG9hZF90ZXN0cyk6DQogICAgICAgICAgICBpZiB1c2VfbG9hZF90ZXN0czoNCiAgICAgICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24oJ3VzZV9sb2FkX3Rlc3RzIHNob3VsZCBiZSBGYWxzZSBmb3IgcGFja2FnZXMnKQ0KICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5wYXRoICsgJyBtb2R1bGUgdGVzdHMnDQogICAgICAgIGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlID0gbG9hZFRlc3RzRnJvbU1vZHVsZQ0KDQogICAgICAgIGxvYWRlci5fdG9wX2xldmVsX2RpciA9ICcvZm9vJw0KICAgICAgICAjIHRoaXMgdGltZSBubyAnLnB5JyBvbiB0aGUgcGF0dGVybiBzbyB0aGF0IGl0IGNhbiBtYXRjaA0KICAgICAgICAjIGEgdGVzdCBwYWNrYWdlDQogICAgICAgIHN1aXRlID0gbGlzdChsb2FkZXIuX2ZpbmRfdGVzdHMoJy9mb28nLCAndGVzdConKSkNCg0KICAgICAgICAjIFdlIHNob3VsZCBoYXZlIGxvYWRlZCB0ZXN0cyBmcm9tIHRoZSB0ZXN0X2RpcmVjdG9yeSBwYWNrYWdlIGJ5IGNhbGxpbmcgbG9hZF90ZXN0cw0KICAgICAgICAjIGFuZCBkaXJlY3RseSBmcm9tIHRoZSB0ZXN0X2RpcmVjdG9yeTIgcGFja2FnZQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIFsnbG9hZF90ZXN0cycsICd0ZXN0X2RpcmVjdG9yeTInICsgJyBtb2R1bGUgdGVzdHMnXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChNb2R1bGUucGF0aHMsIFsndGVzdF9kaXJlY3RvcnknLCAndGVzdF9kaXJlY3RvcnkyJ10pDQoNCiAgICAgICAgIyBsb2FkX3Rlc3RzIHNob3VsZCBoYXZlIGJlZW4gY2FsbGVkIG9uY2Ugd2l0aCBsb2FkZXIsIHRlc3RzIGFuZCBwYXR0ZXJuDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoTW9kdWxlLmxvYWRfdGVzdHNfYXJncywNCiAgICAgICAgICAgICAgICAgICAgICAgICBbKGxvYWRlciwgJ3Rlc3RfZGlyZWN0b3J5JyArICcgbW9kdWxlIHRlc3RzJywgJ3Rlc3QqJyldKQ0KDQogICAgZGVmIHRlc3RfZGlzY292ZXIoc2VsZik6DQogICAgICAgIGxvYWRlciA9IHVuaXR0ZXN0LlRlc3RMb2FkZXIoKQ0KDQogICAgICAgIG9yaWdpbmFsX2lzZmlsZSA9IG9zLnBhdGguaXNmaWxlDQogICAgICAgIG9yaWdpbmFsX2lzZGlyID0gb3MucGF0aC5pc2Rpcg0KICAgICAgICBkZWYgcmVzdG9yZV9pc2ZpbGUoKToNCiAgICAgICAgICAgIG9zLnBhdGguaXNmaWxlID0gb3JpZ2luYWxfaXNmaWxlDQoNCiAgICAgICAgb3MucGF0aC5pc2ZpbGUgPSBsYW1iZGEgcGF0aDogRmFsc2UNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHJlc3RvcmVfaXNmaWxlKQ0KDQogICAgICAgIG9yaWdfc3lzX3BhdGggPSBzeXMucGF0aFs6XQ0KICAgICAgICBkZWYgcmVzdG9yZV9wYXRoKCk6DQogICAgICAgICAgICBzeXMucGF0aFs6XSA9IG9yaWdfc3lzX3BhdGgNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHJlc3RvcmVfcGF0aCkNCg0KICAgICAgICBmdWxsX3BhdGggPSBvcy5wYXRoLmFic3BhdGgob3MucGF0aC5ub3JtcGF0aCgnL2ZvbycpKQ0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKEltcG9ydEVycm9yKToNCiAgICAgICAgICAgIGxvYWRlci5kaXNjb3ZlcignL2Zvby9iYXInLCB0b3BfbGV2ZWxfZGlyPScvZm9vJykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5fdG9wX2xldmVsX2RpciwgZnVsbF9wYXRoKQ0KICAgICAgICBzZWxmLmFzc2VydEluKGZ1bGxfcGF0aCwgc3lzLnBhdGgpDQoNCiAgICAgICAgb3MucGF0aC5pc2ZpbGUgPSBsYW1iZGEgcGF0aDogVHJ1ZQ0KICAgICAgICBvcy5wYXRoLmlzZGlyID0gbGFtYmRhIHBhdGg6IFRydWUNCg0KICAgICAgICBkZWYgcmVzdG9yZV9pc2RpcigpOg0KICAgICAgICAgICAgb3MucGF0aC5pc2RpciA9IG9yaWdpbmFsX2lzZGlyDQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChyZXN0b3JlX2lzZGlyKQ0KDQogICAgICAgIF9maW5kX3Rlc3RzX2FyZ3MgPSBbXQ0KICAgICAgICBkZWYgX2ZpbmRfdGVzdHMoc3RhcnRfZGlyLCBwYXR0ZXJuKToNCiAgICAgICAgICAgIF9maW5kX3Rlc3RzX2FyZ3MuYXBwZW5kKChzdGFydF9kaXIsIHBhdHRlcm4pKQ0KICAgICAgICAgICAgcmV0dXJuIFsndGVzdHMnXQ0KICAgICAgICBsb2FkZXIuX2ZpbmRfdGVzdHMgPSBfZmluZF90ZXN0cw0KICAgICAgICBsb2FkZXIuc3VpdGVDbGFzcyA9IHN0cg0KDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmRpc2NvdmVyKCcvZm9vL2Jhci9iYXonLCAncGF0dGVybicsICcvZm9vL2JhcicpDQoNCiAgICAgICAgdG9wX2xldmVsX2RpciA9IG9zLnBhdGguYWJzcGF0aCgnL2Zvby9iYXInKQ0KICAgICAgICBzdGFydF9kaXIgPSBvcy5wYXRoLmFic3BhdGgoJy9mb28vYmFyL2JheicpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUsICJbJ3Rlc3RzJ10iKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvYWRlci5fdG9wX2xldmVsX2RpciwgdG9wX2xldmVsX2RpcikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChfZmluZF90ZXN0c19hcmdzLCBbKHN0YXJ0X2RpciwgJ3BhdHRlcm4nKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0SW4odG9wX2xldmVsX2Rpciwgc3lzLnBhdGgpDQoNCiAgICBkZWYgdGVzdF9kaXNjb3Zlcl93aXRoX21vZHVsZXNfdGhhdF9mYWlsX3RvX2ltcG9ydChzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgbGlzdGRpciA9IG9zLmxpc3RkaXINCiAgICAgICAgb3MubGlzdGRpciA9IGxhbWJkYSBfOiBbJ3Rlc3RfdGhpc19kb2VzX25vdF9leGlzdC5weSddDQogICAgICAgIGlzZmlsZSA9IG9zLnBhdGguaXNmaWxlDQogICAgICAgIG9zLnBhdGguaXNmaWxlID0gbGFtYmRhIF86IFRydWUNCiAgICAgICAgb3JpZ19zeXNfcGF0aCA9IHN5cy5wYXRoWzpdDQogICAgICAgIGRlZiByZXN0b3JlKCk6DQogICAgICAgICAgICBvcy5wYXRoLmlzZmlsZSA9IGlzZmlsZQ0KICAgICAgICAgICAgb3MubGlzdGRpciA9IGxpc3RkaXINCiAgICAgICAgICAgIHN5cy5wYXRoWzpdID0gb3JpZ19zeXNfcGF0aA0KICAgICAgICBzZWxmLmFkZENsZWFudXAocmVzdG9yZSkNCg0KICAgICAgICBzdWl0ZSA9IGxvYWRlci5kaXNjb3ZlcignLicpDQogICAgICAgIHNlbGYuYXNzZXJ0SW4ob3MuZ2V0Y3dkKCksIHN5cy5wYXRoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLmNvdW50VGVzdENhc2VzKCksIDEpDQogICAgICAgIHRlc3QgPSBsaXN0KGxpc3Qoc3VpdGUpWzBdKVswXSAjIGV4dHJhY3QgdGVzdCBmcm9tIHN1aXRlDQoNCiAgICAgICAgd2l0aCBzZWxmLmFzc2VydFJhaXNlcyhJbXBvcnRFcnJvcik6DQogICAgICAgICAgICB0ZXN0LnRlc3RfdGhpc19kb2VzX25vdF9leGlzdCgpDQoNCiAgICBkZWYgdGVzdF9jb21tYW5kX2xpbmVfaGFuZGxpbmdfcGFyc2VBcmdzKHNlbGYpOg0KICAgICAgICBwcm9ncmFtID0gVGVzdGFibGVUZXN0UHJvZ3JhbSgpDQoNCiAgICAgICAgYXJncyA9IFtdDQogICAgICAgIGRlZiBkb19kaXNjb3ZlcnkoYXJndik6DQogICAgICAgICAgICBhcmdzLmV4dGVuZChhcmd2KQ0KICAgICAgICBwcm9ncmFtLl9kb19kaXNjb3ZlcnkgPSBkb19kaXNjb3ZlcnkNCiAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoWydzb21ldGhpbmcnLCAnZGlzY292ZXInXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzLCBbXSkNCg0KICAgICAgICBwcm9ncmFtLnBhcnNlQXJncyhbJ3NvbWV0aGluZycsICdkaXNjb3ZlcicsICdmb28nLCAnYmFyJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgWydmb28nLCAnYmFyJ10pDQoNCiAgICBkZWYgdGVzdF9jb21tYW5kX2xpbmVfaGFuZGxpbmdfZGlzY292ZXJfYnlfZGVmYXVsdChzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IFRlc3RhYmxlVGVzdFByb2dyYW0oKQ0KICAgICAgICBwcm9ncmFtLm1vZHVsZSA9IE5vbmUNCg0KICAgICAgICBzZWxmLmNhbGxlZCA9IEZhbHNlDQogICAgICAgIGRlZiBkb19kaXNjb3ZlcnkoYXJndik6DQogICAgICAgICAgICBzZWxmLmNhbGxlZCA9IFRydWUNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJndiwgW10pDQogICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeSA9IGRvX2Rpc2NvdmVyeQ0KICAgICAgICBwcm9ncmFtLnBhcnNlQXJncyhbJ3NvbWV0aGluZyddKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoc2VsZi5jYWxsZWQpDQoNCiAgICBkZWYgdGVzdF9jb21tYW5kX2xpbmVfaGFuZGxpbmdfZGlzY292ZXJfYnlfZGVmYXVsdF93aXRoX29wdGlvbnMoc2VsZik6DQogICAgICAgIHByb2dyYW0gPSBUZXN0YWJsZVRlc3RQcm9ncmFtKCkNCiAgICAgICAgcHJvZ3JhbS5tb2R1bGUgPSBOb25lDQoNCiAgICAgICAgYXJncyA9IFsnc29tZXRoaW5nJywgJy12JywgJy1iJywgJy12JywgJy1jJywgJy1mJ10NCiAgICAgICAgc2VsZi5jYWxsZWQgPSBGYWxzZQ0KICAgICAgICBkZWYgZG9fZGlzY292ZXJ5KGFyZ3YpOg0KICAgICAgICAgICAgc2VsZi5jYWxsZWQgPSBUcnVlDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3YsIGFyZ3NbMTpdKQ0KICAgICAgICBwcm9ncmFtLl9kb19kaXNjb3ZlcnkgPSBkb19kaXNjb3ZlcnkNCiAgICAgICAgcHJvZ3JhbS5wYXJzZUFyZ3MoYXJncykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHNlbGYuY2FsbGVkKQ0KDQoNCiAgICBkZWYgdGVzdF9jb21tYW5kX2xpbmVfaGFuZGxpbmdfZG9fZGlzY292ZXJ5X3Rvb19tYW55X2FyZ3VtZW50cyhzZWxmKToNCiAgICAgICAgY2xhc3MgU3RvcChFeGNlcHRpb24pOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBkZWYgdXNhZ2VFeGl0KCk6DQogICAgICAgICAgICByYWlzZSBTdG9wDQoNCiAgICAgICAgcHJvZ3JhbSA9IFRlc3RhYmxlVGVzdFByb2dyYW0oKQ0KICAgICAgICBwcm9ncmFtLnVzYWdlRXhpdCA9IHVzYWdlRXhpdA0KDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoU3RvcCk6DQogICAgICAgICAgICAjIHRvbyBtYW55IGFyZ3MNCiAgICAgICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeShbJ29uZScsICd0d28nLCAndGhyZWUnLCAnZm91ciddKQ0KDQoNCiAgICBkZWYgdGVzdF9jb21tYW5kX2xpbmVfaGFuZGxpbmdfZG9fZGlzY292ZXJ5X2NhbGxzX2xvYWRlcihzZWxmKToNCiAgICAgICAgcHJvZ3JhbSA9IFRlc3RhYmxlVGVzdFByb2dyYW0oKQ0KDQogICAgICAgIGNsYXNzIExvYWRlcihvYmplY3QpOg0KICAgICAgICAgICAgYXJncyA9IFtdDQogICAgICAgICAgICBkZWYgZGlzY292ZXIoc2VsZiwgc3RhcnRfZGlyLCBwYXR0ZXJuLCB0b3BfbGV2ZWxfZGlyKToNCiAgICAgICAgICAgICAgICBzZWxmLmFyZ3MuYXBwZW5kKChzdGFydF9kaXIsIHBhdHRlcm4sIHRvcF9sZXZlbF9kaXIpKQ0KICAgICAgICAgICAgICAgIHJldHVybiAndGVzdHMnDQoNCiAgICAgICAgcHJvZ3JhbS5fZG9fZGlzY292ZXJ5KFsnLXYnXSwgTG9hZGVyPUxvYWRlcikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnZlcmJvc2l0eSwgMikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnRlc3QsICd0ZXN0cycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoTG9hZGVyLmFyZ3MsIFsoJy4nLCAndGVzdCoucHknLCBOb25lKV0pDQoNCiAgICAgICAgTG9hZGVyLmFyZ3MgPSBbXQ0KICAgICAgICBwcm9ncmFtID0gVGVzdGFibGVUZXN0UHJvZ3JhbSgpDQogICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeShbJy0tdmVyYm9zZSddLCBMb2FkZXI9TG9hZGVyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdCwgJ3Rlc3RzJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChMb2FkZXIuYXJncywgWygnLicsICd0ZXN0Ki5weScsIE5vbmUpXSkNCg0KICAgICAgICBMb2FkZXIuYXJncyA9IFtdDQogICAgICAgIHByb2dyYW0gPSBUZXN0YWJsZVRlc3RQcm9ncmFtKCkNCiAgICAgICAgcHJvZ3JhbS5fZG9fZGlzY292ZXJ5KFtdLCBMb2FkZXI9TG9hZGVyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdCwgJ3Rlc3RzJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChMb2FkZXIuYXJncywgWygnLicsICd0ZXN0Ki5weScsIE5vbmUpXSkNCg0KICAgICAgICBMb2FkZXIuYXJncyA9IFtdDQogICAgICAgIHByb2dyYW0gPSBUZXN0YWJsZVRlc3RQcm9ncmFtKCkNCiAgICAgICAgcHJvZ3JhbS5fZG9fZGlzY292ZXJ5KFsnZmlzaCddLCBMb2FkZXI9TG9hZGVyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdCwgJ3Rlc3RzJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChMb2FkZXIuYXJncywgWygnZmlzaCcsICd0ZXN0Ki5weScsIE5vbmUpXSkNCg0KICAgICAgICBMb2FkZXIuYXJncyA9IFtdDQogICAgICAgIHByb2dyYW0gPSBUZXN0YWJsZVRlc3RQcm9ncmFtKCkNCiAgICAgICAgcHJvZ3JhbS5fZG9fZGlzY292ZXJ5KFsnZmlzaCcsICdlZ2dzJ10sIExvYWRlcj1Mb2FkZXIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJvZ3JhbS50ZXN0LCAndGVzdHMnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKExvYWRlci5hcmdzLCBbKCdmaXNoJywgJ2VnZ3MnLCBOb25lKV0pDQoNCiAgICAgICAgTG9hZGVyLmFyZ3MgPSBbXQ0KICAgICAgICBwcm9ncmFtID0gVGVzdGFibGVUZXN0UHJvZ3JhbSgpDQogICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeShbJ2Zpc2gnLCAnZWdncycsICdoYW0nXSwgTG9hZGVyPUxvYWRlcikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnRlc3QsICd0ZXN0cycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoTG9hZGVyLmFyZ3MsIFsoJ2Zpc2gnLCAnZWdncycsICdoYW0nKV0pDQoNCiAgICAgICAgTG9hZGVyLmFyZ3MgPSBbXQ0KICAgICAgICBwcm9ncmFtID0gVGVzdGFibGVUZXN0UHJvZ3JhbSgpDQogICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeShbJy1zJywgJ2Zpc2gnXSwgTG9hZGVyPUxvYWRlcikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnRlc3QsICd0ZXN0cycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoTG9hZGVyLmFyZ3MsIFsoJ2Zpc2gnLCAndGVzdCoucHknLCBOb25lKV0pDQoNCiAgICAgICAgTG9hZGVyLmFyZ3MgPSBbXQ0KICAgICAgICBwcm9ncmFtID0gVGVzdGFibGVUZXN0UHJvZ3JhbSgpDQogICAgICAgIHByb2dyYW0uX2RvX2Rpc2NvdmVyeShbJy10JywgJ2Zpc2gnXSwgTG9hZGVyPUxvYWRlcikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm9ncmFtLnRlc3QsICd0ZXN0cycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoTG9hZGVyLmFyZ3MsIFsoJy4nLCAndGVzdCoucHknLCAnZmlzaCcpXSkNCg0KICAgICAgICBMb2FkZXIuYXJncyA9IFtdDQogICAgICAgIHByb2dyYW0gPSBUZXN0YWJsZVRlc3RQcm9ncmFtKCkNCiAgICAgICAgcHJvZ3JhbS5fZG9fZGlzY292ZXJ5KFsnLXAnLCAnZmlzaCddLCBMb2FkZXI9TG9hZGVyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb2dyYW0udGVzdCwgJ3Rlc3RzJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChMb2FkZXIuYXJncywgWygnLicsICdmaXNoJywgTm9uZSldKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKHByb2dyYW0uZmFpbGZhc3QpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocHJvZ3JhbS5jYXRjaGJyZWFrKQ0KDQogICAgICAgIExvYWRlci5hcmdzID0gW10NCiAgICAgICAgcHJvZ3JhbSA9IFRlc3RhYmxlVGVzdFByb2dyYW0oKQ0KICAgICAgICBwcm9ncmFtLl9kb19kaXNjb3ZlcnkoWyctcCcsICdlZ2dzJywgJy1zJywgJ2Zpc2gnLCAnLXYnLCAnLWYnLCAnLWMnXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvYWRlcj1Mb2FkZXIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJvZ3JhbS50ZXN0LCAndGVzdHMnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKExvYWRlci5hcmdzLCBbKCdmaXNoJywgJ2VnZ3MnLCBOb25lKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJvZ3JhbS52ZXJib3NpdHksIDIpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShwcm9ncmFtLmZhaWxmYXN0KQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUocHJvZ3JhbS5jYXRjaGJyZWFrKQ0KDQogICAgZGVmIHRlc3RfZGV0ZWN0X21vZHVsZV9jbGFzaChzZWxmKToNCiAgICAgICAgY2xhc3MgTW9kdWxlKG9iamVjdCk6DQogICAgICAgICAgICBfX2ZpbGVfXyA9ICdiYXIvZm9vLnB5Jw0KICAgICAgICBzeXMubW9kdWxlc1snZm9vJ10gPSBNb2R1bGUNCiAgICAgICAgZnVsbF9wYXRoID0gb3MucGF0aC5hYnNwYXRoKCdmb28nKQ0KICAgICAgICBvcmlnaW5hbF9saXN0ZGlyID0gb3MubGlzdGRpcg0KICAgICAgICBvcmlnaW5hbF9pc2ZpbGUgPSBvcy5wYXRoLmlzZmlsZQ0KICAgICAgICBvcmlnaW5hbF9pc2RpciA9IG9zLnBhdGguaXNkaXINCg0KICAgICAgICBkZWYgY2xlYW51cCgpOg0KICAgICAgICAgICAgb3MubGlzdGRpciA9IG9yaWdpbmFsX2xpc3RkaXINCiAgICAgICAgICAgIG9zLnBhdGguaXNmaWxlID0gb3JpZ2luYWxfaXNmaWxlDQogICAgICAgICAgICBvcy5wYXRoLmlzZGlyID0gb3JpZ2luYWxfaXNkaXINCiAgICAgICAgICAgIGRlbCBzeXMubW9kdWxlc1snZm9vJ10NCiAgICAgICAgICAgIGlmIGZ1bGxfcGF0aCBpbiBzeXMucGF0aDoNCiAgICAgICAgICAgICAgICBzeXMucGF0aC5yZW1vdmUoZnVsbF9wYXRoKQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAoY2xlYW51cCkNCg0KICAgICAgICBkZWYgbGlzdGRpcihfKToNCiAgICAgICAgICAgIHJldHVybiBbJ2Zvby5weSddDQogICAgICAgIGRlZiBpc2ZpbGUoXyk6DQogICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICBkZWYgaXNkaXIoXyk6DQogICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICBvcy5saXN0ZGlyID0gbGlzdGRpcg0KICAgICAgICBvcy5wYXRoLmlzZmlsZSA9IGlzZmlsZQ0KICAgICAgICBvcy5wYXRoLmlzZGlyID0gaXNkaXINCg0KICAgICAgICBsb2FkZXIgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkNCg0KICAgICAgICBtb2RfZGlyID0gb3MucGF0aC5hYnNwYXRoKCdiYXInKQ0KICAgICAgICBleHBlY3RlZF9kaXIgPSBvcy5wYXRoLmFic3BhdGgoJ2ZvbycpDQogICAgICAgIG1zZyA9IHJlLmVzY2FwZShyIidmb28nIG1vZHVsZSBpbmNvcnJlY3RseSBpbXBvcnRlZCBmcm9tICVyLiBFeHBlY3RlZCAlci4gIg0KICAgICAgICAgICAgICAgICJJcyB0aGlzIG1vZHVsZSBnbG9iYWxseSBpbnN0YWxsZWQ/IiAlIChtb2RfZGlyLCBleHBlY3RlZF9kaXIpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KA0KICAgICAgICAgICAgSW1wb3J0RXJyb3IsICdeJXMkJyAlIG1zZywgbG9hZGVyLmRpc2NvdmVyLA0KICAgICAgICAgICAgc3RhcnRfZGlyPSdmb28nLCBwYXR0ZXJuPSdmb28ucHknDQogICAgICAgICkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzeXMucGF0aFswXSwgZnVsbF9wYXRoKQ0KDQoNCiAgICBkZWYgdGVzdF9kaXNjb3ZlcnlfZnJvbV9kb3R0ZWRfcGF0aChzZWxmKToNCiAgICAgICAgbG9hZGVyID0gdW5pdHRlc3QuVGVzdExvYWRlcigpDQoNCiAgICAgICAgdGVzdHMgPSBbc2VsZl0NCiAgICAgICAgZXhwZWN0ZWRQYXRoID0gb3MucGF0aC5hYnNwYXRoKG9zLnBhdGguZGlybmFtZSh1bml0dGVzdC50ZXN0Ll9fZmlsZV9fKSkNCg0KICAgICAgICBzZWxmLndhc1J1biA9IEZhbHNlDQogICAgICAgIGRlZiBfZmluZF90ZXN0cyhzdGFydF9kaXIsIHBhdHRlcm4pOg0KICAgICAgICAgICAgc2VsZi53YXNSdW4gPSBUcnVlDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0YXJ0X2RpciwgZXhwZWN0ZWRQYXRoKQ0KICAgICAgICAgICAgcmV0dXJuIHRlc3RzDQogICAgICAgIGxvYWRlci5fZmluZF90ZXN0cyA9IF9maW5kX3Rlc3RzDQogICAgICAgIHN1aXRlID0gbG9hZGVyLmRpc2NvdmVyKCd1bml0dGVzdC50ZXN0JykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHNlbGYud2FzUnVuKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLl90ZXN0cywgdGVzdHMpDQoNCg0KaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoNCiAgICB1bml0dGVzdC5tYWluKCkNCg==',
'/Lib/unittest/test/__init__.py':'aW1wb3J0IG9zDQppbXBvcnQgc3lzDQppbXBvcnQgdW5pdHRlc3QNCg0KDQpoZXJlID0gb3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKQ0KbG9hZGVyID0gdW5pdHRlc3QuZGVmYXVsdFRlc3RMb2FkZXINCg0KZGVmIHN1aXRlKCk6DQogICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgIGZvciBmbiBpbiBvcy5saXN0ZGlyKGhlcmUpOg0KICAgICAgICBpZiBmbi5zdGFydHN3aXRoKCJ0ZXN0IikgYW5kIGZuLmVuZHN3aXRoKCIucHkiKToNCiAgICAgICAgICAgIG1vZG5hbWUgPSAidW5pdHRlc3QudGVzdC4iICsgZm5bOi0zXQ0KICAgICAgICAgICAgX19pbXBvcnRfXyhtb2RuYW1lKQ0KICAgICAgICAgICAgbW9kdWxlID0gc3lzLm1vZHVsZXNbbW9kbmFtZV0NCiAgICAgICAgICAgIHN1aXRlLmFkZFRlc3QobG9hZGVyLmxvYWRUZXN0c0Zyb21Nb2R1bGUobW9kdWxlKSkNCiAgICBzdWl0ZS5hZGRUZXN0KGxvYWRlci5sb2FkVGVzdHNGcm9tTmFtZSgndW5pdHRlc3QudGVzdC50ZXN0bW9jaycpKQ0KICAgIHJldHVybiBzdWl0ZQ0KDQoNCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6DQogICAgdW5pdHRlc3QubWFpbihkZWZhdWx0VGVzdD0ic3VpdGUiKQ0K',
'/Lib/unittest/test/test_result.py':'aW1wb3J0IGlvDQppbXBvcnQgc3lzDQppbXBvcnQgdGV4dHdyYXANCg0KZnJvbSB0ZXN0IGltcG9ydCBzdXBwb3J0DQoNCmltcG9ydCB0cmFjZWJhY2sNCmltcG9ydCB1bml0dGVzdA0KDQoNCmNsYXNzIFRlc3RfVGVzdFJlc3VsdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgIyBOb3RlOiB0aGVyZSBhcmUgbm90IHNlcGFyYXRlIHRlc3RzIGZvciBUZXN0UmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSwNCiAgICAjIFRlc3RSZXN1bHQuZXJyb3JzLCBUZXN0UmVzdWx0LmZhaWx1cmVzLCBUZXN0UmVzdWx0LnRlc3RzUnVuIG9yDQogICAgIyBUZXN0UmVzdWx0LnNob3VsZFN0b3AgYmVjYXVzZSB0aGVzZSBvbmx5IGhhdmUgbWVhbmluZyBpbiB0ZXJtcyBvZg0KICAgICMgb3RoZXIgVGVzdFJlc3VsdCBtZXRob2RzLg0KICAgICMNCiAgICAjIEFjY29yZGluZ2x5LCB0ZXN0cyBmb3IgdGhlIGFmb3JlbmFtZWQgYXR0cmlidXRlcyBhcmUgaW5jb3Jwb3JhdGVkDQogICAgIyBpbiB3aXRoIHRoZSB0ZXN0cyBmb3IgdGhlIGRlZmluaW5nIG1ldGhvZHMuDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgZGVmIHRlc3RfaW5pdChzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC53YXNTdWNjZXNzZnVsKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZmFpbHVyZXMpLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuc2hvdWxkU3RvcCwgRmFsc2UpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb25lKHJlc3VsdC5fc3Rkb3V0X2J1ZmZlcikNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vbmUocmVzdWx0Ll9zdGRlcnJfYnVmZmVyKQ0KDQogICAgIyAiVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byBzaWduYWwgdGhhdCB0aGUgc2V0IG9mIHRlc3RzIGJlaW5nDQogICAgIyBydW4gc2hvdWxkIGJlIGFib3J0ZWQgYnkgc2V0dGluZyB0aGUgVGVzdFJlc3VsdCdzIHNob3VsZFN0b3ANCiAgICAjIGF0dHJpYnV0ZSB0byBUcnVlLiINCiAgICBkZWYgdGVzdF9zdG9wKHNlbGYpOg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCg0KICAgICAgICByZXN1bHQuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuc2hvdWxkU3RvcCwgVHJ1ZSkNCg0KICAgICMgIkNhbGxlZCB3aGVuIHRoZSB0ZXN0IGNhc2UgdGVzdCBpcyBhYm91dCB0byBiZSBydW4uIFRoZSBkZWZhdWx0DQogICAgIyBpbXBsZW1lbnRhdGlvbiBzaW1wbHkgaW5jcmVtZW50cyB0aGUgaW5zdGFuY2UncyB0ZXN0c1J1biBjb3VudGVyLiINCiAgICBkZWYgdGVzdF9zdGFydFRlc3Qoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICB0ZXN0ID0gRm9vKCd0ZXN0XzEnKQ0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KDQogICAgICAgIHJlc3VsdC5zdGFydFRlc3QodGVzdCkNCg0KICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5mYWlsdXJlcyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5zaG91bGRTdG9wLCBGYWxzZSkNCg0KICAgICAgICByZXN1bHQuc3RvcFRlc3QodGVzdCkNCg0KICAgICMgIkNhbGxlZCBhZnRlciB0aGUgdGVzdCBjYXNlIHRlc3QgaGFzIGJlZW4gZXhlY3V0ZWQsIHJlZ2FyZGxlc3Mgb2YNCiAgICAjIHRoZSBvdXRjb21lLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdGhpbmcuIg0KICAgIGRlZiB0ZXN0X3N0b3BUZXN0KHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RfMShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgdGVzdCA9IEZvbygndGVzdF8xJykNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCg0KICAgICAgICByZXN1bHQuc3RhcnRUZXN0KHRlc3QpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC53YXNTdWNjZXNzZnVsKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZmFpbHVyZXMpLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuc2hvdWxkU3RvcCwgRmFsc2UpDQoNCiAgICAgICAgcmVzdWx0LnN0b3BUZXN0KHRlc3QpDQoNCiAgICAgICAgIyBTYW1lIHRlc3RzIGFzIGFib3ZlOyBtYWtlIHN1cmUgbm90aGluZyBoYXMgY2hhbmdlZA0KICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5mYWlsdXJlcyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5zaG91bGRTdG9wLCBGYWxzZSkNCg0KICAgICMgIkNhbGxlZCBiZWZvcmUgYW5kIGFmdGVyIHRlc3RzIGFyZSBydW4uIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGRvZXMgbm90aGluZy4iDQogICAgZGVmIHRlc3Rfc3RhcnRUZXN0UnVuX3N0b3BUZXN0UnVuKHNlbGYpOg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgcmVzdWx0LnN0YXJ0VGVzdFJ1bigpDQogICAgICAgIHJlc3VsdC5zdG9wVGVzdFJ1bigpDQoNCiAgICAjICJhZGRTdWNjZXNzKHRlc3QpIg0KICAgICMgLi4uDQogICAgIyAiQ2FsbGVkIHdoZW4gdGhlIHRlc3QgY2FzZSB0ZXN0IHN1Y2NlZWRzIg0KICAgICMgLi4uDQogICAgIyAid2FzU3VjY2Vzc2Z1bCgpIC0gUmV0dXJucyBUcnVlIGlmIGFsbCB0ZXN0cyBydW4gc28gZmFyIGhhdmUgcGFzc2VkLA0KICAgICMgb3RoZXJ3aXNlIHJldHVybnMgRmFsc2UiDQogICAgIyAuLi4NCiAgICAjICJ0ZXN0c1J1biAtIFRoZSB0b3RhbCBudW1iZXIgb2YgdGVzdHMgcnVuIHNvIGZhci4iDQogICAgIyAuLi4NCiAgICAjICJlcnJvcnMgLSBBIGxpc3QgY29udGFpbmluZyAyLXR1cGxlcyBvZiBUZXN0Q2FzZSBpbnN0YW5jZXMgYW5kDQogICAgIyBmb3JtYXR0ZWQgdHJhY2ViYWNrcy4gRWFjaCB0dXBsZSByZXByZXNlbnRzIGEgdGVzdCB3aGljaCByYWlzZWQgYW4NCiAgICAjIHVuZXhwZWN0ZWQgZXhjZXB0aW9uLiBDb250YWlucyBmb3JtYXR0ZWQNCiAgICAjIHRyYWNlYmFja3MgaW5zdGVhZCBvZiBzeXMuZXhjX2luZm8oKSByZXN1bHRzLiINCiAgICAjIC4uLg0KICAgICMgImZhaWx1cmVzIC0gQSBsaXN0IGNvbnRhaW5pbmcgMi10dXBsZXMgb2YgVGVzdENhc2UgaW5zdGFuY2VzIGFuZA0KICAgICMgZm9ybWF0dGVkIHRyYWNlYmFja3MuIEVhY2ggdHVwbGUgcmVwcmVzZW50cyBhIHRlc3Qgd2hlcmUgYSBmYWlsdXJlIHdhcw0KICAgICMgZXhwbGljaXRseSBzaWduYWxsZWQgdXNpbmcgdGhlIFRlc3RDYXNlLmZhaWwqKCkgb3IgVGVzdENhc2UuYXNzZXJ0KigpDQogICAgIyBtZXRob2RzLiBDb250YWlucyBmb3JtYXR0ZWQgdHJhY2ViYWNrcyBpbnN0ZWFkDQogICAgIyBvZiBzeXMuZXhjX2luZm8oKSByZXN1bHRzLiINCiAgICBkZWYgdGVzdF9hZGRTdWNjZXNzKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RfMShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgdGVzdCA9IEZvbygndGVzdF8xJykNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCg0KICAgICAgICByZXN1bHQuc3RhcnRUZXN0KHRlc3QpDQogICAgICAgIHJlc3VsdC5hZGRTdWNjZXNzKHRlc3QpDQogICAgICAgIHJlc3VsdC5zdG9wVGVzdCh0ZXN0KQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQud2FzU3VjY2Vzc2Z1bCgpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmZhaWx1cmVzKSwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNob3VsZFN0b3AsIEZhbHNlKQ0KDQogICAgIyAiYWRkRmFpbHVyZSh0ZXN0LCBlcnIpIg0KICAgICMgLi4uDQogICAgIyAiQ2FsbGVkIHdoZW4gdGhlIHRlc3QgY2FzZSB0ZXN0IHNpZ25hbHMgYSBmYWlsdXJlLiBlcnIgaXMgYSB0dXBsZSBvZg0KICAgICMgdGhlIGZvcm0gcmV0dXJuZWQgYnkgc3lzLmV4Y19pbmZvKCk6ICh0eXBlLCB2YWx1ZSwgdHJhY2ViYWNrKSINCiAgICAjIC4uLg0KICAgICMgIndhc1N1Y2Nlc3NmdWwoKSAtIFJldHVybnMgVHJ1ZSBpZiBhbGwgdGVzdHMgcnVuIHNvIGZhciBoYXZlIHBhc3NlZCwNCiAgICAjIG90aGVyd2lzZSByZXR1cm5zIEZhbHNlIg0KICAgICMgLi4uDQogICAgIyAidGVzdHNSdW4gLSBUaGUgdG90YWwgbnVtYmVyIG9mIHRlc3RzIHJ1biBzbyBmYXIuIg0KICAgICMgLi4uDQogICAgIyAiZXJyb3JzIC0gQSBsaXN0IGNvbnRhaW5pbmcgMi10dXBsZXMgb2YgVGVzdENhc2UgaW5zdGFuY2VzIGFuZA0KICAgICMgZm9ybWF0dGVkIHRyYWNlYmFja3MuIEVhY2ggdHVwbGUgcmVwcmVzZW50cyBhIHRlc3Qgd2hpY2ggcmFpc2VkIGFuDQogICAgIyB1bmV4cGVjdGVkIGV4Y2VwdGlvbi4gQ29udGFpbnMgZm9ybWF0dGVkDQogICAgIyB0cmFjZWJhY2tzIGluc3RlYWQgb2Ygc3lzLmV4Y19pbmZvKCkgcmVzdWx0cy4iDQogICAgIyAuLi4NCiAgICAjICJmYWlsdXJlcyAtIEEgbGlzdCBjb250YWluaW5nIDItdHVwbGVzIG9mIFRlc3RDYXNlIGluc3RhbmNlcyBhbmQNCiAgICAjIGZvcm1hdHRlZCB0cmFjZWJhY2tzLiBFYWNoIHR1cGxlIHJlcHJlc2VudHMgYSB0ZXN0IHdoZXJlIGEgZmFpbHVyZSB3YXMNCiAgICAjIGV4cGxpY2l0bHkgc2lnbmFsbGVkIHVzaW5nIHRoZSBUZXN0Q2FzZS5mYWlsKigpIG9yIFRlc3RDYXNlLmFzc2VydCooKQ0KICAgICMgbWV0aG9kcy4gQ29udGFpbnMgZm9ybWF0dGVkIHRyYWNlYmFja3MgaW5zdGVhZA0KICAgICMgb2Ygc3lzLmV4Y19pbmZvKCkgcmVzdWx0cy4iDQogICAgZGVmIHRlc3RfYWRkRmFpbHVyZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHRlc3QgPSBGb28oJ3Rlc3RfMScpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRlc3QuZmFpbCgiZm9vIikNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgZXhjX2luZm9fdHVwbGUgPSBzeXMuZXhjX2luZm8oKQ0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KDQogICAgICAgIHJlc3VsdC5zdGFydFRlc3QodGVzdCkNCiAgICAgICAgcmVzdWx0LmFkZEZhaWx1cmUodGVzdCwgZXhjX2luZm9fdHVwbGUpDQogICAgICAgIHJlc3VsdC5zdG9wVGVzdCh0ZXN0KQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5mYWlsdXJlcyksIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5zaG91bGRTdG9wLCBGYWxzZSkNCg0KICAgICAgICB0ZXN0X2Nhc2UsIGZvcm1hdHRlZF9leGMgPSByZXN1bHQuZmFpbHVyZXNbMF0NCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHRlc3RfY2FzZSBpcyB0ZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoZm9ybWF0dGVkX2V4Yywgc3RyKQ0KDQogICAgIyAiYWRkRXJyb3IodGVzdCwgZXJyKSINCiAgICAjIC4uLg0KICAgICMgIkNhbGxlZCB3aGVuIHRoZSB0ZXN0IGNhc2UgdGVzdCByYWlzZXMgYW4gdW5leHBlY3RlZCBleGNlcHRpb24gZXJyDQogICAgIyBpcyBhIHR1cGxlIG9mIHRoZSBmb3JtIHJldHVybmVkIGJ5IHN5cy5leGNfaW5mbygpOg0KICAgICMgKHR5cGUsIHZhbHVlLCB0cmFjZWJhY2spIg0KICAgICMgLi4uDQogICAgIyAid2FzU3VjY2Vzc2Z1bCgpIC0gUmV0dXJucyBUcnVlIGlmIGFsbCB0ZXN0cyBydW4gc28gZmFyIGhhdmUgcGFzc2VkLA0KICAgICMgb3RoZXJ3aXNlIHJldHVybnMgRmFsc2UiDQogICAgIyAuLi4NCiAgICAjICJ0ZXN0c1J1biAtIFRoZSB0b3RhbCBudW1iZXIgb2YgdGVzdHMgcnVuIHNvIGZhci4iDQogICAgIyAuLi4NCiAgICAjICJlcnJvcnMgLSBBIGxpc3QgY29udGFpbmluZyAyLXR1cGxlcyBvZiBUZXN0Q2FzZSBpbnN0YW5jZXMgYW5kDQogICAgIyBmb3JtYXR0ZWQgdHJhY2ViYWNrcy4gRWFjaCB0dXBsZSByZXByZXNlbnRzIGEgdGVzdCB3aGljaCByYWlzZWQgYW4NCiAgICAjIHVuZXhwZWN0ZWQgZXhjZXB0aW9uLiBDb250YWlucyBmb3JtYXR0ZWQNCiAgICAjIHRyYWNlYmFja3MgaW5zdGVhZCBvZiBzeXMuZXhjX2luZm8oKSByZXN1bHRzLiINCiAgICAjIC4uLg0KICAgICMgImZhaWx1cmVzIC0gQSBsaXN0IGNvbnRhaW5pbmcgMi10dXBsZXMgb2YgVGVzdENhc2UgaW5zdGFuY2VzIGFuZA0KICAgICMgZm9ybWF0dGVkIHRyYWNlYmFja3MuIEVhY2ggdHVwbGUgcmVwcmVzZW50cyBhIHRlc3Qgd2hlcmUgYSBmYWlsdXJlIHdhcw0KICAgICMgZXhwbGljaXRseSBzaWduYWxsZWQgdXNpbmcgdGhlIFRlc3RDYXNlLmZhaWwqKCkgb3IgVGVzdENhc2UuYXNzZXJ0KigpDQogICAgIyBtZXRob2RzLiBDb250YWlucyBmb3JtYXR0ZWQgdHJhY2ViYWNrcyBpbnN0ZWFkDQogICAgIyBvZiBzeXMuZXhjX2luZm8oKSByZXN1bHRzLiINCiAgICBkZWYgdGVzdF9hZGRFcnJvcihzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHRlc3QgPSBGb28oJ3Rlc3RfMScpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIGV4Y19pbmZvX3R1cGxlID0gc3lzLmV4Y19pbmZvKCkNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCg0KICAgICAgICByZXN1bHQuc3RhcnRUZXN0KHRlc3QpDQogICAgICAgIHJlc3VsdC5hZGRFcnJvcih0ZXN0LCBleGNfaW5mb190dXBsZSkNCiAgICAgICAgcmVzdWx0LnN0b3BUZXN0KHRlc3QpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShyZXN1bHQud2FzU3VjY2Vzc2Z1bCgpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmZhaWx1cmVzKSwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnNob3VsZFN0b3AsIEZhbHNlKQ0KDQogICAgICAgIHRlc3RfY2FzZSwgZm9ybWF0dGVkX2V4YyA9IHJlc3VsdC5lcnJvcnNbMF0NCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHRlc3RfY2FzZSBpcyB0ZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoZm9ybWF0dGVkX2V4Yywgc3RyKQ0KDQogICAgZGVmIHRlc3RHZXREZXNjcmlwdGlvbldpdGhvdXREb2NzdHJpbmcoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRleHRUZXN0UmVzdWx0KE5vbmUsIFRydWUsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICAgICAgcmVzdWx0LmdldERlc2NyaXB0aW9uKHNlbGYpLA0KICAgICAgICAgICAgICAgICd0ZXN0R2V0RGVzY3JpcHRpb25XaXRob3V0RG9jc3RyaW5nICgnICsgX19uYW1lX18gKw0KICAgICAgICAgICAgICAgICcuVGVzdF9UZXN0UmVzdWx0KScpDQoNCiAgICBAdW5pdHRlc3Quc2tpcElmKHN5cy5mbGFncy5vcHRpbWl6ZSA+PSAyLA0KICAgICAgICAgICAgICAgICAgICAgIkRvY3N0cmluZ3MgYXJlIG9taXR0ZWQgd2l0aCAtTzIgYW5kIGFib3ZlIikNCiAgICBkZWYgdGVzdEdldERlc2NyaXB0aW9uV2l0aE9uZUxpbmVEb2NzdHJpbmcoc2VsZik6DQogICAgICAgICIiIlRlc3RzIGdldERlc2NyaXB0aW9uKCkgZm9yIGEgbWV0aG9kIHdpdGggYSBkb2NzdHJpbmcuIiIiDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRleHRUZXN0UmVzdWx0KE5vbmUsIFRydWUsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICAgICAgcmVzdWx0LmdldERlc2NyaXB0aW9uKHNlbGYpLA0KICAgICAgICAgICAgICAgKCd0ZXN0R2V0RGVzY3JpcHRpb25XaXRoT25lTGluZURvY3N0cmluZyAnDQogICAgICAgICAgICAgICAgJygnICsgX19uYW1lX18gKyAnLlRlc3RfVGVzdFJlc3VsdClcbicNCiAgICAgICAgICAgICAgICAnVGVzdHMgZ2V0RGVzY3JpcHRpb24oKSBmb3IgYSBtZXRob2Qgd2l0aCBhIGRvY3N0cmluZy4nKSkNCg0KICAgIEB1bml0dGVzdC5za2lwSWYoc3lzLmZsYWdzLm9wdGltaXplID49IDIsDQogICAgICAgICAgICAgICAgICAgICAiRG9jc3RyaW5ncyBhcmUgb21pdHRlZCB3aXRoIC1PMiBhbmQgYWJvdmUiKQ0KICAgIGRlZiB0ZXN0R2V0RGVzY3JpcHRpb25XaXRoTXVsdGlMaW5lRG9jc3RyaW5nKHNlbGYpOg0KICAgICAgICAiIiJUZXN0cyBnZXREZXNjcmlwdGlvbigpIGZvciBhIG1ldGhvZCB3aXRoIGEgbG9uZ2VyIGRvY3N0cmluZy4NCiAgICAgICAgVGhlIHNlY29uZCBsaW5lIG9mIHRoZSBkb2NzdHJpbmcuDQogICAgICAgICIiIg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXh0VGVzdFJlc3VsdChOb25lLCBUcnVlLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKA0KICAgICAgICAgICAgICAgIHJlc3VsdC5nZXREZXNjcmlwdGlvbihzZWxmKSwNCiAgICAgICAgICAgICAgICgndGVzdEdldERlc2NyaXB0aW9uV2l0aE11bHRpTGluZURvY3N0cmluZyAnDQogICAgICAgICAgICAgICAgJygnICsgX19uYW1lX18gKyAnLlRlc3RfVGVzdFJlc3VsdClcbicNCiAgICAgICAgICAgICAgICAnVGVzdHMgZ2V0RGVzY3JpcHRpb24oKSBmb3IgYSBtZXRob2Qgd2l0aCBhIGxvbmdlciAnDQogICAgICAgICAgICAgICAgJ2RvY3N0cmluZy4nKSkNCg0KICAgIGRlZiB0ZXN0U3RhY2tGcmFtZVRyaW1taW5nKHNlbGYpOg0KICAgICAgICBjbGFzcyBGcmFtZShvYmplY3QpOg0KICAgICAgICAgICAgY2xhc3MgdGJfZnJhbWUob2JqZWN0KToNCiAgICAgICAgICAgICAgICBmX2dsb2JhbHMgPSB7fQ0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShyZXN1bHQuX2lzX3JlbGV2YW50X3RiX2xldmVsKEZyYW1lKSkNCg0KICAgICAgICBGcmFtZS50Yl9mcmFtZS5mX2dsb2JhbHNbJ19fdW5pdHRlc3QnXSA9IFRydWUNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJlc3VsdC5faXNfcmVsZXZhbnRfdGJfbGV2ZWwoRnJhbWUpKQ0KDQogICAgZGVmIHRlc3RGYWlsRmFzdChzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHJlc3VsdC5fZXhjX2luZm9fdG9fc3RyaW5nID0gbGFtYmRhICpfOiAnJw0KICAgICAgICByZXN1bHQuZmFpbGZhc3QgPSBUcnVlDQogICAgICAgIHJlc3VsdC5hZGRFcnJvcihOb25lLCBOb25lKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0LnNob3VsZFN0b3ApDQoNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHJlc3VsdC5fZXhjX2luZm9fdG9fc3RyaW5nID0gbGFtYmRhICpfOiAnJw0KICAgICAgICByZXN1bHQuZmFpbGZhc3QgPSBUcnVlDQogICAgICAgIHJlc3VsdC5hZGRGYWlsdXJlKE5vbmUsIE5vbmUpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQuc2hvdWxkU3RvcCkNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgcmVzdWx0Ll9leGNfaW5mb190b19zdHJpbmcgPSBsYW1iZGEgKl86ICcnDQogICAgICAgIHJlc3VsdC5mYWlsZmFzdCA9IFRydWUNCiAgICAgICAgcmVzdWx0LmFkZFVuZXhwZWN0ZWRTdWNjZXNzKE5vbmUpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQuc2hvdWxkU3RvcCkNCg0KICAgIGRlZiB0ZXN0RmFpbEZhc3RTZXRCeVJ1bm5lcihzZWxmKToNCiAgICAgICAgcnVubmVyID0gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoc3RyZWFtPWlvLlN0cmluZ0lPKCksIGZhaWxmYXN0PVRydWUpDQogICAgICAgIGRlZiB0ZXN0KHJlc3VsdCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUocmVzdWx0LmZhaWxmYXN0KQ0KICAgICAgICByZXN1bHQgPSBydW5uZXIucnVuKHRlc3QpDQoNCg0KY2xhc3NEaWN0ID0gZGljdCh1bml0dGVzdC5UZXN0UmVzdWx0Ll9fZGljdF9fKQ0KZm9yIG0gaW4gKCdhZGRTa2lwJywgJ2FkZEV4cGVjdGVkRmFpbHVyZScsICdhZGRVbmV4cGVjdGVkU3VjY2VzcycsDQogICAgICAgICAgICdfX2luaXRfXycpOg0KICAgIGRlbCBjbGFzc0RpY3RbbV0NCg0KZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbT1Ob25lLCBkZXNjcmlwdGlvbnM9Tm9uZSwgdmVyYm9zaXR5PU5vbmUpOg0KICAgIHNlbGYuZmFpbHVyZXMgPSBbXQ0KICAgIHNlbGYuZXJyb3JzID0gW10NCiAgICBzZWxmLnRlc3RzUnVuID0gMA0KICAgIHNlbGYuc2hvdWxkU3RvcCA9IEZhbHNlDQogICAgc2VsZi5idWZmZXIgPSBGYWxzZQ0KDQpjbGFzc0RpY3RbJ19faW5pdF9fJ10gPSBfX2luaXRfXw0KT2xkUmVzdWx0ID0gdHlwZSgnT2xkUmVzdWx0JywgKG9iamVjdCwpLCBjbGFzc0RpY3QpDQoNCmNsYXNzIFRlc3RfT2xkVGVzdFJlc3VsdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQoNCiAgICBkZWYgYXNzZXJ0T2xkUmVzdWx0V2FybmluZyhzZWxmLCB0ZXN0LCBmYWlsdXJlcyk6DQogICAgICAgIHdpdGggc3VwcG9ydC5jaGVja193YXJuaW5ncygoIlRlc3RSZXN1bHQgaGFzIG5vIGFkZC4rIG1ldGhvZCwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJ1bnRpbWVXYXJuaW5nKSk6DQogICAgICAgICAgICByZXN1bHQgPSBPbGRSZXN1bHQoKQ0KICAgICAgICAgICAgdGVzdC5ydW4ocmVzdWx0KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmZhaWx1cmVzKSwgZmFpbHVyZXMpDQoNCiAgICBkZWYgdGVzdE9sZFRlc3RSZXN1bHQoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RTa2lwKHNlbGYpOg0KICAgICAgICAgICAgICAgIHNlbGYuc2tpcFRlc3QoJ2Zvb2JhcicpDQogICAgICAgICAgICBAdW5pdHRlc3QuZXhwZWN0ZWRGYWlsdXJlDQogICAgICAgICAgICBkZWYgdGVzdEV4cGVjdGVkRmFpbChzZWxmKToNCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3INCiAgICAgICAgICAgIEB1bml0dGVzdC5leHBlY3RlZEZhaWx1cmUNCiAgICAgICAgICAgIGRlZiB0ZXN0VW5leHBlY3RlZFN1Y2Nlc3Moc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGZvciB0ZXN0X25hbWUsIHNob3VsZF9wYXNzIGluICgoJ3Rlc3RTa2lwJywgVHJ1ZSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ3Rlc3RFeHBlY3RlZEZhaWwnLCBUcnVlKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgndGVzdFVuZXhwZWN0ZWRTdWNjZXNzJywgRmFsc2UpKToNCiAgICAgICAgICAgIHRlc3QgPSBUZXN0KHRlc3RfbmFtZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0T2xkUmVzdWx0V2FybmluZyh0ZXN0LCBpbnQobm90IHNob3VsZF9wYXNzKSkNCg0KICAgIGRlZiB0ZXN0T2xkVGVzdFRlc3VsdFNldHVwKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBzZXRVcChzZWxmKToNCiAgICAgICAgICAgICAgICBzZWxmLnNraXBUZXN0KCdubyByZWFzb24nKQ0KICAgICAgICAgICAgZGVmIHRlc3RGb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBzZWxmLmFzc2VydE9sZFJlc3VsdFdhcm5pbmcoVGVzdCgndGVzdEZvbycpLCAwKQ0KDQogICAgZGVmIHRlc3RPbGRUZXN0UmVzdWx0Q2xhc3Moc2VsZik6DQogICAgICAgIEB1bml0dGVzdC5za2lwKCdubyByZWFzb24nKQ0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0Rm9vKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgc2VsZi5hc3NlcnRPbGRSZXN1bHRXYXJuaW5nKFRlc3QoJ3Rlc3RGb28nKSwgMCkNCg0KICAgIGRlZiB0ZXN0T2xkUmVzdWx0V2l0aFJ1bm5lcihzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdEZvbyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIHJ1bm5lciA9IHVuaXR0ZXN0LlRleHRUZXN0UnVubmVyKHJlc3VsdGNsYXNzPU9sZFJlc3VsdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbT1pby5TdHJpbmdJTygpKQ0KICAgICAgICAjIFRoaXMgd2lsbCByYWlzZSBhbiBleGNlcHRpb24gaWYgVGV4dFRlc3RSdW5uZXIgY2FuJ3QgaGFuZGxlIG9sZA0KICAgICAgICAjIHRlc3QgcmVzdWx0IG9iamVjdHMNCiAgICAgICAgcnVubmVyLnJ1bihUZXN0KCd0ZXN0Rm9vJykpDQoNCg0KY2xhc3MgTW9ja1RyYWNlYmFjayhvYmplY3QpOg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgZm9ybWF0X2V4Y2VwdGlvbigqXyk6DQogICAgICAgIHJldHVybiBbJ0EgdHJhY2ViYWNrJ10NCg0KZGVmIHJlc3RvcmVfdHJhY2ViYWNrKCk6DQogICAgdW5pdHRlc3QucmVzdWx0LnRyYWNlYmFjayA9IHRyYWNlYmFjaw0KDQoNCmNsYXNzIFRlc3RPdXRwdXRCdWZmZXJpbmcodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgZGVmIHNldFVwKHNlbGYpOg0KICAgICAgICBzZWxmLl9yZWFsX291dCA9IHN5cy5zdGRvdXQNCiAgICAgICAgc2VsZi5fcmVhbF9lcnIgPSBzeXMuc3RkZXJyDQoNCiAgICBkZWYgdGVhckRvd24oc2VsZik6DQogICAgICAgIHN5cy5zdGRvdXQgPSBzZWxmLl9yZWFsX291dA0KICAgICAgICBzeXMuc3RkZXJyID0gc2VsZi5fcmVhbF9lcnINCg0KICAgIGRlZiB0ZXN0QnVmZmVyT3V0cHV0T2ZmKHNlbGYpOg0KICAgICAgICByZWFsX291dCA9IHNlbGYuX3JlYWxfb3V0DQogICAgICAgIHJlYWxfZXJyID0gc2VsZi5fcmVhbF9lcnINCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShyZXN1bHQuYnVmZmVyKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmVhbF9vdXQsIHN5cy5zdGRvdXQpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmVhbF9lcnIsIHN5cy5zdGRlcnIpDQoNCiAgICAgICAgcmVzdWx0LnN0YXJ0VGVzdChzZWxmKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmVhbF9vdXQsIHN5cy5zdGRvdXQpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMocmVhbF9lcnIsIHN5cy5zdGRlcnIpDQoNCiAgICBkZWYgdGVzdEJ1ZmZlck91dHB1dFN0YXJ0VGVzdEFkZFN1Y2Nlc3Moc2VsZik6DQogICAgICAgIHJlYWxfb3V0ID0gc2VsZi5fcmVhbF9vdXQNCiAgICAgICAgcmVhbF9lcnIgPSBzZWxmLl9yZWFsX2Vycg0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKHJlc3VsdC5idWZmZXIpDQoNCiAgICAgICAgcmVzdWx0LmJ1ZmZlciA9IFRydWUNCg0KICAgICAgICBzZWxmLmFzc2VydElzKHJlYWxfb3V0LCBzeXMuc3Rkb3V0KQ0KICAgICAgICBzZWxmLmFzc2VydElzKHJlYWxfZXJyLCBzeXMuc3RkZXJyKQ0KDQogICAgICAgIHJlc3VsdC5zdGFydFRlc3Qoc2VsZikNCg0KICAgICAgICBzZWxmLmFzc2VydElzTm90KHJlYWxfb3V0LCBzeXMuc3Rkb3V0KQ0KICAgICAgICBzZWxmLmFzc2VydElzTm90KHJlYWxfZXJyLCBzeXMuc3RkZXJyKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc3lzLnN0ZG91dCwgaW8uU3RyaW5nSU8pDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShzeXMuc3RkZXJyLCBpby5TdHJpbmdJTykNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdChzeXMuc3Rkb3V0LCBzeXMuc3RkZXJyKQ0KDQogICAgICAgIG91dF9zdHJlYW0gPSBzeXMuc3Rkb3V0DQogICAgICAgIGVycl9zdHJlYW0gPSBzeXMuc3RkZXJyDQoNCiAgICAgICAgcmVzdWx0Ll9vcmlnaW5hbF9zdGRvdXQgPSBpby5TdHJpbmdJTygpDQogICAgICAgIHJlc3VsdC5fb3JpZ2luYWxfc3RkZXJyID0gaW8uU3RyaW5nSU8oKQ0KDQogICAgICAgIHByaW50KCdmb28nKQ0KICAgICAgICBwcmludCgnYmFyJywgZmlsZT1zeXMuc3RkZXJyKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwob3V0X3N0cmVhbS5nZXR2YWx1ZSgpLCAnZm9vXG4nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGVycl9zdHJlYW0uZ2V0dmFsdWUoKSwgJ2JhclxuJykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5fb3JpZ2luYWxfc3Rkb3V0LmdldHZhbHVlKCksICcnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC5fb3JpZ2luYWxfc3RkZXJyLmdldHZhbHVlKCksICcnKQ0KDQogICAgICAgIHJlc3VsdC5hZGRTdWNjZXNzKHNlbGYpDQogICAgICAgIHJlc3VsdC5zdG9wVGVzdChzZWxmKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXMoc3lzLnN0ZG91dCwgcmVzdWx0Ll9vcmlnaW5hbF9zdGRvdXQpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMoc3lzLnN0ZGVyciwgcmVzdWx0Ll9vcmlnaW5hbF9zdGRlcnIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuX29yaWdpbmFsX3N0ZG91dC5nZXR2YWx1ZSgpLCAnJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuX29yaWdpbmFsX3N0ZGVyci5nZXR2YWx1ZSgpLCAnJykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG91dF9zdHJlYW0uZ2V0dmFsdWUoKSwgJycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXJyX3N0cmVhbS5nZXR2YWx1ZSgpLCAnJykNCg0KDQogICAgZGVmIGdldFN0YXJ0ZWRSZXN1bHQoc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICByZXN1bHQuYnVmZmVyID0gVHJ1ZQ0KICAgICAgICByZXN1bHQuc3RhcnRUZXN0KHNlbGYpDQogICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgIGRlZiB0ZXN0QnVmZmVyT3V0cHV0QWRkRXJyb3JPckZhaWx1cmUoc2VsZik6DQogICAgICAgIHVuaXR0ZXN0LnJlc3VsdC50cmFjZWJhY2sgPSBNb2NrVHJhY2ViYWNrDQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChyZXN0b3JlX3RyYWNlYmFjaykNCg0KICAgICAgICBmb3IgbWVzc2FnZV9hdHRyLCBhZGRfYXR0ciwgaW5jbHVkZV9lcnJvciBpbiBbDQogICAgICAgICAgICAoJ2Vycm9ycycsICdhZGRFcnJvcicsIFRydWUpLA0KICAgICAgICAgICAgKCdmYWlsdXJlcycsICdhZGRGYWlsdXJlJywgRmFsc2UpLA0KICAgICAgICAgICAgKCdlcnJvcnMnLCAnYWRkRXJyb3InLCBUcnVlKSwNCiAgICAgICAgICAgICgnZmFpbHVyZXMnLCAnYWRkRmFpbHVyZScsIEZhbHNlKQ0KICAgICAgICBdOg0KICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5nZXRTdGFydGVkUmVzdWx0KCkNCiAgICAgICAgICAgIGJ1ZmZlcmVkX291dCA9IHN5cy5zdGRvdXQNCiAgICAgICAgICAgIGJ1ZmZlcmVkX2VyciA9IHN5cy5zdGRlcnINCiAgICAgICAgICAgIHJlc3VsdC5fb3JpZ2luYWxfc3Rkb3V0ID0gaW8uU3RyaW5nSU8oKQ0KICAgICAgICAgICAgcmVzdWx0Ll9vcmlnaW5hbF9zdGRlcnIgPSBpby5TdHJpbmdJTygpDQoNCiAgICAgICAgICAgIHByaW50KCdmb28nLCBmaWxlPXN5cy5zdGRvdXQpDQogICAgICAgICAgICBpZiBpbmNsdWRlX2Vycm9yOg0KICAgICAgICAgICAgICAgIHByaW50KCdiYXInLCBmaWxlPXN5cy5zdGRlcnIpDQoNCg0KICAgICAgICAgICAgYWRkRnVuY3Rpb24gPSBnZXRhdHRyKHJlc3VsdCwgYWRkX2F0dHIpDQogICAgICAgICAgICBhZGRGdW5jdGlvbihzZWxmLCAoTm9uZSwgTm9uZSwgTm9uZSkpDQogICAgICAgICAgICByZXN1bHQuc3RvcFRlc3Qoc2VsZikNCg0KICAgICAgICAgICAgcmVzdWx0X2xpc3QgPSBnZXRhdHRyKHJlc3VsdCwgbWVzc2FnZV9hdHRyKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0X2xpc3QpLCAxKQ0KDQogICAgICAgICAgICB0ZXN0LCBtZXNzYWdlID0gcmVzdWx0X2xpc3RbMF0NCiAgICAgICAgICAgIGV4cGVjdGVkT3V0TWVzc2FnZSA9IHRleHR3cmFwLmRlZGVudCgiIiINCiAgICAgICAgICAgICAgICBTdGRvdXQ6DQogICAgICAgICAgICAgICAgZm9vDQogICAgICAgICAgICAiIiIpDQogICAgICAgICAgICBleHBlY3RlZEVyck1lc3NhZ2UgPSAnJw0KICAgICAgICAgICAgaWYgaW5jbHVkZV9lcnJvcjoNCiAgICAgICAgICAgICAgICBleHBlY3RlZEVyck1lc3NhZ2UgPSB0ZXh0d3JhcC5kZWRlbnQoIiIiDQogICAgICAgICAgICAgICAgU3RkZXJyOg0KICAgICAgICAgICAgICAgIGJhcg0KICAgICAgICAgICAgIiIiKQ0KDQogICAgICAgICAgICBleHBlY3RlZEZ1bGxNZXNzYWdlID0gJ0EgdHJhY2ViYWNrJXMlcycgJSAoZXhwZWN0ZWRPdXRNZXNzYWdlLCBleHBlY3RlZEVyck1lc3NhZ2UpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXModGVzdCwgc2VsZikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0Ll9vcmlnaW5hbF9zdGRvdXQuZ2V0dmFsdWUoKSwgZXhwZWN0ZWRPdXRNZXNzYWdlKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQuX29yaWdpbmFsX3N0ZGVyci5nZXR2YWx1ZSgpLCBleHBlY3RlZEVyck1lc3NhZ2UpDQogICAgICAgICAgICBzZWxmLmFzc2VydE11bHRpTGluZUVxdWFsKG1lc3NhZ2UsIGV4cGVjdGVkRnVsbE1lc3NhZ2UpDQoNCiAgICBkZWYgdGVzdEJ1ZmZlclNldHVwQ2xhc3Moc2VsZik6DQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICByZXN1bHQuYnVmZmVyID0gVHJ1ZQ0KDQogICAgICAgIGNsYXNzIEZvbyh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgMS8wDQogICAgICAgICAgICBkZWYgdGVzdF9mb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbRm9vKCd0ZXN0X2ZvbycpXSkNCiAgICAgICAgc3VpdGUocmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMSkNCg0KICAgIGRlZiB0ZXN0QnVmZmVyVGVhckRvd25DbGFzcyhzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHJlc3VsdC5idWZmZXIgPSBUcnVlDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICAxLzANCiAgICAgICAgICAgIGRlZiB0ZXN0X2ZvbyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfZm9vJyldKQ0KICAgICAgICBzdWl0ZShyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KDQogICAgZGVmIHRlc3RCdWZmZXJTZXRVcE1vZHVsZShzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHJlc3VsdC5idWZmZXIgPSBUcnVlDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0X2ZvbyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIGNsYXNzIE1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgMS8wDQoNCiAgICAgICAgRm9vLl9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHN5cy5tb2R1bGVzLnBvcCwgJ01vZHVsZScpDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfZm9vJyldKQ0KICAgICAgICBzdWl0ZShyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KDQogICAgZGVmIHRlc3RCdWZmZXJUZWFyRG93bk1vZHVsZShzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHJlc3VsdC5idWZmZXIgPSBUcnVlDQoNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0X2ZvbyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIGNsYXNzIE1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgMS8wDQoNCiAgICAgICAgRm9vLl9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHN5cy5tb2R1bGVzLnBvcCwgJ01vZHVsZScpDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKFtGb28oJ3Rlc3RfZm9vJyldKQ0KICAgICAgICBzdWl0ZShyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/unittest/test/test_suite.py':'aW1wb3J0IHVuaXR0ZXN0DQoNCmltcG9ydCBzeXMNCmZyb20gLnN1cHBvcnQgaW1wb3J0IExvZ2dpbmdSZXN1bHQsIFRlc3RFcXVhbGl0eQ0KDQoNCiMjIyBTdXBwb3J0IGNvZGUgZm9yIFRlc3RfVGVzdFN1aXRlDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCmNsYXNzIFRlc3Qob2JqZWN0KToNCiAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICBkZWYgdGVzdF8xKHNlbGYpOiBwYXNzDQogICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCiAgICAgICAgZGVmIHRlc3RfMyhzZWxmKTogcGFzcw0KICAgICAgICBkZWYgcnVuVGVzdChzZWxmKTogcGFzcw0KDQpkZWYgX21rX1Rlc3RTdWl0ZSgqbmFtZXMpOg0KICAgIHJldHVybiB1bml0dGVzdC5UZXN0U3VpdGUoVGVzdC5Gb28obikgZm9yIG4gaW4gbmFtZXMpDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KDQpjbGFzcyBUZXN0X1Rlc3RTdWl0ZSh1bml0dGVzdC5UZXN0Q2FzZSwgVGVzdEVxdWFsaXR5KToNCg0KICAgICMjIyBTZXQgdXAgYXR0cmlidXRlcyBuZWVkZWQgYnkgaW5oZXJpdGVkIHRlc3RzDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgIyBVc2VkIGJ5IFRlc3RFcXVhbGl0eS50ZXN0X2VxDQogICAgZXFfcGFpcnMgPSBbKHVuaXR0ZXN0LlRlc3RTdWl0ZSgpLCB1bml0dGVzdC5UZXN0U3VpdGUoKSkNCiAgICAgICAgICAgICAgICwodW5pdHRlc3QuVGVzdFN1aXRlKCksIHVuaXR0ZXN0LlRlc3RTdWl0ZShbXSkpDQogICAgICAgICAgICAgICAsKF9ta19UZXN0U3VpdGUoJ3Rlc3RfMScpLCBfbWtfVGVzdFN1aXRlKCd0ZXN0XzEnKSldDQoNCiAgICAjIFVzZWQgYnkgVGVzdEVxdWFsaXR5LnRlc3RfbmUNCiAgICBuZV9wYWlycyA9IFsodW5pdHRlc3QuVGVzdFN1aXRlKCksIF9ta19UZXN0U3VpdGUoJ3Rlc3RfMScpKQ0KICAgICAgICAgICAgICAgLCh1bml0dGVzdC5UZXN0U3VpdGUoW10pLCBfbWtfVGVzdFN1aXRlKCd0ZXN0XzEnKSkNCiAgICAgICAgICAgICAgICwoX21rX1Rlc3RTdWl0ZSgndGVzdF8xJywgJ3Rlc3RfMicpLCBfbWtfVGVzdFN1aXRlKCd0ZXN0XzEnLCAndGVzdF8zJykpDQogICAgICAgICAgICAgICAsKF9ta19UZXN0U3VpdGUoJ3Rlc3RfMScpLCBfbWtfVGVzdFN1aXRlKCd0ZXN0XzInKSldDQoNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyMjIC9TZXQgdXAgYXR0cmlidXRlcyBuZWVkZWQgYnkgaW5oZXJpdGVkIHRlc3RzDQoNCiAgICAjIyMgVGVzdHMgZm9yIFRlc3RTdWl0ZS5fX2luaXRfXw0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KICAgICMgImNsYXNzIFRlc3RTdWl0ZShbdGVzdHNdKSINCiAgICAjDQogICAgIyBUaGUgdGVzdHMgaXRlcmFibGUgc2hvdWxkIGJlIG9wdGlvbmFsDQogICAgZGVmIHRlc3RfaW5pdF9fdGVzdHNfb3B0aW9uYWwoc2VsZik6DQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLmNvdW50VGVzdENhc2VzKCksIDApDQoNCiAgICAjICJjbGFzcyBUZXN0U3VpdGUoW3Rlc3RzXSkiDQogICAgIyAuLi4NCiAgICAjICJJZiB0ZXN0cyBpcyBnaXZlbiwgaXQgbXVzdCBiZSBhbiBpdGVyYWJsZSBvZiBpbmRpdmlkdWFsIHRlc3QgY2FzZXMNCiAgICAjIG9yIG90aGVyIHRlc3Qgc3VpdGVzIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGJ1aWxkIHRoZSBzdWl0ZSBpbml0aWFsbHkiDQogICAgIw0KICAgICMgVGVzdFN1aXRlIHNob3VsZCBkZWFsIHdpdGggZW1wdHkgdGVzdHMgaXRlcmFibGVzIGJ5IGFsbG93aW5nIHRoZQ0KICAgICMgY3JlYXRpb24gb2YgYW4gZW1wdHkgc3VpdGUNCiAgICBkZWYgdGVzdF9pbml0X19lbXB0eV90ZXN0cyhzZWxmKToNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW10pDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdWl0ZS5jb3VudFRlc3RDYXNlcygpLCAwKQ0KDQogICAgIyAiY2xhc3MgVGVzdFN1aXRlKFt0ZXN0c10pIg0KICAgICMgLi4uDQogICAgIyAiSWYgdGVzdHMgaXMgZ2l2ZW4sIGl0IG11c3QgYmUgYW4gaXRlcmFibGUgb2YgaW5kaXZpZHVhbCB0ZXN0IGNhc2VzDQogICAgIyBvciBvdGhlciB0ZXN0IHN1aXRlcyB0aGF0IHdpbGwgYmUgdXNlZCB0byBidWlsZCB0aGUgc3VpdGUgaW5pdGlhbGx5Ig0KICAgICMNCiAgICAjIFRlc3RTdWl0ZSBzaG91bGQgYWxsb3cgYW55IGl0ZXJhYmxlIHRvIHByb3ZpZGUgdGVzdHMNCiAgICBkZWYgdGVzdF9pbml0X190ZXN0c19mcm9tX2FueV9pdGVyYWJsZShzZWxmKToNCiAgICAgICAgZGVmIHRlc3RzKCk6DQogICAgICAgICAgICB5aWVsZCB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgICAgIHlpZWxkIHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KDQogICAgICAgIHN1aXRlXzEgPSB1bml0dGVzdC5UZXN0U3VpdGUodGVzdHMoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdWl0ZV8xLmNvdW50VGVzdENhc2VzKCksIDIpDQoNCiAgICAgICAgc3VpdGVfMiA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShzdWl0ZV8xKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlXzIuY291bnRUZXN0Q2FzZXMoKSwgMikNCg0KICAgICAgICBzdWl0ZV8zID0gdW5pdHRlc3QuVGVzdFN1aXRlKHNldChzdWl0ZV8xKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdWl0ZV8zLmNvdW50VGVzdENhc2VzKCksIDIpDQoNCiAgICAjICJjbGFzcyBUZXN0U3VpdGUoW3Rlc3RzXSkiDQogICAgIyAuLi4NCiAgICAjICJJZiB0ZXN0cyBpcyBnaXZlbiwgaXQgbXVzdCBiZSBhbiBpdGVyYWJsZSBvZiBpbmRpdmlkdWFsIHRlc3QgY2FzZXMNCiAgICAjIG9yIG90aGVyIHRlc3Qgc3VpdGVzIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGJ1aWxkIHRoZSBzdWl0ZSBpbml0aWFsbHkiDQogICAgIw0KICAgICMgRG9lcyBUZXN0U3VpdGUoKSBhbHNvIGFsbG93IG90aGVyIFRlc3RTdWl0ZSgpIGluc3RhbmNlcyB0byBiZSBwcmVzZW50DQogICAgIyBpbiB0aGUgdGVzdHMgaXRlcmFibGU/DQogICAgZGVmIHRlc3RfaW5pdF9fVGVzdFN1aXRlX2luc3RhbmNlc19pbl90ZXN0cyhzZWxmKToNCiAgICAgICAgZGVmIHRlc3RzKCk6DQogICAgICAgICAgICBmdGMgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgICAgIHlpZWxkIHVuaXR0ZXN0LlRlc3RTdWl0ZShbZnRjXSkNCiAgICAgICAgICAgIHlpZWxkIHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKHRlc3RzKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUuY291bnRUZXN0Q2FzZXMoKSwgMikNCg0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAjIyMgL1Rlc3RzIGZvciBUZXN0U3VpdGUuX19pbml0X18NCg0KICAgICMgQ29udGFpbmVyIHR5cGVzIHNob3VsZCBzdXBwb3J0IHRoZSBpdGVyIHByb3RvY29sDQogICAgZGVmIHRlc3RfaXRlcihzZWxmKToNCiAgICAgICAgdGVzdDEgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgdGVzdDIgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKHRlc3QxLCB0ZXN0MikpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW3Rlc3QxLCB0ZXN0Ml0pDQoNCiAgICAjICJSZXR1cm4gdGhlIG51bWJlciBvZiB0ZXN0cyByZXByZXNlbnRlZCBieSB0aGUgdGhpcyB0ZXN0IG9iamVjdC4NCiAgICAjIC4uLnRoaXMgbWV0aG9kIGlzIGFsc28gaW1wbGVtZW50ZWQgYnkgdGhlIFRlc3RTdWl0ZSBjbGFzcywgd2hpY2ggY2FuDQogICAgIyByZXR1cm4gbGFyZ2VyIFtncmVhdGVyIHRoYW4gMV0gdmFsdWVzIg0KICAgICMNCiAgICAjIFByZXN1bWFibHkgYW4gZW1wdHkgVGVzdFN1aXRlIHJldHVybnMgMD8NCiAgICBkZWYgdGVzdF9jb3VudFRlc3RDYXNlc196ZXJvX3NpbXBsZShzZWxmKToNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUuY291bnRUZXN0Q2FzZXMoKSwgMCkNCg0KICAgICMgIlJldHVybiB0aGUgbnVtYmVyIG9mIHRlc3RzIHJlcHJlc2VudGVkIGJ5IHRoZSB0aGlzIHRlc3Qgb2JqZWN0Lg0KICAgICMgLi4udGhpcyBtZXRob2QgaXMgYWxzbyBpbXBsZW1lbnRlZCBieSB0aGUgVGVzdFN1aXRlIGNsYXNzLCB3aGljaCBjYW4NCiAgICAjIHJldHVybiBsYXJnZXIgW2dyZWF0ZXIgdGhhbiAxXSB2YWx1ZXMiDQogICAgIw0KICAgICMgUHJlc3VtYWJseSBhbiBlbXB0eSBUZXN0U3VpdGUgKGV2ZW4gaWYgaXQgY29udGFpbnMgb3RoZXIgZW1wdHkNCiAgICAjIFRlc3RTdWl0ZSBpbnN0YW5jZXMpIHJldHVybnMgMD8NCiAgICBkZWYgdGVzdF9jb3VudFRlc3RDYXNlc196ZXJvX25lc3RlZChzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdDEodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKFt1bml0dGVzdC5UZXN0U3VpdGUoKV0pDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdWl0ZS5jb3VudFRlc3RDYXNlcygpLCAwKQ0KDQogICAgIyAiUmV0dXJuIHRoZSBudW1iZXIgb2YgdGVzdHMgcmVwcmVzZW50ZWQgYnkgdGhlIHRoaXMgdGVzdCBvYmplY3QuDQogICAgIyAuLi50aGlzIG1ldGhvZCBpcyBhbHNvIGltcGxlbWVudGVkIGJ5IHRoZSBUZXN0U3VpdGUgY2xhc3MsIHdoaWNoIGNhbg0KICAgICMgcmV0dXJuIGxhcmdlciBbZ3JlYXRlciB0aGFuIDFdIHZhbHVlcyINCiAgICBkZWYgdGVzdF9jb3VudFRlc3RDYXNlc19zaW1wbGUoc2VsZik6DQogICAgICAgIHRlc3QxID0gdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZShsYW1iZGE6IE5vbmUpDQogICAgICAgIHRlc3QyID0gdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZShsYW1iZGE6IE5vbmUpDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCh0ZXN0MSwgdGVzdDIpKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUuY291bnRUZXN0Q2FzZXMoKSwgMikNCg0KICAgICMgIlJldHVybiB0aGUgbnVtYmVyIG9mIHRlc3RzIHJlcHJlc2VudGVkIGJ5IHRoZSB0aGlzIHRlc3Qgb2JqZWN0Lg0KICAgICMgLi4udGhpcyBtZXRob2QgaXMgYWxzbyBpbXBsZW1lbnRlZCBieSB0aGUgVGVzdFN1aXRlIGNsYXNzLCB3aGljaCBjYW4NCiAgICAjIHJldHVybiBsYXJnZXIgW2dyZWF0ZXIgdGhhbiAxXSB2YWx1ZXMiDQogICAgIw0KICAgICMgTWFrZSBzdXJlIHRoaXMgaG9sZHMgZm9yIG5lc3RlZCBUZXN0U3VpdGUgaW5zdGFuY2VzLCB0b28NCiAgICBkZWYgdGVzdF9jb3VudFRlc3RDYXNlc19uZXN0ZWQoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QxKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0MShzZWxmKTogcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3QyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgdGVzdDIgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgdGVzdDMgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCiAgICAgICAgY2hpbGQgPSB1bml0dGVzdC5UZXN0U3VpdGUoKFRlc3QxKCd0ZXN0MicpLCB0ZXN0MikpDQogICAgICAgIHBhcmVudCA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgodGVzdDMsIGNoaWxkLCBUZXN0MSgndGVzdDEnKSkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwYXJlbnQuY291bnRUZXN0Q2FzZXMoKSwgNCkNCg0KICAgICMgIlJ1biB0aGUgdGVzdHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgc3VpdGUsIGNvbGxlY3RpbmcgdGhlIHJlc3VsdCBpbnRvDQogICAgIyB0aGUgdGVzdCByZXN1bHQgb2JqZWN0IHBhc3NlZCBhcyByZXN1bHQuIg0KICAgICMNCiAgICAjIEFuZCBpZiB0aGVyZSBhcmUgbm8gdGVzdHM/IFdoYXQgdGhlbj8NCiAgICBkZWYgdGVzdF9ydW5fX2VtcHR5X3N1aXRlKHNlbGYpOg0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICByZXN1bHQgPSBMb2dnaW5nUmVzdWx0KGV2ZW50cykNCg0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQoNCiAgICAgICAgc3VpdGUucnVuKHJlc3VsdCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgW10pDQoNCiAgICAjICJOb3RlIHRoYXQgdW5saWtlIFRlc3RDYXNlLnJ1bigpLCBUZXN0U3VpdGUucnVuKCkgcmVxdWlyZXMgdGhlDQogICAgIyAicmVzdWx0IG9iamVjdCB0byBiZSBwYXNzZWQgaW4uIg0KICAgIGRlZiB0ZXN0X3J1bl9fcmVxdWlyZXNfcmVzdWx0KHNlbGYpOg0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc3VpdGUucnVuKCkNCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjoNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYuZmFpbCgiRmFpbGVkIHRvIHJhaXNlIFR5cGVFcnJvciIpDQoNCiAgICAjICJSdW4gdGhlIHRlc3RzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHN1aXRlLCBjb2xsZWN0aW5nIHRoZSByZXN1bHQgaW50bw0KICAgICMgdGhlIHRlc3QgcmVzdWx0IG9iamVjdCBwYXNzZWQgYXMgcmVzdWx0LiINCiAgICBkZWYgdGVzdF9ydW4oc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGNsYXNzIExvZ2dpbmdDYXNlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBydW4oc2VsZiwgcmVzdWx0KToNCiAgICAgICAgICAgICAgICBldmVudHMuYXBwZW5kKCdydW4gJXMnICUgc2VsZi5fdGVzdE1ldGhvZE5hbWUpDQoNCiAgICAgICAgICAgIGRlZiB0ZXN0MShzZWxmKTogcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3QyKHNlbGYpOiBwYXNzDQoNCiAgICAgICAgdGVzdHMgPSBbTG9nZ2luZ0Nhc2UoJ3Rlc3QxJyksIExvZ2dpbmdDYXNlKCd0ZXN0MicpXQ0KDQogICAgICAgIHVuaXR0ZXN0LlRlc3RTdWl0ZSh0ZXN0cykucnVuKHJlc3VsdCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV2ZW50cywgWydydW4gdGVzdDEnLCAncnVuIHRlc3QyJ10pDQoNCiAgICAjICJBZGQgYSBUZXN0Q2FzZSAuLi4gdG8gdGhlIHN1aXRlIg0KICAgIGRlZiB0ZXN0X2FkZFRlc3RfX1Rlc3RDYXNlKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28odW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Qoc2VsZik6IHBhc3MNCg0KICAgICAgICB0ZXN0ID0gRm9vKCd0ZXN0JykNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KDQogICAgICAgIHN1aXRlLmFkZFRlc3QodGVzdCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLmNvdW50VGVzdENhc2VzKCksIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChzdWl0ZSksIFt0ZXN0XSkNCg0KICAgICMgIkFkZCBhIC4uLiBUZXN0U3VpdGUgdG8gdGhlIHN1aXRlIg0KICAgIGRlZiB0ZXN0X2FkZFRlc3RfX1Rlc3RTdWl0ZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0KHNlbGYpOiBwYXNzDQoNCiAgICAgICAgc3VpdGVfMiA9IHVuaXR0ZXN0LlRlc3RTdWl0ZShbRm9vKCd0ZXN0JyldKQ0KDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkNCiAgICAgICAgc3VpdGUuYWRkVGVzdChzdWl0ZV8yKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3VpdGUuY291bnRUZXN0Q2FzZXMoKSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlKSwgW3N1aXRlXzJdKQ0KDQogICAgIyAiQWRkIGFsbCB0aGUgdGVzdHMgZnJvbSBhbiBpdGVyYWJsZSBvZiBUZXN0Q2FzZSBhbmQgVGVzdFN1aXRlDQogICAgIyBpbnN0YW5jZXMgdG8gdGhpcyB0ZXN0IHN1aXRlLiINCiAgICAjDQogICAgIyAiVGhpcyBpcyBlcXVpdmFsZW50IHRvIGl0ZXJhdGluZyBvdmVyIHRlc3RzLCBjYWxsaW5nIGFkZFRlc3QoKSBmb3INCiAgICAjIGVhY2ggZWxlbWVudCINCiAgICBkZWYgdGVzdF9hZGRUZXN0cyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0XzEoc2VsZik6IHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0XzIoc2VsZik6IHBhc3MNCg0KICAgICAgICB0ZXN0XzEgPSBGb28oJ3Rlc3RfMScpDQogICAgICAgIHRlc3RfMiA9IEZvbygndGVzdF8yJykNCiAgICAgICAgaW5uZXJfc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoW3Rlc3RfMl0pDQoNCiAgICAgICAgZGVmIGdlbigpOg0KICAgICAgICAgICAgeWllbGQgdGVzdF8xDQogICAgICAgICAgICB5aWVsZCB0ZXN0XzINCiAgICAgICAgICAgIHlpZWxkIGlubmVyX3N1aXRlDQoNCiAgICAgICAgc3VpdGVfMSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQogICAgICAgIHN1aXRlXzEuYWRkVGVzdHMoZ2VuKCkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KHN1aXRlXzEpLCBsaXN0KGdlbigpKSkNCg0KICAgICAgICAjICJUaGlzIGlzIGVxdWl2YWxlbnQgdG8gaXRlcmF0aW5nIG92ZXIgdGVzdHMsIGNhbGxpbmcgYWRkVGVzdCgpIGZvcg0KICAgICAgICAjIGVhY2ggZWxlbWVudCINCiAgICAgICAgc3VpdGVfMiA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQogICAgICAgIGZvciB0IGluIGdlbigpOg0KICAgICAgICAgICAgc3VpdGVfMi5hZGRUZXN0KHQpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdWl0ZV8xLCBzdWl0ZV8yKQ0KDQogICAgIyAiQWRkIGFsbCB0aGUgdGVzdHMgZnJvbSBhbiBpdGVyYWJsZSBvZiBUZXN0Q2FzZSBhbmQgVGVzdFN1aXRlDQogICAgIyBpbnN0YW5jZXMgdG8gdGhpcyB0ZXN0IHN1aXRlLiINCiAgICAjDQogICAgIyBXaGF0IGhhcHBlbnMgaWYgaXQgZG9lc24ndCBnZXQgYW4gaXRlcmFibGU/DQogICAgZGVmIHRlc3RfYWRkVGVzdF9fbm9uaXRlcmFibGUoc2VsZik6DQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzdWl0ZS5hZGRUZXN0cyg1KQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJGYWlsZWQgdG8gcmFpc2UgVHlwZUVycm9yIikNCg0KICAgIGRlZiB0ZXN0X2FkZFRlc3RfX25vbmNhbGxhYmxlKHNlbGYpOg0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgc3VpdGUuYWRkVGVzdCwgNSkNCg0KICAgIGRlZiB0ZXN0X2FkZFRlc3RfX2Nhc2VzdWl0ZWNsYXNzKHNlbGYpOg0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgc3VpdGUuYWRkVGVzdCwgVGVzdF9UZXN0U3VpdGUpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgc3VpdGUuYWRkVGVzdCwgdW5pdHRlc3QuVGVzdFN1aXRlKQ0KDQogICAgZGVmIHRlc3RfYWRkVGVzdHNfX3N0cmluZyhzZWxmKToNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIHN1aXRlLmFkZFRlc3RzLCAiZm9vIikNCg0KICAgIGRlZiB0ZXN0X2Z1bmN0aW9uX2luX3N1aXRlKHNlbGYpOg0KICAgICAgICBkZWYgZihfKToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgICAgICBzdWl0ZS5hZGRUZXN0KGYpDQoNCiAgICAgICAgIyB3aGVuIHRoZSBidWcgaXMgZml4ZWQgdGhpcyBsaW5lIHdpbGwgbm90IGNyYXNoDQogICAgICAgIHN1aXRlLnJ1bih1bml0dGVzdC5UZXN0UmVzdWx0KCkpDQoNCg0KDQogICAgZGVmIHRlc3RfYmFzZXRlc3RzdWl0ZShzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICB3YXNTZXRVcCA9IEZhbHNlDQogICAgICAgICAgICB3YXNUb3JuRG93biA9IEZhbHNlDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgY2xzLndhc1NldFVwID0gVHJ1ZQ0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25DbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIGNscy53YXNUb3JuRG93biA9IFRydWUNCiAgICAgICAgICAgIGRlZiB0ZXN0UGFzcyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdEZhaWwoc2VsZik6DQogICAgICAgICAgICAgICAgZmFpbA0KICAgICAgICBjbGFzcyBNb2R1bGUob2JqZWN0KToNCiAgICAgICAgICAgIHdhc1NldFVwID0gRmFsc2UNCiAgICAgICAgICAgIHdhc1Rvcm5Eb3duID0gRmFsc2UNCiAgICAgICAgICAgIEBzdGF0aWNtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcE1vZHVsZSgpOg0KICAgICAgICAgICAgICAgIE1vZHVsZS53YXNTZXRVcCA9IFRydWUNCiAgICAgICAgICAgIEBzdGF0aWNtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bk1vZHVsZSgpOg0KICAgICAgICAgICAgICAgIE1vZHVsZS53YXNUb3JuRG93biA9IFRydWUNCg0KICAgICAgICBUZXN0Ll9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHN5cy5tb2R1bGVzLnBvcCwgJ01vZHVsZScpDQoNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5CYXNlVGVzdFN1aXRlKCkNCiAgICAgICAgc3VpdGUuYWRkVGVzdHMoW1Rlc3QoJ3Rlc3RQYXNzJyksIFRlc3QoJ3Rlc3RGYWlsJyldKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN1aXRlLmNvdW50VGVzdENhc2VzKCksIDIpDQoNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHN1aXRlLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoTW9kdWxlLndhc1NldFVwKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKE1vZHVsZS53YXNUb3JuRG93bikNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShUZXN0Lndhc1NldFVwKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKFRlc3Qud2FzVG9ybkRvd24pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZmFpbHVyZXMpLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMikNCg0KDQogICAgZGVmIHRlc3Rfb3ZlcnJpZGluZ19jYWxsKHNlbGYpOg0KICAgICAgICBjbGFzcyBNeVN1aXRlKHVuaXR0ZXN0LlRlc3RTdWl0ZSk6DQogICAgICAgICAgICBjYWxsZWQgPSBGYWxzZQ0KICAgICAgICAgICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3KToNCiAgICAgICAgICAgICAgICBzZWxmLmNhbGxlZCA9IFRydWUNCiAgICAgICAgICAgICAgICB1bml0dGVzdC5UZXN0U3VpdGUuX19jYWxsX18oc2VsZiwgKmFyZ3MsICoqa3cpDQoNCiAgICAgICAgc3VpdGUgPSBNeVN1aXRlKCkNCiAgICAgICAgcmVzdWx0ID0gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQogICAgICAgIHdyYXBwZXIgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgICAgICB3cmFwcGVyLmFkZFRlc3Qoc3VpdGUpDQogICAgICAgIHdyYXBwZXIocmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoc3VpdGUuY2FsbGVkKQ0KDQogICAgICAgICMgcmV1c2luZyByZXN1bHRzIHNob3VsZCBiZSBwZXJtaXR0ZWQgZXZlbiBpZiBhYm9taW5hYmxlDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocmVzdWx0Ll90ZXN0UnVuRW50ZXJlZCkNCg0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/unittest/test/dummy.py':'IyBFbXB0eSBtb2R1bGUgZm9yIHRlc3RpbmcgdGhlIGxvYWRpbmcgb2YgbW9kdWxlcw0K',
'/Lib/unittest/test/test_setups.py':'aW1wb3J0IGlvDQppbXBvcnQgc3lzDQoNCmltcG9ydCB1bml0dGVzdA0KDQoNCmRlZiByZXN1bHRGYWN0b3J5KCpfKToNCiAgICByZXR1cm4gdW5pdHRlc3QuVGVzdFJlc3VsdCgpDQoNCg0KY2xhc3MgVGVzdFNldHVwcyh1bml0dGVzdC5UZXN0Q2FzZSk6DQoNCiAgICBkZWYgZ2V0UnVubmVyKHNlbGYpOg0KICAgICAgICByZXR1cm4gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIocmVzdWx0Y2xhc3M9cmVzdWx0RmFjdG9yeSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbT1pby5TdHJpbmdJTygpKQ0KICAgIGRlZiBydW5UZXN0cyhzZWxmLCAqY2FzZXMpOg0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgpDQogICAgICAgIGZvciBjYXNlIGluIGNhc2VzOg0KICAgICAgICAgICAgdGVzdHMgPSB1bml0dGVzdC5kZWZhdWx0VGVzdExvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoY2FzZSkNCiAgICAgICAgICAgIHN1aXRlLmFkZFRlc3RzKHRlc3RzKQ0KDQogICAgICAgIHJ1bm5lciA9IHNlbGYuZ2V0UnVubmVyKCkNCg0KICAgICAgICAjIGNyZWF0aW5nIGEgbmVzdGVkIHN1aXRlIGV4cG9zZXMgc29tZSBwb3RlbnRpYWwgYnVncw0KICAgICAgICByZWFsU3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgICAgICByZWFsU3VpdGUuYWRkVGVzdChzdWl0ZSkNCiAgICAgICAgIyBhZGRpbmcgZW1wdHkgc3VpdGVzIHRvIHRoZSBlbmQgZXhwb3NlcyBwb3RlbnRpYWwgYnVncw0KICAgICAgICBzdWl0ZS5hZGRUZXN0KHVuaXR0ZXN0LlRlc3RTdWl0ZSgpKQ0KICAgICAgICByZWFsU3VpdGUuYWRkVGVzdCh1bml0dGVzdC5UZXN0U3VpdGUoKSkNCiAgICAgICAgcmV0dXJuIHJ1bm5lci5ydW4ocmVhbFN1aXRlKQ0KDQogICAgZGVmIHRlc3Rfc2V0dXBfY2xhc3Moc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgc2V0VXBDYWxsZWQgPSAwDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdC5zZXRVcENhbGxlZCArPSAxDQogICAgICAgICAgICAgICAgdW5pdHRlc3QuVGVzdENhc2Uuc2V0VXBDbGFzcygpDQogICAgICAgICAgICBkZWYgdGVzdF9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3RfdHdvKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLnJ1blRlc3RzKFRlc3QpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChUZXN0LnNldFVwQ2FsbGVkLCAxKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDApDQoNCiAgICBkZWYgdGVzdF90ZWFyZG93bl9jbGFzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICB0ZWFyRG93bkNhbGxlZCA9IDANCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICBUZXN0LnRlYXJEb3duQ2FsbGVkICs9IDENCiAgICAgICAgICAgICAgICB1bml0dGVzdC5UZXN0Q2FzZS50ZWFyRG93bkNsYXNzKCkNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHJlc3VsdCA9IHNlbGYucnVuVGVzdHMoVGVzdCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFRlc3QudGVhckRvd25DYWxsZWQsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCg0KICAgIGRlZiB0ZXN0X3RlYXJkb3duX2NsYXNzX3R3b19jbGFzc2VzKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRlYXJEb3duQ2FsbGVkID0gMA0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25DbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIFRlc3QudGVhckRvd25DYWxsZWQgKz0gMQ0KICAgICAgICAgICAgICAgIHVuaXR0ZXN0LlRlc3RDYXNlLnRlYXJEb3duQ2xhc3MoKQ0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgdGVhckRvd25DYWxsZWQgPSAwDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdDIudGVhckRvd25DYWxsZWQgKz0gMQ0KICAgICAgICAgICAgICAgIHVuaXR0ZXN0LlRlc3RDYXNlLnRlYXJEb3duQ2xhc3MoKQ0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgcmVzdWx0ID0gc2VsZi5ydW5UZXN0cyhUZXN0LCBUZXN0MikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFRlc3QudGVhckRvd25DYWxsZWQsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoVGVzdDIudGVhckRvd25DYWxsZWQsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCA0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCg0KICAgIGRlZiB0ZXN0X2Vycm9yX2luX3NldHVwY2xhc3Moc2VsZik6DQogICAgICAgIGNsYXNzIEJyb2tlblRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgc2V0VXBDbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignZm9vJykNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHJlc3VsdCA9IHNlbGYucnVuVGVzdHMoQnJva2VuVGVzdCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDEpDQogICAgICAgIGVycm9yLCBfID0gcmVzdWx0LmVycm9yc1swXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihlcnJvciksDQogICAgICAgICAgICAgICAgICAgICdzZXRVcENsYXNzICglcy5Ccm9rZW5UZXN0KScgJSBfX25hbWVfXykNCg0KICAgIGRlZiB0ZXN0X2Vycm9yX2luX3RlYXJkb3duX2NsYXNzKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRvcm5Eb3duID0gMA0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25DbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIFRlc3QudG9ybkRvd24gKz0gMQ0KICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignZm9vJykNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIFRlc3QyKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIHRvcm5Eb3duID0gMA0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25DbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIFRlc3QyLnRvcm5Eb3duICs9IDENCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ZvbycpDQogICAgICAgICAgICBkZWYgdGVzdF9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3RfdHdvKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLnJ1blRlc3RzKFRlc3QsIFRlc3QyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgNCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoVGVzdC50b3JuRG93biwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChUZXN0Mi50b3JuRG93biwgMSkNCg0KICAgICAgICBlcnJvciwgXyA9IHJlc3VsdC5lcnJvcnNbMF0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZXJyb3IpLA0KICAgICAgICAgICAgICAgICAgICAndGVhckRvd25DbGFzcyAoJXMuVGVzdCknICUgX19uYW1lX18pDQoNCiAgICBkZWYgdGVzdF9jbGFzc19ub3RfdG9ybmRvd25fd2hlbl9zZXR1cF9mYWlscyhzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICB0b3JuRG93biA9IEZhbHNlDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdC50b3JuRG93biA9IFRydWUNCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ZvbycpDQogICAgICAgICAgICBkZWYgdGVzdF9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHNlbGYucnVuVGVzdHMoVGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShUZXN0LnRvcm5Eb3duKQ0KDQogICAgZGVmIHRlc3RfY2xhc3Nfbm90X3NldHVwX29yX3Rvcm5kb3duX3doZW5fc2tpcHBlZChzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBjbGFzc1NldFVwID0gRmFsc2UNCiAgICAgICAgICAgIHRvcm5Eb3duID0gRmFsc2UNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICBUZXN0LmNsYXNzU2V0VXAgPSBUcnVlDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdC50b3JuRG93biA9IFRydWUNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgVGVzdCA9IHVuaXR0ZXN0LnNraXAoImhvcCIpKFRlc3QpDQogICAgICAgIHNlbGYucnVuVGVzdHMoVGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShUZXN0LmNsYXNzU2V0VXApDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoVGVzdC50b3JuRG93bikNCg0KICAgIGRlZiB0ZXN0X3NldHVwX3RlYXJkb3duX29yZGVyX3dpdGhfcGF0aG9sb2dpY2FsX3N1aXRlKHNlbGYpOg0KICAgICAgICByZXN1bHRzID0gW10NCg0KICAgICAgICBjbGFzcyBNb2R1bGUxKG9iamVjdCk6DQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgc2V0VXBNb2R1bGUoKToNCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnTW9kdWxlMS5zZXRVcE1vZHVsZScpDQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25Nb2R1bGUoKToNCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnTW9kdWxlMS50ZWFyRG93bk1vZHVsZScpDQoNCiAgICAgICAgY2xhc3MgTW9kdWxlMihvYmplY3QpOg0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ01vZHVsZTIuc2V0VXBNb2R1bGUnKQ0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ01vZHVsZTIudGVhckRvd25Nb2R1bGUnKQ0KDQogICAgICAgIGNsYXNzIFRlc3QxKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnc2V0dXAgMScpDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ3RlYXJkb3duIDEnKQ0KICAgICAgICAgICAgZGVmIHRlc3RPbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QxLnRlc3RPbmUnKQ0KICAgICAgICAgICAgZGVmIHRlc3RUd28oc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QxLnRlc3RUd28nKQ0KDQogICAgICAgIGNsYXNzIFRlc3QyKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnc2V0dXAgMicpDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ3RlYXJkb3duIDInKQ0KICAgICAgICAgICAgZGVmIHRlc3RPbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QyLnRlc3RPbmUnKQ0KICAgICAgICAgICAgZGVmIHRlc3RUd28oc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QyLnRlc3RUd28nKQ0KDQogICAgICAgIGNsYXNzIFRlc3QzKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnc2V0dXAgMycpDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ3RlYXJkb3duIDMnKQ0KICAgICAgICAgICAgZGVmIHRlc3RPbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QzLnRlc3RPbmUnKQ0KICAgICAgICAgICAgZGVmIHRlc3RUd28oc2VsZik6DQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJ1Rlc3QzLnRlc3RUd28nKQ0KDQogICAgICAgIFRlc3QxLl9fbW9kdWxlX18gPSBUZXN0Mi5fX21vZHVsZV9fID0gJ01vZHVsZScNCiAgICAgICAgVGVzdDMuX19tb2R1bGVfXyA9ICdNb2R1bGUyJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUxDQogICAgICAgIHN5cy5tb2R1bGVzWydNb2R1bGUyJ10gPSBNb2R1bGUyDQoNCiAgICAgICAgZmlyc3QgPSB1bml0dGVzdC5UZXN0U3VpdGUoKFRlc3QxKCd0ZXN0T25lJyksKSkNCiAgICAgICAgc2Vjb25kID0gdW5pdHRlc3QuVGVzdFN1aXRlKChUZXN0MSgndGVzdFR3bycpLCkpDQogICAgICAgIHRoaXJkID0gdW5pdHRlc3QuVGVzdFN1aXRlKChUZXN0MigndGVzdE9uZScpLCkpDQogICAgICAgIGZvdXJ0aCA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgoVGVzdDIoJ3Rlc3RUd28nKSwpKQ0KICAgICAgICBmaWZ0aCA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgoVGVzdDMoJ3Rlc3RPbmUnKSwpKQ0KICAgICAgICBzaXh0aCA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgoVGVzdDMoJ3Rlc3RUd28nKSwpKQ0KICAgICAgICBzdWl0ZSA9IHVuaXR0ZXN0LlRlc3RTdWl0ZSgoZmlyc3QsIHNlY29uZCwgdGhpcmQsIGZvdXJ0aCwgZmlmdGgsIHNpeHRoKSkNCg0KICAgICAgICBydW5uZXIgPSBzZWxmLmdldFJ1bm5lcigpDQogICAgICAgIHJlc3VsdCA9IHJ1bm5lci5ydW4oc3VpdGUpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCA2KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgWydNb2R1bGUxLnNldFVwTW9kdWxlJywgJ3NldHVwIDEnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAnVGVzdDEudGVzdE9uZScsICdUZXN0MS50ZXN0VHdvJywgJ3RlYXJkb3duIDEnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAnc2V0dXAgMicsICdUZXN0Mi50ZXN0T25lJywgJ1Rlc3QyLnRlc3RUd28nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAndGVhcmRvd24gMicsICdNb2R1bGUxLnRlYXJEb3duTW9kdWxlJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ01vZHVsZTIuc2V0VXBNb2R1bGUnLCAnc2V0dXAgMycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICdUZXN0My50ZXN0T25lJywgJ1Rlc3QzLnRlc3RUd28nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAndGVhcmRvd24gMycsICdNb2R1bGUyLnRlYXJEb3duTW9kdWxlJ10pDQoNCiAgICBkZWYgdGVzdF9zZXR1cF9tb2R1bGUoc2VsZik6DQogICAgICAgIGNsYXNzIE1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgbW9kdWxlU2V0dXAgPSAwDQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgc2V0VXBNb2R1bGUoKToNCiAgICAgICAgICAgICAgICBNb2R1bGUubW9kdWxlU2V0dXAgKz0gMQ0KDQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIFRlc3QuX19tb2R1bGVfXyA9ICdNb2R1bGUnDQogICAgICAgIHN5cy5tb2R1bGVzWydNb2R1bGUnXSA9IE1vZHVsZQ0KDQogICAgICAgIHJlc3VsdCA9IHNlbGYucnVuVGVzdHMoVGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChNb2R1bGUubW9kdWxlU2V0dXAsIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCg0KICAgIGRlZiB0ZXN0X2Vycm9yX2luX3NldHVwX21vZHVsZShzZWxmKToNCiAgICAgICAgY2xhc3MgTW9kdWxlKG9iamVjdCk6DQogICAgICAgICAgICBtb2R1bGVTZXR1cCA9IDANCiAgICAgICAgICAgIG1vZHVsZVRvcm5Eb3duID0gMA0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgTW9kdWxlLm1vZHVsZVNldHVwICs9IDENCiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ZvbycpDQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25Nb2R1bGUoKToNCiAgICAgICAgICAgICAgICBNb2R1bGUubW9kdWxlVG9ybkRvd24gKz0gMQ0KDQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgY2xhc3NTZXRVcCA9IEZhbHNlDQogICAgICAgICAgICBjbGFzc1Rvcm5Eb3duID0gRmFsc2UNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICBUZXN0LmNsYXNzU2V0VXAgPSBUcnVlDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdC5jbGFzc1Rvcm5Eb3duID0gVHJ1ZQ0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIFRlc3QuX19tb2R1bGVfXyA9ICdNb2R1bGUnDQogICAgICAgIFRlc3QyLl9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLnJ1blRlc3RzKFRlc3QsIFRlc3QyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKE1vZHVsZS5tb2R1bGVTZXR1cCwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChNb2R1bGUubW9kdWxlVG9ybkRvd24sIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKFRlc3QuY2xhc3NTZXRVcCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShUZXN0LmNsYXNzVG9ybkRvd24pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KICAgICAgICBlcnJvciwgXyA9IHJlc3VsdC5lcnJvcnNbMF0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZXJyb3IpLCAnc2V0VXBNb2R1bGUgKE1vZHVsZSknKQ0KDQogICAgZGVmIHRlc3RfdGVzdGNhc2Vfd2l0aF9taXNzaW5nX21vZHVsZShzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgdGVzdF9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3RfdHdvKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgVGVzdC5fX21vZHVsZV9fID0gJ01vZHVsZScNCiAgICAgICAgc3lzLm1vZHVsZXMucG9wKCdNb2R1bGUnLCBOb25lKQ0KDQogICAgICAgIHJlc3VsdCA9IHNlbGYucnVuVGVzdHMoVGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDIpDQoNCiAgICBkZWYgdGVzdF90ZWFyZG93bl9tb2R1bGUoc2VsZik6DQogICAgICAgIGNsYXNzIE1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgbW9kdWxlVG9ybkRvd24gPSAwDQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgdGVhckRvd25Nb2R1bGUoKToNCiAgICAgICAgICAgICAgICBNb2R1bGUubW9kdWxlVG9ybkRvd24gKz0gMQ0KDQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIFRlc3QuX19tb2R1bGVfXyA9ICdNb2R1bGUnDQogICAgICAgIHN5cy5tb2R1bGVzWydNb2R1bGUnXSA9IE1vZHVsZQ0KDQogICAgICAgIHJlc3VsdCA9IHNlbGYucnVuVGVzdHMoVGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChNb2R1bGUubW9kdWxlVG9ybkRvd24sIDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCg0KICAgIGRlZiB0ZXN0X2Vycm9yX2luX3RlYXJkb3duX21vZHVsZShzZWxmKToNCiAgICAgICAgY2xhc3MgTW9kdWxlKG9iamVjdCk6DQogICAgICAgICAgICBtb2R1bGVUb3JuRG93biA9IDANCiAgICAgICAgICAgIEBzdGF0aWNtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bk1vZHVsZSgpOg0KICAgICAgICAgICAgICAgIE1vZHVsZS5tb2R1bGVUb3JuRG93biArPSAxDQogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdmb28nKQ0KDQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgY2xhc3NTZXRVcCA9IEZhbHNlDQogICAgICAgICAgICBjbGFzc1Rvcm5Eb3duID0gRmFsc2UNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICBUZXN0LmNsYXNzU2V0VXAgPSBUcnVlDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgVGVzdC5jbGFzc1Rvcm5Eb3duID0gVHJ1ZQ0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgY2xhc3MgVGVzdDIodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIFRlc3QuX19tb2R1bGVfXyA9ICdNb2R1bGUnDQogICAgICAgIFRlc3QyLl9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLnJ1blRlc3RzKFRlc3QsIFRlc3QyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKE1vZHVsZS5tb2R1bGVUb3JuRG93biwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQudGVzdHNSdW4sIDQpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShUZXN0LmNsYXNzU2V0VXApDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShUZXN0LmNsYXNzVG9ybkRvd24pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5lcnJvcnMpLCAxKQ0KICAgICAgICBlcnJvciwgXyA9IHJlc3VsdC5lcnJvcnNbMF0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZXJyb3IpLCAndGVhckRvd25Nb2R1bGUgKE1vZHVsZSknKQ0KDQogICAgZGVmIHRlc3Rfc2tpcHRlc3RfaW5fc2V0dXBjbGFzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgcmFpc2UgdW5pdHRlc3QuU2tpcFRlc3QoJ2ZvbycpDQogICAgICAgICAgICBkZWYgdGVzdF9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZGVmIHRlc3RfdHdvKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICByZXN1bHQgPSBzZWxmLnJ1blRlc3RzKFRlc3QpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LnRlc3RzUnVuLCAwKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihyZXN1bHQuZXJyb3JzKSwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LnNraXBwZWQpLCAxKQ0KICAgICAgICBza2lwcGVkID0gcmVzdWx0LnNraXBwZWRbMF1bMF0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoc2tpcHBlZCksICdzZXRVcENsYXNzICglcy5UZXN0KScgJSBfX25hbWVfXykNCg0KICAgIGRlZiB0ZXN0X3NraXB0ZXN0X2luX3NldHVwbW9kdWxlKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIE1vZHVsZShvYmplY3QpOg0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHNldFVwTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgcmFpc2UgdW5pdHRlc3QuU2tpcFRlc3QoJ2ZvbycpDQoNCiAgICAgICAgVGVzdC5fX21vZHVsZV9fID0gJ01vZHVsZScNCiAgICAgICAgc3lzLm1vZHVsZXNbJ01vZHVsZSddID0gTW9kdWxlDQoNCiAgICAgICAgcmVzdWx0ID0gc2VsZi5ydW5UZXN0cyhUZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC50ZXN0c1J1biwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4ocmVzdWx0LmVycm9ycyksIDApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKHJlc3VsdC5za2lwcGVkKSwgMSkNCiAgICAgICAgc2tpcHBlZCA9IHJlc3VsdC5za2lwcGVkWzBdWzBdDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKHNraXBwZWQpLCAnc2V0VXBNb2R1bGUgKE1vZHVsZSknKQ0KDQogICAgZGVmIHRlc3Rfc3VpdGVfZGVidWdfZXhlY3V0ZXNfc2V0dXBzX2FuZF90ZWFyZG93bnMoc2VsZik6DQogICAgICAgIG9yZGVyaW5nID0gW10NCg0KICAgICAgICBjbGFzcyBNb2R1bGUob2JqZWN0KToNCiAgICAgICAgICAgIEBzdGF0aWNtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcE1vZHVsZSgpOg0KICAgICAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgnc2V0VXBNb2R1bGUnKQ0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duTW9kdWxlKCk6DQogICAgICAgICAgICAgICAgb3JkZXJpbmcuYXBwZW5kKCd0ZWFyRG93bk1vZHVsZScpDQoNCiAgICAgICAgY2xhc3MgVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBzZXRVcENsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgb3JkZXJpbmcuYXBwZW5kKCdzZXRVcENsYXNzJykNCiAgICAgICAgICAgIEBjbGFzc21ldGhvZA0KICAgICAgICAgICAgZGVmIHRlYXJEb3duQ2xhc3MoY2xzKToNCiAgICAgICAgICAgICAgICBvcmRlcmluZy5hcHBlbmQoJ3RlYXJEb3duQ2xhc3MnKQ0KICAgICAgICAgICAgZGVmIHRlc3Rfc29tZXRoaW5nKHNlbGYpOg0KICAgICAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgndGVzdF9zb21ldGhpbmcnKQ0KDQogICAgICAgIFRlc3QuX19tb2R1bGVfXyA9ICdNb2R1bGUnDQogICAgICAgIHN5cy5tb2R1bGVzWydNb2R1bGUnXSA9IE1vZHVsZQ0KDQogICAgICAgIHN1aXRlID0gdW5pdHRlc3QuZGVmYXVsdFRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbVRlc3RDYXNlKFRlc3QpDQogICAgICAgIHN1aXRlLmRlYnVnKCkNCiAgICAgICAgZXhwZWN0ZWRPcmRlciA9IFsnc2V0VXBNb2R1bGUnLCAnc2V0VXBDbGFzcycsICd0ZXN0X3NvbWV0aGluZycsICd0ZWFyRG93bkNsYXNzJywgJ3RlYXJEb3duTW9kdWxlJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvcmRlcmluZywgZXhwZWN0ZWRPcmRlcikNCg0KICAgIGRlZiB0ZXN0X3N1aXRlX2RlYnVnX3Byb3BhZ2F0ZXNfZXhjZXB0aW9ucyhzZWxmKToNCiAgICAgICAgY2xhc3MgTW9kdWxlKG9iamVjdCk6DQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgc2V0VXBNb2R1bGUoKToNCiAgICAgICAgICAgICAgICBpZiBwaGFzZSA9PSAwOg0KICAgICAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3NldFVwTW9kdWxlJykNCiAgICAgICAgICAgIEBzdGF0aWNtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bk1vZHVsZSgpOg0KICAgICAgICAgICAgICAgIGlmIHBoYXNlID09IDE6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigndGVhckRvd25Nb2R1bGUnKQ0KDQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgQGNsYXNzbWV0aG9kDQogICAgICAgICAgICBkZWYgc2V0VXBDbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIGlmIHBoYXNlID09IDI6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbignc2V0VXBDbGFzcycpDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6DQogICAgICAgICAgICAgICAgaWYgcGhhc2UgPT0gMzoNCiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd0ZWFyRG93bkNsYXNzJykNCiAgICAgICAgICAgIGRlZiB0ZXN0X3NvbWV0aGluZyhzZWxmKToNCiAgICAgICAgICAgICAgICBpZiBwaGFzZSA9PSA0Og0KICAgICAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3Rlc3Rfc29tZXRoaW5nJykNCg0KICAgICAgICBUZXN0Ll9fbW9kdWxlX18gPSAnTW9kdWxlJw0KICAgICAgICBzeXMubW9kdWxlc1snTW9kdWxlJ10gPSBNb2R1bGUNCg0KICAgICAgICBfc3VpdGUgPSB1bml0dGVzdC5kZWZhdWx0VGVzdExvYWRlci5sb2FkVGVzdHNGcm9tVGVzdENhc2UoVGVzdCkNCiAgICAgICAgc3VpdGUgPSB1bml0dGVzdC5UZXN0U3VpdGUoKQ0KICAgICAgICBzdWl0ZS5hZGRUZXN0KF9zdWl0ZSkNCg0KICAgICAgICBtZXNzYWdlcyA9ICgnc2V0VXBNb2R1bGUnLCAndGVhckRvd25Nb2R1bGUnLCAnc2V0VXBDbGFzcycsICd0ZWFyRG93bkNsYXNzJywgJ3Rlc3Rfc29tZXRoaW5nJykNCiAgICAgICAgZm9yIHBoYXNlLCBtc2cgaW4gZW51bWVyYXRlKG1lc3NhZ2VzKToNCiAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXNSZWdleChFeGNlcHRpb24sIG1zZyk6DQogICAgICAgICAgICAgICAgc3VpdGUuZGVidWcoKQ0KDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgIHVuaXR0ZXN0Lm1haW4oKQ0K',
'/Lib/unittest/test/test_runner.py':'aW1wb3J0IGlvDQppbXBvcnQgb3MNCmltcG9ydCBzeXMNCmltcG9ydCBwaWNrbGUNCmltcG9ydCBzdWJwcm9jZXNzDQoNCmltcG9ydCB1bml0dGVzdA0KDQpmcm9tIC5zdXBwb3J0IGltcG9ydCBMb2dnaW5nUmVzdWx0LCBSZXN1bHRXaXRoTm9TdGFydFRlc3RSdW5TdG9wVGVzdFJ1bg0KDQoNCmNsYXNzIFRlc3RDbGVhblVwKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiB0ZXN0Q2xlYW5VcChzZWxmKToNCiAgICAgICAgY2xhc3MgVGVzdGFibGVUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiB0ZXN0Tm90aGluZyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgdGVzdCA9IFRlc3RhYmxlVGVzdCgndGVzdE5vdGhpbmcnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRlc3QuX2NsZWFudXBzLCBbXSkNCg0KICAgICAgICBjbGVhbnVwcyA9IFtdDQoNCiAgICAgICAgZGVmIGNsZWFudXAxKCphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICAgICBjbGVhbnVwcy5hcHBlbmQoKDEsIGFyZ3MsIGt3YXJncykpDQoNCiAgICAgICAgZGVmIGNsZWFudXAyKCphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICAgICBjbGVhbnVwcy5hcHBlbmQoKDIsIGFyZ3MsIGt3YXJncykpDQoNCiAgICAgICAgdGVzdC5hZGRDbGVhbnVwKGNsZWFudXAxLCAxLCAyLCAzLCBmb3VyPSdoZWxsbycsIGZpdmU9J2dvb2RieWUnKQ0KICAgICAgICB0ZXN0LmFkZENsZWFudXAoY2xlYW51cDIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCh0ZXN0Ll9jbGVhbnVwcywNCiAgICAgICAgICAgICAgICAgICAgICAgICBbKGNsZWFudXAxLCAoMSwgMiwgMyksIGRpY3QoZm91cj0naGVsbG8nLCBmaXZlPSdnb29kYnllJykpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xlYW51cDIsICgpLCB7fSldKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZSh0ZXN0LmRvQ2xlYW51cHMoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjbGVhbnVwcywgWygyLCAoKSwge30pLCAoMSwgKDEsIDIsIDMpLCBkaWN0KGZvdXI9J2hlbGxvJywgZml2ZT0nZ29vZGJ5ZScpKV0pDQoNCiAgICBkZWYgdGVzdENsZWFuVXBXaXRoRXJyb3JzKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0YWJsZVRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3ROb3RoaW5nKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBNb2NrT3V0Y29tZShvYmplY3QpOg0KICAgICAgICAgICAgc3VjY2VzcyA9IFRydWUNCiAgICAgICAgICAgIGVycm9ycyA9IFtdDQoNCiAgICAgICAgdGVzdCA9IFRlc3RhYmxlVGVzdCgndGVzdE5vdGhpbmcnKQ0KICAgICAgICB0ZXN0Ll9vdXRjb21lRm9yRG9DbGVhbnVwcyA9IE1vY2tPdXRjb21lDQoNCiAgICAgICAgZXhjMSA9IEV4Y2VwdGlvbignZm9vJykNCiAgICAgICAgZXhjMiA9IEV4Y2VwdGlvbignYmFyJykNCiAgICAgICAgZGVmIGNsZWFudXAxKCk6DQogICAgICAgICAgICByYWlzZSBleGMxDQoNCiAgICAgICAgZGVmIGNsZWFudXAyKCk6DQogICAgICAgICAgICByYWlzZSBleGMyDQoNCiAgICAgICAgdGVzdC5hZGRDbGVhbnVwKGNsZWFudXAxKQ0KICAgICAgICB0ZXN0LmFkZENsZWFudXAoY2xlYW51cDIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZSh0ZXN0LmRvQ2xlYW51cHMoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShNb2NrT3V0Y29tZS5zdWNjZXNzKQ0KDQogICAgICAgIChUeXBlMSwgaW5zdGFuY2UxLCBfKSwgKFR5cGUyLCBpbnN0YW5jZTIsIF8pID0gcmV2ZXJzZWQoTW9ja091dGNvbWUuZXJyb3JzKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKChUeXBlMSwgaW5zdGFuY2UxKSwgKEV4Y2VwdGlvbiwgZXhjMSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoKFR5cGUyLCBpbnN0YW5jZTIpLCAoRXhjZXB0aW9uLCBleGMyKSkNCg0KICAgIGRlZiB0ZXN0Q2xlYW51cEluUnVuKHNlbGYpOg0KICAgICAgICBibG93VXAgPSBGYWxzZQ0KICAgICAgICBvcmRlcmluZyA9IFtdDQoNCiAgICAgICAgY2xhc3MgVGVzdGFibGVUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAgICAgICAgIGRlZiBzZXRVcChzZWxmKToNCiAgICAgICAgICAgICAgICBvcmRlcmluZy5hcHBlbmQoJ3NldFVwJykNCiAgICAgICAgICAgICAgICBpZiBibG93VXA6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbignZm9vJykNCg0KICAgICAgICAgICAgZGVmIHRlc3ROb3RoaW5nKHNlbGYpOg0KICAgICAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgndGVzdCcpDQoNCiAgICAgICAgICAgIGRlZiB0ZWFyRG93bihzZWxmKToNCiAgICAgICAgICAgICAgICBvcmRlcmluZy5hcHBlbmQoJ3RlYXJEb3duJykNCg0KICAgICAgICB0ZXN0ID0gVGVzdGFibGVUZXN0KCd0ZXN0Tm90aGluZycpDQoNCiAgICAgICAgZGVmIGNsZWFudXAxKCk6DQogICAgICAgICAgICBvcmRlcmluZy5hcHBlbmQoJ2NsZWFudXAxJykNCiAgICAgICAgZGVmIGNsZWFudXAyKCk6DQogICAgICAgICAgICBvcmRlcmluZy5hcHBlbmQoJ2NsZWFudXAyJykNCiAgICAgICAgdGVzdC5hZGRDbGVhbnVwKGNsZWFudXAxKQ0KICAgICAgICB0ZXN0LmFkZENsZWFudXAoY2xlYW51cDIpDQoNCiAgICAgICAgZGVmIHN1Y2Nlc3Moc29tZV90ZXN0KToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZV90ZXN0LCB0ZXN0KQ0KICAgICAgICAgICAgb3JkZXJpbmcuYXBwZW5kKCdzdWNjZXNzJykNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgcmVzdWx0LmFkZFN1Y2Nlc3MgPSBzdWNjZXNzDQoNCiAgICAgICAgdGVzdC5ydW4ocmVzdWx0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG9yZGVyaW5nLCBbJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsZWFudXAyJywgJ2NsZWFudXAxJywgJ3N1Y2Nlc3MnXSkNCg0KICAgICAgICBibG93VXAgPSBUcnVlDQogICAgICAgIG9yZGVyaW5nID0gW10NCiAgICAgICAgdGVzdCA9IFRlc3RhYmxlVGVzdCgndGVzdE5vdGhpbmcnKQ0KICAgICAgICB0ZXN0LmFkZENsZWFudXAoY2xlYW51cDEpDQogICAgICAgIHRlc3QucnVuKHJlc3VsdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvcmRlcmluZywgWydzZXRVcCcsICdjbGVhbnVwMSddKQ0KDQogICAgZGVmIHRlc3RUZXN0Q2FzZURlYnVnRXhlY3V0ZXNDbGVhbnVwcyhzZWxmKToNCiAgICAgICAgb3JkZXJpbmcgPSBbXQ0KDQogICAgICAgIGNsYXNzIFRlc3RhYmxlVGVzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQogICAgICAgICAgICBkZWYgc2V0VXAoc2VsZik6DQogICAgICAgICAgICAgICAgb3JkZXJpbmcuYXBwZW5kKCdzZXRVcCcpDQogICAgICAgICAgICAgICAgc2VsZi5hZGRDbGVhbnVwKGNsZWFudXAxKQ0KDQogICAgICAgICAgICBkZWYgdGVzdE5vdGhpbmcoc2VsZik6DQogICAgICAgICAgICAgICAgb3JkZXJpbmcuYXBwZW5kKCd0ZXN0JykNCg0KICAgICAgICAgICAgZGVmIHRlYXJEb3duKHNlbGYpOg0KICAgICAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgndGVhckRvd24nKQ0KDQogICAgICAgIHRlc3QgPSBUZXN0YWJsZVRlc3QoJ3Rlc3ROb3RoaW5nJykNCg0KICAgICAgICBkZWYgY2xlYW51cDEoKToNCiAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgnY2xlYW51cDEnKQ0KICAgICAgICAgICAgdGVzdC5hZGRDbGVhbnVwKGNsZWFudXAyKQ0KICAgICAgICBkZWYgY2xlYW51cDIoKToNCiAgICAgICAgICAgIG9yZGVyaW5nLmFwcGVuZCgnY2xlYW51cDInKQ0KDQogICAgICAgIHRlc3QuZGVidWcoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG9yZGVyaW5nLCBbJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLCAnY2xlYW51cDEnLCAnY2xlYW51cDInXSkNCg0KDQpjbGFzcyBUZXN0X1RleHRUZXN0UnVubmVyKHVuaXR0ZXN0LlRlc3RDYXNlKToNCiAgICAiIiJUZXN0cyBmb3IgVGV4dFRlc3RSdW5uZXIuIiIiDQoNCiAgICBkZWYgdGVzdF9pbml0KHNlbGYpOg0KICAgICAgICBydW5uZXIgPSB1bml0dGVzdC5UZXh0VGVzdFJ1bm5lcigpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocnVubmVyLmZhaWxmYXN0KQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKHJ1bm5lci5idWZmZXIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocnVubmVyLnZlcmJvc2l0eSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChydW5uZXIud2FybmluZ3MsIE5vbmUpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShydW5uZXIuZGVzY3JpcHRpb25zKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJ1bm5lci5yZXN1bHRjbGFzcywgdW5pdHRlc3QuVGV4dFRlc3RSZXN1bHQpDQoNCg0KICAgIGRlZiB0ZXN0QnVmZmVyQW5kRmFpbGZhc3Qoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RGb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXN0UmVzdWx0KCkNCiAgICAgICAgcnVubmVyID0gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoc3RyZWFtPWlvLlN0cmluZ0lPKCksIGZhaWxmYXN0PVRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyPVRydWUpDQogICAgICAgICMgVXNlIG91ciByZXN1bHQgb2JqZWN0DQogICAgICAgIHJ1bm5lci5fbWFrZVJlc3VsdCA9IGxhbWJkYTogcmVzdWx0DQogICAgICAgIHJ1bm5lci5ydW4oVGVzdCgndGVzdEZvbycpKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQuZmFpbGZhc3QpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShyZXN1bHQuYnVmZmVyKQ0KDQogICAgZGVmIHRlc3RSdW5uZXJSZWdpc3RlcnNSZXN1bHQoc2VsZik6DQogICAgICAgIGNsYXNzIFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KICAgICAgICAgICAgZGVmIHRlc3RGb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICBvcmlnaW5hbFJlZ2lzdGVyUmVzdWx0ID0gdW5pdHRlc3QucnVubmVyLnJlZ2lzdGVyUmVzdWx0DQogICAgICAgIGRlZiBjbGVhbnVwKCk6DQogICAgICAgICAgICB1bml0dGVzdC5ydW5uZXIucmVnaXN0ZXJSZXN1bHQgPSBvcmlnaW5hbFJlZ2lzdGVyUmVzdWx0DQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChjbGVhbnVwKQ0KDQogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQ0KICAgICAgICBydW5uZXIgPSB1bml0dGVzdC5UZXh0VGVzdFJ1bm5lcihzdHJlYW09aW8uU3RyaW5nSU8oKSkNCiAgICAgICAgIyBVc2Ugb3VyIHJlc3VsdCBvYmplY3QNCiAgICAgICAgcnVubmVyLl9tYWtlUmVzdWx0ID0gbGFtYmRhOiByZXN1bHQNCg0KICAgICAgICBzZWxmLndhc1JlZ2lzdGVyZWQgPSAwDQogICAgICAgIGRlZiBmYWtlUmVnaXN0ZXJSZXN1bHQodGhpc1Jlc3VsdCk6DQogICAgICAgICAgICBzZWxmLndhc1JlZ2lzdGVyZWQgKz0gMQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCh0aGlzUmVzdWx0LCByZXN1bHQpDQogICAgICAgIHVuaXR0ZXN0LnJ1bm5lci5yZWdpc3RlclJlc3VsdCA9IGZha2VSZWdpc3RlclJlc3VsdA0KDQogICAgICAgIHJ1bm5lci5ydW4odW5pdHRlc3QuVGVzdFN1aXRlKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2VsZi53YXNSZWdpc3RlcmVkLCAxKQ0KDQogICAgZGVmIHRlc3Rfd29ya3Nfd2l0aF9yZXN1bHRfd2l0aG91dF9zdGFydFRlc3RSdW5fc3RvcFRlc3RSdW4oc2VsZik6DQogICAgICAgIGNsYXNzIE9sZFRleHRSZXN1bHQoUmVzdWx0V2l0aE5vU3RhcnRUZXN0UnVuU3RvcFRlc3RSdW4pOg0KICAgICAgICAgICAgc2VwYXJhdG9yMiA9ICcnDQogICAgICAgICAgICBkZWYgcHJpbnRFcnJvcnMoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIFJ1bm5lcih1bml0dGVzdC5UZXh0VGVzdFJ1bm5lcik6DQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgICAgICAgICAgc3VwZXIoUnVubmVyLCBzZWxmKS5fX2luaXRfXyhpby5TdHJpbmdJTygpKQ0KDQogICAgICAgICAgICBkZWYgX21ha2VSZXN1bHQoc2VsZik6DQogICAgICAgICAgICAgICAgcmV0dXJuIE9sZFRleHRSZXN1bHQoKQ0KDQogICAgICAgIHJ1bm5lciA9IFJ1bm5lcigpDQogICAgICAgIHJ1bm5lci5ydW4odW5pdHRlc3QuVGVzdFN1aXRlKCkpDQoNCiAgICBkZWYgdGVzdF9zdGFydFRlc3RSdW5fc3RvcFRlc3RSdW5fY2FsbGVkKHNlbGYpOg0KICAgICAgICBjbGFzcyBMb2dnaW5nVGV4dFJlc3VsdChMb2dnaW5nUmVzdWx0KToNCiAgICAgICAgICAgIHNlcGFyYXRvcjIgPSAnJw0KICAgICAgICAgICAgZGVmIHByaW50RXJyb3JzKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBMb2dnaW5nUnVubmVyKHVuaXR0ZXN0LlRleHRUZXN0UnVubmVyKToNCiAgICAgICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBldmVudHMpOg0KICAgICAgICAgICAgICAgIHN1cGVyKExvZ2dpbmdSdW5uZXIsIHNlbGYpLl9faW5pdF9fKGlvLlN0cmluZ0lPKCkpDQogICAgICAgICAgICAgICAgc2VsZi5fZXZlbnRzID0gZXZlbnRzDQoNCiAgICAgICAgICAgIGRlZiBfbWFrZVJlc3VsdChzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTG9nZ2luZ1RleHRSZXN1bHQoc2VsZi5fZXZlbnRzKQ0KDQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJ1bm5lciA9IExvZ2dpbmdSdW5uZXIoZXZlbnRzKQ0KICAgICAgICBydW5uZXIucnVuKHVuaXR0ZXN0LlRlc3RTdWl0ZSgpKQ0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0UnVuJywgJ3N0b3BUZXN0UnVuJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIGV4cGVjdGVkKQ0KDQogICAgZGVmIHRlc3RfcGlja2xlX3VucGlja2xlKHNlbGYpOg0KICAgICAgICAjIElzc3VlICM3MTk3OiBhIFRleHRUZXN0UnVubmVyIHNob3VsZCBiZSAodW4pcGlja2xlYWJsZS4gVGhpcyBpcw0KICAgICAgICAjIHJlcXVpcmVkIGJ5IHRlc3RfbXVsdGlwcm9jZXNzaW5nIHVuZGVyIFdpbmRvd3MgKGluIHZlcmJvc2UgbW9kZSkuDQogICAgICAgIHN0cmVhbSA9IGlvLlN0cmluZ0lPKCJmb28iKQ0KICAgICAgICBydW5uZXIgPSB1bml0dGVzdC5UZXh0VGVzdFJ1bm5lcihzdHJlYW0pDQogICAgICAgIGZvciBwcm90b2NvbCBpbiByYW5nZSgyLCBwaWNrbGUuSElHSEVTVF9QUk9UT0NPTCArIDEpOg0KICAgICAgICAgICAgcyA9IHBpY2tsZS5kdW1wcyhydW5uZXIsIHByb3RvY29sKQ0KICAgICAgICAgICAgb2JqID0gcGlja2xlLmxvYWRzKHMpDQogICAgICAgICAgICAjIFN0cmluZ0lPIG9iamVjdHMgbmV2ZXIgY29tcGFyZSBlcXVhbCwgYSBjaGVhcCB0ZXN0IGluc3RlYWQuDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG9iai5zdHJlYW0uZ2V0dmFsdWUoKSwgc3RyZWFtLmdldHZhbHVlKCkpDQoNCiAgICBkZWYgdGVzdF9yZXN1bHRjbGFzcyhzZWxmKToNCiAgICAgICAgZGVmIE1vY2tSZXN1bHRDbGFzcygqYXJncyk6DQogICAgICAgICAgICByZXR1cm4gYXJncw0KICAgICAgICBTVFJFQU0gPSBvYmplY3QoKQ0KICAgICAgICBERVNDUklQVElPTlMgPSBvYmplY3QoKQ0KICAgICAgICBWRVJCT1NJVFkgPSBvYmplY3QoKQ0KICAgICAgICBydW5uZXIgPSB1bml0dGVzdC5UZXh0VGVzdFJ1bm5lcihTVFJFQU0sIERFU0NSSVBUSU9OUywgVkVSQk9TSVRZLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRjbGFzcz1Nb2NrUmVzdWx0Q2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocnVubmVyLnJlc3VsdGNsYXNzLCBNb2NrUmVzdWx0Q2xhc3MpDQoNCiAgICAgICAgZXhwZWN0ZWRyZXN1bHQgPSAocnVubmVyLnN0cmVhbSwgREVTQ1JJUFRJT05TLCBWRVJCT1NJVFkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocnVubmVyLl9tYWtlUmVzdWx0KCksIGV4cGVjdGVkcmVzdWx0KQ0KDQogICAgZGVmIHRlc3Rfd2FybmluZ3Moc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBDaGVjayB0aGF0IHdhcm5pbmdzIGFyZ3VtZW50IG9mIFRleHRUZXN0UnVubmVyIGNvcnJlY3RseSBhZmZlY3RzIHRoZQ0KICAgICAgICBiZWhhdmlvciBvZiB0aGUgd2FybmluZ3MuDQogICAgICAgICIiIg0KICAgICAgICAjIHNlZSAjMTA1MzUgYW5kIHRoZSBfdGVzdF93YXJuaW5ncyBmaWxlIGZvciBtb3JlIGluZm9ybWF0aW9uDQoNCiAgICAgICAgZGVmIGdldF9wYXJzZV9vdXRfZXJyKHApOg0KICAgICAgICAgICAgcmV0dXJuIFtiLnNwbGl0bGluZXMoKSBmb3IgYiBpbiBwLmNvbW11bmljYXRlKCldDQogICAgICAgIG9wdHMgPSBkaWN0KHN0ZG91dD1zdWJwcm9jZXNzLlBJUEUsIHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUsDQogICAgICAgICAgICAgICAgICAgIGN3ZD1vcy5wYXRoLmRpcm5hbWUoX19maWxlX18pKQ0KICAgICAgICBhZV9tc2cgPSBiJ1BsZWFzZSB1c2UgYXNzZXJ0RXF1YWwgaW5zdGVhZC4nDQogICAgICAgIGF0X21zZyA9IGInUGxlYXNlIHVzZSBhc3NlcnRUcnVlIGluc3RlYWQuJw0KDQogICAgICAgICMgbm8gYXJncyAtPiBhbGwgdGhlIHdhcm5pbmdzIGFyZSBwcmludGVkLCB1bml0dGVzdCB3YXJuaW5ncyBvbmx5IG9uY2UNCiAgICAgICAgcCA9IHN1YnByb2Nlc3MuUG9wZW4oW3N5cy5leGVjdXRhYmxlLCAnX3Rlc3Rfd2FybmluZ3MucHknXSwgKipvcHRzKQ0KICAgICAgICBvdXQsIGVyciA9IGdldF9wYXJzZV9vdXRfZXJyKHApDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oYidPSycsIGVycikNCiAgICAgICAgIyBjaGVjayB0aGF0IHRoZSB0b3RhbCBudW1iZXIgb2Ygd2FybmluZ3MgaW4gdGhlIG91dHB1dCBpcyBjb3JyZWN0DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKG91dCksIDEyKQ0KICAgICAgICAjIGNoZWNrIHRoYXQgdGhlIG51bWJlcnMgb2YgdGhlIGRpZmZlcmVudCBraW5kIG9mIHdhcm5pbmdzIGlzIGNvcnJlY3QNCiAgICAgICAgZm9yIG1zZyBpbiBbYidkdycsIGInaXcnLCBiJ3V3J106DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG91dC5jb3VudChtc2cpLCAzKQ0KICAgICAgICBmb3IgbXNnIGluIFthZV9tc2csIGF0X21zZywgYidydyddOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvdXQuY291bnQobXNnKSwgMSkNCg0KICAgICAgICBhcmdzX2xpc3QgPSAoDQogICAgICAgICAgICAjIHBhc3NpbmcgJ2lnbm9yZScgYXMgd2FybmluZ3MgYXJnIC0+IG5vIHdhcm5pbmdzDQogICAgICAgICAgICBbc3lzLmV4ZWN1dGFibGUsICdfdGVzdF93YXJuaW5ncy5weScsICdpZ25vcmUnXSwNCiAgICAgICAgICAgICMgLVcgZG9lc24ndCBhZmZlY3QgdGhlIHJlc3VsdCBpZiB0aGUgYXJnIGlzIHBhc3NlZA0KICAgICAgICAgICAgW3N5cy5leGVjdXRhYmxlLCAnLVdhJywgJ190ZXN0X3dhcm5pbmdzLnB5JywgJ2lnbm9yZSddLA0KICAgICAgICAgICAgIyAtVyBhZmZlY3RzIHRoZSByZXN1bHQgaWYgdGhlIGFyZyBpcyBub3QgcGFzc2VkDQogICAgICAgICAgICBbc3lzLmV4ZWN1dGFibGUsICctV2knLCAnX3Rlc3Rfd2FybmluZ3MucHknXQ0KICAgICAgICApDQogICAgICAgICMgaW4gYWxsIHRoZXNlIGNhc2VzIG5vIHdhcm5pbmdzIGFyZSBwcmludGVkDQogICAgICAgIGZvciBhcmdzIGluIGFyZ3NfbGlzdDoNCiAgICAgICAgICAgIHAgPSBzdWJwcm9jZXNzLlBvcGVuKGFyZ3MsICoqb3B0cykNCiAgICAgICAgICAgIG91dCwgZXJyID0gZ2V0X3BhcnNlX291dF9lcnIocCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oYidPSycsIGVycikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKG91dCksIDApDQoNCg0KICAgICAgICAjIHBhc3NpbmcgJ2Fsd2F5cycgYXMgd2FybmluZ3MgYXJnIC0+IGFsbCB0aGUgd2FybmluZ3MgcHJpbnRlZCwNCiAgICAgICAgIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0dGVzdCB3YXJuaW5ncyBvbmx5IG9uY2UNCiAgICAgICAgcCA9IHN1YnByb2Nlc3MuUG9wZW4oW3N5cy5leGVjdXRhYmxlLCAnX3Rlc3Rfd2FybmluZ3MucHknLCAnYWx3YXlzJ10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqb3B0cykNCiAgICAgICAgb3V0LCBlcnIgPSBnZXRfcGFyc2Vfb3V0X2VycihwKQ0KICAgICAgICBzZWxmLmFzc2VydEluKGInT0snLCBlcnIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKG91dCksIDE0KQ0KICAgICAgICBmb3IgbXNnIGluIFtiJ2R3JywgYidpdycsIGIndXcnLCBiJ3J3J106DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG91dC5jb3VudChtc2cpLCAzKQ0KICAgICAgICBmb3IgbXNnIGluIFthZV9tc2csIGF0X21zZ106DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG91dC5jb3VudChtc2cpLCAxKQ0KDQogICAgZGVmIHRlc3RTdGRFcnJMb29rZWRVcEF0SW5zdGFudGlhdGlvblRpbWUoc2VsZik6DQogICAgICAgICMgc2VlIGlzc3VlIDEwNzg2DQogICAgICAgIG9sZF9zdGRlcnIgPSBzeXMuc3RkZXJyDQogICAgICAgIGYgPSBpby5TdHJpbmdJTygpDQogICAgICAgIHN5cy5zdGRlcnIgPSBmDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJ1bm5lciA9IHVuaXR0ZXN0LlRleHRUZXN0UnVubmVyKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShydW5uZXIuc3RyZWFtLnN0cmVhbSBpcyBmKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgc3lzLnN0ZGVyciA9IG9sZF9zdGRlcnINCg0KICAgIGRlZiB0ZXN0U3BlY2lmaWVkU3RyZWFtVXNlZChzZWxmKToNCiAgICAgICAgIyBzZWUgaXNzdWUgMTA3ODYNCiAgICAgICAgZiA9IGlvLlN0cmluZ0lPKCkNCiAgICAgICAgcnVubmVyID0gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoZikNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKHJ1bm5lci5zdHJlYW0uc3RyZWFtIGlzIGYpDQo=',
'/Lib/unittest/test/test_functiontestcase.py':'aW1wb3J0IHVuaXR0ZXN0DQoNCmZyb20gLnN1cHBvcnQgaW1wb3J0IExvZ2dpbmdSZXN1bHQNCg0KDQpjbGFzcyBUZXN0X0Z1bmN0aW9uVGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgIyAiUmV0dXJuIHRoZSBudW1iZXIgb2YgdGVzdHMgcmVwcmVzZW50ZWQgYnkgdGhlIHRoaXMgdGVzdCBvYmplY3QuIEZvcg0KICAgICMgVGVzdENhc2UgaW5zdGFuY2VzLCB0aGlzIHdpbGwgYWx3YXlzIGJlIDEiDQogICAgZGVmIHRlc3RfY291bnRUZXN0Q2FzZXMoc2VsZik6DQogICAgICAgIHRlc3QgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRlc3QuY291bnRUZXN0Q2FzZXMoKSwgMSkNCg0KICAgICMgIldoZW4gYSBzZXRVcCgpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUgdGVzdCBydW5uZXIgd2lsbCBydW4gdGhhdCBtZXRob2QNCiAgICAjIHByaW9yIHRvIGVhY2ggdGVzdC4gTGlrZXdpc2UsIGlmIGEgdGVhckRvd24oKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlDQogICAgIyB0ZXN0IHJ1bm5lciB3aWxsIGludm9rZSB0aGF0IG1ldGhvZCBhZnRlciBlYWNoIHRlc3QuIEluIHRoZSBleGFtcGxlLA0KICAgICMgc2V0VXAoKSB3YXMgdXNlZCB0byBjcmVhdGUgYSBmcmVzaCBzZXF1ZW5jZSBmb3IgZWFjaCB0ZXN0LiINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgdGhlIHByb3BlciBjYWxsIG9yZGVyIGlzIG1haW50YWluZWQsIGV2ZW4gaWYgc2V0VXAoKSByYWlzZXMNCiAgICAjIGFuIGV4Y2VwdGlvbi4NCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fc2V0VXAoc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGRlZiBzZXRVcCgpOg0KICAgICAgICAgICAgZXZlbnRzLmFwcGVuZCgnc2V0VXAnKQ0KICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCdyYWlzZWQgYnkgc2V0VXAnKQ0KDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBldmVudHMuYXBwZW5kKCd0ZXN0JykNCg0KICAgICAgICBkZWYgdGVhckRvd24oKToNCiAgICAgICAgICAgIGV2ZW50cy5hcHBlbmQoJ3RlYXJEb3duJykNCg0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ3NldFVwJywgJ2FkZEVycm9yJywgJ3N0b3BUZXN0J10NCiAgICAgICAgdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZSh0ZXN0LCBzZXRVcCwgdGVhckRvd24pLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldoZW4gYSBzZXRVcCgpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUgdGVzdCBydW5uZXIgd2lsbCBydW4gdGhhdCBtZXRob2QNCiAgICAjIHByaW9yIHRvIGVhY2ggdGVzdC4gTGlrZXdpc2UsIGlmIGEgdGVhckRvd24oKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlDQogICAgIyB0ZXN0IHJ1bm5lciB3aWxsIGludm9rZSB0aGF0IG1ldGhvZCBhZnRlciBlYWNoIHRlc3QuIEluIHRoZSBleGFtcGxlLA0KICAgICMgc2V0VXAoKSB3YXMgdXNlZCB0byBjcmVhdGUgYSBmcmVzaCBzZXF1ZW5jZSBmb3IgZWFjaCB0ZXN0LiINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgdGhlIHByb3BlciBjYWxsIG9yZGVyIGlzIG1haW50YWluZWQsIGV2ZW4gaWYgdGhlIHRlc3QgcmFpc2VzDQogICAgIyBhbiBlcnJvciAoYXMgb3Bwb3NlZCB0byBhIGZhaWx1cmUpLg0KICAgIGRlZiB0ZXN0X3J1bl9jYWxsX29yZGVyX19lcnJvcl9pbl90ZXN0KHNlbGYpOg0KICAgICAgICBldmVudHMgPSBbXQ0KICAgICAgICByZXN1bHQgPSBMb2dnaW5nUmVzdWx0KGV2ZW50cykNCg0KICAgICAgICBkZWYgc2V0VXAoKToNCiAgICAgICAgICAgIGV2ZW50cy5hcHBlbmQoJ3NldFVwJykNCg0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgZXZlbnRzLmFwcGVuZCgndGVzdCcpDQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoJ3JhaXNlZCBieSB0ZXN0JykNCg0KICAgICAgICBkZWYgdGVhckRvd24oKToNCiAgICAgICAgICAgIGV2ZW50cy5hcHBlbmQoJ3RlYXJEb3duJykNCg0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLA0KICAgICAgICAgICAgICAgICAgICAnYWRkRXJyb3InLCAnc3RvcFRlc3QnXQ0KICAgICAgICB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKHRlc3QsIHNldFVwLCB0ZWFyRG93bikucnVuKHJlc3VsdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIGV4cGVjdGVkKQ0KDQogICAgIyAiV2hlbiBhIHNldFVwKCkgbWV0aG9kIGlzIGRlZmluZWQsIHRoZSB0ZXN0IHJ1bm5lciB3aWxsIHJ1biB0aGF0IG1ldGhvZA0KICAgICMgcHJpb3IgdG8gZWFjaCB0ZXN0LiBMaWtld2lzZSwgaWYgYSB0ZWFyRG93bigpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUNCiAgICAjIHRlc3QgcnVubmVyIHdpbGwgaW52b2tlIHRoYXQgbWV0aG9kIGFmdGVyIGVhY2ggdGVzdC4gSW4gdGhlIGV4YW1wbGUsDQogICAgIyBzZXRVcCgpIHdhcyB1c2VkIHRvIGNyZWF0ZSBhIGZyZXNoIHNlcXVlbmNlIGZvciBlYWNoIHRlc3QuIg0KICAgICMNCiAgICAjIE1ha2Ugc3VyZSB0aGUgcHJvcGVyIGNhbGwgb3JkZXIgaXMgbWFpbnRhaW5lZCwgZXZlbiBpZiB0aGUgdGVzdCBzaWduYWxzDQogICAgIyBhIGZhaWx1cmUgKGFzIG9wcG9zZWQgdG8gYW4gZXJyb3IpLg0KICAgIGRlZiB0ZXN0X3J1bl9jYWxsX29yZGVyX19mYWlsdXJlX2luX3Rlc3Qoc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGRlZiBzZXRVcCgpOg0KICAgICAgICAgICAgZXZlbnRzLmFwcGVuZCgnc2V0VXAnKQ0KDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBldmVudHMuYXBwZW5kKCd0ZXN0JykNCiAgICAgICAgICAgIHNlbGYuZmFpbCgncmFpc2VkIGJ5IHRlc3QnKQ0KDQogICAgICAgIGRlZiB0ZWFyRG93bigpOg0KICAgICAgICAgICAgZXZlbnRzLmFwcGVuZCgndGVhckRvd24nKQ0KDQogICAgICAgIGV4cGVjdGVkID0gWydzdGFydFRlc3QnLCAnc2V0VXAnLCAndGVzdCcsICd0ZWFyRG93bicsDQogICAgICAgICAgICAgICAgICAgICdhZGRGYWlsdXJlJywgJ3N0b3BUZXN0J10NCiAgICAgICAgdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZSh0ZXN0LCBzZXRVcCwgdGVhckRvd24pLnJ1bihyZXN1bHQpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXZlbnRzLCBleHBlY3RlZCkNCg0KICAgICMgIldoZW4gYSBzZXRVcCgpIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGUgdGVzdCBydW5uZXIgd2lsbCBydW4gdGhhdCBtZXRob2QNCiAgICAjIHByaW9yIHRvIGVhY2ggdGVzdC4gTGlrZXdpc2UsIGlmIGEgdGVhckRvd24oKSBtZXRob2QgaXMgZGVmaW5lZCwgdGhlDQogICAgIyB0ZXN0IHJ1bm5lciB3aWxsIGludm9rZSB0aGF0IG1ldGhvZCBhZnRlciBlYWNoIHRlc3QuIEluIHRoZSBleGFtcGxlLA0KICAgICMgc2V0VXAoKSB3YXMgdXNlZCB0byBjcmVhdGUgYSBmcmVzaCBzZXF1ZW5jZSBmb3IgZWFjaCB0ZXN0LiINCiAgICAjDQogICAgIyBNYWtlIHN1cmUgdGhlIHByb3BlciBjYWxsIG9yZGVyIGlzIG1haW50YWluZWQsIGV2ZW4gaWYgdGVhckRvd24oKSByYWlzZXMNCiAgICAjIGFuIGV4Y2VwdGlvbi4NCiAgICBkZWYgdGVzdF9ydW5fY2FsbF9vcmRlcl9fZXJyb3JfaW5fdGVhckRvd24oc2VsZik6DQogICAgICAgIGV2ZW50cyA9IFtdDQogICAgICAgIHJlc3VsdCA9IExvZ2dpbmdSZXN1bHQoZXZlbnRzKQ0KDQogICAgICAgIGRlZiBzZXRVcCgpOg0KICAgICAgICAgICAgZXZlbnRzLmFwcGVuZCgnc2V0VXAnKQ0KDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBldmVudHMuYXBwZW5kKCd0ZXN0JykNCg0KICAgICAgICBkZWYgdGVhckRvd24oKToNCiAgICAgICAgICAgIGV2ZW50cy5hcHBlbmQoJ3RlYXJEb3duJykNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigncmFpc2VkIGJ5IHRlYXJEb3duJykNCg0KICAgICAgICBleHBlY3RlZCA9IFsnc3RhcnRUZXN0JywgJ3NldFVwJywgJ3Rlc3QnLCAndGVhckRvd24nLCAnYWRkRXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAnc3RvcFRlc3QnXQ0KICAgICAgICB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKHRlc3QsIHNldFVwLCB0ZWFyRG93bikucnVuKHJlc3VsdCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChldmVudHMsIGV4cGVjdGVkKQ0KDQogICAgIyAiUmV0dXJuIGEgc3RyaW5nIGlkZW50aWZ5aW5nIHRoZSBzcGVjaWZpYyB0ZXN0IGNhc2UuIg0KICAgICMNCiAgICAjIEJlY2F1c2Ugb2YgdGhlIHZhZ3VlIG5hdHVyZSBvZiB0aGUgZG9jcywgSSdtIG5vdCBnb2luZyB0byBsb2NrIHRoaXMNCiAgICAjIHRlc3QgZG93biB0b28gbXVjaC4gUmVhbGx5IGFsbCB0aGF0IGNhbiBiZSBhc3NlcnRlZCBpcyB0aGF0IHRoZSBpZCgpDQogICAgIyB3aWxsIGJlIGEgc3RyaW5nIChlaXRoZXIgOC1ieXRlIG9yIHVuaWNvZGUgLS0gYWdhaW4sIGJlY2F1c2UgdGhlIGRvY3MNCiAgICAjIGp1c3Qgc2F5ICJzdHJpbmciKQ0KICAgIGRlZiB0ZXN0X2lkKHNlbGYpOg0KICAgICAgICB0ZXN0ID0gdW5pdHRlc3QuRnVuY3Rpb25UZXN0Q2FzZShsYW1iZGE6IE5vbmUpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHRlc3QuaWQoKSwgc3RyKQ0KDQogICAgIyAiUmV0dXJucyBhIG9uZS1saW5lIGRlc2NyaXB0aW9uIG9mIHRoZSB0ZXN0LCBvciBOb25lIGlmIG5vIGRlc2NyaXB0aW9uDQogICAgIyBoYXMgYmVlbiBwcm92aWRlZC4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBtZXRob2QgcmV0dXJucw0KICAgICMgdGhlIGZpcnN0IGxpbmUgb2YgdGhlIHRlc3QgbWV0aG9kJ3MgZG9jc3RyaW5nLCBpZiBhdmFpbGFibGUsIG9yIE5vbmUuIg0KICAgIGRlZiB0ZXN0X3Nob3J0RGVzY3JpcHRpb25fX25vX2RvY3N0cmluZyhzZWxmKToNCiAgICAgICAgdGVzdCA9IHVuaXR0ZXN0LkZ1bmN0aW9uVGVzdENhc2UobGFtYmRhOiBOb25lKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwodGVzdC5zaG9ydERlc2NyaXB0aW9uKCksIE5vbmUpDQoNCiAgICAjICJSZXR1cm5zIGEgb25lLWxpbmUgZGVzY3JpcHRpb24gb2YgdGhlIHRlc3QsIG9yIE5vbmUgaWYgbm8gZGVzY3JpcHRpb24NCiAgICAjIGhhcyBiZWVuIHByb3ZpZGVkLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIG1ldGhvZCByZXR1cm5zDQogICAgIyB0aGUgZmlyc3QgbGluZSBvZiB0aGUgdGVzdCBtZXRob2QncyBkb2NzdHJpbmcsIGlmIGF2YWlsYWJsZSwgb3IgTm9uZS4iDQogICAgZGVmIHRlc3Rfc2hvcnREZXNjcmlwdGlvbl9fc2luZ2xlbGluZV9kb2NzdHJpbmcoc2VsZik6DQogICAgICAgIGRlc2MgPSAidGhpcyB0ZXN0cyBmb28iDQogICAgICAgIHRlc3QgPSB1bml0dGVzdC5GdW5jdGlvblRlc3RDYXNlKGxhbWJkYTogTm9uZSwgZGVzY3JpcHRpb249ZGVzYykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRlc3Quc2hvcnREZXNjcmlwdGlvbigpLCAidGhpcyB0ZXN0cyBmb28iKQ0K',
'/Lib/unittest/test/testmock/testsentinel.py':'aW1wb3J0IHVuaXR0ZXN0DQpmcm9tIHVuaXR0ZXN0Lm1vY2sgaW1wb3J0IHNlbnRpbmVsLCBERUZBVUxUDQoNCg0KY2xhc3MgU2VudGluZWxUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiB0ZXN0U2VudGluZWxzKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNlbnRpbmVsLndoYXRldmVyLCBzZW50aW5lbC53aGF0ZXZlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAnc2VudGluZWwgbm90IHN0b3JlZCcpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoc2VudGluZWwud2hhdGV2ZXIsIHNlbnRpbmVsLndoYXRldmVyZWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2VudGluZWwgc2hvdWxkIGJlIHVuaXF1ZScpDQoNCg0KICAgIGRlZiB0ZXN0U2VudGluZWxOYW1lKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihzZW50aW5lbC53aGF0ZXZlciksICdzZW50aW5lbC53aGF0ZXZlcicsDQogICAgICAgICAgICAgICAgICAgICAgICAgJ3NlbnRpbmVsIG5hbWUgaW5jb3JyZWN0JykNCg0KDQogICAgZGVmIHRlc3RERUZBVUxUKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydFRydWUoREVGQVVMVCBpcyBzZW50aW5lbC5ERUZBVUxUKQ0KDQogICAgZGVmIHRlc3RCYXNlcyhzZWxmKToNCiAgICAgICAgIyBJZiB0aGlzIGRvZXNuJ3QgcmFpc2UgYW4gQXR0cmlidXRlRXJyb3IgdGhlbiBoZWxwKG1vY2spIGlzIGJyb2tlbg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgbGFtYmRhOiBzZW50aW5lbC5fX2Jhc2VzX18pDQoNCg0KaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoNCiAgICB1bml0dGVzdC5tYWluKCkNCg==',
'/Lib/unittest/test/testmock/support.py':'aW1wb3J0IHN5cw0KDQpkZWYgaXNfaW5zdGFuY2Uob2JqLCBrbGFzcyk6DQogICAgIiIiVmVyc2lvbiBvZiBpc19pbnN0YW5jZSB0aGF0IGRvZXNuJ3QgYWNjZXNzIF9fY2xhc3NfXyIiIg0KICAgIHJldHVybiBpc3N1YmNsYXNzKHR5cGUob2JqKSwga2xhc3MpDQoNCg0KY2xhc3MgU29tZUNsYXNzKG9iamVjdCk6DQogICAgY2xhc3NfYXR0cmlidXRlID0gTm9uZQ0KDQogICAgZGVmIHdpYmJsZShzZWxmKToNCiAgICAgICAgcGFzcw0KDQoNCmNsYXNzIFgob2JqZWN0KToNCiAgICBwYXNzDQoNCg0KZGVmIGV4YW1pbmVfd2FybmluZ3MoZnVuYyk6DQogICAgZGVmIHdyYXBwZXIoKToNCiAgICAgICAgd2l0aCBjYXRjaF93YXJuaW5ncyhyZWNvcmQ9VHJ1ZSkgYXMgd3M6DQogICAgICAgICAgICBmdW5jKHdzKQ0KICAgIHJldHVybiB3cmFwcGVyDQo=',
'/Lib/unittest/test/testmock/testpatch.py':'IyBDb3B5cmlnaHQgKEMpIDIwMDctMjAxMiBNaWNoYWVsIEZvb3JkICYgdGhlIG1vY2sgdGVhbQ0KIyBFLW1haWw6IGZ1enp5bWFuIEFUIHZvaWRzcGFjZSBET1Qgb3JnIERPVCB1aw0KIyBodHRwOi8vd3d3LnZvaWRzcGFjZS5vcmcudWsvcHl0aG9uL21vY2svDQoNCmltcG9ydCBvcw0KaW1wb3J0IHN5cw0KDQppbXBvcnQgdW5pdHRlc3QNCmZyb20gdW5pdHRlc3QudGVzdC50ZXN0bW9jayBpbXBvcnQgc3VwcG9ydA0KZnJvbSB1bml0dGVzdC50ZXN0LnRlc3Rtb2NrLnN1cHBvcnQgaW1wb3J0IFNvbWVDbGFzcywgaXNfaW5zdGFuY2UNCg0KZnJvbSB1bml0dGVzdC5tb2NrIGltcG9ydCAoDQogICAgTm9uQ2FsbGFibGVNb2NrLCBDYWxsYWJsZU1peGluLCBwYXRjaCwgc2VudGluZWwsDQogICAgTWFnaWNNb2NrLCBNb2NrLCBOb25DYWxsYWJsZU1hZ2ljTW9jaywgcGF0Y2gsIF9wYXRjaCwNCiAgICBERUZBVUxULCBjYWxsLCBfZ2V0X3RhcmdldA0KKQ0KDQoNCmJ1aWx0aW5fc3RyaW5nID0gJ2J1aWx0aW5zJw0KDQpQVE1vZHVsZSA9IHN5cy5tb2R1bGVzW19fbmFtZV9fXQ0KTU9ETkFNRSA9ICclcy5QVE1vZHVsZScgJSBfX25hbWVfXw0KDQoNCmRlZiBfZ2V0X3Byb3h5KG9iaiwgZ2V0X29ubHk9VHJ1ZSk6DQogICAgY2xhc3MgUHJveHkob2JqZWN0KToNCiAgICAgICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIG5hbWUpOg0KICAgICAgICAgICAgcmV0dXJuIGdldGF0dHIob2JqLCBuYW1lKQ0KICAgIGlmIG5vdCBnZXRfb25seToNCiAgICAgICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIG5hbWUsIHZhbHVlKToNCiAgICAgICAgICAgIHNldGF0dHIob2JqLCBuYW1lLCB2YWx1ZSkNCiAgICAgICAgZGVmIF9fZGVsYXR0cl9fKHNlbGYsIG5hbWUpOg0KICAgICAgICAgICAgZGVsYXR0cihvYmosIG5hbWUpDQogICAgICAgIFByb3h5Ll9fc2V0YXR0cl9fID0gX19zZXRhdHRyX18NCiAgICAgICAgUHJveHkuX19kZWxhdHRyX18gPSBfX2RlbGF0dHJfXw0KICAgIHJldHVybiBQcm94eSgpDQoNCg0KIyBmb3IgdXNlIGluIHRoZSB0ZXN0DQpzb21ldGhpbmcgID0gc2VudGluZWwuU29tZXRoaW5nDQpzb21ldGhpbmdfZWxzZSAgPSBzZW50aW5lbC5Tb21ldGhpbmdFbHNlDQoNCg0KY2xhc3MgRm9vKG9iamVjdCk6DQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGEpOg0KICAgICAgICBwYXNzDQogICAgZGVmIGYoc2VsZiwgYSk6DQogICAgICAgIHBhc3MNCiAgICBkZWYgZyhzZWxmKToNCiAgICAgICAgcGFzcw0KICAgIGZvbyA9ICdiYXInDQoNCiAgICBjbGFzcyBCYXIob2JqZWN0KToNCiAgICAgICAgZGVmIGEoc2VsZik6DQogICAgICAgICAgICBwYXNzDQoNCmZvb19uYW1lID0gJyVzLkZvbycgJSBfX25hbWVfXw0KDQoNCmRlZiBmdW5jdGlvbihhLCBiPUZvbyk6DQogICAgcGFzcw0KDQoNCmNsYXNzIENvbnRhaW5lcihvYmplY3QpOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKToNCiAgICAgICAgc2VsZi52YWx1ZXMgPSB7fQ0KDQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIG5hbWUpOg0KICAgICAgICByZXR1cm4gc2VsZi52YWx1ZXNbbmFtZV0NCg0KICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBuYW1lLCB2YWx1ZSk6DQogICAgICAgIHNlbGYudmFsdWVzW25hbWVdID0gdmFsdWUNCg0KICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBuYW1lKToNCiAgICAgICAgZGVsIHNlbGYudmFsdWVzW25hbWVdDQoNCiAgICBkZWYgX19pdGVyX18oc2VsZik6DQogICAgICAgIHJldHVybiBpdGVyKHNlbGYudmFsdWVzKQ0KDQoNCg0KY2xhc3MgUGF0Y2hUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiBhc3NlcnROb3RDYWxsYWJsZShzZWxmLCBvYmosIG1hZ2ljPVRydWUpOg0KICAgICAgICBNb2NrQ2xhc3MgPSBOb25DYWxsYWJsZU1hZ2ljTW9jaw0KICAgICAgICBpZiBub3QgbWFnaWM6DQogICAgICAgICAgICBNb2NrQ2xhc3MgPSBOb25DYWxsYWJsZU1vY2sNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG9iaikNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKG9iaiwgTW9ja0NsYXNzKSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShpc19pbnN0YW5jZShvYmosIENhbGxhYmxlTWl4aW4pKQ0KDQoNCiAgICBkZWYgdGVzdF9zaW5nbGVfcGF0Y2hvYmplY3Qoc2VsZik6DQogICAgICAgIGNsYXNzIFNvbWV0aGluZyhvYmplY3QpOg0KICAgICAgICAgICAgYXR0cmlidXRlID0gc2VudGluZWwuT3JpZ2luYWwNCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KFNvbWV0aGluZywgJ2F0dHJpYnV0ZScsIHNlbnRpbmVsLlBhdGNoZWQpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5hdHRyaWJ1dGUsIHNlbnRpbmVsLlBhdGNoZWQsICJ1bnBhdGNoZWQiKQ0KDQogICAgICAgIHRlc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5hdHRyaWJ1dGUsIHNlbnRpbmVsLk9yaWdpbmFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCBub3QgcmVzdG9yZWQiKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaG9iamVjdF93aXRoX25vbmUoc2VsZik6DQogICAgICAgIGNsYXNzIFNvbWV0aGluZyhvYmplY3QpOg0KICAgICAgICAgICAgYXR0cmlidXRlID0gc2VudGluZWwuT3JpZ2luYWwNCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KFNvbWV0aGluZywgJ2F0dHJpYnV0ZScsIE5vbmUpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydElzTm9uZShTb21ldGhpbmcuYXR0cmlidXRlLCAidW5wYXRjaGVkIikNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcuYXR0cmlidXRlLCBzZW50aW5lbC5PcmlnaW5hbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCg0KDQogICAgZGVmIHRlc3RfbXVsdGlwbGVfcGF0Y2hvYmplY3Qoc2VsZik6DQogICAgICAgIGNsYXNzIFNvbWV0aGluZyhvYmplY3QpOg0KICAgICAgICAgICAgYXR0cmlidXRlID0gc2VudGluZWwuT3JpZ2luYWwNCiAgICAgICAgICAgIG5leHRfYXR0cmlidXRlID0gc2VudGluZWwuT3JpZ2luYWwyDQoNCiAgICAgICAgQHBhdGNoLm9iamVjdChTb21ldGhpbmcsICdhdHRyaWJ1dGUnLCBzZW50aW5lbC5QYXRjaGVkKQ0KICAgICAgICBAcGF0Y2gub2JqZWN0KFNvbWV0aGluZywgJ25leHRfYXR0cmlidXRlJywgc2VudGluZWwuUGF0Y2hlZDIpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5hdHRyaWJ1dGUsIHNlbnRpbmVsLlBhdGNoZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1bnBhdGNoZWQiKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcubmV4dF9hdHRyaWJ1dGUsIHNlbnRpbmVsLlBhdGNoZWQyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5wYXRjaGVkIikNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcuYXR0cmlidXRlLCBzZW50aW5lbC5PcmlnaW5hbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcubmV4dF9hdHRyaWJ1dGUsIHNlbnRpbmVsLk9yaWdpbmFsMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCg0KDQogICAgZGVmIHRlc3Rfb2JqZWN0X2xvb2t1cF9pc19xdWl0ZV9sYXp5KHNlbGYpOg0KICAgICAgICBnbG9iYWwgc29tZXRoaW5nDQogICAgICAgIG9yaWdpbmFsID0gc29tZXRoaW5nDQogICAgICAgIEBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fLCBzZW50aW5lbC5Tb21ldGhpbmcyKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNvbWV0aGluZyA9IHNlbnRpbmVsLnJlcGxhY2VtZW50X3ZhbHVlDQogICAgICAgICAgICB0ZXN0KCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBzZW50aW5lbC5yZXBsYWNlbWVudF92YWx1ZSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHNvbWV0aGluZyA9IG9yaWdpbmFsDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoKHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLnNvbWV0aGluZycgJSBfX25hbWVfXywgc2VudGluZWwuU29tZXRoaW5nMikNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoUFRNb2R1bGUuc29tZXRoaW5nLCBzZW50aW5lbC5Tb21ldGhpbmcyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5wYXRjaGVkIikNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChQVE1vZHVsZS5zb21ldGhpbmcsIHNlbnRpbmVsLlNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCg0KICAgICAgICBAcGF0Y2goJyVzLnNvbWV0aGluZycgJSBfX25hbWVfXywgc2VudGluZWwuU29tZXRoaW5nMikNCiAgICAgICAgQHBhdGNoKCclcy5zb21ldGhpbmdfZWxzZScgJSBfX25hbWVfXywgc2VudGluZWwuU29tZXRoaW5nRWxzZSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoUFRNb2R1bGUuc29tZXRoaW5nLCBzZW50aW5lbC5Tb21ldGhpbmcyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5wYXRjaGVkIikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoUFRNb2R1bGUuc29tZXRoaW5nX2Vsc2UsIHNlbnRpbmVsLlNvbWV0aGluZ0Vsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1bnBhdGNoZWQiKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoUFRNb2R1bGUuc29tZXRoaW5nLCBzZW50aW5lbC5Tb21ldGhpbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgInBhdGNoIG5vdCByZXN0b3JlZCIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoUFRNb2R1bGUuc29tZXRoaW5nX2Vsc2UsIHNlbnRpbmVsLlNvbWV0aGluZ0Vsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgInBhdGNoIG5vdCByZXN0b3JlZCIpDQoNCiAgICAgICAgIyBUZXN0IHRoZSBwYXRjaGluZyBhbmQgcmVzdG9yaW5nIHdvcmtzIGEgc2Vjb25kIHRpbWUNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChQVE1vZHVsZS5zb21ldGhpbmcsIHNlbnRpbmVsLlNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChQVE1vZHVsZS5zb21ldGhpbmdfZWxzZSwgc2VudGluZWwuU29tZXRoaW5nRWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2sucmV0dXJuX3ZhbHVlID0gc2VudGluZWwuSGFuZGxlDQogICAgICAgIEBwYXRjaCgnJXMub3BlbicgJSBidWlsdGluX3N0cmluZywgbW9jaykNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwob3BlbignZmlsZW5hbWUnLCAncicpLCBzZW50aW5lbC5IYW5kbGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcGVuIG5vdCBwYXRjaGVkIikNCiAgICAgICAgdGVzdCgpDQogICAgICAgIHRlc3QoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwob3BlbiwgbW9jaywgInBhdGNoIG5vdCByZXN0b3JlZCIpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2NsYXNzX2F0dHJpYnV0ZShzZWxmKToNCiAgICAgICAgQHBhdGNoKCclcy5Tb21lQ2xhc3MuY2xhc3NfYXR0cmlidXRlJyAlIF9fbmFtZV9fLA0KICAgICAgICAgICAgICAgc2VudGluZWwuQ2xhc3NBdHRyaWJ1dGUpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFBUTW9kdWxlLlNvbWVDbGFzcy5jbGFzc19hdHRyaWJ1dGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRpbmVsLkNsYXNzQXR0cmlidXRlLCAidW5wYXRjaGVkIikNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vbmUoUFRNb2R1bGUuU29tZUNsYXNzLmNsYXNzX2F0dHJpYnV0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgInBhdGNoIG5vdCByZXN0b3JlZCIpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNob2JqZWN0X3dpdGhfZGVmYXVsdF9tb2NrKHNlbGYpOg0KICAgICAgICBjbGFzcyBUZXN0KG9iamVjdCk6DQogICAgICAgICAgICBzb21ldGhpbmcgPSBzZW50aW5lbC5PcmlnaW5hbA0KICAgICAgICAgICAgc29tZXRoaW5nMiA9IHNlbnRpbmVsLk9yaWdpbmFsMg0KDQogICAgICAgIEBwYXRjaC5vYmplY3QoVGVzdCwgJ3NvbWV0aGluZycpDQogICAgICAgIGRlZiB0ZXN0KG1vY2spOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLCBUZXN0LnNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1vY2sgbm90IHBhc3NlZCBpbnRvIHRlc3QgZnVuY3Rpb24iKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2ssIE1hZ2ljTW9jaywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggd2l0aCB0d28gYXJndW1lbnRzIGRpZCBub3QgY3JlYXRlIGEgbW9jayIpDQoNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgQHBhdGNoLm9iamVjdChUZXN0LCAnc29tZXRoaW5nJykNCiAgICAgICAgQHBhdGNoLm9iamVjdChUZXN0LCAnc29tZXRoaW5nMicpDQogICAgICAgIGRlZiB0ZXN0KHRoaXMxLCB0aGlzMiwgbW9jazEsIG1vY2syKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwodGhpczEsIHNlbnRpbmVsLnRoaXMxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUGF0Y2hlZCBmdW5jdGlvbiBkaWRuJ3QgcmVjZWl2ZSBpbml0aWFsIGFyZ3VtZW50IikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwodGhpczIsIHNlbnRpbmVsLnRoaXMyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUGF0Y2hlZCBmdW5jdGlvbiBkaWRuJ3QgcmVjZWl2ZSBzZWNvbmQgYXJndW1lbnQiKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrMSwgVGVzdC5zb21ldGhpbmcyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTW9jayBub3QgcGFzc2VkIGludG8gdGVzdCBmdW5jdGlvbiIpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2syLCBUZXN0LnNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNlY29uZCBNb2NrIG5vdCBwYXNzZWQgaW50byB0ZXN0IGZ1bmN0aW9uIikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrMiwgTWFnaWNNb2NrLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCB3aXRoIHR3byBhcmd1bWVudHMgZGlkIG5vdCBjcmVhdGUgYSBtb2NrIikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrMiwgTWFnaWNNb2NrLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCB3aXRoIHR3byBhcmd1bWVudHMgZGlkIG5vdCBjcmVhdGUgYSBtb2NrIikNCg0KICAgICAgICAgICAgIyBBIGhhY2sgdG8gdGVzdCB0aGF0IG5ldyBtb2NrcyBhcmUgcGFzc2VkIHRoZSBzZWNvbmQgdGltZQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChvdXRlck1vY2sxLCBtb2NrMSwgInVuZXhwZWN0ZWQgdmFsdWUgZm9yIG1vY2sxIikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwob3V0ZXJNb2NrMiwgbW9jazIsICJ1bmV4cGVjdGVkIHZhbHVlIGZvciBtb2NrMSIpDQogICAgICAgICAgICByZXR1cm4gbW9jazEsIG1vY2syDQoNCiAgICAgICAgb3V0ZXJNb2NrMSA9IG91dGVyTW9jazIgPSBOb25lDQogICAgICAgIG91dGVyTW9jazEsIG91dGVyTW9jazIgPSB0ZXN0KHNlbnRpbmVsLnRoaXMxLCBzZW50aW5lbC50aGlzMikNCg0KICAgICAgICAjIFRlc3QgdGhhdCBleGVjdXRpbmcgYSBzZWNvbmQgdGltZSBjcmVhdGVzIG5ldyBtb2Nrcw0KICAgICAgICB0ZXN0KHNlbnRpbmVsLnRoaXMxLCBzZW50aW5lbC50aGlzMikNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfd2l0aF9zcGVjKHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgc3BlYz1Tb21lQ2xhc3MpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tTb21lQ2xhc3MpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21lQ2xhc3MsIE1vY2tTb21lQ2xhc3MpDQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UoU29tZUNsYXNzLndpYmJsZSwgTWFnaWNNb2NrKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBsYW1iZGE6IFNvbWVDbGFzcy5ub3Rfd2liYmxlKQ0KDQogICAgICAgIHRlc3QoKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaG9iamVjdF93aXRoX3NwZWMoc2VsZik6DQogICAgICAgIEBwYXRjaC5vYmplY3QoU29tZUNsYXNzLCAnY2xhc3NfYXR0cmlidXRlJywgc3BlYz1Tb21lQ2xhc3MpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tBdHRyaWJ1dGUpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21lQ2xhc3MuY2xhc3NfYXR0cmlidXRlLCBNb2NrQXR0cmlidXRlKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKFNvbWVDbGFzcy5jbGFzc19hdHRyaWJ1dGUud2liYmxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFnaWNNb2NrKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFtYmRhOiBTb21lQ2xhc3MuY2xhc3NfYXR0cmlidXRlLm5vdF93aWJibGUpDQoNCiAgICAgICAgdGVzdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3dpdGhfc3BlY19hc19saXN0KHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgc3BlYz1bJ3dpYmJsZSddKQ0KICAgICAgICBkZWYgdGVzdChNb2NrU29tZUNsYXNzKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZUNsYXNzLCBNb2NrU29tZUNsYXNzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKFNvbWVDbGFzcy53aWJibGUsIE1hZ2ljTW9jaykpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgbGFtYmRhOiBTb21lQ2xhc3Mubm90X3dpYmJsZSkNCg0KICAgICAgICB0ZXN0KCkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hvYmplY3Rfd2l0aF9zcGVjX2FzX2xpc3Qoc2VsZik6DQogICAgICAgIEBwYXRjaC5vYmplY3QoU29tZUNsYXNzLCAnY2xhc3NfYXR0cmlidXRlJywgc3BlYz1bJ3dpYmJsZSddKQ0KICAgICAgICBkZWYgdGVzdChNb2NrQXR0cmlidXRlKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZUNsYXNzLmNsYXNzX2F0dHJpYnV0ZSwgTW9ja0F0dHJpYnV0ZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc19pbnN0YW5jZShTb21lQ2xhc3MuY2xhc3NfYXR0cmlidXRlLndpYmJsZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2ljTW9jaykpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbWJkYTogU29tZUNsYXNzLmNsYXNzX2F0dHJpYnV0ZS5ub3Rfd2liYmxlKQ0KDQogICAgICAgIHRlc3QoKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXN0ZWRfcGF0Y2hfd2l0aF9zcGVjX2FzX2xpc3Qoc2VsZik6DQogICAgICAgICMgcmVncmVzc2lvbiB0ZXN0IGZvciBuZXN0ZWQgZGVjb3JhdG9ycw0KICAgICAgICBAcGF0Y2goJyVzLm9wZW4nICUgYnVpbHRpbl9zdHJpbmcpDQogICAgICAgIEBwYXRjaCgnJXMuU29tZUNsYXNzJyAlIF9fbmFtZV9fLCBzcGVjPVsnd2liYmxlJ10pDQogICAgICAgIGRlZiB0ZXN0KE1vY2tTb21lQ2xhc3MsIE1vY2tPcGVuKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZUNsYXNzLCBNb2NrU29tZUNsYXNzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKFNvbWVDbGFzcy53aWJibGUsIE1hZ2ljTW9jaykpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgbGFtYmRhOiBTb21lQ2xhc3Mubm90X3dpYmJsZSkNCiAgICAgICAgdGVzdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3dpdGhfc3BlY19hc19ib29sZWFuKHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgc3BlYz1UcnVlKQ0KICAgICAgICBkZWYgdGVzdChNb2NrU29tZUNsYXNzKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZUNsYXNzLCBNb2NrU29tZUNsYXNzKQ0KICAgICAgICAgICAgIyBTaG91bGQgbm90IHJhaXNlIGF0dHJpYnV0ZSBlcnJvcg0KICAgICAgICAgICAgTW9ja1NvbWVDbGFzcy53aWJibGUNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGxhbWJkYTogTW9ja1NvbWVDbGFzcy5ub3Rfd2liYmxlKQ0KDQogICAgICAgIHRlc3QoKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9vYmplY3Rfd2l0aF9zcGVjX2FzX2Jvb2xlYW4oc2VsZik6DQogICAgICAgIEBwYXRjaC5vYmplY3QoUFRNb2R1bGUsICdTb21lQ2xhc3MnLCBzcGVjPVRydWUpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tTb21lQ2xhc3MpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21lQ2xhc3MsIE1vY2tTb21lQ2xhc3MpDQogICAgICAgICAgICAjIFNob3VsZCBub3QgcmFpc2UgYXR0cmlidXRlIGVycm9yDQogICAgICAgICAgICBNb2NrU29tZUNsYXNzLndpYmJsZQ0KDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgbGFtYmRhOiBNb2NrU29tZUNsYXNzLm5vdF93aWJibGUpDQoNCiAgICAgICAgdGVzdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2NsYXNzX2FjdHNfd2l0aF9zcGVjX2lzX2luaGVyaXRlZChzZWxmKToNCiAgICAgICAgQHBhdGNoKCclcy5Tb21lQ2xhc3MnICUgX19uYW1lX18sIHNwZWM9VHJ1ZSkNCiAgICAgICAgZGVmIHRlc3QoTW9ja1NvbWVDbGFzcyk6DQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UoTW9ja1NvbWVDbGFzcywgTWFnaWNNb2NrKSkNCiAgICAgICAgICAgIGluc3RhbmNlID0gTW9ja1NvbWVDbGFzcygpDQogICAgICAgICAgICBzZWxmLmFzc2VydE5vdENhbGxhYmxlKGluc3RhbmNlKQ0KICAgICAgICAgICAgIyBTaG91bGQgbm90IHJhaXNlIGF0dHJpYnV0ZSBlcnJvcg0KICAgICAgICAgICAgaW5zdGFuY2Uud2liYmxlDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBsYW1iZGE6IGluc3RhbmNlLm5vdF93aWJibGUpDQoNCiAgICAgICAgdGVzdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3dpdGhfY3JlYXRlX21vY2tzX25vbl9leGlzdGVudF9hdHRyaWJ1dGVzKHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLmZyb29ibGUnICUgYnVpbHRpbl9zdHJpbmcsIHNlbnRpbmVsLkZyb29ibGUsIGNyZWF0ZT1UcnVlKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmcm9vYmxlLCBzZW50aW5lbC5Gcm9vYmxlKQ0KDQogICAgICAgIHRlc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhOYW1lRXJyb3IsIGxhbWJkYTogZnJvb2JsZSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hvYmplY3Rfd2l0aF9jcmVhdGVfbW9ja3Nfbm9uX2V4aXN0ZW50X2F0dHJpYnV0ZXMoc2VsZik6DQogICAgICAgIEBwYXRjaC5vYmplY3QoU29tZUNsYXNzLCAnZnJvb2JsZScsIHNlbnRpbmVsLkZyb29ibGUsIGNyZWF0ZT1UcnVlKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21lQ2xhc3MuZnJvb2JsZSwgc2VudGluZWwuRnJvb2JsZSkNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKFNvbWVDbGFzcywgJ2Zyb29ibGUnKSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfd29udF9jcmVhdGVfYnlfZGVmYXVsdChzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgQHBhdGNoKCclcy5mcm9vYmxlJyAlIGJ1aWx0aW5fc3RyaW5nLCBzZW50aW5lbC5Gcm9vYmxlKQ0KICAgICAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZyb29ibGUsIHNlbnRpbmVsLkZyb29ibGUpDQoNCiAgICAgICAgICAgIHRlc3QoKQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoJ1BhdGNoaW5nIG5vbiBleGlzdGVudCBhdHRyaWJ1dGVzIHNob3VsZCBmYWlsJykNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhOYW1lRXJyb3IsIGxhbWJkYTogZnJvb2JsZSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hvYmplY3Rfd29udF9jcmVhdGVfYnlfZGVmYXVsdChzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgQHBhdGNoLm9iamVjdChTb21lQ2xhc3MsICdmcm9vYmxlJywgc2VudGluZWwuRnJvb2JsZSkNCiAgICAgICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCdQYXRjaGluZyBub24gZXhpc3RlbnQgYXR0cmlidXRlcyBzaG91bGQgZmFpbCcpDQoNCiAgICAgICAgICAgIHRlc3QoKQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoJ1BhdGNoaW5nIG5vbiBleGlzdGVudCBhdHRyaWJ1dGVzIHNob3VsZCBmYWlsJykNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKFNvbWVDbGFzcywgJ2Zyb29ibGUnKSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfd2l0aF9zdGF0aWNfbWV0aG9kcyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgd29vdCgpOg0KICAgICAgICAgICAgICAgIHJldHVybiBzZW50aW5lbC5TdGF0aWMNCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ3dvb3QnLCBzdGF0aWNtZXRob2QobGFtYmRhOiBzZW50aW5lbC5QYXRjaGVkKSkNCiAgICAgICAgZGVmIGFub255bW91cygpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28ud29vdCgpLCBzZW50aW5lbC5QYXRjaGVkKQ0KICAgICAgICBhbm9ueW1vdXMoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLndvb3QoKSwgc2VudGluZWwuU3RhdGljKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9sb2NhbChzZWxmKToNCiAgICAgICAgZm9vID0gc2VudGluZWwuRm9vDQogICAgICAgIEBwYXRjaC5vYmplY3Qoc2VudGluZWwsICdGb28nLCAnRm9vJykNCiAgICAgICAgZGVmIGFub255bW91cygpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzZW50aW5lbC5Gb28sICdGb28nKQ0KICAgICAgICBhbm9ueW1vdXMoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2VudGluZWwuRm9vLCBmb28pDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3Nsb3RzKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIF9fc2xvdHNfXyA9ICgnRm9vJywpDQoNCiAgICAgICAgZm9vID0gRm9vKCkNCiAgICAgICAgZm9vLkZvbyA9IHNlbnRpbmVsLkZvbw0KDQogICAgICAgIEBwYXRjaC5vYmplY3QoZm9vLCAnRm9vJywgJ0ZvbycpDQogICAgICAgIGRlZiBhbm9ueW1vdXMoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLkZvbywgJ0ZvbycpDQogICAgICAgIGFub255bW91cygpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28uRm9vLCBzZW50aW5lbC5Gb28pDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNob2JqZWN0X2NsYXNzX2RlY29yYXRvcihzZWxmKToNCiAgICAgICAgY2xhc3MgU29tZXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBhdHRyaWJ1dGUgPSBzZW50aW5lbC5PcmlnaW5hbA0KDQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIHRlc3RfbWV0aG9kKG90aGVyX3NlbGYpOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZXRoaW5nLmF0dHJpYnV0ZSwgc2VudGluZWwuUGF0Y2hlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1bnBhdGNoZWQiKQ0KICAgICAgICAgICAgZGVmIG5vdF90ZXN0X21ldGhvZChvdGhlcl9zZWxmKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5hdHRyaWJ1dGUsIHNlbnRpbmVsLk9yaWdpbmFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5vbi10ZXN0IG1ldGhvZCBwYXRjaGVkIikNCg0KICAgICAgICBGb28gPSBwYXRjaC5vYmplY3QoU29tZXRoaW5nLCAnYXR0cmlidXRlJywgc2VudGluZWwuUGF0Y2hlZCkoRm9vKQ0KDQogICAgICAgIGYgPSBGb28oKQ0KICAgICAgICBmLnRlc3RfbWV0aG9kKCkNCiAgICAgICAgZi5ub3RfdGVzdF9tZXRob2QoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZXRoaW5nLmF0dHJpYnV0ZSwgc2VudGluZWwuT3JpZ2luYWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgInBhdGNoIG5vdCByZXN0b3JlZCIpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2NsYXNzX2RlY29yYXRvcihzZWxmKToNCiAgICAgICAgY2xhc3MgU29tZXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBhdHRyaWJ1dGUgPSBzZW50aW5lbC5PcmlnaW5hbA0KDQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIHRlc3RfbWV0aG9kKG90aGVyX3NlbGYsIG1vY2tfc29tZXRoaW5nKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFBUTW9kdWxlLnNvbWV0aGluZywgbW9ja19zb21ldGhpbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5wYXRjaGVkIikNCiAgICAgICAgICAgIGRlZiBub3RfdGVzdF9tZXRob2Qob3RoZXJfc2VsZik6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChQVE1vZHVsZS5zb21ldGhpbmcsIHNlbnRpbmVsLlNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJub24tdGVzdCBtZXRob2QgcGF0Y2hlZCIpDQogICAgICAgIEZvbyA9IHBhdGNoKCclcy5zb21ldGhpbmcnICUgX19uYW1lX18pKEZvbykNCg0KICAgICAgICBmID0gRm9vKCkNCiAgICAgICAgZi50ZXN0X21ldGhvZCgpDQogICAgICAgIGYubm90X3Rlc3RfbWV0aG9kKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5hdHRyaWJ1dGUsIHNlbnRpbmVsLk9yaWdpbmFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCBub3QgcmVzdG9yZWQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFBUTW9kdWxlLnNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCBub3QgcmVzdG9yZWQiKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaG9iamVjdF90d2ljZShzZWxmKToNCiAgICAgICAgY2xhc3MgU29tZXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBhdHRyaWJ1dGUgPSBzZW50aW5lbC5PcmlnaW5hbA0KICAgICAgICAgICAgbmV4dF9hdHRyaWJ1dGUgPSBzZW50aW5lbC5PcmlnaW5hbDINCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KFNvbWV0aGluZywgJ2F0dHJpYnV0ZScsIHNlbnRpbmVsLlBhdGNoZWQpDQogICAgICAgIEBwYXRjaC5vYmplY3QoU29tZXRoaW5nLCAnYXR0cmlidXRlJywgc2VudGluZWwuUGF0Y2hlZCkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoU29tZXRoaW5nLmF0dHJpYnV0ZSwgc2VudGluZWwuUGF0Y2hlZCwgInVucGF0Y2hlZCIpDQoNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcuYXR0cmlidXRlLCBzZW50aW5lbC5PcmlnaW5hbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAicGF0Y2ggbm90IHJlc3RvcmVkIikNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfZGljdChzZWxmKToNCiAgICAgICAgZm9vID0geydpbml0aWFsJzogb2JqZWN0KCksICdvdGhlcic6ICdzb21ldGhpbmcnfQ0KICAgICAgICBvcmlnaW5hbCA9IGZvby5jb3B5KCkNCg0KICAgICAgICBAcGF0Y2guZGljdChmb28pDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBmb29bJ2EnXSA9IDMNCiAgICAgICAgICAgIGRlbCBmb29bJ2luaXRpYWwnXQ0KICAgICAgICAgICAgZm9vWydvdGhlciddID0gJ3NvbWV0aGluZyBlbHNlJw0KDQogICAgICAgIHRlc3QoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLCBvcmlnaW5hbCkNCg0KICAgICAgICBAcGF0Y2guZGljdChmb28sIHsnYSc6ICdiJ30pDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihmb28pLCAzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb29bJ2EnXSwgJ2InKQ0KDQogICAgICAgIHRlc3QoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLCBvcmlnaW5hbCkNCg0KICAgICAgICBAcGF0Y2guZGljdChmb28sIFsoJ2EnLCAnYicpXSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKGZvbyksIDMpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvb1snYSddLCAnYicpDQoNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9kaWN0X3dpdGhfY29udGFpbmVyX29iamVjdChzZWxmKToNCiAgICAgICAgZm9vID0gQ29udGFpbmVyKCkNCiAgICAgICAgZm9vWydpbml0aWFsJ10gPSBvYmplY3QoKQ0KICAgICAgICBmb29bJ290aGVyJ10gPSAgJ3NvbWV0aGluZycNCg0KICAgICAgICBvcmlnaW5hbCA9IGZvby52YWx1ZXMuY29weSgpDQoNCiAgICAgICAgQHBhdGNoLmRpY3QoZm9vKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgZm9vWydhJ10gPSAzDQogICAgICAgICAgICBkZWwgZm9vWydpbml0aWFsJ10NCiAgICAgICAgICAgIGZvb1snb3RoZXInXSA9ICdzb21ldGhpbmcgZWxzZScNCg0KICAgICAgICB0ZXN0KCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby52YWx1ZXMsIG9yaWdpbmFsKQ0KDQogICAgICAgIEBwYXRjaC5kaWN0KGZvbywgeydhJzogJ2InfSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKGZvby52YWx1ZXMpLCAzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb29bJ2EnXSwgJ2InKQ0KDQogICAgICAgIHRlc3QoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLnZhbHVlcywgb3JpZ2luYWwpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2RpY3Rfd2l0aF9jbGVhcihzZWxmKToNCiAgICAgICAgZm9vID0geydpbml0aWFsJzogb2JqZWN0KCksICdvdGhlcic6ICdzb21ldGhpbmcnfQ0KICAgICAgICBvcmlnaW5hbCA9IGZvby5jb3B5KCkNCg0KICAgICAgICBAcGF0Y2guZGljdChmb28sIGNsZWFyPVRydWUpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvbywge30pDQogICAgICAgICAgICBmb29bJ2EnXSA9IDMNCiAgICAgICAgICAgIGZvb1snb3RoZXInXSA9ICdzb21ldGhpbmcgZWxzZScNCg0KICAgICAgICB0ZXN0KCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvbywgb3JpZ2luYWwpDQoNCiAgICAgICAgQHBhdGNoLmRpY3QoZm9vLCB7J2EnOiAnYid9LCBjbGVhcj1UcnVlKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIHsnYSc6ICdiJ30pDQoNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIG9yaWdpbmFsKQ0KDQogICAgICAgIEBwYXRjaC5kaWN0KGZvbywgWygnYScsICdiJyldLCBjbGVhcj1UcnVlKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIHsnYSc6ICdiJ30pDQoNCiAgICAgICAgdGVzdCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9kaWN0X3dpdGhfY29udGFpbmVyX29iamVjdF9hbmRfY2xlYXIoc2VsZik6DQogICAgICAgIGZvbyA9IENvbnRhaW5lcigpDQogICAgICAgIGZvb1snaW5pdGlhbCddID0gb2JqZWN0KCkNCiAgICAgICAgZm9vWydvdGhlciddID0gICdzb21ldGhpbmcnDQoNCiAgICAgICAgb3JpZ2luYWwgPSBmb28udmFsdWVzLmNvcHkoKQ0KDQogICAgICAgIEBwYXRjaC5kaWN0KGZvbywgY2xlYXI9VHJ1ZSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLnZhbHVlcywge30pDQogICAgICAgICAgICBmb29bJ2EnXSA9IDMNCiAgICAgICAgICAgIGZvb1snb3RoZXInXSA9ICdzb21ldGhpbmcgZWxzZScNCg0KICAgICAgICB0ZXN0KCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby52YWx1ZXMsIG9yaWdpbmFsKQ0KDQogICAgICAgIEBwYXRjaC5kaWN0KGZvbywgeydhJzogJ2InfSwgY2xlYXI9VHJ1ZSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLnZhbHVlcywgeydhJzogJ2InfSkNCg0KICAgICAgICB0ZXN0KCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby52YWx1ZXMsIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF9uYW1lX3ByZXNlcnZlZChzZWxmKToNCiAgICAgICAgZm9vID0ge30NCg0KICAgICAgICBAcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgb2JqZWN0KCkpDQogICAgICAgIEBwYXRjaCgnJXMuU29tZUNsYXNzJyAlIF9fbmFtZV9fLCBvYmplY3QoKSwgYXV0b3NwZWM9VHJ1ZSkNCiAgICAgICAgQHBhdGNoLm9iamVjdChTb21lQ2xhc3MsIG9iamVjdCgpKQ0KICAgICAgICBAcGF0Y2guZGljdChmb28pDQogICAgICAgIGRlZiBzb21lX25hbWUoKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWVfbmFtZS5fX25hbWVfXywgJ3NvbWVfbmFtZScpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3dpdGhfZXhjZXB0aW9uKHNlbGYpOg0KICAgICAgICBmb28gPSB7fQ0KDQogICAgICAgIEBwYXRjaC5kaWN0KGZvbywgeydhJzogJ2InfSkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHJhaXNlIE5hbWVFcnJvcignS29ucmFkJykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGVzdCgpDQogICAgICAgIGV4Y2VwdCBOYW1lRXJyb3I6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoJ05hbWVFcnJvciBub3QgcmFpc2VkIGJ5IHRlc3QnKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLCB7fSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfZGljdF93aXRoX3N0cmluZyhzZWxmKToNCiAgICAgICAgQHBhdGNoLmRpY3QoJ29zLmVudmlyb24nLCB7J2tvbnJhZF9kZWxvbmcnOiAnc29tZSB2YWx1ZSd9KQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigna29ucmFkX2RlbG9uZycsIG9zLmVudmlyb24pDQoNCiAgICAgICAgdGVzdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2Rlc2NyaXB0b3Ioc2VsZik6DQogICAgICAgICMgd291bGQgYmUgc29tZSBlZmZvcnQgdG8gZml4IHRoaXMgLSB3ZSBjb3VsZCBzcGVjaWFsIGNhc2UgdGhlDQogICAgICAgICMgYnVpbHRpbiBkZXNjcmlwdG9yczogY2xhc3NtZXRob2QsIHByb3BlcnR5LCBzdGF0aWNtZXRob2QNCiAgICAgICAgcmV0dXJuDQogICAgICAgIGNsYXNzIE5vdGhpbmcob2JqZWN0KToNCiAgICAgICAgICAgIGZvbyA9IE5vbmUNCg0KICAgICAgICBjbGFzcyBTb21ldGhpbmcob2JqZWN0KToNCiAgICAgICAgICAgIGZvbyA9IHt9DQoNCiAgICAgICAgICAgIEBwYXRjaC5vYmplY3QoTm90aGluZywgJ2ZvbycsIDIpDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBrbGFzcyhjbHMpOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoY2xzLCBTb21ldGhpbmcpDQoNCiAgICAgICAgICAgIEBwYXRjaC5vYmplY3QoTm90aGluZywgJ2ZvbycsIDIpDQogICAgICAgICAgICBAc3RhdGljbWV0aG9kDQogICAgICAgICAgICBkZWYgc3RhdGljKGFyZyk6DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyZw0KDQogICAgICAgICAgICBAcGF0Y2guZGljdChmb28pDQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBrbGFzc19kaWN0KGNscyk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhjbHMsIFNvbWV0aGluZykNCg0KICAgICAgICAgICAgQHBhdGNoLmRpY3QoZm9vKQ0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIHN0YXRpY19kaWN0KGFyZyk6DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyZw0KDQogICAgICAgICMgdGhlc2Ugd2lsbCByYWlzZSBleGNlcHRpb25zIGlmIHBhdGNoaW5nIGRlc2NyaXB0b3JzIGlzIGJyb2tlbg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFNvbWV0aGluZy5zdGF0aWMoJ2YwMCcpLCAnZjAwJykNCiAgICAgICAgU29tZXRoaW5nLmtsYXNzKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChTb21ldGhpbmcuc3RhdGljX2RpY3QoJ2YwMCcpLCAnZjAwJykNCiAgICAgICAgU29tZXRoaW5nLmtsYXNzX2RpY3QoKQ0KDQogICAgICAgIHNvbWV0aGluZyA9IFNvbWV0aGluZygpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLnN0YXRpYygnZjAwJyksICdmMDAnKQ0KICAgICAgICBzb21ldGhpbmcua2xhc3MoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZy5zdGF0aWNfZGljdCgnZjAwJyksICdmMDAnKQ0KICAgICAgICBzb21ldGhpbmcua2xhc3NfZGljdCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3NwZWNfc2V0KHNlbGYpOg0KICAgICAgICBAcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgc3BlYz1Tb21lQ2xhc3MsIHNwZWNfc2V0PVRydWUpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tDbGFzcyk6DQogICAgICAgICAgICBNb2NrQ2xhc3MueiA9ICdmb28nDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHRlc3QpDQoNCiAgICAgICAgQHBhdGNoLm9iamVjdChzdXBwb3J0LCAnU29tZUNsYXNzJywgc3BlYz1Tb21lQ2xhc3MsIHNwZWNfc2V0PVRydWUpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tDbGFzcyk6DQogICAgICAgICAgICBNb2NrQ2xhc3MueiA9ICdmb28nDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHRlc3QpDQogICAgICAgIEBwYXRjaCgnJXMuU29tZUNsYXNzJyAlIF9fbmFtZV9fLCBzcGVjX3NldD1UcnVlKQ0KICAgICAgICBkZWYgdGVzdChNb2NrQ2xhc3MpOg0KICAgICAgICAgICAgTW9ja0NsYXNzLnogPSAnZm9vJw0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCB0ZXN0KQ0KDQogICAgICAgIEBwYXRjaC5vYmplY3Qoc3VwcG9ydCwgJ1NvbWVDbGFzcycsIHNwZWNfc2V0PVRydWUpDQogICAgICAgIGRlZiB0ZXN0KE1vY2tDbGFzcyk6DQogICAgICAgICAgICBNb2NrQ2xhc3MueiA9ICdmb28nDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHRlc3QpDQoNCg0KICAgIGRlZiB0ZXN0X3NwZWNfc2V0X2luaGVyaXQoc2VsZik6DQogICAgICAgIEBwYXRjaCgnJXMuU29tZUNsYXNzJyAlIF9fbmFtZV9fLCBzcGVjX3NldD1UcnVlKQ0KICAgICAgICBkZWYgdGVzdChNb2NrQ2xhc3MpOg0KICAgICAgICAgICAgaW5zdGFuY2UgPSBNb2NrQ2xhc3MoKQ0KICAgICAgICAgICAgaW5zdGFuY2UueiA9ICdmb28nDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHRlc3QpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3N0YXJ0X3N0b3Aoc2VsZik6DQogICAgICAgIG9yaWdpbmFsID0gc29tZXRoaW5nDQogICAgICAgIHBhdGNoZXIgPSBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fKQ0KICAgICAgICBzZWxmLmFzc2VydElzKHNvbWV0aGluZywgb3JpZ2luYWwpDQogICAgICAgIG1vY2sgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJc05vdChtb2NrLCBvcmlnaW5hbCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoc29tZXRoaW5nLCBtb2NrKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcGF0Y2hlci5zdG9wKCkNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhzb21ldGhpbmcsIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF9zdG9wX3dpdGhvdXRfc3RhcnQoc2VsZik6DQogICAgICAgIHBhdGNoZXIgPSBwYXRjaChmb29fbmFtZSwgJ2JhcicsIDMpDQoNCiAgICAgICAgIyBjYWxsaW5nIHN0b3Agd2l0aG91dCBzdGFydCB1c2VkIHRvIHByb2R1Y2UgYSB2ZXJ5IG9ic2N1cmUgZXJyb3INCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoUnVudGltZUVycm9yLCBwYXRjaGVyLnN0b3ApDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNob2JqZWN0X3N0YXJ0X3N0b3Aoc2VsZik6DQogICAgICAgIG9yaWdpbmFsID0gc29tZXRoaW5nDQogICAgICAgIHBhdGNoZXIgPSBwYXRjaC5vYmplY3QoUFRNb2R1bGUsICdzb21ldGhpbmcnLCAnZm9vJykNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhzb21ldGhpbmcsIG9yaWdpbmFsKQ0KICAgICAgICByZXBsYWNlZCA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlcGxhY2VkLCAnZm9vJykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoc29tZXRoaW5nLCByZXBsYWNlZCkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMoc29tZXRoaW5nLCBvcmlnaW5hbCkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfZGljdF9zdGFydF9zdG9wKHNlbGYpOg0KICAgICAgICBkID0geydmb28nOiAnYmFyJ30NCiAgICAgICAgb3JpZ2luYWwgPSBkLmNvcHkoKQ0KICAgICAgICBwYXRjaGVyID0gcGF0Y2guZGljdChkLCBbKCdzcGFtJywgJ2VnZ3MnKV0sIGNsZWFyPVRydWUpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZCwgb3JpZ2luYWwpDQoNCiAgICAgICAgcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZCwgeydzcGFtJzogJ2VnZ3MnfSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZCwgb3JpZ2luYWwpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2RpY3RfY2xhc3NfZGVjb3JhdG9yKHNlbGYpOg0KICAgICAgICB0aGlzID0gc2VsZg0KICAgICAgICBkID0geydzcGFtJzogJ2VnZ3MnfQ0KICAgICAgICBvcmlnaW5hbCA9IGQuY29weSgpDQoNCiAgICAgICAgY2xhc3MgVGVzdChvYmplY3QpOg0KICAgICAgICAgICAgZGVmIHRlc3RfZmlyc3Qoc2VsZik6DQogICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRFcXVhbChkLCB7J2Zvbyc6ICdiYXInfSkNCiAgICAgICAgICAgIGRlZiB0ZXN0X3NlY29uZChzZWxmKToNCiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydEVxdWFsKGQsIHsnZm9vJzogJ2Jhcid9KQ0KDQogICAgICAgIFRlc3QgPSBwYXRjaC5kaWN0KGQsIHsnZm9vJzogJ2Jhcid9LCBjbGVhcj1UcnVlKShUZXN0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGQsIG9yaWdpbmFsKQ0KDQogICAgICAgIHRlc3QgPSBUZXN0KCkNCg0KICAgICAgICB0ZXN0LnRlc3RfZmlyc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGQsIG9yaWdpbmFsKQ0KDQogICAgICAgIHRlc3QudGVzdF9zZWNvbmQoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGQsIG9yaWdpbmFsKQ0KDQogICAgICAgIHRlc3QgPSBUZXN0KCkNCg0KICAgICAgICB0ZXN0LnRlc3RfZmlyc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGQsIG9yaWdpbmFsKQ0KDQogICAgICAgIHRlc3QudGVzdF9zZWNvbmQoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGQsIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF9nZXRfb25seV9wcm94eShzZWxmKToNCiAgICAgICAgY2xhc3MgU29tZXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBmb28gPSAnZm9vJw0KICAgICAgICBjbGFzcyBTb21ldGhpbmdFbHNlOg0KICAgICAgICAgICAgZm9vID0gJ2ZvbycNCg0KICAgICAgICBmb3IgdGhpbmcgaW4gU29tZXRoaW5nLCBTb21ldGhpbmdFbHNlLCBTb21ldGhpbmcoKSwgU29tZXRoaW5nRWxzZToNCiAgICAgICAgICAgIHByb3h5ID0gX2dldF9wcm94eSh0aGluZykNCg0KICAgICAgICAgICAgQHBhdGNoLm9iamVjdChwcm94eSwgJ2ZvbycsICdiYXInKQ0KICAgICAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHByb3h5LmZvbywgJ2JhcicpDQogICAgICAgICAgICB0ZXN0KCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJveHkuZm9vLCAnZm9vJykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwodGhpbmcuZm9vLCAnZm9vJykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90SW4oJ2ZvbycsIHByb3h5Ll9fZGljdF9fKQ0KDQoNCiAgICBkZWYgdGVzdF9nZXRfc2V0X2RlbGV0ZV9wcm94eShzZWxmKToNCiAgICAgICAgY2xhc3MgU29tZXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBmb28gPSAnZm9vJw0KICAgICAgICBjbGFzcyBTb21ldGhpbmdFbHNlOg0KICAgICAgICAgICAgZm9vID0gJ2ZvbycNCg0KICAgICAgICBmb3IgdGhpbmcgaW4gU29tZXRoaW5nLCBTb21ldGhpbmdFbHNlLCBTb21ldGhpbmcoKSwgU29tZXRoaW5nRWxzZToNCiAgICAgICAgICAgIHByb3h5ID0gX2dldF9wcm94eShTb21ldGhpbmcsIGdldF9vbmx5PUZhbHNlKQ0KDQogICAgICAgICAgICBAcGF0Y2gub2JqZWN0KHByb3h5LCAnZm9vJywgJ2JhcicpDQogICAgICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocHJveHkuZm9vLCAnYmFyJykNCiAgICAgICAgICAgIHRlc3QoKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwcm94eS5mb28sICdmb28nKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCh0aGluZy5mb28sICdmb28nKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnROb3RJbignZm9vJywgcHJveHkuX19kaWN0X18pDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2tleXdvcmRfYXJncyhzZWxmKToNCiAgICAgICAga3dhcmdzID0geydzaWRlX2VmZmVjdCc6IEtleUVycm9yLCAnZm9vLmJhci5yZXR1cm5fdmFsdWUnOiAzMywNCiAgICAgICAgICAgICAgICAgICdmb28nOiBNYWdpY01vY2soKX0NCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2goZm9vX25hbWUsICoqa3dhcmdzKQ0KICAgICAgICBtb2NrID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoS2V5RXJyb3IsIG1vY2spDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5mb28uYmFyKCksIDMzKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jay5mb28sIE1hZ2ljTW9jaykNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfb2JqZWN0X2tleXdvcmRfYXJncyhzZWxmKToNCiAgICAgICAga3dhcmdzID0geydzaWRlX2VmZmVjdCc6IEtleUVycm9yLCAnZm9vLmJhci5yZXR1cm5fdmFsdWUnOiAzMywNCiAgICAgICAgICAgICAgICAgICdmb28nOiBNYWdpY01vY2soKX0NCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2gub2JqZWN0KEZvbywgJ2YnLCAqKmt3YXJncykNCiAgICAgICAgbW9jayA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICBwYXRjaGVyLnN0b3AoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suZm9vLmJhcigpLCAzMykNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2suZm9vLCBNYWdpY01vY2spDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2RpY3Rfa2V5d29yZF9hcmdzKHNlbGYpOg0KICAgICAgICBvcmlnaW5hbCA9IHsnZm9vJzogJ2Jhcid9DQogICAgICAgIGNvcHkgPSBvcmlnaW5hbC5jb3B5KCkNCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2guZGljdChvcmlnaW5hbCwgZm9vPTMsIGJhcj00LCBiYXo9NSkNCiAgICAgICAgcGF0Y2hlci5zdGFydCgpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvcmlnaW5hbCwgZGljdChmb289MywgYmFyPTQsIGJhej01KSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChvcmlnaW5hbCwgY29weSkNCg0KDQogICAgZGVmIHRlc3RfYXV0b3NwZWMoc2VsZik6DQogICAgICAgIGNsYXNzIEJvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIGEpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiBmKHNlbGYsIGEpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGRlZiBnKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGZvbyA9ICdiYXInDQoNCiAgICAgICAgICAgIGNsYXNzIEJhcihvYmplY3QpOg0KICAgICAgICAgICAgICAgIGRlZiBhKHNlbGYpOg0KICAgICAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgZGVmIF90ZXN0KG1vY2spOg0KICAgICAgICAgICAgbW9jaygxKQ0KICAgICAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX3dpdGgoMSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCg0KICAgICAgICBkZWYgX3Rlc3QyKG1vY2spOg0KICAgICAgICAgICAgbW9jay5mKDEpDQogICAgICAgICAgICBtb2NrLmYuYXNzZXJ0X2NhbGxlZF93aXRoKDEpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2suZikNCg0KICAgICAgICAgICAgbW9jay5nKCkNCiAgICAgICAgICAgIG1vY2suZy5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrLmcsIDEpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLCAnaCcpDQoNCiAgICAgICAgICAgIG1vY2suZm9vLmxvd2VyKCkNCiAgICAgICAgICAgIG1vY2suZm9vLmxvd2VyLmFzc2VydF9jYWxsZWRfd2l0aCgpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgbW9jay5mb28sICdiYXInKQ0KDQogICAgICAgICAgICBtb2NrLkJhcigpDQogICAgICAgICAgICBtb2NrLkJhci5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KDQogICAgICAgICAgICBtb2NrLkJhci5hKCkNCiAgICAgICAgICAgIG1vY2suQmFyLmEuYXNzZXJ0X2NhbGxlZF93aXRoKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jay5CYXIuYSwgMSkNCg0KICAgICAgICAgICAgbW9jay5CYXIoKS5hKCkNCiAgICAgICAgICAgIG1vY2suQmFyKCkuYS5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrLkJhcigpLmEsIDEpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLkJhciwgJ2InKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2suQmFyKCksICdiJykNCg0KICAgICAgICBkZWYgZnVuY3Rpb24obW9jayk6DQogICAgICAgICAgICBfdGVzdChtb2NrKQ0KICAgICAgICAgICAgX3Rlc3QyKG1vY2spDQogICAgICAgICAgICBfdGVzdDIobW9jaygxKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMobW9jaywgRm9vKQ0KICAgICAgICAgICAgcmV0dXJuIG1vY2sNCg0KICAgICAgICB0ZXN0ID0gcGF0Y2goZm9vX25hbWUsIGF1dG9zcGVjPVRydWUpKGZ1bmN0aW9uKQ0KDQogICAgICAgIG1vY2sgPSB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdChGb28sIG1vY2spDQogICAgICAgICMgdGVzdCBwYXRjaGluZyBhIHNlY29uZCB0aW1lIHdvcmtzDQogICAgICAgIHRlc3QoKQ0KDQogICAgICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW19fbmFtZV9fXQ0KICAgICAgICB0ZXN0ID0gcGF0Y2gub2JqZWN0KG1vZHVsZSwgJ0ZvbycsIGF1dG9zcGVjPVRydWUpKGZ1bmN0aW9uKQ0KDQogICAgICAgIG1vY2sgPSB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdChGb28sIG1vY2spDQogICAgICAgICMgdGVzdCBwYXRjaGluZyBhIHNlY29uZCB0aW1lIHdvcmtzDQogICAgICAgIHRlc3QoKQ0KDQoNCiAgICBkZWYgdGVzdF9hdXRvc3BlY19mdW5jdGlvbihzZWxmKToNCiAgICAgICAgQHBhdGNoKCclcy5mdW5jdGlvbicgJSBfX25hbWVfXywgYXV0b3NwZWM9VHJ1ZSkNCiAgICAgICAgZGVmIHRlc3QobW9jayk6DQogICAgICAgICAgICBmdW5jdGlvbigxKQ0KICAgICAgICAgICAgZnVuY3Rpb24uYXNzZXJ0X2NhbGxlZF93aXRoKDEpDQogICAgICAgICAgICBmdW5jdGlvbigyLCAzKQ0KICAgICAgICAgICAgZnVuY3Rpb24uYXNzZXJ0X2NhbGxlZF93aXRoKDIsIDMpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgZnVuY3Rpb24pDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgZnVuY3Rpb24sICdmb28nKQ0KDQogICAgICAgIHRlc3QoKQ0KDQoNCiAgICBkZWYgdGVzdF9hdXRvc3BlY19rZXl3b3JkcyhzZWxmKToNCiAgICAgICAgQHBhdGNoKCclcy5mdW5jdGlvbicgJSBfX25hbWVfXywgYXV0b3NwZWM9VHJ1ZSwNCiAgICAgICAgICAgICAgIHJldHVybl92YWx1ZT0zKQ0KICAgICAgICBkZWYgdGVzdChtb2NrX2Z1bmN0aW9uKToNCiAgICAgICAgICAgICNzZWxmLmFzc2VydEVxdWFsKGZ1bmN0aW9uLmFiYywgJ2ZvbycpDQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oMSwgMikNCg0KICAgICAgICByZXN1bHQgPSB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQsIDMpDQoNCg0KICAgIGRlZiB0ZXN0X2F1dG9zcGVjX3dpdGhfbmV3KHNlbGYpOg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2goJyVzLmZ1bmN0aW9uJyAlIF9fbmFtZV9fLCBuZXc9MywgYXV0b3NwZWM9VHJ1ZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBwYXRjaGVyLnN0YXJ0KQ0KDQogICAgICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW19fbmFtZV9fXQ0KICAgICAgICBwYXRjaGVyID0gcGF0Y2gub2JqZWN0KG1vZHVsZSwgJ2Z1bmN0aW9uJywgbmV3PTMsIGF1dG9zcGVjPVRydWUpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgcGF0Y2hlci5zdGFydCkNCg0KDQogICAgZGVmIHRlc3RfYXV0b3NwZWNfd2l0aF9vYmplY3Qoc2VsZik6DQogICAgICAgIGNsYXNzIEJhcihGb28pOg0KICAgICAgICAgICAgZXh0cmEgPSBbXQ0KDQogICAgICAgIHBhdGNoZXIgPSBwYXRjaChmb29fbmFtZSwgYXV0b3NwZWM9QmFyKQ0KICAgICAgICBtb2NrID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrLCBCYXIpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jay5leHRyYSwgbGlzdCkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X2F1dG9zcGVjX2luaGVyaXRzKHNlbGYpOg0KICAgICAgICBGb29DbGFzcyA9IEZvbw0KICAgICAgICBwYXRjaGVyID0gcGF0Y2goZm9vX25hbWUsIGF1dG9zcGVjPVRydWUpDQogICAgICAgIG1vY2sgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2ssIEZvb0NsYXNzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2soMyksIEZvb0NsYXNzKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcGF0Y2hlci5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfYXV0b3NwZWNfbmFtZShzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKGZvb19uYW1lLCBhdXRvc3BlYz1UcnVlKQ0KICAgICAgICBtb2NrID0gcGF0Y2hlci5zdGFydCgpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J0ZvbyciLCByZXByKG1vY2spKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J0Zvby5mJyIsIHJlcHIobW9jay5mKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIiBuYW1lPSdGb28oKSciLCByZXByKG1vY2soTm9uZSkpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J0ZvbygpLmYnIiwgcmVwcihtb2NrKE5vbmUpLmYpKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcGF0Y2hlci5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfdHJhY2ViYWNrcyhzZWxmKToNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdmJywgb2JqZWN0KCkpDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICByYWlzZSBBc3NlcnRpb25FcnJvcg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0ZXN0KCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgZXJyID0gc3lzLmV4Y19pbmZvKCkNCg0KICAgICAgICByZXN1bHQgPSB1bml0dGVzdC5UZXh0VGVzdFJlc3VsdChOb25lLCBOb25lLCAwKQ0KICAgICAgICB0cmFjZWJhY2sgPSByZXN1bHQuX2V4Y19pbmZvX3RvX3N0cmluZyhlcnIsIHNlbGYpDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oJ3JhaXNlIEFzc2VydGlvbkVycm9yJywgdHJhY2ViYWNrKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfcGF0Y2goc2VsZik6DQogICAgICAgIHBhdGNoZXIgPSBwYXRjaChmb29fbmFtZSwgbmV3X2NhbGxhYmxlPU5vbkNhbGxhYmxlTWFnaWNNb2NrKQ0KDQogICAgICAgIG0xID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHBhdGNoZXIuc3RvcCgpDQogICAgICAgIG0yID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdChtMSwgbTIpDQogICAgICAgIGZvciBtb2NrIGluIG0xLCBtMjoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90Q2FsbGFibGUobTEpDQoNCg0KICAgIGRlZiB0ZXN0X25ld19jYWxsYWJsZV9wYXRjaF9vYmplY3Qoc2VsZik6DQogICAgICAgIHBhdGNoZXIgPSBwYXRjaC5vYmplY3QoRm9vLCAnZicsIG5ld19jYWxsYWJsZT1Ob25DYWxsYWJsZU1hZ2ljTW9jaykNCg0KICAgICAgICBtMSA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICBwYXRjaGVyLnN0b3AoKQ0KICAgICAgICBtMiA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICBwYXRjaGVyLnN0b3AoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb3QobTEsIG0yKQ0KICAgICAgICBmb3IgbW9jayBpbiBtMSwgbTI6DQogICAgICAgICAgICBzZWxmLmFzc2VydE5vdENhbGxhYmxlKG0xKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfa2V5d29yZF9hcmd1bWVudHMoc2VsZik6DQogICAgICAgIGNsYXNzIEJhcihvYmplY3QpOg0KICAgICAgICAgICAga3dhcmdzID0gTm9uZQ0KICAgICAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsICoqa3dhcmdzKToNCiAgICAgICAgICAgICAgICBCYXIua3dhcmdzID0ga3dhcmdzDQoNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKGZvb19uYW1lLCBuZXdfY2FsbGFibGU9QmFyLCBhcmcxPTEsIGFyZzI9MikNCiAgICAgICAgbSA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydElzKHR5cGUobSksIEJhcikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoQmFyLmt3YXJncywgZGljdChhcmcxPTEsIGFyZzI9MikpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBwYXRjaGVyLnN0b3AoKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfc3BlYyhzZWxmKToNCiAgICAgICAgY2xhc3MgQmFyKG9iamVjdCk6DQogICAgICAgICAgICBrd2FyZ3MgPSBOb25lDQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgKiprd2FyZ3MpOg0KICAgICAgICAgICAgICAgIEJhci5rd2FyZ3MgPSBrd2FyZ3MNCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2goZm9vX25hbWUsIG5ld19jYWxsYWJsZT1CYXIsIHNwZWM9QmFyKQ0KICAgICAgICBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChCYXIua3dhcmdzLCBkaWN0KHNwZWM9QmFyKSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKGZvb19uYW1lLCBuZXdfY2FsbGFibGU9QmFyLCBzcGVjX3NldD1CYXIpDQogICAgICAgIHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEJhci5rd2FyZ3MsIGRpY3Qoc3BlY19zZXQ9QmFyKSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X25ld19jYWxsYWJsZV9jcmVhdGUoc2VsZik6DQogICAgICAgIG5vbl9leGlzdGVudF9hdHRyID0gJyVzLndlZWVlZScgJSBmb29fbmFtZQ0KICAgICAgICBwID0gcGF0Y2gobm9uX2V4aXN0ZW50X2F0dHIsIG5ld19jYWxsYWJsZT1Ob25DYWxsYWJsZU1vY2spDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBwLnN0YXJ0KQ0KDQogICAgICAgIHAgPSBwYXRjaChub25fZXhpc3RlbnRfYXR0ciwgbmV3X2NhbGxhYmxlPU5vbkNhbGxhYmxlTW9jaywNCiAgICAgICAgICAgICAgICAgIGNyZWF0ZT1UcnVlKQ0KICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90Q2FsbGFibGUobSwgbWFnaWM9RmFsc2UpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBwLnN0b3AoKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfaW5jb21wYXRpYmxlX3dpdGhfbmV3KHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIFZhbHVlRXJyb3IsIHBhdGNoLCBmb29fbmFtZSwgbmV3PW9iamVjdCgpLCBuZXdfY2FsbGFibGU9TWFnaWNNb2NrDQogICAgICAgICkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoDQogICAgICAgICAgICBWYWx1ZUVycm9yLCBwYXRjaC5vYmplY3QsIEZvbywgJ2YnLCBuZXc9b2JqZWN0KCksDQogICAgICAgICAgICBuZXdfY2FsbGFibGU9TWFnaWNNb2NrDQogICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfbmV3X2NhbGxhYmxlX2luY29tcGF0aWJsZV93aXRoX2F1dG9zcGVjKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIFZhbHVlRXJyb3IsIHBhdGNoLCBmb29fbmFtZSwgbmV3X2NhbGxhYmxlPU1hZ2ljTW9jaywNCiAgICAgICAgICAgIGF1dG9zcGVjPVRydWUNCiAgICAgICAgKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIFZhbHVlRXJyb3IsIHBhdGNoLm9iamVjdCwgRm9vLCAnZicsIG5ld19jYWxsYWJsZT1NYWdpY01vY2ssDQogICAgICAgICAgICBhdXRvc3BlYz1UcnVlDQogICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfbmV3X2NhbGxhYmxlX2luaGVyaXRfZm9yX21vY2tzKHNlbGYpOg0KICAgICAgICBjbGFzcyBNb2NrU3ViKE1vY2spOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIE1vY2tDbGFzc2VzID0gKA0KICAgICAgICAgICAgTm9uQ2FsbGFibGVNb2NrLCBOb25DYWxsYWJsZU1hZ2ljTW9jaywgTWFnaWNNb2NrLCBNb2NrLCBNb2NrU3ViDQogICAgICAgICkNCiAgICAgICAgZm9yIEtsYXNzIGluIE1vY2tDbGFzc2VzOg0KICAgICAgICAgICAgZm9yIGFyZyBpbiAnc3BlYycsICdzcGVjX3NldCc6DQogICAgICAgICAgICAgICAga3dhcmdzID0ge2FyZzogVHJ1ZX0NCiAgICAgICAgICAgICAgICBwID0gcGF0Y2goZm9vX25hbWUsIG5ld19jYWxsYWJsZT1LbGFzcywgKiprd2FyZ3MpDQogICAgICAgICAgICAgICAgbSA9IHAuc3RhcnQoKQ0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBtLnJldHVybl92YWx1ZQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgaW5zdGFuY2UsICd4JykNCiAgICAgICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgICAgICBwLnN0b3AoKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfaW5oZXJpdF9ub25fbW9jayhzZWxmKToNCiAgICAgICAgY2xhc3MgTm90QU1vY2sob2JqZWN0KToNCiAgICAgICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzcGVjKToNCiAgICAgICAgICAgICAgICBzZWxmLnNwZWMgPSBzcGVjDQoNCiAgICAgICAgcCA9IHBhdGNoKGZvb19uYW1lLCBuZXdfY2FsbGFibGU9Tm90QU1vY2ssIHNwZWM9VHJ1ZSkNCiAgICAgICAgbSA9IHAuc3RhcnQoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UobSwgTm90QU1vY2spKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG0sICdyZXR1cm5fdmFsdWUnKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcC5zdG9wKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0uc3BlYywgRm9vKQ0KDQoNCiAgICBkZWYgdGVzdF9uZXdfY2FsbGFibGVfY2xhc3NfZGVjb3JhdGluZyhzZWxmKToNCiAgICAgICAgdGVzdCA9IHNlbGYNCiAgICAgICAgb3JpZ2luYWwgPSBGb28NCiAgICAgICAgY2xhc3MgU29tZVRlc3Qob2JqZWN0KToNCg0KICAgICAgICAgICAgZGVmIF90ZXN0KHNlbGYsIG1vY2tfZm9vKToNCiAgICAgICAgICAgICAgICB0ZXN0LmFzc2VydElzTm90KEZvbywgb3JpZ2luYWwpDQogICAgICAgICAgICAgICAgdGVzdC5hc3NlcnRJcyhGb28sIG1vY2tfZm9vKQ0KICAgICAgICAgICAgICAgIHRlc3QuYXNzZXJ0SXNJbnN0YW5jZShGb28sIFNvbWVDbGFzcykNCg0KICAgICAgICAgICAgZGVmIHRlc3RfdHdvKHNlbGYsIG1vY2tfZm9vKToNCiAgICAgICAgICAgICAgICBzZWxmLl90ZXN0KG1vY2tfZm9vKQ0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYsIG1vY2tfZm9vKToNCiAgICAgICAgICAgICAgICBzZWxmLl90ZXN0KG1vY2tfZm9vKQ0KDQogICAgICAgIFNvbWVUZXN0ID0gcGF0Y2goZm9vX25hbWUsIG5ld19jYWxsYWJsZT1Tb21lQ2xhc3MpKFNvbWVUZXN0KQ0KICAgICAgICBTb21lVGVzdCgpLnRlc3Rfb25lKCkNCiAgICAgICAgU29tZVRlc3QoKS50ZXN0X3R3bygpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLCBvcmlnaW5hbCkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfbXVsdGlwbGUoc2VsZik6DQogICAgICAgIG9yaWdpbmFsX2ZvbyA9IEZvbw0KICAgICAgICBvcmlnaW5hbF9mID0gRm9vLmYNCiAgICAgICAgb3JpZ2luYWxfZyA9IEZvby5nDQoNCiAgICAgICAgcGF0Y2hlcjEgPSBwYXRjaC5tdWx0aXBsZShmb29fbmFtZSwgZj0xLCBnPTIpDQogICAgICAgIHBhdGNoZXIyID0gcGF0Y2gubXVsdGlwbGUoRm9vLCBmPTEsIGc9MikNCg0KICAgICAgICBmb3IgcGF0Y2hlciBpbiBwYXRjaGVyMSwgcGF0Y2hlcjI6DQogICAgICAgICAgICBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydElzKEZvbywgb3JpZ2luYWxfZm9vKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmYsIDEpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgMikNCiAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgcGF0Y2hlci5zdG9wKCkNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhGb28sIG9yaWdpbmFsX2ZvbykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmYsIG9yaWdpbmFsX2YpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5nLCBvcmlnaW5hbF9nKQ0KDQoNCiAgICAgICAgQHBhdGNoLm11bHRpcGxlKGZvb19uYW1lLCBmPTMsIGc9NCkNCiAgICAgICAgZGVmIHRlc3QoKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLCBvcmlnaW5hbF9mb28pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCAzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgNCkNCg0KICAgICAgICB0ZXN0KCkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfbXVsdGlwbGVfbm9fa3dhcmdzKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhWYWx1ZUVycm9yLCBwYXRjaC5tdWx0aXBsZSwgZm9vX25hbWUpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIHBhdGNoLm11bHRpcGxlLCBGb28pDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX211bHRpcGxlX2NyZWF0ZV9tb2NrcyhzZWxmKToNCiAgICAgICAgb3JpZ2luYWxfZm9vID0gRm9vDQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCg0KICAgICAgICBAcGF0Y2gubXVsdGlwbGUoZm9vX25hbWUsIGY9REVGQVVMVCwgZz0zLCBmb289REVGQVVMVCkNCiAgICAgICAgZGVmIHRlc3QoZiwgZm9vKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLCBvcmlnaW5hbF9mb28pDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKEZvby5mLCBmKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgMykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLmZvbywgZm9vKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKGYsIE1hZ2ljTW9jaykpDQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UoZm9vLCBNYWdpY01vY2spKQ0KDQogICAgICAgIHRlc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5nLCBvcmlnaW5hbF9nKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9jcmVhdGVfbW9ja3NfZGlmZmVyZW50X29yZGVyKHNlbGYpOg0KICAgICAgICAjIGJ1ZyByZXZlYWxlZCBieSBKeXRob24hDQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2gub2JqZWN0KEZvbywgJ2YnLCAzKQ0KICAgICAgICBwYXRjaGVyLmF0dHJpYnV0ZV9uYW1lID0gJ2YnDQoNCiAgICAgICAgb3RoZXIgPSBwYXRjaC5vYmplY3QoRm9vLCAnZycsIERFRkFVTFQpDQogICAgICAgIG90aGVyLmF0dHJpYnV0ZV9uYW1lID0gJ2cnDQogICAgICAgIHBhdGNoZXIuYWRkaXRpb25hbF9wYXRjaGVycyA9IFtvdGhlcl0NCg0KICAgICAgICBAcGF0Y2hlcg0KICAgICAgICBkZWYgdGVzdChnKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLmcsIGcpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCAzKQ0KDQogICAgICAgIHRlc3QoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5nLCBvcmlnaW5hbF9nKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9zdGFja2VkX2RlY29yYXRvcnMoc2VsZik6DQogICAgICAgIG9yaWdpbmFsX2ZvbyA9IEZvbw0KICAgICAgICBvcmlnaW5hbF9mID0gRm9vLmYNCiAgICAgICAgb3JpZ2luYWxfZyA9IEZvby5nDQoNCiAgICAgICAgQHBhdGNoLm11bHRpcGxlKGZvb19uYW1lLCBmPURFRkFVTFQpDQogICAgICAgIEBwYXRjaC5tdWx0aXBsZShmb29fbmFtZSwgZm9vPURFRkFVTFQpDQogICAgICAgIEBwYXRjaChmb29fbmFtZSArICcuZycpDQogICAgICAgIGRlZiB0ZXN0MShnLCAqKmt3YXJncyk6DQogICAgICAgICAgICBfdGVzdChnLCAqKmt3YXJncykNCg0KICAgICAgICBAcGF0Y2gubXVsdGlwbGUoZm9vX25hbWUsIGY9REVGQVVMVCkNCiAgICAgICAgQHBhdGNoKGZvb19uYW1lICsgJy5nJykNCiAgICAgICAgQHBhdGNoLm11bHRpcGxlKGZvb19uYW1lLCBmb289REVGQVVMVCkNCiAgICAgICAgZGVmIHRlc3QyKGcsICoqa3dhcmdzKToNCiAgICAgICAgICAgIF90ZXN0KGcsICoqa3dhcmdzKQ0KDQogICAgICAgIEBwYXRjaChmb29fbmFtZSArICcuZycpDQogICAgICAgIEBwYXRjaC5tdWx0aXBsZShmb29fbmFtZSwgZj1ERUZBVUxUKQ0KICAgICAgICBAcGF0Y2gubXVsdGlwbGUoZm9vX25hbWUsIGZvbz1ERUZBVUxUKQ0KICAgICAgICBkZWYgdGVzdDMoZywgKiprd2FyZ3MpOg0KICAgICAgICAgICAgX3Rlc3QoZywgKiprd2FyZ3MpDQoNCiAgICAgICAgZGVmIF90ZXN0KGcsICoqa3dhcmdzKToNCiAgICAgICAgICAgIGYgPSBrd2FyZ3MucG9wKCdmJykNCiAgICAgICAgICAgIGZvbyA9IGt3YXJncy5wb3AoJ2ZvbycpDQogICAgICAgICAgICBzZWxmLmFzc2VydEZhbHNlKGt3YXJncykNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhGb28sIG9yaWdpbmFsX2ZvbykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLmYsIGYpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKEZvby5nLCBnKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhGb28uZm9vLCBmb28pDQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UoZiwgTWFnaWNNb2NrKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc19pbnN0YW5jZShnLCBNYWdpY01vY2spKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKGZvbywgTWFnaWNNb2NrKSkNCg0KICAgICAgICB0ZXN0MSgpDQogICAgICAgIHRlc3QyKCkNCiAgICAgICAgdGVzdDMoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5nLCBvcmlnaW5hbF9nKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9jcmVhdGVfbW9ja3NfcGF0Y2hlcihzZWxmKToNCiAgICAgICAgb3JpZ2luYWxfZm9vID0gRm9vDQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2gubXVsdGlwbGUoZm9vX25hbWUsIGY9REVGQVVMVCwgZz0zLCBmb289REVGQVVMVCkNCg0KICAgICAgICByZXN1bHQgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZiA9IHJlc3VsdFsnZiddDQogICAgICAgICAgICBmb28gPSByZXN1bHRbJ2ZvbyddDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNldChyZXN1bHQpLCBzZXQoWydmJywgJ2ZvbyddKSkNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhGb28sIG9yaWdpbmFsX2ZvbykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLmYsIGYpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKEZvby5mb28sIGZvbykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc19pbnN0YW5jZShmLCBNYWdpY01vY2spKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKGZvbywgTWFnaWNNb2NrKSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZiwgb3JpZ2luYWxfZikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgb3JpZ2luYWxfZykNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfbXVsdGlwbGVfZGVjb3JhdGluZ19jbGFzcyhzZWxmKToNCiAgICAgICAgdGVzdCA9IHNlbGYNCiAgICAgICAgb3JpZ2luYWxfZm9vID0gRm9vDQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCg0KICAgICAgICBjbGFzcyBTb21lVGVzdChvYmplY3QpOg0KDQogICAgICAgICAgICBkZWYgX3Rlc3Qoc2VsZiwgZiwgZm9vKToNCiAgICAgICAgICAgICAgICB0ZXN0LmFzc2VydElzKEZvbywgb3JpZ2luYWxfZm9vKQ0KICAgICAgICAgICAgICAgIHRlc3QuYXNzZXJ0SXMoRm9vLmYsIGYpDQogICAgICAgICAgICAgICAgdGVzdC5hc3NlcnRFcXVhbChGb28uZywgMykNCiAgICAgICAgICAgICAgICB0ZXN0LmFzc2VydElzKEZvby5mb28sIGZvbykNCiAgICAgICAgICAgICAgICB0ZXN0LmFzc2VydFRydWUoaXNfaW5zdGFuY2UoZiwgTWFnaWNNb2NrKSkNCiAgICAgICAgICAgICAgICB0ZXN0LmFzc2VydFRydWUoaXNfaW5zdGFuY2UoZm9vLCBNYWdpY01vY2spKQ0KDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZiwgZiwgZm9vKToNCiAgICAgICAgICAgICAgICBzZWxmLl90ZXN0KGYsIGZvbykNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmLCBmLCBmb28pOg0KICAgICAgICAgICAgICAgIHNlbGYuX3Rlc3QoZiwgZm9vKQ0KDQogICAgICAgIFNvbWVUZXN0ID0gcGF0Y2gubXVsdGlwbGUoDQogICAgICAgICAgICBmb29fbmFtZSwgZj1ERUZBVUxULCBnPTMsIGZvbz1ERUZBVUxUDQogICAgICAgICkoU29tZVRlc3QpDQoNCiAgICAgICAgdGhpbmcgPSBTb21lVGVzdCgpDQogICAgICAgIHRoaW5nLnRlc3Rfb25lKCkNCiAgICAgICAgdGhpbmcudGVzdF90d28oKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmYsIG9yaWdpbmFsX2YpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmcsIG9yaWdpbmFsX2cpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX211bHRpcGxlX2NyZWF0ZShzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoLm11bHRpcGxlKEZvbywgYmxhbT0nYmxhbScpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBwYXRjaGVyLnN0YXJ0KQ0KDQogICAgICAgIHBhdGNoZXIgPSBwYXRjaC5tdWx0aXBsZShGb28sIGJsYW09J2JsYW0nLCBjcmVhdGU9VHJ1ZSkNCiAgICAgICAgcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmJsYW0sICdibGFtJykNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKEZvbywgJ2JsYW0nKSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfbXVsdGlwbGVfc3BlY19zZXQoc2VsZik6DQogICAgICAgICMgaWYgc3BlY19zZXQgd29ya3MgdGhlbiB3ZSBjYW4gYXNzdW1lIHRoYXQgc3BlYyBhbmQgYXV0b3NwZWMgYWxzbw0KICAgICAgICAjIHdvcmsgYXMgdGhlIHVuZGVybHlpbmcgbWFjaGluZXJ5IGlzIHRoZSBzYW1lDQogICAgICAgIHBhdGNoZXIgPSBwYXRjaC5tdWx0aXBsZShGb28sIGZvbz1ERUZBVUxULCBzcGVjX3NldD1bJ2EnLCAnYiddKQ0KICAgICAgICByZXN1bHQgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZm9vLCByZXN1bHRbJ2ZvbyddKQ0KICAgICAgICAgICAgRm9vLmZvby5hKDEpDQogICAgICAgICAgICBGb28uZm9vLmIoMikNCiAgICAgICAgICAgIEZvby5mb28uYS5hc3NlcnRfY2FsbGVkX3dpdGgoMSkNCiAgICAgICAgICAgIEZvby5mb28uYi5hc3NlcnRfY2FsbGVkX3dpdGgoMikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBzZXRhdHRyLCBGb28uZm9vLCAnYycsIE5vbmUpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBwYXRjaGVyLnN0b3AoKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9uZXdfY2FsbGFibGUoc2VsZik6DQogICAgICAgIGNsYXNzIFRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoLm11bHRpcGxlKA0KICAgICAgICAgICAgRm9vLCBmPURFRkFVTFQsIGc9REVGQVVMVCwgbmV3X2NhbGxhYmxlPVRoaW5nDQogICAgICAgICkNCiAgICAgICAgcmVzdWx0ID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoRm9vLmYsIHJlc3VsdFsnZiddKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhGb28uZywgcmVzdWx0WydnJ10pDQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoRm9vLmYsIFRoaW5nKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKEZvby5nLCBUaGluZykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNOb3QoRm9vLmYsIEZvby5nKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcGF0Y2hlci5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfbmVzdGVkX3BhdGNoX2ZhaWx1cmUoc2VsZik6DQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ2cnLCAxKQ0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ21pc3NpbmcnLCAxKQ0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ2YnLCAxKQ0KICAgICAgICBkZWYgdGhpbmcxKCk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdtaXNzaW5nJywgMSkNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdnJywgMSkNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdmJywgMSkNCiAgICAgICAgZGVmIHRoaW5nMigpOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnZycsIDEpDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnZicsIDEpDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnbWlzc2luZycsIDEpDQogICAgICAgIGRlZiB0aGluZzMoKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBmb3IgZnVuYyBpbiB0aGluZzEsIHRoaW5nMiwgdGhpbmczOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGZ1bmMpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgb3JpZ2luYWxfZykNCg0KDQogICAgZGVmIHRlc3RfbmV3X2NhbGxhYmxlX2ZhaWx1cmUoc2VsZik6DQogICAgICAgIG9yaWdpbmFsX2YgPSBGb28uZg0KICAgICAgICBvcmlnaW5hbF9nID0gRm9vLmcNCiAgICAgICAgb3JpZ2luYWxfZm9vID0gRm9vLmZvbw0KDQogICAgICAgIGRlZiBjcmFzaGVyKCk6DQogICAgICAgICAgICByYWlzZSBOYW1lRXJyb3IoJ2NyYXNoZXInKQ0KDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnZycsIDEpDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnZm9vJywgbmV3X2NhbGxhYmxlPWNyYXNoZXIpDQogICAgICAgIEBwYXRjaC5vYmplY3QoRm9vLCAnZicsIDEpDQogICAgICAgIGRlZiB0aGluZzEoKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ2ZvbycsIG5ld19jYWxsYWJsZT1jcmFzaGVyKQ0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ2cnLCAxKQ0KICAgICAgICBAcGF0Y2gub2JqZWN0KEZvbywgJ2YnLCAxKQ0KICAgICAgICBkZWYgdGhpbmcyKCk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdnJywgMSkNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdmJywgMSkNCiAgICAgICAgQHBhdGNoLm9iamVjdChGb28sICdmb28nLCBuZXdfY2FsbGFibGU9Y3Jhc2hlcikNCiAgICAgICAgZGVmIHRoaW5nMygpOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGZvciBmdW5jIGluIHRoaW5nMSwgdGhpbmcyLCB0aGluZzM6DQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhOYW1lRXJyb3IsIGZ1bmMpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgb3JpZ2luYWxfZykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmZvbywgb3JpZ2luYWxfZm9vKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9mYWlsdXJlKHNlbGYpOg0KICAgICAgICBvcmlnaW5hbF9mID0gRm9vLmYNCiAgICAgICAgb3JpZ2luYWxfZyA9IEZvby5nDQoNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoLm9iamVjdChGb28sICdmJywgMSkNCiAgICAgICAgcGF0Y2hlci5hdHRyaWJ1dGVfbmFtZSA9ICdmJw0KDQogICAgICAgIGdvb2QgPSBwYXRjaC5vYmplY3QoRm9vLCAnZycsIDEpDQogICAgICAgIGdvb2QuYXR0cmlidXRlX25hbWUgPSAnZycNCg0KICAgICAgICBiYWQgPSBwYXRjaC5vYmplY3QoRm9vLCAnbWlzc2luZycsIDEpDQogICAgICAgIGJhZC5hdHRyaWJ1dGVfbmFtZSA9ICdtaXNzaW5nJw0KDQogICAgICAgIGZvciBhZGRpdGlvbmFscyBpbiBbZ29vZCwgYmFkXSwgW2JhZCwgZ29vZF06DQogICAgICAgICAgICBwYXRjaGVyLmFkZGl0aW9uYWxfcGF0Y2hlcnMgPSBhZGRpdGlvbmFscw0KDQogICAgICAgICAgICBAcGF0Y2hlcg0KICAgICAgICAgICAgZGVmIGZ1bmMoKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBmdW5jKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZiwgb3JpZ2luYWxfZikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmcsIG9yaWdpbmFsX2cpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX211bHRpcGxlX25ld19jYWxsYWJsZV9mYWlsdXJlKHNlbGYpOg0KICAgICAgICBvcmlnaW5hbF9mID0gRm9vLmYNCiAgICAgICAgb3JpZ2luYWxfZyA9IEZvby5nDQogICAgICAgIG9yaWdpbmFsX2ZvbyA9IEZvby5mb28NCg0KICAgICAgICBkZWYgY3Jhc2hlcigpOg0KICAgICAgICAgICAgcmFpc2UgTmFtZUVycm9yKCdjcmFzaGVyJykNCg0KICAgICAgICBwYXRjaGVyID0gcGF0Y2gub2JqZWN0KEZvbywgJ2YnLCAxKQ0KICAgICAgICBwYXRjaGVyLmF0dHJpYnV0ZV9uYW1lID0gJ2YnDQoNCiAgICAgICAgZ29vZCA9IHBhdGNoLm9iamVjdChGb28sICdnJywgMSkNCiAgICAgICAgZ29vZC5hdHRyaWJ1dGVfbmFtZSA9ICdnJw0KDQogICAgICAgIGJhZCA9IHBhdGNoLm9iamVjdChGb28sICdmb28nLCBuZXdfY2FsbGFibGU9Y3Jhc2hlcikNCiAgICAgICAgYmFkLmF0dHJpYnV0ZV9uYW1lID0gJ2ZvbycNCg0KICAgICAgICBmb3IgYWRkaXRpb25hbHMgaW4gW2dvb2QsIGJhZF0sIFtiYWQsIGdvb2RdOg0KICAgICAgICAgICAgcGF0Y2hlci5hZGRpdGlvbmFsX3BhdGNoZXJzID0gYWRkaXRpb25hbHMNCg0KICAgICAgICAgICAgQHBhdGNoZXINCiAgICAgICAgICAgIGRlZiBmdW5jKCk6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhOYW1lRXJyb3IsIGZ1bmMpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5mLCBvcmlnaW5hbF9mKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChGb28uZywgb3JpZ2luYWxfZykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoRm9vLmZvbywgb3JpZ2luYWxfZm9vKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9tdWx0aXBsZV9zdHJpbmdfc3ViY2xhc3NlcyhzZWxmKToNCiAgICAgICAgRm9vID0gdHlwZSgnRm9vJywgKHN0ciwpLCB7J2Zpc2gnOiAndGFzdHknfSkNCiAgICAgICAgZm9vID0gRm9vKCkNCiAgICAgICAgQHBhdGNoLm11bHRpcGxlKGZvbywgZmlzaD0nbmVhcmx5IGdvbmUnKQ0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28uZmlzaCwgJ25lYXJseSBnb25lJykNCg0KICAgICAgICB0ZXN0KCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28uZmlzaCwgJ3Rhc3R5JykNCg0KDQogICAgQHBhdGNoKCd1bml0dGVzdC5tb2NrLnBhdGNoLlRFU1RfUFJFRklYJywgJ2ZvbycpDQogICAgZGVmIHRlc3RfcGF0Y2hfdGVzdF9wcmVmaXgoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgdGhpbmcgPSAnb3JpZ2luYWwnDQoNCiAgICAgICAgICAgIGRlZiBmb29fb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnRoaW5nDQogICAgICAgICAgICBkZWYgZm9vX3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi50aGluZw0KICAgICAgICAgICAgZGVmIHRlc3Rfb25lKHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnRoaW5nDQogICAgICAgICAgICBkZWYgdGVzdF90d28oc2VsZik6DQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYudGhpbmcNCg0KICAgICAgICBGb28gPSBwYXRjaC5vYmplY3QoRm9vLCAndGhpbmcnLCAnY2hhbmdlZCcpKEZvbykNCg0KICAgICAgICBmb28gPSBGb28oKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby5mb29fb25lKCksICdjaGFuZ2VkJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28uZm9vX3R3bygpLCAnY2hhbmdlZCcpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLnRlc3Rfb25lKCksICdvcmlnaW5hbCcpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLnRlc3RfdHdvKCksICdvcmlnaW5hbCcpDQoNCg0KICAgIEBwYXRjaCgndW5pdHRlc3QubW9jay5wYXRjaC5URVNUX1BSRUZJWCcsICdiYXInKQ0KICAgIGRlZiB0ZXN0X3BhdGNoX2RpY3RfdGVzdF9wcmVmaXgoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIGJhcl9vbmUoc2VsZik6DQogICAgICAgICAgICAgICAgcmV0dXJuIGRpY3QodGhlX2RpY3QpDQogICAgICAgICAgICBkZWYgYmFyX3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gZGljdCh0aGVfZGljdCkNCiAgICAgICAgICAgIGRlZiB0ZXN0X29uZShzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gZGljdCh0aGVfZGljdCkNCiAgICAgICAgICAgIGRlZiB0ZXN0X3R3byhzZWxmKToNCiAgICAgICAgICAgICAgICByZXR1cm4gZGljdCh0aGVfZGljdCkNCg0KICAgICAgICB0aGVfZGljdCA9IHsna2V5JzogJ29yaWdpbmFsJ30NCiAgICAgICAgRm9vID0gcGF0Y2guZGljdCh0aGVfZGljdCwga2V5PSdjaGFuZ2VkJykoRm9vKQ0KDQogICAgICAgIGZvbyA9Rm9vKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28uYmFyX29uZSgpLCB7J2tleSc6ICdjaGFuZ2VkJ30pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLmJhcl90d28oKSwgeydrZXknOiAnY2hhbmdlZCd9KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby50ZXN0X29uZSgpLCB7J2tleSc6ICdvcmlnaW5hbCd9KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvby50ZXN0X3R3bygpLCB7J2tleSc6ICdvcmlnaW5hbCd9KQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF93aXRoX3NwZWNfbW9ja19yZXByKHNlbGYpOg0KICAgICAgICBmb3IgYXJnIGluICgnc3BlYycsICdhdXRvc3BlYycsICdzcGVjX3NldCcpOg0KICAgICAgICAgICAgcCA9IHBhdGNoKCclcy5Tb21lQ2xhc3MnICUgX19uYW1lX18sICoqe2FyZzogVHJ1ZX0pDQogICAgICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J1NvbWVDbGFzcyciLCByZXByKG0pKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIiBuYW1lPSdTb21lQ2xhc3MuY2xhc3NfYXR0cmlidXRlJyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXByKG0uY2xhc3NfYXR0cmlidXRlKSkNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEluKCIgbmFtZT0nU29tZUNsYXNzKCknIiwgcmVwcihtKCkpKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIiBuYW1lPSdTb21lQ2xhc3MoKS5jbGFzc19hdHRyaWJ1dGUnIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcHIobSgpLmNsYXNzX2F0dHJpYnV0ZSkpDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHAuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX25lc3RlZF9hdXRvc3BlY19yZXByKHNlbGYpOg0KICAgICAgICB3aXRoIHBhdGNoKCd1bml0dGVzdC50ZXN0LnRlc3Rtb2NrLnN1cHBvcnQnLCBhdXRvc3BlYz1UcnVlKSBhcyBtOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J3N1cHBvcnQuU29tZUNsYXNzLndpYmJsZSgpJyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIHJlcHIobS5Tb21lQ2xhc3Mud2liYmxlKCkpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J3N1cHBvcnQuU29tZUNsYXNzKCkud2liYmxlKCknIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwcihtLlNvbWVDbGFzcygpLndpYmJsZSgpKSkNCg0KDQoNCiAgICBkZWYgdGVzdF9tb2NrX2NhbGxzX3dpdGhfcGF0Y2goc2VsZik6DQogICAgICAgIGZvciBhcmcgaW4gKCdzcGVjJywgJ2F1dG9zcGVjJywgJ3NwZWNfc2V0Jyk6DQogICAgICAgICAgICBwID0gcGF0Y2goJyVzLlNvbWVDbGFzcycgJSBfX25hbWVfXywgKip7YXJnOiBUcnVlfSkNCiAgICAgICAgICAgIG0gPSBwLnN0YXJ0KCkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBtLndpYmJsZSgpDQoNCiAgICAgICAgICAgICAgICBrYWxscyA9IFtjYWxsLndpYmJsZSgpXQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobS5tb2NrX2NhbGxzLCBrYWxscykNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0ubWV0aG9kX2NhbGxzLCBrYWxscykNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0ud2liYmxlLm1vY2tfY2FsbHMsIFtjYWxsKCldKQ0KDQogICAgICAgICAgICAgICAgcmVzdWx0ID0gbSgpDQogICAgICAgICAgICAgICAga2FsbHMuYXBwZW5kKGNhbGwoKSkNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0ubW9ja19jYWxscywga2FsbHMpDQoNCiAgICAgICAgICAgICAgICByZXN1bHQud2liYmxlKCkNCiAgICAgICAgICAgICAgICBrYWxscy5hcHBlbmQoY2FsbCgpLndpYmJsZSgpKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobS5tb2NrX2NhbGxzLCBrYWxscykNCg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0Lm1vY2tfY2FsbHMsIFtjYWxsLndpYmJsZSgpXSkNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3VsdC53aWJibGUubW9ja19jYWxscywgW2NhbGwoKV0pDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQubWV0aG9kX2NhbGxzLCBbY2FsbC53aWJibGUoKV0pDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHAuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX2ltcG9ydHNfbGF6aWx5KHNlbGYpOg0KICAgICAgICBzeXMubW9kdWxlcy5wb3AoJ3NxdWl6eicsIE5vbmUpDQoNCiAgICAgICAgcDEgPSBwYXRjaCgnc3F1aXp6LnNxdW96eicpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEltcG9ydEVycm9yLCBwMS5zdGFydCkNCg0KICAgICAgICBzcXVpenogPSBNb2NrKCkNCiAgICAgICAgc3F1aXp6LnNxdW96eiA9IDYNCiAgICAgICAgc3lzLm1vZHVsZXNbJ3NxdWl6eiddID0gc3F1aXp6DQogICAgICAgIHAxID0gcGF0Y2goJ3NxdWl6ei5zcXVvenonKQ0KICAgICAgICBzcXVpenouc3F1b3p6ID0gMw0KICAgICAgICBwMS5zdGFydCgpDQogICAgICAgIHAxLnN0b3AoKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNxdWl6ei5zcXVvenosIDMpDQoNCg0KICAgIGRlZiB0ZXN0X3BhdGNoX3Byb3BvZ3JhdGVzX2V4Y19vbl9leGl0KHNlbGYpOg0KICAgICAgICBjbGFzcyBob2xkZXI6DQogICAgICAgICAgICBleGNfaW5mbyA9IE5vbmUsIE5vbmUsIE5vbmUNCg0KICAgICAgICBjbGFzcyBjdXN0b21fcGF0Y2goX3BhdGNoKToNCiAgICAgICAgICAgIGRlZiBfX2V4aXRfXyhzZWxmLCBldHlwZT1Ob25lLCB2YWw9Tm9uZSwgdGI9Tm9uZSk6DQogICAgICAgICAgICAgICAgX3BhdGNoLl9fZXhpdF9fKHNlbGYsIGV0eXBlLCB2YWwsIHRiKQ0KICAgICAgICAgICAgICAgIGhvbGRlci5leGNfaW5mbyA9IGV0eXBlLCB2YWwsIHRiDQogICAgICAgICAgICBzdG9wID0gX19leGl0X18NCg0KICAgICAgICBkZWYgd2l0aF9jdXN0b21fcGF0Y2godGFyZ2V0KToNCiAgICAgICAgICAgIGdldHRlciwgYXR0cmlidXRlID0gX2dldF90YXJnZXQodGFyZ2V0KQ0KICAgICAgICAgICAgcmV0dXJuIGN1c3RvbV9wYXRjaCgNCiAgICAgICAgICAgICAgICBnZXR0ZXIsIGF0dHJpYnV0ZSwgREVGQVVMVCwgTm9uZSwgRmFsc2UsIE5vbmUsDQogICAgICAgICAgICAgICAgTm9uZSwgTm9uZSwge30NCiAgICAgICAgICAgICkNCg0KICAgICAgICBAd2l0aF9jdXN0b21fcGF0Y2goJ3NxdWl6ei5zcXVvenonKQ0KICAgICAgICBkZWYgdGVzdChtb2NrKToNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcg0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFJ1bnRpbWVFcnJvciwgdGVzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhob2xkZXIuZXhjX2luZm9bMF0sIFJ1bnRpbWVFcnJvcikNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdE5vbmUoaG9sZGVyLmV4Y19pbmZvWzFdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdleGNlcHRpb24gdmFsdWUgbm90IHByb3BnYXRlZCcpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb3ROb25lKGhvbGRlci5leGNfaW5mb1syXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXhjZXB0aW9uIHRyYWNlYmFjayBub3QgcHJvcGdhdGVkJykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2FuZF9zcGVjcyhzZWxmKToNCiAgICAgICAgZm9yIGt3YXJnIGluICgnc3BlYycsICdzcGVjX3NldCcsICdhdXRvc3BlYycpOg0KICAgICAgICAgICAgcCA9IHBhdGNoKCclcy5kb2Vzbm90ZXhpc3QnICUgX19uYW1lX18sIGNyZWF0ZT1UcnVlLA0KICAgICAgICAgICAgICAgICAgICAgICoqe2t3YXJnOiBUcnVlfSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgcC5zdGFydCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKE5hbWVFcnJvciwgbGFtYmRhOiBkb2Vzbm90ZXhpc3QpDQoNCiAgICAgICAgICAgICMgY2hlY2sgdGhhdCBzcGVjIHdpdGggY3JlYXRlIGlzIGlubm9jdW91cyBpZiB0aGUgb3JpZ2luYWwgZXhpc3RzDQogICAgICAgICAgICBwID0gcGF0Y2goTU9ETkFNRSwgY3JlYXRlPVRydWUsICoqe2t3YXJnOiBUcnVlfSkNCiAgICAgICAgICAgIHAuc3RhcnQoKQ0KICAgICAgICAgICAgcC5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfbXVsdGlwbGVfc3BlY3Moc2VsZik6DQogICAgICAgIG9yaWdpbmFsID0gUFRNb2R1bGUNCiAgICAgICAgZm9yIGt3YXJnIGluICgnc3BlYycsICdzcGVjX3NldCcpOg0KICAgICAgICAgICAgcCA9IHBhdGNoKE1PRE5BTUUsIGF1dG9zcGVjPTAsICoqe2t3YXJnOiAwfSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgcC5zdGFydCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMoUFRNb2R1bGUsIG9yaWdpbmFsKQ0KDQogICAgICAgIGZvciBrd2FyZyBpbiAoJ3NwZWMnLCAnYXV0b3NwZWMnKToNCiAgICAgICAgICAgIHAgPSBwYXRjaChNT0ROQU1FLCBzcGVjX3NldD0wLCAqKntrd2FyZzogMH0pDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIHAuc3RhcnQpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKFBUTW9kdWxlLCBvcmlnaW5hbCkNCg0KICAgICAgICBmb3Iga3dhcmcgaW4gKCdzcGVjX3NldCcsICdhdXRvc3BlYycpOg0KICAgICAgICAgICAgcCA9IHBhdGNoKE1PRE5BTUUsIHNwZWM9MCwgKip7a3dhcmc6IDB9KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBwLnN0YXJ0KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhQVE1vZHVsZSwgb3JpZ2luYWwpDQoNCg0KICAgIGRlZiB0ZXN0X3NwZWNzX2ZhbHNlX2luc3RlYWRfb2Zfbm9uZShzZWxmKToNCiAgICAgICAgcCA9IHBhdGNoKE1PRE5BTUUsIHNwZWM9RmFsc2UsIHNwZWNfc2V0PUZhbHNlLCBhdXRvc3BlYz1GYWxzZSkNCiAgICAgICAgbW9jayA9IHAuc3RhcnQoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICAjIG5vIHNwZWMgc2hvdWxkIGhhdmUgYmVlbiBzZXQsIHNvIGF0dHJpYnV0ZSBhY2Nlc3Mgc2hvdWxkIG5vdCBmYWlsDQogICAgICAgICAgICBtb2NrLmRvZXNfbm90X2V4aXN0DQogICAgICAgICAgICBtb2NrLmRvZXNfbm90X2V4aXN0ID0gMw0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcC5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfZmFsc2V5X3NwZWMoc2VsZik6DQogICAgICAgIGZvciBrd2FyZyBpbiAoJ3NwZWMnLCAnYXV0b3NwZWMnLCAnc3BlY19zZXQnKToNCiAgICAgICAgICAgIHAgPSBwYXRjaChNT0ROQU1FLCAqKntrd2FyZzogMH0pDQogICAgICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG0sICdkb2Vzbm90ZXhpdCcpDQogICAgICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgICAgIHAuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X3NwZWNfc2V0X3RydWUoc2VsZik6DQogICAgICAgIGZvciBrd2FyZyBpbiAoJ3NwZWMnLCAnYXV0b3NwZWMnKToNCiAgICAgICAgICAgIHAgPSBwYXRjaChNT0ROQU1FLCBzcGVjX3NldD1UcnVlLCAqKntrd2FyZzogVHJ1ZX0pDQogICAgICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHNldGF0dHIsIG0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RvZXNub3RleGlzdCcsICdzb21ldGhpbmcnKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtLCAnZG9lc25vdGV4aXN0JykNCiAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgcC5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfY2FsbGFibGVfc3BlY19hc19saXN0KHNlbGYpOg0KICAgICAgICBzcGVjID0gKCdfX2NhbGxfXycsKQ0KICAgICAgICBwID0gcGF0Y2goTU9ETkFNRSwgc3BlYz1zcGVjKQ0KICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShjYWxsYWJsZShtKSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHAuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X25vdF9jYWxsYWJsZV9zcGVjX2FzX2xpc3Qoc2VsZik6DQogICAgICAgIHNwZWMgPSAoJ2ZvbycsICdiYXInKQ0KICAgICAgICBwID0gcGF0Y2goTU9ETkFNRSwgc3BlYz1zcGVjKQ0KICAgICAgICBtID0gcC5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoY2FsbGFibGUobSkpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBwLnN0b3AoKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9zdG9wYWxsKHNlbGYpOg0KICAgICAgICB1bmxpbmsgPSBvcy51bmxpbmsNCiAgICAgICAgY2hkaXIgPSBvcy5jaGRpcg0KICAgICAgICBwYXRoID0gb3MucGF0aA0KICAgICAgICBwYXRjaCgnb3MudW5saW5rJywgc29tZXRoaW5nKS5zdGFydCgpDQogICAgICAgIHBhdGNoKCdvcy5jaGRpcicsIHNvbWV0aGluZ19lbHNlKS5zdGFydCgpDQoNCiAgICAgICAgQHBhdGNoKCdvcy5wYXRoJykNCiAgICAgICAgZGVmIHBhdGNoZWQobW9ja19wYXRoKToNCiAgICAgICAgICAgIHBhdGNoLnN0b3BhbGwoKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhvcy5wYXRoLCBtb2NrX3BhdGgpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKG9zLnVubGluaywgdW5saW5rKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhvcy5jaGRpciwgY2hkaXIpDQoNCiAgICAgICAgcGF0Y2hlZCgpDQogICAgICAgIHNlbGYuYXNzZXJ0SXMob3MucGF0aCwgcGF0aCkNCg0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/unittest/test/testmock/testhelpers.py':'aW1wb3J0IHVuaXR0ZXN0DQoNCmZyb20gdW5pdHRlc3QubW9jayBpbXBvcnQgKA0KICAgIGNhbGwsIF9DYWxsLCBjcmVhdGVfYXV0b3NwZWMsIE1hZ2ljTW9jaywNCiAgICBNb2NrLCBBTlksIF9DYWxsTGlzdCwgcGF0Y2gsIFByb3BlcnR5TW9jaw0KKQ0KDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQ0KDQpjbGFzcyBTb21lQ2xhc3Mob2JqZWN0KToNCiAgICBkZWYgb25lKHNlbGYsIGEsIGIpOg0KICAgICAgICBwYXNzDQogICAgZGVmIHR3byhzZWxmKToNCiAgICAgICAgcGFzcw0KICAgIGRlZiB0aHJlZShzZWxmLCBhPU5vbmUpOg0KICAgICAgICBwYXNzDQoNCg0KDQpjbGFzcyBBbnlUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiB0ZXN0X2FueShzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChBTlksIG9iamVjdCgpKQ0KDQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jayhBTlkpDQogICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF93aXRoKEFOWSkNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2soZm9vPUFOWSkNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX3dpdGgoZm9vPUFOWSkNCg0KICAgIGRlZiB0ZXN0X3JlcHIoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihBTlkpLCAnPEFOWT4nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihBTlkpLCAnPEFOWT4nKQ0KDQoNCiAgICBkZWYgdGVzdF9hbnlfYW5kX2RhdGV0aW1lKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2soZGF0ZXRpbWUubm93KCksIGZvbz1kYXRldGltZS5ub3coKSkNCg0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aChBTlksIGZvbz1BTlkpDQoNCg0KICAgIGRlZiB0ZXN0X2FueV9tb2NrX2NhbGxzX2NvbXBhcmlzb25fb3JkZXIoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgZCA9IGRhdGV0aW1lLm5vdygpDQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6DQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgICAgICAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KDQogICAgICAgIGZvciBkIGluIGRhdGV0aW1lLm5vdygpLCBGb28oKToNCiAgICAgICAgICAgIG1vY2sucmVzZXRfbW9jaygpDQoNCiAgICAgICAgICAgIG1vY2soZCwgZm9vPWQsIGJhcj1kKQ0KICAgICAgICAgICAgbW9jay5tZXRob2QoZCwgemluZ2E9ZCwgYWxwaGE9ZCkNCiAgICAgICAgICAgIG1vY2soKS5tZXRob2QoYTE9ZCwgejk5PWQpDQoNCiAgICAgICAgICAgIGV4cGVjdGVkID0gWw0KICAgICAgICAgICAgICAgIGNhbGwoQU5ZLCBmb289QU5ZLCBiYXI9QU5ZKSwNCiAgICAgICAgICAgICAgICBjYWxsLm1ldGhvZChBTlksIHppbmdhPUFOWSwgYWxwaGE9QU5ZKSwNCiAgICAgICAgICAgICAgICBjYWxsKCksIGNhbGwoKS5tZXRob2QoYTE9QU5ZLCB6OTk9QU5ZKQ0KICAgICAgICAgICAgXQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChleHBlY3RlZCwgbW9jay5tb2NrX2NhbGxzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIGV4cGVjdGVkKQ0KDQoNCg0KY2xhc3MgQ2FsbFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgZGVmIHRlc3RfY2FsbF93aXRoX2NhbGwoc2VsZik6DQogICAgICAgIGthbGwgPSBfQ2FsbCgpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoJycsKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKCgpLCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwsIF9DYWxsKCh7fSwpKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoJycsICgpKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKCcnLCB7fSkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwsIF9DYWxsKCgnJywgKCksIHt9KSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKCdmb28nLCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwsIF9DYWxsKCgnYmFyJywgKCkpKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoJ2JheicsIHt9KSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKCdzcGFtJywgKCksIHt9KSkpDQoNCiAgICAgICAga2FsbCA9IF9DYWxsKCgoMSwgMiwgMyksKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoKDEsIDIsIDMpLCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwsIF9DYWxsKCgnJywgKDEsIDIsIDMpKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKCgxLCAyLCAzKSwge30pKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoJycsICgxLCAyLCAzKSwge30pKSkNCg0KICAgICAgICBrYWxsID0gX0NhbGwoKCgxLCAyLCA0KSwpKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKGthbGwsIF9DYWxsKCgnJywgKDEsIDIsIDMpKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoa2FsbCwgX0NhbGwoKCcnLCAoMSwgMiwgMyksIHt9KSkpDQoNCiAgICAgICAga2FsbCA9IF9DYWxsKCgnZm9vJywgKDEsIDIsIDQpLCkpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoa2FsbCwgX0NhbGwoKCcnLCAoMSwgMiwgNCkpKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChrYWxsLCBfQ2FsbCgoJycsICgxLCAyLCA0KSwge30pKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChrYWxsLCBfQ2FsbCgoJ2JhcicsICgxLCAyLCA0KSkpKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKGthbGwsIF9DYWxsKCgnYmFyJywgKDEsIDIsIDQpLCB7fSkpKQ0KDQogICAgICAgIGthbGwgPSBfQ2FsbCgoeydhJzogM30sKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoJycsICgpLCB7J2EnOiAzfSkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwsIF9DYWxsKCgnJywgeydhJzogM30pKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChrYWxsLCBfQ2FsbCgoKCksIHsnYSc6IDN9KSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa2FsbCwgX0NhbGwoKHsnYSc6IDN9LCkpKQ0KDQoNCiAgICBkZWYgdGVzdF9lbXB0eV9fQ2FsbChzZWxmKToNCiAgICAgICAgYXJncyA9IF9DYWxsKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgoKSwpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgKCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywoKSwge30pKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywge30pKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICh7fSwpKQ0KDQoNCiAgICBkZWYgdGVzdF9uYW1lZF9lbXB0eV9jYWxsKHNlbGYpOg0KICAgICAgICBhcmdzID0gX0NhbGwoKCdmb28nLCAoKSwge30pKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCAoKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCgpLCB7fSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCB7fSkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoKCksKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoe30sKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoJ2JhcicsKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoJ2JhcicsICgpKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoJ2JhcicsIHt9KSkNCg0KDQogICAgZGVmIHRlc3RfY2FsbF93aXRoX2FyZ3Moc2VsZik6DQogICAgICAgIGFyZ3MgPSBfQ2FsbCgoKDEsIDIsIDMpLCB7fSkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzLCAoKDEsIDIsIDMpLCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCAoMSwgMiwgMykpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgKDEsIDIsIDMpLCB7fSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCgxLCAyLCAzKSwge30pKQ0KDQoNCiAgICBkZWYgdGVzdF9uYW1lZF9jYWxsX3dpdGhfYXJncyhzZWxmKToNCiAgICAgICAgYXJncyA9IF9DYWxsKCgnZm9vJywgKDEsIDIsIDMpLCB7fSkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzLCAoJ2ZvbycsICgxLCAyLCAzKSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgKCdmb28nLCAoMSwgMiwgMyksIHt9KSkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKGFyZ3MsICgoMSwgMiwgMyksKSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RFcXVhbChhcmdzLCAoKDEsIDIsIDMpLCB7fSkpDQoNCg0KICAgIGRlZiB0ZXN0X2NhbGxfd2l0aF9rd2FyZ3Moc2VsZik6DQogICAgICAgIGFyZ3MgPSBfQ2FsbCgoKCksIGRpY3QoYT0zLCBiPTQpKSkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsIChkaWN0KGE9MywgYj00KSwpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgZGljdChhPTMsIGI9NCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgKCksIGRpY3QoYT0zLCBiPTQpKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzLCAoKCksIGRpY3QoYT0zLCBiPTQpKSkNCg0KDQogICAgZGVmIHRlc3RfbmFtZWRfY2FsbF93aXRoX2t3YXJncyhzZWxmKToNCiAgICAgICAgYXJncyA9IF9DYWxsKCgnZm9vJywgKCksIGRpY3QoYT0zLCBiPTQpKSkNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgZGljdChhPTMsIGI9NCkpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgnZm9vJywgKCksIGRpY3QoYT0zLCBiPTQpKSkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKGFyZ3MsIChkaWN0KGE9MywgYj00KSwpKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKGFyZ3MsICgoKSwgZGljdChhPTMsIGI9NCkpKQ0KDQoNCiAgICBkZWYgdGVzdF9jYWxsX3dpdGhfYXJnc19jYWxsX2VtcHR5X25hbWUoc2VsZik6DQogICAgICAgIGFyZ3MgPSBfQ2FsbCgoKDEsIDIsIDMpLCB7fSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJncywgY2FsbCgxLCAyLCAzKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjYWxsKDEsIDIsIDMpLCBhcmdzKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoY2FsbCgxLCAyLCAzKSBpbiBbYXJnc10pDQoNCg0KICAgIGRlZiB0ZXN0X2NhbGxfbmUoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoX0NhbGwoKCgxLCAyLCAzKSwpKSwgY2FsbCgxLCAyKSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShfQ2FsbCgoKDEsIDIsIDMpLCkpICE9IGNhbGwoMSwgMiwgMykpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShfQ2FsbCgoKDEsIDIpLCB7fSkpICE9IGNhbGwoMSwgMiwgMykpDQoNCg0KICAgIGRlZiB0ZXN0X2NhbGxfbm9uX3R1cGxlcyhzZWxmKToNCiAgICAgICAga2FsbCA9IF9DYWxsKCgoMSwgMiwgMyksKSkNCiAgICAgICAgZm9yIHZhbHVlIGluIDEsIE5vbmUsIHNlbGYsIGludDoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoa2FsbCwgdmFsdWUpDQogICAgICAgICAgICBzZWxmLmFzc2VydEZhbHNlKGthbGwgPT0gdmFsdWUpDQoNCg0KICAgIGRlZiB0ZXN0X3JlcHIoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihfQ2FsbCgpKSwgJ2NhbGwoKScpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihfQ2FsbCgoJ2ZvbycsKSkpLCAnY2FsbC5mb28oKScpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXByKF9DYWxsKCgoMSwgMiwgMyksIHsnYSc6ICdiJ30pKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgImNhbGwoMSwgMiwgMywgYT0nYicpIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXByKF9DYWxsKCgnYmFyJywgKDEsIDIsIDMpLCB7J2EnOiAnYid9KSkpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJjYWxsLmJhcigxLCAyLCAzLCBhPSdiJykiKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKSwgJ2NhbGwnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihjYWxsKSwgJ2NhbGwnKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKCkpLCAnY2FsbCgpJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXByKGNhbGwoMSkpLCAnY2FsbCgxKScpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKHp6PSd0aGluZycpKSwgImNhbGwoeno9J3RoaW5nJykiKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKCkuZm9vKSwgJ2NhbGwoKS5mb28nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlcHIoY2FsbCgxKS5mb28uYmFyKGE9MykuYmluZyksDQogICAgICAgICAgICAgICAgICAgICAgICAgJ2NhbGwoKS5mb28uYmFyKCkuYmluZycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICByZXByKGNhbGwoKS5mb28oMSwgMiwgYT0zKSksDQogICAgICAgICAgICAiY2FsbCgpLmZvbygxLCAyLCBhPTMpIg0KICAgICAgICApDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKCkoKSksICJjYWxsKCkoKSIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihjYWxsKDEpKDIpKSwgImNhbGwoKSgyKSIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICByZXByKGNhbGwoKSgpLmJhcigpLmJhei5iZWVwKDEpKSwNCiAgICAgICAgICAgICJjYWxsKCkoKS5iYXIoKS5iYXouYmVlcCgxKSINCiAgICAgICAgKQ0KDQoNCiAgICBkZWYgdGVzdF9jYWxsKHNlbGYpOg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGNhbGwoKSwgKCcnLCAoKSwge30pKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGNhbGwoJ2ZvbycsICdiYXInLCBvbmU9MywgdHdvPTQpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICgnJywgKCdmb28nLCAnYmFyJyksIHsnb25lJzogMywgJ3R3byc6IDR9KSkNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2soMSwgMiwgMykNCiAgICAgICAgbW9jayhhPTMsIGI9NikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJnc19saXN0LA0KICAgICAgICAgICAgICAgICAgICAgICAgIFtjYWxsKDEsIDIsIDMpLCBjYWxsKGE9MywgYj02KV0pDQoNCiAgICBkZWYgdGVzdF9hdHRyaWJ1dGVfY2FsbChzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjYWxsLmZvbygxKSwgKCdmb28nLCAoMSwpLCB7fSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoY2FsbC5iYXIuYmF6KGZpc2g9J2VnZ3MnKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAoJ2Jhci5iYXonLCAoKSwgeydmaXNoJzogJ2VnZ3MnfSkpDQoNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrLmZvbygxLCAyICwzKQ0KICAgICAgICBtb2NrLmJhci5iYXooYT0zLCBiPTYpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tZXRob2RfY2FsbHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgW2NhbGwuZm9vKDEsIDIsIDMpLCBjYWxsLmJhci5iYXooYT0zLCBiPTYpXSkNCg0KDQogICAgZGVmIHRlc3RfZXh0ZW5kZWRfY2FsbChzZWxmKToNCiAgICAgICAgcmVzdWx0ID0gY2FsbCgxKS5mb28oMikuYmFyKDMsIGE9NCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQsICgnKCkuZm9vKCkuYmFyJywgKDMsKSwgZGljdChhPTQpKSkNCg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCiAgICAgICAgbW9jaygxLCAyLCBhPTMsIGI9NCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJncywgY2FsbCgxLCAyLCBhPTMsIGI9NCkpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwobW9jay5jYWxsX2FyZ3MsIGNhbGwoMSwgMiwgMykpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJnc19saXN0LCBbY2FsbCgxLCAyLCBhPTMsIGI9NCldKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2subW9ja19jYWxscywgW2NhbGwoMSwgMiwgYT0zLCBiPTQpXSkNCg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCiAgICAgICAgbW9jay5mb28oMSkuYmFyKCkoKS5iYXouYmVlcChhPTYpDQoNCiAgICAgICAgbGFzdF9jYWxsID0gY2FsbC5mb28oMSkuYmFyKCkoKS5iYXouYmVlcChhPTYpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzWy0xXSwgbGFzdF9jYWxsKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2subW9ja19jYWxscywgbGFzdF9jYWxsLmNhbGxfbGlzdCgpKQ0KDQoNCiAgICBkZWYgdGVzdF9jYWxsX2xpc3Qoc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBtb2NrKDEpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoY2FsbCgxKS5jYWxsX2xpc3QoKSwgbW9jay5tb2NrX2NhbGxzKQ0KDQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBtb2NrKDEpLm1ldGhvZCgyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGNhbGwoMSkubWV0aG9kKDIpLmNhbGxfbGlzdCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgIG1vY2subW9ja19jYWxscykNCg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCiAgICAgICAgbW9jaygxKS5tZXRob2QoMikoMykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjYWxsKDEpLm1ldGhvZCgyKSgzKS5jYWxsX2xpc3QoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICBtb2NrLm1vY2tfY2FsbHMpDQoNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgIGludChtb2NrKDEpLm1ldGhvZCgyKSgzKS5mb28uYmFyLmJheig0KSg1KSkNCiAgICAgICAga2FsbCA9IGNhbGwoMSkubWV0aG9kKDIpKDMpLmZvby5iYXIuYmF6KDQpKDUpLl9faW50X18oKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGthbGwuY2FsbF9saXN0KCksIG1vY2subW9ja19jYWxscykNCg0KDQogICAgZGVmIHRlc3RfY2FsbF9hbnkoc2VsZik6DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoY2FsbCwgQU5ZKQ0KDQogICAgICAgIG0gPSBNYWdpY01vY2soKQ0KICAgICAgICBpbnQobSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLm1vY2tfY2FsbHMsIFtBTlldKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFtBTlldLCBtLm1vY2tfY2FsbHMpDQoNCg0KICAgIGRlZiB0ZXN0X3R3b19hcmdzX2NhbGwoc2VsZik6DQogICAgICAgIGFyZ3MgPSBfQ2FsbCgoKDEsIDIpLCB7J2EnOiAzfSksIHR3bz1UcnVlKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihhcmdzKSwgMikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzWzBdLCAoMSwgMikpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoYXJnc1sxXSwgeydhJzogM30pDQoNCiAgICAgICAgb3RoZXJfYXJncyA9IF9DYWxsKCgoMSwgMiksIHsnYSc6IDN9KSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhcmdzLCBvdGhlcl9hcmdzKQ0KDQoNCmNsYXNzIFNwZWNTaWduYXR1cmVUZXN0KHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiBfY2hlY2tfc29tZWNsYXNzX21vY2soc2VsZiwgbW9jayk6DQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLCAnZm9vJykNCiAgICAgICAgbW9jay5vbmUoMSwgMikNCiAgICAgICAgbW9jay5vbmUuYXNzZXJ0X2NhbGxlZF93aXRoKDEsIDIpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEFzc2VydGlvbkVycm9yLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBtb2NrLm9uZS5hc3NlcnRfY2FsbGVkX3dpdGgsIDMsIDQpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jay5vbmUsIDEpDQoNCiAgICAgICAgbW9jay50d28oKQ0KICAgICAgICBtb2NrLnR3by5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBc3NlcnRpb25FcnJvciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9jay50d28uYXNzZXJ0X2NhbGxlZF93aXRoLCAzKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2sudHdvLCAxKQ0KDQogICAgICAgIG1vY2sudGhyZWUoKQ0KICAgICAgICBtb2NrLnRocmVlLmFzc2VydF9jYWxsZWRfd2l0aCgpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEFzc2VydGlvbkVycm9yLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBtb2NrLnRocmVlLmFzc2VydF9jYWxsZWRfd2l0aCwgMykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrLnRocmVlLCAzLCAyKQ0KDQogICAgICAgIG1vY2sudGhyZWUoMSkNCiAgICAgICAgbW9jay50aHJlZS5hc3NlcnRfY2FsbGVkX3dpdGgoMSkNCg0KICAgICAgICBtb2NrLnRocmVlKGE9MSkNCiAgICAgICAgbW9jay50aHJlZS5hc3NlcnRfY2FsbGVkX3dpdGgoYT0xKQ0KDQoNCiAgICBkZWYgdGVzdF9iYXNpYyhzZWxmKToNCiAgICAgICAgZm9yIHNwZWMgaW4gKFNvbWVDbGFzcywgU29tZUNsYXNzKCkpOg0KICAgICAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhzcGVjKQ0KICAgICAgICAgICAgc2VsZi5fY2hlY2tfc29tZWNsYXNzX21vY2sobW9jaykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX3JldHVybl92YWx1ZShzZWxmKToNCiAgICAgICAgZGVmIGYoKToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhmLCByZXR1cm5fdmFsdWU9J2ZvbycpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jaygpLCAnZm9vJykNCg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKEZvbywgcmV0dXJuX3ZhbHVlPSdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2soKSwgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X2F1dG9zcGVjX3Jlc2V0X21vY2soc2VsZik6DQogICAgICAgIG0gPSBjcmVhdGVfYXV0b3NwZWMoaW50KQ0KICAgICAgICBpbnQobSkNCiAgICAgICAgbS5yZXNldF9tb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLl9faW50X18uY2FsbF9jb3VudCwgMCkNCg0KDQogICAgZGVmIHRlc3RfbW9ja2luZ191bmJvdW5kX21ldGhvZHMoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIGZvbyhzZWxmLCBmb28pOg0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgcCA9IHBhdGNoLm9iamVjdChGb28sICdmb28nKQ0KICAgICAgICBtb2NrX2ZvbyA9IHAuc3RhcnQoKQ0KICAgICAgICBGb28oKS5mb28oMSkNCg0KICAgICAgICBtb2NrX2Zvby5hc3NlcnRfY2FsbGVkX3dpdGgoMSkNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX3VuYm91bmRfbWV0aG9kcyhzZWxmKToNCiAgICAgICAgIyBzZWUgbW9jayBpc3N1ZSAxMjgNCiAgICAgICAgIyB0aGlzIGlzIGV4cGVjdGVkIHRvIGZhaWwgdW50aWwgdGhlIGlzc3VlIGlzIGZpeGVkDQogICAgICAgIHJldHVybg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIGRlZiBmb28oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGtsYXNzID0gY3JlYXRlX2F1dG9zcGVjKEZvbykNCiAgICAgICAgaW5zdGFuY2UgPSBrbGFzcygpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW5zdGFuY2UuZm9vLCAxKQ0KDQogICAgICAgICMgTm90ZTogbm8gdHlwZSBjaGVja2luZyBvbiB0aGUgInNlbGYiIHBhcmFtZXRlcg0KICAgICAgICBrbGFzcy5mb28oMSkNCiAgICAgICAga2xhc3MuZm9vLmFzc2VydF9jYWxsZWRfd2l0aCgxKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGtsYXNzLmZvbykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX2tleXdvcmRfYXJndW1lbnRzKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIGEgPSAzDQogICAgICAgIG0gPSBjcmVhdGVfYXV0b3NwZWMoRm9vLCBhPSczJykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLmEsICczJykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX2tleXdvcmRfb25seV9hcmd1bWVudHMoc2VsZik6DQogICAgICAgIGRlZiBmb28oYSwgKiwgYj1Ob25lKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtID0gY3JlYXRlX2F1dG9zcGVjKGZvbykNCiAgICAgICAgbSgxKQ0KICAgICAgICBtLmFzc2VydF9jYWxsZWRfd2l0aCgxKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG0sIDEsIDIpDQoNCiAgICAgICAgbSgyLCBiPTMpDQogICAgICAgIG0uYXNzZXJ0X2NhbGxlZF93aXRoKDIsIGI9MykNCg0KDQogICAgZGVmIHRlc3RfZnVuY3Rpb25fYXNfaW5zdGFuY2VfYXR0cmlidXRlKHNlbGYpOg0KICAgICAgICBvYmogPSBTb21lQ2xhc3MoKQ0KICAgICAgICBkZWYgZihhKToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgb2JqLmYgPSBmDQoNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhvYmopDQogICAgICAgIG1vY2suZignYmluZycpDQogICAgICAgIG1vY2suZi5hc3NlcnRfY2FsbGVkX3dpdGgoJ2JpbmcnKQ0KDQoNCiAgICBkZWYgdGVzdF9zcGVjX2FzX2xpc3Qoc2VsZik6DQogICAgICAgICMgYmVjYXVzZSBzcGVjIGFzIGEgbGlzdCBvZiBzdHJpbmdzIGluIHRoZSBtb2NrIGNvbnN0cnVjdG9yIG1lYW5zDQogICAgICAgICMgc29tZXRoaW5nIHZlcnkgZGlmZmVyZW50IHdlIHRyZWF0IGEgbGlzdCBpbnN0YW5jZSBhcyB0aGUgdHlwZS4NCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhbXSkNCiAgICAgICAgbW9jay5hcHBlbmQoJ2ZvbycpDQogICAgICAgIG1vY2suYXBwZW5kLmFzc2VydF9jYWxsZWRfd2l0aCgnZm9vJykNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgbW9jaywgJ2ZvbycpDQoNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBmb28gPSBbXQ0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KICAgICAgICBtb2NrLmZvby5hcHBlbmQoMykNCiAgICAgICAgbW9jay5mb28uYXBwZW5kLmFzc2VydF9jYWxsZWRfd2l0aCgzKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgbW9jay5mb28sICdmb28nKQ0KDQoNCiAgICBkZWYgdGVzdF9hdHRyaWJ1dGVzKHNlbGYpOg0KICAgICAgICBjbGFzcyBTdWIoU29tZUNsYXNzKToNCiAgICAgICAgICAgIGF0dHIgPSBTb21lQ2xhc3MoKQ0KDQogICAgICAgIHN1Yl9tb2NrID0gY3JlYXRlX2F1dG9zcGVjKFN1YikNCg0KICAgICAgICBmb3IgbW9jayBpbiAoc3ViX21vY2ssIHN1Yl9tb2NrLmF0dHIpOg0KICAgICAgICAgICAgc2VsZi5fY2hlY2tfc29tZWNsYXNzX21vY2sobW9jaykNCg0KDQogICAgZGVmIHRlc3RfYnVpbHRpbl9mdW5jdGlvbnNfdHlwZXMoc2VsZik6DQogICAgICAgICMgd2UgY291bGQgcmVwbGFjZSBidWlsdGluIGZ1bmN0aW9ucyAvIG1ldGhvZHMgd2l0aCBhIGZ1bmN0aW9uDQogICAgICAgICMgd2l0aCAqYXJncyAvICoqa3dhcmdzIHNpZ25hdHVyZS4gVXNpbmcgdGhlIGJ1aWx0aW4gbWV0aG9kIHR5cGUNCiAgICAgICAgIyBhcyBhIHNwZWMgc2VlbXMgdG8gd29yayBmYWlybHkgd2VsbCB0aG91Z2guDQogICAgICAgIGNsYXNzIEJ1aWx0aW5TdWJjbGFzcyhsaXN0KToNCiAgICAgICAgICAgIGRlZiBiYXIoc2VsZiwgYXJnKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBzb3J0ZWQgPSBzb3J0ZWQNCiAgICAgICAgICAgIGF0dHIgPSB7fQ0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoQnVpbHRpblN1YmNsYXNzKQ0KICAgICAgICBtb2NrLmFwcGVuZCgzKQ0KICAgICAgICBtb2NrLmFwcGVuZC5hc3NlcnRfY2FsbGVkX3dpdGgoMykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2suYXBwZW5kLCAnZm9vJykNCg0KICAgICAgICBtb2NrLmJhcignZm9vJykNCiAgICAgICAgbW9jay5iYXIuYXNzZXJ0X2NhbGxlZF93aXRoKCdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2suYmFyLCAnZm9vJywgJ2JhcicpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLmJhciwgJ2ZvbycpDQoNCiAgICAgICAgbW9jay5zb3J0ZWQoWzEsIDJdKQ0KICAgICAgICBtb2NrLnNvcnRlZC5hc3NlcnRfY2FsbGVkX3dpdGgoWzEsIDJdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgbW9jay5zb3J0ZWQsICdmb28nKQ0KDQogICAgICAgIG1vY2suYXR0ci5wb3AoMykNCiAgICAgICAgbW9jay5hdHRyLnBvcC5hc3NlcnRfY2FsbGVkX3dpdGgoMykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2suYXR0ciwgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X21ldGhvZF9jYWxscyhzZWxmKToNCiAgICAgICAgY2xhc3MgU3ViKFNvbWVDbGFzcyk6DQogICAgICAgICAgICBhdHRyID0gU29tZUNsYXNzKCkNCg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKFN1YikNCiAgICAgICAgbW9jay5vbmUoMSwgMikNCiAgICAgICAgbW9jay50d28oKQ0KICAgICAgICBtb2NrLnRocmVlKDMpDQoNCiAgICAgICAgZXhwZWN0ZWQgPSBbY2FsbC5vbmUoMSwgMiksIGNhbGwudHdvKCksIGNhbGwudGhyZWUoMyldDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tZXRob2RfY2FsbHMsIGV4cGVjdGVkKQ0KDQogICAgICAgIG1vY2suYXR0ci5vbmUoMSwgMikNCiAgICAgICAgbW9jay5hdHRyLnR3bygpDQogICAgICAgIG1vY2suYXR0ci50aHJlZSgzKQ0KDQogICAgICAgIGV4cGVjdGVkLmV4dGVuZCgNCiAgICAgICAgICAgIFtjYWxsLmF0dHIub25lKDEsIDIpLCBjYWxsLmF0dHIudHdvKCksIGNhbGwuYXR0ci50aHJlZSgzKV0NCiAgICAgICAgKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2subWV0aG9kX2NhbGxzLCBleHBlY3RlZCkNCg0KDQogICAgZGVmIHRlc3RfbWFnaWNfbWV0aG9kcyhzZWxmKToNCiAgICAgICAgY2xhc3MgQnVpbHRpblN1YmNsYXNzKGxpc3QpOg0KICAgICAgICAgICAgYXR0ciA9IHt9DQoNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhCdWlsdGluU3ViY2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtb2NrKSwgW10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW50LCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGludCwgbW9jay5hdHRyKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3QobW9jayksIFtdKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrWydmb28nXSwgTWFnaWNNb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jay5hdHRyWydmb28nXSwgTWFnaWNNb2NrKQ0KDQoNCiAgICBkZWYgdGVzdF9zcGVjX3NldChzZWxmKToNCiAgICAgICAgY2xhc3MgU3ViKFNvbWVDbGFzcyk6DQogICAgICAgICAgICBhdHRyID0gU29tZUNsYXNzKCkNCg0KICAgICAgICBmb3Igc3BlYyBpbiAoU3ViLCBTdWIoKSk6DQogICAgICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKHNwZWMsIHNwZWNfc2V0PVRydWUpDQogICAgICAgICAgICBzZWxmLl9jaGVja19zb21lY2xhc3NfbW9jayhtb2NrKQ0KDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgc2V0YXR0ciwgbW9jaywgJ2ZvbycsICdiYXInKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHNldGF0dHIsIG1vY2suYXR0ciwgJ2ZvbycsICdiYXInKQ0KDQoNCiAgICBkZWYgdGVzdF9kZXNjcmlwdG9ycyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBAY2xhc3NtZXRob2QNCiAgICAgICAgICAgIGRlZiBmKGNscywgYSwgYik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIGcoYSwgYik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIEJhcihGb28pOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzIEJheihTb21lQ2xhc3MsIEJhcik6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgZm9yIHNwZWMgaW4gKEZvbywgRm9vKCksIEJhciwgQmFyKCksIEJheiwgQmF6KCkpOg0KICAgICAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhzcGVjKQ0KICAgICAgICAgICAgbW9jay5mKDEsIDIpDQogICAgICAgICAgICBtb2NrLmYuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoMSwgMikNCg0KICAgICAgICAgICAgbW9jay5nKDMsIDQpDQogICAgICAgICAgICBtb2NrLmcuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoMywgNCkNCg0KDQogICAgZGVmIHRlc3RfcmVjdXJzaXZlKHNlbGYpOg0KICAgICAgICBjbGFzcyBBKG9iamVjdCk6DQogICAgICAgICAgICBkZWYgYShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBmb28gPSAnZm9vIGJhciBiYXonDQogICAgICAgICAgICBiYXIgPSBmb28NCg0KICAgICAgICBBLkIgPSBBDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoQSkNCg0KICAgICAgICBtb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShtb2NrLkIuY2FsbGVkKQ0KDQogICAgICAgIG1vY2suYSgpDQogICAgICAgIG1vY2suQi5hKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgW2NhbGwuYSgpLCBjYWxsLkIuYSgpXSkNCg0KICAgICAgICBzZWxmLmFzc2VydElzKEEuZm9vLCBBLmJhcikNCiAgICAgICAgc2VsZi5hc3NlcnRJc05vdChtb2NrLmZvbywgbW9jay5iYXIpDQogICAgICAgIG1vY2suZm9vLmxvd2VyKCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXNzZXJ0aW9uRXJyb3IsIG1vY2suYmFyLmxvd2VyLmFzc2VydF9jYWxsZWRfd2l0aCkNCg0KDQogICAgZGVmIHRlc3Rfc3BlY19pbmhlcml0YW5jZV9mb3JfY2xhc3NlcyhzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBkZWYgYShzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBjbGFzcyBCYXIob2JqZWN0KToNCiAgICAgICAgICAgICAgICBkZWYgZihzZWxmKToNCiAgICAgICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGNsYXNzX21vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb3QoY2xhc3NfbW9jaywgY2xhc3NfbW9jaygpKQ0KDQogICAgICAgIGZvciB0aGlzX21vY2sgaW4gY2xhc3NfbW9jaywgY2xhc3NfbW9jaygpOg0KICAgICAgICAgICAgdGhpc19tb2NrLmEoKQ0KICAgICAgICAgICAgdGhpc19tb2NrLmEuYXNzZXJ0X2NhbGxlZF93aXRoKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgdGhpc19tb2NrLmEsICdmb28nKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIHRoaXNfbW9jaywgJ2InKQ0KDQogICAgICAgIGluc3RhbmNlX21vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKCkpDQogICAgICAgIGluc3RhbmNlX21vY2suYSgpDQogICAgICAgIGluc3RhbmNlX21vY2suYS5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGluc3RhbmNlX21vY2suYSwgJ2ZvbycpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBpbnN0YW5jZV9tb2NrLCAnYicpDQoNCiAgICAgICAgIyBUaGUgcmV0dXJuIHZhbHVlIGlzbid0IGlzbid0IGNhbGxhYmxlDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW5zdGFuY2VfbW9jaykNCg0KICAgICAgICBpbnN0YW5jZV9tb2NrLkJhci5mKCkNCiAgICAgICAgaW5zdGFuY2VfbW9jay5CYXIuZi5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgaW5zdGFuY2VfbW9jay5CYXIsICdnJykNCg0KICAgICAgICBpbnN0YW5jZV9tb2NrLkJhcigpLmYoKQ0KICAgICAgICBpbnN0YW5jZV9tb2NrLkJhcigpLmYuYXNzZXJ0X2NhbGxlZF93aXRoKCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIGluc3RhbmNlX21vY2suQmFyKCksICdnJykNCg0KDQogICAgZGVmIHRlc3RfaW5oZXJpdChzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBhID0gMw0KDQogICAgICAgIEZvby5Gb28gPSBGb28NCg0KICAgICAgICAjIGNsYXNzDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KICAgICAgICBpbnN0YW5jZSA9IG1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgaW5zdGFuY2UsICdiJykNCg0KICAgICAgICBhdHRyX2luc3RhbmNlID0gbW9jay5Gb28oKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgYXR0cl9pbnN0YW5jZSwgJ2InKQ0KDQogICAgICAgICMgaW5zdGFuY2UNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhGb28oKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2ssICdiJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrKQ0KDQogICAgICAgICMgYXR0cmlidXRlIGluc3RhbmNlDQogICAgICAgIGNhbGxfcmVzdWx0ID0gbW9jay5Gb28oKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgY2FsbF9yZXN1bHQsICdiJykNCg0KDQogICAgZGVmIHRlc3RfYnVpbHRpbnMoc2VsZik6DQogICAgICAgICMgdXNlZCB0byBmYWlsIHdpdGggaW5maW5pdGUgcmVjdXJzaW9uDQogICAgICAgIGNyZWF0ZV9hdXRvc3BlYygxKQ0KDQogICAgICAgIGNyZWF0ZV9hdXRvc3BlYyhpbnQpDQogICAgICAgIGNyZWF0ZV9hdXRvc3BlYygnZm9vJykNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKHN0cikNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKHt9KQ0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMoZGljdCkNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKFtdKQ0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMobGlzdCkNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKHNldCgpKQ0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMoc2V0KQ0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMoMS4wKQ0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMoZmxvYXQpDQogICAgICAgIGNyZWF0ZV9hdXRvc3BlYygxaikNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKGNvbXBsZXgpDQogICAgICAgIGNyZWF0ZV9hdXRvc3BlYyhGYWxzZSkNCiAgICAgICAgY3JlYXRlX2F1dG9zcGVjKFRydWUpDQoNCg0KICAgIGRlZiB0ZXN0X2Z1bmN0aW9uKHNlbGYpOg0KICAgICAgICBkZWYgZihhLCBiKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKGYpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCiAgICAgICAgbW9jaygxLCAyKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCgxLCAyKQ0KDQogICAgICAgIGYuZiA9IGYNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhmKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2suZikNCiAgICAgICAgbW9jay5mKDMsIDQpDQogICAgICAgIG1vY2suZi5hc3NlcnRfY2FsbGVkX3dpdGgoMywgNCkNCg0KDQogICAgZGVmIHRlc3Rfc2tpcF9hdHRyaWJ1dGVlcnJvcnMoc2VsZik6DQogICAgICAgIGNsYXNzIFJhaXNlcihvYmplY3QpOg0KICAgICAgICAgICAgZGVmIF9fZ2V0X18oc2VsZiwgb2JqLCB0eXBlPU5vbmUpOg0KICAgICAgICAgICAgICAgIGlmIG9iaiBpcyBOb25lOg0KICAgICAgICAgICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcignQ2FuIG9ubHkgYmUgYWNjZXNzZWQgdmlhIGFuIGluc3RhbmNlJykNCg0KICAgICAgICBjbGFzcyBSYWlzZXJDbGFzcyhvYmplY3QpOg0KICAgICAgICAgICAgcmFpc2VyID0gUmFpc2VyKCkNCg0KICAgICAgICAgICAgQHN0YXRpY21ldGhvZA0KICAgICAgICAgICAgZGVmIGV4aXN0aW5nKGEsIGIpOg0KICAgICAgICAgICAgICAgIHJldHVybiBhICsgYg0KDQogICAgICAgIHMgPSBjcmVhdGVfYXV0b3NwZWMoUmFpc2VyQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhIHg6IHMuZXhpc3RpbmcoMSwgMiwgMykpDQogICAgICAgIHMuZXhpc3RpbmcoMSwgMikNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGxhbWJkYTogcy5ub25leGlzdGluZykNCg0KICAgICAgICAjIGNoZWNrIHdlIGNhbiBmZXRjaCB0aGUgcmFpc2VyIGF0dHJpYnV0ZSBhbmQgaXQgaGFzIG5vIHNwZWMNCiAgICAgICAgb2JqID0gcy5yYWlzZXINCiAgICAgICAgb2JqLmZvbywgb2JqLmJhcg0KDQoNCiAgICBkZWYgdGVzdF9zaWduYXR1cmVfY2xhc3Moc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIGEsIGI9Myk6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCiAgICAgICAgbW9jaygxKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKDEpDQoNCiAgICAgICAgbW9jayg0LCA1KQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCg0LCA1KQ0KDQoNCiAgICBkZWYgdGVzdF9jbGFzc193aXRoX25vX2luaXQoc2VsZik6DQogICAgICAgICMgdGhpcyB1c2VkIHRvIHJhaXNlIGFuIGV4Y2VwdGlvbg0KICAgICAgICAjIGR1ZSB0byB0cnlpbmcgdG8gZ2V0IGEgc2lnbmF0dXJlIGZyb20gb2JqZWN0Ll9faW5pdF9fDQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KDQoNCiAgICBkZWYgdGVzdF9zaWduYXR1cmVfY2FsbGFibGUoc2VsZik6DQogICAgICAgIGNsYXNzIENhbGxhYmxlKG9iamVjdCk6DQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgZGVmIF9fY2FsbF9fKHNlbGYsIGEpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKENhbGxhYmxlKQ0KICAgICAgICBtb2NrKCkNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaywgJ2EnKQ0KDQogICAgICAgIGluc3RhbmNlID0gbW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW5zdGFuY2UpDQogICAgICAgIGluc3RhbmNlKGE9J2EnKQ0KICAgICAgICBpbnN0YW5jZS5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aChhPSdhJykNCiAgICAgICAgaW5zdGFuY2UoJ2EnKQ0KICAgICAgICBpbnN0YW5jZS5hc3NlcnRfY2FsbGVkX3dpdGgoJ2EnKQ0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoQ2FsbGFibGUoKSkNCiAgICAgICAgbW9jayhhPSdhJykNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aChhPSdhJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrKQ0KICAgICAgICBtb2NrKCdhJykNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX3dpdGgoJ2EnKQ0KDQoNCiAgICBkZWYgdGVzdF9zaWduYXR1cmVfbm9uY2FsbGFibGUoc2VsZik6DQogICAgICAgIGNsYXNzIE5vbkNhbGxhYmxlKG9iamVjdCk6DQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoTm9uQ2FsbGFibGUpDQogICAgICAgIGluc3RhbmNlID0gbW9jaygpDQogICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2ssICdhJykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpbnN0YW5jZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpbnN0YW5jZSwgJ2EnKQ0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoTm9uQ2FsbGFibGUoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2ssICdhJykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX25vbmUoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgYmFyID0gTm9uZQ0KDQogICAgICAgIG1vY2sgPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KICAgICAgICBub25lID0gbW9jay5iYXINCiAgICAgICAgc2VsZi5hc3NlcnROb3RJc0luc3RhbmNlKG5vbmUsIHR5cGUoTm9uZSkpDQoNCiAgICAgICAgbm9uZS5mb28oKQ0KICAgICAgICBub25lLmZvby5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQoNCg0KICAgIGRlZiB0ZXN0X2F1dG9zcGVjX2Z1bmN0aW9uc193aXRoX3NlbGZfaW5fb2RkX3BsYWNlKHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIGRlZiBmKGEsIHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBhID0gY3JlYXRlX2F1dG9zcGVjKEZvbykNCiAgICAgICAgYS5mKHNlbGY9MTApDQogICAgICAgIGEuZi5hc3NlcnRfY2FsbGVkX3dpdGgoc2VsZj0xMCkNCg0KDQogICAgZGVmIHRlc3RfYXV0b3NwZWNfcHJvcGVydHkoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgQHByb3BlcnR5DQogICAgICAgICAgICBkZWYgZm9vKHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiAzDQoNCiAgICAgICAgZm9vID0gY3JlYXRlX2F1dG9zcGVjKEZvbykNCiAgICAgICAgbW9ja19wcm9wZXJ0eSA9IGZvby5mb28NCg0KICAgICAgICAjIG5vIHNwZWMgb24gcHJvcGVydGllcw0KICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNpbnN0YW5jZShtb2NrX3Byb3BlcnR5LCBNYWdpY01vY2spKQ0KICAgICAgICBtb2NrX3Byb3BlcnR5KDEsIDIsIDMpDQogICAgICAgIG1vY2tfcHJvcGVydHkuYWJjKDQsIDUsIDYpDQogICAgICAgIG1vY2tfcHJvcGVydHkuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoMSwgMiwgMykNCiAgICAgICAgbW9ja19wcm9wZXJ0eS5hYmMuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoNCwgNSwgNikNCg0KDQogICAgZGVmIHRlc3RfYXV0b3NwZWNfc2xvdHMoc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgX19zbG90c19fID0gWydhJ10NCg0KICAgICAgICBmb28gPSBjcmVhdGVfYXV0b3NwZWMoRm9vKQ0KICAgICAgICBtb2NrX3Nsb3QgPSBmb28uYQ0KDQogICAgICAgICMgbm8gc3BlYyBvbiBzbG90cw0KICAgICAgICBtb2NrX3Nsb3QoMSwgMiwgMykNCiAgICAgICAgbW9ja19zbG90LmFiYyg0LCA1LCA2KQ0KICAgICAgICBtb2NrX3Nsb3QuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoMSwgMiwgMykNCiAgICAgICAgbW9ja19zbG90LmFiYy5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCg0LCA1LCA2KQ0KDQoNCmNsYXNzIFRlc3RDYWxsTGlzdCh1bml0dGVzdC5UZXN0Q2FzZSk6DQoNCiAgICBkZWYgdGVzdF9hcmdzX2xpc3RfY29udGFpbnNfY2FsbF9saXN0KHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrLmNhbGxfYXJnc19saXN0LCBfQ2FsbExpc3QpDQoNCiAgICAgICAgbW9jaygxLCAyKQ0KICAgICAgICBtb2NrKGE9MykNCiAgICAgICAgbW9jaygzLCA0KQ0KICAgICAgICBtb2NrKGI9NikNCg0KICAgICAgICBmb3Iga2FsbCBpbiBjYWxsKDEsIDIpLCBjYWxsKGE9MyksIGNhbGwoMywgNCksIGNhbGwoYj02KToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShrYWxsIGluIG1vY2suY2FsbF9hcmdzX2xpc3QpDQoNCiAgICAgICAgY2FsbHMgPSBbY2FsbChhPTMpLCBjYWxsKDMsIDQpXQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoY2FsbHMgaW4gbW9jay5jYWxsX2FyZ3NfbGlzdCkNCiAgICAgICAgY2FsbHMgPSBbY2FsbCgxLCAyKSwgY2FsbChhPTMpXQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoY2FsbHMgaW4gbW9jay5jYWxsX2FyZ3NfbGlzdCkNCiAgICAgICAgY2FsbHMgPSBbY2FsbCgzLCA0KSwgY2FsbChiPTYpXQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoY2FsbHMgaW4gbW9jay5jYWxsX2FyZ3NfbGlzdCkNCiAgICAgICAgY2FsbHMgPSBbY2FsbCgzLCA0KV0NCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGNhbGxzIGluIG1vY2suY2FsbF9hcmdzX2xpc3QpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShjYWxsKCdmaXNoJykgaW4gbW9jay5jYWxsX2FyZ3NfbGlzdCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShbY2FsbCgnZmlzaCcpXSBpbiBtb2NrLmNhbGxfYXJnc19saXN0KQ0KDQoNCiAgICBkZWYgdGVzdF9jYWxsX2xpc3Rfc3RyKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2soMSwgMikNCiAgICAgICAgbW9jay5mb28oYT0zKQ0KICAgICAgICBtb2NrLmZvby5iYXIoKS5iYXooJ2Zpc2gnLCBjYXQ9J2RvZycpDQoNCiAgICAgICAgZXhwZWN0ZWQgPSAoDQogICAgICAgICAgICAiW2NhbGwoMSwgMiksXG4iDQogICAgICAgICAgICAiIGNhbGwuZm9vKGE9MyksXG4iDQogICAgICAgICAgICAiIGNhbGwuZm9vLmJhcigpLFxuIg0KICAgICAgICAgICAgIiBjYWxsLmZvby5iYXIoKS5iYXooJ2Zpc2gnLCBjYXQ9J2RvZycpXSINCiAgICAgICAgKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihtb2NrLm1vY2tfY2FsbHMpLCBleHBlY3RlZCkNCg0KDQogICAgZGVmIHRlc3RfcHJvcGVydHltb2NrKHNlbGYpOg0KICAgICAgICBwID0gcGF0Y2goJyVzLlNvbWVDbGFzcy5vbmUnICUgX19uYW1lX18sIG5ld19jYWxsYWJsZT1Qcm9wZXJ0eU1vY2spDQogICAgICAgIG1vY2sgPSBwLnN0YXJ0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgU29tZUNsYXNzLm9uZQ0KICAgICAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQoNCiAgICAgICAgICAgIHMgPSBTb21lQ2xhc3MoKQ0KICAgICAgICAgICAgcy5vbmUNCiAgICAgICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF93aXRoKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBbY2FsbCgpLCBjYWxsKCldKQ0KDQogICAgICAgICAgICBzLm9uZSA9IDMNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBbY2FsbCgpLCBjYWxsKCksIGNhbGwoMyldKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgcC5zdG9wKCkNCg0KDQogICAgZGVmIHRlc3RfcHJvcGVydHltb2NrX3JldHVybnZhbHVlKHNlbGYpOg0KICAgICAgICBtID0gTWFnaWNNb2NrKCkNCiAgICAgICAgcCA9IFByb3BlcnR5TW9jaygpDQogICAgICAgIHR5cGUobSkuZm9vID0gcA0KDQogICAgICAgIHJldHVybmVkID0gbS5mb28NCiAgICAgICAgcC5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShyZXR1cm5lZCwgTWFnaWNNb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdElzSW5zdGFuY2UocmV0dXJuZWQsIFByb3BlcnR5TW9jaykNCg0KDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgIHVuaXR0ZXN0Lm1haW4oKQ0K',
'/Lib/unittest/test/testmock/testmock.py':'aW1wb3J0IGNvcHkNCmltcG9ydCBzeXMNCg0KaW1wb3J0IHVuaXR0ZXN0DQpmcm9tIHVuaXR0ZXN0LnRlc3QudGVzdG1vY2suc3VwcG9ydCBpbXBvcnQgaXNfaW5zdGFuY2UNCmZyb20gdW5pdHRlc3QgaW1wb3J0IG1vY2sNCmZyb20gdW5pdHRlc3QubW9jayBpbXBvcnQgKA0KICAgIGNhbGwsIERFRkFVTFQsIHBhdGNoLCBzZW50aW5lbCwNCiAgICBNYWdpY01vY2ssIE1vY2ssIE5vbkNhbGxhYmxlTW9jaywNCiAgICBOb25DYWxsYWJsZU1hZ2ljTW9jaywgX0NhbGxMaXN0LA0KICAgIGNyZWF0ZV9hdXRvc3BlYw0KKQ0KDQoNCmNsYXNzIEl0ZXIob2JqZWN0KToNCiAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgIHNlbGYudGhpbmcgPSBpdGVyKFsndGhpcycsICdpcycsICdhbicsICdpdGVyJ10pDQoNCiAgICBkZWYgX19pdGVyX18oc2VsZik6DQogICAgICAgIHJldHVybiBzZWxmDQoNCiAgICBkZWYgbmV4dChzZWxmKToNCiAgICAgICAgcmV0dXJuIG5leHQoc2VsZi50aGluZykNCg0KICAgIF9fbmV4dF9fID0gbmV4dA0KDQoNCg0KY2xhc3MgTW9ja1Rlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgZGVmIHRlc3RfYWxsKHNlbGYpOg0KICAgICAgICAjIGlmIF9fYWxsX18gaXMgYmFkbHkgZGVmaW5lZCB0aGVuIGltcG9ydCAqIHdpbGwgcmFpc2UgYW4gZXJyb3INCiAgICAgICAgIyBXZSBoYXZlIHRvIGV4ZWMgaXQgYmVjYXVzZSB5b3UgY2FuJ3QgaW1wb3J0ICogaW5zaWRlIGEgbWV0aG9kDQogICAgICAgICMgaW4gUHl0aG9uIDMNCiAgICAgICAgZXhlYygiZnJvbSB1bml0dGVzdC5tb2NrIGltcG9ydCAqIikNCg0KDQogICAgZGVmIHRlc3RfY29uc3RydWN0b3Ioc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCg0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKG1vY2suY2FsbGVkLCAiY2FsbGVkIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9jb3VudCwgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiY2FsbF9jb3VudCBub3QgaW5pdGlhbGlzZWQgY29ycmVjdGx5IikNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKG1vY2sucmV0dXJuX3ZhbHVlLCBNb2NrKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJyZXR1cm5fdmFsdWUgbm90IGluaXRpYWxpc2VkIGNvcnJlY3RseSIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJncywgTm9uZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiY2FsbF9hcmdzIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9hcmdzX2xpc3QsIFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJjYWxsX2FyZ3NfbGlzdCBub3QgaW5pdGlhbGlzZWQgY29ycmVjdGx5IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgW10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICJtZXRob2RfY2FsbHMgbm90IGluaXRpYWxpc2VkIGNvcnJlY3RseSIpDQoNCiAgICAgICAgIyBDYW4ndCB1c2UgaGFzYXR0ciBmb3IgdGhpcyB0ZXN0IGFzIGl0IGFsd2F5cyByZXR1cm5zIFRydWUgb24gYSBtb2NrDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoJ19pdGVtcycgaW4gbW9jay5fX2RpY3RfXywNCiAgICAgICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCBtb2NrIHNob3VsZCBub3QgaGF2ZSAnX2l0ZW1zJyBhdHRyaWJ1dGUiKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0SXNOb25lKG1vY2suX21vY2tfcGFyZW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAicGFyZW50IG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkiKQ0KICAgICAgICBzZWxmLmFzc2VydElzTm9uZShtb2NrLl9tb2NrX21ldGhvZHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICJtZXRob2RzIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suX21vY2tfY2hpbGRyZW4sIHt9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICJjaGlsZHJlbiBub3QgaW5pdGlhbGlzZWQgaW5jb3JyZWN0bHkiKQ0KDQoNCiAgICBkZWYgdGVzdF9yZXR1cm5fdmFsdWVfaW5fY29uc3RydWN0b3Ioc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKHJldHVybl92YWx1ZT1Ob25lKQ0KICAgICAgICBzZWxmLmFzc2VydElzTm9uZShtb2NrLnJldHVybl92YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgInJldHVybiB2YWx1ZSBpbiBjb25zdHJ1Y3RvciBub3QgaG9ub3VyZWQiKQ0KDQoNCiAgICBkZWYgdGVzdF9yZXByKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jayhuYW1lPSdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCdmb28nLCByZXByKG1vY2spKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCInJXMnIiAlIGlkKG1vY2spLCByZXByKG1vY2spKQ0KDQogICAgICAgIG1vY2tzID0gWyhNb2NrKCksICdtb2NrJyksIChNb2NrKG5hbWU9J2JhcicpLCAnYmFyJyldDQogICAgICAgIGZvciBtb2NrLCBuYW1lIGluIG1vY2tzOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbignJXMuYmFyJyAlIG5hbWUsIHJlcHIobW9jay5iYXIpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbignJXMuZm9vKCknICUgbmFtZSwgcmVwcihtb2NrLmZvbygpKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oJyVzLmZvbygpLmJpbmcnICUgbmFtZSwgcmVwcihtb2NrLmZvbygpLmJpbmcpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbignJXMoKScgJSBuYW1lLCByZXByKG1vY2soKSkpDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKCclcygpKCknICUgbmFtZSwgcmVwcihtb2NrKCkoKSkpDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKCclcygpKCkuZm9vLmJhci5iYXooKS5iaW5nJyAlIG5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgIHJlcHIobW9jaygpKCkuZm9vLmJhci5iYXooKS5iaW5nKSkNCg0KDQogICAgZGVmIHRlc3RfcmVwcl93aXRoX3NwZWMoc2VsZik6DQogICAgICAgIGNsYXNzIFgob2JqZWN0KToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjPVgpDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oIiBzcGVjPSdYJyAiLCByZXByKG1vY2spKQ0KDQogICAgICAgIG1vY2sgPSBNb2NrKHNwZWM9WCgpKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCIgc3BlYz0nWCcgIiwgcmVwcihtb2NrKSkNCg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjX3NldD1YKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCIgc3BlY19zZXQ9J1gnICIsIHJlcHIobW9jaykpDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlY19zZXQ9WCgpKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCIgc3BlY19zZXQ9J1gnICIsIHJlcHIobW9jaykpDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlYz1YLCBuYW1lPSdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCIgc3BlYz0nWCcgIiwgcmVwcihtb2NrKSkNCiAgICAgICAgc2VsZi5hc3NlcnRJbigiIG5hbWU9J2ZvbycgIiwgcmVwcihtb2NrKSkNCg0KICAgICAgICBtb2NrID0gTW9jayhuYW1lPSdmb28nKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKCJzcGVjIiwgcmVwcihtb2NrKSkNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90SW4oInNwZWMiLCByZXByKG1vY2spKQ0KDQogICAgICAgIG1vY2sgPSBNb2NrKHNwZWM9Wydmb28nXSkNCiAgICAgICAgc2VsZi5hc3NlcnROb3RJbigic3BlYyIsIHJlcHIobW9jaykpDQoNCg0KICAgIGRlZiB0ZXN0X3NpZGVfZWZmZWN0KHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQoNCiAgICAgICAgZGVmIGVmZmVjdCgqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAgICAgcmFpc2UgU3lzdGVtRXJyb3IoJ2thYmxvb2llJykNCg0KICAgICAgICBtb2NrLnNpZGVfZWZmZWN0ID0gZWZmZWN0DQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN5c3RlbUVycm9yLCBtb2NrLCAxLCAyLCBmaXNoPTMpDQogICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF93aXRoKDEsIDIsIGZpc2g9MykNCg0KICAgICAgICByZXN1bHRzID0gWzEsIDIsIDNdDQogICAgICAgIGRlZiBlZmZlY3QoKToNCiAgICAgICAgICAgIHJldHVybiByZXN1bHRzLnBvcCgpDQogICAgICAgIG1vY2suc2lkZV9lZmZlY3QgPSBlZmZlY3QNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFttb2NrKCksIG1vY2soKSwgbW9jaygpXSwgWzMsIDIsIDFdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAic2lkZSBlZmZlY3Qgbm90IHVzZWQgY29ycmVjdGx5IikNCg0KICAgICAgICBtb2NrID0gTW9jayhzaWRlX2VmZmVjdD1zZW50aW5lbC5TaWRlRWZmZWN0KQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suc2lkZV9lZmZlY3QsIHNlbnRpbmVsLlNpZGVFZmZlY3QsDQogICAgICAgICAgICAgICAgICAgICAgICAgICJzaWRlIGVmZmVjdCBpbiBjb25zdHJ1Y3RvciBub3QgdXNlZCIpDQoNCiAgICAgICAgZGVmIHNpZGVfZWZmZWN0KCk6DQogICAgICAgICAgICByZXR1cm4gREVGQVVMVA0KICAgICAgICBtb2NrID0gTW9jayhzaWRlX2VmZmVjdD1zaWRlX2VmZmVjdCwgcmV0dXJuX3ZhbHVlPXNlbnRpbmVsLlJFVFVSTikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCksIHNlbnRpbmVsLlJFVFVSTikNCg0KDQogICAgQHVuaXR0ZXN0LnNraXBVbmxlc3MoJ2phdmEnIGluIHN5cy5wbGF0Zm9ybSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1RoaXMgdGVzdCBvbmx5IGFwcGxpZXMgdG8gSnl0aG9uJykNCiAgICBkZWYgdGVzdF9qYXZhX2V4Y2VwdGlvbl9zaWRlX2VmZmVjdChzZWxmKToNCiAgICAgICAgaW1wb3J0IGphdmENCiAgICAgICAgbW9jayA9IE1vY2soc2lkZV9lZmZlY3Q9amF2YS5sYW5nLlJ1bnRpbWVFeGNlcHRpb24oIkJvb20hIikpDQoNCiAgICAgICAgIyBjYW4ndCB1c2UgYXNzZXJ0UmFpc2VzIHdpdGggamF2YSBleGNlcHRpb25zDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIG1vY2soMSwgMiwgZmlzaD0zKQ0KICAgICAgICBleGNlcHQgamF2YS5sYW5nLlJ1bnRpbWVFeGNlcHRpb246DQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmZhaWwoJ2phdmEgZXhjZXB0aW9uIG5vdCByYWlzZWQnKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCgxLDIsIGZpc2g9MykNCg0KDQogICAgZGVmIHRlc3RfcmVzZXRfbW9jayhzZWxmKToNCiAgICAgICAgcGFyZW50ID0gTW9jaygpDQogICAgICAgIHNwZWMgPSBbInNvbWV0aGluZyJdDQogICAgICAgIG1vY2sgPSBNb2NrKG5hbWU9ImNoaWxkIiwgcGFyZW50PXBhcmVudCwgc3BlYz1zcGVjKQ0KICAgICAgICBtb2NrKHNlbnRpbmVsLlNvbWV0aGluZywgc29tZXRoaW5nPXNlbnRpbmVsLlNvbWV0aGluZ0Vsc2UpDQogICAgICAgIHNvbWV0aGluZyA9IG1vY2suc29tZXRoaW5nDQogICAgICAgIG1vY2suc29tZXRoaW5nKCkNCiAgICAgICAgbW9jay5zaWRlX2VmZmVjdCA9IHNlbnRpbmVsLlNpZGVFZmZlY3QNCiAgICAgICAgcmV0dXJuX3ZhbHVlID0gbW9jay5yZXR1cm5fdmFsdWUNCiAgICAgICAgcmV0dXJuX3ZhbHVlKCkNCg0KICAgICAgICBtb2NrLnJlc2V0X21vY2soKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5fbW9ja19uYW1lLCAiY2hpbGQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIGluY29ycmVjdGx5IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLl9tb2NrX3BhcmVudCwgcGFyZW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICJwYXJlbnQgaW5jb3JyZWN0bHkgcmVzZXQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suX21vY2tfbWV0aG9kcywgc3BlYywNCiAgICAgICAgICAgICAgICAgICAgICAgICAibWV0aG9kcyBpbmNvcnJlY3RseSByZXNldCIpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShtb2NrLmNhbGxlZCwgImNhbGxlZCBub3QgcmVzZXQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9jb3VudCwgMCwgImNhbGxfY291bnQgbm90IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJncywgTm9uZSwgImNhbGxfYXJncyBub3QgcmVzZXQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9hcmdzX2xpc3QsIFtdLCAiY2FsbF9hcmdzX2xpc3Qgbm90IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgW10sDQogICAgICAgICAgICAgICAgICAgICAgICAibWV0aG9kX2NhbGxzIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHk6ICVyICE9ICVyIiAlDQogICAgICAgICAgICAgICAgICAgICAgICAobW9jay5tZXRob2RfY2FsbHMsIFtdKSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIFtdKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5zaWRlX2VmZmVjdCwgc2VudGluZWwuU2lkZUVmZmVjdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgInNpZGVfZWZmZWN0IGluY29ycmVjdGx5IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLnJldHVybl92YWx1ZSwgcmV0dXJuX3ZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAicmV0dXJuX3ZhbHVlIGluY29ycmVjdGx5IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShyZXR1cm5fdmFsdWUuY2FsbGVkLCAicmV0dXJuIHZhbHVlIG1vY2sgbm90IHJlc2V0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLl9tb2NrX2NoaWxkcmVuLCB7J3NvbWV0aGluZyc6IHNvbWV0aGluZ30sDQogICAgICAgICAgICAgICAgICAgICAgICAgICJjaGlsZHJlbiByZXNldCBpbmNvcnJlY3RseSIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5zb21ldGhpbmcsIHNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgImNoaWxkcmVuIGluY29ycmVjdGx5IGNsZWFyZWQiKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKG1vY2suc29tZXRoaW5nLmNhbGxlZCwgImNoaWxkIG5vdCByZXNldCIpDQoNCg0KICAgIGRlZiB0ZXN0X3Jlc2V0X21vY2tfcmVjdXJzaW9uKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2sucmV0dXJuX3ZhbHVlID0gbW9jaw0KDQogICAgICAgICMgdXNlZCB0byBjYXVzZSByZWN1cnNpb24NCiAgICAgICAgbW9jay5yZXNldF9tb2NrKCkNCg0KDQogICAgZGVmIHRlc3RfY2FsbChzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UobW9jay5yZXR1cm5fdmFsdWUsIE1vY2spLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkRlZmF1bHQgcmV0dXJuX3ZhbHVlIHNob3VsZCBiZSBhIE1vY2siKQ0KDQogICAgICAgIHJlc3VsdCA9IG1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2soKSwgcmVzdWx0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICJkaWZmZXJlbnQgcmVzdWx0IGZyb20gY29uc2VjdXRpdmUgY2FsbHMiKQ0KICAgICAgICBtb2NrLnJlc2V0X21vY2soKQ0KDQogICAgICAgIHJldF92YWwgPSBtb2NrKHNlbnRpbmVsLkFyZykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKG1vY2suY2FsbGVkLCAiY2FsbGVkIG5vdCBzZXQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9jb3VudCwgMSwgImNhbGxfY291bnQgaW5jb3JlZWN0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJncywgKChzZW50aW5lbC5BcmcsKSwge30pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJjYWxsX2FyZ3Mgbm90IHNldCIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5jYWxsX2FyZ3NfbGlzdCwgWygoc2VudGluZWwuQXJnLCksIHt9KV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgImNhbGxfYXJnc19saXN0IG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkiKQ0KDQogICAgICAgIG1vY2sucmV0dXJuX3ZhbHVlID0gc2VudGluZWwuUmV0dXJuVmFsdWUNCiAgICAgICAgcmV0X3ZhbCA9IG1vY2soc2VudGluZWwuQXJnLCBrZXk9c2VudGluZWwuS2V5QXJnKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJldF92YWwsIHNlbnRpbmVsLlJldHVyblZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJpbmNvcnJlY3QgcmV0dXJuIHZhbHVlIikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9jb3VudCwgMiwgImNhbGxfY291bnQgaW5jb3JyZWN0IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJncywNCiAgICAgICAgICAgICAgICAgICAgICAgICAoKHNlbnRpbmVsLkFyZywpLCB7J2tleSc6IHNlbnRpbmVsLktleUFyZ30pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJjYWxsX2FyZ3Mgbm90IHNldCIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5jYWxsX2FyZ3NfbGlzdCwgWw0KICAgICAgICAgICAgKChzZW50aW5lbC5BcmcsKSwge30pLA0KICAgICAgICAgICAgKChzZW50aW5lbC5BcmcsKSwgeydrZXknOiBzZW50aW5lbC5LZXlBcmd9KQ0KICAgICAgICBdLA0KICAgICAgICAgICAgImNhbGxfYXJnc19saXN0IG5vdCBzZXQiKQ0KDQoNCiAgICBkZWYgdGVzdF9jYWxsX2FyZ3NfY29tcGFyaXNvbihzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrKCkNCiAgICAgICAgbW9jayhzZW50aW5lbC5BcmcpDQogICAgICAgIG1vY2soa3c9c2VudGluZWwuS3dhcmcpDQogICAgICAgIG1vY2soc2VudGluZWwuQXJnLCBrdz1zZW50aW5lbC5Ld2FyZykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmNhbGxfYXJnc19saXN0LCBbDQogICAgICAgICAgICAoKSwNCiAgICAgICAgICAgICgoc2VudGluZWwuQXJnLCksKSwNCiAgICAgICAgICAgICh7Imt3Ijogc2VudGluZWwuS3dhcmd9LCksDQogICAgICAgICAgICAoKHNlbnRpbmVsLkFyZywpLCB7Imt3Ijogc2VudGluZWwuS3dhcmd9KQ0KICAgICAgICBdKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suY2FsbF9hcmdzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICgoc2VudGluZWwuQXJnLCksIHsia3ciOiBzZW50aW5lbC5Ld2FyZ30pKQ0KDQoNCiAgICBkZWYgdGVzdF9hc3NlcnRfY2FsbGVkX3dpdGgoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jaygpDQoNCiAgICAgICAgIyBXaWxsIHJhaXNlIGFuIGV4Y2VwdGlvbiBpZiBpdCBmYWlscw0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCgpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEFzc2VydGlvbkVycm9yLCBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCwgMSkNCg0KICAgICAgICBtb2NrLnJlc2V0X21vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBc3NlcnRpb25FcnJvciwgbW9jay5hc3NlcnRfY2FsbGVkX3dpdGgpDQoNCiAgICAgICAgbW9jaygxLCAyLCAzLCBhPSdmaXNoJywgYj0nbm90aGluZycpDQogICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF93aXRoKDEsIDIsIDMsIGE9J2Zpc2gnLCBiPSdub3RoaW5nJykNCg0KDQogICAgZGVmIHRlc3RfYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jaygpDQoNCiAgICAgICAgIyBXaWxsIHJhaXNlIGFuIGV4Y2VwdGlvbiBpZiBpdCBmYWlscw0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKCkNCg0KICAgICAgICBtb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXNzZXJ0aW9uRXJyb3IsIG1vY2suYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgpDQoNCiAgICAgICAgbW9jay5yZXNldF9tb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXNzZXJ0aW9uRXJyb3IsIG1vY2suYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgpDQoNCiAgICAgICAgbW9jaygnZm9vJywgJ2JhcicsIGJhej0yKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKCdmb28nLCAnYmFyJywgYmF6PTIpDQoNCiAgICAgICAgbW9jay5yZXNldF9tb2NrKCkNCiAgICAgICAgbW9jaygnZm9vJywgJ2JhcicsIGJhej0yKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIEFzc2VydGlvbkVycm9yLA0KICAgICAgICAgICAgbGFtYmRhOiBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKCdib2InLCAnYmFyJywgYmF6PTIpDQogICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfYXR0cmlidXRlX2FjY2Vzc19yZXR1cm5zX21vY2tzKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIHNvbWV0aGluZyA9IG1vY2suc29tZXRoaW5nDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc19pbnN0YW5jZShzb21ldGhpbmcsIE1vY2spLCAiYXR0cmlidXRlIGlzbid0IGEgbW9jayIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5zb21ldGhpbmcsIHNvbWV0aGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAiZGlmZmVyZW50IGF0dHJpYnV0ZXMgcmV0dXJuZWQgZm9yIHNhbWUgbmFtZSIpDQoNCiAgICAgICAgIyBVc2FnZSBleGFtcGxlDQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jay5zb21ldGhpbmcucmV0dXJuX3ZhbHVlID0gMw0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5zb21ldGhpbmcoKSwgMywgIm1ldGhvZCByZXR1cm5lZCB3cm9uZyB2YWx1ZSIpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShtb2NrLnNvbWV0aGluZy5jYWxsZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAibWV0aG9kIGRpZG4ndCByZWNvcmQgYmVpbmcgY2FsbGVkIikNCg0KDQogICAgZGVmIHRlc3RfYXR0cmlidXRlc19oYXZlX25hbWVfYW5kX3BhcmVudF9zZXQoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgc29tZXRoaW5nID0gbW9jay5zb21ldGhpbmcNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZy5fbW9ja19uYW1lLCAic29tZXRoaW5nIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiYXR0cmlidXRlIG5hbWUgbm90IHNldCBjb3JyZWN0bHkiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZy5fbW9ja19wYXJlbnQsIG1vY2ssDQogICAgICAgICAgICAgICAgICAgICAgICAgImF0dHJpYnV0ZSBwYXJlbnQgbm90IHNldCBjb3JyZWN0bHkiKQ0KDQoNCiAgICBkZWYgdGVzdF9tZXRob2RfY2FsbHNfcmVjb3JkZWQoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jay5zb21ldGhpbmcoMywgZmlzaD1Ob25lKQ0KICAgICAgICBtb2NrLnNvbWV0aGluZ19lbHNlLnNvbWV0aGluZyg2LCBjYWtlPXNlbnRpbmVsLkNha2UpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLnNvbWV0aGluZ19lbHNlLm1ldGhvZF9jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgWygic29tZXRoaW5nIiwgKDYsKSwgeydjYWtlJzogc2VudGluZWwuQ2FrZX0pXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIm1ldGhvZCBjYWxscyBub3QgcmVjb3JkZWQgY29ycmVjdGx5IikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWw0KICAgICAgICAgICAgKCJzb21ldGhpbmciLCAoMywpLCB7J2Zpc2gnOiBOb25lfSksDQogICAgICAgICAgICAoInNvbWV0aGluZ19lbHNlLnNvbWV0aGluZyIsICg2LCksIHsnY2FrZSc6IHNlbnRpbmVsLkNha2V9KQ0KICAgICAgICBdLA0KICAgICAgICAgICAgIm1ldGhvZCBjYWxscyBub3QgcmVjb3JkZWQgY29ycmVjdGx5IikNCg0KDQogICAgZGVmIHRlc3RfbWV0aG9kX2NhbGxzX2NvbXBhcmVfZWFzaWx5KHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2suc29tZXRoaW5nKCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWygnc29tZXRoaW5nJywpXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWygnc29tZXRoaW5nJywgKCksIHt9KV0pDQoNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrLnNvbWV0aGluZygnZGlmZmVyZW50JykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWygnc29tZXRoaW5nJywgKCdkaWZmZXJlbnQnLCkpXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICBbKCdzb21ldGhpbmcnLCAoJ2RpZmZlcmVudCcsKSwge30pXSkNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2suc29tZXRoaW5nKHg9MSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWygnc29tZXRoaW5nJywgeyd4JzogMX0pXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgWygnc29tZXRoaW5nJywgKCksIHsneCc6IDF9KV0pDQoNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrLnNvbWV0aGluZygnZGlmZmVyZW50Jywgc29tZT0nbW9yZScpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tZXRob2RfY2FsbHMsIFsNCiAgICAgICAgICAgICgnc29tZXRoaW5nJywgKCdkaWZmZXJlbnQnLCksIHsnc29tZSc6ICdtb3JlJ30pDQogICAgICAgIF0pDQoNCg0KICAgIGRlZiB0ZXN0X29ubHlfYWxsb3dlZF9tZXRob2RzX2V4aXN0KHNlbGYpOg0KICAgICAgICBmb3Igc3BlYyBpbiBbJ3NvbWV0aGluZyddLCAoJ3NvbWV0aGluZycsKToNCiAgICAgICAgICAgIGZvciBhcmcgaW4gJ3NwZWMnLCAnc3BlY19zZXQnOg0KICAgICAgICAgICAgICAgIG1vY2sgPSBNb2NrKCoqe2FyZzogc3BlY30pDQoNCiAgICAgICAgICAgICAgICAjIHRoaXMgc2hvdWxkIGJlIGFsbG93ZWQNCiAgICAgICAgICAgICAgICBtb2NrLnNvbWV0aGluZw0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzUmVnZXgoDQogICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLA0KICAgICAgICAgICAgICAgICAgICAiTW9jayBvYmplY3QgaGFzIG5vIGF0dHJpYnV0ZSAnc29tZXRoaW5nX2Vsc2UnIiwNCiAgICAgICAgICAgICAgICAgICAgZ2V0YXR0ciwgbW9jaywgJ3NvbWV0aGluZ19lbHNlJw0KICAgICAgICAgICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfZnJvbV9zcGVjKHNlbGYpOg0KICAgICAgICBjbGFzcyBTb21ldGhpbmcob2JqZWN0KToNCiAgICAgICAgICAgIHggPSAzDQogICAgICAgICAgICBfX3NvbWV0aGluZ19fID0gTm9uZQ0KICAgICAgICAgICAgZGVmIHkoc2VsZik6DQogICAgICAgICAgICAgICAgcGFzcw0KDQogICAgICAgIGRlZiB0ZXN0X2F0dHJpYnV0ZXMobW9jayk6DQogICAgICAgICAgICAjIHNob3VsZCB3b3JrDQogICAgICAgICAgICBtb2NrLngNCiAgICAgICAgICAgIG1vY2sueQ0KICAgICAgICAgICAgbW9jay5fX3NvbWV0aGluZ19fDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KA0KICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLA0KICAgICAgICAgICAgICAgICJNb2NrIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICd6JyIsDQogICAgICAgICAgICAgICAgZ2V0YXR0ciwgbW9jaywgJ3onDQogICAgICAgICAgICApDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KA0KICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLA0KICAgICAgICAgICAgICAgICJNb2NrIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlICdfX2Zvb2Jhcl9fJyIsDQogICAgICAgICAgICAgICAgZ2V0YXR0ciwgbW9jaywgJ19fZm9vYmFyX18nDQogICAgICAgICAgICApDQoNCiAgICAgICAgdGVzdF9hdHRyaWJ1dGVzKE1vY2soc3BlYz1Tb21ldGhpbmcpKQ0KICAgICAgICB0ZXN0X2F0dHJpYnV0ZXMoTW9jayhzcGVjPVNvbWV0aGluZygpKSkNCg0KDQogICAgZGVmIHRlc3Rfd3JhcHNfY2FsbHMoc2VsZik6DQogICAgICAgIHJlYWwgPSBNb2NrKCkNCg0KICAgICAgICBtb2NrID0gTW9jayh3cmFwcz1yZWFsKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2soKSwgcmVhbCgpKQ0KDQogICAgICAgIHJlYWwucmVzZXRfbW9jaygpDQoNCiAgICAgICAgbW9jaygxLCAyLCBmaXNoPTMpDQogICAgICAgIHJlYWwuYXNzZXJ0X2NhbGxlZF93aXRoKDEsIDIsIGZpc2g9MykNCg0KDQogICAgZGVmIHRlc3Rfd3JhcHNfY2FsbF93aXRoX25vbmRlZmF1bHRfcmV0dXJuX3ZhbHVlKHNlbGYpOg0KICAgICAgICByZWFsID0gTW9jaygpDQoNCiAgICAgICAgbW9jayA9IE1vY2sod3JhcHM9cmVhbCkNCiAgICAgICAgbW9jay5yZXR1cm5fdmFsdWUgPSAzDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCksIDMpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UocmVhbC5jYWxsZWQpDQoNCg0KICAgIGRlZiB0ZXN0X3dyYXBzX2F0dHJpYnV0ZXMoc2VsZik6DQogICAgICAgIGNsYXNzIFJlYWwob2JqZWN0KToNCiAgICAgICAgICAgIGF0dHJpYnV0ZSA9IE1vY2soKQ0KDQogICAgICAgIHJlYWwgPSBSZWFsKCkNCg0KICAgICAgICBtb2NrID0gTW9jayh3cmFwcz1yZWFsKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suYXR0cmlidXRlKCksIHJlYWwuYXR0cmlidXRlKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBsYW1iZGE6IG1vY2suZmlzaCkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdEVxdWFsKG1vY2suYXR0cmlidXRlLCByZWFsLmF0dHJpYnV0ZSkNCiAgICAgICAgcmVzdWx0ID0gbW9jay5hdHRyaWJ1dGUuZnJvZygxLCAyLCBmaXNoPTMpDQogICAgICAgIFJlYWwuYXR0cmlidXRlLmZyb2cuYXNzZXJ0X2NhbGxlZF93aXRoKDEsIDIsIGZpc2g9MykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXN1bHQsIFJlYWwuYXR0cmlidXRlLmZyb2coKSkNCg0KDQogICAgZGVmIHRlc3RfZXhjZXB0aW9uYWxfc2lkZV9lZmZlY3Qoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKHNpZGVfZWZmZWN0PUF0dHJpYnV0ZUVycm9yKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgbW9jaykNCg0KICAgICAgICBtb2NrID0gTW9jayhzaWRlX2VmZmVjdD1BdHRyaWJ1dGVFcnJvcignZm9vJykpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBtb2NrKQ0KDQoNCiAgICBkZWYgdGVzdF9iYXNlZXhjZXB0aW9uYWxfc2lkZV9lZmZlY3Qoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKHNpZGVfZWZmZWN0PUtleWJvYXJkSW50ZXJydXB0KQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhLZXlib2FyZEludGVycnVwdCwgbW9jaykNCg0KICAgICAgICBtb2NrID0gTW9jayhzaWRlX2VmZmVjdD1LZXlib2FyZEludGVycnVwdCgnZm9vJykpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEtleWJvYXJkSW50ZXJydXB0LCBtb2NrKQ0KDQoNCiAgICBkZWYgdGVzdF9hc3NlcnRfY2FsbGVkX3dpdGhfbWVzc2FnZShzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KEFzc2VydGlvbkVycm9yLCAnTm90IGNhbGxlZCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF93aXRoKQ0KDQoNCiAgICBkZWYgdGVzdF9fbmFtZV9fKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBsYW1iZGE6IG1vY2suX19uYW1lX18pDQoNCiAgICAgICAgbW9jay5fX25hbWVfXyA9ICdmb28nDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5fX25hbWVfXywgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X3NwZWNfbGlzdF9zdWJjbGFzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgU3ViKGxpc3QpOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBtb2NrID0gTW9jayhzcGVjPVN1YihbJ2ZvbyddKSkNCg0KICAgICAgICBtb2NrLmFwcGVuZCgzKQ0KICAgICAgICBtb2NrLmFwcGVuZC5hc3NlcnRfY2FsbGVkX3dpdGgoMykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2ssICdmb28nKQ0KDQoNCiAgICBkZWYgdGVzdF9zcGVjX2NsYXNzKHNlbGYpOg0KICAgICAgICBjbGFzcyBYKG9iamVjdCk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlYz1YKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNpbnN0YW5jZShtb2NrLCBYKSkNCg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjPVgoKSkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzaW5zdGFuY2UobW9jaywgWCkpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhtb2NrLl9fY2xhc3NfXywgWCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChNb2NrKCkuX19jbGFzc19fLl9fbmFtZV9fLCAnTW9jaycpDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlY19zZXQ9WCkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzaW5zdGFuY2UobW9jaywgWCkpDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlY19zZXQ9WCgpKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNpbnN0YW5jZShtb2NrLCBYKSkNCg0KDQogICAgZGVmIHRlc3Rfc2V0dGluZ19hdHRyaWJ1dGVfd2l0aF9zcGVjX3NldChzZWxmKToNCiAgICAgICAgY2xhc3MgWChvYmplY3QpOg0KICAgICAgICAgICAgeSA9IDMNCg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjPVgpDQogICAgICAgIG1vY2sueCA9ICdmb28nDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlY19zZXQ9WCkNCiAgICAgICAgZGVmIHNldF9hdHRyKCk6DQogICAgICAgICAgICBtb2NrLnggPSAnZm9vJw0KDQogICAgICAgIG1vY2sueSA9ICdmb28nDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBzZXRfYXR0cikNCg0KDQogICAgZGVmIHRlc3RfY29weShzZWxmKToNCiAgICAgICAgY3VycmVudCA9IHN5cy5nZXRyZWN1cnNpb25saW1pdCgpDQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChzeXMuc2V0cmVjdXJzaW9ubGltaXQsIGN1cnJlbnQpDQoNCiAgICAgICAgIyBjYW4ndCB1c2Ugc3lzLm1heGludCBhcyB0aGlzIGRvZXNuJ3QgZXhpc3QgaW4gUHl0aG9uIDMNCiAgICAgICAgc3lzLnNldHJlY3Vyc2lvbmxpbWl0KGludCgxMGU4KSkNCiAgICAgICAgIyB0aGlzIHNlZ2ZhdWx0cyB3aXRob3V0IHRoZSBmaXggaW4gcGxhY2UNCiAgICAgICAgY29weS5jb3B5KE1vY2soKSkNCg0KDQogICAgZGVmIHRlc3Rfc3ViY2xhc3Nfd2l0aF9wcm9wZXJ0aWVzKHNlbGYpOg0KICAgICAgICBjbGFzcyBTdWJDbGFzcyhNb2NrKToNCiAgICAgICAgICAgIGRlZiBfZ2V0KHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiAzDQogICAgICAgICAgICBkZWYgX3NldChzZWxmLCB2YWx1ZSk6DQogICAgICAgICAgICAgICAgcmFpc2UgTmFtZUVycm9yKCdzdHJhbmdlIGVycm9yJykNCiAgICAgICAgICAgIHNvbWVfYXR0cmlidXRlID0gcHJvcGVydHkoX2dldCwgX3NldCkNCg0KICAgICAgICBzID0gU3ViQ2xhc3Moc3BlY19zZXQ9U3ViQ2xhc3MpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocy5zb21lX2F0dHJpYnV0ZSwgMykNCg0KICAgICAgICBkZWYgdGVzdCgpOg0KICAgICAgICAgICAgcy5zb21lX2F0dHJpYnV0ZSA9IDMNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoTmFtZUVycm9yLCB0ZXN0KQ0KDQogICAgICAgIGRlZiB0ZXN0KCk6DQogICAgICAgICAgICBzLmZvbyA9ICdiYXInDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCB0ZXN0KQ0KDQoNCiAgICBkZWYgdGVzdF9zZXR0aW5nX2NhbGwoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgZGVmIF9fY2FsbF9fKHNlbGYsIGEpOg0KICAgICAgICAgICAgcmV0dXJuIHNlbGYuX21vY2tfY2FsbChhKQ0KDQogICAgICAgIHR5cGUobW9jaykuX19jYWxsX18gPSBfX2NhbGxfXw0KICAgICAgICBtb2NrKCdvbmUnKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCgnb25lJykNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2ssICdvbmUnLCAndHdvJykNCg0KDQogICAgZGVmIHRlc3RfZGlyKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIGF0dHJzID0gc2V0KGRpcihtb2NrKSkNCiAgICAgICAgdHlwZV9hdHRycyA9IHNldChbbSBmb3IgbSBpbiBkaXIoTW9jaykgaWYgbm90IG0uc3RhcnRzd2l0aCgnXycpXSkNCg0KICAgICAgICAjIGFsbCBwdWJsaWMgYXR0cmlidXRlcyBmcm9tIHRoZSB0eXBlIGFyZSBpbmNsdWRlZA0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNldCgpLCB0eXBlX2F0dHJzIC0gYXR0cnMpDQoNCiAgICAgICAgIyBjcmVhdGVzIHRoZXNlIGF0dHJpYnV0ZXMNCiAgICAgICAgbW9jay5hLCBtb2NrLmINCiAgICAgICAgc2VsZi5hc3NlcnRJbignYScsIGRpcihtb2NrKSkNCiAgICAgICAgc2VsZi5hc3NlcnRJbignYicsIGRpcihtb2NrKSkNCg0KICAgICAgICAjIGluc3RhbmNlIGF0dHJpYnV0ZXMNCiAgICAgICAgbW9jay5jID0gbW9jay5kID0gTm9uZQ0KICAgICAgICBzZWxmLmFzc2VydEluKCdjJywgZGlyKG1vY2spKQ0KICAgICAgICBzZWxmLmFzc2VydEluKCdkJywgZGlyKG1vY2spKQ0KDQogICAgICAgICMgbWFnaWMgbWV0aG9kcw0KICAgICAgICBtb2NrLl9faXRlcl9fID0gbGFtYmRhIHM6IGl0ZXIoW10pDQogICAgICAgIHNlbGYuYXNzZXJ0SW4oJ19faXRlcl9fJywgZGlyKG1vY2spKQ0KDQoNCiAgICBkZWYgdGVzdF9kaXJfZnJvbV9zcGVjKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjPXVuaXR0ZXN0LlRlc3RDYXNlKQ0KICAgICAgICB0ZXN0Y2FzZV9hdHRycyA9IHNldChkaXIodW5pdHRlc3QuVGVzdENhc2UpKQ0KICAgICAgICBhdHRycyA9IHNldChkaXIobW9jaykpDQoNCiAgICAgICAgIyBhbGwgYXR0cmlidXRlcyBmcm9tIHRoZSBzcGVjIGFyZSBpbmNsdWRlZA0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNldCgpLCB0ZXN0Y2FzZV9hdHRycyAtIGF0dHJzKQ0KDQogICAgICAgICMgc2hhZG93IGEgc3lzIGF0dHJpYnV0ZQ0KICAgICAgICBtb2NrLnZlcnNpb24gPSAzDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZGlyKG1vY2spLmNvdW50KCd2ZXJzaW9uJyksIDEpDQoNCg0KICAgIGRlZiB0ZXN0X2ZpbHRlcl9kaXIoc2VsZik6DQogICAgICAgIHBhdGNoZXIgPSBwYXRjaC5vYmplY3QobW9jaywgJ0ZJTFRFUl9ESVInLCBGYWxzZSkNCiAgICAgICAgcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGF0dHJzID0gc2V0KGRpcihNb2NrKCkpKQ0KICAgICAgICAgICAgdHlwZV9hdHRycyA9IHNldChkaXIoTW9jaykpDQoNCiAgICAgICAgICAgICMgQUxMIGF0dHJpYnV0ZXMgZnJvbSB0aGUgdHlwZSBhcmUgaW5jbHVkZWQNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc2V0KCksIHR5cGVfYXR0cnMgLSBhdHRycykNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHBhdGNoZXIuc3RvcCgpDQoNCg0KICAgIGRlZiB0ZXN0X2NvbmZpZ3VyZV9tb2NrKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jayhmb289J2JhcicpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5mb28sICdiYXInKQ0KDQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soZm9vPSdiYXInKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suZm9vLCAnYmFyJykNCg0KICAgICAgICBrd2FyZ3MgPSB7J3NpZGVfZWZmZWN0JzogS2V5RXJyb3IsICdmb28uYmFyLnJldHVybl92YWx1ZSc6IDMzLA0KICAgICAgICAgICAgICAgICAgJ2Zvbyc6IE1hZ2ljTW9jaygpfQ0KICAgICAgICBtb2NrID0gTW9jaygqKmt3YXJncykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoS2V5RXJyb3IsIG1vY2spDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5mb28uYmFyKCksIDMzKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jay5mb28sIE1hZ2ljTW9jaykNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2suY29uZmlndXJlX21vY2soKiprd2FyZ3MpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suZm9vLmJhcigpLCAzMykNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2suZm9vLCBNYWdpY01vY2spDQoNCg0KICAgIGRlZiBhc3NlcnRSYWlzZXNXaXRoTXNnKHNlbGYsIGV4Y2VwdGlvbiwgbWVzc2FnZSwgZnVuYywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgIyBuZWVkZWQgYmVjYXVzZSBhc3NlcnRSYWlzZXNSZWdleCBkb2Vzbid0IHdvcmsgZWFzaWx5IHdpdGggbmV3bGluZXMNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZnVuYygqYXJncywgKiprd2FyZ3MpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIGluc3RhbmNlID0gc3lzLmV4Y19pbmZvKClbMV0NCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShpbnN0YW5jZSwgZXhjZXB0aW9uKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCdFeGNlcHRpb24gJXIgbm90IHJhaXNlZCcgJSAoZXhjZXB0aW9uLCkpDQoNCiAgICAgICAgbXNnID0gc3RyKGluc3RhbmNlKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1zZywgbWVzc2FnZSkNCg0KDQogICAgZGVmIHRlc3RfYXNzZXJ0X2NhbGxlZF93aXRoX2ZhaWx1cmVfbWVzc2FnZShzZWxmKToNCiAgICAgICAgbW9jayA9IE5vbkNhbGxhYmxlTW9jaygpDQoNCiAgICAgICAgZXhwZWN0ZWQgPSAibW9jaygxLCAnMicsIDMsIGJhcj0nZm9vJykiDQogICAgICAgIG1lc3NhZ2UgPSAnRXhwZWN0ZWQgY2FsbDogJXNcbk5vdCBjYWxsZWQnDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzV2l0aE1zZygNCiAgICAgICAgICAgIEFzc2VydGlvbkVycm9yLCBtZXNzYWdlICUgKGV4cGVjdGVkLCksDQogICAgICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfd2l0aCwgMSwgJzInLCAzLCBiYXI9J2ZvbycNCiAgICAgICAgKQ0KDQogICAgICAgIG1vY2suZm9vKDEsICcyJywgMywgZm9vPSdmb28nKQ0KDQoNCiAgICAgICAgYXNzZXJ0ZXJzID0gWw0KICAgICAgICAgICAgbW9jay5mb28uYXNzZXJ0X2NhbGxlZF93aXRoLCBtb2NrLmZvby5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aA0KICAgICAgICBdDQogICAgICAgIGZvciBtZXRoIGluIGFzc2VydGVyczoNCiAgICAgICAgICAgIGFjdHVhbCA9ICJmb28oMSwgJzInLCAzLCBmb289J2ZvbycpIg0KICAgICAgICAgICAgZXhwZWN0ZWQgPSAiZm9vKDEsICcyJywgMywgYmFyPSdmb28nKSINCiAgICAgICAgICAgIG1lc3NhZ2UgPSAnRXhwZWN0ZWQgY2FsbDogJXNcbkFjdHVhbCBjYWxsOiAlcycNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzV2l0aE1zZygNCiAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwgbWVzc2FnZSAlIChleHBlY3RlZCwgYWN0dWFsKSwNCiAgICAgICAgICAgICAgICBtZXRoLCAxLCAnMicsIDMsIGJhcj0nZm9vJw0KICAgICAgICAgICAgKQ0KDQogICAgICAgICMganVzdCBrd2FyZ3MNCiAgICAgICAgZm9yIG1ldGggaW4gYXNzZXJ0ZXJzOg0KICAgICAgICAgICAgYWN0dWFsID0gImZvbygxLCAnMicsIDMsIGZvbz0nZm9vJykiDQogICAgICAgICAgICBleHBlY3RlZCA9ICJmb28oYmFyPSdmb28nKSINCiAgICAgICAgICAgIG1lc3NhZ2UgPSAnRXhwZWN0ZWQgY2FsbDogJXNcbkFjdHVhbCBjYWxsOiAlcycNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzV2l0aE1zZygNCiAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwgbWVzc2FnZSAlIChleHBlY3RlZCwgYWN0dWFsKSwNCiAgICAgICAgICAgICAgICBtZXRoLCBiYXI9J2ZvbycNCiAgICAgICAgICAgICkNCg0KICAgICAgICAjIGp1c3QgYXJncw0KICAgICAgICBmb3IgbWV0aCBpbiBhc3NlcnRlcnM6DQogICAgICAgICAgICBhY3R1YWwgPSAiZm9vKDEsICcyJywgMywgZm9vPSdmb28nKSINCiAgICAgICAgICAgIGV4cGVjdGVkID0gImZvbygxLCAyLCAzKSINCiAgICAgICAgICAgIG1lc3NhZ2UgPSAnRXhwZWN0ZWQgY2FsbDogJXNcbkFjdHVhbCBjYWxsOiAlcycNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzV2l0aE1zZygNCiAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwgbWVzc2FnZSAlIChleHBlY3RlZCwgYWN0dWFsKSwNCiAgICAgICAgICAgICAgICBtZXRoLCAxLCAyLCAzDQogICAgICAgICAgICApDQoNCiAgICAgICAgIyBlbXB0eQ0KICAgICAgICBmb3IgbWV0aCBpbiBhc3NlcnRlcnM6DQogICAgICAgICAgICBhY3R1YWwgPSAiZm9vKDEsICcyJywgMywgZm9vPSdmb28nKSINCiAgICAgICAgICAgIGV4cGVjdGVkID0gImZvbygpIg0KICAgICAgICAgICAgbWVzc2FnZSA9ICdFeHBlY3RlZCBjYWxsOiAlc1xuQWN0dWFsIGNhbGw6ICVzJw0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXNXaXRoTXNnKA0KICAgICAgICAgICAgICAgIEFzc2VydGlvbkVycm9yLCBtZXNzYWdlICUgKGV4cGVjdGVkLCBhY3R1YWwpLCBtZXRoDQogICAgICAgICAgICApDQoNCg0KICAgIGRlZiB0ZXN0X21vY2tfY2FsbHMoc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KDQogICAgICAgICMgbmVlZCB0byBkbyB0aGlzIGJlY2F1c2UgTWFnaWNNb2NrLm1vY2tfY2FsbHMgdXNlZCB0byBqdXN0IHJldHVybg0KICAgICAgICAjIGEgTWFnaWNNb2NrIHdoaWNoIGFsc28gcmV0dXJuZWQgYSBNYWdpY01vY2sgd2hlbiBfX2VxX18gd2FzIGNhbGxlZA0KICAgICAgICBzZWxmLmFzc2VydElzKG1vY2subW9ja19jYWxscyA9PSBbXSwgVHJ1ZSkNCg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCiAgICAgICAgbW9jaygpDQogICAgICAgIGV4cGVjdGVkID0gWygnJywgKCksIHt9KV0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIGV4cGVjdGVkKQ0KDQogICAgICAgIG1vY2suZm9vKCkNCiAgICAgICAgZXhwZWN0ZWQuYXBwZW5kKGNhbGwuZm9vKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBleHBlY3RlZCkNCiAgICAgICAgIyBpbnRlcm1lZGlhdGUgbW9ja19jYWxscyB3b3JrIHRvbw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2suZm9vLm1vY2tfY2FsbHMsIFsoJycsICgpLCB7fSldKQ0KDQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBtb2NrKCkuZm9vKDEsIDIsIDMsIGE9NCwgYj01KQ0KICAgICAgICBleHBlY3RlZCA9IFsNCiAgICAgICAgICAgICgnJywgKCksIHt9KSwgKCcoKS5mb28nLCAoMSwgMiwgMyksIGRpY3QoYT00LCBiPTUpKQ0KICAgICAgICBdDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBleHBlY3RlZCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLnJldHVybl92YWx1ZS5mb28ubW9ja19jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICBbKCcnLCAoMSwgMiwgMyksIGRpY3QoYT00LCBiPTUpKV0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5yZXR1cm5fdmFsdWUubW9ja19jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICBbKCdmb28nLCAoMSwgMiwgMyksIGRpY3QoYT00LCBiPTUpKV0pDQoNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgIG1vY2soKS5mb28uYmFyKCkuYmF6KCkNCiAgICAgICAgZXhwZWN0ZWQgPSBbDQogICAgICAgICAgICAoJycsICgpLCB7fSksICgnKCkuZm9vLmJhcicsICgpLCB7fSksDQogICAgICAgICAgICAoJygpLmZvby5iYXIoKS5iYXonLCAoKSwge30pDQogICAgICAgIF0NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIGV4cGVjdGVkKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2soKS5tb2NrX2NhbGxzLA0KICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGwuZm9vLmJhcigpLmJheigpLmNhbGxfbGlzdCgpKQ0KDQogICAgICAgIGZvciBrd2FyZ3MgaW4gZGljdCgpLCBkaWN0KG5hbWU9J2JhcicpOg0KICAgICAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygqKmt3YXJncykNCiAgICAgICAgICAgIGludChtb2NrLmZvbykNCiAgICAgICAgICAgIGV4cGVjdGVkID0gWygnZm9vLl9faW50X18nLCAoKSwge30pXQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIGV4cGVjdGVkKQ0KDQogICAgICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCoqa3dhcmdzKQ0KICAgICAgICAgICAgbW9jay5hKCkoKQ0KICAgICAgICAgICAgZXhwZWN0ZWQgPSBbKCdhJywgKCksIHt9KSwgKCdhKCknLCAoKSwge30pXQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIGV4cGVjdGVkKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLmEoKS5tb2NrX2NhbGxzLCBbY2FsbCgpXSkNCg0KICAgICAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygqKmt3YXJncykNCiAgICAgICAgICAgIG1vY2soMSkoMikoMykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBjYWxsKDEpKDIpKDMpLmNhbGxfbGlzdCgpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCkubW9ja19jYWxscywgY2FsbCgyKSgzKS5jYWxsX2xpc3QoKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jaygpKCkubW9ja19jYWxscywgY2FsbCgzKS5jYWxsX2xpc3QoKSkNCg0KICAgICAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygqKmt3YXJncykNCiAgICAgICAgICAgIG1vY2soMSkoMikoMykuYS5iLmMoNCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsKDEpKDIpKDMpLmEuYi5jKDQpLmNhbGxfbGlzdCgpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCkubW9ja19jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbCgyKSgzKS5hLmIuYyg0KS5jYWxsX2xpc3QoKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jaygpKCkubW9ja19jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbCgzKS5hLmIuYyg0KS5jYWxsX2xpc3QoKSkNCg0KICAgICAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygqKmt3YXJncykNCiAgICAgICAgICAgIGludChtb2NrKCkuZm9vLmJhcigpLmJheigpKQ0KICAgICAgICAgICAgbGFzdF9jYWxsID0gKCcoKS5mb28uYmFyKCkuYmF6KCkuX19pbnRfXycsICgpLCB7fSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzWy0xXSwgbGFzdF9jYWxsKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCkubW9ja19jYWxscywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbC5mb28uYmFyKCkuYmF6KCkuX19pbnRfXygpLmNhbGxfbGlzdCgpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCkuZm9vLmJhcigpLm1vY2tfY2FsbHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGwuYmF6KCkuX19pbnRfXygpLmNhbGxfbGlzdCgpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrKCkuZm9vLmJhcigpLmJhei5tb2NrX2NhbGxzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsKCkuX19pbnRfXygpLmNhbGxfbGlzdCgpKQ0KDQoNCiAgICBkZWYgdGVzdF9zdWJjbGFzc2luZyhzZWxmKToNCiAgICAgICAgY2xhc3MgU3ViY2xhc3MoTW9jayk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgbW9jayA9IFN1YmNsYXNzKCkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2suZm9vLCBTdWJjbGFzcykNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2soKSwgU3ViY2xhc3MpDQoNCiAgICAgICAgY2xhc3MgU3ViY2xhc3MoTW9jayk6DQogICAgICAgICAgICBkZWYgX2dldF9jaGlsZF9tb2NrKHNlbGYsICoqa3dhcmdzKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTW9jaygqKmt3YXJncykNCg0KICAgICAgICBtb2NrID0gU3ViY2xhc3MoKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdElzSW5zdGFuY2UobW9jay5mb28sIFN1YmNsYXNzKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdElzSW5zdGFuY2UobW9jaygpLCBTdWJjbGFzcykNCg0KDQogICAgZGVmIHRlc3RfYXJnX2xpc3RzKHNlbGYpOg0KICAgICAgICBtb2NrcyA9IFsNCiAgICAgICAgICAgIE1vY2soKSwNCiAgICAgICAgICAgIE1hZ2ljTW9jaygpLA0KICAgICAgICAgICAgTm9uQ2FsbGFibGVNb2NrKCksDQogICAgICAgICAgICBOb25DYWxsYWJsZU1hZ2ljTW9jaygpDQogICAgICAgIF0NCg0KICAgICAgICBkZWYgYXNzZXJ0X2F0dHJzKG1vY2spOg0KICAgICAgICAgICAgbmFtZXMgPSAnY2FsbF9hcmdzX2xpc3QnLCAnbWV0aG9kX2NhbGxzJywgJ21vY2tfY2FsbHMnDQogICAgICAgICAgICBmb3IgbmFtZSBpbiBuYW1lczoNCiAgICAgICAgICAgICAgICBhdHRyID0gZ2V0YXR0cihtb2NrLCBuYW1lKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShhdHRyLCBfQ2FsbExpc3QpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGF0dHIsIGxpc3QpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChhdHRyLCBbXSkNCg0KICAgICAgICBmb3IgbW9jayBpbiBtb2NrczoNCiAgICAgICAgICAgIGFzc2VydF9hdHRycyhtb2NrKQ0KDQogICAgICAgICAgICBpZiBjYWxsYWJsZShtb2NrKToNCiAgICAgICAgICAgICAgICBtb2NrKCkNCiAgICAgICAgICAgICAgICBtb2NrKDEsIDIpDQogICAgICAgICAgICAgICAgbW9jayhhPTMpDQoNCiAgICAgICAgICAgICAgICBtb2NrLnJlc2V0X21vY2soKQ0KICAgICAgICAgICAgICAgIGFzc2VydF9hdHRycyhtb2NrKQ0KDQogICAgICAgICAgICBtb2NrLmZvbygpDQogICAgICAgICAgICBtb2NrLmZvby5iYXIoMSwgYT0zKQ0KICAgICAgICAgICAgbW9jay5mb28oMSkuYmFyKCkuYmF6KDMpDQoNCiAgICAgICAgICAgIG1vY2sucmVzZXRfbW9jaygpDQogICAgICAgICAgICBhc3NlcnRfYXR0cnMobW9jaykNCg0KDQogICAgZGVmIHRlc3RfY2FsbF9hcmdzX3R3b190dXBsZShzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrKDEsIGE9MykNCiAgICAgICAgbW9jaygyLCBiPTQpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsZW4obW9jay5jYWxsX2FyZ3MpLCAyKQ0KICAgICAgICBhcmdzLCBrd2FyZ3MgPSBtb2NrLmNhbGxfYXJncw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGFyZ3MsICgyLCkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoa3dhcmdzLCBkaWN0KGI9NCkpDQoNCiAgICAgICAgZXhwZWN0ZWRfbGlzdCA9IFsoKDEsKSwgZGljdChhPTMpKSwgKCgyLCksIGRpY3QoYj00KSldDQogICAgICAgIGZvciBleHBlY3RlZCwgY2FsbF9hcmdzIGluIHppcChleHBlY3RlZF9saXN0LCBtb2NrLmNhbGxfYXJnc19saXN0KToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKGNhbGxfYXJncyksIDIpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV4cGVjdGVkWzBdLCBjYWxsX2FyZ3NbMF0pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV4cGVjdGVkWzFdLCBjYWxsX2FyZ3NbMV0pDQoNCg0KICAgIGRlZiB0ZXN0X3NpZGVfZWZmZWN0X2l0ZXJhdG9yKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jayhzaWRlX2VmZmVjdD1pdGVyKFsxLCAyLCAzXSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoW21vY2soKSwgbW9jaygpLCBtb2NrKCldLCBbMSwgMiwgM10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN0b3BJdGVyYXRpb24sIG1vY2spDQoNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jayhzaWRlX2VmZmVjdD1bJ2EnLCAnYicsICdjJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoW21vY2soKSwgbW9jaygpLCBtb2NrKCldLCBbJ2EnLCAnYicsICdjJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN0b3BJdGVyYXRpb24sIG1vY2spDQoNCiAgICAgICAgbW9jayA9IE1vY2soc2lkZV9lZmZlY3Q9J2doaScpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoW21vY2soKSwgbW9jaygpLCBtb2NrKCldLCBbJ2cnLCAnaCcsICdpJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN0b3BJdGVyYXRpb24sIG1vY2spDQoNCiAgICAgICAgY2xhc3MgRm9vKG9iamVjdCk6DQogICAgICAgICAgICBwYXNzDQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soc2lkZV9lZmZlY3Q9Rm9vKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jaygpLCBGb28pDQoNCiAgICAgICAgbW9jayA9IE1vY2soc2lkZV9lZmZlY3Q9SXRlcigpKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFttb2NrKCksIG1vY2soKSwgbW9jaygpLCBtb2NrKCldLA0KICAgICAgICAgICAgICAgICAgICAgICAgIFsndGhpcycsICdpcycsICdhbicsICdpdGVyJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN0b3BJdGVyYXRpb24sIG1vY2spDQoNCg0KICAgIGRlZiB0ZXN0X3NpZGVfZWZmZWN0X2l0ZXJhdG9yX2V4Y2VwdGlvbnMoc2VsZik6DQogICAgICAgIGZvciBLbGFzcyBpbiBNb2NrLCBNYWdpY01vY2s6DQogICAgICAgICAgICBpdGVyYWJsZSA9IChWYWx1ZUVycm9yLCAzLCBLZXlFcnJvciwgNikNCiAgICAgICAgICAgIG0gPSBLbGFzcyhzaWRlX2VmZmVjdD1pdGVyYWJsZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIG0pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0oKSwgMykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEtleUVycm9yLCBtKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtKCksIDYpDQoNCg0KICAgIGRlZiB0ZXN0X3NpZGVfZWZmZWN0X3NldHRpbmdfaXRlcmF0b3Ioc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgbW9jay5zaWRlX2VmZmVjdCA9IGl0ZXIoWzEsIDIsIDNdKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKFttb2NrKCksIG1vY2soKSwgbW9jaygpXSwgWzEsIDIsIDNdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhTdG9wSXRlcmF0aW9uLCBtb2NrKQ0KICAgICAgICBzaWRlX2VmZmVjdCA9IG1vY2suc2lkZV9lZmZlY3QNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHNpZGVfZWZmZWN0LCB0eXBlKGl0ZXIoW10pKSkNCg0KICAgICAgICBtb2NrLnNpZGVfZWZmZWN0ID0gWydhJywgJ2InLCAnYyddDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoW21vY2soKSwgbW9jaygpLCBtb2NrKCldLCBbJ2EnLCAnYicsICdjJ10pDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFN0b3BJdGVyYXRpb24sIG1vY2spDQogICAgICAgIHNpZGVfZWZmZWN0ID0gbW9jay5zaWRlX2VmZmVjdA0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2Uoc2lkZV9lZmZlY3QsIHR5cGUoaXRlcihbXSkpKQ0KDQogICAgICAgIHRoaXNfaXRlciA9IEl0ZXIoKQ0KICAgICAgICBtb2NrLnNpZGVfZWZmZWN0ID0gdGhpc19pdGVyDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoW21vY2soKSwgbW9jaygpLCBtb2NrKCksIG1vY2soKV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgWyd0aGlzJywgJ2lzJywgJ2FuJywgJ2l0ZXInXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoU3RvcEl0ZXJhdGlvbiwgbW9jaykNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhtb2NrLnNpZGVfZWZmZWN0LCB0aGlzX2l0ZXIpDQoNCg0KICAgIGRlZiB0ZXN0X2Fzc2VydF9oYXNfY2FsbHNfYW55X29yZGVyKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2soMSwgMikNCiAgICAgICAgbW9jayhhPTMpDQogICAgICAgIG1vY2soMywgNCkNCiAgICAgICAgbW9jayhiPTYpDQogICAgICAgIG1vY2soYj02KQ0KDQogICAgICAgIGthbGxzID0gWw0KICAgICAgICAgICAgY2FsbCgxLCAyKSwgKHsnYSc6IDN9LCksDQogICAgICAgICAgICAoKDMsIDQpLCksICgoKSwgeydhJzogM30pLA0KICAgICAgICAgICAgKCcnLCAoMSwgMikpLCAoJycsIHsnYSc6IDN9KSwNCiAgICAgICAgICAgICgnJywgKDEsIDIpLCB7fSksICgnJywgKCksIHsnYSc6IDN9KQ0KICAgICAgICBdDQogICAgICAgIGZvciBrYWxsIGluIGthbGxzOg0KICAgICAgICAgICAgbW9jay5hc3NlcnRfaGFzX2NhbGxzKFtrYWxsXSwgYW55X29yZGVyPVRydWUpDQoNCiAgICAgICAgZm9yIGthbGwgaW4gY2FsbCgxLCAnMicpLCBjYWxsKGI9MyksIGNhbGwoKSwgMywgTm9uZSwgJ2Zvbyc6DQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwgbW9jay5hc3NlcnRfaGFzX2NhbGxzLA0KICAgICAgICAgICAgICAgIFtrYWxsXSwgYW55X29yZGVyPVRydWUNCiAgICAgICAgICAgICkNCg0KICAgICAgICBrYWxsX2xpc3RzID0gWw0KICAgICAgICAgICAgW2NhbGwoMSwgMiksIGNhbGwoYj02KV0sDQogICAgICAgICAgICBbY2FsbCgzLCA0KSwgY2FsbCgxLCAyKV0sDQogICAgICAgICAgICBbY2FsbChiPTYpLCBjYWxsKGI9NildLA0KICAgICAgICBdDQoNCiAgICAgICAgZm9yIGthbGxfbGlzdCBpbiBrYWxsX2xpc3RzOg0KICAgICAgICAgICAgbW9jay5hc3NlcnRfaGFzX2NhbGxzKGthbGxfbGlzdCwgYW55X29yZGVyPVRydWUpDQoNCiAgICAgICAga2FsbF9saXN0cyA9IFsNCiAgICAgICAgICAgIFtjYWxsKGI9NiksIGNhbGwoYj02KSwgY2FsbChiPTYpXSwNCiAgICAgICAgICAgIFtjYWxsKDEsIDIpLCBjYWxsKDEsIDIpXSwNCiAgICAgICAgICAgIFtjYWxsKDMsIDQpLCBjYWxsKDEsIDIpLCBjYWxsKDUsIDcpXSwNCiAgICAgICAgICAgIFtjYWxsKGI9NiksIGNhbGwoMywgNCksIGNhbGwoYj02KSwgY2FsbCgxLCAyKSwgY2FsbChiPTYpXSwNCiAgICAgICAgXQ0KICAgICAgICBmb3Iga2FsbF9saXN0IGluIGthbGxfbGlzdHM6DQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwgbW9jay5hc3NlcnRfaGFzX2NhbGxzLA0KICAgICAgICAgICAgICAgIGthbGxfbGlzdCwgYW55X29yZGVyPVRydWUNCiAgICAgICAgICAgICkNCg0KICAgIGRlZiB0ZXN0X2Fzc2VydF9oYXNfY2FsbHMoc2VsZik6DQogICAgICAgIGthbGxzMSA9IFsNCiAgICAgICAgICAgICAgICBjYWxsKDEsIDIpLCAoeydhJzogM30sKSwNCiAgICAgICAgICAgICAgICAoKDMsIDQpLCksIGNhbGwoYj02KSwNCiAgICAgICAgICAgICAgICAoJycsICgxLCksIHsnYic6IDZ9KSwNCiAgICAgICAgXQ0KICAgICAgICBrYWxsczIgPSBbY2FsbC5mb28oKSwgY2FsbC5iYXIoMSldDQogICAgICAgIGthbGxzMi5leHRlbmQoY2FsbC5zcGFtKCkuYmF6KGE9MykuY2FsbF9saXN0KCkpDQogICAgICAgIGthbGxzMi5leHRlbmQoY2FsbC5iYW0oc2V0KCksIGZvbz17fSkuZmlzaChbMV0pLmNhbGxfbGlzdCgpKQ0KDQogICAgICAgIG1vY2tzID0gW10NCiAgICAgICAgZm9yIG1vY2sgaW4gTW9jaygpLCBNYWdpY01vY2soKToNCiAgICAgICAgICAgIG1vY2soMSwgMikNCiAgICAgICAgICAgIG1vY2soYT0zKQ0KICAgICAgICAgICAgbW9jaygzLCA0KQ0KICAgICAgICAgICAgbW9jayhiPTYpDQogICAgICAgICAgICBtb2NrKDEsIGI9NikNCiAgICAgICAgICAgIG1vY2tzLmFwcGVuZCgobW9jaywga2FsbHMxKSkNCg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIG1vY2suZm9vKCkNCiAgICAgICAgbW9jay5iYXIoMSkNCiAgICAgICAgbW9jay5zcGFtKCkuYmF6KGE9MykNCiAgICAgICAgbW9jay5iYW0oc2V0KCksIGZvbz17fSkuZmlzaChbMV0pDQogICAgICAgIG1vY2tzLmFwcGVuZCgobW9jaywga2FsbHMyKSkNCg0KICAgICAgICBmb3IgbW9jaywga2FsbHMgaW4gbW9ja3M6DQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oa2FsbHMpKToNCiAgICAgICAgICAgICAgICBmb3Igc3RlcCBpbiAxLCAyLCAzOg0KICAgICAgICAgICAgICAgICAgICB0aGVzZSA9IGthbGxzW2k6aStzdGVwXQ0KICAgICAgICAgICAgICAgICAgICBtb2NrLmFzc2VydF9oYXNfY2FsbHModGhlc2UpDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHRoZXNlKSA+IDE6DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBc3NlcnRpb25FcnJvciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2NrLmFzc2VydF9oYXNfY2FsbHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdChyZXZlcnNlZCh0aGVzZSkpDQogICAgICAgICAgICAgICAgICAgICAgICApDQoNCg0KICAgIGRlZiB0ZXN0X2Fzc2VydF9hbnlfY2FsbChzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrKDEsIDIpDQogICAgICAgIG1vY2soYT0zKQ0KICAgICAgICBtb2NrKDEsIGI9NikNCg0KICAgICAgICBtb2NrLmFzc2VydF9hbnlfY2FsbCgxLCAyKQ0KICAgICAgICBtb2NrLmFzc2VydF9hbnlfY2FsbChhPTMpDQogICAgICAgIG1vY2suYXNzZXJ0X2FueV9jYWxsKDEsIGI9NikNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIEFzc2VydGlvbkVycm9yLA0KICAgICAgICAgICAgbW9jay5hc3NlcnRfYW55X2NhbGwNCiAgICAgICAgKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgIEFzc2VydGlvbkVycm9yLA0KICAgICAgICAgICAgbW9jay5hc3NlcnRfYW55X2NhbGwsDQogICAgICAgICAgICAxLCAzDQogICAgICAgICkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoDQogICAgICAgICAgICBBc3NlcnRpb25FcnJvciwNCiAgICAgICAgICAgIG1vY2suYXNzZXJ0X2FueV9jYWxsLA0KICAgICAgICAgICAgYT00DQogICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfbW9ja19jYWxsc19jcmVhdGVfYXV0b3NwZWMoc2VsZik6DQogICAgICAgIGRlZiBmKGEsIGIpOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBvYmogPSBJdGVyKCkNCiAgICAgICAgb2JqLmYgPSBmDQoNCiAgICAgICAgZnVuY3MgPSBbDQogICAgICAgICAgICBjcmVhdGVfYXV0b3NwZWMoZiksDQogICAgICAgICAgICBjcmVhdGVfYXV0b3NwZWMob2JqKS5mDQogICAgICAgIF0NCiAgICAgICAgZm9yIGZ1bmMgaW4gZnVuY3M6DQogICAgICAgICAgICBmdW5jKDEsIDIpDQogICAgICAgICAgICBmdW5jKDMsIDQpDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoDQogICAgICAgICAgICAgICAgZnVuYy5tb2NrX2NhbGxzLCBbY2FsbCgxLCAyKSwgY2FsbCgzLCA0KV0NCiAgICAgICAgICAgICkNCg0KDQogICAgZGVmIHRlc3RfbW9ja19hZGRfc3BlYyhzZWxmKToNCiAgICAgICAgY2xhc3MgX09uZShvYmplY3QpOg0KICAgICAgICAgICAgb25lID0gMQ0KICAgICAgICBjbGFzcyBfVHdvKG9iamVjdCk6DQogICAgICAgICAgICB0d28gPSAyDQogICAgICAgIGNsYXNzIEFueXRoaW5nKG9iamVjdCk6DQogICAgICAgICAgICBvbmUgPSB0d28gPSB0aHJlZSA9ICdmb3VyJw0KDQogICAgICAgIGtsYXNzZXMgPSBbDQogICAgICAgICAgICBNb2NrLCBNYWdpY01vY2ssIE5vbkNhbGxhYmxlTW9jaywgTm9uQ2FsbGFibGVNYWdpY01vY2sNCiAgICAgICAgXQ0KICAgICAgICBmb3IgS2xhc3MgaW4gbGlzdChrbGFzc2VzKToNCiAgICAgICAgICAgIGtsYXNzZXMuYXBwZW5kKGxhbWJkYSBLPUtsYXNzOiBLKHNwZWM9QW55dGhpbmcpKQ0KICAgICAgICAgICAga2xhc3Nlcy5hcHBlbmQobGFtYmRhIEs9S2xhc3M6IEsoc3BlY19zZXQ9QW55dGhpbmcpKQ0KDQogICAgICAgIGZvciBLbGFzcyBpbiBrbGFzc2VzOg0KICAgICAgICAgICAgZm9yIGt3YXJncyBpbiBkaWN0KCksIGRpY3Qoc3BlY19zZXQ9VHJ1ZSk6DQogICAgICAgICAgICAgICAgbW9jayA9IEtsYXNzKCkNCiAgICAgICAgICAgICAgICAjbm8gZXJyb3INCiAgICAgICAgICAgICAgICBtb2NrLm9uZSwgbW9jay50d28sIG1vY2sudGhyZWUNCg0KICAgICAgICAgICAgICAgIGZvciBPbmUsIFR3byBpbiBbKF9PbmUsIF9Ud28pLCAoWydvbmUnXSwgWyd0d28nXSldOg0KICAgICAgICAgICAgICAgICAgICBmb3Iga3dhcmdzIGluIGRpY3QoKSwgZGljdChzcGVjX3NldD1UcnVlKToNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vY2subW9ja19hZGRfc3BlYyhPbmUsICoqa3dhcmdzKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBtb2NrLm9uZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2ssICd0d28nDQogICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVFcnJvciwgZ2V0YXR0ciwgbW9jaywgJ3RocmVlJw0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3NwZWNfc2V0JyBpbiBrd2FyZ3M6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLCBzZXRhdHRyLCBtb2NrLCAndGhyZWUnLCBOb25lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBtb2NrLm1vY2tfYWRkX3NwZWMoVHdvLCAqKmt3YXJncykNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLCAnb25lJw0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbW9jay50d28NCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUVycm9yLCBnZXRhdHRyLCBtb2NrLCAndGhyZWUnDQogICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnc3BlY19zZXQnIGluIGt3YXJnczoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcygNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0cmlidXRlRXJyb3IsIHNldGF0dHIsIG1vY2ssICd0aHJlZScsIE5vbmUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAjIG5vdGUgdGhhdCBjcmVhdGluZyBhIG1vY2ssIHNldHRpbmcgYW4gaW5zdGFuY2UgYXR0cmlidXRlLCBhbmQNCiAgICAgICAgICAgICMgKnRoZW4qIHNldHRpbmcgYSBzcGVjIGRvZXNuJ3Qgd29yay4gTm90IHRoZSBpbnRlbmRlZCB1c2UgY2FzZQ0KDQoNCiAgICBkZWYgdGVzdF9tb2NrX2FkZF9zcGVjX21hZ2ljX21ldGhvZHMoc2VsZik6DQogICAgICAgIGZvciBLbGFzcyBpbiBNYWdpY01vY2ssIE5vbkNhbGxhYmxlTWFnaWNNb2NrOg0KICAgICAgICAgICAgbW9jayA9IEtsYXNzKCkNCiAgICAgICAgICAgIGludChtb2NrKQ0KDQogICAgICAgICAgICBtb2NrLm1vY2tfYWRkX3NwZWMob2JqZWN0KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpbnQsIG1vY2spDQoNCiAgICAgICAgICAgIG1vY2sgPSBLbGFzcygpDQogICAgICAgICAgICBtb2NrWydmb28nXQ0KICAgICAgICAgICAgbW9jay5fX2ludF9fLnJldHVybl92YWx1ZSA9NA0KDQogICAgICAgICAgICBtb2NrLm1vY2tfYWRkX3NwZWMoaW50KQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQobW9jayksIDQpDQogICAgICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogbW9ja1snZm9vJ10pDQoNCg0KICAgIGRlZiB0ZXN0X2FkZGluZ19jaGlsZF9tb2NrKHNlbGYpOg0KICAgICAgICBmb3IgS2xhc3MgaW4gTm9uQ2FsbGFibGVNb2NrLCBNb2NrLCBNYWdpY01vY2ssIE5vbkNhbGxhYmxlTWFnaWNNb2NrOg0KICAgICAgICAgICAgbW9jayA9IEtsYXNzKCkNCg0KICAgICAgICAgICAgbW9jay5mb28gPSBNb2NrKCkNCiAgICAgICAgICAgIG1vY2suZm9vKCkNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgW2NhbGwuZm9vKCldKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIFtjYWxsLmZvbygpXSkNCg0KICAgICAgICAgICAgbW9jayA9IEtsYXNzKCkNCiAgICAgICAgICAgIG1vY2suYmFyID0gTW9jayhuYW1lPSduYW1lJykNCiAgICAgICAgICAgIG1vY2suYmFyKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tZXRob2RfY2FsbHMsIFtdKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1vY2tfY2FsbHMsIFtdKQ0KDQogICAgICAgICAgICAjIG1vY2sgd2l0aCBhbiBleGlzdGluZyBfbmV3X3BhcmVudCBidXQgbm8gbmFtZQ0KICAgICAgICAgICAgbW9jayA9IEtsYXNzKCkNCiAgICAgICAgICAgIG1vY2suYmF6ID0gTWFnaWNNb2NrKCkoKQ0KICAgICAgICAgICAgbW9jay5iYXooKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLm1ldGhvZF9jYWxscywgW10pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2subW9ja19jYWxscywgW10pDQoNCg0KICAgIGRlZiB0ZXN0X2FkZGluZ19yZXR1cm5fdmFsdWVfbW9jayhzZWxmKToNCiAgICAgICAgZm9yIEtsYXNzIGluIE1vY2ssIE1hZ2ljTW9jazoNCiAgICAgICAgICAgIG1vY2sgPSBLbGFzcygpDQogICAgICAgICAgICBtb2NrLnJldHVybl92YWx1ZSA9IE1hZ2ljTW9jaygpDQoNCiAgICAgICAgICAgIG1vY2soKSgpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2subW9ja19jYWxscywgW2NhbGwoKSwgY2FsbCgpKCldKQ0KDQoNCiAgICBkZWYgdGVzdF9tYW5hZ2VyX21vY2soc2VsZik6DQogICAgICAgIGNsYXNzIEZvbyhvYmplY3QpOg0KICAgICAgICAgICAgb25lID0gJ29uZScNCiAgICAgICAgICAgIHR3byA9ICd0d28nDQogICAgICAgIG1hbmFnZXIgPSBNb2NrKCkNCiAgICAgICAgcDEgPSBwYXRjaC5vYmplY3QoRm9vLCAnb25lJykNCiAgICAgICAgcDIgPSBwYXRjaC5vYmplY3QoRm9vLCAndHdvJykNCg0KICAgICAgICBtb2NrX29uZSA9IHAxLnN0YXJ0KCkNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHAxLnN0b3ApDQogICAgICAgIG1vY2tfdHdvID0gcDIuc3RhcnQoKQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAocDIuc3RvcCkNCg0KICAgICAgICBtYW5hZ2VyLmF0dGFjaF9tb2NrKG1vY2tfb25lLCAnb25lJykNCiAgICAgICAgbWFuYWdlci5hdHRhY2hfbW9jayhtb2NrX3R3bywgJ3R3bycpDQoNCiAgICAgICAgRm9vLnR3bygpDQogICAgICAgIEZvby5vbmUoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobWFuYWdlci5tb2NrX2NhbGxzLCBbY2FsbC50d28oKSwgY2FsbC5vbmUoKV0pDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljX21ldGhvZHNfbW9ja19jYWxscyhzZWxmKToNCiAgICAgICAgZm9yIEtsYXNzIGluIE1vY2ssIE1hZ2ljTW9jazoNCiAgICAgICAgICAgIG0gPSBLbGFzcygpDQogICAgICAgICAgICBtLl9faW50X18gPSBNb2NrKHJldHVybl92YWx1ZT0zKQ0KICAgICAgICAgICAgbS5fX2Zsb2F0X18gPSBNYWdpY01vY2socmV0dXJuX3ZhbHVlPTMuMCkNCiAgICAgICAgICAgIGludChtKQ0KICAgICAgICAgICAgZmxvYXQobSkNCg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLm1vY2tfY2FsbHMsIFtjYWxsLl9faW50X18oKSwgY2FsbC5fX2Zsb2F0X18oKV0pDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0ubWV0aG9kX2NhbGxzLCBbXSkNCg0KDQogICAgZGVmIHRlc3RfYXR0cmlidXRlX2RlbGV0aW9uKHNlbGYpOg0KICAgICAgICAjIHRoaXMgYmVoYXZpb3VyIGlzbid0ICp1c2VmdWwqLCBidXQgYXQgbGVhc3QgaXQncyBub3cgdGVzdGVkLi4uDQogICAgICAgIGZvciBLbGFzcyBpbiBNb2NrLCBNYWdpY01vY2ssIE5vbkNhbGxhYmxlTWFnaWNNb2NrLCBOb25DYWxsYWJsZU1vY2s6DQogICAgICAgICAgICBtID0gS2xhc3MoKQ0KICAgICAgICAgICAgb3JpZ2luYWwgPSBtLmZvbw0KICAgICAgICAgICAgbS5mb28gPSAzDQogICAgICAgICAgICBkZWwgbS5mb28NCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobS5mb28sIG9yaWdpbmFsKQ0KDQogICAgICAgICAgICBuZXcgPSBtLmZvbyA9IE1vY2soKQ0KICAgICAgICAgICAgZGVsIG0uZm9vDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0uZm9vLCBuZXcpDQoNCg0KICAgIGRlZiB0ZXN0X21vY2tfcGFyZW50cyhzZWxmKToNCiAgICAgICAgZm9yIEtsYXNzIGluIE1vY2ssIE1hZ2ljTW9jazoNCiAgICAgICAgICAgIG0gPSBLbGFzcygpDQogICAgICAgICAgICBvcmlnaW5hbF9yZXByID0gcmVwcihtKQ0KICAgICAgICAgICAgbS5yZXR1cm5fdmFsdWUgPSBtDQogICAgICAgICAgICBzZWxmLmFzc2VydElzKG0oKSwgbSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihtKSwgb3JpZ2luYWxfcmVwcikNCg0KICAgICAgICAgICAgbS5yZXNldF9tb2NrKCkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMobSgpLCBtKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXByKG0pLCBvcmlnaW5hbF9yZXByKQ0KDQogICAgICAgICAgICBtID0gS2xhc3MoKQ0KICAgICAgICAgICAgbS5iID0gbS5hDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKCJuYW1lPSdtb2NrLmEnIiwgcmVwcihtLmIpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigibmFtZT0nbW9jay5hJyIsIHJlcHIobS5hKSkNCiAgICAgICAgICAgIG0ucmVzZXRfbW9jaygpDQogICAgICAgICAgICBzZWxmLmFzc2VydEluKCJuYW1lPSdtb2NrLmEnIiwgcmVwcihtLmIpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigibmFtZT0nbW9jay5hJyIsIHJlcHIobS5hKSkNCg0KICAgICAgICAgICAgbSA9IEtsYXNzKCkNCiAgICAgICAgICAgIG9yaWdpbmFsX3JlcHIgPSByZXByKG0pDQogICAgICAgICAgICBtLmEgPSBtKCkNCiAgICAgICAgICAgIG0uYS5yZXR1cm5fdmFsdWUgPSBtDQoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihtKSwgb3JpZ2luYWxfcmVwcikNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihtLmEoKSksIG9yaWdpbmFsX3JlcHIpDQoNCg0KICAgIGRlZiB0ZXN0X2F0dGFjaF9tb2NrKHNlbGYpOg0KICAgICAgICBjbGFzc2VzID0gTW9jaywgTWFnaWNNb2NrLCBOb25DYWxsYWJsZU1hZ2ljTW9jaywgTm9uQ2FsbGFibGVNb2NrDQogICAgICAgIGZvciBLbGFzcyBpbiBjbGFzc2VzOg0KICAgICAgICAgICAgZm9yIEtsYXNzMiBpbiBjbGFzc2VzOg0KICAgICAgICAgICAgICAgIG0gPSBLbGFzcygpDQoNCiAgICAgICAgICAgICAgICBtMiA9IEtsYXNzMihuYW1lPSdmb28nKQ0KICAgICAgICAgICAgICAgIG0uYXR0YWNoX21vY2sobTIsICdiYXInKQ0KDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhtLmJhciwgbTIpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJbigibmFtZT0nbW9jay5iYXInIiwgcmVwcihtMikpDQoNCiAgICAgICAgICAgICAgICBtLmJhci5iYXooMSkNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG0ubW9ja19jYWxscywgW2NhbGwuYmFyLmJheigxKV0pDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLm1ldGhvZF9jYWxscywgW2NhbGwuYmFyLmJheigxKV0pDQoNCg0KICAgIGRlZiB0ZXN0X2F0dGFjaF9tb2NrX3JldHVybl92YWx1ZShzZWxmKToNCiAgICAgICAgY2xhc3NlcyA9IE1vY2ssIE1hZ2ljTW9jaywgTm9uQ2FsbGFibGVNYWdpY01vY2ssIE5vbkNhbGxhYmxlTW9jaw0KICAgICAgICBmb3IgS2xhc3MgaW4gTW9jaywgTWFnaWNNb2NrOg0KICAgICAgICAgICAgZm9yIEtsYXNzMiBpbiBjbGFzc2VzOg0KICAgICAgICAgICAgICAgIG0gPSBLbGFzcygpDQoNCiAgICAgICAgICAgICAgICBtMiA9IEtsYXNzMihuYW1lPSdmb28nKQ0KICAgICAgICAgICAgICAgIG0uYXR0YWNoX21vY2sobTIsICdyZXR1cm5fdmFsdWUnKQ0KDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJcyhtKCksIG0yKQ0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4oIm5hbWU9J21vY2soKSciLCByZXByKG0yKSkNCg0KICAgICAgICAgICAgICAgIG0yLmZvbygpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtLm1vY2tfY2FsbHMsIGNhbGwoKS5mb28oKS5jYWxsX2xpc3QoKSkNCg0KDQogICAgZGVmIHRlc3RfYXR0cmlidXRlX2RlbGV0aW9uKHNlbGYpOg0KICAgICAgICBmb3IgbW9jayBpbiBNb2NrKCksIE1hZ2ljTW9jaygpOg0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGhhc2F0dHIobW9jaywgJ20nKSkNCg0KICAgICAgICAgICAgZGVsIG1vY2subQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKG1vY2ssICdtJykpDQoNCiAgICAgICAgICAgIGRlbCBtb2NrLmYNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoaGFzYXR0cihtb2NrLCAnZicpKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIG1vY2ssICdmJykNCg0KDQogICAgZGVmIHRlc3RfY2xhc3NfYXNzaWduYWJsZShzZWxmKToNCiAgICAgICAgZm9yIG1vY2sgaW4gTW9jaygpLCBNYWdpY01vY2soKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90SXNJbnN0YW5jZShtb2NrLCBpbnQpDQoNCiAgICAgICAgICAgIG1vY2suX19jbGFzc19fID0gaW50DQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jaywgaW50KQ0KICAgICAgICAgICAgbW9jay5mb28NCg0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/unittest/test/testmock/testwith.py':'aW1wb3J0IHVuaXR0ZXN0DQpmcm9tIHdhcm5pbmdzIGltcG9ydCBjYXRjaF93YXJuaW5ncw0KDQpmcm9tIHVuaXR0ZXN0LnRlc3QudGVzdG1vY2suc3VwcG9ydCBpbXBvcnQgaXNfaW5zdGFuY2UNCmZyb20gdW5pdHRlc3QubW9jayBpbXBvcnQgTWFnaWNNb2NrLCBNb2NrLCBwYXRjaCwgc2VudGluZWwsIG1vY2tfb3BlbiwgY2FsbA0KDQoNCg0Kc29tZXRoaW5nICA9IHNlbnRpbmVsLlNvbWV0aGluZw0Kc29tZXRoaW5nX2Vsc2UgID0gc2VudGluZWwuU29tZXRoaW5nRWxzZQ0KDQoNCg0KY2xhc3MgV2l0aFRlc3QodW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgZGVmIHRlc3Rfd2l0aF9zdGF0ZW1lbnQoc2VsZik6DQogICAgICAgIHdpdGggcGF0Y2goJyVzLnNvbWV0aGluZycgJSBfX25hbWVfXywgc2VudGluZWwuU29tZXRoaW5nMik6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nMiwgInVucGF0Y2hlZCIpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBzZW50aW5lbC5Tb21ldGhpbmcpDQoNCg0KICAgIGRlZiB0ZXN0X3dpdGhfc3RhdGVtZW50X2V4Y2VwdGlvbihzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgd2l0aCBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fLCBzZW50aW5lbC5Tb21ldGhpbmcyKToNCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nMiwgInVucGF0Y2hlZCIpDQogICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCdwb3cnKQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uOg0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5mYWlsKCJwYXRjaCBzd2FsbG93ZWQgZXhjZXB0aW9uIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzb21ldGhpbmcsIHNlbnRpbmVsLlNvbWV0aGluZykNCg0KDQogICAgZGVmIHRlc3Rfd2l0aF9zdGF0ZW1lbnRfYXMoc2VsZik6DQogICAgICAgIHdpdGggcGF0Y2goJyVzLnNvbWV0aGluZycgJSBfX25hbWVfXykgYXMgbW9ja19zb21ldGhpbmc6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgbW9ja19zb21ldGhpbmcsICJ1bnBhdGNoZWQiKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKG1vY2tfc29tZXRoaW5nLCBNYWdpY01vY2spLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaGluZyB3cm9uZyB0eXBlIikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzb21ldGhpbmcsIHNlbnRpbmVsLlNvbWV0aGluZykNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfb2JqZWN0X3dpdGhfc3RhdGVtZW50KHNlbGYpOg0KICAgICAgICBjbGFzcyBGb28ob2JqZWN0KToNCiAgICAgICAgICAgIHNvbWV0aGluZyA9ICdmb28nDQogICAgICAgIG9yaWdpbmFsID0gRm9vLnNvbWV0aGluZw0KICAgICAgICB3aXRoIHBhdGNoLm9iamVjdChGb28sICdzb21ldGhpbmcnKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0Tm90RXF1YWwoRm9vLnNvbWV0aGluZywgb3JpZ2luYWwsICJ1bnBhdGNoZWQiKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKEZvby5zb21ldGhpbmcsIG9yaWdpbmFsKQ0KDQoNCiAgICBkZWYgdGVzdF93aXRoX3N0YXRlbWVudF9uZXN0ZWQoc2VsZik6DQogICAgICAgIHdpdGggY2F0Y2hfd2FybmluZ3MocmVjb3JkPVRydWUpOg0KICAgICAgICAgICAgd2l0aCBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fKSBhcyBtb2NrX3NvbWV0aGluZywgcGF0Y2goJyVzLnNvbWV0aGluZ19lbHNlJyAlIF9fbmFtZV9fKSBhcyBtb2NrX3NvbWV0aGluZ19lbHNlOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBtb2NrX3NvbWV0aGluZywgInVucGF0Y2hlZCIpDQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzb21ldGhpbmdfZWxzZSwgbW9ja19zb21ldGhpbmdfZWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1bnBhdGNoZWQiKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBzZW50aW5lbC5Tb21ldGhpbmcpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nX2Vsc2UsIHNlbnRpbmVsLlNvbWV0aGluZ0Vsc2UpDQoNCg0KICAgIGRlZiB0ZXN0X3dpdGhfc3RhdGVtZW50X3NwZWNpZmllZChzZWxmKToNCiAgICAgICAgd2l0aCBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fLCBzZW50aW5lbC5QYXRjaGVkKSBhcyBtb2NrX3NvbWV0aGluZzoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBtb2NrX3NvbWV0aGluZywgInVucGF0Y2hlZCIpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2tfc29tZXRoaW5nLCBzZW50aW5lbC5QYXRjaGVkLCAid3JvbmcgcGF0Y2giKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nKQ0KDQoNCiAgICBkZWYgdGVzdENvbnRleHRNYW5hZ2VyTW9ja2luZyhzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrLl9fZW50ZXJfXyA9IE1vY2soKQ0KICAgICAgICBtb2NrLl9fZXhpdF9fID0gTW9jaygpDQogICAgICAgIG1vY2suX19leGl0X18ucmV0dXJuX3ZhbHVlID0gRmFsc2UNCg0KICAgICAgICB3aXRoIG1vY2sgYXMgbToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobSwgbW9jay5fX2VudGVyX18ucmV0dXJuX3ZhbHVlKQ0KICAgICAgICBtb2NrLl9fZW50ZXJfXy5hc3NlcnRfY2FsbGVkX3dpdGgoKQ0KICAgICAgICBtb2NrLl9fZXhpdF9fLmFzc2VydF9jYWxsZWRfd2l0aChOb25lLCBOb25lLCBOb25lKQ0KDQoNCiAgICBkZWYgdGVzdF9jb250ZXh0X21hbmFnZXJfd2l0aF9tYWdpY19tb2NrKHNlbGYpOg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCg0KICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvcik6DQogICAgICAgICAgICB3aXRoIG1vY2s6DQogICAgICAgICAgICAgICAgJ2ZvbycgKyAzDQogICAgICAgIG1vY2suX19lbnRlcl9fLmFzc2VydF9jYWxsZWRfd2l0aCgpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShtb2NrLl9fZXhpdF9fLmNhbGxlZCkNCg0KDQogICAgZGVmIHRlc3Rfd2l0aF9zdGF0ZW1lbnRfc2FtZV9hdHRyaWJ1dGUoc2VsZik6DQogICAgICAgIHdpdGggcGF0Y2goJyVzLnNvbWV0aGluZycgJSBfX25hbWVfXywgc2VudGluZWwuUGF0Y2hlZCkgYXMgbW9ja19zb21ldGhpbmc6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgbW9ja19zb21ldGhpbmcsICJ1bnBhdGNoZWQiKQ0KDQogICAgICAgICAgICB3aXRoIHBhdGNoKCclcy5zb21ldGhpbmcnICUgX19uYW1lX18pIGFzIG1vY2tfYWdhaW46DQogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzb21ldGhpbmcsIG1vY2tfYWdhaW4sICJ1bnBhdGNoZWQiKQ0KDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgbW9ja19zb21ldGhpbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJyZXN0b3JlZCB3aXRoIHdyb25nIGluc3RhbmNlIikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nLCAibm90IHJlc3RvcmVkIikNCg0KDQogICAgZGVmIHRlc3Rfd2l0aF9zdGF0ZW1lbnRfaW1icmljYXRlZChzZWxmKToNCiAgICAgICAgd2l0aCBwYXRjaCgnJXMuc29tZXRoaW5nJyAlIF9fbmFtZV9fKSBhcyBtb2NrX3NvbWV0aGluZzoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nLCBtb2NrX3NvbWV0aGluZywgInVucGF0Y2hlZCIpDQoNCiAgICAgICAgICAgIHdpdGggcGF0Y2goJyVzLnNvbWV0aGluZ19lbHNlJyAlIF9fbmFtZV9fKSBhcyBtb2NrX3NvbWV0aGluZ19lbHNlOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc29tZXRoaW5nX2Vsc2UsIG1vY2tfc29tZXRoaW5nX2Vsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5wYXRjaGVkIikNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZywgc2VudGluZWwuU29tZXRoaW5nKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHNvbWV0aGluZ19lbHNlLCBzZW50aW5lbC5Tb21ldGhpbmdFbHNlKQ0KDQoNCiAgICBkZWYgdGVzdF9kaWN0X2NvbnRleHRfbWFuYWdlcihzZWxmKToNCiAgICAgICAgZm9vID0ge30NCiAgICAgICAgd2l0aCBwYXRjaC5kaWN0KGZvbywgeydhJzogJ2InfSk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvbywgeydhJzogJ2InfSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmb28sIHt9KQ0KDQogICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoTmFtZUVycm9yKToNCiAgICAgICAgICAgIHdpdGggcGF0Y2guZGljdChmb28sIHsnYSc6ICdiJ30pOg0KICAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZm9vLCB7J2EnOiAnYid9KQ0KICAgICAgICAgICAgICAgIHJhaXNlIE5hbWVFcnJvcignS29ucmFkJykNCg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGZvbywge30pDQoNCg0KDQpjbGFzcyBUZXN0TW9ja09wZW4odW5pdHRlc3QuVGVzdENhc2UpOg0KDQogICAgZGVmIHRlc3RfbW9ja19vcGVuKHNlbGYpOg0KICAgICAgICBtb2NrID0gbW9ja19vcGVuKCkNCiAgICAgICAgd2l0aCBwYXRjaCgnJXMub3BlbicgJSBfX25hbWVfXywgbW9jaywgY3JlYXRlPVRydWUpIGFzIHBhdGNoZWQ6DQogICAgICAgICAgICBzZWxmLmFzc2VydElzKHBhdGNoZWQsIG1vY2spDQogICAgICAgICAgICBvcGVuKCdmb28nKQ0KDQogICAgICAgIG1vY2suYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X21vY2tfb3Blbl9jb250ZXh0X21hbmFnZXIoc2VsZik6DQogICAgICAgIG1vY2sgPSBtb2NrX29wZW4oKQ0KICAgICAgICBoYW5kbGUgPSBtb2NrLnJldHVybl92YWx1ZQ0KICAgICAgICB3aXRoIHBhdGNoKCclcy5vcGVuJyAlIF9fbmFtZV9fLCBtb2NrLCBjcmVhdGU9VHJ1ZSk6DQogICAgICAgICAgICB3aXRoIG9wZW4oJ2ZvbycpIGFzIGY6DQogICAgICAgICAgICAgICAgZi5yZWFkKCkNCg0KICAgICAgICBleHBlY3RlZF9jYWxscyA9IFtjYWxsKCdmb28nKSwgY2FsbCgpLl9fZW50ZXJfXygpLCBjYWxsKCkucmVhZCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsKCkuX19leGl0X18oTm9uZSwgTm9uZSwgTm9uZSldDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5tb2NrX2NhbGxzLCBleHBlY3RlZF9jYWxscykNCiAgICAgICAgc2VsZi5hc3NlcnRJcyhmLCBoYW5kbGUpDQoNCg0KICAgIGRlZiB0ZXN0X2V4cGxpY2l0X21vY2soc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBtb2NrX29wZW4obW9jaykNCg0KICAgICAgICB3aXRoIHBhdGNoKCclcy5vcGVuJyAlIF9fbmFtZV9fLCBtb2NrLCBjcmVhdGU9VHJ1ZSkgYXMgcGF0Y2hlZDoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXMocGF0Y2hlZCwgbW9jaykNCiAgICAgICAgICAgIG9wZW4oJ2ZvbycpDQoNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgnZm9vJykNCg0KDQogICAgZGVmIHRlc3RfcmVhZF9kYXRhKHNlbGYpOg0KICAgICAgICBtb2NrID0gbW9ja19vcGVuKHJlYWRfZGF0YT0nZm9vJykNCiAgICAgICAgd2l0aCBwYXRjaCgnJXMub3BlbicgJSBfX25hbWVfXywgbW9jaywgY3JlYXRlPVRydWUpOg0KICAgICAgICAgICAgaCA9IG9wZW4oJ2JhcicpDQogICAgICAgICAgICByZXN1bHQgPSBoLnJlYWQoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzdWx0LCAnZm9vJykNCg0KDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgIHVuaXR0ZXN0Lm1haW4oKQ0K',
'/Lib/unittest/test/testmock/__init__.py':'aW1wb3J0IG9zDQppbXBvcnQgc3lzDQppbXBvcnQgdW5pdHRlc3QNCg0KDQpoZXJlID0gb3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKQ0KbG9hZGVyID0gdW5pdHRlc3QuZGVmYXVsdFRlc3RMb2FkZXINCg0KZGVmIGxvYWRfdGVzdHMoKmFyZ3MpOg0KICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkNCiAgICBmb3IgZm4gaW4gb3MubGlzdGRpcihoZXJlKToNCiAgICAgICAgaWYgZm4uc3RhcnRzd2l0aCgidGVzdCIpIGFuZCBmbi5lbmRzd2l0aCgiLnB5Iik6DQogICAgICAgICAgICBtb2RuYW1lID0gInVuaXR0ZXN0LnRlc3QudGVzdG1vY2suIiArIGZuWzotM10NCiAgICAgICAgICAgIF9faW1wb3J0X18obW9kbmFtZSkNCiAgICAgICAgICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW21vZG5hbWVdDQogICAgICAgICAgICBzdWl0ZS5hZGRUZXN0KGxvYWRlci5sb2FkVGVzdHNGcm9tTW9kdWxlKG1vZHVsZSkpDQogICAgcmV0dXJuIHN1aXRlDQo=',
'/Lib/unittest/test/testmock/testcallable.py':'IyBDb3B5cmlnaHQgKEMpIDIwMDctMjAxMiBNaWNoYWVsIEZvb3JkICYgdGhlIG1vY2sgdGVhbQ0KIyBFLW1haWw6IGZ1enp5bWFuIEFUIHZvaWRzcGFjZSBET1Qgb3JnIERPVCB1aw0KIyBodHRwOi8vd3d3LnZvaWRzcGFjZS5vcmcudWsvcHl0aG9uL21vY2svDQoNCmltcG9ydCB1bml0dGVzdA0KZnJvbSB1bml0dGVzdC50ZXN0LnRlc3Rtb2NrLnN1cHBvcnQgaW1wb3J0IGlzX2luc3RhbmNlLCBYLCBTb21lQ2xhc3MNCg0KZnJvbSB1bml0dGVzdC5tb2NrIGltcG9ydCAoDQogICAgTW9jaywgTWFnaWNNb2NrLCBOb25DYWxsYWJsZU1hZ2ljTW9jaywNCiAgICBOb25DYWxsYWJsZU1vY2ssIHBhdGNoLCBjcmVhdGVfYXV0b3NwZWMsDQogICAgQ2FsbGFibGVNaXhpbg0KKQ0KDQoNCg0KY2xhc3MgVGVzdENhbGxhYmxlKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiBhc3NlcnROb3RDYWxsYWJsZShzZWxmLCBtb2NrKToNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzX2luc3RhbmNlKG1vY2ssIE5vbkNhbGxhYmxlTWFnaWNNb2NrKSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShpc19pbnN0YW5jZShtb2NrLCBDYWxsYWJsZU1peGluKSkNCg0KDQogICAgZGVmIHRlc3Rfbm9uX2NhbGxhYmxlKHNlbGYpOg0KICAgICAgICBmb3IgbW9jayBpbiBOb25DYWxsYWJsZU1hZ2ljTW9jaygpLCBOb25DYWxsYWJsZU1vY2soKToNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoaGFzYXR0cihtb2NrLCAnX19jYWxsX18nKSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SW4obW9jay5fX2NsYXNzX18uX19uYW1lX18sIHJlcHIobW9jaykpDQoNCg0KICAgIGRlZiB0ZXN0X2hlaXJhcmNoeShzZWxmKToNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzc3ViY2xhc3MoTWFnaWNNb2NrLCBNb2NrKSkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzc3ViY2xhc3MoTm9uQ2FsbGFibGVNYWdpY01vY2ssIE5vbkNhbGxhYmxlTW9jaykpDQoNCg0KICAgIGRlZiB0ZXN0X2F0dHJpYnV0ZXMoc2VsZik6DQogICAgICAgIG9uZSA9IE5vbkNhbGxhYmxlTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc3N1YmNsYXNzKHR5cGUob25lLm9uZSksIE1vY2spKQ0KDQogICAgICAgIHR3byA9IE5vbkNhbGxhYmxlTWFnaWNNb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzc3ViY2xhc3ModHlwZSh0d28udHdvKSwgTWFnaWNNb2NrKSkNCg0KDQogICAgZGVmIHRlc3Rfc3ViY2xhc3NlcyhzZWxmKToNCiAgICAgICAgY2xhc3MgTW9ja1N1YihNb2NrKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBvbmUgPSBNb2NrU3ViKCkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGlzc3ViY2xhc3ModHlwZShvbmUub25lKSwgTW9ja1N1YikpDQoNCiAgICAgICAgY2xhc3MgTWFnaWNTdWIoTWFnaWNNb2NrKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICB0d28gPSBNYWdpY1N1YigpDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShpc3N1YmNsYXNzKHR5cGUodHdvLnR3byksIE1hZ2ljU3ViKSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfc3BlYyhzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKCclcy5YJyAlIF9fbmFtZV9fLCBzcGVjPVRydWUpDQogICAgICAgIG1vY2sgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHBhdGNoZXIuc3RvcCkNCg0KICAgICAgICBpbnN0YW5jZSA9IG1vY2soKQ0KICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKCkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdENhbGxhYmxlKGluc3RhbmNlKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGluc3RhbmNlKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9zcGVjX3NldChzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKCclcy5YJyAlIF9fbmFtZV9fLCBzcGVjX3NldD1UcnVlKQ0KICAgICAgICBtb2NrID0gcGF0Y2hlci5zdGFydCgpDQogICAgICAgIHNlbGYuYWRkQ2xlYW51cChwYXRjaGVyLnN0b3ApDQoNCiAgICAgICAgaW5zdGFuY2UgPSBtb2NrKCkNCiAgICAgICAgbW9jay5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQoNCiAgICAgICAgc2VsZi5hc3NlcnROb3RDYWxsYWJsZShpbnN0YW5jZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpbnN0YW5jZSkNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfc3BlY19pbnN0YW5jZShzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKCclcy5YJyAlIF9fbmFtZV9fLCBzcGVjPVgoKSkNCiAgICAgICAgbW9jayA9IHBhdGNoZXIuc3RhcnQoKQ0KICAgICAgICBzZWxmLmFkZENsZWFudXAocGF0Y2hlci5zdG9wKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0Tm90Q2FsbGFibGUobW9jaykNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBtb2NrKQ0KDQoNCiAgICBkZWYgdGVzdF9wYXRjaF9zcGVjX3NldF9pbnN0YW5jZShzZWxmKToNCiAgICAgICAgcGF0Y2hlciA9IHBhdGNoKCclcy5YJyAlIF9fbmFtZV9fLCBzcGVjX3NldD1YKCkpDQogICAgICAgIG1vY2sgPSBwYXRjaGVyLnN0YXJ0KCkNCiAgICAgICAgc2VsZi5hZGRDbGVhbnVwKHBhdGNoZXIuc3RvcCkNCg0KICAgICAgICBzZWxmLmFzc2VydE5vdENhbGxhYmxlKG1vY2spDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCg0KDQogICAgZGVmIHRlc3RfcGF0Y2hfc3BlY19jYWxsYWJsZV9jbGFzcyhzZWxmKToNCiAgICAgICAgY2xhc3MgQ2FsbGFibGVYKFgpOg0KICAgICAgICAgICAgZGVmIF9fY2FsbF9fKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBTdWIoQ2FsbGFibGVYKToNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBjbGFzcyBNdWx0aShTb21lQ2xhc3MsIFN1Yik6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgZm9yIGFyZyBpbiAnc3BlYycsICdzcGVjX3NldCc6DQogICAgICAgICAgICBmb3IgS2xhc3MgaW4gQ2FsbGFibGVYLCBTdWIsIE11bHRpOg0KICAgICAgICAgICAgICAgIHdpdGggcGF0Y2goJyVzLlgnICUgX19uYW1lX18sICoqe2FyZzogS2xhc3N9KSBhcyBtb2NrOg0KICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IG1vY2soKQ0KICAgICAgICAgICAgICAgICAgICBtb2NrLmFzc2VydF9jYWxsZWRfb25jZV93aXRoKCkNCg0KICAgICAgICAgICAgICAgICAgICBzZWxmLmFzc2VydFRydWUoaXNfaW5zdGFuY2UoaW5zdGFuY2UsIE1hZ2ljTW9jaykpDQogICAgICAgICAgICAgICAgICAgICMgaW5oZXJpdGVkIHNwZWMNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGdldGF0dHIsIGluc3RhbmNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9vYmFyYmF6JykNCg0KICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBpbnN0YW5jZSgpDQogICAgICAgICAgICAgICAgICAgICMgaW5zdGFuY2UgaXMgY2FsbGFibGUsIHJlc3VsdCBoYXMgbm8gc3BlYw0KICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgpDQoNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0KDMsIDIsIDEpDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hc3NlcnRfY2FsbGVkX29uY2Vfd2l0aCgzLCAyLCAxKQ0KICAgICAgICAgICAgICAgICAgICByZXN1bHQuZm9vKDMsIDIsIDEpDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5mb28uYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoMywgMiwgMSkNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9wc2VjKHNlbGYpOg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKFgpDQogICAgICAgIGluc3RhbmNlID0gbW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW5zdGFuY2UpDQoNCiAgICAgICAgbW9jayA9IGNyZWF0ZV9hdXRvc3BlYyhYKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jaykNCg0KDQogICAgZGVmIHRlc3RfY3JlYXRlX2F1dG9zcGVjX2luc3RhbmNlKHNlbGYpOg0KICAgICAgICBtb2NrID0gY3JlYXRlX2F1dG9zcGVjKFNvbWVDbGFzcywgaW5zdGFuY2U9VHJ1ZSkNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIG1vY2spDQogICAgICAgIG1vY2sud2liYmxlKCkNCiAgICAgICAgbW9jay53aWJibGUuYXNzZXJ0X2NhbGxlZF9vbmNlX3dpdGgoKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbW9jay53aWJibGUsICdzb21lJywgICdhcmdzJykNCg==',
'/Lib/unittest/test/testmock/testmagicmethods.py':'aW1wb3J0IHVuaXR0ZXN0DQppbXBvcnQgaW5zcGVjdA0KaW1wb3J0IHN5cw0KZnJvbSB1bml0dGVzdC5tb2NrIGltcG9ydCBNb2NrLCBNYWdpY01vY2ssIF9tYWdpY3MNCg0KDQoNCmNsYXNzIFRlc3RNb2NraW5nTWFnaWNNZXRob2RzKHVuaXR0ZXN0LlRlc3RDYXNlKToNCg0KICAgIGRlZiB0ZXN0X2RlbGV0aW5nX21hZ2ljX21ldGhvZHMoc2VsZik6DQogICAgICAgIG1vY2sgPSBNb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKG1vY2ssICdfX2dldGl0ZW1fXycpKQ0KDQogICAgICAgIG1vY2suX19nZXRpdGVtX18gPSBNb2NrKCkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGhhc2F0dHIobW9jaywgJ19fZ2V0aXRlbV9fJykpDQoNCiAgICAgICAgZGVsIG1vY2suX19nZXRpdGVtX18NCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKG1vY2ssICdfX2dldGl0ZW1fXycpKQ0KDQoNCiAgICBkZWYgdGVzdF9tYWdpY21vY2tfZGVsKHNlbGYpOg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKCkNCiAgICAgICAgIyBiZWZvcmUgdXNpbmcgZ2V0aXRlbQ0KICAgICAgICBkZWwgbW9jay5fX2dldGl0ZW1fXw0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogbW9ja1snZm9vJ10pDQoNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgICMgdGhpcyB0aW1lIHVzZSBpdCBmaXJzdA0KICAgICAgICBtb2NrWydmb28nXQ0KICAgICAgICBkZWwgbW9jay5fX2dldGl0ZW1fXw0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogbW9ja1snZm9vJ10pDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljX21ldGhvZF93cmFwcGluZyhzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBkZWYgZihzZWxmLCBuYW1lKToNCiAgICAgICAgICAgIHJldHVybiBzZWxmLCAnZmlzaCcNCg0KICAgICAgICBtb2NrLl9fZ2V0aXRlbV9fID0gZg0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKG1vY2suX19nZXRpdGVtX18gaXMgZikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrWydmb28nXSwgKG1vY2ssICdmaXNoJykpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay5fX2dldGl0ZW1fXygnZm9vJyksIChtb2NrLCAnZmlzaCcpKQ0KDQogICAgICAgIG1vY2suX19nZXRpdGVtX18gPSBtb2NrDQogICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShtb2NrLl9fZ2V0aXRlbV9fIGlzIG1vY2spDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljX21ldGhvZHNfaXNvbGF0ZWRfYmV0d2Vlbl9tb2NrcyhzZWxmKToNCiAgICAgICAgbW9jazEgPSBNb2NrKCkNCiAgICAgICAgbW9jazIgPSBNb2NrKCkNCg0KICAgICAgICBtb2NrMS5fX2l0ZXJfXyA9IE1vY2socmV0dXJuX3ZhbHVlPWl0ZXIoW10pKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3QobW9jazEpLCBbXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBsYW1iZGE6IGxpc3QobW9jazIpKQ0KDQoNCiAgICBkZWYgdGVzdF9yZXByKHNlbGYpOg0KICAgICAgICBtb2NrID0gTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihtb2NrKSwgIjxNb2NrIGlkPSclcyc+IiAlIGlkKG1vY2spKQ0KICAgICAgICBtb2NrLl9fcmVwcl9fID0gbGFtYmRhIHM6ICdmb28nDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVwcihtb2NrKSwgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X3N0cihzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihtb2NrKSwgb2JqZWN0Ll9fc3RyX18obW9jaykpDQogICAgICAgIG1vY2suX19zdHJfXyA9IGxhbWJkYSBzOiAnZm9vJw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihtb2NrKSwgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X2RpY3RfbWV0aG9kcyhzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBtb2NrWydmb28nXSkNCiAgICAgICAgZGVmIF9kZWwoKToNCiAgICAgICAgICAgIGRlbCBtb2NrWydmb28nXQ0KICAgICAgICBkZWYgX3NldCgpOg0KICAgICAgICAgICAgbW9ja1snZm9vJ10gPSAzDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgX2RlbCkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBfc2V0KQ0KDQogICAgICAgIF9kaWN0ID0ge30NCiAgICAgICAgZGVmIGdldGl0ZW0ocywgbmFtZSk6DQogICAgICAgICAgICByZXR1cm4gX2RpY3RbbmFtZV0NCiAgICAgICAgZGVmIHNldGl0ZW0ocywgbmFtZSwgdmFsdWUpOg0KICAgICAgICAgICAgX2RpY3RbbmFtZV0gPSB2YWx1ZQ0KICAgICAgICBkZWYgZGVsaXRlbShzLCBuYW1lKToNCiAgICAgICAgICAgIGRlbCBfZGljdFtuYW1lXQ0KDQogICAgICAgIG1vY2suX19zZXRpdGVtX18gPSBzZXRpdGVtDQogICAgICAgIG1vY2suX19nZXRpdGVtX18gPSBnZXRpdGVtDQogICAgICAgIG1vY2suX19kZWxpdGVtX18gPSBkZWxpdGVtDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoS2V5RXJyb3IsIGxhbWJkYTogbW9ja1snZm9vJ10pDQogICAgICAgIG1vY2tbJ2ZvbyddID0gJ2JhcicNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChfZGljdCwgeydmb28nOiAnYmFyJ30pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9ja1snZm9vJ10sICdiYXInKQ0KICAgICAgICBkZWwgbW9ja1snZm9vJ10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChfZGljdCwge30pDQoNCg0KICAgIGRlZiB0ZXN0X251bWVyaWMoc2VsZik6DQogICAgICAgIG9yaWdpbmFsID0gbW9jayA9IE1vY2soKQ0KICAgICAgICBtb2NrLnZhbHVlID0gMA0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBtb2NrICsgMykNCg0KICAgICAgICBkZWYgYWRkKHNlbGYsIG90aGVyKToNCiAgICAgICAgICAgIG1vY2sudmFsdWUgKz0gb3RoZXINCiAgICAgICAgICAgIHJldHVybiBzZWxmDQogICAgICAgIG1vY2suX19hZGRfXyA9IGFkZA0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2sgKyAzLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2sudmFsdWUsIDMpDQoNCiAgICAgICAgZGVsIG1vY2suX19hZGRfXw0KICAgICAgICBkZWYgaWFkZChtb2NrKToNCiAgICAgICAgICAgIG1vY2sgKz0gMw0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGlhZGQsIG1vY2spDQogICAgICAgIG1vY2suX19pYWRkX18gPSBhZGQNCiAgICAgICAgbW9jayArPSA2DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jaywgb3JpZ2luYWwpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jay52YWx1ZSwgOSkNCg0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogMyArIG1vY2spDQogICAgICAgIG1vY2suX19yYWRkX18gPSBhZGQNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCg3ICsgbW9jaywgbW9jaykNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrLnZhbHVlLCAxNikNCg0KDQogICAgZGVmIHRlc3RfaGFzaChzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICAjIHRlc3QgZGVsZWdhdGlvbg0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGhhc2gobW9jayksIE1vY2suX19oYXNoX18obW9jaykpDQoNCiAgICAgICAgZGVmIF9oYXNoKHMpOg0KICAgICAgICAgICAgcmV0dXJuIDMNCiAgICAgICAgbW9jay5fX2hhc2hfXyA9IF9oYXNoDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaGFzaChtb2NrKSwgMykNCg0KDQogICAgZGVmIHRlc3Rfbm9uemVybyhzZWxmKToNCiAgICAgICAgbSA9IE1vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydFRydWUoYm9vbChtKSkNCg0KICAgICAgICBtLl9fYm9vbF9fID0gbGFtYmRhIHM6IEZhbHNlDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoYm9vbChtKSkNCg0KDQogICAgZGVmIHRlc3RfY29tcGFyaXNvbihzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KICAgICAgICBkZWYgY29tcChzLCBvKToNCiAgICAgICAgICAgIHJldHVybiBUcnVlDQogICAgICAgIG1vY2suX19sdF9fID0gbW9jay5fX2d0X18gPSBtb2NrLl9fbGVfXyA9IG1vY2suX19nZV9fID0gY29tcA0KICAgICAgICBzZWxmLiBhc3NlcnRUcnVlKG1vY2sgPCAzKQ0KICAgICAgICBzZWxmLiBhc3NlcnRUcnVlKG1vY2sgPiAzKQ0KICAgICAgICBzZWxmLiBhc3NlcnRUcnVlKG1vY2sgPD0gMykNCiAgICAgICAgc2VsZi4gYXNzZXJ0VHJ1ZShtb2NrID49IDMpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBsYW1iZGE6IE1hZ2ljTW9jaygpIDwgb2JqZWN0KCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBvYmplY3QoKSA8IE1hZ2ljTW9jaygpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogTWFnaWNNb2NrKCkgPCBNYWdpY01vY2soKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBsYW1iZGE6IE1hZ2ljTW9jaygpID4gb2JqZWN0KCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBvYmplY3QoKSA+IE1hZ2ljTW9jaygpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogTWFnaWNNb2NrKCkgPiBNYWdpY01vY2soKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBsYW1iZGE6IE1hZ2ljTW9jaygpIDw9IG9iamVjdCgpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogb2JqZWN0KCkgPD0gTWFnaWNNb2NrKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBNYWdpY01vY2soKSA8PSBNYWdpY01vY2soKSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBsYW1iZGE6IE1hZ2ljTW9jaygpID49IG9iamVjdCgpKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGxhbWJkYTogb2JqZWN0KCkgPj0gTWFnaWNNb2NrKCkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiBNYWdpY01vY2soKSA+PSBNYWdpY01vY2soKSkNCg0KDQogICAgZGVmIHRlc3RfZXF1YWxpdHkoc2VsZik6DQogICAgICAgIGZvciBtb2NrIGluIE1vY2soKSwgTWFnaWNNb2NrKCk6DQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2sgPT0gbW9jaywgVHJ1ZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrID09IG1vY2ssIGJvb2wpDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2sgIT0gbW9jaywgRmFsc2UpDQogICAgICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jayAhPSBtb2NrLCBib29sKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrID09IG9iamVjdCgpLCBGYWxzZSkNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9jayAhPSBvYmplY3QoKSwgVHJ1ZSkNCg0KICAgICAgICAgICAgZGVmIGVxKHNlbGYsIG90aGVyKToNCiAgICAgICAgICAgICAgICByZXR1cm4gb3RoZXIgPT0gMw0KICAgICAgICAgICAgbW9jay5fX2VxX18gPSBlcQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRUcnVlKG1vY2sgPT0gMykNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UobW9jayA9PSA0KQ0KDQogICAgICAgICAgICBkZWYgbmUoc2VsZiwgb3RoZXIpOg0KICAgICAgICAgICAgICAgIHJldHVybiBvdGhlciA9PSAzDQogICAgICAgICAgICBtb2NrLl9fbmVfXyA9IG5lDQogICAgICAgICAgICBzZWxmLmFzc2VydFRydWUobW9jayAhPSAzKQ0KICAgICAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShtb2NrICE9IDQpDQoNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgIG1vY2suX19lcV9fLnJldHVybl92YWx1ZSA9IFRydWUNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2sgPT0gMywgYm9vbCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrID09IDMsIFRydWUpDQoNCiAgICAgICAgbW9jay5fX25lX18ucmV0dXJuX3ZhbHVlID0gRmFsc2UNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2sgIT0gMywgYm9vbCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrICE9IDMsIEZhbHNlKQ0KDQoNCiAgICBkZWYgdGVzdF9sZW5fY29udGFpbnNfaXRlcihzZWxmKToNCiAgICAgICAgbW9jayA9IE1vY2soKQ0KDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGVuLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGl0ZXIsIG1vY2spDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgbGFtYmRhOiAnZm9vJyBpbiBtb2NrKQ0KDQogICAgICAgIG1vY2suX19sZW5fXyA9IGxhbWJkYSBzOiA2DQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGVuKG1vY2spLCA2KQ0KDQogICAgICAgIG1vY2suX19jb250YWluc19fID0gbGFtYmRhIHMsIG86IG8gPT0gMw0KICAgICAgICBzZWxmLmFzc2VydFRydWUoMyBpbiBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKDYgaW4gbW9jaykNCg0KICAgICAgICBtb2NrLl9faXRlcl9fID0gbGFtYmRhIHM6IGl0ZXIoJ2Zvb2JhcmJheicpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtb2NrKSwgbGlzdCgnZm9vYmFyYmF6JykpDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljbW9jayhzZWxmKToNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQoNCiAgICAgICAgbW9jay5fX2l0ZXJfXy5yZXR1cm5fdmFsdWUgPSBpdGVyKFsxLCAyLCAzXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KG1vY2spLCBbMSwgMiwgM10pDQoNCiAgICAgICAgZ2V0YXR0cihtb2NrLCAnX19ib29sX18nKS5yZXR1cm5fdmFsdWUgPSBGYWxzZQ0KICAgICAgICBzZWxmLmFzc2VydEZhbHNlKGhhc2F0dHIobW9jaywgJ19fbm9uemVyb19fJykpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UoYm9vbChtb2NrKSkNCg0KICAgICAgICBmb3IgZW50cnkgaW4gX21hZ2ljczoNCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0VHJ1ZShoYXNhdHRyKG1vY2ssIGVudHJ5KSkNCiAgICAgICAgc2VsZi5hc3NlcnRGYWxzZShoYXNhdHRyKG1vY2ssICdfX2ltYWdpbmVyeV9fJykpDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljX21vY2tfZXF1YWxpdHkoc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UobW9jayA9PSBvYmplY3QoKSwgYm9vbCkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKG1vY2sgIT0gb2JqZWN0KCksIGJvb2wpDQoNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrID09IG9iamVjdCgpLCBGYWxzZSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrICE9IG9iamVjdCgpLCBUcnVlKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG1vY2sgPT0gbW9jaywgVHJ1ZSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChtb2NrICE9IG1vY2ssIEZhbHNlKQ0KDQoNCiAgICBkZWYgdGVzdF9tYWdpY21vY2tfZGVmYXVsdHMoc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludChtb2NrKSwgMSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChjb21wbGV4KG1vY2spLCAxaikNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChmbG9hdChtb2NrKSwgMS4wKQ0KICAgICAgICBzZWxmLmFzc2VydE5vdEluKG9iamVjdCgpLCBtb2NrKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxlbihtb2NrKSwgMCkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KG1vY2spLCBbXSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChoYXNoKG1vY2spLCBvYmplY3QuX19oYXNoX18obW9jaykpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoc3RyKG1vY2spLCBvYmplY3QuX19zdHJfXyhtb2NrKSkNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGJvb2wobW9jaykpDQoNCiAgICAgICAgIyBpbiBQeXRob24gMyBvY3QgYW5kIGhleCB1c2UgX19pbmRleF9fDQogICAgICAgICMgc28gdGhlc2UgdGVzdHMgYXJlIGZvciBfX2luZGV4X18gaW4gcHkzaw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG9jdChtb2NrKSwgJzBvMScpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaGV4KG1vY2spLCAnMHgxJykNCiAgICAgICAgIyBob3cgdG8gdGVzdCBfX3NpemVvZl9fID8NCg0KDQogICAgZGVmIHRlc3RfbWFnaWNfbWV0aG9kc19hbmRfc3BlYyhzZWxmKToNCiAgICAgICAgY2xhc3MgSXRlcmFibGUob2JqZWN0KToNCiAgICAgICAgICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgbW9jayA9IE1vY2soc3BlYz1JdGVyYWJsZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGxhbWJkYTogbW9jay5fX2l0ZXJfXykNCg0KICAgICAgICBtb2NrLl9faXRlcl9fID0gTW9jayhyZXR1cm5fdmFsdWU9aXRlcihbXSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtb2NrKSwgW10pDQoNCiAgICAgICAgY2xhc3MgTm9uSXRlcmFibGUob2JqZWN0KToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbW9jayA9IE1vY2soc3BlYz1Ob25JdGVyYWJsZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGxhbWJkYTogbW9jay5fX2l0ZXJfXykNCg0KICAgICAgICBkZWYgc2V0X2ludCgpOg0KICAgICAgICAgICAgbW9jay5fX2ludF9fID0gTW9jayhyZXR1cm5fdmFsdWU9aXRlcihbXSkpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBzZXRfaW50KQ0KDQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soc3BlYz1JdGVyYWJsZSkNCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KG1vY2spLCBbXSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIHNldF9pbnQpDQoNCg0KICAgIGRlZiB0ZXN0X21hZ2ljX21ldGhvZHNfYW5kX3NwZWNfc2V0KHNlbGYpOg0KICAgICAgICBjbGFzcyBJdGVyYWJsZShvYmplY3QpOg0KICAgICAgICAgICAgZGVmIF9faXRlcl9fKHNlbGYpOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICBtb2NrID0gTW9jayhzcGVjX3NldD1JdGVyYWJsZSkNCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoQXR0cmlidXRlRXJyb3IsIGxhbWJkYTogbW9jay5fX2l0ZXJfXykNCg0KICAgICAgICBtb2NrLl9faXRlcl9fID0gTW9jayhyZXR1cm5fdmFsdWU9aXRlcihbXSkpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtb2NrKSwgW10pDQoNCiAgICAgICAgY2xhc3MgTm9uSXRlcmFibGUob2JqZWN0KToNCiAgICAgICAgICAgIHBhc3MNCiAgICAgICAgbW9jayA9IE1vY2soc3BlY19zZXQ9Tm9uSXRlcmFibGUpDQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKEF0dHJpYnV0ZUVycm9yLCBsYW1iZGE6IG1vY2suX19pdGVyX18pDQoNCiAgICAgICAgZGVmIHNldF9pbnQoKToNCiAgICAgICAgICAgIG1vY2suX19pbnRfXyA9IE1vY2socmV0dXJuX3ZhbHVlPWl0ZXIoW10pKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgc2V0X2ludCkNCg0KICAgICAgICBtb2NrID0gTWFnaWNNb2NrKHNwZWNfc2V0PUl0ZXJhYmxlKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3QobW9jayksIFtdKQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhBdHRyaWJ1dGVFcnJvciwgc2V0X2ludCkNCg0KDQogICAgZGVmIHRlc3Rfc2V0dGluZ191bnN1cHBvcnRlZF9tYWdpY19tZXRob2Qoc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBkZWYgc2V0X3NldGF0dHIoKToNCiAgICAgICAgICAgIG1vY2suX19zZXRhdHRyX18gPSBsYW1iZGEgc2VsZiwgbmFtZTogTm9uZQ0KICAgICAgICBzZWxmLmFzc2VydFJhaXNlc1JlZ2V4KEF0dHJpYnV0ZUVycm9yLA0KICAgICAgICAgICAgIkF0dGVtcHRpbmcgdG8gc2V0IHVuc3VwcG9ydGVkIG1hZ2ljIG1ldGhvZCAnX19zZXRhdHRyX18nLiIsDQogICAgICAgICAgICBzZXRfc2V0YXR0cg0KICAgICAgICApDQoNCg0KICAgIGRlZiB0ZXN0X2F0dHJpYnV0ZXNfYW5kX3JldHVybl92YWx1ZShzZWxmKToNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgIGF0dHIgPSBtb2NrLmZvbw0KICAgICAgICBkZWYgX2dldF90eXBlKG9iaik6DQogICAgICAgICAgICAjIHRoZSB0eXBlIG9mIGV2ZXJ5IG1vY2sgKG9yIG1hZ2ljbW9jaykgaXMgYSBjdXN0b20gc3ViY2xhc3MNCiAgICAgICAgICAgICMgc28gdGhlIHJlYWwgdHlwZSBpcyB0aGUgc2Vjb25kIGluIHRoZSBtcm8NCiAgICAgICAgICAgIHJldHVybiB0eXBlKG9iaikuX19tcm9fX1sxXQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKF9nZXRfdHlwZShhdHRyKSwgTWFnaWNNb2NrKQ0KDQogICAgICAgIHJldHVybmVkID0gbW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoX2dldF90eXBlKHJldHVybmVkKSwgTWFnaWNNb2NrKQ0KDQoNCiAgICBkZWYgdGVzdF9tYWdpY19tZXRob2RzX2FyZV9tYWdpY19tb2NrcyhzZWxmKToNCiAgICAgICAgbW9jayA9IE1hZ2ljTW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZShtb2NrLl9fZ2V0aXRlbV9fLCBNYWdpY01vY2spDQoNCiAgICAgICAgbW9ja1sxXVsyXS5fX2dldGl0ZW1fXy5yZXR1cm5fdmFsdWUgPSAzDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobW9ja1sxXVsyXVszXSwgMykNCg0KDQogICAgZGVmIHRlc3RfbWFnaWNfbWV0aG9kX3Jlc2V0X21vY2soc2VsZik6DQogICAgICAgIG1vY2sgPSBNYWdpY01vY2soKQ0KICAgICAgICBzdHIobW9jaykNCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKG1vY2suX19zdHJfXy5jYWxsZWQpDQogICAgICAgIG1vY2sucmVzZXRfbW9jaygpDQogICAgICAgIHNlbGYuYXNzZXJ0RmFsc2UobW9jay5fX3N0cl9fLmNhbGxlZCkNCg0KDQogICAgZGVmIHRlc3RfZGlyKHNlbGYpOg0KICAgICAgICAjIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24NCiAgICAgICAgZm9yIG1vY2sgaW4gTW9jaygpLCBNYWdpY01vY2soKToNCiAgICAgICAgICAgIGRlZiBfZGlyKHNlbGYpOg0KICAgICAgICAgICAgICAgIHJldHVybiBbJ2ZvbyddDQogICAgICAgICAgICBtb2NrLl9fZGlyX18gPSBfZGlyDQogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGRpcihtb2NrKSwgWydmb28nXSkNCg0KDQogICAgQHVuaXR0ZXN0LnNraXBJZignUHlQeScgaW4gc3lzLnZlcnNpb24sICJUaGlzIGZhaWxzIGRpZmZlcmVudGx5IG9uIHB5cHkiKQ0KICAgIGRlZiB0ZXN0X2JvdW5kX21ldGhvZHMoc2VsZik6DQogICAgICAgIG0gPSBNb2NrKCkNCg0KICAgICAgICAjIFhYWFggc2hvdWxkIHRoaXMgYmUgYW4gZXhwZWN0ZWQgZmFpbHVyZSBpbnN0ZWFkPw0KDQogICAgICAgICMgdGhpcyBzZWVtcyBsaWtlIGl0IHNob3VsZCB3b3JrLCBidXQgaXMgaGFyZCB0byBkbyB3aXRob3V0IGludHJvZHVjaW5nDQogICAgICAgICMgb3RoZXIgYXBpIGluY29uc2lzdGVuY2llcy4gRmFpbHVyZSBtZXNzYWdlIGNvdWxkIGJlIGJldHRlciB0aG91Z2guDQogICAgICAgIG0uX19pdGVyX18gPSBbM10uX19pdGVyX18NCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpdGVyLCBtKQ0KDQoNCiAgICBkZWYgdGVzdF9tYWdpY19tZXRob2RfdHlwZShzZWxmKToNCiAgICAgICAgY2xhc3MgRm9vKE1hZ2ljTW9jayk6DQogICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgZm9vID0gRm9vKCkNCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKGZvby5fX2ludF9fLCBGb28pDQoNCg0KICAgIGRlZiB0ZXN0X2Rlc2NyaXB0b3JfZnJvbV9jbGFzcyhzZWxmKToNCiAgICAgICAgbSA9IE1hZ2ljTW9jaygpDQogICAgICAgIHR5cGUobSkuX19zdHJfXy5yZXR1cm5fdmFsdWUgPSAnZm9vJw0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHN0cihtKSwgJ2ZvbycpDQoNCg0KICAgIGRlZiB0ZXN0X2l0ZXJhYmxlX2FzX2l0ZXJfcmV0dXJuX3ZhbHVlKHNlbGYpOg0KICAgICAgICBtID0gTWFnaWNNb2NrKCkNCiAgICAgICAgbS5fX2l0ZXJfXy5yZXR1cm5fdmFsdWUgPSBbMSwgMiwgM10NCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChsaXN0KG0pLCBbMSwgMiwgM10pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtKSwgWzEsIDIsIDNdKQ0KDQogICAgICAgIG0uX19pdGVyX18ucmV0dXJuX3ZhbHVlID0gaXRlcihbNCwgNSwgNl0pDQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobGlzdChtKSwgWzQsIDUsIDZdKQ0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxpc3QobSksIFtdKQ0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdW5pdHRlc3QubWFpbigpDQo=',
'/Lib/urllib/request.py':'aW1wb3J0IGFqYXgKCmNsYXNzIEZpbGVJTzoKICBkZWYgX19pbml0X18oc2VsZiwgZGF0YSk6CiAgICAgIHNlbGYuX2RhdGE9ZGF0YQoKICBkZWYgcmVhZChzZWxmKToKICAgICAgcmV0dXJuIHNlbGYuX2RhdGEKCmRlZiB1cmxvcGVuKHVybCwgZGF0YT1Ob25lLCB0aW1lb3V0PU5vbmUpOgogICAgZ2xvYmFsIHJlc3VsdAogICAgcmVzdWx0PU5vbmUKCiAgICBkZWYgb25fY29tcGxldGUocmVxKToKICAgICAgICBnbG9iYWwgcmVzdWx0CiAgICAgICAgcmVzdWx0PXJlcQoKICAgIF9hamF4PWFqYXguYWpheCgpCiAgICBfYWpheC5iaW5kKCdjb21wbGV0ZScsIG9uX2NvbXBsZXRlKQogICAgaWYgdGltZW91dCBpcyBub3QgTm9uZToKICAgICAgIF9hamF4LnNldF90aW1lb3V0KHRpbWVvdXQpCgogICAgX2FqYXgub3BlbignR0VUJywgdXJsLCBGYWxzZSkKICAgIGlmIGRhdGEgaXMgTm9uZToKICAgICAgIF9hamF4LnNlbmQoKQogICAgZWxzZToKICAgICAgIF9hamF4LnNlbmQoZGF0YSkKCiAgICByZXR1cm4gRmlsZUlPKHJlc3VsdC50ZXh0KSwgdXJsLCByZXN1bHQuaGVhZGVycwo=',
'/Lib/urllib/__init__.py':'',
'/Lib/test/support.py':'IiIiU3VwcG9ydGluZyBkZWZpbml0aW9ucyBmb3IgdGhlIFB5dGhvbiByZWdyZXNzaW9uIHRlc3RzLiIiIgoKaWYgX19uYW1lX18gIT0gJ3Rlc3Quc3VwcG9ydCc6CiAgICByYWlzZSBJbXBvcnRFcnJvcignc3VwcG9ydCBtdXN0IGJlIGltcG9ydGVkIGZyb20gdGhlIHRlc3QgcGFja2FnZScpCgppbXBvcnQgY29udGV4dGxpYgppbXBvcnQgZXJybm8KaW1wb3J0IGZ1bmN0b29scwppbXBvcnQgZ2MKaW1wb3J0IHNvY2tldAppbXBvcnQgc3lzCmltcG9ydCBvcwppbXBvcnQgcGxhdGZvcm0KaW1wb3J0IHNodXRpbAppbXBvcnQgd2FybmluZ3MKaW1wb3J0IHVuaXR0ZXN0CmltcG9ydCBpbXBvcnRsaWIKaW1wb3J0IGNvbGxlY3Rpb25zLmFiYwppbXBvcnQgcmUKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IGltcAppbXBvcnQgdGltZQppbXBvcnQgc3lzY29uZmlnCmltcG9ydCBmbm1hdGNoCmltcG9ydCBsb2dnaW5nLmhhbmRsZXJzCmltcG9ydCBzdHJ1Y3QKaW1wb3J0IHRlbXBmaWxlCmltcG9ydCBfdGVzdGNhcGkKCnRyeToKICAgIGltcG9ydCBfdGhyZWFkLCB0aHJlYWRpbmcKZXhjZXB0IEltcG9ydEVycm9yOgogICAgX3RocmVhZCA9IE5vbmUKICAgIHRocmVhZGluZyA9IE5vbmUKdHJ5OgogICAgaW1wb3J0IG11bHRpcHJvY2Vzc2luZy5wcm9jZXNzCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIG11bHRpcHJvY2Vzc2luZyA9IE5vbmUKCnRyeToKICAgIGltcG9ydCB6bGliCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHpsaWIgPSBOb25lCgp0cnk6CiAgICBpbXBvcnQgYnoyCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGJ6MiA9IE5vbmUKCnRyeToKICAgIGltcG9ydCBsem1hCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGx6bWEgPSBOb25lCgpfX2FsbF9fID0gWwogICAgIkVycm9yIiwgIlRlc3RGYWlsZWQiLCAiUmVzb3VyY2VEZW5pZWQiLCAiaW1wb3J0X21vZHVsZSIsICJ2ZXJib3NlIiwKICAgICJ1c2VfcmVzb3VyY2VzIiwgIm1heF9tZW11c2UiLCAicmVjb3JkX29yaWdpbmFsX3N0ZG91dCIsCiAgICAiZ2V0X29yaWdpbmFsX3N0ZG91dCIsICJ1bmxvYWQiLCAidW5saW5rIiwgInJtdHJlZSIsICJmb3JnZXQiLAogICAgImlzX3Jlc291cmNlX2VuYWJsZWQiLCAicmVxdWlyZXMiLCAicmVxdWlyZXNfZnJlZWJzZF92ZXJzaW9uIiwKICAgICJyZXF1aXJlc19saW51eF92ZXJzaW9uIiwgInJlcXVpcmVzX21hY192ZXIiLCAiZmluZF91bnVzZWRfcG9ydCIsCiAgICAiYmluZF9wb3J0IiwgIklQVjZfRU5BQkxFRCIsICJpc19qeXRob24iLCAiVEVTVEZOIiwgIkhPU1QiLCAiU0FWRURDV0QiLAogICAgInRlbXBfY3dkIiwgImZpbmRmaWxlIiwgImNyZWF0ZV9lbXB0eV9maWxlIiwgInNvcnRkaWN0IiwKICAgICJjaGVja19zeW50YXhfZXJyb3IiLCAib3Blbl91cmxyZXNvdXJjZSIsICJjaGVja193YXJuaW5ncyIsICJDbGVhbkltcG9ydCIsCiAgICAiRW52aXJvbm1lbnRWYXJHdWFyZCIsICJUcmFuc2llbnRSZXNvdXJjZSIsICJjYXB0dXJlZF9zdGRvdXQiLAogICAgImNhcHR1cmVkX3N0ZGluIiwgImNhcHR1cmVkX3N0ZGVyciIsICJ0aW1lX291dCIsICJzb2NrZXRfcGVlcl9yZXNldCIsCiAgICAiaW9lcnJvcl9wZWVyX3Jlc2V0IiwgInJ1bl93aXRoX2xvY2FsZSIsICd0ZW1wX3VtYXNrJywKICAgICJ0cmFuc2llbnRfaW50ZXJuZXQiLCAic2V0X21lbWxpbWl0IiwgImJpZ21lbXRlc3QiLCAiYmlnYWRkcnNwYWNldGVzdCIsCiAgICAiQmFzaWNUZXN0UnVubmVyIiwgInJ1bl91bml0dGVzdCIsICJydW5fZG9jdGVzdCIsICJ0aHJlYWRpbmdfc2V0dXAiLAogICAgInRocmVhZGluZ19jbGVhbnVwIiwgInJlYXBfY2hpbGRyZW4iLCAiY3B5dGhvbl9vbmx5IiwgImNoZWNrX2ltcGxfZGV0YWlsIiwKICAgICJnZXRfYXR0cmlidXRlIiwgInN3YXBfaXRlbSIsICJzd2FwX2F0dHIiLCAicmVxdWlyZXNfSUVFRV83NTQiLAogICAgIlRlc3RIYW5kbGVyIiwgIk1hdGNoZXIiLCAiY2FuX3N5bWxpbmsiLCAic2tpcF91bmxlc3Nfc3ltbGluayIsCiAgICAic2tpcF91bmxlc3NfeGF0dHIiLCAiaW1wb3J0X2ZyZXNoX21vZHVsZSIsICJyZXF1aXJlc196bGliIiwKICAgICJQSVBFX01BWF9TSVpFIiwgImZhaWxmYXN0IiwgImFudGljaXBhdGVfZmFpbHVyZSIsICJydW5fd2l0aF90eiIsCiAgICAicmVxdWlyZXNfYnoyIiwgInJlcXVpcmVzX2x6bWEiLCAic3VwcHJlc3NfY3Jhc2hfcG9wdXAiLAogICAgXQoKY2xhc3MgRXJyb3IoRXhjZXB0aW9uKToKICAgICIiIkJhc2UgY2xhc3MgZm9yIHJlZ3Jlc3Npb24gdGVzdCBleGNlcHRpb25zLiIiIgoKY2xhc3MgVGVzdEZhaWxlZChFcnJvcik6CiAgICAiIiJUZXN0IGZhaWxlZC4iIiIKCmNsYXNzIFJlc291cmNlRGVuaWVkKHVuaXR0ZXN0LlNraXBUZXN0KToKICAgICIiIlRlc3Qgc2tpcHBlZCBiZWNhdXNlIGl0IHJlcXVlc3RlZCBhIGRpc2FsbG93ZWQgcmVzb3VyY2UuCgogICAgVGhpcyBpcyByYWlzZWQgd2hlbiBhIHRlc3QgY2FsbHMgcmVxdWlyZXMoKSBmb3IgYSByZXNvdXJjZSB0aGF0CiAgICBoYXMgbm90IGJlIGVuYWJsZWQuICBJdCBpcyB1c2VkIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gZXhwZWN0ZWQKICAgIGFuZCB1bmV4cGVjdGVkIHNraXBzLgogICAgIiIiCgpAY29udGV4dGxpYi5jb250ZXh0bWFuYWdlcgpkZWYgX2lnbm9yZV9kZXByZWNhdGVkX2ltcG9ydHMoaWdub3JlPVRydWUpOgogICAgIiIiQ29udGV4dCBtYW5hZ2VyIHRvIHN1cHByZXNzIHBhY2thZ2UgYW5kIG1vZHVsZSBkZXByZWNhdGlvbgogICAgd2FybmluZ3Mgd2hlbiBpbXBvcnRpbmcgdGhlbS4KCiAgICBJZiBpZ25vcmUgaXMgRmFsc2UsIHRoaXMgY29udGV4dCBtYW5hZ2VyIGhhcyBubyBlZmZlY3QuIiIiCiAgICBpZiBpZ25vcmU6CiAgICAgICAgd2l0aCB3YXJuaW5ncy5jYXRjaF93YXJuaW5ncygpOgogICAgICAgICAgICB3YXJuaW5ncy5maWx0ZXJ3YXJuaW5ncygiaWdub3JlIiwgIi4rIChtb2R1bGV8cGFja2FnZSkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcpCiAgICAgICAgICAgIHlpZWxkCiAgICBlbHNlOgogICAgICAgIHlpZWxkCgoKZGVmIGltcG9ydF9tb2R1bGUobmFtZSwgZGVwcmVjYXRlZD1GYWxzZSk6CiAgICAiIiJJbXBvcnQgYW5kIHJldHVybiB0aGUgbW9kdWxlIHRvIGJlIHRlc3RlZCwgcmFpc2luZyBTa2lwVGVzdCBpZgogICAgaXQgaXMgbm90IGF2YWlsYWJsZS4KCiAgICBJZiBkZXByZWNhdGVkIGlzIFRydWUsIGFueSBtb2R1bGUgb3IgcGFja2FnZSBkZXByZWNhdGlvbiBtZXNzYWdlcwogICAgd2lsbCBiZSBzdXBwcmVzc2VkLiIiIgogICAgd2l0aCBfaWdub3JlX2RlcHJlY2F0ZWRfaW1wb3J0cyhkZXByZWNhdGVkKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBpbXBvcnRsaWIuaW1wb3J0X21vZHVsZShuYW1lKQogICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvciBhcyBtc2c6CiAgICAgICAgICAgIHJhaXNlIHVuaXR0ZXN0LlNraXBUZXN0KHN0cihtc2cpKQoKCmRlZiBfc2F2ZV9hbmRfcmVtb3ZlX21vZHVsZShuYW1lLCBvcmlnX21vZHVsZXMpOgogICAgIiIiSGVscGVyIGZ1bmN0aW9uIHRvIHNhdmUgYW5kIHJlbW92ZSBhIG1vZHVsZSBmcm9tIHN5cy5tb2R1bGVzCgogICAgICAgUmFpc2UgSW1wb3J0RXJyb3IgaWYgdGhlIG1vZHVsZSBjYW4ndCBiZSBpbXBvcnRlZC4iIiIKICAgICMgdHJ5IHRvIGltcG9ydCB0aGUgbW9kdWxlIGFuZCByYWlzZSBhbiBlcnJvciBpZiBpdCBjYW4ndCBiZSBpbXBvcnRlZAogICAgaWYgbmFtZSBub3QgaW4gc3lzLm1vZHVsZXM6CiAgICAgICAgX19pbXBvcnRfXyhuYW1lKQogICAgICAgIGRlbCBzeXMubW9kdWxlc1tuYW1lXQogICAgZm9yIG1vZG5hbWUgaW4gbGlzdChzeXMubW9kdWxlcyk6CiAgICAgICAgaWYgbW9kbmFtZSA9PSBuYW1lIG9yIG1vZG5hbWUuc3RhcnRzd2l0aChuYW1lICsgJy4nKToKICAgICAgICAgICAgb3JpZ19tb2R1bGVzW21vZG5hbWVdID0gc3lzLm1vZHVsZXNbbW9kbmFtZV0KICAgICAgICAgICAgZGVsIHN5cy5tb2R1bGVzW21vZG5hbWVdCgpkZWYgX3NhdmVfYW5kX2Jsb2NrX21vZHVsZShuYW1lLCBvcmlnX21vZHVsZXMpOgogICAgIiIiSGVscGVyIGZ1bmN0aW9uIHRvIHNhdmUgYW5kIGJsb2NrIGEgbW9kdWxlIGluIHN5cy5tb2R1bGVzCgogICAgICAgUmV0dXJuIFRydWUgaWYgdGhlIG1vZHVsZSB3YXMgaW4gc3lzLm1vZHVsZXMsIEZhbHNlIG90aGVyd2lzZS4iIiIKICAgIHNhdmVkID0gVHJ1ZQogICAgdHJ5OgogICAgICAgIG9yaWdfbW9kdWxlc1tuYW1lXSA9IHN5cy5tb2R1bGVzW25hbWVdCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgc2F2ZWQgPSBGYWxzZQogICAgc3lzLm1vZHVsZXNbbmFtZV0gPSBOb25lCiAgICByZXR1cm4gc2F2ZWQKCgpkZWYgYW50aWNpcGF0ZV9mYWlsdXJlKGNvbmRpdGlvbik6CiAgICAiIiJEZWNvcmF0b3IgdG8gbWFyayBhIHRlc3QgdGhhdCBpcyBrbm93biB0byBiZSBicm9rZW4gaW4gc29tZSBjYXNlcwoKICAgICAgIEFueSB1c2Ugb2YgdGhpcyBkZWNvcmF0b3Igc2hvdWxkIGhhdmUgYSBjb21tZW50IGlkZW50aWZ5aW5nIHRoZQogICAgICAgYXNzb2NpYXRlZCB0cmFja2VyIGlzc3VlLgogICAgIiIiCiAgICBpZiBjb25kaXRpb246CiAgICAgICAgcmV0dXJuIHVuaXR0ZXN0LmV4cGVjdGVkRmFpbHVyZQogICAgcmV0dXJuIGxhbWJkYSBmOiBmCgoKZGVmIGltcG9ydF9mcmVzaF9tb2R1bGUobmFtZSwgZnJlc2g9KCksIGJsb2NrZWQ9KCksIGRlcHJlY2F0ZWQ9RmFsc2UpOgogICAgIiIiSW1wb3J0cyBhbmQgcmV0dXJucyBhIG1vZHVsZSwgZGVsaWJlcmF0ZWx5IGJ5cGFzc2luZyB0aGUgc3lzLm1vZHVsZXMgY2FjaGUKICAgIGFuZCBpbXBvcnRpbmcgYSBmcmVzaCBjb3B5IG9mIHRoZSBtb2R1bGUuIE9uY2UgdGhlIGltcG9ydCBpcyBjb21wbGV0ZSwKICAgIHRoZSBzeXMubW9kdWxlcyBjYWNoZSBpcyByZXN0b3JlZCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgogICAgTW9kdWxlcyBuYW1lZCBpbiBmcmVzaCBhcmUgYWxzbyBpbXBvcnRlZCBhbmV3IGlmIG5lZWRlZCBieSB0aGUgaW1wb3J0LgogICAgSWYgb25lIG9mIHRoZXNlIG1vZHVsZXMgY2FuJ3QgYmUgaW1wb3J0ZWQsIE5vbmUgaXMgcmV0dXJuZWQuCgogICAgSW1wb3J0aW5nIG9mIG1vZHVsZXMgbmFtZWQgaW4gYmxvY2tlZCBpcyBwcmV2ZW50ZWQgd2hpbGUgdGhlIGZyZXNoIGltcG9ydAogICAgdGFrZXMgcGxhY2UuCgogICAgSWYgZGVwcmVjYXRlZCBpcyBUcnVlLCBhbnkgbW9kdWxlIG9yIHBhY2thZ2UgZGVwcmVjYXRpb24gbWVzc2FnZXMKICAgIHdpbGwgYmUgc3VwcHJlc3NlZC4iIiIKICAgICMgTk9URTogdGVzdF9oZWFwcSwgdGVzdF9qc29uIGFuZCB0ZXN0X3dhcm5pbmdzIGluY2x1ZGUgZXh0cmEgc2FuaXR5IGNoZWNrcwogICAgIyB0byBtYWtlIHN1cmUgdGhhdCB0aGlzIHV0aWxpdHkgZnVuY3Rpb24gaXMgd29ya2luZyBhcyBleHBlY3RlZAogICAgd2l0aCBfaWdub3JlX2RlcHJlY2F0ZWRfaW1wb3J0cyhkZXByZWNhdGVkKToKICAgICAgICAjIEtlZXAgdHJhY2sgb2YgbW9kdWxlcyBzYXZlZCBmb3IgbGF0ZXIgcmVzdG9yYXRpb24gYXMgd2VsbAogICAgICAgICMgYXMgdGhvc2Ugd2hpY2gganVzdCBuZWVkIGEgYmxvY2tpbmcgZW50cnkgcmVtb3ZlZAogICAgICAgIG9yaWdfbW9kdWxlcyA9IHt9CiAgICAgICAgbmFtZXNfdG9fcmVtb3ZlID0gW10KICAgICAgICBfc2F2ZV9hbmRfcmVtb3ZlX21vZHVsZShuYW1lLCBvcmlnX21vZHVsZXMpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgZnJlc2hfbmFtZSBpbiBmcmVzaDoKICAgICAgICAgICAgICAgIF9zYXZlX2FuZF9yZW1vdmVfbW9kdWxlKGZyZXNoX25hbWUsIG9yaWdfbW9kdWxlcykKICAgICAgICAgICAgZm9yIGJsb2NrZWRfbmFtZSBpbiBibG9ja2VkOgogICAgICAgICAgICAgICAgaWYgbm90IF9zYXZlX2FuZF9ibG9ja19tb2R1bGUoYmxvY2tlZF9uYW1lLCBvcmlnX21vZHVsZXMpOgogICAgICAgICAgICAgICAgICAgIG5hbWVzX3RvX3JlbW92ZS5hcHBlbmQoYmxvY2tlZF9uYW1lKQogICAgICAgICAgICBmcmVzaF9tb2R1bGUgPSBpbXBvcnRsaWIuaW1wb3J0X21vZHVsZShuYW1lKQogICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgZnJlc2hfbW9kdWxlID0gTm9uZQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIGZvciBvcmlnX25hbWUsIG1vZHVsZSBpbiBvcmlnX21vZHVsZXMuaXRlbXMoKToKICAgICAgICAgICAgICAgIHN5cy5tb2R1bGVzW29yaWdfbmFtZV0gPSBtb2R1bGUKICAgICAgICAgICAgZm9yIG5hbWVfdG9fcmVtb3ZlIGluIG5hbWVzX3RvX3JlbW92ZToKICAgICAgICAgICAgICAgIGRlbCBzeXMubW9kdWxlc1tuYW1lX3RvX3JlbW92ZV0KICAgICAgICByZXR1cm4gZnJlc2hfbW9kdWxlCgoKZGVmIGdldF9hdHRyaWJ1dGUob2JqLCBuYW1lKToKICAgICIiIkdldCBhbiBhdHRyaWJ1dGUsIHJhaXNpbmcgU2tpcFRlc3QgaWYgQXR0cmlidXRlRXJyb3IgaXMgcmFpc2VkLiIiIgogICAgdHJ5OgogICAgICAgIGF0dHJpYnV0ZSA9IGdldGF0dHIob2JqLCBuYW1lKQogICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgIHJhaXNlIHVuaXR0ZXN0LlNraXBUZXN0KCJvYmplY3QgJXIgaGFzIG5vIGF0dHJpYnV0ZSAlciIgJSAob2JqLCBuYW1lKSkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZQoKdmVyYm9zZSA9IDEgICAgICAgICAgICAgICMgRmxhZyBzZXQgdG8gMCBieSByZWdydGVzdC5weQp1c2VfcmVzb3VyY2VzID0gTm9uZSAgICAgIyBGbGFnIHNldCB0byBbXSBieSByZWdydGVzdC5weQptYXhfbWVtdXNlID0gMCAgICAgICAgICAgIyBEaXNhYmxlIGJpZ21lbSB0ZXN0cyAodGhleSB3aWxsIHN0aWxsIGJlIHJ1biB3aXRoCiAgICAgICAgICAgICAgICAgICAgICAgICAjIHNtYWxsIHNpemVzLCB0byBtYWtlIHN1cmUgdGhleSB3b3JrLikKcmVhbF9tYXhfbWVtdXNlID0gMApmYWlsZmFzdCA9IEZhbHNlCm1hdGNoX3Rlc3RzID0gTm9uZQoKIyBfb3JpZ2luYWxfc3Rkb3V0IGlzIG1lYW50IHRvIGhvbGQgc3Rkb3V0IGF0IHRoZSB0aW1lIHJlZ3J0ZXN0IGJlZ2FuLgojIFRoaXMgbWF5IGJlICJ0aGUgcmVhbCIgc3Rkb3V0LCBvciBJRExFJ3MgZW11bGF0aW9uIG9mIHN0ZG91dCwgb3Igd2hhdGV2ZXIuCiMgVGhlIHBvaW50IGlzIHRvIGhhdmUgc29tZSBmbGF2b3Igb2Ygc3Rkb3V0IHRoZSB1c2VyIGNhbiBhY3R1YWxseSBzZWUuCl9vcmlnaW5hbF9zdGRvdXQgPSBOb25lCmRlZiByZWNvcmRfb3JpZ2luYWxfc3Rkb3V0KHN0ZG91dCk6CiAgICBnbG9iYWwgX29yaWdpbmFsX3N0ZG91dAogICAgX29yaWdpbmFsX3N0ZG91dCA9IHN0ZG91dAoKZGVmIGdldF9vcmlnaW5hbF9zdGRvdXQoKToKICAgIHJldHVybiBfb3JpZ2luYWxfc3Rkb3V0IG9yIHN5cy5zdGRvdXQKCmRlZiB1bmxvYWQobmFtZSk6CiAgICB0cnk6CiAgICAgICAgZGVsIHN5cy5tb2R1bGVzW25hbWVdCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgcGFzcwoKaWYgc3lzLnBsYXRmb3JtLnN0YXJ0c3dpdGgoIndpbiIpOgogICAgZGVmIF93YWl0Zm9yKGZ1bmMsIHBhdGhuYW1lLCB3YWl0YWxsPUZhbHNlKToKICAgICAgICAjIFBlZm9ybSB0aGUgb3BlcmF0aW9uCiAgICAgICAgZnVuYyhwYXRobmFtZSkKICAgICAgICAjIE5vdyBzZXR1cCB0aGUgd2FpdCBsb29wCiAgICAgICAgaWYgd2FpdGFsbDoKICAgICAgICAgICAgZGlybmFtZSA9IHBhdGhuYW1lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGlybmFtZSwgbmFtZSA9IG9zLnBhdGguc3BsaXQocGF0aG5hbWUpCiAgICAgICAgICAgIGRpcm5hbWUgPSBkaXJuYW1lIG9yICcuJwogICAgICAgICMgQ2hlY2sgZm9yIGBwYXRobmFtZWAgdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSBmaWxlc3lzdGVtLgogICAgICAgICMgVGhlIGV4cG9uZW50aWFsIGJhY2tvZmYgb2YgdGhlIHRpbWVvdXQgYW1vdW50cyB0byBhIHRvdGFsCiAgICAgICAgIyBvZiB+MSBzZWNvbmQgYWZ0ZXIgd2hpY2ggdGhlIGRlbGV0aW9uIGlzIHByb2JhYmx5IGFuIGVycm9yCiAgICAgICAgIyBhbnl3YXkuCiAgICAgICAgIyBUZXN0aW5nIG9uIGEgaTdANC4zR0h6IHNob3dzIHRoYXQgdXN1YWxseSBvbmx5IDEgaXRlcmF0aW9uIGlzCiAgICAgICAgIyByZXF1aXJlZCB3aGVuIGNvbnRlbnRpb24gb2NjdXJzLgogICAgICAgIHRpbWVvdXQgPSAwLjAwMQogICAgICAgIHdoaWxlIHRpbWVvdXQgPCAxLjA6CiAgICAgICAgICAgICMgTm90ZSB3ZSBhcmUgb25seSB0ZXN0aW5nIGZvciB0aGUgZXhpc3RhbmNlIG9mIHRoZSBmaWxlKHMpIGluCiAgICAgICAgICAgICMgdGhlIGNvbnRlbnRzIG9mIHRoZSBkaXJlY3RvcnkgcmVnYXJkbGVzcyBvZiBhbnkgc2VjdXJpdHkgb3IKICAgICAgICAgICAgIyBhY2Nlc3MgcmlnaHRzLiAgSWYgd2UgaGF2ZSBtYWRlIGl0IHRoaXMgZmFyLCB3ZSBoYXZlIHN1ZmZpY2llbnQKICAgICAgICAgICAgIyBwZXJtaXNzaW9ucyB0byBkbyB0aGF0IG11Y2ggdXNpbmcgUHl0aG9uJ3MgZXF1aXZhbGVudCBvZiB0aGUKICAgICAgICAgICAgIyBXaW5kb3dzIEFQSSBGaW5kRmlyc3RGaWxlLgogICAgICAgICAgICAjIE90aGVyIFdpbmRvd3MgQVBJcyBjYW4gZmFpbCBvciBnaXZlIGluY29ycmVjdCByZXN1bHRzIHdoZW4KICAgICAgICAgICAgIyBkZWFsaW5nIHdpdGggZmlsZXMgdGhhdCBhcmUgcGVuZGluZyBkZWxldGlvbi4KICAgICAgICAgICAgTCA9IG9zLmxpc3RkaXIoZGlybmFtZSkKICAgICAgICAgICAgaWYgbm90IChMIGlmIHdhaXRhbGwgZWxzZSBuYW1lIGluIEwpOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICMgSW5jcmVhc2UgdGhlIHRpbWVvdXQgYW5kIHRyeSBhZ2FpbgogICAgICAgICAgICB0aW1lLnNsZWVwKHRpbWVvdXQpCiAgICAgICAgICAgIHRpbWVvdXQgKj0gMgogICAgICAgIHdhcm5pbmdzLndhcm4oJ3Rlc3RzIG1heSBmYWlsLCBkZWxldGUgc3RpbGwgcGVuZGluZyBmb3IgJyArIHBhdGhuYW1lLAogICAgICAgICAgICAgICAgICAgICAgUnVudGltZVdhcm5pbmcsIHN0YWNrbGV2ZWw9NCkKCiAgICBkZWYgX3VubGluayhmaWxlbmFtZSk6CiAgICAgICAgX3dhaXRmb3Iob3MudW5saW5rLCBmaWxlbmFtZSkKCiAgICBkZWYgX3JtZGlyKGRpcm5hbWUpOgogICAgICAgIF93YWl0Zm9yKG9zLnJtZGlyLCBkaXJuYW1lKQoKICAgIGRlZiBfcm10cmVlKHBhdGgpOgogICAgICAgIGRlZiBfcm10cmVlX2lubmVyKHBhdGgpOgogICAgICAgICAgICBmb3IgbmFtZSBpbiBvcy5saXN0ZGlyKHBhdGgpOgogICAgICAgICAgICAgICAgZnVsbG5hbWUgPSBvcy5wYXRoLmpvaW4ocGF0aCwgbmFtZSkKICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguaXNkaXIoZnVsbG5hbWUpOgogICAgICAgICAgICAgICAgICAgIF93YWl0Zm9yKF9ybXRyZWVfaW5uZXIsIGZ1bGxuYW1lLCB3YWl0YWxsPVRydWUpCiAgICAgICAgICAgICAgICAgICAgb3Mucm1kaXIoZnVsbG5hbWUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG9zLnVubGluayhmdWxsbmFtZSkKICAgICAgICBfd2FpdGZvcihfcm10cmVlX2lubmVyLCBwYXRoLCB3YWl0YWxsPVRydWUpCiAgICAgICAgX3dhaXRmb3Iob3Mucm1kaXIsIHBhdGgpCmVsc2U6CiAgICBfdW5saW5rID0gb3MudW5saW5rCiAgICBfcm1kaXIgPSBvcy5ybWRpcgogICAgX3JtdHJlZSA9IHNodXRpbC5ybXRyZWUKCmRlZiB1bmxpbmsoZmlsZW5hbWUpOgogICAgdHJ5OgogICAgICAgIF91bmxpbmsoZmlsZW5hbWUpCiAgICBleGNlcHQgT1NFcnJvciBhcyBlcnJvcjoKICAgICAgICAjIFRoZSBmaWxlbmFtZSBuZWVkIG5vdCBleGlzdC4KICAgICAgICBpZiBlcnJvci5lcnJubyBub3QgaW4gKGVycm5vLkVOT0VOVCwgZXJybm8uRU5PVERJUik6CiAgICAgICAgICAgIHJhaXNlCgpkZWYgcm1kaXIoZGlybmFtZSk6CiAgICB0cnk6CiAgICAgICAgX3JtZGlyKGRpcm5hbWUpCiAgICBleGNlcHQgT1NFcnJvciBhcyBlcnJvcjoKICAgICAgICAjIFRoZSBkaXJlY3RvcnkgbmVlZCBub3QgZXhpc3QuCiAgICAgICAgaWYgZXJyb3IuZXJybm8gIT0gZXJybm8uRU5PRU5UOgogICAgICAgICAgICByYWlzZQoKZGVmIHJtdHJlZShwYXRoKToKICAgIHRyeToKICAgICAgICBfcm10cmVlKHBhdGgpCiAgICBleGNlcHQgT1NFcnJvciBhcyBlcnJvcjoKICAgICAgICBpZiBlcnJvci5lcnJubyAhPSBlcnJuby5FTk9FTlQ6CiAgICAgICAgICAgIHJhaXNlCgpkZWYgbWFrZV9sZWdhY3lfcHljKHNvdXJjZSk6CiAgICAiIiJNb3ZlIGEgUEVQIDMxNDcgcHljL3B5byBmaWxlIHRvIGl0cyBsZWdhY3kgcHljL3B5byBsb2NhdGlvbi4KCiAgICBUaGUgY2hvaWNlIG9mIC5weWMgb3IgLnB5byBleHRlbnNpb24gaXMgZG9uZSBiYXNlZCBvbiB0aGUgX19kZWJ1Z19fIGZsYWcKICAgIHZhbHVlLgoKICAgIDpwYXJhbSBzb3VyY2U6IFRoZSBmaWxlIHN5c3RlbSBwYXRoIHRvIHRoZSBzb3VyY2UgZmlsZS4gIFRoZSBzb3VyY2UgZmlsZQogICAgICAgIGRvZXMgbm90IG5lZWQgdG8gZXhpc3QsIGhvd2V2ZXIgdGhlIFBFUCAzMTQ3IHB5YyBmaWxlIG11c3QgZXhpc3QuCiAgICA6cmV0dXJuOiBUaGUgZmlsZSBzeXN0ZW0gcGF0aCB0byB0aGUgbGVnYWN5IHB5YyBmaWxlLgogICAgIiIiCiAgICBweWNfZmlsZSA9IGltcC5jYWNoZV9mcm9tX3NvdXJjZShzb3VyY2UpCiAgICB1cF9vbmUgPSBvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5hYnNwYXRoKHNvdXJjZSkpCiAgICBsZWdhY3lfcHljID0gb3MucGF0aC5qb2luKHVwX29uZSwgc291cmNlICsgKCdjJyBpZiBfX2RlYnVnX18gZWxzZSAnbycpKQogICAgb3MucmVuYW1lKHB5Y19maWxlLCBsZWdhY3lfcHljKQogICAgcmV0dXJuIGxlZ2FjeV9weWMKCmRlZiBmb3JnZXQobW9kbmFtZSk6CiAgICAiIiInRm9yZ2V0JyBhIG1vZHVsZSB3YXMgZXZlciBpbXBvcnRlZC4KCiAgICBUaGlzIHJlbW92ZXMgdGhlIG1vZHVsZSBmcm9tIHN5cy5tb2R1bGVzIGFuZCBkZWxldGVzIGFueSBQRVAgMzE0NyBvcgogICAgbGVnYWN5IC5weWMgYW5kIC5weW8gZmlsZXMuCiAgICAiIiIKICAgIHVubG9hZChtb2RuYW1lKQogICAgZm9yIGRpcm5hbWUgaW4gc3lzLnBhdGg6CiAgICAgICAgc291cmNlID0gb3MucGF0aC5qb2luKGRpcm5hbWUsIG1vZG5hbWUgKyAnLnB5JykKICAgICAgICAjIEl0IGRvZXNuJ3QgbWF0dGVyIGlmIHRoZXkgZXhpc3Qgb3Igbm90LCB1bmxpbmsgYWxsIHBvc3NpYmxlCiAgICAgICAgIyBjb21iaW5hdGlvbnMgb2YgUEVQIDMxNDcgYW5kIGxlZ2FjeSBweWMgYW5kIHB5byBmaWxlcy4KICAgICAgICB1bmxpbmsoc291cmNlICsgJ2MnKQogICAgICAgIHVubGluayhzb3VyY2UgKyAnbycpCiAgICAgICAgdW5saW5rKGltcC5jYWNoZV9mcm9tX3NvdXJjZShzb3VyY2UsIGRlYnVnX292ZXJyaWRlPVRydWUpKQogICAgICAgIHVubGluayhpbXAuY2FjaGVfZnJvbV9zb3VyY2Uoc291cmNlLCBkZWJ1Z19vdmVycmlkZT1GYWxzZSkpCgojIE9uIHNvbWUgcGxhdGZvcm1zLCBzaG91bGQgbm90IHJ1biBndWkgdGVzdCBldmVuIGlmIGl0IGlzIGFsbG93ZWQKIyBpbiBgdXNlX3Jlc291cmNlcycuCmlmIHN5cy5wbGF0Zm9ybS5zdGFydHN3aXRoKCd3aW4nKToKICAgIGltcG9ydCBjdHlwZXMKICAgIGltcG9ydCBjdHlwZXMud2ludHlwZXMKICAgIGRlZiBfaXNfZ3VpX2F2YWlsYWJsZSgpOgogICAgICAgIFVPSV9GTEFHUyA9IDEKICAgICAgICBXU0ZfVklTSUJMRSA9IDB4MDAwMQogICAgICAgIGNsYXNzIFVTRVJPQkpFQ1RGTEFHUyhjdHlwZXMuU3RydWN0dXJlKToKICAgICAgICAgICAgX2ZpZWxkc18gPSBbKCJmSW5oZXJpdCIsIGN0eXBlcy53aW50eXBlcy5CT09MKSwKICAgICAgICAgICAgICAgICAgICAgICAgKCJmUmVzZXJ2ZWQiLCBjdHlwZXMud2ludHlwZXMuQk9PTCksCiAgICAgICAgICAgICAgICAgICAgICAgICgiZHdGbGFncyIsIGN0eXBlcy53aW50eXBlcy5EV09SRCldCiAgICAgICAgZGxsID0gY3R5cGVzLndpbmRsbC51c2VyMzIKICAgICAgICBoID0gZGxsLkdldFByb2Nlc3NXaW5kb3dTdGF0aW9uKCkKICAgICAgICBpZiBub3QgaDoKICAgICAgICAgICAgcmFpc2UgY3R5cGVzLldpbkVycm9yKCkKICAgICAgICB1b2YgPSBVU0VST0JKRUNURkxBR1MoKQogICAgICAgIG5lZWRlZCA9IGN0eXBlcy53aW50eXBlcy5EV09SRCgpCiAgICAgICAgcmVzID0gZGxsLkdldFVzZXJPYmplY3RJbmZvcm1hdGlvblcoaCwKICAgICAgICAgICAgVU9JX0ZMQUdTLAogICAgICAgICAgICBjdHlwZXMuYnlyZWYodW9mKSwKICAgICAgICAgICAgY3R5cGVzLnNpemVvZih1b2YpLAogICAgICAgICAgICBjdHlwZXMuYnlyZWYobmVlZGVkKSkKICAgICAgICBpZiBub3QgcmVzOgogICAgICAgICAgICByYWlzZSBjdHlwZXMuV2luRXJyb3IoKQogICAgICAgIHJldHVybiBib29sKHVvZi5kd0ZsYWdzICYgV1NGX1ZJU0lCTEUpCmVsc2U6CiAgICBkZWYgX2lzX2d1aV9hdmFpbGFibGUoKToKICAgICAgICByZXR1cm4gVHJ1ZQoKZGVmIGlzX3Jlc291cmNlX2VuYWJsZWQocmVzb3VyY2UpOgogICAgIiIiVGVzdCB3aGV0aGVyIGEgcmVzb3VyY2UgaXMgZW5hYmxlZC4gIEtub3duIHJlc291cmNlcyBhcmUgc2V0IGJ5CiAgICByZWdydGVzdC5weS4iIiIKICAgIHJldHVybiB1c2VfcmVzb3VyY2VzIGlzIG5vdCBOb25lIGFuZCByZXNvdXJjZSBpbiB1c2VfcmVzb3VyY2VzCgpkZWYgcmVxdWlyZXMocmVzb3VyY2UsIG1zZz1Ob25lKToKICAgICIiIlJhaXNlIFJlc291cmNlRGVuaWVkIGlmIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UgaXMgbm90IGF2YWlsYWJsZS4KCiAgICBJZiB0aGUgY2FsbGVyJ3MgbW9kdWxlIGlzIF9fbWFpbl9fIHRoZW4gYXV0b21hdGljYWxseSByZXR1cm4gVHJ1ZS4gIFRoZQogICAgcG9zc2liaWxpdHkgb2YgRmFsc2UgYmVpbmcgcmV0dXJuZWQgb2NjdXJzIHdoZW4gcmVncnRlc3QucHkgaXMKICAgIGV4ZWN1dGluZy4KICAgICIiIgogICAgaWYgcmVzb3VyY2UgPT0gJ2d1aScgYW5kIG5vdCBfaXNfZ3VpX2F2YWlsYWJsZSgpOgogICAgICAgIHJhaXNlIHVuaXR0ZXN0LlNraXBUZXN0KCJDYW5ub3QgdXNlIHRoZSAnZ3VpJyByZXNvdXJjZSIpCiAgICAjIHNlZSBpZiB0aGUgY2FsbGVyJ3MgbW9kdWxlIGlzIF9fbWFpbl9fIC0gaWYgc28sIHRyZWF0IGFzIGlmCiAgICAjIHRoZSByZXNvdXJjZSB3YXMgc2V0CiAgICBpZiBzeXMuX2dldGZyYW1lKDEpLmZfZ2xvYmFscy5nZXQoIl9fbmFtZV9fIikgPT0gIl9fbWFpbl9fIjoKICAgICAgICByZXR1cm4KICAgIGlmIG5vdCBpc19yZXNvdXJjZV9lbmFibGVkKHJlc291cmNlKToKICAgICAgICBpZiBtc2cgaXMgTm9uZToKICAgICAgICAgICAgbXNnID0gIlVzZSBvZiB0aGUgJXIgcmVzb3VyY2Ugbm90IGVuYWJsZWQiICUgcmVzb3VyY2UKICAgICAgICByYWlzZSBSZXNvdXJjZURlbmllZChtc2cpCgpkZWYgX3JlcXVpcmVzX3VuaXhfdmVyc2lvbihzeXNuYW1lLCBtaW5fdmVyc2lvbik6CiAgICAiIiJEZWNvcmF0b3IgcmFpc2luZyBTa2lwVGVzdCBpZiB0aGUgT1MgaXMgYHN5c25hbWVgIGFuZCB0aGUgdmVyc2lvbiBpcyBsZXNzCiAgICB0aGFuIGBtaW5fdmVyc2lvbmAuCgogICAgRm9yIGV4YW1wbGUsIEBfcmVxdWlyZXNfdW5peF92ZXJzaW9uKCdGcmVlQlNEJywgKDcsIDIpKSByYWlzZXMgU2tpcFRlc3QgaWYKICAgIHRoZSBGcmVlQlNEIHZlcnNpb24gaXMgbGVzcyB0aGFuIDcuMi4KICAgICIiIgogICAgZGVmIGRlY29yYXRvcihmdW5jKToKICAgICAgICBAZnVuY3Rvb2xzLndyYXBzKGZ1bmMpCiAgICAgICAgZGVmIHdyYXBwZXIoKmFyZ3MsICoqa3cpOgogICAgICAgICAgICBpZiBwbGF0Zm9ybS5zeXN0ZW0oKSA9PSBzeXNuYW1lOgogICAgICAgICAgICAgICAgdmVyc2lvbl90eHQgPSBwbGF0Zm9ybS5yZWxlYXNlKCkuc3BsaXQoJy0nLCAxKVswXQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHZlcnNpb24gPSB0dXBsZShtYXAoaW50LCB2ZXJzaW9uX3R4dC5zcGxpdCgnLicpKSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaWYgdmVyc2lvbiA8IG1pbl92ZXJzaW9uOgogICAgICAgICAgICAgICAgICAgICAgICBtaW5fdmVyc2lvbl90eHQgPSAnLicuam9pbihtYXAoc3RyLCBtaW5fdmVyc2lvbikpCiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIHVuaXR0ZXN0LlNraXBUZXN0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIiVzIHZlcnNpb24gJXMgb3IgaGlnaGVyIHJlcXVpcmVkLCBub3QgJXMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAlIChzeXNuYW1lLCBtaW5fdmVyc2lvbl90eHQsIHZlcnNpb25fdHh0KSkKICAgICAgICByZXR1cm4gd3JhcHBlcgogICAgcmV0dXJuIGRlY29yYXRvcgoKZGVmIHJlcXVpcmVzX2ZyZWVic2RfdmVyc2lvbigqbWluX3ZlcnNpb24pOgogICAgIiIiRGVjb3JhdG9yIHJhaXNpbmcgU2tpcFRlc3QgaWYgdGhlIE9TIGlzIEZyZWVCU0QgYW5kIHRoZSBGcmVlQlNEIHZlcnNpb24gaXMKICAgIGxlc3MgdGhhbiBgbWluX3ZlcnNpb25gLgoKICAgIEZvciBleGFtcGxlLCBAcmVxdWlyZXNfZnJlZWJzZF92ZXJzaW9uKDcsIDIpIHJhaXNlcyBTa2lwVGVzdCBpZiB0aGUgRnJlZUJTRAogICAgdmVyc2lvbiBpcyBsZXNzIHRoYW4gNy4yLgogICAgIiIiCiAgICByZXR1cm4gX3JlcXVpcmVzX3VuaXhfdmVyc2lvbignRnJlZUJTRCcsIG1pbl92ZXJzaW9uKQoKZGVmIHJlcXVpcmVzX2xpbnV4X3ZlcnNpb24oKm1pbl92ZXJzaW9uKToKICAgICIiIkRlY29yYXRvciByYWlzaW5nIFNraXBUZXN0IGlmIHRoZSBPUyBpcyBMaW51eCBhbmQgdGhlIExpbnV4IHZlcnNpb24gaXMKICAgIGxlc3MgdGhhbiBgbWluX3ZlcnNpb25gLgoKICAgIEZvciBleGFtcGxlLCBAcmVxdWlyZXNfbGludXhfdmVyc2lvbigyLCA2LCAzMikgcmFpc2VzIFNraXBUZXN0IGlmIHRoZSBMaW51eAogICAgdmVyc2lvbiBpcyBsZXNzIHRoYW4gMi42LjMyLgogICAgIiIiCiAgICByZXR1cm4gX3JlcXVpcmVzX3VuaXhfdmVyc2lvbignTGludXgnLCBtaW5fdmVyc2lvbikKCmRlZiByZXF1aXJlc19tYWNfdmVyKCptaW5fdmVyc2lvbik6CiAgICAiIiJEZWNvcmF0b3IgcmFpc2luZyBTa2lwVGVzdCBpZiB0aGUgT1MgaXMgTWFjIE9TIFggYW5kIHRoZSBPUyBYCiAgICB2ZXJzaW9uIGlmIGxlc3MgdGhhbiBtaW5fdmVyc2lvbi4KCiAgICBGb3IgZXhhbXBsZSwgQHJlcXVpcmVzX21hY192ZXIoMTAsIDUpIHJhaXNlcyBTa2lwVGVzdCBpZiB0aGUgT1MgWCB2ZXJzaW9uCiAgICBpcyBsZXNzZXIgdGhhbiAxMC41LgogICAgIiIiCiAgICBkZWYgZGVjb3JhdG9yKGZ1bmMpOgogICAgICAgIEBmdW5jdG9vbHMud3JhcHMoZnVuYykKICAgICAgICBkZWYgd3JhcHBlcigqYXJncywgKiprdyk6CiAgICAgICAgICAgIGlmIHN5cy5wbGF0Zm9ybSA9PSAnZGFyd2luJzoKICAgICAgICAgICAgICAgIHZlcnNpb25fdHh0ID0gcGxhdGZvcm0ubWFjX3ZlcigpWzBdCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbiA9IHR1cGxlKG1hcChpbnQsIHZlcnNpb25fdHh0LnNwbGl0KCcuJykpKQogICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiB2ZXJzaW9uIDwgbWluX3ZlcnNpb246CiAgICAgICAgICAgICAgICAgICAgICAgIG1pbl92ZXJzaW9uX3R4dCA9ICcuJy5qb2luKG1hcChzdHIsIG1pbl92ZXJzaW9uKSkKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgdW5pdHRlc3QuU2tpcFRlc3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTWFjIE9TIFggJXMgb3IgaGlnaGVyIHJlcXVpcmVkLCBub3QgJXMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAlIChtaW5fdmVyc2lvbl90eHQsIHZlcnNpb25fdHh0KSkKICAgICAgICAgICAgcmV0dXJuIGZ1bmMoKmFyZ3MsICoqa3cpCiAgICAgICAgd3JhcHBlci5taW5fdmVyc2lvbiA9IG1pbl92ZXJzaW9uCiAgICAgICAgcmV0dXJuIHdyYXBwZXIKICAgIHJldHVybiBkZWNvcmF0b3IKCgpIT1NUID0gJ2xvY2FsaG9zdCcKCmRlZiBmaW5kX3VudXNlZF9wb3J0KGZhbWlseT1zb2NrZXQuQUZfSU5FVCwgc29ja3R5cGU9c29ja2V0LlNPQ0tfU1RSRUFNKToKICAgICIiIlJldHVybnMgYW4gdW51c2VkIHBvcnQgdGhhdCBzaG91bGQgYmUgc3VpdGFibGUgZm9yIGJpbmRpbmcuICBUaGlzIGlzCiAgICBhY2hpZXZlZCBieSBjcmVhdGluZyBhIHRlbXBvcmFyeSBzb2NrZXQgd2l0aCB0aGUgc2FtZSBmYW1pbHkgYW5kIHR5cGUgYXMKICAgIHRoZSAnc29jaycgcGFyYW1ldGVyIChkZWZhdWx0IGlzIEFGX0lORVQsIFNPQ0tfU1RSRUFNKSwgYW5kIGJpbmRpbmcgaXQgdG8KICAgIHRoZSBzcGVjaWZpZWQgaG9zdCBhZGRyZXNzIChkZWZhdWx0cyB0byAwLjAuMC4wKSB3aXRoIHRoZSBwb3J0IHNldCB0byAwLAogICAgZWxpY2l0aW5nIGFuIHVudXNlZCBlcGhlbWVyYWwgcG9ydCBmcm9tIHRoZSBPUy4gIFRoZSB0ZW1wb3Jhcnkgc29ja2V0IGlzCiAgICB0aGVuIGNsb3NlZCBhbmQgZGVsZXRlZCwgYW5kIHRoZSBlcGhlbWVyYWwgcG9ydCBpcyByZXR1cm5lZC4KCiAgICBFaXRoZXIgdGhpcyBtZXRob2Qgb3IgYmluZF9wb3J0KCkgc2hvdWxkIGJlIHVzZWQgZm9yIGFueSB0ZXN0cyB3aGVyZSBhCiAgICBzZXJ2ZXIgc29ja2V0IG5lZWRzIHRvIGJlIGJvdW5kIHRvIGEgcGFydGljdWxhciBwb3J0IGZvciB0aGUgZHVyYXRpb24gb2YKICAgIHRoZSB0ZXN0LiAgV2hpY2ggb25lIHRvIHVzZSBkZXBlbmRzIG9uIHdoZXRoZXIgdGhlIGNhbGxpbmcgY29kZSBpcyBjcmVhdGluZwogICAgYSBweXRob24gc29ja2V0LCBvciBpZiBhbiB1bnVzZWQgcG9ydCBuZWVkcyB0byBiZSBwcm92aWRlZCBpbiBhIGNvbnN0cnVjdG9yCiAgICBvciBwYXNzZWQgdG8gYW4gZXh0ZXJuYWwgcHJvZ3JhbSAoaS5lLiB0aGUgLWFjY2VwdCBhcmd1bWVudCB0byBvcGVuc3NsJ3MKICAgIHNfc2VydmVyIG1vZGUpLiAgQWx3YXlzIHByZWZlciBiaW5kX3BvcnQoKSBvdmVyIGZpbmRfdW51c2VkX3BvcnQoKSB3aGVyZQogICAgcG9zc2libGUuICBIYXJkIGNvZGVkIHBvcnRzIHNob3VsZCAqTkVWRVIqIGJlIHVzZWQuICBBcyBzb29uIGFzIGEgc2VydmVyCiAgICBzb2NrZXQgaXMgYm91bmQgdG8gYSBoYXJkIGNvZGVkIHBvcnQsIHRoZSBhYmlsaXR5IHRvIHJ1biBtdWx0aXBsZSBpbnN0YW5jZXMKICAgIG9mIHRoZSB0ZXN0IHNpbXVsdGFuZW91c2x5IG9uIHRoZSBzYW1lIGhvc3QgaXMgY29tcHJvbWlzZWQsIHdoaWNoIG1ha2VzIHRoZQogICAgdGVzdCBhIHRpY2tpbmcgdGltZSBib21iIGluIGEgYnVpbGRib3QgZW52aXJvbm1lbnQuIE9uIFVuaXggYnVpbGRib3RzLCB0aGlzCiAgICBtYXkgc2ltcGx5IG1hbmlmZXN0IGFzIGEgZmFpbGVkIHRlc3QsIHdoaWNoIGNhbiBiZSByZWNvdmVyZWQgZnJvbSB3aXRob3V0CiAgICBpbnRlcnZlbnRpb24gaW4gbW9zdCBjYXNlcywgYnV0IG9uIFdpbmRvd3MsIHRoZSBlbnRpcmUgcHl0aG9uIHByb2Nlc3MgY2FuCiAgICBjb21wbGV0ZWx5IGFuZCB1dHRlcmx5IHdlZGdlLCByZXF1aXJpbmcgc29tZW9uZSB0byBsb2cgaW4gdG8gdGhlIGJ1aWxkYm90CiAgICBhbmQgbWFudWFsbHkga2lsbCB0aGUgYWZmZWN0ZWQgcHJvY2Vzcy4KCiAgICAoVGhpcyBpcyBlYXN5IHRvIHJlcHJvZHVjZSBvbiBXaW5kb3dzLCB1bmZvcnR1bmF0ZWx5LCBhbmQgY2FuIGJlIHRyYWNlZCB0bwogICAgdGhlIFNPX1JFVVNFQUREUiBzb2NrZXQgb3B0aW9uIGhhdmluZyBkaWZmZXJlbnQgc2VtYW50aWNzIG9uIFdpbmRvd3MgdmVyc3VzCiAgICBVbml4L0xpbnV4LiAgT24gVW5peCwgeW91IGNhbid0IGhhdmUgdHdvIEFGX0lORVQgU09DS19TVFJFQU0gc29ja2V0cyBiaW5kLAogICAgbGlzdGVuIGFuZCB0aGVuIGFjY2VwdCBjb25uZWN0aW9ucyBvbiBpZGVudGljYWwgaG9zdC9wb3J0cy4gIEFuIEVBRERSSU5VU0UKICAgIHNvY2tldC5lcnJvciB3aWxsIGJlIHJhaXNlZCBhdCBzb21lIHBvaW50IChkZXBlbmRpbmcgb24gdGhlIHBsYXRmb3JtIGFuZAogICAgdGhlIG9yZGVyIGJpbmQgYW5kIGxpc3RlbiB3ZXJlIGNhbGxlZCBvbiBlYWNoIHNvY2tldCkuCgogICAgSG93ZXZlciwgb24gV2luZG93cywgaWYgU09fUkVVU0VBRERSIGlzIHNldCBvbiB0aGUgc29ja2V0cywgbm8gRUFERFJJTlVTRQogICAgd2lsbCBldmVyIGJlIHJhaXNlZCB3aGVuIGF0dGVtcHRpbmcgdG8gYmluZCB0d28gaWRlbnRpY2FsIGhvc3QvcG9ydHMuIFdoZW4KICAgIGFjY2VwdCgpIGlzIGNhbGxlZCBvbiBlYWNoIHNvY2tldCwgdGhlIHNlY29uZCBjYWxsZXIncyBwcm9jZXNzIHdpbGwgc3RlYWwKICAgIHRoZSBwb3J0IGZyb20gdGhlIGZpcnN0IGNhbGxlciwgbGVhdmluZyB0aGVtIGJvdGggaW4gYW4gYXdrd2FyZGx5IHdlZGdlZAogICAgc3RhdGUgd2hlcmUgdGhleSdsbCBubyBsb25nZXIgcmVzcG9uZCB0byBhbnkgc2lnbmFscyBvciBncmFjZWZ1bCBraWxscywgYW5kCiAgICBtdXN0IGJlIGZvcmNpYmx5IGtpbGxlZCB2aWEgT3BlblByb2Nlc3MoKS9UZXJtaW5hdGVQcm9jZXNzKCkuCgogICAgVGhlIHNvbHV0aW9uIG9uIFdpbmRvd3MgaXMgdG8gdXNlIHRoZSBTT19FWENMVVNJVkVBRERSVVNFIHNvY2tldCBvcHRpb24KICAgIGluc3RlYWQgb2YgU09fUkVVU0VBRERSLCB3aGljaCBlZmZlY3RpdmVseSBhZmZvcmRzIHRoZSBzYW1lIHNlbWFudGljcyBhcwogICAgU09fUkVVU0VBRERSIG9uIFVuaXguICBHaXZlbiB0aGUgcHJvcGVuc2l0eSBvZiBVbml4IGRldmVsb3BlcnMgaW4gdGhlIE9wZW4KICAgIFNvdXJjZSB3b3JsZCBjb21wYXJlZCB0byBXaW5kb3dzIG9uZXMsIHRoaXMgaXMgYSBjb21tb24gbWlzdGFrZS4gIEEgcXVpY2sKICAgIGxvb2sgb3ZlciBPcGVuU1NMJ3MgMC45LjhnIHNvdXJjZSBzaG93cyB0aGF0IHRoZXkgdXNlIFNPX1JFVVNFQUREUiB3aGVuCiAgICBvcGVuc3NsLmV4ZSBpcyBjYWxsZWQgd2l0aCB0aGUgJ3Nfc2VydmVyJyBvcHRpb24sIGZvciBleGFtcGxlLiBTZWUKICAgIGh0dHA6Ly9idWdzLnB5dGhvbi5vcmcvaXNzdWUyNTUwIGZvciBtb3JlIGluZm8uICBUaGUgZm9sbG93aW5nIHNpdGUgYWxzbwogICAgaGFzIGEgdmVyeSB0aG9yb3VnaCBkZXNjcmlwdGlvbiBhYm91dCB0aGUgaW1wbGljYXRpb25zIG9mIGJvdGggUkVVU0VBRERSCiAgICBhbmQgRVhDTFVTSVZFQUREUlVTRSBvbiBXaW5kb3dzOgogICAgaHR0cDovL21zZG4yLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczc0MDYyMShWUy44NSkuYXNweCkKCiAgICBYWFg6IGFsdGhvdWdoIHRoaXMgYXBwcm9hY2ggaXMgYSB2YXN0IGltcHJvdmVtZW50IG9uIHByZXZpb3VzIGF0dGVtcHRzIHRvCiAgICBlbGljaXQgdW51c2VkIHBvcnRzLCBpdCByZXN0cyBoZWF2aWx5IG9uIHRoZSBhc3N1bXB0aW9uIHRoYXQgdGhlIGVwaGVtZXJhbAogICAgcG9ydCByZXR1cm5lZCB0byB1cyBieSB0aGUgT1Mgd29uJ3QgaW1tZWRpYXRlbHkgYmUgZGlzaGVkIGJhY2sgb3V0IHRvIHNvbWUKICAgIG90aGVyIHByb2Nlc3Mgd2hlbiB3ZSBjbG9zZSBhbmQgZGVsZXRlIG91ciB0ZW1wb3Jhcnkgc29ja2V0IGJ1dCBiZWZvcmUgb3VyCiAgICBjYWxsaW5nIGNvZGUgaGFzIGEgY2hhbmNlIHRvIGJpbmQgdGhlIHJldHVybmVkIHBvcnQuICBXZSBjYW4gZGVhbCB3aXRoIHRoaXMKICAgIGlzc3VlIGlmL3doZW4gd2UgY29tZSBhY3Jvc3MgaXQuCiAgICAiIiIKCiAgICB0ZW1wc29jayA9IHNvY2tldC5zb2NrZXQoZmFtaWx5LCBzb2NrdHlwZSkKICAgIHBvcnQgPSBiaW5kX3BvcnQodGVtcHNvY2spCiAgICB0ZW1wc29jay5jbG9zZSgpCiAgICBkZWwgdGVtcHNvY2sKICAgIHJldHVybiBwb3J0CgpkZWYgYmluZF9wb3J0KHNvY2ssIGhvc3Q9SE9TVCk6CiAgICAiIiJCaW5kIHRoZSBzb2NrZXQgdG8gYSBmcmVlIHBvcnQgYW5kIHJldHVybiB0aGUgcG9ydCBudW1iZXIuICBSZWxpZXMgb24KICAgIGVwaGVtZXJhbCBwb3J0cyBpbiBvcmRlciB0byBlbnN1cmUgd2UgYXJlIHVzaW5nIGFuIHVuYm91bmQgcG9ydC4gIFRoaXMgaXMKICAgIGltcG9ydGFudCBhcyBtYW55IHRlc3RzIG1heSBiZSBydW5uaW5nIHNpbXVsdGFuZW91c2x5LCBlc3BlY2lhbGx5IGluIGEKICAgIGJ1aWxkYm90IGVudmlyb25tZW50LiAgVGhpcyBtZXRob2QgcmFpc2VzIGFuIGV4Y2VwdGlvbiBpZiB0aGUgc29jay5mYW1pbHkKICAgIGlzIEFGX0lORVQgYW5kIHNvY2sudHlwZSBpcyBTT0NLX1NUUkVBTSwgKmFuZCogdGhlIHNvY2tldCBoYXMgU09fUkVVU0VBRERSCiAgICBvciBTT19SRVVTRVBPUlQgc2V0IG9uIGl0LiAgVGVzdHMgc2hvdWxkICpuZXZlciogc2V0IHRoZXNlIHNvY2tldCBvcHRpb25zCiAgICBmb3IgVENQL0lQIHNvY2tldHMuICBUaGUgb25seSBjYXNlIGZvciBzZXR0aW5nIHRoZXNlIG9wdGlvbnMgaXMgdGVzdGluZwogICAgbXVsdGljYXN0aW5nIHZpYSBtdWx0aXBsZSBVRFAgc29ja2V0cy4KCiAgICBBZGRpdGlvbmFsbHksIGlmIHRoZSBTT19FWENMVVNJVkVBRERSVVNFIHNvY2tldCBvcHRpb24gaXMgYXZhaWxhYmxlIChpLmUuCiAgICBvbiBXaW5kb3dzKSwgaXQgd2lsbCBiZSBzZXQgb24gdGhlIHNvY2tldC4gIFRoaXMgd2lsbCBwcmV2ZW50IGFueW9uZSBlbHNlCiAgICBmcm9tIGJpbmQoKSdpbmcgdG8gb3VyIGhvc3QvcG9ydCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSB0ZXN0LgogICAgIiIiCgogICAgaWYgc29jay5mYW1pbHkgPT0gc29ja2V0LkFGX0lORVQgYW5kIHNvY2sudHlwZSA9PSBzb2NrZXQuU09DS19TVFJFQU06CiAgICAgICAgaWYgaGFzYXR0cihzb2NrZXQsICdTT19SRVVTRUFERFInKToKICAgICAgICAgICAgaWYgc29jay5nZXRzb2Nrb3B0KHNvY2tldC5TT0xfU09DS0VULCBzb2NrZXQuU09fUkVVU0VBRERSKSA9PSAxOgogICAgICAgICAgICAgICAgcmFpc2UgVGVzdEZhaWxlZCgidGVzdHMgc2hvdWxkIG5ldmVyIHNldCB0aGUgU09fUkVVU0VBRERSICIgICBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzb2NrZXQgb3B0aW9uIG9uIFRDUC9JUCBzb2NrZXRzISIpCiAgICAgICAgaWYgaGFzYXR0cihzb2NrZXQsICdTT19SRVVTRVBPUlQnKToKICAgICAgICAgICAgaWYgc29jay5nZXRzb2Nrb3B0KHNvY2tldC5TT0xfU09DS0VULCBzb2NrZXQuU09fUkVVU0VQT1JUKSA9PSAxOgogICAgICAgICAgICAgICAgcmFpc2UgVGVzdEZhaWxlZCgidGVzdHMgc2hvdWxkIG5ldmVyIHNldCB0aGUgU09fUkVVU0VQT1JUICIgICBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzb2NrZXQgb3B0aW9uIG9uIFRDUC9JUCBzb2NrZXRzISIpCiAgICAgICAgaWYgaGFzYXR0cihzb2NrZXQsICdTT19FWENMVVNJVkVBRERSVVNFJyk6CiAgICAgICAgICAgIHNvY2suc2V0c29ja29wdChzb2NrZXQuU09MX1NPQ0tFVCwgc29ja2V0LlNPX0VYQ0xVU0lWRUFERFJVU0UsIDEpCgogICAgc29jay5iaW5kKChob3N0LCAwKSkKICAgIHBvcnQgPSBzb2NrLmdldHNvY2tuYW1lKClbMV0KICAgIHJldHVybiBwb3J0CgpkZWYgX2lzX2lwdjZfZW5hYmxlZCgpOgogICAgIiIiQ2hlY2sgd2hldGhlciBJUHY2IGlzIGVuYWJsZWQgb24gdGhpcyBob3N0LiIiIgogICAgaWYgc29ja2V0Lmhhc19pcHY2OgogICAgICAgIHNvY2sgPSBOb25lCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzb2NrID0gc29ja2V0LnNvY2tldChzb2NrZXQuQUZfSU5FVDYsIHNvY2tldC5TT0NLX1NUUkVBTSkKICAgICAgICAgICAgc29jay5iaW5kKCgnOjoxJywgMCkpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IChzb2NrZXQuZXJyb3IsIHNvY2tldC5nYWllcnJvcik6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICBpZiBzb2NrOgogICAgICAgICAgICAgICAgc29jay5jbG9zZSgpCiAgICByZXR1cm4gRmFsc2UKCklQVjZfRU5BQkxFRCA9IF9pc19pcHY2X2VuYWJsZWQoKQoKCiMgQSBjb25zdGFudCBsaWtlbHkgbGFyZ2VyIHRoYW4gdGhlIHVuZGVybHlpbmcgT1MgcGlwZSBidWZmZXIgc2l6ZS4KIyBXaW5kb3dzIGxpbWl0IHNlZW1zIHRvIGJlIGFyb3VuZCA1MTJCLCBhbmQgbWFueSBVbml4IGtlcm5lbHMgaGF2ZSBhIDY0SyBwaXBlCiMgYnVmZmVyIHNpemUgb3IgMTYqUEFHRV9TSVpFOiB0YWtlIGEgZmV3IG1lZ3MgdG8gYmUgc3VyZS4gIFRoaXMKUElQRV9NQVhfU0laRSA9IDMgKiAxMDAwICogMTAwMAoKCiMgZGVjb3JhdG9yIGZvciBza2lwcGluZyB0ZXN0cyBvbiBub24tSUVFRSA3NTQgcGxhdGZvcm1zCnJlcXVpcmVzX0lFRUVfNzU0ID0gdW5pdHRlc3Quc2tpcFVubGVzcygKICAgIGZsb2F0Ll9fZ2V0Zm9ybWF0X18oImRvdWJsZSIpLnN0YXJ0c3dpdGgoIklFRUUiKSwKICAgICJ0ZXN0IHJlcXVpcmVzIElFRUUgNzU0IGRvdWJsZXMiKQoKcmVxdWlyZXNfemxpYiA9IHVuaXR0ZXN0LnNraXBVbmxlc3MoemxpYiwgJ3JlcXVpcmVzIHpsaWInKQoKcmVxdWlyZXNfYnoyID0gdW5pdHRlc3Quc2tpcFVubGVzcyhiejIsICdyZXF1aXJlcyBiejInKQoKcmVxdWlyZXNfbHptYSA9IHVuaXR0ZXN0LnNraXBVbmxlc3MobHptYSwgJ3JlcXVpcmVzIGx6bWEnKQoKaXNfanl0aG9uID0gc3lzLnBsYXRmb3JtLnN0YXJ0c3dpdGgoJ2phdmEnKQoKIyBGaWxlbmFtZSB1c2VkIGZvciB0ZXN0aW5nCmlmIG9zLm5hbWUgPT0gJ2phdmEnOgogICAgIyBKeXRob24gZGlzYWxsb3dzIEAgaW4gbW9kdWxlIG5hbWVzCiAgICBURVNURk4gPSAnJHRlc3QnCmVsc2U6CiAgICBURVNURk4gPSAnQHRlc3QnCgojIERpc2FtYmlndWF0ZSBURVNURk4gZm9yIHBhcmFsbGVsIHRlc3RpbmcsIHdoaWxlIGxldHRpbmcgaXQgcmVtYWluIGEgdmFsaWQKIyBtb2R1bGUgbmFtZS4KVEVTVEZOID0gInt9X3t9X3RtcCIuZm9ybWF0KFRFU1RGTiwgb3MuZ2V0cGlkKCkpCgojIEZTX05PTkFTQ0lJOiBub24tQVNDSUkgY2hhcmFjdGVyIGVuY29kYWJsZSBieSBvcy5mc2VuY29kZSgpLAojIG9yIE5vbmUgaWYgdGhlcmUgaXMgbm8gc3VjaCBjaGFyYWN0ZXIuCkZTX05PTkFTQ0lJID0gTm9uZQpmb3IgY2hhcmFjdGVyIGluICgKICAgICMgRmlyc3QgdHJ5IHByaW50YWJsZSBhbmQgY29tbW9uIGNoYXJhY3RlcnMgdG8gaGF2ZSBhIHJlYWRhYmxlIGZpbGVuYW1lLgogICAgIyBGb3IgZWFjaCBjaGFyYWN0ZXIsIHRoZSBlbmNvZGluZyBsaXN0IGFyZSBqdXN0IGV4YW1wbGUgb2YgZW5jb2RpbmdzIGFibGUKICAgICMgdG8gZW5jb2RlIHRoZSBjaGFyYWN0ZXIgKHRoZSBsaXN0IGlzIG5vdCBleGhhdXN0aXZlKS4KCiAgICAjIFUrMDBFNiAoTGF0aW4gU21hbGwgTGV0dGVyIEFlKTogY3AxMjUyLCBpc28tODg1OS0xCiAgICAnXHUwMEU2JywKICAgICMgVSswMTMwIChMYXRpbiBDYXBpdGFsIExldHRlciBJIFdpdGggRG90IEFib3ZlKTogY3AxMjU0LCBpc284ODU5XzMKICAgICdcdTAxMzAnLAogICAgIyBVKzAxNDEgKExhdGluIENhcGl0YWwgTGV0dGVyIEwgV2l0aCBTdHJva2UpOiBjcDEyNTAsIGNwMTI1NwogICAgJ1x1MDE0MScsCiAgICAjIFUrMDNDNiAoR3JlZWsgU21hbGwgTGV0dGVyIFBoaSk6IGNwMTI1MwogICAgJ1x1MDNDNicsCiAgICAjIFUrMDQxQSAoQ3lyaWxsaWMgQ2FwaXRhbCBMZXR0ZXIgS2EpOiBjcDEyNTEKICAgICdcdTA0MUEnLAogICAgIyBVKzA1RDAgKEhlYnJldyBMZXR0ZXIgQWxlZik6IEVuY29kYWJsZSB0byBjcDQyNAogICAgJ1x1MDVEMCcsCiAgICAjIFUrMDYwQyAoQXJhYmljIENvbW1hKTogY3A4NjQsIGNwMTAwNiwgaXNvODg1OV82LCBtYWNfYXJhYmljCiAgICAnXHUwNjBDJywKICAgICMgVSswNjJBIChBcmFiaWMgTGV0dGVyIFRlaCk6IGNwNzIwCiAgICAnXHUwNjJBJywKICAgICMgVSswRTAxIChUaGFpIENoYXJhY3RlciBLbyBLYWkpOiBjcDg3NAogICAgJ1x1MEUwMScsCgogICAgIyBUaGVuIHRyeSBtb3JlICJzcGVjaWFsIiBjaGFyYWN0ZXJzLiAic3BlY2lhbCIgYmVjYXVzZSB0aGV5IG1heSBiZQogICAgIyBpbnRlcnByZXRlZCBvciBkaXNwbGF5ZWQgZGlmZmVyZW50bHkgZGVwZW5kaW5nIG9uIHRoZSBleGFjdCBsb2NhbGUKICAgICMgZW5jb2RpbmcgYW5kIHRoZSBmb250LgoKICAgICMgVSswMEEwIChOby1CcmVhayBTcGFjZSkKICAgICdcdTAwQTAnLAogICAgIyBVKzIwQUMgKEV1cm8gU2lnbikKICAgICdcdTIwQUMnLAopOgogICAgdHJ5OgogICAgICAgIG9zLmZzZGVjb2RlKG9zLmZzZW5jb2RlKGNoYXJhY3RlcikpCiAgICBleGNlcHQgVW5pY29kZUVycm9yOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgRlNfTk9OQVNDSUkgPSBjaGFyYWN0ZXIKICAgICAgICBicmVhawoKIyBURVNURk5fVU5JQ09ERSBpcyBhIG5vbi1hc2NpaSBmaWxlbmFtZQpURVNURk5fVU5JQ09ERSA9IFRFU1RGTiArICItXHhlMFx4ZjJcdTAyNThcdTAxNDFcdTAxMWYiCmlmIHN5cy5wbGF0Zm9ybSA9PSAnZGFyd2luJzoKICAgICMgSW4gTWFjIE9TIFgncyBWRlMgQVBJIGZpbGUgbmFtZXMgYXJlLCBieSBkZWZpbml0aW9uLCBjYW5vbmljYWxseQogICAgIyBkZWNvbXBvc2VkIFVuaWNvZGUsIGVuY29kZWQgdXNpbmcgVVRGLTguIFNlZSBRQTExNzM6CiAgICAjIGh0dHA6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL21hYy9saWJyYXJ5L3FhL3FhMjAwMS9xYTExNzMuaHRtbAogICAgaW1wb3J0IHVuaWNvZGVkYXRhCiAgICBURVNURk5fVU5JQ09ERSA9IHVuaWNvZGVkYXRhLm5vcm1hbGl6ZSgnTkZEJywgVEVTVEZOX1VOSUNPREUpClRFU1RGTl9FTkNPRElORyA9IHN5cy5nZXRmaWxlc3lzdGVtZW5jb2RpbmcoKQoKIyBURVNURk5fVU5FTkNPREFCTEUgaXMgYSBmaWxlbmFtZSAoc3RyIHR5cGUpIHRoYXQgc2hvdWxkICpub3QqIGJlIGFibGUgdG8gYmUKIyBlbmNvZGVkIGJ5IHRoZSBmaWxlc3lzdGVtIGVuY29kaW5nIChpbiBzdHJpY3QgbW9kZSkuIEl0IGNhbiBiZSBOb25lIGlmIHdlCiMgY2Fubm90IGdlbmVyYXRlIHN1Y2ggZmlsZW5hbWUuClRFU1RGTl9VTkVOQ09EQUJMRSA9IE5vbmUKaWYgb3MubmFtZSBpbiAoJ250JywgJ2NlJyk6CiAgICAjIHNraXAgd2luMzJzICgwKSBvciBXaW5kb3dzIDl4L01FICgxKQogICAgaWYgc3lzLmdldHdpbmRvd3N2ZXJzaW9uKCkucGxhdGZvcm0gPj0gMjoKICAgICAgICAjIERpZmZlcmVudCBraW5kcyBvZiBjaGFyYWN0ZXJzIGZyb20gdmFyaW91cyBsYW5ndWFnZXMgdG8gbWluaW1pemUgdGhlCiAgICAgICAgIyBwcm9iYWJpbGl0eSB0aGF0IHRoZSB3aG9sZSBuYW1lIGlzIGVuY29kYWJsZSB0byBNQkNTIChpc3N1ZSAjOTgxOSkKICAgICAgICBURVNURk5fVU5FTkNPREFCTEUgPSBURVNURk4gKyAiLVx1NTE3MVx1MDE0MVx1MjY2MVx1MDM2M1x1REM4MCIKICAgICAgICB0cnk6CiAgICAgICAgICAgIFRFU1RGTl9VTkVOQ09EQUJMRS5lbmNvZGUoVEVTVEZOX0VOQ09ESU5HKQogICAgICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgnV0FSTklORzogVGhlIGZpbGVuYW1lICVyIENBTiBiZSBlbmNvZGVkIGJ5IHRoZSBmaWxlc3lzdGVtIGVuY29kaW5nICglcykuICcKICAgICAgICAgICAgICAgICAgJ1VuaWNvZGUgZmlsZW5hbWUgdGVzdHMgbWF5IG5vdCBiZSBlZmZlY3RpdmUnCiAgICAgICAgICAgICAgICAgICUgKFRFU1RGTl9VTkVOQ09EQUJMRSwgVEVTVEZOX0VOQ09ESU5HKSkKICAgICAgICAgICAgVEVTVEZOX1VORU5DT0RBQkxFID0gTm9uZQojIE1hYyBPUyBYIGRlbmllcyB1bmVuY29kYWJsZSBmaWxlbmFtZXMgKGludmFsaWQgdXRmLTgpCmVsaWYgc3lzLnBsYXRmb3JtICE9ICdkYXJ3aW4nOgogICAgdHJ5OgogICAgICAgICMgYXNjaWkgYW5kIHV0Zi04IGNhbm5vdCBlbmNvZGUgdGhlIGJ5dGUgMHhmZgogICAgICAgIGInXHhmZicuZGVjb2RlKFRFU1RGTl9FTkNPRElORykKICAgIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3I6CiAgICAgICAgIyAweGZmIHdpbGwgYmUgZW5jb2RlZCB1c2luZyB0aGUgc3Vycm9nYXRlIGNoYXJhY3RlciB1K0RDRkYKICAgICAgICBURVNURk5fVU5FTkNPREFCTEUgPSBURVNURk4gXAogICAgICAgICAgICArIGInLVx4ZmYnLmRlY29kZShURVNURk5fRU5DT0RJTkcsICdzdXJyb2dhdGVlc2NhcGUnKQogICAgZWxzZToKICAgICAgICAjIEZpbGUgc3lzdGVtIGVuY29kaW5nIChlZy4gSVNPLTg4NTktKiBlbmNvZGluZ3MpIGNhbiBlbmNvZGUKICAgICAgICAjIHRoZSBieXRlIDB4ZmYuIFNraXAgc29tZSB1bmljb2RlIGZpbGVuYW1lIHRlc3RzLgogICAgICAgIHBhc3MKCiMgVEVTVEZOX1VOREVDT0RBQkxFIGlzIGEgZmlsZW5hbWUgKGJ5dGVzIHR5cGUpIHRoYXQgc2hvdWxkICpub3QqIGJlIGFibGUgdG8gYmUKIyBkZWNvZGVkIGZyb20gdGhlIGZpbGVzeXN0ZW0gZW5jb2RpbmcgKGluIHN0cmljdCBtb2RlKS4gSXQgY2FuIGJlIE5vbmUgaWYgd2UKIyBjYW5ub3QgZ2VuZXJhdGUgc3VjaCBmaWxlbmFtZSAoZXg6IHRoZSBsYXRpbjEgZW5jb2RpbmcgY2FuIGRlY29kZSBhbnkgYnl0ZQojIHNlcXVlbmNlKS4gT24gVU5JWCwgVEVTVEZOX1VOREVDT0RBQkxFIGNhbiBiZSBkZWNvZGVkIGJ5IG9zLmZzZGVjb2RlKCkgdGhhbmtzCiMgdG8gdGhlIHN1cnJvZ2F0ZWVzY2FwZSBlcnJvciBoYW5kbGVyIChQRVAgMzgzKSwgYnV0IG5vdCBmcm9tIHRoZSBmaWxlc3lzdGVtCiMgZW5jb2RpbmcgaW4gc3RyaWN0IG1vZGUuClRFU1RGTl9VTkRFQ09EQUJMRSA9IE5vbmUKJycnICAjZml4bWUgYnJ5dGhvbgpmb3IgbmFtZSBpbiAoCiAgICAjIGInXHhmZicgaXMgbm90IGRlY29kYWJsZSBieSBvcy5mc2RlY29kZSgpIHdpdGggY29kZSBwYWdlIDkzMi4gV2luZG93cwogICAgIyBhY2NlcHRzIGl0IHRvIGNyZWF0ZSBhIGZpbGUgb3IgYSBkaXJlY3RvcnksIG9yIGRvbid0IGFjY2VwdCB0byBlbnRlciB0bwogICAgIyBzdWNoIGRpcmVjdG9yeSAod2hlbiB0aGUgYnl0ZXMgbmFtZSBpcyB1c2VkKS4gU28gdGVzdCBiJ1x4ZTcnIGZpcnN0OiBpdCBpcwogICAgIyBub3QgZGVjb2RhYmxlIGZyb20gY3A5MzIuCiAgICBiJ1x4ZTd3XHhmMCcsCiAgICAjIHVuZGVjb2RhYmxlIGZyb20gQVNDSUksIFVURi04CiAgICBiJ1x4ZmYnLAogICAgIyB1bmRlY29kYWJsZSBmcm9tIGlzbzg4NTktMywgaXNvODg1OS02LCBpc284ODU5LTcsIGNwNDI0LCBpc284ODU5LTgsIGNwODU2CiAgICAjIGFuZCBjcDg1NwogICAgYidceGFlXHhkNScKICAgICMgdW5kZWNvZGFibGUgZnJvbSBVVEYtOCAoVU5JWCBhbmQgTWFjIE9TIFgpCiAgICBiJ1x4ZWRceGIyXHg4MCcsIGInXHhlZFx4YjRceDgwJywKICAgICMgdW5kZWNvZGFibGUgZnJvbSBzaGlmdF9qaXMsIGNwODY5LCBjcDg3NCwgY3A5MzIsIGNwMTI1MCwgY3AxMjUxLCBjcDEyNTIsCiAgICAjIGNwMTI1MywgY3AxMjU0LCBjcDEyNTUsIGNwMTI1NywgY3AxMjU4CiAgICBiJ1x4ODFceDk4JywKKToKICAgIHRyeToKICAgICAgICBuYW1lLmRlY29kZShURVNURk5fRU5DT0RJTkcpCiAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yOgogICAgICAgIFRFU1RGTl9VTkRFQ09EQUJMRSA9IG9zLmZzZW5jb2RlKFRFU1RGTikgKyBuYW1lCiAgICAgICAgYnJlYWsKJycnCmlmIEZTX05PTkFTQ0lJOgogICAgVEVTVEZOX05PTkFTQ0lJID0gVEVTVEZOICsgJy0nICsgRlNfTk9OQVNDSUkKZWxzZToKICAgIFRFU1RGTl9OT05BU0NJSSA9IE5vbmUKCiMgU2F2ZSB0aGUgaW5pdGlhbCBjd2QKU0FWRURDV0QgPSBvcy5nZXRjd2QoKQoKQGNvbnRleHRsaWIuY29udGV4dG1hbmFnZXIKZGVmIHRlbXBfY3dkKG5hbWU9J3RlbXBjd2QnLCBxdWlldD1GYWxzZSwgcGF0aD1Ob25lKToKICAgICIiIgogICAgQ29udGV4dCBtYW5hZ2VyIHRoYXQgdGVtcG9yYXJpbHkgY2hhbmdlcyB0aGUgQ1dELgoKICAgIEFuIGV4aXN0aW5nIHBhdGggbWF5IGJlIHByb3ZpZGVkIGFzICpwYXRoKiwgaW4gd2hpY2ggY2FzZSB0aGlzCiAgICBmdW5jdGlvbiBtYWtlcyBubyBjaGFuZ2VzIHRvIHRoZSBmaWxlIHN5c3RlbS4KCiAgICBPdGhlcndpc2UsIHRoZSBuZXcgQ1dEIGlzIGNyZWF0ZWQgaW4gdGhlIGN1cnJlbnQgZGlyZWN0b3J5IGFuZCBpdCdzCiAgICBuYW1lZCAqbmFtZSouIElmICpxdWlldCogaXMgRmFsc2UgKGRlZmF1bHQpIGFuZCBpdCdzIG5vdCBwb3NzaWJsZSB0bwogICAgY3JlYXRlIG9yIGNoYW5nZSB0aGUgQ1dELCBhbiBlcnJvciBpcyByYWlzZWQuICBJZiBpdCdzIFRydWUsIG9ubHkgYQogICAgd2FybmluZyBpcyByYWlzZWQgYW5kIHRoZSBvcmlnaW5hbCBDV0QgaXMgdXNlZC4KICAgICIiIgogICAgc2F2ZWRfZGlyID0gb3MuZ2V0Y3dkKCkKICAgIGlzX3RlbXBvcmFyeSA9IEZhbHNlCiAgICBpZiBwYXRoIGlzIE5vbmU6CiAgICAgICAgcGF0aCA9IG5hbWUKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLm1rZGlyKG5hbWUpCiAgICAgICAgICAgIGlzX3RlbXBvcmFyeSA9IFRydWUKICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgaWYgbm90IHF1aWV0OgogICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgd2FybmluZ3Mud2FybigndGVzdHMgbWF5IGZhaWwsIHVuYWJsZSB0byBjcmVhdGUgdGVtcCBDV0QgJyArIG5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgUnVudGltZVdhcm5pbmcsIHN0YWNrbGV2ZWw9MykKICAgIHRyeToKICAgICAgICBvcy5jaGRpcihwYXRoKQogICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgaWYgbm90IHF1aWV0OgogICAgICAgICAgICByYWlzZQogICAgICAgIHdhcm5pbmdzLndhcm4oJ3Rlc3RzIG1heSBmYWlsLCB1bmFibGUgdG8gY2hhbmdlIHRoZSBDV0QgdG8gJyArIHBhdGgsCiAgICAgICAgICAgICAgICAgICAgICBSdW50aW1lV2FybmluZywgc3RhY2tsZXZlbD0zKQogICAgdHJ5OgogICAgICAgIHlpZWxkIG9zLmdldGN3ZCgpCiAgICBmaW5hbGx5OgogICAgICAgIG9zLmNoZGlyKHNhdmVkX2RpcikKICAgICAgICBpZiBpc190ZW1wb3Jhcnk6CiAgICAgICAgICAgIHJtdHJlZShuYW1lKQoKCmlmIGhhc2F0dHIob3MsICJ1bWFzayIpOgogICAgQGNvbnRleHRsaWIuY29udGV4dG1hbmFnZXIKICAgIGRlZiB0ZW1wX3VtYXNrKHVtYXNrKToKICAgICAgICAiIiJDb250ZXh0IG1hbmFnZXIgdGhhdCB0ZW1wb3JhcmlseSBzZXRzIHRoZSBwcm9jZXNzIHVtYXNrLiIiIgogICAgICAgIG9sZG1hc2sgPSBvcy51bWFzayh1bWFzaykKICAgICAgICB0cnk6CiAgICAgICAgICAgIHlpZWxkCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgb3MudW1hc2sob2xkbWFzaykKCgpkZWYgZmluZGZpbGUoZmlsZSwgaGVyZT1fX2ZpbGVfXywgc3ViZGlyPU5vbmUpOgogICAgIiIiVHJ5IHRvIGZpbmQgYSBmaWxlIG9uIHN5cy5wYXRoIGFuZCB0aGUgd29ya2luZyBkaXJlY3RvcnkuICBJZiBpdCBpcyBub3QKICAgIGZvdW5kIHRoZSBhcmd1bWVudCBwYXNzZWQgdG8gdGhlIGZ1bmN0aW9uIGlzIHJldHVybmVkICh0aGlzIGRvZXMgbm90CiAgICBuZWNlc3NhcmlseSBzaWduYWwgZmFpbHVyZTsgY291bGQgc3RpbGwgYmUgdGhlIGxlZ2l0aW1hdGUgcGF0aCkuIiIiCiAgICBpZiBvcy5wYXRoLmlzYWJzKGZpbGUpOgogICAgICAgIHJldHVybiBmaWxlCiAgICBpZiBzdWJkaXIgaXMgbm90IE5vbmU6CiAgICAgICAgZmlsZSA9IG9zLnBhdGguam9pbihzdWJkaXIsIGZpbGUpCiAgICBwYXRoID0gc3lzLnBhdGgKICAgIHBhdGggPSBbb3MucGF0aC5kaXJuYW1lKGhlcmUpXSArIHBhdGgKICAgIGZvciBkbiBpbiBwYXRoOgogICAgICAgIGZuID0gb3MucGF0aC5qb2luKGRuLCBmaWxlKQogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGZuKTogcmV0dXJuIGZuCiAgICByZXR1cm4gZmlsZQoKZGVmIGNyZWF0ZV9lbXB0eV9maWxlKGZpbGVuYW1lKToKICAgICIiIkNyZWF0ZSBhbiBlbXB0eSBmaWxlLiBJZiB0aGUgZmlsZSBhbHJlYWR5IGV4aXN0cywgdHJ1bmNhdGUgaXQuIiIiCiAgICBmZCA9IG9zLm9wZW4oZmlsZW5hbWUsIG9zLk9fV1JPTkxZIHwgb3MuT19DUkVBVCB8IG9zLk9fVFJVTkMpCiAgICBvcy5jbG9zZShmZCkKCmRlZiBzb3J0ZGljdChkaWN0KToKICAgICJMaWtlIHJlcHIoZGljdCksIGJ1dCBpbiBzb3J0ZWQgb3JkZXIuIgogICAgaXRlbXMgPSBzb3J0ZWQoZGljdC5pdGVtcygpKQogICAgcmVwcnBhaXJzID0gWyIlcjogJXIiICUgcGFpciBmb3IgcGFpciBpbiBpdGVtc10KICAgIHdpdGhjb21tYXMgPSAiLCAiLmpvaW4ocmVwcnBhaXJzKQogICAgcmV0dXJuICJ7JXN9IiAlIHdpdGhjb21tYXMKCmRlZiBtYWtlX2JhZF9mZCgpOgogICAgIiIiCiAgICBDcmVhdGUgYW4gaW52YWxpZCBmaWxlIGRlc2NyaXB0b3IgYnkgb3BlbmluZyBhbmQgY2xvc2luZyBhIGZpbGUgYW5kIHJldHVybgogICAgaXRzIGZkLgogICAgIiIiCiAgICBmaWxlID0gb3BlbihURVNURk4sICJ3YiIpCiAgICB0cnk6CiAgICAgICAgcmV0dXJuIGZpbGUuZmlsZW5vKCkKICAgIGZpbmFsbHk6CiAgICAgICAgZmlsZS5jbG9zZSgpCiAgICAgICAgdW5saW5rKFRFU1RGTikKCmRlZiBjaGVja19zeW50YXhfZXJyb3IodGVzdGNhc2UsIHN0YXRlbWVudCk6CiAgICB0ZXN0Y2FzZS5hc3NlcnRSYWlzZXMoU3ludGF4RXJyb3IsIGNvbXBpbGUsIHN0YXRlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRlc3Qgc3RyaW5nPicsICdleGVjJykKCmRlZiBvcGVuX3VybHJlc291cmNlKHVybCwgKmFyZ3MsICoqa3cpOgogICAgaW1wb3J0IHVybGxpYi5yZXF1ZXN0LCB1cmxsaWIucGFyc2UKCiAgICBjaGVjayA9IGt3LnBvcCgnY2hlY2snLCBOb25lKQoKICAgIGZpbGVuYW1lID0gdXJsbGliLnBhcnNlLnVybHBhcnNlKHVybClbMl0uc3BsaXQoJy8nKVstMV0gIyAnLyc6IGl0J3MgVVJMIQoKICAgIGZuID0gb3MucGF0aC5qb2luKG9zLnBhdGguZGlybmFtZShfX2ZpbGVfXyksICJkYXRhIiwgZmlsZW5hbWUpCgogICAgZGVmIGNoZWNrX3ZhbGlkX2ZpbGUoZm4pOgogICAgICAgIGYgPSBvcGVuKGZuLCAqYXJncywgKiprdykKICAgICAgICBpZiBjaGVjayBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gZgogICAgICAgIGVsaWYgY2hlY2soZik6CiAgICAgICAgICAgIGYuc2VlaygwKQogICAgICAgICAgICByZXR1cm4gZgogICAgICAgIGYuY2xvc2UoKQoKICAgIGlmIG9zLnBhdGguZXhpc3RzKGZuKToKICAgICAgICBmID0gY2hlY2tfdmFsaWRfZmlsZShmbikKICAgICAgICBpZiBmIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gZgogICAgICAgIHVubGluayhmbikKCiAgICAjIFZlcmlmeSB0aGUgcmVxdWlyZW1lbnQgYmVmb3JlIGRvd25sb2FkaW5nIHRoZSBmaWxlCiAgICByZXF1aXJlcygndXJsZmV0Y2gnKQoKICAgIHByaW50KCdcdGZldGNoaW5nICVzIC4uLicgJSB1cmwsIGZpbGU9Z2V0X29yaWdpbmFsX3N0ZG91dCgpKQogICAgZiA9IHVybGxpYi5yZXF1ZXN0LnVybG9wZW4odXJsLCB0aW1lb3V0PTE1KQogICAgdHJ5OgogICAgICAgIHdpdGggb3BlbihmbiwgIndiIikgYXMgb3V0OgogICAgICAgICAgICBzID0gZi5yZWFkKCkKICAgICAgICAgICAgd2hpbGUgczoKICAgICAgICAgICAgICAgIG91dC53cml0ZShzKQogICAgICAgICAgICAgICAgcyA9IGYucmVhZCgpCiAgICBmaW5hbGx5OgogICAgICAgIGYuY2xvc2UoKQoKICAgIGYgPSBjaGVja192YWxpZF9maWxlKGZuKQogICAgaWYgZiBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gZgogICAgcmFpc2UgVGVzdEZhaWxlZCgnaW52YWxpZCByZXNvdXJjZSAlcicgJSBmbikKCgpjbGFzcyBXYXJuaW5nc1JlY29yZGVyKG9iamVjdCk6CiAgICAiIiJDb252ZW5pZW5jZSB3cmFwcGVyIGZvciB0aGUgd2FybmluZ3MgbGlzdCByZXR1cm5lZCBvbgogICAgICAgZW50cnkgdG8gdGhlIHdhcm5pbmdzLmNhdGNoX3dhcm5pbmdzKCkgY29udGV4dCBtYW5hZ2VyLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgd2FybmluZ3NfbGlzdCk6CiAgICAgICAgc2VsZi5fd2FybmluZ3MgPSB3YXJuaW5nc19saXN0CiAgICAgICAgc2VsZi5fbGFzdCA9IDAKCiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgYXR0cik6CiAgICAgICAgaWYgbGVuKHNlbGYuX3dhcm5pbmdzKSA+IHNlbGYuX2xhc3Q6CiAgICAgICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYuX3dhcm5pbmdzWy0xXSwgYXR0cikKICAgICAgICBlbGlmIGF0dHIgaW4gd2FybmluZ3MuV2FybmluZ01lc3NhZ2UuX1dBUk5JTkdfREVUQUlMUzoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcigiJXIgaGFzIG5vIGF0dHJpYnV0ZSAlciIgJSAoc2VsZiwgYXR0cikpCgogICAgQHByb3BlcnR5CiAgICBkZWYgd2FybmluZ3Moc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX3dhcm5pbmdzW3NlbGYuX2xhc3Q6XQoKICAgIGRlZiByZXNldChzZWxmKToKICAgICAgICBzZWxmLl9sYXN0ID0gbGVuKHNlbGYuX3dhcm5pbmdzKQoKCmRlZiBfZmlsdGVyd2FybmluZ3MoZmlsdGVycywgcXVpZXQ9RmFsc2UpOgogICAgIiIiQ2F0Y2ggdGhlIHdhcm5pbmdzLCB0aGVuIGNoZWNrIGlmIGFsbCB0aGUgZXhwZWN0ZWQKICAgIHdhcm5pbmdzIGhhdmUgYmVlbiByYWlzZWQgYW5kIHJlLXJhaXNlIHVuZXhwZWN0ZWQgd2FybmluZ3MuCiAgICBJZiAncXVpZXQnIGlzIFRydWUsIG9ubHkgcmUtcmFpc2UgdGhlIHVuZXhwZWN0ZWQgd2FybmluZ3MuCiAgICAiIiIKICAgICMgQ2xlYXIgdGhlIHdhcm5pbmcgcmVnaXN0cnkgb2YgdGhlIGNhbGxpbmcgbW9kdWxlCiAgICAjIGluIG9yZGVyIHRvIHJlLXJhaXNlIHRoZSB3YXJuaW5ncy4KICAgIGZyYW1lID0gc3lzLl9nZXRmcmFtZSgyKQogICAgcmVnaXN0cnkgPSBmcmFtZS5mX2dsb2JhbHMuZ2V0KCdfX3dhcm5pbmdyZWdpc3RyeV9fJykKICAgIGlmIHJlZ2lzdHJ5OgogICAgICAgIHJlZ2lzdHJ5LmNsZWFyKCkKICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MocmVjb3JkPVRydWUpIGFzIHc6CiAgICAgICAgIyBTZXQgZmlsdGVyICJhbHdheXMiIHRvIHJlY29yZCBhbGwgd2FybmluZ3MuICBCZWNhdXNlCiAgICAgICAgIyB0ZXN0X3dhcm5pbmdzIHN3YXAgdGhlIG1vZHVsZSwgd2UgbmVlZCB0byBsb29rIHVwIGluCiAgICAgICAgIyB0aGUgc3lzLm1vZHVsZXMgZGljdGlvbmFyeS4KICAgICAgICBzeXMubW9kdWxlc1snd2FybmluZ3MnXS5zaW1wbGVmaWx0ZXIoImFsd2F5cyIpCiAgICAgICAgeWllbGQgV2FybmluZ3NSZWNvcmRlcih3KQogICAgIyBGaWx0ZXIgdGhlIHJlY29yZGVkIHdhcm5pbmdzCiAgICByZXJhaXNlID0gbGlzdCh3KQogICAgbWlzc2luZyA9IFtdCiAgICBmb3IgbXNnLCBjYXQgaW4gZmlsdGVyczoKICAgICAgICBzZWVuID0gRmFsc2UKICAgICAgICBmb3IgdyBpbiByZXJhaXNlWzpdOgogICAgICAgICAgICB3YXJuaW5nID0gdy5tZXNzYWdlCiAgICAgICAgICAgICMgRmlsdGVyIG91dCB0aGUgbWF0Y2hpbmcgbWVzc2FnZXMKICAgICAgICAgICAgaWYgKHJlLm1hdGNoKG1zZywgc3RyKHdhcm5pbmcpLCByZS5JKSBhbmQKICAgICAgICAgICAgICAgIGlzc3ViY2xhc3Mod2FybmluZy5fX2NsYXNzX18sIGNhdCkpOgogICAgICAgICAgICAgICAgc2VlbiA9IFRydWUKICAgICAgICAgICAgICAgIHJlcmFpc2UucmVtb3ZlKHcpCiAgICAgICAgaWYgbm90IHNlZW4gYW5kIG5vdCBxdWlldDoKICAgICAgICAgICAgIyBUaGlzIGZpbHRlciBjYXVnaHQgbm90aGluZwogICAgICAgICAgICBtaXNzaW5nLmFwcGVuZCgobXNnLCBjYXQuX19uYW1lX18pKQogICAgaWYgcmVyYWlzZToKICAgICAgICByYWlzZSBBc3NlcnRpb25FcnJvcigidW5oYW5kbGVkIHdhcm5pbmcgJXMiICUgcmVyYWlzZVswXSkKICAgIGlmIG1pc3Npbmc6CiAgICAgICAgcmFpc2UgQXNzZXJ0aW9uRXJyb3IoImZpbHRlciAoJXIsICVzKSBkaWQgbm90IGNhdGNoIGFueSB3YXJuaW5nIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlzc2luZ1swXSkKCgpAY29udGV4dGxpYi5jb250ZXh0bWFuYWdlcgpkZWYgY2hlY2tfd2FybmluZ3MoKmZpbHRlcnMsICoqa3dhcmdzKToKICAgICIiIkNvbnRleHQgbWFuYWdlciB0byBzaWxlbmNlIHdhcm5pbmdzLgoKICAgIEFjY2VwdCAyLXR1cGxlcyBhcyBwb3NpdGlvbmFsIGFyZ3VtZW50czoKICAgICAgICAoIm1lc3NhZ2UgcmVnZXhwIiwgV2FybmluZ0NhdGVnb3J5KQoKICAgIE9wdGlvbmFsIGFyZ3VtZW50OgogICAgIC0gaWYgJ3F1aWV0JyBpcyBUcnVlLCBpdCBkb2VzIG5vdCBmYWlsIGlmIGEgZmlsdGVyIGNhdGNoZXMgbm90aGluZwogICAgICAgIChkZWZhdWx0IFRydWUgd2l0aG91dCBhcmd1bWVudCwKICAgICAgICAgZGVmYXVsdCBGYWxzZSBpZiBzb21lIGZpbHRlcnMgYXJlIGRlZmluZWQpCgogICAgV2l0aG91dCBhcmd1bWVudCwgaXQgZGVmYXVsdHMgdG86CiAgICAgICAgY2hlY2tfd2FybmluZ3MoKCIiLCBXYXJuaW5nKSwgcXVpZXQ9VHJ1ZSkKICAgICIiIgogICAgcXVpZXQgPSBrd2FyZ3MuZ2V0KCdxdWlldCcpCiAgICBpZiBub3QgZmlsdGVyczoKICAgICAgICBmaWx0ZXJzID0gKCgiIiwgV2FybmluZyksKQogICAgICAgICMgUHJlc2VydmUgYmFja3dhcmQgY29tcGF0aWJpbGl0eQogICAgICAgIGlmIHF1aWV0IGlzIE5vbmU6CiAgICAgICAgICAgIHF1aWV0ID0gVHJ1ZQogICAgcmV0dXJuIF9maWx0ZXJ3YXJuaW5ncyhmaWx0ZXJzLCBxdWlldCkKCgpjbGFzcyBDbGVhbkltcG9ydChvYmplY3QpOgogICAgIiIiQ29udGV4dCBtYW5hZ2VyIHRvIGZvcmNlIGltcG9ydCB0byByZXR1cm4gYSBuZXcgbW9kdWxlIHJlZmVyZW5jZS4KCiAgICBUaGlzIGlzIHVzZWZ1bCBmb3IgdGVzdGluZyBtb2R1bGUtbGV2ZWwgYmVoYXZpb3Vycywgc3VjaCBhcwogICAgdGhlIGVtaXNzaW9uIG9mIGEgRGVwcmVjYXRpb25XYXJuaW5nIG9uIGltcG9ydC4KCiAgICBVc2UgbGlrZSB0aGlzOgoKICAgICAgICB3aXRoIENsZWFuSW1wb3J0KCJmb28iKToKICAgICAgICAgICAgaW1wb3J0bGliLmltcG9ydF9tb2R1bGUoImZvbyIpICMgbmV3IHJlZmVyZW5jZQogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsICptb2R1bGVfbmFtZXMpOgogICAgICAgIHNlbGYub3JpZ2luYWxfbW9kdWxlcyA9IHN5cy5tb2R1bGVzLmNvcHkoKQogICAgICAgIGZvciBtb2R1bGVfbmFtZSBpbiBtb2R1bGVfbmFtZXM6CiAgICAgICAgICAgIGlmIG1vZHVsZV9uYW1lIGluIHN5cy5tb2R1bGVzOgogICAgICAgICAgICAgICAgbW9kdWxlID0gc3lzLm1vZHVsZXNbbW9kdWxlX25hbWVdCiAgICAgICAgICAgICAgICAjIEl0IGlzIHBvc3NpYmxlIHRoYXQgbW9kdWxlX25hbWUgaXMganVzdCBhbiBhbGlhcyBmb3IKICAgICAgICAgICAgICAgICMgYW5vdGhlciBtb2R1bGUgKGUuZy4gc3R1YiBmb3IgbW9kdWxlcyByZW5hbWVkIGluIDMueCkuCiAgICAgICAgICAgICAgICAjIEluIHRoYXQgY2FzZSwgd2UgYWxzbyBuZWVkIGRlbGV0ZSB0aGUgcmVhbCBtb2R1bGUgdG8gY2xlYXIKICAgICAgICAgICAgICAgICMgdGhlIGltcG9ydCBjYWNoZS4KICAgICAgICAgICAgICAgIGlmIG1vZHVsZS5fX25hbWVfXyAhPSBtb2R1bGVfbmFtZToKICAgICAgICAgICAgICAgICAgICBkZWwgc3lzLm1vZHVsZXNbbW9kdWxlLl9fbmFtZV9fXQogICAgICAgICAgICAgICAgZGVsIHN5cy5tb2R1bGVzW21vZHVsZV9uYW1lXQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19leGl0X18oc2VsZiwgKmlnbm9yZV9leGMpOgogICAgICAgIHN5cy5tb2R1bGVzLnVwZGF0ZShzZWxmLm9yaWdpbmFsX21vZHVsZXMpCgoKY2xhc3MgRW52aXJvbm1lbnRWYXJHdWFyZChjb2xsZWN0aW9ucy5hYmMuTXV0YWJsZU1hcHBpbmcpOgoKICAgICIiIkNsYXNzIHRvIGhlbHAgcHJvdGVjdCB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgcHJvcGVybHkuICBDYW4gYmUgdXNlZCBhcwogICAgYSBjb250ZXh0IG1hbmFnZXIuIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuX2Vudmlyb24gPSBvcy5lbnZpcm9uCiAgICAgICAgc2VsZi5fY2hhbmdlZCA9IHt9CgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGVudnZhcik6CiAgICAgICAgcmV0dXJuIHNlbGYuX2Vudmlyb25bZW52dmFyXQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBlbnZ2YXIsIHZhbHVlKToKICAgICAgICAjIFJlbWVtYmVyIHRoZSBpbml0aWFsIHZhbHVlIG9uIHRoZSBmaXJzdCBhY2Nlc3MKICAgICAgICBpZiBlbnZ2YXIgbm90IGluIHNlbGYuX2NoYW5nZWQ6CiAgICAgICAgICAgIHNlbGYuX2NoYW5nZWRbZW52dmFyXSA9IHNlbGYuX2Vudmlyb24uZ2V0KGVudnZhcikKICAgICAgICBzZWxmLl9lbnZpcm9uW2VudnZhcl0gPSB2YWx1ZQoKICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBlbnZ2YXIpOgogICAgICAgICMgUmVtZW1iZXIgdGhlIGluaXRpYWwgdmFsdWUgb24gdGhlIGZpcnN0IGFjY2VzcwogICAgICAgIGlmIGVudnZhciBub3QgaW4gc2VsZi5fY2hhbmdlZDoKICAgICAgICAgICAgc2VsZi5fY2hhbmdlZFtlbnZ2YXJdID0gc2VsZi5fZW52aXJvbi5nZXQoZW52dmFyKQogICAgICAgIGlmIGVudnZhciBpbiBzZWxmLl9lbnZpcm9uOgogICAgICAgICAgICBkZWwgc2VsZi5fZW52aXJvbltlbnZ2YXJdCgogICAgZGVmIGtleXMoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX2Vudmlyb24ua2V5cygpCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBpdGVyKHNlbGYuX2Vudmlyb24pCgogICAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9lbnZpcm9uKQoKICAgIGRlZiBzZXQoc2VsZiwgZW52dmFyLCB2YWx1ZSk6CiAgICAgICAgc2VsZltlbnZ2YXJdID0gdmFsdWUKCiAgICBkZWYgdW5zZXQoc2VsZiwgZW52dmFyKToKICAgICAgICBkZWwgc2VsZltlbnZ2YXJdCgogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqaWdub3JlX2V4Yyk6CiAgICAgICAgZm9yIChrLCB2KSBpbiBzZWxmLl9jaGFuZ2VkLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIHYgaXMgTm9uZToKICAgICAgICAgICAgICAgIGlmIGsgaW4gc2VsZi5fZW52aXJvbjoKICAgICAgICAgICAgICAgICAgICBkZWwgc2VsZi5fZW52aXJvbltrXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5fZW52aXJvbltrXSA9IHYKICAgICAgICBvcy5lbnZpcm9uID0gc2VsZi5fZW52aXJvbgoKCmNsYXNzIERpcnNPblN5c1BhdGgob2JqZWN0KToKICAgICIiIkNvbnRleHQgbWFuYWdlciB0byB0ZW1wb3JhcmlseSBhZGQgZGlyZWN0b3JpZXMgdG8gc3lzLnBhdGguCgogICAgVGhpcyBtYWtlcyBhIGNvcHkgb2Ygc3lzLnBhdGgsIGFwcGVuZHMgYW55IGRpcmVjdG9yaWVzIGdpdmVuCiAgICBhcyBwb3NpdGlvbmFsIGFyZ3VtZW50cywgdGhlbiByZXZlcnRzIHN5cy5wYXRoIHRvIHRoZSBjb3BpZWQKICAgIHNldHRpbmdzIHdoZW4gdGhlIGNvbnRleHQgZW5kcy4KCiAgICBOb3RlIHRoYXQgKmFsbCogc3lzLnBhdGggbW9kaWZpY2F0aW9ucyBpbiB0aGUgYm9keSBvZiB0aGUKICAgIGNvbnRleHQgbWFuYWdlciwgaW5jbHVkaW5nIHJlcGxhY2VtZW50IG9mIHRoZSBvYmplY3QsCiAgICB3aWxsIGJlIHJldmVydGVkIGF0IHRoZSBlbmQgb2YgdGhlIGJsb2NrLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsICpwYXRocyk6CiAgICAgICAgc2VsZi5vcmlnaW5hbF92YWx1ZSA9IHN5cy5wYXRoWzpdCiAgICAgICAgc2VsZi5vcmlnaW5hbF9vYmplY3QgPSBzeXMucGF0aAogICAgICAgIHN5cy5wYXRoLmV4dGVuZChwYXRocykKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsICppZ25vcmVfZXhjKToKICAgICAgICBzeXMucGF0aCA9IHNlbGYub3JpZ2luYWxfb2JqZWN0CiAgICAgICAgc3lzLnBhdGhbOl0gPSBzZWxmLm9yaWdpbmFsX3ZhbHVlCgoKY2xhc3MgVHJhbnNpZW50UmVzb3VyY2Uob2JqZWN0KToKCiAgICAiIiJSYWlzZSBSZXNvdXJjZURlbmllZCBpZiBhbiBleGNlcHRpb24gaXMgcmFpc2VkIHdoaWxlIHRoZSBjb250ZXh0IG1hbmFnZXIKICAgIGlzIGluIGVmZmVjdCB0aGF0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBleGNlcHRpb24gYW5kIGF0dHJpYnV0ZXMuIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGV4YywgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuZXhjID0gZXhjCiAgICAgICAgc2VsZi5hdHRycyA9IGt3YXJncwoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19leGl0X18oc2VsZiwgdHlwZV89Tm9uZSwgdmFsdWU9Tm9uZSwgdHJhY2ViYWNrPU5vbmUpOgogICAgICAgICIiIklmIHR5cGVfIGlzIGEgc3ViY2xhc3Mgb2Ygc2VsZi5leGMgYW5kIHZhbHVlIGhhcyBhdHRyaWJ1dGVzIG1hdGNoaW5nCiAgICAgICAgc2VsZi5hdHRycywgcmFpc2UgUmVzb3VyY2VEZW5pZWQuICBPdGhlcndpc2UgbGV0IHRoZSBleGNlcHRpb24KICAgICAgICBwcm9wYWdhdGUgKGlmIGFueSkuIiIiCiAgICAgICAgaWYgdHlwZV8gaXMgbm90IE5vbmUgYW5kIGlzc3ViY2xhc3Moc2VsZi5leGMsIHR5cGVfKToKICAgICAgICAgICAgZm9yIGF0dHIsIGF0dHJfdmFsdWUgaW4gc2VsZi5hdHRycy5pdGVtcygpOgogICAgICAgICAgICAgICAgaWYgbm90IGhhc2F0dHIodmFsdWUsIGF0dHIpOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBpZiBnZXRhdHRyKHZhbHVlLCBhdHRyKSAhPSBhdHRyX3ZhbHVlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBSZXNvdXJjZURlbmllZCgiYW4gb3B0aW9uYWwgcmVzb3VyY2UgaXMgbm90IGF2YWlsYWJsZSIpCgojIENvbnRleHQgbWFuYWdlcnMgdGhhdCByYWlzZSBSZXNvdXJjZURlbmllZCB3aGVuIHZhcmlvdXMgaXNzdWVzCiMgd2l0aCB0aGUgSW50ZXJuZXQgY29ubmVjdGlvbiBtYW5pZmVzdCB0aGVtc2VsdmVzIGFzIGV4Y2VwdGlvbnMuCiMgWFhYIGRlcHJlY2F0ZSB0aGVzZSBhbmQgdXNlIHRyYW5zaWVudF9pbnRlcm5ldCgpIGluc3RlYWQKdGltZV9vdXQgPSBUcmFuc2llbnRSZXNvdXJjZShJT0Vycm9yLCBlcnJubz1lcnJuby5FVElNRURPVVQpCnNvY2tldF9wZWVyX3Jlc2V0ID0gVHJhbnNpZW50UmVzb3VyY2Uoc29ja2V0LmVycm9yLCBlcnJubz1lcnJuby5FQ09OTlJFU0VUKQppb2Vycm9yX3BlZXJfcmVzZXQgPSBUcmFuc2llbnRSZXNvdXJjZShJT0Vycm9yLCBlcnJubz1lcnJuby5FQ09OTlJFU0VUKQoKCkBjb250ZXh0bGliLmNvbnRleHRtYW5hZ2VyCmRlZiB0cmFuc2llbnRfaW50ZXJuZXQocmVzb3VyY2VfbmFtZSwgKiwgdGltZW91dD0zMC4wLCBlcnJub3M9KCkpOgogICAgIiIiUmV0dXJuIGEgY29udGV4dCBtYW5hZ2VyIHRoYXQgcmFpc2VzIFJlc291cmNlRGVuaWVkIHdoZW4gdmFyaW91cyBpc3N1ZXMKICAgIHdpdGggdGhlIEludGVybmV0IGNvbm5lY3Rpb24gbWFuaWZlc3QgdGhlbXNlbHZlcyBhcyBleGNlcHRpb25zLiIiIgogICAgZGVmYXVsdF9lcnJub3MgPSBbCiAgICAgICAgKCdFQ09OTlJFRlVTRUQnLCAxMTEpLAogICAgICAgICgnRUNPTk5SRVNFVCcsIDEwNCksCiAgICAgICAgKCdFSE9TVFVOUkVBQ0gnLCAxMTMpLAogICAgICAgICgnRU5FVFVOUkVBQ0gnLCAxMDEpLAogICAgICAgICgnRVRJTUVET1VUJywgMTEwKSwKICAgIF0KICAgIGRlZmF1bHRfZ2FpX2Vycm5vcyA9IFsKICAgICAgICAoJ0VBSV9BR0FJTicsIC0zKSwKICAgICAgICAoJ0VBSV9GQUlMJywgLTQpLAogICAgICAgICgnRUFJX05PTkFNRScsIC0yKSwKICAgICAgICAoJ0VBSV9OT0RBVEEnLCAtNSksCiAgICAgICAgIyBFbmNvdW50ZXJlZCB3aGVuIHRyeWluZyB0byByZXNvbHZlIElQdjYtb25seSBob3N0bmFtZXMKICAgICAgICAoJ1dTQU5PX0RBVEEnLCAxMTAwNCksCiAgICBdCgogICAgZGVuaWVkID0gUmVzb3VyY2VEZW5pZWQoIlJlc291cmNlICVyIGlzIG5vdCBhdmFpbGFibGUiICUgcmVzb3VyY2VfbmFtZSkKICAgIGNhcHR1cmVkX2Vycm5vcyA9IGVycm5vcwogICAgZ2FpX2Vycm5vcyA9IFtdCiAgICBpZiBub3QgY2FwdHVyZWRfZXJybm9zOgogICAgICAgIGNhcHR1cmVkX2Vycm5vcyA9IFtnZXRhdHRyKGVycm5vLCBuYW1lLCBudW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobmFtZSwgbnVtKSBpbiBkZWZhdWx0X2Vycm5vc10KICAgICAgICBnYWlfZXJybm9zID0gW2dldGF0dHIoc29ja2V0LCBuYW1lLCBudW0pCiAgICAgICAgICAgICAgICAgICAgICBmb3IgKG5hbWUsIG51bSkgaW4gZGVmYXVsdF9nYWlfZXJybm9zXQoKICAgIGRlZiBmaWx0ZXJfZXJyb3IoZXJyKToKICAgICAgICBuID0gZ2V0YXR0cihlcnIsICdlcnJubycsIE5vbmUpCiAgICAgICAgaWYgKGlzaW5zdGFuY2UoZXJyLCBzb2NrZXQudGltZW91dCkgb3IKICAgICAgICAgICAgKGlzaW5zdGFuY2UoZXJyLCBzb2NrZXQuZ2FpZXJyb3IpIGFuZCBuIGluIGdhaV9lcnJub3MpIG9yCiAgICAgICAgICAgIG4gaW4gY2FwdHVyZWRfZXJybm9zKToKICAgICAgICAgICAgaWYgbm90IHZlcmJvc2U6CiAgICAgICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKGRlbmllZC5hcmdzWzBdICsgIlxuIikKICAgICAgICAgICAgcmFpc2UgZGVuaWVkIGZyb20gZXJyCgogICAgb2xkX3RpbWVvdXQgPSBzb2NrZXQuZ2V0ZGVmYXVsdHRpbWVvdXQoKQogICAgdHJ5OgogICAgICAgIGlmIHRpbWVvdXQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNvY2tldC5zZXRkZWZhdWx0dGltZW91dCh0aW1lb3V0KQogICAgICAgIHlpZWxkCiAgICBleGNlcHQgSU9FcnJvciBhcyBlcnI6CiAgICAgICAgIyB1cmxsaWIgY2FuIHdyYXAgb3JpZ2luYWwgc29ja2V0IGVycm9ycyBtdWx0aXBsZSB0aW1lcyAoISksIHdlIG11c3QKICAgICAgICAjIHVud3JhcCB0byBnZXQgYXQgdGhlIG9yaWdpbmFsIGVycm9yLgogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIGEgPSBlcnIuYXJncwogICAgICAgICAgICBpZiBsZW4oYSkgPj0gMSBhbmQgaXNpbnN0YW5jZShhWzBdLCBJT0Vycm9yKToKICAgICAgICAgICAgICAgIGVyciA9IGFbMF0KICAgICAgICAgICAgIyBUaGUgZXJyb3IgY2FuIGFsc28gYmUgd3JhcHBlZCBhcyBhcmdzWzFdOgogICAgICAgICAgICAjICAgIGV4Y2VwdCBzb2NrZXQuZXJyb3IgYXMgbXNnOgogICAgICAgICAgICAjICAgICAgICByYWlzZSBJT0Vycm9yKCdzb2NrZXQgZXJyb3InLCBtc2cpLndpdGhfdHJhY2ViYWNrKHN5cy5leGNfaW5mbygpWzJdKQogICAgICAgICAgICBlbGlmIGxlbihhKSA+PSAyIGFuZCBpc2luc3RhbmNlKGFbMV0sIElPRXJyb3IpOgogICAgICAgICAgICAgICAgZXJyID0gYVsxXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBmaWx0ZXJfZXJyb3IoZXJyKQogICAgICAgIHJhaXNlCiAgICAjIFhYWCBzaG91bGQgd2UgY2F0Y2ggZ2VuZXJpYyBleGNlcHRpb25zIGFuZCBsb29rIGZvciB0aGVpcgogICAgIyBfX2NhdXNlX18gb3IgX19jb250ZXh0X18/CiAgICBmaW5hbGx5OgogICAgICAgIHNvY2tldC5zZXRkZWZhdWx0dGltZW91dChvbGRfdGltZW91dCkKCgpAY29udGV4dGxpYi5jb250ZXh0bWFuYWdlcgpkZWYgY2FwdHVyZWRfb3V0cHV0KHN0cmVhbV9uYW1lKToKICAgICIiIlJldHVybiBhIGNvbnRleHQgbWFuYWdlciB1c2VkIGJ5IGNhcHR1cmVkX3N0ZG91dC9zdGRpbi9zdGRlcnIKICAgIHRoYXQgdGVtcG9yYXJpbHkgcmVwbGFjZXMgdGhlIHN5cyBzdHJlYW0gKnN0cmVhbV9uYW1lKiB3aXRoIGEgU3RyaW5nSU8uIiIiCiAgICBpbXBvcnQgaW8KICAgIG9yaWdfc3Rkb3V0ID0gZ2V0YXR0cihzeXMsIHN0cmVhbV9uYW1lKQogICAgc2V0YXR0cihzeXMsIHN0cmVhbV9uYW1lLCBpby5TdHJpbmdJTygpKQogICAgdHJ5OgogICAgICAgIHlpZWxkIGdldGF0dHIoc3lzLCBzdHJlYW1fbmFtZSkKICAgIGZpbmFsbHk6CiAgICAgICAgc2V0YXR0cihzeXMsIHN0cmVhbV9uYW1lLCBvcmlnX3N0ZG91dCkKCmRlZiBjYXB0dXJlZF9zdGRvdXQoKToKICAgICIiIkNhcHR1cmUgdGhlIG91dHB1dCBvZiBzeXMuc3Rkb3V0OgoKICAgICAgIHdpdGggY2FwdHVyZWRfc3Rkb3V0KCkgYXMgczoKICAgICAgICAgICBwcmludCgiaGVsbG8iKQogICAgICAgc2VsZi5hc3NlcnRFcXVhbChzLmdldHZhbHVlKCksICJoZWxsbyIpCiAgICAiIiIKICAgIHJldHVybiBjYXB0dXJlZF9vdXRwdXQoInN0ZG91dCIpCgpkZWYgY2FwdHVyZWRfc3RkZXJyKCk6CiAgICByZXR1cm4gY2FwdHVyZWRfb3V0cHV0KCJzdGRlcnIiKQoKZGVmIGNhcHR1cmVkX3N0ZGluKCk6CiAgICByZXR1cm4gY2FwdHVyZWRfb3V0cHV0KCJzdGRpbiIpCgoKZGVmIGdjX2NvbGxlY3QoKToKICAgICIiIkZvcmNlIGFzIG1hbnkgb2JqZWN0cyBhcyBwb3NzaWJsZSB0byBiZSBjb2xsZWN0ZWQuCgogICAgSW4gbm9uLUNQeXRob24gaW1wbGVtZW50YXRpb25zIG9mIFB5dGhvbiwgdGhpcyBpcyBuZWVkZWQgYmVjYXVzZSB0aW1lbHkKICAgIGRlYWxsb2NhdGlvbiBpcyBub3QgZ3VhcmFudGVlZCBieSB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IuICAoRXZlbiBpbiBDUHl0aG9uCiAgICB0aGlzIGNhbiBiZSB0aGUgY2FzZSBpbiBjYXNlIG9mIHJlZmVyZW5jZSBjeWNsZXMuKSAgVGhpcyBtZWFucyB0aGF0IF9fZGVsX18KICAgIG1ldGhvZHMgbWF5IGJlIGNhbGxlZCBsYXRlciB0aGFuIGV4cGVjdGVkIGFuZCB3ZWFrcmVmcyBtYXkgcmVtYWluIGFsaXZlIGZvcgogICAgbG9uZ2VyIHRoYW4gZXhwZWN0ZWQuICBUaGlzIGZ1bmN0aW9uIHRyaWVzIGl0cyBiZXN0IHRvIGZvcmNlIGFsbCBnYXJiYWdlCiAgICBvYmplY3RzIHRvIGRpc2FwcGVhci4KICAgICIiIgogICAgZ2MuY29sbGVjdCgpCiAgICBpZiBpc19qeXRob246CiAgICAgICAgdGltZS5zbGVlcCgwLjEpCiAgICBnYy5jb2xsZWN0KCkKICAgIGdjLmNvbGxlY3QoKQoKQGNvbnRleHRsaWIuY29udGV4dG1hbmFnZXIKZGVmIGRpc2FibGVfZ2MoKToKICAgIGhhdmVfZ2MgPSBnYy5pc2VuYWJsZWQoKQogICAgZ2MuZGlzYWJsZSgpCiAgICB0cnk6CiAgICAgICAgeWllbGQKICAgIGZpbmFsbHk6CiAgICAgICAgaWYgaGF2ZV9nYzoKICAgICAgICAgICAgZ2MuZW5hYmxlKCkKCgpkZWYgcHl0aG9uX2lzX29wdGltaXplZCgpOgogICAgIiIiRmluZCBpZiBQeXRob24gd2FzIGJ1aWx0IHdpdGggb3B0aW1pemF0aW9ucy4iIiIKICAgIGNmbGFncyA9IHN5c2NvbmZpZy5nZXRfY29uZmlnX3ZhcignUFlfQ0ZMQUdTJykgb3IgJycKICAgIGZpbmFsX29wdCA9ICIiCiAgICBmb3Igb3B0IGluIGNmbGFncy5zcGxpdCgpOgogICAgICAgIGlmIG9wdC5zdGFydHN3aXRoKCctTycpOgogICAgICAgICAgICBmaW5hbF9vcHQgPSBvcHQKICAgIHJldHVybiBmaW5hbF9vcHQgIT0gJycgYW5kIGZpbmFsX29wdCAhPSAnLU8wJwoKCl9oZWFkZXIgPSAnblAnCl9hbGlnbiA9ICcwbicKaWYgaGFzYXR0cihzeXMsICJnZXR0b3RhbHJlZmNvdW50Iik6CiAgICBfaGVhZGVyID0gJzJQJyArIF9oZWFkZXIKICAgIF9hbGlnbiA9ICcwUCcKX3ZoZWFkZXIgPSBfaGVhZGVyICsgJ24nCgpkZWYgY2FsY29ianNpemUoZm10KToKICAgIHJldHVybiBzdHJ1Y3QuY2FsY3NpemUoX2hlYWRlciArIGZtdCArIF9hbGlnbikKCmRlZiBjYWxjdm9ianNpemUoZm10KToKICAgIHJldHVybiBzdHJ1Y3QuY2FsY3NpemUoX3ZoZWFkZXIgKyBmbXQgKyBfYWxpZ24pCgoKX1RQRkxBR1NfSEFWRV9HQyA9IDE8PDE0Cl9UUEZMQUdTX0hFQVBUWVBFID0gMTw8OQoKZGVmIGNoZWNrX3NpemVvZih0ZXN0LCBvLCBzaXplKToKICAgIHJlc3VsdCA9IHN5cy5nZXRzaXplb2YobykKICAgICMgYWRkIEdDIGhlYWRlciBzaXplCiAgICBpZiAoKHR5cGUobykgPT0gdHlwZSkgYW5kIChvLl9fZmxhZ3NfXyAmIF9UUEZMQUdTX0hFQVBUWVBFKSBvclwKICAgICAgICAoKHR5cGUobykgIT0gdHlwZSkgYW5kICh0eXBlKG8pLl9fZmxhZ3NfXyAmIF9UUEZMQUdTX0hBVkVfR0MpKSk6CiAgICAgICAgc2l6ZSArPSBfdGVzdGNhcGkuU0laRU9GX1BZR0NfSEVBRAogICAgbXNnID0gJ3dyb25nIHNpemUgZm9yICVzOiBnb3QgJWQsIGV4cGVjdGVkICVkJyBcCiAgICAgICAgICAgICUgKHR5cGUobyksIHJlc3VsdCwgc2l6ZSkKICAgIHRlc3QuYXNzZXJ0RXF1YWwocmVzdWx0LCBzaXplLCBtc2cpCgojPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBEZWNvcmF0b3IgZm9yIHJ1bm5pbmcgYSBmdW5jdGlvbiBpbiBhIGRpZmZlcmVudCBsb2NhbGUsIGNvcnJlY3RseSByZXNldHRpbmcKIyBpdCBhZnRlcndhcmRzLgoKZGVmIHJ1bl93aXRoX2xvY2FsZShjYXRzdHIsICpsb2NhbGVzKToKICAgIGRlZiBkZWNvcmF0b3IoZnVuYyk6CiAgICAgICAgZGVmIGlubmVyKCphcmdzLCAqKmt3ZHMpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpbXBvcnQgbG9jYWxlCiAgICAgICAgICAgICAgICBjYXRlZ29yeSA9IGdldGF0dHIobG9jYWxlLCBjYXRzdHIpCiAgICAgICAgICAgICAgICBvcmlnX2xvY2FsZSA9IGxvY2FsZS5zZXRsb2NhbGUoY2F0ZWdvcnkpCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgICMgaWYgdGhlIHRlc3QgYXV0aG9yIGdpdmVzIHVzIGFuIGludmFsaWQgY2F0ZWdvcnkgc3RyaW5nCiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAjIGNhbm5vdCByZXRyaWV2ZSBvcmlnaW5hbCBsb2NhbGUsIHNvIGRvIG5vdGhpbmcKICAgICAgICAgICAgICAgIGxvY2FsZSA9IG9yaWdfbG9jYWxlID0gTm9uZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZm9yIGxvYyBpbiBsb2NhbGVzOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlLnNldGxvY2FsZShjYXRlZ29yeSwgbG9jKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgIyBub3cgcnVuIHRoZSBmdW5jdGlvbiwgcmVzZXR0aW5nIHRoZSBsb2NhbGUgb24gZXhjZXB0aW9ucwogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYygqYXJncywgKiprd2RzKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgaWYgbG9jYWxlIGFuZCBvcmlnX2xvY2FsZToKICAgICAgICAgICAgICAgICAgICBsb2NhbGUuc2V0bG9jYWxlKGNhdGVnb3J5LCBvcmlnX2xvY2FsZSkKICAgICAgICBpbm5lci5fX25hbWVfXyA9IGZ1bmMuX19uYW1lX18KICAgICAgICBpbm5lci5fX2RvY19fID0gZnVuYy5fX2RvY19fCiAgICAgICAgcmV0dXJuIGlubmVyCiAgICByZXR1cm4gZGVjb3JhdG9yCgojPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBEZWNvcmF0b3IgZm9yIHJ1bm5pbmcgYSBmdW5jdGlvbiBpbiBhIHNwZWNpZmljIHRpbWV6b25lLCBjb3JyZWN0bHkKIyByZXNldHRpbmcgaXQgYWZ0ZXJ3YXJkcy4KCmRlZiBydW5fd2l0aF90eih0eik6CiAgICBkZWYgZGVjb3JhdG9yKGZ1bmMpOgogICAgICAgIGRlZiBpbm5lcigqYXJncywgKiprd2RzKToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdHpzZXQgPSB0aW1lLnR6c2V0CiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlIHVuaXR0ZXN0LlNraXBUZXN0KCJ0enNldCByZXF1aXJlZCIpCiAgICAgICAgICAgIGlmICdUWicgaW4gb3MuZW52aXJvbjoKICAgICAgICAgICAgICAgIG9yaWdfdHogPSBvcy5lbnZpcm9uWydUWiddCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBvcmlnX3R6ID0gTm9uZQogICAgICAgICAgICBvcy5lbnZpcm9uWydUWiddID0gdHoKICAgICAgICAgICAgdHpzZXQoKQoKICAgICAgICAgICAgIyBub3cgcnVuIHRoZSBmdW5jdGlvbiwgcmVzZXR0aW5nIHRoZSB0eiBvbiBleGNlcHRpb25zCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jKCphcmdzLCAqKmt3ZHMpCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBpZiBvcmlnX3R6IGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgZGVsIG9zLmVudmlyb25bJ1RaJ10KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgb3MuZW52aXJvblsnVFonXSA9IG9yaWdfdHoKICAgICAgICAgICAgICAgIHRpbWUudHpzZXQoKQoKICAgICAgICBpbm5lci5fX25hbWVfXyA9IGZ1bmMuX19uYW1lX18KICAgICAgICBpbm5lci5fX2RvY19fID0gZnVuYy5fX2RvY19fCiAgICAgICAgcmV0dXJuIGlubmVyCiAgICByZXR1cm4gZGVjb3JhdG9yCgojPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBCaWctbWVtb3J5LXRlc3Qgc3VwcG9ydC4gU2VwYXJhdGUgZnJvbSAncmVzb3VyY2VzJyBiZWNhdXNlIG1lbW9yeSB1c2UKIyBzaG91bGQgYmUgY29uZmlndXJhYmxlLgoKIyBTb21lIGhhbmR5IHNob3J0aGFuZHMuIE5vdGUgdGhhdCB0aGVzZSBhcmUgdXNlZCBmb3IgYnl0ZS1saW1pdHMgYXMgd2VsbAojIGFzIHNpemUtbGltaXRzLCBpbiB0aGUgdmFyaW91cyBiaWdtZW0gdGVzdHMKXzFNID0gMTAyNCoxMDI0Cl8xRyA9IDEwMjQgKiBfMU0KXzJHID0gMiAqIF8xRwpfNEcgPSA0ICogXzFHCgpNQVhfUHlfc3NpemVfdCA9IHN5cy5tYXhzaXplCgpkZWYgc2V0X21lbWxpbWl0KGxpbWl0KToKICAgIGdsb2JhbCBtYXhfbWVtdXNlCiAgICBnbG9iYWwgcmVhbF9tYXhfbWVtdXNlCiAgICBzaXplcyA9IHsKICAgICAgICAnayc6IDEwMjQsCiAgICAgICAgJ20nOiBfMU0sCiAgICAgICAgJ2cnOiBfMUcsCiAgICAgICAgJ3QnOiAxMDI0Kl8xRywKICAgIH0KICAgIG0gPSByZS5tYXRjaChyJyhcZCsoXC5cZCspPykgKEt8TXxHfFQpYj8kJywgbGltaXQsCiAgICAgICAgICAgICAgICAgcmUuSUdOT1JFQ0FTRSB8IHJlLlZFUkJPU0UpCiAgICBpZiBtIGlzIE5vbmU6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignSW52YWxpZCBtZW1vcnkgbGltaXQgJXInICUgKGxpbWl0LCkpCiAgICBtZW1saW1pdCA9IGludChmbG9hdChtLmdyb3VwKDEpKSAqIHNpemVzW20uZ3JvdXAoMykubG93ZXIoKV0pCiAgICByZWFsX21heF9tZW11c2UgPSBtZW1saW1pdAogICAgaWYgbWVtbGltaXQgPiBNQVhfUHlfc3NpemVfdDoKICAgICAgICBtZW1saW1pdCA9IE1BWF9QeV9zc2l6ZV90CiAgICBpZiBtZW1saW1pdCA8IF8yRyAtIDE6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignTWVtb3J5IGxpbWl0ICVyIHRvbyBsb3cgdG8gYmUgdXNlZnVsJyAlIChsaW1pdCwpKQogICAgbWF4X21lbXVzZSA9IG1lbWxpbWl0CgpjbGFzcyBfTWVtb3J5V2F0Y2hkb2c6CiAgICAiIiJBbiBvYmplY3Qgd2hpY2ggcGVyaW9kaWNhbGx5IHdhdGNoZXMgdGhlIHByb2Nlc3MnIG1lbW9yeSBjb25zdW1wdGlvbgogICAgYW5kIHByaW50cyBpdCBvdXQuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5wcm9jZmlsZSA9ICcvcHJvYy97cGlkfS9zdGF0bScuZm9ybWF0KHBpZD1vcy5nZXRwaWQoKSkKICAgICAgICBzZWxmLnN0YXJ0ZWQgPSBGYWxzZQoKICAgIGRlZiBzdGFydChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGYgPSBvcGVuKHNlbGYucHJvY2ZpbGUsICdyJykKICAgICAgICBleGNlcHQgT1NFcnJvciBhcyBlOgogICAgICAgICAgICB3YXJuaW5ncy53YXJuKCcvcHJvYyBub3QgYXZhaWxhYmxlIGZvciBzdGF0czoge30nLmZvcm1hdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBSdW50aW1lV2FybmluZykKICAgICAgICAgICAgc3lzLnN0ZGVyci5mbHVzaCgpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB3YXRjaGRvZ19zY3JpcHQgPSBmaW5kZmlsZSgibWVtb3J5X3dhdGNoZG9nLnB5IikKICAgICAgICBzZWxmLm1lbV93YXRjaGRvZyA9IHN1YnByb2Nlc3MuUG9wZW4oW3N5cy5leGVjdXRhYmxlLCB3YXRjaGRvZ19zY3JpcHRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRpbj1mLCBzdGRlcnI9c3VicHJvY2Vzcy5ERVZOVUxMKQogICAgICAgIGYuY2xvc2UoKQogICAgICAgIHNlbGYuc3RhcnRlZCA9IFRydWUKCiAgICBkZWYgc3RvcChzZWxmKToKICAgICAgICBpZiBzZWxmLnN0YXJ0ZWQ6CiAgICAgICAgICAgIHNlbGYubWVtX3dhdGNoZG9nLnRlcm1pbmF0ZSgpCiAgICAgICAgICAgIHNlbGYubWVtX3dhdGNoZG9nLndhaXQoKQoKCmRlZiBiaWdtZW10ZXN0KHNpemUsIG1lbXVzZSwgZHJ5X3J1bj1UcnVlKToKICAgICIiIkRlY29yYXRvciBmb3IgYmlnbWVtIHRlc3RzLgoKICAgICdtaW5zaXplJyBpcyB0aGUgbWluaW11bSB1c2VmdWwgc2l6ZSBmb3IgdGhlIHRlc3QgKGluIGFyYml0cmFyeSwKICAgIHRlc3QtaW50ZXJwcmV0ZWQgdW5pdHMuKSAnbWVtdXNlJyBpcyB0aGUgbnVtYmVyIG9mICdieXRlcyBwZXIgc2l6ZScgZm9yCiAgICB0aGUgdGVzdCwgb3IgYSBnb29kIGVzdGltYXRlIG9mIGl0LgoKICAgIGlmICdkcnlfcnVuJyBpcyBGYWxzZSwgaXQgbWVhbnMgdGhlIHRlc3QgZG9lc24ndCBzdXBwb3J0IGR1bW15IHJ1bnMKICAgIHdoZW4gLU0gaXMgbm90IHNwZWNpZmllZC4KICAgICIiIgogICAgZGVmIGRlY29yYXRvcihmKToKICAgICAgICBkZWYgd3JhcHBlcihzZWxmKToKICAgICAgICAgICAgc2l6ZSA9IHdyYXBwZXIuc2l6ZQogICAgICAgICAgICBtZW11c2UgPSB3cmFwcGVyLm1lbXVzZQogICAgICAgICAgICBpZiBub3QgcmVhbF9tYXhfbWVtdXNlOgogICAgICAgICAgICAgICAgbWF4c2l6ZSA9IDUxNDcKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG1heHNpemUgPSBzaXplCgogICAgICAgICAgICBpZiAoKHJlYWxfbWF4X21lbXVzZSBvciBub3QgZHJ5X3J1bikKICAgICAgICAgICAgICAgIGFuZCByZWFsX21heF9tZW11c2UgPCBtYXhzaXplICogbWVtdXNlKToKICAgICAgICAgICAgICAgIHJhaXNlIHVuaXR0ZXN0LlNraXBUZXN0KAogICAgICAgICAgICAgICAgICAgICJub3QgZW5vdWdoIG1lbW9yeTogJS4xZkcgbWluaW11bSBuZWVkZWQiCiAgICAgICAgICAgICAgICAgICAgJSAoc2l6ZSAqIG1lbXVzZSAvICgxMDI0ICoqIDMpKSkKCiAgICAgICAgICAgIGlmIHJlYWxfbWF4X21lbXVzZSBhbmQgdmVyYm9zZToKICAgICAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgICAgIHByaW50KCIgLi4uIGV4cGVjdGVkIHBlYWsgbWVtb3J5IHVzZToge3BlYWs6LjFmfUciCiAgICAgICAgICAgICAgICAgICAgICAuZm9ybWF0KHBlYWs9c2l6ZSAqIG1lbXVzZSAvICgxMDI0ICoqIDMpKSkKICAgICAgICAgICAgICAgIHdhdGNoZG9nID0gX01lbW9yeVdhdGNoZG9nKCkKICAgICAgICAgICAgICAgIHdhdGNoZG9nLnN0YXJ0KCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHdhdGNoZG9nID0gTm9uZQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIGYoc2VsZiwgbWF4c2l6ZSkKICAgICAgICAgICAgZmluYWxseToKICAgICAgICAgICAgICAgIGlmIHdhdGNoZG9nOgogICAgICAgICAgICAgICAgICAgIHdhdGNoZG9nLnN0b3AoKQoKICAgICAgICB3cmFwcGVyLnNpemUgPSBzaXplCiAgICAgICAgd3JhcHBlci5tZW11c2UgPSBtZW11c2UKICAgICAgICByZXR1cm4gd3JhcHBlcgogICAgcmV0dXJuIGRlY29yYXRvcgoKZGVmIGJpZ2FkZHJzcGFjZXRlc3QoZik6CiAgICAiIiJEZWNvcmF0b3IgZm9yIHRlc3RzIHRoYXQgZmlsbCB0aGUgYWRkcmVzcyBzcGFjZS4iIiIKICAgIGRlZiB3cmFwcGVyKHNlbGYpOgogICAgICAgIGlmIG1heF9tZW11c2UgPCBNQVhfUHlfc3NpemVfdDoKICAgICAgICAgICAgaWYgTUFYX1B5X3NzaXplX3QgPj0gMioqNjMgLSAxIGFuZCBtYXhfbWVtdXNlID49IDIqKjMxOgogICAgICAgICAgICAgICAgcmFpc2UgdW5pdHRlc3QuU2tpcFRlc3QoCiAgICAgICAgICAgICAgICAgICAgIm5vdCBlbm91Z2ggbWVtb3J5OiB0cnkgYSAzMi1iaXQgYnVpbGQgaW5zdGVhZCIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSB1bml0dGVzdC5Ta2lwVGVzdCgKICAgICAgICAgICAgICAgICAgICAibm90IGVub3VnaCBtZW1vcnk6ICUuMWZHIG1pbmltdW0gbmVlZGVkIgogICAgICAgICAgICAgICAgICAgICUgKE1BWF9QeV9zc2l6ZV90IC8gKDEwMjQgKiogMykpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBmKHNlbGYpCiAgICByZXR1cm4gd3JhcHBlcgoKIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgdW5pdHRlc3QgaW50ZWdyYXRpb24uCgpjbGFzcyBCYXNpY1Rlc3RSdW5uZXI6CiAgICBkZWYgcnVuKHNlbGYsIHRlc3QpOgogICAgICAgIHJlc3VsdCA9IHVuaXR0ZXN0LlRlc3RSZXN1bHQoKQogICAgICAgIHRlc3QocmVzdWx0KQogICAgICAgIHJldHVybiByZXN1bHQKCmRlZiBfaWQob2JqKToKICAgIHJldHVybiBvYmoKCmRlZiByZXF1aXJlc19yZXNvdXJjZShyZXNvdXJjZSk6CiAgICBpZiByZXNvdXJjZSA9PSAnZ3VpJyBhbmQgbm90IF9pc19ndWlfYXZhaWxhYmxlKCk6CiAgICAgICAgcmV0dXJuIHVuaXR0ZXN0LnNraXAoInJlc291cmNlICdndWknIGlzIG5vdCBhdmFpbGFibGUiKQogICAgaWYgaXNfcmVzb3VyY2VfZW5hYmxlZChyZXNvdXJjZSk6CiAgICAgICAgcmV0dXJuIF9pZAogICAgZWxzZToKICAgICAgICByZXR1cm4gdW5pdHRlc3Quc2tpcCgicmVzb3VyY2UgezAhcn0gaXMgbm90IGVuYWJsZWQiLmZvcm1hdChyZXNvdXJjZSkpCgpkZWYgY3B5dGhvbl9vbmx5KHRlc3QpOgogICAgIiIiCiAgICBEZWNvcmF0b3IgZm9yIHRlc3RzIG9ubHkgYXBwbGljYWJsZSBvbiBDUHl0aG9uLgogICAgIiIiCiAgICByZXR1cm4gaW1wbF9kZXRhaWwoY3B5dGhvbj1UcnVlKSh0ZXN0KQoKZGVmIGltcGxfZGV0YWlsKG1zZz1Ob25lLCAqKmd1YXJkcyk6CiAgICBpZiBjaGVja19pbXBsX2RldGFpbCgqKmd1YXJkcyk6CiAgICAgICAgcmV0dXJuIF9pZAogICAgaWYgbXNnIGlzIE5vbmU6CiAgICAgICAgZ3VhcmRuYW1lcywgZGVmYXVsdCA9IF9wYXJzZV9ndWFyZHMoZ3VhcmRzKQogICAgICAgIGlmIGRlZmF1bHQ6CiAgICAgICAgICAgIG1zZyA9ICJpbXBsZW1lbnRhdGlvbiBkZXRhaWwgbm90IGF2YWlsYWJsZSBvbiB7MH0iCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbXNnID0gImltcGxlbWVudGF0aW9uIGRldGFpbCBzcGVjaWZpYyB0byB7MH0iCiAgICAgICAgZ3VhcmRuYW1lcyA9IHNvcnRlZChndWFyZG5hbWVzLmtleXMoKSkKICAgICAgICBtc2cgPSBtc2cuZm9ybWF0KCcgb3IgJy5qb2luKGd1YXJkbmFtZXMpKQogICAgcmV0dXJuIHVuaXR0ZXN0LnNraXAobXNnKQoKZGVmIF9wYXJzZV9ndWFyZHMoZ3VhcmRzKToKICAgICMgUmV0dXJucyBhIHR1cGxlICh7cGxhdGZvcm1fbmFtZTogcnVuX21lfSwgZGVmYXVsdF92YWx1ZSkKICAgIGlmIG5vdCBndWFyZHM6CiAgICAgICAgcmV0dXJuICh7J2NweXRob24nOiBUcnVlfSwgRmFsc2UpCiAgICBpc190cnVlID0gbGlzdChndWFyZHMudmFsdWVzKCkpWzBdCiAgICBhc3NlcnQgbGlzdChndWFyZHMudmFsdWVzKCkpID09IFtpc190cnVlXSAqIGxlbihndWFyZHMpICAgIyBhbGwgVHJ1ZSBvciBhbGwgRmFsc2UKICAgIHJldHVybiAoZ3VhcmRzLCBub3QgaXNfdHJ1ZSkKCiMgVXNlIHRoZSBmb2xsb3dpbmcgY2hlY2sgdG8gZ3VhcmQgQ1B5dGhvbidzIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIHRlc3RzIC0tCiMgb3IgdG8gcnVuIHRoZW0gb25seSBvbiB0aGUgaW1wbGVtZW50YXRpb24ocykgZ3VhcmRlZCBieSB0aGUgYXJndW1lbnRzLgpkZWYgY2hlY2tfaW1wbF9kZXRhaWwoKipndWFyZHMpOgogICAgIiIiVGhpcyBmdW5jdGlvbiByZXR1cm5zIFRydWUgb3IgRmFsc2UgZGVwZW5kaW5nIG9uIHRoZSBob3N0IHBsYXRmb3JtLgogICAgICAgRXhhbXBsZXM6CiAgICAgICAgICBpZiBjaGVja19pbXBsX2RldGFpbCgpOiAgICAgICAgICAgICAgICMgb25seSBvbiBDUHl0aG9uIChkZWZhdWx0KQogICAgICAgICAgaWYgY2hlY2tfaW1wbF9kZXRhaWwoanl0aG9uPVRydWUpOiAgICAjIG9ubHkgb24gSnl0aG9uCiAgICAgICAgICBpZiBjaGVja19pbXBsX2RldGFpbChjcHl0aG9uPUZhbHNlKTogICMgZXZlcnl3aGVyZSBleGNlcHQgb24gQ1B5dGhvbgogICAgIiIiCiAgICBndWFyZHMsIGRlZmF1bHQgPSBfcGFyc2VfZ3VhcmRzKGd1YXJkcykKICAgIHJldHVybiBndWFyZHMuZ2V0KHBsYXRmb3JtLnB5dGhvbl9pbXBsZW1lbnRhdGlvbigpLmxvd2VyKCksIGRlZmF1bHQpCgoKZGVmIG5vX3RyYWNpbmcoZnVuYyk6CiAgICAiIiJEZWNvcmF0b3IgdG8gdGVtcG9yYXJpbHkgdHVybiBvZmYgdHJhY2luZyBmb3IgdGhlIGR1cmF0aW9uIG9mIGEgdGVzdC4iIiIKICAgIGlmIG5vdCBoYXNhdHRyKHN5cywgJ2dldHRyYWNlJyk6CiAgICAgICAgcmV0dXJuIGZ1bmMKICAgIGVsc2U6CiAgICAgICAgQGZ1bmN0b29scy53cmFwcyhmdW5jKQogICAgICAgIGRlZiB3cmFwcGVyKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgICAgIG9yaWdpbmFsX3RyYWNlID0gc3lzLmdldHRyYWNlKCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc3lzLnNldHRyYWNlKE5vbmUpCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYygqYXJncywgKiprd2FyZ3MpCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBzeXMuc2V0dHJhY2Uob3JpZ2luYWxfdHJhY2UpCiAgICAgICAgcmV0dXJuIHdyYXBwZXIKCgpkZWYgcmVmY291bnRfdGVzdCh0ZXN0KToKICAgICIiIkRlY29yYXRvciBmb3IgdGVzdHMgd2hpY2ggaW52b2x2ZSByZWZlcmVuY2UgY291bnRpbmcuCgogICAgVG8gc3RhcnQsIHRoZSBkZWNvcmF0b3IgZG9lcyBub3QgcnVuIHRoZSB0ZXN0IGlmIGlzIG5vdCBydW4gYnkgQ1B5dGhvbi4KICAgIEFmdGVyIHRoYXQsIGFueSB0cmFjZSBmdW5jdGlvbiBpcyB1bnNldCBkdXJpbmcgdGhlIHRlc3QgdG8gcHJldmVudAogICAgdW5leHBlY3RlZCByZWZjb3VudHMgY2F1c2VkIGJ5IHRoZSB0cmFjZSBmdW5jdGlvbi4KCiAgICAiIiIKICAgIHJldHVybiBub190cmFjaW5nKGNweXRob25fb25seSh0ZXN0KSkKCgpkZWYgX2ZpbHRlcl9zdWl0ZShzdWl0ZSwgcHJlZCk6CiAgICAiIiJSZWN1cnNpdmVseSBmaWx0ZXIgdGVzdCBjYXNlcyBpbiBhIHN1aXRlIGJhc2VkIG9uIGEgcHJlZGljYXRlLiIiIgogICAgbmV3dGVzdHMgPSBbXQogICAgZm9yIHRlc3QgaW4gc3VpdGUuX3Rlc3RzOgogICAgICAgIGlmIGlzaW5zdGFuY2UodGVzdCwgdW5pdHRlc3QuVGVzdFN1aXRlKToKICAgICAgICAgICAgX2ZpbHRlcl9zdWl0ZSh0ZXN0LCBwcmVkKQogICAgICAgICAgICBuZXd0ZXN0cy5hcHBlbmQodGVzdCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBwcmVkKHRlc3QpOgogICAgICAgICAgICAgICAgbmV3dGVzdHMuYXBwZW5kKHRlc3QpCiAgICBzdWl0ZS5fdGVzdHMgPSBuZXd0ZXN0cwoKZGVmIF9ydW5fc3VpdGUoc3VpdGUpOgogICAgIiIiUnVuIHRlc3RzIGZyb20gYSB1bml0dGVzdC5UZXN0U3VpdGUtZGVyaXZlZCBjbGFzcy4iIiIKICAgIGlmIHZlcmJvc2U6CiAgICAgICAgcnVubmVyID0gdW5pdHRlc3QuVGV4dFRlc3RSdW5uZXIoc3lzLnN0ZG91dCwgdmVyYm9zaXR5PTIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGZhc3Q9ZmFpbGZhc3QpCiAgICBlbHNlOgogICAgICAgIHJ1bm5lciA9IEJhc2ljVGVzdFJ1bm5lcigpCgogICAgcmVzdWx0ID0gcnVubmVyLnJ1bihzdWl0ZSkKICAgIGlmIG5vdCByZXN1bHQud2FzU3VjY2Vzc2Z1bCgpOgogICAgICAgIGlmIGxlbihyZXN1bHQuZXJyb3JzKSA9PSAxIGFuZCBub3QgcmVzdWx0LmZhaWx1cmVzOgogICAgICAgICAgICBlcnIgPSByZXN1bHQuZXJyb3JzWzBdWzFdCiAgICAgICAgZWxpZiBsZW4ocmVzdWx0LmZhaWx1cmVzKSA9PSAxIGFuZCBub3QgcmVzdWx0LmVycm9yczoKICAgICAgICAgICAgZXJyID0gcmVzdWx0LmZhaWx1cmVzWzBdWzFdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZXJyID0gIm11bHRpcGxlIGVycm9ycyBvY2N1cnJlZCIKICAgICAgICAgICAgaWYgbm90IHZlcmJvc2U6IGVyciArPSAiOyBydW4gaW4gdmVyYm9zZSBtb2RlIGZvciBkZXRhaWxzIgogICAgICAgIHJhaXNlIFRlc3RGYWlsZWQoZXJyKQoKCmRlZiBydW5fdW5pdHRlc3QoKmNsYXNzZXMpOgogICAgIiIiUnVuIHRlc3RzIGZyb20gdW5pdHRlc3QuVGVzdENhc2UtZGVyaXZlZCBjbGFzc2VzLiIiIgogICAgdmFsaWRfdHlwZXMgPSAodW5pdHRlc3QuVGVzdFN1aXRlLCB1bml0dGVzdC5UZXN0Q2FzZSkKICAgIHN1aXRlID0gdW5pdHRlc3QuVGVzdFN1aXRlKCkKICAgIGZvciBjbHMgaW4gY2xhc3NlczoKICAgICAgICBpZiBpc2luc3RhbmNlKGNscywgc3RyKToKICAgICAgICAgICAgaWYgY2xzIGluIHN5cy5tb2R1bGVzOgogICAgICAgICAgICAgICAgc3VpdGUuYWRkVGVzdCh1bml0dGVzdC5maW5kVGVzdENhc2VzKHN5cy5tb2R1bGVzW2Nsc10pKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigic3RyIGFyZ3VtZW50cyBtdXN0IGJlIGtleXMgaW4gc3lzLm1vZHVsZXMiKQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShjbHMsIHZhbGlkX3R5cGVzKToKICAgICAgICAgICAgc3VpdGUuYWRkVGVzdChjbHMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc3VpdGUuYWRkVGVzdCh1bml0dGVzdC5tYWtlU3VpdGUoY2xzKSkKICAgIGRlZiBjYXNlX3ByZWQodGVzdCk6CiAgICAgICAgaWYgbWF0Y2hfdGVzdHMgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBmb3IgbmFtZSBpbiB0ZXN0LmlkKCkuc3BsaXQoIi4iKToKICAgICAgICAgICAgaWYgZm5tYXRjaC5mbm1hdGNoY2FzZShuYW1lLCBtYXRjaF90ZXN0cyk6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIHJldHVybiBGYWxzZQogICAgX2ZpbHRlcl9zdWl0ZShzdWl0ZSwgY2FzZV9wcmVkKQogICAgX3J1bl9zdWl0ZShzdWl0ZSkKCiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIENoZWNrIGZvciB0aGUgcHJlc2VuY2Ugb2YgZG9jc3RyaW5ncy4KCkhBVkVfRE9DU1RSSU5HUyA9IChjaGVja19pbXBsX2RldGFpbChjcHl0aG9uPUZhbHNlKSBvcgogICAgICAgICAgICAgICAgICAgc3lzLnBsYXRmb3JtID09ICd3aW4zMicgb3IKICAgICAgICAgICAgICAgICAgIHN5c2NvbmZpZy5nZXRfY29uZmlnX3ZhcignV0lUSF9ET0NfU1RSSU5HUycpKQoKcmVxdWlyZXNfZG9jc3RyaW5ncyA9IHVuaXR0ZXN0LnNraXBVbmxlc3MoSEFWRV9ET0NTVFJJTkdTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidGVzdCByZXF1aXJlcyBkb2NzdHJpbmdzIikKCgojPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBkb2N0ZXN0IGRyaXZlci4KCmRlZiBydW5fZG9jdGVzdChtb2R1bGUsIHZlcmJvc2l0eT1Ob25lLCBvcHRpb25mbGFncz0wKToKICAgICIiIlJ1biBkb2N0ZXN0IG9uIHRoZSBnaXZlbiBtb2R1bGUuICBSZXR1cm4gKCNmYWlsdXJlcywgI3Rlc3RzKS4KCiAgICBJZiBvcHRpb25hbCBhcmd1bWVudCB2ZXJib3NpdHkgaXMgbm90IHNwZWNpZmllZCAob3IgaXMgTm9uZSksIHBhc3MKICAgIHN1cHBvcnQncyBiZWxpZWYgYWJvdXQgdmVyYm9zaXR5IG9uIHRvIGRvY3Rlc3QuICBFbHNlIGRvY3Rlc3QncwogICAgdXN1YWwgYmVoYXZpb3IgaXMgdXNlZCAoaXQgc2VhcmNoZXMgc3lzLmFyZ3YgZm9yIC12KS4KICAgICIiIgoKICAgIGltcG9ydCBkb2N0ZXN0CgogICAgaWYgdmVyYm9zaXR5IGlzIE5vbmU6CiAgICAgICAgdmVyYm9zaXR5ID0gdmVyYm9zZQogICAgZWxzZToKICAgICAgICB2ZXJib3NpdHkgPSBOb25lCgogICAgZiwgdCA9IGRvY3Rlc3QudGVzdG1vZChtb2R1bGUsIHZlcmJvc2U9dmVyYm9zaXR5LCBvcHRpb25mbGFncz1vcHRpb25mbGFncykKICAgIGlmIGY6CiAgICAgICAgcmFpc2UgVGVzdEZhaWxlZCgiJWQgb2YgJWQgZG9jdGVzdHMgZmFpbGVkIiAlIChmLCB0KSkKICAgIGlmIHZlcmJvc2U6CiAgICAgICAgcHJpbnQoJ2RvY3Rlc3QgKCVzKSAuLi4gJWQgdGVzdHMgd2l0aCB6ZXJvIGZhaWx1cmVzJyAlCiAgICAgICAgICAgICAgKG1vZHVsZS5fX25hbWVfXywgdCkpCiAgICByZXR1cm4gZiwgdAoKCiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIFN1cHBvcnQgZm9yIHNhdmluZyBhbmQgcmVzdG9yaW5nIHRoZSBpbXBvcnRlZCBtb2R1bGVzLgoKZGVmIG1vZHVsZXNfc2V0dXAoKToKICAgIHJldHVybiBzeXMubW9kdWxlcy5jb3B5KCksCgpkZWYgbW9kdWxlc19jbGVhbnVwKG9sZG1vZHVsZXMpOgogICAgIyBFbmNvZGVycy9kZWNvZGVycyBhcmUgcmVnaXN0ZXJlZCBwZXJtYW5lbnRseSB3aXRoaW4gdGhlIGludGVybmFsCiAgICAjIGNvZGVjIGNhY2hlLiBJZiB3ZSBkZXN0cm95IHRoZSBjb3JyZXNwb25kaW5nIG1vZHVsZXMgdGhlaXIKICAgICMgZ2xvYmFscyB3aWxsIGJlIHNldCB0byBOb25lIHdoaWNoIHdpbGwgdHJpcCB1cCB0aGUgY2FjaGVkIGZ1bmN0aW9ucy4KICAgIGVuY29kaW5ncyA9IFsoaywgdikgZm9yIGssIHYgaW4gc3lzLm1vZHVsZXMuaXRlbXMoKQogICAgICAgICAgICAgICAgIGlmIGsuc3RhcnRzd2l0aCgnZW5jb2RpbmdzLicpXQogICAgc3lzLm1vZHVsZXMuY2xlYXIoKQogICAgc3lzLm1vZHVsZXMudXBkYXRlKGVuY29kaW5ncykKICAgICMgWFhYOiBUaGlzIGtpbmQgb2YgcHJvYmxlbSBjYW4gYWZmZWN0IG1vcmUgdGhhbiBqdXN0IGVuY29kaW5ncy4gSW4gcGFydGljdWxhcgogICAgIyBleHRlbnNpb24gbW9kdWxlcyAoc3VjaCBhcyBfc3NsKSBkb24ndCBjb3BlIHdpdGggcmVsb2FkaW5nIHByb3Blcmx5LgogICAgIyBSZWFsbHksIHRlc3QgbW9kdWxlcyBzaG91bGQgYmUgY2xlYW5pbmcgb3V0IHRoZSB0ZXN0IHNwZWNpZmljIG1vZHVsZXMgdGhleQogICAgIyBrbm93IHRoZXkgYWRkZWQgKGFsYSB0ZXN0X3J1bnB5KSByYXRoZXIgdGhhbiByZWx5aW5nIG9uIHRoaXMgZnVuY3Rpb24gKGFzCiAgICAjIHRlc3RfaW1wb3J0aG9va3MgYW5kIHRlc3RfcGtnIGRvIGN1cnJlbnRseSkuCiAgICAjIEltcGxpY2l0bHkgaW1wb3J0ZWQgKnJlYWwqIG1vZHVsZXMgc2hvdWxkIGJlIGxlZnQgYWxvbmUgKHNlZSBpc3N1ZSAxMDU1NikuCiAgICBzeXMubW9kdWxlcy51cGRhdGUob2xkbW9kdWxlcykKCiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIFRocmVhZGluZyBzdXBwb3J0IHRvIHByZXZlbnQgcmVwb3J0aW5nIHJlZmxlYWtzIHdoZW4gcnVubmluZyByZWdydGVzdC5weSAtUgoKIyBOT1RFOiB3ZSB1c2UgdGhyZWFkLl9jb3VudCgpIHJhdGhlciB0aGFuIHRocmVhZGluZy5lbnVtZXJhdGUoKSAob3IgdGhlCiMgbW9yYWwgZXF1aXZhbGVudCB0aGVyZW9mKSBiZWNhdXNlIGEgdGhyZWFkaW5nLlRocmVhZCBvYmplY3QgaXMgc3RpbGwgYWxpdmUKIyB1bnRpbCBpdHMgX19ib290c3RyYXAoKSBtZXRob2QgaGFzIHJldHVybmVkLCBldmVuIGFmdGVyIGl0IGhhcyBiZWVuCiMgdW5yZWdpc3RlcmVkIGZyb20gdGhlIHRocmVhZGluZyBtb2R1bGUuCiMgdGhyZWFkLl9jb3VudCgpLCBvbiB0aGUgb3RoZXIgaGFuZCwgb25seSBnZXRzIGRlY3JlbWVudGVkICphZnRlciogdGhlCiMgX19ib290c3RyYXAoKSBtZXRob2QgaGFzIHJldHVybmVkLCB3aGljaCBnaXZlcyB1cyByZWxpYWJsZSByZWZlcmVuY2UgY291bnRzCiMgYXQgdGhlIGVuZCBvZiBhIHRlc3QgcnVuLgoKZGVmIHRocmVhZGluZ19zZXR1cCgpOgogICAgaWYgX3RocmVhZDoKICAgICAgICByZXR1cm4gX3RocmVhZC5fY291bnQoKSwgdGhyZWFkaW5nLl9kYW5nbGluZy5jb3B5KCkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIDEsICgpCgpkZWYgdGhyZWFkaW5nX2NsZWFudXAoKm9yaWdpbmFsX3ZhbHVlcyk6CiAgICBpZiBub3QgX3RocmVhZDoKICAgICAgICByZXR1cm4KICAgIF9NQVhfQ09VTlQgPSAxMAogICAgZm9yIGNvdW50IGluIHJhbmdlKF9NQVhfQ09VTlQpOgogICAgICAgIHZhbHVlcyA9IF90aHJlYWQuX2NvdW50KCksIHRocmVhZGluZy5fZGFuZ2xpbmcKICAgICAgICBpZiB2YWx1ZXMgPT0gb3JpZ2luYWxfdmFsdWVzOgogICAgICAgICAgICBicmVhawogICAgICAgIHRpbWUuc2xlZXAoMC4xKQogICAgICAgIGdjX2NvbGxlY3QoKQogICAgIyBYWFggcHJpbnQgYSB3YXJuaW5nIGluIGNhc2Ugb2YgZmFpbHVyZT8KCmRlZiByZWFwX3RocmVhZHMoZnVuYyk6CiAgICAiIiJVc2UgdGhpcyBmdW5jdGlvbiB3aGVuIHRocmVhZHMgYXJlIGJlaW5nIHVzZWQuICBUaGlzIHdpbGwKICAgIGVuc3VyZSB0aGF0IHRoZSB0aHJlYWRzIGFyZSBjbGVhbmVkIHVwIGV2ZW4gd2hlbiB0aGUgdGVzdCBmYWlscy4KICAgIElmIHRocmVhZGluZyBpcyB1bmF2YWlsYWJsZSB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90aGluZy4KICAgICIiIgogICAgaWYgbm90IF90aHJlYWQ6CiAgICAgICAgcmV0dXJuIGZ1bmMKCiAgICBAZnVuY3Rvb2xzLndyYXBzKGZ1bmMpCiAgICBkZWYgZGVjb3JhdG9yKCphcmdzKToKICAgICAgICBrZXkgPSB0aHJlYWRpbmdfc2V0dXAoKQogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIGZ1bmMoKmFyZ3MpCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgdGhyZWFkaW5nX2NsZWFudXAoKmtleSkKICAgIHJldHVybiBkZWNvcmF0b3IKCmRlZiByZWFwX2NoaWxkcmVuKCk6CiAgICAiIiJVc2UgdGhpcyBmdW5jdGlvbiBhdCB0aGUgZW5kIG9mIHRlc3RfbWFpbigpIHdoZW5ldmVyIHN1Yi1wcm9jZXNzZXMKICAgIGFyZSBzdGFydGVkLiAgVGhpcyB3aWxsIGhlbHAgZW5zdXJlIHRoYXQgbm8gZXh0cmEgY2hpbGRyZW4gKHpvbWJpZXMpCiAgICBzdGljayBhcm91bmQgdG8gaG9nIHJlc291cmNlcyBhbmQgY3JlYXRlIHByb2JsZW1zIHdoZW4gbG9va2luZwogICAgZm9yIHJlZmxlYWtzLgogICAgIiIiCgogICAgIyBSZWFwIGFsbCBvdXIgZGVhZCBjaGlsZCBwcm9jZXNzZXMgc28gd2UgZG9uJ3QgbGVhdmUgem9tYmllcyBhcm91bmQuCiAgICAjIFRoZXNlIGhvZyByZXNvdXJjZXMgYW5kIG1pZ2h0IGJlIGNhdXNpbmcgc29tZSBvZiB0aGUgYnVpbGRib3RzIHRvIGRpZS4KICAgIGlmIGhhc2F0dHIob3MsICd3YWl0cGlkJyk6CiAgICAgICAgYW55X3Byb2Nlc3MgPSAtMQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICMgVGhpcyB3aWxsIHJhaXNlIGFuIGV4Y2VwdGlvbiBvbiBXaW5kb3dzLiAgVGhhdCdzIG9rLgogICAgICAgICAgICAgICAgcGlkLCBzdGF0dXMgPSBvcy53YWl0cGlkKGFueV9wcm9jZXNzLCBvcy5XTk9IQU5HKQogICAgICAgICAgICAgICAgaWYgcGlkID09IDA6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgYnJlYWsKCkBjb250ZXh0bGliLmNvbnRleHRtYW5hZ2VyCmRlZiBzd2FwX2F0dHIob2JqLCBhdHRyLCBuZXdfdmFsKToKICAgICIiIlRlbXBvcmFyeSBzd2FwIG91dCBhbiBhdHRyaWJ1dGUgd2l0aCBhIG5ldyBvYmplY3QuCgogICAgVXNhZ2U6CiAgICAgICAgd2l0aCBzd2FwX2F0dHIob2JqLCAiYXR0ciIsIDUpOgogICAgICAgICAgICAuLi4KCiAgICAgICAgVGhpcyB3aWxsIHNldCBvYmouYXR0ciB0byA1IGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIHdpdGg6IGJsb2NrLAogICAgICAgIHJlc3RvcmluZyB0aGUgb2xkIHZhbHVlIGF0IHRoZSBlbmQgb2YgdGhlIGJsb2NrLiBJZiBgYXR0cmAgZG9lc24ndAogICAgICAgIGV4aXN0IG9uIGBvYmpgLCBpdCB3aWxsIGJlIGNyZWF0ZWQgYW5kIHRoZW4gZGVsZXRlZCBhdCB0aGUgZW5kIG9mIHRoZQogICAgICAgIGJsb2NrLgogICAgIiIiCiAgICBpZiBoYXNhdHRyKG9iaiwgYXR0cik6CiAgICAgICAgcmVhbF92YWwgPSBnZXRhdHRyKG9iaiwgYXR0cikKICAgICAgICBzZXRhdHRyKG9iaiwgYXR0ciwgbmV3X3ZhbCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHlpZWxkCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgc2V0YXR0cihvYmosIGF0dHIsIHJlYWxfdmFsKQogICAgZWxzZToKICAgICAgICBzZXRhdHRyKG9iaiwgYXR0ciwgbmV3X3ZhbCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHlpZWxkCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgZGVsYXR0cihvYmosIGF0dHIpCgpAY29udGV4dGxpYi5jb250ZXh0bWFuYWdlcgpkZWYgc3dhcF9pdGVtKG9iaiwgaXRlbSwgbmV3X3ZhbCk6CiAgICAiIiJUZW1wb3Jhcnkgc3dhcCBvdXQgYW4gaXRlbSB3aXRoIGEgbmV3IG9iamVjdC4KCiAgICBVc2FnZToKICAgICAgICB3aXRoIHN3YXBfaXRlbShvYmosICJpdGVtIiwgNSk6CiAgICAgICAgICAgIC4uLgoKICAgICAgICBUaGlzIHdpbGwgc2V0IG9ialsiaXRlbSJdIHRvIDUgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgd2l0aDogYmxvY2ssCiAgICAgICAgcmVzdG9yaW5nIHRoZSBvbGQgdmFsdWUgYXQgdGhlIGVuZCBvZiB0aGUgYmxvY2suIElmIGBpdGVtYCBkb2Vzbid0CiAgICAgICAgZXhpc3Qgb24gYG9iamAsIGl0IHdpbGwgYmUgY3JlYXRlZCBhbmQgdGhlbiBkZWxldGVkIGF0IHRoZSBlbmQgb2YgdGhlCiAgICAgICAgYmxvY2suCiAgICAiIiIKICAgIGlmIGl0ZW0gaW4gb2JqOgogICAgICAgIHJlYWxfdmFsID0gb2JqW2l0ZW1dCiAgICAgICAgb2JqW2l0ZW1dID0gbmV3X3ZhbAogICAgICAgIHRyeToKICAgICAgICAgICAgeWllbGQKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICBvYmpbaXRlbV0gPSByZWFsX3ZhbAogICAgZWxzZToKICAgICAgICBvYmpbaXRlbV0gPSBuZXdfdmFsCiAgICAgICAgdHJ5OgogICAgICAgICAgICB5aWVsZAogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIGRlbCBvYmpbaXRlbV0KCmRlZiBzdHJpcF9weXRob25fc3RkZXJyKHN0ZGVycik6CiAgICAiIiJTdHJpcCB0aGUgc3RkZXJyIG9mIGEgUHl0aG9uIHByb2Nlc3MgZnJvbSBwb3RlbnRpYWwgZGVidWcgb3V0cHV0CiAgICBlbWl0dGVkIGJ5IHRoZSBpbnRlcnByZXRlci4KCiAgICBUaGlzIHdpbGwgdHlwaWNhbGx5IGJlIHJ1biBvbiB0aGUgcmVzdWx0IG9mIHRoZSBjb21tdW5pY2F0ZSgpIG1ldGhvZAogICAgb2YgYSBzdWJwcm9jZXNzLlBvcGVuIG9iamVjdC4KICAgICIiIgogICAgc3RkZXJyID0gcmUuc3ViKGJyIlxbXGQrIHJlZnNcXVxyP1xuPyIsIGIiIiwgc3RkZXJyKS5zdHJpcCgpCiAgICByZXR1cm4gc3RkZXJyCgpkZWYgYXJnc19mcm9tX2ludGVycHJldGVyX2ZsYWdzKCk6CiAgICAiIiJSZXR1cm4gYSBsaXN0IG9mIGNvbW1hbmQtbGluZSBhcmd1bWVudHMgcmVwcm9kdWNpbmcgdGhlIGN1cnJlbnQKICAgIHNldHRpbmdzIGluIHN5cy5mbGFncyBhbmQgc3lzLndhcm5vcHRpb25zLiIiIgogICAgcmV0dXJuIHN1YnByb2Nlc3MuX2FyZ3NfZnJvbV9pbnRlcnByZXRlcl9mbGFncygpCgojPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgU3VwcG9ydCBmb3IgYXNzZXJ0aW9ucyBhYm91dCBsb2dnaW5nLgojPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpjbGFzcyBUZXN0SGFuZGxlcihsb2dnaW5nLmhhbmRsZXJzLkJ1ZmZlcmluZ0hhbmRsZXIpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1hdGNoZXIpOgogICAgICAgICMgQnVmZmVyaW5nSGFuZGxlciB0YWtlcyBhICJjYXBhY2l0eSIgYXJndW1lbnQKICAgICAgICAjIHNvIGFzIHRvIGtub3cgd2hlbiB0byBmbHVzaC4gQXMgd2UncmUgb3ZlcnJpZGluZwogICAgICAgICMgc2hvdWxkRmx1c2ggYW55d2F5LCB3ZSBjYW4gc2V0IGEgY2FwYWNpdHkgb2YgemVyby4KICAgICAgICAjIFlvdSBjYW4gY2FsbCBmbHVzaCgpIG1hbnVhbGx5IHRvIGNsZWFyIG91dCB0aGUKICAgICAgICAjIGJ1ZmZlci4KICAgICAgICBsb2dnaW5nLmhhbmRsZXJzLkJ1ZmZlcmluZ0hhbmRsZXIuX19pbml0X18oc2VsZiwgMCkKICAgICAgICBzZWxmLm1hdGNoZXIgPSBtYXRjaGVyCgogICAgZGVmIHNob3VsZEZsdXNoKHNlbGYpOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBlbWl0KHNlbGYsIHJlY29yZCk6CiAgICAgICAgc2VsZi5mb3JtYXQocmVjb3JkKQogICAgICAgIHNlbGYuYnVmZmVyLmFwcGVuZChyZWNvcmQuX19kaWN0X18pCgogICAgZGVmIG1hdGNoZXMoc2VsZiwgKiprd2FyZ3MpOgogICAgICAgICIiIgogICAgICAgIExvb2sgZm9yIGEgc2F2ZWQgZGljdCB3aG9zZSBrZXlzL3ZhbHVlcyBtYXRjaCB0aGUgc3VwcGxpZWQgYXJndW1lbnRzLgogICAgICAgICIiIgogICAgICAgIHJlc3VsdCA9IEZhbHNlCiAgICAgICAgZm9yIGQgaW4gc2VsZi5idWZmZXI6CiAgICAgICAgICAgIGlmIHNlbGYubWF0Y2hlci5tYXRjaGVzKGQsICoqa3dhcmdzKToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IFRydWUKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKY2xhc3MgTWF0Y2hlcihvYmplY3QpOgoKICAgIF9wYXJ0aWFsX21hdGNoZXMgPSAoJ21zZycsICdtZXNzYWdlJykKCiAgICBkZWYgbWF0Y2hlcyhzZWxmLCBkLCAqKmt3YXJncyk6CiAgICAgICAgIiIiCiAgICAgICAgVHJ5IHRvIG1hdGNoIGEgc2luZ2xlIGRpY3Qgd2l0aCB0aGUgc3VwcGxpZWQgYXJndW1lbnRzLgoKICAgICAgICBLZXlzIHdob3NlIHZhbHVlcyBhcmUgc3RyaW5ncyBhbmQgd2hpY2ggYXJlIGluIHNlbGYuX3BhcnRpYWxfbWF0Y2hlcwogICAgICAgIHdpbGwgYmUgY2hlY2tlZCBmb3IgcGFydGlhbCAoaS5lLiBzdWJzdHJpbmcpIG1hdGNoZXMuIFlvdSBjYW4gZXh0ZW5kCiAgICAgICAgdGhpcyBzY2hlbWUgdG8gKGZvciBleGFtcGxlKSBkbyByZWd1bGFyIGV4cHJlc3Npb24gbWF0Y2hpbmcsIGV0Yy4KICAgICAgICAiIiIKICAgICAgICByZXN1bHQgPSBUcnVlCiAgICAgICAgZm9yIGsgaW4ga3dhcmdzOgogICAgICAgICAgICB2ID0ga3dhcmdzW2tdCiAgICAgICAgICAgIGR2ID0gZC5nZXQoaykKICAgICAgICAgICAgaWYgbm90IHNlbGYubWF0Y2hfdmFsdWUoaywgZHYsIHYpOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gRmFsc2UKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBtYXRjaF92YWx1ZShzZWxmLCBrLCBkdiwgdik6CiAgICAgICAgIiIiCiAgICAgICAgVHJ5IHRvIG1hdGNoIGEgc2luZ2xlIHN0b3JlZCB2YWx1ZSAoZHYpIHdpdGggYSBzdXBwbGllZCB2YWx1ZSAodikuCiAgICAgICAgIiIiCiAgICAgICAgaWYgdHlwZSh2KSAhPSB0eXBlKGR2KToKICAgICAgICAgICAgcmVzdWx0ID0gRmFsc2UKICAgICAgICBlbGlmIHR5cGUoZHYpIGlzIG5vdCBzdHIgb3IgayBub3QgaW4gc2VsZi5fcGFydGlhbF9tYXRjaGVzOgogICAgICAgICAgICByZXN1bHQgPSAodiA9PSBkdikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXN1bHQgPSBkdi5maW5kKHYpID49IDAKICAgICAgICByZXR1cm4gcmVzdWx0CgoKX2Nhbl9zeW1saW5rID0gTm9uZQpkZWYgY2FuX3N5bWxpbmsoKToKICAgIGdsb2JhbCBfY2FuX3N5bWxpbmsKICAgIGlmIF9jYW5fc3ltbGluayBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gX2Nhbl9zeW1saW5rCiAgICBzeW1saW5rX3BhdGggPSBURVNURk4gKyAiY2FuX3N5bWxpbmsiCiAgICB0cnk6CiAgICAgICAgb3Muc3ltbGluayhURVNURk4sIHN5bWxpbmtfcGF0aCkKICAgICAgICBjYW4gPSBUcnVlCiAgICBleGNlcHQgKE9TRXJyb3IsIE5vdEltcGxlbWVudGVkRXJyb3IsIEF0dHJpYnV0ZUVycm9yKToKICAgICAgICBjYW4gPSBGYWxzZQogICAgZWxzZToKICAgICAgICBvcy5yZW1vdmUoc3ltbGlua19wYXRoKQogICAgX2Nhbl9zeW1saW5rID0gY2FuCiAgICByZXR1cm4gY2FuCgpkZWYgc2tpcF91bmxlc3Nfc3ltbGluayh0ZXN0KToKICAgICIiIlNraXAgZGVjb3JhdG9yIGZvciB0ZXN0cyB0aGF0IHJlcXVpcmUgZnVuY3Rpb25hbCBzeW1saW5rIiIiCiAgICBvayA9IGNhbl9zeW1saW5rKCkKICAgIG1zZyA9ICJSZXF1aXJlcyBmdW5jdGlvbmFsIHN5bWxpbmsgaW1wbGVtZW50YXRpb24iCiAgICByZXR1cm4gdGVzdCBpZiBvayBlbHNlIHVuaXR0ZXN0LnNraXAobXNnKSh0ZXN0KQoKX2Nhbl94YXR0ciA9IE5vbmUKZGVmIGNhbl94YXR0cigpOgogICAgZ2xvYmFsIF9jYW5feGF0dHIKICAgIGlmIF9jYW5feGF0dHIgaXMgbm90IE5vbmU6CiAgICAgICAgcmV0dXJuIF9jYW5feGF0dHIKICAgIGlmIG5vdCBoYXNhdHRyKG9zLCAic2V0eGF0dHIiKToKICAgICAgICBjYW4gPSBGYWxzZQogICAgZWxzZToKICAgICAgICB0bXBfZnAsIHRtcF9uYW1lID0gdGVtcGZpbGUubWtzdGVtcCgpCiAgICAgICAgdHJ5OgogICAgICAgICAgICB3aXRoIG9wZW4oVEVTVEZOLCAid2IiKSBhcyBmcDoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAjIFRFU1RGTiAmIHRlbXBmaWxlIG1heSB1c2UgZGlmZmVyZW50IGZpbGUgc3lzdGVtcyB3aXRoCiAgICAgICAgICAgICAgICAgICAgIyBkaWZmZXJlbnQgY2FwYWJpbGl0aWVzCiAgICAgICAgICAgICAgICAgICAgb3Muc2V0eGF0dHIodG1wX2ZwLCBiInVzZXIudGVzdCIsIGIiIikKICAgICAgICAgICAgICAgICAgICBvcy5zZXR4YXR0cihmcC5maWxlbm8oKSwgYiJ1c2VyLnRlc3QiLCBiIiIpCiAgICAgICAgICAgICAgICAgICAgIyBLZXJuZWxzIDwgMi42LjM5IGRvbid0IHJlc3BlY3Qgc2V0eGF0dHIgZmxhZ3MuCiAgICAgICAgICAgICAgICAgICAga2VybmVsX3ZlcnNpb24gPSBwbGF0Zm9ybS5yZWxlYXNlKCkKICAgICAgICAgICAgICAgICAgICBtID0gcmUubWF0Y2goIjIuNi4oXGR7MSwyfSkiLCBrZXJuZWxfdmVyc2lvbikKICAgICAgICAgICAgICAgICAgICBjYW4gPSBtIGlzIE5vbmUgb3IgaW50KG0uZ3JvdXAoMSkpID49IDM5CiAgICAgICAgICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgICAgICAgICBjYW4gPSBGYWxzZQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHVubGluayhURVNURk4pCiAgICAgICAgICAgIHVubGluayh0bXBfbmFtZSkKICAgIF9jYW5feGF0dHIgPSBjYW4KICAgIHJldHVybiBjYW4KCmRlZiBza2lwX3VubGVzc194YXR0cih0ZXN0KToKICAgICIiIlNraXAgZGVjb3JhdG9yIGZvciB0ZXN0cyB0aGF0IHJlcXVpcmUgZnVuY3Rpb25hbCBleHRlbmRlZCBhdHRyaWJ1dGVzIiIiCiAgICBvayA9IGNhbl94YXR0cigpCiAgICBtc2cgPSAibm8gbm9uLWJyb2tlbiBleHRlbmRlZCBhdHRyaWJ1dGUgc3VwcG9ydCIKICAgIHJldHVybiB0ZXN0IGlmIG9rIGVsc2UgdW5pdHRlc3Quc2tpcChtc2cpKHRlc3QpCgoKaWYgc3lzLnBsYXRmb3JtLnN0YXJ0c3dpdGgoJ3dpbicpOgogICAgQGNvbnRleHRsaWIuY29udGV4dG1hbmFnZXIKICAgIGRlZiBzdXBwcmVzc19jcmFzaF9wb3B1cCgpOgogICAgICAgICIiIkRpc2FibGUgV2luZG93cyBFcnJvciBSZXBvcnRpbmcgZGlhbG9ncyB1c2luZyBTZXRFcnJvck1vZGUuIiIiCiAgICAgICAgIyBzZWUgaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L3dpbmRvd3MvZGVza3RvcC9tczY4MDYyMSUyOHY9dnMuODUlMjkuYXNweAogICAgICAgICMgR2V0RXJyb3JNb2RlIGlzIG5vdCBhdmFpbGFibGUgb24gV2luZG93cyBYUCBhbmQgV2luZG93cyBTZXJ2ZXIgMjAwMywKICAgICAgICAjIGJ1dCBTZXRFcnJvck1vZGUgcmV0dXJucyB0aGUgcHJldmlvdXMgdmFsdWUsIHNvIHdlIGNhbiB1c2UgdGhhdAogICAgICAgIGltcG9ydCBjdHlwZXMKICAgICAgICBrMzIgPSBjdHlwZXMud2luZGxsLmtlcm5lbDMyCiAgICAgICAgU0VNX05PR1BGQVVMVEVSUk9SQk9YID0gMHgwMgogICAgICAgIG9sZF9lcnJvcl9tb2RlID0gazMyLlNldEVycm9yTW9kZShTRU1fTk9HUEZBVUxURVJST1JCT1gpCiAgICAgICAgazMyLlNldEVycm9yTW9kZShvbGRfZXJyb3JfbW9kZSB8IFNFTV9OT0dQRkFVTFRFUlJPUkJPWCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHlpZWxkCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgazMyLlNldEVycm9yTW9kZShvbGRfZXJyb3JfbW9kZSkKZWxzZToKICAgICMgdGhpcyBpcyBhIG5vLW9wIGZvciBvdGhlciBwbGF0Zm9ybXMKICAgIEBjb250ZXh0bGliLmNvbnRleHRtYW5hZ2VyCiAgICBkZWYgc3VwcHJlc3NfY3Jhc2hfcG9wdXAoKToKICAgICAgICB5aWVsZAoKCmRlZiBwYXRjaCh0ZXN0X2luc3RhbmNlLCBvYmplY3RfdG9fcGF0Y2gsIGF0dHJfbmFtZSwgbmV3X3ZhbHVlKToKICAgICIiIk92ZXJyaWRlICdvYmplY3RfdG9fcGF0Y2gnLidhdHRyX25hbWUnIHdpdGggJ25ld192YWx1ZScuCgogICAgQWxzbywgYWRkIGEgY2xlYW51cCBwcm9jZWR1cmUgdG8gJ3Rlc3RfaW5zdGFuY2UnIHRvIHJlc3RvcmUKICAgICdvYmplY3RfdG9fcGF0Y2gnIHZhbHVlIGZvciAnYXR0cl9uYW1lJy4KICAgIFRoZSAnYXR0cl9uYW1lJyBzaG91bGQgYmUgYSB2YWxpZCBhdHRyaWJ1dGUgZm9yICdvYmplY3RfdG9fcGF0Y2gnLgoKICAgICIiIgogICAgIyBjaGVjayB0aGF0ICdhdHRyX25hbWUnIGlzIGEgcmVhbCBhdHRyaWJ1dGUgZm9yICdvYmplY3RfdG9fcGF0Y2gnCiAgICAjIHdpbGwgcmFpc2UgQXR0cmlidXRlRXJyb3IgaWYgaXQgZG9lcyBub3QgZXhpc3QKICAgIGdldGF0dHIob2JqZWN0X3RvX3BhdGNoLCBhdHRyX25hbWUpCgogICAgIyBrZWVwIGEgY29weSBvZiB0aGUgb2xkIHZhbHVlCiAgICBhdHRyX2lzX2xvY2FsID0gRmFsc2UKICAgIHRyeToKICAgICAgICBvbGRfdmFsdWUgPSBvYmplY3RfdG9fcGF0Y2guX19kaWN0X19bYXR0cl9uYW1lXQogICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvciwgS2V5RXJyb3IpOgogICAgICAgIG9sZF92YWx1ZSA9IGdldGF0dHIob2JqZWN0X3RvX3BhdGNoLCBhdHRyX25hbWUsIE5vbmUpCiAgICBlbHNlOgogICAgICAgIGF0dHJfaXNfbG9jYWwgPSBUcnVlCgogICAgIyByZXN0b3JlIHRoZSB2YWx1ZSB3aGVuIHRoZSB0ZXN0IGlzIGRvbmUKICAgIGRlZiBjbGVhbnVwKCk6CiAgICAgICAgaWYgYXR0cl9pc19sb2NhbDoKICAgICAgICAgICAgc2V0YXR0cihvYmplY3RfdG9fcGF0Y2gsIGF0dHJfbmFtZSwgb2xkX3ZhbHVlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlbGF0dHIob2JqZWN0X3RvX3BhdGNoLCBhdHRyX25hbWUpCgogICAgdGVzdF9pbnN0YW5jZS5hZGRDbGVhbnVwKGNsZWFudXApCgogICAgIyBhY3R1YWxseSBvdmVycmlkZSB0aGUgYXR0cmlidXRlCiAgICBzZXRhdHRyKG9iamVjdF90b19wYXRjaCwgYXR0cl9uYW1lLCBuZXdfdmFsdWUpCgo=',
'/Lib/test/__init__.py':'IyBEdW1teSBmaWxlIHRvIG1ha2UgdGhpcyBkaXJlY3RvcnkgYSBwYWNrYWdlLgo=',
'/Lib/test/pystone.py':'IyEgL3Vzci9iaW4vcHl0aG9uMy4zCgoiIiIKIlBZU1RPTkUiIEJlbmNobWFyayBQcm9ncmFtCgpWZXJzaW9uOiAgICAgICAgUHl0aG9uLzEuMSAoY29ycmVzcG9uZHMgdG8gQy8xLjEgcGx1cyAyIFB5c3RvbmUgZml4ZXMpCgpBdXRob3I6ICAgICAgICAgUmVpbmhvbGQgUC4gV2VpY2tlciwgIENBQ00gVm9sIDI3LCBObyAxMCwgMTAvODQgcGcuIDEwMTMuCgogICAgICAgICAgICAgICAgVHJhbnNsYXRlZCBmcm9tIEFEQSB0byBDIGJ5IFJpY2sgUmljaGFyZHNvbi4KICAgICAgICAgICAgICAgIEV2ZXJ5IG1ldGhvZCB0byBwcmVzZXJ2ZSBBREEtbGlrZW5lc3MgaGFzIGJlZW4gdXNlZCwKICAgICAgICAgICAgICAgIGF0IHRoZSBleHBlbnNlIG9mIEMtbmVzcy4KCiAgICAgICAgICAgICAgICBUcmFuc2xhdGVkIGZyb20gQyB0byBQeXRob24gYnkgR3VpZG8gdmFuIFJvc3N1bS4KClZlcnNpb24gSGlzdG9yeToKCiAgICAgICAgICAgICAgICBWZXJzaW9uIDEuMSBjb3JyZWN0cyB0d28gYnVncyBpbiB2ZXJzaW9uIDEuMDoKCiAgICAgICAgICAgICAgICBGaXJzdCwgaXQgbGVha2VkIG1lbW9yeTogaW4gUHJvYzEoKSwgTmV4dFJlY29yZCBlbmRzCiAgICAgICAgICAgICAgICB1cCBoYXZpbmcgYSBwb2ludGVyIHRvIGl0c2VsZi4gIEkgaGF2ZSBjb3JyZWN0ZWQgdGhpcwogICAgICAgICAgICAgICAgYnkgemFwcGluZyBOZXh0UmVjb3JkLlB0ckNvbXAgYXQgdGhlIGVuZCBvZiBQcm9jMSgpLgoKICAgICAgICAgICAgICAgIFNlY29uZCwgUHJvYzMoKSB1c2VkIHRoZSBvcGVyYXRvciAhPSB0byBjb21wYXJlIGEKICAgICAgICAgICAgICAgIHJlY29yZCB0byBOb25lLiAgVGhpcyBpcyByYXRoZXIgaW5lZmZpY2llbnQgYW5kIG5vdAogICAgICAgICAgICAgICAgdHJ1ZSB0byB0aGUgaW50ZW50aW9uIG9mIHRoZSBvcmlnaW5hbCBiZW5jaG1hcmsgKHdoZXJlCiAgICAgICAgICAgICAgICBhIHBvaW50ZXIgY29tcGFyaXNvbiB0byBOb25lIGlzIGludGVuZGVkOyB0aGUgIT0KICAgICAgICAgICAgICAgIG9wZXJhdG9yIGF0dGVtcHRzIHRvIGZpbmQgYSBtZXRob2QgX19jbXBfXyB0byBkbyB2YWx1ZQogICAgICAgICAgICAgICAgY29tcGFyaXNvbiBvZiB0aGUgcmVjb3JkKS4gIFZlcnNpb24gMS4xIHJ1bnMgNS0xMAogICAgICAgICAgICAgICAgcGVyY2VudCBmYXN0ZXIgdGhhbiB2ZXJzaW9uIDEuMCwgc28gYmVuY2htYXJrIGZpZ3VyZXMKICAgICAgICAgICAgICAgIG9mIGRpZmZlcmVudCB2ZXJzaW9ucyBjYW4ndCBiZSBjb21wYXJlZCBkaXJlY3RseS4KCiIiIgoKTE9PUFMgPSA1MDAwMAoKZnJvbSB0aW1lIGltcG9ydCBjbG9jawoKX192ZXJzaW9uX18gPSAiMS4xIgoKW0lkZW50MSwgSWRlbnQyLCBJZGVudDMsIElkZW50NCwgSWRlbnQ1XSA9IHJhbmdlKDEsIDYpCgpjbGFzcyBSZWNvcmQ6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIFB0ckNvbXAgPSBOb25lLCBEaXNjciA9IDAsIEVudW1Db21wID0gMCwKICAgICAgICAgICAgICAgICAgICAgICBJbnRDb21wID0gMCwgU3RyaW5nQ29tcCA9IDApOgogICAgICAgIHNlbGYuUHRyQ29tcCA9IFB0ckNvbXAKICAgICAgICBzZWxmLkRpc2NyID0gRGlzY3IKICAgICAgICBzZWxmLkVudW1Db21wID0gRW51bUNvbXAKICAgICAgICBzZWxmLkludENvbXAgPSBJbnRDb21wCiAgICAgICAgc2VsZi5TdHJpbmdDb21wID0gU3RyaW5nQ29tcAoKICAgIGRlZiBjb3B5KHNlbGYpOgogICAgICAgIHJldHVybiBSZWNvcmQoc2VsZi5QdHJDb21wLCBzZWxmLkRpc2NyLCBzZWxmLkVudW1Db21wLAogICAgICAgICAgICAgICAgICAgICAgc2VsZi5JbnRDb21wLCBzZWxmLlN0cmluZ0NvbXApCgpUUlVFID0gMQpGQUxTRSA9IDAKCmRlZiBtYWluKGxvb3BzPUxPT1BTKToKICAgIGJlbmNodGltZSwgc3RvbmVzID0gcHlzdG9uZXMobG9vcHMpCiAgICBwcmludCgiUHlzdG9uZSglcykgdGltZSBmb3IgJWQgcGFzc2VzID0gJWciICUgXAogICAgICAgICAgKF9fdmVyc2lvbl9fLCBsb29wcywgYmVuY2h0aW1lKSkKICAgIHByaW50KCJUaGlzIG1hY2hpbmUgYmVuY2htYXJrcyBhdCAlZyBweXN0b25lcy9zZWNvbmQiICUgc3RvbmVzKQoKCmRlZiBweXN0b25lcyhsb29wcz1MT09QUyk6CiAgICByZXR1cm4gUHJvYzAobG9vcHMpCgpJbnRHbG9iID0gMApCb29sR2xvYiA9IEZBTFNFCkNoYXIxR2xvYiA9ICdcMCcKQ2hhcjJHbG9iID0gJ1wwJwpBcnJheTFHbG9iID0gWzBdKjUxCkFycmF5Mkdsb2IgPSBbeFs6XSBmb3IgeCBpbiBbQXJyYXkxR2xvYl0qNTFdClB0ckdsYiA9IE5vbmUKUHRyR2xiTmV4dCA9IE5vbmUKCmRlZiBQcm9jMChsb29wcz1MT09QUyk6CiAgICBnbG9iYWwgSW50R2xvYgogICAgZ2xvYmFsIEJvb2xHbG9iCiAgICBnbG9iYWwgQ2hhcjFHbG9iCiAgICBnbG9iYWwgQ2hhcjJHbG9iCiAgICBnbG9iYWwgQXJyYXkxR2xvYgogICAgZ2xvYmFsIEFycmF5Mkdsb2IKICAgIGdsb2JhbCBQdHJHbGIKICAgIGdsb2JhbCBQdHJHbGJOZXh0CgogICAgc3RhcnR0aW1lID0gY2xvY2soKQogICAgZm9yIGkgaW4gcmFuZ2UobG9vcHMpOgogICAgICAgIHBhc3MKICAgIG51bGx0aW1lID0gY2xvY2soKSAtIHN0YXJ0dGltZQoKICAgIFB0ckdsYk5leHQgPSBSZWNvcmQoKQogICAgUHRyR2xiID0gUmVjb3JkKCkKICAgIFB0ckdsYi5QdHJDb21wID0gUHRyR2xiTmV4dAogICAgUHRyR2xiLkRpc2NyID0gSWRlbnQxCiAgICBQdHJHbGIuRW51bUNvbXAgPSBJZGVudDMKICAgIFB0ckdsYi5JbnRDb21wID0gNDAKICAgIFB0ckdsYi5TdHJpbmdDb21wID0gIkRIUllTVE9ORSBQUk9HUkFNLCBTT01FIFNUUklORyIKICAgIFN0cmluZzFMb2MgPSAiREhSWVNUT05FIFBST0dSQU0sIDEnU1QgU1RSSU5HIgogICAgQXJyYXkyR2xvYls4XVs3XSA9IDEwCgogICAgc3RhcnR0aW1lID0gY2xvY2soKQoKICAgIGZvciBpIGluIHJhbmdlKGxvb3BzKToKICAgICAgICBQcm9jNSgpCiAgICAgICAgUHJvYzQoKQogICAgICAgIEludExvYzEgPSAyCiAgICAgICAgSW50TG9jMiA9IDMKICAgICAgICBTdHJpbmcyTG9jID0gIkRIUllTVE9ORSBQUk9HUkFNLCAyJ05EIFNUUklORyIKICAgICAgICBFbnVtTG9jID0gSWRlbnQyCiAgICAgICAgQm9vbEdsb2IgPSBub3QgRnVuYzIoU3RyaW5nMUxvYywgU3RyaW5nMkxvYykKICAgICAgICB3aGlsZSBJbnRMb2MxIDwgSW50TG9jMjoKICAgICAgICAgICAgSW50TG9jMyA9IDUgKiBJbnRMb2MxIC0gSW50TG9jMgogICAgICAgICAgICBJbnRMb2MzID0gUHJvYzcoSW50TG9jMSwgSW50TG9jMikKICAgICAgICAgICAgSW50TG9jMSA9IEludExvYzEgKyAxCiAgICAgICAgUHJvYzgoQXJyYXkxR2xvYiwgQXJyYXkyR2xvYiwgSW50TG9jMSwgSW50TG9jMykKICAgICAgICBQdHJHbGIgPSBQcm9jMShQdHJHbGIpCiAgICAgICAgQ2hhckluZGV4ID0gJ0EnCiAgICAgICAgd2hpbGUgQ2hhckluZGV4IDw9IENoYXIyR2xvYjoKICAgICAgICAgICAgaWYgRW51bUxvYyA9PSBGdW5jMShDaGFySW5kZXgsICdDJyk6CiAgICAgICAgICAgICAgICBFbnVtTG9jID0gUHJvYzYoSWRlbnQxKQogICAgICAgICAgICBDaGFySW5kZXggPSBjaHIob3JkKENoYXJJbmRleCkrMSkKICAgICAgICBJbnRMb2MzID0gSW50TG9jMiAqIEludExvYzEKICAgICAgICBJbnRMb2MyID0gSW50TG9jMyAvIEludExvYzEKICAgICAgICBJbnRMb2MyID0gNyAqIChJbnRMb2MzIC0gSW50TG9jMikgLSBJbnRMb2MxCiAgICAgICAgSW50TG9jMSA9IFByb2MyKEludExvYzEpCgogICAgYmVuY2h0aW1lID0gY2xvY2soKSAtIHN0YXJ0dGltZSAtIG51bGx0aW1lCiAgICBpZiBiZW5jaHRpbWUgPT0gMC4wOgogICAgICAgIGxvb3BzUGVyQmVuY2h0aW1lID0gMC4wCiAgICBlbHNlOgogICAgICAgIGxvb3BzUGVyQmVuY2h0aW1lID0gKGxvb3BzIC8gYmVuY2h0aW1lKQogICAgcmV0dXJuIGJlbmNodGltZSwgbG9vcHNQZXJCZW5jaHRpbWUKCmRlZiBQcm9jMShQdHJQYXJJbik6CiAgICBQdHJQYXJJbi5QdHJDb21wID0gTmV4dFJlY29yZCA9IFB0ckdsYi5jb3B5KCkKICAgIFB0clBhckluLkludENvbXAgPSA1CiAgICBOZXh0UmVjb3JkLkludENvbXAgPSBQdHJQYXJJbi5JbnRDb21wCiAgICBOZXh0UmVjb3JkLlB0ckNvbXAgPSBQdHJQYXJJbi5QdHJDb21wCiAgICBOZXh0UmVjb3JkLlB0ckNvbXAgPSBQcm9jMyhOZXh0UmVjb3JkLlB0ckNvbXApCiAgICBpZiBOZXh0UmVjb3JkLkRpc2NyID09IElkZW50MToKICAgICAgICBOZXh0UmVjb3JkLkludENvbXAgPSA2CiAgICAgICAgTmV4dFJlY29yZC5FbnVtQ29tcCA9IFByb2M2KFB0clBhckluLkVudW1Db21wKQogICAgICAgIE5leHRSZWNvcmQuUHRyQ29tcCA9IFB0ckdsYi5QdHJDb21wCiAgICAgICAgTmV4dFJlY29yZC5JbnRDb21wID0gUHJvYzcoTmV4dFJlY29yZC5JbnRDb21wLCAxMCkKICAgIGVsc2U6CiAgICAgICAgUHRyUGFySW4gPSBOZXh0UmVjb3JkLmNvcHkoKQogICAgTmV4dFJlY29yZC5QdHJDb21wID0gTm9uZQogICAgcmV0dXJuIFB0clBhckluCgpkZWYgUHJvYzIoSW50UGFySU8pOgogICAgSW50TG9jID0gSW50UGFySU8gKyAxMAogICAgd2hpbGUgMToKICAgICAgICBpZiBDaGFyMUdsb2IgPT0gJ0EnOgogICAgICAgICAgICBJbnRMb2MgPSBJbnRMb2MgLSAxCiAgICAgICAgICAgIEludFBhcklPID0gSW50TG9jIC0gSW50R2xvYgogICAgICAgICAgICBFbnVtTG9jID0gSWRlbnQxCiAgICAgICAgaWYgRW51bUxvYyA9PSBJZGVudDE6CiAgICAgICAgICAgIGJyZWFrCiAgICByZXR1cm4gSW50UGFySU8KCmRlZiBQcm9jMyhQdHJQYXJPdXQpOgogICAgZ2xvYmFsIEludEdsb2IKCiAgICBpZiBQdHJHbGIgaXMgbm90IE5vbmU6CiAgICAgICAgUHRyUGFyT3V0ID0gUHRyR2xiLlB0ckNvbXAKICAgIGVsc2U6CiAgICAgICAgSW50R2xvYiA9IDEwMAogICAgUHRyR2xiLkludENvbXAgPSBQcm9jNygxMCwgSW50R2xvYikKICAgIHJldHVybiBQdHJQYXJPdXQKCmRlZiBQcm9jNCgpOgogICAgZ2xvYmFsIENoYXIyR2xvYgoKICAgIEJvb2xMb2MgPSBDaGFyMUdsb2IgPT0gJ0EnCiAgICBCb29sTG9jID0gQm9vbExvYyBvciBCb29sR2xvYgogICAgQ2hhcjJHbG9iID0gJ0InCgpkZWYgUHJvYzUoKToKICAgIGdsb2JhbCBDaGFyMUdsb2IKICAgIGdsb2JhbCBCb29sR2xvYgoKICAgIENoYXIxR2xvYiA9ICdBJwogICAgQm9vbEdsb2IgPSBGQUxTRQoKZGVmIFByb2M2KEVudW1QYXJJbik6CiAgICBFbnVtUGFyT3V0ID0gRW51bVBhckluCiAgICBpZiBub3QgRnVuYzMoRW51bVBhckluKToKICAgICAgICBFbnVtUGFyT3V0ID0gSWRlbnQ0CiAgICBpZiBFbnVtUGFySW4gPT0gSWRlbnQxOgogICAgICAgIEVudW1QYXJPdXQgPSBJZGVudDEKICAgIGVsaWYgRW51bVBhckluID09IElkZW50MjoKICAgICAgICBpZiBJbnRHbG9iID4gMTAwOgogICAgICAgICAgICBFbnVtUGFyT3V0ID0gSWRlbnQxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgRW51bVBhck91dCA9IElkZW50NAogICAgZWxpZiBFbnVtUGFySW4gPT0gSWRlbnQzOgogICAgICAgIEVudW1QYXJPdXQgPSBJZGVudDIKICAgIGVsaWYgRW51bVBhckluID09IElkZW50NDoKICAgICAgICBwYXNzCiAgICBlbGlmIEVudW1QYXJJbiA9PSBJZGVudDU6CiAgICAgICAgRW51bVBhck91dCA9IElkZW50MwogICAgcmV0dXJuIEVudW1QYXJPdXQKCmRlZiBQcm9jNyhJbnRQYXJJMSwgSW50UGFySTIpOgogICAgSW50TG9jID0gSW50UGFySTEgKyAyCiAgICBJbnRQYXJPdXQgPSBJbnRQYXJJMiArIEludExvYwogICAgcmV0dXJuIEludFBhck91dAoKZGVmIFByb2M4KEFycmF5MVBhciwgQXJyYXkyUGFyLCBJbnRQYXJJMSwgSW50UGFySTIpOgogICAgZ2xvYmFsIEludEdsb2IKCiAgICBJbnRMb2MgPSBJbnRQYXJJMSArIDUKICAgIEFycmF5MVBhcltJbnRMb2NdID0gSW50UGFySTIKICAgIEFycmF5MVBhcltJbnRMb2MrMV0gPSBBcnJheTFQYXJbSW50TG9jXQogICAgQXJyYXkxUGFyW0ludExvYyszMF0gPSBJbnRMb2MKICAgIGZvciBJbnRJbmRleCBpbiByYW5nZShJbnRMb2MsIEludExvYysyKToKICAgICAgICBBcnJheTJQYXJbSW50TG9jXVtJbnRJbmRleF0gPSBJbnRMb2MKICAgIEFycmF5MlBhcltJbnRMb2NdW0ludExvYy0xXSA9IEFycmF5MlBhcltJbnRMb2NdW0ludExvYy0xXSArIDEKICAgIEFycmF5MlBhcltJbnRMb2MrMjBdW0ludExvY10gPSBBcnJheTFQYXJbSW50TG9jXQogICAgSW50R2xvYiA9IDUKCmRlZiBGdW5jMShDaGFyUGFyMSwgQ2hhclBhcjIpOgogICAgQ2hhckxvYzEgPSBDaGFyUGFyMQogICAgQ2hhckxvYzIgPSBDaGFyTG9jMQogICAgaWYgQ2hhckxvYzIgIT0gQ2hhclBhcjI6CiAgICAgICAgcmV0dXJuIElkZW50MQogICAgZWxzZToKICAgICAgICByZXR1cm4gSWRlbnQyCgpkZWYgRnVuYzIoU3RyUGFySTEsIFN0clBhckkyKToKICAgIEludExvYyA9IDEKICAgIHdoaWxlIEludExvYyA8PSAxOgogICAgICAgIGlmIEZ1bmMxKFN0clBhckkxW0ludExvY10sIFN0clBhckkyW0ludExvYysxXSkgPT0gSWRlbnQxOgogICAgICAgICAgICBDaGFyTG9jID0gJ0EnCiAgICAgICAgICAgIEludExvYyA9IEludExvYyArIDEKICAgIGlmIENoYXJMb2MgPj0gJ1cnIGFuZCBDaGFyTG9jIDw9ICdaJzoKICAgICAgICBJbnRMb2MgPSA3CiAgICBpZiBDaGFyTG9jID09ICdYJzoKICAgICAgICByZXR1cm4gVFJVRQogICAgZWxzZToKICAgICAgICBpZiBTdHJQYXJJMSA+IFN0clBhckkyOgogICAgICAgICAgICBJbnRMb2MgPSBJbnRMb2MgKyA3CiAgICAgICAgICAgIHJldHVybiBUUlVFCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIEZBTFNFCgpkZWYgRnVuYzMoRW51bVBhckluKToKICAgIEVudW1Mb2MgPSBFbnVtUGFySW4KICAgIGlmIEVudW1Mb2MgPT0gSWRlbnQzOiByZXR1cm4gVFJVRQogICAgcmV0dXJuIEZBTFNFCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgaW1wb3J0IHN5cwogICAgZGVmIGVycm9yKG1zZyk6CiAgICAgICAgcHJpbnQobXNnLCBlbmQ9JyAnLCBmaWxlPXN5cy5zdGRlcnIpCiAgICAgICAgcHJpbnQoInVzYWdlOiAlcyBbbnVtYmVyX29mX2xvb3BzXSIgJSBzeXMuYXJndlswXSwgZmlsZT1zeXMuc3RkZXJyKQogICAgICAgIHN5cy5leGl0KDEwMCkKICAgIG5hcmdzID0gbGVuKHN5cy5hcmd2KSAtIDEKICAgIGlmIG5hcmdzID4gMToKICAgICAgICBlcnJvcigiJWQgYXJndW1lbnRzIGFyZSB0b28gbWFueTsiICUgbmFyZ3MpCiAgICBlbGlmIG5hcmdzID09IDE6CiAgICAgICAgdHJ5OiBsb29wcyA9IGludChzeXMuYXJndlsxXSkKICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgZXJyb3IoIkludmFsaWQgYXJndW1lbnQgJXI7IiAlIHN5cy5hcmd2WzFdKQogICAgZWxzZToKICAgICAgICBsb29wcyA9IExPT1BTCiAgICBtYWluKGxvb3BzKQo=',
'/Lib/test/test_int.py':'aW1wb3J0IHN5cwoKaW1wb3J0IHVuaXR0ZXN0CmZyb20gdGVzdC5zdXBwb3J0IGltcG9ydCBydW5fdW5pdHRlc3QKCkwgPSBbCiAgICAgICAgKCcwJywgMCksCiAgICAgICAgKCcxJywgMSksCiAgICAgICAgKCc5JywgOSksCiAgICAgICAgKCcxMCcsIDEwKSwKICAgICAgICAoJzk5JywgOTkpLAogICAgICAgICgnMTAwJywgMTAwKSwKICAgICAgICAoJzMxNCcsIDMxNCksCiAgICAgICAgKCcgMzE0JywgMzE0KSwKICAgICAgICAoJzMxNCAnLCAzMTQpLAogICAgICAgICgnICBcdFx0ICAzMTQgIFx0XHQgICcsIDMxNCksCiAgICAgICAgKHJlcHIoc3lzLm1heHNpemUpLCBzeXMubWF4c2l6ZSksCiAgICAgICAgKCcgIDF4JywgVmFsdWVFcnJvciksCiAgICAgICAgKCcgIDEgICcsIDEpLAogICAgICAgICgnICAxXDAyICAnLCBWYWx1ZUVycm9yKSwKICAgICAgICAoJycsIFZhbHVlRXJyb3IpLAogICAgICAgICgnICcsIFZhbHVlRXJyb3IpLAogICAgICAgICgnICBcdFx0ICAnLCBWYWx1ZUVycm9yKSwKICAgICAgICAoIlx1MDIwMCIsIFZhbHVlRXJyb3IpCl0KCmNsYXNzIEludFRlc3RDYXNlcyh1bml0dGVzdC5UZXN0Q2FzZSk6CgogICAgZGVmIHRlc3RfYmFzaWMoc2VsZik6CiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoMzE0KSwgMzE0KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KDMuMTQpLCAzKQogICAgICAgICMgQ2hlY2sgdGhhdCBjb252ZXJzaW9uIGZyb20gZmxvYXQgdHJ1bmNhdGVzIHRvd2FyZHMgemVybwogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KC0zLjE0KSwgLTMpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoMy45KSwgMykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgtMy45KSwgLTMpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoMy41KSwgMykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgtMy41KSwgLTMpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoIi0zIiksIC0zKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCIgLTMgIiksIC0zKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCJcTntFTSBTUEFDRX0tM1xOe0VOIFNQQUNFfSIpLCAtMykKICAgICAgICAjIERpZmZlcmVudCBiYXNlOgogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCIxMCIsMTYpLCAxNikKICAgICAgICAjIFRlc3QgY29udmVyc2lvbiBmcm9tIHN0cmluZ3MgYW5kIHZhcmlvdXMgYW5vbWFsaWVzCiAgICAgICAgZm9yIHMsIHYgaW4gTDoKICAgICAgICAgICAgZm9yIHNpZ24gaW4gIiIsICIrIiwgIi0iOgogICAgICAgICAgICAgICAgZm9yIHByZWZpeCBpbiAiIiwgIiAiLCAiXHQiLCAiICBcdFx0ICAiOgogICAgICAgICAgICAgICAgICAgIHNzID0gcHJlZml4ICsgc2lnbiArIHMKICAgICAgICAgICAgICAgICAgICB2diA9IHYKICAgICAgICAgICAgICAgICAgICBpZiBzaWduID09ICItIiBhbmQgdiBpcyBub3QgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgdnYgPSAtdgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoc3MpLCB2dikKICAgICAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICBzID0gcmVwcigtMS1zeXMubWF4c2l6ZSkKICAgICAgICB4ID0gaW50KHMpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCh4KzEsIC1zeXMubWF4c2l6ZSkKICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoeCwgaW50KQogICAgICAgICMgc2hvdWxkIHJldHVybiBpbnQKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludChzWzE6XSksIHN5cy5tYXhzaXplKzEpCgogICAgICAgICMgc2hvdWxkIHJldHVybiBpbnQKICAgICAgICB4ID0gaW50KDFlMTAwKQogICAgICAgIHNlbGYuYXNzZXJ0SXNJbnN0YW5jZSh4LCBpbnQpCiAgICAgICAgeCA9IGludCgtMWUxMDApCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHgsIGludCkKCgogICAgICAgICMgU0YgYnVnIDQzNDE4NjogIDB4ODAwMDAwMDAvMiAhPSAweDgwMDAwMDAwPj4xLgogICAgICAgICMgV29ya2VkIGJ5IGFjY2lkZW50IGluIFdpbmRvd3MgcmVsZWFzZSBidWlsZCwgYnV0IGZhaWxlZCBpbiBkZWJ1ZyBidWlsZC4KICAgICAgICAjIEZhaWxlZCBpbiBhbGwgTGludXggYnVpbGRzLgogICAgICAgIHggPSAtMS1zeXMubWF4c2l6ZQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoeCA+PiAxLCB4Ly8yKQoKICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhWYWx1ZUVycm9yLCBpbnQsICcxMjNcMCcpCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVmFsdWVFcnJvciwgaW50LCAnNTMnLCA0MCkKCiAgICAgICAgIyBTRiBidWcgMTU0NTQ5NzogZW1iZWRkZWQgTlVMcyB3ZXJlIG5vdCBkZXRlY3RlZCB3aXRoCiAgICAgICAgIyBleHBsaWNpdCBiYXNlCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVmFsdWVFcnJvciwgaW50LCAnMTIzXDAnLCAxMCkKICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhWYWx1ZUVycm9yLCBpbnQsICcxMjNceDAwIDI0NScsIDIwKQoKICAgICAgICB4ID0gaW50KCcxJyAqIDYwMCkKICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoeCwgaW50KQoKCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVHlwZUVycm9yLCBpbnQsIDEsIDEyKQoKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMG8xMjMnLCAwKSwgODMpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzB4MTIzJywgMTYpLCAyOTEpCgogICAgICAgICMgQnVnIDE2Nzk6ICIweCIgaXMgbm90IGEgdmFsaWQgaGV4IGxpdGVyYWwKICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhWYWx1ZUVycm9yLCBpbnQsICIweCIsIDE2KQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIGludCwgIjB4IiwgMCkKCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVmFsdWVFcnJvciwgaW50LCAiMG8iLCA4KQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIGludCwgIjBvIiwgMCkKCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVmFsdWVFcnJvciwgaW50LCAiMGIiLCAyKQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIGludCwgIjBiIiwgMCkKCiAgICAgICAgIyBCdWcgIzMyMzY6IFJldHVybiBzbWFsbCBsb25ncyBmcm9tIFB5TG9uZ19Gcm9tU3RyaW5nCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGludCgiMTAiKSBpcyAxMCkKICAgICAgICBzZWxmLmFzc2VydFRydWUoaW50KCItMSIpIGlzIC0xKQoKICAgICAgICAjIFNGIGJ1ZyAxMzM0NjYyOiBpbnQoc3RyaW5nLCBiYXNlKSB3cm9uZyBhbnN3ZXJzCiAgICAgICAgIyBWYXJpb3VzIHJlcHJlc2VudGF0aW9ucyBvZiAyKiozMiBldmFsdWF0ZWQgdG8gMAogICAgICAgICMgcmF0aGVyIHRoYW4gMioqMzIgaW4gcHJldmlvdXMgdmVyc2lvbnMKCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsIDIpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcxMDIwMDIwMjIyMDEyMjExMTEyMTEnLCAzKSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMTAwMDAwMDAwMDAwMDAwMDAnLCA0KSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMzIyNDQwMDI0MjMxNDEnLCA1KSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMTU1MDEwNDAxNTUwNCcsIDYpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcyMTEzMDE0MjIzNTQnLCA3KSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnNDAwMDAwMDAwMDAnLCA4KSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMTIwNjg2NTc0NTQnLCA5KSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnNDI5NDk2NzI5NicsIDEwKSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMTkwNDQ0MDU1NCcsIDExKSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnOWJhNDYxNTk0JywgMTIpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc1MzVhNzk4ODknLCAxMyksIDQyOTQ5NjcyOTYpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzJjYTViNzQ2NCcsIDE0KSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMWEyMGRjZDgxJywgMTUpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcxMDAwMDAwMDAnLCAxNiksIDQyOTQ5NjcyOTYpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJ2E3ZmZkYTkxJywgMTcpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc3MDRoZTdnNCcsIDE4KSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnNGY1YWZmNjYnLCAxOSksIDQyOTQ5NjcyOTYpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzM3MjNhaTRnJywgMjApLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcyODFkNTVpNCcsIDIxKSwgNDI5NDk2NzI5NikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMWZqOGIxODQnLCAyMiksIDQyOTQ5NjcyOTYpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzE2MDZrN2ljJywgMjMpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCdtYjk5NGFnJywgMjQpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCdoZWsybWdsJywgMjUpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCdkbmNoYm5tJywgMjYpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCdiMjhqcGRtJywgMjcpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc4cGZnaWg0JywgMjgpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc3NmJlaWdnJywgMjkpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc1cW1jcHFnJywgMzApLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc0cTBqdG80JywgMzEpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc0MDAwMDAwJywgMzIpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCczYW9rcTk0JywgMzMpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcycWh4amxpJywgMzQpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcyYnI0NXFiJywgMzUpLCA0Mjk0OTY3Mjk2KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcxejE0MXo0JywgMzYpLCA0Mjk0OTY3Mjk2KQoKICAgICAgICAjIHRlc3RzIHdpdGggYmFzZSAwCiAgICAgICAgIyB0aGlzIGZhaWxzIG9uIDMuMCwgYnV0IGluIDIueCB0aGUgb2xkIG9jdGFsIHN5bnRheCBpcyBhbGxvd2VkCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJyAwbzEyMyAgJywgMCksIDgzKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcgMG8xMjMgICcsIDApLCA4MykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMDAwJywgMCksIDApCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzBvMTIzJywgMCksIDgzKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcweDEyMycsIDApLCAyOTEpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzBiMTAwJywgMCksIDQpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJyAwTzEyMyAgICcsIDApLCA4MykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnIDBYMTIzICAnLCAwKSwgMjkxKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcgMEIxMDAgJywgMCksIDQpCgogICAgICAgICMgd2l0aG91dCBiYXNlIHN0aWxsIGJhc2UgMTAKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMDEyMycpLCAxMjMpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzAxMjMnLCAxMCksIDEyMykKCiAgICAgICAgIyB0ZXN0cyB3aXRoIHByZWZpeCBhbmQgYmFzZSAhPSAwCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzB4MTIzJywgMTYpLCAyOTEpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzBvMTIzJywgOCksIDgzKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcwYjEwMCcsIDIpLCA0KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcwWDEyMycsIDE2KSwgMjkxKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcwTzEyMycsIDgpLCA4MykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMEIxMDAnLCAyKSwgNCkKCiAgICAgICAgIyB0aGUgY29kZSBoYXMgc3BlY2lhbCBjaGVja3MgZm9yIHRoZSBmaXJzdCBjaGFyYWN0ZXIgYWZ0ZXIgdGhlCiAgICAgICAgIyAgdHlwZSBwcmVmaXgKICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhWYWx1ZUVycm9yLCBpbnQsICcwYjInLCAyKQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIGludCwgJzBiMDInLCAyKQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIGludCwgJzBCMicsIDIpCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVmFsdWVFcnJvciwgaW50LCAnMEIwMicsIDIpCiAgICAgICAgc2VsZi5hc3NlcnRSYWlzZXMoVmFsdWVFcnJvciwgaW50LCAnMG84JywgOCkKICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhWYWx1ZUVycm9yLCBpbnQsICcwbzA4JywgOCkKICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhWYWx1ZUVycm9yLCBpbnQsICcwTzgnLCA4KQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIGludCwgJzBPMDgnLCA4KQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIGludCwgJzB4ZycsIDE2KQogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFZhbHVlRXJyb3IsIGludCwgJzB4MGcnLCAxNikKICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhWYWx1ZUVycm9yLCBpbnQsICcwWGcnLCAxNikKICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhWYWx1ZUVycm9yLCBpbnQsICcwWDBnJywgMTYpCgogICAgICAgICMgU0YgYnVnIDEzMzQ2NjI6IGludChzdHJpbmcsIGJhc2UpIHdyb25nIGFuc3dlcnMKICAgICAgICAjIENoZWNrcyBmb3IgcHJvcGVyIGV2YWx1YXRpb24gb2YgMioqMzIgKyAxCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMScsIDIpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcxMDIwMDIwMjIyMDEyMjExMTEyMTInLCAzKSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMTAwMDAwMDAwMDAwMDAwMDEnLCA0KSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMzIyNDQwMDI0MjMxNDInLCA1KSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMTU1MDEwNDAxNTUwNScsIDYpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcyMTEzMDE0MjIzNTUnLCA3KSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnNDAwMDAwMDAwMDEnLCA4KSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMTIwNjg2NTc0NTUnLCA5KSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnNDI5NDk2NzI5NycsIDEwKSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMTkwNDQ0MDU1NScsIDExKSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnOWJhNDYxNTk1JywgMTIpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc1MzVhNzk4OGEnLCAxMyksIDQyOTQ5NjcyOTcpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzJjYTViNzQ2NScsIDE0KSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMWEyMGRjZDgyJywgMTUpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcxMDAwMDAwMDEnLCAxNiksIDQyOTQ5NjcyOTcpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJ2E3ZmZkYTkyJywgMTcpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc3MDRoZTdnNScsIDE4KSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnNGY1YWZmNjcnLCAxOSksIDQyOTQ5NjcyOTcpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzM3MjNhaTRoJywgMjApLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcyODFkNTVpNScsIDIxKSwgNDI5NDk2NzI5NykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludCgnMWZqOGIxODUnLCAyMiksIDQyOTQ5NjcyOTcpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoJzE2MDZrN2lkJywgMjMpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCdtYjk5NGFoJywgMjQpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCdoZWsybWdtJywgMjUpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCdkbmNoYm5uJywgMjYpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCdiMjhqcGRuJywgMjcpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc4cGZnaWg1JywgMjgpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc3NmJlaWdoJywgMjkpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc1cW1jcHFoJywgMzApLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc0cTBqdG81JywgMzEpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCc0MDAwMDAxJywgMzIpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCczYW9rcTk1JywgMzMpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcycWh4amxqJywgMzQpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcyYnI0NXFjJywgMzUpLCA0Mjk0OTY3Mjk3KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW50KCcxejE0MXo1JywgMzYpLCA0Mjk0OTY3Mjk3KQoKICAgIGRlZiB0ZXN0X2ludGNvbnZlcnNpb24oc2VsZik6CiAgICAgICAgIyBUZXN0IF9faW50X18oKQogICAgICAgIGNsYXNzIENsYXNzaWNNaXNzaW5nTWV0aG9kczoKICAgICAgICAgICAgcGFzcwogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW50LCBDbGFzc2ljTWlzc2luZ01ldGhvZHMoKSkKCiAgICAgICAgY2xhc3MgTWlzc2luZ01ldGhvZHMob2JqZWN0KToKICAgICAgICAgICAgcGFzcwogICAgICAgIHNlbGYuYXNzZXJ0UmFpc2VzKFR5cGVFcnJvciwgaW50LCBNaXNzaW5nTWV0aG9kcygpKQoKICAgICAgICBjbGFzcyBGb28wOgogICAgICAgICAgICBkZWYgX19pbnRfXyhzZWxmKToKICAgICAgICAgICAgICAgIHJldHVybiA0MgoKICAgICAgICBjbGFzcyBGb28xKG9iamVjdCk6CiAgICAgICAgICAgIGRlZiBfX2ludF9fKHNlbGYpOgogICAgICAgICAgICAgICAgcmV0dXJuIDQyCgogICAgICAgIGNsYXNzIEZvbzIoaW50KToKICAgICAgICAgICAgZGVmIF9faW50X18oc2VsZik6CiAgICAgICAgICAgICAgICByZXR1cm4gNDIKCiAgICAgICAgY2xhc3MgRm9vMyhpbnQpOgogICAgICAgICAgICBkZWYgX19pbnRfXyhzZWxmKToKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmCgogICAgICAgIGNsYXNzIEZvbzQoaW50KToKICAgICAgICAgICAgZGVmIF9faW50X18oc2VsZik6CiAgICAgICAgICAgICAgICByZXR1cm4gNDIKCiAgICAgICAgY2xhc3MgRm9vNShpbnQpOgogICAgICAgICAgICBkZWYgX19pbnRfXyhzZWxmKToKICAgICAgICAgICAgICAgIHJldHVybiA0Mi4KCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoRm9vMCgpKSwgNDIpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoRm9vMSgpKSwgNDIpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoRm9vMigpKSwgNDIpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoRm9vMygpKSwgMCkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludChGb280KCkpLCA0MikKICAgICAgICBzZWxmLmFzc2VydFJhaXNlcyhUeXBlRXJyb3IsIGludCwgRm9vNSgpKQoKICAgICAgICBjbGFzcyBDbGFzc2ljOgogICAgICAgICAgICBwYXNzCiAgICAgICAgZm9yIGJhc2UgaW4gKG9iamVjdCwgQ2xhc3NpYyk6CiAgICAgICAgICAgIGNsYXNzIEludE92ZXJyaWRlc1RydW5jKGJhc2UpOgogICAgICAgICAgICAgICAgZGVmIF9faW50X18oc2VsZik6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQyCiAgICAgICAgICAgICAgICBkZWYgX190cnVuY19fKHNlbGYpOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTIKICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoSW50T3ZlcnJpZGVzVHJ1bmMoKSksIDQyKQoKICAgICAgICAgICAgY2xhc3MgSnVzdFRydW5jKGJhc2UpOgogICAgICAgICAgICAgICAgZGVmIF9fdHJ1bmNfXyhzZWxmKToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDIKICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnQoSnVzdFRydW5jKCkpLCA0MikKCiAgICAgICAgICAgIGZvciB0cnVuY19yZXN1bHRfYmFzZSBpbiAob2JqZWN0LCBDbGFzc2ljKToKICAgICAgICAgICAgICAgIGNsYXNzIEludGVncmFsKHRydW5jX3Jlc3VsdF9iYXNlKToKICAgICAgICAgICAgICAgICAgICBkZWYgX19pbnRfXyhzZWxmKToKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQyCgogICAgICAgICAgICAgICAgY2xhc3MgVHJ1bmNSZXR1cm5zTm9uSW50KGJhc2UpOgogICAgICAgICAgICAgICAgICAgIGRlZiBfX3RydW5jX18oc2VsZik6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJbnRlZ3JhbCgpCiAgICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludChUcnVuY1JldHVybnNOb25JbnQoKSksIDQyKQoKICAgICAgICAgICAgICAgIGNsYXNzIE5vbkludGVncmFsKHRydW5jX3Jlc3VsdF9iYXNlKToKICAgICAgICAgICAgICAgICAgICBkZWYgX190cnVuY19fKHNlbGYpOgogICAgICAgICAgICAgICAgICAgICAgICAjIENoZWNrIHRoYXQgd2UgYXZvaWQgaW5maW5pdGUgcmVjdXJzaW9uLgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uSW50ZWdyYWwoKQoKICAgICAgICAgICAgICAgIGNsYXNzIFRydW5jUmV0dXJuc05vbkludGVncmFsKGJhc2UpOgogICAgICAgICAgICAgICAgICAgIGRlZiBfX3RydW5jX18oc2VsZik6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25JbnRlZ3JhbCgpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaW50KFRydW5jUmV0dXJuc05vbkludGVncmFsKCkpCiAgICAgICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChzdHIoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl9fdHJ1bmNfXyByZXR1cm5lZCBub24tSW50ZWdyYWwiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAodHlwZSBOb25JbnRlZ3JhbCkiKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLmZhaWwoIkZhaWxlZCB0byByYWlzZSBUeXBlRXJyb3Igd2l0aCAlcyIgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGJhc2UsIHRydW5jX3Jlc3VsdF9iYXNlKSwpKQoKICAgIGRlZiB0ZXN0X2Vycm9yX21lc3NhZ2Uoc2VsZik6CiAgICAgICAgdGVzdGxpc3QgPSAoJ1x4YmQnLCAnMTIzXHhiZCcsICcgIDEyMyA0NTYgICcpCiAgICAgICAgZm9yIHMgaW4gdGVzdGxpc3Q6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGludChzKQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRJbihzLnN0cmlwKCksIGUuYXJnc1swXSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuZmFpbCgiRXhwZWN0ZWQgaW50KCVyKSB0byByYWlzZSBhIFZhbHVlRXJyb3IiLCBzKQoKZGVmIHRlc3RfbWFpbigpOgogICAgcnVuX3VuaXR0ZXN0KEludFRlc3RDYXNlcykKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICB0ZXN0X21haW4oKQo=',
'/Lib/test/regrtest.py':'IyEgL3Vzci9iaW4vcHl0aG9uMy4zCgoiIiIKVXNhZ2U6CgpweXRob24gLW0gdGVzdCBbb3B0aW9uc10gW3Rlc3RfbmFtZTEgW3Rlc3RfbmFtZTIgLi4uXV0KcHl0aG9uIHBhdGgvdG8vTGliL3Rlc3QvcmVncnRlc3QucHkgW29wdGlvbnNdIFt0ZXN0X25hbWUxIFt0ZXN0X25hbWUyIC4uLl1dCgoKSWYgbm8gYXJndW1lbnRzIG9yIG9wdGlvbnMgYXJlIHByb3ZpZGVkLCBmaW5kcyBhbGwgZmlsZXMgbWF0Y2hpbmcKdGhlIHBhdHRlcm4gInRlc3RfKiIgaW4gdGhlIExpYi90ZXN0IHN1YmRpcmVjdG9yeSBhbmQgcnVucwp0aGVtIGluIGFscGhhYmV0aWNhbCBvcmRlciAoYnV0IHNlZSAtTSBhbmQgLXUsIGJlbG93LCBmb3IgZXhjZXB0aW9ucykuCgpGb3IgbW9yZSByaWdvcm91cyB0ZXN0aW5nLCBpdCBpcyB1c2VmdWwgdG8gdXNlIHRoZSBmb2xsb3dpbmcKY29tbWFuZCBsaW5lOgoKcHl0aG9uIC1FIC1XZCAtbSB0ZXN0IFtvcHRpb25zXSBbdGVzdF9uYW1lMSAuLi5dCgoKT3B0aW9uczoKCi1oLy0taGVscCAgICAgICAtLSBwcmludCB0aGlzIHRleHQgYW5kIGV4aXQKLS10aW1lb3V0IFRJTUVPVVQKICAgICAgICAgICAgICAgIC0tIGR1bXAgdGhlIHRyYWNlYmFjayBhbmQgZXhpdCBpZiBhIHRlc3QgdGFrZXMgbW9yZQogICAgICAgICAgICAgICAgICAgdGhhbiBUSU1FT1VUIHNlY29uZHM7IGRpc2FibGVkIGlmIFRJTUVPVVQgaXMgbmVnYXRpdmUKICAgICAgICAgICAgICAgICAgIG9yIGVxdWFscyB0byB6ZXJvCi0td2FpdCAgICAgICAgICAtLSB3YWl0IGZvciB1c2VyIGlucHV0LCBlLmcuLCBhbGxvdyBhIGRlYnVnZ2VyIHRvIGJlIGF0dGFjaGVkCgpWZXJib3NpdHkKCi12Ly0tdmVyYm9zZSAgICAtLSBydW4gdGVzdHMgaW4gdmVyYm9zZSBtb2RlIHdpdGggb3V0cHV0IHRvIHN0ZG91dAotdy8tLXZlcmJvc2UyICAgLS0gcmUtcnVuIGZhaWxlZCB0ZXN0cyBpbiB2ZXJib3NlIG1vZGUKLVcvLS12ZXJib3NlMyAgIC0tIGRpc3BsYXkgdGVzdCBvdXRwdXQgb24gZmFpbHVyZQotZC8tLWRlYnVnICAgICAgLS0gcHJpbnQgdHJhY2ViYWNrIGZvciBmYWlsZWQgdGVzdHMKLXEvLS1xdWlldCAgICAgIC0tIG5vIG91dHB1dCB1bmxlc3Mgb25lIG9yIG1vcmUgdGVzdHMgZmFpbAotby8tLXNsb3cgICAgICAgLS0gcHJpbnQgdGhlIHNsb3dlc3QgMTAgdGVzdHMKICAgLS1oZWFkZXIgICAgIC0tIHByaW50IGhlYWRlciB3aXRoIGludGVycHJldGVyIGluZm8KClNlbGVjdGluZyB0ZXN0cwoKLXIvLS1yYW5kb21pemUgIC0tIHJhbmRvbWl6ZSB0ZXN0IGV4ZWN1dGlvbiBvcmRlciAoc2VlIGJlbG93KQogICAtLXJhbmRzZWVkICAgLS0gcGFzcyBhIHJhbmRvbSBzZWVkIHRvIHJlcHJvZHVjZSBhIHByZXZpb3VzIHJhbmRvbSBydW4KLWYvLS1mcm9tZmlsZSAgIC0tIHJlYWQgbmFtZXMgb2YgdGVzdHMgdG8gcnVuIGZyb20gYSBmaWxlIChzZWUgYmVsb3cpCi14Ly0tZXhjbHVkZSAgICAtLSBhcmd1bWVudHMgYXJlIHRlc3RzIHRvICpleGNsdWRlKgotcy8tLXNpbmdsZSAgICAgLS0gc2luZ2xlIHN0ZXAgdGhyb3VnaCBhIHNldCBvZiB0ZXN0cyAoc2VlIGJlbG93KQotbS8tLW1hdGNoIFBBVCAgLS0gbWF0Y2ggdGVzdCBjYXNlcyBhbmQgbWV0aG9kcyB3aXRoIGdsb2IgcGF0dGVybiBQQVQKLUcvLS1mYWlsZmFzdCAgIC0tIGZhaWwgYXMgc29vbiBhcyBhIHRlc3QgZmFpbHMgKG9ubHkgd2l0aCAtdiBvciAtVykKLXUvLS11c2UgUkVTMSxSRVMyLC4uLgogICAgICAgICAgICAgICAgLS0gc3BlY2lmeSB3aGljaCBzcGVjaWFsIHJlc291cmNlIGludGVuc2l2ZSB0ZXN0cyB0byBydW4KLU0vLS1tZW1saW1pdCBMSU1JVAogICAgICAgICAgICAgICAgLS0gcnVuIHZlcnkgbGFyZ2UgbWVtb3J5LWNvbnN1bWluZyB0ZXN0cwogICAtLXRlc3RkaXIgRElSCiAgICAgICAgICAgICAgICAtLSBleGVjdXRlIHRlc3QgZmlsZXMgaW4gdGhlIHNwZWNpZmllZCBkaXJlY3RvcnkgKGluc3RlYWQKICAgICAgICAgICAgICAgICAgIG9mIHRoZSBQeXRob24gc3RkbGliIHRlc3Qgc3VpdGUpCgpTcGVjaWFsIHJ1bnMKCi1sLy0tZmluZGxlYWtzICAtLSBpZiBHQyBpcyBhdmFpbGFibGUgZGV0ZWN0IHRlc3RzIHRoYXQgbGVhayBtZW1vcnkKLUwvLS1ydW5sZWFrcyAgIC0tIHJ1biB0aGUgbGVha3MoMSkgY29tbWFuZCBqdXN0IGJlZm9yZSBleGl0Ci1SLy0taHVudHJsZWFrcyBSVU5DT1VOVFMKICAgICAgICAgICAgICAgIC0tIHNlYXJjaCBmb3IgcmVmZXJlbmNlIGxlYWtzIChuZWVkcyBkZWJ1ZyBidWlsZCwgdi4gc2xvdykKLWovLS1tdWx0aXByb2Nlc3MgUFJPQ0VTU0VTCiAgICAgICAgICAgICAgICAtLSBydW4gUFJPQ0VTU0VTIHByb2Nlc3NlcyBhdCBvbmNlCi1ULy0tY292ZXJhZ2UgICAtLSB0dXJuIG9uIGNvZGUgY292ZXJhZ2UgdHJhY2luZyB1c2luZyB0aGUgdHJhY2UgbW9kdWxlCi1ELy0tY292ZXJkaXIgRElSRUNUT1JZCiAgICAgICAgICAgICAgICAtLSBEaXJlY3Rvcnkgd2hlcmUgY292ZXJhZ2UgZmlsZXMgYXJlIHB1dAotTi8tLW5vY292ZXJkaXIgLS0gUHV0IGNvdmVyYWdlIGZpbGVzIGFsb25nc2lkZSBtb2R1bGVzCi10Ly0tdGhyZXNob2xkIFRIUkVTSE9MRAogICAgICAgICAgICAgICAgLS0gY2FsbCBnYy5zZXRfdGhyZXNob2xkKFRIUkVTSE9MRCkKLW4vLS1ub3dpbmRvd3MgIC0tIHN1cHByZXNzIGVycm9yIG1lc3NhZ2UgYm94ZXMgb24gV2luZG93cwotRi8tLWZvcmV2ZXIgICAgLS0gcnVuIHRoZSBzcGVjaWZpZWQgdGVzdHMgaW4gYSBsb29wLCB1bnRpbCBhbiBlcnJvciBoYXBwZW5zCgoKQWRkaXRpb25hbCBPcHRpb24gRGV0YWlsczoKCi1yIHJhbmRvbWl6ZXMgdGVzdCBleGVjdXRpb24gb3JkZXIuIFlvdSBjYW4gdXNlIC0tcmFuZHNlZWQ9aW50IHRvIHByb3ZpZGUgYQppbnQgc2VlZCB2YWx1ZSBmb3IgdGhlIHJhbmRvbWl6ZXI7IHRoaXMgaXMgdXNlZnVsIGZvciByZXByb2R1Y2luZyB0cm91Ymxlc29tZQp0ZXN0IG9yZGVycy4KCi1zIE9uIHRoZSBmaXJzdCBpbnZvY2F0aW9uIG9mIHJlZ3J0ZXN0IHVzaW5nIC1zLCB0aGUgZmlyc3QgdGVzdCBmaWxlIGZvdW5kCm9yIHRoZSBmaXJzdCB0ZXN0IGZpbGUgZ2l2ZW4gb24gdGhlIGNvbW1hbmQgbGluZSBpcyBydW4sIGFuZCB0aGUgbmFtZSBvZgp0aGUgbmV4dCB0ZXN0IGlzIHJlY29yZGVkIGluIGEgZmlsZSBuYW1lZCBweW5leHR0ZXN0LiAgSWYgcnVuIGZyb20gdGhlClB5dGhvbiBidWlsZCBkaXJlY3RvcnksIHB5bmV4dHRlc3QgaXMgbG9jYXRlZCBpbiB0aGUgJ2J1aWxkJyBzdWJkaXJlY3RvcnksCm90aGVyd2lzZSBpdCBpcyBsb2NhdGVkIGluIHRlbXBmaWxlLmdldHRlbXBkaXIoKS4gIE9uIHN1YnNlcXVlbnQgcnVucywKdGhlIHRlc3QgaW4gcHluZXh0dGVzdCBpcyBydW4sIGFuZCB0aGUgbmV4dCB0ZXN0IGlzIHdyaXR0ZW4gdG8gcHluZXh0dGVzdC4KV2hlbiB0aGUgbGFzdCB0ZXN0IGhhcyBiZWVuIHJ1biwgcHluZXh0dGVzdCBpcyBkZWxldGVkLiAgSW4gdGhpcyB3YXkgaXQKaXMgcG9zc2libGUgdG8gc2luZ2xlIHN0ZXAgdGhyb3VnaCB0aGUgdGVzdCBmaWxlcy4gIFRoaXMgaXMgdXNlZnVsIHdoZW4KZG9pbmcgbWVtb3J5IGFuYWx5c2lzIG9uIHRoZSBQeXRob24gaW50ZXJwcmV0ZXIsIHdoaWNoIHByb2Nlc3MgdGVuZHMgdG8KY29uc3VtZSB0b28gbWFueSByZXNvdXJjZXMgdG8gcnVuIHRoZSBmdWxsIHJlZ3Jlc3Npb24gdGVzdCBub24tc3RvcC4KCi1TIGlzIHVzZWQgdG8gY29udGludWUgcnVubmluZyB0ZXN0cyBhZnRlciBhbiBhYm9ydGVkIHJ1bi4gIEl0IHdpbGwKbWFpbnRhaW4gdGhlIG9yZGVyIGEgc3RhbmRhcmQgcnVuIChpZSwgdGhpcyBhc3N1bWVzIC1yIGlzIG5vdCB1c2VkKS4KVGhpcyBpcyB1c2VmdWwgYWZ0ZXIgdGhlIHRlc3RzIGhhdmUgcHJlbWF0dXJlbHkgc3RvcHBlZCBmb3Igc29tZSBleHRlcm5hbApyZWFzb24gYW5kIHlvdSB3YW50IHRvIHN0YXJ0IHJ1bm5pbmcgZnJvbSB3aGVyZSB5b3UgbGVmdCBvZmYgcmF0aGVyCnRoYW4gc3RhcnRpbmcgZnJvbSB0aGUgYmVnaW5uaW5nLgoKLWYgcmVhZHMgdGhlIG5hbWVzIG9mIHRlc3RzIGZyb20gdGhlIGZpbGUgZ2l2ZW4gYXMgZidzIGFyZ3VtZW50LCBvbmUKb3IgbW9yZSB0ZXN0IG5hbWVzIHBlciBsaW5lLiAgV2hpdGVzcGFjZSBpcyBpZ25vcmVkLiAgQmxhbmsgbGluZXMgYW5kCmxpbmVzIGJlZ2lubmluZyB3aXRoICcjJyBhcmUgaWdub3JlZC4gIFRoaXMgaXMgZXNwZWNpYWxseSB1c2VmdWwgZm9yCndoaXR0bGluZyBkb3duIGZhaWx1cmVzIGludm9sdmluZyBpbnRlcmFjdGlvbnMgYW1vbmcgdGVzdHMuCgotTCBjYXVzZXMgdGhlIGxlYWtzKDEpIGNvbW1hbmQgdG8gYmUgcnVuIGp1c3QgYmVmb3JlIGV4aXQgaWYgaXQgZXhpc3RzLgpsZWFrcygxKSBpcyBhdmFpbGFibGUgb24gTWFjIE9TIFggYW5kIHByZXN1bWFibHkgb24gc29tZSBvdGhlcgpGcmVlQlNELWRlcml2ZWQgc3lzdGVtcy4KCi1SIHJ1bnMgZWFjaCB0ZXN0IHNldmVyYWwgdGltZXMgYW5kIGV4YW1pbmVzIHN5cy5nZXR0b3RhbHJlZmNvdW50KCkgdG8Kc2VlIGlmIHRoZSB0ZXN0IGFwcGVhcnMgdG8gYmUgbGVha2luZyByZWZlcmVuY2VzLiAgVGhlIGFyZ3VtZW50IHNob3VsZApiZSBvZiB0aGUgZm9ybSBzdGFiOnJ1bjpmbmFtZSB3aGVyZSAnc3RhYicgaXMgdGhlIG51bWJlciBvZiB0aW1lcyB0aGUKdGVzdCBpcyBydW4gdG8gbGV0IGdldHRvdGFscmVmY291bnQgc2V0dGxlIGRvd24sICdydW4nIGlzIHRoZSBudW1iZXIKb2YgdGltZXMgZnVydGhlciBpdCBpcyBydW4gYW5kICdmbmFtZScgaXMgdGhlIG5hbWUgb2YgdGhlIGZpbGUgdGhlCnJlcG9ydHMgYXJlIHdyaXR0ZW4gdG8uICBUaGVzZSBwYXJhbWV0ZXJzIGFsbCBoYXZlIGRlZmF1bHRzICg1LCA0IGFuZAoicmVmbG9nLnR4dCIgcmVzcGVjdGl2ZWx5KSwgYW5kIHRoZSBtaW5pbWFsIGludm9jYXRpb24gaXMgJy1SIDonLgoKLU0gcnVucyB0ZXN0cyB0aGF0IHJlcXVpcmUgYW4gZXhvcmJpdGFudCBhbW91bnQgb2YgbWVtb3J5LiBUaGVzZSB0ZXN0cwp0eXBpY2FsbHkgdHJ5IHRvIGFzY2VydGFpbiBjb250YWluZXJzIGtlZXAgd29ya2luZyB3aGVuIGNvbnRhaW5pbmcgbW9yZSB0aGFuCjIgYmlsbGlvbiBvYmplY3RzLCB3aGljaCBvbmx5IHdvcmtzIG9uIDY0LWJpdCBzeXN0ZW1zLiBUaGVyZSBhcmUgYWxzbyBzb21lCnRlc3RzIHRoYXQgdHJ5IHRvIGV4aGF1c3QgdGhlIGFkZHJlc3Mgc3BhY2Ugb2YgdGhlIHByb2Nlc3MsIHdoaWNoIG9ubHkgbWFrZXMKc2Vuc2Ugb24gMzItYml0IHN5c3RlbXMgd2l0aCBhdCBsZWFzdCAyR2Igb2YgbWVtb3J5LiBUaGUgcGFzc2VkLWluIG1lbWxpbWl0LAp3aGljaCBpcyBhIHN0cmluZyBpbiB0aGUgZm9ybSBvZiAnMi41R2InLCBkZXRlcm1pbmVzIGhvd211Y2ggbWVtb3J5IHRoZQp0ZXN0cyB3aWxsIGxpbWl0IHRoZW1zZWx2ZXMgdG8gKGJ1dCB0aGV5IG1heSBnbyBzbGlnaHRseSBvdmVyLikgVGhlIG51bWJlcgpzaG91bGRuJ3QgYmUgbW9yZSBtZW1vcnkgdGhhbiB0aGUgbWFjaGluZSBoYXMgKGluY2x1ZGluZyBzd2FwIG1lbW9yeSkuIFlvdQpzaG91bGQgYWxzbyBrZWVwIGluIG1pbmQgdGhhdCBzd2FwIG1lbW9yeSBpcyBnZW5lcmFsbHkgbXVjaCwgbXVjaCBzbG93ZXIKdGhhbiBSQU0sIGFuZCBzZXR0aW5nIG1lbWxpbWl0IHRvIGFsbCBhdmFpbGFibGUgUkFNIG9yIGhpZ2hlciB3aWxsIGhlYXZpbHkKdGF4IHRoZSBtYWNoaW5lLiBPbiB0aGUgb3RoZXIgaGFuZCwgaXQgaXMgbm8gdXNlIHJ1bm5pbmcgdGhlc2UgdGVzdHMgd2l0aCBhCmxpbWl0IG9mIGxlc3MgdGhhbiAyLjVHYiwgYW5kIG1hbnkgcmVxdWlyZSBtb3JlIHRoYW4gMjBHYi4gVGVzdHMgdGhhdCBleHBlY3QKdG8gdXNlIG1vcmUgdGhhbiBtZW1saW1pdCBtZW1vcnkgd2lsbCBiZSBza2lwcGVkLiBUaGUgYmlnLW1lbW9yeSB0ZXN0cwpnZW5lcmFsbHkgcnVuIHZlcnksIHZlcnkgbG9uZy4KCi11IGlzIHVzZWQgdG8gc3BlY2lmeSB3aGljaCBzcGVjaWFsIHJlc291cmNlIGludGVuc2l2ZSB0ZXN0cyB0byBydW4sCnN1Y2ggYXMgdGhvc2UgcmVxdWlyaW5nIGxhcmdlIGZpbGUgc3VwcG9ydCBvciBuZXR3b3JrIGNvbm5lY3Rpdml0eS4KVGhlIGFyZ3VtZW50IGlzIGEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2Ygd29yZHMgaW5kaWNhdGluZyB0aGUKcmVzb3VyY2VzIHRvIHRlc3QuICBDdXJyZW50bHkgb25seSB0aGUgZm9sbG93aW5nIGFyZSBkZWZpbmVkOgoKICAgIGFsbCAtICAgICAgIEVuYWJsZSBhbGwgc3BlY2lhbCByZXNvdXJjZXMuCgogICAgbm9uZSAtICAgICAgRGlzYWJsZSBhbGwgc3BlY2lhbCByZXNvdXJjZXMgKHRoaXMgaXMgdGhlIGRlZmF1bHQpLgoKICAgIGF1ZGlvIC0gICAgIFRlc3RzIHRoYXQgdXNlIHRoZSBhdWRpbyBkZXZpY2UuICAoVGhlcmUgYXJlIGtub3duCiAgICAgICAgICAgICAgICBjYXNlcyBvZiBicm9rZW4gYXVkaW8gZHJpdmVycyB0aGF0IGNhbiBjcmFzaCBQeXRob24gb3IKICAgICAgICAgICAgICAgIGV2ZW4gdGhlIExpbnV4IGtlcm5lbC4pCgogICAgY3Vyc2VzIC0gICAgVGVzdHMgdGhhdCB1c2UgY3Vyc2VzIGFuZCB3aWxsIG1vZGlmeSB0aGUgdGVybWluYWwncwogICAgICAgICAgICAgICAgc3RhdGUgYW5kIG91dHB1dCBtb2Rlcy4KCiAgICBsYXJnZWZpbGUgLSBJdCBpcyBva2F5IHRvIHJ1biBzb21lIHRlc3QgdGhhdCBtYXkgY3JlYXRlIGh1Z2UKICAgICAgICAgICAgICAgIGZpbGVzLiAgVGhlc2UgdGVzdHMgY2FuIHRha2UgYSBsb25nIHRpbWUgYW5kIG1heQogICAgICAgICAgICAgICAgY29uc3VtZSA+MkdCIG9mIGRpc2sgc3BhY2UgdGVtcG9yYXJpbHkuCgogICAgbmV0d29yayAtICAgSXQgaXMgb2theSB0byBydW4gdGVzdHMgdGhhdCB1c2UgZXh0ZXJuYWwgbmV0d29yawogICAgICAgICAgICAgICAgcmVzb3VyY2UsIGUuZy4gdGVzdGluZyBTU0wgc3VwcG9ydCBmb3Igc29ja2V0cy4KCiAgICBkZWNpbWFsIC0gICBUZXN0IHRoZSBkZWNpbWFsIG1vZHVsZSBhZ2FpbnN0IGEgbGFyZ2Ugc3VpdGUgdGhhdAogICAgICAgICAgICAgICAgdmVyaWZpZXMgY29tcGxpYW5jZSB3aXRoIHN0YW5kYXJkcy4KCiAgICBjcHUgLSAgICAgICBVc2VkIGZvciBjZXJ0YWluIENQVS1oZWF2eSB0ZXN0cy4KCiAgICBzdWJwcm9jZXNzICBSdW4gYWxsIHRlc3RzIGZvciB0aGUgc3VicHJvY2VzcyBtb2R1bGUuCgogICAgdXJsZmV0Y2ggLSAgSXQgaXMgb2theSB0byBkb3dubG9hZCBmaWxlcyByZXF1aXJlZCBvbiB0ZXN0aW5nLgoKICAgIGd1aSAtICAgICAgIFJ1biB0ZXN0cyB0aGF0IHJlcXVpcmUgYSBydW5uaW5nIEdVSS4KClRvIGVuYWJsZSBhbGwgcmVzb3VyY2VzIGV4Y2VwdCBvbmUsIHVzZSAnLXVhbGwsLTxyZXNvdXJjZT4nLiAgRm9yCmV4YW1wbGUsIHRvIHJ1biBhbGwgdGhlIHRlc3RzIGV4Y2VwdCBmb3IgdGhlIGd1aSB0ZXN0cywgZ2l2ZSB0aGUKb3B0aW9uICctdWFsbCwtZ3VpJy4KIiIiCgojIFdlIGltcG9ydCBpbXBvcnRsaWIgKkFTQVAqIGluIG9yZGVyIHRvIHRlc3QgIzE1Mzg2CmltcG9ydCBpbXBvcnRsaWIKCmltcG9ydCBidWlsdGlucwppbXBvcnQgZmF1bHRoYW5kbGVyCmltcG9ydCBnZXRvcHQKaW1wb3J0IGlvCmltcG9ydCBqc29uCmltcG9ydCBsb2dnaW5nCmltcG9ydCBvcwppbXBvcnQgcGxhdGZvcm0KaW1wb3J0IHJhbmRvbQppbXBvcnQgcmUKaW1wb3J0IHNodXRpbAppbXBvcnQgc2lnbmFsCmltcG9ydCBzeXMKaW1wb3J0IHN5c2NvbmZpZwppbXBvcnQgdGVtcGZpbGUKaW1wb3J0IHRpbWUKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgdW5pdHRlc3QKaW1wb3J0IHdhcm5pbmdzCmZyb20gaW5zcGVjdCBpbXBvcnQgaXNhYnN0cmFjdAoKdHJ5OgogICAgaW1wb3J0IHRocmVhZGluZwpleGNlcHQgSW1wb3J0RXJyb3I6CiAgICB0aHJlYWRpbmcgPSBOb25lCnRyeToKICAgIGltcG9ydCBtdWx0aXByb2Nlc3NpbmcucHJvY2VzcwpleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBtdWx0aXByb2Nlc3NpbmcgPSBOb25lCgoKIyBTb21lIHRpbWVzIF9fcGF0aF9fIGFuZCBfX2ZpbGVfXyBhcmUgbm90IGFic29sdXRlIChlLmcuIHdoaWxlIHJ1bm5pbmcgZnJvbQojIExpYi8pIGFuZCwgaWYgd2UgY2hhbmdlIHRoZSBDV0QgdG8gcnVuIHRoZSB0ZXN0cyBpbiBhIHRlbXBvcmFyeSBkaXIsIHNvbWUKIyBpbXBvcnRzIG1pZ2h0IGZhaWwuICBUaGlzIGFmZmVjdHMgb25seSB0aGUgbW9kdWxlcyBpbXBvcnRlZCBiZWZvcmUgb3MuY2hkaXIoKS4KIyBUaGVzZSBtb2R1bGVzIGFyZSBzZWFyY2hlZCBmaXJzdCBpbiBzeXMucGF0aFswXSAoc28gJycgLS0gdGhlIENXRCkgYW5kIGlmCiMgdGhleSBhcmUgZm91bmQgaW4gdGhlIENXRCB0aGVpciBfX2ZpbGVfXyBhbmQgX19wYXRoX18gd2lsbCBiZSByZWxhdGl2ZSAodGhpcwojIGhhcHBlbnMgYmVmb3JlIHRoZSBjaGRpcikuICBBbGwgdGhlIG1vZHVsZXMgaW1wb3J0ZWQgYWZ0ZXIgdGhlIGNoZGlyLCBhcmUKIyBub3QgZm91bmQgaW4gdGhlIENXRCwgYW5kIHNpbmNlIHRoZSBvdGhlciBwYXRocyBpbiBzeXMucGF0aFsxOl0gYXJlIGFic29sdXRlCiMgKHNpdGUucHkgYWJzb2x1dGl6ZSB0aGVtKSwgdGhlIF9fZmlsZV9fIGFuZCBfX3BhdGhfXyB3aWxsIGJlIGFic29sdXRlIHRvby4KIyBUaGVyZWZvcmUgaXQgaXMgbmVjZXNzYXJ5IHRvIGFic29sdXRpemUgbWFudWFsbHkgdGhlIF9fZmlsZV9fIGFuZCBfX3BhdGhfXyBvZgojIHRoZSBwYWNrYWdlcyB0byBwcmV2ZW50IGxhdGVyIGltcG9ydHMgdG8gZmFpbCB3aGVuIHRoZSBDV0QgaXMgZGlmZmVyZW50Lgpmb3IgbW9kdWxlIGluIHN5cy5tb2R1bGVzLnZhbHVlcygpOgogICAgaWYgaGFzYXR0cihtb2R1bGUsICdfX3BhdGhfXycpOgogICAgICAgIG1vZHVsZS5fX3BhdGhfXyA9IFtvcy5wYXRoLmFic3BhdGgocGF0aCkgZm9yIHBhdGggaW4gbW9kdWxlLl9fcGF0aF9fXQogICAgaWYgaGFzYXR0cihtb2R1bGUsICdfX2ZpbGVfXycpOgogICAgICAgIG1vZHVsZS5fX2ZpbGVfXyA9IG9zLnBhdGguYWJzcGF0aChtb2R1bGUuX19maWxlX18pCgoKIyBNYWNPU1ggKGEuay5hLiBEYXJ3aW4pIGhhcyBhIGRlZmF1bHQgc3RhY2sgc2l6ZSB0aGF0IGlzIHRvbyBzbWFsbAojIGZvciBkZWVwbHkgcmVjdXJzaXZlIHJlZ3VsYXIgZXhwcmVzc2lvbnMuICBXZSBzZWUgdGhpcyBhcyBjcmFzaGVzIGluCiMgdGhlIFB5dGhvbiB0ZXN0IHN1aXRlIHdoZW4gcnVubmluZyB0ZXN0X3JlLnB5IGFuZCB0ZXN0X3NyZS5weS4gIFRoZQojIGZpeCBpcyB0byBzZXQgdGhlIHN0YWNrIGxpbWl0IHRvIDIwNDguCiMgVGhpcyBhcHByb2FjaCBtYXkgYWxzbyBiZSB1c2VmdWwgZm9yIG90aGVyIFVuaXh5IHBsYXRmb3JtcyB0aGF0CiMgc3VmZmVyIGZyb20gc21hbGwgZGVmYXVsdCBzdGFjayBsaW1pdHMuCmlmIHN5cy5wbGF0Zm9ybSA9PSAnZGFyd2luJzoKICAgIHRyeToKICAgICAgICBpbXBvcnQgcmVzb3VyY2UKICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICBwYXNzCiAgICBlbHNlOgogICAgICAgIHNvZnQsIGhhcmQgPSByZXNvdXJjZS5nZXRybGltaXQocmVzb3VyY2UuUkxJTUlUX1NUQUNLKQogICAgICAgIG5ld3NvZnQgPSBtaW4oaGFyZCwgbWF4KHNvZnQsIDEwMjQqMjA0OCkpCiAgICAgICAgcmVzb3VyY2Uuc2V0cmxpbWl0KHJlc291cmNlLlJMSU1JVF9TVEFDSywgKG5ld3NvZnQsIGhhcmQpKQoKIyBUZXN0IHJlc3VsdCBjb25zdGFudHMuClBBU1NFRCA9IDEKRkFJTEVEID0gMApFTlZfQ0hBTkdFRCA9IC0xClNLSVBQRUQgPSAtMgpSRVNPVVJDRV9ERU5JRUQgPSAtMwpJTlRFUlJVUFRFRCA9IC00CkNISUxEX0VSUk9SID0gLTUgICAjIGVycm9yIGluIGEgY2hpbGQgcHJvY2VzcwoKZnJvbSB0ZXN0IGltcG9ydCBzdXBwb3J0CgpSRVNPVVJDRV9OQU1FUyA9ICgnYXVkaW8nLCAnY3Vyc2VzJywgJ2xhcmdlZmlsZScsICduZXR3b3JrJywKICAgICAgICAgICAgICAgICAgJ2RlY2ltYWwnLCAnY3B1JywgJ3N1YnByb2Nlc3MnLCAndXJsZmV0Y2gnLCAnZ3VpJykKClRFTVBESVIgPSBvcy5wYXRoLmFic3BhdGgodGVtcGZpbGUuZ2V0dGVtcGRpcigpKQoKZGVmIHVzYWdlKG1zZyk6CiAgICBwcmludChtc2csIGZpbGU9c3lzLnN0ZGVycikKICAgIHByaW50KCJVc2UgLS1oZWxwIGZvciB1c2FnZSIsIGZpbGU9c3lzLnN0ZGVycikKICAgIHN5cy5leGl0KDIpCgoKZGVmIG1haW4odGVzdHM9Tm9uZSwgdGVzdGRpcj1Ob25lLCB2ZXJib3NlPTAsIHF1aWV0PUZhbHNlLAogICAgICAgICBleGNsdWRlPUZhbHNlLCBzaW5nbGU9MCwgcmFuZG9taXplPUZhbHNlLCBmcm9tZmlsZT1Ob25lLAogICAgICAgICBmaW5kbGVha3M9RmFsc2UsIHVzZV9yZXNvdXJjZXM9Tm9uZSwgdHJhY2U9RmFsc2UsIGNvdmVyZGlyPSdjb3ZlcmFnZScsCiAgICAgICAgIHJ1bmxlYWtzPUZhbHNlLCBodW50cmxlYWtzPUZhbHNlLCB2ZXJib3NlMj1GYWxzZSwgcHJpbnRfc2xvdz1GYWxzZSwKICAgICAgICAgcmFuZG9tX3NlZWQ9Tm9uZSwgdXNlX21wPU5vbmUsIHZlcmJvc2UzPUZhbHNlLCBmb3JldmVyPUZhbHNlLAogICAgICAgICBoZWFkZXI9RmFsc2UsIGZhaWxmYXN0PUZhbHNlLCBtYXRjaF90ZXN0cz1Ob25lKToKICAgICIiIkV4ZWN1dGUgYSB0ZXN0IHN1aXRlLgoKICAgIFRoaXMgYWxzbyBwYXJzZXMgY29tbWFuZC1saW5lIG9wdGlvbnMgYW5kIG1vZGlmaWVzIGl0cyBiZWhhdmlvcgogICAgYWNjb3JkaW5nbHkuCgogICAgdGVzdHMgLS0gYSBsaXN0IG9mIHN0cmluZ3MgY29udGFpbmluZyB0ZXN0IG5hbWVzIChvcHRpb25hbCkKICAgIHRlc3RkaXIgLS0gdGhlIGRpcmVjdG9yeSBpbiB3aGljaCB0byBsb29rIGZvciB0ZXN0cyAob3B0aW9uYWwpCgogICAgVXNlcnMgb3RoZXIgdGhhbiB0aGUgUHl0aG9uIHRlc3Qgc3VpdGUgd2lsbCBjZXJ0YWlubHkgd2FudCB0bwogICAgc3BlY2lmeSB0ZXN0ZGlyOyBpZiBpdCdzIG9taXR0ZWQsIHRoZSBkaXJlY3RvcnkgY29udGFpbmluZyB0aGUKICAgIFB5dGhvbiB0ZXN0IHN1aXRlIGlzIHNlYXJjaGVkIGZvci4KCiAgICBJZiB0aGUgdGVzdHMgYXJndW1lbnQgaXMgb21pdHRlZCwgdGhlIHRlc3RzIGxpc3RlZCBvbiB0aGUKICAgIGNvbW1hbmQtbGluZSB3aWxsIGJlIHVzZWQuICBJZiB0aGF0J3MgZW1wdHksIHRvbywgdGhlbiBhbGwgKi5weQogICAgZmlsZXMgYmVnaW5uaW5nIHdpdGggdGVzdF8gd2lsbCBiZSB1c2VkLgoKICAgIFRoZSBvdGhlciBkZWZhdWx0IGFyZ3VtZW50cyAodmVyYm9zZSwgcXVpZXQsIGV4Y2x1ZGUsCiAgICBzaW5nbGUsIHJhbmRvbWl6ZSwgZmluZGxlYWtzLCB1c2VfcmVzb3VyY2VzLCB0cmFjZSwgY292ZXJkaXIsCiAgICBwcmludF9zbG93LCBhbmQgcmFuZG9tX3NlZWQpIGFsbG93IHByb2dyYW1tZXJzIGNhbGxpbmcgbWFpbigpCiAgICBkaXJlY3RseSB0byBzZXQgdGhlIHZhbHVlcyB0aGF0IHdvdWxkIG5vcm1hbGx5IGJlIHNldCBieSBmbGFncwogICAgb24gdGhlIGNvbW1hbmQgbGluZS4KICAgICIiIgoKICAgICMgRGlzcGxheSB0aGUgUHl0aG9uIHRyYWNlYmFjayBvbiBmYXRhbCBlcnJvcnMgKGUuZy4gc2VnZmF1bHQpCiAgICBmYXVsdGhhbmRsZXIuZW5hYmxlKGFsbF90aHJlYWRzPVRydWUpCgogICAgIyBEaXNwbGF5IHRoZSBQeXRob24gdHJhY2ViYWNrIG9uIFNJR0FMUk0gb3IgU0lHVVNSMSBzaWduYWwKICAgIHNpZ25hbHMgPSBbXQogICAgaWYgaGFzYXR0cihzaWduYWwsICdTSUdBTFJNJyk6CiAgICAgICAgc2lnbmFscy5hcHBlbmQoc2lnbmFsLlNJR0FMUk0pCiAgICBpZiBoYXNhdHRyKHNpZ25hbCwgJ1NJR1VTUjEnKToKICAgICAgICBzaWduYWxzLmFwcGVuZChzaWduYWwuU0lHVVNSMSkKICAgIGZvciBzaWdudW0gaW4gc2lnbmFsczoKICAgICAgICBmYXVsdGhhbmRsZXIucmVnaXN0ZXIoc2lnbnVtLCBjaGFpbj1UcnVlKQoKICAgIHJlcGxhY2Vfc3Rkb3V0KCkKCiAgICBzdXBwb3J0LnJlY29yZF9vcmlnaW5hbF9zdGRvdXQoc3lzLnN0ZG91dCkKICAgIHRyeToKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChzeXMuYXJndlsxOl0sICdodnF4c29TOnJmOmx1OnQ6VEQ6TkxSOkZkd1dNOm5qOkdtOicsCiAgICAgICAgICAgIFsnaGVscCcsICd2ZXJib3NlJywgJ3ZlcmJvc2UyJywgJ3ZlcmJvc2UzJywgJ3F1aWV0JywKICAgICAgICAgICAgICdleGNsdWRlJywgJ3NpbmdsZScsICdzbG93JywgJ3JhbmRvbWl6ZScsICdmcm9tZmlsZT0nLCAnZmluZGxlYWtzJywKICAgICAgICAgICAgICd1c2U9JywgJ3RocmVzaG9sZD0nLCAnY292ZXJkaXI9JywgJ25vY292ZXJkaXInLAogICAgICAgICAgICAgJ3J1bmxlYWtzJywgJ2h1bnRybGVha3M9JywgJ21lbWxpbWl0PScsICdyYW5kc2VlZD0nLAogICAgICAgICAgICAgJ211bHRpcHJvY2Vzcz0nLCAnY292ZXJhZ2UnLCAnc2xhdmVhcmdzPScsICdmb3JldmVyJywgJ2RlYnVnJywKICAgICAgICAgICAgICdzdGFydD0nLCAnbm93aW5kb3dzJywgJ2hlYWRlcicsICd0ZXN0ZGlyPScsICd0aW1lb3V0PScsICd3YWl0JywKICAgICAgICAgICAgICdmYWlsZmFzdCcsICdtYXRjaD0nLCAnbmV4dD0nXSkKICAgIGV4Y2VwdCBnZXRvcHQuZXJyb3IgYXMgbXNnOgogICAgICAgIHVzYWdlKG1zZykKCiAgICAjIERlZmF1bHRzCiAgICBpZiByYW5kb21fc2VlZCBpcyBOb25lOgogICAgICAgIHJhbmRvbV9zZWVkID0gcmFuZG9tLnJhbmRyYW5nZSgxMDAwMDAwMCkKICAgIGlmIHVzZV9yZXNvdXJjZXMgaXMgTm9uZToKICAgICAgICB1c2VfcmVzb3VyY2VzID0gW10KICAgIGRlYnVnID0gRmFsc2UKICAgIHN0YXJ0ID0gTm9uZQogICAgdGltZW91dCA9IE5vbmUKICAgIGZvciBvLCBhIGluIG9wdHM6CiAgICAgICAgaWYgbyBpbiAoJy1oJywgJy0taGVscCcpOgogICAgICAgICAgICBwcmludChfX2RvY19fKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBlbGlmIG8gaW4gKCctdicsICctLXZlcmJvc2UnKToKICAgICAgICAgICAgdmVyYm9zZSArPSAxCiAgICAgICAgZWxpZiBvIGluICgnLXcnLCAnLS12ZXJib3NlMicpOgogICAgICAgICAgICB2ZXJib3NlMiA9IFRydWUKICAgICAgICBlbGlmIG8gaW4gKCctZCcsICctLWRlYnVnJyk6CiAgICAgICAgICAgIGRlYnVnID0gVHJ1ZQogICAgICAgIGVsaWYgbyBpbiAoJy1XJywgJy0tdmVyYm9zZTMnKToKICAgICAgICAgICAgdmVyYm9zZTMgPSBUcnVlCiAgICAgICAgZWxpZiBvIGluICgnLUcnLCAnLS1mYWlsZmFzdCcpOgogICAgICAgICAgICBmYWlsZmFzdCA9IFRydWUKICAgICAgICBlbGlmIG8gaW4gKCctcScsICctLXF1aWV0Jyk6CiAgICAgICAgICAgIHF1aWV0ID0gVHJ1ZTsKICAgICAgICAgICAgdmVyYm9zZSA9IDAKICAgICAgICBlbGlmIG8gaW4gKCcteCcsICctLWV4Y2x1ZGUnKToKICAgICAgICAgICAgZXhjbHVkZSA9IFRydWUKICAgICAgICBlbGlmIG8gaW4gKCctUycsICctLXN0YXJ0Jyk6CiAgICAgICAgICAgIHN0YXJ0ID0gYQogICAgICAgIGVsaWYgbyBpbiAoJy1zJywgJy0tc2luZ2xlJyk6CiAgICAgICAgICAgIHNpbmdsZSA9IDEKICAgICAgICBlbGlmIG8gPT0gJy0tbmV4dCc6CiAgICAgICAgICAgIHNpbmdsZSA9IGludChhKQogICAgICAgIGVsaWYgbyBpbiAoJy1vJywgJy0tc2xvdycpOgogICAgICAgICAgICBwcmludF9zbG93ID0gVHJ1ZQogICAgICAgIGVsaWYgbyBpbiAoJy1yJywgJy0tcmFuZG9taXplJyk6CiAgICAgICAgICAgIHJhbmRvbWl6ZSA9IFRydWUKICAgICAgICBlbGlmIG8gPT0gJy0tcmFuZHNlZWQnOgogICAgICAgICAgICByYW5kb21fc2VlZCA9IGludChhKQogICAgICAgIGVsaWYgbyBpbiAoJy1mJywgJy0tZnJvbWZpbGUnKToKICAgICAgICAgICAgZnJvbWZpbGUgPSBhCiAgICAgICAgZWxpZiBvIGluICgnLW0nLCAnLS1tYXRjaCcpOgogICAgICAgICAgICBtYXRjaF90ZXN0cyA9IGEKICAgICAgICBlbGlmIG8gaW4gKCctbCcsICctLWZpbmRsZWFrcycpOgogICAgICAgICAgICBmaW5kbGVha3MgPSBUcnVlCiAgICAgICAgZWxpZiBvIGluICgnLUwnLCAnLS1ydW5sZWFrcycpOgogICAgICAgICAgICBydW5sZWFrcyA9IFRydWUKICAgICAgICBlbGlmIG8gaW4gKCctdCcsICctLXRocmVzaG9sZCcpOgogICAgICAgICAgICBpbXBvcnQgZ2MKICAgICAgICAgICAgZ2Muc2V0X3RocmVzaG9sZChpbnQoYSkpCiAgICAgICAgZWxpZiBvIGluICgnLVQnLCAnLS1jb3ZlcmFnZScpOgogICAgICAgICAgICB0cmFjZSA9IFRydWUKICAgICAgICBlbGlmIG8gaW4gKCctRCcsICctLWNvdmVyZGlyJyk6CiAgICAgICAgICAgICMgQ1dEIGlzIHJlcGxhY2VkIHdpdGggYSB0ZW1wb3JhcnkgZGlyIGJlZm9yZSBjYWxsaW5nIG1haW4oKSwgc28gd2UKICAgICAgICAgICAgIyBuZWVkICBqb2luIGl0IHdpdGggdGhlIHNhdmVkIENXRCBzbyBpdCBnb2VzIHdoZXJlIHRoZSB1c2VyIGV4cGVjdHMuCiAgICAgICAgICAgIGNvdmVyZGlyID0gb3MucGF0aC5qb2luKHN1cHBvcnQuU0FWRURDV0QsIGEpCiAgICAgICAgZWxpZiBvIGluICgnLU4nLCAnLS1ub2NvdmVyZGlyJyk6CiAgICAgICAgICAgIGNvdmVyZGlyID0gTm9uZQogICAgICAgIGVsaWYgbyBpbiAoJy1SJywgJy0taHVudHJsZWFrcycpOgogICAgICAgICAgICBodW50cmxlYWtzID0gYS5zcGxpdCgnOicpCiAgICAgICAgICAgIGlmIGxlbihodW50cmxlYWtzKSBub3QgaW4gKDIsIDMpOgogICAgICAgICAgICAgICAgcHJpbnQoYSwgaHVudHJsZWFrcykKICAgICAgICAgICAgICAgIHVzYWdlKCctUiB0YWtlcyAyIG9yIDMgY29sb24tc2VwYXJhdGVkIGFyZ3VtZW50cycpCiAgICAgICAgICAgIGlmIG5vdCBodW50cmxlYWtzWzBdOgogICAgICAgICAgICAgICAgaHVudHJsZWFrc1swXSA9IDUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGh1bnRybGVha3NbMF0gPSBpbnQoaHVudHJsZWFrc1swXSkKICAgICAgICAgICAgaWYgbm90IGh1bnRybGVha3NbMV06CiAgICAgICAgICAgICAgICBodW50cmxlYWtzWzFdID0gNAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaHVudHJsZWFrc1sxXSA9IGludChodW50cmxlYWtzWzFdKQogICAgICAgICAgICBpZiBsZW4oaHVudHJsZWFrcykgPT0gMiBvciBub3QgaHVudHJsZWFrc1syXToKICAgICAgICAgICAgICAgIGh1bnRybGVha3NbMjpdID0gWyJyZWZsb2cudHh0Il0KICAgICAgICAgICAgIyBBdm9pZCBmYWxzZSBwb3NpdGl2ZXMgZHVlIHRvIHZhcmlvdXMgY2FjaGVzCiAgICAgICAgICAgICMgZmlsbGluZyBzbG93bHkgd2l0aCByYW5kb20gZGF0YToKICAgICAgICAgICAgd2FybV9jYWNoZXMoKQogICAgICAgIGVsaWYgbyBpbiAoJy1NJywgJy0tbWVtbGltaXQnKToKICAgICAgICAgICAgc3VwcG9ydC5zZXRfbWVtbGltaXQoYSkKICAgICAgICBlbGlmIG8gaW4gKCctdScsICctLXVzZScpOgogICAgICAgICAgICB1ID0gW3gubG93ZXIoKSBmb3IgeCBpbiBhLnNwbGl0KCcsJyldCiAgICAgICAgICAgIGZvciByIGluIHU6CiAgICAgICAgICAgICAgICBpZiByID09ICdhbGwnOgogICAgICAgICAgICAgICAgICAgIHVzZV9yZXNvdXJjZXNbOl0gPSBSRVNPVVJDRV9OQU1FUwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBpZiByID09ICdub25lJzoKICAgICAgICAgICAgICAgICAgICBkZWwgdXNlX3Jlc291cmNlc1s6XQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICByZW1vdmUgPSBGYWxzZQogICAgICAgICAgICAgICAgaWYgclswXSA9PSAnLSc6CiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIHIgPSByWzE6XQogICAgICAgICAgICAgICAgaWYgciBub3QgaW4gUkVTT1VSQ0VfTkFNRVM6CiAgICAgICAgICAgICAgICAgICAgdXNhZ2UoJ0ludmFsaWQgLXUvLS11c2Ugb3B0aW9uOiAnICsgYSkKICAgICAgICAgICAgICAgIGlmIHJlbW92ZToKICAgICAgICAgICAgICAgICAgICBpZiByIGluIHVzZV9yZXNvdXJjZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZV9yZXNvdXJjZXMucmVtb3ZlKHIpCiAgICAgICAgICAgICAgICBlbGlmIHIgbm90IGluIHVzZV9yZXNvdXJjZXM6CiAgICAgICAgICAgICAgICAgICAgdXNlX3Jlc291cmNlcy5hcHBlbmQocikKICAgICAgICBlbGlmIG8gaW4gKCctbicsICctLW5vd2luZG93cycpOgogICAgICAgICAgICBpbXBvcnQgbXN2Y3J0CiAgICAgICAgICAgIG1zdmNydC5TZXRFcnJvck1vZGUobXN2Y3J0LlNFTV9GQUlMQ1JJVElDQUxFUlJPUlN8CiAgICAgICAgICAgICAgICAgICAgbXN2Y3J0LlNFTV9OT0FMSUdOTUVOVEZBVUxURVhDRVBUfAogICAgICAgICAgICAgICAgICAgIG1zdmNydC5TRU1fTk9HUEZBVUxURVJST1JCT1h8CiAgICAgICAgICAgICAgICAgICAgbXN2Y3J0LlNFTV9OT09QRU5GSUxFRVJST1JCT1gpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG1zdmNydC5DcnRTZXRSZXBvcnRNb2RlCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgICMgcmVsZWFzZSBidWlsZAogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZm9yIG0gaW4gW21zdmNydC5DUlRfV0FSTiwgbXN2Y3J0LkNSVF9FUlJPUiwgbXN2Y3J0LkNSVF9BU1NFUlRdOgogICAgICAgICAgICAgICAgICAgIG1zdmNydC5DcnRTZXRSZXBvcnRNb2RlKG0sIG1zdmNydC5DUlREQkdfTU9ERV9GSUxFKQogICAgICAgICAgICAgICAgICAgIG1zdmNydC5DcnRTZXRSZXBvcnRGaWxlKG0sIG1zdmNydC5DUlREQkdfRklMRV9TVERFUlIpCiAgICAgICAgZWxpZiBvIGluICgnLUYnLCAnLS1mb3JldmVyJyk6CiAgICAgICAgICAgIGZvcmV2ZXIgPSBUcnVlCiAgICAgICAgZWxpZiBvIGluICgnLWonLCAnLS1tdWx0aXByb2Nlc3MnKToKICAgICAgICAgICAgdXNlX21wID0gaW50KGEpCiAgICAgICAgICAgIGlmIHVzZV9tcCA8PSAwOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGltcG9ydCBtdWx0aXByb2Nlc3NpbmcKICAgICAgICAgICAgICAgICAgICAjIFVzZSBhbGwgY29yZXMgKyBleHRyYXMgZm9yIHRlc3RzIHRoYXQgbGlrZSB0byBzbGVlcAogICAgICAgICAgICAgICAgICAgIHVzZV9tcCA9IDIgKyBtdWx0aXByb2Nlc3NpbmcuY3B1X2NvdW50KCkKICAgICAgICAgICAgICAgIGV4Y2VwdCAoSW1wb3J0RXJyb3IsIE5vdEltcGxlbWVudGVkRXJyb3IpOgogICAgICAgICAgICAgICAgICAgIHVzZV9tcCA9IDMKICAgICAgICAgICAgaWYgdXNlX21wID09IDE6CiAgICAgICAgICAgICAgICB1c2VfbXAgPSBOb25lCiAgICAgICAgZWxpZiBvID09ICctLWhlYWRlcic6CiAgICAgICAgICAgIGhlYWRlciA9IFRydWUKICAgICAgICBlbGlmIG8gPT0gJy0tc2xhdmVhcmdzJzoKICAgICAgICAgICAgYXJncywga3dhcmdzID0ganNvbi5sb2FkcyhhKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBydW50ZXN0KCphcmdzLCAqKmt3YXJncykKICAgICAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gSU5URVJSVVBURUQsICcnCiAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkKICAgICAgICAgICAgICAgIHJlc3VsdCA9IENISUxEX0VSUk9SLCBzdHIoZSkKICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgIHByaW50KCkgICAjIEZvcmNlIGEgbmV3bGluZSAoanVzdCBpbiBjYXNlKQogICAgICAgICAgICBwcmludChqc29uLmR1bXBzKHJlc3VsdCkpCiAgICAgICAgICAgIHN5cy5leGl0KDApCiAgICAgICAgZWxpZiBvID09ICctLXRlc3RkaXInOgogICAgICAgICAgICAjIENXRCBpcyByZXBsYWNlZCB3aXRoIGEgdGVtcG9yYXJ5IGRpciBiZWZvcmUgY2FsbGluZyBtYWluKCksIHNvIHdlCiAgICAgICAgICAgICMgam9pbiBpdCB3aXRoIHRoZSBzYXZlZCBDV0Qgc28gaXQgZW5kcyB1cCB3aGVyZSB0aGUgdXNlciBleHBlY3RzLgogICAgICAgICAgICB0ZXN0ZGlyID0gb3MucGF0aC5qb2luKHN1cHBvcnQuU0FWRURDV0QsIGEpCiAgICAgICAgZWxpZiBvID09ICctLXRpbWVvdXQnOgogICAgICAgICAgICBpZiBoYXNhdHRyKGZhdWx0aGFuZGxlciwgJ2R1bXBfdHJhY2ViYWNrc19sYXRlcicpOgogICAgICAgICAgICAgICAgdGltZW91dCA9IGZsb2F0KGEpCiAgICAgICAgICAgICAgICBpZiB0aW1lb3V0IDw9IDA6CiAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IE5vbmUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KCJXYXJuaW5nOiBUaGUgdGltZW91dCBvcHRpb24gcmVxdWlyZXMgIgogICAgICAgICAgICAgICAgICAgICAgImZhdWx0aGFuZGxlci5kdW1wX3RyYWNlYmFja3NfbGF0ZXIiKQogICAgICAgICAgICAgICAgdGltZW91dCA9IE5vbmUKICAgICAgICBlbGlmIG8gPT0gJy0td2FpdCc6CiAgICAgICAgICAgIGlucHV0KCJQcmVzcyBhbnkga2V5IHRvIGNvbnRpbnVlLi4uIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgoIk5vIGhhbmRsZXIgZm9yIG9wdGlvbiB7fS4gIFBsZWFzZSByZXBvcnQgdGhpcyBhcyBhIGJ1ZyAiCiAgICAgICAgICAgICAgICAgICAiYXQgaHR0cDovL2J1Z3MucHl0aG9uLm9yZy4iKS5mb3JtYXQobyksIGZpbGU9c3lzLnN0ZGVycikKICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgIGlmIHNpbmdsZSBhbmQgZnJvbWZpbGU6CiAgICAgICAgdXNhZ2UoIi1zIGFuZCAtZiBkb24ndCBnbyB0b2dldGhlciEiKQogICAgaWYgdXNlX21wIGFuZCB0cmFjZToKICAgICAgICB1c2FnZSgiLVQgYW5kIC1qIGRvbid0IGdvIHRvZ2V0aGVyISIpCiAgICBpZiB1c2VfbXAgYW5kIGZpbmRsZWFrczoKICAgICAgICB1c2FnZSgiLWwgYW5kIC1qIGRvbid0IGdvIHRvZ2V0aGVyISIpCiAgICBpZiB1c2VfbXAgYW5kIHN1cHBvcnQubWF4X21lbXVzZToKICAgICAgICB1c2FnZSgiLU0gYW5kIC1qIGRvbid0IGdvIHRvZ2V0aGVyISIpCiAgICBpZiBmYWlsZmFzdCBhbmQgbm90ICh2ZXJib3NlIG9yIHZlcmJvc2UzKToKICAgICAgICB1c2FnZSgiLUcvLS1mYWlsZmFzdCBuZWVkcyBlaXRoZXIgLXYgb3IgLVciKQoKICAgIGdvb2QgPSBbXQogICAgYmFkID0gW10KICAgIHNraXBwZWQgPSBbXQogICAgcmVzb3VyY2VfZGVuaWVkcyA9IFtdCiAgICBlbnZpcm9ubWVudF9jaGFuZ2VkID0gW10KICAgIGludGVycnVwdGVkID0gRmFsc2UKCiAgICBpZiBmaW5kbGVha3M6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpbXBvcnQgZ2MKICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgIHByaW50KCdObyBHQyBhdmFpbGFibGUsIGRpc2FibGluZyBmaW5kbGVha3MuJykKICAgICAgICAgICAgZmluZGxlYWtzID0gRmFsc2UKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIFVuY29tbWVudCB0aGUgbGluZSBiZWxvdyB0byByZXBvcnQgZ2FyYmFnZSB0aGF0IGlzIG5vdAogICAgICAgICAgICAjIGZyZWVhYmxlIGJ5IHJlZmVyZW5jZSBjb3VudGluZyBhbG9uZS4gIEJ5IGRlZmF1bHQgb25seQogICAgICAgICAgICAjIGdhcmJhZ2UgdGhhdCBpcyBub3QgY29sbGVjdGFibGUgYnkgdGhlIEdDIGlzIHJlcG9ydGVkLgogICAgICAgICAgICAjZ2Muc2V0X2RlYnVnKGdjLkRFQlVHX1NBVkVBTEwpCiAgICAgICAgICAgIGZvdW5kX2dhcmJhZ2UgPSBbXQoKICAgIGlmIHNpbmdsZToKICAgICAgICBmaWxlbmFtZSA9IG9zLnBhdGguam9pbihURU1QRElSLCAncHluZXh0dGVzdCcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmcCA9IG9wZW4oZmlsZW5hbWUsICdyJykKICAgICAgICAgICAgbmV4dF90ZXN0ID0gZnAucmVhZCgpLnN0cmlwKCkKICAgICAgICAgICAgdGVzdHMgPSBbbmV4dF90ZXN0XQogICAgICAgICAgICBmcC5jbG9zZSgpCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIHBhc3MKCiAgICBpZiBmcm9tZmlsZToKICAgICAgICB0ZXN0cyA9IFtdCiAgICAgICAgZnAgPSBvcGVuKG9zLnBhdGguam9pbihzdXBwb3J0LlNBVkVEQ1dELCBmcm9tZmlsZSkpCiAgICAgICAgY291bnRfcGF0ID0gcmUuY29tcGlsZShyJ1xbXHMqXGQrL1xzKlxkK1xdJykKICAgICAgICBmb3IgbGluZSBpbiBmcDoKICAgICAgICAgICAgbGluZSA9IGNvdW50X3BhdC5zdWIoJycsIGxpbmUpCiAgICAgICAgICAgIGd1dHMgPSBsaW5lLnNwbGl0KCkgIyBhc3N1bWluZyBubyB0ZXN0IGhhcyB3aGl0ZXNwYWNlIGluIGl0cyBuYW1lCiAgICAgICAgICAgIGlmIGd1dHMgYW5kIG5vdCBndXRzWzBdLnN0YXJ0c3dpdGgoJyMnKToKICAgICAgICAgICAgICAgIHRlc3RzLmV4dGVuZChndXRzKQogICAgICAgIGZwLmNsb3NlKCkKCiAgICAjIFN0cmlwIC5weSBleHRlbnNpb25zLgogICAgcmVtb3ZlcHkoYXJncykKICAgIHJlbW92ZXB5KHRlc3RzKQoKICAgIHN0ZHRlc3RzID0gU1REVEVTVFNbOl0KICAgIG5vdHRlc3RzID0gTk9UVEVTVFMuY29weSgpCiAgICBpZiBleGNsdWRlOgogICAgICAgIGZvciBhcmcgaW4gYXJnczoKICAgICAgICAgICAgaWYgYXJnIGluIHN0ZHRlc3RzOgogICAgICAgICAgICAgICAgc3RkdGVzdHMucmVtb3ZlKGFyZykKICAgICAgICAgICAgbm90dGVzdHMuYWRkKGFyZykKICAgICAgICBhcmdzID0gW10KCiAgICAjIEZvciBhIHBhcnRpYWwgcnVuLCB3ZSBkbyBub3QgbmVlZCB0byBjbHV0dGVyIHRoZSBvdXRwdXQuCiAgICBpZiB2ZXJib3NlIG9yIGhlYWRlciBvciBub3QgKHF1aWV0IG9yIHNpbmdsZSAhPSAxIG9yIHRlc3RzIG9yIGFyZ3MpOgogICAgICAgICMgUHJpbnQgYmFzaWMgcGxhdGZvcm0gaW5mb3JtYXRpb24KICAgICAgICBwcmludCgiPT0iLCBwbGF0Zm9ybS5weXRob25faW1wbGVtZW50YXRpb24oKSwgKnN5cy52ZXJzaW9uLnNwbGl0KCkpCiAgICAgICAgcHJpbnQoIj09ICAiLCBwbGF0Zm9ybS5wbGF0Zm9ybShhbGlhc2VkPVRydWUpLAogICAgICAgICAgICAgICAgICAgICAgIiVzLWVuZGlhbiIgJSBzeXMuYnl0ZW9yZGVyKQogICAgICAgIHByaW50KCI9PSAgIiwgb3MuZ2V0Y3dkKCkpCiAgICAgICAgcHJpbnQoIlRlc3Rpbmcgd2l0aCBmbGFnczoiLCBzeXMuZmxhZ3MpCgogICAgIyBpZiB0ZXN0ZGlyIGlzIHNldCwgdGhlbiB3ZSBhcmUgbm90IHJ1bm5pbmcgdGhlIHB5dGhvbiB0ZXN0cyBzdWl0ZSwgc28KICAgICMgZG9uJ3QgYWRkIGRlZmF1bHQgdGVzdHMgdG8gYmUgZXhlY3V0ZWQgb3Igc2tpcHBlZCAocGFzcyBlbXB0eSB2YWx1ZXMpCiAgICBpZiB0ZXN0ZGlyOgogICAgICAgIGFsbHRlc3RzID0gZmluZHRlc3RzKHRlc3RkaXIsIGxpc3QoKSwgc2V0KCkpCiAgICBlbHNlOgogICAgICAgIGFsbHRlc3RzID0gZmluZHRlc3RzKHRlc3RkaXIsIHN0ZHRlc3RzLCBub3R0ZXN0cykKCiAgICBzZWxlY3RlZCA9IHRlc3RzIG9yIGFyZ3Mgb3IgYWxsdGVzdHMKICAgIGlmIHNpbmdsZToKICAgICAgICBmaXJzdF9zZWxlY3RlZCA9IHNlbGVjdGVkWzBdCiAgICAgICAgaW5kZXhfc2VsZWN0ZWQgPSBhbGx0ZXN0cy5pbmRleChmaXJzdF9zZWxlY3RlZCkKICAgICAgICBpZiBpbmRleF9zZWxlY3RlZCArIHNpbmdsZSA+IGxlbihhbGx0ZXN0cyk6CiAgICAgICAgICAgIHNpbmdsZSA9IGxlbihhbGx0ZXN0cykgLSBpbmRleF9zZWxlY3RlZAogICAgICAgIHNlbGVjdGVkID0gYWxsdGVzdHNbaW5kZXhfc2VsZWN0ZWQ6aW5kZXhfc2VsZWN0ZWQrc2luZ2xlXQogICAgICAgIHRyeToKICAgICAgICAgICAgbmV4dF9zaW5nbGVfdGVzdCA9IGFsbHRlc3RzW2luZGV4X3NlbGVjdGVkK3NpbmdsZV0KICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgbmV4dF9zaW5nbGVfdGVzdCA9IE5vbmUKICAgICMgUmVtb3ZlIGFsbCB0aGUgc2VsZWN0ZWQgdGVzdHMgdGhhdCBwcmVjZWRlIHN0YXJ0IGlmIGl0J3Mgc2V0LgogICAgaWYgc3RhcnQ6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBkZWwgc2VsZWN0ZWRbOnNlbGVjdGVkLmluZGV4KHN0YXJ0KV0KICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIkNvdWxkbid0IGZpbmQgc3RhcnRpbmcgdGVzdCAoJXMpLCB1c2luZyBhbGwgdGVzdHMiICUgc3RhcnQpCiAgICBpZiByYW5kb21pemU6CiAgICAgICAgcmFuZG9tLnNlZWQocmFuZG9tX3NlZWQpCiAgICAgICAgcHJpbnQoIlVzaW5nIHJhbmRvbSBzZWVkIiwgcmFuZG9tX3NlZWQpCiAgICAgICAgcmFuZG9tLnNodWZmbGUoc2VsZWN0ZWQpCiAgICBpZiB0cmFjZToKICAgICAgICBpbXBvcnQgdHJhY2UsIHRlbXBmaWxlCiAgICAgICAgdHJhY2VyID0gdHJhY2UuVHJhY2UoaWdub3JlZGlycz1bc3lzLmJhc2VfcHJlZml4LCBzeXMuYmFzZV9leGVjX3ByZWZpeCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZmlsZS5nZXR0ZW1wZGlyKCldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlPUZhbHNlLCBjb3VudD1UcnVlKQoKICAgIHRlc3RfdGltZXMgPSBbXQogICAgc3VwcG9ydC52ZXJib3NlID0gdmVyYm9zZSAgICAgICMgVGVsbCB0ZXN0cyB0byBiZSBtb2RlcmF0ZWx5IHF1aWV0CiAgICBzdXBwb3J0LnVzZV9yZXNvdXJjZXMgPSB1c2VfcmVzb3VyY2VzCiAgICBzYXZlX21vZHVsZXMgPSBzeXMubW9kdWxlcy5rZXlzKCkKCiAgICBkZWYgYWNjdW11bGF0ZV9yZXN1bHQodGVzdCwgcmVzdWx0KToKICAgICAgICBvaywgdGVzdF90aW1lID0gcmVzdWx0CiAgICAgICAgdGVzdF90aW1lcy5hcHBlbmQoKHRlc3RfdGltZSwgdGVzdCkpCiAgICAgICAgaWYgb2sgPT0gUEFTU0VEOgogICAgICAgICAgICBnb29kLmFwcGVuZCh0ZXN0KQogICAgICAgIGVsaWYgb2sgPT0gRkFJTEVEOgogICAgICAgICAgICBiYWQuYXBwZW5kKHRlc3QpCiAgICAgICAgZWxpZiBvayA9PSBFTlZfQ0hBTkdFRDoKICAgICAgICAgICAgZW52aXJvbm1lbnRfY2hhbmdlZC5hcHBlbmQodGVzdCkKICAgICAgICBlbGlmIG9rID09IFNLSVBQRUQ6CiAgICAgICAgICAgIHNraXBwZWQuYXBwZW5kKHRlc3QpCiAgICAgICAgZWxpZiBvayA9PSBSRVNPVVJDRV9ERU5JRUQ6CiAgICAgICAgICAgIHNraXBwZWQuYXBwZW5kKHRlc3QpCiAgICAgICAgICAgIHJlc291cmNlX2RlbmllZHMuYXBwZW5kKHRlc3QpCgogICAgaWYgZm9yZXZlcjoKICAgICAgICBkZWYgdGVzdF9mb3JldmVyKHRlc3RzPWxpc3Qoc2VsZWN0ZWQpKToKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGZvciB0ZXN0IGluIHRlc3RzOgogICAgICAgICAgICAgICAgICAgIHlpZWxkIHRlc3QKICAgICAgICAgICAgICAgICAgICBpZiBiYWQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgIHRlc3RzID0gdGVzdF9mb3JldmVyKCkKICAgICAgICB0ZXN0X2NvdW50ID0gJycKICAgICAgICB0ZXN0X2NvdW50X3dpZHRoID0gMwogICAgZWxzZToKICAgICAgICB0ZXN0cyA9IGl0ZXIoc2VsZWN0ZWQpCiAgICAgICAgdGVzdF9jb3VudCA9ICcve30nLmZvcm1hdChsZW4oc2VsZWN0ZWQpKQogICAgICAgIHRlc3RfY291bnRfd2lkdGggPSBsZW4odGVzdF9jb3VudCkgLSAxCgogICAgaWYgdXNlX21wOgogICAgICAgIHRyeToKICAgICAgICAgICAgZnJvbSB0aHJlYWRpbmcgaW1wb3J0IFRocmVhZAogICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIk11bHRpcHJvY2VzcyBvcHRpb24gcmVxdWlyZXMgdGhyZWFkIHN1cHBvcnQiKQogICAgICAgICAgICBzeXMuZXhpdCgyKQogICAgICAgIGZyb20gcXVldWUgaW1wb3J0IFF1ZXVlCiAgICAgICAgZnJvbSBzdWJwcm9jZXNzIGltcG9ydCBQb3BlbiwgUElQRQogICAgICAgIGRlYnVnX291dHB1dF9wYXQgPSByZS5jb21waWxlKHIiXFtcZCsgcmVmc1xdJCIpCiAgICAgICAgb3V0cHV0ID0gUXVldWUoKQogICAgICAgIHBlbmRpbmcgPSBNdWx0aXByb2Nlc3NUZXN0cyh0ZXN0cykKICAgICAgICBvcHRfYXJncyA9IHN1cHBvcnQuYXJnc19mcm9tX2ludGVycHJldGVyX2ZsYWdzKCkKICAgICAgICBiYXNlX2NtZCA9IFtzeXMuZXhlY3V0YWJsZV0gKyBvcHRfYXJncyArIFsnLW0nLCAndGVzdC5yZWdydGVzdCddCiAgICAgICAgZGVmIHdvcmsoKToKICAgICAgICAgICAgIyBBIHdvcmtlciB0aHJlYWQuCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICB0ZXN0ID0gbmV4dChwZW5kaW5nKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBTdG9wSXRlcmF0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHV0KChOb25lLCBOb25lLCBOb25lLCBOb25lKSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgYXJnc190dXBsZSA9ICgKICAgICAgICAgICAgICAgICAgICAgICAgKHRlc3QsIHZlcmJvc2UsIHF1aWV0KSwKICAgICAgICAgICAgICAgICAgICAgICAgZGljdChodW50cmxlYWtzPWh1bnRybGVha3MsIHVzZV9yZXNvdXJjZXM9dXNlX3Jlc291cmNlcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zz1kZWJ1Zywgb3V0cHV0X29uX2ZhaWx1cmU9dmVyYm9zZTMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dD10aW1lb3V0LCBmYWlsZmFzdD1mYWlsZmFzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaF90ZXN0cz1tYXRjaF90ZXN0cykKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgIyAtRSBpcyBuZWVkZWQgYnkgc29tZSB0ZXN0cywgZS5nLiB0ZXN0X2ltcG9ydAogICAgICAgICAgICAgICAgICAgICMgUnVubmluZyB0aGUgY2hpbGQgZnJvbSB0aGUgc2FtZSB3b3JraW5nIGRpcmVjdG9yeSBlbnN1cmVzCiAgICAgICAgICAgICAgICAgICAgIyB0aGF0IFRFTVBESVIgZm9yIHRoZSBjaGlsZCBpcyB0aGUgc2FtZSB3aGVuCiAgICAgICAgICAgICAgICAgICAgIyBzeXNjb25maWcuaXNfcHl0aG9uX2J1aWxkKCkgaXMgdHJ1ZS4gU2VlIGlzc3VlIDE1MzAwLgogICAgICAgICAgICAgICAgICAgIHBvcGVuID0gUG9wZW4oYmFzZV9jbWQgKyBbJy0tc2xhdmVhcmdzJywganNvbi5kdW1wcyhhcmdzX3R1cGxlKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Rkb3V0PVBJUEUsIHN0ZGVycj1QSVBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXZlcnNhbF9uZXdsaW5lcz1UcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlX2Zkcz0ob3MubmFtZSAhPSAnbnQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjd2Q9c3VwcG9ydC5TQVZFRENXRCkKICAgICAgICAgICAgICAgICAgICBzdGRvdXQsIHN0ZGVyciA9IHBvcGVuLmNvbW11bmljYXRlKCkKICAgICAgICAgICAgICAgICAgICByZXRjb2RlID0gcG9wZW4ud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgIyBTdHJpcCBsYXN0IHJlZmNvdW50IG91dHB1dCBsaW5lIGlmIGl0IGV4aXN0cywgc2luY2UgaXQKICAgICAgICAgICAgICAgICAgICAjIGNvbWVzIGZyb20gdGhlIHNodXRkb3duIG9mIHRoZSBpbnRlcnByZXRlciBpbiB0aGUgc3ViY29tbWFuZC4KICAgICAgICAgICAgICAgICAgICBzdGRlcnIgPSBkZWJ1Z19vdXRwdXRfcGF0LnN1YigiIiwgc3RkZXJyKQogICAgICAgICAgICAgICAgICAgIHN0ZG91dCwgXywgcmVzdWx0ID0gc3Rkb3V0LnN0cmlwKCkucnBhcnRpdGlvbigiXG4iKQogICAgICAgICAgICAgICAgICAgIGlmIHJldGNvZGUgIT0gMDoKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKENISUxEX0VSUk9SLCAiRXhpdCBjb2RlICVzIiAlIHJldGNvZGUpCiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXQoKHRlc3QsIHN0ZG91dC5yc3RyaXAoKSwgc3RkZXJyLnJzdHJpcCgpLCByZXN1bHQpKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgcmVzdWx0OgogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHV0KChOb25lLCBOb25lLCBOb25lLCBOb25lKSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ganNvbi5sb2FkcyhyZXN1bHQpCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1dCgodGVzdCwgc3Rkb3V0LnJzdHJpcCgpLCBzdGRlcnIucnN0cmlwKCksIHJlc3VsdCkpCiAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgb3V0cHV0LnB1dCgoTm9uZSwgTm9uZSwgTm9uZSwgTm9uZSkpCiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgIHdvcmtlcnMgPSBbVGhyZWFkKHRhcmdldD13b3JrKSBmb3IgaSBpbiByYW5nZSh1c2VfbXApXQogICAgICAgIGZvciB3b3JrZXIgaW4gd29ya2VyczoKICAgICAgICAgICAgd29ya2VyLnN0YXJ0KCkKICAgICAgICBmaW5pc2hlZCA9IDAKICAgICAgICB0ZXN0X2luZGV4ID0gMQogICAgICAgIHRyeToKICAgICAgICAgICAgd2hpbGUgZmluaXNoZWQgPCB1c2VfbXA6CiAgICAgICAgICAgICAgICB0ZXN0LCBzdGRvdXQsIHN0ZGVyciwgcmVzdWx0ID0gb3V0cHV0LmdldCgpCiAgICAgICAgICAgICAgICBpZiB0ZXN0IGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgZmluaXNoZWQgKz0gMQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlX3Jlc3VsdCh0ZXN0LCByZXN1bHQpCiAgICAgICAgICAgICAgICBpZiBub3QgcXVpZXQ6CiAgICAgICAgICAgICAgICAgICAgZm10ID0gIlt7MTp7MH19ezJ9L3szfV0gezR9IiBpZiBiYWQgZWxzZSAiW3sxOnswfX17Mn1dIHs0fSIKICAgICAgICAgICAgICAgICAgICBwcmludChmbXQuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICB0ZXN0X2NvdW50X3dpZHRoLCB0ZXN0X2luZGV4LCB0ZXN0X2NvdW50LAogICAgICAgICAgICAgICAgICAgICAgICBsZW4oYmFkKSwgdGVzdCkpCiAgICAgICAgICAgICAgICBpZiBzdGRvdXQ6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoc3Rkb3V0KQogICAgICAgICAgICAgICAgaWYgc3RkZXJyOgogICAgICAgICAgICAgICAgICAgIHByaW50KHN0ZGVyciwgZmlsZT1zeXMuc3RkZXJyKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBzeXMuc3RkZXJyLmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc3VsdFswXSA9PSBJTlRFUlJVUFRFRDoKICAgICAgICAgICAgICAgICAgICByYWlzZSBLZXlib2FyZEludGVycnVwdAogICAgICAgICAgICAgICAgaWYgcmVzdWx0WzBdID09IENISUxEX0VSUk9SOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigiQ2hpbGQgZXJyb3Igb24ge306IHt9Ii5mb3JtYXQodGVzdCwgcmVzdWx0WzFdKSkKICAgICAgICAgICAgICAgIHRlc3RfaW5kZXggKz0gMQogICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgICAgICAgaW50ZXJydXB0ZWQgPSBUcnVlCiAgICAgICAgICAgIHBlbmRpbmcuaW50ZXJydXB0ZWQgPSBUcnVlCiAgICAgICAgZm9yIHdvcmtlciBpbiB3b3JrZXJzOgogICAgICAgICAgICB3b3JrZXIuam9pbigpCiAgICBlbHNlOgogICAgICAgIGZvciB0ZXN0X2luZGV4LCB0ZXN0IGluIGVudW1lcmF0ZSh0ZXN0cywgMSk6CiAgICAgICAgICAgIGlmIG5vdCBxdWlldDoKICAgICAgICAgICAgICAgIGZtdCA9ICJbezE6ezB9fXsyfS97M31dIHs0fSIgaWYgYmFkIGVsc2UgIlt7MTp7MH19ezJ9XSB7NH0iCiAgICAgICAgICAgICAgICBwcmludChmbXQuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIHRlc3RfY291bnRfd2lkdGgsIHRlc3RfaW5kZXgsIHRlc3RfY291bnQsIGxlbihiYWQpLCB0ZXN0KSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICBpZiB0cmFjZToKICAgICAgICAgICAgICAgICMgSWYgd2UncmUgdHJhY2luZyBjb2RlIGNvdmVyYWdlLCB0aGVuIHdlIGRvbid0IGV4aXQgd2l0aCBzdGF0dXMKICAgICAgICAgICAgICAgICMgaWYgb24gYSBmYWxzZSByZXR1cm4gdmFsdWUgZnJvbSBtYWluLgogICAgICAgICAgICAgICAgdHJhY2VyLnJ1bmN0eCgncnVudGVzdCh0ZXN0LCB2ZXJib3NlLCBxdWlldCwgdGltZW91dD10aW1lb3V0KScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbHM9Z2xvYmFscygpLCBsb2NhbHM9dmFycygpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJ1bnRlc3QodGVzdCwgdmVyYm9zZSwgcXVpZXQsIGh1bnRybGVha3MsIGRlYnVnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0X29uX2ZhaWx1cmU9dmVyYm9zZTMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0PXRpbWVvdXQsIGZhaWxmYXN0PWZhaWxmYXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hfdGVzdHM9bWF0Y2hfdGVzdHMpCiAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZV9yZXN1bHQodGVzdCwgcmVzdWx0KQogICAgICAgICAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgICAgICAgICAgICAgIGludGVycnVwdGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgaWYgZmluZGxlYWtzOgogICAgICAgICAgICAgICAgZ2MuY29sbGVjdCgpCiAgICAgICAgICAgICAgICBpZiBnYy5nYXJiYWdlOgogICAgICAgICAgICAgICAgICAgIHByaW50KCJXYXJuaW5nOiB0ZXN0IGNyZWF0ZWQiLCBsZW4oZ2MuZ2FyYmFnZSksIGVuZD0nICcpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoInVuY29sbGVjdGFibGUgb2JqZWN0KHMpLiIpCiAgICAgICAgICAgICAgICAgICAgIyBtb3ZlIHRoZSB1bmNvbGxlY3RhYmxlIG9iamVjdHMgc29tZXdoZXJlIHNvIHdlIGRvbid0IHNlZQogICAgICAgICAgICAgICAgICAgICMgdGhlbSBhZ2FpbgogICAgICAgICAgICAgICAgICAgIGZvdW5kX2dhcmJhZ2UuZXh0ZW5kKGdjLmdhcmJhZ2UpCiAgICAgICAgICAgICAgICAgICAgZGVsIGdjLmdhcmJhZ2VbOl0KICAgICAgICAgICAgIyBVbmxvYWQgdGhlIG5ld2x5IGltcG9ydGVkIG1vZHVsZXMgKGJlc3QgZWZmb3J0IGZpbmFsaXphdGlvbikKICAgICAgICAgICAgZm9yIG1vZHVsZSBpbiBzeXMubW9kdWxlcy5rZXlzKCk6CiAgICAgICAgICAgICAgICBpZiBtb2R1bGUgbm90IGluIHNhdmVfbW9kdWxlcyBhbmQgbW9kdWxlLnN0YXJ0c3dpdGgoInRlc3QuIik6CiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydC51bmxvYWQobW9kdWxlKQoKICAgIGlmIGludGVycnVwdGVkOgogICAgICAgICMgcHJpbnQgYSBuZXdsaW5lIGFmdGVyIF5DCiAgICAgICAgcHJpbnQoKQogICAgICAgIHByaW50KCJUZXN0IHN1aXRlIGludGVycnVwdGVkIGJ5IHNpZ25hbCBTSUdJTlQuIikKICAgICAgICBvbWl0dGVkID0gc2V0KHNlbGVjdGVkKSAtIHNldChnb29kKSAtIHNldChiYWQpIC0gc2V0KHNraXBwZWQpCiAgICAgICAgcHJpbnQoY291bnQobGVuKG9taXR0ZWQpLCAidGVzdCIpLCAib21pdHRlZDoiKQogICAgICAgIHByaW50bGlzdChvbWl0dGVkKQogICAgaWYgZ29vZCBhbmQgbm90IHF1aWV0OgogICAgICAgIGlmIG5vdCBiYWQgYW5kIG5vdCBza2lwcGVkIGFuZCBub3QgaW50ZXJydXB0ZWQgYW5kIGxlbihnb29kKSA+IDE6CiAgICAgICAgICAgIHByaW50KCJBbGwiLCBlbmQ9JyAnKQogICAgICAgIHByaW50KGNvdW50KGxlbihnb29kKSwgInRlc3QiKSwgIk9LLiIpCiAgICBpZiBwcmludF9zbG93OgogICAgICAgIHRlc3RfdGltZXMuc29ydChyZXZlcnNlPVRydWUpCiAgICAgICAgcHJpbnQoIjEwIHNsb3dlc3QgdGVzdHM6IikKICAgICAgICBmb3IgdGltZSwgdGVzdCBpbiB0ZXN0X3RpbWVzWzoxMF06CiAgICAgICAgICAgIHByaW50KCIlczogJS4xZnMiICUgKHRlc3QsIHRpbWUpKQogICAgaWYgYmFkOgogICAgICAgIGJhZCA9IHNvcnRlZChzZXQoYmFkKSAtIHNldChlbnZpcm9ubWVudF9jaGFuZ2VkKSkKICAgICAgICBpZiBiYWQ6CiAgICAgICAgICAgIHByaW50KGNvdW50KGxlbihiYWQpLCAidGVzdCIpLCAiZmFpbGVkOiIpCiAgICAgICAgICAgIHByaW50bGlzdChiYWQpCiAgICBpZiBlbnZpcm9ubWVudF9jaGFuZ2VkOgogICAgICAgIHByaW50KCJ7fSBhbHRlcmVkIHRoZSBleGVjdXRpb24gZW52aXJvbm1lbnQ6Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgY291bnQobGVuKGVudmlyb25tZW50X2NoYW5nZWQpLCAidGVzdCIpKSkKICAgICAgICBwcmludGxpc3QoZW52aXJvbm1lbnRfY2hhbmdlZCkKICAgIGlmIHNraXBwZWQgYW5kIG5vdCBxdWlldDoKICAgICAgICBwcmludChjb3VudChsZW4oc2tpcHBlZCksICJ0ZXN0IiksICJza2lwcGVkOiIpCiAgICAgICAgcHJpbnRsaXN0KHNraXBwZWQpCgogICAgICAgIGUgPSBfRXhwZWN0ZWRTa2lwcygpCiAgICAgICAgcGxhdCA9IHN5cy5wbGF0Zm9ybQogICAgICAgIGlmIGUuaXN2YWxpZCgpOgogICAgICAgICAgICBzdXJwcmlzZSA9IHNldChza2lwcGVkKSAtIGUuZ2V0ZXhwZWN0ZWQoKSAtIHNldChyZXNvdXJjZV9kZW5pZWRzKQogICAgICAgICAgICBpZiBzdXJwcmlzZToKICAgICAgICAgICAgICAgIHByaW50KGNvdW50KGxlbihzdXJwcmlzZSksICJza2lwIiksIFwKICAgICAgICAgICAgICAgICAgICAgICJ1bmV4cGVjdGVkIG9uIiwgcGxhdCArICI6IikKICAgICAgICAgICAgICAgIHByaW50bGlzdChzdXJwcmlzZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KCJUaG9zZSBza2lwcyBhcmUgYWxsIGV4cGVjdGVkIG9uIiwgcGxhdCArICIuIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgiQXNrIHNvbWVvbmUgdG8gdGVhY2ggcmVncnRlc3QucHkgYWJvdXQgd2hpY2ggdGVzdHMgYXJlIikKICAgICAgICAgICAgcHJpbnQoImV4cGVjdGVkIHRvIGdldCBza2lwcGVkIG9uIiwgcGxhdCArICIuIikKCiAgICBpZiB2ZXJib3NlMiBhbmQgYmFkOgogICAgICAgIHByaW50KCJSZS1ydW5uaW5nIGZhaWxlZCB0ZXN0cyBpbiB2ZXJib3NlIG1vZGUiKQogICAgICAgIGZvciB0ZXN0IGluIGJhZDoKICAgICAgICAgICAgcHJpbnQoIlJlLXJ1bm5pbmcgdGVzdCAlciBpbiB2ZXJib3NlIG1vZGUiICUgdGVzdCkKICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHZlcmJvc2UgPSBUcnVlCiAgICAgICAgICAgICAgICBvayA9IHJ1bnRlc3QodGVzdCwgVHJ1ZSwgcXVpZXQsIGh1bnRybGVha3MsIGRlYnVnLCB0aW1lb3V0PXRpbWVvdXQpCiAgICAgICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgICAgICAgICAgICMgcHJpbnQgYSBuZXdsaW5lIHNlcGFyYXRlIGZyb20gdGhlIF5DCiAgICAgICAgICAgICAgICBwcmludCgpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICByYWlzZQoKICAgIGlmIHNpbmdsZToKICAgICAgICBpZiBuZXh0X3NpbmdsZV90ZXN0OgogICAgICAgICAgICB3aXRoIG9wZW4oZmlsZW5hbWUsICd3JykgYXMgZnA6CiAgICAgICAgICAgICAgICBmcC53cml0ZShuZXh0X3NpbmdsZV90ZXN0ICsgJ1xuJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBvcy51bmxpbmsoZmlsZW5hbWUpCgogICAgaWYgdHJhY2U6CiAgICAgICAgciA9IHRyYWNlci5yZXN1bHRzKCkKICAgICAgICByLndyaXRlX3Jlc3VsdHMoc2hvd19taXNzaW5nPVRydWUsIHN1bW1hcnk9VHJ1ZSwgY292ZXJkaXI9Y292ZXJkaXIpCgogICAgaWYgcnVubGVha3M6CiAgICAgICAgb3Muc3lzdGVtKCJsZWFrcyAlZCIgJSBvcy5nZXRwaWQoKSkKCiAgICBzeXMuZXhpdChsZW4oYmFkKSA+IDAgb3IgaW50ZXJydXB0ZWQpCgoKIyBzbWFsbCBzZXQgb2YgdGVzdHMgdG8gZGV0ZXJtaW5lIGlmIHdlIGhhdmUgYSBiYXNpY2FsbHkgZnVuY3Rpb25pbmcgaW50ZXJwcmV0ZXIKIyAoaS5lLiBpZiBhbnkgb2YgdGhlc2UgZmFpbCwgdGhlbiBhbnl0aGluZyBlbHNlIGlzIGxpa2VseSB0byBmb2xsb3cpClNURFRFU1RTID0gWwogICAgJ3Rlc3RfZ3JhbW1hcicsCiAgICAndGVzdF9vcGNvZGVzJywKICAgICd0ZXN0X2RpY3QnLAogICAgJ3Rlc3RfYnVpbHRpbicsCiAgICAndGVzdF9leGNlcHRpb25zJywKICAgICd0ZXN0X3R5cGVzJywKICAgICd0ZXN0X3VuaXR0ZXN0JywKICAgICd0ZXN0X2RvY3Rlc3QnLAogICAgJ3Rlc3RfZG9jdGVzdDInLAogICAgJ3Rlc3Rfc3VwcG9ydCcKXQoKIyBzZXQgb2YgdGVzdHMgdGhhdCB3ZSBkb24ndCB3YW50IHRvIGJlIGV4ZWN1dGVkIHdoZW4gdXNpbmcgcmVncnRlc3QKTk9UVEVTVFMgPSBzZXQoKQoKZGVmIGZpbmR0ZXN0cyh0ZXN0ZGlyPU5vbmUsIHN0ZHRlc3RzPVNURFRFU1RTLCBub3R0ZXN0cz1OT1RURVNUUyk6CiAgICAiIiJSZXR1cm4gYSBsaXN0IG9mIGFsbCBhcHBsaWNhYmxlIHRlc3QgbW9kdWxlcy4iIiIKICAgIHRlc3RkaXIgPSBmaW5kdGVzdGRpcih0ZXN0ZGlyKQogICAgbmFtZXMgPSBvcy5saXN0ZGlyKHRlc3RkaXIpCiAgICB0ZXN0cyA9IFtdCiAgICBvdGhlcnMgPSBzZXQoc3RkdGVzdHMpIHwgbm90dGVzdHMKICAgIGZvciBuYW1lIGluIG5hbWVzOgogICAgICAgIG1vZCwgZXh0ID0gb3MucGF0aC5zcGxpdGV4dChuYW1lKQogICAgICAgIGlmIG1vZFs6NV0gPT0gInRlc3RfIiBhbmQgZXh0IGluICgiLnB5IiwgIiIpIGFuZCBtb2Qgbm90IGluIG90aGVyczoKICAgICAgICAgICAgdGVzdHMuYXBwZW5kKG1vZCkKICAgIHJldHVybiBzdGR0ZXN0cyArIHNvcnRlZCh0ZXN0cykKCiMgV2UgZG8gbm90IHVzZSBhIGdlbmVyYXRvciBzbyBtdWx0aXBsZSB0aHJlYWRzIGNhbiBjYWxsIG5leHQoKS4KY2xhc3MgTXVsdGlwcm9jZXNzVGVzdHMob2JqZWN0KToKCiAgICAiIiJBIHRocmVhZC1zYWZlIGl0ZXJhdG9yIG92ZXIgdGVzdHMgZm9yIG11bHRpcHJvY2VzcyBtb2RlLiIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0ZXN0cyk6CiAgICAgICAgc2VsZi5pbnRlcnJ1cHRlZCA9IEZhbHNlCiAgICAgICAgc2VsZi5sb2NrID0gdGhyZWFkaW5nLkxvY2soKQogICAgICAgIHNlbGYudGVzdHMgPSB0ZXN0cwoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICB3aXRoIHNlbGYubG9jazoKICAgICAgICAgICAgaWYgc2VsZi5pbnRlcnJ1cHRlZDoKICAgICAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24oJ3Rlc3RzIGludGVycnVwdGVkJykKICAgICAgICAgICAgcmV0dXJuIG5leHQoc2VsZi50ZXN0cykKCmRlZiByZXBsYWNlX3N0ZG91dCgpOgogICAgIiIiU2V0IHN0ZG91dCBlbmNvZGVyIGVycm9yIGhhbmRsZXIgdG8gYmFja3NsYXNocmVwbGFjZSAoYXMgc3RkZXJyIGVycm9yCiAgICBoYW5kbGVyKSB0byBhdm9pZCBVbmljb2RlRW5jb2RlRXJyb3Igd2hlbiBwcmludGluZyBhIHRyYWNlYmFjayIiIgogICAgaW1wb3J0IGF0ZXhpdAoKICAgIHN0ZG91dCA9IHN5cy5zdGRvdXQKICAgIHN5cy5zdGRvdXQgPSBvcGVuKHN0ZG91dC5maWxlbm8oKSwgJ3cnLAogICAgICAgIGVuY29kaW5nPXN0ZG91dC5lbmNvZGluZywKICAgICAgICBlcnJvcnM9ImJhY2tzbGFzaHJlcGxhY2UiLAogICAgICAgIGNsb3NlZmQ9RmFsc2UsCiAgICAgICAgbmV3bGluZT0nXG4nKQoKICAgIGRlZiByZXN0b3JlX3N0ZG91dCgpOgogICAgICAgIHN5cy5zdGRvdXQuY2xvc2UoKQogICAgICAgIHN5cy5zdGRvdXQgPSBzdGRvdXQKICAgIGF0ZXhpdC5yZWdpc3RlcihyZXN0b3JlX3N0ZG91dCkKCmRlZiBydW50ZXN0KHRlc3QsIHZlcmJvc2UsIHF1aWV0LAogICAgICAgICAgICBodW50cmxlYWtzPUZhbHNlLCBkZWJ1Zz1GYWxzZSwgdXNlX3Jlc291cmNlcz1Ob25lLAogICAgICAgICAgICBvdXRwdXRfb25fZmFpbHVyZT1GYWxzZSwgZmFpbGZhc3Q9RmFsc2UsIG1hdGNoX3Rlc3RzPU5vbmUsCiAgICAgICAgICAgIHRpbWVvdXQ9Tm9uZSk6CiAgICAiIiJSdW4gYSBzaW5nbGUgdGVzdC4KCiAgICB0ZXN0IC0tIHRoZSBuYW1lIG9mIHRoZSB0ZXN0CiAgICB2ZXJib3NlIC0tIGlmIHRydWUsIHByaW50IG1vcmUgbWVzc2FnZXMKICAgIHF1aWV0IC0tIGlmIHRydWUsIGRvbid0IHByaW50ICdza2lwcGVkJyBtZXNzYWdlcyAocHJvYmFibHkgcmVkdW5kYW50KQogICAgdGVzdF90aW1lcyAtLSBhIGxpc3Qgb2YgKHRpbWUsIHRlc3RfbmFtZSkgcGFpcnMKICAgIGh1bnRybGVha3MgLS0gcnVuIG11bHRpcGxlIHRpbWVzIHRvIHRlc3QgZm9yIGxlYWtzOyByZXF1aXJlcyBhIGRlYnVnCiAgICAgICAgICAgICAgICAgIGJ1aWxkOyBhIHRyaXBsZSBjb3JyZXNwb25kaW5nIHRvIC1SJ3MgdGhyZWUgYXJndW1lbnRzCiAgICBvdXRwdXRfb25fZmFpbHVyZSAtLSBpZiB0cnVlLCBkaXNwbGF5IHRlc3Qgb3V0cHV0IG9uIGZhaWx1cmUKICAgIHRpbWVvdXQgLS0gZHVtcCB0aGUgdHJhY2ViYWNrIGFuZCBleGl0IGlmIGEgdGVzdCB0YWtlcyBtb3JlIHRoYW4KICAgICAgICAgICAgICAgdGltZW91dCBzZWNvbmRzCgogICAgUmV0dXJucyBvbmUgb2YgdGhlIHRlc3QgcmVzdWx0IGNvbnN0YW50czoKICAgICAgICBJTlRFUlJVUFRFRCAgICAgIEtleWJvYXJkSW50ZXJydXB0IHdoZW4gcnVuIHVuZGVyIC1qCiAgICAgICAgUkVTT1VSQ0VfREVOSUVEICB0ZXN0IHNraXBwZWQgYmVjYXVzZSByZXNvdXJjZSBkZW5pZWQKICAgICAgICBTS0lQUEVEICAgICAgICAgIHRlc3Qgc2tpcHBlZCBmb3Igc29tZSBvdGhlciByZWFzb24KICAgICAgICBFTlZfQ0hBTkdFRCAgICAgIHRlc3QgZmFpbGVkIGJlY2F1c2UgaXQgY2hhbmdlZCB0aGUgZXhlY3V0aW9uIGVudmlyb25tZW50CiAgICAgICAgRkFJTEVEICAgICAgICAgICB0ZXN0IGZhaWxlZAogICAgICAgIFBBU1NFRCAgICAgICAgICAgdGVzdCBwYXNzZWQKICAgICIiIgoKICAgIGlmIHVzZV9yZXNvdXJjZXMgaXMgbm90IE5vbmU6CiAgICAgICAgc3VwcG9ydC51c2VfcmVzb3VyY2VzID0gdXNlX3Jlc291cmNlcwogICAgdXNlX3RpbWVvdXQgPSAodGltZW91dCBpcyBub3QgTm9uZSkKICAgIGlmIHVzZV90aW1lb3V0OgogICAgICAgIGZhdWx0aGFuZGxlci5kdW1wX3RyYWNlYmFja3NfbGF0ZXIodGltZW91dCwgZXhpdD1UcnVlKQogICAgdHJ5OgogICAgICAgIHN1cHBvcnQubWF0Y2hfdGVzdHMgPSBtYXRjaF90ZXN0cwogICAgICAgIGlmIGZhaWxmYXN0OgogICAgICAgICAgICBzdXBwb3J0LmZhaWxmYXN0ID0gVHJ1ZQogICAgICAgIGlmIG91dHB1dF9vbl9mYWlsdXJlOgogICAgICAgICAgICBzdXBwb3J0LnZlcmJvc2UgPSBUcnVlCgogICAgICAgICAgICAjIFJldXNlIHRoZSBzYW1lIGluc3RhbmNlIHRvIGFsbCBjYWxscyB0byBydW50ZXN0KCkuIFNvbWUKICAgICAgICAgICAgIyB0ZXN0cyBrZWVwIGEgcmVmZXJlbmNlIHRvIHN5cy5zdGRvdXQgb3Igc3lzLnN0ZGVycgogICAgICAgICAgICAjIChlZy4gdGVzdF9hcmdwYXJzZSkuCiAgICAgICAgICAgIGlmIHJ1bnRlc3Quc3RyaW5naW8gaXMgTm9uZToKICAgICAgICAgICAgICAgIHN0cmVhbSA9IGlvLlN0cmluZ0lPKCkKICAgICAgICAgICAgICAgIHJ1bnRlc3Quc3RyaW5naW8gPSBzdHJlYW0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHN0cmVhbSA9IHJ1bnRlc3Quc3RyaW5naW8KICAgICAgICAgICAgICAgIHN0cmVhbS5zZWVrKDApCiAgICAgICAgICAgICAgICBzdHJlYW0udHJ1bmNhdGUoKQoKICAgICAgICAgICAgb3JpZ19zdGRvdXQgPSBzeXMuc3Rkb3V0CiAgICAgICAgICAgIG9yaWdfc3RkZXJyID0gc3lzLnN0ZGVycgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0ID0gc3RyZWFtCiAgICAgICAgICAgICAgICBzeXMuc3RkZXJyID0gc3RyZWFtCiAgICAgICAgICAgICAgICByZXN1bHQgPSBydW50ZXN0X2lubmVyKHRlc3QsIHZlcmJvc2UsIHF1aWV0LCBodW50cmxlYWtzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZywgZGlzcGxheV9mYWlsdXJlPUZhbHNlKQogICAgICAgICAgICAgICAgaWYgcmVzdWx0WzBdID09IEZBSUxFRDoKICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBzdHJlYW0uZ2V0dmFsdWUoKQogICAgICAgICAgICAgICAgICAgIG9yaWdfc3RkZXJyLndyaXRlKG91dHB1dCkKICAgICAgICAgICAgICAgICAgICBvcmlnX3N0ZGVyci5mbHVzaCgpCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0ID0gb3JpZ19zdGRvdXQKICAgICAgICAgICAgICAgIHN5cy5zdGRlcnIgPSBvcmlnX3N0ZGVycgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN1cHBvcnQudmVyYm9zZSA9IHZlcmJvc2UgICMgVGVsbCB0ZXN0cyB0byBiZSBtb2RlcmF0ZWx5IHF1aWV0CiAgICAgICAgICAgIHJlc3VsdCA9IHJ1bnRlc3RfaW5uZXIodGVzdCwgdmVyYm9zZSwgcXVpZXQsIGh1bnRybGVha3MsIGRlYnVnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfZmFpbHVyZT1ub3QgdmVyYm9zZSkKICAgICAgICByZXR1cm4gcmVzdWx0CiAgICBmaW5hbGx5OgogICAgICAgIGlmIHVzZV90aW1lb3V0OgogICAgICAgICAgICBmYXVsdGhhbmRsZXIuY2FuY2VsX2R1bXBfdHJhY2ViYWNrc19sYXRlcigpCiAgICAgICAgY2xlYW51cF90ZXN0X2Ryb3BwaW5ncyh0ZXN0LCB2ZXJib3NlKQpydW50ZXN0LnN0cmluZ2lvID0gTm9uZQoKIyBVbml0IHRlc3RzIGFyZSBzdXBwb3NlZCB0byBsZWF2ZSB0aGUgZXhlY3V0aW9uIGVudmlyb25tZW50IHVuY2hhbmdlZAojIG9uY2UgdGhleSBjb21wbGV0ZS4gIEJ1dCBzb21ldGltZXMgdGVzdHMgaGF2ZSBidWdzLCBlc3BlY2lhbGx5IHdoZW4KIyB0ZXN0cyBmYWlsLCBhbmQgdGhlIGNoYW5nZXMgdG8gZW52aXJvbm1lbnQgZ28gb24gdG8gbWVzcyB1cCBvdGhlcgojIHRlc3RzLiAgVGhpcyBjYW4gY2F1c2UgaXNzdWVzIHdpdGggYnVpbGRib3Qgc3RhYmlsaXR5LCBzaW5jZSB0ZXN0cwojIGFyZSBydW4gaW4gcmFuZG9tIG9yZGVyIGFuZCBzbyBwcm9ibGVtcyBtYXkgYXBwZWFyIHRvIGNvbWUgYW5kIGdvLgojIFRoZXJlIGFyZSBhIGZldyB0aGluZ3Mgd2UgY2FuIHNhdmUgYW5kIHJlc3RvcmUgdG8gbWl0aWdhdGUgdGhpcywgYW5kCiMgdGhlIGZvbGxvd2luZyBjb250ZXh0IG1hbmFnZXIgaGFuZGxlcyB0aGlzIHRhc2suCgpjbGFzcyBzYXZlZF90ZXN0X2Vudmlyb25tZW50OgogICAgIiIiU2F2ZSBiaXRzIG9mIHRoZSB0ZXN0IGVudmlyb25tZW50IGFuZCByZXN0b3JlIHRoZW0gYXQgYmxvY2sgZXhpdC4KCiAgICAgICAgd2l0aCBzYXZlZF90ZXN0X2Vudmlyb25tZW50KHRlc3RuYW1lLCB2ZXJib3NlLCBxdWlldCk6CiAgICAgICAgICAgICNzdHVmZgoKICAgIFVubGVzcyBxdWlldCBpcyBUcnVlLCBhIHdhcm5pbmcgaXMgcHJpbnRlZCB0byBzdGRlcnIgaWYgYW55IG9mCiAgICB0aGUgc2F2ZWQgaXRlbXMgd2FzIGNoYW5nZWQgYnkgdGhlIHRlc3QuICBUaGUgYXR0cmlidXRlICdjaGFuZ2VkJwogICAgaXMgaW5pdGlhbGx5IEZhbHNlLCBidXQgaXMgc2V0IHRvIFRydWUgaWYgYSBjaGFuZ2UgaXMgZGV0ZWN0ZWQuCgogICAgSWYgdmVyYm9zZSBpcyBtb3JlIHRoYW4gMSwgdGhlIGJlZm9yZSBhbmQgYWZ0ZXIgc3RhdGUgb2YgY2hhbmdlZAogICAgaXRlbXMgaXMgYWxzbyBwcmludGVkLgogICAgIiIiCgogICAgY2hhbmdlZCA9IEZhbHNlCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRlc3RuYW1lLCB2ZXJib3NlPTAsIHF1aWV0PUZhbHNlKToKICAgICAgICBzZWxmLnRlc3RuYW1lID0gdGVzdG5hbWUKICAgICAgICBzZWxmLnZlcmJvc2UgPSB2ZXJib3NlCiAgICAgICAgc2VsZi5xdWlldCA9IHF1aWV0CgogICAgIyBUbyBhZGQgdGhpbmdzIHRvIHNhdmUgYW5kIHJlc3RvcmUsIGFkZCBhIG5hbWUgWFhYIHRvIHRoZSByZXNvdXJjZXMgbGlzdAogICAgIyBhbmQgYWRkIGNvcnJlc3BvbmRpbmcgZ2V0X1hYWC9yZXN0b3JlX1hYWCBmdW5jdGlvbnMuICBnZXRfWFhYIHNob3VsZAogICAgIyByZXR1cm4gdGhlIHZhbHVlIHRvIGJlIHNhdmVkIGFuZCBjb21wYXJlZCBhZ2FpbnN0IGEgc2Vjb25kIGNhbGwgdG8gdGhlCiAgICAjIGdldCBmdW5jdGlvbiB3aGVuIHRlc3QgZXhlY3V0aW9uIGNvbXBsZXRlcy4gIHJlc3RvcmVfWFhYIHNob3VsZCBhY2NlcHQKICAgICMgdGhlIHNhdmVkIHZhbHVlIGFuZCByZXN0b3JlIHRoZSByZXNvdXJjZSB1c2luZyBpdC4gIEl0IHdpbGwgYmUgY2FsbGVkIGlmCiAgICAjIGFuZCBvbmx5IGlmIGEgY2hhbmdlIGluIHRoZSB2YWx1ZSBpcyBkZXRlY3RlZC4KICAgICMKICAgICMgTm90ZTogWFhYIHdpbGwgaGF2ZSBhbnkgJy4nIHJlcGxhY2VkIHdpdGggJ18nIGNoYXJhY3RlcnMgd2hlbiBkZXRlcm1pbmluZwogICAgIyB0aGUgY29ycmVzcG9uZGluZyBtZXRob2QgbmFtZXMuCgogICAgcmVzb3VyY2VzID0gKCdzeXMuYXJndicsICdjd2QnLCAnc3lzLnN0ZGluJywgJ3N5cy5zdGRvdXQnLCAnc3lzLnN0ZGVycicsCiAgICAgICAgICAgICAgICAgJ29zLmVudmlyb24nLCAnc3lzLnBhdGgnLCAnc3lzLnBhdGhfaG9va3MnLCAnX19pbXBvcnRfXycsCiAgICAgICAgICAgICAgICAgJ3dhcm5pbmdzLmZpbHRlcnMnLCAnYXN5bmNvcmUuc29ja2V0X21hcCcsCiAgICAgICAgICAgICAgICAgJ2xvZ2dpbmcuX2hhbmRsZXJzJywgJ2xvZ2dpbmcuX2hhbmRsZXJMaXN0JywgJ3N5cy5nZXR0cmFjZScsCiAgICAgICAgICAgICAgICAgJ3N5cy53YXJub3B0aW9ucycsICd0aHJlYWRpbmcuX2RhbmdsaW5nJywKICAgICAgICAgICAgICAgICAnbXVsdGlwcm9jZXNzaW5nLnByb2Nlc3MuX2RhbmdsaW5nJywKICAgICAgICAgICAgICAgICAnc3lzY29uZmlnLl9DT05GSUdfVkFSUycsICdzeXNjb25maWcuX0lOU1RBTExfU0NIRU1FUycsCiAgICAgICAgICAgICAgICAgJ3N1cHBvcnQuVEVTVEZOJywKICAgICAgICAgICAgICAgICkKCiAgICBkZWYgZ2V0X3N5c19hcmd2KHNlbGYpOgogICAgICAgIHJldHVybiBpZChzeXMuYXJndiksIHN5cy5hcmd2LCBzeXMuYXJndls6XQogICAgZGVmIHJlc3RvcmVfc3lzX2FyZ3Yoc2VsZiwgc2F2ZWRfYXJndik6CiAgICAgICAgc3lzLmFyZ3YgPSBzYXZlZF9hcmd2WzFdCiAgICAgICAgc3lzLmFyZ3ZbOl0gPSBzYXZlZF9hcmd2WzJdCgogICAgZGVmIGdldF9jd2Qoc2VsZik6CiAgICAgICAgcmV0dXJuIG9zLmdldGN3ZCgpCiAgICBkZWYgcmVzdG9yZV9jd2Qoc2VsZiwgc2F2ZWRfY3dkKToKICAgICAgICBvcy5jaGRpcihzYXZlZF9jd2QpCgogICAgZGVmIGdldF9zeXNfc3Rkb3V0KHNlbGYpOgogICAgICAgIHJldHVybiBzeXMuc3Rkb3V0CiAgICBkZWYgcmVzdG9yZV9zeXNfc3Rkb3V0KHNlbGYsIHNhdmVkX3N0ZG91dCk6CiAgICAgICAgc3lzLnN0ZG91dCA9IHNhdmVkX3N0ZG91dAoKICAgIGRlZiBnZXRfc3lzX3N0ZGVycihzZWxmKToKICAgICAgICByZXR1cm4gc3lzLnN0ZGVycgogICAgZGVmIHJlc3RvcmVfc3lzX3N0ZGVycihzZWxmLCBzYXZlZF9zdGRlcnIpOgogICAgICAgIHN5cy5zdGRlcnIgPSBzYXZlZF9zdGRlcnIKCiAgICBkZWYgZ2V0X3N5c19zdGRpbihzZWxmKToKICAgICAgICByZXR1cm4gc3lzLnN0ZGluCiAgICBkZWYgcmVzdG9yZV9zeXNfc3RkaW4oc2VsZiwgc2F2ZWRfc3RkaW4pOgogICAgICAgIHN5cy5zdGRpbiA9IHNhdmVkX3N0ZGluCgogICAgZGVmIGdldF9vc19lbnZpcm9uKHNlbGYpOgogICAgICAgIHJldHVybiBpZChvcy5lbnZpcm9uKSwgb3MuZW52aXJvbiwgZGljdChvcy5lbnZpcm9uKQogICAgZGVmIHJlc3RvcmVfb3NfZW52aXJvbihzZWxmLCBzYXZlZF9lbnZpcm9uKToKICAgICAgICBvcy5lbnZpcm9uID0gc2F2ZWRfZW52aXJvblsxXQogICAgICAgIG9zLmVudmlyb24uY2xlYXIoKQogICAgICAgIG9zLmVudmlyb24udXBkYXRlKHNhdmVkX2Vudmlyb25bMl0pCgogICAgZGVmIGdldF9zeXNfcGF0aChzZWxmKToKICAgICAgICByZXR1cm4gaWQoc3lzLnBhdGgpLCBzeXMucGF0aCwgc3lzLnBhdGhbOl0KICAgIGRlZiByZXN0b3JlX3N5c19wYXRoKHNlbGYsIHNhdmVkX3BhdGgpOgogICAgICAgIHN5cy5wYXRoID0gc2F2ZWRfcGF0aFsxXQogICAgICAgIHN5cy5wYXRoWzpdID0gc2F2ZWRfcGF0aFsyXQoKICAgIGRlZiBnZXRfc3lzX3BhdGhfaG9va3Moc2VsZik6CiAgICAgICAgcmV0dXJuIGlkKHN5cy5wYXRoX2hvb2tzKSwgc3lzLnBhdGhfaG9va3MsIHN5cy5wYXRoX2hvb2tzWzpdCiAgICBkZWYgcmVzdG9yZV9zeXNfcGF0aF9ob29rcyhzZWxmLCBzYXZlZF9ob29rcyk6CiAgICAgICAgc3lzLnBhdGhfaG9va3MgPSBzYXZlZF9ob29rc1sxXQogICAgICAgIHN5cy5wYXRoX2hvb2tzWzpdID0gc2F2ZWRfaG9va3NbMl0KCiAgICBkZWYgZ2V0X3N5c19nZXR0cmFjZShzZWxmKToKICAgICAgICByZXR1cm4gc3lzLmdldHRyYWNlKCkKICAgIGRlZiByZXN0b3JlX3N5c19nZXR0cmFjZShzZWxmLCB0cmFjZV9meG4pOgogICAgICAgIHN5cy5zZXR0cmFjZSh0cmFjZV9meG4pCgogICAgZGVmIGdldF9fX2ltcG9ydF9fKHNlbGYpOgogICAgICAgIHJldHVybiBidWlsdGlucy5fX2ltcG9ydF9fCiAgICBkZWYgcmVzdG9yZV9fX2ltcG9ydF9fKHNlbGYsIGltcG9ydF8pOgogICAgICAgIGJ1aWx0aW5zLl9faW1wb3J0X18gPSBpbXBvcnRfCgogICAgZGVmIGdldF93YXJuaW5nc19maWx0ZXJzKHNlbGYpOgogICAgICAgIHJldHVybiBpZCh3YXJuaW5ncy5maWx0ZXJzKSwgd2FybmluZ3MuZmlsdGVycywgd2FybmluZ3MuZmlsdGVyc1s6XQogICAgZGVmIHJlc3RvcmVfd2FybmluZ3NfZmlsdGVycyhzZWxmLCBzYXZlZF9maWx0ZXJzKToKICAgICAgICB3YXJuaW5ncy5maWx0ZXJzID0gc2F2ZWRfZmlsdGVyc1sxXQogICAgICAgIHdhcm5pbmdzLmZpbHRlcnNbOl0gPSBzYXZlZF9maWx0ZXJzWzJdCgogICAgZGVmIGdldF9hc3luY29yZV9zb2NrZXRfbWFwKHNlbGYpOgogICAgICAgIGFzeW5jb3JlID0gc3lzLm1vZHVsZXMuZ2V0KCdhc3luY29yZScpCiAgICAgICAgIyBYWFggTWFraW5nIGEgY29weSBrZWVwcyBvYmplY3RzIGFsaXZlIHVudGlsIF9fZXhpdF9fIGdldHMgY2FsbGVkLgogICAgICAgIHJldHVybiBhc3luY29yZSBhbmQgYXN5bmNvcmUuc29ja2V0X21hcC5jb3B5KCkgb3Ige30KICAgIGRlZiByZXN0b3JlX2FzeW5jb3JlX3NvY2tldF9tYXAoc2VsZiwgc2F2ZWRfbWFwKToKICAgICAgICBhc3luY29yZSA9IHN5cy5tb2R1bGVzLmdldCgnYXN5bmNvcmUnKQogICAgICAgIGlmIGFzeW5jb3JlIGlzIG5vdCBOb25lOgogICAgICAgICAgICBhc3luY29yZS5jbG9zZV9hbGwoaWdub3JlX2FsbD1UcnVlKQogICAgICAgICAgICBhc3luY29yZS5zb2NrZXRfbWFwLnVwZGF0ZShzYXZlZF9tYXApCgogICAgZGVmIGdldF9zaHV0aWxfYXJjaGl2ZV9mb3JtYXRzKHNlbGYpOgogICAgICAgICMgd2UgY291bGQgY2FsbCBnZXRfYXJjaGl2ZXNfZm9ybWF0cygpIGJ1dCB0aGF0IG9ubHkgcmV0dXJucyB0aGUKICAgICAgICAjIHJlZ2lzdHJ5IGtleXM7IHdlIHdhbnQgdG8gY2hlY2sgdGhlIHZhbHVlcyB0b28gKHRoZSBmdW5jdGlvbnMgdGhhdAogICAgICAgICMgYXJlIHJlZ2lzdGVyZWQpCiAgICAgICAgcmV0dXJuIHNodXRpbC5fQVJDSElWRV9GT1JNQVRTLCBzaHV0aWwuX0FSQ0hJVkVfRk9STUFUUy5jb3B5KCkKICAgIGRlZiByZXN0b3JlX3NodXRpbF9hcmNoaXZlX2Zvcm1hdHMoc2VsZiwgc2F2ZWQpOgogICAgICAgIHNodXRpbC5fQVJDSElWRV9GT1JNQVRTID0gc2F2ZWRbMF0KICAgICAgICBzaHV0aWwuX0FSQ0hJVkVfRk9STUFUUy5jbGVhcigpCiAgICAgICAgc2h1dGlsLl9BUkNISVZFX0ZPUk1BVFMudXBkYXRlKHNhdmVkWzFdKQoKICAgIGRlZiBnZXRfc2h1dGlsX3VucGFja19mb3JtYXRzKHNlbGYpOgogICAgICAgIHJldHVybiBzaHV0aWwuX1VOUEFDS19GT1JNQVRTLCBzaHV0aWwuX1VOUEFDS19GT1JNQVRTLmNvcHkoKQogICAgZGVmIHJlc3RvcmVfc2h1dGlsX3VucGFja19mb3JtYXRzKHNlbGYsIHNhdmVkKToKICAgICAgICBzaHV0aWwuX1VOUEFDS19GT1JNQVRTID0gc2F2ZWRbMF0KICAgICAgICBzaHV0aWwuX1VOUEFDS19GT1JNQVRTLmNsZWFyKCkKICAgICAgICBzaHV0aWwuX1VOUEFDS19GT1JNQVRTLnVwZGF0ZShzYXZlZFsxXSkKCiAgICBkZWYgZ2V0X2xvZ2dpbmdfX2hhbmRsZXJzKHNlbGYpOgogICAgICAgICMgX2hhbmRsZXJzIGlzIGEgV2Vha1ZhbHVlRGljdGlvbmFyeQogICAgICAgIHJldHVybiBpZChsb2dnaW5nLl9oYW5kbGVycyksIGxvZ2dpbmcuX2hhbmRsZXJzLCBsb2dnaW5nLl9oYW5kbGVycy5jb3B5KCkKICAgIGRlZiByZXN0b3JlX2xvZ2dpbmdfX2hhbmRsZXJzKHNlbGYsIHNhdmVkX2hhbmRsZXJzKToKICAgICAgICAjIENhbid0IGVhc2lseSByZXZlcnQgdGhlIGxvZ2dpbmcgc3RhdGUKICAgICAgICBwYXNzCgogICAgZGVmIGdldF9sb2dnaW5nX19oYW5kbGVyTGlzdChzZWxmKToKICAgICAgICAjIF9oYW5kbGVyTGlzdCBpcyBhIGxpc3Qgb2Ygd2Vha3JlZnMgdG8gaGFuZGxlcnMKICAgICAgICByZXR1cm4gaWQobG9nZ2luZy5faGFuZGxlckxpc3QpLCBsb2dnaW5nLl9oYW5kbGVyTGlzdCwgbG9nZ2luZy5faGFuZGxlckxpc3RbOl0KICAgIGRlZiByZXN0b3JlX2xvZ2dpbmdfX2hhbmRsZXJMaXN0KHNlbGYsIHNhdmVkX2hhbmRsZXJMaXN0KToKICAgICAgICAjIENhbid0IGVhc2lseSByZXZlcnQgdGhlIGxvZ2dpbmcgc3RhdGUKICAgICAgICBwYXNzCgogICAgZGVmIGdldF9zeXNfd2Fybm9wdGlvbnMoc2VsZik6CiAgICAgICAgcmV0dXJuIGlkKHN5cy53YXJub3B0aW9ucyksIHN5cy53YXJub3B0aW9ucywgc3lzLndhcm5vcHRpb25zWzpdCiAgICBkZWYgcmVzdG9yZV9zeXNfd2Fybm9wdGlvbnMoc2VsZiwgc2F2ZWRfb3B0aW9ucyk6CiAgICAgICAgc3lzLndhcm5vcHRpb25zID0gc2F2ZWRfb3B0aW9uc1sxXQogICAgICAgIHN5cy53YXJub3B0aW9uc1s6XSA9IHNhdmVkX29wdGlvbnNbMl0KCiAgICAjIENvbnRyb2xsaW5nIGRhbmdsaW5nIHJlZmVyZW5jZXMgdG8gVGhyZWFkIG9iamVjdHMgY2FuIG1ha2UgaXQgZWFzaWVyCiAgICAjIHRvIHRyYWNrIHJlZmVyZW5jZSBsZWFrcy4KICAgIGRlZiBnZXRfdGhyZWFkaW5nX19kYW5nbGluZyhzZWxmKToKICAgICAgICBpZiBub3QgdGhyZWFkaW5nOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICMgVGhpcyBjb3BpZXMgdGhlIHdlYWtyZWZzIHdpdGhvdXQgbWFraW5nIGFueSBzdHJvbmcgcmVmZXJlbmNlCiAgICAgICAgcmV0dXJuIHRocmVhZGluZy5fZGFuZ2xpbmcuY29weSgpCiAgICBkZWYgcmVzdG9yZV90aHJlYWRpbmdfX2RhbmdsaW5nKHNlbGYsIHNhdmVkKToKICAgICAgICBpZiBub3QgdGhyZWFkaW5nOgogICAgICAgICAgICByZXR1cm4KICAgICAgICB0aHJlYWRpbmcuX2RhbmdsaW5nLmNsZWFyKCkKICAgICAgICB0aHJlYWRpbmcuX2RhbmdsaW5nLnVwZGF0ZShzYXZlZCkKCiAgICAjIFNhbWUgZm9yIFByb2Nlc3Mgb2JqZWN0cwogICAgZGVmIGdldF9tdWx0aXByb2Nlc3NpbmdfcHJvY2Vzc19fZGFuZ2xpbmcoc2VsZik6CiAgICAgICAgaWYgbm90IG11bHRpcHJvY2Vzc2luZzoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAjIFRoaXMgY29waWVzIHRoZSB3ZWFrcmVmcyB3aXRob3V0IG1ha2luZyBhbnkgc3Ryb25nIHJlZmVyZW5jZQogICAgICAgIHJldHVybiBtdWx0aXByb2Nlc3NpbmcucHJvY2Vzcy5fZGFuZ2xpbmcuY29weSgpCiAgICBkZWYgcmVzdG9yZV9tdWx0aXByb2Nlc3NpbmdfcHJvY2Vzc19fZGFuZ2xpbmcoc2VsZiwgc2F2ZWQpOgogICAgICAgIGlmIG5vdCBtdWx0aXByb2Nlc3Npbmc6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIG11bHRpcHJvY2Vzc2luZy5wcm9jZXNzLl9kYW5nbGluZy5jbGVhcigpCiAgICAgICAgbXVsdGlwcm9jZXNzaW5nLnByb2Nlc3MuX2RhbmdsaW5nLnVwZGF0ZShzYXZlZCkKCiAgICBkZWYgZ2V0X3N5c2NvbmZpZ19fQ09ORklHX1ZBUlMoc2VsZik6CiAgICAgICAgIyBtYWtlIHN1cmUgdGhlIGRpY3QgaXMgaW5pdGlhbGl6ZWQKICAgICAgICBzeXNjb25maWcuZ2V0X2NvbmZpZ192YXIoJ3ByZWZpeCcpCiAgICAgICAgcmV0dXJuIChpZChzeXNjb25maWcuX0NPTkZJR19WQVJTKSwgc3lzY29uZmlnLl9DT05GSUdfVkFSUywKICAgICAgICAgICAgICAgIGRpY3Qoc3lzY29uZmlnLl9DT05GSUdfVkFSUykpCiAgICBkZWYgcmVzdG9yZV9zeXNjb25maWdfX0NPTkZJR19WQVJTKHNlbGYsIHNhdmVkKToKICAgICAgICBzeXNjb25maWcuX0NPTkZJR19WQVJTID0gc2F2ZWRbMV0KICAgICAgICBzeXNjb25maWcuX0NPTkZJR19WQVJTLmNsZWFyKCkKICAgICAgICBzeXNjb25maWcuX0NPTkZJR19WQVJTLnVwZGF0ZShzYXZlZFsyXSkKCiAgICBkZWYgZ2V0X3N5c2NvbmZpZ19fSU5TVEFMTF9TQ0hFTUVTKHNlbGYpOgogICAgICAgIHJldHVybiAoaWQoc3lzY29uZmlnLl9JTlNUQUxMX1NDSEVNRVMpLCBzeXNjb25maWcuX0lOU1RBTExfU0NIRU1FUywKICAgICAgICAgICAgICAgIHN5c2NvbmZpZy5fSU5TVEFMTF9TQ0hFTUVTLmNvcHkoKSkKICAgIGRlZiByZXN0b3JlX3N5c2NvbmZpZ19fSU5TVEFMTF9TQ0hFTUVTKHNlbGYsIHNhdmVkKToKICAgICAgICBzeXNjb25maWcuX0lOU1RBTExfU0NIRU1FUyA9IHNhdmVkWzFdCiAgICAgICAgc3lzY29uZmlnLl9JTlNUQUxMX1NDSEVNRVMuY2xlYXIoKQogICAgICAgIHN5c2NvbmZpZy5fSU5TVEFMTF9TQ0hFTUVTLnVwZGF0ZShzYXZlZFsyXSkKCiAgICBkZWYgZ2V0X3N1cHBvcnRfVEVTVEZOKHNlbGYpOgogICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKHN1cHBvcnQuVEVTVEZOKToKICAgICAgICAgICAgcmVzdWx0ID0gJ2YnCiAgICAgICAgZWxpZiBvcy5wYXRoLmlzZGlyKHN1cHBvcnQuVEVTVEZOKToKICAgICAgICAgICAgcmVzdWx0ID0gJ2QnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVzdWx0ID0gTm9uZQogICAgICAgIHJldHVybiByZXN1bHQKICAgIGRlZiByZXN0b3JlX3N1cHBvcnRfVEVTVEZOKHNlbGYsIHNhdmVkX3ZhbHVlKToKICAgICAgICBpZiBzYXZlZF92YWx1ZSBpcyBOb25lOgogICAgICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShzdXBwb3J0LlRFU1RGTik6CiAgICAgICAgICAgICAgICBvcy51bmxpbmsoc3VwcG9ydC5URVNURk4pCiAgICAgICAgICAgIGVsaWYgb3MucGF0aC5pc2RpcihzdXBwb3J0LlRFU1RGTik6CiAgICAgICAgICAgICAgICBzaHV0aWwucm10cmVlKHN1cHBvcnQuVEVTVEZOKQoKICAgIGRlZiByZXNvdXJjZV9pbmZvKHNlbGYpOgogICAgICAgIGZvciBuYW1lIGluIHNlbGYucmVzb3VyY2VzOgogICAgICAgICAgICBtZXRob2Rfc3VmZml4ID0gbmFtZS5yZXBsYWNlKCcuJywgJ18nKQogICAgICAgICAgICBnZXRfbmFtZSA9ICdnZXRfJyArIG1ldGhvZF9zdWZmaXgKICAgICAgICAgICAgcmVzdG9yZV9uYW1lID0gJ3Jlc3RvcmVfJyArIG1ldGhvZF9zdWZmaXgKICAgICAgICAgICAgeWllbGQgbmFtZSwgZ2V0YXR0cihzZWxmLCBnZXRfbmFtZSksIGdldGF0dHIoc2VsZiwgcmVzdG9yZV9uYW1lKQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgc2VsZi5zYXZlZF92YWx1ZXMgPSBkaWN0KChuYW1lLCBnZXQoKSkgZm9yIG5hbWUsIGdldCwgcmVzdG9yZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBzZWxmLnJlc291cmNlX2luZm8oKSkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCBleGNfdHlwZSwgZXhjX3ZhbCwgZXhjX3RiKToKICAgICAgICBzYXZlZF92YWx1ZXMgPSBzZWxmLnNhdmVkX3ZhbHVlcwogICAgICAgIGRlbCBzZWxmLnNhdmVkX3ZhbHVlcwogICAgICAgIGZvciBuYW1lLCBnZXQsIHJlc3RvcmUgaW4gc2VsZi5yZXNvdXJjZV9pbmZvKCk6CiAgICAgICAgICAgIGN1cnJlbnQgPSBnZXQoKQogICAgICAgICAgICBvcmlnaW5hbCA9IHNhdmVkX3ZhbHVlcy5wb3AobmFtZSkKICAgICAgICAgICAgIyBDaGVjayBmb3IgY2hhbmdlcyB0byB0aGUgcmVzb3VyY2UncyB2YWx1ZQogICAgICAgICAgICBpZiBjdXJyZW50ICE9IG9yaWdpbmFsOgogICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VkID0gVHJ1ZQogICAgICAgICAgICAgICAgcmVzdG9yZShvcmlnaW5hbCkKICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLnF1aWV0OgogICAgICAgICAgICAgICAgICAgIHByaW50KCJXYXJuaW5nIC0tIHt9IHdhcyBtb2RpZmllZCBieSB7fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSwgc2VsZi50ZXN0bmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlPXN5cy5zdGRlcnIpCiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi52ZXJib3NlID4gMToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiAgQmVmb3JlOiB7fVxuICBBZnRlcjogIHt9ICIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsLCBjdXJyZW50KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlPXN5cy5zdGRlcnIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHJ1bnRlc3RfaW5uZXIodGVzdCwgdmVyYm9zZSwgcXVpZXQsCiAgICAgICAgICAgICAgICAgIGh1bnRybGVha3M9RmFsc2UsIGRlYnVnPUZhbHNlLCBkaXNwbGF5X2ZhaWx1cmU9VHJ1ZSk6CiAgICBzdXBwb3J0LnVubG9hZCh0ZXN0KQoKICAgIHRlc3RfdGltZSA9IDAuMAogICAgcmVmbGVhayA9IEZhbHNlICAjIFRydWUgaWYgdGhlIHRlc3QgbGVha2VkIHJlZmVyZW5jZXMuCiAgICB0cnk6CiAgICAgICAgaWYgdGVzdC5zdGFydHN3aXRoKCd0ZXN0LicpOgogICAgICAgICAgICBhYnN0ZXN0ID0gdGVzdAogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgQWx3YXlzIGltcG9ydCBpdCBmcm9tIHRoZSB0ZXN0IHBhY2thZ2UKICAgICAgICAgICAgYWJzdGVzdCA9ICd0ZXN0LicgKyB0ZXN0CiAgICAgICAgd2l0aCBzYXZlZF90ZXN0X2Vudmlyb25tZW50KHRlc3QsIHZlcmJvc2UsIHF1aWV0KSBhcyBlbnZpcm9ubWVudDoKICAgICAgICAgICAgc3RhcnRfdGltZSA9IHRpbWUudGltZSgpCiAgICAgICAgICAgIHRoZV9wYWNrYWdlID0gX19pbXBvcnRfXyhhYnN0ZXN0LCBnbG9iYWxzKCksIGxvY2FscygpLCBbXSkKICAgICAgICAgICAgdGhlX21vZHVsZSA9IGdldGF0dHIodGhlX3BhY2thZ2UsIHRlc3QpCiAgICAgICAgICAgICMgSWYgdGhlIHRlc3QgaGFzIGEgdGVzdF9tYWluLCB0aGF0IHdpbGwgcnVuIHRoZSBhcHByb3ByaWF0ZQogICAgICAgICAgICAjIHRlc3RzLiAgSWYgbm90LCB1c2Ugbm9ybWFsIHVuaXR0ZXN0IHRlc3QgbG9hZGluZy4KICAgICAgICAgICAgdGVzdF9ydW5uZXIgPSBnZXRhdHRyKHRoZV9tb2R1bGUsICJ0ZXN0X21haW4iLCBOb25lKQogICAgICAgICAgICBpZiB0ZXN0X3J1bm5lciBpcyBOb25lOgogICAgICAgICAgICAgICAgdGVzdHMgPSB1bml0dGVzdC5UZXN0TG9hZGVyKCkubG9hZFRlc3RzRnJvbU1vZHVsZSh0aGVfbW9kdWxlKQogICAgICAgICAgICAgICAgdGVzdF9ydW5uZXIgPSBsYW1iZGE6IHN1cHBvcnQucnVuX3VuaXR0ZXN0KHRlc3RzKQogICAgICAgICAgICB0ZXN0X3J1bm5lcigpCiAgICAgICAgICAgIGlmIGh1bnRybGVha3M6CiAgICAgICAgICAgICAgICByZWZsZWFrID0gZGFzaF9SKHRoZV9tb2R1bGUsIHRlc3QsIHRlc3RfcnVubmVyLAogICAgICAgICAgICAgICAgICAgIGh1bnRybGVha3MpCiAgICAgICAgICAgIHRlc3RfdGltZSA9IHRpbWUudGltZSgpIC0gc3RhcnRfdGltZQogICAgZXhjZXB0IHN1cHBvcnQuUmVzb3VyY2VEZW5pZWQgYXMgbXNnOgogICAgICAgIGlmIG5vdCBxdWlldDoKICAgICAgICAgICAgcHJpbnQodGVzdCwgInNraXBwZWQgLS0iLCBtc2cpCiAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIHJldHVybiBSRVNPVVJDRV9ERU5JRUQsIHRlc3RfdGltZQogICAgZXhjZXB0IHVuaXR0ZXN0LlNraXBUZXN0IGFzIG1zZzoKICAgICAgICBpZiBub3QgcXVpZXQ6CiAgICAgICAgICAgIHByaW50KHRlc3QsICJza2lwcGVkIC0tIiwgbXNnKQogICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICByZXR1cm4gU0tJUFBFRCwgdGVzdF90aW1lCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgcmFpc2UKICAgIGV4Y2VwdCBzdXBwb3J0LlRlc3RGYWlsZWQgYXMgbXNnOgogICAgICAgIGlmIGRpc3BsYXlfZmFpbHVyZToKICAgICAgICAgICAgcHJpbnQoInRlc3QiLCB0ZXN0LCAiZmFpbGVkIC0tIiwgbXNnLCBmaWxlPXN5cy5zdGRlcnIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoInRlc3QiLCB0ZXN0LCAiZmFpbGVkIiwgZmlsZT1zeXMuc3RkZXJyKQogICAgICAgIHN5cy5zdGRlcnIuZmx1c2goKQogICAgICAgIHJldHVybiBGQUlMRUQsIHRlc3RfdGltZQogICAgZXhjZXB0OgogICAgICAgIG1zZyA9IHRyYWNlYmFjay5mb3JtYXRfZXhjKCkKICAgICAgICBwcmludCgidGVzdCIsIHRlc3QsICJjcmFzaGVkIC0tIiwgbXNnLCBmaWxlPXN5cy5zdGRlcnIpCiAgICAgICAgc3lzLnN0ZGVyci5mbHVzaCgpCiAgICAgICAgcmV0dXJuIEZBSUxFRCwgdGVzdF90aW1lCiAgICBlbHNlOgogICAgICAgIGlmIHJlZmxlYWs6CiAgICAgICAgICAgIHJldHVybiBGQUlMRUQsIHRlc3RfdGltZQogICAgICAgIGlmIGVudmlyb25tZW50LmNoYW5nZWQ6CiAgICAgICAgICAgIHJldHVybiBFTlZfQ0hBTkdFRCwgdGVzdF90aW1lCiAgICAgICAgcmV0dXJuIFBBU1NFRCwgdGVzdF90aW1lCgpkZWYgY2xlYW51cF90ZXN0X2Ryb3BwaW5ncyh0ZXN0bmFtZSwgdmVyYm9zZSk6CiAgICBpbXBvcnQgc2h1dGlsCiAgICBpbXBvcnQgc3RhdAogICAgaW1wb3J0IGdjCgogICAgIyBGaXJzdCBraWxsIGFueSBkYW5nbGluZyByZWZlcmVuY2VzIHRvIG9wZW4gZmlsZXMgZXRjLgogICAgIyBUaGlzIGNhbiBhbHNvIGlzc3VlIHNvbWUgUmVzb3VyY2VXYXJuaW5ncyB3aGljaCB3b3VsZCBvdGhlcndpc2UgZ2V0CiAgICAjIHRyaWdnZXJlZCBkdXJpbmcgdGhlIGZvbGxvd2luZyB0ZXN0IHJ1biwgYW5kIHBvc3NpYmx5IHByb2R1Y2UgZmFpbHVyZXMuCiAgICBnYy5jb2xsZWN0KCkKCiAgICAjIFRyeSB0byBjbGVhbiB1cCBqdW5rIGNvbW1vbmx5IGxlZnQgYmVoaW5kLiAgV2hpbGUgdGVzdHMgc2hvdWxkbid0IGxlYXZlCiAgICAjIGFueSBmaWxlcyBvciBkaXJlY3RvcmllcyBiZWhpbmQsIHdoZW4gYSB0ZXN0IGZhaWxzIHRoYXQgY2FuIGJlIHRlZGlvdXMKICAgICMgZm9yIGl0IHRvIGFycmFuZ2UuICBUaGUgY29uc2VxdWVuY2VzIGNhbiBiZSBlc3BlY2lhbGx5IG5hc3R5IG9uIFdpbmRvd3MsCiAgICAjIHNpbmNlIGlmIGEgdGVzdCBsZWF2ZXMgYSBmaWxlIG9wZW4sIGl0IGNhbm5vdCBiZSBkZWxldGVkIGJ5IG5hbWUgKHdoaWxlCiAgICAjIHRoZXJlJ3Mgbm90aGluZyB3ZSBjYW4gZG8gYWJvdXQgdGhhdCBoZXJlIGVpdGhlciwgd2UgY2FuIGRpc3BsYXkgdGhlCiAgICAjIG5hbWUgb2YgdGhlIG9mZmVuZGluZyB0ZXN0LCB3aGljaCBpcyBhIHJlYWwgaGVscCkuCiAgICBmb3IgbmFtZSBpbiAoc3VwcG9ydC5URVNURk4sCiAgICAgICAgICAgICAgICAgImRiX2hvbWUiLAogICAgICAgICAgICAgICAgKToKICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMobmFtZSk6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGlmIG9zLnBhdGguaXNkaXIobmFtZSk6CiAgICAgICAgICAgIGtpbmQsIG51a2VyID0gImRpcmVjdG9yeSIsIHNodXRpbC5ybXRyZWUKICAgICAgICBlbGlmIG9zLnBhdGguaXNmaWxlKG5hbWUpOgogICAgICAgICAgICBraW5kLCBudWtlciA9ICJmaWxlIiwgb3MudW5saW5rCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgU3lzdGVtRXJyb3IoIm9zLnBhdGggc2F5cyAlciBleGlzdHMgYnV0IGlzIG5laXRoZXIgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGlyZWN0b3J5IG5vciBmaWxlIiAlIG5hbWUpCgogICAgICAgIGlmIHZlcmJvc2U6CiAgICAgICAgICAgIHByaW50KCIlciBsZWZ0IGJlaGluZCAlcyAlciIgJSAodGVzdG5hbWUsIGtpbmQsIG5hbWUpKQogICAgICAgIHRyeToKICAgICAgICAgICAgIyBpZiB3ZSBoYXZlIGNobW9kLCBmaXggcG9zc2libGUgcGVybWlzc2lvbnMgcHJvYmxlbXMKICAgICAgICAgICAgIyB0aGF0IG1pZ2h0IHByZXZlbnQgY2xlYW51cAogICAgICAgICAgICBpZiAoaGFzYXR0cihvcywgJ2NobW9kJykpOgogICAgICAgICAgICAgICAgb3MuY2htb2QobmFtZSwgc3RhdC5TX0lSV1hVIHwgc3RhdC5TX0lSV1hHIHwgc3RhdC5TX0lSV1hPKQogICAgICAgICAgICBudWtlcihuYW1lKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgbXNnOgogICAgICAgICAgICBwcmludCgoIiVyIGxlZnQgYmVoaW5kICVzICVyIGFuZCBpdCBjb3VsZG4ndCBiZSAiCiAgICAgICAgICAgICAgICAicmVtb3ZlZDogJXMiICUgKHRlc3RuYW1lLCBraW5kLCBuYW1lLCBtc2cpKSwgZmlsZT1zeXMuc3RkZXJyKQoKZGVmIGRhc2hfUih0aGVfbW9kdWxlLCB0ZXN0LCBpbmRpcmVjdF90ZXN0LCBodW50cmxlYWtzKToKICAgICIiIlJ1biBhIHRlc3QgbXVsdGlwbGUgdGltZXMsIGxvb2tpbmcgZm9yIHJlZmVyZW5jZSBsZWFrcy4KCiAgICBSZXR1cm5zOgogICAgICAgIEZhbHNlIGlmIHRoZSB0ZXN0IGRpZG4ndCBsZWFrIHJlZmVyZW5jZXM7IFRydWUgaWYgd2UgZGV0ZWN0ZWQgcmVmbGVha3MuCiAgICAiIiIKICAgICMgVGhpcyBjb2RlIGlzIGhhY2tpc2ggYW5kIGluZWxlZ2FudCwgYnV0IGl0IHNlZW1zIHRvIGRvIHRoZSBqb2IuCiAgICBpbXBvcnQgY29weXJlZwogICAgaW1wb3J0IGNvbGxlY3Rpb25zLmFiYwoKICAgIGlmIG5vdCBoYXNhdHRyKHN5cywgJ2dldHRvdGFscmVmY291bnQnKToKICAgICAgICByYWlzZSBFeGNlcHRpb24oIlRyYWNraW5nIHJlZmVyZW5jZSBsZWFrcyByZXF1aXJlcyBhIGRlYnVnIGJ1aWxkICIKICAgICAgICAgICAgICAgICAgICAgICAgIm9mIFB5dGhvbiIpCgogICAgIyBTYXZlIGN1cnJlbnQgdmFsdWVzIGZvciBkYXNoX1JfY2xlYW51cCgpIHRvIHJlc3RvcmUuCiAgICBmcyA9IHdhcm5pbmdzLmZpbHRlcnNbOl0KICAgIHBzID0gY29weXJlZy5kaXNwYXRjaF90YWJsZS5jb3B5KCkKICAgIHBpYyA9IHN5cy5wYXRoX2ltcG9ydGVyX2NhY2hlLmNvcHkoKQogICAgdHJ5OgogICAgICAgIGltcG9ydCB6aXBpbXBvcnQKICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICB6ZGMgPSBOb25lICMgUnVuIHVubW9kaWZpZWQgb24gcGxhdGZvcm1zIHdpdGhvdXQgemlwaW1wb3J0IHN1cHBvcnQKICAgIGVsc2U6CiAgICAgICAgemRjID0gemlwaW1wb3J0Ll96aXBfZGlyZWN0b3J5X2NhY2hlLmNvcHkoKQogICAgYWJjcyA9IHt9CiAgICBmb3IgYWJjIGluIFtnZXRhdHRyKGNvbGxlY3Rpb25zLmFiYywgYSkgZm9yIGEgaW4gY29sbGVjdGlvbnMuYWJjLl9fYWxsX19dOgogICAgICAgIGlmIG5vdCBpc2Fic3RyYWN0KGFiYyk6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgZm9yIG9iaiBpbiBhYmMuX19zdWJjbGFzc2VzX18oKSArIFthYmNdOgogICAgICAgICAgICBhYmNzW29ial0gPSBvYmouX2FiY19yZWdpc3RyeS5jb3B5KCkKCiAgICBpZiBpbmRpcmVjdF90ZXN0OgogICAgICAgIGRlZiBydW5fdGhlX3Rlc3QoKToKICAgICAgICAgICAgaW5kaXJlY3RfdGVzdCgpCiAgICBlbHNlOgogICAgICAgIGRlZiBydW5fdGhlX3Rlc3QoKToKICAgICAgICAgICAgZGVsIHN5cy5tb2R1bGVzW3RoZV9tb2R1bGUuX19uYW1lX19dCiAgICAgICAgICAgIGV4ZWMoJ2ltcG9ydCAnICsgdGhlX21vZHVsZS5fX25hbWVfXykKCiAgICBkZWx0YXMgPSBbXQogICAgbndhcm11cCwgbnRyYWNrZWQsIGZuYW1lID0gaHVudHJsZWFrcwogICAgZm5hbWUgPSBvcy5wYXRoLmpvaW4oc3VwcG9ydC5TQVZFRENXRCwgZm5hbWUpCiAgICByZXBjb3VudCA9IG53YXJtdXAgKyBudHJhY2tlZAogICAgcHJpbnQoImJlZ2lubmluZyIsIHJlcGNvdW50LCAicmVwZXRpdGlvbnMiLCBmaWxlPXN5cy5zdGRlcnIpCiAgICBwcmludCgoIjEyMzQ1Njc4OTAiKihyZXBjb3VudC8vMTAgKyAxKSlbOnJlcGNvdW50XSwgZmlsZT1zeXMuc3RkZXJyKQogICAgc3lzLnN0ZGVyci5mbHVzaCgpCiAgICBkYXNoX1JfY2xlYW51cChmcywgcHMsIHBpYywgemRjLCBhYmNzKQogICAgZm9yIGkgaW4gcmFuZ2UocmVwY291bnQpOgogICAgICAgIHJjX2JlZm9yZSA9IHN5cy5nZXR0b3RhbHJlZmNvdW50KCkKICAgICAgICBydW5fdGhlX3Rlc3QoKQogICAgICAgIHN5cy5zdGRlcnIud3JpdGUoJy4nKQogICAgICAgIHN5cy5zdGRlcnIuZmx1c2goKQogICAgICAgIGRhc2hfUl9jbGVhbnVwKGZzLCBwcywgcGljLCB6ZGMsIGFiY3MpCiAgICAgICAgcmNfYWZ0ZXIgPSBzeXMuZ2V0dG90YWxyZWZjb3VudCgpCiAgICAgICAgaWYgaSA+PSBud2FybXVwOgogICAgICAgICAgICBkZWx0YXMuYXBwZW5kKHJjX2FmdGVyIC0gcmNfYmVmb3JlKQogICAgcHJpbnQoZmlsZT1zeXMuc3RkZXJyKQogICAgaWYgYW55KGRlbHRhcyk6CiAgICAgICAgbXNnID0gJyVzIGxlYWtlZCAlcyByZWZlcmVuY2VzLCBzdW09JXMnICUgKHRlc3QsIGRlbHRhcywgc3VtKGRlbHRhcykpCiAgICAgICAgcHJpbnQobXNnLCBmaWxlPXN5cy5zdGRlcnIpCiAgICAgICAgc3lzLnN0ZGVyci5mbHVzaCgpCiAgICAgICAgd2l0aCBvcGVuKGZuYW1lLCAiYSIpIGFzIHJlZnJlcDoKICAgICAgICAgICAgcHJpbnQobXNnLCBmaWxlPXJlZnJlcCkKICAgICAgICAgICAgcmVmcmVwLmZsdXNoKCkKICAgICAgICByZXR1cm4gVHJ1ZQogICAgcmV0dXJuIEZhbHNlCgpkZWYgZGFzaF9SX2NsZWFudXAoZnMsIHBzLCBwaWMsIHpkYywgYWJjcyk6CiAgICBpbXBvcnQgZ2MsIGNvcHlyZWcKICAgIGltcG9ydCBfc3RycHRpbWUsIGxpbmVjYWNoZQogICAgaW1wb3J0IHVybGxpYi5wYXJzZSwgdXJsbGliLnJlcXVlc3QsIG1pbWV0eXBlcywgZG9jdGVzdAogICAgaW1wb3J0IHN0cnVjdCwgZmlsZWNtcCwgY29sbGVjdGlvbnMuYWJjCiAgICBmcm9tIGRpc3R1dGlscy5kaXJfdXRpbCBpbXBvcnQgX3BhdGhfY3JlYXRlZAogICAgZnJvbSB3ZWFrcmVmIGltcG9ydCBXZWFrU2V0CgogICAgIyBDbGVhciB0aGUgd2FybmluZ3MgcmVnaXN0cnksIHNvIHRoZXkgY2FuIGJlIGRpc3BsYXllZCBhZ2FpbgogICAgZm9yIG1vZCBpbiBzeXMubW9kdWxlcy52YWx1ZXMoKToKICAgICAgICBpZiBoYXNhdHRyKG1vZCwgJ19fd2FybmluZ3JlZ2lzdHJ5X18nKToKICAgICAgICAgICAgZGVsIG1vZC5fX3dhcm5pbmdyZWdpc3RyeV9fCgogICAgIyBSZXN0b3JlIHNvbWUgb3JpZ2luYWwgdmFsdWVzLgogICAgd2FybmluZ3MuZmlsdGVyc1s6XSA9IGZzCiAgICBjb3B5cmVnLmRpc3BhdGNoX3RhYmxlLmNsZWFyKCkKICAgIGNvcHlyZWcuZGlzcGF0Y2hfdGFibGUudXBkYXRlKHBzKQogICAgc3lzLnBhdGhfaW1wb3J0ZXJfY2FjaGUuY2xlYXIoKQogICAgc3lzLnBhdGhfaW1wb3J0ZXJfY2FjaGUudXBkYXRlKHBpYykKICAgIHRyeToKICAgICAgICBpbXBvcnQgemlwaW1wb3J0CiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgcGFzcyAjIFJ1biB1bm1vZGlmaWVkIG9uIHBsYXRmb3JtcyB3aXRob3V0IHppcGltcG9ydCBzdXBwb3J0CiAgICBlbHNlOgogICAgICAgIHppcGltcG9ydC5femlwX2RpcmVjdG9yeV9jYWNoZS5jbGVhcigpCiAgICAgICAgemlwaW1wb3J0Ll96aXBfZGlyZWN0b3J5X2NhY2hlLnVwZGF0ZSh6ZGMpCgogICAgIyBjbGVhciB0eXBlIGNhY2hlCiAgICBzeXMuX2NsZWFyX3R5cGVfY2FjaGUoKQoKICAgICMgQ2xlYXIgQUJDIHJlZ2lzdHJpZXMsIHJlc3RvcmluZyBwcmV2aW91c2x5IHNhdmVkIEFCQyByZWdpc3RyaWVzLgogICAgZm9yIGFiYyBpbiBbZ2V0YXR0cihjb2xsZWN0aW9ucy5hYmMsIGEpIGZvciBhIGluIGNvbGxlY3Rpb25zLmFiYy5fX2FsbF9fXToKICAgICAgICBpZiBub3QgaXNhYnN0cmFjdChhYmMpOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGZvciBvYmogaW4gYWJjLl9fc3ViY2xhc3Nlc19fKCkgKyBbYWJjXToKICAgICAgICAgICAgb2JqLl9hYmNfcmVnaXN0cnkgPSBhYmNzLmdldChvYmosIFdlYWtTZXQoKSkuY29weSgpCiAgICAgICAgICAgIG9iai5fYWJjX2NhY2hlLmNsZWFyKCkKICAgICAgICAgICAgb2JqLl9hYmNfbmVnYXRpdmVfY2FjaGUuY2xlYXIoKQoKICAgICMgRmx1c2ggc3RhbmRhcmQgb3V0cHV0LCBzbyB0aGF0IGJ1ZmZlcmVkIGRhdGEgaXMgc2VudCB0byB0aGUgT1MgYW5kCiAgICAjIGFzc29jaWF0ZWQgUHl0aG9uIG9iamVjdHMgYXJlIHJlY2xhaW1lZC4KICAgIGZvciBzdHJlYW0gaW4gKHN5cy5zdGRvdXQsIHN5cy5zdGRlcnIsIHN5cy5fX3N0ZG91dF9fLCBzeXMuX19zdGRlcnJfXyk6CiAgICAgICAgaWYgc3RyZWFtIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzdHJlYW0uZmx1c2goKQoKICAgICMgQ2xlYXIgYXNzb3J0ZWQgbW9kdWxlIGNhY2hlcy4KICAgIF9wYXRoX2NyZWF0ZWQuY2xlYXIoKQogICAgcmUucHVyZ2UoKQogICAgX3N0cnB0aW1lLl9yZWdleF9jYWNoZS5jbGVhcigpCiAgICB1cmxsaWIucGFyc2UuY2xlYXJfY2FjaGUoKQogICAgdXJsbGliLnJlcXVlc3QudXJsY2xlYW51cCgpCiAgICBsaW5lY2FjaGUuY2xlYXJjYWNoZSgpCiAgICBtaW1ldHlwZXMuX2RlZmF1bHRfbWltZV90eXBlcygpCiAgICBmaWxlY21wLl9jYWNoZS5jbGVhcigpCiAgICBzdHJ1Y3QuX2NsZWFyY2FjaGUoKQogICAgZG9jdGVzdC5tYXN0ZXIgPSBOb25lCiAgICB0cnk6CiAgICAgICAgaW1wb3J0IGN0eXBlcwogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICMgRG9uJ3Qgd29ycnkgYWJvdXQgcmVzZXR0aW5nIHRoZSBjYWNoZSBpZiBjdHlwZXMgaXMgbm90IHN1cHBvcnRlZAogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgY3R5cGVzLl9yZXNldF9jYWNoZSgpCgogICAgIyBDb2xsZWN0IGN5Y2xpYyB0cmFzaC4KICAgIGdjLmNvbGxlY3QoKQoKZGVmIHdhcm1fY2FjaGVzKCk6CiAgICAjIGNoYXIgY2FjaGUKICAgIHMgPSBieXRlcyhyYW5nZSgyNTYpKQogICAgZm9yIGkgaW4gcmFuZ2UoMjU2KToKICAgICAgICBzW2k6aSsxXQogICAgIyB1bmljb2RlIGNhY2hlCiAgICB4ID0gW2NocihpKSBmb3IgaSBpbiByYW5nZSgyNTYpXQogICAgIyBpbnQgY2FjaGUKICAgIHggPSBsaXN0KHJhbmdlKC01LCAyNTcpKQoKZGVmIGZpbmR0ZXN0ZGlyKHBhdGg9Tm9uZSk6CiAgICByZXR1cm4gcGF0aCBvciBvcy5wYXRoLmRpcm5hbWUoX19maWxlX18pIG9yIG9zLmN1cmRpcgoKZGVmIHJlbW92ZXB5KG5hbWVzKToKICAgIGlmIG5vdCBuYW1lczoKICAgICAgICByZXR1cm4KICAgIGZvciBpZHgsIG5hbWUgaW4gZW51bWVyYXRlKG5hbWVzKToKICAgICAgICBiYXNlbmFtZSwgZXh0ID0gb3MucGF0aC5zcGxpdGV4dChuYW1lKQogICAgICAgIGlmIGV4dCA9PSAnLnB5JzoKICAgICAgICAgICAgbmFtZXNbaWR4XSA9IGJhc2VuYW1lCgpkZWYgY291bnQobiwgd29yZCk6CiAgICBpZiBuID09IDE6CiAgICAgICAgcmV0dXJuICIlZCAlcyIgJSAobiwgd29yZCkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuICIlZCAlc3MiICUgKG4sIHdvcmQpCgpkZWYgcHJpbnRsaXN0KHgsIHdpZHRoPTcwLCBpbmRlbnQ9NCk6CiAgICAiIiJQcmludCB0aGUgZWxlbWVudHMgb2YgaXRlcmFibGUgeCB0byBzdGRvdXQuCgogICAgT3B0aW9uYWwgYXJnIHdpZHRoIChkZWZhdWx0IDcwKSBpcyB0aGUgbWF4aW11bSBsaW5lIGxlbmd0aC4KICAgIE9wdGlvbmFsIGFyZyBpbmRlbnQgKGRlZmF1bHQgNCkgaXMgdGhlIG51bWJlciBvZiBibGFua3Mgd2l0aCB3aGljaCB0bwogICAgYmVnaW4gZWFjaCBsaW5lLgogICAgIiIiCgogICAgZnJvbSB0ZXh0d3JhcCBpbXBvcnQgZmlsbAogICAgYmxhbmtzID0gJyAnICogaW5kZW50CiAgICAjIFByaW50IHRoZSBzb3J0ZWQgbGlzdDogJ3gnIG1heSBiZSBhICctLXJhbmRvbScgbGlzdCBvciBhIHNldCgpCiAgICBwcmludChmaWxsKCcgJy5qb2luKHN0cihlbHQpIGZvciBlbHQgaW4gc29ydGVkKHgpKSwgd2lkdGgsCiAgICAgICAgICAgICAgIGluaXRpYWxfaW5kZW50PWJsYW5rcywgc3Vic2VxdWVudF9pbmRlbnQ9YmxhbmtzKSkKCiMgTWFwIHN5cy5wbGF0Zm9ybSB0byBhIHN0cmluZyBjb250YWluaW5nIHRoZSBiYXNlbmFtZXMgb2YgdGVzdHMKIyBleHBlY3RlZCB0byBiZSBza2lwcGVkIG9uIHRoYXQgcGxhdGZvcm0uCiMKIyBTcGVjaWFsIGNhc2VzOgojICAgICB0ZXN0X3BlcDI3NwojICAgICAgICAgVGhlIF9FeHBlY3RlZFNraXBzIGNvbnN0cnVjdG9yIGFkZHMgdGhpcyB0byB0aGUgc2V0IG9mIGV4cGVjdGVkCiMgICAgICAgICBza2lwcyBpZiBub3Qgb3MucGF0aC5zdXBwb3J0c191bmljb2RlX2ZpbGVuYW1lcy4KIyAgICAgdGVzdF90aW1lb3V0CiMgICAgICAgICBDb250cm9sbGVkIGJ5IHRlc3RfdGltZW91dC5za2lwX2V4cGVjdGVkLiAgUmVxdWlyZXMgdGhlIG5ldHdvcmsKIyAgICAgICAgIHJlc291cmNlIGFuZCBhIHNvY2tldCBtb2R1bGUuCiMKIyBUZXN0cyB0aGF0IGFyZSBleHBlY3RlZCB0byBiZSBza2lwcGVkIGV2ZXJ5d2hlcmUgZXhjZXB0IG9uIG9uZSBwbGF0Zm9ybQojIGFyZSBhbHNvIGhhbmRsZWQgc2VwYXJhdGVseS4KCl9leHBlY3RhdGlvbnMgPSAoCiAgICAoJ3dpbjMyJywKICAgICAgICAiIiIKICAgICAgICB0ZXN0X19sb2NhbGUKICAgICAgICB0ZXN0X2NyeXB0CiAgICAgICAgdGVzdF9jdXJzZXMKICAgICAgICB0ZXN0X2RibQogICAgICAgIHRlc3RfZGV2cG9sbAogICAgICAgIHRlc3RfZmNudGwKICAgICAgICB0ZXN0X2ZvcmsxCiAgICAgICAgdGVzdF9lcG9sbAogICAgICAgIHRlc3RfZGJtX2dudQogICAgICAgIHRlc3RfZGJtX25kYm0KICAgICAgICB0ZXN0X2dycAogICAgICAgIHRlc3RfaW9jdGwKICAgICAgICB0ZXN0X2xhcmdlZmlsZQogICAgICAgIHRlc3Rfa3F1ZXVlCiAgICAgICAgdGVzdF9vcGVucHR5CiAgICAgICAgdGVzdF9vc3NhdWRpb2RldgogICAgICAgIHRlc3RfcGlwZXMKICAgICAgICB0ZXN0X3BvbGwKICAgICAgICB0ZXN0X3Bvc2l4CiAgICAgICAgdGVzdF9wdHkKICAgICAgICB0ZXN0X3B3ZAogICAgICAgIHRlc3RfcmVzb3VyY2UKICAgICAgICB0ZXN0X3NpZ25hbAogICAgICAgIHRlc3Rfc3lzbG9nCiAgICAgICAgdGVzdF90aHJlYWRzaWduYWxzCiAgICAgICAgdGVzdF93YWl0MwogICAgICAgIHRlc3Rfd2FpdDQKICAgICAgICAiIiIpLAogICAgKCdsaW51eCcsCiAgICAgICAgIiIiCiAgICAgICAgdGVzdF9jdXJzZXMKICAgICAgICB0ZXN0X2RldnBvbGwKICAgICAgICB0ZXN0X2xhcmdlZmlsZQogICAgICAgIHRlc3Rfa3F1ZXVlCiAgICAgICAgdGVzdF9vc3NhdWRpb2RldgogICAgICAgICIiIiksCiAgICAoJ3VuaXh3YXJlJywKICAgICAgICAiIiIKICAgICAgICB0ZXN0X2Vwb2xsCiAgICAgICAgdGVzdF9sYXJnZWZpbGUKICAgICAgICB0ZXN0X2txdWV1ZQogICAgICAgIHRlc3RfbWluaWRvbQogICAgICAgIHRlc3Rfb3BlbnB0eQogICAgICAgIHRlc3RfcHlleHBhdAogICAgICAgIHRlc3Rfc2F4CiAgICAgICAgdGVzdF9zdW5kcnkKICAgICAgICAiIiIpLAogICAgKCdvcGVudW5peCcsCiAgICAgICAgIiIiCiAgICAgICAgdGVzdF9lcG9sbAogICAgICAgIHRlc3RfbGFyZ2VmaWxlCiAgICAgICAgdGVzdF9rcXVldWUKICAgICAgICB0ZXN0X21pbmlkb20KICAgICAgICB0ZXN0X29wZW5wdHkKICAgICAgICB0ZXN0X3B5ZXhwYXQKICAgICAgICB0ZXN0X3NheAogICAgICAgIHRlc3Rfc3VuZHJ5CiAgICAgICAgIiIiKSwKICAgICgnc2NvX3N2JywKICAgICAgICAiIiIKICAgICAgICB0ZXN0X2FzeW5jaGF0CiAgICAgICAgdGVzdF9mb3JrMQogICAgICAgIHRlc3RfZXBvbGwKICAgICAgICB0ZXN0X2dldHRleHQKICAgICAgICB0ZXN0X2xhcmdlZmlsZQogICAgICAgIHRlc3RfbG9jYWxlCiAgICAgICAgdGVzdF9rcXVldWUKICAgICAgICB0ZXN0X21pbmlkb20KICAgICAgICB0ZXN0X29wZW5wdHkKICAgICAgICB0ZXN0X3B5ZXhwYXQKICAgICAgICB0ZXN0X3F1ZXVlCiAgICAgICAgdGVzdF9zYXgKICAgICAgICB0ZXN0X3N1bmRyeQogICAgICAgIHRlc3RfdGhyZWFkCiAgICAgICAgdGVzdF90aHJlYWRlZF9pbXBvcnQKICAgICAgICB0ZXN0X3RocmVhZGVkdGVtcGZpbGUKICAgICAgICB0ZXN0X3RocmVhZGluZwogICAgICAgICIiIiksCiAgICAoJ2RhcndpbicsCiAgICAgICAgIiIiCiAgICAgICAgdGVzdF9fbG9jYWxlCiAgICAgICAgdGVzdF9jdXJzZXMKICAgICAgICB0ZXN0X2RldnBvbGwKICAgICAgICB0ZXN0X2Vwb2xsCiAgICAgICAgdGVzdF9kYm1fZ251CiAgICAgICAgdGVzdF9nZGIKICAgICAgICB0ZXN0X2xhcmdlZmlsZQogICAgICAgIHRlc3RfbG9jYWxlCiAgICAgICAgdGVzdF9taW5pZG9tCiAgICAgICAgdGVzdF9vc3NhdWRpb2RldgogICAgICAgIHRlc3RfcG9sbAogICAgICAgICIiIiksCiAgICAoJ3N1bm9zJywKICAgICAgICAiIiIKICAgICAgICB0ZXN0X2N1cnNlcwogICAgICAgIHRlc3RfZGJtCiAgICAgICAgdGVzdF9lcG9sbAogICAgICAgIHRlc3Rfa3F1ZXVlCiAgICAgICAgdGVzdF9kYm1fZ251CiAgICAgICAgdGVzdF9nemlwCiAgICAgICAgdGVzdF9vcGVucHR5CiAgICAgICAgdGVzdF96aXBmaWxlCiAgICAgICAgdGVzdF96bGliCiAgICAgICAgIiIiKSwKICAgICgnaHAtdXgnLAogICAgICAgICIiIgogICAgICAgIHRlc3RfY3Vyc2VzCiAgICAgICAgdGVzdF9lcG9sbAogICAgICAgIHRlc3RfZGJtX2dudQogICAgICAgIHRlc3RfZ3ppcAogICAgICAgIHRlc3RfbGFyZ2VmaWxlCiAgICAgICAgdGVzdF9sb2NhbGUKICAgICAgICB0ZXN0X2txdWV1ZQogICAgICAgIHRlc3RfbWluaWRvbQogICAgICAgIHRlc3Rfb3BlbnB0eQogICAgICAgIHRlc3RfcHlleHBhdAogICAgICAgIHRlc3Rfc2F4CiAgICAgICAgdGVzdF96aXBmaWxlCiAgICAgICAgdGVzdF96bGliCiAgICAgICAgIiIiKSwKICAgICgnY3lnd2luJywKICAgICAgICAiIiIKICAgICAgICB0ZXN0X2N1cnNlcwogICAgICAgIHRlc3RfZGJtCiAgICAgICAgdGVzdF9kZXZwb2xsCiAgICAgICAgdGVzdF9lcG9sbAogICAgICAgIHRlc3RfaW9jdGwKICAgICAgICB0ZXN0X2txdWV1ZQogICAgICAgIHRlc3RfbGFyZ2VmaWxlCiAgICAgICAgdGVzdF9sb2NhbGUKICAgICAgICB0ZXN0X29zc2F1ZGlvZGV2CiAgICAgICAgdGVzdF9zb2NrZXRzZXJ2ZXIKICAgICAgICAiIiIpLAogICAgKCdvczJlbXgnLAogICAgICAgICIiIgogICAgICAgIHRlc3RfYXVkaW9vcAogICAgICAgIHRlc3RfY3Vyc2VzCiAgICAgICAgdGVzdF9lcG9sbAogICAgICAgIHRlc3Rfa3F1ZXVlCiAgICAgICAgdGVzdF9sYXJnZWZpbGUKICAgICAgICB0ZXN0X21tYXAKICAgICAgICB0ZXN0X29wZW5wdHkKICAgICAgICB0ZXN0X29zc2F1ZGlvZGV2CiAgICAgICAgdGVzdF9wdHkKICAgICAgICB0ZXN0X3Jlc291cmNlCiAgICAgICAgdGVzdF9zaWduYWwKICAgICAgICAiIiIpLAogICAgKCdmcmVlYnNkJywKICAgICAgICAiIiIKICAgICAgICB0ZXN0X2RldnBvbGwKICAgICAgICB0ZXN0X2Vwb2xsCiAgICAgICAgdGVzdF9kYm1fZ251CiAgICAgICAgdGVzdF9sb2NhbGUKICAgICAgICB0ZXN0X29zc2F1ZGlvZGV2CiAgICAgICAgdGVzdF9wZXAyNzcKICAgICAgICB0ZXN0X3B0eQogICAgICAgIHRlc3Rfc29ja2V0c2VydmVyCiAgICAgICAgdGVzdF90Y2wKICAgICAgICB0ZXN0X3RrCiAgICAgICAgdGVzdF90dGtfZ3Vpb25seQogICAgICAgIHRlc3RfdHRrX3RleHRvbmx5CiAgICAgICAgdGVzdF90aW1lb3V0CiAgICAgICAgdGVzdF91cmxsaWJuZXQKICAgICAgICB0ZXN0X211bHRpcHJvY2Vzc2luZwogICAgICAgICIiIiksCiAgICAoJ2FpeCcsCiAgICAgICAgIiIiCiAgICAgICAgdGVzdF9iejIKICAgICAgICB0ZXN0X2Vwb2xsCiAgICAgICAgdGVzdF9kYm1fZ251CiAgICAgICAgdGVzdF9nemlwCiAgICAgICAgdGVzdF9rcXVldWUKICAgICAgICB0ZXN0X29zc2F1ZGlvZGV2CiAgICAgICAgdGVzdF90Y2wKICAgICAgICB0ZXN0X3RrCiAgICAgICAgdGVzdF90dGtfZ3Vpb25seQogICAgICAgIHRlc3RfdHRrX3RleHRvbmx5CiAgICAgICAgdGVzdF96aXBpbXBvcnQKICAgICAgICB0ZXN0X3psaWIKICAgICAgICAiIiIpLAogICAgKCdvcGVuYnNkJywKICAgICAgICAiIiIKICAgICAgICB0ZXN0X2N0eXBlcwogICAgICAgIHRlc3RfZGV2cG9sbAogICAgICAgIHRlc3RfZXBvbGwKICAgICAgICB0ZXN0X2RibV9nbnUKICAgICAgICB0ZXN0X2xvY2FsZQogICAgICAgIHRlc3Rfbm9ybWFsaXphdGlvbgogICAgICAgIHRlc3Rfb3NzYXVkaW9kZXYKICAgICAgICB0ZXN0X3BlcDI3NwogICAgICAgIHRlc3RfdGNsCiAgICAgICAgdGVzdF90awogICAgICAgIHRlc3RfdHRrX2d1aW9ubHkKICAgICAgICB0ZXN0X3R0a190ZXh0b25seQogICAgICAgIHRlc3RfbXVsdGlwcm9jZXNzaW5nCiAgICAgICAgIiIiKSwKICAgICgnbmV0YnNkJywKICAgICAgICAiIiIKICAgICAgICB0ZXN0X2N0eXBlcwogICAgICAgIHRlc3RfY3Vyc2VzCiAgICAgICAgdGVzdF9kZXZwb2xsCiAgICAgICAgdGVzdF9lcG9sbAogICAgICAgIHRlc3RfZGJtX2dudQogICAgICAgIHRlc3RfbG9jYWxlCiAgICAgICAgdGVzdF9vc3NhdWRpb2RldgogICAgICAgIHRlc3RfcGVwMjc3CiAgICAgICAgdGVzdF90Y2wKICAgICAgICB0ZXN0X3RrCiAgICAgICAgdGVzdF90dGtfZ3Vpb25seQogICAgICAgIHRlc3RfdHRrX3RleHRvbmx5CiAgICAgICAgdGVzdF9tdWx0aXByb2Nlc3NpbmcKICAgICAgICAiIiIpLAopCgpjbGFzcyBfRXhwZWN0ZWRTa2lwczoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBpbXBvcnQgb3MucGF0aAogICAgICAgIGZyb20gdGVzdCBpbXBvcnQgdGVzdF90aW1lb3V0CgogICAgICAgIHNlbGYudmFsaWQgPSBGYWxzZQogICAgICAgIGV4cGVjdGVkID0gTm9uZQogICAgICAgIGZvciBpdGVtIGluIF9leHBlY3RhdGlvbnM6CiAgICAgICAgICAgIGlmIHN5cy5wbGF0Zm9ybS5zdGFydHN3aXRoKGl0ZW1bMF0pOgogICAgICAgICAgICAgICAgZXhwZWN0ZWQgPSBpdGVtWzFdCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIGlmIGV4cGVjdGVkIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmV4cGVjdGVkID0gc2V0KGV4cGVjdGVkLnNwbGl0KCkpCgogICAgICAgICAgICAjIFRoZXNlIGFyZSBicm9rZW4gdGVzdHMsIGZvciBub3cgc2tpcHBlZCBvbiBldmVyeSBwbGF0Zm9ybS4KICAgICAgICAgICAgIyBYWFggRml4IHRoZXNlIQogICAgICAgICAgICBzZWxmLmV4cGVjdGVkLmFkZCgndGVzdF9uaXMnKQoKICAgICAgICAgICAgIyBleHBlY3RlZCB0byBiZSBza2lwcGVkIG9uIGV2ZXJ5IHBsYXRmb3JtLCBldmVuIExpbnV4CiAgICAgICAgICAgIGlmIG5vdCBvcy5wYXRoLnN1cHBvcnRzX3VuaWNvZGVfZmlsZW5hbWVzOgogICAgICAgICAgICAgICAgc2VsZi5leHBlY3RlZC5hZGQoJ3Rlc3RfcGVwMjc3JykKCiAgICAgICAgICAgICMgZG9jdGVzdCwgcHJvZmlsZSBhbmQgY1Byb2ZpbGUgdGVzdHMgZmFpbCB3aGVuIHRoZSBjb2RlYyBmb3IgdGhlCiAgICAgICAgICAgICMgZnMgZW5jb2RpbmcgaXNuJ3QgYnVpbHQgaW4gYmVjYXVzZSBQeVVuaWNvZGVfRGVjb2RlKCkgYWRkcyB0d28KICAgICAgICAgICAgIyBjYWxscyBpbnRvIFB5dGhvbi4KICAgICAgICAgICAgZW5jcyA9ICgidXRmLTgiLCAibGF0aW4tMSIsICJhc2NpaSIsICJtYmNzIiwgInV0Zi0xNiIsICJ1dGYtMzIiKQogICAgICAgICAgICBpZiBzeXMuZ2V0ZmlsZXN5c3RlbWVuY29kaW5nKCkubG93ZXIoKSBub3QgaW4gZW5jczoKICAgICAgICAgICAgICAgIHNlbGYuZXhwZWN0ZWQuYWRkKCd0ZXN0X3Byb2ZpbGUnKQogICAgICAgICAgICAgICAgc2VsZi5leHBlY3RlZC5hZGQoJ3Rlc3RfY1Byb2ZpbGUnKQogICAgICAgICAgICAgICAgc2VsZi5leHBlY3RlZC5hZGQoJ3Rlc3RfZG9jdGVzdCcpCgogICAgICAgICAgICBpZiB0ZXN0X3RpbWVvdXQuc2tpcF9leHBlY3RlZDoKICAgICAgICAgICAgICAgIHNlbGYuZXhwZWN0ZWQuYWRkKCd0ZXN0X3RpbWVvdXQnKQoKICAgICAgICAgICAgaWYgc3lzLnBsYXRmb3JtICE9ICJ3aW4zMiI6CiAgICAgICAgICAgICAgICAjIHRlc3Rfc3FsaXRlIGlzIG9ubHkgcmVsaWFibGUgb24gV2luZG93cyB3aGVyZSB0aGUgbGlicmFyeQogICAgICAgICAgICAgICAgIyBpcyBkaXN0cmlidXRlZCB3aXRoIFB5dGhvbgogICAgICAgICAgICAgICAgV0lOX09OTFkgPSB7InRlc3RfdW5pY29kZV9maWxlIiwgInRlc3Rfd2lucmVnIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0ZXN0X3dpbnNvdW5kIiwgInRlc3Rfc3RhcnRmaWxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0ZXN0X3NxbGl0ZSIsICJ0ZXN0X21zaWxpYiJ9CiAgICAgICAgICAgICAgICBzZWxmLmV4cGVjdGVkIHw9IFdJTl9PTkxZCgogICAgICAgICAgICBpZiBzeXMucGxhdGZvcm0gIT0gJ3N1bm9zNSc6CiAgICAgICAgICAgICAgICBzZWxmLmV4cGVjdGVkLmFkZCgndGVzdF9uaXMnKQoKICAgICAgICAgICAgaWYgc3VwcG9ydC5weXRob25faXNfb3B0aW1pemVkKCk6CiAgICAgICAgICAgICAgICBzZWxmLmV4cGVjdGVkLmFkZCgidGVzdF9nZGIiKQoKICAgICAgICAgICAgc2VsZi52YWxpZCA9IFRydWUKCiAgICBkZWYgaXN2YWxpZChzZWxmKToKICAgICAgICAiUmV0dXJuIHRydWUgaWZmIF9FeHBlY3RlZFNraXBzIGtub3dzIGFib3V0IHRoZSBjdXJyZW50IHBsYXRmb3JtLiIKICAgICAgICByZXR1cm4gc2VsZi52YWxpZAoKICAgIGRlZiBnZXRleHBlY3RlZChzZWxmKToKICAgICAgICAiIiJSZXR1cm4gc2V0IG9mIHRlc3QgbmFtZXMgd2UgZXhwZWN0IHRvIHNraXAgb24gY3VycmVudCBwbGF0Zm9ybS4KCiAgICAgICAgc2VsZi5pc3ZhbGlkKCkgbXVzdCBiZSB0cnVlLgogICAgICAgICIiIgoKICAgICAgICBhc3NlcnQgc2VsZi5pc3ZhbGlkKCkKICAgICAgICByZXR1cm4gc2VsZi5leHBlY3RlZAoKZGVmIF9tYWtlX3RlbXBfZGlyX2Zvcl9idWlsZChURU1QRElSKToKICAgICMgV2hlbiB0ZXN0cyBhcmUgcnVuIGZyb20gdGhlIFB5dGhvbiBidWlsZCBkaXJlY3RvcnksIGl0IGlzIGJlc3QgcHJhY3RpY2UKICAgICMgdG8ga2VlcCB0aGUgdGVzdCBmaWxlcyBpbiBhIHN1YmZvbGRlci4gIEl0IGVhc2VzIHRoZSBjbGVhbnVwIG9mIGxlZnRvdmVyCiAgICAjIGZpbGVzIHVzaW5nIGNvbW1hbmQgIm1ha2UgZGlzdGNsZWFuIi4KICAgIGlmIHN5c2NvbmZpZy5pc19weXRob25fYnVpbGQoKToKICAgICAgICBURU1QRElSID0gb3MucGF0aC5qb2luKHN5c2NvbmZpZy5nZXRfY29uZmlnX3Zhcignc3JjZGlyJyksICdidWlsZCcpCiAgICAgICAgVEVNUERJUiA9IG9zLnBhdGguYWJzcGF0aChURU1QRElSKQogICAgICAgIHRyeToKICAgICAgICAgICAgb3MubWtkaXIoVEVNUERJUikKICAgICAgICBleGNlcHQgRmlsZUV4aXN0c0Vycm9yOgogICAgICAgICAgICBwYXNzCgogICAgIyBEZWZpbmUgYSB3cml0YWJsZSB0ZW1wIGRpciB0aGF0IHdpbGwgYmUgdXNlZCBhcyBjd2Qgd2hpbGUgcnVubmluZwogICAgIyB0aGUgdGVzdHMuIFRoZSBuYW1lIG9mIHRoZSBkaXIgaW5jbHVkZXMgdGhlIHBpZCB0byBhbGxvdyBwYXJhbGxlbAogICAgIyB0ZXN0aW5nIChzZWUgdGhlIC1qIG9wdGlvbikuCiAgICBURVNUQ1dEID0gJ3Rlc3RfcHl0aG9uX3t9Jy5mb3JtYXQob3MuZ2V0cGlkKCkpCgogICAgVEVTVENXRCA9IG9zLnBhdGguam9pbihURU1QRElSLCBURVNUQ1dEKQogICAgcmV0dXJuIFRFTVBESVIsIFRFU1RDV0QKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICAjIFJlbW92ZSByZWdydGVzdC5weSdzIG93biBkaXJlY3RvcnkgZnJvbSB0aGUgbW9kdWxlIHNlYXJjaCBwYXRoLiBEZXNwaXRlCiAgICAjIHRoZSBlbGltaW5hdGlvbiBvZiBpbXBsaWNpdCByZWxhdGl2ZSBpbXBvcnRzLCB0aGlzIGlzIHN0aWxsIG5lZWRlZCB0bwogICAgIyBlbnN1cmUgdGhhdCBzdWJtb2R1bGVzIG9mIHRoZSB0ZXN0IHBhY2thZ2UgZG8gbm90IGluYXBwcm9wcmlhdGVseSBhcHBlYXIKICAgICMgYXMgdG9wLWxldmVsIG1vZHVsZXMgZXZlbiB3aGVuIHBlb3BsZSAob3IgYnVpbGRib3RzISkgaW52b2tlIHJlZ3J0ZXN0LnB5CiAgICAjIGRpcmVjdGx5IGluc3RlYWQgb2YgdXNpbmcgdGhlIC1tIHN3aXRjaAogICAgbXlkaXIgPSBvcy5wYXRoLmFic3BhdGgob3MucGF0aC5ub3JtcGF0aChvcy5wYXRoLmRpcm5hbWUoc3lzLmFyZ3ZbMF0pKSkKICAgIGkgPSBsZW4oc3lzLnBhdGgpCiAgICB3aGlsZSBpID49IDA6CiAgICAgICAgaSAtPSAxCiAgICAgICAgaWYgb3MucGF0aC5hYnNwYXRoKG9zLnBhdGgubm9ybXBhdGgoc3lzLnBhdGhbaV0pKSA9PSBteWRpcjoKICAgICAgICAgICAgZGVsIHN5cy5wYXRoW2ldCgogICAgIyBmaW5kdGVzdGRpcigpIGdldHMgdGhlIGRpcm5hbWUgb3V0IG9mIF9fZmlsZV9fLCBzbyB3ZSBoYXZlIHRvIG1ha2UgaXQKICAgICMgYWJzb2x1dGUgYmVmb3JlIGNoYW5naW5nIHRoZSB3b3JraW5nIGRpcmVjdG9yeS4KICAgICMgRm9yIGV4YW1wbGUgX19maWxlX18gbWF5IGJlIHJlbGF0aXZlIHdoZW4gcnVubmluZyB0cmFjZSBvciBwcm9maWxlLgogICAgIyBTZWUgaXNzdWUgIzkzMjMuCiAgICBfX2ZpbGVfXyA9IG9zLnBhdGguYWJzcGF0aChfX2ZpbGVfXykKCiAgICAjIHNhbml0eSBjaGVjawogICAgYXNzZXJ0IF9fZmlsZV9fID09IG9zLnBhdGguYWJzcGF0aChzeXMuYXJndlswXSkKCiAgICBURU1QRElSLCBURVNUQ1dEID0gX21ha2VfdGVtcF9kaXJfZm9yX2J1aWxkKFRFTVBESVIpCgogICAgIyBSdW4gdGhlIHRlc3RzIGluIGEgY29udGV4dCBtYW5hZ2VyIHRoYXQgdGVtcG9yYXJ5IGNoYW5nZXMgdGhlIENXRCB0byBhCiAgICAjIHRlbXBvcmFyeSBhbmQgd3JpdGFibGUgZGlyZWN0b3J5LiBJZiBpdCdzIG5vdCBwb3NzaWJsZSB0byBjcmVhdGUgb3IKICAgICMgY2hhbmdlIHRoZSBDV0QsIHRoZSBvcmlnaW5hbCBDV0Qgd2lsbCBiZSB1c2VkLiBUaGUgb3JpZ2luYWwgQ1dEIGlzCiAgICAjIGF2YWlsYWJsZSBmcm9tIHN1cHBvcnQuU0FWRURDV0QuCiAgICB3aXRoIHN1cHBvcnQudGVtcF9jd2QoVEVTVENXRCwgcXVpZXQ9VHJ1ZSk6CiAgICAgICAgbWFpbigpCg==',
'/Lib/ui/progressbar.py':'aW1wb3J0IHdpZGdldApmcm9tIGJyb3dzZXIgaW1wb3J0IGh0bWwKCmNsYXNzIFByb2dyZXNzQmFyKHdpZGdldC5XaWRnZXQpOgogIGRlZiBfX2luaXRfXyhzZWxmLCBpZD1Ob25lLCBsYWJlbD1GYWxzZSk6CiAgICAgIHNlbGYuX2Rpdl9zaGVsbD1odG1sLkRJVihDbGFzcz0idWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKQogICAgICB3aWRnZXQuV2lkZ2V0Ll9faW5pdF9fKHNlbGYsIHNlbGYuX2Rpdl9zaGVsbCwgJ3Byb2dyZXNzYmFyJywgaWQpCgogICAgICBzZWxmLl9zaG93X2xhYmVsPWxhYmVsCiAgICAgIGlmIGxhYmVsOgogICAgICAgICBzZWxmLl9sYWJlbD1odG1sLkRJVihDbGFzcz0ncHJvZ3Jlc3MtbGFiZWwnKQogICAgICAgICBzZWxmLl9kaXZfc2hlbGwgPD0gc2VsZi5fbGFiZWwKCiAgICAgIHNlbGYuX2Jhcj1odG1sLkRJVihDbGFzcz0idWktcHJvZ3Jlc3NiYXItdmFsdWUgdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItbGVmdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17J3dpZHRoJzogJzBweCd9KQogICAgICBzZWxmLl9kaXZfc2hlbGwgPD0gc2VsZi5fYmFyCgogIGRlZiBzZXRfcHJvZ3Jlc3Moc2VsZiwgcGVyY2VudCk6CiAgICAgIHNlbGYuX2Jhci5zdHlsZS53aWR0aD0nJXMlJScgJSBwZXJjZW50CiAgICAgIGlmIHNlbGYuX3Nob3dfbGFiZWw6CiAgICAgICAgIHNlbGYuX2xhYmVsLnRleHQ9JyVzJSUnICUgcGVyY2VudAo=',
'/Lib/ui/slider.py':'aW1wb3J0IHdpZGdldApmcm9tIGJyb3dzZXIgaW1wb3J0IGRvYyxodG1sCgpjbGFzcyBTbGlkZXIod2lkZ2V0LldpZGdldCk6CgogIGRlZiBfX2luaXRfXyhzZWxmLCBpZD1Ob25lLCBsYWJlbD1GYWxzZSk6CgogICAgICBzZWxmLl9kaXZfc2hlbGw9aHRtbC5ESVYoQ2xhc3M9InVpLXNsaWRlciB1aS1zbGlkZXItaG9yaXpvbnRhbCB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCIpCgogICAgICB3aWRnZXQuV2lkZ2V0Ll9faW5pdF9fKHNlbGYsIHNlbGYuX2Rpdl9zaGVsbCwgJ3NsaWRlcicsIGlkKQoKICAgICAgc2VsZi5faGFuZGxlPWh0bWwuQShDbGFzcz0idWktc2xpZGVyLWhhbmRsZSB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGwiLAogICAgICAgICAgICAgICAgICAgICAgICAgIEhyZWY9JyMnLCBzdHlsZT17J2xlZnQnOiAnMHB4J30pCiAgICAgIHNlbGYuX3ZhbHVlPTAKICAgICAgc2VsZi5faXNNb3VzZURvd249RmFsc2UKCiAgICAgIGRlZiBzdGFydFNsaWRlKGUpOgogICAgICAgICAgc2VsZi5faXNNb3VzZURvd249VHJ1ZQogICAgICAgICAgc2VsZi5fdXBwZXJCb3VuZCA9IHNlbGYuX2Rpdl9zaGVsbC5vZmZzZXRXaWR0aCAtIHNlbGYuX2hhbmRsZS5vZmZzZXRXaWR0aAoKICAgICAgICAgIHBvcyA9IHdpZGdldC5nZXRNb3VzZVBvc2l0aW9uKGUpCiAgICAgICAgICBzZWxmLl9zdGFydE1vdXNlWD1wb3NbJ3gnXQoKICAgICAgICAgIHNlbGYuX2xhc3RFbGVtZW50TGVmdCA9IHBhcnNlSW50KHNlbGYuX2hhbmRsZS5zdHlsZS5sZWZ0KQogICAgICAgICAgdXBkYXRlUG9zaXRpb24oZSkKCiAgICAgIGRlZiB1cGRhdGVQb3NpdGlvbihlKToKICAgICAgICAgIHBvcyA9IHdpZGdldC5nZXRNb3VzZVBvc2l0aW9uKGUpCiAgICAgICAgICAjcHJpbnQoJ21vc2UgcG9zJyxwb3MpCiAgICAgICAgICBfbmV3UG9zID0gc2VsZi5fbGFzdEVsZW1lbnRMZWZ0ICsgcG9zWyd4J10gLSBzZWxmLl9zdGFydE1vdXNlWAogICAgICAgICAgCiAgICAgICAgICBfbmV3UG9zID0gbWF4KDAsIF9uZXdQb3MpCiAgICAgICAgICBfbmV3UG9zID0gbWluKF9uZXdQb3MsIHNlbGYuX3VwcGVyQm91bmQpCgogICAgICAgICAgc2VsZi5faGFuZGxlLnN0eWxlLmxlZnQgPSAnJXNweCcgJSBfbmV3UG9zCiAgICAgICAgICAjcHJpbnQoJ25ldyBwb3NpdGlvbicsc2VsZi5faGFuZGxlLnN0eWxlLmxlZnQpCiAgICAgICAgICBzZWxmLl9sYXN0RWxlbWVudExlZnQgPSBfbmV3UG9zCgogICAgICBkZWYgbW92aW5nKGUpOgogICAgICAgICAgaWYgc2VsZi5faXNNb3VzZURvd246CiAgICAgICAgICAgICB1cGRhdGVQb3NpdGlvbihlKQoKICAgICAgZGVmIGRyb3BDYWxsYmFjayhlKToKICAgICAgICAgIHNlbGYuX2lzTW91c2VEb3duPUZhbHNlCiAgICAgICAgICBzZWxmLl9oYW5kbGUudW5iaW5kKCdtb3VzZW1vdmUnLCBtb3ZpbmcpCgoKICAgICAgc2VsZi5faGFuZGxlLmJpbmQoJ21vdXNlbW92ZScsIG1vdmluZykKICAgICAgc2VsZi5faGFuZGxlLmJpbmQoJ21vdXNldXAnLCBkcm9wQ2FsbGJhY2spCiAgICAgICNzZWxmLl9oYW5kbGUuYmluZCgnbW91c2VvdXQnLCBkcm9wQ2FsbGJhY2spCiAgICAgIHNlbGYuX2hhbmRsZS5iaW5kKCdtb3VzZWRvd24nLCBzdGFydFNsaWRlKQoKICAgICAgZGVmIG1vdXNlb3ZlcihlKToKICAgICAgICAgIF9jbGFzcz1zZWxmLl9oYW5kbGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpCiAgICAgICAgICBzZWxmLl9oYW5kbGUuc2V0QXR0cmlidXRlKCdjbGFzcycsICclcyAlcycgJSAoX2NsYXNzLCAndWktc3RhdGUtaG92ZXInKSkKCiAgICAgIGRlZiBtb3VzZW91dChlKToKICAgICAgICAgIHNlbGYuX2lzTW91c2VEb3duPUZhbHNlCiAgICAgICAgICBfY2xhc3M9c2VsZi5faGFuZGxlLmdldEF0dHJpYnV0ZSgnY2xhc3MnKQogICAgICAgICAgc2VsZi5faGFuZGxlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBfY2xhc3MucmVwbGFjZSgndWktc3RhdGUtaG92ZXInLCAnJykpCgogICAgICBzZWxmLl9oYW5kbGUuYmluZCgnbW91c2VvdmVyJywgbW91c2VvdmVyKQogICAgICBzZWxmLl9oYW5kbGUuYmluZCgnbW91c2VvdXQnLCBtb3VzZW91dCkKCiAgICAgIHNlbGYuX2Rpdl9zaGVsbCA8PSBzZWxmLl9oYW5kbGUKCiAgZGVmIGdldF92YWx1ZShzZWxmKToKICAgICAgcmV0dXJuIHNlbGYuX3ZhbHVlCgogICNkZWYgc2V0X3ZhbHVlKHNlbGYsIHZhbHVlKToKICAjICAgIHNlbGYuX3ZhbHVlPXZhbHVlCiAgIyAgIHNlbGYuX2hhbmRsZS5zdHlsZS5sZWZ0PSclc3B4JyAlIHZhbHVlCg==',
'/Lib/ui/__init__.py':'ZnJvbSBicm93c2VyIGltcG9ydCBodG1sLCBkb2MgYXMgZG9jdW1lbnQKZnJvbSBkaWFsb2cgaW1wb3J0ICoKZnJvbSBwcm9ncmVzc2JhciBpbXBvcnQgKgpmcm9tIHNsaWRlciBpbXBvcnQgKgoKZGVmIGFkZF9zdHlsZXNoZWV0KCk6CiAgICBfbGluaz1odG1sLkxJTksoSHJlZj0nL3NyYy9MaWIvdWkvY3NzL3Ntb290aG5lc3MvanF1ZXJ5LXVpLTEuMTAuMy5jdXN0b20ubWluLmNzcycpCiAgICBfbGluay5yZWw9J3N0eWxlc2hlZXQnCgogICAgZG9jIDw9IF9saW5rICAgICAjIGRvY3VtZW50IGRvZXNuJ3Qgd29yayBoZXJlLi4gOiggbXVzdCB1c2UgZG9jIAo=',
'/Lib/ui/widget.py':'aW1wb3J0IHJhbmRvbQpmcm9tIGJyb3dzZXIgaW1wb3J0IGRvYwoKZGVmIGdldE1vdXNlUG9zaXRpb24oZSk6CiAgICBpZiBlIGlzIE5vbmU6CiAgICAgICBlPXdpbi5ldmVudAoKICAgIGlmIGUucGFnZVggb3IgZS5wYWdlWToKICAgICAgIHJldHVybiB7J3gnOiBlLnBhZ2VYLCAneSc6IGUucGFnZVl9CgogICAgaWYgZS5jbGllbnRYIG9yIGUuY2xpZW50WToKICAgICAgIF9wb3N4PWUuY2xpZW50WCArIGRvYy5ib2R5LnNjcm9sbExlZnQgKyBkb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7CiAgICAgICBfcG9zeT1lLmNsaWVudFkgKyBkb2MuYm9keS5zY3JvbGxUb3AgKyBkb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDsKICAgICAgIHJldHVybiB7J3gnOiBfcG9zeCwgJ3knOiBfcG9zeX0KICAgICAgCiAgICByZXR1cm4geyd4JzogMCwgJ3knOiAwfQoKY2xhc3MgV2lkZ2V0OgogIGRlZiBfX2luaXRfXyhzZWxmLCBlbGVtZW50LCB0eXBlLCBpZD1Ob25lKToKICAgICAgc2VsZi5fZWxlbWVudD1lbGVtZW50CgogICAgICBpZiBpZCBpcyBOb25lOgogICAgICAgICBzZWxmLl9lbGVtZW50LmlkPSclc18lcycgJSAodHlwZSwgaW50KDEwMDAwMCpyYW5kb20ucmFuZG9tKCkpKQogICAgICBlbHNlOgogICAgICAgICBzZWxmLl9lbGVtZW50LmlkPWlkCgogIGRlZiBnZXRfaWQoc2VsZik6CiAgICAgIHJldHVybiBzZWxmLl9lbGVtZW50LmlkCgogIGRlZiBhdHRhY2goc2VsZiwgZWxlbWVudF9pZCk6CiAgICAgICIiIiBhcHBlbmQgdGhpcyBET00gY29tcG9uZW50IHRvIERPTSBlbGVtZW50IGVsZW1lbnRfaWQiIiIKICAgICAgI2RvY3VtZW50W2VsZW1lbnRfaWRdIDw9IHNlbGYuX2VsZW1lbnQgICAjdGhpcyBkb2Vzbid0IHdvcmsgOigKICAgICAgI2RvYyBpcyBhY3R1YWxseSB0aGUgZ2xvYmFsICdkb2MnIG5vdCB0aGUgb25lIHdlIGltcG9ydGVkIGZyb20gYnJvd3NlciA6KAogICAgICBkb2NbZWxlbWVudF9pZF0gPD0gc2VsZi5fZWxlbWVudAoKICBkZWYgc2hvdyhzZWxmKToKICAgICAgc2VsZi5fZWxlbWVudC5kaXNwbGF5PSdibG9jaycKCiAgZGVmIGhpZGUoc2VsZik6CiAgICAgIHNlbGYuX2VsZW1lbnQuZGlzcGxheT0nbm9uZScKCmNsYXNzIERyYWdnYWJsZVdpZGdldChXaWRnZXQpOgogIGRlZiBfX2luaXRfXyhzZWxmLCBlbGVtZW50LCB0eXBlLCBpZD1Ob25lKToKICAgICAgV2lkZ2V0Ll9faW5pdF9fKHNlbGYsIGVsZW1lbnQsIHR5cGUsIGlkKQoKICAgICAgZGVmIGRyYWcoZSk6CiAgICAgICAgICBzZWxmLl9lbGVtZW50LnN0eWxlLnRvcD0nJXNweCcgJSAoZS5jbGllbnRZIC0gc2VsZi5fZGVsdGFZKQogICAgICAgICAgc2VsZi5fZWxlbWVudC5zdHlsZS5sZWZ0PSclc3B4JyAlIChlLmNsaWVudFggLSBzZWxmLl9kZWx0YVgpCgogICAgICBkZWYgbW91c2VEb3duKGUpOgogICAgICAgICAgc2VsZi5fZWxlbWVudC5zdHlsZS5wb3NpdGlvbj0nYWJzb2x1dGUnCiAgICAgICAgICBzZWxmLl9kZWx0YVg9ZS5jbGllbnRYIC0gc2VsZi5fZWxlbWVudC5vZmZzZXRMZWZ0CiAgICAgICAgICBzZWxmLl9kZWx0YVk9ZS5jbGllbnRZIC0gc2VsZi5fZWxlbWVudC5vZmZzZXRUb3AKICAgICAgICAgIGRvYy5iaW5kKCdtb3VzZW1vdmUnLCBkcmFnKQoKICAgICAgZGVmIG1vdXNlVXAoZSk6CiAgICAgICAgICBkb2MudW5iaW5kKCdtb3VzZW1vdmUnKQoKICAgICAgc2VsZi5fZWxlbWVudC5iaW5kKCdtb3VzZWRvd24nLCBtb3VzZURvd24pCiAgICAgIHNlbGYuX2VsZW1lbnQuYmluZCgnbW91c2V1cCcsIG1vdXNlVXApCg==',
'/Lib/ui/dialog.py':'aW1wb3J0IHdpZGdldApmcm9tIGJyb3dzZXIgaW1wb3J0IGh0bWwsIGRvYwoKY2xhc3MgRGlhbG9nKHdpZGdldC5EcmFnZ2FibGVXaWRnZXQpOgogIGRlZiBfX2luaXRfXyhzZWxmLCBpZD1Ob25lKToKICAgICAgc2VsZi5fZGl2X3NoZWxsPWh0bWwuRElWKAogICAgICAgICBDbGFzcz0idWktZGlhbG9nIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLWZyb250IHVpLWRyYWdnYWJsZSB1aS1yZXNpemFibGUiLAogICAgICAgICBzdHlsZT17J3Bvc2l0aW9uJzogJ2Fic29sdXRlJywgJ2hlaWdodCc6ICdhdXRvJywgJ3dpZHRoJzogJzMwMHB4JywKICAgICAgICAgICAgICAgICd0b3AnOiAnOThweCcsICdsZWZ0JzogJzE0MHB4JywgJ2Rpc3BsYXknOiAnYmxvY2snfSkKCiAgICAgIHdpZGdldC5EcmFnZ2FibGVXaWRnZXQuX19pbml0X18oc2VsZiwgc2VsZi5fZGl2X3NoZWxsLCAnZGlhbG9nJywgaWQpCgogICAgICBfZGl2X3RpdGxlYmFyPWh0bWwuRElWKElkPSJ0aXRsZWJhciIsCiAgICAgICAgICAgQ2xhc3M9InVpLWRpYWxvZy10aXRsZWJhciB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwgdWktaGVscGVyLWNsZWFyZml4IikKICAgICAgc2VsZi5fZGl2X3NoZWxsIDw9IF9kaXZfdGl0bGViYXIKCiAgICAgIHNlbGYuX2Rpdl90aXRsZT1odG1sLlNQQU4oSWQ9InRpdGxlIiwgQ2xhc3M9InVpLWRpYWxvZy10aXRsZSIpCiAgICAgICAgCiAgICAgIF9kaXZfdGl0bGViYXIgPD0gc2VsZi5fZGl2X3RpdGxlCgogICAgICBzZWxmLl90aXRsZV9idXR0b249aHRtbC5CVVRUT04oVGl0bGU9ImNsb3NlIiwKICAgICAgICAgICAgQ2xhc3M9InVpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIHVpLWJ1dHRvbi1pY29uLW9ubHkgdWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIikKCiAgICAgIGRlZiBkaWFsb2dfY2xvc2UoZSk6CiAgICAgICAgICAjZGVsIGRvY3VtZW50W3NlbGYuX2Rpdl9zaGVsbC5pZF0KICAgICAgICAgIGRlbCBkb2Nbc2VsZi5fZGl2X3NoZWxsLmlkXQoKICAgICAgc2VsZi5fdGl0bGVfYnV0dG9uLmJpbmQoJ2NsaWNrJywgZGlhbG9nX2Nsb3NlKQogICAgICBfc3Bhbj1odG1sLlNQQU4oQ2xhc3M9InVpLWJ1dHRvbi1pY29uLXByaW1hcnkgdWktaWNvbiB1aS1pY29uLWNsb3NldGhpY2siKQogICAgICBzZWxmLl90aXRsZV9idXR0b24gPD0gX3NwYW4KCiAgICAgIF9zcGFuPWh0bWwuU1BBTignY2xvc2UnLCBDbGFzcz0idWktYnV0dG9uLXRleHQiKQogICAgICBzZWxmLl90aXRsZV9idXR0b24gPD0gX3NwYW4KCiAgICAgIF9kaXZfdGl0bGViYXIgPD0gc2VsZi5fdGl0bGVfYnV0dG9uCgogICAgICBzZWxmLl9kaXZfZGlhbG9nPWh0bWwuRElWKENsYXNzPSJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudCIsCiAgICAgICAgICAgc3R5bGU9eyd3aWR0aCc6ICdhdXRvJywgJ21pbi1oZWlnaHQnOiAnMTA1cHgnLCAKICAgICAgICAgICAgICAgICAgJ21heC1oZWlnaHQnOiAnbm9uZScsICdoZWlnaHQnOiAnYXV0byd9KQoKICAgICAgc2VsZi5fZGl2X3NoZWxsIDw9IHNlbGYuX2Rpdl9kaWFsb2cKCiAgICAgIGZvciBfaSBpbiBbJ24nLCAnZScsICdzJywgJ3cnLCAnc2UnLCAnc3cnLCAnbmUnLCAnbncnXToKICAgICAgICAgIGlmIF9pID09ICdzZSc6CiAgICAgICAgICAgICBfY2xhc3M9InVpLXJlc2l6YWJsZS1oYW5kbGUgdWktcmVzaXphYmxlLSVzIHVpLWljb24gdWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtJXMiICUgKF9pLCBfaSkKICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICBfY2xhc3M9InVpLXJlc2l6YWJsZS1oYW5kbGUgdWktcmVzaXphYmxlLSVzIiAlIF9pCgogICAgICAgICAgc2VsZi5fZGl2X3NoZWxsIDw9IGh0bWwuRElWKENsYXNzPV9jbGFzcywgc3R5bGU9eyd6LWluZGV4JzogJzkwJ30pCgogICAgICBkb2MgPD0gc2VsZi5fZGl2X3NoZWxsCgogIGRlZiBzZXRfdGl0bGUoc2VsZiwgdGl0bGUpOgogICAgICBzZWxmLl9kaXZfdGl0bGUuc2V0X3RleHQodGl0bGUpCgogIGRlZiBzZXRfYm9keShzZWxmLCBib2R5KToKICAgICAgc2VsZi5fZGl2X2RpYWxvZy5zZXRfaHRtbChib2R5KQo=',
'/Lib/http/cookies.py':'CiMKCiMjIyMKIyBDb3B5cmlnaHQgMjAwMCBieSBUaW1vdGh5IE8nTWFsbGV5IDx0aW1vQGFsdW0ubWl0LmVkdT4KIwojICAgICAgICAgICAgICAgIEFsbCBSaWdodHMgUmVzZXJ2ZWQKIwojIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZCBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUKIyBhbmQgaXRzIGRvY3VtZW50YXRpb24gZm9yIGFueSBwdXJwb3NlIGFuZCB3aXRob3V0IGZlZSBpcyBoZXJlYnkKIyBncmFudGVkLCBwcm92aWRlZCB0aGF0IHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFwcGVhciBpbiBhbGwKIyBjb3BpZXMgYW5kIHRoYXQgYm90aCB0aGF0IGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbgojIG5vdGljZSBhcHBlYXIgaW4gc3VwcG9ydGluZyBkb2N1bWVudGF0aW9uLCBhbmQgdGhhdCB0aGUgbmFtZSBvZgojIFRpbW90aHkgTydNYWxsZXkgIG5vdCBiZSB1c2VkIGluIGFkdmVydGlzaW5nIG9yIHB1YmxpY2l0eQojIHBlcnRhaW5pbmcgdG8gZGlzdHJpYnV0aW9uIG9mIHRoZSBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljLCB3cml0dGVuCiMgcHJpb3IgcGVybWlzc2lvbi4KIwojIFRpbW90aHkgTydNYWxsZXkgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEggUkVHQVJEIFRPIFRISVMKIyBTT0ZUV0FSRSwgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZCiMgQU5EIEZJVE5FU1MsIElOIE5PIEVWRU5UIFNIQUxMIFRpbW90aHkgTydNYWxsZXkgQkUgTElBQkxFIEZPUgojIEFOWSBTUEVDSUFMLCBJTkRJUkVDVCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMKIyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsCiMgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1IgT1RIRVIgVE9SVElPVVMKIyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SCiMgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KIwojIyMjCiMKIyBJZDogQ29va2llLnB5LHYgMi4yOSAyMDAwLzA4LzIzIDA1OjI4OjQ5IHRpbW8gRXhwCiMgICBieSBUaW1vdGh5IE8nTWFsbGV5IDx0aW1vQGFsdW0ubWl0LmVkdT4KIwojICBDb29raWUucHkgaXMgYSBQeXRob24gbW9kdWxlIGZvciB0aGUgaGFuZGxpbmcgb2YgSFRUUAojICBjb29raWVzIGFzIGEgUHl0aG9uIGRpY3Rpb25hcnkuICBTZWUgUkZDIDIxMDkgZm9yIG1vcmUKIyAgaW5mb3JtYXRpb24gb24gY29va2llcy4KIwojICBUaGUgb3JpZ2luYWwgaWRlYSB0byB0cmVhdCBDb29raWVzIGFzIGEgZGljdGlvbmFyeSBjYW1lIGZyb20KIyAgRGF2ZSBNaXRjaGVsbCAoZGF2ZW1AbWFnbmV0LmNvbSkgaW4gMTk5NSwgd2hlbiBoZSByZWxlYXNlZCB0aGUKIyAgZmlyc3QgdmVyc2lvbiBvZiBuc2Nvb2tpZS5weS4KIwojIyMjCgpyIiIiCkhlcmUncyBhIHNhbXBsZSBzZXNzaW9uIHRvIHNob3cgaG93IHRvIHVzZSB0aGlzIG1vZHVsZS4KQXQgdGhlIG1vbWVudCwgdGhpcyBpcyB0aGUgb25seSBkb2N1bWVudGF0aW9uLgoKVGhlIEJhc2ljcwotLS0tLS0tLS0tCgpJbXBvcnRpbmcgaXMgZWFzeS4uLgoKICAgPj4+IGZyb20gaHR0cCBpbXBvcnQgY29va2llcwoKTW9zdCBvZiB0aGUgdGltZSB5b3Ugc3RhcnQgYnkgY3JlYXRpbmcgYSBjb29raWUuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKCk9uY2UgeW91J3ZlIGNyZWF0ZWQgeW91ciBDb29raWUsIHlvdSBjYW4gYWRkIHZhbHVlcyBqdXN0IGFzIGlmIGl0IHdlcmUKYSBkaWN0aW9uYXJ5LgoKICAgPj4+IEMgPSBjb29raWVzLlNpbXBsZUNvb2tpZSgpCiAgID4+PiBDWyJmaWciXSA9ICJuZXd0b24iCiAgID4+PiBDWyJzdWdhciJdID0gIndhZmVyIgogICA+Pj4gQy5vdXRwdXQoKQogICAnU2V0LUNvb2tpZTogZmlnPW5ld3RvblxyXG5TZXQtQ29va2llOiBzdWdhcj13YWZlcicKCk5vdGljZSB0aGF0IHRoZSBwcmludGFibGUgcmVwcmVzZW50YXRpb24gb2YgYSBDb29raWUgaXMgdGhlCmFwcHJvcHJpYXRlIGZvcm1hdCBmb3IgYSBTZXQtQ29va2llOiBoZWFkZXIuICBUaGlzIGlzIHRoZQpkZWZhdWx0IGJlaGF2aW9yLiAgWW91IGNhbiBjaGFuZ2UgdGhlIGhlYWRlciBhbmQgcHJpbnRlZAphdHRyaWJ1dGVzIGJ5IHVzaW5nIHRoZSAub3V0cHV0KCkgZnVuY3Rpb24KCiAgID4+PiBDID0gY29va2llcy5TaW1wbGVDb29raWUoKQogICA+Pj4gQ1sicm9ja3kiXSA9ICJyb2FkIgogICA+Pj4gQ1sicm9ja3kiXVsicGF0aCJdID0gIi9jb29raWUiCiAgID4+PiBwcmludChDLm91dHB1dChoZWFkZXI9IkNvb2tpZToiKSkKICAgQ29va2llOiByb2NreT1yb2FkOyBQYXRoPS9jb29raWUKICAgPj4+IHByaW50KEMub3V0cHV0KGF0dHJzPVtdLCBoZWFkZXI9IkNvb2tpZToiKSkKICAgQ29va2llOiByb2NreT1yb2FkCgpUaGUgbG9hZCgpIG1ldGhvZCBvZiBhIENvb2tpZSBleHRyYWN0cyBjb29raWVzIGZyb20gYSBzdHJpbmcuICBJbiBhCkNHSSBzY3JpcHQsIHlvdSB3b3VsZCB1c2UgdGhpcyBtZXRob2QgdG8gZXh0cmFjdCB0aGUgY29va2llcyBmcm9tIHRoZQpIVFRQX0NPT0tJRSBlbnZpcm9ubWVudCB2YXJpYWJsZS4KCiAgID4+PiBDID0gY29va2llcy5TaW1wbGVDb29raWUoKQogICA+Pj4gQy5sb2FkKCJjaGlwcz1haG95OyB2aWVubmE9ZmluZ2VyIikKICAgPj4+IEMub3V0cHV0KCkKICAgJ1NldC1Db29raWU6IGNoaXBzPWFob3lcclxuU2V0LUNvb2tpZTogdmllbm5hPWZpbmdlcicKClRoZSBsb2FkKCkgbWV0aG9kIGlzIGRhcm4tdG9vdGluIHNtYXJ0IGFib3V0IGlkZW50aWZ5aW5nIGNvb2tpZXMKd2l0aGluIGEgc3RyaW5nLiAgRXNjYXBlZCBxdW90YXRpb24gbWFya3MsIG5lc3RlZCBzZW1pY29sb25zLCBhbmQgb3RoZXIKc3VjaCB0cmlja2VyaWVzIGRvIG5vdCBjb25mdXNlIGl0LgoKICAgPj4+IEMgPSBjb29raWVzLlNpbXBsZUNvb2tpZSgpCiAgID4+PiBDLmxvYWQoJ2tlZWJsZXI9IkU9ZXZlcnlib2R5OyBMPVxcIkxvdmVzXFwiOyBmdWRnZT1cXDAxMjsiOycpCiAgID4+PiBwcmludChDKQogICBTZXQtQ29va2llOiBrZWVibGVyPSJFPWV2ZXJ5Ym9keTsgTD1cIkxvdmVzXCI7IGZ1ZGdlPVwwMTI7IgoKRWFjaCBlbGVtZW50IG9mIHRoZSBDb29raWUgYWxzbyBzdXBwb3J0cyBhbGwgb2YgdGhlIFJGQyAyMTA5CkNvb2tpZSBhdHRyaWJ1dGVzLiAgSGVyZSdzIGFuIGV4YW1wbGUgd2hpY2ggc2V0cyB0aGUgUGF0aAphdHRyaWJ1dGUuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKICAgPj4+IENbIm9yZW8iXSA9ICJkb3VibGVzdHVmZiIKICAgPj4+IENbIm9yZW8iXVsicGF0aCJdID0gIi8iCiAgID4+PiBwcmludChDKQogICBTZXQtQ29va2llOiBvcmVvPWRvdWJsZXN0dWZmOyBQYXRoPS8KCkVhY2ggZGljdGlvbmFyeSBlbGVtZW50IGhhcyBhICd2YWx1ZScgYXR0cmlidXRlLCB3aGljaCBnaXZlcyB5b3UKYmFjayB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKICAgPj4+IENbInR3aXgiXSA9ICJub25lIGZvciB5b3UiCiAgID4+PiBDWyJ0d2l4Il0udmFsdWUKICAgJ25vbmUgZm9yIHlvdScKClRoZSBTaW1wbGVDb29raWUgZXhwZWN0cyB0aGF0IGFsbCB2YWx1ZXMgc2hvdWxkIGJlIHN0YW5kYXJkIHN0cmluZ3MuCkp1c3QgdG8gYmUgc3VyZSwgU2ltcGxlQ29va2llIGludm9rZXMgdGhlIHN0cigpIGJ1aWx0aW4gdG8gY29udmVydAp0aGUgdmFsdWUgdG8gYSBzdHJpbmcsIHdoZW4gdGhlIHZhbHVlcyBhcmUgc2V0IGRpY3Rpb25hcnktc3R5bGUuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKICAgPj4+IENbIm51bWJlciJdID0gNwogICA+Pj4gQ1sic3RyaW5nIl0gPSAic2V2ZW4iCiAgID4+PiBDWyJudW1iZXIiXS52YWx1ZQogICAnNycKICAgPj4+IENbInN0cmluZyJdLnZhbHVlCiAgICdzZXZlbicKICAgPj4+IEMub3V0cHV0KCkKICAgJ1NldC1Db29raWU6IG51bWJlcj03XHJcblNldC1Db29raWU6IHN0cmluZz1zZXZlbicKCkZpbmlzLgoiIiIKCiMKIyBJbXBvcnQgb3VyIHJlcXVpcmVkIG1vZHVsZXMKIwppbXBvcnQgcmUKaW1wb3J0IHN0cmluZwoKX19hbGxfXyA9IFsiQ29va2llRXJyb3IiLCAiQmFzZUNvb2tpZSIsICJTaW1wbGVDb29raWUiXQoKX251bGxqb2luID0gJycuam9pbgpfc2VtaXNwYWNlam9pbiA9ICc7ICcuam9pbgpfc3BhY2Vqb2luID0gJyAnLmpvaW4KCiMKIyBEZWZpbmUgYW4gZXhjZXB0aW9uIHZpc2libGUgdG8gRXh0ZXJuYWwgbW9kdWxlcwojCmNsYXNzIENvb2tpZUVycm9yKEV4Y2VwdGlvbik6CiAgICBwYXNzCgoKIyBUaGVzZSBxdW90aW5nIHJvdXRpbmVzIGNvbmZvcm0gdG8gdGhlIFJGQzIxMDkgc3BlY2lmaWNhdGlvbiwgd2hpY2ggaW4KIyB0dXJuIHJlZmVyZW5jZXMgdGhlIGNoYXJhY3RlciBkZWZpbml0aW9ucyBmcm9tIFJGQzIwNjguICBUaGV5IHByb3ZpZGUKIyBhIHR3by13YXkgcXVvdGluZyBhbGdvcml0aG0uICBBbnkgbm9uLXRleHQgY2hhcmFjdGVyIGlzIHRyYW5zbGF0ZWQKIyBpbnRvIGEgNCBjaGFyYWN0ZXIgc2VxdWVuY2U6IGEgZm9yd2FyZC1zbGFzaCBmb2xsb3dlZCBieSB0aGUKIyB0aHJlZS1kaWdpdCBvY3RhbCBlcXVpdmFsZW50IG9mIHRoZSBjaGFyYWN0ZXIuICBBbnkgJ1wnIG9yICciJyBpcwojIHF1b3RlZCB3aXRoIGEgcHJlY2VlZGluZyAnXCcgc2xhc2guCiMKIyBUaGVzZSBhcmUgdGFrZW4gZnJvbSBSRkMyMDY4IGFuZCBSRkMyMTA5LgojICAgICAgIF9MZWdhbENoYXJzICAgICAgIGlzIHRoZSBsaXN0IG9mIGNoYXJzIHdoaWNoIGRvbid0IHJlcXVpcmUgIidzCiMgICAgICAgX1RyYW5zbGF0b3IgICAgICAgaGFzaC10YWJsZSBmb3IgZmFzdCBxdW90aW5nCiMKX0xlZ2FsQ2hhcnMgICAgICAgPSBzdHJpbmcuYXNjaWlfbGV0dGVycyArIHN0cmluZy5kaWdpdHMgKyAiISMkJSYnKistLl5fYHx+OiIKX1RyYW5zbGF0b3IgICAgICAgPSB7CiAgICAnXDAwMCcgOiAnXFwwMDAnLCAgJ1wwMDEnIDogJ1xcMDAxJywgICdcMDAyJyA6ICdcXDAwMicsCiAgICAnXDAwMycgOiAnXFwwMDMnLCAgJ1wwMDQnIDogJ1xcMDA0JywgICdcMDA1JyA6ICdcXDAwNScsCiAgICAnXDAwNicgOiAnXFwwMDYnLCAgJ1wwMDcnIDogJ1xcMDA3JywgICdcMDEwJyA6ICdcXDAxMCcsCiAgICAnXDAxMScgOiAnXFwwMTEnLCAgJ1wwMTInIDogJ1xcMDEyJywgICdcMDEzJyA6ICdcXDAxMycsCiAgICAnXDAxNCcgOiAnXFwwMTQnLCAgJ1wwMTUnIDogJ1xcMDE1JywgICdcMDE2JyA6ICdcXDAxNicsCiAgICAnXDAxNycgOiAnXFwwMTcnLCAgJ1wwMjAnIDogJ1xcMDIwJywgICdcMDIxJyA6ICdcXDAyMScsCiAgICAnXDAyMicgOiAnXFwwMjInLCAgJ1wwMjMnIDogJ1xcMDIzJywgICdcMDI0JyA6ICdcXDAyNCcsCiAgICAnXDAyNScgOiAnXFwwMjUnLCAgJ1wwMjYnIDogJ1xcMDI2JywgICdcMDI3JyA6ICdcXDAyNycsCiAgICAnXDAzMCcgOiAnXFwwMzAnLCAgJ1wwMzEnIDogJ1xcMDMxJywgICdcMDMyJyA6ICdcXDAzMicsCiAgICAnXDAzMycgOiAnXFwwMzMnLCAgJ1wwMzQnIDogJ1xcMDM0JywgICdcMDM1JyA6ICdcXDAzNScsCiAgICAnXDAzNicgOiAnXFwwMzYnLCAgJ1wwMzcnIDogJ1xcMDM3JywKCiAgICAjIEJlY2F1c2Ugb2YgdGhlIHdheSBicm93c2VycyByZWFsbHkgaGFuZGxlIGNvb2tpZXMgKGFzIG9wcG9zZWQKICAgICMgdG8gd2hhdCB0aGUgUkZDIHNheXMpIHdlIGFsc28gZW5jb2RlICwgYW5kIDsKCiAgICAnLCcgOiAnXFwwNTQnLCAnOycgOiAnXFwwNzMnLAoKICAgICciJyA6ICdcXCInLCAgICAgICAnXFwnIDogJ1xcXFwnLAoKICAgICdcMTc3JyA6ICdcXDE3NycsICAnXDIwMCcgOiAnXFwyMDAnLCAgJ1wyMDEnIDogJ1xcMjAxJywKICAgICdcMjAyJyA6ICdcXDIwMicsICAnXDIwMycgOiAnXFwyMDMnLCAgJ1wyMDQnIDogJ1xcMjA0JywKICAgICdcMjA1JyA6ICdcXDIwNScsICAnXDIwNicgOiAnXFwyMDYnLCAgJ1wyMDcnIDogJ1xcMjA3JywKICAgICdcMjEwJyA6ICdcXDIxMCcsICAnXDIxMScgOiAnXFwyMTEnLCAgJ1wyMTInIDogJ1xcMjEyJywKICAgICdcMjEzJyA6ICdcXDIxMycsICAnXDIxNCcgOiAnXFwyMTQnLCAgJ1wyMTUnIDogJ1xcMjE1JywKICAgICdcMjE2JyA6ICdcXDIxNicsICAnXDIxNycgOiAnXFwyMTcnLCAgJ1wyMjAnIDogJ1xcMjIwJywKICAgICdcMjIxJyA6ICdcXDIyMScsICAnXDIyMicgOiAnXFwyMjInLCAgJ1wyMjMnIDogJ1xcMjIzJywKICAgICdcMjI0JyA6ICdcXDIyNCcsICAnXDIyNScgOiAnXFwyMjUnLCAgJ1wyMjYnIDogJ1xcMjI2JywKICAgICdcMjI3JyA6ICdcXDIyNycsICAnXDIzMCcgOiAnXFwyMzAnLCAgJ1wyMzEnIDogJ1xcMjMxJywKICAgICdcMjMyJyA6ICdcXDIzMicsICAnXDIzMycgOiAnXFwyMzMnLCAgJ1wyMzQnIDogJ1xcMjM0JywKICAgICdcMjM1JyA6ICdcXDIzNScsICAnXDIzNicgOiAnXFwyMzYnLCAgJ1wyMzcnIDogJ1xcMjM3JywKICAgICdcMjQwJyA6ICdcXDI0MCcsICAnXDI0MScgOiAnXFwyNDEnLCAgJ1wyNDInIDogJ1xcMjQyJywKICAgICdcMjQzJyA6ICdcXDI0MycsICAnXDI0NCcgOiAnXFwyNDQnLCAgJ1wyNDUnIDogJ1xcMjQ1JywKICAgICdcMjQ2JyA6ICdcXDI0NicsICAnXDI0NycgOiAnXFwyNDcnLCAgJ1wyNTAnIDogJ1xcMjUwJywKICAgICdcMjUxJyA6ICdcXDI1MScsICAnXDI1MicgOiAnXFwyNTInLCAgJ1wyNTMnIDogJ1xcMjUzJywKICAgICdcMjU0JyA6ICdcXDI1NCcsICAnXDI1NScgOiAnXFwyNTUnLCAgJ1wyNTYnIDogJ1xcMjU2JywKICAgICdcMjU3JyA6ICdcXDI1NycsICAnXDI2MCcgOiAnXFwyNjAnLCAgJ1wyNjEnIDogJ1xcMjYxJywKICAgICdcMjYyJyA6ICdcXDI2MicsICAnXDI2MycgOiAnXFwyNjMnLCAgJ1wyNjQnIDogJ1xcMjY0JywKICAgICdcMjY1JyA6ICdcXDI2NScsICAnXDI2NicgOiAnXFwyNjYnLCAgJ1wyNjcnIDogJ1xcMjY3JywKICAgICdcMjcwJyA6ICdcXDI3MCcsICAnXDI3MScgOiAnXFwyNzEnLCAgJ1wyNzInIDogJ1xcMjcyJywKICAgICdcMjczJyA6ICdcXDI3MycsICAnXDI3NCcgOiAnXFwyNzQnLCAgJ1wyNzUnIDogJ1xcMjc1JywKICAgICdcMjc2JyA6ICdcXDI3NicsICAnXDI3NycgOiAnXFwyNzcnLCAgJ1wzMDAnIDogJ1xcMzAwJywKICAgICdcMzAxJyA6ICdcXDMwMScsICAnXDMwMicgOiAnXFwzMDInLCAgJ1wzMDMnIDogJ1xcMzAzJywKICAgICdcMzA0JyA6ICdcXDMwNCcsICAnXDMwNScgOiAnXFwzMDUnLCAgJ1wzMDYnIDogJ1xcMzA2JywKICAgICdcMzA3JyA6ICdcXDMwNycsICAnXDMxMCcgOiAnXFwzMTAnLCAgJ1wzMTEnIDogJ1xcMzExJywKICAgICdcMzEyJyA6ICdcXDMxMicsICAnXDMxMycgOiAnXFwzMTMnLCAgJ1wzMTQnIDogJ1xcMzE0JywKICAgICdcMzE1JyA6ICdcXDMxNScsICAnXDMxNicgOiAnXFwzMTYnLCAgJ1wzMTcnIDogJ1xcMzE3JywKICAgICdcMzIwJyA6ICdcXDMyMCcsICAnXDMyMScgOiAnXFwzMjEnLCAgJ1wzMjInIDogJ1xcMzIyJywKICAgICdcMzIzJyA6ICdcXDMyMycsICAnXDMyNCcgOiAnXFwzMjQnLCAgJ1wzMjUnIDogJ1xcMzI1JywKICAgICdcMzI2JyA6ICdcXDMyNicsICAnXDMyNycgOiAnXFwzMjcnLCAgJ1wzMzAnIDogJ1xcMzMwJywKICAgICdcMzMxJyA6ICdcXDMzMScsICAnXDMzMicgOiAnXFwzMzInLCAgJ1wzMzMnIDogJ1xcMzMzJywKICAgICdcMzM0JyA6ICdcXDMzNCcsICAnXDMzNScgOiAnXFwzMzUnLCAgJ1wzMzYnIDogJ1xcMzM2JywKICAgICdcMzM3JyA6ICdcXDMzNycsICAnXDM0MCcgOiAnXFwzNDAnLCAgJ1wzNDEnIDogJ1xcMzQxJywKICAgICdcMzQyJyA6ICdcXDM0MicsICAnXDM0MycgOiAnXFwzNDMnLCAgJ1wzNDQnIDogJ1xcMzQ0JywKICAgICdcMzQ1JyA6ICdcXDM0NScsICAnXDM0NicgOiAnXFwzNDYnLCAgJ1wzNDcnIDogJ1xcMzQ3JywKICAgICdcMzUwJyA6ICdcXDM1MCcsICAnXDM1MScgOiAnXFwzNTEnLCAgJ1wzNTInIDogJ1xcMzUyJywKICAgICdcMzUzJyA6ICdcXDM1MycsICAnXDM1NCcgOiAnXFwzNTQnLCAgJ1wzNTUnIDogJ1xcMzU1JywKICAgICdcMzU2JyA6ICdcXDM1NicsICAnXDM1NycgOiAnXFwzNTcnLCAgJ1wzNjAnIDogJ1xcMzYwJywKICAgICdcMzYxJyA6ICdcXDM2MScsICAnXDM2MicgOiAnXFwzNjInLCAgJ1wzNjMnIDogJ1xcMzYzJywKICAgICdcMzY0JyA6ICdcXDM2NCcsICAnXDM2NScgOiAnXFwzNjUnLCAgJ1wzNjYnIDogJ1xcMzY2JywKICAgICdcMzY3JyA6ICdcXDM2NycsICAnXDM3MCcgOiAnXFwzNzAnLCAgJ1wzNzEnIDogJ1xcMzcxJywKICAgICdcMzcyJyA6ICdcXDM3MicsICAnXDM3MycgOiAnXFwzNzMnLCAgJ1wzNzQnIDogJ1xcMzc0JywKICAgICdcMzc1JyA6ICdcXDM3NScsICAnXDM3NicgOiAnXFwzNzYnLCAgJ1wzNzcnIDogJ1xcMzc3JwogICAgfQoKZGVmIF9xdW90ZShzdHIsIExlZ2FsQ2hhcnM9X0xlZ2FsQ2hhcnMpOgogICAgciIiIlF1b3RlIGEgc3RyaW5nIGZvciB1c2UgaW4gYSBjb29raWUgaGVhZGVyLgoKICAgIElmIHRoZSBzdHJpbmcgZG9lcyBub3QgbmVlZCB0byBiZSBkb3VibGUtcXVvdGVkLCB0aGVuIGp1c3QgcmV0dXJuIHRoZQogICAgc3RyaW5nLiAgT3RoZXJ3aXNlLCBzdXJyb3VuZCB0aGUgc3RyaW5nIGluIGRvdWJsZXF1b3RlcyBhbmQgcXVvdGUKICAgICh3aXRoIGEgXCkgc3BlY2lhbCBjaGFyYWN0ZXJzLgogICAgIiIiCiAgICBpZiBhbGwoYyBpbiBMZWdhbENoYXJzIGZvciBjIGluIHN0cik6CiAgICAgICAgcmV0dXJuIHN0cgogICAgZWxzZToKICAgICAgICByZXR1cm4gJyInICsgX251bGxqb2luKF9UcmFuc2xhdG9yLmdldChzLCBzKSBmb3IgcyBpbiBzdHIpICsgJyInCgoKX09jdGFsUGF0dCA9IHJlLmNvbXBpbGUociJcXFswLTNdWzAtN11bMC03XSIpCl9RdW90ZVBhdHQgPSByZS5jb21waWxlKHIiW1xcXS4iKQoKZGVmIF91bnF1b3RlKHN0cik6CiAgICAjIElmIHRoZXJlIGFyZW4ndCBhbnkgZG91YmxlcXVvdGVzLAogICAgIyB0aGVuIHRoZXJlIGNhbid0IGJlIGFueSBzcGVjaWFsIGNoYXJhY3RlcnMuICBTZWUgUkZDIDIxMDkuCiAgICBpZiBsZW4oc3RyKSA8IDI6CiAgICAgICAgcmV0dXJuIHN0cgogICAgaWYgc3RyWzBdICE9ICciJyBvciBzdHJbLTFdICE9ICciJzoKICAgICAgICByZXR1cm4gc3RyCgogICAgIyBXZSBoYXZlIHRvIGFzc3VtZSB0aGF0IHdlIG11c3QgZGVjb2RlIHRoaXMgc3RyaW5nLgogICAgIyBEb3duIHRvIHdvcmsuCgogICAgIyBSZW1vdmUgdGhlICJzCiAgICBzdHIgPSBzdHJbMTotMV0KCiAgICAjIENoZWNrIGZvciBzcGVjaWFsIHNlcXVlbmNlcy4gIEV4YW1wbGVzOgogICAgIyAgICBcMDEyIC0tPiBcbgogICAgIyAgICBcIiAgIC0tPiAiCiAgICAjCiAgICBpID0gMAogICAgbiA9IGxlbihzdHIpCiAgICByZXMgPSBbXQogICAgd2hpbGUgMCA8PSBpIDwgbjoKICAgICAgICBvX21hdGNoID0gX09jdGFsUGF0dC5zZWFyY2goc3RyLCBpKQogICAgICAgIHFfbWF0Y2ggPSBfUXVvdGVQYXR0LnNlYXJjaChzdHIsIGkpCiAgICAgICAgaWYgbm90IG9fbWF0Y2ggYW5kIG5vdCBxX21hdGNoOiAgICAgICAgICAgICAgIyBOZWl0aGVyIG1hdGNoZWQKICAgICAgICAgICAgcmVzLmFwcGVuZChzdHJbaTpdKQogICAgICAgICAgICBicmVhawogICAgICAgICMgZWxzZToKICAgICAgICBqID0gayA9IC0xCiAgICAgICAgaWYgb19tYXRjaDoKICAgICAgICAgICAgaiA9IG9fbWF0Y2guc3RhcnQoMCkKICAgICAgICBpZiBxX21hdGNoOgogICAgICAgICAgICBrID0gcV9tYXRjaC5zdGFydCgwKQogICAgICAgIGlmIHFfbWF0Y2ggYW5kIChub3Qgb19tYXRjaCBvciBrIDwgaik6ICAgICAjIFF1b3RlUGF0dCBtYXRjaGVkCiAgICAgICAgICAgIHJlcy5hcHBlbmQoc3RyW2k6a10pCiAgICAgICAgICAgIHJlcy5hcHBlbmQoc3RyW2srMV0pCiAgICAgICAgICAgIGkgPSBrICsgMgogICAgICAgIGVsc2U6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIE9jdGFsUGF0dCBtYXRjaGVkCiAgICAgICAgICAgIHJlcy5hcHBlbmQoc3RyW2k6al0pCiAgICAgICAgICAgIHJlcy5hcHBlbmQoY2hyKGludChzdHJbaisxOmorNF0sIDgpKSkKICAgICAgICAgICAgaSA9IGogKyA0CiAgICByZXR1cm4gX251bGxqb2luKHJlcykKCiMgVGhlIF9nZXRkYXRlKCkgcm91dGluZSBpcyB1c2VkIHRvIHNldCB0aGUgZXhwaXJhdGlvbiB0aW1lIGluIHRoZSBjb29raWUncyBIVFRQCiMgaGVhZGVyLiAgQnkgZGVmYXVsdCwgX2dldGRhdGUoKSByZXR1cm5zIHRoZSBjdXJyZW50IHRpbWUgaW4gdGhlIGFwcHJvcHJpYXRlCiMgImV4cGlyZXMiIGZvcm1hdCBmb3IgYSBTZXQtQ29va2llIGhlYWRlci4gIFRoZSBvbmUgb3B0aW9uYWwgYXJndW1lbnQgaXMgYW4KIyBvZmZzZXQgZnJvbSBub3csIGluIHNlY29uZHMuICBGb3IgZXhhbXBsZSwgYW4gb2Zmc2V0IG9mIC0zNjAwIG1lYW5zICJvbmUgaG91cgojIGFnbyIuICBUaGUgb2Zmc2V0IG1heSBiZSBhIGZsb2F0aW5nIHBvaW50IG51bWJlci4KIwoKX3dlZWtkYXluYW1lID0gWydNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCcsICdTdW4nXQoKX21vbnRobmFtZSA9IFtOb25lLAogICAgICAgICAgICAgICdKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsCiAgICAgICAgICAgICAgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ10KCmRlZiBfZ2V0ZGF0ZShmdXR1cmU9MCwgd2Vla2RheW5hbWU9X3dlZWtkYXluYW1lLCBtb250aG5hbWU9X21vbnRobmFtZSk6CiAgICBmcm9tIHRpbWUgaW1wb3J0IGdtdGltZSwgdGltZQogICAgbm93ID0gdGltZSgpCiAgICB5ZWFyLCBtb250aCwgZGF5LCBoaCwgbW0sIHNzLCB3ZCwgeSwgeiA9IGdtdGltZShub3cgKyBmdXR1cmUpCiAgICByZXR1cm4gIiVzLCAlMDJkICUzcyAlNGQgJTAyZDolMDJkOiUwMmQgR01UIiAlIFwKICAgICAgICAgICAod2Vla2RheW5hbWVbd2RdLCBkYXksIG1vbnRobmFtZVttb250aF0sIHllYXIsIGhoLCBtbSwgc3MpCgoKY2xhc3MgTW9yc2VsKGRpY3QpOgogICAgIiIiQSBjbGFzcyB0byBob2xkIE9ORSAoa2V5LCB2YWx1ZSkgcGFpci4KCiAgICBJbiBhIGNvb2tpZSwgZWFjaCBzdWNoIHBhaXIgbWF5IGhhdmUgc2V2ZXJhbCBhdHRyaWJ1dGVzLCBzbyB0aGlzIGNsYXNzIGlzCiAgICB1c2VkIHRvIGtlZXAgdGhlIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBrZXksdmFsdWUgcGFpci4KICAgIFRoaXMgY2xhc3MgYWxzbyBpbmNsdWRlcyBhIGNvZGVkX3ZhbHVlIGF0dHJpYnV0ZSwgd2hpY2ggaXMgdXNlZCB0byBob2xkCiAgICB0aGUgbmV0d29yayByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmFsdWUuICBUaGlzIGlzIG1vc3QgdXNlZnVsIHdoZW4gUHl0aG9uCiAgICBvYmplY3RzIGFyZSBwaWNrbGVkIGZvciBuZXR3b3JrIHRyYW5zaXQuCiAgICAiIiIKICAgICMgUkZDIDIxMDkgbGlzdHMgdGhlc2UgYXR0cmlidXRlcyBhcyByZXNlcnZlZDoKICAgICMgICBwYXRoICAgICAgIGNvbW1lbnQgICAgICAgICBkb21haW4KICAgICMgICBtYXgtYWdlICAgIHNlY3VyZSAgICAgIHZlcnNpb24KICAgICMKICAgICMgRm9yIGhpc3RvcmljYWwgcmVhc29ucywgdGhlc2UgYXR0cmlidXRlcyBhcmUgYWxzbyByZXNlcnZlZDoKICAgICMgICBleHBpcmVzCiAgICAjCiAgICAjIFRoaXMgaXMgYW4gZXh0ZW5zaW9uIGZyb20gTWljcm9zb2Z0OgogICAgIyAgIGh0dHBvbmx5CiAgICAjCiAgICAjIFRoaXMgZGljdGlvbmFyeSBwcm92aWRlcyBhIG1hcHBpbmcgZnJvbSB0aGUgbG93ZXJjYXNlCiAgICAjIHZhcmlhbnQgb24gdGhlIGxlZnQgdG8gdGhlIGFwcHJvcHJpYXRlIHRyYWRpdGlvbmFsCiAgICAjIGZvcm1hdHRpbmcgb24gdGhlIHJpZ2h0LgogICAgX3Jlc2VydmVkID0gewogICAgICAgICJleHBpcmVzIiAgOiAiZXhwaXJlcyIsCiAgICAgICAgInBhdGgiICAgICA6ICJQYXRoIiwKICAgICAgICAiY29tbWVudCIgIDogIkNvbW1lbnQiLAogICAgICAgICJkb21haW4iICAgOiAiRG9tYWluIiwKICAgICAgICAibWF4LWFnZSIgIDogIk1heC1BZ2UiLAogICAgICAgICJzZWN1cmUiICAgOiAic2VjdXJlIiwKICAgICAgICAiaHR0cG9ubHkiIDogImh0dHBvbmx5IiwKICAgICAgICAidmVyc2lvbiIgIDogIlZlcnNpb24iLAogICAgfQoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICAjIFNldCBkZWZhdWx0cwogICAgICAgIHNlbGYua2V5ID0gc2VsZi52YWx1ZSA9IHNlbGYuY29kZWRfdmFsdWUgPSBOb25lCgogICAgICAgICMgU2V0IGRlZmF1bHQgYXR0cmlidXRlcwogICAgICAgIGZvciBrZXkgaW4gc2VsZi5fcmVzZXJ2ZWQ6CiAgICAgICAgICAgIGRpY3QuX19zZXRpdGVtX18oc2VsZiwga2V5LCAiIikKCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwgSywgVik6CiAgICAgICAgSyA9IEsubG93ZXIoKQogICAgICAgIGlmIG5vdCBLIGluIHNlbGYuX3Jlc2VydmVkOgogICAgICAgICAgICByYWlzZSBDb29raWVFcnJvcigiSW52YWxpZCBBdHRyaWJ1dGUgJXMiICUgSykKICAgICAgICBkaWN0Ll9fc2V0aXRlbV9fKHNlbGYsIEssIFYpCgogICAgZGVmIGlzUmVzZXJ2ZWRLZXkoc2VsZiwgSyk6CiAgICAgICAgcmV0dXJuIEsubG93ZXIoKSBpbiBzZWxmLl9yZXNlcnZlZAoKICAgIGRlZiBzZXQoc2VsZiwga2V5LCB2YWwsIGNvZGVkX3ZhbCwgTGVnYWxDaGFycz1fTGVnYWxDaGFycyk6CiAgICAgICAgIyBGaXJzdCB3ZSB2ZXJpZnkgdGhhdCB0aGUga2V5IGlzbid0IGEgcmVzZXJ2ZWQgd29yZAogICAgICAgICMgU2Vjb25kIHdlIG1ha2Ugc3VyZSBpdCBvbmx5IGNvbnRhaW5zIGxlZ2FsIGNoYXJhY3RlcnMKICAgICAgICBpZiBrZXkubG93ZXIoKSBpbiBzZWxmLl9yZXNlcnZlZDoKICAgICAgICAgICAgcmFpc2UgQ29va2llRXJyb3IoIkF0dGVtcHQgdG8gc2V0IGEgcmVzZXJ2ZWQga2V5OiAlcyIgJSBrZXkpCiAgICAgICAgaWYgYW55KGMgbm90IGluIExlZ2FsQ2hhcnMgZm9yIGMgaW4ga2V5KToKICAgICAgICAgICAgcmFpc2UgQ29va2llRXJyb3IoIklsbGVnYWwga2V5IHZhbHVlOiAlcyIgJSBrZXkpCgogICAgICAgICMgSXQncyBhIGdvb2Qga2V5LCBzbyBzYXZlIGl0LgogICAgICAgIHNlbGYua2V5ID0ga2V5CiAgICAgICAgc2VsZi52YWx1ZSA9IHZhbAogICAgICAgIHNlbGYuY29kZWRfdmFsdWUgPSBjb2RlZF92YWwKCiAgICBkZWYgb3V0cHV0KHNlbGYsIGF0dHJzPU5vbmUsIGhlYWRlcj0iU2V0LUNvb2tpZToiKToKICAgICAgICByZXR1cm4gIiVzICVzIiAlIChoZWFkZXIsIHNlbGYuT3V0cHV0U3RyaW5nKGF0dHJzKSkKCiAgICBfX3N0cl9fID0gb3V0cHV0CgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAnPCVzOiAlcz0lcz4nICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYua2V5LCByZXByKHNlbGYudmFsdWUpKQoKICAgIGRlZiBqc19vdXRwdXQoc2VsZiwgYXR0cnM9Tm9uZSk6CiAgICAgICAgIyBQcmludCBqYXZhc2NyaXB0CiAgICAgICAgcmV0dXJuICIiIgogICAgICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KICAgICAgICA8IS0tIGJlZ2luIGhpZGluZwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IFwiJXNcIjsKICAgICAgICAvLyBlbmQgaGlkaW5nIC0tPgogICAgICAgIDwvc2NyaXB0PgogICAgICAgICIiIiAlIChzZWxmLk91dHB1dFN0cmluZyhhdHRycykucmVwbGFjZSgnIicsIHInXCInKSkKCiAgICBkZWYgT3V0cHV0U3RyaW5nKHNlbGYsIGF0dHJzPU5vbmUpOgogICAgICAgICMgQnVpbGQgdXAgb3VyIHJlc3VsdAogICAgICAgICMKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIGFwcGVuZCA9IHJlc3VsdC5hcHBlbmQKCiAgICAgICAgIyBGaXJzdCwgdGhlIGtleT12YWx1ZSBwYWlyCiAgICAgICAgYXBwZW5kKCIlcz0lcyIgJSAoc2VsZi5rZXksIHNlbGYuY29kZWRfdmFsdWUpKQoKICAgICAgICAjIE5vdyBhZGQgYW55IGRlZmluZWQgYXR0cmlidXRlcwogICAgICAgIGlmIGF0dHJzIGlzIE5vbmU6CiAgICAgICAgICAgIGF0dHJzID0gc2VsZi5fcmVzZXJ2ZWQKICAgICAgICBpdGVtcyA9IHNvcnRlZChzZWxmLml0ZW1zKCkpCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gaXRlbXM6CiAgICAgICAgICAgIGlmIHZhbHVlID09ICIiOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgaWYga2V5IG5vdCBpbiBhdHRyczoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGtleSA9PSAiZXhwaXJlcyIgYW5kIGlzaW5zdGFuY2UodmFsdWUsIGludCk6CiAgICAgICAgICAgICAgICBhcHBlbmQoIiVzPSVzIiAlIChzZWxmLl9yZXNlcnZlZFtrZXldLCBfZ2V0ZGF0ZSh2YWx1ZSkpKQogICAgICAgICAgICBlbGlmIGtleSA9PSAibWF4LWFnZSIgYW5kIGlzaW5zdGFuY2UodmFsdWUsIGludCk6CiAgICAgICAgICAgICAgICBhcHBlbmQoIiVzPSVkIiAlIChzZWxmLl9yZXNlcnZlZFtrZXldLCB2YWx1ZSkpCiAgICAgICAgICAgIGVsaWYga2V5ID09ICJzZWN1cmUiOgogICAgICAgICAgICAgICAgYXBwZW5kKHN0cihzZWxmLl9yZXNlcnZlZFtrZXldKSkKICAgICAgICAgICAgZWxpZiBrZXkgPT0gImh0dHBvbmx5IjoKICAgICAgICAgICAgICAgIGFwcGVuZChzdHIoc2VsZi5fcmVzZXJ2ZWRba2V5XSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhcHBlbmQoIiVzPSVzIiAlIChzZWxmLl9yZXNlcnZlZFtrZXldLCB2YWx1ZSkpCgogICAgICAgICMgUmV0dXJuIHRoZSByZXN1bHQKICAgICAgICByZXR1cm4gX3NlbWlzcGFjZWpvaW4ocmVzdWx0KQoKCiMKIyBQYXR0ZXJuIGZvciBmaW5kaW5nIGNvb2tpZQojCiMgVGhpcyB1c2VkIHRvIGJlIHN0cmljdCBwYXJzaW5nIGJhc2VkIG9uIHRoZSBSRkMyMTA5IGFuZCBSRkMyMDY4CiMgc3BlY2lmaWNhdGlvbnMuICBJIGhhdmUgc2luY2UgZGlzY292ZXJlZCB0aGF0IE1TSUUgMy4weCBkb2Vzbid0CiMgZm9sbG93IHRoZSBjaGFyYWN0ZXIgcnVsZXMgb3V0bGluZWQgaW4gdGhvc2Ugc3BlY3MuICBBcyBhCiMgcmVzdWx0LCB0aGUgcGFyc2luZyBydWxlcyBoZXJlIGFyZSBsZXNzIHN0cmljdC4KIwoKX0xlZ2FsQ2hhcnNQYXR0ICA9IHIiW1x3XGQhIyUmJ35fYD48QCw6L1wkXCpcK1wtXC5cXlx8XClcKFw/XH1ce1w9XSIKX0Nvb2tpZVBhdHRlcm4gPSByZS5jb21waWxlKHIiIiIKICAgICg/eCkgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFRoaXMgaXMgYSB2ZXJib3NlIHBhdHRlcm4KICAgICg/UDxrZXk+ICAgICAgICAgICAgICAgICAgICAgICAjIFN0YXJ0IG9mIGdyb3VwICdrZXknCiAgICAiIiIgKyBfTGVnYWxDaGFyc1BhdHQgKyByIiIiKz8gICAjIEFueSB3b3JkIG9mIGF0IGxlYXN0IG9uZSBsZXR0ZXIKICAgICkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIEVuZCBvZiBncm91cCAna2V5JwogICAgXHMqPVxzKiAgICAgICAgICAgICAgICAgICAgICAgICMgRXF1YWwgU2lnbgogICAgKD9QPHZhbD4gICAgICAgICAgICAgICAgICAgICAgICMgU3RhcnQgb2YgZ3JvdXAgJ3ZhbCcKICAgICIoPzpbXlxcIl18XFwuKSoiICAgICAgICAgICAgICAgICMgQW55IGRvdWJsZXF1b3RlZCBzdHJpbmcKICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgb3IKICAgIFx3ezN9LFxzW1x3XGRccy1dezksMTF9XHNbXGQ6XXs4fVxzR01UICAjIFNwZWNpYWwgY2FzZSBmb3IgImV4cGlyZXMiIGF0dHIKICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgb3IKICAgICIiIiArIF9MZWdhbENoYXJzUGF0dCArIHIiIiIqICAgICMgQW55IHdvcmQgb3IgZW1wdHkgc3RyaW5nCiAgICApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBFbmQgb2YgZ3JvdXAgJ3ZhbCcKICAgIFxzKjs/ICAgICAgICAgICAgICAgICAgICAgICAgICAjIFByb2JhYmx5IGVuZGluZyBpbiBhIHNlbWktY29sb24KICAgICIiIiwgcmUuQVNDSUkpICAgICAgICAgICAgICAgICAjIE1heSBiZSByZW1vdmVkIGlmIHNhZmUuCgoKIyBBdCBsb25nIGxhc3QsIGhlcmUgaXMgdGhlIGNvb2tpZSBjbGFzcy4gIFVzaW5nIHRoaXMgY2xhc3MgaXMgYWxtb3N0IGp1c3QgbGlrZQojIHVzaW5nIGEgZGljdGlvbmFyeS4gIFNlZSB0aGlzIG1vZHVsZSdzIGRvY3N0cmluZyBmb3IgZXhhbXBsZSB1c2FnZS4KIwpjbGFzcyBCYXNlQ29va2llKGRpY3QpOgogICAgIiIiQSBjb250YWluZXIgY2xhc3MgZm9yIGEgc2V0IG9mIE1vcnNlbHMuIiIiCgogICAgZGVmIHZhbHVlX2RlY29kZShzZWxmLCB2YWwpOgogICAgICAgICIiInJlYWxfdmFsdWUsIGNvZGVkX3ZhbHVlID0gdmFsdWVfZGVjb2RlKFNUUklORykKICAgICAgICBDYWxsZWQgcHJpb3IgdG8gc2V0dGluZyBhIGNvb2tpZSdzIHZhbHVlIGZyb20gdGhlIG5ldHdvcmsKICAgICAgICByZXByZXNlbnRhdGlvbi4gIFRoZSBWQUxVRSBpcyB0aGUgdmFsdWUgcmVhZCBmcm9tIEhUVFAKICAgICAgICBoZWFkZXIuCiAgICAgICAgT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBtb2RpZnkgdGhlIGJlaGF2aW9yIG9mIGNvb2tpZXMuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHZhbCwgdmFsCgogICAgZGVmIHZhbHVlX2VuY29kZShzZWxmLCB2YWwpOgogICAgICAgICIiInJlYWxfdmFsdWUsIGNvZGVkX3ZhbHVlID0gdmFsdWVfZW5jb2RlKFZBTFVFKQogICAgICAgIENhbGxlZCBwcmlvciB0byBzZXR0aW5nIGEgY29va2llJ3MgdmFsdWUgZnJvbSB0aGUgZGljdGlvbmFyeQogICAgICAgIHJlcHJlc2VudGF0aW9uLiAgVGhlIFZBTFVFIGlzIHRoZSB2YWx1ZSBiZWluZyBhc3NpZ25lZC4KICAgICAgICBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIG1vZGlmeSB0aGUgYmVoYXZpb3Igb2YgY29va2llcy4KICAgICAgICAiIiIKICAgICAgICBzdHJ2YWwgPSBzdHIodmFsKQogICAgICAgIHJldHVybiBzdHJ2YWwsIHN0cnZhbAoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbnB1dD1Ob25lKToKICAgICAgICBpZiBpbnB1dDoKICAgICAgICAgICAgc2VsZi5sb2FkKGlucHV0KQoKICAgIGRlZiBfX3NldChzZWxmLCBrZXksIHJlYWxfdmFsdWUsIGNvZGVkX3ZhbHVlKToKICAgICAgICAiIiJQcml2YXRlIG1ldGhvZCBmb3Igc2V0dGluZyBhIGNvb2tpZSdzIHZhbHVlIiIiCiAgICAgICAgTSA9IHNlbGYuZ2V0KGtleSwgTW9yc2VsKCkpCiAgICAgICAgTS5zZXQoa2V5LCByZWFsX3ZhbHVlLCBjb2RlZF92YWx1ZSkKICAgICAgICBkaWN0Ll9fc2V0aXRlbV9fKHNlbGYsIGtleSwgTSkKCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWx1ZSk6CiAgICAgICAgIiIiRGljdGlvbmFyeSBzdHlsZSBhc3NpZ25tZW50LiIiIgogICAgICAgIHJ2YWwsIGN2YWwgPSBzZWxmLnZhbHVlX2VuY29kZSh2YWx1ZSkKICAgICAgICBzZWxmLl9fc2V0KGtleSwgcnZhbCwgY3ZhbCkKCiAgICBkZWYgb3V0cHV0KHNlbGYsIGF0dHJzPU5vbmUsIGhlYWRlcj0iU2V0LUNvb2tpZToiLCBzZXA9IlwwMTVcMDEyIik6CiAgICAgICAgIiIiUmV0dXJuIGEgc3RyaW5nIHN1aXRhYmxlIGZvciBIVFRQLiIiIgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQoc2VsZi5pdGVtcygpKQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGl0ZW1zOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKHZhbHVlLm91dHB1dChhdHRycywgaGVhZGVyKSkKICAgICAgICByZXR1cm4gc2VwLmpvaW4ocmVzdWx0KQoKICAgIF9fc3RyX18gPSBvdXRwdXQKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgbCA9IFtdCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQoc2VsZi5pdGVtcygpKQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGl0ZW1zOgogICAgICAgICAgICBsLmFwcGVuZCgnJXM9JXMnICUgKGtleSwgcmVwcih2YWx1ZS52YWx1ZSkpKQogICAgICAgIHJldHVybiAnPCVzOiAlcz4nICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBfc3BhY2Vqb2luKGwpKQoKICAgIGRlZiBqc19vdXRwdXQoc2VsZiwgYXR0cnM9Tm9uZSk6CiAgICAgICAgIiIiUmV0dXJuIGEgc3RyaW5nIHN1aXRhYmxlIGZvciBKYXZhU2NyaXB0LiIiIgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQoc2VsZi5pdGVtcygpKQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGl0ZW1zOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKHZhbHVlLmpzX291dHB1dChhdHRycykpCiAgICAgICAgcmV0dXJuIF9udWxsam9pbihyZXN1bHQpCgogICAgZGVmIGxvYWQoc2VsZiwgcmF3ZGF0YSk6CiAgICAgICAgIiIiTG9hZCBjb29raWVzIGZyb20gYSBzdHJpbmcgKHByZXN1bWFibHkgSFRUUF9DT09LSUUpIG9yCiAgICAgICAgZnJvbSBhIGRpY3Rpb25hcnkuICBMb2FkaW5nIGNvb2tpZXMgZnJvbSBhIGRpY3Rpb25hcnkgJ2QnCiAgICAgICAgaXMgZXF1aXZhbGVudCB0byBjYWxsaW5nOgogICAgICAgICAgICBtYXAoQ29va2llLl9fc2V0aXRlbV9fLCBkLmtleXMoKSwgZC52YWx1ZXMoKSkKICAgICAgICAiIiIKICAgICAgICBpZiBpc2luc3RhbmNlKHJhd2RhdGEsIHN0cik6CiAgICAgICAgICAgIHNlbGYuX19wYXJzZV9zdHJpbmcocmF3ZGF0YSkKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIHNlbGYudXBkYXRlKCkgd291bGRuJ3QgY2FsbCBvdXIgY3VzdG9tIF9fc2V0aXRlbV9fCiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIHJhd2RhdGEuaXRlbXMoKToKICAgICAgICAgICAgICAgIHNlbGZba2V5XSA9IHZhbHVlCiAgICAgICAgcmV0dXJuCgogICAgZGVmIF9fcGFyc2Vfc3RyaW5nKHNlbGYsIHN0ciwgcGF0dD1fQ29va2llUGF0dGVybik6CiAgICAgICAgaSA9IDAgICAgICAgICAgICAjIE91ciBzdGFydGluZyBwb2ludAogICAgICAgIG4gPSBsZW4oc3RyKSAgICAgIyBMZW5ndGggb2Ygc3RyaW5nCiAgICAgICAgTSA9IE5vbmUgICAgICAgICAjIGN1cnJlbnQgbW9yc2VsCgogICAgICAgIHdoaWxlIDAgPD0gaSA8IG46CiAgICAgICAgICAgICMgU3RhcnQgbG9va2luZyBmb3IgYSBjb29raWUKICAgICAgICAgICAgbWF0Y2ggPSBwYXR0LnNlYXJjaChzdHIsIGkpCiAgICAgICAgICAgIGlmIG5vdCBtYXRjaDoKICAgICAgICAgICAgICAgICMgTm8gbW9yZSBjb29raWVzCiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAga2V5LCB2YWx1ZSA9IG1hdGNoLmdyb3VwKCJrZXkiKSwgbWF0Y2guZ3JvdXAoInZhbCIpCiAgICAgICAgICAgIGkgPSBtYXRjaC5lbmQoMCkKCiAgICAgICAgICAgICMgUGFyc2UgdGhlIGtleSwgdmFsdWUgaW4gY2FzZSBpdCdzIG1ldGFpbmZvCiAgICAgICAgICAgIGlmIGtleVswXSA9PSAiJCI6CiAgICAgICAgICAgICAgICAjIFdlIGlnbm9yZSBhdHRyaWJ1dGVzIHdoaWNoIHBlcnRhaW4gdG8gdGhlIGNvb2tpZQogICAgICAgICAgICAgICAgIyBtZWNoYW5pc20gYXMgYSB3aG9sZS4gIFNlZSBSRkMgMjEwOS4KICAgICAgICAgICAgICAgICMgKERvZXMgYW55b25lIGNhcmU/KQogICAgICAgICAgICAgICAgaWYgTToKICAgICAgICAgICAgICAgICAgICBNW2tleVsxOl1dID0gdmFsdWUKICAgICAgICAgICAgZWxpZiBrZXkubG93ZXIoKSBpbiBNb3JzZWwuX3Jlc2VydmVkOgogICAgICAgICAgICAgICAgaWYgTToKICAgICAgICAgICAgICAgICAgICBNW2tleV0gPSBfdW5xdW90ZSh2YWx1ZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJ2YWwsIGN2YWwgPSBzZWxmLnZhbHVlX2RlY29kZSh2YWx1ZSkKICAgICAgICAgICAgICAgIHNlbGYuX19zZXQoa2V5LCBydmFsLCBjdmFsKQogICAgICAgICAgICAgICAgTSA9IHNlbGZba2V5XQoKCmNsYXNzIFNpbXBsZUNvb2tpZShCYXNlQ29va2llKToKICAgICIiIgogICAgU2ltcGxlQ29va2llIHN1cHBvcnRzIHN0cmluZ3MgYXMgY29va2llIHZhbHVlcy4gIFdoZW4gc2V0dGluZwogICAgdGhlIHZhbHVlIHVzaW5nIHRoZSBkaWN0aW9uYXJ5IGFzc2lnbm1lbnQgbm90YXRpb24sIFNpbXBsZUNvb2tpZQogICAgY2FsbHMgdGhlIGJ1aWx0aW4gc3RyKCkgdG8gY29udmVydCB0aGUgdmFsdWUgdG8gYSBzdHJpbmcuICBWYWx1ZXMKICAgIHJlY2VpdmVkIGZyb20gSFRUUCBhcmUga2VwdCBhcyBzdHJpbmdzLgogICAgIiIiCiAgICBkZWYgdmFsdWVfZGVjb2RlKHNlbGYsIHZhbCk6CiAgICAgICAgcmV0dXJuIF91bnF1b3RlKHZhbCksIHZhbAoKICAgIGRlZiB2YWx1ZV9lbmNvZGUoc2VsZiwgdmFsKToKICAgICAgICBzdHJ2YWwgPSBzdHIodmFsKQogICAgICAgIHJldHVybiBzdHJ2YWwsIF9xdW90ZShzdHJ2YWwpCg==',
'/Lib/http/__init__.py':'',
'/Lib/importlib/__init__.py':'IiIiQSBwdXJlIFB5dGhvbiBpbXBsZW1lbnRhdGlvbiBvZiBpbXBvcnQuIiIiDQpfX2FsbF9fID0gWydfX2ltcG9ydF9fJywgJ2ltcG9ydF9tb2R1bGUnLCAnaW52YWxpZGF0ZV9jYWNoZXMnXQ0KDQojIEJvb3RzdHJhcCBoZWxwICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiMgVW50aWwgYm9vdHN0cmFwcGluZyBpcyBjb21wbGV0ZSwgRE8gTk9UIGltcG9ydCBhbnkgbW9kdWxlcyB0aGF0IGF0dGVtcHQNCiMgdG8gaW1wb3J0IGltcG9ydGxpYi5fYm9vdHN0cmFwIChkaXJlY3RseSBvciBpbmRpcmVjdGx5KS4gU2luY2UgdGhpcw0KIyBwYXJ0aWFsbHkgaW5pdGlhbGlzZWQgcGFja2FnZSB3b3VsZCBiZSBwcmVzZW50IGluIHN5cy5tb2R1bGVzLCB0aG9zZQ0KIyBtb2R1bGVzIHdvdWxkIGdldCBhbiB1bmluaXRpYWxpc2VkIGNvcHkgb2YgdGhlIHNvdXJjZSB2ZXJzaW9uLCBpbnN0ZWFkDQojIG9mIGEgZnVsbHkgaW5pdGlhbGlzZWQgdmVyc2lvbiAoZWl0aGVyIHRoZSBmcm96ZW4gb25lIG9yIHRoZSBvbmUNCiMgaW5pdGlhbGlzZWQgYmVsb3cgaWYgdGhlIGZyb3plbiBvbmUgaXMgbm90IGF2YWlsYWJsZSkuDQppbXBvcnQgX2ltcCAgIyBKdXN0IHRoZSBidWlsdGluIGNvbXBvbmVudCwgTk9UIHRoZSBmdWxsIFB5dGhvbiBtb2R1bGUNCmltcG9ydCBzeXMNCg0KdHJ5Og0KICAgIGltcG9ydCBfZnJvemVuX2ltcG9ydGxpYiBhcyBfYm9vdHN0cmFwDQpleGNlcHQgSW1wb3J0RXJyb3I6DQogICAgZnJvbSAuIGltcG9ydCBfYm9vdHN0cmFwDQogICAgX2Jvb3RzdHJhcC5fc2V0dXAoc3lzLCBfaW1wKQ0KZWxzZToNCiAgICAjIGltcG9ydGxpYi5fYm9vdHN0cmFwIGlzIHRoZSBidWlsdC1pbiBpbXBvcnQsIGVuc3VyZSB3ZSBkb24ndCBjcmVhdGUNCiAgICAjIGEgc2Vjb25kIGNvcHkgb2YgdGhlIG1vZHVsZS4NCiAgICBfYm9vdHN0cmFwLl9fbmFtZV9fID0gJ2ltcG9ydGxpYi5fYm9vdHN0cmFwJw0KICAgIF9ib290c3RyYXAuX19wYWNrYWdlX18gPSAnaW1wb3J0bGliJw0KICAgIF9ib290c3RyYXAuX19maWxlX18gPSBfX2ZpbGVfXy5yZXBsYWNlKCdfX2luaXRfXy5weScsICdfYm9vdHN0cmFwLnB5JykNCiAgICBzeXMubW9kdWxlc1snaW1wb3J0bGliLl9ib290c3RyYXAnXSA9IF9ib290c3RyYXANCg0KIyBUbyBzaW1wbGlmeSBpbXBvcnRzIGluIHRlc3QgY29kZQ0KX3dfbG9uZyA9IF9ib290c3RyYXAuX3dfbG9uZw0KX3JfbG9uZyA9IF9ib290c3RyYXAuX3JfbG9uZw0KDQojIEZ1bGx5IGJvb3RzdHJhcHBlZCBhdCB0aGlzIHBvaW50LCBpbXBvcnQgd2hhdGV2ZXIgeW91IGxpa2UsIGNpcmN1bGFyDQojIGRlcGVuZGVuY2llcyBhbmQgc3RhcnR1cCBvdmVyaGVhZCBtaW5pbWlzYXRpb24gcGVybWl0dGluZyA6KQ0KDQojIFB1YmxpYyBBUEkgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCmZyb20gLl9ib290c3RyYXAgaW1wb3J0IF9faW1wb3J0X18NCg0KDQpkZWYgaW52YWxpZGF0ZV9jYWNoZXMoKToNCiAgICAiIiJDYWxsIHRoZSBpbnZhbGlkYXRlX2NhY2hlcygpIG1ldGhvZCBvbiBhbGwgbWV0YSBwYXRoIGZpbmRlcnMgc3RvcmVkIGluDQogICAgc3lzLm1ldGFfcGF0aCAod2hlcmUgaW1wbGVtZW50ZWQpLiIiIg0KICAgIGZvciBmaW5kZXIgaW4gc3lzLm1ldGFfcGF0aDoNCiAgICAgICAgaWYgaGFzYXR0cihmaW5kZXIsICdpbnZhbGlkYXRlX2NhY2hlcycpOg0KICAgICAgICAgICAgZmluZGVyLmludmFsaWRhdGVfY2FjaGVzKCkNCg0KDQpkZWYgZmluZF9sb2FkZXIobmFtZSwgcGF0aD1Ob25lKToNCiAgICAiIiJGaW5kIHRoZSBsb2FkZXIgZm9yIHRoZSBzcGVjaWZpZWQgbW9kdWxlLg0KDQogICAgRmlyc3QsIHN5cy5tb2R1bGVzIGlzIGNoZWNrZWQgdG8gc2VlIGlmIHRoZSBtb2R1bGUgd2FzIGFscmVhZHkgaW1wb3J0ZWQuIElmDQogICAgc28sIHRoZW4gc3lzLm1vZHVsZXNbbmFtZV0uX19sb2FkZXJfXyBpcyByZXR1cm5lZC4gSWYgdGhhdCBoYXBwZW5zIHRvIGJlDQogICAgc2V0IHRvIE5vbmUsIHRoZW4gVmFsdWVFcnJvciBpcyByYWlzZWQuIElmIHRoZSBtb2R1bGUgaXMgbm90IGluDQogICAgc3lzLm1vZHVsZXMsIHRoZW4gc3lzLm1ldGFfcGF0aCBpcyBzZWFyY2hlZCBmb3IgYSBzdWl0YWJsZSBsb2FkZXIgd2l0aCB0aGUNCiAgICB2YWx1ZSBvZiAncGF0aCcgZ2l2ZW4gdG8gdGhlIGZpbmRlcnMuIE5vbmUgaXMgcmV0dXJuZWQgaWYgbm8gbG9hZGVyIGNvdWxkDQogICAgYmUgZm91bmQuDQoNCiAgICBEb3R0ZWQgbmFtZXMgZG8gbm90IGhhdmUgdGhlaXIgcGFyZW50IHBhY2thZ2VzIGltcGxpY2l0bHkgaW1wb3J0ZWQuDQoNCiAgICAiIiINCiAgICB0cnk6DQogICAgICAgIGxvYWRlciA9IHN5cy5tb2R1bGVzW25hbWVdLl9fbG9hZGVyX18NCiAgICAgICAgaWYgbG9hZGVyIGlzIE5vbmU6DQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCd7fS5fX2xvYWRlcl9fIGlzIE5vbmUnLmZvcm1hdChuYW1lKSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBsb2FkZXINCiAgICBleGNlcHQgS2V5RXJyb3I6DQogICAgICAgIHBhc3MNCiAgICByZXR1cm4gX2Jvb3RzdHJhcC5fZmluZF9tb2R1bGUobmFtZSwgcGF0aCkNCg0KDQpkZWYgaW1wb3J0X21vZHVsZShuYW1lLCBwYWNrYWdlPU5vbmUpOg0KICAgICIiIkltcG9ydCBhIG1vZHVsZS4NCg0KICAgIFRoZSAncGFja2FnZScgYXJndW1lbnQgaXMgcmVxdWlyZWQgd2hlbiBwZXJmb3JtaW5nIGEgcmVsYXRpdmUgaW1wb3J0LiBJdA0KICAgIHNwZWNpZmllcyB0aGUgcGFja2FnZSB0byB1c2UgYXMgdGhlIGFuY2hvciBwb2ludCBmcm9tIHdoaWNoIHRvIHJlc29sdmUgdGhlDQogICAgcmVsYXRpdmUgaW1wb3J0IHRvIGFuIGFic29sdXRlIGltcG9ydC4NCg0KICAgICIiIg0KICAgIGxldmVsID0gMA0KICAgIGlmIG5hbWUuc3RhcnRzd2l0aCgnLicpOg0KICAgICAgICBpZiBub3QgcGFja2FnZToNCiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigicmVsYXRpdmUgaW1wb3J0cyByZXF1aXJlIHRoZSAncGFja2FnZScgYXJndW1lbnQiKQ0KICAgICAgICBmb3IgY2hhcmFjdGVyIGluIG5hbWU6DQogICAgICAgICAgICBpZiBjaGFyYWN0ZXIgIT0gJy4nOg0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBsZXZlbCArPSAxDQogICAgcmV0dXJuIF9ib290c3RyYXAuX2djZF9pbXBvcnQobmFtZVtsZXZlbDpdLCBwYWNrYWdlLCBsZXZlbCkNCg==',
'/Lib/importlib/util.py':'IiIiVXRpbGl0eSBjb2RlIGZvciBjb25zdHJ1Y3RpbmcgaW1wb3J0ZXJzLCBldGMuIiIiDQoNCmZyb20gLl9ib290c3RyYXAgaW1wb3J0IG1vZHVsZV9mb3JfbG9hZGVyDQpmcm9tIC5fYm9vdHN0cmFwIGltcG9ydCBzZXRfbG9hZGVyDQpmcm9tIC5fYm9vdHN0cmFwIGltcG9ydCBzZXRfcGFja2FnZQ0KZnJvbSAuX2Jvb3RzdHJhcCBpbXBvcnQgX3Jlc29sdmVfbmFtZQ0KDQoNCmRlZiByZXNvbHZlX25hbWUobmFtZSwgcGFja2FnZSk6DQogICAgIiIiUmVzb2x2ZSBhIHJlbGF0aXZlIG1vZHVsZSBuYW1lIHRvIGFuIGFic29sdXRlIG9uZS4iIiINCiAgICBpZiBub3QgbmFtZS5zdGFydHN3aXRoKCcuJyk6DQogICAgICAgIHJldHVybiBuYW1lDQogICAgZWxpZiBub3QgcGFja2FnZToNCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigneyFyfSBpcyBub3QgYSByZWxhdGl2ZSBuYW1lICcNCiAgICAgICAgICAgICAgICAgICAgICAgICAnKG5vIGxlYWRpbmcgZG90KScuZm9ybWF0KG5hbWUpKQ0KICAgIGxldmVsID0gMA0KICAgIGZvciBjaGFyYWN0ZXIgaW4gbmFtZToNCiAgICAgICAgaWYgY2hhcmFjdGVyICE9ICcuJzoNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGxldmVsICs9IDENCiAgICByZXR1cm4gX3Jlc29sdmVfbmFtZShuYW1lW2xldmVsOl0sIHBhY2thZ2UsIGxldmVsKQ0K',
'/Lib/importlib/abc.py':'IiIiQWJzdHJhY3QgYmFzZSBjbGFzc2VzIHJlbGF0ZWQgdG8gaW1wb3J0LiIiIg0KZnJvbSAuIGltcG9ydCBfYm9vdHN0cmFwDQpmcm9tIC4gaW1wb3J0IG1hY2hpbmVyeQ0KdHJ5Og0KICAgIGltcG9ydCBfZnJvemVuX2ltcG9ydGxpYg0KZXhjZXB0IEltcG9ydEVycm9yIGFzIGV4YzoNCiAgICBpZiBleGMubmFtZSAhPSAnX2Zyb3plbl9pbXBvcnRsaWInOg0KICAgICAgICByYWlzZQ0KICAgIF9mcm96ZW5faW1wb3J0bGliID0gTm9uZQ0KaW1wb3J0IGFiYw0KaW1wb3J0IGltcA0KaW1wb3J0IG1hcnNoYWwNCmltcG9ydCBzeXMNCmltcG9ydCB0b2tlbml6ZQ0KaW1wb3J0IHdhcm5pbmdzDQoNCg0KZGVmIF9yZWdpc3RlcihhYnN0cmFjdF9jbHMsICpjbGFzc2VzKToNCiAgICBmb3IgY2xzIGluIGNsYXNzZXM6DQogICAgICAgIGFic3RyYWN0X2Nscy5yZWdpc3RlcihjbHMpDQogICAgICAgIGlmIF9mcm96ZW5faW1wb3J0bGliIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgZnJvemVuX2NscyA9IGdldGF0dHIoX2Zyb3plbl9pbXBvcnRsaWIsIGNscy5fX25hbWVfXykNCiAgICAgICAgICAgIGFic3RyYWN0X2Nscy5yZWdpc3Rlcihmcm96ZW5fY2xzKQ0KDQoNCmNsYXNzIEZpbmRlcihtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOg0KDQogICAgIiIiTGVnYWN5IGFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGltcG9ydCBmaW5kZXJzLg0KDQogICAgSXQgbWF5IGJlIHN1YmNsYXNzZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBsZWdhY3kgdGhpcmQgcGFydHkNCiAgICByZWltcGxlbWVudGF0aW9ucyBvZiB0aGUgaW1wb3J0IHN5c3RlbS4gIE90aGVyd2lzZSwgZmluZGVyDQogICAgaW1wbGVtZW50YXRpb25zIHNob3VsZCBkZXJpdmUgZnJvbSB0aGUgbW9yZSBzcGVjaWZpYyBNZXRhUGF0aEZpbmRlcg0KICAgIG9yIFBhdGhFbnRyeUZpbmRlciBBQkNzLg0KICAgICIiIg0KDQogICAgQGFiYy5hYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBmaW5kX21vZHVsZShzZWxmLCBmdWxsbmFtZSwgcGF0aD1Ob25lKToNCiAgICAgICAgIiIiQW4gYWJzdHJhY3QgbWV0aG9kIHRoYXQgc2hvdWxkIGZpbmQgYSBtb2R1bGUuDQogICAgICAgIFRoZSBmdWxsbmFtZSBpcyBhIHN0ciBhbmQgdGhlIG9wdGlvbmFsIHBhdGggaXMgYSBzdHIgb3IgTm9uZS4NCiAgICAgICAgUmV0dXJucyBhIExvYWRlciBvYmplY3QuDQogICAgICAgICIiIg0KICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yDQoNCg0KY2xhc3MgTWV0YVBhdGhGaW5kZXIoRmluZGVyKToNCg0KICAgICIiIkFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGltcG9ydCBmaW5kZXJzIG9uIHN5cy5tZXRhX3BhdGguIiIiDQoNCiAgICBAYWJjLmFic3RyYWN0bWV0aG9kDQogICAgZGVmIGZpbmRfbW9kdWxlKHNlbGYsIGZ1bGxuYW1lLCBwYXRoKToNCiAgICAgICAgIiIiQWJzdHJhY3QgbWV0aG9kIHdoaWNoLCB3aGVuIGltcGxlbWVudGVkLCBzaG91bGQgZmluZCBhIG1vZHVsZS4NCiAgICAgICAgVGhlIGZ1bGxuYW1lIGlzIGEgc3RyIGFuZCB0aGUgcGF0aCBpcyBhIHN0ciBvciBOb25lLg0KICAgICAgICBSZXR1cm5zIGEgTG9hZGVyIG9iamVjdC4NCiAgICAgICAgIiIiDQogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3INCg0KICAgIGRlZiBpbnZhbGlkYXRlX2NhY2hlcyhzZWxmKToNCiAgICAgICAgIiIiQW4gb3B0aW9uYWwgbWV0aG9kIGZvciBjbGVhcmluZyB0aGUgZmluZGVyJ3MgY2FjaGUsIGlmIGFueS4NCiAgICAgICAgVGhpcyBtZXRob2QgaXMgdXNlZCBieSBpbXBvcnRsaWIuaW52YWxpZGF0ZV9jYWNoZXMoKS4NCiAgICAgICAgIiIiDQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZA0KDQpfcmVnaXN0ZXIoTWV0YVBhdGhGaW5kZXIsIG1hY2hpbmVyeS5CdWlsdGluSW1wb3J0ZXIsIG1hY2hpbmVyeS5Gcm96ZW5JbXBvcnRlciwNCiAgICAgICAgICBtYWNoaW5lcnkuUGF0aEZpbmRlciwgbWFjaGluZXJ5LldpbmRvd3NSZWdpc3RyeUZpbmRlcikNCg0KDQpjbGFzcyBQYXRoRW50cnlGaW5kZXIoRmluZGVyKToNCg0KICAgICIiIkFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIHBhdGggZW50cnkgZmluZGVycyB1c2VkIGJ5IFBhdGhGaW5kZXIuIiIiDQoNCiAgICBAYWJjLmFic3RyYWN0bWV0aG9kDQogICAgZGVmIGZpbmRfbG9hZGVyKHNlbGYsIGZ1bGxuYW1lKToNCiAgICAgICAgIiIiQWJzdHJhY3QgbWV0aG9kIHdoaWNoLCB3aGVuIGltcGxlbWVudGVkLCByZXR1cm5zIGEgbW9kdWxlIGxvYWRlci4NCiAgICAgICAgVGhlIGZ1bGxuYW1lIGlzIGEgc3RyLiAgUmV0dXJucyBhIDItdHVwbGUgb2YgKExvYWRlciwgcG9ydGlvbikgd2hlcmUNCiAgICAgICAgcG9ydGlvbiBpcyBhIHNlcXVlbmNlIG9mIGZpbGUgc3lzdGVtIGxvY2F0aW9ucyBjb250cmlidXRpbmcgdG8gcGFydCBvZg0KICAgICAgICBhIG5hbWVzcGFjZSBwYWNrYWdlLiAgVGhlIHNlcXVlbmNlIG1heSBiZSBlbXB0eSBhbmQgdGhlIGxvYWRlciBtYXkgYmUNCiAgICAgICAgTm9uZS4NCiAgICAgICAgIiIiDQogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3INCg0KICAgIGZpbmRfbW9kdWxlID0gX2Jvb3RzdHJhcC5fZmluZF9tb2R1bGVfc2hpbQ0KDQogICAgZGVmIGludmFsaWRhdGVfY2FjaGVzKHNlbGYpOg0KICAgICAgICAiIiJBbiBvcHRpb25hbCBtZXRob2QgZm9yIGNsZWFyaW5nIHRoZSBmaW5kZXIncyBjYWNoZSwgaWYgYW55Lg0KICAgICAgICBUaGlzIG1ldGhvZCBpcyB1c2VkIGJ5IFBhdGhGaW5kZXIuaW52YWxpZGF0ZV9jYWNoZXMoKS4NCiAgICAgICAgIiIiDQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZA0KDQpfcmVnaXN0ZXIoUGF0aEVudHJ5RmluZGVyLCBtYWNoaW5lcnkuRmlsZUZpbmRlcikNCg0KDQpjbGFzcyBMb2FkZXIobWV0YWNsYXNzPWFiYy5BQkNNZXRhKToNCg0KICAgICIiIkFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGltcG9ydCBsb2FkZXJzLiIiIg0KDQogICAgQGFiYy5hYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBsb2FkX21vZHVsZShzZWxmLCBmdWxsbmFtZSk6DQogICAgICAgICIiIkFic3RyYWN0IG1ldGhvZCB3aGljaCB3aGVuIGltcGxlbWVudGVkIHNob3VsZCBsb2FkIGEgbW9kdWxlLg0KICAgICAgICBUaGUgZnVsbG5hbWUgaXMgYSBzdHIuIiIiDQogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3INCg0KICAgIEBhYmMuYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgbW9kdWxlX3JlcHIoc2VsZiwgbW9kdWxlKToNCiAgICAgICAgIiIiQWJzdHJhY3QgbWV0aG9kIHdoaWNoIHdoZW4gaW1wbGVtZW50ZWQgY2FsY3VsYXRlcyBhbmQgcmV0dXJucyB0aGUNCiAgICAgICAgZ2l2ZW4gbW9kdWxlJ3MgcmVwci4iIiINCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcg0KDQoNCmNsYXNzIFJlc291cmNlTG9hZGVyKExvYWRlcik6DQoNCiAgICAiIiJBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBsb2FkZXJzIHdoaWNoIGNhbiByZXR1cm4gZGF0YSBmcm9tIHRoZWlyDQogICAgYmFjay1lbmQgc3RvcmFnZS4NCg0KICAgIFRoaXMgQUJDIHJlcHJlc2VudHMgb25lIG9mIHRoZSBvcHRpb25hbCBwcm90b2NvbHMgc3BlY2lmaWVkIGJ5IFBFUCAzMDIuDQoNCiAgICAiIiINCg0KICAgIEBhYmMuYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgZ2V0X2RhdGEoc2VsZiwgcGF0aCk6DQogICAgICAgICIiIkFic3RyYWN0IG1ldGhvZCB3aGljaCB3aGVuIGltcGxlbWVudGVkIHNob3VsZCByZXR1cm4gdGhlIGJ5dGVzIGZvcg0KICAgICAgICB0aGUgc3BlY2lmaWVkIHBhdGguICBUaGUgcGF0aCBtdXN0IGJlIGEgc3RyLiIiIg0KICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yDQoNCg0KY2xhc3MgSW5zcGVjdExvYWRlcihMb2FkZXIpOg0KDQogICAgIiIiQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgbG9hZGVycyB3aGljaCBzdXBwb3J0IGluc3BlY3Rpb24gYWJvdXQgdGhlDQogICAgbW9kdWxlcyB0aGV5IGNhbiBsb2FkLg0KDQogICAgVGhpcyBBQkMgcmVwcmVzZW50cyBvbmUgb2YgdGhlIG9wdGlvbmFsIHByb3RvY29scyBzcGVjaWZpZWQgYnkgUEVQIDMwMi4NCg0KICAgICIiIg0KDQogICAgQGFiYy5hYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBpc19wYWNrYWdlKHNlbGYsIGZ1bGxuYW1lKToNCiAgICAgICAgIiIiQWJzdHJhY3QgbWV0aG9kIHdoaWNoIHdoZW4gaW1wbGVtZW50ZWQgc2hvdWxkIHJldHVybiB3aGV0aGVyIHRoZQ0KICAgICAgICBtb2R1bGUgaXMgYSBwYWNrYWdlLiAgVGhlIGZ1bGxuYW1lIGlzIGEgc3RyLiAgUmV0dXJucyBhIGJvb2wuIiIiDQogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3INCg0KICAgIEBhYmMuYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgZ2V0X2NvZGUoc2VsZiwgZnVsbG5hbWUpOg0KICAgICAgICAiIiJBYnN0cmFjdCBtZXRob2Qgd2hpY2ggd2hlbiBpbXBsZW1lbnRlZCBzaG91bGQgcmV0dXJuIHRoZSBjb2RlIG9iamVjdA0KICAgICAgICBmb3IgdGhlIG1vZHVsZS4gIFRoZSBmdWxsbmFtZSBpcyBhIHN0ci4gIFJldHVybnMgYSB0eXBlcy5Db2RlVHlwZS4iIiINCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcg0KDQogICAgQGFiYy5hYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBnZXRfc291cmNlKHNlbGYsIGZ1bGxuYW1lKToNCiAgICAgICAgIiIiQWJzdHJhY3QgbWV0aG9kIHdoaWNoIHNob3VsZCByZXR1cm4gdGhlIHNvdXJjZSBjb2RlIGZvciB0aGUNCiAgICAgICAgbW9kdWxlLiAgVGhlIGZ1bGxuYW1lIGlzIGEgc3RyLiAgUmV0dXJucyBhIHN0ci4iIiINCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcg0KDQpfcmVnaXN0ZXIoSW5zcGVjdExvYWRlciwgbWFjaGluZXJ5LkJ1aWx0aW5JbXBvcnRlciwgbWFjaGluZXJ5LkZyb3plbkltcG9ydGVyLA0KICAgICAgICAgICAgbWFjaGluZXJ5LkV4dGVuc2lvbkZpbGVMb2FkZXIpDQoNCg0KY2xhc3MgRXhlY3V0aW9uTG9hZGVyKEluc3BlY3RMb2FkZXIpOg0KDQogICAgIiIiQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgbG9hZGVycyB0aGF0IHdpc2ggdG8gc3VwcG9ydCB0aGUgZXhlY3V0aW9uIG9mDQogICAgbW9kdWxlcyBhcyBzY3JpcHRzLg0KDQogICAgVGhpcyBBQkMgcmVwcmVzZW50cyBvbmUgb2YgdGhlIG9wdGlvbmFsIHByb3RvY29scyBzcGVjaWZpZWQgaW4gUEVQIDMwMi4NCg0KICAgICIiIg0KDQogICAgQGFiYy5hYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBnZXRfZmlsZW5hbWUoc2VsZiwgZnVsbG5hbWUpOg0KICAgICAgICAiIiJBYnN0cmFjdCBtZXRob2Qgd2hpY2ggc2hvdWxkIHJldHVybiB0aGUgdmFsdWUgdGhhdCBfX2ZpbGVfXyBpcyB0byBiZQ0KICAgICAgICBzZXQgdG8uIiIiDQogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3INCg0KDQpjbGFzcyBGaWxlTG9hZGVyKF9ib290c3RyYXAuRmlsZUxvYWRlciwgUmVzb3VyY2VMb2FkZXIsIEV4ZWN1dGlvbkxvYWRlcik6DQoNCiAgICAiIiJBYnN0cmFjdCBiYXNlIGNsYXNzIHBhcnRpYWxseSBpbXBsZW1lbnRpbmcgdGhlIFJlc291cmNlTG9hZGVyIGFuZA0KICAgIEV4ZWN1dGlvbkxvYWRlciBBQkNzLiIiIg0KDQpfcmVnaXN0ZXIoRmlsZUxvYWRlciwgbWFjaGluZXJ5LlNvdXJjZUZpbGVMb2FkZXIsDQogICAgICAgICAgICBtYWNoaW5lcnkuU291cmNlbGVzc0ZpbGVMb2FkZXIpDQoNCg0KY2xhc3MgU291cmNlTG9hZGVyKF9ib290c3RyYXAuU291cmNlTG9hZGVyLCBSZXNvdXJjZUxvYWRlciwgRXhlY3V0aW9uTG9hZGVyKToNCg0KICAgICIiIkFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGxvYWRpbmcgc291cmNlIGNvZGUgKGFuZCBvcHRpb25hbGx5IGFueQ0KICAgIGNvcnJlc3BvbmRpbmcgYnl0ZWNvZGUpLg0KDQogICAgVG8gc3VwcG9ydCBsb2FkaW5nIGZyb20gc291cmNlIGNvZGUsIHRoZSBhYnN0cmFjdG1ldGhvZHMgaW5oZXJpdGVkIGZyb20NCiAgICBSZXNvdXJjZUxvYWRlciBhbmQgRXhlY3V0aW9uTG9hZGVyIG5lZWQgdG8gYmUgaW1wbGVtZW50ZWQuIFRvIGFsc28gc3VwcG9ydA0KICAgIGxvYWRpbmcgZnJvbSBieXRlY29kZSwgdGhlIG9wdGlvbmFsIG1ldGhvZHMgc3BlY2lmaWVkIGRpcmVjdGx5IGJ5IHRoaXMgQUJDDQogICAgaXMgcmVxdWlyZWQuDQoNCiAgICBJbmhlcml0ZWQgYWJzdHJhY3RtZXRob2RzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGlzIEFCQzoNCg0KICAgICAgICAqIFJlc291cmNlTG9hZGVyLmdldF9kYXRhDQogICAgICAgICogRXhlY3V0aW9uTG9hZGVyLmdldF9maWxlbmFtZQ0KDQogICAgIiIiDQoNCiAgICBkZWYgcGF0aF9tdGltZShzZWxmLCBwYXRoKToNCiAgICAgICAgIiIiUmV0dXJuIHRoZSAoaW50KSBtb2RpZmljYXRpb24gdGltZSBmb3IgdGhlIHBhdGggKHN0cikuIiIiDQogICAgICAgIGlmIHNlbGYucGF0aF9zdGF0cy5fX2Z1bmNfXyBpcyBTb3VyY2VMb2FkZXIucGF0aF9zdGF0czoNCiAgICAgICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3INCiAgICAgICAgcmV0dXJuIGludChzZWxmLnBhdGhfc3RhdHMocGF0aClbJ210aW1lJ10pDQoNCiAgICBkZWYgcGF0aF9zdGF0cyhzZWxmLCBwYXRoKToNCiAgICAgICAgIiIiUmV0dXJuIGEgbWV0YWRhdGEgZGljdCBmb3IgdGhlIHNvdXJjZSBwb2ludGVkIHRvIGJ5IHRoZSBwYXRoIChzdHIpLg0KICAgICAgICBQb3NzaWJsZSBrZXlzOg0KICAgICAgICAtICdtdGltZScgKG1hbmRhdG9yeSkgaXMgdGhlIG51bWVyaWMgdGltZXN0YW1wIG9mIGxhc3Qgc291cmNlDQogICAgICAgICAgY29kZSBtb2RpZmljYXRpb247DQogICAgICAgIC0gJ3NpemUnIChvcHRpb25hbCkgaXMgdGhlIHNpemUgaW4gYnl0ZXMgb2YgdGhlIHNvdXJjZSBjb2RlLg0KICAgICAgICAiIiINCiAgICAgICAgaWYgc2VsZi5wYXRoX210aW1lLl9fZnVuY19fIGlzIFNvdXJjZUxvYWRlci5wYXRoX210aW1lOg0KICAgICAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcg0KICAgICAgICByZXR1cm4geydtdGltZSc6IHNlbGYucGF0aF9tdGltZShwYXRoKX0NCg0KICAgIGRlZiBzZXRfZGF0YShzZWxmLCBwYXRoLCBkYXRhKToNCiAgICAgICAgIiIiV3JpdGUgdGhlIGJ5dGVzIHRvIHRoZSBwYXRoIChpZiBwb3NzaWJsZSkuDQoNCiAgICAgICAgQWNjZXB0cyBhIHN0ciBwYXRoIGFuZCBkYXRhIGFzIGJ5dGVzLg0KDQogICAgICAgIEFueSBuZWVkZWQgaW50ZXJtZWRpYXJ5IGRpcmVjdG9yaWVzIGFyZSB0byBiZSBjcmVhdGVkLiBJZiBmb3Igc29tZQ0KICAgICAgICByZWFzb24gdGhlIGZpbGUgY2Fubm90IGJlIHdyaXR0ZW4gYmVjYXVzZSBvZiBwZXJtaXNzaW9ucywgZmFpbA0KICAgICAgICBzaWxlbnRseS4NCg0KICAgICAgICAiIiINCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcg0KDQpfcmVnaXN0ZXIoU291cmNlTG9hZGVyLCBtYWNoaW5lcnkuU291cmNlRmlsZUxvYWRlcikNCg0KY2xhc3MgUHlMb2FkZXIoU291cmNlTG9hZGVyKToNCg0KICAgICIiIkltcGxlbWVudCB0aGUgZGVwcmVjYXRlZCBQeUxvYWRlciBBQkMgaW4gdGVybXMgb2YgU291cmNlTG9hZGVyLg0KDQogICAgVGhpcyBjbGFzcyBoYXMgYmVlbiBkZXByZWNhdGVkISBJdCBpcyBzbGF0ZWQgZm9yIHJlbW92YWwgaW4gUHl0aG9uIDMuNC4NCiAgICBJZiBjb21wYXRpYmlsaXR5IHdpdGggUHl0aG9uIDMuMSBpcyBub3QgbmVlZGVkIHRoZW4gaW1wbGVtZW50IHRoZQ0KICAgIFNvdXJjZUxvYWRlciBBQkMgaW5zdGVhZCBvZiB0aGlzIGNsYXNzLiBJZiBQeXRob24gMy4xIGNvbXBhdGliaWxpdHkgaXMNCiAgICBuZWVkZWQsIHRoZW4gdXNlIHRoZSBmb2xsb3dpbmcgaWRpb20gdG8gaGF2ZSBhIHNpbmdsZSBjbGFzcyB0aGF0IGlzDQogICAgY29tcGF0aWJsZSB3aXRoIFB5dGhvbiAzLjEgb253YXJkczo6DQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZnJvbSBpbXBvcnRsaWIuYWJjIGltcG9ydCBTb3VyY2VMb2FkZXINCiAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOg0KICAgICAgICAgICAgZnJvbSBpbXBvcnRsaWIuYWJjIGltcG9ydCBQeUxvYWRlciBhcyBTb3VyY2VMb2FkZXINCg0KDQogICAgICAgIGNsYXNzIEN1c3RvbUxvYWRlcihTb3VyY2VMb2FkZXIpOg0KICAgICAgICAgICAgZGVmIGdldF9maWxlbmFtZShzZWxmLCBmdWxsbmFtZSk6DQogICAgICAgICAgICAgICAgIyBJbXBsZW1lbnQgLi4uDQoNCiAgICAgICAgICAgIGRlZiBzb3VyY2VfcGF0aChzZWxmLCBmdWxsbmFtZSk6DQogICAgICAgICAgICAgICAgJycnSW1wbGVtZW50IHNvdXJjZV9wYXRoIGluIHRlcm1zIG9mIGdldF9maWxlbmFtZS4nJycNCiAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldF9maWxlbmFtZShmdWxsbmFtZSkNCiAgICAgICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lDQoNCiAgICAgICAgICAgIGRlZiBpc19wYWNrYWdlKHNlbGYsIGZ1bGxuYW1lKToNCiAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IG9zLnBhdGguYmFzZW5hbWUoc2VsZi5nZXRfZmlsZW5hbWUoZnVsbG5hbWUpKQ0KICAgICAgICAgICAgICAgIHJldHVybiBvcy5wYXRoLnNwbGl0ZXh0KGZpbGVuYW1lKVswXSA9PSAnX19pbml0X18nDQoNCiAgICAiIiINCg0KICAgIEBhYmMuYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgaXNfcGFja2FnZShzZWxmLCBmdWxsbmFtZSk6DQogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3INCg0KICAgIEBhYmMuYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgc291cmNlX3BhdGgoc2VsZiwgZnVsbG5hbWUpOg0KICAgICAgICAiIiJBYnN0cmFjdCBtZXRob2QuICBBY2NlcHRzIGEgc3RyIG1vZHVsZSBuYW1lIGFuZCByZXR1cm5zIHRoZSBwYXRoIHRvDQogICAgICAgIHRoZSBzb3VyY2UgY29kZSBmb3IgdGhlIG1vZHVsZS4iIiINCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcg0KDQogICAgZGVmIGdldF9maWxlbmFtZShzZWxmLCBmdWxsbmFtZSk6DQogICAgICAgICIiIkltcGxlbWVudCBnZXRfZmlsZW5hbWUgaW4gdGVybXMgb2Ygc291cmNlX3BhdGguDQoNCiAgICAgICAgQXMgZ2V0X2ZpbGVuYW1lIHNob3VsZCBvbmx5IHJldHVybiBhIHNvdXJjZSBmaWxlIHBhdGggdGhlcmUgaXMgbm8NCiAgICAgICAgY2hhbmNlIG9mIHRoZSBwYXRoIG5vdCBleGlzdGluZyBidXQgbG9hZGluZyBzdGlsbCBiZWluZyBwb3NzaWJsZSwgc28NCiAgICAgICAgSW1wb3J0RXJyb3Igc2hvdWxkIHByb3BhZ2F0ZSBpbnN0ZWFkIG9mIGJlaW5nIHR1cm5lZCBpbnRvIHJldHVybmluZw0KICAgICAgICBOb25lLg0KDQogICAgICAgICIiIg0KICAgICAgICB3YXJuaW5ncy53YXJuKCJpbXBvcnRsaWIuYWJjLlB5TG9hZGVyIGlzIGRlcHJlY2F0ZWQgYW5kIGlzICINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2xhdGVkIGZvciByZW1vdmFsIGluIFB5dGhvbiAzLjQ7ICINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidXNlIFNvdXJjZUxvYWRlciBpbnN0ZWFkLiAiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNlZSB0aGUgaW1wb3J0bGliIGRvY3VtZW50YXRpb24gb24gaG93IHRvIGJlICINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY29tcGF0aWJsZSB3aXRoIFB5dGhvbiAzLjEgb253YXJkcy4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nKQ0KICAgICAgICBwYXRoID0gc2VsZi5zb3VyY2VfcGF0aChmdWxsbmFtZSkNCiAgICAgICAgaWYgcGF0aCBpcyBOb25lOg0KICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IobmFtZT1mdWxsbmFtZSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBwYXRoDQoNCg0KY2xhc3MgUHlQeWNMb2FkZXIoUHlMb2FkZXIpOg0KDQogICAgIiIiQWJzdHJhY3QgYmFzZSBjbGFzcyB0byBhc3Npc3QgaW4gbG9hZGluZyBzb3VyY2UgYW5kIGJ5dGVjb2RlIGJ5DQogICAgcmVxdWlyaW5nIG9ubHkgYmFjay1lbmQgc3RvcmFnZSBtZXRob2RzIHRvIGJlIGltcGxlbWVudGVkLg0KDQogICAgVGhpcyBjbGFzcyBoYXMgYmVlbiBkZXByZWNhdGVkISBSZW1vdmFsIGlzIHNsYXRlZCBmb3IgUHl0aG9uIDMuNC4gSW1wbGVtZW50DQogICAgdGhlIFNvdXJjZUxvYWRlciBBQkMgaW5zdGVhZC4gSWYgUHl0aG9uIDMuMSBjb21wYXRpYmlsaXR5IGlzIG5lZWRlZCwgc2VlDQogICAgUHlMb2FkZXIuDQoNCiAgICBUaGUgbWV0aG9kcyBnZXRfY29kZSwgZ2V0X3NvdXJjZSwgYW5kIGxvYWRfbW9kdWxlIGFyZSBpbXBsZW1lbnRlZCBmb3IgdGhlDQogICAgdXNlci4NCg0KICAgICIiIg0KDQogICAgZGVmIGdldF9maWxlbmFtZShzZWxmLCBmdWxsbmFtZSk6DQogICAgICAgICIiIlJldHVybiB0aGUgc291cmNlIG9yIGJ5dGVjb2RlIGZpbGUgcGF0aC4iIiINCiAgICAgICAgcGF0aCA9IHNlbGYuc291cmNlX3BhdGgoZnVsbG5hbWUpDQogICAgICAgIGlmIHBhdGggaXMgbm90IE5vbmU6DQogICAgICAgICAgICByZXR1cm4gcGF0aA0KICAgICAgICBwYXRoID0gc2VsZi5ieXRlY29kZV9wYXRoKGZ1bGxuYW1lKQ0KICAgICAgICBpZiBwYXRoIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIHBhdGgNCiAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoIm5vIHNvdXJjZSBvciBieXRlY29kZSBwYXRoIGF2YWlsYWJsZSBmb3IgIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ7MCFyfSIuZm9ybWF0KGZ1bGxuYW1lKSwgbmFtZT1mdWxsbmFtZSkNCg0KICAgIGRlZiBnZXRfY29kZShzZWxmLCBmdWxsbmFtZSk6DQogICAgICAgICIiIkdldCBhIGNvZGUgb2JqZWN0IGZyb20gc291cmNlIG9yIGJ5dGVjb2RlLiIiIg0KICAgICAgICB3YXJuaW5ncy53YXJuKCJpbXBvcnRsaWIuYWJjLlB5UHljTG9hZGVyIGlzIGRlcHJlY2F0ZWQgYW5kIHNsYXRlZCBmb3IgIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJyZW1vdmFsIGluIFB5dGhvbiAzLjQ7IHVzZSBTb3VyY2VMb2FkZXIgaW5zdGVhZC4gIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJZiBQeXRob24gMy4xIGNvbXBhdGliaWxpdHkgaXMgcmVxdWlyZWQsIHNlZSB0aGUgIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJsYXRlc3QgZG9jdW1lbnRhdGlvbiBmb3IgUHlMb2FkZXIuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZykNCiAgICAgICAgc291cmNlX3RpbWVzdGFtcCA9IHNlbGYuc291cmNlX210aW1lKGZ1bGxuYW1lKQ0KICAgICAgICAjIFRyeSB0byB1c2UgYnl0ZWNvZGUgaWYgaXQgaXMgYXZhaWxhYmxlLg0KICAgICAgICBieXRlY29kZV9wYXRoID0gc2VsZi5ieXRlY29kZV9wYXRoKGZ1bGxuYW1lKQ0KICAgICAgICBpZiBieXRlY29kZV9wYXRoOg0KICAgICAgICAgICAgZGF0YSA9IHNlbGYuZ2V0X2RhdGEoYnl0ZWNvZGVfcGF0aCkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBtYWdpYyA9IGRhdGFbOjRdDQogICAgICAgICAgICAgICAgaWYgbGVuKG1hZ2ljKSA8IDQ6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKA0KICAgICAgICAgICAgICAgICAgICAgICAgImJhZCBtYWdpYyBudW1iZXIgaW4ge30iLmZvcm1hdChmdWxsbmFtZSksDQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lPWZ1bGxuYW1lLCBwYXRoPWJ5dGVjb2RlX3BhdGgpDQogICAgICAgICAgICAgICAgcmF3X3RpbWVzdGFtcCA9IGRhdGFbNDo4XQ0KICAgICAgICAgICAgICAgIGlmIGxlbihyYXdfdGltZXN0YW1wKSA8IDQ6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIEVPRkVycm9yKCJiYWQgdGltZXN0YW1wIGluIHt9Ii5mb3JtYXQoZnVsbG5hbWUpKQ0KICAgICAgICAgICAgICAgIHB5Y190aW1lc3RhbXAgPSBfYm9vdHN0cmFwLl9yX2xvbmcocmF3X3RpbWVzdGFtcCkNCiAgICAgICAgICAgICAgICByYXdfc291cmNlX3NpemUgPSBkYXRhWzg6MTJdDQogICAgICAgICAgICAgICAgaWYgbGVuKHJhd19zb3VyY2Vfc2l6ZSkgIT0gNDoNCiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRU9GRXJyb3IoImJhZCBmaWxlIHNpemUgaW4ge30iLmZvcm1hdChmdWxsbmFtZSkpDQogICAgICAgICAgICAgICAgIyBTb3VyY2Ugc2l6ZSBpcyB1bnVzZWQgYXMgdGhlIEFCQyBkb2VzIG5vdCBwcm92aWRlIGEgd2F5IHRvDQogICAgICAgICAgICAgICAgIyBnZXQgdGhlIHNpemUgb2YgdGhlIHNvdXJjZSBhaGVhZCBvZiByZWFkaW5nIGl0Lg0KICAgICAgICAgICAgICAgIGJ5dGVjb2RlID0gZGF0YVsxMjpdDQogICAgICAgICAgICAgICAgIyBWZXJpZnkgdGhhdCB0aGUgbWFnaWMgbnVtYmVyIGlzIHZhbGlkLg0KICAgICAgICAgICAgICAgIGlmIGltcC5nZXRfbWFnaWMoKSAhPSBtYWdpYzoNCiAgICAgICAgICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoDQogICAgICAgICAgICAgICAgICAgICAgICAiYmFkIG1hZ2ljIG51bWJlciBpbiB7fSIuZm9ybWF0KGZ1bGxuYW1lKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9ZnVsbG5hbWUsIHBhdGg9Ynl0ZWNvZGVfcGF0aCkNCiAgICAgICAgICAgICAgICAjIFZlcmlmeSB0aGF0IHRoZSBieXRlY29kZSBpcyBub3Qgc3RhbGUgKG9ubHkgbWF0dGVycyB3aGVuDQogICAgICAgICAgICAgICAgIyB0aGVyZSBpcyBzb3VyY2UgdG8gZmFsbCBiYWNrIG9uLg0KICAgICAgICAgICAgICAgIGlmIHNvdXJjZV90aW1lc3RhbXA6DQogICAgICAgICAgICAgICAgICAgIGlmIHB5Y190aW1lc3RhbXAgPCBzb3VyY2VfdGltZXN0YW1wOg0KICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoImJ5dGVjb2RlIGlzIHN0YWxlIiwgbmFtZT1mdWxsbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg9Ynl0ZWNvZGVfcGF0aCkNCiAgICAgICAgICAgIGV4Y2VwdCAoSW1wb3J0RXJyb3IsIEVPRkVycm9yKToNCiAgICAgICAgICAgICAgICAjIElmIHNvdXJjZSBpcyBhdmFpbGFibGUgZ2l2ZSBpdCBhIHNob3QuDQogICAgICAgICAgICAgICAgaWYgc291cmNlX3RpbWVzdGFtcCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICMgQnl0ZWNvZGUgc2VlbXMgZmluZSwgc28gdHJ5IHRvIHVzZSBpdC4NCiAgICAgICAgICAgICAgICByZXR1cm4gbWFyc2hhbC5sb2FkcyhieXRlY29kZSkNCiAgICAgICAgZWxpZiBzb3VyY2VfdGltZXN0YW1wIGlzIE5vbmU6DQogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcigibm8gc291cmNlIG9yIGJ5dGVjb2RlIGF2YWlsYWJsZSB0byBjcmVhdGUgY29kZSAiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib2JqZWN0IGZvciB7MCFyfSIuZm9ybWF0KGZ1bGxuYW1lKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9ZnVsbG5hbWUpDQogICAgICAgICMgVXNlIHRoZSBzb3VyY2UuDQogICAgICAgIHNvdXJjZV9wYXRoID0gc2VsZi5zb3VyY2VfcGF0aChmdWxsbmFtZSkNCiAgICAgICAgaWYgc291cmNlX3BhdGggaXMgTm9uZToNCiAgICAgICAgICAgIG1lc3NhZ2UgPSAiYSBzb3VyY2UgcGF0aCBtdXN0IGV4aXN0IHRvIGxvYWQgezB9Ii5mb3JtYXQoZnVsbG5hbWUpDQogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcihtZXNzYWdlLCBuYW1lPWZ1bGxuYW1lKQ0KICAgICAgICBzb3VyY2UgPSBzZWxmLmdldF9kYXRhKHNvdXJjZV9wYXRoKQ0KICAgICAgICBjb2RlX29iamVjdCA9IGNvbXBpbGUoc291cmNlLCBzb3VyY2VfcGF0aCwgJ2V4ZWMnLCBkb250X2luaGVyaXQ9VHJ1ZSkNCiAgICAgICAgIyBHZW5lcmF0ZSBieXRlY29kZSBhbmQgd3JpdGUgaXQgb3V0Lg0KICAgICAgICBpZiBub3Qgc3lzLmRvbnRfd3JpdGVfYnl0ZWNvZGU6DQogICAgICAgICAgICBkYXRhID0gYnl0ZWFycmF5KGltcC5nZXRfbWFnaWMoKSkNCiAgICAgICAgICAgIGRhdGEuZXh0ZW5kKF9ib290c3RyYXAuX3dfbG9uZyhzb3VyY2VfdGltZXN0YW1wKSkNCiAgICAgICAgICAgIGRhdGEuZXh0ZW5kKF9ib290c3RyYXAuX3dfbG9uZyhsZW4oc291cmNlKSAmIDB4RkZGRkZGRkYpKQ0KICAgICAgICAgICAgZGF0YS5leHRlbmQobWFyc2hhbC5kdW1wcyhjb2RlX29iamVjdCkpDQogICAgICAgICAgICBzZWxmLndyaXRlX2J5dGVjb2RlKGZ1bGxuYW1lLCBkYXRhKQ0KICAgICAgICByZXR1cm4gY29kZV9vYmplY3QNCg0KICAgIEBhYmMuYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgc291cmNlX210aW1lKHNlbGYsIGZ1bGxuYW1lKToNCiAgICAgICAgIiIiQWJzdHJhY3QgbWV0aG9kLiBBY2NlcHRzIGEgc3RyIGZpbGVuYW1lIGFuZCByZXR1cm5zIGFuIGludA0KICAgICAgICBtb2RpZmljYXRpb24gdGltZSBmb3IgdGhlIHNvdXJjZSBvZiB0aGUgbW9kdWxlLiIiIg0KICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yDQoNCiAgICBAYWJjLmFic3RyYWN0bWV0aG9kDQogICAgZGVmIGJ5dGVjb2RlX3BhdGgoc2VsZiwgZnVsbG5hbWUpOg0KICAgICAgICAiIiJBYnN0cmFjdCBtZXRob2QuIEFjY2VwdHMgYSBzdHIgZmlsZW5hbWUgYW5kIHJldHVybnMgdGhlIHN0ciBwYXRobmFtZQ0KICAgICAgICB0byB0aGUgYnl0ZWNvZGUgZm9yIHRoZSBtb2R1bGUuIiIiDQogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3INCg0KICAgIEBhYmMuYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgd3JpdGVfYnl0ZWNvZGUoc2VsZiwgZnVsbG5hbWUsIGJ5dGVjb2RlKToNCiAgICAgICAgIiIiQWJzdHJhY3QgbWV0aG9kLiAgQWNjZXB0cyBhIHN0ciBmaWxlbmFtZSBhbmQgYnl0ZXMgb2JqZWN0DQogICAgICAgIHJlcHJlc2VudGluZyB0aGUgYnl0ZWNvZGUgZm9yIHRoZSBtb2R1bGUuICBSZXR1cm5zIGEgYm9vbGVhbg0KICAgICAgICByZXByZXNlbnRpbmcgd2hldGhlciB0aGUgYnl0ZWNvZGUgd2FzIHdyaXR0ZW4gb3Igbm90LiIiIg0KICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yDQo=',
'/Lib/importlib/machinery.py':'IiIiVGhlIG1hY2hpbmVyeSBvZiBpbXBvcnRsaWI6IGZpbmRlcnMsIGxvYWRlcnMsIGhvb2tzLCBldGMuIiIiDQoNCmltcG9ydCBfaW1wDQoNCmZyb20gLl9ib290c3RyYXAgaW1wb3J0IChTT1VSQ0VfU1VGRklYRVMsIERFQlVHX0JZVEVDT0RFX1NVRkZJWEVTLA0KICAgICAgICAgICAgICAgICAgICAgICAgIE9QVElNSVpFRF9CWVRFQ09ERV9TVUZGSVhFUywgQllURUNPREVfU1VGRklYRVMsDQogICAgICAgICAgICAgICAgICAgICAgICAgRVhURU5TSU9OX1NVRkZJWEVTKQ0KZnJvbSAuX2Jvb3RzdHJhcCBpbXBvcnQgQnVpbHRpbkltcG9ydGVyDQpmcm9tIC5fYm9vdHN0cmFwIGltcG9ydCBGcm96ZW5JbXBvcnRlcg0KZnJvbSAuX2Jvb3RzdHJhcCBpbXBvcnQgV2luZG93c1JlZ2lzdHJ5RmluZGVyDQpmcm9tIC5fYm9vdHN0cmFwIGltcG9ydCBQYXRoRmluZGVyDQpmcm9tIC5fYm9vdHN0cmFwIGltcG9ydCBGaWxlRmluZGVyDQpmcm9tIC5fYm9vdHN0cmFwIGltcG9ydCBTb3VyY2VGaWxlTG9hZGVyDQpmcm9tIC5fYm9vdHN0cmFwIGltcG9ydCBTb3VyY2VsZXNzRmlsZUxvYWRlcg0KZnJvbSAuX2Jvb3RzdHJhcCBpbXBvcnQgRXh0ZW5zaW9uRmlsZUxvYWRlcg0KDQoNCmRlZiBhbGxfc3VmZml4ZXMoKToNCiAgICAiIiJSZXR1cm5zIGEgbGlzdCBvZiBhbGwgcmVjb2duaXplZCBtb2R1bGUgc3VmZml4ZXMgZm9yIHRoaXMgcHJvY2VzcyIiIg0KICAgIHJldHVybiBTT1VSQ0VfU1VGRklYRVMgKyBCWVRFQ09ERV9TVUZGSVhFUyArIEVYVEVOU0lPTl9TVUZGSVhFUw0K',
'/Lib/importlib/_bootstrap.py':'IiIiQ29yZSBpbXBsZW1lbnRhdGlvbiBvZiBpbXBvcnQuCgpUaGlzIG1vZHVsZSBpcyBOT1QgbWVhbnQgdG8gYmUgZGlyZWN0bHkgaW1wb3J0ZWQhIEl0IGhhcyBiZWVuIGRlc2lnbmVkIHN1Y2gKdGhhdCBpdCBjYW4gYmUgYm9vdHN0cmFwcGVkIGludG8gUHl0aG9uIGFzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBpbXBvcnQuIEFzCnN1Y2ggaXQgcmVxdWlyZXMgdGhlIGluamVjdGlvbiBvZiBzcGVjaWZpYyBtb2R1bGVzIGFuZCBhdHRyaWJ1dGVzIGluIG9yZGVyIHRvCndvcmsuIE9uZSBzaG91bGQgdXNlIGltcG9ydGxpYiBhcyB0aGUgcHVibGljLWZhY2luZyB2ZXJzaW9uIG9mIHRoaXMgbW9kdWxlLgoKIiIiCiMKIyBJTVBPUlRBTlQ6IFdoZW5ldmVyIG1ha2luZyBjaGFuZ2VzIHRvIHRoaXMgbW9kdWxlLCBiZSBzdXJlIHRvIHJ1bgojIGEgdG9wLWxldmVsIG1ha2UgaW4gb3JkZXIgdG8gZ2V0IHRoZSBmcm96ZW4gdmVyc2lvbiBvZiB0aGUgbW9kdWxlCiMgdXBkYXRlLiBOb3QgZG9pbmcgc28sIHdpbGwgcmVzdWx0IGluIHRoZSBNYWtlZmlsZSB0byBmYWlsIGZvcgojIGFsbCBvdGhlcnMgd2hvIGRvbid0IGhhdmUgYSAuL3B5dGhvbiBhcm91bmQgdG8gZnJlZXplIHRoZSBtb2R1bGUKIyBpbiB0aGUgZWFybHkgc3RhZ2VzIG9mIGNvbXBpbGF0aW9uLgojCgojIFNlZSBpbXBvcnRsaWIuX3NldHVwKCkgZm9yIHdoYXQgaXMgaW5qZWN0ZWQgaW50byB0aGUgZ2xvYmFsIG5hbWVzcGFjZS4KCiMgV2hlbiBlZGl0aW5nIHRoaXMgY29kZSBiZSBhd2FyZSB0aGF0IGNvZGUgZXhlY3V0ZWQgYXQgaW1wb3J0IHRpbWUgQ0FOTk9UCiMgcmVmZXJlbmNlIGFueSBpbmplY3RlZCBvYmplY3RzISBUaGlzIGluY2x1ZGVzIG5vdCBvbmx5IGdsb2JhbCBjb2RlIGJ1dCBhbHNvCiMgYW55dGhpbmcgc3BlY2lmaWVkIGF0IHRoZSBjbGFzcyBsZXZlbC4KCiMgWFhYIE1ha2Ugc3VyZSBhbGwgcHVibGljIG5hbWVzIGhhdmUgbm8gc2luZ2xlIGxlYWRpbmcgdW5kZXJzY29yZSBhbmQgYWxsCiMgICAgIG90aGVycyBkby4KCgojIEJvb3RzdHJhcC1yZWxhdGVkIGNvZGUgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpfQ0FTRV9JTlNFTlNJVElWRV9QTEFURk9STVMgPSAnd2luJywgJ2N5Z3dpbicsICdkYXJ3aW4nCgoKZGVmIF9tYWtlX3JlbGF4X2Nhc2UoKToKICAgIGlmIHN5cy5wbGF0Zm9ybS5zdGFydHN3aXRoKF9DQVNFX0lOU0VOU0lUSVZFX1BMQVRGT1JNUyk6CiAgICAgICAgZGVmIF9yZWxheF9jYXNlKCk6CiAgICAgICAgICAgICIiIlRydWUgaWYgZmlsZW5hbWVzIG11c3QgYmUgY2hlY2tlZCBjYXNlLWluc2Vuc2l0aXZlbHkuIiIiCiAgICAgICAgICAgIHJldHVybiBiJ1BZVEhPTkNBU0VPSycgaW4gX29zLmVudmlyb24KICAgIGVsc2U6CiAgICAgICAgZGVmIF9yZWxheF9jYXNlKCk6CiAgICAgICAgICAgICIiIlRydWUgaWYgZmlsZW5hbWVzIG11c3QgYmUgY2hlY2tlZCBjYXNlLWluc2Vuc2l0aXZlbHkuIiIiCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgcmV0dXJuIF9yZWxheF9jYXNlCgoKIyBUT0RPOiBFeHBvc2UgZnJvbSBtYXJzaGFsCmRlZiBfd19sb25nKHgpOgogICAgIiIiQ29udmVydCBhIDMyLWJpdCBpbnRlZ2VyIHRvIGxpdHRsZS1lbmRpYW4uCgogICAgWFhYIFRlbXBvcmFyeSB1bnRpbCBtYXJzaGFsJ3MgbG9uZyBmdW5jdGlvbnMgYXJlIGV4cG9zZWQuCgogICAgIiIiCiAgICB4ID0gaW50KHgpCiAgICBpbnRfYnl0ZXMgPSBbXQogICAgaW50X2J5dGVzLmFwcGVuZCh4ICYgMHhGRikKICAgIGludF9ieXRlcy5hcHBlbmQoKHggPj4gOCkgJiAweEZGKQogICAgaW50X2J5dGVzLmFwcGVuZCgoeCA+PiAxNikgJiAweEZGKQogICAgaW50X2J5dGVzLmFwcGVuZCgoeCA+PiAyNCkgJiAweEZGKQogICAgcmV0dXJuIGJ5dGVhcnJheShpbnRfYnl0ZXMpCgoKIyBUT0RPOiBFeHBvc2UgZnJvbSBtYXJzaGFsCmRlZiBfcl9sb25nKGludF9ieXRlcyk6CiAgICAiIiJDb252ZXJ0IDQgYnl0ZXMgaW4gbGl0dGxlLWVuZGlhbiB0byBhbiBpbnRlZ2VyLgoKICAgIFhYWCBUZW1wb3JhcnkgdW50aWwgbWFyc2hhbCdzIGxvbmcgZnVuY3Rpb24gYXJlIGV4cG9zZWQuCgogICAgIiIiCiAgICB4ID0gaW50X2J5dGVzWzBdCiAgICB4IHw9IGludF9ieXRlc1sxXSA8PCA4CiAgICB4IHw9IGludF9ieXRlc1syXSA8PCAxNgogICAgeCB8PSBpbnRfYnl0ZXNbM10gPDwgMjQKICAgIHJldHVybiB4CgoKZGVmIF9wYXRoX2pvaW4oKnBhdGhfcGFydHMpOgogICAgIiIiUmVwbGFjZW1lbnQgZm9yIG9zLnBhdGguam9pbigpLiIiIgogICAgbmV3X3BhcnRzID0gW10KICAgIGZvciBwYXJ0IGluIHBhdGhfcGFydHM6CiAgICAgICAgaWYgbm90IHBhcnQ6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgbmV3X3BhcnRzLmFwcGVuZChwYXJ0KQogICAgICAgIGlmIHBhcnRbLTFdIG5vdCBpbiBwYXRoX3NlcGFyYXRvcnM6CiAgICAgICAgICAgIG5ld19wYXJ0cy5hcHBlbmQocGF0aF9zZXApCiAgICByZXR1cm4gJycuam9pbihuZXdfcGFydHNbOi0xXSkgICMgRHJvcCBzdXBlcmZsdW91cyBwYXRoIHNlcGFyYXRvci4KCgpkZWYgX3BhdGhfc3BsaXQocGF0aCk6CiAgICAiIiJSZXBsYWNlbWVudCBmb3Igb3MucGF0aC5zcGxpdCgpLiIiIgogICAgZm9yIHggaW4gcmV2ZXJzZWQocGF0aCk6CiAgICAgICAgaWYgeCBpbiBwYXRoX3NlcGFyYXRvcnM6CiAgICAgICAgICAgIHNlcCA9IHgKICAgICAgICAgICAgYnJlYWsKICAgIGVsc2U6CiAgICAgICAgc2VwID0gcGF0aF9zZXAKICAgIGZyb250LCBfLCB0YWlsID0gcGF0aC5ycGFydGl0aW9uKHNlcCkKICAgIHJldHVybiBmcm9udCwgdGFpbAoKCmRlZiBfcGF0aF9pc19tb2RlX3R5cGUocGF0aCwgbW9kZSk6CiAgICAiIiJUZXN0IHdoZXRoZXIgdGhlIHBhdGggaXMgdGhlIHNwZWNpZmllZCBtb2RlIHR5cGUuIiIiCiAgICB0cnk6CiAgICAgICAgc3RhdF9pbmZvID0gX29zLnN0YXQocGF0aCkKICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgIHJldHVybiBGYWxzZQogICAgcmV0dXJuIChzdGF0X2luZm8uc3RfbW9kZSAmIDBvMTcwMDAwKSA9PSBtb2RlCgoKIyBYWFggQ291bGQgYWxzbyBleHBvc2UgTW9kdWxlcy9nZXRwYXRoLmM6aXNmaWxlKCkKZGVmIF9wYXRoX2lzZmlsZShwYXRoKToKICAgICIiIlJlcGxhY2VtZW50IGZvciBvcy5wYXRoLmlzZmlsZS4iIiIKICAgIHJldHVybiBfcGF0aF9pc19tb2RlX3R5cGUocGF0aCwgMG8xMDAwMDApCgoKIyBYWFggQ291bGQgYWxzbyBleHBvc2UgTW9kdWxlcy9nZXRwYXRoLmM6aXNkaXIoKQpkZWYgX3BhdGhfaXNkaXIocGF0aCk6CiAgICAiIiJSZXBsYWNlbWVudCBmb3Igb3MucGF0aC5pc2Rpci4iIiIKICAgIGlmIG5vdCBwYXRoOgogICAgICAgIHBhdGggPSBfb3MuZ2V0Y3dkKCkKICAgIHJldHVybiBfcGF0aF9pc19tb2RlX3R5cGUocGF0aCwgMG8wNDAwMDApCgoKZGVmIF93cml0ZV9hdG9taWMocGF0aCwgZGF0YSwgbW9kZT0wbzY2Nik6CiAgICAiIiJCZXN0LWVmZm9ydCBmdW5jdGlvbiB0byB3cml0ZSBkYXRhIHRvIGEgcGF0aCBhdG9taWNhbGx5LgogICAgQmUgcHJlcGFyZWQgdG8gaGFuZGxlIGEgRmlsZUV4aXN0c0Vycm9yIGlmIGNvbmN1cnJlbnQgd3JpdGluZyBvZiB0aGUKICAgIHRlbXBvcmFyeSBmaWxlIGlzIGF0dGVtcHRlZC4iIiIKICAgICMgaWQoKSBpcyB1c2VkIHRvIGdlbmVyYXRlIGEgcHNldWRvLXJhbmRvbSBmaWxlbmFtZS4KICAgIHBhdGhfdG1wID0gJ3t9Lnt9Jy5mb3JtYXQocGF0aCwgaWQocGF0aCkpCiAgICBmZCA9IF9vcy5vcGVuKHBhdGhfdG1wLAogICAgICAgICAgICAgICAgICBfb3MuT19FWENMIHwgX29zLk9fQ1JFQVQgfCBfb3MuT19XUk9OTFksIG1vZGUgJiAwbzY2NikKICAgIHRyeToKICAgICAgICAjIFdlIGZpcnN0IHdyaXRlIGRhdGEgdG8gYSB0ZW1wb3JhcnkgZmlsZSwgYW5kIHRoZW4gdXNlIG9zLnJlcGxhY2UoKSB0bwogICAgICAgICMgcGVyZm9ybSBhbiBhdG9taWMgcmVuYW1lLgogICAgICAgIHdpdGggX2lvLkZpbGVJTyhmZCwgJ3diJykgYXMgZmlsZToKICAgICAgICAgICAgZmlsZS53cml0ZShkYXRhKQogICAgICAgIF9vcy5yZXBsYWNlKHBhdGhfdG1wLCBwYXRoKQogICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBfb3MudW5saW5rKHBhdGhfdG1wKQogICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICBwYXNzCiAgICAgICAgcmFpc2UKCgpkZWYgX3dyYXAobmV3LCBvbGQpOgogICAgIiIiU2ltcGxlIHN1YnN0aXR1dGUgZm9yIGZ1bmN0b29scy51cGRhdGVfd3JhcHBlci4iIiIKICAgIGZvciByZXBsYWNlIGluIFsnX19tb2R1bGVfXycsICdfX25hbWVfXycsICdfX3F1YWxuYW1lX18nLCAnX19kb2NfXyddOgogICAgICAgIGlmIGhhc2F0dHIob2xkLCByZXBsYWNlKToKICAgICAgICAgICAgc2V0YXR0cihuZXcsIHJlcGxhY2UsIGdldGF0dHIob2xkLCByZXBsYWNlKSkKICAgIG5ldy5fX2RpY3RfXy51cGRhdGUob2xkLl9fZGljdF9fKQoKCl9jb2RlX3R5cGUgPSB0eXBlKF93cmFwLl9fY29kZV9fKQoKCmRlZiBuZXdfbW9kdWxlKG5hbWUpOgogICAgIiIiQ3JlYXRlIGEgbmV3IG1vZHVsZS4KCiAgICBUaGUgbW9kdWxlIGlzIG5vdCBlbnRlcmVkIGludG8gc3lzLm1vZHVsZXMuCgogICAgIiIiCiAgICByZXR1cm4gdHlwZShfaW8pKG5hbWUpCgoKIyBNb2R1bGUtbGV2ZWwgbG9ja2luZyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyBBIGRpY3QgbWFwcGluZyBtb2R1bGUgbmFtZXMgdG8gd2Vha3JlZnMgb2YgX01vZHVsZUxvY2sgaW5zdGFuY2VzCl9tb2R1bGVfbG9ja3MgPSB7fQojIEEgZGljdCBtYXBwaW5nIHRocmVhZCBpZHMgdG8gX01vZHVsZUxvY2sgaW5zdGFuY2VzCl9ibG9ja2luZ19vbiA9IHt9CgoKY2xhc3MgX0RlYWRsb2NrRXJyb3IoUnVudGltZUVycm9yKToKICAgIHBhc3MKCgpjbGFzcyBfTW9kdWxlTG9jazoKICAgICIiIkEgcmVjdXJzaXZlIGxvY2sgaW1wbGVtZW50YXRpb24gd2hpY2ggaXMgYWJsZSB0byBkZXRlY3QgZGVhZGxvY2tzCiAgICAoZS5nLiB0aHJlYWQgMSB0cnlpbmcgdG8gdGFrZSBsb2NrcyBBIHRoZW4gQiwgYW5kIHRocmVhZCAyIHRyeWluZyB0bwogICAgdGFrZSBsb2NrcyBCIHRoZW4gQSkuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSk6CiAgICAgICAgc2VsZi5sb2NrID0gX3RocmVhZC5hbGxvY2F0ZV9sb2NrKCkKICAgICAgICBzZWxmLndha2V1cCA9IF90aHJlYWQuYWxsb2NhdGVfbG9jaygpCiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQogICAgICAgIHNlbGYub3duZXIgPSBOb25lCiAgICAgICAgc2VsZi5jb3VudCA9IDAKICAgICAgICBzZWxmLndhaXRlcnMgPSAwCgogICAgZGVmIGhhc19kZWFkbG9jayhzZWxmKToKICAgICAgICAjIERlYWRsb2NrIGF2b2lkYW5jZSBmb3IgY29uY3VycmVudCBjaXJjdWxhciBpbXBvcnRzLgogICAgICAgIG1lID0gX3RocmVhZC5nZXRfaWRlbnQoKQogICAgICAgIHRpZCA9IHNlbGYub3duZXIKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICBsb2NrID0gX2Jsb2NraW5nX29uLmdldCh0aWQpCiAgICAgICAgICAgIGlmIGxvY2sgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICB0aWQgPSBsb2NrLm93bmVyCiAgICAgICAgICAgIGlmIHRpZCA9PSBtZToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIGFjcXVpcmUoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgQWNxdWlyZSB0aGUgbW9kdWxlIGxvY2suICBJZiBhIHBvdGVudGlhbCBkZWFkbG9jayBpcyBkZXRlY3RlZCwKICAgICAgICBhIF9EZWFkbG9ja0Vycm9yIGlzIHJhaXNlZC4KICAgICAgICBPdGhlcndpc2UsIHRoZSBsb2NrIGlzIGFsd2F5cyBhY3F1aXJlZCBhbmQgVHJ1ZSBpcyByZXR1cm5lZC4KICAgICAgICAiIiIKICAgICAgICB0aWQgPSBfdGhyZWFkLmdldF9pZGVudCgpCiAgICAgICAgX2Jsb2NraW5nX29uW3RpZF0gPSBzZWxmCiAgICAgICAgdHJ5OgogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgd2l0aCBzZWxmLmxvY2s6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5jb3VudCA9PSAwIG9yIHNlbGYub3duZXIgPT0gdGlkOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm93bmVyID0gdGlkCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY291bnQgKz0gMQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuaGFzX2RlYWRsb2NrKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIF9EZWFkbG9ja0Vycm9yKCJkZWFkbG9jayBkZXRlY3RlZCBieSAlciIgJSBzZWxmKQogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYud2FrZXVwLmFjcXVpcmUoRmFsc2UpOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLndhaXRlcnMgKz0gMQogICAgICAgICAgICAgICAgIyBXYWl0IGZvciBhIHJlbGVhc2UoKSBjYWxsCiAgICAgICAgICAgICAgICBzZWxmLndha2V1cC5hY3F1aXJlKCkKICAgICAgICAgICAgICAgIHNlbGYud2FrZXVwLnJlbGVhc2UoKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIGRlbCBfYmxvY2tpbmdfb25bdGlkXQoKICAgIGRlZiByZWxlYXNlKHNlbGYpOgogICAgICAgIHRpZCA9IF90aHJlYWQuZ2V0X2lkZW50KCkKICAgICAgICB3aXRoIHNlbGYubG9jazoKICAgICAgICAgICAgaWYgc2VsZi5vd25lciAhPSB0aWQ6CiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoImNhbm5vdCByZWxlYXNlIHVuLWFjcXVpcmVkIGxvY2siKQogICAgICAgICAgICBhc3NlcnQgc2VsZi5jb3VudCA+IDAKICAgICAgICAgICAgc2VsZi5jb3VudCAtPSAxCiAgICAgICAgICAgIGlmIHNlbGYuY291bnQgPT0gMDoKICAgICAgICAgICAgICAgIHNlbGYub3duZXIgPSBOb25lCiAgICAgICAgICAgICAgICBpZiBzZWxmLndhaXRlcnM6CiAgICAgICAgICAgICAgICAgICAgc2VsZi53YWl0ZXJzIC09IDEKICAgICAgICAgICAgICAgICAgICBzZWxmLndha2V1cC5yZWxlYXNlKCkKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICJfTW9kdWxlTG9jayglcikgYXQgJWQiICUgKHNlbGYubmFtZSwgaWQoc2VsZikpCgoKY2xhc3MgX0R1bW15TW9kdWxlTG9jazoKICAgICIiIkEgc2ltcGxlIF9Nb2R1bGVMb2NrIGVxdWl2YWxlbnQgZm9yIFB5dGhvbiBidWlsZHMgd2l0aG91dAogICAgbXVsdGktdGhyZWFkaW5nIHN1cHBvcnQuIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUpOgogICAgICAgIHNlbGYubmFtZSA9IG5hbWUKICAgICAgICBzZWxmLmNvdW50ID0gMAoKICAgIGRlZiBhY3F1aXJlKHNlbGYpOgogICAgICAgIHNlbGYuY291bnQgKz0gMQogICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIHJlbGVhc2Uoc2VsZik6CiAgICAgICAgaWYgc2VsZi5jb3VudCA9PSAwOgogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoImNhbm5vdCByZWxlYXNlIHVuLWFjcXVpcmVkIGxvY2siKQogICAgICAgIHNlbGYuY291bnQgLT0gMQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIl9EdW1teU1vZHVsZUxvY2soJXIpIGF0ICVkIiAlIChzZWxmLm5hbWUsIGlkKHNlbGYpKQoKCiMgVGhlIGZvbGxvd2luZyB0d28gZnVuY3Rpb25zIGFyZSBmb3IgY29uc3VtcHRpb24gYnkgUHl0aG9uL2ltcG9ydC5jLgoKZGVmIF9nZXRfbW9kdWxlX2xvY2sobmFtZSk6CiAgICAiIiJHZXQgb3IgY3JlYXRlIHRoZSBtb2R1bGUgbG9jayBmb3IgYSBnaXZlbiBtb2R1bGUgbmFtZS4KCiAgICBTaG91bGQgb25seSBiZSBjYWxsZWQgd2l0aCB0aGUgaW1wb3J0IGxvY2sgdGFrZW4uIiIiCiAgICBsb2NrID0gTm9uZQogICAgaWYgbmFtZSBpbiBfbW9kdWxlX2xvY2tzOgogICAgICAgIGxvY2sgPSBfbW9kdWxlX2xvY2tzW25hbWVdKCkKICAgIGlmIGxvY2sgaXMgTm9uZToKICAgICAgICBpZiBfdGhyZWFkIGlzIE5vbmU6CiAgICAgICAgICAgIGxvY2sgPSBfRHVtbXlNb2R1bGVMb2NrKG5hbWUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbG9jayA9IF9Nb2R1bGVMb2NrKG5hbWUpCiAgICAgICAgZGVmIGNiKF8pOgogICAgICAgICAgICBkZWwgX21vZHVsZV9sb2Nrc1tuYW1lXQogICAgICAgIF9tb2R1bGVfbG9ja3NbbmFtZV0gPSBfd2Vha3JlZi5yZWYobG9jaywgY2IpCiAgICByZXR1cm4gbG9jawoKZGVmIF9sb2NrX3VubG9ja19tb2R1bGUobmFtZSk6CiAgICAiIiJSZWxlYXNlIHRoZSBnbG9iYWwgaW1wb3J0IGxvY2ssIGFuZCBhY3F1aXJlcyB0aGVuIHJlbGVhc2UgdGhlCiAgICBtb2R1bGUgbG9jayBmb3IgYSBnaXZlbiBtb2R1bGUgbmFtZS4KICAgIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgYSBtb2R1bGUgaXMgY29tcGxldGVseSBpbml0aWFsaXplZCwgaW4gdGhlCiAgICBldmVudCBpdCBpcyBiZWluZyBpbXBvcnRlZCBieSBhbm90aGVyIHRocmVhZC4KCiAgICBTaG91bGQgb25seSBiZSBjYWxsZWQgd2l0aCB0aGUgaW1wb3J0IGxvY2sgdGFrZW4uIiIiCiAgICBsb2NrID0gX2dldF9tb2R1bGVfbG9jayhuYW1lKQogICAgX2ltcC5yZWxlYXNlX2xvY2soKQogICAgdHJ5OgogICAgICAgIGxvY2suYWNxdWlyZSgpCiAgICBleGNlcHQgX0RlYWRsb2NrRXJyb3I6CiAgICAgICAgIyBDb25jdXJyZW50IGNpcmN1bGFyIGltcG9ydCwgd2UnbGwgYWNjZXB0IGEgcGFydGlhbGx5IGluaXRpYWxpemVkCiAgICAgICAgIyBtb2R1bGUgb2JqZWN0LgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgbG9jay5yZWxlYXNlKCkKCiMgRnJhbWUgc3RyaXBwaW5nIG1hZ2ljICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWYgX2NhbGxfd2l0aF9mcmFtZXNfcmVtb3ZlZChmLCAqYXJncywgKiprd2RzKToKICAgICIiInJlbW92ZV9pbXBvcnRsaWJfZnJhbWVzIGluIGltcG9ydC5jIHdpbGwgYWx3YXlzIHJlbW92ZSBzZXF1ZW5jZXMKICAgIG9mIGltcG9ydGxpYiBmcmFtZXMgdGhhdCBlbmQgd2l0aCBhIGNhbGwgdG8gdGhpcyBmdW5jdGlvbgoKICAgIFVzZSBpdCBpbnN0ZWFkIG9mIGEgbm9ybWFsIGNhbGwgaW4gcGxhY2VzIHdoZXJlIGluY2x1ZGluZyB0aGUgaW1wb3J0bGliCiAgICBmcmFtZXMgaW50cm9kdWNlcyB1bndhbnRlZCBub2lzZSBpbnRvIHRoZSB0cmFjZWJhY2sgKGUuZy4gd2hlbiBleGVjdXRpbmcKICAgIG1vZHVsZSBjb2RlKQogICAgIiIiCiAgICByZXR1cm4gZigqYXJncywgKiprd2RzKQoKCiMgRmluZGVyL2xvYWRlciB1dGlsaXR5IGNvZGUgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiIiIk1hZ2ljIHdvcmQgdG8gcmVqZWN0IC5weWMgZmlsZXMgZ2VuZXJhdGVkIGJ5IG90aGVyIFB5dGhvbiB2ZXJzaW9ucy4KSXQgc2hvdWxkIGNoYW5nZSBmb3IgZWFjaCBpbmNvbXBhdGlibGUgY2hhbmdlIHRvIHRoZSBieXRlY29kZS4KClRoZSB2YWx1ZSBvZiBDUiBhbmQgTEYgaXMgaW5jb3Jwb3JhdGVkIHNvIGlmIHlvdSBldmVyIHJlYWQgb3Igd3JpdGUKYSAucHljIGZpbGUgaW4gdGV4dCBtb2RlIHRoZSBtYWdpYyBudW1iZXIgd2lsbCBiZSB3cm9uZzsgYWxzbywgdGhlCkFwcGxlIE1QVyBjb21waWxlciBzd2FwcyB0aGVpciB2YWx1ZXMsIGJvdGNoaW5nIHN0cmluZyBjb25zdGFudHMuCgpUaGUgbWFnaWMgbnVtYmVycyBtdXN0IGJlIHNwYWNlZCBhcGFydCBhdCBsZWFzdCAyIHZhbHVlcywgYXMgdGhlCi1VIGludGVycGV0ZXIgZmxhZyB3aWxsIGNhdXNlIE1BR0lDKzEgYmVpbmcgdXNlZC4gVGhleSBoYXZlIGJlZW4Kb2RkIG51bWJlcnMgZm9yIHNvbWUgdGltZSBub3cuCgpUaGVyZSB3ZXJlIGEgdmFyaWV0eSBvZiBvbGQgc2NoZW1lcyBmb3Igc2V0dGluZyB0aGUgbWFnaWMgbnVtYmVyLgpUaGUgY3VycmVudCB3b3JraW5nIHNjaGVtZSBpcyB0byBpbmNyZW1lbnQgdGhlIHByZXZpb3VzIHZhbHVlIGJ5CjEwLgoKU3RhcnRpbmcgd2l0aCB0aGUgYWRvcHRpb24gb2YgUEVQIDMxNDcgaW4gUHl0aG9uIDMuMiwgZXZlcnkgYnVtcCBpbiBtYWdpYwpudW1iZXIgYWxzbyBpbmNsdWRlcyBhIG5ldyAibWFnaWMgdGFnIiwgaS5lLiBhIGh1bWFuIHJlYWRhYmxlIHN0cmluZyB1c2VkCnRvIHJlcHJlc2VudCB0aGUgbWFnaWMgbnVtYmVyIGluIF9fcHljYWNoZV9fIGRpcmVjdG9yaWVzLiAgV2hlbiB5b3UgY2hhbmdlCnRoZSBtYWdpYyBudW1iZXIsIHlvdSBtdXN0IGFsc28gc2V0IGEgbmV3IHVuaXF1ZSBtYWdpYyB0YWcuICBHZW5lcmFsbHkgdGhpcwpjYW4gYmUgbmFtZWQgYWZ0ZXIgdGhlIFB5dGhvbiBtYWpvciB2ZXJzaW9uIG9mIHRoZSBtYWdpYyBudW1iZXIgYnVtcCwgYnV0Cml0IGNhbiByZWFsbHkgYmUgYW55dGhpbmcsIGFzIGxvbmcgYXMgaXQncyBkaWZmZXJlbnQgdGhhbiBhbnl0aGluZyBlbHNlCnRoYXQncyBjb21lIGJlZm9yZS4gIFRoZSB0YWdzIGFyZSBpbmNsdWRlZCBpbiB0aGUgZm9sbG93aW5nIHRhYmxlLCBzdGFydGluZwp3aXRoIFB5dGhvbiAzLjJhMC4KCktub3duIHZhbHVlczoKIFB5dGhvbiAxLjU6ICAgMjAxMjEKIFB5dGhvbiAxLjUuMTogMjAxMjEKICAgIFB5dGhvbiAxLjUuMjogMjAxMjEKICAgIFB5dGhvbiAxLjY6ICAgNTA0MjgKICAgIFB5dGhvbiAyLjA6ICAgNTA4MjMKICAgIFB5dGhvbiAyLjAuMTogNTA4MjMKICAgIFB5dGhvbiAyLjE6ICAgNjAyMDIKICAgIFB5dGhvbiAyLjEuMTogNjAyMDIKICAgIFB5dGhvbiAyLjEuMjogNjAyMDIKICAgIFB5dGhvbiAyLjI6ICAgNjA3MTcKICAgIFB5dGhvbiAyLjNhMDogNjIwMTEKICAgIFB5dGhvbiAyLjNhMDogNjIwMjEKICAgIFB5dGhvbiAyLjNhMDogNjIwMTEgKCEpCiAgICBQeXRob24gMi40YTA6IDYyMDQxCiAgICBQeXRob24gMi40YTM6IDYyMDUxCiAgICBQeXRob24gMi40YjE6IDYyMDYxCiAgICBQeXRob24gMi41YTA6IDYyMDcxCiAgICBQeXRob24gMi41YTA6IDYyMDgxIChhc3QtYnJhbmNoKQogICAgUHl0aG9uIDIuNWEwOiA2MjA5MSAod2l0aCkKICAgIFB5dGhvbiAyLjVhMDogNjIwOTIgKGNoYW5nZWQgV0lUSF9DTEVBTlVQIG9wY29kZSkKICAgIFB5dGhvbiAyLjViMzogNjIxMDEgKGZpeCB3cm9uZyBjb2RlOiBmb3IgeCwgaW4gLi4uKQogICAgUHl0aG9uIDIuNWIzOiA2MjExMSAoZml4IHdyb25nIGNvZGU6IHggKz0geWllbGQpCiAgICBQeXRob24gMi41YzE6IDYyMTIxIChmaXggd3JvbmcgbG5vdGFiIHdpdGggZm9yIGxvb3BzIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmluZyBjb25zdGFudHMgdGhhdCBzaG91bGQgaGF2ZSBiZWVuIHJlbW92ZWQpCiAgICBQeXRob24gMi41YzI6IDYyMTMxIChmaXggd3JvbmcgY29kZTogZm9yIHgsIGluIC4uLiBpbiBsaXN0Y29tcC9nZW5leHApCiAgICBQeXRob24gMi42YTA6IDYyMTUxIChwZWVwaG9sZSBvcHRpbWl6YXRpb25zIGFuZCBTVE9SRV9NQVAgb3Bjb2RlKQogICAgUHl0aG9uIDIuNmExOiA2MjE2MSAoV0lUSF9DTEVBTlVQIG9wdGltaXphdGlvbikKICAgIFB5dGhvbiAzMDAwOiAgIDMwMDAKICAgICAgICAgICAgICAgICAgIDMwMTAgKHJlbW92ZWQgVU5BUllfQ09OVkVSVCkKICAgICAgICAgICAgICAgICAgIDMwMjAgKGFkZGVkIEJVSUxEX1NFVCkKICAgICAgICAgICAgICAgICAgIDMwMzAgKGFkZGVkIGtleXdvcmQtb25seSBwYXJhbWV0ZXJzKQogICAgICAgICAgICAgICAgICAgMzA0MCAoYWRkZWQgc2lnbmF0dXJlIGFubm90YXRpb25zKQogICAgICAgICAgICAgICAgICAgMzA1MCAocHJpbnQgYmVjb21lcyBhIGZ1bmN0aW9uKQogICAgICAgICAgICAgICAgICAgMzA2MCAoUEVQIDMxMTUgbWV0YWNsYXNzIHN5bnRheCkKICAgICAgICAgICAgICAgICAgIDMwNjEgKHN0cmluZyBsaXRlcmFscyBiZWNvbWUgdW5pY29kZSkKICAgICAgICAgICAgICAgICAgIDMwNzEgKFBFUCAzMTA5IHJhaXNlIGNoYW5nZXMpCiAgICAgICAgICAgICAgICAgICAzMDgxIChQRVAgMzEzNyBtYWtlIF9fZmlsZV9fIGFuZCBfX25hbWVfXyB1bmljb2RlKQogICAgICAgICAgICAgICAgICAgMzA5MSAoa2lsbCBzdHI4IGludGVybmluZykKICAgICAgICAgICAgICAgICAgIDMxMDEgKG1lcmdlIGZyb20gMi42YTAsIHNlZSA2MjE1MSkKICAgICAgICAgICAgICAgICAgIDMxMDMgKF9fZmlsZV9fIHBvaW50cyB0byBzb3VyY2UgZmlsZSkKICAgIFB5dGhvbiAzLjBhNDogMzExMSAoV0lUSF9DTEVBTlVQIG9wdGltaXphdGlvbikuCiAgICBQeXRob24gMy4wYTU6IDMxMzEgKGxleGljYWwgZXhjZXB0aW9uIHN0YWNraW5nLCBpbmNsdWRpbmcgUE9QX0VYQ0VQVCkKICAgIFB5dGhvbiAzLjFhMDogMzE0MSAob3B0aW1pemUgbGlzdCwgc2V0IGFuZCBkaWN0IGNvbXByZWhlbnNpb25zOgogICAgICAgICAgICBjaGFuZ2UgTElTVF9BUFBFTkQgYW5kIFNFVF9BREQsIGFkZCBNQVBfQUREKQogICAgUHl0aG9uIDMuMWEwOiAzMTUxIChvcHRpbWl6ZSBjb25kaXRpb25hbCBicmFuY2hlczoKICAgICAgICAgICAgaW50cm9kdWNlIFBPUF9KVU1QX0lGX0ZBTFNFIGFuZCBQT1BfSlVNUF9JRl9UUlVFKQogICAgUHl0aG9uIDMuMmEwOiAzMTYwIChhZGQgU0VUVVBfV0lUSCkKICAgICAgICAgICAgICAgICAgdGFnOiBjcHl0aG9uLTMyCiAgICBQeXRob24gMy4yYTE6IDMxNzAgKGFkZCBEVVBfVE9QX1RXTywgcmVtb3ZlIERVUF9UT1BYIGFuZCBST1RfRk9VUikKICAgICAgICAgICAgICAgICAgdGFnOiBjcHl0aG9uLTMyCiAgICBQeXRob24gMy4yYTIgIDMxODAgKGFkZCBERUxFVEVfREVSRUYpCiAgICBQeXRob24gMy4zYTAgIDMxOTAgX19jbGFzc19fIHN1cGVyIGNsb3N1cmUgY2hhbmdlZAogICAgUHl0aG9uIDMuM2EwICAzMjAwIChfX3F1YWxuYW1lX18gYWRkZWQpCiAgICAgICAgICAgICAgICAgICAgIDMyMTAgKGFkZGVkIHNpemUgbW9kdWxvIDIqKjMyIHRvIHRoZSBweWMgaGVhZGVyKQogICAgUHl0aG9uIDMuM2ExICAzMjIwIChjaGFuZ2VkIFBFUCAzODAgaW1wbGVtZW50YXRpb24pCiAgICBQeXRob24gMy4zYTQgIDMyMzAgKHJldmVydCBjaGFuZ2VzIHRvIGltcGxpY2l0IF9fY2xhc3NfXyBjbG9zdXJlKQoKTUFHSUMgbXVzdCBjaGFuZ2Ugd2hlbmV2ZXIgdGhlIGJ5dGVjb2RlIGVtaXR0ZWQgYnkgdGhlIGNvbXBpbGVyIG1heSBubwpsb25nZXIgYmUgdW5kZXJzdG9vZCBieSBvbGRlciBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIGV2YWwgbG9vcCAodXN1YWxseQpkdWUgdG8gdGhlIGFkZGl0aW9uIG9mIG5ldyBvcGNvZGVzKS4KCiIiIgpfUkFXX01BR0lDX05VTUJFUiA9IDMyMzAgfCBvcmQoJ1xyJykgPDwgMTYgfCBvcmQoJ1xuJykgPDwgMjQKX01BR0lDX0JZVEVTID0gYnl0ZXMoX1JBV19NQUdJQ19OVU1CRVIgPj4gbiAmIDB4ZmYgZm9yIG4gaW4gcmFuZ2UoMCwgMjUsIDgpKQoKX1BZQ0FDSEUgPSAnX19weWNhY2hlX18nCgpTT1VSQ0VfU1VGRklYRVMgPSBbJy5weSddICAjIF9zZXR1cCgpIGFkZHMgLnB5dyBhcyBuZWVkZWQuCgpERUJVR19CWVRFQ09ERV9TVUZGSVhFUyA9IFsnLnB5YyddCk9QVElNSVpFRF9CWVRFQ09ERV9TVUZGSVhFUyA9IFsnLnB5byddCmlmIF9fZGVidWdfXzoKICAgIEJZVEVDT0RFX1NVRkZJWEVTID0gREVCVUdfQllURUNPREVfU1VGRklYRVMKZWxzZToKICAgIEJZVEVDT0RFX1NVRkZJWEVTID0gT1BUSU1JWkVEX0JZVEVDT0RFX1NVRkZJWEVTCgpkZWYgY2FjaGVfZnJvbV9zb3VyY2UocGF0aCwgZGVidWdfb3ZlcnJpZGU9Tm9uZSk6CiAgICAiIiJHaXZlbiB0aGUgcGF0aCB0byBhIC5weSBmaWxlLCByZXR1cm4gdGhlIHBhdGggdG8gaXRzIC5weWMvLnB5byBmaWxlLgoKICAgIFRoZSAucHkgZmlsZSBkb2VzIG5vdCBuZWVkIHRvIGV4aXN0OyB0aGlzIHNpbXBseSByZXR1cm5zIHRoZSBwYXRoIHRvIHRoZQogICAgLnB5Yy8ucHlvIGZpbGUgY2FsY3VsYXRlZCBhcyBpZiB0aGUgLnB5IGZpbGUgd2VyZSBpbXBvcnRlZC4gIFRoZSBleHRlbnNpb24KICAgIHdpbGwgYmUgLnB5YyB1bmxlc3MgX19kZWJ1Z19fIGlzIG5vdCBkZWZpbmVkLCB0aGVuIGl0IHdpbGwgYmUgLnB5by4KCiAgICBJZiBkZWJ1Z19vdmVycmlkZSBpcyBub3QgTm9uZSwgdGhlbiBpdCBtdXN0IGJlIGEgYm9vbGVhbiBhbmQgaXMgdGFrZW4gYXMKICAgIHRoZSB2YWx1ZSBvZiBfX2RlYnVnX18gaW5zdGVhZC4KCiAgICBJZiBzeXMuaW1wbGVtZW50YXRpb24uY2FjaGVfdGFnIGlzIE5vbmUgdGhlbiBOb3RJbXBsZW1lbnRlZEVycm9yIGlzIHJhaXNlZC4KCiAgICAiIiIKICAgIGRlYnVnID0gX19kZWJ1Z19fIGlmIGRlYnVnX292ZXJyaWRlIGlzIE5vbmUgZWxzZSBkZWJ1Z19vdmVycmlkZQogICAgaWYgZGVidWc6CiAgICAgICAgc3VmZml4ZXMgPSBERUJVR19CWVRFQ09ERV9TVUZGSVhFUwogICAgZWxzZToKICAgICAgICBzdWZmaXhlcyA9IE9QVElNSVpFRF9CWVRFQ09ERV9TVUZGSVhFUwogICAgaGVhZCwgdGFpbCA9IF9wYXRoX3NwbGl0KHBhdGgpCiAgICBiYXNlX2ZpbGVuYW1lLCBzZXAsIF8gPSB0YWlsLnBhcnRpdGlvbignLicpCiAgICB0YWcgPSBzeXMuaW1wbGVtZW50YXRpb24uY2FjaGVfdGFnCiAgICBpZiB0YWcgaXMgTm9uZToKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCdzeXMuaW1wbGVtZW50YXRpb24uY2FjaGVfdGFnIGlzIE5vbmUnKQogICAgZmlsZW5hbWUgPSAnJy5qb2luKFtiYXNlX2ZpbGVuYW1lLCBzZXAsIHRhZywgc3VmZml4ZXNbMF1dKQogICAgcmV0dXJuIF9wYXRoX2pvaW4oaGVhZCwgX1BZQ0FDSEUsIGZpbGVuYW1lKQoKCmRlZiBzb3VyY2VfZnJvbV9jYWNoZShwYXRoKToKICAgICIiIkdpdmVuIHRoZSBwYXRoIHRvIGEgLnB5Yy4vLnB5byBmaWxlLCByZXR1cm4gdGhlIHBhdGggdG8gaXRzIC5weSBmaWxlLgoKICAgIFRoZSAucHljLy5weW8gZmlsZSBkb2VzIG5vdCBuZWVkIHRvIGV4aXN0OyB0aGlzIHNpbXBseSByZXR1cm5zIHRoZSBwYXRoIHRvCiAgICB0aGUgLnB5IGZpbGUgY2FsY3VsYXRlZCB0byBjb3JyZXNwb25kIHRvIHRoZSAucHljLy5weW8gZmlsZS4gIElmIHBhdGggZG9lcwogICAgbm90IGNvbmZvcm0gdG8gUEVQIDMxNDcgZm9ybWF0LCBWYWx1ZUVycm9yIHdpbGwgYmUgcmFpc2VkLiBJZgogICAgc3lzLmltcGxlbWVudGF0aW9uLmNhY2hlX3RhZyBpcyBOb25lIHRoZW4gTm90SW1wbGVtZW50ZWRFcnJvciBpcyByYWlzZWQuCgogICAgIiIiCiAgICBpZiBzeXMuaW1wbGVtZW50YXRpb24uY2FjaGVfdGFnIGlzIE5vbmU6CiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcignc3lzLmltcGxlbWVudGF0aW9uLmNhY2hlX3RhZyBpcyBOb25lJykKICAgIGhlYWQsIHB5Y2FjaGVfZmlsZW5hbWUgPSBfcGF0aF9zcGxpdChwYXRoKQogICAgaGVhZCwgcHljYWNoZSA9IF9wYXRoX3NwbGl0KGhlYWQpCiAgICBpZiBweWNhY2hlICE9IF9QWUNBQ0hFOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ3t9IG5vdCBib3R0b20tbGV2ZWwgZGlyZWN0b3J5IGluICcKICAgICAgICAgICAgICAgICAgICAgICAgICd7IXJ9Jy5mb3JtYXQoX1BZQ0FDSEUsIHBhdGgpKQogICAgaWYgcHljYWNoZV9maWxlbmFtZS5jb3VudCgnLicpICE9IDI6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignZXhwZWN0ZWQgb25seSAyIGRvdHMgaW4gJwogICAgICAgICAgICAgICAgICAgICAgICAgJ3shcn0nLmZvcm1hdChweWNhY2hlX2ZpbGVuYW1lKSkKICAgIGJhc2VfZmlsZW5hbWUgPSBweWNhY2hlX2ZpbGVuYW1lLnBhcnRpdGlvbignLicpWzBdCiAgICByZXR1cm4gX3BhdGhfam9pbihoZWFkLCBiYXNlX2ZpbGVuYW1lICsgU09VUkNFX1NVRkZJWEVTWzBdKQoKCmRlZiBfZ2V0X3NvdXJjZWZpbGUoYnl0ZWNvZGVfcGF0aCk6CiAgICAiIiJDb252ZXJ0IGEgYnl0ZWNvZGUgZmlsZSBwYXRoIHRvIGEgc291cmNlIHBhdGggKGlmIHBvc3NpYmxlKS4KCiAgICBUaGlzIGZ1bmN0aW9uIGV4aXN0cyBwdXJlbHkgZm9yIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvcgogICAgUHlJbXBvcnRfRXhlY0NvZGVNb2R1bGVXaXRoRmlsZW5hbWVzKCkgaW4gdGhlIEMgQVBJLgoKICAgICIiIgogICAgaWYgbGVuKGJ5dGVjb2RlX3BhdGgpID09IDA6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIHJlc3QsIF8sIGV4dGVuc2lvbiA9IGJ5dGVjb2RlX3BhdGgucnBhcml0aW9uKCcuJykKICAgIGlmIG5vdCByZXN0IG9yIGV4dGVuc2lvbi5sb3dlcigpWy0zOi0xXSAhPSAnLnB5JzoKICAgICAgICByZXR1cm4gYnl0ZWNvZGVfcGF0aAoKICAgIHRyeToKICAgICAgICBzb3VyY2VfcGF0aCA9IHNvdXJjZV9mcm9tX2NhY2hlKGJ5dGVjb2RlX3BhdGgpCiAgICBleGNlcHQgKE5vdEltcGxlbWVudGVkRXJyb3IsIFZhbHVlRXJyb3IpOgogICAgICAgIHNvdXJjZV9wYXRoID0gYnl0Y29kZV9wYXRoWy0xOl0KCiAgICByZXR1cm4gc291cmNlX3BhdGggaWYgX3BhdGhfaXNmaWxlKHNvdXJjZV9zdGF0cykgZWxzZSBieXRlY29kZV9wYXRoCgoKZGVmIF92ZXJib3NlX21lc3NhZ2UobWVzc2FnZSwgKmFyZ3MpOgogICAgIiIiUHJpbnQgdGhlIG1lc3NhZ2UgdG8gc3RkZXJyIGlmIC12L1BZVEhPTlZFUkJPU0UgaXMgdHVybmVkIG9uLiIiIgogICAgaWYgc3lzLmZsYWdzLnZlcmJvc2U6CiAgICAgICAgaWYgbm90IG1lc3NhZ2Uuc3RhcnRzd2l0aCgoJyMnLCAnaW1wb3J0ICcpKToKICAgICAgICAgICAgbWVzc2FnZSA9ICcjICcgKyBtZXNzYWdlCiAgICAgICAgcHJpbnQobWVzc2FnZS5mb3JtYXQoKmFyZ3MpLCBmaWxlPXN5cy5zdGRlcnIpCgoKZGVmIHNldF9wYWNrYWdlKGZ4bik6CiAgICAiIiJTZXQgX19wYWNrYWdlX18gb24gdGhlIHJldHVybmVkIG1vZHVsZS4iIiIKICAgIGRlZiBzZXRfcGFja2FnZV93cmFwcGVyKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgbW9kdWxlID0gZnhuKCphcmdzLCAqKmt3YXJncykKICAgICAgICBpZiBnZXRhdHRyKG1vZHVsZSwgJ19fcGFja2FnZV9fJywgTm9uZSkgaXMgTm9uZToKICAgICAgICAgICAgbW9kdWxlLl9fcGFja2FnZV9fID0gbW9kdWxlLl9fbmFtZV9fCiAgICAgICAgICAgIGlmIG5vdCBoYXNhdHRyKG1vZHVsZSwgJ19fcGF0aF9fJyk6CiAgICAgICAgICAgICAgICBtb2R1bGUuX19wYWNrYWdlX18gPSBtb2R1bGUuX19wYWNrYWdlX18ucnBhcnRpdGlvbignLicpWzBdCiAgICAgICAgcmV0dXJuIG1vZHVsZQogICAgX3dyYXAoc2V0X3BhY2thZ2Vfd3JhcHBlciwgZnhuKQogICAgcmV0dXJuIHNldF9wYWNrYWdlX3dyYXBwZXIKCgpkZWYgc2V0X2xvYWRlcihmeG4pOgogICAgIiIiU2V0IF9fbG9hZGVyX18gb24gdGhlIHJldHVybmVkIG1vZHVsZS4iIiIKICAgIGRlZiBzZXRfbG9hZGVyX3dyYXBwZXIoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICBtb2R1bGUgPSBmeG4oc2VsZiwgKmFyZ3MsICoqa3dhcmdzKQogICAgICAgIGlmIG5vdCBoYXNhdHRyKG1vZHVsZSwgJ19fbG9hZGVyX18nKToKICAgICAgICAgICAgbW9kdWxlLl9fbG9hZGVyX18gPSBzZWxmCiAgICAgICAgcmV0dXJuIG1vZHVsZQogICAgX3dyYXAoc2V0X2xvYWRlcl93cmFwcGVyLCBmeG4pCiAgICByZXR1cm4gc2V0X2xvYWRlcl93cmFwcGVyCgoKZGVmIG1vZHVsZV9mb3JfbG9hZGVyKGZ4bik6CiAgICAiIiJEZWNvcmF0b3IgdG8gaGFuZGxlIHNlbGVjdGluZyB0aGUgcHJvcGVyIG1vZHVsZSBmb3IgbG9hZGVycy4KCiAgICBUaGUgZGVjb3JhdGVkIGZ1bmN0aW9uIGlzIHBhc3NlZCB0aGUgbW9kdWxlIHRvIHVzZSBpbnN0ZWFkIG9mIHRoZSBtb2R1bGUKICAgIG5hbWUuIFRoZSBtb2R1bGUgcGFzc2VkIGluIHRvIHRoZSBmdW5jdGlvbiBpcyBlaXRoZXIgZnJvbSBzeXMubW9kdWxlcyBpZgogICAgaXQgYWxyZWFkeSBleGlzdHMgb3IgaXMgYSBuZXcgbW9kdWxlLiBJZiB0aGUgbW9kdWxlIGlzIG5ldywgdGhlbiBfX25hbWVfXwogICAgaXMgc2V0IHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgbWV0aG9kLCBfX2xvYWRlcl9fIGlzIHNldCB0byBzZWxmLCBhbmQKICAgIF9fcGFja2FnZV9fIGlzIHNldCBhY2NvcmRpbmdseSAoaWYgc2VsZi5pc19wYWNrYWdlKCkgaXMgZGVmaW5lZCkgd2lsbCBiZSBzZXQKICAgIGJlZm9yZSBpdCBpcyBwYXNzZWQgdG8gdGhlIGRlY29yYXRlZCBmdW5jdGlvbiAoaWYgc2VsZi5pc19wYWNrYWdlKCkgZG9lcwogICAgbm90IHdvcmsgZm9yIHRoZSBtb2R1bGUgaXQgd2lsbCBiZSBzZXQgcG9zdC1sb2FkKS4KCiAgICBJZiBhbiBleGNlcHRpb24gaXMgcmFpc2VkIGFuZCB0aGUgZGVjb3JhdG9yIGNyZWF0ZWQgdGhlIG1vZHVsZSBpdCBpcwogICAgc3Vic2VxdWVudGx5IHJlbW92ZWQgZnJvbSBzeXMubW9kdWxlcy4KCiAgICBUaGUgZGVjb3JhdG9yIGFzc3VtZXMgdGhhdCB0aGUgZGVjb3JhdGVkIGZ1bmN0aW9uIHRha2VzIHRoZSBtb2R1bGUgbmFtZSBhcwogICAgdGhlIHNlY29uZCBhcmd1bWVudC4KCiAgICAiIiIKICAgIGRlZiBtb2R1bGVfZm9yX2xvYWRlcl93cmFwcGVyKHNlbGYsIGZ1bGxuYW1lLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzLmdldChmdWxsbmFtZSkKICAgICAgICBpc19yZWxvYWQgPSBtb2R1bGUgaXMgbm90IE5vbmUKICAgICAgICBpZiBub3QgaXNfcmVsb2FkOgogICAgICAgICAgICAjIFRoaXMgbXVzdCBiZSBkb25lIGJlZm9yZSBvcGVuKCkgaXMgY2FsbGVkIGFzIHRoZSAnaW8nIG1vZHVsZQogICAgICAgICAgICAjIGltcGxpY2l0bHkgaW1wb3J0cyAnbG9jYWxlJyBhbmQgd291bGQgb3RoZXJ3aXNlIHRyaWdnZXIgYW4KICAgICAgICAgICAgIyBpbmZpbml0ZSBsb29wLgogICAgICAgICAgICBtb2R1bGUgPSBuZXdfbW9kdWxlKGZ1bGxuYW1lKQogICAgICAgICAgICBzeXMubW9kdWxlc1tmdWxsbmFtZV0gPSBtb2R1bGUKICAgICAgICAgICAgbW9kdWxlLl9fbG9hZGVyX18gPSBzZWxmCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlzX3BhY2thZ2UgPSBzZWxmLmlzX3BhY2thZ2UoZnVsbG5hbWUpCiAgICAgICAgICAgIGV4Y2VwdCAoSW1wb3J0RXJyb3IsIEF0dHJpYnV0ZUVycm9yKToKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGlzX3BhY2thZ2U6CiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLl9fcGFja2FnZV9fID0gZnVsbG5hbWUKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLl9fcGFja2FnZV9fID0gZnVsbG5hbWUucnBhcnRpdGlvbignLicpWzBdCiAgICAgICAgdHJ5OgogICAgICAgICAgICBtb2R1bGUuX19pbml0aWFsaXppbmdfXyA9IFRydWUKICAgICAgICAgICAgIyBJZiBfX3BhY2thZ2VfXyB3YXMgbm90IHNldCBhYm92ZSwgX19pbXBvcnRfXygpIHdpbGwgZG8gaXQgbGF0ZXIuCiAgICAgICAgICAgIHJldHVybiBmeG4oc2VsZiwgbW9kdWxlLCAqYXJncywgKiprd2FyZ3MpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBpZiBub3QgaXNfcmVsb2FkOgogICAgICAgICAgICAgICAgZGVsIHN5cy5tb2R1bGVzW2Z1bGxuYW1lXQogICAgICAgICAgICByYWlzZQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIG1vZHVsZS5fX2luaXRpYWxpemluZ19fID0gRmFsc2UKICAgIF93cmFwKG1vZHVsZV9mb3JfbG9hZGVyX3dyYXBwZXIsIGZ4bikKICAgIHJldHVybiBtb2R1bGVfZm9yX2xvYWRlcl93cmFwcGVyCgoKZGVmIF9jaGVja19uYW1lKG1ldGhvZCk6CiAgICAiIiJEZWNvcmF0b3IgdG8gdmVyaWZ5IHRoYXQgdGhlIG1vZHVsZSBiZWluZyByZXF1ZXN0ZWQgbWF0Y2hlcyB0aGUgb25lIHRoZQogICAgbG9hZGVyIGNhbiBoYW5kbGUuCgogICAgVGhlIGZpcnN0IGFyZ3VtZW50IChzZWxmKSBtdXN0IGRlZmluZSBfbmFtZSB3aGljaCB0aGUgc2Vjb25kIGFyZ3VtZW50IGlzCiAgICBjb21wYXJlZCBhZ2FpbnN0LiBJZiB0aGUgY29tcGFyaXNvbiBmYWlscyB0aGVuIEltcG9ydEVycm9yIGlzIHJhaXNlZC4KCiAgICAiIiIKICAgIGRlZiBfY2hlY2tfbmFtZV93cmFwcGVyKHNlbGYsIG5hbWU9Tm9uZSwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICBpZiBuYW1lIGlzIE5vbmU6CiAgICAgICAgICAgIG5hbWUgPSBzZWxmLm5hbWUKICAgICAgICBlbGlmIHNlbGYubmFtZSAhPSBuYW1lOgogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcigibG9hZGVyIGNhbm5vdCBoYW5kbGUgJXMiICUgbmFtZSwgbmFtZT1uYW1lKQogICAgICAgIHJldHVybiBtZXRob2Qoc2VsZiwgbmFtZSwgKmFyZ3MsICoqa3dhcmdzKQogICAgX3dyYXAoX2NoZWNrX25hbWVfd3JhcHBlciwgbWV0aG9kKQogICAgcmV0dXJuIF9jaGVja19uYW1lX3dyYXBwZXIKCgpkZWYgX3JlcXVpcmVzX2J1aWx0aW4oZnhuKToKICAgICIiIkRlY29yYXRvciB0byB2ZXJpZnkgdGhlIG5hbWVkIG1vZHVsZSBpcyBidWlsdC1pbi4iIiIKICAgIGRlZiBfcmVxdWlyZXNfYnVpbHRpbl93cmFwcGVyKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICBpZiBmdWxsbmFtZSBub3QgaW4gc3lzLmJ1aWx0aW5fbW9kdWxlX25hbWVzOgogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcigie30gaXMgbm90IGEgYnVpbHQtaW4gbW9kdWxlIi5mb3JtYXQoZnVsbG5hbWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPWZ1bGxuYW1lKQogICAgICAgIHJldHVybiBmeG4oc2VsZiwgZnVsbG5hbWUpCiAgICBfd3JhcChfcmVxdWlyZXNfYnVpbHRpbl93cmFwcGVyLCBmeG4pCiAgICByZXR1cm4gX3JlcXVpcmVzX2J1aWx0aW5fd3JhcHBlcgoKCmRlZiBfcmVxdWlyZXNfZnJvemVuKGZ4bik6CiAgICAiIiJEZWNvcmF0b3IgdG8gdmVyaWZ5IHRoZSBuYW1lZCBtb2R1bGUgaXMgZnJvemVuLiIiIgogICAgZGVmIF9yZXF1aXJlc19mcm96ZW5fd3JhcHBlcihzZWxmLCBmdWxsbmFtZSk6CiAgICAgICAgaWYgbm90IF9pbXAuaXNfZnJvemVuKGZ1bGxuYW1lKToKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoInt9IGlzIG5vdCBhIGZyb3plbiBtb2R1bGUiLmZvcm1hdChmdWxsbmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9ZnVsbG5hbWUpCiAgICAgICAgcmV0dXJuIGZ4bihzZWxmLCBmdWxsbmFtZSkKICAgIF93cmFwKF9yZXF1aXJlc19mcm96ZW5fd3JhcHBlciwgZnhuKQogICAgcmV0dXJuIF9yZXF1aXJlc19mcm96ZW5fd3JhcHBlcgoKCmRlZiBfZmluZF9tb2R1bGVfc2hpbShzZWxmLCBmdWxsbmFtZSk6CiAgICAiIiJUcnkgdG8gZmluZCBhIGxvYWRlciBmb3IgdGhlIHNwZWNpZmllZCBtb2R1bGUgYnkgZGVsZWdhdGluZyB0bwogICAgc2VsZi5maW5kX2xvYWRlcigpLiIiIgogICAgIyBDYWxsIGZpbmRfbG9hZGVyKCkuIElmIGl0IHJldHVybnMgYSBzdHJpbmcgKGluZGljYXRpbmcgdGhpcwogICAgIyBpcyBhIG5hbWVzcGFjZSBwYWNrYWdlIHBvcnRpb24pLCBnZW5lcmF0ZSBhIHdhcm5pbmcgYW5kCiAgICAjIHJldHVybiBOb25lLgogICAgbG9hZGVyLCBwb3J0aW9ucyA9IHNlbGYuZmluZF9sb2FkZXIoZnVsbG5hbWUpCiAgICBpZiBsb2FkZXIgaXMgTm9uZSBhbmQgbGVuKHBvcnRpb25zKToKICAgICAgICBtc2cgPSAiTm90IGltcG9ydGluZyBkaXJlY3Rvcnkge306IG1pc3NpbmcgX19pbml0X18iCiAgICAgICAgX3dhcm5pbmdzLndhcm4obXNnLmZvcm1hdChwb3J0aW9uc1swXSksIEltcG9ydFdhcm5pbmcpCiAgICByZXR1cm4gbG9hZGVyCgoKCgojIExvYWRlcnMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpjbGFzcyBCdWlsdGluSW1wb3J0ZXI6CgogICAgIiIiTWV0YSBwYXRoIGltcG9ydCBmb3IgYnVpbHQtaW4gbW9kdWxlcy4KCiAgICBBbGwgbWV0aG9kcyBhcmUgZWl0aGVyIGNsYXNzIG9yIHN0YXRpYyBtZXRob2RzIHRvIGF2b2lkIHRoZSBuZWVkIHRvCiAgICBpbnN0YW50aWF0ZSB0aGUgY2xhc3MuCgogICAgIiIiCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgbW9kdWxlX3JlcHIoY2xzLCBtb2R1bGUpOgogICAgICAgIHJldHVybiAiPG1vZHVsZSAne30nIChidWlsdC1pbik+Ii5mb3JtYXQobW9kdWxlLl9fbmFtZV9fKQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZpbmRfbW9kdWxlKGNscywgZnVsbG5hbWUsIHBhdGg9Tm9uZSk6CiAgICAgICAgIiIiRmluZCB0aGUgYnVpbHQtaW4gbW9kdWxlLgoKICAgICAgICBJZiAncGF0aCcgaXMgZXZlciBzcGVjaWZpZWQgdGhlbiB0aGUgc2VhcmNoIGlzIGNvbnNpZGVyZWQgYSBmYWlsdXJlLgoKICAgICAgICAiIiIKICAgICAgICBpZiBwYXRoIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHJldHVybiBjbHMgaWYgX2ltcC5pc19idWlsdGluKGZ1bGxuYW1lKSBlbHNlIE5vbmUKCiAgICBAY2xhc3NtZXRob2QKICAgIEBzZXRfcGFja2FnZQogICAgQHNldF9sb2FkZXIKICAgIEBfcmVxdWlyZXNfYnVpbHRpbgogICAgZGVmIGxvYWRfbW9kdWxlKGNscywgZnVsbG5hbWUpOgogICAgICAgICIiIkxvYWQgYSBidWlsdC1pbiBtb2R1bGUuIiIiCiAgICAgICAgaXNfcmVsb2FkID0gZnVsbG5hbWUgaW4gc3lzLm1vZHVsZXMKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBfY2FsbF93aXRoX2ZyYW1lc19yZW1vdmVkKF9pbXAuaW5pdF9idWlsdGluLCBmdWxsbmFtZSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGlmIG5vdCBpc19yZWxvYWQgYW5kIGZ1bGxuYW1lIGluIHN5cy5tb2R1bGVzOgogICAgICAgICAgICAgICAgZGVsIHN5cy5tb2R1bGVzW2Z1bGxuYW1lXQogICAgICAgICAgICByYWlzZQoKICAgIEBjbGFzc21ldGhvZAogICAgQF9yZXF1aXJlc19idWlsdGluCiAgICBkZWYgZ2V0X2NvZGUoY2xzLCBmdWxsbmFtZSk6CiAgICAgICAgIiIiUmV0dXJuIE5vbmUgYXMgYnVpbHQtaW4gbW9kdWxlcyBkbyBub3QgaGF2ZSBjb2RlIG9iamVjdHMuIiIiCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBAY2xhc3NtZXRob2QKICAgIEBfcmVxdWlyZXNfYnVpbHRpbgogICAgZGVmIGdldF9zb3VyY2UoY2xzLCBmdWxsbmFtZSk6CiAgICAgICAgIiIiUmV0dXJuIE5vbmUgYXMgYnVpbHQtaW4gbW9kdWxlcyBkbyBub3QgaGF2ZSBzb3VyY2UgY29kZS4iIiIKICAgICAgICByZXR1cm4gTm9uZQoKICAgIEBjbGFzc21ldGhvZAogICAgQF9yZXF1aXJlc19idWlsdGluCiAgICBkZWYgaXNfcGFja2FnZShjbHMsIGZ1bGxuYW1lKToKICAgICAgICAiIiJSZXR1cm4gRmFsc2UgYXMgYnVpbHQtaW4gbW9kdWxlcyBhcmUgbmV2ZXIgcGFja2FnZXMuIiIiCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKY2xhc3MgRnJvemVuSW1wb3J0ZXI6CgogICAgIiIiTWV0YSBwYXRoIGltcG9ydCBmb3IgZnJvemVuIG1vZHVsZXMuCgogICAgQWxsIG1ldGhvZHMgYXJlIGVpdGhlciBjbGFzcyBvciBzdGF0aWMgbWV0aG9kcyB0byBhdm9pZCB0aGUgbmVlZCB0bwogICAgaW5zdGFudGlhdGUgdGhlIGNsYXNzLgoKICAgICIiIgoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIG1vZHVsZV9yZXByKGNscywgbSk6CiAgICAgICAgcmV0dXJuICI8bW9kdWxlICd7fScgKGZyb3plbik+Ii5mb3JtYXQobS5fX25hbWVfXykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmaW5kX21vZHVsZShjbHMsIGZ1bGxuYW1lLCBwYXRoPU5vbmUpOgogICAgICAgICIiIkZpbmQgYSBmcm96ZW4gbW9kdWxlLiIiIgogICAgICAgIHJldHVybiBjbHMgaWYgX2ltcC5pc19mcm96ZW4oZnVsbG5hbWUpIGVsc2UgTm9uZQoKICAgIEBjbGFzc21ldGhvZAogICAgQHNldF9wYWNrYWdlCiAgICBAc2V0X2xvYWRlcgogICAgQF9yZXF1aXJlc19mcm96ZW4KICAgIGRlZiBsb2FkX21vZHVsZShjbHMsIGZ1bGxuYW1lKToKICAgICAgICAiIiJMb2FkIGEgZnJvemVuIG1vZHVsZS4iIiIKICAgICAgICBpc19yZWxvYWQgPSBmdWxsbmFtZSBpbiBzeXMubW9kdWxlcwogICAgICAgIHRyeToKICAgICAgICAgICAgbSA9IF9jYWxsX3dpdGhfZnJhbWVzX3JlbW92ZWQoX2ltcC5pbml0X2Zyb3plbiwgZnVsbG5hbWUpCiAgICAgICAgICAgICMgTGV0IG91ciBvd24gbW9kdWxlX3JlcHIoKSBtZXRob2QgcHJvZHVjZSBhIHN1aXRhYmxlIHJlcHIuCiAgICAgICAgICAgIGRlbCBtLl9fZmlsZV9fCiAgICAgICAgICAgIHJldHVybiBtCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBpZiBub3QgaXNfcmVsb2FkIGFuZCBmdWxsbmFtZSBpbiBzeXMubW9kdWxlczoKICAgICAgICAgICAgICAgIGRlbCBzeXMubW9kdWxlc1tmdWxsbmFtZV0KICAgICAgICAgICAgcmFpc2UKCiAgICBAY2xhc3NtZXRob2QKICAgIEBfcmVxdWlyZXNfZnJvemVuCiAgICBkZWYgZ2V0X2NvZGUoY2xzLCBmdWxsbmFtZSk6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBjb2RlIG9iamVjdCBmb3IgdGhlIGZyb3plbiBtb2R1bGUuIiIiCiAgICAgICAgcmV0dXJuIF9pbXAuZ2V0X2Zyb3plbl9vYmplY3QoZnVsbG5hbWUpCgogICAgQGNsYXNzbWV0aG9kCiAgICBAX3JlcXVpcmVzX2Zyb3plbgogICAgZGVmIGdldF9zb3VyY2UoY2xzLCBmdWxsbmFtZSk6CiAgICAgICAgIiIiUmV0dXJuIE5vbmUgYXMgZnJvemVuIG1vZHVsZXMgZG8gbm90IGhhdmUgc291cmNlIGNvZGUuIiIiCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBAY2xhc3NtZXRob2QKICAgIEBfcmVxdWlyZXNfZnJvemVuCiAgICBkZWYgaXNfcGFja2FnZShjbHMsIGZ1bGxuYW1lKToKICAgICAgICAiIiJSZXR1cm4gVHJ1ZSBpZiB0aGUgZnJvemVuIG1vZHVsZSBpcyBhIHBhY2thZ2UuIiIiCiAgICAgICAgcmV0dXJuIF9pbXAuaXNfZnJvemVuX3BhY2thZ2UoZnVsbG5hbWUpCgoKY2xhc3MgV2luZG93c1JlZ2lzdHJ5RmluZGVyOgoKICAgICIiIk1ldGEgcGF0aCBmaW5kZXIgZm9yIG1vZHVsZXMgZGVjbGFyZWQgaW4gdGhlIFdpbmRvd3MgcmVnaXN0cnkuCiAgICAiIiIKCiAgICBSRUdJU1RSWV9LRVkgPSAoCiAgICAgICAgIlNvZnR3YXJlXFxQeXRob25cXFB5dGhvbkNvcmVcXHtzeXNfdmVyc2lvbn0iCiAgICAgICAgIlxcTW9kdWxlc1xce2Z1bGxuYW1lfSIpCiAgICBSRUdJU1RSWV9LRVlfREVCVUcgPSAoCiAgICAgICAgIlNvZnR3YXJlXFxQeXRob25cXFB5dGhvbkNvcmVcXHtzeXNfdmVyc2lvbn0iCiAgICAgICAgIlxcTW9kdWxlc1xce2Z1bGxuYW1lfVxcRGVidWciKQogICAgREVCVUdfQlVJTEQgPSBGYWxzZSAgIyBDaGFuZ2VkIGluIF9zZXR1cCgpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX29wZW5fcmVnaXN0cnkoY2xzLCBrZXkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIF93aW5yZWcuT3BlbktleShfd2lucmVnLkhLRVlfQ1VSUkVOVF9VU0VSLCBrZXkpCiAgICAgICAgZXhjZXB0IFdpbmRvd3NFcnJvcjoKICAgICAgICAgICAgcmV0dXJuIF93aW5yZWcuT3BlbktleShfd2lucmVnLkhLRVlfTE9DQUxfTUFDSElORSwga2V5KQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIF9zZWFyY2hfcmVnaXN0cnkoY2xzLCBmdWxsbmFtZSk6CiAgICAgICAgaWYgY2xzLkRFQlVHX0JVSUxEOgogICAgICAgICAgICByZWdpc3RyeV9rZXkgPSBjbHMuUkVHSVNUUllfS0VZX0RFQlVHCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVnaXN0cnlfa2V5ID0gY2xzLlJFR0lTVFJZX0tFWQogICAgICAgIGtleSA9IHJlZ2lzdHJ5X2tleS5mb3JtYXQoZnVsbG5hbWU9ZnVsbG5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeXNfdmVyc2lvbj1zeXMudmVyc2lvbls6M10pCiAgICAgICAgdHJ5OgogICAgICAgICAgICB3aXRoIGNscy5fb3Blbl9yZWdpc3RyeShrZXkpIGFzIGhrZXk6CiAgICAgICAgICAgICAgICBmaWxlcGF0aCA9IF93aW5yZWcuUXVlcnlWYWx1ZShoa2V5LCAiIikKICAgICAgICBleGNlcHQgV2luZG93c0Vycm9yOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHJldHVybiBmaWxlcGF0aAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZpbmRfbW9kdWxlKGNscywgZnVsbG5hbWUsIHBhdGg9Tm9uZSk6CiAgICAgICAgIiIiRmluZCBtb2R1bGUgbmFtZWQgaW4gdGhlIHJlZ2lzdHJ5LiIiIgogICAgICAgIGZpbGVwYXRoID0gY2xzLl9zZWFyY2hfcmVnaXN0cnkoZnVsbG5hbWUpCiAgICAgICAgaWYgZmlsZXBhdGggaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICB0cnk6CiAgICAgICAgICAgIF9vcy5zdGF0KGZpbGVwYXRoKQogICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGZvciBsb2FkZXIsIHN1ZmZpeGVzLCBfIGluIF9nZXRfc3VwcG9ydGVkX2ZpbGVfbG9hZGVycygpOgogICAgICAgICAgICBpZiBmaWxlcGF0aC5lbmRzd2l0aCh0dXBsZShzdWZmaXhlcykpOgogICAgICAgICAgICAgICAgcmV0dXJuIGxvYWRlcihmdWxsbmFtZSwgZmlsZXBhdGgpCgoKY2xhc3MgX0xvYWRlckJhc2ljczoKCiAgICAiIiJCYXNlIGNsYXNzIG9mIGNvbW1vbiBjb2RlIG5lZWRlZCBieSBib3RoIFNvdXJjZUxvYWRlciBhbmQKICAgIFNvdXJjZWxlc3NGaWxlTG9hZGVyLiIiIgoKICAgIGRlZiBpc19wYWNrYWdlKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICAiIiJDb25jcmV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBJbnNwZWN0TG9hZGVyLmlzX3BhY2thZ2UgYnkgY2hlY2tpbmcgaWYKICAgICAgICB0aGUgcGF0aCByZXR1cm5lZCBieSBnZXRfZmlsZW5hbWUgaGFzIGEgZmlsZW5hbWUgb2YgJ19faW5pdF9fLnB5Jy4iIiIKICAgICAgICBmaWxlbmFtZSA9IF9wYXRoX3NwbGl0KHNlbGYuZ2V0X2ZpbGVuYW1lKGZ1bGxuYW1lKSlbMV0KICAgICAgICBmaWxlbmFtZV9iYXNlID0gZmlsZW5hbWUucnNwbGl0KCcuJywgMSlbMF0KICAgICAgICB0YWlsX25hbWUgPSBmdWxsbmFtZS5ycGFydGl0aW9uKCcuJylbMl0KICAgICAgICByZXR1cm4gZmlsZW5hbWVfYmFzZSA9PSAnX19pbml0X18nIGFuZCB0YWlsX25hbWUgIT0gJ19faW5pdF9fJwoKICAgIGRlZiBfYnl0ZXNfZnJvbV9ieXRlY29kZShzZWxmLCBmdWxsbmFtZSwgZGF0YSwgYnl0ZWNvZGVfcGF0aCwgc291cmNlX3N0YXRzKToKICAgICAgICAiIiJSZXR1cm4gdGhlIG1hcnNoYWxsZWQgYnl0ZXMgZnJvbSBieXRlY29kZSwgdmVyaWZ5aW5nIHRoZSBtYWdpYwogICAgICAgIG51bWJlciwgdGltZXN0YW1wIGFuZCBzb3VyY2Ugc2l6ZSBhbG9uZyB0aGUgd2F5LgoKICAgICAgICBJZiBzb3VyY2Vfc3RhdHMgaXMgTm9uZSB0aGVuIHNraXAgdGhlIHRpbWVzdGFtcCBjaGVjay4KCiAgICAgICAgIiIiCiAgICAgICAgbWFnaWMgPSBkYXRhWzo0XQogICAgICAgIHJhd190aW1lc3RhbXAgPSBkYXRhWzQ6OF0KICAgICAgICByYXdfc2l6ZSA9IGRhdGFbODoxMl0KICAgICAgICBpZiBtYWdpYyAhPSBfTUFHSUNfQllURVM6CiAgICAgICAgICAgIG1zZyA9ICdiYWQgbWFnaWMgbnVtYmVyIGluIHshcn06IHshcn0nLmZvcm1hdChmdWxsbmFtZSwgbWFnaWMpCiAgICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKG1zZywgbmFtZT1mdWxsbmFtZSwgcGF0aD1ieXRlY29kZV9wYXRoKQogICAgICAgIGVsaWYgbGVuKHJhd190aW1lc3RhbXApICE9IDQ6CiAgICAgICAgICAgIG1lc3NhZ2UgPSAnYmFkIHRpbWVzdGFtcCBpbiB7fScuZm9ybWF0KGZ1bGxuYW1lKQogICAgICAgICAgICBfdmVyYm9zZV9tZXNzYWdlKG1lc3NhZ2UpCiAgICAgICAgICAgIHJhaXNlIEVPRkVycm9yKG1lc3NhZ2UpCiAgICAgICAgZWxpZiBsZW4ocmF3X3NpemUpICE9IDQ6CiAgICAgICAgICAgIG1lc3NhZ2UgPSAnYmFkIHNpemUgaW4ge30nLmZvcm1hdChmdWxsbmFtZSkKICAgICAgICAgICAgX3ZlcmJvc2VfbWVzc2FnZShtZXNzYWdlKQogICAgICAgICAgICByYWlzZSBFT0ZFcnJvcihtZXNzYWdlKQogICAgICAgIGlmIHNvdXJjZV9zdGF0cyBpcyBub3QgTm9uZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc291cmNlX210aW1lID0gaW50KHNvdXJjZV9zdGF0c1snbXRpbWUnXSkKICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgX3JfbG9uZyhyYXdfdGltZXN0YW1wKSAhPSBzb3VyY2VfbXRpbWU6CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdieXRlY29kZSBpcyBzdGFsZSBmb3Ige30nLmZvcm1hdChmdWxsbmFtZSkKICAgICAgICAgICAgICAgICAgICBfdmVyYm9zZV9tZXNzYWdlKG1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IobWVzc2FnZSwgbmFtZT1mdWxsbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPWJ5dGVjb2RlX3BhdGgpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNvdXJjZV9zaXplID0gc291cmNlX3N0YXRzWydzaXplJ10gJiAweEZGRkZGRkZGCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIF9yX2xvbmcocmF3X3NpemUpICE9IHNvdXJjZV9zaXplOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAiYnl0ZWNvZGUgaXMgc3RhbGUgZm9yIHt9Ii5mb3JtYXQoZnVsbG5hbWUpLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lPWZ1bGxuYW1lLCBwYXRoPWJ5dGVjb2RlX3BhdGgpCiAgICAgICAgIyBDYW4ndCByZXR1cm4gdGhlIGNvZGUgb2JqZWN0IGFzIGVycm9ycyBmcm9tIG1hcnNoYWwgbG9hZGluZyBuZWVkIHRvCiAgICAgICAgIyBwcm9wYWdhdGUgZXZlbiB3aGVuIHNvdXJjZSBpcyBhdmFpbGFibGUuCiAgICAgICAgcmV0dXJuIGRhdGFbMTI6XQoKICAgIEBtb2R1bGVfZm9yX2xvYWRlcgogICAgZGVmIF9sb2FkX21vZHVsZShzZWxmLCBtb2R1bGUsICosIHNvdXJjZWxlc3M9RmFsc2UpOgogICAgICAgICIiIkhlbHBlciBmb3IgbG9hZF9tb2R1bGUgYWJsZSB0byBoYW5kbGUgZWl0aGVyIHNvdXJjZSBvciBzb3VyY2VsZXNzCiAgICAgICAgbG9hZGluZy4iIiIKICAgICAgICBuYW1lID0gbW9kdWxlLl9fbmFtZV9fCiAgICAgICAgY29kZV9vYmplY3QgPSBzZWxmLmdldF9jb2RlKG5hbWUpCiAgICAgICAgbW9kdWxlLl9fZmlsZV9fID0gc2VsZi5nZXRfZmlsZW5hbWUobmFtZSkKICAgICAgICBpZiBub3Qgc291cmNlbGVzczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbW9kdWxlLl9fY2FjaGVkX18gPSBjYWNoZV9mcm9tX3NvdXJjZShtb2R1bGUuX19maWxlX18pCiAgICAgICAgICAgIGV4Y2VwdCBOb3RJbXBsZW1lbnRlZEVycm9yOgogICAgICAgICAgICAgICAgbW9kdWxlLl9fY2FjaGVkX18gPSBtb2R1bGUuX19maWxlX18KICAgICAgICBlbHNlOgogICAgICAgICAgICBtb2R1bGUuX19jYWNoZWRfXyA9IG1vZHVsZS5fX2ZpbGVfXwogICAgICAgIG1vZHVsZS5fX3BhY2thZ2VfXyA9IG5hbWUKICAgICAgICBpZiBzZWxmLmlzX3BhY2thZ2UobmFtZSk6CiAgICAgICAgICAgIG1vZHVsZS5fX3BhdGhfXyA9IFtfcGF0aF9zcGxpdChtb2R1bGUuX19maWxlX18pWzBdXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1vZHVsZS5fX3BhY2thZ2VfXyA9IG1vZHVsZS5fX3BhY2thZ2VfXy5ycGFydGl0aW9uKCcuJylbMF0KICAgICAgICBtb2R1bGUuX19sb2FkZXJfXyA9IHNlbGYKICAgICAgICBfY2FsbF93aXRoX2ZyYW1lc19yZW1vdmVkKGV4ZWMsIGNvZGVfb2JqZWN0LCBtb2R1bGUuX19kaWN0X18pCiAgICAgICAgcmV0dXJuIG1vZHVsZQoKCmNsYXNzIFNvdXJjZUxvYWRlcihfTG9hZGVyQmFzaWNzKToKCiAgICBkZWYgcGF0aF9tdGltZShzZWxmLCBwYXRoKToKICAgICAgICAiIiJPcHRpb25hbCBtZXRob2QgdGhhdCByZXR1cm5zIHRoZSBtb2RpZmljYXRpb24gdGltZSAoYW4gaW50KSBmb3IgdGhlCiAgICAgICAgc3BlY2lmaWVkIHBhdGgsIHdoZXJlIHBhdGggaXMgYSBzdHIuCiAgICAgICAgIiIiCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcgoKICAgIGRlZiBwYXRoX3N0YXRzKHNlbGYsIHBhdGgpOgogICAgICAgICIiIk9wdGlvbmFsIG1ldGhvZCByZXR1cm5pbmcgYSBtZXRhZGF0YSBkaWN0IGZvciB0aGUgc3BlY2lmaWVkIHBhdGgKICAgICAgICB0byBieSB0aGUgcGF0aCAoc3RyKS4KICAgICAgICBQb3NzaWJsZSBrZXlzOgogICAgICAgIC0gJ210aW1lJyAobWFuZGF0b3J5KSBpcyB0aGUgbnVtZXJpYyB0aW1lc3RhbXAgb2YgbGFzdCBzb3VyY2UKICAgICAgICAgIGNvZGUgbW9kaWZpY2F0aW9uOwogICAgICAgIC0gJ3NpemUnIChvcHRpb25hbCkgaXMgdGhlIHNpemUgaW4gYnl0ZXMgb2YgdGhlIHNvdXJjZSBjb2RlLgoKICAgICAgICBJbXBsZW1lbnRpbmcgdGhpcyBtZXRob2QgYWxsb3dzIHRoZSBsb2FkZXIgdG8gcmVhZCBieXRlY29kZSBmaWxlcy4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4geydtdGltZSc6IHNlbGYucGF0aF9tdGltZShwYXRoKX0KCiAgICBkZWYgX2NhY2hlX2J5dGVjb2RlKHNlbGYsIHNvdXJjZV9wYXRoLCBjYWNoZV9wYXRoLCBkYXRhKToKICAgICAgICAiIiJPcHRpb25hbCBtZXRob2Qgd2hpY2ggd3JpdGVzIGRhdGEgKGJ5dGVzKSB0byBhIGZpbGUgcGF0aCAoYSBzdHIpLgoKICAgICAgICBJbXBsZW1lbnRpbmcgdGhpcyBtZXRob2QgYWxsb3dzIGZvciB0aGUgd3JpdGluZyBvZiBieXRlY29kZSBmaWxlcy4KCiAgICAgICAgVGhlIHNvdXJjZSBwYXRoIGlzIG5lZWRlZCBpbiBvcmRlciB0byBjb3JyZWN0bHkgdHJhbnNmZXIgcGVybWlzc2lvbnMKICAgICAgICAiIiIKICAgICAgICAjIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgd2UgZGVsZWdhdGUgdG8gc2V0X2RhdGEoKQogICAgICAgIHJldHVybiBzZWxmLnNldF9kYXRhKGNhY2hlX3BhdGgsIGRhdGEpCgogICAgZGVmIHNldF9kYXRhKHNlbGYsIHBhdGgsIGRhdGEpOgogICAgICAgICIiIk9wdGlvbmFsIG1ldGhvZCB3aGljaCB3cml0ZXMgZGF0YSAoYnl0ZXMpIHRvIGEgZmlsZSBwYXRoIChhIHN0cikuCgogICAgICAgIEltcGxlbWVudGluZyB0aGlzIG1ldGhvZCBhbGxvd3MgZm9yIHRoZSB3cml0aW5nIG9mIGJ5dGVjb2RlIGZpbGVzLgoKICAgICAgICAiIiIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yCgoKICAgIGRlZiBnZXRfc291cmNlKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICAiIiJDb25jcmV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBJbnNwZWN0TG9hZGVyLmdldF9zb3VyY2UuIiIiCiAgICAgICAgaW1wb3J0IHRva2VuaXplCiAgICAgICAgcGF0aCA9IHNlbGYuZ2V0X2ZpbGVuYW1lKGZ1bGxuYW1lKQogICAgICAgIHRyeToKICAgICAgICAgICAgc291cmNlX2J5dGVzID0gc2VsZi5nZXRfZGF0YShwYXRoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yIGFzIGV4YzoKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoInNvdXJjZSBub3QgYXZhaWxhYmxlIHRocm91Z2ggZ2V0X2RhdGEoKSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9ZnVsbG5hbWUpIGZyb20gZXhjCiAgICAgICAgcmVhZHNvdXJjZSA9IF9pby5CeXRlc0lPKHNvdXJjZV9ieXRlcykucmVhZGxpbmUKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVuY29kaW5nID0gdG9rZW5pemUuZGV0ZWN0X2VuY29kaW5nKHJlYWRzb3VyY2UpCiAgICAgICAgZXhjZXB0IFN5bnRheEVycm9yIGFzIGV4YzoKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoIkZhaWxlZCB0byBkZXRlY3QgZW5jb2RpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPWZ1bGxuYW1lKSBmcm9tIGV4YwogICAgICAgIG5ld2xpbmVfZGVjb2RlciA9IF9pby5JbmNyZW1lbnRhbE5ld2xpbmVEZWNvZGVyKE5vbmUsIFRydWUpCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gbmV3bGluZV9kZWNvZGVyLmRlY29kZShzb3VyY2VfYnl0ZXMuZGVjb2RlKGVuY29kaW5nWzBdKSkKICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yIGFzIGV4YzoKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoIkZhaWxlZCB0byBkZWNvZGUgc291cmNlIGZpbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPWZ1bGxuYW1lKSBmcm9tIGV4YwoKICAgIGRlZiBnZXRfY29kZShzZWxmLCBmdWxsbmFtZSk6CiAgICAgICAgIiIiQ29uY3JldGUgaW1wbGVtZW50YXRpb24gb2YgSW5zcGVjdExvYWRlci5nZXRfY29kZS4KCiAgICAgICAgUmVhZGluZyBvZiBieXRlY29kZSByZXF1aXJlcyBwYXRoX3N0YXRzIHRvIGJlIGltcGxlbWVudGVkLiBUbyB3cml0ZQogICAgICAgIGJ5dGVjb2RlLCBzZXRfZGF0YSBtdXN0IGFsc28gYmUgaW1wbGVtZW50ZWQuCgogICAgICAgICIiIgogICAgICAgIHNvdXJjZV9wYXRoID0gc2VsZi5nZXRfZmlsZW5hbWUoZnVsbG5hbWUpCiAgICAgICAgc291cmNlX210aW1lID0gTm9uZQogICAgICAgIHRyeToKICAgICAgICAgICAgYnl0ZWNvZGVfcGF0aCA9IGNhY2hlX2Zyb21fc291cmNlKHNvdXJjZV9wYXRoKQogICAgICAgIGV4Y2VwdCBOb3RJbXBsZW1lbnRlZEVycm9yOgogICAgICAgICAgICBieXRlY29kZV9wYXRoID0gTm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHN0ID0gc2VsZi5wYXRoX3N0YXRzKHNvdXJjZV9wYXRoKQogICAgICAgICAgICBleGNlcHQgTm90SW1wbGVtZW50ZWRFcnJvcjoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNvdXJjZV9tdGltZSA9IGludChzdFsnbXRpbWUnXSkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBkYXRhID0gc2VsZi5nZXRfZGF0YShieXRlY29kZV9wYXRoKQogICAgICAgICAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzX2RhdGEgPSBzZWxmLl9ieXRlc19mcm9tX2J5dGVjb2RlKGZ1bGxuYW1lLCBkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlY29kZV9wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdCkKICAgICAgICAgICAgICAgICAgICBleGNlcHQgKEltcG9ydEVycm9yLCBFT0ZFcnJvcik6CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBfdmVyYm9zZV9tZXNzYWdlKCd7fSBtYXRjaGVzIHt9JywgYnl0ZWNvZGVfcGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYXRoKQogICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IG1hcnNoYWwubG9hZHMoYnl0ZXNfZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShmb3VuZCwgX2NvZGVfdHlwZSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaW1wLl9maXhfY29fZmlsZW5hbWUoZm91bmQsIHNvdXJjZV9wYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZlcmJvc2VfbWVzc2FnZSgnY29kZSBvYmplY3QgZnJvbSB7fScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZWNvZGVfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gIk5vbi1jb2RlIG9iamVjdCBpbiB7fSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKG1zZy5mb3JtYXQoYnl0ZWNvZGVfcGF0aCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPWZ1bGxuYW1lLCBwYXRoPWJ5dGVjb2RlX3BhdGgpCiAgICAgICAgc291cmNlX2J5dGVzID0gc2VsZi5nZXRfZGF0YShzb3VyY2VfcGF0aCkKICAgICAgICBjb2RlX29iamVjdCA9IF9jYWxsX3dpdGhfZnJhbWVzX3JlbW92ZWQoY29tcGlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfYnl0ZXMsIHNvdXJjZV9wYXRoLCAnZXhlYycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9udF9pbmhlcml0PVRydWUpCiAgICAgICAgX3ZlcmJvc2VfbWVzc2FnZSgnY29kZSBvYmplY3QgZnJvbSB7fScsIHNvdXJjZV9wYXRoKQogICAgICAgIGlmIChub3Qgc3lzLmRvbnRfd3JpdGVfYnl0ZWNvZGUgYW5kIGJ5dGVjb2RlX3BhdGggaXMgbm90IE5vbmUgYW5kCiAgICAgICAgICAgIHNvdXJjZV9tdGltZSBpcyBub3QgTm9uZSk6CiAgICAgICAgICAgIGRhdGEgPSBieXRlYXJyYXkoX01BR0lDX0JZVEVTKQogICAgICAgICAgICBkYXRhLmV4dGVuZChfd19sb25nKHNvdXJjZV9tdGltZSkpCiAgICAgICAgICAgIGRhdGEuZXh0ZW5kKF93X2xvbmcobGVuKHNvdXJjZV9ieXRlcykpKQogICAgICAgICAgICBkYXRhLmV4dGVuZChtYXJzaGFsLmR1bXBzKGNvZGVfb2JqZWN0KSkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5fY2FjaGVfYnl0ZWNvZGUoc291cmNlX3BhdGgsIGJ5dGVjb2RlX3BhdGgsIGRhdGEpCiAgICAgICAgICAgICAgICBfdmVyYm9zZV9tZXNzYWdlKCd3cm90ZSB7IXJ9JywgYnl0ZWNvZGVfcGF0aCkKICAgICAgICAgICAgZXhjZXB0IE5vdEltcGxlbWVudGVkRXJyb3I6CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgcmV0dXJuIGNvZGVfb2JqZWN0CgogICAgZGVmIGxvYWRfbW9kdWxlKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICAiIiJDb25jcmV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBMb2FkZXIubG9hZF9tb2R1bGUuCgogICAgICAgIFJlcXVpcmVzIEV4ZWN1dGlvbkxvYWRlci5nZXRfZmlsZW5hbWUgYW5kIFJlc291cmNlTG9hZGVyLmdldF9kYXRhIHRvIGJlCiAgICAgICAgaW1wbGVtZW50ZWQgdG8gbG9hZCBzb3VyY2UgY29kZS4gVXNlIG9mIGJ5dGVjb2RlIGlzIGRpY3RhdGVkIGJ5IHdoZXRoZXIKICAgICAgICBnZXRfY29kZSB1c2VzL3dyaXRlcyBieXRlY29kZS4KCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX2xvYWRfbW9kdWxlKGZ1bGxuYW1lKQoKCmNsYXNzIEZpbGVMb2FkZXI6CgogICAgIiIiQmFzZSBmaWxlIGxvYWRlciBjbGFzcyB3aGljaCBpbXBsZW1lbnRzIHRoZSBsb2FkZXIgcHJvdG9jb2wgbWV0aG9kcyB0aGF0CiAgICByZXF1aXJlIGZpbGUgc3lzdGVtIHVzYWdlLiIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmdWxsbmFtZSwgcGF0aCk6CiAgICAgICAgIiIiQ2FjaGUgdGhlIG1vZHVsZSBuYW1lIGFuZCB0aGUgcGF0aCB0byB0aGUgZmlsZSBmb3VuZCBieSB0aGUKICAgICAgICBmaW5kZXIuIiIiCiAgICAgICAgc2VsZi5uYW1lID0gZnVsbG5hbWUKICAgICAgICBzZWxmLnBhdGggPSBwYXRoCgogICAgQF9jaGVja19uYW1lCiAgICBkZWYgbG9hZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgICIiIkxvYWQgYSBtb2R1bGUgZnJvbSBhIGZpbGUuIiIiCiAgICAgICAgIyBJc3N1ZSAjMTQ4NTc6IEF2b2lkIHRoZSB6ZXJvLWFyZ3VtZW50IGZvcm0gc28gdGhlIGltcGxlbWVudGF0aW9uCiAgICAgICAgIyBvZiB0aGF0IGZvcm0gY2FuIGJlIHVwZGF0ZWQgd2l0aG91dCBicmVha2luZyB0aGUgZnJvemVuIG1vZHVsZQogICAgICAgIHJldHVybiBzdXBlcihGaWxlTG9hZGVyLCBzZWxmKS5sb2FkX21vZHVsZShmdWxsbmFtZSkKCiAgICBAX2NoZWNrX25hbWUKICAgIGRlZiBnZXRfZmlsZW5hbWUoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgICIiIlJldHVybiB0aGUgcGF0aCB0byB0aGUgc291cmNlIGZpbGUgYXMgZm91bmQgYnkgdGhlIGZpbmRlci4iIiIKICAgICAgICByZXR1cm4gc2VsZi5wYXRoCgogICAgZGVmIGdldF9kYXRhKHNlbGYsIHBhdGgpOgogICAgICAgICIiIlJldHVybiB0aGUgZGF0YSBmcm9tIHBhdGggYXMgcmF3IGJ5dGVzLiIiIgogICAgICAgIHdpdGggX2lvLkZpbGVJTyhwYXRoLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIHJldHVybiBmaWxlLnJlYWQoKQoKCmNsYXNzIFNvdXJjZUZpbGVMb2FkZXIoRmlsZUxvYWRlciwgU291cmNlTG9hZGVyKToKCiAgICAiIiJDb25jcmV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBTb3VyY2VMb2FkZXIgdXNpbmcgdGhlIGZpbGUgc3lzdGVtLiIiIgoKICAgIGRlZiBwYXRoX3N0YXRzKHNlbGYsIHBhdGgpOgogICAgICAgICIiIlJldHVybiB0aGUgbWV0YWRhdGEgZm9yIHRoZSBwYXRoLiIiIgogICAgICAgIHN0ID0gX29zLnN0YXQocGF0aCkKICAgICAgICByZXR1cm4geydtdGltZSc6IHN0LnN0X210aW1lLCAnc2l6ZSc6IHN0LnN0X3NpemV9CgogICAgZGVmIF9jYWNoZV9ieXRlY29kZShzZWxmLCBzb3VyY2VfcGF0aCwgYnl0ZWNvZGVfcGF0aCwgZGF0YSk6CiAgICAgICAgIyBBZGFwdCBiZXR3ZWVuIHRoZSB0d28gQVBJcwogICAgICAgIHRyeToKICAgICAgICAgICAgbW9kZSA9IF9vcy5zdGF0KHNvdXJjZV9wYXRoKS5zdF9tb2RlCiAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgIG1vZGUgPSAwbzY2NgogICAgICAgIHJldHVybiBzZWxmLnNldF9kYXRhKGJ5dGVjb2RlX3BhdGgsIGRhdGEsIF9tb2RlPW1vZGUpCgogICAgZGVmIHNldF9kYXRhKHNlbGYsIHBhdGgsIGRhdGEsICosIF9tb2RlPTBvNjY2KToKICAgICAgICAiIiJXcml0ZSBieXRlcyBkYXRhIHRvIGEgZmlsZS4iIiIKICAgICAgICBwYXJlbnQsIGZpbGVuYW1lID0gX3BhdGhfc3BsaXQocGF0aCkKICAgICAgICBwYXRoX3BhcnRzID0gW10KICAgICAgICAjIEZpZ3VyZSBvdXQgd2hhdCBkaXJlY3RvcmllcyBhcmUgbWlzc2luZy4KICAgICAgICB3aGlsZSBwYXJlbnQgYW5kIG5vdCBfcGF0aF9pc2RpcihwYXJlbnQpOgogICAgICAgICAgICBwYXJlbnQsIHBhcnQgPSBfcGF0aF9zcGxpdChwYXJlbnQpCiAgICAgICAgICAgIHBhdGhfcGFydHMuYXBwZW5kKHBhcnQpCiAgICAgICAgIyBDcmVhdGUgbmVlZGVkIGRpcmVjdG9yaWVzLgogICAgICAgIGZvciBwYXJ0IGluIHJldmVyc2VkKHBhdGhfcGFydHMpOgogICAgICAgICAgICBwYXJlbnQgPSBfcGF0aF9qb2luKHBhcmVudCwgcGFydCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgX29zLm1rZGlyKHBhcmVudCkKICAgICAgICAgICAgZXhjZXB0IEZpbGVFeGlzdHNFcnJvcjoKICAgICAgICAgICAgICAgICMgUHJvYmFibHkgYW5vdGhlciBQeXRob24gcHJvY2VzcyBhbHJlYWR5IGNyZWF0ZWQgdGhlIGRpci4KICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGV4Y2VwdCBQZXJtaXNzaW9uRXJyb3I6CiAgICAgICAgICAgICAgICAjIElmIGNhbid0IGdldCBwcm9wZXIgYWNjZXNzLCB0aGVuIGp1c3QgZm9yZ2V0IGFib3V0IHdyaXRpbmcKICAgICAgICAgICAgICAgICMgdGhlIGRhdGEuCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICB0cnk6CiAgICAgICAgICAgIF93cml0ZV9hdG9taWMocGF0aCwgZGF0YSwgX21vZGUpCiAgICAgICAgICAgIF92ZXJib3NlX21lc3NhZ2UoJ2NyZWF0ZWQgeyFyfScsIHBhdGgpCiAgICAgICAgZXhjZXB0IChQZXJtaXNzaW9uRXJyb3IsIEZpbGVFeGlzdHNFcnJvcik6CiAgICAgICAgICAgICMgRG9uJ3Qgd29ycnkgaWYgeW91IGNhbid0IHdyaXRlIGJ5dGVjb2RlIG9yIHNvbWVvbmUgaXMgd3JpdGluZwogICAgICAgICAgICAjIGl0IGF0IHRoZSBzYW1lIHRpbWUuCiAgICAgICAgICAgIHBhc3MKCgpjbGFzcyBTb3VyY2VsZXNzRmlsZUxvYWRlcihGaWxlTG9hZGVyLCBfTG9hZGVyQmFzaWNzKToKCiAgICAiIiJMb2FkZXIgd2hpY2ggaGFuZGxlcyBzb3VyY2VsZXNzIGZpbGUgaW1wb3J0cy4iIiIKCiAgICBkZWYgbG9hZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgIHJldHVybiBzZWxmLl9sb2FkX21vZHVsZShmdWxsbmFtZSwgc291cmNlbGVzcz1UcnVlKQoKICAgIGRlZiBnZXRfY29kZShzZWxmLCBmdWxsbmFtZSk6CiAgICAgICAgcGF0aCA9IHNlbGYuZ2V0X2ZpbGVuYW1lKGZ1bGxuYW1lKQogICAgICAgIGRhdGEgPSBzZWxmLmdldF9kYXRhKHBhdGgpCiAgICAgICAgYnl0ZXNfZGF0YSA9IHNlbGYuX2J5dGVzX2Zyb21fYnl0ZWNvZGUoZnVsbG5hbWUsIGRhdGEsIHBhdGgsIE5vbmUpCiAgICAgICAgZm91bmQgPSBtYXJzaGFsLmxvYWRzKGJ5dGVzX2RhdGEpCiAgICAgICAgaWYgaXNpbnN0YW5jZShmb3VuZCwgX2NvZGVfdHlwZSk6CiAgICAgICAgICAgIF92ZXJib3NlX21lc3NhZ2UoJ2NvZGUgb2JqZWN0IGZyb20geyFyfScsIHBhdGgpCiAgICAgICAgICAgIHJldHVybiBmb3VuZAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKCJOb24tY29kZSBvYmplY3QgaW4ge30iLmZvcm1hdChwYXRoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1mdWxsbmFtZSwgcGF0aD1wYXRoKQoKICAgIGRlZiBnZXRfc291cmNlKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICAiIiJSZXR1cm4gTm9uZSBhcyB0aGVyZSBpcyBubyBzb3VyY2UgY29kZS4iIiIKICAgICAgICByZXR1cm4gTm9uZQoKCiMgRmlsbGVkIGluIGJ5IF9zZXR1cCgpLgpFWFRFTlNJT05fU1VGRklYRVMgPSBbXQoKCmNsYXNzIEV4dGVuc2lvbkZpbGVMb2FkZXI6CgogICAgIiIiTG9hZGVyIGZvciBleHRlbnNpb24gbW9kdWxlcy4KCiAgICBUaGUgY29uc3RydWN0b3IgaXMgZGVzaWduZWQgdG8gd29yayB3aXRoIEZpbGVGaW5kZXIuCgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIHBhdGgpOgogICAgICAgIHNlbGYubmFtZSA9IG5hbWUKICAgICAgICBzZWxmLnBhdGggPSBwYXRoCgogICAgQF9jaGVja19uYW1lCiAgICBAc2V0X3BhY2thZ2UKICAgIEBzZXRfbG9hZGVyCiAgICBkZWYgbG9hZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgICIiIkxvYWQgYW4gZXh0ZW5zaW9uIG1vZHVsZS4iIiIKICAgICAgICBpc19yZWxvYWQgPSBmdWxsbmFtZSBpbiBzeXMubW9kdWxlcwogICAgICAgIHRyeToKICAgICAgICAgICAgbW9kdWxlID0gX2NhbGxfd2l0aF9mcmFtZXNfcmVtb3ZlZChfaW1wLmxvYWRfZHluYW1pYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxsbmFtZSwgc2VsZi5wYXRoKQogICAgICAgICAgICBfdmVyYm9zZV9tZXNzYWdlKCdleHRlbnNpb24gbW9kdWxlIGxvYWRlZCBmcm9tIHshcn0nLCBzZWxmLnBhdGgpCiAgICAgICAgICAgIGlmIHNlbGYuaXNfcGFja2FnZShmdWxsbmFtZSkgYW5kIG5vdCBoYXNhdHRyKG1vZHVsZSwgJ19fcGF0aF9fJyk6CiAgICAgICAgICAgICAgICBtb2R1bGUuX19wYXRoX18gPSBbX3BhdGhfc3BsaXQoc2VsZi5wYXRoKVswXV0KICAgICAgICAgICAgcmV0dXJuIG1vZHVsZQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgaWYgbm90IGlzX3JlbG9hZCBhbmQgZnVsbG5hbWUgaW4gc3lzLm1vZHVsZXM6CiAgICAgICAgICAgICAgICBkZWwgc3lzLm1vZHVsZXNbZnVsbG5hbWVdCiAgICAgICAgICAgIHJhaXNlCgogICAgZGVmIGlzX3BhY2thZ2Uoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgICIiIlJldHVybiBUcnVlIGlmIHRoZSBleHRlbnNpb24gbW9kdWxlIGlzIGEgcGFja2FnZS4iIiIKICAgICAgICBmaWxlX25hbWUgPSBfcGF0aF9zcGxpdChzZWxmLnBhdGgpWzFdCiAgICAgICAgcmV0dXJuIGFueShmaWxlX25hbWUgPT0gJ19faW5pdF9fJyArIHN1ZmZpeAogICAgICAgICAgICAgICAgICAgZm9yIHN1ZmZpeCBpbiBFWFRFTlNJT05fU1VGRklYRVMpCgogICAgZGVmIGdldF9jb2RlKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICAiIiJSZXR1cm4gTm9uZSBhcyBhbiBleHRlbnNpb24gbW9kdWxlIGNhbm5vdCBjcmVhdGUgYSBjb2RlIG9iamVjdC4iIiIKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBnZXRfc291cmNlKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICAiIiJSZXR1cm4gTm9uZSBhcyBleHRlbnNpb24gbW9kdWxlcyBoYXZlIG5vIHNvdXJjZSBjb2RlLiIiIgogICAgICAgIHJldHVybiBOb25lCgoKY2xhc3MgX05hbWVzcGFjZVBhdGg6CiAgICAiIiJSZXByZXNlbnRzIGEgbmFtZXNwYWNlIHBhY2thZ2UncyBwYXRoLiAgSXQgdXNlcyB0aGUgbW9kdWxlIG5hbWUKICAgIHRvIGZpbmQgaXRzIHBhcmVudCBtb2R1bGUsIGFuZCBmcm9tIHRoZXJlIGl0IGxvb2tzIHVwIHRoZSBwYXJlbnQncwogICAgX19wYXRoX18uICBXaGVuIHRoaXMgY2hhbmdlcywgdGhlIG1vZHVsZSdzIG93biBwYXRoIGlzIHJlY29tcHV0ZWQsCiAgICB1c2luZyBwYXRoX2ZpbmRlci4gIEZvciB0b3AtbGV2ZSBtb2R1bGVzLCB0aGUgcGFyZW50IG1vZHVsZSdzIHBhdGgKICAgIGlzIHN5cy5wYXRoLiIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lLCBwYXRoLCBwYXRoX2ZpbmRlcik6CiAgICAgICAgc2VsZi5fbmFtZSA9IG5hbWUKICAgICAgICBzZWxmLl9wYXRoID0gcGF0aAogICAgICAgIHNlbGYuX2xhc3RfcGFyZW50X3BhdGggPSB0dXBsZShzZWxmLl9nZXRfcGFyZW50X3BhdGgoKSkKICAgICAgICBzZWxmLl9wYXRoX2ZpbmRlciA9IHBhdGhfZmluZGVyCgogICAgZGVmIF9maW5kX3BhcmVudF9wYXRoX25hbWVzKHNlbGYpOgogICAgICAgICIiIlJldHVybnMgYSB0dXBsZSBvZiAocGFyZW50LW1vZHVsZS1uYW1lLCBwYXJlbnQtcGF0aC1hdHRyLW5hbWUpIiIiCiAgICAgICAgcGFyZW50LCBkb3QsIG1lID0gc2VsZi5fbmFtZS5ycGFydGl0aW9uKCcuJykKICAgICAgICBpZiBkb3QgPT0gJyc6CiAgICAgICAgICAgICMgVGhpcyBpcyBhIHRvcC1sZXZlbCBtb2R1bGUuIHN5cy5wYXRoIGNvbnRhaW5zIHRoZSBwYXJlbnQgcGF0aC4KICAgICAgICAgICAgcmV0dXJuICdzeXMnLCAncGF0aCcKICAgICAgICAjIE5vdCBhIHRvcC1sZXZlbCBtb2R1bGUuIHBhcmVudC1tb2R1bGUuX19wYXRoX18gY29udGFpbnMgdGhlCiAgICAgICAgIyAgcGFyZW50IHBhdGguCiAgICAgICAgcmV0dXJuIHBhcmVudCwgJ19fcGF0aF9fJwoKICAgIGRlZiBfZ2V0X3BhcmVudF9wYXRoKHNlbGYpOgogICAgICAgIHBhcmVudF9tb2R1bGVfbmFtZSwgcGF0aF9hdHRyX25hbWUgPSBzZWxmLl9maW5kX3BhcmVudF9wYXRoX25hbWVzKCkKICAgICAgICByZXR1cm4gZ2V0YXR0cihzeXMubW9kdWxlc1twYXJlbnRfbW9kdWxlX25hbWVdLCBwYXRoX2F0dHJfbmFtZSkKCiAgICBkZWYgX3JlY2FsY3VsYXRlKHNlbGYpOgogICAgICAgICMgSWYgdGhlIHBhcmVudCdzIHBhdGggaGFzIGNoYW5nZWQsIHJlY2FsY3VsYXRlIF9wYXRoCiAgICAgICAgcGFyZW50X3BhdGggPSB0dXBsZShzZWxmLl9nZXRfcGFyZW50X3BhdGgoKSkgIyBNYWtlIGEgY29weQogICAgICAgIGlmIHBhcmVudF9wYXRoICE9IHNlbGYuX2xhc3RfcGFyZW50X3BhdGg6CiAgICAgICAgICAgIGxvYWRlciwgbmV3X3BhdGggPSBzZWxmLl9wYXRoX2ZpbmRlcihzZWxmLl9uYW1lLCBwYXJlbnRfcGF0aCkKICAgICAgICAgICAgIyBOb3RlIHRoYXQgbm8gY2hhbmdlcyBhcmUgbWFkZSBpZiBhIGxvYWRlciBpcyByZXR1cm5lZCwgYnV0IHdlCiAgICAgICAgICAgICMgIGRvIHJlbWVtYmVyIHRoZSBuZXcgcGFyZW50IHBhdGgKICAgICAgICAgICAgaWYgbG9hZGVyIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBzZWxmLl9wYXRoID0gbmV3X3BhdGgKICAgICAgICAgICAgc2VsZi5fbGFzdF9wYXJlbnRfcGF0aCA9IHBhcmVudF9wYXRoICAgICAjIFNhdmUgdGhlIGNvcHkKICAgICAgICByZXR1cm4gc2VsZi5fcGF0aAoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gaXRlcihzZWxmLl9yZWNhbGN1bGF0ZSgpKQoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiBsZW4oc2VsZi5fcmVjYWxjdWxhdGUoKSkKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICJfTmFtZXNwYWNlUGF0aCh7IXJ9KSIuZm9ybWF0KHNlbGYuX3BhdGgpCgogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBpdGVtKToKICAgICAgICByZXR1cm4gaXRlbSBpbiBzZWxmLl9yZWNhbGN1bGF0ZSgpCgogICAgZGVmIGFwcGVuZChzZWxmLCBpdGVtKToKICAgICAgICBzZWxmLl9wYXRoLmFwcGVuZChpdGVtKQoKCmNsYXNzIE5hbWVzcGFjZUxvYWRlcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lLCBwYXRoLCBwYXRoX2ZpbmRlcik6CiAgICAgICAgc2VsZi5fcGF0aCA9IF9OYW1lc3BhY2VQYXRoKG5hbWUsIHBhdGgsIHBhdGhfZmluZGVyKQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIG1vZHVsZV9yZXByKGNscywgbW9kdWxlKToKICAgICAgICByZXR1cm4gIjxtb2R1bGUgJ3t9JyAobmFtZXNwYWNlKT4iLmZvcm1hdChtb2R1bGUuX19uYW1lX18pCgogICAgQG1vZHVsZV9mb3JfbG9hZGVyCiAgICBkZWYgbG9hZF9tb2R1bGUoc2VsZiwgbW9kdWxlKToKICAgICAgICAiIiJMb2FkIGEgbmFtZXNwYWNlIG1vZHVsZS4iIiIKICAgICAgICBfdmVyYm9zZV9tZXNzYWdlKCduYW1lc3BhY2UgbW9kdWxlIGxvYWRlZCB3aXRoIHBhdGggeyFyfScsIHNlbGYuX3BhdGgpCiAgICAgICAgbW9kdWxlLl9fcGF0aF9fID0gc2VsZi5fcGF0aAogICAgICAgIHJldHVybiBtb2R1bGUKCgojIEZpbmRlcnMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpjbGFzcyBQYXRoRmluZGVyOgoKICAgICIiIk1ldGEgcGF0aCBmaW5kZXIgZm9yIHN5cy5wYXRoIGFuZCBwYWNrYWdlIF9fcGF0aF9fIGF0dHJpYnV0ZXMuIiIiCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgaW52YWxpZGF0ZV9jYWNoZXMoY2xzKToKICAgICAgICAiIiJDYWxsIHRoZSBpbnZhbGlkYXRlX2NhY2hlcygpIG1ldGhvZCBvbiBhbGwgcGF0aCBlbnRyeSBmaW5kZXJzCiAgICAgICAgc3RvcmVkIGluIHN5cy5wYXRoX2ltcG9ydGVyX2NhY2hlcyAod2hlcmUgaW1wbGVtZW50ZWQpLiIiIgogICAgICAgIGZvciBmaW5kZXIgaW4gc3lzLnBhdGhfaW1wb3J0ZXJfY2FjaGUudmFsdWVzKCk6CiAgICAgICAgICAgIGlmIGhhc2F0dHIoZmluZGVyLCAnaW52YWxpZGF0ZV9jYWNoZXMnKToKICAgICAgICAgICAgICAgIGZpbmRlci5pbnZhbGlkYXRlX2NhY2hlcygpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX3BhdGhfaG9va3MoY2xzLCBwYXRoKToKICAgICAgICAiIiJTZWFyY2ggc2VxdWVuY2Ugb2YgaG9va3MgZm9yIGEgZmluZGVyIGZvciAncGF0aCcuCgogICAgICAgIElmICdob29rcycgaXMgZmFsc2UgdGhlbiB1c2Ugc3lzLnBhdGhfaG9va3MuCgogICAgICAgICIiIgogICAgICAgIGlmIG5vdCBzeXMucGF0aF9ob29rczoKICAgICAgICAgICAgX3dhcm5pbmdzLndhcm4oJ3N5cy5wYXRoX2hvb2tzIGlzIGVtcHR5JywgSW1wb3J0V2FybmluZykKICAgICAgICBmb3IgaG9vayBpbiBzeXMucGF0aF9ob29rczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIGhvb2socGF0aCkKICAgICAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIF9wYXRoX2ltcG9ydGVyX2NhY2hlKGNscywgcGF0aCk6CiAgICAgICAgIiIiR2V0IHRoZSBmaW5kZXIgZm9yIHRoZSBwYXRoIGVudHJ5IGZyb20gc3lzLnBhdGhfaW1wb3J0ZXJfY2FjaGUuCgogICAgICAgIElmIHRoZSBwYXRoIGVudHJ5IGlzIG5vdCBpbiB0aGUgY2FjaGUsIGZpbmQgdGhlIGFwcHJvcHJpYXRlIGZpbmRlcgogICAgICAgIGFuZCBjYWNoZSBpdC4gSWYgbm8gZmluZGVyIGlzIGF2YWlsYWJsZSwgc3RvcmUgTm9uZS4KCiAgICAgICAgIiIiCiAgICAgICAgaWYgcGF0aCA9PSAnJzoKICAgICAgICAgICAgcGF0aCA9ICcuJwogICAgICAgIHRyeToKICAgICAgICAgICAgZmluZGVyID0gc3lzLnBhdGhfaW1wb3J0ZXJfY2FjaGVbcGF0aF0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIGZpbmRlciA9IGNscy5fcGF0aF9ob29rcyhwYXRoKQogICAgICAgICAgICBzeXMucGF0aF9pbXBvcnRlcl9jYWNoZVtwYXRoXSA9IGZpbmRlcgogICAgICAgIHJldHVybiBmaW5kZXIKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBfZ2V0X2xvYWRlcihjbHMsIGZ1bGxuYW1lLCBwYXRoKToKICAgICAgICAiIiJGaW5kIHRoZSBsb2FkZXIgb3IgbmFtZXNwYWNlX3BhdGggZm9yIHRoaXMgbW9kdWxlL3BhY2thZ2UgbmFtZS4iIiIKICAgICAgICAjIElmIHRoaXMgZW5kcyB1cCBiZWluZyBhIG5hbWVzcGFjZSBwYWNrYWdlLCBuYW1lc3BhY2VfcGF0aCBpcwogICAgICAgICMgIHRoZSBsaXN0IG9mIHBhdGhzIHRoYXQgd2lsbCBiZWNvbWUgaXRzIF9fcGF0aF9fCiAgICAgICAgbmFtZXNwYWNlX3BhdGggPSBbXQogICAgICAgIGZvciBlbnRyeSBpbiBwYXRoOgogICAgICAgICAgICBmaW5kZXIgPSBjbHMuX3BhdGhfaW1wb3J0ZXJfY2FjaGUoZW50cnkpCiAgICAgICAgICAgIGlmIGZpbmRlciBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIoZmluZGVyLCAnZmluZF9sb2FkZXInKToKICAgICAgICAgICAgICAgICAgICBsb2FkZXIsIHBvcnRpb25zID0gZmluZGVyLmZpbmRfbG9hZGVyKGZ1bGxuYW1lKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBsb2FkZXIgPSBmaW5kZXIuZmluZF9tb2R1bGUoZnVsbG5hbWUpCiAgICAgICAgICAgICAgICAgICAgcG9ydGlvbnMgPSBbXQogICAgICAgICAgICAgICAgaWYgbG9hZGVyIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICMgV2UgZm91bmQgYSBsb2FkZXI6IHJldHVybiBpdCBpbW1lZGlhdGVseS4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9hZGVyLCBuYW1lc3BhY2VfcGF0aAogICAgICAgICAgICAgICAgIyBUaGlzIGlzIHBvc3NpYmx5IHBhcnQgb2YgYSBuYW1lc3BhY2UgcGFja2FnZS4KICAgICAgICAgICAgICAgICMgIFJlbWVtYmVyIHRoZXNlIHBhdGggZW50cmllcyAoaWYgYW55KSBmb3Igd2hlbiB3ZQogICAgICAgICAgICAgICAgIyAgY3JlYXRlIGEgbmFtZXNwYWNlIHBhY2thZ2UsIGFuZCBjb250aW51ZSBpdGVyYXRpbmcKICAgICAgICAgICAgICAgICMgIG9uIHBhdGguCiAgICAgICAgICAgICAgICBuYW1lc3BhY2VfcGF0aC5leHRlbmQocG9ydGlvbnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUsIG5hbWVzcGFjZV9wYXRoCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZmluZF9tb2R1bGUoY2xzLCBmdWxsbmFtZSwgcGF0aD1Ob25lKToKICAgICAgICAiIiJGaW5kIHRoZSBtb2R1bGUgb24gc3lzLnBhdGggb3IgJ3BhdGgnIGJhc2VkIG9uIHN5cy5wYXRoX2hvb2tzIGFuZAogICAgICAgIHN5cy5wYXRoX2ltcG9ydGVyX2NhY2hlLiIiIgogICAgICAgIGlmIHBhdGggaXMgTm9uZToKICAgICAgICAgICAgcGF0aCA9IHN5cy5wYXRoCiAgICAgICAgbG9hZGVyLCBuYW1lc3BhY2VfcGF0aCA9IGNscy5fZ2V0X2xvYWRlcihmdWxsbmFtZSwgcGF0aCkKICAgICAgICBpZiBsb2FkZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJldHVybiBsb2FkZXIKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBuYW1lc3BhY2VfcGF0aDoKICAgICAgICAgICAgICAgICMgV2UgZm91bmQgYXQgbGVhc3Qgb25lIG5hbWVzcGFjZSBwYXRoLiAgUmV0dXJuIGEKICAgICAgICAgICAgICAgICMgIGxvYWRlciB3aGljaCBjYW4gY3JlYXRlIHRoZSBuYW1lc3BhY2UgcGFja2FnZS4KICAgICAgICAgICAgICAgIHJldHVybiBOYW1lc3BhY2VMb2FkZXIoZnVsbG5hbWUsIG5hbWVzcGFjZV9wYXRoLCBjbHMuX2dldF9sb2FkZXIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKCmNsYXNzIEZpbGVGaW5kZXI6CgogICAgIiIiRmlsZS1iYXNlZCBmaW5kZXIuCgogICAgSW50ZXJhY3Rpb25zIHdpdGggdGhlIGZpbGUgc3lzdGVtIGFyZSBjYWNoZWQgZm9yIHBlcmZvcm1hbmNlLCBiZWluZwogICAgcmVmcmVzaGVkIHdoZW4gdGhlIGRpcmVjdG9yeSB0aGUgZmluZGVyIGlzIGhhbmRsaW5nIGhhcyBiZWVuIG1vZGlmaWVkLgoKICAgICIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwYXRoLCAqZGV0YWlscyk6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSB3aXRoIHRoZSBwYXRoIHRvIHNlYXJjaCBvbiBhbmQgYSB2YXJpYWJsZSBudW1iZXIgb2YKICAgICAgICAzLXR1cGxlcyBjb250YWluaW5nIHRoZSBsb2FkZXIsIGZpbGUgc3VmZml4ZXMgdGhlIGxvYWRlciByZWNvZ25pemVzLAogICAgICAgIGFuZCBhIGJvb2xlYW4gb2Ygd2hldGhlciB0aGUgbG9hZGVyIGhhbmRsZXMgcGFja2FnZXMuIiIiCiAgICAgICAgbG9hZGVycyA9IFtdCiAgICAgICAgZm9yIGxvYWRlciwgc3VmZml4ZXMgaW4gZGV0YWlsczoKICAgICAgICAgICAgbG9hZGVycy5leHRlbmQoKHN1ZmZpeCwgbG9hZGVyKSBmb3Igc3VmZml4IGluIHN1ZmZpeGVzKQogICAgICAgIHNlbGYuX2xvYWRlcnMgPSBsb2FkZXJzCiAgICAgICAgIyBCYXNlIChkaXJlY3RvcnkpIHBhdGgKICAgICAgICBzZWxmLnBhdGggPSBwYXRoIG9yICcuJwogICAgICAgIHNlbGYuX3BhdGhfbXRpbWUgPSAtMQogICAgICAgIHNlbGYuX3BhdGhfY2FjaGUgPSBzZXQoKQogICAgICAgIHNlbGYuX3JlbGF4ZWRfcGF0aF9jYWNoZSA9IHNldCgpCgogICAgZGVmIGludmFsaWRhdGVfY2FjaGVzKHNlbGYpOgogICAgICAgICIiIkludmFsaWRhdGUgdGhlIGRpcmVjdG9yeSBtdGltZS4iIiIKICAgICAgICBzZWxmLl9wYXRoX210aW1lID0gLTEKCiAgICBmaW5kX21vZHVsZSA9IF9maW5kX21vZHVsZV9zaGltCgogICAgZGVmIGZpbmRfbG9hZGVyKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICAiIiJUcnkgdG8gZmluZCBhIGxvYWRlciBmb3IgdGhlIHNwZWNpZmllZCBtb2R1bGUsIG9yIHRoZSBuYW1lc3BhY2UKICAgICAgICBwYWNrYWdlIHBvcnRpb25zLiBSZXR1cm5zIChsb2FkZXIsIGxpc3Qtb2YtcG9ydGlvbnMpLiIiIgogICAgICAgIGlzX25hbWVzcGFjZSA9IEZhbHNlCiAgICAgICAgdGFpbF9tb2R1bGUgPSBmdWxsbmFtZS5ycGFydGl0aW9uKCcuJylbMl0KICAgICAgICB0cnk6CiAgICAgICAgICAgIG10aW1lID0gX29zLnN0YXQoc2VsZi5wYXRoKS5zdF9tdGltZQogICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICBtdGltZSA9IC0xCiAgICAgICAgaWYgbXRpbWUgIT0gc2VsZi5fcGF0aF9tdGltZToKICAgICAgICAgICAgc2VsZi5fZmlsbF9jYWNoZSgpCiAgICAgICAgICAgIHNlbGYuX3BhdGhfbXRpbWUgPSBtdGltZQogICAgICAgICMgdGFpbF9tb2R1bGUga2VlcHMgdGhlIG9yaWdpbmFsIGNhc2luZywgZm9yIF9fZmlsZV9fIGFuZCBmcmllbmRzCiAgICAgICAgaWYgX3JlbGF4X2Nhc2UoKToKICAgICAgICAgICAgY2FjaGUgPSBzZWxmLl9yZWxheGVkX3BhdGhfY2FjaGUKICAgICAgICAgICAgY2FjaGVfbW9kdWxlID0gdGFpbF9tb2R1bGUubG93ZXIoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNhY2hlID0gc2VsZi5fcGF0aF9jYWNoZQogICAgICAgICAgICBjYWNoZV9tb2R1bGUgPSB0YWlsX21vZHVsZQogICAgICAgICMgQ2hlY2sgaWYgdGhlIG1vZHVsZSBpcyB0aGUgbmFtZSBvZiBhIGRpcmVjdG9yeSAoYW5kIHRodXMgYSBwYWNrYWdlKS4KICAgICAgICBpZiBjYWNoZV9tb2R1bGUgaW4gY2FjaGU6CiAgICAgICAgICAgIGJhc2VfcGF0aCA9IF9wYXRoX2pvaW4oc2VsZi5wYXRoLCB0YWlsX21vZHVsZSkKICAgICAgICAgICAgaWYgX3BhdGhfaXNkaXIoYmFzZV9wYXRoKToKICAgICAgICAgICAgICAgIGZvciBzdWZmaXgsIGxvYWRlciBpbiBzZWxmLl9sb2FkZXJzOgogICAgICAgICAgICAgICAgICAgIGluaXRfZmlsZW5hbWUgPSAnX19pbml0X18nICsgc3VmZml4CiAgICAgICAgICAgICAgICAgICAgZnVsbF9wYXRoID0gX3BhdGhfam9pbihiYXNlX3BhdGgsIGluaXRfZmlsZW5hbWUpCiAgICAgICAgICAgICAgICAgICAgaWYgX3BhdGhfaXNmaWxlKGZ1bGxfcGF0aCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobG9hZGVyKGZ1bGxuYW1lLCBmdWxsX3BhdGgpLCBbYmFzZV9wYXRoXSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIyBBIG5hbWVzcGFjZSBwYWNrYWdlLCByZXR1cm4gdGhlIHBhdGggaWYgd2UgZG9uJ3QgYWxzbwogICAgICAgICAgICAgICAgICAgICMgIGZpbmQgYSBtb2R1bGUgaW4gdGhlIG5leHQgc2VjdGlvbi4KICAgICAgICAgICAgICAgICAgICBpc19uYW1lc3BhY2UgPSBUcnVlCiAgICAgICAgIyBDaGVjayBmb3IgYSBmaWxlIHcvIGEgcHJvcGVyIHN1ZmZpeCBleGlzdHMuCiAgICAgICAgZm9yIHN1ZmZpeCwgbG9hZGVyIGluIHNlbGYuX2xvYWRlcnM6CiAgICAgICAgICAgIGlmIGNhY2hlX21vZHVsZSArIHN1ZmZpeCBpbiBjYWNoZToKICAgICAgICAgICAgICAgIGZ1bGxfcGF0aCA9IF9wYXRoX2pvaW4oc2VsZi5wYXRoLCB0YWlsX21vZHVsZSArIHN1ZmZpeCkKICAgICAgICAgICAgICAgIGlmIF9wYXRoX2lzZmlsZShmdWxsX3BhdGgpOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAobG9hZGVyKGZ1bGxuYW1lLCBmdWxsX3BhdGgpLCBbXSkKICAgICAgICBpZiBpc19uYW1lc3BhY2U6CiAgICAgICAgICAgIHJldHVybiAoTm9uZSwgW2Jhc2VfcGF0aF0pCiAgICAgICAgcmV0dXJuIChOb25lLCBbXSkKCiAgICBkZWYgX2ZpbGxfY2FjaGUoc2VsZik6CiAgICAgICAgIiIiRmlsbCB0aGUgY2FjaGUgb2YgcG90ZW50aWFsIG1vZHVsZXMgYW5kIHBhY2thZ2VzIGZvciB0aGlzIGRpcmVjdG9yeS4iIiIKICAgICAgICBwYXRoID0gc2VsZi5wYXRoCiAgICAgICAgdHJ5OgogICAgICAgICAgICBjb250ZW50cyA9IF9vcy5saXN0ZGlyKHBhdGgpCiAgICAgICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgogICAgICAgICAgICAjIERpcmVjdG9yeSBoYXMgYmVlbiByZW1vdmVkIHNpbmNlIGxhc3QgaW1wb3J0CiAgICAgICAgICAgIGNvbnRlbnRzID0gW10KICAgICAgICAjIFdlIHN0b3JlIHR3byBjYWNoZWQgdmVyc2lvbnMsIHRvIGhhbmRsZSBydW50aW1lIGNoYW5nZXMgb2YgdGhlCiAgICAgICAgIyBQWVRIT05DQVNFT0sgZW52aXJvbm1lbnQgdmFyaWFibGUuCiAgICAgICAgaWYgbm90IHN5cy5wbGF0Zm9ybS5zdGFydHN3aXRoKCd3aW4nKToKICAgICAgICAgICAgc2VsZi5fcGF0aF9jYWNoZSA9IHNldChjb250ZW50cykKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIFdpbmRvd3MgdXNlcnMgY2FuIGltcG9ydCBtb2R1bGVzIHdpdGggY2FzZS1pbnNlbnNpdGl2ZSBmaWxlCiAgICAgICAgICAgICMgc3VmZml4ZXMgKGZvciBsZWdhY3kgcmVhc29ucykuIE1ha2UgdGhlIHN1ZmZpeCBsb3dlcmNhc2UgaGVyZQogICAgICAgICAgICAjIHNvIGl0J3MgZG9uZSBvbmNlIGluc3RlYWQgb2YgZm9yIGV2ZXJ5IGltcG9ydC4gVGhpcyBpcyBzYWZlIGFzCiAgICAgICAgICAgICMgdGhlIHNwZWNpZmllZCBzdWZmaXhlcyB0byBjaGVjayBhZ2FpbnN0IGFyZSBhbHdheXMgc3BlY2lmaWVkIGluIGEKICAgICAgICAgICAgIyBjYXNlLXNlbnNpdGl2ZSBtYW5uZXIuCiAgICAgICAgICAgIGxvd2VyX3N1ZmZpeF9jb250ZW50cyA9IHNldCgpCiAgICAgICAgICAgIGZvciBpdGVtIGluIGNvbnRlbnRzOgogICAgICAgICAgICAgICAgbmFtZSwgZG90LCBzdWZmaXggPSBpdGVtLnBhcnRpdGlvbignLicpCiAgICAgICAgICAgICAgICBpZiBkb3Q6CiAgICAgICAgICAgICAgICAgICAgbmV3X25hbWUgPSAne30ue30nLmZvcm1hdChuYW1lLCBzdWZmaXgubG93ZXIoKSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbmV3X25hbWUgPSBuYW1lCiAgICAgICAgICAgICAgICBsb3dlcl9zdWZmaXhfY29udGVudHMuYWRkKG5ld19uYW1lKQogICAgICAgICAgICBzZWxmLl9wYXRoX2NhY2hlID0gbG93ZXJfc3VmZml4X2NvbnRlbnRzCiAgICAgICAgaWYgc3lzLnBsYXRmb3JtLnN0YXJ0c3dpdGgoX0NBU0VfSU5TRU5TSVRJVkVfUExBVEZPUk1TKToKICAgICAgICAgICAgc2VsZi5fcmVsYXhlZF9wYXRoX2NhY2hlID0gc2V0KGZuLmxvd2VyKCkgZm9yIGZuIGluIGNvbnRlbnRzKQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHBhdGhfaG9vayhjbHMsICpsb2FkZXJfZGV0YWlscyk6CiAgICAgICAgIiIiQSBjbGFzcyBtZXRob2Qgd2hpY2ggcmV0dXJucyBhIGNsb3N1cmUgdG8gdXNlIG9uIHN5cy5wYXRoX2hvb2sKICAgICAgICB3aGljaCB3aWxsIHJldHVybiBhbiBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIGxvYWRlcnMgYW5kIHRoZSBwYXRoCiAgICAgICAgY2FsbGVkIG9uIHRoZSBjbG9zdXJlLgoKICAgICAgICBJZiB0aGUgcGF0aCBjYWxsZWQgb24gdGhlIGNsb3N1cmUgaXMgbm90IGEgZGlyZWN0b3J5LCBJbXBvcnRFcnJvciBpcwogICAgICAgIHJhaXNlZC4KCiAgICAgICAgIiIiCiAgICAgICAgZGVmIHBhdGhfaG9va19mb3JfRmlsZUZpbmRlcihwYXRoKToKICAgICAgICAgICAgIiIiUGF0aCBob29rIGZvciBpbXBvcnRsaWIubWFjaGluZXJ5LkZpbGVGaW5kZXIuIiIiCiAgICAgICAgICAgIGlmIG5vdCBfcGF0aF9pc2RpcihwYXRoKToKICAgICAgICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKCJvbmx5IGRpcmVjdG9yaWVzIGFyZSBzdXBwb3J0ZWQiLCBwYXRoPXBhdGgpCiAgICAgICAgICAgIHJldHVybiBjbHMocGF0aCwgKmxvYWRlcl9kZXRhaWxzKQoKICAgICAgICByZXR1cm4gcGF0aF9ob29rX2Zvcl9GaWxlRmluZGVyCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAiRmlsZUZpbmRlciglcikiICUgKHNlbGYucGF0aCwpCgoKIyBJbXBvcnQgaXRzZWxmICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKY2xhc3MgX0ltcG9ydExvY2tDb250ZXh0OgoKICAgICIiIkNvbnRleHQgbWFuYWdlciBmb3IgdGhlIGltcG9ydCBsb2NrLiIiIgoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgIiIiQWNxdWlyZSB0aGUgaW1wb3J0IGxvY2suIiIiCiAgICAgICAgX2ltcC5hY3F1aXJlX2xvY2soKQoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCBleGNfdHlwZSwgZXhjX3ZhbHVlLCBleGNfdHJhY2ViYWNrKToKICAgICAgICAiIiJSZWxlYXNlIHRoZSBpbXBvcnQgbG9jayByZWdhcmRsZXNzIG9mIGFueSByYWlzZWQgZXhjZXB0aW9ucy4iIiIKICAgICAgICBfaW1wLnJlbGVhc2VfbG9jaygpCgoKZGVmIF9yZXNvbHZlX25hbWUobmFtZSwgcGFja2FnZSwgbGV2ZWwpOgogICAgIiIiUmVzb2x2ZSBhIHJlbGF0aXZlIG1vZHVsZSBuYW1lIHRvIGFuIGFic29sdXRlIG9uZS4iIiIKICAgIGJpdHMgPSBwYWNrYWdlLnJzcGxpdCgnLicsIGxldmVsIC0gMSkKICAgIGlmIGxlbihiaXRzKSA8IGxldmVsOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ2F0dGVtcHRlZCByZWxhdGl2ZSBpbXBvcnQgYmV5b25kIHRvcC1sZXZlbCBwYWNrYWdlJykKICAgIGJhc2UgPSBiaXRzWzBdCiAgICByZXR1cm4gJ3t9Lnt9Jy5mb3JtYXQoYmFzZSwgbmFtZSkgaWYgbmFtZSBlbHNlIGJhc2UKCgpkZWYgX2ZpbmRfbW9kdWxlKG5hbWUsIHBhdGgpOgogICAgIiIiRmluZCBhIG1vZHVsZSdzIGxvYWRlci4iIiIKICAgIGlmIG5vdCBzeXMubWV0YV9wYXRoOgogICAgICAgIF93YXJuaW5ncy53YXJuKCdzeXMubWV0YV9wYXRoIGlzIGVtcHR5JywgSW1wb3J0V2FybmluZykKICAgIGZvciBmaW5kZXIgaW4gc3lzLm1ldGFfcGF0aDoKICAgICAgICB3aXRoIF9JbXBvcnRMb2NrQ29udGV4dCgpOgogICAgICAgICAgICBsb2FkZXIgPSBmaW5kZXIuZmluZF9tb2R1bGUobmFtZSwgcGF0aCkKICAgICAgICBpZiBsb2FkZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICMgVGhlIHBhcmVudCBpbXBvcnQgbWF5IGhhdmUgYWxyZWFkeSBpbXBvcnRlZCB0aGlzIG1vZHVsZS4KICAgICAgICAgICAgaWYgbmFtZSBub3QgaW4gc3lzLm1vZHVsZXM6CiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZGVyCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gc3lzLm1vZHVsZXNbbmFtZV0uX19sb2FkZXJfXwogICAgZWxzZToKICAgICAgICByZXR1cm4gTm9uZQoKCmRlZiBfc2FuaXR5X2NoZWNrKG5hbWUsIHBhY2thZ2UsIGxldmVsKToKICAgICIiIlZlcmlmeSBhcmd1bWVudHMgYXJlICJzYW5lIi4iIiIKICAgIGlmIG5vdCBpc2luc3RhbmNlKG5hbWUsIHN0cik6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJtb2R1bGUgbmFtZSBtdXN0IGJlIHN0ciwgbm90IHt9Ii5mb3JtYXQodHlwZShuYW1lKSkpCiAgICBpZiBsZXZlbCA8IDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbGV2ZWwgbXVzdCBiZSA+PSAwJykKICAgIGlmIHBhY2thZ2U6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocGFja2FnZSwgc3RyKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJfX3BhY2thZ2VfXyBub3Qgc2V0IHRvIGEgc3RyaW5nIikKICAgICAgICBlbGlmIHBhY2thZ2Ugbm90IGluIHN5cy5tb2R1bGVzOgogICAgICAgICAgICBtc2cgPSAoIlBhcmVudCBtb2R1bGUgeyFyfSBub3QgbG9hZGVkLCBjYW5ub3QgcGVyZm9ybSByZWxhdGl2ZSAiCiAgICAgICAgICAgICAgICAgICAiaW1wb3J0IikKICAgICAgICAgICAgcmFpc2UgU3lzdGVtRXJyb3IobXNnLmZvcm1hdChwYWNrYWdlKSkKICAgIGlmIG5vdCBuYW1lIGFuZCBsZXZlbCA9PSAwOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkVtcHR5IG1vZHVsZSBuYW1lIikKCgpfRVJSX01TRyA9ICdObyBtb2R1bGUgbmFtZWQgeyFyfScKCmRlZiBfZmluZF9hbmRfbG9hZF91bmxvY2tlZChuYW1lLCBpbXBvcnRfKToKICAgIHBhdGggPSBOb25lCiAgICBwYXJlbnQgPSBuYW1lLnJwYXJ0aXRpb24oJy4nKVswXQogICAgaWYgcGFyZW50OgogICAgICAgIGlmIHBhcmVudCBub3QgaW4gc3lzLm1vZHVsZXM6CiAgICAgICAgICAgIF9jYWxsX3dpdGhfZnJhbWVzX3JlbW92ZWQoaW1wb3J0XywgcGFyZW50KQogICAgICAgICMgQ3Jhenkgc2lkZS1lZmZlY3RzIQogICAgICAgIGlmIG5hbWUgaW4gc3lzLm1vZHVsZXM6CiAgICAgICAgICAgIHJldHVybiBzeXMubW9kdWxlc1tuYW1lXQogICAgICAgICMgQmFja3dhcmRzLWNvbXBhdGliaWxpdHk7IGJlIG5pY2VyIHRvIHNraXAgdGhlIGRpY3QgbG9va3VwLgogICAgICAgIHBhcmVudF9tb2R1bGUgPSBzeXMubW9kdWxlc1twYXJlbnRdCiAgICAgICAgdHJ5OgogICAgICAgICAgICBwYXRoID0gcGFyZW50X21vZHVsZS5fX3BhdGhfXwogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgbXNnID0gKF9FUlJfTVNHICsgJzsge30gaXMgbm90IGEgcGFja2FnZScpLmZvcm1hdChuYW1lLCBwYXJlbnQpCiAgICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKG1zZywgbmFtZT1uYW1lKQogICAgbG9hZGVyID0gX2ZpbmRfbW9kdWxlKG5hbWUsIHBhdGgpCiAgICBpZiBsb2FkZXIgaXMgTm9uZToKICAgICAgICBleGMgPSBJbXBvcnRFcnJvcihfRVJSX01TRy5mb3JtYXQobmFtZSksIG5hbWU9bmFtZSkKICAgICAgICAjIFRPRE8oYnJldHQpOiBzd2l0Y2ggdG8gYSBwcm9wZXIgTW9kdWxlTm90Rm91bmQgZXhjZXB0aW9uIGluIFB5dGhvbgogICAgICAgICMgMy40LgogICAgICAgIGV4Yy5fbm90X2ZvdW5kID0gVHJ1ZQogICAgICAgIHJhaXNlIGV4YwogICAgZWxpZiBuYW1lIG5vdCBpbiBzeXMubW9kdWxlczoKICAgICAgICAjIFRoZSBwYXJlbnQgaW1wb3J0IG1heSBoYXZlIGFscmVhZHkgaW1wb3J0ZWQgdGhpcyBtb2R1bGUuCiAgICAgICAgbG9hZGVyLmxvYWRfbW9kdWxlKG5hbWUpCiAgICAgICAgX3ZlcmJvc2VfbWVzc2FnZSgnaW1wb3J0IHshcn0gIyB7IXJ9JywgbmFtZSwgbG9hZGVyKQogICAgIyBCYWNrd2FyZHMtY29tcGF0aWJpbGl0eTsgYmUgbmljZXIgdG8gc2tpcCB0aGUgZGljdCBsb29rdXAuCiAgICBtb2R1bGUgPSBzeXMubW9kdWxlc1tuYW1lXQogICAgaWYgcGFyZW50OgogICAgICAgICMgU2V0IHRoZSBtb2R1bGUgYXMgYW4gYXR0cmlidXRlIG9uIGl0cyBwYXJlbnQuCiAgICAgICAgcGFyZW50X21vZHVsZSA9IHN5cy5tb2R1bGVzW3BhcmVudF0KICAgICAgICBzZXRhdHRyKHBhcmVudF9tb2R1bGUsIG5hbWUucnBhcnRpdGlvbignLicpWzJdLCBtb2R1bGUpCiAgICAjIFNldCBfX3BhY2thZ2VfXyBpZiB0aGUgbG9hZGVyIGRpZCBub3QuCiAgICBpZiBnZXRhdHRyKG1vZHVsZSwgJ19fcGFja2FnZV9fJywgTm9uZSkgaXMgTm9uZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG1vZHVsZS5fX3BhY2thZ2VfXyA9IG1vZHVsZS5fX25hbWVfXwogICAgICAgICAgICBpZiBub3QgaGFzYXR0cihtb2R1bGUsICdfX3BhdGhfXycpOgogICAgICAgICAgICAgICAgbW9kdWxlLl9fcGFja2FnZV9fID0gbW9kdWxlLl9fcGFja2FnZV9fLnJwYXJ0aXRpb24oJy4nKVswXQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcGFzcwogICAgIyBTZXQgbG9hZGVyIGlmIG5lZWQgYmUuCiAgICBpZiBub3QgaGFzYXR0cihtb2R1bGUsICdfX2xvYWRlcl9fJyk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBtb2R1bGUuX19sb2FkZXJfXyA9IGxvYWRlcgogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcGFzcwogICAgcmV0dXJuIG1vZHVsZQoKCmRlZiBfZmluZF9hbmRfbG9hZChuYW1lLCBpbXBvcnRfKToKICAgICIiIkZpbmQgYW5kIGxvYWQgdGhlIG1vZHVsZSwgYW5kIHJlbGVhc2UgdGhlIGltcG9ydCBsb2NrLiIiIgogICAgdHJ5OgogICAgICAgIGxvY2sgPSBfZ2V0X21vZHVsZV9sb2NrKG5hbWUpCiAgICBmaW5hbGx5OgogICAgICAgIF9pbXAucmVsZWFzZV9sb2NrKCkKICAgIGxvY2suYWNxdWlyZSgpCiAgICB0cnk6CiAgICAgICAgcmV0dXJuIF9maW5kX2FuZF9sb2FkX3VubG9ja2VkKG5hbWUsIGltcG9ydF8pCiAgICBmaW5hbGx5OgogICAgICAgIGxvY2sucmVsZWFzZSgpCgoKZGVmIF9nY2RfaW1wb3J0KG5hbWUsIHBhY2thZ2U9Tm9uZSwgbGV2ZWw9MCk6CiAgICAiIiJJbXBvcnQgYW5kIHJldHVybiB0aGUgbW9kdWxlIGJhc2VkIG9uIGl0cyBuYW1lLCB0aGUgcGFja2FnZSB0aGUgY2FsbCBpcwogICAgYmVpbmcgbWFkZSBmcm9tLCBhbmQgdGhlIGxldmVsIGFkanVzdG1lbnQuCgogICAgVGhpcyBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBncmVhdGVzdCBjb21tb24gZGVub21pbmF0b3Igb2YgZnVuY3Rpb25hbGl0eQogICAgYmV0d2VlbiBpbXBvcnRfbW9kdWxlIGFuZCBfX2ltcG9ydF9fLiBUaGlzIGluY2x1ZGVzIHNldHRpbmcgX19wYWNrYWdlX18gaWYKICAgIHRoZSBsb2FkZXIgZGlkIG5vdC4KCiAgICAiIiIKICAgIF9zYW5pdHlfY2hlY2sobmFtZSwgcGFja2FnZSwgbGV2ZWwpCiAgICBpZiBsZXZlbCA+IDA6CiAgICAgICAgbmFtZSA9IF9yZXNvbHZlX25hbWUobmFtZSwgcGFja2FnZSwgbGV2ZWwpCiAgICBfaW1wLmFjcXVpcmVfbG9jaygpCiAgICBpZiBuYW1lIG5vdCBpbiBzeXMubW9kdWxlczoKICAgICAgICByZXR1cm4gX2ZpbmRfYW5kX2xvYWQobmFtZSwgX2djZF9pbXBvcnQpCiAgICBtb2R1bGUgPSBzeXMubW9kdWxlc1tuYW1lXQogICAgaWYgbW9kdWxlIGlzIE5vbmU6CiAgICAgICAgX2ltcC5yZWxlYXNlX2xvY2soKQogICAgICAgIG1lc3NhZ2UgPSAoImltcG9ydCBvZiB7fSBoYWx0ZWQ7ICIKICAgICAgICAgICAgICAgICAgICAiTm9uZSBpbiBzeXMubW9kdWxlcyIuZm9ybWF0KG5hbWUpKQogICAgICAgIHJhaXNlIEltcG9ydEVycm9yKG1lc3NhZ2UsIG5hbWU9bmFtZSkKICAgIF9sb2NrX3VubG9ja19tb2R1bGUobmFtZSkKICAgIHJldHVybiBtb2R1bGUKCmRlZiBfaGFuZGxlX2Zyb21saXN0KG1vZHVsZSwgZnJvbWxpc3QsIGltcG9ydF8pOgogICAgIiIiRmlndXJlIG91dCB3aGF0IF9faW1wb3J0X18gc2hvdWxkIHJldHVybi4KCiAgICBUaGUgaW1wb3J0XyBwYXJhbWV0ZXIgaXMgYSBjYWxsYWJsZSB3aGljaCB0YWtlcyB0aGUgbmFtZSBvZiBtb2R1bGUgdG8KICAgIGltcG9ydC4gSXQgaXMgcmVxdWlyZWQgdG8gZGVjb3VwbGUgdGhlIGZ1bmN0aW9uIGZyb20gYXNzdW1pbmcgaW1wb3J0bGliJ3MKICAgIGltcG9ydCBpbXBsZW1lbnRhdGlvbiBpcyBkZXNpcmVkLgoKICAgICIiIgogICAgIyBUaGUgaGVsbCB0aGF0IGlzIGZyb21saXN0IC4uLgogICAgIyBJZiBhIHBhY2thZ2Ugd2FzIGltcG9ydGVkLCB0cnkgdG8gaW1wb3J0IHN0dWZmIGZyb20gZnJvbWxpc3QuCiAgICBpZiBoYXNhdHRyKG1vZHVsZSwgJ19fcGF0aF9fJyk6CiAgICAgICAgaWYgJyonIGluIGZyb21saXN0OgogICAgICAgICAgICBmcm9tbGlzdCA9IGxpc3QoZnJvbWxpc3QpCiAgICAgICAgICAgIGZyb21saXN0LnJlbW92ZSgnKicpCiAgICAgICAgICAgIGlmIGhhc2F0dHIobW9kdWxlLCAnX19hbGxfXycpOgogICAgICAgICAgICAgICAgZnJvbWxpc3QuZXh0ZW5kKG1vZHVsZS5fX2FsbF9fKQogICAgICAgIGZvciB4IGluIGZyb21saXN0OgogICAgICAgICAgICBpZiBub3QgaGFzYXR0cihtb2R1bGUsIHgpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIF9jYWxsX3dpdGhfZnJhbWVzX3JlbW92ZWQoaW1wb3J0XywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne30ue30nLmZvcm1hdChtb2R1bGUuX19uYW1lX18sIHgpKQogICAgICAgICAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yIGFzIGV4YzoKICAgICAgICAgICAgICAgICAgICAjIEJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGRpY3RhdGVzIHdlIGlnbm9yZSBmYWlsZWQKICAgICAgICAgICAgICAgICAgICAjIGltcG9ydHMgdHJpZ2dlcmVkIGJ5IGZyb21saXN0IGZvciBtb2R1bGVzIHRoYXQgZG9uJ3QKICAgICAgICAgICAgICAgICAgICAjIGV4aXN0LgogICAgICAgICAgICAgICAgICAgICMgVE9ETyhicmV0dCk6IEluIFB5dGhvbiAzLjQsIGhhdmUgaW1wb3J0IHJhaXNlCiAgICAgICAgICAgICAgICAgICAgIyAgIE1vZHVsZU5vdEZvdW5kIGFuZCBjYXRjaCB0aGF0LgogICAgICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIoZXhjLCAnX25vdF9mb3VuZCcpIGFuZCBleGMuX25vdF9mb3VuZDoKICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICByZXR1cm4gbW9kdWxlCgoKZGVmIF9jYWxjX19fcGFja2FnZV9fKGdsb2JhbHMpOgogICAgIiIiQ2FsY3VsYXRlIHdoYXQgX19wYWNrYWdlX18gc2hvdWxkIGJlLgoKICAgIF9fcGFja2FnZV9fIGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGRlZmluZWQgb3IgY291bGQgYmUgc2V0IHRvIE5vbmUKICAgIHRvIHJlcHJlc2VudCB0aGF0IGl0cyBwcm9wZXIgdmFsdWUgaXMgdW5rbm93bi4KCiAgICAiIiIKICAgIHBhY2thZ2UgPSBnbG9iYWxzLmdldCgnX19wYWNrYWdlX18nKQogICAgaWYgcGFja2FnZSBpcyBOb25lOgogICAgICAgIHBhY2thZ2UgPSBnbG9iYWxzWydfX25hbWVfXyddCiAgICAgICAgaWYgJ19fcGF0aF9fJyBub3QgaW4gZ2xvYmFsczoKICAgICAgICAgICAgcGFja2FnZSA9IHBhY2thZ2UucnBhcnRpdGlvbignLicpWzBdCiAgICByZXR1cm4gcGFja2FnZQoKCmRlZiBfZ2V0X3N1cHBvcnRlZF9maWxlX2xvYWRlcnMoKToKICAgICIiIlJldHVybnMgYSBsaXN0IG9mIGZpbGUtYmFzZWQgbW9kdWxlIGxvYWRlcnMuCgogICAgRWFjaCBpdGVtIGlzIGEgdHVwbGUgKGxvYWRlciwgc3VmZml4ZXMsIGFsbG93X3BhY2thZ2VzKS4KICAgICIiIgogICAgZXh0ZW5zaW9ucyA9IEV4dGVuc2lvbkZpbGVMb2FkZXIsIF9pbXAuZXh0ZW5zaW9uX3N1ZmZpeGVzKCkKICAgIHNvdXJjZSA9IFNvdXJjZUZpbGVMb2FkZXIsIFNPVVJDRV9TVUZGSVhFUwogICAgYnl0ZWNvZGUgPSBTb3VyY2VsZXNzRmlsZUxvYWRlciwgQllURUNPREVfU1VGRklYRVMKICAgIHJldHVybiBbZXh0ZW5zaW9ucywgc291cmNlLCBieXRlY29kZV0KCgpkZWYgX19pbXBvcnRfXyhuYW1lLCBnbG9iYWxzPU5vbmUsIGxvY2Fscz1Ob25lLCBmcm9tbGlzdD0oKSwgbGV2ZWw9MCk6CiAgICAiIiJJbXBvcnQgYSBtb2R1bGUuCgogICAgVGhlICdnbG9iYWxzJyBhcmd1bWVudCBpcyB1c2VkIHRvIGluZmVyIHdoZXJlIHRoZSBpbXBvcnQgaXMgb2NjdXJpbmcgZnJvbQogICAgdG8gaGFuZGxlIHJlbGF0aXZlIGltcG9ydHMuIFRoZSAnbG9jYWxzJyBhcmd1bWVudCBpcyBpZ25vcmVkLiBUaGUKICAgICdmcm9tbGlzdCcgYXJndW1lbnQgc3BlY2lmaWVzIHdoYXQgc2hvdWxkIGV4aXN0IGFzIGF0dHJpYnV0ZXMgb24gdGhlIG1vZHVsZQogICAgYmVpbmcgaW1wb3J0ZWQgKGUuZy4gYGBmcm9tIG1vZHVsZSBpbXBvcnQgPGZyb21saXN0PmBgKS4gIFRoZSAnbGV2ZWwnCiAgICBhcmd1bWVudCByZXByZXNlbnRzIHRoZSBwYWNrYWdlIGxvY2F0aW9uIHRvIGltcG9ydCBmcm9tIGluIGEgcmVsYXRpdmUKICAgIGltcG9ydCAoZS5nLiBgYGZyb20gLi5wa2cgaW1wb3J0IG1vZGBgIHdvdWxkIGhhdmUgYSAnbGV2ZWwnIG9mIDIpLgoKICAgICIiIgogICAgaWYgbGV2ZWwgPT0gMDoKICAgICAgICBtb2R1bGUgPSBfZ2NkX2ltcG9ydChuYW1lKQogICAgZWxzZToKICAgICAgICBnbG9iYWxzXyA9IGdsb2JhbHMgaWYgZ2xvYmFscyBpcyBub3QgTm9uZSBlbHNlIHt9CiAgICAgICAgcGFja2FnZSA9IF9jYWxjX19fcGFja2FnZV9fKGdsb2JhbHNfKQogICAgICAgIG1vZHVsZSA9IF9nY2RfaW1wb3J0KG5hbWUsIHBhY2thZ2UsIGxldmVsKQogICAgaWYgbm90IGZyb21saXN0OgogICAgICAgICMgUmV0dXJuIHVwIHRvIHRoZSBmaXJzdCBkb3QgaW4gJ25hbWUnLiBUaGlzIGlzIGNvbXBsaWNhdGVkIGJ5IHRoZSBmYWN0CiAgICAgICAgIyB0aGF0ICduYW1lJyBtYXkgYmUgcmVsYXRpdmUuCiAgICAgICAgaWYgbGV2ZWwgPT0gMDoKICAgICAgICAgICAgcmV0dXJuIF9nY2RfaW1wb3J0KG5hbWUucGFydGl0aW9uKCcuJylbMF0pCiAgICAgICAgZWxpZiBub3QgbmFtZToKICAgICAgICAgICAgcmV0dXJuIG1vZHVsZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGN1dF9vZmYgPSBsZW4obmFtZSkgLSBsZW4obmFtZS5wYXJ0aXRpb24oJy4nKVswXSkKICAgICAgICAgICAgcmV0dXJuIHN5cy5tb2R1bGVzW21vZHVsZS5fX25hbWVfX1s6bGVuKG1vZHVsZS5fX25hbWVfXyktY3V0X29mZl1dCiAgICBlbHNlOgogICAgICAgIHJldHVybiBfaGFuZGxlX2Zyb21saXN0KG1vZHVsZSwgZnJvbWxpc3QsIF9nY2RfaW1wb3J0KQoKCgpkZWYgX3NldHVwKHN5c19tb2R1bGUsIF9pbXBfbW9kdWxlKToKICAgICIiIlNldHVwIGltcG9ydGxpYiBieSBpbXBvcnRpbmcgbmVlZGVkIGJ1aWx0LWluIG1vZHVsZXMgYW5kIGluamVjdGluZyB0aGVtCiAgICBpbnRvIHRoZSBnbG9iYWwgbmFtZXNwYWNlLgoKICAgIEFzIHN5cyBpcyBuZWVkZWQgZm9yIHN5cy5tb2R1bGVzIGFjY2VzcyBhbmQgX2ltcCBpcyBuZWVkZWQgdG8gbG9hZCBidWlsdC1pbgogICAgbW9kdWxlcywgdGhvc2UgdHdvIG1vZHVsZXMgbXVzdCBiZSBleHBsaWNpdGx5IHBhc3NlZCBpbi4KCiAgICAiIiIKICAgIGdsb2JhbCBfaW1wLCBzeXMKICAgIF9pbXAgPSBfaW1wX21vZHVsZQoKICAgIGZvciBtb2R1bGUgaW4gKF9pbXAsIHN5cyk6CiAgICAgICAgaWYgbm90IGhhc2F0dHIobW9kdWxlLCAnX19sb2FkZXJfXycpOgogICAgICAgICAgICBtb2R1bGUuX19sb2FkZXJfXyA9IEJ1aWx0aW5JbXBvcnRlcgoKICAgIHNlbGZfbW9kdWxlID0gc3lzLm1vZHVsZXNbX19uYW1lX19dCiAgICBmb3IgYnVpbHRpbl9uYW1lIGluICgnX2lvJywgJ193YXJuaW5ncycsICdidWlsdGlucycsICdtYXJzaGFsJyk6CiAgICAgICAgaWYgYnVpbHRpbl9uYW1lIG5vdCBpbiBzeXMubW9kdWxlczoKICAgICAgICAgICAgYnVpbHRpbl9tb2R1bGUgPSBCdWlsdGluSW1wb3J0ZXIubG9hZF9tb2R1bGUoYnVpbHRpbl9uYW1lKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGJ1aWx0aW5fbW9kdWxlID0gc3lzLm1vZHVsZXNbYnVpbHRpbl9uYW1lXQogICAgICAgIHNldGF0dHIoc2VsZl9tb2R1bGUsIGJ1aWx0aW5fbmFtZSwgYnVpbHRpbl9tb2R1bGUpCgogICAgb3NfZGV0YWlscyA9ICgncG9zaXgnLCBbJy8nXSksICgnbnQnLCBbJ1xcJywgJy8nXSksICgnb3MyJywgWydcXCcsICcvJ10pCiAgICBmb3IgYnVpbHRpbl9vcywgcGF0aF9zZXBhcmF0b3JzIGluIG9zX2RldGFpbHM6CiAgICAgICAgIyBBc3N1bXB0aW9uIG1hZGUgaW4gX3BhdGhfam9pbigpCiAgICAgICAgYXNzZXJ0IGFsbChsZW4oc2VwKSA9PSAxIGZvciBzZXAgaW4gcGF0aF9zZXBhcmF0b3JzKQogICAgICAgIHBhdGhfc2VwID0gcGF0aF9zZXBhcmF0b3JzWzBdCiAgICAgICAgaWYgYnVpbHRpbl9vcyBpbiBzeXMubW9kdWxlczoKICAgICAgICAgICAgb3NfbW9kdWxlID0gc3lzLm1vZHVsZXNbYnVpbHRpbl9vc10KICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBvc19tb2R1bGUgPSBCdWlsdGluSW1wb3J0ZXIubG9hZF9tb2R1bGUoYnVpbHRpbl9vcykKICAgICAgICAgICAgICAgICMgVE9ETzogcmlwIG91dCBvczIgY29kZSBhZnRlciAzLjMgaXMgcmVsZWFzZWQgYXMgcGVyIFBFUCAxMQogICAgICAgICAgICAgICAgaWYgYnVpbHRpbl9vcyA9PSAnb3MyJyBhbmQgJ0VNWCBHQ0MnIGluIHN5cy52ZXJzaW9uOgogICAgICAgICAgICAgICAgICAgIHBhdGhfc2VwID0gcGF0aF9zZXBhcmF0b3JzWzFdCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgZWxzZToKICAgICAgICByYWlzZSBJbXBvcnRFcnJvcignaW1wb3J0bGliIHJlcXVpcmVzIHBvc2l4IG9yIG50JykKCiAgICB0cnk6CiAgICAgICAgdGhyZWFkX21vZHVsZSA9IEJ1aWx0aW5JbXBvcnRlci5sb2FkX21vZHVsZSgnX3RocmVhZCcpCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgIyBQeXRob24gd2FzIGJ1aWx0IHdpdGhvdXQgdGhyZWFkcwogICAgICAgIHRocmVhZF9tb2R1bGUgPSBOb25lCiAgICB3ZWFrcmVmX21vZHVsZSA9IEJ1aWx0aW5JbXBvcnRlci5sb2FkX21vZHVsZSgnX3dlYWtyZWYnKQoKICAgIGlmIGJ1aWx0aW5fb3MgPT0gJ250JzoKICAgICAgICB3aW5yZWdfbW9kdWxlID0gQnVpbHRpbkltcG9ydGVyLmxvYWRfbW9kdWxlKCd3aW5yZWcnKQogICAgICAgIHNldGF0dHIoc2VsZl9tb2R1bGUsICdfd2lucmVnJywgd2lucmVnX21vZHVsZSkKCiAgICBzZXRhdHRyKHNlbGZfbW9kdWxlLCAnX29zJywgb3NfbW9kdWxlKQogICAgc2V0YXR0cihzZWxmX21vZHVsZSwgJ190aHJlYWQnLCB0aHJlYWRfbW9kdWxlKQogICAgc2V0YXR0cihzZWxmX21vZHVsZSwgJ193ZWFrcmVmJywgd2Vha3JlZl9tb2R1bGUpCiAgICBzZXRhdHRyKHNlbGZfbW9kdWxlLCAncGF0aF9zZXAnLCBwYXRoX3NlcCkKICAgIHNldGF0dHIoc2VsZl9tb2R1bGUsICdwYXRoX3NlcGFyYXRvcnMnLCBzZXQocGF0aF9zZXBhcmF0b3JzKSkKICAgICMgQ29uc3RhbnRzCiAgICBzZXRhdHRyKHNlbGZfbW9kdWxlLCAnX3JlbGF4X2Nhc2UnLCBfbWFrZV9yZWxheF9jYXNlKCkpCiAgICBFWFRFTlNJT05fU1VGRklYRVMuZXh0ZW5kKF9pbXAuZXh0ZW5zaW9uX3N1ZmZpeGVzKCkpCiAgICBpZiBidWlsdGluX29zID09ICdudCc6CiAgICAgICAgU09VUkNFX1NVRkZJWEVTLmFwcGVuZCgnLnB5dycpCiAgICAgICAgaWYgJ19kLnB5ZCcgaW4gRVhURU5TSU9OX1NVRkZJWEVTOgogICAgICAgICAgICBXaW5kb3dzUmVnaXN0cnlGaW5kZXIuREVCVUdfQlVJTEQgPSBUcnVlCgoKZGVmIF9pbnN0YWxsKHN5c19tb2R1bGUsIF9pbXBfbW9kdWxlKToKICAgICIiIkluc3RhbGwgaW1wb3J0bGliIGFzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBpbXBvcnQuIiIiCiAgICBfc2V0dXAoc3lzX21vZHVsZSwgX2ltcF9tb2R1bGUpCiAgICBzdXBwb3J0ZWRfbG9hZGVycyA9IF9nZXRfc3VwcG9ydGVkX2ZpbGVfbG9hZGVycygpCiAgICBzeXMucGF0aF9ob29rcy5leHRlbmQoW0ZpbGVGaW5kZXIucGF0aF9ob29rKCpzdXBwb3J0ZWRfbG9hZGVycyldKQogICAgc3lzLm1ldGFfcGF0aC5hcHBlbmQoQnVpbHRpbkltcG9ydGVyKQogICAgc3lzLm1ldGFfcGF0aC5hcHBlbmQoRnJvemVuSW1wb3J0ZXIpCiAgICBpZiBfb3MuX19uYW1lX18gPT0gJ250JzoKICAgICAgICBzeXMubWV0YV9wYXRoLmFwcGVuZChXaW5kb3dzUmVnaXN0cnlGaW5kZXIpCiAgICBzeXMubWV0YV9wYXRoLmFwcGVuZChQYXRoRmluZGVyKQo=',
'/Lib/logging/handlers.py':'IyBDb3B5cmlnaHQgMjAwMS0yMDEyIGJ5IFZpbmF5IFNhamlwLiBBbGwgUmlnaHRzIFJlc2VydmVkLg0KIw0KIyBQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGFuZCBpdHMNCiMgZG9jdW1lbnRhdGlvbiBmb3IgYW55IHB1cnBvc2UgYW5kIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLA0KIyBwcm92aWRlZCB0aGF0IHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFwcGVhciBpbiBhbGwgY29waWVzIGFuZCB0aGF0DQojIGJvdGggdGhhdCBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIGFwcGVhciBpbg0KIyBzdXBwb3J0aW5nIGRvY3VtZW50YXRpb24sIGFuZCB0aGF0IHRoZSBuYW1lIG9mIFZpbmF5IFNhamlwDQojIG5vdCBiZSB1c2VkIGluIGFkdmVydGlzaW5nIG9yIHB1YmxpY2l0eSBwZXJ0YWluaW5nIHRvIGRpc3RyaWJ1dGlvbg0KIyBvZiB0aGUgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYywgd3JpdHRlbiBwcmlvciBwZXJtaXNzaW9uLg0KIyBWSU5BWSBTQUpJUCBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSCBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSwgSU5DTFVESU5HDQojIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTA0KIyBWSU5BWSBTQUpJUCBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBJTkRJUkVDVCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1INCiMgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTSBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSDQojIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUiBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUDQojIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuDQoNCiIiIg0KQWRkaXRpb25hbCBoYW5kbGVycyBmb3IgdGhlIGxvZ2dpbmcgcGFja2FnZSBmb3IgUHl0aG9uLiBUaGUgY29yZSBwYWNrYWdlIGlzDQpiYXNlZCBvbiBQRVAgMjgyIGFuZCBjb21tZW50cyB0aGVyZXRvIGluIGNvbXAubGFuZy5weXRob24uDQoNCkNvcHlyaWdodCAoQykgMjAwMS0yMDEyIFZpbmF5IFNhamlwLiBBbGwgUmlnaHRzIFJlc2VydmVkLg0KDQpUbyB1c2UsIHNpbXBseSAnaW1wb3J0IGxvZ2dpbmcuaGFuZGxlcnMnIGFuZCBsb2cgYXdheSENCiIiIg0KDQppbXBvcnQgZXJybm8sIGxvZ2dpbmcsIHNvY2tldCwgb3MsIHBpY2tsZSwgc3RydWN0LCB0aW1lLCByZQ0KZnJvbSBjb2RlY3MgaW1wb3J0IEJPTV9VVEY4DQpmcm9tIHN0YXQgaW1wb3J0IFNUX0RFViwgU1RfSU5PLCBTVF9NVElNRQ0KaW1wb3J0IHF1ZXVlDQp0cnk6DQogICAgaW1wb3J0IHRocmVhZGluZw0KZXhjZXB0IEltcG9ydEVycm9yOiAjcHJhZ21hOiBubyBjb3Zlcg0KICAgIHRocmVhZGluZyA9IE5vbmUNCg0KIw0KIyBTb21lIGNvbnN0YW50cy4uLg0KIw0KDQpERUZBVUxUX1RDUF9MT0dHSU5HX1BPUlQgICAgPSA5MDIwDQpERUZBVUxUX1VEUF9MT0dHSU5HX1BPUlQgICAgPSA5MDIxDQpERUZBVUxUX0hUVFBfTE9HR0lOR19QT1JUICAgPSA5MDIyDQpERUZBVUxUX1NPQVBfTE9HR0lOR19QT1JUICAgPSA5MDIzDQpTWVNMT0dfVURQX1BPUlQgICAgICAgICAgICAgPSA1MTQNClNZU0xPR19UQ1BfUE9SVCAgICAgICAgICAgICA9IDUxNA0KDQpfTUlETklHSFQgPSAyNCAqIDYwICogNjAgICMgbnVtYmVyIG9mIHNlY29uZHMgaW4gYSBkYXkNCg0KY2xhc3MgQmFzZVJvdGF0aW5nSGFuZGxlcihsb2dnaW5nLkZpbGVIYW5kbGVyKToNCiAgICAiIiINCiAgICBCYXNlIGNsYXNzIGZvciBoYW5kbGVycyB0aGF0IHJvdGF0ZSBsb2cgZmlsZXMgYXQgYSBjZXJ0YWluIHBvaW50Lg0KICAgIE5vdCBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuICBJbnN0ZWFkLCB1c2UgUm90YXRpbmdGaWxlSGFuZGxlcg0KICAgIG9yIFRpbWVkUm90YXRpbmdGaWxlSGFuZGxlci4NCiAgICAiIiINCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlsZW5hbWUsIG1vZGUsIGVuY29kaW5nPU5vbmUsIGRlbGF5PUZhbHNlKToNCiAgICAgICAgIiIiDQogICAgICAgIFVzZSB0aGUgc3BlY2lmaWVkIGZpbGVuYW1lIGZvciBzdHJlYW1lZCBsb2dnaW5nDQogICAgICAgICIiIg0KICAgICAgICBsb2dnaW5nLkZpbGVIYW5kbGVyLl9faW5pdF9fKHNlbGYsIGZpbGVuYW1lLCBtb2RlLCBlbmNvZGluZywgZGVsYXkpDQogICAgICAgIHNlbGYubW9kZSA9IG1vZGUNCiAgICAgICAgc2VsZi5lbmNvZGluZyA9IGVuY29kaW5nDQogICAgICAgIHNlbGYubmFtZXIgPSBOb25lDQogICAgICAgIHNlbGYucm90YXRvciA9IE5vbmUNCg0KICAgIGRlZiBlbWl0KHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBFbWl0IGEgcmVjb3JkLg0KDQogICAgICAgIE91dHB1dCB0aGUgcmVjb3JkIHRvIHRoZSBmaWxlLCBjYXRlcmluZyBmb3Igcm9sbG92ZXIgYXMgZGVzY3JpYmVkDQogICAgICAgIGluIGRvUm9sbG92ZXIoKS4NCiAgICAgICAgIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGlmIHNlbGYuc2hvdWxkUm9sbG92ZXIocmVjb3JkKToNCiAgICAgICAgICAgICAgICBzZWxmLmRvUm9sbG92ZXIoKQ0KICAgICAgICAgICAgbG9nZ2luZy5GaWxlSGFuZGxlci5lbWl0KHNlbGYsIHJlY29yZCkNCiAgICAgICAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCwgU3lzdGVtRXhpdCk6ICNwcmFnbWE6IG5vIGNvdmVyDQogICAgICAgICAgICByYWlzZQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBzZWxmLmhhbmRsZUVycm9yKHJlY29yZCkNCg0KICAgIGRlZiByb3RhdGlvbl9maWxlbmFtZShzZWxmLCBkZWZhdWx0X25hbWUpOg0KICAgICAgICAiIiINCiAgICAgICAgTW9kaWZ5IHRoZSBmaWxlbmFtZSBvZiBhIGxvZyBmaWxlIHdoZW4gcm90YXRpbmcuDQoNCiAgICAgICAgVGhpcyBpcyBwcm92aWRlZCBzbyB0aGF0IGEgY3VzdG9tIGZpbGVuYW1lIGNhbiBiZSBwcm92aWRlZC4NCg0KICAgICAgICBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBjYWxscyB0aGUgJ25hbWVyJyBhdHRyaWJ1dGUgb2YgdGhlDQogICAgICAgIGhhbmRsZXIsIGlmIGl0J3MgY2FsbGFibGUsIHBhc3NpbmcgdGhlIGRlZmF1bHQgbmFtZSB0bw0KICAgICAgICBpdC4gSWYgdGhlIGF0dHJpYnV0ZSBpc24ndCBjYWxsYWJsZSAodGhlIGRlZmF1bHQgaXMgTm9uZSksIHRoZSBuYW1lDQogICAgICAgIGlzIHJldHVybmVkIHVuY2hhbmdlZC4NCg0KICAgICAgICA6cGFyYW0gZGVmYXVsdF9uYW1lOiBUaGUgZGVmYXVsdCBuYW1lIGZvciB0aGUgbG9nIGZpbGUuDQogICAgICAgICIiIg0KICAgICAgICBpZiBub3QgY2FsbGFibGUoc2VsZi5uYW1lcik6DQogICAgICAgICAgICByZXN1bHQgPSBkZWZhdWx0X25hbWUNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYubmFtZXIoZGVmYXVsdF9uYW1lKQ0KICAgICAgICByZXR1cm4gcmVzdWx0DQoNCiAgICBkZWYgcm90YXRlKHNlbGYsIHNvdXJjZSwgZGVzdCk6DQogICAgICAgICIiIg0KICAgICAgICBXaGVuIHJvdGF0aW5nLCByb3RhdGUgdGhlIGN1cnJlbnQgbG9nLg0KDQogICAgICAgIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGNhbGxzIHRoZSAncm90YXRvcicgYXR0cmlidXRlIG9mIHRoZQ0KICAgICAgICBoYW5kbGVyLCBpZiBpdCdzIGNhbGxhYmxlLCBwYXNzaW5nIHRoZSBzb3VyY2UgYW5kIGRlc3QgYXJndW1lbnRzIHRvDQogICAgICAgIGl0LiBJZiB0aGUgYXR0cmlidXRlIGlzbid0IGNhbGxhYmxlICh0aGUgZGVmYXVsdCBpcyBOb25lKSwgdGhlIHNvdXJjZQ0KICAgICAgICBpcyBzaW1wbHkgcmVuYW1lZCB0byB0aGUgZGVzdGluYXRpb24uDQoNCiAgICAgICAgOnBhcmFtIHNvdXJjZTogVGhlIHNvdXJjZSBmaWxlbmFtZS4gVGhpcyBpcyBub3JtYWxseSB0aGUgYmFzZQ0KICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSwgZS5nLiAndGVzdC5sb2cnDQogICAgICAgIDpwYXJhbSBkZXN0OiAgIFRoZSBkZXN0aW5hdGlvbiBmaWxlbmFtZS4gVGhpcyBpcyBub3JtYWxseQ0KICAgICAgICAgICAgICAgICAgICAgICB3aGF0IHRoZSBzb3VyY2UgaXMgcm90YXRlZCB0bywgZS5nLiAndGVzdC5sb2cuMScuDQogICAgICAgICIiIg0KICAgICAgICBpZiBub3QgY2FsbGFibGUoc2VsZi5yb3RhdG9yKToNCiAgICAgICAgICAgIG9zLnJlbmFtZShzb3VyY2UsIGRlc3QpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLnJvdGF0b3Ioc291cmNlLCBkZXN0KQ0KDQpjbGFzcyBSb3RhdGluZ0ZpbGVIYW5kbGVyKEJhc2VSb3RhdGluZ0hhbmRsZXIpOg0KICAgICIiIg0KICAgIEhhbmRsZXIgZm9yIGxvZ2dpbmcgdG8gYSBzZXQgb2YgZmlsZXMsIHdoaWNoIHN3aXRjaGVzIGZyb20gb25lIGZpbGUNCiAgICB0byB0aGUgbmV4dCB3aGVuIHRoZSBjdXJyZW50IGZpbGUgcmVhY2hlcyBhIGNlcnRhaW4gc2l6ZS4NCiAgICAiIiINCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlsZW5hbWUsIG1vZGU9J2EnLCBtYXhCeXRlcz0wLCBiYWNrdXBDb3VudD0wLCBlbmNvZGluZz1Ob25lLCBkZWxheT1GYWxzZSk6DQogICAgICAgICIiIg0KICAgICAgICBPcGVuIHRoZSBzcGVjaWZpZWQgZmlsZSBhbmQgdXNlIGl0IGFzIHRoZSBzdHJlYW0gZm9yIGxvZ2dpbmcuDQoNCiAgICAgICAgQnkgZGVmYXVsdCwgdGhlIGZpbGUgZ3Jvd3MgaW5kZWZpbml0ZWx5LiBZb3UgY2FuIHNwZWNpZnkgcGFydGljdWxhcg0KICAgICAgICB2YWx1ZXMgb2YgbWF4Qnl0ZXMgYW5kIGJhY2t1cENvdW50IHRvIGFsbG93IHRoZSBmaWxlIHRvIHJvbGxvdmVyIGF0DQogICAgICAgIGEgcHJlZGV0ZXJtaW5lZCBzaXplLg0KDQogICAgICAgIFJvbGxvdmVyIG9jY3VycyB3aGVuZXZlciB0aGUgY3VycmVudCBsb2cgZmlsZSBpcyBuZWFybHkgbWF4Qnl0ZXMgaW4NCiAgICAgICAgbGVuZ3RoLiBJZiBiYWNrdXBDb3VudCBpcyA+PSAxLCB0aGUgc3lzdGVtIHdpbGwgc3VjY2Vzc2l2ZWx5IGNyZWF0ZQ0KICAgICAgICBuZXcgZmlsZXMgd2l0aCB0aGUgc2FtZSBwYXRobmFtZSBhcyB0aGUgYmFzZSBmaWxlLCBidXQgd2l0aCBleHRlbnNpb25zDQogICAgICAgICIuMSIsICIuMiIgZXRjLiBhcHBlbmRlZCB0byBpdC4gRm9yIGV4YW1wbGUsIHdpdGggYSBiYWNrdXBDb3VudCBvZiA1DQogICAgICAgIGFuZCBhIGJhc2UgZmlsZSBuYW1lIG9mICJhcHAubG9nIiwgeW91IHdvdWxkIGdldCAiYXBwLmxvZyIsDQogICAgICAgICJhcHAubG9nLjEiLCAiYXBwLmxvZy4yIiwgLi4uIHRocm91Z2ggdG8gImFwcC5sb2cuNSIuIFRoZSBmaWxlIGJlaW5nDQogICAgICAgIHdyaXR0ZW4gdG8gaXMgYWx3YXlzICJhcHAubG9nIiAtIHdoZW4gaXQgZ2V0cyBmaWxsZWQgdXAsIGl0IGlzIGNsb3NlZA0KICAgICAgICBhbmQgcmVuYW1lZCB0byAiYXBwLmxvZy4xIiwgYW5kIGlmIGZpbGVzICJhcHAubG9nLjEiLCAiYXBwLmxvZy4yIiBldGMuDQogICAgICAgIGV4aXN0LCB0aGVuIHRoZXkgYXJlIHJlbmFtZWQgdG8gImFwcC5sb2cuMiIsICJhcHAubG9nLjMiIGV0Yy4NCiAgICAgICAgcmVzcGVjdGl2ZWx5Lg0KDQogICAgICAgIElmIG1heEJ5dGVzIGlzIHplcm8sIHJvbGxvdmVyIG5ldmVyIG9jY3Vycy4NCiAgICAgICAgIiIiDQogICAgICAgICMgSWYgcm90YXRpb24vcm9sbG92ZXIgaXMgd2FudGVkLCBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgdG8gdXNlIGFub3RoZXINCiAgICAgICAgIyBtb2RlLiBJZiBmb3IgZXhhbXBsZSAndycgd2VyZSBzcGVjaWZpZWQsIHRoZW4gaWYgdGhlcmUgd2VyZSBtdWx0aXBsZQ0KICAgICAgICAjIHJ1bnMgb2YgdGhlIGNhbGxpbmcgYXBwbGljYXRpb24sIHRoZSBsb2dzIGZyb20gcHJldmlvdXMgcnVucyB3b3VsZCBiZQ0KICAgICAgICAjIGxvc3QgaWYgdGhlICd3JyBpcyByZXNwZWN0ZWQsIGJlY2F1c2UgdGhlIGxvZyBmaWxlIHdvdWxkIGJlIHRydW5jYXRlZA0KICAgICAgICAjIG9uIGVhY2ggcnVuLg0KICAgICAgICBpZiBtYXhCeXRlcyA+IDA6DQogICAgICAgICAgICBtb2RlID0gJ2EnDQogICAgICAgIEJhc2VSb3RhdGluZ0hhbmRsZXIuX19pbml0X18oc2VsZiwgZmlsZW5hbWUsIG1vZGUsIGVuY29kaW5nLCBkZWxheSkNCiAgICAgICAgc2VsZi5tYXhCeXRlcyA9IG1heEJ5dGVzDQogICAgICAgIHNlbGYuYmFja3VwQ291bnQgPSBiYWNrdXBDb3VudA0KDQogICAgZGVmIGRvUm9sbG92ZXIoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBEbyBhIHJvbGxvdmVyLCBhcyBkZXNjcmliZWQgaW4gX19pbml0X18oKS4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIHNlbGYuc3RyZWFtOg0KICAgICAgICAgICAgc2VsZi5zdHJlYW0uY2xvc2UoKQ0KICAgICAgICAgICAgc2VsZi5zdHJlYW0gPSBOb25lDQogICAgICAgIGlmIHNlbGYuYmFja3VwQ291bnQgPiAwOg0KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2Uoc2VsZi5iYWNrdXBDb3VudCAtIDEsIDAsIC0xKToNCiAgICAgICAgICAgICAgICBzZm4gPSBzZWxmLnJvdGF0aW9uX2ZpbGVuYW1lKCIlcy4lZCIgJSAoc2VsZi5iYXNlRmlsZW5hbWUsIGkpKQ0KICAgICAgICAgICAgICAgIGRmbiA9IHNlbGYucm90YXRpb25fZmlsZW5hbWUoIiVzLiVkIiAlIChzZWxmLmJhc2VGaWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArIDEpKQ0KICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKHNmbik6DQogICAgICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGRmbik6DQogICAgICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoZGZuKQ0KICAgICAgICAgICAgICAgICAgICBvcy5yZW5hbWUoc2ZuLCBkZm4pDQogICAgICAgICAgICBkZm4gPSBzZWxmLnJvdGF0aW9uX2ZpbGVuYW1lKHNlbGYuYmFzZUZpbGVuYW1lICsgIi4xIikNCiAgICAgICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGRmbik6DQogICAgICAgICAgICAgICAgb3MucmVtb3ZlKGRmbikNCiAgICAgICAgICAgIHNlbGYucm90YXRlKHNlbGYuYmFzZUZpbGVuYW1lLCBkZm4pDQogICAgICAgIHNlbGYubW9kZSA9ICd3Jw0KICAgICAgICBzZWxmLnN0cmVhbSA9IHNlbGYuX29wZW4oKQ0KDQogICAgZGVmIHNob3VsZFJvbGxvdmVyKHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBEZXRlcm1pbmUgaWYgcm9sbG92ZXIgc2hvdWxkIG9jY3VyLg0KDQogICAgICAgIEJhc2ljYWxseSwgc2VlIGlmIHRoZSBzdXBwbGllZCByZWNvcmQgd291bGQgY2F1c2UgdGhlIGZpbGUgdG8gZXhjZWVkDQogICAgICAgIHRoZSBzaXplIGxpbWl0IHdlIGhhdmUuDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLnN0cmVhbSBpcyBOb25lOiAgICAgICAgICAgICAgICAgIyBkZWxheSB3YXMgc2V0Li4uDQogICAgICAgICAgICBzZWxmLnN0cmVhbSA9IHNlbGYuX29wZW4oKQ0KICAgICAgICBpZiBzZWxmLm1heEJ5dGVzID4gMDogICAgICAgICAgICAgICAgICAgIyBhcmUgd2Ugcm9sbGluZyBvdmVyPw0KICAgICAgICAgICAgbXNnID0gIiVzXG4iICUgc2VsZi5mb3JtYXQocmVjb3JkKQ0KICAgICAgICAgICAgc2VsZi5zdHJlYW0uc2VlaygwLCAyKSAgI2R1ZSB0byBub24tcG9zaXgtY29tcGxpYW50IFdpbmRvd3MgZmVhdHVyZQ0KICAgICAgICAgICAgaWYgc2VsZi5zdHJlYW0udGVsbCgpICsgbGVuKG1zZykgPj0gc2VsZi5tYXhCeXRlczoNCiAgICAgICAgICAgICAgICByZXR1cm4gMQ0KICAgICAgICByZXR1cm4gMA0KDQpjbGFzcyBUaW1lZFJvdGF0aW5nRmlsZUhhbmRsZXIoQmFzZVJvdGF0aW5nSGFuZGxlcik6DQogICAgIiIiDQogICAgSGFuZGxlciBmb3IgbG9nZ2luZyB0byBhIGZpbGUsIHJvdGF0aW5nIHRoZSBsb2cgZmlsZSBhdCBjZXJ0YWluIHRpbWVkDQogICAgaW50ZXJ2YWxzLg0KDQogICAgSWYgYmFja3VwQ291bnQgaXMgPiAwLCB3aGVuIHJvbGxvdmVyIGlzIGRvbmUsIG5vIG1vcmUgdGhhbiBiYWNrdXBDb3VudA0KICAgIGZpbGVzIGFyZSBrZXB0IC0gdGhlIG9sZGVzdCBvbmVzIGFyZSBkZWxldGVkLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmaWxlbmFtZSwgd2hlbj0naCcsIGludGVydmFsPTEsIGJhY2t1cENvdW50PTAsIGVuY29kaW5nPU5vbmUsIGRlbGF5PUZhbHNlLCB1dGM9RmFsc2UpOg0KICAgICAgICBCYXNlUm90YXRpbmdIYW5kbGVyLl9faW5pdF9fKHNlbGYsIGZpbGVuYW1lLCAnYScsIGVuY29kaW5nLCBkZWxheSkNCiAgICAgICAgc2VsZi53aGVuID0gd2hlbi51cHBlcigpDQogICAgICAgIHNlbGYuYmFja3VwQ291bnQgPSBiYWNrdXBDb3VudA0KICAgICAgICBzZWxmLnV0YyA9IHV0Yw0KICAgICAgICAjIENhbGN1bGF0ZSB0aGUgcmVhbCByb2xsb3ZlciBpbnRlcnZhbCwgd2hpY2ggaXMganVzdCB0aGUgbnVtYmVyIG9mDQogICAgICAgICMgc2Vjb25kcyBiZXR3ZWVuIHJvbGxvdmVycy4gIEFsc28gc2V0IHRoZSBmaWxlbmFtZSBzdWZmaXggdXNlZCB3aGVuDQogICAgICAgICMgYSByb2xsb3ZlciBvY2N1cnMuICBDdXJyZW50ICd3aGVuJyBldmVudHMgc3VwcG9ydGVkOg0KICAgICAgICAjIFMgLSBTZWNvbmRzDQogICAgICAgICMgTSAtIE1pbnV0ZXMNCiAgICAgICAgIyBIIC0gSG91cnMNCiAgICAgICAgIyBEIC0gRGF5cw0KICAgICAgICAjIG1pZG5pZ2h0IC0gcm9sbCBvdmVyIGF0IG1pZG5pZ2h0DQogICAgICAgICMgV3swLTZ9IC0gcm9sbCBvdmVyIG9uIGEgY2VydGFpbiBkYXk7IDAgLSBNb25kYXkNCiAgICAgICAgIw0KICAgICAgICAjIENhc2Ugb2YgdGhlICd3aGVuJyBzcGVjaWZpZXIgaXMgbm90IGltcG9ydGFudDsgbG93ZXIgb3IgdXBwZXIgY2FzZQ0KICAgICAgICAjIHdpbGwgd29yay4NCiAgICAgICAgaWYgc2VsZi53aGVuID09ICdTJzoNCiAgICAgICAgICAgIHNlbGYuaW50ZXJ2YWwgPSAxICMgb25lIHNlY29uZA0KICAgICAgICAgICAgc2VsZi5zdWZmaXggPSAiJVktJW0tJWRfJUgtJU0tJVMiDQogICAgICAgICAgICBzZWxmLmV4dE1hdGNoID0gciJeXGR7NH0tXGR7Mn0tXGR7Mn1fXGR7Mn0tXGR7Mn0tXGR7Mn0oXC5cdyspPyQiDQogICAgICAgIGVsaWYgc2VsZi53aGVuID09ICdNJzoNCiAgICAgICAgICAgIHNlbGYuaW50ZXJ2YWwgPSA2MCAjIG9uZSBtaW51dGUNCiAgICAgICAgICAgIHNlbGYuc3VmZml4ID0gIiVZLSVtLSVkXyVILSVNIg0KICAgICAgICAgICAgc2VsZi5leHRNYXRjaCA9IHIiXlxkezR9LVxkezJ9LVxkezJ9X1xkezJ9LVxkezJ9KFwuXHcrKT8kIg0KICAgICAgICBlbGlmIHNlbGYud2hlbiA9PSAnSCc6DQogICAgICAgICAgICBzZWxmLmludGVydmFsID0gNjAgKiA2MCAjIG9uZSBob3VyDQogICAgICAgICAgICBzZWxmLnN1ZmZpeCA9ICIlWS0lbS0lZF8lSCINCiAgICAgICAgICAgIHNlbGYuZXh0TWF0Y2ggPSByIl5cZHs0fS1cZHsyfS1cZHsyfV9cZHsyfShcLlx3Kyk/JCINCiAgICAgICAgZWxpZiBzZWxmLndoZW4gPT0gJ0QnIG9yIHNlbGYud2hlbiA9PSAnTUlETklHSFQnOg0KICAgICAgICAgICAgc2VsZi5pbnRlcnZhbCA9IDYwICogNjAgKiAyNCAjIG9uZSBkYXkNCiAgICAgICAgICAgIHNlbGYuc3VmZml4ID0gIiVZLSVtLSVkIg0KICAgICAgICAgICAgc2VsZi5leHRNYXRjaCA9IHIiXlxkezR9LVxkezJ9LVxkezJ9KFwuXHcrKT8kIg0KICAgICAgICBlbGlmIHNlbGYud2hlbi5zdGFydHN3aXRoKCdXJyk6DQogICAgICAgICAgICBzZWxmLmludGVydmFsID0gNjAgKiA2MCAqIDI0ICogNyAjIG9uZSB3ZWVrDQogICAgICAgICAgICBpZiBsZW4oc2VsZi53aGVuKSAhPSAyOg0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIllvdSBtdXN0IHNwZWNpZnkgYSBkYXkgZm9yIHdlZWtseSByb2xsb3ZlciBmcm9tIDAgdG8gNiAoMCBpcyBNb25kYXkpOiAlcyIgJSBzZWxmLndoZW4pDQogICAgICAgICAgICBpZiBzZWxmLndoZW5bMV0gPCAnMCcgb3Igc2VsZi53aGVuWzFdID4gJzYnOg0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgZGF5IHNwZWNpZmllZCBmb3Igd2Vla2x5IHJvbGxvdmVyOiAlcyIgJSBzZWxmLndoZW4pDQogICAgICAgICAgICBzZWxmLmRheU9mV2VlayA9IGludChzZWxmLndoZW5bMV0pDQogICAgICAgICAgICBzZWxmLnN1ZmZpeCA9ICIlWS0lbS0lZCINCiAgICAgICAgICAgIHNlbGYuZXh0TWF0Y2ggPSByIl5cZHs0fS1cZHsyfS1cZHsyfShcLlx3Kyk/JCINCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgcm9sbG92ZXIgaW50ZXJ2YWwgc3BlY2lmaWVkOiAlcyIgJSBzZWxmLndoZW4pDQoNCiAgICAgICAgc2VsZi5leHRNYXRjaCA9IHJlLmNvbXBpbGUoc2VsZi5leHRNYXRjaCwgcmUuQVNDSUkpDQogICAgICAgIHNlbGYuaW50ZXJ2YWwgPSBzZWxmLmludGVydmFsICogaW50ZXJ2YWwgIyBtdWx0aXBseSBieSB1bml0cyByZXF1ZXN0ZWQNCiAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoZmlsZW5hbWUpOg0KICAgICAgICAgICAgdCA9IG9zLnN0YXQoZmlsZW5hbWUpW1NUX01USU1FXQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgdCA9IGludCh0aW1lLnRpbWUoKSkNCiAgICAgICAgc2VsZi5yb2xsb3ZlckF0ID0gc2VsZi5jb21wdXRlUm9sbG92ZXIodCkNCg0KICAgIGRlZiBjb21wdXRlUm9sbG92ZXIoc2VsZiwgY3VycmVudFRpbWUpOg0KICAgICAgICAiIiINCiAgICAgICAgV29yayBvdXQgdGhlIHJvbGxvdmVyIHRpbWUgYmFzZWQgb24gdGhlIHNwZWNpZmllZCB0aW1lLg0KICAgICAgICAiIiINCiAgICAgICAgcmVzdWx0ID0gY3VycmVudFRpbWUgKyBzZWxmLmludGVydmFsDQogICAgICAgICMgSWYgd2UgYXJlIHJvbGxpbmcgb3ZlciBhdCBtaWRuaWdodCBvciB3ZWVrbHksIHRoZW4gdGhlIGludGVydmFsIGlzIGFscmVhZHkga25vd24uDQogICAgICAgICMgV2hhdCB3ZSBuZWVkIHRvIGZpZ3VyZSBvdXQgaXMgV0hFTiB0aGUgbmV4dCBpbnRlcnZhbCBpcy4gIEluIG90aGVyIHdvcmRzLA0KICAgICAgICAjIGlmIHlvdSBhcmUgcm9sbGluZyBvdmVyIGF0IG1pZG5pZ2h0LCB0aGVuIHlvdXIgYmFzZSBpbnRlcnZhbCBpcyAxIGRheSwNCiAgICAgICAgIyBidXQgeW91IHdhbnQgdG8gc3RhcnQgdGhhdCBvbmUgZGF5IGNsb2NrIGF0IG1pZG5pZ2h0LCBub3Qgbm93LiAgU28sIHdlDQogICAgICAgICMgaGF2ZSB0byBmdWRnZSB0aGUgcm9sbG92ZXJBdCB2YWx1ZSBpbiBvcmRlciB0byB0cmlnZ2VyIHRoZSBmaXJzdCByb2xsb3Zlcg0KICAgICAgICAjIGF0IHRoZSByaWdodCB0aW1lLiAgQWZ0ZXIgdGhhdCwgdGhlIHJlZ3VsYXIgaW50ZXJ2YWwgd2lsbCB0YWtlIGNhcmUgb2YNCiAgICAgICAgIyB0aGUgcmVzdC4gIE5vdGUgdGhhdCB0aGlzIGNvZGUgZG9lc24ndCBjYXJlIGFib3V0IGxlYXAgc2Vjb25kcy4gOikNCiAgICAgICAgaWYgc2VsZi53aGVuID09ICdNSUROSUdIVCcgb3Igc2VsZi53aGVuLnN0YXJ0c3dpdGgoJ1cnKToNCiAgICAgICAgICAgICMgVGhpcyBjb3VsZCBiZSBkb25lIHdpdGggbGVzcyBjb2RlLCBidXQgSSB3YW50ZWQgaXQgdG8gYmUgY2xlYXINCiAgICAgICAgICAgIGlmIHNlbGYudXRjOg0KICAgICAgICAgICAgICAgIHQgPSB0aW1lLmdtdGltZShjdXJyZW50VGltZSkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgdCA9IHRpbWUubG9jYWx0aW1lKGN1cnJlbnRUaW1lKQ0KICAgICAgICAgICAgY3VycmVudEhvdXIgPSB0WzNdDQogICAgICAgICAgICBjdXJyZW50TWludXRlID0gdFs0XQ0KICAgICAgICAgICAgY3VycmVudFNlY29uZCA9IHRbNV0NCiAgICAgICAgICAgICMgciBpcyB0aGUgbnVtYmVyIG9mIHNlY29uZHMgbGVmdCBiZXR3ZWVuIG5vdyBhbmQgbWlkbmlnaHQNCiAgICAgICAgICAgIHIgPSBfTUlETklHSFQgLSAoKGN1cnJlbnRIb3VyICogNjAgKyBjdXJyZW50TWludXRlKSAqIDYwICsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlY29uZCkNCiAgICAgICAgICAgIHJlc3VsdCA9IGN1cnJlbnRUaW1lICsgcg0KICAgICAgICAgICAgIyBJZiB3ZSBhcmUgcm9sbGluZyBvdmVyIG9uIGEgY2VydGFpbiBkYXksIGFkZCBpbiB0aGUgbnVtYmVyIG9mIGRheXMgdW50aWwNCiAgICAgICAgICAgICMgdGhlIG5leHQgcm9sbG92ZXIsIGJ1dCBvZmZzZXQgYnkgMSBzaW5jZSB3ZSBqdXN0IGNhbGN1bGF0ZWQgdGhlIHRpbWUNCiAgICAgICAgICAgICMgdW50aWwgdGhlIG5leHQgZGF5IHN0YXJ0cy4gIFRoZXJlIGFyZSB0aHJlZSBjYXNlczoNCiAgICAgICAgICAgICMgQ2FzZSAxKSBUaGUgZGF5IHRvIHJvbGxvdmVyIGlzIHRvZGF5OyBpbiB0aGlzIGNhc2UsIGRvIG5vdGhpbmcNCiAgICAgICAgICAgICMgQ2FzZSAyKSBUaGUgZGF5IHRvIHJvbGxvdmVyIGlzIGZ1cnRoZXIgaW4gdGhlIGludGVydmFsIChpLmUuLCB0b2RheSBpcw0KICAgICAgICAgICAgIyAgICAgICAgIGRheSAyIChXZWRuZXNkYXkpIGFuZCByb2xsb3ZlciBpcyBvbiBkYXkgNiAoU3VuZGF5KS4gIERheXMgdG8NCiAgICAgICAgICAgICMgICAgICAgICBuZXh0IHJvbGxvdmVyIGlzIHNpbXBseSA2IC0gMiAtIDEsIG9yIDMuDQogICAgICAgICAgICAjIENhc2UgMykgVGhlIGRheSB0byByb2xsb3ZlciBpcyBiZWhpbmQgdXMgaW4gdGhlIGludGVydmFsIChpLmUuLCB0b2RheQ0KICAgICAgICAgICAgIyAgICAgICAgIGlzIGRheSA1IChTYXR1cmRheSkgYW5kIHJvbGxvdmVyIGlzIG9uIGRheSAzIChUaHVyc2RheSkuDQogICAgICAgICAgICAjICAgICAgICAgRGF5cyB0byByb2xsb3ZlciBpcyA2IC0gNSArIDMsIG9yIDQuICBJbiB0aGlzIGNhc2UsIGl0J3MgdGhlDQogICAgICAgICAgICAjICAgICAgICAgbnVtYmVyIG9mIGRheXMgbGVmdCBpbiB0aGUgY3VycmVudCB3ZWVrICgxKSBwbHVzIHRoZSBudW1iZXINCiAgICAgICAgICAgICMgICAgICAgICBvZiBkYXlzIGluIHRoZSBuZXh0IHdlZWsgdW50aWwgdGhlIHJvbGxvdmVyIGRheSAoMykuDQogICAgICAgICAgICAjIFRoZSBjYWxjdWxhdGlvbnMgZGVzY3JpYmVkIGluIDIpIGFuZCAzKSBhYm92ZSBuZWVkIHRvIGhhdmUgYSBkYXkgYWRkZWQuDQogICAgICAgICAgICAjIFRoaXMgaXMgYmVjYXVzZSB0aGUgYWJvdmUgdGltZSBjYWxjdWxhdGlvbiB0YWtlcyB1cyB0byBtaWRuaWdodCBvbiB0aGlzDQogICAgICAgICAgICAjIGRheSwgaS5lLiB0aGUgc3RhcnQgb2YgdGhlIG5leHQgZGF5Lg0KICAgICAgICAgICAgaWYgc2VsZi53aGVuLnN0YXJ0c3dpdGgoJ1cnKToNCiAgICAgICAgICAgICAgICBkYXkgPSB0WzZdICMgMCBpcyBNb25kYXkNCiAgICAgICAgICAgICAgICBpZiBkYXkgIT0gc2VsZi5kYXlPZldlZWs6DQogICAgICAgICAgICAgICAgICAgIGlmIGRheSA8IHNlbGYuZGF5T2ZXZWVrOg0KICAgICAgICAgICAgICAgICAgICAgICAgZGF5c1RvV2FpdCA9IHNlbGYuZGF5T2ZXZWVrIC0gZGF5DQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBkYXlzVG9XYWl0ID0gNiAtIGRheSArIHNlbGYuZGF5T2ZXZWVrICsgMQ0KICAgICAgICAgICAgICAgICAgICBuZXdSb2xsb3ZlckF0ID0gcmVzdWx0ICsgKGRheXNUb1dhaXQgKiAoNjAgKiA2MCAqIDI0KSkNCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNlbGYudXRjOg0KICAgICAgICAgICAgICAgICAgICAgICAgZHN0Tm93ID0gdFstMV0NCiAgICAgICAgICAgICAgICAgICAgICAgIGRzdEF0Um9sbG92ZXIgPSB0aW1lLmxvY2FsdGltZShuZXdSb2xsb3ZlckF0KVstMV0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRzdE5vdyAhPSBkc3RBdFJvbGxvdmVyOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBkc3ROb3c6ICAjIERTVCBraWNrcyBpbiBiZWZvcmUgbmV4dCByb2xsb3Zlciwgc28gd2UgbmVlZCB0byBkZWR1Y3QgYW4gaG91cg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlbmQgPSAtMzYwMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6ICAgICAgICAgICAjIERTVCBib3dzIG91dCBiZWZvcmUgbmV4dCByb2xsb3Zlciwgc28gd2UgbmVlZCB0byBhZGQgYW4gaG91cg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlbmQgPSAzNjAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um9sbG92ZXJBdCArPSBhZGRlbmQNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3Um9sbG92ZXJBdA0KICAgICAgICByZXR1cm4gcmVzdWx0DQoNCiAgICBkZWYgc2hvdWxkUm9sbG92ZXIoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIERldGVybWluZSBpZiByb2xsb3ZlciBzaG91bGQgb2NjdXIuDQoNCiAgICAgICAgcmVjb3JkIGlzIG5vdCB1c2VkLCBhcyB3ZSBhcmUganVzdCBjb21wYXJpbmcgdGltZXMsIGJ1dCBpdCBpcyBuZWVkZWQgc28NCiAgICAgICAgdGhlIG1ldGhvZCBzaWduYXR1cmVzIGFyZSB0aGUgc2FtZQ0KICAgICAgICAiIiINCiAgICAgICAgdCA9IGludCh0aW1lLnRpbWUoKSkNCiAgICAgICAgaWYgdCA+PSBzZWxmLnJvbGxvdmVyQXQ6DQogICAgICAgICAgICByZXR1cm4gMQ0KICAgICAgICByZXR1cm4gMA0KDQogICAgZGVmIGdldEZpbGVzVG9EZWxldGUoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBEZXRlcm1pbmUgdGhlIGZpbGVzIHRvIGRlbGV0ZSB3aGVuIHJvbGxpbmcgb3Zlci4NCg0KICAgICAgICBNb3JlIHNwZWNpZmljIHRoYW4gdGhlIGVhcmxpZXIgbWV0aG9kLCB3aGljaCBqdXN0IHVzZWQgZ2xvYi5nbG9iKCkuDQogICAgICAgICIiIg0KICAgICAgICBkaXJOYW1lLCBiYXNlTmFtZSA9IG9zLnBhdGguc3BsaXQoc2VsZi5iYXNlRmlsZW5hbWUpDQogICAgICAgIGZpbGVOYW1lcyA9IG9zLmxpc3RkaXIoZGlyTmFtZSkNCiAgICAgICAgcmVzdWx0ID0gW10NCiAgICAgICAgcHJlZml4ID0gYmFzZU5hbWUgKyAiLiINCiAgICAgICAgcGxlbiA9IGxlbihwcmVmaXgpDQogICAgICAgIGZvciBmaWxlTmFtZSBpbiBmaWxlTmFtZXM6DQogICAgICAgICAgICBpZiBmaWxlTmFtZVs6cGxlbl0gPT0gcHJlZml4Og0KICAgICAgICAgICAgICAgIHN1ZmZpeCA9IGZpbGVOYW1lW3BsZW46XQ0KICAgICAgICAgICAgICAgIGlmIHNlbGYuZXh0TWF0Y2gubWF0Y2goc3VmZml4KToNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChvcy5wYXRoLmpvaW4oZGlyTmFtZSwgZmlsZU5hbWUpKQ0KICAgICAgICByZXN1bHQuc29ydCgpDQogICAgICAgIGlmIGxlbihyZXN1bHQpIDwgc2VsZi5iYWNrdXBDb3VudDoNCiAgICAgICAgICAgIHJlc3VsdCA9IFtdDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbOmxlbihyZXN1bHQpIC0gc2VsZi5iYWNrdXBDb3VudF0NCiAgICAgICAgcmV0dXJuIHJlc3VsdA0KDQogICAgZGVmIGRvUm9sbG92ZXIoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBkbyBhIHJvbGxvdmVyOyBpbiB0aGlzIGNhc2UsIGEgZGF0ZS90aW1lIHN0YW1wIGlzIGFwcGVuZGVkIHRvIHRoZSBmaWxlbmFtZQ0KICAgICAgICB3aGVuIHRoZSByb2xsb3ZlciBoYXBwZW5zLiAgSG93ZXZlciwgeW91IHdhbnQgdGhlIGZpbGUgdG8gYmUgbmFtZWQgZm9yIHRoZQ0KICAgICAgICBzdGFydCBvZiB0aGUgaW50ZXJ2YWwsIG5vdCB0aGUgY3VycmVudCB0aW1lLiAgSWYgdGhlcmUgaXMgYSBiYWNrdXAgY291bnQsDQogICAgICAgIHRoZW4gd2UgaGF2ZSB0byBnZXQgYSBsaXN0IG9mIG1hdGNoaW5nIGZpbGVuYW1lcywgc29ydCB0aGVtIGFuZCByZW1vdmUNCiAgICAgICAgdGhlIG9uZSB3aXRoIHRoZSBvbGRlc3Qgc3VmZml4Lg0KICAgICAgICAiIiINCiAgICAgICAgaWYgc2VsZi5zdHJlYW06DQogICAgICAgICAgICBzZWxmLnN0cmVhbS5jbG9zZSgpDQogICAgICAgICAgICBzZWxmLnN0cmVhbSA9IE5vbmUNCiAgICAgICAgIyBnZXQgdGhlIHRpbWUgdGhhdCB0aGlzIHNlcXVlbmNlIHN0YXJ0ZWQgYXQgYW5kIG1ha2UgaXQgYSBUaW1lVHVwbGUNCiAgICAgICAgY3VycmVudFRpbWUgPSBpbnQodGltZS50aW1lKCkpDQogICAgICAgIGRzdE5vdyA9IHRpbWUubG9jYWx0aW1lKGN1cnJlbnRUaW1lKVstMV0NCiAgICAgICAgdCA9IHNlbGYucm9sbG92ZXJBdCAtIHNlbGYuaW50ZXJ2YWwNCiAgICAgICAgaWYgc2VsZi51dGM6DQogICAgICAgICAgICB0aW1lVHVwbGUgPSB0aW1lLmdtdGltZSh0KQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgdGltZVR1cGxlID0gdGltZS5sb2NhbHRpbWUodCkNCiAgICAgICAgICAgIGRzdFRoZW4gPSB0aW1lVHVwbGVbLTFdDQogICAgICAgICAgICBpZiBkc3ROb3cgIT0gZHN0VGhlbjoNCiAgICAgICAgICAgICAgICBpZiBkc3ROb3c6DQogICAgICAgICAgICAgICAgICAgIGFkZGVuZCA9IDM2MDANCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBhZGRlbmQgPSAtMzYwMA0KICAgICAgICAgICAgICAgIHRpbWVUdXBsZSA9IHRpbWUubG9jYWx0aW1lKHQgKyBhZGRlbmQpDQogICAgICAgIGRmbiA9IHNlbGYucm90YXRpb25fZmlsZW5hbWUoc2VsZi5iYXNlRmlsZW5hbWUgKyAiLiIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc3RyZnRpbWUoc2VsZi5zdWZmaXgsIHRpbWVUdXBsZSkpDQogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGRmbik6DQogICAgICAgICAgICBvcy5yZW1vdmUoZGZuKQ0KICAgICAgICBzZWxmLnJvdGF0ZShzZWxmLmJhc2VGaWxlbmFtZSwgZGZuKQ0KICAgICAgICBpZiBzZWxmLmJhY2t1cENvdW50ID4gMDoNCiAgICAgICAgICAgIGZvciBzIGluIHNlbGYuZ2V0RmlsZXNUb0RlbGV0ZSgpOg0KICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzKQ0KICAgICAgICBzZWxmLm1vZGUgPSAndycNCiAgICAgICAgc2VsZi5zdHJlYW0gPSBzZWxmLl9vcGVuKCkNCiAgICAgICAgbmV3Um9sbG92ZXJBdCA9IHNlbGYuY29tcHV0ZVJvbGxvdmVyKGN1cnJlbnRUaW1lKQ0KICAgICAgICB3aGlsZSBuZXdSb2xsb3ZlckF0IDw9IGN1cnJlbnRUaW1lOg0KICAgICAgICAgICAgbmV3Um9sbG92ZXJBdCA9IG5ld1JvbGxvdmVyQXQgKyBzZWxmLmludGVydmFsDQogICAgICAgICNJZiBEU1QgY2hhbmdlcyBhbmQgbWlkbmlnaHQgb3Igd2Vla2x5IHJvbGxvdmVyLCBhZGp1c3QgZm9yIHRoaXMuDQogICAgICAgIGlmIChzZWxmLndoZW4gPT0gJ01JRE5JR0hUJyBvciBzZWxmLndoZW4uc3RhcnRzd2l0aCgnVycpKSBhbmQgbm90IHNlbGYudXRjOg0KICAgICAgICAgICAgZHN0QXRSb2xsb3ZlciA9IHRpbWUubG9jYWx0aW1lKG5ld1JvbGxvdmVyQXQpWy0xXQ0KICAgICAgICAgICAgaWYgZHN0Tm93ICE9IGRzdEF0Um9sbG92ZXI6DQogICAgICAgICAgICAgICAgaWYgbm90IGRzdE5vdzogICMgRFNUIGtpY2tzIGluIGJlZm9yZSBuZXh0IHJvbGxvdmVyLCBzbyB3ZSBuZWVkIHRvIGRlZHVjdCBhbiBob3VyDQogICAgICAgICAgICAgICAgICAgIGFkZGVuZCA9IC0zNjAwDQogICAgICAgICAgICAgICAgZWxzZTogICAgICAgICAgICMgRFNUIGJvd3Mgb3V0IGJlZm9yZSBuZXh0IHJvbGxvdmVyLCBzbyB3ZSBuZWVkIHRvIGFkZCBhbiBob3VyDQogICAgICAgICAgICAgICAgICAgIGFkZGVuZCA9IDM2MDANCiAgICAgICAgICAgICAgICBuZXdSb2xsb3ZlckF0ICs9IGFkZGVuZA0KICAgICAgICBzZWxmLnJvbGxvdmVyQXQgPSBuZXdSb2xsb3ZlckF0DQoNCmNsYXNzIFdhdGNoZWRGaWxlSGFuZGxlcihsb2dnaW5nLkZpbGVIYW5kbGVyKToNCiAgICAiIiINCiAgICBBIGhhbmRsZXIgZm9yIGxvZ2dpbmcgdG8gYSBmaWxlLCB3aGljaCB3YXRjaGVzIHRoZSBmaWxlDQogICAgdG8gc2VlIGlmIGl0IGhhcyBjaGFuZ2VkIHdoaWxlIGluIHVzZS4gVGhpcyBjYW4gaGFwcGVuIGJlY2F1c2Ugb2YNCiAgICB1c2FnZSBvZiBwcm9ncmFtcyBzdWNoIGFzIG5ld3N5c2xvZyBhbmQgbG9ncm90YXRlIHdoaWNoIHBlcmZvcm0NCiAgICBsb2cgZmlsZSByb3RhdGlvbi4gVGhpcyBoYW5kbGVyLCBpbnRlbmRlZCBmb3IgdXNlIHVuZGVyIFVuaXgsDQogICAgd2F0Y2hlcyB0aGUgZmlsZSB0byBzZWUgaWYgaXQgaGFzIGNoYW5nZWQgc2luY2UgdGhlIGxhc3QgZW1pdC4NCiAgICAoQSBmaWxlIGhhcyBjaGFuZ2VkIGlmIGl0cyBkZXZpY2Ugb3IgaW5vZGUgaGF2ZSBjaGFuZ2VkLikNCiAgICBJZiBpdCBoYXMgY2hhbmdlZCwgdGhlIG9sZCBmaWxlIHN0cmVhbSBpcyBjbG9zZWQsIGFuZCB0aGUgZmlsZQ0KICAgIG9wZW5lZCB0byBnZXQgYSBuZXcgc3RyZWFtLg0KDQogICAgVGhpcyBoYW5kbGVyIGlzIG5vdCBhcHByb3ByaWF0ZSBmb3IgdXNlIHVuZGVyIFdpbmRvd3MsIGJlY2F1c2UNCiAgICB1bmRlciBXaW5kb3dzIG9wZW4gZmlsZXMgY2Fubm90IGJlIG1vdmVkIG9yIHJlbmFtZWQgLSBsb2dnaW5nDQogICAgb3BlbnMgdGhlIGZpbGVzIHdpdGggZXhjbHVzaXZlIGxvY2tzIC0gYW5kIHNvIHRoZXJlIGlzIG5vIG5lZWQNCiAgICBmb3Igc3VjaCBhIGhhbmRsZXIuIEZ1cnRoZXJtb3JlLCBTVF9JTk8gaXMgbm90IHN1cHBvcnRlZCB1bmRlcg0KICAgIFdpbmRvd3M7IHN0YXQgYWx3YXlzIHJldHVybnMgemVybyBmb3IgdGhpcyB2YWx1ZS4NCg0KICAgIFRoaXMgaGFuZGxlciBpcyBiYXNlZCBvbiBhIHN1Z2dlc3Rpb24gYW5kIHBhdGNoIGJ5IENoYWQgSi4NCiAgICBTY2hyb2VkZXIuDQogICAgIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZpbGVuYW1lLCBtb2RlPSdhJywgZW5jb2Rpbmc9Tm9uZSwgZGVsYXk9RmFsc2UpOg0KICAgICAgICBsb2dnaW5nLkZpbGVIYW5kbGVyLl9faW5pdF9fKHNlbGYsIGZpbGVuYW1lLCBtb2RlLCBlbmNvZGluZywgZGVsYXkpDQogICAgICAgIHNlbGYuZGV2LCBzZWxmLmlubyA9IC0xLCAtMQ0KICAgICAgICBzZWxmLl9zdGF0c3RyZWFtKCkNCg0KICAgIGRlZiBfc3RhdHN0cmVhbShzZWxmKToNCiAgICAgICAgaWYgc2VsZi5zdHJlYW06DQogICAgICAgICAgICBzcmVzID0gb3MuZnN0YXQoc2VsZi5zdHJlYW0uZmlsZW5vKCkpDQogICAgICAgICAgICBzZWxmLmRldiwgc2VsZi5pbm8gPSBzcmVzW1NUX0RFVl0sIHNyZXNbU1RfSU5PXQ0KDQogICAgZGVmIGVtaXQoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIEVtaXQgYSByZWNvcmQuDQoNCiAgICAgICAgRmlyc3QgY2hlY2sgaWYgdGhlIHVuZGVybHlpbmcgZmlsZSBoYXMgY2hhbmdlZCwgYW5kIGlmIGl0DQogICAgICAgIGhhcywgY2xvc2UgdGhlIG9sZCBzdHJlYW0gYW5kIHJlb3BlbiB0aGUgZmlsZSB0byBnZXQgdGhlDQogICAgICAgIGN1cnJlbnQgc3RyZWFtLg0KICAgICAgICAiIiINCiAgICAgICAgIyBSZWR1Y2UgdGhlIGNoYW5jZSBvZiByYWNlIGNvbmRpdGlvbnMgYnkgc3RhdCdpbmcgYnkgcGF0aCBvbmx5DQogICAgICAgICMgb25jZSBhbmQgdGhlbiBmc3RhdCdpbmcgb3VyIG5ldyBmZCBpZiB3ZSBvcGVuZWQgYSBuZXcgbG9nIHN0cmVhbS4NCiAgICAgICAgIyBTZWUgaXNzdWUgIzE0NjMyOiBUaGFua3MgdG8gSm9obiBNdWxsaWdhbiBmb3IgdGhlIHByb2JsZW0gcmVwb3J0DQogICAgICAgICMgYW5kIHBhdGNoLg0KICAgICAgICB0cnk6DQogICAgICAgICAgICAjIHN0YXQgdGhlIGZpbGUgYnkgcGF0aCwgY2hlY2tpbmcgZm9yIGV4aXN0ZW5jZQ0KICAgICAgICAgICAgc3JlcyA9IG9zLnN0YXQoc2VsZi5iYXNlRmlsZW5hbWUpDQogICAgICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGVycjoNCiAgICAgICAgICAgIGlmIGVyci5lcnJubyA9PSBlcnJuby5FTk9FTlQ6DQogICAgICAgICAgICAgICAgc3JlcyA9IE5vbmUNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgIyBjb21wYXJlIGZpbGUgc3lzdGVtIHN0YXQgd2l0aCB0aGF0IG9mIG91ciBzdHJlYW0gZmlsZSBoYW5kbGUNCiAgICAgICAgaWYgbm90IHNyZXMgb3Igc3Jlc1tTVF9ERVZdICE9IHNlbGYuZGV2IG9yIHNyZXNbU1RfSU5PXSAhPSBzZWxmLmlubzoNCiAgICAgICAgICAgIGlmIHNlbGYuc3RyZWFtIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICMgd2UgaGF2ZSBhbiBvcGVuIGZpbGUgaGFuZGxlLCBjbGVhbiBpdCB1cA0KICAgICAgICAgICAgICAgIHNlbGYuc3RyZWFtLmZsdXNoKCkNCiAgICAgICAgICAgICAgICBzZWxmLnN0cmVhbS5jbG9zZSgpDQogICAgICAgICAgICAgICAgIyBvcGVuIGEgbmV3IGZpbGUgaGFuZGxlIGFuZCBnZXQgbmV3IHN0YXQgaW5mbyBmcm9tIHRoYXQgZmQNCiAgICAgICAgICAgICAgICBzZWxmLnN0cmVhbSA9IHNlbGYuX29wZW4oKQ0KICAgICAgICAgICAgICAgIHNlbGYuX3N0YXRzdHJlYW0oKQ0KICAgICAgICBsb2dnaW5nLkZpbGVIYW5kbGVyLmVtaXQoc2VsZiwgcmVjb3JkKQ0KDQoNCmNsYXNzIFNvY2tldEhhbmRsZXIobG9nZ2luZy5IYW5kbGVyKToNCiAgICAiIiINCiAgICBBIGhhbmRsZXIgY2xhc3Mgd2hpY2ggd3JpdGVzIGxvZ2dpbmcgcmVjb3JkcywgaW4gcGlja2xlIGZvcm1hdCwgdG8NCiAgICBhIHN0cmVhbWluZyBzb2NrZXQuIFRoZSBzb2NrZXQgaXMga2VwdCBvcGVuIGFjcm9zcyBsb2dnaW5nIGNhbGxzLg0KICAgIElmIHRoZSBwZWVyIHJlc2V0cyBpdCwgYW4gYXR0ZW1wdCBpcyBtYWRlIHRvIHJlY29ubmVjdCBvbiB0aGUgbmV4dCBjYWxsLg0KICAgIFRoZSBwaWNrbGUgd2hpY2ggaXMgc2VudCBpcyB0aGF0IG9mIHRoZSBMb2dSZWNvcmQncyBhdHRyaWJ1dGUgZGljdGlvbmFyeQ0KICAgIChfX2RpY3RfXyksIHNvIHRoYXQgdGhlIHJlY2VpdmVyIGRvZXMgbm90IG5lZWQgdG8gaGF2ZSB0aGUgbG9nZ2luZyBtb2R1bGUNCiAgICBpbnN0YWxsZWQgaW4gb3JkZXIgdG8gcHJvY2VzcyB0aGUgbG9nZ2luZyBldmVudC4NCg0KICAgIFRvIHVucGlja2xlIHRoZSByZWNvcmQgYXQgdGhlIHJlY2VpdmluZyBlbmQgaW50byBhIExvZ1JlY29yZCwgdXNlIHRoZQ0KICAgIG1ha2VMb2dSZWNvcmQgZnVuY3Rpb24uDQogICAgIiIiDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgaG9zdCwgcG9ydCk6DQogICAgICAgICIiIg0KICAgICAgICBJbml0aWFsaXplcyB0aGUgaGFuZGxlciB3aXRoIGEgc3BlY2lmaWMgaG9zdCBhZGRyZXNzIGFuZCBwb3J0Lg0KDQogICAgICAgIFdoZW4gdGhlIGF0dHJpYnV0ZSAqY2xvc2VPbkVycm9yKiBpcyBzZXQgdG8gVHJ1ZSAtIGlmIGEgc29ja2V0IGVycm9yDQogICAgICAgIG9jY3VycywgdGhlIHNvY2tldCBpcyBzaWxlbnRseSBjbG9zZWQgYW5kIHRoZW4gcmVvcGVuZWQgb24gdGhlIG5leHQNCiAgICAgICAgbG9nZ2luZyBjYWxsLg0KICAgICAgICAiIiINCiAgICAgICAgbG9nZ2luZy5IYW5kbGVyLl9faW5pdF9fKHNlbGYpDQogICAgICAgIHNlbGYuaG9zdCA9IGhvc3QNCiAgICAgICAgc2VsZi5wb3J0ID0gcG9ydA0KICAgICAgICBzZWxmLnNvY2sgPSBOb25lDQogICAgICAgIHNlbGYuY2xvc2VPbkVycm9yID0gRmFsc2UNCiAgICAgICAgc2VsZi5yZXRyeVRpbWUgPSBOb25lDQogICAgICAgICMNCiAgICAgICAgIyBFeHBvbmVudGlhbCBiYWNrb2ZmIHBhcmFtZXRlcnMuDQogICAgICAgICMNCiAgICAgICAgc2VsZi5yZXRyeVN0YXJ0ID0gMS4wDQogICAgICAgIHNlbGYucmV0cnlNYXggPSAzMC4wDQogICAgICAgIHNlbGYucmV0cnlGYWN0b3IgPSAyLjANCg0KICAgIGRlZiBtYWtlU29ja2V0KHNlbGYsIHRpbWVvdXQ9MSk6DQogICAgICAgICIiIg0KICAgICAgICBBIGZhY3RvcnkgbWV0aG9kIHdoaWNoIGFsbG93cyBzdWJjbGFzc2VzIHRvIGRlZmluZSB0aGUgcHJlY2lzZQ0KICAgICAgICB0eXBlIG9mIHNvY2tldCB0aGV5IHdhbnQuDQogICAgICAgICIiIg0KICAgICAgICBzID0gc29ja2V0LnNvY2tldChzb2NrZXQuQUZfSU5FVCwgc29ja2V0LlNPQ0tfU1RSRUFNKQ0KICAgICAgICBpZiBoYXNhdHRyKHMsICdzZXR0aW1lb3V0Jyk6DQogICAgICAgICAgICBzLnNldHRpbWVvdXQodGltZW91dCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgcy5jb25uZWN0KChzZWxmLmhvc3QsIHNlbGYucG9ydCkpDQogICAgICAgICAgICByZXR1cm4gcw0KICAgICAgICBleGNlcHQgc29ja2V0LmVycm9yOg0KICAgICAgICAgICAgcy5jbG9zZSgpDQogICAgICAgICAgICByYWlzZQ0KDQogICAgZGVmIGNyZWF0ZVNvY2tldChzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIFRyeSB0byBjcmVhdGUgYSBzb2NrZXQsIHVzaW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgd2l0aA0KICAgICAgICBhIG1heCByZXRyeSB0aW1lLiBUaGFua3MgdG8gUm9iZXJ0IE9sc29uIGZvciB0aGUgb3JpZ2luYWwgcGF0Y2gNCiAgICAgICAgKFNGICM4MTU5MTEpIHdoaWNoIGhhcyBiZWVuIHNsaWdodGx5IHJlZmFjdG9yZWQuDQogICAgICAgICIiIg0KICAgICAgICBub3cgPSB0aW1lLnRpbWUoKQ0KICAgICAgICAjIEVpdGhlciByZXRyeVRpbWUgaXMgTm9uZSwgaW4gd2hpY2ggY2FzZSB0aGlzDQogICAgICAgICMgaXMgdGhlIGZpcnN0IHRpbWUgYmFjayBhZnRlciBhIGRpc2Nvbm5lY3QsIG9yDQogICAgICAgICMgd2UndmUgd2FpdGVkIGxvbmcgZW5vdWdoLg0KICAgICAgICBpZiBzZWxmLnJldHJ5VGltZSBpcyBOb25lOg0KICAgICAgICAgICAgYXR0ZW1wdCA9IFRydWUNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGF0dGVtcHQgPSAobm93ID49IHNlbGYucmV0cnlUaW1lKQ0KICAgICAgICBpZiBhdHRlbXB0Og0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIHNlbGYuc29jayA9IHNlbGYubWFrZVNvY2tldCgpDQogICAgICAgICAgICAgICAgc2VsZi5yZXRyeVRpbWUgPSBOb25lICMgbmV4dCB0aW1lLCBubyBkZWxheSBiZWZvcmUgdHJ5aW5nDQogICAgICAgICAgICBleGNlcHQgc29ja2V0LmVycm9yOg0KICAgICAgICAgICAgICAgICNDcmVhdGlvbiBmYWlsZWQsIHNvIHNldCB0aGUgcmV0cnkgdGltZSBhbmQgcmV0dXJuLg0KICAgICAgICAgICAgICAgIGlmIHNlbGYucmV0cnlUaW1lIGlzIE5vbmU6DQogICAgICAgICAgICAgICAgICAgIHNlbGYucmV0cnlQZXJpb2QgPSBzZWxmLnJldHJ5U3RhcnQNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLnJldHJ5UGVyaW9kID0gc2VsZi5yZXRyeVBlcmlvZCAqIHNlbGYucmV0cnlGYWN0b3INCiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5yZXRyeVBlcmlvZCA+IHNlbGYucmV0cnlNYXg6DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJldHJ5UGVyaW9kID0gc2VsZi5yZXRyeU1heA0KICAgICAgICAgICAgICAgIHNlbGYucmV0cnlUaW1lID0gbm93ICsgc2VsZi5yZXRyeVBlcmlvZA0KDQogICAgZGVmIHNlbmQoc2VsZiwgcyk6DQogICAgICAgICIiIg0KICAgICAgICBTZW5kIGEgcGlja2xlZCBzdHJpbmcgdG8gdGhlIHNvY2tldC4NCg0KICAgICAgICBUaGlzIGZ1bmN0aW9uIGFsbG93cyBmb3IgcGFydGlhbCBzZW5kcyB3aGljaCBjYW4gaGFwcGVuIHdoZW4gdGhlDQogICAgICAgIG5ldHdvcmsgaXMgYnVzeS4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIHNlbGYuc29jayBpcyBOb25lOg0KICAgICAgICAgICAgc2VsZi5jcmVhdGVTb2NrZXQoKQ0KICAgICAgICAjc2VsZi5zb2NrIGNhbiBiZSBOb25lIGVpdGhlciBiZWNhdXNlIHdlIGhhdmVuJ3QgcmVhY2hlZCB0aGUgcmV0cnkNCiAgICAgICAgI3RpbWUgeWV0LCBvciBiZWNhdXNlIHdlIGhhdmUgcmVhY2hlZCB0aGUgcmV0cnkgdGltZSBhbmQgcmV0cmllZCwNCiAgICAgICAgI2J1dCBhcmUgc3RpbGwgdW5hYmxlIHRvIGNvbm5lY3QuDQogICAgICAgIGlmIHNlbGYuc29jazoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBpZiBoYXNhdHRyKHNlbGYuc29jaywgInNlbmRhbGwiKToNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zb2NrLnNlbmRhbGwocykNCiAgICAgICAgICAgICAgICBlbHNlOiAjcHJhZ21hOiBubyBjb3Zlcg0KICAgICAgICAgICAgICAgICAgICBzZW50c29mYXIgPSAwDQogICAgICAgICAgICAgICAgICAgIGxlZnQgPSBsZW4ocykNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgbGVmdCA+IDA6DQogICAgICAgICAgICAgICAgICAgICAgICBzZW50ID0gc2VsZi5zb2NrLnNlbmQoc1tzZW50c29mYXI6XSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRzb2ZhciA9IHNlbnRzb2ZhciArIHNlbnQNCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSBsZWZ0IC0gc2VudA0KICAgICAgICAgICAgZXhjZXB0IHNvY2tldC5lcnJvcjogI3ByYWdtYTogbm8gY292ZXINCiAgICAgICAgICAgICAgICBzZWxmLnNvY2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgIHNlbGYuc29jayA9IE5vbmUgICMgc28gd2UgY2FuIGNhbGwgY3JlYXRlU29ja2V0IG5leHQgdGltZQ0KDQogICAgZGVmIG1ha2VQaWNrbGUoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIFBpY2tsZXMgdGhlIHJlY29yZCBpbiBiaW5hcnkgZm9ybWF0IHdpdGggYSBsZW5ndGggcHJlZml4LCBhbmQNCiAgICAgICAgcmV0dXJucyBpdCByZWFkeSBmb3IgdHJhbnNtaXNzaW9uIGFjcm9zcyB0aGUgc29ja2V0Lg0KICAgICAgICAiIiINCiAgICAgICAgZWkgPSByZWNvcmQuZXhjX2luZm8NCiAgICAgICAgaWYgZWk6DQogICAgICAgICAgICAjIGp1c3QgdG8gZ2V0IHRyYWNlYmFjayB0ZXh0IGludG8gcmVjb3JkLmV4Y190ZXh0IC4uLg0KICAgICAgICAgICAgZHVtbXkgPSBzZWxmLmZvcm1hdChyZWNvcmQpDQogICAgICAgICMgU2VlIGlzc3VlICMxNDQzNjogSWYgbXNnIG9yIGFyZ3MgYXJlIG9iamVjdHMsIHRoZXkgbWF5IG5vdCBiZQ0KICAgICAgICAjIGF2YWlsYWJsZSBvbiB0aGUgcmVjZWl2aW5nIGVuZC4gU28gd2UgY29udmVydCB0aGUgbXNnICUgYXJncw0KICAgICAgICAjIHRvIGEgc3RyaW5nLCBzYXZlIGl0IGFzIG1zZyBhbmQgemFwIHRoZSBhcmdzLg0KICAgICAgICBkID0gZGljdChyZWNvcmQuX19kaWN0X18pDQogICAgICAgIGRbJ21zZyddID0gcmVjb3JkLmdldE1lc3NhZ2UoKQ0KICAgICAgICBkWydhcmdzJ10gPSBOb25lDQogICAgICAgIGRbJ2V4Y19pbmZvJ10gPSBOb25lDQogICAgICAgIHMgPSBwaWNrbGUuZHVtcHMoZCwgMSkNCiAgICAgICAgc2xlbiA9IHN0cnVjdC5wYWNrKCI+TCIsIGxlbihzKSkNCiAgICAgICAgcmV0dXJuIHNsZW4gKyBzDQoNCiAgICBkZWYgaGFuZGxlRXJyb3Ioc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIEhhbmRsZSBhbiBlcnJvciBkdXJpbmcgbG9nZ2luZy4NCg0KICAgICAgICBBbiBlcnJvciBoYXMgb2NjdXJyZWQgZHVyaW5nIGxvZ2dpbmcuIE1vc3QgbGlrZWx5IGNhdXNlIC0NCiAgICAgICAgY29ubmVjdGlvbiBsb3N0LiBDbG9zZSB0aGUgc29ja2V0IHNvIHRoYXQgd2UgY2FuIHJldHJ5IG9uIHRoZQ0KICAgICAgICBuZXh0IGV2ZW50Lg0KICAgICAgICAiIiINCiAgICAgICAgaWYgc2VsZi5jbG9zZU9uRXJyb3IgYW5kIHNlbGYuc29jazoNCiAgICAgICAgICAgIHNlbGYuc29jay5jbG9zZSgpDQogICAgICAgICAgICBzZWxmLnNvY2sgPSBOb25lICAgICAgICAjdHJ5IHRvIHJlY29ubmVjdCBuZXh0IHRpbWUNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGxvZ2dpbmcuSGFuZGxlci5oYW5kbGVFcnJvcihzZWxmLCByZWNvcmQpDQoNCiAgICBkZWYgZW1pdChzZWxmLCByZWNvcmQpOg0KICAgICAgICAiIiINCiAgICAgICAgRW1pdCBhIHJlY29yZC4NCg0KICAgICAgICBQaWNrbGVzIHRoZSByZWNvcmQgYW5kIHdyaXRlcyBpdCB0byB0aGUgc29ja2V0IGluIGJpbmFyeSBmb3JtYXQuDQogICAgICAgIElmIHRoZXJlIGlzIGFuIGVycm9yIHdpdGggdGhlIHNvY2tldCwgc2lsZW50bHkgZHJvcCB0aGUgcGFja2V0Lg0KICAgICAgICBJZiB0aGVyZSB3YXMgYSBwcm9ibGVtIHdpdGggdGhlIHNvY2tldCwgcmUtZXN0YWJsaXNoZXMgdGhlDQogICAgICAgIHNvY2tldC4NCiAgICAgICAgIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHMgPSBzZWxmLm1ha2VQaWNrbGUocmVjb3JkKQ0KICAgICAgICAgICAgc2VsZi5zZW5kKHMpDQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIFN5c3RlbUV4aXQpOiAjcHJhZ21hOiBubyBjb3Zlcg0KICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgc2VsZi5oYW5kbGVFcnJvcihyZWNvcmQpDQoNCiAgICBkZWYgY2xvc2Uoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBDbG9zZXMgdGhlIHNvY2tldC4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuYWNxdWlyZSgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGlmIHNlbGYuc29jazoNCiAgICAgICAgICAgICAgICBzZWxmLnNvY2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgIHNlbGYuc29jayA9IE5vbmUNCiAgICAgICAgICAgIGxvZ2dpbmcuSGFuZGxlci5jbG9zZShzZWxmKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgc2VsZi5yZWxlYXNlKCkNCg0KY2xhc3MgRGF0YWdyYW1IYW5kbGVyKFNvY2tldEhhbmRsZXIpOg0KICAgICIiIg0KICAgIEEgaGFuZGxlciBjbGFzcyB3aGljaCB3cml0ZXMgbG9nZ2luZyByZWNvcmRzLCBpbiBwaWNrbGUgZm9ybWF0LCB0bw0KICAgIGEgZGF0YWdyYW0gc29ja2V0LiAgVGhlIHBpY2tsZSB3aGljaCBpcyBzZW50IGlzIHRoYXQgb2YgdGhlIExvZ1JlY29yZCdzDQogICAgYXR0cmlidXRlIGRpY3Rpb25hcnkgKF9fZGljdF9fKSwgc28gdGhhdCB0aGUgcmVjZWl2ZXIgZG9lcyBub3QgbmVlZCB0bw0KICAgIGhhdmUgdGhlIGxvZ2dpbmcgbW9kdWxlIGluc3RhbGxlZCBpbiBvcmRlciB0byBwcm9jZXNzIHRoZSBsb2dnaW5nIGV2ZW50Lg0KDQogICAgVG8gdW5waWNrbGUgdGhlIHJlY29yZCBhdCB0aGUgcmVjZWl2aW5nIGVuZCBpbnRvIGEgTG9nUmVjb3JkLCB1c2UgdGhlDQogICAgbWFrZUxvZ1JlY29yZCBmdW5jdGlvbi4NCg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBob3N0LCBwb3J0KToNCiAgICAgICAgIiIiDQogICAgICAgIEluaXRpYWxpemVzIHRoZSBoYW5kbGVyIHdpdGggYSBzcGVjaWZpYyBob3N0IGFkZHJlc3MgYW5kIHBvcnQuDQogICAgICAgICIiIg0KICAgICAgICBTb2NrZXRIYW5kbGVyLl9faW5pdF9fKHNlbGYsIGhvc3QsIHBvcnQpDQogICAgICAgIHNlbGYuY2xvc2VPbkVycm9yID0gRmFsc2UNCg0KICAgIGRlZiBtYWtlU29ja2V0KHNlbGYpOg0KICAgICAgICAiIiINCiAgICAgICAgVGhlIGZhY3RvcnkgbWV0aG9kIG9mIFNvY2tldEhhbmRsZXIgaXMgaGVyZSBvdmVycmlkZGVuIHRvIGNyZWF0ZQ0KICAgICAgICBhIFVEUCBzb2NrZXQgKFNPQ0tfREdSQU0pLg0KICAgICAgICAiIiINCiAgICAgICAgcyA9IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX0lORVQsIHNvY2tldC5TT0NLX0RHUkFNKQ0KICAgICAgICByZXR1cm4gcw0KDQogICAgZGVmIHNlbmQoc2VsZiwgcyk6DQogICAgICAgICIiIg0KICAgICAgICBTZW5kIGEgcGlja2xlZCBzdHJpbmcgdG8gYSBzb2NrZXQuDQoNCiAgICAgICAgVGhpcyBmdW5jdGlvbiBubyBsb25nZXIgYWxsb3dzIGZvciBwYXJ0aWFsIHNlbmRzIHdoaWNoIGNhbiBoYXBwZW4NCiAgICAgICAgd2hlbiB0aGUgbmV0d29yayBpcyBidXN5IC0gVURQIGRvZXMgbm90IGd1YXJhbnRlZSBkZWxpdmVyeSBhbmQNCiAgICAgICAgY2FuIGRlbGl2ZXIgcGFja2V0cyBvdXQgb2Ygc2VxdWVuY2UuDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLnNvY2sgaXMgTm9uZToNCiAgICAgICAgICAgIHNlbGYuY3JlYXRlU29ja2V0KCkNCiAgICAgICAgc2VsZi5zb2NrLnNlbmR0byhzLCAoc2VsZi5ob3N0LCBzZWxmLnBvcnQpKQ0KDQpjbGFzcyBTeXNMb2dIYW5kbGVyKGxvZ2dpbmcuSGFuZGxlcik6DQogICAgIiIiDQogICAgQSBoYW5kbGVyIGNsYXNzIHdoaWNoIHNlbmRzIGZvcm1hdHRlZCBsb2dnaW5nIHJlY29yZHMgdG8gYSBzeXNsb2cNCiAgICBzZXJ2ZXIuIEJhc2VkIG9uIFNhbSBSdXNoaW5nJ3Mgc3lzbG9nIG1vZHVsZToNCiAgICBodHRwOi8vd3d3Lm5pZ2h0bWFyZS5jb20vc3F1aXJsL3B5dGhvbi1leHQvbWlzYy9zeXNsb2cucHkNCiAgICBDb250cmlidXRlZCBieSBOaWNvbGFzIFVudHogKGFmdGVyIHdoaWNoIG1pbm9yIHJlZmFjdG9yaW5nIGNoYW5nZXMNCiAgICBoYXZlIGJlZW4gbWFkZSkuDQogICAgIiIiDQoNCiAgICAjIGZyb20gPGxpbnV4L3N5cy9zeXNsb2cuaD46DQogICAgIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgIyBwcmlvcml0aWVzL2ZhY2lsaXRpZXMgYXJlIGVuY29kZWQgaW50byBhIHNpbmdsZSAzMi1iaXQgcXVhbnRpdHksIHdoZXJlDQogICAgIyB0aGUgYm90dG9tIDMgYml0cyBhcmUgdGhlIHByaW9yaXR5ICgwLTcpIGFuZCB0aGUgdG9wIDI4IGJpdHMgYXJlIHRoZQ0KICAgICMgZmFjaWxpdHkgKDAtYmlnIG51bWJlcikuIEJvdGggdGhlIHByaW9yaXRpZXMgYW5kIHRoZSBmYWNpbGl0aWVzIG1hcA0KICAgICMgcm91Z2hseSBvbmUtdG8tb25lIHRvIHN0cmluZ3MgaW4gdGhlIHN5c2xvZ2QoOCkgc291cmNlIGNvZGUuICBUaGlzDQogICAgIyBtYXBwaW5nIGlzIGluY2x1ZGVkIGluIHRoaXMgZmlsZS4NCiAgICAjDQogICAgIyBwcmlvcml0aWVzICh0aGVzZSBhcmUgb3JkZXJlZCkNCg0KICAgIExPR19FTUVSRyAgICAgPSAwICAgICAgICMgIHN5c3RlbSBpcyB1bnVzYWJsZQ0KICAgIExPR19BTEVSVCAgICAgPSAxICAgICAgICMgIGFjdGlvbiBtdXN0IGJlIHRha2VuIGltbWVkaWF0ZWx5DQogICAgTE9HX0NSSVQgICAgICA9IDIgICAgICAgIyAgY3JpdGljYWwgY29uZGl0aW9ucw0KICAgIExPR19FUlIgICAgICAgPSAzICAgICAgICMgIGVycm9yIGNvbmRpdGlvbnMNCiAgICBMT0dfV0FSTklORyAgID0gNCAgICAgICAjICB3YXJuaW5nIGNvbmRpdGlvbnMNCiAgICBMT0dfTk9USUNFICAgID0gNSAgICAgICAjICBub3JtYWwgYnV0IHNpZ25pZmljYW50IGNvbmRpdGlvbg0KICAgIExPR19JTkZPICAgICAgPSA2ICAgICAgICMgIGluZm9ybWF0aW9uYWwNCiAgICBMT0dfREVCVUcgICAgID0gNyAgICAgICAjICBkZWJ1Zy1sZXZlbCBtZXNzYWdlcw0KDQogICAgIyAgZmFjaWxpdHkgY29kZXMNCiAgICBMT0dfS0VSTiAgICAgID0gMCAgICAgICAjICBrZXJuZWwgbWVzc2FnZXMNCiAgICBMT0dfVVNFUiAgICAgID0gMSAgICAgICAjICByYW5kb20gdXNlci1sZXZlbCBtZXNzYWdlcw0KICAgIExPR19NQUlMICAgICAgPSAyICAgICAgICMgIG1haWwgc3lzdGVtDQogICAgTE9HX0RBRU1PTiAgICA9IDMgICAgICAgIyAgc3lzdGVtIGRhZW1vbnMNCiAgICBMT0dfQVVUSCAgICAgID0gNCAgICAgICAjICBzZWN1cml0eS9hdXRob3JpemF0aW9uIG1lc3NhZ2VzDQogICAgTE9HX1NZU0xPRyAgICA9IDUgICAgICAgIyAgbWVzc2FnZXMgZ2VuZXJhdGVkIGludGVybmFsbHkgYnkgc3lzbG9nZA0KICAgIExPR19MUFIgICAgICAgPSA2ICAgICAgICMgIGxpbmUgcHJpbnRlciBzdWJzeXN0ZW0NCiAgICBMT0dfTkVXUyAgICAgID0gNyAgICAgICAjICBuZXR3b3JrIG5ld3Mgc3Vic3lzdGVtDQogICAgTE9HX1VVQ1AgICAgICA9IDggICAgICAgIyAgVVVDUCBzdWJzeXN0ZW0NCiAgICBMT0dfQ1JPTiAgICAgID0gOSAgICAgICAjICBjbG9jayBkYWVtb24NCiAgICBMT0dfQVVUSFBSSVYgID0gMTAgICAgICAjICBzZWN1cml0eS9hdXRob3JpemF0aW9uIG1lc3NhZ2VzIChwcml2YXRlKQ0KICAgIExPR19GVFAgICAgICAgPSAxMSAgICAgICMgIEZUUCBkYWVtb24NCg0KICAgICMgIG90aGVyIGNvZGVzIHRocm91Z2ggMTUgcmVzZXJ2ZWQgZm9yIHN5c3RlbSB1c2UNCiAgICBMT0dfTE9DQUwwICAgID0gMTYgICAgICAjICByZXNlcnZlZCBmb3IgbG9jYWwgdXNlDQogICAgTE9HX0xPQ0FMMSAgICA9IDE3ICAgICAgIyAgcmVzZXJ2ZWQgZm9yIGxvY2FsIHVzZQ0KICAgIExPR19MT0NBTDIgICAgPSAxOCAgICAgICMgIHJlc2VydmVkIGZvciBsb2NhbCB1c2UNCiAgICBMT0dfTE9DQUwzICAgID0gMTkgICAgICAjICByZXNlcnZlZCBmb3IgbG9jYWwgdXNlDQogICAgTE9HX0xPQ0FMNCAgICA9IDIwICAgICAgIyAgcmVzZXJ2ZWQgZm9yIGxvY2FsIHVzZQ0KICAgIExPR19MT0NBTDUgICAgPSAyMSAgICAgICMgIHJlc2VydmVkIGZvciBsb2NhbCB1c2UNCiAgICBMT0dfTE9DQUw2ICAgID0gMjIgICAgICAjICByZXNlcnZlZCBmb3IgbG9jYWwgdXNlDQogICAgTE9HX0xPQ0FMNyAgICA9IDIzICAgICAgIyAgcmVzZXJ2ZWQgZm9yIGxvY2FsIHVzZQ0KDQogICAgcHJpb3JpdHlfbmFtZXMgPSB7DQogICAgICAgICJhbGVydCI6ICAgIExPR19BTEVSVCwNCiAgICAgICAgImNyaXQiOiAgICAgTE9HX0NSSVQsDQogICAgICAgICJjcml0aWNhbCI6IExPR19DUklULA0KICAgICAgICAiZGVidWciOiAgICBMT0dfREVCVUcsDQogICAgICAgICJlbWVyZyI6ICAgIExPR19FTUVSRywNCiAgICAgICAgImVyciI6ICAgICAgTE9HX0VSUiwNCiAgICAgICAgImVycm9yIjogICAgTE9HX0VSUiwgICAgICAgICMgIERFUFJFQ0FURUQNCiAgICAgICAgImluZm8iOiAgICAgTE9HX0lORk8sDQogICAgICAgICJub3RpY2UiOiAgIExPR19OT1RJQ0UsDQogICAgICAgICJwYW5pYyI6ICAgIExPR19FTUVSRywgICAgICAjICBERVBSRUNBVEVEDQogICAgICAgICJ3YXJuIjogICAgIExPR19XQVJOSU5HLCAgICAjICBERVBSRUNBVEVEDQogICAgICAgICJ3YXJuaW5nIjogIExPR19XQVJOSU5HLA0KICAgICAgICB9DQoNCiAgICBmYWNpbGl0eV9uYW1lcyA9IHsNCiAgICAgICAgImF1dGgiOiAgICAgTE9HX0FVVEgsDQogICAgICAgICJhdXRocHJpdiI6IExPR19BVVRIUFJJViwNCiAgICAgICAgImNyb24iOiAgICAgTE9HX0NST04sDQogICAgICAgICJkYWVtb24iOiAgIExPR19EQUVNT04sDQogICAgICAgICJmdHAiOiAgICAgIExPR19GVFAsDQogICAgICAgICJrZXJuIjogICAgIExPR19LRVJOLA0KICAgICAgICAibHByIjogICAgICBMT0dfTFBSLA0KICAgICAgICAibWFpbCI6ICAgICBMT0dfTUFJTCwNCiAgICAgICAgIm5ld3MiOiAgICAgTE9HX05FV1MsDQogICAgICAgICJzZWN1cml0eSI6IExPR19BVVRILCAgICAgICAjICBERVBSRUNBVEVEDQogICAgICAgICJzeXNsb2ciOiAgIExPR19TWVNMT0csDQogICAgICAgICJ1c2VyIjogICAgIExPR19VU0VSLA0KICAgICAgICAidXVjcCI6ICAgICBMT0dfVVVDUCwNCiAgICAgICAgImxvY2FsMCI6ICAgTE9HX0xPQ0FMMCwNCiAgICAgICAgImxvY2FsMSI6ICAgTE9HX0xPQ0FMMSwNCiAgICAgICAgImxvY2FsMiI6ICAgTE9HX0xPQ0FMMiwNCiAgICAgICAgImxvY2FsMyI6ICAgTE9HX0xPQ0FMMywNCiAgICAgICAgImxvY2FsNCI6ICAgTE9HX0xPQ0FMNCwNCiAgICAgICAgImxvY2FsNSI6ICAgTE9HX0xPQ0FMNSwNCiAgICAgICAgImxvY2FsNiI6ICAgTE9HX0xPQ0FMNiwNCiAgICAgICAgImxvY2FsNyI6ICAgTE9HX0xPQ0FMNywNCiAgICAgICAgfQ0KDQogICAgI1RoZSBtYXAgYmVsb3cgYXBwZWFycyB0byBiZSB0cml2aWFsbHkgbG93ZXJjYXNpbmcgdGhlIGtleS4gSG93ZXZlciwNCiAgICAjdGhlcmUncyBtb3JlIHRvIGl0IHRoYW4gbWVldHMgdGhlIGV5ZSAtIGluIHNvbWUgbG9jYWxlcywgbG93ZXJjYXNpbmcNCiAgICAjZ2l2ZXMgdW5leHBlY3RlZCByZXN1bHRzLiBTZWUgU0YgIzE1MjQwODE6IGluIHRoZSBUdXJraXNoIGxvY2FsZSwNCiAgICAjIklORk8iLmxvd2VyKCkgIT0gImluZm8iDQogICAgcHJpb3JpdHlfbWFwID0gew0KICAgICAgICAiREVCVUciIDogImRlYnVnIiwNCiAgICAgICAgIklORk8iIDogImluZm8iLA0KICAgICAgICAiV0FSTklORyIgOiAid2FybmluZyIsDQogICAgICAgICJFUlJPUiIgOiAiZXJyb3IiLA0KICAgICAgICAiQ1JJVElDQUwiIDogImNyaXRpY2FsIg0KICAgIH0NCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhZGRyZXNzPSgnbG9jYWxob3N0JywgU1lTTE9HX1VEUF9QT1JUKSwNCiAgICAgICAgICAgICAgICAgZmFjaWxpdHk9TE9HX1VTRVIsIHNvY2t0eXBlPXNvY2tldC5TT0NLX0RHUkFNKToNCiAgICAgICAgIiIiDQogICAgICAgIEluaXRpYWxpemUgYSBoYW5kbGVyLg0KDQogICAgICAgIElmIGFkZHJlc3MgaXMgc3BlY2lmaWVkIGFzIGEgc3RyaW5nLCBhIFVOSVggc29ja2V0IGlzIHVzZWQuIFRvIGxvZyB0byBhDQogICAgICAgIGxvY2FsIHN5c2xvZ2QsICJTeXNMb2dIYW5kbGVyKGFkZHJlc3M9Ii9kZXYvbG9nIikiIGNhbiBiZSB1c2VkLg0KICAgICAgICBJZiBmYWNpbGl0eSBpcyBub3Qgc3BlY2lmaWVkLCBMT0dfVVNFUiBpcyB1c2VkLg0KICAgICAgICAiIiINCiAgICAgICAgbG9nZ2luZy5IYW5kbGVyLl9faW5pdF9fKHNlbGYpDQoNCiAgICAgICAgc2VsZi5hZGRyZXNzID0gYWRkcmVzcw0KICAgICAgICBzZWxmLmZhY2lsaXR5ID0gZmFjaWxpdHkNCiAgICAgICAgc2VsZi5zb2NrdHlwZSA9IHNvY2t0eXBlDQoNCiAgICAgICAgaWYgaXNpbnN0YW5jZShhZGRyZXNzLCBzdHIpOg0KICAgICAgICAgICAgc2VsZi51bml4c29ja2V0ID0gVHJ1ZQ0KICAgICAgICAgICAgc2VsZi5fY29ubmVjdF91bml4c29ja2V0KGFkZHJlc3MpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLnVuaXhzb2NrZXQgPSBGYWxzZQ0KICAgICAgICAgICAgc2VsZi5zb2NrZXQgPSBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrdHlwZSkNCiAgICAgICAgICAgIGlmIHNvY2t0eXBlID09IHNvY2tldC5TT0NLX1NUUkVBTToNCiAgICAgICAgICAgICAgICBzZWxmLnNvY2tldC5jb25uZWN0KGFkZHJlc3MpDQogICAgICAgIHNlbGYuZm9ybWF0dGVyID0gTm9uZQ0KDQogICAgZGVmIF9jb25uZWN0X3VuaXhzb2NrZXQoc2VsZiwgYWRkcmVzcyk6DQogICAgICAgIHNlbGYuc29ja2V0ID0gc29ja2V0LnNvY2tldChzb2NrZXQuQUZfVU5JWCwgc29ja2V0LlNPQ0tfREdSQU0pDQogICAgICAgICMgc3lzbG9nIG1heSByZXF1aXJlIGVpdGhlciBER1JBTSBvciBTVFJFQU0gc29ja2V0cw0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLnNvY2tldC5jb25uZWN0KGFkZHJlc3MpDQogICAgICAgIGV4Y2VwdCBzb2NrZXQuZXJyb3I6DQogICAgICAgICAgICBzZWxmLnNvY2tldC5jbG9zZSgpDQogICAgICAgICAgICBzZWxmLnNvY2tldCA9IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX1VOSVgsIHNvY2tldC5TT0NLX1NUUkVBTSkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBzZWxmLnNvY2tldC5jb25uZWN0KGFkZHJlc3MpDQogICAgICAgICAgICBleGNlcHQgc29ja2V0LmVycm9yOg0KICAgICAgICAgICAgICAgIHNlbGYuc29ja2V0LmNsb3NlKCkNCiAgICAgICAgICAgICAgICByYWlzZQ0KDQogICAgZGVmIGVuY29kZVByaW9yaXR5KHNlbGYsIGZhY2lsaXR5LCBwcmlvcml0eSk6DQogICAgICAgICIiIg0KICAgICAgICBFbmNvZGUgdGhlIGZhY2lsaXR5IGFuZCBwcmlvcml0eS4gWW91IGNhbiBwYXNzIGluIHN0cmluZ3Mgb3INCiAgICAgICAgaW50ZWdlcnMgLSBpZiBzdHJpbmdzIGFyZSBwYXNzZWQsIHRoZSBmYWNpbGl0eV9uYW1lcyBhbmQNCiAgICAgICAgcHJpb3JpdHlfbmFtZXMgbWFwcGluZyBkaWN0aW9uYXJpZXMgYXJlIHVzZWQgdG8gY29udmVydCB0aGVtIHRvDQogICAgICAgIGludGVnZXJzLg0KICAgICAgICAiIiINCiAgICAgICAgaWYgaXNpbnN0YW5jZShmYWNpbGl0eSwgc3RyKToNCiAgICAgICAgICAgIGZhY2lsaXR5ID0gc2VsZi5mYWNpbGl0eV9uYW1lc1tmYWNpbGl0eV0NCiAgICAgICAgaWYgaXNpbnN0YW5jZShwcmlvcml0eSwgc3RyKToNCiAgICAgICAgICAgIHByaW9yaXR5ID0gc2VsZi5wcmlvcml0eV9uYW1lc1twcmlvcml0eV0NCiAgICAgICAgcmV0dXJuIChmYWNpbGl0eSA8PCAzKSB8IHByaW9yaXR5DQoNCiAgICBkZWYgY2xvc2UgKHNlbGYpOg0KICAgICAgICAiIiINCiAgICAgICAgQ2xvc2VzIHRoZSBzb2NrZXQuDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmFjcXVpcmUoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLnNvY2tldC5jbG9zZSgpDQogICAgICAgICAgICBsb2dnaW5nLkhhbmRsZXIuY2xvc2Uoc2VsZikNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHNlbGYucmVsZWFzZSgpDQoNCiAgICBkZWYgbWFwUHJpb3JpdHkoc2VsZiwgbGV2ZWxOYW1lKToNCiAgICAgICAgIiIiDQogICAgICAgIE1hcCBhIGxvZ2dpbmcgbGV2ZWwgbmFtZSB0byBhIGtleSBpbiB0aGUgcHJpb3JpdHlfbmFtZXMgbWFwLg0KICAgICAgICBUaGlzIGlzIHVzZWZ1bCBpbiB0d28gc2NlbmFyaW9zOiB3aGVuIGN1c3RvbSBsZXZlbHMgYXJlIGJlaW5nDQogICAgICAgIHVzZWQsIGFuZCBpbiB0aGUgY2FzZSB3aGVyZSB5b3UgY2FuJ3QgZG8gYSBzdHJhaWdodGZvcndhcmQNCiAgICAgICAgbWFwcGluZyBieSBsb3dlcmNhc2luZyB0aGUgbG9nZ2luZyBsZXZlbCBuYW1lIGJlY2F1c2Ugb2YgbG9jYWxlLQ0KICAgICAgICBzcGVjaWZpYyBpc3N1ZXMgKHNlZSBTRiAjMTUyNDA4MSkuDQogICAgICAgICIiIg0KICAgICAgICByZXR1cm4gc2VsZi5wcmlvcml0eV9tYXAuZ2V0KGxldmVsTmFtZSwgIndhcm5pbmciKQ0KDQogICAgaWRlbnQgPSAnJyAgICAgICAgICAjIHByZXBlbmRlZCB0byBhbGwgbWVzc2FnZXMNCiAgICBhcHBlbmRfbnVsID0gVHJ1ZSAgICMgc29tZSBvbGQgc3lzbG9nIGRhZW1vbnMgZXhwZWN0IGEgTlVMIHRlcm1pbmF0b3INCg0KICAgIGRlZiBlbWl0KHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBFbWl0IGEgcmVjb3JkLg0KDQogICAgICAgIFRoZSByZWNvcmQgaXMgZm9ybWF0dGVkLCBhbmQgdGhlbiBzZW50IHRvIHRoZSBzeXNsb2cgc2VydmVyLiBJZg0KICAgICAgICBleGNlcHRpb24gaW5mb3JtYXRpb24gaXMgcHJlc2VudCwgaXQgaXMgTk9UIHNlbnQgdG8gdGhlIHNlcnZlci4NCiAgICAgICAgIiIiDQogICAgICAgIG1zZyA9IHNlbGYuZm9ybWF0KHJlY29yZCkNCiAgICAgICAgaWYgc2VsZi5pZGVudDoNCiAgICAgICAgICAgIG1zZyA9IHNlbGYuaWRlbnQgKyBtc2cNCiAgICAgICAgaWYgc2VsZi5hcHBlbmRfbnVsOg0KICAgICAgICAgICAgbXNnICs9ICdcMDAwJw0KICAgICAgICAiIiINCiAgICAgICAgV2UgbmVlZCB0byBjb252ZXJ0IHJlY29yZCBsZXZlbCB0byBsb3dlcmNhc2UsIG1heWJlIHRoaXMgd2lsbA0KICAgICAgICBjaGFuZ2UgaW4gdGhlIGZ1dHVyZS4NCiAgICAgICAgIiIiDQogICAgICAgIHByaW8gPSAnPCVkPicgJSBzZWxmLmVuY29kZVByaW9yaXR5KHNlbGYuZmFjaWxpdHksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWFwUHJpb3JpdHkocmVjb3JkLmxldmVsbmFtZSkpDQogICAgICAgIHByaW8gPSBwcmlvLmVuY29kZSgndXRmLTgnKQ0KICAgICAgICAjIE1lc3NhZ2UgaXMgYSBzdHJpbmcuIENvbnZlcnQgdG8gYnl0ZXMgYXMgcmVxdWlyZWQgYnkgUkZDIDU0MjQNCiAgICAgICAgbXNnID0gbXNnLmVuY29kZSgndXRmLTgnKQ0KICAgICAgICBtc2cgPSBwcmlvICsgbXNnDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGlmIHNlbGYudW5peHNvY2tldDoNCiAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgIHNlbGYuc29ja2V0LnNlbmQobXNnKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCBzb2NrZXQuZXJyb3I6DQogICAgICAgICAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3RfdW5peHNvY2tldChzZWxmLmFkZHJlc3MpDQogICAgICAgICAgICAgICAgICAgIHNlbGYuc29ja2V0LnNlbmQobXNnKQ0KICAgICAgICAgICAgZWxpZiBzZWxmLnNvY2t0eXBlID09IHNvY2tldC5TT0NLX0RHUkFNOg0KICAgICAgICAgICAgICAgIHNlbGYuc29ja2V0LnNlbmR0byhtc2csIHNlbGYuYWRkcmVzcykNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgc2VsZi5zb2NrZXQuc2VuZGFsbChtc2cpDQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIFN5c3RlbUV4aXQpOiAjcHJhZ21hOiBubyBjb3Zlcg0KICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgc2VsZi5oYW5kbGVFcnJvcihyZWNvcmQpDQoNCmNsYXNzIFNNVFBIYW5kbGVyKGxvZ2dpbmcuSGFuZGxlcik6DQogICAgIiIiDQogICAgQSBoYW5kbGVyIGNsYXNzIHdoaWNoIHNlbmRzIGFuIFNNVFAgZW1haWwgZm9yIGVhY2ggbG9nZ2luZyBldmVudC4NCiAgICAiIiINCiAgICBkZWYgX19pbml0X18oc2VsZiwgbWFpbGhvc3QsIGZyb21hZGRyLCB0b2FkZHJzLCBzdWJqZWN0LA0KICAgICAgICAgICAgICAgICBjcmVkZW50aWFscz1Ob25lLCBzZWN1cmU9Tm9uZSwgdGltZW91dD01LjApOg0KICAgICAgICAiIiINCiAgICAgICAgSW5pdGlhbGl6ZSB0aGUgaGFuZGxlci4NCg0KICAgICAgICBJbml0aWFsaXplIHRoZSBpbnN0YW5jZSB3aXRoIHRoZSBmcm9tIGFuZCB0byBhZGRyZXNzZXMgYW5kIHN1YmplY3QNCiAgICAgICAgbGluZSBvZiB0aGUgZW1haWwuIFRvIHNwZWNpZnkgYSBub24tc3RhbmRhcmQgU01UUCBwb3J0LCB1c2UgdGhlDQogICAgICAgIChob3N0LCBwb3J0KSB0dXBsZSBmb3JtYXQgZm9yIHRoZSBtYWlsaG9zdCBhcmd1bWVudC4gVG8gc3BlY2lmeQ0KICAgICAgICBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscywgc3VwcGx5IGEgKHVzZXJuYW1lLCBwYXNzd29yZCkgdHVwbGUNCiAgICAgICAgZm9yIHRoZSBjcmVkZW50aWFscyBhcmd1bWVudC4gVG8gc3BlY2lmeSB0aGUgdXNlIG9mIGEgc2VjdXJlDQogICAgICAgIHByb3RvY29sIChUTFMpLCBwYXNzIGluIGEgdHVwbGUgZm9yIHRoZSBzZWN1cmUgYXJndW1lbnQuIFRoaXMgd2lsbA0KICAgICAgICBvbmx5IGJlIHVzZWQgd2hlbiBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBhcmUgc3VwcGxpZWQuIFRoZSB0dXBsZQ0KICAgICAgICB3aWxsIGJlIGVpdGhlciBhbiBlbXB0eSB0dXBsZSwgb3IgYSBzaW5nbGUtdmFsdWUgdHVwbGUgd2l0aCB0aGUgbmFtZQ0KICAgICAgICBvZiBhIGtleWZpbGUsIG9yIGEgMi12YWx1ZSB0dXBsZSB3aXRoIHRoZSBuYW1lcyBvZiB0aGUga2V5ZmlsZSBhbmQNCiAgICAgICAgY2VydGlmaWNhdGUgZmlsZS4gKFRoaXMgdHVwbGUgaXMgcGFzc2VkIHRvIHRoZSBgc3RhcnR0bHNgIG1ldGhvZCkuDQogICAgICAgIEEgdGltZW91dCBpbiBzZWNvbmRzIGNhbiBiZSBzcGVjaWZpZWQgZm9yIHRoZSBTTVRQIGNvbm5lY3Rpb24gKHRoZQ0KICAgICAgICBkZWZhdWx0IGlzIG9uZSBzZWNvbmQpLg0KICAgICAgICAiIiINCiAgICAgICAgbG9nZ2luZy5IYW5kbGVyLl9faW5pdF9fKHNlbGYpDQogICAgICAgIGlmIGlzaW5zdGFuY2UobWFpbGhvc3QsIHR1cGxlKToNCiAgICAgICAgICAgIHNlbGYubWFpbGhvc3QsIHNlbGYubWFpbHBvcnQgPSBtYWlsaG9zdA0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5tYWlsaG9zdCwgc2VsZi5tYWlscG9ydCA9IG1haWxob3N0LCBOb25lDQogICAgICAgIGlmIGlzaW5zdGFuY2UoY3JlZGVudGlhbHMsIHR1cGxlKToNCiAgICAgICAgICAgIHNlbGYudXNlcm5hbWUsIHNlbGYucGFzc3dvcmQgPSBjcmVkZW50aWFscw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi51c2VybmFtZSA9IE5vbmUNCiAgICAgICAgc2VsZi5mcm9tYWRkciA9IGZyb21hZGRyDQogICAgICAgIGlmIGlzaW5zdGFuY2UodG9hZGRycywgc3RyKToNCiAgICAgICAgICAgIHRvYWRkcnMgPSBbdG9hZGRyc10NCiAgICAgICAgc2VsZi50b2FkZHJzID0gdG9hZGRycw0KICAgICAgICBzZWxmLnN1YmplY3QgPSBzdWJqZWN0DQogICAgICAgIHNlbGYuc2VjdXJlID0gc2VjdXJlDQogICAgICAgIHNlbGYudGltZW91dCA9IHRpbWVvdXQNCg0KICAgIGRlZiBnZXRTdWJqZWN0KHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBEZXRlcm1pbmUgdGhlIHN1YmplY3QgZm9yIHRoZSBlbWFpbC4NCg0KICAgICAgICBJZiB5b3Ugd2FudCB0byBzcGVjaWZ5IGEgc3ViamVjdCBsaW5lIHdoaWNoIGlzIHJlY29yZC1kZXBlbmRlbnQsDQogICAgICAgIG92ZXJyaWRlIHRoaXMgbWV0aG9kLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHNlbGYuc3ViamVjdA0KDQogICAgZGVmIGVtaXQoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIEVtaXQgYSByZWNvcmQuDQoNCiAgICAgICAgRm9ybWF0IHRoZSByZWNvcmQgYW5kIHNlbmQgaXQgdG8gdGhlIHNwZWNpZmllZCBhZGRyZXNzZWVzLg0KICAgICAgICAiIiINCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaW1wb3J0IHNtdHBsaWINCiAgICAgICAgICAgIGZyb20gZW1haWwudXRpbHMgaW1wb3J0IGZvcm1hdGRhdGUNCiAgICAgICAgICAgIHBvcnQgPSBzZWxmLm1haWxwb3J0DQogICAgICAgICAgICBpZiBub3QgcG9ydDoNCiAgICAgICAgICAgICAgICBwb3J0ID0gc210cGxpYi5TTVRQX1BPUlQNCiAgICAgICAgICAgIHNtdHAgPSBzbXRwbGliLlNNVFAoc2VsZi5tYWlsaG9zdCwgcG9ydCwgdGltZW91dD1zZWxmLnRpbWVvdXQpDQogICAgICAgICAgICBtc2cgPSBzZWxmLmZvcm1hdChyZWNvcmQpDQogICAgICAgICAgICBtc2cgPSAiRnJvbTogJXNcclxuVG86ICVzXHJcblN1YmplY3Q6ICVzXHJcbkRhdGU6ICVzXHJcblxyXG4lcyIgJSAoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mcm9tYWRkciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLCIuam9pbihzZWxmLnRvYWRkcnMpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZ2V0U3ViamVjdChyZWNvcmQpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdGRhdGUoKSwgbXNnKQ0KICAgICAgICAgICAgaWYgc2VsZi51c2VybmFtZToNCiAgICAgICAgICAgICAgICBpZiBzZWxmLnNlY3VyZSBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgc210cC5laGxvKCkNCiAgICAgICAgICAgICAgICAgICAgc210cC5zdGFydHRscygqc2VsZi5zZWN1cmUpDQogICAgICAgICAgICAgICAgICAgIHNtdHAuZWhsbygpDQogICAgICAgICAgICAgICAgc210cC5sb2dpbihzZWxmLnVzZXJuYW1lLCBzZWxmLnBhc3N3b3JkKQ0KICAgICAgICAgICAgc210cC5zZW5kbWFpbChzZWxmLmZyb21hZGRyLCBzZWxmLnRvYWRkcnMsIG1zZykNCiAgICAgICAgICAgIHNtdHAucXVpdCgpDQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIFN5c3RlbUV4aXQpOiAjcHJhZ21hOiBubyBjb3Zlcg0KICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgc2VsZi5oYW5kbGVFcnJvcihyZWNvcmQpDQoNCmNsYXNzIE5URXZlbnRMb2dIYW5kbGVyKGxvZ2dpbmcuSGFuZGxlcik6DQogICAgIiIiDQogICAgQSBoYW5kbGVyIGNsYXNzIHdoaWNoIHNlbmRzIGV2ZW50cyB0byB0aGUgTlQgRXZlbnQgTG9nLiBBZGRzIGENCiAgICByZWdpc3RyeSBlbnRyeSBmb3IgdGhlIHNwZWNpZmllZCBhcHBsaWNhdGlvbiBuYW1lLiBJZiBubyBkbGxuYW1lIGlzDQogICAgcHJvdmlkZWQsIHdpbjMyc2VydmljZS5weWQgKHdoaWNoIGNvbnRhaW5zIHNvbWUgYmFzaWMgbWVzc2FnZQ0KICAgIHBsYWNlaG9sZGVycykgaXMgdXNlZC4gTm90ZSB0aGF0IHVzZSBvZiB0aGVzZSBwbGFjZWhvbGRlcnMgd2lsbCBtYWtlDQogICAgeW91ciBldmVudCBsb2dzIGJpZywgYXMgdGhlIGVudGlyZSBtZXNzYWdlIHNvdXJjZSBpcyBoZWxkIGluIHRoZSBsb2cuDQogICAgSWYgeW91IHdhbnQgc2xpbW1lciBsb2dzLCB5b3UgaGF2ZSB0byBwYXNzIGluIHRoZSBuYW1lIG9mIHlvdXIgb3duIERMTA0KICAgIHdoaWNoIGNvbnRhaW5zIHRoZSBtZXNzYWdlIGRlZmluaXRpb25zIHlvdSB3YW50IHRvIHVzZSBpbiB0aGUgZXZlbnQgbG9nLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhcHBuYW1lLCBkbGxuYW1lPU5vbmUsIGxvZ3R5cGU9IkFwcGxpY2F0aW9uIik6DQogICAgICAgIGxvZ2dpbmcuSGFuZGxlci5fX2luaXRfXyhzZWxmKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBpbXBvcnQgd2luMzJldnRsb2d1dGlsLCB3aW4zMmV2dGxvZw0KICAgICAgICAgICAgc2VsZi5hcHBuYW1lID0gYXBwbmFtZQ0KICAgICAgICAgICAgc2VsZi5fd2VsdSA9IHdpbjMyZXZ0bG9ndXRpbA0KICAgICAgICAgICAgaWYgbm90IGRsbG5hbWU6DQogICAgICAgICAgICAgICAgZGxsbmFtZSA9IG9zLnBhdGguc3BsaXQoc2VsZi5fd2VsdS5fX2ZpbGVfXykNCiAgICAgICAgICAgICAgICBkbGxuYW1lID0gb3MucGF0aC5zcGxpdChkbGxuYW1lWzBdKQ0KICAgICAgICAgICAgICAgIGRsbG5hbWUgPSBvcy5wYXRoLmpvaW4oZGxsbmFtZVswXSwgcid3aW4zMnNlcnZpY2UucHlkJykNCiAgICAgICAgICAgIHNlbGYuZGxsbmFtZSA9IGRsbG5hbWUNCiAgICAgICAgICAgIHNlbGYubG9ndHlwZSA9IGxvZ3R5cGUNCiAgICAgICAgICAgIHNlbGYuX3dlbHUuQWRkU291cmNlVG9SZWdpc3RyeShhcHBuYW1lLCBkbGxuYW1lLCBsb2d0eXBlKQ0KICAgICAgICAgICAgc2VsZi5kZWZ0eXBlID0gd2luMzJldnRsb2cuRVZFTlRMT0dfRVJST1JfVFlQRQ0KICAgICAgICAgICAgc2VsZi50eXBlbWFwID0gew0KICAgICAgICAgICAgICAgIGxvZ2dpbmcuREVCVUcgICA6IHdpbjMyZXZ0bG9nLkVWRU5UTE9HX0lORk9STUFUSU9OX1RZUEUsDQogICAgICAgICAgICAgICAgbG9nZ2luZy5JTkZPICAgIDogd2luMzJldnRsb2cuRVZFTlRMT0dfSU5GT1JNQVRJT05fVFlQRSwNCiAgICAgICAgICAgICAgICBsb2dnaW5nLldBUk5JTkcgOiB3aW4zMmV2dGxvZy5FVkVOVExPR19XQVJOSU5HX1RZUEUsDQogICAgICAgICAgICAgICAgbG9nZ2luZy5FUlJPUiAgIDogd2luMzJldnRsb2cuRVZFTlRMT0dfRVJST1JfVFlQRSwNCiAgICAgICAgICAgICAgICBsb2dnaW5nLkNSSVRJQ0FMOiB3aW4zMmV2dGxvZy5FVkVOVExPR19FUlJPUl9UWVBFLA0KICAgICAgICAgfQ0KICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6DQogICAgICAgICAgICBwcmludCgiVGhlIFB5dGhvbiBXaW4zMiBleHRlbnNpb25zIGZvciBOVCAoc2VydmljZSwgZXZlbnQgIlwNCiAgICAgICAgICAgICAgICAgICAgICAgICJsb2dnaW5nKSBhcHBlYXIgbm90IHRvIGJlIGF2YWlsYWJsZS4iKQ0KICAgICAgICAgICAgc2VsZi5fd2VsdSA9IE5vbmUNCg0KICAgIGRlZiBnZXRNZXNzYWdlSUQoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIFJldHVybiB0aGUgbWVzc2FnZSBJRCBmb3IgdGhlIGV2ZW50IHJlY29yZC4gSWYgeW91IGFyZSB1c2luZyB5b3VyDQogICAgICAgIG93biBtZXNzYWdlcywgeW91IGNvdWxkIGRvIHRoaXMgYnkgaGF2aW5nIHRoZSBtc2cgcGFzc2VkIHRvIHRoZQ0KICAgICAgICBsb2dnZXIgYmVpbmcgYW4gSUQgcmF0aGVyIHRoYW4gYSBmb3JtYXR0aW5nIHN0cmluZy4gVGhlbiwgaW4gaGVyZSwNCiAgICAgICAgeW91IGNvdWxkIHVzZSBhIGRpY3Rpb25hcnkgbG9va3VwIHRvIGdldCB0aGUgbWVzc2FnZSBJRC4gVGhpcw0KICAgICAgICB2ZXJzaW9uIHJldHVybnMgMSwgd2hpY2ggaXMgdGhlIGJhc2UgbWVzc2FnZSBJRCBpbiB3aW4zMnNlcnZpY2UucHlkLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIDENCg0KICAgIGRlZiBnZXRFdmVudENhdGVnb3J5KHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBSZXR1cm4gdGhlIGV2ZW50IGNhdGVnb3J5IGZvciB0aGUgcmVjb3JkLg0KDQogICAgICAgIE92ZXJyaWRlIHRoaXMgaWYgeW91IHdhbnQgdG8gc3BlY2lmeSB5b3VyIG93biBjYXRlZ29yaWVzLiBUaGlzIHZlcnNpb24NCiAgICAgICAgcmV0dXJucyAwLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIDANCg0KICAgIGRlZiBnZXRFdmVudFR5cGUoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIFJldHVybiB0aGUgZXZlbnQgdHlwZSBmb3IgdGhlIHJlY29yZC4NCg0KICAgICAgICBPdmVycmlkZSB0aGlzIGlmIHlvdSB3YW50IHRvIHNwZWNpZnkgeW91ciBvd24gdHlwZXMuIFRoaXMgdmVyc2lvbiBkb2VzDQogICAgICAgIGEgbWFwcGluZyB1c2luZyB0aGUgaGFuZGxlcidzIHR5cGVtYXAgYXR0cmlidXRlLCB3aGljaCBpcyBzZXQgdXAgaW4NCiAgICAgICAgX19pbml0X18oKSB0byBhIGRpY3Rpb25hcnkgd2hpY2ggY29udGFpbnMgbWFwcGluZ3MgZm9yIERFQlVHLCBJTkZPLA0KICAgICAgICBXQVJOSU5HLCBFUlJPUiBhbmQgQ1JJVElDQUwuIElmIHlvdSBhcmUgdXNpbmcgeW91ciBvd24gbGV2ZWxzIHlvdSB3aWxsDQogICAgICAgIGVpdGhlciBuZWVkIHRvIG92ZXJyaWRlIHRoaXMgbWV0aG9kIG9yIHBsYWNlIGEgc3VpdGFibGUgZGljdGlvbmFyeSBpbg0KICAgICAgICB0aGUgaGFuZGxlcidzIHR5cGVtYXAgYXR0cmlidXRlLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHNlbGYudHlwZW1hcC5nZXQocmVjb3JkLmxldmVsbm8sIHNlbGYuZGVmdHlwZSkNCg0KICAgIGRlZiBlbWl0KHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBFbWl0IGEgcmVjb3JkLg0KDQogICAgICAgIERldGVybWluZSB0aGUgbWVzc2FnZSBJRCwgZXZlbnQgY2F0ZWdvcnkgYW5kIGV2ZW50IHR5cGUuIFRoZW4NCiAgICAgICAgbG9nIHRoZSBtZXNzYWdlIGluIHRoZSBOVCBldmVudCBsb2cuDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLl93ZWx1Og0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGlkID0gc2VsZi5nZXRNZXNzYWdlSUQocmVjb3JkKQ0KICAgICAgICAgICAgICAgIGNhdCA9IHNlbGYuZ2V0RXZlbnRDYXRlZ29yeShyZWNvcmQpDQogICAgICAgICAgICAgICAgdHlwZSA9IHNlbGYuZ2V0RXZlbnRUeXBlKHJlY29yZCkNCiAgICAgICAgICAgICAgICBtc2cgPSBzZWxmLmZvcm1hdChyZWNvcmQpDQogICAgICAgICAgICAgICAgc2VsZi5fd2VsdS5SZXBvcnRFdmVudChzZWxmLmFwcG5hbWUsIGlkLCBjYXQsIHR5cGUsIFttc2ddKQ0KICAgICAgICAgICAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCwgU3lzdGVtRXhpdCk6ICNwcmFnbWE6IG5vIGNvdmVyDQogICAgICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZUVycm9yKHJlY29yZCkNCg0KICAgIGRlZiBjbG9zZShzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIENsZWFuIHVwIHRoaXMgaGFuZGxlci4NCg0KICAgICAgICBZb3UgY2FuIHJlbW92ZSB0aGUgYXBwbGljYXRpb24gbmFtZSBmcm9tIHRoZSByZWdpc3RyeSBhcyBhDQogICAgICAgIHNvdXJjZSBvZiBldmVudCBsb2cgZW50cmllcy4gSG93ZXZlciwgaWYgeW91IGRvIHRoaXMsIHlvdSB3aWxsDQogICAgICAgIG5vdCBiZSBhYmxlIHRvIHNlZSB0aGUgZXZlbnRzIGFzIHlvdSBpbnRlbmRlZCBpbiB0aGUgRXZlbnQgTG9nDQogICAgICAgIFZpZXdlciAtIGl0IG5lZWRzIHRvIGJlIGFibGUgdG8gYWNjZXNzIHRoZSByZWdpc3RyeSB0byBnZXQgdGhlDQogICAgICAgIERMTCBuYW1lLg0KICAgICAgICAiIiINCiAgICAgICAgI3NlbGYuX3dlbHUuUmVtb3ZlU291cmNlRnJvbVJlZ2lzdHJ5KHNlbGYuYXBwbmFtZSwgc2VsZi5sb2d0eXBlKQ0KICAgICAgICBsb2dnaW5nLkhhbmRsZXIuY2xvc2Uoc2VsZikNCg0KY2xhc3MgSFRUUEhhbmRsZXIobG9nZ2luZy5IYW5kbGVyKToNCiAgICAiIiINCiAgICBBIGNsYXNzIHdoaWNoIHNlbmRzIHJlY29yZHMgdG8gYSBXZWIgc2VydmVyLCB1c2luZyBlaXRoZXIgR0VUIG9yDQogICAgUE9TVCBzZW1hbnRpY3MuDQogICAgIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhvc3QsIHVybCwgbWV0aG9kPSJHRVQiLCBzZWN1cmU9RmFsc2UsIGNyZWRlbnRpYWxzPU5vbmUpOg0KICAgICAgICAiIiINCiAgICAgICAgSW5pdGlhbGl6ZSB0aGUgaW5zdGFuY2Ugd2l0aCB0aGUgaG9zdCwgdGhlIHJlcXVlc3QgVVJMLCBhbmQgdGhlIG1ldGhvZA0KICAgICAgICAoIkdFVCIgb3IgIlBPU1QiKQ0KICAgICAgICAiIiINCiAgICAgICAgbG9nZ2luZy5IYW5kbGVyLl9faW5pdF9fKHNlbGYpDQogICAgICAgIG1ldGhvZCA9IG1ldGhvZC51cHBlcigpDQogICAgICAgIGlmIG1ldGhvZCBub3QgaW4gWyJHRVQiLCAiUE9TVCJdOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibWV0aG9kIG11c3QgYmUgR0VUIG9yIFBPU1QiKQ0KICAgICAgICBzZWxmLmhvc3QgPSBob3N0DQogICAgICAgIHNlbGYudXJsID0gdXJsDQogICAgICAgIHNlbGYubWV0aG9kID0gbWV0aG9kDQogICAgICAgIHNlbGYuc2VjdXJlID0gc2VjdXJlDQogICAgICAgIHNlbGYuY3JlZGVudGlhbHMgPSBjcmVkZW50aWFscw0KDQogICAgZGVmIG1hcExvZ1JlY29yZChzZWxmLCByZWNvcmQpOg0KICAgICAgICAiIiINCiAgICAgICAgRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBtYXBwaW5nIHRoZSBsb2cgcmVjb3JkIGludG8gYSBkaWN0DQogICAgICAgIHRoYXQgaXMgc2VudCBhcyB0aGUgQ0dJIGRhdGEuIE92ZXJ3cml0ZSBpbiB5b3VyIGNsYXNzLg0KICAgICAgICBDb250cmlidXRlZCBieSBGcmFueiBHbGFzbmVyLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHJlY29yZC5fX2RpY3RfXw0KDQogICAgZGVmIGVtaXQoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIEVtaXQgYSByZWNvcmQuDQoNCiAgICAgICAgU2VuZCB0aGUgcmVjb3JkIHRvIHRoZSBXZWIgc2VydmVyIGFzIGEgcGVyY2VudC1lbmNvZGVkIGRpY3Rpb25hcnkNCiAgICAgICAgIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGltcG9ydCBodHRwLmNsaWVudCwgdXJsbGliLnBhcnNlDQogICAgICAgICAgICBob3N0ID0gc2VsZi5ob3N0DQogICAgICAgICAgICBpZiBzZWxmLnNlY3VyZToNCiAgICAgICAgICAgICAgICBoID0gaHR0cC5jbGllbnQuSFRUUFNDb25uZWN0aW9uKGhvc3QpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGggPSBodHRwLmNsaWVudC5IVFRQQ29ubmVjdGlvbihob3N0KQ0KICAgICAgICAgICAgdXJsID0gc2VsZi51cmwNCiAgICAgICAgICAgIGRhdGEgPSB1cmxsaWIucGFyc2UudXJsZW5jb2RlKHNlbGYubWFwTG9nUmVjb3JkKHJlY29yZCkpDQogICAgICAgICAgICBpZiBzZWxmLm1ldGhvZCA9PSAiR0VUIjoNCiAgICAgICAgICAgICAgICBpZiAodXJsLmZpbmQoJz8nKSA+PSAwKToNCiAgICAgICAgICAgICAgICAgICAgc2VwID0gJyYnDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgc2VwID0gJz8nDQogICAgICAgICAgICAgICAgdXJsID0gdXJsICsgIiVjJXMiICUgKHNlcCwgZGF0YSkNCiAgICAgICAgICAgIGgucHV0cmVxdWVzdChzZWxmLm1ldGhvZCwgdXJsKQ0KICAgICAgICAgICAgIyBzdXBwb3J0IG11bHRpcGxlIGhvc3RzIG9uIG9uZSBJUCBhZGRyZXNzLi4uDQogICAgICAgICAgICAjIG5lZWQgdG8gc3RyaXAgb3B0aW9uYWwgOnBvcnQgZnJvbSBob3N0LCBpZiBwcmVzZW50DQogICAgICAgICAgICBpID0gaG9zdC5maW5kKCI6IikNCiAgICAgICAgICAgIGlmIGkgPj0gMDoNCiAgICAgICAgICAgICAgICBob3N0ID0gaG9zdFs6aV0NCiAgICAgICAgICAgIGgucHV0aGVhZGVyKCJIb3N0IiwgaG9zdCkNCiAgICAgICAgICAgIGlmIHNlbGYubWV0aG9kID09ICJQT1NUIjoNCiAgICAgICAgICAgICAgICBoLnB1dGhlYWRlcigiQ29udGVudC10eXBlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikNCiAgICAgICAgICAgICAgICBoLnB1dGhlYWRlcigiQ29udGVudC1sZW5ndGgiLCBzdHIobGVuKGRhdGEpKSkNCiAgICAgICAgICAgIGlmIHNlbGYuY3JlZGVudGlhbHM6DQogICAgICAgICAgICAgICAgaW1wb3J0IGJhc2U2NA0KICAgICAgICAgICAgICAgIHMgPSAoJ3UlczolcycgJSBzZWxmLmNyZWRlbnRpYWxzKS5lbmNvZGUoJ3V0Zi04JykNCiAgICAgICAgICAgICAgICBzID0gJ0Jhc2ljICcgKyBiYXNlNjQuYjY0ZW5jb2RlKHMpLnN0cmlwKCkNCiAgICAgICAgICAgICAgICBoLnB1dGhlYWRlcignQXV0aG9yaXphdGlvbicsIHMpDQogICAgICAgICAgICBoLmVuZGhlYWRlcnMoKQ0KICAgICAgICAgICAgaWYgc2VsZi5tZXRob2QgPT0gIlBPU1QiOg0KICAgICAgICAgICAgICAgIGguc2VuZChkYXRhLmVuY29kZSgndXRmLTgnKSkNCiAgICAgICAgICAgIGguZ2V0cmVzcG9uc2UoKSAgICAjY2FuJ3QgZG8gYW55dGhpbmcgd2l0aCB0aGUgcmVzdWx0DQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIFN5c3RlbUV4aXQpOiAjcHJhZ21hOiBubyBjb3Zlcg0KICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgc2VsZi5oYW5kbGVFcnJvcihyZWNvcmQpDQoNCmNsYXNzIEJ1ZmZlcmluZ0hhbmRsZXIobG9nZ2luZy5IYW5kbGVyKToNCiAgICAiIiINCiAgQSBoYW5kbGVyIGNsYXNzIHdoaWNoIGJ1ZmZlcnMgbG9nZ2luZyByZWNvcmRzIGluIG1lbW9yeS4gV2hlbmV2ZXIgZWFjaA0KICByZWNvcmQgaXMgYWRkZWQgdG8gdGhlIGJ1ZmZlciwgYSBjaGVjayBpcyBtYWRlIHRvIHNlZSBpZiB0aGUgYnVmZmVyIHNob3VsZA0KICBiZSBmbHVzaGVkLiBJZiBpdCBzaG91bGQsIHRoZW4gZmx1c2goKSBpcyBleHBlY3RlZCB0byBkbyB3aGF0J3MgbmVlZGVkLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjYXBhY2l0eSk6DQogICAgICAgICIiIg0KICAgICAgICBJbml0aWFsaXplIHRoZSBoYW5kbGVyIHdpdGggdGhlIGJ1ZmZlciBzaXplLg0KICAgICAgICAiIiINCiAgICAgICAgbG9nZ2luZy5IYW5kbGVyLl9faW5pdF9fKHNlbGYpDQogICAgICAgIHNlbGYuY2FwYWNpdHkgPSBjYXBhY2l0eQ0KICAgICAgICBzZWxmLmJ1ZmZlciA9IFtdDQoNCiAgICBkZWYgc2hvdWxkRmx1c2goc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIFNob3VsZCB0aGUgaGFuZGxlciBmbHVzaCBpdHMgYnVmZmVyPw0KDQogICAgICAgIFJldHVybnMgdHJ1ZSBpZiB0aGUgYnVmZmVyIGlzIHVwIHRvIGNhcGFjaXR5LiBUaGlzIG1ldGhvZCBjYW4gYmUNCiAgICAgICAgb3ZlcnJpZGRlbiB0byBpbXBsZW1lbnQgY3VzdG9tIGZsdXNoaW5nIHN0cmF0ZWdpZXMuDQogICAgICAgICIiIg0KICAgICAgICByZXR1cm4gKGxlbihzZWxmLmJ1ZmZlcikgPj0gc2VsZi5jYXBhY2l0eSkNCg0KICAgIGRlZiBlbWl0KHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBFbWl0IGEgcmVjb3JkLg0KDQogICAgICAgIEFwcGVuZCB0aGUgcmVjb3JkLiBJZiBzaG91bGRGbHVzaCgpIHRlbGxzIHVzIHRvLCBjYWxsIGZsdXNoKCkgdG8gcHJvY2Vzcw0KICAgICAgICB0aGUgYnVmZmVyLg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5idWZmZXIuYXBwZW5kKHJlY29yZCkNCiAgICAgICAgaWYgc2VsZi5zaG91bGRGbHVzaChyZWNvcmQpOg0KICAgICAgICAgICAgc2VsZi5mbHVzaCgpDQoNCiAgICBkZWYgZmx1c2goc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBPdmVycmlkZSB0byBpbXBsZW1lbnQgY3VzdG9tIGZsdXNoaW5nIGJlaGF2aW91ci4NCg0KICAgICAgICBUaGlzIHZlcnNpb24ganVzdCB6YXBzIHRoZSBidWZmZXIgdG8gZW1wdHkuDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmFjcXVpcmUoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmJ1ZmZlciA9IFtdDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBzZWxmLnJlbGVhc2UoKQ0KDQogICAgZGVmIGNsb3NlKHNlbGYpOg0KICAgICAgICAiIiINCiAgICAgICAgQ2xvc2UgdGhlIGhhbmRsZXIuDQoNCiAgICAgICAgVGhpcyB2ZXJzaW9uIGp1c3QgZmx1c2hlcyBhbmQgY2hhaW5zIHRvIHRoZSBwYXJlbnQgY2xhc3MnIGNsb3NlKCkuDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmZsdXNoKCkNCiAgICAgICAgbG9nZ2luZy5IYW5kbGVyLmNsb3NlKHNlbGYpDQoNCmNsYXNzIE1lbW9yeUhhbmRsZXIoQnVmZmVyaW5nSGFuZGxlcik6DQogICAgIiIiDQogICAgQSBoYW5kbGVyIGNsYXNzIHdoaWNoIGJ1ZmZlcnMgbG9nZ2luZyByZWNvcmRzIGluIG1lbW9yeSwgcGVyaW9kaWNhbGx5DQogICAgZmx1c2hpbmcgdGhlbSB0byBhIHRhcmdldCBoYW5kbGVyLiBGbHVzaGluZyBvY2N1cnMgd2hlbmV2ZXIgdGhlIGJ1ZmZlcg0KICAgIGlzIGZ1bGwsIG9yIHdoZW4gYW4gZXZlbnQgb2YgYSBjZXJ0YWluIHNldmVyaXR5IG9yIGdyZWF0ZXIgaXMgc2Vlbi4NCiAgICAiIiINCiAgICBkZWYgX19pbml0X18oc2VsZiwgY2FwYWNpdHksIGZsdXNoTGV2ZWw9bG9nZ2luZy5FUlJPUiwgdGFyZ2V0PU5vbmUpOg0KICAgICAgICAiIiINCiAgICAgICAgSW5pdGlhbGl6ZSB0aGUgaGFuZGxlciB3aXRoIHRoZSBidWZmZXIgc2l6ZSwgdGhlIGxldmVsIGF0IHdoaWNoDQogICAgICAgIGZsdXNoaW5nIHNob3VsZCBvY2N1ciBhbmQgYW4gb3B0aW9uYWwgdGFyZ2V0Lg0KDQogICAgICAgIE5vdGUgdGhhdCB3aXRob3V0IGEgdGFyZ2V0IGJlaW5nIHNldCBlaXRoZXIgaGVyZSBvciB2aWEgc2V0VGFyZ2V0KCksDQogICAgICAgIGEgTWVtb3J5SGFuZGxlciBpcyBubyB1c2UgdG8gYW55b25lIQ0KICAgICAgICAiIiINCiAgICAgICAgQnVmZmVyaW5nSGFuZGxlci5fX2luaXRfXyhzZWxmLCBjYXBhY2l0eSkNCiAgICAgICAgc2VsZi5mbHVzaExldmVsID0gZmx1c2hMZXZlbA0KICAgICAgICBzZWxmLnRhcmdldCA9IHRhcmdldA0KDQogICAgZGVmIHNob3VsZEZsdXNoKHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBDaGVjayBmb3IgYnVmZmVyIGZ1bGwgb3IgYSByZWNvcmQgYXQgdGhlIGZsdXNoTGV2ZWwgb3IgaGlnaGVyLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIChsZW4oc2VsZi5idWZmZXIpID49IHNlbGYuY2FwYWNpdHkpIG9yIFwNCiAgICAgICAgICAgICAgICAocmVjb3JkLmxldmVsbm8gPj0gc2VsZi5mbHVzaExldmVsKQ0KDQogICAgZGVmIHNldFRhcmdldChzZWxmLCB0YXJnZXQpOg0KICAgICAgICAiIiINCiAgICAgICAgU2V0IHRoZSB0YXJnZXQgaGFuZGxlciBmb3IgdGhpcyBoYW5kbGVyLg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi50YXJnZXQgPSB0YXJnZXQNCg0KICAgIGRlZiBmbHVzaChzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIEZvciBhIE1lbW9yeUhhbmRsZXIsIGZsdXNoaW5nIG1lYW5zIGp1c3Qgc2VuZGluZyB0aGUgYnVmZmVyZWQNCiAgICAgICAgcmVjb3JkcyB0byB0aGUgdGFyZ2V0LCBpZiB0aGVyZSBpcyBvbmUuIE92ZXJyaWRlIGlmIHlvdSB3YW50DQogICAgICAgIGRpZmZlcmVudCBiZWhhdmlvdXIuDQoNCiAgICAgICAgVGhlIHJlY29yZCBidWZmZXIgaXMgYWxzbyBjbGVhcmVkIGJ5IHRoaXMgb3BlcmF0aW9uLg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5hY3F1aXJlKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWYgc2VsZi50YXJnZXQ6DQogICAgICAgICAgICAgICAgZm9yIHJlY29yZCBpbiBzZWxmLmJ1ZmZlcjoNCiAgICAgICAgICAgICAgICAgICAgc2VsZi50YXJnZXQuaGFuZGxlKHJlY29yZCkNCiAgICAgICAgICAgICAgICBzZWxmLmJ1ZmZlciA9IFtdDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBzZWxmLnJlbGVhc2UoKQ0KDQogICAgZGVmIGNsb3NlKHNlbGYpOg0KICAgICAgICAiIiINCiAgICAgICAgRmx1c2gsIHNldCB0aGUgdGFyZ2V0IHRvIE5vbmUgYW5kIGxvc2UgdGhlIGJ1ZmZlci4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuZmx1c2goKQ0KICAgICAgICBzZWxmLmFjcXVpcmUoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLnRhcmdldCA9IE5vbmUNCiAgICAgICAgICAgIEJ1ZmZlcmluZ0hhbmRsZXIuY2xvc2Uoc2VsZikNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHNlbGYucmVsZWFzZSgpDQoNCg0KY2xhc3MgUXVldWVIYW5kbGVyKGxvZ2dpbmcuSGFuZGxlcik6DQogICAgIiIiDQogICAgVGhpcyBoYW5kbGVyIHNlbmRzIGV2ZW50cyB0byBhIHF1ZXVlLiBUeXBpY2FsbHksIGl0IHdvdWxkIGJlIHVzZWQgdG9nZXRoZXINCiAgICB3aXRoIGEgbXVsdGlwcm9jZXNzaW5nIFF1ZXVlIHRvIGNlbnRyYWxpc2UgbG9nZ2luZyB0byBmaWxlIGluIG9uZSBwcm9jZXNzDQogICAgKGluIGEgbXVsdGktcHJvY2VzcyBhcHBsaWNhdGlvbiksIHNvIGFzIHRvIGF2b2lkIGZpbGUgd3JpdGUgY29udGVudGlvbg0KICAgIGJldHdlZW4gcHJvY2Vzc2VzLg0KDQogICAgVGhpcyBjb2RlIGlzIG5ldyBpbiBQeXRob24gMy4yLCBidXQgdGhpcyBjbGFzcyBjYW4gYmUgY29weSBwYXN0ZWQgaW50bw0KICAgIHVzZXIgY29kZSBmb3IgdXNlIHdpdGggZWFybGllciBQeXRob24gdmVyc2lvbnMuDQogICAgIiIiDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgcXVldWUpOg0KICAgICAgICAiIiINCiAgICAgICAgSW5pdGlhbGlzZSBhbiBpbnN0YW5jZSwgdXNpbmcgdGhlIHBhc3NlZCBxdWV1ZS4NCiAgICAgICAgIiIiDQogICAgICAgIGxvZ2dpbmcuSGFuZGxlci5fX2luaXRfXyhzZWxmKQ0KICAgICAgICBzZWxmLnF1ZXVlID0gcXVldWUNCg0KICAgIGRlZiBlbnF1ZXVlKHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBFbnF1ZXVlIGEgcmVjb3JkLg0KDQogICAgICAgIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIHVzZXMgcHV0X25vd2FpdC4gWW91IG1heSB3YW50IHRvIG92ZXJyaWRlDQogICAgICAgIHRoaXMgbWV0aG9kIGlmIHlvdSB3YW50IHRvIHVzZSBibG9ja2luZywgdGltZW91dHMgb3IgY3VzdG9tIHF1ZXVlDQogICAgICAgIGltcGxlbWVudGF0aW9ucy4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYucXVldWUucHV0X25vd2FpdChyZWNvcmQpDQoNCiAgICBkZWYgcHJlcGFyZShzZWxmLCByZWNvcmQpOg0KICAgICAgICAiIiINCiAgICAgICAgUHJlcGFyZXMgYSByZWNvcmQgZm9yIHF1ZXVpbmcuIFRoZSBvYmplY3QgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2QgaXMNCiAgICAgICAgZW5xdWV1ZWQuDQoNCiAgICAgICAgVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gZm9ybWF0cyB0aGUgcmVjb3JkIHRvIG1lcmdlIHRoZSBtZXNzYWdlDQogICAgICAgIGFuZCBhcmd1bWVudHMsIGFuZCByZW1vdmVzIHVucGlja2xlYWJsZSBpdGVtcyBmcm9tIHRoZSByZWNvcmQNCiAgICAgICAgaW4tcGxhY2UuDQoNCiAgICAgICAgWW91IG1pZ2h0IHdhbnQgdG8gb3ZlcnJpZGUgdGhpcyBtZXRob2QgaWYgeW91IHdhbnQgdG8gY29udmVydA0KICAgICAgICB0aGUgcmVjb3JkIHRvIGEgZGljdCBvciBKU09OIHN0cmluZywgb3Igc2VuZCBhIG1vZGlmaWVkIGNvcHkNCiAgICAgICAgb2YgdGhlIHJlY29yZCB3aGlsZSBsZWF2aW5nIHRoZSBvcmlnaW5hbCBpbnRhY3QuDQogICAgICAgICIiIg0KICAgICAgICAjIFRoZSBmb3JtYXQgb3BlcmF0aW9uIGdldHMgdHJhY2ViYWNrIHRleHQgaW50byByZWNvcmQuZXhjX3RleHQNCiAgICAgICAgIyAoaWYgdGhlcmUncyBleGNlcHRpb24gZGF0YSksIGFuZCBhbHNvIHB1dHMgdGhlIG1lc3NhZ2UgaW50bw0KICAgICAgICAjIHJlY29yZC5tZXNzYWdlLiBXZSBjYW4gdGhlbiB1c2UgdGhpcyB0byByZXBsYWNlIHRoZSBvcmlnaW5hbA0KICAgICAgICAjIG1zZyArIGFyZ3MsIGFzIHRoZXNlIG1pZ2h0IGJlIHVucGlja2xlYWJsZS4gV2UgYWxzbyB6YXAgdGhlDQogICAgICAgICMgZXhjX2luZm8gYXR0cmlidXRlLCBhcyBpdCdzIG5vIGxvbmdlciBuZWVkZWQgYW5kLCBpZiBub3QgTm9uZSwNCiAgICAgICAgIyB3aWxsIHR5cGljYWxseSBub3QgYmUgcGlja2xlYWJsZS4NCiAgICAgICAgc2VsZi5mb3JtYXQocmVjb3JkKQ0KICAgICAgICByZWNvcmQubXNnID0gcmVjb3JkLm1lc3NhZ2UNCiAgICAgICAgcmVjb3JkLmFyZ3MgPSBOb25lDQogICAgICAgIHJlY29yZC5leGNfaW5mbyA9IE5vbmUNCiAgICAgICAgcmV0dXJuIHJlY29yZA0KDQogICAgZGVmIGVtaXQoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIEVtaXQgYSByZWNvcmQuDQoNCiAgICAgICAgV3JpdGVzIHRoZSBMb2dSZWNvcmQgdG8gdGhlIHF1ZXVlLCBwcmVwYXJpbmcgaXQgZm9yIHBpY2tsaW5nIGZpcnN0Lg0KICAgICAgICAiIiINCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5lbnF1ZXVlKHNlbGYucHJlcGFyZShyZWNvcmQpKQ0KICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LCBTeXN0ZW1FeGl0KTogI3ByYWdtYTogbm8gY292ZXINCiAgICAgICAgICAgIHJhaXNlDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHNlbGYuaGFuZGxlRXJyb3IocmVjb3JkKQ0KDQppZiB0aHJlYWRpbmc6DQogICAgY2xhc3MgUXVldWVMaXN0ZW5lcihvYmplY3QpOg0KICAgICAgICAiIiINCiAgICAgICAgVGhpcyBjbGFzcyBpbXBsZW1lbnRzIGFuIGludGVybmFsIHRocmVhZGVkIGxpc3RlbmVyIHdoaWNoIHdhdGNoZXMgZm9yDQogICAgICAgIExvZ1JlY29yZHMgYmVpbmcgYWRkZWQgdG8gYSBxdWV1ZSwgcmVtb3ZlcyB0aGVtIGFuZCBwYXNzZXMgdGhlbSB0byBhDQogICAgICAgIGxpc3Qgb2YgaGFuZGxlcnMgZm9yIHByb2Nlc3NpbmcuDQogICAgICAgICIiIg0KICAgICAgICBfc2VudGluZWwgPSBOb25lDQoNCiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIHF1ZXVlLCAqaGFuZGxlcnMpOg0KICAgICAgICAgICAgIiIiDQogICAgICAgICAgICBJbml0aWFsaXNlIGFuIGluc3RhbmNlIHdpdGggdGhlIHNwZWNpZmllZCBxdWV1ZSBhbmQNCiAgICAgICAgICAgIGhhbmRsZXJzLg0KICAgICAgICAgICAgIiIiDQogICAgICAgICAgICBzZWxmLnF1ZXVlID0gcXVldWUNCiAgICAgICAgICAgIHNlbGYuaGFuZGxlcnMgPSBoYW5kbGVycw0KICAgICAgICAgICAgc2VsZi5fc3RvcCA9IHRocmVhZGluZy5FdmVudCgpDQogICAgICAgICAgICBzZWxmLl90aHJlYWQgPSBOb25lDQoNCiAgICAgICAgZGVmIGRlcXVldWUoc2VsZiwgYmxvY2spOg0KICAgICAgICAgICAgIiIiDQogICAgICAgICAgICBEZXF1ZXVlIGEgcmVjb3JkIGFuZCByZXR1cm4gaXQsIG9wdGlvbmFsbHkgYmxvY2tpbmcuDQoNCiAgICAgICAgICAgIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIHVzZXMgZ2V0LiBZb3UgbWF5IHdhbnQgdG8gb3ZlcnJpZGUgdGhpcyBtZXRob2QNCiAgICAgICAgICAgIGlmIHlvdSB3YW50IHRvIHVzZSB0aW1lb3V0cyBvciB3b3JrIHdpdGggY3VzdG9tIHF1ZXVlIGltcGxlbWVudGF0aW9ucy4NCiAgICAgICAgICAgICIiIg0KICAgICAgICAgICAgcmV0dXJuIHNlbGYucXVldWUuZ2V0KGJsb2NrKQ0KDQogICAgICAgIGRlZiBzdGFydChzZWxmKToNCiAgICAgICAgICAgICIiIg0KICAgICAgICAgICAgU3RhcnQgdGhlIGxpc3RlbmVyLg0KDQogICAgICAgICAgICBUaGlzIHN0YXJ0cyB1cCBhIGJhY2tncm91bmQgdGhyZWFkIHRvIG1vbml0b3IgdGhlIHF1ZXVlIGZvcg0KICAgICAgICAgICAgTG9nUmVjb3JkcyB0byBwcm9jZXNzLg0KICAgICAgICAgICAgIiIiDQogICAgICAgICAgICBzZWxmLl90aHJlYWQgPSB0ID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2VsZi5fbW9uaXRvcikNCiAgICAgICAgICAgIHQuc2V0RGFlbW9uKFRydWUpDQogICAgICAgICAgICB0LnN0YXJ0KCkNCg0KICAgICAgICBkZWYgcHJlcGFyZShzZWxmICwgcmVjb3JkKToNCiAgICAgICAgICAgICIiIg0KICAgICAgICAgICAgUHJlcGFyZSBhIHJlY29yZCBmb3IgaGFuZGxpbmcuDQoNCiAgICAgICAgICAgIFRoaXMgbWV0aG9kIGp1c3QgcmV0dXJucyB0aGUgcGFzc2VkLWluIHJlY29yZC4gWW91IG1heSB3YW50IHRvDQogICAgICAgICAgICBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB5b3UgbmVlZCB0byBkbyBhbnkgY3VzdG9tIG1hcnNoYWxsaW5nIG9yDQogICAgICAgICAgICBtYW5pcHVsYXRpb24gb2YgdGhlIHJlY29yZCBiZWZvcmUgcGFzc2luZyBpdCB0byB0aGUgaGFuZGxlcnMuDQogICAgICAgICAgICAiIiINCiAgICAgICAgICAgIHJldHVybiByZWNvcmQNCg0KICAgICAgICBkZWYgaGFuZGxlKHNlbGYsIHJlY29yZCk6DQogICAgICAgICAgICAiIiINCiAgICAgICAgICAgIEhhbmRsZSBhIHJlY29yZC4NCg0KICAgICAgICAgICAgVGhpcyBqdXN0IGxvb3BzIHRocm91Z2ggdGhlIGhhbmRsZXJzIG9mZmVyaW5nIHRoZW0gdGhlIHJlY29yZA0KICAgICAgICAgICAgdG8gaGFuZGxlLg0KICAgICAgICAgICAgIiIiDQogICAgICAgICAgICByZWNvcmQgPSBzZWxmLnByZXBhcmUocmVjb3JkKQ0KICAgICAgICAgICAgZm9yIGhhbmRsZXIgaW4gc2VsZi5oYW5kbGVyczoNCiAgICAgICAgICAgICAgICBoYW5kbGVyLmhhbmRsZShyZWNvcmQpDQoNCiAgICAgICAgZGVmIF9tb25pdG9yKHNlbGYpOg0KICAgICAgICAgICAgIiIiDQogICAgICAgICAgICBNb25pdG9yIHRoZSBxdWV1ZSBmb3IgcmVjb3JkcywgYW5kIGFzayB0aGUgaGFuZGxlcg0KICAgICAgICAgICAgdG8gZGVhbCB3aXRoIHRoZW0uDQoNCiAgICAgICAgICAgIFRoaXMgbWV0aG9kIHJ1bnMgb24gYSBzZXBhcmF0ZSwgaW50ZXJuYWwgdGhyZWFkLg0KICAgICAgICAgICAgVGhlIHRocmVhZCB3aWxsIHRlcm1pbmF0ZSBpZiBpdCBzZWVzIGEgc2VudGluZWwgb2JqZWN0IGluIHRoZSBxdWV1ZS4NCiAgICAgICAgICAgICIiIg0KICAgICAgICAgICAgcSA9IHNlbGYucXVldWUNCiAgICAgICAgICAgIGhhc190YXNrX2RvbmUgPSBoYXNhdHRyKHEsICd0YXNrX2RvbmUnKQ0KICAgICAgICAgICAgd2hpbGUgbm90IHNlbGYuX3N0b3AuaXNTZXQoKToNCiAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgIHJlY29yZCA9IHNlbGYuZGVxdWV1ZShUcnVlKQ0KICAgICAgICAgICAgICAgICAgICBpZiByZWNvcmQgaXMgc2VsZi5fc2VudGluZWw6DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZShyZWNvcmQpDQogICAgICAgICAgICAgICAgICAgIGlmIGhhc190YXNrX2RvbmU6DQogICAgICAgICAgICAgICAgICAgICAgICBxLnRhc2tfZG9uZSgpDQogICAgICAgICAgICAgICAgZXhjZXB0IHF1ZXVlLkVtcHR5Og0KICAgICAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICAjIFRoZXJlIG1pZ2h0IHN0aWxsIGJlIHJlY29yZHMgaW4gdGhlIHF1ZXVlLg0KICAgICAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgIHJlY29yZCA9IHNlbGYuZGVxdWV1ZShGYWxzZSkNCiAgICAgICAgICAgICAgICAgICAgaWYgcmVjb3JkIGlzIHNlbGYuX3NlbnRpbmVsOg0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYW5kbGUocmVjb3JkKQ0KICAgICAgICAgICAgICAgICAgICBpZiBoYXNfdGFza19kb25lOg0KICAgICAgICAgICAgICAgICAgICAgICAgcS50YXNrX2RvbmUoKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCBxdWV1ZS5FbXB0eToNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCg0KICAgICAgICBkZWYgZW5xdWV1ZV9zZW50aW5lbChzZWxmKToNCiAgICAgICAgICAgICIiIg0KICAgICAgICAgICAgVGhpcyBpcyB1c2VkIHRvIGVucXVldWUgdGhlIHNlbnRpbmVsIHJlY29yZC4NCg0KICAgICAgICAgICAgVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gdXNlcyBwdXRfbm93YWl0LiBZb3UgbWF5IHdhbnQgdG8gb3ZlcnJpZGUgdGhpcw0KICAgICAgICAgICAgbWV0aG9kIGlmIHlvdSB3YW50IHRvIHVzZSB0aW1lb3V0cyBvciB3b3JrIHdpdGggY3VzdG9tIHF1ZXVlDQogICAgICAgICAgICBpbXBsZW1lbnRhdGlvbnMuDQogICAgICAgICAgICAiIiINCiAgICAgICAgICAgIHNlbGYucXVldWUucHV0X25vd2FpdChzZWxmLl9zZW50aW5lbCkNCg0KICAgICAgICBkZWYgc3RvcChzZWxmKToNCiAgICAgICAgICAgICIiIg0KICAgICAgICAgICAgU3RvcCB0aGUgbGlzdGVuZXIuDQoNCiAgICAgICAgICAgIFRoaXMgYXNrcyB0aGUgdGhyZWFkIHRvIHRlcm1pbmF0ZSwgYW5kIHRoZW4gd2FpdHMgZm9yIGl0IHRvIGRvIHNvLg0KICAgICAgICAgICAgTm90ZSB0aGF0IGlmIHlvdSBkb24ndCBjYWxsIHRoaXMgYmVmb3JlIHlvdXIgYXBwbGljYXRpb24gZXhpdHMsIHRoZXJlDQogICAgICAgICAgICBtYXkgYmUgc29tZSByZWNvcmRzIHN0aWxsIGxlZnQgb24gdGhlIHF1ZXVlLCB3aGljaCB3b24ndCBiZSBwcm9jZXNzZWQuDQogICAgICAgICAgICAiIiINCiAgICAgICAgICAgIHNlbGYuX3N0b3Auc2V0KCkNCiAgICAgICAgICAgIHNlbGYuZW5xdWV1ZV9zZW50aW5lbCgpDQogICAgICAgICAgICBzZWxmLl90aHJlYWQuam9pbigpDQogICAgICAgICAgICBzZWxmLl90aHJlYWQgPSBOb25lDQo=',
'/Lib/logging/__init__.py':'IyBDb3B5cmlnaHQgMjAwMS0yMDEyIGJ5IFZpbmF5IFNhamlwLiBBbGwgUmlnaHRzIFJlc2VydmVkLg0KIw0KIyBQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGFuZCBpdHMNCiMgZG9jdW1lbnRhdGlvbiBmb3IgYW55IHB1cnBvc2UgYW5kIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLA0KIyBwcm92aWRlZCB0aGF0IHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFwcGVhciBpbiBhbGwgY29waWVzIGFuZCB0aGF0DQojIGJvdGggdGhhdCBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIGFwcGVhciBpbg0KIyBzdXBwb3J0aW5nIGRvY3VtZW50YXRpb24sIGFuZCB0aGF0IHRoZSBuYW1lIG9mIFZpbmF5IFNhamlwDQojIG5vdCBiZSB1c2VkIGluIGFkdmVydGlzaW5nIG9yIHB1YmxpY2l0eSBwZXJ0YWluaW5nIHRvIGRpc3RyaWJ1dGlvbg0KIyBvZiB0aGUgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYywgd3JpdHRlbiBwcmlvciBwZXJtaXNzaW9uLg0KIyBWSU5BWSBTQUpJUCBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSCBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSwgSU5DTFVESU5HDQojIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTA0KIyBWSU5BWSBTQUpJUCBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBJTkRJUkVDVCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1INCiMgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTSBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSDQojIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUiBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUDQojIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuDQoNCiIiIg0KTG9nZ2luZyBwYWNrYWdlIGZvciBQeXRob24uIEJhc2VkIG9uIFBFUCAyODIgYW5kIGNvbW1lbnRzIHRoZXJldG8gaW4NCmNvbXAubGFuZy5weXRob24uDQoNCkNvcHlyaWdodCAoQykgMjAwMS0yMDEyIFZpbmF5IFNhamlwLiBBbGwgUmlnaHRzIFJlc2VydmVkLg0KDQpUbyB1c2UsIHNpbXBseSAnaW1wb3J0IGxvZ2dpbmcnIGFuZCBsb2cgYXdheSENCiIiIg0KDQppbXBvcnQgc3lzLCBvcywgdGltZSwgaW8sIHRyYWNlYmFjaywgd2FybmluZ3MsIHdlYWtyZWYNCmZyb20gc3RyaW5nIGltcG9ydCBUZW1wbGF0ZQ0KDQpfX2FsbF9fID0gWydCQVNJQ19GT1JNQVQnLCAnQnVmZmVyaW5nRm9ybWF0dGVyJywgJ0NSSVRJQ0FMJywgJ0RFQlVHJywgJ0VSUk9SJywNCiAgICAgICAgICAgJ0ZBVEFMJywgJ0ZpbGVIYW5kbGVyJywgJ0ZpbHRlcicsICdGb3JtYXR0ZXInLCAnSGFuZGxlcicsICdJTkZPJywNCiAgICAgICAgICAgJ0xvZ1JlY29yZCcsICdMb2dnZXInLCAnTG9nZ2VyQWRhcHRlcicsICdOT1RTRVQnLCAnTnVsbEhhbmRsZXInLA0KICAgICAgICAgICAnU3RyZWFtSGFuZGxlcicsICdXQVJOJywgJ1dBUk5JTkcnLCAnYWRkTGV2ZWxOYW1lJywgJ2Jhc2ljQ29uZmlnJywNCiAgICAgICAgICAgJ2NhcHR1cmVXYXJuaW5ncycsICdjcml0aWNhbCcsICdkZWJ1ZycsICdkaXNhYmxlJywgJ2Vycm9yJywNCiAgICAgICAgICAgJ2V4Y2VwdGlvbicsICdmYXRhbCcsICdnZXRMZXZlbE5hbWUnLCAnZ2V0TG9nZ2VyJywgJ2dldExvZ2dlckNsYXNzJywNCiAgICAgICAgICAgJ2luZm8nLCAnbG9nJywgJ21ha2VMb2dSZWNvcmQnLCAnc2V0TG9nZ2VyQ2xhc3MnLCAnd2FybicsICd3YXJuaW5nJywNCiAgICAgICAgICAgJ2dldExvZ1JlY29yZEZhY3RvcnknLCAnc2V0TG9nUmVjb3JkRmFjdG9yeScsICdsYXN0UmVzb3J0J10NCg0KdHJ5Og0KICAgIGltcG9ydCB0aHJlYWRpbmcNCmV4Y2VwdCBJbXBvcnRFcnJvcjogI3ByYWdtYTogbm8gY292ZXINCiAgICB0aHJlYWRpbmcgPSBOb25lDQoNCl9fYXV0aG9yX18gID0gIlZpbmF5IFNhamlwIDx2aW5heV9zYWppcEByZWQtZG92ZS5jb20+Ig0KX19zdGF0dXNfXyAgPSAicHJvZHVjdGlvbiINCl9fdmVyc2lvbl9fID0gIjAuNS4xLjIiDQpfX2RhdGVfXyAgICA9ICIwNyBGZWJydWFyeSAyMDEwIg0KDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQojICAgTWlzY2VsbGFuZW91cyBtb2R1bGUgZGF0YQ0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQojDQojIF9zcmNmaWxlIGlzIHVzZWQgd2hlbiB3YWxraW5nIHRoZSBzdGFjayB0byBjaGVjayB3aGVuIHdlJ3ZlIGdvdCB0aGUgZmlyc3QNCiMgY2FsbGVyIHN0YWNrIGZyYW1lLg0KIw0KaWYgaGFzYXR0cihzeXMsICdmcm96ZW4nKTogI3N1cHBvcnQgZm9yIHB5MmV4ZQ0KICAgIF9zcmNmaWxlID0gImxvZ2dpbmclc19faW5pdF9fJXMiICUgKG9zLnNlcCwgX19maWxlX19bLTQ6XSkNCmVsc2U6DQogICAgX3NyY2ZpbGUgPSBfX2ZpbGVfXw0KX3NyY2ZpbGUgPSBvcy5wYXRoLm5vcm1jYXNlKF9zcmNmaWxlKQ0KDQoNCmlmIGhhc2F0dHIoc3lzLCAnX2dldGZyYW1lJyk6DQogICAgY3VycmVudGZyYW1lID0gbGFtYmRhOiBzeXMuX2dldGZyYW1lKDMpDQplbHNlOiAjcHJhZ21hOiBubyBjb3Zlcg0KICAgIGRlZiBjdXJyZW50ZnJhbWUoKToNCiAgICAgICAgIiIiUmV0dXJuIHRoZSBmcmFtZSBvYmplY3QgZm9yIHRoZSBjYWxsZXIncyBzdGFjayBmcmFtZS4iIiINCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHJldHVybiBzeXMuZXhjX2luZm8oKVsyXS50Yl9mcmFtZS5mX2JhY2sNCg0KIyBfc3JjZmlsZSBpcyBvbmx5IHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBzeXMuX2dldGZyYW1lKCkuDQojIFRvIHByb3ZpZGUgY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIHZlcnNpb25zIG9mIFB5dGhvbiwgc2V0IF9zcmNmaWxlDQojIHRvIE5vbmUgaWYgX2dldGZyYW1lKCkgaXMgbm90IGF2YWlsYWJsZTsgdGhpcyB2YWx1ZSB3aWxsIHByZXZlbnQNCiMgZmluZENhbGxlcigpIGZyb20gYmVpbmcgY2FsbGVkLg0KI2lmIG5vdCBoYXNhdHRyKHN5cywgIl9nZXRmcmFtZSIpOg0KIyAgICBfc3JjZmlsZSA9IE5vbmUNCg0KIw0KI19zdGFydFRpbWUgaXMgdXNlZCBhcyB0aGUgYmFzZSB3aGVuIGNhbGN1bGF0aW5nIHRoZSByZWxhdGl2ZSB0aW1lIG9mIGV2ZW50cw0KIw0KX3N0YXJ0VGltZSA9IHRpbWUudGltZSgpDQoNCiMNCiNyYWlzZUV4Y2VwdGlvbnMgaXMgdXNlZCB0byBzZWUgaWYgZXhjZXB0aW9ucyBkdXJpbmcgaGFuZGxpbmcgc2hvdWxkIGJlDQojcHJvcGFnYXRlZA0KIw0KcmFpc2VFeGNlcHRpb25zID0gVHJ1ZQ0KDQojDQojIElmIHlvdSBkb24ndCB3YW50IHRocmVhZGluZyBpbmZvcm1hdGlvbiBpbiB0aGUgbG9nLCBzZXQgdGhpcyB0byB6ZXJvDQojDQpsb2dUaHJlYWRzID0gVHJ1ZQ0KDQojDQojIElmIHlvdSBkb24ndCB3YW50IG11bHRpcHJvY2Vzc2luZyBpbmZvcm1hdGlvbiBpbiB0aGUgbG9nLCBzZXQgdGhpcyB0byB6ZXJvDQojDQpsb2dNdWx0aXByb2Nlc3NpbmcgPSBUcnVlDQoNCiMNCiMgSWYgeW91IGRvbid0IHdhbnQgcHJvY2VzcyBpbmZvcm1hdGlvbiBpbiB0aGUgbG9nLCBzZXQgdGhpcyB0byB6ZXJvDQojDQpsb2dQcm9jZXNzZXMgPSBUcnVlDQoNCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiMgICBMZXZlbCByZWxhdGVkIHN0dWZmDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQojDQojIERlZmF1bHQgbGV2ZWxzIGFuZCBsZXZlbCBuYW1lcywgdGhlc2UgY2FuIGJlIHJlcGxhY2VkIHdpdGggYW55IHBvc2l0aXZlIHNldA0KIyBvZiB2YWx1ZXMgaGF2aW5nIGNvcnJlc3BvbmRpbmcgbmFtZXMuIFRoZXJlIGlzIGEgcHNldWRvLWxldmVsLCBOT1RTRVQsIHdoaWNoDQojIGlzIG9ubHkgcmVhbGx5IHRoZXJlIGFzIGEgbG93ZXIgbGltaXQgZm9yIHVzZXItZGVmaW5lZCBsZXZlbHMuIEhhbmRsZXJzIGFuZA0KIyBsb2dnZXJzIGFyZSBpbml0aWFsaXplZCB3aXRoIE5PVFNFVCBzbyB0aGF0IHRoZXkgd2lsbCBsb2cgYWxsIG1lc3NhZ2VzLCBldmVuDQojIGF0IHVzZXItZGVmaW5lZCBsZXZlbHMuDQojDQoNCkNSSVRJQ0FMID0gNTANCkZBVEFMID0gQ1JJVElDQUwNCkVSUk9SID0gNDANCldBUk5JTkcgPSAzMA0KV0FSTiA9IFdBUk5JTkcNCklORk8gPSAyMA0KREVCVUcgPSAxMA0KTk9UU0VUID0gMA0KDQpfbGV2ZWxOYW1lcyA9IHsNCiAgICBDUklUSUNBTCA6ICdDUklUSUNBTCcsDQogICAgRVJST1IgOiAnRVJST1InLA0KICAgIFdBUk5JTkcgOiAnV0FSTklORycsDQogICAgSU5GTyA6ICdJTkZPJywNCiAgICBERUJVRyA6ICdERUJVRycsDQogICAgTk9UU0VUIDogJ05PVFNFVCcsDQogICAgJ0NSSVRJQ0FMJyA6IENSSVRJQ0FMLA0KICAgICdFUlJPUicgOiBFUlJPUiwNCiAgICAnV0FSTicgOiBXQVJOSU5HLA0KICAgICdXQVJOSU5HJyA6IFdBUk5JTkcsDQogICAgJ0lORk8nIDogSU5GTywNCiAgICAnREVCVUcnIDogREVCVUcsDQogICAgJ05PVFNFVCcgOiBOT1RTRVQsDQp9DQoNCmRlZiBnZXRMZXZlbE5hbWUobGV2ZWwpOg0KICAgICIiIg0KICAgIFJldHVybiB0aGUgdGV4dHVhbCByZXByZXNlbnRhdGlvbiBvZiBsb2dnaW5nIGxldmVsICdsZXZlbCcuDQoNCiAgICBJZiB0aGUgbGV2ZWwgaXMgb25lIG9mIHRoZSBwcmVkZWZpbmVkIGxldmVscyAoQ1JJVElDQUwsIEVSUk9SLCBXQVJOSU5HLA0KICAgIElORk8sIERFQlVHKSB0aGVuIHlvdSBnZXQgdGhlIGNvcnJlc3BvbmRpbmcgc3RyaW5nLiBJZiB5b3UgaGF2ZQ0KICAgIGFzc29jaWF0ZWQgbGV2ZWxzIHdpdGggbmFtZXMgdXNpbmcgYWRkTGV2ZWxOYW1lIHRoZW4gdGhlIG5hbWUgeW91IGhhdmUNCiAgICBhc3NvY2lhdGVkIHdpdGggJ2xldmVsJyBpcyByZXR1cm5lZC4NCg0KICAgIElmIGEgbnVtZXJpYyB2YWx1ZSBjb3JyZXNwb25kaW5nIHRvIG9uZSBvZiB0aGUgZGVmaW5lZCBsZXZlbHMgaXMgcGFzc2VkDQogICAgaW4sIHRoZSBjb3JyZXNwb25kaW5nIHN0cmluZyByZXByZXNlbnRhdGlvbiBpcyByZXR1cm5lZC4NCg0KICAgIE90aGVyd2lzZSwgdGhlIHN0cmluZyAiTGV2ZWwgJXMiICUgbGV2ZWwgaXMgcmV0dXJuZWQuDQogICAgIiIiDQogICAgcmV0dXJuIF9sZXZlbE5hbWVzLmdldChsZXZlbCwgKCJMZXZlbCAlcyIgJSBsZXZlbCkpDQoNCmRlZiBhZGRMZXZlbE5hbWUobGV2ZWwsIGxldmVsTmFtZSk6DQogICAgIiIiDQogICAgQXNzb2NpYXRlICdsZXZlbE5hbWUnIHdpdGggJ2xldmVsJy4NCg0KICAgIFRoaXMgaXMgdXNlZCB3aGVuIGNvbnZlcnRpbmcgbGV2ZWxzIHRvIHRleHQgZHVyaW5nIG1lc3NhZ2UgZm9ybWF0dGluZy4NCiAgICAiIiINCiAgICBfYWNxdWlyZUxvY2soKQ0KICAgIHRyeTogICAgI3VubGlrZWx5IHRvIGNhdXNlIGFuIGV4Y2VwdGlvbiwgYnV0IHlvdSBuZXZlciBrbm93Li4uDQogICAgICAgIF9sZXZlbE5hbWVzW2xldmVsXSA9IGxldmVsTmFtZQ0KICAgICAgICBfbGV2ZWxOYW1lc1tsZXZlbE5hbWVdID0gbGV2ZWwNCiAgICBmaW5hbGx5Og0KICAgICAgICBfcmVsZWFzZUxvY2soKQ0KDQpkZWYgX2NoZWNrTGV2ZWwobGV2ZWwpOg0KICAgIGlmIGlzaW5zdGFuY2UobGV2ZWwsIGludCk6DQogICAgICAgIHJ2ID0gbGV2ZWwNCiAgICBlbGlmIHN0cihsZXZlbCkgPT0gbGV2ZWw6DQogICAgICAgIGlmIGxldmVsIG5vdCBpbiBfbGV2ZWxOYW1lczoNCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVua25vd24gbGV2ZWw6ICVyIiAlIGxldmVsKQ0KICAgICAgICBydiA9IF9sZXZlbE5hbWVzW2xldmVsXQ0KICAgIGVsc2U6DQogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiTGV2ZWwgbm90IGFuIGludGVnZXIgb3IgYSB2YWxpZCBzdHJpbmc6ICVyIiAlIGxldmVsKQ0KICAgIHJldHVybiBydg0KDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQojICAgVGhyZWFkLXJlbGF0ZWQgc3R1ZmYNCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KIw0KI19sb2NrIGlzIHVzZWQgdG8gc2VyaWFsaXplIGFjY2VzcyB0byBzaGFyZWQgZGF0YSBzdHJ1Y3R1cmVzIGluIHRoaXMgbW9kdWxlLg0KI1RoaXMgbmVlZHMgdG8gYmUgYW4gUkxvY2sgYmVjYXVzZSBmaWxlQ29uZmlnKCkgY3JlYXRlcyBhbmQgY29uZmlndXJlcw0KI0hhbmRsZXJzLCBhbmQgc28gbWlnaHQgYXJiaXRyYXJ5IHVzZXIgdGhyZWFkcy4gU2luY2UgSGFuZGxlciBjb2RlIHVwZGF0ZXMgdGhlDQojc2hhcmVkIGRpY3Rpb25hcnkgX2hhbmRsZXJzLCBpdCBuZWVkcyB0byBhY3F1aXJlIHRoZSBsb2NrLiBCdXQgaWYgY29uZmlndXJpbmcsDQojdGhlIGxvY2sgd291bGQgYWxyZWFkeSBoYXZlIGJlZW4gYWNxdWlyZWQgLSBzbyB3ZSBuZWVkIGFuIFJMb2NrLg0KI1RoZSBzYW1lIGFyZ3VtZW50IGFwcGxpZXMgdG8gTG9nZ2VycyBhbmQgTWFuYWdlci5sb2dnZXJEaWN0Lg0KIw0KaWYgdGhyZWFkaW5nOg0KICAgIF9sb2NrID0gdGhyZWFkaW5nLlJMb2NrKCkNCmVsc2U6ICNwcmFnbWE6IG5vIGNvdmVyDQogICAgX2xvY2sgPSBOb25lDQoNCg0KZGVmIF9hY3F1aXJlTG9jaygpOg0KICAgICIiIg0KICAgIEFjcXVpcmUgdGhlIG1vZHVsZS1sZXZlbCBsb2NrIGZvciBzZXJpYWxpemluZyBhY2Nlc3MgdG8gc2hhcmVkIGRhdGEuDQoNCiAgICBUaGlzIHNob3VsZCBiZSByZWxlYXNlZCB3aXRoIF9yZWxlYXNlTG9jaygpLg0KICAgICIiIg0KICAgIGlmIF9sb2NrOg0KICAgICAgICBfbG9jay5hY3F1aXJlKCkNCg0KZGVmIF9yZWxlYXNlTG9jaygpOg0KICAgICIiIg0KICAgIFJlbGVhc2UgdGhlIG1vZHVsZS1sZXZlbCBsb2NrIGFjcXVpcmVkIGJ5IGNhbGxpbmcgX2FjcXVpcmVMb2NrKCkuDQogICAgIiIiDQogICAgaWYgX2xvY2s6DQogICAgICAgIF9sb2NrLnJlbGVhc2UoKQ0KDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQojICAgVGhlIGxvZ2dpbmcgcmVjb3JkDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCmNsYXNzIExvZ1JlY29yZChvYmplY3QpOg0KICAgICIiIg0KICAgIEEgTG9nUmVjb3JkIGluc3RhbmNlIHJlcHJlc2VudHMgYW4gZXZlbnQgYmVpbmcgbG9nZ2VkLg0KDQogICAgTG9nUmVjb3JkIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBldmVyeSB0aW1lIHNvbWV0aGluZyBpcyBsb2dnZWQuIFRoZXkNCiAgICBjb250YWluIGFsbCB0aGUgaW5mb3JtYXRpb24gcGVydGluZW50IHRvIHRoZSBldmVudCBiZWluZyBsb2dnZWQuIFRoZQ0KICAgIG1haW4gaW5mb3JtYXRpb24gcGFzc2VkIGluIGlzIGluIG1zZyBhbmQgYXJncywgd2hpY2ggYXJlIGNvbWJpbmVkDQogICAgdXNpbmcgc3RyKG1zZykgJSBhcmdzIHRvIGNyZWF0ZSB0aGUgbWVzc2FnZSBmaWVsZCBvZiB0aGUgcmVjb3JkLiBUaGUNCiAgICByZWNvcmQgYWxzbyBpbmNsdWRlcyBpbmZvcm1hdGlvbiBzdWNoIGFzIHdoZW4gdGhlIHJlY29yZCB3YXMgY3JlYXRlZCwNCiAgICB0aGUgc291cmNlIGxpbmUgd2hlcmUgdGhlIGxvZ2dpbmcgY2FsbCB3YXMgbWFkZSwgYW5kIGFueSBleGNlcHRpb24NCiAgICBpbmZvcm1hdGlvbiB0byBiZSBsb2dnZWQuDQogICAgIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIGxldmVsLCBwYXRobmFtZSwgbGluZW5vLA0KICAgICAgICAgICAgICAgICBtc2csIGFyZ3MsIGV4Y19pbmZvLCBmdW5jPU5vbmUsIHNpbmZvPU5vbmUsICoqa3dhcmdzKToNCiAgICAgICAgIiIiDQogICAgICAgIEluaXRpYWxpemUgYSBsb2dnaW5nIHJlY29yZCB3aXRoIGludGVyZXN0aW5nIGluZm9ybWF0aW9uLg0KICAgICAgICAiIiINCiAgICAgICAgY3QgPSB0aW1lLnRpbWUoKQ0KICAgICAgICBzZWxmLm5hbWUgPSBuYW1lDQogICAgICAgIHNlbGYubXNnID0gbXNnDQogICAgICAgICMNCiAgICAgICAgIyBUaGUgZm9sbG93aW5nIHN0YXRlbWVudCBhbGxvd3MgcGFzc2luZyBvZiBhIGRpY3Rpb25hcnkgYXMgYSBzb2xlDQogICAgICAgICMgYXJndW1lbnQsIHNvIHRoYXQgeW91IGNhbiBkbyBzb21ldGhpbmcgbGlrZQ0KICAgICAgICAjICBsb2dnaW5nLmRlYnVnKCJhICUoYSlkIGIgJShiKXMiLCB7J2EnOjEsICdiJzoyfSkNCiAgICAgICAgIyBTdWdnZXN0ZWQgYnkgU3RlZmFuIEJlaG5lbC4NCiAgICAgICAgIyBOb3RlIHRoYXQgd2l0aG91dCB0aGUgdGVzdCBmb3IgYXJnc1swXSwgd2UgZ2V0IGEgcHJvYmxlbSBiZWNhdXNlDQogICAgICAgICMgZHVyaW5nIGZvcm1hdHRpbmcsIHdlIHRlc3QgdG8gc2VlIGlmIHRoZSBhcmcgaXMgcHJlc2VudCB1c2luZw0KICAgICAgICAjICdpZiBzZWxmLmFyZ3M6Jy4gSWYgdGhlIGV2ZW50IGJlaW5nIGxvZ2dlZCBpcyBlLmcuICdWYWx1ZSBpcyAlZCcNCiAgICAgICAgIyBhbmQgaWYgdGhlIHBhc3NlZCBhcmcgZmFpbHMgJ2lmIHNlbGYuYXJnczonIHRoZW4gbm8gZm9ybWF0dGluZw0KICAgICAgICAjIGlzIGRvbmUuIEZvciBleGFtcGxlLCBsb2dnZXIud2FybmluZygnVmFsdWUgaXMgJWQnLCAwKSB3b3VsZCBsb2cNCiAgICAgICAgIyAnVmFsdWUgaXMgJWQnIGluc3RlYWQgb2YgJ1ZhbHVlIGlzIDAnLg0KICAgICAgICAjIEZvciB0aGUgdXNlIGNhc2Ugb2YgcGFzc2luZyBhIGRpY3Rpb25hcnksIHRoaXMgc2hvdWxkIG5vdCBiZSBhDQogICAgICAgICMgcHJvYmxlbS4NCiAgICAgICAgaWYgYXJncyBhbmQgbGVuKGFyZ3MpID09IDEgYW5kIGlzaW5zdGFuY2UoYXJnc1swXSwgZGljdCkgYW5kIGFyZ3NbMF06DQogICAgICAgICAgICBhcmdzID0gYXJnc1swXQ0KICAgICAgICBzZWxmLmFyZ3MgPSBhcmdzDQogICAgICAgIHNlbGYubGV2ZWxuYW1lID0gZ2V0TGV2ZWxOYW1lKGxldmVsKQ0KICAgICAgICBzZWxmLmxldmVsbm8gPSBsZXZlbA0KICAgICAgICBzZWxmLnBhdGhuYW1lID0gcGF0aG5hbWUNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5maWxlbmFtZSA9IG9zLnBhdGguYmFzZW5hbWUocGF0aG5hbWUpDQogICAgICAgICAgICBzZWxmLm1vZHVsZSA9IG9zLnBhdGguc3BsaXRleHQoc2VsZi5maWxlbmFtZSlbMF0NCiAgICAgICAgZXhjZXB0IChUeXBlRXJyb3IsIFZhbHVlRXJyb3IsIEF0dHJpYnV0ZUVycm9yKToNCiAgICAgICAgICAgIHNlbGYuZmlsZW5hbWUgPSBwYXRobmFtZQ0KICAgICAgICAgICAgc2VsZi5tb2R1bGUgPSAiVW5rbm93biBtb2R1bGUiDQogICAgICAgIHNlbGYuZXhjX2luZm8gPSBleGNfaW5mbw0KICAgICAgICBzZWxmLmV4Y190ZXh0ID0gTm9uZSAgICAgICMgdXNlZCB0byBjYWNoZSB0aGUgdHJhY2ViYWNrIHRleHQNCiAgICAgICAgc2VsZi5zdGFja19pbmZvID0gc2luZm8NCiAgICAgICAgc2VsZi5saW5lbm8gPSBsaW5lbm8NCiAgICAgICAgc2VsZi5mdW5jTmFtZSA9IGZ1bmMNCiAgICAgICAgc2VsZi5jcmVhdGVkID0gY3QNCiAgICAgICAgc2VsZi5tc2VjcyA9IChjdCAtIGludChjdCkpICogMTAwMA0KICAgICAgICBzZWxmLnJlbGF0aXZlQ3JlYXRlZCA9IChzZWxmLmNyZWF0ZWQgLSBfc3RhcnRUaW1lKSAqIDEwMDANCiAgICAgICAgaWYgbG9nVGhyZWFkcyBhbmQgdGhyZWFkaW5nOg0KICAgICAgICAgICAgc2VsZi50aHJlYWQgPSB0aHJlYWRpbmcuZ2V0X2lkZW50KCkNCiAgICAgICAgICAgIHNlbGYudGhyZWFkTmFtZSA9IHRocmVhZGluZy5jdXJyZW50X3RocmVhZCgpLm5hbWUNCiAgICAgICAgZWxzZTogIyBwcmFnbWE6IG5vIGNvdmVyDQogICAgICAgICAgICBzZWxmLnRocmVhZCA9IE5vbmUNCiAgICAgICAgICAgIHNlbGYudGhyZWFkTmFtZSA9IE5vbmUNCiAgICAgICAgaWYgbm90IGxvZ011bHRpcHJvY2Vzc2luZzogIyBwcmFnbWE6IG5vIGNvdmVyDQogICAgICAgICAgICBzZWxmLnByb2Nlc3NOYW1lID0gTm9uZQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5wcm9jZXNzTmFtZSA9ICdNYWluUHJvY2VzcycNCiAgICAgICAgICAgIG1wID0gc3lzLm1vZHVsZXMuZ2V0KCdtdWx0aXByb2Nlc3NpbmcnKQ0KICAgICAgICAgICAgaWYgbXAgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgIyBFcnJvcnMgbWF5IG9jY3VyIGlmIG11bHRpcHJvY2Vzc2luZyBoYXMgbm90IGZpbmlzaGVkIGxvYWRpbmcNCiAgICAgICAgICAgICAgICAjIHlldCAtIGUuZy4gaWYgYSBjdXN0b20gaW1wb3J0IGhvb2sgY2F1c2VzIHRoaXJkLXBhcnR5IGNvZGUNCiAgICAgICAgICAgICAgICAjIHRvIHJ1biB3aGVuIG11bHRpcHJvY2Vzc2luZyBjYWxscyBpbXBvcnQuIFNlZSBpc3N1ZSA4MjAwDQogICAgICAgICAgICAgICAgIyBmb3IgYW4gZXhhbXBsZQ0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9jZXNzTmFtZSA9IG1wLmN1cnJlbnRfcHJvY2VzcygpLm5hbWUNCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOiAjcHJhZ21hOiBubyBjb3Zlcg0KICAgICAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIGlmIGxvZ1Byb2Nlc3NlcyBhbmQgaGFzYXR0cihvcywgJ2dldHBpZCcpOg0KICAgICAgICAgICAgc2VsZi5wcm9jZXNzID0gb3MuZ2V0cGlkKCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHNlbGYucHJvY2VzcyA9IE5vbmUNCg0KICAgIGRlZiBfX3N0cl9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gJzxMb2dSZWNvcmQ6ICVzLCAlcywgJXMsICVzLCAiJXMiPiclKHNlbGYubmFtZSwgc2VsZi5sZXZlbG5vLA0KICAgICAgICAgICAgc2VsZi5wYXRobmFtZSwgc2VsZi5saW5lbm8sIHNlbGYubXNnKQ0KDQogICAgZGVmIGdldE1lc3NhZ2Uoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBSZXR1cm4gdGhlIG1lc3NhZ2UgZm9yIHRoaXMgTG9nUmVjb3JkLg0KDQogICAgICAgIFJldHVybiB0aGUgbWVzc2FnZSBmb3IgdGhpcyBMb2dSZWNvcmQgYWZ0ZXIgbWVyZ2luZyBhbnkgdXNlci1zdXBwbGllZA0KICAgICAgICBhcmd1bWVudHMgd2l0aCB0aGUgbWVzc2FnZS4NCiAgICAgICAgIiIiDQogICAgICAgIG1zZyA9IHN0cihzZWxmLm1zZykNCiAgICAgICAgaWYgc2VsZi5hcmdzOg0KICAgICAgICAgICAgbXNnID0gbXNnICUgc2VsZi5hcmdzDQogICAgICAgIHJldHVybiBtc2cNCg0KIw0KIyAgIERldGVybWluZSB3aGljaCBjbGFzcyB0byB1c2Ugd2hlbiBpbnN0YW50aWF0aW5nIGxvZyByZWNvcmRzLg0KIw0KX2xvZ1JlY29yZEZhY3RvcnkgPSBMb2dSZWNvcmQNCg0KZGVmIHNldExvZ1JlY29yZEZhY3RvcnkoZmFjdG9yeSk6DQogICAgIiIiDQogICAgU2V0IHRoZSBmYWN0b3J5IHRvIGJlIHVzZWQgd2hlbiBpbnN0YW50aWF0aW5nIGEgbG9nIHJlY29yZC4NCg0KICAgIDpwYXJhbSBmYWN0b3J5OiBBIGNhbGxhYmxlIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHRvIGluc3RhbnRpYXRlDQogICAgYSBsb2cgcmVjb3JkLg0KICAgICIiIg0KICAgIGdsb2JhbCBfbG9nUmVjb3JkRmFjdG9yeQ0KICAgIF9sb2dSZWNvcmRGYWN0b3J5ID0gZmFjdG9yeQ0KDQpkZWYgZ2V0TG9nUmVjb3JkRmFjdG9yeSgpOg0KICAgICIiIg0KICAgIFJldHVybiB0aGUgZmFjdG9yeSB0byBiZSB1c2VkIHdoZW4gaW5zdGFudGlhdGluZyBhIGxvZyByZWNvcmQuDQogICAgIiIiDQoNCiAgICByZXR1cm4gX2xvZ1JlY29yZEZhY3RvcnkNCg0KZGVmIG1ha2VMb2dSZWNvcmQoZGljdCk6DQogICAgIiIiDQogICAgTWFrZSBhIExvZ1JlY29yZCB3aG9zZSBhdHRyaWJ1dGVzIGFyZSBkZWZpbmVkIGJ5IHRoZSBzcGVjaWZpZWQgZGljdGlvbmFyeSwNCiAgICBUaGlzIGZ1bmN0aW9uIGlzIHVzZWZ1bCBmb3IgY29udmVydGluZyBhIGxvZ2dpbmcgZXZlbnQgcmVjZWl2ZWQgb3Zlcg0KICAgIGEgc29ja2V0IGNvbm5lY3Rpb24gKHdoaWNoIGlzIHNlbnQgYXMgYSBkaWN0aW9uYXJ5KSBpbnRvIGEgTG9nUmVjb3JkDQogICAgaW5zdGFuY2UuDQogICAgIiIiDQogICAgcnYgPSBfbG9nUmVjb3JkRmFjdG9yeShOb25lLCBOb25lLCAiIiwgMCwgIiIsICgpLCBOb25lLCBOb25lKQ0KICAgIHJ2Ll9fZGljdF9fLnVwZGF0ZShkaWN0KQ0KICAgIHJldHVybiBydg0KDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQojICAgRm9ybWF0dGVyIGNsYXNzZXMgYW5kIGZ1bmN0aW9ucw0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpjbGFzcyBQZXJjZW50U3R5bGUob2JqZWN0KToNCg0KICAgIGRlZmF1bHRfZm9ybWF0ID0gJyUobWVzc2FnZSlzJw0KICAgIGFzY3RpbWVfZm9ybWF0ID0gJyUoYXNjdGltZSlzJw0KICAgIGFzY3RpbWVfc2VhcmNoID0gJyUoYXNjdGltZSknDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgZm10KToNCiAgICAgICAgc2VsZi5fZm10ID0gZm10IG9yIHNlbGYuZGVmYXVsdF9mb3JtYXQNCg0KICAgIGRlZiB1c2VzVGltZShzZWxmKToNCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZtdC5maW5kKHNlbGYuYXNjdGltZV9zZWFyY2gpID49IDANCg0KICAgIGRlZiBmb3JtYXQoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZtdCAlIHJlY29yZC5fX2RpY3RfXw0KDQpjbGFzcyBTdHJGb3JtYXRTdHlsZShQZXJjZW50U3R5bGUpOg0KICAgIGRlZmF1bHRfZm9ybWF0ID0gJ3ttZXNzYWdlfScNCiAgICBhc2N0aW1lX2Zvcm1hdCA9ICd7YXNjdGltZX0nDQogICAgYXNjdGltZV9zZWFyY2ggPSAne2FzY3RpbWUnDQoNCiAgICBkZWYgZm9ybWF0KHNlbGYsIHJlY29yZCk6DQogICAgICAgIHJldHVybiBzZWxmLl9mbXQuZm9ybWF0KCoqcmVjb3JkLl9fZGljdF9fKQ0KDQoNCmNsYXNzIFN0cmluZ1RlbXBsYXRlU3R5bGUoUGVyY2VudFN0eWxlKToNCiAgICBkZWZhdWx0X2Zvcm1hdCA9ICcke21lc3NhZ2V9Jw0KICAgIGFzY3RpbWVfZm9ybWF0ID0gJyR7YXNjdGltZX0nDQogICAgYXNjdGltZV9zZWFyY2ggPSAnJHthc2N0aW1lfScNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmbXQpOg0KICAgICAgICBzZWxmLl9mbXQgPSBmbXQgb3Igc2VsZi5kZWZhdWx0X2Zvcm1hdA0KICAgICAgICBzZWxmLl90cGwgPSBUZW1wbGF0ZShzZWxmLl9mbXQpDQoNCiAgICBkZWYgdXNlc1RpbWUoc2VsZik6DQogICAgICAgIGZtdCA9IHNlbGYuX2ZtdA0KICAgICAgICByZXR1cm4gZm10LmZpbmQoJyRhc2N0aW1lJykgPj0gMCBvciBmbXQuZmluZChzZWxmLmFzY3RpbWVfZm9ybWF0KSA+PSAwDQoNCiAgICBkZWYgZm9ybWF0KHNlbGYsIHJlY29yZCk6DQogICAgICAgIHJldHVybiBzZWxmLl90cGwuc3Vic3RpdHV0ZSgqKnJlY29yZC5fX2RpY3RfXykNCg0KX1NUWUxFUyA9IHsNCiAgICAnJSc6IFBlcmNlbnRTdHlsZSwNCiAgICAneyc6IFN0ckZvcm1hdFN0eWxlLA0KICAgICckJzogU3RyaW5nVGVtcGxhdGVTdHlsZQ0KfQ0KDQpjbGFzcyBGb3JtYXR0ZXIob2JqZWN0KToNCiAgICAiIiINCiAgICBGb3JtYXR0ZXIgaW5zdGFuY2VzIGFyZSB1c2VkIHRvIGNvbnZlcnQgYSBMb2dSZWNvcmQgdG8gdGV4dC4NCg0KICAgIEZvcm1hdHRlcnMgbmVlZCB0byBrbm93IGhvdyBhIExvZ1JlY29yZCBpcyBjb25zdHJ1Y3RlZC4gVGhleSBhcmUNCiAgICByZXNwb25zaWJsZSBmb3IgY29udmVydGluZyBhIExvZ1JlY29yZCB0byAodXN1YWxseSkgYSBzdHJpbmcgd2hpY2ggY2FuDQogICAgYmUgaW50ZXJwcmV0ZWQgYnkgZWl0aGVyIGEgaHVtYW4gb3IgYW4gZXh0ZXJuYWwgc3lzdGVtLiBUaGUgYmFzZSBGb3JtYXR0ZXINCiAgICBhbGxvd3MgYSBmb3JtYXR0aW5nIHN0cmluZyB0byBiZSBzcGVjaWZpZWQuIElmIG5vbmUgaXMgc3VwcGxpZWQsIHRoZQ0KICAgIGRlZmF1bHQgdmFsdWUgb2YgIiVzKG1lc3NhZ2UpIiBpcyB1c2VkLg0KDQogICAgVGhlIEZvcm1hdHRlciBjYW4gYmUgaW5pdGlhbGl6ZWQgd2l0aCBhIGZvcm1hdCBzdHJpbmcgd2hpY2ggbWFrZXMgdXNlIG9mDQogICAga25vd2xlZGdlIG9mIHRoZSBMb2dSZWNvcmQgYXR0cmlidXRlcyAtIGUuZy4gdGhlIGRlZmF1bHQgdmFsdWUgbWVudGlvbmVkDQogICAgYWJvdmUgbWFrZXMgdXNlIG9mIHRoZSBmYWN0IHRoYXQgdGhlIHVzZXIncyBtZXNzYWdlIGFuZCBhcmd1bWVudHMgYXJlIHByZS0NCiAgICBmb3JtYXR0ZWQgaW50byBhIExvZ1JlY29yZCdzIG1lc3NhZ2UgYXR0cmlidXRlLiBDdXJyZW50bHksIHRoZSB1c2VmdWwNCiAgICBhdHRyaWJ1dGVzIGluIGEgTG9nUmVjb3JkIGFyZSBkZXNjcmliZWQgYnk6DQoNCiAgICAlKG5hbWUpcyAgICAgICAgICAgIE5hbWUgb2YgdGhlIGxvZ2dlciAobG9nZ2luZyBjaGFubmVsKQ0KICAgICUobGV2ZWxubylzICAgICAgICAgTnVtZXJpYyBsb2dnaW5nIGxldmVsIGZvciB0aGUgbWVzc2FnZSAoREVCVUcsIElORk8sDQogICAgICAgICAgICAgICAgICAgICAgICBXQVJOSU5HLCBFUlJPUiwgQ1JJVElDQUwpDQogICAgJShsZXZlbG5hbWUpcyAgICAgICBUZXh0IGxvZ2dpbmcgbGV2ZWwgZm9yIHRoZSBtZXNzYWdlICgiREVCVUciLCAiSU5GTyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiV0FSTklORyIsICJFUlJPUiIsICJDUklUSUNBTCIpDQogICAgJShwYXRobmFtZSlzICAgICAgICBGdWxsIHBhdGhuYW1lIG9mIHRoZSBzb3VyY2UgZmlsZSB3aGVyZSB0aGUgbG9nZ2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FsbCB3YXMgaXNzdWVkIChpZiBhdmFpbGFibGUpDQogICAgJShmaWxlbmFtZSlzICAgICAgICBGaWxlbmFtZSBwb3J0aW9uIG9mIHBhdGhuYW1lDQogICAgJShtb2R1bGUpcyAgICAgICAgICBNb2R1bGUgKG5hbWUgcG9ydGlvbiBvZiBmaWxlbmFtZSkNCiAgICAlKGxpbmVubylkICAgICAgICAgIFNvdXJjZSBsaW5lIG51bWJlciB3aGVyZSB0aGUgbG9nZ2luZyBjYWxsIHdhcyBpc3N1ZWQNCiAgICAgICAgICAgICAgICAgICAgICAgIChpZiBhdmFpbGFibGUpDQogICAgJShmdW5jTmFtZSlzICAgICAgICBGdW5jdGlvbiBuYW1lDQogICAgJShjcmVhdGVkKWYgICAgICAgICBUaW1lIHdoZW4gdGhlIExvZ1JlY29yZCB3YXMgY3JlYXRlZCAodGltZS50aW1lKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSkNCiAgICAlKGFzY3RpbWUpcyAgICAgICAgIFRleHR1YWwgdGltZSB3aGVuIHRoZSBMb2dSZWNvcmQgd2FzIGNyZWF0ZWQNCiAgICAlKG1zZWNzKWQgICAgICAgICAgIE1pbGxpc2Vjb25kIHBvcnRpb24gb2YgdGhlIGNyZWF0aW9uIHRpbWUNCiAgICAlKHJlbGF0aXZlQ3JlYXRlZClkIFRpbWUgaW4gbWlsbGlzZWNvbmRzIHdoZW4gdGhlIExvZ1JlY29yZCB3YXMgY3JlYXRlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlIHRvIHRoZSB0aW1lIHRoZSBsb2dnaW5nIG1vZHVsZSB3YXMgbG9hZGVkDQogICAgICAgICAgICAgICAgICAgICAgICAodHlwaWNhbGx5IGF0IGFwcGxpY2F0aW9uIHN0YXJ0dXAgdGltZSkNCiAgICAlKHRocmVhZClkICAgICAgICAgIFRocmVhZCBJRCAoaWYgYXZhaWxhYmxlKQ0KICAgICUodGhyZWFkTmFtZSlzICAgICAgVGhyZWFkIG5hbWUgKGlmIGF2YWlsYWJsZSkNCiAgICAlKHByb2Nlc3MpZCAgICAgICAgIFByb2Nlc3MgSUQgKGlmIGF2YWlsYWJsZSkNCiAgICAlKG1lc3NhZ2UpcyAgICAgICAgIFRoZSByZXN1bHQgb2YgcmVjb3JkLmdldE1lc3NhZ2UoKSwgY29tcHV0ZWQganVzdCBhcw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlY29yZCBpcyBlbWl0dGVkDQogICAgIiIiDQoNCiAgICBjb252ZXJ0ZXIgPSB0aW1lLmxvY2FsdGltZQ0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZtdD1Ob25lLCBkYXRlZm10PU5vbmUsIHN0eWxlPSclJyk6DQogICAgICAgICIiIg0KICAgICAgICBJbml0aWFsaXplIHRoZSBmb3JtYXR0ZXIgd2l0aCBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZ3MuDQoNCiAgICAgICAgSW5pdGlhbGl6ZSB0aGUgZm9ybWF0dGVyIGVpdGhlciB3aXRoIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZywgb3IgYQ0KICAgICAgICBkZWZhdWx0IGFzIGRlc2NyaWJlZCBhYm92ZS4gQWxsb3cgZm9yIHNwZWNpYWxpemVkIGRhdGUgZm9ybWF0dGluZyB3aXRoDQogICAgICAgIHRoZSBvcHRpb25hbCBkYXRlZm10IGFyZ3VtZW50IChpZiBvbWl0dGVkLCB5b3UgZ2V0IHRoZSBJU084NjAxIGZvcm1hdCkuDQoNCiAgICAgICAgVXNlIGEgc3R5bGUgcGFyYW1ldGVyIG9mICclJywgJ3snIG9yICckJyB0byBzcGVjaWZ5IHRoYXQgeW91IHdhbnQgdG8NCiAgICAgICAgdXNlIG9uZSBvZiAlLWZvcm1hdHRpbmcsIDptZXRoOmBzdHIuZm9ybWF0YCAoYGB7fWBgKSBmb3JtYXR0aW5nIG9yDQogICAgICAgIDpjbGFzczpgc3RyaW5nLlRlbXBsYXRlYCBmb3JtYXR0aW5nIGluIHlvdXIgZm9ybWF0IHN0cmluZy4NCg0KICAgICAgICAuLiB2ZXJzaW9uY2hhbmdlZDogMy4yDQogICAgICAgICAgIEFkZGVkIHRoZSBgYHN0eWxlYGAgcGFyYW1ldGVyLg0KICAgICAgICAiIiINCiAgICAgICAgaWYgc3R5bGUgbm90IGluIF9TVFlMRVM6DQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdTdHlsZSBtdXN0IGJlIG9uZSBvZjogJXMnICUgJywnLmpvaW4oDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9TVFlMRVMua2V5cygpKSkNCiAgICAgICAgc2VsZi5fc3R5bGUgPSBfU1RZTEVTW3N0eWxlXShmbXQpDQogICAgICAgIHNlbGYuX2ZtdCA9IHNlbGYuX3N0eWxlLl9mbXQNCiAgICAgICAgc2VsZi5kYXRlZm10ID0gZGF0ZWZtdA0KDQogICAgZGVmYXVsdF90aW1lX2Zvcm1hdCA9ICclWS0lbS0lZCAlSDolTTolUycNCiAgICBkZWZhdWx0X21zZWNfZm9ybWF0ID0gJyVzLCUwM2QnDQoNCiAgICBkZWYgZm9ybWF0VGltZShzZWxmLCByZWNvcmQsIGRhdGVmbXQ9Tm9uZSk6DQogICAgICAgICIiIg0KICAgICAgICBSZXR1cm4gdGhlIGNyZWF0aW9uIHRpbWUgb2YgdGhlIHNwZWNpZmllZCBMb2dSZWNvcmQgYXMgZm9ybWF0dGVkIHRleHQuDQoNCiAgICAgICAgVGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCBmcm9tIGZvcm1hdCgpIGJ5IGEgZm9ybWF0dGVyIHdoaWNoDQogICAgICAgIHdhbnRzIHRvIG1ha2UgdXNlIG9mIGEgZm9ybWF0dGVkIHRpbWUuIFRoaXMgbWV0aG9kIGNhbiBiZSBvdmVycmlkZGVuDQogICAgICAgIGluIGZvcm1hdHRlcnMgdG8gcHJvdmlkZSBmb3IgYW55IHNwZWNpZmljIHJlcXVpcmVtZW50LCBidXQgdGhlDQogICAgICAgIGJhc2ljIGJlaGF2aW91ciBpcyBhcyBmb2xsb3dzOiBpZiBkYXRlZm10IChhIHN0cmluZykgaXMgc3BlY2lmaWVkLA0KICAgICAgICBpdCBpcyB1c2VkIHdpdGggdGltZS5zdHJmdGltZSgpIHRvIGZvcm1hdCB0aGUgY3JlYXRpb24gdGltZSBvZiB0aGUNCiAgICAgICAgcmVjb3JkLiBPdGhlcndpc2UsIHRoZSBJU084NjAxIGZvcm1hdCBpcyB1c2VkLiBUaGUgcmVzdWx0aW5nDQogICAgICAgIHN0cmluZyBpcyByZXR1cm5lZC4gVGhpcyBmdW5jdGlvbiB1c2VzIGEgdXNlci1jb25maWd1cmFibGUgZnVuY3Rpb24NCiAgICAgICAgdG8gY29udmVydCB0aGUgY3JlYXRpb24gdGltZSB0byBhIHR1cGxlLiBCeSBkZWZhdWx0LCB0aW1lLmxvY2FsdGltZSgpDQogICAgICAgIGlzIHVzZWQ7IHRvIGNoYW5nZSB0aGlzIGZvciBhIHBhcnRpY3VsYXIgZm9ybWF0dGVyIGluc3RhbmNlLCBzZXQgdGhlDQogICAgICAgICdjb252ZXJ0ZXInIGF0dHJpYnV0ZSB0byBhIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgc2lnbmF0dXJlIGFzDQogICAgICAgIHRpbWUubG9jYWx0aW1lKCkgb3IgdGltZS5nbXRpbWUoKS4gVG8gY2hhbmdlIGl0IGZvciBhbGwgZm9ybWF0dGVycywNCiAgICAgICAgZm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgYWxsIGxvZ2dpbmcgdGltZXMgdG8gYmUgc2hvd24gaW4gR01ULA0KICAgICAgICBzZXQgdGhlICdjb252ZXJ0ZXInIGF0dHJpYnV0ZSBpbiB0aGUgRm9ybWF0dGVyIGNsYXNzLg0KICAgICAgICAiIiINCiAgICAgICAgY3QgPSBzZWxmLmNvbnZlcnRlcihyZWNvcmQuY3JlYXRlZCkNCiAgICAgICAgaWYgZGF0ZWZtdDoNCiAgICAgICAgICAgIHMgPSB0aW1lLnN0cmZ0aW1lKGRhdGVmbXQsIGN0KQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgdCA9IHRpbWUuc3RyZnRpbWUoc2VsZi5kZWZhdWx0X3RpbWVfZm9ybWF0LCBjdCkNCiAgICAgICAgICAgIHMgPSBzZWxmLmRlZmF1bHRfbXNlY19mb3JtYXQgJSAodCwgcmVjb3JkLm1zZWNzKQ0KICAgICAgICByZXR1cm4gcw0KDQogICAgZGVmIGZvcm1hdEV4Y2VwdGlvbihzZWxmLCBlaSk6DQogICAgICAgICIiIg0KICAgICAgICBGb3JtYXQgYW5kIHJldHVybiB0aGUgc3BlY2lmaWVkIGV4Y2VwdGlvbiBpbmZvcm1hdGlvbiBhcyBhIHN0cmluZy4NCg0KICAgICAgICBUaGlzIGRlZmF1bHQgaW1wbGVtZW50YXRpb24ganVzdCB1c2VzDQogICAgICAgIHRyYWNlYmFjay5wcmludF9leGNlcHRpb24oKQ0KICAgICAgICAiIiINCiAgICAgICAgc2lvID0gaW8uU3RyaW5nSU8oKQ0KICAgICAgICB0YiA9IGVpWzJdDQogICAgICAgICMgU2VlIGlzc3VlcyAjOTQyNywgIzE1NTMzNzUuIENvbW1lbnRlZCBvdXQgZm9yIG5vdy4NCiAgICAgICAgI2lmIGdldGF0dHIoc2VsZiwgJ2Z1bGxzdGFjaycsIEZhbHNlKToNCiAgICAgICAgIyAgICB0cmFjZWJhY2sucHJpbnRfc3RhY2sodGIudGJfZnJhbWUuZl9iYWNrLCBmaWxlPXNpbykNCiAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4Y2VwdGlvbihlaVswXSwgZWlbMV0sIHRiLCBOb25lLCBzaW8pDQogICAgICAgIHMgPSBzaW8uZ2V0dmFsdWUoKQ0KICAgICAgICBzaW8uY2xvc2UoKQ0KICAgICAgICBpZiBzWy0xOl0gPT0gIlxuIjoNCiAgICAgICAgICAgIHMgPSBzWzotMV0NCiAgICAgICAgcmV0dXJuIHMNCg0KICAgIGRlZiB1c2VzVGltZShzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIENoZWNrIGlmIHRoZSBmb3JtYXQgdXNlcyB0aGUgY3JlYXRpb24gdGltZSBvZiB0aGUgcmVjb3JkLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHNlbGYuX3N0eWxlLnVzZXNUaW1lKCkNCg0KICAgIGRlZiBmb3JtYXRNZXNzYWdlKHNlbGYsIHJlY29yZCk6DQogICAgICAgIHJldHVybiBzZWxmLl9zdHlsZS5mb3JtYXQocmVjb3JkKQ0KDQogICAgZGVmIGZvcm1hdFN0YWNrKHNlbGYsIHN0YWNrX2luZm8pOg0KICAgICAgICAiIiINCiAgICAgICAgVGhpcyBtZXRob2QgaXMgcHJvdmlkZWQgYXMgYW4gZXh0ZW5zaW9uIHBvaW50IGZvciBzcGVjaWFsaXplZA0KICAgICAgICBmb3JtYXR0aW5nIG9mIHN0YWNrIGluZm9ybWF0aW9uLg0KDQogICAgICAgIFRoZSBpbnB1dCBkYXRhIGlzIGEgc3RyaW5nIGFzIHJldHVybmVkIGZyb20gYSBjYWxsIHRvDQogICAgICAgIDpmdW5jOmB0cmFjZWJhY2sucHJpbnRfc3RhY2tgLCBidXQgd2l0aCB0aGUgbGFzdCB0cmFpbGluZyBuZXdsaW5lDQogICAgICAgIHJlbW92ZWQuDQoNCiAgICAgICAgVGhlIGJhc2UgaW1wbGVtZW50YXRpb24ganVzdCByZXR1cm5zIHRoZSB2YWx1ZSBwYXNzZWQgaW4uDQogICAgICAgICIiIg0KICAgICAgICByZXR1cm4gc3RhY2tfaW5mbw0KDQogICAgZGVmIGZvcm1hdChzZWxmLCByZWNvcmQpOg0KICAgICAgICAiIiINCiAgICAgICAgRm9ybWF0IHRoZSBzcGVjaWZpZWQgcmVjb3JkIGFzIHRleHQuDQoNCiAgICAgICAgVGhlIHJlY29yZCdzIGF0dHJpYnV0ZSBkaWN0aW9uYXJ5IGlzIHVzZWQgYXMgdGhlIG9wZXJhbmQgdG8gYQ0KICAgICAgICBzdHJpbmcgZm9ybWF0dGluZyBvcGVyYXRpb24gd2hpY2ggeWllbGRzIHRoZSByZXR1cm5lZCBzdHJpbmcuDQogICAgICAgIEJlZm9yZSBmb3JtYXR0aW5nIHRoZSBkaWN0aW9uYXJ5LCBhIGNvdXBsZSBvZiBwcmVwYXJhdG9yeSBzdGVwcw0KICAgICAgICBhcmUgY2FycmllZCBvdXQuIFRoZSBtZXNzYWdlIGF0dHJpYnV0ZSBvZiB0aGUgcmVjb3JkIGlzIGNvbXB1dGVkDQogICAgICAgIHVzaW5nIExvZ1JlY29yZC5nZXRNZXNzYWdlKCkuIElmIHRoZSBmb3JtYXR0aW5nIHN0cmluZyB1c2VzIHRoZQ0KICAgICAgICB0aW1lIChhcyBkZXRlcm1pbmVkIGJ5IGEgY2FsbCB0byB1c2VzVGltZSgpLCBmb3JtYXRUaW1lKCkgaXMNCiAgICAgICAgY2FsbGVkIHRvIGZvcm1hdCB0aGUgZXZlbnQgdGltZS4gSWYgdGhlcmUgaXMgZXhjZXB0aW9uIGluZm9ybWF0aW9uLA0KICAgICAgICBpdCBpcyBmb3JtYXR0ZWQgdXNpbmcgZm9ybWF0RXhjZXB0aW9uKCkgYW5kIGFwcGVuZGVkIHRvIHRoZSBtZXNzYWdlLg0KICAgICAgICAiIiINCiAgICAgICAgcmVjb3JkLm1lc3NhZ2UgPSByZWNvcmQuZ2V0TWVzc2FnZSgpDQogICAgICAgIGlmIHNlbGYudXNlc1RpbWUoKToNCiAgICAgICAgICAgIHJlY29yZC5hc2N0aW1lID0gc2VsZi5mb3JtYXRUaW1lKHJlY29yZCwgc2VsZi5kYXRlZm10KQ0KICAgICAgICBzID0gc2VsZi5mb3JtYXRNZXNzYWdlKHJlY29yZCkNCiAgICAgICAgaWYgcmVjb3JkLmV4Y19pbmZvOg0KICAgICAgICAgICAgIyBDYWNoZSB0aGUgdHJhY2ViYWNrIHRleHQgdG8gYXZvaWQgY29udmVydGluZyBpdCBtdWx0aXBsZSB0aW1lcw0KICAgICAgICAgICAgIyAoaXQncyBjb25zdGFudCBhbnl3YXkpDQogICAgICAgICAgICBpZiBub3QgcmVjb3JkLmV4Y190ZXh0Og0KICAgICAgICAgICAgICAgIHJlY29yZC5leGNfdGV4dCA9IHNlbGYuZm9ybWF0RXhjZXB0aW9uKHJlY29yZC5leGNfaW5mbykNCiAgICAgICAgaWYgcmVjb3JkLmV4Y190ZXh0Og0KICAgICAgICAgICAgaWYgc1stMTpdICE9ICJcbiI6DQogICAgICAgICAgICAgICAgcyA9IHMgKyAiXG4iDQogICAgICAgICAgICBzID0gcyArIHJlY29yZC5leGNfdGV4dA0KICAgICAgICBpZiByZWNvcmQuc3RhY2tfaW5mbzoNCiAgICAgICAgICAgIGlmIHNbLTE6XSAhPSAiXG4iOg0KICAgICAgICAgICAgICAgIHMgPSBzICsgIlxuIg0KICAgICAgICAgICAgcyA9IHMgKyBzZWxmLmZvcm1hdFN0YWNrKHJlY29yZC5zdGFja19pbmZvKQ0KICAgICAgICByZXR1cm4gcw0KDQojDQojICAgVGhlIGRlZmF1bHQgZm9ybWF0dGVyIHRvIHVzZSB3aGVuIG5vIG90aGVyIGlzIHNwZWNpZmllZA0KIw0KX2RlZmF1bHRGb3JtYXR0ZXIgPSBGb3JtYXR0ZXIoKQ0KDQpjbGFzcyBCdWZmZXJpbmdGb3JtYXR0ZXIob2JqZWN0KToNCiAgICAiIiINCiAgICBBIGZvcm1hdHRlciBzdWl0YWJsZSBmb3IgZm9ybWF0dGluZyBhIG51bWJlciBvZiByZWNvcmRzLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsaW5lZm10PU5vbmUpOg0KICAgICAgICAiIiINCiAgICAgICAgT3B0aW9uYWxseSBzcGVjaWZ5IGEgZm9ybWF0dGVyIHdoaWNoIHdpbGwgYmUgdXNlZCB0byBmb3JtYXQgZWFjaA0KICAgICAgICBpbmRpdmlkdWFsIHJlY29yZC4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIGxpbmVmbXQ6DQogICAgICAgICAgICBzZWxmLmxpbmVmbXQgPSBsaW5lZm10DQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLmxpbmVmbXQgPSBfZGVmYXVsdEZvcm1hdHRlcg0KDQogICAgZGVmIGZvcm1hdEhlYWRlcihzZWxmLCByZWNvcmRzKToNCiAgICAgICAgIiIiDQogICAgICAgIFJldHVybiB0aGUgaGVhZGVyIHN0cmluZyBmb3IgdGhlIHNwZWNpZmllZCByZWNvcmRzLg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuICIiDQoNCiAgICBkZWYgZm9ybWF0Rm9vdGVyKHNlbGYsIHJlY29yZHMpOg0KICAgICAgICAiIiINCiAgICAgICAgUmV0dXJuIHRoZSBmb290ZXIgc3RyaW5nIGZvciB0aGUgc3BlY2lmaWVkIHJlY29yZHMuDQogICAgICAgICIiIg0KICAgICAgICByZXR1cm4gIiINCg0KICAgIGRlZiBmb3JtYXQoc2VsZiwgcmVjb3Jkcyk6DQogICAgICAgICIiIg0KICAgICAgICBGb3JtYXQgdGhlIHNwZWNpZmllZCByZWNvcmRzIGFuZCByZXR1cm4gdGhlIHJlc3VsdCBhcyBhIHN0cmluZy4NCiAgICAgICAgIiIiDQogICAgICAgIHJ2ID0gIiINCiAgICAgICAgaWYgbGVuKHJlY29yZHMpID4gMDoNCiAgICAgICAgICAgIHJ2ID0gcnYgKyBzZWxmLmZvcm1hdEhlYWRlcihyZWNvcmRzKQ0KICAgICAgICAgICAgZm9yIHJlY29yZCBpbiByZWNvcmRzOg0KICAgICAgICAgICAgICAgIHJ2ID0gcnYgKyBzZWxmLmxpbmVmbXQuZm9ybWF0KHJlY29yZCkNCiAgICAgICAgICAgIHJ2ID0gcnYgKyBzZWxmLmZvcm1hdEZvb3RlcihyZWNvcmRzKQ0KICAgICAgICByZXR1cm4gcnYNCg0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KIyAgIEZpbHRlciBjbGFzc2VzIGFuZCBmdW5jdGlvbnMNCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KY2xhc3MgRmlsdGVyKG9iamVjdCk6DQogICAgIiIiDQogICAgRmlsdGVyIGluc3RhbmNlcyBhcmUgdXNlZCB0byBwZXJmb3JtIGFyYml0cmFyeSBmaWx0ZXJpbmcgb2YgTG9nUmVjb3Jkcy4NCg0KICAgIExvZ2dlcnMgYW5kIEhhbmRsZXJzIGNhbiBvcHRpb25hbGx5IHVzZSBGaWx0ZXIgaW5zdGFuY2VzIHRvIGZpbHRlcg0KICAgIHJlY29yZHMgYXMgZGVzaXJlZC4gVGhlIGJhc2UgZmlsdGVyIGNsYXNzIG9ubHkgYWxsb3dzIGV2ZW50cyB3aGljaCBhcmUNCiAgICBiZWxvdyBhIGNlcnRhaW4gcG9pbnQgaW4gdGhlIGxvZ2dlciBoaWVyYXJjaHkuIEZvciBleGFtcGxlLCBhIGZpbHRlcg0KICAgIGluaXRpYWxpemVkIHdpdGggIkEuQiIgd2lsbCBhbGxvdyBldmVudHMgbG9nZ2VkIGJ5IGxvZ2dlcnMgIkEuQiIsDQogICAgIkEuQi5DIiwgIkEuQi5DLkQiLCAiQS5CLkQiIGV0Yy4gYnV0IG5vdCAiQS5CQiIsICJCLkEuQiIgZXRjLiBJZg0KICAgIGluaXRpYWxpemVkIHdpdGggdGhlIGVtcHR5IHN0cmluZywgYWxsIGV2ZW50cyBhcmUgcGFzc2VkLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lPScnKToNCiAgICAgICAgIiIiDQogICAgICAgIEluaXRpYWxpemUgYSBmaWx0ZXIuDQoNCiAgICAgICAgSW5pdGlhbGl6ZSB3aXRoIHRoZSBuYW1lIG9mIHRoZSBsb2dnZXIgd2hpY2gsIHRvZ2V0aGVyIHdpdGggaXRzDQogICAgICAgIGNoaWxkcmVuLCB3aWxsIGhhdmUgaXRzIGV2ZW50cyBhbGxvd2VkIHRocm91Z2ggdGhlIGZpbHRlci4gSWYgbm8NCiAgICAgICAgbmFtZSBpcyBzcGVjaWZpZWQsIGFsbG93IGV2ZXJ5IGV2ZW50Lg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQ0KICAgICAgICBzZWxmLm5sZW4gPSBsZW4obmFtZSkNCg0KICAgIGRlZiBmaWx0ZXIoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIERldGVybWluZSBpZiB0aGUgc3BlY2lmaWVkIHJlY29yZCBpcyB0byBiZSBsb2dnZWQuDQoNCiAgICAgICAgSXMgdGhlIHNwZWNpZmllZCByZWNvcmQgdG8gYmUgbG9nZ2VkPyBSZXR1cm5zIDAgZm9yIG5vLCBub256ZXJvIGZvcg0KICAgICAgICB5ZXMuIElmIGRlZW1lZCBhcHByb3ByaWF0ZSwgdGhlIHJlY29yZCBtYXkgYmUgbW9kaWZpZWQgaW4tcGxhY2UuDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLm5sZW4gPT0gMDoNCiAgICAgICAgICAgIHJldHVybiBUcnVlDQogICAgICAgIGVsaWYgc2VsZi5uYW1lID09IHJlY29yZC5uYW1lOg0KICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICAgICAgZWxpZiByZWNvcmQubmFtZS5maW5kKHNlbGYubmFtZSwgMCwgc2VsZi5ubGVuKSAhPSAwOg0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgICAgIHJldHVybiAocmVjb3JkLm5hbWVbc2VsZi5ubGVuXSA9PSAiLiIpDQoNCmNsYXNzIEZpbHRlcmVyKG9iamVjdCk6DQogICAgIiIiDQogICAgQSBiYXNlIGNsYXNzIGZvciBsb2dnZXJzIGFuZCBoYW5kbGVycyB3aGljaCBhbGxvd3MgdGhlbSB0byBzaGFyZQ0KICAgIGNvbW1vbiBjb2RlLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIEluaXRpYWxpemUgdGhlIGxpc3Qgb2YgZmlsdGVycyB0byBiZSBhbiBlbXB0eSBsaXN0Lg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5maWx0ZXJzID0gW10NCg0KICAgIGRlZiBhZGRGaWx0ZXIoc2VsZiwgZmlsdGVyKToNCiAgICAgICAgIiIiDQogICAgICAgIEFkZCB0aGUgc3BlY2lmaWVkIGZpbHRlciB0byB0aGlzIGhhbmRsZXIuDQogICAgICAgICIiIg0KICAgICAgICBpZiBub3QgKGZpbHRlciBpbiBzZWxmLmZpbHRlcnMpOg0KICAgICAgICAgICAgc2VsZi5maWx0ZXJzLmFwcGVuZChmaWx0ZXIpDQoNCiAgICBkZWYgcmVtb3ZlRmlsdGVyKHNlbGYsIGZpbHRlcik6DQogICAgICAgICIiIg0KICAgICAgICBSZW1vdmUgdGhlIHNwZWNpZmllZCBmaWx0ZXIgZnJvbSB0aGlzIGhhbmRsZXIuDQogICAgICAgICIiIg0KICAgICAgICBpZiBmaWx0ZXIgaW4gc2VsZi5maWx0ZXJzOg0KICAgICAgICAgICAgc2VsZi5maWx0ZXJzLnJlbW92ZShmaWx0ZXIpDQoNCiAgICBkZWYgZmlsdGVyKHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBEZXRlcm1pbmUgaWYgYSByZWNvcmQgaXMgbG9nZ2FibGUgYnkgY29uc3VsdGluZyBhbGwgdGhlIGZpbHRlcnMuDQoNCiAgICAgICAgVGhlIGRlZmF1bHQgaXMgdG8gYWxsb3cgdGhlIHJlY29yZCB0byBiZSBsb2dnZWQ7IGFueSBmaWx0ZXIgY2FuIHZldG8NCiAgICAgICAgdGhpcyBhbmQgdGhlIHJlY29yZCBpcyB0aGVuIGRyb3BwZWQuIFJldHVybnMgYSB6ZXJvIHZhbHVlIGlmIGEgcmVjb3JkDQogICAgICAgIGlzIHRvIGJlIGRyb3BwZWQsIGVsc2Ugbm9uLXplcm8uDQoNCiAgICAgICAgLi4gdmVyc2lvbmNoYW5nZWQ6IDMuMg0KDQogICAgICAgICAgIEFsbG93IGZpbHRlcnMgdG8gYmUganVzdCBjYWxsYWJsZXMuDQogICAgICAgICIiIg0KICAgICAgICBydiA9IFRydWUNCiAgICAgICAgZm9yIGYgaW4gc2VsZi5maWx0ZXJzOg0KICAgICAgICAgICAgaWYgaGFzYXR0cihmLCAnZmlsdGVyJyk6DQogICAgICAgICAgICAgICAgcmVzdWx0ID0gZi5maWx0ZXIocmVjb3JkKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICByZXN1bHQgPSBmKHJlY29yZCkgIyBhc3N1bWUgY2FsbGFibGUgLSB3aWxsIHJhaXNlIGlmIG5vdA0KICAgICAgICAgICAgaWYgbm90IHJlc3VsdDoNCiAgICAgICAgICAgICAgICBydiA9IEZhbHNlDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgcmV0dXJuIHJ2DQoNCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiMgICBIYW5kbGVyIGNsYXNzZXMgYW5kIGZ1bmN0aW9ucw0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpfaGFuZGxlcnMgPSB3ZWFrcmVmLldlYWtWYWx1ZURpY3Rpb25hcnkoKSAgI21hcCBvZiBoYW5kbGVyIG5hbWVzIHRvIGhhbmRsZXJzDQpfaGFuZGxlckxpc3QgPSBbXSAjIGFkZGVkIHRvIGFsbG93IGhhbmRsZXJzIHRvIGJlIHJlbW92ZWQgaW4gcmV2ZXJzZSBvZiBvcmRlciBpbml0aWFsaXplZA0KDQpkZWYgX3JlbW92ZUhhbmRsZXJSZWYod3IpOg0KICAgICIiIg0KICAgIFJlbW92ZSBhIGhhbmRsZXIgcmVmZXJlbmNlIGZyb20gdGhlIGludGVybmFsIGNsZWFudXAgbGlzdC4NCiAgICAiIiINCiAgICAjIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBkdXJpbmcgbW9kdWxlIHRlYXJkb3duLCB3aGVuIGdsb2JhbHMgYXJlDQogICAgIyBzZXQgdG8gTm9uZS4gSWYgX2FjcXVpcmVMb2NrIGlzIE5vbmUsIGFzc3VtZSB0aGlzIGlzIHRoZSBjYXNlIGFuZCBkbw0KICAgICMgbm90aGluZy4NCiAgICBpZiBfYWNxdWlyZUxvY2sgaXMgbm90IE5vbmU6DQogICAgICAgIF9hY3F1aXJlTG9jaygpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGlmIHdyIGluIF9oYW5kbGVyTGlzdDoNCiAgICAgICAgICAgICAgICBfaGFuZGxlckxpc3QucmVtb3ZlKHdyKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgX3JlbGVhc2VMb2NrKCkNCg0KZGVmIF9hZGRIYW5kbGVyUmVmKGhhbmRsZXIpOg0KICAgICIiIg0KICAgIEFkZCBhIGhhbmRsZXIgdG8gdGhlIGludGVybmFsIGNsZWFudXAgbGlzdCB1c2luZyBhIHdlYWsgcmVmZXJlbmNlLg0KICAgICIiIg0KICAgIF9hY3F1aXJlTG9jaygpDQogICAgdHJ5Og0KICAgICAgICBfaGFuZGxlckxpc3QuYXBwZW5kKHdlYWtyZWYucmVmKGhhbmRsZXIsIF9yZW1vdmVIYW5kbGVyUmVmKSkNCiAgICBmaW5hbGx5Og0KICAgICAgICBfcmVsZWFzZUxvY2soKQ0KDQpjbGFzcyBIYW5kbGVyKEZpbHRlcmVyKToNCiAgICAiIiINCiAgICBIYW5kbGVyIGluc3RhbmNlcyBkaXNwYXRjaCBsb2dnaW5nIGV2ZW50cyB0byBzcGVjaWZpYyBkZXN0aW5hdGlvbnMuDQoNCiAgICBUaGUgYmFzZSBoYW5kbGVyIGNsYXNzLiBBY3RzIGFzIGEgcGxhY2Vob2xkZXIgd2hpY2ggZGVmaW5lcyB0aGUgSGFuZGxlcg0KICAgIGludGVyZmFjZS4gSGFuZGxlcnMgY2FuIG9wdGlvbmFsbHkgdXNlIEZvcm1hdHRlciBpbnN0YW5jZXMgdG8gZm9ybWF0DQogICAgcmVjb3JkcyBhcyBkZXNpcmVkLiBCeSBkZWZhdWx0LCBubyBmb3JtYXR0ZXIgaXMgc3BlY2lmaWVkOyBpbiB0aGlzIGNhc2UsDQogICAgdGhlICdyYXcnIG1lc3NhZ2UgYXMgZGV0ZXJtaW5lZCBieSByZWNvcmQubWVzc2FnZSBpcyBsb2dnZWQuDQogICAgIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGxldmVsPU5PVFNFVCk6DQogICAgICAgICIiIg0KICAgICAgICBJbml0aWFsaXplcyB0aGUgaW5zdGFuY2UgLSBiYXNpY2FsbHkgc2V0dGluZyB0aGUgZm9ybWF0dGVyIHRvIE5vbmUNCiAgICAgICAgYW5kIHRoZSBmaWx0ZXIgbGlzdCB0byBlbXB0eS4NCiAgICAgICAgIiIiDQogICAgICAgIEZpbHRlcmVyLl9faW5pdF9fKHNlbGYpDQogICAgICAgIHNlbGYuX25hbWUgPSBOb25lDQogICAgICAgIHNlbGYubGV2ZWwgPSBfY2hlY2tMZXZlbChsZXZlbCkNCiAgICAgICAgc2VsZi5mb3JtYXR0ZXIgPSBOb25lDQogICAgICAgICMgQWRkIHRoZSBoYW5kbGVyIHRvIHRoZSBnbG9iYWwgX2hhbmRsZXJMaXN0IChmb3IgY2xlYW51cCBvbiBzaHV0ZG93bikNCiAgICAgICAgX2FkZEhhbmRsZXJSZWYoc2VsZikNCiAgICAgICAgc2VsZi5jcmVhdGVMb2NrKCkNCg0KICAgIGRlZiBnZXRfbmFtZShzZWxmKToNCiAgICAgICAgcmV0dXJuIHNlbGYuX25hbWUNCg0KICAgIGRlZiBzZXRfbmFtZShzZWxmLCBuYW1lKToNCiAgICAgICAgX2FjcXVpcmVMb2NrKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWYgc2VsZi5fbmFtZSBpbiBfaGFuZGxlcnM6DQogICAgICAgICAgICAgICAgZGVsIF9oYW5kbGVyc1tzZWxmLl9uYW1lXQ0KICAgICAgICAgICAgc2VsZi5fbmFtZSA9IG5hbWUNCiAgICAgICAgICAgIGlmIG5hbWU6DQogICAgICAgICAgICAgICAgX2hhbmRsZXJzW25hbWVdID0gc2VsZg0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgX3JlbGVhc2VMb2NrKCkNCg0KICAgIG5hbWUgPSBwcm9wZXJ0eShnZXRfbmFtZSwgc2V0X25hbWUpDQoNCiAgICBkZWYgY3JlYXRlTG9jayhzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIEFjcXVpcmUgYSB0aHJlYWQgbG9jayBmb3Igc2VyaWFsaXppbmcgYWNjZXNzIHRvIHRoZSB1bmRlcmx5aW5nIEkvTy4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIHRocmVhZGluZzoNCiAgICAgICAgICAgIHNlbGYubG9jayA9IHRocmVhZGluZy5STG9jaygpDQogICAgICAgIGVsc2U6ICNwcmFnbWE6IG5vIGNvdmVyDQogICAgICAgICAgICBzZWxmLmxvY2sgPSBOb25lDQoNCiAgICBkZWYgYWNxdWlyZShzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIEFjcXVpcmUgdGhlIEkvTyB0aHJlYWQgbG9jay4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIHNlbGYubG9jazoNCiAgICAgICAgICAgIHNlbGYubG9jay5hY3F1aXJlKCkNCg0KICAgIGRlZiByZWxlYXNlKHNlbGYpOg0KICAgICAgICAiIiINCiAgICAgICAgUmVsZWFzZSB0aGUgSS9PIHRocmVhZCBsb2NrLg0KICAgICAgICAiIiINCiAgICAgICAgaWYgc2VsZi5sb2NrOg0KICAgICAgICAgICAgc2VsZi5sb2NrLnJlbGVhc2UoKQ0KDQogICAgZGVmIHNldExldmVsKHNlbGYsIGxldmVsKToNCiAgICAgICAgIiIiDQogICAgICAgIFNldCB0aGUgbG9nZ2luZyBsZXZlbCBvZiB0aGlzIGhhbmRsZXIuICBsZXZlbCBtdXN0IGJlIGFuIGludCBvciBhIHN0ci4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYubGV2ZWwgPSBfY2hlY2tMZXZlbChsZXZlbCkNCg0KICAgIGRlZiBmb3JtYXQoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIEZvcm1hdCB0aGUgc3BlY2lmaWVkIHJlY29yZC4NCg0KICAgICAgICBJZiBhIGZvcm1hdHRlciBpcyBzZXQsIHVzZSBpdC4gT3RoZXJ3aXNlLCB1c2UgdGhlIGRlZmF1bHQgZm9ybWF0dGVyDQogICAgICAgIGZvciB0aGUgbW9kdWxlLg0KICAgICAgICAiIiINCiAgICAgICAgaWYgc2VsZi5mb3JtYXR0ZXI6DQogICAgICAgICAgICBmbXQgPSBzZWxmLmZvcm1hdHRlcg0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgZm10ID0gX2RlZmF1bHRGb3JtYXR0ZXINCiAgICAgICAgcmV0dXJuIGZtdC5mb3JtYXQocmVjb3JkKQ0KDQogICAgZGVmIGVtaXQoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIERvIHdoYXRldmVyIGl0IHRha2VzIHRvIGFjdHVhbGx5IGxvZyB0aGUgc3BlY2lmaWVkIGxvZ2dpbmcgcmVjb3JkLg0KDQogICAgICAgIFRoaXMgdmVyc2lvbiBpcyBpbnRlbmRlZCB0byBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzIGFuZCBzbw0KICAgICAgICByYWlzZXMgYSBOb3RJbXBsZW1lbnRlZEVycm9yLg0KICAgICAgICAiIiINCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcignZW1pdCBtdXN0IGJlIGltcGxlbWVudGVkICcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnkgSGFuZGxlciBzdWJjbGFzc2VzJykNCg0KICAgIGRlZiBoYW5kbGUoc2VsZiwgcmVjb3JkKToNCiAgICAgICAgIiIiDQogICAgICAgIENvbmRpdGlvbmFsbHkgZW1pdCB0aGUgc3BlY2lmaWVkIGxvZ2dpbmcgcmVjb3JkLg0KDQogICAgICAgIEVtaXNzaW9uIGRlcGVuZHMgb24gZmlsdGVycyB3aGljaCBtYXkgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBoYW5kbGVyLg0KICAgICAgICBXcmFwIHRoZSBhY3R1YWwgZW1pc3Npb24gb2YgdGhlIHJlY29yZCB3aXRoIGFjcXVpc2l0aW9uL3JlbGVhc2Ugb2YNCiAgICAgICAgdGhlIEkvTyB0aHJlYWQgbG9jay4gUmV0dXJucyB3aGV0aGVyIHRoZSBmaWx0ZXIgcGFzc2VkIHRoZSByZWNvcmQgZm9yDQogICAgICAgIGVtaXNzaW9uLg0KICAgICAgICAiIiINCiAgICAgICAgcnYgPSBzZWxmLmZpbHRlcihyZWNvcmQpDQogICAgICAgIGlmIHJ2Og0KICAgICAgICAgICAgc2VsZi5hY3F1aXJlKCkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBzZWxmLmVtaXQocmVjb3JkKQ0KICAgICAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgICAgICBzZWxmLnJlbGVhc2UoKQ0KICAgICAgICByZXR1cm4gcnYNCg0KICAgIGRlZiBzZXRGb3JtYXR0ZXIoc2VsZiwgZm10KToNCiAgICAgICAgIiIiDQogICAgICAgIFNldCB0aGUgZm9ybWF0dGVyIGZvciB0aGlzIGhhbmRsZXIuDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmZvcm1hdHRlciA9IGZtdA0KDQogICAgZGVmIGZsdXNoKHNlbGYpOg0KICAgICAgICAiIiINCiAgICAgICAgRW5zdXJlIGFsbCBsb2dnaW5nIG91dHB1dCBoYXMgYmVlbiBmbHVzaGVkLg0KDQogICAgICAgIFRoaXMgdmVyc2lvbiBkb2VzIG5vdGhpbmcgYW5kIGlzIGludGVuZGVkIHRvIGJlIGltcGxlbWVudGVkIGJ5DQogICAgICAgIHN1YmNsYXNzZXMuDQogICAgICAgICIiIg0KICAgICAgICBwYXNzDQoNCiAgICBkZWYgY2xvc2Uoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBUaWR5IHVwIGFueSByZXNvdXJjZXMgdXNlZCBieSB0aGUgaGFuZGxlci4NCg0KICAgICAgICBUaGlzIHZlcnNpb24gcmVtb3ZlcyB0aGUgaGFuZGxlciBmcm9tIGFuIGludGVybmFsIG1hcCBvZiBoYW5kbGVycywNCiAgICAgICAgX2hhbmRsZXJzLCB3aGljaCBpcyB1c2VkIGZvciBoYW5kbGVyIGxvb2t1cCBieSBuYW1lLiBTdWJjbGFzc2VzDQogICAgICAgIHNob3VsZCBlbnN1cmUgdGhhdCB0aGlzIGdldHMgY2FsbGVkIGZyb20gb3ZlcnJpZGRlbiBjbG9zZSgpDQogICAgICAgIG1ldGhvZHMuDQogICAgICAgICIiIg0KICAgICAgICAjZ2V0IHRoZSBtb2R1bGUgZGF0YSBsb2NrLCBhcyB3ZSdyZSB1cGRhdGluZyBhIHNoYXJlZCBzdHJ1Y3R1cmUuDQogICAgICAgIF9hY3F1aXJlTG9jaygpDQogICAgICAgIHRyeTogICAgI3VubGlrZWx5IHRvIHJhaXNlIGFuIGV4Y2VwdGlvbiwgYnV0IHlvdSBuZXZlciBrbm93Li4uDQogICAgICAgICAgICBpZiBzZWxmLl9uYW1lIGFuZCBzZWxmLl9uYW1lIGluIF9oYW5kbGVyczoNCiAgICAgICAgICAgICAgICBkZWwgX2hhbmRsZXJzW3NlbGYuX25hbWVdDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBfcmVsZWFzZUxvY2soKQ0KDQogICAgZGVmIGhhbmRsZUVycm9yKHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIg0KICAgICAgICBIYW5kbGUgZXJyb3JzIHdoaWNoIG9jY3VyIGR1cmluZyBhbiBlbWl0KCkgY2FsbC4NCg0KICAgICAgICBUaGlzIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIGZyb20gaGFuZGxlcnMgd2hlbiBhbiBleGNlcHRpb24gaXMNCiAgICAgICAgZW5jb3VudGVyZWQgZHVyaW5nIGFuIGVtaXQoKSBjYWxsLiBJZiByYWlzZUV4Y2VwdGlvbnMgaXMgZmFsc2UsDQogICAgICAgIGV4Y2VwdGlvbnMgZ2V0IHNpbGVudGx5IGlnbm9yZWQuIFRoaXMgaXMgd2hhdCBpcyBtb3N0bHkgd2FudGVkDQogICAgICAgIGZvciBhIGxvZ2dpbmcgc3lzdGVtIC0gbW9zdCB1c2VycyB3aWxsIG5vdCBjYXJlIGFib3V0IGVycm9ycyBpbg0KICAgICAgICB0aGUgbG9nZ2luZyBzeXN0ZW0sIHRoZXkgYXJlIG1vcmUgaW50ZXJlc3RlZCBpbiBhcHBsaWNhdGlvbiBlcnJvcnMuDQogICAgICAgIFlvdSBjb3VsZCwgaG93ZXZlciwgcmVwbGFjZSB0aGlzIHdpdGggYSBjdXN0b20gaGFuZGxlciBpZiB5b3Ugd2lzaC4NCiAgICAgICAgVGhlIHJlY29yZCB3aGljaCB3YXMgYmVpbmcgcHJvY2Vzc2VkIGlzIHBhc3NlZCBpbiB0byB0aGlzIG1ldGhvZC4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIHJhaXNlRXhjZXB0aW9ucyBhbmQgc3lzLnN0ZGVycjogICMgc2VlIGlzc3VlIDEzODA3DQogICAgICAgICAgICBlaSA9IHN5cy5leGNfaW5mbygpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4Y2VwdGlvbihlaVswXSwgZWlbMV0sIGVpWzJdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTm9uZSwgc3lzLnN0ZGVycikNCiAgICAgICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKCdMb2dnZWQgZnJvbSBmaWxlICVzLCBsaW5lICVzXG4nICUgKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkLmZpbGVuYW1lLCByZWNvcmQubGluZW5vKSkNCiAgICAgICAgICAgIGV4Y2VwdCBJT0Vycm9yOiAjcHJhZ21hOiBubyBjb3Zlcg0KICAgICAgICAgICAgICAgIHBhc3MgICAgIyBzZWUgaXNzdWUgNTk3MQ0KICAgICAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgICAgICBkZWwgZWkNCg0KY2xhc3MgU3RyZWFtSGFuZGxlcihIYW5kbGVyKToNCiAgICAiIiINCiAgICBBIGhhbmRsZXIgY2xhc3Mgd2hpY2ggd3JpdGVzIGxvZ2dpbmcgcmVjb3JkcywgYXBwcm9wcmlhdGVseSBmb3JtYXR0ZWQsDQogICAgdG8gYSBzdHJlYW0uIE5vdGUgdGhhdCB0aGlzIGNsYXNzIGRvZXMgbm90IGNsb3NlIHRoZSBzdHJlYW0sIGFzDQogICAgc3lzLnN0ZG91dCBvciBzeXMuc3RkZXJyIG1heSBiZSB1c2VkLg0KICAgICIiIg0KDQogICAgdGVybWluYXRvciA9ICdcbicNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzdHJlYW09Tm9uZSk6DQogICAgICAgICIiIg0KICAgICAgICBJbml0aWFsaXplIHRoZSBoYW5kbGVyLg0KDQogICAgICAgIElmIHN0cmVhbSBpcyBub3Qgc3BlY2lmaWVkLCBzeXMuc3RkZXJyIGlzIHVzZWQuDQogICAgICAgICIiIg0KICAgICAgICBIYW5kbGVyLl9faW5pdF9fKHNlbGYpDQogICAgICAgIGlmIHN0cmVhbSBpcyBOb25lOg0KICAgICAgICAgICAgc3RyZWFtID0gc3lzLnN0ZGVycg0KICAgICAgICBzZWxmLnN0cmVhbSA9IHN0cmVhbQ0KDQogICAgZGVmIGZsdXNoKHNlbGYpOg0KICAgICAgICAiIiINCiAgICAgICAgRmx1c2hlcyB0aGUgc3RyZWFtLg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5hY3F1aXJlKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWYgc2VsZi5zdHJlYW0gYW5kIGhhc2F0dHIoc2VsZi5zdHJlYW0sICJmbHVzaCIpOg0KICAgICAgICAgICAgICAgIHNlbGYuc3RyZWFtLmZsdXNoKCkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIHNlbGYucmVsZWFzZSgpDQoNCiAgICBkZWYgZW1pdChzZWxmLCByZWNvcmQpOg0KICAgICAgICAiIiINCiAgICAgICAgRW1pdCBhIHJlY29yZC4NCg0KICAgICAgICBJZiBhIGZvcm1hdHRlciBpcyBzcGVjaWZpZWQsIGl0IGlzIHVzZWQgdG8gZm9ybWF0IHRoZSByZWNvcmQuDQogICAgICAgIFRoZSByZWNvcmQgaXMgdGhlbiB3cml0dGVuIHRvIHRoZSBzdHJlYW0gd2l0aCBhIHRyYWlsaW5nIG5ld2xpbmUuICBJZg0KICAgICAgICBleGNlcHRpb24gaW5mb3JtYXRpb24gaXMgcHJlc2VudCwgaXQgaXMgZm9ybWF0dGVkIHVzaW5nDQogICAgICAgIHRyYWNlYmFjay5wcmludF9leGNlcHRpb24gYW5kIGFwcGVuZGVkIHRvIHRoZSBzdHJlYW0uICBJZiB0aGUgc3RyZWFtDQogICAgICAgIGhhcyBhbiAnZW5jb2RpbmcnIGF0dHJpYnV0ZSwgaXQgaXMgdXNlZCB0byBkZXRlcm1pbmUgaG93IHRvIGRvIHRoZQ0KICAgICAgICBvdXRwdXQgdG8gdGhlIHN0cmVhbS4NCiAgICAgICAgIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIG1zZyA9IHNlbGYuZm9ybWF0KHJlY29yZCkNCiAgICAgICAgICAgIHN0cmVhbSA9IHNlbGYuc3RyZWFtDQogICAgICAgICAgICBzdHJlYW0ud3JpdGUobXNnKQ0KICAgICAgICAgICAgc3RyZWFtLndyaXRlKHNlbGYudGVybWluYXRvcikNCiAgICAgICAgICAgIHNlbGYuZmx1c2goKQ0KICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LCBTeXN0ZW1FeGl0KTogI3ByYWdtYTogbm8gY292ZXINCiAgICAgICAgICAgIHJhaXNlDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHNlbGYuaGFuZGxlRXJyb3IocmVjb3JkKQ0KDQpjbGFzcyBGaWxlSGFuZGxlcihTdHJlYW1IYW5kbGVyKToNCiAgICAiIiINCiAgICBBIGhhbmRsZXIgY2xhc3Mgd2hpY2ggd3JpdGVzIGZvcm1hdHRlZCBsb2dnaW5nIHJlY29yZHMgdG8gZGlzayBmaWxlcy4NCiAgICAiIiINCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlsZW5hbWUsIG1vZGU9J2EnLCBlbmNvZGluZz1Ob25lLCBkZWxheT1GYWxzZSk6DQogICAgICAgICIiIg0KICAgICAgICBPcGVuIHRoZSBzcGVjaWZpZWQgZmlsZSBhbmQgdXNlIGl0IGFzIHRoZSBzdHJlYW0gZm9yIGxvZ2dpbmcuDQogICAgICAgICIiIg0KICAgICAgICAja2VlcCB0aGUgYWJzb2x1dGUgcGF0aCwgb3RoZXJ3aXNlIGRlcml2ZWQgY2xhc3NlcyB3aGljaCB1c2UgdGhpcw0KICAgICAgICAjbWF5IGNvbWUgYSBjcm9wcGVyIHdoZW4gdGhlIGN1cnJlbnQgZGlyZWN0b3J5IGNoYW5nZXMNCiAgICAgICAgc2VsZi5iYXNlRmlsZW5hbWUgPSBvcy5wYXRoLmFic3BhdGgoZmlsZW5hbWUpDQogICAgICAgIHNlbGYubW9kZSA9IG1vZGUNCiAgICAgICAgc2VsZi5lbmNvZGluZyA9IGVuY29kaW5nDQogICAgICAgIGlmIGRlbGF5Og0KICAgICAgICAgICAgI1dlIGRvbid0IG9wZW4gdGhlIHN0cmVhbSwgYnV0IHdlIHN0aWxsIG5lZWQgdG8gY2FsbCB0aGUNCiAgICAgICAgICAgICNIYW5kbGVyIGNvbnN0cnVjdG9yIHRvIHNldCBsZXZlbCwgZm9ybWF0dGVyLCBsb2NrIGV0Yy4NCiAgICAgICAgICAgIEhhbmRsZXIuX19pbml0X18oc2VsZikNCiAgICAgICAgICAgIHNlbGYuc3RyZWFtID0gTm9uZQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgU3RyZWFtSGFuZGxlci5fX2luaXRfXyhzZWxmLCBzZWxmLl9vcGVuKCkpDQoNCiAgICBkZWYgY2xvc2Uoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBDbG9zZXMgdGhlIHN0cmVhbS4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuYWNxdWlyZSgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGlmIHNlbGYuc3RyZWFtOg0KICAgICAgICAgICAgICAgIHNlbGYuZmx1c2goKQ0KICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIoc2VsZi5zdHJlYW0sICJjbG9zZSIpOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLnN0cmVhbS5jbG9zZSgpDQogICAgICAgICAgICAgICAgU3RyZWFtSGFuZGxlci5jbG9zZShzZWxmKQ0KICAgICAgICAgICAgICAgIHNlbGYuc3RyZWFtID0gTm9uZQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgc2VsZi5yZWxlYXNlKCkNCg0KICAgIGRlZiBfb3BlbihzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIE9wZW4gdGhlIGN1cnJlbnQgYmFzZSBmaWxlIHdpdGggdGhlIChvcmlnaW5hbCkgbW9kZSBhbmQgZW5jb2RpbmcuDQogICAgICAgIFJldHVybiB0aGUgcmVzdWx0aW5nIHN0cmVhbS4NCiAgICAgICAgIiIiDQogICAgICAgIHJldHVybiBvcGVuKHNlbGYuYmFzZUZpbGVuYW1lLCBzZWxmLm1vZGUsIGVuY29kaW5nPXNlbGYuZW5jb2RpbmcpDQoNCiAgICBkZWYgZW1pdChzZWxmLCByZWNvcmQpOg0KICAgICAgICAiIiINCiAgICAgICAgRW1pdCBhIHJlY29yZC4NCg0KICAgICAgICBJZiB0aGUgc3RyZWFtIHdhcyBub3Qgb3BlbmVkIGJlY2F1c2UgJ2RlbGF5JyB3YXMgc3BlY2lmaWVkIGluIHRoZQ0KICAgICAgICBjb25zdHJ1Y3Rvciwgb3BlbiBpdCBiZWZvcmUgY2FsbGluZyB0aGUgc3VwZXJjbGFzcydzIGVtaXQuDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLnN0cmVhbSBpcyBOb25lOg0KICAgICAgICAgICAgc2VsZi5zdHJlYW0gPSBzZWxmLl9vcGVuKCkNCiAgICAgICAgU3RyZWFtSGFuZGxlci5lbWl0KHNlbGYsIHJlY29yZCkNCg0KY2xhc3MgX1N0ZGVyckhhbmRsZXIoU3RyZWFtSGFuZGxlcik6DQogICAgIiIiDQogICAgVGhpcyBjbGFzcyBpcyBsaWtlIGEgU3RyZWFtSGFuZGxlciB1c2luZyBzeXMuc3RkZXJyLCBidXQgYWx3YXlzIHVzZXMNCiAgICB3aGF0ZXZlciBzeXMuc3RkZXJyIGlzIGN1cnJlbnRseSBzZXQgdG8gcmF0aGVyIHRoYW4gdGhlIHZhbHVlIG9mDQogICAgc3lzLnN0ZGVyciBhdCBoYW5kbGVyIGNvbnN0cnVjdGlvbiB0aW1lLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsZXZlbD1OT1RTRVQpOg0KICAgICAgICAiIiINCiAgICAgICAgSW5pdGlhbGl6ZSB0aGUgaGFuZGxlci4NCiAgICAgICAgIiIiDQogICAgICAgIEhhbmRsZXIuX19pbml0X18oc2VsZiwgbGV2ZWwpDQoNCiAgICBAcHJvcGVydHkNCiAgICBkZWYgc3RyZWFtKHNlbGYpOg0KICAgICAgICByZXR1cm4gc3lzLnN0ZGVycg0KDQoNCl9kZWZhdWx0TGFzdFJlc29ydCA9IF9TdGRlcnJIYW5kbGVyKFdBUk5JTkcpDQpsYXN0UmVzb3J0ID0gX2RlZmF1bHRMYXN0UmVzb3J0DQoNCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiMgICBNYW5hZ2VyIGNsYXNzZXMgYW5kIGZ1bmN0aW9ucw0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpjbGFzcyBQbGFjZUhvbGRlcihvYmplY3QpOg0KICAgICIiIg0KICAgIFBsYWNlSG9sZGVyIGluc3RhbmNlcyBhcmUgdXNlZCBpbiB0aGUgTWFuYWdlciBsb2dnZXIgaGllcmFyY2h5IHRvIHRha2UNCiAgICB0aGUgcGxhY2Ugb2Ygbm9kZXMgZm9yIHdoaWNoIG5vIGxvZ2dlcnMgaGF2ZSBiZWVuIGRlZmluZWQuIFRoaXMgY2xhc3MgaXMNCiAgICBpbnRlbmRlZCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkgYW5kIG5vdCBhcyBwYXJ0IG9mIHRoZSBwdWJsaWMgQVBJLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhbG9nZ2VyKToNCiAgICAgICAgIiIiDQogICAgICAgIEluaXRpYWxpemUgd2l0aCB0aGUgc3BlY2lmaWVkIGxvZ2dlciBiZWluZyBhIGNoaWxkIG9mIHRoaXMgcGxhY2Vob2xkZXIuDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmxvZ2dlck1hcCA9IHsgYWxvZ2dlciA6IE5vbmUgfQ0KDQogICAgZGVmIGFwcGVuZChzZWxmLCBhbG9nZ2VyKToNCiAgICAgICAgIiIiDQogICAgICAgIEFkZCB0aGUgc3BlY2lmaWVkIGxvZ2dlciBhcyBhIGNoaWxkIG9mIHRoaXMgcGxhY2Vob2xkZXIuDQogICAgICAgICIiIg0KICAgICAgICBpZiBhbG9nZ2VyIG5vdCBpbiBzZWxmLmxvZ2dlck1hcDoNCiAgICAgICAgICAgIHNlbGYubG9nZ2VyTWFwW2Fsb2dnZXJdID0gTm9uZQ0KDQojDQojICAgRGV0ZXJtaW5lIHdoaWNoIGNsYXNzIHRvIHVzZSB3aGVuIGluc3RhbnRpYXRpbmcgbG9nZ2Vycy4NCiMNCl9sb2dnZXJDbGFzcyA9IE5vbmUNCg0KZGVmIHNldExvZ2dlckNsYXNzKGtsYXNzKToNCiAgICAiIiINCiAgICBTZXQgdGhlIGNsYXNzIHRvIGJlIHVzZWQgd2hlbiBpbnN0YW50aWF0aW5nIGEgbG9nZ2VyLiBUaGUgY2xhc3Mgc2hvdWxkDQogICAgZGVmaW5lIF9faW5pdF9fKCkgc3VjaCB0aGF0IG9ubHkgYSBuYW1lIGFyZ3VtZW50IGlzIHJlcXVpcmVkLCBhbmQgdGhlDQogICAgX19pbml0X18oKSBzaG91bGQgY2FsbCBMb2dnZXIuX19pbml0X18oKQ0KICAgICIiIg0KICAgIGlmIGtsYXNzICE9IExvZ2dlcjoNCiAgICAgICAgaWYgbm90IGlzc3ViY2xhc3Moa2xhc3MsIExvZ2dlcik6DQogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImxvZ2dlciBub3QgZGVyaXZlZCBmcm9tIGxvZ2dpbmcuTG9nZ2VyOiAiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBrbGFzcy5fX25hbWVfXykNCiAgICBnbG9iYWwgX2xvZ2dlckNsYXNzDQogICAgX2xvZ2dlckNsYXNzID0ga2xhc3MNCg0KZGVmIGdldExvZ2dlckNsYXNzKCk6DQogICAgIiIiDQogICAgUmV0dXJuIHRoZSBjbGFzcyB0byBiZSB1c2VkIHdoZW4gaW5zdGFudGlhdGluZyBhIGxvZ2dlci4NCiAgICAiIiINCg0KICAgIHJldHVybiBfbG9nZ2VyQ2xhc3MNCg0KY2xhc3MgTWFuYWdlcihvYmplY3QpOg0KICAgICIiIg0KICAgIFRoZXJlIGlzIFt1bmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlc10ganVzdCBvbmUgTWFuYWdlciBpbnN0YW5jZSwgd2hpY2gNCiAgICBob2xkcyB0aGUgaGllcmFyY2h5IG9mIGxvZ2dlcnMuDQogICAgIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIHJvb3Rub2RlKToNCiAgICAgICAgIiIiDQogICAgICAgIEluaXRpYWxpemUgdGhlIG1hbmFnZXIgd2l0aCB0aGUgcm9vdCBub2RlIG9mIHRoZSBsb2dnZXIgaGllcmFyY2h5Lg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5yb290ID0gcm9vdG5vZGUNCiAgICAgICAgc2VsZi5kaXNhYmxlID0gMA0KICAgICAgICBzZWxmLmVtaXR0ZWROb0hhbmRsZXJXYXJuaW5nID0gRmFsc2UNCiAgICAgICAgc2VsZi5sb2dnZXJEaWN0ID0ge30NCiAgICAgICAgc2VsZi5sb2dnZXJDbGFzcyA9IE5vbmUNCiAgICAgICAgc2VsZi5sb2dSZWNvcmRGYWN0b3J5ID0gTm9uZQ0KDQogICAgZGVmIGdldExvZ2dlcihzZWxmLCBuYW1lKToNCiAgICAgICAgIiIiDQogICAgICAgIEdldCBhIGxvZ2dlciB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZSAoY2hhbm5lbCBuYW1lKSwgY3JlYXRpbmcgaXQNCiAgICAgICAgaWYgaXQgZG9lc24ndCB5ZXQgZXhpc3QuIFRoaXMgbmFtZSBpcyBhIGRvdC1zZXBhcmF0ZWQgaGllcmFyY2hpY2FsDQogICAgICAgIG5hbWUsIHN1Y2ggYXMgImEiLCAiYS5iIiwgImEuYi5jIiBvciBzaW1pbGFyLg0KDQogICAgICAgIElmIGEgUGxhY2VIb2xkZXIgZXhpc3RlZCBmb3IgdGhlIHNwZWNpZmllZCBuYW1lIFtpLmUuIHRoZSBsb2dnZXINCiAgICAgICAgZGlkbid0IGV4aXN0IGJ1dCBhIGNoaWxkIG9mIGl0IGRpZF0sIHJlcGxhY2UgaXQgd2l0aCB0aGUgY3JlYXRlZA0KICAgICAgICBsb2dnZXIgYW5kIGZpeCB1cCB0aGUgcGFyZW50L2NoaWxkIHJlZmVyZW5jZXMgd2hpY2ggcG9pbnRlZCB0byB0aGUNCiAgICAgICAgcGxhY2Vob2xkZXIgdG8gbm93IHBvaW50IHRvIHRoZSBsb2dnZXIuDQogICAgICAgICIiIg0KICAgICAgICBydiA9IE5vbmUNCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UobmFtZSwgc3RyKToNCiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignQSBsb2dnZXIgbmFtZSBtdXN0IGJlIGEgc3RyaW5nJykNCiAgICAgICAgX2FjcXVpcmVMb2NrKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWYgbmFtZSBpbiBzZWxmLmxvZ2dlckRpY3Q6DQogICAgICAgICAgICAgICAgcnYgPSBzZWxmLmxvZ2dlckRpY3RbbmFtZV0NCiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHJ2LCBQbGFjZUhvbGRlcik6DQogICAgICAgICAgICAgICAgICAgIHBoID0gcnYNCiAgICAgICAgICAgICAgICAgICAgcnYgPSAoc2VsZi5sb2dnZXJDbGFzcyBvciBfbG9nZ2VyQ2xhc3MpKG5hbWUpDQogICAgICAgICAgICAgICAgICAgIHJ2Lm1hbmFnZXIgPSBzZWxmDQogICAgICAgICAgICAgICAgICAgIHNlbGYubG9nZ2VyRGljdFtuYW1lXSA9IHJ2DQogICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZpeHVwQ2hpbGRyZW4ocGgsIHJ2KQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLl9maXh1cFBhcmVudHMocnYpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHJ2ID0gKHNlbGYubG9nZ2VyQ2xhc3Mgb3IgX2xvZ2dlckNsYXNzKShuYW1lKQ0KICAgICAgICAgICAgICAgIHJ2Lm1hbmFnZXIgPSBzZWxmDQogICAgICAgICAgICAgICAgc2VsZi5sb2dnZXJEaWN0W25hbWVdID0gcnYNCiAgICAgICAgICAgICAgICBzZWxmLl9maXh1cFBhcmVudHMocnYpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBfcmVsZWFzZUxvY2soKQ0KICAgICAgICByZXR1cm4gcnYNCg0KICAgIGRlZiBzZXRMb2dnZXJDbGFzcyhzZWxmLCBrbGFzcyk6DQogICAgICAgICIiIg0KICAgICAgICBTZXQgdGhlIGNsYXNzIHRvIGJlIHVzZWQgd2hlbiBpbnN0YW50aWF0aW5nIGEgbG9nZ2VyIHdpdGggdGhpcyBNYW5hZ2VyLg0KICAgICAgICAiIiINCiAgICAgICAgaWYga2xhc3MgIT0gTG9nZ2VyOg0KICAgICAgICAgICAgaWYgbm90IGlzc3ViY2xhc3Moa2xhc3MsIExvZ2dlcik6DQogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJsb2dnZXIgbm90IGRlcml2ZWQgZnJvbSBsb2dnaW5nLkxvZ2dlcjogIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGtsYXNzLl9fbmFtZV9fKQ0KICAgICAgICBzZWxmLmxvZ2dlckNsYXNzID0ga2xhc3MNCg0KICAgIGRlZiBzZXRMb2dSZWNvcmRGYWN0b3J5KHNlbGYsIGZhY3RvcnkpOg0KICAgICAgICAiIiINCiAgICAgICAgU2V0IHRoZSBmYWN0b3J5IHRvIGJlIHVzZWQgd2hlbiBpbnN0YW50aWF0aW5nIGEgbG9nIHJlY29yZCB3aXRoIHRoaXMNCiAgICAgICAgTWFuYWdlci4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYubG9nUmVjb3JkRmFjdG9yeSA9IGZhY3RvcnkNCg0KICAgIGRlZiBfZml4dXBQYXJlbnRzKHNlbGYsIGFsb2dnZXIpOg0KICAgICAgICAiIiINCiAgICAgICAgRW5zdXJlIHRoYXQgdGhlcmUgYXJlIGVpdGhlciBsb2dnZXJzIG9yIHBsYWNlaG9sZGVycyBhbGwgdGhlIHdheQ0KICAgICAgICBmcm9tIHRoZSBzcGVjaWZpZWQgbG9nZ2VyIHRvIHRoZSByb290IG9mIHRoZSBsb2dnZXIgaGllcmFyY2h5Lg0KICAgICAgICAiIiINCiAgICAgICAgbmFtZSA9IGFsb2dnZXIubmFtZQ0KICAgICAgICBpID0gbmFtZS5yZmluZCgiLiIpDQogICAgICAgIHJ2ID0gTm9uZQ0KICAgICAgICB3aGlsZSAoaSA+IDApIGFuZCBub3QgcnY6DQogICAgICAgICAgICBzdWJzdHIgPSBuYW1lWzppXQ0KICAgICAgICAgICAgaWYgc3Vic3RyIG5vdCBpbiBzZWxmLmxvZ2dlckRpY3Q6DQogICAgICAgICAgICAgICAgc2VsZi5sb2dnZXJEaWN0W3N1YnN0cl0gPSBQbGFjZUhvbGRlcihhbG9nZ2VyKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBvYmogPSBzZWxmLmxvZ2dlckRpY3Rbc3Vic3RyXQ0KICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBMb2dnZXIpOg0KICAgICAgICAgICAgICAgICAgICBydiA9IG9iag0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGFzc2VydCBpc2luc3RhbmNlKG9iaiwgUGxhY2VIb2xkZXIpDQogICAgICAgICAgICAgICAgICAgIG9iai5hcHBlbmQoYWxvZ2dlcikNCiAgICAgICAgICAgIGkgPSBuYW1lLnJmaW5kKCIuIiwgMCwgaSAtIDEpDQogICAgICAgIGlmIG5vdCBydjoNCiAgICAgICAgICAgIHJ2ID0gc2VsZi5yb290DQogICAgICAgIGFsb2dnZXIucGFyZW50ID0gcnYNCg0KICAgIGRlZiBfZml4dXBDaGlsZHJlbihzZWxmLCBwaCwgYWxvZ2dlcik6DQogICAgICAgICIiIg0KICAgICAgICBFbnN1cmUgdGhhdCBjaGlsZHJlbiBvZiB0aGUgcGxhY2Vob2xkZXIgcGggYXJlIGNvbm5lY3RlZCB0byB0aGUNCiAgICAgICAgc3BlY2lmaWVkIGxvZ2dlci4NCiAgICAgICAgIiIiDQogICAgICAgIG5hbWUgPSBhbG9nZ2VyLm5hbWUNCiAgICAgICAgbmFtZWxlbiA9IGxlbihuYW1lKQ0KICAgICAgICBmb3IgYyBpbiBwaC5sb2dnZXJNYXAua2V5cygpOg0KICAgICAgICAgICAgI1RoZSBpZiBtZWFucyAuLi4gaWYgbm90IGMucGFyZW50Lm5hbWUuc3RhcnRzd2l0aChubSkNCiAgICAgICAgICAgIGlmIGMucGFyZW50Lm5hbWVbOm5hbWVsZW5dICE9IG5hbWU6DQogICAgICAgICAgICAgICAgYWxvZ2dlci5wYXJlbnQgPSBjLnBhcmVudA0KICAgICAgICAgICAgICAgIGMucGFyZW50ID0gYWxvZ2dlcg0KDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQojICAgTG9nZ2VyIGNsYXNzZXMgYW5kIGZ1bmN0aW9ucw0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpjbGFzcyBMb2dnZXIoRmlsdGVyZXIpOg0KICAgICIiIg0KICAgIEluc3RhbmNlcyBvZiB0aGUgTG9nZ2VyIGNsYXNzIHJlcHJlc2VudCBhIHNpbmdsZSBsb2dnaW5nIGNoYW5uZWwuIEENCiAgICAibG9nZ2luZyBjaGFubmVsIiBpbmRpY2F0ZXMgYW4gYXJlYSBvZiBhbiBhcHBsaWNhdGlvbi4gRXhhY3RseSBob3cgYW4NCiAgICAiYXJlYSIgaXMgZGVmaW5lZCBpcyB1cCB0byB0aGUgYXBwbGljYXRpb24gZGV2ZWxvcGVyLiBTaW5jZSBhbg0KICAgIGFwcGxpY2F0aW9uIGNhbiBoYXZlIGFueSBudW1iZXIgb2YgYXJlYXMsIGxvZ2dpbmcgY2hhbm5lbHMgYXJlIGlkZW50aWZpZWQNCiAgICBieSBhIHVuaXF1ZSBzdHJpbmcuIEFwcGxpY2F0aW9uIGFyZWFzIGNhbiBiZSBuZXN0ZWQgKGUuZy4gYW4gYXJlYQ0KICAgIG9mICJpbnB1dCBwcm9jZXNzaW5nIiBtaWdodCBpbmNsdWRlIHN1Yi1hcmVhcyAicmVhZCBDU1YgZmlsZXMiLCAicmVhZA0KICAgIFhMUyBmaWxlcyIgYW5kICJyZWFkIEdudW1lcmljIGZpbGVzIikuIFRvIGNhdGVyIGZvciB0aGlzIG5hdHVyYWwgbmVzdGluZywNCiAgICBjaGFubmVsIG5hbWVzIGFyZSBvcmdhbml6ZWQgaW50byBhIG5hbWVzcGFjZSBoaWVyYXJjaHkgd2hlcmUgbGV2ZWxzIGFyZQ0KICAgIHNlcGFyYXRlZCBieSBwZXJpb2RzLCBtdWNoIGxpa2UgdGhlIEphdmEgb3IgUHl0aG9uIHBhY2thZ2UgbmFtZXNwYWNlLiBTbw0KICAgIGluIHRoZSBpbnN0YW5jZSBnaXZlbiBhYm92ZSwgY2hhbm5lbCBuYW1lcyBtaWdodCBiZSAiaW5wdXQiIGZvciB0aGUgdXBwZXINCiAgICBsZXZlbCwgYW5kICJpbnB1dC5jc3YiLCAiaW5wdXQueGxzIiBhbmQgImlucHV0LmdudSIgZm9yIHRoZSBzdWItbGV2ZWxzLg0KICAgIFRoZXJlIGlzIG5vIGFyYml0cmFyeSBsaW1pdCB0byB0aGUgZGVwdGggb2YgbmVzdGluZy4NCiAgICAiIiINCiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSwgbGV2ZWw9Tk9UU0VUKToNCiAgICAgICAgIiIiDQogICAgICAgIEluaXRpYWxpemUgdGhlIGxvZ2dlciB3aXRoIGEgbmFtZSBhbmQgYW4gb3B0aW9uYWwgbGV2ZWwuDQogICAgICAgICIiIg0KICAgICAgICBGaWx0ZXJlci5fX2luaXRfXyhzZWxmKQ0KICAgICAgICBzZWxmLm5hbWUgPSBuYW1lDQogICAgICAgIHNlbGYubGV2ZWwgPSBfY2hlY2tMZXZlbChsZXZlbCkNCiAgICAgICAgc2VsZi5wYXJlbnQgPSBOb25lDQogICAgICAgIHNlbGYucHJvcGFnYXRlID0gVHJ1ZQ0KICAgICAgICBzZWxmLmhhbmRsZXJzID0gW10NCiAgICAgICAgc2VsZi5kaXNhYmxlZCA9IEZhbHNlDQoNCiAgICBkZWYgc2V0TGV2ZWwoc2VsZiwgbGV2ZWwpOg0KICAgICAgICAiIiINCiAgICAgICAgU2V0IHRoZSBsb2dnaW5nIGxldmVsIG9mIHRoaXMgbG9nZ2VyLiAgbGV2ZWwgbXVzdCBiZSBhbiBpbnQgb3IgYSBzdHIuDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmxldmVsID0gX2NoZWNrTGV2ZWwobGV2ZWwpDQoNCiAgICBkZWYgZGVidWcoc2VsZiwgbXNnLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAiIiINCiAgICAgICAgTG9nICdtc2cgJSBhcmdzJyB3aXRoIHNldmVyaXR5ICdERUJVRycuDQoNCiAgICAgICAgVG8gcGFzcyBleGNlcHRpb24gaW5mb3JtYXRpb24sIHVzZSB0aGUga2V5d29yZCBhcmd1bWVudCBleGNfaW5mbyB3aXRoDQogICAgICAgIGEgdHJ1ZSB2YWx1ZSwgZS5nLg0KDQogICAgICAgIGxvZ2dlci5kZWJ1ZygiSG91c3Rvbiwgd2UgaGF2ZSBhICVzIiwgInRob3JueSBwcm9ibGVtIiwgZXhjX2luZm89MSkNCiAgICAgICAgIiIiDQogICAgICAgIGlmIHNlbGYuaXNFbmFibGVkRm9yKERFQlVHKToNCiAgICAgICAgICAgIHNlbGYuX2xvZyhERUJVRywgbXNnLCBhcmdzLCAqKmt3YXJncykNCg0KICAgIGRlZiBpbmZvKHNlbGYsIG1zZywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgIiIiDQogICAgICAgIExvZyAnbXNnICUgYXJncycgd2l0aCBzZXZlcml0eSAnSU5GTycuDQoNCiAgICAgICAgVG8gcGFzcyBleGNlcHRpb24gaW5mb3JtYXRpb24sIHVzZSB0aGUga2V5d29yZCBhcmd1bWVudCBleGNfaW5mbyB3aXRoDQogICAgICAgIGEgdHJ1ZSB2YWx1ZSwgZS5nLg0KDQogICAgICAgIGxvZ2dlci5pbmZvKCJIb3VzdG9uLCB3ZSBoYXZlIGEgJXMiLCAiaW50ZXJlc3RpbmcgcHJvYmxlbSIsIGV4Y19pbmZvPTEpDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLmlzRW5hYmxlZEZvcihJTkZPKToNCiAgICAgICAgICAgIHNlbGYuX2xvZyhJTkZPLCBtc2csIGFyZ3MsICoqa3dhcmdzKQ0KDQogICAgZGVmIHdhcm5pbmcoc2VsZiwgbXNnLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAiIiINCiAgICAgICAgTG9nICdtc2cgJSBhcmdzJyB3aXRoIHNldmVyaXR5ICdXQVJOSU5HJy4NCg0KICAgICAgICBUbyBwYXNzIGV4Y2VwdGlvbiBpbmZvcm1hdGlvbiwgdXNlIHRoZSBrZXl3b3JkIGFyZ3VtZW50IGV4Y19pbmZvIHdpdGgNCiAgICAgICAgYSB0cnVlIHZhbHVlLCBlLmcuDQoNCiAgICAgICAgbG9nZ2VyLndhcm5pbmcoIkhvdXN0b24sIHdlIGhhdmUgYSAlcyIsICJiaXQgb2YgYSBwcm9ibGVtIiwgZXhjX2luZm89MSkNCiAgICAgICAgIiIiDQogICAgICAgIGlmIHNlbGYuaXNFbmFibGVkRm9yKFdBUk5JTkcpOg0KICAgICAgICAgICAgc2VsZi5fbG9nKFdBUk5JTkcsIG1zZywgYXJncywgKiprd2FyZ3MpDQoNCiAgICBkZWYgd2FybihzZWxmLCBtc2csICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgIHdhcm5pbmdzLndhcm4oIlRoZSAnd2FybicgbWV0aG9kIGlzIGRlcHJlY2F0ZWQsICINCiAgICAgICAgICAgICJ1c2UgJ3dhcm5pbmcnIGluc3RlYWQiLCBEZXByZWNhdGlvbldhcm5pbmcsIDIpDQogICAgICAgIHNlbGYud2FybmluZyhtc2csICphcmdzLCAqKmt3YXJncykNCg0KICAgIGRlZiBlcnJvcihzZWxmLCBtc2csICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICIiIg0KICAgICAgICBMb2cgJ21zZyAlIGFyZ3MnIHdpdGggc2V2ZXJpdHkgJ0VSUk9SJy4NCg0KICAgICAgICBUbyBwYXNzIGV4Y2VwdGlvbiBpbmZvcm1hdGlvbiwgdXNlIHRoZSBrZXl3b3JkIGFyZ3VtZW50IGV4Y19pbmZvIHdpdGgNCiAgICAgICAgYSB0cnVlIHZhbHVlLCBlLmcuDQoNCiAgICAgICAgbG9nZ2VyLmVycm9yKCJIb3VzdG9uLCB3ZSBoYXZlIGEgJXMiLCAibWFqb3IgcHJvYmxlbSIsIGV4Y19pbmZvPTEpDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLmlzRW5hYmxlZEZvcihFUlJPUik6DQogICAgICAgICAgICBzZWxmLl9sb2coRVJST1IsIG1zZywgYXJncywgKiprd2FyZ3MpDQoNCiAgICBkZWYgZXhjZXB0aW9uKHNlbGYsIG1zZywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgIiIiDQogICAgICAgIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgbG9nZ2luZyBhbiBFUlJPUiB3aXRoIGV4Y2VwdGlvbiBpbmZvcm1hdGlvbi4NCiAgICAgICAgIiIiDQogICAgICAgIGt3YXJnc1snZXhjX2luZm8nXSA9IFRydWUNCiAgICAgICAgc2VsZi5lcnJvcihtc2csICphcmdzLCAqKmt3YXJncykNCg0KICAgIGRlZiBjcml0aWNhbChzZWxmLCBtc2csICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICIiIg0KICAgICAgICBMb2cgJ21zZyAlIGFyZ3MnIHdpdGggc2V2ZXJpdHkgJ0NSSVRJQ0FMJy4NCg0KICAgICAgICBUbyBwYXNzIGV4Y2VwdGlvbiBpbmZvcm1hdGlvbiwgdXNlIHRoZSBrZXl3b3JkIGFyZ3VtZW50IGV4Y19pbmZvIHdpdGgNCiAgICAgICAgYSB0cnVlIHZhbHVlLCBlLmcuDQoNCiAgICAgICAgbG9nZ2VyLmNyaXRpY2FsKCJIb3VzdG9uLCB3ZSBoYXZlIGEgJXMiLCAibWFqb3IgZGlzYXN0ZXIiLCBleGNfaW5mbz0xKQ0KICAgICAgICAiIiINCiAgICAgICAgaWYgc2VsZi5pc0VuYWJsZWRGb3IoQ1JJVElDQUwpOg0KICAgICAgICAgICAgc2VsZi5fbG9nKENSSVRJQ0FMLCBtc2csIGFyZ3MsICoqa3dhcmdzKQ0KDQogICAgZmF0YWwgPSBjcml0aWNhbA0KDQogICAgZGVmIGxvZyhzZWxmLCBsZXZlbCwgbXNnLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAiIiINCiAgICAgICAgTG9nICdtc2cgJSBhcmdzJyB3aXRoIHRoZSBpbnRlZ2VyIHNldmVyaXR5ICdsZXZlbCcuDQoNCiAgICAgICAgVG8gcGFzcyBleGNlcHRpb24gaW5mb3JtYXRpb24sIHVzZSB0aGUga2V5d29yZCBhcmd1bWVudCBleGNfaW5mbyB3aXRoDQogICAgICAgIGEgdHJ1ZSB2YWx1ZSwgZS5nLg0KDQogICAgICAgIGxvZ2dlci5sb2cobGV2ZWwsICJXZSBoYXZlIGEgJXMiLCAibXlzdGVyaW91cyBwcm9ibGVtIiwgZXhjX2luZm89MSkNCiAgICAgICAgIiIiDQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGxldmVsLCBpbnQpOg0KICAgICAgICAgICAgaWYgcmFpc2VFeGNlcHRpb25zOg0KICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibGV2ZWwgbXVzdCBiZSBhbiBpbnRlZ2VyIikNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGlmIHNlbGYuaXNFbmFibGVkRm9yKGxldmVsKToNCiAgICAgICAgICAgIHNlbGYuX2xvZyhsZXZlbCwgbXNnLCBhcmdzLCAqKmt3YXJncykNCg0KICAgIGRlZiBmaW5kQ2FsbGVyKHNlbGYsIHN0YWNrX2luZm89RmFsc2UpOg0KICAgICAgICAiIiINCiAgICAgICAgRmluZCB0aGUgc3RhY2sgZnJhbWUgb2YgdGhlIGNhbGxlciBzbyB0aGF0IHdlIGNhbiBub3RlIHRoZSBzb3VyY2UNCiAgICAgICAgZmlsZSBuYW1lLCBsaW5lIG51bWJlciBhbmQgZnVuY3Rpb24gbmFtZS4NCiAgICAgICAgIiIiDQogICAgICAgIGYgPSBjdXJyZW50ZnJhbWUoKQ0KICAgICAgICAjT24gc29tZSB2ZXJzaW9ucyBvZiBJcm9uUHl0aG9uLCBjdXJyZW50ZnJhbWUoKSByZXR1cm5zIE5vbmUgaWYNCiAgICAgICAgI0lyb25QeXRob24gaXNuJ3QgcnVuIHdpdGggLVg6RnJhbWVzLg0KICAgICAgICBpZiBmIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgZiA9IGYuZl9iYWNrDQogICAgICAgIHJ2ID0gIih1bmtub3duIGZpbGUpIiwgMCwgIih1bmtub3duIGZ1bmN0aW9uKSIsIE5vbmUNCiAgICAgICAgd2hpbGUgaGFzYXR0cihmLCAiZl9jb2RlIik6DQogICAgICAgICAgICBjbyA9IGYuZl9jb2RlDQogICAgICAgICAgICBmaWxlbmFtZSA9IG9zLnBhdGgubm9ybWNhc2UoY28uY29fZmlsZW5hbWUpDQogICAgICAgICAgICBpZiBmaWxlbmFtZSA9PSBfc3JjZmlsZToNCiAgICAgICAgICAgICAgICBmID0gZi5mX2JhY2sNCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgc2luZm8gPSBOb25lDQogICAgICAgICAgICBpZiBzdGFja19pbmZvOg0KICAgICAgICAgICAgICAgIHNpbyA9IGlvLlN0cmluZ0lPKCkNCiAgICAgICAgICAgICAgICBzaW8ud3JpdGUoJ1N0YWNrIChtb3N0IHJlY2VudCBjYWxsIGxhc3QpOlxuJykNCiAgICAgICAgICAgICAgICB0cmFjZWJhY2sucHJpbnRfc3RhY2soZiwgZmlsZT1zaW8pDQogICAgICAgICAgICAgICAgc2luZm8gPSBzaW8uZ2V0dmFsdWUoKQ0KICAgICAgICAgICAgICAgIGlmIHNpbmZvWy0xXSA9PSAnXG4nOg0KICAgICAgICAgICAgICAgICAgICBzaW5mbyA9IHNpbmZvWzotMV0NCiAgICAgICAgICAgICAgICBzaW8uY2xvc2UoKQ0KICAgICAgICAgICAgcnYgPSAoY28uY29fZmlsZW5hbWUsIGYuZl9saW5lbm8sIGNvLmNvX25hbWUsIHNpbmZvKQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgcmV0dXJuIHJ2DQoNCiAgICBkZWYgbWFrZVJlY29yZChzZWxmLCBuYW1lLCBsZXZlbCwgZm4sIGxubywgbXNnLCBhcmdzLCBleGNfaW5mbywNCiAgICAgICAgICAgICAgICAgICBmdW5jPU5vbmUsIGV4dHJhPU5vbmUsIHNpbmZvPU5vbmUpOg0KICAgICAgICAiIiINCiAgICAgICAgQSBmYWN0b3J5IG1ldGhvZCB3aGljaCBjYW4gYmUgb3ZlcnJpZGRlbiBpbiBzdWJjbGFzc2VzIHRvIGNyZWF0ZQ0KICAgICAgICBzcGVjaWFsaXplZCBMb2dSZWNvcmRzLg0KICAgICAgICAiIiINCiAgICAgICAgcnYgPSBfbG9nUmVjb3JkRmFjdG9yeShuYW1lLCBsZXZlbCwgZm4sIGxubywgbXNnLCBhcmdzLCBleGNfaW5mbywgZnVuYywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luZm8pDQogICAgICAgIGlmIGV4dHJhIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgZm9yIGtleSBpbiBleHRyYToNCiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIFsibWVzc2FnZSIsICJhc2N0aW1lIl0pIG9yIChrZXkgaW4gcnYuX19kaWN0X18pOg0KICAgICAgICAgICAgICAgICAgICByYWlzZSBLZXlFcnJvcigiQXR0ZW1wdCB0byBvdmVyd3JpdGUgJXIgaW4gTG9nUmVjb3JkIiAlIGtleSkNCiAgICAgICAgICAgICAgICBydi5fX2RpY3RfX1trZXldID0gZXh0cmFba2V5XQ0KICAgICAgICByZXR1cm4gcnYNCg0KICAgIGRlZiBfbG9nKHNlbGYsIGxldmVsLCBtc2csIGFyZ3MsIGV4Y19pbmZvPU5vbmUsIGV4dHJhPU5vbmUsIHN0YWNrX2luZm89RmFsc2UpOg0KICAgICAgICAiIiINCiAgICAgICAgTG93LWxldmVsIGxvZ2dpbmcgcm91dGluZSB3aGljaCBjcmVhdGVzIGEgTG9nUmVjb3JkIGFuZCB0aGVuIGNhbGxzDQogICAgICAgIGFsbCB0aGUgaGFuZGxlcnMgb2YgdGhpcyBsb2dnZXIgdG8gaGFuZGxlIHRoZSByZWNvcmQuDQogICAgICAgICIiIg0KICAgICAgICBzaW5mbyA9IE5vbmUNCiAgICAgICAgaWYgX3NyY2ZpbGU6DQogICAgICAgICAgICAjSXJvblB5dGhvbiBkb2Vzbid0IHRyYWNrIFB5dGhvbiBmcmFtZXMsIHNvIGZpbmRDYWxsZXIgdGhyb3dzIGFuDQogICAgICAgICAgICAjZXhjZXB0aW9uIG9uIHNvbWUgdmVyc2lvbnMgb2YgSXJvblB5dGhvbi4gV2UgdHJhcCBpdCBoZXJlIHNvIHRoYXQNCiAgICAgICAgICAgICNJcm9uUHl0aG9uIGNhbiB1c2UgbG9nZ2luZy4NCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBmbiwgbG5vLCBmdW5jLCBzaW5mbyA9IHNlbGYuZmluZENhbGxlcihzdGFja19pbmZvKQ0KICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6ICMgcHJhZ21hOiBubyBjb3Zlcg0KICAgICAgICAgICAgICAgIGZuLCBsbm8sIGZ1bmMgPSAiKHVua25vd24gZmlsZSkiLCAwLCAiKHVua25vd24gZnVuY3Rpb24pIg0KICAgICAgICBlbHNlOiAjIHByYWdtYTogbm8gY292ZXINCiAgICAgICAgICAgIGZuLCBsbm8sIGZ1bmMgPSAiKHVua25vd24gZmlsZSkiLCAwLCAiKHVua25vd24gZnVuY3Rpb24pIg0KICAgICAgICBpZiBleGNfaW5mbzoNCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGV4Y19pbmZvLCB0dXBsZSk6DQogICAgICAgICAgICAgICAgZXhjX2luZm8gPSBzeXMuZXhjX2luZm8oKQ0KICAgICAgICByZWNvcmQgPSBzZWxmLm1ha2VSZWNvcmQoc2VsZi5uYW1lLCBsZXZlbCwgZm4sIGxubywgbXNnLCBhcmdzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjX2luZm8sIGZ1bmMsIGV4dHJhLCBzaW5mbykNCiAgICAgICAgc2VsZi5oYW5kbGUocmVjb3JkKQ0KDQogICAgZGVmIGhhbmRsZShzZWxmLCByZWNvcmQpOg0KICAgICAgICAiIiINCiAgICAgICAgQ2FsbCB0aGUgaGFuZGxlcnMgZm9yIHRoZSBzcGVjaWZpZWQgcmVjb3JkLg0KDQogICAgICAgIFRoaXMgbWV0aG9kIGlzIHVzZWQgZm9yIHVucGlja2xlZCByZWNvcmRzIHJlY2VpdmVkIGZyb20gYSBzb2NrZXQsIGFzDQogICAgICAgIHdlbGwgYXMgdGhvc2UgY3JlYXRlZCBsb2NhbGx5LiBMb2dnZXItbGV2ZWwgZmlsdGVyaW5nIGlzIGFwcGxpZWQuDQogICAgICAgICIiIg0KICAgICAgICBpZiAobm90IHNlbGYuZGlzYWJsZWQpIGFuZCBzZWxmLmZpbHRlcihyZWNvcmQpOg0KICAgICAgICAgICAgc2VsZi5jYWxsSGFuZGxlcnMocmVjb3JkKQ0KDQogICAgZGVmIGFkZEhhbmRsZXIoc2VsZiwgaGRscik6DQogICAgICAgICIiIg0KICAgICAgICBBZGQgdGhlIHNwZWNpZmllZCBoYW5kbGVyIHRvIHRoaXMgbG9nZ2VyLg0KICAgICAgICAiIiINCiAgICAgICAgX2FjcXVpcmVMb2NrKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWYgbm90IChoZGxyIGluIHNlbGYuaGFuZGxlcnMpOg0KICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlcnMuYXBwZW5kKGhkbHIpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBfcmVsZWFzZUxvY2soKQ0KDQogICAgZGVmIHJlbW92ZUhhbmRsZXIoc2VsZiwgaGRscik6DQogICAgICAgICIiIg0KICAgICAgICBSZW1vdmUgdGhlIHNwZWNpZmllZCBoYW5kbGVyIGZyb20gdGhpcyBsb2dnZXIuDQogICAgICAgICIiIg0KICAgICAgICBfYWNxdWlyZUxvY2soKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBpZiBoZGxyIGluIHNlbGYuaGFuZGxlcnM6DQogICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVycy5yZW1vdmUoaGRscikNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIF9yZWxlYXNlTG9jaygpDQoNCiAgICBkZWYgaGFzSGFuZGxlcnMoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBTZWUgaWYgdGhpcyBsb2dnZXIgaGFzIGFueSBoYW5kbGVycyBjb25maWd1cmVkLg0KDQogICAgICAgIExvb3AgdGhyb3VnaCBhbGwgaGFuZGxlcnMgZm9yIHRoaXMgbG9nZ2VyIGFuZCBpdHMgcGFyZW50cyBpbiB0aGUNCiAgICAgICAgbG9nZ2VyIGhpZXJhcmNoeS4gUmV0dXJuIFRydWUgaWYgYSBoYW5kbGVyIHdhcyBmb3VuZCwgZWxzZSBGYWxzZS4NCiAgICAgICAgU3RvcCBzZWFyY2hpbmcgdXAgdGhlIGhpZXJhcmNoeSB3aGVuZXZlciBhIGxvZ2dlciB3aXRoIHRoZSAicHJvcGFnYXRlIg0KICAgICAgICBhdHRyaWJ1dGUgc2V0IHRvIHplcm8gaXMgZm91bmQgLSB0aGF0IHdpbGwgYmUgdGhlIGxhc3QgbG9nZ2VyIHdoaWNoDQogICAgICAgIGlzIGNoZWNrZWQgZm9yIHRoZSBleGlzdGVuY2Ugb2YgaGFuZGxlcnMuDQogICAgICAgICIiIg0KICAgICAgICBjID0gc2VsZg0KICAgICAgICBydiA9IEZhbHNlDQogICAgICAgIHdoaWxlIGM6DQogICAgICAgICAgICBpZiBjLmhhbmRsZXJzOg0KICAgICAgICAgICAgICAgIHJ2ID0gVHJ1ZQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBpZiBub3QgYy5wcm9wYWdhdGU6DQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgYyA9IGMucGFyZW50DQogICAgICAgIHJldHVybiBydg0KDQogICAgZGVmIGNhbGxIYW5kbGVycyhzZWxmLCByZWNvcmQpOg0KICAgICAgICAiIiINCiAgICAgICAgUGFzcyBhIHJlY29yZCB0byBhbGwgcmVsZXZhbnQgaGFuZGxlcnMuDQoNCiAgICAgICAgTG9vcCB0aHJvdWdoIGFsbCBoYW5kbGVycyBmb3IgdGhpcyBsb2dnZXIgYW5kIGl0cyBwYXJlbnRzIGluIHRoZQ0KICAgICAgICBsb2dnZXIgaGllcmFyY2h5LiBJZiBubyBoYW5kbGVyIHdhcyBmb3VuZCwgb3V0cHV0IGEgb25lLW9mZiBlcnJvcg0KICAgICAgICBtZXNzYWdlIHRvIHN5cy5zdGRlcnIuIFN0b3Agc2VhcmNoaW5nIHVwIHRoZSBoaWVyYXJjaHkgd2hlbmV2ZXIgYQ0KICAgICAgICBsb2dnZXIgd2l0aCB0aGUgInByb3BhZ2F0ZSIgYXR0cmlidXRlIHNldCB0byB6ZXJvIGlzIGZvdW5kIC0gdGhhdA0KICAgICAgICB3aWxsIGJlIHRoZSBsYXN0IGxvZ2dlciB3aG9zZSBoYW5kbGVycyBhcmUgY2FsbGVkLg0KICAgICAgICAiIiINCiAgICAgICAgYyA9IHNlbGYNCiAgICAgICAgZm91bmQgPSAwDQogICAgICAgIHdoaWxlIGM6DQogICAgICAgICAgICBmb3IgaGRsciBpbiBjLmhhbmRsZXJzOg0KICAgICAgICAgICAgICAgIGZvdW5kID0gZm91bmQgKyAxDQogICAgICAgICAgICAgICAgaWYgcmVjb3JkLmxldmVsbm8gPj0gaGRsci5sZXZlbDoNCiAgICAgICAgICAgICAgICAgICAgaGRsci5oYW5kbGUocmVjb3JkKQ0KICAgICAgICAgICAgaWYgbm90IGMucHJvcGFnYXRlOg0KICAgICAgICAgICAgICAgIGMgPSBOb25lICAgICNicmVhayBvdXQNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgYyA9IGMucGFyZW50DQogICAgICAgIGlmIChmb3VuZCA9PSAwKToNCiAgICAgICAgICAgIGlmIGxhc3RSZXNvcnQ6DQogICAgICAgICAgICAgICAgaWYgcmVjb3JkLmxldmVsbm8gPj0gbGFzdFJlc29ydC5sZXZlbDoNCiAgICAgICAgICAgICAgICAgICAgbGFzdFJlc29ydC5oYW5kbGUocmVjb3JkKQ0KICAgICAgICAgICAgZWxpZiByYWlzZUV4Y2VwdGlvbnMgYW5kIG5vdCBzZWxmLm1hbmFnZXIuZW1pdHRlZE5vSGFuZGxlcldhcm5pbmc6DQogICAgICAgICAgICAgICAgc3lzLnN0ZGVyci53cml0ZSgiTm8gaGFuZGxlcnMgY291bGQgYmUgZm91bmQgZm9yIGxvZ2dlciINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgXCIlc1wiXG4iICUgc2VsZi5uYW1lKQ0KICAgICAgICAgICAgICAgIHNlbGYubWFuYWdlci5lbWl0dGVkTm9IYW5kbGVyV2FybmluZyA9IFRydWUNCg0KICAgIGRlZiBnZXRFZmZlY3RpdmVMZXZlbChzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIEdldCB0aGUgZWZmZWN0aXZlIGxldmVsIGZvciB0aGlzIGxvZ2dlci4NCg0KICAgICAgICBMb29wIHRocm91Z2ggdGhpcyBsb2dnZXIgYW5kIGl0cyBwYXJlbnRzIGluIHRoZSBsb2dnZXIgaGllcmFyY2h5LA0KICAgICAgICBsb29raW5nIGZvciBhIG5vbi16ZXJvIGxvZ2dpbmcgbGV2ZWwuIFJldHVybiB0aGUgZmlyc3Qgb25lIGZvdW5kLg0KICAgICAgICAiIiINCiAgICAgICAgbG9nZ2VyID0gc2VsZg0KICAgICAgICB3aGlsZSBsb2dnZXI6DQogICAgICAgICAgICBpZiBsb2dnZXIubGV2ZWw6DQogICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci5sZXZlbA0KICAgICAgICAgICAgbG9nZ2VyID0gbG9nZ2VyLnBhcmVudA0KICAgICAgICByZXR1cm4gTk9UU0VUDQoNCiAgICBkZWYgaXNFbmFibGVkRm9yKHNlbGYsIGxldmVsKToNCiAgICAgICAgIiIiDQogICAgICAgIElzIHRoaXMgbG9nZ2VyIGVuYWJsZWQgZm9yIGxldmVsICdsZXZlbCc/DQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLm1hbmFnZXIuZGlzYWJsZSA+PSBsZXZlbDoNCiAgICAgICAgICAgIHJldHVybiBGYWxzZQ0KICAgICAgICByZXR1cm4gbGV2ZWwgPj0gc2VsZi5nZXRFZmZlY3RpdmVMZXZlbCgpDQoNCiAgICBkZWYgZ2V0Q2hpbGQoc2VsZiwgc3VmZml4KToNCiAgICAgICAgIiIiDQogICAgICAgIEdldCBhIGxvZ2dlciB3aGljaCBpcyBhIGRlc2NlbmRhbnQgdG8gdGhpcyBvbmUuDQoNCiAgICAgICAgVGhpcyBpcyBhIGNvbnZlbmllbmNlIG1ldGhvZCwgc3VjaCB0aGF0DQoNCiAgICAgICAgbG9nZ2luZy5nZXRMb2dnZXIoJ2FiYycpLmdldENoaWxkKCdkZWYuZ2hpJykNCg0KICAgICAgICBpcyB0aGUgc2FtZSBhcw0KDQogICAgICAgIGxvZ2dpbmcuZ2V0TG9nZ2VyKCdhYmMuZGVmLmdoaScpDQoNCiAgICAgICAgSXQncyB1c2VmdWwsIGZvciBleGFtcGxlLCB3aGVuIHRoZSBwYXJlbnQgbG9nZ2VyIGlzIG5hbWVkIHVzaW5nDQogICAgICAgIF9fbmFtZV9fIHJhdGhlciB0aGFuIGEgbGl0ZXJhbCBzdHJpbmcuDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLnJvb3QgaXMgbm90IHNlbGY6DQogICAgICAgICAgICBzdWZmaXggPSAnLicuam9pbigoc2VsZi5uYW1lLCBzdWZmaXgpKQ0KICAgICAgICByZXR1cm4gc2VsZi5tYW5hZ2VyLmdldExvZ2dlcihzdWZmaXgpDQoNCmNsYXNzIFJvb3RMb2dnZXIoTG9nZ2VyKToNCiAgICAiIiINCiAgICBBIHJvb3QgbG9nZ2VyIGlzIG5vdCB0aGF0IGRpZmZlcmVudCB0byBhbnkgb3RoZXIgbG9nZ2VyLCBleGNlcHQgdGhhdA0KICAgIGl0IG11c3QgaGF2ZSBhIGxvZ2dpbmcgbGV2ZWwgYW5kIHRoZXJlIGlzIG9ubHkgb25lIGluc3RhbmNlIG9mIGl0IGluDQogICAgdGhlIGhpZXJhcmNoeS4NCiAgICAiIiINCiAgICBkZWYgX19pbml0X18oc2VsZiwgbGV2ZWwpOg0KICAgICAgICAiIiINCiAgICAgICAgSW5pdGlhbGl6ZSB0aGUgbG9nZ2VyIHdpdGggdGhlIG5hbWUgInJvb3QiLg0KICAgICAgICAiIiINCiAgICAgICAgTG9nZ2VyLl9faW5pdF9fKHNlbGYsICJyb290IiwgbGV2ZWwpDQoNCl9sb2dnZXJDbGFzcyA9IExvZ2dlcg0KDQpjbGFzcyBMb2dnZXJBZGFwdGVyKG9iamVjdCk6DQogICAgIiIiDQogICAgQW4gYWRhcHRlciBmb3IgbG9nZ2VycyB3aGljaCBtYWtlcyBpdCBlYXNpZXIgdG8gc3BlY2lmeSBjb250ZXh0dWFsDQogICAgaW5mb3JtYXRpb24gaW4gbG9nZ2luZyBvdXRwdXQuDQogICAgIiIiDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgbG9nZ2VyLCBleHRyYSk6DQogICAgICAgICIiIg0KICAgICAgICBJbml0aWFsaXplIHRoZSBhZGFwdGVyIHdpdGggYSBsb2dnZXIgYW5kIGEgZGljdC1saWtlIG9iamVjdCB3aGljaA0KICAgICAgICBwcm92aWRlcyBjb250ZXh0dWFsIGluZm9ybWF0aW9uLiBUaGlzIGNvbnN0cnVjdG9yIHNpZ25hdHVyZSBhbGxvd3MNCiAgICAgICAgZWFzeSBzdGFja2luZyBvZiBMb2dnZXJBZGFwdGVycywgaWYgc28gZGVzaXJlZC4NCg0KICAgICAgICBZb3UgY2FuIGVmZmVjdGl2ZWx5IHBhc3Mga2V5d29yZCBhcmd1bWVudHMgYXMgc2hvd24gaW4gdGhlDQogICAgICAgIGZvbGxvd2luZyBleGFtcGxlOg0KDQogICAgICAgIGFkYXB0ZXIgPSBMb2dnZXJBZGFwdGVyKHNvbWVMb2dnZXIsIGRpY3QocDE9djEsIHAyPSJ2MiIpKQ0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5sb2dnZXIgPSBsb2dnZXINCiAgICAgICAgc2VsZi5leHRyYSA9IGV4dHJhDQoNCiAgICBkZWYgcHJvY2VzcyhzZWxmLCBtc2csIGt3YXJncyk6DQogICAgICAgICIiIg0KICAgICAgICBQcm9jZXNzIHRoZSBsb2dnaW5nIG1lc3NhZ2UgYW5kIGtleXdvcmQgYXJndW1lbnRzIHBhc3NlZCBpbiB0bw0KICAgICAgICBhIGxvZ2dpbmcgY2FsbCB0byBpbnNlcnQgY29udGV4dHVhbCBpbmZvcm1hdGlvbi4gWW91IGNhbiBlaXRoZXINCiAgICAgICAgbWFuaXB1bGF0ZSB0aGUgbWVzc2FnZSBpdHNlbGYsIHRoZSBrZXl3b3JkIGFyZ3Mgb3IgYm90aC4gUmV0dXJuDQogICAgICAgIHRoZSBtZXNzYWdlIGFuZCBrd2FyZ3MgbW9kaWZpZWQgKG9yIG5vdCkgdG8gc3VpdCB5b3VyIG5lZWRzLg0KDQogICAgICAgIE5vcm1hbGx5LCB5b3UnbGwgb25seSBuZWVkIHRvIG92ZXJyaWRlIHRoaXMgb25lIG1ldGhvZCBpbiBhDQogICAgICAgIExvZ2dlckFkYXB0ZXIgc3ViY2xhc3MgZm9yIHlvdXIgc3BlY2lmaWMgbmVlZHMuDQogICAgICAgICIiIg0KICAgICAgICBrd2FyZ3NbImV4dHJhIl0gPSBzZWxmLmV4dHJhDQogICAgICAgIHJldHVybiBtc2csIGt3YXJncw0KDQogICAgIw0KICAgICMgQm9pbGVycGxhdGUgY29udmVuaWVuY2UgbWV0aG9kcw0KICAgICMNCiAgICBkZWYgZGVidWcoc2VsZiwgbXNnLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAiIiINCiAgICAgICAgRGVsZWdhdGUgYSBkZWJ1ZyBjYWxsIHRvIHRoZSB1bmRlcmx5aW5nIGxvZ2dlci4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYubG9nKERFQlVHLCBtc2csICphcmdzLCAqKmt3YXJncykNCg0KICAgIGRlZiBpbmZvKHNlbGYsIG1zZywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgIiIiDQogICAgICAgIERlbGVnYXRlIGFuIGluZm8gY2FsbCB0byB0aGUgdW5kZXJseWluZyBsb2dnZXIuDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmxvZyhJTkZPLCBtc2csICphcmdzLCAqKmt3YXJncykNCg0KICAgIGRlZiB3YXJuaW5nKHNlbGYsIG1zZywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgIiIiDQogICAgICAgIERlbGVnYXRlIGEgd2FybmluZyBjYWxsIHRvIHRoZSB1bmRlcmx5aW5nIGxvZ2dlci4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYubG9nKFdBUk5JTkcsIG1zZywgKmFyZ3MsICoqa3dhcmdzKQ0KDQogICAgZGVmIHdhcm4oc2VsZiwgbXNnLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICB3YXJuaW5ncy53YXJuKCJUaGUgJ3dhcm4nIG1ldGhvZCBpcyBkZXByZWNhdGVkLCAiDQogICAgICAgICAgICAidXNlICd3YXJuaW5nJyBpbnN0ZWFkIiwgRGVwcmVjYXRpb25XYXJuaW5nLCAyKQ0KICAgICAgICBzZWxmLndhcm5pbmcobXNnLCAqYXJncywgKiprd2FyZ3MpDQoNCiAgICBkZWYgZXJyb3Ioc2VsZiwgbXNnLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICAgICAiIiINCiAgICAgICAgRGVsZWdhdGUgYW4gZXJyb3IgY2FsbCB0byB0aGUgdW5kZXJseWluZyBsb2dnZXIuDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmxvZyhFUlJPUiwgbXNnLCAqYXJncywgKiprd2FyZ3MpDQoNCiAgICBkZWYgZXhjZXB0aW9uKHNlbGYsIG1zZywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgIiIiDQogICAgICAgIERlbGVnYXRlIGFuIGV4Y2VwdGlvbiBjYWxsIHRvIHRoZSB1bmRlcmx5aW5nIGxvZ2dlci4NCiAgICAgICAgIiIiDQogICAgICAgIGt3YXJnc1siZXhjX2luZm8iXSA9IFRydWUNCiAgICAgICAgc2VsZi5sb2coRVJST1IsIG1zZywgKmFyZ3MsICoqa3dhcmdzKQ0KDQogICAgZGVmIGNyaXRpY2FsKHNlbGYsIG1zZywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgIiIiDQogICAgICAgIERlbGVnYXRlIGEgY3JpdGljYWwgY2FsbCB0byB0aGUgdW5kZXJseWluZyBsb2dnZXIuDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmxvZyhDUklUSUNBTCwgbXNnLCAqYXJncywgKiprd2FyZ3MpDQoNCiAgICBkZWYgbG9nKHNlbGYsIGxldmVsLCBtc2csICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgICIiIg0KICAgICAgICBEZWxlZ2F0ZSBhIGxvZyBjYWxsIHRvIHRoZSB1bmRlcmx5aW5nIGxvZ2dlciwgYWZ0ZXIgYWRkaW5nDQogICAgICAgIGNvbnRleHR1YWwgaW5mb3JtYXRpb24gZnJvbSB0aGlzIGFkYXB0ZXIgaW5zdGFuY2UuDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLmlzRW5hYmxlZEZvcihsZXZlbCk6DQogICAgICAgICAgICBtc2csIGt3YXJncyA9IHNlbGYucHJvY2Vzcyhtc2csIGt3YXJncykNCiAgICAgICAgICAgIHNlbGYubG9nZ2VyLl9sb2cobGV2ZWwsIG1zZywgYXJncywgKiprd2FyZ3MpDQoNCiAgICBkZWYgaXNFbmFibGVkRm9yKHNlbGYsIGxldmVsKToNCiAgICAgICAgIiIiDQogICAgICAgIElzIHRoaXMgbG9nZ2VyIGVuYWJsZWQgZm9yIGxldmVsICdsZXZlbCc/DQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLmxvZ2dlci5tYW5hZ2VyLmRpc2FibGUgPj0gbGV2ZWw6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgcmV0dXJuIGxldmVsID49IHNlbGYuZ2V0RWZmZWN0aXZlTGV2ZWwoKQ0KDQogICAgZGVmIHNldExldmVsKHNlbGYsIGxldmVsKToNCiAgICAgICAgIiIiDQogICAgICAgIFNldCB0aGUgc3BlY2lmaWVkIGxldmVsIG9uIHRoZSB1bmRlcmx5aW5nIGxvZ2dlci4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYubG9nZ2VyLnNldExldmVsKGxldmVsKQ0KDQogICAgZGVmIGdldEVmZmVjdGl2ZUxldmVsKHNlbGYpOg0KICAgICAgICAiIiINCiAgICAgICAgR2V0IHRoZSBlZmZlY3RpdmUgbGV2ZWwgZm9yIHRoZSB1bmRlcmx5aW5nIGxvZ2dlci4NCiAgICAgICAgIiIiDQogICAgICAgIHJldHVybiBzZWxmLmxvZ2dlci5nZXRFZmZlY3RpdmVMZXZlbCgpDQoNCiAgICBkZWYgaGFzSGFuZGxlcnMoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBTZWUgaWYgdGhlIHVuZGVybHlpbmcgbG9nZ2VyIGhhcyBhbnkgaGFuZGxlcnMuDQogICAgICAgICIiIg0KICAgICAgICByZXR1cm4gc2VsZi5sb2dnZXIuaGFzSGFuZGxlcnMoKQ0KDQpyb290ID0gUm9vdExvZ2dlcihXQVJOSU5HKQ0KTG9nZ2VyLnJvb3QgPSByb290DQpMb2dnZXIubWFuYWdlciA9IE1hbmFnZXIoTG9nZ2VyLnJvb3QpDQoNCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiMgQ29uZmlndXJhdGlvbiBjbGFzc2VzIGFuZCBmdW5jdGlvbnMNCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KQkFTSUNfRk9STUFUID0gIiUobGV2ZWxuYW1lKXM6JShuYW1lKXM6JShtZXNzYWdlKXMiDQoNCmRlZiBiYXNpY0NvbmZpZygqKmt3YXJncyk6DQogICAgIiIiDQogICAgRG8gYmFzaWMgY29uZmlndXJhdGlvbiBmb3IgdGhlIGxvZ2dpbmcgc3lzdGVtLg0KDQogICAgVGhpcyBmdW5jdGlvbiBkb2VzIG5vdGhpbmcgaWYgdGhlIHJvb3QgbG9nZ2VyIGFscmVhZHkgaGFzIGhhbmRsZXJzDQogICAgY29uZmlndXJlZC4gSXQgaXMgYSBjb252ZW5pZW5jZSBtZXRob2QgaW50ZW5kZWQgZm9yIHVzZSBieSBzaW1wbGUgc2NyaXB0cw0KICAgIHRvIGRvIG9uZS1zaG90IGNvbmZpZ3VyYXRpb24gb2YgdGhlIGxvZ2dpbmcgcGFja2FnZS4NCg0KICAgIFRoZSBkZWZhdWx0IGJlaGF2aW91ciBpcyB0byBjcmVhdGUgYSBTdHJlYW1IYW5kbGVyIHdoaWNoIHdyaXRlcyB0bw0KICAgIHN5cy5zdGRlcnIsIHNldCBhIGZvcm1hdHRlciB1c2luZyB0aGUgQkFTSUNfRk9STUFUIGZvcm1hdCBzdHJpbmcsIGFuZA0KICAgIGFkZCB0aGUgaGFuZGxlciB0byB0aGUgcm9vdCBsb2dnZXIuDQoNCiAgICBBIG51bWJlciBvZiBvcHRpb25hbCBrZXl3b3JkIGFyZ3VtZW50cyBtYXkgYmUgc3BlY2lmaWVkLCB3aGljaCBjYW4gYWx0ZXINCiAgICB0aGUgZGVmYXVsdCBiZWhhdmlvdXIuDQoNCiAgICBmaWxlbmFtZSAgU3BlY2lmaWVzIHRoYXQgYSBGaWxlSGFuZGxlciBiZSBjcmVhdGVkLCB1c2luZyB0aGUgc3BlY2lmaWVkDQogICAgICAgICAgICAgIGZpbGVuYW1lLCByYXRoZXIgdGhhbiBhIFN0cmVhbUhhbmRsZXIuDQogICAgZmlsZW1vZGUgIFNwZWNpZmllcyB0aGUgbW9kZSB0byBvcGVuIHRoZSBmaWxlLCBpZiBmaWxlbmFtZSBpcyBzcGVjaWZpZWQNCiAgICAgICAgICAgICAgKGlmIGZpbGVtb2RlIGlzIHVuc3BlY2lmaWVkLCBpdCBkZWZhdWx0cyB0byAnYScpLg0KICAgIGZvcm1hdCAgICBVc2UgdGhlIHNwZWNpZmllZCBmb3JtYXQgc3RyaW5nIGZvciB0aGUgaGFuZGxlci4NCiAgICBkYXRlZm10ICAgVXNlIHRoZSBzcGVjaWZpZWQgZGF0ZS90aW1lIGZvcm1hdC4NCiAgICBzdHlsZSAgICAgSWYgYSBmb3JtYXQgc3RyaW5nIGlzIHNwZWNpZmllZCwgdXNlIHRoaXMgdG8gc3BlY2lmeSB0aGUNCiAgICAgICAgICAgICAgdHlwZSBvZiBmb3JtYXQgc3RyaW5nIChwb3NzaWJsZSB2YWx1ZXMgJyUnLCAneycsICckJywgZm9yDQogICAgICAgICAgICAgICUtZm9ybWF0dGluZywgOm1ldGg6YHN0ci5mb3JtYXRgIGFuZCA6Y2xhc3M6YHN0cmluZy5UZW1wbGF0ZWANCiAgICAgICAgICAgICAgLSBkZWZhdWx0cyB0byAnJScpLg0KICAgIGxldmVsICAgICBTZXQgdGhlIHJvb3QgbG9nZ2VyIGxldmVsIHRvIHRoZSBzcGVjaWZpZWQgbGV2ZWwuDQogICAgc3RyZWFtICAgIFVzZSB0aGUgc3BlY2lmaWVkIHN0cmVhbSB0byBpbml0aWFsaXplIHRoZSBTdHJlYW1IYW5kbGVyLiBOb3RlDQogICAgICAgICAgICAgIHRoYXQgdGhpcyBhcmd1bWVudCBpcyBpbmNvbXBhdGlibGUgd2l0aCAnZmlsZW5hbWUnIC0gaWYgYm90aA0KICAgICAgICAgICAgICBhcmUgcHJlc2VudCwgJ3N0cmVhbScgaXMgaWdub3JlZC4NCiAgICBoYW5kbGVycyAgSWYgc3BlY2lmaWVkLCB0aGlzIHNob3VsZCBiZSBhbiBpdGVyYWJsZSBvZiBhbHJlYWR5IGNyZWF0ZWQNCiAgICAgICAgICAgICAgaGFuZGxlcnMsIHdoaWNoIHdpbGwgYmUgYWRkZWQgdG8gdGhlIHJvb3QgaGFuZGxlci4gQW55IGhhbmRsZXINCiAgICAgICAgICAgICAgaW4gdGhlIGxpc3Qgd2hpY2ggZG9lcyBub3QgaGF2ZSBhIGZvcm1hdHRlciBhc3NpZ25lZCB3aWxsIGJlDQogICAgICAgICAgICAgIGFzc2lnbmVkIHRoZSBmb3JtYXR0ZXIgY3JlYXRlZCBpbiB0aGlzIGZ1bmN0aW9uLg0KDQogICAgTm90ZSB0aGF0IHlvdSBjb3VsZCBzcGVjaWZ5IGEgc3RyZWFtIGNyZWF0ZWQgdXNpbmcgb3BlbihmaWxlbmFtZSwgbW9kZSkNCiAgICByYXRoZXIgdGhhbiBwYXNzaW5nIHRoZSBmaWxlbmFtZSBhbmQgbW9kZSBpbi4gSG93ZXZlciwgaXQgc2hvdWxkIGJlDQogICAgcmVtZW1iZXJlZCB0aGF0IFN0cmVhbUhhbmRsZXIgZG9lcyBub3QgY2xvc2UgaXRzIHN0cmVhbSAoc2luY2UgaXQgbWF5IGJlDQogICAgdXNpbmcgc3lzLnN0ZG91dCBvciBzeXMuc3RkZXJyKSwgd2hlcmVhcyBGaWxlSGFuZGxlciBjbG9zZXMgaXRzIHN0cmVhbQ0KICAgIHdoZW4gdGhlIGhhbmRsZXIgaXMgY2xvc2VkLg0KDQogICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAzLjINCiAgICAgICBBZGRlZCB0aGUgYGBzdHlsZWBgIHBhcmFtZXRlci4NCg0KICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMy4zDQogICAgICAgQWRkZWQgdGhlIGBgaGFuZGxlcnNgYCBwYXJhbWV0ZXIuIEEgYGBWYWx1ZUVycm9yYGAgaXMgbm93IHRocm93biBmb3INCiAgICAgICBpbmNvbXBhdGlibGUgYXJndW1lbnRzIChlLmcuIGBgaGFuZGxlcnNgYCBzcGVjaWZpZWQgdG9nZXRoZXIgd2l0aA0KICAgICAgIGBgZmlsZW5hbWVgYC9gYGZpbGVtb2RlYGAsIG9yIGBgZmlsZW5hbWVgYC9gYGZpbGVtb2RlYGAgc3BlY2lmaWVkDQogICAgICAgdG9nZXRoZXIgd2l0aCBgYHN0cmVhbWBgLCBvciBgYGhhbmRsZXJzYGAgc3BlY2lmaWVkIHRvZ2V0aGVyIHdpdGgNCiAgICAgICBgYHN0cmVhbWBgLg0KICAgICIiIg0KICAgICMgQWRkIHRocmVhZCBzYWZldHkgaW4gY2FzZSBzb21lb25lIG1pc3Rha2VubHkgY2FsbHMNCiAgICAjIGJhc2ljQ29uZmlnKCkgZnJvbSBtdWx0aXBsZSB0aHJlYWRzDQogICAgX2FjcXVpcmVMb2NrKCkNCiAgICB0cnk6DQogICAgICAgIGlmIGxlbihyb290LmhhbmRsZXJzKSA9PSAwOg0KICAgICAgICAgICAgaGFuZGxlcnMgPSBrd2FyZ3MuZ2V0KCJoYW5kbGVycyIpDQogICAgICAgICAgICBpZiBoYW5kbGVycyBpcyBOb25lOg0KICAgICAgICAgICAgICAgIGlmICJzdHJlYW0iIGluIGt3YXJncyBhbmQgImZpbGVuYW1lIiBpbiBrd2FyZ3M6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIidzdHJlYW0nIGFuZCAnZmlsZW5hbWUnIHNob3VsZCBub3QgYmUgIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzcGVjaWZpZWQgdG9nZXRoZXIiKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBpZiAic3RyZWFtIiBpbiBrd2FyZ3Mgb3IgImZpbGVuYW1lIiBpbiBrd2FyZ3M6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIidzdHJlYW0nIG9yICdmaWxlbmFtZScgc2hvdWxkIG5vdCBiZSAiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNwZWNpZmllZCB0b2dldGhlciB3aXRoICdoYW5kbGVycyciKQ0KICAgICAgICAgICAgaWYgaGFuZGxlcnMgaXMgTm9uZToNCiAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGt3YXJncy5nZXQoImZpbGVuYW1lIikNCiAgICAgICAgICAgICAgICBpZiBmaWxlbmFtZToNCiAgICAgICAgICAgICAgICAgICAgbW9kZSA9IGt3YXJncy5nZXQoImZpbGVtb2RlIiwgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICBoID0gRmlsZUhhbmRsZXIoZmlsZW5hbWUsIG1vZGUpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgc3RyZWFtID0ga3dhcmdzLmdldCgic3RyZWFtIikNCiAgICAgICAgICAgICAgICAgICAgaCA9IFN0cmVhbUhhbmRsZXIoc3RyZWFtKQ0KICAgICAgICAgICAgICAgIGhhbmRsZXJzID0gW2hdDQogICAgICAgICAgICBmcyA9IGt3YXJncy5nZXQoImZvcm1hdCIsIEJBU0lDX0ZPUk1BVCkNCiAgICAgICAgICAgIGRmcyA9IGt3YXJncy5nZXQoImRhdGVmbXQiLCBOb25lKQ0KICAgICAgICAgICAgc3R5bGUgPSBrd2FyZ3MuZ2V0KCJzdHlsZSIsICclJykNCiAgICAgICAgICAgIGZtdCA9IEZvcm1hdHRlcihmcywgZGZzLCBzdHlsZSkNCiAgICAgICAgICAgIGZvciBoIGluIGhhbmRsZXJzOg0KICAgICAgICAgICAgICAgIGlmIGguZm9ybWF0dGVyIGlzIE5vbmU6DQogICAgICAgICAgICAgICAgICAgIGguc2V0Rm9ybWF0dGVyKGZtdCkNCiAgICAgICAgICAgICAgICByb290LmFkZEhhbmRsZXIoaCkNCiAgICAgICAgICAgIGxldmVsID0ga3dhcmdzLmdldCgibGV2ZWwiKQ0KICAgICAgICAgICAgaWYgbGV2ZWwgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgcm9vdC5zZXRMZXZlbChsZXZlbCkNCiAgICBmaW5hbGx5Og0KICAgICAgICBfcmVsZWFzZUxvY2soKQ0KDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQojIFV0aWxpdHkgZnVuY3Rpb25zIGF0IG1vZHVsZSBsZXZlbC4NCiMgQmFzaWNhbGx5IGRlbGVnYXRlIGV2ZXJ5dGhpbmcgdG8gdGhlIHJvb3QgbG9nZ2VyLg0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpkZWYgZ2V0TG9nZ2VyKG5hbWU9Tm9uZSk6DQogICAgIiIiDQogICAgUmV0dXJuIGEgbG9nZ2VyIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLCBjcmVhdGluZyBpdCBpZiBuZWNlc3NhcnkuDQoNCiAgICBJZiBubyBuYW1lIGlzIHNwZWNpZmllZCwgcmV0dXJuIHRoZSByb290IGxvZ2dlci4NCiAgICAiIiINCiAgICBpZiBuYW1lOg0KICAgICAgICByZXR1cm4gTG9nZ2VyLm1hbmFnZXIuZ2V0TG9nZ2VyKG5hbWUpDQogICAgZWxzZToNCiAgICAgICAgcmV0dXJuIHJvb3QNCg0KZGVmIGNyaXRpY2FsKG1zZywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAiIiINCiAgICBMb2cgYSBtZXNzYWdlIHdpdGggc2V2ZXJpdHkgJ0NSSVRJQ0FMJyBvbiB0aGUgcm9vdCBsb2dnZXIuIElmIHRoZSBsb2dnZXINCiAgICBoYXMgbm8gaGFuZGxlcnMsIGNhbGwgYmFzaWNDb25maWcoKSB0byBhZGQgYSBjb25zb2xlIGhhbmRsZXIgd2l0aCBhDQogICAgcHJlLWRlZmluZWQgZm9ybWF0Lg0KICAgICIiIg0KICAgIGlmIGxlbihyb290LmhhbmRsZXJzKSA9PSAwOg0KICAgICAgICBiYXNpY0NvbmZpZygpDQogICAgcm9vdC5jcml0aWNhbChtc2csICphcmdzLCAqKmt3YXJncykNCg0KZmF0YWwgPSBjcml0aWNhbA0KDQpkZWYgZXJyb3IobXNnLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICIiIg0KICAgIExvZyBhIG1lc3NhZ2Ugd2l0aCBzZXZlcml0eSAnRVJST1InIG9uIHRoZSByb290IGxvZ2dlci4gSWYgdGhlIGxvZ2dlciBoYXMNCiAgICBubyBoYW5kbGVycywgY2FsbCBiYXNpY0NvbmZpZygpIHRvIGFkZCBhIGNvbnNvbGUgaGFuZGxlciB3aXRoIGEgcHJlLWRlZmluZWQNCiAgICBmb3JtYXQuDQogICAgIiIiDQogICAgaWYgbGVuKHJvb3QuaGFuZGxlcnMpID09IDA6DQogICAgICAgIGJhc2ljQ29uZmlnKCkNCiAgICByb290LmVycm9yKG1zZywgKmFyZ3MsICoqa3dhcmdzKQ0KDQpkZWYgZXhjZXB0aW9uKG1zZywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAiIiINCiAgICBMb2cgYSBtZXNzYWdlIHdpdGggc2V2ZXJpdHkgJ0VSUk9SJyBvbiB0aGUgcm9vdCBsb2dnZXIsIHdpdGggZXhjZXB0aW9uDQogICAgaW5mb3JtYXRpb24uIElmIHRoZSBsb2dnZXIgaGFzIG5vIGhhbmRsZXJzLCBiYXNpY0NvbmZpZygpIGlzIGNhbGxlZCB0byBhZGQNCiAgICBhIGNvbnNvbGUgaGFuZGxlciB3aXRoIGEgcHJlLWRlZmluZWQgZm9ybWF0Lg0KICAgICIiIg0KICAgIGt3YXJnc1snZXhjX2luZm8nXSA9IFRydWUNCiAgICBlcnJvcihtc2csICphcmdzLCAqKmt3YXJncykNCg0KZGVmIHdhcm5pbmcobXNnLCAqYXJncywgKiprd2FyZ3MpOg0KICAgICIiIg0KICAgIExvZyBhIG1lc3NhZ2Ugd2l0aCBzZXZlcml0eSAnV0FSTklORycgb24gdGhlIHJvb3QgbG9nZ2VyLiBJZiB0aGUgbG9nZ2VyIGhhcw0KICAgIG5vIGhhbmRsZXJzLCBjYWxsIGJhc2ljQ29uZmlnKCkgdG8gYWRkIGEgY29uc29sZSBoYW5kbGVyIHdpdGggYSBwcmUtZGVmaW5lZA0KICAgIGZvcm1hdC4NCiAgICAiIiINCiAgICBpZiBsZW4ocm9vdC5oYW5kbGVycykgPT0gMDoNCiAgICAgICAgYmFzaWNDb25maWcoKQ0KICAgIHJvb3Qud2FybmluZyhtc2csICphcmdzLCAqKmt3YXJncykNCg0KZGVmIHdhcm4obXNnLCAqYXJncywgKiprd2FyZ3MpOg0KICAgIHdhcm5pbmdzLndhcm4oIlRoZSAnd2FybicgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCwgIg0KICAgICAgICAidXNlICd3YXJuaW5nJyBpbnN0ZWFkIiwgRGVwcmVjYXRpb25XYXJuaW5nLCAyKQ0KICAgIHdhcm5pbmcobXNnLCAqYXJncywgKiprd2FyZ3MpDQoNCmRlZiBpbmZvKG1zZywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAiIiINCiAgICBMb2cgYSBtZXNzYWdlIHdpdGggc2V2ZXJpdHkgJ0lORk8nIG9uIHRoZSByb290IGxvZ2dlci4gSWYgdGhlIGxvZ2dlciBoYXMNCiAgICBubyBoYW5kbGVycywgY2FsbCBiYXNpY0NvbmZpZygpIHRvIGFkZCBhIGNvbnNvbGUgaGFuZGxlciB3aXRoIGEgcHJlLWRlZmluZWQNCiAgICBmb3JtYXQuDQogICAgIiIiDQogICAgaWYgbGVuKHJvb3QuaGFuZGxlcnMpID09IDA6DQogICAgICAgIGJhc2ljQ29uZmlnKCkNCiAgICByb290LmluZm8obXNnLCAqYXJncywgKiprd2FyZ3MpDQoNCmRlZiBkZWJ1Zyhtc2csICphcmdzLCAqKmt3YXJncyk6DQogICAgIiIiDQogICAgTG9nIGEgbWVzc2FnZSB3aXRoIHNldmVyaXR5ICdERUJVRycgb24gdGhlIHJvb3QgbG9nZ2VyLiBJZiB0aGUgbG9nZ2VyIGhhcw0KICAgIG5vIGhhbmRsZXJzLCBjYWxsIGJhc2ljQ29uZmlnKCkgdG8gYWRkIGEgY29uc29sZSBoYW5kbGVyIHdpdGggYSBwcmUtZGVmaW5lZA0KICAgIGZvcm1hdC4NCiAgICAiIiINCiAgICBpZiBsZW4ocm9vdC5oYW5kbGVycykgPT0gMDoNCiAgICAgICAgYmFzaWNDb25maWcoKQ0KICAgIHJvb3QuZGVidWcobXNnLCAqYXJncywgKiprd2FyZ3MpDQoNCmRlZiBsb2cobGV2ZWwsIG1zZywgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAiIiINCiAgICBMb2cgJ21zZyAlIGFyZ3MnIHdpdGggdGhlIGludGVnZXIgc2V2ZXJpdHkgJ2xldmVsJyBvbiB0aGUgcm9vdCBsb2dnZXIuIElmDQogICAgdGhlIGxvZ2dlciBoYXMgbm8gaGFuZGxlcnMsIGNhbGwgYmFzaWNDb25maWcoKSB0byBhZGQgYSBjb25zb2xlIGhhbmRsZXINCiAgICB3aXRoIGEgcHJlLWRlZmluZWQgZm9ybWF0Lg0KICAgICIiIg0KICAgIGlmIGxlbihyb290LmhhbmRsZXJzKSA9PSAwOg0KICAgICAgICBiYXNpY0NvbmZpZygpDQogICAgcm9vdC5sb2cobGV2ZWwsIG1zZywgKmFyZ3MsICoqa3dhcmdzKQ0KDQpkZWYgZGlzYWJsZShsZXZlbCk6DQogICAgIiIiDQogICAgRGlzYWJsZSBhbGwgbG9nZ2luZyBjYWxscyBvZiBzZXZlcml0eSAnbGV2ZWwnIGFuZCBiZWxvdy4NCiAgICAiIiINCiAgICByb290Lm1hbmFnZXIuZGlzYWJsZSA9IGxldmVsDQoNCmRlZiBzaHV0ZG93bihoYW5kbGVyTGlzdD1faGFuZGxlckxpc3QpOg0KICAgICIiIg0KICAgIFBlcmZvcm0gYW55IGNsZWFudXAgYWN0aW9ucyBpbiB0aGUgbG9nZ2luZyBzeXN0ZW0gKGUuZy4gZmx1c2hpbmcNCiAgICBidWZmZXJzKS4NCg0KICAgIFNob3VsZCBiZSBjYWxsZWQgYXQgYXBwbGljYXRpb24gZXhpdC4NCiAgICAiIiINCiAgICBmb3Igd3IgaW4gcmV2ZXJzZWQoaGFuZGxlckxpc3RbOl0pOg0KICAgICAgICAjZXJyb3JzIG1pZ2h0IG9jY3VyLCBmb3IgZXhhbXBsZSwgaWYgZmlsZXMgYXJlIGxvY2tlZA0KICAgICAgICAjd2UganVzdCBpZ25vcmUgdGhlbSBpZiByYWlzZUV4Y2VwdGlvbnMgaXMgbm90IHNldA0KICAgICAgICB0cnk6DQogICAgICAgICAgICBoID0gd3IoKQ0KICAgICAgICAgICAgaWYgaDoNCiAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgIGguYWNxdWlyZSgpDQogICAgICAgICAgICAgICAgICAgIGguZmx1c2goKQ0KICAgICAgICAgICAgICAgICAgICBoLmNsb3NlKCkNCiAgICAgICAgICAgICAgICBleGNlcHQgKElPRXJyb3IsIFZhbHVlRXJyb3IpOg0KICAgICAgICAgICAgICAgICAgICAjIElnbm9yZSBlcnJvcnMgd2hpY2ggbWlnaHQgYmUgY2F1c2VkDQogICAgICAgICAgICAgICAgICAgICMgYmVjYXVzZSBoYW5kbGVycyBoYXZlIGJlZW4gY2xvc2VkIGJ1dA0KICAgICAgICAgICAgICAgICAgICAjIHJlZmVyZW5jZXMgdG8gdGhlbSBhcmUgc3RpbGwgYXJvdW5kIGF0DQogICAgICAgICAgICAgICAgICAgICMgYXBwbGljYXRpb24gZXhpdC4NCiAgICAgICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICAgICAgICAgIGgucmVsZWFzZSgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIGlmIHJhaXNlRXhjZXB0aW9uczoNCiAgICAgICAgICAgICAgICByYWlzZQ0KICAgICAgICAgICAgI2Vsc2UsIHN3YWxsb3cNCg0KI0xldCdzIHRyeSBhbmQgc2h1dGRvd24gYXV0b21hdGljYWxseSBvbiBhcHBsaWNhdGlvbiBleGl0Li4uDQppbXBvcnQgYXRleGl0DQphdGV4aXQucmVnaXN0ZXIoc2h1dGRvd24pDQoNCiMgTnVsbCBoYW5kbGVyDQoNCmNsYXNzIE51bGxIYW5kbGVyKEhhbmRsZXIpOg0KICAgICIiIg0KICAgIFRoaXMgaGFuZGxlciBkb2VzIG5vdGhpbmcuIEl0J3MgaW50ZW5kZWQgdG8gYmUgdXNlZCB0byBhdm9pZCB0aGUNCiAgICAiTm8gaGFuZGxlcnMgY291bGQgYmUgZm91bmQgZm9yIGxvZ2dlciBYWFgiIG9uZS1vZmYgd2FybmluZy4gVGhpcyBpcw0KICAgIGltcG9ydGFudCBmb3IgbGlicmFyeSBjb2RlLCB3aGljaCBtYXkgY29udGFpbiBjb2RlIHRvIGxvZyBldmVudHMuIElmIGEgdXNlcg0KICAgIG9mIHRoZSBsaWJyYXJ5IGRvZXMgbm90IGNvbmZpZ3VyZSBsb2dnaW5nLCB0aGUgb25lLW9mZiB3YXJuaW5nIG1pZ2h0IGJlDQogICAgcHJvZHVjZWQ7IHRvIGF2b2lkIHRoaXMsIHRoZSBsaWJyYXJ5IGRldmVsb3BlciBzaW1wbHkgbmVlZHMgdG8gaW5zdGFudGlhdGUNCiAgICBhIE51bGxIYW5kbGVyIGFuZCBhZGQgaXQgdG8gdGhlIHRvcC1sZXZlbCBsb2dnZXIgb2YgdGhlIGxpYnJhcnkgbW9kdWxlIG9yDQogICAgcGFja2FnZS4NCiAgICAiIiINCiAgICBkZWYgaGFuZGxlKHNlbGYsIHJlY29yZCk6DQogICAgICAgICIiIlN0dWIuIiIiDQoNCiAgICBkZWYgZW1pdChzZWxmLCByZWNvcmQpOg0KICAgICAgICAiIiJTdHViLiIiIg0KDQogICAgZGVmIGNyZWF0ZUxvY2soc2VsZik6DQogICAgICAgIHNlbGYubG9jayA9IE5vbmUNCg0KIyBXYXJuaW5ncyBpbnRlZ3JhdGlvbg0KDQpfd2FybmluZ3Nfc2hvd3dhcm5pbmcgPSBOb25lDQoNCmRlZiBfc2hvd3dhcm5pbmcobWVzc2FnZSwgY2F0ZWdvcnksIGZpbGVuYW1lLCBsaW5lbm8sIGZpbGU9Tm9uZSwgbGluZT1Ob25lKToNCiAgICAiIiINCiAgICBJbXBsZW1lbnRhdGlvbiBvZiBzaG93d2FybmluZ3Mgd2hpY2ggcmVkaXJlY3RzIHRvIGxvZ2dpbmcsIHdoaWNoIHdpbGwgZmlyc3QNCiAgICBjaGVjayB0byBzZWUgaWYgdGhlIGZpbGUgcGFyYW1ldGVyIGlzIE5vbmUuIElmIGEgZmlsZSBpcyBzcGVjaWZpZWQsIGl0IHdpbGwNCiAgICBkZWxlZ2F0ZSB0byB0aGUgb3JpZ2luYWwgd2FybmluZ3MgaW1wbGVtZW50YXRpb24gb2Ygc2hvd3dhcm5pbmcuIE90aGVyd2lzZSwNCiAgICBpdCB3aWxsIGNhbGwgd2FybmluZ3MuZm9ybWF0d2FybmluZyBhbmQgd2lsbCBsb2cgdGhlIHJlc3VsdGluZyBzdHJpbmcgdG8gYQ0KICAgIHdhcm5pbmdzIGxvZ2dlciBuYW1lZCAicHkud2FybmluZ3MiIHdpdGggbGV2ZWwgbG9nZ2luZy5XQVJOSU5HLg0KICAgICIiIg0KICAgIGlmIGZpbGUgaXMgbm90IE5vbmU6DQogICAgICAgIGlmIF93YXJuaW5nc19zaG93d2FybmluZyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIF93YXJuaW5nc19zaG93d2FybmluZyhtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubywgZmlsZSwgbGluZSkNCiAgICBlbHNlOg0KICAgICAgICBzID0gd2FybmluZ3MuZm9ybWF0d2FybmluZyhtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubywgbGluZSkNCiAgICAgICAgbG9nZ2VyID0gZ2V0TG9nZ2VyKCJweS53YXJuaW5ncyIpDQogICAgICAgIGlmIG5vdCBsb2dnZXIuaGFuZGxlcnM6DQogICAgICAgICAgICBsb2dnZXIuYWRkSGFuZGxlcihOdWxsSGFuZGxlcigpKQ0KICAgICAgICBsb2dnZXIud2FybmluZygiJXMiLCBzKQ0KDQpkZWYgY2FwdHVyZVdhcm5pbmdzKGNhcHR1cmUpOg0KICAgICIiIg0KICAgIElmIGNhcHR1cmUgaXMgdHJ1ZSwgcmVkaXJlY3QgYWxsIHdhcm5pbmdzIHRvIHRoZSBsb2dnaW5nIHBhY2thZ2UuDQogICAgSWYgY2FwdHVyZSBpcyBGYWxzZSwgZW5zdXJlIHRoYXQgd2FybmluZ3MgYXJlIG5vdCByZWRpcmVjdGVkIHRvIGxvZ2dpbmcNCiAgICBidXQgdG8gdGhlaXIgb3JpZ2luYWwgZGVzdGluYXRpb25zLg0KICAgICIiIg0KICAgIGdsb2JhbCBfd2FybmluZ3Nfc2hvd3dhcm5pbmcNCiAgICBpZiBjYXB0dXJlOg0KICAgICAgICBpZiBfd2FybmluZ3Nfc2hvd3dhcm5pbmcgaXMgTm9uZToNCiAgICAgICAgICAgIF93YXJuaW5nc19zaG93d2FybmluZyA9IHdhcm5pbmdzLnNob3d3YXJuaW5nDQogICAgICAgICAgICB3YXJuaW5ncy5zaG93d2FybmluZyA9IF9zaG93d2FybmluZw0KICAgIGVsc2U6DQogICAgICAgIGlmIF93YXJuaW5nc19zaG93d2FybmluZyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIHdhcm5pbmdzLnNob3d3YXJuaW5nID0gX3dhcm5pbmdzX3Nob3d3YXJuaW5nDQogICAgICAgICAgICBfd2FybmluZ3Nfc2hvd3dhcm5pbmcgPSBOb25lDQo=',
'/Lib/logging/config.py':'IyBDb3B5cmlnaHQgMjAwMS0yMDEwIGJ5IFZpbmF5IFNhamlwLiBBbGwgUmlnaHRzIFJlc2VydmVkLg0KIw0KIyBQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGFuZCBpdHMNCiMgZG9jdW1lbnRhdGlvbiBmb3IgYW55IHB1cnBvc2UgYW5kIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLA0KIyBwcm92aWRlZCB0aGF0IHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFwcGVhciBpbiBhbGwgY29waWVzIGFuZCB0aGF0DQojIGJvdGggdGhhdCBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIGFwcGVhciBpbg0KIyBzdXBwb3J0aW5nIGRvY3VtZW50YXRpb24sIGFuZCB0aGF0IHRoZSBuYW1lIG9mIFZpbmF5IFNhamlwDQojIG5vdCBiZSB1c2VkIGluIGFkdmVydGlzaW5nIG9yIHB1YmxpY2l0eSBwZXJ0YWluaW5nIHRvIGRpc3RyaWJ1dGlvbg0KIyBvZiB0aGUgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYywgd3JpdHRlbiBwcmlvciBwZXJtaXNzaW9uLg0KIyBWSU5BWSBTQUpJUCBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSCBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSwgSU5DTFVESU5HDQojIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTA0KIyBWSU5BWSBTQUpJUCBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBJTkRJUkVDVCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1INCiMgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTSBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSDQojIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUiBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUDQojIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuDQoNCiIiIg0KQ29uZmlndXJhdGlvbiBmdW5jdGlvbnMgZm9yIHRoZSBsb2dnaW5nIHBhY2thZ2UgZm9yIFB5dGhvbi4gVGhlIGNvcmUgcGFja2FnZQ0KaXMgYmFzZWQgb24gUEVQIDI4MiBhbmQgY29tbWVudHMgdGhlcmV0byBpbiBjb21wLmxhbmcucHl0aG9uLCBhbmQgaW5mbHVlbmNlZA0KYnkgQXBhY2hlJ3MgbG9nNGogc3lzdGVtLg0KDQpDb3B5cmlnaHQgKEMpIDIwMDEtMjAxMCBWaW5heSBTYWppcC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4NCg0KVG8gdXNlLCBzaW1wbHkgJ2ltcG9ydCBsb2dnaW5nJyBhbmQgbG9nIGF3YXkhDQoiIiINCg0KaW1wb3J0IHN5cywgbG9nZ2luZywgbG9nZ2luZy5oYW5kbGVycywgc29ja2V0LCBzdHJ1Y3QsIHRyYWNlYmFjaywgcmUNCmltcG9ydCBpbw0KDQp0cnk6DQogICAgaW1wb3J0IF90aHJlYWQgYXMgdGhyZWFkDQogICAgaW1wb3J0IHRocmVhZGluZw0KZXhjZXB0IEltcG9ydEVycm9yOiAjcHJhZ21hOiBubyBjb3Zlcg0KICAgIHRocmVhZCA9IE5vbmUNCg0KZnJvbSBzb2NrZXRzZXJ2ZXIgaW1wb3J0IFRocmVhZGluZ1RDUFNlcnZlciwgU3RyZWFtUmVxdWVzdEhhbmRsZXINCg0KDQpERUZBVUxUX0xPR0dJTkdfQ09ORklHX1BPUlQgPSA5MDMwDQoNCmlmIHN5cy5wbGF0Zm9ybSA9PSAid2luMzIiOg0KICAgIFJFU0VUX0VSUk9SID0gMTAwNTQgICAjV1NBRUNPTk5SRVNFVA0KZWxzZToNCiAgICBSRVNFVF9FUlJPUiA9IDEwNCAgICAgI0VDT05OUkVTRVQNCg0KIw0KIyAgIFRoZSBmb2xsb3dpbmcgY29kZSBpbXBsZW1lbnRzIGEgc29ja2V0IGxpc3RlbmVyIGZvciBvbi10aGUtZmx5DQojICAgcmVjb25maWd1cmF0aW9uIG9mIGxvZ2dpbmcuDQojDQojICAgX2xpc3RlbmVyIGhvbGRzIHRoZSBzZXJ2ZXIgb2JqZWN0IGRvaW5nIHRoZSBsaXN0ZW5pbmcNCl9saXN0ZW5lciA9IE5vbmUNCg0KZGVmIGZpbGVDb25maWcoZm5hbWUsIGRlZmF1bHRzPU5vbmUsIGRpc2FibGVfZXhpc3RpbmdfbG9nZ2Vycz1UcnVlKToNCiAgICAiIiINCiAgICBSZWFkIHRoZSBsb2dnaW5nIGNvbmZpZ3VyYXRpb24gZnJvbSBhIENvbmZpZ1BhcnNlci1mb3JtYXQgZmlsZS4NCg0KICAgIFRoaXMgY2FuIGJlIGNhbGxlZCBzZXZlcmFsIHRpbWVzIGZyb20gYW4gYXBwbGljYXRpb24sIGFsbG93aW5nIGFuIGVuZCB1c2VyDQogICAgdGhlIGFiaWxpdHkgdG8gc2VsZWN0IGZyb20gdmFyaW91cyBwcmUtY2FubmVkIGNvbmZpZ3VyYXRpb25zIChpZiB0aGUNCiAgICBkZXZlbG9wZXIgcHJvdmlkZXMgYSBtZWNoYW5pc20gdG8gcHJlc2VudCB0aGUgY2hvaWNlcyBhbmQgbG9hZCB0aGUgY2hvc2VuDQogICAgY29uZmlndXJhdGlvbikuDQogICAgIiIiDQogICAgaW1wb3J0IGNvbmZpZ3BhcnNlcg0KDQogICAgY3AgPSBjb25maWdwYXJzZXIuQ29uZmlnUGFyc2VyKGRlZmF1bHRzKQ0KICAgIGlmIGhhc2F0dHIoZm5hbWUsICdyZWFkbGluZScpOg0KICAgICAgICBjcC5yZWFkX2ZpbGUoZm5hbWUpDQogICAgZWxzZToNCiAgICAgICAgY3AucmVhZChmbmFtZSkNCg0KICAgIGZvcm1hdHRlcnMgPSBfY3JlYXRlX2Zvcm1hdHRlcnMoY3ApDQoNCiAgICAjIGNyaXRpY2FsIHNlY3Rpb24NCiAgICBsb2dnaW5nLl9hY3F1aXJlTG9jaygpDQogICAgdHJ5Og0KICAgICAgICBsb2dnaW5nLl9oYW5kbGVycy5jbGVhcigpDQogICAgICAgIGRlbCBsb2dnaW5nLl9oYW5kbGVyTGlzdFs6XQ0KICAgICAgICAjIEhhbmRsZXJzIGFkZCB0aGVtc2VsdmVzIHRvIGxvZ2dpbmcuX2hhbmRsZXJzDQogICAgICAgIGhhbmRsZXJzID0gX2luc3RhbGxfaGFuZGxlcnMoY3AsIGZvcm1hdHRlcnMpDQogICAgICAgIF9pbnN0YWxsX2xvZ2dlcnMoY3AsIGhhbmRsZXJzLCBkaXNhYmxlX2V4aXN0aW5nX2xvZ2dlcnMpDQogICAgZmluYWxseToNCiAgICAgICAgbG9nZ2luZy5fcmVsZWFzZUxvY2soKQ0KDQoNCmRlZiBfcmVzb2x2ZShuYW1lKToNCiAgICAiIiJSZXNvbHZlIGEgZG90dGVkIG5hbWUgdG8gYSBnbG9iYWwgb2JqZWN0LiIiIg0KICAgIG5hbWUgPSBuYW1lLnNwbGl0KCcuJykNCiAgICB1c2VkID0gbmFtZS5wb3AoMCkNCiAgICBmb3VuZCA9IF9faW1wb3J0X18odXNlZCkNCiAgICBmb3IgbiBpbiBuYW1lOg0KICAgICAgICB1c2VkID0gdXNlZCArICcuJyArIG4NCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZm91bmQgPSBnZXRhdHRyKGZvdW5kLCBuKQ0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICBfX2ltcG9ydF9fKHVzZWQpDQogICAgICAgICAgICBmb3VuZCA9IGdldGF0dHIoZm91bmQsIG4pDQogICAgcmV0dXJuIGZvdW5kDQoNCmRlZiBfc3RyaXBfc3BhY2VzKGFsaXN0KToNCiAgICByZXR1cm4gbWFwKGxhbWJkYSB4OiB4LnN0cmlwKCksIGFsaXN0KQ0KDQpkZWYgX2NyZWF0ZV9mb3JtYXR0ZXJzKGNwKToNCiAgICAiIiJDcmVhdGUgYW5kIHJldHVybiBmb3JtYXR0ZXJzIiIiDQogICAgZmxpc3QgPSBjcFsiZm9ybWF0dGVycyJdWyJrZXlzIl0NCiAgICBpZiBub3QgbGVuKGZsaXN0KToNCiAgICAgICAgcmV0dXJuIHt9DQogICAgZmxpc3QgPSBmbGlzdC5zcGxpdCgiLCIpDQogICAgZmxpc3QgPSBfc3RyaXBfc3BhY2VzKGZsaXN0KQ0KICAgIGZvcm1hdHRlcnMgPSB7fQ0KICAgIGZvciBmb3JtIGluIGZsaXN0Og0KICAgICAgICBzZWN0bmFtZSA9ICJmb3JtYXR0ZXJfJXMiICUgZm9ybQ0KICAgICAgICBmcyA9IGNwLmdldChzZWN0bmFtZSwgImZvcm1hdCIsIHJhdz1UcnVlLCBmYWxsYmFjaz1Ob25lKQ0KICAgICAgICBkZnMgPSBjcC5nZXQoc2VjdG5hbWUsICJkYXRlZm10IiwgcmF3PVRydWUsIGZhbGxiYWNrPU5vbmUpDQogICAgICAgIGMgPSBsb2dnaW5nLkZvcm1hdHRlcg0KICAgICAgICBjbGFzc19uYW1lID0gY3Bbc2VjdG5hbWVdLmdldCgiY2xhc3MiKQ0KICAgICAgICBpZiBjbGFzc19uYW1lOg0KICAgICAgICAgICAgYyA9IF9yZXNvbHZlKGNsYXNzX25hbWUpDQogICAgICAgIGYgPSBjKGZzLCBkZnMpDQogICAgICAgIGZvcm1hdHRlcnNbZm9ybV0gPSBmDQogICAgcmV0dXJuIGZvcm1hdHRlcnMNCg0KDQpkZWYgX2luc3RhbGxfaGFuZGxlcnMoY3AsIGZvcm1hdHRlcnMpOg0KICAgICIiIkluc3RhbGwgYW5kIHJldHVybiBoYW5kbGVycyIiIg0KICAgIGhsaXN0ID0gY3BbImhhbmRsZXJzIl1bImtleXMiXQ0KICAgIGlmIG5vdCBsZW4oaGxpc3QpOg0KICAgICAgICByZXR1cm4ge30NCiAgICBobGlzdCA9IGhsaXN0LnNwbGl0KCIsIikNCiAgICBobGlzdCA9IF9zdHJpcF9zcGFjZXMoaGxpc3QpDQogICAgaGFuZGxlcnMgPSB7fQ0KICAgIGZpeHVwcyA9IFtdICNmb3IgaW50ZXItaGFuZGxlciByZWZlcmVuY2VzDQogICAgZm9yIGhhbmQgaW4gaGxpc3Q6DQogICAgICAgIHNlY3Rpb24gPSBjcFsiaGFuZGxlcl8lcyIgJSBoYW5kXQ0KICAgICAgICBrbGFzcyA9IHNlY3Rpb25bImNsYXNzIl0NCiAgICAgICAgZm10ID0gc2VjdGlvbi5nZXQoImZvcm1hdHRlciIsICIiKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBrbGFzcyA9IGV2YWwoa2xhc3MsIHZhcnMobG9nZ2luZykpDQogICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIE5hbWVFcnJvcik6DQogICAgICAgICAgICBrbGFzcyA9IF9yZXNvbHZlKGtsYXNzKQ0KICAgICAgICBhcmdzID0gc2VjdGlvblsiYXJncyJdDQogICAgICAgIGFyZ3MgPSBldmFsKGFyZ3MsIHZhcnMobG9nZ2luZykpDQogICAgICAgIGggPSBrbGFzcygqYXJncykNCiAgICAgICAgaWYgImxldmVsIiBpbiBzZWN0aW9uOg0KICAgICAgICAgICAgbGV2ZWwgPSBzZWN0aW9uWyJsZXZlbCJdDQogICAgICAgICAgICBoLnNldExldmVsKGxvZ2dpbmcuX2xldmVsTmFtZXNbbGV2ZWxdKQ0KICAgICAgICBpZiBsZW4oZm10KToNCiAgICAgICAgICAgIGguc2V0Rm9ybWF0dGVyKGZvcm1hdHRlcnNbZm10XSkNCiAgICAgICAgaWYgaXNzdWJjbGFzcyhrbGFzcywgbG9nZ2luZy5oYW5kbGVycy5NZW1vcnlIYW5kbGVyKToNCiAgICAgICAgICAgIHRhcmdldCA9IHNlY3Rpb24uZ2V0KCJ0YXJnZXQiLCAiIikNCiAgICAgICAgICAgIGlmIGxlbih0YXJnZXQpOiAjdGhlIHRhcmdldCBoYW5kbGVyIG1heSBub3QgYmUgbG9hZGVkIHlldCwgc28ga2VlcCBmb3IgbGF0ZXIuLi4NCiAgICAgICAgICAgICAgICBmaXh1cHMuYXBwZW5kKChoLCB0YXJnZXQpKQ0KICAgICAgICBoYW5kbGVyc1toYW5kXSA9IGgNCiAgICAjbm93IGFsbCBoYW5kbGVycyBhcmUgbG9hZGVkLCBmaXh1cCBpbnRlci1oYW5kbGVyIHJlZmVyZW5jZXMuLi4NCiAgICBmb3IgaCwgdCBpbiBmaXh1cHM6DQogICAgICAgIGguc2V0VGFyZ2V0KGhhbmRsZXJzW3RdKQ0KICAgIHJldHVybiBoYW5kbGVycw0KDQpkZWYgX2hhbmRsZV9leGlzdGluZ19sb2dnZXJzKGV4aXN0aW5nLCBjaGlsZF9sb2dnZXJzLCBkaXNhYmxlX2V4aXN0aW5nKToNCiAgICAiIiINCiAgICBXaGVuIChyZSljb25maWd1cmluZyBsb2dnaW5nLCBoYW5kbGUgbG9nZ2VycyB3aGljaCB3ZXJlIGluIHRoZSBwcmV2aW91cw0KICAgIGNvbmZpZ3VyYXRpb24gYnV0IGFyZSBub3QgaW4gdGhlIG5ldyBjb25maWd1cmF0aW9uLiBUaGVyZSdzIG5vIHBvaW50DQogICAgZGVsZXRpbmcgdGhlbSBhcyBvdGhlciB0aHJlYWRzIG1heSBjb250aW51ZSB0byBob2xkIHJlZmVyZW5jZXMgdG8gdGhlbTsNCiAgICBhbmQgYnkgZGlzYWJsaW5nIHRoZW0sIHlvdSBzdG9wIHRoZW0gZG9pbmcgYW55IGxvZ2dpbmcuDQoNCiAgICBIb3dldmVyLCBkb24ndCBkaXNhYmxlIGNoaWxkcmVuIG9mIG5hbWVkIGxvZ2dlcnMsIGFzIHRoYXQncyBwcm9iYWJseSBub3QNCiAgICB3aGF0IHdhcyBpbnRlbmRlZCBieSB0aGUgdXNlci4gQWxzbywgYWxsb3cgZXhpc3RpbmcgbG9nZ2VycyB0byBOT1QgYmUNCiAgICBkaXNhYmxlZCBpZiBkaXNhYmxlX2V4aXN0aW5nIGlzIGZhbHNlLg0KICAgICIiIg0KICAgIHJvb3QgPSBsb2dnaW5nLnJvb3QNCiAgICBmb3IgbG9nIGluIGV4aXN0aW5nOg0KICAgICAgICBsb2dnZXIgPSByb290Lm1hbmFnZXIubG9nZ2VyRGljdFtsb2ddDQogICAgICAgIGlmIGxvZyBpbiBjaGlsZF9sb2dnZXJzOg0KICAgICAgICAgICAgbG9nZ2VyLmxldmVsID0gbG9nZ2luZy5OT1RTRVQNCiAgICAgICAgICAgIGxvZ2dlci5oYW5kbGVycyA9IFtdDQogICAgICAgICAgICBsb2dnZXIucHJvcGFnYXRlID0gVHJ1ZQ0KICAgICAgICBlbGlmIGRpc2FibGVfZXhpc3Rpbmc6DQogICAgICAgICAgICBsb2dnZXIuZGlzYWJsZWQgPSBUcnVlDQoNCmRlZiBfaW5zdGFsbF9sb2dnZXJzKGNwLCBoYW5kbGVycywgZGlzYWJsZV9leGlzdGluZyk6DQogICAgIiIiQ3JlYXRlIGFuZCBpbnN0YWxsIGxvZ2dlcnMiIiINCg0KICAgICMgY29uZmlndXJlIHRoZSByb290IGZpcnN0DQogICAgbGxpc3QgPSBjcFsibG9nZ2VycyJdWyJrZXlzIl0NCiAgICBsbGlzdCA9IGxsaXN0LnNwbGl0KCIsIikNCiAgICBsbGlzdCA9IGxpc3QobWFwKGxhbWJkYSB4OiB4LnN0cmlwKCksIGxsaXN0KSkNCiAgICBsbGlzdC5yZW1vdmUoInJvb3QiKQ0KICAgIHNlY3Rpb24gPSBjcFsibG9nZ2VyX3Jvb3QiXQ0KICAgIHJvb3QgPSBsb2dnaW5nLnJvb3QNCiAgICBsb2cgPSByb290DQogICAgaWYgImxldmVsIiBpbiBzZWN0aW9uOg0KICAgICAgICBsZXZlbCA9IHNlY3Rpb25bImxldmVsIl0NCiAgICAgICAgbG9nLnNldExldmVsKGxvZ2dpbmcuX2xldmVsTmFtZXNbbGV2ZWxdKQ0KICAgIGZvciBoIGluIHJvb3QuaGFuZGxlcnNbOl06DQogICAgICAgIHJvb3QucmVtb3ZlSGFuZGxlcihoKQ0KICAgIGhsaXN0ID0gc2VjdGlvblsiaGFuZGxlcnMiXQ0KICAgIGlmIGxlbihobGlzdCk6DQogICAgICAgIGhsaXN0ID0gaGxpc3Quc3BsaXQoIiwiKQ0KICAgICAgICBobGlzdCA9IF9zdHJpcF9zcGFjZXMoaGxpc3QpDQogICAgICAgIGZvciBoYW5kIGluIGhsaXN0Og0KICAgICAgICAgICAgbG9nLmFkZEhhbmRsZXIoaGFuZGxlcnNbaGFuZF0pDQoNCiAgICAjYW5kIG5vdyB0aGUgb3RoZXJzLi4uDQogICAgI3dlIGRvbid0IHdhbnQgdG8gbG9zZSB0aGUgZXhpc3RpbmcgbG9nZ2VycywNCiAgICAjc2luY2Ugb3RoZXIgdGhyZWFkcyBtYXkgaGF2ZSBwb2ludGVycyB0byB0aGVtLg0KICAgICNleGlzdGluZyBpcyBzZXQgdG8gY29udGFpbiBhbGwgZXhpc3RpbmcgbG9nZ2VycywNCiAgICAjYW5kIGFzIHdlIGdvIHRocm91Z2ggdGhlIG5ldyBjb25maWd1cmF0aW9uIHdlDQogICAgI3JlbW92ZSBhbnkgd2hpY2ggYXJlIGNvbmZpZ3VyZWQuIEF0IHRoZSBlbmQsDQogICAgI3doYXQncyBsZWZ0IGluIGV4aXN0aW5nIGlzIHRoZSBzZXQgb2YgbG9nZ2Vycw0KICAgICN3aGljaCB3ZXJlIGluIHRoZSBwcmV2aW91cyBjb25maWd1cmF0aW9uIGJ1dA0KICAgICN3aGljaCBhcmUgbm90IGluIHRoZSBuZXcgY29uZmlndXJhdGlvbi4NCiAgICBleGlzdGluZyA9IGxpc3Qocm9vdC5tYW5hZ2VyLmxvZ2dlckRpY3Qua2V5cygpKQ0KICAgICNUaGUgbGlzdCBuZWVkcyB0byBiZSBzb3J0ZWQgc28gdGhhdCB3ZSBjYW4NCiAgICAjYXZvaWQgZGlzYWJsaW5nIGNoaWxkIGxvZ2dlcnMgb2YgZXhwbGljaXRseQ0KICAgICNuYW1lZCBsb2dnZXJzLiBXaXRoIGEgc29ydGVkIGxpc3QgaXQgaXMgZWFzaWVyDQogICAgI3RvIGZpbmQgdGhlIGNoaWxkIGxvZ2dlcnMuDQogICAgZXhpc3Rpbmcuc29ydCgpDQogICAgI1dlJ2xsIGtlZXAgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgbG9nZ2Vycw0KICAgICN3aGljaCBhcmUgY2hpbGRyZW4gb2YgbmFtZWQgbG9nZ2VycyBoZXJlLi4uDQogICAgY2hpbGRfbG9nZ2VycyA9IFtdDQogICAgI25vdyBzZXQgdXAgdGhlIG5ldyBvbmVzLi4uDQogICAgZm9yIGxvZyBpbiBsbGlzdDoNCiAgICAgICAgc2VjdGlvbiA9IGNwWyJsb2dnZXJfJXMiICUgbG9nXQ0KICAgICAgICBxbiA9IHNlY3Rpb25bInF1YWxuYW1lIl0NCiAgICAgICAgcHJvcGFnYXRlID0gc2VjdGlvbi5nZXRpbnQoInByb3BhZ2F0ZSIsIGZhbGxiYWNrPTEpDQogICAgICAgIGxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKHFuKQ0KICAgICAgICBpZiBxbiBpbiBleGlzdGluZzoNCiAgICAgICAgICAgIGkgPSBleGlzdGluZy5pbmRleChxbikgKyAxICMgc3RhcnQgd2l0aCB0aGUgZW50cnkgYWZ0ZXIgcW4NCiAgICAgICAgICAgIHByZWZpeGVkID0gcW4gKyAiLiINCiAgICAgICAgICAgIHBmbGVuID0gbGVuKHByZWZpeGVkKQ0KICAgICAgICAgICAgbnVtX2V4aXN0aW5nID0gbGVuKGV4aXN0aW5nKQ0KICAgICAgICAgICAgd2hpbGUgaSA8IG51bV9leGlzdGluZzoNCiAgICAgICAgICAgICAgICBpZiBleGlzdGluZ1tpXVs6cGZsZW5dID09IHByZWZpeGVkOg0KICAgICAgICAgICAgICAgICAgICBjaGlsZF9sb2dnZXJzLmFwcGVuZChleGlzdGluZ1tpXSkNCiAgICAgICAgICAgICAgICBpICs9IDENCiAgICAgICAgICAgIGV4aXN0aW5nLnJlbW92ZShxbikNCiAgICAgICAgaWYgImxldmVsIiBpbiBzZWN0aW9uOg0KICAgICAgICAgICAgbGV2ZWwgPSBzZWN0aW9uWyJsZXZlbCJdDQogICAgICAgICAgICBsb2dnZXIuc2V0TGV2ZWwobG9nZ2luZy5fbGV2ZWxOYW1lc1tsZXZlbF0pDQogICAgICAgIGZvciBoIGluIGxvZ2dlci5oYW5kbGVyc1s6XToNCiAgICAgICAgICAgIGxvZ2dlci5yZW1vdmVIYW5kbGVyKGgpDQogICAgICAgIGxvZ2dlci5wcm9wYWdhdGUgPSBwcm9wYWdhdGUNCiAgICAgICAgbG9nZ2VyLmRpc2FibGVkID0gMA0KICAgICAgICBobGlzdCA9IHNlY3Rpb25bImhhbmRsZXJzIl0NCiAgICAgICAgaWYgbGVuKGhsaXN0KToNCiAgICAgICAgICAgIGhsaXN0ID0gaGxpc3Quc3BsaXQoIiwiKQ0KICAgICAgICAgICAgaGxpc3QgPSBfc3RyaXBfc3BhY2VzKGhsaXN0KQ0KICAgICAgICAgICAgZm9yIGhhbmQgaW4gaGxpc3Q6DQogICAgICAgICAgICAgICAgbG9nZ2VyLmFkZEhhbmRsZXIoaGFuZGxlcnNbaGFuZF0pDQoNCiAgICAjRGlzYWJsZSBhbnkgb2xkIGxvZ2dlcnMuIFRoZXJlJ3Mgbm8gcG9pbnQgZGVsZXRpbmcNCiAgICAjdGhlbSBhcyBvdGhlciB0aHJlYWRzIG1heSBjb250aW51ZSB0byBob2xkIHJlZmVyZW5jZXMNCiAgICAjYW5kIGJ5IGRpc2FibGluZyB0aGVtLCB5b3Ugc3RvcCB0aGVtIGRvaW5nIGFueSBsb2dnaW5nLg0KICAgICNIb3dldmVyLCBkb24ndCBkaXNhYmxlIGNoaWxkcmVuIG9mIG5hbWVkIGxvZ2dlcnMsIGFzIHRoYXQncw0KICAgICNwcm9iYWJseSBub3Qgd2hhdCB3YXMgaW50ZW5kZWQgYnkgdGhlIHVzZXIuDQogICAgI2ZvciBsb2cgaW4gZXhpc3Rpbmc6DQogICAgIyAgICBsb2dnZXIgPSByb290Lm1hbmFnZXIubG9nZ2VyRGljdFtsb2ddDQogICAgIyAgICBpZiBsb2cgaW4gY2hpbGRfbG9nZ2VyczoNCiAgICAjICAgICAgICBsb2dnZXIubGV2ZWwgPSBsb2dnaW5nLk5PVFNFVA0KICAgICMgICAgICAgIGxvZ2dlci5oYW5kbGVycyA9IFtdDQogICAgIyAgICAgICAgbG9nZ2VyLnByb3BhZ2F0ZSA9IDENCiAgICAjICAgIGVsaWYgZGlzYWJsZV9leGlzdGluZ19sb2dnZXJzOg0KICAgICMgICAgICAgIGxvZ2dlci5kaXNhYmxlZCA9IDENCiAgICBfaGFuZGxlX2V4aXN0aW5nX2xvZ2dlcnMoZXhpc3RpbmcsIGNoaWxkX2xvZ2dlcnMsIGRpc2FibGVfZXhpc3RpbmcpDQoNCklERU5USUZJRVIgPSByZS5jb21waWxlKCdeW2Etel9dW2EtejAtOV9dKiQnLCByZS5JKQ0KDQoNCmRlZiB2YWxpZF9pZGVudChzKToNCiAgICBtID0gSURFTlRJRklFUi5tYXRjaChzKQ0KICAgIGlmIG5vdCBtOg0KICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdOb3QgYSB2YWxpZCBQeXRob24gaWRlbnRpZmllcjogJXInICUgcykNCiAgICByZXR1cm4gVHJ1ZQ0KDQoNCiMgVGhlIENvbnZlcnRpbmdYWFggY2xhc3NlcyBhcmUgd3JhcHBlcnMgYXJvdW5kIHN0YW5kYXJkIFB5dGhvbiBjb250YWluZXJzLA0KIyBhbmQgdGhleSBzZXJ2ZSB0byBjb252ZXJ0IGFueSBzdWl0YWJsZSB2YWx1ZXMgaW4gdGhlIGNvbnRhaW5lci4gVGhlDQojIGNvbnZlcnNpb24gY29udmVydHMgYmFzZSBkaWN0cywgbGlzdHMgYW5kIHR1cGxlcyB0byB0aGVpciB3cmFwcGVkDQojIGVxdWl2YWxlbnRzLCB3aGVyZWFzIHN0cmluZ3Mgd2hpY2ggbWF0Y2ggYSBjb252ZXJzaW9uIGZvcm1hdCBhcmUgY29udmVydGVkDQojIGFwcHJvcHJpYXRlbHkuDQojDQojIEVhY2ggd3JhcHBlciBzaG91bGQgaGF2ZSBhIGNvbmZpZ3VyYXRvciBhdHRyaWJ1dGUgaG9sZGluZyB0aGUgYWN0dWFsDQojIGNvbmZpZ3VyYXRvciB0byB1c2UgZm9yIGNvbnZlcnNpb24uDQoNCmNsYXNzIENvbnZlcnRpbmdEaWN0KGRpY3QpOg0KICAgICIiIkEgY29udmVydGluZyBkaWN0aW9uYXJ5IHdyYXBwZXIuIiIiDQoNCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KToNCiAgICAgICAgdmFsdWUgPSBkaWN0Ll9fZ2V0aXRlbV9fKHNlbGYsIGtleSkNCiAgICAgICAgcmVzdWx0ID0gc2VsZi5jb25maWd1cmF0b3IuY29udmVydCh2YWx1ZSkNCiAgICAgICAgI0lmIHRoZSBjb252ZXJ0ZWQgdmFsdWUgaXMgZGlmZmVyZW50LCBzYXZlIGZvciBuZXh0IHRpbWUNCiAgICAgICAgaWYgdmFsdWUgaXMgbm90IHJlc3VsdDoNCiAgICAgICAgICAgIHNlbGZba2V5XSA9IHJlc3VsdA0KICAgICAgICAgICAgaWYgdHlwZShyZXN1bHQpIGluIChDb252ZXJ0aW5nRGljdCwgQ29udmVydGluZ0xpc3QsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnZlcnRpbmdUdXBsZSk6DQogICAgICAgICAgICAgICAgcmVzdWx0LnBhcmVudCA9IHNlbGYNCiAgICAgICAgICAgICAgICByZXN1bHQua2V5ID0ga2V5DQogICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgIGRlZiBnZXQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOg0KICAgICAgICB2YWx1ZSA9IGRpY3QuZ2V0KHNlbGYsIGtleSwgZGVmYXVsdCkNCiAgICAgICAgcmVzdWx0ID0gc2VsZi5jb25maWd1cmF0b3IuY29udmVydCh2YWx1ZSkNCiAgICAgICAgI0lmIHRoZSBjb252ZXJ0ZWQgdmFsdWUgaXMgZGlmZmVyZW50LCBzYXZlIGZvciBuZXh0IHRpbWUNCiAgICAgICAgaWYgdmFsdWUgaXMgbm90IHJlc3VsdDoNCiAgICAgICAgICAgIHNlbGZba2V5XSA9IHJlc3VsdA0KICAgICAgICAgICAgaWYgdHlwZShyZXN1bHQpIGluIChDb252ZXJ0aW5nRGljdCwgQ29udmVydGluZ0xpc3QsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnZlcnRpbmdUdXBsZSk6DQogICAgICAgICAgICAgICAgcmVzdWx0LnBhcmVudCA9IHNlbGYNCiAgICAgICAgICAgICAgICByZXN1bHQua2V5ID0ga2V5DQogICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgIGRlZiBwb3Aoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOg0KICAgICAgICB2YWx1ZSA9IGRpY3QucG9wKHNlbGYsIGtleSwgZGVmYXVsdCkNCiAgICAgICAgcmVzdWx0ID0gc2VsZi5jb25maWd1cmF0b3IuY29udmVydCh2YWx1ZSkNCiAgICAgICAgaWYgdmFsdWUgaXMgbm90IHJlc3VsdDoNCiAgICAgICAgICAgIGlmIHR5cGUocmVzdWx0KSBpbiAoQ29udmVydGluZ0RpY3QsIENvbnZlcnRpbmdMaXN0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb252ZXJ0aW5nVHVwbGUpOg0KICAgICAgICAgICAgICAgIHJlc3VsdC5wYXJlbnQgPSBzZWxmDQogICAgICAgICAgICAgICAgcmVzdWx0LmtleSA9IGtleQ0KICAgICAgICByZXR1cm4gcmVzdWx0DQoNCmNsYXNzIENvbnZlcnRpbmdMaXN0KGxpc3QpOg0KICAgICIiIkEgY29udmVydGluZyBsaXN0IHdyYXBwZXIuIiIiDQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6DQogICAgICAgIHZhbHVlID0gbGlzdC5fX2dldGl0ZW1fXyhzZWxmLCBrZXkpDQogICAgICAgIHJlc3VsdCA9IHNlbGYuY29uZmlndXJhdG9yLmNvbnZlcnQodmFsdWUpDQogICAgICAgICNJZiB0aGUgY29udmVydGVkIHZhbHVlIGlzIGRpZmZlcmVudCwgc2F2ZSBmb3IgbmV4dCB0aW1lDQogICAgICAgIGlmIHZhbHVlIGlzIG5vdCByZXN1bHQ6DQogICAgICAgICAgICBzZWxmW2tleV0gPSByZXN1bHQNCiAgICAgICAgICAgIGlmIHR5cGUocmVzdWx0KSBpbiAoQ29udmVydGluZ0RpY3QsIENvbnZlcnRpbmdMaXN0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb252ZXJ0aW5nVHVwbGUpOg0KICAgICAgICAgICAgICAgIHJlc3VsdC5wYXJlbnQgPSBzZWxmDQogICAgICAgICAgICAgICAgcmVzdWx0LmtleSA9IGtleQ0KICAgICAgICByZXR1cm4gcmVzdWx0DQoNCiAgICBkZWYgcG9wKHNlbGYsIGlkeD0tMSk6DQogICAgICAgIHZhbHVlID0gbGlzdC5wb3Aoc2VsZiwgaWR4KQ0KICAgICAgICByZXN1bHQgPSBzZWxmLmNvbmZpZ3VyYXRvci5jb252ZXJ0KHZhbHVlKQ0KICAgICAgICBpZiB2YWx1ZSBpcyBub3QgcmVzdWx0Og0KICAgICAgICAgICAgaWYgdHlwZShyZXN1bHQpIGluIChDb252ZXJ0aW5nRGljdCwgQ29udmVydGluZ0xpc3QsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnZlcnRpbmdUdXBsZSk6DQogICAgICAgICAgICAgICAgcmVzdWx0LnBhcmVudCA9IHNlbGYNCiAgICAgICAgcmV0dXJuIHJlc3VsdA0KDQpjbGFzcyBDb252ZXJ0aW5nVHVwbGUodHVwbGUpOg0KICAgICIiIkEgY29udmVydGluZyB0dXBsZSB3cmFwcGVyLiIiIg0KICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOg0KICAgICAgICB2YWx1ZSA9IHR1cGxlLl9fZ2V0aXRlbV9fKHNlbGYsIGtleSkNCiAgICAgICAgcmVzdWx0ID0gc2VsZi5jb25maWd1cmF0b3IuY29udmVydCh2YWx1ZSkNCiAgICAgICAgaWYgdmFsdWUgaXMgbm90IHJlc3VsdDoNCiAgICAgICAgICAgIGlmIHR5cGUocmVzdWx0KSBpbiAoQ29udmVydGluZ0RpY3QsIENvbnZlcnRpbmdMaXN0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb252ZXJ0aW5nVHVwbGUpOg0KICAgICAgICAgICAgICAgIHJlc3VsdC5wYXJlbnQgPSBzZWxmDQogICAgICAgICAgICAgICAgcmVzdWx0LmtleSA9IGtleQ0KICAgICAgICByZXR1cm4gcmVzdWx0DQoNCmNsYXNzIEJhc2VDb25maWd1cmF0b3Iob2JqZWN0KToNCiAgICAiIiINCiAgICBUaGUgY29uZmlndXJhdG9yIGJhc2UgY2xhc3Mgd2hpY2ggZGVmaW5lcyBzb21lIHVzZWZ1bCBkZWZhdWx0cy4NCiAgICAiIiINCg0KICAgIENPTlZFUlRfUEFUVEVSTiA9IHJlLmNvbXBpbGUocideKD9QPHByZWZpeD5bYS16XSspOi8vKD9QPHN1ZmZpeD4uKikkJykNCg0KICAgIFdPUkRfUEFUVEVSTiA9IHJlLmNvbXBpbGUocideXHMqKFx3KylccyonKQ0KICAgIERPVF9QQVRURVJOID0gcmUuY29tcGlsZShyJ15cLlxzKihcdyspXHMqJykNCiAgICBJTkRFWF9QQVRURVJOID0gcmUuY29tcGlsZShyJ15cW1xzKihcdyspXHMqXF1ccyonKQ0KICAgIERJR0lUX1BBVFRFUk4gPSByZS5jb21waWxlKHInXlxkKyQnKQ0KDQogICAgdmFsdWVfY29udmVydGVycyA9IHsNCiAgICAgICAgJ2V4dCcgOiAnZXh0X2NvbnZlcnQnLA0KICAgICAgICAnY2ZnJyA6ICdjZmdfY29udmVydCcsDQogICAgfQ0KDQogICAgIyBXZSBtaWdodCB3YW50IHRvIHVzZSBhIGRpZmZlcmVudCBvbmUsIGUuZy4gaW1wb3J0bGliDQogICAgaW1wb3J0ZXIgPSBzdGF0aWNtZXRob2QoX19pbXBvcnRfXykNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25maWcpOg0KICAgICAgICBzZWxmLmNvbmZpZyA9IENvbnZlcnRpbmdEaWN0KGNvbmZpZykNCiAgICAgICAgc2VsZi5jb25maWcuY29uZmlndXJhdG9yID0gc2VsZg0KDQogICAgZGVmIHJlc29sdmUoc2VsZiwgcyk6DQogICAgICAgICIiIg0KICAgICAgICBSZXNvbHZlIHN0cmluZ3MgdG8gb2JqZWN0cyB1c2luZyBzdGFuZGFyZCBpbXBvcnQgYW5kIGF0dHJpYnV0ZQ0KICAgICAgICBzeW50YXguDQogICAgICAgICIiIg0KICAgICAgICBuYW1lID0gcy5zcGxpdCgnLicpDQogICAgICAgIHVzZWQgPSBuYW1lLnBvcCgwKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBmb3VuZCA9IHNlbGYuaW1wb3J0ZXIodXNlZCkNCiAgICAgICAgICAgIGZvciBmcmFnIGluIG5hbWU6DQogICAgICAgICAgICAgICAgdXNlZCArPSAnLicgKyBmcmFnDQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGdldGF0dHIoZm91bmQsIGZyYWcpDQogICAgICAgICAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLmltcG9ydGVyKHVzZWQpDQogICAgICAgICAgICAgICAgICAgIGZvdW5kID0gZ2V0YXR0cihmb3VuZCwgZnJhZykNCiAgICAgICAgICAgIHJldHVybiBmb3VuZA0KICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6DQogICAgICAgICAgICBlLCB0YiA9IHN5cy5leGNfaW5mbygpWzE6XQ0KICAgICAgICAgICAgdiA9IFZhbHVlRXJyb3IoJ0Nhbm5vdCByZXNvbHZlICVyOiAlcycgJSAocywgZSkpDQogICAgICAgICAgICB2Ll9fY2F1c2VfXywgdi5fX3RyYWNlYmFja19fID0gZSwgdGINCiAgICAgICAgICAgIHJhaXNlIHYNCg0KICAgIGRlZiBleHRfY29udmVydChzZWxmLCB2YWx1ZSk6DQogICAgICAgICIiIkRlZmF1bHQgY29udmVydGVyIGZvciB0aGUgZXh0Oi8vIHByb3RvY29sLiIiIg0KICAgICAgICByZXR1cm4gc2VsZi5yZXNvbHZlKHZhbHVlKQ0KDQogICAgZGVmIGNmZ19jb252ZXJ0KHNlbGYsIHZhbHVlKToNCiAgICAgICAgIiIiRGVmYXVsdCBjb252ZXJ0ZXIgZm9yIHRoZSBjZmc6Ly8gcHJvdG9jb2wuIiIiDQogICAgICAgIHJlc3QgPSB2YWx1ZQ0KICAgICAgICBtID0gc2VsZi5XT1JEX1BBVFRFUk4ubWF0Y2gocmVzdCkNCiAgICAgICAgaWYgbSBpcyBOb25lOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5hYmxlIHRvIGNvbnZlcnQgJXIiICUgdmFsdWUpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXN0ID0gcmVzdFttLmVuZCgpOl0NCiAgICAgICAgICAgIGQgPSBzZWxmLmNvbmZpZ1ttLmdyb3VwcygpWzBdXQ0KICAgICAgICAgICAgI3ByaW50IGQsIHJlc3QNCiAgICAgICAgICAgIHdoaWxlIHJlc3Q6DQogICAgICAgICAgICAgICAgbSA9IHNlbGYuRE9UX1BBVFRFUk4ubWF0Y2gocmVzdCkNCiAgICAgICAgICAgICAgICBpZiBtOg0KICAgICAgICAgICAgICAgICAgICBkID0gZFttLmdyb3VwcygpWzBdXQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIG0gPSBzZWxmLklOREVYX1BBVFRFUk4ubWF0Y2gocmVzdCkNCiAgICAgICAgICAgICAgICAgICAgaWYgbToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkeCA9IG0uZ3JvdXBzKClbMF0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLkRJR0lUX1BBVFRFUk4ubWF0Y2goaWR4KToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gZFtpZHhdDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGludChpZHgpICMgdHJ5IGFzIG51bWJlciBmaXJzdCAobW9zdCBsaWtlbHkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBkW25dDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGRbaWR4XQ0KICAgICAgICAgICAgICAgIGlmIG06DQogICAgICAgICAgICAgICAgICAgIHJlc3QgPSByZXN0W20uZW5kKCk6XQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0ICcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJXIgYXQgJXInICUgKHZhbHVlLCByZXN0KSkNCiAgICAgICAgI3Jlc3Qgc2hvdWxkIGJlIGVtcHR5DQogICAgICAgIHJldHVybiBkDQoNCiAgICBkZWYgY29udmVydChzZWxmLCB2YWx1ZSk6DQogICAgICAgICIiIg0KICAgICAgICBDb252ZXJ0IHZhbHVlcyB0byBhbiBhcHByb3ByaWF0ZSB0eXBlLiBkaWN0cywgbGlzdHMgYW5kIHR1cGxlcyBhcmUNCiAgICAgICAgcmVwbGFjZWQgYnkgdGhlaXIgY29udmVydGluZyBhbHRlcm5hdGl2ZXMuIFN0cmluZ3MgYXJlIGNoZWNrZWQgdG8NCiAgICAgICAgc2VlIGlmIHRoZXkgaGF2ZSBhIGNvbnZlcnNpb24gZm9ybWF0IGFuZCBhcmUgY29udmVydGVkIGlmIHRoZXkgZG8uDQogICAgICAgICIiIg0KICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWx1ZSwgQ29udmVydGluZ0RpY3QpIGFuZCBpc2luc3RhbmNlKHZhbHVlLCBkaWN0KToNCiAgICAgICAgICAgIHZhbHVlID0gQ29udmVydGluZ0RpY3QodmFsdWUpDQogICAgICAgICAgICB2YWx1ZS5jb25maWd1cmF0b3IgPSBzZWxmDQogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2UodmFsdWUsIENvbnZlcnRpbmdMaXN0KSBhbmQgaXNpbnN0YW5jZSh2YWx1ZSwgbGlzdCk6DQogICAgICAgICAgICB2YWx1ZSA9IENvbnZlcnRpbmdMaXN0KHZhbHVlKQ0KICAgICAgICAgICAgdmFsdWUuY29uZmlndXJhdG9yID0gc2VsZg0KICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBDb252ZXJ0aW5nVHVwbGUpIGFuZFwNCiAgICAgICAgICAgICAgICAgaXNpbnN0YW5jZSh2YWx1ZSwgdHVwbGUpOg0KICAgICAgICAgICAgdmFsdWUgPSBDb252ZXJ0aW5nVHVwbGUodmFsdWUpDQogICAgICAgICAgICB2YWx1ZS5jb25maWd1cmF0b3IgPSBzZWxmDQogICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2YWx1ZSwgc3RyKTogIyBzdHIgZm9yIHB5M2sNCiAgICAgICAgICAgIG0gPSBzZWxmLkNPTlZFUlRfUEFUVEVSTi5tYXRjaCh2YWx1ZSkNCiAgICAgICAgICAgIGlmIG06DQogICAgICAgICAgICAgICAgZCA9IG0uZ3JvdXBkaWN0KCkNCiAgICAgICAgICAgICAgICBwcmVmaXggPSBkWydwcmVmaXgnXQ0KICAgICAgICAgICAgICAgIGNvbnZlcnRlciA9IHNlbGYudmFsdWVfY29udmVydGVycy5nZXQocHJlZml4LCBOb25lKQ0KICAgICAgICAgICAgICAgIGlmIGNvbnZlcnRlcjoNCiAgICAgICAgICAgICAgICAgICAgc3VmZml4ID0gZFsnc3VmZml4J10NCiAgICAgICAgICAgICAgICAgICAgY29udmVydGVyID0gZ2V0YXR0cihzZWxmLCBjb252ZXJ0ZXIpDQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29udmVydGVyKHN1ZmZpeCkNCiAgICAgICAgcmV0dXJuIHZhbHVlDQoNCiAgICBkZWYgY29uZmlndXJlX2N1c3RvbShzZWxmLCBjb25maWcpOg0KICAgICAgICAiIiJDb25maWd1cmUgYW4gb2JqZWN0IHdpdGggYSB1c2VyLXN1cHBsaWVkIGZhY3RvcnkuIiIiDQogICAgICAgIGMgPSBjb25maWcucG9wKCcoKScpDQogICAgICAgIGlmIG5vdCBjYWxsYWJsZShjKToNCiAgICAgICAgICAgIGMgPSBzZWxmLnJlc29sdmUoYykNCiAgICAgICAgcHJvcHMgPSBjb25maWcucG9wKCcuJywgTm9uZSkNCiAgICAgICAgIyBDaGVjayBmb3IgdmFsaWQgaWRlbnRpZmllcnMNCiAgICAgICAga3dhcmdzID0gZGljdChbKGssIGNvbmZpZ1trXSkgZm9yIGsgaW4gY29uZmlnIGlmIHZhbGlkX2lkZW50KGspXSkNCiAgICAgICAgcmVzdWx0ID0gYygqKmt3YXJncykNCiAgICAgICAgaWYgcHJvcHM6DQogICAgICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gcHJvcHMuaXRlbXMoKToNCiAgICAgICAgICAgICAgICBzZXRhdHRyKHJlc3VsdCwgbmFtZSwgdmFsdWUpDQogICAgICAgIHJldHVybiByZXN1bHQNCg0KICAgIGRlZiBhc190dXBsZShzZWxmLCB2YWx1ZSk6DQogICAgICAgICIiIlV0aWxpdHkgZnVuY3Rpb24gd2hpY2ggY29udmVydHMgbGlzdHMgdG8gdHVwbGVzLiIiIg0KICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBsaXN0KToNCiAgICAgICAgICAgIHZhbHVlID0gdHVwbGUodmFsdWUpDQogICAgICAgIHJldHVybiB2YWx1ZQ0KDQpjbGFzcyBEaWN0Q29uZmlndXJhdG9yKEJhc2VDb25maWd1cmF0b3IpOg0KICAgICIiIg0KICAgIENvbmZpZ3VyZSBsb2dnaW5nIHVzaW5nIGEgZGljdGlvbmFyeS1saWtlIG9iamVjdCB0byBkZXNjcmliZSB0aGUNCiAgICBjb25maWd1cmF0aW9uLg0KICAgICIiIg0KDQogICAgZGVmIGNvbmZpZ3VyZShzZWxmKToNCiAgICAgICAgIiIiRG8gdGhlIGNvbmZpZ3VyYXRpb24uIiIiDQoNCiAgICAgICAgY29uZmlnID0gc2VsZi5jb25maWcNCiAgICAgICAgaWYgJ3ZlcnNpb24nIG5vdCBpbiBjb25maWc6DQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkaWN0aW9uYXJ5IGRvZXNuJ3Qgc3BlY2lmeSBhIHZlcnNpb24iKQ0KICAgICAgICBpZiBjb25maWdbJ3ZlcnNpb24nXSAhPSAxOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5zdXBwb3J0ZWQgdmVyc2lvbjogJXMiICUgY29uZmlnWyd2ZXJzaW9uJ10pDQogICAgICAgIGluY3JlbWVudGFsID0gY29uZmlnLnBvcCgnaW5jcmVtZW50YWwnLCBGYWxzZSkNCiAgICAgICAgRU1QVFlfRElDVCA9IHt9DQogICAgICAgIGxvZ2dpbmcuX2FjcXVpcmVMb2NrKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWYgaW5jcmVtZW50YWw6DQogICAgICAgICAgICAgICAgaGFuZGxlcnMgPSBjb25maWcuZ2V0KCdoYW5kbGVycycsIEVNUFRZX0RJQ1QpDQogICAgICAgICAgICAgICAgZm9yIG5hbWUgaW4gaGFuZGxlcnM6DQogICAgICAgICAgICAgICAgICAgIGlmIG5hbWUgbm90IGluIGxvZ2dpbmcuX2hhbmRsZXJzOg0KICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignTm8gaGFuZGxlciBmb3VuZCB3aXRoICcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUgJXInICAlIG5hbWUpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlciA9IGxvZ2dpbmcuX2hhbmRsZXJzW25hbWVdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcl9jb25maWcgPSBoYW5kbGVyc1tuYW1lXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsID0gaGFuZGxlcl9jb25maWcuZ2V0KCdsZXZlbCcsIE5vbmUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGV2ZWw6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuc2V0TGV2ZWwobG9nZ2luZy5fY2hlY2tMZXZlbChsZXZlbCkpDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVW5hYmxlIHRvIGNvbmZpZ3VyZSBoYW5kbGVyICcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICclcjogJXMnICUgKG5hbWUsIGUpKQ0KICAgICAgICAgICAgICAgIGxvZ2dlcnMgPSBjb25maWcuZ2V0KCdsb2dnZXJzJywgRU1QVFlfRElDVCkNCiAgICAgICAgICAgICAgICBmb3IgbmFtZSBpbiBsb2dnZXJzOg0KICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ3VyZV9sb2dnZXIobmFtZSwgbG9nZ2Vyc1tuYW1lXSwgVHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVW5hYmxlIHRvIGNvbmZpZ3VyZSBsb2dnZXIgJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJXI6ICVzJyAlIChuYW1lLCBlKSkNCiAgICAgICAgICAgICAgICByb290ID0gY29uZmlnLmdldCgncm9vdCcsIE5vbmUpDQogICAgICAgICAgICAgICAgaWYgcm9vdDoNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWd1cmVfcm9vdChyb290LCBUcnVlKQ0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdVbmFibGUgdG8gY29uZmlndXJlIHJvb3QgJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbG9nZ2VyOiAlcycgJSBlKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBkaXNhYmxlX2V4aXN0aW5nID0gY29uZmlnLnBvcCgnZGlzYWJsZV9leGlzdGluZ19sb2dnZXJzJywgVHJ1ZSkNCg0KICAgICAgICAgICAgICAgIGxvZ2dpbmcuX2hhbmRsZXJzLmNsZWFyKCkNCiAgICAgICAgICAgICAgICBkZWwgbG9nZ2luZy5faGFuZGxlckxpc3RbOl0NCg0KICAgICAgICAgICAgICAgICMgRG8gZm9ybWF0dGVycyBmaXJzdCAtIHRoZXkgZG9uJ3QgcmVmZXIgdG8gYW55dGhpbmcgZWxzZQ0KICAgICAgICAgICAgICAgIGZvcm1hdHRlcnMgPSBjb25maWcuZ2V0KCdmb3JtYXR0ZXJzJywgRU1QVFlfRElDVCkNCiAgICAgICAgICAgICAgICBmb3IgbmFtZSBpbiBmb3JtYXR0ZXJzOg0KICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXJzW25hbWVdID0gc2VsZi5jb25maWd1cmVfZm9ybWF0dGVyKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyc1tuYW1lXSkNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVW5hYmxlIHRvIGNvbmZpZ3VyZSAnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtYXR0ZXIgJXI6ICVzJyAlIChuYW1lLCBlKSkNCiAgICAgICAgICAgICAgICAjIE5leHQsIGRvIGZpbHRlcnMgLSB0aGV5IGRvbid0IHJlZmVyIHRvIGFueXRoaW5nIGVsc2UsIGVpdGhlcg0KICAgICAgICAgICAgICAgIGZpbHRlcnMgPSBjb25maWcuZ2V0KCdmaWx0ZXJzJywgRU1QVFlfRElDVCkNCiAgICAgICAgICAgICAgICBmb3IgbmFtZSBpbiBmaWx0ZXJzOg0KICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzW25hbWVdID0gc2VsZi5jb25maWd1cmVfZmlsdGVyKGZpbHRlcnNbbmFtZV0pDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ1VuYWJsZSB0byBjb25maWd1cmUgJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmlsdGVyICVyOiAlcycgJSAobmFtZSwgZSkpDQoNCiAgICAgICAgICAgICAgICAjIE5leHQsIGRvIGhhbmRsZXJzIC0gdGhleSByZWZlciB0byBmb3JtYXR0ZXJzIGFuZCBmaWx0ZXJzDQogICAgICAgICAgICAgICAgIyBBcyBoYW5kbGVycyBjYW4gcmVmZXIgdG8gb3RoZXIgaGFuZGxlcnMsIHNvcnQgdGhlIGtleXMNCiAgICAgICAgICAgICAgICAjIHRvIGFsbG93IGEgZGV0ZXJtaW5pc3RpYyBvcmRlciBvZiBjb25maWd1cmF0aW9uDQogICAgICAgICAgICAgICAgaGFuZGxlcnMgPSBjb25maWcuZ2V0KCdoYW5kbGVycycsIEVNUFRZX0RJQ1QpDQogICAgICAgICAgICAgICAgZm9yIG5hbWUgaW4gc29ydGVkKGhhbmRsZXJzKToNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlciA9IHNlbGYuY29uZmlndXJlX2hhbmRsZXIoaGFuZGxlcnNbbmFtZV0pDQogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLm5hbWUgPSBuYW1lDQogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyc1tuYW1lXSA9IGhhbmRsZXINCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVW5hYmxlIHRvIGNvbmZpZ3VyZSBoYW5kbGVyICcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyVyOiAlcycgJSAobmFtZSwgZSkpDQogICAgICAgICAgICAgICAgIyBOZXh0LCBkbyBsb2dnZXJzIC0gdGhleSByZWZlciB0byBoYW5kbGVycyBhbmQgZmlsdGVycw0KDQogICAgICAgICAgICAgICAgI3dlIGRvbid0IHdhbnQgdG8gbG9zZSB0aGUgZXhpc3RpbmcgbG9nZ2VycywNCiAgICAgICAgICAgICAgICAjc2luY2Ugb3RoZXIgdGhyZWFkcyBtYXkgaGF2ZSBwb2ludGVycyB0byB0aGVtLg0KICAgICAgICAgICAgICAgICNleGlzdGluZyBpcyBzZXQgdG8gY29udGFpbiBhbGwgZXhpc3RpbmcgbG9nZ2VycywNCiAgICAgICAgICAgICAgICAjYW5kIGFzIHdlIGdvIHRocm91Z2ggdGhlIG5ldyBjb25maWd1cmF0aW9uIHdlDQogICAgICAgICAgICAgICAgI3JlbW92ZSBhbnkgd2hpY2ggYXJlIGNvbmZpZ3VyZWQuIEF0IHRoZSBlbmQsDQogICAgICAgICAgICAgICAgI3doYXQncyBsZWZ0IGluIGV4aXN0aW5nIGlzIHRoZSBzZXQgb2YgbG9nZ2Vycw0KICAgICAgICAgICAgICAgICN3aGljaCB3ZXJlIGluIHRoZSBwcmV2aW91cyBjb25maWd1cmF0aW9uIGJ1dA0KICAgICAgICAgICAgICAgICN3aGljaCBhcmUgbm90IGluIHRoZSBuZXcgY29uZmlndXJhdGlvbi4NCiAgICAgICAgICAgICAgICByb290ID0gbG9nZ2luZy5yb290DQogICAgICAgICAgICAgICAgZXhpc3RpbmcgPSBsaXN0KHJvb3QubWFuYWdlci5sb2dnZXJEaWN0LmtleXMoKSkNCiAgICAgICAgICAgICAgICAjVGhlIGxpc3QgbmVlZHMgdG8gYmUgc29ydGVkIHNvIHRoYXQgd2UgY2FuDQogICAgICAgICAgICAgICAgI2F2b2lkIGRpc2FibGluZyBjaGlsZCBsb2dnZXJzIG9mIGV4cGxpY2l0bHkNCiAgICAgICAgICAgICAgICAjbmFtZWQgbG9nZ2Vycy4gV2l0aCBhIHNvcnRlZCBsaXN0IGl0IGlzIGVhc2llcg0KICAgICAgICAgICAgICAgICN0byBmaW5kIHRoZSBjaGlsZCBsb2dnZXJzLg0KICAgICAgICAgICAgICAgIGV4aXN0aW5nLnNvcnQoKQ0KICAgICAgICAgICAgICAgICNXZSdsbCBrZWVwIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGxvZ2dlcnMNCiAgICAgICAgICAgICAgICAjd2hpY2ggYXJlIGNoaWxkcmVuIG9mIG5hbWVkIGxvZ2dlcnMgaGVyZS4uLg0KICAgICAgICAgICAgICAgIGNoaWxkX2xvZ2dlcnMgPSBbXQ0KICAgICAgICAgICAgICAgICNub3cgc2V0IHVwIHRoZSBuZXcgb25lcy4uLg0KICAgICAgICAgICAgICAgIGxvZ2dlcnMgPSBjb25maWcuZ2V0KCdsb2dnZXJzJywgRU1QVFlfRElDVCkNCiAgICAgICAgICAgICAgICBmb3IgbmFtZSBpbiBsb2dnZXJzOg0KICAgICAgICAgICAgICAgICAgICBpZiBuYW1lIGluIGV4aXN0aW5nOg0KICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGV4aXN0aW5nLmluZGV4KG5hbWUpICsgMSAjIGxvb2sgYWZ0ZXIgbmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ZWQgPSBuYW1lICsgIi4iDQogICAgICAgICAgICAgICAgICAgICAgICBwZmxlbiA9IGxlbihwcmVmaXhlZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIG51bV9leGlzdGluZyA9IGxlbihleGlzdGluZykNCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIGkgPCBudW1fZXhpc3Rpbmc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZXhpc3RpbmdbaV1bOnBmbGVuXSA9PSBwcmVmaXhlZDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfbG9nZ2Vycy5hcHBlbmQoZXhpc3RpbmdbaV0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAxDQogICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5yZW1vdmUobmFtZSkNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWd1cmVfbG9nZ2VyKG5hbWUsIGxvZ2dlcnNbbmFtZV0pDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ1VuYWJsZSB0byBjb25maWd1cmUgbG9nZ2VyICcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyVyOiAlcycgJSAobmFtZSwgZSkpDQoNCiAgICAgICAgICAgICAgICAjRGlzYWJsZSBhbnkgb2xkIGxvZ2dlcnMuIFRoZXJlJ3Mgbm8gcG9pbnQgZGVsZXRpbmcNCiAgICAgICAgICAgICAgICAjdGhlbSBhcyBvdGhlciB0aHJlYWRzIG1heSBjb250aW51ZSB0byBob2xkIHJlZmVyZW5jZXMNCiAgICAgICAgICAgICAgICAjYW5kIGJ5IGRpc2FibGluZyB0aGVtLCB5b3Ugc3RvcCB0aGVtIGRvaW5nIGFueSBsb2dnaW5nLg0KICAgICAgICAgICAgICAgICNIb3dldmVyLCBkb24ndCBkaXNhYmxlIGNoaWxkcmVuIG9mIG5hbWVkIGxvZ2dlcnMsIGFzIHRoYXQncw0KICAgICAgICAgICAgICAgICNwcm9iYWJseSBub3Qgd2hhdCB3YXMgaW50ZW5kZWQgYnkgdGhlIHVzZXIuDQogICAgICAgICAgICAgICAgI2ZvciBsb2cgaW4gZXhpc3Rpbmc6DQogICAgICAgICAgICAgICAgIyAgICBsb2dnZXIgPSByb290Lm1hbmFnZXIubG9nZ2VyRGljdFtsb2ddDQogICAgICAgICAgICAgICAgIyAgICBpZiBsb2cgaW4gY2hpbGRfbG9nZ2VyczoNCiAgICAgICAgICAgICAgICAjICAgICAgICBsb2dnZXIubGV2ZWwgPSBsb2dnaW5nLk5PVFNFVA0KICAgICAgICAgICAgICAgICMgICAgICAgIGxvZ2dlci5oYW5kbGVycyA9IFtdDQogICAgICAgICAgICAgICAgIyAgICAgICAgbG9nZ2VyLnByb3BhZ2F0ZSA9IFRydWUNCiAgICAgICAgICAgICAgICAjICAgIGVsaWYgZGlzYWJsZV9leGlzdGluZzoNCiAgICAgICAgICAgICAgICAjICAgICAgICBsb2dnZXIuZGlzYWJsZWQgPSBUcnVlDQogICAgICAgICAgICAgICAgX2hhbmRsZV9leGlzdGluZ19sb2dnZXJzKGV4aXN0aW5nLCBjaGlsZF9sb2dnZXJzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlX2V4aXN0aW5nKQ0KDQogICAgICAgICAgICAgICAgIyBBbmQgZmluYWxseSwgZG8gdGhlIHJvb3QgbG9nZ2VyDQogICAgICAgICAgICAgICAgcm9vdCA9IGNvbmZpZy5nZXQoJ3Jvb3QnLCBOb25lKQ0KICAgICAgICAgICAgICAgIGlmIHJvb3Q6DQogICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlndXJlX3Jvb3Qocm9vdCkNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignVW5hYmxlIHRvIGNvbmZpZ3VyZSByb290ICcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xvZ2dlcjogJXMnICUgZSkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGxvZ2dpbmcuX3JlbGVhc2VMb2NrKCkNCg0KICAgIGRlZiBjb25maWd1cmVfZm9ybWF0dGVyKHNlbGYsIGNvbmZpZyk6DQogICAgICAgICIiIkNvbmZpZ3VyZSBhIGZvcm1hdHRlciBmcm9tIGEgZGljdGlvbmFyeS4iIiINCiAgICAgICAgaWYgJygpJyBpbiBjb25maWc6DQogICAgICAgICAgICBmYWN0b3J5ID0gY29uZmlnWycoKSddICMgZm9yIHVzZSBpbiBleGNlcHRpb24gaGFuZGxlcg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYuY29uZmlndXJlX2N1c3RvbShjb25maWcpDQogICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yIGFzIHRlOg0KICAgICAgICAgICAgICAgIGlmICInZm9ybWF0JyIgbm90IGluIHN0cih0ZSk6DQogICAgICAgICAgICAgICAgICAgIHJhaXNlDQogICAgICAgICAgICAgICAgI05hbWUgb2YgcGFyYW1ldGVyIGNoYW5nZWQgZnJvbSBmbXQgdG8gZm9ybWF0Lg0KICAgICAgICAgICAgICAgICNSZXRyeSB3aXRoIG9sZCBuYW1lLg0KICAgICAgICAgICAgICAgICNUaGlzIGlzIHNvIHRoYXQgY29kZSBjYW4gYmUgdXNlZCB3aXRoIG9sZGVyIFB5dGhvbiB2ZXJzaW9ucw0KICAgICAgICAgICAgICAgICMoZS5nLiBieSBEamFuZ28pDQogICAgICAgICAgICAgICAgY29uZmlnWydmbXQnXSA9IGNvbmZpZy5wb3AoJ2Zvcm1hdCcpDQogICAgICAgICAgICAgICAgY29uZmlnWycoKSddID0gZmFjdG9yeQ0KICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYuY29uZmlndXJlX2N1c3RvbShjb25maWcpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBmbXQgPSBjb25maWcuZ2V0KCdmb3JtYXQnLCBOb25lKQ0KICAgICAgICAgICAgZGZtdCA9IGNvbmZpZy5nZXQoJ2RhdGVmbXQnLCBOb25lKQ0KICAgICAgICAgICAgcmVzdWx0ID0gbG9nZ2luZy5Gb3JtYXR0ZXIoZm10LCBkZm10KQ0KICAgICAgICByZXR1cm4gcmVzdWx0DQoNCiAgICBkZWYgY29uZmlndXJlX2ZpbHRlcihzZWxmLCBjb25maWcpOg0KICAgICAgICAiIiJDb25maWd1cmUgYSBmaWx0ZXIgZnJvbSBhIGRpY3Rpb25hcnkuIiIiDQogICAgICAgIGlmICcoKScgaW4gY29uZmlnOg0KICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5jb25maWd1cmVfY3VzdG9tKGNvbmZpZykNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIG5hbWUgPSBjb25maWcuZ2V0KCduYW1lJywgJycpDQogICAgICAgICAgICByZXN1bHQgPSBsb2dnaW5nLkZpbHRlcihuYW1lKQ0KICAgICAgICByZXR1cm4gcmVzdWx0DQoNCiAgICBkZWYgYWRkX2ZpbHRlcnMoc2VsZiwgZmlsdGVyZXIsIGZpbHRlcnMpOg0KICAgICAgICAiIiJBZGQgZmlsdGVycyB0byBhIGZpbHRlcmVyIGZyb20gYSBsaXN0IG9mIG5hbWVzLiIiIg0KICAgICAgICBmb3IgZiBpbiBmaWx0ZXJzOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGZpbHRlcmVyLmFkZEZpbHRlcihzZWxmLmNvbmZpZ1snZmlsdGVycyddW2ZdKQ0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ1VuYWJsZSB0byBhZGQgZmlsdGVyICVyOiAlcycgJSAoZiwgZSkpDQoNCiAgICBkZWYgY29uZmlndXJlX2hhbmRsZXIoc2VsZiwgY29uZmlnKToNCiAgICAgICAgIiIiQ29uZmlndXJlIGEgaGFuZGxlciBmcm9tIGEgZGljdGlvbmFyeS4iIiINCiAgICAgICAgZm9ybWF0dGVyID0gY29uZmlnLnBvcCgnZm9ybWF0dGVyJywgTm9uZSkNCiAgICAgICAgaWYgZm9ybWF0dGVyOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGZvcm1hdHRlciA9IHNlbGYuY29uZmlnWydmb3JtYXR0ZXJzJ11bZm9ybWF0dGVyXQ0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ1VuYWJsZSB0byBzZXQgZm9ybWF0dGVyICcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICclcjogJXMnICUgKGZvcm1hdHRlciwgZSkpDQogICAgICAgIGxldmVsID0gY29uZmlnLnBvcCgnbGV2ZWwnLCBOb25lKQ0KICAgICAgICBmaWx0ZXJzID0gY29uZmlnLnBvcCgnZmlsdGVycycsIE5vbmUpDQogICAgICAgIGlmICcoKScgaW4gY29uZmlnOg0KICAgICAgICAgICAgYyA9IGNvbmZpZy5wb3AoJygpJykNCiAgICAgICAgICAgIGlmIG5vdCBjYWxsYWJsZShjKToNCiAgICAgICAgICAgICAgICBjID0gc2VsZi5yZXNvbHZlKGMpDQogICAgICAgICAgICBmYWN0b3J5ID0gYw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAga2xhc3MgPSBzZWxmLnJlc29sdmUoY29uZmlnLnBvcCgnY2xhc3MnKSkNCiAgICAgICAgICAgICNTcGVjaWFsIGNhc2UgZm9yIGhhbmRsZXIgd2hpY2ggcmVmZXJzIHRvIGFub3RoZXIgaGFuZGxlcg0KICAgICAgICAgICAgaWYgaXNzdWJjbGFzcyhrbGFzcywgbG9nZ2luZy5oYW5kbGVycy5NZW1vcnlIYW5kbGVyKSBhbmRcDQogICAgICAgICAgICAgICAgJ3RhcmdldCcgaW4gY29uZmlnOg0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgY29uZmlnWyd0YXJnZXQnXSA9IHNlbGYuY29uZmlnWydoYW5kbGVycyddW2NvbmZpZ1sndGFyZ2V0J11dDQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdVbmFibGUgdG8gc2V0IHRhcmdldCBoYW5kbGVyICcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJXI6ICVzJyAlIChjb25maWdbJ3RhcmdldCddLCBlKSkNCiAgICAgICAgICAgIGVsaWYgaXNzdWJjbGFzcyhrbGFzcywgbG9nZ2luZy5oYW5kbGVycy5TTVRQSGFuZGxlcikgYW5kXA0KICAgICAgICAgICAgICAgICdtYWlsaG9zdCcgaW4gY29uZmlnOg0KICAgICAgICAgICAgICAgIGNvbmZpZ1snbWFpbGhvc3QnXSA9IHNlbGYuYXNfdHVwbGUoY29uZmlnWydtYWlsaG9zdCddKQ0KICAgICAgICAgICAgZWxpZiBpc3N1YmNsYXNzKGtsYXNzLCBsb2dnaW5nLmhhbmRsZXJzLlN5c0xvZ0hhbmRsZXIpIGFuZFwNCiAgICAgICAgICAgICAgICAnYWRkcmVzcycgaW4gY29uZmlnOg0KICAgICAgICAgICAgICAgIGNvbmZpZ1snYWRkcmVzcyddID0gc2VsZi5hc190dXBsZShjb25maWdbJ2FkZHJlc3MnXSkNCiAgICAgICAgICAgIGZhY3RvcnkgPSBrbGFzcw0KICAgICAgICBrd2FyZ3MgPSBkaWN0KFsoaywgY29uZmlnW2tdKSBmb3IgayBpbiBjb25maWcgaWYgdmFsaWRfaWRlbnQoayldKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXN1bHQgPSBmYWN0b3J5KCoqa3dhcmdzKQ0KICAgICAgICBleGNlcHQgVHlwZUVycm9yIGFzIHRlOg0KICAgICAgICAgICAgaWYgIidzdHJlYW0nIiBub3QgaW4gc3RyKHRlKToNCiAgICAgICAgICAgICAgICByYWlzZQ0KICAgICAgICAgICAgI1RoZSBhcmd1bWVudCBuYW1lIGNoYW5nZWQgZnJvbSBzdHJtIHRvIHN0cmVhbQ0KICAgICAgICAgICAgI1JldHJ5IHdpdGggb2xkIG5hbWUuDQogICAgICAgICAgICAjVGhpcyBpcyBzbyB0aGF0IGNvZGUgY2FuIGJlIHVzZWQgd2l0aCBvbGRlciBQeXRob24gdmVyc2lvbnMNCiAgICAgICAgICAgICMoZS5nLiBieSBEamFuZ28pDQogICAgICAgICAgICBrd2FyZ3NbJ3N0cm0nXSA9IGt3YXJncy5wb3AoJ3N0cmVhbScpDQogICAgICAgICAgICByZXN1bHQgPSBmYWN0b3J5KCoqa3dhcmdzKQ0KICAgICAgICBpZiBmb3JtYXR0ZXI6DQogICAgICAgICAgICByZXN1bHQuc2V0Rm9ybWF0dGVyKGZvcm1hdHRlcikNCiAgICAgICAgaWYgbGV2ZWwgaXMgbm90IE5vbmU6DQogICAgICAgICAgICByZXN1bHQuc2V0TGV2ZWwobG9nZ2luZy5fY2hlY2tMZXZlbChsZXZlbCkpDQogICAgICAgIGlmIGZpbHRlcnM6DQogICAgICAgICAgICBzZWxmLmFkZF9maWx0ZXJzKHJlc3VsdCwgZmlsdGVycykNCiAgICAgICAgcmV0dXJuIHJlc3VsdA0KDQogICAgZGVmIGFkZF9oYW5kbGVycyhzZWxmLCBsb2dnZXIsIGhhbmRsZXJzKToNCiAgICAgICAgIiIiQWRkIGhhbmRsZXJzIHRvIGEgbG9nZ2VyIGZyb20gYSBsaXN0IG9mIG5hbWVzLiIiIg0KICAgICAgICBmb3IgaCBpbiBoYW5kbGVyczoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBsb2dnZXIuYWRkSGFuZGxlcihzZWxmLmNvbmZpZ1snaGFuZGxlcnMnXVtoXSkNCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdVbmFibGUgdG8gYWRkIGhhbmRsZXIgJXI6ICVzJyAlIChoLCBlKSkNCg0KICAgIGRlZiBjb21tb25fbG9nZ2VyX2NvbmZpZyhzZWxmLCBsb2dnZXIsIGNvbmZpZywgaW5jcmVtZW50YWw9RmFsc2UpOg0KICAgICAgICAiIiINCiAgICAgICAgUGVyZm9ybSBjb25maWd1cmF0aW9uIHdoaWNoIGlzIGNvbW1vbiB0byByb290IGFuZCBub24tcm9vdCBsb2dnZXJzLg0KICAgICAgICAiIiINCiAgICAgICAgbGV2ZWwgPSBjb25maWcuZ2V0KCdsZXZlbCcsIE5vbmUpDQogICAgICAgIGlmIGxldmVsIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgbG9nZ2VyLnNldExldmVsKGxvZ2dpbmcuX2NoZWNrTGV2ZWwobGV2ZWwpKQ0KICAgICAgICBpZiBub3QgaW5jcmVtZW50YWw6DQogICAgICAgICAgICAjUmVtb3ZlIGFueSBleGlzdGluZyBoYW5kbGVycw0KICAgICAgICAgICAgZm9yIGggaW4gbG9nZ2VyLmhhbmRsZXJzWzpdOg0KICAgICAgICAgICAgICAgIGxvZ2dlci5yZW1vdmVIYW5kbGVyKGgpDQogICAgICAgICAgICBoYW5kbGVycyA9IGNvbmZpZy5nZXQoJ2hhbmRsZXJzJywgTm9uZSkNCiAgICAgICAgICAgIGlmIGhhbmRsZXJzOg0KICAgICAgICAgICAgICAgIHNlbGYuYWRkX2hhbmRsZXJzKGxvZ2dlciwgaGFuZGxlcnMpDQogICAgICAgICAgICBmaWx0ZXJzID0gY29uZmlnLmdldCgnZmlsdGVycycsIE5vbmUpDQogICAgICAgICAgICBpZiBmaWx0ZXJzOg0KICAgICAgICAgICAgICAgIHNlbGYuYWRkX2ZpbHRlcnMobG9nZ2VyLCBmaWx0ZXJzKQ0KDQogICAgZGVmIGNvbmZpZ3VyZV9sb2dnZXIoc2VsZiwgbmFtZSwgY29uZmlnLCBpbmNyZW1lbnRhbD1GYWxzZSk6DQogICAgICAgICIiIkNvbmZpZ3VyZSBhIG5vbi1yb290IGxvZ2dlciBmcm9tIGEgZGljdGlvbmFyeS4iIiINCiAgICAgICAgbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIobmFtZSkNCiAgICAgICAgc2VsZi5jb21tb25fbG9nZ2VyX2NvbmZpZyhsb2dnZXIsIGNvbmZpZywgaW5jcmVtZW50YWwpDQogICAgICAgIHByb3BhZ2F0ZSA9IGNvbmZpZy5nZXQoJ3Byb3BhZ2F0ZScsIE5vbmUpDQogICAgICAgIGlmIHByb3BhZ2F0ZSBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIGxvZ2dlci5wcm9wYWdhdGUgPSBwcm9wYWdhdGUNCg0KICAgIGRlZiBjb25maWd1cmVfcm9vdChzZWxmLCBjb25maWcsIGluY3JlbWVudGFsPUZhbHNlKToNCiAgICAgICAgIiIiQ29uZmlndXJlIGEgcm9vdCBsb2dnZXIgZnJvbSBhIGRpY3Rpb25hcnkuIiIiDQogICAgICAgIHJvb3QgPSBsb2dnaW5nLmdldExvZ2dlcigpDQogICAgICAgIHNlbGYuY29tbW9uX2xvZ2dlcl9jb25maWcocm9vdCwgY29uZmlnLCBpbmNyZW1lbnRhbCkNCg0KZGljdENvbmZpZ0NsYXNzID0gRGljdENvbmZpZ3VyYXRvcg0KDQpkZWYgZGljdENvbmZpZyhjb25maWcpOg0KICAgICIiIkNvbmZpZ3VyZSBsb2dnaW5nIHVzaW5nIGEgZGljdGlvbmFyeS4iIiINCiAgICBkaWN0Q29uZmlnQ2xhc3MoY29uZmlnKS5jb25maWd1cmUoKQ0KDQoNCmRlZiBsaXN0ZW4ocG9ydD1ERUZBVUxUX0xPR0dJTkdfQ09ORklHX1BPUlQpOg0KICAgICIiIg0KICAgIFN0YXJ0IHVwIGEgc29ja2V0IHNlcnZlciBvbiB0aGUgc3BlY2lmaWVkIHBvcnQsIGFuZCBsaXN0ZW4gZm9yIG5ldw0KICAgIGNvbmZpZ3VyYXRpb25zLg0KDQogICAgVGhlc2Ugd2lsbCBiZSBzZW50IGFzIGEgZmlsZSBzdWl0YWJsZSBmb3IgcHJvY2Vzc2luZyBieSBmaWxlQ29uZmlnKCkuDQogICAgUmV0dXJucyBhIFRocmVhZCBvYmplY3Qgb24gd2hpY2ggeW91IGNhbiBjYWxsIHN0YXJ0KCkgdG8gc3RhcnQgdGhlIHNlcnZlciwNCiAgICBhbmQgd2hpY2ggeW91IGNhbiBqb2luKCkgd2hlbiBhcHByb3ByaWF0ZS4gVG8gc3RvcCB0aGUgc2VydmVyLCBjYWxsDQogICAgc3RvcExpc3RlbmluZygpLg0KICAgICIiIg0KICAgIGlmIG5vdCB0aHJlYWQ6ICNwcmFnbWE6IG5vIGNvdmVyDQogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoImxpc3RlbigpIG5lZWRzIHRocmVhZGluZyB0byB3b3JrIikNCg0KICAgIGNsYXNzIENvbmZpZ1N0cmVhbUhhbmRsZXIoU3RyZWFtUmVxdWVzdEhhbmRsZXIpOg0KICAgICAgICAiIiINCiAgICAgICAgSGFuZGxlciBmb3IgYSBsb2dnaW5nIGNvbmZpZ3VyYXRpb24gcmVxdWVzdC4NCg0KICAgICAgICBJdCBleHBlY3RzIGEgY29tcGxldGVseSBuZXcgbG9nZ2luZyBjb25maWd1cmF0aW9uIGFuZCB1c2VzIGZpbGVDb25maWcNCiAgICAgICAgdG8gaW5zdGFsbCBpdC4NCiAgICAgICAgIiIiDQogICAgICAgIGRlZiBoYW5kbGUoc2VsZik6DQogICAgICAgICAgICAiIiINCiAgICAgICAgICAgIEhhbmRsZSBhIHJlcXVlc3QuDQoNCiAgICAgICAgICAgIEVhY2ggcmVxdWVzdCBpcyBleHBlY3RlZCB0byBiZSBhIDQtYnl0ZSBsZW5ndGgsIHBhY2tlZCB1c2luZw0KICAgICAgICAgICAgc3RydWN0LnBhY2soIj5MIiwgbiksIGZvbGxvd2VkIGJ5IHRoZSBjb25maWcgZmlsZS4NCiAgICAgICAgICAgIFVzZXMgZmlsZUNvbmZpZygpIHRvIGRvIHRoZSBncnVudCB3b3JrLg0KICAgICAgICAgICAgIiIiDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgY29ubiA9IHNlbGYuY29ubmVjdGlvbg0KICAgICAgICAgICAgICAgIGNodW5rID0gY29ubi5yZWN2KDQpDQogICAgICAgICAgICAgICAgaWYgbGVuKGNodW5rKSA9PSA0Og0KICAgICAgICAgICAgICAgICAgICBzbGVuID0gc3RydWN0LnVucGFjaygiPkwiLCBjaHVuaylbMF0NCiAgICAgICAgICAgICAgICAgICAgY2h1bmsgPSBzZWxmLmNvbm5lY3Rpb24ucmVjdihzbGVuKQ0KICAgICAgICAgICAgICAgICAgICB3aGlsZSBsZW4oY2h1bmspIDwgc2xlbjoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmsgKyBjb25uLnJlY3Yoc2xlbiAtIGxlbihjaHVuaykpDQogICAgICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmsuZGVjb2RlKCJ1dGYtOCIpDQogICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydCBqc29uDQogICAgICAgICAgICAgICAgICAgICAgICBkID1qc29uLmxvYWRzKGNodW5rKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoZCwgZGljdCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RDb25maWcoZCkNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgICAgICAgICAgI0FwcGx5IG5ldyBjb25maWd1cmF0aW9uLg0KDQogICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gaW8uU3RyaW5nSU8oY2h1bmspDQogICAgICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUNvbmZpZyhmaWxlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCwgU3lzdGVtRXhpdCk6ICNwcmFnbWE6IG5vIGNvdmVyDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkNCiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5zZXJ2ZXIucmVhZHk6DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlcnZlci5yZWFkeS5zZXQoKQ0KICAgICAgICAgICAgZXhjZXB0IHNvY2tldC5lcnJvciBhcyBlOg0KICAgICAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGUuYXJncywgdHVwbGUpOg0KICAgICAgICAgICAgICAgICAgICByYWlzZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGVycmNvZGUgPSBlLmFyZ3NbMF0NCiAgICAgICAgICAgICAgICAgICAgaWYgZXJyY29kZSAhPSBSRVNFVF9FUlJPUjoNCiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlDQoNCiAgICBjbGFzcyBDb25maWdTb2NrZXRSZWNlaXZlcihUaHJlYWRpbmdUQ1BTZXJ2ZXIpOg0KICAgICAgICAiIiINCiAgICAgICAgQSBzaW1wbGUgVENQIHNvY2tldC1iYXNlZCBsb2dnaW5nIGNvbmZpZyByZWNlaXZlci4NCiAgICAgICAgIiIiDQoNCiAgICAgICAgYWxsb3dfcmV1c2VfYWRkcmVzcyA9IDENCg0KICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgaG9zdD0nbG9jYWxob3N0JywgcG9ydD1ERUZBVUxUX0xPR0dJTkdfQ09ORklHX1BPUlQsDQogICAgICAgICAgICAgICAgICAgICBoYW5kbGVyPU5vbmUsIHJlYWR5PU5vbmUpOg0KICAgICAgICAgICAgVGhyZWFkaW5nVENQU2VydmVyLl9faW5pdF9fKHNlbGYsIChob3N0LCBwb3J0KSwgaGFuZGxlcikNCiAgICAgICAgICAgIGxvZ2dpbmcuX2FjcXVpcmVMb2NrKCkNCiAgICAgICAgICAgIHNlbGYuYWJvcnQgPSAwDQogICAgICAgICAgICBsb2dnaW5nLl9yZWxlYXNlTG9jaygpDQogICAgICAgICAgICBzZWxmLnRpbWVvdXQgPSAxDQogICAgICAgICAgICBzZWxmLnJlYWR5ID0gcmVhZHkNCg0KICAgICAgICBkZWYgc2VydmVfdW50aWxfc3RvcHBlZChzZWxmKToNCiAgICAgICAgICAgIGltcG9ydCBzZWxlY3QNCiAgICAgICAgICAgIGFib3J0ID0gMA0KICAgICAgICAgICAgd2hpbGUgbm90IGFib3J0Og0KICAgICAgICAgICAgICAgIHJkLCB3ciwgZXggPSBzZWxlY3Quc2VsZWN0KFtzZWxmLnNvY2tldC5maWxlbm8oKV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW10sIFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGltZW91dCkNCiAgICAgICAgICAgICAgICBpZiByZDoNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVfcmVxdWVzdCgpDQogICAgICAgICAgICAgICAgbG9nZ2luZy5fYWNxdWlyZUxvY2soKQ0KICAgICAgICAgICAgICAgIGFib3J0ID0gc2VsZi5hYm9ydA0KICAgICAgICAgICAgICAgIGxvZ2dpbmcuX3JlbGVhc2VMb2NrKCkNCiAgICAgICAgICAgIHNlbGYuc29ja2V0LmNsb3NlKCkNCg0KICAgIGNsYXNzIFNlcnZlcih0aHJlYWRpbmcuVGhyZWFkKToNCg0KICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgcmN2ciwgaGRsciwgcG9ydCk6DQogICAgICAgICAgICBzdXBlcihTZXJ2ZXIsIHNlbGYpLl9faW5pdF9fKCkNCiAgICAgICAgICAgIHNlbGYucmN2ciA9IHJjdnINCiAgICAgICAgICAgIHNlbGYuaGRsciA9IGhkbHINCiAgICAgICAgICAgIHNlbGYucG9ydCA9IHBvcnQNCiAgICAgICAgICAgIHNlbGYucmVhZHkgPSB0aHJlYWRpbmcuRXZlbnQoKQ0KDQogICAgICAgIGRlZiBydW4oc2VsZik6DQogICAgICAgICAgICBzZXJ2ZXIgPSBzZWxmLnJjdnIocG9ydD1zZWxmLnBvcnQsIGhhbmRsZXI9c2VsZi5oZGxyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5PXNlbGYucmVhZHkpDQogICAgICAgICAgICBpZiBzZWxmLnBvcnQgPT0gMDoNCiAgICAgICAgICAgICAgICBzZWxmLnBvcnQgPSBzZXJ2ZXIuc2VydmVyX2FkZHJlc3NbMV0NCiAgICAgICAgICAgIHNlbGYucmVhZHkuc2V0KCkNCiAgICAgICAgICAgIGdsb2JhbCBfbGlzdGVuZXINCiAgICAgICAgICAgIGxvZ2dpbmcuX2FjcXVpcmVMb2NrKCkNCiAgICAgICAgICAgIF9saXN0ZW5lciA9IHNlcnZlcg0KICAgICAgICAgICAgbG9nZ2luZy5fcmVsZWFzZUxvY2soKQ0KICAgICAgICAgICAgc2VydmVyLnNlcnZlX3VudGlsX3N0b3BwZWQoKQ0KDQogICAgcmV0dXJuIFNlcnZlcihDb25maWdTb2NrZXRSZWNlaXZlciwgQ29uZmlnU3RyZWFtSGFuZGxlciwgcG9ydCkNCg0KZGVmIHN0b3BMaXN0ZW5pbmcoKToNCiAgICAiIiINCiAgICBTdG9wIHRoZSBsaXN0ZW5pbmcgc2VydmVyIHdoaWNoIHdhcyBjcmVhdGVkIHdpdGggYSBjYWxsIHRvIGxpc3RlbigpLg0KICAgICIiIg0KICAgIGdsb2JhbCBfbGlzdGVuZXINCiAgICBsb2dnaW5nLl9hY3F1aXJlTG9jaygpDQogICAgdHJ5Og0KICAgICAgICBpZiBfbGlzdGVuZXI6DQogICAgICAgICAgICBfbGlzdGVuZXIuYWJvcnQgPSAxDQogICAgICAgICAgICBfbGlzdGVuZXIgPSBOb25lDQogICAgZmluYWxseToNCiAgICAgICAgbG9nZ2luZy5fcmVsZWFzZUxvY2soKQ0K',
'/Lib/html/__init__.py':'IiIiCkdlbmVyYWwgZnVuY3Rpb25zIGZvciBIVE1MIG1hbmlwdWxhdGlvbi4KIiIiCgoKX2VzY2FwZV9tYXAgPSB7b3JkKCcmJyk6ICcmYW1wOycsIG9yZCgnPCcpOiAnJmx0OycsIG9yZCgnPicpOiAnJmd0Oyd9Cl9lc2NhcGVfbWFwX2Z1bGwgPSB7b3JkKCcmJyk6ICcmYW1wOycsIG9yZCgnPCcpOiAnJmx0OycsIG9yZCgnPicpOiAnJmd0OycsCiAgICAgICAgICAgICAgICAgICAgb3JkKCciJyk6ICcmcXVvdDsnLCBvcmQoJ1wnJyk6ICcmI3gyNzsnfQoKIyBOQjogdGhpcyBpcyBhIGNhbmRpZGF0ZSBmb3IgYSBieXRlcy9zdHJpbmcgcG9seW1vcnBoaWMgaW50ZXJmYWNlCgpkZWYgZXNjYXBlKHMsIHF1b3RlPVRydWUpOgogICAgIiIiCiAgICBSZXBsYWNlIHNwZWNpYWwgY2hhcmFjdGVycyAiJiIsICI8IiBhbmQgIj4iIHRvIEhUTUwtc2FmZSBzZXF1ZW5jZXMuCiAgICBJZiB0aGUgb3B0aW9uYWwgZmxhZyBxdW90ZSBpcyB0cnVlICh0aGUgZGVmYXVsdCksIHRoZSBxdW90YXRpb24gbWFyawogICAgY2hhcmFjdGVycywgYm90aCBkb3VibGUgcXVvdGUgKCIpIGFuZCBzaW5nbGUgcXVvdGUgKCcpIGNoYXJhY3RlcnMgYXJlIGFsc28KICAgIHRyYW5zbGF0ZWQuCiAgICAiIiIKICAgIGlmIHF1b3RlOgogICAgICAgIHJldHVybiBzLnRyYW5zbGF0ZShfZXNjYXBlX21hcF9mdWxsKQogICAgcmV0dXJuIHMudHJhbnNsYXRlKF9lc2NhcGVfbWFwKQo=',
'/Lib/html/entities.py':'IiIiSFRNTCBjaGFyYWN0ZXIgZW50aXR5IHJlZmVyZW5jZXMuIiIiCgojIG1hcHMgdGhlIEhUTUwgZW50aXR5IG5hbWUgdG8gdGhlIFVuaWNvZGUgY29kZXBvaW50Cm5hbWUyY29kZXBvaW50ID0gewogICAgJ0FFbGlnJzogICAgMHgwMGM2LCAjIGxhdGluIGNhcGl0YWwgbGV0dGVyIEFFID0gbGF0aW4gY2FwaXRhbCBsaWdhdHVyZSBBRSwgVSswMEM2IElTT2xhdDEKICAgICdBYWN1dGUnOiAgIDB4MDBjMSwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBBIHdpdGggYWN1dGUsIFUrMDBDMSBJU09sYXQxCiAgICAnQWNpcmMnOiAgICAweDAwYzIsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgQSB3aXRoIGNpcmN1bWZsZXgsIFUrMDBDMiBJU09sYXQxCiAgICAnQWdyYXZlJzogICAweDAwYzAsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgQSB3aXRoIGdyYXZlID0gbGF0aW4gY2FwaXRhbCBsZXR0ZXIgQSBncmF2ZSwgVSswMEMwIElTT2xhdDEKICAgICdBbHBoYSc6ICAgIDB4MDM5MSwgIyBncmVlayBjYXBpdGFsIGxldHRlciBhbHBoYSwgVSswMzkxCiAgICAnQXJpbmcnOiAgICAweDAwYzUsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgQSB3aXRoIHJpbmcgYWJvdmUgPSBsYXRpbiBjYXBpdGFsIGxldHRlciBBIHJpbmcsIFUrMDBDNSBJU09sYXQxCiAgICAnQXRpbGRlJzogICAweDAwYzMsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgQSB3aXRoIHRpbGRlLCBVKzAwQzMgSVNPbGF0MQogICAgJ0F1bWwnOiAgICAgMHgwMGM0LCAjIGxhdGluIGNhcGl0YWwgbGV0dGVyIEEgd2l0aCBkaWFlcmVzaXMsIFUrMDBDNCBJU09sYXQxCiAgICAnQmV0YSc6ICAgICAweDAzOTIsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgYmV0YSwgVSswMzkyCiAgICAnQ2NlZGlsJzogICAweDAwYzcsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgQyB3aXRoIGNlZGlsbGEsIFUrMDBDNyBJU09sYXQxCiAgICAnQ2hpJzogICAgICAweDAzYTcsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgY2hpLCBVKzAzQTcKICAgICdEYWdnZXInOiAgIDB4MjAyMSwgIyBkb3VibGUgZGFnZ2VyLCBVKzIwMjEgSVNPcHViCiAgICAnRGVsdGEnOiAgICAweDAzOTQsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgZGVsdGEsIFUrMDM5NCBJU09ncmszCiAgICAnRVRIJzogICAgICAweDAwZDAsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgRVRILCBVKzAwRDAgSVNPbGF0MQogICAgJ0VhY3V0ZSc6ICAgMHgwMGM5LCAjIGxhdGluIGNhcGl0YWwgbGV0dGVyIEUgd2l0aCBhY3V0ZSwgVSswMEM5IElTT2xhdDEKICAgICdFY2lyYyc6ICAgIDB4MDBjYSwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBFIHdpdGggY2lyY3VtZmxleCwgVSswMENBIElTT2xhdDEKICAgICdFZ3JhdmUnOiAgIDB4MDBjOCwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBFIHdpdGggZ3JhdmUsIFUrMDBDOCBJU09sYXQxCiAgICAnRXBzaWxvbic6ICAweDAzOTUsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgZXBzaWxvbiwgVSswMzk1CiAgICAnRXRhJzogICAgICAweDAzOTcsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgZXRhLCBVKzAzOTcKICAgICdFdW1sJzogICAgIDB4MDBjYiwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBFIHdpdGggZGlhZXJlc2lzLCBVKzAwQ0IgSVNPbGF0MQogICAgJ0dhbW1hJzogICAgMHgwMzkzLCAjIGdyZWVrIGNhcGl0YWwgbGV0dGVyIGdhbW1hLCBVKzAzOTMgSVNPZ3JrMwogICAgJ0lhY3V0ZSc6ICAgMHgwMGNkLCAjIGxhdGluIGNhcGl0YWwgbGV0dGVyIEkgd2l0aCBhY3V0ZSwgVSswMENEIElTT2xhdDEKICAgICdJY2lyYyc6ICAgIDB4MDBjZSwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBJIHdpdGggY2lyY3VtZmxleCwgVSswMENFIElTT2xhdDEKICAgICdJZ3JhdmUnOiAgIDB4MDBjYywgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBJIHdpdGggZ3JhdmUsIFUrMDBDQyBJU09sYXQxCiAgICAnSW90YSc6ICAgICAweDAzOTksICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgaW90YSwgVSswMzk5CiAgICAnSXVtbCc6ICAgICAweDAwY2YsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgSSB3aXRoIGRpYWVyZXNpcywgVSswMENGIElTT2xhdDEKICAgICdLYXBwYSc6ICAgIDB4MDM5YSwgIyBncmVlayBjYXBpdGFsIGxldHRlciBrYXBwYSwgVSswMzlBCiAgICAnTGFtYmRhJzogICAweDAzOWIsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgbGFtYmRhLCBVKzAzOUIgSVNPZ3JrMwogICAgJ011JzogICAgICAgMHgwMzljLCAjIGdyZWVrIGNhcGl0YWwgbGV0dGVyIG11LCBVKzAzOUMKICAgICdOdGlsZGUnOiAgIDB4MDBkMSwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBOIHdpdGggdGlsZGUsIFUrMDBEMSBJU09sYXQxCiAgICAnTnUnOiAgICAgICAweDAzOWQsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgbnUsIFUrMDM5RAogICAgJ09FbGlnJzogICAgMHgwMTUyLCAjIGxhdGluIGNhcGl0YWwgbGlnYXR1cmUgT0UsIFUrMDE1MiBJU09sYXQyCiAgICAnT2FjdXRlJzogICAweDAwZDMsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgTyB3aXRoIGFjdXRlLCBVKzAwRDMgSVNPbGF0MQogICAgJ09jaXJjJzogICAgMHgwMGQ0LCAjIGxhdGluIGNhcGl0YWwgbGV0dGVyIE8gd2l0aCBjaXJjdW1mbGV4LCBVKzAwRDQgSVNPbGF0MQogICAgJ09ncmF2ZSc6ICAgMHgwMGQyLCAjIGxhdGluIGNhcGl0YWwgbGV0dGVyIE8gd2l0aCBncmF2ZSwgVSswMEQyIElTT2xhdDEKICAgICdPbWVnYSc6ICAgIDB4MDNhOSwgIyBncmVlayBjYXBpdGFsIGxldHRlciBvbWVnYSwgVSswM0E5IElTT2dyazMKICAgICdPbWljcm9uJzogIDB4MDM5ZiwgIyBncmVlayBjYXBpdGFsIGxldHRlciBvbWljcm9uLCBVKzAzOUYKICAgICdPc2xhc2gnOiAgIDB4MDBkOCwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBPIHdpdGggc3Ryb2tlID0gbGF0aW4gY2FwaXRhbCBsZXR0ZXIgTyBzbGFzaCwgVSswMEQ4IElTT2xhdDEKICAgICdPdGlsZGUnOiAgIDB4MDBkNSwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBPIHdpdGggdGlsZGUsIFUrMDBENSBJU09sYXQxCiAgICAnT3VtbCc6ICAgICAweDAwZDYsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgTyB3aXRoIGRpYWVyZXNpcywgVSswMEQ2IElTT2xhdDEKICAgICdQaGknOiAgICAgIDB4MDNhNiwgIyBncmVlayBjYXBpdGFsIGxldHRlciBwaGksIFUrMDNBNiBJU09ncmszCiAgICAnUGknOiAgICAgICAweDAzYTAsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgcGksIFUrMDNBMCBJU09ncmszCiAgICAnUHJpbWUnOiAgICAweDIwMzMsICMgZG91YmxlIHByaW1lID0gc2Vjb25kcyA9IGluY2hlcywgVSsyMDMzIElTT3RlY2gKICAgICdQc2knOiAgICAgIDB4MDNhOCwgIyBncmVlayBjYXBpdGFsIGxldHRlciBwc2ksIFUrMDNBOCBJU09ncmszCiAgICAnUmhvJzogICAgICAweDAzYTEsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgcmhvLCBVKzAzQTEKICAgICdTY2Fyb24nOiAgIDB4MDE2MCwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBTIHdpdGggY2Fyb24sIFUrMDE2MCBJU09sYXQyCiAgICAnU2lnbWEnOiAgICAweDAzYTMsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgc2lnbWEsIFUrMDNBMyBJU09ncmszCiAgICAnVEhPUk4nOiAgICAweDAwZGUsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgVEhPUk4sIFUrMDBERSBJU09sYXQxCiAgICAnVGF1JzogICAgICAweDAzYTQsICMgZ3JlZWsgY2FwaXRhbCBsZXR0ZXIgdGF1LCBVKzAzQTQKICAgICdUaGV0YSc6ICAgIDB4MDM5OCwgIyBncmVlayBjYXBpdGFsIGxldHRlciB0aGV0YSwgVSswMzk4IElTT2dyazMKICAgICdVYWN1dGUnOiAgIDB4MDBkYSwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBVIHdpdGggYWN1dGUsIFUrMDBEQSBJU09sYXQxCiAgICAnVWNpcmMnOiAgICAweDAwZGIsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgVSB3aXRoIGNpcmN1bWZsZXgsIFUrMDBEQiBJU09sYXQxCiAgICAnVWdyYXZlJzogICAweDAwZDksICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgVSB3aXRoIGdyYXZlLCBVKzAwRDkgSVNPbGF0MQogICAgJ1Vwc2lsb24nOiAgMHgwM2E1LCAjIGdyZWVrIGNhcGl0YWwgbGV0dGVyIHVwc2lsb24sIFUrMDNBNSBJU09ncmszCiAgICAnVXVtbCc6ICAgICAweDAwZGMsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgVSB3aXRoIGRpYWVyZXNpcywgVSswMERDIElTT2xhdDEKICAgICdYaSc6ICAgICAgIDB4MDM5ZSwgIyBncmVlayBjYXBpdGFsIGxldHRlciB4aSwgVSswMzlFIElTT2dyazMKICAgICdZYWN1dGUnOiAgIDB4MDBkZCwgIyBsYXRpbiBjYXBpdGFsIGxldHRlciBZIHdpdGggYWN1dGUsIFUrMDBERCBJU09sYXQxCiAgICAnWXVtbCc6ICAgICAweDAxNzgsICMgbGF0aW4gY2FwaXRhbCBsZXR0ZXIgWSB3aXRoIGRpYWVyZXNpcywgVSswMTc4IElTT2xhdDIKICAgICdaZXRhJzogICAgIDB4MDM5NiwgIyBncmVlayBjYXBpdGFsIGxldHRlciB6ZXRhLCBVKzAzOTYKICAgICdhYWN1dGUnOiAgIDB4MDBlMSwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgYSB3aXRoIGFjdXRlLCBVKzAwRTEgSVNPbGF0MQogICAgJ2FjaXJjJzogICAgMHgwMGUyLCAjIGxhdGluIHNtYWxsIGxldHRlciBhIHdpdGggY2lyY3VtZmxleCwgVSswMEUyIElTT2xhdDEKICAgICdhY3V0ZSc6ICAgIDB4MDBiNCwgIyBhY3V0ZSBhY2NlbnQgPSBzcGFjaW5nIGFjdXRlLCBVKzAwQjQgSVNPZGlhCiAgICAnYWVsaWcnOiAgICAweDAwZTYsICMgbGF0aW4gc21hbGwgbGV0dGVyIGFlID0gbGF0aW4gc21hbGwgbGlnYXR1cmUgYWUsIFUrMDBFNiBJU09sYXQxCiAgICAnYWdyYXZlJzogICAweDAwZTAsICMgbGF0aW4gc21hbGwgbGV0dGVyIGEgd2l0aCBncmF2ZSA9IGxhdGluIHNtYWxsIGxldHRlciBhIGdyYXZlLCBVKzAwRTAgSVNPbGF0MQogICAgJ2FsZWZzeW0nOiAgMHgyMTM1LCAjIGFsZWYgc3ltYm9sID0gZmlyc3QgdHJhbnNmaW5pdGUgY2FyZGluYWwsIFUrMjEzNSBORVcKICAgICdhbHBoYSc6ICAgIDB4MDNiMSwgIyBncmVlayBzbWFsbCBsZXR0ZXIgYWxwaGEsIFUrMDNCMSBJU09ncmszCiAgICAnYW1wJzogICAgICAweDAwMjYsICMgYW1wZXJzYW5kLCBVKzAwMjYgSVNPbnVtCiAgICAnYW5kJzogICAgICAweDIyMjcsICMgbG9naWNhbCBhbmQgPSB3ZWRnZSwgVSsyMjI3IElTT3RlY2gKICAgICdhbmcnOiAgICAgIDB4MjIyMCwgIyBhbmdsZSwgVSsyMjIwIElTT2Ftc28KICAgICdhcmluZyc6ICAgIDB4MDBlNSwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgYSB3aXRoIHJpbmcgYWJvdmUgPSBsYXRpbiBzbWFsbCBsZXR0ZXIgYSByaW5nLCBVKzAwRTUgSVNPbGF0MQogICAgJ2FzeW1wJzogICAgMHgyMjQ4LCAjIGFsbW9zdCBlcXVhbCB0byA9IGFzeW1wdG90aWMgdG8sIFUrMjI0OCBJU09hbXNyCiAgICAnYXRpbGRlJzogICAweDAwZTMsICMgbGF0aW4gc21hbGwgbGV0dGVyIGEgd2l0aCB0aWxkZSwgVSswMEUzIElTT2xhdDEKICAgICdhdW1sJzogICAgIDB4MDBlNCwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgYSB3aXRoIGRpYWVyZXNpcywgVSswMEU0IElTT2xhdDEKICAgICdiZHF1byc6ICAgIDB4MjAxZSwgIyBkb3VibGUgbG93LTkgcXVvdGF0aW9uIG1hcmssIFUrMjAxRSBORVcKICAgICdiZXRhJzogICAgIDB4MDNiMiwgIyBncmVlayBzbWFsbCBsZXR0ZXIgYmV0YSwgVSswM0IyIElTT2dyazMKICAgICdicnZiYXInOiAgIDB4MDBhNiwgIyBicm9rZW4gYmFyID0gYnJva2VuIHZlcnRpY2FsIGJhciwgVSswMEE2IElTT251bQogICAgJ2J1bGwnOiAgICAgMHgyMDIyLCAjIGJ1bGxldCA9IGJsYWNrIHNtYWxsIGNpcmNsZSwgVSsyMDIyIElTT3B1YgogICAgJ2NhcCc6ICAgICAgMHgyMjI5LCAjIGludGVyc2VjdGlvbiA9IGNhcCwgVSsyMjI5IElTT3RlY2gKICAgICdjY2VkaWwnOiAgIDB4MDBlNywgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgYyB3aXRoIGNlZGlsbGEsIFUrMDBFNyBJU09sYXQxCiAgICAnY2VkaWwnOiAgICAweDAwYjgsICMgY2VkaWxsYSA9IHNwYWNpbmcgY2VkaWxsYSwgVSswMEI4IElTT2RpYQogICAgJ2NlbnQnOiAgICAgMHgwMGEyLCAjIGNlbnQgc2lnbiwgVSswMEEyIElTT251bQogICAgJ2NoaSc6ICAgICAgMHgwM2M3LCAjIGdyZWVrIHNtYWxsIGxldHRlciBjaGksIFUrMDNDNyBJU09ncmszCiAgICAnY2lyYyc6ICAgICAweDAyYzYsICMgbW9kaWZpZXIgbGV0dGVyIGNpcmN1bWZsZXggYWNjZW50LCBVKzAyQzYgSVNPcHViCiAgICAnY2x1YnMnOiAgICAweDI2NjMsICMgYmxhY2sgY2x1YiBzdWl0ID0gc2hhbXJvY2ssIFUrMjY2MyBJU09wdWIKICAgICdjb25nJzogICAgIDB4MjI0NSwgIyBhcHByb3hpbWF0ZWx5IGVxdWFsIHRvLCBVKzIyNDUgSVNPdGVjaAogICAgJ2NvcHknOiAgICAgMHgwMGE5LCAjIGNvcHlyaWdodCBzaWduLCBVKzAwQTkgSVNPbnVtCiAgICAnY3JhcnInOiAgICAweDIxYjUsICMgZG93bndhcmRzIGFycm93IHdpdGggY29ybmVyIGxlZnR3YXJkcyA9IGNhcnJpYWdlIHJldHVybiwgVSsyMUI1IE5FVwogICAgJ2N1cCc6ICAgICAgMHgyMjJhLCAjIHVuaW9uID0gY3VwLCBVKzIyMkEgSVNPdGVjaAogICAgJ2N1cnJlbic6ICAgMHgwMGE0LCAjIGN1cnJlbmN5IHNpZ24sIFUrMDBBNCBJU09udW0KICAgICdkQXJyJzogICAgIDB4MjFkMywgIyBkb3dud2FyZHMgZG91YmxlIGFycm93LCBVKzIxRDMgSVNPYW1zYQogICAgJ2RhZ2dlcic6ICAgMHgyMDIwLCAjIGRhZ2dlciwgVSsyMDIwIElTT3B1YgogICAgJ2RhcnInOiAgICAgMHgyMTkzLCAjIGRvd253YXJkcyBhcnJvdywgVSsyMTkzIElTT251bQogICAgJ2RlZyc6ICAgICAgMHgwMGIwLCAjIGRlZ3JlZSBzaWduLCBVKzAwQjAgSVNPbnVtCiAgICAnZGVsdGEnOiAgICAweDAzYjQsICMgZ3JlZWsgc21hbGwgbGV0dGVyIGRlbHRhLCBVKzAzQjQgSVNPZ3JrMwogICAgJ2RpYW1zJzogICAgMHgyNjY2LCAjIGJsYWNrIGRpYW1vbmQgc3VpdCwgVSsyNjY2IElTT3B1YgogICAgJ2RpdmlkZSc6ICAgMHgwMGY3LCAjIGRpdmlzaW9uIHNpZ24sIFUrMDBGNyBJU09udW0KICAgICdlYWN1dGUnOiAgIDB4MDBlOSwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgZSB3aXRoIGFjdXRlLCBVKzAwRTkgSVNPbGF0MQogICAgJ2VjaXJjJzogICAgMHgwMGVhLCAjIGxhdGluIHNtYWxsIGxldHRlciBlIHdpdGggY2lyY3VtZmxleCwgVSswMEVBIElTT2xhdDEKICAgICdlZ3JhdmUnOiAgIDB4MDBlOCwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgZSB3aXRoIGdyYXZlLCBVKzAwRTggSVNPbGF0MQogICAgJ2VtcHR5JzogICAgMHgyMjA1LCAjIGVtcHR5IHNldCA9IG51bGwgc2V0ID0gZGlhbWV0ZXIsIFUrMjIwNSBJU09hbXNvCiAgICAnZW1zcCc6ICAgICAweDIwMDMsICMgZW0gc3BhY2UsIFUrMjAwMyBJU09wdWIKICAgICdlbnNwJzogICAgIDB4MjAwMiwgIyBlbiBzcGFjZSwgVSsyMDAyIElTT3B1YgogICAgJ2Vwc2lsb24nOiAgMHgwM2I1LCAjIGdyZWVrIHNtYWxsIGxldHRlciBlcHNpbG9uLCBVKzAzQjUgSVNPZ3JrMwogICAgJ2VxdWl2JzogICAgMHgyMjYxLCAjIGlkZW50aWNhbCB0bywgVSsyMjYxIElTT3RlY2gKICAgICdldGEnOiAgICAgIDB4MDNiNywgIyBncmVlayBzbWFsbCBsZXR0ZXIgZXRhLCBVKzAzQjcgSVNPZ3JrMwogICAgJ2V0aCc6ICAgICAgMHgwMGYwLCAjIGxhdGluIHNtYWxsIGxldHRlciBldGgsIFUrMDBGMCBJU09sYXQxCiAgICAnZXVtbCc6ICAgICAweDAwZWIsICMgbGF0aW4gc21hbGwgbGV0dGVyIGUgd2l0aCBkaWFlcmVzaXMsIFUrMDBFQiBJU09sYXQxCiAgICAnZXVybyc6ICAgICAweDIwYWMsICMgZXVybyBzaWduLCBVKzIwQUMgTkVXCiAgICAnZXhpc3QnOiAgICAweDIyMDMsICMgdGhlcmUgZXhpc3RzLCBVKzIyMDMgSVNPdGVjaAogICAgJ2Zub2YnOiAgICAgMHgwMTkyLCAjIGxhdGluIHNtYWxsIGYgd2l0aCBob29rID0gZnVuY3Rpb24gPSBmbG9yaW4sIFUrMDE5MiBJU090ZWNoCiAgICAnZm9yYWxsJzogICAweDIyMDAsICMgZm9yIGFsbCwgVSsyMjAwIElTT3RlY2gKICAgICdmcmFjMTInOiAgIDB4MDBiZCwgIyB2dWxnYXIgZnJhY3Rpb24gb25lIGhhbGYgPSBmcmFjdGlvbiBvbmUgaGFsZiwgVSswMEJEIElTT251bQogICAgJ2ZyYWMxNCc6ICAgMHgwMGJjLCAjIHZ1bGdhciBmcmFjdGlvbiBvbmUgcXVhcnRlciA9IGZyYWN0aW9uIG9uZSBxdWFydGVyLCBVKzAwQkMgSVNPbnVtCiAgICAnZnJhYzM0JzogICAweDAwYmUsICMgdnVsZ2FyIGZyYWN0aW9uIHRocmVlIHF1YXJ0ZXJzID0gZnJhY3Rpb24gdGhyZWUgcXVhcnRlcnMsIFUrMDBCRSBJU09udW0KICAgICdmcmFzbCc6ICAgIDB4MjA0NCwgIyBmcmFjdGlvbiBzbGFzaCwgVSsyMDQ0IE5FVwogICAgJ2dhbW1hJzogICAgMHgwM2IzLCAjIGdyZWVrIHNtYWxsIGxldHRlciBnYW1tYSwgVSswM0IzIElTT2dyazMKICAgICdnZSc6ICAgICAgIDB4MjI2NSwgIyBncmVhdGVyLXRoYW4gb3IgZXF1YWwgdG8sIFUrMjI2NSBJU090ZWNoCiAgICAnZ3QnOiAgICAgICAweDAwM2UsICMgZ3JlYXRlci10aGFuIHNpZ24sIFUrMDAzRSBJU09udW0KICAgICdoQXJyJzogICAgIDB4MjFkNCwgIyBsZWZ0IHJpZ2h0IGRvdWJsZSBhcnJvdywgVSsyMUQ0IElTT2Ftc2EKICAgICdoYXJyJzogICAgIDB4MjE5NCwgIyBsZWZ0IHJpZ2h0IGFycm93LCBVKzIxOTQgSVNPYW1zYQogICAgJ2hlYXJ0cyc6ICAgMHgyNjY1LCAjIGJsYWNrIGhlYXJ0IHN1aXQgPSB2YWxlbnRpbmUsIFUrMjY2NSBJU09wdWIKICAgICdoZWxsaXAnOiAgIDB4MjAyNiwgIyBob3Jpem9udGFsIGVsbGlwc2lzID0gdGhyZWUgZG90IGxlYWRlciwgVSsyMDI2IElTT3B1YgogICAgJ2lhY3V0ZSc6ICAgMHgwMGVkLCAjIGxhdGluIHNtYWxsIGxldHRlciBpIHdpdGggYWN1dGUsIFUrMDBFRCBJU09sYXQxCiAgICAnaWNpcmMnOiAgICAweDAwZWUsICMgbGF0aW4gc21hbGwgbGV0dGVyIGkgd2l0aCBjaXJjdW1mbGV4LCBVKzAwRUUgSVNPbGF0MQogICAgJ2lleGNsJzogICAgMHgwMGExLCAjIGludmVydGVkIGV4Y2xhbWF0aW9uIG1hcmssIFUrMDBBMSBJU09udW0KICAgICdpZ3JhdmUnOiAgIDB4MDBlYywgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgaSB3aXRoIGdyYXZlLCBVKzAwRUMgSVNPbGF0MQogICAgJ2ltYWdlJzogICAgMHgyMTExLCAjIGJsYWNrbGV0dGVyIGNhcGl0YWwgSSA9IGltYWdpbmFyeSBwYXJ0LCBVKzIxMTEgSVNPYW1zbwogICAgJ2luZmluJzogICAgMHgyMjFlLCAjIGluZmluaXR5LCBVKzIyMUUgSVNPdGVjaAogICAgJ2ludCc6ICAgICAgMHgyMjJiLCAjIGludGVncmFsLCBVKzIyMkIgSVNPdGVjaAogICAgJ2lvdGEnOiAgICAgMHgwM2I5LCAjIGdyZWVrIHNtYWxsIGxldHRlciBpb3RhLCBVKzAzQjkgSVNPZ3JrMwogICAgJ2lxdWVzdCc6ICAgMHgwMGJmLCAjIGludmVydGVkIHF1ZXN0aW9uIG1hcmsgPSB0dXJuZWQgcXVlc3Rpb24gbWFyaywgVSswMEJGIElTT251bQogICAgJ2lzaW4nOiAgICAgMHgyMjA4LCAjIGVsZW1lbnQgb2YsIFUrMjIwOCBJU090ZWNoCiAgICAnaXVtbCc6ICAgICAweDAwZWYsICMgbGF0aW4gc21hbGwgbGV0dGVyIGkgd2l0aCBkaWFlcmVzaXMsIFUrMDBFRiBJU09sYXQxCiAgICAna2FwcGEnOiAgICAweDAzYmEsICMgZ3JlZWsgc21hbGwgbGV0dGVyIGthcHBhLCBVKzAzQkEgSVNPZ3JrMwogICAgJ2xBcnInOiAgICAgMHgyMWQwLCAjIGxlZnR3YXJkcyBkb3VibGUgYXJyb3csIFUrMjFEMCBJU090ZWNoCiAgICAnbGFtYmRhJzogICAweDAzYmIsICMgZ3JlZWsgc21hbGwgbGV0dGVyIGxhbWJkYSwgVSswM0JCIElTT2dyazMKICAgICdsYW5nJzogICAgIDB4MjMyOSwgIyBsZWZ0LXBvaW50aW5nIGFuZ2xlIGJyYWNrZXQgPSBicmEsIFUrMjMyOSBJU090ZWNoCiAgICAnbGFxdW8nOiAgICAweDAwYWIsICMgbGVmdC1wb2ludGluZyBkb3VibGUgYW5nbGUgcXVvdGF0aW9uIG1hcmsgPSBsZWZ0IHBvaW50aW5nIGd1aWxsZW1ldCwgVSswMEFCIElTT251bQogICAgJ2xhcnInOiAgICAgMHgyMTkwLCAjIGxlZnR3YXJkcyBhcnJvdywgVSsyMTkwIElTT251bQogICAgJ2xjZWlsJzogICAgMHgyMzA4LCAjIGxlZnQgY2VpbGluZyA9IGFwbCB1cHN0aWxlLCBVKzIzMDggSVNPYW1zYwogICAgJ2xkcXVvJzogICAgMHgyMDFjLCAjIGxlZnQgZG91YmxlIHF1b3RhdGlvbiBtYXJrLCBVKzIwMUMgSVNPbnVtCiAgICAnbGUnOiAgICAgICAweDIyNjQsICMgbGVzcy10aGFuIG9yIGVxdWFsIHRvLCBVKzIyNjQgSVNPdGVjaAogICAgJ2xmbG9vcic6ICAgMHgyMzBhLCAjIGxlZnQgZmxvb3IgPSBhcGwgZG93bnN0aWxlLCBVKzIzMEEgSVNPYW1zYwogICAgJ2xvd2FzdCc6ICAgMHgyMjE3LCAjIGFzdGVyaXNrIG9wZXJhdG9yLCBVKzIyMTcgSVNPdGVjaAogICAgJ2xveic6ICAgICAgMHgyNWNhLCAjIGxvemVuZ2UsIFUrMjVDQSBJU09wdWIKICAgICdscm0nOiAgICAgIDB4MjAwZSwgIyBsZWZ0LXRvLXJpZ2h0IG1hcmssIFUrMjAwRSBORVcgUkZDIDIwNzAKICAgICdsc2FxdW8nOiAgIDB4MjAzOSwgIyBzaW5nbGUgbGVmdC1wb2ludGluZyBhbmdsZSBxdW90YXRpb24gbWFyaywgVSsyMDM5IElTTyBwcm9wb3NlZAogICAgJ2xzcXVvJzogICAgMHgyMDE4LCAjIGxlZnQgc2luZ2xlIHF1b3RhdGlvbiBtYXJrLCBVKzIwMTggSVNPbnVtCiAgICAnbHQnOiAgICAgICAweDAwM2MsICMgbGVzcy10aGFuIHNpZ24sIFUrMDAzQyBJU09udW0KICAgICdtYWNyJzogICAgIDB4MDBhZiwgIyBtYWNyb24gPSBzcGFjaW5nIG1hY3JvbiA9IG92ZXJsaW5lID0gQVBMIG92ZXJiYXIsIFUrMDBBRiBJU09kaWEKICAgICdtZGFzaCc6ICAgIDB4MjAxNCwgIyBlbSBkYXNoLCBVKzIwMTQgSVNPcHViCiAgICAnbWljcm8nOiAgICAweDAwYjUsICMgbWljcm8gc2lnbiwgVSswMEI1IElTT251bQogICAgJ21pZGRvdCc6ICAgMHgwMGI3LCAjIG1pZGRsZSBkb3QgPSBHZW9yZ2lhbiBjb21tYSA9IEdyZWVrIG1pZGRsZSBkb3QsIFUrMDBCNyBJU09udW0KICAgICdtaW51cyc6ICAgIDB4MjIxMiwgIyBtaW51cyBzaWduLCBVKzIyMTIgSVNPdGVjaAogICAgJ211JzogICAgICAgMHgwM2JjLCAjIGdyZWVrIHNtYWxsIGxldHRlciBtdSwgVSswM0JDIElTT2dyazMKICAgICduYWJsYSc6ICAgIDB4MjIwNywgIyBuYWJsYSA9IGJhY2t3YXJkIGRpZmZlcmVuY2UsIFUrMjIwNyBJU090ZWNoCiAgICAnbmJzcCc6ICAgICAweDAwYTAsICMgbm8tYnJlYWsgc3BhY2UgPSBub24tYnJlYWtpbmcgc3BhY2UsIFUrMDBBMCBJU09udW0KICAgICduZGFzaCc6ICAgIDB4MjAxMywgIyBlbiBkYXNoLCBVKzIwMTMgSVNPcHViCiAgICAnbmUnOiAgICAgICAweDIyNjAsICMgbm90IGVxdWFsIHRvLCBVKzIyNjAgSVNPdGVjaAogICAgJ25pJzogICAgICAgMHgyMjBiLCAjIGNvbnRhaW5zIGFzIG1lbWJlciwgVSsyMjBCIElTT3RlY2gKICAgICdub3QnOiAgICAgIDB4MDBhYywgIyBub3Qgc2lnbiwgVSswMEFDIElTT251bQogICAgJ25vdGluJzogICAgMHgyMjA5LCAjIG5vdCBhbiBlbGVtZW50IG9mLCBVKzIyMDkgSVNPdGVjaAogICAgJ25zdWInOiAgICAgMHgyMjg0LCAjIG5vdCBhIHN1YnNldCBvZiwgVSsyMjg0IElTT2Ftc24KICAgICdudGlsZGUnOiAgIDB4MDBmMSwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgbiB3aXRoIHRpbGRlLCBVKzAwRjEgSVNPbGF0MQogICAgJ251JzogICAgICAgMHgwM2JkLCAjIGdyZWVrIHNtYWxsIGxldHRlciBudSwgVSswM0JEIElTT2dyazMKICAgICdvYWN1dGUnOiAgIDB4MDBmMywgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgbyB3aXRoIGFjdXRlLCBVKzAwRjMgSVNPbGF0MQogICAgJ29jaXJjJzogICAgMHgwMGY0LCAjIGxhdGluIHNtYWxsIGxldHRlciBvIHdpdGggY2lyY3VtZmxleCwgVSswMEY0IElTT2xhdDEKICAgICdvZWxpZyc6ICAgIDB4MDE1MywgIyBsYXRpbiBzbWFsbCBsaWdhdHVyZSBvZSwgVSswMTUzIElTT2xhdDIKICAgICdvZ3JhdmUnOiAgIDB4MDBmMiwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgbyB3aXRoIGdyYXZlLCBVKzAwRjIgSVNPbGF0MQogICAgJ29saW5lJzogICAgMHgyMDNlLCAjIG92ZXJsaW5lID0gc3BhY2luZyBvdmVyc2NvcmUsIFUrMjAzRSBORVcKICAgICdvbWVnYSc6ICAgIDB4MDNjOSwgIyBncmVlayBzbWFsbCBsZXR0ZXIgb21lZ2EsIFUrMDNDOSBJU09ncmszCiAgICAnb21pY3Jvbic6ICAweDAzYmYsICMgZ3JlZWsgc21hbGwgbGV0dGVyIG9taWNyb24sIFUrMDNCRiBORVcKICAgICdvcGx1cyc6ICAgIDB4MjI5NSwgIyBjaXJjbGVkIHBsdXMgPSBkaXJlY3Qgc3VtLCBVKzIyOTUgSVNPYW1zYgogICAgJ29yJzogICAgICAgMHgyMjI4LCAjIGxvZ2ljYWwgb3IgPSB2ZWUsIFUrMjIyOCBJU090ZWNoCiAgICAnb3JkZic6ICAgICAweDAwYWEsICMgZmVtaW5pbmUgb3JkaW5hbCBpbmRpY2F0b3IsIFUrMDBBQSBJU09udW0KICAgICdvcmRtJzogICAgIDB4MDBiYSwgIyBtYXNjdWxpbmUgb3JkaW5hbCBpbmRpY2F0b3IsIFUrMDBCQSBJU09udW0KICAgICdvc2xhc2gnOiAgIDB4MDBmOCwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgbyB3aXRoIHN0cm9rZSwgPSBsYXRpbiBzbWFsbCBsZXR0ZXIgbyBzbGFzaCwgVSswMEY4IElTT2xhdDEKICAgICdvdGlsZGUnOiAgIDB4MDBmNSwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgbyB3aXRoIHRpbGRlLCBVKzAwRjUgSVNPbGF0MQogICAgJ290aW1lcyc6ICAgMHgyMjk3LCAjIGNpcmNsZWQgdGltZXMgPSB2ZWN0b3IgcHJvZHVjdCwgVSsyMjk3IElTT2Ftc2IKICAgICdvdW1sJzogICAgIDB4MDBmNiwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgbyB3aXRoIGRpYWVyZXNpcywgVSswMEY2IElTT2xhdDEKICAgICdwYXJhJzogICAgIDB4MDBiNiwgIyBwaWxjcm93IHNpZ24gPSBwYXJhZ3JhcGggc2lnbiwgVSswMEI2IElTT251bQogICAgJ3BhcnQnOiAgICAgMHgyMjAyLCAjIHBhcnRpYWwgZGlmZmVyZW50aWFsLCBVKzIyMDIgSVNPdGVjaAogICAgJ3Blcm1pbCc6ICAgMHgyMDMwLCAjIHBlciBtaWxsZSBzaWduLCBVKzIwMzAgSVNPdGVjaAogICAgJ3BlcnAnOiAgICAgMHgyMmE1LCAjIHVwIHRhY2sgPSBvcnRob2dvbmFsIHRvID0gcGVycGVuZGljdWxhciwgVSsyMkE1IElTT3RlY2gKICAgICdwaGknOiAgICAgIDB4MDNjNiwgIyBncmVlayBzbWFsbCBsZXR0ZXIgcGhpLCBVKzAzQzYgSVNPZ3JrMwogICAgJ3BpJzogICAgICAgMHgwM2MwLCAjIGdyZWVrIHNtYWxsIGxldHRlciBwaSwgVSswM0MwIElTT2dyazMKICAgICdwaXYnOiAgICAgIDB4MDNkNiwgIyBncmVlayBwaSBzeW1ib2wsIFUrMDNENiBJU09ncmszCiAgICAncGx1c21uJzogICAweDAwYjEsICMgcGx1cy1taW51cyBzaWduID0gcGx1cy1vci1taW51cyBzaWduLCBVKzAwQjEgSVNPbnVtCiAgICAncG91bmQnOiAgICAweDAwYTMsICMgcG91bmQgc2lnbiwgVSswMEEzIElTT251bQogICAgJ3ByaW1lJzogICAgMHgyMDMyLCAjIHByaW1lID0gbWludXRlcyA9IGZlZXQsIFUrMjAzMiBJU090ZWNoCiAgICAncHJvZCc6ICAgICAweDIyMGYsICMgbi1hcnkgcHJvZHVjdCA9IHByb2R1Y3Qgc2lnbiwgVSsyMjBGIElTT2Ftc2IKICAgICdwcm9wJzogICAgIDB4MjIxZCwgIyBwcm9wb3J0aW9uYWwgdG8sIFUrMjIxRCBJU090ZWNoCiAgICAncHNpJzogICAgICAweDAzYzgsICMgZ3JlZWsgc21hbGwgbGV0dGVyIHBzaSwgVSswM0M4IElTT2dyazMKICAgICdxdW90JzogICAgIDB4MDAyMiwgIyBxdW90YXRpb24gbWFyayA9IEFQTCBxdW90ZSwgVSswMDIyIElTT251bQogICAgJ3JBcnInOiAgICAgMHgyMWQyLCAjIHJpZ2h0d2FyZHMgZG91YmxlIGFycm93LCBVKzIxRDIgSVNPdGVjaAogICAgJ3JhZGljJzogICAgMHgyMjFhLCAjIHNxdWFyZSByb290ID0gcmFkaWNhbCBzaWduLCBVKzIyMUEgSVNPdGVjaAogICAgJ3JhbmcnOiAgICAgMHgyMzJhLCAjIHJpZ2h0LXBvaW50aW5nIGFuZ2xlIGJyYWNrZXQgPSBrZXQsIFUrMjMyQSBJU090ZWNoCiAgICAncmFxdW8nOiAgICAweDAwYmIsICMgcmlnaHQtcG9pbnRpbmcgZG91YmxlIGFuZ2xlIHF1b3RhdGlvbiBtYXJrID0gcmlnaHQgcG9pbnRpbmcgZ3VpbGxlbWV0LCBVKzAwQkIgSVNPbnVtCiAgICAncmFycic6ICAgICAweDIxOTIsICMgcmlnaHR3YXJkcyBhcnJvdywgVSsyMTkyIElTT251bQogICAgJ3JjZWlsJzogICAgMHgyMzA5LCAjIHJpZ2h0IGNlaWxpbmcsIFUrMjMwOSBJU09hbXNjCiAgICAncmRxdW8nOiAgICAweDIwMWQsICMgcmlnaHQgZG91YmxlIHF1b3RhdGlvbiBtYXJrLCBVKzIwMUQgSVNPbnVtCiAgICAncmVhbCc6ICAgICAweDIxMWMsICMgYmxhY2tsZXR0ZXIgY2FwaXRhbCBSID0gcmVhbCBwYXJ0IHN5bWJvbCwgVSsyMTFDIElTT2Ftc28KICAgICdyZWcnOiAgICAgIDB4MDBhZSwgIyByZWdpc3RlcmVkIHNpZ24gPSByZWdpc3RlcmVkIHRyYWRlIG1hcmsgc2lnbiwgVSswMEFFIElTT251bQogICAgJ3JmbG9vcic6ICAgMHgyMzBiLCAjIHJpZ2h0IGZsb29yLCBVKzIzMEIgSVNPYW1zYwogICAgJ3Jobyc6ICAgICAgMHgwM2MxLCAjIGdyZWVrIHNtYWxsIGxldHRlciByaG8sIFUrMDNDMSBJU09ncmszCiAgICAncmxtJzogICAgICAweDIwMGYsICMgcmlnaHQtdG8tbGVmdCBtYXJrLCBVKzIwMEYgTkVXIFJGQyAyMDcwCiAgICAncnNhcXVvJzogICAweDIwM2EsICMgc2luZ2xlIHJpZ2h0LXBvaW50aW5nIGFuZ2xlIHF1b3RhdGlvbiBtYXJrLCBVKzIwM0EgSVNPIHByb3Bvc2VkCiAgICAncnNxdW8nOiAgICAweDIwMTksICMgcmlnaHQgc2luZ2xlIHF1b3RhdGlvbiBtYXJrLCBVKzIwMTkgSVNPbnVtCiAgICAnc2JxdW8nOiAgICAweDIwMWEsICMgc2luZ2xlIGxvdy05IHF1b3RhdGlvbiBtYXJrLCBVKzIwMUEgTkVXCiAgICAnc2Nhcm9uJzogICAweDAxNjEsICMgbGF0aW4gc21hbGwgbGV0dGVyIHMgd2l0aCBjYXJvbiwgVSswMTYxIElTT2xhdDIKICAgICdzZG90JzogICAgIDB4MjJjNSwgIyBkb3Qgb3BlcmF0b3IsIFUrMjJDNSBJU09hbXNiCiAgICAnc2VjdCc6ICAgICAweDAwYTcsICMgc2VjdGlvbiBzaWduLCBVKzAwQTcgSVNPbnVtCiAgICAnc2h5JzogICAgICAweDAwYWQsICMgc29mdCBoeXBoZW4gPSBkaXNjcmV0aW9uYXJ5IGh5cGhlbiwgVSswMEFEIElTT251bQogICAgJ3NpZ21hJzogICAgMHgwM2MzLCAjIGdyZWVrIHNtYWxsIGxldHRlciBzaWdtYSwgVSswM0MzIElTT2dyazMKICAgICdzaWdtYWYnOiAgIDB4MDNjMiwgIyBncmVlayBzbWFsbCBsZXR0ZXIgZmluYWwgc2lnbWEsIFUrMDNDMiBJU09ncmszCiAgICAnc2ltJzogICAgICAweDIyM2MsICMgdGlsZGUgb3BlcmF0b3IgPSB2YXJpZXMgd2l0aCA9IHNpbWlsYXIgdG8sIFUrMjIzQyBJU090ZWNoCiAgICAnc3BhZGVzJzogICAweDI2NjAsICMgYmxhY2sgc3BhZGUgc3VpdCwgVSsyNjYwIElTT3B1YgogICAgJ3N1Yic6ICAgICAgMHgyMjgyLCAjIHN1YnNldCBvZiwgVSsyMjgyIElTT3RlY2gKICAgICdzdWJlJzogICAgIDB4MjI4NiwgIyBzdWJzZXQgb2Ygb3IgZXF1YWwgdG8sIFUrMjI4NiBJU090ZWNoCiAgICAnc3VtJzogICAgICAweDIyMTEsICMgbi1hcnkgc3VtYXRpb24sIFUrMjIxMSBJU09hbXNiCiAgICAnc3VwJzogICAgICAweDIyODMsICMgc3VwZXJzZXQgb2YsIFUrMjI4MyBJU090ZWNoCiAgICAnc3VwMSc6ICAgICAweDAwYjksICMgc3VwZXJzY3JpcHQgb25lID0gc3VwZXJzY3JpcHQgZGlnaXQgb25lLCBVKzAwQjkgSVNPbnVtCiAgICAnc3VwMic6ICAgICAweDAwYjIsICMgc3VwZXJzY3JpcHQgdHdvID0gc3VwZXJzY3JpcHQgZGlnaXQgdHdvID0gc3F1YXJlZCwgVSswMEIyIElTT251bQogICAgJ3N1cDMnOiAgICAgMHgwMGIzLCAjIHN1cGVyc2NyaXB0IHRocmVlID0gc3VwZXJzY3JpcHQgZGlnaXQgdGhyZWUgPSBjdWJlZCwgVSswMEIzIElTT251bQogICAgJ3N1cGUnOiAgICAgMHgyMjg3LCAjIHN1cGVyc2V0IG9mIG9yIGVxdWFsIHRvLCBVKzIyODcgSVNPdGVjaAogICAgJ3N6bGlnJzogICAgMHgwMGRmLCAjIGxhdGluIHNtYWxsIGxldHRlciBzaGFycCBzID0gZXNzLXplZCwgVSswMERGIElTT2xhdDEKICAgICd0YXUnOiAgICAgIDB4MDNjNCwgIyBncmVlayBzbWFsbCBsZXR0ZXIgdGF1LCBVKzAzQzQgSVNPZ3JrMwogICAgJ3RoZXJlNCc6ICAgMHgyMjM0LCAjIHRoZXJlZm9yZSwgVSsyMjM0IElTT3RlY2gKICAgICd0aGV0YSc6ICAgIDB4MDNiOCwgIyBncmVlayBzbWFsbCBsZXR0ZXIgdGhldGEsIFUrMDNCOCBJU09ncmszCiAgICAndGhldGFzeW0nOiAweDAzZDEsICMgZ3JlZWsgc21hbGwgbGV0dGVyIHRoZXRhIHN5bWJvbCwgVSswM0QxIE5FVwogICAgJ3RoaW5zcCc6ICAgMHgyMDA5LCAjIHRoaW4gc3BhY2UsIFUrMjAwOSBJU09wdWIKICAgICd0aG9ybic6ICAgIDB4MDBmZSwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgdGhvcm4gd2l0aCwgVSswMEZFIElTT2xhdDEKICAgICd0aWxkZSc6ICAgIDB4MDJkYywgIyBzbWFsbCB0aWxkZSwgVSswMkRDIElTT2RpYQogICAgJ3RpbWVzJzogICAgMHgwMGQ3LCAjIG11bHRpcGxpY2F0aW9uIHNpZ24sIFUrMDBENyBJU09udW0KICAgICd0cmFkZSc6ICAgIDB4MjEyMiwgIyB0cmFkZSBtYXJrIHNpZ24sIFUrMjEyMiBJU09udW0KICAgICd1QXJyJzogICAgIDB4MjFkMSwgIyB1cHdhcmRzIGRvdWJsZSBhcnJvdywgVSsyMUQxIElTT2Ftc2EKICAgICd1YWN1dGUnOiAgIDB4MDBmYSwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgdSB3aXRoIGFjdXRlLCBVKzAwRkEgSVNPbGF0MQogICAgJ3VhcnInOiAgICAgMHgyMTkxLCAjIHVwd2FyZHMgYXJyb3csIFUrMjE5MSBJU09udW0KICAgICd1Y2lyYyc6ICAgIDB4MDBmYiwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgdSB3aXRoIGNpcmN1bWZsZXgsIFUrMDBGQiBJU09sYXQxCiAgICAndWdyYXZlJzogICAweDAwZjksICMgbGF0aW4gc21hbGwgbGV0dGVyIHUgd2l0aCBncmF2ZSwgVSswMEY5IElTT2xhdDEKICAgICd1bWwnOiAgICAgIDB4MDBhOCwgIyBkaWFlcmVzaXMgPSBzcGFjaW5nIGRpYWVyZXNpcywgVSswMEE4IElTT2RpYQogICAgJ3Vwc2loJzogICAgMHgwM2QyLCAjIGdyZWVrIHVwc2lsb24gd2l0aCBob29rIHN5bWJvbCwgVSswM0QyIE5FVwogICAgJ3Vwc2lsb24nOiAgMHgwM2M1LCAjIGdyZWVrIHNtYWxsIGxldHRlciB1cHNpbG9uLCBVKzAzQzUgSVNPZ3JrMwogICAgJ3V1bWwnOiAgICAgMHgwMGZjLCAjIGxhdGluIHNtYWxsIGxldHRlciB1IHdpdGggZGlhZXJlc2lzLCBVKzAwRkMgSVNPbGF0MQogICAgJ3dlaWVycCc6ICAgMHgyMTE4LCAjIHNjcmlwdCBjYXBpdGFsIFAgPSBwb3dlciBzZXQgPSBXZWllcnN0cmFzcyBwLCBVKzIxMTggSVNPYW1zbwogICAgJ3hpJzogICAgICAgMHgwM2JlLCAjIGdyZWVrIHNtYWxsIGxldHRlciB4aSwgVSswM0JFIElTT2dyazMKICAgICd5YWN1dGUnOiAgIDB4MDBmZCwgIyBsYXRpbiBzbWFsbCBsZXR0ZXIgeSB3aXRoIGFjdXRlLCBVKzAwRkQgSVNPbGF0MQogICAgJ3llbic6ICAgICAgMHgwMGE1LCAjIHllbiBzaWduID0geXVhbiBzaWduLCBVKzAwQTUgSVNPbnVtCiAgICAneXVtbCc6ICAgICAweDAwZmYsICMgbGF0aW4gc21hbGwgbGV0dGVyIHkgd2l0aCBkaWFlcmVzaXMsIFUrMDBGRiBJU09sYXQxCiAgICAnemV0YSc6ICAgICAweDAzYjYsICMgZ3JlZWsgc21hbGwgbGV0dGVyIHpldGEsIFUrMDNCNiBJU09ncmszCiAgICAnendqJzogICAgICAweDIwMGQsICMgemVybyB3aWR0aCBqb2luZXIsIFUrMjAwRCBORVcgUkZDIDIwNzAKICAgICd6d25qJzogICAgIDB4MjAwYywgIyB6ZXJvIHdpZHRoIG5vbi1qb2luZXIsIFUrMjAwQyBORVcgUkZDIDIwNzAKfQoKCiMgbWFwcyB0aGUgSFRNTDUgbmFtZWQgY2hhcmFjdGVyIHJlZmVyZW5jZXMgdG8gdGhlIGVxdWl2YWxlbnQgVW5pY29kZSBjaGFyYWN0ZXIocykKaHRtbDUgPSB7CiAgICAnQWFjdXRlJzogJ1x4YzEnLAogICAgJ2FhY3V0ZSc6ICdceGUxJywKICAgICdBYWN1dGU7JzogJ1x4YzEnLAogICAgJ2FhY3V0ZTsnOiAnXHhlMScsCiAgICAnQWJyZXZlOyc6ICdcdTAxMDInLAogICAgJ2FicmV2ZTsnOiAnXHUwMTAzJywKICAgICdhYzsnOiAnXHUyMjNlJywKICAgICdhY2Q7JzogJ1x1MjIzZicsCiAgICAnYWNFOyc6ICdcdTIyM2VcdTAzMzMnLAogICAgJ0FjaXJjJzogJ1x4YzInLAogICAgJ2FjaXJjJzogJ1x4ZTInLAogICAgJ0FjaXJjOyc6ICdceGMyJywKICAgICdhY2lyYzsnOiAnXHhlMicsCiAgICAnYWN1dGUnOiAnXHhiNCcsCiAgICAnYWN1dGU7JzogJ1x4YjQnLAogICAgJ0FjeTsnOiAnXHUwNDEwJywKICAgICdhY3k7JzogJ1x1MDQzMCcsCiAgICAnQUVsaWcnOiAnXHhjNicsCiAgICAnYWVsaWcnOiAnXHhlNicsCiAgICAnQUVsaWc7JzogJ1x4YzYnLAogICAgJ2FlbGlnOyc6ICdceGU2JywKICAgICdhZjsnOiAnXHUyMDYxJywKICAgICdBZnI7JzogJ1xVMDAwMWQ1MDQnLAogICAgJ2FmcjsnOiAnXFUwMDAxZDUxZScsCiAgICAnQWdyYXZlJzogJ1x4YzAnLAogICAgJ2FncmF2ZSc6ICdceGUwJywKICAgICdBZ3JhdmU7JzogJ1x4YzAnLAogICAgJ2FncmF2ZTsnOiAnXHhlMCcsCiAgICAnYWxlZnN5bTsnOiAnXHUyMTM1JywKICAgICdhbGVwaDsnOiAnXHUyMTM1JywKICAgICdBbHBoYTsnOiAnXHUwMzkxJywKICAgICdhbHBoYTsnOiAnXHUwM2IxJywKICAgICdBbWFjcjsnOiAnXHUwMTAwJywKICAgICdhbWFjcjsnOiAnXHUwMTAxJywKICAgICdhbWFsZzsnOiAnXHUyYTNmJywKICAgICdBTVAnOiAnJicsCiAgICAnYW1wJzogJyYnLAogICAgJ0FNUDsnOiAnJicsCiAgICAnYW1wOyc6ICcmJywKICAgICdBbmQ7JzogJ1x1MmE1MycsCiAgICAnYW5kOyc6ICdcdTIyMjcnLAogICAgJ2FuZGFuZDsnOiAnXHUyYTU1JywKICAgICdhbmRkOyc6ICdcdTJhNWMnLAogICAgJ2FuZHNsb3BlOyc6ICdcdTJhNTgnLAogICAgJ2FuZHY7JzogJ1x1MmE1YScsCiAgICAnYW5nOyc6ICdcdTIyMjAnLAogICAgJ2FuZ2U7JzogJ1x1MjlhNCcsCiAgICAnYW5nbGU7JzogJ1x1MjIyMCcsCiAgICAnYW5nbXNkOyc6ICdcdTIyMjEnLAogICAgJ2FuZ21zZGFhOyc6ICdcdTI5YTgnLAogICAgJ2FuZ21zZGFiOyc6ICdcdTI5YTknLAogICAgJ2FuZ21zZGFjOyc6ICdcdTI5YWEnLAogICAgJ2FuZ21zZGFkOyc6ICdcdTI5YWInLAogICAgJ2FuZ21zZGFlOyc6ICdcdTI5YWMnLAogICAgJ2FuZ21zZGFmOyc6ICdcdTI5YWQnLAogICAgJ2FuZ21zZGFnOyc6ICdcdTI5YWUnLAogICAgJ2FuZ21zZGFoOyc6ICdcdTI5YWYnLAogICAgJ2FuZ3J0Oyc6ICdcdTIyMWYnLAogICAgJ2FuZ3J0dmI7JzogJ1x1MjJiZScsCiAgICAnYW5ncnR2YmQ7JzogJ1x1Mjk5ZCcsCiAgICAnYW5nc3BoOyc6ICdcdTIyMjInLAogICAgJ2FuZ3N0Oyc6ICdceGM1JywKICAgICdhbmd6YXJyOyc6ICdcdTIzN2MnLAogICAgJ0FvZ29uOyc6ICdcdTAxMDQnLAogICAgJ2FvZ29uOyc6ICdcdTAxMDUnLAogICAgJ0FvcGY7JzogJ1xVMDAwMWQ1MzgnLAogICAgJ2FvcGY7JzogJ1xVMDAwMWQ1NTInLAogICAgJ2FwOyc6ICdcdTIyNDgnLAogICAgJ2FwYWNpcjsnOiAnXHUyYTZmJywKICAgICdhcEU7JzogJ1x1MmE3MCcsCiAgICAnYXBlOyc6ICdcdTIyNGEnLAogICAgJ2FwaWQ7JzogJ1x1MjI0YicsCiAgICAnYXBvczsnOiAiJyIsCiAgICAnQXBwbHlGdW5jdGlvbjsnOiAnXHUyMDYxJywKICAgICdhcHByb3g7JzogJ1x1MjI0OCcsCiAgICAnYXBwcm94ZXE7JzogJ1x1MjI0YScsCiAgICAnQXJpbmcnOiAnXHhjNScsCiAgICAnYXJpbmcnOiAnXHhlNScsCiAgICAnQXJpbmc7JzogJ1x4YzUnLAogICAgJ2FyaW5nOyc6ICdceGU1JywKICAgICdBc2NyOyc6ICdcVTAwMDFkNDljJywKICAgICdhc2NyOyc6ICdcVTAwMDFkNGI2JywKICAgICdBc3NpZ247JzogJ1x1MjI1NCcsCiAgICAnYXN0Oyc6ICcqJywKICAgICdhc3ltcDsnOiAnXHUyMjQ4JywKICAgICdhc3ltcGVxOyc6ICdcdTIyNGQnLAogICAgJ0F0aWxkZSc6ICdceGMzJywKICAgICdhdGlsZGUnOiAnXHhlMycsCiAgICAnQXRpbGRlOyc6ICdceGMzJywKICAgICdhdGlsZGU7JzogJ1x4ZTMnLAogICAgJ0F1bWwnOiAnXHhjNCcsCiAgICAnYXVtbCc6ICdceGU0JywKICAgICdBdW1sOyc6ICdceGM0JywKICAgICdhdW1sOyc6ICdceGU0JywKICAgICdhd2NvbmludDsnOiAnXHUyMjMzJywKICAgICdhd2ludDsnOiAnXHUyYTExJywKICAgICdiYWNrY29uZzsnOiAnXHUyMjRjJywKICAgICdiYWNrZXBzaWxvbjsnOiAnXHUwM2Y2JywKICAgICdiYWNrcHJpbWU7JzogJ1x1MjAzNScsCiAgICAnYmFja3NpbTsnOiAnXHUyMjNkJywKICAgICdiYWNrc2ltZXE7JzogJ1x1MjJjZCcsCiAgICAnQmFja3NsYXNoOyc6ICdcdTIyMTYnLAogICAgJ0JhcnY7JzogJ1x1MmFlNycsCiAgICAnYmFydmVlOyc6ICdcdTIyYmQnLAogICAgJ0JhcndlZDsnOiAnXHUyMzA2JywKICAgICdiYXJ3ZWQ7JzogJ1x1MjMwNScsCiAgICAnYmFyd2VkZ2U7JzogJ1x1MjMwNScsCiAgICAnYmJyazsnOiAnXHUyM2I1JywKICAgICdiYnJrdGJyazsnOiAnXHUyM2I2JywKICAgICdiY29uZzsnOiAnXHUyMjRjJywKICAgICdCY3k7JzogJ1x1MDQxMScsCiAgICAnYmN5Oyc6ICdcdTA0MzEnLAogICAgJ2JkcXVvOyc6ICdcdTIwMWUnLAogICAgJ2JlY2F1czsnOiAnXHUyMjM1JywKICAgICdCZWNhdXNlOyc6ICdcdTIyMzUnLAogICAgJ2JlY2F1c2U7JzogJ1x1MjIzNScsCiAgICAnYmVtcHR5djsnOiAnXHUyOWIwJywKICAgICdiZXBzaTsnOiAnXHUwM2Y2JywKICAgICdiZXJub3U7JzogJ1x1MjEyYycsCiAgICAnQmVybm91bGxpczsnOiAnXHUyMTJjJywKICAgICdCZXRhOyc6ICdcdTAzOTInLAogICAgJ2JldGE7JzogJ1x1MDNiMicsCiAgICAnYmV0aDsnOiAnXHUyMTM2JywKICAgICdiZXR3ZWVuOyc6ICdcdTIyNmMnLAogICAgJ0JmcjsnOiAnXFUwMDAxZDUwNScsCiAgICAnYmZyOyc6ICdcVTAwMDFkNTFmJywKICAgICdiaWdjYXA7JzogJ1x1MjJjMicsCiAgICAnYmlnY2lyYzsnOiAnXHUyNWVmJywKICAgICdiaWdjdXA7JzogJ1x1MjJjMycsCiAgICAnYmlnb2RvdDsnOiAnXHUyYTAwJywKICAgICdiaWdvcGx1czsnOiAnXHUyYTAxJywKICAgICdiaWdvdGltZXM7JzogJ1x1MmEwMicsCiAgICAnYmlnc3FjdXA7JzogJ1x1MmEwNicsCiAgICAnYmlnc3RhcjsnOiAnXHUyNjA1JywKICAgICdiaWd0cmlhbmdsZWRvd247JzogJ1x1MjViZCcsCiAgICAnYmlndHJpYW5nbGV1cDsnOiAnXHUyNWIzJywKICAgICdiaWd1cGx1czsnOiAnXHUyYTA0JywKICAgICdiaWd2ZWU7JzogJ1x1MjJjMScsCiAgICAnYmlnd2VkZ2U7JzogJ1x1MjJjMCcsCiAgICAnYmthcm93Oyc6ICdcdTI5MGQnLAogICAgJ2JsYWNrbG96ZW5nZTsnOiAnXHUyOWViJywKICAgICdibGFja3NxdWFyZTsnOiAnXHUyNWFhJywKICAgICdibGFja3RyaWFuZ2xlOyc6ICdcdTI1YjQnLAogICAgJ2JsYWNrdHJpYW5nbGVkb3duOyc6ICdcdTI1YmUnLAogICAgJ2JsYWNrdHJpYW5nbGVsZWZ0Oyc6ICdcdTI1YzInLAogICAgJ2JsYWNrdHJpYW5nbGVyaWdodDsnOiAnXHUyNWI4JywKICAgICdibGFuazsnOiAnXHUyNDIzJywKICAgICdibGsxMjsnOiAnXHUyNTkyJywKICAgICdibGsxNDsnOiAnXHUyNTkxJywKICAgICdibGszNDsnOiAnXHUyNTkzJywKICAgICdibG9jazsnOiAnXHUyNTg4JywKICAgICdibmU7JzogJz1cdTIwZTUnLAogICAgJ2JuZXF1aXY7JzogJ1x1MjI2MVx1MjBlNScsCiAgICAnYk5vdDsnOiAnXHUyYWVkJywKICAgICdibm90Oyc6ICdcdTIzMTAnLAogICAgJ0JvcGY7JzogJ1xVMDAwMWQ1MzknLAogICAgJ2JvcGY7JzogJ1xVMDAwMWQ1NTMnLAogICAgJ2JvdDsnOiAnXHUyMmE1JywKICAgICdib3R0b207JzogJ1x1MjJhNScsCiAgICAnYm93dGllOyc6ICdcdTIyYzgnLAogICAgJ2JveGJveDsnOiAnXHUyOWM5JywKICAgICdib3hETDsnOiAnXHUyNTU3JywKICAgICdib3hEbDsnOiAnXHUyNTU2JywKICAgICdib3hkTDsnOiAnXHUyNTU1JywKICAgICdib3hkbDsnOiAnXHUyNTEwJywKICAgICdib3hEUjsnOiAnXHUyNTU0JywKICAgICdib3hEcjsnOiAnXHUyNTUzJywKICAgICdib3hkUjsnOiAnXHUyNTUyJywKICAgICdib3hkcjsnOiAnXHUyNTBjJywKICAgICdib3hIOyc6ICdcdTI1NTAnLAogICAgJ2JveGg7JzogJ1x1MjUwMCcsCiAgICAnYm94SEQ7JzogJ1x1MjU2NicsCiAgICAnYm94SGQ7JzogJ1x1MjU2NCcsCiAgICAnYm94aEQ7JzogJ1x1MjU2NScsCiAgICAnYm94aGQ7JzogJ1x1MjUyYycsCiAgICAnYm94SFU7JzogJ1x1MjU2OScsCiAgICAnYm94SHU7JzogJ1x1MjU2NycsCiAgICAnYm94aFU7JzogJ1x1MjU2OCcsCiAgICAnYm94aHU7JzogJ1x1MjUzNCcsCiAgICAnYm94bWludXM7JzogJ1x1MjI5ZicsCiAgICAnYm94cGx1czsnOiAnXHUyMjllJywKICAgICdib3h0aW1lczsnOiAnXHUyMmEwJywKICAgICdib3hVTDsnOiAnXHUyNTVkJywKICAgICdib3hVbDsnOiAnXHUyNTVjJywKICAgICdib3h1TDsnOiAnXHUyNTViJywKICAgICdib3h1bDsnOiAnXHUyNTE4JywKICAgICdib3hVUjsnOiAnXHUyNTVhJywKICAgICdib3hVcjsnOiAnXHUyNTU5JywKICAgICdib3h1UjsnOiAnXHUyNTU4JywKICAgICdib3h1cjsnOiAnXHUyNTE0JywKICAgICdib3hWOyc6ICdcdTI1NTEnLAogICAgJ2JveHY7JzogJ1x1MjUwMicsCiAgICAnYm94Vkg7JzogJ1x1MjU2YycsCiAgICAnYm94Vmg7JzogJ1x1MjU2YicsCiAgICAnYm94dkg7JzogJ1x1MjU2YScsCiAgICAnYm94dmg7JzogJ1x1MjUzYycsCiAgICAnYm94Vkw7JzogJ1x1MjU2MycsCiAgICAnYm94Vmw7JzogJ1x1MjU2MicsCiAgICAnYm94dkw7JzogJ1x1MjU2MScsCiAgICAnYm94dmw7JzogJ1x1MjUyNCcsCiAgICAnYm94VlI7JzogJ1x1MjU2MCcsCiAgICAnYm94VnI7JzogJ1x1MjU1ZicsCiAgICAnYm94dlI7JzogJ1x1MjU1ZScsCiAgICAnYm94dnI7JzogJ1x1MjUxYycsCiAgICAnYnByaW1lOyc6ICdcdTIwMzUnLAogICAgJ0JyZXZlOyc6ICdcdTAyZDgnLAogICAgJ2JyZXZlOyc6ICdcdTAyZDgnLAogICAgJ2JydmJhcic6ICdceGE2JywKICAgICdicnZiYXI7JzogJ1x4YTYnLAogICAgJ0JzY3I7JzogJ1x1MjEyYycsCiAgICAnYnNjcjsnOiAnXFUwMDAxZDRiNycsCiAgICAnYnNlbWk7JzogJ1x1MjA0ZicsCiAgICAnYnNpbTsnOiAnXHUyMjNkJywKICAgICdic2ltZTsnOiAnXHUyMmNkJywKICAgICdic29sOyc6ICdcXCcsCiAgICAnYnNvbGI7JzogJ1x1MjljNScsCiAgICAnYnNvbGhzdWI7JzogJ1x1MjdjOCcsCiAgICAnYnVsbDsnOiAnXHUyMDIyJywKICAgICdidWxsZXQ7JzogJ1x1MjAyMicsCiAgICAnYnVtcDsnOiAnXHUyMjRlJywKICAgICdidW1wRTsnOiAnXHUyYWFlJywKICAgICdidW1wZTsnOiAnXHUyMjRmJywKICAgICdCdW1wZXE7JzogJ1x1MjI0ZScsCiAgICAnYnVtcGVxOyc6ICdcdTIyNGYnLAogICAgJ0NhY3V0ZTsnOiAnXHUwMTA2JywKICAgICdjYWN1dGU7JzogJ1x1MDEwNycsCiAgICAnQ2FwOyc6ICdcdTIyZDInLAogICAgJ2NhcDsnOiAnXHUyMjI5JywKICAgICdjYXBhbmQ7JzogJ1x1MmE0NCcsCiAgICAnY2FwYnJjdXA7JzogJ1x1MmE0OScsCiAgICAnY2FwY2FwOyc6ICdcdTJhNGInLAogICAgJ2NhcGN1cDsnOiAnXHUyYTQ3JywKICAgICdjYXBkb3Q7JzogJ1x1MmE0MCcsCiAgICAnQ2FwaXRhbERpZmZlcmVudGlhbEQ7JzogJ1x1MjE0NScsCiAgICAnY2FwczsnOiAnXHUyMjI5XHVmZTAwJywKICAgICdjYXJldDsnOiAnXHUyMDQxJywKICAgICdjYXJvbjsnOiAnXHUwMmM3JywKICAgICdDYXlsZXlzOyc6ICdcdTIxMmQnLAogICAgJ2NjYXBzOyc6ICdcdTJhNGQnLAogICAgJ0NjYXJvbjsnOiAnXHUwMTBjJywKICAgICdjY2Fyb247JzogJ1x1MDEwZCcsCiAgICAnQ2NlZGlsJzogJ1x4YzcnLAogICAgJ2NjZWRpbCc6ICdceGU3JywKICAgICdDY2VkaWw7JzogJ1x4YzcnLAogICAgJ2NjZWRpbDsnOiAnXHhlNycsCiAgICAnQ2NpcmM7JzogJ1x1MDEwOCcsCiAgICAnY2NpcmM7JzogJ1x1MDEwOScsCiAgICAnQ2NvbmludDsnOiAnXHUyMjMwJywKICAgICdjY3VwczsnOiAnXHUyYTRjJywKICAgICdjY3Vwc3NtOyc6ICdcdTJhNTAnLAogICAgJ0Nkb3Q7JzogJ1x1MDEwYScsCiAgICAnY2RvdDsnOiAnXHUwMTBiJywKICAgICdjZWRpbCc6ICdceGI4JywKICAgICdjZWRpbDsnOiAnXHhiOCcsCiAgICAnQ2VkaWxsYTsnOiAnXHhiOCcsCiAgICAnY2VtcHR5djsnOiAnXHUyOWIyJywKICAgICdjZW50JzogJ1x4YTInLAogICAgJ2NlbnQ7JzogJ1x4YTInLAogICAgJ0NlbnRlckRvdDsnOiAnXHhiNycsCiAgICAnY2VudGVyZG90Oyc6ICdceGI3JywKICAgICdDZnI7JzogJ1x1MjEyZCcsCiAgICAnY2ZyOyc6ICdcVTAwMDFkNTIwJywKICAgICdDSGN5Oyc6ICdcdTA0MjcnLAogICAgJ2NoY3k7JzogJ1x1MDQ0NycsCiAgICAnY2hlY2s7JzogJ1x1MjcxMycsCiAgICAnY2hlY2ttYXJrOyc6ICdcdTI3MTMnLAogICAgJ0NoaTsnOiAnXHUwM2E3JywKICAgICdjaGk7JzogJ1x1MDNjNycsCiAgICAnY2lyOyc6ICdcdTI1Y2InLAogICAgJ2NpcmM7JzogJ1x1MDJjNicsCiAgICAnY2lyY2VxOyc6ICdcdTIyNTcnLAogICAgJ2NpcmNsZWFycm93bGVmdDsnOiAnXHUyMWJhJywKICAgICdjaXJjbGVhcnJvd3JpZ2h0Oyc6ICdcdTIxYmInLAogICAgJ2NpcmNsZWRhc3Q7JzogJ1x1MjI5YicsCiAgICAnY2lyY2xlZGNpcmM7JzogJ1x1MjI5YScsCiAgICAnY2lyY2xlZGRhc2g7JzogJ1x1MjI5ZCcsCiAgICAnQ2lyY2xlRG90Oyc6ICdcdTIyOTknLAogICAgJ2NpcmNsZWRSOyc6ICdceGFlJywKICAgICdjaXJjbGVkUzsnOiAnXHUyNGM4JywKICAgICdDaXJjbGVNaW51czsnOiAnXHUyMjk2JywKICAgICdDaXJjbGVQbHVzOyc6ICdcdTIyOTUnLAogICAgJ0NpcmNsZVRpbWVzOyc6ICdcdTIyOTcnLAogICAgJ2NpckU7JzogJ1x1MjljMycsCiAgICAnY2lyZTsnOiAnXHUyMjU3JywKICAgICdjaXJmbmludDsnOiAnXHUyYTEwJywKICAgICdjaXJtaWQ7JzogJ1x1MmFlZicsCiAgICAnY2lyc2NpcjsnOiAnXHUyOWMyJywKICAgICdDbG9ja3dpc2VDb250b3VySW50ZWdyYWw7JzogJ1x1MjIzMicsCiAgICAnQ2xvc2VDdXJseURvdWJsZVF1b3RlOyc6ICdcdTIwMWQnLAogICAgJ0Nsb3NlQ3VybHlRdW90ZTsnOiAnXHUyMDE5JywKICAgICdjbHViczsnOiAnXHUyNjYzJywKICAgICdjbHVic3VpdDsnOiAnXHUyNjYzJywKICAgICdDb2xvbjsnOiAnXHUyMjM3JywKICAgICdjb2xvbjsnOiAnOicsCiAgICAnQ29sb25lOyc6ICdcdTJhNzQnLAogICAgJ2NvbG9uZTsnOiAnXHUyMjU0JywKICAgICdjb2xvbmVxOyc6ICdcdTIyNTQnLAogICAgJ2NvbW1hOyc6ICcsJywKICAgICdjb21tYXQ7JzogJ0AnLAogICAgJ2NvbXA7JzogJ1x1MjIwMScsCiAgICAnY29tcGZuOyc6ICdcdTIyMTgnLAogICAgJ2NvbXBsZW1lbnQ7JzogJ1x1MjIwMScsCiAgICAnY29tcGxleGVzOyc6ICdcdTIxMDInLAogICAgJ2Nvbmc7JzogJ1x1MjI0NScsCiAgICAnY29uZ2RvdDsnOiAnXHUyYTZkJywKICAgICdDb25ncnVlbnQ7JzogJ1x1MjI2MScsCiAgICAnQ29uaW50Oyc6ICdcdTIyMmYnLAogICAgJ2NvbmludDsnOiAnXHUyMjJlJywKICAgICdDb250b3VySW50ZWdyYWw7JzogJ1x1MjIyZScsCiAgICAnQ29wZjsnOiAnXHUyMTAyJywKICAgICdjb3BmOyc6ICdcVTAwMDFkNTU0JywKICAgICdjb3Byb2Q7JzogJ1x1MjIxMCcsCiAgICAnQ29wcm9kdWN0Oyc6ICdcdTIyMTAnLAogICAgJ0NPUFknOiAnXHhhOScsCiAgICAnY29weSc6ICdceGE5JywKICAgICdDT1BZOyc6ICdceGE5JywKICAgICdjb3B5Oyc6ICdceGE5JywKICAgICdjb3B5c3I7JzogJ1x1MjExNycsCiAgICAnQ291bnRlckNsb2Nrd2lzZUNvbnRvdXJJbnRlZ3JhbDsnOiAnXHUyMjMzJywKICAgICdjcmFycjsnOiAnXHUyMWI1JywKICAgICdDcm9zczsnOiAnXHUyYTJmJywKICAgICdjcm9zczsnOiAnXHUyNzE3JywKICAgICdDc2NyOyc6ICdcVTAwMDFkNDllJywKICAgICdjc2NyOyc6ICdcVTAwMDFkNGI4JywKICAgICdjc3ViOyc6ICdcdTJhY2YnLAogICAgJ2NzdWJlOyc6ICdcdTJhZDEnLAogICAgJ2NzdXA7JzogJ1x1MmFkMCcsCiAgICAnY3N1cGU7JzogJ1x1MmFkMicsCiAgICAnY3Rkb3Q7JzogJ1x1MjJlZicsCiAgICAnY3VkYXJybDsnOiAnXHUyOTM4JywKICAgICdjdWRhcnJyOyc6ICdcdTI5MzUnLAogICAgJ2N1ZXByOyc6ICdcdTIyZGUnLAogICAgJ2N1ZXNjOyc6ICdcdTIyZGYnLAogICAgJ2N1bGFycjsnOiAnXHUyMWI2JywKICAgICdjdWxhcnJwOyc6ICdcdTI5M2QnLAogICAgJ0N1cDsnOiAnXHUyMmQzJywKICAgICdjdXA7JzogJ1x1MjIyYScsCiAgICAnY3VwYnJjYXA7JzogJ1x1MmE0OCcsCiAgICAnQ3VwQ2FwOyc6ICdcdTIyNGQnLAogICAgJ2N1cGNhcDsnOiAnXHUyYTQ2JywKICAgICdjdXBjdXA7JzogJ1x1MmE0YScsCiAgICAnY3VwZG90Oyc6ICdcdTIyOGQnLAogICAgJ2N1cG9yOyc6ICdcdTJhNDUnLAogICAgJ2N1cHM7JzogJ1x1MjIyYVx1ZmUwMCcsCiAgICAnY3VyYXJyOyc6ICdcdTIxYjcnLAogICAgJ2N1cmFycm07JzogJ1x1MjkzYycsCiAgICAnY3VybHllcXByZWM7JzogJ1x1MjJkZScsCiAgICAnY3VybHllcXN1Y2M7JzogJ1x1MjJkZicsCiAgICAnY3VybHl2ZWU7JzogJ1x1MjJjZScsCiAgICAnY3VybHl3ZWRnZTsnOiAnXHUyMmNmJywKICAgICdjdXJyZW4nOiAnXHhhNCcsCiAgICAnY3VycmVuOyc6ICdceGE0JywKICAgICdjdXJ2ZWFycm93bGVmdDsnOiAnXHUyMWI2JywKICAgICdjdXJ2ZWFycm93cmlnaHQ7JzogJ1x1MjFiNycsCiAgICAnY3V2ZWU7JzogJ1x1MjJjZScsCiAgICAnY3V3ZWQ7JzogJ1x1MjJjZicsCiAgICAnY3djb25pbnQ7JzogJ1x1MjIzMicsCiAgICAnY3dpbnQ7JzogJ1x1MjIzMScsCiAgICAnY3lsY3R5Oyc6ICdcdTIzMmQnLAogICAgJ0RhZ2dlcjsnOiAnXHUyMDIxJywKICAgICdkYWdnZXI7JzogJ1x1MjAyMCcsCiAgICAnZGFsZXRoOyc6ICdcdTIxMzgnLAogICAgJ0RhcnI7JzogJ1x1MjFhMScsCiAgICAnZEFycjsnOiAnXHUyMWQzJywKICAgICdkYXJyOyc6ICdcdTIxOTMnLAogICAgJ2Rhc2g7JzogJ1x1MjAxMCcsCiAgICAnRGFzaHY7JzogJ1x1MmFlNCcsCiAgICAnZGFzaHY7JzogJ1x1MjJhMycsCiAgICAnZGJrYXJvdzsnOiAnXHUyOTBmJywKICAgICdkYmxhYzsnOiAnXHUwMmRkJywKICAgICdEY2Fyb247JzogJ1x1MDEwZScsCiAgICAnZGNhcm9uOyc6ICdcdTAxMGYnLAogICAgJ0RjeTsnOiAnXHUwNDE0JywKICAgICdkY3k7JzogJ1x1MDQzNCcsCiAgICAnREQ7JzogJ1x1MjE0NScsCiAgICAnZGQ7JzogJ1x1MjE0NicsCiAgICAnZGRhZ2dlcjsnOiAnXHUyMDIxJywKICAgICdkZGFycjsnOiAnXHUyMWNhJywKICAgICdERG90cmFoZDsnOiAnXHUyOTExJywKICAgICdkZG90c2VxOyc6ICdcdTJhNzcnLAogICAgJ2RlZyc6ICdceGIwJywKICAgICdkZWc7JzogJ1x4YjAnLAogICAgJ0RlbDsnOiAnXHUyMjA3JywKICAgICdEZWx0YTsnOiAnXHUwMzk0JywKICAgICdkZWx0YTsnOiAnXHUwM2I0JywKICAgICdkZW1wdHl2Oyc6ICdcdTI5YjEnLAogICAgJ2RmaXNodDsnOiAnXHUyOTdmJywKICAgICdEZnI7JzogJ1xVMDAwMWQ1MDcnLAogICAgJ2RmcjsnOiAnXFUwMDAxZDUyMScsCiAgICAnZEhhcjsnOiAnXHUyOTY1JywKICAgICdkaGFybDsnOiAnXHUyMWMzJywKICAgICdkaGFycjsnOiAnXHUyMWMyJywKICAgICdEaWFjcml0aWNhbEFjdXRlOyc6ICdceGI0JywKICAgICdEaWFjcml0aWNhbERvdDsnOiAnXHUwMmQ5JywKICAgICdEaWFjcml0aWNhbERvdWJsZUFjdXRlOyc6ICdcdTAyZGQnLAogICAgJ0RpYWNyaXRpY2FsR3JhdmU7JzogJ2AnLAogICAgJ0RpYWNyaXRpY2FsVGlsZGU7JzogJ1x1MDJkYycsCiAgICAnZGlhbTsnOiAnXHUyMmM0JywKICAgICdEaWFtb25kOyc6ICdcdTIyYzQnLAogICAgJ2RpYW1vbmQ7JzogJ1x1MjJjNCcsCiAgICAnZGlhbW9uZHN1aXQ7JzogJ1x1MjY2NicsCiAgICAnZGlhbXM7JzogJ1x1MjY2NicsCiAgICAnZGllOyc6ICdceGE4JywKICAgICdEaWZmZXJlbnRpYWxEOyc6ICdcdTIxNDYnLAogICAgJ2RpZ2FtbWE7JzogJ1x1MDNkZCcsCiAgICAnZGlzaW47JzogJ1x1MjJmMicsCiAgICAnZGl2Oyc6ICdceGY3JywKICAgICdkaXZpZGUnOiAnXHhmNycsCiAgICAnZGl2aWRlOyc6ICdceGY3JywKICAgICdkaXZpZGVvbnRpbWVzOyc6ICdcdTIyYzcnLAogICAgJ2Rpdm9ueDsnOiAnXHUyMmM3JywKICAgICdESmN5Oyc6ICdcdTA0MDInLAogICAgJ2RqY3k7JzogJ1x1MDQ1MicsCiAgICAnZGxjb3JuOyc6ICdcdTIzMWUnLAogICAgJ2RsY3JvcDsnOiAnXHUyMzBkJywKICAgICdkb2xsYXI7JzogJyQnLAogICAgJ0RvcGY7JzogJ1xVMDAwMWQ1M2InLAogICAgJ2RvcGY7JzogJ1xVMDAwMWQ1NTUnLAogICAgJ0RvdDsnOiAnXHhhOCcsCiAgICAnZG90Oyc6ICdcdTAyZDknLAogICAgJ0RvdERvdDsnOiAnXHUyMGRjJywKICAgICdkb3RlcTsnOiAnXHUyMjUwJywKICAgICdkb3RlcWRvdDsnOiAnXHUyMjUxJywKICAgICdEb3RFcXVhbDsnOiAnXHUyMjUwJywKICAgICdkb3RtaW51czsnOiAnXHUyMjM4JywKICAgICdkb3RwbHVzOyc6ICdcdTIyMTQnLAogICAgJ2RvdHNxdWFyZTsnOiAnXHUyMmExJywKICAgICdkb3VibGViYXJ3ZWRnZTsnOiAnXHUyMzA2JywKICAgICdEb3VibGVDb250b3VySW50ZWdyYWw7JzogJ1x1MjIyZicsCiAgICAnRG91YmxlRG90Oyc6ICdceGE4JywKICAgICdEb3VibGVEb3duQXJyb3c7JzogJ1x1MjFkMycsCiAgICAnRG91YmxlTGVmdEFycm93Oyc6ICdcdTIxZDAnLAogICAgJ0RvdWJsZUxlZnRSaWdodEFycm93Oyc6ICdcdTIxZDQnLAogICAgJ0RvdWJsZUxlZnRUZWU7JzogJ1x1MmFlNCcsCiAgICAnRG91YmxlTG9uZ0xlZnRBcnJvdzsnOiAnXHUyN2Y4JywKICAgICdEb3VibGVMb25nTGVmdFJpZ2h0QXJyb3c7JzogJ1x1MjdmYScsCiAgICAnRG91YmxlTG9uZ1JpZ2h0QXJyb3c7JzogJ1x1MjdmOScsCiAgICAnRG91YmxlUmlnaHRBcnJvdzsnOiAnXHUyMWQyJywKICAgICdEb3VibGVSaWdodFRlZTsnOiAnXHUyMmE4JywKICAgICdEb3VibGVVcEFycm93Oyc6ICdcdTIxZDEnLAogICAgJ0RvdWJsZVVwRG93bkFycm93Oyc6ICdcdTIxZDUnLAogICAgJ0RvdWJsZVZlcnRpY2FsQmFyOyc6ICdcdTIyMjUnLAogICAgJ0Rvd25BcnJvdzsnOiAnXHUyMTkzJywKICAgICdEb3duYXJyb3c7JzogJ1x1MjFkMycsCiAgICAnZG93bmFycm93Oyc6ICdcdTIxOTMnLAogICAgJ0Rvd25BcnJvd0JhcjsnOiAnXHUyOTEzJywKICAgICdEb3duQXJyb3dVcEFycm93Oyc6ICdcdTIxZjUnLAogICAgJ0Rvd25CcmV2ZTsnOiAnXHUwMzExJywKICAgICdkb3duZG93bmFycm93czsnOiAnXHUyMWNhJywKICAgICdkb3duaGFycG9vbmxlZnQ7JzogJ1x1MjFjMycsCiAgICAnZG93bmhhcnBvb25yaWdodDsnOiAnXHUyMWMyJywKICAgICdEb3duTGVmdFJpZ2h0VmVjdG9yOyc6ICdcdTI5NTAnLAogICAgJ0Rvd25MZWZ0VGVlVmVjdG9yOyc6ICdcdTI5NWUnLAogICAgJ0Rvd25MZWZ0VmVjdG9yOyc6ICdcdTIxYmQnLAogICAgJ0Rvd25MZWZ0VmVjdG9yQmFyOyc6ICdcdTI5NTYnLAogICAgJ0Rvd25SaWdodFRlZVZlY3RvcjsnOiAnXHUyOTVmJywKICAgICdEb3duUmlnaHRWZWN0b3I7JzogJ1x1MjFjMScsCiAgICAnRG93blJpZ2h0VmVjdG9yQmFyOyc6ICdcdTI5NTcnLAogICAgJ0Rvd25UZWU7JzogJ1x1MjJhNCcsCiAgICAnRG93blRlZUFycm93Oyc6ICdcdTIxYTcnLAogICAgJ2RyYmthcm93Oyc6ICdcdTI5MTAnLAogICAgJ2RyY29ybjsnOiAnXHUyMzFmJywKICAgICdkcmNyb3A7JzogJ1x1MjMwYycsCiAgICAnRHNjcjsnOiAnXFUwMDAxZDQ5ZicsCiAgICAnZHNjcjsnOiAnXFUwMDAxZDRiOScsCiAgICAnRFNjeTsnOiAnXHUwNDA1JywKICAgICdkc2N5Oyc6ICdcdTA0NTUnLAogICAgJ2Rzb2w7JzogJ1x1MjlmNicsCiAgICAnRHN0cm9rOyc6ICdcdTAxMTAnLAogICAgJ2RzdHJvazsnOiAnXHUwMTExJywKICAgICdkdGRvdDsnOiAnXHUyMmYxJywKICAgICdkdHJpOyc6ICdcdTI1YmYnLAogICAgJ2R0cmlmOyc6ICdcdTI1YmUnLAogICAgJ2R1YXJyOyc6ICdcdTIxZjUnLAogICAgJ2R1aGFyOyc6ICdcdTI5NmYnLAogICAgJ2R3YW5nbGU7JzogJ1x1MjlhNicsCiAgICAnRFpjeTsnOiAnXHUwNDBmJywKICAgICdkemN5Oyc6ICdcdTA0NWYnLAogICAgJ2R6aWdyYXJyOyc6ICdcdTI3ZmYnLAogICAgJ0VhY3V0ZSc6ICdceGM5JywKICAgICdlYWN1dGUnOiAnXHhlOScsCiAgICAnRWFjdXRlOyc6ICdceGM5JywKICAgICdlYWN1dGU7JzogJ1x4ZTknLAogICAgJ2Vhc3RlcjsnOiAnXHUyYTZlJywKICAgICdFY2Fyb247JzogJ1x1MDExYScsCiAgICAnZWNhcm9uOyc6ICdcdTAxMWInLAogICAgJ2VjaXI7JzogJ1x1MjI1NicsCiAgICAnRWNpcmMnOiAnXHhjYScsCiAgICAnZWNpcmMnOiAnXHhlYScsCiAgICAnRWNpcmM7JzogJ1x4Y2EnLAogICAgJ2VjaXJjOyc6ICdceGVhJywKICAgICdlY29sb247JzogJ1x1MjI1NScsCiAgICAnRWN5Oyc6ICdcdTA0MmQnLAogICAgJ2VjeTsnOiAnXHUwNDRkJywKICAgICdlRERvdDsnOiAnXHUyYTc3JywKICAgICdFZG90Oyc6ICdcdTAxMTYnLAogICAgJ2VEb3Q7JzogJ1x1MjI1MScsCiAgICAnZWRvdDsnOiAnXHUwMTE3JywKICAgICdlZTsnOiAnXHUyMTQ3JywKICAgICdlZkRvdDsnOiAnXHUyMjUyJywKICAgICdFZnI7JzogJ1xVMDAwMWQ1MDgnLAogICAgJ2VmcjsnOiAnXFUwMDAxZDUyMicsCiAgICAnZWc7JzogJ1x1MmE5YScsCiAgICAnRWdyYXZlJzogJ1x4YzgnLAogICAgJ2VncmF2ZSc6ICdceGU4JywKICAgICdFZ3JhdmU7JzogJ1x4YzgnLAogICAgJ2VncmF2ZTsnOiAnXHhlOCcsCiAgICAnZWdzOyc6ICdcdTJhOTYnLAogICAgJ2Vnc2RvdDsnOiAnXHUyYTk4JywKICAgICdlbDsnOiAnXHUyYTk5JywKICAgICdFbGVtZW50Oyc6ICdcdTIyMDgnLAogICAgJ2VsaW50ZXJzOyc6ICdcdTIzZTcnLAogICAgJ2VsbDsnOiAnXHUyMTEzJywKICAgICdlbHM7JzogJ1x1MmE5NScsCiAgICAnZWxzZG90Oyc6ICdcdTJhOTcnLAogICAgJ0VtYWNyOyc6ICdcdTAxMTInLAogICAgJ2VtYWNyOyc6ICdcdTAxMTMnLAogICAgJ2VtcHR5Oyc6ICdcdTIyMDUnLAogICAgJ2VtcHR5c2V0Oyc6ICdcdTIyMDUnLAogICAgJ0VtcHR5U21hbGxTcXVhcmU7JzogJ1x1MjVmYicsCiAgICAnZW1wdHl2Oyc6ICdcdTIyMDUnLAogICAgJ0VtcHR5VmVyeVNtYWxsU3F1YXJlOyc6ICdcdTI1YWInLAogICAgJ2Vtc3AxMzsnOiAnXHUyMDA0JywKICAgICdlbXNwMTQ7JzogJ1x1MjAwNScsCiAgICAnZW1zcDsnOiAnXHUyMDAzJywKICAgICdFTkc7JzogJ1x1MDE0YScsCiAgICAnZW5nOyc6ICdcdTAxNGInLAogICAgJ2Vuc3A7JzogJ1x1MjAwMicsCiAgICAnRW9nb247JzogJ1x1MDExOCcsCiAgICAnZW9nb247JzogJ1x1MDExOScsCiAgICAnRW9wZjsnOiAnXFUwMDAxZDUzYycsCiAgICAnZW9wZjsnOiAnXFUwMDAxZDU1NicsCiAgICAnZXBhcjsnOiAnXHUyMmQ1JywKICAgICdlcGFyc2w7JzogJ1x1MjllMycsCiAgICAnZXBsdXM7JzogJ1x1MmE3MScsCiAgICAnZXBzaTsnOiAnXHUwM2I1JywKICAgICdFcHNpbG9uOyc6ICdcdTAzOTUnLAogICAgJ2Vwc2lsb247JzogJ1x1MDNiNScsCiAgICAnZXBzaXY7JzogJ1x1MDNmNScsCiAgICAnZXFjaXJjOyc6ICdcdTIyNTYnLAogICAgJ2VxY29sb247JzogJ1x1MjI1NScsCiAgICAnZXFzaW07JzogJ1x1MjI0MicsCiAgICAnZXFzbGFudGd0cjsnOiAnXHUyYTk2JywKICAgICdlcXNsYW50bGVzczsnOiAnXHUyYTk1JywKICAgICdFcXVhbDsnOiAnXHUyYTc1JywKICAgICdlcXVhbHM7JzogJz0nLAogICAgJ0VxdWFsVGlsZGU7JzogJ1x1MjI0MicsCiAgICAnZXF1ZXN0Oyc6ICdcdTIyNWYnLAogICAgJ0VxdWlsaWJyaXVtOyc6ICdcdTIxY2MnLAogICAgJ2VxdWl2Oyc6ICdcdTIyNjEnLAogICAgJ2VxdWl2REQ7JzogJ1x1MmE3OCcsCiAgICAnZXF2cGFyc2w7JzogJ1x1MjllNScsCiAgICAnZXJhcnI7JzogJ1x1Mjk3MScsCiAgICAnZXJEb3Q7JzogJ1x1MjI1MycsCiAgICAnRXNjcjsnOiAnXHUyMTMwJywKICAgICdlc2NyOyc6ICdcdTIxMmYnLAogICAgJ2VzZG90Oyc6ICdcdTIyNTAnLAogICAgJ0VzaW07JzogJ1x1MmE3MycsCiAgICAnZXNpbTsnOiAnXHUyMjQyJywKICAgICdFdGE7JzogJ1x1MDM5NycsCiAgICAnZXRhOyc6ICdcdTAzYjcnLAogICAgJ0VUSCc6ICdceGQwJywKICAgICdldGgnOiAnXHhmMCcsCiAgICAnRVRIOyc6ICdceGQwJywKICAgICdldGg7JzogJ1x4ZjAnLAogICAgJ0V1bWwnOiAnXHhjYicsCiAgICAnZXVtbCc6ICdceGViJywKICAgICdFdW1sOyc6ICdceGNiJywKICAgICdldW1sOyc6ICdceGViJywKICAgICdldXJvOyc6ICdcdTIwYWMnLAogICAgJ2V4Y2w7JzogJyEnLAogICAgJ2V4aXN0Oyc6ICdcdTIyMDMnLAogICAgJ0V4aXN0czsnOiAnXHUyMjAzJywKICAgICdleHBlY3RhdGlvbjsnOiAnXHUyMTMwJywKICAgICdFeHBvbmVudGlhbEU7JzogJ1x1MjE0NycsCiAgICAnZXhwb25lbnRpYWxlOyc6ICdcdTIxNDcnLAogICAgJ2ZhbGxpbmdkb3RzZXE7JzogJ1x1MjI1MicsCiAgICAnRmN5Oyc6ICdcdTA0MjQnLAogICAgJ2ZjeTsnOiAnXHUwNDQ0JywKICAgICdmZW1hbGU7JzogJ1x1MjY0MCcsCiAgICAnZmZpbGlnOyc6ICdcdWZiMDMnLAogICAgJ2ZmbGlnOyc6ICdcdWZiMDAnLAogICAgJ2ZmbGxpZzsnOiAnXHVmYjA0JywKICAgICdGZnI7JzogJ1xVMDAwMWQ1MDknLAogICAgJ2ZmcjsnOiAnXFUwMDAxZDUyMycsCiAgICAnZmlsaWc7JzogJ1x1ZmIwMScsCiAgICAnRmlsbGVkU21hbGxTcXVhcmU7JzogJ1x1MjVmYycsCiAgICAnRmlsbGVkVmVyeVNtYWxsU3F1YXJlOyc6ICdcdTI1YWEnLAogICAgJ2ZqbGlnOyc6ICdmaicsCiAgICAnZmxhdDsnOiAnXHUyNjZkJywKICAgICdmbGxpZzsnOiAnXHVmYjAyJywKICAgICdmbHRuczsnOiAnXHUyNWIxJywKICAgICdmbm9mOyc6ICdcdTAxOTInLAogICAgJ0ZvcGY7JzogJ1xVMDAwMWQ1M2QnLAogICAgJ2ZvcGY7JzogJ1xVMDAwMWQ1NTcnLAogICAgJ0ZvckFsbDsnOiAnXHUyMjAwJywKICAgICdmb3JhbGw7JzogJ1x1MjIwMCcsCiAgICAnZm9yazsnOiAnXHUyMmQ0JywKICAgICdmb3JrdjsnOiAnXHUyYWQ5JywKICAgICdGb3VyaWVydHJmOyc6ICdcdTIxMzEnLAogICAgJ2ZwYXJ0aW50Oyc6ICdcdTJhMGQnLAogICAgJ2ZyYWMxMic6ICdceGJkJywKICAgICdmcmFjMTI7JzogJ1x4YmQnLAogICAgJ2ZyYWMxMzsnOiAnXHUyMTUzJywKICAgICdmcmFjMTQnOiAnXHhiYycsCiAgICAnZnJhYzE0Oyc6ICdceGJjJywKICAgICdmcmFjMTU7JzogJ1x1MjE1NScsCiAgICAnZnJhYzE2Oyc6ICdcdTIxNTknLAogICAgJ2ZyYWMxODsnOiAnXHUyMTViJywKICAgICdmcmFjMjM7JzogJ1x1MjE1NCcsCiAgICAnZnJhYzI1Oyc6ICdcdTIxNTYnLAogICAgJ2ZyYWMzNCc6ICdceGJlJywKICAgICdmcmFjMzQ7JzogJ1x4YmUnLAogICAgJ2ZyYWMzNTsnOiAnXHUyMTU3JywKICAgICdmcmFjMzg7JzogJ1x1MjE1YycsCiAgICAnZnJhYzQ1Oyc6ICdcdTIxNTgnLAogICAgJ2ZyYWM1NjsnOiAnXHUyMTVhJywKICAgICdmcmFjNTg7JzogJ1x1MjE1ZCcsCiAgICAnZnJhYzc4Oyc6ICdcdTIxNWUnLAogICAgJ2ZyYXNsOyc6ICdcdTIwNDQnLAogICAgJ2Zyb3duOyc6ICdcdTIzMjInLAogICAgJ0ZzY3I7JzogJ1x1MjEzMScsCiAgICAnZnNjcjsnOiAnXFUwMDAxZDRiYicsCiAgICAnZ2FjdXRlOyc6ICdcdTAxZjUnLAogICAgJ0dhbW1hOyc6ICdcdTAzOTMnLAogICAgJ2dhbW1hOyc6ICdcdTAzYjMnLAogICAgJ0dhbW1hZDsnOiAnXHUwM2RjJywKICAgICdnYW1tYWQ7JzogJ1x1MDNkZCcsCiAgICAnZ2FwOyc6ICdcdTJhODYnLAogICAgJ0dicmV2ZTsnOiAnXHUwMTFlJywKICAgICdnYnJldmU7JzogJ1x1MDExZicsCiAgICAnR2NlZGlsOyc6ICdcdTAxMjInLAogICAgJ0djaXJjOyc6ICdcdTAxMWMnLAogICAgJ2djaXJjOyc6ICdcdTAxMWQnLAogICAgJ0djeTsnOiAnXHUwNDEzJywKICAgICdnY3k7JzogJ1x1MDQzMycsCiAgICAnR2RvdDsnOiAnXHUwMTIwJywKICAgICdnZG90Oyc6ICdcdTAxMjEnLAogICAgJ2dFOyc6ICdcdTIyNjcnLAogICAgJ2dlOyc6ICdcdTIyNjUnLAogICAgJ2dFbDsnOiAnXHUyYThjJywKICAgICdnZWw7JzogJ1x1MjJkYicsCiAgICAnZ2VxOyc6ICdcdTIyNjUnLAogICAgJ2dlcXE7JzogJ1x1MjI2NycsCiAgICAnZ2Vxc2xhbnQ7JzogJ1x1MmE3ZScsCiAgICAnZ2VzOyc6ICdcdTJhN2UnLAogICAgJ2dlc2NjOyc6ICdcdTJhYTknLAogICAgJ2dlc2RvdDsnOiAnXHUyYTgwJywKICAgICdnZXNkb3RvOyc6ICdcdTJhODInLAogICAgJ2dlc2RvdG9sOyc6ICdcdTJhODQnLAogICAgJ2dlc2w7JzogJ1x1MjJkYlx1ZmUwMCcsCiAgICAnZ2VzbGVzOyc6ICdcdTJhOTQnLAogICAgJ0dmcjsnOiAnXFUwMDAxZDUwYScsCiAgICAnZ2ZyOyc6ICdcVTAwMDFkNTI0JywKICAgICdHZzsnOiAnXHUyMmQ5JywKICAgICdnZzsnOiAnXHUyMjZiJywKICAgICdnZ2c7JzogJ1x1MjJkOScsCiAgICAnZ2ltZWw7JzogJ1x1MjEzNycsCiAgICAnR0pjeTsnOiAnXHUwNDAzJywKICAgICdnamN5Oyc6ICdcdTA0NTMnLAogICAgJ2dsOyc6ICdcdTIyNzcnLAogICAgJ2dsYTsnOiAnXHUyYWE1JywKICAgICdnbEU7JzogJ1x1MmE5MicsCiAgICAnZ2xqOyc6ICdcdTJhYTQnLAogICAgJ2duYXA7JzogJ1x1MmE4YScsCiAgICAnZ25hcHByb3g7JzogJ1x1MmE4YScsCiAgICAnZ25FOyc6ICdcdTIyNjknLAogICAgJ2duZTsnOiAnXHUyYTg4JywKICAgICdnbmVxOyc6ICdcdTJhODgnLAogICAgJ2duZXFxOyc6ICdcdTIyNjknLAogICAgJ2duc2ltOyc6ICdcdTIyZTcnLAogICAgJ0dvcGY7JzogJ1xVMDAwMWQ1M2UnLAogICAgJ2dvcGY7JzogJ1xVMDAwMWQ1NTgnLAogICAgJ2dyYXZlOyc6ICdgJywKICAgICdHcmVhdGVyRXF1YWw7JzogJ1x1MjI2NScsCiAgICAnR3JlYXRlckVxdWFsTGVzczsnOiAnXHUyMmRiJywKICAgICdHcmVhdGVyRnVsbEVxdWFsOyc6ICdcdTIyNjcnLAogICAgJ0dyZWF0ZXJHcmVhdGVyOyc6ICdcdTJhYTInLAogICAgJ0dyZWF0ZXJMZXNzOyc6ICdcdTIyNzcnLAogICAgJ0dyZWF0ZXJTbGFudEVxdWFsOyc6ICdcdTJhN2UnLAogICAgJ0dyZWF0ZXJUaWxkZTsnOiAnXHUyMjczJywKICAgICdHc2NyOyc6ICdcVTAwMDFkNGEyJywKICAgICdnc2NyOyc6ICdcdTIxMGEnLAogICAgJ2dzaW07JzogJ1x1MjI3MycsCiAgICAnZ3NpbWU7JzogJ1x1MmE4ZScsCiAgICAnZ3NpbWw7JzogJ1x1MmE5MCcsCiAgICAnR1QnOiAnPicsCiAgICAnZ3QnOiAnPicsCiAgICAnR1Q7JzogJz4nLAogICAgJ0d0Oyc6ICdcdTIyNmInLAogICAgJ2d0Oyc6ICc+JywKICAgICdndGNjOyc6ICdcdTJhYTcnLAogICAgJ2d0Y2lyOyc6ICdcdTJhN2EnLAogICAgJ2d0ZG90Oyc6ICdcdTIyZDcnLAogICAgJ2d0bFBhcjsnOiAnXHUyOTk1JywKICAgICdndHF1ZXN0Oyc6ICdcdTJhN2MnLAogICAgJ2d0cmFwcHJveDsnOiAnXHUyYTg2JywKICAgICdndHJhcnI7JzogJ1x1Mjk3OCcsCiAgICAnZ3RyZG90Oyc6ICdcdTIyZDcnLAogICAgJ2d0cmVxbGVzczsnOiAnXHUyMmRiJywKICAgICdndHJlcXFsZXNzOyc6ICdcdTJhOGMnLAogICAgJ2d0cmxlc3M7JzogJ1x1MjI3NycsCiAgICAnZ3Ryc2ltOyc6ICdcdTIyNzMnLAogICAgJ2d2ZXJ0bmVxcTsnOiAnXHUyMjY5XHVmZTAwJywKICAgICdndm5FOyc6ICdcdTIyNjlcdWZlMDAnLAogICAgJ0hhY2VrOyc6ICdcdTAyYzcnLAogICAgJ2hhaXJzcDsnOiAnXHUyMDBhJywKICAgICdoYWxmOyc6ICdceGJkJywKICAgICdoYW1pbHQ7JzogJ1x1MjEwYicsCiAgICAnSEFSRGN5Oyc6ICdcdTA0MmEnLAogICAgJ2hhcmRjeTsnOiAnXHUwNDRhJywKICAgICdoQXJyOyc6ICdcdTIxZDQnLAogICAgJ2hhcnI7JzogJ1x1MjE5NCcsCiAgICAnaGFycmNpcjsnOiAnXHUyOTQ4JywKICAgICdoYXJydzsnOiAnXHUyMWFkJywKICAgICdIYXQ7JzogJ14nLAogICAgJ2hiYXI7JzogJ1x1MjEwZicsCiAgICAnSGNpcmM7JzogJ1x1MDEyNCcsCiAgICAnaGNpcmM7JzogJ1x1MDEyNScsCiAgICAnaGVhcnRzOyc6ICdcdTI2NjUnLAogICAgJ2hlYXJ0c3VpdDsnOiAnXHUyNjY1JywKICAgICdoZWxsaXA7JzogJ1x1MjAyNicsCiAgICAnaGVyY29uOyc6ICdcdTIyYjknLAogICAgJ0hmcjsnOiAnXHUyMTBjJywKICAgICdoZnI7JzogJ1xVMDAwMWQ1MjUnLAogICAgJ0hpbGJlcnRTcGFjZTsnOiAnXHUyMTBiJywKICAgICdoa3NlYXJvdzsnOiAnXHUyOTI1JywKICAgICdoa3N3YXJvdzsnOiAnXHUyOTI2JywKICAgICdob2FycjsnOiAnXHUyMWZmJywKICAgICdob210aHQ7JzogJ1x1MjIzYicsCiAgICAnaG9va2xlZnRhcnJvdzsnOiAnXHUyMWE5JywKICAgICdob29rcmlnaHRhcnJvdzsnOiAnXHUyMWFhJywKICAgICdIb3BmOyc6ICdcdTIxMGQnLAogICAgJ2hvcGY7JzogJ1xVMDAwMWQ1NTknLAogICAgJ2hvcmJhcjsnOiAnXHUyMDE1JywKICAgICdIb3Jpem9udGFsTGluZTsnOiAnXHUyNTAwJywKICAgICdIc2NyOyc6ICdcdTIxMGInLAogICAgJ2hzY3I7JzogJ1xVMDAwMWQ0YmQnLAogICAgJ2hzbGFzaDsnOiAnXHUyMTBmJywKICAgICdIc3Ryb2s7JzogJ1x1MDEyNicsCiAgICAnaHN0cm9rOyc6ICdcdTAxMjcnLAogICAgJ0h1bXBEb3duSHVtcDsnOiAnXHUyMjRlJywKICAgICdIdW1wRXF1YWw7JzogJ1x1MjI0ZicsCiAgICAnaHlidWxsOyc6ICdcdTIwNDMnLAogICAgJ2h5cGhlbjsnOiAnXHUyMDEwJywKICAgICdJYWN1dGUnOiAnXHhjZCcsCiAgICAnaWFjdXRlJzogJ1x4ZWQnLAogICAgJ0lhY3V0ZTsnOiAnXHhjZCcsCiAgICAnaWFjdXRlOyc6ICdceGVkJywKICAgICdpYzsnOiAnXHUyMDYzJywKICAgICdJY2lyYyc6ICdceGNlJywKICAgICdpY2lyYyc6ICdceGVlJywKICAgICdJY2lyYzsnOiAnXHhjZScsCiAgICAnaWNpcmM7JzogJ1x4ZWUnLAogICAgJ0ljeTsnOiAnXHUwNDE4JywKICAgICdpY3k7JzogJ1x1MDQzOCcsCiAgICAnSWRvdDsnOiAnXHUwMTMwJywKICAgICdJRWN5Oyc6ICdcdTA0MTUnLAogICAgJ2llY3k7JzogJ1x1MDQzNScsCiAgICAnaWV4Y2wnOiAnXHhhMScsCiAgICAnaWV4Y2w7JzogJ1x4YTEnLAogICAgJ2lmZjsnOiAnXHUyMWQ0JywKICAgICdJZnI7JzogJ1x1MjExMScsCiAgICAnaWZyOyc6ICdcVTAwMDFkNTI2JywKICAgICdJZ3JhdmUnOiAnXHhjYycsCiAgICAnaWdyYXZlJzogJ1x4ZWMnLAogICAgJ0lncmF2ZTsnOiAnXHhjYycsCiAgICAnaWdyYXZlOyc6ICdceGVjJywKICAgICdpaTsnOiAnXHUyMTQ4JywKICAgICdpaWlpbnQ7JzogJ1x1MmEwYycsCiAgICAnaWlpbnQ7JzogJ1x1MjIyZCcsCiAgICAnaWluZmluOyc6ICdcdTI5ZGMnLAogICAgJ2lpb3RhOyc6ICdcdTIxMjknLAogICAgJ0lKbGlnOyc6ICdcdTAxMzInLAogICAgJ2lqbGlnOyc6ICdcdTAxMzMnLAogICAgJ0ltOyc6ICdcdTIxMTEnLAogICAgJ0ltYWNyOyc6ICdcdTAxMmEnLAogICAgJ2ltYWNyOyc6ICdcdTAxMmInLAogICAgJ2ltYWdlOyc6ICdcdTIxMTEnLAogICAgJ0ltYWdpbmFyeUk7JzogJ1x1MjE0OCcsCiAgICAnaW1hZ2xpbmU7JzogJ1x1MjExMCcsCiAgICAnaW1hZ3BhcnQ7JzogJ1x1MjExMScsCiAgICAnaW1hdGg7JzogJ1x1MDEzMScsCiAgICAnaW1vZjsnOiAnXHUyMmI3JywKICAgICdpbXBlZDsnOiAnXHUwMWI1JywKICAgICdJbXBsaWVzOyc6ICdcdTIxZDInLAogICAgJ2luOyc6ICdcdTIyMDgnLAogICAgJ2luY2FyZTsnOiAnXHUyMTA1JywKICAgICdpbmZpbjsnOiAnXHUyMjFlJywKICAgICdpbmZpbnRpZTsnOiAnXHUyOWRkJywKICAgICdpbm9kb3Q7JzogJ1x1MDEzMScsCiAgICAnSW50Oyc6ICdcdTIyMmMnLAogICAgJ2ludDsnOiAnXHUyMjJiJywKICAgICdpbnRjYWw7JzogJ1x1MjJiYScsCiAgICAnaW50ZWdlcnM7JzogJ1x1MjEyNCcsCiAgICAnSW50ZWdyYWw7JzogJ1x1MjIyYicsCiAgICAnaW50ZXJjYWw7JzogJ1x1MjJiYScsCiAgICAnSW50ZXJzZWN0aW9uOyc6ICdcdTIyYzInLAogICAgJ2ludGxhcmhrOyc6ICdcdTJhMTcnLAogICAgJ2ludHByb2Q7JzogJ1x1MmEzYycsCiAgICAnSW52aXNpYmxlQ29tbWE7JzogJ1x1MjA2MycsCiAgICAnSW52aXNpYmxlVGltZXM7JzogJ1x1MjA2MicsCiAgICAnSU9jeTsnOiAnXHUwNDAxJywKICAgICdpb2N5Oyc6ICdcdTA0NTEnLAogICAgJ0lvZ29uOyc6ICdcdTAxMmUnLAogICAgJ2lvZ29uOyc6ICdcdTAxMmYnLAogICAgJ0lvcGY7JzogJ1xVMDAwMWQ1NDAnLAogICAgJ2lvcGY7JzogJ1xVMDAwMWQ1NWEnLAogICAgJ0lvdGE7JzogJ1x1MDM5OScsCiAgICAnaW90YTsnOiAnXHUwM2I5JywKICAgICdpcHJvZDsnOiAnXHUyYTNjJywKICAgICdpcXVlc3QnOiAnXHhiZicsCiAgICAnaXF1ZXN0Oyc6ICdceGJmJywKICAgICdJc2NyOyc6ICdcdTIxMTAnLAogICAgJ2lzY3I7JzogJ1xVMDAwMWQ0YmUnLAogICAgJ2lzaW47JzogJ1x1MjIwOCcsCiAgICAnaXNpbmRvdDsnOiAnXHUyMmY1JywKICAgICdpc2luRTsnOiAnXHUyMmY5JywKICAgICdpc2luczsnOiAnXHUyMmY0JywKICAgICdpc2luc3Y7JzogJ1x1MjJmMycsCiAgICAnaXNpbnY7JzogJ1x1MjIwOCcsCiAgICAnaXQ7JzogJ1x1MjA2MicsCiAgICAnSXRpbGRlOyc6ICdcdTAxMjgnLAogICAgJ2l0aWxkZTsnOiAnXHUwMTI5JywKICAgICdJdWtjeTsnOiAnXHUwNDA2JywKICAgICdpdWtjeTsnOiAnXHUwNDU2JywKICAgICdJdW1sJzogJ1x4Y2YnLAogICAgJ2l1bWwnOiAnXHhlZicsCiAgICAnSXVtbDsnOiAnXHhjZicsCiAgICAnaXVtbDsnOiAnXHhlZicsCiAgICAnSmNpcmM7JzogJ1x1MDEzNCcsCiAgICAnamNpcmM7JzogJ1x1MDEzNScsCiAgICAnSmN5Oyc6ICdcdTA0MTknLAogICAgJ2pjeTsnOiAnXHUwNDM5JywKICAgICdKZnI7JzogJ1xVMDAwMWQ1MGQnLAogICAgJ2pmcjsnOiAnXFUwMDAxZDUyNycsCiAgICAnam1hdGg7JzogJ1x1MDIzNycsCiAgICAnSm9wZjsnOiAnXFUwMDAxZDU0MScsCiAgICAnam9wZjsnOiAnXFUwMDAxZDU1YicsCiAgICAnSnNjcjsnOiAnXFUwMDAxZDRhNScsCiAgICAnanNjcjsnOiAnXFUwMDAxZDRiZicsCiAgICAnSnNlcmN5Oyc6ICdcdTA0MDgnLAogICAgJ2pzZXJjeTsnOiAnXHUwNDU4JywKICAgICdKdWtjeTsnOiAnXHUwNDA0JywKICAgICdqdWtjeTsnOiAnXHUwNDU0JywKICAgICdLYXBwYTsnOiAnXHUwMzlhJywKICAgICdrYXBwYTsnOiAnXHUwM2JhJywKICAgICdrYXBwYXY7JzogJ1x1MDNmMCcsCiAgICAnS2NlZGlsOyc6ICdcdTAxMzYnLAogICAgJ2tjZWRpbDsnOiAnXHUwMTM3JywKICAgICdLY3k7JzogJ1x1MDQxYScsCiAgICAna2N5Oyc6ICdcdTA0M2EnLAogICAgJ0tmcjsnOiAnXFUwMDAxZDUwZScsCiAgICAna2ZyOyc6ICdcVTAwMDFkNTI4JywKICAgICdrZ3JlZW47JzogJ1x1MDEzOCcsCiAgICAnS0hjeTsnOiAnXHUwNDI1JywKICAgICdraGN5Oyc6ICdcdTA0NDUnLAogICAgJ0tKY3k7JzogJ1x1MDQwYycsCiAgICAna2pjeTsnOiAnXHUwNDVjJywKICAgICdLb3BmOyc6ICdcVTAwMDFkNTQyJywKICAgICdrb3BmOyc6ICdcVTAwMDFkNTVjJywKICAgICdLc2NyOyc6ICdcVTAwMDFkNGE2JywKICAgICdrc2NyOyc6ICdcVTAwMDFkNGMwJywKICAgICdsQWFycjsnOiAnXHUyMWRhJywKICAgICdMYWN1dGU7JzogJ1x1MDEzOScsCiAgICAnbGFjdXRlOyc6ICdcdTAxM2EnLAogICAgJ2xhZW1wdHl2Oyc6ICdcdTI5YjQnLAogICAgJ2xhZ3JhbjsnOiAnXHUyMTEyJywKICAgICdMYW1iZGE7JzogJ1x1MDM5YicsCiAgICAnbGFtYmRhOyc6ICdcdTAzYmInLAogICAgJ0xhbmc7JzogJ1x1MjdlYScsCiAgICAnbGFuZzsnOiAnXHUyN2U4JywKICAgICdsYW5nZDsnOiAnXHUyOTkxJywKICAgICdsYW5nbGU7JzogJ1x1MjdlOCcsCiAgICAnbGFwOyc6ICdcdTJhODUnLAogICAgJ0xhcGxhY2V0cmY7JzogJ1x1MjExMicsCiAgICAnbGFxdW8nOiAnXHhhYicsCiAgICAnbGFxdW87JzogJ1x4YWInLAogICAgJ0xhcnI7JzogJ1x1MjE5ZScsCiAgICAnbEFycjsnOiAnXHUyMWQwJywKICAgICdsYXJyOyc6ICdcdTIxOTAnLAogICAgJ2xhcnJiOyc6ICdcdTIxZTQnLAogICAgJ2xhcnJiZnM7JzogJ1x1MjkxZicsCiAgICAnbGFycmZzOyc6ICdcdTI5MWQnLAogICAgJ2xhcnJoazsnOiAnXHUyMWE5JywKICAgICdsYXJybHA7JzogJ1x1MjFhYicsCiAgICAnbGFycnBsOyc6ICdcdTI5MzknLAogICAgJ2xhcnJzaW07JzogJ1x1Mjk3MycsCiAgICAnbGFycnRsOyc6ICdcdTIxYTInLAogICAgJ2xhdDsnOiAnXHUyYWFiJywKICAgICdsQXRhaWw7JzogJ1x1MjkxYicsCiAgICAnbGF0YWlsOyc6ICdcdTI5MTknLAogICAgJ2xhdGU7JzogJ1x1MmFhZCcsCiAgICAnbGF0ZXM7JzogJ1x1MmFhZFx1ZmUwMCcsCiAgICAnbEJhcnI7JzogJ1x1MjkwZScsCiAgICAnbGJhcnI7JzogJ1x1MjkwYycsCiAgICAnbGJicms7JzogJ1x1Mjc3MicsCiAgICAnbGJyYWNlOyc6ICd7JywKICAgICdsYnJhY2s7JzogJ1snLAogICAgJ2xicmtlOyc6ICdcdTI5OGInLAogICAgJ2xicmtzbGQ7JzogJ1x1Mjk4ZicsCiAgICAnbGJya3NsdTsnOiAnXHUyOThkJywKICAgICdMY2Fyb247JzogJ1x1MDEzZCcsCiAgICAnbGNhcm9uOyc6ICdcdTAxM2UnLAogICAgJ0xjZWRpbDsnOiAnXHUwMTNiJywKICAgICdsY2VkaWw7JzogJ1x1MDEzYycsCiAgICAnbGNlaWw7JzogJ1x1MjMwOCcsCiAgICAnbGN1YjsnOiAneycsCiAgICAnTGN5Oyc6ICdcdTA0MWInLAogICAgJ2xjeTsnOiAnXHUwNDNiJywKICAgICdsZGNhOyc6ICdcdTI5MzYnLAogICAgJ2xkcXVvOyc6ICdcdTIwMWMnLAogICAgJ2xkcXVvcjsnOiAnXHUyMDFlJywKICAgICdsZHJkaGFyOyc6ICdcdTI5NjcnLAogICAgJ2xkcnVzaGFyOyc6ICdcdTI5NGInLAogICAgJ2xkc2g7JzogJ1x1MjFiMicsCiAgICAnbEU7JzogJ1x1MjI2NicsCiAgICAnbGU7JzogJ1x1MjI2NCcsCiAgICAnTGVmdEFuZ2xlQnJhY2tldDsnOiAnXHUyN2U4JywKICAgICdMZWZ0QXJyb3c7JzogJ1x1MjE5MCcsCiAgICAnTGVmdGFycm93Oyc6ICdcdTIxZDAnLAogICAgJ2xlZnRhcnJvdzsnOiAnXHUyMTkwJywKICAgICdMZWZ0QXJyb3dCYXI7JzogJ1x1MjFlNCcsCiAgICAnTGVmdEFycm93UmlnaHRBcnJvdzsnOiAnXHUyMWM2JywKICAgICdsZWZ0YXJyb3d0YWlsOyc6ICdcdTIxYTInLAogICAgJ0xlZnRDZWlsaW5nOyc6ICdcdTIzMDgnLAogICAgJ0xlZnREb3VibGVCcmFja2V0Oyc6ICdcdTI3ZTYnLAogICAgJ0xlZnREb3duVGVlVmVjdG9yOyc6ICdcdTI5NjEnLAogICAgJ0xlZnREb3duVmVjdG9yOyc6ICdcdTIxYzMnLAogICAgJ0xlZnREb3duVmVjdG9yQmFyOyc6ICdcdTI5NTknLAogICAgJ0xlZnRGbG9vcjsnOiAnXHUyMzBhJywKICAgICdsZWZ0aGFycG9vbmRvd247JzogJ1x1MjFiZCcsCiAgICAnbGVmdGhhcnBvb251cDsnOiAnXHUyMWJjJywKICAgICdsZWZ0bGVmdGFycm93czsnOiAnXHUyMWM3JywKICAgICdMZWZ0UmlnaHRBcnJvdzsnOiAnXHUyMTk0JywKICAgICdMZWZ0cmlnaHRhcnJvdzsnOiAnXHUyMWQ0JywKICAgICdsZWZ0cmlnaHRhcnJvdzsnOiAnXHUyMTk0JywKICAgICdsZWZ0cmlnaHRhcnJvd3M7JzogJ1x1MjFjNicsCiAgICAnbGVmdHJpZ2h0aGFycG9vbnM7JzogJ1x1MjFjYicsCiAgICAnbGVmdHJpZ2h0c3F1aWdhcnJvdzsnOiAnXHUyMWFkJywKICAgICdMZWZ0UmlnaHRWZWN0b3I7JzogJ1x1Mjk0ZScsCiAgICAnTGVmdFRlZTsnOiAnXHUyMmEzJywKICAgICdMZWZ0VGVlQXJyb3c7JzogJ1x1MjFhNCcsCiAgICAnTGVmdFRlZVZlY3RvcjsnOiAnXHUyOTVhJywKICAgICdsZWZ0dGhyZWV0aW1lczsnOiAnXHUyMmNiJywKICAgICdMZWZ0VHJpYW5nbGU7JzogJ1x1MjJiMicsCiAgICAnTGVmdFRyaWFuZ2xlQmFyOyc6ICdcdTI5Y2YnLAogICAgJ0xlZnRUcmlhbmdsZUVxdWFsOyc6ICdcdTIyYjQnLAogICAgJ0xlZnRVcERvd25WZWN0b3I7JzogJ1x1Mjk1MScsCiAgICAnTGVmdFVwVGVlVmVjdG9yOyc6ICdcdTI5NjAnLAogICAgJ0xlZnRVcFZlY3RvcjsnOiAnXHUyMWJmJywKICAgICdMZWZ0VXBWZWN0b3JCYXI7JzogJ1x1Mjk1OCcsCiAgICAnTGVmdFZlY3RvcjsnOiAnXHUyMWJjJywKICAgICdMZWZ0VmVjdG9yQmFyOyc6ICdcdTI5NTInLAogICAgJ2xFZzsnOiAnXHUyYThiJywKICAgICdsZWc7JzogJ1x1MjJkYScsCiAgICAnbGVxOyc6ICdcdTIyNjQnLAogICAgJ2xlcXE7JzogJ1x1MjI2NicsCiAgICAnbGVxc2xhbnQ7JzogJ1x1MmE3ZCcsCiAgICAnbGVzOyc6ICdcdTJhN2QnLAogICAgJ2xlc2NjOyc6ICdcdTJhYTgnLAogICAgJ2xlc2RvdDsnOiAnXHUyYTdmJywKICAgICdsZXNkb3RvOyc6ICdcdTJhODEnLAogICAgJ2xlc2RvdG9yOyc6ICdcdTJhODMnLAogICAgJ2xlc2c7JzogJ1x1MjJkYVx1ZmUwMCcsCiAgICAnbGVzZ2VzOyc6ICdcdTJhOTMnLAogICAgJ2xlc3NhcHByb3g7JzogJ1x1MmE4NScsCiAgICAnbGVzc2RvdDsnOiAnXHUyMmQ2JywKICAgICdsZXNzZXFndHI7JzogJ1x1MjJkYScsCiAgICAnbGVzc2VxcWd0cjsnOiAnXHUyYThiJywKICAgICdMZXNzRXF1YWxHcmVhdGVyOyc6ICdcdTIyZGEnLAogICAgJ0xlc3NGdWxsRXF1YWw7JzogJ1x1MjI2NicsCiAgICAnTGVzc0dyZWF0ZXI7JzogJ1x1MjI3NicsCiAgICAnbGVzc2d0cjsnOiAnXHUyMjc2JywKICAgICdMZXNzTGVzczsnOiAnXHUyYWExJywKICAgICdsZXNzc2ltOyc6ICdcdTIyNzInLAogICAgJ0xlc3NTbGFudEVxdWFsOyc6ICdcdTJhN2QnLAogICAgJ0xlc3NUaWxkZTsnOiAnXHUyMjcyJywKICAgICdsZmlzaHQ7JzogJ1x1Mjk3YycsCiAgICAnbGZsb29yOyc6ICdcdTIzMGEnLAogICAgJ0xmcjsnOiAnXFUwMDAxZDUwZicsCiAgICAnbGZyOyc6ICdcVTAwMDFkNTI5JywKICAgICdsZzsnOiAnXHUyMjc2JywKICAgICdsZ0U7JzogJ1x1MmE5MScsCiAgICAnbEhhcjsnOiAnXHUyOTYyJywKICAgICdsaGFyZDsnOiAnXHUyMWJkJywKICAgICdsaGFydTsnOiAnXHUyMWJjJywKICAgICdsaGFydWw7JzogJ1x1Mjk2YScsCiAgICAnbGhibGs7JzogJ1x1MjU4NCcsCiAgICAnTEpjeTsnOiAnXHUwNDA5JywKICAgICdsamN5Oyc6ICdcdTA0NTknLAogICAgJ0xsOyc6ICdcdTIyZDgnLAogICAgJ2xsOyc6ICdcdTIyNmEnLAogICAgJ2xsYXJyOyc6ICdcdTIxYzcnLAogICAgJ2xsY29ybmVyOyc6ICdcdTIzMWUnLAogICAgJ0xsZWZ0YXJyb3c7JzogJ1x1MjFkYScsCiAgICAnbGxoYXJkOyc6ICdcdTI5NmInLAogICAgJ2xsdHJpOyc6ICdcdTI1ZmEnLAogICAgJ0xtaWRvdDsnOiAnXHUwMTNmJywKICAgICdsbWlkb3Q7JzogJ1x1MDE0MCcsCiAgICAnbG1vdXN0Oyc6ICdcdTIzYjAnLAogICAgJ2xtb3VzdGFjaGU7JzogJ1x1MjNiMCcsCiAgICAnbG5hcDsnOiAnXHUyYTg5JywKICAgICdsbmFwcHJveDsnOiAnXHUyYTg5JywKICAgICdsbkU7JzogJ1x1MjI2OCcsCiAgICAnbG5lOyc6ICdcdTJhODcnLAogICAgJ2xuZXE7JzogJ1x1MmE4NycsCiAgICAnbG5lcXE7JzogJ1x1MjI2OCcsCiAgICAnbG5zaW07JzogJ1x1MjJlNicsCiAgICAnbG9hbmc7JzogJ1x1MjdlYycsCiAgICAnbG9hcnI7JzogJ1x1MjFmZCcsCiAgICAnbG9icms7JzogJ1x1MjdlNicsCiAgICAnTG9uZ0xlZnRBcnJvdzsnOiAnXHUyN2Y1JywKICAgICdMb25nbGVmdGFycm93Oyc6ICdcdTI3ZjgnLAogICAgJ2xvbmdsZWZ0YXJyb3c7JzogJ1x1MjdmNScsCiAgICAnTG9uZ0xlZnRSaWdodEFycm93Oyc6ICdcdTI3ZjcnLAogICAgJ0xvbmdsZWZ0cmlnaHRhcnJvdzsnOiAnXHUyN2ZhJywKICAgICdsb25nbGVmdHJpZ2h0YXJyb3c7JzogJ1x1MjdmNycsCiAgICAnbG9uZ21hcHN0bzsnOiAnXHUyN2ZjJywKICAgICdMb25nUmlnaHRBcnJvdzsnOiAnXHUyN2Y2JywKICAgICdMb25ncmlnaHRhcnJvdzsnOiAnXHUyN2Y5JywKICAgICdsb25ncmlnaHRhcnJvdzsnOiAnXHUyN2Y2JywKICAgICdsb29wYXJyb3dsZWZ0Oyc6ICdcdTIxYWInLAogICAgJ2xvb3BhcnJvd3JpZ2h0Oyc6ICdcdTIxYWMnLAogICAgJ2xvcGFyOyc6ICdcdTI5ODUnLAogICAgJ0xvcGY7JzogJ1xVMDAwMWQ1NDMnLAogICAgJ2xvcGY7JzogJ1xVMDAwMWQ1NWQnLAogICAgJ2xvcGx1czsnOiAnXHUyYTJkJywKICAgICdsb3RpbWVzOyc6ICdcdTJhMzQnLAogICAgJ2xvd2FzdDsnOiAnXHUyMjE3JywKICAgICdsb3diYXI7JzogJ18nLAogICAgJ0xvd2VyTGVmdEFycm93Oyc6ICdcdTIxOTknLAogICAgJ0xvd2VyUmlnaHRBcnJvdzsnOiAnXHUyMTk4JywKICAgICdsb3o7JzogJ1x1MjVjYScsCiAgICAnbG96ZW5nZTsnOiAnXHUyNWNhJywKICAgICdsb3pmOyc6ICdcdTI5ZWInLAogICAgJ2xwYXI7JzogJygnLAogICAgJ2xwYXJsdDsnOiAnXHUyOTkzJywKICAgICdscmFycjsnOiAnXHUyMWM2JywKICAgICdscmNvcm5lcjsnOiAnXHUyMzFmJywKICAgICdscmhhcjsnOiAnXHUyMWNiJywKICAgICdscmhhcmQ7JzogJ1x1Mjk2ZCcsCiAgICAnbHJtOyc6ICdcdTIwMGUnLAogICAgJ2xydHJpOyc6ICdcdTIyYmYnLAogICAgJ2xzYXF1bzsnOiAnXHUyMDM5JywKICAgICdMc2NyOyc6ICdcdTIxMTInLAogICAgJ2xzY3I7JzogJ1xVMDAwMWQ0YzEnLAogICAgJ0xzaDsnOiAnXHUyMWIwJywKICAgICdsc2g7JzogJ1x1MjFiMCcsCiAgICAnbHNpbTsnOiAnXHUyMjcyJywKICAgICdsc2ltZTsnOiAnXHUyYThkJywKICAgICdsc2ltZzsnOiAnXHUyYThmJywKICAgICdsc3FiOyc6ICdbJywKICAgICdsc3F1bzsnOiAnXHUyMDE4JywKICAgICdsc3F1b3I7JzogJ1x1MjAxYScsCiAgICAnTHN0cm9rOyc6ICdcdTAxNDEnLAogICAgJ2xzdHJvazsnOiAnXHUwMTQyJywKICAgICdMVCc6ICc8JywKICAgICdsdCc6ICc8JywKICAgICdMVDsnOiAnPCcsCiAgICAnTHQ7JzogJ1x1MjI2YScsCiAgICAnbHQ7JzogJzwnLAogICAgJ2x0Y2M7JzogJ1x1MmFhNicsCiAgICAnbHRjaXI7JzogJ1x1MmE3OScsCiAgICAnbHRkb3Q7JzogJ1x1MjJkNicsCiAgICAnbHRocmVlOyc6ICdcdTIyY2InLAogICAgJ2x0aW1lczsnOiAnXHUyMmM5JywKICAgICdsdGxhcnI7JzogJ1x1Mjk3NicsCiAgICAnbHRxdWVzdDsnOiAnXHUyYTdiJywKICAgICdsdHJpOyc6ICdcdTI1YzMnLAogICAgJ2x0cmllOyc6ICdcdTIyYjQnLAogICAgJ2x0cmlmOyc6ICdcdTI1YzInLAogICAgJ2x0clBhcjsnOiAnXHUyOTk2JywKICAgICdsdXJkc2hhcjsnOiAnXHUyOTRhJywKICAgICdsdXJ1aGFyOyc6ICdcdTI5NjYnLAogICAgJ2x2ZXJ0bmVxcTsnOiAnXHUyMjY4XHVmZTAwJywKICAgICdsdm5FOyc6ICdcdTIyNjhcdWZlMDAnLAogICAgJ21hY3InOiAnXHhhZicsCiAgICAnbWFjcjsnOiAnXHhhZicsCiAgICAnbWFsZTsnOiAnXHUyNjQyJywKICAgICdtYWx0Oyc6ICdcdTI3MjAnLAogICAgJ21hbHRlc2U7JzogJ1x1MjcyMCcsCiAgICAnTWFwOyc6ICdcdTI5MDUnLAogICAgJ21hcDsnOiAnXHUyMWE2JywKICAgICdtYXBzdG87JzogJ1x1MjFhNicsCiAgICAnbWFwc3RvZG93bjsnOiAnXHUyMWE3JywKICAgICdtYXBzdG9sZWZ0Oyc6ICdcdTIxYTQnLAogICAgJ21hcHN0b3VwOyc6ICdcdTIxYTUnLAogICAgJ21hcmtlcjsnOiAnXHUyNWFlJywKICAgICdtY29tbWE7JzogJ1x1MmEyOScsCiAgICAnTWN5Oyc6ICdcdTA0MWMnLAogICAgJ21jeTsnOiAnXHUwNDNjJywKICAgICdtZGFzaDsnOiAnXHUyMDE0JywKICAgICdtRERvdDsnOiAnXHUyMjNhJywKICAgICdtZWFzdXJlZGFuZ2xlOyc6ICdcdTIyMjEnLAogICAgJ01lZGl1bVNwYWNlOyc6ICdcdTIwNWYnLAogICAgJ01lbGxpbnRyZjsnOiAnXHUyMTMzJywKICAgICdNZnI7JzogJ1xVMDAwMWQ1MTAnLAogICAgJ21mcjsnOiAnXFUwMDAxZDUyYScsCiAgICAnbWhvOyc6ICdcdTIxMjcnLAogICAgJ21pY3JvJzogJ1x4YjUnLAogICAgJ21pY3JvOyc6ICdceGI1JywKICAgICdtaWQ7JzogJ1x1MjIyMycsCiAgICAnbWlkYXN0Oyc6ICcqJywKICAgICdtaWRjaXI7JzogJ1x1MmFmMCcsCiAgICAnbWlkZG90JzogJ1x4YjcnLAogICAgJ21pZGRvdDsnOiAnXHhiNycsCiAgICAnbWludXM7JzogJ1x1MjIxMicsCiAgICAnbWludXNiOyc6ICdcdTIyOWYnLAogICAgJ21pbnVzZDsnOiAnXHUyMjM4JywKICAgICdtaW51c2R1Oyc6ICdcdTJhMmEnLAogICAgJ01pbnVzUGx1czsnOiAnXHUyMjEzJywKICAgICdtbGNwOyc6ICdcdTJhZGInLAogICAgJ21sZHI7JzogJ1x1MjAyNicsCiAgICAnbW5wbHVzOyc6ICdcdTIyMTMnLAogICAgJ21vZGVsczsnOiAnXHUyMmE3JywKICAgICdNb3BmOyc6ICdcVTAwMDFkNTQ0JywKICAgICdtb3BmOyc6ICdcVTAwMDFkNTVlJywKICAgICdtcDsnOiAnXHUyMjEzJywKICAgICdNc2NyOyc6ICdcdTIxMzMnLAogICAgJ21zY3I7JzogJ1xVMDAwMWQ0YzInLAogICAgJ21zdHBvczsnOiAnXHUyMjNlJywKICAgICdNdTsnOiAnXHUwMzljJywKICAgICdtdTsnOiAnXHUwM2JjJywKICAgICdtdWx0aW1hcDsnOiAnXHUyMmI4JywKICAgICdtdW1hcDsnOiAnXHUyMmI4JywKICAgICduYWJsYTsnOiAnXHUyMjA3JywKICAgICdOYWN1dGU7JzogJ1x1MDE0MycsCiAgICAnbmFjdXRlOyc6ICdcdTAxNDQnLAogICAgJ25hbmc7JzogJ1x1MjIyMFx1MjBkMicsCiAgICAnbmFwOyc6ICdcdTIyNDknLAogICAgJ25hcEU7JzogJ1x1MmE3MFx1MDMzOCcsCiAgICAnbmFwaWQ7JzogJ1x1MjI0Ylx1MDMzOCcsCiAgICAnbmFwb3M7JzogJ1x1MDE0OScsCiAgICAnbmFwcHJveDsnOiAnXHUyMjQ5JywKICAgICduYXR1cjsnOiAnXHUyNjZlJywKICAgICduYXR1cmFsOyc6ICdcdTI2NmUnLAogICAgJ25hdHVyYWxzOyc6ICdcdTIxMTUnLAogICAgJ25ic3AnOiAnXHhhMCcsCiAgICAnbmJzcDsnOiAnXHhhMCcsCiAgICAnbmJ1bXA7JzogJ1x1MjI0ZVx1MDMzOCcsCiAgICAnbmJ1bXBlOyc6ICdcdTIyNGZcdTAzMzgnLAogICAgJ25jYXA7JzogJ1x1MmE0MycsCiAgICAnTmNhcm9uOyc6ICdcdTAxNDcnLAogICAgJ25jYXJvbjsnOiAnXHUwMTQ4JywKICAgICdOY2VkaWw7JzogJ1x1MDE0NScsCiAgICAnbmNlZGlsOyc6ICdcdTAxNDYnLAogICAgJ25jb25nOyc6ICdcdTIyNDcnLAogICAgJ25jb25nZG90Oyc6ICdcdTJhNmRcdTAzMzgnLAogICAgJ25jdXA7JzogJ1x1MmE0MicsCiAgICAnTmN5Oyc6ICdcdTA0MWQnLAogICAgJ25jeTsnOiAnXHUwNDNkJywKICAgICduZGFzaDsnOiAnXHUyMDEzJywKICAgICduZTsnOiAnXHUyMjYwJywKICAgICduZWFyaGs7JzogJ1x1MjkyNCcsCiAgICAnbmVBcnI7JzogJ1x1MjFkNycsCiAgICAnbmVhcnI7JzogJ1x1MjE5NycsCiAgICAnbmVhcnJvdzsnOiAnXHUyMTk3JywKICAgICduZWRvdDsnOiAnXHUyMjUwXHUwMzM4JywKICAgICdOZWdhdGl2ZU1lZGl1bVNwYWNlOyc6ICdcdTIwMGInLAogICAgJ05lZ2F0aXZlVGhpY2tTcGFjZTsnOiAnXHUyMDBiJywKICAgICdOZWdhdGl2ZVRoaW5TcGFjZTsnOiAnXHUyMDBiJywKICAgICdOZWdhdGl2ZVZlcnlUaGluU3BhY2U7JzogJ1x1MjAwYicsCiAgICAnbmVxdWl2Oyc6ICdcdTIyNjInLAogICAgJ25lc2VhcjsnOiAnXHUyOTI4JywKICAgICduZXNpbTsnOiAnXHUyMjQyXHUwMzM4JywKICAgICdOZXN0ZWRHcmVhdGVyR3JlYXRlcjsnOiAnXHUyMjZiJywKICAgICdOZXN0ZWRMZXNzTGVzczsnOiAnXHUyMjZhJywKICAgICdOZXdMaW5lOyc6ICdcbicsCiAgICAnbmV4aXN0Oyc6ICdcdTIyMDQnLAogICAgJ25leGlzdHM7JzogJ1x1MjIwNCcsCiAgICAnTmZyOyc6ICdcVTAwMDFkNTExJywKICAgICduZnI7JzogJ1xVMDAwMWQ1MmInLAogICAgJ25nRTsnOiAnXHUyMjY3XHUwMzM4JywKICAgICduZ2U7JzogJ1x1MjI3MScsCiAgICAnbmdlcTsnOiAnXHUyMjcxJywKICAgICduZ2VxcTsnOiAnXHUyMjY3XHUwMzM4JywKICAgICduZ2Vxc2xhbnQ7JzogJ1x1MmE3ZVx1MDMzOCcsCiAgICAnbmdlczsnOiAnXHUyYTdlXHUwMzM4JywKICAgICduR2c7JzogJ1x1MjJkOVx1MDMzOCcsCiAgICAnbmdzaW07JzogJ1x1MjI3NScsCiAgICAnbkd0Oyc6ICdcdTIyNmJcdTIwZDInLAogICAgJ25ndDsnOiAnXHUyMjZmJywKICAgICduZ3RyOyc6ICdcdTIyNmYnLAogICAgJ25HdHY7JzogJ1x1MjI2Ylx1MDMzOCcsCiAgICAnbmhBcnI7JzogJ1x1MjFjZScsCiAgICAnbmhhcnI7JzogJ1x1MjFhZScsCiAgICAnbmhwYXI7JzogJ1x1MmFmMicsCiAgICAnbmk7JzogJ1x1MjIwYicsCiAgICAnbmlzOyc6ICdcdTIyZmMnLAogICAgJ25pc2Q7JzogJ1x1MjJmYScsCiAgICAnbml2Oyc6ICdcdTIyMGInLAogICAgJ05KY3k7JzogJ1x1MDQwYScsCiAgICAnbmpjeTsnOiAnXHUwNDVhJywKICAgICdubEFycjsnOiAnXHUyMWNkJywKICAgICdubGFycjsnOiAnXHUyMTlhJywKICAgICdubGRyOyc6ICdcdTIwMjUnLAogICAgJ25sRTsnOiAnXHUyMjY2XHUwMzM4JywKICAgICdubGU7JzogJ1x1MjI3MCcsCiAgICAnbkxlZnRhcnJvdzsnOiAnXHUyMWNkJywKICAgICdubGVmdGFycm93Oyc6ICdcdTIxOWEnLAogICAgJ25MZWZ0cmlnaHRhcnJvdzsnOiAnXHUyMWNlJywKICAgICdubGVmdHJpZ2h0YXJyb3c7JzogJ1x1MjFhZScsCiAgICAnbmxlcTsnOiAnXHUyMjcwJywKICAgICdubGVxcTsnOiAnXHUyMjY2XHUwMzM4JywKICAgICdubGVxc2xhbnQ7JzogJ1x1MmE3ZFx1MDMzOCcsCiAgICAnbmxlczsnOiAnXHUyYTdkXHUwMzM4JywKICAgICdubGVzczsnOiAnXHUyMjZlJywKICAgICduTGw7JzogJ1x1MjJkOFx1MDMzOCcsCiAgICAnbmxzaW07JzogJ1x1MjI3NCcsCiAgICAnbkx0Oyc6ICdcdTIyNmFcdTIwZDInLAogICAgJ25sdDsnOiAnXHUyMjZlJywKICAgICdubHRyaTsnOiAnXHUyMmVhJywKICAgICdubHRyaWU7JzogJ1x1MjJlYycsCiAgICAnbkx0djsnOiAnXHUyMjZhXHUwMzM4JywKICAgICdubWlkOyc6ICdcdTIyMjQnLAogICAgJ05vQnJlYWs7JzogJ1x1MjA2MCcsCiAgICAnTm9uQnJlYWtpbmdTcGFjZTsnOiAnXHhhMCcsCiAgICAnTm9wZjsnOiAnXHUyMTE1JywKICAgICdub3BmOyc6ICdcVTAwMDFkNTVmJywKICAgICdub3QnOiAnXHhhYycsCiAgICAnTm90Oyc6ICdcdTJhZWMnLAogICAgJ25vdDsnOiAnXHhhYycsCiAgICAnTm90Q29uZ3J1ZW50Oyc6ICdcdTIyNjInLAogICAgJ05vdEN1cENhcDsnOiAnXHUyMjZkJywKICAgICdOb3REb3VibGVWZXJ0aWNhbEJhcjsnOiAnXHUyMjI2JywKICAgICdOb3RFbGVtZW50Oyc6ICdcdTIyMDknLAogICAgJ05vdEVxdWFsOyc6ICdcdTIyNjAnLAogICAgJ05vdEVxdWFsVGlsZGU7JzogJ1x1MjI0Mlx1MDMzOCcsCiAgICAnTm90RXhpc3RzOyc6ICdcdTIyMDQnLAogICAgJ05vdEdyZWF0ZXI7JzogJ1x1MjI2ZicsCiAgICAnTm90R3JlYXRlckVxdWFsOyc6ICdcdTIyNzEnLAogICAgJ05vdEdyZWF0ZXJGdWxsRXF1YWw7JzogJ1x1MjI2N1x1MDMzOCcsCiAgICAnTm90R3JlYXRlckdyZWF0ZXI7JzogJ1x1MjI2Ylx1MDMzOCcsCiAgICAnTm90R3JlYXRlckxlc3M7JzogJ1x1MjI3OScsCiAgICAnTm90R3JlYXRlclNsYW50RXF1YWw7JzogJ1x1MmE3ZVx1MDMzOCcsCiAgICAnTm90R3JlYXRlclRpbGRlOyc6ICdcdTIyNzUnLAogICAgJ05vdEh1bXBEb3duSHVtcDsnOiAnXHUyMjRlXHUwMzM4JywKICAgICdOb3RIdW1wRXF1YWw7JzogJ1x1MjI0Zlx1MDMzOCcsCiAgICAnbm90aW47JzogJ1x1MjIwOScsCiAgICAnbm90aW5kb3Q7JzogJ1x1MjJmNVx1MDMzOCcsCiAgICAnbm90aW5FOyc6ICdcdTIyZjlcdTAzMzgnLAogICAgJ25vdGludmE7JzogJ1x1MjIwOScsCiAgICAnbm90aW52YjsnOiAnXHUyMmY3JywKICAgICdub3RpbnZjOyc6ICdcdTIyZjYnLAogICAgJ05vdExlZnRUcmlhbmdsZTsnOiAnXHUyMmVhJywKICAgICdOb3RMZWZ0VHJpYW5nbGVCYXI7JzogJ1x1MjljZlx1MDMzOCcsCiAgICAnTm90TGVmdFRyaWFuZ2xlRXF1YWw7JzogJ1x1MjJlYycsCiAgICAnTm90TGVzczsnOiAnXHUyMjZlJywKICAgICdOb3RMZXNzRXF1YWw7JzogJ1x1MjI3MCcsCiAgICAnTm90TGVzc0dyZWF0ZXI7JzogJ1x1MjI3OCcsCiAgICAnTm90TGVzc0xlc3M7JzogJ1x1MjI2YVx1MDMzOCcsCiAgICAnTm90TGVzc1NsYW50RXF1YWw7JzogJ1x1MmE3ZFx1MDMzOCcsCiAgICAnTm90TGVzc1RpbGRlOyc6ICdcdTIyNzQnLAogICAgJ05vdE5lc3RlZEdyZWF0ZXJHcmVhdGVyOyc6ICdcdTJhYTJcdTAzMzgnLAogICAgJ05vdE5lc3RlZExlc3NMZXNzOyc6ICdcdTJhYTFcdTAzMzgnLAogICAgJ25vdG5pOyc6ICdcdTIyMGMnLAogICAgJ25vdG5pdmE7JzogJ1x1MjIwYycsCiAgICAnbm90bml2YjsnOiAnXHUyMmZlJywKICAgICdub3RuaXZjOyc6ICdcdTIyZmQnLAogICAgJ05vdFByZWNlZGVzOyc6ICdcdTIyODAnLAogICAgJ05vdFByZWNlZGVzRXF1YWw7JzogJ1x1MmFhZlx1MDMzOCcsCiAgICAnTm90UHJlY2VkZXNTbGFudEVxdWFsOyc6ICdcdTIyZTAnLAogICAgJ05vdFJldmVyc2VFbGVtZW50Oyc6ICdcdTIyMGMnLAogICAgJ05vdFJpZ2h0VHJpYW5nbGU7JzogJ1x1MjJlYicsCiAgICAnTm90UmlnaHRUcmlhbmdsZUJhcjsnOiAnXHUyOWQwXHUwMzM4JywKICAgICdOb3RSaWdodFRyaWFuZ2xlRXF1YWw7JzogJ1x1MjJlZCcsCiAgICAnTm90U3F1YXJlU3Vic2V0Oyc6ICdcdTIyOGZcdTAzMzgnLAogICAgJ05vdFNxdWFyZVN1YnNldEVxdWFsOyc6ICdcdTIyZTInLAogICAgJ05vdFNxdWFyZVN1cGVyc2V0Oyc6ICdcdTIyOTBcdTAzMzgnLAogICAgJ05vdFNxdWFyZVN1cGVyc2V0RXF1YWw7JzogJ1x1MjJlMycsCiAgICAnTm90U3Vic2V0Oyc6ICdcdTIyODJcdTIwZDInLAogICAgJ05vdFN1YnNldEVxdWFsOyc6ICdcdTIyODgnLAogICAgJ05vdFN1Y2NlZWRzOyc6ICdcdTIyODEnLAogICAgJ05vdFN1Y2NlZWRzRXF1YWw7JzogJ1x1MmFiMFx1MDMzOCcsCiAgICAnTm90U3VjY2VlZHNTbGFudEVxdWFsOyc6ICdcdTIyZTEnLAogICAgJ05vdFN1Y2NlZWRzVGlsZGU7JzogJ1x1MjI3Zlx1MDMzOCcsCiAgICAnTm90U3VwZXJzZXQ7JzogJ1x1MjI4M1x1MjBkMicsCiAgICAnTm90U3VwZXJzZXRFcXVhbDsnOiAnXHUyMjg5JywKICAgICdOb3RUaWxkZTsnOiAnXHUyMjQxJywKICAgICdOb3RUaWxkZUVxdWFsOyc6ICdcdTIyNDQnLAogICAgJ05vdFRpbGRlRnVsbEVxdWFsOyc6ICdcdTIyNDcnLAogICAgJ05vdFRpbGRlVGlsZGU7JzogJ1x1MjI0OScsCiAgICAnTm90VmVydGljYWxCYXI7JzogJ1x1MjIyNCcsCiAgICAnbnBhcjsnOiAnXHUyMjI2JywKICAgICducGFyYWxsZWw7JzogJ1x1MjIyNicsCiAgICAnbnBhcnNsOyc6ICdcdTJhZmRcdTIwZTUnLAogICAgJ25wYXJ0Oyc6ICdcdTIyMDJcdTAzMzgnLAogICAgJ25wb2xpbnQ7JzogJ1x1MmExNCcsCiAgICAnbnByOyc6ICdcdTIyODAnLAogICAgJ25wcmN1ZTsnOiAnXHUyMmUwJywKICAgICducHJlOyc6ICdcdTJhYWZcdTAzMzgnLAogICAgJ25wcmVjOyc6ICdcdTIyODAnLAogICAgJ25wcmVjZXE7JzogJ1x1MmFhZlx1MDMzOCcsCiAgICAnbnJBcnI7JzogJ1x1MjFjZicsCiAgICAnbnJhcnI7JzogJ1x1MjE5YicsCiAgICAnbnJhcnJjOyc6ICdcdTI5MzNcdTAzMzgnLAogICAgJ25yYXJydzsnOiAnXHUyMTlkXHUwMzM4JywKICAgICduUmlnaHRhcnJvdzsnOiAnXHUyMWNmJywKICAgICducmlnaHRhcnJvdzsnOiAnXHUyMTliJywKICAgICducnRyaTsnOiAnXHUyMmViJywKICAgICducnRyaWU7JzogJ1x1MjJlZCcsCiAgICAnbnNjOyc6ICdcdTIyODEnLAogICAgJ25zY2N1ZTsnOiAnXHUyMmUxJywKICAgICduc2NlOyc6ICdcdTJhYjBcdTAzMzgnLAogICAgJ05zY3I7JzogJ1xVMDAwMWQ0YTknLAogICAgJ25zY3I7JzogJ1xVMDAwMWQ0YzMnLAogICAgJ25zaG9ydG1pZDsnOiAnXHUyMjI0JywKICAgICduc2hvcnRwYXJhbGxlbDsnOiAnXHUyMjI2JywKICAgICduc2ltOyc6ICdcdTIyNDEnLAogICAgJ25zaW1lOyc6ICdcdTIyNDQnLAogICAgJ25zaW1lcTsnOiAnXHUyMjQ0JywKICAgICduc21pZDsnOiAnXHUyMjI0JywKICAgICduc3BhcjsnOiAnXHUyMjI2JywKICAgICduc3FzdWJlOyc6ICdcdTIyZTInLAogICAgJ25zcXN1cGU7JzogJ1x1MjJlMycsCiAgICAnbnN1YjsnOiAnXHUyMjg0JywKICAgICduc3ViRTsnOiAnXHUyYWM1XHUwMzM4JywKICAgICduc3ViZTsnOiAnXHUyMjg4JywKICAgICduc3Vic2V0Oyc6ICdcdTIyODJcdTIwZDInLAogICAgJ25zdWJzZXRlcTsnOiAnXHUyMjg4JywKICAgICduc3Vic2V0ZXFxOyc6ICdcdTJhYzVcdTAzMzgnLAogICAgJ25zdWNjOyc6ICdcdTIyODEnLAogICAgJ25zdWNjZXE7JzogJ1x1MmFiMFx1MDMzOCcsCiAgICAnbnN1cDsnOiAnXHUyMjg1JywKICAgICduc3VwRTsnOiAnXHUyYWM2XHUwMzM4JywKICAgICduc3VwZTsnOiAnXHUyMjg5JywKICAgICduc3Vwc2V0Oyc6ICdcdTIyODNcdTIwZDInLAogICAgJ25zdXBzZXRlcTsnOiAnXHUyMjg5JywKICAgICduc3Vwc2V0ZXFxOyc6ICdcdTJhYzZcdTAzMzgnLAogICAgJ250Z2w7JzogJ1x1MjI3OScsCiAgICAnTnRpbGRlJzogJ1x4ZDEnLAogICAgJ250aWxkZSc6ICdceGYxJywKICAgICdOdGlsZGU7JzogJ1x4ZDEnLAogICAgJ250aWxkZTsnOiAnXHhmMScsCiAgICAnbnRsZzsnOiAnXHUyMjc4JywKICAgICdudHJpYW5nbGVsZWZ0Oyc6ICdcdTIyZWEnLAogICAgJ250cmlhbmdsZWxlZnRlcTsnOiAnXHUyMmVjJywKICAgICdudHJpYW5nbGVyaWdodDsnOiAnXHUyMmViJywKICAgICdudHJpYW5nbGVyaWdodGVxOyc6ICdcdTIyZWQnLAogICAgJ051Oyc6ICdcdTAzOWQnLAogICAgJ251Oyc6ICdcdTAzYmQnLAogICAgJ251bTsnOiAnIycsCiAgICAnbnVtZXJvOyc6ICdcdTIxMTYnLAogICAgJ251bXNwOyc6ICdcdTIwMDcnLAogICAgJ252YXA7JzogJ1x1MjI0ZFx1MjBkMicsCiAgICAnblZEYXNoOyc6ICdcdTIyYWYnLAogICAgJ25WZGFzaDsnOiAnXHUyMmFlJywKICAgICdudkRhc2g7JzogJ1x1MjJhZCcsCiAgICAnbnZkYXNoOyc6ICdcdTIyYWMnLAogICAgJ252Z2U7JzogJ1x1MjI2NVx1MjBkMicsCiAgICAnbnZndDsnOiAnPlx1MjBkMicsCiAgICAnbnZIYXJyOyc6ICdcdTI5MDQnLAogICAgJ252aW5maW47JzogJ1x1MjlkZScsCiAgICAnbnZsQXJyOyc6ICdcdTI5MDInLAogICAgJ252bGU7JzogJ1x1MjI2NFx1MjBkMicsCiAgICAnbnZsdDsnOiAnPFx1MjBkMicsCiAgICAnbnZsdHJpZTsnOiAnXHUyMmI0XHUyMGQyJywKICAgICdudnJBcnI7JzogJ1x1MjkwMycsCiAgICAnbnZydHJpZTsnOiAnXHUyMmI1XHUyMGQyJywKICAgICdudnNpbTsnOiAnXHUyMjNjXHUyMGQyJywKICAgICdud2FyaGs7JzogJ1x1MjkyMycsCiAgICAnbndBcnI7JzogJ1x1MjFkNicsCiAgICAnbndhcnI7JzogJ1x1MjE5NicsCiAgICAnbndhcnJvdzsnOiAnXHUyMTk2JywKICAgICdud25lYXI7JzogJ1x1MjkyNycsCiAgICAnT2FjdXRlJzogJ1x4ZDMnLAogICAgJ29hY3V0ZSc6ICdceGYzJywKICAgICdPYWN1dGU7JzogJ1x4ZDMnLAogICAgJ29hY3V0ZTsnOiAnXHhmMycsCiAgICAnb2FzdDsnOiAnXHUyMjliJywKICAgICdvY2lyOyc6ICdcdTIyOWEnLAogICAgJ09jaXJjJzogJ1x4ZDQnLAogICAgJ29jaXJjJzogJ1x4ZjQnLAogICAgJ09jaXJjOyc6ICdceGQ0JywKICAgICdvY2lyYzsnOiAnXHhmNCcsCiAgICAnT2N5Oyc6ICdcdTA0MWUnLAogICAgJ29jeTsnOiAnXHUwNDNlJywKICAgICdvZGFzaDsnOiAnXHUyMjlkJywKICAgICdPZGJsYWM7JzogJ1x1MDE1MCcsCiAgICAnb2RibGFjOyc6ICdcdTAxNTEnLAogICAgJ29kaXY7JzogJ1x1MmEzOCcsCiAgICAnb2RvdDsnOiAnXHUyMjk5JywKICAgICdvZHNvbGQ7JzogJ1x1MjliYycsCiAgICAnT0VsaWc7JzogJ1x1MDE1MicsCiAgICAnb2VsaWc7JzogJ1x1MDE1MycsCiAgICAnb2ZjaXI7JzogJ1x1MjliZicsCiAgICAnT2ZyOyc6ICdcVTAwMDFkNTEyJywKICAgICdvZnI7JzogJ1xVMDAwMWQ1MmMnLAogICAgJ29nb247JzogJ1x1MDJkYicsCiAgICAnT2dyYXZlJzogJ1x4ZDInLAogICAgJ29ncmF2ZSc6ICdceGYyJywKICAgICdPZ3JhdmU7JzogJ1x4ZDInLAogICAgJ29ncmF2ZTsnOiAnXHhmMicsCiAgICAnb2d0Oyc6ICdcdTI5YzEnLAogICAgJ29oYmFyOyc6ICdcdTI5YjUnLAogICAgJ29obTsnOiAnXHUwM2E5JywKICAgICdvaW50Oyc6ICdcdTIyMmUnLAogICAgJ29sYXJyOyc6ICdcdTIxYmEnLAogICAgJ29sY2lyOyc6ICdcdTI5YmUnLAogICAgJ29sY3Jvc3M7JzogJ1x1MjliYicsCiAgICAnb2xpbmU7JzogJ1x1MjAzZScsCiAgICAnb2x0Oyc6ICdcdTI5YzAnLAogICAgJ09tYWNyOyc6ICdcdTAxNGMnLAogICAgJ29tYWNyOyc6ICdcdTAxNGQnLAogICAgJ09tZWdhOyc6ICdcdTAzYTknLAogICAgJ29tZWdhOyc6ICdcdTAzYzknLAogICAgJ09taWNyb247JzogJ1x1MDM5ZicsCiAgICAnb21pY3JvbjsnOiAnXHUwM2JmJywKICAgICdvbWlkOyc6ICdcdTI5YjYnLAogICAgJ29taW51czsnOiAnXHUyMjk2JywKICAgICdPb3BmOyc6ICdcVTAwMDFkNTQ2JywKICAgICdvb3BmOyc6ICdcVTAwMDFkNTYwJywKICAgICdvcGFyOyc6ICdcdTI5YjcnLAogICAgJ09wZW5DdXJseURvdWJsZVF1b3RlOyc6ICdcdTIwMWMnLAogICAgJ09wZW5DdXJseVF1b3RlOyc6ICdcdTIwMTgnLAogICAgJ29wZXJwOyc6ICdcdTI5YjknLAogICAgJ29wbHVzOyc6ICdcdTIyOTUnLAogICAgJ09yOyc6ICdcdTJhNTQnLAogICAgJ29yOyc6ICdcdTIyMjgnLAogICAgJ29yYXJyOyc6ICdcdTIxYmInLAogICAgJ29yZDsnOiAnXHUyYTVkJywKICAgICdvcmRlcjsnOiAnXHUyMTM0JywKICAgICdvcmRlcm9mOyc6ICdcdTIxMzQnLAogICAgJ29yZGYnOiAnXHhhYScsCiAgICAnb3JkZjsnOiAnXHhhYScsCiAgICAnb3JkbSc6ICdceGJhJywKICAgICdvcmRtOyc6ICdceGJhJywKICAgICdvcmlnb2Y7JzogJ1x1MjJiNicsCiAgICAnb3JvcjsnOiAnXHUyYTU2JywKICAgICdvcnNsb3BlOyc6ICdcdTJhNTcnLAogICAgJ29ydjsnOiAnXHUyYTViJywKICAgICdvUzsnOiAnXHUyNGM4JywKICAgICdPc2NyOyc6ICdcVTAwMDFkNGFhJywKICAgICdvc2NyOyc6ICdcdTIxMzQnLAogICAgJ09zbGFzaCc6ICdceGQ4JywKICAgICdvc2xhc2gnOiAnXHhmOCcsCiAgICAnT3NsYXNoOyc6ICdceGQ4JywKICAgICdvc2xhc2g7JzogJ1x4ZjgnLAogICAgJ29zb2w7JzogJ1x1MjI5OCcsCiAgICAnT3RpbGRlJzogJ1x4ZDUnLAogICAgJ290aWxkZSc6ICdceGY1JywKICAgICdPdGlsZGU7JzogJ1x4ZDUnLAogICAgJ290aWxkZTsnOiAnXHhmNScsCiAgICAnT3RpbWVzOyc6ICdcdTJhMzcnLAogICAgJ290aW1lczsnOiAnXHUyMjk3JywKICAgICdvdGltZXNhczsnOiAnXHUyYTM2JywKICAgICdPdW1sJzogJ1x4ZDYnLAogICAgJ291bWwnOiAnXHhmNicsCiAgICAnT3VtbDsnOiAnXHhkNicsCiAgICAnb3VtbDsnOiAnXHhmNicsCiAgICAnb3ZiYXI7JzogJ1x1MjMzZCcsCiAgICAnT3ZlckJhcjsnOiAnXHUyMDNlJywKICAgICdPdmVyQnJhY2U7JzogJ1x1MjNkZScsCiAgICAnT3ZlckJyYWNrZXQ7JzogJ1x1MjNiNCcsCiAgICAnT3ZlclBhcmVudGhlc2lzOyc6ICdcdTIzZGMnLAogICAgJ3BhcjsnOiAnXHUyMjI1JywKICAgICdwYXJhJzogJ1x4YjYnLAogICAgJ3BhcmE7JzogJ1x4YjYnLAogICAgJ3BhcmFsbGVsOyc6ICdcdTIyMjUnLAogICAgJ3BhcnNpbTsnOiAnXHUyYWYzJywKICAgICdwYXJzbDsnOiAnXHUyYWZkJywKICAgICdwYXJ0Oyc6ICdcdTIyMDInLAogICAgJ1BhcnRpYWxEOyc6ICdcdTIyMDInLAogICAgJ1BjeTsnOiAnXHUwNDFmJywKICAgICdwY3k7JzogJ1x1MDQzZicsCiAgICAncGVyY250Oyc6ICclJywKICAgICdwZXJpb2Q7JzogJy4nLAogICAgJ3Blcm1pbDsnOiAnXHUyMDMwJywKICAgICdwZXJwOyc6ICdcdTIyYTUnLAogICAgJ3BlcnRlbms7JzogJ1x1MjAzMScsCiAgICAnUGZyOyc6ICdcVTAwMDFkNTEzJywKICAgICdwZnI7JzogJ1xVMDAwMWQ1MmQnLAogICAgJ1BoaTsnOiAnXHUwM2E2JywKICAgICdwaGk7JzogJ1x1MDNjNicsCiAgICAncGhpdjsnOiAnXHUwM2Q1JywKICAgICdwaG1tYXQ7JzogJ1x1MjEzMycsCiAgICAncGhvbmU7JzogJ1x1MjYwZScsCiAgICAnUGk7JzogJ1x1MDNhMCcsCiAgICAncGk7JzogJ1x1MDNjMCcsCiAgICAncGl0Y2hmb3JrOyc6ICdcdTIyZDQnLAogICAgJ3BpdjsnOiAnXHUwM2Q2JywKICAgICdwbGFuY2s7JzogJ1x1MjEwZicsCiAgICAncGxhbmNraDsnOiAnXHUyMTBlJywKICAgICdwbGFua3Y7JzogJ1x1MjEwZicsCiAgICAncGx1czsnOiAnKycsCiAgICAncGx1c2FjaXI7JzogJ1x1MmEyMycsCiAgICAncGx1c2I7JzogJ1x1MjI5ZScsCiAgICAncGx1c2NpcjsnOiAnXHUyYTIyJywKICAgICdwbHVzZG87JzogJ1x1MjIxNCcsCiAgICAncGx1c2R1Oyc6ICdcdTJhMjUnLAogICAgJ3BsdXNlOyc6ICdcdTJhNzInLAogICAgJ1BsdXNNaW51czsnOiAnXHhiMScsCiAgICAncGx1c21uJzogJ1x4YjEnLAogICAgJ3BsdXNtbjsnOiAnXHhiMScsCiAgICAncGx1c3NpbTsnOiAnXHUyYTI2JywKICAgICdwbHVzdHdvOyc6ICdcdTJhMjcnLAogICAgJ3BtOyc6ICdceGIxJywKICAgICdQb2luY2FyZXBsYW5lOyc6ICdcdTIxMGMnLAogICAgJ3BvaW50aW50Oyc6ICdcdTJhMTUnLAogICAgJ1BvcGY7JzogJ1x1MjExOScsCiAgICAncG9wZjsnOiAnXFUwMDAxZDU2MScsCiAgICAncG91bmQnOiAnXHhhMycsCiAgICAncG91bmQ7JzogJ1x4YTMnLAogICAgJ1ByOyc6ICdcdTJhYmInLAogICAgJ3ByOyc6ICdcdTIyN2EnLAogICAgJ3ByYXA7JzogJ1x1MmFiNycsCiAgICAncHJjdWU7JzogJ1x1MjI3YycsCiAgICAncHJFOyc6ICdcdTJhYjMnLAogICAgJ3ByZTsnOiAnXHUyYWFmJywKICAgICdwcmVjOyc6ICdcdTIyN2EnLAogICAgJ3ByZWNhcHByb3g7JzogJ1x1MmFiNycsCiAgICAncHJlY2N1cmx5ZXE7JzogJ1x1MjI3YycsCiAgICAnUHJlY2VkZXM7JzogJ1x1MjI3YScsCiAgICAnUHJlY2VkZXNFcXVhbDsnOiAnXHUyYWFmJywKICAgICdQcmVjZWRlc1NsYW50RXF1YWw7JzogJ1x1MjI3YycsCiAgICAnUHJlY2VkZXNUaWxkZTsnOiAnXHUyMjdlJywKICAgICdwcmVjZXE7JzogJ1x1MmFhZicsCiAgICAncHJlY25hcHByb3g7JzogJ1x1MmFiOScsCiAgICAncHJlY25lcXE7JzogJ1x1MmFiNScsCiAgICAncHJlY25zaW07JzogJ1x1MjJlOCcsCiAgICAncHJlY3NpbTsnOiAnXHUyMjdlJywKICAgICdQcmltZTsnOiAnXHUyMDMzJywKICAgICdwcmltZTsnOiAnXHUyMDMyJywKICAgICdwcmltZXM7JzogJ1x1MjExOScsCiAgICAncHJuYXA7JzogJ1x1MmFiOScsCiAgICAncHJuRTsnOiAnXHUyYWI1JywKICAgICdwcm5zaW07JzogJ1x1MjJlOCcsCiAgICAncHJvZDsnOiAnXHUyMjBmJywKICAgICdQcm9kdWN0Oyc6ICdcdTIyMGYnLAogICAgJ3Byb2ZhbGFyOyc6ICdcdTIzMmUnLAogICAgJ3Byb2ZsaW5lOyc6ICdcdTIzMTInLAogICAgJ3Byb2ZzdXJmOyc6ICdcdTIzMTMnLAogICAgJ3Byb3A7JzogJ1x1MjIxZCcsCiAgICAnUHJvcG9ydGlvbjsnOiAnXHUyMjM3JywKICAgICdQcm9wb3J0aW9uYWw7JzogJ1x1MjIxZCcsCiAgICAncHJvcHRvOyc6ICdcdTIyMWQnLAogICAgJ3Byc2ltOyc6ICdcdTIyN2UnLAogICAgJ3BydXJlbDsnOiAnXHUyMmIwJywKICAgICdQc2NyOyc6ICdcVTAwMDFkNGFiJywKICAgICdwc2NyOyc6ICdcVTAwMDFkNGM1JywKICAgICdQc2k7JzogJ1x1MDNhOCcsCiAgICAncHNpOyc6ICdcdTAzYzgnLAogICAgJ3B1bmNzcDsnOiAnXHUyMDA4JywKICAgICdRZnI7JzogJ1xVMDAwMWQ1MTQnLAogICAgJ3FmcjsnOiAnXFUwMDAxZDUyZScsCiAgICAncWludDsnOiAnXHUyYTBjJywKICAgICdRb3BmOyc6ICdcdTIxMWEnLAogICAgJ3FvcGY7JzogJ1xVMDAwMWQ1NjInLAogICAgJ3FwcmltZTsnOiAnXHUyMDU3JywKICAgICdRc2NyOyc6ICdcVTAwMDFkNGFjJywKICAgICdxc2NyOyc6ICdcVTAwMDFkNGM2JywKICAgICdxdWF0ZXJuaW9uczsnOiAnXHUyMTBkJywKICAgICdxdWF0aW50Oyc6ICdcdTJhMTYnLAogICAgJ3F1ZXN0Oyc6ICc/JywKICAgICdxdWVzdGVxOyc6ICdcdTIyNWYnLAogICAgJ1FVT1QnOiAnIicsCiAgICAncXVvdCc6ICciJywKICAgICdRVU9UOyc6ICciJywKICAgICdxdW90Oyc6ICciJywKICAgICdyQWFycjsnOiAnXHUyMWRiJywKICAgICdyYWNlOyc6ICdcdTIyM2RcdTAzMzEnLAogICAgJ1JhY3V0ZTsnOiAnXHUwMTU0JywKICAgICdyYWN1dGU7JzogJ1x1MDE1NScsCiAgICAncmFkaWM7JzogJ1x1MjIxYScsCiAgICAncmFlbXB0eXY7JzogJ1x1MjliMycsCiAgICAnUmFuZzsnOiAnXHUyN2ViJywKICAgICdyYW5nOyc6ICdcdTI3ZTknLAogICAgJ3JhbmdkOyc6ICdcdTI5OTInLAogICAgJ3JhbmdlOyc6ICdcdTI5YTUnLAogICAgJ3JhbmdsZTsnOiAnXHUyN2U5JywKICAgICdyYXF1byc6ICdceGJiJywKICAgICdyYXF1bzsnOiAnXHhiYicsCiAgICAnUmFycjsnOiAnXHUyMWEwJywKICAgICdyQXJyOyc6ICdcdTIxZDInLAogICAgJ3JhcnI7JzogJ1x1MjE5MicsCiAgICAncmFycmFwOyc6ICdcdTI5NzUnLAogICAgJ3JhcnJiOyc6ICdcdTIxZTUnLAogICAgJ3JhcnJiZnM7JzogJ1x1MjkyMCcsCiAgICAncmFycmM7JzogJ1x1MjkzMycsCiAgICAncmFycmZzOyc6ICdcdTI5MWUnLAogICAgJ3JhcnJoazsnOiAnXHUyMWFhJywKICAgICdyYXJybHA7JzogJ1x1MjFhYycsCiAgICAncmFycnBsOyc6ICdcdTI5NDUnLAogICAgJ3JhcnJzaW07JzogJ1x1Mjk3NCcsCiAgICAnUmFycnRsOyc6ICdcdTI5MTYnLAogICAgJ3JhcnJ0bDsnOiAnXHUyMWEzJywKICAgICdyYXJydzsnOiAnXHUyMTlkJywKICAgICdyQXRhaWw7JzogJ1x1MjkxYycsCiAgICAncmF0YWlsOyc6ICdcdTI5MWEnLAogICAgJ3JhdGlvOyc6ICdcdTIyMzYnLAogICAgJ3JhdGlvbmFsczsnOiAnXHUyMTFhJywKICAgICdSQmFycjsnOiAnXHUyOTEwJywKICAgICdyQmFycjsnOiAnXHUyOTBmJywKICAgICdyYmFycjsnOiAnXHUyOTBkJywKICAgICdyYmJyazsnOiAnXHUyNzczJywKICAgICdyYnJhY2U7JzogJ30nLAogICAgJ3JicmFjazsnOiAnXScsCiAgICAncmJya2U7JzogJ1x1Mjk4YycsCiAgICAncmJya3NsZDsnOiAnXHUyOThlJywKICAgICdyYnJrc2x1Oyc6ICdcdTI5OTAnLAogICAgJ1JjYXJvbjsnOiAnXHUwMTU4JywKICAgICdyY2Fyb247JzogJ1x1MDE1OScsCiAgICAnUmNlZGlsOyc6ICdcdTAxNTYnLAogICAgJ3JjZWRpbDsnOiAnXHUwMTU3JywKICAgICdyY2VpbDsnOiAnXHUyMzA5JywKICAgICdyY3ViOyc6ICd9JywKICAgICdSY3k7JzogJ1x1MDQyMCcsCiAgICAncmN5Oyc6ICdcdTA0NDAnLAogICAgJ3JkY2E7JzogJ1x1MjkzNycsCiAgICAncmRsZGhhcjsnOiAnXHUyOTY5JywKICAgICdyZHF1bzsnOiAnXHUyMDFkJywKICAgICdyZHF1b3I7JzogJ1x1MjAxZCcsCiAgICAncmRzaDsnOiAnXHUyMWIzJywKICAgICdSZTsnOiAnXHUyMTFjJywKICAgICdyZWFsOyc6ICdcdTIxMWMnLAogICAgJ3JlYWxpbmU7JzogJ1x1MjExYicsCiAgICAncmVhbHBhcnQ7JzogJ1x1MjExYycsCiAgICAncmVhbHM7JzogJ1x1MjExZCcsCiAgICAncmVjdDsnOiAnXHUyNWFkJywKICAgICdSRUcnOiAnXHhhZScsCiAgICAncmVnJzogJ1x4YWUnLAogICAgJ1JFRzsnOiAnXHhhZScsCiAgICAncmVnOyc6ICdceGFlJywKICAgICdSZXZlcnNlRWxlbWVudDsnOiAnXHUyMjBiJywKICAgICdSZXZlcnNlRXF1aWxpYnJpdW07JzogJ1x1MjFjYicsCiAgICAnUmV2ZXJzZVVwRXF1aWxpYnJpdW07JzogJ1x1Mjk2ZicsCiAgICAncmZpc2h0Oyc6ICdcdTI5N2QnLAogICAgJ3JmbG9vcjsnOiAnXHUyMzBiJywKICAgICdSZnI7JzogJ1x1MjExYycsCiAgICAncmZyOyc6ICdcVTAwMDFkNTJmJywKICAgICdySGFyOyc6ICdcdTI5NjQnLAogICAgJ3JoYXJkOyc6ICdcdTIxYzEnLAogICAgJ3JoYXJ1Oyc6ICdcdTIxYzAnLAogICAgJ3JoYXJ1bDsnOiAnXHUyOTZjJywKICAgICdSaG87JzogJ1x1MDNhMScsCiAgICAncmhvOyc6ICdcdTAzYzEnLAogICAgJ3Job3Y7JzogJ1x1MDNmMScsCiAgICAnUmlnaHRBbmdsZUJyYWNrZXQ7JzogJ1x1MjdlOScsCiAgICAnUmlnaHRBcnJvdzsnOiAnXHUyMTkyJywKICAgICdSaWdodGFycm93Oyc6ICdcdTIxZDInLAogICAgJ3JpZ2h0YXJyb3c7JzogJ1x1MjE5MicsCiAgICAnUmlnaHRBcnJvd0JhcjsnOiAnXHUyMWU1JywKICAgICdSaWdodEFycm93TGVmdEFycm93Oyc6ICdcdTIxYzQnLAogICAgJ3JpZ2h0YXJyb3d0YWlsOyc6ICdcdTIxYTMnLAogICAgJ1JpZ2h0Q2VpbGluZzsnOiAnXHUyMzA5JywKICAgICdSaWdodERvdWJsZUJyYWNrZXQ7JzogJ1x1MjdlNycsCiAgICAnUmlnaHREb3duVGVlVmVjdG9yOyc6ICdcdTI5NWQnLAogICAgJ1JpZ2h0RG93blZlY3RvcjsnOiAnXHUyMWMyJywKICAgICdSaWdodERvd25WZWN0b3JCYXI7JzogJ1x1Mjk1NScsCiAgICAnUmlnaHRGbG9vcjsnOiAnXHUyMzBiJywKICAgICdyaWdodGhhcnBvb25kb3duOyc6ICdcdTIxYzEnLAogICAgJ3JpZ2h0aGFycG9vbnVwOyc6ICdcdTIxYzAnLAogICAgJ3JpZ2h0bGVmdGFycm93czsnOiAnXHUyMWM0JywKICAgICdyaWdodGxlZnRoYXJwb29uczsnOiAnXHUyMWNjJywKICAgICdyaWdodHJpZ2h0YXJyb3dzOyc6ICdcdTIxYzknLAogICAgJ3JpZ2h0c3F1aWdhcnJvdzsnOiAnXHUyMTlkJywKICAgICdSaWdodFRlZTsnOiAnXHUyMmEyJywKICAgICdSaWdodFRlZUFycm93Oyc6ICdcdTIxYTYnLAogICAgJ1JpZ2h0VGVlVmVjdG9yOyc6ICdcdTI5NWInLAogICAgJ3JpZ2h0dGhyZWV0aW1lczsnOiAnXHUyMmNjJywKICAgICdSaWdodFRyaWFuZ2xlOyc6ICdcdTIyYjMnLAogICAgJ1JpZ2h0VHJpYW5nbGVCYXI7JzogJ1x1MjlkMCcsCiAgICAnUmlnaHRUcmlhbmdsZUVxdWFsOyc6ICdcdTIyYjUnLAogICAgJ1JpZ2h0VXBEb3duVmVjdG9yOyc6ICdcdTI5NGYnLAogICAgJ1JpZ2h0VXBUZWVWZWN0b3I7JzogJ1x1Mjk1YycsCiAgICAnUmlnaHRVcFZlY3RvcjsnOiAnXHUyMWJlJywKICAgICdSaWdodFVwVmVjdG9yQmFyOyc6ICdcdTI5NTQnLAogICAgJ1JpZ2h0VmVjdG9yOyc6ICdcdTIxYzAnLAogICAgJ1JpZ2h0VmVjdG9yQmFyOyc6ICdcdTI5NTMnLAogICAgJ3Jpbmc7JzogJ1x1MDJkYScsCiAgICAncmlzaW5nZG90c2VxOyc6ICdcdTIyNTMnLAogICAgJ3JsYXJyOyc6ICdcdTIxYzQnLAogICAgJ3JsaGFyOyc6ICdcdTIxY2MnLAogICAgJ3JsbTsnOiAnXHUyMDBmJywKICAgICdybW91c3Q7JzogJ1x1MjNiMScsCiAgICAncm1vdXN0YWNoZTsnOiAnXHUyM2IxJywKICAgICdybm1pZDsnOiAnXHUyYWVlJywKICAgICdyb2FuZzsnOiAnXHUyN2VkJywKICAgICdyb2FycjsnOiAnXHUyMWZlJywKICAgICdyb2JyazsnOiAnXHUyN2U3JywKICAgICdyb3BhcjsnOiAnXHUyOTg2JywKICAgICdSb3BmOyc6ICdcdTIxMWQnLAogICAgJ3JvcGY7JzogJ1xVMDAwMWQ1NjMnLAogICAgJ3JvcGx1czsnOiAnXHUyYTJlJywKICAgICdyb3RpbWVzOyc6ICdcdTJhMzUnLAogICAgJ1JvdW5kSW1wbGllczsnOiAnXHUyOTcwJywKICAgICdycGFyOyc6ICcpJywKICAgICdycGFyZ3Q7JzogJ1x1Mjk5NCcsCiAgICAncnBwb2xpbnQ7JzogJ1x1MmExMicsCiAgICAncnJhcnI7JzogJ1x1MjFjOScsCiAgICAnUnJpZ2h0YXJyb3c7JzogJ1x1MjFkYicsCiAgICAncnNhcXVvOyc6ICdcdTIwM2EnLAogICAgJ1JzY3I7JzogJ1x1MjExYicsCiAgICAncnNjcjsnOiAnXFUwMDAxZDRjNycsCiAgICAnUnNoOyc6ICdcdTIxYjEnLAogICAgJ3JzaDsnOiAnXHUyMWIxJywKICAgICdyc3FiOyc6ICddJywKICAgICdyc3F1bzsnOiAnXHUyMDE5JywKICAgICdyc3F1b3I7JzogJ1x1MjAxOScsCiAgICAncnRocmVlOyc6ICdcdTIyY2MnLAogICAgJ3J0aW1lczsnOiAnXHUyMmNhJywKICAgICdydHJpOyc6ICdcdTI1YjknLAogICAgJ3J0cmllOyc6ICdcdTIyYjUnLAogICAgJ3J0cmlmOyc6ICdcdTI1YjgnLAogICAgJ3J0cmlsdHJpOyc6ICdcdTI5Y2UnLAogICAgJ1J1bGVEZWxheWVkOyc6ICdcdTI5ZjQnLAogICAgJ3J1bHVoYXI7JzogJ1x1Mjk2OCcsCiAgICAncng7JzogJ1x1MjExZScsCiAgICAnU2FjdXRlOyc6ICdcdTAxNWEnLAogICAgJ3NhY3V0ZTsnOiAnXHUwMTViJywKICAgICdzYnF1bzsnOiAnXHUyMDFhJywKICAgICdTYzsnOiAnXHUyYWJjJywKICAgICdzYzsnOiAnXHUyMjdiJywKICAgICdzY2FwOyc6ICdcdTJhYjgnLAogICAgJ1NjYXJvbjsnOiAnXHUwMTYwJywKICAgICdzY2Fyb247JzogJ1x1MDE2MScsCiAgICAnc2NjdWU7JzogJ1x1MjI3ZCcsCiAgICAnc2NFOyc6ICdcdTJhYjQnLAogICAgJ3NjZTsnOiAnXHUyYWIwJywKICAgICdTY2VkaWw7JzogJ1x1MDE1ZScsCiAgICAnc2NlZGlsOyc6ICdcdTAxNWYnLAogICAgJ1NjaXJjOyc6ICdcdTAxNWMnLAogICAgJ3NjaXJjOyc6ICdcdTAxNWQnLAogICAgJ3NjbmFwOyc6ICdcdTJhYmEnLAogICAgJ3NjbkU7JzogJ1x1MmFiNicsCiAgICAnc2Nuc2ltOyc6ICdcdTIyZTknLAogICAgJ3NjcG9saW50Oyc6ICdcdTJhMTMnLAogICAgJ3Njc2ltOyc6ICdcdTIyN2YnLAogICAgJ1NjeTsnOiAnXHUwNDIxJywKICAgICdzY3k7JzogJ1x1MDQ0MScsCiAgICAnc2RvdDsnOiAnXHUyMmM1JywKICAgICdzZG90YjsnOiAnXHUyMmExJywKICAgICdzZG90ZTsnOiAnXHUyYTY2JywKICAgICdzZWFyaGs7JzogJ1x1MjkyNScsCiAgICAnc2VBcnI7JzogJ1x1MjFkOCcsCiAgICAnc2VhcnI7JzogJ1x1MjE5OCcsCiAgICAnc2VhcnJvdzsnOiAnXHUyMTk4JywKICAgICdzZWN0JzogJ1x4YTcnLAogICAgJ3NlY3Q7JzogJ1x4YTcnLAogICAgJ3NlbWk7JzogJzsnLAogICAgJ3Nlc3dhcjsnOiAnXHUyOTI5JywKICAgICdzZXRtaW51czsnOiAnXHUyMjE2JywKICAgICdzZXRtbjsnOiAnXHUyMjE2JywKICAgICdzZXh0Oyc6ICdcdTI3MzYnLAogICAgJ1NmcjsnOiAnXFUwMDAxZDUxNicsCiAgICAnc2ZyOyc6ICdcVTAwMDFkNTMwJywKICAgICdzZnJvd247JzogJ1x1MjMyMicsCiAgICAnc2hhcnA7JzogJ1x1MjY2ZicsCiAgICAnU0hDSGN5Oyc6ICdcdTA0MjknLAogICAgJ3NoY2hjeTsnOiAnXHUwNDQ5JywKICAgICdTSGN5Oyc6ICdcdTA0MjgnLAogICAgJ3NoY3k7JzogJ1x1MDQ0OCcsCiAgICAnU2hvcnREb3duQXJyb3c7JzogJ1x1MjE5MycsCiAgICAnU2hvcnRMZWZ0QXJyb3c7JzogJ1x1MjE5MCcsCiAgICAnc2hvcnRtaWQ7JzogJ1x1MjIyMycsCiAgICAnc2hvcnRwYXJhbGxlbDsnOiAnXHUyMjI1JywKICAgICdTaG9ydFJpZ2h0QXJyb3c7JzogJ1x1MjE5MicsCiAgICAnU2hvcnRVcEFycm93Oyc6ICdcdTIxOTEnLAogICAgJ3NoeSc6ICdceGFkJywKICAgICdzaHk7JzogJ1x4YWQnLAogICAgJ1NpZ21hOyc6ICdcdTAzYTMnLAogICAgJ3NpZ21hOyc6ICdcdTAzYzMnLAogICAgJ3NpZ21hZjsnOiAnXHUwM2MyJywKICAgICdzaWdtYXY7JzogJ1x1MDNjMicsCiAgICAnc2ltOyc6ICdcdTIyM2MnLAogICAgJ3NpbWRvdDsnOiAnXHUyYTZhJywKICAgICdzaW1lOyc6ICdcdTIyNDMnLAogICAgJ3NpbWVxOyc6ICdcdTIyNDMnLAogICAgJ3NpbWc7JzogJ1x1MmE5ZScsCiAgICAnc2ltZ0U7JzogJ1x1MmFhMCcsCiAgICAnc2ltbDsnOiAnXHUyYTlkJywKICAgICdzaW1sRTsnOiAnXHUyYTlmJywKICAgICdzaW1uZTsnOiAnXHUyMjQ2JywKICAgICdzaW1wbHVzOyc6ICdcdTJhMjQnLAogICAgJ3NpbXJhcnI7JzogJ1x1Mjk3MicsCiAgICAnc2xhcnI7JzogJ1x1MjE5MCcsCiAgICAnU21hbGxDaXJjbGU7JzogJ1x1MjIxOCcsCiAgICAnc21hbGxzZXRtaW51czsnOiAnXHUyMjE2JywKICAgICdzbWFzaHA7JzogJ1x1MmEzMycsCiAgICAnc21lcGFyc2w7JzogJ1x1MjllNCcsCiAgICAnc21pZDsnOiAnXHUyMjIzJywKICAgICdzbWlsZTsnOiAnXHUyMzIzJywKICAgICdzbXQ7JzogJ1x1MmFhYScsCiAgICAnc210ZTsnOiAnXHUyYWFjJywKICAgICdzbXRlczsnOiAnXHUyYWFjXHVmZTAwJywKICAgICdTT0ZUY3k7JzogJ1x1MDQyYycsCiAgICAnc29mdGN5Oyc6ICdcdTA0NGMnLAogICAgJ3NvbDsnOiAnLycsCiAgICAnc29sYjsnOiAnXHUyOWM0JywKICAgICdzb2xiYXI7JzogJ1x1MjMzZicsCiAgICAnU29wZjsnOiAnXFUwMDAxZDU0YScsCiAgICAnc29wZjsnOiAnXFUwMDAxZDU2NCcsCiAgICAnc3BhZGVzOyc6ICdcdTI2NjAnLAogICAgJ3NwYWRlc3VpdDsnOiAnXHUyNjYwJywKICAgICdzcGFyOyc6ICdcdTIyMjUnLAogICAgJ3NxY2FwOyc6ICdcdTIyOTMnLAogICAgJ3NxY2FwczsnOiAnXHUyMjkzXHVmZTAwJywKICAgICdzcWN1cDsnOiAnXHUyMjk0JywKICAgICdzcWN1cHM7JzogJ1x1MjI5NFx1ZmUwMCcsCiAgICAnU3FydDsnOiAnXHUyMjFhJywKICAgICdzcXN1YjsnOiAnXHUyMjhmJywKICAgICdzcXN1YmU7JzogJ1x1MjI5MScsCiAgICAnc3FzdWJzZXQ7JzogJ1x1MjI4ZicsCiAgICAnc3FzdWJzZXRlcTsnOiAnXHUyMjkxJywKICAgICdzcXN1cDsnOiAnXHUyMjkwJywKICAgICdzcXN1cGU7JzogJ1x1MjI5MicsCiAgICAnc3FzdXBzZXQ7JzogJ1x1MjI5MCcsCiAgICAnc3FzdXBzZXRlcTsnOiAnXHUyMjkyJywKICAgICdzcXU7JzogJ1x1MjVhMScsCiAgICAnU3F1YXJlOyc6ICdcdTI1YTEnLAogICAgJ3NxdWFyZTsnOiAnXHUyNWExJywKICAgICdTcXVhcmVJbnRlcnNlY3Rpb247JzogJ1x1MjI5MycsCiAgICAnU3F1YXJlU3Vic2V0Oyc6ICdcdTIyOGYnLAogICAgJ1NxdWFyZVN1YnNldEVxdWFsOyc6ICdcdTIyOTEnLAogICAgJ1NxdWFyZVN1cGVyc2V0Oyc6ICdcdTIyOTAnLAogICAgJ1NxdWFyZVN1cGVyc2V0RXF1YWw7JzogJ1x1MjI5MicsCiAgICAnU3F1YXJlVW5pb247JzogJ1x1MjI5NCcsCiAgICAnc3F1YXJmOyc6ICdcdTI1YWEnLAogICAgJ3NxdWY7JzogJ1x1MjVhYScsCiAgICAnc3JhcnI7JzogJ1x1MjE5MicsCiAgICAnU3NjcjsnOiAnXFUwMDAxZDRhZScsCiAgICAnc3NjcjsnOiAnXFUwMDAxZDRjOCcsCiAgICAnc3NldG1uOyc6ICdcdTIyMTYnLAogICAgJ3NzbWlsZTsnOiAnXHUyMzIzJywKICAgICdzc3RhcmY7JzogJ1x1MjJjNicsCiAgICAnU3RhcjsnOiAnXHUyMmM2JywKICAgICdzdGFyOyc6ICdcdTI2MDYnLAogICAgJ3N0YXJmOyc6ICdcdTI2MDUnLAogICAgJ3N0cmFpZ2h0ZXBzaWxvbjsnOiAnXHUwM2Y1JywKICAgICdzdHJhaWdodHBoaTsnOiAnXHUwM2Q1JywKICAgICdzdHJuczsnOiAnXHhhZicsCiAgICAnU3ViOyc6ICdcdTIyZDAnLAogICAgJ3N1YjsnOiAnXHUyMjgyJywKICAgICdzdWJkb3Q7JzogJ1x1MmFiZCcsCiAgICAnc3ViRTsnOiAnXHUyYWM1JywKICAgICdzdWJlOyc6ICdcdTIyODYnLAogICAgJ3N1YmVkb3Q7JzogJ1x1MmFjMycsCiAgICAnc3VibXVsdDsnOiAnXHUyYWMxJywKICAgICdzdWJuRTsnOiAnXHUyYWNiJywKICAgICdzdWJuZTsnOiAnXHUyMjhhJywKICAgICdzdWJwbHVzOyc6ICdcdTJhYmYnLAogICAgJ3N1YnJhcnI7JzogJ1x1Mjk3OScsCiAgICAnU3Vic2V0Oyc6ICdcdTIyZDAnLAogICAgJ3N1YnNldDsnOiAnXHUyMjgyJywKICAgICdzdWJzZXRlcTsnOiAnXHUyMjg2JywKICAgICdzdWJzZXRlcXE7JzogJ1x1MmFjNScsCiAgICAnU3Vic2V0RXF1YWw7JzogJ1x1MjI4NicsCiAgICAnc3Vic2V0bmVxOyc6ICdcdTIyOGEnLAogICAgJ3N1YnNldG5lcXE7JzogJ1x1MmFjYicsCiAgICAnc3Vic2ltOyc6ICdcdTJhYzcnLAogICAgJ3N1YnN1YjsnOiAnXHUyYWQ1JywKICAgICdzdWJzdXA7JzogJ1x1MmFkMycsCiAgICAnc3VjYzsnOiAnXHUyMjdiJywKICAgICdzdWNjYXBwcm94Oyc6ICdcdTJhYjgnLAogICAgJ3N1Y2NjdXJseWVxOyc6ICdcdTIyN2QnLAogICAgJ1N1Y2NlZWRzOyc6ICdcdTIyN2InLAogICAgJ1N1Y2NlZWRzRXF1YWw7JzogJ1x1MmFiMCcsCiAgICAnU3VjY2VlZHNTbGFudEVxdWFsOyc6ICdcdTIyN2QnLAogICAgJ1N1Y2NlZWRzVGlsZGU7JzogJ1x1MjI3ZicsCiAgICAnc3VjY2VxOyc6ICdcdTJhYjAnLAogICAgJ3N1Y2NuYXBwcm94Oyc6ICdcdTJhYmEnLAogICAgJ3N1Y2NuZXFxOyc6ICdcdTJhYjYnLAogICAgJ3N1Y2Nuc2ltOyc6ICdcdTIyZTknLAogICAgJ3N1Y2NzaW07JzogJ1x1MjI3ZicsCiAgICAnU3VjaFRoYXQ7JzogJ1x1MjIwYicsCiAgICAnU3VtOyc6ICdcdTIyMTEnLAogICAgJ3N1bTsnOiAnXHUyMjExJywKICAgICdzdW5nOyc6ICdcdTI2NmEnLAogICAgJ3N1cDEnOiAnXHhiOScsCiAgICAnc3VwMTsnOiAnXHhiOScsCiAgICAnc3VwMic6ICdceGIyJywKICAgICdzdXAyOyc6ICdceGIyJywKICAgICdzdXAzJzogJ1x4YjMnLAogICAgJ3N1cDM7JzogJ1x4YjMnLAogICAgJ1N1cDsnOiAnXHUyMmQxJywKICAgICdzdXA7JzogJ1x1MjI4MycsCiAgICAnc3VwZG90Oyc6ICdcdTJhYmUnLAogICAgJ3N1cGRzdWI7JzogJ1x1MmFkOCcsCiAgICAnc3VwRTsnOiAnXHUyYWM2JywKICAgICdzdXBlOyc6ICdcdTIyODcnLAogICAgJ3N1cGVkb3Q7JzogJ1x1MmFjNCcsCiAgICAnU3VwZXJzZXQ7JzogJ1x1MjI4MycsCiAgICAnU3VwZXJzZXRFcXVhbDsnOiAnXHUyMjg3JywKICAgICdzdXBoc29sOyc6ICdcdTI3YzknLAogICAgJ3N1cGhzdWI7JzogJ1x1MmFkNycsCiAgICAnc3VwbGFycjsnOiAnXHUyOTdiJywKICAgICdzdXBtdWx0Oyc6ICdcdTJhYzInLAogICAgJ3N1cG5FOyc6ICdcdTJhY2MnLAogICAgJ3N1cG5lOyc6ICdcdTIyOGInLAogICAgJ3N1cHBsdXM7JzogJ1x1MmFjMCcsCiAgICAnU3Vwc2V0Oyc6ICdcdTIyZDEnLAogICAgJ3N1cHNldDsnOiAnXHUyMjgzJywKICAgICdzdXBzZXRlcTsnOiAnXHUyMjg3JywKICAgICdzdXBzZXRlcXE7JzogJ1x1MmFjNicsCiAgICAnc3Vwc2V0bmVxOyc6ICdcdTIyOGInLAogICAgJ3N1cHNldG5lcXE7JzogJ1x1MmFjYycsCiAgICAnc3Vwc2ltOyc6ICdcdTJhYzgnLAogICAgJ3N1cHN1YjsnOiAnXHUyYWQ0JywKICAgICdzdXBzdXA7JzogJ1x1MmFkNicsCiAgICAnc3dhcmhrOyc6ICdcdTI5MjYnLAogICAgJ3N3QXJyOyc6ICdcdTIxZDknLAogICAgJ3N3YXJyOyc6ICdcdTIxOTknLAogICAgJ3N3YXJyb3c7JzogJ1x1MjE5OScsCiAgICAnc3dud2FyOyc6ICdcdTI5MmEnLAogICAgJ3N6bGlnJzogJ1x4ZGYnLAogICAgJ3N6bGlnOyc6ICdceGRmJywKICAgICdUYWI7JzogJ1x0JywKICAgICd0YXJnZXQ7JzogJ1x1MjMxNicsCiAgICAnVGF1Oyc6ICdcdTAzYTQnLAogICAgJ3RhdTsnOiAnXHUwM2M0JywKICAgICd0YnJrOyc6ICdcdTIzYjQnLAogICAgJ1RjYXJvbjsnOiAnXHUwMTY0JywKICAgICd0Y2Fyb247JzogJ1x1MDE2NScsCiAgICAnVGNlZGlsOyc6ICdcdTAxNjInLAogICAgJ3RjZWRpbDsnOiAnXHUwMTYzJywKICAgICdUY3k7JzogJ1x1MDQyMicsCiAgICAndGN5Oyc6ICdcdTA0NDInLAogICAgJ3Rkb3Q7JzogJ1x1MjBkYicsCiAgICAndGVscmVjOyc6ICdcdTIzMTUnLAogICAgJ1RmcjsnOiAnXFUwMDAxZDUxNycsCiAgICAndGZyOyc6ICdcVTAwMDFkNTMxJywKICAgICd0aGVyZTQ7JzogJ1x1MjIzNCcsCiAgICAnVGhlcmVmb3JlOyc6ICdcdTIyMzQnLAogICAgJ3RoZXJlZm9yZTsnOiAnXHUyMjM0JywKICAgICdUaGV0YTsnOiAnXHUwMzk4JywKICAgICd0aGV0YTsnOiAnXHUwM2I4JywKICAgICd0aGV0YXN5bTsnOiAnXHUwM2QxJywKICAgICd0aGV0YXY7JzogJ1x1MDNkMScsCiAgICAndGhpY2thcHByb3g7JzogJ1x1MjI0OCcsCiAgICAndGhpY2tzaW07JzogJ1x1MjIzYycsCiAgICAnVGhpY2tTcGFjZTsnOiAnXHUyMDVmXHUyMDBhJywKICAgICd0aGluc3A7JzogJ1x1MjAwOScsCiAgICAnVGhpblNwYWNlOyc6ICdcdTIwMDknLAogICAgJ3Roa2FwOyc6ICdcdTIyNDgnLAogICAgJ3Roa3NpbTsnOiAnXHUyMjNjJywKICAgICdUSE9STic6ICdceGRlJywKICAgICd0aG9ybic6ICdceGZlJywKICAgICdUSE9STjsnOiAnXHhkZScsCiAgICAndGhvcm47JzogJ1x4ZmUnLAogICAgJ1RpbGRlOyc6ICdcdTIyM2MnLAogICAgJ3RpbGRlOyc6ICdcdTAyZGMnLAogICAgJ1RpbGRlRXF1YWw7JzogJ1x1MjI0MycsCiAgICAnVGlsZGVGdWxsRXF1YWw7JzogJ1x1MjI0NScsCiAgICAnVGlsZGVUaWxkZTsnOiAnXHUyMjQ4JywKICAgICd0aW1lcyc6ICdceGQ3JywKICAgICd0aW1lczsnOiAnXHhkNycsCiAgICAndGltZXNiOyc6ICdcdTIyYTAnLAogICAgJ3RpbWVzYmFyOyc6ICdcdTJhMzEnLAogICAgJ3RpbWVzZDsnOiAnXHUyYTMwJywKICAgICd0aW50Oyc6ICdcdTIyMmQnLAogICAgJ3RvZWE7JzogJ1x1MjkyOCcsCiAgICAndG9wOyc6ICdcdTIyYTQnLAogICAgJ3RvcGJvdDsnOiAnXHUyMzM2JywKICAgICd0b3BjaXI7JzogJ1x1MmFmMScsCiAgICAnVG9wZjsnOiAnXFUwMDAxZDU0YicsCiAgICAndG9wZjsnOiAnXFUwMDAxZDU2NScsCiAgICAndG9wZm9yazsnOiAnXHUyYWRhJywKICAgICd0b3NhOyc6ICdcdTI5MjknLAogICAgJ3RwcmltZTsnOiAnXHUyMDM0JywKICAgICdUUkFERTsnOiAnXHUyMTIyJywKICAgICd0cmFkZTsnOiAnXHUyMTIyJywKICAgICd0cmlhbmdsZTsnOiAnXHUyNWI1JywKICAgICd0cmlhbmdsZWRvd247JzogJ1x1MjViZicsCiAgICAndHJpYW5nbGVsZWZ0Oyc6ICdcdTI1YzMnLAogICAgJ3RyaWFuZ2xlbGVmdGVxOyc6ICdcdTIyYjQnLAogICAgJ3RyaWFuZ2xlcTsnOiAnXHUyMjVjJywKICAgICd0cmlhbmdsZXJpZ2h0Oyc6ICdcdTI1YjknLAogICAgJ3RyaWFuZ2xlcmlnaHRlcTsnOiAnXHUyMmI1JywKICAgICd0cmlkb3Q7JzogJ1x1MjVlYycsCiAgICAndHJpZTsnOiAnXHUyMjVjJywKICAgICd0cmltaW51czsnOiAnXHUyYTNhJywKICAgICdUcmlwbGVEb3Q7JzogJ1x1MjBkYicsCiAgICAndHJpcGx1czsnOiAnXHUyYTM5JywKICAgICd0cmlzYjsnOiAnXHUyOWNkJywKICAgICd0cml0aW1lOyc6ICdcdTJhM2InLAogICAgJ3RycGV6aXVtOyc6ICdcdTIzZTInLAogICAgJ1RzY3I7JzogJ1xVMDAwMWQ0YWYnLAogICAgJ3RzY3I7JzogJ1xVMDAwMWQ0YzknLAogICAgJ1RTY3k7JzogJ1x1MDQyNicsCiAgICAndHNjeTsnOiAnXHUwNDQ2JywKICAgICdUU0hjeTsnOiAnXHUwNDBiJywKICAgICd0c2hjeTsnOiAnXHUwNDViJywKICAgICdUc3Ryb2s7JzogJ1x1MDE2NicsCiAgICAndHN0cm9rOyc6ICdcdTAxNjcnLAogICAgJ3R3aXh0Oyc6ICdcdTIyNmMnLAogICAgJ3R3b2hlYWRsZWZ0YXJyb3c7JzogJ1x1MjE5ZScsCiAgICAndHdvaGVhZHJpZ2h0YXJyb3c7JzogJ1x1MjFhMCcsCiAgICAnVWFjdXRlJzogJ1x4ZGEnLAogICAgJ3VhY3V0ZSc6ICdceGZhJywKICAgICdVYWN1dGU7JzogJ1x4ZGEnLAogICAgJ3VhY3V0ZTsnOiAnXHhmYScsCiAgICAnVWFycjsnOiAnXHUyMTlmJywKICAgICd1QXJyOyc6ICdcdTIxZDEnLAogICAgJ3VhcnI7JzogJ1x1MjE5MScsCiAgICAnVWFycm9jaXI7JzogJ1x1Mjk0OScsCiAgICAnVWJyY3k7JzogJ1x1MDQwZScsCiAgICAndWJyY3k7JzogJ1x1MDQ1ZScsCiAgICAnVWJyZXZlOyc6ICdcdTAxNmMnLAogICAgJ3VicmV2ZTsnOiAnXHUwMTZkJywKICAgICdVY2lyYyc6ICdceGRiJywKICAgICd1Y2lyYyc6ICdceGZiJywKICAgICdVY2lyYzsnOiAnXHhkYicsCiAgICAndWNpcmM7JzogJ1x4ZmInLAogICAgJ1VjeTsnOiAnXHUwNDIzJywKICAgICd1Y3k7JzogJ1x1MDQ0MycsCiAgICAndWRhcnI7JzogJ1x1MjFjNScsCiAgICAnVWRibGFjOyc6ICdcdTAxNzAnLAogICAgJ3VkYmxhYzsnOiAnXHUwMTcxJywKICAgICd1ZGhhcjsnOiAnXHUyOTZlJywKICAgICd1ZmlzaHQ7JzogJ1x1Mjk3ZScsCiAgICAnVWZyOyc6ICdcVTAwMDFkNTE4JywKICAgICd1ZnI7JzogJ1xVMDAwMWQ1MzInLAogICAgJ1VncmF2ZSc6ICdceGQ5JywKICAgICd1Z3JhdmUnOiAnXHhmOScsCiAgICAnVWdyYXZlOyc6ICdceGQ5JywKICAgICd1Z3JhdmU7JzogJ1x4ZjknLAogICAgJ3VIYXI7JzogJ1x1Mjk2MycsCiAgICAndWhhcmw7JzogJ1x1MjFiZicsCiAgICAndWhhcnI7JzogJ1x1MjFiZScsCiAgICAndWhibGs7JzogJ1x1MjU4MCcsCiAgICAndWxjb3JuOyc6ICdcdTIzMWMnLAogICAgJ3VsY29ybmVyOyc6ICdcdTIzMWMnLAogICAgJ3VsY3JvcDsnOiAnXHUyMzBmJywKICAgICd1bHRyaTsnOiAnXHUyNWY4JywKICAgICdVbWFjcjsnOiAnXHUwMTZhJywKICAgICd1bWFjcjsnOiAnXHUwMTZiJywKICAgICd1bWwnOiAnXHhhOCcsCiAgICAndW1sOyc6ICdceGE4JywKICAgICdVbmRlckJhcjsnOiAnXycsCiAgICAnVW5kZXJCcmFjZTsnOiAnXHUyM2RmJywKICAgICdVbmRlckJyYWNrZXQ7JzogJ1x1MjNiNScsCiAgICAnVW5kZXJQYXJlbnRoZXNpczsnOiAnXHUyM2RkJywKICAgICdVbmlvbjsnOiAnXHUyMmMzJywKICAgICdVbmlvblBsdXM7JzogJ1x1MjI4ZScsCiAgICAnVW9nb247JzogJ1x1MDE3MicsCiAgICAndW9nb247JzogJ1x1MDE3MycsCiAgICAnVW9wZjsnOiAnXFUwMDAxZDU0YycsCiAgICAndW9wZjsnOiAnXFUwMDAxZDU2NicsCiAgICAnVXBBcnJvdzsnOiAnXHUyMTkxJywKICAgICdVcGFycm93Oyc6ICdcdTIxZDEnLAogICAgJ3VwYXJyb3c7JzogJ1x1MjE5MScsCiAgICAnVXBBcnJvd0JhcjsnOiAnXHUyOTEyJywKICAgICdVcEFycm93RG93bkFycm93Oyc6ICdcdTIxYzUnLAogICAgJ1VwRG93bkFycm93Oyc6ICdcdTIxOTUnLAogICAgJ1VwZG93bmFycm93Oyc6ICdcdTIxZDUnLAogICAgJ3VwZG93bmFycm93Oyc6ICdcdTIxOTUnLAogICAgJ1VwRXF1aWxpYnJpdW07JzogJ1x1Mjk2ZScsCiAgICAndXBoYXJwb29ubGVmdDsnOiAnXHUyMWJmJywKICAgICd1cGhhcnBvb25yaWdodDsnOiAnXHUyMWJlJywKICAgICd1cGx1czsnOiAnXHUyMjhlJywKICAgICdVcHBlckxlZnRBcnJvdzsnOiAnXHUyMTk2JywKICAgICdVcHBlclJpZ2h0QXJyb3c7JzogJ1x1MjE5NycsCiAgICAnVXBzaTsnOiAnXHUwM2QyJywKICAgICd1cHNpOyc6ICdcdTAzYzUnLAogICAgJ3Vwc2loOyc6ICdcdTAzZDInLAogICAgJ1Vwc2lsb247JzogJ1x1MDNhNScsCiAgICAndXBzaWxvbjsnOiAnXHUwM2M1JywKICAgICdVcFRlZTsnOiAnXHUyMmE1JywKICAgICdVcFRlZUFycm93Oyc6ICdcdTIxYTUnLAogICAgJ3VwdXBhcnJvd3M7JzogJ1x1MjFjOCcsCiAgICAndXJjb3JuOyc6ICdcdTIzMWQnLAogICAgJ3VyY29ybmVyOyc6ICdcdTIzMWQnLAogICAgJ3VyY3JvcDsnOiAnXHUyMzBlJywKICAgICdVcmluZzsnOiAnXHUwMTZlJywKICAgICd1cmluZzsnOiAnXHUwMTZmJywKICAgICd1cnRyaTsnOiAnXHUyNWY5JywKICAgICdVc2NyOyc6ICdcVTAwMDFkNGIwJywKICAgICd1c2NyOyc6ICdcVTAwMDFkNGNhJywKICAgICd1dGRvdDsnOiAnXHUyMmYwJywKICAgICdVdGlsZGU7JzogJ1x1MDE2OCcsCiAgICAndXRpbGRlOyc6ICdcdTAxNjknLAogICAgJ3V0cmk7JzogJ1x1MjViNScsCiAgICAndXRyaWY7JzogJ1x1MjViNCcsCiAgICAndXVhcnI7JzogJ1x1MjFjOCcsCiAgICAnVXVtbCc6ICdceGRjJywKICAgICd1dW1sJzogJ1x4ZmMnLAogICAgJ1V1bWw7JzogJ1x4ZGMnLAogICAgJ3V1bWw7JzogJ1x4ZmMnLAogICAgJ3V3YW5nbGU7JzogJ1x1MjlhNycsCiAgICAndmFuZ3J0Oyc6ICdcdTI5OWMnLAogICAgJ3ZhcmVwc2lsb247JzogJ1x1MDNmNScsCiAgICAndmFya2FwcGE7JzogJ1x1MDNmMCcsCiAgICAndmFybm90aGluZzsnOiAnXHUyMjA1JywKICAgICd2YXJwaGk7JzogJ1x1MDNkNScsCiAgICAndmFycGk7JzogJ1x1MDNkNicsCiAgICAndmFycHJvcHRvOyc6ICdcdTIyMWQnLAogICAgJ3ZBcnI7JzogJ1x1MjFkNScsCiAgICAndmFycjsnOiAnXHUyMTk1JywKICAgICd2YXJyaG87JzogJ1x1MDNmMScsCiAgICAndmFyc2lnbWE7JzogJ1x1MDNjMicsCiAgICAndmFyc3Vic2V0bmVxOyc6ICdcdTIyOGFcdWZlMDAnLAogICAgJ3ZhcnN1YnNldG5lcXE7JzogJ1x1MmFjYlx1ZmUwMCcsCiAgICAndmFyc3Vwc2V0bmVxOyc6ICdcdTIyOGJcdWZlMDAnLAogICAgJ3ZhcnN1cHNldG5lcXE7JzogJ1x1MmFjY1x1ZmUwMCcsCiAgICAndmFydGhldGE7JzogJ1x1MDNkMScsCiAgICAndmFydHJpYW5nbGVsZWZ0Oyc6ICdcdTIyYjInLAogICAgJ3ZhcnRyaWFuZ2xlcmlnaHQ7JzogJ1x1MjJiMycsCiAgICAnVmJhcjsnOiAnXHUyYWViJywKICAgICd2QmFyOyc6ICdcdTJhZTgnLAogICAgJ3ZCYXJ2Oyc6ICdcdTJhZTknLAogICAgJ1ZjeTsnOiAnXHUwNDEyJywKICAgICd2Y3k7JzogJ1x1MDQzMicsCiAgICAnVkRhc2g7JzogJ1x1MjJhYicsCiAgICAnVmRhc2g7JzogJ1x1MjJhOScsCiAgICAndkRhc2g7JzogJ1x1MjJhOCcsCiAgICAndmRhc2g7JzogJ1x1MjJhMicsCiAgICAnVmRhc2hsOyc6ICdcdTJhZTYnLAogICAgJ1ZlZTsnOiAnXHUyMmMxJywKICAgICd2ZWU7JzogJ1x1MjIyOCcsCiAgICAndmVlYmFyOyc6ICdcdTIyYmInLAogICAgJ3ZlZWVxOyc6ICdcdTIyNWEnLAogICAgJ3ZlbGxpcDsnOiAnXHUyMmVlJywKICAgICdWZXJiYXI7JzogJ1x1MjAxNicsCiAgICAndmVyYmFyOyc6ICd8JywKICAgICdWZXJ0Oyc6ICdcdTIwMTYnLAogICAgJ3ZlcnQ7JzogJ3wnLAogICAgJ1ZlcnRpY2FsQmFyOyc6ICdcdTIyMjMnLAogICAgJ1ZlcnRpY2FsTGluZTsnOiAnfCcsCiAgICAnVmVydGljYWxTZXBhcmF0b3I7JzogJ1x1Mjc1OCcsCiAgICAnVmVydGljYWxUaWxkZTsnOiAnXHUyMjQwJywKICAgICdWZXJ5VGhpblNwYWNlOyc6ICdcdTIwMGEnLAogICAgJ1ZmcjsnOiAnXFUwMDAxZDUxOScsCiAgICAndmZyOyc6ICdcVTAwMDFkNTMzJywKICAgICd2bHRyaTsnOiAnXHUyMmIyJywKICAgICd2bnN1YjsnOiAnXHUyMjgyXHUyMGQyJywKICAgICd2bnN1cDsnOiAnXHUyMjgzXHUyMGQyJywKICAgICdWb3BmOyc6ICdcVTAwMDFkNTRkJywKICAgICd2b3BmOyc6ICdcVTAwMDFkNTY3JywKICAgICd2cHJvcDsnOiAnXHUyMjFkJywKICAgICd2cnRyaTsnOiAnXHUyMmIzJywKICAgICdWc2NyOyc6ICdcVTAwMDFkNGIxJywKICAgICd2c2NyOyc6ICdcVTAwMDFkNGNiJywKICAgICd2c3VibkU7JzogJ1x1MmFjYlx1ZmUwMCcsCiAgICAndnN1Ym5lOyc6ICdcdTIyOGFcdWZlMDAnLAogICAgJ3ZzdXBuRTsnOiAnXHUyYWNjXHVmZTAwJywKICAgICd2c3VwbmU7JzogJ1x1MjI4Ylx1ZmUwMCcsCiAgICAnVnZkYXNoOyc6ICdcdTIyYWEnLAogICAgJ3Z6aWd6YWc7JzogJ1x1Mjk5YScsCiAgICAnV2NpcmM7JzogJ1x1MDE3NCcsCiAgICAnd2NpcmM7JzogJ1x1MDE3NScsCiAgICAnd2VkYmFyOyc6ICdcdTJhNWYnLAogICAgJ1dlZGdlOyc6ICdcdTIyYzAnLAogICAgJ3dlZGdlOyc6ICdcdTIyMjcnLAogICAgJ3dlZGdlcTsnOiAnXHUyMjU5JywKICAgICd3ZWllcnA7JzogJ1x1MjExOCcsCiAgICAnV2ZyOyc6ICdcVTAwMDFkNTFhJywKICAgICd3ZnI7JzogJ1xVMDAwMWQ1MzQnLAogICAgJ1dvcGY7JzogJ1xVMDAwMWQ1NGUnLAogICAgJ3dvcGY7JzogJ1xVMDAwMWQ1NjgnLAogICAgJ3dwOyc6ICdcdTIxMTgnLAogICAgJ3dyOyc6ICdcdTIyNDAnLAogICAgJ3dyZWF0aDsnOiAnXHUyMjQwJywKICAgICdXc2NyOyc6ICdcVTAwMDFkNGIyJywKICAgICd3c2NyOyc6ICdcVTAwMDFkNGNjJywKICAgICd4Y2FwOyc6ICdcdTIyYzInLAogICAgJ3hjaXJjOyc6ICdcdTI1ZWYnLAogICAgJ3hjdXA7JzogJ1x1MjJjMycsCiAgICAneGR0cmk7JzogJ1x1MjViZCcsCiAgICAnWGZyOyc6ICdcVTAwMDFkNTFiJywKICAgICd4ZnI7JzogJ1xVMDAwMWQ1MzUnLAogICAgJ3hoQXJyOyc6ICdcdTI3ZmEnLAogICAgJ3hoYXJyOyc6ICdcdTI3ZjcnLAogICAgJ1hpOyc6ICdcdTAzOWUnLAogICAgJ3hpOyc6ICdcdTAzYmUnLAogICAgJ3hsQXJyOyc6ICdcdTI3ZjgnLAogICAgJ3hsYXJyOyc6ICdcdTI3ZjUnLAogICAgJ3htYXA7JzogJ1x1MjdmYycsCiAgICAneG5pczsnOiAnXHUyMmZiJywKICAgICd4b2RvdDsnOiAnXHUyYTAwJywKICAgICdYb3BmOyc6ICdcVTAwMDFkNTRmJywKICAgICd4b3BmOyc6ICdcVTAwMDFkNTY5JywKICAgICd4b3BsdXM7JzogJ1x1MmEwMScsCiAgICAneG90aW1lOyc6ICdcdTJhMDInLAogICAgJ3hyQXJyOyc6ICdcdTI3ZjknLAogICAgJ3hyYXJyOyc6ICdcdTI3ZjYnLAogICAgJ1hzY3I7JzogJ1xVMDAwMWQ0YjMnLAogICAgJ3hzY3I7JzogJ1xVMDAwMWQ0Y2QnLAogICAgJ3hzcWN1cDsnOiAnXHUyYTA2JywKICAgICd4dXBsdXM7JzogJ1x1MmEwNCcsCiAgICAneHV0cmk7JzogJ1x1MjViMycsCiAgICAneHZlZTsnOiAnXHUyMmMxJywKICAgICd4d2VkZ2U7JzogJ1x1MjJjMCcsCiAgICAnWWFjdXRlJzogJ1x4ZGQnLAogICAgJ3lhY3V0ZSc6ICdceGZkJywKICAgICdZYWN1dGU7JzogJ1x4ZGQnLAogICAgJ3lhY3V0ZTsnOiAnXHhmZCcsCiAgICAnWUFjeTsnOiAnXHUwNDJmJywKICAgICd5YWN5Oyc6ICdcdTA0NGYnLAogICAgJ1ljaXJjOyc6ICdcdTAxNzYnLAogICAgJ3ljaXJjOyc6ICdcdTAxNzcnLAogICAgJ1ljeTsnOiAnXHUwNDJiJywKICAgICd5Y3k7JzogJ1x1MDQ0YicsCiAgICAneWVuJzogJ1x4YTUnLAogICAgJ3llbjsnOiAnXHhhNScsCiAgICAnWWZyOyc6ICdcVTAwMDFkNTFjJywKICAgICd5ZnI7JzogJ1xVMDAwMWQ1MzYnLAogICAgJ1lJY3k7JzogJ1x1MDQwNycsCiAgICAneWljeTsnOiAnXHUwNDU3JywKICAgICdZb3BmOyc6ICdcVTAwMDFkNTUwJywKICAgICd5b3BmOyc6ICdcVTAwMDFkNTZhJywKICAgICdZc2NyOyc6ICdcVTAwMDFkNGI0JywKICAgICd5c2NyOyc6ICdcVTAwMDFkNGNlJywKICAgICdZVWN5Oyc6ICdcdTA0MmUnLAogICAgJ3l1Y3k7JzogJ1x1MDQ0ZScsCiAgICAneXVtbCc6ICdceGZmJywKICAgICdZdW1sOyc6ICdcdTAxNzgnLAogICAgJ3l1bWw7JzogJ1x4ZmYnLAogICAgJ1phY3V0ZTsnOiAnXHUwMTc5JywKICAgICd6YWN1dGU7JzogJ1x1MDE3YScsCiAgICAnWmNhcm9uOyc6ICdcdTAxN2QnLAogICAgJ3pjYXJvbjsnOiAnXHUwMTdlJywKICAgICdaY3k7JzogJ1x1MDQxNycsCiAgICAnemN5Oyc6ICdcdTA0MzcnLAogICAgJ1pkb3Q7JzogJ1x1MDE3YicsCiAgICAnemRvdDsnOiAnXHUwMTdjJywKICAgICd6ZWV0cmY7JzogJ1x1MjEyOCcsCiAgICAnWmVyb1dpZHRoU3BhY2U7JzogJ1x1MjAwYicsCiAgICAnWmV0YTsnOiAnXHUwMzk2JywKICAgICd6ZXRhOyc6ICdcdTAzYjYnLAogICAgJ1pmcjsnOiAnXHUyMTI4JywKICAgICd6ZnI7JzogJ1xVMDAwMWQ1MzcnLAogICAgJ1pIY3k7JzogJ1x1MDQxNicsCiAgICAnemhjeTsnOiAnXHUwNDM2JywKICAgICd6aWdyYXJyOyc6ICdcdTIxZGQnLAogICAgJ1pvcGY7JzogJ1x1MjEyNCcsCiAgICAnem9wZjsnOiAnXFUwMDAxZDU2YicsCiAgICAnWnNjcjsnOiAnXFUwMDAxZDRiNScsCiAgICAnenNjcjsnOiAnXFUwMDAxZDRjZicsCiAgICAnendqOyc6ICdcdTIwMGQnLAogICAgJ3p3bmo7JzogJ1x1MjAwYycsCn0KCiMgbWFwcyB0aGUgVW5pY29kZSBjb2RlcG9pbnQgdG8gdGhlIEhUTUwgZW50aXR5IG5hbWUKY29kZXBvaW50Mm5hbWUgPSB7fQoKIyBtYXBzIHRoZSBIVE1MIGVudGl0eSBuYW1lIHRvIHRoZSBjaGFyYWN0ZXIKIyAob3IgYSBjaGFyYWN0ZXIgcmVmZXJlbmNlIGlmIHRoZSBjaGFyYWN0ZXIgaXMgb3V0c2lkZSB0aGUgTGF0aW4tMSByYW5nZSkKZW50aXR5ZGVmcyA9IHt9Cgpmb3IgKG5hbWUsIGNvZGVwb2ludCkgaW4gbmFtZTJjb2RlcG9pbnQuaXRlbXMoKToKICAgIGNvZGVwb2ludDJuYW1lW2NvZGVwb2ludF0gPSBuYW1lCiAgICBlbnRpdHlkZWZzW25hbWVdID0gY2hyKGNvZGVwb2ludCkKCmRlbCBuYW1lLCBjb2RlcG9pbnQK',
'/Lib/html/parser.py':'IiIiQSBwYXJzZXIgZm9yIEhUTUwgYW5kIFhIVE1MLiIiIgoKIyBUaGlzIGZpbGUgaXMgYmFzZWQgb24gc2dtbGxpYi5weSwgYnV0IHRoZSBBUEkgaXMgc2xpZ2h0bHkgZGlmZmVyZW50LgoKIyBYWFggVGhlcmUgc2hvdWxkIGJlIGEgd2F5IHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gUENEQVRBIChwYXJzZWQKIyBjaGFyYWN0ZXIgZGF0YSAtLSB0aGUgbm9ybWFsIGNhc2UpLCBSQ0RBVEEgKHJlcGxhY2VhYmxlIGNoYXJhY3RlcgojIGRhdGEgLS0gb25seSBjaGFyIGFuZCBlbnRpdHkgcmVmZXJlbmNlcyBhbmQgZW5kIHRhZ3MgYXJlIHNwZWNpYWwpCiMgYW5kIENEQVRBIChjaGFyYWN0ZXIgZGF0YSAtLSBvbmx5IGVuZCB0YWdzIGFyZSBzcGVjaWFsKS4KCgppbXBvcnQgX21hcmt1cGJhc2UKaW1wb3J0IHJlCmltcG9ydCB3YXJuaW5ncwoKIyBSZWd1bGFyIGV4cHJlc3Npb25zIHVzZWQgZm9yIHBhcnNpbmcKCmludGVyZXN0aW5nX25vcm1hbCA9IHJlLmNvbXBpbGUoJ1smPF0nKQppbmNvbXBsZXRlID0gcmUuY29tcGlsZSgnJlthLXpBLVojXScpCgplbnRpdHlyZWYgPSByZS5jb21waWxlKCcmKFthLXpBLVpdWy0uYS16QS1aMC05XSopW15hLXpBLVowLTldJykKY2hhcnJlZiA9IHJlLmNvbXBpbGUoJyYjKD86WzAtOV0rfFt4WF1bMC05YS1mQS1GXSspW14wLTlhLWZBLUZdJykKCnN0YXJ0dGFnb3BlbiA9IHJlLmNvbXBpbGUoJzxbYS16QS1aXScpCnBpY2xvc2UgPSByZS5jb21waWxlKCc+JykKY29tbWVudGNsb3NlID0gcmUuY29tcGlsZShyJy0tXHMqPicpCnRhZ2ZpbmQgPSByZS5jb21waWxlKCcoW2EtekEtWl1bLS5hLXpBLVowLTk6X10qKSg/OlxzfC8oPyE+KSkqJykKIyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvdG9rZW5pemF0aW9uLmh0bWwjdGFnLW9wZW4tc3RhdGUKIyBhbmQgaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvdG9rZW5pemF0aW9uLmh0bWwjdGFnLW5hbWUtc3RhdGUKdGFnZmluZF90b2xlcmFudCA9IHJlLmNvbXBpbGUoJ1thLXpBLVpdW15cdFxuXHJcZiAvPlx4MDBdKicpCiMgTm90ZToKIyAgMSkgdGhlIHN0cmljdCBhdHRyZmluZCBpc24ndCByZWFsbHkgc3RyaWN0LCBidXQgd2UgY2FuJ3QgbWFrZSBpdAojICAgICBjb3JyZWN0bHkgc3RyaWN0IHdpdGhvdXQgYnJlYWtpbmcgYmFja3dhcmQgY29tcGF0aWJpbGl0eTsKIyAgMikgaWYgeW91IGNoYW5nZSBhdHRyZmluZCByZW1lbWJlciB0byB1cGRhdGUgbG9jYXRlc3RhcnR0YWdlbmQgdG9vOwojICAzKSBpZiB5b3UgY2hhbmdlIGF0dHJmaW5kIGFuZC9vciBsb2NhdGVzdGFydHRhZ2VuZCB0aGUgcGFyc2VyIHdpbGwKIyAgICAgZXhwbG9kZSwgc28gZG9uJ3QgZG8gaXQuCmF0dHJmaW5kID0gcmUuY29tcGlsZSgKICAgIHInXHMqKFthLXpBLVpfXVstLjphLXpBLVpfMC05XSopKFxzKj1ccyonCiAgICByJyhcJ1teXCddKlwnfCJbXiJdKiJ8W15ccyJcJz08PmBdKikpPycpCmF0dHJmaW5kX3RvbGVyYW50ID0gcmUuY29tcGlsZSgKICAgIHInKCg/PD1bXCciXHMvXSlbXlxzLz5dW15ccy89Pl0qKShccyo9K1xzKicKICAgIHInKFwnW15cJ10qXCd8IlteIl0qInwoPyFbXCciXSlbXj5cc10qKSk/KD86XHN8Lyg/IT4pKSonKQpsb2NhdGVzdGFydHRhZ2VuZCA9IHJlLmNvbXBpbGUociIiIgogIDxbYS16QS1aXVstLmEtekEtWjAtOTpfXSogICAgICAgICAgIyB0YWcgbmFtZQogICg/OlxzKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyB3aGl0ZXNwYWNlIGJlZm9yZSBhdHRyaWJ1dGUgbmFtZQogICAgKD86W2EtekEtWl9dWy0uOmEtekEtWjAtOV9dKiAgICAgIyBhdHRyaWJ1dGUgbmFtZQogICAgICAoPzpccyo9XHMqICAgICAgICAgICAgICAgICAgICAgIyB2YWx1ZSBpbmRpY2F0b3IKICAgICAgICAoPzonW14nXSonICAgICAgICAgICAgICAgICAgICMgTElUQS1lbmNsb3NlZCB2YWx1ZQogICAgICAgICAgfFwiW15cIl0qXCIgICAgICAgICAgICAgICAgIyBMSVQtZW5jbG9zZWQgdmFsdWUKICAgICAgICAgIHxbXidcIj5cc10rICAgICAgICAgICAgICAgICMgYmFyZSB2YWx1ZQogICAgICAgICApCiAgICAgICApPwogICAgICkKICAgKSoKICBccyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgdHJhaWxpbmcgd2hpdGVzcGFjZQoiIiIsIHJlLlZFUkJPU0UpCmxvY2F0ZXN0YXJ0dGFnZW5kX3RvbGVyYW50ID0gcmUuY29tcGlsZShyIiIiCiAgPFthLXpBLVpdWy0uYS16QS1aMC05Ol9dKiAgICAgICAgICAjIHRhZyBuYW1lCiAgKD86W1xzL10qICAgICAgICAgICAgICAgICAgICAgICAgICAjIG9wdGlvbmFsIHdoaXRlc3BhY2UgYmVmb3JlIGF0dHJpYnV0ZSBuYW1lCiAgICAoPzooPzw9WyciXHMvXSlbXlxzLz5dW15ccy89Pl0qICAjIGF0dHJpYnV0ZSBuYW1lCiAgICAgICg/OlxzKj0rXHMqICAgICAgICAgICAgICAgICAgICAjIHZhbHVlIGluZGljYXRvcgogICAgICAgICg/OidbXiddKicgICAgICAgICAgICAgICAgICAgIyBMSVRBLWVuY2xvc2VkIHZhbHVlCiAgICAgICAgICB8IlteIl0qIiAgICAgICAgICAgICAgICAgICAjIExJVC1lbmNsb3NlZCB2YWx1ZQogICAgICAgICAgfCg/IVsnIl0pW14+XHNdKiAgICAgICAgICAgIyBiYXJlIHZhbHVlCiAgICAgICAgICkKICAgICAgICAgKD86XHMqLCkqICAgICAgICAgICAgICAgICAgICMgcG9zc2libHkgZm9sbG93ZWQgYnkgYSBjb21tYQogICAgICAgKT8oPzpcc3wvKD8hPikpKgogICAgICkqCiAgICk/CiAgXHMqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHRyYWlsaW5nIHdoaXRlc3BhY2UKIiIiLCByZS5WRVJCT1NFKQplbmRlbmR0YWcgPSByZS5jb21waWxlKCc+JykKIyB0aGUgSFRNTCA1IHNwZWMsIHNlY3Rpb24gOC4xLjIuMiwgZG9lc24ndCBhbGxvdyBzcGFjZXMgYmV0d2VlbgojIDwvIGFuZCB0aGUgdGFnIG5hbWUsIHNvIG1heWJlIHRoaXMgc2hvdWxkIGJlIGZpeGVkCmVuZHRhZ2ZpbmQgPSByZS5jb21waWxlKCc8L1xzKihbYS16QS1aXVstLmEtekEtWjAtOTpfXSopXHMqPicpCgoKY2xhc3MgSFRNTFBhcnNlRXJyb3IoRXhjZXB0aW9uKToKICAgICIiIkV4Y2VwdGlvbiByYWlzZWQgZm9yIGFsbCBwYXJzZSBlcnJvcnMuIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1zZywgcG9zaXRpb249KE5vbmUsIE5vbmUpKToKICAgICAgICBhc3NlcnQgbXNnCiAgICAgICAgc2VsZi5tc2cgPSBtc2cKICAgICAgICBzZWxmLmxpbmVubyA9IHBvc2l0aW9uWzBdCiAgICAgICAgc2VsZi5vZmZzZXQgPSBwb3NpdGlvblsxXQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJlc3VsdCA9IHNlbGYubXNnCiAgICAgICAgaWYgc2VsZi5saW5lbm8gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArICIsIGF0IGxpbmUgJWQiICUgc2VsZi5saW5lbm8KICAgICAgICBpZiBzZWxmLm9mZnNldCBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgIiwgY29sdW1uICVkIiAlIChzZWxmLm9mZnNldCArIDEpCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKCmNsYXNzIEhUTUxQYXJzZXIoX21hcmt1cGJhc2UuUGFyc2VyQmFzZSk6CiAgICAiIiJGaW5kIHRhZ3MgYW5kIG90aGVyIG1hcmt1cCBhbmQgY2FsbCBoYW5kbGVyIGZ1bmN0aW9ucy4KCiAgICBVc2FnZToKICAgICAgICBwID0gSFRNTFBhcnNlcigpCiAgICAgICAgcC5mZWVkKGRhdGEpCiAgICAgICAgLi4uCiAgICAgICAgcC5jbG9zZSgpCgogICAgU3RhcnQgdGFncyBhcmUgaGFuZGxlZCBieSBjYWxsaW5nIHNlbGYuaGFuZGxlX3N0YXJ0dGFnKCkgb3IKICAgIHNlbGYuaGFuZGxlX3N0YXJ0ZW5kdGFnKCk7IGVuZCB0YWdzIGJ5IHNlbGYuaGFuZGxlX2VuZHRhZygpLiAgVGhlCiAgICBkYXRhIGJldHdlZW4gdGFncyBpcyBwYXNzZWQgZnJvbSB0aGUgcGFyc2VyIHRvIHRoZSBkZXJpdmVkIGNsYXNzCiAgICBieSBjYWxsaW5nIHNlbGYuaGFuZGxlX2RhdGEoKSB3aXRoIHRoZSBkYXRhIGFzIGFyZ3VtZW50ICh0aGUgZGF0YQogICAgbWF5IGJlIHNwbGl0IHVwIGluIGFyYml0cmFyeSBjaHVua3MpLiAgRW50aXR5IHJlZmVyZW5jZXMgYXJlCiAgICBwYXNzZWQgYnkgY2FsbGluZyBzZWxmLmhhbmRsZV9lbnRpdHlyZWYoKSB3aXRoIHRoZSBlbnRpdHkKICAgIHJlZmVyZW5jZSBhcyB0aGUgYXJndW1lbnQuICBOdW1lcmljIGNoYXJhY3RlciByZWZlcmVuY2VzIGFyZQogICAgcGFzc2VkIHRvIHNlbGYuaGFuZGxlX2NoYXJyZWYoKSB3aXRoIHRoZSBzdHJpbmcgY29udGFpbmluZyB0aGUKICAgIHJlZmVyZW5jZSBhcyB0aGUgYXJndW1lbnQuCiAgICAiIiIKCiAgICBDREFUQV9DT05URU5UX0VMRU1FTlRTID0gKCJzY3JpcHQiLCAic3R5bGUiKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzdHJpY3Q9RmFsc2UpOgogICAgICAgICIiIkluaXRpYWxpemUgYW5kIHJlc2V0IHRoaXMgaW5zdGFuY2UuCgogICAgICAgIElmIHN0cmljdCBpcyBzZXQgdG8gRmFsc2UgKHRoZSBkZWZhdWx0KSB0aGUgcGFyc2VyIHdpbGwgcGFyc2UgaW52YWxpZAogICAgICAgIG1hcmt1cCwgb3RoZXJ3aXNlIGl0IHdpbGwgcmFpc2UgYW4gZXJyb3IuICBOb3RlIHRoYXQgdGhlIHN0cmljdCBtb2RlCiAgICAgICAgaXMgZGVwcmVjYXRlZC4KICAgICAgICAiIiIKICAgICAgICBpZiBzdHJpY3Q6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oIlRoZSBzdHJpY3QgbW9kZSBpcyBkZXByZWNhdGVkLiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTIpCiAgICAgICAgc2VsZi5zdHJpY3QgPSBzdHJpY3QKICAgICAgICBzZWxmLnJlc2V0KCkKCiAgICBkZWYgcmVzZXQoc2VsZik6CiAgICAgICAgIiIiUmVzZXQgdGhpcyBpbnN0YW5jZS4gIExvc2VzIGFsbCB1bnByb2Nlc3NlZCBkYXRhLiIiIgogICAgICAgIHNlbGYucmF3ZGF0YSA9ICcnCiAgICAgICAgc2VsZi5sYXN0dGFnID0gJz8/PycKICAgICAgICBzZWxmLmludGVyZXN0aW5nID0gaW50ZXJlc3Rpbmdfbm9ybWFsCiAgICAgICAgc2VsZi5jZGF0YV9lbGVtID0gTm9uZQogICAgICAgIF9tYXJrdXBiYXNlLlBhcnNlckJhc2UucmVzZXQoc2VsZikKCiAgICBkZWYgZmVlZChzZWxmLCBkYXRhKToKICAgICAgICByIiIiRmVlZCBkYXRhIHRvIHRoZSBwYXJzZXIuCgogICAgICAgIENhbGwgdGhpcyBhcyBvZnRlbiBhcyB5b3Ugd2FudCwgd2l0aCBhcyBsaXR0bGUgb3IgYXMgbXVjaCB0ZXh0CiAgICAgICAgYXMgeW91IHdhbnQgKG1heSBpbmNsdWRlICdcbicpLgogICAgICAgICIiIgogICAgICAgIHNlbGYucmF3ZGF0YSA9IHNlbGYucmF3ZGF0YSArIGRhdGEKICAgICAgICBzZWxmLmdvYWhlYWQoMCkKCiAgICBkZWYgY2xvc2Uoc2VsZik6CiAgICAgICAgIiIiSGFuZGxlIGFueSBidWZmZXJlZCBkYXRhLiIiIgogICAgICAgIHNlbGYuZ29haGVhZCgxKQoKICAgIGRlZiBlcnJvcihzZWxmLCBtZXNzYWdlKToKICAgICAgICByYWlzZSBIVE1MUGFyc2VFcnJvcihtZXNzYWdlLCBzZWxmLmdldHBvcygpKQoKICAgIF9fc3RhcnR0YWdfdGV4dCA9IE5vbmUKCiAgICBkZWYgZ2V0X3N0YXJ0dGFnX3RleHQoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGZ1bGwgc291cmNlIG9mIHN0YXJ0IHRhZzogJzwuLi4+Jy4iIiIKICAgICAgICByZXR1cm4gc2VsZi5fX3N0YXJ0dGFnX3RleHQKCiAgICBkZWYgc2V0X2NkYXRhX21vZGUoc2VsZiwgZWxlbSk6CiAgICAgICAgc2VsZi5jZGF0YV9lbGVtID0gZWxlbS5sb3dlcigpCiAgICAgICAgc2VsZi5pbnRlcmVzdGluZyA9IHJlLmNvbXBpbGUocic8L1xzKiVzXHMqPicgJSBzZWxmLmNkYXRhX2VsZW0sIHJlLkkpCgogICAgZGVmIGNsZWFyX2NkYXRhX21vZGUoc2VsZik6CiAgICAgICAgc2VsZi5pbnRlcmVzdGluZyA9IGludGVyZXN0aW5nX25vcm1hbAogICAgICAgIHNlbGYuY2RhdGFfZWxlbSA9IE5vbmUKCiAgICAjIEludGVybmFsIC0tIGhhbmRsZSBkYXRhIGFzIGZhciBhcyByZWFzb25hYmxlLiAgTWF5IGxlYXZlIHN0YXRlCiAgICAjIGFuZCBkYXRhIHRvIGJlIHByb2Nlc3NlZCBieSBhIHN1YnNlcXVlbnQgY2FsbC4gIElmICdlbmQnIGlzCiAgICAjIHRydWUsIGZvcmNlIGhhbmRsaW5nIGFsbCBkYXRhIGFzIGlmIGZvbGxvd2VkIGJ5IEVPRiBtYXJrZXIuCiAgICBkZWYgZ29haGVhZChzZWxmLCBlbmQpOgogICAgICAgIHJhd2RhdGEgPSBzZWxmLnJhd2RhdGEKICAgICAgICBpID0gMAogICAgICAgIG4gPSBsZW4ocmF3ZGF0YSkKICAgICAgICB3aGlsZSBpIDwgbjoKICAgICAgICAgICAgbWF0Y2ggPSBzZWxmLmludGVyZXN0aW5nLnNlYXJjaChyYXdkYXRhLCBpKSAjIDwgb3IgJgogICAgICAgICAgICBpZiBtYXRjaDoKICAgICAgICAgICAgICAgIGogPSBtYXRjaC5zdGFydCgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBzZWxmLmNkYXRhX2VsZW06CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGogPSBuCiAgICAgICAgICAgIGlmIGkgPCBqOiBzZWxmLmhhbmRsZV9kYXRhKHJhd2RhdGFbaTpqXSkKICAgICAgICAgICAgaSA9IHNlbGYudXBkYXRlcG9zKGksIGopCiAgICAgICAgICAgIGlmIGkgPT0gbjogYnJlYWsKICAgICAgICAgICAgc3RhcnRzd2l0aCA9IHJhd2RhdGEuc3RhcnRzd2l0aAogICAgICAgICAgICBpZiBzdGFydHN3aXRoKCc8JywgaSk6CiAgICAgICAgICAgICAgICBpZiBzdGFydHRhZ29wZW4ubWF0Y2gocmF3ZGF0YSwgaSk6ICMgPCArIGxldHRlcgogICAgICAgICAgICAgICAgICAgIGsgPSBzZWxmLnBhcnNlX3N0YXJ0dGFnKGkpCiAgICAgICAgICAgICAgICBlbGlmIHN0YXJ0c3dpdGgoIjwvIiwgaSk6CiAgICAgICAgICAgICAgICAgICAgayA9IHNlbGYucGFyc2VfZW5kdGFnKGkpCiAgICAgICAgICAgICAgICBlbGlmIHN0YXJ0c3dpdGgoIjwhLS0iLCBpKToKICAgICAgICAgICAgICAgICAgICBrID0gc2VsZi5wYXJzZV9jb21tZW50KGkpCiAgICAgICAgICAgICAgICBlbGlmIHN0YXJ0c3dpdGgoIjw/IiwgaSk6CiAgICAgICAgICAgICAgICAgICAgayA9IHNlbGYucGFyc2VfcGkoaSkKICAgICAgICAgICAgICAgIGVsaWYgc3RhcnRzd2l0aCgiPCEiLCBpKToKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnN0cmljdDoKICAgICAgICAgICAgICAgICAgICAgICAgayA9IHNlbGYucGFyc2VfZGVjbGFyYXRpb24oaSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBrID0gc2VsZi5wYXJzZV9odG1sX2RlY2xhcmF0aW9uKGkpCiAgICAgICAgICAgICAgICBlbGlmIChpICsgMSkgPCBuOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX2RhdGEoIjwiKQogICAgICAgICAgICAgICAgICAgIGsgPSBpICsgMQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgaWYgayA8IDA6CiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGVuZDoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnN0cmljdDoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvcigiRU9GIGluIG1pZGRsZSBvZiBjb25zdHJ1Y3QiKQogICAgICAgICAgICAgICAgICAgIGsgPSByYXdkYXRhLmZpbmQoJz4nLCBpICsgMSkKICAgICAgICAgICAgICAgICAgICBpZiBrIDwgMDoKICAgICAgICAgICAgICAgICAgICAgICAgayA9IHJhd2RhdGEuZmluZCgnPCcsIGkgKyAxKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBrIDwgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBpICsgMQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGsgKz0gMQogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX2RhdGEocmF3ZGF0YVtpOmtdKQogICAgICAgICAgICAgICAgaSA9IHNlbGYudXBkYXRlcG9zKGksIGspCiAgICAgICAgICAgIGVsaWYgc3RhcnRzd2l0aCgiJiMiLCBpKToKICAgICAgICAgICAgICAgIG1hdGNoID0gY2hhcnJlZi5tYXRjaChyYXdkYXRhLCBpKQogICAgICAgICAgICAgICAgaWYgbWF0Y2g6CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG1hdGNoLmdyb3VwKClbMjotMV0KICAgICAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZV9jaGFycmVmKG5hbWUpCiAgICAgICAgICAgICAgICAgICAgayA9IG1hdGNoLmVuZCgpCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHN0YXJ0c3dpdGgoJzsnLCBrLTEpOgogICAgICAgICAgICAgICAgICAgICAgICBrID0gayAtIDEKICAgICAgICAgICAgICAgICAgICBpID0gc2VsZi51cGRhdGVwb3MoaSwgaykKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiAiOyIgaW4gcmF3ZGF0YVtpOl06ICNiYWlsIGJ5IGNvbnN1bWluZyAmIwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZV9kYXRhKHJhd2RhdGFbMDoyXSkKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHNlbGYudXBkYXRlcG9zKGksIDIpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxpZiBzdGFydHN3aXRoKCcmJywgaSk6CiAgICAgICAgICAgICAgICBtYXRjaCA9IGVudGl0eXJlZi5tYXRjaChyYXdkYXRhLCBpKQogICAgICAgICAgICAgICAgaWYgbWF0Y2g6CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG1hdGNoLmdyb3VwKDEpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVfZW50aXR5cmVmKG5hbWUpCiAgICAgICAgICAgICAgICAgICAgayA9IG1hdGNoLmVuZCgpCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHN0YXJ0c3dpdGgoJzsnLCBrLTEpOgogICAgICAgICAgICAgICAgICAgICAgICBrID0gayAtIDEKICAgICAgICAgICAgICAgICAgICBpID0gc2VsZi51cGRhdGVwb3MoaSwgaykKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgbWF0Y2ggPSBpbmNvbXBsZXRlLm1hdGNoKHJhd2RhdGEsIGkpCiAgICAgICAgICAgICAgICBpZiBtYXRjaDoKICAgICAgICAgICAgICAgICAgICAjIG1hdGNoLmdyb3VwKCkgd2lsbCBjb250YWluIGF0IGxlYXN0IDIgY2hhcnMKICAgICAgICAgICAgICAgICAgICBpZiBlbmQgYW5kIG1hdGNoLmdyb3VwKCkgPT0gcmF3ZGF0YVtpOl06CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuc3RyaWN0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvcigiRU9GIGluIG1pZGRsZSBvZiBlbnRpdHkgb3IgY2hhciByZWYiKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgayA8PSBpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gc2VsZi51cGRhdGVwb3MoaSwgaSArIDEpCiAgICAgICAgICAgICAgICAgICAgIyBpbmNvbXBsZXRlCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsaWYgKGkgKyAxKSA8IG46CiAgICAgICAgICAgICAgICAgICAgIyBub3QgdGhlIGVuZCBvZiB0aGUgYnVmZmVyLCBhbmQgY2FuJ3QgYmUgY29uZnVzZWQKICAgICAgICAgICAgICAgICAgICAjIHdpdGggc29tZSBvdGhlciBjb25zdHJ1Y3QKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZV9kYXRhKCImIikKICAgICAgICAgICAgICAgICAgICBpID0gc2VsZi51cGRhdGVwb3MoaSwgaSArIDEpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhc3NlcnQgMCwgImludGVyZXN0aW5nLnNlYXJjaCgpIGxpZWQiCiAgICAgICAgIyBlbmQgd2hpbGUKICAgICAgICBpZiBlbmQgYW5kIGkgPCBuIGFuZCBub3Qgc2VsZi5jZGF0YV9lbGVtOgogICAgICAgICAgICBzZWxmLmhhbmRsZV9kYXRhKHJhd2RhdGFbaTpuXSkKICAgICAgICAgICAgaSA9IHNlbGYudXBkYXRlcG9zKGksIG4pCiAgICAgICAgc2VsZi5yYXdkYXRhID0gcmF3ZGF0YVtpOl0KCiAgICAjIEludGVybmFsIC0tIHBhcnNlIGh0bWwgZGVjbGFyYXRpb25zLCByZXR1cm4gbGVuZ3RoIG9yIC0xIGlmIG5vdCB0ZXJtaW5hdGVkCiAgICAjIFNlZSB3My5vcmcvVFIvaHRtbDUvdG9rZW5pemF0aW9uLmh0bWwjbWFya3VwLWRlY2xhcmF0aW9uLW9wZW4tc3RhdGUKICAgICMgU2VlIGFsc28gcGFyc2VfZGVjbGFyYXRpb24gaW4gX21hcmt1cGJhc2UKICAgIGRlZiBwYXJzZV9odG1sX2RlY2xhcmF0aW9uKHNlbGYsIGkpOgogICAgICAgIHJhd2RhdGEgPSBzZWxmLnJhd2RhdGEKICAgICAgICBhc3NlcnQgcmF3ZGF0YVtpOmkrMl0gPT0gJzwhJywgKCd1bmV4cGVjdGVkIGNhbGwgdG8gJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BhcnNlX2h0bWxfZGVjbGFyYXRpb24oKScpCiAgICAgICAgaWYgcmF3ZGF0YVtpOmkrNF0gPT0gJzwhLS0nOgogICAgICAgICAgICAjIHRoaXMgY2FzZSBpcyBhY3R1YWxseSBhbHJlYWR5IGhhbmRsZWQgaW4gZ29haGVhZCgpCiAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlX2NvbW1lbnQoaSkKICAgICAgICBlbGlmIHJhd2RhdGFbaTppKzNdID09ICc8IVsnOgogICAgICAgICAgICByZXR1cm4gc2VsZi5wYXJzZV9tYXJrZWRfc2VjdGlvbihpKQogICAgICAgIGVsaWYgcmF3ZGF0YVtpOmkrOV0ubG93ZXIoKSA9PSAnPCFkb2N0eXBlJzoKICAgICAgICAgICAgIyBmaW5kIHRoZSBjbG9zaW5nID4KICAgICAgICAgICAgZ3Rwb3MgPSByYXdkYXRhLmZpbmQoJz4nLCBpKzkpCiAgICAgICAgICAgIGlmIGd0cG9zID09IC0xOgogICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgIHNlbGYuaGFuZGxlX2RlY2wocmF3ZGF0YVtpKzI6Z3Rwb3NdKQogICAgICAgICAgICByZXR1cm4gZ3Rwb3MrMQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlX2JvZ3VzX2NvbW1lbnQoaSkKCiAgICAjIEludGVybmFsIC0tIHBhcnNlIGJvZ3VzIGNvbW1lbnQsIHJldHVybiBsZW5ndGggb3IgLTEgaWYgbm90IHRlcm1pbmF0ZWQKICAgICMgc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3Rva2VuaXphdGlvbi5odG1sI2JvZ3VzLWNvbW1lbnQtc3RhdGUKICAgIGRlZiBwYXJzZV9ib2d1c19jb21tZW50KHNlbGYsIGksIHJlcG9ydD0xKToKICAgICAgICByYXdkYXRhID0gc2VsZi5yYXdkYXRhCiAgICAgICAgYXNzZXJ0IHJhd2RhdGFbaTppKzJdIGluICgnPCEnLCAnPC8nKSwgKCd1bmV4cGVjdGVkIGNhbGwgdG8gJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGFyc2VfY29tbWVudCgpJykKICAgICAgICBwb3MgPSByYXdkYXRhLmZpbmQoJz4nLCBpKzIpCiAgICAgICAgaWYgcG9zID09IC0xOgogICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICBpZiByZXBvcnQ6CiAgICAgICAgICAgIHNlbGYuaGFuZGxlX2NvbW1lbnQocmF3ZGF0YVtpKzI6cG9zXSkKICAgICAgICByZXR1cm4gcG9zICsgMQoKICAgICMgSW50ZXJuYWwgLS0gcGFyc2UgcHJvY2Vzc2luZyBpbnN0ciwgcmV0dXJuIGVuZCBvciAtMSBpZiBub3QgdGVybWluYXRlZAogICAgZGVmIHBhcnNlX3BpKHNlbGYsIGkpOgogICAgICAgIHJhd2RhdGEgPSBzZWxmLnJhd2RhdGEKICAgICAgICBhc3NlcnQgcmF3ZGF0YVtpOmkrMl0gPT0gJzw/JywgJ3VuZXhwZWN0ZWQgY2FsbCB0byBwYXJzZV9waSgpJwogICAgICAgIG1hdGNoID0gcGljbG9zZS5zZWFyY2gocmF3ZGF0YSwgaSsyKSAjID4KICAgICAgICBpZiBub3QgbWF0Y2g6CiAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgIGogPSBtYXRjaC5zdGFydCgpCiAgICAgICAgc2VsZi5oYW5kbGVfcGkocmF3ZGF0YVtpKzI6IGpdKQogICAgICAgIGogPSBtYXRjaC5lbmQoKQogICAgICAgIHJldHVybiBqCgogICAgIyBJbnRlcm5hbCAtLSBoYW5kbGUgc3RhcnR0YWcsIHJldHVybiBlbmQgb3IgLTEgaWYgbm90IHRlcm1pbmF0ZWQKICAgIGRlZiBwYXJzZV9zdGFydHRhZyhzZWxmLCBpKToKICAgICAgICBzZWxmLl9fc3RhcnR0YWdfdGV4dCA9IE5vbmUKICAgICAgICBlbmRwb3MgPSBzZWxmLmNoZWNrX2Zvcl93aG9sZV9zdGFydF90YWcoaSkKICAgICAgICBpZiBlbmRwb3MgPCAwOgogICAgICAgICAgICByZXR1cm4gZW5kcG9zCiAgICAgICAgcmF3ZGF0YSA9IHNlbGYucmF3ZGF0YQogICAgICAgIHNlbGYuX19zdGFydHRhZ190ZXh0ID0gcmF3ZGF0YVtpOmVuZHBvc10KCiAgICAgICAgIyBOb3cgcGFyc2UgdGhlIGRhdGEgYmV0d2VlbiBpKzEgYW5kIGogaW50byBhIHRhZyBhbmQgYXR0cnMKICAgICAgICBhdHRycyA9IFtdCiAgICAgICAgbWF0Y2ggPSB0YWdmaW5kLm1hdGNoKHJhd2RhdGEsIGkrMSkKICAgICAgICBhc3NlcnQgbWF0Y2gsICd1bmV4cGVjdGVkIGNhbGwgdG8gcGFyc2Vfc3RhcnR0YWcoKScKICAgICAgICBrID0gbWF0Y2guZW5kKCkKICAgICAgICBzZWxmLmxhc3R0YWcgPSB0YWcgPSBtYXRjaC5ncm91cCgxKS5sb3dlcigpCiAgICAgICAgd2hpbGUgayA8IGVuZHBvczoKICAgICAgICAgICAgaWYgc2VsZi5zdHJpY3Q6CiAgICAgICAgICAgICAgICBtID0gYXR0cmZpbmQubWF0Y2gocmF3ZGF0YSwgaykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG0gPSBhdHRyZmluZF90b2xlcmFudC5tYXRjaChyYXdkYXRhLCBrKQogICAgICAgICAgICBpZiBub3QgbToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGF0dHJuYW1lLCByZXN0LCBhdHRydmFsdWUgPSBtLmdyb3VwKDEsIDIsIDMpCiAgICAgICAgICAgIGlmIG5vdCByZXN0OgogICAgICAgICAgICAgICAgYXR0cnZhbHVlID0gTm9uZQogICAgICAgICAgICBlbGlmIGF0dHJ2YWx1ZVs6MV0gPT0gJ1wnJyA9PSBhdHRydmFsdWVbLTE6XSBvciBcCiAgICAgICAgICAgICAgICAgYXR0cnZhbHVlWzoxXSA9PSAnIicgPT0gYXR0cnZhbHVlWy0xOl06CiAgICAgICAgICAgICAgICBhdHRydmFsdWUgPSBhdHRydmFsdWVbMTotMV0KICAgICAgICAgICAgaWYgYXR0cnZhbHVlOgogICAgICAgICAgICAgICAgYXR0cnZhbHVlID0gc2VsZi51bmVzY2FwZShhdHRydmFsdWUpCiAgICAgICAgICAgIGF0dHJzLmFwcGVuZCgoYXR0cm5hbWUubG93ZXIoKSwgYXR0cnZhbHVlKSkKICAgICAgICAgICAgayA9IG0uZW5kKCkKCiAgICAgICAgZW5kID0gcmF3ZGF0YVtrOmVuZHBvc10uc3RyaXAoKQogICAgICAgIGlmIGVuZCBub3QgaW4gKCI+IiwgIi8+Iik6CiAgICAgICAgICAgIGxpbmVubywgb2Zmc2V0ID0gc2VsZi5nZXRwb3MoKQogICAgICAgICAgICBpZiAiXG4iIGluIHNlbGYuX19zdGFydHRhZ190ZXh0OgogICAgICAgICAgICAgICAgbGluZW5vID0gbGluZW5vICsgc2VsZi5fX3N0YXJ0dGFnX3RleHQuY291bnQoIlxuIikKICAgICAgICAgICAgICAgIG9mZnNldCA9IGxlbihzZWxmLl9fc3RhcnR0YWdfdGV4dCkgXAogICAgICAgICAgICAgICAgICAgICAgICAgLSBzZWxmLl9fc3RhcnR0YWdfdGV4dC5yZmluZCgiXG4iKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgbGVuKHNlbGYuX19zdGFydHRhZ190ZXh0KQogICAgICAgICAgICBpZiBzZWxmLnN0cmljdDoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3IoImp1bmsgY2hhcmFjdGVycyBpbiBzdGFydCB0YWc6ICVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAlIChyYXdkYXRhW2s6ZW5kcG9zXVs6MjBdLCkpCiAgICAgICAgICAgIHNlbGYuaGFuZGxlX2RhdGEocmF3ZGF0YVtpOmVuZHBvc10pCiAgICAgICAgICAgIHJldHVybiBlbmRwb3MKICAgICAgICBpZiBlbmQuZW5kc3dpdGgoJy8+Jyk6CiAgICAgICAgICAgICMgWEhUTUwtc3R5bGUgZW1wdHkgdGFnOiA8c3BhbiBhdHRyPSJ2YWx1ZSIgLz4KICAgICAgICAgICAgc2VsZi5oYW5kbGVfc3RhcnRlbmR0YWcodGFnLCBhdHRycykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhbmRsZV9zdGFydHRhZyh0YWcsIGF0dHJzKQogICAgICAgICAgICBpZiB0YWcgaW4gc2VsZi5DREFUQV9DT05URU5UX0VMRU1FTlRTOgogICAgICAgICAgICAgICAgc2VsZi5zZXRfY2RhdGFfbW9kZSh0YWcpCiAgICAgICAgcmV0dXJuIGVuZHBvcwoKICAgICMgSW50ZXJuYWwgLS0gY2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSBjb21wbGV0ZSBzdGFydHRhZzsgcmV0dXJuIGVuZAogICAgIyBvciAtMSBpZiBpbmNvbXBsZXRlLgogICAgZGVmIGNoZWNrX2Zvcl93aG9sZV9zdGFydF90YWcoc2VsZiwgaSk6CiAgICAgICAgcmF3ZGF0YSA9IHNlbGYucmF3ZGF0YQogICAgICAgIGlmIHNlbGYuc3RyaWN0OgogICAgICAgICAgICBtID0gbG9jYXRlc3RhcnR0YWdlbmQubWF0Y2gocmF3ZGF0YSwgaSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBtID0gbG9jYXRlc3RhcnR0YWdlbmRfdG9sZXJhbnQubWF0Y2gocmF3ZGF0YSwgaSkKICAgICAgICBpZiBtOgogICAgICAgICAgICBqID0gbS5lbmQoKQogICAgICAgICAgICBuZXh0ID0gcmF3ZGF0YVtqOmorMV0KICAgICAgICAgICAgaWYgbmV4dCA9PSAiPiI6CiAgICAgICAgICAgICAgICByZXR1cm4gaiArIDEKICAgICAgICAgICAgaWYgbmV4dCA9PSAiLyI6CiAgICAgICAgICAgICAgICBpZiByYXdkYXRhLnN0YXJ0c3dpdGgoIi8+Iiwgaik6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGogKyAyCiAgICAgICAgICAgICAgICBpZiByYXdkYXRhLnN0YXJ0c3dpdGgoIi8iLCBqKToKICAgICAgICAgICAgICAgICAgICAjIGJ1ZmZlciBib3VuZGFyeQogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICAgICAgIyBlbHNlIGJvZ3VzIGlucHV0CiAgICAgICAgICAgICAgICBpZiBzZWxmLnN0cmljdDoKICAgICAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZXBvcyhpLCBqICsgMSkKICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yKCJtYWxmb3JtZWQgZW1wdHkgc3RhcnQgdGFnIikKICAgICAgICAgICAgICAgIGlmIGogPiBpOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBqCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBpICsgMQogICAgICAgICAgICBpZiBuZXh0ID09ICIiOgogICAgICAgICAgICAgICAgIyBlbmQgb2YgaW5wdXQKICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICBpZiBuZXh0IGluICgiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXo9LyIKICAgICAgICAgICAgICAgICAgICAgICAgIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaIik6CiAgICAgICAgICAgICAgICAjIGVuZCBvZiBpbnB1dCBpbiBvciBiZWZvcmUgYXR0cmlidXRlIHZhbHVlLCBvciB3ZSBoYXZlIHRoZQogICAgICAgICAgICAgICAgIyAnLycgZnJvbSBhICcvPicgZW5kaW5nCiAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgaWYgc2VsZi5zdHJpY3Q6CiAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZXBvcyhpLCBqKQogICAgICAgICAgICAgICAgc2VsZi5lcnJvcigibWFsZm9ybWVkIHN0YXJ0IHRhZyIpCiAgICAgICAgICAgIGlmIGogPiBpOgogICAgICAgICAgICAgICAgcmV0dXJuIGoKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBpICsgMQogICAgICAgIHJhaXNlIEFzc2VydGlvbkVycm9yKCJ3ZSBzaG91bGQgbm90IGdldCBoZXJlISIpCgogICAgIyBJbnRlcm5hbCAtLSBwYXJzZSBlbmR0YWcsIHJldHVybiBlbmQgb3IgLTEgaWYgaW5jb21wbGV0ZQogICAgZGVmIHBhcnNlX2VuZHRhZyhzZWxmLCBpKToKICAgICAgICByYXdkYXRhID0gc2VsZi5yYXdkYXRhCiAgICAgICAgYXNzZXJ0IHJhd2RhdGFbaTppKzJdID09ICI8LyIsICJ1bmV4cGVjdGVkIGNhbGwgdG8gcGFyc2VfZW5kdGFnIgogICAgICAgIG1hdGNoID0gZW5kZW5kdGFnLnNlYXJjaChyYXdkYXRhLCBpKzEpICMgPgogICAgICAgIGlmIG5vdCBtYXRjaDoKICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgZ3Rwb3MgPSBtYXRjaC5lbmQoKQogICAgICAgIG1hdGNoID0gZW5kdGFnZmluZC5tYXRjaChyYXdkYXRhLCBpKSAjIDwvICsgdGFnICsgPgogICAgICAgIGlmIG5vdCBtYXRjaDoKICAgICAgICAgICAgaWYgc2VsZi5jZGF0YV9lbGVtIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVfZGF0YShyYXdkYXRhW2k6Z3Rwb3NdKQogICAgICAgICAgICAgICAgcmV0dXJuIGd0cG9zCiAgICAgICAgICAgIGlmIHNlbGYuc3RyaWN0OgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcigiYmFkIGVuZCB0YWc6ICVyIiAlIChyYXdkYXRhW2k6Z3Rwb3NdLCkpCiAgICAgICAgICAgICMgZmluZCB0aGUgbmFtZTogdzMub3JnL1RSL2h0bWw1L3Rva2VuaXphdGlvbi5odG1sI3RhZy1uYW1lLXN0YXRlCiAgICAgICAgICAgIG5hbWVtYXRjaCA9IHRhZ2ZpbmRfdG9sZXJhbnQubWF0Y2gocmF3ZGF0YSwgaSsyKQogICAgICAgICAgICBpZiBub3QgbmFtZW1hdGNoOgogICAgICAgICAgICAgICAgIyB3My5vcmcvVFIvaHRtbDUvdG9rZW5pemF0aW9uLmh0bWwjZW5kLXRhZy1vcGVuLXN0YXRlCiAgICAgICAgICAgICAgICBpZiByYXdkYXRhW2k6aSszXSA9PSAnPC8+JzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSszCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlX2JvZ3VzX2NvbW1lbnQoaSkKICAgICAgICAgICAgdGFnbmFtZSA9IG5hbWVtYXRjaC5ncm91cCgpLmxvd2VyKCkKICAgICAgICAgICAgIyBjb25zdW1lIGFuZCBpZ25vcmUgb3RoZXIgc3R1ZmYgYmV0d2VlbiB0aGUgbmFtZSBhbmQgdGhlID4KICAgICAgICAgICAgIyBOb3RlOiB0aGlzIGlzIG5vdCAxMDAlIGNvcnJlY3QsIHNpbmNlIHdlIG1pZ2h0IGhhdmUgdGhpbmdzIGxpa2UKICAgICAgICAgICAgIyA8L3RhZyBhdHRyPSI+Ij4sIGJ1dCBsb29raW5nIGZvciA+IGFmdGVyIHRoYSBuYW1lIHNob3VsZCBjb3ZlcgogICAgICAgICAgICAjIG1vc3Qgb2YgdGhlIGNhc2VzIGFuZCBpcyBtdWNoIHNpbXBsZXIKICAgICAgICAgICAgZ3Rwb3MgPSByYXdkYXRhLmZpbmQoJz4nLCBuYW1lbWF0Y2guZW5kKCkpCiAgICAgICAgICAgIHNlbGYuaGFuZGxlX2VuZHRhZyh0YWduYW1lKQogICAgICAgICAgICByZXR1cm4gZ3Rwb3MrMQoKICAgICAgICBlbGVtID0gbWF0Y2guZ3JvdXAoMSkubG93ZXIoKSAjIHNjcmlwdCBvciBzdHlsZQogICAgICAgIGlmIHNlbGYuY2RhdGFfZWxlbSBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYgZWxlbSAhPSBzZWxmLmNkYXRhX2VsZW06CiAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZV9kYXRhKHJhd2RhdGFbaTpndHBvc10pCiAgICAgICAgICAgICAgICByZXR1cm4gZ3Rwb3MKCiAgICAgICAgc2VsZi5oYW5kbGVfZW5kdGFnKGVsZW0ubG93ZXIoKSkKICAgICAgICBzZWxmLmNsZWFyX2NkYXRhX21vZGUoKQogICAgICAgIHJldHVybiBndHBvcwoKICAgICMgT3ZlcnJpZGFibGUgLS0gZmluaXNoIHByb2Nlc3Npbmcgb2Ygc3RhcnQrZW5kIHRhZzogPHRhZy4uLi8+CiAgICBkZWYgaGFuZGxlX3N0YXJ0ZW5kdGFnKHNlbGYsIHRhZywgYXR0cnMpOgogICAgICAgIHNlbGYuaGFuZGxlX3N0YXJ0dGFnKHRhZywgYXR0cnMpCiAgICAgICAgc2VsZi5oYW5kbGVfZW5kdGFnKHRhZykKCiAgICAjIE92ZXJyaWRhYmxlIC0tIGhhbmRsZSBzdGFydCB0YWcKICAgIGRlZiBoYW5kbGVfc3RhcnR0YWcoc2VsZiwgdGFnLCBhdHRycyk6CiAgICAgICAgcGFzcwoKICAgICMgT3ZlcnJpZGFibGUgLS0gaGFuZGxlIGVuZCB0YWcKICAgIGRlZiBoYW5kbGVfZW5kdGFnKHNlbGYsIHRhZyk6CiAgICAgICAgcGFzcwoKICAgICMgT3ZlcnJpZGFibGUgLS0gaGFuZGxlIGNoYXJhY3RlciByZWZlcmVuY2UKICAgIGRlZiBoYW5kbGVfY2hhcnJlZihzZWxmLCBuYW1lKToKICAgICAgICBwYXNzCgogICAgIyBPdmVycmlkYWJsZSAtLSBoYW5kbGUgZW50aXR5IHJlZmVyZW5jZQogICAgZGVmIGhhbmRsZV9lbnRpdHlyZWYoc2VsZiwgbmFtZSk6CiAgICAgICAgcGFzcwoKICAgICMgT3ZlcnJpZGFibGUgLS0gaGFuZGxlIGRhdGEKICAgIGRlZiBoYW5kbGVfZGF0YShzZWxmLCBkYXRhKToKICAgICAgICBwYXNzCgogICAgIyBPdmVycmlkYWJsZSAtLSBoYW5kbGUgY29tbWVudAogICAgZGVmIGhhbmRsZV9jb21tZW50KHNlbGYsIGRhdGEpOgogICAgICAgIHBhc3MKCiAgICAjIE92ZXJyaWRhYmxlIC0tIGhhbmRsZSBkZWNsYXJhdGlvbgogICAgZGVmIGhhbmRsZV9kZWNsKHNlbGYsIGRlY2wpOgogICAgICAgIHBhc3MKCiAgICAjIE92ZXJyaWRhYmxlIC0tIGhhbmRsZSBwcm9jZXNzaW5nIGluc3RydWN0aW9uCiAgICBkZWYgaGFuZGxlX3BpKHNlbGYsIGRhdGEpOgogICAgICAgIHBhc3MKCiAgICBkZWYgdW5rbm93bl9kZWNsKHNlbGYsIGRhdGEpOgogICAgICAgIGlmIHNlbGYuc3RyaWN0OgogICAgICAgICAgICBzZWxmLmVycm9yKCJ1bmtub3duIGRlY2xhcmF0aW9uOiAlciIgJSAoZGF0YSwpKQoKICAgICMgSW50ZXJuYWwgLS0gaGVscGVyIHRvIHJlbW92ZSBzcGVjaWFsIGNoYXJhY3RlciBxdW90aW5nCiAgICBkZWYgdW5lc2NhcGUoc2VsZiwgcyk6CiAgICAgICAgaWYgJyYnIG5vdCBpbiBzOgogICAgICAgICAgICByZXR1cm4gcwogICAgICAgIGRlZiByZXBsYWNlRW50aXRpZXMocyk6CiAgICAgICAgICAgIHMgPSBzLmdyb3VwcygpWzBdCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlmIHNbMF0gPT0gIiMiOgogICAgICAgICAgICAgICAgICAgIHMgPSBzWzE6XQogICAgICAgICAgICAgICAgICAgIGlmIHNbMF0gaW4gWyd4JywnWCddOgogICAgICAgICAgICAgICAgICAgICAgICBjID0gaW50KHNbMTpdLnJzdHJpcCgnOycpLCAxNikKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBjID0gaW50KHMucnN0cmlwKCc7JykpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNocihjKQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgIHJldHVybiAnJiMnICsgcwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZnJvbSBodG1sLmVudGl0aWVzIGltcG9ydCBodG1sNQogICAgICAgICAgICAgICAgaWYgcyBpbiBodG1sNToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaHRtbDVbc10KICAgICAgICAgICAgICAgIGVsaWYgcy5lbmRzd2l0aCgnOycpOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnJicgKyBzCiAgICAgICAgICAgICAgICBmb3IgeCBpbiByYW5nZSgyLCBsZW4ocykpOgogICAgICAgICAgICAgICAgICAgIGlmIHNbOnhdIGluIGh0bWw1OgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaHRtbDVbc1s6eF1dICsgc1t4Ol0KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcmJyArIHMKCiAgICAgICAgcmV0dXJuIHJlLnN1YihyIiYoIz9beFhdPyg/OlswLTlhLWZBLUZdKzt8XHd7MSwzMn07PykpIiwKICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VFbnRpdGllcywgcywgZmxhZ3M9cmUuQVNDSUkpCg==',
'/Lib/collections/__init__.py':'I19fYWxsX18gPSBbJ2RlcXVlJywgJ2RlZmF1bHRkaWN0JywgJ0NvdW50ZXInXQoKZnJvbSBfY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlLCBkZWZhdWx0ZGljdAoKI2Zyb20gaXRlcnRvb2xzIGltcG9ydCByZXBlYXQgYXMgX3JlcGVhdCwgY2hhaW4gYXMgX2NoYWluLCBzdGFybWFwIGFzIF9zdGFybWFwCgpfX2FsbF9fID0gWydkZXF1ZScsICdkZWZhdWx0ZGljdCcsICduYW1lZHR1cGxlJywgJ1VzZXJEaWN0JywgJ1VzZXJMaXN0JywKICAgICAgICAgICAgJ1VzZXJTdHJpbmcnLCAnQ291bnRlcicsICdPcmRlcmVkRGljdCddCiMgRm9yIGJvb3RzdHJhcHBpbmcgcmVhc29ucywgdGhlIGNvbGxlY3Rpb24gQUJDcyBhcmUgZGVmaW5lZCBpbiBfYWJjb2xsLnB5LgojIFRoZXkgc2hvdWxkIGhvd2V2ZXIgYmUgY29uc2lkZXJlZCBhbiBpbnRlZ3JhbCBwYXJ0IG9mIGNvbGxlY3Rpb25zLnB5LgoKIyBmaXhtZSBicnl0aG9uLi4gdGhlcmUgaXMgYW4gaXNzdWUgd2l0aCBfYWJjb2xsCiNmcm9tIF9hYmNvbGwgaW1wb3J0ICoKI2Zyb20gX2FiY29sbCBpbXBvcnQgU2V0CmZyb20gX2FiY29sbCBpbXBvcnQgTXV0YWJsZU1hcHBpbmcKI2ltcG9ydCBfYWJjb2xsCiNfX2FsbF9fICs9IF9hYmNvbGwuX19hbGxfXwoKZnJvbSBfY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlLCBkZWZhdWx0ZGljdCwgbmFtZWR0dXBsZQojZml4bWUsIGJyeXRob24uICBUaGlzIGNhdXNlcyBhIFJlZmVyZW5jZUVycm9yOiBpdGVtZ2V0dGVyIGlzIG5vdCBkZWZpbmVkCmZyb20gb3BlcmF0b3IgaW1wb3J0IGl0ZW1nZXR0ZXIgYXMgX2l0ZW1nZXR0ZXIKZnJvbSBrZXl3b3JkIGltcG9ydCBpc2tleXdvcmQgYXMgX2lza2V5d29yZAppbXBvcnQgc3lzIGFzIF9zeXMKaW1wb3J0IGhlYXBxIGFzIF9oZWFwcQojZml4bWUgYnJ5dGhvbgojZnJvbSB3ZWFrcmVmIGltcG9ydCBwcm94eSBhcyBfcHJveHkKZnJvbSBpdGVydG9vbHMgaW1wb3J0IHJlcGVhdCBhcyBfcmVwZWF0LCBjaGFpbiBhcyBfY2hhaW4sIHN0YXJtYXAgYXMgX3N0YXJtYXAKI2ZpeG1lIGJyeXRob24gCmZyb20gcmVwcmxpYiBpbXBvcnQgcmVjdXJzaXZlX3JlcHIgYXMgX3JlY3Vyc2l2ZV9yZXByCgpjbGFzcyBTZXQoc2V0KToKICAgIHBhc3MKCmNsYXNzIFNlcXVlbmNlKGxpc3QpOgogICAgcGFzcwoKZGVmIF9wcm94eShvYmopOgogICAgcmV0dXJuIG9iagoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIE9yZGVyZWREaWN0CiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpjbGFzcyBfTGluayhvYmplY3QpOgogICAgX19zbG90c19fID0gJ3ByZXYnLCAnbmV4dCcsICdrZXknLCAnX193ZWFrcmVmX18nCgpjbGFzcyBPcmRlcmVkRGljdChkaWN0KToKICAgICdEaWN0aW9uYXJ5IHRoYXQgcmVtZW1iZXJzIGluc2VydGlvbiBvcmRlcicKICAgICMgQW4gaW5oZXJpdGVkIGRpY3QgbWFwcyBrZXlzIHRvIHZhbHVlcy4KICAgICMgVGhlIGluaGVyaXRlZCBkaWN0IHByb3ZpZGVzIF9fZ2V0aXRlbV9fLCBfX2xlbl9fLCBfX2NvbnRhaW5zX18sIGFuZCBnZXQuCiAgICAjIFRoZSByZW1haW5pbmcgbWV0aG9kcyBhcmUgb3JkZXItYXdhcmUuCiAgICAjIEJpZy1PIHJ1bm5pbmcgdGltZXMgZm9yIGFsbCBtZXRob2RzIGFyZSB0aGUgc2FtZSBhcyByZWd1bGFyIGRpY3Rpb25hcmllcy4KCiAgICAjIFRoZSBpbnRlcm5hbCBzZWxmLl9fbWFwIGRpY3QgbWFwcyBrZXlzIHRvIGxpbmtzIGluIGEgZG91Ymx5IGxpbmtlZCBsaXN0LgogICAgIyBUaGUgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0IHN0YXJ0cyBhbmQgZW5kcyB3aXRoIGEgc2VudGluZWwgZWxlbWVudC4KICAgICMgVGhlIHNlbnRpbmVsIGVsZW1lbnQgbmV2ZXIgZ2V0cyBkZWxldGVkICh0aGlzIHNpbXBsaWZpZXMgdGhlIGFsZ29yaXRobSkuCiAgICAjIFRoZSBzZW50aW5lbCBpcyBpbiBzZWxmLl9faGFyZHJvb3Qgd2l0aCBhIHdlYWtyZWYgcHJveHkgaW4gc2VsZi5fX3Jvb3QuCiAgICAjIFRoZSBwcmV2IGxpbmtzIGFyZSB3ZWFrcmVmIHByb3hpZXMgKHRvIHByZXZlbnQgY2lyY3VsYXIgcmVmZXJlbmNlcykuCiAgICAjIEluZGl2aWR1YWwgbGlua3MgYXJlIGtlcHQgYWxpdmUgYnkgdGhlIGhhcmQgcmVmZXJlbmNlIGluIHNlbGYuX19tYXAuCiAgICAjIFRob3NlIGhhcmQgcmVmZXJlbmNlcyBkaXNhcHBlYXIgd2hlbiBhIGtleSBpcyBkZWxldGVkIGZyb20gYW4gT3JkZXJlZERpY3QuCgogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3ZHMpOgogICAgICAgICcnJ0luaXRpYWxpemUgYW4gb3JkZXJlZCBkaWN0aW9uYXJ5LiAgVGhlIHNpZ25hdHVyZSBpcyB0aGUgc2FtZSBhcwogICAgICAgIHJlZ3VsYXIgZGljdGlvbmFyaWVzLCBidXQga2V5d29yZCBhcmd1bWVudHMgYXJlIG5vdCByZWNvbW1lbmRlZCBiZWNhdXNlCiAgICAgICAgdGhlaXIgaW5zZXJ0aW9uIG9yZGVyIGlzIGFyYml0cmFyeS4KCiAgICAgICAgJycnCiAgICAgICAgaWYgbGVuKGFyZ3MpID4gMToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdleHBlY3RlZCBhdCBtb3N0IDEgYXJndW1lbnRzLCBnb3QgJWQnICUgbGVuKGFyZ3MpKQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5fX3Jvb3QKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIHNlbGYuX19oYXJkcm9vdCA9IF9MaW5rKCkKICAgICAgICAgICAgc2VsZi5fX3Jvb3QgPSByb290ID0gX3Byb3h5KHNlbGYuX19oYXJkcm9vdCkKICAgICAgICAgICAgcm9vdC5wcmV2ID0gcm9vdC5uZXh0ID0gcm9vdAogICAgICAgICAgICBzZWxmLl9fbWFwID0ge30KICAgICAgICBzZWxmLl9fdXBkYXRlKCphcmdzLCAqKmt3ZHMpCgogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgZGljdF9zZXRpdGVtPWRpY3QuX19zZXRpdGVtX18sIHByb3h5PV9wcm94eSwgTGluaz1fTGluayk6CiAgICAgICAgJ29kLl9fc2V0aXRlbV9fKGksIHkpIDw9PT4gb2RbaV09eScKICAgICAgICAjIFNldHRpbmcgYSBuZXcgaXRlbSBjcmVhdGVzIGEgbmV3IGxpbmsgYXQgdGhlIGVuZCBvZiB0aGUgbGlua2VkIGxpc3QsCiAgICAgICAgIyBhbmQgdGhlIGluaGVyaXRlZCBkaWN0aW9uYXJ5IGlzIHVwZGF0ZWQgd2l0aCB0aGUgbmV3IGtleS92YWx1ZSBwYWlyLgogICAgICAgIGlmIGtleSBub3QgaW4gc2VsZjoKICAgICAgICAgICAgc2VsZi5fX21hcFtrZXldID0gbGluayA9IExpbmsoKQogICAgICAgICAgICByb290ID0gc2VsZi5fX3Jvb3QKICAgICAgICAgICAgbGFzdCA9IHJvb3QucHJldgogICAgICAgICAgICBsaW5rLnByZXYsIGxpbmsubmV4dCwgbGluay5rZXkgPSBsYXN0LCByb290LCBrZXkKICAgICAgICAgICAgbGFzdC5uZXh0ID0gbGluawogICAgICAgICAgICByb290LnByZXYgPSBwcm94eShsaW5rKQogICAgICAgIGRpY3Rfc2V0aXRlbShzZWxmLCBrZXksIHZhbHVlKQoKICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXksIGRpY3RfZGVsaXRlbT1kaWN0Ll9fZGVsaXRlbV9fKToKICAgICAgICAnb2QuX19kZWxpdGVtX18oeSkgPD09PiBkZWwgb2RbeV0nCiAgICAgICAgIyBEZWxldGluZyBhbiBleGlzdGluZyBpdGVtIHVzZXMgc2VsZi5fX21hcCB0byBmaW5kIHRoZSBsaW5rIHdoaWNoIGdldHMKICAgICAgICAjIHJlbW92ZWQgYnkgdXBkYXRpbmcgdGhlIGxpbmtzIGluIHRoZSBwcmVkZWNlc3NvciBhbmQgc3VjY2Vzc29yIG5vZGVzLgogICAgICAgIGRpY3RfZGVsaXRlbShzZWxmLCBrZXkpCiAgICAgICAgbGluayA9IHNlbGYuX19tYXAucG9wKGtleSkKICAgICAgICBsaW5rX3ByZXYgPSBsaW5rLnByZXYKICAgICAgICBsaW5rX25leHQgPSBsaW5rLm5leHQKICAgICAgICBsaW5rX3ByZXYubmV4dCA9IGxpbmtfbmV4dAogICAgICAgIGxpbmtfbmV4dC5wcmV2ID0gbGlua19wcmV2CgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgICdvZC5fX2l0ZXJfXygpIDw9PT4gaXRlcihvZCknCiAgICAgICAgIyBUcmF2ZXJzZSB0aGUgbGlua2VkIGxpc3QgaW4gb3JkZXIuCiAgICAgICAgcm9vdCA9IHNlbGYuX19yb290CiAgICAgICAgY3VyciA9IHJvb3QubmV4dAogICAgICAgIHdoaWxlIGN1cnIgaXMgbm90IHJvb3Q6CiAgICAgICAgICAgIHlpZWxkIGN1cnIua2V5CiAgICAgICAgICAgIGN1cnIgPSBjdXJyLm5leHQKCiAgICBkZWYgX19yZXZlcnNlZF9fKHNlbGYpOgogICAgICAgICdvZC5fX3JldmVyc2VkX18oKSA8PT0+IHJldmVyc2VkKG9kKScKICAgICAgICAjIFRyYXZlcnNlIHRoZSBsaW5rZWQgbGlzdCBpbiByZXZlcnNlIG9yZGVyLgogICAgICAgIHJvb3QgPSBzZWxmLl9fcm9vdAogICAgICAgIGN1cnIgPSByb290LnByZXYKICAgICAgICB3aGlsZSBjdXJyIGlzIG5vdCByb290OgogICAgICAgICAgICB5aWVsZCBjdXJyLmtleQogICAgICAgICAgICBjdXJyID0gY3Vyci5wcmV2CgogICAgZGVmIGNsZWFyKHNlbGYpOgogICAgICAgICdvZC5jbGVhcigpIC0+IE5vbmUuICBSZW1vdmUgYWxsIGl0ZW1zIGZyb20gb2QuJwogICAgICAgIHJvb3QgPSBzZWxmLl9fcm9vdAogICAgICAgIHJvb3QucHJldiA9IHJvb3QubmV4dCA9IHJvb3QKICAgICAgICBzZWxmLl9fbWFwLmNsZWFyKCkKICAgICAgICBkaWN0LmNsZWFyKHNlbGYpCgogICAgZGVmIHBvcGl0ZW0oc2VsZiwgbGFzdD1UcnVlKToKICAgICAgICAnJydvZC5wb3BpdGVtKCkgLT4gKGssIHYpLCByZXR1cm4gYW5kIHJlbW92ZSBhIChrZXksIHZhbHVlKSBwYWlyLgogICAgICAgIFBhaXJzIGFyZSByZXR1cm5lZCBpbiBMSUZPIG9yZGVyIGlmIGxhc3QgaXMgdHJ1ZSBvciBGSUZPIG9yZGVyIGlmIGZhbHNlLgoKICAgICAgICAnJycKICAgICAgICBpZiBub3Qgc2VsZjoKICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3IoJ2RpY3Rpb25hcnkgaXMgZW1wdHknKQogICAgICAgIHJvb3QgPSBzZWxmLl9fcm9vdAogICAgICAgIGlmIGxhc3Q6CiAgICAgICAgICAgIGxpbmsgPSByb290LnByZXYKICAgICAgICAgICAgbGlua19wcmV2ID0gbGluay5wcmV2CiAgICAgICAgICAgIGxpbmtfcHJldi5uZXh0ID0gcm9vdAogICAgICAgICAgICByb290LnByZXYgPSBsaW5rX3ByZXYKICAgICAgICBlbHNlOgogICAgICAgICAgICBsaW5rID0gcm9vdC5uZXh0CiAgICAgICAgICAgIGxpbmtfbmV4dCA9IGxpbmsubmV4dAogICAgICAgICAgICByb290Lm5leHQgPSBsaW5rX25leHQKICAgICAgICAgICAgbGlua19uZXh0LnByZXYgPSByb290CiAgICAgICAga2V5ID0gbGluay5rZXkKICAgICAgICBkZWwgc2VsZi5fX21hcFtrZXldCiAgICAgICAgdmFsdWUgPSBkaWN0LnBvcChzZWxmLCBrZXkpCiAgICAgICAgcmV0dXJuIGtleSwgdmFsdWUKCiAgICBkZWYgbW92ZV90b19lbmQoc2VsZiwga2V5LCBsYXN0PVRydWUpOgogICAgICAgICcnJ01vdmUgYW4gZXhpc3RpbmcgZWxlbWVudCB0byB0aGUgZW5kIChvciBiZWdpbm5pbmcgaWYgbGFzdD09RmFsc2UpLgoKICAgICAgICBSYWlzZXMgS2V5RXJyb3IgaWYgdGhlIGVsZW1lbnQgZG9lcyBub3QgZXhpc3QuCiAgICAgICAgV2hlbiBsYXN0PVRydWUsIGFjdHMgbGlrZSBhIGZhc3QgdmVyc2lvbiBvZiBzZWxmW2tleV09c2VsZi5wb3Aoa2V5KS4KCiAgICAgICAgJycnCiAgICAgICAgbGluayA9IHNlbGYuX19tYXBba2V5XQogICAgICAgIGxpbmtfcHJldiA9IGxpbmsucHJldgogICAgICAgIGxpbmtfbmV4dCA9IGxpbmsubmV4dAogICAgICAgIGxpbmtfcHJldi5uZXh0ID0gbGlua19uZXh0CiAgICAgICAgbGlua19uZXh0LnByZXYgPSBsaW5rX3ByZXYKICAgICAgICByb290ID0gc2VsZi5fX3Jvb3QKICAgICAgICBpZiBsYXN0OgogICAgICAgICAgICBsYXN0ID0gcm9vdC5wcmV2CiAgICAgICAgICAgIGxpbmsucHJldiA9IGxhc3QKICAgICAgICAgICAgbGluay5uZXh0ID0gcm9vdAogICAgICAgICAgICBsYXN0Lm5leHQgPSByb290LnByZXYgPSBsaW5rCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZmlyc3QgPSByb290Lm5leHQKICAgICAgICAgICAgbGluay5wcmV2ID0gcm9vdAogICAgICAgICAgICBsaW5rLm5leHQgPSBmaXJzdAogICAgICAgICAgICByb290Lm5leHQgPSBmaXJzdC5wcmV2ID0gbGluawoKICAgIGRlZiBfX3NpemVvZl9fKHNlbGYpOgogICAgICAgIHNpemVvZiA9IF9zeXMuZ2V0c2l6ZW9mCiAgICAgICAgbiA9IGxlbihzZWxmKSArIDEgICAgICAgICAgICAgICAgICAgICAgICMgbnVtYmVyIG9mIGxpbmtzIGluY2x1ZGluZyByb290CiAgICAgICAgc2l6ZSA9IHNpemVvZihzZWxmLl9fZGljdF9fKSAgICAgICAgICAgICMgaW5zdGFuY2UgZGljdGlvbmFyeQogICAgICAgIHNpemUgKz0gc2l6ZW9mKHNlbGYuX19tYXApICogMiAgICAgICAgICAjIGludGVybmFsIGRpY3QgYW5kIGluaGVyaXRlZCBkaWN0CiAgICAgICAgc2l6ZSArPSBzaXplb2Yoc2VsZi5fX2hhcmRyb290KSAqIG4gICAgICMgbGluayBvYmplY3RzCiAgICAgICAgc2l6ZSArPSBzaXplb2Yoc2VsZi5fX3Jvb3QpICogbiAgICAgICAgICMgcHJveHkgb2JqZWN0cwogICAgICAgIHJldHVybiBzaXplCgogICAgI2ZpeG1lIGJyeXRob24uLiAgSXNzdWUgd2l0aCBfYWJjb2xsLCB3aGljaCBjb250YWlucyBNdXRhYmxlTWFwcGluZwogICAgdXBkYXRlID0gX191cGRhdGUgPSBNdXRhYmxlTWFwcGluZy51cGRhdGUKICAgIGtleXMgPSBNdXRhYmxlTWFwcGluZy5rZXlzCiAgICB2YWx1ZXMgPSBNdXRhYmxlTWFwcGluZy52YWx1ZXMKICAgIGl0ZW1zID0gTXV0YWJsZU1hcHBpbmcuaXRlbXMKICAgIF9fbmVfXyA9IE11dGFibGVNYXBwaW5nLl9fbmVfXwoKICAgIF9fbWFya2VyID0gb2JqZWN0KCkKCiAgICBkZWYgcG9wKHNlbGYsIGtleSwgZGVmYXVsdD1fX21hcmtlcik6CiAgICAgICAgJycnb2QucG9wKGtbLGRdKSAtPiB2LCByZW1vdmUgc3BlY2lmaWVkIGtleSBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nCiAgICAgICAgdmFsdWUuICBJZiBrZXkgaXMgbm90IGZvdW5kLCBkIGlzIHJldHVybmVkIGlmIGdpdmVuLCBvdGhlcndpc2UgS2V5RXJyb3IKICAgICAgICBpcyByYWlzZWQuCgogICAgICAgICcnJwogICAgICAgIGlmIGtleSBpbiBzZWxmOgogICAgICAgICAgICByZXN1bHQgPSBzZWxmW2tleV0KICAgICAgICAgICAgZGVsIHNlbGZba2V5XQogICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgaWYgZGVmYXVsdCBpcyBzZWxmLl9fbWFya2VyOgogICAgICAgICAgICByYWlzZSBLZXlFcnJvcihrZXkpCiAgICAgICAgcmV0dXJuIGRlZmF1bHQKCiAgICBkZWYgc2V0ZGVmYXVsdChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6CiAgICAgICAgJ29kLnNldGRlZmF1bHQoa1ssZF0pIC0+IG9kLmdldChrLGQpLCBhbHNvIHNldCBvZFtrXT1kIGlmIGsgbm90IGluIG9kJwogICAgICAgIGlmIGtleSBpbiBzZWxmOgogICAgICAgICAgICByZXR1cm4gc2VsZltrZXldCiAgICAgICAgc2VsZltrZXldID0gZGVmYXVsdAogICAgICAgIHJldHVybiBkZWZhdWx0CgogICAgI2ZpeG1lLCBicnl0aG9uIGlzc3VlCiAgICAjQF9yZWN1cnNpdmVfcmVwcigpCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgJ29kLl9fcmVwcl9fKCkgPD09PiByZXByKG9kKScKICAgICAgICBpZiBub3Qgc2VsZjoKICAgICAgICAgICAgcmV0dXJuICclcygpJyAlIChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywpCiAgICAgICAgcmV0dXJuICclcyglciknICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBsaXN0KHNlbGYuaXRlbXMoKSkpCgogICAgZGVmIF9fcmVkdWNlX18oc2VsZik6CiAgICAgICAgJ1JldHVybiBzdGF0ZSBpbmZvcm1hdGlvbiBmb3IgcGlja2xpbmcnCiAgICAgICAgaXRlbXMgPSBbW2ssIHNlbGZba11dIGZvciBrIGluIHNlbGZdCiAgICAgICAgaW5zdF9kaWN0ID0gdmFycyhzZWxmKS5jb3B5KCkKICAgICAgICBmb3IgayBpbiB2YXJzKE9yZGVyZWREaWN0KCkpOgogICAgICAgICAgICBpbnN0X2RpY3QucG9wKGssIE5vbmUpCiAgICAgICAgaWYgaW5zdF9kaWN0OgogICAgICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCAoaXRlbXMsKSwgaW5zdF9kaWN0KQogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXywgKGl0ZW1zLCkKCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICAnb2QuY29weSgpIC0+IGEgc2hhbGxvdyBjb3B5IG9mIG9kJwogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXyhzZWxmKQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZyb21rZXlzKGNscywgaXRlcmFibGUsIHZhbHVlPU5vbmUpOgogICAgICAgICcnJ09ELmZyb21rZXlzKFNbLCB2XSkgLT4gTmV3IG9yZGVyZWQgZGljdGlvbmFyeSB3aXRoIGtleXMgZnJvbSBTLgogICAgICAgIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB2YWx1ZSBkZWZhdWx0cyB0byBOb25lLgoKICAgICAgICAnJycKICAgICAgICBzZWxmID0gY2xzKCkKICAgICAgICBmb3Iga2V5IGluIGl0ZXJhYmxlOgogICAgICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgJycnb2QuX19lcV9fKHkpIDw9PT4gb2Q9PXkuICBDb21wYXJpc29uIHRvIGFub3RoZXIgT0QgaXMgb3JkZXItc2Vuc2l0aXZlCiAgICAgICAgd2hpbGUgY29tcGFyaXNvbiB0byBhIHJlZ3VsYXIgbWFwcGluZyBpcyBvcmRlci1pbnNlbnNpdGl2ZS4KCiAgICAgICAgJycnCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgT3JkZXJlZERpY3QpOgogICAgICAgICAgICByZXR1cm4gbGVuKHNlbGYpPT1sZW4ob3RoZXIpIGFuZCBcCiAgICAgICAgICAgICAgICAgICBhbGwocD09cSBmb3IgcCwgcSBpbiB6aXAoc2VsZi5pdGVtcygpLCBvdGhlci5pdGVtcygpKSkKICAgICAgICByZXR1cm4gZGljdC5fX2VxX18oc2VsZiwgb3RoZXIpCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyAgQ291bnRlcgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgpkZWYgX2NvdW50X2VsZW1lbnRzKG1hcHBpbmcsIGl0ZXJhYmxlKToKICAgICdUYWxseSBlbGVtZW50cyBmcm9tIHRoZSBpdGVyYWJsZS4nCiAgICBtYXBwaW5nX2dldCA9IG1hcHBpbmcuZ2V0CiAgICBmb3IgZWxlbSBpbiBpdGVyYWJsZToKICAgICAgICBtYXBwaW5nW2VsZW1dID0gbWFwcGluZ19nZXQoZWxlbSwgMCkgKyAxCgojdHJ5OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTG9hZCBDIGhlbHBlciBmdW5jdGlvbiBpZiBhdmFpbGFibGUKIyAgICBmcm9tIF9jb2xsZWN0aW9ucyBpbXBvcnQgX2NvdW50X2VsZW1lbnRzCiNleGNlcHQgSW1wb3J0RXJyb3I6CiMgICAgcGFzcwoKY2xhc3MgQ291bnRlcihkaWN0KToKICAgICcnJ0RpY3Qgc3ViY2xhc3MgZm9yIGNvdW50aW5nIGhhc2hhYmxlIGl0ZW1zLiAgU29tZXRpbWVzIGNhbGxlZCBhIGJhZwogICAgb3IgbXVsdGlzZXQuICBFbGVtZW50cyBhcmUgc3RvcmVkIGFzIGRpY3Rpb25hcnkga2V5cyBhbmQgdGhlaXIgY291bnRzCiAgICBhcmUgc3RvcmVkIGFzIGRpY3Rpb25hcnkgdmFsdWVzLgoKICAgID4+PiBjID0gQ291bnRlcignYWJjZGVhYmNkYWJjYWJhJykgICMgY291bnQgZWxlbWVudHMgZnJvbSBhIHN0cmluZwoKICAgID4+PiBjLm1vc3RfY29tbW9uKDMpICAgICAgICAgICAgICAgICMgdGhyZWUgbW9zdCBjb21tb24gZWxlbWVudHMKICAgIFsoJ2EnLCA1KSwgKCdiJywgNCksICgnYycsIDMpXQogICAgPj4+IHNvcnRlZChjKSAgICAgICAgICAgICAgICAgICAgICAgIyBsaXN0IGFsbCB1bmlxdWUgZWxlbWVudHMKICAgIFsnYScsICdiJywgJ2MnLCAnZCcsICdlJ10KICAgID4+PiAnJy5qb2luKHNvcnRlZChjLmVsZW1lbnRzKCkpKSAgICMgbGlzdCBlbGVtZW50cyB3aXRoIHJlcGV0aXRpb25zCiAgICAnYWFhYWFiYmJiY2NjZGRlJwogICAgPj4+IHN1bShjLnZhbHVlcygpKSAgICAgICAgICAgICAgICAgIyB0b3RhbCBvZiBhbGwgY291bnRzCiAgICAxNQoKICAgID4+PiBjWydhJ10gICAgICAgICAgICAgICAgICAgICAgICAgICMgY291bnQgb2YgbGV0dGVyICdhJwogICAgNQogICAgPj4+IGZvciBlbGVtIGluICdzaGF6YW0nOiAgICAgICAgICAgIyB1cGRhdGUgY291bnRzIGZyb20gYW4gaXRlcmFibGUKICAgIC4uLiAgICAgY1tlbGVtXSArPSAxICAgICAgICAgICAgICAgICMgYnkgYWRkaW5nIDEgdG8gZWFjaCBlbGVtZW50J3MgY291bnQKICAgID4+PiBjWydhJ10gICAgICAgICAgICAgICAgICAgICAgICAgICMgbm93IHRoZXJlIGFyZSBzZXZlbiAnYScKICAgIDcKICAgID4+PiBkZWwgY1snYiddICAgICAgICAgICAgICAgICAgICAgICMgcmVtb3ZlIGFsbCAnYicKICAgID4+PiBjWydiJ10gICAgICAgICAgICAgICAgICAgICAgICAgICMgbm93IHRoZXJlIGFyZSB6ZXJvICdiJwogICAgMAoKICAgID4+PiBkID0gQ291bnRlcignc2ltc2FsYWJpbScpICAgICAgICMgbWFrZSBhbm90aGVyIGNvdW50ZXIKICAgID4+PiBjLnVwZGF0ZShkKSAgICAgICAgICAgICAgICAgICAgICMgYWRkIGluIHRoZSBzZWNvbmQgY291bnRlcgogICAgPj4+IGNbJ2EnXSAgICAgICAgICAgICAgICAgICAgICAgICAgIyBub3cgdGhlcmUgYXJlIG5pbmUgJ2EnCiAgICA5CgogICAgPj4+IGMuY2xlYXIoKSAgICAgICAgICAgICAgICAgICAgICAgIyBlbXB0eSB0aGUgY291bnRlcgogICAgPj4+IGMKICAgIENvdW50ZXIoKQoKICAgIE5vdGU6ICBJZiBhIGNvdW50IGlzIHNldCB0byB6ZXJvIG9yIHJlZHVjZWQgdG8gemVybywgaXQgd2lsbCByZW1haW4KICAgIGluIHRoZSBjb3VudGVyIHVudGlsIHRoZSBlbnRyeSBpcyBkZWxldGVkIG9yIHRoZSBjb3VudGVyIGlzIGNsZWFyZWQ6CgogICAgPj4+IGMgPSBDb3VudGVyKCdhYWFiYmMnKQogICAgPj4+IGNbJ2InXSAtPSAyICAgICAgICAgICAgICAgICAgICAgIyByZWR1Y2UgdGhlIGNvdW50IG9mICdiJyBieSB0d28KICAgID4+PiBjLm1vc3RfY29tbW9uKCkgICAgICAgICAgICAgICAgICMgJ2InIGlzIHN0aWxsIGluLCBidXQgaXRzIGNvdW50IGlzIHplcm8KICAgIFsoJ2EnLCAzKSwgKCdjJywgMSksICgnYicsIDApXQoKICAgICcnJwogICAgIyBSZWZlcmVuY2VzOgogICAgIyAgIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTXVsdGlzZXQKICAgICMgICBodHRwOi8vd3d3LmdudS5vcmcvc29mdHdhcmUvc21hbGx0YWxrL21hbnVhbC1iYXNlL2h0bWxfbm9kZS9CYWcuaHRtbAogICAgIyAgIGh0dHA6Ly93d3cuZGVtbzJzLmNvbS9UdXRvcmlhbC9DcHAvMDM4MF9fc2V0LW11bHRpc2V0L0NhdGFsb2cwMzgwX19zZXQtbXVsdGlzZXQuaHRtCiAgICAjICAgaHR0cDovL2NvZGUuYWN0aXZlc3RhdGUuY29tL3JlY2lwZXMvMjU5MTc0LwogICAgIyAgIEtudXRoLCBUQU9DUCBWb2wuIElJIHNlY3Rpb24gNC42LjMKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlcmFibGU9Tm9uZSwgKiprd2RzKToKICAgICAgICAnJydDcmVhdGUgYSBuZXcsIGVtcHR5IENvdW50ZXIgb2JqZWN0LiAgQW5kIGlmIGdpdmVuLCBjb3VudCBlbGVtZW50cwogICAgICAgIGZyb20gYW4gaW5wdXQgaXRlcmFibGUuICBPciwgaW5pdGlhbGl6ZSB0aGUgY291bnQgZnJvbSBhbm90aGVyIG1hcHBpbmcKICAgICAgICBvZiBlbGVtZW50cyB0byB0aGVpciBjb3VudHMuCgogICAgICAgID4+PiBjID0gQ291bnRlcigpICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBhIG5ldywgZW1wdHkgY291bnRlcgogICAgICAgID4+PiBjID0gQ291bnRlcignZ2FsbGFoYWQnKSAgICAgICAgICAgICAgICAgIyBhIG5ldyBjb3VudGVyIGZyb20gYW4gaXRlcmFibGUKICAgICAgICA+Pj4gYyA9IENvdW50ZXIoeydhJzogNCwgJ2InOiAyfSkgICAgICAgICAgICMgYSBuZXcgY291bnRlciBmcm9tIGEgbWFwcGluZwogICAgICAgID4+PiBjID0gQ291bnRlcihhPTQsIGI9MikgICAgICAgICAgICAgICAgICAgIyBhIG5ldyBjb3VudGVyIGZyb20ga2V5d29yZCBhcmdzCgogICAgICAgICcnJwogICAgICAgICNzdXBlcigpLl9faW5pdF9fKCkgICNCRSBtb2RpZmllZCBzaW5jZSBzdXBlciBub3Qgc3VwcG9ydGVkCiAgICAgICAgZGljdC5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYudXBkYXRlKGl0ZXJhYmxlLCAqKmt3ZHMpCgogICAgZGVmIF9fbWlzc2luZ19fKHNlbGYsIGtleSk6CiAgICAgICAgJ1RoZSBjb3VudCBvZiBlbGVtZW50cyBub3QgaW4gdGhlIENvdW50ZXIgaXMgemVyby4nCiAgICAgICAgIyBOZWVkZWQgc28gdGhhdCBzZWxmW21pc3NpbmdfaXRlbV0gZG9lcyBub3QgcmFpc2UgS2V5RXJyb3IKICAgICAgICByZXR1cm4gMAoKICAgIGRlZiBtb3N0X2NvbW1vbihzZWxmLCBuPU5vbmUpOgogICAgICAgICcnJ0xpc3QgdGhlIG4gbW9zdCBjb21tb24gZWxlbWVudHMgYW5kIHRoZWlyIGNvdW50cyBmcm9tIHRoZSBtb3N0CiAgICAgICAgY29tbW9uIHRvIHRoZSBsZWFzdC4gIElmIG4gaXMgTm9uZSwgdGhlbiBsaXN0IGFsbCBlbGVtZW50IGNvdW50cy4KCiAgICAgICAgPj4+IENvdW50ZXIoJ2FiY2RlYWJjZGFiY2FiYScpLm1vc3RfY29tbW9uKDMpCiAgICAgICAgWygnYScsIDUpLCAoJ2InLCA0KSwgKCdjJywgMyldCgogICAgICAgICcnJwogICAgICAgICMgRW11bGF0ZSBCYWcuc29ydGVkQnlDb3VudCBmcm9tIFNtYWxsdGFsawogICAgICAgIGlmIG4gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIHNvcnRlZChzZWxmLml0ZW1zKCksIGtleT1faXRlbWdldHRlcigxKSwgcmV2ZXJzZT1UcnVlKQogICAgICAgIHJldHVybiBfaGVhcHEubmxhcmdlc3Qobiwgc2VsZi5pdGVtcygpLCBrZXk9X2l0ZW1nZXR0ZXIoMSkpCgogICAgZGVmIGVsZW1lbnRzKHNlbGYpOgogICAgICAgICcnJ0l0ZXJhdG9yIG92ZXIgZWxlbWVudHMgcmVwZWF0aW5nIGVhY2ggYXMgbWFueSB0aW1lcyBhcyBpdHMgY291bnQuCgogICAgICAgID4+PiBjID0gQ291bnRlcignQUJDQUJDJykKICAgICAgICA+Pj4gc29ydGVkKGMuZWxlbWVudHMoKSkKICAgICAgICBbJ0EnLCAnQScsICdCJywgJ0InLCAnQycsICdDJ10KCiAgICAgICAgIyBLbnV0aCdzIGV4YW1wbGUgZm9yIHByaW1lIGZhY3RvcnMgb2YgMTgzNjogIDIqKjIgKiAzKiozICogMTcqKjEKICAgICAgICA+Pj4gcHJpbWVfZmFjdG9ycyA9IENvdW50ZXIoezI6IDIsIDM6IDMsIDE3OiAxfSkKICAgICAgICA+Pj4gcHJvZHVjdCA9IDEKICAgICAgICA+Pj4gZm9yIGZhY3RvciBpbiBwcmltZV9mYWN0b3JzLmVsZW1lbnRzKCk6ICAgICAjIGxvb3Agb3ZlciBmYWN0b3JzCiAgICAgICAgLi4uICAgICBwcm9kdWN0ICo9IGZhY3RvciAgICAgICAgICAgICAgICAgICAgICAgIyBhbmQgbXVsdGlwbHkgdGhlbQogICAgICAgID4+PiBwcm9kdWN0CiAgICAgICAgMTgzNgoKICAgICAgICBOb3RlLCBpZiBhbiBlbGVtZW50J3MgY291bnQgaGFzIGJlZW4gc2V0IHRvIHplcm8gb3IgaXMgYSBuZWdhdGl2ZQogICAgICAgIG51bWJlciwgZWxlbWVudHMoKSB3aWxsIGlnbm9yZSBpdC4KCiAgICAgICAgJycnCiAgICAgICAgIyBFbXVsYXRlIEJhZy5kbyBmcm9tIFNtYWxsdGFsayBhbmQgTXVsdGlzZXQuYmVnaW4gZnJvbSBDKysuCiAgICAgICAgcmV0dXJuIF9jaGFpbi5mcm9tX2l0ZXJhYmxlKF9zdGFybWFwKF9yZXBlYXQsIHNlbGYuaXRlbXMoKSkpCgogICAgIyBPdmVycmlkZSBkaWN0IG1ldGhvZHMgd2hlcmUgbmVjZXNzYXJ5CgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbWtleXMoY2xzLCBpdGVyYWJsZSwgdj1Ob25lKToKICAgICAgICAjIFRoZXJlIGlzIG5vIGVxdWl2YWxlbnQgbWV0aG9kIGZvciBjb3VudGVycyBiZWNhdXNlIHNldHRpbmcgdj0xCiAgICAgICAgIyBtZWFucyB0aGF0IG5vIGVsZW1lbnQgY2FuIGhhdmUgYSBjb3VudCBncmVhdGVyIHRoYW4gb25lLgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoCiAgICAgICAgICAgICdDb3VudGVyLmZyb21rZXlzKCkgaXMgdW5kZWZpbmVkLiAgVXNlIENvdW50ZXIoaXRlcmFibGUpIGluc3RlYWQuJykKCiAgICBkZWYgdXBkYXRlKHNlbGYsIGl0ZXJhYmxlPU5vbmUsICoqa3dkcyk6CiAgICAgICAgJycnTGlrZSBkaWN0LnVwZGF0ZSgpIGJ1dCBhZGQgY291bnRzIGluc3RlYWQgb2YgcmVwbGFjaW5nIHRoZW0uCgogICAgICAgIFNvdXJjZSBjYW4gYmUgYW4gaXRlcmFibGUsIGEgZGljdGlvbmFyeSwgb3IgYW5vdGhlciBDb3VudGVyIGluc3RhbmNlLgoKICAgICAgICA+Pj4gYyA9IENvdW50ZXIoJ3doaWNoJykKICAgICAgICA+Pj4gYy51cGRhdGUoJ3dpdGNoJykgICAgICAgICAgICMgYWRkIGVsZW1lbnRzIGZyb20gYW5vdGhlciBpdGVyYWJsZQogICAgICAgID4+PiBkID0gQ291bnRlcignd2F0Y2gnKQogICAgICAgID4+PiBjLnVwZGF0ZShkKSAgICAgICAgICAgICAgICAgIyBhZGQgZWxlbWVudHMgZnJvbSBhbm90aGVyIGNvdW50ZXIKICAgICAgICA+Pj4gY1snaCddICAgICAgICAgICAgICAgICAgICAgICMgZm91ciAnaCcgaW4gd2hpY2gsIHdpdGNoLCBhbmQgd2F0Y2gKICAgICAgICA0CgogICAgICAgICcnJwogICAgICAgICMgVGhlIHJlZ3VsYXIgZGljdC51cGRhdGUoKSBvcGVyYXRpb24gbWFrZXMgbm8gc2Vuc2UgaGVyZSBiZWNhdXNlIHRoZQogICAgICAgICMgcmVwbGFjZSBiZWhhdmlvciByZXN1bHRzIGluIHRoZSBzb21lIG9mIG9yaWdpbmFsIHVudG91Y2hlZCBjb3VudHMKICAgICAgICAjIGJlaW5nIG1peGVkLWluIHdpdGggYWxsIG9mIHRoZSBvdGhlciBjb3VudHMgZm9yIGEgbWlzbWFzaCB0aGF0CiAgICAgICAgIyBkb2Vzbid0IGhhdmUgYSBzdHJhaWdodC1mb3J3YXJkIGludGVycHJldGF0aW9uIGluIG1vc3QgY291bnRpbmcKICAgICAgICAjIGNvbnRleHRzLiAgSW5zdGVhZCwgd2UgaW1wbGVtZW50IHN0cmFpZ2h0LWFkZGl0aW9uLiAgQm90aCB0aGUgaW5wdXRzCiAgICAgICAgIyBhbmQgb3V0cHV0cyBhcmUgYWxsb3dlZCB0byBjb250YWluIHplcm8gYW5kIG5lZ2F0aXZlIGNvdW50cy4KCiAgICAgICAgaWYgaXRlcmFibGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoaXRlcmFibGUsIE1hcHBpbmcpOgogICAgICAgICAgICAgICAgaWYgc2VsZjoKICAgICAgICAgICAgICAgICAgICBzZWxmX2dldCA9IHNlbGYuZ2V0CiAgICAgICAgICAgICAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIGl0ZXJhYmxlLml0ZW1zKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGZbZWxlbV0gPSBjb3VudCArIHNlbGZfZ2V0KGVsZW0sIDApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHN1cGVyKCkudXBkYXRlKGl0ZXJhYmxlKSAjIGZhc3QgcGF0aCB3aGVuIGNvdW50ZXIgaXMgZW1wdHkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIF9jb3VudF9lbGVtZW50cyhzZWxmLCBpdGVyYWJsZSkKICAgICAgICBpZiBrd2RzOgogICAgICAgICAgICBzZWxmLnVwZGF0ZShrd2RzKQoKICAgIGRlZiBzdWJ0cmFjdChzZWxmLCBpdGVyYWJsZT1Ob25lLCAqKmt3ZHMpOgogICAgICAgICcnJ0xpa2UgZGljdC51cGRhdGUoKSBidXQgc3VidHJhY3RzIGNvdW50cyBpbnN0ZWFkIG9mIHJlcGxhY2luZyB0aGVtLgogICAgICAgIENvdW50cyBjYW4gYmUgcmVkdWNlZCBiZWxvdyB6ZXJvLiAgQm90aCB0aGUgaW5wdXRzIGFuZCBvdXRwdXRzIGFyZQogICAgICAgIGFsbG93ZWQgdG8gY29udGFpbiB6ZXJvIGFuZCBuZWdhdGl2ZSBjb3VudHMuCgogICAgICAgIFNvdXJjZSBjYW4gYmUgYW4gaXRlcmFibGUsIGEgZGljdGlvbmFyeSwgb3IgYW5vdGhlciBDb3VudGVyIGluc3RhbmNlLgoKICAgICAgICA+Pj4gYyA9IENvdW50ZXIoJ3doaWNoJykKICAgICAgICA+Pj4gYy5zdWJ0cmFjdCgnd2l0Y2gnKSAgICAgICAgICAgICAjIHN1YnRyYWN0IGVsZW1lbnRzIGZyb20gYW5vdGhlciBpdGVyYWJsZQogICAgICAgID4+PiBjLnN1YnRyYWN0KENvdW50ZXIoJ3dhdGNoJykpICAgICMgc3VidHJhY3QgZWxlbWVudHMgZnJvbSBhbm90aGVyIGNvdW50ZXIKICAgICAgICA+Pj4gY1snaCddICAgICAgICAgICAgICAgICAgICAgICAgICAjIDIgaW4gd2hpY2gsIG1pbnVzIDEgaW4gd2l0Y2gsIG1pbnVzIDEgaW4gd2F0Y2gKICAgICAgICAwCiAgICAgICAgPj4+IGNbJ3cnXSAgICAgICAgICAgICAgICAgICAgICAgICAgIyAxIGluIHdoaWNoLCBtaW51cyAxIGluIHdpdGNoLCBtaW51cyAxIGluIHdhdGNoCiAgICAgICAgLTEKCiAgICAgICAgJycnCiAgICAgICAgaWYgaXRlcmFibGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGZfZ2V0ID0gc2VsZi5nZXQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShpdGVyYWJsZSwgTWFwcGluZyk6CiAgICAgICAgICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gaXRlcmFibGUuaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICBzZWxmW2VsZW1dID0gc2VsZl9nZXQoZWxlbSwgMCkgLSBjb3VudAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZm9yIGVsZW0gaW4gaXRlcmFibGU6CiAgICAgICAgICAgICAgICAgICAgc2VsZltlbGVtXSA9IHNlbGZfZ2V0KGVsZW0sIDApIC0gMQogICAgICAgIGlmIGt3ZHM6CiAgICAgICAgICAgIHNlbGYuc3VidHJhY3Qoa3dkcykKCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICAnUmV0dXJuIGEgc2hhbGxvdyBjb3B5LicKICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18oc2VsZikKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18sIChkaWN0KHNlbGYpLCkKCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwgZWxlbSk6CiAgICAgICAgJ0xpa2UgZGljdC5fX2RlbGl0ZW1fXygpIGJ1dCBkb2VzIG5vdCByYWlzZSBLZXlFcnJvciBmb3IgbWlzc2luZyB2YWx1ZXMuJwogICAgICAgIGlmIGVsZW0gaW4gc2VsZjoKICAgICAgICAgICAgc3VwZXIoKS5fX2RlbGl0ZW1fXyhlbGVtKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICBpZiBub3Qgc2VsZjoKICAgICAgICAgICAgcmV0dXJuICclcygpJyAlIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpdGVtcyA9ICcsICcuam9pbihtYXAoJyVyOiAlcicuX19tb2RfXywgc2VsZi5tb3N0X2NvbW1vbigpKSkKICAgICAgICAgICAgcmV0dXJuICclcyh7JXN9KScgJSAoc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIGl0ZW1zKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgICAgICMgaGFuZGxlIGNhc2Ugd2hlcmUgdmFsdWVzIGFyZSBub3Qgb3JkZXJhYmxlCiAgICAgICAgICAgIHJldHVybiAnezB9KHsxIXJ9KScuZm9ybWF0KHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBkaWN0KHNlbGYpKQoKICAgICMgTXVsdGlzZXQtc3R5bGUgbWF0aGVtYXRpY2FsIG9wZXJhdGlvbnMgZGlzY3Vzc2VkIGluOgogICAgIyAgICAgICBLbnV0aCBUQU9DUCBWb2x1bWUgSUkgc2VjdGlvbiA0LjYuMyBleGVyY2lzZSAxOQogICAgIyAgICAgICBhbmQgYXQgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NdWx0aXNldAogICAgIwogICAgIyBPdXRwdXRzIGd1YXJhbnRlZWQgdG8gb25seSBpbmNsdWRlIHBvc2l0aXZlIGNvdW50cy4KICAgICMKICAgICMgVG8gc3RyaXAgbmVnYXRpdmUgYW5kIHplcm8gY291bnRzLCBhZGQtaW4gYW4gZW1wdHkgY291bnRlcjoKICAgICMgICAgICAgYyArPSBDb3VudGVyKCkKCiAgICBkZWYgX19hZGRfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgJycnQWRkIGNvdW50cyBmcm9tIHR3byBjb3VudGVycy4KCiAgICAgICAgPj4+IENvdW50ZXIoJ2FiYmInKSArIENvdW50ZXIoJ2JjYycpCiAgICAgICAgQ291bnRlcih7J2InOiA0LCAnYyc6IDIsICdhJzogMX0pCgogICAgICAgICcnJwogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBDb3VudGVyKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgcmVzdWx0ID0gQ291bnRlcigpCiAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIHNlbGYuaXRlbXMoKToKICAgICAgICAgICAgbmV3Y291bnQgPSBjb3VudCArIG90aGVyW2VsZW1dCiAgICAgICAgICAgIGlmIG5ld2NvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IG5ld2NvdW50CiAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIG90aGVyLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGVsZW0gbm90IGluIHNlbGYgYW5kIGNvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IGNvdW50CiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBfX3N1Yl9fKHNlbGYsIG90aGVyKToKICAgICAgICAnJycgU3VidHJhY3QgY291bnQsIGJ1dCBrZWVwIG9ubHkgcmVzdWx0cyB3aXRoIHBvc2l0aXZlIGNvdW50cy4KCiAgICAgICAgPj4+IENvdW50ZXIoJ2FiYmJjJykgLSBDb3VudGVyKCdiY2NkJykKICAgICAgICBDb3VudGVyKHsnYic6IDIsICdhJzogMX0pCgogICAgICAgICcnJwogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBDb3VudGVyKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgcmVzdWx0ID0gQ291bnRlcigpCiAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIHNlbGYuaXRlbXMoKToKICAgICAgICAgICAgbmV3Y291bnQgPSBjb3VudCAtIG90aGVyW2VsZW1dCiAgICAgICAgICAgIGlmIG5ld2NvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IG5ld2NvdW50CiAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIG90aGVyLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGVsZW0gbm90IGluIHNlbGYgYW5kIGNvdW50IDwgMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IDAgLSBjb3VudAogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgX19vcl9fKHNlbGYsIG90aGVyKToKICAgICAgICAnJydVbmlvbiBpcyB0aGUgbWF4aW11bSBvZiB2YWx1ZSBpbiBlaXRoZXIgb2YgdGhlIGlucHV0IGNvdW50ZXJzLgoKICAgICAgICA+Pj4gQ291bnRlcignYWJiYicpIHwgQ291bnRlcignYmNjJykKICAgICAgICBDb3VudGVyKHsnYic6IDMsICdjJzogMiwgJ2EnOiAxfSkKCiAgICAgICAgJycnCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENvdW50ZXIpOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKICAgICAgICByZXN1bHQgPSBDb3VudGVyKCkKICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gc2VsZi5pdGVtcygpOgogICAgICAgICAgICBvdGhlcl9jb3VudCA9IG90aGVyW2VsZW1dCiAgICAgICAgICAgIG5ld2NvdW50ID0gb3RoZXJfY291bnQgaWYgY291bnQgPCBvdGhlcl9jb3VudCBlbHNlIGNvdW50CiAgICAgICAgICAgIGlmIG5ld2NvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IG5ld2NvdW50CiAgICAgICAgZm9yIGVsZW0sIGNvdW50IGluIG90aGVyLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGVsZW0gbm90IGluIHNlbGYgYW5kIGNvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IGNvdW50CiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBfX2FuZF9fKHNlbGYsIG90aGVyKToKICAgICAgICAnJycgSW50ZXJzZWN0aW9uIGlzIHRoZSBtaW5pbXVtIG9mIGNvcnJlc3BvbmRpbmcgY291bnRzLgogICAgCiAgICAgICAgPj4+IENvdW50ZXIoJ2FiYmInKSAmIENvdW50ZXIoJ2JjYycpCiAgICAgICAgQ291bnRlcih7J2InOiAxfSkKCiAgICAgICAgJycnCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENvdW50ZXIpOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKICAgICAgICByZXN1bHQgPSBDb3VudGVyKCkKICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gc2VsZi5pdGVtcygpOgogICAgICAgICAgICBvdGhlcl9jb3VudCA9IG90aGVyW2VsZW1dCiAgICAgICAgICAgIG5ld2NvdW50ID0gY291bnQgaWYgY291bnQgPCBvdGhlcl9jb3VudCBlbHNlIG90aGVyX2NvdW50CiAgICAgICAgICAgIGlmIG5ld2NvdW50ID4gMDoKICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtXSA9IG5ld2NvdW50CiAgICAgICAgcmV0dXJuIHJlc3VsdAoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgIENoYWluTWFwIChoZWxwZXIgZm9yIGNvbmZpZ3BhcnNlcikKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpjbGFzcyBDaGFpbk1hcChNdXRhYmxlTWFwcGluZyk6CiAgICAnJycgQSBDaGFpbk1hcCBncm91cHMgbXVsdGlwbGUgZGljdHMgKG9yIG90aGVyIG1hcHBpbmdzKSB0b2dldGhlcgogICAgdG8gY3JlYXRlIGEgc2luZ2xlLCB1cGRhdGVhYmxlIHZpZXcuCgogICAgVGhlIHVuZGVybHlpbmcgbWFwcGluZ3MgYXJlIHN0b3JlZCBpbiBhIGxpc3QuICBUaGF0IGxpc3QgaXMgcHVibGljIGFuZCBjYW4KICAgIGFjY2Vzc2VkIG9yIHVwZGF0ZWQgdXNpbmcgdGhlICptYXBzKiBhdHRyaWJ1dGUuICBUaGVyZSBpcyBubyBvdGhlciBzdGF0ZS4KCiAgICBMb29rdXBzIHNlYXJjaCB0aGUgdW5kZXJseWluZyBtYXBwaW5ncyBzdWNjZXNzaXZlbHkgdW50aWwgYSBrZXkgaXMgZm91bmQuCiAgICBJbiBjb250cmFzdCwgd3JpdGVzLCB1cGRhdGVzLCBhbmQgZGVsZXRpb25zIG9ubHkgb3BlcmF0ZSBvbiB0aGUgZmlyc3QKICAgIG1hcHBpbmcuCgogICAgJycnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsICptYXBzKToKICAgICAgICAnJydJbml0aWFsaXplIGEgQ2hhaW5NYXAgYnkgc2V0dGluZyAqbWFwcyogdG8gdGhlIGdpdmVuIG1hcHBpbmdzLgogICAgICAgIElmIG5vIG1hcHBpbmdzIGFyZSBwcm92aWRlZCwgYSBzaW5nbGUgZW1wdHkgZGljdGlvbmFyeSBpcyB1c2VkLgoKICAgICAgICAnJycKICAgICAgICBzZWxmLm1hcHMgPSBsaXN0KG1hcHMpIG9yIFt7fV0gICAgICAgICAgIyBhbHdheXMgYXQgbGVhc3Qgb25lIG1hcAoKICAgIGRlZiBfX21pc3NpbmdfXyhzZWxmLCBrZXkpOgogICAgICAgIHJhaXNlIEtleUVycm9yKGtleSkKCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KToKICAgICAgICBmb3IgbWFwcGluZyBpbiBzZWxmLm1hcHM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJldHVybiBtYXBwaW5nW2tleV0gICAgICAgICAgICAgIyBjYW4ndCB1c2UgJ2tleSBpbiBtYXBwaW5nJyB3aXRoIGRlZmF1bHRkaWN0CiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICByZXR1cm4gc2VsZi5fX21pc3NpbmdfXyhrZXkpICAgICAgICAgICAgIyBzdXBwb3J0IHN1YmNsYXNzZXMgdGhhdCBkZWZpbmUgX19taXNzaW5nX18KCiAgICBkZWYgZ2V0KHNlbGYsIGtleSwgZGVmYXVsdD1Ob25lKToKICAgICAgICByZXR1cm4gc2VsZltrZXldIGlmIGtleSBpbiBzZWxmIGVsc2UgZGVmYXVsdAoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiBsZW4oc2V0KCkudW5pb24oKnNlbGYubWFwcykpICAgICAjIHJldXNlcyBzdG9yZWQgaGFzaCB2YWx1ZXMgaWYgcG9zc2libGUKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGl0ZXIoc2V0KCkudW5pb24oKnNlbGYubWFwcykpCgogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOgogICAgICAgIHJldHVybiBhbnkoa2V5IGluIG0gZm9yIG0gaW4gc2VsZi5tYXBzKQoKICAgIGRlZiBfX2Jvb2xfXyhzZWxmKToKICAgICAgICByZXR1cm4gYW55KHNlbGYubWFwcykKCiAgICAjZml4bWUsIGJyeXRob24KICAgICNAX3JlY3Vyc2l2ZV9yZXByKCkKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gJ3swLl9fY2xhc3NfXy5fX25hbWVfX30oezF9KScuZm9ybWF0KAogICAgICAgICAgICBzZWxmLCAnLCAnLmpvaW4obWFwKHJlcHIsIHNlbGYubWFwcykpKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gJywnLmpvaW4oc3RyKF9tYXApIGZvciBfbWFwIGluIHNlbGYubWFwcykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9ta2V5cyhjbHMsIGl0ZXJhYmxlLCAqYXJncyk6CiAgICAgICAgJ0NyZWF0ZSBhIENoYWluTWFwIHdpdGggYSBzaW5nbGUgZGljdCBjcmVhdGVkIGZyb20gdGhlIGl0ZXJhYmxlLicKICAgICAgICByZXR1cm4gY2xzKGRpY3QuZnJvbWtleXMoaXRlcmFibGUsICphcmdzKSkKCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICAnTmV3IENoYWluTWFwIG9yIHN1YmNsYXNzIHdpdGggYSBuZXcgY29weSBvZiBtYXBzWzBdIGFuZCByZWZzIHRvIG1hcHNbMTpdJwogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXyhzZWxmLm1hcHNbMF0uY29weSgpLCAqc2VsZi5tYXBzWzE6XSkKCiAgICBfX2NvcHlfXyA9IGNvcHkKCiAgICBkZWYgbmV3X2NoaWxkKHNlbGYpOiAgICAgICAgICAgICAgICAgICAgICAgICMgbGlrZSBEamFuZ28ncyBDb250ZXh0LnB1c2goKQogICAgICAgICdOZXcgQ2hhaW5NYXAgd2l0aCBhIG5ldyBkaWN0IGZvbGxvd2VkIGJ5IGFsbCBwcmV2aW91cyBtYXBzLicKICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18oe30sICpzZWxmLm1hcHMpCgogICAgQHByb3BlcnR5CiAgICBkZWYgcGFyZW50cyhzZWxmKTogICAgICAgICAgICAgICAgICAgICAgICAgICMgbGlrZSBEamFuZ28ncyBDb250ZXh0LnBvcCgpCiAgICAgICAgJ05ldyBDaGFpbk1hcCBmcm9tIG1hcHNbMTpdLicKICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18oKnNlbGYubWFwc1sxOl0pCgogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgdmFsdWUpOgogICAgICAgIHNlbGYubWFwc1swXVtrZXldID0gdmFsdWUKCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRlbCBzZWxmLm1hcHNbMF1ba2V5XQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3IoJ0tleSBub3QgZm91bmQgaW4gdGhlIGZpcnN0IG1hcHBpbmc6IHshcn0nLmZvcm1hdChrZXkpKQoKICAgIGRlZiBwb3BpdGVtKHNlbGYpOgogICAgICAgICdSZW1vdmUgYW5kIHJldHVybiBhbiBpdGVtIHBhaXIgZnJvbSBtYXBzWzBdLiBSYWlzZSBLZXlFcnJvciBpcyBtYXBzWzBdIGlzIGVtcHR5LicKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLm1hcHNbMF0ucG9waXRlbSgpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICByYWlzZSBLZXlFcnJvcignTm8ga2V5cyBmb3VuZCBpbiB0aGUgZmlyc3QgbWFwcGluZy4nKQoKICAgIGRlZiBwb3Aoc2VsZiwga2V5LCAqYXJncyk6CiAgICAgICAgJ1JlbW92ZSAqa2V5KiBmcm9tIG1hcHNbMF0gYW5kIHJldHVybiBpdHMgdmFsdWUuIFJhaXNlIEtleUVycm9yIGlmICprZXkqIG5vdCBpbiBtYXBzWzBdLicKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLm1hcHNbMF0ucG9wKGtleSwgKmFyZ3MpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAjcmFpc2UgS2V5RXJyb3IoJ0tleSBub3QgZm91bmQgaW4gdGhlIGZpcnN0IG1hcHBpbmc6IHshcn0nLmZvcm1hdChrZXkpKQogICAgICAgICAgICByYWlzZSBLZXlFcnJvcignS2V5IG5vdCBmb3VuZCBpbiB0aGUgZmlyc3QgbWFwcGluZzogJXMnICUga2V5KQoKICAgIGRlZiBjbGVhcihzZWxmKToKICAgICAgICAnQ2xlYXIgbWFwc1swXSwgbGVhdmluZyBtYXBzWzE6XSBpbnRhY3QuJwogICAgICAgIHNlbGYubWFwc1swXS5jbGVhcigpCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIFVzZXJEaWN0CiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpjbGFzcyBVc2VyRGljdChNdXRhYmxlTWFwcGluZyk6CgogICAgIyBTdGFydCBieSBmaWxsaW5nLW91dCB0aGUgYWJzdHJhY3QgbWV0aG9kcwogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRpY3Q9Tm9uZSwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuZGF0YSA9IHt9CiAgICAgICAgaWYgZGljdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi51cGRhdGUoZGljdCkKICAgICAgICBpZiBsZW4oa3dhcmdzKToKICAgICAgICAgICAgc2VsZi51cGRhdGUoa3dhcmdzKQogICAgZGVmIF9fbGVuX18oc2VsZik6IHJldHVybiBsZW4oc2VsZi5kYXRhKQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6CiAgICAgICAgaWYga2V5IGluIHNlbGYuZGF0YToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZGF0YVtrZXldCiAgICAgICAgaWYgaGFzYXR0cihzZWxmLl9fY2xhc3NfXywgIl9fbWlzc2luZ19fIik6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXy5fX21pc3NpbmdfXyhzZWxmLCBrZXkpCiAgICAgICAgcmFpc2UgS2V5RXJyb3Ioa2V5KQogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgaXRlbSk6IHNlbGYuZGF0YVtrZXldID0gaXRlbQogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGtleSk6IGRlbCBzZWxmLmRhdGFba2V5XQogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBpdGVyKHNlbGYuZGF0YSkKCiAgICAjIE1vZGlmeSBfX2NvbnRhaW5zX18gdG8gd29yayBjb3JyZWN0bHkgd2hlbiBfX21pc3NpbmdfXyBpcyBwcmVzZW50CiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGtleSk6CiAgICAgICAgcmV0dXJuIGtleSBpbiBzZWxmLmRhdGEKCiAgICAjIE5vdywgYWRkIHRoZSBtZXRob2RzIGluIGRpY3RzIGJ1dCBub3QgaW4gTXV0YWJsZU1hcHBpbmcKICAgIGRlZiBfX3JlcHJfXyhzZWxmKTogcmV0dXJuIHJlcHIoc2VsZi5kYXRhKQogICAgZGVmIGNvcHkoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fX2NsYXNzX18gaXMgVXNlckRpY3Q6CiAgICAgICAgICAgIHJldHVybiBVc2VyRGljdChzZWxmLmRhdGEuY29weSgpKQogICAgICAgIGltcG9ydCBjb3B5CiAgICAgICAgZGF0YSA9IHNlbGYuZGF0YQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5kYXRhID0ge30KICAgICAgICAgICAgYyA9IGNvcHkuY29weShzZWxmKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHNlbGYuZGF0YSA9IGRhdGEKICAgICAgICBjLnVwZGF0ZShzZWxmKQogICAgICAgIHJldHVybiBjCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9ta2V5cyhjbHMsIGl0ZXJhYmxlLCB2YWx1ZT1Ob25lKToKICAgICAgICBkID0gY2xzKCkKICAgICAgICBmb3Iga2V5IGluIGl0ZXJhYmxlOgogICAgICAgICAgICBkW2tleV0gPSB2YWx1ZQogICAgICAgIHJldHVybiBkCgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyBVc2VyTGlzdAojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgVXNlclN0cmluZwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwo=',
'/Lib/collections/abc.py':'IyBDb3B5cmlnaHQgMjAwNyBHb29nbGUsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4NCiMgTGljZW5zZWQgdG8gUFNGIHVuZGVyIGEgQ29udHJpYnV0b3IgQWdyZWVtZW50Lg0KDQoiIiJBYnN0cmFjdCBCYXNlIENsYXNzZXMgKEFCQ3MpIGZvciBjb2xsZWN0aW9ucywgYWNjb3JkaW5nIHRvIFBFUCAzMTE5Lg0KDQpVbml0IHRlc3RzIGFyZSBpbiB0ZXN0X2NvbGxlY3Rpb25zLg0KIiIiDQoNCmZyb20gYWJjIGltcG9ydCBBQkNNZXRhLCBhYnN0cmFjdG1ldGhvZA0KaW1wb3J0IHN5cw0KDQpfX2FsbF9fID0gWyJIYXNoYWJsZSIsICJJdGVyYWJsZSIsICJJdGVyYXRvciIsDQogICAgICAgICAgICJTaXplZCIsICJDb250YWluZXIiLCAiQ2FsbGFibGUiLA0KICAgICAgICAgICAiU2V0IiwgIk11dGFibGVTZXQiLA0KICAgICAgICAgICAiTWFwcGluZyIsICJNdXRhYmxlTWFwcGluZyIsDQogICAgICAgICAgICJNYXBwaW5nVmlldyIsICJLZXlzVmlldyIsICJJdGVtc1ZpZXciLCAiVmFsdWVzVmlldyIsDQogICAgICAgICAgICJTZXF1ZW5jZSIsICJNdXRhYmxlU2VxdWVuY2UiLA0KICAgICAgICAgICAiQnl0ZVN0cmluZyIsDQogICAgICAgICAgIF0NCg0KIyBQcml2YXRlIGxpc3Qgb2YgdHlwZXMgdGhhdCB3ZSB3YW50IHRvIHJlZ2lzdGVyIHdpdGggdGhlIHZhcmlvdXMgQUJDcw0KIyBzbyB0aGF0IHRoZXkgd2lsbCBwYXNzIHRlc3RzIGxpa2U6DQojICAgICAgIGl0ID0gaXRlcihzb21lYnl0ZWFycmF5KQ0KIyAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShpdCwgSXRlcmFibGUpDQojIE5vdGU6ICBpbiBvdGhlciBpbXBsZW1lbnRhdGlvbnMsIHRoZXNlIHR5cGVzIG1hbnkgbm90IGJlIGRpc3RpbmN0DQojIGFuZCB0aGV5IG1ha2UgaGF2ZSB0aGVpciBvd24gaW1wbGVtZW50YXRpb24gc3BlY2lmaWMgdHlwZXMgdGhhdA0KIyBhcmUgbm90IGluY2x1ZGVkIG9uIHRoaXMgbGlzdC4NCmJ5dGVzX2l0ZXJhdG9yID0gdHlwZShpdGVyKGInJykpDQpieXRlYXJyYXlfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoYnl0ZWFycmF5KCkpKQ0KI2NhbGxhYmxlX2l0ZXJhdG9yID0gPz8/DQpkaWN0X2tleWl0ZXJhdG9yID0gdHlwZShpdGVyKHt9LmtleXMoKSkpDQpkaWN0X3ZhbHVlaXRlcmF0b3IgPSB0eXBlKGl0ZXIoe30udmFsdWVzKCkpKQ0KZGljdF9pdGVtaXRlcmF0b3IgPSB0eXBlKGl0ZXIoe30uaXRlbXMoKSkpDQpsaXN0X2l0ZXJhdG9yID0gdHlwZShpdGVyKFtdKSkNCmxpc3RfcmV2ZXJzZWl0ZXJhdG9yID0gdHlwZShpdGVyKHJldmVyc2VkKFtdKSkpDQpyYW5nZV9pdGVyYXRvciA9IHR5cGUoaXRlcihyYW5nZSgwKSkpDQpzZXRfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoc2V0KCkpKQ0Kc3RyX2l0ZXJhdG9yID0gdHlwZShpdGVyKCIiKSkNCnR1cGxlX2l0ZXJhdG9yID0gdHlwZShpdGVyKCgpKSkNCnppcF9pdGVyYXRvciA9IHR5cGUoaXRlcih6aXAoKSkpDQojIyB2aWV3cyAjIw0KZGljdF9rZXlzID0gdHlwZSh7fS5rZXlzKCkpDQpkaWN0X3ZhbHVlcyA9IHR5cGUoe30udmFsdWVzKCkpDQpkaWN0X2l0ZW1zID0gdHlwZSh7fS5pdGVtcygpKQ0KIyMgbWlzYyAjIw0KbWFwcGluZ3Byb3h5ID0gdHlwZSh0eXBlLl9fZGljdF9fKQ0KDQoNCiMjIyBPTkUtVFJJQ0sgUE9OSUVTICMjIw0KDQpjbGFzcyBIYXNoYWJsZShtZXRhY2xhc3M9QUJDTWV0YSk6DQoNCiAgICBfX3Nsb3RzX18gPSAoKQ0KDQogICAgQGFic3RyYWN0bWV0aG9kDQogICAgZGVmIF9faGFzaF9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gMA0KDQogICAgQGNsYXNzbWV0aG9kDQogICAgZGVmIF9fc3ViY2xhc3Nob29rX18oY2xzLCBDKToNCiAgICAgICAgaWYgY2xzIGlzIEhhc2hhYmxlOg0KICAgICAgICAgICAgZm9yIEIgaW4gQy5fX21yb19fOg0KICAgICAgICAgICAgICAgIGlmICJfX2hhc2hfXyIgaW4gQi5fX2RpY3RfXzoNCiAgICAgICAgICAgICAgICAgICAgaWYgQi5fX2RpY3RfX1siX19oYXNoX18iXToNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZA0KDQoNCmNsYXNzIEl0ZXJhYmxlKG1ldGFjbGFzcz1BQkNNZXRhKToNCg0KICAgIF9fc2xvdHNfXyA9ICgpDQoNCiAgICBAYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgX19pdGVyX18oc2VsZik6DQogICAgICAgIHdoaWxlIEZhbHNlOg0KICAgICAgICAgICAgeWllbGQgTm9uZQ0KDQogICAgQGNsYXNzbWV0aG9kDQogICAgZGVmIF9fc3ViY2xhc3Nob29rX18oY2xzLCBDKToNCiAgICAgICAgaWYgY2xzIGlzIEl0ZXJhYmxlOg0KICAgICAgICAgICAgaWYgYW55KCJfX2l0ZXJfXyIgaW4gQi5fX2RpY3RfXyBmb3IgQiBpbiBDLl9fbXJvX18pOg0KICAgICAgICAgICAgICAgIHJldHVybiBUcnVlDQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZA0KDQoNCmNsYXNzIEl0ZXJhdG9yKEl0ZXJhYmxlKToNCg0KICAgIF9fc2xvdHNfXyA9ICgpDQoNCiAgICBAYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgX19uZXh0X18oc2VsZik6DQogICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24NCg0KICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToNCiAgICAgICAgcmV0dXJuIHNlbGYNCg0KICAgIEBjbGFzc21ldGhvZA0KICAgIGRlZiBfX3N1YmNsYXNzaG9va19fKGNscywgQyk6DQogICAgICAgIGlmIGNscyBpcyBJdGVyYXRvcjoNCiAgICAgICAgICAgIGlmIChhbnkoIl9fbmV4dF9fIiBpbiBCLl9fZGljdF9fIGZvciBCIGluIEMuX19tcm9fXykgYW5kDQogICAgICAgICAgICAgICAgYW55KCJfX2l0ZXJfXyIgaW4gQi5fX2RpY3RfXyBmb3IgQiBpbiBDLl9fbXJvX18pKToNCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQNCg0KSXRlcmF0b3IucmVnaXN0ZXIoYnl0ZXNfaXRlcmF0b3IpDQpJdGVyYXRvci5yZWdpc3RlcihieXRlYXJyYXlfaXRlcmF0b3IpDQojSXRlcmF0b3IucmVnaXN0ZXIoY2FsbGFibGVfaXRlcmF0b3IpDQpJdGVyYXRvci5yZWdpc3RlcihkaWN0X2tleWl0ZXJhdG9yKQ0KSXRlcmF0b3IucmVnaXN0ZXIoZGljdF92YWx1ZWl0ZXJhdG9yKQ0KSXRlcmF0b3IucmVnaXN0ZXIoZGljdF9pdGVtaXRlcmF0b3IpDQpJdGVyYXRvci5yZWdpc3RlcihsaXN0X2l0ZXJhdG9yKQ0KSXRlcmF0b3IucmVnaXN0ZXIobGlzdF9yZXZlcnNlaXRlcmF0b3IpDQpJdGVyYXRvci5yZWdpc3RlcihyYW5nZV9pdGVyYXRvcikNCkl0ZXJhdG9yLnJlZ2lzdGVyKHNldF9pdGVyYXRvcikNCkl0ZXJhdG9yLnJlZ2lzdGVyKHN0cl9pdGVyYXRvcikNCkl0ZXJhdG9yLnJlZ2lzdGVyKHR1cGxlX2l0ZXJhdG9yKQ0KSXRlcmF0b3IucmVnaXN0ZXIoemlwX2l0ZXJhdG9yKQ0KDQpjbGFzcyBTaXplZChtZXRhY2xhc3M9QUJDTWV0YSk6DQoNCiAgICBfX3Nsb3RzX18gPSAoKQ0KDQogICAgQGFic3RyYWN0bWV0aG9kDQogICAgZGVmIF9fbGVuX18oc2VsZik6DQogICAgICAgIHJldHVybiAwDQoNCiAgICBAY2xhc3NtZXRob2QNCiAgICBkZWYgX19zdWJjbGFzc2hvb2tfXyhjbHMsIEMpOg0KICAgICAgICBpZiBjbHMgaXMgU2l6ZWQ6DQogICAgICAgICAgICBpZiBhbnkoIl9fbGVuX18iIGluIEIuX19kaWN0X18gZm9yIEIgaW4gQy5fX21yb19fKToNCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQNCg0KDQpjbGFzcyBDb250YWluZXIobWV0YWNsYXNzPUFCQ01ldGEpOg0KDQogICAgX19zbG90c19fID0gKCkNCg0KICAgIEBhYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwgeCk6DQogICAgICAgIHJldHVybiBGYWxzZQ0KDQogICAgQGNsYXNzbWV0aG9kDQogICAgZGVmIF9fc3ViY2xhc3Nob29rX18oY2xzLCBDKToNCiAgICAgICAgaWYgY2xzIGlzIENvbnRhaW5lcjoNCiAgICAgICAgICAgIGlmIGFueSgiX19jb250YWluc19fIiBpbiBCLl9fZGljdF9fIGZvciBCIGluIEMuX19tcm9fXyk6DQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkDQoNCg0KY2xhc3MgQ2FsbGFibGUobWV0YWNsYXNzPUFCQ01ldGEpOg0KDQogICAgX19zbG90c19fID0gKCkNCg0KICAgIEBhYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBfX2NhbGxfXyhzZWxmLCAqYXJncywgKiprd2RzKToNCiAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICBAY2xhc3NtZXRob2QNCiAgICBkZWYgX19zdWJjbGFzc2hvb2tfXyhjbHMsIEMpOg0KICAgICAgICBpZiBjbHMgaXMgQ2FsbGFibGU6DQogICAgICAgICAgICBpZiBhbnkoIl9fY2FsbF9fIiBpbiBCLl9fZGljdF9fIGZvciBCIGluIEMuX19tcm9fXyk6DQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkDQoNCg0KIyMjIFNFVFMgIyMjDQoNCg0KY2xhc3MgU2V0KFNpemVkLCBJdGVyYWJsZSwgQ29udGFpbmVyKToNCg0KICAgICIiIkEgc2V0IGlzIGEgZmluaXRlLCBpdGVyYWJsZSBjb250YWluZXIuDQoNCiAgICBUaGlzIGNsYXNzIHByb3ZpZGVzIGNvbmNyZXRlIGdlbmVyaWMgaW1wbGVtZW50YXRpb25zIG9mIGFsbA0KICAgIG1ldGhvZHMgZXhjZXB0IGZvciBfX2NvbnRhaW5zX18sIF9faXRlcl9fIGFuZCBfX2xlbl9fLg0KDQogICAgVG8gb3ZlcnJpZGUgdGhlIGNvbXBhcmlzb25zIChwcmVzdW1hYmx5IGZvciBzcGVlZCwgYXMgdGhlDQogICAgc2VtYW50aWNzIGFyZSBmaXhlZCksIGFsbCB5b3UgaGF2ZSB0byBkbyBpcyByZWRlZmluZSBfX2xlX18gYW5kDQogICAgdGhlbiB0aGUgb3RoZXIgb3BlcmF0aW9ucyB3aWxsIGF1dG9tYXRpY2FsbHkgZm9sbG93IHN1aXQuDQogICAgIiIiDQoNCiAgICBfX3Nsb3RzX18gPSAoKQ0KDQogICAgZGVmIF9fbGVfXyhzZWxmLCBvdGhlcik6DQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBTZXQpOg0KICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkDQogICAgICAgIGlmIGxlbihzZWxmKSA+IGxlbihvdGhlcik6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgZm9yIGVsZW0gaW4gc2VsZjoNCiAgICAgICAgICAgIGlmIGVsZW0gbm90IGluIG90aGVyOg0KICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQ0KICAgICAgICByZXR1cm4gVHJ1ZQ0KDQogICAgZGVmIF9fbHRfXyhzZWxmLCBvdGhlcik6DQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBTZXQpOg0KICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkDQogICAgICAgIHJldHVybiBsZW4oc2VsZikgPCBsZW4ob3RoZXIpIGFuZCBzZWxmLl9fbGVfXyhvdGhlcikNCg0KICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOg0KICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgU2V0KToNCiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZA0KICAgICAgICByZXR1cm4gb3RoZXIgPCBzZWxmDQoNCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFNldCk6DQogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQNCiAgICAgICAgcmV0dXJuIG90aGVyIDw9IHNlbGYNCg0KICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOg0KICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgU2V0KToNCiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZA0KICAgICAgICByZXR1cm4gbGVuKHNlbGYpID09IGxlbihvdGhlcikgYW5kIHNlbGYuX19sZV9fKG90aGVyKQ0KDQogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6DQogICAgICAgIHJldHVybiBub3QgKHNlbGYgPT0gb3RoZXIpDQoNCiAgICBAY2xhc3NtZXRob2QNCiAgICBkZWYgX2Zyb21faXRlcmFibGUoY2xzLCBpdCk6DQogICAgICAgICcnJ0NvbnN0cnVjdCBhbiBpbnN0YW5jZSBvZiB0aGUgY2xhc3MgZnJvbSBhbnkgaXRlcmFibGUgaW5wdXQuDQoNCiAgICAgICAgTXVzdCBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB0aGUgY2xhc3MgY29uc3RydWN0b3Igc2lnbmF0dXJlDQogICAgICAgIGRvZXMgbm90IGFjY2VwdCBhbiBpdGVyYWJsZSBmb3IgYW4gaW5wdXQuDQogICAgICAgICcnJw0KICAgICAgICByZXR1cm4gY2xzKGl0KQ0KDQogICAgZGVmIF9fYW5kX18oc2VsZiwgb3RoZXIpOg0KICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgSXRlcmFibGUpOg0KICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkDQogICAgICAgIHJldHVybiBzZWxmLl9mcm9tX2l0ZXJhYmxlKHZhbHVlIGZvciB2YWx1ZSBpbiBvdGhlciBpZiB2YWx1ZSBpbiBzZWxmKQ0KDQogICAgZGVmIGlzZGlzam9pbnQoc2VsZiwgb3RoZXIpOg0KICAgICAgICBmb3IgdmFsdWUgaW4gb3RoZXI6DQogICAgICAgICAgICBpZiB2YWx1ZSBpbiBzZWxmOg0KICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQ0KICAgICAgICByZXR1cm4gVHJ1ZQ0KDQogICAgZGVmIF9fb3JfXyhzZWxmLCBvdGhlcik6DQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBJdGVyYWJsZSk6DQogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQNCiAgICAgICAgY2hhaW4gPSAoZSBmb3IgcyBpbiAoc2VsZiwgb3RoZXIpIGZvciBlIGluIHMpDQogICAgICAgIHJldHVybiBzZWxmLl9mcm9tX2l0ZXJhYmxlKGNoYWluKQ0KDQogICAgZGVmIF9fc3ViX18oc2VsZiwgb3RoZXIpOg0KICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgU2V0KToNCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBJdGVyYWJsZSk6DQogICAgICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkDQogICAgICAgICAgICBvdGhlciA9IHNlbGYuX2Zyb21faXRlcmFibGUob3RoZXIpDQogICAgICAgIHJldHVybiBzZWxmLl9mcm9tX2l0ZXJhYmxlKHZhbHVlIGZvciB2YWx1ZSBpbiBzZWxmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlIG5vdCBpbiBvdGhlcikNCg0KICAgIGRlZiBfX3hvcl9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFNldCk6DQogICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgSXRlcmFibGUpOg0KICAgICAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZA0KICAgICAgICAgICAgb3RoZXIgPSBzZWxmLl9mcm9tX2l0ZXJhYmxlKG90aGVyKQ0KICAgICAgICByZXR1cm4gKHNlbGYgLSBvdGhlcikgfCAob3RoZXIgLSBzZWxmKQ0KDQogICAgZGVmIF9oYXNoKHNlbGYpOg0KICAgICAgICAiIiJDb21wdXRlIHRoZSBoYXNoIHZhbHVlIG9mIGEgc2V0Lg0KDQogICAgICAgIE5vdGUgdGhhdCB3ZSBkb24ndCBkZWZpbmUgX19oYXNoX186IG5vdCBhbGwgc2V0cyBhcmUgaGFzaGFibGUuDQogICAgICAgIEJ1dCBpZiB5b3UgZGVmaW5lIGEgaGFzaGFibGUgc2V0IHR5cGUsIGl0cyBfX2hhc2hfXyBzaG91bGQNCiAgICAgICAgY2FsbCB0aGlzIGZ1bmN0aW9uLg0KDQogICAgICAgIFRoaXMgbXVzdCBiZSBjb21wYXRpYmxlIF9fZXFfXy4NCg0KICAgICAgICBBbGwgc2V0cyBvdWdodCB0byBjb21wYXJlIGVxdWFsIGlmIHRoZXkgY29udGFpbiB0aGUgc2FtZQ0KICAgICAgICBlbGVtZW50cywgcmVnYXJkbGVzcyBvZiBob3cgdGhleSBhcmUgaW1wbGVtZW50ZWQsIGFuZA0KICAgICAgICByZWdhcmRsZXNzIG9mIHRoZSBvcmRlciBvZiB0aGUgZWxlbWVudHM7IHNvIHRoZXJlJ3Mgbm90IG11Y2gNCiAgICAgICAgZnJlZWRvbSBmb3IgX19lcV9fIG9yIF9faGFzaF9fLiAgV2UgbWF0Y2ggdGhlIGFsZ29yaXRobSB1c2VkDQogICAgICAgIGJ5IHRoZSBidWlsdC1pbiBmcm96ZW5zZXQgdHlwZS4NCiAgICAgICAgIiIiDQogICAgICAgIE1BWCA9IHN5cy5tYXhzaXplDQogICAgICAgIE1BU0sgPSAyICogTUFYICsgMQ0KICAgICAgICBuID0gbGVuKHNlbGYpDQogICAgICAgIGggPSAxOTI3ODY4MjM3ICogKG4gKyAxKQ0KICAgICAgICBoICY9IE1BU0sNCiAgICAgICAgZm9yIHggaW4gc2VsZjoNCiAgICAgICAgICAgIGh4ID0gaGFzaCh4KQ0KICAgICAgICAgICAgaCBePSAoaHggXiAoaHggPDwgMTYpIF4gODk4Njk3NDcpICAqIDM2NDQ3OTgxNjcNCiAgICAgICAgICAgIGggJj0gTUFTSw0KICAgICAgICBoID0gaCAqIDY5MDY5ICsgOTA3MTMzOTIzDQogICAgICAgIGggJj0gTUFTSw0KICAgICAgICBpZiBoID4gTUFYOg0KICAgICAgICAgICAgaCAtPSBNQVNLICsgMQ0KICAgICAgICBpZiBoID09IC0xOg0KICAgICAgICAgICAgaCA9IDU5MDkyMzcxMw0KICAgICAgICByZXR1cm4gaA0KDQpTZXQucmVnaXN0ZXIoZnJvemVuc2V0KQ0KDQoNCmNsYXNzIE11dGFibGVTZXQoU2V0KToNCg0KICAgIF9fc2xvdHNfXyA9ICgpDQoNCiAgICBAYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgYWRkKHNlbGYsIHZhbHVlKToNCiAgICAgICAgIiIiQWRkIGFuIGVsZW1lbnQuIiIiDQogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3INCg0KICAgIEBhYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBkaXNjYXJkKHNlbGYsIHZhbHVlKToNCiAgICAgICAgIiIiUmVtb3ZlIGFuIGVsZW1lbnQuICBEbyBub3QgcmFpc2UgYW4gZXhjZXB0aW9uIGlmIGFic2VudC4iIiINCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcg0KDQogICAgZGVmIHJlbW92ZShzZWxmLCB2YWx1ZSk6DQogICAgICAgICIiIlJlbW92ZSBhbiBlbGVtZW50LiBJZiBub3QgYSBtZW1iZXIsIHJhaXNlIGEgS2V5RXJyb3IuIiIiDQogICAgICAgIGlmIHZhbHVlIG5vdCBpbiBzZWxmOg0KICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3IodmFsdWUpDQogICAgICAgIHNlbGYuZGlzY2FyZCh2YWx1ZSkNCg0KICAgIGRlZiBwb3Aoc2VsZik6DQogICAgICAgICIiIlJldHVybiB0aGUgcG9wcGVkIHZhbHVlLiAgUmFpc2UgS2V5RXJyb3IgaWYgZW1wdHkuIiIiDQogICAgICAgIGl0ID0gaXRlcihzZWxmKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICB2YWx1ZSA9IG5leHQoaXQpDQogICAgICAgIGV4Y2VwdCBTdG9wSXRlcmF0aW9uOg0KICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3INCiAgICAgICAgc2VsZi5kaXNjYXJkKHZhbHVlKQ0KICAgICAgICByZXR1cm4gdmFsdWUNCg0KICAgIGRlZiBjbGVhcihzZWxmKToNCiAgICAgICAgIiIiVGhpcyBpcyBzbG93IChjcmVhdGVzIE4gbmV3IGl0ZXJhdG9ycyEpIGJ1dCBlZmZlY3RpdmUuIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICAgICAgc2VsZi5wb3AoKQ0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6DQogICAgICAgICAgICBwYXNzDQoNCiAgICBkZWYgX19pb3JfXyhzZWxmLCBpdCk6DQogICAgICAgIGZvciB2YWx1ZSBpbiBpdDoNCiAgICAgICAgICAgIHNlbGYuYWRkKHZhbHVlKQ0KICAgICAgICByZXR1cm4gc2VsZg0KDQogICAgZGVmIF9faWFuZF9fKHNlbGYsIGl0KToNCiAgICAgICAgZm9yIHZhbHVlIGluIChzZWxmIC0gaXQpOg0KICAgICAgICAgICAgc2VsZi5kaXNjYXJkKHZhbHVlKQ0KICAgICAgICByZXR1cm4gc2VsZg0KDQogICAgZGVmIF9faXhvcl9fKHNlbGYsIGl0KToNCiAgICAgICAgaWYgaXQgaXMgc2VsZjoNCiAgICAgICAgICAgIHNlbGYuY2xlYXIoKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoaXQsIFNldCk6DQogICAgICAgICAgICAgICAgaXQgPSBzZWxmLl9mcm9tX2l0ZXJhYmxlKGl0KQ0KICAgICAgICAgICAgZm9yIHZhbHVlIGluIGl0Og0KICAgICAgICAgICAgICAgIGlmIHZhbHVlIGluIHNlbGY6DQogICAgICAgICAgICAgICAgICAgIHNlbGYuZGlzY2FyZCh2YWx1ZSkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZCh2YWx1ZSkNCiAgICAgICAgcmV0dXJuIHNlbGYNCg0KICAgIGRlZiBfX2lzdWJfXyhzZWxmLCBpdCk6DQogICAgICAgIGlmIGl0IGlzIHNlbGY6DQogICAgICAgICAgICBzZWxmLmNsZWFyKCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGZvciB2YWx1ZSBpbiBpdDoNCiAgICAgICAgICAgICAgICBzZWxmLmRpc2NhcmQodmFsdWUpDQogICAgICAgIHJldHVybiBzZWxmDQoNCk11dGFibGVTZXQucmVnaXN0ZXIoc2V0KQ0KDQoNCiMjIyBNQVBQSU5HUyAjIyMNCg0KDQpjbGFzcyBNYXBwaW5nKFNpemVkLCBJdGVyYWJsZSwgQ29udGFpbmVyKToNCg0KICAgIF9fc2xvdHNfXyA9ICgpDQoNCiAgICBAYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KToNCiAgICAgICAgcmFpc2UgS2V5RXJyb3INCg0KICAgIGRlZiBnZXQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXR1cm4gc2VsZltrZXldDQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0DQoNCiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGtleSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHNlbGZba2V5XQ0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBUcnVlDQoNCiAgICBkZWYga2V5cyhzZWxmKToNCiAgICAgICAgcmV0dXJuIEtleXNWaWV3KHNlbGYpDQoNCiAgICBkZWYgaXRlbXMoc2VsZik6DQogICAgICAgIHJldHVybiBJdGVtc1ZpZXcoc2VsZikNCg0KICAgIGRlZiB2YWx1ZXMoc2VsZik6DQogICAgICAgIHJldHVybiBWYWx1ZXNWaWV3KHNlbGYpDQoNCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToNCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIE1hcHBpbmcpOg0KICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkDQogICAgICAgIHJldHVybiBkaWN0KHNlbGYuaXRlbXMoKSkgPT0gZGljdChvdGhlci5pdGVtcygpKQ0KDQogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6DQogICAgICAgIHJldHVybiBub3QgKHNlbGYgPT0gb3RoZXIpDQoNCk1hcHBpbmcucmVnaXN0ZXIobWFwcGluZ3Byb3h5KQ0KDQoNCmNsYXNzIE1hcHBpbmdWaWV3KFNpemVkKToNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtYXBwaW5nKToNCiAgICAgICAgc2VsZi5fbWFwcGluZyA9IG1hcHBpbmcNCg0KICAgIGRlZiBfX2xlbl9fKHNlbGYpOg0KICAgICAgICByZXR1cm4gbGVuKHNlbGYuX21hcHBpbmcpDQoNCiAgICBkZWYgX19yZXByX18oc2VsZik6DQogICAgICAgIHJldHVybiAnezAuX19jbGFzc19fLl9fbmFtZV9ffSh7MC5fbWFwcGluZyFyfSknLmZvcm1hdChzZWxmKQ0KDQoNCmNsYXNzIEtleXNWaWV3KE1hcHBpbmdWaWV3LCBTZXQpOg0KDQogICAgQGNsYXNzbWV0aG9kDQogICAgZGVmIF9mcm9tX2l0ZXJhYmxlKHNlbGYsIGl0KToNCiAgICAgICAgcmV0dXJuIHNldChpdCkNCg0KICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwga2V5KToNCiAgICAgICAgcmV0dXJuIGtleSBpbiBzZWxmLl9tYXBwaW5nDQoNCiAgICBkZWYgX19pdGVyX18oc2VsZik6DQogICAgICAgIGZvciBrZXkgaW4gc2VsZi5fbWFwcGluZzoNCiAgICAgICAgICAgIHlpZWxkIGtleQ0KDQpLZXlzVmlldy5yZWdpc3RlcihkaWN0X2tleXMpDQoNCg0KY2xhc3MgSXRlbXNWaWV3KE1hcHBpbmdWaWV3LCBTZXQpOg0KDQogICAgQGNsYXNzbWV0aG9kDQogICAgZGVmIF9mcm9tX2l0ZXJhYmxlKHNlbGYsIGl0KToNCiAgICAgICAgcmV0dXJuIHNldChpdCkNCg0KICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwgaXRlbSk6DQogICAgICAgIGtleSwgdmFsdWUgPSBpdGVtDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHYgPSBzZWxmLl9tYXBwaW5nW2tleV0NCiAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXR1cm4gdiA9PSB2YWx1ZQ0KDQogICAgZGVmIF9faXRlcl9fKHNlbGYpOg0KICAgICAgICBmb3Iga2V5IGluIHNlbGYuX21hcHBpbmc6DQogICAgICAgICAgICB5aWVsZCAoa2V5LCBzZWxmLl9tYXBwaW5nW2tleV0pDQoNCkl0ZW1zVmlldy5yZWdpc3RlcihkaWN0X2l0ZW1zKQ0KDQoNCmNsYXNzIFZhbHVlc1ZpZXcoTWFwcGluZ1ZpZXcpOg0KDQogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCB2YWx1ZSk6DQogICAgICAgIGZvciBrZXkgaW4gc2VsZi5fbWFwcGluZzoNCiAgICAgICAgICAgIGlmIHZhbHVlID09IHNlbGYuX21hcHBpbmdba2V5XToNCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICByZXR1cm4gRmFsc2UNCg0KICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToNCiAgICAgICAgZm9yIGtleSBpbiBzZWxmLl9tYXBwaW5nOg0KICAgICAgICAgICAgeWllbGQgc2VsZi5fbWFwcGluZ1trZXldDQoNClZhbHVlc1ZpZXcucmVnaXN0ZXIoZGljdF92YWx1ZXMpDQoNCg0KY2xhc3MgTXV0YWJsZU1hcHBpbmcoTWFwcGluZyk6DQoNCiAgICBfX3Nsb3RzX18gPSAoKQ0KDQogICAgQGFic3RyYWN0bWV0aG9kDQogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgdmFsdWUpOg0KICAgICAgICByYWlzZSBLZXlFcnJvcg0KDQogICAgQGFic3RyYWN0bWV0aG9kDQogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGtleSk6DQogICAgICAgIHJhaXNlIEtleUVycm9yDQoNCiAgICBfX21hcmtlciA9IG9iamVjdCgpDQoNCiAgICBkZWYgcG9wKHNlbGYsIGtleSwgZGVmYXVsdD1fX21hcmtlcik6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHZhbHVlID0gc2VsZltrZXldDQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgICAgIGlmIGRlZmF1bHQgaXMgc2VsZi5fX21hcmtlcjoNCiAgICAgICAgICAgICAgICByYWlzZQ0KICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHQNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGRlbCBzZWxmW2tleV0NCiAgICAgICAgICAgIHJldHVybiB2YWx1ZQ0KDQogICAgZGVmIHBvcGl0ZW0oc2VsZik6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGtleSA9IG5leHQoaXRlcihzZWxmKSkNCiAgICAgICAgZXhjZXB0IFN0b3BJdGVyYXRpb246DQogICAgICAgICAgICByYWlzZSBLZXlFcnJvcg0KICAgICAgICB2YWx1ZSA9IHNlbGZba2V5XQ0KICAgICAgICBkZWwgc2VsZltrZXldDQogICAgICAgIHJldHVybiBrZXksIHZhbHVlDQoNCiAgICBkZWYgY2xlYXIoc2VsZik6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICAgICAgc2VsZi5wb3BpdGVtKCkNCiAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgZGVmIHVwZGF0ZSgqYXJncywgKiprd2RzKToNCiAgICAgICAgaWYgbGVuKGFyZ3MpID4gMjoNCiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidXBkYXRlKCkgdGFrZXMgYXQgbW9zdCAyIHBvc2l0aW9uYWwgIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmd1bWVudHMgKHt9IGdpdmVuKSIuZm9ybWF0KGxlbihhcmdzKSkpDQogICAgICAgIGVsaWYgbm90IGFyZ3M6DQogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInVwZGF0ZSgpIHRha2VzIGF0IGxlYXN0IDEgYXJndW1lbnQgKDAgZ2l2ZW4pIikNCiAgICAgICAgc2VsZiA9IGFyZ3NbMF0NCiAgICAgICAgb3RoZXIgPSBhcmdzWzFdIGlmIGxlbihhcmdzKSA+PSAyIGVsc2UgKCkNCg0KICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBNYXBwaW5nKToNCiAgICAgICAgICAgIGZvciBrZXkgaW4gb3RoZXI6DQogICAgICAgICAgICAgICAgc2VsZltrZXldID0gb3RoZXJba2V5XQ0KICAgICAgICBlbGlmIGhhc2F0dHIob3RoZXIsICJrZXlzIik6DQogICAgICAgICAgICBmb3Iga2V5IGluIG90aGVyLmtleXMoKToNCiAgICAgICAgICAgICAgICBzZWxmW2tleV0gPSBvdGhlcltrZXldDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBvdGhlcjoNCiAgICAgICAgICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZQ0KICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBrd2RzLml0ZW1zKCk6DQogICAgICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZQ0KDQogICAgZGVmIHNldGRlZmF1bHQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXR1cm4gc2VsZltrZXldDQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgICAgIHNlbGZba2V5XSA9IGRlZmF1bHQNCiAgICAgICAgcmV0dXJuIGRlZmF1bHQNCg0KTXV0YWJsZU1hcHBpbmcucmVnaXN0ZXIoZGljdCkNCg0KDQojIyMgU0VRVUVOQ0VTICMjIw0KDQoNCmNsYXNzIFNlcXVlbmNlKFNpemVkLCBJdGVyYWJsZSwgQ29udGFpbmVyKToNCg0KICAgICIiIkFsbCB0aGUgb3BlcmF0aW9ucyBvbiBhIHJlYWQtb25seSBzZXF1ZW5jZS4NCg0KICAgIENvbmNyZXRlIHN1YmNsYXNzZXMgbXVzdCBvdmVycmlkZSBfX25ld19fIG9yIF9faW5pdF9fLA0KICAgIF9fZ2V0aXRlbV9fLCBhbmQgX19sZW5fXy4NCiAgICAiIiINCg0KICAgIF9fc2xvdHNfXyA9ICgpDQoNCiAgICBAYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaW5kZXgpOg0KICAgICAgICByYWlzZSBJbmRleEVycm9yDQoNCiAgICBkZWYgX19pdGVyX18oc2VsZik6DQogICAgICAgIGkgPSAwDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICAgICAgdiA9IHNlbGZbaV0NCiAgICAgICAgICAgICAgICB5aWVsZCB2DQogICAgICAgICAgICAgICAgaSArPSAxDQogICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOg0KICAgICAgICAgICAgcmV0dXJuDQoNCiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIHZhbHVlKToNCiAgICAgICAgZm9yIHYgaW4gc2VsZjoNCiAgICAgICAgICAgIGlmIHYgPT0gdmFsdWU6DQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICBkZWYgX19yZXZlcnNlZF9fKHNlbGYpOg0KICAgICAgICBmb3IgaSBpbiByZXZlcnNlZChyYW5nZShsZW4oc2VsZikpKToNCiAgICAgICAgICAgIHlpZWxkIHNlbGZbaV0NCg0KICAgIGRlZiBpbmRleChzZWxmLCB2YWx1ZSk6DQogICAgICAgIGZvciBpLCB2IGluIGVudW1lcmF0ZShzZWxmKToNCiAgICAgICAgICAgIGlmIHYgPT0gdmFsdWU6DQogICAgICAgICAgICAgICAgcmV0dXJuIGkNCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcg0KDQogICAgZGVmIGNvdW50KHNlbGYsIHZhbHVlKToNCiAgICAgICAgcmV0dXJuIHN1bSgxIGZvciB2IGluIHNlbGYgaWYgdiA9PSB2YWx1ZSkNCg0KU2VxdWVuY2UucmVnaXN0ZXIodHVwbGUpDQpTZXF1ZW5jZS5yZWdpc3RlcihzdHIpDQpTZXF1ZW5jZS5yZWdpc3RlcihyYW5nZSkNCg0KDQpjbGFzcyBCeXRlU3RyaW5nKFNlcXVlbmNlKToNCg0KICAgICIiIlRoaXMgdW5pZmllcyBieXRlcyBhbmQgYnl0ZWFycmF5Lg0KDQogICAgWFhYIFNob3VsZCBhZGQgYWxsIHRoZWlyIG1ldGhvZHMuDQogICAgIiIiDQoNCiAgICBfX3Nsb3RzX18gPSAoKQ0KDQpCeXRlU3RyaW5nLnJlZ2lzdGVyKGJ5dGVzKQ0KQnl0ZVN0cmluZy5yZWdpc3RlcihieXRlYXJyYXkpDQoNCg0KY2xhc3MgTXV0YWJsZVNlcXVlbmNlKFNlcXVlbmNlKToNCg0KICAgIF9fc2xvdHNfXyA9ICgpDQoNCiAgICBAYWJzdHJhY3RtZXRob2QNCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwgaW5kZXgsIHZhbHVlKToNCiAgICAgICAgcmFpc2UgSW5kZXhFcnJvcg0KDQogICAgQGFic3RyYWN0bWV0aG9kDQogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGluZGV4KToNCiAgICAgICAgcmFpc2UgSW5kZXhFcnJvcg0KDQogICAgQGFic3RyYWN0bWV0aG9kDQogICAgZGVmIGluc2VydChzZWxmLCBpbmRleCwgdmFsdWUpOg0KICAgICAgICByYWlzZSBJbmRleEVycm9yDQoNCiAgICBkZWYgYXBwZW5kKHNlbGYsIHZhbHVlKToNCiAgICAgICAgc2VsZi5pbnNlcnQobGVuKHNlbGYpLCB2YWx1ZSkNCg0KICAgIGRlZiBjbGVhcihzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgICAgICBzZWxmLnBvcCgpDQogICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOg0KICAgICAgICAgICAgcGFzcw0KDQogICAgZGVmIHJldmVyc2Uoc2VsZik6DQogICAgICAgIG4gPSBsZW4oc2VsZikNCiAgICAgICAgZm9yIGkgaW4gcmFuZ2Uobi8vMik6DQogICAgICAgICAgICBzZWxmW2ldLCBzZWxmW24taS0xXSA9IHNlbGZbbi1pLTFdLCBzZWxmW2ldDQoNCiAgICBkZWYgZXh0ZW5kKHNlbGYsIHZhbHVlcyk6DQogICAgICAgIGZvciB2IGluIHZhbHVlczoNCiAgICAgICAgICAgIHNlbGYuYXBwZW5kKHYpDQoNCiAgICBkZWYgcG9wKHNlbGYsIGluZGV4PS0xKToNCiAgICAgICAgdiA9IHNlbGZbaW5kZXhdDQogICAgICAgIGRlbCBzZWxmW2luZGV4XQ0KICAgICAgICByZXR1cm4gdg0KDQogICAgZGVmIHJlbW92ZShzZWxmLCB2YWx1ZSk6DQogICAgICAgIGRlbCBzZWxmW3NlbGYuaW5kZXgodmFsdWUpXQ0KDQogICAgZGVmIF9faWFkZF9fKHNlbGYsIHZhbHVlcyk6DQogICAgICAgIHNlbGYuZXh0ZW5kKHZhbHVlcykNCiAgICAgICAgcmV0dXJuIHNlbGYNCg0KTXV0YWJsZVNlcXVlbmNlLnJlZ2lzdGVyKGxpc3QpDQpNdXRhYmxlU2VxdWVuY2UucmVnaXN0ZXIoYnl0ZWFycmF5KSAgIyBNdWx0aXBseSBpbmhlcml0aW5nLCBzZWUgQnl0ZVN0cmluZw0K'
}


function readFromVFS(lib){
   //borrowed code from http://stackoverflow.com/questions/1119722/base-62-conversion-in-python
   if (window.atob === undefined) {
      // browser is not chrome, firefox or safari :(
      window.atob=function(s) {
        var e={},i,k,v=[],r='',w=String.fromCharCode;
        var n=[[65,91],[97,123],[48,58],[43,44],[47,48]];

        for(z in n){for(i=n[z][0];i<n[z][1];i++){v.push(w(i));}}
        for(i=0;i<64;i++){e[v[i]]=i;}

        for(i=0;i<s.length;i+=72){
           var b=0,c,x,l=0,o=s.substring(i,i+72);
           for(x=0;x<o.length;x++){
              c=e[o.charAt(x)];b=(b<<6)+c;l+=6;
              while(l>=8){r+=w((b>>>(l-=8))%256);}
           }
        }
        return r;
      }
   }

   if (__BRYTHON__.py_VFS[lib] === undefined) return undefined
   //retrieve module from virutal file system and return contents
   return window.atob(__BRYTHON__.py_VFS[lib])
}

