__BRYTHON__.$py_VFS={
'/libs/re.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtvYmo9e19fY2xhc3NfXzokbW9kdWxlLF9fc3RyX186ZnVuY3Rpb24oKXtyZXR1cm4gIjxtb2R1bGUgJ3JlJz4iO319O29iai5BPW9iai5BU0NJST0yNTY7b2JqLkk9b2JqLklHTk9SRUNBU0U9J2knO29iai5NPW9iai5NVUxUSUxJTkU9J20nOyRTUkVfUGF0dGVybkRpY3Q9e19fY2xhc3NfXzokdHlwZSxfX25hbWVfXzonU1JFX1BhdHRlcm4nfTskU1JFX1BhdHRlcm5EaWN0Lm1hdGNoPWZ1bmN0aW9uKHNlbGYsc3RyaW5nKXtyZXR1cm4gb2JqLm1hdGNoKHNlbGYucGF0dGVybixzdHJpbmcsc2VsZi5mbGFncyk7fTskU1JFX1BhdHRlcm5EaWN0LnNlYXJjaD1mdW5jdGlvbihzZWxmLHN0cmluZyl7cmV0dXJuIG9iai5vYmooc2VsZi5wYXR0ZXJuLHN0cmluZyxzZWxmLmZsYWdzKTt9O29iai5jb21waWxlPWZ1bmN0aW9uKHBhdHRlcm4sZmxhZ3Mpe3JldHVybntfX2NsYXNzX186JFNSRV9QYXR0ZXJuRGljdCxwYXR0ZXJuOnBhdHRlcm4sZmxhZ3M6ZmxhZ3N9O307b2JqLmZpbmRhbGw9ZnVuY3Rpb24ocGF0dGVybixzdHJpbmcsZmxhZ3Mpe3ZhciAkbnM9JE1ha2VBcmdzKCdyZS5zZWFyY2gnLGFyZ3VtZW50cyxbJ3BhdHRlcm4nLCdzdHJpbmcnXSx7fSwnYXJncycsJ2t3Jyk7dmFyIGFyZ3M9JG5zLmFyZ3M7aWYoYXJncy5sZW5ndGg+MCl2YXIgZmxhZ3M9YXJnc1swXTtlbHNlIHZhciBmbGFncz0kbnMua3cuZ2V0KCdmbGFncycsJycpO2ZsYWdzKz0nZ20nO3ZhciBqc3A9bmV3IFJlZ0V4cChwYXR0ZXJuLGZsYWdzKTt2YXIganNtYXRjaD1zdHJpbmcubWF0Y2goanNwKTtpZihqc21hdGNoPT09bnVsbClyZXR1cm4gW107cmV0dXJuIGpzbWF0Y2g7fTtvYmouc2VhcmNoPWZ1bmN0aW9uKHBhdHRlcm4sc3RyaW5nKXt2YXIgJG5zPSRNYWtlQXJncygncmUuc2VhcmNoJyxhcmd1bWVudHMsWydwYXR0ZXJuJywnc3RyaW5nJ10se30sJ2FyZ3MnLCdrdycpO3ZhciBhcmdzPSRucy5hcmdzO2lmKGFyZ3MubGVuZ3RoPjApdmFyIGZsYWdzPWFyZ3NbMF07ZWxzZSB2YXIgZmxhZ3M9Z2V0YXR0cigkbnMua3csJ2dldCcpKCdmbGFncycsJycpO3ZhciBqc3A9bmV3IFJlZ0V4cChwYXR0ZXJuLGZsYWdzKTt2YXIganNtYXRjaD1zdHJpbmcubWF0Y2goanNwKTtpZihqc21hdGNoPT09bnVsbClyZXR1cm4gTm9uZTt2YXIgbW89bmV3IE9iamVjdCgpO21vLmdyb3VwPWZ1bmN0aW9uKCl7dmFyIHJlcz1bXTtmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKWlmKGpzbWF0Y2hbYXJndW1lbnRzW2ldXT09PXVuZGVmaW5lZClyZXMucHVzaChOb25lKTtlbHNlIHJlcy5wdXNoKGpzbWF0Y2hbYXJndW1lbnRzW2ldXSk7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpcmV0dXJuIHJlc1swXTtyZXR1cm4gdHVwbGUocmVzKTt9O21vLmdyb3Vwcz1mdW5jdGlvbihfZGVmYXVsdCl7aWYoX2RlZmF1bHQ9PT11bmRlZmluZWQpX2RlZmF1bHQ9Tm9uZTt2YXIgcmVzPVtdO2Zvcih2YXIgaT0xO2k8anNtYXRjaC5sZW5ndGg7aSsrKWlmKGpzbWF0Y2hbaV09PT11bmRlZmluZWQpcmVzLnB1c2goX2RlZmF1bHQpO2Vsc2UgcmVzLnB1c2goanNtYXRjaFtpXSk7cmV0dXJuIHR1cGxlKHJlcyk7fTttby5zdGFydD1mdW5jdGlvbigpe3JldHVybiBqc21hdGNoLmluZGV4O307bW8uc3RyaW5nPXN0cmluZztyZXR1cm4gSlNPYmplY3QobW8pO307b2JqLnN1Yj1mdW5jdGlvbihwYXR0ZXJuLHJlcGwsc3RyaW5nKXt2YXIgJG5zPSRNYWtlQXJncygncmUuc2VhcmNoJyxhcmd1bWVudHMsWydwYXR0ZXJuJywncmVwbCcsJ3N0cmluZyddLHt9LCdhcmdzJywna3cnKTtmb3IoJHZhciBpbiAkbnMpZXZhbCgidmFyICIrJHZhcisiPSRuc1skdmFyXSIpO3ZhciBhcmdzPSRucy5hcmdzO3ZhciBjb3VudD0kRGljdERpY3QuZ2V0KCRucy5rdywnY291bnQnLDApO3ZhciBmbGFncz0kRGljdERpY3QuZ2V0KCRucy5rdywnZmxhZ3MnLCcnKTtpZihhcmdzLmxlbmd0aD4wKXZhciBjb3VudD1hcmdzWzBdO2lmKGFyZ3MubGVuZ3RoPjEpdmFyIGZsYWdzPWFyZ3NbMV07aWYodHlwZW9mIHJlcGw9PT0ic3RyaW5nIilyZXBsPXJlcGwucmVwbGFjZSgvXFwoXGQrKS9nLCckJCQxJyk7ZWxzZSBpZih0eXBlb2YgcmVwbD09PSJmdW5jdGlvbiIpdmFyICRyZXBsMT1mdW5jdGlvbigpe3ZhciBtbz1PYmplY3QoKTttby5zdHJpbmc9YXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV07dmFyIHN0YXJ0PWFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoLTJdO3ZhciBlbmQ9c3RhcnQrYXJndW1lbnRzWzBdLmxlbmd0aDttby5zdGFydD1mdW5jdGlvbigpe3JldHVybiBzdGFydDt9O21vLmVuZD1mdW5jdGlvbigpe3JldHVybiBlbmQ7fTtncm91cHM9W107Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoLTI7aSsrKWdyb3Vwcy5wdXNoKGFyZ3VtZW50c1tpXSk7bW8uZ3JvdXBzPWZ1bmN0aW9uKF9kZWZhdWx0KXtpZihfZGVmYXVsdD09PXVuZGVmaW5lZClfZGVmYXVsdD1Ob25lO3ZhciByZXM9W107Zm9yKHZhciBpPTA7aTxncm91cHMubGVuZ3RoO2krKylpZihncm91cHNbaV09PT11bmRlZmluZWQpcmVzLnB1c2goX2RlZmF1bHQpO2Vsc2UgcmVzLnB1c2goZ3JvdXBzW2ldKTtyZXR1cm4gcmVzO307cmV0dXJuIHJlcGwoSlNPYmplY3QobW8pKTt9O2lmKGNvdW50PT0wKWZsYWdzKz0nZyc7dmFyIGpzcD1uZXcgUmVnRXhwKHBhdHRlcm4sZmxhZ3MpO2lmKHR5cGVvZiByZXBsPT09J2Z1bmN0aW9uJylyZXR1cm4gc3RyaW5nLnJlcGxhY2UoanNwLCRyZXBsMSk7ZWxzZSByZXR1cm4gc3RyaW5nLnJlcGxhY2UoanNwLHJlcGwpO307b2JqLm1hdGNoPShmdW5jdGlvbihzZWFyY2hfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKCl7cGF0dGVybj1hcmd1bWVudHNbMF07aWYocGF0dGVybi5jaGFyQXQoMCkhPT0nXicpcGF0dGVybj0nXicrcGF0dGVybjt2YXIgYXJncz1bcGF0dGVybl07Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKylhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtyZXR1cm4gc2VhcmNoX2Z1bmMuYXBwbHkobnVsbCxhcmdzKTt9O30pKG9iai5zZWFyY2gpO3JldHVybiBvYmo7fSkoKTs=',
'/libs/websocket.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXskV2ViU29ja2V0RGljdD17X19jbGFzc19fOiR0eXBlLF9fbmFtZV9fOidXZWJTb2NrZXQnfTskV2ViU29ja2V0RGljdC5iaW5kPWZ1bmN0aW9uKHNlbGYsZXZlbnQsY2FsbGJhY2spe3NlbGYuJHdzWydvbicrZXZlbnRdPWNhbGxiYWNrO307JFdlYlNvY2tldERpY3Quc2VuZD1mdW5jdGlvbihzZWxmLGRhdGEpe3NlbGYuJHdzLnNlbmQoZGF0YSk7fTskV2ViU29ja2V0RGljdC5jbG9zZT1mdW5jdGlvbihzZWxmKXtzZWxmLiR3cy5jbG9zZSgpO307JFdlYlNvY2tldERpY3QuX19tcm9fXz1bJFdlYlNvY2tldERpY3QsJE9iamVjdERpY3RdO2Z1bmN0aW9uIHdlYnNvY2tldChob3N0KXt2YXIgJHNvY2tldD1uZXcgV2ViU29ja2V0KGhvc3QpO3ZhciByZXM9e19fY2xhc3NfXzokV2ViU29ja2V0RGljdCwkd3M6JHNvY2tldH07cmVzLiR3ZWJzb2NrZXQ9JHNvY2tldDtyZXR1cm4gcmVzO313ZWJzb2NrZXQuX19jbGFzc19fPSRmYWN0b3J5O3dlYnNvY2tldC4kZGljdD0kV2ViU29ja2V0RGljdDtyZXR1cm57d2Vic29ja2V0OndlYnNvY2tldH07fSkoKTs=',
'/libs/svg.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXskc3ZnTlM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIjskeGxpbmtOUz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI7ZnVuY3Rpb24gJFNWR1RhZyh0YWdfbmFtZSxhcmdzKXt2YXIgJGk9bnVsbDt2YXIgJG9iaj10aGlzO3ZhciBvYmo9JERPTU5vZGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCRzdmdOUyx0YWdfbmFtZSkpO2lmKGFyZ3MhPXVuZGVmaW5lZCYmYXJncy5sZW5ndGg+MCl7JHN0YXJ0PTA7JGZpcnN0PWFyZ3NbMF07aWYoJGZpcnN0Ll9fY2xhc3NfXyE9PSRLdyl7JHN0YXJ0PTE7aWYoaXNpbnN0YW5jZSgkZmlyc3QsW3N0cixpbnQsZmxvYXRdKSl7dHh0PWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHN0cigkZmlyc3QpKTtvYmouZWx0LmFwcGVuZENoaWxkKHR4dCk7fWVsc2UgaWYoJGZpcnN0Ll9fY2xhc3NfXz09PSRUYWdTdW1EaWN0KWZvcigkaT0wOyRpPCRmaXJzdC5jaGlsZHJlbi5sZW5ndGg7JGkrKylvYmouZWx0LmFwcGVuZENoaWxkKCRmaXJzdC5jaGlsZHJlblskaV0pO2Vsc2UgdHJ5e29iai5lbHQuYXBwZW5kQ2hpbGQoJGZpcnN0LmVsdCk7fWNhdGNoKGVycil7JHJhaXNlKCdWYWx1ZUVycm9yJywnd3JvbmcgZWxlbWVudCAnKyRmaXJzdCk7fX1mb3IoJGk9JHN0YXJ0OyRpPGFyZ3MubGVuZ3RoOyRpKyspeyRhcmc9YXJnc1skaV07aWYoJGFyZyYmJGFyZy5fX2NsYXNzX189PT0kS3cpaWYoJGFyZy5uYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyKDAsMik9PSJvbiIpZXZhbCgnRE9NTm9kZS5iaW5kKG9iaiwiJyskYXJnLm5hbWUudG9Mb3dlckNhc2UoKS5zdWJzdHIoMikrJyIsZnVuY3Rpb24oKXsnKyRhcmcudmFsdWUrJ30pJyk7ZWxzZSBpZigkYXJnLm5hbWUudG9Mb3dlckNhc2UoKT09InN0eWxlIilET01Ob2RlLnNldF9zdHlsZShvYmosJGFyZy52YWx1ZSk7ZWxzZSBpZigkYXJnLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJocmVmIikhPT0tMSlvYmouZWx0LnNldEF0dHJpYnV0ZU5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwiaHJlZiIsJGFyZy52YWx1ZSk7ZWxzZSBpZigkYXJnLnZhbHVlIT09ZmFsc2Upb2JqLmVsdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCRhcmcubmFtZS5yZXBsYWNlKCdfJywnLScpLCRhcmcudmFsdWUpO319cmV0dXJuIG9iajt9dmFyICRzdmdfdGFncz1bJ2EnLCdhbHRHbHlwaCcsJ2FsdEdseXBoRGVmJywnYWx0R2x5cGhJdGVtJywnYW5pbWF0ZScsJ2FuaW1hdGVDb2xvcicsJ2FuaW1hdGVNb3Rpb24nLCdhbmltYXRlVHJhbnNmb3JtJywnY2lyY2xlJywnY2xpcFBhdGgnLCdjb2xvcl9wcm9maWxlJywnY3Vyc29yJywnZGVmcycsJ2Rlc2MnLCdlbGxpcHNlJywnZmVCbGVuZCcsJ2cnLCdpbWFnZScsJ2xpbmUnLCdsaW5lYXJHcmFkaWVudCcsJ21hcmtlcicsJ21hc2snLCdwYXRoJywncGF0dGVybicsJ3BvbHlnb24nLCdwb2x5bGluZScsJ3JhZGlhbEdyYWRpZW50JywncmVjdCcsJ3N0b3AnLCdzdmcnLCd0ZXh0JywndHJlZicsJ3RzcGFuJywndXNlJ107JHN2Zz1mdW5jdGlvbigpe3JldHVybiAkU1ZHVGFnKCdYJyxhcmd1bWVudHMpO307JHN2Zys9Jyc7dmFyIG9iaj1uZXcgT2JqZWN0KCk7Zm9yKHZhciBpPTA7aTwkc3ZnX3RhZ3MubGVuZ3RoO2krKyl7dmFyIHRhZz0kc3ZnX3RhZ3NbaV07ZXZhbCgnb2JqLicrdGFnKyc9Jyskc3ZnLnJlcGxhY2UoJ1gnLHRhZykpO31vYmouX19nZXRhdHRyX189ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fTtyZXR1cm4gb2JqO30pKCk7',
'/libs/builtins.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXt2YXIgb2JqPXtfX2NsYXNzX186JE1vZHVsZURpY3QsX19uYW1lX186J2J1aWx0aW5zJ307dmFyIGJ1aWx0aW5fbmFtZXM9WydBcml0aG1ldGljRXJyb3InLCdBc3NlcnRpb25FcnJvcicsJ0F0dHJpYnV0ZUVycm9yJywnQmFzZUV4Y2VwdGlvbicsJ0Jsb2NraW5nSU9FcnJvcicsJ0Jyb2tlblBpcGVFcnJvcicsJ0J1ZmZlckVycm9yJywnQnl0ZXNXYXJuaW5nJywnQ2hpbGRQcm9jZXNzRXJyb3InLCdDb25uZWN0aW9uQWJvcnRlZEVycm9yJywnQ29ubmVjdGlvbkVycm9yJywnQ29ubmVjdGlvblJlZnVzZWRFcnJvcicsJ0Nvbm5lY3Rpb25SZXNldEVycm9yJywnRGVwcmVjYXRpb25XYXJuaW5nJywnRU9GRXJyb3InLCdFbGxpcHNpcycsJ0Vudmlyb25tZW50RXJyb3InLCdFeGNlcHRpb24nLCdGYWxzZScsJ0ZpbGVFeGlzdHNFcnJvcicsJ0ZpbGVOb3RGb3VuZEVycm9yJywnRmxvYXRpbmdQb2ludEVycm9yJywnRnV0dXJlV2FybmluZycsJ0dlbmVyYXRvckV4aXQnLCdJT0Vycm9yJywnSW1wb3J0RXJyb3InLCdJbXBvcnRXYXJuaW5nJywnSW5kZW50YXRpb25FcnJvcicsJ0luZGV4RXJyb3InLCdJbnRlcnJ1cHRlZEVycm9yJywnSXNBRGlyZWN0b3J5RXJyb3InLCdLZXlFcnJvcicsJ0tleWJvYXJkSW50ZXJydXB0JywnTG9va3VwRXJyb3InLCdNZW1vcnlFcnJvcicsJ05hbWVFcnJvcicsJ05vbmUnLCdOb3RBRGlyZWN0b3J5RXJyb3InLCdOb3RJbXBsZW1lbnRlZCcsJ05vdEltcGxlbWVudGVkRXJyb3InLCdPU0Vycm9yJywnT3ZlcmZsb3dFcnJvcicsJ1BlbmRpbmdEZXByZWNhdGlvbldhcm5pbmcnLCdQZXJtaXNzaW9uRXJyb3InLCdQcm9jZXNzTG9va3VwRXJyb3InLCdSZWZlcmVuY2VFcnJvcicsJ1Jlc291cmNlV2FybmluZycsJ1J1bnRpbWVFcnJvcicsJ1J1bnRpbWVXYXJuaW5nJywnU3RvcEl0ZXJhdGlvbicsJ1N5bnRheEVycm9yJywnU3ludGF4V2FybmluZycsJ1N5c3RlbUVycm9yJywnU3lzdGVtRXhpdCcsJ1RhYkVycm9yJywnVGltZW91dEVycm9yJywnVHJ1ZScsJ1R5cGVFcnJvcicsJ1VuYm91bmRMb2NhbEVycm9yJywnVW5pY29kZURlY29kZUVycm9yJywnVW5pY29kZUVuY29kZUVycm9yJywnVW5pY29kZUVycm9yJywnVW5pY29kZVRyYW5zbGF0ZUVycm9yJywnVW5pY29kZVdhcm5pbmcnLCdVc2VyV2FybmluZycsJ1ZhbHVlRXJyb3InLCdXYXJuaW5nJywnV2luZG93c0Vycm9yJywnWmVyb0RpdmlzaW9uRXJyb3InLCdfJywnX19idWlsZF9jbGFzc19fJywnX19kZWJ1Z19fJywnX19kb2NfXycsJ19faW1wb3J0X18nLCdfX25hbWVfXycsJ19fcGFja2FnZV9fJywnYWJzJywnYWxsJywnYW55JywnYXNjaWknLCdiaW4nLCdib29sJywnYnl0ZWFycmF5JywnYnl0ZXMnLCdjYWxsYWJsZScsJ2NocicsJ2NsYXNzbWV0aG9kJywnY29tcGlsZScsJ2NvbXBsZXgnLCdjb3B5cmlnaHQnLCdjcmVkaXRzJywnZGVsYXR0cicsJ2RpY3QnLCdkaXInLCdkaXZtb2QnLCdlbnVtZXJhdGUnLCdldmFsJywnZXhlYycsJ2V4aXQnLCdmaWx0ZXInLCdmbG9hdCcsJ2Zvcm1hdCcsJ2Zyb3plbnNldCcsJ2dldGF0dHInLCdnbG9iYWxzJywnaGFzYXR0cicsJ2hhc2gnLCdoZWxwJywnaGV4JywnaWQnLCdpbnB1dCcsJ2ludCcsJ2lzaW5zdGFuY2UnLCdpc3N1YmNsYXNzJywnaXRlcicsJ2xlbicsJ2xpY2Vuc2UnLCdsaXN0JywnbG9jYWxzJywnbWFwJywnbWF4JywnbWVtb3J5dmlldycsJ21pbicsJ25leHQnLCdvYmplY3QnLCdvY3QnLCdvcGVuJywnb3JkJywncG93JywncHJpbnQnLCdwcm9wZXJ0eScsJ3F1aXQnLCdyYW5nZScsJ3JlcHInLCdyZXZlcnNlZCcsJ3JvdW5kJywnc2V0Jywnc2V0YXR0cicsJ3NsaWNlJywnc29ydGVkJywnc3RhdGljbWV0aG9kJywnc3RyJywnc3VtJywnc3VwZXInLCd0dXBsZScsJ3R5cGUnLCd2YXJzJywnemlwJ107Zm9yKHZhciBpPTA7aTxidWlsdGluX25hbWVzLmxlbmd0aDtpKyspdHJ5e29ialtidWlsdGluX25hbWVzW2ldXT1ldmFsKGJ1aWx0aW5fbmFtZXNbaV0pO31jYXRjaChlcnIpe31yZXR1cm4gb2JqO30pKCk7',
'/libs/json.js':'ZnVuY3Rpb24gX3B5KG9iail7aWYob2JqPT09bnVsbClyZXR1cm4gTm9uZTtpZihpc2luc3RhbmNlKG9iaixsaXN0KSl7dmFyIHJlcz1bXTtmb3IodmFyIGk9MDtpPG9iai5sZW5ndGg7aSsrKXJlcy5wdXNoKF9weShvYmpbaV0pKTtyZXR1cm4gcmVzO31pZihvYmouX19jbGFzc19fIT09dW5kZWZpbmVkKXtpZihvYmouX19jbGFzc19fPT09bGlzdClmb3IodmFyIGk9MDtpPG9iai5sZW5ndGg7aSsrKW9ialtpXT1fcHkob2JqW2ldKTtyZXR1cm4gb2JqO31pZih0eXBlb2Ygb2JqPT09J29iamVjdCcmJm9iai5fX2NsYXNzX189PT11bmRlZmluZWQpe3ZhciByZXM9ZGljdCgpO2Zvcih2YXIgYXR0ciBpbiBvYmopZ2V0YXR0cihyZXMsJ19fc2V0aXRlbV9fJykoYXR0cixfcHkob2JqW2F0dHJdKSk7cmV0dXJuIHJlczt9cmV0dXJuIEpTT2JqZWN0KG9iaik7fWZ1bmN0aW9uIF9qcyhvYmope2lmKGlzaW5zdGFuY2Uob2JqLFtpbnQsc3RyXSkpcmV0dXJuIG9iajtlbHNlIGlmKG9iaj09PU5vbmUpcmV0dXJuIG51bGw7ZWxzZSBpZihvYmo9PT1UcnVlKXJldHVybiB0cnVlO2Vsc2UgaWYob2JqPT09RmFsc2UpcmV0dXJuIGZhbHNlO2Vsc2UgaWYoaXNpbnN0YW5jZShvYmosZmxvYXQpKXJldHVybiBvYmoudmFsdWU7ZWxzZSBpZihpc2luc3RhbmNlKG9iaixbbGlzdCx0dXBsZV0pKXt2YXIgcmVzPVtdO2Zvcih2YXIgaT0wO2k8b2JqLmxlbmd0aDtpKyspcmVzLnB1c2goX2pzKG9ialtpXSkpO3JldHVybiByZXM7fWVsc2UgaWYoaXNpbnN0YW5jZShvYmosZGljdCkpe3ZhciByZXM9bmV3IE9iamVjdCgpO2Zvcih2YXIgaT0wO2k8b2JqLiRrZXlzLmxlbmd0aDtpKyspcmVzW19qcyhvYmouJGtleXNbaV0pXT1fanMob2JqLiR2YWx1ZXNbaV0pO3JldHVybiByZXM7fWVsc2UgdGhyb3cgVHlwZUVycm9yKHN0cihvYmopKycgaXMgbm90IEpTT04gc2VyaWFsaXphYmxlJyk7fSRtb2R1bGU9e2xvYWRzOmZ1bmN0aW9uKGpzb25fb2JqKXtyZXR1cm4gX3B5KEpTT04ucGFyc2UoanNvbl9vYmopKTt9LGR1bXBzOmZ1bmN0aW9uKG9iail7cmV0dXJuIEpTT04uc3RyaW5naWZ5KF9qcyhvYmopKTt9fTs=',
'/libs/ajax.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXskWE1MSHR0cERpY3Q9e19fY2xhc3NfXzokdHlwZSxfX25hbWVfXzonWE1MSHR0cCd9OyRYTUxIdHRwRGljdC5fX2dldGF0dHJpYnV0ZV9fPWZ1bmN0aW9uKHNlbGYsYXR0cil7aWYoWydoZWFkZXJzJywndGV4dCcsJ3htbCddLmluZGV4T2YoYXR0cik+LTEpcmV0dXJuICRYTUxIdHRwRGljdFthdHRyXShzZWxmKTtyZXR1cm4gJE9iamVjdERpY3QuX19nZXRhdHRyaWJ1dGVfXyhzZWxmLGF0dHIpO307JFhNTEh0dHBEaWN0Ll9fbXJvX189WyRYTUxIdHRwRGljdCwkT2JqZWN0RGljdF07JFhNTEh0dHBEaWN0Ll9fcmVwcl9fPWZ1bmN0aW9uKHNlbGYpe3JldHVybiAnPG9iamVjdCBYTUxIdHRwPic7fTskWE1MSHR0cERpY3QuX19zdHJfXz0kWE1MSHR0cERpY3QudG9TdHJpbmc9JFhNTEh0dHBEaWN0Ll9fcmVwcl9fOyRYTUxIdHRwRGljdC50ZXh0PWZ1bmN0aW9uKHNlbGYpe3JldHVybiBzZWxmLnJlc3BvbnNlVGV4dDt9OyRYTUxIdHRwRGljdC54bWw9ZnVuY3Rpb24oc2VsZil7cmV0dXJuICREb21PYmplY3Qoc2VsZi5yZXNwb25zZVhNTCk7fTskWE1MSHR0cERpY3QuaGVhZGVycz1mdW5jdGlvbihzZWxmKXtyZXR1cm4gbGlzdChzZWxmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnNwbGl0KCdcbicpKTt9OyRYTUxIdHRwRGljdC5nZXRfaGVhZGVyPWZ1bmN0aW9uKCl7dmFyIHJlcW9iaj1zZWxmO3JldHVybiBmdW5jdGlvbihoZWFkZXIpe3JldHVybiByZXFvYmouZ2V0UmVzcG9uc2VIZWFkZXIoaGVhZGVyKTt9O307JEFqYXhEaWN0PXtfX2NsYXNzX186JHR5cGUsX19uYW1lX186J2FqYXgnfTskQWpheERpY3QuX19tcm9fXz1bJEFqYXhEaWN0LCRPYmplY3REaWN0XTskQWpheERpY3QuX19yZXByX189ZnVuY3Rpb24oc2VsZil7cmV0dXJuICc8b2JqZWN0IEFqYXg+Jzt9OyRBamF4RGljdC5fX3N0cl9fPSRBamF4RGljdC50b1N0cmluZz0kQWpheERpY3QuX19yZXByX187JEFqYXhEaWN0LmJpbmQ9ZnVuY3Rpb24oc2VsZixldnQsZnVuYyl7c2VsZlsnb25fJytldnRdPWZ1bmM7fTskQWpheERpY3Qub3Blbj1mdW5jdGlvbihzZWxmLG1ldGhvZCx1cmwsYXN5bmMpe3NlbGYuJHhtbGh0dHAub3BlbihtZXRob2QsdXJsLGFzeW5jKTt9OyRBamF4RGljdC5zZW5kPWZ1bmN0aW9uKHNlbGYscGFyYW1zKXt2YXIgcmVzPScnO2lmKCFwYXJhbXN8fHBhcmFtcy4ka2V5cy5sZW5ndGg9PTApe3NlbGYuJHhtbGh0dHAuc2VuZCgpO3JldHVybjt9ZWxzZSBpZihpc2luc3RhbmNlKHBhcmFtcyxzdHIpKXJlcz1wYXJhbXM7ZWxzZSBpZihpc2luc3RhbmNlKHBhcmFtcyxkaWN0KSl7Zm9yKGk9MDtpPHBhcmFtcy4ka2V5cy5sZW5ndGg7aSsrKXJlcys9ZW5jb2RlVVJJQ29tcG9uZW50KHN0cihwYXJhbXMuJGtleXNbaV0pKSsnPScrZW5jb2RlVVJJQ29tcG9uZW50KHN0cihwYXJhbXMuJHZhbHVlc1tpXSkpKycmJztyZXM9cmVzLnN1YnN0cigwLHJlcy5sZW5ndGgtMSk7fWVsc2UgdGhyb3cgVHlwZUVycm9yKCJzZW5kKCkgYXJndW1lbnQgbXVzdCBiZSBzdHJpbmcgb3IgZGljdG9uYXJ5LCBub3QgJyIrc3RyKHBhcmFtcy5fX2NsYXNzX18pKyInIik7c2VsZi4keG1saHR0cC5zZW5kKHJlcyk7fTskQWpheERpY3Quc2V0X2hlYWRlcj1mdW5jdGlvbihzZWxmLGtleSx2YWx1ZSl7c2VsZi4keG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKGtleSx2YWx1ZSk7fTskQWpheERpY3Quc2V0X3RpbWVvdXQ9ZnVuY3Rpb24oc2VsZixzZWNvbmRzLGZ1bmMpe3NlbGYuJHhtbGh0dHAuJHJlcXVlc3RUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi4keG1saHR0cC5hYm9ydCgpO2Z1bmMoKTt9LHNlY29uZHMqMTAwMCk7fTtmdW5jdGlvbiBhamF4KCl7dmFyIHJlcz17X19jbGFzc19fOiRBamF4RGljdH07aWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KXZhciAkeG1saHR0cD1uZXcgWE1MSHR0cFJlcXVlc3QoKTtlbHNlIHZhciAkeG1saHR0cD1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKTskeG1saHR0cC4kcmVxdWVzdFRpbWVyPW51bGw7JHhtbGh0dHAuX19jbGFzc19fPSRYTUxIdHRwRGljdDskeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgc3RhdGU9dGhpcy5yZWFkeVN0YXRlO3ZhciByZXE9dGhpcy4kYWpheDt2YXIgdGltZXI9dGhpcy4kcmVxdWVzdFRpbWVyO3ZhciBvYmo9dGhpcztpZihzdGF0ZT09PTAmJidvbl91bmluaXRpYWxpemVkJyBpbiByZXEpcmVxLm9uX3VuaW5pdGlhbGl6ZWQob2JqKTtlbHNlIGlmKHN0YXRlPT09MSYmJ29uX2xvYWRpbmcnIGluIHJlcSlyZXEub25fbG9hZGluZyhvYmopO2Vsc2UgaWYoc3RhdGU9PT0yJiYnb25fbG9hZGVkJyBpbiByZXEpcmVxLm9uX2xvYWRlZChvYmopO2Vsc2UgaWYoc3RhdGU9PT0zJiYnb25faW50ZXJhY3RpdmUnIGluIHJlcSlyZXEub25faW50ZXJhY3RpdmUob2JqKTtlbHNlIGlmKHN0YXRlPT09NCYmJ29uX2NvbXBsZXRlJyBpbiByZXEpe2lmKHRpbWVyIT09bnVsbCl3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtyZXEub25fY29tcGxldGUob2JqKTt9fTskeG1saHR0cC4kYWpheD1yZXM7cmVzLiR4bWxodHRwPSR4bWxodHRwO3JldHVybiByZXM7fWFqYXguX19jbGFzc19fPSRmYWN0b3J5O2FqYXguJGRpY3Q9JEFqYXhEaWN0O3JldHVybnthamF4OmFqYXh9O30pKCk7',
'/libs/time.js':'JG1vZHVsZT17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fSxfX25hbWVfXzondGltZScsY2xlYXJfaW50ZXJ2YWw6ZnVuY3Rpb24oaW50X2lkKXt3aW5kb3cuY2xlYXJJbnRlcnZhbChpbnRfaWQpO30sY2xlYXJfdGltZW91dDpmdW5jdGlvbih0aW1lb3V0X2lkKXt3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRfaWQpO30sY3RpbWU6ZnVuY3Rpb24odGltZXN0YW1wKXtpZih0aW1lc3RhbXA9PT11bmRlZmluZWQpdGltZXN0YW1wPWludChuZXcgRGF0ZSgpLmdldFRpbWUoKS8xMDAwKTt2YXIgZD1uZXcgRGF0ZSgwKTtkLnNldFVUQ1NlY29uZHModGltZXN0YW1wKTtyZXR1cm4gZC50b1VUQ1N0cmluZygpO30sZ210aW1lOmZ1bmN0aW9uKCl7dmFyIGQ9bmV3IERhdGUoKTtyZXR1cm4gbGlzdChbZC5nZXRGdWxsWWVhcigpLGQuZ2V0TW9udGgoKSsxLGQuZ2V0RGF0ZSgpLGQuZ2V0SG91cnMoKSxkLmdldE1pbnV0ZXMoKSxkLmdldFNlY29uZHMoKSxkLmdldERheSgpLDAsMF0pO30scGVyZl9jb3VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGZsb2F0KG5ldyBEYXRlKCkuZ2V0VGltZSgpLzEwMDAuMCk7fSxzZXRfaW50ZXJ2YWw6ZnVuY3Rpb24oZnVuYyxpbnRlcnZhbCl7cmV0dXJuIGludCh3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuYyxpbnRlcnZhbCkpO30sc2V0X3RpbWVvdXQ6ZnVuY3Rpb24oZnVuYyxpbnRlcnZhbCl7d2luZG93LnNldFRpbWVvdXQoZnVuYyxpbnRlcnZhbCk7fSxsb2NhbHRpbWU6ZnVuY3Rpb24oc2Vjcyl7dmFyIGQ9bmV3IERhdGUoKTtpZihzZWNzPT09dW5kZWZpbmVkfHxzZWNzPT09Tm9uZSlyZXR1cm4gZC5nZXRUaW1lKCk7dmFyIGphbj1uZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksMCwxKTt2YXIganVsPW5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSw2LDEpO3ZhciBkc3Q9aW50KGQuZ2V0VGltZXpvbmVPZmZzZXQoKTxNYXRoLm1heChqYW4uZ2V0VGltZXpvbmVPZmZzZXQoKSxqdWwuZ2V0VGltZXpvbmVPZmZzZXQoKSkpO3JldHVybiBsaXN0KFtkLmdldEZ1bGxZZWFyKCksZC5nZXRNb250aCgpKzEsZC5nZXREYXRlKCksZC5nZXRIb3VycygpLGQuZ2V0TWludXRlcygpLGQuZ2V0U2Vjb25kcygpLGQuZ2V0RGF5KCksMCxkc3RdKTt9LHRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4gZmxvYXQoKG5ldyBEYXRlKCkuZ2V0VGltZSgpKS8xMDAwKTt9LHN0cmZ0aW1lOmZ1bmN0aW9uKGZvcm1hdCxhcmcpe2Z1bmN0aW9uIG5zKGFyZyxuYil7dmFyIHJlcz1hcmcudG9TdHJpbmcoKTt3aGlsZShyZXMubGVuZ3RoPG5iKXJlcz0nMCcrcmVzO3JldHVybiByZXM7fWlmKGFyZyl2YXIgb2JqPW5ldyBEYXRlKGFyZ1swXSxhcmdbMV0tMSxhcmdbMl0sYXJnWzNdLGFyZ1s0XSxhcmdbNV0sYXJnWzZdKTtlbHNlIHZhciBvYmo9bmV3IERhdGUoKTt2YXIgYWJiX3dlZWtkYXlzPVsnU3UnLCdNbycsJ1R1JywnV2UnLCdUaCcsJ0ZyJywnU2EnXTt2YXIgZnVsbF93ZWVrZGF5cz1bJ1N1bmRheScsJ01vbmRheScsJ1R1ZXNkYXknLCdXZWRuZXNkYXknLCdUaHVyc2RheScsJ0ZyaWRheScsJ1NhdHVyZGF5J107dmFyIGFiYl9tb250aHM9WydKYW4nLCdGZWInLCdNYXInLCdBcHInLCdNYXknLCdKdW4nLCdKdWwnLCdBdWcnLCdTZXAnLCdPY3QnLCdOb3YnLCdEZWMnXTt2YXIgZnVsbF9tb250aHM9WydKYW51YXJ5JywnRmVicnVhcnknLCdNYXJjaCcsJ0FwcmlsJywnTWF5JywnSnVuZScsJ0p1bHknLCdBdWd1c3QnLCdTZXB0ZW1iZXInLCdPY3RvYmVyJywnTm92ZW1iZXInLCdEZWNlbWJlciddO3ZhciByZXM9Zm9ybWF0O3Jlcz1yZXMucmVwbGFjZSgvJUgvLG5zKG9iai5nZXRIb3VycygpLDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVNLyxucyhvYmouZ2V0TWludXRlcygpLDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVTLyxucyhvYmouZ2V0U2Vjb25kcygpLDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVZLyxucyhvYmouZ2V0RnVsbFllYXIoKSw0KSk7cmVzPXJlcy5yZXBsYWNlKC8leS8sbnMob2JqLmdldEZ1bGxZZWFyKCksNCkuc3Vic3RyKDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVtLyxucyhvYmouZ2V0TW9udGgoKSsxLDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVkLyxucyhvYmouZ2V0RGF0ZSgpLDIpKTtyZXM9cmVzLnJlcGxhY2UoLyVhLyxhYmJfd2Vla2RheXNbb2JqLmdldERheSgpXSk7cmVzPXJlcy5yZXBsYWNlKC8lQS8sZnVsbF93ZWVrZGF5c1tvYmouZ2V0RGF5KCldKTtyZXM9cmVzLnJlcGxhY2UoLyViLyxhYmJfbW9udGhzW29iai5nZXRNb250aCgpXSk7cmVzPXJlcy5yZXBsYWNlKC8lQi8sZnVsbF9tb250aHNbb2JqLmdldE1vbnRoKCldKTtyZXR1cm4gcmVzO30sc3RydWN0X3RpbWU6ZnVuY3Rpb24oYXJnKXtpZighaXNpbnN0YW5jZShhcmcsW3R1cGxlLGxpc3RdKSl0aHJvdyBUeXBlRXJyb3IoJ2NvbnN0cnVjdG9yIHJlcXVpcmVzIGEgc2VxdWVuY2UnKTtpZihsZW4oYXJnKSE9OSl0aHJvdyBUeXBlRXJyb3IoInRpbWUuc3RydWN0X3RpbWUoKSB0YWtlcyBhIDktc2VxdWVuY2UgKCIrbGVuKGFyZykrIi1zZXF1ZW5jZSBnaXZlbiIpO3ZhciByZXM9YXJnO3ZhciBuYW1lcz1bJ3RtX3llYXInLCd0bV9tb24nLCd0bV9tZGF5JywndG1faG91cicsJ3RtX21pbicsJ3RtX3NlYycsJ3RtX3dkYXknLCd0bV95ZGF5JywndG1faXNkc3QnLCd0bV96b25lJywndG1fZ210b2ZmJ107cmVzLl9fZ2V0YXR0cl9fPWZ1bmN0aW9uKGF0dHIpe3ZhciBpeD1uYW1lcy5pbmRleE9mKGF0dHIpO2lmKGl4Pi0xKXJldHVybiBhcmcuX19nZXRpdGVtX18oaXgpO2lmKHR5cGVvZiByZXNbYXR0cl09PT0nZnVuY3Rpb24nKXJldHVybihmdW5jdGlvbihvYmope3JldHVybiBmdW5jdGlvbigpe3JldHVybiBvYmpbYXR0cl0uYXBwbHkob2JqLGFyZ3VtZW50cyk7fTt9KShyZXMpO2Vsc2UgaWYocmVzW2F0dHJdIT09dW5kZWZpbmVkKXJldHVybiByZXNbYXR0cl07ZWxzZSB0aHJvdyBBdHRyaWJ1dGVFcnJvcigib2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgJyIrYXR0cisiJyIpO307cmV0dXJuIHJlczt9fTs=',
'/libs/_browser.js':'JG1vZHVsZT17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fSxhbGVydDpmdW5jdGlvbihtZXNzYWdlKXt3aW5kb3cuYWxlcnQobWVzc2FnZSk7fSxjb25maXJtOmZ1bmN0aW9uKG1lc3NhZ2Upe3JldHVybiBKU09iamVjdCh3aW5kb3cuY29uZmlybShtZXNzYWdlKSk7fSxkb2M6JERPTU5vZGUoZG9jdW1lbnQpLG1vdXNlQ29vcmRzOmZ1bmN0aW9uKGV2KXtyZXR1cm4gSlNPYmplY3QoJG1vdXNlQ29vcmRzKGV2KSk7fSxwcm9tcHQ6ZnVuY3Rpb24obWVzc2FnZSxkZWZhdWx0X3ZhbHVlKXtyZXR1cm4gSlNPYmplY3Qod2luZG93LnByb21wdChtZXNzYWdlLGRlZmF1bHRfdmFsdWUpKTt9LHdpbjpKU09iamVjdCh3aW5kb3cpfTskbW9kdWxlLl9fY2xhc3NfXz0kbW9kdWxlOyRtb2R1bGUuX19zdHJfXz1mdW5jdGlvbigpe3JldHVybiAiPG1vZHVsZSAnYnJvd3Nlcic+Ijt9Ow==',
'/libs/random.js':'JG1vZHVsZT17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fSxyYW5kb206ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPjApdGhyb3cgVHlwZUVycm9yKCJyYW5kb20oKSB0YWtlcyBubyBhcmd1bWVudHMgKCIrYXJndW1lbnRzLmxlbmd0aCsiIGdpdmVuKSIpO2Vsc2UgcmV0dXJuIGZsb2F0KE1hdGgucmFuZG9tKCkpO30scmFuZGludDpmdW5jdGlvbihhLGIpe3JldHVybiBpbnQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihiLWErMSkrYSkpO30scmFuZHJhbmdlOmZ1bmN0aW9uKHN0YXJ0LHN0b3Asc3RlcCl7aWYoc3RlcD09PXVuZGVmaW5lZClzdGVwPTE7ZWxzZSBpZihzdGVwPT0wKXt9aWYoc3RvcD09PXVuZGVmaW5lZCl7c3RvcD1zdGFydDtzdGFydD0wO312YXIgd2lkdGg9c3RvcC1zdGFydDtpZihzdGVwPT0xJiZ3aWR0aD4wKXJldHVybiBzdGFydCtpbnQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKndpZHRoKSk7ZWxzZXt9dmFyIG47aWYoc3RlcD4wKW49TWF0aC5mbG9vcigod2lkdGgrc3RlcC0xKS9zdGVwKTtlbHNlIG49TWF0aC5mbG9vcigod2lkdGgrc3RlcCsxKS9zdGVwKTtyZXR1cm4gc3RhcnQrc3RlcCppbnQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKm4pKTt9LHNodWZmbGU6ZnVuY3Rpb24oeCxybmQpe2lmKHgubGVuZ3RoPD0xKXJldHVybiB4O2lmKHJuZD09PXVuZGVmaW5lZClybmQ9TWF0aC5yYW5kb207Zm9yKHZhciBqLG8saT14Lmxlbmd0aDtpO2o9cGFyc2VJbnQocm5kKCkqaSksbz14Wy0taV0seFtpXT14W2pdLHhbal09byk7fX07JG1vZHVsZS5fX2NsYXNzX189JG1vZHVsZTskbW9kdWxlLl9fc3RyX189ZnVuY3Rpb24oKXtyZXR1cm4gIjxtb2R1bGUgJ3JhbmRvbSc+Ijt9Ow==',
'/libs/math.js':'dmFyIGZsb2F0X2NoZWNrPWZ1bmN0aW9uKHgpe2lmKGlzaW5zdGFuY2UoeCxmbG9hdCkpcmV0dXJuIHgudmFsdWU7cmV0dXJuIHg7fTt2YXIgaXNpbmY9ZnVuY3Rpb24oeCl7dmFyIHgxPWZsb2F0X2NoZWNrKHgpO3JldHVybiB4MT09LUluZmluaXR5fHx4MT09SW5maW5pdHl8fHgxPT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl8fHgxPT1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7fTskbW9kdWxlPXtfX2dldGF0dHJfXzpmdW5jdGlvbihhdHRyKXt2YXIgcmVzPXRoaXNbYXR0cl07aWYocmVzPT09dW5kZWZpbmVkKSRyYWlzZSgnQXR0cmlidXRlRXJyb3InLCdtb2R1bGUgbWF0aCBoYXMgbm8gYXR0cmlidXRlICcrYXR0cik7cmV0dXJuIHJlczt9LGFjb3M6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGguYWNvcyhmbG9hdF9jaGVjayh4KSkpO30sYWNvc2g6ZnVuY3Rpb24oeCl7aWYoaXNpbmYoeCkpcmV0dXJuIGZsb2F0KCdpbmYnKTt2YXIgeT1mbG9hdF9jaGVjayh4KTtyZXR1cm4gZmxvYXQoTWF0aC5sb2coeStNYXRoLnNxcnQoeSp5LTEpKSk7fSxhc2luOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLmFzaW4oZmxvYXRfY2hlY2soeCkpKTt9LGFzaW5oOmZ1bmN0aW9uKHgpe2lmKGlzaW5mKHgpKXJldHVybiBmbG9hdCgnaW5mJyk7dmFyIHk9ZmxvYXRfY2hlY2soeCk7cmV0dXJuIGZsb2F0KE1hdGgubG9nKHkrTWF0aC5zcXJ0KHkqeSsxKSkpO30sYXRhbjpmdW5jdGlvbih4KXtpZihpc2luZih4KSlyZXR1cm4gZmxvYXQoTWF0aC5QSS8yKTtyZXR1cm4gZmxvYXQoTWF0aC5hdGFuKGZsb2F0X2NoZWNrKHgpKSk7fSxhdGFuMjpmdW5jdGlvbih5LHgpe3JldHVybiBmbG9hdChNYXRoLmF0YW4yKHkseCkpO30sYXRhbmg6ZnVuY3Rpb24oeCl7dmFyIHk9ZmxvYXRfY2hlY2soeCk7aWYoeT09MClyZXR1cm4gMDtyZXR1cm4gZmxvYXQoMC41Kk1hdGgubG9nKCgxL3krMSkvKDEveS0xKSkpO30sY2VpbDpmdW5jdGlvbih4KXt2YXIgeT1mbG9hdF9jaGVjayh4KTtpZighaXNOYU4ocGFyc2VGbG9hdCh5KSkmJmlzRmluaXRlKHkpKXJldHVybiBpbnQoTWF0aC5jZWlsKHkpKTt0cnl7cmV0dXJuIGdldGF0dHIoeSwnX19jZWlsX18nKSgpO31jYXRjaChlcnIpeyRwb3BfZXhjKCk7fSRyYWlzZSgnVmFsdWVFcnJvcicsJ29iamVjdCBpcyBub3QgYSBudW1iZXIgYW5kIGRvZXMgbm90IGNvbnRhaW4gX19jZWlsX18nKTt9LGNvcHlzaWduOmZ1bmN0aW9uKHgseSl7dmFyIHgxPU1hdGguYWJzKGZsb2F0X2NoZWNrKHgpKTt2YXIgeTE9ZmxvYXRfY2hlY2soeSk7dmFyIHNpZ249eTE/eTE8MD8tMToxOjE7aWYoaXNpbnN0YW5jZSh4LGludCkpcmV0dXJuIHgxKnNpZ247ZWxzZSByZXR1cm4gZmxvYXQoeDEqc2lnbik7fSxjb3M6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGguY29zKGZsb2F0X2NoZWNrKHgpKSk7fSxkZWdyZWVzOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChmbG9hdF9jaGVjayh4KSoxODAvTWF0aC5QSSk7fSxlOmZsb2F0KE1hdGguRSksZXJmOmZ1bmN0aW9uKHgpe3ZhciB5PWZsb2F0X2NoZWNrKHgpO3ZhciB0PTEuMC8oMS4wKzAuNSpNYXRoLmFicyh5KSk7dmFyIGFucz0xLXQqTWF0aC5leHAoLXkqeS0xLjI2NTUxMjIzK3QqKDEuMDAwMDIzNjgrdCooMC4zNzQwOTE5Nit0KigwLjA5Njc4NDE4K3QqKC0wLjE4NjI4ODA2K3QqKDAuMjc4ODY4MDcrdCooLTEuMTM1MjAzOTgrdCooMS40ODg1MTU4Nyt0KigtMC44MjIxNTIyMyt0KjAuMTcwODcyNzcpKSkpKSkpKSk7aWYoeT49MC4wKXJldHVybiBhbnM7cmV0dXJuIC1hbnM7fSxlcmZjOmZ1bmN0aW9uKHgpe3ZhciB5PWZsb2F0X2NoZWNrKHgpO3ZhciB0PTEuMC8oMS4wKzAuNSpNYXRoLmFicyh5KSk7dmFyIGFucz0xLXQqTWF0aC5leHAoLXkqeS0xLjI2NTUxMjIzK3QqKDEuMDAwMDIzNjgrdCooMC4zNzQwOTE5Nit0KigwLjA5Njc4NDE4K3QqKC0wLjE4NjI4ODA2K3QqKDAuMjc4ODY4MDcrdCooLTEuMTM1MjAzOTgrdCooMS40ODg1MTU4Nyt0KigtMC44MjIxNTIyMyt0KjAuMTcwODcyNzcpKSkpKSkpKSk7aWYoeT49MC4wKXJldHVybiAxLWFucztyZXR1cm4gMSthbnM7fSxleHA6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGguZXhwKGZsb2F0X2NoZWNrKHgpKSk7fSxleHBtMTpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5leHAoZmxvYXRfY2hlY2soeCkpLTEpO30sZmFiczpmdW5jdGlvbih4KXtyZXR1cm4geD4wP2Zsb2F0KHgpOmZsb2F0KC14KTt9LGZhY3RvcmlhbDpmdW5jdGlvbih4KXt2YXIgeT1mbG9hdF9jaGVjayh4KTt2YXIgcj0xO2Zvcih2YXIgaT0yO2k8PXk7aSsrKXIqPWk7cmV0dXJuIHI7fSxmbG9vcjpmdW5jdGlvbih4KXtyZXR1cm4gTWF0aC5mbG9vcihmbG9hdF9jaGVjayh4KSk7fSxmbW9kOmZ1bmN0aW9uKHgseSl7cmV0dXJuIGZsb2F0KGZsb2F0X2NoZWNrKHgpJWZsb2F0X2NoZWNrKHkpKTt9LGZyZXhwOmZ1bmN0aW9uKHgpe3ZhciB4MT1mbG9hdF9jaGVjayh4KTt2YXIgZXg9TWF0aC5mbG9vcihNYXRoLmxvZyh4MSkvTWF0aC5sb2coMikpKzE7ZnJhYz14MS9NYXRoLnBvdygyLGV4KTtyZXR1cm4gW2ZyYWMsZXhdO30sZ2FtbWE6ZnVuY3Rpb24oeCl7dmFyIHk9ZmxvYXRfY2hlY2soeCk7dmFyIHo9eSsxO3ZhciBkMT1NYXRoLnNxcnQoMipNYXRoLlBJKS96O3ZhciBkMj0xLjAwMDAwMDAwMDE5MDAxNTtkMis9NzYuMTgwMDkxNzI5NDcxNDYvKHorMSk7ZDIrPS04Ni41MDUzMjAzMjk0MTY3Ny8oeisyKTtkMis9MjQuMDE0MDk4MjQwODMwOTEvKHorMyk7ZDIrPS0xLjIzMTczOTU3MjQ1MDE1NS8oeis0KTtkMis9MS4yMDg2NTA5NzM4NjYxNzlFLTMvKHorNSk7ZDIrPS01LjM5NTIzOTM4NDk1M0UtNi8oeis2KTtyZXR1cm4gZDEqZDIqTWF0aC5wb3coeis1LjUseiswLjUpKk1hdGguZXhwKC0oeis1LjUpKTt9LGh5cG90OmZ1bmN0aW9uKHgseSl7dmFyIHgxPWZsb2F0X2NoZWNrKHgpO3ZhciB5MT1mbG9hdF9jaGVjayh5KTtyZXR1cm4gZmxvYXQoTWF0aC5zcXJ0KHgxKngxK3kxKnkxKSk7fSxpc2Zpbml0ZTpmdW5jdGlvbih4KXtyZXR1cm4gaXNGaW5pdGUoZmxvYXRfY2hlY2soeCkpO30saXNpbmY6ZnVuY3Rpb24oeCl7cmV0dXJuIGlzaW5mKHgpO30saXNuYW46ZnVuY3Rpb24oeCl7cmV0dXJuIGlzTmFOKGZsb2F0X2NoZWNrKHgpKTt9LGxkZXhwOmZ1bmN0aW9uKHgsaSl7dmFyIG11bD1NYXRoLnBvdygyLGZsb2F0X2NoZWNrKGkpKTtpZihpc2luc3RhbmNlKHgsaW50KSlyZXR1cm4geCptdWw7ZWxzZSByZXR1cm4gZmxvYXQoeC52YWx1ZSptdWwpO30sbGdhbW1hOmZ1bmN0aW9uKHgpe3ZhciB5PWZsb2F0X2NoZWNrKHgpO3ZhciB6PXkrMTt2YXIgZDE9TWF0aC5zcXJ0KDIqTWF0aC5QSSkvejt2YXIgZDI9MS4wMDAwMDAwMDAxOTAwMTU7ZDIrPTc2LjE4MDA5MTcyOTQ3MTQ2Lyh6KzEpO2QyKz0tODYuNTA1MzIwMzI5NDE2NzcvKHorMik7ZDIrPTI0LjAxNDA5ODI0MDgzMDkxLyh6KzMpO2QyKz0tMS4yMzE3Mzk1NzI0NTAxNTUvKHorNCk7ZDIrPTEuMjA4NjUwOTczODY2MTc5RS0zLyh6KzUpO2QyKz0tNS4zOTUyMzkzODQ5NTNFLTYvKHorNik7cmV0dXJuIGZsb2F0KE1hdGgubG9nKE1hdGguYWJzKGQxKmQyKk1hdGgucG93KHorNS41LHorMC41KSpNYXRoLmV4cCgtKHorNS41KSkpKSk7fSxsb2c6ZnVuY3Rpb24oeCxiYXNlKXt2YXIgeDE9ZmxvYXRfY2hlY2soeCk7aWYoYmFzZT09PXVuZGVmaW5lZClyZXR1cm4gZmxvYXQoTWF0aC5sb2coeDEpKTtyZXR1cm4gZmxvYXQoTWF0aC5sb2coeDEpL01hdGgubG9nKGZsb2F0X2NoZWNrKGJhc2UpKSk7fSxsb2cxcDpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5sb2coMS4wK2Zsb2F0X2NoZWNrKHgpKSk7fSxsb2cyOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLmxvZyhmbG9hdF9jaGVjayh4KSkvTWF0aC5MTjIpO30sbG9nMTA6ZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGgubG9nKGZsb2F0X2NoZWNrKHgpKS9NYXRoLkxOMTApO30sbW9kZjpmdW5jdGlvbih4KXt2YXIgeDE9ZmxvYXRfY2hlY2soeCk7aWYoeDE+MCl7dmFyIGk9ZmxvYXQoeDEtTWF0aC5mbG9vcih4MSkpO3JldHVybiBbaSxmbG9hdCh4MS1pKV07fXZhciBpPWZsb2F0KHgxLU1hdGguY2VpbCh4MSkpO3JldHVybiBbaSxmbG9hdChNYXRoLmNlaWwoeDEpKV07fSxwaTpmbG9hdChNYXRoLlBJKSxwb3c6ZnVuY3Rpb24oeCx5KXtpZihpc2luc3RhbmNlKHgsaW50KSlyZXR1cm4gTWF0aC5wb3coeCxmbG9hdF9jaGVjayh5KSk7ZWxzZSByZXR1cm4gZmxvYXQoTWF0aC5wb3coeC52YWx1ZSxmbG9hdF9jaGVjayh5KSkpO30scmFkaWFuczpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoZmxvYXRfY2hlY2soeCkqTWF0aC5QSS8xODApO30sc2luOmZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLnNpbihmbG9hdF9jaGVjayh4KSkpO30sc3FydDpmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5zcXJ0KGZsb2F0X2NoZWNrKHgpKSk7fSx0cnVuYzpmdW5jdGlvbih4KXt0cnl7cmV0dXJuIGdldGF0dHIoeCwnX190cnVuY19fJykoKTt9Y2F0Y2goZXJyKXskcG9wX2V4YygpO312YXIgeDE9ZmxvYXRfY2hlY2soeCk7aWYoIWlzTmFOKHBhcnNlRmxvYXQoeDEpKSYmaXNGaW5pdGUoeDEpKXJldHVybiBpbnQoTWF0aC5mbG9vcih4MSkpOyRyYWlzZSgnVmFsdWVFcnJvcicsJ29iamVjdCBpcyBub3QgYSBudW1iZXIgYW5kIGRvZXMgbm90IGNvbnRhaW4gX190cnVuY19fJyk7fX07Zm9yKHZhciAkYXR0ciBpbiAkbW9kdWxlKWlmKHR5cGVvZiAkbW9kdWxlWyRhdHRyXT09PSdmdW5jdGlvbicpeyRtb2R1bGVbJGF0dHJdLl9fcmVwcl9fPShmdW5jdGlvbihmdW5jKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJzxidWlsdC1pbiBmdW5jdGlvbiAnK2Z1bmMrJz4nO307fSkoJGF0dHIpOyRtb2R1bGVbJGF0dHJdLl9fc3RyX189KGZ1bmN0aW9uKGZ1bmMpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiAnPGJ1aWx0LWluIGZ1bmN0aW9uICcrZnVuYysnPic7fTt9KSgkYXR0cik7fQ==',
'/libs/html.js':'JG1vZHVsZT0oZnVuY3Rpb24oKXtmdW5jdGlvbiAkVGFnKHRhZ05hbWUsYXJncyl7dmFyIG9iaj0kRE9NTm9kZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpKTtvYmoucGFyZW50PXRoaXM7aWYoYXJncyE9dW5kZWZpbmVkJiZhcmdzLmxlbmd0aD4wKXskc3RhcnQ9MDskZmlyc3Q9YXJnc1swXTtpZigkZmlyc3QuX19jbGFzc19fIT09JEt3KXskc3RhcnQ9MTtpZihpc2luc3RhbmNlKCRmaXJzdCxbc3RyLGludCxmbG9hdF0pKXt0eHQ9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc3RyKCRmaXJzdCkpO29iai5lbHQuYXBwZW5kQ2hpbGQodHh0KTt9ZWxzZSBpZigkZmlyc3QuX19jbGFzc19fPT09JFRhZ1N1bURpY3QpZm9yKCRpPTA7JGk8JGZpcnN0LmNoaWxkcmVuLmxlbmd0aDskaSsrKW9iai5lbHQuYXBwZW5kQ2hpbGQoJGZpcnN0LmNoaWxkcmVuWyRpXS5lbHQpO2Vsc2UgdHJ5e29iai5lbHQuYXBwZW5kQ2hpbGQoJGZpcnN0LmVsdCk7fWNhdGNoKGVycil7Y29uc29sZS5sb2coJ2VycmV1ciAnK2Vycik7dGhyb3cgVmFsdWVFcnJvcignd3JvbmcgZWxlbWVudCAnKyRmaXJzdCk7fX1mb3IodmFyICRpPSRzdGFydDskaTxhcmdzLmxlbmd0aDskaSsrKXskYXJnPWFyZ3NbJGldO2lmKCRhcmcmJiRhcmcuX19jbGFzc19fPT09JEt3KWlmKCRhcmcubmFtZS50b0xvd2VyQ2FzZSgpLnN1YnN0cigwLDIpPT09Im9uIilldmFsKCdET01Ob2RlLmJpbmQob2JqLCInKyRhcmcubmFtZS50b0xvd2VyQ2FzZSgpLnN1YnN0cigyKSsnIixmdW5jdGlvbigpeycrJGFyZy52YWx1ZSsnfSknKTtlbHNlIGlmKCRhcmcubmFtZS50b0xvd2VyQ2FzZSgpPT0ic3R5bGUiKURPTU5vZGUuc2V0X3N0eWxlKG9iaiwkYXJnLnZhbHVlKTtlbHNlIGlmKCRhcmcudmFsdWUhPT1mYWxzZSl0cnl7dmFyIGFyZz0kYXJnLm5hbWUudG9Mb3dlckNhc2UoKTtvYmouZWx0LnNldEF0dHJpYnV0ZShhcmcsJGFyZy52YWx1ZSk7aWYoYXJnPT0iY2xhc3MiKW9iai5lbHQuc2V0QXR0cmlidXRlKCJjbGFzc05hbWUiLCRhcmcudmFsdWUpO31jYXRjaChlcnIpe2NvbnNvbGUubG9nKCdlcnJldXIgJytlcnIpO3Rocm93IFZhbHVlRXJyb3IoImNhbid0IHNldCBhdHRyaWJ1dGUgIiskYXJnLm5hbWUpO319fXJldHVybiBvYmo7fWZ1bmN0aW9uIEEoKXt2YXIgb2JqPSRUYWcoJ0EnLGFyZ3VtZW50cyk7cmV0dXJuIG9iajt9QS5fX25hbWVfXz0naHRtbC5BJzt2YXIgJHNyYz1BKycnOyR0YWdzPVsnQScsJ0FCQlInLCdBQ1JPTllNJywnQUREUkVTUycsJ0FQUExFVCcsJ0InLCdCRE8nLCdCSUcnLCdCTE9DS1FVT1RFJywnQlVUVE9OJywnQ0FQVElPTicsJ0NFTlRFUicsJ0NJVEUnLCdDT0RFJywnREVMJywnREZOJywnRElSJywnRElWJywnREwnLCdFTScsJ0ZJRUxEU0VUJywnRk9OVCcsJ0ZPUk0nLCdGUkFNRVNFVCcsJ0gxJywnSDInLCdIMycsJ0g0JywnSDUnLCdINicsJ0knLCdJRlJBTUUnLCdJTlMnLCdLQkQnLCdMQUJFTCcsJ0xFR0VORCcsJ01BUCcsJ01FTlUnLCdOT0ZSQU1FUycsJ05PU0NSSVBUJywnT0JKRUNUJywnT0wnLCdPUFRHUk9VUCcsJ1BSRScsJ1EnLCdTJywnU0FNUCcsJ1NDUklQVCcsJ1NFTEVDVCcsJ1NNQUxMJywnU1BBTicsJ1NUUklLRScsJ1NUUk9ORycsJ1NUWUxFJywnU1VCJywnU1VQJywnVEFCTEUnLCdURVhUQVJFQScsJ1RJVExFJywnVFQnLCdVJywnVUwnLCdWQVInLCdCT0RZJywnQ09MR1JPVVAnLCdERCcsJ0RUJywnSEVBRCcsJ0hUTUwnLCdMSScsJ1AnLCdUQk9EWScsJ09QVElPTicsJ1REJywnVEZPT1QnLCdUSCcsJ1RIRUFEJywnVFInLCdBUkVBJywnQkFTRScsJ0JBU0VGT05UJywnQlInLCdDT0wnLCdGUkFNRScsJ0hSJywnSU1HJywnSU5QVVQnLCdJU0lOREVYJywnTElOSycsJ01FVEEnLCdQQVJBTSddOyR0YWdzPSR0YWdzLmNvbmNhdChbJ0FSVElDTEUnLCdBU0lERScsJ0FVRElPJywnQkRJJywnQ0FOVkFTJywnQ09NTUFORCcsJ0RBVEFMSVNUJywnREVUQUlMUycsJ0RJQUxPRycsJ0VNQkVEJywnRklHQ0FQVElPTicsJ0ZJR1VSRScsJ0ZPT1RFUicsJ0hFQURFUicsJ0tFWUdFTicsJ01BUksnLCdNRVRFUicsJ05BVicsJ09VVFBVVCcsJ1BST0dSRVNTJywnUlAnLCdSVCcsJ1JVQlknLCdTRUNUSU9OJywnU09VUkNFJywnU1VNTUFSWScsJ1RJTUUnLCdUUkFDSycsJ1ZJREVPJywnV0JSJ10pO3ZhciBvYmo9bmV3IE9iamVjdCgpO2ZvcigkaT0wOyRpPCR0YWdzLmxlbmd0aDskaSsrKXskY29kZT0kc3JjLnJlcGxhY2UoL0EvZ20sJHRhZ3NbJGldKTtldmFsKCJvYmouIiskdGFnc1skaV0rIj0iKyRjb2RlKTtldmFsKCJvYmouIiskdGFnc1skaV0rJy5fX25hbWVfXz0iaHRtbC4nKyR0YWdzWyRpXSsnIicpO31vYmouX19nZXRhdHRyX189ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fTtyZXR1cm4gb2JqO30pKCk7',
'/libs/hashlib.js':'JG1vZHVsZT17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7aWYoYXR0cj09J25ldycpcmV0dXJuICRoYXNobGliX25ldztyZXR1cm4gdGhpc1thdHRyXTt9LG1kNTpmdW5jdGlvbigpe3JldHVybiAkaGFzaGxpYl9uZXcoJ21kNScpO30sc2hhMTpmdW5jdGlvbigpe3JldHVybiAkaGFzaGxpYl9uZXcoJ3NoYTEnKTt9LHNoYTIyNDpmdW5jdGlvbigpe3JldHVybiAkaGFzaGxpYl9uZXcoJ3NoYTIyNCcpO30sc2hhMjU2OmZ1bmN0aW9uKCl7cmV0dXJuICRoYXNobGliX25ldygnc2hhMjU2Jyk7fSxzaGEzODQ6ZnVuY3Rpb24oKXtyZXR1cm4gJGhhc2hsaWJfbmV3KCdzaGEzODQnKTt9LHNoYTUxMjpmdW5jdGlvbigpe3JldHVybiAkaGFzaGxpYl9uZXcoJ3NoYTUxMicpO30sYWxnb3JpdGhtc19ndWFyYW50ZWVkOlsnbWQ1Jywnc2hhMScsJ3NoYTIyNCcsJ3NoYTI1NicsJ3NoYTM4NCcsJ3NoYTUxMiddLGFsZ29yaXRobXNfYXZhaWxhYmxlOlsnbWQ1Jywnc2hhMScsJ3NoYTIyNCcsJ3NoYTI1NicsJ3NoYTM4NCcsJ3NoYTUxMiddfTtmdW5jdGlvbiAkZ2V0X0NyeXB0b0pTX2xpYihhbGcpe3ZhciBpbXA9JGltcG9ydGVyKCk7dmFyICR4bWxodHRwPWltcFswXSxmYWtlX3FzPWltcFsxXSx0aW1lcj1pbXBbMl0scmVzPW51bGw7JHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoJHhtbGh0dHAucmVhZHlTdGF0ZT09NCl7d2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7aWYoJHhtbGh0dHAuc3RhdHVzPT0yMDB8fCR4bWxodHRwLnN0YXR1cz09MClyZXM9JHhtbGh0dHAucmVzcG9uc2VUZXh0O2Vsc2V7cmVzPUVycm9yKCk7cmVzLm5hbWU9J05vdEZvdW5kRXJyb3InO3Jlcy5tZXNzYWdlPSJObyBDcnlwdG9KUyBsaWIgbmFtZWQgJyIrYWxnKyInIjt9fX07JHhtbGh0dHAub3BlbignR0VUJyxfX0JSWVRIT05fXy5icnl0aG9uX3BhdGgrJ2xpYnMvY3J5cHRvX2pzL3JvbGx1cHMvJythbGcrJy5qcycrZmFrZV9xcyxmYWxzZSk7aWYoJ292ZXJyaWRlTWltZVR5cGUnIGluICR4bWxodHRwKSR4bWxodHRwLm92ZXJyaWRlTWltZVR5cGUoInRleHQvcGxhaW4iKTskeG1saHR0cC5zZW5kKCk7aWYocmVzLmNvbnN0cnVjdG9yPT09RXJyb3IpdGhyb3cgcmVzO3RyeXtldmFsKHJlcysiOyBfX0JSWVRIT05fXy5DcnlwdG9KUz1DcnlwdG9KUzsiKTt9Y2F0Y2goZXJyKXt0aHJvdyBFcnJvcigiSlMgRXZhbCBFcnJvciIsIkNhbm5vdCBldmFsIENyeXB0b0pTIGFsZ29yaXRobSAnIithbGcrIicgOiBlcnJvcjoiK2Vycik7fX1mdW5jdGlvbiAkaGFzaGxpYl9uZXcoYWxnKXtpZihhbGc9PSdtZDUnKXtpZihfX0JSWVRIT05fXy5DcnlwdG89PT11bmRlZmluZWR8fF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uTUQ1PT09dW5kZWZpbmVkKSRnZXRfQ3J5cHRvSlNfbGliKCdtZDUnKTt0aGlzLmhhc2g9X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5NRDUuY3JlYXRlKCk7fWVsc2UgaWYoYWxnPT0nc2hhMScpe2lmKF9fQlJZVEhPTl9fLkNyeXB0bz09PXVuZGVmaW5lZHx8X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEExPT09dW5kZWZpbmVkKSRnZXRfQ3J5cHRvSlNfbGliKCdzaGExJyk7dGhpcy5oYXNoPV9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBMS5jcmVhdGUoKTt9ZWxzZSBpZihhbGc9PSdzaGEyMjQnKXtpZihfX0JSWVRIT05fXy5DcnlwdG89PT11bmRlZmluZWR8fF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBMjI0PT09dW5kZWZpbmVkKSRnZXRfQ3J5cHRvSlNfbGliKCdzaGEyMjQnKTt0aGlzLmhhc2g9X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEEyMjQuY3JlYXRlKCk7fWVsc2UgaWYoYWxnPT0nc2hhMjU2Jyl7aWYoX19CUllUSE9OX18uQ3J5cHRvPT09dW5kZWZpbmVkfHxfX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTI1Nj09PXVuZGVmaW5lZCkkZ2V0X0NyeXB0b0pTX2xpYignc2hhMjU2Jyk7dGhpcy5oYXNoPV9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBMjU2LmNyZWF0ZSgpO31lbHNlIGlmKGFsZz09J3NoYTM4NCcpe2lmKF9fQlJZVEhPTl9fLkNyeXB0bz09PXVuZGVmaW5lZHx8X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEEzODQ9PT11bmRlZmluZWQpJGdldF9DcnlwdG9KU19saWIoJ3NoYTM4NCcpO3RoaXMuaGFzaD1fX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTM4NC5jcmVhdGUoKTt9ZWxzZSBpZihhbGc9PSdzaGE1MTInKXtpZihfX0JSWVRIT05fXy5DcnlwdG89PT11bmRlZmluZWR8fF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBNTEyPT09dW5kZWZpbmVkKSRnZXRfQ3J5cHRvSlNfbGliKCdzaGE1MTInKTt0aGlzLmhhc2g9X19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEE1MTIuY3JlYXRlKCk7fWVsc2UgJHJhaXNlKCdBdHRyaWJ1dGVFcnJvcicsJ0ludmFsaWQgaGFzaCBhbGdvcml0aG06JythbGcpO3RoaXMuX19jbGFzc19fPSR0eXBlO3RoaXMuX19nZXRhdHRyX189ZnVuY3Rpb24oYXR0cil7cmV0dXJuICRnZXRhdHRyKHRoaXMsYXR0cik7fTt0aGlzLl9fc3RyX189ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZXhkaWdlc3QoKTt9O3RoaXMudXBkYXRlPWZ1bmN0aW9uKG1zZyl7dGhpcy5oYXNoLnVwZGF0ZShtc2cpO307dGhpcy5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzaC5jbG9uZSgpO307dGhpcy5oZXhkaWdlc3Q9ZnVuY3Rpb24oKXt2YXIgdGVtcD10aGlzLmhhc2guY2xvbmUoKTt0ZW1wPXRlbXAuZmluYWxpemUoKTtyZXR1cm4gdGVtcC50b1N0cmluZygpO307cmV0dXJuIHRoaXM7fSRtb2R1bGUuX19jbGFzc19fPSRtb2R1bGU7JG1vZHVsZS5fX3N0cl9fPWZ1bmN0aW9uKCl7cmV0dXJuICI8bW9kdWxlICdoYXNobGliJz4iO307',
'/libs/_os.js':'JG1vZHVsZT17X19nZXRhdHRyX186ZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl07fSxyYW5kb206ZnVuY3Rpb24oKXtyZXR1cm4gZmxvYXQoTWF0aC5yYW5kb20oKSk7fSxyYW5kaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGludChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGItYSkrYSkpO319OyRtb2R1bGUuX19jbGFzc19fPSRtb2R1bGU7JG1vZHVsZS5fX3N0cl9fPWZ1bmN0aW9uKCl7cmV0dXJuICI8bW9kdWxlICdfb3MnPiI7fTs=',
'/libs/crypto_js/rollups/sha1.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihlLG0pe3ZhciBwPXt9LGo9cC5saWI9e30sbD1mdW5jdGlvbigpe30sZj1qLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtsLnByb3RvdHlwZT10aGlzO3ZhciBjPW5ldyBsKCk7YSYmYy5taXhJbihhKTtjLmhhc093blByb3BlcnR5KCJpbml0Iil8fChjLmluaXQ9ZnVuY3Rpb24oKXtjLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtjLmluaXQucHJvdG90eXBlPWM7Yy4kc3VwZXI9dGhpcztyZXR1cm4gYzt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJih0aGlzW2NdPWFbY10pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0sbj1qLldvcmRBcnJheT1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGMpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWMhPW0/Yzo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fGgpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLndvcmRzLHE9YS53b3JkcyxkPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihkJTQpZm9yKHZhciBiPTA7YjxhO2IrKyljW2QrYj4+PjJdfD0ocVtiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NSk8PDI0LTgqKChkK2IpJTQpO2Vsc2UgaWYoNjU1MzU8cS5sZW5ndGgpZm9yKGI9MDtiPGE7Yis9NCljW2QrYj4+PjJdPXFbYj4+PjJdO2Vsc2UgYy5wdXNoLmFwcGx5KGMscSk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YVtjPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGMlNCk7YS5sZW5ndGg9ZS5jZWlsKGMvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVtdLGI9MDtiPGE7Yis9NCljLnB1c2goNDI5NDk2NzI5NiplLnJhbmRvbSgpfDApO3JldHVybiBuZXcgbi5pbml0KGMsYSk7fX0pLGI9cC5lbmM9e30saD1iLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgYj1bXSxkPTA7ZDxhO2QrKyl7dmFyIGY9Y1tkPj4+Ml0+Pj4yNC04KihkJTQpJjI1NTtiLnB1c2goKGY+Pj40KS50b1N0cmluZygxNikpO2IucHVzaCgoZiYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGIuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGM9YS5sZW5ndGgsYj1bXSxkPTA7ZDxjO2QrPTIpYltkPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGQsMiksMTYpPDwyNC00KihkJTgpO3JldHVybiBuZXcgbi5pbml0KGIsYy8yKTt9fSxnPWIuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGM9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBiPVtdLGQ9MDtkPGE7ZCsrKWIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGNbZD4+PjJdPj4+MjQtOCooZCU0KSYyNTUpKTtyZXR1cm4gYi5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1hLmxlbmd0aCxiPVtdLGQ9MDtkPGM7ZCsrKWJbZD4+PjJdfD0oYS5jaGFyQ29kZUF0KGQpJjI1NSk8PDI0LTgqKGQlNCk7cmV0dXJuIG5ldyBuLmluaXQoYixjKTt9fSxyPWIuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShnLnN0cmluZ2lmeShhKSkpO31jYXRjaChjKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gZy5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpKTt9fSxrPWouQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1mLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBuLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9ci5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuX2RhdGEsYj1jLndvcmRzLGQ9Yy5zaWdCeXRlcyxmPXRoaXMuYmxvY2tTaXplLGg9ZC8oNCpmKSxoPWE/ZS5jZWlsKGgpOmUubWF4KChofDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1oKmY7ZD1lLm1pbig0KmEsZCk7aWYoYSl7Zm9yKHZhciBnPTA7ZzxhO2crPWYpdGhpcy5fZG9Qcm9jZXNzQmxvY2soYixnKTtnPWIuc3BsaWNlKDAsYSk7Yy5zaWdCeXRlcy09ZDt9cmV0dXJuIG5ldyBuLmluaXQoZyxkKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Zi5jbG9uZS5jYWxsKHRoaXMpO2EuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBhO30sX21pbkJ1ZmZlclNpemU6MH0pO2ouSGFzaGVyPWsuZXh0ZW5kKHtjZmc6Zi5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe2sucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5fYXBwZW5kKGEpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsYil7cmV0dXJuIG5ldyBhLmluaXQoYikuZmluYWxpemUoYyk7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGYpe3JldHVybiBuZXcgcy5ITUFDLmluaXQoYSxmKS5maW5hbGl6ZShiKTt9O319KTt2YXIgcz1wLmFsZ289e307cmV0dXJuIHA7fShNYXRoKTsoZnVuY3Rpb24oKXt2YXIgZT1DcnlwdG9KUyxtPWUubGliLHA9bS5Xb3JkQXJyYXksaj1tLkhhc2hlcixsPVtdLG09ZS5hbGdvLlNIQTE9ai5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgcC5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pO30sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGYsbil7Zm9yKHZhciBiPXRoaXMuX2hhc2gud29yZHMsaD1iWzBdLGc9YlsxXSxlPWJbMl0saz1iWzNdLGo9Yls0XSxhPTA7ODA+YTthKyspe2lmKDE2PmEpbFthXT1mW24rYV18MDtlbHNle3ZhciBjPWxbYS0zXV5sW2EtOF1ebFthLTE0XV5sW2EtMTZdO2xbYV09Yzw8MXxjPj4+MzE7fWM9KGg8PDV8aD4+PjI3KStqK2xbYV07Yz0yMD5hP2MrKChnJmV8fmcmaykrMTUxODUwMDI0OSk6NDA+YT9jKygoZ15lXmspKzE4NTk3NzUzOTMpOjYwPmE/YysoKGcmZXxnJmt8ZSZrKS0xODk0MDA3NTg4KTpjKygoZ15lXmspLTg5OTQ5NzUxNCk7aj1rO2s9ZTtlPWc8PDMwfGc+Pj4yO2c9aDtoPWM7fWJbMF09YlswXStofDA7YlsxXT1iWzFdK2d8MDtiWzJdPWJbMl0rZXwwO2JbM109YlszXStrfDA7Yls0XT1iWzRdK2p8MDt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGY9dGhpcy5fZGF0YSxlPWYud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsaD04KmYuc2lnQnl0ZXM7ZVtoPj4+NV18PTEyODw8MjQtaCUzMjtlWyhoKzY0Pj4+OTw8NCkrMTRdPU1hdGguZmxvb3IoYi80Mjk0OTY3Mjk2KTtlWyhoKzY0Pj4+OTw8NCkrMTVdPWI7Zi5zaWdCeXRlcz00KmUubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaDt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGU9ai5jbG9uZS5jYWxsKHRoaXMpO2UuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBlO319KTtlLlNIQTE9ai5fY3JlYXRlSGVscGVyKG0pO2UuSG1hY1NIQTE9ai5fY3JlYXRlSG1hY0hlbHBlcihtKTt9KSgpOw==',
'/libs/crypto_js/rollups/sha3.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbih2LHApe3ZhciBkPXt9LHU9ZC5saWI9e30scj1mdW5jdGlvbigpe30sZj11LkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtyLnByb3RvdHlwZT10aGlzO3ZhciBiPW5ldyByKCk7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtiLmluaXQucHJvdG90eXBlPWI7Yi4kc3VwZXI9dGhpcztyZXR1cm4gYjt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scz11LldvcmRBcnJheT1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWIhPXA/Yjo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHkpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGM9YS53b3JkcyxqPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihqJTQpZm9yKHZhciBuPTA7bjxhO24rKyliW2orbj4+PjJdfD0oY1tuPj4+Ml0+Pj4yNC04KihuJTQpJjI1NSk8PDI0LTgqKChqK24pJTQpO2Vsc2UgaWYoNjU1MzU8Yy5sZW5ndGgpZm9yKG49MDtuPGE7bis9NCliW2orbj4+PjJdPWNbbj4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsYyk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7YVtiPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGIlNCk7YS5sZW5ndGg9di5jZWlsKGIvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MDtjPGE7Yys9NCliLnB1c2goNDI5NDk2NzI5Nip2LnJhbmRvbSgpfDApO3JldHVybiBuZXcgcy5pbml0KGIsYSk7fX0pLHg9ZC5lbmM9e30seT14LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgYz1bXSxqPTA7ajxhO2orKyl7dmFyIG49YltqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NTtjLnB1c2goKG4+Pj40KS50b1N0cmluZygxNikpO2MucHVzaCgobiYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGMuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1bXSxqPTA7ajxiO2orPTIpY1tqPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGosMiksMTYpPDwyNC00KihqJTgpO3JldHVybiBuZXcgcy5pbml0KGMsYi8yKTt9fSxlPXguTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBjPVtdLGo9MDtqPGE7aisrKWMucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJbaj4+PjJdPj4+MjQtOCooaiU0KSYyNTUpKTtyZXR1cm4gYy5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPVtdLGo9MDtqPGI7aisrKWNbaj4+PjJdfD0oYS5jaGFyQ29kZUF0KGopJjI1NSk8PDI0LTgqKGolNCk7cmV0dXJuIG5ldyBzLmluaXQoYyxiKTt9fSxxPXguVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShlLnN0cmluZ2lmeShhKSkpO31jYXRjaChiKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gZS5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpKTt9fSx0PXUuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1mLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBzLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9cS5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2RhdGEsYz1iLndvcmRzLGo9Yi5zaWdCeXRlcyxuPXRoaXMuYmxvY2tTaXplLGU9ai8oNCpuKSxlPWE/di5jZWlsKGUpOnYubWF4KChlfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1lKm47aj12Lm1pbig0KmEsaik7aWYoYSl7Zm9yKHZhciBmPTA7ZjxhO2YrPW4pdGhpcy5fZG9Qcm9jZXNzQmxvY2soYyxmKTtmPWMuc3BsaWNlKDAsYSk7Yi5zaWdCeXRlcy09ajt9cmV0dXJuIG5ldyBzLmluaXQoZixqKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Zi5jbG9uZS5jYWxsKHRoaXMpO2EuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBhO30sX21pbkJ1ZmZlclNpemU6MH0pO3UuSGFzaGVyPXQuZXh0ZW5kKHtjZmc6Zi5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe3QucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5fYXBwZW5kKGEpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7cmV0dXJuIG5ldyBhLmluaXQoYykuZmluYWxpemUoYik7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe3JldHVybiBuZXcgdy5ITUFDLmluaXQoYSxjKS5maW5hbGl6ZShiKTt9O319KTt2YXIgdz1kLmFsZ289e307cmV0dXJuIGQ7fShNYXRoKTsoZnVuY3Rpb24odil7dmFyIHA9Q3J5cHRvSlMsZD1wLmxpYix1PWQuQmFzZSxyPWQuV29yZEFycmF5LHA9cC54NjQ9e307cC5Xb3JkPXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGYscyl7dGhpcy5oaWdoPWY7dGhpcy5sb3c9czt9fSk7cC5Xb3JkQXJyYXk9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZixzKXtmPXRoaXMud29yZHM9Znx8W107dGhpcy5zaWdCeXRlcz1zIT12P3M6OCpmLmxlbmd0aDt9LHRvWDMyOmZ1bmN0aW9uKCl7Zm9yKHZhciBmPXRoaXMud29yZHMscz1mLmxlbmd0aCxkPVtdLHA9MDtwPHM7cCsrKXt2YXIgZT1mW3BdO2QucHVzaChlLmhpZ2gpO2QucHVzaChlLmxvdyk7fXJldHVybiByLmNyZWF0ZShkLHRoaXMuc2lnQnl0ZXMpO30sY2xvbmU6ZnVuY3Rpb24oKXtmb3IodmFyIGY9dS5jbG9uZS5jYWxsKHRoaXMpLGQ9Zi53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLHA9ZC5sZW5ndGgscj0wO3I8cDtyKyspZFtyXT1kW3JdLmNsb25lKCk7cmV0dXJuIGY7fX0pO30pKCk7KGZ1bmN0aW9uKHYpe2Zvcih2YXIgcD1DcnlwdG9KUyxkPXAubGliLHU9ZC5Xb3JkQXJyYXkscj1kLkhhc2hlcixmPXAueDY0LldvcmQsZD1wLmFsZ28scz1bXSx4PVtdLHk9W10sZT0xLHE9MCx0PTA7MjQ+dDt0Kyspe3NbZSs1KnFdPSh0KzEpKih0KzIpLzIlNjQ7dmFyIHc9KDIqZSszKnEpJTUsZT1xJTUscT13O31mb3IoZT0wOzU+ZTtlKyspZm9yKHE9MDs1PnE7cSsrKXhbZSs1KnFdPXErNSooKDIqZSszKnEpJTUpO2U9MTtmb3IocT0wOzI0PnE7cSsrKXtmb3IodmFyIGE9dz10PTA7Nz5hO2ErKyl7aWYoZSYxKXt2YXIgYj0oMTw8YSktMTszMj5iP3dePTE8PGI6dF49MTw8Yi0zMjt9ZT1lJjEyOD9lPDwxXjExMzplPDwxO315W3FdPWYuY3JlYXRlKHQsdyk7fWZvcih2YXIgYz1bXSxlPTA7MjU+ZTtlKyspY1tlXT1mLmNyZWF0ZSgpO2Q9ZC5TSEEzPXIuZXh0ZW5kKHtjZmc6ci5jZmcuZXh0ZW5kKHtvdXRwdXRMZW5ndGg6NTEyfSksX2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5fc3RhdGU9W10sYj0wOzI1PmI7YisrKWFbYl09bmV3IGYuaW5pdCgpO3RoaXMuYmxvY2tTaXplPSgxNjAwLTIqdGhpcy5jZmcub3V0cHV0TGVuZ3RoKS8zMjt9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZT10aGlzLl9zdGF0ZSxmPXRoaXMuYmxvY2tTaXplLzIsaD0wO2g8ZjtoKyspe3ZhciBsPWFbYisyKmhdLG09YVtiKzIqaCsxXSxsPShsPDw4fGw+Pj4yNCkmMTY3MTE5MzV8KGw8PDI0fGw+Pj44KSY0Mjc4MjU1MzYwLG09KG08PDh8bT4+PjI0KSYxNjcxMTkzNXwobTw8MjR8bT4+PjgpJjQyNzgyNTUzNjAsZz1lW2hdO2cuaGlnaF49bTtnLmxvd149bDt9Zm9yKGY9MDsyND5mO2YrKyl7Zm9yKGg9MDs1Pmg7aCsrKXtmb3IodmFyIGQ9bD0wLGs9MDs1Pms7aysrKWc9ZVtoKzUqa10sbF49Zy5oaWdoLGRePWcubG93O2c9Y1toXTtnLmhpZ2g9bDtnLmxvdz1kO31mb3IoaD0wOzU+aDtoKyspe2c9Y1soaCs0KSU1XTtsPWNbKGgrMSklNV07bT1sLmhpZ2g7az1sLmxvdztsPWcuaGlnaF4obTw8MXxrPj4+MzEpO2Q9Zy5sb3deKGs8PDF8bT4+PjMxKTtmb3Ioaz0wOzU+aztrKyspZz1lW2grNSprXSxnLmhpZ2hePWwsZy5sb3dePWQ7fWZvcihtPTE7MjU+bTttKyspZz1lW21dLGg9Zy5oaWdoLGc9Zy5sb3csaz1zW21dLDMyPms/KGw9aDw8a3xnPj4+MzItayxkPWc8PGt8aD4+PjMyLWspOihsPWc8PGstMzJ8aD4+PjY0LWssZD1oPDxrLTMyfGc+Pj42NC1rKSxnPWNbeFttXV0sZy5oaWdoPWwsZy5sb3c9ZDtnPWNbMF07aD1lWzBdO2cuaGlnaD1oLmhpZ2g7Zy5sb3c9aC5sb3c7Zm9yKGg9MDs1Pmg7aCsrKWZvcihrPTA7NT5rO2srKyltPWgrNSprLGc9ZVttXSxsPWNbbV0sbT1jWyhoKzEpJTUrNSprXSxkPWNbKGgrMiklNSs1KmtdLGcuaGlnaD1sLmhpZ2hefm0uaGlnaCZkLmhpZ2gsZy5sb3c9bC5sb3defm0ubG93JmQubG93O2c9ZVswXTtoPXlbZl07Zy5oaWdoXj1oLmhpZ2g7Zy5sb3dePWgubG93O319LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxiPWEud29yZHMsYz04KmEuc2lnQnl0ZXMsZT0zMip0aGlzLmJsb2NrU2l6ZTtiW2M+Pj41XXw9MTw8MjQtYyUzMjtiWyh2LmNlaWwoKGMrMSkvZSkqZT4+PjUpLTFdfD0xMjg7YS5zaWdCeXRlcz00KmIubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtmb3IodmFyIGE9dGhpcy5fc3RhdGUsYj10aGlzLmNmZy5vdXRwdXRMZW5ndGgvOCxjPWIvOCxlPVtdLGg9MDtoPGM7aCsrKXt2YXIgZD1hW2hdLGY9ZC5oaWdoLGQ9ZC5sb3csZj0oZjw8OHxmPj4+MjQpJjE2NzExOTM1fChmPDwyNHxmPj4+OCkmNDI3ODI1NTM2MCxkPShkPDw4fGQ+Pj4yNCkmMTY3MTE5MzV8KGQ8PDI0fGQ+Pj44KSY0Mjc4MjU1MzYwO2UucHVzaChkKTtlLnB1c2goZik7fXJldHVybiBuZXcgdS5pbml0KGUsYik7fSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1yLmNsb25lLmNhbGwodGhpcyksYj1hLl9zdGF0ZT10aGlzLl9zdGF0ZS5zbGljZSgwKSxjPTA7MjU+YztjKyspYltjXT1iW2NdLmNsb25lKCk7cmV0dXJuIGE7fX0pO3AuU0hBMz1yLl9jcmVhdGVIZWxwZXIoZCk7cC5IbWFjU0hBMz1yLl9jcmVhdGVIbWFjSGVscGVyKGQpO30pKE1hdGgpOw==',
'/libs/crypto_js/rollups/sha224.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihnLGwpe3ZhciBmPXt9LGs9Zi5saWI9e30saD1mdW5jdGlvbigpe30sbT1rLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtoLnByb3RvdHlwZT10aGlzO3ZhciBjPW5ldyBoKCk7YSYmYy5taXhJbihhKTtjLmhhc093blByb3BlcnR5KCJpbml0Iil8fChjLmluaXQ9ZnVuY3Rpb24oKXtjLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtjLmluaXQucHJvdG90eXBlPWM7Yy4kc3VwZXI9dGhpcztyZXR1cm4gYzt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJih0aGlzW2NdPWFbY10pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scT1rLldvcmRBcnJheT1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGMpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWMhPWw/Yzo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHMpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLndvcmRzLGQ9YS53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihiJTQpZm9yKHZhciBlPTA7ZTxhO2UrKyljW2IrZT4+PjJdfD0oZFtlPj4+Ml0+Pj4yNC04KihlJTQpJjI1NSk8PDI0LTgqKChiK2UpJTQpO2Vsc2UgaWYoNjU1MzU8ZC5sZW5ndGgpZm9yKGU9MDtlPGE7ZSs9NCljW2IrZT4+PjJdPWRbZT4+PjJdO2Vsc2UgYy5wdXNoLmFwcGx5KGMsZCk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YVtjPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGMlNCk7YS5sZW5ndGg9Zy5jZWlsKGMvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW0uY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVtdLGQ9MDtkPGE7ZCs9NCljLnB1c2goNDI5NDk2NzI5NipnLnJhbmRvbSgpfDApO3JldHVybiBuZXcgcS5pbml0KGMsYSk7fX0pLHQ9Zi5lbmM9e30scz10LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxiPTA7YjxhO2IrKyl7dmFyIGU9Y1tiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NTtkLnB1c2goKGU+Pj40KS50b1N0cmluZygxNikpO2QucHVzaCgoZSYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGQuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGM9YS5sZW5ndGgsZD1bXSxiPTA7YjxjO2IrPTIpZFtiPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGIsMiksMTYpPDwyNC00KihiJTgpO3JldHVybiBuZXcgcS5pbml0KGQsYy8yKTt9fSxuPXQuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGM9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBkPVtdLGI9MDtiPGE7YisrKWQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGNbYj4+PjJdPj4+MjQtOCooYiU0KSYyNTUpKTtyZXR1cm4gZC5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1hLmxlbmd0aCxkPVtdLGI9MDtiPGM7YisrKWRbYj4+PjJdfD0oYS5jaGFyQ29kZUF0KGIpJjI1NSk8PDI0LTgqKGIlNCk7cmV0dXJuIG5ldyBxLmluaXQoZCxjKTt9fSxqPXQuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShuLnN0cmluZ2lmeShhKSkpO31jYXRjaChjKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gbi5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpKTt9fSx3PWsuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1tLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBxLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9ai5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuX2RhdGEsZD1jLndvcmRzLGI9Yy5zaWdCeXRlcyxlPXRoaXMuYmxvY2tTaXplLGY9Yi8oNCplKSxmPWE/Zy5jZWlsKGYpOmcubWF4KChmfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1mKmU7Yj1nLm1pbig0KmEsYik7aWYoYSl7Zm9yKHZhciB1PTA7dTxhO3UrPWUpdGhpcy5fZG9Qcm9jZXNzQmxvY2soZCx1KTt1PWQuc3BsaWNlKDAsYSk7Yy5zaWdCeXRlcy09Yjt9cmV0dXJuIG5ldyBxLmluaXQodSxiKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bS5jbG9uZS5jYWxsKHRoaXMpO2EuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBhO30sX21pbkJ1ZmZlclNpemU6MH0pO2suSGFzaGVyPXcuZXh0ZW5kKHtjZmc6bS5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe3cucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5fYXBwZW5kKGEpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7cmV0dXJuIG5ldyBhLmluaXQoZCkuZmluYWxpemUoYyk7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjLGQpe3JldHVybiBuZXcgdi5ITUFDLmluaXQoYSxkKS5maW5hbGl6ZShjKTt9O319KTt2YXIgdj1mLmFsZ289e307cmV0dXJuIGY7fShNYXRoKTsoZnVuY3Rpb24oZyl7Zm9yKHZhciBsPUNyeXB0b0pTLGY9bC5saWIsaz1mLldvcmRBcnJheSxoPWYuSGFzaGVyLGY9bC5hbGdvLG09W10scT1bXSx0PWZ1bmN0aW9uKGEpe3JldHVybiA0Mjk0OTY3Mjk2KihhLShhfDApKXwwO30scz0yLG49MDs2ND5uOyl7dmFyIGo7YTp7aj1zO2Zvcih2YXIgdz1nLnNxcnQoaiksdj0yO3Y8PXc7disrKWlmKCEoaiV2KSl7aj0hMTticmVhayBhO31qPSEwO31qJiYoOD5uJiYobVtuXT10KGcucG93KHMsMC41KSkpLHFbbl09dChnLnBvdyhzLDEvMykpLG4rKyk7cysrO312YXIgYT1bXSxmPWYuU0hBMjU2PWguZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGsuaW5pdChtLnNsaWNlKDApKTt9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj10aGlzLl9oYXNoLndvcmRzLGU9YlswXSxmPWJbMV0sZz1iWzJdLGs9YlszXSxoPWJbNF0sbD1iWzVdLG09Yls2XSxuPWJbN10scD0wOzY0PnA7cCsrKXtpZigxNj5wKWFbcF09Y1tkK3BdfDA7ZWxzZXt2YXIgaj1hW3AtMTVdLHI9YVtwLTJdO2FbcF09KChqPDwyNXxqPj4+NyleKGo8PDE0fGo+Pj4xOCleaj4+PjMpK2FbcC03XSsoKHI8PDE1fHI+Pj4xNyleKHI8PDEzfHI+Pj4xOSlecj4+PjEwKSthW3AtMTZdO31qPW4rKChoPDwyNnxoPj4+NileKGg8PDIxfGg+Pj4xMSleKGg8PDd8aD4+PjI1KSkrKGgmbF5+aCZtKStxW3BdK2FbcF07cj0oKGU8PDMwfGU+Pj4yKV4oZTw8MTl8ZT4+PjEzKV4oZTw8MTB8ZT4+PjIyKSkrKGUmZl5lJmdeZiZnKTtuPW07bT1sO2w9aDtoPWsranwwO2s9ZztnPWY7Zj1lO2U9aityfDA7fWJbMF09YlswXStlfDA7YlsxXT1iWzFdK2Z8MDtiWzJdPWJbMl0rZ3wwO2JbM109YlszXStrfDA7Yls0XT1iWzRdK2h8MDtiWzVdPWJbNV0rbHwwO2JbNl09Yls2XSttfDA7Yls3XT1iWzddK258MDt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxkPWEud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsZT04KmEuc2lnQnl0ZXM7ZFtlPj4+NV18PTEyODw8MjQtZSUzMjtkWyhlKzY0Pj4+OTw8NCkrMTRdPWcuZmxvb3IoYi80Mjk0OTY3Mjk2KTtkWyhlKzY0Pj4+OTw8NCkrMTVdPWI7YS5zaWdCeXRlcz00KmQubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaDt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9aC5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhO319KTtsLlNIQTI1Nj1oLl9jcmVhdGVIZWxwZXIoZik7bC5IbWFjU0hBMjU2PWguX2NyZWF0ZUhtYWNIZWxwZXIoZik7fSkoTWF0aCk7KGZ1bmN0aW9uKCl7dmFyIGc9Q3J5cHRvSlMsbD1nLmxpYi5Xb3JkQXJyYXksZj1nLmFsZ28saz1mLlNIQTI1NixmPWYuU0hBMjI0PWsuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGwuaW5pdChbMzIzODM3MTAzMiw5MTQxNTA2NjMsODEyNzAyOTk5LDQxNDQ5MTI2OTcsNDI5MDc3NTg1NywxNzUwNjAzMDI1LDE2OTQwNzY4MzksMzIwNDA3NTQyOF0pO30sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZj1rLl9kb0ZpbmFsaXplLmNhbGwodGhpcyk7Zi5zaWdCeXRlcy09NDtyZXR1cm4gZjt9fSk7Zy5TSEEyMjQ9ay5fY3JlYXRlSGVscGVyKGYpO2cuSG1hY1NIQTIyND1rLl9jcmVhdGVIbWFjSGVscGVyKGYpO30pKCk7',
'/libs/crypto_js/rollups/sha512.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihhLG0pe3ZhciByPXt9LGY9ci5saWI9e30sZz1mdW5jdGlvbigpe30sbD1mLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtnLnByb3RvdHlwZT10aGlzO3ZhciBiPW5ldyBnKCk7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtiLmluaXQucHJvdG90eXBlPWI7Yi4kc3VwZXI9dGhpcztyZXR1cm4gYjt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scD1mLldvcmRBcnJheT1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWIhPW0/Yjo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHEpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGQ9YS53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihjJTQpZm9yKHZhciBqPTA7ajxhO2orKyliW2Mraj4+PjJdfD0oZFtqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NSk8PDI0LTgqKChjK2opJTQpO2Vsc2UgaWYoNjU1MzU8ZC5sZW5ndGgpZm9yKGo9MDtqPGE7ais9NCliW2Mraj4+PjJdPWRbaj4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsZCk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7bltiPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGIlNCk7bi5sZW5ndGg9YS5jZWlsKGIvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWwuY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24obil7Zm9yKHZhciBiPVtdLGQ9MDtkPG47ZCs9NCliLnB1c2goNDI5NDk2NzI5NiphLnJhbmRvbSgpfDApO3JldHVybiBuZXcgcC5pbml0KGIsbik7fX0pLHk9ci5lbmM9e30scT15LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxjPTA7YzxhO2MrKyl7dmFyIGo9YltjPj4+Ml0+Pj4yNC04KihjJTQpJjI1NTtkLnB1c2goKGo+Pj40KS50b1N0cmluZygxNikpO2QucHVzaCgoaiYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGQuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsZD1bXSxjPTA7YzxiO2MrPTIpZFtjPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGMsMiksMTYpPDwyNC00KihjJTgpO3JldHVybiBuZXcgcC5pbml0KGQsYi8yKTt9fSxHPXkuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBkPVtdLGM9MDtjPGE7YysrKWQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJbYz4+PjJdPj4+MjQtOCooYyU0KSYyNTUpKTtyZXR1cm4gZC5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxkPVtdLGM9MDtjPGI7YysrKWRbYz4+PjJdfD0oYS5jaGFyQ29kZUF0KGMpJjI1NSk8PDI0LTgqKGMlNCk7cmV0dXJuIG5ldyBwLmluaXQoZCxiKTt9fSxmYT15LlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoRy5zdHJpbmdpZnkoYSkpKTt9Y2F0Y2goYil7dGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIik7fX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIEcucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKSk7fX0saD1mLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09bC5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgcC5pbml0KCk7dGhpcy5fbkRhdGFCeXRlcz0wO30sX2FwcGVuZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPWZhLnBhcnNlKGEpKTt0aGlzLl9kYXRhLmNvbmNhdChhKTt0aGlzLl9uRGF0YUJ5dGVzKz1hLnNpZ0J5dGVzO30sX3Byb2Nlc3M6ZnVuY3Rpb24obil7dmFyIGI9dGhpcy5fZGF0YSxkPWIud29yZHMsYz1iLnNpZ0J5dGVzLGo9dGhpcy5ibG9ja1NpemUsbD1jLyg0KmopLGw9bj9hLmNlaWwobCk6YS5tYXgoKGx8MCktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKTtuPWwqajtjPWEubWluKDQqbixjKTtpZihuKXtmb3IodmFyIGg9MDtoPG47aCs9ail0aGlzLl9kb1Byb2Nlc3NCbG9jayhkLGgpO2g9ZC5zcGxpY2UoMCxuKTtiLnNpZ0J5dGVzLT1jO31yZXR1cm4gbmV3IHAuaW5pdChoLGMpO30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1sLmNsb25lLmNhbGwodGhpcyk7YS5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCk7cmV0dXJuIGE7fSxfbWluQnVmZmVyU2l6ZTowfSk7Zi5IYXNoZXI9aC5leHRlbmQoe2NmZzpsLmV4dGVuZCgpLGluaXQ6ZnVuY3Rpb24oYSl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGEpO3RoaXMucmVzZXQoKTt9LHJlc2V0OmZ1bmN0aW9uKCl7aC5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKTt9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzO30sZmluYWxpemU6ZnVuY3Rpb24oYSl7YSYmdGhpcy5fYXBwZW5kKGEpO3JldHVybiB0aGlzLl9kb0ZpbmFsaXplKCk7fSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixkKXtyZXR1cm4gbmV3IGEuaW5pdChkKS5maW5hbGl6ZShiKTt9O30sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsZCl7cmV0dXJuIG5ldyBnYS5ITUFDLmluaXQoYSxkKS5maW5hbGl6ZShiKTt9O319KTt2YXIgZ2E9ci5hbGdvPXt9O3JldHVybiByO30oTWF0aCk7KGZ1bmN0aW9uKGEpe3ZhciBtPUNyeXB0b0pTLHI9bS5saWIsZj1yLkJhc2UsZz1yLldvcmRBcnJheSxtPW0ueDY0PXt9O20uV29yZD1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLHApe3RoaXMuaGlnaD1hO3RoaXMubG93PXA7fX0pO20uV29yZEFycmF5PWYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGwscCl7bD10aGlzLndvcmRzPWx8fFtdO3RoaXMuc2lnQnl0ZXM9cCE9YT9wOjgqbC5sZW5ndGg7fSx0b1gzMjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLndvcmRzLHA9YS5sZW5ndGgsZj1bXSxxPTA7cTxwO3ErKyl7dmFyIEc9YVtxXTtmLnB1c2goRy5oaWdoKTtmLnB1c2goRy5sb3cpO31yZXR1cm4gZy5jcmVhdGUoZix0aGlzLnNpZ0J5dGVzKTt9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKSxwPWEud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxnPXAubGVuZ3RoLHE9MDtxPGc7cSsrKXBbcV09cFtxXS5jbG9uZSgpO3JldHVybiBhO319KTt9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gZy5jcmVhdGUuYXBwbHkoZyxhcmd1bWVudHMpO31mb3IodmFyIG09Q3J5cHRvSlMscj1tLmxpYi5IYXNoZXIsZj1tLng2NCxnPWYuV29yZCxsPWYuV29yZEFycmF5LGY9bS5hbGdvLHA9W2EoMTExNjM1MjQwOCwzNjA5NzY3NDU4KSxhKDE4OTk0NDc0NDEsNjAyODkxNzI1KSxhKDMwNDkzMjM0NzEsMzk2NDQ4NDM5OSksYSgzOTIxMDA5NTczLDIxNzMyOTU1NDgpLGEoOTYxOTg3MTYzLDQwODE2Mjg0NzIpLGEoMTUwODk3MDk5MywzMDUzODM0MjY1KSxhKDI0NTM2MzU3NDgsMjkzNzY3MTU3OSksYSgyODcwNzYzMjIxLDM2NjQ2MDk1NjApLGEoMzYyNDM4MTA4MCwyNzM0ODgzMzk0KSxhKDMxMDU5ODQwMSwxMTY0OTk2NTQyKSxhKDYwNzIyNTI3OCwxMzIzNjEwNzY0KSxhKDE0MjY4ODE5ODcsMzU5MDMwNDk5NCksYSgxOTI1MDc4Mzg4LDQwNjgxODIzODMpLGEoMjE2MjA3ODIwNiw5OTEzMzYxMTMpLGEoMjYxNDg4ODEwMyw2MzM4MDMzMTcpLGEoMzI0ODIyMjU4MCwzNDc5Nzc0ODY4KSxhKDM4MzUzOTA0MDEsMjY2NjYxMzQ1OCksYSg0MDIyMjI0Nzc0LDk0NDcxMTEzOSksYSgyNjQzNDcwNzgsMjM0MTI2Mjc3MyksYSg2MDQ4MDc2MjgsMjAwNzgwMDkzMyksYSg3NzAyNTU5ODMsMTQ5NTk5MDkwMSksYSgxMjQ5MTUwMTIyLDE4NTY0MzEyMzUpLGEoMTU1NTA4MTY5MiwzMTc1MjE4MTMyKSxhKDE5OTYwNjQ5ODYsMjE5ODk1MDgzNyksYSgyNTU0MjIwODgyLDM5OTk3MTkzMzkpLGEoMjgyMTgzNDM0OSw3NjY3ODQwMTYpLGEoMjk1Mjk5NjgwOCwyNTY2NTk0ODc5KSxhKDMyMTAzMTM2NzEsMzIwMzMzNzk1NiksYSgzMzM2NTcxODkxLDEwMzQ0NTcwMjYpLGEoMzU4NDUyODcxMSwyNDY2OTQ4OTAxKSxhKDExMzkyNjk5MywzNzU4MzI2MzgzKSxhKDMzODI0MTg5NSwxNjg3MTc5MzYpLGEoNjY2MzA3MjA1LDExODgxNzk5NjQpLGEoNzczNTI5OTEyLDE1NDYwNDU3MzQpLGEoMTI5NDc1NzM3MiwxNTIyODA1NDg1KSxhKDEzOTYxODIyOTEsMjY0MzgzMzgyMyksYSgxNjk1MTgzNzAwLDIzNDM1MjczOTApLGEoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSxhKDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksYSgyNDU2OTU2MDM3LDM0NDA3NzYyNyksYSgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLGEoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSxhKDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksYSgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksYSgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLGEoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSxhKDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksYSgyNzU0MjMzNDQsODUxMTY5NzIwKSxhKDQzMDIyNzczNCwzMTAwODIzNzUyKSxhKDUwNjk0ODYxNiwxMzYzMjU4MTk1KSxhKDY1OTA2MDU1NiwzNzUwNjg1NTkzKSxhKDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSxhKDk1ODEzOTU3MSwzMzE4MzA3NDI3KSxhKDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksYSgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLGEoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSxhKDE5NTU1NjIyMjIsMTU3NTk5MDAxMiksYSgyMDI0MTA0ODE1LDExMjU1OTI5MjgpLGEoMjIyNzczMDQ1MiwyNzE2OTA0MzA2KSxhKDIzNjE4NTI0MjQsNDQyNzc2MDQ0KSxhKDI0Mjg0MzY0NzQsNTkzNjk4MzQ0KSxhKDI3NTY3MzQxODcsMzczMzExMDI0OSksYSgzMjA0MDMxNDc5LDI5OTkzNTE1NzMpLGEoMzMyOTMyNTI5OCwzODE1OTIwNDI3KSxhKDMzOTE1Njk2MTQsMzkyODM4MzkwMCksYSgzNTE1MjY3MjcxLDU2NjI4MDcxMSksYSgzOTQwMTg3NjA2LDM0NTQwNjk1MzQpLGEoNDExODYzMDI3MSw0MDAwMjM5OTkyKSxhKDExNjQxODQ3NCwxOTE0MTM4NTU0KSxhKDE3NDI5MjQyMSwyNzMxMDU1MjcwKSxhKDI4OTM4MDM1NiwzMjAzOTkzMDA2KSxhKDQ2MDM5MzI2OSwzMjA2MjAzMTUpLGEoNjg1NDcxNzMzLDU4NzQ5NjgzNiksYSg4NTIxNDI5NzEsMTA4Njc5Mjg1MSksYSgxMDE3MDM2Mjk4LDM2NTU0MzEwMCksYSgxMTI2MDAwNTgwLDI2MTgyOTc2NzYpLGEoMTI4ODAzMzQ3MCwzNDA5ODU1MTU4KSxhKDE1MDE1MDU5NDgsNDIzNDUwOTg2NiksYSgxNjA3MTY3OTE1LDk4NzE2NzQ2OCksYSgxODE2NDAyMzE2LDEyNDYxODk1OTEpXSx5PVtdLHE9MDs4MD5xO3ErKyl5W3FdPWEoKTtmPWYuU0hBNTEyPXIuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGwuaW5pdChbbmV3IGcuaW5pdCgxNzc5MDMzNzAzLDQwODkyMzU3MjApLG5ldyBnLmluaXQoMzE0NDEzNDI3NywyMjI3ODczNTk1KSxuZXcgZy5pbml0KDEwMTM5MDQyNDIsNDI3MTE3NTcyMyksbmV3IGcuaW5pdCgyNzczNDgwNzYyLDE1OTU3NTAxMjkpLG5ldyBnLmluaXQoMTM1OTg5MzExOSwyOTE3NTY1MTM3KSxuZXcgZy5pbml0KDI2MDA4MjI5MjQsNzI1NTExMTk5KSxuZXcgZy5pbml0KDUyODczNDYzNSw0MjE1Mzg5NTQ3KSxuZXcgZy5pbml0KDE1NDE0NTkyMjUsMzI3MDMzMjA5KV0pO30sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsZil7Zm9yKHZhciBoPXRoaXMuX2hhc2gud29yZHMsZz1oWzBdLG49aFsxXSxiPWhbMl0sZD1oWzNdLGM9aFs0XSxqPWhbNV0sbD1oWzZdLGg9aFs3XSxxPWcuaGlnaCxtPWcubG93LHI9bi5oaWdoLE49bi5sb3csWj1iLmhpZ2gsTz1iLmxvdywkPWQuaGlnaCxQPWQubG93LGFhPWMuaGlnaCxRPWMubG93LGJhPWouaGlnaCxSPWoubG93LGNhPWwuaGlnaCxTPWwubG93LGRhPWguaGlnaCxUPWgubG93LHY9cSxzPW0sSD1yLEU9TixJPVosRj1PLFc9JCxKPVAsdz1hYSx0PVEsVT1iYSxLPVIsVj1jYSxMPVMsWD1kYSxNPVQseD0wOzgwPng7eCsrKXt2YXIgQj15W3hdO2lmKDE2PngpdmFyIHU9Qi5oaWdoPWFbZisyKnhdfDAsZT1CLmxvdz1hW2YrMip4KzFdfDA7ZWxzZXt2YXIgdT15W3gtMTVdLGU9dS5oaWdoLHo9dS5sb3csdT0oZT4+PjF8ejw8MzEpXihlPj4+OHx6PDwyNCleZT4+Pjcsej0oej4+PjF8ZTw8MzEpXih6Pj4+OHxlPDwyNCleKHo+Pj43fGU8PDI1KSxEPXlbeC0yXSxlPUQuaGlnaCxrPUQubG93LEQ9KGU+Pj4xOXxrPDwxMyleKGU8PDN8az4+PjI5KV5lPj4+NixrPShrPj4+MTl8ZTw8MTMpXihrPDwzfGU+Pj4yOSleKGs+Pj42fGU8PDI2KSxlPXlbeC03XSxZPWUuaGlnaCxDPXlbeC0xNl0sQT1DLmhpZ2gsQz1DLmxvdyxlPXorZS5sb3csdT11K1krKGU+Pj4wPHo+Pj4wPzE6MCksZT1lK2ssdT11K0QrKGU+Pj4wPGs+Pj4wPzE6MCksZT1lK0MsdT11K0ErKGU+Pj4wPEM+Pj4wPzE6MCk7Qi5oaWdoPXU7Qi5sb3c9ZTt9dmFyIFk9dyZVXn53JlYsQz10JktefnQmTCxCPXYmSF52JkleSCZJLGhhPXMmRV5zJkZeRSZGLHo9KHY+Pj4yOHxzPDw0KV4odjw8MzB8cz4+PjIpXih2PDwyNXxzPj4+NyksRD0ocz4+PjI4fHY8PDQpXihzPDwzMHx2Pj4+MileKHM8PDI1fHY+Pj43KSxrPXBbeF0saWE9ay5oaWdoLGVhPWsubG93LGs9TSsoKHQ+Pj4xNHx3PDwxOCleKHQ+Pj4xOHx3PDwxNCleKHQ8PDIzfHc+Pj45KSksQT1YKygodz4+PjE0fHQ8PDE4KV4odz4+PjE4fHQ8PDE0KV4odzw8MjN8dD4+PjkpKSsoaz4+PjA8TT4+PjA/MTowKSxrPWsrQyxBPUErWSsoaz4+PjA8Qz4+PjA/MTowKSxrPWsrZWEsQT1BK2lhKyhrPj4+MDxlYT4+PjA/MTowKSxrPWsrZSxBPUErdSsoaz4+PjA8ZT4+PjA/MTowKSxlPUQraGEsQj16K0IrKGU+Pj4wPEQ+Pj4wPzE6MCksWD1WLE09TCxWPVUsTD1LLFU9dyxLPXQsdD1KK2t8MCx3PVcrQSsodD4+PjA8Sj4+PjA/MTowKXwwLFc9SSxKPUYsST1ILEY9RSxIPXYsRT1zLHM9aytlfDAsdj1BK0IrKHM+Pj4wPGs+Pj4wPzE6MCl8MDt9bT1nLmxvdz1tK3M7Zy5oaWdoPXErdisobT4+PjA8cz4+PjA/MTowKTtOPW4ubG93PU4rRTtuLmhpZ2g9citIKyhOPj4+MDxFPj4+MD8xOjApO089Yi5sb3c9TytGO2IuaGlnaD1aK0krKE8+Pj4wPEY+Pj4wPzE6MCk7UD1kLmxvdz1QK0o7ZC5oaWdoPSQrVysoUD4+PjA8Sj4+PjA/MTowKTtRPWMubG93PVErdDtjLmhpZ2g9YWErdysoUT4+PjA8dD4+PjA/MTowKTtSPWoubG93PVIrSztqLmhpZ2g9YmErVSsoUj4+PjA8Sz4+PjA/MTowKTtTPWwubG93PVMrTDtsLmhpZ2g9Y2ErVisoUz4+PjA8TD4+PjA/MTowKTtUPWgubG93PVQrTTtoLmhpZ2g9ZGErWCsoVD4+PjA8TT4+PjA/MTowKTt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxmPWEud29yZHMsaD04KnRoaXMuX25EYXRhQnl0ZXMsZz04KmEuc2lnQnl0ZXM7ZltnPj4+NV18PTEyODw8MjQtZyUzMjtmWyhnKzEyOD4+PjEwPDw1KSszMF09TWF0aC5mbG9vcihoLzQyOTQ5NjcyOTYpO2ZbKGcrMTI4Pj4+MTA8PDUpKzMxXT1oO2Euc2lnQnl0ZXM9NCpmLmxlbmd0aDt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXMuX2hhc2gudG9YMzIoKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9ci5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhO30sYmxvY2tTaXplOjMyfSk7bS5TSEE1MTI9ci5fY3JlYXRlSGVscGVyKGYpO20uSG1hY1NIQTUxMj1yLl9jcmVhdGVIbWFjSGVscGVyKGYpO30pKCk7',
'/libs/crypto_js/rollups/sha384.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihhLGMpe3ZhciBkPXt9LGo9ZC5saWI9e30sZj1mdW5jdGlvbigpe30sbT1qLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtmLnByb3RvdHlwZT10aGlzO3ZhciBiPW5ldyBmKCk7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtiLmluaXQucHJvdG90eXBlPWI7Yi4kc3VwZXI9dGhpcztyZXR1cm4gYjt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYTt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0sQj1qLldvcmRBcnJheT1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWIhPWM/Yjo0KmEubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHkpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGc9YS53b3JkcyxlPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihlJTQpZm9yKHZhciBrPTA7azxhO2srKyliW2Uraz4+PjJdfD0oZ1trPj4+Ml0+Pj4yNC04KihrJTQpJjI1NSk8PDI0LTgqKChlK2spJTQpO2Vsc2UgaWYoNjU1MzU8Zy5sZW5ndGgpZm9yKGs9MDtrPGE7ays9NCliW2Uraz4+PjJdPWdbaz4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsZyk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7bltiPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGIlNCk7bi5sZW5ndGg9YS5jZWlsKGIvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW0uY2xvbmUuY2FsbCh0aGlzKTthLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGE7fSxyYW5kb206ZnVuY3Rpb24obil7Zm9yKHZhciBiPVtdLGc9MDtnPG47Zys9NCliLnB1c2goNDI5NDk2NzI5NiphLnJhbmRvbSgpfDApO3JldHVybiBuZXcgQi5pbml0KGIsbik7fX0pLHY9ZC5lbmM9e30seT12LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZz1bXSxlPTA7ZTxhO2UrKyl7dmFyIGs9YltlPj4+Ml0+Pj4yNC04KihlJTQpJjI1NTtnLnB1c2goKGs+Pj40KS50b1N0cmluZygxNikpO2cucHVzaCgoayYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGcuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsZz1bXSxlPTA7ZTxiO2UrPTIpZ1tlPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGUsMiksMTYpPDwyNC00KihlJTgpO3JldHVybiBuZXcgQi5pbml0KGcsYi8yKTt9fSxGPXYuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS53b3JkczthPWEuc2lnQnl0ZXM7Zm9yKHZhciBnPVtdLGU9MDtlPGE7ZSsrKWcucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJbZT4+PjJdPj4+MjQtOCooZSU0KSYyNTUpKTtyZXR1cm4gZy5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxnPVtdLGU9MDtlPGI7ZSsrKWdbZT4+PjJdfD0oYS5jaGFyQ29kZUF0KGUpJjI1NSk8PDI0LTgqKGUlNCk7cmV0dXJuIG5ldyBCLmluaXQoZyxiKTt9fSxoYT12LlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoRi5zdHJpbmdpZnkoYSkpKTt9Y2F0Y2goYil7dGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIik7fX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIEYucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKSk7fX0sWj1qLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09bS5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgQi5pbml0KCk7dGhpcy5fbkRhdGFCeXRlcz0wO30sX2FwcGVuZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPWhhLnBhcnNlKGEpKTt0aGlzLl9kYXRhLmNvbmNhdChhKTt0aGlzLl9uRGF0YUJ5dGVzKz1hLnNpZ0J5dGVzO30sX3Byb2Nlc3M6ZnVuY3Rpb24obil7dmFyIGI9dGhpcy5fZGF0YSxnPWIud29yZHMsZT1iLnNpZ0J5dGVzLGs9dGhpcy5ibG9ja1NpemUsbT1lLyg0KmspLG09bj9hLmNlaWwobSk6YS5tYXgoKG18MCktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKTtuPW0qaztlPWEubWluKDQqbixlKTtpZihuKXtmb3IodmFyIGM9MDtjPG47Yys9ayl0aGlzLl9kb1Byb2Nlc3NCbG9jayhnLGMpO2M9Zy5zcGxpY2UoMCxuKTtiLnNpZ0J5dGVzLT1lO31yZXR1cm4gbmV3IEIuaW5pdChjLGUpO30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1tLmNsb25lLmNhbGwodGhpcyk7YS5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCk7cmV0dXJuIGE7fSxfbWluQnVmZmVyU2l6ZTowfSk7ai5IYXNoZXI9Wi5leHRlbmQoe2NmZzptLmV4dGVuZCgpLGluaXQ6ZnVuY3Rpb24oYSl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGEpO3RoaXMucmVzZXQoKTt9LHJlc2V0OmZ1bmN0aW9uKCl7Wi5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKTt9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzO30sZmluYWxpemU6ZnVuY3Rpb24oYSl7YSYmdGhpcy5fYXBwZW5kKGEpO3JldHVybiB0aGlzLl9kb0ZpbmFsaXplKCk7fSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixnKXtyZXR1cm4gbmV3IGEuaW5pdChnKS5maW5hbGl6ZShiKTt9O30sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsZyl7cmV0dXJuIG5ldyBpYS5ITUFDLmluaXQoYSxnKS5maW5hbGl6ZShiKTt9O319KTt2YXIgaWE9ZC5hbGdvPXt9O3JldHVybiBkO30oTWF0aCk7KGZ1bmN0aW9uKGEpe3ZhciBjPUNyeXB0b0pTLGQ9Yy5saWIsaj1kLkJhc2UsZj1kLldvcmRBcnJheSxjPWMueDY0PXt9O2MuV29yZD1qLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGMpe3RoaXMuaGlnaD1hO3RoaXMubG93PWM7fX0pO2MuV29yZEFycmF5PWouZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGMsZCl7Yz10aGlzLndvcmRzPWN8fFtdO3RoaXMuc2lnQnl0ZXM9ZCE9YT9kOjgqYy5sZW5ndGg7fSx0b1gzMjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLndvcmRzLGM9YS5sZW5ndGgsZD1bXSxqPTA7ajxjO2orKyl7dmFyIEY9YVtqXTtkLnB1c2goRi5oaWdoKTtkLnB1c2goRi5sb3cpO31yZXR1cm4gZi5jcmVhdGUoZCx0aGlzLnNpZ0J5dGVzKTt9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWouY2xvbmUuY2FsbCh0aGlzKSxjPWEud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxkPWMubGVuZ3RoLGY9MDtmPGQ7ZisrKWNbZl09Y1tmXS5jbG9uZSgpO3JldHVybiBhO319KTt9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gZi5jcmVhdGUuYXBwbHkoZixhcmd1bWVudHMpO31mb3IodmFyIGM9Q3J5cHRvSlMsZD1jLmxpYi5IYXNoZXIsaj1jLng2NCxmPWouV29yZCxtPWouV29yZEFycmF5LGo9Yy5hbGdvLEI9W2EoMTExNjM1MjQwOCwzNjA5NzY3NDU4KSxhKDE4OTk0NDc0NDEsNjAyODkxNzI1KSxhKDMwNDkzMjM0NzEsMzk2NDQ4NDM5OSksYSgzOTIxMDA5NTczLDIxNzMyOTU1NDgpLGEoOTYxOTg3MTYzLDQwODE2Mjg0NzIpLGEoMTUwODk3MDk5MywzMDUzODM0MjY1KSxhKDI0NTM2MzU3NDgsMjkzNzY3MTU3OSksYSgyODcwNzYzMjIxLDM2NjQ2MDk1NjApLGEoMzYyNDM4MTA4MCwyNzM0ODgzMzk0KSxhKDMxMDU5ODQwMSwxMTY0OTk2NTQyKSxhKDYwNzIyNTI3OCwxMzIzNjEwNzY0KSxhKDE0MjY4ODE5ODcsMzU5MDMwNDk5NCksYSgxOTI1MDc4Mzg4LDQwNjgxODIzODMpLGEoMjE2MjA3ODIwNiw5OTEzMzYxMTMpLGEoMjYxNDg4ODEwMyw2MzM4MDMzMTcpLGEoMzI0ODIyMjU4MCwzNDc5Nzc0ODY4KSxhKDM4MzUzOTA0MDEsMjY2NjYxMzQ1OCksYSg0MDIyMjI0Nzc0LDk0NDcxMTEzOSksYSgyNjQzNDcwNzgsMjM0MTI2Mjc3MyksYSg2MDQ4MDc2MjgsMjAwNzgwMDkzMyksYSg3NzAyNTU5ODMsMTQ5NTk5MDkwMSksYSgxMjQ5MTUwMTIyLDE4NTY0MzEyMzUpLGEoMTU1NTA4MTY5MiwzMTc1MjE4MTMyKSxhKDE5OTYwNjQ5ODYsMjE5ODk1MDgzNyksYSgyNTU0MjIwODgyLDM5OTk3MTkzMzkpLGEoMjgyMTgzNDM0OSw3NjY3ODQwMTYpLGEoMjk1Mjk5NjgwOCwyNTY2NTk0ODc5KSxhKDMyMTAzMTM2NzEsMzIwMzMzNzk1NiksYSgzMzM2NTcxODkxLDEwMzQ0NTcwMjYpLGEoMzU4NDUyODcxMSwyNDY2OTQ4OTAxKSxhKDExMzkyNjk5MywzNzU4MzI2MzgzKSxhKDMzODI0MTg5NSwxNjg3MTc5MzYpLGEoNjY2MzA3MjA1LDExODgxNzk5NjQpLGEoNzczNTI5OTEyLDE1NDYwNDU3MzQpLGEoMTI5NDc1NzM3MiwxNTIyODA1NDg1KSxhKDEzOTYxODIyOTEsMjY0MzgzMzgyMyksYSgxNjk1MTgzNzAwLDIzNDM1MjczOTApLGEoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSxhKDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksYSgyNDU2OTU2MDM3LDM0NDA3NzYyNyksYSgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLGEoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSxhKDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksYSgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksYSgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLGEoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSxhKDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksYSgyNzU0MjMzNDQsODUxMTY5NzIwKSxhKDQzMDIyNzczNCwzMTAwODIzNzUyKSxhKDUwNjk0ODYxNiwxMzYzMjU4MTk1KSxhKDY1OTA2MDU1NiwzNzUwNjg1NTkzKSxhKDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSxhKDk1ODEzOTU3MSwzMzE4MzA3NDI3KSxhKDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksYSgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLGEoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSxhKDE5NTU1NjIyMjIsMTU3NTk5MDAxMiksYSgyMDI0MTA0ODE1LDExMjU1OTI5MjgpLGEoMjIyNzczMDQ1MiwyNzE2OTA0MzA2KSxhKDIzNjE4NTI0MjQsNDQyNzc2MDQ0KSxhKDI0Mjg0MzY0NzQsNTkzNjk4MzQ0KSxhKDI3NTY3MzQxODcsMzczMzExMDI0OSksYSgzMjA0MDMxNDc5LDI5OTkzNTE1NzMpLGEoMzMyOTMyNTI5OCwzODE1OTIwNDI3KSxhKDMzOTE1Njk2MTQsMzkyODM4MzkwMCksYSgzNTE1MjY3MjcxLDU2NjI4MDcxMSksYSgzOTQwMTg3NjA2LDM0NTQwNjk1MzQpLGEoNDExODYzMDI3MSw0MDAwMjM5OTkyKSxhKDExNjQxODQ3NCwxOTE0MTM4NTU0KSxhKDE3NDI5MjQyMSwyNzMxMDU1MjcwKSxhKDI4OTM4MDM1NiwzMjAzOTkzMDA2KSxhKDQ2MDM5MzI2OSwzMjA2MjAzMTUpLGEoNjg1NDcxNzMzLDU4NzQ5NjgzNiksYSg4NTIxNDI5NzEsMTA4Njc5Mjg1MSksYSgxMDE3MDM2Mjk4LDM2NTU0MzEwMCksYSgxMTI2MDAwNTgwLDI2MTgyOTc2NzYpLGEoMTI4ODAzMzQ3MCwzNDA5ODU1MTU4KSxhKDE1MDE1MDU5NDgsNDIzNDUwOTg2NiksYSgxNjA3MTY3OTE1LDk4NzE2NzQ2OCksYSgxODE2NDAyMzE2LDEyNDYxODk1OTEpXSx2PVtdLHk9MDs4MD55O3krKyl2W3ldPWEoKTtqPWouU0hBNTEyPWQuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IG0uaW5pdChbbmV3IGYuaW5pdCgxNzc5MDMzNzAzLDQwODkyMzU3MjApLG5ldyBmLmluaXQoMzE0NDEzNDI3NywyMjI3ODczNTk1KSxuZXcgZi5pbml0KDEwMTM5MDQyNDIsNDI3MTE3NTcyMyksbmV3IGYuaW5pdCgyNzczNDgwNzYyLDE1OTU3NTAxMjkpLG5ldyBmLmluaXQoMTM1OTg5MzExOSwyOTE3NTY1MTM3KSxuZXcgZi5pbml0KDI2MDA4MjI5MjQsNzI1NTExMTk5KSxuZXcgZi5pbml0KDUyODczNDYzNSw0MjE1Mzg5NTQ3KSxuZXcgZi5pbml0KDE1NDE0NTkyMjUsMzI3MDMzMjA5KV0pO30sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkPXRoaXMuX2hhc2gud29yZHMsZj1kWzBdLGo9ZFsxXSxiPWRbMl0sZz1kWzNdLGU9ZFs0XSxrPWRbNV0sbT1kWzZdLGQ9ZFs3XSx5PWYuaGlnaCxNPWYubG93LCQ9ai5oaWdoLE49ai5sb3csYWE9Yi5oaWdoLE89Yi5sb3csYmE9Zy5oaWdoLFA9Zy5sb3csY2E9ZS5oaWdoLFE9ZS5sb3csZGE9ay5oaWdoLFI9ay5sb3csZWE9bS5oaWdoLFM9bS5sb3csZmE9ZC5oaWdoLFQ9ZC5sb3cscz15LHA9TSxHPSQsRD1OLEg9YWEsRT1PLFc9YmEsST1QLHQ9Y2EscT1RLFU9ZGEsSj1SLFY9ZWEsSz1TLFg9ZmEsTD1ULHU9MDs4MD51O3UrKyl7dmFyIHo9dlt1XTtpZigxNj51KXZhciByPXouaGlnaD1hW2MrMip1XXwwLGg9ei5sb3c9YVtjKzIqdSsxXXwwO2Vsc2V7dmFyIHI9dlt1LTE1XSxoPXIuaGlnaCx3PXIubG93LHI9KGg+Pj4xfHc8PDMxKV4oaD4+Pjh8dzw8MjQpXmg+Pj43LHc9KHc+Pj4xfGg8PDMxKV4odz4+Pjh8aDw8MjQpXih3Pj4+N3xoPDwyNSksQz12W3UtMl0saD1DLmhpZ2gsbD1DLmxvdyxDPShoPj4+MTl8bDw8MTMpXihoPDwzfGw+Pj4yOSleaD4+PjYsbD0obD4+PjE5fGg8PDEzKV4obDw8M3xoPj4+MjkpXihsPj4+NnxoPDwyNiksaD12W3UtN10sWT1oLmhpZ2gsQT12W3UtMTZdLHg9QS5oaWdoLEE9QS5sb3csaD13K2gubG93LHI9citZKyhoPj4+MDx3Pj4+MD8xOjApLGg9aCtsLHI9citDKyhoPj4+MDxsPj4+MD8xOjApLGg9aCtBLHI9cit4KyhoPj4+MDxBPj4+MD8xOjApO3ouaGlnaD1yO3oubG93PWg7fXZhciBZPXQmVV5+dCZWLEE9cSZKXn5xJkssej1zJkdecyZIXkcmSCxqYT1wJkRecCZFXkQmRSx3PShzPj4+Mjh8cDw8NCleKHM8PDMwfHA+Pj4yKV4oczw8MjV8cD4+PjcpLEM9KHA+Pj4yOHxzPDw0KV4ocDw8MzB8cz4+PjIpXihwPDwyNXxzPj4+NyksbD1CW3VdLGthPWwuaGlnaCxnYT1sLmxvdyxsPUwrKChxPj4+MTR8dDw8MTgpXihxPj4+MTh8dDw8MTQpXihxPDwyM3x0Pj4+OSkpLHg9WCsoKHQ+Pj4xNHxxPDwxOCleKHQ+Pj4xOHxxPDwxNCleKHQ8PDIzfHE+Pj45KSkrKGw+Pj4wPEw+Pj4wPzE6MCksbD1sK0EseD14K1krKGw+Pj4wPEE+Pj4wPzE6MCksbD1sK2dhLHg9eCtrYSsobD4+PjA8Z2E+Pj4wPzE6MCksbD1sK2gseD14K3IrKGw+Pj4wPGg+Pj4wPzE6MCksaD1DK2phLHo9dyt6KyhoPj4+MDxDPj4+MD8xOjApLFg9VixMPUssVj1VLEs9SixVPXQsSj1xLHE9SStsfDAsdD1XK3grKHE+Pj4wPEk+Pj4wPzE6MCl8MCxXPUgsST1FLEg9RyxFPUQsRz1zLEQ9cCxwPWwraHwwLHM9eCt6KyhwPj4+MDxsPj4+MD8xOjApfDA7fU09Zi5sb3c9TStwO2YuaGlnaD15K3MrKE0+Pj4wPHA+Pj4wPzE6MCk7Tj1qLmxvdz1OK0Q7ai5oaWdoPSQrRysoTj4+PjA8RD4+PjA/MTowKTtPPWIubG93PU8rRTtiLmhpZ2g9YWErSCsoTz4+PjA8RT4+PjA/MTowKTtQPWcubG93PVArSTtnLmhpZ2g9YmErVysoUD4+PjA8ST4+PjA/MTowKTtRPWUubG93PVErcTtlLmhpZ2g9Y2ErdCsoUT4+PjA8cT4+PjA/MTowKTtSPWsubG93PVIrSjtrLmhpZ2g9ZGErVSsoUj4+PjA8Sj4+PjA/MTowKTtTPW0ubG93PVMrSzttLmhpZ2g9ZWErVisoUz4+PjA8Sz4+PjA/MTowKTtUPWQubG93PVQrTDtkLmhpZ2g9ZmErWCsoVD4+PjA8TD4+PjA/MTowKTt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxjPWEud29yZHMsZD04KnRoaXMuX25EYXRhQnl0ZXMsZj04KmEuc2lnQnl0ZXM7Y1tmPj4+NV18PTEyODw8MjQtZiUzMjtjWyhmKzEyOD4+PjEwPDw1KSszMF09TWF0aC5mbG9vcihkLzQyOTQ5NjcyOTYpO2NbKGYrMTI4Pj4+MTA8PDUpKzMxXT1kO2Euc2lnQnl0ZXM9NCpjLmxlbmd0aDt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXMuX2hhc2gudG9YMzIoKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9ZC5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhO30sYmxvY2tTaXplOjMyfSk7Yy5TSEE1MTI9ZC5fY3JlYXRlSGVscGVyKGopO2MuSG1hY1NIQTUxMj1kLl9jcmVhdGVIbWFjSGVscGVyKGopO30pKCk7KGZ1bmN0aW9uKCl7dmFyIGE9Q3J5cHRvSlMsYz1hLng2NCxkPWMuV29yZCxqPWMuV29yZEFycmF5LGM9YS5hbGdvLGY9Yy5TSEE1MTIsYz1jLlNIQTM4ND1mLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBqLmluaXQoW25ldyBkLmluaXQoMzQxODA3MDM2NSwzMjM4MzcxMDMyKSxuZXcgZC5pbml0KDE2NTQyNzAyNTAsOTE0MTUwNjYzKSxuZXcgZC5pbml0KDI0Mzg1MjkzNzAsODEyNzAyOTk5KSxuZXcgZC5pbml0KDM1NTQ2MjM2MCw0MTQ0OTEyNjk3KSxuZXcgZC5pbml0KDE3MzE0MDU0MTUsNDI5MDc3NTg1NyksbmV3IGQuaW5pdCgyMzk0MTgwMjMxLDE3NTA2MDMwMjUpLG5ldyBkLmluaXQoMzY3NTAwODUyNSwxNjk0MDc2ODM5KSxuZXcgZC5pbml0KDEyMDMwNjI4MTMsMzIwNDA3NTQyOCldKTt9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9Zi5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTE2O3JldHVybiBhO319KTthLlNIQTM4ND1mLl9jcmVhdGVIZWxwZXIoYyk7YS5IbWFjU0hBMzg0PWYuX2NyZWF0ZUhtYWNIZWxwZXIoYyk7fSkoKTs=',
'/libs/crypto_js/rollups/md5.js':'dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihzLHApe3ZhciBtPXt9LGw9bS5saWI9e30sbj1mdW5jdGlvbigpe30scj1sLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihiKXtuLnByb3RvdHlwZT10aGlzO3ZhciBoPW5ldyBuKCk7YiYmaC5taXhJbihiKTtoLmhhc093blByb3BlcnR5KCJpbml0Iil8fChoLmluaXQ9ZnVuY3Rpb24oKXtoLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9KTtoLmluaXQucHJvdG90eXBlPWg7aC4kc3VwZXI9dGhpcztyZXR1cm4gaDt9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZXh0ZW5kKCk7Yi5pbml0LmFwcGx5KGIsYXJndW1lbnRzKTtyZXR1cm4gYjt9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGIpe2Zvcih2YXIgaCBpbiBiKWIuaGFzT3duUHJvcGVydHkoaCkmJih0aGlzW2hdPWJbaF0pO2IuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWIudG9TdHJpbmcpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7fX0scT1sLldvcmRBcnJheT1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihiLGgpe2I9dGhpcy53b3Jkcz1ifHxbXTt0aGlzLnNpZ0J5dGVzPWghPXA/aDo0KmIubGVuZ3RoO30sdG9TdHJpbmc6ZnVuY3Rpb24oYil7cmV0dXJuKGJ8fHQpLnN0cmluZ2lmeSh0aGlzKTt9LGNvbmNhdDpmdW5jdGlvbihiKXt2YXIgaD10aGlzLndvcmRzLGE9Yi53b3JkcyxqPXRoaXMuc2lnQnl0ZXM7Yj1iLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihqJTQpZm9yKHZhciBnPTA7ZzxiO2crKyloW2orZz4+PjJdfD0oYVtnPj4+Ml0+Pj4yNC04KihnJTQpJjI1NSk8PDI0LTgqKChqK2cpJTQpO2Vsc2UgaWYoNjU1MzU8YS5sZW5ndGgpZm9yKGc9MDtnPGI7Zys9NCloW2orZz4+PjJdPWFbZz4+PjJdO2Vsc2UgaC5wdXNoLmFwcGx5KGgsYSk7dGhpcy5zaWdCeXRlcys9YjtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy53b3JkcyxoPXRoaXMuc2lnQnl0ZXM7YltoPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLTgqKGglNCk7Yi5sZW5ndGg9cy5jZWlsKGgvNCk7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBiPXIuY2xvbmUuY2FsbCh0aGlzKTtiLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGI7fSxyYW5kb206ZnVuY3Rpb24oYil7Zm9yKHZhciBoPVtdLGE9MDthPGI7YSs9NCloLnB1c2goNDI5NDk2NzI5NipzLnJhbmRvbSgpfDApO3JldHVybiBuZXcgcS5pbml0KGgsYik7fX0pLHY9bS5lbmM9e30sdD12LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGIpe3ZhciBhPWIud29yZHM7Yj1iLnNpZ0J5dGVzO2Zvcih2YXIgZz1bXSxqPTA7ajxiO2orKyl7dmFyIGs9YVtqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NTtnLnB1c2goKGs+Pj40KS50b1N0cmluZygxNikpO2cucHVzaCgoayYxNSkudG9TdHJpbmcoMTYpKTt9cmV0dXJuIGcuam9pbigiIik7fSxwYXJzZTpmdW5jdGlvbihiKXtmb3IodmFyIGE9Yi5sZW5ndGgsZz1bXSxqPTA7ajxhO2orPTIpZ1tqPj4+M118PXBhcnNlSW50KGIuc3Vic3RyKGosMiksMTYpPDwyNC00KihqJTgpO3JldHVybiBuZXcgcS5pbml0KGcsYS8yKTt9fSxhPXYuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYil7dmFyIGE9Yi53b3JkcztiPWIuc2lnQnl0ZXM7Zm9yKHZhciBnPVtdLGo9MDtqPGI7aisrKWcucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGFbaj4+PjJdPj4+MjQtOCooaiU0KSYyNTUpKTtyZXR1cm4gZy5qb2luKCIiKTt9LHBhcnNlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYT1iLmxlbmd0aCxnPVtdLGo9MDtqPGE7aisrKWdbaj4+PjJdfD0oYi5jaGFyQ29kZUF0KGopJjI1NSk8PDI0LTgqKGolNCk7cmV0dXJuIG5ldyBxLmluaXQoZyxhKTt9fSx1PXYuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGIpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShhLnN0cmluZ2lmeShiKSkpO31jYXRjaChnKXt0aHJvdyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKTt9fSxwYXJzZTpmdW5jdGlvbihiKXtyZXR1cm4gYS5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYikpKTt9fSxnPWwuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1yLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBxLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTA7fSxfYXBwZW5kOmZ1bmN0aW9uKGIpeyJzdHJpbmciPT10eXBlb2YgYiYmKGI9dS5wYXJzZShiKSk7dGhpcy5fZGF0YS5jb25jYXQoYik7dGhpcy5fbkRhdGFCeXRlcys9Yi5zaWdCeXRlczt9LF9wcm9jZXNzOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuX2RhdGEsZz1hLndvcmRzLGo9YS5zaWdCeXRlcyxrPXRoaXMuYmxvY2tTaXplLG09ai8oNCprKSxtPWI/cy5jZWlsKG0pOnMubWF4KChtfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7Yj1tKms7aj1zLm1pbig0KmIsaik7aWYoYil7Zm9yKHZhciBsPTA7bDxiO2wrPWspdGhpcy5fZG9Qcm9jZXNzQmxvY2soZyxsKTtsPWcuc3BsaWNlKDAsYik7YS5zaWdCeXRlcy09ajt9cmV0dXJuIG5ldyBxLmluaXQobCxqKTt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGI9ci5jbG9uZS5jYWxsKHRoaXMpO2IuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBiO30sX21pbkJ1ZmZlclNpemU6MH0pO2wuSGFzaGVyPWcuZXh0ZW5kKHtjZmc6ci5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChiKTt0aGlzLnJlc2V0KCk7fSxyZXNldDpmdW5jdGlvbigpe2cucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCk7fSx1cGRhdGU6ZnVuY3Rpb24oYil7dGhpcy5fYXBwZW5kKGIpO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpczt9LGZpbmFsaXplOmZ1bmN0aW9uKGIpe2ImJnRoaXMuX2FwcGVuZChiKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpO30sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGEsZyl7cmV0dXJuIG5ldyBiLmluaXQoZykuZmluYWxpemUoYSk7fTt9LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihhLGcpe3JldHVybiBuZXcgay5ITUFDLmluaXQoYixnKS5maW5hbGl6ZShhKTt9O319KTt2YXIgaz1tLmFsZ289e307cmV0dXJuIG07fShNYXRoKTsoZnVuY3Rpb24ocyl7ZnVuY3Rpb24gcChhLGssYixoLGwsaixtKXthPWErKGsmYnx+ayZoKStsK207cmV0dXJuKGE8PGp8YT4+PjMyLWopK2s7fWZ1bmN0aW9uIG0oYSxrLGIsaCxsLGosbSl7YT1hKyhrJmh8YiZ+aCkrbCttO3JldHVybihhPDxqfGE+Pj4zMi1qKStrO31mdW5jdGlvbiBsKGEsayxiLGgsbCxqLG0pe2E9YSsoa15iXmgpK2wrbTtyZXR1cm4oYTw8anxhPj4+MzItaikrazt9ZnVuY3Rpb24gbihhLGssYixoLGwsaixtKXthPWErKGJeKGt8fmgpKStsK207cmV0dXJuKGE8PGp8YT4+PjMyLWopK2s7fWZvcih2YXIgcj1DcnlwdG9KUyxxPXIubGliLHY9cS5Xb3JkQXJyYXksdD1xLkhhc2hlcixxPXIuYWxnbyxhPVtdLHU9MDs2ND51O3UrKylhW3VdPTQyOTQ5NjcyOTYqcy5hYnMocy5zaW4odSsxKSl8MDtxPXEuTUQ1PXQuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IHYuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4XSk7fSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZyxrKXtmb3IodmFyIGI9MDsxNj5iO2IrKyl7dmFyIGg9aytiLHc9Z1toXTtnW2hdPSh3PDw4fHc+Pj4yNCkmMTY3MTE5MzV8KHc8PDI0fHc+Pj44KSY0Mjc4MjU1MzYwO312YXIgYj10aGlzLl9oYXNoLndvcmRzLGg9Z1trKzBdLHc9Z1trKzFdLGo9Z1trKzJdLHE9Z1trKzNdLHI9Z1trKzRdLHM9Z1trKzVdLHQ9Z1trKzZdLHU9Z1trKzddLHY9Z1trKzhdLHg9Z1trKzldLHk9Z1trKzEwXSx6PWdbaysxMV0sQT1nW2srMTJdLEI9Z1trKzEzXSxDPWdbaysxNF0sRD1nW2srMTVdLGM9YlswXSxkPWJbMV0sZT1iWzJdLGY9YlszXSxjPXAoYyxkLGUsZixoLDcsYVswXSksZj1wKGYsYyxkLGUsdywxMixhWzFdKSxlPXAoZSxmLGMsZCxqLDE3LGFbMl0pLGQ9cChkLGUsZixjLHEsMjIsYVszXSksYz1wKGMsZCxlLGYsciw3LGFbNF0pLGY9cChmLGMsZCxlLHMsMTIsYVs1XSksZT1wKGUsZixjLGQsdCwxNyxhWzZdKSxkPXAoZCxlLGYsYyx1LDIyLGFbN10pLGM9cChjLGQsZSxmLHYsNyxhWzhdKSxmPXAoZixjLGQsZSx4LDEyLGFbOV0pLGU9cChlLGYsYyxkLHksMTcsYVsxMF0pLGQ9cChkLGUsZixjLHosMjIsYVsxMV0pLGM9cChjLGQsZSxmLEEsNyxhWzEyXSksZj1wKGYsYyxkLGUsQiwxMixhWzEzXSksZT1wKGUsZixjLGQsQywxNyxhWzE0XSksZD1wKGQsZSxmLGMsRCwyMixhWzE1XSksYz1tKGMsZCxlLGYsdyw1LGFbMTZdKSxmPW0oZixjLGQsZSx0LDksYVsxN10pLGU9bShlLGYsYyxkLHosMTQsYVsxOF0pLGQ9bShkLGUsZixjLGgsMjAsYVsxOV0pLGM9bShjLGQsZSxmLHMsNSxhWzIwXSksZj1tKGYsYyxkLGUseSw5LGFbMjFdKSxlPW0oZSxmLGMsZCxELDE0LGFbMjJdKSxkPW0oZCxlLGYsYyxyLDIwLGFbMjNdKSxjPW0oYyxkLGUsZix4LDUsYVsyNF0pLGY9bShmLGMsZCxlLEMsOSxhWzI1XSksZT1tKGUsZixjLGQscSwxNCxhWzI2XSksZD1tKGQsZSxmLGMsdiwyMCxhWzI3XSksYz1tKGMsZCxlLGYsQiw1LGFbMjhdKSxmPW0oZixjLGQsZSxqLDksYVsyOV0pLGU9bShlLGYsYyxkLHUsMTQsYVszMF0pLGQ9bShkLGUsZixjLEEsMjAsYVszMV0pLGM9bChjLGQsZSxmLHMsNCxhWzMyXSksZj1sKGYsYyxkLGUsdiwxMSxhWzMzXSksZT1sKGUsZixjLGQseiwxNixhWzM0XSksZD1sKGQsZSxmLGMsQywyMyxhWzM1XSksYz1sKGMsZCxlLGYsdyw0LGFbMzZdKSxmPWwoZixjLGQsZSxyLDExLGFbMzddKSxlPWwoZSxmLGMsZCx1LDE2LGFbMzhdKSxkPWwoZCxlLGYsYyx5LDIzLGFbMzldKSxjPWwoYyxkLGUsZixCLDQsYVs0MF0pLGY9bChmLGMsZCxlLGgsMTEsYVs0MV0pLGU9bChlLGYsYyxkLHEsMTYsYVs0Ml0pLGQ9bChkLGUsZixjLHQsMjMsYVs0M10pLGM9bChjLGQsZSxmLHgsNCxhWzQ0XSksZj1sKGYsYyxkLGUsQSwxMSxhWzQ1XSksZT1sKGUsZixjLGQsRCwxNixhWzQ2XSksZD1sKGQsZSxmLGMsaiwyMyxhWzQ3XSksYz1uKGMsZCxlLGYsaCw2LGFbNDhdKSxmPW4oZixjLGQsZSx1LDEwLGFbNDldKSxlPW4oZSxmLGMsZCxDLDE1LGFbNTBdKSxkPW4oZCxlLGYsYyxzLDIxLGFbNTFdKSxjPW4oYyxkLGUsZixBLDYsYVs1Ml0pLGY9bihmLGMsZCxlLHEsMTAsYVs1M10pLGU9bihlLGYsYyxkLHksMTUsYVs1NF0pLGQ9bihkLGUsZixjLHcsMjEsYVs1NV0pLGM9bihjLGQsZSxmLHYsNixhWzU2XSksZj1uKGYsYyxkLGUsRCwxMCxhWzU3XSksZT1uKGUsZixjLGQsdCwxNSxhWzU4XSksZD1uKGQsZSxmLGMsQiwyMSxhWzU5XSksYz1uKGMsZCxlLGYsciw2LGFbNjBdKSxmPW4oZixjLGQsZSx6LDEwLGFbNjFdKSxlPW4oZSxmLGMsZCxqLDE1LGFbNjJdKSxkPW4oZCxlLGYsYyx4LDIxLGFbNjNdKTtiWzBdPWJbMF0rY3wwO2JbMV09YlsxXStkfDA7YlsyXT1iWzJdK2V8MDtiWzNdPWJbM10rZnwwO30sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9kYXRhLGs9YS53b3JkcyxiPTgqdGhpcy5fbkRhdGFCeXRlcyxoPTgqYS5zaWdCeXRlcztrW2g+Pj41XXw9MTI4PDwyNC1oJTMyO3ZhciBsPXMuZmxvb3IoYi80Mjk0OTY3Mjk2KTtrWyhoKzY0Pj4+OTw8NCkrMTVdPShsPDw4fGw+Pj4yNCkmMTY3MTE5MzV8KGw8PDI0fGw+Pj44KSY0Mjc4MjU1MzYwO2tbKGgrNjQ+Pj45PDw0KSsxNF09KGI8PDh8Yj4+PjI0KSYxNjcxMTkzNXwoYjw8MjR8Yj4+PjgpJjQyNzgyNTUzNjA7YS5zaWdCeXRlcz00KihrLmxlbmd0aCsxKTt0aGlzLl9wcm9jZXNzKCk7YT10aGlzLl9oYXNoO2s9YS53b3Jkcztmb3IoYj0wOzQ+YjtiKyspaD1rW2JdLGtbYl09KGg8PDh8aD4+PjI0KSYxNjcxMTkzNXwoaDw8MjR8aD4+PjgpJjQyNzgyNTUzNjA7cmV0dXJuIGE7fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPXQuY2xvbmUuY2FsbCh0aGlzKTthLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKTtyZXR1cm4gYTt9fSk7ci5NRDU9dC5fY3JlYXRlSGVscGVyKHEpO3IuSG1hY01ENT10Ll9jcmVhdGVIbWFjSGVscGVyKHEpO30pKE1hdGgpOw==',
'/Lib/heapq.py':'IiIiSGVhcCBxdWV1ZSBhbGdvcml0aG0gKGEuay5hLiBwcmlvcml0eSBxdWV1ZSkuCgpIZWFwcyBhcmUgYXJyYXlzIGZvciB3aGljaCBhW2tdIDw9IGFbMiprKzFdIGFuZCBhW2tdIDw9IGFbMiprKzJdIGZvcgphbGwgaywgY291bnRpbmcgZWxlbWVudHMgZnJvbSAwLiAgRm9yIHRoZSBzYWtlIG9mIGNvbXBhcmlzb24sCm5vbi1leGlzdGluZyBlbGVtZW50cyBhcmUgY29uc2lkZXJlZCB0byBiZSBpbmZpbml0ZS4gIFRoZSBpbnRlcmVzdGluZwpwcm9wZXJ0eSBvZiBhIGhlYXAgaXMgdGhhdCBhWzBdIGlzIGFsd2F5cyBpdHMgc21hbGxlc3QgZWxlbWVudC4KClVzYWdlOgoKaGVhcCA9IFtdICAgICAgICAgICAgIyBjcmVhdGVzIGFuIGVtcHR5IGhlYXAKaGVhcHB1c2goaGVhcCwgaXRlbSkgIyBwdXNoZXMgYSBuZXcgaXRlbSBvbiB0aGUgaGVhcAppdGVtID0gaGVhcHBvcChoZWFwKSAjIHBvcHMgdGhlIHNtYWxsZXN0IGl0ZW0gZnJvbSB0aGUgaGVhcAppdGVtID0gaGVhcFswXSAgICAgICAjIHNtYWxsZXN0IGl0ZW0gb24gdGhlIGhlYXAgd2l0aG91dCBwb3BwaW5nIGl0CmhlYXBpZnkoeCkgICAgICAgICAgICMgdHJhbnNmb3JtcyBsaXN0IGludG8gYSBoZWFwLCBpbi1wbGFjZSwgaW4gbGluZWFyIHRpbWUKaXRlbSA9IGhlYXByZXBsYWNlKGhlYXAsIGl0ZW0pICMgcG9wcyBhbmQgcmV0dXJucyBzbWFsbGVzdCBpdGVtLCBhbmQgYWRkcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBuZXcgaXRlbTsgdGhlIGhlYXAgc2l6ZSBpcyB1bmNoYW5nZWQKCk91ciBBUEkgZGlmZmVycyBmcm9tIHRleHRib29rIGhlYXAgYWxnb3JpdGhtcyBhcyBmb2xsb3dzOgoKLSBXZSB1c2UgMC1iYXNlZCBpbmRleGluZy4gIFRoaXMgbWFrZXMgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZQogIGluZGV4IGZvciBhIG5vZGUgYW5kIHRoZSBpbmRleGVzIGZvciBpdHMgY2hpbGRyZW4gc2xpZ2h0bHkgbGVzcwogIG9idmlvdXMsIGJ1dCBpcyBtb3JlIHN1aXRhYmxlIHNpbmNlIFB5dGhvbiB1c2VzIDAtYmFzZWQgaW5kZXhpbmcuCgotIE91ciBoZWFwcG9wKCkgbWV0aG9kIHJldHVybnMgdGhlIHNtYWxsZXN0IGl0ZW0sIG5vdCB0aGUgbGFyZ2VzdC4KClRoZXNlIHR3byBtYWtlIGl0IHBvc3NpYmxlIHRvIHZpZXcgdGhlIGhlYXAgYXMgYSByZWd1bGFyIFB5dGhvbiBsaXN0CndpdGhvdXQgc3VycHJpc2VzOiBoZWFwWzBdIGlzIHRoZSBzbWFsbGVzdCBpdGVtLCBhbmQgaGVhcC5zb3J0KCkKbWFpbnRhaW5zIHRoZSBoZWFwIGludmFyaWFudCEKIiIiCgojIE9yaWdpbmFsIGNvZGUgYnkgS2V2aW4gTydDb25ub3IsIGF1Z21lbnRlZCBieSBUaW0gUGV0ZXJzIGFuZCBSYXltb25kIEhldHRpbmdlcgoKX19hYm91dF9fID0gIiIiSGVhcCBxdWV1ZXMKCltleHBsYW5hdGlvbiBieSBGcmFuw6dvaXMgUGluYXJkXQoKSGVhcHMgYXJlIGFycmF5cyBmb3Igd2hpY2ggYVtrXSA8PSBhWzIqaysxXSBhbmQgYVtrXSA8PSBhWzIqaysyXSBmb3IKYWxsIGssIGNvdW50aW5nIGVsZW1lbnRzIGZyb20gMC4gIEZvciB0aGUgc2FrZSBvZiBjb21wYXJpc29uLApub24tZXhpc3RpbmcgZWxlbWVudHMgYXJlIGNvbnNpZGVyZWQgdG8gYmUgaW5maW5pdGUuICBUaGUgaW50ZXJlc3RpbmcKcHJvcGVydHkgb2YgYSBoZWFwIGlzIHRoYXQgYVswXSBpcyBhbHdheXMgaXRzIHNtYWxsZXN0IGVsZW1lbnQuCgpUaGUgc3RyYW5nZSBpbnZhcmlhbnQgYWJvdmUgaXMgbWVhbnQgdG8gYmUgYW4gZWZmaWNpZW50IG1lbW9yeQpyZXByZXNlbnRhdGlvbiBmb3IgYSB0b3VybmFtZW50LiAgVGhlIG51bWJlcnMgYmVsb3cgYXJlIGBrJywgbm90IGFba106CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAKCiAgICAgICAgICAgICAgICAgIDEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyCgogICAgICAgICAgMyAgICAgICAgICAgICAgIDQgICAgICAgICAgICAgICAgNSAgICAgICAgICAgICAgIDYKCiAgICAgIDcgICAgICAgOCAgICAgICA5ICAgICAgIDEwICAgICAgMTEgICAgICAxMiAgICAgIDEzICAgICAgMTQKCiAgICAxNSAxNiAgIDE3IDE4ICAgMTkgMjAgICAyMSAyMiAgIDIzIDI0ICAgMjUgMjYgICAyNyAyOCAgIDI5IDMwCgoKSW4gdGhlIHRyZWUgYWJvdmUsIGVhY2ggY2VsbCBgaycgaXMgdG9wcGluZyBgMiprKzEnIGFuZCBgMiprKzInLiAgSW4KYW4gdXN1YWwgYmluYXJ5IHRvdXJuYW1lbnQgd2Ugc2VlIGluIHNwb3J0cywgZWFjaCBjZWxsIGlzIHRoZSB3aW5uZXIKb3ZlciB0aGUgdHdvIGNlbGxzIGl0IHRvcHMsIGFuZCB3ZSBjYW4gdHJhY2UgdGhlIHdpbm5lciBkb3duIHRoZSB0cmVlCnRvIHNlZSBhbGwgb3Bwb25lbnRzIHMvaGUgaGFkLiAgSG93ZXZlciwgaW4gbWFueSBjb21wdXRlciBhcHBsaWNhdGlvbnMKb2Ygc3VjaCB0b3VybmFtZW50cywgd2UgZG8gbm90IG5lZWQgdG8gdHJhY2UgdGhlIGhpc3Rvcnkgb2YgYSB3aW5uZXIuClRvIGJlIG1vcmUgbWVtb3J5IGVmZmljaWVudCwgd2hlbiBhIHdpbm5lciBpcyBwcm9tb3RlZCwgd2UgdHJ5IHRvCnJlcGxhY2UgaXQgYnkgc29tZXRoaW5nIGVsc2UgYXQgYSBsb3dlciBsZXZlbCwgYW5kIHRoZSBydWxlIGJlY29tZXMKdGhhdCBhIGNlbGwgYW5kIHRoZSB0d28gY2VsbHMgaXQgdG9wcyBjb250YWluIHRocmVlIGRpZmZlcmVudCBpdGVtcywKYnV0IHRoZSB0b3AgY2VsbCAid2lucyIgb3ZlciB0aGUgdHdvIHRvcHBlZCBjZWxscy4KCklmIHRoaXMgaGVhcCBpbnZhcmlhbnQgaXMgcHJvdGVjdGVkIGF0IGFsbCB0aW1lLCBpbmRleCAwIGlzIGNsZWFybHkKdGhlIG92ZXJhbGwgd2lubmVyLiAgVGhlIHNpbXBsZXN0IGFsZ29yaXRobWljIHdheSB0byByZW1vdmUgaXQgYW5kCmZpbmQgdGhlICJuZXh0IiB3aW5uZXIgaXMgdG8gbW92ZSBzb21lIGxvc2VyIChsZXQncyBzYXkgY2VsbCAzMCBpbiB0aGUKZGlhZ3JhbSBhYm92ZSkgaW50byB0aGUgMCBwb3NpdGlvbiwgYW5kIHRoZW4gcGVyY29sYXRlIHRoaXMgbmV3IDAgZG93bgp0aGUgdHJlZSwgZXhjaGFuZ2luZyB2YWx1ZXMsIHVudGlsIHRoZSBpbnZhcmlhbnQgaXMgcmUtZXN0YWJsaXNoZWQuClRoaXMgaXMgY2xlYXJseSBsb2dhcml0aG1pYyBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIGl0ZW1zIGluIHRoZSB0cmVlLgpCeSBpdGVyYXRpbmcgb3ZlciBhbGwgaXRlbXMsIHlvdSBnZXQgYW4gTyhuIGxuIG4pIHNvcnQuCgpBIG5pY2UgZmVhdHVyZSBvZiB0aGlzIHNvcnQgaXMgdGhhdCB5b3UgY2FuIGVmZmljaWVudGx5IGluc2VydCBuZXcKaXRlbXMgd2hpbGUgdGhlIHNvcnQgaXMgZ29pbmcgb24sIHByb3ZpZGVkIHRoYXQgdGhlIGluc2VydGVkIGl0ZW1zIGFyZQpub3QgImJldHRlciIgdGhhbiB0aGUgbGFzdCAwJ3RoIGVsZW1lbnQgeW91IGV4dHJhY3RlZC4gIFRoaXMgaXMKZXNwZWNpYWxseSB1c2VmdWwgaW4gc2ltdWxhdGlvbiBjb250ZXh0cywgd2hlcmUgdGhlIHRyZWUgaG9sZHMgYWxsCmluY29taW5nIGV2ZW50cywgYW5kIHRoZSAid2luIiBjb25kaXRpb24gbWVhbnMgdGhlIHNtYWxsZXN0IHNjaGVkdWxlZAp0aW1lLiAgV2hlbiBhbiBldmVudCBzY2hlZHVsZSBvdGhlciBldmVudHMgZm9yIGV4ZWN1dGlvbiwgdGhleSBhcmUKc2NoZWR1bGVkIGludG8gdGhlIGZ1dHVyZSwgc28gdGhleSBjYW4gZWFzaWx5IGdvIGludG8gdGhlIGhlYXAuICBTbywgYQpoZWFwIGlzIGEgZ29vZCBzdHJ1Y3R1cmUgZm9yIGltcGxlbWVudGluZyBzY2hlZHVsZXJzICh0aGlzIGlzIHdoYXQgSQp1c2VkIGZvciBteSBNSURJIHNlcXVlbmNlciA6LSkuCgpWYXJpb3VzIHN0cnVjdHVyZXMgZm9yIGltcGxlbWVudGluZyBzY2hlZHVsZXJzIGhhdmUgYmVlbiBleHRlbnNpdmVseQpzdHVkaWVkLCBhbmQgaGVhcHMgYXJlIGdvb2QgZm9yIHRoaXMsIGFzIHRoZXkgYXJlIHJlYXNvbmFibHkgc3BlZWR5LAp0aGUgc3BlZWQgaXMgYWxtb3N0IGNvbnN0YW50LCBhbmQgdGhlIHdvcnN0IGNhc2UgaXMgbm90IG11Y2ggZGlmZmVyZW50CnRoYW4gdGhlIGF2ZXJhZ2UgY2FzZS4gIEhvd2V2ZXIsIHRoZXJlIGFyZSBvdGhlciByZXByZXNlbnRhdGlvbnMgd2hpY2gKYXJlIG1vcmUgZWZmaWNpZW50IG92ZXJhbGwsIHlldCB0aGUgd29yc3QgY2FzZXMgbWlnaHQgYmUgdGVycmlibGUuCgpIZWFwcyBhcmUgYWxzbyB2ZXJ5IHVzZWZ1bCBpbiBiaWcgZGlzayBzb3J0cy4gIFlvdSBtb3N0IHByb2JhYmx5IGFsbAprbm93IHRoYXQgYSBiaWcgc29ydCBpbXBsaWVzIHByb2R1Y2luZyAicnVucyIgKHdoaWNoIGFyZSBwcmUtc29ydGVkCnNlcXVlbmNlcywgd2hpY2ggc2l6ZSBpcyB1c3VhbGx5IHJlbGF0ZWQgdG8gdGhlIGFtb3VudCBvZiBDUFUgbWVtb3J5KSwKZm9sbG93ZWQgYnkgYSBtZXJnaW5nIHBhc3NlcyBmb3IgdGhlc2UgcnVucywgd2hpY2ggbWVyZ2luZyBpcyBvZnRlbgp2ZXJ5IGNsZXZlcmx5IG9yZ2FuaXNlZFsxXS4gIEl0IGlzIHZlcnkgaW1wb3J0YW50IHRoYXQgdGhlIGluaXRpYWwKc29ydCBwcm9kdWNlcyB0aGUgbG9uZ2VzdCBydW5zIHBvc3NpYmxlLiAgVG91cm5hbWVudHMgYXJlIGEgZ29vZCB3YXkKdG8gdGhhdC4gIElmLCB1c2luZyBhbGwgdGhlIG1lbW9yeSBhdmFpbGFibGUgdG8gaG9sZCBhIHRvdXJuYW1lbnQsIHlvdQpyZXBsYWNlIGFuZCBwZXJjb2xhdGUgaXRlbXMgdGhhdCBoYXBwZW4gdG8gZml0IHRoZSBjdXJyZW50IHJ1biwgeW91J2xsCnByb2R1Y2UgcnVucyB3aGljaCBhcmUgdHdpY2UgdGhlIHNpemUgb2YgdGhlIG1lbW9yeSBmb3IgcmFuZG9tIGlucHV0LAphbmQgbXVjaCBiZXR0ZXIgZm9yIGlucHV0IGZ1enppbHkgb3JkZXJlZC4KCk1vcmVvdmVyLCBpZiB5b3Ugb3V0cHV0IHRoZSAwJ3RoIGl0ZW0gb24gZGlzayBhbmQgZ2V0IGFuIGlucHV0IHdoaWNoCm1heSBub3QgZml0IGluIHRoZSBjdXJyZW50IHRvdXJuYW1lbnQgKGJlY2F1c2UgdGhlIHZhbHVlICJ3aW5zIiBvdmVyCnRoZSBsYXN0IG91dHB1dCB2YWx1ZSksIGl0IGNhbm5vdCBmaXQgaW4gdGhlIGhlYXAsIHNvIHRoZSBzaXplIG9mIHRoZQpoZWFwIGRlY3JlYXNlcy4gIFRoZSBmcmVlZCBtZW1vcnkgY291bGQgYmUgY2xldmVybHkgcmV1c2VkIGltbWVkaWF0ZWx5CmZvciBwcm9ncmVzc2l2ZWx5IGJ1aWxkaW5nIGEgc2Vjb25kIGhlYXAsIHdoaWNoIGdyb3dzIGF0IGV4YWN0bHkgdGhlCnNhbWUgcmF0ZSB0aGUgZmlyc3QgaGVhcCBpcyBtZWx0aW5nLiAgV2hlbiB0aGUgZmlyc3QgaGVhcCBjb21wbGV0ZWx5CnZhbmlzaGVzLCB5b3Ugc3dpdGNoIGhlYXBzIGFuZCBzdGFydCBhIG5ldyBydW4uICBDbGV2ZXIgYW5kIHF1aXRlCmVmZmVjdGl2ZSEKCkluIGEgd29yZCwgaGVhcHMgYXJlIHVzZWZ1bCBtZW1vcnkgc3RydWN0dXJlcyB0byBrbm93LiAgSSB1c2UgdGhlbSBpbgphIGZldyBhcHBsaWNhdGlvbnMsIGFuZCBJIHRoaW5rIGl0IGlzIGdvb2QgdG8ga2VlcCBhIGBoZWFwJyBtb2R1bGUKYXJvdW5kLiA6LSkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tClsxXSBUaGUgZGlzayBiYWxhbmNpbmcgYWxnb3JpdGhtcyB3aGljaCBhcmUgY3VycmVudCwgbm93YWRheXMsIGFyZQptb3JlIGFubm95aW5nIHRoYW4gY2xldmVyLCBhbmQgdGhpcyBpcyBhIGNvbnNlcXVlbmNlIG9mIHRoZSBzZWVraW5nCmNhcGFiaWxpdGllcyBvZiB0aGUgZGlza3MuICBPbiBkZXZpY2VzIHdoaWNoIGNhbm5vdCBzZWVrLCBsaWtlIGJpZwp0YXBlIGRyaXZlcywgdGhlIHN0b3J5IHdhcyBxdWl0ZSBkaWZmZXJlbnQsIGFuZCBvbmUgaGFkIHRvIGJlIHZlcnkKY2xldmVyIHRvIGVuc3VyZSAoZmFyIGluIGFkdmFuY2UpIHRoYXQgZWFjaCB0YXBlIG1vdmVtZW50IHdpbGwgYmUgdGhlCm1vc3QgZWZmZWN0aXZlIHBvc3NpYmxlICh0aGF0IGlzLCB3aWxsIGJlc3QgcGFydGljaXBhdGUgYXQKInByb2dyZXNzaW5nIiB0aGUgbWVyZ2UpLiAgU29tZSB0YXBlcyB3ZXJlIGV2ZW4gYWJsZSB0byByZWFkCmJhY2t3YXJkcywgYW5kIHRoaXMgd2FzIGFsc28gdXNlZCB0byBhdm9pZCB0aGUgcmV3aW5kaW5nIHRpbWUuCkJlbGlldmUgbWUsIHJlYWwgZ29vZCB0YXBlIHNvcnRzIHdlcmUgcXVpdGUgc3BlY3RhY3VsYXIgdG8gd2F0Y2ghCkZyb20gYWxsIHRpbWVzLCBzb3J0aW5nIGhhcyBhbHdheXMgYmVlbiBhIEdyZWF0IEFydCEgOi0pCiIiIgoKX19hbGxfXyA9IFsnaGVhcHB1c2gnLCAnaGVhcHBvcCcsICdoZWFwaWZ5JywgJ2hlYXByZXBsYWNlJywgJ21lcmdlJywKICAgICAgICAgICAnbmxhcmdlc3QnLCAnbnNtYWxsZXN0JywgJ2hlYXBwdXNocG9wJ10KCmZyb20gaXRlcnRvb2xzIGltcG9ydCBpc2xpY2UsIHJlcGVhdCwgY291bnQsIHRlZSwgY2hhaW4KaW1wb3J0IGJpc2VjdAoKZGVmIGhlYXBwdXNoKGhlYXAsIGl0ZW0pOgogICAgIiIiUHVzaCBpdGVtIG9udG8gaGVhcCwgbWFpbnRhaW5pbmcgdGhlIGhlYXAgaW52YXJpYW50LiIiIgogICAgaGVhcC5hcHBlbmQoaXRlbSkKICAgIF9zaWZ0ZG93bihoZWFwLCAwLCBsZW4oaGVhcCktMSkKCmRlZiBoZWFwcG9wKGhlYXApOgogICAgIiIiUG9wIHRoZSBzbWFsbGVzdCBpdGVtIG9mZiB0aGUgaGVhcCwgbWFpbnRhaW5pbmcgdGhlIGhlYXAgaW52YXJpYW50LiIiIgogICAgbGFzdGVsdCA9IGhlYXAucG9wKCkgICAgIyByYWlzZXMgYXBwcm9wcmlhdGUgSW5kZXhFcnJvciBpZiBoZWFwIGlzIGVtcHR5CiAgICBpZiBoZWFwOgogICAgICAgIHJldHVybml0ZW0gPSBoZWFwWzBdCiAgICAgICAgaGVhcFswXSA9IGxhc3RlbHQKICAgICAgICBfc2lmdHVwKGhlYXAsIDApCiAgICBlbHNlOgogICAgICAgIHJldHVybml0ZW0gPSBsYXN0ZWx0CiAgICByZXR1cm4gcmV0dXJuaXRlbQoKZGVmIGhlYXByZXBsYWNlKGhlYXAsIGl0ZW0pOgogICAgIiIiUG9wIGFuZCByZXR1cm4gdGhlIGN1cnJlbnQgc21hbGxlc3QgdmFsdWUsIGFuZCBhZGQgdGhlIG5ldyBpdGVtLgoKICAgIFRoaXMgaXMgbW9yZSBlZmZpY2llbnQgdGhhbiBoZWFwcG9wKCkgZm9sbG93ZWQgYnkgaGVhcHB1c2goKSwgYW5kIGNhbiBiZQogICAgbW9yZSBhcHByb3ByaWF0ZSB3aGVuIHVzaW5nIGEgZml4ZWQtc2l6ZSBoZWFwLiAgTm90ZSB0aGF0IHRoZSB2YWx1ZQogICAgcmV0dXJuZWQgbWF5IGJlIGxhcmdlciB0aGFuIGl0ZW0hICBUaGF0IGNvbnN0cmFpbnMgcmVhc29uYWJsZSB1c2VzIG9mCiAgICB0aGlzIHJvdXRpbmUgdW5sZXNzIHdyaXR0ZW4gYXMgcGFydCBvZiBhIGNvbmRpdGlvbmFsIHJlcGxhY2VtZW50OgoKICAgICAgICBpZiBpdGVtID4gaGVhcFswXToKICAgICAgICAgICAgaXRlbSA9IGhlYXByZXBsYWNlKGhlYXAsIGl0ZW0pCiAgICAiIiIKICAgIHJldHVybml0ZW0gPSBoZWFwWzBdICAgICMgcmFpc2VzIGFwcHJvcHJpYXRlIEluZGV4RXJyb3IgaWYgaGVhcCBpcyBlbXB0eQogICAgaGVhcFswXSA9IGl0ZW0KICAgIF9zaWZ0dXAoaGVhcCwgMCkKICAgIHJldHVybiByZXR1cm5pdGVtCgpkZWYgaGVhcHB1c2hwb3AoaGVhcCwgaXRlbSk6CiAgICAiIiJGYXN0IHZlcnNpb24gb2YgYSBoZWFwcHVzaCBmb2xsb3dlZCBieSBhIGhlYXBwb3AuIiIiCiAgICBpZiBoZWFwIGFuZCBoZWFwWzBdIDwgaXRlbToKICAgICAgICBpdGVtLCBoZWFwWzBdID0gaGVhcFswXSwgaXRlbQogICAgICAgIF9zaWZ0dXAoaGVhcCwgMCkKICAgIHJldHVybiBpdGVtCgpkZWYgaGVhcGlmeSh4KToKICAgICIiIlRyYW5zZm9ybSBsaXN0IGludG8gYSBoZWFwLCBpbi1wbGFjZSwgaW4gTyhsZW4oeCkpIHRpbWUuIiIiCiAgICBuID0gbGVuKHgpCiAgICAjIFRyYW5zZm9ybSBib3R0b20tdXAuICBUaGUgbGFyZ2VzdCBpbmRleCB0aGVyZSdzIGFueSBwb2ludCB0byBsb29raW5nIGF0CiAgICAjIGlzIHRoZSBsYXJnZXN0IHdpdGggYSBjaGlsZCBpbmRleCBpbi1yYW5nZSwgc28gbXVzdCBoYXZlIDIqaSArIDEgPCBuLAogICAgIyBvciBpIDwgKG4tMSkvMi4gIElmIG4gaXMgZXZlbiA9IDIqaiwgdGhpcyBpcyAoMipqLTEpLzIgPSBqLTEvMiBzbwogICAgIyBqLTEgaXMgdGhlIGxhcmdlc3QsIHdoaWNoIGlzIG4vLzIgLSAxLiAgSWYgbiBpcyBvZGQgPSAyKmorMSwgdGhpcyBpcwogICAgIyAoMipqKzEtMSkvMiA9IGogc28gai0xIGlzIHRoZSBsYXJnZXN0LCBhbmQgdGhhdCdzIGFnYWluIG4vLzItMS4KICAgIGZvciBpIGluIHJldmVyc2VkKHJhbmdlKG4vLzIpKToKICAgICAgICBfc2lmdHVwKHgsIGkpCgpkZWYgbmxhcmdlc3QobiwgaXRlcmFibGUpOgogICAgIiIiRmluZCB0aGUgbiBsYXJnZXN0IGVsZW1lbnRzIGluIGEgZGF0YXNldC4KCiAgICBFcXVpdmFsZW50IHRvOiAgc29ydGVkKGl0ZXJhYmxlLCByZXZlcnNlPVRydWUpWzpuXQogICAgIiIiCiAgICBpZiBuIDwgMDoKICAgICAgICByZXR1cm4gW10KICAgIGl0ID0gaXRlcihpdGVyYWJsZSkKICAgIHJlc3VsdCA9IGxpc3QoaXNsaWNlKGl0LCBuKSkKICAgIGlmIG5vdCByZXN1bHQ6CiAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgaGVhcGlmeShyZXN1bHQpCiAgICBfaGVhcHB1c2hwb3AgPSBoZWFwcHVzaHBvcAogICAgZm9yIGVsZW0gaW4gaXQ6CiAgICAgICAgX2hlYXBwdXNocG9wKHJlc3VsdCwgZWxlbSkKICAgIHJlc3VsdC5zb3J0KHJldmVyc2U9VHJ1ZSkKICAgIHJldHVybiByZXN1bHQKCmRlZiBuc21hbGxlc3QobiwgaXRlcmFibGUpOgogICAgIiIiRmluZCB0aGUgbiBzbWFsbGVzdCBlbGVtZW50cyBpbiBhIGRhdGFzZXQuCgogICAgRXF1aXZhbGVudCB0bzogIHNvcnRlZChpdGVyYWJsZSlbOm5dCiAgICAiIiIKICAgIGlmIG4gPCAwOgogICAgICAgIHJldHVybiBbXQogICAgaWYgaGFzYXR0cihpdGVyYWJsZSwgJ19fbGVuX18nKSBhbmQgbiAqIDEwIDw9IGxlbihpdGVyYWJsZSk6CiAgICAgICAgIyBGb3Igc21hbGxlciB2YWx1ZXMgb2YgbiwgdGhlIGJpc2VjdCBtZXRob2QgaXMgZmFzdGVyIHRoYW4gYSBtaW5oZWFwLgogICAgICAgICMgSXQgaXMgYWxzbyBtZW1vcnkgZWZmaWNpZW50LCBjb25zdW1pbmcgb25seSBuIGVsZW1lbnRzIG9mIHNwYWNlLgogICAgICAgIGl0ID0gaXRlcihpdGVyYWJsZSkKICAgICAgICByZXN1bHQgPSBzb3J0ZWQoaXNsaWNlKGl0LCAwLCBuKSkKICAgICAgICBpZiBub3QgcmVzdWx0OgogICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgaW5zb3J0ID0gYmlzZWN0Lmluc29ydAogICAgICAgIHBvcCA9IHJlc3VsdC5wb3AKICAgICAgICBsb3MgPSByZXN1bHRbLTFdICAgICMgbG9zIC0tPiBMYXJnZXN0IG9mIHRoZSBuc21hbGxlc3QKICAgICAgICBmb3IgZWxlbSBpbiBpdDoKICAgICAgICAgICAgaWYgZWxlbSA8IGxvczoKICAgICAgICAgICAgICAgIGluc29ydChyZXN1bHQsIGVsZW0pCiAgICAgICAgICAgICAgICBwb3AoKQogICAgICAgICAgICAgICAgbG9zID0gcmVzdWx0Wy0xXQogICAgICAgIHJldHVybiByZXN1bHQKICAgICMgQW4gYWx0ZXJuYXRpdmUgYXBwcm9hY2ggbWFuaWZlc3RzIHRoZSB3aG9sZSBpdGVyYWJsZSBpbiBtZW1vcnkgYnV0CiAgICAjIHNhdmVzIGNvbXBhcmlzb25zIGJ5IGhlYXBpZnlpbmcgYWxsIGF0IG9uY2UuICBBbHNvLCBzYXZlcyB0aW1lCiAgICAjIG92ZXIgYmlzZWN0Lmluc29ydCgpIHdoaWNoIGhhcyBPKG4pIGRhdGEgbW92ZW1lbnQgdGltZSBmb3IgZXZlcnkKICAgICMgaW5zZXJ0aW9uLiAgRmluZGluZyB0aGUgbiBzbWFsbGVzdCBvZiBhbiBtIGxlbmd0aCBpdGVyYWJsZSByZXF1aXJlcwogICAgIyAgICBPKG0pICsgTyhuIGxvZyBtKSBjb21wYXJpc29ucy4KICAgIGggPSBsaXN0KGl0ZXJhYmxlKQogICAgaGVhcGlmeShoKQogICAgcmV0dXJuIGxpc3QobWFwKGhlYXBwb3AsIHJlcGVhdChoLCBtaW4obiwgbGVuKGgpKSkpKQoKIyAnaGVhcCcgaXMgYSBoZWFwIGF0IGFsbCBpbmRpY2VzID49IHN0YXJ0cG9zLCBleGNlcHQgcG9zc2libHkgZm9yIHBvcy4gIHBvcwojIGlzIHRoZSBpbmRleCBvZiBhIGxlYWYgd2l0aCBhIHBvc3NpYmx5IG91dC1vZi1vcmRlciB2YWx1ZS4gIFJlc3RvcmUgdGhlCiMgaGVhcCBpbnZhcmlhbnQuCmRlZiBfc2lmdGRvd24oaGVhcCwgc3RhcnRwb3MsIHBvcyk6CiAgICBuZXdpdGVtID0gaGVhcFtwb3NdCiAgICAjIEZvbGxvdyB0aGUgcGF0aCB0byB0aGUgcm9vdCwgbW92aW5nIHBhcmVudHMgZG93biB1bnRpbCBmaW5kaW5nIGEgcGxhY2UKICAgICMgbmV3aXRlbSBmaXRzLgogICAgd2hpbGUgcG9zID4gc3RhcnRwb3M6CiAgICAgICAgcGFyZW50cG9zID0gKHBvcyAtIDEpID4+IDEKICAgICAgICBwYXJlbnQgPSBoZWFwW3BhcmVudHBvc10KICAgICAgICBpZiBuZXdpdGVtIDwgcGFyZW50OgogICAgICAgICAgICBoZWFwW3Bvc10gPSBwYXJlbnQKICAgICAgICAgICAgcG9zID0gcGFyZW50cG9zCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgYnJlYWsKICAgIGhlYXBbcG9zXSA9IG5ld2l0ZW0KCiMgVGhlIGNoaWxkIGluZGljZXMgb2YgaGVhcCBpbmRleCBwb3MgYXJlIGFscmVhZHkgaGVhcHMsIGFuZCB3ZSB3YW50IHRvIG1ha2UKIyBhIGhlYXAgYXQgaW5kZXggcG9zIHRvby4gIFdlIGRvIHRoaXMgYnkgYnViYmxpbmcgdGhlIHNtYWxsZXIgY2hpbGQgb2YKIyBwb3MgdXAgKGFuZCBzbyBvbiB3aXRoIHRoYXQgY2hpbGQncyBjaGlsZHJlbiwgZXRjKSB1bnRpbCBoaXR0aW5nIGEgbGVhZiwKIyB0aGVuIHVzaW5nIF9zaWZ0ZG93biB0byBtb3ZlIHRoZSBvZGRiYWxsIG9yaWdpbmFsbHkgYXQgaW5kZXggcG9zIGludG8gcGxhY2UuCiMKIyBXZSAqY291bGQqIGJyZWFrIG91dCBvZiB0aGUgbG9vcCBhcyBzb29uIGFzIHdlIGZpbmQgYSBwb3Mgd2hlcmUgbmV3aXRlbSA8PQojIGJvdGggaXRzIGNoaWxkcmVuLCBidXQgdHVybnMgb3V0IHRoYXQncyBub3QgYSBnb29kIGlkZWEsIGFuZCBkZXNwaXRlIHRoYXQKIyBtYW55IGJvb2tzIHdyaXRlIHRoZSBhbGdvcml0aG0gdGhhdCB3YXkuICBEdXJpbmcgYSBoZWFwIHBvcCwgdGhlIGxhc3QgYXJyYXkKIyBlbGVtZW50IGlzIHNpZnRlZCBpbiwgYW5kIHRoYXQgdGVuZHMgdG8gYmUgbGFyZ2UsIHNvIHRoYXQgY29tcGFyaW5nIGl0CiMgYWdhaW5zdCB2YWx1ZXMgc3RhcnRpbmcgZnJvbSB0aGUgcm9vdCB1c3VhbGx5IGRvZXNuJ3QgcGF5ICg9IHVzdWFsbHkgZG9lc24ndAojIGdldCB1cyBvdXQgb2YgdGhlIGxvb3AgZWFybHkpLiAgU2VlIEtudXRoLCBWb2x1bWUgMywgd2hlcmUgdGhpcyBpcwojIGV4cGxhaW5lZCBhbmQgcXVhbnRpZmllZCBpbiBhbiBleGVyY2lzZS4KIwojIEN1dHRpbmcgdGhlICMgb2YgY29tcGFyaXNvbnMgaXMgaW1wb3J0YW50LCBzaW5jZSB0aGVzZSByb3V0aW5lcyBoYXZlIG5vCiMgd2F5IHRvIGV4dHJhY3QgInRoZSBwcmlvcml0eSIgZnJvbSBhbiBhcnJheSBlbGVtZW50LCBzbyB0aGF0IGludGVsbGlnZW5jZQojIGlzIGxpa2VseSB0byBiZSBoaWRpbmcgaW4gY3VzdG9tIGNvbXBhcmlzb24gbWV0aG9kcywgb3IgaW4gYXJyYXkgZWxlbWVudHMKIyBzdG9yaW5nIChwcmlvcml0eSwgcmVjb3JkKSB0dXBsZXMuICBDb21wYXJpc29ucyBhcmUgdGh1cyBwb3RlbnRpYWxseQojIGV4cGVuc2l2ZS4KIwojIE9uIHJhbmRvbSBhcnJheXMgb2YgbGVuZ3RoIDEwMDAsIG1ha2luZyB0aGlzIGNoYW5nZSBjdXQgdGhlIG51bWJlciBvZgojIGNvbXBhcmlzb25zIG1hZGUgYnkgaGVhcGlmeSgpIGEgbGl0dGxlLCBhbmQgdGhvc2UgbWFkZSBieSBleGhhdXN0aXZlCiMgaGVhcHBvcCgpIGEgbG90LCBpbiBhY2NvcmQgd2l0aCB0aGVvcnkuICBIZXJlIGFyZSB0eXBpY2FsIHJlc3VsdHMgZnJvbSAzCiMgcnVucyAoMyBqdXN0IHRvIGRlbW9uc3RyYXRlIGhvdyBzbWFsbCB0aGUgdmFyaWFuY2UgaXMpOgojCiMgQ29tcGFyZXMgbmVlZGVkIGJ5IGhlYXBpZnkgICAgIENvbXBhcmVzIG5lZWRlZCBieSAxMDAwIGhlYXBwb3BzCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgMTgzNyBjdXQgdG8gMTY2MyAgICAgICAgICAgICAgIDE0OTk2IGN1dCB0byA4NjgwCiMgMTg1NSBjdXQgdG8gMTY1OSAgICAgICAgICAgICAgIDE0OTY2IGN1dCB0byA4Njc4CiMgMTg0NyBjdXQgdG8gMTY2MCAgICAgICAgICAgICAgIDE1MDI0IGN1dCB0byA4NzAzCiMKIyBCdWlsZGluZyB0aGUgaGVhcCBieSB1c2luZyBoZWFwcHVzaCgpIDEwMDAgdGltZXMgaW5zdGVhZCByZXF1aXJlZAojIDIxOTgsIDIxNDgsIGFuZCAyMjE5IGNvbXBhcmVzOiAgaGVhcGlmeSgpIGlzIG1vcmUgZWZmaWNpZW50LCB3aGVuCiMgeW91IGNhbiB1c2UgaXQuCiMKIyBUaGUgdG90YWwgY29tcGFyZXMgbmVlZGVkIGJ5IGxpc3Quc29ydCgpIG9uIHRoZSBzYW1lIGxpc3RzIHdlcmUgODYyNywKIyA4NjI3LCBhbmQgODYzMiAodGhpcyBzaG91bGQgYmUgY29tcGFyZWQgdG8gdGhlIHN1bSBvZiBoZWFwaWZ5KCkgYW5kCiMgaGVhcHBvcCgpIGNvbXBhcmVzKTogIGxpc3Quc29ydCgpIGlzICh1bnN1cnByaXNpbmdseSEpIG1vcmUgZWZmaWNpZW50CiMgZm9yIHNvcnRpbmcuCgpkZWYgX3NpZnR1cChoZWFwLCBwb3MpOgogICAgZW5kcG9zID0gbGVuKGhlYXApCiAgICBzdGFydHBvcyA9IHBvcwogICAgbmV3aXRlbSA9IGhlYXBbcG9zXQogICAgIyBCdWJibGUgdXAgdGhlIHNtYWxsZXIgY2hpbGQgdW50aWwgaGl0dGluZyBhIGxlYWYuCiAgICBjaGlsZHBvcyA9IDIqcG9zICsgMSAgICAjIGxlZnRtb3N0IGNoaWxkIHBvc2l0aW9uCiAgICB3aGlsZSBjaGlsZHBvcyA8IGVuZHBvczoKICAgICAgICAjIFNldCBjaGlsZHBvcyB0byBpbmRleCBvZiBzbWFsbGVyIGNoaWxkLgogICAgICAgIHJpZ2h0cG9zID0gY2hpbGRwb3MgKyAxCiAgICAgICAgaWYgcmlnaHRwb3MgPCBlbmRwb3MgYW5kIG5vdCBoZWFwW2NoaWxkcG9zXSA8IGhlYXBbcmlnaHRwb3NdOgogICAgICAgICAgICBjaGlsZHBvcyA9IHJpZ2h0cG9zCiAgICAgICAgIyBNb3ZlIHRoZSBzbWFsbGVyIGNoaWxkIHVwLgogICAgICAgIGhlYXBbcG9zXSA9IGhlYXBbY2hpbGRwb3NdCiAgICAgICAgcG9zID0gY2hpbGRwb3MKICAgICAgICBjaGlsZHBvcyA9IDIqcG9zICsgMQogICAgIyBUaGUgbGVhZiBhdCBwb3MgaXMgZW1wdHkgbm93LiAgUHV0IG5ld2l0ZW0gdGhlcmUsIGFuZCBidWJibGUgaXQgdXAKICAgICMgdG8gaXRzIGZpbmFsIHJlc3RpbmcgcGxhY2UgKGJ5IHNpZnRpbmcgaXRzIHBhcmVudHMgZG93bikuCiAgICBoZWFwW3Bvc10gPSBuZXdpdGVtCiAgICBfc2lmdGRvd24oaGVhcCwgc3RhcnRwb3MsIHBvcykKCiMgbm90IGF2YWlsYWJsZSBpbiBicnl0aG9uCiMgSWYgYXZhaWxhYmxlLCB1c2UgQyBpbXBsZW1lbnRhdGlvbgojdHJ5OgojICAgIGZyb20gX2hlYXBxIGltcG9ydCAqCiNleGNlcHQgSW1wb3J0RXJyb3I6CiMgICAgcGFzcwoKZGVmIG1lcmdlKCppdGVyYWJsZXMpOgogICAgJycnTWVyZ2UgbXVsdGlwbGUgc29ydGVkIGlucHV0cyBpbnRvIGEgc2luZ2xlIHNvcnRlZCBvdXRwdXQuCgogICAgU2ltaWxhciB0byBzb3J0ZWQoaXRlcnRvb2xzLmNoYWluKCppdGVyYWJsZXMpKSBidXQgcmV0dXJucyBhIGdlbmVyYXRvciwKICAgIGRvZXMgbm90IHB1bGwgdGhlIGRhdGEgaW50byBtZW1vcnkgYWxsIGF0IG9uY2UsIGFuZCBhc3N1bWVzIHRoYXQgZWFjaCBvZgogICAgdGhlIGlucHV0IHN0cmVhbXMgaXMgYWxyZWFkeSBzb3J0ZWQgKHNtYWxsZXN0IHRvIGxhcmdlc3QpLgoKICAgID4+PiBsaXN0KG1lcmdlKFsxLDMsNSw3XSwgWzAsMiw0LDhdLCBbNSwxMCwxNSwyMF0sIFtdLCBbMjVdKSkKICAgIFswLCAxLCAyLCAzLCA0LCA1LCA1LCA3LCA4LCAxMCwgMTUsIDIwLCAyNV0KCiAgICAnJycKICAgIF9oZWFwcG9wLCBfaGVhcHJlcGxhY2UsIF9TdG9wSXRlcmF0aW9uID0gaGVhcHBvcCwgaGVhcHJlcGxhY2UsIFN0b3BJdGVyYXRpb24KCiAgICBoID0gW10KICAgIGhfYXBwZW5kID0gaC5hcHBlbmQKICAgIGZvciBpdG51bSwgaXQgaW4gZW51bWVyYXRlKG1hcChpdGVyLCBpdGVyYWJsZXMpKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG5leHQgPSBpdC5fX25leHRfXwogICAgICAgICAgICBoX2FwcGVuZChbbmV4dCgpLCBpdG51bSwgbmV4dF0pCiAgICAgICAgZXhjZXB0IF9TdG9wSXRlcmF0aW9uOgogICAgICAgICAgICBwYXNzCiAgICBoZWFwaWZ5KGgpCgogICAgd2hpbGUgMToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHdoaWxlIDE6CiAgICAgICAgICAgICAgICB2LCBpdG51bSwgbmV4dCA9IHMgPSBoWzBdICAgIyByYWlzZXMgSW5kZXhFcnJvciB3aGVuIGggaXMgZW1wdHkKICAgICAgICAgICAgICAgIHlpZWxkIHYKICAgICAgICAgICAgICAgIHNbMF0gPSBuZXh0KCkgICAgICAgICAgICAgICAjIHJhaXNlcyBTdG9wSXRlcmF0aW9uIHdoZW4gZXhoYXVzdGVkCiAgICAgICAgICAgICAgICBfaGVhcHJlcGxhY2UoaCwgcykgICAgICAgICAgIyByZXN0b3JlIGhlYXAgY29uZGl0aW9uCiAgICAgICAgZXhjZXB0IF9TdG9wSXRlcmF0aW9uOgogICAgICAgICAgICBfaGVhcHBvcChoKSAgICAgICAgICAgICAgICAgICAgICMgcmVtb3ZlIGVtcHR5IGl0ZXJhdG9yCiAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgIHJldHVybgoKIyBFeHRlbmQgdGhlIGltcGxlbWVudGF0aW9ucyBvZiBuc21hbGxlc3QgYW5kIG5sYXJnZXN0IHRvIHVzZSBhIGtleT0gYXJndW1lbnQKX25zbWFsbGVzdCA9IG5zbWFsbGVzdApkZWYgbnNtYWxsZXN0KG4sIGl0ZXJhYmxlLCBrZXk9Tm9uZSk6CiAgICAiIiJGaW5kIHRoZSBuIHNtYWxsZXN0IGVsZW1lbnRzIGluIGEgZGF0YXNldC4KCiAgICBFcXVpdmFsZW50IHRvOiAgc29ydGVkKGl0ZXJhYmxlLCBrZXk9a2V5KVs6bl0KICAgICIiIgogICAgIyBTaG9ydC1jdXQgZm9yIG49PTEgaXMgdG8gdXNlIG1pbigpIHdoZW4gbGVuKGl0ZXJhYmxlKT4wCiAgICBpZiBuID09IDE6CiAgICAgICAgaXQgPSBpdGVyKGl0ZXJhYmxlKQogICAgICAgIGhlYWQgPSBsaXN0KGlzbGljZShpdCwgMSkpCiAgICAgICAgaWYgbm90IGhlYWQ6CiAgICAgICAgICAgIHJldHVybiBbXQogICAgICAgIGlmIGtleSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gW21pbihjaGFpbihoZWFkLCBpdCkpXQogICAgICAgIHJldHVybiBbbWluKGNoYWluKGhlYWQsIGl0KSwga2V5PWtleSldCgogICAgIyBXaGVuIG4+PXNpemUsIGl0J3MgZmFzdGVyIHRvIHVzZSBzb3J0ZWQoKQogICAgdHJ5OgogICAgICAgIHNpemUgPSBsZW4oaXRlcmFibGUpCiAgICBleGNlcHQgKFR5cGVFcnJvciwgQXR0cmlidXRlRXJyb3IpOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgaWYgbiA+PSBzaXplOgogICAgICAgICAgICByZXR1cm4gc29ydGVkKGl0ZXJhYmxlLCBrZXk9a2V5KVs6bl0KCiAgICAjIFdoZW4ga2V5IGlzIG5vbmUsIHVzZSBzaW1wbGVyIGRlY29yYXRpb24KICAgIGlmIGtleSBpcyBOb25lOgogICAgICAgIGl0ID0gemlwKGl0ZXJhYmxlLCBjb3VudCgpKSAgICAgICAgICAgICAgICAgICAgICAgICAjIGRlY29yYXRlCiAgICAgICAgcmVzdWx0ID0gX25zbWFsbGVzdChuLCBpdCkKICAgICAgICByZXR1cm4gW3JbMF0gZm9yIHIgaW4gcmVzdWx0XSAgICAgICAgICAgICAgICAgICAgICAgIyB1bmRlY29yYXRlCgogICAgIyBHZW5lcmFsIGNhc2UsIHNsb3dlc3QgbWV0aG9kCiAgICBpbjEsIGluMiA9IHRlZShpdGVyYWJsZSkKICAgIGl0ID0gemlwKG1hcChrZXksIGluMSksIGNvdW50KCksIGluMikgICAgICAgICAgICAgICAgICAgIyBkZWNvcmF0ZQogICAgcmVzdWx0ID0gX25zbWFsbGVzdChuLCBpdCkKICAgIHJldHVybiBbclsyXSBmb3IgciBpbiByZXN1bHRdICAgICAgICAgICAgICAgICAgICAgICAgICAgIyB1bmRlY29yYXRlCgoKX25sYXJnZXN0ID0gbmxhcmdlc3QKZGVmIG5sYXJnZXN0KG4sIGl0ZXJhYmxlLCBrZXk9Tm9uZSk6CiAgICAiIiJGaW5kIHRoZSBuIGxhcmdlc3QgZWxlbWVudHMgaW4gYSBkYXRhc2V0LgogICAgCiAgICAgRXF1aXZhbGVudCB0bzogIHNvcnRlZChpdGVyYWJsZSwga2V5PWtleSwgcmV2ZXJzZT1UcnVlKVs6bl0KCiAgICAgU2hvcnQtY3V0IGZvciBuPT0xIGlzIHRvIHVzZSBtYXgoKSB3aGVuIGxlbihpdGVyYWJsZSk+MAogICAgIiIiCiAgICBpZiBuID09IDE6CiAgICAgICAgaXQgPSBpdGVyKGl0ZXJhYmxlKQogICAgICAgIGhlYWQgPSBsaXN0KGlzbGljZShpdCwgMSkpCiAgICAgICAgaWYgbm90IGhlYWQ6CiAgICAgICAgICAgIHJldHVybiBbXQogICAgICAgIGlmIGtleSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gW21heChjaGFpbihoZWFkLCBpdCkpXQogICAgICAgIHJldHVybiBbbWF4KGNoYWluKGhlYWQsIGl0KSwga2V5PWtleSldCgogICAgIyBXaGVuIG4+PXNpemUsIGl0J3MgZmFzdGVyIHRvIHVzZSBzb3J0ZWQoKQogICAgdHJ5OgogICAgICAgIHNpemUgPSBsZW4oaXRlcmFibGUpCiAgICBleGNlcHQgKFR5cGVFcnJvciwgQXR0cmlidXRlRXJyb3IpOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgaWYgbiA+PSBzaXplOgogICAgICAgICAgICByZXR1cm4gc29ydGVkKGl0ZXJhYmxlLCBrZXk9a2V5LCByZXZlcnNlPVRydWUpWzpuXQoKICAgICMgV2hlbiBrZXkgaXMgbm9uZSwgdXNlIHNpbXBsZXIgZGVjb3JhdGlvbgogICAgaWYga2V5IGlzIE5vbmU6CiAgICAgICAgaXQgPSB6aXAoaXRlcmFibGUsIGNvdW50KDAsLTEpKSAgICAgICAgICAgICAgICAgICAgICMgZGVjb3JhdGUKICAgICAgICByZXN1bHQgPSBfbmxhcmdlc3QobiwgaXQpCiAgICAgICAgcmV0dXJuIFtyWzBdIGZvciByIGluIHJlc3VsdF0gICAgICAgICAgICAgICAgICAgICAgICMgdW5kZWNvcmF0ZQoKICAgICMgR2VuZXJhbCBjYXNlLCBzbG93ZXN0IG1ldGhvZAogICAgaW4xLCBpbjIgPSB0ZWUoaXRlcmFibGUpCiAgICBpdCA9IHppcChtYXAoa2V5LCBpbjEpLCBjb3VudCgwLC0xKSwgaW4yKSAgICAgICAgICAgICAgICMgZGVjb3JhdGUKICAgIHJlc3VsdCA9IF9ubGFyZ2VzdChuLCBpdCkKICAgIHJldHVybiBbclsyXSBmb3IgciBpbiByZXN1bHRdICAgICAgICAgICAgICAgICAgICAgICAgICAgIyB1bmRlY29yYXRlCg==',
'/Lib/calendar.py':'IiIiQ2FsZW5kYXIgcHJpbnRpbmcgZnVuY3Rpb25zCgpOb3RlIHdoZW4gY29tcGFyaW5nIHRoZXNlIGNhbGVuZGFycyB0byB0aGUgb25lcyBwcmludGVkIGJ5IGNhbCgxKTogQnkKZGVmYXVsdCwgdGhlc2UgY2FsZW5kYXJzIGhhdmUgTW9uZGF5IGFzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWssIGFuZApTdW5kYXkgYXMgdGhlIGxhc3QgKHRoZSBFdXJvcGVhbiBjb252ZW50aW9uKS4gVXNlIHNldGZpcnN0d2Vla2RheSgpIHRvCnNldCB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwPU1vbmRheSwgNj1TdW5kYXkpLiIiIgoKaW1wb3J0IHN5cwppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGxvY2FsZSBhcyBfbG9jYWxlCgpfX2FsbF9fID0gWyJJbGxlZ2FsTW9udGhFcnJvciIsICJJbGxlZ2FsV2Vla2RheUVycm9yIiwgInNldGZpcnN0d2Vla2RheSIsCiAgICAgICAgICAgImZpcnN0d2Vla2RheSIsICJpc2xlYXAiLCAibGVhcGRheXMiLCAid2Vla2RheSIsICJtb250aHJhbmdlIiwKICAgICAgICAgICAibW9udGhjYWxlbmRhciIsICJwcm1vbnRoIiwgIm1vbnRoIiwgInByY2FsIiwgImNhbGVuZGFyIiwKICAgICAgICAgICAidGltZWdtIiwgIm1vbnRoX25hbWUiLCAibW9udGhfYWJiciIsICJkYXlfbmFtZSIsICJkYXlfYWJiciJdCgojIEV4Y2VwdGlvbiByYWlzZWQgZm9yIGJhZCBpbnB1dCAod2l0aCBzdHJpbmcgcGFyYW1ldGVyIGZvciBkZXRhaWxzKQplcnJvciA9IFZhbHVlRXJyb3IKCiMgRXhjZXB0aW9ucyByYWlzZWQgZm9yIGJhZCBpbnB1dApjbGFzcyBJbGxlZ2FsTW9udGhFcnJvcihWYWx1ZUVycm9yKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtb250aCk6CiAgICAgICAgc2VsZi5tb250aCA9IG1vbnRoCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gImJhZCBtb250aCBudW1iZXIgJXI7IG11c3QgYmUgMS0xMiIgJSBzZWxmLm1vbnRoCgoKY2xhc3MgSWxsZWdhbFdlZWtkYXlFcnJvcihWYWx1ZUVycm9yKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB3ZWVrZGF5KToKICAgICAgICBzZWxmLndlZWtkYXkgPSB3ZWVrZGF5CiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gImJhZCB3ZWVrZGF5IG51bWJlciAlcjsgbXVzdCBiZSAwIChNb25kYXkpIHRvIDYgKFN1bmRheSkiICUgc2VsZi53ZWVrZGF5CgoKIyBDb25zdGFudHMgZm9yIG1vbnRocyByZWZlcmVuY2VkIGxhdGVyCkphbnVhcnkgPSAxCkZlYnJ1YXJ5ID0gMgoKIyBOdW1iZXIgb2YgZGF5cyBwZXIgbW9udGggKGV4Y2VwdCBmb3IgRmVicnVhcnkgaW4gbGVhcCB5ZWFycykKbWRheXMgPSBbMCwgMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0KCiMgVGhpcyBtb2R1bGUgdXNlZCB0byBoYXZlIGhhcmQtY29kZWQgbGlzdHMgb2YgZGF5IGFuZCBtb250aCBuYW1lcywgYXMKIyBFbmdsaXNoIHN0cmluZ3MuICBUaGUgY2xhc3NlcyBmb2xsb3dpbmcgZW11bGF0ZSBhIHJlYWQtb25seSB2ZXJzaW9uIG9mCiMgdGhhdCwgYnV0IHN1cHBseSBsb2NhbGl6ZWQgbmFtZXMuICBOb3RlIHRoYXQgdGhlIHZhbHVlcyBhcmUgY29tcHV0ZWQKIyBmcmVzaCBvbiBlYWNoIGNhbGwsIGluIGNhc2UgdGhlIHVzZXIgY2hhbmdlcyBsb2NhbGUgYmV0d2VlbiBjYWxscy4KCmNsYXNzIF9sb2NhbGl6ZWRfbW9udGg6CgogICAgX21vbnRocyA9IFtkYXRldGltZS5kYXRlKDIwMDEsIGkrMSwgMSkuc3RyZnRpbWUgZm9yIGkgaW4gcmFuZ2UoMTIpXQogICAgX21vbnRocy5pbnNlcnQoMCwgbGFtYmRhIHg6ICIiKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmb3JtYXQpOgogICAgICAgIHNlbGYuZm9ybWF0ID0gZm9ybWF0CgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGkpOgogICAgICAgIGZ1bmNzID0gc2VsZi5fbW9udGhzW2ldCiAgICAgICAgaWYgaXNpbnN0YW5jZShpLCBzbGljZSk6CiAgICAgICAgICAgIHJldHVybiBbZihzZWxmLmZvcm1hdCkgZm9yIGYgaW4gZnVuY3NdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGZ1bmNzKHNlbGYuZm9ybWF0KQoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiAxMwoKCmNsYXNzIF9sb2NhbGl6ZWRfZGF5OgoKICAgICMgSmFudWFyeSAxLCAyMDAxLCB3YXMgYSBNb25kYXkuCiAgICBfZGF5cyA9IFtkYXRldGltZS5kYXRlKDIwMDEsIDEsIGkrMSkuc3RyZnRpbWUgZm9yIGkgaW4gcmFuZ2UoNyldCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZvcm1hdCk6CiAgICAgICAgc2VsZi5mb3JtYXQgPSBmb3JtYXQKCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaSk6CiAgICAgICAgZnVuY3MgPSBzZWxmLl9kYXlzW2ldCiAgICAgICAgaWYgaXNpbnN0YW5jZShpLCBzbGljZSk6CiAgICAgICAgICAgIHJldHVybiBbZihzZWxmLmZvcm1hdCkgZm9yIGYgaW4gZnVuY3NdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGZ1bmNzKHNlbGYuZm9ybWF0KQoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiA3CgoKIyBGdWxsIGFuZCBhYmJyZXZpYXRlZCBuYW1lcyBvZiB3ZWVrZGF5cwpkYXlfbmFtZSA9IF9sb2NhbGl6ZWRfZGF5KCclQScpCmRheV9hYmJyID0gX2xvY2FsaXplZF9kYXkoJyVhJykKCiMgRnVsbCBhbmQgYWJicmV2aWF0ZWQgbmFtZXMgb2YgbW9udGhzICgxLWJhc2VkIGFycmF5cyEhISkKbW9udGhfbmFtZSA9IF9sb2NhbGl6ZWRfbW9udGgoJyVCJykKbW9udGhfYWJiciA9IF9sb2NhbGl6ZWRfbW9udGgoJyViJykKCiMgQ29uc3RhbnRzIGZvciB3ZWVrZGF5cwooTU9OREFZLCBUVUVTREFZLCBXRURORVNEQVksIFRIVVJTREFZLCBGUklEQVksIFNBVFVSREFZLCBTVU5EQVkpID0gcmFuZ2UoNykKCgpkZWYgaXNsZWFwKHllYXIpOgogICAgIiIiUmV0dXJuIFRydWUgZm9yIGxlYXAgeWVhcnMsIEZhbHNlIGZvciBub24tbGVhcCB5ZWFycy4iIiIKICAgIHJldHVybiB5ZWFyICUgNCA9PSAwIGFuZCAoeWVhciAlIDEwMCAhPSAwIG9yIHllYXIgJSA0MDAgPT0gMCkKCgpkZWYgbGVhcGRheXMoeTEsIHkyKToKICAgICIiIlJldHVybiBudW1iZXIgb2YgbGVhcCB5ZWFycyBpbiByYW5nZSBbeTEsIHkyKS4KICAgICAgIEFzc3VtZSB5MSA8PSB5Mi4iIiIKICAgIHkxIC09IDEKICAgIHkyIC09IDEKICAgIHJldHVybiAoeTIvLzQgLSB5MS8vNCkgLSAoeTIvLzEwMCAtIHkxLy8xMDApICsgKHkyLy80MDAgLSB5MS8vNDAwKQoKCmRlZiB3ZWVrZGF5KHllYXIsIG1vbnRoLCBkYXkpOgogICAgIiIiUmV0dXJuIHdlZWtkYXkgKDAtNiB+IE1vbi1TdW4pIGZvciB5ZWFyICgxOTcwLS4uLiksIG1vbnRoICgxLTEyKSwKICAgICAgIGRheSAoMS0zMSkuIiIiCiAgICByZXR1cm4gZGF0ZXRpbWUuZGF0ZSh5ZWFyLCBtb250aCwgZGF5KS53ZWVrZGF5KCkKCgpkZWYgbW9udGhyYW5nZSh5ZWFyLCBtb250aCk6CiAgICAiIiJSZXR1cm4gd2Vla2RheSAoMC02IH4gTW9uLVN1bikgYW5kIG51bWJlciBvZiBkYXlzICgyOC0zMSkgZm9yCiAgICAgICB5ZWFyLCBtb250aC4iIiIKICAgIGlmIG5vdCAxIDw9IG1vbnRoIDw9IDEyOgogICAgICAgIHJhaXNlIElsbGVnYWxNb250aEVycm9yKG1vbnRoKQogICAgZGF5MSA9IHdlZWtkYXkoeWVhciwgbW9udGgsIDEpCiAgICBuZGF5cyA9IG1kYXlzW21vbnRoXSArIChtb250aCA9PSBGZWJydWFyeSBhbmQgaXNsZWFwKHllYXIpKQogICAgcmV0dXJuIGRheTEsIG5kYXlzCgoKY2xhc3MgQ2FsZW5kYXIob2JqZWN0KToKICAgICIiIgogICAgQmFzZSBjYWxlbmRhciBjbGFzcy4gVGhpcyBjbGFzcyBkb2Vzbid0IGRvIGFueSBmb3JtYXR0aW5nLiBJdCBzaW1wbHkKICAgIHByb3ZpZGVzIGRhdGEgdG8gc3ViY2xhc3Nlcy4KICAgICIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmaXJzdHdlZWtkYXk9MCk6CiAgICAgICAgc2VsZi5maXJzdHdlZWtkYXkgPSBmaXJzdHdlZWtkYXkgIyAwID0gTW9uZGF5LCA2ID0gU3VuZGF5CgogICAgZGVmIGdldGZpcnN0d2Vla2RheShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fZmlyc3R3ZWVrZGF5ICUgNwoKICAgIGRlZiBzZXRmaXJzdHdlZWtkYXkoc2VsZiwgZmlyc3R3ZWVrZGF5KToKICAgICAgICBzZWxmLl9maXJzdHdlZWtkYXkgPSBmaXJzdHdlZWtkYXkKCiAgICBmaXJzdHdlZWtkYXkgPSBwcm9wZXJ0eShnZXRmaXJzdHdlZWtkYXksIHNldGZpcnN0d2Vla2RheSkKCiAgICBkZWYgaXRlcndlZWtkYXlzKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGl0ZXJhdG9yIGZvciBvbmUgd2VlayBvZiB3ZWVrZGF5IG51bWJlcnMgc3RhcnRpbmcgd2l0aCB0aGUKICAgICAgICBjb25maWd1cmVkIGZpcnN0IG9uZS4KICAgICAgICAiIiIKICAgICAgICBmb3IgaSBpbiByYW5nZShzZWxmLmZpcnN0d2Vla2RheSwgc2VsZi5maXJzdHdlZWtkYXkgKyA3KToKICAgICAgICAgICAgeWllbGQgaSU3CgogICAgZGVmIGl0ZXJtb250aGRhdGVzKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYW4gaXRlcmF0b3IgZm9yIG9uZSBtb250aC4gVGhlIGl0ZXJhdG9yIHdpbGwgeWllbGQgZGF0ZXRpbWUuZGF0ZQogICAgICAgIHZhbHVlcyBhbmQgd2lsbCBhbHdheXMgaXRlcmF0ZSB0aHJvdWdoIGNvbXBsZXRlIHdlZWtzLCBzbyBpdCB3aWxsIHlpZWxkCiAgICAgICAgZGF0ZXMgb3V0c2lkZSB0aGUgc3BlY2lmaWVkIG1vbnRoLgogICAgICAgICIiIgogICAgICAgIGRhdGUgPSBkYXRldGltZS5kYXRlKHllYXIsIG1vbnRoLCAxKQogICAgICAgICMgR28gYmFjayB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSB3ZWVrCiAgICAgICAgZGF5cyA9IChkYXRlLndlZWtkYXkoKSAtIHNlbGYuZmlyc3R3ZWVrZGF5KSAlIDcKICAgICAgICBkYXRlIC09IGRhdGV0aW1lLnRpbWVkZWx0YShkYXlzPWRheXMpCiAgICAgICAgb25lZGF5ID0gZGF0ZXRpbWUudGltZWRlbHRhKGRheXM9MSkKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB5aWVsZCBkYXRlCiAgICAgICAgICAgIGRhdGUgKz0gb25lZGF5CiAgICAgICAgICAgIGlmIGRhdGUubW9udGggIT0gbW9udGggYW5kIGRhdGUud2Vla2RheSgpID09IHNlbGYuZmlyc3R3ZWVrZGF5OgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICBkZWYgaXRlcm1vbnRoZGF5czIoc2VsZiwgeWVhciwgbW9udGgpOgogICAgICAgICIiIgogICAgICAgIExpa2UgaXRlcm1vbnRoZGF0ZXMoKSwgYnV0IHdpbGwgeWllbGQgKGRheSBudW1iZXIsIHdlZWtkYXkgbnVtYmVyKQogICAgICAgIHR1cGxlcy4gRm9yIGRheXMgb3V0c2lkZSB0aGUgc3BlY2lmaWVkIG1vbnRoIHRoZSBkYXkgbnVtYmVyIGlzIDAuCiAgICAgICAgIiIiCiAgICAgICAgZm9yIGRhdGUgaW4gc2VsZi5pdGVybW9udGhkYXRlcyh5ZWFyLCBtb250aCk6CiAgICAgICAgICAgIGlmIGRhdGUubW9udGggIT0gbW9udGg6CiAgICAgICAgICAgICAgICB5aWVsZCAoMCwgZGF0ZS53ZWVrZGF5KCkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB5aWVsZCAoZGF0ZS5kYXksIGRhdGUud2Vla2RheSgpKQoKICAgIGRlZiBpdGVybW9udGhkYXlzKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBMaWtlIGl0ZXJtb250aGRhdGVzKCksIGJ1dCB3aWxsIHlpZWxkIGRheSBudW1iZXJzLiBGb3IgZGF5cyBvdXRzaWRlCiAgICAgICAgdGhlIHNwZWNpZmllZCBtb250aCB0aGUgZGF5IG51bWJlciBpcyAwLgogICAgICAgICIiIgogICAgICAgIGZvciBkYXRlIGluIHNlbGYuaXRlcm1vbnRoZGF0ZXMoeWVhciwgbW9udGgpOgogICAgICAgICAgICBpZiBkYXRlLm1vbnRoICE9IG1vbnRoOgogICAgICAgICAgICAgICAgeWllbGQgMAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgeWllbGQgZGF0ZS5kYXkKCiAgICBkZWYgbW9udGhkYXRlc2NhbGVuZGFyKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBtYXRyaXggKGxpc3Qgb2YgbGlzdHMpIHJlcHJlc2VudGluZyBhIG1vbnRoJ3MgY2FsZW5kYXIuCiAgICAgICAgRWFjaCByb3cgcmVwcmVzZW50cyBhIHdlZWs7IHdlZWsgZW50cmllcyBhcmUgZGF0ZXRpbWUuZGF0ZSB2YWx1ZXMuCiAgICAgICAgIiIiCiAgICAgICAgZGF0ZXMgPSBsaXN0KHNlbGYuaXRlcm1vbnRoZGF0ZXMoeWVhciwgbW9udGgpKQogICAgICAgIHJldHVybiBbIGRhdGVzW2k6aSs3XSBmb3IgaSBpbiByYW5nZSgwLCBsZW4oZGF0ZXMpLCA3KSBdCgogICAgZGVmIG1vbnRoZGF5czJjYWxlbmRhcihzZWxmLCB5ZWFyLCBtb250aCk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgbWF0cml4IHJlcHJlc2VudGluZyBhIG1vbnRoJ3MgY2FsZW5kYXIuCiAgICAgICAgRWFjaCByb3cgcmVwcmVzZW50cyBhIHdlZWs7IHdlZWsgZW50cmllcyBhcmUKICAgICAgICAoZGF5IG51bWJlciwgd2Vla2RheSBudW1iZXIpIHR1cGxlcy4gRGF5IG51bWJlcnMgb3V0c2lkZSB0aGlzIG1vbnRoCiAgICAgICAgYXJlIHplcm8uCiAgICAgICAgIiIiCiAgICAgICAgZGF5cyA9IGxpc3Qoc2VsZi5pdGVybW9udGhkYXlzMih5ZWFyLCBtb250aCkpCiAgICAgICAgcmV0dXJuIFsgZGF5c1tpOmkrN10gZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKGRheXMpLCA3KSBdCgogICAgZGVmIG1vbnRoZGF5c2NhbGVuZGFyKHNlbGYsIHllYXIsIG1vbnRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBtYXRyaXggcmVwcmVzZW50aW5nIGEgbW9udGgncyBjYWxlbmRhci4KICAgICAgICBFYWNoIHJvdyByZXByZXNlbnRzIGEgd2VlazsgZGF5cyBvdXRzaWRlIHRoaXMgbW9udGggYXJlIHplcm8uCiAgICAgICAgIiIiCiAgICAgICAgZGF5cyA9IGxpc3Qoc2VsZi5pdGVybW9udGhkYXlzKHllYXIsIG1vbnRoKSkKICAgICAgICByZXR1cm4gWyBkYXlzW2k6aSs3XSBmb3IgaSBpbiByYW5nZSgwLCBsZW4oZGF5cyksIDcpIF0KCiAgICBkZWYgeWVhcmRhdGVzY2FsZW5kYXIoc2VsZiwgeWVhciwgd2lkdGg9Myk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIHRoZSBkYXRhIGZvciB0aGUgc3BlY2lmaWVkIHllYXIgcmVhZHkgZm9yIGZvcm1hdHRpbmcuIFRoZSByZXR1cm4KICAgICAgICB2YWx1ZSBpcyBhIGxpc3Qgb2YgbW9udGggcm93cy4gRWFjaCBtb250aCByb3cgY29udGFpbnMgdXB0byB3aWR0aCBtb250aHMuCiAgICAgICAgRWFjaCBtb250aCBjb250YWlucyBiZXR3ZWVuIDQgYW5kIDYgd2Vla3MgYW5kIGVhY2ggd2VlayBjb250YWlucyAxLTcKICAgICAgICBkYXlzLiBEYXlzIGFyZSBkYXRldGltZS5kYXRlIG9iamVjdHMuCiAgICAgICAgIiIiCiAgICAgICAgbW9udGhzID0gWwogICAgICAgICAgICBzZWxmLm1vbnRoZGF0ZXNjYWxlbmRhcih5ZWFyLCBpKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShKYW51YXJ5LCBKYW51YXJ5KzEyKQogICAgICAgIF0KICAgICAgICByZXR1cm4gW21vbnRoc1tpOmkrd2lkdGhdIGZvciBpIGluIHJhbmdlKDAsIGxlbihtb250aHMpLCB3aWR0aCkgXQoKICAgIGRlZiB5ZWFyZGF5czJjYWxlbmRhcihzZWxmLCB5ZWFyLCB3aWR0aD0zKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gdGhlIGRhdGEgZm9yIHRoZSBzcGVjaWZpZWQgeWVhciByZWFkeSBmb3IgZm9ybWF0dGluZyAoc2ltaWxhciB0bwogICAgICAgIHllYXJkYXRlc2NhbGVuZGFyKCkpLiBFbnRyaWVzIGluIHRoZSB3ZWVrIGxpc3RzIGFyZQogICAgICAgIChkYXkgbnVtYmVyLCB3ZWVrZGF5IG51bWJlcikgdHVwbGVzLiBEYXkgbnVtYmVycyBvdXRzaWRlIHRoaXMgbW9udGggYXJlCiAgICAgICAgemVyby4KICAgICAgICAiIiIKICAgICAgICBtb250aHMgPSBbCiAgICAgICAgICAgIHNlbGYubW9udGhkYXlzMmNhbGVuZGFyKHllYXIsIGkpCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKEphbnVhcnksIEphbnVhcnkrMTIpCiAgICAgICAgXQogICAgICAgIHJldHVybiBbbW9udGhzW2k6aSt3aWR0aF0gZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKG1vbnRocyksIHdpZHRoKSBdCgogICAgZGVmIHllYXJkYXlzY2FsZW5kYXIoc2VsZiwgeWVhciwgd2lkdGg9Myk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIHRoZSBkYXRhIGZvciB0aGUgc3BlY2lmaWVkIHllYXIgcmVhZHkgZm9yIGZvcm1hdHRpbmcgKHNpbWlsYXIgdG8KICAgICAgICB5ZWFyZGF0ZXNjYWxlbmRhcigpKS4gRW50cmllcyBpbiB0aGUgd2VlayBsaXN0cyBhcmUgZGF5IG51bWJlcnMuCiAgICAgICAgRGF5IG51bWJlcnMgb3V0c2lkZSB0aGlzIG1vbnRoIGFyZSB6ZXJvLgogICAgICAgICIiIgogICAgICAgIG1vbnRocyA9IFsKICAgICAgICAgICAgc2VsZi5tb250aGRheXNjYWxlbmRhcih5ZWFyLCBpKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShKYW51YXJ5LCBKYW51YXJ5KzEyKQogICAgICAgIF0KICAgICAgICByZXR1cm4gW21vbnRoc1tpOmkrd2lkdGhdIGZvciBpIGluIHJhbmdlKDAsIGxlbihtb250aHMpLCB3aWR0aCkgXQoKCmNsYXNzIFRleHRDYWxlbmRhcihDYWxlbmRhcik6CiAgICAiIiIKICAgIFN1YmNsYXNzIG9mIENhbGVuZGFyIHRoYXQgb3V0cHV0cyBhIGNhbGVuZGFyIGFzIGEgc2ltcGxlIHBsYWluIHRleHQKICAgIHNpbWlsYXIgdG8gdGhlIFVOSVggcHJvZ3JhbSBjYWwuCiAgICAiIiIKCiAgICBkZWYgcHJ3ZWVrKHNlbGYsIHRoZXdlZWssIHdpZHRoKToKICAgICAgICAiIiIKICAgICAgICBQcmludCBhIHNpbmdsZSB3ZWVrIChubyBuZXdsaW5lKS4KICAgICAgICAiIiIKICAgICAgICBwcmludChzZWxmLmZvcm1hdHdlZWsodGhld2Vlaywgd2lkdGgpLCBlbmQ9JyAnKQoKICAgIGRlZiBmb3JtYXRkYXkoc2VsZiwgZGF5LCB3ZWVrZGF5LCB3aWR0aCk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJucyBhIGZvcm1hdHRlZCBkYXkuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZGF5ID09IDA6CiAgICAgICAgICAgIHMgPSAnJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHMgPSAnJTJpJyAlIGRheSAgICAgICAgICAgICAjIHJpZ2h0LWFsaWduIHNpbmdsZS1kaWdpdCBkYXlzCiAgICAgICAgcmV0dXJuIHMuY2VudGVyKHdpZHRoKQoKICAgIGRlZiBmb3JtYXR3ZWVrKHNlbGYsIHRoZXdlZWssIHdpZHRoKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm5zIGEgc2luZ2xlIHdlZWsgaW4gYSBzdHJpbmcgKG5vIG5ld2xpbmUpLgogICAgICAgICIiIgogICAgICAgIHJldHVybiAnICcuam9pbihzZWxmLmZvcm1hdGRheShkLCB3ZCwgd2lkdGgpIGZvciAoZCwgd2QpIGluIHRoZXdlZWspCgogICAgZGVmIGZvcm1hdHdlZWtkYXkoc2VsZiwgZGF5LCB3aWR0aCk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJucyBhIGZvcm1hdHRlZCB3ZWVrIGRheSBuYW1lLgogICAgICAgICIiIgogICAgICAgIGlmIHdpZHRoID49IDk6CiAgICAgICAgICAgIG5hbWVzID0gZGF5X25hbWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBuYW1lcyA9IGRheV9hYmJyCiAgICAgICAgcmV0dXJuIG5hbWVzW2RheV1bOndpZHRoXS5jZW50ZXIod2lkdGgpCgogICAgZGVmIGZvcm1hdHdlZWtoZWFkZXIoc2VsZiwgd2lkdGgpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGhlYWRlciBmb3IgYSB3ZWVrLgogICAgICAgICIiIgogICAgICAgIHJldHVybiAnICcuam9pbihzZWxmLmZvcm1hdHdlZWtkYXkoaSwgd2lkdGgpIGZvciBpIGluIHNlbGYuaXRlcndlZWtkYXlzKCkpCgogICAgZGVmIGZvcm1hdG1vbnRobmFtZShzZWxmLCB0aGV5ZWFyLCB0aGVtb250aCwgd2lkdGgsIHdpdGh5ZWFyPVRydWUpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGZvcm1hdHRlZCBtb250aCBuYW1lLgogICAgICAgICIiIgogICAgICAgIHMgPSBtb250aF9uYW1lW3RoZW1vbnRoXQogICAgICAgIGlmIHdpdGh5ZWFyOgogICAgICAgICAgICBzID0gIiVzICVyIiAlIChzLCB0aGV5ZWFyKQogICAgICAgIHJldHVybiBzLmNlbnRlcih3aWR0aCkKCiAgICBkZWYgcHJtb250aChzZWxmLCB0aGV5ZWFyLCB0aGVtb250aCwgdz0wLCBsPTApOgogICAgICAgICIiIgogICAgICAgIFByaW50IGEgbW9udGgncyBjYWxlbmRhci4KICAgICAgICAiIiIKICAgICAgICBwcmludChzZWxmLmZvcm1hdG1vbnRoKHRoZXllYXIsIHRoZW1vbnRoLCB3LCBsKSwgZW5kPScgJykKCiAgICBkZWYgZm9ybWF0bW9udGgoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHc9MCwgbD0wKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBtb250aCdzIGNhbGVuZGFyIHN0cmluZyAobXVsdGktbGluZSkuCiAgICAgICAgIiIiCiAgICAgICAgdyA9IG1heCgyLCB3KQogICAgICAgIGwgPSBtYXgoMSwgbCkKICAgICAgICBzID0gc2VsZi5mb3JtYXRtb250aG5hbWUodGhleWVhciwgdGhlbW9udGgsIDcgKiAodyArIDEpIC0gMSkKICAgICAgICBzID0gcy5yc3RyaXAoKQogICAgICAgIHMgKz0gJ1xuJyAqIGwKICAgICAgICBzICs9IHNlbGYuZm9ybWF0d2Vla2hlYWRlcih3KS5yc3RyaXAoKQogICAgICAgIHMgKz0gJ1xuJyAqIGwKICAgICAgICBmb3Igd2VlayBpbiBzZWxmLm1vbnRoZGF5czJjYWxlbmRhcih0aGV5ZWFyLCB0aGVtb250aCk6CiAgICAgICAgICAgIHMgKz0gc2VsZi5mb3JtYXR3ZWVrKHdlZWssIHcpLnJzdHJpcCgpCiAgICAgICAgICAgIHMgKz0gJ1xuJyAqIGwKICAgICAgICByZXR1cm4gcwoKICAgIGRlZiBmb3JtYXR5ZWFyKHNlbGYsIHRoZXllYXIsIHc9MiwgbD0xLCBjPTYsIG09Myk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJucyBhIHllYXIncyBjYWxlbmRhciBhcyBhIG11bHRpLWxpbmUgc3RyaW5nLgogICAgICAgICIiIgogICAgICAgIHcgPSBtYXgoMiwgdykKICAgICAgICBsID0gbWF4KDEsIGwpCiAgICAgICAgYyA9IG1heCgyLCBjKQogICAgICAgIGNvbHdpZHRoID0gKHcgKyAxKSAqIDcgLSAxCiAgICAgICAgdiA9IFtdCiAgICAgICAgYSA9IHYuYXBwZW5kCiAgICAgICAgYShyZXByKHRoZXllYXIpLmNlbnRlcihjb2x3aWR0aCptK2MqKG0tMSkpLnJzdHJpcCgpKQogICAgICAgIGEoJ1xuJypsKQogICAgICAgIGhlYWRlciA9IHNlbGYuZm9ybWF0d2Vla2hlYWRlcih3KQogICAgICAgIGZvciAoaSwgcm93KSBpbiBlbnVtZXJhdGUoc2VsZi55ZWFyZGF5czJjYWxlbmRhcih0aGV5ZWFyLCBtKSk6CiAgICAgICAgICAgICMgbW9udGhzIGluIHRoaXMgcm93CiAgICAgICAgICAgIG1vbnRocyA9IHJhbmdlKG0qaSsxLCBtaW4obSooaSsxKSsxLCAxMykpCiAgICAgICAgICAgIGEoJ1xuJypsKQogICAgICAgICAgICBuYW1lcyA9IChzZWxmLmZvcm1hdG1vbnRobmFtZSh0aGV5ZWFyLCBrLCBjb2x3aWR0aCwgRmFsc2UpCiAgICAgICAgICAgICAgICAgICAgIGZvciBrIGluIG1vbnRocykKICAgICAgICAgICAgYShmb3JtYXRzdHJpbmcobmFtZXMsIGNvbHdpZHRoLCBjKS5yc3RyaXAoKSkKICAgICAgICAgICAgYSgnXG4nKmwpCiAgICAgICAgICAgIGhlYWRlcnMgPSAoaGVhZGVyIGZvciBrIGluIG1vbnRocykKICAgICAgICAgICAgYShmb3JtYXRzdHJpbmcoaGVhZGVycywgY29sd2lkdGgsIGMpLnJzdHJpcCgpKQogICAgICAgICAgICBhKCdcbicqbCkKICAgICAgICAgICAgIyBtYXggbnVtYmVyIG9mIHdlZWtzIGZvciB0aGlzIHJvdwogICAgICAgICAgICBoZWlnaHQgPSBtYXgobGVuKGNhbCkgZm9yIGNhbCBpbiByb3cpCiAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGhlaWdodCk6CiAgICAgICAgICAgICAgICB3ZWVrcyA9IFtdCiAgICAgICAgICAgICAgICBmb3IgY2FsIGluIHJvdzoKICAgICAgICAgICAgICAgICAgICBpZiBqID49IGxlbihjYWwpOgogICAgICAgICAgICAgICAgICAgICAgICB3ZWVrcy5hcHBlbmQoJycpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgd2Vla3MuYXBwZW5kKHNlbGYuZm9ybWF0d2VlayhjYWxbal0sIHcpKQogICAgICAgICAgICAgICAgYShmb3JtYXRzdHJpbmcod2Vla3MsIGNvbHdpZHRoLCBjKS5yc3RyaXAoKSkKICAgICAgICAgICAgICAgIGEoJ1xuJyAqIGwpCiAgICAgICAgcmV0dXJuICcnLmpvaW4odikKCiAgICBkZWYgcHJ5ZWFyKHNlbGYsIHRoZXllYXIsIHc9MCwgbD0wLCBjPTYsIG09Myk6CiAgICAgICAgIiIiUHJpbnQgYSB5ZWFyJ3MgY2FsZW5kYXIuIiIiCiAgICAgICAgcHJpbnQoc2VsZi5mb3JtYXR5ZWFyKHRoZXllYXIsIHcsIGwsIGMsIG0pKQoKCmNsYXNzIEhUTUxDYWxlbmRhcihDYWxlbmRhcik6CiAgICAiIiIKICAgIFRoaXMgY2FsZW5kYXIgcmV0dXJucyBjb21wbGV0ZSBIVE1MIHBhZ2VzLgogICAgIiIiCgogICAgIyBDU1MgY2xhc3NlcyBmb3IgdGhlIGRheSA8dGQ+cwogICAgY3NzY2xhc3NlcyA9IFsibW9uIiwgInR1ZSIsICJ3ZWQiLCAidGh1IiwgImZyaSIsICJzYXQiLCAic3VuIl0KCiAgICBkZWYgZm9ybWF0ZGF5KHNlbGYsIGRheSwgd2Vla2RheSk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgZGF5IGFzIGEgdGFibGUgY2VsbC4KICAgICAgICAiIiIKICAgICAgICBpZiBkYXkgPT0gMDoKICAgICAgICAgICAgcmV0dXJuICc8dGQgY2xhc3M9Im5vZGF5Ij4mbmJzcDs8L3RkPicgIyBkYXkgb3V0c2lkZSBtb250aAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAnPHRkIGNsYXNzPSIlcyI+JWQ8L3RkPicgJSAoc2VsZi5jc3NjbGFzc2VzW3dlZWtkYXldLCBkYXkpCgogICAgZGVmIGZvcm1hdHdlZWsoc2VsZiwgdGhld2Vlayk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgY29tcGxldGUgd2VlayBhcyBhIHRhYmxlIHJvdy4KICAgICAgICAiIiIKICAgICAgICBzID0gJycuam9pbihzZWxmLmZvcm1hdGRheShkLCB3ZCkgZm9yIChkLCB3ZCkgaW4gdGhld2VlaykKICAgICAgICByZXR1cm4gJzx0cj4lczwvdHI+JyAlIHMKCiAgICBkZWYgZm9ybWF0d2Vla2RheShzZWxmLCBkYXkpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIHdlZWtkYXkgbmFtZSBhcyBhIHRhYmxlIGhlYWRlci4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gJzx0aCBjbGFzcz0iJXMiPiVzPC90aD4nICUgKHNlbGYuY3NzY2xhc3Nlc1tkYXldLCBkYXlfYWJicltkYXldKQoKICAgIGRlZiBmb3JtYXR3ZWVraGVhZGVyKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIGhlYWRlciBmb3IgYSB3ZWVrIGFzIGEgdGFibGUgcm93LgogICAgICAgICIiIgogICAgICAgIHMgPSAnJy5qb2luKHNlbGYuZm9ybWF0d2Vla2RheShpKSBmb3IgaSBpbiBzZWxmLml0ZXJ3ZWVrZGF5cygpKQogICAgICAgIHJldHVybiAnPHRyPiVzPC90cj4nICUgcwoKICAgIGRlZiBmb3JtYXRtb250aG5hbWUoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHdpdGh5ZWFyPVRydWUpOgogICAgICAgICIiIgogICAgICAgIFJldHVybiBhIG1vbnRoIG5hbWUgYXMgYSB0YWJsZSByb3cuCiAgICAgICAgIiIiCiAgICAgICAgaWYgd2l0aHllYXI6CiAgICAgICAgICAgIHMgPSAnJXMgJXMnICUgKG1vbnRoX25hbWVbdGhlbW9udGhdLCB0aGV5ZWFyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHMgPSAnJXMnICUgbW9udGhfbmFtZVt0aGVtb250aF0KICAgICAgICByZXR1cm4gJzx0cj48dGggY29sc3Bhbj0iNyIgY2xhc3M9Im1vbnRoIj4lczwvdGg+PC90cj4nICUgcwoKICAgIGRlZiBmb3JtYXRtb250aChzZWxmLCB0aGV5ZWFyLCB0aGVtb250aCwgd2l0aHllYXI9VHJ1ZSk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgZm9ybWF0dGVkIG1vbnRoIGFzIGEgdGFibGUuCiAgICAgICAgIiIiCiAgICAgICAgdiA9IFtdCiAgICAgICAgYSA9IHYuYXBwZW5kCiAgICAgICAgYSgnPHRhYmxlIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBjbGFzcz0ibW9udGgiPicpCiAgICAgICAgYSgnXG4nKQogICAgICAgIGEoc2VsZi5mb3JtYXRtb250aG5hbWUodGhleWVhciwgdGhlbW9udGgsIHdpdGh5ZWFyPXdpdGh5ZWFyKSkKICAgICAgICBhKCdcbicpCiAgICAgICAgYShzZWxmLmZvcm1hdHdlZWtoZWFkZXIoKSkKICAgICAgICBhKCdcbicpCiAgICAgICAgZm9yIHdlZWsgaW4gc2VsZi5tb250aGRheXMyY2FsZW5kYXIodGhleWVhciwgdGhlbW9udGgpOgogICAgICAgICAgICBhKHNlbGYuZm9ybWF0d2Vlayh3ZWVrKSkKICAgICAgICAgICAgYSgnXG4nKQogICAgICAgIGEoJzwvdGFibGU+JykKICAgICAgICBhKCdcbicpCiAgICAgICAgcmV0dXJuICcnLmpvaW4odikKCiAgICBkZWYgZm9ybWF0eWVhcihzZWxmLCB0aGV5ZWFyLCB3aWR0aD0zKToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm4gYSBmb3JtYXR0ZWQgeWVhciBhcyBhIHRhYmxlIG9mIHRhYmxlcy4KICAgICAgICAiIiIKICAgICAgICB2ID0gW10KICAgICAgICBhID0gdi5hcHBlbmQKICAgICAgICB3aWR0aCA9IG1heCh3aWR0aCwgMSkKICAgICAgICBhKCc8dGFibGUgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIGNsYXNzPSJ5ZWFyIj4nKQogICAgICAgIGEoJ1xuJykKICAgICAgICBhKCc8dHI+PHRoIGNvbHNwYW49IiVkIiBjbGFzcz0ieWVhciI+JXM8L3RoPjwvdHI+JyAlICh3aWR0aCwgdGhleWVhcikpCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoSmFudWFyeSwgSmFudWFyeSsxMiwgd2lkdGgpOgogICAgICAgICAgICAjIG1vbnRocyBpbiB0aGlzIHJvdwogICAgICAgICAgICBtb250aHMgPSByYW5nZShpLCBtaW4oaSt3aWR0aCwgMTMpKQogICAgICAgICAgICBhKCc8dHI+JykKICAgICAgICAgICAgZm9yIG0gaW4gbW9udGhzOgogICAgICAgICAgICAgICAgYSgnPHRkPicpCiAgICAgICAgICAgICAgICBhKHNlbGYuZm9ybWF0bW9udGgodGhleWVhciwgbSwgd2l0aHllYXI9RmFsc2UpKQogICAgICAgICAgICAgICAgYSgnPC90ZD4nKQogICAgICAgICAgICBhKCc8L3RyPicpCiAgICAgICAgYSgnPC90YWJsZT4nKQogICAgICAgIHJldHVybiAnJy5qb2luKHYpCgogICAgZGVmIGZvcm1hdHllYXJwYWdlKHNlbGYsIHRoZXllYXIsIHdpZHRoPTMsIGNzcz0nY2FsZW5kYXIuY3NzJywgZW5jb2Rpbmc9Tm9uZSk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJuIGEgZm9ybWF0dGVkIHllYXIgYXMgYSBjb21wbGV0ZSBIVE1MIHBhZ2UuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZToKICAgICAgICAgICAgZW5jb2RpbmcgPSBzeXMuZ2V0ZGVmYXVsdGVuY29kaW5nKCkKICAgICAgICB2ID0gW10KICAgICAgICBhID0gdi5hcHBlbmQKICAgICAgICBhKCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSIlcyI/PlxuJyAlIGVuY29kaW5nKQogICAgICAgIGEoJzwhRE9DVFlQRSBodG1sIFBVQkxJQyAiLS8vVzNDLy9EVEQgWEhUTUwgMS4wIFN0cmljdC8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS1zdHJpY3QuZHRkIj5cbicpCiAgICAgICAgYSgnPGh0bWw+XG4nKQogICAgICAgIGEoJzxoZWFkPlxuJykKICAgICAgICBhKCc8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD0lcyIgLz5cbicgJSBlbmNvZGluZykKICAgICAgICBpZiBjc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGEoJzxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9IiVzIiAvPlxuJyAlIGNzcykKICAgICAgICBhKCc8dGl0bGU+Q2FsZW5kYXIgZm9yICVkPC90aXRsZT5cbicgJSB0aGV5ZWFyKQogICAgICAgIGEoJzwvaGVhZD5cbicpCiAgICAgICAgYSgnPGJvZHk+XG4nKQogICAgICAgIGEoc2VsZi5mb3JtYXR5ZWFyKHRoZXllYXIsIHdpZHRoKSkKICAgICAgICBhKCc8L2JvZHk+XG4nKQogICAgICAgIGEoJzwvaHRtbD5cbicpCiAgICAgICAgcmV0dXJuICcnLmpvaW4odikuZW5jb2RlKGVuY29kaW5nLCAieG1sY2hhcnJlZnJlcGxhY2UiKQoKCmNsYXNzIGRpZmZlcmVudF9sb2NhbGU6CiAgICBkZWYgX19pbml0X18oc2VsZiwgbG9jYWxlKToKICAgICAgICBzZWxmLmxvY2FsZSA9IGxvY2FsZQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgc2VsZi5vbGRsb2NhbGUgPSBfbG9jYWxlLmdldGxvY2FsZShfbG9jYWxlLkxDX1RJTUUpCiAgICAgICAgX2xvY2FsZS5zZXRsb2NhbGUoX2xvY2FsZS5MQ19USU1FLCBzZWxmLmxvY2FsZSkKCiAgICBkZWYgX19leGl0X18oc2VsZiwgKmFyZ3MpOgogICAgICAgIF9sb2NhbGUuc2V0bG9jYWxlKF9sb2NhbGUuTENfVElNRSwgc2VsZi5vbGRsb2NhbGUpCgoKY2xhc3MgTG9jYWxlVGV4dENhbGVuZGFyKFRleHRDYWxlbmRhcik6CiAgICAiIiIKICAgIFRoaXMgY2xhc3MgY2FuIGJlIHBhc3NlZCBhIGxvY2FsZSBuYW1lIGluIHRoZSBjb25zdHJ1Y3RvciBhbmQgd2lsbCByZXR1cm4KICAgIG1vbnRoIGFuZCB3ZWVrZGF5IG5hbWVzIGluIHRoZSBzcGVjaWZpZWQgbG9jYWxlLiBJZiB0aGlzIGxvY2FsZSBpbmNsdWRlcwogICAgYW4gZW5jb2RpbmcgYWxsIHN0cmluZ3MgY29udGFpbmluZyBtb250aCBhbmQgd2Vla2RheSBuYW1lcyB3aWxsIGJlIHJldHVybmVkCiAgICBhcyB1bmljb2RlLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZpcnN0d2Vla2RheT0wLCBsb2NhbGU9Tm9uZSk6CiAgICAgICAgVGV4dENhbGVuZGFyLl9faW5pdF9fKHNlbGYsIGZpcnN0d2Vla2RheSkKICAgICAgICBpZiBsb2NhbGUgaXMgTm9uZToKICAgICAgICAgICAgbG9jYWxlID0gX2xvY2FsZS5nZXRkZWZhdWx0bG9jYWxlKCkKICAgICAgICBzZWxmLmxvY2FsZSA9IGxvY2FsZQoKICAgIGRlZiBmb3JtYXR3ZWVrZGF5KHNlbGYsIGRheSwgd2lkdGgpOgogICAgICAgIHdpdGggZGlmZmVyZW50X2xvY2FsZShzZWxmLmxvY2FsZSk6CiAgICAgICAgICAgIGlmIHdpZHRoID49IDk6CiAgICAgICAgICAgICAgICBuYW1lcyA9IGRheV9uYW1lCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBuYW1lcyA9IGRheV9hYmJyCiAgICAgICAgICAgIG5hbWUgPSBuYW1lc1tkYXldCiAgICAgICAgICAgIHJldHVybiBuYW1lWzp3aWR0aF0uY2VudGVyKHdpZHRoKQoKICAgIGRlZiBmb3JtYXRtb250aG5hbWUoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHdpZHRoLCB3aXRoeWVhcj1UcnVlKToKICAgICAgICB3aXRoIGRpZmZlcmVudF9sb2NhbGUoc2VsZi5sb2NhbGUpOgogICAgICAgICAgICBzID0gbW9udGhfbmFtZVt0aGVtb250aF0KICAgICAgICAgICAgaWYgd2l0aHllYXI6CiAgICAgICAgICAgICAgICBzID0gIiVzICVyIiAlIChzLCB0aGV5ZWFyKQogICAgICAgICAgICByZXR1cm4gcy5jZW50ZXIod2lkdGgpCgoKY2xhc3MgTG9jYWxlSFRNTENhbGVuZGFyKEhUTUxDYWxlbmRhcik6CiAgICAiIiIKICAgIFRoaXMgY2xhc3MgY2FuIGJlIHBhc3NlZCBhIGxvY2FsZSBuYW1lIGluIHRoZSBjb25zdHJ1Y3RvciBhbmQgd2lsbCByZXR1cm4KICAgIG1vbnRoIGFuZCB3ZWVrZGF5IG5hbWVzIGluIHRoZSBzcGVjaWZpZWQgbG9jYWxlLiBJZiB0aGlzIGxvY2FsZSBpbmNsdWRlcwogICAgYW4gZW5jb2RpbmcgYWxsIHN0cmluZ3MgY29udGFpbmluZyBtb250aCBhbmQgd2Vla2RheSBuYW1lcyB3aWxsIGJlIHJldHVybmVkCiAgICBhcyB1bmljb2RlLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlyc3R3ZWVrZGF5PTAsIGxvY2FsZT1Ob25lKToKICAgICAgICBIVE1MQ2FsZW5kYXIuX19pbml0X18oc2VsZiwgZmlyc3R3ZWVrZGF5KQogICAgICAgIGlmIGxvY2FsZSBpcyBOb25lOgogICAgICAgICAgICBsb2NhbGUgPSBfbG9jYWxlLmdldGRlZmF1bHRsb2NhbGUoKQogICAgICAgIHNlbGYubG9jYWxlID0gbG9jYWxlCgogICAgZGVmIGZvcm1hdHdlZWtkYXkoc2VsZiwgZGF5KToKICAgICAgICB3aXRoIGRpZmZlcmVudF9sb2NhbGUoc2VsZi5sb2NhbGUpOgogICAgICAgICAgICBzID0gZGF5X2FiYnJbZGF5XQogICAgICAgICAgICByZXR1cm4gJzx0aCBjbGFzcz0iJXMiPiVzPC90aD4nICUgKHNlbGYuY3NzY2xhc3Nlc1tkYXldLCBzKQoKICAgIGRlZiBmb3JtYXRtb250aG5hbWUoc2VsZiwgdGhleWVhciwgdGhlbW9udGgsIHdpdGh5ZWFyPVRydWUpOgogICAgICAgIHdpdGggZGlmZmVyZW50X2xvY2FsZShzZWxmLmxvY2FsZSk6CiAgICAgICAgICAgIHMgPSBtb250aF9uYW1lW3RoZW1vbnRoXQogICAgICAgICAgICBpZiB3aXRoeWVhcjoKICAgICAgICAgICAgICAgIHMgPSAnJXMgJXMnICUgKHMsIHRoZXllYXIpCiAgICAgICAgICAgIHJldHVybiAnPHRyPjx0aCBjb2xzcGFuPSI3IiBjbGFzcz0ibW9udGgiPiVzPC90aD48L3RyPicgJSBzCgoKIyBTdXBwb3J0IGZvciBvbGQgbW9kdWxlIGxldmVsIGludGVyZmFjZQpjID0gVGV4dENhbGVuZGFyKCkKCmZpcnN0d2Vla2RheSA9IGMuZ2V0Zmlyc3R3ZWVrZGF5CgpkZWYgc2V0Zmlyc3R3ZWVrZGF5KGZpcnN0d2Vla2RheSk6CiAgICBpZiBub3QgTU9OREFZIDw9IGZpcnN0d2Vla2RheSA8PSBTVU5EQVk6CiAgICAgICAgcmFpc2UgSWxsZWdhbFdlZWtkYXlFcnJvcihmaXJzdHdlZWtkYXkpCiAgICBjLmZpcnN0d2Vla2RheSA9IGZpcnN0d2Vla2RheQoKbW9udGhjYWxlbmRhciA9IGMubW9udGhkYXlzY2FsZW5kYXIKcHJ3ZWVrID0gYy5wcndlZWsKd2VlayA9IGMuZm9ybWF0d2Vlawp3ZWVraGVhZGVyID0gYy5mb3JtYXR3ZWVraGVhZGVyCnBybW9udGggPSBjLnBybW9udGgKbW9udGggPSBjLmZvcm1hdG1vbnRoCmNhbGVuZGFyID0gYy5mb3JtYXR5ZWFyCnByY2FsID0gYy5wcnllYXIKCgojIFNwYWNpbmcgb2YgbW9udGggY29sdW1ucyBmb3IgbXVsdGktY29sdW1uIHllYXIgY2FsZW5kYXIKX2NvbHdpZHRoID0gNyozIC0gMSAgICAgICAgICMgQW1vdW50IHByaW50ZWQgYnkgcHJ3ZWVrKCkKX3NwYWNpbmcgPSA2ICAgICAgICAgICAgICAgICMgTnVtYmVyIG9mIHNwYWNlcyBiZXR3ZWVuIGNvbHVtbnMKCgpkZWYgZm9ybWF0KGNvbHMsIGNvbHdpZHRoPV9jb2x3aWR0aCwgc3BhY2luZz1fc3BhY2luZyk6CiAgICAiIiJQcmludHMgbXVsdGktY29sdW1uIGZvcm1hdHRpbmcgZm9yIHllYXIgY2FsZW5kYXJzIiIiCiAgICBwcmludChmb3JtYXRzdHJpbmcoY29scywgY29sd2lkdGgsIHNwYWNpbmcpKQoKCmRlZiBmb3JtYXRzdHJpbmcoY29scywgY29sd2lkdGg9X2NvbHdpZHRoLCBzcGFjaW5nPV9zcGFjaW5nKToKICAgICIiIlJldHVybnMgYSBzdHJpbmcgZm9ybWF0dGVkIGZyb20gbiBzdHJpbmdzLCBjZW50ZXJlZCB3aXRoaW4gbiBjb2x1bW5zLiIiIgogICAgc3BhY2luZyAqPSAnICcKICAgIHJldHVybiBzcGFjaW5nLmpvaW4oYy5jZW50ZXIoY29sd2lkdGgpIGZvciBjIGluIGNvbHMpCgoKRVBPQ0ggPSAxOTcwCl9FUE9DSF9PUkQgPSBkYXRldGltZS5kYXRlKEVQT0NILCAxLCAxKS50b29yZGluYWwoKQoKCmRlZiB0aW1lZ20odHVwbGUpOgogICAgIiIiVW5yZWxhdGVkIGJ1dCBoYW5keSBmdW5jdGlvbiB0byBjYWxjdWxhdGUgVW5peCB0aW1lc3RhbXAgZnJvbSBHTVQuIiIiCiAgICB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCA9IHR1cGxlWzo2XQogICAgZGF5cyA9IGRhdGV0aW1lLmRhdGUoeWVhciwgbW9udGgsIDEpLnRvb3JkaW5hbCgpIC0gX0VQT0NIX09SRCArIGRheSAtIDEKICAgIGhvdXJzID0gZGF5cyoyNCArIGhvdXIKICAgIG1pbnV0ZXMgPSBob3Vycyo2MCArIG1pbnV0ZQogICAgc2Vjb25kcyA9IG1pbnV0ZXMqNjAgKyBzZWNvbmQKICAgIHJldHVybiBzZWNvbmRzCgoKZGVmIG1haW4oYXJncyk6CiAgICBpbXBvcnQgb3B0cGFyc2UKICAgIHBhcnNlciA9IG9wdHBhcnNlLk9wdGlvblBhcnNlcih1c2FnZT0idXNhZ2U6ICVwcm9nIFtvcHRpb25zXSBbeWVhciBbbW9udGhdXSIpCiAgICBwYXJzZXIuYWRkX29wdGlvbigKICAgICAgICAiLXciLCAiLS13aWR0aCIsCiAgICAgICAgZGVzdD0id2lkdGgiLCB0eXBlPSJpbnQiLCBkZWZhdWx0PTIsCiAgICAgICAgaGVscD0id2lkdGggb2YgZGF0ZSBjb2x1bW4gKGRlZmF1bHQgMiwgdGV4dCBvbmx5KSIKICAgICkKICAgIHBhcnNlci5hZGRfb3B0aW9uKAogICAgICAgICItbCIsICItLWxpbmVzIiwKICAgICAgICBkZXN0PSJsaW5lcyIsIHR5cGU9ImludCIsIGRlZmF1bHQ9MSwKICAgICAgICBoZWxwPSJudW1iZXIgb2YgbGluZXMgZm9yIGVhY2ggd2VlayAoZGVmYXVsdCAxLCB0ZXh0IG9ubHkpIgogICAgKQogICAgcGFyc2VyLmFkZF9vcHRpb24oCiAgICAgICAgIi1zIiwgIi0tc3BhY2luZyIsCiAgICAgICAgZGVzdD0ic3BhY2luZyIsIHR5cGU9ImludCIsIGRlZmF1bHQ9NiwKICAgICAgICBoZWxwPSJzcGFjaW5nIGJldHdlZW4gbW9udGhzIChkZWZhdWx0IDYsIHRleHQgb25seSkiCiAgICApCiAgICBwYXJzZXIuYWRkX29wdGlvbigKICAgICAgICAiLW0iLCAiLS1tb250aHMiLAogICAgICAgIGRlc3Q9Im1vbnRocyIsIHR5cGU9ImludCIsIGRlZmF1bHQ9MywKICAgICAgICBoZWxwPSJtb250aHMgcGVyIHJvdyAoZGVmYXVsdCAzLCB0ZXh0IG9ubHkpIgogICAgKQogICAgcGFyc2VyLmFkZF9vcHRpb24oCiAgICAgICAgIi1jIiwgIi0tY3NzIiwKICAgICAgICBkZXN0PSJjc3MiLCBkZWZhdWx0PSJjYWxlbmRhci5jc3MiLAogICAgICAgIGhlbHA9IkNTUyB0byB1c2UgZm9yIHBhZ2UgKGh0bWwgb25seSkiCiAgICApCiAgICBwYXJzZXIuYWRkX29wdGlvbigKICAgICAgICAiLUwiLCAiLS1sb2NhbGUiLAogICAgICAgIGRlc3Q9ImxvY2FsZSIsIGRlZmF1bHQ9Tm9uZSwKICAgICAgICBoZWxwPSJsb2NhbGUgdG8gYmUgdXNlZCBmcm9tIG1vbnRoIGFuZCB3ZWVrZGF5IG5hbWVzIgogICAgKQogICAgcGFyc2VyLmFkZF9vcHRpb24oCiAgICAgICAgIi1lIiwgIi0tZW5jb2RpbmciLAogICAgICAgIGRlc3Q9ImVuY29kaW5nIiwgZGVmYXVsdD1Ob25lLAogICAgICAgIGhlbHA9IkVuY29kaW5nIHRvIHVzZSBmb3Igb3V0cHV0LiIKICAgICkKICAgIHBhcnNlci5hZGRfb3B0aW9uKAogICAgICAgICItdCIsICItLXR5cGUiLAogICAgICAgIGRlc3Q9InR5cGUiLCBkZWZhdWx0PSJ0ZXh0IiwKICAgICAgICBjaG9pY2VzPSgidGV4dCIsICJodG1sIiksCiAgICAgICAgaGVscD0ib3V0cHV0IHR5cGUgKHRleHQgb3IgaHRtbCkiCiAgICApCgogICAgKG9wdGlvbnMsIGFyZ3MpID0gcGFyc2VyLnBhcnNlX2FyZ3MoYXJncykKCiAgICBpZiBvcHRpb25zLmxvY2FsZSBhbmQgbm90IG9wdGlvbnMuZW5jb2Rpbmc6CiAgICAgICAgcGFyc2VyLmVycm9yKCJpZiAtLWxvY2FsZSBpcyBzcGVjaWZpZWQgLS1lbmNvZGluZyBpcyByZXF1aXJlZCIpCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZSwgb3B0aW9ucy5lbmNvZGluZwoKICAgIGlmIG9wdGlvbnMudHlwZSA9PSAiaHRtbCI6CiAgICAgICAgaWYgb3B0aW9ucy5sb2NhbGU6CiAgICAgICAgICAgIGNhbCA9IExvY2FsZUhUTUxDYWxlbmRhcihsb2NhbGU9bG9jYWxlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNhbCA9IEhUTUxDYWxlbmRhcigpCiAgICAgICAgZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nCiAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZToKICAgICAgICAgICAgZW5jb2RpbmcgPSBzeXMuZ2V0ZGVmYXVsdGVuY29kaW5nKCkKICAgICAgICBvcHRkaWN0ID0gZGljdChlbmNvZGluZz1lbmNvZGluZywgY3NzPW9wdGlvbnMuY3NzKQogICAgICAgIHdyaXRlID0gc3lzLnN0ZG91dC5idWZmZXIud3JpdGUKICAgICAgICBpZiBsZW4oYXJncykgPT0gMToKICAgICAgICAgICAgd3JpdGUoY2FsLmZvcm1hdHllYXJwYWdlKGRhdGV0aW1lLmRhdGUudG9kYXkoKS55ZWFyLCAqKm9wdGRpY3QpKQogICAgICAgIGVsaWYgbGVuKGFyZ3MpID09IDI6CiAgICAgICAgICAgIHdyaXRlKGNhbC5mb3JtYXR5ZWFycGFnZShpbnQoYXJnc1sxXSksICoqb3B0ZGljdCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGFyc2VyLmVycm9yKCJpbmNvcnJlY3QgbnVtYmVyIG9mIGFyZ3VtZW50cyIpCiAgICAgICAgICAgIHN5cy5leGl0KDEpCiAgICBlbHNlOgogICAgICAgIGlmIG9wdGlvbnMubG9jYWxlOgogICAgICAgICAgICBjYWwgPSBMb2NhbGVUZXh0Q2FsZW5kYXIobG9jYWxlPWxvY2FsZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjYWwgPSBUZXh0Q2FsZW5kYXIoKQogICAgICAgIG9wdGRpY3QgPSBkaWN0KHc9b3B0aW9ucy53aWR0aCwgbD1vcHRpb25zLmxpbmVzKQogICAgICAgIGlmIGxlbihhcmdzKSAhPSAzOgogICAgICAgICAgICBvcHRkaWN0WyJjIl0gPSBvcHRpb25zLnNwYWNpbmcKICAgICAgICAgICAgb3B0ZGljdFsibSJdID0gb3B0aW9ucy5tb250aHMKICAgICAgICBpZiBsZW4oYXJncykgPT0gMToKICAgICAgICAgICAgcmVzdWx0ID0gY2FsLmZvcm1hdHllYXIoZGF0ZXRpbWUuZGF0ZS50b2RheSgpLnllYXIsICoqb3B0ZGljdCkKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAyOgogICAgICAgICAgICByZXN1bHQgPSBjYWwuZm9ybWF0eWVhcihpbnQoYXJnc1sxXSksICoqb3B0ZGljdCkKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAzOgogICAgICAgICAgICByZXN1bHQgPSBjYWwuZm9ybWF0bW9udGgoaW50KGFyZ3NbMV0pLCBpbnQoYXJnc1syXSksICoqb3B0ZGljdCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwYXJzZXIuZXJyb3IoImluY29ycmVjdCBudW1iZXIgb2YgYXJndW1lbnRzIikKICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgICAgICB3cml0ZSA9IHN5cy5zdGRvdXQud3JpdGUKICAgICAgICBpZiBvcHRpb25zLmVuY29kaW5nOgogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuZW5jb2RlKG9wdGlvbnMuZW5jb2RpbmcpCiAgICAgICAgICAgIHdyaXRlID0gc3lzLnN0ZG91dC5idWZmZXIud3JpdGUKICAgICAgICB3cml0ZShyZXN1bHQpCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oc3lzLmFyZ3YpCg==',
'/Lib/markdown.py':'aW1wb3J0IGh0bWwKaW1wb3J0IHJlCgpjbGFzcyBVUkw6CiAgICBkZWYgX19pbml0X18oc2VsZixzcmMpOgogICAgICAgIGVsdHMgPSBzcmMuc3BsaXQobWF4c3BsaXQ9MSkKICAgICAgICBzZWxmLmhyZWYgPSBlbHRzWzBdCiAgICAgICAgc2VsZi5hbHQgPSAnJwogICAgICAgIGlmIGxlbihlbHRzKT09MjoKICAgICAgICAgICAgYWx0ID0gZWx0c1sxXQogICAgICAgICAgICBpZiBhbHRbMF09PSciJyBhbmQgYWx0Wy0xXT09JyInOnNlbGYuYWx0PWFsdFsxOi0xXQogICAgICAgICAgICBlbGlmIGFsdFswXT09IiciIGFuZCBhbHRbLTFdPT0iJyI6c2VsZi5hbHQ9YWx0WzE6LTFdCiAgICAgICAgICAgIGVsaWYgYWx0WzBdPT0iKCIgYW5kIGFsdFstMV09PSIpIjpzZWxmLmFsdD1hbHRbMTotMV0KICAgICAgICAKY2xhc3MgQ29kZUJsb2NrOgogICAgZGVmIF9faW5pdF9fKHNlbGYsbGluZSk6CiAgICAgICAgc2VsZi5saW5lcyA9IFtsaW5lXQogICAgCiAgICBkZWYgdG9faHRtbChzZWxmKToKICAgICAgICByZXMgPSBlc2NhcGUoJ1xuJy5qb2luKHNlbGYubGluZXMpKQogICAgICAgIHJlcyA9IHVubWFyayhyZXMpCiAgICAgICAgcmVzID0gJzxwcmUgY2xhc3M9Im1hcmtlZCI+JXM8L3ByZT5cbicgJXJlcwogICAgICAgIHJldHVybiByZXMsW10KCmNsYXNzIE1hcmtlZDoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLmxpbmVzID0gW10KICAgICAgICBzZWxmLmNoaWxkcmVuID0gW10KCiAgICBkZWYgdG9faHRtbChzZWxmKToKICAgICAgICByZXR1cm4gYXBwbHlfbWFya2Rvd24oJ1xuJy5qb2luKHNlbGYubGluZXMpKQogICAgICAgIAojIGdldCByZWZlcmVuY2VzCnJlZnMgPSB7fQpyZWZfcGF0dGVybiA9IHIiXlxbKC4qKVxdOlxzKyguKikiCgpkZWYgbWFyayhzcmMpOgoKICAgIGdsb2JhbCByZWZzCiAgICByZWZzID0ge30KICAgICMgc3BsaXQgc291cmNlIGluIHNlY3Rpb25zCiAgICAjIHNlY3Rpb25zIGNhbiBiZSA6CiAgICAjIC0gYSBibG9jay1sZXZlbCBIVE1MIGVsZW1lbnQgKG1hcmtkb3duIHN5bnRheCB3aWxsIG5vdCBiZSBwcm9jZXNzZWQpCiAgICAjIC0gYSBzY3JpcHQKICAgICMgLSBhIHNwYW4tbGV2ZWwgSFRNTCB0YWcgKG1hcmtkb3duIHN5bnRheCB3aWxsIGJlIHByb2Nlc3NlZCkKICAgICMgLSBhIGNvZGUgYmxvY2sKICAgIAogICAgbGluZXMgPSBzcmMuc3BsaXQoJ1xuJykKICAgIAogICAgc2VjdGlvbnMgPSBbXQogICAgc2NyaXB0cyA9IFtdCiAgICBzZWN0aW9uID0gTWFya2VkKCkKCiAgICBpID0gMAogICAgd2hpbGUgaTxsZW4obGluZXMpOgogICAgICAgIGxpbmUgPSBsaW5lc1tpXQogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VjdGlvbixNYXJrZWQpOgogICAgICAgICAgICBpZiBsaW5lLmxvd2VyKCkuc3RhcnRzd2l0aCgnPHNjcmlwdCcpOgogICAgICAgICAgICAgICAgaiA9IGkrMQogICAgICAgICAgICAgICAgd2hpbGUgajxsZW4obGluZXMpOgogICAgICAgICAgICAgICAgICAgIGlmIGxpbmVzW2pdLmxvd2VyKCkuc3RhcnRzd2l0aCgnPC9zY3JpcHQ+Jyk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdHMuYXBwZW5kKCdcbicuam9pbihsaW5lc1tpKzE6al0pKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgayBpbiByYW5nZShpLGorMSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lc1trXSA9ICcnCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgaiArPSAxCiAgICAgICAgICAgICAgICBpID0gaisxCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBsaW5lLnN0cmlwKCkgYW5kIGxpbmUuc3RhcnRzd2l0aCgnICAgICcpOgogICAgICAgICAgICAgICAgaWYgc2VjdGlvbi5saW5lczoKICAgICAgICAgICAgICAgICAgICBzZWN0aW9ucy5hcHBlbmQoc2VjdGlvbikKICAgICAgICAgICAgICAgIHNlY3Rpb24gPSBDb2RlQmxvY2sobGluZVs0Ol0pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBtbyA9IHJlLnNlYXJjaChyZWZfcGF0dGVybixsaW5lKQogICAgICAgICAgICAgICAgaWYgbW8gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAga2V5ID0gbW8uZ3JvdXBzKClbMF0KICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFVSTChtby5ncm91cHMoKVsxXSkKICAgICAgICAgICAgICAgICAgICByZWZzW2tleS5sb3dlcigpXSA9IHZhbHVlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ubGluZXMuYXBwZW5kKGxpbmUpCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHNlY3Rpb24sQ29kZUJsb2NrKToKICAgICAgICAgICAgaWYgbGluZS5zdGFydHN3aXRoKCcgICAgJykgb3Igbm90IGxpbmUuc3RyaXAoKToKICAgICAgICAgICAgICAgIHNlY3Rpb24ubGluZXMuYXBwZW5kKGxpbmVbNDpdKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VjdGlvbnMuYXBwZW5kKHNlY3Rpb24pCiAgICAgICAgICAgICAgICBzZWN0aW9uID0gTWFya2VkKCkgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZWN0aW9uLmxpbmVzLmFwcGVuZChsaW5lKQogICAgICAgIGkgKz0gMQogICAgaWYgc2VjdGlvbi5saW5lczoKICAgICAgICBzZWN0aW9ucy5hcHBlbmQoc2VjdGlvbikKCiAgICByZXMgPSAnJwogICAgZm9yIHNlY3Rpb24gaW4gc2VjdGlvbnM6CiAgICAgICAgbWssX3NjcmlwdHMgPSBzZWN0aW9uLnRvX2h0bWwoKQogICAgICAgIHJlcyArPSBtawogICAgICAgIHNjcmlwdHMgKz0gX3NjcmlwdHMKICAgIHJldHVybiByZXMsc2NyaXB0cwoKZGVmIGVzY2FwZShjem9uZSk6CiAgICBjem9uZSA9IGN6b25lLnJlcGxhY2UoJyYnLCcmYW1wOycpCiAgICBjem9uZSA9IGN6b25lLnJlcGxhY2UoJzwnLCcmbHQ7JykKICAgIGN6b25lID0gY3pvbmUucmVwbGFjZSgnPicsJyZndDsnKQogICAgcmV0dXJuIGN6b25lCgpkZWYgc19lc2NhcGUobW8pOgogICAgIyB1c2VkIGluIHJlLnN1YgogICAgY3pvbmUgPSBtby5zdHJpbmdbbW8uc3RhcnQoKTptby5lbmQoKV0KICAgIHJldHVybiBlc2NhcGUoY3pvbmUpCgpkZWYgdW5tYXJrKGNvZGVfem9uZSk6CiAgICAjIGNvbnZlcnQgXyB0byAmIzk1OyBpbnNpZGUgaW5saW5lIGNvZGUKICAgIGNvZGVfem9uZSA9IGNvZGVfem9uZS5yZXBsYWNlKCdfJywnJiM5NTsnKQogICAgcmV0dXJuIGNvZGVfem9uZQoKZGVmIHNfdW5tYXJrKG1vKToKICAgICMgY29udmVydCBfIHRvICYjOTU7IGluc2lkZSBpbmxpbmUgY29kZQogICAgY29kZV96b25lID0gbW8uc3RyaW5nW21vLnN0YXJ0KCk6bW8uZW5kKCldCiAgICBjb2RlX3pvbmUgPSBjb2RlX3pvbmUucmVwbGFjZSgnXycsJyYjOTU7JykKICAgIHJldHVybiBjb2RlX3pvbmUKCmRlZiBhcHBseV9tYXJrZG93bihzcmMpOgoKICAgIHNjcmlwdHMgPSBbXQoKICAgICMgYmxvY2txdW90ZXMKICAgIGxpbmVzID0gc3JjLnNwbGl0KCdcbicpCiAgICB3aGlsZSBUcnVlOgogICAgICAgIG5iID0gMAogICAgICAgIGkgPSAwCiAgICAgICAgd2hpbGUgaTxsZW4obGluZXMpOgogICAgICAgICAgICBpZiBsaW5lc1tpXS5zdGFydHN3aXRoKCc+Jyk6CiAgICAgICAgICAgICAgICBoZWFkID0gJ1xuJy5qb2luKGxpbmVzWzppXSkKICAgICAgICAgICAgICAgIGJxbGluZXMgPSBbXQogICAgICAgICAgICAgICAgbmIgKz0gMQogICAgICAgICAgICAgICAgcmVzdCA9IGxpbmVzW2ldWzE6XQogICAgICAgICAgICAgICAgaWYgcmVzdC5sc3RyaXAoKS5zdGFydHN3aXRoKCc+Jyk6CiAgICAgICAgICAgICAgICAgICAgcmVzdCA9IHJlc3QubHN0cmlwKCkKICAgICAgICAgICAgICAgIGJxbGluZXMuYXBwZW5kKHJlc3QpCiAgICAgICAgICAgICAgICBqID0gaSsxCiAgICAgICAgICAgICAgICB3aGlsZSBqPGxlbihsaW5lcyk6CiAgICAgICAgICAgICAgICAgICAgaWYgbGluZXNbal0uc3RhcnRzd2l0aCgnPicpOgogICAgICAgICAgICAgICAgICAgICAgICByZXN0ID0gbGluZXNbal1bMTpdCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlc3QubHN0cmlwKCkuc3RhcnRzd2l0aCgnPicpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdCA9IHJlc3QubHN0cmlwKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnFsaW5lcy5hcHBlbmQocmVzdCkKICAgICAgICAgICAgICAgICAgICAgICAgaiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxpZiBsaW5lc1tqXS5zdHJpcCgpIGFuZCBsaW5lc1tqXVswXSE9JyAnOgogICAgICAgICAgICAgICAgICAgICAgICBicWxpbmVzLmFwcGVuZChsaW5lc1tqXSkKICAgICAgICAgICAgICAgICAgICAgICAgaiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICMgYnFsaW5lcyBob2xkcyB0aGUgbGluZXMgaW4gdGhlIGJsb2NrcXVvdGUsIHN0cmlwcGVkIG9mCiAgICAgICAgICAgICAgICAjIHRoZSBsZWFkaW5nID4KICAgICAgICAgICAgICAgICMgd2UgYXBwbHkgdGhlIHdob2xlIG1hcmtkb3duIHByb2Nlc3MgdG8gdGhlc2UgbGluZXMKICAgICAgICAgICAgICAgIG1rLF9zY3JpcHRzID0gbWFyaygnXG4nLmpvaW4oYnFsaW5lcykpCiAgICAgICAgICAgICAgICBzY3JpcHRzICs9IF9zY3JpcHRzCiAgICAgICAgICAgICAgICBzcmMgPSBoZWFkCiAgICAgICAgICAgICAgICBzcmMgKz0gJ1xuPGJsb2NrcXVvdGU+JyArIG1rICsgJzwvYmxvY2txdW90ZT4nCiAgICAgICAgICAgICAgICBzcmMgKz0gJ1xuJy5qb2luKGxpbmVzW2o6XSkKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGkgKz0gMQogICAgICAgIGlmIG5iPT0wOmJyZWFrCiAgICAgICAgbGluZXMgPSBzcmMuc3BsaXRsaW5lcygpCgogICAgIyByZXBsYWNlIFxgIGJ5ICYjOTY7CiAgICBzcmMgPSByZS5zdWIocidcXFxgJywnJiM5NjsnLHNyYykKCiAgICAjIGVzY2FwZSA8ID4gJiBpbiBpbmxpbmUgY29kZQogICAgY29kZV9wYXR0ZXJuID0gcidcYChcUy4qP1xTKVxgJwogICAgc3JjID0gcmUuc3ViKGNvZGVfcGF0dGVybixzX2VzY2FwZSxzcmMpCiAgICAjIGFsc28gY29udmVydCBfCiAgICBzcmMgPSByZS5zdWIoY29kZV9wYXR0ZXJuLHNfdW5tYXJrLHNyYykKICAgIAogICAgIyBpbmxpbmUgbGlua3MKICAgIGxpbmtfcGF0dGVybjEgPSByJ1xbKC4rPylcXVxzP1woKC4rPylcKScKICAgIGRlZiByZXBsKG1vKToKICAgICAgICBnMSxnMiA9IG1vLmdyb3VwcygpCiAgICAgICAgZzIgPSByZS5zdWIoJ18nLCcmIzk1OycsZzIpCiAgICAgICAgcmV0dXJuICc8YSBocmVmPSIlcyI+JXM8L2E+JyAlKGcyLGcxKQogICAgc3JjID0gcmUuc3ViKGxpbmtfcGF0dGVybjEscmVwbCxzcmMpCgogICAgIyByZWZlcmVuY2UgbGlua3MKICAgIGxpbmtfcGF0dGVybjIgPSByJ1xbKC4rPylcXVxzP1xbKC4qPylcXScKICAgIHdoaWxlIFRydWU6CiAgICAgICAgbW8gPSByZS5zZWFyY2gobGlua19wYXR0ZXJuMixzcmMpCiAgICAgICAgaWYgbW8gaXMgTm9uZTpicmVhawogICAgICAgIHRleHQsa2V5ID0gbW8uZ3JvdXBzKCkKICAgICAgICBwcmludCh0ZXh0LGtleSkKICAgICAgICBpZiBub3Qga2V5OmtleT10ZXh0ICMgaW1wbGljaXQgbGluayBuYW1lCiAgICAgICAgaWYga2V5Lmxvd2VyKCkgbm90IGluIHJlZnM6CiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKCd1bmtub3cgcmVmZXJlbmNlICVzJyAla2V5KQogICAgICAgIHVybCA9IHJlZnNba2V5Lmxvd2VyKCldCiAgICAgICAgcmVwbCA9ICc8YSBocmVmPSInK3VybC5ocmVmKyciJwogICAgICAgIGlmIHVybC5hbHQ6CiAgICAgICAgICAgIHJlcGwgKz0gJyB0aXRsZT0iJyt1cmwuYWx0KyciJwogICAgICAgIHJlcGwgKz0gJz4lczwvYT4nICV0ZXh0CiAgICAgICAgc3JjID0gcmUuc3ViKGxpbmtfcGF0dGVybjIscmVwbCxzcmMsY291bnQ9MSkKCiAgICAjIGVtcGhhc2lzCgogICAgIyByZXBsYWNlIFwqIGJ5ICYjNDI7CiAgICBzcmMgPSByZS5zdWIocidcXFwqJywnJiM0MjsnLHNyYykKICAgICMgcmVwbGFjZSBcXyBieSAmIzk1OwogICAgc3JjID0gcmUuc3ViKHInXFxcXycsJyYjOTU7JyxzcmMpCiAgICAjIF8gYW5kICogc3Vycm91bmRlZCBieSBzcGFjZXMgYXJlIG5vdCBtYXJrdXAKICAgIHNyYyA9IHJlLnN1YihyJyBfICcsJyAmIzk1OyAnLHNyYykKICAgIHNyYyA9IHJlLnN1YihyJyBcKiAnLCcgJiM0MjsgJyxzcmMpCgogICAgc3Ryb25nX3BhdHRlcm5zID0gWygnU1RST05HJyxyJ1wqXCooLio/KVwqXConKSwoJ0InLHInX18oLio/KV9fJyldCiAgICBmb3IgdGFnLHN0cm9uZ19wYXR0ZXJuIGluIHN0cm9uZ19wYXR0ZXJuczoKICAgICAgICBzcmMgPSByZS5zdWIoc3Ryb25nX3BhdHRlcm4scic8JXM+XDE8LyVzPicgJSh0YWcsdGFnKSxzcmMpCgogICAgZW1fcGF0dGVybnMgPSBbKCdFTScscidcKiguKj8pXConKSwoJ0knLHInXF8oLio/KVxfJyldCiAgICBmb3IgdGFnLGVtX3BhdHRlcm4gaW4gZW1fcGF0dGVybnM6CiAgICAgICAgc3JjID0gcmUuc3ViKGVtX3BhdHRlcm4scic8JXM+XDE8LyVzPicgJSh0YWcsdGFnKSxzcmMpCgogICAgIyBpbmxpbmUgY29kZQogICAgIyByZXBsYWNlIFxgIGJ5ICYjOTY7CiAgICBzcmMgPSByZS5zdWIocidcXFxgJywnJiM5NjsnLHNyYykKCiAgICBjb2RlX3BhdHRlcm4gPSByJ1xgKC4qPylcYCcKICAgIHNyYyA9IHJlLnN1Yihjb2RlX3BhdHRlcm4scic8Y29kZT5cMTwvY29kZT4nLHNyYykKCiAgICAjIHVub3JkZXJlZCBsaXN0cwogICAgbGluZXMgPSBzcmMuc3BsaXQoJ1xuJykKICAgIHdoaWxlIFRydWU6CiAgICAgICAgbmIgPSAwCiAgICAgICAgaSA9IDAKICAgICAgICB3aGlsZSBpPGxlbihsaW5lcyk6CiAgICAgICAgICAgIG1vID0gcmUuc2VhcmNoKHInXiggKlsrKi1dKScsbGluZXNbaV0pCiAgICAgICAgICAgIGlmIG1vOgogICAgICAgICAgICAgICAgc3RhcnRlciA9IG1vLmdyb3VwcygpWzBdCiAgICAgICAgICAgICAgICBpZiBub3QgbGluZXNbaV0uc3RyaXAoc3RhcnRlcik6CiAgICAgICAgICAgICAgICAgICAgaSArPSAxCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIG5iICs9IDEKICAgICAgICAgICAgICAgIGxpbmVzW2ldID0gJzx1bD5cbjxsaT4nK2xpbmVzW2ldW2xlbihzdGFydGVyKTpdCiAgICAgICAgICAgICAgICBqID0gaSsxCiAgICAgICAgICAgICAgICB3aGlsZSBqPGxlbihsaW5lcyk6CiAgICAgICAgICAgICAgICAgICAgaWYgbGluZXNbal0uc3RhcnRzd2l0aChzdGFydGVyKToKICAgICAgICAgICAgICAgICAgICAgICAgbGluZXNbal0gPSAnPGxpPicrbGluZXNbal1bbGVuKHN0YXJ0ZXIpOl0KICAgICAgICAgICAgICAgICAgICAgICAgaiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxpZiBsaW5lc1tqXS5zdGFydHN3aXRoKCcgJykgYW5kIGxpbmVzW2pdLmxzdHJpcCgpLnN0YXJ0c3dpdGgoc3RhcnRlcik6CiAgICAgICAgICAgICAgICAgICAgICAgIGogKz0gMQogICAgICAgICAgICAgICAgICAgIGVsaWYgbm90IGxpbmVzW2pdLnN0cmlwKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIGorPTEKICAgICAgICAgICAgICAgICAgICBlbGlmIGxpbmVzW2pdLnN0YXJ0c3dpdGgoJyAnKmxlbihzdGFydGVyKSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGorPTEKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgbGluZXNbai0xXSArPSAnXG48L3VsPicKICAgICAgICAgICAgaSArPSAxCiAgICAgICAgc3JjID0gJ1xuJy5qb2luKGxpbmVzKQogICAgICAgIGlmIG5iPT0wOmJyZWFrCiAgICAgICAgbGluZXMgPSBzcmMuc3BsaXRsaW5lcygpCgogICAgIyBvcmRlcmVkIGxpc3RzCiAgICBsaW5lcyA9IHNyYy5zcGxpdCgnXG4nKQogICAgd2hpbGUgVHJ1ZToKICAgICAgICBuYiA9IDAKICAgICAgICBpID0gMAogICAgICAgIHdoaWxlIGk8bGVuKGxpbmVzKToKICAgICAgICAgICAgaWYgcmUuc2VhcmNoKHInXlxkK1wuJyxsaW5lc1tpXSk6CiAgICAgICAgICAgICAgICBuYiArPSAxCiAgICAgICAgICAgICAgICBsaW5lc1tpXSA9ICc8b2w+XG48bGk+JytsaW5lc1tpXVtsaW5lc1tpXS5maW5kKCcuJykrMTpdCiAgICAgICAgICAgICAgICBqID0gaSsxCiAgICAgICAgICAgICAgICB3aGlsZSBqPGxlbihsaW5lcyk6CiAgICAgICAgICAgICAgICAgICAgaWYgcmUuc2VhcmNoKHInXlxkK1wuJyxsaW5lc1tqXSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzW2pdID0gJzxsaT4nK2xpbmVzW2pdW2xpbmVzW2pdLmZpbmQoJy4nKSsxOl0KICAgICAgICAgICAgICAgICAgICAgICAgaiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGxpbmVzW2otMV0gKz0gJ1xuPC9vbD4nCiAgICAgICAgICAgIGkgKz0gMQogICAgICAgIHNyYyA9ICdcbicuam9pbihsaW5lcykKICAgICAgICBpZiBuYj09MDpicmVhawogICAgICAgIGxpbmVzID0gc3JjLnNwbGl0bGluZXMoKQoKICAgICMgaGVhZGVycwogICAgaSA9IDEKICAgIHdoaWxlIGk8bGVuKGxpbmVzKToKICAgICAgICBsaW5lID0gbGluZXNbaV0KICAgICAgICBpZiBsaW5lLnN0YXJ0c3dpdGgoJz0nKSBhbmQgbm90IGxpbmUuc3RyaXAoJz0nKS5zdHJpcCgpOgogICAgICAgICAgICBsaW5lc1tpLTFdID0gJzxIMT4lczwvSDE+JyAlbGluZXNbaS0xXQogICAgICAgICAgICBkZWwgbGluZXNbaV0KICAgICAgICBlbGlmIGxpbmUuc3RhcnRzd2l0aCgnLScpIGFuZCBub3QgbGluZS5zdHJpcCgnLScpLnN0cmlwKCk6CiAgICAgICAgICAgIGxpbmVzW2ktMV0gPSAnPEgyPiVzPC9IMj4nICVsaW5lc1tpLTFdCiAgICAgICAgICAgIGRlbCBsaW5lc1tpXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGkgKz0gMQogICAgICAgICAgIAogICAgYXR4X2hlYWRlcl9wYXR0ZXJuID0gJ14oIyspKC4qKSgjKiknCiAgICBmb3IgaSxsaW5lIGluIGVudW1lcmF0ZShsaW5lcyk6CiAgICAgICAgbW8gPSByZS5zZWFyY2goYXR4X2hlYWRlcl9wYXR0ZXJuLGxpbmUpCiAgICAgICAgaWYgbm90IG1vOmNvbnRpbnVlCiAgICAgICAgbGV2ZWwgPSBsZW4obW8uZ3JvdXBzKClbMF0pCiAgICAgICAgbGluZXNbaV0gPSByZS5zdWIoYXR4X2hlYWRlcl9wYXR0ZXJuLAogICAgICAgICAgICAnPEglcz4lczwvSCVzPlxuJyAlKGxldmVsLG1vLmdyb3VwcygpWzFdLGxldmVsKSwKICAgICAgICAgICAgbGluZSxjb3VudD0xKQoKICAgIHNyYyA9ICdcbicuam9pbihsaW5lcykgICAgICAKICAgIHNyYyA9IHJlLnN1YignXG5cbisnLCdcbjxwPicsc3JjKSsnXG4nCgogICAgcmV0dXJuIHNyYyxzY3JpcHRzCg==',
'/Lib/_functools.py':'ZGVmIHBhcnRpYWwoZnVuYywgKmFyZ3MsICoqa2V5d29yZHMpOgogICAgZGVmIG5ld2Z1bmMoKmZhcmdzLCAqKmZrZXl3b3Jkcyk6CiAgICAgICAgbmV3a2V5d29yZHMgPSBrZXl3b3Jkcy5jb3B5KCkKICAgICAgICBuZXdrZXl3b3Jkcy51cGRhdGUoZmtleXdvcmRzKQogICAgICAgIHJldHVybiBmdW5jKCooYXJncyArIGZhcmdzKSwgKipuZXdrZXl3b3JkcykKICAgIG5ld2Z1bmMuZnVuYyA9IGZ1bmMKICAgIG5ld2Z1bmMuYXJncyA9IGFyZ3MKICAgIG5ld2Z1bmMua2V5d29yZHMgPSBrZXl3b3JkcwogICAgcmV0dXJuIG5ld2Z1bmMKCmRlZiByZWR1Y2UoZnVuYyxpdGVyYWJsZSxpbml0aWFsaXplcj1Ob25lKToKICAgIGFyZ3MgPSBpdGVyKGl0ZXJhYmxlKQogICAgaWYgaW5pdGlhbGl6ZXIgaXMgbm90IE5vbmU6CiAgICAgICAgcmVzID0gaW5pdGlhbGl6ZXIKICAgIGVsc2U6CiAgICAgICAgcmVzID0gbmV4dChhcmcpCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzID0gZnVuYyhyZXMsbmV4dChhcmdzKSkKICAgICAgICBleGNlcHQgU3RvcEl0ZXJhdGlvbjoKICAgICAgICAgICAgcmV0dXJuIHJlcwoKZGVmIGNtcF90b19rZXkoZnVuYyk6CiAgICAiIiJUcmFuc2Zvcm0gYW4gb2xkLXN0eWxlIGNvbXBhcmlzb24gZnVuY3Rpb24gdG8gYSBrZXkgZnVuY3Rpb24uIAogICAgCiAgICBBIGNvbXBhcmlzb24gZnVuY3Rpb24gaXMgYW55IGNhbGxhYmxlIHRoYXQgYWNjZXB0IHR3byBhcmd1bWVudHMsIAogICAgY29tcGFyZXMgdGhlbSwgYW5kIHJldHVybnMgYSBuZWdhdGl2ZSBudW1iZXIgZm9yIGxlc3MtdGhhbiwgemVybyBmb3IgCiAgICBlcXVhbGl0eSwgb3IgYSBwb3NpdGl2ZSBudW1iZXIgZm9yIGdyZWF0ZXItdGhhbi4gQSBrZXkgZnVuY3Rpb24gaXMgYSAKICAgIGNhbGxhYmxlIHRoYXQgYWNjZXB0cyBvbmUgYXJndW1lbnQgYW5kIHJldHVybnMgYW5vdGhlciB2YWx1ZSBpbmRpY2F0aW5nIAogICAgdGhlIHBvc2l0aW9uIGluIHRoZSBkZXNpcmVkIGNvbGxhdGlvbiBzZXF1ZW5jZS4iIiIKCiAgICAjIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYzNjI3NDQvaG93LWRvZXMtcHl0aG9ucy1jbXAtdG8ta2V5LWZ1bmN0aW9uLXdvcmsKICAgICMgYnkgTWFydGlqbiBQaWV0ZXJzCiAgICBjbGFzcyBLOgogICAgICAgIF9fc2xvdHNfXyA9IFsnb2JqJ10KICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgb2JqLCAqYXJncyk6CiAgICAgICAgICAgIHNlbGYub2JqID0gb2JqCiAgICAgICAgZGVmIF9fbHRfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgICAgIHJldHVybiBteWNtcChzZWxmLm9iaiwgb3RoZXIub2JqKSA8IDAKICAgICAgICBkZWYgX19ndF9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopID4gMAogICAgICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgICAgICByZXR1cm4gbXljbXAoc2VsZi5vYmosIG90aGVyLm9iaikgPT0gMAogICAgICAgIGRlZiBfX2xlX18oc2VsZiwgb3RoZXIpOgogICAgICAgICAgICByZXR1cm4gbXljbXAoc2VsZi5vYmosIG90aGVyLm9iaikgPD0gMAogICAgICAgIGRlZiBfX2dlX18oc2VsZiwgb3RoZXIpOgogICAgICAgICAgICByZXR1cm4gbXljbXAoc2VsZi5vYmosIG90aGVyLm9iaikgPj0gMAogICAgICAgIGRlZiBfX25lX18oc2VsZiwgb3RoZXIpOgogICAgICAgICAgICByZXR1cm4gbXljbXAoc2VsZi5vYmosIG90aGVyLm9iaikgIT0gMAogICAgICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdoYXNoIG5vdCBpbXBsZW1lbnRlZCcpCiAgICAgICAgCiAgICByZXR1cm4gSyhmdW5jKQ==',
'/Lib/fnmatch.py':'IiIiRmlsZW5hbWUgbWF0Y2hpbmcgd2l0aCBzaGVsbCBwYXR0ZXJucy4NCg0KZm5tYXRjaChGSUxFTkFNRSwgUEFUVEVSTikgbWF0Y2hlcyBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsIGNvbnZlbnRpb24uDQpmbm1hdGNoY2FzZShGSUxFTkFNRSwgUEFUVEVSTikgYWx3YXlzIHRha2VzIGNhc2UgaW4gYWNjb3VudC4NCg0KVGhlIGZ1bmN0aW9ucyBvcGVyYXRlIGJ5IHRyYW5zbGF0aW5nIHRoZSBwYXR0ZXJuIGludG8gYSByZWd1bGFyDQpleHByZXNzaW9uLiAgVGhleSBjYWNoZSB0aGUgY29tcGlsZWQgcmVndWxhciBleHByZXNzaW9ucyBmb3Igc3BlZWQuDQoNClRoZSBmdW5jdGlvbiB0cmFuc2xhdGUoUEFUVEVSTikgcmV0dXJucyBhIHJlZ3VsYXIgZXhwcmVzc2lvbg0KY29ycmVzcG9uZGluZyB0byBQQVRURVJOLiAgKEl0IGRvZXMgbm90IGNvbXBpbGUgaXQuKQ0KIiIiDQppbXBvcnQgb3MNCmltcG9ydCBwb3NpeHBhdGgNCmltcG9ydCByZQ0KaW1wb3J0IGZ1bmN0b29scw0KDQpfX2FsbF9fID0gWyJmaWx0ZXIiLCAiZm5tYXRjaCIsICJmbm1hdGNoY2FzZSIsICJ0cmFuc2xhdGUiXQ0KDQpkZWYgZm5tYXRjaChuYW1lLCBwYXQpOg0KICAgICIiIlRlc3Qgd2hldGhlciBGSUxFTkFNRSBtYXRjaGVzIFBBVFRFUk4uDQoNCiAgICBQYXR0ZXJucyBhcmUgVW5peCBzaGVsbCBzdHlsZToNCg0KICAgICogICAgICAgbWF0Y2hlcyBldmVyeXRoaW5nDQogICAgPyAgICAgICBtYXRjaGVzIGFueSBzaW5nbGUgY2hhcmFjdGVyDQogICAgW3NlcV0gICBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgaW4gc2VxDQogICAgWyFzZXFdICBtYXRjaGVzIGFueSBjaGFyIG5vdCBpbiBzZXENCg0KICAgIEFuIGluaXRpYWwgcGVyaW9kIGluIEZJTEVOQU1FIGlzIG5vdCBzcGVjaWFsLg0KICAgIEJvdGggRklMRU5BTUUgYW5kIFBBVFRFUk4gYXJlIGZpcnN0IGNhc2Utbm9ybWFsaXplZA0KICAgIGlmIHRoZSBvcGVyYXRpbmcgc3lzdGVtIHJlcXVpcmVzIGl0Lg0KICAgIElmIHlvdSBkb24ndCB3YW50IHRoaXMsIHVzZSBmbm1hdGNoY2FzZShGSUxFTkFNRSwgUEFUVEVSTikuDQogICAgIiIiDQogICAgbmFtZSA9IG9zLnBhdGgubm9ybWNhc2UobmFtZSkNCiAgICBwYXQgPSBvcy5wYXRoLm5vcm1jYXNlKHBhdCkNCiAgICByZXR1cm4gZm5tYXRjaGNhc2UobmFtZSwgcGF0KQ0KDQpAZnVuY3Rvb2xzLmxydV9jYWNoZShtYXhzaXplPTI1MCwgdHlwZWQ9VHJ1ZSkNCmRlZiBfY29tcGlsZV9wYXR0ZXJuKHBhdCk6DQogICAgaWYgaXNpbnN0YW5jZShwYXQsIGJ5dGVzKToNCiAgICAgICAgcGF0X3N0ciA9IHN0cihwYXQsICdJU08tODg1OS0xJykNCiAgICAgICAgcmVzX3N0ciA9IHRyYW5zbGF0ZShwYXRfc3RyKQ0KICAgICAgICByZXMgPSBieXRlcyhyZXNfc3RyLCAnSVNPLTg4NTktMScpDQogICAgZWxzZToNCiAgICAgICAgcmVzID0gdHJhbnNsYXRlKHBhdCkNCiAgICByZXR1cm4gcmUuY29tcGlsZShyZXMpLm1hdGNoDQoNCmRlZiBmaWx0ZXIobmFtZXMsIHBhdCk6DQogICAgIiIiUmV0dXJuIHRoZSBzdWJzZXQgb2YgdGhlIGxpc3QgTkFNRVMgdGhhdCBtYXRjaCBQQVQuIiIiDQogICAgcmVzdWx0ID0gW10NCiAgICBwYXQgPSBvcy5wYXRoLm5vcm1jYXNlKHBhdCkNCiAgICBtYXRjaCA9IF9jb21waWxlX3BhdHRlcm4ocGF0KQ0KICAgIGlmIG9zLnBhdGggaXMgcG9zaXhwYXRoOg0KICAgICAgICAjIG5vcm1jYXNlIG9uIHBvc2l4IGlzIE5PUC4gT3B0aW1pemUgaXQgYXdheSBmcm9tIHRoZSBsb29wLg0KICAgICAgICBmb3IgbmFtZSBpbiBuYW1lczoNCiAgICAgICAgICAgIGlmIG1hdGNoKG5hbWUpOg0KICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobmFtZSkNCiAgICBlbHNlOg0KICAgICAgICBmb3IgbmFtZSBpbiBuYW1lczoNCiAgICAgICAgICAgIGlmIG1hdGNoKG9zLnBhdGgubm9ybWNhc2UobmFtZSkpOg0KICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobmFtZSkNCiAgICByZXR1cm4gcmVzdWx0DQoNCmRlZiBmbm1hdGNoY2FzZShuYW1lLCBwYXQpOg0KICAgICIiIlRlc3Qgd2hldGhlciBGSUxFTkFNRSBtYXRjaGVzIFBBVFRFUk4sIGluY2x1ZGluZyBjYXNlLg0KDQogICAgVGhpcyBpcyBhIHZlcnNpb24gb2YgZm5tYXRjaCgpIHdoaWNoIGRvZXNuJ3QgY2FzZS1ub3JtYWxpemUNCiAgICBpdHMgYXJndW1lbnRzLg0KICAgICIiIg0KICAgIG1hdGNoID0gX2NvbXBpbGVfcGF0dGVybihwYXQpDQogICAgcmV0dXJuIG1hdGNoKG5hbWUpIGlzIG5vdCBOb25lDQoNCg0KZGVmIHRyYW5zbGF0ZShwYXQpOg0KICAgICIiIlRyYW5zbGF0ZSBhIHNoZWxsIFBBVFRFUk4gdG8gYSByZWd1bGFyIGV4cHJlc3Npb24uDQoNCiAgICBUaGVyZSBpcyBubyB3YXkgdG8gcXVvdGUgbWV0YS1jaGFyYWN0ZXJzLg0KICAgICIiIg0KDQogICAgaSwgbiA9IDAsIGxlbihwYXQpDQogICAgcmVzID0gJycNCiAgICB3aGlsZSBpIDwgbjoNCiAgICAgICAgYyA9IHBhdFtpXQ0KICAgICAgICBpID0gaSsxDQogICAgICAgIGlmIGMgPT0gJyonOg0KICAgICAgICAgICAgcmVzID0gcmVzICsgJy4qJw0KICAgICAgICBlbGlmIGMgPT0gJz8nOg0KICAgICAgICAgICAgcmVzID0gcmVzICsgJy4nDQogICAgICAgIGVsaWYgYyA9PSAnWyc6DQogICAgICAgICAgICBqID0gaQ0KICAgICAgICAgICAgaWYgaiA8IG4gYW5kIHBhdFtqXSA9PSAnISc6DQogICAgICAgICAgICAgICAgaiA9IGorMQ0KICAgICAgICAgICAgaWYgaiA8IG4gYW5kIHBhdFtqXSA9PSAnXSc6DQogICAgICAgICAgICAgICAgaiA9IGorMQ0KICAgICAgICAgICAgd2hpbGUgaiA8IG4gYW5kIHBhdFtqXSAhPSAnXSc6DQogICAgICAgICAgICAgICAgaiA9IGorMQ0KICAgICAgICAgICAgaWYgaiA+PSBuOg0KICAgICAgICAgICAgICAgIHJlcyA9IHJlcyArICdcXFsnDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHN0dWZmID0gcGF0W2k6al0ucmVwbGFjZSgnXFwnLCdcXFxcJykNCiAgICAgICAgICAgICAgICBpID0gaisxDQogICAgICAgICAgICAgICAgaWYgc3R1ZmZbMF0gPT0gJyEnOg0KICAgICAgICAgICAgICAgICAgICBzdHVmZiA9ICdeJyArIHN0dWZmWzE6XQ0KICAgICAgICAgICAgICAgIGVsaWYgc3R1ZmZbMF0gPT0gJ14nOg0KICAgICAgICAgICAgICAgICAgICBzdHVmZiA9ICdcXCcgKyBzdHVmZg0KICAgICAgICAgICAgICAgIHJlcyA9ICclc1slc10nICUgKHJlcywgc3R1ZmYpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXMgPSByZXMgKyByZS5lc2NhcGUoYykNCiAgICByZXR1cm4gcmVzICsgJ1xaKD9tcyknDQo=',
'/Lib/errno.py':'IlRoaXMgbW9kdWxlIG1ha2VzIGF2YWlsYWJsZSBzdGFuZGFyZCBlcnJubyBzeXN0ZW0gc3ltYm9scy5cblxuVGhlIHZhbHVlIG9mIGVhY2ggc3ltYm9sIGlzIHRoZSBjb3JyZXNwb25kaW5nIGludGVnZXIgdmFsdWUsXG5lLmcuLCBvbiBtb3N0IHN5c3RlbXMsIGVycm5vLkVOT0VOVCBlcXVhbHMgdGhlIGludGVnZXIgMi5cblxuVGhlIGRpY3Rpb25hcnkgZXJybm8uZXJyb3Jjb2RlIG1hcHMgbnVtZXJpYyBjb2RlcyB0byBzeW1ib2wgbmFtZXMsXG5lLmcuLCBlcnJuby5lcnJvcmNvZGVbMl0gY291bGQgYmUgdGhlIHN0cmluZyAnRU5PRU5UJy5cblxuU3ltYm9scyB0aGF0IGFyZSBub3QgcmVsZXZhbnQgdG8gdGhlIHVuZGVybHlpbmcgc3lzdGVtIGFyZSBub3QgZGVmaW5lZC5cblxuVG8gbWFwIGVycm9yIGNvZGVzIHRvIGVycm9yIG1lc3NhZ2VzLCB1c2UgdGhlIGZ1bmN0aW9uIG9zLnN0cmVycm9yKCksXG5lLmcuIG9zLnN0cmVycm9yKDIpIGNvdWxkIHJldHVybiAnTm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeScuIgoKRTJCSUcgPSA3CkVBQ0NFUyA9IDEzCkVBRERSSU5VU0UgPSA5OApFQUREUk5PVEFWQUlMID0gOTkKRUFEViA9IDY4CkVBRk5PU1VQUE9SVCA9IDk3CkVBR0FJTiA9IDExCkVBTFJFQURZID0gMTE0CkVCQURFID0gNTIKRUJBREYgPSA5CkVCQURGRCA9IDc3CkVCQURNU0cgPSA3NApFQkFEUiA9IDUzCkVCQURSUUMgPSA1NgpFQkFEU0xUID0gNTcKRUJGT05UID0gNTkKRUJVU1kgPSAxNgpFQ0hJTEQgPSAxMApFQ0hSTkcgPSA0NApFQ09NTSA9IDcwCkVDT05OQUJPUlRFRCA9IDEwMwpFQ09OTlJFRlVTRUQgPSAxMTEKRUNPTk5SRVNFVCA9IDEwNApFREVBRExLID0gMzUKRURFQURMT0NLID0gMzUKRURFU1RBRERSUkVRID0gODkKRURPTSA9IDMzCkVET1RET1QgPSA3MwpFRFFVT1QgPSAxMjIKRUVYSVNUID0gMTcKRUZBVUxUID0gMTQKRUZCSUcgPSAyNwpFSE9TVERPV04gPSAxMTIKRUhPU1RVTlJFQUNIID0gMTEzCkVJRFJNID0gNDMKRUlMU0VRID0gODQKRUlOUFJPR1JFU1MgPSAxMTUKRUlOVFIgPSA0CkVJTlZBTCA9IDIyCkVJTyA9IDUKRUlTQ09OTiA9IDEwNgpFSVNESVIgPSAyMQpFSVNOQU0gPSAxMjAKRUwySExUID0gNTEKRUwyTlNZTkMgPSA0NQpFTDNITFQgPSA0NgpFTDNSU1QgPSA0NwpFTElCQUNDID0gNzkKRUxJQkJBRCA9IDgwCkVMSUJFWEVDID0gODMKRUxJQk1BWCA9IDgyCkVMSUJTQ04gPSA4MQpFTE5STkcgPSA0OApFTE9PUCA9IDQwCkVNRklMRSA9IDI0CkVNTElOSyA9IDMxCkVNU0dTSVpFID0gOTAKRU1VTFRJSE9QID0gNzIKRU5BTUVUT09MT05HID0gMzYKRU5BVkFJTCA9IDExOQpFTkVURE9XTiA9IDEwMApFTkVUUkVTRVQgPSAxMDIKRU5FVFVOUkVBQ0ggPSAxMDEKRU5GSUxFID0gMjMKRU5PQU5PID0gNTUKRU5PQlVGUyA9IDEwNQpFTk9DU0kgPSA1MApFTk9EQVRBID0gNjEKRU5PREVWID0gMTkKRU5PRU5UID0gMgpFTk9FWEVDID0gOApFTk9MQ0sgPSAzNwpFTk9MSU5LID0gNjcKRU5PTUVNID0gMTIKRU5PTVNHID0gNDIKRU5PTkVUID0gNjQKRU5PUEtHID0gNjUKRU5PUFJPVE9PUFQgPSA5MgpFTk9TUEMgPSAyOApFTk9TUiA9IDYzCkVOT1NUUiA9IDYwCkVOT1NZUyA9IDM4CkVOT1RCTEsgPSAxNQpFTk9UQ09OTiA9IDEwNwpFTk9URElSID0gMjAKRU5PVEVNUFRZID0gMzkKRU5PVE5BTSA9IDExOApFTk9UU09DSyA9IDg4CkVOT1RUWSA9IDI1CkVOT1RVTklRID0gNzYKRU5YSU8gPSA2CkVPUE5PVFNVUFAgPSA5NQpFT1ZFUkZMT1cgPSA3NQpFUEVSTSA9IDEKRVBGTk9TVVBQT1JUID0gOTYKRVBJUEUgPSAzMgpFUFJPVE8gPSA3MQpFUFJPVE9OT1NVUFBPUlQgPSA5MwpFUFJPVE9UWVBFID0gOTEKRVJBTkdFID0gMzQKRVJFTUNIRyA9IDc4CkVSRU1PVEUgPSA2NgpFUkVNT1RFSU8gPSAxMjEKRVJFU1RBUlQgPSA4NQpFUk9GUyA9IDMwCkVTSFVURE9XTiA9IDEwOApFU09DS1ROT1NVUFBPUlQgPSA5NApFU1BJUEUgPSAyOQpFU1JDSCA9IDMKRVNSTU5UID0gNjkKRVNUQUxFID0gMTE2CkVTVFJQSVBFID0gODYKRVRJTUUgPSA2MgpFVElNRURPVVQgPSAxMTAKRVRPT01BTllSRUZTID0gMTA5CkVUWFRCU1kgPSAyNgpFVUNMRUFOID0gMTE3CkVVTkFUQ0ggPSA0OQpFVVNFUlMgPSA4NwpFV09VTERCTE9DSyA9IDExCkVYREVWID0gMTgKRVhGVUxMID0gNTQKIyBlcnJvcmNvZGUK',
'/Lib/itertools.py':'aW1wb3J0IG9wZXJhdG9yCgpjbGFzcyBhY2N1bXVsYXRlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZXJhYmxlLCBmdW5jID0gb3BlcmF0b3IuYWRkKToKICAgICAgICBzZWxmLml0ID0gaXRlcihpdGVyYWJsZSkKICAgICAgICBzZWxmLl90b3RhbCA9IE5vbmUKICAgICAgICBzZWxmLmZ1bmMgPSBmdW5jCiAgICAgICAgCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYuX3RvdGFsOgogICAgICAgICAgICBzZWxmLl90b3RhbCA9IG5leHQoc2VsZi5pdCkKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3RvdGFsCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZWxlbWVudCA9IG5leHQoc2VsZi5pdCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5fdG90YWwgPSBzZWxmLmZ1bmMoc2VsZi5fdG90YWwsIGVsZW1lbnQpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidW5zdXBwb3J0ZWQgb3BlcmFuZCB0eXBlIikKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3RvdGFsCiAgICAgICAgICAgICAgICAKIyMgQWRhcHRlZCBmcm9tOgojIyBodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTM0CmNsYXNzIGNoYWluOgogICAgZGVmIF9faW5pdF9fKHNlbGYsICppdGVyYWJsZXMpOgogICAgICAgIHNlbGYuX2l0ZXJhYmxlc19pdGVyID0gaXRlcihtYXAoaXRlciwgaXRlcmFibGVzKSkKICAgICAgICAjIGxpdHRsZSB0cmljayBmb3IgdGhlIGZpcnN0IGNoYWluLl9fbmV4dF9fKCkgY2FsbAogICAgICAgIHNlbGYuX2N1cl9pdGVyYWJsZV9pdGVyID0gaXRlcihbXSkKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKICAgIAogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KHNlbGYuX2N1cl9pdGVyYWJsZV9pdGVyKQogICAgICAgICAgICBleGNlcHQgU3RvcEl0ZXJhdGlvbjoKICAgICAgICAgICAgICAgIHNlbGYuX2N1cl9pdGVyYWJsZV9pdGVyID0gbmV4dChzZWxmLl9pdGVyYWJsZXNfaXRlcikKICAgIAogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbV9pdGVyYWJsZShjbHMsIGl0ZXJhYmxlKToKICAgICAgICBmb3IgaXQgaW4gaXRlcmFibGU6CiAgICAgICAgICAgIGZvciBlbGVtZW50IGluIGl0OgogICAgICAgICAgICAgICAgeWllbGQgZWxlbWVudAogICAgICAgICAgICAgICAgCmNsYXNzIGNvbWJpbmF0aW9uczoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZSwgcik6CiAgICAgICAgc2VsZi5wb29sID0gdHVwbGUoaXRlcmFibGUpCiAgICAgICAgc2VsZi5uID0gbGVuKHNlbGYucG9vbCkKICAgICAgICBzZWxmLnIgPSByCiAgICAgICAgc2VsZi5pbmRpY2VzID0gbGlzdChyYW5nZShzZWxmLnIpKQogICAgICAgIHNlbGYuemVybyA9IEZhbHNlCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYuciA+IHNlbGYubjoKICAgICAgICAgICAgcmFpc2UgU3RvcEl0ZXJhdGlvbgogICAgICAgIGlmIG5vdCBzZWxmLnplcm86CiAgICAgICAgICAgIHNlbGYuemVybyA9IFRydWUKICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYucG9vbFtpXSBmb3IgaSBpbiBzZWxmLmluZGljZXMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZm9yIGkgaW4gcmV2ZXJzZWQocmFuZ2Uoc2VsZi5yKSk6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5pbmRpY2VzW2ldICE9IGkgKyBzZWxmLm4gLSBzZWxmLnI6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBzZWxmLmluZGljZXNbaV0gKz0gMQogICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UoaSsxLCBzZWxmLnIpOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kaWNlc1tqXSA9IHNlbGYuaW5kaWNlc1tqLTFdICsgMQogICAgICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYucG9vbFtpXSBmb3IgaSBpbiBzZWxmLmluZGljZXMpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICAgICAgICAgIApjbGFzcyBjb21iaW5hdGlvbnNfd2l0aF9yZXBsYWNlbWVudDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZSwgcik6CiAgICAgICAgc2VsZi5wb29sID0gdHVwbGUoaXRlcmFibGUpCiAgICAgICAgc2VsZi5uID0gbGVuKHNlbGYucG9vbCkKICAgICAgICBzZWxmLnIgPSByCiAgICAgICAgc2VsZi5pbmRpY2VzID0gWzBdICogc2VsZi5yCiAgICAgICAgc2VsZi56ZXJvID0gRmFsc2UKICAgICAgICAKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgogICAgCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYubiBhbmQgc2VsZi5yOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgaWYgbm90IHNlbGYuemVybzoKICAgICAgICAgICAgc2VsZi56ZXJvID0gVHJ1ZQogICAgICAgICAgICByZXR1cm4gdHVwbGUoc2VsZi5wb29sW2ldIGZvciBpIGluIHNlbGYuaW5kaWNlcykKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmb3IgaSBpbiByZXZlcnNlZChyYW5nZShzZWxmLnIpKToKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLmluZGljZXNbaV0gIT0gc2VsZi5uIC0gMToKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIHNlbGYuaW5kaWNlc1tpOl0gPSBbc2VsZi5pbmRpY2VzW2ldICsgMV0gKiAoc2VsZi5yIC0gaSkKICAgICAgICAgICAgICAgIHJldHVybiB0dXBsZShzZWxmLnBvb2xbaV0gZm9yIGkgaW4gc2VsZi5pbmRpY2VzKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgICAgICAgICAKIyMgTGl0ZXJhbGx5IGNvcGllZCBmcm9tCiMjaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvYzFhYTc0YzA2ZTg2L2xpYl9weXB5L2l0ZXJ0b29scy5weSNjbC02MyAKY2xhc3MgY29tcHJlc3M6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZGF0YSwgc2VsZWN0b3JzKToKICAgICAgICBzZWxmLmRhdGEgPSBpdGVyKGRhdGEpCiAgICAgICAgc2VsZi5zZWxlY3RvcnMgPSBpdGVyKHNlbGVjdG9ycykKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgbmV4dF9pdGVtID0gbmV4dChzZWxmLmRhdGEpCiAgICAgICAgICAgIG5leHRfc2VsZWN0b3IgPSBuZXh0KHNlbGYuc2VsZWN0b3JzKQogICAgICAgICAgICBpZiBib29sKG5leHRfc2VsZWN0b3IpOgogICAgICAgICAgICAgICAgcmV0dXJuIG5leHRfaXRlbQogICAgICAgICAgICAgICAgCiMjIEFkYXB0ZWQgZnJvbQojI2h0dHBzOi8vYml0YnVja2V0Lm9yZy9weXB5L3B5cHkvc3JjL2MxYWE3NGMwNmU4Ni9saWJfcHlweS9pdGVydG9vbHMucHkjY2wtNzkKIyMgSSBtaW1pY2tlZCB0aGUgPiBweXRob24zLjEgYmVoYXZpb3IKY2xhc3MgY291bnQ6CiAgICAiIiIKICAgIElucHV0IGlzIGFuIGludCBvciBhIGZsb2F0LiBUaGUgb3JpZ2luYWwgUHl0aG9uIDMgaW1wbGVtZW50YXRpb24KICAgIGluY2x1ZGVzIGFsc28gY29tcGxleCBudW1iZXJzLi4uIGJ1dCBpdCBzdGlsbCBpcyBub3QgaW1wbGVtZW50ZWQgCiAgICBpbiBCcnl0aG9uIGFzIGNvbXBsZXggdHlwZSBpcyBOb3RJbXBsZW1lbnRlZAogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RhcnQgPSAwLCBzdGVwID0gMSk6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc3RhcnQsIChpbnQsIGZsb2F0KSk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcignYSBudW1iZXIgaXMgcmVxdWlyZWQnKQogICAgICAgIHNlbGYudGltZXMgPSBzdGFydCAtIHN0ZXAKICAgICAgICBzZWxmLnN0ZXAgPSBzdGVwCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHNlbGYudGltZXMgKz0gc2VsZi5zdGVwCiAgICAgICAgcmV0dXJuIHNlbGYudGltZXMKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICdjb3VudCglZCknICUgKHNlbGYudGltZXMgKyBzZWxmLnN0ZXApCgojIyBMaXRlcmFsbHkgY29waWVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTExMiAgICAgICAgCmNsYXNzIGN5Y2xlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZXJhYmxlKToKICAgICAgICBzZWxmLl9jdXJfaXRlciA9IGl0ZXIoaXRlcmFibGUpCiAgICAgICAgc2VsZi5fc2F2ZWQgPSBbXQogICAgICAgIHNlbGYuX211c3Rfc2F2ZSA9IFRydWUKICAgICAgICAKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG5leHRfZWx0ID0gbmV4dChzZWxmLl9jdXJfaXRlcikKICAgICAgICAgICAgaWYgc2VsZi5fbXVzdF9zYXZlOgogICAgICAgICAgICAgICAgc2VsZi5fc2F2ZWQuYXBwZW5kKG5leHRfZWx0KQogICAgICAgIGV4Y2VwdCBTdG9wSXRlcmF0aW9uOgogICAgICAgICAgICBzZWxmLl9jdXJfaXRlciA9IGl0ZXIoc2VsZi5fc2F2ZWQpCiAgICAgICAgICAgIG5leHRfZWx0ID0gbmV4dChzZWxmLl9jdXJfaXRlcikKICAgICAgICAgICAgc2VsZi5fbXVzdF9zYXZlID0gRmFsc2UKICAgICAgICByZXR1cm4gbmV4dF9lbHQKICAgICAgICAKIyMgTGl0ZXJhbGx5IGNvcGllZCBmcm9tCiMjaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvYzFhYTc0YzA2ZTg2L2xpYl9weXB5L2l0ZXJ0b29scy5weSNjbC0xNDkKY2xhc3MgZHJvcHdoaWxlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHByZWRpY2F0ZSwgaXRlcmFibGUpOgogICAgICAgIHNlbGYuX3ByZWRpY2F0ZSA9IHByZWRpY2F0ZQogICAgICAgIHNlbGYuX2l0ZXIgPSBpdGVyKGl0ZXJhYmxlKQogICAgICAgIHNlbGYuX2Ryb3BwZWQgPSBGYWxzZQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICB2YWx1ZSA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICBpZiBzZWxmLl9kcm9wcGVkOgogICAgICAgICAgICByZXR1cm4gdmFsdWUKICAgICAgICB3aGlsZSBzZWxmLl9wcmVkaWNhdGUodmFsdWUpOgogICAgICAgICAgICB2YWx1ZSA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICBzZWxmLl9kcm9wcGVkID0gVHJ1ZQogICAgICAgIHJldHVybiB2YWx1ZQogICAgICAgIAojIyBBZGFwdGVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTI2MQpjbGFzcyBmaWx0ZXJmYWxzZToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwcmVkaWNhdGUsIGl0ZXJhYmxlKToKICAgICAgICAjIE1ha2Ugc3VyZSBpdGVyYWJsZSAqSVMqIGl0ZXJhYmxlCiAgICAgICAgc2VsZi5faXRlciA9IGl0ZXIoaXRlcmFibGUpCiAgICAgICAgaWYgcHJlZGljYXRlIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuX3ByZWRpY2F0ZSA9IGJvb2wKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9wcmVkaWNhdGUgPSBwcmVkaWNhdGUKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKICAgIGRlZiBfX25leHRfXyhzZWxmKToKICAgICAgICBuZXh0X2VsdCA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5fcHJlZGljYXRlKG5leHRfZWx0KToKICAgICAgICAgICAgICAgIHJldHVybiBuZXh0X2VsdAogICAgICAgICAgICBuZXh0X2VsdCA9IG5leHQoc2VsZi5faXRlcikKCmNsYXNzIGdyb3VwYnk6CiAgICAjIyBUTy1ETwogICAgcGFzcwogICAgICAgICAgCiMjIGFkYXB0ZWQgZnJvbQojI2h0dHBzOi8vYml0YnVja2V0Lm9yZy9weXB5L3B5cHkvc3JjL2MxYWE3NGMwNmU4Ni9saWJfcHlweS9pdGVydG9vbHMucHkjY2wtMzIzCmNsYXNzIGlzbGljZToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZSwgKmFyZ3MpOgogICAgICAgIHMgPSBzbGljZSgqYXJncykKICAgICAgICBzZWxmLnN0YXJ0LCBzZWxmLnN0b3AsIHNlbGYuc3RlcCA9IHMuc3RhcnQgb3IgMCwgcy5zdG9wLCBzLnN0ZXAKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShzZWxmLnN0YXJ0LCBpbnQpOgogICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlN0YXJ0IGFyZ3VtZW50IG11c3QgYmUgYW4gaW50ZWdlciIpCiAgICAgICAgaWYgc2VsZi5zdG9wICE9IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKHNlbGYuc3RvcCwgaW50KToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiU3RvcCBhcmd1bWVudCBtdXN0IGJlIGFuIGludGVnZXIgb3IgTm9uZSIpCiAgICAgICAgaWYgc2VsZi5zdGVwIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuc3RlcCA9IDEKICAgICAgICBpZiBzZWxmLnN0YXJ0PDAgb3IgKHNlbGYuc3RvcCAhPSBOb25lIGFuZCBzZWxmLnN0b3A8MAogICAgICAgICAgICkgb3Igc2VsZi5zdGVwPD0wOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbmRpY2VzIGZvciBpc2xpY2UoKSBtdXN0IGJlIHBvc2l0aXZlIikKICAgICAgICBzZWxmLml0ID0gaXRlcihpdGVyYWJsZSkKICAgICAgICBzZWxmLmRvbmV4dCA9IE5vbmUKICAgICAgICBzZWxmLmNudCA9IDAKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgbmV4dGluZGV4ID0gc2VsZi5zdGFydAogICAgICAgIGlmIHNlbGYuc3RvcCAhPSBOb25lIGFuZCBuZXh0aW5kZXggPj0gc2VsZi5zdG9wOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgd2hpbGUgc2VsZi5jbnQgPD0gbmV4dGluZGV4OgogICAgICAgICAgICBuZXh0aXRlbSA9IG5leHQoc2VsZi5pdCkKICAgICAgICAgICAgc2VsZi5jbnQgKz0gMQogICAgICAgIHNlbGYuc3RhcnQgKz0gc2VsZi5zdGVwIAogICAgICAgIHJldHVybiBuZXh0aXRlbQogICAgICAgIApjbGFzcyBwZXJtdXRhdGlvbnM6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlcmFibGUsIHIgPSBOb25lKToKICAgICAgICBzZWxmLnBvb2wgPSB0dXBsZShpdGVyYWJsZSkKICAgICAgICBzZWxmLm4gPSBsZW4oc2VsZi5wb29sKQogICAgICAgIHNlbGYuciA9IHNlbGYubiBpZiByIGlzIE5vbmUgZWxzZSByCiAgICAgICAgc2VsZi5pbmRpY2VzID0gbGlzdChyYW5nZShzZWxmLm4pKQogICAgICAgIHNlbGYuY3ljbGVzID0gbGlzdChyYW5nZShzZWxmLm4sIHNlbGYubiAtIHIsIC0xKSkKICAgICAgICBzZWxmLnplcm8gPSBGYWxzZQogICAgICAgIHNlbGYuc3RvcCA9IEZhbHNlCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIGluZGljZXMgPSBzZWxmLmluZGljZXMKICAgICAgICBpZiBzZWxmLnIgPiBzZWxmLm46CiAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICBpZiBub3Qgc2VsZi56ZXJvOgogICAgICAgICAgICBzZWxmLnplcm8gPSBUcnVlCiAgICAgICAgICAgIHJldHVybiB0dXBsZShzZWxmLnBvb2xbaV0gZm9yIGkgaW4gaW5kaWNlc1s6c2VsZi5yXSkKICAgICAgICAKICAgICAgICBpID0gc2VsZi5yIC0gMQogICAgICAgIHdoaWxlIGkgPj0gMDoKICAgICAgICAgICAgaiA9IHNlbGYuY3ljbGVzW2ldIC0gMQogICAgICAgICAgICBpZiBqID4gMDoKICAgICAgICAgICAgICAgIHNlbGYuY3ljbGVzW2ldID0gagogICAgICAgICAgICAgICAgaW5kaWNlc1tpXSwgaW5kaWNlc1stal0gPSBpbmRpY2VzWy1qXSwgaW5kaWNlc1tpXQogICAgICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHNlbGYucG9vbFtpXSBmb3IgaSBpbiBpbmRpY2VzWzpzZWxmLnJdKQogICAgICAgICAgICBzZWxmLmN5Y2xlc1tpXSA9IGxlbihpbmRpY2VzKSAtIGkKICAgICAgICAgICAgbjEgPSBsZW4oaW5kaWNlcykgLSAxCiAgICAgICAgICAgIGFzc2VydCBuMSA+PSAwCiAgICAgICAgICAgIG51bSA9IGluZGljZXNbaV0KICAgICAgICAgICAgZm9yIGsgaW4gcmFuZ2UoaSwgbjEpOgogICAgICAgICAgICAgICAgaW5kaWNlc1trXSA9IGluZGljZXNbaysxXQogICAgICAgICAgICBpbmRpY2VzW24xXSA9IG51bQogICAgICAgICAgICBpIC09IDEKICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCgojIyBhZGFwdGVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTM5MiAgICAgICAgCmNsYXNzIHByb2R1Y3Q6CiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3cpOgogICAgICAgIGlmIGxlbihrdykgPiAxOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInByb2R1Y3QoKSB0YWtlcyBhdCBtb3N0IDEgYXJndW1lbnQgKCVkIGdpdmVuKSIgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbihrdykpCiAgICAgICAgc2VsZi5yZXBlYXQgPSBrdy5nZXQoJ3JlcGVhdCcsIDEpCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc2VsZi5yZXBlYXQsIGludCk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW50ZWdlciBhcmd1bWVudCBleHBlY3RlZCwgZ290ICVzIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZShzZWxmLnJlcGVhdCkpCiAgICAgICAgc2VsZi5nZWFycyA9IFt4IGZvciB4IGluIGFyZ3NdICogc2VsZi5yZXBlYXQKICAgICAgICBzZWxmLm51bV9nZWFycyA9IGxlbihzZWxmLmdlYXJzKQogICAgICAgICMgaW5pdGlhbGl6YXRpb24gb2YgaW5kaWNpZXMgdG8gbG9vcCBvdmVyCiAgICAgICAgc2VsZi5pbmRpY2llcyA9IFsoMCwgbGVuKHNlbGYuZ2VhcnNbeF0pKQogICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gcmFuZ2UoMCwgc2VsZi5udW1fZ2VhcnMpXQogICAgICAgIHNlbGYuY29udCA9IFRydWUKICAgICAgICBzZWxmLnplcm8gPSBGYWxzZQoKICAgIGRlZiByb2xsX2dlYXJzKHNlbGYpOgogICAgICAgICMgU3RhcnRpbmcgZnJvbSB0aGUgZW5kIG9mIHRoZSBnZWFyIGluZGljaWVzIHdvcmsgdG8gdGhlIGZyb250CiAgICAgICAgIyBpbmNyZW1lbnRpbmcgdGhlIGdlYXIgdW50aWwgdGhlIGxpbWl0IGlzIHJlYWNoZWQuIFdoZW4gdGhlIGxpbWl0CiAgICAgICAgIyBpcyByZWFjaGVkIGNhcnJ5IG9wZXJhdGlvbiB0byB0aGUgbmV4dCBnZWFyCiAgICAgICAgc2hvdWxkX2NhcnJ5ID0gVHJ1ZQogICAgICAgIGZvciBuIGluIHJhbmdlKDAsIHNlbGYubnVtX2dlYXJzKToKICAgICAgICAgICAgbnRoX2dlYXIgPSBzZWxmLm51bV9nZWFycyAtIG4gLSAxCiAgICAgICAgICAgIGlmIHNob3VsZF9jYXJyeToKICAgICAgICAgICAgICAgIGNvdW50LCBsaW0gPSBzZWxmLmluZGljaWVzW250aF9nZWFyXQogICAgICAgICAgICAgICAgY291bnQgKz0gMQogICAgICAgICAgICAgICAgaWYgY291bnQgPT0gbGltIGFuZCBudGhfZ2VhciA9PSAwOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY29udCA9IEZhbHNlCiAgICAgICAgICAgICAgICBpZiBjb3VudCA9PSBsaW06CiAgICAgICAgICAgICAgICAgICAgc2hvdWxkX2NhcnJ5ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMAogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzaG91bGRfY2FycnkgPSBGYWxzZQogICAgICAgICAgICAgICAgc2VsZi5pbmRpY2llc1tudGhfZ2Vhcl0gPSAoY291bnQsIGxpbSkgIAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgaWYgc2VsZi56ZXJvOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgaWYgc2VsZi5yZXBlYXQgPiAwOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5jb250OgogICAgICAgICAgICAgICAgcmFpc2UgU3RvcEl0ZXJhdGlvbgogICAgICAgICAgICBsID0gW10KICAgICAgICAgICAgZm9yIHggaW4gcmFuZ2UoMCwgc2VsZi5udW1fZ2VhcnMpOgogICAgICAgICAgICAgICAgaW5kZXgsIGxpbWl0ID0gc2VsZi5pbmRpY2llc1t4XQogICAgICAgICAgICAgICAgbC5hcHBlbmQoc2VsZi5nZWFyc1t4XVtpbmRleF0pCiAgICAgICAgICAgIHNlbGYucm9sbF9nZWFycygpCiAgICAgICAgICAgIHJldHVybiB0dXBsZShsKQogICAgICAgIGVsaWYgc2VsZi5yZXBlYXQgPT0gMDoKICAgICAgICAgICAgc2VsZi56ZXJvID0gVHJ1ZQogICAgICAgICAgICByZXR1cm4gKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJyZXBlYXQgYXJndW1lbnQgY2Fubm90IGJlIG5lZ2F0aXZlIikKICAgICAgICAgICAgCiMjIExpdGVyYWxseSBjb3BpZWQgZnJvbQojI2h0dHBzOi8vYml0YnVja2V0Lm9yZy9weXB5L3B5cHkvc3JjL2MxYWE3NGMwNmU4Ni9saWJfcHlweS9pdGVydG9vbHMucHkjY2wtNDQxCmNsYXNzIHJlcGVhdDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvYmosIHRpbWVzPU5vbmUpOgogICAgICAgIHNlbGYuX29iaiA9IG9iagogICAgICAgIGlmIHRpbWVzIGlzIG5vdCBOb25lOgogICAgICAgICAgICByYW5nZSh0aW1lcykgIyBSYWlzZSBhIFR5cGVFcnJvcgogICAgICAgICAgICBpZiB0aW1lcyA8IDA6CiAgICAgICAgICAgICAgICB0aW1lcyA9IDAKICAgICAgICBzZWxmLl90aW1lcyA9IHRpbWVzCiAgICAgICAgCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgIyBfX25leHRfXygpICpuZWVkKiB0byBkZWNyZW1lbnQgc2VsZi5fdGltZXMgd2hlbiBjb25zdW1lZAogICAgICAgIGlmIHNlbGYuX3RpbWVzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBzZWxmLl90aW1lcyA8PSAwOiAKICAgICAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24oKQogICAgICAgICAgICBzZWxmLl90aW1lcyAtPSAxCiAgICAgICAgcmV0dXJuIHNlbGYuX29iagoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLl90aW1lcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmV0dXJuICdyZXBlYXQoJXIsICVyKScgJSAoc2VsZi5fb2JqLCBzZWxmLl90aW1lcykKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gJ3JlcGVhdCglciknICUgKHNlbGYuX29iaiwpCgogICAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgICAgaWYgc2VsZi5fdGltZXMgPT0gLTEgb3Igc2VsZi5fdGltZXMgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJsZW4oKSBvZiB1bmlzemVkIG9iamVjdCIpCiAgICAgICAgcmV0dXJuIHNlbGYuX3RpbWVzCgojIyBBZGFwdGVkIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTQ4OQpjbGFzcyBzdGFybWFwKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZnVuY3Rpb24sIGl0ZXJhYmxlKToKICAgICAgICBzZWxmLl9mdW5jID0gZnVuY3Rpb24KICAgICAgICBzZWxmLl9pdGVyID0gaXRlcihpdGVyYWJsZSkKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgdCA9IG5leHQoc2VsZi5faXRlcikKICAgICAgICByZXR1cm4gc2VsZi5fZnVuYygqdCkKICAgICAgICAKIyMgTGl0ZXJhbGx5IGNvcGllZCBmcm9tCiMjaHR0cHM6Ly9iaXRidWNrZXQub3JnL3B5cHkvcHlweS9zcmMvYzFhYTc0YzA2ZTg2L2xpYl9weXB5L2l0ZXJ0b29scy5weSNjbC01MjAKY2xhc3MgdGFrZXdoaWxlKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgcHJlZGljYXRlLCBpdGVyYWJsZSk6CiAgICAgICAgc2VsZi5fcHJlZGljYXRlID0gcHJlZGljYXRlCiAgICAgICAgc2VsZi5faXRlciA9IGl0ZXIoaXRlcmFibGUpCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIHZhbHVlID0gbmV4dChzZWxmLl9pdGVyKQogICAgICAgIGlmIG5vdCBzZWxmLl9wcmVkaWNhdGUodmFsdWUpOgogICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uKCkKICAgICAgICByZXR1cm4gdmFsdWUKCiMjIEFsbW9zdCBsaXRlcmFsIGZyb20KIyNodHRwczovL2JpdGJ1Y2tldC5vcmcvcHlweS9weXB5L3NyYy9jMWFhNzRjMDZlODYvbGliX3B5cHkvaXRlcnRvb2xzLnB5I2NsLTU0NwpjbGFzcyBUZWVEYXRhKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlcmF0b3IpOgogICAgICAgIHNlbGYuZGF0YSA9IFtdCiAgICAgICAgc2VsZi5faXRlciA9IGl0ZXJhdG9yCgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGkpOgogICAgICAgICMgaXRlcmF0ZXMgdW50aWwgJ2knIGlmIG5vdCBkb25lIHlldAogICAgICAgIHdoaWxlIGk+PSBsZW4oc2VsZi5kYXRhKToKICAgICAgICAgICAgc2VsZi5kYXRhLmFwcGVuZChuZXh0KHNlbGYuX2l0ZXIpKQogICAgICAgIHJldHVybiBzZWxmLmRhdGFbaV0KCgpjbGFzcyBUZWVPYmplY3Qob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZT1Ob25lLCB0ZWVfZGF0YT1Ob25lKToKICAgICAgICBpZiB0ZWVfZGF0YToKICAgICAgICAgICAgc2VsZi50ZWVfZGF0YSA9IHRlZV9kYXRhCiAgICAgICAgICAgIHNlbGYucG9zID0gMAogICAgICAgICMgPD0+IENvcHkgY29uc3RydWN0b3IKICAgICAgICBlbGlmIGlzaW5zdGFuY2UoaXRlcmFibGUsIFRlZU9iamVjdCk6CiAgICAgICAgICAgIHNlbGYudGVlX2RhdGEgPSBpdGVyYWJsZS50ZWVfZGF0YQogICAgICAgICAgICBzZWxmLnBvcyA9IGl0ZXJhYmxlLnBvcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYudGVlX2RhdGEgPSBUZWVEYXRhKGl0ZXIoaXRlcmFibGUpKQogICAgICAgICAgICBzZWxmLnBvcyA9IDAKICAgICAgICAgICAgCiAgICBkZWYgX19uZXh0X18oc2VsZik6CiAgICAgICAgZGF0YSA9IHNlbGYudGVlX2RhdGFbc2VsZi5wb3NdCiAgICAgICAgc2VsZi5wb3MgKz0gMQogICAgICAgIHJldHVybiBkYXRhCiAgICAKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKCmRlZiB0ZWUoaXRlcmFibGUsIG49Mik6CiAgICBpZiBpc2luc3RhbmNlKGl0ZXJhYmxlLCBUZWVPYmplY3QpOgogICAgICAgIHJldHVybiB0dXBsZShbaXRlcmFibGVdICsKICAgICAgICBbVGVlT2JqZWN0KHRlZV9kYXRhPWl0ZXJhYmxlLnRlZV9kYXRhKSBmb3IgaSBpbiByYW5nZShuIC0gMSldKQogICAgdGVlX2RhdGEgPSBUZWVEYXRhKGl0ZXIoaXRlcmFibGUpKQogICAgcmV0dXJuIHR1cGxlKFtUZWVPYmplY3QodGVlX2RhdGE9dGVlX2RhdGEpIGZvciBpIGluIHJhbmdlKG4pXSkKCmNsYXNzIHppcF9sb25nZXN0OgogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCBmaWxsdmFsdWUgPSBOb25lKToKICAgICAgICBzZWxmLmFyZ3MgPSBhcmdzCiAgICAgICAgc2VsZi5maWxsdmFsdWUgPSBmaWxsdmFsdWUKICAgICAgICBzZWxmLm1heF9sZW5ndGggPSBtYXgoW2xlbihhcmcpIGZvciBhcmcgaW4gc2VsZi5hcmdzXSkKICAgICAgICBzZWxmLnVuaXRzID0gbGVuKGFyZ3MpCiAgICAgICAgc2VsZi5jb3VudGVyID0gMAogICAgCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKICAgIAogICAgZGVmIF9fbmV4dF9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY291bnRlciA9PSBzZWxmLm1heF9sZW5ndGg6CiAgICAgICAgICAgIHJhaXNlIFN0b3BJdGVyYXRpb24KICAgICAgICBlbHNlOgogICAgICAgICAgICB0ZW1wID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2Uoc2VsZi51bml0cyk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgdGVtcC5hcHBlbmQoc2VsZi5hcmdzW2ldW3NlbGYuY291bnRlcl0pCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgdGVtcC5hcHBlbmQoc2VsZi5maWxsdmFsdWUpCiAgICAgICAgICAgIHNlbGYuY291bnRlciA9IHNlbGYuY291bnRlciArIDEKICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHRlbXAp',
'/Lib/random.py':'IiIiUmFuZG9tIHZhcmlhYmxlIGdlbmVyYXRvcnMuCgogICAgaW50ZWdlcnMKICAgIC0tLS0tLS0tCiAgICAgICAgICAgdW5pZm9ybSB3aXRoaW4gcmFuZ2UKCiAgICBzZXF1ZW5jZXMKICAgIC0tLS0tLS0tLQogICAgICAgICAgIHBpY2sgcmFuZG9tIGVsZW1lbnQKICAgICAgICAgICBwaWNrIHJhbmRvbSBzYW1wbGUKICAgICAgICAgICBnZW5lcmF0ZSByYW5kb20gcGVybXV0YXRpb24KCiAgICBkaXN0cmlidXRpb25zIG9uIHRoZSByZWFsIGxpbmU6CiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICB1bmlmb3JtCiAgICAgICAgICAgdHJpYW5ndWxhcgogICAgICAgICAgIG5vcm1hbCAoR2F1c3NpYW4pCiAgICAgICAgICAgbG9nbm9ybWFsCiAgICAgICAgICAgbmVnYXRpdmUgZXhwb25lbnRpYWwKICAgICAgICAgICBnYW1tYQogICAgICAgICAgIGJldGEKICAgICAgICAgICBwYXJldG8KICAgICAgICAgICBXZWlidWxsCgogICAgZGlzdHJpYnV0aW9ucyBvbiB0aGUgY2lyY2xlIChhbmdsZXMgMCB0byAycGkpCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICBjaXJjdWxhciB1bmlmb3JtCiAgICAgICAgICAgdm9uIE1pc2VzCgpHZW5lcmFsIG5vdGVzIG9uIHRoZSB1bmRlcmx5aW5nIE1lcnNlbm5lIFR3aXN0ZXIgY29yZSBnZW5lcmF0b3I6CgoqIFRoZSBwZXJpb2QgaXMgMioqMTk5MzctMS4KKiBJdCBpcyBvbmUgb2YgdGhlIG1vc3QgZXh0ZW5zaXZlbHkgdGVzdGVkIGdlbmVyYXRvcnMgaW4gZXhpc3RlbmNlLgoqIFRoZSByYW5kb20oKSBtZXRob2QgaXMgaW1wbGVtZW50ZWQgaW4gQywgZXhlY3V0ZXMgaW4gYSBzaW5nbGUgUHl0aG9uIHN0ZXAsCiAgYW5kIGlzLCB0aGVyZWZvcmUsIHRocmVhZHNhZmUuCgoiIiIKCmZyb20gd2FybmluZ3MgaW1wb3J0IHdhcm4gYXMgX3dhcm4KZnJvbSB0eXBlcyBpbXBvcnQgTWV0aG9kVHlwZSBhcyBfTWV0aG9kVHlwZSwgQnVpbHRpbk1ldGhvZFR5cGUgYXMgX0J1aWx0aW5NZXRob2RUeXBlCmZyb20gbWF0aCBpbXBvcnQgbG9nIGFzIF9sb2csIGV4cCBhcyBfZXhwLCBwaSBhcyBfcGksIGUgYXMgX2UsIGNlaWwgYXMgX2NlaWwKZnJvbSBtYXRoIGltcG9ydCBzcXJ0IGFzIF9zcXJ0LCBhY29zIGFzIF9hY29zLCBjb3MgYXMgX2Nvcywgc2luIGFzIF9zaW4KZnJvbSBvcyBpbXBvcnQgdXJhbmRvbSBhcyBfdXJhbmRvbQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBTZXQgYXMgX1NldCwgU2VxdWVuY2UgYXMgX1NlcXVlbmNlCmZyb20gaGFzaGxpYiBpbXBvcnQgc2hhNTEyIGFzIF9zaGE1MTIKCl9fYWxsX18gPSBbIlJhbmRvbSIsInNlZWQiLCJyYW5kb20iLCJ1bmlmb3JtIiwicmFuZGludCIsImNob2ljZSIsInNhbXBsZSIsCiAgICAgICAgICAgInJhbmRyYW5nZSIsInNodWZmbGUiLCJub3JtYWx2YXJpYXRlIiwibG9nbm9ybXZhcmlhdGUiLAogICAgICAgICAgICJleHBvdmFyaWF0ZSIsInZvbm1pc2VzdmFyaWF0ZSIsImdhbW1hdmFyaWF0ZSIsInRyaWFuZ3VsYXIiLAogICAgICAgICAgICJnYXVzcyIsImJldGF2YXJpYXRlIiwicGFyZXRvdmFyaWF0ZSIsIndlaWJ1bGx2YXJpYXRlIiwKICAgICAgICAgICAiZ2V0c3RhdGUiLCJzZXRzdGF0ZSIsICJnZXRyYW5kYml0cyIsCiAgICAgICAgICAgIlN5c3RlbVJhbmRvbSJdCgpOVl9NQUdJQ0NPTlNUID0gNCAqIF9leHAoLTAuNSkvX3NxcnQoMi4wKQpUV09QSSA9IDIuMCpfcGkKTE9HNCA9IF9sb2coNC4wKQpTR19NQUdJQ0NPTlNUID0gMS4wICsgX2xvZyg0LjUpCkJQRiA9IDUzICAgICAgICAjIE51bWJlciBvZiBiaXRzIGluIGEgZmxvYXQKUkVDSVBfQlBGID0gMioqLUJQRgoKCiMgVHJhbnNsYXRlZCBieSBHdWlkbyB2YW4gUm9zc3VtIGZyb20gQyBzb3VyY2UgcHJvdmlkZWQgYnkKIyBBZHJpYW4gQmFkZGVsZXkuICBBZGFwdGVkIGJ5IFJheW1vbmQgSGV0dGluZ2VyIGZvciB1c2Ugd2l0aAojIHRoZSBNZXJzZW5uZSBUd2lzdGVyICBhbmQgb3MudXJhbmRvbSgpIGNvcmUgZ2VuZXJhdG9ycy4KCmltcG9ydCBfcmFuZG9tCgpjbGFzcyBSYW5kb20oX3JhbmRvbS5SYW5kb20pOgogICAgIiIiUmFuZG9tIG51bWJlciBnZW5lcmF0b3IgYmFzZSBjbGFzcyB1c2VkIGJ5IGJvdW5kIG1vZHVsZSBmdW5jdGlvbnMuCgogICAgVXNlZCB0byBpbnN0YW50aWF0ZSBpbnN0YW5jZXMgb2YgUmFuZG9tIHRvIGdldCBnZW5lcmF0b3JzIHRoYXQgZG9uJ3QKICAgIHNoYXJlIHN0YXRlLgoKICAgIENsYXNzIFJhbmRvbSBjYW4gYWxzbyBiZSBzdWJjbGFzc2VkIGlmIHlvdSB3YW50IHRvIHVzZSBhIGRpZmZlcmVudCBiYXNpYwogICAgZ2VuZXJhdG9yIG9mIHlvdXIgb3duIGRldmlzaW5nOiBpbiB0aGF0IGNhc2UsIG92ZXJyaWRlIHRoZSBmb2xsb3dpbmcKICAgIG1ldGhvZHM6ICByYW5kb20oKSwgc2VlZCgpLCBnZXRzdGF0ZSgpLCBhbmQgc2V0c3RhdGUoKS4KICAgIE9wdGlvbmFsbHksIGltcGxlbWVudCBhIGdldHJhbmRiaXRzKCkgbWV0aG9kIHNvIHRoYXQgcmFuZHJhbmdlKCkKICAgIGNhbiBjb3ZlciBhcmJpdHJhcmlseSBsYXJnZSByYW5nZXMuCgogICAgIiIiCgogICAgVkVSU0lPTiA9IDMgICAgICMgdXNlZCBieSBnZXRzdGF0ZS9zZXRzdGF0ZQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB4PU5vbmUpOgogICAgICAgICIiIkluaXRpYWxpemUgYW4gaW5zdGFuY2UuCgogICAgICAgIE9wdGlvbmFsIGFyZ3VtZW50IHggY29udHJvbHMgc2VlZGluZywgYXMgZm9yIFJhbmRvbS5zZWVkKCkuCiAgICAgICAgIiIiCgogICAgICAgIHNlbGYuc2VlZCh4KQogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKCiAgICBkZWYgc2VlZChzZWxmLCBhPU5vbmUsIHZlcnNpb249Mik6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSBpbnRlcm5hbCBzdGF0ZSBmcm9tIGhhc2hhYmxlIG9iamVjdC4KCiAgICAgICAgTm9uZSBvciBubyBhcmd1bWVudCBzZWVkcyBmcm9tIGN1cnJlbnQgdGltZSBvciBmcm9tIGFuIG9wZXJhdGluZwogICAgICAgIHN5c3RlbSBzcGVjaWZpYyByYW5kb21uZXNzIHNvdXJjZSBpZiBhdmFpbGFibGUuCgogICAgICAgIEZvciB2ZXJzaW9uIDIgKHRoZSBkZWZhdWx0KSwgYWxsIG9mIHRoZSBiaXRzIGFyZSB1c2VkIGlmICphKiBpcyBhIHN0ciwKICAgICAgICBieXRlcywgb3IgYnl0ZWFycmF5LiAgRm9yIHZlcnNpb24gMSwgdGhlIGhhc2goKSBvZiAqYSogaXMgdXNlZCBpbnN0ZWFkLgoKICAgICAgICBJZiAqYSogaXMgYW4gaW50LCBhbGwgYml0cyBhcmUgdXNlZC4KCiAgICAgICAgIiIiCgogICAgICAgIGlmIGEgaXMgTm9uZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYSA9IGludC5mcm9tX2J5dGVzKF91cmFuZG9tKDMyKSwgJ2JpZycpCiAgICAgICAgICAgIGV4Y2VwdCBOb3RJbXBsZW1lbnRlZEVycm9yOgogICAgICAgICAgICAgICAgaW1wb3J0IHRpbWUKICAgICAgICAgICAgICAgIGEgPSBpbnQodGltZS50aW1lKCkgKiAyNTYpICMgdXNlIGZyYWN0aW9uYWwgc2Vjb25kcwoKICAgICAgICBpZiB2ZXJzaW9uID09IDI6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYSwgKHN0ciwgYnl0ZXMsIGJ5dGVhcnJheSkpOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShhLCBzdHIpOgogICAgICAgICAgICAgICAgICAgIGEgPSBhLmVuY29kZSgpCiAgICAgICAgICAgICAgICBhICs9IF9zaGE1MTIoYSkuZGlnZXN0KCkKICAgICAgICAgICAgICAgIGEgPSBpbnQuZnJvbV9ieXRlcyhhLCAnYmlnJykKCiAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAjc3VwZXIoKS5zZWVkKGEpCiAgICAgICAgX3JhbmRvbS5SYW5kb20uc2VlZChzZWxmLCBhKQogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKCiAgICBkZWYgZ2V0c3RhdGUoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGludGVybmFsIHN0YXRlOyBjYW4gYmUgcGFzc2VkIHRvIHNldHN0YXRlKCkgbGF0ZXIuIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuVkVSU0lPTiwgc3VwZXIoKS5nZXRzdGF0ZSgpLCBzZWxmLmdhdXNzX25leHQKCiAgICBkZWYgc2V0c3RhdGUoc2VsZiwgc3RhdGUpOgogICAgICAgICIiIlJlc3RvcmUgaW50ZXJuYWwgc3RhdGUgZnJvbSBvYmplY3QgcmV0dXJuZWQgYnkgZ2V0c3RhdGUoKS4iIiIKICAgICAgICB2ZXJzaW9uID0gc3RhdGVbMF0KICAgICAgICBpZiB2ZXJzaW9uID09IDM6CiAgICAgICAgICAgIHZlcnNpb24sIGludGVybmFsc3RhdGUsIHNlbGYuZ2F1c3NfbmV4dCA9IHN0YXRlCiAgICAgICAgICAgIHN1cGVyKCkuc2V0c3RhdGUoaW50ZXJuYWxzdGF0ZSkKICAgICAgICBlbGlmIHZlcnNpb24gPT0gMjoKICAgICAgICAgICAgdmVyc2lvbiwgaW50ZXJuYWxzdGF0ZSwgc2VsZi5nYXVzc19uZXh0ID0gc3RhdGUKICAgICAgICAgICAgIyBJbiB2ZXJzaW9uIDIsIHRoZSBzdGF0ZSB3YXMgc2F2ZWQgYXMgc2lnbmVkIGludHMsIHdoaWNoIGNhdXNlcwogICAgICAgICAgICAjICAgaW5jb25zaXN0ZW5jaWVzIGJldHdlZW4gMzIvNjQtYml0IHN5c3RlbXMuIFRoZSBzdGF0ZSBpcwogICAgICAgICAgICAjICAgcmVhbGx5IHVuc2lnbmVkIDMyLWJpdCBpbnRzLCBzbyB3ZSBjb252ZXJ0IG5lZ2F0aXZlIGludHMgZnJvbQogICAgICAgICAgICAjICAgdmVyc2lvbiAyIHRvIHBvc2l0aXZlIGxvbmdzIGZvciB2ZXJzaW9uIDMuCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGludGVybmFsc3RhdGUgPSB0dXBsZSh4ICUgKDIqKjMyKSBmb3IgeCBpbiBpbnRlcm5hbHN0YXRlKQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihlKQogICAgICAgICAgICAgICAgI3JhaXNlIFR5cGVFcnJvciBmcm9tIGUKICAgICAgICAgICAgc3VwZXIoKS5zZXRzdGF0ZShpbnRlcm5hbHN0YXRlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInN0YXRlIHdpdGggdmVyc2lvbiAlcyBwYXNzZWQgdG8gIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSYW5kb20uc2V0c3RhdGUoKSBvZiB2ZXJzaW9uICVzIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZlcnNpb24sIHNlbGYuVkVSU0lPTikpCgojIyAtLS0tIE1ldGhvZHMgYmVsb3cgdGhpcyBwb2ludCBkbyBub3QgbmVlZCB0byBiZSBvdmVycmlkZGVuIHdoZW4KIyMgLS0tLSBzdWJjbGFzc2luZyBmb3IgdGhlIHB1cnBvc2Ugb2YgdXNpbmcgYSBkaWZmZXJlbnQgY29yZSBnZW5lcmF0b3IuCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBwaWNrbGUgc3VwcG9ydCAgLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfX2dldHN0YXRlX18oc2VsZik6ICMgZm9yIHBpY2tsZQogICAgICAgIHJldHVybiBzZWxmLmdldHN0YXRlKCkKCiAgICBkZWYgX19zZXRzdGF0ZV9fKHNlbGYsIHN0YXRlKTogICMgZm9yIHBpY2tsZQogICAgICAgIHNlbGYuc2V0c3RhdGUoc3RhdGUpCgogICAgZGVmIF9fcmVkdWNlX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fLCAoKSwgc2VsZi5nZXRzdGF0ZSgpCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBpbnRlZ2VyIG1ldGhvZHMgIC0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgcmFuZHJhbmdlKHNlbGYsIHN0YXJ0LCBzdG9wPU5vbmUsIHN0ZXA9MSwgaW50PWludCk6CiAgICAgICAgIiIiQ2hvb3NlIGEgcmFuZG9tIGl0ZW0gZnJvbSByYW5nZShzdGFydCwgc3RvcFssIHN0ZXBdKS4KCiAgICAgICAgVGhpcyBmaXhlcyB0aGUgcHJvYmxlbSB3aXRoIHJhbmRpbnQoKSB3aGljaCBpbmNsdWRlcyB0aGUKICAgICAgICBlbmRwb2ludDsgaW4gUHl0aG9uIHRoaXMgaXMgdXN1YWxseSBub3Qgd2hhdCB5b3Ugd2FudC4KCiAgICAgICAgRG8gbm90IHN1cHBseSB0aGUgJ2ludCcgYXJndW1lbnQuCiAgICAgICAgIiIiCgogICAgICAgICMgVGhpcyBjb2RlIGlzIGEgYml0IG1lc3N5IHRvIG1ha2UgaXQgZmFzdCBmb3IgdGhlCiAgICAgICAgIyBjb21tb24gY2FzZSB3aGlsZSBzdGlsbCBkb2luZyBhZGVxdWF0ZSBlcnJvciBjaGVja2luZy4KICAgICAgICBpc3RhcnQgPSBpbnQoc3RhcnQpCiAgICAgICAgaWYgaXN0YXJ0ICE9IHN0YXJ0OgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJub24taW50ZWdlciBhcmcgMSBmb3IgcmFuZHJhbmdlKCkiKQogICAgICAgIGlmIHN0b3AgaXMgTm9uZToKICAgICAgICAgICAgaWYgaXN0YXJ0ID4gMDoKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9yYW5kYmVsb3coaXN0YXJ0KQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJlbXB0eSByYW5nZSBmb3IgcmFuZHJhbmdlKCkiKQoKICAgICAgICAjIHN0b3AgYXJndW1lbnQgc3VwcGxpZWQuCiAgICAgICAgaXN0b3AgPSBpbnQoc3RvcCkKICAgICAgICBpZiBpc3RvcCAhPSBzdG9wOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJub24taW50ZWdlciBzdG9wIGZvciByYW5kcmFuZ2UoKSIpCiAgICAgICAgd2lkdGggPSBpc3RvcCAtIGlzdGFydAogICAgICAgIGlmIHN0ZXAgPT0gMSBhbmQgd2lkdGggPiAwOgogICAgICAgICAgICByZXR1cm4gaXN0YXJ0ICsgc2VsZi5fcmFuZGJlbG93KHdpZHRoKQogICAgICAgIGlmIHN0ZXAgPT0gMToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZW1wdHkgcmFuZ2UgZm9yIHJhbmRyYW5nZSgpICglZCwlZCwgJWQpIiAlIChpc3RhcnQsIGlzdG9wLCB3aWR0aCkpCgogICAgICAgICMgTm9uLXVuaXQgc3RlcCBhcmd1bWVudCBzdXBwbGllZC4KICAgICAgICBpc3RlcCA9IGludChzdGVwKQogICAgICAgIGlmIGlzdGVwICE9IHN0ZXA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5vbi1pbnRlZ2VyIHN0ZXAgZm9yIHJhbmRyYW5nZSgpIikKICAgICAgICBpZiBpc3RlcCA+IDA6CiAgICAgICAgICAgIG4gPSAod2lkdGggKyBpc3RlcCAtIDEpIC8vIGlzdGVwCiAgICAgICAgZWxpZiBpc3RlcCA8IDA6CiAgICAgICAgICAgIG4gPSAod2lkdGggKyBpc3RlcCArIDEpIC8vIGlzdGVwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiemVybyBzdGVwIGZvciByYW5kcmFuZ2UoKSIpCgogICAgICAgIGlmIG4gPD0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZW1wdHkgcmFuZ2UgZm9yIHJhbmRyYW5nZSgpIikKCiAgICAgICAgcmV0dXJuIGlzdGFydCArIGlzdGVwKnNlbGYuX3JhbmRiZWxvdyhuKQoKICAgIGRlZiByYW5kaW50KHNlbGYsIGEsIGIpOgogICAgICAgICIiIlJldHVybiByYW5kb20gaW50ZWdlciBpbiByYW5nZSBbYSwgYl0sIGluY2x1ZGluZyBib3RoIGVuZCBwb2ludHMuCiAgICAgICAgIiIiCgogICAgICAgIHJldHVybiBzZWxmLnJhbmRyYW5nZShhLCBiKzEpCgogICAgZGVmIF9yYW5kYmVsb3coc2VsZiwgbiwgaW50PWludCwgbWF4c2l6ZT0xPDxCUEYsIHR5cGU9dHlwZSwKICAgICAgICAgICAgICAgICAgIE1ldGhvZD1fTWV0aG9kVHlwZSwgQnVpbHRpbk1ldGhvZD1fQnVpbHRpbk1ldGhvZFR5cGUpOgogICAgICAgICJSZXR1cm4gYSByYW5kb20gaW50IGluIHRoZSByYW5nZSBbMCxuKS4gIFJhaXNlcyBWYWx1ZUVycm9yIGlmIG49PTAuIgoKICAgICAgICBnZXRyYW5kYml0cyA9IHNlbGYuZ2V0cmFuZGJpdHMKICAgICAgICAjIE9ubHkgY2FsbCBzZWxmLmdldHJhbmRiaXRzIGlmIHRoZSBvcmlnaW5hbCByYW5kb20oKSBidWlsdGluIG1ldGhvZAogICAgICAgICMgaGFzIG5vdCBiZWVuIG92ZXJyaWRkZW4gb3IgaWYgYSBuZXcgZ2V0cmFuZGJpdHMoKSB3YXMgc3VwcGxpZWQuCiAgICAgICAgaWYgdHlwZShzZWxmLnJhbmRvbSkgaXMgQnVpbHRpbk1ldGhvZCBvciB0eXBlKGdldHJhbmRiaXRzKSBpcyBNZXRob2Q6CiAgICAgICAgICAgIGsgPSBuLmJpdF9sZW5ndGgoKSAgIyBkb24ndCB1c2UgKG4tMSkgaGVyZSBiZWNhdXNlIG4gY2FuIGJlIDEKICAgICAgICAgICAgciA9IGdldHJhbmRiaXRzKGspICAgICAgICAgICMgMCA8PSByIDwgMioqawogICAgICAgICAgICB3aGlsZSByID49IG46CiAgICAgICAgICAgICAgICByID0gZ2V0cmFuZGJpdHMoaykKICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAjIFRoZXJlJ3MgYW4gb3ZlcnJpZGVuIHJhbmRvbSgpIG1ldGhvZCBidXQgbm8gbmV3IGdldHJhbmRiaXRzKCkgbWV0aG9kLAogICAgICAgICMgc28gd2UgY2FuIG9ubHkgdXNlIHJhbmRvbSgpIGZyb20gaGVyZS4KICAgICAgICByYW5kb20gPSBzZWxmLnJhbmRvbQogICAgICAgIGlmIG4gPj0gbWF4c2l6ZToKICAgICAgICAgICAgX3dhcm4oIlVuZGVybHlpbmcgcmFuZG9tKCkgZ2VuZXJhdG9yIGRvZXMgbm90IHN1cHBseSBcbiIKICAgICAgICAgICAgICAgICJlbm91Z2ggYml0cyB0byBjaG9vc2UgZnJvbSBhIHBvcHVsYXRpb24gcmFuZ2UgdGhpcyBsYXJnZS5cbiIKICAgICAgICAgICAgICAgICJUbyByZW1vdmUgdGhlIHJhbmdlIGxpbWl0YXRpb24sIGFkZCBhIGdldHJhbmRiaXRzKCkgbWV0aG9kLiIpCiAgICAgICAgICAgIHJldHVybiBpbnQocmFuZG9tKCkgKiBuKQogICAgICAgIHJlbSA9IG1heHNpemUgJSBuCiAgICAgICAgbGltaXQgPSAobWF4c2l6ZSAtIHJlbSkgLyBtYXhzaXplICAgIyBpbnQobGltaXQgKiBtYXhzaXplKSAlIG4gPT0gMAogICAgICAgIHIgPSByYW5kb20oKQogICAgICAgIHdoaWxlIHIgPj0gbGltaXQ6CiAgICAgICAgICAgIHIgPSByYW5kb20oKQogICAgICAgIHJldHVybiBpbnQociptYXhzaXplKSAlIG4KCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIHNlcXVlbmNlIG1ldGhvZHMgIC0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgY2hvaWNlKHNlbGYsIHNlcSk6CiAgICAgICAgIiIiQ2hvb3NlIGEgcmFuZG9tIGVsZW1lbnQgZnJvbSBhIG5vbi1lbXB0eSBzZXF1ZW5jZS4iIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGkgPSBzZWxmLl9yYW5kYmVsb3cobGVuKHNlcSkpCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoJ0Nhbm5vdCBjaG9vc2UgZnJvbSBhbiBlbXB0eSBzZXF1ZW5jZScpCiAgICAgICAgcmV0dXJuIHNlcVtpXQoKICAgIGRlZiBzaHVmZmxlKHNlbGYsIHgsIHJhbmRvbT1Ob25lLCBpbnQ9aW50KToKICAgICAgICAiIiJ4LCByYW5kb209cmFuZG9tLnJhbmRvbSAtPiBzaHVmZmxlIGxpc3QgeCBpbiBwbGFjZTsgcmV0dXJuIE5vbmUuCgogICAgICAgIE9wdGlvbmFsIGFyZyByYW5kb20gaXMgYSAwLWFyZ3VtZW50IGZ1bmN0aW9uIHJldHVybmluZyBhIHJhbmRvbQogICAgICAgIGZsb2F0IGluIFswLjAsIDEuMCk7IGJ5IGRlZmF1bHQsIHRoZSBzdGFuZGFyZCByYW5kb20ucmFuZG9tLgogICAgICAgICIiIgoKICAgICAgICByYW5kYmVsb3cgPSBzZWxmLl9yYW5kYmVsb3cKICAgICAgICBmb3IgaSBpbiByZXZlcnNlZChyYW5nZSgxLCBsZW4oeCkpKToKICAgICAgICAgICAgIyBwaWNrIGFuIGVsZW1lbnQgaW4geFs6aSsxXSB3aXRoIHdoaWNoIHRvIGV4Y2hhbmdlIHhbaV0KICAgICAgICAgICAgaiA9IHJhbmRiZWxvdyhpKzEpIGlmIHJhbmRvbSBpcyBOb25lIGVsc2UgaW50KHJhbmRvbSgpICogKGkrMSkpCiAgICAgICAgICAgIHhbaV0sIHhbal0gPSB4W2pdLCB4W2ldCgogICAgZGVmIHNhbXBsZShzZWxmLCBwb3B1bGF0aW9uLCBrKToKICAgICAgICAiIiJDaG9vc2VzIGsgdW5pcXVlIHJhbmRvbSBlbGVtZW50cyBmcm9tIGEgcG9wdWxhdGlvbiBzZXF1ZW5jZSBvciBzZXQuCgogICAgICAgIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIGVsZW1lbnRzIGZyb20gdGhlIHBvcHVsYXRpb24gd2hpbGUKICAgICAgICBsZWF2aW5nIHRoZSBvcmlnaW5hbCBwb3B1bGF0aW9uIHVuY2hhbmdlZC4gIFRoZSByZXN1bHRpbmcgbGlzdCBpcwogICAgICAgIGluIHNlbGVjdGlvbiBvcmRlciBzbyB0aGF0IGFsbCBzdWItc2xpY2VzIHdpbGwgYWxzbyBiZSB2YWxpZCByYW5kb20KICAgICAgICBzYW1wbGVzLiAgVGhpcyBhbGxvd3MgcmFmZmxlIHdpbm5lcnMgKHRoZSBzYW1wbGUpIHRvIGJlIHBhcnRpdGlvbmVkCiAgICAgICAgaW50byBncmFuZCBwcml6ZSBhbmQgc2Vjb25kIHBsYWNlIHdpbm5lcnMgKHRoZSBzdWJzbGljZXMpLgoKICAgICAgICBNZW1iZXJzIG9mIHRoZSBwb3B1bGF0aW9uIG5lZWQgbm90IGJlIGhhc2hhYmxlIG9yIHVuaXF1ZS4gIElmIHRoZQogICAgICAgIHBvcHVsYXRpb24gY29udGFpbnMgcmVwZWF0cywgdGhlbiBlYWNoIG9jY3VycmVuY2UgaXMgYSBwb3NzaWJsZQogICAgICAgIHNlbGVjdGlvbiBpbiB0aGUgc2FtcGxlLgoKICAgICAgICBUbyBjaG9vc2UgYSBzYW1wbGUgaW4gYSByYW5nZSBvZiBpbnRlZ2VycywgdXNlIHJhbmdlIGFzIGFuIGFyZ3VtZW50LgogICAgICAgIFRoaXMgaXMgZXNwZWNpYWxseSBmYXN0IGFuZCBzcGFjZSBlZmZpY2llbnQgZm9yIHNhbXBsaW5nIGZyb20gYQogICAgICAgIGxhcmdlIHBvcHVsYXRpb246ICAgc2FtcGxlKHJhbmdlKDEwMDAwMDAwKSwgNjApCiAgICAgICAgIiIiCgogICAgICAgICMgU2FtcGxpbmcgd2l0aG91dCByZXBsYWNlbWVudCBlbnRhaWxzIHRyYWNraW5nIGVpdGhlciBwb3RlbnRpYWwKICAgICAgICAjIHNlbGVjdGlvbnMgKHRoZSBwb29sKSBpbiBhIGxpc3Qgb3IgcHJldmlvdXMgc2VsZWN0aW9ucyBpbiBhIHNldC4KCiAgICAgICAgIyBXaGVuIHRoZSBudW1iZXIgb2Ygc2VsZWN0aW9ucyBpcyBzbWFsbCBjb21wYXJlZCB0byB0aGUKICAgICAgICAjIHBvcHVsYXRpb24sIHRoZW4gdHJhY2tpbmcgc2VsZWN0aW9ucyBpcyBlZmZpY2llbnQsIHJlcXVpcmluZwogICAgICAgICMgb25seSBhIHNtYWxsIHNldCBhbmQgYW4gb2NjYXNpb25hbCByZXNlbGVjdGlvbi4gIEZvcgogICAgICAgICMgYSBsYXJnZXIgbnVtYmVyIG9mIHNlbGVjdGlvbnMsIHRoZSBwb29sIHRyYWNraW5nIG1ldGhvZCBpcwogICAgICAgICMgcHJlZmVycmVkIHNpbmNlIHRoZSBsaXN0IHRha2VzIGxlc3Mgc3BhY2UgdGhhbiB0aGUKICAgICAgICAjIHNldCBhbmQgaXQgZG9lc24ndCBzdWZmZXIgZnJvbSBmcmVxdWVudCByZXNlbGVjdGlvbnMuCgogICAgICAgIGlmIGlzaW5zdGFuY2UocG9wdWxhdGlvbiwgX1NldCk6CiAgICAgICAgICAgIHBvcHVsYXRpb24gPSB0dXBsZShwb3B1bGF0aW9uKQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBvcHVsYXRpb24sIF9TZXF1ZW5jZSk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiUG9wdWxhdGlvbiBtdXN0IGJlIGEgc2VxdWVuY2Ugb3Igc2V0LiAgRm9yIGRpY3RzLCB1c2UgbGlzdChkKS4iKQogICAgICAgIHJhbmRiZWxvdyA9IHNlbGYuX3JhbmRiZWxvdwogICAgICAgIG4gPSBsZW4ocG9wdWxhdGlvbikKICAgICAgICBpZiBub3QgMCA8PSBrIDw9IG46CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlNhbXBsZSBsYXJnZXIgdGhhbiBwb3B1bGF0aW9uIikKICAgICAgICByZXN1bHQgPSBbTm9uZV0gKiBrCiAgICAgICAgc2V0c2l6ZSA9IDIxICAgICAgICAjIHNpemUgb2YgYSBzbWFsbCBzZXQgbWludXMgc2l6ZSBvZiBhbiBlbXB0eSBsaXN0CiAgICAgICAgaWYgayA+IDU6CiAgICAgICAgICAgIHNldHNpemUgKz0gNCAqKiBfY2VpbChfbG9nKGsgKiAzLCA0KSkgIyB0YWJsZSBzaXplIGZvciBiaWcgc2V0cwogICAgICAgIGlmIG4gPD0gc2V0c2l6ZToKICAgICAgICAgICAgIyBBbiBuLWxlbmd0aCBsaXN0IGlzIHNtYWxsZXIgdGhhbiBhIGstbGVuZ3RoIHNldAogICAgICAgICAgICBwb29sID0gbGlzdChwb3B1bGF0aW9uKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShrKTogICAgICAgICAjIGludmFyaWFudDogIG5vbi1zZWxlY3RlZCBhdCBbMCxuLWkpCiAgICAgICAgICAgICAgICBqID0gcmFuZGJlbG93KG4taSkKICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IHBvb2xbal0KICAgICAgICAgICAgICAgIHBvb2xbal0gPSBwb29sW24taS0xXSAgICMgbW92ZSBub24tc2VsZWN0ZWQgaXRlbSBpbnRvIHZhY2FuY3kKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxlY3RlZCA9IHNldCgpCiAgICAgICAgICAgIHNlbGVjdGVkX2FkZCA9IHNlbGVjdGVkLmFkZAogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShrKToKICAgICAgICAgICAgICAgIGogPSByYW5kYmVsb3cobikKICAgICAgICAgICAgICAgIHdoaWxlIGogaW4gc2VsZWN0ZWQ6CiAgICAgICAgICAgICAgICAgICAgaiA9IHJhbmRiZWxvdyhuKQogICAgICAgICAgICAgICAgc2VsZWN0ZWRfYWRkKGopCiAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSBwb3B1bGF0aW9uW2pdCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gcmVhbC12YWx1ZWQgZGlzdHJpYnV0aW9ucyAgLS0tLS0tLS0tLS0tLS0tLS0tLQoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gdW5pZm9ybSBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiB1bmlmb3JtKHNlbGYsIGEsIGIpOgogICAgICAgICJHZXQgYSByYW5kb20gbnVtYmVyIGluIHRoZSByYW5nZSBbYSwgYikgb3IgW2EsIGJdIGRlcGVuZGluZyBvbiByb3VuZGluZy4iCiAgICAgICAgcmV0dXJuIGEgKyAoYi1hKSAqIHNlbGYucmFuZG9tKCkKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIHRyaWFuZ3VsYXIgLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgdHJpYW5ndWxhcihzZWxmLCBsb3c9MC4wLCBoaWdoPTEuMCwgbW9kZT1Ob25lKToKICAgICAgICAiIiJUcmlhbmd1bGFyIGRpc3RyaWJ1dGlvbi4KCiAgICAgICAgQ29udGludW91cyBkaXN0cmlidXRpb24gYm91bmRlZCBieSBnaXZlbiBsb3dlciBhbmQgdXBwZXIgbGltaXRzLAogICAgICAgIGFuZCBoYXZpbmcgYSBnaXZlbiBtb2RlIHZhbHVlIGluLWJldHdlZW4uCgogICAgICAgIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJpYW5ndWxhcl9kaXN0cmlidXRpb24KCiAgICAgICAgIiIiCiAgICAgICAgdSA9IHNlbGYucmFuZG9tKCkKICAgICAgICBjID0gMC41IGlmIG1vZGUgaXMgTm9uZSBlbHNlIChtb2RlIC0gbG93KSAvIChoaWdoIC0gbG93KQogICAgICAgIGlmIHUgPiBjOgogICAgICAgICAgICB1ID0gMS4wIC0gdQogICAgICAgICAgICBjID0gMS4wIC0gYwogICAgICAgICAgICBsb3csIGhpZ2ggPSBoaWdoLCBsb3cKICAgICAgICByZXR1cm4gbG93ICsgKGhpZ2ggLSBsb3cpICogKHUgKiBjKSAqKiAwLjUKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIG5vcm1hbCBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgbm9ybWFsdmFyaWF0ZShzZWxmLCBtdSwgc2lnbWEpOgogICAgICAgICIiIk5vcm1hbCBkaXN0cmlidXRpb24uCgogICAgICAgIG11IGlzIHRoZSBtZWFuLCBhbmQgc2lnbWEgaXMgdGhlIHN0YW5kYXJkIGRldmlhdGlvbi4KCiAgICAgICAgIiIiCiAgICAgICAgIyBtdSA9IG1lYW4sIHNpZ21hID0gc3RhbmRhcmQgZGV2aWF0aW9uCgogICAgICAgICMgVXNlcyBLaW5kZXJtYW4gYW5kIE1vbmFoYW4gbWV0aG9kLiBSZWZlcmVuY2U6IEtpbmRlcm1hbiwKICAgICAgICAjIEEuSi4gYW5kIE1vbmFoYW4sIEouRi4sICJDb21wdXRlciBnZW5lcmF0aW9uIG9mIHJhbmRvbQogICAgICAgICMgdmFyaWFibGVzIHVzaW5nIHRoZSByYXRpbyBvZiB1bmlmb3JtIGRldmlhdGVzIiwgQUNNIFRyYW5zCiAgICAgICAgIyBNYXRoIFNvZnR3YXJlLCAzLCAoMTk3NyksIHBwMjU3LTI2MC4KCiAgICAgICAgcmFuZG9tID0gc2VsZi5yYW5kb20KICAgICAgICB3aGlsZSAxOgogICAgICAgICAgICB1MSA9IHJhbmRvbSgpCiAgICAgICAgICAgIHUyID0gMS4wIC0gcmFuZG9tKCkKICAgICAgICAgICAgeiA9IE5WX01BR0lDQ09OU1QqKHUxLTAuNSkvdTIKICAgICAgICAgICAgenogPSB6KnovNC4wCiAgICAgICAgICAgIGlmIHp6IDw9IC1fbG9nKHUyKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgcmV0dXJuIG11ICsgeipzaWdtYQoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gbG9nbm9ybWFsIGRpc3RyaWJ1dGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBsb2dub3JtdmFyaWF0ZShzZWxmLCBtdSwgc2lnbWEpOgogICAgICAgICIiIkxvZyBub3JtYWwgZGlzdHJpYnV0aW9uLgoKICAgICAgICBJZiB5b3UgdGFrZSB0aGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgdGhpcyBkaXN0cmlidXRpb24sIHlvdSdsbCBnZXQgYQogICAgICAgIG5vcm1hbCBkaXN0cmlidXRpb24gd2l0aCBtZWFuIG11IGFuZCBzdGFuZGFyZCBkZXZpYXRpb24gc2lnbWEuCiAgICAgICAgbXUgY2FuIGhhdmUgYW55IHZhbHVlLCBhbmQgc2lnbWEgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby4KCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIF9leHAoc2VsZi5ub3JtYWx2YXJpYXRlKG11LCBzaWdtYSkpCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBleHBvbmVudGlhbCBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgZXhwb3ZhcmlhdGUoc2VsZiwgbGFtYmQpOgogICAgICAgICIiIkV4cG9uZW50aWFsIGRpc3RyaWJ1dGlvbi4KCiAgICAgICAgbGFtYmQgaXMgMS4wIGRpdmlkZWQgYnkgdGhlIGRlc2lyZWQgbWVhbi4gIEl0IHNob3VsZCBiZQogICAgICAgIG5vbnplcm8uICAoVGhlIHBhcmFtZXRlciB3b3VsZCBiZSBjYWxsZWQgImxhbWJkYSIsIGJ1dCB0aGF0IGlzCiAgICAgICAgYSByZXNlcnZlZCB3b3JkIGluIFB5dGhvbi4pICBSZXR1cm5lZCB2YWx1ZXMgcmFuZ2UgZnJvbSAwIHRvCiAgICAgICAgcG9zaXRpdmUgaW5maW5pdHkgaWYgbGFtYmQgaXMgcG9zaXRpdmUsIGFuZCBmcm9tIG5lZ2F0aXZlCiAgICAgICAgaW5maW5pdHkgdG8gMCBpZiBsYW1iZCBpcyBuZWdhdGl2ZS4KCiAgICAgICAgIiIiCiAgICAgICAgIyBsYW1iZDogcmF0ZSBsYW1iZCA9IDEvbWVhbgogICAgICAgICMgKCdsYW1iZGEnIGlzIGEgUHl0aG9uIHJlc2VydmVkIHdvcmQpCgogICAgICAgICMgd2UgdXNlIDEtcmFuZG9tKCkgaW5zdGVhZCBvZiByYW5kb20oKSB0byBwcmVjbHVkZSB0aGUKICAgICAgICAjIHBvc3NpYmlsaXR5IG9mIHRha2luZyB0aGUgbG9nIG9mIHplcm8uCiAgICAgICAgcmV0dXJuIC1fbG9nKDEuMCAtIHNlbGYucmFuZG9tKCkpL2xhbWJkCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSB2b24gTWlzZXMgZGlzdHJpYnV0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIHZvbm1pc2VzdmFyaWF0ZShzZWxmLCBtdSwga2FwcGEpOgogICAgICAgICIiIkNpcmN1bGFyIGRhdGEgZGlzdHJpYnV0aW9uLgoKICAgICAgICBtdSBpcyB0aGUgbWVhbiBhbmdsZSwgZXhwcmVzc2VkIGluIHJhZGlhbnMgYmV0d2VlbiAwIGFuZCAyKnBpLCBhbmQKICAgICAgICBrYXBwYSBpcyB0aGUgY29uY2VudHJhdGlvbiBwYXJhbWV0ZXIsIHdoaWNoIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yCiAgICAgICAgZXF1YWwgdG8gemVyby4gIElmIGthcHBhIGlzIGVxdWFsIHRvIHplcm8sIHRoaXMgZGlzdHJpYnV0aW9uIHJlZHVjZXMKICAgICAgICB0byBhIHVuaWZvcm0gcmFuZG9tIGFuZ2xlIG92ZXIgdGhlIHJhbmdlIDAgdG8gMipwaS4KCiAgICAgICAgIiIiCiAgICAgICAgIyBtdTogICAgbWVhbiBhbmdsZSAoaW4gcmFkaWFucyBiZXR3ZWVuIDAgYW5kIDIqcGkpCiAgICAgICAgIyBrYXBwYTogY29uY2VudHJhdGlvbiBwYXJhbWV0ZXIga2FwcGEgKD49IDApCiAgICAgICAgIyBpZiBrYXBwYSA9IDAgZ2VuZXJhdGUgdW5pZm9ybSByYW5kb20gYW5nbGUKCiAgICAgICAgIyBCYXNlZCB1cG9uIGFuIGFsZ29yaXRobSBwdWJsaXNoZWQgaW46IEZpc2hlciwgTi5JLiwKICAgICAgICAjICJTdGF0aXN0aWNhbCBBbmFseXNpcyBvZiBDaXJjdWxhciBEYXRhIiwgQ2FtYnJpZGdlCiAgICAgICAgIyBVbml2ZXJzaXR5IFByZXNzLCAxOTkzLgoKICAgICAgICAjIFRoYW5rcyB0byBNYWdudXMgS2Vzc2xlciBmb3IgYSBjb3JyZWN0aW9uIHRvIHRoZQogICAgICAgICMgaW1wbGVtZW50YXRpb24gb2Ygc3RlcCA0LgoKICAgICAgICByYW5kb20gPSBzZWxmLnJhbmRvbQogICAgICAgIGlmIGthcHBhIDw9IDFlLTY6CiAgICAgICAgICAgIHJldHVybiBUV09QSSAqIHJhbmRvbSgpCgogICAgICAgIGEgPSAxLjAgKyBfc3FydCgxLjAgKyA0LjAgKiBrYXBwYSAqIGthcHBhKQogICAgICAgIGIgPSAoYSAtIF9zcXJ0KDIuMCAqIGEpKS8oMi4wICoga2FwcGEpCiAgICAgICAgciA9ICgxLjAgKyBiICogYikvKDIuMCAqIGIpCgogICAgICAgIHdoaWxlIDE6CiAgICAgICAgICAgIHUxID0gcmFuZG9tKCkKCiAgICAgICAgICAgIHogPSBfY29zKF9waSAqIHUxKQogICAgICAgICAgICBmID0gKDEuMCArIHIgKiB6KS8ociArIHopCiAgICAgICAgICAgIGMgPSBrYXBwYSAqIChyIC0gZikKCiAgICAgICAgICAgIHUyID0gcmFuZG9tKCkKCiAgICAgICAgICAgIGlmIHUyIDwgYyAqICgyLjAgLSBjKSBvciB1MiA8PSBjICogX2V4cCgxLjAgLSBjKToKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHUzID0gcmFuZG9tKCkKICAgICAgICBpZiB1MyA+IDAuNToKICAgICAgICAgICAgdGhldGEgPSAobXUgJSBUV09QSSkgKyBfYWNvcyhmKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRoZXRhID0gKG11ICUgVFdPUEkpIC0gX2Fjb3MoZikKCiAgICAgICAgcmV0dXJuIHRoZXRhCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBnYW1tYSBkaXN0cmlidXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgZ2FtbWF2YXJpYXRlKHNlbGYsIGFscGhhLCBiZXRhKToKICAgICAgICAiIiJHYW1tYSBkaXN0cmlidXRpb24uICBOb3QgdGhlIGdhbW1hIGZ1bmN0aW9uIQoKICAgICAgICBDb25kaXRpb25zIG9uIHRoZSBwYXJhbWV0ZXJzIGFyZSBhbHBoYSA+IDAgYW5kIGJldGEgPiAwLgoKICAgICAgICBUaGUgcHJvYmFiaWxpdHkgZGlzdHJpYnV0aW9uIGZ1bmN0aW9uIGlzOgoKICAgICAgICAgICAgICAgICAgICB4ICoqIChhbHBoYSAtIDEpICogbWF0aC5leHAoLXggLyBiZXRhKQogICAgICAgICAgcGRmKHgpID0gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICAgICAgICBtYXRoLmdhbW1hKGFscGhhKSAqIGJldGEgKiogYWxwaGEKCiAgICAgICAgIiIiCgogICAgICAgICMgYWxwaGEgPiAwLCBiZXRhID4gMCwgbWVhbiBpcyBhbHBoYSpiZXRhLCB2YXJpYW5jZSBpcyBhbHBoYSpiZXRhKioyCgogICAgICAgICMgV2FybmluZzogYSBmZXcgb2xkZXIgc291cmNlcyBkZWZpbmUgdGhlIGdhbW1hIGRpc3RyaWJ1dGlvbiBpbiB0ZXJtcwogICAgICAgICMgb2YgYWxwaGEgPiAtMS4wCiAgICAgICAgaWYgYWxwaGEgPD0gMC4wIG9yIGJldGEgPD0gMC4wOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdnYW1tYXZhcmlhdGU6IGFscGhhIGFuZCBiZXRhIG11c3QgYmUgPiAwLjAnKQoKICAgICAgICByYW5kb20gPSBzZWxmLnJhbmRvbQogICAgICAgIGlmIGFscGhhID4gMS4wOgoKICAgICAgICAgICAgIyBVc2VzIFIuQy5ILiBDaGVuZywgIlRoZSBnZW5lcmF0aW9uIG9mIEdhbW1hCiAgICAgICAgICAgICMgdmFyaWFibGVzIHdpdGggbm9uLWludGVncmFsIHNoYXBlIHBhcmFtZXRlcnMiLAogICAgICAgICAgICAjIEFwcGxpZWQgU3RhdGlzdGljcywgKDE5NzcpLCAyNiwgTm8uIDEsIHA3MS03NAoKICAgICAgICAgICAgYWludiA9IF9zcXJ0KDIuMCAqIGFscGhhIC0gMS4wKQogICAgICAgICAgICBiYmIgPSBhbHBoYSAtIExPRzQKICAgICAgICAgICAgY2NjID0gYWxwaGEgKyBhaW52CgogICAgICAgICAgICB3aGlsZSAxOgogICAgICAgICAgICAgICAgdTEgPSByYW5kb20oKQogICAgICAgICAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAgICAgICAgICNpZiBub3QgMWUtNyA8IHUxIDwgLjk5OTk5OTk6CiAgICAgICAgICAgICAgICBpZiBub3QgMWUtNyA8IHUxIDwgMC45OTk5OTk5OgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICB1MiA9IDEuMCAtIHJhbmRvbSgpCiAgICAgICAgICAgICAgICB2ID0gX2xvZyh1MS8oMS4wLXUxKSkvYWludgogICAgICAgICAgICAgICAgeCA9IGFscGhhKl9leHAodikKICAgICAgICAgICAgICAgIHogPSB1MSp1MSp1MgogICAgICAgICAgICAgICAgciA9IGJiYitjY2Mqdi14CiAgICAgICAgICAgICAgICBpZiByICsgU0dfTUFHSUNDT05TVCAtIDQuNSp6ID49IDAuMCBvciByID49IF9sb2coeik6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHggKiBiZXRhCgogICAgICAgIGVsaWYgYWxwaGEgPT0gMS4wOgogICAgICAgICAgICAjIGV4cG92YXJpYXRlKDEpCiAgICAgICAgICAgIHUgPSByYW5kb20oKQogICAgICAgICAgICB3aGlsZSB1IDw9IDFlLTc6CiAgICAgICAgICAgICAgICB1ID0gcmFuZG9tKCkKICAgICAgICAgICAgcmV0dXJuIC1fbG9nKHUpICogYmV0YQoKICAgICAgICBlbHNlOiAgICMgYWxwaGEgaXMgYmV0d2VlbiAwIGFuZCAxIChleGNsdXNpdmUpCgogICAgICAgICAgICAjIFVzZXMgQUxHT1JJVEhNIEdTIG9mIFN0YXRpc3RpY2FsIENvbXB1dGluZyAtIEtlbm5lZHkgJiBHZW50bGUKCiAgICAgICAgICAgIHdoaWxlIDE6CiAgICAgICAgICAgICAgICB1ID0gcmFuZG9tKCkKICAgICAgICAgICAgICAgIGIgPSAoX2UgKyBhbHBoYSkvX2UKICAgICAgICAgICAgICAgIHAgPSBiKnUKICAgICAgICAgICAgICAgIGlmIHAgPD0gMS4wOgogICAgICAgICAgICAgICAgICAgIHggPSBwICoqICgxLjAvYWxwaGEpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHggPSAtX2xvZygoYi1wKS9hbHBoYSkKICAgICAgICAgICAgICAgIHUxID0gcmFuZG9tKCkKICAgICAgICAgICAgICAgIGlmIHAgPiAxLjA6CiAgICAgICAgICAgICAgICAgICAgaWYgdTEgPD0geCAqKiAoYWxwaGEgLSAxLjApOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiB1MSA8PSBfZXhwKC14KToKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICByZXR1cm4geCAqIGJldGEKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIEdhdXNzIChmYXN0ZXIgYWx0ZXJuYXRpdmUpIC0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGdhdXNzKHNlbGYsIG11LCBzaWdtYSk6CiAgICAgICAgIiIiR2F1c3NpYW4gZGlzdHJpYnV0aW9uLgoKICAgICAgICBtdSBpcyB0aGUgbWVhbiwgYW5kIHNpZ21hIGlzIHRoZSBzdGFuZGFyZCBkZXZpYXRpb24uICBUaGlzIGlzCiAgICAgICAgc2xpZ2h0bHkgZmFzdGVyIHRoYW4gdGhlIG5vcm1hbHZhcmlhdGUoKSBmdW5jdGlvbi4KCiAgICAgICAgTm90IHRocmVhZC1zYWZlIHdpdGhvdXQgYSBsb2NrIGFyb3VuZCBjYWxscy4KCiAgICAgICAgIiIiCgogICAgICAgICMgV2hlbiB4IGFuZCB5IGFyZSB0d28gdmFyaWFibGVzIGZyb20gWzAsIDEpLCB1bmlmb3JtbHkKICAgICAgICAjIGRpc3RyaWJ1dGVkLCB0aGVuCiAgICAgICAgIwogICAgICAgICMgICAgY29zKDIqcGkqeCkqc3FydCgtMipsb2coMS15KSkKICAgICAgICAjICAgIHNpbigyKnBpKngpKnNxcnQoLTIqbG9nKDEteSkpCiAgICAgICAgIwogICAgICAgICMgYXJlIHR3byAqaW5kZXBlbmRlbnQqIHZhcmlhYmxlcyB3aXRoIG5vcm1hbCBkaXN0cmlidXRpb24KICAgICAgICAjIChtdSA9IDAsIHNpZ21hID0gMSkuCiAgICAgICAgIyAoTGFtYmVydCBNZWVydGVucykKICAgICAgICAjIChjb3JyZWN0ZWQgdmVyc2lvbjsgYnVnIGRpc2NvdmVyZWQgYnkgTWlrZSBNaWxsZXIsIGZpeGVkIGJ5IExNKQoKICAgICAgICAjIE11bHRpdGhyZWFkaW5nIG5vdGU6IFdoZW4gdHdvIHRocmVhZHMgY2FsbCB0aGlzIGZ1bmN0aW9uCiAgICAgICAgIyBzaW11bHRhbmVvdXNseSwgaXQgaXMgcG9zc2libGUgdGhhdCB0aGV5IHdpbGwgcmVjZWl2ZSB0aGUKICAgICAgICAjIHNhbWUgcmV0dXJuIHZhbHVlLiAgVGhlIHdpbmRvdyBpcyB2ZXJ5IHNtYWxsIHRob3VnaC4gIFRvCiAgICAgICAgIyBhdm9pZCB0aGlzLCB5b3UgaGF2ZSB0byB1c2UgYSBsb2NrIGFyb3VuZCBhbGwgY2FsbHMuICAoSQogICAgICAgICMgZGlkbid0IHdhbnQgdG8gc2xvdyB0aGlzIGRvd24gaW4gdGhlIHNlcmlhbCBjYXNlIGJ5IHVzaW5nIGEKICAgICAgICAjIGxvY2sgaGVyZS4pCgogICAgICAgIHJhbmRvbSA9IHNlbGYucmFuZG9tCiAgICAgICAgeiA9IHNlbGYuZ2F1c3NfbmV4dAogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKICAgICAgICBpZiB6IGlzIE5vbmU6CiAgICAgICAgICAgIHgycGkgPSByYW5kb20oKSAqIFRXT1BJCiAgICAgICAgICAgIGcycmFkID0gX3NxcnQoLTIuMCAqIF9sb2coMS4wIC0gcmFuZG9tKCkpKQogICAgICAgICAgICB6ID0gX2Nvcyh4MnBpKSAqIGcycmFkCiAgICAgICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IF9zaW4oeDJwaSkgKiBnMnJhZAoKICAgICAgICByZXR1cm4gbXUgKyB6KnNpZ21hCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBiZXRhIC0tLS0tLS0tLS0tLS0tLS0tLS0tCiMjIFNlZQojIyBodHRwOi8vbWFpbC5weXRob24ub3JnL3BpcGVybWFpbC9weXRob24tYnVncy1saXN0LzIwMDEtSmFudWFyeS8wMDM3NTIuaHRtbAojIyBmb3IgSXZhbiBGcm9obmUncyBpbnNpZ2h0ZnVsIGFuYWx5c2lzIG9mIHdoeSB0aGUgb3JpZ2luYWwgaW1wbGVtZW50YXRpb246CiMjCiMjICAgIGRlZiBiZXRhdmFyaWF0ZShzZWxmLCBhbHBoYSwgYmV0YSk6CiMjICAgICAgICAjIERpc2NyZXRlIEV2ZW50IFNpbXVsYXRpb24gaW4gQywgcHAgODctODguCiMjCiMjICAgICAgICB5ID0gc2VsZi5leHBvdmFyaWF0ZShhbHBoYSkKIyMgICAgICAgIHogPSBzZWxmLmV4cG92YXJpYXRlKDEuMC9iZXRhKQojIyAgICAgICAgcmV0dXJuIHovKHkreikKIyMKIyMgd2FzIGRlYWQgd3JvbmcsIGFuZCBob3cgaXQgcHJvYmFibHkgZ290IHRoYXQgd2F5LgoKICAgIGRlZiBiZXRhdmFyaWF0ZShzZWxmLCBhbHBoYSwgYmV0YSk6CiAgICAgICAgIiIiQmV0YSBkaXN0cmlidXRpb24uCgogICAgICAgIENvbmRpdGlvbnMgb24gdGhlIHBhcmFtZXRlcnMgYXJlIGFscGhhID4gMCBhbmQgYmV0YSA+IDAuCiAgICAgICAgUmV0dXJuZWQgdmFsdWVzIHJhbmdlIGJldHdlZW4gMCBhbmQgMS4KCiAgICAgICAgIiIiCgogICAgICAgICMgVGhpcyB2ZXJzaW9uIGR1ZSB0byBKYW5uZSBTaW5ra29uZW4sIGFuZCBtYXRjaGVzIGFsbCB0aGUgc3RkCiAgICAgICAgIyB0ZXh0cyAoZS5nLiwgS251dGggVm9sIDIgRWQgMyBwZyAxMzQgInRoZSBiZXRhIGRpc3RyaWJ1dGlvbiIpLgogICAgICAgIHkgPSBzZWxmLmdhbW1hdmFyaWF0ZShhbHBoYSwgMS4pCiAgICAgICAgaWYgeSA9PSAwOgogICAgICAgICAgICByZXR1cm4gMC4wCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHkgLyAoeSArIHNlbGYuZ2FtbWF2YXJpYXRlKGJldGEsIDEuKSkKCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tIFBhcmV0byAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBwYXJldG92YXJpYXRlKHNlbGYsIGFscGhhKToKICAgICAgICAiIiJQYXJldG8gZGlzdHJpYnV0aW9uLiAgYWxwaGEgaXMgdGhlIHNoYXBlIHBhcmFtZXRlci4iIiIKICAgICAgICAjIEphaW4sIHBnLiA0OTUKCiAgICAgICAgdSA9IDEuMCAtIHNlbGYucmFuZG9tKCkKICAgICAgICByZXR1cm4gMS4wIC8gdSAqKiAoMS4wL2FscGhhKQoKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gV2VpYnVsbCAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiB3ZWlidWxsdmFyaWF0ZShzZWxmLCBhbHBoYSwgYmV0YSk6CiAgICAgICAgIiIiV2VpYnVsbCBkaXN0cmlidXRpb24uCgogICAgICAgIGFscGhhIGlzIHRoZSBzY2FsZSBwYXJhbWV0ZXIgYW5kIGJldGEgaXMgdGhlIHNoYXBlIHBhcmFtZXRlci4KCiAgICAgICAgIiIiCiAgICAgICAgIyBKYWluLCBwZy4gNDk5OyBidWcgZml4IGNvdXJ0ZXN5IEJpbGwgQXJtcwoKICAgICAgICB1ID0gMS4wIC0gc2VsZi5yYW5kb20oKQogICAgICAgIHJldHVybiBhbHBoYSAqICgtX2xvZyh1KSkgKiogKDEuMC9iZXRhKQoKCiMjIC0tLS0tLS0tLS0tLS0tLSBPcGVyYXRpbmcgU3lzdGVtIFJhbmRvbSBTb3VyY2UgIC0tLS0tLS0tLS0tLS0tLS0tLQoKY2xhc3MgU3lzdGVtUmFuZG9tKFJhbmRvbSk6CiAgICAiIiJBbHRlcm5hdGUgcmFuZG9tIG51bWJlciBnZW5lcmF0b3IgdXNpbmcgc291cmNlcyBwcm92aWRlZAogICAgYnkgdGhlIG9wZXJhdGluZyBzeXN0ZW0gKHN1Y2ggYXMgL2Rldi91cmFuZG9tIG9uIFVuaXggb3IKICAgIENyeXB0R2VuUmFuZG9tIG9uIFdpbmRvd3MpLgoKICAgICBOb3QgYXZhaWxhYmxlIG9uIGFsbCBzeXN0ZW1zIChzZWUgb3MudXJhbmRvbSgpIGZvciBkZXRhaWxzKS4KICAgICIiIgoKICAgIGRlZiByYW5kb20oc2VsZik6CiAgICAgICAgIiIiR2V0IHRoZSBuZXh0IHJhbmRvbSBudW1iZXIgaW4gdGhlIHJhbmdlIFswLjAsIDEuMCkuIiIiCiAgICAgICAgcmV0dXJuIChpbnQuZnJvbV9ieXRlcyhfdXJhbmRvbSg3KSwgJ2JpZycpID4+IDMpICogUkVDSVBfQlBGCgogICAgZGVmIGdldHJhbmRiaXRzKHNlbGYsIGspOgogICAgICAgICIiImdldHJhbmRiaXRzKGspIC0+IHguICBHZW5lcmF0ZXMgYSBsb25nIGludCB3aXRoIGsgcmFuZG9tIGJpdHMuIiIiCiAgICAgICAgaWYgayA8PSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdudW1iZXIgb2YgYml0cyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvJykKICAgICAgICBpZiBrICE9IGludChrKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdudW1iZXIgb2YgYml0cyBzaG91bGQgYmUgYW4gaW50ZWdlcicpCiAgICAgICAgbnVtYnl0ZXMgPSAoayArIDcpIC8vIDggICAgICAgICAgICAgICAgICAgICAgICMgYml0cyAvIDggYW5kIHJvdW5kZWQgdXAKICAgICAgICB4ID0gaW50LmZyb21fYnl0ZXMoX3VyYW5kb20obnVtYnl0ZXMpLCAnYmlnJykKICAgICAgICByZXR1cm4geCA+PiAobnVtYnl0ZXMgKiA4IC0gaykgICAgICAgICAgICAgICAgIyB0cmltIGV4Y2VzcyBiaXRzCgogICAgZGVmIHNlZWQoc2VsZiwgKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgIlN0dWIgbWV0aG9kLiAgTm90IHVzZWQgZm9yIGEgc3lzdGVtIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yLiIKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBfbm90aW1wbGVtZW50ZWQoc2VsZiwgKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgIk1ldGhvZCBzaG91bGQgbm90IGJlIGNhbGxlZCBmb3IgYSBzeXN0ZW0gcmFuZG9tIG51bWJlciBnZW5lcmF0b3IuIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoJ1N5c3RlbSBlbnRyb3B5IHNvdXJjZSBkb2VzIG5vdCBoYXZlIHN0YXRlLicpCiAgICBnZXRzdGF0ZSA9IHNldHN0YXRlID0gX25vdGltcGxlbWVudGVkCgojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLSB0ZXN0IHByb2dyYW0gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfdGVzdF9nZW5lcmF0b3IobiwgZnVuYywgYXJncyk6CiAgICBpbXBvcnQgdGltZQogICAgcHJpbnQobiwgJ3RpbWVzJywgZnVuYy5fX25hbWVfXykKICAgIHRvdGFsID0gMC4wCiAgICBzcXN1bSA9IDAuMAogICAgc21hbGxlc3QgPSAxZTEwCiAgICBsYXJnZXN0ID0gLTFlMTAKICAgIHQwID0gdGltZS50aW1lKCkKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIHggPSBmdW5jKCphcmdzKQogICAgICAgIHRvdGFsICs9IHgKICAgICAgICBzcXN1bSA9IHNxc3VtICsgeCp4CiAgICAgICAgc21hbGxlc3QgPSBtaW4oeCwgc21hbGxlc3QpCiAgICAgICAgbGFyZ2VzdCA9IG1heCh4LCBsYXJnZXN0KQogICAgdDEgPSB0aW1lLnRpbWUoKQogICAgcHJpbnQocm91bmQodDEtdDAsIDMpLCAnc2VjLCcsIGVuZD0nICcpCiAgICBhdmcgPSB0b3RhbC9uCiAgICBzdGRkZXYgPSBfc3FydChzcXN1bS9uIC0gYXZnKmF2ZykKICAgIHByaW50KCdhdmcgJWcsIHN0ZGRldiAlZywgbWluICVnLCBtYXggJWcnICUgXAogICAgICAgICAgICAgIChhdmcsIHN0ZGRldiwgc21hbGxlc3QsIGxhcmdlc3QpKQoKCmRlZiBfdGVzdChOPTIwMDApOgogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIHJhbmRvbSwgKCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgbm9ybWFsdmFyaWF0ZSwgKDAuMCwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBsb2dub3JtdmFyaWF0ZSwgKDAuMCwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCB2b25taXNlc3ZhcmlhdGUsICgwLjAsIDEuMCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgZ2FtbWF2YXJpYXRlLCAoMC4wMSwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBnYW1tYXZhcmlhdGUsICgwLjEsIDEuMCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgZ2FtbWF2YXJpYXRlLCAoMC4xLCAyLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhbW1hdmFyaWF0ZSwgKDAuNSwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBnYW1tYXZhcmlhdGUsICgwLjksIDEuMCkpCiAgICBfdGVzdF9nZW5lcmF0b3IoTiwgZ2FtbWF2YXJpYXRlLCAoMS4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhbW1hdmFyaWF0ZSwgKDIuMCwgMS4wKSkKICAgIF90ZXN0X2dlbmVyYXRvcihOLCBnYW1tYXZhcmlhdGUsICgyMC4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhbW1hdmFyaWF0ZSwgKDIwMC4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGdhdXNzLCAoMC4wLCAxLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIGJldGF2YXJpYXRlLCAoMy4wLCAzLjApKQogICAgX3Rlc3RfZ2VuZXJhdG9yKE4sIHRyaWFuZ3VsYXIsICgwLjAsIDEuMCwgMS4wLzMuMCkpCgojIENyZWF0ZSBvbmUgaW5zdGFuY2UsIHNlZWRlZCBmcm9tIGN1cnJlbnQgdGltZSwgYW5kIGV4cG9ydCBpdHMgbWV0aG9kcwojIGFzIG1vZHVsZS1sZXZlbCBmdW5jdGlvbnMuICBUaGUgZnVuY3Rpb25zIHNoYXJlIHN0YXRlIGFjcm9zcyBhbGwgdXNlcwojKGJvdGggaW4gdGhlIHVzZXIncyBjb2RlIGFuZCBpbiB0aGUgUHl0aG9uIGxpYnJhcmllcyksIGJ1dCB0aGF0J3MgZmluZQojIGZvciBtb3N0IHByb2dyYW1zIGFuZCBpcyBlYXNpZXIgZm9yIHRoZSBjYXN1YWwgdXNlciB0aGFuIG1ha2luZyB0aGVtCiMgaW5zdGFudGlhdGUgdGhlaXIgb3duIFJhbmRvbSgpIGluc3RhbmNlLgoKX2luc3QgPSBSYW5kb20oKQpzZWVkID0gX2luc3Quc2VlZApyYW5kb20gPSBfaW5zdC5yYW5kb20KdW5pZm9ybSA9IF9pbnN0LnVuaWZvcm0KdHJpYW5ndWxhciA9IF9pbnN0LnRyaWFuZ3VsYXIKcmFuZGludCA9IF9pbnN0LnJhbmRpbnQKY2hvaWNlID0gX2luc3QuY2hvaWNlCnJhbmRyYW5nZSA9IF9pbnN0LnJhbmRyYW5nZQpzYW1wbGUgPSBfaW5zdC5zYW1wbGUKc2h1ZmZsZSA9IF9pbnN0LnNodWZmbGUKbm9ybWFsdmFyaWF0ZSA9IF9pbnN0Lm5vcm1hbHZhcmlhdGUKbG9nbm9ybXZhcmlhdGUgPSBfaW5zdC5sb2dub3JtdmFyaWF0ZQpleHBvdmFyaWF0ZSA9IF9pbnN0LmV4cG92YXJpYXRlCnZvbm1pc2VzdmFyaWF0ZSA9IF9pbnN0LnZvbm1pc2VzdmFyaWF0ZQpnYW1tYXZhcmlhdGUgPSBfaW5zdC5nYW1tYXZhcmlhdGUKZ2F1c3MgPSBfaW5zdC5nYXVzcwpiZXRhdmFyaWF0ZSA9IF9pbnN0LmJldGF2YXJpYXRlCnBhcmV0b3ZhcmlhdGUgPSBfaW5zdC5wYXJldG92YXJpYXRlCndlaWJ1bGx2YXJpYXRlID0gX2luc3Qud2VpYnVsbHZhcmlhdGUKZ2V0c3RhdGUgPSBfaW5zdC5nZXRzdGF0ZQpzZXRzdGF0ZSA9IF9pbnN0LnNldHN0YXRlCmdldHJhbmRiaXRzID0gX2luc3QuZ2V0cmFuZGJpdHMKCiNpZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgojICAgIF90ZXN0KCkKCg==',
'/Lib/pprint.py':'IyAgQXV0aG9yOiAgICAgIEZyZWQgTC4gRHJha2UsIEpyLg0KIyAgICAgICAgICAgICAgIGZkcmFrZUBhY20ub3JnDQojDQojICBUaGlzIGlzIGEgc2ltcGxlIGxpdHRsZSBtb2R1bGUgSSB3cm90ZSB0byBtYWtlIGxpZmUgZWFzaWVyLiAgSSBkaWRuJ3QNCiMgIHNlZSBhbnl0aGluZyBxdWl0ZSBsaWtlIGl0IGluIHRoZSBsaWJyYXJ5LCB0aG91Z2ggSSBtYXkgaGF2ZSBvdmVybG9va2VkDQojICBzb21ldGhpbmcuICBJIHdyb3RlIHRoaXMgd2hlbiBJIHdhcyB0cnlpbmcgdG8gcmVhZCBzb21lIGhlYXZpbHkgbmVzdGVkDQojICB0dXBsZXMgd2l0aCBmYWlybHkgbm9uLWRlc2NyaXB0aXZlIGNvbnRlbnQuICBUaGlzIGlzIG1vZGVsZWQgdmVyeSBtdWNoDQojICBhZnRlciBMaXNwL1NjaGVtZSAtIHN0eWxlIHByZXR0eS1wcmludGluZyBvZiBsaXN0cy4gIElmIHlvdSBmaW5kIGl0DQojICB1c2VmdWwsIHRoYW5rIHNtYWxsIGNoaWxkcmVuIHdobyBzbGVlcCBhdCBuaWdodC4NCg0KIiIiU3VwcG9ydCB0byBwcmV0dHktcHJpbnQgbGlzdHMsIHR1cGxlcywgJiBkaWN0aW9uYXJpZXMgcmVjdXJzaXZlbHkuDQoNClZlcnkgc2ltcGxlLCBidXQgdXNlZnVsLCBlc3BlY2lhbGx5IGluIGRlYnVnZ2luZyBkYXRhIHN0cnVjdHVyZXMuDQoNCkNsYXNzZXMNCi0tLS0tLS0NCg0KUHJldHR5UHJpbnRlcigpDQogICAgSGFuZGxlIHByZXR0eS1wcmludGluZyBvcGVyYXRpb25zIG9udG8gYSBzdHJlYW0gdXNpbmcgYSBjb25maWd1cmVkDQogICAgc2V0IG9mIGZvcm1hdHRpbmcgcGFyYW1ldGVycy4NCg0KRnVuY3Rpb25zDQotLS0tLS0tLS0NCg0KcGZvcm1hdCgpDQogICAgRm9ybWF0IGEgUHl0aG9uIG9iamVjdCBpbnRvIGEgcHJldHR5LXByaW50ZWQgcmVwcmVzZW50YXRpb24uDQoNCnBwcmludCgpDQogICAgUHJldHR5LXByaW50IGEgUHl0aG9uIG9iamVjdCB0byBhIHN0cmVhbSBbZGVmYXVsdCBpcyBzeXMuc3Rkb3V0XS4NCg0Kc2FmZXJlcHIoKQ0KICAgIEdlbmVyYXRlIGEgJ3N0YW5kYXJkJyByZXByKCktbGlrZSB2YWx1ZSwgYnV0IHByb3RlY3QgYWdhaW5zdCByZWN1cnNpdmUNCiAgICBkYXRhIHN0cnVjdHVyZXMuDQoNCiIiIg0KDQppbXBvcnQgc3lzIGFzIF9zeXMNCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE9yZGVyZWREaWN0IGFzIF9PcmRlcmVkRGljdA0KZnJvbSBpbyBpbXBvcnQgU3RyaW5nSU8gYXMgX1N0cmluZ0lPDQoNCl9fYWxsX18gPSBbInBwcmludCIsInBmb3JtYXQiLCJpc3JlYWRhYmxlIiwiaXNyZWN1cnNpdmUiLCJzYWZlcmVwciIsDQogICAgICAgICAgICJQcmV0dHlQcmludGVyIl0NCg0KIyBjYWNoZSB0aGVzZSBmb3IgZmFzdGVyIGFjY2VzczoNCl9jb21tYWpvaW4gPSAiLCAiLmpvaW4NCl9pZCA9IGlkDQpfbGVuID0gbGVuDQpfdHlwZSA9IHR5cGUNCg0KDQpkZWYgcHByaW50KG9iamVjdCwgc3RyZWFtPU5vbmUsIGluZGVudD0xLCB3aWR0aD04MCwgZGVwdGg9Tm9uZSk6DQogICAgIiIiUHJldHR5LXByaW50IGEgUHl0aG9uIG9iamVjdCB0byBhIHN0cmVhbSBbZGVmYXVsdCBpcyBzeXMuc3Rkb3V0XS4iIiINCiAgICBwcmludGVyID0gUHJldHR5UHJpbnRlcigNCiAgICAgICAgc3RyZWFtPXN0cmVhbSwgaW5kZW50PWluZGVudCwgd2lkdGg9d2lkdGgsIGRlcHRoPWRlcHRoKQ0KICAgIHByaW50ZXIucHByaW50KG9iamVjdCkNCg0KZGVmIHBmb3JtYXQob2JqZWN0LCBpbmRlbnQ9MSwgd2lkdGg9ODAsIGRlcHRoPU5vbmUpOg0KICAgICIiIkZvcm1hdCBhIFB5dGhvbiBvYmplY3QgaW50byBhIHByZXR0eS1wcmludGVkIHJlcHJlc2VudGF0aW9uLiIiIg0KICAgIHJldHVybiBQcmV0dHlQcmludGVyKGluZGVudD1pbmRlbnQsIHdpZHRoPXdpZHRoLCBkZXB0aD1kZXB0aCkucGZvcm1hdChvYmplY3QpDQoNCmRlZiBzYWZlcmVwcihvYmplY3QpOg0KICAgICIiIlZlcnNpb24gb2YgcmVwcigpIHdoaWNoIGNhbiBoYW5kbGUgcmVjdXJzaXZlIGRhdGEgc3RydWN0dXJlcy4iIiINCiAgICByZXR1cm4gX3NhZmVfcmVwcihvYmplY3QsIHt9LCBOb25lLCAwKVswXQ0KDQpkZWYgaXNyZWFkYWJsZShvYmplY3QpOg0KICAgICIiIkRldGVybWluZSBpZiBzYWZlcmVwcihvYmplY3QpIGlzIHJlYWRhYmxlIGJ5IGV2YWwoKS4iIiINCiAgICByZXR1cm4gX3NhZmVfcmVwcihvYmplY3QsIHt9LCBOb25lLCAwKVsxXQ0KDQpkZWYgaXNyZWN1cnNpdmUob2JqZWN0KToNCiAgICAiIiJEZXRlcm1pbmUgaWYgb2JqZWN0IHJlcXVpcmVzIGEgcmVjdXJzaXZlIHJlcHJlc2VudGF0aW9uLiIiIg0KICAgIHJldHVybiBfc2FmZV9yZXByKG9iamVjdCwge30sIE5vbmUsIDApWzJdDQoNCmNsYXNzIF9zYWZlX2tleToNCiAgICAiIiJIZWxwZXIgZnVuY3Rpb24gZm9yIGtleSBmdW5jdGlvbnMgd2hlbiBzb3J0aW5nIHVub3JkZXJhYmxlIG9iamVjdHMuDQoNCiAgICBUaGUgd3JhcHBlZC1vYmplY3Qgd2lsbCBmYWxsYmFjayB0byBhbiBQeTIueCBzdHlsZSBjb21wYXJpc29uIGZvcg0KICAgIHVub3JkZXJhYmxlIHR5cGVzIChzb3J0aW5nIGZpcnN0IGNvbXBhcmluZyB0aGUgdHlwZSBuYW1lIGFuZCB0aGVuIGJ5DQogICAgdGhlIG9iaiBpZHMpLiAgRG9lcyBub3Qgd29yayByZWN1cnNpdmVseSwgc28gZGljdC5pdGVtcygpIG11c3QgaGF2ZQ0KICAgIF9zYWZlX2tleSBhcHBsaWVkIHRvIGJvdGggdGhlIGtleSBhbmQgdGhlIHZhbHVlLg0KDQogICAgIiIiDQoNCiAgICBfX3Nsb3RzX18gPSBbJ29iaiddDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgb2JqKToNCiAgICAgICAgc2VsZi5vYmogPSBvYmoNCg0KICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBydiA9IHNlbGYub2JqLl9fbHRfXyhvdGhlci5vYmopDQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgICAgICBydiA9IE5vdEltcGxlbWVudGVkDQoNCiAgICAgICAgaWYgcnYgaXMgTm90SW1wbGVtZW50ZWQ6DQogICAgICAgICAgICBydiA9IChzdHIodHlwZShzZWxmLm9iaikpLCBpZChzZWxmLm9iaikpIDwgXA0KICAgICAgICAgICAgICAgICAoc3RyKHR5cGUob3RoZXIub2JqKSksIGlkKG90aGVyLm9iaikpDQogICAgICAgIHJldHVybiBydg0KDQpkZWYgX3NhZmVfdHVwbGUodCk6DQogICAgIkhlbHBlciBmdW5jdGlvbiBmb3IgY29tcGFyaW5nIDItdHVwbGVzIg0KICAgIHJldHVybiBfc2FmZV9rZXkodFswXSksIF9zYWZlX2tleSh0WzFdKQ0KDQpjbGFzcyBQcmV0dHlQcmludGVyOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbmRlbnQ9MSwgd2lkdGg9ODAsIGRlcHRoPU5vbmUsIHN0cmVhbT1Ob25lKToNCiAgICAgICAgIiIiSGFuZGxlIHByZXR0eSBwcmludGluZyBvcGVyYXRpb25zIG9udG8gYSBzdHJlYW0gdXNpbmcgYSBzZXQgb2YNCiAgICAgICAgY29uZmlndXJlZCBwYXJhbWV0ZXJzLg0KDQogICAgICAgIGluZGVudA0KICAgICAgICAgICAgTnVtYmVyIG9mIHNwYWNlcyB0byBpbmRlbnQgZm9yIGVhY2ggbGV2ZWwgb2YgbmVzdGluZy4NCg0KICAgICAgICB3aWR0aA0KICAgICAgICAgICAgQXR0ZW1wdGVkIG1heGltdW0gbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIG91dHB1dC4NCg0KICAgICAgICBkZXB0aA0KICAgICAgICAgICAgVGhlIG1heGltdW0gZGVwdGggdG8gcHJpbnQgb3V0IG5lc3RlZCBzdHJ1Y3R1cmVzLg0KDQogICAgICAgIHN0cmVhbQ0KICAgICAgICAgICAgVGhlIGRlc2lyZWQgb3V0cHV0IHN0cmVhbS4gIElmIG9taXR0ZWQgKG9yIGZhbHNlKSwgdGhlIHN0YW5kYXJkDQogICAgICAgICAgICBvdXRwdXQgc3RyZWFtIGF2YWlsYWJsZSBhdCBjb25zdHJ1Y3Rpb24gd2lsbCBiZSB1c2VkLg0KDQogICAgICAgICIiIg0KICAgICAgICBpbmRlbnQgPSBpbnQoaW5kZW50KQ0KICAgICAgICB3aWR0aCA9IGludCh3aWR0aCkNCiAgICAgICAgYXNzZXJ0IGluZGVudCA+PSAwLCAiaW5kZW50IG11c3QgYmUgPj0gMCINCiAgICAgICAgYXNzZXJ0IGRlcHRoIGlzIE5vbmUgb3IgZGVwdGggPiAwLCAiZGVwdGggbXVzdCBiZSA+IDAiDQogICAgICAgIGFzc2VydCB3aWR0aCwgIndpZHRoIG11c3QgYmUgIT0gMCINCiAgICAgICAgc2VsZi5fZGVwdGggPSBkZXB0aA0KICAgICAgICBzZWxmLl9pbmRlbnRfcGVyX2xldmVsID0gaW5kZW50DQogICAgICAgIHNlbGYuX3dpZHRoID0gd2lkdGgNCiAgICAgICAgaWYgc3RyZWFtIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgc2VsZi5fc3RyZWFtID0gc3RyZWFtDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzZWxmLl9zdHJlYW0gPSBfc3lzLnN0ZG91dA0KDQogICAgZGVmIHBwcmludChzZWxmLCBvYmplY3QpOg0KICAgICAgICBzZWxmLl9mb3JtYXQob2JqZWN0LCBzZWxmLl9zdHJlYW0sIDAsIDAsIHt9LCAwKQ0KICAgICAgICBzZWxmLl9zdHJlYW0ud3JpdGUoIlxuIikNCg0KICAgIGRlZiBwZm9ybWF0KHNlbGYsIG9iamVjdCk6DQogICAgICAgIHNpbyA9IF9TdHJpbmdJTygpDQogICAgICAgIHNlbGYuX2Zvcm1hdChvYmplY3QsIHNpbywgMCwgMCwge30sIDApDQogICAgICAgIHJldHVybiBzaW8uZ2V0dmFsdWUoKQ0KDQogICAgZGVmIGlzcmVjdXJzaXZlKHNlbGYsIG9iamVjdCk6DQogICAgICAgIHJldHVybiBzZWxmLmZvcm1hdChvYmplY3QsIHt9LCAwLCAwKVsyXQ0KDQogICAgZGVmIGlzcmVhZGFibGUoc2VsZiwgb2JqZWN0KToNCiAgICAgICAgcywgcmVhZGFibGUsIHJlY3Vyc2l2ZSA9IHNlbGYuZm9ybWF0KG9iamVjdCwge30sIDAsIDApDQogICAgICAgIHJldHVybiByZWFkYWJsZSBhbmQgbm90IHJlY3Vyc2l2ZQ0KDQogICAgZGVmIF9mb3JtYXQoc2VsZiwgb2JqZWN0LCBzdHJlYW0sIGluZGVudCwgYWxsb3dhbmNlLCBjb250ZXh0LCBsZXZlbCk6DQogICAgICAgIGxldmVsID0gbGV2ZWwgKyAxDQogICAgICAgIG9iamlkID0gX2lkKG9iamVjdCkNCiAgICAgICAgaWYgb2JqaWQgaW4gY29udGV4dDoNCiAgICAgICAgICAgIHN0cmVhbS53cml0ZShfcmVjdXJzaW9uKG9iamVjdCkpDQogICAgICAgICAgICBzZWxmLl9yZWN1cnNpdmUgPSBUcnVlDQogICAgICAgICAgICBzZWxmLl9yZWFkYWJsZSA9IEZhbHNlDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgcmVwID0gc2VsZi5fcmVwcihvYmplY3QsIGNvbnRleHQsIGxldmVsIC0gMSkNCiAgICAgICAgdHlwID0gX3R5cGUob2JqZWN0KQ0KICAgICAgICBzZXBMaW5lcyA9IF9sZW4ocmVwKSA+IChzZWxmLl93aWR0aCAtIDEgLSBpbmRlbnQgLSBhbGxvd2FuY2UpDQogICAgICAgIHdyaXRlID0gc3RyZWFtLndyaXRlDQoNCiAgICAgICAgaWYgc2VsZi5fZGVwdGggYW5kIGxldmVsID4gc2VsZi5fZGVwdGg6DQogICAgICAgICAgICB3cml0ZShyZXApDQogICAgICAgICAgICByZXR1cm4NCg0KICAgICAgICBpZiBzZXBMaW5lczoNCiAgICAgICAgICAgIHIgPSBnZXRhdHRyKHR5cCwgIl9fcmVwcl9fIiwgTm9uZSkNCiAgICAgICAgICAgIGlmIGlzc3ViY2xhc3ModHlwLCBkaWN0KToNCiAgICAgICAgICAgICAgICB3cml0ZSgneycpDQogICAgICAgICAgICAgICAgaWYgc2VsZi5faW5kZW50X3Blcl9sZXZlbCA+IDE6DQogICAgICAgICAgICAgICAgICAgIHdyaXRlKChzZWxmLl9pbmRlbnRfcGVyX2xldmVsIC0gMSkgKiAnICcpDQogICAgICAgICAgICAgICAgbGVuZ3RoID0gX2xlbihvYmplY3QpDQogICAgICAgICAgICAgICAgaWYgbGVuZ3RoOg0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0W29iamlkXSA9IDENCiAgICAgICAgICAgICAgICAgICAgaW5kZW50ID0gaW5kZW50ICsgc2VsZi5faW5kZW50X3Blcl9sZXZlbA0KICAgICAgICAgICAgICAgICAgICBpZiBpc3N1YmNsYXNzKHR5cCwgX09yZGVyZWREaWN0KToNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gbGlzdChvYmplY3QuaXRlbXMoKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gc29ydGVkKG9iamVjdC5pdGVtcygpLCBrZXk9X3NhZmVfdHVwbGUpDQogICAgICAgICAgICAgICAgICAgIGtleSwgZW50ID0gaXRlbXNbMF0NCiAgICAgICAgICAgICAgICAgICAgcmVwID0gc2VsZi5fcmVwcihrZXksIGNvbnRleHQsIGxldmVsKQ0KICAgICAgICAgICAgICAgICAgICB3cml0ZShyZXApDQogICAgICAgICAgICAgICAgICAgIHdyaXRlKCc6ICcpDQogICAgICAgICAgICAgICAgICAgIHNlbGYuX2Zvcm1hdChlbnQsIHN0cmVhbSwgaW5kZW50ICsgX2xlbihyZXApICsgMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd2FuY2UgKyAxLCBjb250ZXh0LCBsZXZlbCkNCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuZ3RoID4gMToNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBrZXksIGVudCBpbiBpdGVtc1sxOl06DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwID0gc2VsZi5fcmVwcihrZXksIGNvbnRleHQsIGxldmVsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlKCcsXG4lcyVzOiAnICUgKCcgJyppbmRlbnQsIHJlcCkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZm9ybWF0KGVudCwgc3RyZWFtLCBpbmRlbnQgKyBfbGVuKHJlcCkgKyAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dhbmNlICsgMSwgY29udGV4dCwgbGV2ZWwpDQogICAgICAgICAgICAgICAgICAgIGluZGVudCA9IGluZGVudCAtIHNlbGYuX2luZGVudF9wZXJfbGV2ZWwNCiAgICAgICAgICAgICAgICAgICAgZGVsIGNvbnRleHRbb2JqaWRdDQogICAgICAgICAgICAgICAgd3JpdGUoJ30nKQ0KICAgICAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgICAgICBpZiAoKGlzc3ViY2xhc3ModHlwLCBsaXN0KSBhbmQgciBpcyBsaXN0Ll9fcmVwcl9fKSBvcg0KICAgICAgICAgICAgICAgIChpc3N1YmNsYXNzKHR5cCwgdHVwbGUpIGFuZCByIGlzIHR1cGxlLl9fcmVwcl9fKSBvcg0KICAgICAgICAgICAgICAgIChpc3N1YmNsYXNzKHR5cCwgc2V0KSBhbmQgciBpcyBzZXQuX19yZXByX18pIG9yDQogICAgICAgICAgICAgICAgKGlzc3ViY2xhc3ModHlwLCBmcm96ZW5zZXQpIGFuZCByIGlzIGZyb3plbnNldC5fX3JlcHJfXykNCiAgICAgICAgICAgICAgICk6DQogICAgICAgICAgICAgICAgbGVuZ3RoID0gX2xlbihvYmplY3QpDQogICAgICAgICAgICAgICAgaWYgaXNzdWJjbGFzcyh0eXAsIGxpc3QpOg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgnWycpDQogICAgICAgICAgICAgICAgICAgIGVuZGNoYXIgPSAnXScNCiAgICAgICAgICAgICAgICBlbGlmIGlzc3ViY2xhc3ModHlwLCBzZXQpOg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgbGVuZ3RoOg0KICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUoJ3NldCgpJykNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgneycpDQogICAgICAgICAgICAgICAgICAgIGVuZGNoYXIgPSAnfScNCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0gc29ydGVkKG9iamVjdCwga2V5PV9zYWZlX2tleSkNCiAgICAgICAgICAgICAgICBlbGlmIGlzc3ViY2xhc3ModHlwLCBmcm96ZW5zZXQpOg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgbGVuZ3RoOg0KICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUoJ2Zyb3plbnNldCgpJykNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgnZnJvemVuc2V0KHsnKQ0KICAgICAgICAgICAgICAgICAgICBlbmRjaGFyID0gJ30pJw0KICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBzb3J0ZWQob2JqZWN0LCBrZXk9X3NhZmVfa2V5KQ0KICAgICAgICAgICAgICAgICAgICBpbmRlbnQgKz0gMTANCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICB3cml0ZSgnKCcpDQogICAgICAgICAgICAgICAgICAgIGVuZGNoYXIgPSAnKScNCiAgICAgICAgICAgICAgICBpZiBzZWxmLl9pbmRlbnRfcGVyX2xldmVsID4gMToNCiAgICAgICAgICAgICAgICAgICAgd3JpdGUoKHNlbGYuX2luZGVudF9wZXJfbGV2ZWwgLSAxKSAqICcgJykNCiAgICAgICAgICAgICAgICBpZiBsZW5ndGg6DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHRbb2JqaWRdID0gMQ0KICAgICAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgKyBzZWxmLl9pbmRlbnRfcGVyX2xldmVsDQogICAgICAgICAgICAgICAgICAgIHNlbGYuX2Zvcm1hdChvYmplY3RbMF0sIHN0cmVhbSwgaW5kZW50LCBhbGxvd2FuY2UgKyAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCwgbGV2ZWwpDQogICAgICAgICAgICAgICAgICAgIGlmIGxlbmd0aCA+IDE6DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgZW50IGluIG9iamVjdFsxOl06DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUoJyxcbicgKyAnICcqaW5kZW50KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2Zvcm1hdChlbnQsIHN0cmVhbSwgaW5kZW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dhbmNlICsgMSwgY29udGV4dCwgbGV2ZWwpDQogICAgICAgICAgICAgICAgICAgIGluZGVudCA9IGluZGVudCAtIHNlbGYuX2luZGVudF9wZXJfbGV2ZWwNCiAgICAgICAgICAgICAgICAgICAgZGVsIGNvbnRleHRbb2JqaWRdDQogICAgICAgICAgICAgICAgaWYgaXNzdWJjbGFzcyh0eXAsIHR1cGxlKSBhbmQgbGVuZ3RoID09IDE6DQogICAgICAgICAgICAgICAgICAgIHdyaXRlKCcsJykNCiAgICAgICAgICAgICAgICB3cml0ZShlbmRjaGFyKQ0KICAgICAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgIHdyaXRlKHJlcCkNCg0KICAgIGRlZiBfcmVwcihzZWxmLCBvYmplY3QsIGNvbnRleHQsIGxldmVsKToNCiAgICAgICAgcmVwciwgcmVhZGFibGUsIHJlY3Vyc2l2ZSA9IHNlbGYuZm9ybWF0KG9iamVjdCwgY29udGV4dC5jb3B5KCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kZXB0aCwgbGV2ZWwpDQogICAgICAgIGlmIG5vdCByZWFkYWJsZToNCiAgICAgICAgICAgIHNlbGYuX3JlYWRhYmxlID0gRmFsc2UNCiAgICAgICAgaWYgcmVjdXJzaXZlOg0KICAgICAgICAgICAgc2VsZi5fcmVjdXJzaXZlID0gVHJ1ZQ0KICAgICAgICByZXR1cm4gcmVwcg0KDQogICAgZGVmIGZvcm1hdChzZWxmLCBvYmplY3QsIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpOg0KICAgICAgICAiIiJGb3JtYXQgb2JqZWN0IGZvciBhIHNwZWNpZmljIGNvbnRleHQsIHJldHVybmluZyBhIHN0cmluZw0KICAgICAgICBhbmQgZmxhZ3MgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSByZXByZXNlbnRhdGlvbiBpcyAncmVhZGFibGUnDQogICAgICAgIGFuZCB3aGV0aGVyIHRoZSBvYmplY3QgcmVwcmVzZW50cyBhIHJlY3Vyc2l2ZSBjb25zdHJ1Y3QuDQogICAgICAgICIiIg0KICAgICAgICByZXR1cm4gX3NhZmVfcmVwcihvYmplY3QsIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpDQoNCg0KIyBSZXR1cm4gdHJpcGxlIChyZXByX3N0cmluZywgaXNyZWFkYWJsZSwgaXNyZWN1cnNpdmUpLg0KDQpkZWYgX3NhZmVfcmVwcihvYmplY3QsIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpOg0KICAgIHR5cCA9IF90eXBlKG9iamVjdCkNCiAgICBpZiB0eXAgaXMgc3RyOg0KICAgICAgICBpZiAnbG9jYWxlJyBub3QgaW4gX3N5cy5tb2R1bGVzOg0KICAgICAgICAgICAgcmV0dXJuIHJlcHIob2JqZWN0KSwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgaWYgIiciIGluIG9iamVjdCBhbmQgJyInIG5vdCBpbiBvYmplY3Q6DQogICAgICAgICAgICBjbG9zdXJlID0gJyInDQogICAgICAgICAgICBxdW90ZXMgPSB7JyInOiAnXFwiJ30NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGNsb3N1cmUgPSAiJyINCiAgICAgICAgICAgIHF1b3RlcyA9IHsiJyI6ICJcXCcifQ0KICAgICAgICBxZ2V0ID0gcXVvdGVzLmdldA0KICAgICAgICBzaW8gPSBfU3RyaW5nSU8oKQ0KICAgICAgICB3cml0ZSA9IHNpby53cml0ZQ0KICAgICAgICBmb3IgY2hhciBpbiBvYmplY3Q6DQogICAgICAgICAgICBpZiBjaGFyLmlzYWxwaGEoKToNCiAgICAgICAgICAgICAgICB3cml0ZShjaGFyKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICB3cml0ZShxZ2V0KGNoYXIsIHJlcHIoY2hhcilbMTotMV0pKQ0KICAgICAgICByZXR1cm4gKCIlcyVzJXMiICUgKGNsb3N1cmUsIHNpby5nZXR2YWx1ZSgpLCBjbG9zdXJlKSksIFRydWUsIEZhbHNlDQoNCiAgICByID0gZ2V0YXR0cih0eXAsICJfX3JlcHJfXyIsIE5vbmUpDQogICAgaWYgaXNzdWJjbGFzcyh0eXAsIGRpY3QpIGFuZCByIGlzIGRpY3QuX19yZXByX186DQogICAgICAgIGlmIG5vdCBvYmplY3Q6DQogICAgICAgICAgICByZXR1cm4gInt9IiwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgb2JqaWQgPSBfaWQob2JqZWN0KQ0KICAgICAgICBpZiBtYXhsZXZlbHMgYW5kIGxldmVsID49IG1heGxldmVsczoNCiAgICAgICAgICAgIHJldHVybiAiey4uLn0iLCBGYWxzZSwgb2JqaWQgaW4gY29udGV4dA0KICAgICAgICBpZiBvYmppZCBpbiBjb250ZXh0Og0KICAgICAgICAgICAgcmV0dXJuIF9yZWN1cnNpb24ob2JqZWN0KSwgRmFsc2UsIFRydWUNCiAgICAgICAgY29udGV4dFtvYmppZF0gPSAxDQogICAgICAgIHJlYWRhYmxlID0gVHJ1ZQ0KICAgICAgICByZWN1cnNpdmUgPSBGYWxzZQ0KICAgICAgICBjb21wb25lbnRzID0gW10NCiAgICAgICAgYXBwZW5kID0gY29tcG9uZW50cy5hcHBlbmQNCiAgICAgICAgbGV2ZWwgKz0gMQ0KICAgICAgICBzYWZlcmVwciA9IF9zYWZlX3JlcHINCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQob2JqZWN0Lml0ZW1zKCksIGtleT1fc2FmZV90dXBsZSkNCiAgICAgICAgZm9yIGssIHYgaW4gaXRlbXM6DQogICAgICAgICAgICBrcmVwciwga3JlYWRhYmxlLCBrcmVjdXIgPSBzYWZlcmVwcihrLCBjb250ZXh0LCBtYXhsZXZlbHMsIGxldmVsKQ0KICAgICAgICAgICAgdnJlcHIsIHZyZWFkYWJsZSwgdnJlY3VyID0gc2FmZXJlcHIodiwgY29udGV4dCwgbWF4bGV2ZWxzLCBsZXZlbCkNCiAgICAgICAgICAgIGFwcGVuZCgiJXM6ICVzIiAlIChrcmVwciwgdnJlcHIpKQ0KICAgICAgICAgICAgcmVhZGFibGUgPSByZWFkYWJsZSBhbmQga3JlYWRhYmxlIGFuZCB2cmVhZGFibGUNCiAgICAgICAgICAgIGlmIGtyZWN1ciBvciB2cmVjdXI6DQogICAgICAgICAgICAgICAgcmVjdXJzaXZlID0gVHJ1ZQ0KICAgICAgICBkZWwgY29udGV4dFtvYmppZF0NCiAgICAgICAgcmV0dXJuICJ7JXN9IiAlIF9jb21tYWpvaW4oY29tcG9uZW50cyksIHJlYWRhYmxlLCByZWN1cnNpdmUNCg0KICAgIGlmIChpc3N1YmNsYXNzKHR5cCwgbGlzdCkgYW5kIHIgaXMgbGlzdC5fX3JlcHJfXykgb3IgXA0KICAgICAgIChpc3N1YmNsYXNzKHR5cCwgdHVwbGUpIGFuZCByIGlzIHR1cGxlLl9fcmVwcl9fKToNCiAgICAgICAgaWYgaXNzdWJjbGFzcyh0eXAsIGxpc3QpOg0KICAgICAgICAgICAgaWYgbm90IG9iamVjdDoNCiAgICAgICAgICAgICAgICByZXR1cm4gIltdIiwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgICAgIGZvcm1hdCA9ICJbJXNdIg0KICAgICAgICBlbGlmIF9sZW4ob2JqZWN0KSA9PSAxOg0KICAgICAgICAgICAgZm9ybWF0ID0gIiglcywpIg0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaWYgbm90IG9iamVjdDoNCiAgICAgICAgICAgICAgICByZXR1cm4gIigpIiwgVHJ1ZSwgRmFsc2UNCiAgICAgICAgICAgIGZvcm1hdCA9ICIoJXMpIg0KICAgICAgICBvYmppZCA9IF9pZChvYmplY3QpDQogICAgICAgIGlmIG1heGxldmVscyBhbmQgbGV2ZWwgPj0gbWF4bGV2ZWxzOg0KICAgICAgICAgICAgcmV0dXJuIGZvcm1hdCAlICIuLi4iLCBGYWxzZSwgb2JqaWQgaW4gY29udGV4dA0KICAgICAgICBpZiBvYmppZCBpbiBjb250ZXh0Og0KICAgICAgICAgICAgcmV0dXJuIF9yZWN1cnNpb24ob2JqZWN0KSwgRmFsc2UsIFRydWUNCiAgICAgICAgY29udGV4dFtvYmppZF0gPSAxDQogICAgICAgIHJlYWRhYmxlID0gVHJ1ZQ0KICAgICAgICByZWN1cnNpdmUgPSBGYWxzZQ0KICAgICAgICBjb21wb25lbnRzID0gW10NCiAgICAgICAgYXBwZW5kID0gY29tcG9uZW50cy5hcHBlbmQNCiAgICAgICAgbGV2ZWwgKz0gMQ0KICAgICAgICBmb3IgbyBpbiBvYmplY3Q6DQogICAgICAgICAgICBvcmVwciwgb3JlYWRhYmxlLCBvcmVjdXIgPSBfc2FmZV9yZXByKG8sIGNvbnRleHQsIG1heGxldmVscywgbGV2ZWwpDQogICAgICAgICAgICBhcHBlbmQob3JlcHIpDQogICAgICAgICAgICBpZiBub3Qgb3JlYWRhYmxlOg0KICAgICAgICAgICAgICAgIHJlYWRhYmxlID0gRmFsc2UNCiAgICAgICAgICAgIGlmIG9yZWN1cjoNCiAgICAgICAgICAgICAgICByZWN1cnNpdmUgPSBUcnVlDQogICAgICAgIGRlbCBjb250ZXh0W29iamlkXQ0KICAgICAgICByZXR1cm4gZm9ybWF0ICUgX2NvbW1ham9pbihjb21wb25lbnRzKSwgcmVhZGFibGUsIHJlY3Vyc2l2ZQ0KDQogICAgcmVwID0gcmVwcihvYmplY3QpDQogICAgcmV0dXJuIHJlcCwgKHJlcCBhbmQgbm90IHJlcC5zdGFydHN3aXRoKCc8JykpLCBGYWxzZQ0KDQoNCmRlZiBfcmVjdXJzaW9uKG9iamVjdCk6DQogICAgcmV0dXJuICgiPFJlY3Vyc2lvbiBvbiAlcyB3aXRoIGlkPSVzPiINCiAgICAgICAgICAgICUgKF90eXBlKG9iamVjdCkuX19uYW1lX18sIF9pZChvYmplY3QpKSkNCg0KDQpkZWYgX3BlcmZjaGVjayhvYmplY3Q9Tm9uZSk6DQogICAgaW1wb3J0IHRpbWUNCiAgICBpZiBvYmplY3QgaXMgTm9uZToNCiAgICAgICAgb2JqZWN0ID0gWygic3RyaW5nIiwgKDEsIDIpLCBbMywgNF0sIHs1OiA2LCA3OiA4fSldICogMTAwMDAwDQogICAgcCA9IFByZXR0eVByaW50ZXIoKQ0KICAgIHQxID0gdGltZS50aW1lKCkNCiAgICBfc2FmZV9yZXByKG9iamVjdCwge30sIE5vbmUsIDApDQogICAgdDIgPSB0aW1lLnRpbWUoKQ0KICAgIHAucGZvcm1hdChvYmplY3QpDQogICAgdDMgPSB0aW1lLnRpbWUoKQ0KICAgIHByaW50KCJfc2FmZV9yZXByOiIsIHQyIC0gdDEpDQogICAgcHJpbnQoInBmb3JtYXQ6IiwgdDMgLSB0MikNCg0KaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoNCiAgICBfcGVyZmNoZWNrKCkNCg==',
'/Lib/textwrap.py':'IiIiVGV4dCB3cmFwcGluZyBhbmQgZmlsbGluZy4KIiIiCgojIENvcHlyaWdodCAoQykgMTk5OS0yMDAxIEdyZWdvcnkgUC4gV2FyZC4KIyBDb3B5cmlnaHQgKEMpIDIwMDIsIDIwMDMgUHl0aG9uIFNvZnR3YXJlIEZvdW5kYXRpb24uCiMgV3JpdHRlbiBieSBHcmVnIFdhcmQgPGd3YXJkQHB5dGhvbi5uZXQ+CgppbXBvcnQgcmUKCl9fYWxsX18gPSBbJ1RleHRXcmFwcGVyJywgJ3dyYXAnLCAnZmlsbCcsICdkZWRlbnQnLCAnaW5kZW50J10KCiMgSGFyZGNvZGUgdGhlIHJlY29nbml6ZWQgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHRvIHRoZSBVUy1BU0NJSQojIHdoaXRlc3BhY2UgY2hhcmFjdGVycy4gIFRoZSBtYWluIHJlYXNvbiBmb3IgZG9pbmcgdGhpcyBpcyB0aGF0IGluCiMgSVNPLTg4NTktMSwgMHhhMCBpcyBub24tYnJlYWtpbmcgd2hpdGVzcGFjZSwgc28gaW4gY2VydGFpbiBsb2NhbGVzCiMgdGhhdCBjaGFyYWN0ZXIgd2luZHMgdXAgaW4gc3RyaW5nLndoaXRlc3BhY2UuICBSZXNwZWN0aW5nCiMgc3RyaW5nLndoaXRlc3BhY2UgaW4gdGhvc2UgY2FzZXMgd291bGQgMSkgbWFrZSB0ZXh0d3JhcCB0cmVhdCAweGEwIHRoZQojIHNhbWUgYXMgYW55IG90aGVyIHdoaXRlc3BhY2UgY2hhciwgd2hpY2ggaXMgY2xlYXJseSB3cm9uZyAoaXQncyBhCiMgKm5vbi1icmVha2luZyogc3BhY2UpLCAyKSBwb3NzaWJseSBjYXVzZSBwcm9ibGVtcyB3aXRoIFVuaWNvZGUsCiMgc2luY2UgMHhhMCBpcyBub3QgaW4gcmFuZ2UoMTI4KS4KX3doaXRlc3BhY2UgPSAnXHRcblx4MGJceDBjXHIgJwoKY2xhc3MgVGV4dFdyYXBwZXI6CiAgICAiIiIKICAgIE9iamVjdCBmb3Igd3JhcHBpbmcvZmlsbGluZyB0ZXh0LiAgVGhlIHB1YmxpYyBpbnRlcmZhY2UgY29uc2lzdHMgb2YKICAgIHRoZSB3cmFwKCkgYW5kIGZpbGwoKSBtZXRob2RzOyB0aGUgb3RoZXIgbWV0aG9kcyBhcmUganVzdCB0aGVyZSBmb3IKICAgIHN1YmNsYXNzZXMgdG8gb3ZlcnJpZGUgaW4gb3JkZXIgdG8gdHdlYWsgdGhlIGRlZmF1bHQgYmVoYXZpb3VyLgogICAgSWYgeW91IHdhbnQgdG8gY29tcGxldGVseSByZXBsYWNlIHRoZSBtYWluIHdyYXBwaW5nIGFsZ29yaXRobSwKICAgIHlvdSdsbCBwcm9iYWJseSBoYXZlIHRvIG92ZXJyaWRlIF93cmFwX2NodW5rcygpLgoKICAgIFNldmVyYWwgaW5zdGFuY2UgYXR0cmlidXRlcyBjb250cm9sIHZhcmlvdXMgYXNwZWN0cyBvZiB3cmFwcGluZzoKICAgICAgd2lkdGggKGRlZmF1bHQ6IDcwKQogICAgICAgIHRoZSBtYXhpbXVtIHdpZHRoIG9mIHdyYXBwZWQgbGluZXMgKHVubGVzcyBicmVha19sb25nX3dvcmRzCiAgICAgICAgaXMgZmFsc2UpCiAgICAgIGluaXRpYWxfaW5kZW50IChkZWZhdWx0OiAiIikKICAgICAgICBzdHJpbmcgdGhhdCB3aWxsIGJlIHByZXBlbmRlZCB0byB0aGUgZmlyc3QgbGluZSBvZiB3cmFwcGVkCiAgICAgICAgb3V0cHV0LiAgQ291bnRzIHRvd2FyZHMgdGhlIGxpbmUncyB3aWR0aC4KICAgICAgc3Vic2VxdWVudF9pbmRlbnQgKGRlZmF1bHQ6ICIiKQogICAgICAgIHN0cmluZyB0aGF0IHdpbGwgYmUgcHJlcGVuZGVkIHRvIGFsbCBsaW5lcyBzYXZlIHRoZSBmaXJzdAogICAgICAgIG9mIHdyYXBwZWQgb3V0cHV0OyBhbHNvIGNvdW50cyB0b3dhcmRzIGVhY2ggbGluZSdzIHdpZHRoLgogICAgICBleHBhbmRfdGFicyAoZGVmYXVsdDogdHJ1ZSkKICAgICAgICBFeHBhbmQgdGFicyBpbiBpbnB1dCB0ZXh0IHRvIHNwYWNlcyBiZWZvcmUgZnVydGhlciBwcm9jZXNzaW5nLgogICAgICAgIEVhY2ggdGFiIHdpbGwgYmVjb21lIDAgLi4gJ3RhYnNpemUnIHNwYWNlcywgZGVwZW5kaW5nIG9uIGl0cyBwb3NpdGlvbgogICAgICAgIGluIGl0cyBsaW5lLiAgSWYgZmFsc2UsIGVhY2ggdGFiIGlzIHRyZWF0ZWQgYXMgYSBzaW5nbGUgY2hhcmFjdGVyLgogICAgICB0YWJzaXplIChkZWZhdWx0OiA4KQogICAgICAgIEV4cGFuZCB0YWJzIGluIGlucHV0IHRleHQgdG8gMCAuLiAndGFic2l6ZScgc3BhY2VzLCB1bmxlc3MKICAgICAgICAnZXhwYW5kX3RhYnMnIGlzIGZhbHNlLgogICAgICByZXBsYWNlX3doaXRlc3BhY2UgKGRlZmF1bHQ6IHRydWUpCiAgICAgICAgUmVwbGFjZSBhbGwgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGluIHRoZSBpbnB1dCB0ZXh0IGJ5IHNwYWNlcwogICAgICAgIGFmdGVyIHRhYiBleHBhbnNpb24uICBOb3RlIHRoYXQgaWYgZXhwYW5kX3RhYnMgaXMgZmFsc2UgYW5kCiAgICAgICAgcmVwbGFjZV93aGl0ZXNwYWNlIGlzIHRydWUsIGV2ZXJ5IHRhYiB3aWxsIGJlIGNvbnZlcnRlZCB0byBhCiAgICAgICAgc2luZ2xlIHNwYWNlIQogICAgICBmaXhfc2VudGVuY2VfZW5kaW5ncyAoZGVmYXVsdDogZmFsc2UpCiAgICAgICAgRW5zdXJlIHRoYXQgc2VudGVuY2UtZW5kaW5nIHB1bmN0dWF0aW9uIGlzIGFsd2F5cyBmb2xsb3dlZAogICAgICAgIGJ5IHR3byBzcGFjZXMuICBPZmYgYnkgZGVmYXVsdCBiZWNhdXNlIHRoZSBhbGdvcml0aG0gaXMKICAgICAgICAodW5hdm9pZGFibHkpIGltcGVyZmVjdC4KICAgICAgYnJlYWtfbG9uZ193b3JkcyAoZGVmYXVsdDogdHJ1ZSkKICAgICAgICBCcmVhayB3b3JkcyBsb25nZXIgdGhhbiAnd2lkdGgnLiAgSWYgZmFsc2UsIHRob3NlIHdvcmRzIHdpbGwgbm90CiAgICAgICAgYmUgYnJva2VuLCBhbmQgc29tZSBsaW5lcyBtaWdodCBiZSBsb25nZXIgdGhhbiAnd2lkdGgnLgogICAgICBicmVha19vbl9oeXBoZW5zIChkZWZhdWx0OiB0cnVlKQogICAgICAgIEFsbG93IGJyZWFraW5nIGh5cGhlbmF0ZWQgd29yZHMuIElmIHRydWUsIHdyYXBwaW5nIHdpbGwgb2NjdXIKICAgICAgICBwcmVmZXJhYmx5IG9uIHdoaXRlc3BhY2VzIGFuZCByaWdodCBhZnRlciBoeXBoZW5zIHBhcnQgb2YKICAgICAgICBjb21wb3VuZCB3b3Jkcy4KICAgICAgZHJvcF93aGl0ZXNwYWNlIChkZWZhdWx0OiB0cnVlKQogICAgICAgIERyb3AgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBmcm9tIGxpbmVzLgogICAgIiIiCgogICAgdW5pY29kZV93aGl0ZXNwYWNlX3RyYW5zID0ge30KICAgIHVzcGFjZSA9IG9yZCgnICcpCiAgICBmb3IgeCBpbiBfd2hpdGVzcGFjZToKICAgICAgICB1bmljb2RlX3doaXRlc3BhY2VfdHJhbnNbb3JkKHgpXSA9IHVzcGFjZQoKICAgICMgVGhpcyBmdW5reSBsaXR0bGUgcmVnZXggaXMganVzdCB0aGUgdHJpY2sgZm9yIHNwbGl0dGluZwogICAgIyB0ZXh0IHVwIGludG8gd29yZC13cmFwcGFibGUgY2h1bmtzLiAgRS5nLgogICAgIyAgICJIZWxsbyB0aGVyZSAtLSB5b3UgZ29vZi1iYWxsLCB1c2UgdGhlIC1iIG9wdGlvbiEiCiAgICAjIHNwbGl0cyBpbnRvCiAgICAjICAgSGVsbG8vIC90aGVyZS8gLy0tLyAveW91LyAvZ29vZi0vYmFsbCwvIC91c2UvIC90aGUvIC8tYi8gL29wdGlvbiEKICAgICMgKGFmdGVyIHN0cmlwcGluZyBvdXQgZW1wdHkgc3RyaW5ncykuCiAgICB3b3Jkc2VwX3JlID0gcmUuY29tcGlsZSgKICAgICAgICByJyhccyt8JyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGFueSB3aGl0ZXNwYWNlCiAgICAgICAgcidbXlxzXHddKlx3K1teMC05XFddLSg/PVx3K1teMC05XFddKXwnICAgIyBoeXBoZW5hdGVkIHdvcmRzCiAgICAgICAgcicoPzw9W1x3XCFcIlwnXCZcLlwsXD9dKS17Mix9KD89XHcpKScpICAgIyBlbS1kYXNoCgogICAgIyBUaGlzIGxlc3MgZnVua3kgbGl0dGxlIHJlZ2V4IGp1c3Qgc3BsaXQgb24gcmVjb2duaXplZCBzcGFjZXMuIEUuZy4KICAgICMgICAiSGVsbG8gdGhlcmUgLS0geW91IGdvb2YtYmFsbCwgdXNlIHRoZSAtYiBvcHRpb24hIgogICAgIyBzcGxpdHMgaW50bwogICAgIyAgIEhlbGxvLyAvdGhlcmUvIC8tLS8gL3lvdS8gL2dvb2YtYmFsbCwvIC91c2UvIC90aGUvIC8tYi8gL29wdGlvbiEvCiAgICB3b3Jkc2VwX3NpbXBsZV9yZSA9IHJlLmNvbXBpbGUocicoXHMrKScpCgogICAgIyBYWFggdGhpcyBpcyBub3QgbG9jYWxlLSBvciBjaGFyc2V0LWF3YXJlIC0tIHN0cmluZy5sb3dlcmNhc2UKICAgICMgaXMgVVMtQVNDSUkgb25seSAoYW5kIHRoZXJlZm9yZSBFbmdsaXNoLW9ubHkpCiAgICBzZW50ZW5jZV9lbmRfcmUgPSByZS5jb21waWxlKHInW2Etel0nICAgICAgICAgICAgICMgbG93ZXJjYXNlIGxldHRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByJ1tcLlwhXD9dJyAgICAgICAgICAjIHNlbnRlbmNlLWVuZGluZyBwdW5jdC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcidbXCJcJ10/JyAgICAgICAgICAgIyBvcHRpb25hbCBlbmQtb2YtcXVvdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcidcWicpICAgICAgICAgICAgICAgIyBlbmQgb2YgY2h1bmsKCgogICAgZGVmIF9faW5pdF9fKHNlbGYsCiAgICAgICAgICAgICAgICAgd2lkdGg9NzAsCiAgICAgICAgICAgICAgICAgaW5pdGlhbF9pbmRlbnQ9IiIsCiAgICAgICAgICAgICAgICAgc3Vic2VxdWVudF9pbmRlbnQ9IiIsCiAgICAgICAgICAgICAgICAgZXhwYW5kX3RhYnM9VHJ1ZSwKICAgICAgICAgICAgICAgICByZXBsYWNlX3doaXRlc3BhY2U9VHJ1ZSwKICAgICAgICAgICAgICAgICBmaXhfc2VudGVuY2VfZW5kaW5ncz1GYWxzZSwKICAgICAgICAgICAgICAgICBicmVha19sb25nX3dvcmRzPVRydWUsCiAgICAgICAgICAgICAgICAgZHJvcF93aGl0ZXNwYWNlPVRydWUsCiAgICAgICAgICAgICAgICAgYnJlYWtfb25faHlwaGVucz1UcnVlLAogICAgICAgICAgICAgICAgIHRhYnNpemU9OCk6CiAgICAgICAgc2VsZi53aWR0aCA9IHdpZHRoCiAgICAgICAgc2VsZi5pbml0aWFsX2luZGVudCA9IGluaXRpYWxfaW5kZW50CiAgICAgICAgc2VsZi5zdWJzZXF1ZW50X2luZGVudCA9IHN1YnNlcXVlbnRfaW5kZW50CiAgICAgICAgc2VsZi5leHBhbmRfdGFicyA9IGV4cGFuZF90YWJzCiAgICAgICAgc2VsZi5yZXBsYWNlX3doaXRlc3BhY2UgPSByZXBsYWNlX3doaXRlc3BhY2UKICAgICAgICBzZWxmLmZpeF9zZW50ZW5jZV9lbmRpbmdzID0gZml4X3NlbnRlbmNlX2VuZGluZ3MKICAgICAgICBzZWxmLmJyZWFrX2xvbmdfd29yZHMgPSBicmVha19sb25nX3dvcmRzCiAgICAgICAgc2VsZi5kcm9wX3doaXRlc3BhY2UgPSBkcm9wX3doaXRlc3BhY2UKICAgICAgICBzZWxmLmJyZWFrX29uX2h5cGhlbnMgPSBicmVha19vbl9oeXBoZW5zCiAgICAgICAgc2VsZi50YWJzaXplID0gdGFic2l6ZQoKCiAgICAjIC0tIFByaXZhdGUgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyAocG9zc2libHkgdXNlZnVsIGZvciBzdWJjbGFzc2VzIHRvIG92ZXJyaWRlKQoKICAgIGRlZiBfbXVuZ2Vfd2hpdGVzcGFjZShzZWxmLCB0ZXh0KToKICAgICAgICAiIiJfbXVuZ2Vfd2hpdGVzcGFjZSh0ZXh0IDogc3RyaW5nKSAtPiBzdHJpbmcKCiAgICAgICAgTXVuZ2Ugd2hpdGVzcGFjZSBpbiB0ZXh0OiBleHBhbmQgdGFicyBhbmQgY29udmVydCBhbGwgb3RoZXIKICAgICAgICB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgdG8gc3BhY2VzLiAgRWcuICIgZm9vXHRiYXJcblxuYmF6IgogICAgICAgIGJlY29tZXMgIiBmb28gICAgYmFyICBiYXoiLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuZXhwYW5kX3RhYnM6CiAgICAgICAgICAgIHRleHQgPSB0ZXh0LmV4cGFuZHRhYnMoc2VsZi50YWJzaXplKQogICAgICAgIGlmIHNlbGYucmVwbGFjZV93aGl0ZXNwYWNlOgogICAgICAgICAgICB0ZXh0ID0gdGV4dC50cmFuc2xhdGUoc2VsZi51bmljb2RlX3doaXRlc3BhY2VfdHJhbnMpCiAgICAgICAgcmV0dXJuIHRleHQKCgogICAgZGVmIF9zcGxpdChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJfc3BsaXQodGV4dCA6IHN0cmluZykgLT4gW3N0cmluZ10KCiAgICAgICAgU3BsaXQgdGhlIHRleHQgdG8gd3JhcCBpbnRvIGluZGl2aXNpYmxlIGNodW5rcy4gIENodW5rcyBhcmUKICAgICAgICBub3QgcXVpdGUgdGhlIHNhbWUgYXMgd29yZHM7IHNlZSBfd3JhcF9jaHVua3MoKSBmb3IgZnVsbAogICAgICAgIGRldGFpbHMuICBBcyBhbiBleGFtcGxlLCB0aGUgdGV4dAogICAgICAgICAgTG9vaywgZ29vZi1iYWxsIC0tIHVzZSB0aGUgLWIgb3B0aW9uIQogICAgICAgIGJyZWFrcyBpbnRvIHRoZSBmb2xsb3dpbmcgY2h1bmtzOgogICAgICAgICAgJ0xvb2ssJywgJyAnLCAnZ29vZi0nLCAnYmFsbCcsICcgJywgJy0tJywgJyAnLAogICAgICAgICAgJ3VzZScsICcgJywgJ3RoZScsICcgJywgJy1iJywgJyAnLCAnb3B0aW9uIScKICAgICAgICBpZiBicmVha19vbl9oeXBoZW5zIGlzIFRydWUsIG9yIGluOgogICAgICAgICAgJ0xvb2ssJywgJyAnLCAnZ29vZi1iYWxsJywgJyAnLCAnLS0nLCAnICcsCiAgICAgICAgICAndXNlJywgJyAnLCAndGhlJywgJyAnLCAnLWInLCAnICcsIG9wdGlvbiEnCiAgICAgICAgb3RoZXJ3aXNlLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuYnJlYWtfb25faHlwaGVucyBpcyBUcnVlOgogICAgICAgICAgICBjaHVua3MgPSBzZWxmLndvcmRzZXBfcmUuc3BsaXQodGV4dCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjaHVua3MgPSBzZWxmLndvcmRzZXBfc2ltcGxlX3JlLnNwbGl0KHRleHQpCiAgICAgICAgY2h1bmtzID0gW2MgZm9yIGMgaW4gY2h1bmtzIGlmIGNdCiAgICAgICAgcmV0dXJuIGNodW5rcwoKICAgIGRlZiBfZml4X3NlbnRlbmNlX2VuZGluZ3Moc2VsZiwgY2h1bmtzKToKICAgICAgICAiIiJfZml4X3NlbnRlbmNlX2VuZGluZ3MoY2h1bmtzIDogW3N0cmluZ10pCgogICAgICAgIENvcnJlY3QgZm9yIHNlbnRlbmNlIGVuZGluZ3MgYnVyaWVkIGluICdjaHVua3MnLiAgRWcuIHdoZW4gdGhlCiAgICAgICAgb3JpZ2luYWwgdGV4dCBjb250YWlucyAiLi4uIGZvby5cbkJhciAuLi4iLCBtdW5nZV93aGl0ZXNwYWNlKCkKICAgICAgICBhbmQgc3BsaXQoKSB3aWxsIGNvbnZlcnQgdGhhdCB0byBbLi4uLCAiZm9vLiIsICIgIiwgIkJhciIsIC4uLl0KICAgICAgICB3aGljaCBoYXMgb25lIHRvbyBmZXcgc3BhY2VzOyB0aGlzIG1ldGhvZCBzaW1wbHkgY2hhbmdlcyB0aGUgb25lCiAgICAgICAgc3BhY2UgdG8gdHdvLgogICAgICAgICIiIgogICAgICAgIGkgPSAwCiAgICAgICAgcGF0c2VhcmNoID0gc2VsZi5zZW50ZW5jZV9lbmRfcmUuc2VhcmNoCiAgICAgICAgd2hpbGUgaSA8IGxlbihjaHVua3MpLTE6CiAgICAgICAgICAgIGlmIGNodW5rc1tpKzFdID09ICIgIiBhbmQgcGF0c2VhcmNoKGNodW5rc1tpXSk6CiAgICAgICAgICAgICAgICBjaHVua3NbaSsxXSA9ICIgICIKICAgICAgICAgICAgICAgIGkgKz0gMgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaSArPSAxCgogICAgZGVmIF9oYW5kbGVfbG9uZ193b3JkKHNlbGYsIHJldmVyc2VkX2NodW5rcywgY3VyX2xpbmUsIGN1cl9sZW4sIHdpZHRoKToKICAgICAgICAiIiJfaGFuZGxlX2xvbmdfd29yZChjaHVua3MgOiBbc3RyaW5nXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJfbGluZSA6IFtzdHJpbmddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cl9sZW4gOiBpbnQsIHdpZHRoIDogaW50KQoKICAgICAgICBIYW5kbGUgYSBjaHVuayBvZiB0ZXh0IChtb3N0IGxpa2VseSBhIHdvcmQsIG5vdCB3aGl0ZXNwYWNlKSB0aGF0CiAgICAgICAgaXMgdG9vIGxvbmcgdG8gZml0IGluIGFueSBsaW5lLgogICAgICAgICIiIgogICAgICAgICMgRmlndXJlIG91dCB3aGVuIGluZGVudCBpcyBsYXJnZXIgdGhhbiB0aGUgc3BlY2lmaWVkIHdpZHRoLCBhbmQgbWFrZQogICAgICAgICMgc3VyZSBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyIGlzIHN0cmlwcGVkIG9mZiBvbiBldmVyeSBwYXNzCiAgICAgICAgaWYgd2lkdGggPCAxOgogICAgICAgICAgICBzcGFjZV9sZWZ0ID0gMQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNwYWNlX2xlZnQgPSB3aWR0aCAtIGN1cl9sZW4KCiAgICAgICAgIyBJZiB3ZSdyZSBhbGxvd2VkIHRvIGJyZWFrIGxvbmcgd29yZHMsIHRoZW4gZG8gc286IHB1dCBhcyBtdWNoCiAgICAgICAgIyBvZiB0aGUgbmV4dCBjaHVuayBvbnRvIHRoZSBjdXJyZW50IGxpbmUgYXMgd2lsbCBmaXQuCiAgICAgICAgaWYgc2VsZi5icmVha19sb25nX3dvcmRzOgogICAgICAgICAgICBjdXJfbGluZS5hcHBlbmQocmV2ZXJzZWRfY2h1bmtzWy0xXVs6c3BhY2VfbGVmdF0pCiAgICAgICAgICAgIHJldmVyc2VkX2NodW5rc1stMV0gPSByZXZlcnNlZF9jaHVua3NbLTFdW3NwYWNlX2xlZnQ6XQoKICAgICAgICAjIE90aGVyd2lzZSwgd2UgaGF2ZSB0byBwcmVzZXJ2ZSB0aGUgbG9uZyB3b3JkIGludGFjdC4gIE9ubHkgYWRkCiAgICAgICAgIyBpdCB0byB0aGUgY3VycmVudCBsaW5lIGlmIHRoZXJlJ3Mgbm90aGluZyBhbHJlYWR5IHRoZXJlIC0tCiAgICAgICAgIyB0aGF0IG1pbmltaXplcyBob3cgbXVjaCB3ZSB2aW9sYXRlIHRoZSB3aWR0aCBjb25zdHJhaW50LgogICAgICAgIGVsaWYgbm90IGN1cl9saW5lOgogICAgICAgICAgICBjdXJfbGluZS5hcHBlbmQocmV2ZXJzZWRfY2h1bmtzLnBvcCgpKQoKICAgICAgICAjIElmIHdlJ3JlIG5vdCBhbGxvd2VkIHRvIGJyZWFrIGxvbmcgd29yZHMsIGFuZCB0aGVyZSdzIGFscmVhZHkKICAgICAgICAjIHRleHQgb24gdGhlIGN1cnJlbnQgbGluZSwgZG8gbm90aGluZy4gIE5leHQgdGltZSB0aHJvdWdoIHRoZQogICAgICAgICMgbWFpbiBsb29wIG9mIF93cmFwX2NodW5rcygpLCB3ZSdsbCB3aW5kIHVwIGhlcmUgYWdhaW4sIGJ1dAogICAgICAgICMgY3VyX2xlbiB3aWxsIGJlIHplcm8sIHNvIHRoZSBuZXh0IGxpbmUgd2lsbCBiZSBlbnRpcmVseQogICAgICAgICMgZGV2b3RlZCB0byB0aGUgbG9uZyB3b3JkIHRoYXQgd2UgY2FuJ3QgaGFuZGxlIHJpZ2h0IG5vdy4KCiAgICBkZWYgX3dyYXBfY2h1bmtzKHNlbGYsIGNodW5rcyk6CiAgICAgICAgIiIiX3dyYXBfY2h1bmtzKGNodW5rcyA6IFtzdHJpbmddKSAtPiBbc3RyaW5nXQoKICAgICAgICBXcmFwIGEgc2VxdWVuY2Ugb2YgdGV4dCBjaHVua3MgYW5kIHJldHVybiBhIGxpc3Qgb2YgbGluZXMgb2YKICAgICAgICBsZW5ndGggJ3NlbGYud2lkdGgnIG9yIGxlc3MuICAoSWYgJ2JyZWFrX2xvbmdfd29yZHMnIGlzIGZhbHNlLAogICAgICAgIHNvbWUgbGluZXMgbWF5IGJlIGxvbmdlciB0aGFuIHRoaXMuKSAgQ2h1bmtzIGNvcnJlc3BvbmQgcm91Z2hseQogICAgICAgIHRvIHdvcmRzIGFuZCB0aGUgd2hpdGVzcGFjZSBiZXR3ZWVuIHRoZW06IGVhY2ggY2h1bmsgaXMKICAgICAgICBpbmRpdmlzaWJsZSAobW9kdWxvICdicmVha19sb25nX3dvcmRzJyksIGJ1dCBhIGxpbmUgYnJlYWsgY2FuCiAgICAgICAgY29tZSBiZXR3ZWVuIGFueSB0d28gY2h1bmtzLiAgQ2h1bmtzIHNob3VsZCBub3QgaGF2ZSBpbnRlcm5hbAogICAgICAgIHdoaXRlc3BhY2U7IGllLiBhIGNodW5rIGlzIGVpdGhlciBhbGwgd2hpdGVzcGFjZSBvciBhICJ3b3JkIi4KICAgICAgICBXaGl0ZXNwYWNlIGNodW5rcyB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YKICAgICAgICBsaW5lcywgYnV0IGFwYXJ0IGZyb20gdGhhdCB3aGl0ZXNwYWNlIGlzIHByZXNlcnZlZC4KICAgICAgICAiIiIKICAgICAgICBsaW5lcyA9IFtdCiAgICAgICAgaWYgc2VsZi53aWR0aCA8PSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHdpZHRoICVyIChtdXN0IGJlID4gMCkiICUgc2VsZi53aWR0aCkKCiAgICAgICAgIyBBcnJhbmdlIGluIHJldmVyc2Ugb3JkZXIgc28gaXRlbXMgY2FuIGJlIGVmZmljaWVudGx5IHBvcHBlZAogICAgICAgICMgZnJvbSBhIHN0YWNrIG9mIGNodWNrcy4KICAgICAgICBjaHVua3MucmV2ZXJzZSgpCgogICAgICAgIHdoaWxlIGNodW5rczoKCiAgICAgICAgICAgICMgU3RhcnQgdGhlIGxpc3Qgb2YgY2h1bmtzIHRoYXQgd2lsbCBtYWtlIHVwIHRoZSBjdXJyZW50IGxpbmUuCiAgICAgICAgICAgICMgY3VyX2xlbiBpcyBqdXN0IHRoZSBsZW5ndGggb2YgYWxsIHRoZSBjaHVua3MgaW4gY3VyX2xpbmUuCiAgICAgICAgICAgIGN1cl9saW5lID0gW10KICAgICAgICAgICAgY3VyX2xlbiA9IDAKCiAgICAgICAgICAgICMgRmlndXJlIG91dCB3aGljaCBzdGF0aWMgc3RyaW5nIHdpbGwgcHJlZml4IHRoaXMgbGluZS4KICAgICAgICAgICAgaWYgbGluZXM6CiAgICAgICAgICAgICAgICBpbmRlbnQgPSBzZWxmLnN1YnNlcXVlbnRfaW5kZW50CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpbmRlbnQgPSBzZWxmLmluaXRpYWxfaW5kZW50CgogICAgICAgICAgICAjIE1heGltdW0gd2lkdGggZm9yIHRoaXMgbGluZS4KICAgICAgICAgICAgd2lkdGggPSBzZWxmLndpZHRoIC0gbGVuKGluZGVudCkKCiAgICAgICAgICAgICMgRmlyc3QgY2h1bmsgb24gbGluZSBpcyB3aGl0ZXNwYWNlIC0tIGRyb3AgaXQsIHVubGVzcyB0aGlzCiAgICAgICAgICAgICMgaXMgdGhlIHZlcnkgYmVnaW5uaW5nIG9mIHRoZSB0ZXh0IChpZS4gbm8gbGluZXMgc3RhcnRlZCB5ZXQpLgogICAgICAgICAgICBpZiBzZWxmLmRyb3Bfd2hpdGVzcGFjZSBhbmQgY2h1bmtzWy0xXS5zdHJpcCgpID09ICcnIGFuZCBsaW5lczoKICAgICAgICAgICAgICAgIGRlbCBjaHVua3NbLTFdCgogICAgICAgICAgICB3aGlsZSBjaHVua3M6CiAgICAgICAgICAgICAgICBsID0gbGVuKGNodW5rc1stMV0pCgogICAgICAgICAgICAgICAgIyBDYW4gYXQgbGVhc3Qgc3F1ZWV6ZSB0aGlzIGNodW5rIG9udG8gdGhlIGN1cnJlbnQgbGluZS4KICAgICAgICAgICAgICAgIGlmIGN1cl9sZW4gKyBsIDw9IHdpZHRoOgogICAgICAgICAgICAgICAgICAgIGN1cl9saW5lLmFwcGVuZChjaHVua3MucG9wKCkpCiAgICAgICAgICAgICAgICAgICAgY3VyX2xlbiArPSBsCgogICAgICAgICAgICAgICAgIyBOb3BlLCB0aGlzIGxpbmUgaXMgZnVsbC4KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICMgVGhlIGN1cnJlbnQgbGluZSBpcyBmdWxsLCBhbmQgdGhlIG5leHQgY2h1bmsgaXMgdG9vIGJpZyB0bwogICAgICAgICAgICAjIGZpdCBvbiAqYW55KiBsaW5lIChub3QganVzdCB0aGlzIG9uZSkuCiAgICAgICAgICAgIGlmIGNodW5rcyBhbmQgbGVuKGNodW5rc1stMV0pID4gd2lkdGg6CiAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVfbG9uZ193b3JkKGNodW5rcywgY3VyX2xpbmUsIGN1cl9sZW4sIHdpZHRoKQoKICAgICAgICAgICAgIyBJZiB0aGUgbGFzdCBjaHVuayBvbiB0aGlzIGxpbmUgaXMgYWxsIHdoaXRlc3BhY2UsIGRyb3AgaXQuCiAgICAgICAgICAgIGlmIHNlbGYuZHJvcF93aGl0ZXNwYWNlIGFuZCBjdXJfbGluZSBhbmQgY3VyX2xpbmVbLTFdLnN0cmlwKCkgPT0gJyc6CiAgICAgICAgICAgICAgICBkZWwgY3VyX2xpbmVbLTFdCgogICAgICAgICAgICAjIENvbnZlcnQgY3VycmVudCBsaW5lIGJhY2sgdG8gYSBzdHJpbmcgYW5kIHN0b3JlIGl0IGluIGxpc3QKICAgICAgICAgICAgIyBvZiBhbGwgbGluZXMgKHJldHVybiB2YWx1ZSkuCiAgICAgICAgICAgIGlmIGN1cl9saW5lOgogICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKGluZGVudCArICcnLmpvaW4oY3VyX2xpbmUpKQoKICAgICAgICByZXR1cm4gbGluZXMKCgogICAgIyAtLSBQdWJsaWMgaW50ZXJmYWNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgd3JhcChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJ3cmFwKHRleHQgOiBzdHJpbmcpIC0+IFtzdHJpbmddCgogICAgICAgIFJlZm9ybWF0IHRoZSBzaW5nbGUgcGFyYWdyYXBoIGluICd0ZXh0JyBzbyBpdCBmaXRzIGluIGxpbmVzIG9mCiAgICAgICAgbm8gbW9yZSB0aGFuICdzZWxmLndpZHRoJyBjb2x1bW5zLCBhbmQgcmV0dXJuIGEgbGlzdCBvZiB3cmFwcGVkCiAgICAgICAgbGluZXMuICBUYWJzIGluICd0ZXh0JyBhcmUgZXhwYW5kZWQgd2l0aCBzdHJpbmcuZXhwYW5kdGFicygpLAogICAgICAgIGFuZCBhbGwgb3RoZXIgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIChpbmNsdWRpbmcgbmV3bGluZSkgYXJlCiAgICAgICAgY29udmVydGVkIHRvIHNwYWNlLgogICAgICAgICIiIgogICAgICAgIHRleHQgPSBzZWxmLl9tdW5nZV93aGl0ZXNwYWNlKHRleHQpCiAgICAgICAgY2h1bmtzID0gc2VsZi5fc3BsaXQodGV4dCkKICAgICAgICBpZiBzZWxmLmZpeF9zZW50ZW5jZV9lbmRpbmdzOgogICAgICAgICAgICBzZWxmLl9maXhfc2VudGVuY2VfZW5kaW5ncyhjaHVua3MpCiAgICAgICAgcmV0dXJuIHNlbGYuX3dyYXBfY2h1bmtzKGNodW5rcykKCiAgICBkZWYgZmlsbChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJmaWxsKHRleHQgOiBzdHJpbmcpIC0+IHN0cmluZwoKICAgICAgICBSZWZvcm1hdCB0aGUgc2luZ2xlIHBhcmFncmFwaCBpbiAndGV4dCcgdG8gZml0IGluIGxpbmVzIG9mIG5vCiAgICAgICAgbW9yZSB0aGFuICdzZWxmLndpZHRoJyBjb2x1bW5zLCBhbmQgcmV0dXJuIGEgbmV3IHN0cmluZwogICAgICAgIGNvbnRhaW5pbmcgdGhlIGVudGlyZSB3cmFwcGVkIHBhcmFncmFwaC4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gIlxuIi5qb2luKHNlbGYud3JhcCh0ZXh0KSkKCgojIC0tIENvbnZlbmllbmNlIGludGVyZmFjZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiB3cmFwKHRleHQsIHdpZHRoPTcwLCAqKmt3YXJncyk6CiAgICAiIiJXcmFwIGEgc2luZ2xlIHBhcmFncmFwaCBvZiB0ZXh0LCByZXR1cm5pbmcgYSBsaXN0IG9mIHdyYXBwZWQgbGluZXMuCgogICAgUmVmb3JtYXQgdGhlIHNpbmdsZSBwYXJhZ3JhcGggaW4gJ3RleHQnIHNvIGl0IGZpdHMgaW4gbGluZXMgb2Ygbm8KICAgIG1vcmUgdGhhbiAnd2lkdGgnIGNvbHVtbnMsIGFuZCByZXR1cm4gYSBsaXN0IG9mIHdyYXBwZWQgbGluZXMuICBCeQogICAgZGVmYXVsdCwgdGFicyBpbiAndGV4dCcgYXJlIGV4cGFuZGVkIHdpdGggc3RyaW5nLmV4cGFuZHRhYnMoKSwgYW5kCiAgICBhbGwgb3RoZXIgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIChpbmNsdWRpbmcgbmV3bGluZSkgYXJlIGNvbnZlcnRlZCB0bwogICAgc3BhY2UuICBTZWUgVGV4dFdyYXBwZXIgY2xhc3MgZm9yIGF2YWlsYWJsZSBrZXl3b3JkIGFyZ3MgdG8gY3VzdG9taXplCiAgICB3cmFwcGluZyBiZWhhdmlvdXIuCiAgICAiIiIKICAgIHcgPSBUZXh0V3JhcHBlcih3aWR0aD13aWR0aCwgKiprd2FyZ3MpCiAgICByZXR1cm4gdy53cmFwKHRleHQpCgpkZWYgZmlsbCh0ZXh0LCB3aWR0aD03MCwgKiprd2FyZ3MpOgogICAgIiIiRmlsbCBhIHNpbmdsZSBwYXJhZ3JhcGggb2YgdGV4dCwgcmV0dXJuaW5nIGEgbmV3IHN0cmluZy4KCiAgICBSZWZvcm1hdCB0aGUgc2luZ2xlIHBhcmFncmFwaCBpbiAndGV4dCcgdG8gZml0IGluIGxpbmVzIG9mIG5vIG1vcmUKICAgIHRoYW4gJ3dpZHRoJyBjb2x1bW5zLCBhbmQgcmV0dXJuIGEgbmV3IHN0cmluZyBjb250YWluaW5nIHRoZSBlbnRpcmUKICAgIHdyYXBwZWQgcGFyYWdyYXBoLiAgQXMgd2l0aCB3cmFwKCksIHRhYnMgYXJlIGV4cGFuZGVkIGFuZCBvdGhlcgogICAgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGNvbnZlcnRlZCB0byBzcGFjZS4gIFNlZSBUZXh0V3JhcHBlciBjbGFzcyBmb3IKICAgIGF2YWlsYWJsZSBrZXl3b3JkIGFyZ3MgdG8gY3VzdG9taXplIHdyYXBwaW5nIGJlaGF2aW91ci4KICAgICIiIgogICAgdyA9IFRleHRXcmFwcGVyKHdpZHRoPXdpZHRoLCAqKmt3YXJncykKICAgIHJldHVybiB3LmZpbGwodGV4dCkKCgojIC0tIExvb3NlbHkgcmVsYXRlZCBmdW5jdGlvbmFsaXR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCl93aGl0ZXNwYWNlX29ubHlfcmUgPSByZS5jb21waWxlKCdeWyBcdF0rJCcsIHJlLk1VTFRJTElORSkKX2xlYWRpbmdfd2hpdGVzcGFjZV9yZSA9IHJlLmNvbXBpbGUoJyheWyBcdF0qKSg/OlteIFx0XG5dKScsIHJlLk1VTFRJTElORSkKCmRlZiBkZWRlbnQodGV4dCk6CiAgICAiIiJSZW1vdmUgYW55IGNvbW1vbiBsZWFkaW5nIHdoaXRlc3BhY2UgZnJvbSBldmVyeSBsaW5lIGluIGB0ZXh0YC4KCiAgICBUaGlzIGNhbiBiZSB1c2VkIHRvIG1ha2UgdHJpcGxlLXF1b3RlZCBzdHJpbmdzIGxpbmUgdXAgd2l0aCB0aGUgbGVmdAogICAgZWRnZSBvZiB0aGUgZGlzcGxheSwgd2hpbGUgc3RpbGwgcHJlc2VudGluZyB0aGVtIGluIHRoZSBzb3VyY2UgY29kZQogICAgaW4gaW5kZW50ZWQgZm9ybS4KCiAgICBOb3RlIHRoYXQgdGFicyBhbmQgc3BhY2VzIGFyZSBib3RoIHRyZWF0ZWQgYXMgd2hpdGVzcGFjZSwgYnV0IHRoZXkKICAgIGFyZSBub3QgZXF1YWw6IHRoZSBsaW5lcyAiICBoZWxsbyIgYW5kICJcdGhlbGxvIiBhcmUKICAgIGNvbnNpZGVyZWQgdG8gaGF2ZSBubyBjb21tb24gbGVhZGluZyB3aGl0ZXNwYWNlLiAgKFRoaXMgYmVoYXZpb3VyIGlzCiAgICBuZXcgaW4gUHl0aG9uIDIuNTsgb2xkZXIgdmVyc2lvbnMgb2YgdGhpcyBtb2R1bGUgaW5jb3JyZWN0bHkKICAgIGV4cGFuZGVkIHRhYnMgYmVmb3JlIHNlYXJjaGluZyBmb3IgY29tbW9uIGxlYWRpbmcgd2hpdGVzcGFjZS4pCiAgICAiIiIKICAgICMgTG9vayBmb3IgdGhlIGxvbmdlc3QgbGVhZGluZyBzdHJpbmcgb2Ygc3BhY2VzIGFuZCB0YWJzIGNvbW1vbiB0bwogICAgIyBhbGwgbGluZXMuCiAgICBtYXJnaW4gPSBOb25lCiAgICB0ZXh0ID0gX3doaXRlc3BhY2Vfb25seV9yZS5zdWIoJycsIHRleHQpCiAgICBpbmRlbnRzID0gX2xlYWRpbmdfd2hpdGVzcGFjZV9yZS5maW5kYWxsKHRleHQpCiAgICBmb3IgaW5kZW50IGluIGluZGVudHM6CiAgICAgICAgaWYgbWFyZ2luIGlzIE5vbmU6CiAgICAgICAgICAgIG1hcmdpbiA9IGluZGVudAoKICAgICAgICAjIEN1cnJlbnQgbGluZSBtb3JlIGRlZXBseSBpbmRlbnRlZCB0aGFuIHByZXZpb3VzIHdpbm5lcjoKICAgICAgICAjIG5vIGNoYW5nZSAocHJldmlvdXMgd2lubmVyIGlzIHN0aWxsIG9uIHRvcCkuCiAgICAgICAgZWxpZiBpbmRlbnQuc3RhcnRzd2l0aChtYXJnaW4pOgogICAgICAgICAgICBwYXNzCgogICAgICAgICMgQ3VycmVudCBsaW5lIGNvbnNpc3RlbnQgd2l0aCBhbmQgbm8gZGVlcGVyIHRoYW4gcHJldmlvdXMgd2lubmVyOgogICAgICAgICMgaXQncyB0aGUgbmV3IHdpbm5lci4KICAgICAgICBlbGlmIG1hcmdpbi5zdGFydHN3aXRoKGluZGVudCk6CiAgICAgICAgICAgIG1hcmdpbiA9IGluZGVudAoKICAgICAgICAjIEN1cnJlbnQgbGluZSBhbmQgcHJldmlvdXMgd2lubmVyIGhhdmUgbm8gY29tbW9uIHdoaXRlc3BhY2U6CiAgICAgICAgIyB0aGVyZSBpcyBubyBtYXJnaW4uCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbWFyZ2luID0gIiIKICAgICAgICAgICAgYnJlYWsKCiAgICAjIHNhbml0eSBjaGVjayAodGVzdGluZy9kZWJ1Z2dpbmcgb25seSkKICAgIGlmIDAgYW5kIG1hcmdpbjoKICAgICAgICBmb3IgbGluZSBpbiB0ZXh0LnNwbGl0KCJcbiIpOgogICAgICAgICAgICBhc3NlcnQgbm90IGxpbmUgb3IgbGluZS5zdGFydHN3aXRoKG1hcmdpbiksIFwKICAgICAgICAgICAgICAgICAgICJsaW5lID0gJXIsIG1hcmdpbiA9ICVyIiAlIChsaW5lLCBtYXJnaW4pCgogICAgaWYgbWFyZ2luOgogICAgICAgIHRleHQgPSByZS5zdWIocicoP20pXicgKyBtYXJnaW4sICcnLCB0ZXh0KQogICAgcmV0dXJuIHRleHQKCgpkZWYgaW5kZW50KHRleHQsIHByZWZpeCwgcHJlZGljYXRlPU5vbmUpOgogICAgIiIiQWRkcyAncHJlZml4JyB0byB0aGUgYmVnaW5uaW5nIG9mIHNlbGVjdGVkIGxpbmVzIGluICd0ZXh0Jy4KCiAgICBJZiAncHJlZGljYXRlJyBpcyBwcm92aWRlZCwgJ3ByZWZpeCcgd2lsbCBvbmx5IGJlIGFkZGVkIHRvIHRoZSBsaW5lcwogICAgd2hlcmUgJ3ByZWRpY2F0ZShsaW5lKScgaXMgVHJ1ZS4gSWYgJ3ByZWRpY2F0ZScgaXMgbm90IHByb3ZpZGVkLAogICAgaXQgd2lsbCBkZWZhdWx0IHRvIGFkZGluZyAncHJlZml4JyB0byBhbGwgbm9uLWVtcHR5IGxpbmVzIHRoYXQgZG8gbm90CiAgICBjb25zaXN0IHNvbGVseSBvZiB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMuCiAgICAiIiIKICAgIGlmIHByZWRpY2F0ZSBpcyBOb25lOgogICAgICAgIGRlZiBwcmVkaWNhdGUobGluZSk6CiAgICAgICAgICAgIHJldHVybiBsaW5lLnN0cmlwKCkKCiAgICBkZWYgcHJlZml4ZWRfbGluZXMoKToKICAgICAgICBmb3IgbGluZSBpbiB0ZXh0LnNwbGl0bGluZXMoVHJ1ZSk6CiAgICAgICAgICAgIHlpZWxkIChwcmVmaXggKyBsaW5lIGlmIHByZWRpY2F0ZShsaW5lKSBlbHNlIGxpbmUpCiAgICByZXR1cm4gJycuam9pbihwcmVmaXhlZF9saW5lcygpKQoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICAjcHJpbnQgZGVkZW50KCJcdGZvb1xuXHRiYXIiKQogICAgI3ByaW50IGRlZGVudCgiICBcdGhlbGxvIHRoZXJlXG4gIFx0ICBob3cgYXJlIHlvdT8iKQogICAgcHJpbnQoZGVkZW50KCJIZWxsbyB0aGVyZS5cbiAgVGhpcyBpcyBpbmRlbnRlZC4iKSkK',
'/Lib/posixpath.py':'IiIiQ29tbW9uIG9wZXJhdGlvbnMgb24gUG9zaXggcGF0aG5hbWVzLg0KDQpJbnN0ZWFkIG9mIGltcG9ydGluZyB0aGlzIG1vZHVsZSBkaXJlY3RseSwgaW1wb3J0IG9zIGFuZCByZWZlciB0bw0KdGhpcyBtb2R1bGUgYXMgb3MucGF0aC4gIFRoZSAib3MucGF0aCIgbmFtZSBpcyBhbiBhbGlhcyBmb3IgdGhpcw0KbW9kdWxlIG9uIFBvc2l4IHN5c3RlbXM7IG9uIG90aGVyIHN5c3RlbXMgKGUuZy4gTWFjLCBXaW5kb3dzKSwNCm9zLnBhdGggcHJvdmlkZXMgdGhlIHNhbWUgb3BlcmF0aW9ucyBpbiBhIG1hbm5lciBzcGVjaWZpYyB0byB0aGF0DQpwbGF0Zm9ybSwgYW5kIGlzIGFuIGFsaWFzIHRvIGFub3RoZXIgbW9kdWxlIChlLmcuIG1hY3BhdGgsIG50cGF0aCkuDQoNClNvbWUgb2YgdGhpcyBjYW4gYWN0dWFsbHkgYmUgdXNlZnVsIG9uIG5vbi1Qb3NpeCBzeXN0ZW1zIHRvbywgZS5nLg0KZm9yIG1hbmlwdWxhdGlvbiBvZiB0aGUgcGF0aG5hbWUgY29tcG9uZW50IG9mIFVSTHMuDQoiIiINCg0KaW1wb3J0IG9zDQppbXBvcnQgc3lzDQppbXBvcnQgc3RhdA0KaW1wb3J0IGdlbmVyaWNwYXRoDQpmcm9tIGdlbmVyaWNwYXRoIGltcG9ydCAqDQoNCl9fYWxsX18gPSBbIm5vcm1jYXNlIiwiaXNhYnMiLCJqb2luIiwic3BsaXRkcml2ZSIsInNwbGl0Iiwic3BsaXRleHQiLA0KICAgICAgICAgICAiYmFzZW5hbWUiLCJkaXJuYW1lIiwiY29tbW9ucHJlZml4IiwiZ2V0c2l6ZSIsImdldG10aW1lIiwNCiAgICAgICAgICAgImdldGF0aW1lIiwiZ2V0Y3RpbWUiLCJpc2xpbmsiLCJleGlzdHMiLCJsZXhpc3RzIiwiaXNkaXIiLCJpc2ZpbGUiLA0KICAgICAgICAgICAiaXNtb3VudCIsICJleHBhbmR1c2VyIiwiZXhwYW5kdmFycyIsIm5vcm1wYXRoIiwiYWJzcGF0aCIsDQogICAgICAgICAgICJzYW1lZmlsZSIsInNhbWVvcGVuZmlsZSIsInNhbWVzdGF0IiwNCiAgICAgICAgICAgImN1cmRpciIsInBhcmRpciIsInNlcCIsInBhdGhzZXAiLCJkZWZwYXRoIiwiYWx0c2VwIiwiZXh0c2VwIiwNCiAgICAgICAgICAgImRldm51bGwiLCJyZWFscGF0aCIsInN1cHBvcnRzX3VuaWNvZGVfZmlsZW5hbWVzIiwicmVscGF0aCJdDQoNCiMgU3RyaW5ncyByZXByZXNlbnRpbmcgdmFyaW91cyBwYXRoLXJlbGF0ZWQgYml0cyBhbmQgcGllY2VzLg0KIyBUaGVzZSBhcmUgcHJpbWFyaWx5IGZvciBleHBvcnQ7IGludGVybmFsbHksIHRoZXkgYXJlIGhhcmRjb2RlZC4NCmN1cmRpciA9ICcuJw0KcGFyZGlyID0gJy4uJw0KZXh0c2VwID0gJy4nDQpzZXAgPSAnLycNCnBhdGhzZXAgPSAnOicNCmRlZnBhdGggPSAnOi9iaW46L3Vzci9iaW4nDQphbHRzZXAgPSBOb25lDQpkZXZudWxsID0gJy9kZXYvbnVsbCcNCg0KZGVmIF9nZXRfc2VwKHBhdGgpOg0KICAgIGlmIGlzaW5zdGFuY2UocGF0aCwgYnl0ZXMpOg0KICAgICAgICByZXR1cm4gYicvJw0KICAgIGVsc2U6DQogICAgICAgIHJldHVybiAnLycNCg0KIyBOb3JtYWxpemUgdGhlIGNhc2Ugb2YgYSBwYXRobmFtZS4gIFRyaXZpYWwgaW4gUG9zaXgsIHN0cmluZy5sb3dlciBvbiBNYWMuDQojIE9uIE1TLURPUyB0aGlzIG1heSBhbHNvIHR1cm4gc2xhc2hlcyBpbnRvIGJhY2tzbGFzaGVzOyBob3dldmVyLCBvdGhlcg0KIyBub3JtYWxpemF0aW9ucyAoc3VjaCBhcyBvcHRpbWl6aW5nICcuLi8nIGF3YXkpIGFyZSBub3QgYWxsb3dlZA0KIyAoYW5vdGhlciBmdW5jdGlvbiBzaG91bGQgYmUgZGVmaW5lZCB0byBkbyB0aGF0KS4NCg0KZGVmIG5vcm1jYXNlKHMpOg0KICAgICIiIk5vcm1hbGl6ZSBjYXNlIG9mIHBhdGhuYW1lLiAgSGFzIG5vIGVmZmVjdCB1bmRlciBQb3NpeCIiIg0KICAgICMgVE9ETzogb24gTWFjIE9TIFgsIHRoaXMgc2hvdWxkIHJlYWxseSByZXR1cm4gcy5sb3dlcigpLg0KICAgIGlmIG5vdCBpc2luc3RhbmNlKHMsIChieXRlcywgc3RyKSk6DQogICAgICAgIHJhaXNlIFR5cGVFcnJvcigibm9ybWNhc2UoKSBhcmd1bWVudCBtdXN0IGJlIHN0ciBvciBieXRlcywgIg0KICAgICAgICAgICAgICAgICAgICAgICAgIm5vdCAne30nIi5mb3JtYXQocy5fX2NsYXNzX18uX19uYW1lX18pKQ0KICAgIHJldHVybiBzDQoNCg0KIyBSZXR1cm4gd2hldGhlciBhIHBhdGggaXMgYWJzb2x1dGUuDQojIFRyaXZpYWwgaW4gUG9zaXgsIGhhcmRlciBvbiB0aGUgTWFjIG9yIE1TLURPUy4NCg0KZGVmIGlzYWJzKHMpOg0KICAgICIiIlRlc3Qgd2hldGhlciBhIHBhdGggaXMgYWJzb2x1dGUiIiINCiAgICBzZXAgPSBfZ2V0X3NlcChzKQ0KICAgIHJldHVybiBzLnN0YXJ0c3dpdGgoc2VwKQ0KDQoNCiMgSm9pbiBwYXRobmFtZXMuDQojIElnbm9yZSB0aGUgcHJldmlvdXMgcGFydHMgaWYgYSBwYXJ0IGlzIGFic29sdXRlLg0KIyBJbnNlcnQgYSAnLycgdW5sZXNzIHRoZSBmaXJzdCBwYXJ0IGlzIGVtcHR5IG9yIGFscmVhZHkgZW5kcyBpbiAnLycuDQoNCmRlZiBqb2luKGEsICpwKToNCiAgICAiIiJKb2luIHR3byBvciBtb3JlIHBhdGhuYW1lIGNvbXBvbmVudHMsIGluc2VydGluZyAnLycgYXMgbmVlZGVkLg0KICAgIElmIGFueSBjb21wb25lbnQgaXMgYW4gYWJzb2x1dGUgcGF0aCwgYWxsIHByZXZpb3VzIHBhdGggY29tcG9uZW50cw0KICAgIHdpbGwgYmUgZGlzY2FyZGVkLiAgQW4gZW1wdHkgbGFzdCBwYXJ0IHdpbGwgcmVzdWx0IGluIGEgcGF0aCB0aGF0DQogICAgZW5kcyB3aXRoIGEgc2VwYXJhdG9yLiIiIg0KICAgIHNlcCA9IF9nZXRfc2VwKGEpDQogICAgcGF0aCA9IGENCiAgICB0cnk6DQogICAgICAgIGZvciBiIGluIHA6DQogICAgICAgICAgICBpZiBiLnN0YXJ0c3dpdGgoc2VwKToNCiAgICAgICAgICAgICAgICBwYXRoID0gYg0KICAgICAgICAgICAgZWxpZiBub3QgcGF0aCBvciBwYXRoLmVuZHN3aXRoKHNlcCk6DQogICAgICAgICAgICAgICAgcGF0aCArPSBiDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHBhdGggKz0gc2VwICsgYg0KICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgIHZhbGlkX3R5cGVzID0gYWxsKGlzaW5zdGFuY2UocywgKHN0ciwgYnl0ZXMsIGJ5dGVhcnJheSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBzIGluIChhLCApICsgcCkNCiAgICAgICAgaWYgdmFsaWRfdHlwZXM6DQogICAgICAgICAgICAjIE11c3QgaGF2ZSBhIG1peHR1cmUgb2YgdGV4dCBhbmQgYmluYXJ5IGRhdGENCiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiQ2FuJ3QgbWl4IHN0cmluZ3MgYW5kIGJ5dGVzIGluIHBhdGggIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjb21wb25lbnRzLiIpIGZyb20gTm9uZQ0KICAgICAgICByYWlzZQ0KICAgIHJldHVybiBwYXRoDQoNCg0KIyBTcGxpdCBhIHBhdGggaW4gaGVhZCAoZXZlcnl0aGluZyB1cCB0byB0aGUgbGFzdCAnLycpIGFuZCB0YWlsICh0aGUNCiMgcmVzdCkuICBJZiB0aGUgcGF0aCBlbmRzIGluICcvJywgdGFpbCB3aWxsIGJlIGVtcHR5LiAgSWYgdGhlcmUgaXMgbm8NCiMgJy8nIGluIHRoZSBwYXRoLCBoZWFkICB3aWxsIGJlIGVtcHR5Lg0KIyBUcmFpbGluZyAnLydlcyBhcmUgc3RyaXBwZWQgZnJvbSBoZWFkIHVubGVzcyBpdCBpcyB0aGUgcm9vdC4NCg0KZGVmIHNwbGl0KHApOg0KICAgICIiIlNwbGl0IGEgcGF0aG5hbWUuICBSZXR1cm5zIHR1cGxlICIoaGVhZCwgdGFpbCkiIHdoZXJlICJ0YWlsIiBpcw0KICAgIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpbmFsIHNsYXNoLiAgRWl0aGVyIHBhcnQgbWF5IGJlIGVtcHR5LiIiIg0KICAgIHNlcCA9IF9nZXRfc2VwKHApDQogICAgaSA9IHAucmZpbmQoc2VwKSArIDENCiAgICBoZWFkLCB0YWlsID0gcFs6aV0sIHBbaTpdDQogICAgaWYgaGVhZCBhbmQgaGVhZCAhPSBzZXAqbGVuKGhlYWQpOg0KICAgICAgICBoZWFkID0gaGVhZC5yc3RyaXAoc2VwKQ0KICAgIHJldHVybiBoZWFkLCB0YWlsDQoNCg0KIyBTcGxpdCBhIHBhdGggaW4gcm9vdCBhbmQgZXh0ZW5zaW9uLg0KIyBUaGUgZXh0ZW5zaW9uIGlzIGV2ZXJ5dGhpbmcgc3RhcnRpbmcgYXQgdGhlIGxhc3QgZG90IGluIHRoZSBsYXN0DQojIHBhdGhuYW1lIGNvbXBvbmVudDsgdGhlIHJvb3QgaXMgZXZlcnl0aGluZyBiZWZvcmUgdGhhdC4NCiMgSXQgaXMgYWx3YXlzIHRydWUgdGhhdCByb290ICsgZXh0ID09IHAuDQoNCmRlZiBzcGxpdGV4dChwKToNCiAgICBpZiBpc2luc3RhbmNlKHAsIGJ5dGVzKToNCiAgICAgICAgc2VwID0gYicvJw0KICAgICAgICBleHRzZXAgPSBiJy4nDQogICAgZWxzZToNCiAgICAgICAgc2VwID0gJy8nDQogICAgICAgIGV4dHNlcCA9ICcuJw0KICAgIHJldHVybiBnZW5lcmljcGF0aC5fc3BsaXRleHQocCwgc2VwLCBOb25lLCBleHRzZXApDQpzcGxpdGV4dC5fX2RvY19fID0gZ2VuZXJpY3BhdGguX3NwbGl0ZXh0Ll9fZG9jX18NCg0KIyBTcGxpdCBhIHBhdGhuYW1lIGludG8gYSBkcml2ZSBzcGVjaWZpY2F0aW9uIGFuZCB0aGUgcmVzdCBvZiB0aGUNCiMgcGF0aC4gIFVzZWZ1bCBvbiBET1MvV2luZG93cy9OVDsgb24gVW5peCwgdGhlIGRyaXZlIGlzIGFsd2F5cyBlbXB0eS4NCg0KZGVmIHNwbGl0ZHJpdmUocCk6DQogICAgIiIiU3BsaXQgYSBwYXRobmFtZSBpbnRvIGRyaXZlIGFuZCBwYXRoLiBPbiBQb3NpeCwgZHJpdmUgaXMgYWx3YXlzDQogICAgZW1wdHkuIiIiDQogICAgcmV0dXJuIHBbOjBdLCBwDQoNCg0KIyBSZXR1cm4gdGhlIHRhaWwgKGJhc2VuYW1lKSBwYXJ0IG9mIGEgcGF0aCwgc2FtZSBhcyBzcGxpdChwYXRoKVsxXS4NCg0KZGVmIGJhc2VuYW1lKHApOg0KICAgICIiIlJldHVybnMgdGhlIGZpbmFsIGNvbXBvbmVudCBvZiBhIHBhdGhuYW1lIiIiDQogICAgc2VwID0gX2dldF9zZXAocCkNCiAgICBpID0gcC5yZmluZChzZXApICsgMQ0KICAgIHJldHVybiBwW2k6XQ0KDQoNCiMgUmV0dXJuIHRoZSBoZWFkIChkaXJuYW1lKSBwYXJ0IG9mIGEgcGF0aCwgc2FtZSBhcyBzcGxpdChwYXRoKVswXS4NCg0KZGVmIGRpcm5hbWUocCk6DQogICAgIiIiUmV0dXJucyB0aGUgZGlyZWN0b3J5IGNvbXBvbmVudCBvZiBhIHBhdGhuYW1lIiIiDQogICAgc2VwID0gX2dldF9zZXAocCkNCiAgICBpID0gcC5yZmluZChzZXApICsgMQ0KICAgIGhlYWQgPSBwWzppXQ0KICAgIGlmIGhlYWQgYW5kIGhlYWQgIT0gc2VwKmxlbihoZWFkKToNCiAgICAgICAgaGVhZCA9IGhlYWQucnN0cmlwKHNlcCkNCiAgICByZXR1cm4gaGVhZA0KDQoNCiMgSXMgYSBwYXRoIGEgc3ltYm9saWMgbGluaz8NCiMgVGhpcyB3aWxsIGFsd2F5cyByZXR1cm4gZmFsc2Ugb24gc3lzdGVtcyB3aGVyZSBvcy5sc3RhdCBkb2Vzbid0IGV4aXN0Lg0KDQpkZWYgaXNsaW5rKHBhdGgpOg0KICAgICIiIlRlc3Qgd2hldGhlciBhIHBhdGggaXMgYSBzeW1ib2xpYyBsaW5rIiIiDQogICAgdHJ5Og0KICAgICAgICBzdCA9IG9zLmxzdGF0KHBhdGgpDQogICAgZXhjZXB0IChvcy5lcnJvciwgQXR0cmlidXRlRXJyb3IpOg0KICAgICAgICByZXR1cm4gRmFsc2UNCiAgICByZXR1cm4gc3RhdC5TX0lTTE5LKHN0LnN0X21vZGUpDQoNCiMgQmVpbmcgdHJ1ZSBmb3IgZGFuZ2xpbmcgc3ltYm9saWMgbGlua3MgaXMgYWxzbyB1c2VmdWwuDQoNCmRlZiBsZXhpc3RzKHBhdGgpOg0KICAgICIiIlRlc3Qgd2hldGhlciBhIHBhdGggZXhpc3RzLiAgUmV0dXJucyBUcnVlIGZvciBicm9rZW4gc3ltYm9saWMgbGlua3MiIiINCiAgICB0cnk6DQogICAgICAgIG9zLmxzdGF0KHBhdGgpDQogICAgZXhjZXB0IG9zLmVycm9yOg0KICAgICAgICByZXR1cm4gRmFsc2UNCiAgICByZXR1cm4gVHJ1ZQ0KDQoNCiMgQXJlIHR3byBmaWxlbmFtZXMgcmVhbGx5IHBvaW50aW5nIHRvIHRoZSBzYW1lIGZpbGU/DQoNCmRlZiBzYW1lZmlsZShmMSwgZjIpOg0KICAgICIiIlRlc3Qgd2hldGhlciB0d28gcGF0aG5hbWVzIHJlZmVyZW5jZSB0aGUgc2FtZSBhY3R1YWwgZmlsZSIiIg0KICAgIHMxID0gb3Muc3RhdChmMSkNCiAgICBzMiA9IG9zLnN0YXQoZjIpDQogICAgcmV0dXJuIHNhbWVzdGF0KHMxLCBzMikNCg0KDQojIEFyZSB0d28gb3BlbiBmaWxlcyByZWFsbHkgcmVmZXJlbmNpbmcgdGhlIHNhbWUgZmlsZT8NCiMgKE5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBmaWxlIGRlc2NyaXB0b3IhKQ0KDQpkZWYgc2FtZW9wZW5maWxlKGZwMSwgZnAyKToNCiAgICAiIiJUZXN0IHdoZXRoZXIgdHdvIG9wZW4gZmlsZSBvYmplY3RzIHJlZmVyZW5jZSB0aGUgc2FtZSBmaWxlIiIiDQogICAgczEgPSBvcy5mc3RhdChmcDEpDQogICAgczIgPSBvcy5mc3RhdChmcDIpDQogICAgcmV0dXJuIHNhbWVzdGF0KHMxLCBzMikNCg0KDQojIEFyZSB0d28gc3RhdCBidWZmZXJzIChvYnRhaW5lZCBmcm9tIHN0YXQsIGZzdGF0IG9yIGxzdGF0KQ0KIyBkZXNjcmliaW5nIHRoZSBzYW1lIGZpbGU/DQoNCmRlZiBzYW1lc3RhdChzMSwgczIpOg0KICAgICIiIlRlc3Qgd2hldGhlciB0d28gc3RhdCBidWZmZXJzIHJlZmVyZW5jZSB0aGUgc2FtZSBmaWxlIiIiDQogICAgcmV0dXJuIHMxLnN0X2lubyA9PSBzMi5zdF9pbm8gYW5kIFwNCiAgICAgICAgICAgczEuc3RfZGV2ID09IHMyLnN0X2Rldg0KDQoNCiMgSXMgYSBwYXRoIGEgbW91bnQgcG9pbnQ/DQojIChEb2VzIHRoaXMgd29yayBmb3IgYWxsIFVOSVhlcz8gIElzIGl0IGV2ZW4gZ3VhcmFudGVlZCB0byB3b3JrIGJ5IFBvc2l4PykNCg0KZGVmIGlzbW91bnQocGF0aCk6DQogICAgIiIiVGVzdCB3aGV0aGVyIGEgcGF0aCBpcyBhIG1vdW50IHBvaW50IiIiDQogICAgaWYgaXNsaW5rKHBhdGgpOg0KICAgICAgICAjIEEgc3ltbGluayBjYW4gbmV2ZXIgYmUgYSBtb3VudCBwb2ludA0KICAgICAgICByZXR1cm4gRmFsc2UNCiAgICB0cnk6DQogICAgICAgIHMxID0gb3MubHN0YXQocGF0aCkNCiAgICAgICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6DQogICAgICAgICAgICBwYXJlbnQgPSBqb2luKHBhdGgsIGInLi4nKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcGFyZW50ID0gam9pbihwYXRoLCAnLi4nKQ0KICAgICAgICBzMiA9IG9zLmxzdGF0KHBhcmVudCkNCiAgICBleGNlcHQgb3MuZXJyb3I6DQogICAgICAgIHJldHVybiBGYWxzZSAjIEl0IGRvZXNuJ3QgZXhpc3QgLS0gc28gbm90IGEgbW91bnQgcG9pbnQgOi0pDQogICAgZGV2MSA9IHMxLnN0X2Rldg0KICAgIGRldjIgPSBzMi5zdF9kZXYNCiAgICBpZiBkZXYxICE9IGRldjI6DQogICAgICAgIHJldHVybiBUcnVlICAgICAjIHBhdGgvLi4gb24gYSBkaWZmZXJlbnQgZGV2aWNlIGFzIHBhdGgNCiAgICBpbm8xID0gczEuc3RfaW5vDQogICAgaW5vMiA9IHMyLnN0X2lubw0KICAgIGlmIGlubzEgPT0gaW5vMjoNCiAgICAgICAgcmV0dXJuIFRydWUgICAgICMgcGF0aC8uLiBpcyB0aGUgc2FtZSBpLW5vZGUgYXMgcGF0aA0KICAgIHJldHVybiBGYWxzZQ0KDQoNCiMgRXhwYW5kIHBhdGhzIGJlZ2lubmluZyB3aXRoICd+JyBvciAnfnVzZXInLg0KIyAnficgbWVhbnMgJEhPTUU7ICd+dXNlcicgbWVhbnMgdGhhdCB1c2VyJ3MgaG9tZSBkaXJlY3RvcnkuDQojIElmIHRoZSBwYXRoIGRvZXNuJ3QgYmVnaW4gd2l0aCAnficsIG9yIGlmIHRoZSB1c2VyIG9yICRIT01FIGlzIHVua25vd24sDQojIHRoZSBwYXRoIGlzIHJldHVybmVkIHVuY2hhbmdlZCAobGVhdmluZyBlcnJvciByZXBvcnRpbmcgdG8gd2hhdGV2ZXINCiMgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIGV4cGFuZGVkIHBhdGggYXMgYXJndW1lbnQpLg0KIyBTZWUgYWxzbyBtb2R1bGUgJ2dsb2InIGZvciBleHBhbnNpb24gb2YgKiwgPyBhbmQgWy4uLl0gaW4gcGF0aG5hbWVzLg0KIyAoQSBmdW5jdGlvbiBzaG91bGQgYWxzbyBiZSBkZWZpbmVkIHRvIGRvIGZ1bGwgKnNoLXN0eWxlIGVudmlyb25tZW50DQojIHZhcmlhYmxlIGV4cGFuc2lvbi4pDQoNCmRlZiBleHBhbmR1c2VyKHBhdGgpOg0KICAgICIiIkV4cGFuZCB+IGFuZCB+dXNlciBjb25zdHJ1Y3Rpb25zLiAgSWYgdXNlciBvciAkSE9NRSBpcyB1bmtub3duLA0KICAgIGRvIG5vdGhpbmcuIiIiDQogICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6DQogICAgICAgIHRpbGRlID0gYid+Jw0KICAgIGVsc2U6DQogICAgICAgIHRpbGRlID0gJ34nDQogICAgaWYgbm90IHBhdGguc3RhcnRzd2l0aCh0aWxkZSk6DQogICAgICAgIHJldHVybiBwYXRoDQogICAgc2VwID0gX2dldF9zZXAocGF0aCkNCiAgICBpID0gcGF0aC5maW5kKHNlcCwgMSkNCiAgICBpZiBpIDwgMDoNCiAgICAgICAgaSA9IGxlbihwYXRoKQ0KICAgIGlmIGkgPT0gMToNCiAgICAgICAgaWYgJ0hPTUUnIG5vdCBpbiBvcy5lbnZpcm9uOg0KICAgICAgICAgICAgaW1wb3J0IHB3ZA0KICAgICAgICAgICAgdXNlcmhvbWUgPSBwd2QuZ2V0cHd1aWQob3MuZ2V0dWlkKCkpLnB3X2Rpcg0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgdXNlcmhvbWUgPSBvcy5lbnZpcm9uWydIT01FJ10NCiAgICBlbHNlOg0KICAgICAgICBpbXBvcnQgcHdkDQogICAgICAgIG5hbWUgPSBwYXRoWzE6aV0NCiAgICAgICAgaWYgaXNpbnN0YW5jZShuYW1lLCBieXRlcyk6DQogICAgICAgICAgICBuYW1lID0gc3RyKG5hbWUsICdBU0NJSScpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHB3ZW50ID0gcHdkLmdldHB3bmFtKG5hbWUpDQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgICAgIHJldHVybiBwYXRoDQogICAgICAgIHVzZXJob21lID0gcHdlbnQucHdfZGlyDQogICAgaWYgaXNpbnN0YW5jZShwYXRoLCBieXRlcyk6DQogICAgICAgIHVzZXJob21lID0gb3MuZnNlbmNvZGUodXNlcmhvbWUpDQogICAgICAgIHJvb3QgPSBiJy8nDQogICAgZWxzZToNCiAgICAgICAgcm9vdCA9ICcvJw0KICAgIHVzZXJob21lID0gdXNlcmhvbWUucnN0cmlwKHJvb3QpDQogICAgcmV0dXJuICh1c2VyaG9tZSArIHBhdGhbaTpdKSBvciByb290DQoNCg0KIyBFeHBhbmQgcGF0aHMgY29udGFpbmluZyBzaGVsbCB2YXJpYWJsZSBzdWJzdGl0dXRpb25zLg0KIyBUaGlzIGV4cGFuZHMgdGhlIGZvcm1zICR2YXJpYWJsZSBhbmQgJHt2YXJpYWJsZX0gb25seS4NCiMgTm9uLWV4aXN0ZW50IHZhcmlhYmxlcyBhcmUgbGVmdCB1bmNoYW5nZWQuDQoNCl92YXJwcm9nID0gTm9uZQ0KX3ZhcnByb2diID0gTm9uZQ0KDQpkZWYgZXhwYW5kdmFycyhwYXRoKToNCiAgICAiIiJFeHBhbmQgc2hlbGwgdmFyaWFibGVzIG9mIGZvcm0gJHZhciBhbmQgJHt2YXJ9LiAgVW5rbm93biB2YXJpYWJsZXMNCiAgICBhcmUgbGVmdCB1bmNoYW5nZWQuIiIiDQogICAgZ2xvYmFsIF92YXJwcm9nLCBfdmFycHJvZ2INCiAgICBpZiBpc2luc3RhbmNlKHBhdGgsIGJ5dGVzKToNCiAgICAgICAgaWYgYickJyBub3QgaW4gcGF0aDoNCiAgICAgICAgICAgIHJldHVybiBwYXRoDQogICAgICAgIGlmIG5vdCBfdmFycHJvZ2I6DQogICAgICAgICAgICBpbXBvcnQgcmUNCiAgICAgICAgICAgIF92YXJwcm9nYiA9IHJlLmNvbXBpbGUoYnInXCQoXHcrfFx7W159XSpcfSknLCByZS5BU0NJSSkNCiAgICAgICAgc2VhcmNoID0gX3ZhcnByb2diLnNlYXJjaA0KICAgICAgICBzdGFydCA9IGIneycNCiAgICAgICAgZW5kID0gYid9Jw0KICAgIGVsc2U6DQogICAgICAgIGlmICckJyBub3QgaW4gcGF0aDoNCiAgICAgICAgICAgIHJldHVybiBwYXRoDQogICAgICAgIGlmIG5vdCBfdmFycHJvZzoNCiAgICAgICAgICAgIGltcG9ydCByZQ0KICAgICAgICAgICAgX3ZhcnByb2cgPSByZS5jb21waWxlKHInXCQoXHcrfFx7W159XSpcfSknLCByZS5BU0NJSSkNCiAgICAgICAgc2VhcmNoID0gX3ZhcnByb2cuc2VhcmNoDQogICAgICAgIHN0YXJ0ID0gJ3snDQogICAgICAgIGVuZCA9ICd9Jw0KICAgIGkgPSAwDQogICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgbSA9IHNlYXJjaChwYXRoLCBpKQ0KICAgICAgICBpZiBub3QgbToNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGksIGogPSBtLnNwYW4oMCkNCiAgICAgICAgbmFtZSA9IG0uZ3JvdXAoMSkNCiAgICAgICAgaWYgbmFtZS5zdGFydHN3aXRoKHN0YXJ0KSBhbmQgbmFtZS5lbmRzd2l0aChlbmQpOg0KICAgICAgICAgICAgbmFtZSA9IG5hbWVbMTotMV0NCiAgICAgICAgaWYgaXNpbnN0YW5jZShuYW1lLCBieXRlcyk6DQogICAgICAgICAgICBuYW1lID0gc3RyKG5hbWUsICdBU0NJSScpDQogICAgICAgIGlmIG5hbWUgaW4gb3MuZW52aXJvbjoNCiAgICAgICAgICAgIHRhaWwgPSBwYXRoW2o6XQ0KICAgICAgICAgICAgdmFsdWUgPSBvcy5lbnZpcm9uW25hbWVdDQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHBhdGgsIGJ5dGVzKToNCiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmVuY29kZSgnQVNDSUknKQ0KICAgICAgICAgICAgcGF0aCA9IHBhdGhbOmldICsgdmFsdWUNCiAgICAgICAgICAgIGkgPSBsZW4ocGF0aCkNCiAgICAgICAgICAgIHBhdGggKz0gdGFpbA0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaSA9IGoNCiAgICByZXR1cm4gcGF0aA0KDQoNCiMgTm9ybWFsaXplIGEgcGF0aCwgZS5nLiBBLy9CLCBBLy4vQiBhbmQgQS9mb28vLi4vQiBhbGwgYmVjb21lIEEvQi4NCiMgSXQgc2hvdWxkIGJlIHVuZGVyc3Rvb2QgdGhhdCB0aGlzIG1heSBjaGFuZ2UgdGhlIG1lYW5pbmcgb2YgdGhlIHBhdGgNCiMgaWYgaXQgY29udGFpbnMgc3ltYm9saWMgbGlua3MhDQoNCmRlZiBub3JtcGF0aChwYXRoKToNCiAgICAiIiJOb3JtYWxpemUgcGF0aCwgZWxpbWluYXRpbmcgZG91YmxlIHNsYXNoZXMsIGV0Yy4iIiINCiAgICBpZiBpc2luc3RhbmNlKHBhdGgsIGJ5dGVzKToNCiAgICAgICAgc2VwID0gYicvJw0KICAgICAgICBlbXB0eSA9IGInJw0KICAgICAgICBkb3QgPSBiJy4nDQogICAgICAgIGRvdGRvdCA9IGInLi4nDQogICAgZWxzZToNCiAgICAgICAgc2VwID0gJy8nDQogICAgICAgIGVtcHR5ID0gJycNCiAgICAgICAgZG90ID0gJy4nDQogICAgICAgIGRvdGRvdCA9ICcuLicNCiAgICBpZiBwYXRoID09IGVtcHR5Og0KICAgICAgICByZXR1cm4gZG90DQogICAgaW5pdGlhbF9zbGFzaGVzID0gcGF0aC5zdGFydHN3aXRoKHNlcCkNCiAgICAjIFBPU0lYIGFsbG93cyBvbmUgb3IgdHdvIGluaXRpYWwgc2xhc2hlcywgYnV0IHRyZWF0cyB0aHJlZSBvciBtb3JlDQogICAgIyBhcyBzaW5nbGUgc2xhc2guDQogICAgaWYgKGluaXRpYWxfc2xhc2hlcyBhbmQNCiAgICAgICAgcGF0aC5zdGFydHN3aXRoKHNlcCoyKSBhbmQgbm90IHBhdGguc3RhcnRzd2l0aChzZXAqMykpOg0KICAgICAgICBpbml0aWFsX3NsYXNoZXMgPSAyDQogICAgY29tcHMgPSBwYXRoLnNwbGl0KHNlcCkNCiAgICBuZXdfY29tcHMgPSBbXQ0KICAgIGZvciBjb21wIGluIGNvbXBzOg0KICAgICAgICBpZiBjb21wIGluIChlbXB0eSwgZG90KToNCiAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIGlmIChjb21wICE9IGRvdGRvdCBvciAobm90IGluaXRpYWxfc2xhc2hlcyBhbmQgbm90IG5ld19jb21wcykgb3INCiAgICAgICAgICAgICAobmV3X2NvbXBzIGFuZCBuZXdfY29tcHNbLTFdID09IGRvdGRvdCkpOg0KICAgICAgICAgICAgbmV3X2NvbXBzLmFwcGVuZChjb21wKQ0KICAgICAgICBlbGlmIG5ld19jb21wczoNCiAgICAgICAgICAgIG5ld19jb21wcy5wb3AoKQ0KICAgIGNvbXBzID0gbmV3X2NvbXBzDQogICAgcGF0aCA9IHNlcC5qb2luKGNvbXBzKQ0KICAgIGlmIGluaXRpYWxfc2xhc2hlczoNCiAgICAgICAgcGF0aCA9IHNlcCppbml0aWFsX3NsYXNoZXMgKyBwYXRoDQogICAgcmV0dXJuIHBhdGggb3IgZG90DQoNCg0KZGVmIGFic3BhdGgocGF0aCk6DQogICAgIiIiUmV0dXJuIGFuIGFic29sdXRlIHBhdGguIiIiDQogICAgaWYgbm90IGlzYWJzKHBhdGgpOg0KICAgICAgICBpZiBpc2luc3RhbmNlKHBhdGgsIGJ5dGVzKToNCiAgICAgICAgICAgIGN3ZCA9IG9zLmdldGN3ZGIoKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgY3dkID0gb3MuZ2V0Y3dkKCkNCiAgICAgICAgcGF0aCA9IGpvaW4oY3dkLCBwYXRoKQ0KICAgIHJldHVybiBub3JtcGF0aChwYXRoKQ0KDQoNCiMgUmV0dXJuIGEgY2Fub25pY2FsIHBhdGggKGkuZS4gdGhlIGFic29sdXRlIGxvY2F0aW9uIG9mIGEgZmlsZSBvbiB0aGUNCiMgZmlsZXN5c3RlbSkuDQoNCmRlZiByZWFscGF0aChmaWxlbmFtZSk6DQogICAgIiIiUmV0dXJuIHRoZSBjYW5vbmljYWwgcGF0aCBvZiB0aGUgc3BlY2lmaWVkIGZpbGVuYW1lLCBlbGltaW5hdGluZyBhbnkNCnN5bWJvbGljIGxpbmtzIGVuY291bnRlcmVkIGluIHRoZSBwYXRoLiIiIg0KICAgIGlmIGlzaW5zdGFuY2UoZmlsZW5hbWUsIGJ5dGVzKToNCiAgICAgICAgc2VwID0gYicvJw0KICAgICAgICBlbXB0eSA9IGInJw0KICAgIGVsc2U6DQogICAgICAgIHNlcCA9ICcvJw0KICAgICAgICBlbXB0eSA9ICcnDQogICAgaWYgaXNhYnMoZmlsZW5hbWUpOg0KICAgICAgICBiaXRzID0gW3NlcF0gKyBmaWxlbmFtZS5zcGxpdChzZXApWzE6XQ0KICAgIGVsc2U6DQogICAgICAgIGJpdHMgPSBbZW1wdHldICsgZmlsZW5hbWUuc3BsaXQoc2VwKQ0KDQogICAgZm9yIGkgaW4gcmFuZ2UoMiwgbGVuKGJpdHMpKzEpOg0KICAgICAgICBjb21wb25lbnQgPSBqb2luKCpiaXRzWzA6aV0pDQogICAgICAgICMgUmVzb2x2ZSBzeW1ib2xpYyBsaW5rcy4NCiAgICAgICAgaWYgaXNsaW5rKGNvbXBvbmVudCk6DQogICAgICAgICAgICByZXNvbHZlZCA9IF9yZXNvbHZlX2xpbmsoY29tcG9uZW50KQ0KICAgICAgICAgICAgaWYgcmVzb2x2ZWQgaXMgTm9uZToNCiAgICAgICAgICAgICAgICAjIEluZmluaXRlIGxvb3AgLS0gcmV0dXJuIG9yaWdpbmFsIGNvbXBvbmVudCArIHJlc3Qgb2YgdGhlIHBhdGgNCiAgICAgICAgICAgICAgICByZXR1cm4gYWJzcGF0aChqb2luKCooW2NvbXBvbmVudF0gKyBiaXRzW2k6XSkpKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBuZXdwYXRoID0gam9pbigqKFtyZXNvbHZlZF0gKyBiaXRzW2k6XSkpDQogICAgICAgICAgICAgICAgcmV0dXJuIHJlYWxwYXRoKG5ld3BhdGgpDQoNCiAgICByZXR1cm4gYWJzcGF0aChmaWxlbmFtZSkNCg0KDQpkZWYgX3Jlc29sdmVfbGluayhwYXRoKToNCiAgICAiIiJJbnRlcm5hbCBoZWxwZXIgZnVuY3Rpb24uICBUYWtlcyBhIHBhdGggYW5kIGZvbGxvd3Mgc3ltbGlua3MNCiAgICB1bnRpbCB3ZSBlaXRoZXIgYXJyaXZlIGF0IHNvbWV0aGluZyB0aGF0IGlzbid0IGEgc3ltbGluaywgb3INCiAgICBlbmNvdW50ZXIgYSBwYXRoIHdlJ3ZlIHNlZW4gYmVmb3JlIChtZWFuaW5nIHRoYXQgdGhlcmUncyBhIGxvb3ApLg0KICAgICIiIg0KICAgIHBhdGhzX3NlZW4gPSBzZXQoKQ0KICAgIHdoaWxlIGlzbGluayhwYXRoKToNCiAgICAgICAgaWYgcGF0aCBpbiBwYXRoc19zZWVuOg0KICAgICAgICAgICAgIyBBbHJlYWR5IHNlZW4gdGhpcyBwYXRoLCBzbyB3ZSBtdXN0IGhhdmUgYSBzeW1saW5rIGxvb3ANCiAgICAgICAgICAgIHJldHVybiBOb25lDQogICAgICAgIHBhdGhzX3NlZW4uYWRkKHBhdGgpDQogICAgICAgICMgUmVzb2x2ZSB3aGVyZSB0aGUgbGluayBwb2ludHMgdG8NCiAgICAgICAgcmVzb2x2ZWQgPSBvcy5yZWFkbGluayhwYXRoKQ0KICAgICAgICBpZiBub3QgaXNhYnMocmVzb2x2ZWQpOg0KICAgICAgICAgICAgZGlyID0gZGlybmFtZShwYXRoKQ0KICAgICAgICAgICAgcGF0aCA9IG5vcm1wYXRoKGpvaW4oZGlyLCByZXNvbHZlZCkpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwYXRoID0gbm9ybXBhdGgocmVzb2x2ZWQpDQogICAgcmV0dXJuIHBhdGgNCg0Kc3VwcG9ydHNfdW5pY29kZV9maWxlbmFtZXMgPSAoc3lzLnBsYXRmb3JtID09ICdkYXJ3aW4nKQ0KDQpkZWYgcmVscGF0aChwYXRoLCBzdGFydD1Ob25lKToNCiAgICAiIiJSZXR1cm4gYSByZWxhdGl2ZSB2ZXJzaW9uIG9mIGEgcGF0aCIiIg0KDQogICAgaWYgbm90IHBhdGg6DQogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5vIHBhdGggc3BlY2lmaWVkIikNCg0KICAgIGlmIGlzaW5zdGFuY2UocGF0aCwgYnl0ZXMpOg0KICAgICAgICBjdXJkaXIgPSBiJy4nDQogICAgICAgIHNlcCA9IGInLycNCiAgICAgICAgcGFyZGlyID0gYicuLicNCiAgICBlbHNlOg0KICAgICAgICBjdXJkaXIgPSAnLicNCiAgICAgICAgc2VwID0gJy8nDQogICAgICAgIHBhcmRpciA9ICcuLicNCg0KICAgIGlmIHN0YXJ0IGlzIE5vbmU6DQogICAgICAgIHN0YXJ0ID0gY3VyZGlyDQoNCiAgICBzdGFydF9saXN0ID0gW3ggZm9yIHggaW4gYWJzcGF0aChzdGFydCkuc3BsaXQoc2VwKSBpZiB4XQ0KICAgIHBhdGhfbGlzdCA9IFt4IGZvciB4IGluIGFic3BhdGgocGF0aCkuc3BsaXQoc2VwKSBpZiB4XQ0KDQogICAgIyBXb3JrIG91dCBob3cgbXVjaCBvZiB0aGUgZmlsZXBhdGggaXMgc2hhcmVkIGJ5IHN0YXJ0IGFuZCBwYXRoLg0KICAgIGkgPSBsZW4oY29tbW9ucHJlZml4KFtzdGFydF9saXN0LCBwYXRoX2xpc3RdKSkNCg0KICAgIHJlbF9saXN0ID0gW3BhcmRpcl0gKiAobGVuKHN0YXJ0X2xpc3QpLWkpICsgcGF0aF9saXN0W2k6XQ0KICAgIGlmIG5vdCByZWxfbGlzdDoNCiAgICAgICAgcmV0dXJuIGN1cmRpcg0KICAgIHJldHVybiBqb2luKCpyZWxfbGlzdCkNCg==',
'/Lib/_weakref.py':'Y2xhc3MgUHJveHlUeXBlOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLG9iaik6CiAgICAgICAgc2VsZi5vYmogPSBvYmoKCkNhbGxhYmxlUHJveHlUeXBlID0gUHJveHlUeXBlClByb3h5VHlwZXMgPSBbUHJveHlUeXBlLENhbGxhYmxlUHJveHlUeXBlXQoKY2xhc3MgUmVmZXJlbmNlVHlwZToKCiAgICBkZWYgX19pbml0X18oc2VsZixvYmopOgogICAgICAgIHNlbGYub2JqID0gb2JqCgpjbGFzcyByZWY6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsb2JqKToKICAgICAgICBzZWxmLm9iaiA9IFJlZmVyZW5jZVR5cGUob2JqKQoKZGVmIGdldHdlYWtyZWZjb3VudChvYmopOgogICAgcmV0dXJuIDEKCmRlZiBnZXR3ZWFrcmVmcyhvYmopOgogICAgcmV0dXJuIG9iagoKCmRlZiBwcm94eShvYmosY2FsbGJhY2spOgogICAgcmV0dXJuIFByb3h5VHlwZShvYmopCgo=',
'/Lib/_collections.py':'IyAiSGlnaCBwZXJmb3JtYW5jZSBkYXRhIHN0cnVjdHVyZXMKIyAiCiMgY29waWVkIGZyb20gcHlweSByZXBvCgojCiMgQ29waWVkIGFuZCBjb21wbGV0ZWQgZnJvbSB0aGUgc2FuZGJveCBvZiBDUHl0aG9uCiMgICAobm9uZGlzdC9zYW5kYm94L2NvbGxlY3Rpb25zL3B5ZGVxdWUucHkgcmV2IDEuMSwgUmF5bW9uZCBIZXR0aW5nZXIpCiMKCmltcG9ydCBvcGVyYXRvcgojdHJ5OgojICAgIGZyb20gdGhyZWFkIGltcG9ydCBnZXRfaWRlbnQgYXMgX3RocmVhZF9pZGVudAojZXhjZXB0IEltcG9ydEVycm9yOgpkZWYgX3RocmVhZF9pZGVudCgpOgogICAgcmV0dXJuIC0xCgoKbiA9IDMwCkxGVExOSyA9IG4KUkdUTE5LID0gbisxCkJMT0NLU0laID0gbisyCgojIFRoZSBkZXF1ZSdzIHNpemUgbGltaXQgaXMgZC5tYXhsZW4uICBUaGUgbGltaXQgY2FuIGJlIHplcm8gb3IgcG9zaXRpdmUsIG9yCiMgTm9uZS4gIEFmdGVyIGFuIGl0ZW0gaXMgYWRkZWQgdG8gYSBkZXF1ZSwgd2UgY2hlY2sgdG8gc2VlIGlmIHRoZSBzaXplIGhhcwojIGdyb3duIHBhc3QgdGhlIGxpbWl0LiBJZiBpdCBoYXMsIHdlIGdldCB0aGUgc2l6ZSBiYWNrIGRvd24gdG8gdGhlIGxpbWl0IGJ5CiMgcG9wcGluZyBhbiBpdGVtIG9mZiBvZiB0aGUgb3Bwb3NpdGUgZW5kLiAgVGhlIG1ldGhvZHMgdGhhdCBjYW4gdHJpZ2dlciB0aGlzCiMgYXJlIGFwcGVuZCgpLCBhcHBlbmRsZWZ0KCksIGV4dGVuZCgpLCBhbmQgZXh0ZW5kbGVmdCgpLgoKI2NsYXNzIGRlcXVlKG9iamVjdCk6CmNsYXNzIGRlcXVlOgoKICAgIGRlZiBfX25ld19fKGNscywgaXRlcmFibGU9KCksICphcmdzLCAqKmt3KToKICAgICAgICAjZml4bWUKICAgICAgICAjc2VsZiA9IHN1cGVyKGRlcXVlLCBjbHMpLl9fbmV3X18oY2xzLCAqYXJncywgKiprdykKICAgICAgICBzZWxmPW9iamVjdC5fX25ld19fKGNscywgKmFyZ3MsICoqa3cpCiAgICAgICAgc2VsZi5jbGVhcigpCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlcmFibGU9KCksIG1heGxlbj1Ob25lKToKICAgICAgICBvYmplY3QuX19pbml0X18oc2VsZikKICAgICAgICBzZWxmLmNsZWFyKCkKICAgICAgICBpZiBtYXhsZW4gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIG1heGxlbiA8IDA6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJtYXhsZW4gbXVzdCBiZSBub24tbmVnYXRpdmUiKQogICAgICAgIHNlbGYuX21heGxlbiA9IG1heGxlbgogICAgICAgIGFkZCA9IHNlbGYuYXBwZW5kCiAgICAgICAgZm9yIGVsZW0gaW4gaXRlcmFibGU6CiAgICAgICAgICAgIGFkZChlbGVtKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1heGxlbihzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fbWF4bGVuCgogICAgZGVmIGNsZWFyKHNlbGYpOgogICAgICAgIHNlbGYucmlnaHQgPSBzZWxmLmxlZnQgPSBbTm9uZV0gKiBCTE9DS1NJWgogICAgICAgIHNlbGYucmlnaHRuZHggPSBuLy8yICAgIyBwb2ludHMgdG8gbGFzdCB3cml0dGVuIGVsZW1lbnQKICAgICAgICBzZWxmLmxlZnRuZHggPSBuLy8yKzEKICAgICAgICBzZWxmLmxlbmd0aCA9IDAKICAgICAgICBzZWxmLnN0YXRlID0gMAoKICAgIGRlZiBhcHBlbmQoc2VsZiwgeCk6CiAgICAgICAgc2VsZi5zdGF0ZSArPSAxCiAgICAgICAgc2VsZi5yaWdodG5keCArPSAxCiAgICAgICAgaWYgc2VsZi5yaWdodG5keCA9PSBuOgogICAgICAgICAgICBuZXdibG9jayA9IFtOb25lXSAqIEJMT0NLU0laCiAgICAgICAgICAgIHNlbGYucmlnaHRbUkdUTE5LXSA9IG5ld2Jsb2NrCiAgICAgICAgICAgIG5ld2Jsb2NrW0xGVExOS10gPSBzZWxmLnJpZ2h0CiAgICAgICAgICAgIHNlbGYucmlnaHQgPSBuZXdibG9jawogICAgICAgICAgICBzZWxmLnJpZ2h0bmR4ID0gMAogICAgICAgIHNlbGYubGVuZ3RoICs9IDEKICAgICAgICBzZWxmLnJpZ2h0W3NlbGYucmlnaHRuZHhdID0geAogICAgICAgIGlmIHNlbGYubWF4bGVuIGlzIG5vdCBOb25lIGFuZCBzZWxmLmxlbmd0aCA+IHNlbGYubWF4bGVuOgogICAgICAgICAgICBzZWxmLnBvcGxlZnQoKQoKICAgIGRlZiBhcHBlbmRsZWZ0KHNlbGYsIHgpOgogICAgICAgIHNlbGYuc3RhdGUgKz0gMQogICAgICAgIHNlbGYubGVmdG5keCAtPSAxCiAgICAgICAgaWYgc2VsZi5sZWZ0bmR4ID09IC0xOgogICAgICAgICAgICBuZXdibG9jayA9IFtOb25lXSAqIEJMT0NLU0laCiAgICAgICAgICAgIHNlbGYubGVmdFtMRlRMTktdID0gbmV3YmxvY2sKICAgICAgICAgICAgbmV3YmxvY2tbUkdUTE5LXSA9IHNlbGYubGVmdAogICAgICAgICAgICBzZWxmLmxlZnQgPSBuZXdibG9jawogICAgICAgICAgICBzZWxmLmxlZnRuZHggPSBuLTEKICAgICAgICBzZWxmLmxlbmd0aCArPSAxCiAgICAgICAgc2VsZi5sZWZ0W3NlbGYubGVmdG5keF0gPSB4CiAgICAgICAgaWYgc2VsZi5tYXhsZW4gaXMgbm90IE5vbmUgYW5kIHNlbGYubGVuZ3RoID4gc2VsZi5tYXhsZW46CiAgICAgICAgICAgIHNlbGYucG9wKCkKCiAgICBkZWYgZXh0ZW5kKHNlbGYsIGl0ZXJhYmxlKToKICAgICAgICBpZiBpdGVyYWJsZSBpcyBzZWxmOgogICAgICAgICAgICBpdGVyYWJsZSA9IGxpc3QoaXRlcmFibGUpCiAgICAgICAgZm9yIGVsZW0gaW4gaXRlcmFibGU6CiAgICAgICAgICAgIHNlbGYuYXBwZW5kKGVsZW0pCgogICAgZGVmIGV4dGVuZGxlZnQoc2VsZiwgaXRlcmFibGUpOgogICAgICAgIGlmIGl0ZXJhYmxlIGlzIHNlbGY6CiAgICAgICAgICAgIGl0ZXJhYmxlID0gbGlzdChpdGVyYWJsZSkKICAgICAgICBmb3IgZWxlbSBpbiBpdGVyYWJsZToKICAgICAgICAgICAgc2VsZi5hcHBlbmRsZWZ0KGVsZW0pCgogICAgZGVmIHBvcChzZWxmKToKICAgICAgICBpZiBzZWxmLmxlZnQgaXMgc2VsZi5yaWdodCBhbmQgc2VsZi5sZWZ0bmR4ID4gc2VsZi5yaWdodG5keDoKICAgICAgICAgICAgI3JhaXNlIEluZGV4RXJyb3IsICJwb3AgZnJvbSBhbiBlbXB0eSBkZXF1ZSIgICMgZG9lcyBub3Qgd29yayBpbiBicnl0aG9uCiAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoInBvcCBmcm9tIGFuIGVtcHR5IGRlcXVlIikKICAgICAgICB4ID0gc2VsZi5yaWdodFtzZWxmLnJpZ2h0bmR4XQogICAgICAgIHNlbGYucmlnaHRbc2VsZi5yaWdodG5keF0gPSBOb25lCiAgICAgICAgc2VsZi5sZW5ndGggLT0gMQogICAgICAgIHNlbGYucmlnaHRuZHggLT0gMQogICAgICAgIHNlbGYuc3RhdGUgKz0gMQogICAgICAgIGlmIHNlbGYucmlnaHRuZHggPT0gLTE6CiAgICAgICAgICAgIHByZXZibG9jayA9IHNlbGYucmlnaHRbTEZUTE5LXQogICAgICAgICAgICBpZiBwcmV2YmxvY2sgaXMgTm9uZToKICAgICAgICAgICAgICAgICMgdGhlIGRlcXVlIGhhcyBiZWNvbWUgZW1wdHk7IHJlY2VudGVyIGluc3RlYWQgb2YgZnJlZWluZyBibG9jawogICAgICAgICAgICAgICAgc2VsZi5yaWdodG5keCA9IG4vLzIKICAgICAgICAgICAgICAgIHNlbGYubGVmdG5keCA9IG4vLzIrMQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJldmJsb2NrW1JHVExOS10gPSBOb25lCiAgICAgICAgICAgICAgICBzZWxmLnJpZ2h0W0xGVExOS10gPSBOb25lCiAgICAgICAgICAgICAgICBzZWxmLnJpZ2h0ID0gcHJldmJsb2NrCiAgICAgICAgICAgICAgICBzZWxmLnJpZ2h0bmR4ID0gbi0xCiAgICAgICAgcmV0dXJuIHgKCiAgICBkZWYgcG9wbGVmdChzZWxmKToKICAgICAgICBpZiBzZWxmLmxlZnQgaXMgc2VsZi5yaWdodCBhbmQgc2VsZi5sZWZ0bmR4ID4gc2VsZi5yaWdodG5keDoKICAgICAgICAgICAgI3JhaXNlIEluZGV4RXJyb3IsICJwb3AgZnJvbSBhbiBlbXB0eSBkZXF1ZSIKICAgICAgICAgICAgcmFpc2UgSW5kZXhFcnJvcigicG9wIGZyb20gYW4gZW1wdHkgZGVxdWUiKQogICAgICAgIHggPSBzZWxmLmxlZnRbc2VsZi5sZWZ0bmR4XQogICAgICAgIHNlbGYubGVmdFtzZWxmLmxlZnRuZHhdID0gTm9uZQogICAgICAgIHNlbGYubGVuZ3RoIC09IDEKICAgICAgICBzZWxmLmxlZnRuZHggKz0gMQogICAgICAgIHNlbGYuc3RhdGUgKz0gMQogICAgICAgIGlmIHNlbGYubGVmdG5keCA9PSBuOgogICAgICAgICAgICBwcmV2YmxvY2sgPSBzZWxmLmxlZnRbUkdUTE5LXQogICAgICAgICAgICBpZiBwcmV2YmxvY2sgaXMgTm9uZToKICAgICAgICAgICAgICAgICMgdGhlIGRlcXVlIGhhcyBiZWNvbWUgZW1wdHk7IHJlY2VudGVyIGluc3RlYWQgb2YgZnJlZWluZyBibG9jawogICAgICAgICAgICAgICAgc2VsZi5yaWdodG5keCA9IG4vLzIKICAgICAgICAgICAgICAgIHNlbGYubGVmdG5keCA9IG4vLzIrMQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJldmJsb2NrW0xGVExOS10gPSBOb25lCiAgICAgICAgICAgICAgICBzZWxmLmxlZnRbUkdUTE5LXSA9IE5vbmUKICAgICAgICAgICAgICAgIHNlbGYubGVmdCA9IHByZXZibG9jawogICAgICAgICAgICAgICAgc2VsZi5sZWZ0bmR4ID0gMAogICAgICAgIHJldHVybiB4CgogICAgZGVmIGNvdW50KHNlbGYsIHZhbHVlKToKICAgICAgICBjID0gMAogICAgICAgIGZvciBpdGVtIGluIHNlbGY6CiAgICAgICAgICAgIGlmIGl0ZW0gPT0gdmFsdWU6CiAgICAgICAgICAgICAgICBjICs9IDEKICAgICAgICByZXR1cm4gYwoKICAgIGRlZiByZW1vdmUoc2VsZiwgdmFsdWUpOgogICAgICAgICMgTmVlZCB0byBiZSBkZWZlbnNpdmUgZm9yIG11dGF0aW5nIGNvbXBhcmlzb25zCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKHNlbGYpKToKICAgICAgICAgICAgaWYgc2VsZltpXSA9PSB2YWx1ZToKICAgICAgICAgICAgICAgIGRlbCBzZWxmW2ldCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkZXF1ZS5yZW1vdmUoeCk6IHggbm90IGluIGRlcXVlIikKCiAgICBkZWYgcm90YXRlKHNlbGYsIG49MSk6CiAgICAgICAgbGVuZ3RoID0gbGVuKHNlbGYpCiAgICAgICAgaWYgbGVuZ3RoID09IDA6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGhhbGZsZW4gPSAobGVuZ3RoKzEpID4+IDEKICAgICAgICBpZiBuID4gaGFsZmxlbiBvciBuIDwgLWhhbGZsZW46CiAgICAgICAgICAgIG4gJT0gbGVuZ3RoCiAgICAgICAgICAgIGlmIG4gPiBoYWxmbGVuOgogICAgICAgICAgICAgICAgbiAtPSBsZW5ndGgKICAgICAgICAgICAgZWxpZiBuIDwgLWhhbGZsZW46CiAgICAgICAgICAgICAgICBuICs9IGxlbmd0aAogICAgICAgIHdoaWxlIG4gPiAwOgogICAgICAgICAgICBzZWxmLmFwcGVuZGxlZnQoc2VsZi5wb3AoKSkKICAgICAgICAgICAgbiAtPSAxCiAgICAgICAgd2hpbGUgbiA8IDA6CiAgICAgICAgICAgIHNlbGYuYXBwZW5kKHNlbGYucG9wbGVmdCgpKQogICAgICAgICAgICBuICs9IDEKCiAgICBkZWYgcmV2ZXJzZShzZWxmKToKICAgICAgICAicmV2ZXJzZSAqSU4gUExBQ0UqIgogICAgICAgIGxlZnRibG9jayA9IHNlbGYubGVmdAogICAgICAgIHJpZ2h0YmxvY2sgPSBzZWxmLnJpZ2h0CiAgICAgICAgbGVmdGluZGV4ID0gc2VsZi5sZWZ0bmR4CiAgICAgICAgcmlnaHRpbmRleCA9IHNlbGYucmlnaHRuZHgKICAgICAgICBmb3IgaSBpbiByYW5nZShzZWxmLmxlbmd0aCAvLyAyKToKICAgICAgICAgICAgIyBWYWxpZGF0ZSB0aGF0IHBvaW50ZXJzIGhhdmVuJ3QgbWV0IGluIHRoZSBtaWRkbGUKICAgICAgICAgICAgYXNzZXJ0IGxlZnRibG9jayAhPSByaWdodGJsb2NrIG9yIGxlZnRpbmRleCA8IHJpZ2h0aW5kZXgKCiAgICAgICAgICAgICMgU3dhcAogICAgICAgICAgICAocmlnaHRibG9ja1tyaWdodGluZGV4XSwgbGVmdGJsb2NrW2xlZnRpbmRleF0pID0gKAogICAgICAgICAgICAgICAgbGVmdGJsb2NrW2xlZnRpbmRleF0sIHJpZ2h0YmxvY2tbcmlnaHRpbmRleF0pCgogICAgICAgICAgICAjIEFkdmFuY2UgbGVmdCBibG9jay9pbmRleCBwYWlyCiAgICAgICAgICAgIGxlZnRpbmRleCArPSAxCiAgICAgICAgICAgIGlmIGxlZnRpbmRleCA9PSBuOgogICAgICAgICAgICAgICAgbGVmdGJsb2NrID0gbGVmdGJsb2NrW1JHVExOS10KICAgICAgICAgICAgICAgIGFzc2VydCBsZWZ0YmxvY2sgaXMgbm90IE5vbmUKICAgICAgICAgICAgICAgIGxlZnRpbmRleCA9IDAKCiAgICAgICAgICAgICMgU3RlcCBiYWNrd2FyZHMgd2l0aCB0aGUgcmlnaHQgYmxvY2svaW5kZXggcGFpcgogICAgICAgICAgICByaWdodGluZGV4IC09IDEKICAgICAgICAgICAgaWYgcmlnaHRpbmRleCA9PSAtMToKICAgICAgICAgICAgICAgIHJpZ2h0YmxvY2sgPSByaWdodGJsb2NrW0xGVExOS10KICAgICAgICAgICAgICAgIGFzc2VydCByaWdodGJsb2NrIGlzIG5vdCBOb25lCiAgICAgICAgICAgICAgICByaWdodGluZGV4ID0gbiAtIDEKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgdGhyZWFkbG9jYWxhdHRyID0gJ19fcmVwcicgKyBzdHIoX3RocmVhZF9pZGVudCgpKQogICAgICAgIGlmIHRocmVhZGxvY2FsYXR0ciBpbiBzZWxmLl9fZGljdF9fOgogICAgICAgICAgICByZXR1cm4gJ2RlcXVlKFsuLi5dKScKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9fZGljdF9fW3RocmVhZGxvY2FsYXR0cl0gPSBUcnVlCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlmIHNlbGYubWF4bGVuIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnZGVxdWUoJXIsIG1heGxlbj0lcyknICUgKGxpc3Qoc2VsZiksIHNlbGYubWF4bGVuKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2RlcXVlKCVyKScgJSAobGlzdChzZWxmKSwpCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBkZWwgc2VsZi5fX2RpY3RfX1t0aHJlYWRsb2NhbGF0dHJdCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBkZXF1ZV9pdGVyYXRvcihzZWxmLCBzZWxmLl9pdGVyX2ltcGwpCgogICAgZGVmIF9pdGVyX2ltcGwoc2VsZiwgb3JpZ2luYWxfc3RhdGUsIGdpdmV1cCk6CiAgICAgICAgaWYgc2VsZi5zdGF0ZSAhPSBvcmlnaW5hbF9zdGF0ZToKICAgICAgICAgICAgZ2l2ZXVwKCkKICAgICAgICBibG9jayA9IHNlbGYubGVmdAogICAgICAgIHdoaWxlIGJsb2NrOgogICAgICAgICAgICBsLCByID0gMCwgbgogICAgICAgICAgICBpZiBibG9jayBpcyBzZWxmLmxlZnQ6CiAgICAgICAgICAgICAgICBsID0gc2VsZi5sZWZ0bmR4CiAgICAgICAgICAgIGlmIGJsb2NrIGlzIHNlbGYucmlnaHQ6CiAgICAgICAgICAgICAgICByID0gc2VsZi5yaWdodG5keCArIDEKICAgICAgICAgICAgZm9yIGVsZW0gaW4gYmxvY2tbbDpyXToKICAgICAgICAgICAgICAgIHlpZWxkIGVsZW0KICAgICAgICAgICAgICAgIGlmIHNlbGYuc3RhdGUgIT0gb3JpZ2luYWxfc3RhdGU6CiAgICAgICAgICAgICAgICAgICAgZ2l2ZXVwKCkKICAgICAgICAgICAgYmxvY2sgPSBibG9ja1tSR1RMTktdCgogICAgZGVmIF9fcmV2ZXJzZWRfXyhzZWxmKToKICAgICAgICByZXR1cm4gZGVxdWVfaXRlcmF0b3Ioc2VsZiwgc2VsZi5fcmV2ZXJzZWRfaW1wbCkKCiAgICBkZWYgX3JldmVyc2VkX2ltcGwoc2VsZiwgb3JpZ2luYWxfc3RhdGUsIGdpdmV1cCk6CiAgICAgICAgaWYgc2VsZi5zdGF0ZSAhPSBvcmlnaW5hbF9zdGF0ZToKICAgICAgICAgICAgZ2l2ZXVwKCkKICAgICAgICBibG9jayA9IHNlbGYucmlnaHQKICAgICAgICB3aGlsZSBibG9jazoKICAgICAgICAgICAgbCwgciA9IDAsIG4KICAgICAgICAgICAgaWYgYmxvY2sgaXMgc2VsZi5sZWZ0OgogICAgICAgICAgICAgICAgbCA9IHNlbGYubGVmdG5keAogICAgICAgICAgICBpZiBibG9jayBpcyBzZWxmLnJpZ2h0OgogICAgICAgICAgICAgICAgciA9IHNlbGYucmlnaHRuZHggKyAxCiAgICAgICAgICAgIGZvciBlbGVtIGluIHJldmVyc2VkKGJsb2NrW2w6cl0pOgogICAgICAgICAgICAgICAgeWllbGQgZWxlbQogICAgICAgICAgICAgICAgaWYgc2VsZi5zdGF0ZSAhPSBvcmlnaW5hbF9zdGF0ZToKICAgICAgICAgICAgICAgICAgICBnaXZldXAoKQogICAgICAgICAgICBibG9jayA9IGJsb2NrW0xGVExOS10KCiAgICBkZWYgX19sZW5fXyhzZWxmKToKICAgICAgICAjc3VtID0gMAogICAgICAgICNibG9jayA9IHNlbGYubGVmdAogICAgICAgICN3aGlsZSBibG9jazoKICAgICAgICAjICAgIHN1bSArPSBuCiAgICAgICAgIyAgICBibG9jayA9IGJsb2NrW1JHVExOS10KICAgICAgICAjcmV0dXJuIHN1bSArIHNlbGYucmlnaHRuZHggLSBzZWxmLmxlZnRuZHggKyAxIC0gbgogICAgICAgIHJldHVybiBzZWxmLmxlbmd0aAoKICAgIGRlZiBfX2dldHJlZihzZWxmLCBpbmRleCk6CiAgICAgICAgaWYgaW5kZXggPj0gMDoKICAgICAgICAgICAgYmxvY2sgPSBzZWxmLmxlZnQKICAgICAgICAgICAgd2hpbGUgYmxvY2s6CiAgICAgICAgICAgICAgICBsLCByID0gMCwgbgogICAgICAgICAgICAgICAgaWYgYmxvY2sgaXMgc2VsZi5sZWZ0OgogICAgICAgICAgICAgICAgICAgIGwgPSBzZWxmLmxlZnRuZHgKICAgICAgICAgICAgICAgIGlmIGJsb2NrIGlzIHNlbGYucmlnaHQ6CiAgICAgICAgICAgICAgICAgICAgciA9IHNlbGYucmlnaHRuZHggKyAxCiAgICAgICAgICAgICAgICBzcGFuID0gci1sCiAgICAgICAgICAgICAgICBpZiBpbmRleCA8IHNwYW46CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsb2NrLCBsK2luZGV4CiAgICAgICAgICAgICAgICBpbmRleCAtPSBzcGFuCiAgICAgICAgICAgICAgICBibG9jayA9IGJsb2NrW1JHVExOS10KICAgICAgICBlbHNlOgogICAgICAgICAgICBibG9jayA9IHNlbGYucmlnaHQKICAgICAgICAgICAgd2hpbGUgYmxvY2s6CiAgICAgICAgICAgICAgICBsLCByID0gMCwgbgogICAgICAgICAgICAgICAgaWYgYmxvY2sgaXMgc2VsZi5sZWZ0OgogICAgICAgICAgICAgICAgICAgIGwgPSBzZWxmLmxlZnRuZHgKICAgICAgICAgICAgICAgIGlmIGJsb2NrIGlzIHNlbGYucmlnaHQ6CiAgICAgICAgICAgICAgICAgICAgciA9IHNlbGYucmlnaHRuZHggKyAxCiAgICAgICAgICAgICAgICBuZWdhdGl2ZV9zcGFuID0gbC1yCiAgICAgICAgICAgICAgICBpZiBpbmRleCA+PSBuZWdhdGl2ZV9zcGFuOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBibG9jaywgcitpbmRleAogICAgICAgICAgICAgICAgaW5kZXggLT0gbmVnYXRpdmVfc3BhbgogICAgICAgICAgICAgICAgYmxvY2sgPSBibG9ja1tMRlRMTktdCiAgICAgICAgcmFpc2UgSW5kZXhFcnJvcigiZGVxdWUgaW5kZXggb3V0IG9mIHJhbmdlIikKCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaW5kZXgpOgogICAgICAgIGJsb2NrLCBpbmRleCA9IHNlbGYuX19nZXRyZWYoaW5kZXgpCiAgICAgICAgcmV0dXJuIGJsb2NrW2luZGV4XQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBpbmRleCwgdmFsdWUpOgogICAgICAgIGJsb2NrLCBpbmRleCA9IHNlbGYuX19nZXRyZWYoaW5kZXgpCiAgICAgICAgYmxvY2tbaW5kZXhdID0gdmFsdWUKCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwgaW5kZXgpOgogICAgICAgIGxlbmd0aCA9IGxlbihzZWxmKQogICAgICAgIGlmIGluZGV4ID49IDA6CiAgICAgICAgICAgIGlmIGluZGV4ID49IGxlbmd0aDoKICAgICAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoImRlcXVlIGluZGV4IG91dCBvZiByYW5nZSIpCiAgICAgICAgICAgIHNlbGYucm90YXRlKC1pbmRleCkKICAgICAgICAgICAgc2VsZi5wb3BsZWZ0KCkKICAgICAgICAgICAgc2VsZi5yb3RhdGUoaW5kZXgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgI2luZGV4ID0gfmluZGV4ICAgICAgI3RvZG8gdW50aWwgYml0IHdpc2Ugb3BlcmF0b3JzIGFyZSBpbiBieXRob24KICAgICAgICAgICAgaW5kZXg9IGluZGV4XigyKiozMSkKICAgICAgICAgICAgaWYgaW5kZXggPj0gbGVuZ3RoOgogICAgICAgICAgICAgICAgcmFpc2UgSW5kZXhFcnJvcigiZGVxdWUgaW5kZXggb3V0IG9mIHJhbmdlIikKICAgICAgICAgICAgc2VsZi5yb3RhdGUoaW5kZXgpCiAgICAgICAgICAgIHNlbGYucG9wKCkKICAgICAgICAgICAgc2VsZi5yb3RhdGUoLWluZGV4KQoKICAgIGRlZiBfX3JlZHVjZV9leF9fKHNlbGYsIHByb3RvKToKICAgICAgICByZXR1cm4gdHlwZShzZWxmKSwgKGxpc3Qoc2VsZiksIHNlbGYubWF4bGVuKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICAjcmFpc2UgVHlwZUVycm9yLCAiZGVxdWUgb2JqZWN0cyBhcmUgdW5oYXNoYWJsZSIKICAgICAgICByYWlzZSBUeXBlRXJyb3IoImRlcXVlIG9iamVjdHMgYXJlIHVuaGFzaGFibGUiKQoKICAgIGRlZiBfX2NvcHlfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18oc2VsZiwgc2VsZi5tYXhsZW4pCgogICAgIyBYWFggbWFrZSBjb21wYXJpc29uIG1vcmUgZWZmaWNpZW50CiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkZXF1ZSk6CiAgICAgICAgICAgIHJldHVybiBsaXN0KHNlbGYpID09IGxpc3Qob3RoZXIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgZGVxdWUpOgogICAgICAgICAgICByZXR1cm4gbGlzdChzZWxmKSAhPSBsaXN0KG90aGVyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRlcXVlKToKICAgICAgICAgICAgcmV0dXJuIGxpc3Qoc2VsZikgPCBsaXN0KG90aGVyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX2xlX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRlcXVlKToKICAgICAgICAgICAgcmV0dXJuIGxpc3Qoc2VsZikgPD0gbGlzdChvdGhlcikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19ndF9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkZXF1ZSk6CiAgICAgICAgICAgIHJldHVybiBsaXN0KHNlbGYpID4gbGlzdChvdGhlcikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkZXF1ZSk6CiAgICAgICAgICAgIHJldHVybiBsaXN0KHNlbGYpID49IGxpc3Qob3RoZXIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9faWFkZF9fKHNlbGYsIG90aGVyKToKICAgICAgICBzZWxmLmV4dGVuZChvdGhlcikKICAgICAgICByZXR1cm4gc2VsZgoKCmNsYXNzIGRlcXVlX2l0ZXJhdG9yKG9iamVjdCk6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRlcSwgaXRlcmdlbik6CiAgICAgICAgc2VsZi5jb3VudGVyID0gbGVuKGRlcSkKICAgICAgICBkZWYgZ2l2ZXVwKCk6CiAgICAgICAgICAgIHNlbGYuY291bnRlciA9IDAKICAgICAgICAgICAgI3JhaXNlIFJ1bnRpbWVFcnJvciwgImRlcXVlIG11dGF0ZWQgZHVyaW5nIGl0ZXJhdGlvbiIKICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJkZXF1ZSBtdXRhdGVkIGR1cmluZyBpdGVyYXRpb24iKQogICAgICAgIHNlbGYuX2dlbiA9IGl0ZXJnZW4oZGVxLnN0YXRlLCBnaXZldXApCgogICAgZGVmIG5leHQoc2VsZik6CiAgICAgICAgcmVzID0gIHNlbGYuX2dlbi5uZXh0KCkKICAgICAgICBzZWxmLmNvdW50ZXIgLT0gMQogICAgICAgIHJldHVybiByZXMKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCmNsYXNzIGRlZmF1bHRkaWN0KGRpY3QpOgogICAgCiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgaWYgbGVuKGFyZ3MpID4gMDoKICAgICAgICAgICAgZGVmYXVsdF9mYWN0b3J5ID0gYXJnc1swXQogICAgICAgICAgICBhcmdzID0gYXJnc1sxOl0KICAgICAgICAgICAgaWYgbm90IGNhbGxhYmxlKGRlZmF1bHRfZmFjdG9yeSkgYW5kIGRlZmF1bHRfZmFjdG9yeSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBjYWxsYWJsZSIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGVmYXVsdF9mYWN0b3J5ID0gTm9uZQogICAgICAgIGRpY3QuX19pbml0X18oc2VsZiwgYXJncywga3dkcykKICAgICAgICBzZWxmLmRlZmF1bHRfZmFjdG9yeSA9IGRlZmF1bHRfZmFjdG9yeQogICAgICAgIHNlbGYudXBkYXRlKGFyZ3MsIGt3ZHMpCiAgICAgICAgI3N1cGVyKGRlZmF1bHRkaWN0LCBzZWxmKS5fX2luaXRfXygqYXJncywgKiprd2RzKQoKICAgICNmaXhtZS4uICBoYWQgdG8gYWRkIHRoaXMgZnVuY3Rpb24gdG8gZ2V0IGRlZmF1bHRkaWN0IHdvcmtpbmcgd2l0aCBicnl0aG9uIGNvcnJlY3RseQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6CiAgICAgICAgaWYgc2VsZi5fX2NvbnRhaW5zX18oa2V5KTogIAogICAgICAgICAgIHJldHVybiBkaWN0Ll9fZ2V0aXRlbV9fKHNlbGYsa2V5KQogICAgCiAgICAgICAgcmV0dXJuIHNlbGYuX19taXNzaW5nX18oa2V5KQoKICAgIGRlZiBfX21pc3NpbmdfXyhzZWxmLCBrZXkpOgogICAgICAgICMgZnJvbSBkZWZhdWx0ZGljdCBkb2NzCiAgICAgICAgaWYgc2VsZi5kZWZhdWx0X2ZhY3RvcnkgaXMgTm9uZTogCiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSkKICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZSA9IHNlbGYuZGVmYXVsdF9mYWN0b3J5KCkKICAgICAgICByZXR1cm4gdmFsdWUKCiAgICBkZWYgX19yZXByX18oc2VsZiwgcmVjdXJzZT1zZXQoKSk6CiAgICAgICAgaWYgaWQoc2VsZikgaW4gcmVjdXJzZToKICAgICAgICAgICAgcmV0dXJuICJkZWZhdWx0ZGljdCguLi4pIgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVjdXJzZS5hZGQoaWQoc2VsZikpCiAgICAgICAgICAgIHJldHVybiAiZGVmYXVsdGRpY3QoJXMsICVzKSIgJSAocmVwcihzZWxmLmRlZmF1bHRfZmFjdG9yeSksIHN1cGVyKGRlZmF1bHRkaWN0LCBzZWxmKS5fX3JlcHJfXygpKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHJlY3Vyc2UucmVtb3ZlKGlkKHNlbGYpKQoKICAgIGRlZiBjb3B5KHNlbGYpOgogICAgICAgIHJldHVybiB0eXBlKHNlbGYpKHNlbGYuZGVmYXVsdF9mYWN0b3J5LCBzZWxmKQogICAgCiAgICBkZWYgX19jb3B5X18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuY29weSgpCgogICAgZGVmIF9fcmVkdWNlX18oc2VsZik6CiAgICAgICAgIwogICAgICAgICNfX3JlZHVjZV9fIG11c3QgcmV0dXJuIGEgNS10dXBsZSBhcyBmb2xsb3dzOgogICAgICAgICMKICAgICAgICAjICAgLSBmYWN0b3J5IGZ1bmN0aW9uCiAgICAgICAgIyAgIC0gdHVwbGUgb2YgYXJncyBmb3IgdGhlIGZhY3RvcnkgZnVuY3Rpb24KICAgICAgICAjICAgLSBhZGRpdGlvbmFsIHN0YXRlIChoZXJlIE5vbmUpCiAgICAgICAgIyAgIC0gc2VxdWVuY2UgaXRlcmF0b3IgKGhlcmUgTm9uZSkKICAgICAgICAjICAgLSBkaWN0aW9uYXJ5IGl0ZXJhdG9yICh5aWVsZGluZyBzdWNjZXNzaXZlIChrZXksIHZhbHVlKSBwYWlycwoKICAgICAgICAjICAgVGhpcyBBUEkgaXMgdXNlZCBieSBwaWNrbGUucHkgYW5kIGNvcHkucHkuCiAgICAgICAgIwogICAgICAgIHJldHVybiAodHlwZShzZWxmKSwgKHNlbGYuZGVmYXVsdF9mYWN0b3J5LCksIE5vbmUsIE5vbmUsIHNlbGYuaXRlcml0ZW1zKCkpCgpmcm9tIG9wZXJhdG9yIGltcG9ydCBpdGVtZ2V0dGVyIGFzIF9pdGVtZ2V0dGVyCmZyb20ga2V5d29yZCBpbXBvcnQgaXNrZXl3b3JkIGFzIF9pc2tleXdvcmQKaW1wb3J0IHN5cyBhcyBfc3lzCgpkZWYgbmFtZWR0dXBsZSh0eXBlbmFtZSwgZmllbGRfbmFtZXMsIHZlcmJvc2U9RmFsc2UsIHJlbmFtZT1GYWxzZSk6CiAgICAiIiJSZXR1cm5zIGEgbmV3IHN1YmNsYXNzIG9mIHR1cGxlIHdpdGggbmFtZWQgZmllbGRzLgoKICAgID4+PiBQb2ludCA9IG5hbWVkdHVwbGUoJ1BvaW50JywgJ3ggeScpCiAgICA+Pj4gUG9pbnQuX19kb2NfXyAgICAgICAgICAgICAgICAgICAjIGRvY3N0cmluZyBmb3IgdGhlIG5ldyBjbGFzcwogICAgJ1BvaW50KHgsIHkpJwogICAgPj4+IHAgPSBQb2ludCgxMSwgeT0yMikgICAgICAgICAgICAgIyBpbnN0YW50aWF0ZSB3aXRoIHBvc2l0aW9uYWwgYXJncyBvciBrZXl3b3JkcwogICAgPj4+IHBbMF0gKyBwWzFdICAgICAgICAgICAgICAgICAgICAgIyBpbmRleGFibGUgbGlrZSBhIHBsYWluIHR1cGxlCiAgICAzMwogICAgPj4+IHgsIHkgPSBwICAgICAgICAgICAgICAgICAgICAgICAgIyB1bnBhY2sgbGlrZSBhIHJlZ3VsYXIgdHVwbGUKICAgID4+PiB4LCB5CiAgICAoMTEsIDIyKQogICAgPj4+IHAueCArIHAueSAgICAgICAgICAgICAgICAgICAgICAgIyBmaWVsZHMgYWxzbyBhY2Nlc3NhYmxlIGJ5IG5hbWUKICAgIDMzCiAgICA+Pj4gZCA9IHAuX2FzZGljdCgpICAgICAgICAgICAgICAgICAjIGNvbnZlcnQgdG8gYSBkaWN0aW9uYXJ5CiAgICA+Pj4gZFsneCddCiAgICAxMQogICAgPj4+IFBvaW50KCoqZCkgICAgICAgICAgICAgICAgICAgICAgIyBjb252ZXJ0IGZyb20gYSBkaWN0aW9uYXJ5CiAgICBQb2ludCh4PTExLCB5PTIyKQogICAgPj4+IHAuX3JlcGxhY2UoeD0xMDApICAgICAgICAgICAgICAgIyBfcmVwbGFjZSgpIGlzIGxpa2Ugc3RyLnJlcGxhY2UoKSBidXQgdGFyZ2V0cyBuYW1lZCBmaWVsZHMKICAgIFBvaW50KHg9MTAwLCB5PTIyKQoKICAgICIiIgoKICAgICMgUGFyc2UgYW5kIHZhbGlkYXRlIHRoZSBmaWVsZCBuYW1lcy4gIFZhbGlkYXRpb24gc2VydmVzIHR3byBwdXJwb3NlcywKICAgICMgZ2VuZXJhdGluZyBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlcyBhbmQgcHJldmVudGluZyB0ZW1wbGF0ZSBpbmplY3Rpb24gYXR0YWNrcy4KICAgIGlmIGlzaW5zdGFuY2UoZmllbGRfbmFtZXMsIHN0cik6CiAgICAgICAgZmllbGRfbmFtZXMgPSBmaWVsZF9uYW1lcy5yZXBsYWNlKCcsJywgJyAnKS5zcGxpdCgpICMgbmFtZXMgc2VwYXJhdGVkIGJ5IHdoaXRlc3BhY2UgYW5kL29yIGNvbW1hcwogICAgZmllbGRfbmFtZXMgPSB0dXBsZShtYXAoc3RyLCBmaWVsZF9uYW1lcykpCiAgICBpZiByZW5hbWU6CiAgICAgICAgbmFtZXMgPSBsaXN0KGZpZWxkX25hbWVzKQogICAgICAgIHNlZW4gPSBzZXQoKQogICAgICAgIGZvciBpLCBuYW1lIGluIGVudW1lcmF0ZShuYW1lcyk6CiAgICAgICAgICAgIGlmIChub3QgbWluKGMuaXNhbG51bSgpIG9yIGM9PSdfJyBmb3IgYyBpbiBuYW1lKSBvciBfaXNrZXl3b3JkKG5hbWUpCiAgICAgICAgICAgICAgICBvciBub3QgbmFtZSBvciBuYW1lWzBdLmlzZGlnaXQoKSBvciBuYW1lLnN0YXJ0c3dpdGgoJ18nKQogICAgICAgICAgICAgICAgb3IgbmFtZSBpbiBzZWVuKToKICAgICAgICAgICAgICAgICAgICBuYW1lc1tpXSA9ICdfJWQnICUgaQogICAgICAgICAgICBzZWVuLmFkZChuYW1lKQogICAgICAgIGZpZWxkX25hbWVzID0gdHVwbGUobmFtZXMpCiAgICBmb3IgbmFtZSBpbiAodHlwZW5hbWUsKSArIGZpZWxkX25hbWVzOgogICAgICAgIGlmIG5vdCBtaW4oYy5pc2FsbnVtKCkgb3IgYz09J18nIGZvciBjIGluIG5hbWUpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdUeXBlIG5hbWVzIGFuZCBmaWVsZCBuYW1lcyBjYW4gb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIGFuZCB1bmRlcnNjb3JlczogJXInICUgbmFtZSkKICAgICAgICBpZiBfaXNrZXl3b3JkKG5hbWUpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdUeXBlIG5hbWVzIGFuZCBmaWVsZCBuYW1lcyBjYW5ub3QgYmUgYSBrZXl3b3JkOiAlcicgJSBuYW1lKQogICAgICAgIGlmIG5hbWVbMF0uaXNkaWdpdCgpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdUeXBlIG5hbWVzIGFuZCBmaWVsZCBuYW1lcyBjYW5ub3Qgc3RhcnQgd2l0aCBhIG51bWJlcjogJXInICUgbmFtZSkKICAgIHNlZW5fbmFtZXMgPSBzZXQoKQogICAgZm9yIG5hbWUgaW4gZmllbGRfbmFtZXM6CiAgICAgICAgaWYgbmFtZS5zdGFydHN3aXRoKCdfJykgYW5kIG5vdCByZW5hbWU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ0ZpZWxkIG5hbWVzIGNhbm5vdCBzdGFydCB3aXRoIGFuIHVuZGVyc2NvcmU6ICVyJyAlIG5hbWUpCiAgICAgICAgaWYgbmFtZSBpbiBzZWVuX25hbWVzOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdFbmNvdW50ZXJlZCBkdXBsaWNhdGUgZmllbGQgbmFtZTogJXInICUgbmFtZSkKICAgICAgICBzZWVuX25hbWVzLmFkZChuYW1lKQoKICAgICMgQ3JlYXRlIGFuZCBmaWxsLWluIHRoZSBjbGFzcyB0ZW1wbGF0ZQogICAgbnVtZmllbGRzID0gbGVuKGZpZWxkX25hbWVzKQogICAgYXJndHh0ID0gcmVwcihmaWVsZF9uYW1lcykucmVwbGFjZSgiJyIsICIiKVsxOi0xXSAgICMgdHVwbGUgcmVwciB3aXRob3V0IHBhcmVucyBvciBxdW90ZXMKICAgIHJlcHJ0eHQgPSAnLCAnLmpvaW4oJyVzPSUlcicgJSBuYW1lIGZvciBuYW1lIGluIGZpZWxkX25hbWVzKQogICAgdGVtcGxhdGUgPSAnJydjbGFzcyAlKHR5cGVuYW1lKXModHVwbGUpOgogICAgICAgICclKHR5cGVuYW1lKXMoJShhcmd0eHQpcyknIFxuCiAgICAgICAgX19zbG90c19fID0gKCkgXG4KICAgICAgICBfZmllbGRzID0gJShmaWVsZF9uYW1lcylyIFxuCiAgICAgICAgZGVmIF9fbmV3X18oX2NscywgJShhcmd0eHQpcyk6CiAgICAgICAgICAgIHJldHVybiBfdHVwbGUuX19uZXdfXyhfY2xzLCAoJShhcmd0eHQpcykpIFxuCiAgICAgICAgQGNsYXNzbWV0aG9kCiAgICAgICAgZGVmIF9tYWtlKGNscywgaXRlcmFibGUsIG5ldz10dXBsZS5fX25ld19fLCBsZW49bGVuKToKICAgICAgICAgICAgJ01ha2UgYSBuZXcgJSh0eXBlbmFtZSlzIG9iamVjdCBmcm9tIGEgc2VxdWVuY2Ugb3IgaXRlcmFibGUnCiAgICAgICAgICAgIHJlc3VsdCA9IG5ldyhjbHMsIGl0ZXJhYmxlKQogICAgICAgICAgICBpZiBsZW4ocmVzdWx0KSAhPSAlKG51bWZpZWxkcylkOgogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdFeHBlY3RlZCAlKG51bWZpZWxkcylkIGFyZ3VtZW50cywgZ290ICUlZCcgJSUgbGVuKHJlc3VsdCkpCiAgICAgICAgICAgIHJldHVybiByZXN1bHQgXG4KICAgICAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgICAgIHJldHVybiAnJSh0eXBlbmFtZSlzKCUocmVwcnR4dClzKScgJSUgc2VsZiBcbgogICAgICAgIGRlZiBfYXNkaWN0KHNlbGYpOgogICAgICAgICAgICAnUmV0dXJuIGEgbmV3IGRpY3Qgd2hpY2ggbWFwcyBmaWVsZCBuYW1lcyB0byB0aGVpciB2YWx1ZXMnCiAgICAgICAgICAgIHJldHVybiBkaWN0KHppcChzZWxmLl9maWVsZHMsIHNlbGYpKSBcbgogICAgICAgIGRlZiBfcmVwbGFjZShfc2VsZiwgKiprd2RzKToKICAgICAgICAgICAgJ1JldHVybiBhIG5ldyAlKHR5cGVuYW1lKXMgb2JqZWN0IHJlcGxhY2luZyBzcGVjaWZpZWQgZmllbGRzIHdpdGggbmV3IHZhbHVlcycKICAgICAgICAgICAgcmVzdWx0ID0gX3NlbGYuX21ha2UobWFwKGt3ZHMucG9wLCAlKGZpZWxkX25hbWVzKXIsIF9zZWxmKSkKICAgICAgICAgICAgaWYga3dkczoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ0dvdCB1bmV4cGVjdGVkIGZpZWxkIG5hbWVzOiAlJXInICUlIGt3ZHMua2V5cygpKQogICAgICAgICAgICByZXR1cm4gcmVzdWx0IFxuCiAgICAgICAgZGVmIF9fZ2V0bmV3YXJnc19fKHNlbGYpOgogICAgICAgICAgICByZXR1cm4gdHVwbGUoc2VsZikgXG5cbicnJyAlIGxvY2FscygpCiAgICBmb3IgaSwgbmFtZSBpbiBlbnVtZXJhdGUoZmllbGRfbmFtZXMpOgogICAgICAgIHRlbXBsYXRlICs9ICcgICAgICAgICVzID0gX3Byb3BlcnR5KF9pdGVtZ2V0dGVyKCVkKSlcbicgJSAobmFtZSwgaSkKICAgIAogICAgaWYgdmVyYm9zZToKICAgICAgICBwcmludCh0ZW1wbGF0ZSkKCiAgICAjIEV4ZWN1dGUgdGhlIHRlbXBsYXRlIHN0cmluZyBpbiBhIHRlbXBvcmFyeSBuYW1lc3BhY2UKICAgIG5hbWVzcGFjZSA9IGRpY3QoX2l0ZW1nZXR0ZXI9X2l0ZW1nZXR0ZXIsIF9fbmFtZV9fPSduYW1lZHR1cGxlXyVzJyAlIHR5cGVuYW1lLAogICAgICAgICAgICAgICAgICAgICBfcHJvcGVydHk9cHJvcGVydHksIF90dXBsZT10dXBsZSkKICAgIHRyeToKICAgICAgICBleGVjKHRlbXBsYXRlLG5hbWVzcGFjZSkKICAgIGV4Y2VwdCBTeW50YXhFcnJvciBhcyBlOgogICAgICAgIHJhaXNlIFN5bnRheEVycm9yKGUubWVzc2FnZSArICc6XG4nICsgdGVtcGxhdGUpCiAgICByZXN1bHQgPSBuYW1lc3BhY2VbdHlwZW5hbWVdCgogICAgIyBGb3IgcGlja2xpbmcgdG8gd29yaywgdGhlIF9fbW9kdWxlX18gdmFyaWFibGUgbmVlZHMgdG8gYmUgc2V0IHRvIHRoZSBmcmFtZQogICAgIyB3aGVyZSB0aGUgbmFtZWQgdHVwbGUgaXMgY3JlYXRlZC4gIEJ5cGFzcyB0aGlzIHN0ZXAgaW4gZW52aXJvbWVudHMgd2hlcmUKICAgICMgc3lzLl9nZXRmcmFtZSBpcyBub3QgZGVmaW5lZCAoSnl0aG9uIGZvciBleGFtcGxlKSBvciBzeXMuX2dldGZyYW1lIGlzIG5vdAogICAgIyBkZWZpbmVkIGZvciBhcmd1bWVudHMgZ3JlYXRlciB0aGFuIDAgKElyb25QeXRob24pLgogICAgdHJ5OgogICAgICAgIHJlc3VsdC5fX21vZHVsZV9fID0gX3N5cy5fZ2V0ZnJhbWUoMSkuZl9nbG9iYWxzLmdldCgnX19uYW1lX18nLCAnX19tYWluX18nKQogICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvciwgVmFsdWVFcnJvcik6CiAgICAgICAgcGFzcwoKICAgIHJldHVybiByZXN1bHQKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBQb2ludCA9IG5hbWVkdHVwbGUoJ1BvaW50JywgWyd4JywgJ3knXSkKICAgIHAgPSBQb2ludCgxMSwgeT0yMikKICAgIHByaW50KHBbMF0rcFsxXSkKICAgIHgseT1wCiAgICBwcmludCh4LHkpCiAgICBwcmludChwLngrcC55KQogICAgcHJpbnQocCkK',
'/Lib/antigravity.py':'aW1wb3J0IHdlYmJyb3dzZXIKaW1wb3J0IGhhc2hsaWIKCndlYmJyb3dzZXIub3BlbigiaHR0cDovL3hrY2QuY29tLzM1My8iKQoKZGVmIGdlb2hhc2gobGF0aXR1ZGUsIGxvbmdpdHVkZSwgZGF0ZWRvdyk6CiAgICAnJydDb21wdXRlIGdlb2hhc2goKSB1c2luZyB0aGUgTXVucm9lIGFsZ29yaXRobS4KCiAgICA+Pj4gZ2VvaGFzaCgzNy40MjE1NDIsIC0xMjIuMDg1NTg5LCBiJzIwMDUtMDUtMjYtMTA0NTguNjgnKQogICAgMzcuODU3NzEzIC0xMjIuNTQ0NTQzCgogICAgJycnCiAgICAjIGh0dHA6Ly94a2NkLmNvbS80MjYvCiAgICBoID0gaGFzaGxpYi5tZDUoZGF0ZWRvdykuaGV4ZGlnZXN0KCkKICAgIHAsIHEgPSBbKCclZicgJSBmbG9hdC5mcm9taGV4KCcwLicgKyB4KSkgZm9yIHggaW4gKGhbOjE2XSwgaFsxNjozMl0pXQogICAgcHJpbnQoJyVkJXMgJWQlcycgJSAobGF0aXR1ZGUsIHBbMTpdLCBsb25naXR1ZGUsIHFbMTpdKSkK',
'/Lib/optparse.py':'IiIiQSBwb3dlcmZ1bCwgZXh0ZW5zaWJsZSwgYW5kIGVhc3ktdG8tdXNlIG9wdGlvbiBwYXJzZXIuCgpCeSBHcmVnIFdhcmQgPGd3YXJkQHB5dGhvbi5uZXQ+CgpPcmlnaW5hbGx5IGRpc3RyaWJ1dGVkIGFzIE9wdGlrLgoKRm9yIHN1cHBvcnQsIHVzZSB0aGUgb3B0aWstdXNlcnNAbGlzdHMuc291cmNlZm9yZ2UubmV0IG1haWxpbmcgbGlzdAooaHR0cDovL2xpc3RzLnNvdXJjZWZvcmdlLm5ldC9saXN0cy9saXN0aW5mby9vcHRpay11c2VycykuCgpTaW1wbGUgdXNhZ2UgZXhhbXBsZToKCiAgIGZyb20gb3B0cGFyc2UgaW1wb3J0IE9wdGlvblBhcnNlcgoKICAgcGFyc2VyID0gT3B0aW9uUGFyc2VyKCkKICAgcGFyc2VyLmFkZF9vcHRpb24oIi1mIiwgIi0tZmlsZSIsIGRlc3Q9ImZpbGVuYW1lIiwKICAgICAgICAgICAgICAgICAgICAgaGVscD0id3JpdGUgcmVwb3J0IHRvIEZJTEUiLCBtZXRhdmFyPSJGSUxFIikKICAgcGFyc2VyLmFkZF9vcHRpb24oIi1xIiwgIi0tcXVpZXQiLAogICAgICAgICAgICAgICAgICAgICBhY3Rpb249InN0b3JlX2ZhbHNlIiwgZGVzdD0idmVyYm9zZSIsIGRlZmF1bHQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgaGVscD0iZG9uJ3QgcHJpbnQgc3RhdHVzIG1lc3NhZ2VzIHRvIHN0ZG91dCIpCgogICAob3B0aW9ucywgYXJncykgPSBwYXJzZXIucGFyc2VfYXJncygpCiIiIgoKX192ZXJzaW9uX18gPSAiMS41LjMiCgpfX2FsbF9fID0gWydPcHRpb24nLAogICAgICAgICAgICdtYWtlX29wdGlvbicsCiAgICAgICAgICAgJ1NVUFBSRVNTX0hFTFAnLAogICAgICAgICAgICdTVVBQUkVTU19VU0FHRScsCiAgICAgICAgICAgJ1ZhbHVlcycsCiAgICAgICAgICAgJ09wdGlvbkNvbnRhaW5lcicsCiAgICAgICAgICAgJ09wdGlvbkdyb3VwJywKICAgICAgICAgICAnT3B0aW9uUGFyc2VyJywKICAgICAgICAgICAnSGVscEZvcm1hdHRlcicsCiAgICAgICAgICAgJ0luZGVudGVkSGVscEZvcm1hdHRlcicsCiAgICAgICAgICAgJ1RpdGxlZEhlbHBGb3JtYXR0ZXInLAogICAgICAgICAgICdPcHRQYXJzZUVycm9yJywKICAgICAgICAgICAnT3B0aW9uRXJyb3InLAogICAgICAgICAgICdPcHRpb25Db25mbGljdEVycm9yJywKICAgICAgICAgICAnT3B0aW9uVmFsdWVFcnJvcicsCiAgICAgICAgICAgJ0JhZE9wdGlvbkVycm9yJ10KCl9fY29weXJpZ2h0X18gPSAiIiIKQ29weXJpZ2h0IChjKSAyMDAxLTIwMDYgR3JlZ29yeSBQLiBXYXJkLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC4KQ29weXJpZ2h0IChjKSAyMDAyLTIwMDYgUHl0aG9uIFNvZnR3YXJlIEZvdW5kYXRpb24uICBBbGwgcmlnaHRzIHJlc2VydmVkLgoKUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0Cm1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUKbWV0OgoKICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0CiAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCgogICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQKICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCgogICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgYXV0aG9yIG5vciB0aGUgbmFtZXMgb2YgaXRzCiAgICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbQogICAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KClRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTCklTIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRApUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEKUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIE9SCkNPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLApFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sClBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUgpQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GCkxJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HCk5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUwpTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KIiIiCgppbXBvcnQgc3lzLCBvcwppbXBvcnQgdGV4dHdyYXAKCmRlZiBfcmVwcihzZWxmKToKICAgIHJldHVybiAiPCVzIGF0IDB4JXg6ICVzPiIgJSAoc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIGlkKHNlbGYpLCBzZWxmKQoKCiMgVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgZnJvbToKIyAgIElkOiBvcHRpb25fcGFyc2VyLnB5IDUyNyAyMDA2LTA3LTIzIDE1OjIxOjMwWiBncmVnCiMgICBJZDogb3B0aW9uLnB5IDUyMiAyMDA2LTA2LTExIDE2OjIyOjAzWiBnd2FyZAojICAgSWQ6IGhlbHAucHkgNTI3IDIwMDYtMDctMjMgMTU6MjE6MzBaIGdyZWcKIyAgIElkOiBlcnJvcnMucHkgNTA5IDIwMDYtMDQtMjAgMDA6NTg6MjRaIGd3YXJkCgp0cnk6CiAgICBmcm9tIGdldHRleHQgaW1wb3J0IGdldHRleHQsIG5nZXR0ZXh0CmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGRlZiBnZXR0ZXh0KG1lc3NhZ2UpOgogICAgICAgIHJldHVybiBtZXNzYWdlCgogICAgZGVmIG5nZXR0ZXh0KHNpbmd1bGFyLCBwbHVyYWwsIG4pOgogICAgICAgIGlmIG4gPT0gMToKICAgICAgICAgICAgcmV0dXJuIHNpbmd1bGFyCiAgICAgICAgcmV0dXJuIHBsdXJhbAoKXyA9IGdldHRleHQKCgpjbGFzcyBPcHRQYXJzZUVycm9yIChFeGNlcHRpb24pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1zZyk6CiAgICAgICAgc2VsZi5tc2cgPSBtc2cKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5tc2cKCgpjbGFzcyBPcHRpb25FcnJvciAoT3B0UGFyc2VFcnJvcik6CiAgICAiIiIKICAgIFJhaXNlZCBpZiBhbiBPcHRpb24gaW5zdGFuY2UgaXMgY3JlYXRlZCB3aXRoIGludmFsaWQgb3IKICAgIGluY29uc2lzdGVudCBhcmd1bWVudHMuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbXNnLCBvcHRpb24pOgogICAgICAgIHNlbGYubXNnID0gbXNnCiAgICAgICAgc2VsZi5vcHRpb25faWQgPSBzdHIob3B0aW9uKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYub3B0aW9uX2lkOgogICAgICAgICAgICByZXR1cm4gIm9wdGlvbiAlczogJXMiICUgKHNlbGYub3B0aW9uX2lkLCBzZWxmLm1zZykKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2VsZi5tc2cKCmNsYXNzIE9wdGlvbkNvbmZsaWN0RXJyb3IgKE9wdGlvbkVycm9yKToKICAgICIiIgogICAgUmFpc2VkIGlmIGNvbmZsaWN0aW5nIG9wdGlvbnMgYXJlIGFkZGVkIHRvIGFuIE9wdGlvblBhcnNlci4KICAgICIiIgoKY2xhc3MgT3B0aW9uVmFsdWVFcnJvciAoT3B0UGFyc2VFcnJvcik6CiAgICAiIiIKICAgIFJhaXNlZCBpZiBhbiBpbnZhbGlkIG9wdGlvbiB2YWx1ZSBpcyBlbmNvdW50ZXJlZCBvbiB0aGUgY29tbWFuZAogICAgbGluZS4KICAgICIiIgoKY2xhc3MgQmFkT3B0aW9uRXJyb3IgKE9wdFBhcnNlRXJyb3IpOgogICAgIiIiCiAgICBSYWlzZWQgaWYgYW4gaW52YWxpZCBvcHRpb24gaXMgc2VlbiBvbiB0aGUgY29tbWFuZCBsaW5lLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgb3B0X3N0cik6CiAgICAgICAgc2VsZi5vcHRfc3RyID0gb3B0X3N0cgoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiBfKCJubyBzdWNoIG9wdGlvbjogJXMiKSAlIHNlbGYub3B0X3N0cgoKY2xhc3MgQW1iaWd1b3VzT3B0aW9uRXJyb3IgKEJhZE9wdGlvbkVycm9yKToKICAgICIiIgogICAgUmFpc2VkIGlmIGFuIGFtYmlndW91cyBvcHRpb24gaXMgc2VlbiBvbiB0aGUgY29tbWFuZCBsaW5lLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgb3B0X3N0ciwgcG9zc2liaWxpdGllcyk6CiAgICAgICAgQmFkT3B0aW9uRXJyb3IuX19pbml0X18oc2VsZiwgb3B0X3N0cikKICAgICAgICBzZWxmLnBvc3NpYmlsaXRpZXMgPSBwb3NzaWJpbGl0aWVzCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIChfKCJhbWJpZ3VvdXMgb3B0aW9uOiAlcyAoJXM/KSIpCiAgICAgICAgICAgICAgICAlIChzZWxmLm9wdF9zdHIsICIsICIuam9pbihzZWxmLnBvc3NpYmlsaXRpZXMpKSkKCgpjbGFzcyBIZWxwRm9ybWF0dGVyOgoKICAgICIiIgogICAgQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgZm9ybWF0dGluZyBvcHRpb24gaGVscC4gIE9wdGlvblBhcnNlcgogICAgaW5zdGFuY2VzIHNob3VsZCB1c2Ugb25lIG9mIHRoZSBIZWxwRm9ybWF0dGVyIHN1YmNsYXNzZXMgZm9yCiAgICBmb3JtYXR0aW5nIGhlbHA7IGJ5IGRlZmF1bHQgSW5kZW50ZWRIZWxwRm9ybWF0dGVyIGlzIHVzZWQuCgogICAgSW5zdGFuY2UgYXR0cmlidXRlczoKICAgICAgcGFyc2VyIDogT3B0aW9uUGFyc2VyCiAgICAgICAgdGhlIGNvbnRyb2xsaW5nIE9wdGlvblBhcnNlciBpbnN0YW5jZQogICAgICBpbmRlbnRfaW5jcmVtZW50IDogaW50CiAgICAgICAgdGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIGluZGVudCBwZXIgbmVzdGluZyBsZXZlbAogICAgICBtYXhfaGVscF9wb3NpdGlvbiA6IGludAogICAgICAgIHRoZSBtYXhpbXVtIHN0YXJ0aW5nIGNvbHVtbiBmb3Igb3B0aW9uIGhlbHAgdGV4dAogICAgICBoZWxwX3Bvc2l0aW9uIDogaW50CiAgICAgICAgdGhlIGNhbGN1bGF0ZWQgc3RhcnRpbmcgY29sdW1uIGZvciBvcHRpb24gaGVscCB0ZXh0OwogICAgICAgIGluaXRpYWxseSB0aGUgc2FtZSBhcyB0aGUgbWF4aW11bQogICAgICB3aWR0aCA6IGludAogICAgICAgIHRvdGFsIG51bWJlciBvZiBjb2x1bW5zIGZvciBvdXRwdXQgKHBhc3MgTm9uZSB0byBjb25zdHJ1Y3RvciBmb3IKICAgICAgICB0aGlzIHZhbHVlIHRvIGJlIHRha2VuIGZyb20gdGhlICRDT0xVTU5TIGVudmlyb25tZW50IHZhcmlhYmxlKQogICAgICBsZXZlbCA6IGludAogICAgICAgIGN1cnJlbnQgaW5kZW50YXRpb24gbGV2ZWwKICAgICAgY3VycmVudF9pbmRlbnQgOiBpbnQKICAgICAgICBjdXJyZW50IGluZGVudGF0aW9uIGxldmVsIChpbiBjb2x1bW5zKQogICAgICBoZWxwX3dpZHRoIDogaW50CiAgICAgICAgbnVtYmVyIG9mIGNvbHVtbnMgYXZhaWxhYmxlIGZvciBvcHRpb24gaGVscCB0ZXh0IChjYWxjdWxhdGVkKQogICAgICBkZWZhdWx0X3RhZyA6IHN0cgogICAgICAgIHRleHQgdG8gcmVwbGFjZSB3aXRoIGVhY2ggb3B0aW9uJ3MgZGVmYXVsdCB2YWx1ZSwgIiVkZWZhdWx0IgogICAgICAgIGJ5IGRlZmF1bHQuICBTZXQgdG8gZmFsc2UgdmFsdWUgdG8gZGlzYWJsZSBkZWZhdWx0IHZhbHVlIGV4cGFuc2lvbi4KICAgICAgb3B0aW9uX3N0cmluZ3MgOiB7IE9wdGlvbiA6IHN0ciB9CiAgICAgICAgbWFwcyBPcHRpb24gaW5zdGFuY2VzIHRvIHRoZSBzbmlwcGV0IG9mIGhlbHAgdGV4dCBleHBsYWluaW5nCiAgICAgICAgdGhlIHN5bnRheCBvZiB0aGF0IG9wdGlvbiwgZS5nLiAiLWgsIC0taGVscCIgb3IKICAgICAgICAiLWZGSUxFLCAtLWZpbGU9RklMRSIKICAgICAgX3Nob3J0X29wdF9mbXQgOiBzdHIKICAgICAgICBmb3JtYXQgc3RyaW5nIGNvbnRyb2xsaW5nIGhvdyBzaG9ydCBvcHRpb25zIHdpdGggdmFsdWVzIGFyZQogICAgICAgIHByaW50ZWQgaW4gaGVscCB0ZXh0LiAgTXVzdCBiZSBlaXRoZXIgIiVzJXMiICgiLWZGSUxFIikgb3IKICAgICAgICAiJXMgJXMiICgiLWYgRklMRSIpLCBiZWNhdXNlIHRob3NlIGFyZSB0aGUgdHdvIHN5bnRheGVzIHRoYXQKICAgICAgICBPcHRpayBzdXBwb3J0cy4KICAgICAgX2xvbmdfb3B0X2ZtdCA6IHN0cgogICAgICAgIHNpbWlsYXIgYnV0IGZvciBsb25nIG9wdGlvbnM7IG11c3QgYmUgZWl0aGVyICIlcyAlcyIgKCItLWZpbGUgRklMRSIpCiAgICAgICAgb3IgIiVzPSVzIiAoIi0tZmlsZT1GSUxFIikuCiAgICAiIiIKCiAgICBOT19ERUZBVUxUX1ZBTFVFID0gIm5vbmUiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsCiAgICAgICAgICAgICAgICAgaW5kZW50X2luY3JlbWVudCwKICAgICAgICAgICAgICAgICBtYXhfaGVscF9wb3NpdGlvbiwKICAgICAgICAgICAgICAgICB3aWR0aCwKICAgICAgICAgICAgICAgICBzaG9ydF9maXJzdCk6CiAgICAgICAgc2VsZi5wYXJzZXIgPSBOb25lCiAgICAgICAgc2VsZi5pbmRlbnRfaW5jcmVtZW50ID0gaW5kZW50X2luY3JlbWVudAogICAgICAgIHNlbGYuaGVscF9wb3NpdGlvbiA9IHNlbGYubWF4X2hlbHBfcG9zaXRpb24gPSBtYXhfaGVscF9wb3NpdGlvbgogICAgICAgIGlmIHdpZHRoIGlzIE5vbmU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHdpZHRoID0gaW50KG9zLmVudmlyb25bJ0NPTFVNTlMnXSkKICAgICAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgVmFsdWVFcnJvcik6CiAgICAgICAgICAgICAgICB3aWR0aCA9IDgwCiAgICAgICAgICAgIHdpZHRoIC09IDIKICAgICAgICBzZWxmLndpZHRoID0gd2lkdGgKICAgICAgICBzZWxmLmN1cnJlbnRfaW5kZW50ID0gMAogICAgICAgIHNlbGYubGV2ZWwgPSAwCiAgICAgICAgc2VsZi5oZWxwX3dpZHRoID0gTm9uZSAgICAgICAgICAjIGNvbXB1dGVkIGxhdGVyCiAgICAgICAgc2VsZi5zaG9ydF9maXJzdCA9IHNob3J0X2ZpcnN0CiAgICAgICAgc2VsZi5kZWZhdWx0X3RhZyA9ICIlZGVmYXVsdCIKICAgICAgICBzZWxmLm9wdGlvbl9zdHJpbmdzID0ge30KICAgICAgICBzZWxmLl9zaG9ydF9vcHRfZm10ID0gIiVzICVzIgogICAgICAgIHNlbGYuX2xvbmdfb3B0X2ZtdCA9ICIlcz0lcyIKCiAgICBkZWYgc2V0X3BhcnNlcihzZWxmLCBwYXJzZXIpOgogICAgICAgIHNlbGYucGFyc2VyID0gcGFyc2VyCgogICAgZGVmIHNldF9zaG9ydF9vcHRfZGVsaW1pdGVyKHNlbGYsIGRlbGltKToKICAgICAgICBpZiBkZWxpbSBub3QgaW4gKCIiLCAiICIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgImludmFsaWQgbWV0YXZhciBkZWxpbWl0ZXIgZm9yIHNob3J0IG9wdGlvbnM6ICVyIiAlIGRlbGltKQogICAgICAgIHNlbGYuX3Nob3J0X29wdF9mbXQgPSAiJXMiICsgZGVsaW0gKyAiJXMiCgogICAgZGVmIHNldF9sb25nX29wdF9kZWxpbWl0ZXIoc2VsZiwgZGVsaW0pOgogICAgICAgIGlmIGRlbGltIG5vdCBpbiAoIj0iLCAiICIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgImludmFsaWQgbWV0YXZhciBkZWxpbWl0ZXIgZm9yIGxvbmcgb3B0aW9uczogJXIiICUgZGVsaW0pCiAgICAgICAgc2VsZi5fbG9uZ19vcHRfZm10ID0gIiVzIiArIGRlbGltICsgIiVzIgoKICAgIGRlZiBpbmRlbnQoc2VsZik6CiAgICAgICAgc2VsZi5jdXJyZW50X2luZGVudCArPSBzZWxmLmluZGVudF9pbmNyZW1lbnQKICAgICAgICBzZWxmLmxldmVsICs9IDEKCiAgICBkZWYgZGVkZW50KHNlbGYpOgogICAgICAgIHNlbGYuY3VycmVudF9pbmRlbnQgLT0gc2VsZi5pbmRlbnRfaW5jcmVtZW50CiAgICAgICAgYXNzZXJ0IHNlbGYuY3VycmVudF9pbmRlbnQgPj0gMCwgIkluZGVudCBkZWNyZWFzZWQgYmVsb3cgMC4iCiAgICAgICAgc2VsZi5sZXZlbCAtPSAxCgogICAgZGVmIGZvcm1hdF91c2FnZShzZWxmLCB1c2FnZSk6CiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigic3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudCIpCgogICAgZGVmIGZvcm1hdF9oZWFkaW5nKHNlbGYsIGhlYWRpbmcpOgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoInN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnQiKQoKICAgIGRlZiBfZm9ybWF0X3RleHQoc2VsZiwgdGV4dCk6CiAgICAgICAgIiIiCiAgICAgICAgRm9ybWF0IGEgcGFyYWdyYXBoIG9mIGZyZWUtZm9ybSB0ZXh0IGZvciBpbmNsdXNpb24gaW4gdGhlCiAgICAgICAgaGVscCBvdXRwdXQgYXQgdGhlIGN1cnJlbnQgaW5kZW50YXRpb24gbGV2ZWwuCiAgICAgICAgIiIiCiAgICAgICAgdGV4dF93aWR0aCA9IHNlbGYud2lkdGggLSBzZWxmLmN1cnJlbnRfaW5kZW50CiAgICAgICAgaW5kZW50ID0gIiAiKnNlbGYuY3VycmVudF9pbmRlbnQKICAgICAgICByZXR1cm4gdGV4dHdyYXAuZmlsbCh0ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRfd2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbF9pbmRlbnQ9aW5kZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNlcXVlbnRfaW5kZW50PWluZGVudCkKCiAgICBkZWYgZm9ybWF0X2Rlc2NyaXB0aW9uKHNlbGYsIGRlc2NyaXB0aW9uKToKICAgICAgICBpZiBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2Zvcm1hdF90ZXh0KGRlc2NyaXB0aW9uKSArICJcbiIKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIiIKCiAgICBkZWYgZm9ybWF0X2VwaWxvZyhzZWxmLCBlcGlsb2cpOgogICAgICAgIGlmIGVwaWxvZzoKICAgICAgICAgICAgcmV0dXJuICJcbiIgKyBzZWxmLl9mb3JtYXRfdGV4dChlcGlsb2cpICsgIlxuIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAiIgoKCiAgICBkZWYgZXhwYW5kX2RlZmF1bHQoc2VsZiwgb3B0aW9uKToKICAgICAgICBpZiBzZWxmLnBhcnNlciBpcyBOb25lIG9yIG5vdCBzZWxmLmRlZmF1bHRfdGFnOgogICAgICAgICAgICByZXR1cm4gb3B0aW9uLmhlbHAKCiAgICAgICAgZGVmYXVsdF92YWx1ZSA9IHNlbGYucGFyc2VyLmRlZmF1bHRzLmdldChvcHRpb24uZGVzdCkKICAgICAgICBpZiBkZWZhdWx0X3ZhbHVlIGlzIE5PX0RFRkFVTFQgb3IgZGVmYXVsdF92YWx1ZSBpcyBOb25lOgogICAgICAgICAgICBkZWZhdWx0X3ZhbHVlID0gc2VsZi5OT19ERUZBVUxUX1ZBTFVFCgogICAgICAgIHJldHVybiBvcHRpb24uaGVscC5yZXBsYWNlKHNlbGYuZGVmYXVsdF90YWcsIHN0cihkZWZhdWx0X3ZhbHVlKSkKCiAgICBkZWYgZm9ybWF0X29wdGlvbihzZWxmLCBvcHRpb24pOgogICAgICAgICMgVGhlIGhlbHAgZm9yIGVhY2ggb3B0aW9uIGNvbnNpc3RzIG9mIHR3byBwYXJ0czoKICAgICAgICAjICAgKiB0aGUgb3B0IHN0cmluZ3MgYW5kIG1ldGF2YXJzCiAgICAgICAgIyAgICAgZWcuICgiLXgiLCBvciAiLWZGSUxFTkFNRSwgLS1maWxlPUZJTEVOQU1FIikKICAgICAgICAjICAgKiB0aGUgdXNlci1zdXBwbGllZCBoZWxwIHN0cmluZwogICAgICAgICMgICAgIGVnLiAoInR1cm4gb24gZXhwZXJ0IG1vZGUiLCAicmVhZCBkYXRhIGZyb20gRklMRU5BTUUiKQogICAgICAgICMKICAgICAgICAjIElmIHBvc3NpYmxlLCB3ZSB3cml0ZSBib3RoIG9mIHRoZXNlIG9uIHRoZSBzYW1lIGxpbmU6CiAgICAgICAgIyAgIC14ICAgICAgdHVybiBvbiBleHBlcnQgbW9kZQogICAgICAgICMKICAgICAgICAjIEJ1dCBpZiB0aGUgb3B0IHN0cmluZyBsaXN0IGlzIHRvbyBsb25nLCB3ZSBwdXQgdGhlIGhlbHAKICAgICAgICAjIHN0cmluZyBvbiBhIHNlY29uZCBsaW5lLCBpbmRlbnRlZCB0byB0aGUgc2FtZSBjb2x1bW4gaXQgd291bGQKICAgICAgICAjIHN0YXJ0IGluIGlmIGl0IGZpdCBvbiB0aGUgZmlyc3QgbGluZS4KICAgICAgICAjICAgLWZGSUxFTkFNRSwgLS1maWxlPUZJTEVOQU1FCiAgICAgICAgIyAgICAgICAgICAgcmVhZCBkYXRhIGZyb20gRklMRU5BTUUKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIG9wdHMgPSBzZWxmLm9wdGlvbl9zdHJpbmdzW29wdGlvbl0KICAgICAgICBvcHRfd2lkdGggPSBzZWxmLmhlbHBfcG9zaXRpb24gLSBzZWxmLmN1cnJlbnRfaW5kZW50IC0gMgogICAgICAgIGlmIGxlbihvcHRzKSA+IG9wdF93aWR0aDoKICAgICAgICAgICAgb3B0cyA9ICIlKnMlc1xuIiAlIChzZWxmLmN1cnJlbnRfaW5kZW50LCAiIiwgb3B0cykKICAgICAgICAgICAgaW5kZW50X2ZpcnN0ID0gc2VsZi5oZWxwX3Bvc2l0aW9uCiAgICAgICAgZWxzZTogICAgICAgICAgICAgICAgICAgICAgICMgc3RhcnQgaGVscCBvbiBzYW1lIGxpbmUgYXMgb3B0cwogICAgICAgICAgICBvcHRzID0gIiUqcyUtKnMgICIgJSAoc2VsZi5jdXJyZW50X2luZGVudCwgIiIsIG9wdF93aWR0aCwgb3B0cykKICAgICAgICAgICAgaW5kZW50X2ZpcnN0ID0gMAogICAgICAgIHJlc3VsdC5hcHBlbmQob3B0cykKICAgICAgICBpZiBvcHRpb24uaGVscDoKICAgICAgICAgICAgaGVscF90ZXh0ID0gc2VsZi5leHBhbmRfZGVmYXVsdChvcHRpb24pCiAgICAgICAgICAgIGhlbHBfbGluZXMgPSB0ZXh0d3JhcC53cmFwKGhlbHBfdGV4dCwgc2VsZi5oZWxwX3dpZHRoKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKCIlKnMlc1xuIiAlIChpbmRlbnRfZmlyc3QsICIiLCBoZWxwX2xpbmVzWzBdKSkKICAgICAgICAgICAgcmVzdWx0LmV4dGVuZChbIiUqcyVzXG4iICUgKHNlbGYuaGVscF9wb3NpdGlvbiwgIiIsIGxpbmUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGhlbHBfbGluZXNbMTpdXSkKICAgICAgICBlbGlmIG9wdHNbLTFdICE9ICJcbiI6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoIlxuIikKICAgICAgICByZXR1cm4gIiIuam9pbihyZXN1bHQpCgogICAgZGVmIHN0b3JlX29wdGlvbl9zdHJpbmdzKHNlbGYsIHBhcnNlcik6CiAgICAgICAgc2VsZi5pbmRlbnQoKQogICAgICAgIG1heF9sZW4gPSAwCiAgICAgICAgZm9yIG9wdCBpbiBwYXJzZXIub3B0aW9uX2xpc3Q6CiAgICAgICAgICAgIHN0cmluZ3MgPSBzZWxmLmZvcm1hdF9vcHRpb25fc3RyaW5ncyhvcHQpCiAgICAgICAgICAgIHNlbGYub3B0aW9uX3N0cmluZ3Nbb3B0XSA9IHN0cmluZ3MKICAgICAgICAgICAgbWF4X2xlbiA9IG1heChtYXhfbGVuLCBsZW4oc3RyaW5ncykgKyBzZWxmLmN1cnJlbnRfaW5kZW50KQogICAgICAgIHNlbGYuaW5kZW50KCkKICAgICAgICBmb3IgZ3JvdXAgaW4gcGFyc2VyLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIGZvciBvcHQgaW4gZ3JvdXAub3B0aW9uX2xpc3Q6CiAgICAgICAgICAgICAgICBzdHJpbmdzID0gc2VsZi5mb3JtYXRfb3B0aW9uX3N0cmluZ3Mob3B0KQogICAgICAgICAgICAgICAgc2VsZi5vcHRpb25fc3RyaW5nc1tvcHRdID0gc3RyaW5ncwogICAgICAgICAgICAgICAgbWF4X2xlbiA9IG1heChtYXhfbGVuLCBsZW4oc3RyaW5ncykgKyBzZWxmLmN1cnJlbnRfaW5kZW50KQogICAgICAgIHNlbGYuZGVkZW50KCkKICAgICAgICBzZWxmLmRlZGVudCgpCiAgICAgICAgc2VsZi5oZWxwX3Bvc2l0aW9uID0gbWluKG1heF9sZW4gKyAyLCBzZWxmLm1heF9oZWxwX3Bvc2l0aW9uKQogICAgICAgIHNlbGYuaGVscF93aWR0aCA9IHNlbGYud2lkdGggLSBzZWxmLmhlbHBfcG9zaXRpb24KCiAgICBkZWYgZm9ybWF0X29wdGlvbl9zdHJpbmdzKHNlbGYsIG9wdGlvbik6CiAgICAgICAgIiIiUmV0dXJuIGEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2Ygb3B0aW9uIHN0cmluZ3MgJiBtZXRhdmFyaWFibGVzLiIiIgogICAgICAgIGlmIG9wdGlvbi50YWtlc192YWx1ZSgpOgogICAgICAgICAgICBtZXRhdmFyID0gb3B0aW9uLm1ldGF2YXIgb3Igb3B0aW9uLmRlc3QudXBwZXIoKQogICAgICAgICAgICBzaG9ydF9vcHRzID0gW3NlbGYuX3Nob3J0X29wdF9mbXQgJSAoc29wdCwgbWV0YXZhcikKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3Igc29wdCBpbiBvcHRpb24uX3Nob3J0X29wdHNdCiAgICAgICAgICAgIGxvbmdfb3B0cyA9IFtzZWxmLl9sb25nX29wdF9mbXQgJSAobG9wdCwgbWV0YXZhcikKICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBsb3B0IGluIG9wdGlvbi5fbG9uZ19vcHRzXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNob3J0X29wdHMgPSBvcHRpb24uX3Nob3J0X29wdHMKICAgICAgICAgICAgbG9uZ19vcHRzID0gb3B0aW9uLl9sb25nX29wdHMKCiAgICAgICAgaWYgc2VsZi5zaG9ydF9maXJzdDoKICAgICAgICAgICAgb3B0cyA9IHNob3J0X29wdHMgKyBsb25nX29wdHMKICAgICAgICBlbHNlOgogICAgICAgICAgICBvcHRzID0gbG9uZ19vcHRzICsgc2hvcnRfb3B0cwoKICAgICAgICByZXR1cm4gIiwgIi5qb2luKG9wdHMpCgpjbGFzcyBJbmRlbnRlZEhlbHBGb3JtYXR0ZXIgKEhlbHBGb3JtYXR0ZXIpOgogICAgIiIiRm9ybWF0IGhlbHAgd2l0aCBpbmRlbnRlZCBzZWN0aW9uIGJvZGllcy4KICAgICIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLAogICAgICAgICAgICAgICAgIGluZGVudF9pbmNyZW1lbnQ9MiwKICAgICAgICAgICAgICAgICBtYXhfaGVscF9wb3NpdGlvbj0yNCwKICAgICAgICAgICAgICAgICB3aWR0aD1Ob25lLAogICAgICAgICAgICAgICAgIHNob3J0X2ZpcnN0PTEpOgogICAgICAgIEhlbHBGb3JtYXR0ZXIuX19pbml0X18oCiAgICAgICAgICAgIHNlbGYsIGluZGVudF9pbmNyZW1lbnQsIG1heF9oZWxwX3Bvc2l0aW9uLCB3aWR0aCwgc2hvcnRfZmlyc3QpCgogICAgZGVmIGZvcm1hdF91c2FnZShzZWxmLCB1c2FnZSk6CiAgICAgICAgcmV0dXJuIF8oIlVzYWdlOiAlc1xuIikgJSB1c2FnZQoKICAgIGRlZiBmb3JtYXRfaGVhZGluZyhzZWxmLCBoZWFkaW5nKToKICAgICAgICByZXR1cm4gIiUqcyVzOlxuIiAlIChzZWxmLmN1cnJlbnRfaW5kZW50LCAiIiwgaGVhZGluZykKCgpjbGFzcyBUaXRsZWRIZWxwRm9ybWF0dGVyIChIZWxwRm9ybWF0dGVyKToKICAgICIiIkZvcm1hdCBoZWxwIHdpdGggdW5kZXJsaW5lZCBzZWN0aW9uIGhlYWRlcnMuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwKICAgICAgICAgICAgICAgICBpbmRlbnRfaW5jcmVtZW50PTAsCiAgICAgICAgICAgICAgICAgbWF4X2hlbHBfcG9zaXRpb249MjQsCiAgICAgICAgICAgICAgICAgd2lkdGg9Tm9uZSwKICAgICAgICAgICAgICAgICBzaG9ydF9maXJzdD0wKToKICAgICAgICBIZWxwRm9ybWF0dGVyLl9faW5pdF9fICgKICAgICAgICAgICAgc2VsZiwgaW5kZW50X2luY3JlbWVudCwgbWF4X2hlbHBfcG9zaXRpb24sIHdpZHRoLCBzaG9ydF9maXJzdCkKCiAgICBkZWYgZm9ybWF0X3VzYWdlKHNlbGYsIHVzYWdlKToKICAgICAgICByZXR1cm4gIiVzICAlc1xuIiAlIChzZWxmLmZvcm1hdF9oZWFkaW5nKF8oIlVzYWdlIikpLCB1c2FnZSkKCiAgICBkZWYgZm9ybWF0X2hlYWRpbmcoc2VsZiwgaGVhZGluZyk6CiAgICAgICAgcmV0dXJuICIlc1xuJXNcbiIgJSAoaGVhZGluZywgIj0tIltzZWxmLmxldmVsXSAqIGxlbihoZWFkaW5nKSkKCgpkZWYgX3BhcnNlX251bSh2YWwsIHR5cGUpOgogICAgaWYgdmFsWzoyXS5sb3dlcigpID09ICIweCI6ICAgICAgICAgIyBoZXhhZGVjaW1hbAogICAgICAgIHJhZGl4ID0gMTYKICAgIGVsaWYgdmFsWzoyXS5sb3dlcigpID09ICIwYiI6ICAgICAgICMgYmluYXJ5CiAgICAgICAgcmFkaXggPSAyCiAgICAgICAgdmFsID0gdmFsWzI6XSBvciAiMCIgICAgICAgICAgICAjIGhhdmUgdG8gcmVtb3ZlICIwYiIgcHJlZml4CiAgICBlbGlmIHZhbFs6MV0gPT0gIjAiOiAgICAgICAgICAgICAgICAjIG9jdGFsCiAgICAgICAgcmFkaXggPSA4CiAgICBlbHNlOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGRlY2ltYWwKICAgICAgICByYWRpeCA9IDEwCgogICAgcmV0dXJuIHR5cGUodmFsLCByYWRpeCkKCmRlZiBfcGFyc2VfaW50KHZhbCk6CiAgICByZXR1cm4gX3BhcnNlX251bSh2YWwsIGludCkKCl9idWlsdGluX2N2dCA9IHsgImludCIgOiAoX3BhcnNlX2ludCwgXygiaW50ZWdlciIpKSwKICAgICAgICAgICAgICAgICAibG9uZyIgOiAoX3BhcnNlX2ludCwgXygiaW50ZWdlciIpKSwKICAgICAgICAgICAgICAgICAiZmxvYXQiIDogKGZsb2F0LCBfKCJmbG9hdGluZy1wb2ludCIpKSwKICAgICAgICAgICAgICAgICAiY29tcGxleCIgOiAoY29tcGxleCwgXygiY29tcGxleCIpKSB9CgpkZWYgY2hlY2tfYnVpbHRpbihvcHRpb24sIG9wdCwgdmFsdWUpOgogICAgKGN2dCwgd2hhdCkgPSBfYnVpbHRpbl9jdnRbb3B0aW9uLnR5cGVdCiAgICB0cnk6CiAgICAgICAgcmV0dXJuIGN2dCh2YWx1ZSkKICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIHJhaXNlIE9wdGlvblZhbHVlRXJyb3IoCiAgICAgICAgICAgIF8oIm9wdGlvbiAlczogaW52YWxpZCAlcyB2YWx1ZTogJXIiKSAlIChvcHQsIHdoYXQsIHZhbHVlKSkKCmRlZiBjaGVja19jaG9pY2Uob3B0aW9uLCBvcHQsIHZhbHVlKToKICAgIGlmIHZhbHVlIGluIG9wdGlvbi5jaG9pY2VzOgogICAgICAgIHJldHVybiB2YWx1ZQogICAgZWxzZToKICAgICAgICBjaG9pY2VzID0gIiwgIi5qb2luKG1hcChyZXByLCBvcHRpb24uY2hvaWNlcykpCiAgICAgICAgcmFpc2UgT3B0aW9uVmFsdWVFcnJvcigKICAgICAgICAgICAgXygib3B0aW9uICVzOiBpbnZhbGlkIGNob2ljZTogJXIgKGNob29zZSBmcm9tICVzKSIpCiAgICAgICAgICAgICUgKG9wdCwgdmFsdWUsIGNob2ljZXMpKQoKIyBOb3Qgc3VwcGx5aW5nIGEgZGVmYXVsdCBpcyBkaWZmZXJlbnQgZnJvbSBhIGRlZmF1bHQgb2YgTm9uZSwKIyBzbyB3ZSBuZWVkIGFuIGV4cGxpY2l0ICJub3Qgc3VwcGxpZWQiIHZhbHVlLgpOT19ERUZBVUxUID0gKCJOTyIsICJERUZBVUxUIikKCgpjbGFzcyBPcHRpb246CiAgICAiIiIKICAgIEluc3RhbmNlIGF0dHJpYnV0ZXM6CiAgICAgIF9zaG9ydF9vcHRzIDogW3N0cmluZ10KICAgICAgX2xvbmdfb3B0cyA6IFtzdHJpbmddCgogICAgICBhY3Rpb24gOiBzdHJpbmcKICAgICAgdHlwZSA6IHN0cmluZwogICAgICBkZXN0IDogc3RyaW5nCiAgICAgIGRlZmF1bHQgOiBhbnkKICAgICAgbmFyZ3MgOiBpbnQKICAgICAgY29uc3QgOiBhbnkKICAgICAgY2hvaWNlcyA6IFtzdHJpbmddCiAgICAgIGNhbGxiYWNrIDogZnVuY3Rpb24KICAgICAgY2FsbGJhY2tfYXJncyA6IChhbnkqKQogICAgICBjYWxsYmFja19rd2FyZ3MgOiB7IHN0cmluZyA6IGFueSB9CiAgICAgIGhlbHAgOiBzdHJpbmcKICAgICAgbWV0YXZhciA6IHN0cmluZwogICAgIiIiCgogICAgIyBUaGUgbGlzdCBvZiBpbnN0YW5jZSBhdHRyaWJ1dGVzIHRoYXQgbWF5IGJlIHNldCB0aHJvdWdoCiAgICAjIGtleXdvcmQgYXJncyB0byB0aGUgY29uc3RydWN0b3IuCiAgICBBVFRSUyA9IFsnYWN0aW9uJywKICAgICAgICAgICAgICd0eXBlJywKICAgICAgICAgICAgICdkZXN0JywKICAgICAgICAgICAgICdkZWZhdWx0JywKICAgICAgICAgICAgICduYXJncycsCiAgICAgICAgICAgICAnY29uc3QnLAogICAgICAgICAgICAgJ2Nob2ljZXMnLAogICAgICAgICAgICAgJ2NhbGxiYWNrJywKICAgICAgICAgICAgICdjYWxsYmFja19hcmdzJywKICAgICAgICAgICAgICdjYWxsYmFja19rd2FyZ3MnLAogICAgICAgICAgICAgJ2hlbHAnLAogICAgICAgICAgICAgJ21ldGF2YXInXQoKICAgICMgVGhlIHNldCBvZiBhY3Rpb25zIGFsbG93ZWQgYnkgb3B0aW9uIHBhcnNlcnMuICBFeHBsaWNpdGx5IGxpc3RlZAogICAgIyBoZXJlIHNvIHRoZSBjb25zdHJ1Y3RvciBjYW4gdmFsaWRhdGUgaXRzIGFyZ3VtZW50cy4KICAgIEFDVElPTlMgPSAoInN0b3JlIiwKICAgICAgICAgICAgICAgInN0b3JlX2NvbnN0IiwKICAgICAgICAgICAgICAgInN0b3JlX3RydWUiLAogICAgICAgICAgICAgICAic3RvcmVfZmFsc2UiLAogICAgICAgICAgICAgICAiYXBwZW5kIiwKICAgICAgICAgICAgICAgImFwcGVuZF9jb25zdCIsCiAgICAgICAgICAgICAgICJjb3VudCIsCiAgICAgICAgICAgICAgICJjYWxsYmFjayIsCiAgICAgICAgICAgICAgICJoZWxwIiwKICAgICAgICAgICAgICAgInZlcnNpb24iKQoKICAgICMgVGhlIHNldCBvZiBhY3Rpb25zIHRoYXQgaW52b2x2ZSBzdG9yaW5nIGEgdmFsdWUgc29tZXdoZXJlOwogICAgIyBhbHNvIGxpc3RlZCBqdXN0IGZvciBjb25zdHJ1Y3RvciBhcmd1bWVudCB2YWxpZGF0aW9uLiAgKElmCiAgICAjIHRoZSBhY3Rpb24gaXMgb25lIG9mIHRoZXNlLCB0aGVyZSBtdXN0IGJlIGEgZGVzdGluYXRpb24uKQogICAgU1RPUkVfQUNUSU9OUyA9ICgic3RvcmUiLAogICAgICAgICAgICAgICAgICAgICAic3RvcmVfY29uc3QiLAogICAgICAgICAgICAgICAgICAgICAic3RvcmVfdHJ1ZSIsCiAgICAgICAgICAgICAgICAgICAgICJzdG9yZV9mYWxzZSIsCiAgICAgICAgICAgICAgICAgICAgICJhcHBlbmQiLAogICAgICAgICAgICAgICAgICAgICAiYXBwZW5kX2NvbnN0IiwKICAgICAgICAgICAgICAgICAgICAgImNvdW50IikKCiAgICAjIFRoZSBzZXQgb2YgYWN0aW9ucyBmb3Igd2hpY2ggaXQgbWFrZXMgc2Vuc2UgdG8gc3VwcGx5IGEgdmFsdWUKICAgICMgdHlwZSwgaWUuIHdoaWNoIG1heSBjb25zdW1lIGFuIGFyZ3VtZW50IGZyb20gdGhlIGNvbW1hbmQgbGluZS4KICAgIFRZUEVEX0FDVElPTlMgPSAoInN0b3JlIiwKICAgICAgICAgICAgICAgICAgICAgImFwcGVuZCIsCiAgICAgICAgICAgICAgICAgICAgICJjYWxsYmFjayIpCgogICAgIyBUaGUgc2V0IG9mIGFjdGlvbnMgd2hpY2ggKnJlcXVpcmUqIGEgdmFsdWUgdHlwZSwgaWUuIHRoYXQKICAgICMgYWx3YXlzIGNvbnN1bWUgYW4gYXJndW1lbnQgZnJvbSB0aGUgY29tbWFuZCBsaW5lLgogICAgQUxXQVlTX1RZUEVEX0FDVElPTlMgPSAoInN0b3JlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcHBlbmQiKQoKICAgICMgVGhlIHNldCBvZiBhY3Rpb25zIHdoaWNoIHRha2UgYSAnY29uc3QnIGF0dHJpYnV0ZS4KICAgIENPTlNUX0FDVElPTlMgPSAoInN0b3JlX2NvbnN0IiwKICAgICAgICAgICAgICAgICAgICAgImFwcGVuZF9jb25zdCIpCgogICAgIyBUaGUgc2V0IG9mIGtub3duIHR5cGVzIGZvciBvcHRpb24gcGFyc2Vycy4gIEFnYWluLCBsaXN0ZWQgaGVyZSBmb3IKICAgICMgY29uc3RydWN0b3IgYXJndW1lbnQgdmFsaWRhdGlvbi4KICAgIFRZUEVTID0gKCJzdHJpbmciLCAiaW50IiwgImxvbmciLCAiZmxvYXQiLCAiY29tcGxleCIsICJjaG9pY2UiKQoKICAgICMgRGljdGlvbmFyeSBvZiBhcmd1bWVudCBjaGVja2luZyBmdW5jdGlvbnMsIHdoaWNoIGNvbnZlcnQgYW5kCiAgICAjIHZhbGlkYXRlIG9wdGlvbiBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZSBvcHRpb24gdHlwZS4KICAgICMKICAgICMgU2lnbmF0dXJlIG9mIGNoZWNraW5nIGZ1bmN0aW9ucyBpczoKICAgICMgICBjaGVjayhvcHRpb24gOiBPcHRpb24sIG9wdCA6IHN0cmluZywgdmFsdWUgOiBzdHJpbmcpIC0+IGFueQogICAgIyB3aGVyZQogICAgIyAgIG9wdGlvbiBpcyB0aGUgT3B0aW9uIGluc3RhbmNlIGNhbGxpbmcgdGhlIGNoZWNrZXIKICAgICMgICBvcHQgaXMgdGhlIGFjdHVhbCBvcHRpb24gc2VlbiBvbiB0aGUgY29tbWFuZC1saW5lCiAgICAjICAgICAoZWcuICItYSIsICItLWZpbGUiKQogICAgIyAgIHZhbHVlIGlzIHRoZSBvcHRpb24gYXJndW1lbnQgc2VlbiBvbiB0aGUgY29tbWFuZC1saW5lCiAgICAjCiAgICAjIFRoZSByZXR1cm4gdmFsdWUgc2hvdWxkIGJlIGluIHRoZSBhcHByb3ByaWF0ZSBQeXRob24gdHlwZQogICAgIyBmb3Igb3B0aW9uLnR5cGUgLS0gZWcuIGFuIGludGVnZXIgaWYgb3B0aW9uLnR5cGUgPT0gImludCIuCiAgICAjCiAgICAjIElmIG5vIGNoZWNrZXIgaXMgZGVmaW5lZCBmb3IgYSB0eXBlLCBhcmd1bWVudHMgd2lsbCBiZQogICAgIyB1bmNoZWNrZWQgYW5kIHJlbWFpbiBzdHJpbmdzLgogICAgVFlQRV9DSEVDS0VSID0geyAiaW50IiAgICA6IGNoZWNrX2J1aWx0aW4sCiAgICAgICAgICAgICAgICAgICAgICJsb25nIiAgIDogY2hlY2tfYnVpbHRpbiwKICAgICAgICAgICAgICAgICAgICAgImZsb2F0IiAgOiBjaGVja19idWlsdGluLAogICAgICAgICAgICAgICAgICAgICAiY29tcGxleCI6IGNoZWNrX2J1aWx0aW4sCiAgICAgICAgICAgICAgICAgICAgICJjaG9pY2UiIDogY2hlY2tfY2hvaWNlLAogICAgICAgICAgICAgICAgICAgfQoKCiAgICAjIENIRUNLX01FVEhPRFMgaXMgYSBsaXN0IG9mIHVuYm91bmQgbWV0aG9kIG9iamVjdHM7IHRoZXkgYXJlIGNhbGxlZAogICAgIyBieSB0aGUgY29uc3RydWN0b3IsIGluIG9yZGVyLCBhZnRlciBhbGwgYXR0cmlidXRlcyBhcmUKICAgICMgaW5pdGlhbGl6ZWQuICBUaGUgbGlzdCBpcyBjcmVhdGVkIGFuZCBmaWxsZWQgaW4gbGF0ZXIsIGFmdGVyIGFsbAogICAgIyB0aGUgbWV0aG9kcyBhcmUgYWN0dWFsbHkgZGVmaW5lZC4gIChJIGp1c3QgcHV0IGl0IGhlcmUgYmVjYXVzZSBJCiAgICAjIGxpa2UgdG8gZGVmaW5lIGFuZCBkb2N1bWVudCBhbGwgY2xhc3MgYXR0cmlidXRlcyBpbiB0aGUgc2FtZQogICAgIyBwbGFjZS4pICBTdWJjbGFzc2VzIHRoYXQgYWRkIGFub3RoZXIgX2NoZWNrXyooKSBtZXRob2Qgc2hvdWxkCiAgICAjIGRlZmluZSB0aGVpciBvd24gQ0hFQ0tfTUVUSE9EUyBsaXN0IHRoYXQgYWRkcyB0aGVpciBjaGVjayBtZXRob2QKICAgICMgdG8gdGhvc2UgZnJvbSB0aGlzIGNsYXNzLgogICAgQ0hFQ0tfTUVUSE9EUyA9IE5vbmUKCgogICAgIyAtLSBDb25zdHJ1Y3Rvci9pbml0aWFsaXphdGlvbiBtZXRob2RzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX19pbml0X18oc2VsZiwgKm9wdHMsICoqYXR0cnMpOgogICAgICAgICMgU2V0IF9zaG9ydF9vcHRzLCBfbG9uZ19vcHRzIGF0dHJzIGZyb20gJ29wdHMnIHR1cGxlLgogICAgICAgICMgSGF2ZSB0byBiZSBzZXQgbm93LCBpbiBjYXNlIG5vIG9wdGlvbiBzdHJpbmdzIGFyZSBzdXBwbGllZC4KICAgICAgICBzZWxmLl9zaG9ydF9vcHRzID0gW10KICAgICAgICBzZWxmLl9sb25nX29wdHMgPSBbXQogICAgICAgIG9wdHMgPSBzZWxmLl9jaGVja19vcHRfc3RyaW5ncyhvcHRzKQogICAgICAgIHNlbGYuX3NldF9vcHRfc3RyaW5ncyhvcHRzKQoKICAgICAgICAjIFNldCBhbGwgb3RoZXIgYXR0cnMgKGFjdGlvbiwgdHlwZSwgZXRjLikgZnJvbSAnYXR0cnMnIGRpY3QKICAgICAgICBzZWxmLl9zZXRfYXR0cnMoYXR0cnMpCgogICAgICAgICMgQ2hlY2sgYWxsIHRoZSBhdHRyaWJ1dGVzIHdlIGp1c3Qgc2V0LiAgVGhlcmUgYXJlIGxvdHMgb2YKICAgICAgICAjIGNvbXBsaWNhdGVkIGludGVyZGVwZW5kZW5jaWVzLCBidXQgbHVja2lseSB0aGV5IGNhbiBiZSBmYXJtZWQKICAgICAgICAjIG91dCB0byB0aGUgX2NoZWNrXyooKSBtZXRob2RzIGxpc3RlZCBpbiBDSEVDS19NRVRIT0RTIC0tIHdoaWNoCiAgICAgICAgIyBjb3VsZCBiZSBoYW5keSBmb3Igc3ViY2xhc3NlcyEgIFRoZSBvbmUgdGhpbmcgdGhlc2UgYWxsIHNoYXJlCiAgICAgICAgIyBpcyB0aGF0IHRoZXkgcmFpc2UgT3B0aW9uRXJyb3IgaWYgdGhleSBkaXNjb3ZlciBhIHByb2JsZW0uCiAgICAgICAgZm9yIGNoZWNrZXIgaW4gc2VsZi5DSEVDS19NRVRIT0RTOgogICAgICAgICAgICBjaGVja2VyKHNlbGYpCgogICAgZGVmIF9jaGVja19vcHRfc3RyaW5ncyhzZWxmLCBvcHRzKToKICAgICAgICAjIEZpbHRlciBvdXQgTm9uZSBiZWNhdXNlIGVhcmx5IHZlcnNpb25zIG9mIE9wdGlrIGhhZCBleGFjdGx5CiAgICAgICAgIyBvbmUgc2hvcnQgb3B0aW9uIGFuZCBvbmUgbG9uZyBvcHRpb24sIGVpdGhlciBvZiB3aGljaAogICAgICAgICMgY291bGQgYmUgTm9uZS4KICAgICAgICBvcHRzID0gW29wdCBmb3Igb3B0IGluIG9wdHMgaWYgb3B0XQogICAgICAgIGlmIG5vdCBvcHRzOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImF0IGxlYXN0IG9uZSBvcHRpb24gc3RyaW5nIG11c3QgYmUgc3VwcGxpZWQiKQogICAgICAgIHJldHVybiBvcHRzCgogICAgZGVmIF9zZXRfb3B0X3N0cmluZ3Moc2VsZiwgb3B0cyk6CiAgICAgICAgZm9yIG9wdCBpbiBvcHRzOgogICAgICAgICAgICBpZiBsZW4ob3B0KSA8IDI6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAiaW52YWxpZCBvcHRpb24gc3RyaW5nICVyOiAiCiAgICAgICAgICAgICAgICAgICAgIm11c3QgYmUgYXQgbGVhc3QgdHdvIGNoYXJhY3RlcnMgbG9uZyIgJSBvcHQsIHNlbGYpCiAgICAgICAgICAgIGVsaWYgbGVuKG9wdCkgPT0gMjoKICAgICAgICAgICAgICAgIGlmIG5vdCAob3B0WzBdID09ICItIiBhbmQgb3B0WzFdICE9ICItIik6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICJpbnZhbGlkIHNob3J0IG9wdGlvbiBzdHJpbmcgJXI6ICIKICAgICAgICAgICAgICAgICAgICAgICAgIm11c3QgYmUgb2YgdGhlIGZvcm0gLXgsICh4IGFueSBub24tZGFzaCBjaGFyKSIgJSBvcHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYpCiAgICAgICAgICAgICAgICBzZWxmLl9zaG9ydF9vcHRzLmFwcGVuZChvcHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBub3QgKG9wdFswOjJdID09ICItLSIgYW5kIG9wdFsyXSAhPSAiLSIpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAiaW52YWxpZCBsb25nIG9wdGlvbiBzdHJpbmcgJXI6ICIKICAgICAgICAgICAgICAgICAgICAgICAgIm11c3Qgc3RhcnQgd2l0aCAtLSwgZm9sbG93ZWQgYnkgbm9uLWRhc2giICUgb3B0LAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmKQogICAgICAgICAgICAgICAgc2VsZi5fbG9uZ19vcHRzLmFwcGVuZChvcHQpCgogICAgZGVmIF9zZXRfYXR0cnMoc2VsZiwgYXR0cnMpOgogICAgICAgIGZvciBhdHRyIGluIHNlbGYuQVRUUlM6CiAgICAgICAgICAgIGlmIGF0dHIgaW4gYXR0cnM6CiAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIGF0dHJzW2F0dHJdKQogICAgICAgICAgICAgICAgZGVsIGF0dHJzW2F0dHJdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBhdHRyID09ICdkZWZhdWx0JzoKICAgICAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIE5PX0RFRkFVTFQpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNldGF0dHIoc2VsZiwgYXR0ciwgTm9uZSkKICAgICAgICBpZiBhdHRyczoKICAgICAgICAgICAgYXR0cnMgPSBzb3J0ZWQoYXR0cnMua2V5cygpKQogICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICJpbnZhbGlkIGtleXdvcmQgYXJndW1lbnRzOiAlcyIgJSAiLCAiLmpvaW4oYXR0cnMpLAogICAgICAgICAgICAgICAgc2VsZikKCgogICAgIyAtLSBDb25zdHJ1Y3RvciB2YWxpZGF0aW9uIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX2NoZWNrX2FjdGlvbihzZWxmKToKICAgICAgICBpZiBzZWxmLmFjdGlvbiBpcyBOb25lOgogICAgICAgICAgICBzZWxmLmFjdGlvbiA9ICJzdG9yZSIKICAgICAgICBlbGlmIHNlbGYuYWN0aW9uIG5vdCBpbiBzZWxmLkFDVElPTlM6CiAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKCJpbnZhbGlkIGFjdGlvbjogJXIiICUgc2VsZi5hY3Rpb24sIHNlbGYpCgogICAgZGVmIF9jaGVja190eXBlKHNlbGYpOgogICAgICAgIGlmIHNlbGYudHlwZSBpcyBOb25lOgogICAgICAgICAgICBpZiBzZWxmLmFjdGlvbiBpbiBzZWxmLkFMV0FZU19UWVBFRF9BQ1RJT05TOgogICAgICAgICAgICAgICAgaWYgc2VsZi5jaG9pY2VzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICMgVGhlICJjaG9pY2VzIiBhdHRyaWJ1dGUgaW1wbGllcyAiY2hvaWNlIiB0eXBlLgogICAgICAgICAgICAgICAgICAgIHNlbGYudHlwZSA9ICJjaG9pY2UiCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgTm8gdHlwZSBnaXZlbj8gICJzdHJpbmciIGlzIHRoZSBtb3N0IHNlbnNpYmxlIGRlZmF1bHQuCiAgICAgICAgICAgICAgICAgICAgc2VsZi50eXBlID0gInN0cmluZyIKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIEFsbG93IHR5cGUgb2JqZWN0cyBvciBidWlsdGluIHR5cGUgY29udmVyc2lvbiBmdW5jdGlvbnMKICAgICAgICAgICAgIyAoaW50LCBzdHIsIGV0Yy4pIGFzIGFuIGFsdGVybmF0aXZlIHRvIHRoZWlyIG5hbWVzLiAgKFRoZQogICAgICAgICAgICAjIGNvbXBsaWNhdGVkIGNoZWNrIG9mIGJ1aWx0aW5zIGlzIG9ubHkgbmVjZXNzYXJ5IGZvcgogICAgICAgICAgICAjIFB5dGhvbiAyLjEgYW5kIGVhcmxpZXIsIGFuZCBpcyBzaG9ydC1jaXJjdWl0ZWQgYnkgdGhlCiAgICAgICAgICAgICMgZmlyc3QgY2hlY2sgb24gbW9kZXJuIFB5dGhvbnMuKQogICAgICAgICAgICBpbXBvcnQgYnVpbHRpbnMKICAgICAgICAgICAgaWYgKCBpc2luc3RhbmNlKHNlbGYudHlwZSwgdHlwZSkgb3IKICAgICAgICAgICAgICAgICAoaGFzYXR0cihzZWxmLnR5cGUsICJfX25hbWVfXyIpIGFuZAogICAgICAgICAgICAgICAgICBnZXRhdHRyKGJ1aWx0aW5zLCBzZWxmLnR5cGUuX19uYW1lX18sIE5vbmUpIGlzIHNlbGYudHlwZSkgKToKICAgICAgICAgICAgICAgIHNlbGYudHlwZSA9IHNlbGYudHlwZS5fX25hbWVfXwoKICAgICAgICAgICAgaWYgc2VsZi50eXBlID09ICJzdHIiOgogICAgICAgICAgICAgICAgc2VsZi50eXBlID0gInN0cmluZyIKCiAgICAgICAgICAgIGlmIHNlbGYudHlwZSBub3QgaW4gc2VsZi5UWVBFUzoKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKCJpbnZhbGlkIG9wdGlvbiB0eXBlOiAlciIgJSBzZWxmLnR5cGUsIHNlbGYpCiAgICAgICAgICAgIGlmIHNlbGYuYWN0aW9uIG5vdCBpbiBzZWxmLlRZUEVEX0FDVElPTlM6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAibXVzdCBub3Qgc3VwcGx5IGEgdHlwZSBmb3IgYWN0aW9uICVyIiAlIHNlbGYuYWN0aW9uLCBzZWxmKQoKICAgIGRlZiBfY2hlY2tfY2hvaWNlKHNlbGYpOgogICAgICAgIGlmIHNlbGYudHlwZSA9PSAiY2hvaWNlIjoKICAgICAgICAgICAgaWYgc2VsZi5jaG9pY2VzIGlzIE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAibXVzdCBzdXBwbHkgYSBsaXN0IG9mIGNob2ljZXMgZm9yIHR5cGUgJ2Nob2ljZSciLCBzZWxmKQogICAgICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKHNlbGYuY2hvaWNlcywgKHR1cGxlLCBsaXN0KSk6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAiY2hvaWNlcyBtdXN0IGJlIGEgbGlzdCBvZiBzdHJpbmdzICgnJXMnIHN1cHBsaWVkKSIKICAgICAgICAgICAgICAgICAgICAlIHN0cih0eXBlKHNlbGYuY2hvaWNlcykpLnNwbGl0KCInIilbMV0sIHNlbGYpCiAgICAgICAgZWxpZiBzZWxmLmNob2ljZXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgIm11c3Qgbm90IHN1cHBseSBjaG9pY2VzIGZvciB0eXBlICVyIiAlIHNlbGYudHlwZSwgc2VsZikKCiAgICBkZWYgX2NoZWNrX2Rlc3Qoc2VsZik6CiAgICAgICAgIyBObyBkZXN0aW5hdGlvbiBnaXZlbiwgYW5kIHdlIG5lZWQgb25lIGZvciB0aGlzIGFjdGlvbi4gIFRoZQogICAgICAgICMgc2VsZi50eXBlIGNoZWNrIGlzIGZvciBjYWxsYmFja3MgdGhhdCB0YWtlIGEgdmFsdWUuCiAgICAgICAgdGFrZXNfdmFsdWUgPSAoc2VsZi5hY3Rpb24gaW4gc2VsZi5TVE9SRV9BQ1RJT05TIG9yCiAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50eXBlIGlzIG5vdCBOb25lKQogICAgICAgIGlmIHNlbGYuZGVzdCBpcyBOb25lIGFuZCB0YWtlc192YWx1ZToKCiAgICAgICAgICAgICMgR2xlYW4gYSBkZXN0aW5hdGlvbiBmcm9tIHRoZSBmaXJzdCBsb25nIG9wdGlvbiBzdHJpbmcsCiAgICAgICAgICAgICMgb3IgZnJvbSB0aGUgZmlyc3Qgc2hvcnQgb3B0aW9uIHN0cmluZyBpZiBubyBsb25nIG9wdGlvbnMuCiAgICAgICAgICAgIGlmIHNlbGYuX2xvbmdfb3B0czoKICAgICAgICAgICAgICAgICMgZWcuICItLWZvby1iYXIiIC0+ICJmb29fYmFyIgogICAgICAgICAgICAgICAgc2VsZi5kZXN0ID0gc2VsZi5fbG9uZ19vcHRzWzBdWzI6XS5yZXBsYWNlKCctJywgJ18nKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5kZXN0ID0gc2VsZi5fc2hvcnRfb3B0c1swXVsxXQoKICAgIGRlZiBfY2hlY2tfY29uc3Qoc2VsZik6CiAgICAgICAgaWYgc2VsZi5hY3Rpb24gbm90IGluIHNlbGYuQ09OU1RfQUNUSU9OUyBhbmQgc2VsZi5jb25zdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAiJ2NvbnN0JyBtdXN0IG5vdCBiZSBzdXBwbGllZCBmb3IgYWN0aW9uICVyIiAlIHNlbGYuYWN0aW9uLAogICAgICAgICAgICAgICAgc2VsZikKCiAgICBkZWYgX2NoZWNrX25hcmdzKHNlbGYpOgogICAgICAgIGlmIHNlbGYuYWN0aW9uIGluIHNlbGYuVFlQRURfQUNUSU9OUzoKICAgICAgICAgICAgaWYgc2VsZi5uYXJncyBpcyBOb25lOgogICAgICAgICAgICAgICAgc2VsZi5uYXJncyA9IDEKICAgICAgICBlbGlmIHNlbGYubmFyZ3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgIiduYXJncycgbXVzdCBub3QgYmUgc3VwcGxpZWQgZm9yIGFjdGlvbiAlciIgJSBzZWxmLmFjdGlvbiwKICAgICAgICAgICAgICAgIHNlbGYpCgogICAgZGVmIF9jaGVja19jYWxsYmFjayhzZWxmKToKICAgICAgICBpZiBzZWxmLmFjdGlvbiA9PSAiY2FsbGJhY2siOgogICAgICAgICAgICBpZiBub3QgY2FsbGFibGUoc2VsZi5jYWxsYmFjayk6CiAgICAgICAgICAgICAgICByYWlzZSBPcHRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAiY2FsbGJhY2sgbm90IGNhbGxhYmxlOiAlciIgJSBzZWxmLmNhbGxiYWNrLCBzZWxmKQogICAgICAgICAgICBpZiAoc2VsZi5jYWxsYmFja19hcmdzIGlzIG5vdCBOb25lIGFuZAogICAgICAgICAgICAgICAgbm90IGlzaW5zdGFuY2Uoc2VsZi5jYWxsYmFja19hcmdzLCB0dXBsZSkpOgogICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgImNhbGxiYWNrX2FyZ3MsIGlmIHN1cHBsaWVkLCBtdXN0IGJlIGEgdHVwbGU6IG5vdCAlciIKICAgICAgICAgICAgICAgICAgICAlIHNlbGYuY2FsbGJhY2tfYXJncywgc2VsZikKICAgICAgICAgICAgaWYgKHNlbGYuY2FsbGJhY2tfa3dhcmdzIGlzIG5vdCBOb25lIGFuZAogICAgICAgICAgICAgICAgbm90IGlzaW5zdGFuY2Uoc2VsZi5jYWxsYmFja19rd2FyZ3MsIGRpY3QpKToKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICJjYWxsYmFja19rd2FyZ3MsIGlmIHN1cHBsaWVkLCBtdXN0IGJlIGEgZGljdDogbm90ICVyIgogICAgICAgICAgICAgICAgICAgICUgc2VsZi5jYWxsYmFja19rd2FyZ3MsIHNlbGYpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgc2VsZi5jYWxsYmFjayBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICJjYWxsYmFjayBzdXBwbGllZCAoJXIpIGZvciBub24tY2FsbGJhY2sgb3B0aW9uIgogICAgICAgICAgICAgICAgICAgICUgc2VsZi5jYWxsYmFjaywgc2VsZikKICAgICAgICAgICAgaWYgc2VsZi5jYWxsYmFja19hcmdzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgImNhbGxiYWNrX2FyZ3Mgc3VwcGxpZWQgZm9yIG5vbi1jYWxsYmFjayBvcHRpb24iLCBzZWxmKQogICAgICAgICAgICBpZiBzZWxmLmNhbGxiYWNrX2t3YXJncyBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIE9wdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICJjYWxsYmFja19rd2FyZ3Mgc3VwcGxpZWQgZm9yIG5vbi1jYWxsYmFjayBvcHRpb24iLCBzZWxmKQoKCiAgICBDSEVDS19NRVRIT0RTID0gW19jaGVja19hY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgIF9jaGVja190eXBlLAogICAgICAgICAgICAgICAgICAgICBfY2hlY2tfY2hvaWNlLAogICAgICAgICAgICAgICAgICAgICBfY2hlY2tfZGVzdCwKICAgICAgICAgICAgICAgICAgICAgX2NoZWNrX2NvbnN0LAogICAgICAgICAgICAgICAgICAgICBfY2hlY2tfbmFyZ3MsCiAgICAgICAgICAgICAgICAgICAgIF9jaGVja19jYWxsYmFja10KCgogICAgIyAtLSBNaXNjZWxsYW5lb3VzIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIi8iLmpvaW4oc2VsZi5fc2hvcnRfb3B0cyArIHNlbGYuX2xvbmdfb3B0cykKCiAgICBfX3JlcHJfXyA9IF9yZXByCgogICAgZGVmIHRha2VzX3ZhbHVlKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnR5cGUgaXMgbm90IE5vbmUKCiAgICBkZWYgZ2V0X29wdF9zdHJpbmcoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fbG9uZ19vcHRzOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fbG9uZ19vcHRzWzBdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Nob3J0X29wdHNbMF0KCgogICAgIyAtLSBQcm9jZXNzaW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgY2hlY2tfdmFsdWUoc2VsZiwgb3B0LCB2YWx1ZSk6CiAgICAgICAgY2hlY2tlciA9IHNlbGYuVFlQRV9DSEVDS0VSLmdldChzZWxmLnR5cGUpCiAgICAgICAgaWYgY2hlY2tlciBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gdmFsdWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gY2hlY2tlcihzZWxmLCBvcHQsIHZhbHVlKQoKICAgIGRlZiBjb252ZXJ0X3ZhbHVlKHNlbGYsIG9wdCwgdmFsdWUpOgogICAgICAgIGlmIHZhbHVlIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBzZWxmLm5hcmdzID09IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5jaGVja192YWx1ZShvcHQsIHZhbHVlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIHR1cGxlKFtzZWxmLmNoZWNrX3ZhbHVlKG9wdCwgdikgZm9yIHYgaW4gdmFsdWVdKQoKICAgIGRlZiBwcm9jZXNzKHNlbGYsIG9wdCwgdmFsdWUsIHZhbHVlcywgcGFyc2VyKToKCiAgICAgICAgIyBGaXJzdCwgY29udmVydCB0aGUgdmFsdWUocykgdG8gdGhlIHJpZ2h0IHR5cGUuICBIb3dsIGlmIGFueQogICAgICAgICMgdmFsdWUocykgYXJlIGJvZ3VzLgogICAgICAgIHZhbHVlID0gc2VsZi5jb252ZXJ0X3ZhbHVlKG9wdCwgdmFsdWUpCgogICAgICAgICMgQW5kIHRoZW4gdGFrZSB3aGF0ZXZlciBhY3Rpb24gaXMgZXhwZWN0ZWQgb2YgdXMuCiAgICAgICAgIyBUaGlzIGlzIGEgc2VwYXJhdGUgbWV0aG9kIHRvIG1ha2UgbGlmZSBlYXNpZXIgZm9yCiAgICAgICAgIyBzdWJjbGFzc2VzIHRvIGFkZCBuZXcgYWN0aW9ucy4KICAgICAgICByZXR1cm4gc2VsZi50YWtlX2FjdGlvbigKICAgICAgICAgICAgc2VsZi5hY3Rpb24sIHNlbGYuZGVzdCwgb3B0LCB2YWx1ZSwgdmFsdWVzLCBwYXJzZXIpCgogICAgZGVmIHRha2VfYWN0aW9uKHNlbGYsIGFjdGlvbiwgZGVzdCwgb3B0LCB2YWx1ZSwgdmFsdWVzLCBwYXJzZXIpOgogICAgICAgIGlmIGFjdGlvbiA9PSAic3RvcmUiOgogICAgICAgICAgICBzZXRhdHRyKHZhbHVlcywgZGVzdCwgdmFsdWUpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gInN0b3JlX2NvbnN0IjoKICAgICAgICAgICAgc2V0YXR0cih2YWx1ZXMsIGRlc3QsIHNlbGYuY29uc3QpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gInN0b3JlX3RydWUiOgogICAgICAgICAgICBzZXRhdHRyKHZhbHVlcywgZGVzdCwgVHJ1ZSkKICAgICAgICBlbGlmIGFjdGlvbiA9PSAic3RvcmVfZmFsc2UiOgogICAgICAgICAgICBzZXRhdHRyKHZhbHVlcywgZGVzdCwgRmFsc2UpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gImFwcGVuZCI6CiAgICAgICAgICAgIHZhbHVlcy5lbnN1cmVfdmFsdWUoZGVzdCwgW10pLmFwcGVuZCh2YWx1ZSkKICAgICAgICBlbGlmIGFjdGlvbiA9PSAiYXBwZW5kX2NvbnN0IjoKICAgICAgICAgICAgdmFsdWVzLmVuc3VyZV92YWx1ZShkZXN0LCBbXSkuYXBwZW5kKHNlbGYuY29uc3QpCiAgICAgICAgZWxpZiBhY3Rpb24gPT0gImNvdW50IjoKICAgICAgICAgICAgc2V0YXR0cih2YWx1ZXMsIGRlc3QsIHZhbHVlcy5lbnN1cmVfdmFsdWUoZGVzdCwgMCkgKyAxKQogICAgICAgIGVsaWYgYWN0aW9uID09ICJjYWxsYmFjayI6CiAgICAgICAgICAgIGFyZ3MgPSBzZWxmLmNhbGxiYWNrX2FyZ3Mgb3IgKCkKICAgICAgICAgICAga3dhcmdzID0gc2VsZi5jYWxsYmFja19rd2FyZ3Mgb3Ige30KICAgICAgICAgICAgc2VsZi5jYWxsYmFjayhzZWxmLCBvcHQsIHZhbHVlLCBwYXJzZXIsICphcmdzLCAqKmt3YXJncykKICAgICAgICBlbGlmIGFjdGlvbiA9PSAiaGVscCI6CiAgICAgICAgICAgIHBhcnNlci5wcmludF9oZWxwKCkKICAgICAgICAgICAgcGFyc2VyLmV4aXQoKQogICAgICAgIGVsaWYgYWN0aW9uID09ICJ2ZXJzaW9uIjoKICAgICAgICAgICAgcGFyc2VyLnByaW50X3ZlcnNpb24oKQogICAgICAgICAgICBwYXJzZXIuZXhpdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidW5rbm93biBhY3Rpb24gJXIiICUgc2VsZi5hY3Rpb24pCgogICAgICAgIHJldHVybiAxCgojIGNsYXNzIE9wdGlvbgoKClNVUFBSRVNTX0hFTFAgPSAiU1VQUFJFU1MiKyJIRUxQIgpTVVBQUkVTU19VU0FHRSA9ICJTVVBQUkVTUyIrIlVTQUdFIgoKY2xhc3MgVmFsdWVzOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkZWZhdWx0cz1Ob25lKToKICAgICAgICBpZiBkZWZhdWx0czoKICAgICAgICAgICAgZm9yIChhdHRyLCB2YWwpIGluIGRlZmF1bHRzLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIHZhbCkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc3RyKHNlbGYuX19kaWN0X18pCgogICAgX19yZXByX18gPSBfcmVwcgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIFZhbHVlcyk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9fZGljdF9fID09IG90aGVyLl9fZGljdF9fCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKG90aGVyLCBkaWN0KToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19kaWN0X18gPT0gb3RoZXIKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX3VwZGF0ZV9jYXJlZnVsKHNlbGYsIGRpY3QpOgogICAgICAgICIiIgogICAgICAgIFVwZGF0ZSB0aGUgb3B0aW9uIHZhbHVlcyBmcm9tIGFuIGFyYml0cmFyeSBkaWN0aW9uYXJ5LCBidXQgb25seQogICAgICAgIHVzZSBrZXlzIGZyb20gZGljdCB0aGF0IGFscmVhZHkgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlCiAgICAgICAgaW4gc2VsZi4gIEFueSBrZXlzIGluIGRpY3Qgd2l0aG91dCBhIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlCiAgICAgICAgYXJlIHNpbGVudGx5IGlnbm9yZWQuCiAgICAgICAgIiIiCiAgICAgICAgZm9yIGF0dHIgaW4gZGlyKHNlbGYpOgogICAgICAgICAgICBpZiBhdHRyIGluIGRpY3Q6CiAgICAgICAgICAgICAgICBkdmFsID0gZGljdFthdHRyXQogICAgICAgICAgICAgICAgaWYgZHZhbCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIGR2YWwpCgogICAgZGVmIF91cGRhdGVfbG9vc2Uoc2VsZiwgZGljdCk6CiAgICAgICAgIiIiCiAgICAgICAgVXBkYXRlIHRoZSBvcHRpb24gdmFsdWVzIGZyb20gYW4gYXJiaXRyYXJ5IGRpY3Rpb25hcnksCiAgICAgICAgdXNpbmcgYWxsIGtleXMgZnJvbSB0aGUgZGljdGlvbmFyeSByZWdhcmRsZXNzIG9mIHdoZXRoZXIKICAgICAgICB0aGV5IGhhdmUgYSBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZSBpbiBzZWxmIG9yIG5vdC4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9fZGljdF9fLnVwZGF0ZShkaWN0KQoKICAgIGRlZiBfdXBkYXRlKHNlbGYsIGRpY3QsIG1vZGUpOgogICAgICAgIGlmIG1vZGUgPT0gImNhcmVmdWwiOgogICAgICAgICAgICBzZWxmLl91cGRhdGVfY2FyZWZ1bChkaWN0KQogICAgICAgIGVsaWYgbW9kZSA9PSAibG9vc2UiOgogICAgICAgICAgICBzZWxmLl91cGRhdGVfbG9vc2UoZGljdCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIHVwZGF0ZSBtb2RlOiAlciIgJSBtb2RlKQoKICAgIGRlZiByZWFkX21vZHVsZShzZWxmLCBtb2RuYW1lLCBtb2RlPSJjYXJlZnVsIik6CiAgICAgICAgX19pbXBvcnRfXyhtb2RuYW1lKQogICAgICAgIG1vZCA9IHN5cy5tb2R1bGVzW21vZG5hbWVdCiAgICAgICAgc2VsZi5fdXBkYXRlKHZhcnMobW9kKSwgbW9kZSkKCiAgICBkZWYgcmVhZF9maWxlKHNlbGYsIGZpbGVuYW1lLCBtb2RlPSJjYXJlZnVsIik6CiAgICAgICAgdmFycyA9IHt9CiAgICAgICAgZXhlYyhvcGVuKGZpbGVuYW1lKS5yZWFkKCksIHZhcnMpCiAgICAgICAgc2VsZi5fdXBkYXRlKHZhcnMsIG1vZGUpCgogICAgZGVmIGVuc3VyZV92YWx1ZShzZWxmLCBhdHRyLCB2YWx1ZSk6CiAgICAgICAgaWYgbm90IGhhc2F0dHIoc2VsZiwgYXR0cikgb3IgZ2V0YXR0cihzZWxmLCBhdHRyKSBpcyBOb25lOgogICAgICAgICAgICBzZXRhdHRyKHNlbGYsIGF0dHIsIHZhbHVlKQogICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYsIGF0dHIpCgoKY2xhc3MgT3B0aW9uQ29udGFpbmVyOgoKICAgICIiIgogICAgQWJzdHJhY3QgYmFzZSBjbGFzcy4KCiAgICBDbGFzcyBhdHRyaWJ1dGVzOgogICAgICBzdGFuZGFyZF9vcHRpb25fbGlzdCA6IFtPcHRpb25dCiAgICAgICAgbGlzdCBvZiBzdGFuZGFyZCBvcHRpb25zIHRoYXQgd2lsbCBiZSBhY2NlcHRlZCBieSBhbGwgaW5zdGFuY2VzCiAgICAgICAgb2YgdGhpcyBwYXJzZXIgY2xhc3MgKGludGVuZGVkIHRvIGJlIG92ZXJyaWRkZW4gYnkgc3ViY2xhc3NlcykuCgogICAgSW5zdGFuY2UgYXR0cmlidXRlczoKICAgICAgb3B0aW9uX2xpc3QgOiBbT3B0aW9uXQogICAgICAgIHRoZSBsaXN0IG9mIE9wdGlvbiBvYmplY3RzIGNvbnRhaW5lZCBieSB0aGlzIE9wdGlvbkNvbnRhaW5lcgogICAgICBfc2hvcnRfb3B0IDogeyBzdHJpbmcgOiBPcHRpb24gfQogICAgICAgIGRpY3Rpb25hcnkgbWFwcGluZyBzaG9ydCBvcHRpb24gc3RyaW5ncywgZWcuICItZiIgb3IgIi1YIiwKICAgICAgICB0byB0aGUgT3B0aW9uIGluc3RhbmNlcyB0aGF0IGltcGxlbWVudCB0aGVtLiAgSWYgYW4gT3B0aW9uCiAgICAgICAgaGFzIG11bHRpcGxlIHNob3J0IG9wdGlvbiBzdHJpbmdzLCBpdCB3aWxsIGFwcGVhcnMgaW4gdGhpcwogICAgICAgIGRpY3Rpb25hcnkgbXVsdGlwbGUgdGltZXMuIFsxXQogICAgICBfbG9uZ19vcHQgOiB7IHN0cmluZyA6IE9wdGlvbiB9CiAgICAgICAgZGljdGlvbmFyeSBtYXBwaW5nIGxvbmcgb3B0aW9uIHN0cmluZ3MsIGVnLiAiLS1maWxlIiBvcgogICAgICAgICItLWV4Y2x1ZGUiLCB0byB0aGUgT3B0aW9uIGluc3RhbmNlcyB0aGF0IGltcGxlbWVudCB0aGVtLgogICAgICAgIEFnYWluLCBhIGdpdmVuIE9wdGlvbiBjYW4gb2NjdXIgbXVsdGlwbGUgdGltZXMgaW4gdGhpcwogICAgICAgIGRpY3Rpb25hcnkuIFsxXQogICAgICBkZWZhdWx0cyA6IHsgc3RyaW5nIDogYW55IH0KICAgICAgICBkaWN0aW9uYXJ5IG1hcHBpbmcgb3B0aW9uIGRlc3RpbmF0aW9uIG5hbWVzIHRvIGRlZmF1bHQKICAgICAgICB2YWx1ZXMgZm9yIGVhY2ggZGVzdGluYXRpb24gWzFdCgogICAgWzFdIFRoZXNlIG1hcHBpbmdzIGFyZSBjb21tb24gdG8gKHNoYXJlZCBieSkgYWxsIGNvbXBvbmVudHMgb2YgdGhlCiAgICAgICAgY29udHJvbGxpbmcgT3B0aW9uUGFyc2VyLCB3aGVyZSB0aGV5IGFyZSBpbml0aWFsbHkgY3JlYXRlZC4KCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgb3B0aW9uX2NsYXNzLCBjb25mbGljdF9oYW5kbGVyLCBkZXNjcmlwdGlvbik6CiAgICAgICAgIyBJbml0aWFsaXplIHRoZSBvcHRpb24gbGlzdCBhbmQgcmVsYXRlZCBkYXRhIHN0cnVjdHVyZXMuCiAgICAgICAgIyBUaGlzIG1ldGhvZCBtdXN0IGJlIHByb3ZpZGVkIGJ5IHN1YmNsYXNzZXMsIGFuZCBpdCBtdXN0CiAgICAgICAgIyBpbml0aWFsaXplIGF0IGxlYXN0IHRoZSBmb2xsb3dpbmcgaW5zdGFuY2UgYXR0cmlidXRlczoKICAgICAgICAjIG9wdGlvbl9saXN0LCBfc2hvcnRfb3B0LCBfbG9uZ19vcHQsIGRlZmF1bHRzLgogICAgICAgIHNlbGYuX2NyZWF0ZV9vcHRpb25fbGlzdCgpCgogICAgICAgIHNlbGYub3B0aW9uX2NsYXNzID0gb3B0aW9uX2NsYXNzCiAgICAgICAgc2VsZi5zZXRfY29uZmxpY3RfaGFuZGxlcihjb25mbGljdF9oYW5kbGVyKQogICAgICAgIHNlbGYuc2V0X2Rlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKQoKICAgIGRlZiBfY3JlYXRlX29wdGlvbl9tYXBwaW5ncyhzZWxmKToKICAgICAgICAjIEZvciB1c2UgYnkgT3B0aW9uUGFyc2VyIGNvbnN0cnVjdG9yIC0tIGNyZWF0ZSB0aGUgbWFzdGVyCiAgICAgICAgIyBvcHRpb24gbWFwcGluZ3MgdXNlZCBieSB0aGlzIE9wdGlvblBhcnNlciBhbmQgYWxsCiAgICAgICAgIyBPcHRpb25Hcm91cHMgdGhhdCBpdCBvd25zLgogICAgICAgIHNlbGYuX3Nob3J0X29wdCA9IHt9ICAgICAgICAgICAgIyBzaW5nbGUgbGV0dGVyIC0+IE9wdGlvbiBpbnN0YW5jZQogICAgICAgIHNlbGYuX2xvbmdfb3B0ID0ge30gICAgICAgICAgICAgIyBsb25nIG9wdGlvbiAtPiBPcHRpb24gaW5zdGFuY2UKICAgICAgICBzZWxmLmRlZmF1bHRzID0ge30gICAgICAgICAgICAgICMgbWFwcyBvcHRpb24gZGVzdCAtPiBkZWZhdWx0IHZhbHVlCgoKICAgIGRlZiBfc2hhcmVfb3B0aW9uX21hcHBpbmdzKHNlbGYsIHBhcnNlcik6CiAgICAgICAgIyBGb3IgdXNlIGJ5IE9wdGlvbkdyb3VwIGNvbnN0cnVjdG9yIC0tIHVzZSBzaGFyZWQgb3B0aW9uCiAgICAgICAgIyBtYXBwaW5ncyBmcm9tIHRoZSBPcHRpb25QYXJzZXIgdGhhdCBvd25zIHRoaXMgT3B0aW9uR3JvdXAuCiAgICAgICAgc2VsZi5fc2hvcnRfb3B0ID0gcGFyc2VyLl9zaG9ydF9vcHQKICAgICAgICBzZWxmLl9sb25nX29wdCA9IHBhcnNlci5fbG9uZ19vcHQKICAgICAgICBzZWxmLmRlZmF1bHRzID0gcGFyc2VyLmRlZmF1bHRzCgogICAgZGVmIHNldF9jb25mbGljdF9oYW5kbGVyKHNlbGYsIGhhbmRsZXIpOgogICAgICAgIGlmIGhhbmRsZXIgbm90IGluICgiZXJyb3IiLCAicmVzb2x2ZSIpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJpbnZhbGlkIGNvbmZsaWN0X3Jlc29sdXRpb24gdmFsdWUgJXIiICUgaGFuZGxlcikKICAgICAgICBzZWxmLmNvbmZsaWN0X2hhbmRsZXIgPSBoYW5kbGVyCgogICAgZGVmIHNldF9kZXNjcmlwdGlvbihzZWxmLCBkZXNjcmlwdGlvbik6CiAgICAgICAgc2VsZi5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uCgogICAgZGVmIGdldF9kZXNjcmlwdGlvbihzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5kZXNjcmlwdGlvbgoKCiAgICBkZWYgZGVzdHJveShzZWxmKToKICAgICAgICAiIiJzZWUgT3B0aW9uUGFyc2VyLmRlc3Ryb3koKS4iIiIKICAgICAgICBkZWwgc2VsZi5fc2hvcnRfb3B0CiAgICAgICAgZGVsIHNlbGYuX2xvbmdfb3B0CiAgICAgICAgZGVsIHNlbGYuZGVmYXVsdHMKCgogICAgIyAtLSBPcHRpb24tYWRkaW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX2NoZWNrX2NvbmZsaWN0KHNlbGYsIG9wdGlvbik6CiAgICAgICAgY29uZmxpY3Rfb3B0cyA9IFtdCiAgICAgICAgZm9yIG9wdCBpbiBvcHRpb24uX3Nob3J0X29wdHM6CiAgICAgICAgICAgIGlmIG9wdCBpbiBzZWxmLl9zaG9ydF9vcHQ6CiAgICAgICAgICAgICAgICBjb25mbGljdF9vcHRzLmFwcGVuZCgob3B0LCBzZWxmLl9zaG9ydF9vcHRbb3B0XSkpCiAgICAgICAgZm9yIG9wdCBpbiBvcHRpb24uX2xvbmdfb3B0czoKICAgICAgICAgICAgaWYgb3B0IGluIHNlbGYuX2xvbmdfb3B0OgogICAgICAgICAgICAgICAgY29uZmxpY3Rfb3B0cy5hcHBlbmQoKG9wdCwgc2VsZi5fbG9uZ19vcHRbb3B0XSkpCgogICAgICAgIGlmIGNvbmZsaWN0X29wdHM6CiAgICAgICAgICAgIGhhbmRsZXIgPSBzZWxmLmNvbmZsaWN0X2hhbmRsZXIKICAgICAgICAgICAgaWYgaGFuZGxlciA9PSAiZXJyb3IiOgogICAgICAgICAgICAgICAgcmFpc2UgT3B0aW9uQ29uZmxpY3RFcnJvcigKICAgICAgICAgICAgICAgICAgICAiY29uZmxpY3Rpbmcgb3B0aW9uIHN0cmluZyhzKTogJXMiCiAgICAgICAgICAgICAgICAgICAgJSAiLCAiLmpvaW4oW2NvWzBdIGZvciBjbyBpbiBjb25mbGljdF9vcHRzXSksCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uKQogICAgICAgICAgICBlbGlmIGhhbmRsZXIgPT0gInJlc29sdmUiOgogICAgICAgICAgICAgICAgZm9yIChvcHQsIGNfb3B0aW9uKSBpbiBjb25mbGljdF9vcHRzOgogICAgICAgICAgICAgICAgICAgIGlmIG9wdC5zdGFydHN3aXRoKCItLSIpOgogICAgICAgICAgICAgICAgICAgICAgICBjX29wdGlvbi5fbG9uZ19vcHRzLnJlbW92ZShvcHQpCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLl9sb25nX29wdFtvcHRdCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgY19vcHRpb24uX3Nob3J0X29wdHMucmVtb3ZlKG9wdCkKICAgICAgICAgICAgICAgICAgICAgICAgZGVsIHNlbGYuX3Nob3J0X29wdFtvcHRdCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IChjX29wdGlvbi5fc2hvcnRfb3B0cyBvciBjX29wdGlvbi5fbG9uZ19vcHRzKToKICAgICAgICAgICAgICAgICAgICAgICAgY19vcHRpb24uY29udGFpbmVyLm9wdGlvbl9saXN0LnJlbW92ZShjX29wdGlvbikKCiAgICBkZWYgYWRkX29wdGlvbihzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgICIiImFkZF9vcHRpb24oT3B0aW9uKQogICAgICAgICAgIGFkZF9vcHRpb24ob3B0X3N0ciwgLi4uLCBrd2FyZz12YWwsIC4uLikKICAgICAgICAiIiIKICAgICAgICBpZiBpc2luc3RhbmNlKGFyZ3NbMF0sIHN0cik6CiAgICAgICAgICAgIG9wdGlvbiA9IHNlbGYub3B0aW9uX2NsYXNzKCphcmdzLCAqKmt3YXJncykKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAxIGFuZCBub3Qga3dhcmdzOgogICAgICAgICAgICBvcHRpb24gPSBhcmdzWzBdCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG9wdGlvbiwgT3B0aW9uKToKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibm90IGFuIE9wdGlvbiBpbnN0YW5jZTogJXIiICUgb3B0aW9uKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW52YWxpZCBhcmd1bWVudHMiKQoKICAgICAgICBzZWxmLl9jaGVja19jb25mbGljdChvcHRpb24pCgogICAgICAgIHNlbGYub3B0aW9uX2xpc3QuYXBwZW5kKG9wdGlvbikKICAgICAgICBvcHRpb24uY29udGFpbmVyID0gc2VsZgogICAgICAgIGZvciBvcHQgaW4gb3B0aW9uLl9zaG9ydF9vcHRzOgogICAgICAgICAgICBzZWxmLl9zaG9ydF9vcHRbb3B0XSA9IG9wdGlvbgogICAgICAgIGZvciBvcHQgaW4gb3B0aW9uLl9sb25nX29wdHM6CiAgICAgICAgICAgIHNlbGYuX2xvbmdfb3B0W29wdF0gPSBvcHRpb24KCiAgICAgICAgaWYgb3B0aW9uLmRlc3QgaXMgbm90IE5vbmU6ICAgICAjIG9wdGlvbiBoYXMgYSBkZXN0LCB3ZSBuZWVkIGEgZGVmYXVsdAogICAgICAgICAgICBpZiBvcHRpb24uZGVmYXVsdCBpcyBub3QgTk9fREVGQVVMVDoKICAgICAgICAgICAgICAgIHNlbGYuZGVmYXVsdHNbb3B0aW9uLmRlc3RdID0gb3B0aW9uLmRlZmF1bHQKICAgICAgICAgICAgZWxpZiBvcHRpb24uZGVzdCBub3QgaW4gc2VsZi5kZWZhdWx0czoKICAgICAgICAgICAgICAgIHNlbGYuZGVmYXVsdHNbb3B0aW9uLmRlc3RdID0gTm9uZQoKICAgICAgICByZXR1cm4gb3B0aW9uCgogICAgZGVmIGFkZF9vcHRpb25zKHNlbGYsIG9wdGlvbl9saXN0KToKICAgICAgICBmb3Igb3B0aW9uIGluIG9wdGlvbl9saXN0OgogICAgICAgICAgICBzZWxmLmFkZF9vcHRpb24ob3B0aW9uKQoKICAgICMgLS0gT3B0aW9uIHF1ZXJ5L3JlbW92YWwgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGdldF9vcHRpb24oc2VsZiwgb3B0X3N0cik6CiAgICAgICAgcmV0dXJuIChzZWxmLl9zaG9ydF9vcHQuZ2V0KG9wdF9zdHIpIG9yCiAgICAgICAgICAgICAgICBzZWxmLl9sb25nX29wdC5nZXQob3B0X3N0cikpCgogICAgZGVmIGhhc19vcHRpb24oc2VsZiwgb3B0X3N0cik6CiAgICAgICAgcmV0dXJuIChvcHRfc3RyIGluIHNlbGYuX3Nob3J0X29wdCBvcgogICAgICAgICAgICAgICAgb3B0X3N0ciBpbiBzZWxmLl9sb25nX29wdCkKCiAgICBkZWYgcmVtb3ZlX29wdGlvbihzZWxmLCBvcHRfc3RyKToKICAgICAgICBvcHRpb24gPSBzZWxmLl9zaG9ydF9vcHQuZ2V0KG9wdF9zdHIpCiAgICAgICAgaWYgb3B0aW9uIGlzIE5vbmU6CiAgICAgICAgICAgIG9wdGlvbiA9IHNlbGYuX2xvbmdfb3B0LmdldChvcHRfc3RyKQogICAgICAgIGlmIG9wdGlvbiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJubyBzdWNoIG9wdGlvbiAlciIgJSBvcHRfc3RyKQoKICAgICAgICBmb3Igb3B0IGluIG9wdGlvbi5fc2hvcnRfb3B0czoKICAgICAgICAgICAgZGVsIHNlbGYuX3Nob3J0X29wdFtvcHRdCiAgICAgICAgZm9yIG9wdCBpbiBvcHRpb24uX2xvbmdfb3B0czoKICAgICAgICAgICAgZGVsIHNlbGYuX2xvbmdfb3B0W29wdF0KICAgICAgICBvcHRpb24uY29udGFpbmVyLm9wdGlvbl9saXN0LnJlbW92ZShvcHRpb24pCgoKICAgICMgLS0gSGVscC1mb3JtYXR0aW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGZvcm1hdF9vcHRpb25faGVscChzZWxmLCBmb3JtYXR0ZXIpOgogICAgICAgIGlmIG5vdCBzZWxmLm9wdGlvbl9saXN0OgogICAgICAgICAgICByZXR1cm4gIiIKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIGZvciBvcHRpb24gaW4gc2VsZi5vcHRpb25fbGlzdDoKICAgICAgICAgICAgaWYgbm90IG9wdGlvbi5oZWxwIGlzIFNVUFBSRVNTX0hFTFA6CiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGZvcm1hdHRlci5mb3JtYXRfb3B0aW9uKG9wdGlvbikpCiAgICAgICAgcmV0dXJuICIiLmpvaW4ocmVzdWx0KQoKICAgIGRlZiBmb3JtYXRfZGVzY3JpcHRpb24oc2VsZiwgZm9ybWF0dGVyKToKICAgICAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdF9kZXNjcmlwdGlvbihzZWxmLmdldF9kZXNjcmlwdGlvbigpKQoKICAgIGRlZiBmb3JtYXRfaGVscChzZWxmLCBmb3JtYXR0ZXIpOgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaWYgc2VsZi5kZXNjcmlwdGlvbjoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChzZWxmLmZvcm1hdF9kZXNjcmlwdGlvbihmb3JtYXR0ZXIpKQogICAgICAgIGlmIHNlbGYub3B0aW9uX2xpc3Q6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoc2VsZi5mb3JtYXRfb3B0aW9uX2hlbHAoZm9ybWF0dGVyKSkKICAgICAgICByZXR1cm4gIlxuIi5qb2luKHJlc3VsdCkKCgpjbGFzcyBPcHRpb25Hcm91cCAoT3B0aW9uQ29udGFpbmVyKToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcGFyc2VyLCB0aXRsZSwgZGVzY3JpcHRpb249Tm9uZSk6CiAgICAgICAgc2VsZi5wYXJzZXIgPSBwYXJzZXIKICAgICAgICBPcHRpb25Db250YWluZXIuX19pbml0X18oCiAgICAgICAgICAgIHNlbGYsIHBhcnNlci5vcHRpb25fY2xhc3MsIHBhcnNlci5jb25mbGljdF9oYW5kbGVyLCBkZXNjcmlwdGlvbikKICAgICAgICBzZWxmLnRpdGxlID0gdGl0bGUKCiAgICBkZWYgX2NyZWF0ZV9vcHRpb25fbGlzdChzZWxmKToKICAgICAgICBzZWxmLm9wdGlvbl9saXN0ID0gW10KICAgICAgICBzZWxmLl9zaGFyZV9vcHRpb25fbWFwcGluZ3Moc2VsZi5wYXJzZXIpCgogICAgZGVmIHNldF90aXRsZShzZWxmLCB0aXRsZSk6CiAgICAgICAgc2VsZi50aXRsZSA9IHRpdGxlCgogICAgZGVmIGRlc3Ryb3koc2VsZik6CiAgICAgICAgIiIic2VlIE9wdGlvblBhcnNlci5kZXN0cm95KCkuIiIiCiAgICAgICAgT3B0aW9uQ29udGFpbmVyLmRlc3Ryb3koc2VsZikKICAgICAgICBkZWwgc2VsZi5vcHRpb25fbGlzdAoKICAgICMgLS0gSGVscC1mb3JtYXR0aW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGZvcm1hdF9oZWxwKHNlbGYsIGZvcm1hdHRlcik6CiAgICAgICAgcmVzdWx0ID0gZm9ybWF0dGVyLmZvcm1hdF9oZWFkaW5nKHNlbGYudGl0bGUpCiAgICAgICAgZm9ybWF0dGVyLmluZGVudCgpCiAgICAgICAgcmVzdWx0ICs9IE9wdGlvbkNvbnRhaW5lci5mb3JtYXRfaGVscChzZWxmLCBmb3JtYXR0ZXIpCiAgICAgICAgZm9ybWF0dGVyLmRlZGVudCgpCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKCmNsYXNzIE9wdGlvblBhcnNlciAoT3B0aW9uQ29udGFpbmVyKToKCiAgICAiIiIKICAgIENsYXNzIGF0dHJpYnV0ZXM6CiAgICAgIHN0YW5kYXJkX29wdGlvbl9saXN0IDogW09wdGlvbl0KICAgICAgICBsaXN0IG9mIHN0YW5kYXJkIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGFjY2VwdGVkIGJ5IGFsbCBpbnN0YW5jZXMKICAgICAgICBvZiB0aGlzIHBhcnNlciBjbGFzcyAoaW50ZW5kZWQgdG8gYmUgb3ZlcnJpZGRlbiBieSBzdWJjbGFzc2VzKS4KCiAgICBJbnN0YW5jZSBhdHRyaWJ1dGVzOgogICAgICB1c2FnZSA6IHN0cmluZwogICAgICAgIGEgdXNhZ2Ugc3RyaW5nIGZvciB5b3VyIHByb2dyYW0uICBCZWZvcmUgaXQgaXMgZGlzcGxheWVkCiAgICAgICAgdG8gdGhlIHVzZXIsICIlcHJvZyIgd2lsbCBiZSBleHBhbmRlZCB0byB0aGUgbmFtZSBvZgogICAgICAgIHlvdXIgcHJvZ3JhbSAoc2VsZi5wcm9nIG9yIG9zLnBhdGguYmFzZW5hbWUoc3lzLmFyZ3ZbMF0pKS4KICAgICAgcHJvZyA6IHN0cmluZwogICAgICAgIHRoZSBuYW1lIG9mIHRoZSBjdXJyZW50IHByb2dyYW0gKHRvIG92ZXJyaWRlCiAgICAgICAgb3MucGF0aC5iYXNlbmFtZShzeXMuYXJndlswXSkpLgogICAgICBkZXNjcmlwdGlvbiA6IHN0cmluZwogICAgICAgIEEgcGFyYWdyYXBoIG9mIHRleHQgZ2l2aW5nIGEgYnJpZWYgb3ZlcnZpZXcgb2YgeW91ciBwcm9ncmFtLgogICAgICAgIG9wdHBhcnNlIHJlZm9ybWF0cyB0aGlzIHBhcmFncmFwaCB0byBmaXQgdGhlIGN1cnJlbnQgdGVybWluYWwKICAgICAgICB3aWR0aCBhbmQgcHJpbnRzIGl0IHdoZW4gdGhlIHVzZXIgcmVxdWVzdHMgaGVscCAoYWZ0ZXIgdXNhZ2UsCiAgICAgICAgYnV0IGJlZm9yZSB0aGUgbGlzdCBvZiBvcHRpb25zKS4KICAgICAgZXBpbG9nIDogc3RyaW5nCiAgICAgICAgcGFyYWdyYXBoIG9mIGhlbHAgdGV4dCB0byBwcmludCBhZnRlciBvcHRpb24gaGVscAoKICAgICAgb3B0aW9uX2dyb3VwcyA6IFtPcHRpb25Hcm91cF0KICAgICAgICBsaXN0IG9mIG9wdGlvbiBncm91cHMgaW4gdGhpcyBwYXJzZXIgKG9wdGlvbiBncm91cHMgYXJlCiAgICAgICAgaXJyZWxldmFudCBmb3IgcGFyc2luZyB0aGUgY29tbWFuZC1saW5lLCBidXQgdmVyeSB1c2VmdWwKICAgICAgICBmb3IgZ2VuZXJhdGluZyBoZWxwKQoKICAgICAgYWxsb3dfaW50ZXJzcGVyc2VkX2FyZ3MgOiBib29sID0gdHJ1ZQogICAgICAgIGlmIHRydWUsIHBvc2l0aW9uYWwgYXJndW1lbnRzIG1heSBiZSBpbnRlcnNwZXJzZWQgd2l0aCBvcHRpb25zLgogICAgICAgIEFzc3VtaW5nIC1hIGFuZCAtYiBlYWNoIHRha2UgYSBzaW5nbGUgYXJndW1lbnQsIHRoZSBjb21tYW5kLWxpbmUKICAgICAgICAgIC1hYmxhaCBmb28gYmFyIC1iYm9vIGJhegogICAgICAgIHdpbGwgYmUgaW50ZXJwcmV0ZWQgdGhlIHNhbWUgYXMKICAgICAgICAgIC1hYmxhaCAtYmJvbyAtLSBmb28gYmFyIGJhegogICAgICAgIElmIHRoaXMgZmxhZyB3ZXJlIGZhbHNlLCB0aGF0IGNvbW1hbmQgbGluZSB3b3VsZCBiZSBpbnRlcnByZXRlZCBhcwogICAgICAgICAgLWFibGFoIC0tIGZvbyBiYXIgLWJib28gYmF6CiAgICAgICAgLS0gaWUuIHdlIHN0b3AgcHJvY2Vzc2luZyBvcHRpb25zIGFzIHNvb24gYXMgd2Ugc2VlIHRoZSBmaXJzdAogICAgICAgIG5vbi1vcHRpb24gYXJndW1lbnQuICAoVGhpcyBpcyB0aGUgdHJhZGl0aW9uIGZvbGxvd2VkIGJ5CiAgICAgICAgUHl0aG9uJ3MgZ2V0b3B0IG1vZHVsZSwgUGVybCdzIEdldG9wdDo6U3RkLCBhbmQgb3RoZXIgYXJndW1lbnQtCiAgICAgICAgcGFyc2luZyBsaWJyYXJpZXMsIGJ1dCBpdCBpcyBnZW5lcmFsbHkgYW5ub3lpbmcgdG8gdXNlcnMuKQoKICAgICAgcHJvY2Vzc19kZWZhdWx0X3ZhbHVlcyA6IGJvb2wgPSB0cnVlCiAgICAgICAgaWYgdHJ1ZSwgb3B0aW9uIGRlZmF1bHQgdmFsdWVzIGFyZSBwcm9jZXNzZWQgc2ltaWxhcmx5IHRvIG9wdGlvbgogICAgICAgIHZhbHVlcyBmcm9tIHRoZSBjb21tYW5kIGxpbmU6IHRoYXQgaXMsIHRoZXkgYXJlIHBhc3NlZCB0byB0aGUKICAgICAgICB0eXBlLWNoZWNraW5nIGZ1bmN0aW9uIGZvciB0aGUgb3B0aW9uJ3MgdHlwZSAoYXMgbG9uZyBhcyB0aGUKICAgICAgICBkZWZhdWx0IHZhbHVlIGlzIGEgc3RyaW5nKS4gIChUaGlzIHJlYWxseSBvbmx5IG1hdHRlcnMgaWYgeW91CiAgICAgICAgaGF2ZSBkZWZpbmVkIGN1c3RvbSB0eXBlczsgc2VlIFNGIGJ1ZyAjOTU1ODg5LikgIFNldCBpdCB0byBmYWxzZQogICAgICAgIHRvIHJlc3RvcmUgdGhlIGJlaGF2aW91ciBvZiBPcHRpayAxLjQuMSBhbmQgZWFybGllci4KCiAgICAgIHJhcmdzIDogW3N0cmluZ10KICAgICAgICB0aGUgYXJndW1lbnQgbGlzdCBjdXJyZW50bHkgYmVpbmcgcGFyc2VkLiAgT25seSBzZXQgd2hlbgogICAgICAgIHBhcnNlX2FyZ3MoKSBpcyBhY3RpdmUsIGFuZCBjb250aW51YWxseSB0cmltbWVkIGRvd24gYXMKICAgICAgICB3ZSBjb25zdW1lIGFyZ3VtZW50cy4gIE1haW5seSB0aGVyZSBmb3IgdGhlIGJlbmVmaXQgb2YKICAgICAgICBjYWxsYmFjayBvcHRpb25zLgogICAgICBsYXJncyA6IFtzdHJpbmddCiAgICAgICAgdGhlIGxpc3Qgb2YgbGVmdG92ZXIgYXJndW1lbnRzIHRoYXQgd2UgaGF2ZSBza2lwcGVkIHdoaWxlCiAgICAgICAgcGFyc2luZyBvcHRpb25zLiAgSWYgYWxsb3dfaW50ZXJzcGVyc2VkX2FyZ3MgaXMgZmFsc2UsIHRoaXMKICAgICAgICBsaXN0IGlzIGFsd2F5cyBlbXB0eS4KICAgICAgdmFsdWVzIDogVmFsdWVzCiAgICAgICAgdGhlIHNldCBvZiBvcHRpb24gdmFsdWVzIGN1cnJlbnRseSBiZWluZyBhY2N1bXVsYXRlZC4gIE9ubHkKICAgICAgICBzZXQgd2hlbiBwYXJzZV9hcmdzKCkgaXMgYWN0aXZlLiAgQWxzbyBtYWlubHkgZm9yIGNhbGxiYWNrcy4KCiAgICBCZWNhdXNlIG9mIHRoZSAncmFyZ3MnLCAnbGFyZ3MnLCBhbmQgJ3ZhbHVlcycgYXR0cmlidXRlcywKICAgIE9wdGlvblBhcnNlciBpcyBub3QgdGhyZWFkLXNhZmUuICBJZiwgZm9yIHNvbWUgcGVydmVyc2UgcmVhc29uLCB5b3UKICAgIG5lZWQgdG8gcGFyc2UgY29tbWFuZC1saW5lIGFyZ3VtZW50cyBzaW11bHRhbmVvdXNseSBpbiBkaWZmZXJlbnQKICAgIHRocmVhZHMsIHVzZSBkaWZmZXJlbnQgT3B0aW9uUGFyc2VyIGluc3RhbmNlcy4KCiAgICAiIiIKCiAgICBzdGFuZGFyZF9vcHRpb25fbGlzdCA9IFtdCgogICAgZGVmIF9faW5pdF9fKHNlbGYsCiAgICAgICAgICAgICAgICAgdXNhZ2U9Tm9uZSwKICAgICAgICAgICAgICAgICBvcHRpb25fbGlzdD1Ob25lLAogICAgICAgICAgICAgICAgIG9wdGlvbl9jbGFzcz1PcHRpb24sCiAgICAgICAgICAgICAgICAgdmVyc2lvbj1Ob25lLAogICAgICAgICAgICAgICAgIGNvbmZsaWN0X2hhbmRsZXI9ImVycm9yIiwKICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj1Ob25lLAogICAgICAgICAgICAgICAgIGZvcm1hdHRlcj1Ob25lLAogICAgICAgICAgICAgICAgIGFkZF9oZWxwX29wdGlvbj1UcnVlLAogICAgICAgICAgICAgICAgIHByb2c9Tm9uZSwKICAgICAgICAgICAgICAgICBlcGlsb2c9Tm9uZSk6CiAgICAgICAgT3B0aW9uQ29udGFpbmVyLl9faW5pdF9fKAogICAgICAgICAgICBzZWxmLCBvcHRpb25fY2xhc3MsIGNvbmZsaWN0X2hhbmRsZXIsIGRlc2NyaXB0aW9uKQogICAgICAgIHNlbGYuc2V0X3VzYWdlKHVzYWdlKQogICAgICAgIHNlbGYucHJvZyA9IHByb2cKICAgICAgICBzZWxmLnZlcnNpb24gPSB2ZXJzaW9uCiAgICAgICAgc2VsZi5hbGxvd19pbnRlcnNwZXJzZWRfYXJncyA9IFRydWUKICAgICAgICBzZWxmLnByb2Nlc3NfZGVmYXVsdF92YWx1ZXMgPSBUcnVlCiAgICAgICAgaWYgZm9ybWF0dGVyIGlzIE5vbmU6CiAgICAgICAgICAgIGZvcm1hdHRlciA9IEluZGVudGVkSGVscEZvcm1hdHRlcigpCiAgICAgICAgc2VsZi5mb3JtYXR0ZXIgPSBmb3JtYXR0ZXIKICAgICAgICBzZWxmLmZvcm1hdHRlci5zZXRfcGFyc2VyKHNlbGYpCiAgICAgICAgc2VsZi5lcGlsb2cgPSBlcGlsb2cKCiAgICAgICAgIyBQb3B1bGF0ZSB0aGUgb3B0aW9uIGxpc3Q7IGluaXRpYWwgc291cmNlcyBhcmUgdGhlCiAgICAgICAgIyBzdGFuZGFyZF9vcHRpb25fbGlzdCBjbGFzcyBhdHRyaWJ1dGUsIHRoZSAnb3B0aW9uX2xpc3QnCiAgICAgICAgIyBhcmd1bWVudCwgYW5kIChpZiBhcHBsaWNhYmxlKSB0aGUgX2FkZF92ZXJzaW9uX29wdGlvbigpIGFuZAogICAgICAgICMgX2FkZF9oZWxwX29wdGlvbigpIG1ldGhvZHMuCiAgICAgICAgc2VsZi5fcG9wdWxhdGVfb3B0aW9uX2xpc3Qob3B0aW9uX2xpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkX2hlbHA9YWRkX2hlbHBfb3B0aW9uKQoKICAgICAgICBzZWxmLl9pbml0X3BhcnNpbmdfc3RhdGUoKQoKCiAgICBkZWYgZGVzdHJveShzZWxmKToKICAgICAgICAiIiIKICAgICAgICBEZWNsYXJlIHRoYXQgeW91IGFyZSBkb25lIHdpdGggdGhpcyBPcHRpb25QYXJzZXIuICBUaGlzIGNsZWFucyB1cAogICAgICAgIHJlZmVyZW5jZSBjeWNsZXMgc28gdGhlIE9wdGlvblBhcnNlciAoYW5kIGFsbCBvYmplY3RzIHJlZmVyZW5jZWQgYnkKICAgICAgICBpdCkgY2FuIGJlIGdhcmJhZ2UtY29sbGVjdGVkIHByb21wdGx5LiAgQWZ0ZXIgY2FsbGluZyBkZXN0cm95KCksIHRoZQogICAgICAgIE9wdGlvblBhcnNlciBpcyB1bnVzYWJsZS4KICAgICAgICAiIiIKICAgICAgICBPcHRpb25Db250YWluZXIuZGVzdHJveShzZWxmKQogICAgICAgIGZvciBncm91cCBpbiBzZWxmLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIGdyb3VwLmRlc3Ryb3koKQogICAgICAgIGRlbCBzZWxmLm9wdGlvbl9saXN0CiAgICAgICAgZGVsIHNlbGYub3B0aW9uX2dyb3VwcwogICAgICAgIGRlbCBzZWxmLmZvcm1hdHRlcgoKCiAgICAjIC0tIFByaXZhdGUgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyAodXNlZCBieSBvdXIgb3IgT3B0aW9uQ29udGFpbmVyJ3MgY29uc3RydWN0b3IpCgogICAgZGVmIF9jcmVhdGVfb3B0aW9uX2xpc3Qoc2VsZik6CiAgICAgICAgc2VsZi5vcHRpb25fbGlzdCA9IFtdCiAgICAgICAgc2VsZi5vcHRpb25fZ3JvdXBzID0gW10KICAgICAgICBzZWxmLl9jcmVhdGVfb3B0aW9uX21hcHBpbmdzKCkKCiAgICBkZWYgX2FkZF9oZWxwX29wdGlvbihzZWxmKToKICAgICAgICBzZWxmLmFkZF9vcHRpb24oIi1oIiwgIi0taGVscCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj0iaGVscCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9Xygic2hvdyB0aGlzIGhlbHAgbWVzc2FnZSBhbmQgZXhpdCIpKQoKICAgIGRlZiBfYWRkX3ZlcnNpb25fb3B0aW9uKHNlbGYpOgogICAgICAgIHNlbGYuYWRkX29wdGlvbigiLS12ZXJzaW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPSJ2ZXJzaW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgaGVscD1fKCJzaG93IHByb2dyYW0ncyB2ZXJzaW9uIG51bWJlciBhbmQgZXhpdCIpKQoKICAgIGRlZiBfcG9wdWxhdGVfb3B0aW9uX2xpc3Qoc2VsZiwgb3B0aW9uX2xpc3QsIGFkZF9oZWxwPVRydWUpOgogICAgICAgIGlmIHNlbGYuc3RhbmRhcmRfb3B0aW9uX2xpc3Q6CiAgICAgICAgICAgIHNlbGYuYWRkX29wdGlvbnMoc2VsZi5zdGFuZGFyZF9vcHRpb25fbGlzdCkKICAgICAgICBpZiBvcHRpb25fbGlzdDoKICAgICAgICAgICAgc2VsZi5hZGRfb3B0aW9ucyhvcHRpb25fbGlzdCkKICAgICAgICBpZiBzZWxmLnZlcnNpb246CiAgICAgICAgICAgIHNlbGYuX2FkZF92ZXJzaW9uX29wdGlvbigpCiAgICAgICAgaWYgYWRkX2hlbHA6CiAgICAgICAgICAgIHNlbGYuX2FkZF9oZWxwX29wdGlvbigpCgogICAgZGVmIF9pbml0X3BhcnNpbmdfc3RhdGUoc2VsZik6CiAgICAgICAgIyBUaGVzZSBhcmUgc2V0IGluIHBhcnNlX2FyZ3MoKSBmb3IgdGhlIGNvbnZlbmllbmNlIG9mIGNhbGxiYWNrcy4KICAgICAgICBzZWxmLnJhcmdzID0gTm9uZQogICAgICAgIHNlbGYubGFyZ3MgPSBOb25lCiAgICAgICAgc2VsZi52YWx1ZXMgPSBOb25lCgoKICAgICMgLS0gU2ltcGxlIG1vZGlmaWVyIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIHNldF91c2FnZShzZWxmLCB1c2FnZSk6CiAgICAgICAgaWYgdXNhZ2UgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi51c2FnZSA9IF8oIiVwcm9nIFtvcHRpb25zXSIpCiAgICAgICAgZWxpZiB1c2FnZSBpcyBTVVBQUkVTU19VU0FHRToKICAgICAgICAgICAgc2VsZi51c2FnZSA9IE5vbmUKICAgICAgICAjIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIE9wdGlrIDEuMyBhbmQgZWFybGllci4KICAgICAgICBlbGlmIHVzYWdlLmxvd2VyKCkuc3RhcnRzd2l0aCgidXNhZ2U6ICIpOgogICAgICAgICAgICBzZWxmLnVzYWdlID0gdXNhZ2VbNzpdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi51c2FnZSA9IHVzYWdlCgogICAgZGVmIGVuYWJsZV9pbnRlcnNwZXJzZWRfYXJncyhzZWxmKToKICAgICAgICAiIiJTZXQgcGFyc2luZyB0byBub3Qgc3RvcCBvbiB0aGUgZmlyc3Qgbm9uLW9wdGlvbiwgYWxsb3dpbmcKICAgICAgICBpbnRlcnNwZXJzaW5nIHN3aXRjaGVzIHdpdGggY29tbWFuZCBhcmd1bWVudHMuIFRoaXMgaXMgdGhlCiAgICAgICAgZGVmYXVsdCBiZWhhdmlvci4gU2VlIGFsc28gZGlzYWJsZV9pbnRlcnNwZXJzZWRfYXJncygpIGFuZCB0aGUKICAgICAgICBjbGFzcyBkb2N1bWVudGF0aW9uIGRlc2NyaXB0aW9uIG9mIHRoZSBhdHRyaWJ1dGUKICAgICAgICBhbGxvd19pbnRlcnNwZXJzZWRfYXJncy4iIiIKICAgICAgICBzZWxmLmFsbG93X2ludGVyc3BlcnNlZF9hcmdzID0gVHJ1ZQoKICAgIGRlZiBkaXNhYmxlX2ludGVyc3BlcnNlZF9hcmdzKHNlbGYpOgogICAgICAgICIiIlNldCBwYXJzaW5nIHRvIHN0b3Agb24gdGhlIGZpcnN0IG5vbi1vcHRpb24uIFVzZSB0aGlzIGlmCiAgICAgICAgeW91IGhhdmUgYSBjb21tYW5kIHByb2Nlc3NvciB3aGljaCBydW5zIGFub3RoZXIgY29tbWFuZCB0aGF0CiAgICAgICAgaGFzIG9wdGlvbnMgb2YgaXRzIG93biBhbmQgeW91IHdhbnQgdG8gbWFrZSBzdXJlIHRoZXNlIG9wdGlvbnMKICAgICAgICBkb24ndCBnZXQgY29uZnVzZWQuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5hbGxvd19pbnRlcnNwZXJzZWRfYXJncyA9IEZhbHNlCgogICAgZGVmIHNldF9wcm9jZXNzX2RlZmF1bHRfdmFsdWVzKHNlbGYsIHByb2Nlc3MpOgogICAgICAgIHNlbGYucHJvY2Vzc19kZWZhdWx0X3ZhbHVlcyA9IHByb2Nlc3MKCiAgICBkZWYgc2V0X2RlZmF1bHQoc2VsZiwgZGVzdCwgdmFsdWUpOgogICAgICAgIHNlbGYuZGVmYXVsdHNbZGVzdF0gPSB2YWx1ZQoKICAgIGRlZiBzZXRfZGVmYXVsdHMoc2VsZiwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuZGVmYXVsdHMudXBkYXRlKGt3YXJncykKCiAgICBkZWYgX2dldF9hbGxfb3B0aW9ucyhzZWxmKToKICAgICAgICBvcHRpb25zID0gc2VsZi5vcHRpb25fbGlzdFs6XQogICAgICAgIGZvciBncm91cCBpbiBzZWxmLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIG9wdGlvbnMuZXh0ZW5kKGdyb3VwLm9wdGlvbl9saXN0KQogICAgICAgIHJldHVybiBvcHRpb25zCgogICAgZGVmIGdldF9kZWZhdWx0X3ZhbHVlcyhzZWxmKToKICAgICAgICBpZiBub3Qgc2VsZi5wcm9jZXNzX2RlZmF1bHRfdmFsdWVzOgogICAgICAgICAgICAjIE9sZCwgcHJlLU9wdGlrIDEuNSBiZWhhdmlvdXIuCiAgICAgICAgICAgIHJldHVybiBWYWx1ZXMoc2VsZi5kZWZhdWx0cykKCiAgICAgICAgZGVmYXVsdHMgPSBzZWxmLmRlZmF1bHRzLmNvcHkoKQogICAgICAgIGZvciBvcHRpb24gaW4gc2VsZi5fZ2V0X2FsbF9vcHRpb25zKCk6CiAgICAgICAgICAgIGRlZmF1bHQgPSBkZWZhdWx0cy5nZXQob3B0aW9uLmRlc3QpCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZGVmYXVsdCwgc3RyKToKICAgICAgICAgICAgICAgIG9wdF9zdHIgPSBvcHRpb24uZ2V0X29wdF9zdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmYXVsdHNbb3B0aW9uLmRlc3RdID0gb3B0aW9uLmNoZWNrX3ZhbHVlKG9wdF9zdHIsIGRlZmF1bHQpCgogICAgICAgIHJldHVybiBWYWx1ZXMoZGVmYXVsdHMpCgoKICAgICMgLS0gT3B0aW9uR3JvdXAgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIGFkZF9vcHRpb25fZ3JvdXAoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAjIFhYWCBsb3RzIG9mIG92ZXJsYXAgd2l0aCBPcHRpb25Db250YWluZXIuYWRkX29wdGlvbigpCiAgICAgICAgaWYgaXNpbnN0YW5jZShhcmdzWzBdLCBzdHIpOgogICAgICAgICAgICBncm91cCA9IE9wdGlvbkdyb3VwKHNlbGYsICphcmdzLCAqKmt3YXJncykKICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAxIGFuZCBub3Qga3dhcmdzOgogICAgICAgICAgICBncm91cCA9IGFyZ3NbMF0KICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZ3JvdXAsIE9wdGlvbkdyb3VwKToKICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibm90IGFuIE9wdGlvbkdyb3VwIGluc3RhbmNlOiAlciIgJSBncm91cCkKICAgICAgICAgICAgaWYgZ3JvdXAucGFyc2VyIGlzIG5vdCBzZWxmOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaW52YWxpZCBPcHRpb25Hcm91cCAod3JvbmcgcGFyc2VyKSIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJpbnZhbGlkIGFyZ3VtZW50cyIpCgogICAgICAgIHNlbGYub3B0aW9uX2dyb3Vwcy5hcHBlbmQoZ3JvdXApCiAgICAgICAgcmV0dXJuIGdyb3VwCgogICAgZGVmIGdldF9vcHRpb25fZ3JvdXAoc2VsZiwgb3B0X3N0cik6CiAgICAgICAgb3B0aW9uID0gKHNlbGYuX3Nob3J0X29wdC5nZXQob3B0X3N0cikgb3IKICAgICAgICAgICAgICAgICAgc2VsZi5fbG9uZ19vcHQuZ2V0KG9wdF9zdHIpKQogICAgICAgIGlmIG9wdGlvbiBhbmQgb3B0aW9uLmNvbnRhaW5lciBpcyBub3Qgc2VsZjoKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5jb250YWluZXIKICAgICAgICByZXR1cm4gTm9uZQoKCiAgICAjIC0tIE9wdGlvbi1wYXJzaW5nIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfZ2V0X2FyZ3Moc2VsZiwgYXJncyk6CiAgICAgICAgaWYgYXJncyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gc3lzLmFyZ3ZbMTpdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGFyZ3NbOl0gICAgICAgICAgICAgICMgZG9uJ3QgbW9kaWZ5IGNhbGxlcidzIGxpc3QKCiAgICBkZWYgcGFyc2VfYXJncyhzZWxmLCBhcmdzPU5vbmUsIHZhbHVlcz1Ob25lKToKICAgICAgICAiIiIKICAgICAgICBwYXJzZV9hcmdzKGFyZ3MgOiBbc3RyaW5nXSA9IHN5cy5hcmd2WzE6XSwKICAgICAgICAgICAgICAgICAgIHZhbHVlcyA6IFZhbHVlcyA9IE5vbmUpCiAgICAgICAgLT4gKHZhbHVlcyA6IFZhbHVlcywgYXJncyA6IFtzdHJpbmddKQoKICAgICAgICBQYXJzZSB0aGUgY29tbWFuZC1saW5lIG9wdGlvbnMgZm91bmQgaW4gJ2FyZ3MnIChkZWZhdWx0OgogICAgICAgIHN5cy5hcmd2WzE6XSkuICBBbnkgZXJyb3JzIHJlc3VsdCBpbiBhIGNhbGwgdG8gJ2Vycm9yKCknLCB3aGljaAogICAgICAgIGJ5IGRlZmF1bHQgcHJpbnRzIHRoZSB1c2FnZSBtZXNzYWdlIHRvIHN0ZGVyciBhbmQgY2FsbHMKICAgICAgICBzeXMuZXhpdCgpIHdpdGggYW4gZXJyb3IgbWVzc2FnZS4gIE9uIHN1Y2Nlc3MgcmV0dXJucyBhIHBhaXIKICAgICAgICAodmFsdWVzLCBhcmdzKSB3aGVyZSAndmFsdWVzJyBpcyBhbiBWYWx1ZXMgaW5zdGFuY2UgKHdpdGggYWxsCiAgICAgICAgeW91ciBvcHRpb24gdmFsdWVzKSBhbmQgJ2FyZ3MnIGlzIHRoZSBsaXN0IG9mIGFyZ3VtZW50cyBsZWZ0CiAgICAgICAgb3ZlciBhZnRlciBwYXJzaW5nIG9wdGlvbnMuCiAgICAgICAgIiIiCiAgICAgICAgcmFyZ3MgPSBzZWxmLl9nZXRfYXJncyhhcmdzKQogICAgICAgIGlmIHZhbHVlcyBpcyBOb25lOgogICAgICAgICAgICB2YWx1ZXMgPSBzZWxmLmdldF9kZWZhdWx0X3ZhbHVlcygpCgogICAgICAgICMgU3RvcmUgdGhlIGhhbHZlcyBvZiB0aGUgYXJndW1lbnQgbGlzdCBhcyBhdHRyaWJ1dGVzIGZvciB0aGUKICAgICAgICAjIGNvbnZlbmllbmNlIG9mIGNhbGxiYWNrczoKICAgICAgICAjICAgcmFyZ3MKICAgICAgICAjICAgICB0aGUgcmVzdCBvZiB0aGUgY29tbWFuZC1saW5lICh0aGUgInIiIHN0YW5kcyBmb3IKICAgICAgICAjICAgICAicmVtYWluaW5nIiBvciAicmlnaHQtaGFuZCIpCiAgICAgICAgIyAgIGxhcmdzCiAgICAgICAgIyAgICAgdGhlIGxlZnRvdmVyIGFyZ3VtZW50cyAtLSBpZS4gd2hhdCdzIGxlZnQgYWZ0ZXIgcmVtb3ZpbmcKICAgICAgICAjICAgICBvcHRpb25zIGFuZCB0aGVpciBhcmd1bWVudHMgKHRoZSAibCIgc3RhbmRzIGZvciAibGVmdG92ZXIiCiAgICAgICAgIyAgICAgb3IgImxlZnQtaGFuZCIpCiAgICAgICAgc2VsZi5yYXJncyA9IHJhcmdzCiAgICAgICAgc2VsZi5sYXJncyA9IGxhcmdzID0gW10KICAgICAgICBzZWxmLnZhbHVlcyA9IHZhbHVlcwoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHN0b3AgPSBzZWxmLl9wcm9jZXNzX2FyZ3MobGFyZ3MsIHJhcmdzLCB2YWx1ZXMpCiAgICAgICAgZXhjZXB0IChCYWRPcHRpb25FcnJvciwgT3B0aW9uVmFsdWVFcnJvcikgYXMgZXJyOgogICAgICAgICAgICBzZWxmLmVycm9yKHN0cihlcnIpKQoKICAgICAgICBhcmdzID0gbGFyZ3MgKyByYXJncwogICAgICAgIHJldHVybiBzZWxmLmNoZWNrX3ZhbHVlcyh2YWx1ZXMsIGFyZ3MpCgogICAgZGVmIGNoZWNrX3ZhbHVlcyhzZWxmLCB2YWx1ZXMsIGFyZ3MpOgogICAgICAgICIiIgogICAgICAgIGNoZWNrX3ZhbHVlcyh2YWx1ZXMgOiBWYWx1ZXMsIGFyZ3MgOiBbc3RyaW5nXSkKICAgICAgICAtPiAodmFsdWVzIDogVmFsdWVzLCBhcmdzIDogW3N0cmluZ10pCgogICAgICAgIENoZWNrIHRoYXQgdGhlIHN1cHBsaWVkIG9wdGlvbiB2YWx1ZXMgYW5kIGxlZnRvdmVyIGFyZ3VtZW50cyBhcmUKICAgICAgICB2YWxpZC4gIFJldHVybnMgdGhlIG9wdGlvbiB2YWx1ZXMgYW5kIGxlZnRvdmVyIGFyZ3VtZW50cwogICAgICAgIChwb3NzaWJseSBhZGp1c3RlZCwgcG9zc2libHkgY29tcGxldGVseSBuZXcgLS0gd2hhdGV2ZXIgeW91CiAgICAgICAgbGlrZSkuICBEZWZhdWx0IGltcGxlbWVudGF0aW9uIGp1c3QgcmV0dXJucyB0aGUgcGFzc2VkLWluCiAgICAgICAgdmFsdWVzOyBzdWJjbGFzc2VzIG1heSBvdmVycmlkZSBhcyBkZXNpcmVkLgogICAgICAgICIiIgogICAgICAgIHJldHVybiAodmFsdWVzLCBhcmdzKQoKICAgIGRlZiBfcHJvY2Vzc19hcmdzKHNlbGYsIGxhcmdzLCByYXJncywgdmFsdWVzKToKICAgICAgICAiIiJfcHJvY2Vzc19hcmdzKGxhcmdzIDogW3N0cmluZ10sCiAgICAgICAgICAgICAgICAgICAgICAgICByYXJncyA6IFtzdHJpbmddLAogICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzIDogVmFsdWVzKQoKICAgICAgICBQcm9jZXNzIGNvbW1hbmQtbGluZSBhcmd1bWVudHMgYW5kIHBvcHVsYXRlICd2YWx1ZXMnLCBjb25zdW1pbmcKICAgICAgICBvcHRpb25zIGFuZCBhcmd1bWVudHMgZnJvbSAncmFyZ3MnLiAgSWYgJ2FsbG93X2ludGVyc3BlcnNlZF9hcmdzJyBpcwogICAgICAgIGZhbHNlLCBzdG9wIGF0IHRoZSBmaXJzdCBub24tb3B0aW9uIGFyZ3VtZW50LiAgSWYgdHJ1ZSwgYWNjdW11bGF0ZSBhbnkKICAgICAgICBpbnRlcnNwZXJzZWQgbm9uLW9wdGlvbiBhcmd1bWVudHMgaW4gJ2xhcmdzJy4KICAgICAgICAiIiIKICAgICAgICB3aGlsZSByYXJnczoKICAgICAgICAgICAgYXJnID0gcmFyZ3NbMF0KICAgICAgICAgICAgIyBXZSBoYW5kbGUgYmFyZSAiLS0iIGV4cGxpY2l0bHksIGFuZCBiYXJlICItIiBpcyBoYW5kbGVkIGJ5IHRoZQogICAgICAgICAgICAjIHN0YW5kYXJkIGFyZyBoYW5kbGVyIHNpbmNlIHRoZSBzaG9ydCBhcmcgY2FzZSBlbnN1cmVzIHRoYXQgdGhlCiAgICAgICAgICAgICMgbGVuIG9mIHRoZSBvcHQgc3RyaW5nIGlzIGdyZWF0ZXIgdGhhbiAxLgogICAgICAgICAgICBpZiBhcmcgPT0gIi0tIjoKICAgICAgICAgICAgICAgIGRlbCByYXJnc1swXQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVsaWYgYXJnWzA6Ml0gPT0gIi0tIjoKICAgICAgICAgICAgICAgICMgcHJvY2VzcyBhIHNpbmdsZSBsb25nIG9wdGlvbiAocG9zc2libHkgd2l0aCB2YWx1ZShzKSkKICAgICAgICAgICAgICAgIHNlbGYuX3Byb2Nlc3NfbG9uZ19vcHQocmFyZ3MsIHZhbHVlcykKICAgICAgICAgICAgZWxpZiBhcmdbOjFdID09ICItIiBhbmQgbGVuKGFyZykgPiAxOgogICAgICAgICAgICAgICAgIyBwcm9jZXNzIGEgY2x1c3RlciBvZiBzaG9ydCBvcHRpb25zIChwb3NzaWJseSB3aXRoCiAgICAgICAgICAgICAgICAjIHZhbHVlKHMpIGZvciB0aGUgbGFzdCBvbmUgb25seSkKICAgICAgICAgICAgICAgIHNlbGYuX3Byb2Nlc3Nfc2hvcnRfb3B0cyhyYXJncywgdmFsdWVzKQogICAgICAgICAgICBlbGlmIHNlbGYuYWxsb3dfaW50ZXJzcGVyc2VkX2FyZ3M6CiAgICAgICAgICAgICAgICBsYXJncy5hcHBlbmQoYXJnKQogICAgICAgICAgICAgICAgZGVsIHJhcmdzWzBdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gICAgICAgICAgICAgICAgICAjIHN0b3Agbm93LCBsZWF2ZSB0aGlzIGFyZyBpbiByYXJncwoKICAgICAgICAjIFNheSB0aGlzIGlzIHRoZSBvcmlnaW5hbCBhcmd1bWVudCBsaXN0OgogICAgICAgICMgW2FyZzAsIGFyZzEsIC4uLiwgYXJnKGktMSksIGFyZyhpKSwgYXJnKGkrMSksIC4uLiwgYXJnKE4tMSldCiAgICAgICAgIyAgICAgICAgICAgICAgICAgICAgICAgICAgICBeCiAgICAgICAgIyAod2UgYXJlIGFib3V0IHRvIHByb2Nlc3MgYXJnKGkpKS4KICAgICAgICAjCiAgICAgICAgIyBUaGVuIHJhcmdzIGlzIFthcmcoaSksIC4uLiwgYXJnKE4tMSldIGFuZCBsYXJncyBpcyBhICpzdWJzZXQqIG9mCiAgICAgICAgIyBbYXJnMCwgLi4uLCBhcmcoaS0xKV0gKGFueSBvcHRpb25zIGFuZCB0aGVpciBhcmd1bWVudHMgd2lsbCBoYXZlCiAgICAgICAgIyBiZWVuIHJlbW92ZWQgZnJvbSBsYXJncykuCiAgICAgICAgIwogICAgICAgICMgVGhlIHdoaWxlIGxvb3Agd2lsbCB1c3VhbGx5IGNvbnN1bWUgMSBvciBtb3JlIGFyZ3VtZW50cyBwZXIgcGFzcy4KICAgICAgICAjIElmIGl0IGNvbnN1bWVzIDEgKGVnLiBhcmcgaXMgYW4gb3B0aW9uIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRzKSwKICAgICAgICAjIHRoZW4gYWZ0ZXIgX3Byb2Nlc3NfYXJnKCkgaXMgZG9uZSB0aGUgc2l0dWF0aW9uIGlzOgogICAgICAgICMKICAgICAgICAjICAgbGFyZ3MgPSBzdWJzZXQgb2YgW2FyZzAsIC4uLiwgYXJnKGkpXQogICAgICAgICMgICByYXJncyA9IFthcmcoaSsxKSwgLi4uLCBhcmcoTi0xKV0KICAgICAgICAjCiAgICAgICAgIyBJZiBhbGxvd19pbnRlcnNwZXJzZWRfYXJncyBpcyBmYWxzZSwgbGFyZ3Mgd2lsbCBhbHdheXMgYmUKICAgICAgICAjICplbXB0eSogLS0gc3RpbGwgYSBzdWJzZXQgb2YgW2FyZzAsIC4uLiwgYXJnKGktMSldLCBidXQKICAgICAgICAjIG5vdCBhIHZlcnkgaW50ZXJlc3Rpbmcgc3Vic2V0IQoKICAgIGRlZiBfbWF0Y2hfbG9uZ19vcHQoc2VsZiwgb3B0KToKICAgICAgICAiIiJfbWF0Y2hfbG9uZ19vcHQob3B0IDogc3RyaW5nKSAtPiBzdHJpbmcKCiAgICAgICAgRGV0ZXJtaW5lIHdoaWNoIGxvbmcgb3B0aW9uIHN0cmluZyAnb3B0JyBtYXRjaGVzLCBpZS4gd2hpY2ggb25lCiAgICAgICAgaXQgaXMgYW4gdW5hbWJpZ3VvdXMgYWJicmV2YXRpb24gZm9yLiAgUmFpc2VzIEJhZE9wdGlvbkVycm9yIGlmCiAgICAgICAgJ29wdCcgZG9lc24ndCB1bmFtYmlndW91c2x5IG1hdGNoIGFueSBsb25nIG9wdGlvbiBzdHJpbmcuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIF9tYXRjaF9hYmJyZXYob3B0LCBzZWxmLl9sb25nX29wdCkKCiAgICBkZWYgX3Byb2Nlc3NfbG9uZ19vcHQoc2VsZiwgcmFyZ3MsIHZhbHVlcyk6CiAgICAgICAgYXJnID0gcmFyZ3MucG9wKDApCgogICAgICAgICMgVmFsdWUgZXhwbGljaXRseSBhdHRhY2hlZCB0byBhcmc/ICBQcmV0ZW5kIGl0J3MgdGhlIG5leHQKICAgICAgICAjIGFyZ3VtZW50LgogICAgICAgIGlmICI9IiBpbiBhcmc6CiAgICAgICAgICAgIChvcHQsIG5leHRfYXJnKSA9IGFyZy5zcGxpdCgiPSIsIDEpCiAgICAgICAgICAgIHJhcmdzLmluc2VydCgwLCBuZXh0X2FyZykKICAgICAgICAgICAgaGFkX2V4cGxpY2l0X3ZhbHVlID0gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9wdCA9IGFyZwogICAgICAgICAgICBoYWRfZXhwbGljaXRfdmFsdWUgPSBGYWxzZQoKICAgICAgICBvcHQgPSBzZWxmLl9tYXRjaF9sb25nX29wdChvcHQpCiAgICAgICAgb3B0aW9uID0gc2VsZi5fbG9uZ19vcHRbb3B0XQogICAgICAgIGlmIG9wdGlvbi50YWtlc192YWx1ZSgpOgogICAgICAgICAgICBuYXJncyA9IG9wdGlvbi5uYXJncwogICAgICAgICAgICBpZiBsZW4ocmFyZ3MpIDwgbmFyZ3M6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yKG5nZXR0ZXh0KAogICAgICAgICAgICAgICAgICAgICIlKG9wdGlvbilzIG9wdGlvbiByZXF1aXJlcyAlKG51bWJlcilkIGFyZ3VtZW50IiwKICAgICAgICAgICAgICAgICAgICAiJShvcHRpb24pcyBvcHRpb24gcmVxdWlyZXMgJShudW1iZXIpZCBhcmd1bWVudHMiLAogICAgICAgICAgICAgICAgICAgIG5hcmdzKSAlIHsib3B0aW9uIjogb3B0LCAibnVtYmVyIjogbmFyZ3N9KQogICAgICAgICAgICBlbGlmIG5hcmdzID09IDE6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhcmdzLnBvcCgwKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdmFsdWUgPSB0dXBsZShyYXJnc1swOm5hcmdzXSkKICAgICAgICAgICAgICAgIGRlbCByYXJnc1swOm5hcmdzXQoKICAgICAgICBlbGlmIGhhZF9leHBsaWNpdF92YWx1ZToKICAgICAgICAgICAgc2VsZi5lcnJvcihfKCIlcyBvcHRpb24gZG9lcyBub3QgdGFrZSBhIHZhbHVlIikgJSBvcHQpCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHZhbHVlID0gTm9uZQoKICAgICAgICBvcHRpb24ucHJvY2VzcyhvcHQsIHZhbHVlLCB2YWx1ZXMsIHNlbGYpCgogICAgZGVmIF9wcm9jZXNzX3Nob3J0X29wdHMoc2VsZiwgcmFyZ3MsIHZhbHVlcyk6CiAgICAgICAgYXJnID0gcmFyZ3MucG9wKDApCiAgICAgICAgc3RvcCA9IEZhbHNlCiAgICAgICAgaSA9IDEKICAgICAgICBmb3IgY2ggaW4gYXJnWzE6XToKICAgICAgICAgICAgb3B0ID0gIi0iICsgY2gKICAgICAgICAgICAgb3B0aW9uID0gc2VsZi5fc2hvcnRfb3B0LmdldChvcHQpCiAgICAgICAgICAgIGkgKz0gMSAgICAgICAgICAgICAgICAgICAgICAjIHdlIGhhdmUgY29uc3VtZWQgYSBjaGFyYWN0ZXIKCiAgICAgICAgICAgIGlmIG5vdCBvcHRpb246CiAgICAgICAgICAgICAgICByYWlzZSBCYWRPcHRpb25FcnJvcihvcHQpCiAgICAgICAgICAgIGlmIG9wdGlvbi50YWtlc192YWx1ZSgpOgogICAgICAgICAgICAgICAgIyBBbnkgY2hhcmFjdGVycyBsZWZ0IGluIGFyZz8gIFByZXRlbmQgdGhleSdyZSB0aGUKICAgICAgICAgICAgICAgICMgbmV4dCBhcmcsIGFuZCBzdG9wIGNvbnN1bWluZyBjaGFyYWN0ZXJzIG9mIGFyZy4KICAgICAgICAgICAgICAgIGlmIGkgPCBsZW4oYXJnKToKICAgICAgICAgICAgICAgICAgICByYXJncy5pbnNlcnQoMCwgYXJnW2k6XSkKICAgICAgICAgICAgICAgICAgICBzdG9wID0gVHJ1ZQoKICAgICAgICAgICAgICAgIG5hcmdzID0gb3B0aW9uLm5hcmdzCiAgICAgICAgICAgICAgICBpZiBsZW4ocmFyZ3MpIDwgbmFyZ3M6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvcihuZ2V0dGV4dCgKICAgICAgICAgICAgICAgICAgICAgICAgIiUob3B0aW9uKXMgb3B0aW9uIHJlcXVpcmVzICUobnVtYmVyKWQgYXJndW1lbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiJShvcHRpb24pcyBvcHRpb24gcmVxdWlyZXMgJShudW1iZXIpZCBhcmd1bWVudHMiLAogICAgICAgICAgICAgICAgICAgICAgICBuYXJncykgJSB7Im9wdGlvbiI6IG9wdCwgIm51bWJlciI6IG5hcmdzfSkKICAgICAgICAgICAgICAgIGVsaWYgbmFyZ3MgPT0gMToKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhcmdzLnBvcCgwKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHR1cGxlKHJhcmdzWzA6bmFyZ3NdKQogICAgICAgICAgICAgICAgICAgIGRlbCByYXJnc1swOm5hcmdzXQoKICAgICAgICAgICAgZWxzZTogICAgICAgICAgICAgICAgICAgICAgICMgb3B0aW9uIGRvZXNuJ3QgdGFrZSBhIHZhbHVlCiAgICAgICAgICAgICAgICB2YWx1ZSA9IE5vbmUKCiAgICAgICAgICAgIG9wdGlvbi5wcm9jZXNzKG9wdCwgdmFsdWUsIHZhbHVlcywgc2VsZikKCiAgICAgICAgICAgIGlmIHN0b3A6CiAgICAgICAgICAgICAgICBicmVhawoKCiAgICAjIC0tIEZlZWRiYWNrIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBnZXRfcHJvZ19uYW1lKHNlbGYpOgogICAgICAgIGlmIHNlbGYucHJvZyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gb3MucGF0aC5iYXNlbmFtZShzeXMuYXJndlswXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2VsZi5wcm9nCgogICAgZGVmIGV4cGFuZF9wcm9nX25hbWUoc2VsZiwgcyk6CiAgICAgICAgcmV0dXJuIHMucmVwbGFjZSgiJXByb2ciLCBzZWxmLmdldF9wcm9nX25hbWUoKSkKCiAgICBkZWYgZ2V0X2Rlc2NyaXB0aW9uKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmV4cGFuZF9wcm9nX25hbWUoc2VsZi5kZXNjcmlwdGlvbikKCiAgICBkZWYgZXhpdChzZWxmLCBzdGF0dXM9MCwgbXNnPU5vbmUpOgogICAgICAgIGlmIG1zZzoKICAgICAgICAgICAgc3lzLnN0ZGVyci53cml0ZShtc2cpCiAgICAgICAgc3lzLmV4aXQoc3RhdHVzKQoKICAgIGRlZiBlcnJvcihzZWxmLCBtc2cpOgogICAgICAgICIiImVycm9yKG1zZyA6IHN0cmluZykKCiAgICAgICAgUHJpbnQgYSB1c2FnZSBtZXNzYWdlIGluY29ycG9yYXRpbmcgJ21zZycgdG8gc3RkZXJyIGFuZCBleGl0LgogICAgICAgIElmIHlvdSBvdmVycmlkZSB0aGlzIGluIGEgc3ViY2xhc3MsIGl0IHNob3VsZCBub3QgcmV0dXJuIC0tIGl0CiAgICAgICAgc2hvdWxkIGVpdGhlciBleGl0IG9yIHJhaXNlIGFuIGV4Y2VwdGlvbi4KICAgICAgICAiIiIKICAgICAgICBzZWxmLnByaW50X3VzYWdlKHN5cy5zdGRlcnIpCiAgICAgICAgc2VsZi5leGl0KDIsICIlczogZXJyb3I6ICVzXG4iICUgKHNlbGYuZ2V0X3Byb2dfbmFtZSgpLCBtc2cpKQoKICAgIGRlZiBnZXRfdXNhZ2Uoc2VsZik6CiAgICAgICAgaWYgc2VsZi51c2FnZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZm9ybWF0dGVyLmZvcm1hdF91c2FnZSgKICAgICAgICAgICAgICAgIHNlbGYuZXhwYW5kX3Byb2dfbmFtZShzZWxmLnVzYWdlKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIiIKCiAgICBkZWYgcHJpbnRfdXNhZ2Uoc2VsZiwgZmlsZT1Ob25lKToKICAgICAgICAiIiJwcmludF91c2FnZShmaWxlIDogZmlsZSA9IHN0ZG91dCkKCiAgICAgICAgUHJpbnQgdGhlIHVzYWdlIG1lc3NhZ2UgZm9yIHRoZSBjdXJyZW50IHByb2dyYW0gKHNlbGYudXNhZ2UpIHRvCiAgICAgICAgJ2ZpbGUnIChkZWZhdWx0IHN0ZG91dCkuICBBbnkgb2NjdXJyZW5jZSBvZiB0aGUgc3RyaW5nICIlcHJvZyIgaW4KICAgICAgICBzZWxmLnVzYWdlIGlzIHJlcGxhY2VkIHdpdGggdGhlIG5hbWUgb2YgdGhlIGN1cnJlbnQgcHJvZ3JhbQogICAgICAgIChiYXNlbmFtZSBvZiBzeXMuYXJndlswXSkuICBEb2VzIG5vdGhpbmcgaWYgc2VsZi51c2FnZSBpcyBlbXB0eQogICAgICAgIG9yIG5vdCBkZWZpbmVkLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYudXNhZ2U6CiAgICAgICAgICAgIHByaW50KHNlbGYuZ2V0X3VzYWdlKCksIGZpbGU9ZmlsZSkKCiAgICBkZWYgZ2V0X3ZlcnNpb24oc2VsZik6CiAgICAgICAgaWYgc2VsZi52ZXJzaW9uOgogICAgICAgICAgICByZXR1cm4gc2VsZi5leHBhbmRfcHJvZ19uYW1lKHNlbGYudmVyc2lvbikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIiIKCiAgICBkZWYgcHJpbnRfdmVyc2lvbihzZWxmLCBmaWxlPU5vbmUpOgogICAgICAgICIiInByaW50X3ZlcnNpb24oZmlsZSA6IGZpbGUgPSBzdGRvdXQpCgogICAgICAgIFByaW50IHRoZSB2ZXJzaW9uIG1lc3NhZ2UgZm9yIHRoaXMgcHJvZ3JhbSAoc2VsZi52ZXJzaW9uKSB0bwogICAgICAgICdmaWxlJyAoZGVmYXVsdCBzdGRvdXQpLiAgQXMgd2l0aCBwcmludF91c2FnZSgpLCBhbnkgb2NjdXJyZW5jZQogICAgICAgIG9mICIlcHJvZyIgaW4gc2VsZi52ZXJzaW9uIGlzIHJlcGxhY2VkIGJ5IHRoZSBjdXJyZW50IHByb2dyYW0ncwogICAgICAgIG5hbWUuICBEb2VzIG5vdGhpbmcgaWYgc2VsZi52ZXJzaW9uIGlzIGVtcHR5IG9yIHVuZGVmaW5lZC4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLnZlcnNpb246CiAgICAgICAgICAgIHByaW50KHNlbGYuZ2V0X3ZlcnNpb24oKSwgZmlsZT1maWxlKQoKICAgIGRlZiBmb3JtYXRfb3B0aW9uX2hlbHAoc2VsZiwgZm9ybWF0dGVyPU5vbmUpOgogICAgICAgIGlmIGZvcm1hdHRlciBpcyBOb25lOgogICAgICAgICAgICBmb3JtYXR0ZXIgPSBzZWxmLmZvcm1hdHRlcgogICAgICAgIGZvcm1hdHRlci5zdG9yZV9vcHRpb25fc3RyaW5ncyhzZWxmKQogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgcmVzdWx0LmFwcGVuZChmb3JtYXR0ZXIuZm9ybWF0X2hlYWRpbmcoXygiT3B0aW9ucyIpKSkKICAgICAgICBmb3JtYXR0ZXIuaW5kZW50KCkKICAgICAgICBpZiBzZWxmLm9wdGlvbl9saXN0OgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKE9wdGlvbkNvbnRhaW5lci5mb3JtYXRfb3B0aW9uX2hlbHAoc2VsZiwgZm9ybWF0dGVyKSkKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgiXG4iKQogICAgICAgIGZvciBncm91cCBpbiBzZWxmLm9wdGlvbl9ncm91cHM6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoZ3JvdXAuZm9ybWF0X2hlbHAoZm9ybWF0dGVyKSkKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgiXG4iKQogICAgICAgIGZvcm1hdHRlci5kZWRlbnQoKQogICAgICAgICMgRHJvcCB0aGUgbGFzdCAiXG4iLCBvciB0aGUgaGVhZGVyIGlmIG5vIG9wdGlvbnMgb3Igb3B0aW9uIGdyb3VwczoKICAgICAgICByZXR1cm4gIiIuam9pbihyZXN1bHRbOi0xXSkKCiAgICBkZWYgZm9ybWF0X2VwaWxvZyhzZWxmLCBmb3JtYXR0ZXIpOgogICAgICAgIHJldHVybiBmb3JtYXR0ZXIuZm9ybWF0X2VwaWxvZyhzZWxmLmVwaWxvZykKCiAgICBkZWYgZm9ybWF0X2hlbHAoc2VsZiwgZm9ybWF0dGVyPU5vbmUpOgogICAgICAgIGlmIGZvcm1hdHRlciBpcyBOb25lOgogICAgICAgICAgICBmb3JtYXR0ZXIgPSBzZWxmLmZvcm1hdHRlcgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaWYgc2VsZi51c2FnZToKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChzZWxmLmdldF91c2FnZSgpICsgIlxuIikKICAgICAgICBpZiBzZWxmLmRlc2NyaXB0aW9uOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKHNlbGYuZm9ybWF0X2Rlc2NyaXB0aW9uKGZvcm1hdHRlcikgKyAiXG4iKQogICAgICAgIHJlc3VsdC5hcHBlbmQoc2VsZi5mb3JtYXRfb3B0aW9uX2hlbHAoZm9ybWF0dGVyKSkKICAgICAgICByZXN1bHQuYXBwZW5kKHNlbGYuZm9ybWF0X2VwaWxvZyhmb3JtYXR0ZXIpKQogICAgICAgIHJldHVybiAiIi5qb2luKHJlc3VsdCkKCiAgICBkZWYgcHJpbnRfaGVscChzZWxmLCBmaWxlPU5vbmUpOgogICAgICAgICIiInByaW50X2hlbHAoZmlsZSA6IGZpbGUgPSBzdGRvdXQpCgogICAgICAgIFByaW50IGFuIGV4dGVuZGVkIGhlbHAgbWVzc2FnZSwgbGlzdGluZyBhbGwgb3B0aW9ucyBhbmQgYW55CiAgICAgICAgaGVscCB0ZXh0IHByb3ZpZGVkIHdpdGggdGhlbSwgdG8gJ2ZpbGUnIChkZWZhdWx0IHN0ZG91dCkuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZmlsZSBpcyBOb25lOgogICAgICAgICAgICBmaWxlID0gc3lzLnN0ZG91dAogICAgICAgIGZpbGUud3JpdGUoc2VsZi5mb3JtYXRfaGVscCgpKQoKIyBjbGFzcyBPcHRpb25QYXJzZXIKCgpkZWYgX21hdGNoX2FiYnJldihzLCB3b3JkbWFwKToKICAgICIiIl9tYXRjaF9hYmJyZXYocyA6IHN0cmluZywgd29yZG1hcCA6IHtzdHJpbmcgOiBPcHRpb259KSAtPiBzdHJpbmcKCiAgICBSZXR1cm4gdGhlIHN0cmluZyBrZXkgaW4gJ3dvcmRtYXAnIGZvciB3aGljaCAncycgaXMgYW4gdW5hbWJpZ3VvdXMKICAgIGFiYnJldmlhdGlvbi4gIElmICdzJyBpcyBmb3VuZCB0byBiZSBhbWJpZ3VvdXMgb3IgZG9lc24ndCBtYXRjaCBhbnkgb2YKICAgICd3b3JkcycsIHJhaXNlIEJhZE9wdGlvbkVycm9yLgogICAgIiIiCiAgICAjIElzIHRoZXJlIGFuIGV4YWN0IG1hdGNoPwogICAgaWYgcyBpbiB3b3JkbWFwOgogICAgICAgIHJldHVybiBzCiAgICBlbHNlOgogICAgICAgICMgSXNvbGF0ZSBhbGwgd29yZHMgd2l0aCBzIGFzIGEgcHJlZml4LgogICAgICAgIHBvc3NpYmlsaXRpZXMgPSBbd29yZCBmb3Igd29yZCBpbiB3b3JkbWFwLmtleXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgaWYgd29yZC5zdGFydHN3aXRoKHMpXQogICAgICAgICMgTm8gZXhhY3QgbWF0Y2gsIHNvIHRoZXJlIGhhZCBiZXR0ZXIgYmUganVzdCBvbmUgcG9zc2liaWxpdHkuCiAgICAgICAgaWYgbGVuKHBvc3NpYmlsaXRpZXMpID09IDE6CiAgICAgICAgICAgIHJldHVybiBwb3NzaWJpbGl0aWVzWzBdCiAgICAgICAgZWxpZiBub3QgcG9zc2liaWxpdGllczoKICAgICAgICAgICAgcmFpc2UgQmFkT3B0aW9uRXJyb3IocykKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIE1vcmUgdGhhbiBvbmUgcG9zc2libGUgY29tcGxldGlvbjogYW1iaWd1b3VzIHByZWZpeC4KICAgICAgICAgICAgcG9zc2liaWxpdGllcy5zb3J0KCkKICAgICAgICAgICAgcmFpc2UgQW1iaWd1b3VzT3B0aW9uRXJyb3IocywgcG9zc2liaWxpdGllcykKCgojIFNvbWUgZGF5LCB0aGVyZSBtaWdodCBiZSBtYW55IE9wdGlvbiBjbGFzc2VzLiAgQXMgb2YgT3B0aWsgMS4zLCB0aGUKIyBwcmVmZXJyZWQgd2F5IHRvIGluc3RhbnRpYXRlIE9wdGlvbnMgaXMgaW5kaXJlY3RseSwgdmlhIG1ha2Vfb3B0aW9uKCksCiMgd2hpY2ggd2lsbCBiZWNvbWUgYSBmYWN0b3J5IGZ1bmN0aW9uIHdoZW4gdGhlcmUgYXJlIG1hbnkgT3B0aW9uCiMgY2xhc3Nlcy4KbWFrZV9vcHRpb24gPSBPcHRpb24K',
'/Lib/local_storage.py':'IyBsb2NhbCBzdG9yYWdlIGluIGJyb3dzZXIKCmNsYXNzIExvY2FsU3RvcmFnZToKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgaWYgbm90IF9fQlJZVEhPTl9fLmhhc19sb2NhbF9zdG9yYWdlOgogICAgICAgICAgICByYWlzZSBOYW1lRXJyb3IoJ2xvY2FsIHN0b3JhZ2UgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlcicpCiAgICAgICAgc2VsZi5zdG9yZSA9IF9fQlJZVEhPTl9fLmxvY2FsX3N0b3JhZ2UoKQogICAgICAgIAogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsa2V5KToKICAgICAgICBzZWxmLnN0b3JlLnJlbW92ZUl0ZW0oa2V5KQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLGtleSk6CiAgICAgICAgcmVzPXNlbGYuc3RvcmUuZ2V0SXRlbShrZXkpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgIHJldHVybiByZXMKICAgICAgICByYWlzZSBLZXlFcnJvcihrZXkpCgogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsa2V5LHZhbHVlKToKICAgICAgICBzZWxmLnN0b3JlLnNldEl0ZW0oa2V5LHZhbHVlKQoKICAgICNpbXBsZW1lbnQgImluIiBmdW5jdGlvbmFsaXR5CiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGtleSk6CiAgICAgICAgcmVzPXNlbGYuc3RvcmUuZ2V0SXRlbShrZXkpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBrZXlzKHNlbGYpOgogICAgICAgIHJldHVybiBsaXN0KHNlbGYuc3RvcmUpCgogICAgZGVmIHZhbHVlcyhzZWxmKToKICAgICAgICByZXR1cm4gW3NlbGYuX19nZXRpdGVtX18oaykgZm9yIGsgaW4gc2VsZi5rZXlzKCldCgogICAgZGVmIGl0ZW1zKHNlbGYpOgogICAgICAgIHJldHVybiB6aXAoc2VsZi5rZXlzKCksc2VsZi52YWx1ZXMoKSkKCnN0b3JhZ2UgPSBMb2NhbFN0b3JhZ2UoKQoK',
'/Lib/locale.py':'ZGVmIGdldGRlZmF1bHRsb2NhbGUoKToKICAgIHJldHVybiBfX0JSWVRIT05fXy5sYW5ndWFnZSxOb25l',
'/Lib/dis.py':'ZGVmIGRpcyhzcmMpOgogICAgcmV0dXJuIEpTT2JqZWN0KF9fQlJZVEhPTl9fLnB5MmpzKHNyYykpLnRvX2pzKCkK',
'/Lib/types.py':'IiIiCkRlZmluZSBuYW1lcyBmb3IgYnVpbHQtaW4gdHlwZXMgdGhhdCBhcmVuJ3QgZGlyZWN0bHkgYWNjZXNzaWJsZSBhcyBhIGJ1aWx0aW4uCiIiIgppbXBvcnQgc3lzCgojIEl0ZXJhdG9ycyBpbiBQeXRob24gYXJlbid0IGEgbWF0dGVyIG9mIHR5cGUgYnV0IG9mIHByb3RvY29sLiAgQSBsYXJnZQojIGFuZCBjaGFuZ2luZyBudW1iZXIgb2YgYnVpbHRpbiB0eXBlcyBpbXBsZW1lbnQgKnNvbWUqIGZsYXZvciBvZgojIGl0ZXJhdG9yLiAgRG9uJ3QgY2hlY2sgdGhlIHR5cGUhICBVc2UgaGFzYXR0ciB0byBjaGVjayBmb3IgYm90aAojICJfX2l0ZXJfXyIgYW5kICJfX25leHRfXyIgYXR0cmlidXRlcyBpbnN0ZWFkLgoKI2RlZiBfZigpOiBwYXNzCiNGdW5jdGlvblR5cGUgPSB0eXBlKF9mKQojTGFtYmRhVHlwZSA9IHR5cGUobGFtYmRhOiBOb25lKSAgICAgICAgICMgU2FtZSBhcyBGdW5jdGlvblR5cGUKI0NvZGVUeXBlID0gdHlwZShfZi5fX2NvZGVfXykKCiNkZWYgX2coKToKIyAgICB5aWVsZCAxCiNHZW5lcmF0b3JUeXBlID0gdHlwZShfZygpKQoKY2xhc3MgX0M6CiAgICBkZWYgX20oc2VsZik6IHBhc3MKTWV0aG9kVHlwZSA9IHR5cGUoX0MoKS5fbSkKCkJ1aWx0aW5GdW5jdGlvblR5cGUgPSB0eXBlKGxlbikKQnVpbHRpbk1ldGhvZFR5cGUgPSB0eXBlKFtdLmFwcGVuZCkgICAgICMgU2FtZSBhcyBCdWlsdGluRnVuY3Rpb25UeXBlCgpNb2R1bGVUeXBlID0gdHlwZShzeXMpCgojdHJ5OgojICAgIHJhaXNlIFR5cGVFcnJvcgojZXhjZXB0IFR5cGVFcnJvcjoKIyAgICB0YiA9IHN5cy5leGNfaW5mbygpWzJdCiMgICAgVHJhY2ViYWNrVHlwZSA9IHR5cGUodGIpCiMgICAgRnJhbWVUeXBlID0gdHlwZSh0Yi50Yl9mcmFtZSkKIyAgICB0YiA9IE5vbmU7IGRlbCB0YgoKIyBGb3IgSnl0aG9uLCB0aGUgZm9sbG93aW5nIHR3byB0eXBlcyBhcmUgaWRlbnRpY2FsCiNHZXRTZXREZXNjcmlwdG9yVHlwZSA9IHR5cGUoRnVuY3Rpb25UeXBlLl9fY29kZV9fKQojTWVtYmVyRGVzY3JpcHRvclR5cGUgPSB0eXBlKEZ1bmN0aW9uVHlwZS5fX2dsb2JhbHNfXykKCiNmaXhtZSBicnl0aG9uCiNkZWwgc3lzLCBfZiwgX2csIF9DLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTm90IGZvciBleHBvcnQK',
'/Lib/_weakrefset.py':'V2Vha1NldCA9IHNldAoKX0l0ZXJhdGlvbkd1YXJkID0gTm9uZQ==',
'/Lib/warnings.py':'IiIiUHl0aG9uIHBhcnQgb2YgdGhlIHdhcm5pbmdzIHN1YnN5c3RlbS4iIiIKCiMgTm90ZTogZnVuY3Rpb24gbGV2ZWwgaW1wb3J0cyBzaG91bGQgKm5vdCogYmUgdXNlZAojIGluIHRoaXMgbW9kdWxlIGFzIGl0IG1heSBjYXVzZSBpbXBvcnQgbG9jayBkZWFkbG9jay4KIyBTZWUgYnVnIDY4MzY1OC4KaW1wb3J0IGxpbmVjYWNoZQppbXBvcnQgc3lzCgpfX2FsbF9fID0gWyJ3YXJuIiwgInNob3d3YXJuaW5nIiwgImZvcm1hdHdhcm5pbmciLCAiZmlsdGVyd2FybmluZ3MiLAogICAgICAgICAgICJyZXNldHdhcm5pbmdzIiwgImNhdGNoX3dhcm5pbmdzIl0KCgpkZWYgc2hvd3dhcm5pbmcobWVzc2FnZSwgY2F0ZWdvcnksIGZpbGVuYW1lLCBsaW5lbm8sIGZpbGU9Tm9uZSwgbGluZT1Ob25lKToKICAgICIiIkhvb2sgdG8gd3JpdGUgYSB3YXJuaW5nIHRvIGEgZmlsZTsgcmVwbGFjZSBpZiB5b3UgbGlrZS4iIiIKICAgIGlmIGZpbGUgaXMgTm9uZToKICAgICAgICBmaWxlID0gc3lzLnN0ZGVycgogICAgdHJ5OgogICAgICAgIGZpbGUud3JpdGUoZm9ybWF0d2FybmluZyhtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubywgbGluZSkpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwYXNzICMgdGhlIGZpbGUgKHByb2JhYmx5IHN0ZGVycikgaXMgaW52YWxpZCAtIHRoaXMgd2FybmluZyBnZXRzIGxvc3QuCgpkZWYgZm9ybWF0d2FybmluZyhtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubywgbGluZT1Ob25lKToKICAgICIiIkZ1bmN0aW9uIHRvIGZvcm1hdCBhIHdhcm5pbmcgdGhlIHN0YW5kYXJkIHdheS4iIiIKICAgIHMgPSAgIiVzOiVzOiAlczogJXNcbiIgJSAoZmlsZW5hbWUsIGxpbmVubywgY2F0ZWdvcnkuX19uYW1lX18sIG1lc3NhZ2UpCiAgICBsaW5lID0gbGluZWNhY2hlLmdldGxpbmUoZmlsZW5hbWUsIGxpbmVubykgaWYgbGluZSBpcyBOb25lIGVsc2UgbGluZQogICAgaWYgbGluZToKICAgICAgICBsaW5lID0gbGluZS5zdHJpcCgpCiAgICAgICAgcyArPSAiICAlc1xuIiAlIGxpbmUKICAgIHJldHVybiBzCgojZml4bWUgYnJ5dGhvbiAgYnVpbHRpbiBXYXJuaW5nIGNsYXNzIG5vdCBkZWZpbmVkCmRlZiBmaWx0ZXJ3YXJuaW5ncyhhY3Rpb24sIG1lc3NhZ2U9IiIsIGNhdGVnb3J5PVdhcm5pbmcsIG1vZHVsZT0iIiwgbGluZW5vPTAsCiAgICAgICAgICAgICAgICAgICBhcHBlbmQ9RmFsc2UpOgogICAgIiIiSW5zZXJ0IGFuIGVudHJ5IGludG8gdGhlIGxpc3Qgb2Ygd2FybmluZ3MgZmlsdGVycyAoYXQgdGhlIGZyb250KS4KCiAgICAnYWN0aW9uJyAtLSBvbmUgb2YgImVycm9yIiwgImlnbm9yZSIsICJhbHdheXMiLCAiZGVmYXVsdCIsICJtb2R1bGUiLAogICAgICAgICAgICAgICAgb3IgIm9uY2UiCiAgICAnbWVzc2FnZScgLS0gYSByZWdleCB0aGF0IHRoZSB3YXJuaW5nIG1lc3NhZ2UgbXVzdCBtYXRjaAogICAgJ2NhdGVnb3J5JyAtLSBhIGNsYXNzIHRoYXQgdGhlIHdhcm5pbmcgbXVzdCBiZSBhIHN1YmNsYXNzIG9mCiAgICAnbW9kdWxlJyAtLSBhIHJlZ2V4IHRoYXQgdGhlIG1vZHVsZSBuYW1lIG11c3QgbWF0Y2gKICAgICdsaW5lbm8nIC0tIGFuIGludGVnZXIgbGluZSBudW1iZXIsIDAgbWF0Y2hlcyBhbGwgd2FybmluZ3MKICAgICdhcHBlbmQnIC0tIGlmIHRydWUsIGFwcGVuZCB0byB0aGUgbGlzdCBvZiBmaWx0ZXJzCiAgICAiIiIKICAgIGltcG9ydCByZQogICAgYXNzZXJ0IGFjdGlvbiBpbiAoImVycm9yIiwgImlnbm9yZSIsICJhbHdheXMiLCAiZGVmYXVsdCIsICJtb2R1bGUiLAogICAgICAgICAgICAgICAgICAgICAgIm9uY2UiKSwgImludmFsaWQgYWN0aW9uOiAlciIgJSAoYWN0aW9uLCkKICAgIGFzc2VydCBpc2luc3RhbmNlKG1lc3NhZ2UsIHN0ciksICJtZXNzYWdlIG11c3QgYmUgYSBzdHJpbmciCiAgICBhc3NlcnQgaXNpbnN0YW5jZShjYXRlZ29yeSwgdHlwZSksICJjYXRlZ29yeSBtdXN0IGJlIGEgY2xhc3MiCiAgICBhc3NlcnQgaXNzdWJjbGFzcyhjYXRlZ29yeSwgV2FybmluZyksICJjYXRlZ29yeSBtdXN0IGJlIGEgV2FybmluZyBzdWJjbGFzcyIKICAgIGFzc2VydCBpc2luc3RhbmNlKG1vZHVsZSwgc3RyKSwgIm1vZHVsZSBtdXN0IGJlIGEgc3RyaW5nIgogICAgYXNzZXJ0IGlzaW5zdGFuY2UobGluZW5vLCBpbnQpIGFuZCBsaW5lbm8gPj0gMCwgXAogICAgICAgICAgICJsaW5lbm8gbXVzdCBiZSBhbiBpbnQgPj0gMCIKICAgIGl0ZW0gPSAoYWN0aW9uLCByZS5jb21waWxlKG1lc3NhZ2UsIHJlLkkpLCBjYXRlZ29yeSwKICAgICAgICAgICAgcmUuY29tcGlsZShtb2R1bGUpLCBsaW5lbm8pCiAgICBpZiBhcHBlbmQ6CiAgICAgICAgZmlsdGVycy5hcHBlbmQoaXRlbSkKICAgIGVsc2U6CiAgICAgICAgZmlsdGVycy5pbnNlcnQoMCwgaXRlbSkKCmRlZiBzaW1wbGVmaWx0ZXIoYWN0aW9uLCBjYXRlZ29yeT1XYXJuaW5nLCBsaW5lbm89MCwgYXBwZW5kPUZhbHNlKToKICAgICIiIkluc2VydCBhIHNpbXBsZSBlbnRyeSBpbnRvIHRoZSBsaXN0IG9mIHdhcm5pbmdzIGZpbHRlcnMgKGF0IHRoZSBmcm9udCkuCgogICAgQSBzaW1wbGUgZmlsdGVyIG1hdGNoZXMgYWxsIG1vZHVsZXMgYW5kIG1lc3NhZ2VzLgogICAgJ2FjdGlvbicgLS0gb25lIG9mICJlcnJvciIsICJpZ25vcmUiLCAiYWx3YXlzIiwgImRlZmF1bHQiLCAibW9kdWxlIiwKICAgICAgICAgICAgICAgIG9yICJvbmNlIgogICAgJ2NhdGVnb3J5JyAtLSBhIGNsYXNzIHRoYXQgdGhlIHdhcm5pbmcgbXVzdCBiZSBhIHN1YmNsYXNzIG9mCiAgICAnbGluZW5vJyAtLSBhbiBpbnRlZ2VyIGxpbmUgbnVtYmVyLCAwIG1hdGNoZXMgYWxsIHdhcm5pbmdzCiAgICAnYXBwZW5kJyAtLSBpZiB0cnVlLCBhcHBlbmQgdG8gdGhlIGxpc3Qgb2YgZmlsdGVycwogICAgIiIiCiAgICBhc3NlcnQgYWN0aW9uIGluICgiZXJyb3IiLCAiaWdub3JlIiwgImFsd2F5cyIsICJkZWZhdWx0IiwgIm1vZHVsZSIsCiAgICAgICAgICAgICAgICAgICAgICAib25jZSIpLCAiaW52YWxpZCBhY3Rpb246ICVyIiAlIChhY3Rpb24sKQogICAgYXNzZXJ0IGlzaW5zdGFuY2UobGluZW5vLCBpbnQpIGFuZCBsaW5lbm8gPj0gMCwgXAogICAgICAgICAgICJsaW5lbm8gbXVzdCBiZSBhbiBpbnQgPj0gMCIKICAgIGl0ZW0gPSAoYWN0aW9uLCBOb25lLCBjYXRlZ29yeSwgTm9uZSwgbGluZW5vKQogICAgaWYgYXBwZW5kOgogICAgICAgIGZpbHRlcnMuYXBwZW5kKGl0ZW0pCiAgICBlbHNlOgogICAgICAgIGZpbHRlcnMuaW5zZXJ0KDAsIGl0ZW0pCgpkZWYgcmVzZXR3YXJuaW5ncygpOgogICAgIiIiQ2xlYXIgdGhlIGxpc3Qgb2Ygd2FybmluZyBmaWx0ZXJzLCBzbyB0aGF0IG5vIGZpbHRlcnMgYXJlIGFjdGl2ZS4iIiIKICAgIGZpbHRlcnNbOl0gPSBbXQoKY2xhc3MgX09wdGlvbkVycm9yKEV4Y2VwdGlvbik6CiAgICAiIiJFeGNlcHRpb24gdXNlZCBieSBvcHRpb24gcHJvY2Vzc2luZyBoZWxwZXJzLiIiIgogICAgcGFzcwoKIyBIZWxwZXIgdG8gcHJvY2VzcyAtVyBvcHRpb25zIHBhc3NlZCB2aWEgc3lzLndhcm5vcHRpb25zCmRlZiBfcHJvY2Vzc29wdGlvbnMoYXJncyk6CiAgICBmb3IgYXJnIGluIGFyZ3M6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBfc2V0b3B0aW9uKGFyZykKICAgICAgICBleGNlcHQgX09wdGlvbkVycm9yIGFzIG1zZzoKICAgICAgICAgICAgcHJpbnQoIkludmFsaWQgLVcgb3B0aW9uIGlnbm9yZWQ6IiwgbXNnLCBmaWxlPXN5cy5zdGRlcnIpCgojIEhlbHBlciBmb3IgX3Byb2Nlc3NvcHRpb25zKCkKZGVmIF9zZXRvcHRpb24oYXJnKToKICAgIGltcG9ydCByZQogICAgcGFydHMgPSBhcmcuc3BsaXQoJzonKQogICAgaWYgbGVuKHBhcnRzKSA+IDU6CiAgICAgICAgcmFpc2UgX09wdGlvbkVycm9yKCJ0b28gbWFueSBmaWVsZHMgKG1heCA1KTogJXIiICUgKGFyZywpKQogICAgd2hpbGUgbGVuKHBhcnRzKSA8IDU6CiAgICAgICAgcGFydHMuYXBwZW5kKCcnKQogICAgYWN0aW9uLCBtZXNzYWdlLCBjYXRlZ29yeSwgbW9kdWxlLCBsaW5lbm8gPSBbcy5zdHJpcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgcyBpbiBwYXJ0c10KICAgIGFjdGlvbiA9IF9nZXRhY3Rpb24oYWN0aW9uKQogICAgbWVzc2FnZSA9IHJlLmVzY2FwZShtZXNzYWdlKQogICAgY2F0ZWdvcnkgPSBfZ2V0Y2F0ZWdvcnkoY2F0ZWdvcnkpCiAgICBtb2R1bGUgPSByZS5lc2NhcGUobW9kdWxlKQogICAgaWYgbW9kdWxlOgogICAgICAgIG1vZHVsZSA9IG1vZHVsZSArICckJwogICAgaWYgbGluZW5vOgogICAgICAgIHRyeToKICAgICAgICAgICAgbGluZW5vID0gaW50KGxpbmVubykKICAgICAgICAgICAgaWYgbGluZW5vIDwgMDoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IKICAgICAgICBleGNlcHQgKFZhbHVlRXJyb3IsIE92ZXJmbG93RXJyb3IpOgogICAgICAgICAgICByYWlzZSBfT3B0aW9uRXJyb3IoImludmFsaWQgbGluZW5vICVyIiAlIChsaW5lbm8sKSkKICAgIGVsc2U6CiAgICAgICAgbGluZW5vID0gMAogICAgZmlsdGVyd2FybmluZ3MoYWN0aW9uLCBtZXNzYWdlLCBjYXRlZ29yeSwgbW9kdWxlLCBsaW5lbm8pCgojIEhlbHBlciBmb3IgX3NldG9wdGlvbigpCmRlZiBfZ2V0YWN0aW9uKGFjdGlvbik6CiAgICBpZiBub3QgYWN0aW9uOgogICAgICAgIHJldHVybiAiZGVmYXVsdCIKICAgIGlmIGFjdGlvbiA9PSAiYWxsIjogcmV0dXJuICJhbHdheXMiICMgQWxpYXMKICAgIGZvciBhIGluICgnZGVmYXVsdCcsICdhbHdheXMnLCAnaWdub3JlJywgJ21vZHVsZScsICdvbmNlJywgJ2Vycm9yJyk6CiAgICAgICAgaWYgYS5zdGFydHN3aXRoKGFjdGlvbik6CiAgICAgICAgICAgIHJldHVybiBhCiAgICByYWlzZSBfT3B0aW9uRXJyb3IoImludmFsaWQgYWN0aW9uOiAlciIgJSAoYWN0aW9uLCkpCgojIEhlbHBlciBmb3IgX3NldG9wdGlvbigpCmRlZiBfZ2V0Y2F0ZWdvcnkoY2F0ZWdvcnkpOgogICAgaW1wb3J0IHJlCiAgICBpZiBub3QgY2F0ZWdvcnk6CiAgICAgICAgcmV0dXJuIFdhcm5pbmcKICAgIGlmIHJlLm1hdGNoKCJeW2EtekEtWjAtOV9dKyQiLCBjYXRlZ29yeSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBjYXQgPSBldmFsKGNhdGVnb3J5KQogICAgICAgIGV4Y2VwdCBOYW1lRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIF9PcHRpb25FcnJvcigidW5rbm93biB3YXJuaW5nIGNhdGVnb3J5OiAlciIgJSAoY2F0ZWdvcnksKSkKICAgIGVsc2U6CiAgICAgICAgaSA9IGNhdGVnb3J5LnJmaW5kKCIuIikKICAgICAgICBtb2R1bGUgPSBjYXRlZ29yeVs6aV0KICAgICAgICBrbGFzcyA9IGNhdGVnb3J5W2krMTpdCiAgICAgICAgdHJ5OgogICAgICAgICAgICBtID0gX19pbXBvcnRfXyhtb2R1bGUsIE5vbmUsIE5vbmUsIFtrbGFzc10pCiAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICByYWlzZSBfT3B0aW9uRXJyb3IoImludmFsaWQgbW9kdWxlIG5hbWU6ICVyIiAlIChtb2R1bGUsKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNhdCA9IGdldGF0dHIobSwga2xhc3MpCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICByYWlzZSBfT3B0aW9uRXJyb3IoInVua25vd24gd2FybmluZyBjYXRlZ29yeTogJXIiICUgKGNhdGVnb3J5LCkpCiAgICBpZiBub3QgaXNzdWJjbGFzcyhjYXQsIFdhcm5pbmcpOgogICAgICAgIHJhaXNlIF9PcHRpb25FcnJvcigiaW52YWxpZCB3YXJuaW5nIGNhdGVnb3J5OiAlciIgJSAoY2F0ZWdvcnksKSkKICAgIHJldHVybiBjYXQKCgojIENvZGUgdHlwaWNhbGx5IHJlcGxhY2VkIGJ5IF93YXJuaW5ncwpkZWYgd2FybihtZXNzYWdlLCBjYXRlZ29yeT1Ob25lLCBzdGFja2xldmVsPTEpOgogICAgIiIiSXNzdWUgYSB3YXJuaW5nLCBvciBtYXliZSBpZ25vcmUgaXQgb3IgcmFpc2UgYW4gZXhjZXB0aW9uLiIiIgogICAgIyBDaGVjayBpZiBtZXNzYWdlIGlzIGFscmVhZHkgYSBXYXJuaW5nIG9iamVjdAogICAgaWYgaXNpbnN0YW5jZShtZXNzYWdlLCBXYXJuaW5nKToKICAgICAgICBjYXRlZ29yeSA9IG1lc3NhZ2UuX19jbGFzc19fCiAgICAjIENoZWNrIGNhdGVnb3J5IGFyZ3VtZW50CiAgICBpZiBjYXRlZ29yeSBpcyBOb25lOgogICAgICAgIGNhdGVnb3J5ID0gVXNlcldhcm5pbmcKICAgIGFzc2VydCBpc3N1YmNsYXNzKGNhdGVnb3J5LCBXYXJuaW5nKQogICAgIyBHZXQgY29udGV4dCBpbmZvcm1hdGlvbgogICAgdHJ5OgogICAgICAgIGNhbGxlciA9IHN5cy5fZ2V0ZnJhbWUoc3RhY2tsZXZlbCkKICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIGdsb2JhbHMgPSBzeXMuX19kaWN0X18KICAgICAgICBsaW5lbm8gPSAxCiAgICAgICAgY2FsbGVyPU5vbmUKICAgICNmaXhtZSBicnl0aG9uIGVycm9yCiAgICBlbHNlOgogICAgICAgICNpZiBjYWxsZXIgaXMgbm90IE5vbmU6CiAgICAgICAgZ2xvYmFscyA9IGNhbGxlci5mX2dsb2JhbHMKICAgICAgICBsaW5lbm8gPSBjYWxsZXIuZl9saW5lbm8KICAgIGlmICdfX25hbWVfXycgaW4gZ2xvYmFsczoKICAgICAgICBtb2R1bGUgPSBnbG9iYWxzWydfX25hbWVfXyddCiAgICBlbHNlOgogICAgICAgIG1vZHVsZSA9ICI8c3RyaW5nPiIKICAgIGZpbGVuYW1lID0gZ2xvYmFscy5nZXQoJ19fZmlsZV9fJykKICAgIGlmIGZpbGVuYW1lOgogICAgICAgIGZubCA9IGZpbGVuYW1lLmxvd2VyKCkKICAgICAgICBpZiBmbmwuZW5kc3dpdGgoKCIucHljIiwgIi5weW8iKSk6CiAgICAgICAgICAgIGZpbGVuYW1lID0gZmlsZW5hbWVbOi0xXQogICAgZWxzZToKICAgICAgICBpZiBtb2R1bGUgPT0gIl9fbWFpbl9fIjoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBzeXMuYXJndlswXQogICAgICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgICAgICAjIGVtYmVkZGVkIGludGVycHJldGVycyBkb24ndCBoYXZlIHN5cy5hcmd2LCBzZWUgYnVnICM4MzkxNTEKICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gJ19fbWFpbl9fJwogICAgICAgIGlmIG5vdCBmaWxlbmFtZToKICAgICAgICAgICAgZmlsZW5hbWUgPSBtb2R1bGUKICAgIHJlZ2lzdHJ5ID0gZ2xvYmFscy5zZXRkZWZhdWx0KCJfX3dhcm5pbmdyZWdpc3RyeV9fIiwge30pCiAgICB3YXJuX2V4cGxpY2l0KG1lc3NhZ2UsIGNhdGVnb3J5LCBmaWxlbmFtZSwgbGluZW5vLCBtb2R1bGUsIHJlZ2lzdHJ5LAogICAgICAgICAgICAgICAgICBnbG9iYWxzKQoKZGVmIHdhcm5fZXhwbGljaXQobWVzc2FnZSwgY2F0ZWdvcnksIGZpbGVuYW1lLCBsaW5lbm8sCiAgICAgICAgICAgICAgICAgIG1vZHVsZT1Ob25lLCByZWdpc3RyeT1Ob25lLCBtb2R1bGVfZ2xvYmFscz1Ob25lKToKICAgIGxpbmVubyA9IGludChsaW5lbm8pCiAgICBpZiBtb2R1bGUgaXMgTm9uZToKICAgICAgICBtb2R1bGUgPSBmaWxlbmFtZSBvciAiPHVua25vd24+IgogICAgICAgIGlmIG1vZHVsZVstMzpdLmxvd2VyKCkgPT0gIi5weSI6CiAgICAgICAgICAgIG1vZHVsZSA9IG1vZHVsZVs6LTNdICMgWFhYIFdoYXQgYWJvdXQgbGVhZGluZyBwYXRobmFtZT8KICAgIGlmIHJlZ2lzdHJ5IGlzIE5vbmU6CiAgICAgICAgcmVnaXN0cnkgPSB7fQogICAgaWYgaXNpbnN0YW5jZShtZXNzYWdlLCBXYXJuaW5nKToKICAgICAgICB0ZXh0ID0gc3RyKG1lc3NhZ2UpCiAgICAgICAgY2F0ZWdvcnkgPSBtZXNzYWdlLl9fY2xhc3NfXwogICAgZWxzZToKICAgICAgICB0ZXh0ID0gbWVzc2FnZQogICAgICAgIG1lc3NhZ2UgPSBjYXRlZ29yeShtZXNzYWdlKQogICAga2V5ID0gKHRleHQsIGNhdGVnb3J5LCBsaW5lbm8pCiAgICAjIFF1aWNrIHRlc3QgZm9yIGNvbW1vbiBjYXNlCiAgICBpZiByZWdpc3RyeS5nZXQoa2V5KToKICAgICAgICByZXR1cm4KICAgICMgU2VhcmNoIHRoZSBmaWx0ZXJzCiAgICBmb3IgaXRlbSBpbiBmaWx0ZXJzOgogICAgICAgIGFjdGlvbiwgbXNnLCBjYXQsIG1vZCwgbG4gPSBpdGVtCiAgICAgICAgaWYgKChtc2cgaXMgTm9uZSBvciBtc2cubWF0Y2godGV4dCkpIGFuZAogICAgICAgICAgICBpc3N1YmNsYXNzKGNhdGVnb3J5LCBjYXQpIGFuZAogICAgICAgICAgICAobW9kIGlzIE5vbmUgb3IgbW9kLm1hdGNoKG1vZHVsZSkpIGFuZAogICAgICAgICAgICAobG4gPT0gMCBvciBsaW5lbm8gPT0gbG4pKToKICAgICAgICAgICAgYnJlYWsKICAgICNmaXhtZSBicnl0aG9uCiAgICAjZWxzZToKICAgICMgICAgYWN0aW9uID0gZGVmYXVsdGFjdGlvbgogICAgIyBFYXJseSBleGl0IGFjdGlvbnMKICAgIGlmIGFjdGlvbiA9PSAiaWdub3JlIjoKICAgICAgICByZWdpc3RyeVtrZXldID0gMQogICAgICAgIHJldHVybgoKICAgICMgUHJpbWUgdGhlIGxpbmVjYWNoZSBmb3IgZm9ybWF0dGluZywgaW4gY2FzZSB0aGUKICAgICMgImZpbGUiIGlzIGFjdHVhbGx5IGluIGEgemlwZmlsZSBvciBzb21ldGhpbmcuCiAgICBsaW5lY2FjaGUuZ2V0bGluZXMoZmlsZW5hbWUsIG1vZHVsZV9nbG9iYWxzKQoKICAgIGlmIGFjdGlvbiA9PSAiZXJyb3IiOgogICAgICAgIHJhaXNlIG1lc3NhZ2UKICAgICMgT3RoZXIgYWN0aW9ucwogICAgaWYgYWN0aW9uID09ICJvbmNlIjoKICAgICAgICByZWdpc3RyeVtrZXldID0gMQogICAgICAgIG9uY2VrZXkgPSAodGV4dCwgY2F0ZWdvcnkpCiAgICAgICAgaWYgb25jZXJlZ2lzdHJ5LmdldChvbmNla2V5KToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgb25jZXJlZ2lzdHJ5W29uY2VrZXldID0gMQogICAgZWxpZiBhY3Rpb24gPT0gImFsd2F5cyI6CiAgICAgICAgcGFzcwogICAgZWxpZiBhY3Rpb24gPT0gIm1vZHVsZSI6CiAgICAgICAgcmVnaXN0cnlba2V5XSA9IDEKICAgICAgICBhbHRrZXkgPSAodGV4dCwgY2F0ZWdvcnksIDApCiAgICAgICAgaWYgcmVnaXN0cnkuZ2V0KGFsdGtleSk6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHJlZ2lzdHJ5W2FsdGtleV0gPSAxCiAgICBlbGlmIGFjdGlvbiA9PSAiZGVmYXVsdCI6CiAgICAgICAgcmVnaXN0cnlba2V5XSA9IDEKICAgIGVsc2U6CiAgICAgICAgIyBVbnJlY29nbml6ZWQgYWN0aW9ucyBhcmUgZXJyb3JzCiAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKAogICAgICAgICAgICAgICJVbnJlY29nbml6ZWQgYWN0aW9uICglcikgaW4gd2FybmluZ3MuZmlsdGVyczpcbiAlcyIgJQogICAgICAgICAgICAgIChhY3Rpb24sIGl0ZW0pKQogICAgaWYgbm90IGNhbGxhYmxlKHNob3d3YXJuaW5nKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoIndhcm5pbmdzLnNob3d3YXJuaW5nKCkgbXVzdCBiZSBzZXQgdG8gYSAiCiAgICAgICAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiBvciBtZXRob2QiKQogICAgIyBQcmludCBtZXNzYWdlIGFuZCBjb250ZXh0CiAgICBzaG93d2FybmluZyhtZXNzYWdlLCBjYXRlZ29yeSwgZmlsZW5hbWUsIGxpbmVubykKCgpjbGFzcyBXYXJuaW5nTWVzc2FnZShvYmplY3QpOgoKICAgICIiIkhvbGRzIHRoZSByZXN1bHQgb2YgYSBzaW5nbGUgc2hvd3dhcm5pbmcoKSBjYWxsLiIiIgoKICAgIF9XQVJOSU5HX0RFVEFJTFMgPSAoIm1lc3NhZ2UiLCAiY2F0ZWdvcnkiLCAiZmlsZW5hbWUiLCAibGluZW5vIiwgImZpbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAibGluZSIpCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1lc3NhZ2UsIGNhdGVnb3J5LCBmaWxlbmFtZSwgbGluZW5vLCBmaWxlPU5vbmUsCiAgICAgICAgICAgICAgICAgICAgbGluZT1Ob25lKToKICAgICAgICBsb2NhbF92YWx1ZXMgPSBsb2NhbHMoKQogICAgICAgIGZvciBhdHRyIGluIHNlbGYuX1dBUk5JTkdfREVUQUlMUzoKICAgICAgICAgICAgc2V0YXR0cihzZWxmLCBhdHRyLCBsb2NhbF92YWx1ZXNbYXR0cl0pCiAgICAgICAgc2VsZi5fY2F0ZWdvcnlfbmFtZSA9IGNhdGVnb3J5Ll9fbmFtZV9fIGlmIGNhdGVnb3J5IGVsc2UgTm9uZQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiAoInttZXNzYWdlIDogJXIsIGNhdGVnb3J5IDogJXIsIGZpbGVuYW1lIDogJXIsIGxpbmVubyA6ICVzLCAiCiAgICAgICAgICAgICAgICAgICAgImxpbmUgOiAlcn0iICUgKHNlbGYubWVzc2FnZSwgc2VsZi5fY2F0ZWdvcnlfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5maWxlbmFtZSwgc2VsZi5saW5lbm8sIHNlbGYubGluZSkpCgoKY2xhc3MgY2F0Y2hfd2FybmluZ3Mob2JqZWN0KToKCiAgICAiIiJBIGNvbnRleHQgbWFuYWdlciB0aGF0IGNvcGllcyBhbmQgcmVzdG9yZXMgdGhlIHdhcm5pbmdzIGZpbHRlciB1cG9uCiAgICBleGl0aW5nIHRoZSBjb250ZXh0LgoKICAgIFRoZSAncmVjb3JkJyBhcmd1bWVudCBzcGVjaWZpZXMgd2hldGhlciB3YXJuaW5ncyBzaG91bGQgYmUgY2FwdHVyZWQgYnkgYQogICAgY3VzdG9tIGltcGxlbWVudGF0aW9uIG9mIHdhcm5pbmdzLnNob3d3YXJuaW5nKCkgYW5kIGJlIGFwcGVuZGVkIHRvIGEgbGlzdAogICAgcmV0dXJuZWQgYnkgdGhlIGNvbnRleHQgbWFuYWdlci4gT3RoZXJ3aXNlIE5vbmUgaXMgcmV0dXJuZWQgYnkgdGhlIGNvbnRleHQKICAgIG1hbmFnZXIuIFRoZSBvYmplY3RzIGFwcGVuZGVkIHRvIHRoZSBsaXN0IGFyZSBhcmd1bWVudHMgd2hvc2UgYXR0cmlidXRlcwogICAgbWlycm9yIHRoZSBhcmd1bWVudHMgdG8gc2hvd3dhcm5pbmcoKS4KCiAgICBUaGUgJ21vZHVsZScgYXJndW1lbnQgaXMgdG8gc3BlY2lmeSBhbiBhbHRlcm5hdGl2ZSBtb2R1bGUgdG8gdGhlIG1vZHVsZQogICAgbmFtZWQgJ3dhcm5pbmdzJyBhbmQgaW1wb3J0ZWQgdW5kZXIgdGhhdCBuYW1lLiBUaGlzIGFyZ3VtZW50IGlzIG9ubHkgdXNlZnVsCiAgICB3aGVuIHRlc3RpbmcgdGhlIHdhcm5pbmdzIG1vZHVsZSBpdHNlbGYuCgogICAgIiIiCgogICAgI2RlZiBfX2luaXRfXyhzZWxmLCAqLCByZWNvcmQ9RmFsc2UsIG1vZHVsZT1Ob25lKTogIEJFIG1vZGlmaWVkCiAgICBkZWYgX19pbml0X18oc2VsZiwgcmVjb3JkPUZhbHNlLCBtb2R1bGU9Tm9uZSk6CiAgICAgICAgIiIiU3BlY2lmeSB3aGV0aGVyIHRvIHJlY29yZCB3YXJuaW5ncyBhbmQgaWYgYW4gYWx0ZXJuYXRpdmUgbW9kdWxlCiAgICAgICAgc2hvdWxkIGJlIHVzZWQgb3RoZXIgdGhhbiBzeXMubW9kdWxlc1snd2FybmluZ3MnXS4KCiAgICAgICAgRm9yIGNvbXBhdGliaWxpdHkgd2l0aCBQeXRob24gMy4wLCBwbGVhc2UgY29uc2lkZXIgYWxsIGFyZ3VtZW50cyB0byBiZQogICAgICAgIGtleXdvcmQtb25seS4KCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fcmVjb3JkID0gcmVjb3JkCiAgICAgICAgc2VsZi5fbW9kdWxlID0gc3lzLm1vZHVsZXNbJ3dhcm5pbmdzJ10gaWYgbW9kdWxlIGlzIE5vbmUgZWxzZSBtb2R1bGUKICAgICAgICBzZWxmLl9lbnRlcmVkID0gRmFsc2UKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgYXJncyA9IFtdCiAgICAgICAgaWYgc2VsZi5fcmVjb3JkOgogICAgICAgICAgICBhcmdzLmFwcGVuZCgicmVjb3JkPVRydWUiKQogICAgICAgIGlmIHNlbGYuX21vZHVsZSBpcyBub3Qgc3lzLm1vZHVsZXNbJ3dhcm5pbmdzJ106CiAgICAgICAgICAgIGFyZ3MuYXBwZW5kKCJtb2R1bGU9JXIiICUgc2VsZi5fbW9kdWxlKQogICAgICAgIG5hbWUgPSB0eXBlKHNlbGYpLl9fbmFtZV9fCiAgICAgICAgcmV0dXJuICIlcyglcykiICUgKG5hbWUsICIsICIuam9pbihhcmdzKSkKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX2VudGVyZWQ6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IGVudGVyICVyIHR3aWNlIiAlIHNlbGYpCiAgICAgICAgc2VsZi5fZW50ZXJlZCA9IFRydWUKICAgICAgICBzZWxmLl9maWx0ZXJzID0gc2VsZi5fbW9kdWxlLmZpbHRlcnMKICAgICAgICBzZWxmLl9tb2R1bGUuZmlsdGVycyA9IHNlbGYuX2ZpbHRlcnNbOl0KICAgICAgICBzZWxmLl9zaG93d2FybmluZyA9IHNlbGYuX21vZHVsZS5zaG93d2FybmluZwogICAgICAgIGlmIHNlbGYuX3JlY29yZDoKICAgICAgICAgICAgbG9nID0gW10KICAgICAgICAgICAgZGVmIHNob3d3YXJuaW5nKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgICAgICAgICBsb2cuYXBwZW5kKFdhcm5pbmdNZXNzYWdlKCphcmdzLCAqKmt3YXJncykpCiAgICAgICAgICAgIHNlbGYuX21vZHVsZS5zaG93d2FybmluZyA9IHNob3d3YXJuaW5nCiAgICAgICAgICAgIHJldHVybiBsb2cKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqZXhjX2luZm8pOgogICAgICAgIGlmIG5vdCBzZWxmLl9lbnRlcmVkOgogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBleGl0ICVyIHdpdGhvdXQgZW50ZXJpbmcgZmlyc3QiICUgc2VsZikKICAgICAgICBzZWxmLl9tb2R1bGUuZmlsdGVycyA9IHNlbGYuX2ZpbHRlcnMKICAgICAgICBzZWxmLl9tb2R1bGUuc2hvd3dhcm5pbmcgPSBzZWxmLl9zaG93d2FybmluZwoKCiMgZmlsdGVycyBjb250YWlucyBhIHNlcXVlbmNlIG9mIGZpbHRlciA1LXR1cGxlcwojIFRoZSBjb21wb25lbnRzIG9mIHRoZSA1LXR1cGxlIGFyZToKIyAtIGFuIGFjdGlvbjogZXJyb3IsIGlnbm9yZSwgYWx3YXlzLCBkZWZhdWx0LCBtb2R1bGUsIG9yIG9uY2UKIyAtIGEgY29tcGlsZWQgcmVnZXggdGhhdCBtdXN0IG1hdGNoIHRoZSB3YXJuaW5nIG1lc3NhZ2UKIyAtIGEgY2xhc3MgcmVwcmVzZW50aW5nIHRoZSB3YXJuaW5nIGNhdGVnb3J5CiMgLSBhIGNvbXBpbGVkIHJlZ2V4IHRoYXQgbXVzdCBtYXRjaCB0aGUgbW9kdWxlIHRoYXQgaXMgYmVpbmcgd2FybmVkCiMgLSBhIGxpbmUgbnVtYmVyIGZvciB0aGUgbGluZSBiZWluZyB3YXJuaW5nLCBvciAwIHRvIG1lYW4gYW55IGxpbmUKIyBJZiBlaXRoZXIgaWYgdGhlIGNvbXBpbGVkIHJlZ2V4cyBhcmUgTm9uZSwgbWF0Y2ggYW55dGhpbmcuCl93YXJuaW5nc19kZWZhdWx0cyA9IEZhbHNlCnRyeToKICAgIGZyb20gX3dhcm5pbmdzIGltcG9ydCAoZmlsdGVycywgX2RlZmF1bHRhY3Rpb24sIF9vbmNlcmVnaXN0cnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuLCB3YXJuX2V4cGxpY2l0KQogICAgZGVmYXVsdGFjdGlvbiA9IF9kZWZhdWx0YWN0aW9uCiAgICBvbmNlcmVnaXN0cnkgPSBfb25jZXJlZ2lzdHJ5CiAgICBfd2FybmluZ3NfZGVmYXVsdHMgPSBUcnVlCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGZpbHRlcnMgPSBbXQogICAgZGVmYXVsdGFjdGlvbiA9ICJkZWZhdWx0IgogICAgb25jZXJlZ2lzdHJ5ID0ge30KCgojIE1vZHVsZSBpbml0aWFsaXphdGlvbgpfcHJvY2Vzc29wdGlvbnMoc3lzLndhcm5vcHRpb25zKQppZiBub3QgX3dhcm5pbmdzX2RlZmF1bHRzOgogICAgc2lsZW5jZSA9IFtJbXBvcnRXYXJuaW5nLCBQZW5kaW5nRGVwcmVjYXRpb25XYXJuaW5nXQogICAgc2lsZW5jZS5hcHBlbmQoRGVwcmVjYXRpb25XYXJuaW5nKQogICAgZm9yIGNscyBpbiBzaWxlbmNlOgogICAgICAgIHNpbXBsZWZpbHRlcigiaWdub3JlIiwgY2F0ZWdvcnk9Y2xzKQogICAgYnl0ZXNfd2FybmluZyA9IHN5cy5mbGFncy5ieXRlc193YXJuaW5nCiAgICBpZiBieXRlc193YXJuaW5nID4gMToKICAgICAgICBieXRlc19hY3Rpb24gPSAiZXJyb3IiCiAgICBlbGlmIGJ5dGVzX3dhcm5pbmc6CiAgICAgICAgYnl0ZXNfYWN0aW9uID0gImRlZmF1bHQiCiAgICBlbHNlOgogICAgICAgIGJ5dGVzX2FjdGlvbiA9ICJpZ25vcmUiCiAgICBzaW1wbGVmaWx0ZXIoYnl0ZXNfYWN0aW9uLCBjYXRlZ29yeT1CeXRlc1dhcm5pbmcsIGFwcGVuZD0xKQogICAgIyByZXNvdXJjZSB1c2FnZSB3YXJuaW5ncyBhcmUgZW5hYmxlZCBieSBkZWZhdWx0IGluIHB5ZGVidWcgbW9kZQogICAgaWYgaGFzYXR0cihzeXMsICdnZXR0b3RhbHJlZmNvdW50Jyk6CiAgICAgICAgcmVzb3VyY2VfYWN0aW9uID0gImFsd2F5cyIKICAgIGVsc2U6CiAgICAgICAgcmVzb3VyY2VfYWN0aW9uID0gImlnbm9yZSIKICAgIHNpbXBsZWZpbHRlcihyZXNvdXJjZV9hY3Rpb24sIGNhdGVnb3J5PVJlc291cmNlV2FybmluZywgYXBwZW5kPTEpCgojZml4bWUgYnJ5dGhvbiBFcnJvcjogX3dhcm5pbmdzX2RlZmF1bHRzIGlzIG5vdCBkZWZpbmVkCiNkZWwgX3dhcm5pbmdzX2RlZmF1bHRzCg==',
'/Lib/difflib.py':'IyEgL3Vzci9iaW4vZW52IHB5dGhvbjMKCiIiIgpNb2R1bGUgZGlmZmxpYiAtLSBoZWxwZXJzIGZvciBjb21wdXRpbmcgZGVsdGFzIGJldHdlZW4gb2JqZWN0cy4KCkZ1bmN0aW9uIGdldF9jbG9zZV9tYXRjaGVzKHdvcmQsIHBvc3NpYmlsaXRpZXMsIG49MywgY3V0b2ZmPTAuNik6CiAgICBVc2UgU2VxdWVuY2VNYXRjaGVyIHRvIHJldHVybiBsaXN0IG9mIHRoZSBiZXN0ICJnb29kIGVub3VnaCIgbWF0Y2hlcy4KCkZ1bmN0aW9uIGNvbnRleHRfZGlmZihhLCBiKToKICAgIEZvciB0d28gbGlzdHMgb2Ygc3RyaW5ncywgcmV0dXJuIGEgZGVsdGEgaW4gY29udGV4dCBkaWZmIGZvcm1hdC4KCkZ1bmN0aW9uIG5kaWZmKGEsIGIpOgogICAgUmV0dXJuIGEgZGVsdGE6IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gYGFgIGFuZCBgYmAgKGxpc3RzIG9mIHN0cmluZ3MpLgoKRnVuY3Rpb24gcmVzdG9yZShkZWx0YSwgd2hpY2gpOgogICAgUmV0dXJuIG9uZSBvZiB0aGUgdHdvIHNlcXVlbmNlcyB0aGF0IGdlbmVyYXRlZCBhbiBuZGlmZiBkZWx0YS4KCkZ1bmN0aW9uIHVuaWZpZWRfZGlmZihhLCBiKToKICAgIEZvciB0d28gbGlzdHMgb2Ygc3RyaW5ncywgcmV0dXJuIGEgZGVsdGEgaW4gdW5pZmllZCBkaWZmIGZvcm1hdC4KCkNsYXNzIFNlcXVlbmNlTWF0Y2hlcjoKICAgIEEgZmxleGlibGUgY2xhc3MgZm9yIGNvbXBhcmluZyBwYWlycyBvZiBzZXF1ZW5jZXMgb2YgYW55IHR5cGUuCgpDbGFzcyBEaWZmZXI6CiAgICBGb3IgcHJvZHVjaW5nIGh1bWFuLXJlYWRhYmxlIGRlbHRhcyBmcm9tIHNlcXVlbmNlcyBvZiBsaW5lcyBvZiB0ZXh0LgoKQ2xhc3MgSHRtbERpZmY6CiAgICBGb3IgcHJvZHVjaW5nIEhUTUwgc2lkZSBieSBzaWRlIGNvbXBhcmlzb24gd2l0aCBjaGFuZ2UgaGlnaGxpZ2h0cy4KIiIiCgpfX2FsbF9fID0gWydnZXRfY2xvc2VfbWF0Y2hlcycsICduZGlmZicsICdyZXN0b3JlJywgJ1NlcXVlbmNlTWF0Y2hlcicsCiAgICAgICAgICAgJ0RpZmZlcicsJ0lTX0NIQVJBQ1RFUl9KVU5LJywgJ0lTX0xJTkVfSlVOSycsICdjb250ZXh0X2RpZmYnLAogICAgICAgICAgICd1bmlmaWVkX2RpZmYnLCAnSHRtbERpZmYnLCAnTWF0Y2gnXQoKaW1wb3J0IHdhcm5pbmdzCmltcG9ydCBoZWFwcQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBuYW1lZHR1cGxlIGFzIF9uYW1lZHR1cGxlCgpNYXRjaCA9IF9uYW1lZHR1cGxlKCdNYXRjaCcsICdhIGIgc2l6ZScpCgpkZWYgX2NhbGN1bGF0ZV9yYXRpbyhtYXRjaGVzLCBsZW5ndGgpOgogICAgaWYgbGVuZ3RoOgogICAgICAgIHJldHVybiAyLjAgKiBtYXRjaGVzIC8gbGVuZ3RoCiAgICByZXR1cm4gMS4wCgpjbGFzcyBTZXF1ZW5jZU1hdGNoZXI6CgogICAgIiIiCiAgICBTZXF1ZW5jZU1hdGNoZXIgaXMgYSBmbGV4aWJsZSBjbGFzcyBmb3IgY29tcGFyaW5nIHBhaXJzIG9mIHNlcXVlbmNlcyBvZgogICAgYW55IHR5cGUsIHNvIGxvbmcgYXMgdGhlIHNlcXVlbmNlIGVsZW1lbnRzIGFyZSBoYXNoYWJsZS4gIFRoZSBiYXNpYwogICAgYWxnb3JpdGhtIHByZWRhdGVzLCBhbmQgaXMgYSBsaXR0bGUgZmFuY2llciB0aGFuLCBhbiBhbGdvcml0aG0KICAgIHB1Ymxpc2hlZCBpbiB0aGUgbGF0ZSAxOTgwJ3MgYnkgUmF0Y2xpZmYgYW5kIE9iZXJzaGVscCB1bmRlciB0aGUKICAgIGh5cGVyYm9saWMgbmFtZSAiZ2VzdGFsdCBwYXR0ZXJuIG1hdGNoaW5nIi4gIFRoZSBiYXNpYyBpZGVhIGlzIHRvIGZpbmQKICAgIHRoZSBsb25nZXN0IGNvbnRpZ3VvdXMgbWF0Y2hpbmcgc3Vic2VxdWVuY2UgdGhhdCBjb250YWlucyBubyAianVuayIKICAgIGVsZW1lbnRzIChSLU8gZG9lc24ndCBhZGRyZXNzIGp1bmspLiAgVGhlIHNhbWUgaWRlYSBpcyB0aGVuIGFwcGxpZWQKICAgIHJlY3Vyc2l2ZWx5IHRvIHRoZSBwaWVjZXMgb2YgdGhlIHNlcXVlbmNlcyB0byB0aGUgbGVmdCBhbmQgdG8gdGhlIHJpZ2h0CiAgICBvZiB0aGUgbWF0Y2hpbmcgc3Vic2VxdWVuY2UuICBUaGlzIGRvZXMgbm90IHlpZWxkIG1pbmltYWwgZWRpdAogICAgc2VxdWVuY2VzLCBidXQgZG9lcyB0ZW5kIHRvIHlpZWxkIG1hdGNoZXMgdGhhdCAibG9vayByaWdodCIgdG8gcGVvcGxlLgoKICAgIFNlcXVlbmNlTWF0Y2hlciB0cmllcyB0byBjb21wdXRlIGEgImh1bWFuLWZyaWVuZGx5IGRpZmYiIGJldHdlZW4gdHdvCiAgICBzZXF1ZW5jZXMuICBVbmxpa2UgZS5nLiBVTklYKHRtKSBkaWZmLCB0aGUgZnVuZGFtZW50YWwgbm90aW9uIGlzIHRoZQogICAgbG9uZ2VzdCAqY29udGlndW91cyogJiBqdW5rLWZyZWUgbWF0Y2hpbmcgc3Vic2VxdWVuY2UuICBUaGF0J3Mgd2hhdAogICAgY2F0Y2hlcyBwZW9wbGVzJyBleWVzLiAgVGhlIFdpbmRvd3ModG0pIHdpbmRpZmYgaGFzIGFub3RoZXIgaW50ZXJlc3RpbmcKICAgIG5vdGlvbiwgcGFpcmluZyB1cCBlbGVtZW50cyB0aGF0IGFwcGVhciB1bmlxdWVseSBpbiBlYWNoIHNlcXVlbmNlLgogICAgVGhhdCwgYW5kIHRoZSBtZXRob2QgaGVyZSwgYXBwZWFyIHRvIHlpZWxkIG1vcmUgaW50dWl0aXZlIGRpZmZlcmVuY2UKICAgIHJlcG9ydHMgdGhhbiBkb2VzIGRpZmYuICBUaGlzIG1ldGhvZCBhcHBlYXJzIHRvIGJlIHRoZSBsZWFzdCB2dWxuZXJhYmxlCiAgICB0byBzeW5jaGluZyB1cCBvbiBibG9ja3Mgb2YgImp1bmsgbGluZXMiLCB0aG91Z2ggKGxpa2UgYmxhbmsgbGluZXMgaW4KICAgIG9yZGluYXJ5IHRleHQgZmlsZXMsIG9yIG1heWJlICI8UD4iIGxpbmVzIGluIEhUTUwgZmlsZXMpLiAgVGhhdCBtYXkgYmUKICAgIGJlY2F1c2UgdGhpcyBpcyB0aGUgb25seSBtZXRob2Qgb2YgdGhlIDMgdGhhdCBoYXMgYSAqY29uY2VwdCogb2YKICAgICJqdW5rIiA8d2luaz4uCgogICAgRXhhbXBsZSwgY29tcGFyaW5nIHR3byBzdHJpbmdzLCBhbmQgY29uc2lkZXJpbmcgYmxhbmtzIHRvIGJlICJqdW5rIjoKCiAgICA+Pj4gcyA9IFNlcXVlbmNlTWF0Y2hlcihsYW1iZGEgeDogeCA9PSAiICIsCiAgICAuLi4gICAgICAgICAgICAgICAgICAgICAicHJpdmF0ZSBUaHJlYWQgY3VycmVudFRocmVhZDsiLAogICAgLi4uICAgICAgICAgICAgICAgICAgICAgInByaXZhdGUgdm9sYXRpbGUgVGhyZWFkIGN1cnJlbnRUaHJlYWQ7IikKICAgID4+PgoKICAgIC5yYXRpbygpIHJldHVybnMgYSBmbG9hdCBpbiBbMCwgMV0sIG1lYXN1cmluZyB0aGUgInNpbWlsYXJpdHkiIG9mIHRoZQogICAgc2VxdWVuY2VzLiAgQXMgYSBydWxlIG9mIHRodW1iLCBhIC5yYXRpbygpIHZhbHVlIG92ZXIgMC42IG1lYW5zIHRoZQogICAgc2VxdWVuY2VzIGFyZSBjbG9zZSBtYXRjaGVzOgoKICAgID4+PiBwcmludChyb3VuZChzLnJhdGlvKCksIDMpKQogICAgMC44NjYKICAgID4+PgoKICAgIElmIHlvdSdyZSBvbmx5IGludGVyZXN0ZWQgaW4gd2hlcmUgdGhlIHNlcXVlbmNlcyBtYXRjaCwKICAgIC5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkgaXMgaGFuZHk6CgogICAgPj4+IGZvciBibG9jayBpbiBzLmdldF9tYXRjaGluZ19ibG9ja3MoKToKICAgIC4uLiAgICAgcHJpbnQoImFbJWRdIGFuZCBiWyVkXSBtYXRjaCBmb3IgJWQgZWxlbWVudHMiICUgYmxvY2spCiAgICBhWzBdIGFuZCBiWzBdIG1hdGNoIGZvciA4IGVsZW1lbnRzCiAgICBhWzhdIGFuZCBiWzE3XSBtYXRjaCBmb3IgMjEgZWxlbWVudHMKICAgIGFbMjldIGFuZCBiWzM4XSBtYXRjaCBmb3IgMCBlbGVtZW50cwoKICAgIE5vdGUgdGhhdCB0aGUgbGFzdCB0dXBsZSByZXR1cm5lZCBieSAuZ2V0X21hdGNoaW5nX2Jsb2NrcygpIGlzIGFsd2F5cyBhCiAgICBkdW1teSwgKGxlbihhKSwgbGVuKGIpLCAwKSwgYW5kIHRoaXMgaXMgdGhlIG9ubHkgY2FzZSBpbiB3aGljaCB0aGUgbGFzdAogICAgdHVwbGUgZWxlbWVudCAobnVtYmVyIG9mIGVsZW1lbnRzIG1hdGNoZWQpIGlzIDAuCgogICAgSWYgeW91IHdhbnQgdG8ga25vdyBob3cgdG8gY2hhbmdlIHRoZSBmaXJzdCBzZXF1ZW5jZSBpbnRvIHRoZSBzZWNvbmQsCiAgICB1c2UgLmdldF9vcGNvZGVzKCk6CgogICAgPj4+IGZvciBvcGNvZGUgaW4gcy5nZXRfb3Bjb2RlcygpOgogICAgLi4uICAgICBwcmludCgiJTZzIGFbJWQ6JWRdIGJbJWQ6JWRdIiAlIG9wY29kZSkKICAgICBlcXVhbCBhWzA6OF0gYlswOjhdCiAgICBpbnNlcnQgYVs4OjhdIGJbODoxN10KICAgICBlcXVhbCBhWzg6MjldIGJbMTc6MzhdCgogICAgU2VlIHRoZSBEaWZmZXIgY2xhc3MgZm9yIGEgZmFuY3kgaHVtYW4tZnJpZW5kbHkgZmlsZSBkaWZmZXJlbmNlciwgd2hpY2gKICAgIHVzZXMgU2VxdWVuY2VNYXRjaGVyIGJvdGggdG8gY29tcGFyZSBzZXF1ZW5jZXMgb2YgbGluZXMsIGFuZCB0byBjb21wYXJlCiAgICBzZXF1ZW5jZXMgb2YgY2hhcmFjdGVycyB3aXRoaW4gc2ltaWxhciAobmVhci1tYXRjaGluZykgbGluZXMuCgogICAgU2VlIGFsc28gZnVuY3Rpb24gZ2V0X2Nsb3NlX21hdGNoZXMoKSBpbiB0aGlzIG1vZHVsZSwgd2hpY2ggc2hvd3MgaG93CiAgICBzaW1wbGUgY29kZSBidWlsZGluZyBvbiBTZXF1ZW5jZU1hdGNoZXIgY2FuIGJlIHVzZWQgdG8gZG8gdXNlZnVsIHdvcmsuCgogICAgVGltaW5nOiAgQmFzaWMgUi1PIGlzIGN1YmljIHRpbWUgd29yc3QgY2FzZSBhbmQgcXVhZHJhdGljIHRpbWUgZXhwZWN0ZWQKICAgIGNhc2UuICBTZXF1ZW5jZU1hdGNoZXIgaXMgcXVhZHJhdGljIHRpbWUgZm9yIHRoZSB3b3JzdCBjYXNlIGFuZCBoYXMKICAgIGV4cGVjdGVkLWNhc2UgYmVoYXZpb3IgZGVwZW5kZW50IGluIGEgY29tcGxpY2F0ZWQgd2F5IG9uIGhvdyBtYW55CiAgICBlbGVtZW50cyB0aGUgc2VxdWVuY2VzIGhhdmUgaW4gY29tbW9uOyBiZXN0IGNhc2UgdGltZSBpcyBsaW5lYXIuCgogICAgTWV0aG9kczoKCiAgICBfX2luaXRfXyhpc2p1bms9Tm9uZSwgYT0nJywgYj0nJykKICAgICAgICBDb25zdHJ1Y3QgYSBTZXF1ZW5jZU1hdGNoZXIuCgogICAgc2V0X3NlcXMoYSwgYikKICAgICAgICBTZXQgdGhlIHR3byBzZXF1ZW5jZXMgdG8gYmUgY29tcGFyZWQuCgogICAgc2V0X3NlcTEoYSkKICAgICAgICBTZXQgdGhlIGZpcnN0IHNlcXVlbmNlIHRvIGJlIGNvbXBhcmVkLgoKICAgIHNldF9zZXEyKGIpCiAgICAgICAgU2V0IHRoZSBzZWNvbmQgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQuCgogICAgZmluZF9sb25nZXN0X21hdGNoKGFsbywgYWhpLCBibG8sIGJoaSkKICAgICAgICBGaW5kIGxvbmdlc3QgbWF0Y2hpbmcgYmxvY2sgaW4gYVthbG86YWhpXSBhbmQgYltibG86YmhpXS4KCiAgICBnZXRfbWF0Y2hpbmdfYmxvY2tzKCkKICAgICAgICBSZXR1cm4gbGlzdCBvZiB0cmlwbGVzIGRlc2NyaWJpbmcgbWF0Y2hpbmcgc3Vic2VxdWVuY2VzLgoKICAgIGdldF9vcGNvZGVzKCkKICAgICAgICBSZXR1cm4gbGlzdCBvZiA1LXR1cGxlcyBkZXNjcmliaW5nIGhvdyB0byB0dXJuIGEgaW50byBiLgoKICAgIHJhdGlvKCkKICAgICAgICBSZXR1cm4gYSBtZWFzdXJlIG9mIHRoZSBzZXF1ZW5jZXMnIHNpbWlsYXJpdHkgKGZsb2F0IGluIFswLDFdKS4KCiAgICBxdWlja19yYXRpbygpCiAgICAgICAgUmV0dXJuIGFuIHVwcGVyIGJvdW5kIG9uIC5yYXRpbygpIHJlbGF0aXZlbHkgcXVpY2tseS4KCiAgICByZWFsX3F1aWNrX3JhdGlvKCkKICAgICAgICBSZXR1cm4gYW4gdXBwZXIgYm91bmQgb24gcmF0aW8oKSB2ZXJ5IHF1aWNrbHkuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaXNqdW5rPU5vbmUsIGE9JycsIGI9JycsIGF1dG9qdW5rPVRydWUpOgogICAgICAgICIiIkNvbnN0cnVjdCBhIFNlcXVlbmNlTWF0Y2hlci4KCiAgICAgICAgT3B0aW9uYWwgYXJnIGlzanVuayBpcyBOb25lICh0aGUgZGVmYXVsdCksIG9yIGEgb25lLWFyZ3VtZW50CiAgICAgICAgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHNlcXVlbmNlIGVsZW1lbnQgYW5kIHJldHVybnMgdHJ1ZSBpZmYgdGhlCiAgICAgICAgZWxlbWVudCBpcyBqdW5rLiAgTm9uZSBpcyBlcXVpdmFsZW50IHRvIHBhc3NpbmcgImxhbWJkYSB4OiAwIiwgaS5lLgogICAgICAgIG5vIGVsZW1lbnRzIGFyZSBjb25zaWRlcmVkIHRvIGJlIGp1bmsuICBGb3IgZXhhbXBsZSwgcGFzcwogICAgICAgICAgICBsYW1iZGEgeDogeCBpbiAiIFxcdCIKICAgICAgICBpZiB5b3UncmUgY29tcGFyaW5nIGxpbmVzIGFzIHNlcXVlbmNlcyBvZiBjaGFyYWN0ZXJzLCBhbmQgZG9uJ3QKICAgICAgICB3YW50IHRvIHN5bmNoIHVwIG9uIGJsYW5rcyBvciBoYXJkIHRhYnMuCgogICAgICAgIE9wdGlvbmFsIGFyZyBhIGlzIHRoZSBmaXJzdCBvZiB0d28gc2VxdWVuY2VzIHRvIGJlIGNvbXBhcmVkLiAgQnkKICAgICAgICBkZWZhdWx0LCBhbiBlbXB0eSBzdHJpbmcuICBUaGUgZWxlbWVudHMgb2YgYSBtdXN0IGJlIGhhc2hhYmxlLiAgU2VlCiAgICAgICAgYWxzbyAuc2V0X3NlcXMoKSBhbmQgLnNldF9zZXExKCkuCgogICAgICAgIE9wdGlvbmFsIGFyZyBiIGlzIHRoZSBzZWNvbmQgb2YgdHdvIHNlcXVlbmNlcyB0byBiZSBjb21wYXJlZC4gIEJ5CiAgICAgICAgZGVmYXVsdCwgYW4gZW1wdHkgc3RyaW5nLiAgVGhlIGVsZW1lbnRzIG9mIGIgbXVzdCBiZSBoYXNoYWJsZS4gU2VlCiAgICAgICAgYWxzbyAuc2V0X3NlcXMoKSBhbmQgLnNldF9zZXEyKCkuCgogICAgICAgIE9wdGlvbmFsIGFyZyBhdXRvanVuayBzaG91bGQgYmUgc2V0IHRvIEZhbHNlIHRvIGRpc2FibGUgdGhlCiAgICAgICAgImF1dG9tYXRpYyBqdW5rIGhldXJpc3RpYyIgdGhhdCB0cmVhdHMgcG9wdWxhciBlbGVtZW50cyBhcyBqdW5rCiAgICAgICAgKHNlZSBtb2R1bGUgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbikuCiAgICAgICAgIiIiCgogICAgICAgICMgTWVtYmVyczoKICAgICAgICAjIGEKICAgICAgICAjICAgICAgZmlyc3Qgc2VxdWVuY2UKICAgICAgICAjIGIKICAgICAgICAjICAgICAgc2Vjb25kIHNlcXVlbmNlOyBkaWZmZXJlbmNlcyBhcmUgY29tcHV0ZWQgYXMgIndoYXQgZG8KICAgICAgICAjICAgICAgd2UgbmVlZCB0byBkbyB0byAnYScgdG8gY2hhbmdlIGl0IGludG8gJ2InPyIKICAgICAgICAjIGIyagogICAgICAgICMgICAgICBmb3IgeCBpbiBiLCBiMmpbeF0gaXMgYSBsaXN0IG9mIHRoZSBpbmRpY2VzIChpbnRvIGIpCiAgICAgICAgIyAgICAgIGF0IHdoaWNoIHggYXBwZWFyczsganVuayBhbmQgcG9wdWxhciBlbGVtZW50cyBkbyBub3QgYXBwZWFyCiAgICAgICAgIyBmdWxsYmNvdW50CiAgICAgICAgIyAgICAgIGZvciB4IGluIGIsIGZ1bGxiY291bnRbeF0gPT0gdGhlIG51bWJlciBvZiB0aW1lcyB4CiAgICAgICAgIyAgICAgIGFwcGVhcnMgaW4gYjsgb25seSBtYXRlcmlhbGl6ZWQgaWYgcmVhbGx5IG5lZWRlZCAodXNlZAogICAgICAgICMgICAgICBvbmx5IGZvciBjb21wdXRpbmcgcXVpY2tfcmF0aW8oKSkKICAgICAgICAjIG1hdGNoaW5nX2Jsb2NrcwogICAgICAgICMgICAgICBhIGxpc3Qgb2YgKGksIGosIGspIHRyaXBsZXMsIHdoZXJlIGFbaTppK2tdID09IGJbajpqK2tdOwogICAgICAgICMgICAgICBhc2NlbmRpbmcgJiBub24tb3ZlcmxhcHBpbmcgaW4gaSBhbmQgaW4gajsgdGVybWluYXRlZCBieQogICAgICAgICMgICAgICBhIGR1bW15IChsZW4oYSksIGxlbihiKSwgMCkgc2VudGluZWwKICAgICAgICAjIG9wY29kZXMKICAgICAgICAjICAgICAgYSBsaXN0IG9mICh0YWcsIGkxLCBpMiwgajEsIGoyKSB0dXBsZXMsIHdoZXJlIHRhZyBpcwogICAgICAgICMgICAgICBvbmUgb2YKICAgICAgICAjICAgICAgICAgICdyZXBsYWNlJyAgIGFbaTE6aTJdIHNob3VsZCBiZSByZXBsYWNlZCBieSBiW2oxOmoyXQogICAgICAgICMgICAgICAgICAgJ2RlbGV0ZScgICAgYVtpMTppMl0gc2hvdWxkIGJlIGRlbGV0ZWQKICAgICAgICAjICAgICAgICAgICdpbnNlcnQnICAgIGJbajE6ajJdIHNob3VsZCBiZSBpbnNlcnRlZAogICAgICAgICMgICAgICAgICAgJ2VxdWFsJyAgICAgYVtpMTppMl0gPT0gYltqMTpqMl0KICAgICAgICAjIGlzanVuawogICAgICAgICMgICAgICBhIHVzZXItc3VwcGxpZWQgZnVuY3Rpb24gdGFraW5nIGEgc2VxdWVuY2UgZWxlbWVudCBhbmQKICAgICAgICAjICAgICAgcmV0dXJuaW5nIHRydWUgaWZmIHRoZSBlbGVtZW50IGlzICJqdW5rIiAtLSB0aGlzIGhhcwogICAgICAgICMgICAgICBzdWJ0bGUgYnV0IGhlbHBmdWwgZWZmZWN0cyBvbiB0aGUgYWxnb3JpdGhtLCB3aGljaCBJJ2xsCiAgICAgICAgIyAgICAgIGdldCBhcm91bmQgdG8gd3JpdGluZyB1cCBzb21lZGF5IDwwLjkgd2luaz4uCiAgICAgICAgIyAgICAgIERPTidUIFVTRSEgIE9ubHkgX19jaGFpbl9iIHVzZXMgdGhpcy4gIFVzZSAiaW4gc2VsZi5ianVuayIuCiAgICAgICAgIyBianVuawogICAgICAgICMgICAgICB0aGUgaXRlbXMgaW4gYiBmb3Igd2hpY2ggaXNqdW5rIGlzIFRydWUuCiAgICAgICAgIyBicG9wdWxhcgogICAgICAgICMgICAgICBub25qdW5rIGl0ZW1zIGluIGIgdHJlYXRlZCBhcyBqdW5rIGJ5IHRoZSBoZXVyaXN0aWMgKGlmIHVzZWQpLgoKICAgICAgICBzZWxmLmlzanVuayA9IGlzanVuawogICAgICAgIHNlbGYuYSA9IHNlbGYuYiA9IE5vbmUKICAgICAgICBzZWxmLmF1dG9qdW5rID0gYXV0b2p1bmsKICAgICAgICBzZWxmLnNldF9zZXFzKGEsIGIpCgogICAgZGVmIHNldF9zZXFzKHNlbGYsIGEsIGIpOgogICAgICAgICIiIlNldCB0aGUgdHdvIHNlcXVlbmNlcyB0byBiZSBjb21wYXJlZC4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoKQogICAgICAgID4+PiBzLnNldF9zZXFzKCJhYmNkIiwgImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAwLjc1CiAgICAgICAgIiIiCgogICAgICAgIHNlbGYuc2V0X3NlcTEoYSkKICAgICAgICBzZWxmLnNldF9zZXEyKGIpCgogICAgZGVmIHNldF9zZXExKHNlbGYsIGEpOgogICAgICAgICIiIlNldCB0aGUgZmlyc3Qgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQuCgogICAgICAgIFRoZSBzZWNvbmQgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQgaXMgbm90IGNoYW5nZWQuCgogICAgICAgID4+PiBzID0gU2VxdWVuY2VNYXRjaGVyKE5vbmUsICJhYmNkIiwgImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAwLjc1CiAgICAgICAgPj4+IHMuc2V0X3NlcTEoImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAxLjAKICAgICAgICA+Pj4KCiAgICAgICAgU2VxdWVuY2VNYXRjaGVyIGNvbXB1dGVzIGFuZCBjYWNoZXMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgdGhlCiAgICAgICAgc2Vjb25kIHNlcXVlbmNlLCBzbyBpZiB5b3Ugd2FudCB0byBjb21wYXJlIG9uZSBzZXF1ZW5jZSBTIGFnYWluc3QKICAgICAgICBtYW55IHNlcXVlbmNlcywgdXNlIC5zZXRfc2VxMihTKSBvbmNlIGFuZCBjYWxsIC5zZXRfc2VxMSh4KQogICAgICAgIHJlcGVhdGVkbHkgZm9yIGVhY2ggb2YgdGhlIG90aGVyIHNlcXVlbmNlcy4KCiAgICAgICAgU2VlIGFsc28gc2V0X3NlcXMoKSBhbmQgc2V0X3NlcTIoKS4KICAgICAgICAiIiIKCiAgICAgICAgaWYgYSBpcyBzZWxmLmE6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHNlbGYuYSA9IGEKICAgICAgICBzZWxmLm1hdGNoaW5nX2Jsb2NrcyA9IHNlbGYub3Bjb2RlcyA9IE5vbmUKCiAgICBkZWYgc2V0X3NlcTIoc2VsZiwgYik6CiAgICAgICAgIiIiU2V0IHRoZSBzZWNvbmQgc2VxdWVuY2UgdG8gYmUgY29tcGFyZWQuCgogICAgICAgIFRoZSBmaXJzdCBzZXF1ZW5jZSB0byBiZSBjb21wYXJlZCBpcyBub3QgY2hhbmdlZC4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoTm9uZSwgImFiY2QiLCAiYmNkZSIpCiAgICAgICAgPj4+IHMucmF0aW8oKQogICAgICAgIDAuNzUKICAgICAgICA+Pj4gcy5zZXRfc2VxMigiYWJjZCIpCiAgICAgICAgPj4+IHMucmF0aW8oKQogICAgICAgIDEuMAogICAgICAgID4+PgoKICAgICAgICBTZXF1ZW5jZU1hdGNoZXIgY29tcHV0ZXMgYW5kIGNhY2hlcyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUKICAgICAgICBzZWNvbmQgc2VxdWVuY2UsIHNvIGlmIHlvdSB3YW50IHRvIGNvbXBhcmUgb25lIHNlcXVlbmNlIFMgYWdhaW5zdAogICAgICAgIG1hbnkgc2VxdWVuY2VzLCB1c2UgLnNldF9zZXEyKFMpIG9uY2UgYW5kIGNhbGwgLnNldF9zZXExKHgpCiAgICAgICAgcmVwZWF0ZWRseSBmb3IgZWFjaCBvZiB0aGUgb3RoZXIgc2VxdWVuY2VzLgoKICAgICAgICBTZWUgYWxzbyBzZXRfc2VxcygpIGFuZCBzZXRfc2VxMSgpLgogICAgICAgICIiIgoKICAgICAgICBpZiBiIGlzIHNlbGYuYjoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgc2VsZi5iID0gYgogICAgICAgIHNlbGYubWF0Y2hpbmdfYmxvY2tzID0gc2VsZi5vcGNvZGVzID0gTm9uZQogICAgICAgIHNlbGYuZnVsbGJjb3VudCA9IE5vbmUKICAgICAgICBzZWxmLl9fY2hhaW5fYigpCgogICAgIyBGb3IgZWFjaCBlbGVtZW50IHggaW4gYiwgc2V0IGIyalt4XSB0byBhIGxpc3Qgb2YgdGhlIGluZGljZXMgaW4KICAgICMgYiB3aGVyZSB4IGFwcGVhcnM7IHRoZSBpbmRpY2VzIGFyZSBpbiBpbmNyZWFzaW5nIG9yZGVyOyBub3RlIHRoYXQKICAgICMgdGhlIG51bWJlciBvZiB0aW1lcyB4IGFwcGVhcnMgaW4gYiBpcyBsZW4oYjJqW3hdKSAuLi4KICAgICMgd2hlbiBzZWxmLmlzanVuayBpcyBkZWZpbmVkLCBqdW5rIGVsZW1lbnRzIGRvbid0IHNob3cgdXAgaW4gdGhpcwogICAgIyBtYXAgYXQgYWxsLCB3aGljaCBzdG9wcyB0aGUgY2VudHJhbCBmaW5kX2xvbmdlc3RfbWF0Y2ggbWV0aG9kCiAgICAjIGZyb20gc3RhcnRpbmcgYW55IG1hdGNoaW5nIGJsb2NrIGF0IGEganVuayBlbGVtZW50IC4uLgogICAgIyBiMmogYWxzbyBkb2VzIG5vdCBjb250YWluIGVudHJpZXMgZm9yICJwb3B1bGFyIiBlbGVtZW50cywgbWVhbmluZwogICAgIyBlbGVtZW50cyB0aGF0IGFjY291bnQgZm9yIG1vcmUgdGhhbiAxICsgMSUgb2YgdGhlIHRvdGFsIGVsZW1lbnRzLCBhbmQKICAgICMgd2hlbiB0aGUgc2VxdWVuY2UgaXMgcmVhc29uYWJseSBsYXJnZSAoPj0gMjAwIGVsZW1lbnRzKTsgdGhpcyBjYW4KICAgICMgYmUgdmlld2VkIGFzIGFuIGFkYXB0aXZlIG5vdGlvbiBvZiBzZW1pLWp1bmssIGFuZCB5aWVsZHMgYW4gZW5vcm1vdXMKICAgICMgc3BlZWR1cCB3aGVuLCBlLmcuLCBjb21wYXJpbmcgcHJvZ3JhbSBmaWxlcyB3aXRoIGh1bmRyZWRzIG9mCiAgICAjIGluc3RhbmNlcyBvZiAicmV0dXJuIE5VTEw7IiAuLi4KICAgICMgbm90ZSB0aGF0IHRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiBiIGNoYW5nZXM7IHNvIGZvciBjcm9zcy1wcm9kdWN0CiAgICAjIGtpbmRzIG9mIG1hdGNoZXMsIGl0J3MgYmVzdCB0byBjYWxsIHNldF9zZXEyIG9uY2UsIHRoZW4gc2V0X3NlcTEKICAgICMgcmVwZWF0ZWRseQoKICAgIGRlZiBfX2NoYWluX2Ioc2VsZik6CiAgICAgICAgIyBCZWNhdXNlIGlzanVuayBpcyBhIHVzZXItZGVmaW5lZCAobm90IEMpIGZ1bmN0aW9uLCBhbmQgd2UgdGVzdAogICAgICAgICMgZm9yIGp1bmsgYSBMT1QsIGl0J3MgaW1wb3J0YW50IHRvIG1pbmltaXplIHRoZSBudW1iZXIgb2YgY2FsbHMuCiAgICAgICAgIyBCZWZvcmUgdGhlIHRyaWNrcyBkZXNjcmliZWQgaGVyZSwgX19jaGFpbl9iIHdhcyBieSBmYXIgdGhlIG1vc3QKICAgICAgICAjIHRpbWUtY29uc3VtaW5nIHJvdXRpbmUgaW4gdGhlIHdob2xlIG1vZHVsZSEgIElmIGFueW9uZSBzZWVzCiAgICAgICAgIyBKaW0gUm9za2luZCwgdGhhbmsgaGltIGFnYWluIGZvciBwcm9maWxlLnB5IC0tIEkgbmV2ZXIgd291bGQKICAgICAgICAjIGhhdmUgZ3Vlc3NlZCB0aGF0LgogICAgICAgICMgVGhlIGZpcnN0IHRyaWNrIGlzIHRvIGJ1aWxkIGIyaiBpZ25vcmluZyB0aGUgcG9zc2liaWxpdHkKICAgICAgICAjIG9mIGp1bmsuICBJLmUuLCB3ZSBkb24ndCBjYWxsIGlzanVuayBhdCBhbGwgeWV0LiAgVGhyb3dpbmcKICAgICAgICAjIG91dCB0aGUganVuayBsYXRlciBpcyBtdWNoIGNoZWFwZXIgdGhhbiBidWlsZGluZyBiMmogInJpZ2h0IgogICAgICAgICMgZnJvbSB0aGUgc3RhcnQuCiAgICAgICAgYiA9IHNlbGYuYgogICAgICAgIHNlbGYuYjJqID0gYjJqID0ge30KCiAgICAgICAgZm9yIGksIGVsdCBpbiBlbnVtZXJhdGUoYik6CiAgICAgICAgICAgIGluZGljZXMgPSBiMmouc2V0ZGVmYXVsdChlbHQsIFtdKQogICAgICAgICAgICBpbmRpY2VzLmFwcGVuZChpKQoKICAgICAgICAjIFB1cmdlIGp1bmsgZWxlbWVudHMKICAgICAgICBzZWxmLmJqdW5rID0ganVuayA9IHNldCgpCiAgICAgICAgaXNqdW5rID0gc2VsZi5pc2p1bmsKICAgICAgICBpZiBpc2p1bms6CiAgICAgICAgICAgIGZvciBlbHQgaW4gYjJqLmtleXMoKToKICAgICAgICAgICAgICAgIGlmIGlzanVuayhlbHQpOgogICAgICAgICAgICAgICAgICAgIGp1bmsuYWRkKGVsdCkKICAgICAgICAgICAgZm9yIGVsdCBpbiBqdW5rOiAjIHNlcGFyYXRlIGxvb3AgYXZvaWRzIHNlcGFyYXRlIGxpc3Qgb2Yga2V5cwogICAgICAgICAgICAgICAgZGVsIGIyaltlbHRdCgogICAgICAgICMgUHVyZ2UgcG9wdWxhciBlbGVtZW50cyB0aGF0IGFyZSBub3QganVuawogICAgICAgIHNlbGYuYnBvcHVsYXIgPSBwb3B1bGFyID0gc2V0KCkKICAgICAgICBuID0gbGVuKGIpCiAgICAgICAgaWYgc2VsZi5hdXRvanVuayBhbmQgbiA+PSAyMDA6CiAgICAgICAgICAgIG50ZXN0ID0gbiAvLyAxMDAgKyAxCiAgICAgICAgICAgIGZvciBlbHQsIGlkeHMgaW4gYjJqLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBpZiBsZW4oaWR4cykgPiBudGVzdDoKICAgICAgICAgICAgICAgICAgICBwb3B1bGFyLmFkZChlbHQpCiAgICAgICAgICAgIGZvciBlbHQgaW4gcG9wdWxhcjogIyBkaXR0bzsgYXMgZmFzdCBmb3IgMSUgZGVsZXRpb24KICAgICAgICAgICAgICAgIGRlbCBiMmpbZWx0XQoKICAgIGRlZiBpc2JqdW5rKHNlbGYsIGl0ZW0pOgogICAgICAgICJEZXByZWNhdGVkOyB1c2UgJ2l0ZW0gaW4gU2VxdWVuY2VNYXRjaGVyKCkuYmp1bmsnLiIKICAgICAgICB3YXJuaW5ncy53YXJuKCInU2VxdWVuY2VNYXRjaGVyKCkuaXNianVuayhpdGVtKScgaXMgZGVwcmVjYXRlZDtcbiIKICAgICAgICAgICAgICAgICAgICAgICJ1c2UgJ2l0ZW0gaW4gU01pbnN0YW5jZS5ianVuaycgaW5zdGVhZC4iLAogICAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLCAyKQogICAgICAgIHJldHVybiBpdGVtIGluIHNlbGYuYmp1bmsKCiAgICBkZWYgaXNicG9wdWxhcihzZWxmLCBpdGVtKToKICAgICAgICAiRGVwcmVjYXRlZDsgdXNlICdpdGVtIGluIFNlcXVlbmNlTWF0Y2hlcigpLmJwb3B1bGFyJy4iCiAgICAgICAgd2FybmluZ3Mud2FybigiJ1NlcXVlbmNlTWF0Y2hlcigpLmlzYnBvcHVsYXIoaXRlbSknIGlzIGRlcHJlY2F0ZWQ7XG4iCiAgICAgICAgICAgICAgICAgICAgICAidXNlICdpdGVtIGluIFNNaW5zdGFuY2UuYnBvcHVsYXInIGluc3RlYWQuIiwKICAgICAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgICAgICByZXR1cm4gaXRlbSBpbiBzZWxmLmJwb3B1bGFyCgogICAgZGVmIGZpbmRfbG9uZ2VzdF9tYXRjaChzZWxmLCBhbG8sIGFoaSwgYmxvLCBiaGkpOgogICAgICAgICIiIkZpbmQgbG9uZ2VzdCBtYXRjaGluZyBibG9jayBpbiBhW2FsbzphaGldIGFuZCBiW2JsbzpiaGldLgoKICAgICAgICBJZiBpc2p1bmsgaXMgbm90IGRlZmluZWQ6CgogICAgICAgIFJldHVybiAoaSxqLGspIHN1Y2ggdGhhdCBhW2k6aStrXSBpcyBlcXVhbCB0byBiW2o6aitrXSwgd2hlcmUKICAgICAgICAgICAgYWxvIDw9IGkgPD0gaStrIDw9IGFoaQogICAgICAgICAgICBibG8gPD0gaiA8PSBqK2sgPD0gYmhpCiAgICAgICAgYW5kIGZvciBhbGwgKGknLGonLGsnKSBtZWV0aW5nIHRob3NlIGNvbmRpdGlvbnMsCiAgICAgICAgICAgIGsgPj0gaycKICAgICAgICAgICAgaSA8PSBpJwogICAgICAgICAgICBhbmQgaWYgaSA9PSBpJywgaiA8PSBqJwoKICAgICAgICBJbiBvdGhlciB3b3Jkcywgb2YgYWxsIG1heGltYWwgbWF0Y2hpbmcgYmxvY2tzLCByZXR1cm4gb25lIHRoYXQKICAgICAgICBzdGFydHMgZWFybGllc3QgaW4gYSwgYW5kIG9mIGFsbCB0aG9zZSBtYXhpbWFsIG1hdGNoaW5nIGJsb2NrcyB0aGF0CiAgICAgICAgc3RhcnQgZWFybGllc3QgaW4gYSwgcmV0dXJuIHRoZSBvbmUgdGhhdCBzdGFydHMgZWFybGllc3QgaW4gYi4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoTm9uZSwgIiBhYmNkIiwgImFiY2QgYWJjZCIpCiAgICAgICAgPj4+IHMuZmluZF9sb25nZXN0X21hdGNoKDAsIDUsIDAsIDkpCiAgICAgICAgTWF0Y2goYT0wLCBiPTQsIHNpemU9NSkKCiAgICAgICAgSWYgaXNqdW5rIGlzIGRlZmluZWQsIGZpcnN0IHRoZSBsb25nZXN0IG1hdGNoaW5nIGJsb2NrIGlzCiAgICAgICAgZGV0ZXJtaW5lZCBhcyBhYm92ZSwgYnV0IHdpdGggdGhlIGFkZGl0aW9uYWwgcmVzdHJpY3Rpb24gdGhhdCBubwogICAgICAgIGp1bmsgZWxlbWVudCBhcHBlYXJzIGluIHRoZSBibG9jay4gIFRoZW4gdGhhdCBibG9jayBpcyBleHRlbmRlZCBhcwogICAgICAgIGZhciBhcyBwb3NzaWJsZSBieSBtYXRjaGluZyAob25seSkganVuayBlbGVtZW50cyBvbiBib3RoIHNpZGVzLiAgU28KICAgICAgICB0aGUgcmVzdWx0aW5nIGJsb2NrIG5ldmVyIG1hdGNoZXMgb24ganVuayBleGNlcHQgYXMgaWRlbnRpY2FsIGp1bmsKICAgICAgICBoYXBwZW5zIHRvIGJlIGFkamFjZW50IHRvIGFuICJpbnRlcmVzdGluZyIgbWF0Y2guCgogICAgICAgIEhlcmUncyB0aGUgc2FtZSBleGFtcGxlIGFzIGJlZm9yZSwgYnV0IGNvbnNpZGVyaW5nIGJsYW5rcyB0byBiZQogICAgICAgIGp1bmsuICBUaGF0IHByZXZlbnRzICIgYWJjZCIgZnJvbSBtYXRjaGluZyB0aGUgIiBhYmNkIiBhdCB0aGUgdGFpbAogICAgICAgIGVuZCBvZiB0aGUgc2Vjb25kIHNlcXVlbmNlIGRpcmVjdGx5LiAgSW5zdGVhZCBvbmx5IHRoZSAiYWJjZCIgY2FuCiAgICAgICAgbWF0Y2gsIGFuZCBtYXRjaGVzIHRoZSBsZWZ0bW9zdCAiYWJjZCIgaW4gdGhlIHNlY29uZCBzZXF1ZW5jZToKCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIobGFtYmRhIHg6IHg9PSIgIiwgIiBhYmNkIiwgImFiY2QgYWJjZCIpCiAgICAgICAgPj4+IHMuZmluZF9sb25nZXN0X21hdGNoKDAsIDUsIDAsIDkpCiAgICAgICAgTWF0Y2goYT0xLCBiPTAsIHNpemU9NCkKCiAgICAgICAgSWYgbm8gYmxvY2tzIG1hdGNoLCByZXR1cm4gKGFsbywgYmxvLCAwKS4KCiAgICAgICAgPj4+IHMgPSBTZXF1ZW5jZU1hdGNoZXIoTm9uZSwgImFiIiwgImMiKQogICAgICAgID4+PiBzLmZpbmRfbG9uZ2VzdF9tYXRjaCgwLCAyLCAwLCAxKQogICAgICAgIE1hdGNoKGE9MCwgYj0wLCBzaXplPTApCiAgICAgICAgIiIiCgogICAgICAgICMgQ0FVVElPTjogIHN0cmlwcGluZyBjb21tb24gcHJlZml4IG9yIHN1ZmZpeCB3b3VsZCBiZSBpbmNvcnJlY3QuCiAgICAgICAgIyBFLmcuLAogICAgICAgICMgICAgYWIKICAgICAgICAjICAgIGFjYWIKICAgICAgICAjIExvbmdlc3QgbWF0Y2hpbmcgYmxvY2sgaXMgImFiIiwgYnV0IGlmIGNvbW1vbiBwcmVmaXggaXMKICAgICAgICAjIHN0cmlwcGVkLCBpdCdzICJhIiAodGllZCB3aXRoICJiIikuICBVTklYKHRtKSBkaWZmIGRvZXMgc28KICAgICAgICAjIHN0cmlwLCBzbyBlbmRzIHVwIGNsYWltaW5nIHRoYXQgYWIgaXMgY2hhbmdlZCB0byBhY2FiIGJ5CiAgICAgICAgIyBpbnNlcnRpbmcgImNhIiBpbiB0aGUgbWlkZGxlLiAgVGhhdCdzIG1pbmltYWwgYnV0IHVuaW50dWl0aXZlOgogICAgICAgICMgIml0J3Mgb2J2aW91cyIgdGhhdCBzb21lb25lIGluc2VydGVkICJhYyIgYXQgdGhlIGZyb250LgogICAgICAgICMgV2luZGlmZiBlbmRzIHVwIGF0IHRoZSBzYW1lIHBsYWNlIGFzIGRpZmYsIGJ1dCBieSBwYWlyaW5nIHVwCiAgICAgICAgIyB0aGUgdW5pcXVlICdiJ3MgYW5kIHRoZW4gbWF0Y2hpbmcgdGhlIGZpcnN0IHR3byAnYSdzLgoKICAgICAgICBhLCBiLCBiMmosIGlzYmp1bmsgPSBzZWxmLmEsIHNlbGYuYiwgc2VsZi5iMmosIHNlbGYuYmp1bmsuX19jb250YWluc19fCiAgICAgICAgYmVzdGksIGJlc3RqLCBiZXN0c2l6ZSA9IGFsbywgYmxvLCAwCiAgICAgICAgIyBmaW5kIGxvbmdlc3QganVuay1mcmVlIG1hdGNoCiAgICAgICAgIyBkdXJpbmcgYW4gaXRlcmF0aW9uIG9mIHRoZSBsb29wLCBqMmxlbltqXSA9IGxlbmd0aCBvZiBsb25nZXN0CiAgICAgICAgIyBqdW5rLWZyZWUgbWF0Y2ggZW5kaW5nIHdpdGggYVtpLTFdIGFuZCBiW2pdCiAgICAgICAgajJsZW4gPSB7fQogICAgICAgIG5vdGhpbmcgPSBbXQogICAgICAgIGZvciBpIGluIHJhbmdlKGFsbywgYWhpKToKICAgICAgICAgICAgIyBsb29rIGF0IGFsbCBpbnN0YW5jZXMgb2YgYVtpXSBpbiBiOyBub3RlIHRoYXQgYmVjYXVzZQogICAgICAgICAgICAjIGIyaiBoYXMgbm8ganVuayBrZXlzLCB0aGUgbG9vcCBpcyBza2lwcGVkIGlmIGFbaV0gaXMganVuawogICAgICAgICAgICBqMmxlbmdldCA9IGoybGVuLmdldAogICAgICAgICAgICBuZXdqMmxlbiA9IHt9CiAgICAgICAgICAgIGZvciBqIGluIGIyai5nZXQoYVtpXSwgbm90aGluZyk6CiAgICAgICAgICAgICAgICAjIGFbaV0gbWF0Y2hlcyBiW2pdCiAgICAgICAgICAgICAgICBpZiBqIDwgYmxvOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBpZiBqID49IGJoaToKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgayA9IG5ld2oybGVuW2pdID0gajJsZW5nZXQoai0xLCAwKSArIDEKICAgICAgICAgICAgICAgIGlmIGsgPiBiZXN0c2l6ZToKICAgICAgICAgICAgICAgICAgICBiZXN0aSwgYmVzdGosIGJlc3RzaXplID0gaS1rKzEsIGotaysxLCBrCiAgICAgICAgICAgIGoybGVuID0gbmV3ajJsZW4KCiAgICAgICAgIyBFeHRlbmQgdGhlIGJlc3QgYnkgbm9uLWp1bmsgZWxlbWVudHMgb24gZWFjaCBlbmQuICBJbiBwYXJ0aWN1bGFyLAogICAgICAgICMgInBvcHVsYXIiIG5vbi1qdW5rIGVsZW1lbnRzIGFyZW4ndCBpbiBiMmosIHdoaWNoIGdyZWF0bHkgc3BlZWRzCiAgICAgICAgIyB0aGUgaW5uZXIgbG9vcCBhYm92ZSwgYnV0IGFsc28gbWVhbnMgInRoZSBiZXN0IiBtYXRjaCBzbyBmYXIKICAgICAgICAjIGRvZXNuJ3QgY29udGFpbiBhbnkganVuayAqb3IqIHBvcHVsYXIgbm9uLWp1bmsgZWxlbWVudHMuCiAgICAgICAgd2hpbGUgYmVzdGkgPiBhbG8gYW5kIGJlc3RqID4gYmxvIGFuZCBcCiAgICAgICAgICAgICAgbm90IGlzYmp1bmsoYltiZXN0ai0xXSkgYW5kIFwKICAgICAgICAgICAgICBhW2Jlc3RpLTFdID09IGJbYmVzdGotMV06CiAgICAgICAgICAgIGJlc3RpLCBiZXN0aiwgYmVzdHNpemUgPSBiZXN0aS0xLCBiZXN0ai0xLCBiZXN0c2l6ZSsxCiAgICAgICAgd2hpbGUgYmVzdGkrYmVzdHNpemUgPCBhaGkgYW5kIGJlc3RqK2Jlc3RzaXplIDwgYmhpIGFuZCBcCiAgICAgICAgICAgICAgbm90IGlzYmp1bmsoYltiZXN0aitiZXN0c2l6ZV0pIGFuZCBcCiAgICAgICAgICAgICAgYVtiZXN0aStiZXN0c2l6ZV0gPT0gYltiZXN0aitiZXN0c2l6ZV06CiAgICAgICAgICAgIGJlc3RzaXplICs9IDEKCiAgICAgICAgIyBOb3cgdGhhdCB3ZSBoYXZlIGEgd2hvbGx5IGludGVyZXN0aW5nIG1hdGNoIChhbGJlaXQgcG9zc2libHkKICAgICAgICAjIGVtcHR5ISksIHdlIG1heSBhcyB3ZWxsIHN1Y2sgdXAgdGhlIG1hdGNoaW5nIGp1bmsgb24gZWFjaAogICAgICAgICMgc2lkZSBvZiBpdCB0b28uICBDYW4ndCB0aGluayBvZiBhIGdvb2QgcmVhc29uIG5vdCB0bywgYW5kIGl0CiAgICAgICAgIyBzYXZlcyBwb3N0LXByb2Nlc3NpbmcgdGhlIChwb3NzaWJseSBjb25zaWRlcmFibGUpIGV4cGVuc2Ugb2YKICAgICAgICAjIGZpZ3VyaW5nIG91dCB3aGF0IHRvIGRvIHdpdGggaXQuICBJbiB0aGUgY2FzZSBvZiBhbiBlbXB0eQogICAgICAgICMgaW50ZXJlc3RpbmcgbWF0Y2gsIHRoaXMgaXMgY2xlYXJseSB0aGUgcmlnaHQgdGhpbmcgdG8gZG8sCiAgICAgICAgIyBiZWNhdXNlIG5vIG90aGVyIGtpbmQgb2YgbWF0Y2ggaXMgcG9zc2libGUgaW4gdGhlIHJlZ2lvbnMuCiAgICAgICAgd2hpbGUgYmVzdGkgPiBhbG8gYW5kIGJlc3RqID4gYmxvIGFuZCBcCiAgICAgICAgICAgICAgaXNianVuayhiW2Jlc3RqLTFdKSBhbmQgXAogICAgICAgICAgICAgIGFbYmVzdGktMV0gPT0gYltiZXN0ai0xXToKICAgICAgICAgICAgYmVzdGksIGJlc3RqLCBiZXN0c2l6ZSA9IGJlc3RpLTEsIGJlc3RqLTEsIGJlc3RzaXplKzEKICAgICAgICB3aGlsZSBiZXN0aStiZXN0c2l6ZSA8IGFoaSBhbmQgYmVzdGorYmVzdHNpemUgPCBiaGkgYW5kIFwKICAgICAgICAgICAgICBpc2JqdW5rKGJbYmVzdGorYmVzdHNpemVdKSBhbmQgXAogICAgICAgICAgICAgIGFbYmVzdGkrYmVzdHNpemVdID09IGJbYmVzdGorYmVzdHNpemVdOgogICAgICAgICAgICBiZXN0c2l6ZSA9IGJlc3RzaXplICsgMQoKICAgICAgICByZXR1cm4gTWF0Y2goYmVzdGksIGJlc3RqLCBiZXN0c2l6ZSkKCiAgICBkZWYgZ2V0X21hdGNoaW5nX2Jsb2NrcyhzZWxmKToKICAgICAgICAiIiJSZXR1cm4gbGlzdCBvZiB0cmlwbGVzIGRlc2NyaWJpbmcgbWF0Y2hpbmcgc3Vic2VxdWVuY2VzLgoKICAgICAgICBFYWNoIHRyaXBsZSBpcyBvZiB0aGUgZm9ybSAoaSwgaiwgbiksIGFuZCBtZWFucyB0aGF0CiAgICAgICAgYVtpOmkrbl0gPT0gYltqOmorbl0uICBUaGUgdHJpcGxlcyBhcmUgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIGluCiAgICAgICAgaSBhbmQgaW4gai4gIE5ldyBpbiBQeXRob24gMi41LCBpdCdzIGFsc28gZ3VhcmFudGVlZCB0aGF0IGlmCiAgICAgICAgKGksIGosIG4pIGFuZCAoaScsIGonLCBuJykgYXJlIGFkamFjZW50IHRyaXBsZXMgaW4gdGhlIGxpc3QsIGFuZAogICAgICAgIHRoZSBzZWNvbmQgaXMgbm90IHRoZSBsYXN0IHRyaXBsZSBpbiB0aGUgbGlzdCwgdGhlbiBpK24gIT0gaScgb3IKICAgICAgICBqK24gIT0gaicuICBJT1csIGFkamFjZW50IHRyaXBsZXMgbmV2ZXIgZGVzY3JpYmUgYWRqYWNlbnQgZXF1YWwKICAgICAgICBibG9ja3MuCgogICAgICAgIFRoZSBsYXN0IHRyaXBsZSBpcyBhIGR1bW15LCAobGVuKGEpLCBsZW4oYiksIDApLCBhbmQgaXMgdGhlIG9ubHkKICAgICAgICB0cmlwbGUgd2l0aCBuPT0wLgoKICAgICAgICA+Pj4gcyA9IFNlcXVlbmNlTWF0Y2hlcihOb25lLCAiYWJ4Y2QiLCAiYWJjZCIpCiAgICAgICAgPj4+IGxpc3Qocy5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkpCiAgICAgICAgW01hdGNoKGE9MCwgYj0wLCBzaXplPTIpLCBNYXRjaChhPTMsIGI9Miwgc2l6ZT0yKSwgTWF0Y2goYT01LCBiPTQsIHNpemU9MCldCiAgICAgICAgIiIiCgogICAgICAgIGlmIHNlbGYubWF0Y2hpbmdfYmxvY2tzIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gc2VsZi5tYXRjaGluZ19ibG9ja3MKICAgICAgICBsYSwgbGIgPSBsZW4oc2VsZi5hKSwgbGVuKHNlbGYuYikKCiAgICAgICAgIyBUaGlzIGlzIG1vc3QgbmF0dXJhbGx5IGV4cHJlc3NlZCBhcyBhIHJlY3Vyc2l2ZSBhbGdvcml0aG0sIGJ1dAogICAgICAgICMgYXQgbGVhc3Qgb25lIHVzZXIgYnVtcGVkIGludG8gZXh0cmVtZSB1c2UgY2FzZXMgdGhhdCBleGNlZWRlZAogICAgICAgICMgdGhlIHJlY3Vyc2lvbiBsaW1pdCBvbiB0aGVpciBib3guICBTbywgbm93IHdlIG1haW50YWluIGEgbGlzdAogICAgICAgICMgKCdxdWV1ZWApIG9mIGJsb2NrcyB3ZSBzdGlsbCBuZWVkIHRvIGxvb2sgYXQsIGFuZCBhcHBlbmQgcGFydGlhbAogICAgICAgICMgcmVzdWx0cyB0byBgbWF0Y2hpbmdfYmxvY2tzYCBpbiBhIGxvb3A7IHRoZSBtYXRjaGVzIGFyZSBzb3J0ZWQKICAgICAgICAjIGF0IHRoZSBlbmQuCiAgICAgICAgcXVldWUgPSBbKDAsIGxhLCAwLCBsYildCiAgICAgICAgbWF0Y2hpbmdfYmxvY2tzID0gW10KICAgICAgICB3aGlsZSBxdWV1ZToKICAgICAgICAgICAgYWxvLCBhaGksIGJsbywgYmhpID0gcXVldWUucG9wKCkKICAgICAgICAgICAgaSwgaiwgayA9IHggPSBzZWxmLmZpbmRfbG9uZ2VzdF9tYXRjaChhbG8sIGFoaSwgYmxvLCBiaGkpCiAgICAgICAgICAgICMgYVthbG86aV0gdnMgYltibG86al0gdW5rbm93bgogICAgICAgICAgICAjIGFbaTppK2tdIHNhbWUgYXMgYltqOmora10KICAgICAgICAgICAgIyBhW2krazphaGldIHZzIGJbaitrOmJoaV0gdW5rbm93bgogICAgICAgICAgICBpZiBrOiAgICMgaWYgayBpcyAwLCB0aGVyZSB3YXMgbm8gbWF0Y2hpbmcgYmxvY2sKICAgICAgICAgICAgICAgIG1hdGNoaW5nX2Jsb2Nrcy5hcHBlbmQoeCkKICAgICAgICAgICAgICAgIGlmIGFsbyA8IGkgYW5kIGJsbyA8IGo6CiAgICAgICAgICAgICAgICAgICAgcXVldWUuYXBwZW5kKChhbG8sIGksIGJsbywgaikpCiAgICAgICAgICAgICAgICBpZiBpK2sgPCBhaGkgYW5kIGorayA8IGJoaToKICAgICAgICAgICAgICAgICAgICBxdWV1ZS5hcHBlbmQoKGkraywgYWhpLCBqK2ssIGJoaSkpCiAgICAgICAgbWF0Y2hpbmdfYmxvY2tzLnNvcnQoKQoKICAgICAgICAjIEl0J3MgcG9zc2libGUgdGhhdCB3ZSBoYXZlIGFkamFjZW50IGVxdWFsIGJsb2NrcyBpbiB0aGUKICAgICAgICAjIG1hdGNoaW5nX2Jsb2NrcyBsaXN0IG5vdy4gIFN0YXJ0aW5nIHdpdGggMi41LCB0aGlzIGNvZGUgd2FzIGFkZGVkCiAgICAgICAgIyB0byBjb2xsYXBzZSB0aGVtLgogICAgICAgIGkxID0gajEgPSBrMSA9IDAKICAgICAgICBub25fYWRqYWNlbnQgPSBbXQogICAgICAgIGZvciBpMiwgajIsIGsyIGluIG1hdGNoaW5nX2Jsb2NrczoKICAgICAgICAgICAgIyBJcyB0aGlzIGJsb2NrIGFkamFjZW50IHRvIGkxLCBqMSwgazE/CiAgICAgICAgICAgIGlmIGkxICsgazEgPT0gaTIgYW5kIGoxICsgazEgPT0gajI6CiAgICAgICAgICAgICAgICAjIFllcywgc28gY29sbGFwc2UgdGhlbSAtLSB0aGlzIGp1c3QgaW5jcmVhc2VzIHRoZSBsZW5ndGggb2YKICAgICAgICAgICAgICAgICMgdGhlIGZpcnN0IGJsb2NrIGJ5IHRoZSBsZW5ndGggb2YgdGhlIHNlY29uZCwgYW5kIHRoZSBmaXJzdAogICAgICAgICAgICAgICAgIyBibG9jayBzbyBsZW5ndGhlbmVkIHJlbWFpbnMgdGhlIGJsb2NrIHRvIGNvbXBhcmUgYWdhaW5zdC4KICAgICAgICAgICAgICAgIGsxICs9IGsyCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIE5vdCBhZGphY2VudC4gIFJlbWVtYmVyIHRoZSBmaXJzdCBibG9jayAoazE9PTAgbWVhbnMgaXQncwogICAgICAgICAgICAgICAgIyB0aGUgZHVtbXkgd2Ugc3RhcnRlZCB3aXRoKSwgYW5kIG1ha2UgdGhlIHNlY29uZCBibG9jayB0aGUKICAgICAgICAgICAgICAgICMgbmV3IGJsb2NrIHRvIGNvbXBhcmUgYWdhaW5zdC4KICAgICAgICAgICAgICAgIGlmIGsxOgogICAgICAgICAgICAgICAgICAgIG5vbl9hZGphY2VudC5hcHBlbmQoKGkxLCBqMSwgazEpKQogICAgICAgICAgICAgICAgaTEsIGoxLCBrMSA9IGkyLCBqMiwgazIKICAgICAgICBpZiBrMToKICAgICAgICAgICAgbm9uX2FkamFjZW50LmFwcGVuZCgoaTEsIGoxLCBrMSkpCgogICAgICAgIG5vbl9hZGphY2VudC5hcHBlbmQoIChsYSwgbGIsIDApICkKICAgICAgICBzZWxmLm1hdGNoaW5nX2Jsb2NrcyA9IG5vbl9hZGphY2VudAogICAgICAgIHJldHVybiBtYXAoTWF0Y2guX21ha2UsIHNlbGYubWF0Y2hpbmdfYmxvY2tzKQoKICAgIGRlZiBnZXRfb3Bjb2RlcyhzZWxmKToKICAgICAgICAiIiJSZXR1cm4gbGlzdCBvZiA1LXR1cGxlcyBkZXNjcmliaW5nIGhvdyB0byB0dXJuIGEgaW50byBiLgoKICAgICAgICBFYWNoIHR1cGxlIGlzIG9mIHRoZSBmb3JtICh0YWcsIGkxLCBpMiwgajEsIGoyKS4gIFRoZSBmaXJzdCB0dXBsZQogICAgICAgIGhhcyBpMSA9PSBqMSA9PSAwLCBhbmQgcmVtYWluaW5nIHR1cGxlcyBoYXZlIGkxID09IHRoZSBpMiBmcm9tIHRoZQogICAgICAgIHR1cGxlIHByZWNlZGluZyBpdCwgYW5kIGxpa2V3aXNlIGZvciBqMSA9PSB0aGUgcHJldmlvdXMgajIuCgogICAgICAgIFRoZSB0YWdzIGFyZSBzdHJpbmdzLCB3aXRoIHRoZXNlIG1lYW5pbmdzOgoKICAgICAgICAncmVwbGFjZSc6ICBhW2kxOmkyXSBzaG91bGQgYmUgcmVwbGFjZWQgYnkgYltqMTpqMl0KICAgICAgICAnZGVsZXRlJzogICBhW2kxOmkyXSBzaG91bGQgYmUgZGVsZXRlZC4KICAgICAgICAgICAgICAgICAgICBOb3RlIHRoYXQgajE9PWoyIGluIHRoaXMgY2FzZS4KICAgICAgICAnaW5zZXJ0JzogICBiW2oxOmoyXSBzaG91bGQgYmUgaW5zZXJ0ZWQgYXQgYVtpMTppMV0uCiAgICAgICAgICAgICAgICAgICAgTm90ZSB0aGF0IGkxPT1pMiBpbiB0aGlzIGNhc2UuCiAgICAgICAgJ2VxdWFsJzogICAgYVtpMTppMl0gPT0gYltqMTpqMl0KCiAgICAgICAgPj4+IGEgPSAicWFieGNkIgogICAgICAgID4+PiBiID0gImFieWNkZiIKICAgICAgICA+Pj4gcyA9IFNlcXVlbmNlTWF0Y2hlcihOb25lLCBhLCBiKQogICAgICAgID4+PiBmb3IgdGFnLCBpMSwgaTIsIGoxLCBqMiBpbiBzLmdldF9vcGNvZGVzKCk6CiAgICAgICAgLi4uICAgIHByaW50KCgiJTdzIGFbJWQ6JWRdICglcykgYlslZDolZF0gKCVzKSIgJQogICAgICAgIC4uLiAgICAgICAgICAgKHRhZywgaTEsIGkyLCBhW2kxOmkyXSwgajEsIGoyLCBiW2oxOmoyXSkpKQogICAgICAgICBkZWxldGUgYVswOjFdIChxKSBiWzA6MF0gKCkKICAgICAgICAgIGVxdWFsIGFbMTozXSAoYWIpIGJbMDoyXSAoYWIpCiAgICAgICAgcmVwbGFjZSBhWzM6NF0gKHgpIGJbMjozXSAoeSkKICAgICAgICAgIGVxdWFsIGFbNDo2XSAoY2QpIGJbMzo1XSAoY2QpCiAgICAgICAgIGluc2VydCBhWzY6Nl0gKCkgYls1OjZdIChmKQogICAgICAgICIiIgoKICAgICAgICBpZiBzZWxmLm9wY29kZXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLm9wY29kZXMKICAgICAgICBpID0gaiA9IDAKICAgICAgICBzZWxmLm9wY29kZXMgPSBhbnN3ZXIgPSBbXQogICAgICAgIGZvciBhaSwgYmosIHNpemUgaW4gc2VsZi5nZXRfbWF0Y2hpbmdfYmxvY2tzKCk6CiAgICAgICAgICAgICMgaW52YXJpYW50OiAgd2UndmUgcHVtcGVkIG91dCBjb3JyZWN0IGRpZmZzIHRvIGNoYW5nZQogICAgICAgICAgICAjIGFbOmldIGludG8gYls6al0sIGFuZCB0aGUgbmV4dCBtYXRjaGluZyBibG9jayBpcwogICAgICAgICAgICAjIGFbYWk6YWkrc2l6ZV0gPT0gYltiajpiaitzaXplXS4gIFNvIHdlIG5lZWQgdG8gcHVtcAogICAgICAgICAgICAjIG91dCBhIGRpZmYgdG8gY2hhbmdlIGFbaTphaV0gaW50byBiW2o6YmpdLCBwdW1wIG91dAogICAgICAgICAgICAjIHRoZSBtYXRjaGluZyBibG9jaywgYW5kIG1vdmUgKGksaikgYmV5b25kIHRoZSBtYXRjaAogICAgICAgICAgICB0YWcgPSAnJwogICAgICAgICAgICBpZiBpIDwgYWkgYW5kIGogPCBiajoKICAgICAgICAgICAgICAgIHRhZyA9ICdyZXBsYWNlJwogICAgICAgICAgICBlbGlmIGkgPCBhaToKICAgICAgICAgICAgICAgIHRhZyA9ICdkZWxldGUnCiAgICAgICAgICAgIGVsaWYgaiA8IGJqOgogICAgICAgICAgICAgICAgdGFnID0gJ2luc2VydCcKICAgICAgICAgICAgaWYgdGFnOgogICAgICAgICAgICAgICAgYW5zd2VyLmFwcGVuZCggKHRhZywgaSwgYWksIGosIGJqKSApCiAgICAgICAgICAgIGksIGogPSBhaStzaXplLCBiaitzaXplCiAgICAgICAgICAgICMgdGhlIGxpc3Qgb2YgbWF0Y2hpbmcgYmxvY2tzIGlzIHRlcm1pbmF0ZWQgYnkgYQogICAgICAgICAgICAjIHNlbnRpbmVsIHdpdGggc2l6ZSAwCiAgICAgICAgICAgIGlmIHNpemU6CiAgICAgICAgICAgICAgICBhbnN3ZXIuYXBwZW5kKCAoJ2VxdWFsJywgYWksIGksIGJqLCBqKSApCiAgICAgICAgcmV0dXJuIGFuc3dlcgoKICAgIGRlZiBnZXRfZ3JvdXBlZF9vcGNvZGVzKHNlbGYsIG49Myk6CiAgICAgICAgIiIiIElzb2xhdGUgY2hhbmdlIGNsdXN0ZXJzIGJ5IGVsaW1pbmF0aW5nIHJhbmdlcyB3aXRoIG5vIGNoYW5nZXMuCgogICAgICAgIFJldHVybiBhIGdlbmVyYXRvciBvZiBncm91cHMgd2l0aCB1cHRvIG4gbGluZXMgb2YgY29udGV4dC4KICAgICAgICBFYWNoIGdyb3VwIGlzIGluIHRoZSBzYW1lIGZvcm1hdCBhcyByZXR1cm5lZCBieSBnZXRfb3Bjb2RlcygpLgoKICAgICAgICA+Pj4gZnJvbSBwcHJpbnQgaW1wb3J0IHBwcmludAogICAgICAgID4+PiBhID0gbGlzdChtYXAoc3RyLCByYW5nZSgxLDQwKSkpCiAgICAgICAgPj4+IGIgPSBhWzpdCiAgICAgICAgPj4+IGJbODo4XSA9IFsnaSddICAgICAjIE1ha2UgYW4gaW5zZXJ0aW9uCiAgICAgICAgPj4+IGJbMjBdICs9ICd4JyAgICAgICAjIE1ha2UgYSByZXBsYWNlbWVudAogICAgICAgID4+PiBiWzIzOjI4XSA9IFtdICAgICAgIyBNYWtlIGEgZGVsZXRpb24KICAgICAgICA+Pj4gYlszMF0gKz0gJ3knICAgICAgICMgTWFrZSBhbm90aGVyIHJlcGxhY2VtZW50CiAgICAgICAgPj4+IHBwcmludChsaXN0KFNlcXVlbmNlTWF0Y2hlcihOb25lLGEsYikuZ2V0X2dyb3VwZWRfb3Bjb2RlcygpKSkKICAgICAgICBbWygnZXF1YWwnLCA1LCA4LCA1LCA4KSwgKCdpbnNlcnQnLCA4LCA4LCA4LCA5KSwgKCdlcXVhbCcsIDgsIDExLCA5LCAxMildLAogICAgICAgICBbKCdlcXVhbCcsIDE2LCAxOSwgMTcsIDIwKSwKICAgICAgICAgICgncmVwbGFjZScsIDE5LCAyMCwgMjAsIDIxKSwKICAgICAgICAgICgnZXF1YWwnLCAyMCwgMjIsIDIxLCAyMyksCiAgICAgICAgICAoJ2RlbGV0ZScsIDIyLCAyNywgMjMsIDIzKSwKICAgICAgICAgICgnZXF1YWwnLCAyNywgMzAsIDIzLCAyNildLAogICAgICAgICBbKCdlcXVhbCcsIDMxLCAzNCwgMjcsIDMwKSwKICAgICAgICAgICgncmVwbGFjZScsIDM0LCAzNSwgMzAsIDMxKSwKICAgICAgICAgICgnZXF1YWwnLCAzNSwgMzgsIDMxLCAzNCldXQogICAgICAgICIiIgoKICAgICAgICBjb2RlcyA9IHNlbGYuZ2V0X29wY29kZXMoKQogICAgICAgIGlmIG5vdCBjb2RlczoKICAgICAgICAgICAgY29kZXMgPSBbKCJlcXVhbCIsIDAsIDEsIDAsIDEpXQogICAgICAgICMgRml4dXAgbGVhZGluZyBhbmQgdHJhaWxpbmcgZ3JvdXBzIGlmIHRoZXkgc2hvdyBubyBjaGFuZ2VzLgogICAgICAgIGlmIGNvZGVzWzBdWzBdID09ICdlcXVhbCc6CiAgICAgICAgICAgIHRhZywgaTEsIGkyLCBqMSwgajIgPSBjb2Rlc1swXQogICAgICAgICAgICBjb2Rlc1swXSA9IHRhZywgbWF4KGkxLCBpMi1uKSwgaTIsIG1heChqMSwgajItbiksIGoyCiAgICAgICAgaWYgY29kZXNbLTFdWzBdID09ICdlcXVhbCc6CiAgICAgICAgICAgIHRhZywgaTEsIGkyLCBqMSwgajIgPSBjb2Rlc1stMV0KICAgICAgICAgICAgY29kZXNbLTFdID0gdGFnLCBpMSwgbWluKGkyLCBpMStuKSwgajEsIG1pbihqMiwgajErbikKCiAgICAgICAgbm4gPSBuICsgbgogICAgICAgIGdyb3VwID0gW10KICAgICAgICBmb3IgdGFnLCBpMSwgaTIsIGoxLCBqMiBpbiBjb2RlczoKICAgICAgICAgICAgIyBFbmQgdGhlIGN1cnJlbnQgZ3JvdXAgYW5kIHN0YXJ0IGEgbmV3IG9uZSB3aGVuZXZlcgogICAgICAgICAgICAjIHRoZXJlIGlzIGEgbGFyZ2UgcmFuZ2Ugd2l0aCBubyBjaGFuZ2VzLgogICAgICAgICAgICBpZiB0YWcgPT0gJ2VxdWFsJyBhbmQgaTItaTEgPiBubjoKICAgICAgICAgICAgICAgIGdyb3VwLmFwcGVuZCgodGFnLCBpMSwgbWluKGkyLCBpMStuKSwgajEsIG1pbihqMiwgajErbikpKQogICAgICAgICAgICAgICAgeWllbGQgZ3JvdXAKICAgICAgICAgICAgICAgIGdyb3VwID0gW10KICAgICAgICAgICAgICAgIGkxLCBqMSA9IG1heChpMSwgaTItbiksIG1heChqMSwgajItbikKICAgICAgICAgICAgZ3JvdXAuYXBwZW5kKCh0YWcsIGkxLCBpMiwgajEgLGoyKSkKICAgICAgICBpZiBncm91cCBhbmQgbm90IChsZW4oZ3JvdXApPT0xIGFuZCBncm91cFswXVswXSA9PSAnZXF1YWwnKToKICAgICAgICAgICAgeWllbGQgZ3JvdXAKCiAgICBkZWYgcmF0aW8oc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGEgbWVhc3VyZSBvZiB0aGUgc2VxdWVuY2VzJyBzaW1pbGFyaXR5IChmbG9hdCBpbiBbMCwxXSkuCgogICAgICAgIFdoZXJlIFQgaXMgdGhlIHRvdGFsIG51bWJlciBvZiBlbGVtZW50cyBpbiBib3RoIHNlcXVlbmNlcywgYW5kCiAgICAgICAgTSBpcyB0aGUgbnVtYmVyIG9mIG1hdGNoZXMsIHRoaXMgaXMgMi4wKk0gLyBULgogICAgICAgIE5vdGUgdGhhdCB0aGlzIGlzIDEgaWYgdGhlIHNlcXVlbmNlcyBhcmUgaWRlbnRpY2FsLCBhbmQgMCBpZgogICAgICAgIHRoZXkgaGF2ZSBub3RoaW5nIGluIGNvbW1vbi4KCiAgICAgICAgLnJhdGlvKCkgaXMgZXhwZW5zaXZlIHRvIGNvbXB1dGUgaWYgeW91IGhhdmVuJ3QgYWxyZWFkeSBjb21wdXRlZAogICAgICAgIC5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkgb3IgLmdldF9vcGNvZGVzKCksIGluIHdoaWNoIGNhc2UgeW91IG1heQogICAgICAgIHdhbnQgdG8gdHJ5IC5xdWlja19yYXRpbygpIG9yIC5yZWFsX3F1aWNrX3JhdGlvKCkgZmlyc3QgdG8gZ2V0IGFuCiAgICAgICAgdXBwZXIgYm91bmQuCgogICAgICAgID4+PiBzID0gU2VxdWVuY2VNYXRjaGVyKE5vbmUsICJhYmNkIiwgImJjZGUiKQogICAgICAgID4+PiBzLnJhdGlvKCkKICAgICAgICAwLjc1CiAgICAgICAgPj4+IHMucXVpY2tfcmF0aW8oKQogICAgICAgIDAuNzUKICAgICAgICA+Pj4gcy5yZWFsX3F1aWNrX3JhdGlvKCkKICAgICAgICAxLjAKICAgICAgICAiIiIKCiAgICAgICAgbWF0Y2hlcyA9IHN1bSh0cmlwbGVbLTFdIGZvciB0cmlwbGUgaW4gc2VsZi5nZXRfbWF0Y2hpbmdfYmxvY2tzKCkpCiAgICAgICAgcmV0dXJuIF9jYWxjdWxhdGVfcmF0aW8obWF0Y2hlcywgbGVuKHNlbGYuYSkgKyBsZW4oc2VsZi5iKSkKCiAgICBkZWYgcXVpY2tfcmF0aW8oc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGFuIHVwcGVyIGJvdW5kIG9uIHJhdGlvKCkgcmVsYXRpdmVseSBxdWlja2x5LgoKICAgICAgICBUaGlzIGlzbid0IGRlZmluZWQgYmV5b25kIHRoYXQgaXQgaXMgYW4gdXBwZXIgYm91bmQgb24gLnJhdGlvKCksIGFuZAogICAgICAgIGlzIGZhc3RlciB0byBjb21wdXRlLgogICAgICAgICIiIgoKICAgICAgICAjIHZpZXdpbmcgYSBhbmQgYiBhcyBtdWx0aXNldHMsIHNldCBtYXRjaGVzIHRvIHRoZSBjYXJkaW5hbGl0eQogICAgICAgICMgb2YgdGhlaXIgaW50ZXJzZWN0aW9uOyB0aGlzIGNvdW50cyB0aGUgbnVtYmVyIG9mIG1hdGNoZXMKICAgICAgICAjIHdpdGhvdXQgcmVnYXJkIHRvIG9yZGVyLCBzbyBpcyBjbGVhcmx5IGFuIHVwcGVyIGJvdW5kCiAgICAgICAgaWYgc2VsZi5mdWxsYmNvdW50IGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuZnVsbGJjb3VudCA9IGZ1bGxiY291bnQgPSB7fQogICAgICAgICAgICBmb3IgZWx0IGluIHNlbGYuYjoKICAgICAgICAgICAgICAgIGZ1bGxiY291bnRbZWx0XSA9IGZ1bGxiY291bnQuZ2V0KGVsdCwgMCkgKyAxCiAgICAgICAgZnVsbGJjb3VudCA9IHNlbGYuZnVsbGJjb3VudAogICAgICAgICMgYXZhaWxbeF0gaXMgdGhlIG51bWJlciBvZiB0aW1lcyB4IGFwcGVhcnMgaW4gJ2InIGxlc3MgdGhlCiAgICAgICAgIyBudW1iZXIgb2YgdGltZXMgd2UndmUgc2VlbiBpdCBpbiAnYScgc28gZmFyIC4uLiBraW5kYQogICAgICAgIGF2YWlsID0ge30KICAgICAgICBhdmFpbGhhcywgbWF0Y2hlcyA9IGF2YWlsLl9fY29udGFpbnNfXywgMAogICAgICAgIGZvciBlbHQgaW4gc2VsZi5hOgogICAgICAgICAgICBpZiBhdmFpbGhhcyhlbHQpOgogICAgICAgICAgICAgICAgbnVtYiA9IGF2YWlsW2VsdF0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG51bWIgPSBmdWxsYmNvdW50LmdldChlbHQsIDApCiAgICAgICAgICAgIGF2YWlsW2VsdF0gPSBudW1iIC0gMQogICAgICAgICAgICBpZiBudW1iID4gMDoKICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBtYXRjaGVzICsgMQogICAgICAgIHJldHVybiBfY2FsY3VsYXRlX3JhdGlvKG1hdGNoZXMsIGxlbihzZWxmLmEpICsgbGVuKHNlbGYuYikpCgogICAgZGVmIHJlYWxfcXVpY2tfcmF0aW8oc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGFuIHVwcGVyIGJvdW5kIG9uIHJhdGlvKCkgdmVyeSBxdWlja2x5LgoKICAgICAgICBUaGlzIGlzbid0IGRlZmluZWQgYmV5b25kIHRoYXQgaXQgaXMgYW4gdXBwZXIgYm91bmQgb24gLnJhdGlvKCksIGFuZAogICAgICAgIGlzIGZhc3RlciB0byBjb21wdXRlIHRoYW4gZWl0aGVyIC5yYXRpbygpIG9yIC5xdWlja19yYXRpbygpLgogICAgICAgICIiIgoKICAgICAgICBsYSwgbGIgPSBsZW4oc2VsZi5hKSwgbGVuKHNlbGYuYikKICAgICAgICAjIGNhbid0IGhhdmUgbW9yZSBtYXRjaGVzIHRoYW4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUKICAgICAgICAjIHNob3J0ZXIgc2VxdWVuY2UKICAgICAgICByZXR1cm4gX2NhbGN1bGF0ZV9yYXRpbyhtaW4obGEsIGxiKSwgbGEgKyBsYikKCmRlZiBnZXRfY2xvc2VfbWF0Y2hlcyh3b3JkLCBwb3NzaWJpbGl0aWVzLCBuPTMsIGN1dG9mZj0wLjYpOgogICAgIiIiVXNlIFNlcXVlbmNlTWF0Y2hlciB0byByZXR1cm4gbGlzdCBvZiB0aGUgYmVzdCAiZ29vZCBlbm91Z2giIG1hdGNoZXMuCgogICAgd29yZCBpcyBhIHNlcXVlbmNlIGZvciB3aGljaCBjbG9zZSBtYXRjaGVzIGFyZSBkZXNpcmVkICh0eXBpY2FsbHkgYQogICAgc3RyaW5nKS4KCiAgICBwb3NzaWJpbGl0aWVzIGlzIGEgbGlzdCBvZiBzZXF1ZW5jZXMgYWdhaW5zdCB3aGljaCB0byBtYXRjaCB3b3JkCiAgICAodHlwaWNhbGx5IGEgbGlzdCBvZiBzdHJpbmdzKS4KCiAgICBPcHRpb25hbCBhcmcgbiAoZGVmYXVsdCAzKSBpcyB0aGUgbWF4aW11bSBudW1iZXIgb2YgY2xvc2UgbWF0Y2hlcyB0bwogICAgcmV0dXJuLiAgbiBtdXN0IGJlID4gMC4KCiAgICBPcHRpb25hbCBhcmcgY3V0b2ZmIChkZWZhdWx0IDAuNikgaXMgYSBmbG9hdCBpbiBbMCwgMV0uICBQb3NzaWJpbGl0aWVzCiAgICB0aGF0IGRvbid0IHNjb3JlIGF0IGxlYXN0IHRoYXQgc2ltaWxhciB0byB3b3JkIGFyZSBpZ25vcmVkLgoKICAgIFRoZSBiZXN0IChubyBtb3JlIHRoYW4gbikgbWF0Y2hlcyBhbW9uZyB0aGUgcG9zc2liaWxpdGllcyBhcmUgcmV0dXJuZWQKICAgIGluIGEgbGlzdCwgc29ydGVkIGJ5IHNpbWlsYXJpdHkgc2NvcmUsIG1vc3Qgc2ltaWxhciBmaXJzdC4KCiAgICA+Pj4gZ2V0X2Nsb3NlX21hdGNoZXMoImFwcGVsIiwgWyJhcGUiLCAiYXBwbGUiLCAicGVhY2giLCAicHVwcHkiXSkKICAgIFsnYXBwbGUnLCAnYXBlJ10KICAgID4+PiBpbXBvcnQga2V5d29yZCBhcyBfa2V5d29yZAogICAgPj4+IGdldF9jbG9zZV9tYXRjaGVzKCJ3aGVlbCIsIF9rZXl3b3JkLmt3bGlzdCkKICAgIFsnd2hpbGUnXQogICAgPj4+IGdldF9jbG9zZV9tYXRjaGVzKCJBcHBsZSIsIF9rZXl3b3JkLmt3bGlzdCkKICAgIFtdCiAgICA+Pj4gZ2V0X2Nsb3NlX21hdGNoZXMoImFjY2VwdCIsIF9rZXl3b3JkLmt3bGlzdCkKICAgIFsnZXhjZXB0J10KICAgICIiIgoKICAgIGlmIG5vdCBuID4gIDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibiBtdXN0IGJlID4gMDogJXIiICUgKG4sKSkKICAgIGlmIG5vdCAwLjAgPD0gY3V0b2ZmIDw9IDEuMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJjdXRvZmYgbXVzdCBiZSBpbiBbMC4wLCAxLjBdOiAlciIgJSAoY3V0b2ZmLCkpCiAgICByZXN1bHQgPSBbXQogICAgcyA9IFNlcXVlbmNlTWF0Y2hlcigpCiAgICBzLnNldF9zZXEyKHdvcmQpCiAgICBmb3IgeCBpbiBwb3NzaWJpbGl0aWVzOgogICAgICAgIHMuc2V0X3NlcTEoeCkKICAgICAgICBpZiBzLnJlYWxfcXVpY2tfcmF0aW8oKSA+PSBjdXRvZmYgYW5kIFwKICAgICAgICAgICBzLnF1aWNrX3JhdGlvKCkgPj0gY3V0b2ZmIGFuZCBcCiAgICAgICAgICAgcy5yYXRpbygpID49IGN1dG9mZjoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgocy5yYXRpbygpLCB4KSkKCiAgICAjIE1vdmUgdGhlIGJlc3Qgc2NvcmVycyB0byBoZWFkIG9mIGxpc3QKICAgIHJlc3VsdCA9IGhlYXBxLm5sYXJnZXN0KG4sIHJlc3VsdCkKICAgICMgU3RyaXAgc2NvcmVzIGZvciB0aGUgYmVzdCBuIG1hdGNoZXMKICAgIHJldHVybiBbeCBmb3Igc2NvcmUsIHggaW4gcmVzdWx0XQoKZGVmIF9jb3VudF9sZWFkaW5nKGxpbmUsIGNoKToKICAgICIiIgogICAgUmV0dXJuIG51bWJlciBvZiBgY2hgIGNoYXJhY3RlcnMgYXQgdGhlIHN0YXJ0IG9mIGBsaW5lYC4KCiAgICBFeGFtcGxlOgoKICAgID4+PiBfY291bnRfbGVhZGluZygnICAgYWJjJywgJyAnKQogICAgMwogICAgIiIiCgogICAgaSwgbiA9IDAsIGxlbihsaW5lKQogICAgd2hpbGUgaSA8IG4gYW5kIGxpbmVbaV0gPT0gY2g6CiAgICAgICAgaSArPSAxCiAgICByZXR1cm4gaQoKY2xhc3MgRGlmZmVyOgogICAgciIiIgogICAgRGlmZmVyIGlzIGEgY2xhc3MgZm9yIGNvbXBhcmluZyBzZXF1ZW5jZXMgb2YgbGluZXMgb2YgdGV4dCwgYW5kCiAgICBwcm9kdWNpbmcgaHVtYW4tcmVhZGFibGUgZGlmZmVyZW5jZXMgb3IgZGVsdGFzLiAgRGlmZmVyIHVzZXMKICAgIFNlcXVlbmNlTWF0Y2hlciBib3RoIHRvIGNvbXBhcmUgc2VxdWVuY2VzIG9mIGxpbmVzLCBhbmQgdG8gY29tcGFyZQogICAgc2VxdWVuY2VzIG9mIGNoYXJhY3RlcnMgd2l0aGluIHNpbWlsYXIgKG5lYXItbWF0Y2hpbmcpIGxpbmVzLgoKICAgIEVhY2ggbGluZSBvZiBhIERpZmZlciBkZWx0YSBiZWdpbnMgd2l0aCBhIHR3by1sZXR0ZXIgY29kZToKCiAgICAgICAgJy0gJyAgICBsaW5lIHVuaXF1ZSB0byBzZXF1ZW5jZSAxCiAgICAgICAgJysgJyAgICBsaW5lIHVuaXF1ZSB0byBzZXF1ZW5jZSAyCiAgICAgICAgJyAgJyAgICBsaW5lIGNvbW1vbiB0byBib3RoIHNlcXVlbmNlcwogICAgICAgICc/ICcgICAgbGluZSBub3QgcHJlc2VudCBpbiBlaXRoZXIgaW5wdXQgc2VxdWVuY2UKCiAgICBMaW5lcyBiZWdpbm5pbmcgd2l0aCAnPyAnIGF0dGVtcHQgdG8gZ3VpZGUgdGhlIGV5ZSB0byBpbnRyYWxpbmUKICAgIGRpZmZlcmVuY2VzLCBhbmQgd2VyZSBub3QgcHJlc2VudCBpbiBlaXRoZXIgaW5wdXQgc2VxdWVuY2UuICBUaGVzZSBsaW5lcwogICAgY2FuIGJlIGNvbmZ1c2luZyBpZiB0aGUgc2VxdWVuY2VzIGNvbnRhaW4gdGFiIGNoYXJhY3RlcnMuCgogICAgTm90ZSB0aGF0IERpZmZlciBtYWtlcyBubyBjbGFpbSB0byBwcm9kdWNlIGEgKm1pbmltYWwqIGRpZmYuICBUbyB0aGUKICAgIGNvbnRyYXJ5LCBtaW5pbWFsIGRpZmZzIGFyZSBvZnRlbiBjb3VudGVyLWludHVpdGl2ZSwgYmVjYXVzZSB0aGV5IHN5bmNoCiAgICB1cCBhbnl3aGVyZSBwb3NzaWJsZSwgc29tZXRpbWVzIGFjY2lkZW50YWwgbWF0Y2hlcyAxMDAgcGFnZXMgYXBhcnQuCiAgICBSZXN0cmljdGluZyBzeW5jaCBwb2ludHMgdG8gY29udGlndW91cyBtYXRjaGVzIHByZXNlcnZlcyBzb21lIG5vdGlvbiBvZgogICAgbG9jYWxpdHksIGF0IHRoZSBvY2Nhc2lvbmFsIGNvc3Qgb2YgcHJvZHVjaW5nIGEgbG9uZ2VyIGRpZmYuCgogICAgRXhhbXBsZTogQ29tcGFyaW5nIHR3byB0ZXh0cy4KCiAgICBGaXJzdCB3ZSBzZXQgdXAgdGhlIHRleHRzLCBzZXF1ZW5jZXMgb2YgaW5kaXZpZHVhbCBzaW5nbGUtbGluZSBzdHJpbmdzCiAgICBlbmRpbmcgd2l0aCBuZXdsaW5lcyAoc3VjaCBzZXF1ZW5jZXMgY2FuIGFsc28gYmUgb2J0YWluZWQgZnJvbSB0aGUKICAgIGByZWFkbGluZXMoKWAgbWV0aG9kIG9mIGZpbGUtbGlrZSBvYmplY3RzKToKCiAgICA+Pj4gdGV4dDEgPSAnJycgIDEuIEJlYXV0aWZ1bCBpcyBiZXR0ZXIgdGhhbiB1Z2x5LgogICAgLi4uICAgMi4gRXhwbGljaXQgaXMgYmV0dGVyIHRoYW4gaW1wbGljaXQuCiAgICAuLi4gICAzLiBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgIC4uLiAgIDQuIENvbXBsZXggaXMgYmV0dGVyIHRoYW4gY29tcGxpY2F0ZWQuCiAgICAuLi4gJycnLnNwbGl0bGluZXMoa2VlcGVuZHM9VHJ1ZSkKICAgID4+PiBsZW4odGV4dDEpCiAgICA0CiAgICA+Pj4gdGV4dDFbMF1bLTFdCiAgICAnXG4nCiAgICA+Pj4gdGV4dDIgPSAnJycgIDEuIEJlYXV0aWZ1bCBpcyBiZXR0ZXIgdGhhbiB1Z2x5LgogICAgLi4uICAgMy4gICBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgIC4uLiAgIDQuIENvbXBsaWNhdGVkIGlzIGJldHRlciB0aGFuIGNvbXBsZXguCiAgICAuLi4gICA1LiBGbGF0IGlzIGJldHRlciB0aGFuIG5lc3RlZC4KICAgIC4uLiAnJycuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKQoKICAgIE5leHQgd2UgaW5zdGFudGlhdGUgYSBEaWZmZXIgb2JqZWN0OgoKICAgID4+PiBkID0gRGlmZmVyKCkKCiAgICBOb3RlIHRoYXQgd2hlbiBpbnN0YW50aWF0aW5nIGEgRGlmZmVyIG9iamVjdCB3ZSBtYXkgcGFzcyBmdW5jdGlvbnMgdG8KICAgIGZpbHRlciBvdXQgbGluZSBhbmQgY2hhcmFjdGVyICdqdW5rJy4gIFNlZSBEaWZmZXIuX19pbml0X18gZm9yIGRldGFpbHMuCgogICAgRmluYWxseSwgd2UgY29tcGFyZSB0aGUgdHdvOgoKICAgID4+PiByZXN1bHQgPSBsaXN0KGQuY29tcGFyZSh0ZXh0MSwgdGV4dDIpKQoKICAgICdyZXN1bHQnIGlzIGEgbGlzdCBvZiBzdHJpbmdzLCBzbyBsZXQncyBwcmV0dHktcHJpbnQgaXQ6CgogICAgPj4+IGZyb20gcHByaW50IGltcG9ydCBwcHJpbnQgYXMgX3BwcmludAogICAgPj4+IF9wcHJpbnQocmVzdWx0KQogICAgWycgICAgMS4gQmVhdXRpZnVsIGlzIGJldHRlciB0aGFuIHVnbHkuXG4nLAogICAgICctICAgMi4gRXhwbGljaXQgaXMgYmV0dGVyIHRoYW4gaW1wbGljaXQuXG4nLAogICAgICctICAgMy4gU2ltcGxlIGlzIGJldHRlciB0aGFuIGNvbXBsZXguXG4nLAogICAgICcrICAgMy4gICBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC5cbicsCiAgICAgJz8gICAgICsrXG4nLAogICAgICctICAgNC4gQ29tcGxleCBpcyBiZXR0ZXIgdGhhbiBjb21wbGljYXRlZC5cbicsCiAgICAgJz8gICAgICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgLS0tLSBeXG4nLAogICAgICcrICAgNC4gQ29tcGxpY2F0ZWQgaXMgYmV0dGVyIHRoYW4gY29tcGxleC5cbicsCiAgICAgJz8gICAgICAgICAgICsrKysgXiAgICAgICAgICAgICAgICAgICAgICBeXG4nLAogICAgICcrICAgNS4gRmxhdCBpcyBiZXR0ZXIgdGhhbiBuZXN0ZWQuXG4nXQoKICAgIEFzIGEgc2luZ2xlIG11bHRpLWxpbmUgc3RyaW5nIGl0IGxvb2tzIGxpa2UgdGhpczoKCiAgICA+Pj4gcHJpbnQoJycuam9pbihyZXN1bHQpLCBlbmQ9IiIpCiAgICAgICAgMS4gQmVhdXRpZnVsIGlzIGJldHRlciB0aGFuIHVnbHkuCiAgICAtICAgMi4gRXhwbGljaXQgaXMgYmV0dGVyIHRoYW4gaW1wbGljaXQuCiAgICAtICAgMy4gU2ltcGxlIGlzIGJldHRlciB0aGFuIGNvbXBsZXguCiAgICArICAgMy4gICBTaW1wbGUgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgID8gICAgICsrCiAgICAtICAgNC4gQ29tcGxleCBpcyBiZXR0ZXIgdGhhbiBjb21wbGljYXRlZC4KICAgID8gICAgICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgLS0tLSBeCiAgICArICAgNC4gQ29tcGxpY2F0ZWQgaXMgYmV0dGVyIHRoYW4gY29tcGxleC4KICAgID8gICAgICAgICAgICsrKysgXiAgICAgICAgICAgICAgICAgICAgICBeCiAgICArICAgNS4gRmxhdCBpcyBiZXR0ZXIgdGhhbiBuZXN0ZWQuCgogICAgTWV0aG9kczoKCiAgICBfX2luaXRfXyhsaW5lanVuaz1Ob25lLCBjaGFyanVuaz1Ob25lKQogICAgICAgIENvbnN0cnVjdCBhIHRleHQgZGlmZmVyZW5jZXIsIHdpdGggb3B0aW9uYWwgZmlsdGVycy4KCiAgICBjb21wYXJlKGEsIGIpCiAgICAgICAgQ29tcGFyZSB0d28gc2VxdWVuY2VzIG9mIGxpbmVzOyBnZW5lcmF0ZSB0aGUgcmVzdWx0aW5nIGRlbHRhLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGxpbmVqdW5rPU5vbmUsIGNoYXJqdW5rPU5vbmUpOgogICAgICAgICIiIgogICAgICAgIENvbnN0cnVjdCBhIHRleHQgZGlmZmVyZW5jZXIsIHdpdGggb3B0aW9uYWwgZmlsdGVycy4KCiAgICAgICAgVGhlIHR3byBvcHRpb25hbCBrZXl3b3JkIHBhcmFtZXRlcnMgYXJlIGZvciBmaWx0ZXIgZnVuY3Rpb25zOgoKICAgICAgICAtIGBsaW5lanVua2A6IEEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYWNjZXB0IGEgc2luZ2xlIHN0cmluZyBhcmd1bWVudCwKICAgICAgICAgIGFuZCByZXR1cm4gdHJ1ZSBpZmYgdGhlIHN0cmluZyBpcyBqdW5rLiBUaGUgbW9kdWxlLWxldmVsIGZ1bmN0aW9uCiAgICAgICAgICBgSVNfTElORV9KVU5LYCBtYXkgYmUgdXNlZCB0byBmaWx0ZXIgb3V0IGxpbmVzIHdpdGhvdXQgdmlzaWJsZQogICAgICAgICAgY2hhcmFjdGVycywgZXhjZXB0IGZvciBhdCBtb3N0IG9uZSBzcGxhdCAoJyMnKS4gIEl0IGlzIHJlY29tbWVuZGVkCiAgICAgICAgICB0byBsZWF2ZSBsaW5lanVuayBOb25lOyBhcyBvZiBQeXRob24gMi4zLCB0aGUgdW5kZXJseWluZwogICAgICAgICAgU2VxdWVuY2VNYXRjaGVyIGNsYXNzIGhhcyBncm93biBhbiBhZGFwdGl2ZSBub3Rpb24gb2YgIm5vaXNlIiBsaW5lcwogICAgICAgICAgdGhhdCdzIGJldHRlciB0aGFuIGFueSBzdGF0aWMgZGVmaW5pdGlvbiB0aGUgYXV0aG9yIGhhcyBldmVyIGJlZW4KICAgICAgICAgIGFibGUgdG8gY3JhZnQuCgogICAgICAgIC0gYGNoYXJqdW5rYDogQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBhY2NlcHQgYSBzdHJpbmcgb2YgbGVuZ3RoIDEuIFRoZQogICAgICAgICAgbW9kdWxlLWxldmVsIGZ1bmN0aW9uIGBJU19DSEFSQUNURVJfSlVOS2AgbWF5IGJlIHVzZWQgdG8gZmlsdGVyIG91dAogICAgICAgICAgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIChhIGJsYW5rIG9yIHRhYjsgKipub3RlKio6IGJhZCBpZGVhIHRvIGluY2x1ZGUKICAgICAgICAgIG5ld2xpbmUgaW4gdGhpcyEpLiAgVXNlIG9mIElTX0NIQVJBQ1RFUl9KVU5LIGlzIHJlY29tbWVuZGVkLgogICAgICAgICIiIgoKICAgICAgICBzZWxmLmxpbmVqdW5rID0gbGluZWp1bmsKICAgICAgICBzZWxmLmNoYXJqdW5rID0gY2hhcmp1bmsKCiAgICBkZWYgY29tcGFyZShzZWxmLCBhLCBiKToKICAgICAgICByIiIiCiAgICAgICAgQ29tcGFyZSB0d28gc2VxdWVuY2VzIG9mIGxpbmVzOyBnZW5lcmF0ZSB0aGUgcmVzdWx0aW5nIGRlbHRhLgoKICAgICAgICBFYWNoIHNlcXVlbmNlIG11c3QgY29udGFpbiBpbmRpdmlkdWFsIHNpbmdsZS1saW5lIHN0cmluZ3MgZW5kaW5nIHdpdGgKICAgICAgICBuZXdsaW5lcy4gU3VjaCBzZXF1ZW5jZXMgY2FuIGJlIG9idGFpbmVkIGZyb20gdGhlIGByZWFkbGluZXMoKWAgbWV0aG9kCiAgICAgICAgb2YgZmlsZS1saWtlIG9iamVjdHMuICBUaGUgZGVsdGEgZ2VuZXJhdGVkIGFsc28gY29uc2lzdHMgb2YgbmV3bGluZS0KICAgICAgICB0ZXJtaW5hdGVkIHN0cmluZ3MsIHJlYWR5IHRvIGJlIHByaW50ZWQgYXMtaXMgdmlhIHRoZSB3cml0ZWxpbmUoKQogICAgICAgIG1ldGhvZCBvZiBhIGZpbGUtbGlrZSBvYmplY3QuCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgID4+PiBwcmludCgnJy5qb2luKERpZmZlcigpLmNvbXBhcmUoJ29uZVxudHdvXG50aHJlZVxuJy5zcGxpdGxpbmVzKFRydWUpLAogICAgICAgIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29yZVxudHJlZVxuZW11XG4nLnNwbGl0bGluZXMoVHJ1ZSkpKSwKICAgICAgICAuLi4gICAgICAgZW5kPSIiKQogICAgICAgIC0gb25lCiAgICAgICAgPyAgXgogICAgICAgICsgb3JlCiAgICAgICAgPyAgXgogICAgICAgIC0gdHdvCiAgICAgICAgLSB0aHJlZQogICAgICAgID8gIC0KICAgICAgICArIHRyZWUKICAgICAgICArIGVtdQogICAgICAgICIiIgoKICAgICAgICBjcnVuY2hlciA9IFNlcXVlbmNlTWF0Y2hlcihzZWxmLmxpbmVqdW5rLCBhLCBiKQogICAgICAgIGZvciB0YWcsIGFsbywgYWhpLCBibG8sIGJoaSBpbiBjcnVuY2hlci5nZXRfb3Bjb2RlcygpOgogICAgICAgICAgICBpZiB0YWcgPT0gJ3JlcGxhY2UnOgogICAgICAgICAgICAgICAgZyA9IHNlbGYuX2ZhbmN5X3JlcGxhY2UoYSwgYWxvLCBhaGksIGIsIGJsbywgYmhpKQogICAgICAgICAgICBlbGlmIHRhZyA9PSAnZGVsZXRlJzoKICAgICAgICAgICAgICAgIGcgPSBzZWxmLl9kdW1wKCctJywgYSwgYWxvLCBhaGkpCiAgICAgICAgICAgIGVsaWYgdGFnID09ICdpbnNlcnQnOgogICAgICAgICAgICAgICAgZyA9IHNlbGYuX2R1bXAoJysnLCBiLCBibG8sIGJoaSkKICAgICAgICAgICAgZWxpZiB0YWcgPT0gJ2VxdWFsJzoKICAgICAgICAgICAgICAgIGcgPSBzZWxmLl9kdW1wKCcgJywgYSwgYWxvLCBhaGkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCd1bmtub3duIHRhZyAlcicgJSAodGFnLCkpCgogICAgICAgICAgICBmb3IgbGluZSBpbiBnOgogICAgICAgICAgICAgICAgeWllbGQgbGluZQoKICAgIGRlZiBfZHVtcChzZWxmLCB0YWcsIHgsIGxvLCBoaSk6CiAgICAgICAgIiIiR2VuZXJhdGUgY29tcGFyaXNvbiByZXN1bHRzIGZvciBhIHNhbWUtdGFnZ2VkIHJhbmdlLiIiIgogICAgICAgIGZvciBpIGluIHJhbmdlKGxvLCBoaSk6CiAgICAgICAgICAgIHlpZWxkICclcyAlcycgJSAodGFnLCB4W2ldKQoKICAgIGRlZiBfcGxhaW5fcmVwbGFjZShzZWxmLCBhLCBhbG8sIGFoaSwgYiwgYmxvLCBiaGkpOgogICAgICAgIGFzc2VydCBhbG8gPCBhaGkgYW5kIGJsbyA8IGJoaQogICAgICAgICMgZHVtcCB0aGUgc2hvcnRlciBibG9jayBmaXJzdCAtLSByZWR1Y2VzIHRoZSBidXJkZW4gb24gc2hvcnQtdGVybQogICAgICAgICMgbWVtb3J5IGlmIHRoZSBibG9ja3MgYXJlIG9mIHZlcnkgZGlmZmVyZW50IHNpemVzCiAgICAgICAgaWYgYmhpIC0gYmxvIDwgYWhpIC0gYWxvOgogICAgICAgICAgICBmaXJzdCAgPSBzZWxmLl9kdW1wKCcrJywgYiwgYmxvLCBiaGkpCiAgICAgICAgICAgIHNlY29uZCA9IHNlbGYuX2R1bXAoJy0nLCBhLCBhbG8sIGFoaSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBmaXJzdCAgPSBzZWxmLl9kdW1wKCctJywgYSwgYWxvLCBhaGkpCiAgICAgICAgICAgIHNlY29uZCA9IHNlbGYuX2R1bXAoJysnLCBiLCBibG8sIGJoaSkKCiAgICAgICAgZm9yIGcgaW4gZmlyc3QsIHNlY29uZDoKICAgICAgICAgICAgZm9yIGxpbmUgaW4gZzoKICAgICAgICAgICAgICAgIHlpZWxkIGxpbmUKCiAgICBkZWYgX2ZhbmN5X3JlcGxhY2Uoc2VsZiwgYSwgYWxvLCBhaGksIGIsIGJsbywgYmhpKToKICAgICAgICByIiIiCiAgICAgICAgV2hlbiByZXBsYWNpbmcgb25lIGJsb2NrIG9mIGxpbmVzIHdpdGggYW5vdGhlciwgc2VhcmNoIHRoZSBibG9ja3MKICAgICAgICBmb3IgKnNpbWlsYXIqIGxpbmVzOyB0aGUgYmVzdC1tYXRjaGluZyBwYWlyIChpZiBhbnkpIGlzIHVzZWQgYXMgYQogICAgICAgIHN5bmNoIHBvaW50LCBhbmQgaW50cmFsaW5lIGRpZmZlcmVuY2UgbWFya2luZyBpcyBkb25lIG9uIHRoZQogICAgICAgIHNpbWlsYXIgcGFpci4gTG90cyBvZiB3b3JrLCBidXQgb2Z0ZW4gd29ydGggaXQuCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgID4+PiBkID0gRGlmZmVyKCkKICAgICAgICA+Pj4gcmVzdWx0cyA9IGQuX2ZhbmN5X3JlcGxhY2UoWydhYmNEZWZnaGlKa2xcbiddLCAwLCAxLAogICAgICAgIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ2FiY2RlZkdoaWprbFxuJ10sIDAsIDEpCiAgICAgICAgPj4+IHByaW50KCcnLmpvaW4ocmVzdWx0cyksIGVuZD0iIikKICAgICAgICAtIGFiY0RlZmdoaUprbAogICAgICAgID8gICAgXiAgXiAgXgogICAgICAgICsgYWJjZGVmR2hpamtsCiAgICAgICAgPyAgICBeICBeICBeCiAgICAgICAgIiIiCgogICAgICAgICMgZG9uJ3Qgc3luY2ggdXAgdW5sZXNzIHRoZSBsaW5lcyBoYXZlIGEgc2ltaWxhcml0eSBzY29yZSBvZiBhdAogICAgICAgICMgbGVhc3QgY3V0b2ZmOyBiZXN0X3JhdGlvIHRyYWNrcyB0aGUgYmVzdCBzY29yZSBzZWVuIHNvIGZhcgogICAgICAgIGJlc3RfcmF0aW8sIGN1dG9mZiA9IDAuNzQsIDAuNzUKICAgICAgICBjcnVuY2hlciA9IFNlcXVlbmNlTWF0Y2hlcihzZWxmLmNoYXJqdW5rKQogICAgICAgIGVxaSwgZXFqID0gTm9uZSwgTm9uZSAgICMgMXN0IGluZGljZXMgb2YgZXF1YWwgbGluZXMgKGlmIGFueSkKCiAgICAgICAgIyBzZWFyY2ggZm9yIHRoZSBwYWlyIHRoYXQgbWF0Y2hlcyBiZXN0IHdpdGhvdXQgYmVpbmcgaWRlbnRpY2FsCiAgICAgICAgIyAoaWRlbnRpY2FsIGxpbmVzIG11c3QgYmUganVuayBsaW5lcywgJiB3ZSBkb24ndCB3YW50IHRvIHN5bmNoIHVwCiAgICAgICAgIyBvbiBqdW5rIC0tIHVubGVzcyB3ZSBoYXZlIHRvKQogICAgICAgIGZvciBqIGluIHJhbmdlKGJsbywgYmhpKToKICAgICAgICAgICAgYmogPSBiW2pdCiAgICAgICAgICAgIGNydW5jaGVyLnNldF9zZXEyKGJqKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShhbG8sIGFoaSk6CiAgICAgICAgICAgICAgICBhaSA9IGFbaV0KICAgICAgICAgICAgICAgIGlmIGFpID09IGJqOgogICAgICAgICAgICAgICAgICAgIGlmIGVxaSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBlcWksIGVxaiA9IGksIGoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgY3J1bmNoZXIuc2V0X3NlcTEoYWkpCiAgICAgICAgICAgICAgICAjIGNvbXB1dGluZyBzaW1pbGFyaXR5IGlzIGV4cGVuc2l2ZSwgc28gdXNlIHRoZSBxdWljawogICAgICAgICAgICAgICAgIyB1cHBlciBib3VuZHMgZmlyc3QgLS0gaGF2ZSBzZWVuIHRoaXMgc3BlZWQgdXAgbWVzc3kKICAgICAgICAgICAgICAgICMgY29tcGFyZXMgYnkgYSBmYWN0b3Igb2YgMy4KICAgICAgICAgICAgICAgICMgbm90ZSB0aGF0IHJhdGlvKCkgaXMgb25seSBleHBlbnNpdmUgdG8gY29tcHV0ZSB0aGUgZmlyc3QKICAgICAgICAgICAgICAgICMgdGltZSBpdCdzIGNhbGxlZCBvbiBhIHNlcXVlbmNlIHBhaXI7IHRoZSBleHBlbnNpdmUgcGFydAogICAgICAgICAgICAgICAgIyBvZiB0aGUgY29tcHV0YXRpb24gaXMgY2FjaGVkIGJ5IGNydW5jaGVyCiAgICAgICAgICAgICAgICBpZiBjcnVuY2hlci5yZWFsX3F1aWNrX3JhdGlvKCkgPiBiZXN0X3JhdGlvIGFuZCBcCiAgICAgICAgICAgICAgICAgICAgICBjcnVuY2hlci5xdWlja19yYXRpbygpID4gYmVzdF9yYXRpbyBhbmQgXAogICAgICAgICAgICAgICAgICAgICAgY3J1bmNoZXIucmF0aW8oKSA+IGJlc3RfcmF0aW86CiAgICAgICAgICAgICAgICAgICAgYmVzdF9yYXRpbywgYmVzdF9pLCBiZXN0X2ogPSBjcnVuY2hlci5yYXRpbygpLCBpLCBqCiAgICAgICAgaWYgYmVzdF9yYXRpbyA8IGN1dG9mZjoKICAgICAgICAgICAgIyBubyBub24taWRlbnRpY2FsICJwcmV0dHkgY2xvc2UiIHBhaXIKICAgICAgICAgICAgaWYgZXFpIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjIG5vIGlkZW50aWNhbCBwYWlyIGVpdGhlciAtLSB0cmVhdCBpdCBhcyBhIHN0cmFpZ2h0IHJlcGxhY2UKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIHNlbGYuX3BsYWluX3JlcGxhY2UoYSwgYWxvLCBhaGksIGIsIGJsbywgYmhpKToKICAgICAgICAgICAgICAgICAgICB5aWVsZCBsaW5lCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgIyBubyBjbG9zZSBwYWlyLCBidXQgYW4gaWRlbnRpY2FsIHBhaXIgLS0gc3luY2ggdXAgb24gdGhhdAogICAgICAgICAgICBiZXN0X2ksIGJlc3RfaiwgYmVzdF9yYXRpbyA9IGVxaSwgZXFqLCAxLjAKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIHRoZXJlJ3MgYSBjbG9zZSBwYWlyLCBzbyBmb3JnZXQgdGhlIGlkZW50aWNhbCBwYWlyIChpZiBhbnkpCiAgICAgICAgICAgIGVxaSA9IE5vbmUKCiAgICAgICAgIyBhW2Jlc3RfaV0gdmVyeSBzaW1pbGFyIHRvIGJbYmVzdF9qXTsgZXFpIGlzIE5vbmUgaWZmIHRoZXkncmUgbm90CiAgICAgICAgIyBpZGVudGljYWwKCiAgICAgICAgIyBwdW1wIG91dCBkaWZmcyBmcm9tIGJlZm9yZSB0aGUgc3luY2ggcG9pbnQKICAgICAgICBmb3IgbGluZSBpbiBzZWxmLl9mYW5jeV9oZWxwZXIoYSwgYWxvLCBiZXN0X2ksIGIsIGJsbywgYmVzdF9qKToKICAgICAgICAgICAgeWllbGQgbGluZQoKICAgICAgICAjIGRvIGludHJhbGluZSBtYXJraW5nIG9uIHRoZSBzeW5jaCBwYWlyCiAgICAgICAgYWVsdCwgYmVsdCA9IGFbYmVzdF9pXSwgYltiZXN0X2pdCiAgICAgICAgaWYgZXFpIGlzIE5vbmU6CiAgICAgICAgICAgICMgcHVtcCBvdXQgYSAnLScsICc/JywgJysnLCAnPycgcXVhZCBmb3IgdGhlIHN5bmNoZWQgbGluZXMKICAgICAgICAgICAgYXRhZ3MgPSBidGFncyA9ICIiCiAgICAgICAgICAgIGNydW5jaGVyLnNldF9zZXFzKGFlbHQsIGJlbHQpCiAgICAgICAgICAgIGZvciB0YWcsIGFpMSwgYWkyLCBiajEsIGJqMiBpbiBjcnVuY2hlci5nZXRfb3Bjb2RlcygpOgogICAgICAgICAgICAgICAgbGEsIGxiID0gYWkyIC0gYWkxLCBiajIgLSBiajEKICAgICAgICAgICAgICAgIGlmIHRhZyA9PSAncmVwbGFjZSc6CiAgICAgICAgICAgICAgICAgICAgYXRhZ3MgKz0gJ14nICogbGEKICAgICAgICAgICAgICAgICAgICBidGFncyArPSAnXicgKiBsYgogICAgICAgICAgICAgICAgZWxpZiB0YWcgPT0gJ2RlbGV0ZSc6CiAgICAgICAgICAgICAgICAgICAgYXRhZ3MgKz0gJy0nICogbGEKICAgICAgICAgICAgICAgIGVsaWYgdGFnID09ICdpbnNlcnQnOgogICAgICAgICAgICAgICAgICAgIGJ0YWdzICs9ICcrJyAqIGxiCiAgICAgICAgICAgICAgICBlbGlmIHRhZyA9PSAnZXF1YWwnOgogICAgICAgICAgICAgICAgICAgIGF0YWdzICs9ICcgJyAqIGxhCiAgICAgICAgICAgICAgICAgICAgYnRhZ3MgKz0gJyAnICogbGIKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigndW5rbm93biB0YWcgJXInICUgKHRhZywpKQogICAgICAgICAgICBmb3IgbGluZSBpbiBzZWxmLl9xZm9ybWF0KGFlbHQsIGJlbHQsIGF0YWdzLCBidGFncyk6CiAgICAgICAgICAgICAgICB5aWVsZCBsaW5lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyB0aGUgc3luY2ggcGFpciBpcyBpZGVudGljYWwKICAgICAgICAgICAgeWllbGQgJyAgJyArIGFlbHQKCiAgICAgICAgIyBwdW1wIG91dCBkaWZmcyBmcm9tIGFmdGVyIHRoZSBzeW5jaCBwb2ludAogICAgICAgIGZvciBsaW5lIGluIHNlbGYuX2ZhbmN5X2hlbHBlcihhLCBiZXN0X2krMSwgYWhpLCBiLCBiZXN0X2orMSwgYmhpKToKICAgICAgICAgICAgeWllbGQgbGluZQoKICAgIGRlZiBfZmFuY3lfaGVscGVyKHNlbGYsIGEsIGFsbywgYWhpLCBiLCBibG8sIGJoaSk6CiAgICAgICAgZyA9IFtdCiAgICAgICAgaWYgYWxvIDwgYWhpOgogICAgICAgICAgICBpZiBibG8gPCBiaGk6CiAgICAgICAgICAgICAgICBnID0gc2VsZi5fZmFuY3lfcmVwbGFjZShhLCBhbG8sIGFoaSwgYiwgYmxvLCBiaGkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBnID0gc2VsZi5fZHVtcCgnLScsIGEsIGFsbywgYWhpKQogICAgICAgIGVsaWYgYmxvIDwgYmhpOgogICAgICAgICAgICBnID0gc2VsZi5fZHVtcCgnKycsIGIsIGJsbywgYmhpKQoKICAgICAgICBmb3IgbGluZSBpbiBnOgogICAgICAgICAgICB5aWVsZCBsaW5lCgogICAgZGVmIF9xZm9ybWF0KHNlbGYsIGFsaW5lLCBibGluZSwgYXRhZ3MsIGJ0YWdzKToKICAgICAgICByIiIiCiAgICAgICAgRm9ybWF0ICI/IiBvdXRwdXQgYW5kIGRlYWwgd2l0aCBsZWFkaW5nIHRhYnMuCgogICAgICAgIEV4YW1wbGU6CgogICAgICAgID4+PiBkID0gRGlmZmVyKCkKICAgICAgICA+Pj4gcmVzdWx0cyA9IGQuX3Fmb3JtYXQoJ1x0YWJjRGVmZ2hpSmtsXG4nLCAnXHRhYmNkZWZHaGlqa2xcbicsCiAgICAgICAgLi4uICAgICAgICAgICAgICAgICAgICAgICcgIF4gXiAgXiAgICAgICcsICcgIF4gXiAgXiAgICAgICcpCiAgICAgICAgPj4+IGZvciBsaW5lIGluIHJlc3VsdHM6IHByaW50KHJlcHIobGluZSkpCiAgICAgICAgLi4uCiAgICAgICAgJy0gXHRhYmNEZWZnaGlKa2xcbicKICAgICAgICAnPyBcdCBeIF4gIF5cbicKICAgICAgICAnKyBcdGFiY2RlZkdoaWprbFxuJwogICAgICAgICc/IFx0IF4gXiAgXlxuJwogICAgICAgICIiIgoKICAgICAgICAjIENhbiBodXJ0LCBidXQgd2lsbCBwcm9iYWJseSBoZWxwIG1vc3Qgb2YgdGhlIHRpbWUuCiAgICAgICAgY29tbW9uID0gbWluKF9jb3VudF9sZWFkaW5nKGFsaW5lLCAiXHQiKSwKICAgICAgICAgICAgICAgICAgICAgX2NvdW50X2xlYWRpbmcoYmxpbmUsICJcdCIpKQogICAgICAgIGNvbW1vbiA9IG1pbihjb21tb24sIF9jb3VudF9sZWFkaW5nKGF0YWdzWzpjb21tb25dLCAiICIpKQogICAgICAgIGNvbW1vbiA9IG1pbihjb21tb24sIF9jb3VudF9sZWFkaW5nKGJ0YWdzWzpjb21tb25dLCAiICIpKQogICAgICAgIGF0YWdzID0gYXRhZ3NbY29tbW9uOl0ucnN0cmlwKCkKICAgICAgICBidGFncyA9IGJ0YWdzW2NvbW1vbjpdLnJzdHJpcCgpCgogICAgICAgIHlpZWxkICItICIgKyBhbGluZQogICAgICAgIGlmIGF0YWdzOgogICAgICAgICAgICB5aWVsZCAiPyAlcyVzXG4iICUgKCJcdCIgKiBjb21tb24sIGF0YWdzKQoKICAgICAgICB5aWVsZCAiKyAiICsgYmxpbmUKICAgICAgICBpZiBidGFnczoKICAgICAgICAgICAgeWllbGQgIj8gJXMlc1xuIiAlICgiXHQiICogY29tbW9uLCBidGFncykKCiMgV2l0aCByZXNwZWN0IHRvIGp1bmssIGFuIGVhcmxpZXIgdmVyc2lvbiBvZiBuZGlmZiBzaW1wbHkgcmVmdXNlZCB0bwojICpzdGFydCogYSBtYXRjaCB3aXRoIGEganVuayBlbGVtZW50LiAgVGhlIHJlc3VsdCB3YXMgY2FzZXMgbGlrZSB0aGlzOgojICAgICBiZWZvcmU6IHByaXZhdGUgVGhyZWFkIGN1cnJlbnRUaHJlYWQ7CiMgICAgIGFmdGVyOiAgcHJpdmF0ZSB2b2xhdGlsZSBUaHJlYWQgY3VycmVudFRocmVhZDsKIyBJZiB5b3UgY29uc2lkZXIgd2hpdGVzcGFjZSB0byBiZSBqdW5rLCB0aGUgbG9uZ2VzdCBjb250aWd1b3VzIG1hdGNoCiMgbm90IHN0YXJ0aW5nIHdpdGgganVuayBpcyAiZSBUaHJlYWQgY3VycmVudFRocmVhZCIuICBTbyBuZGlmZiByZXBvcnRlZAojIHRoYXQgImUgdm9sYXRpbCIgd2FzIGluc2VydGVkIGJldHdlZW4gdGhlICd0JyBhbmQgdGhlICdlJyBpbiAicHJpdmF0ZSIuCiMgV2hpbGUgYW4gYWNjdXJhdGUgdmlldywgdG8gcGVvcGxlIHRoYXQncyBhYnN1cmQuICBUaGUgY3VycmVudCB2ZXJzaW9uCiMgbG9va3MgZm9yIG1hdGNoaW5nIGJsb2NrcyB0aGF0IGFyZSBlbnRpcmVseSBqdW5rLWZyZWUsIHRoZW4gZXh0ZW5kcyB0aGUKIyBsb25nZXN0IG9uZSBvZiB0aG9zZSBhcyBmYXIgYXMgcG9zc2libGUgYnV0IG9ubHkgd2l0aCBtYXRjaGluZyBqdW5rLgojIFNvIG5vdyAiY3VycmVudFRocmVhZCIgaXMgbWF0Y2hlZCwgdGhlbiBleHRlbmRlZCB0byBzdWNrIHVwIHRoZQojIHByZWNlZGluZyBibGFuazsgdGhlbiAicHJpdmF0ZSIgaXMgbWF0Y2hlZCwgYW5kIGV4dGVuZGVkIHRvIHN1Y2sgdXAgdGhlCiMgZm9sbG93aW5nIGJsYW5rOyB0aGVuICJUaHJlYWQiIGlzIG1hdGNoZWQ7IGFuZCBmaW5hbGx5IG5kaWZmIHJlcG9ydHMKIyB0aGF0ICJ2b2xhdGlsZSAiIHdhcyBpbnNlcnRlZCBiZWZvcmUgIlRocmVhZCIuICBUaGUgb25seSBxdWliYmxlCiMgcmVtYWluaW5nIGlzIHRoYXQgcGVyaGFwcyBpdCB3YXMgcmVhbGx5IHRoZSBjYXNlIHRoYXQgIiB2b2xhdGlsZSIKIyB3YXMgaW5zZXJ0ZWQgYWZ0ZXIgInByaXZhdGUiLiAgSSBjYW4gbGl2ZSB3aXRoIHRoYXQgPHdpbms+LgoKaW1wb3J0IHJlCgpkZWYgSVNfTElORV9KVU5LKGxpbmUsIHBhdD1yZS5jb21waWxlKHIiXHMqIz9ccyokIikubWF0Y2gpOgogICAgciIiIgogICAgUmV0dXJuIDEgZm9yIGlnbm9yYWJsZSBsaW5lOiBpZmYgYGxpbmVgIGlzIGJsYW5rIG9yIGNvbnRhaW5zIGEgc2luZ2xlICcjJy4KCiAgICBFeGFtcGxlczoKCiAgICA+Pj4gSVNfTElORV9KVU5LKCdcbicpCiAgICBUcnVlCiAgICA+Pj4gSVNfTElORV9KVU5LKCcgICMgICBcbicpCiAgICBUcnVlCiAgICA+Pj4gSVNfTElORV9KVU5LKCdoZWxsb1xuJykKICAgIEZhbHNlCiAgICAiIiIKCiAgICByZXR1cm4gcGF0KGxpbmUpIGlzIG5vdCBOb25lCgpkZWYgSVNfQ0hBUkFDVEVSX0pVTksoY2gsIHdzPSIgXHQiKToKICAgIHIiIiIKICAgIFJldHVybiAxIGZvciBpZ25vcmFibGUgY2hhcmFjdGVyOiBpZmYgYGNoYCBpcyBhIHNwYWNlIG9yIHRhYi4KCiAgICBFeGFtcGxlczoKCiAgICA+Pj4gSVNfQ0hBUkFDVEVSX0pVTksoJyAnKQogICAgVHJ1ZQogICAgPj4+IElTX0NIQVJBQ1RFUl9KVU5LKCdcdCcpCiAgICBUcnVlCiAgICA+Pj4gSVNfQ0hBUkFDVEVSX0pVTksoJ1xuJykKICAgIEZhbHNlCiAgICA+Pj4gSVNfQ0hBUkFDVEVSX0pVTksoJ3gnKQogICAgRmFsc2UKICAgICIiIgoKICAgIHJldHVybiBjaCBpbiB3cwoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgIFVuaWZpZWQgRGlmZgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZiBfZm9ybWF0X3JhbmdlX3VuaWZpZWQoc3RhcnQsIHN0b3ApOgogICAgJ0NvbnZlcnQgcmFuZ2UgdG8gdGhlICJlZCIgZm9ybWF0JwogICAgIyBQZXIgdGhlIGRpZmYgc3BlYyBhdCBodHRwOi8vd3d3LnVuaXgub3JnL3NpbmdsZV91bml4X3NwZWNpZmljYXRpb24vCiAgICBiZWdpbm5pbmcgPSBzdGFydCArIDEgICAgICMgbGluZXMgc3RhcnQgbnVtYmVyaW5nIHdpdGggb25lCiAgICBsZW5ndGggPSBzdG9wIC0gc3RhcnQKICAgIGlmIGxlbmd0aCA9PSAxOgogICAgICAgIHJldHVybiAne30nLmZvcm1hdChiZWdpbm5pbmcpCiAgICBpZiBub3QgbGVuZ3RoOgogICAgICAgIGJlZ2lubmluZyAtPSAxICAgICAgICAjIGVtcHR5IHJhbmdlcyBiZWdpbiBhdCBsaW5lIGp1c3QgYmVmb3JlIHRoZSByYW5nZQogICAgcmV0dXJuICd7fSx7fScuZm9ybWF0KGJlZ2lubmluZywgbGVuZ3RoKQoKZGVmIHVuaWZpZWRfZGlmZihhLCBiLCBmcm9tZmlsZT0nJywgdG9maWxlPScnLCBmcm9tZmlsZWRhdGU9JycsCiAgICAgICAgICAgICAgICAgdG9maWxlZGF0ZT0nJywgbj0zLCBsaW5ldGVybT0nXG4nKToKICAgIHIiIiIKICAgIENvbXBhcmUgdHdvIHNlcXVlbmNlcyBvZiBsaW5lczsgZ2VuZXJhdGUgdGhlIGRlbHRhIGFzIGEgdW5pZmllZCBkaWZmLgoKICAgIFVuaWZpZWQgZGlmZnMgYXJlIGEgY29tcGFjdCB3YXkgb2Ygc2hvd2luZyBsaW5lIGNoYW5nZXMgYW5kIGEgZmV3CiAgICBsaW5lcyBvZiBjb250ZXh0LiAgVGhlIG51bWJlciBvZiBjb250ZXh0IGxpbmVzIGlzIHNldCBieSAnbicgd2hpY2gKICAgIGRlZmF1bHRzIHRvIHRocmVlLgoKICAgIEJ5IGRlZmF1bHQsIHRoZSBkaWZmIGNvbnRyb2wgbGluZXMgKHRob3NlIHdpdGggLS0tLCArKyssIG9yIEBAKSBhcmUKICAgIGNyZWF0ZWQgd2l0aCBhIHRyYWlsaW5nIG5ld2xpbmUuICBUaGlzIGlzIGhlbHBmdWwgc28gdGhhdCBpbnB1dHMKICAgIGNyZWF0ZWQgZnJvbSBmaWxlLnJlYWRsaW5lcygpIHJlc3VsdCBpbiBkaWZmcyB0aGF0IGFyZSBzdWl0YWJsZSBmb3IKICAgIGZpbGUud3JpdGVsaW5lcygpIHNpbmNlIGJvdGggdGhlIGlucHV0cyBhbmQgb3V0cHV0cyBoYXZlIHRyYWlsaW5nCiAgICBuZXdsaW5lcy4KCiAgICBGb3IgaW5wdXRzIHRoYXQgZG8gbm90IGhhdmUgdHJhaWxpbmcgbmV3bGluZXMsIHNldCB0aGUgbGluZXRlcm0KICAgIGFyZ3VtZW50IHRvICIiIHNvIHRoYXQgdGhlIG91dHB1dCB3aWxsIGJlIHVuaWZvcm1seSBuZXdsaW5lIGZyZWUuCgogICAgVGhlIHVuaWRpZmYgZm9ybWF0IG5vcm1hbGx5IGhhcyBhIGhlYWRlciBmb3IgZmlsZW5hbWVzIGFuZCBtb2RpZmljYXRpb24KICAgIHRpbWVzLiAgQW55IG9yIGFsbCBvZiB0aGVzZSBtYXkgYmUgc3BlY2lmaWVkIHVzaW5nIHN0cmluZ3MgZm9yCiAgICAnZnJvbWZpbGUnLCAndG9maWxlJywgJ2Zyb21maWxlZGF0ZScsIGFuZCAndG9maWxlZGF0ZScuCiAgICBUaGUgbW9kaWZpY2F0aW9uIHRpbWVzIGFyZSBub3JtYWxseSBleHByZXNzZWQgaW4gdGhlIElTTyA4NjAxIGZvcm1hdC4KCiAgICBFeGFtcGxlOgoKICAgID4+PiBmb3IgbGluZSBpbiB1bmlmaWVkX2RpZmYoJ29uZSB0d28gdGhyZWUgZm91cicuc3BsaXQoKSwKICAgIC4uLiAgICAgICAgICAgICAnemVybyBvbmUgdHJlZSBmb3VyJy5zcGxpdCgpLCAnT3JpZ2luYWwnLCAnQ3VycmVudCcsCiAgICAuLi4gICAgICAgICAgICAgJzIwMDUtMDEtMjYgMjM6MzA6NTAnLCAnMjAxMC0wNC0wMiAxMDoyMDo1MicsCiAgICAuLi4gICAgICAgICAgICAgbGluZXRlcm09JycpOgogICAgLi4uICAgICBwcmludChsaW5lKSAgICAgICAgICAgICAgICAgIyBkb2N0ZXN0OiArTk9STUFMSVpFX1dISVRFU1BBQ0UKICAgIC0tLSBPcmlnaW5hbCAgICAgICAgMjAwNS0wMS0yNiAyMzozMDo1MAogICAgKysrIEN1cnJlbnQgICAgICAgICAyMDEwLTA0LTAyIDEwOjIwOjUyCiAgICBAQCAtMSw0ICsxLDQgQEAKICAgICt6ZXJvCiAgICAgb25lCiAgICAtdHdvCiAgICAtdGhyZWUKICAgICt0cmVlCiAgICAgZm91cgogICAgIiIiCgogICAgc3RhcnRlZCA9IEZhbHNlCiAgICBmb3IgZ3JvdXAgaW4gU2VxdWVuY2VNYXRjaGVyKE5vbmUsYSxiKS5nZXRfZ3JvdXBlZF9vcGNvZGVzKG4pOgogICAgICAgIGlmIG5vdCBzdGFydGVkOgogICAgICAgICAgICBzdGFydGVkID0gVHJ1ZQogICAgICAgICAgICBmcm9tZGF0ZSA9ICdcdHt9Jy5mb3JtYXQoZnJvbWZpbGVkYXRlKSBpZiBmcm9tZmlsZWRhdGUgZWxzZSAnJwogICAgICAgICAgICB0b2RhdGUgPSAnXHR7fScuZm9ybWF0KHRvZmlsZWRhdGUpIGlmIHRvZmlsZWRhdGUgZWxzZSAnJwogICAgICAgICAgICB5aWVsZCAnLS0tIHt9e317fScuZm9ybWF0KGZyb21maWxlLCBmcm9tZGF0ZSwgbGluZXRlcm0pCiAgICAgICAgICAgIHlpZWxkICcrKysge317fXt9Jy5mb3JtYXQodG9maWxlLCB0b2RhdGUsIGxpbmV0ZXJtKQoKICAgICAgICBmaXJzdCwgbGFzdCA9IGdyb3VwWzBdLCBncm91cFstMV0KICAgICAgICBmaWxlMV9yYW5nZSA9IF9mb3JtYXRfcmFuZ2VfdW5pZmllZChmaXJzdFsxXSwgbGFzdFsyXSkKICAgICAgICBmaWxlMl9yYW5nZSA9IF9mb3JtYXRfcmFuZ2VfdW5pZmllZChmaXJzdFszXSwgbGFzdFs0XSkKICAgICAgICB5aWVsZCAnQEAgLXt9ICt7fSBAQHt9Jy5mb3JtYXQoZmlsZTFfcmFuZ2UsIGZpbGUyX3JhbmdlLCBsaW5ldGVybSkKCiAgICAgICAgZm9yIHRhZywgaTEsIGkyLCBqMSwgajIgaW4gZ3JvdXA6CiAgICAgICAgICAgIGlmIHRhZyA9PSAnZXF1YWwnOgogICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gYVtpMTppMl06CiAgICAgICAgICAgICAgICAgICAgeWllbGQgJyAnICsgbGluZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgaWYgdGFnIGluIHsncmVwbGFjZScsICdkZWxldGUnfToKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGFbaTE6aTJdOgogICAgICAgICAgICAgICAgICAgIHlpZWxkICctJyArIGxpbmUKICAgICAgICAgICAgaWYgdGFnIGluIHsncmVwbGFjZScsICdpbnNlcnQnfToKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGJbajE6ajJdOgogICAgICAgICAgICAgICAgICAgIHlpZWxkICcrJyArIGxpbmUKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjICBDb250ZXh0IERpZmYKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWYgX2Zvcm1hdF9yYW5nZV9jb250ZXh0KHN0YXJ0LCBzdG9wKToKICAgICdDb252ZXJ0IHJhbmdlIHRvIHRoZSAiZWQiIGZvcm1hdCcKICAgICMgUGVyIHRoZSBkaWZmIHNwZWMgYXQgaHR0cDovL3d3dy51bml4Lm9yZy9zaW5nbGVfdW5peF9zcGVjaWZpY2F0aW9uLwogICAgYmVnaW5uaW5nID0gc3RhcnQgKyAxICAgICAjIGxpbmVzIHN0YXJ0IG51bWJlcmluZyB3aXRoIG9uZQogICAgbGVuZ3RoID0gc3RvcCAtIHN0YXJ0CiAgICBpZiBub3QgbGVuZ3RoOgogICAgICAgIGJlZ2lubmluZyAtPSAxICAgICAgICAjIGVtcHR5IHJhbmdlcyBiZWdpbiBhdCBsaW5lIGp1c3QgYmVmb3JlIHRoZSByYW5nZQogICAgaWYgbGVuZ3RoIDw9IDE6CiAgICAgICAgcmV0dXJuICd7fScuZm9ybWF0KGJlZ2lubmluZykKICAgIHJldHVybiAne30se30nLmZvcm1hdChiZWdpbm5pbmcsIGJlZ2lubmluZyArIGxlbmd0aCAtIDEpCgojIFNlZSBodHRwOi8vd3d3LnVuaXgub3JnL3NpbmdsZV91bml4X3NwZWNpZmljYXRpb24vCmRlZiBjb250ZXh0X2RpZmYoYSwgYiwgZnJvbWZpbGU9JycsIHRvZmlsZT0nJywKICAgICAgICAgICAgICAgICBmcm9tZmlsZWRhdGU9JycsIHRvZmlsZWRhdGU9JycsIG49MywgbGluZXRlcm09J1xuJyk6CiAgICByIiIiCiAgICBDb21wYXJlIHR3byBzZXF1ZW5jZXMgb2YgbGluZXM7IGdlbmVyYXRlIHRoZSBkZWx0YSBhcyBhIGNvbnRleHQgZGlmZi4KCiAgICBDb250ZXh0IGRpZmZzIGFyZSBhIGNvbXBhY3Qgd2F5IG9mIHNob3dpbmcgbGluZSBjaGFuZ2VzIGFuZCBhIGZldwogICAgbGluZXMgb2YgY29udGV4dC4gIFRoZSBudW1iZXIgb2YgY29udGV4dCBsaW5lcyBpcyBzZXQgYnkgJ24nIHdoaWNoCiAgICBkZWZhdWx0cyB0byB0aHJlZS4KCiAgICBCeSBkZWZhdWx0LCB0aGUgZGlmZiBjb250cm9sIGxpbmVzICh0aG9zZSB3aXRoICoqKiBvciAtLS0pIGFyZQogICAgY3JlYXRlZCB3aXRoIGEgdHJhaWxpbmcgbmV3bGluZS4gIFRoaXMgaXMgaGVscGZ1bCBzbyB0aGF0IGlucHV0cwogICAgY3JlYXRlZCBmcm9tIGZpbGUucmVhZGxpbmVzKCkgcmVzdWx0IGluIGRpZmZzIHRoYXQgYXJlIHN1aXRhYmxlIGZvcgogICAgZmlsZS53cml0ZWxpbmVzKCkgc2luY2UgYm90aCB0aGUgaW5wdXRzIGFuZCBvdXRwdXRzIGhhdmUgdHJhaWxpbmcKICAgIG5ld2xpbmVzLgoKICAgIEZvciBpbnB1dHMgdGhhdCBkbyBub3QgaGF2ZSB0cmFpbGluZyBuZXdsaW5lcywgc2V0IHRoZSBsaW5ldGVybQogICAgYXJndW1lbnQgdG8gIiIgc28gdGhhdCB0aGUgb3V0cHV0IHdpbGwgYmUgdW5pZm9ybWx5IG5ld2xpbmUgZnJlZS4KCiAgICBUaGUgY29udGV4dCBkaWZmIGZvcm1hdCBub3JtYWxseSBoYXMgYSBoZWFkZXIgZm9yIGZpbGVuYW1lcyBhbmQKICAgIG1vZGlmaWNhdGlvbiB0aW1lcy4gIEFueSBvciBhbGwgb2YgdGhlc2UgbWF5IGJlIHNwZWNpZmllZCB1c2luZwogICAgc3RyaW5ncyBmb3IgJ2Zyb21maWxlJywgJ3RvZmlsZScsICdmcm9tZmlsZWRhdGUnLCBhbmQgJ3RvZmlsZWRhdGUnLgogICAgVGhlIG1vZGlmaWNhdGlvbiB0aW1lcyBhcmUgbm9ybWFsbHkgZXhwcmVzc2VkIGluIHRoZSBJU08gODYwMSBmb3JtYXQuCiAgICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgc3RyaW5ncyBkZWZhdWx0IHRvIGJsYW5rcy4KCiAgICBFeGFtcGxlOgoKICAgID4+PiBwcmludCgnJy5qb2luKGNvbnRleHRfZGlmZignb25lXG50d29cbnRocmVlXG5mb3VyXG4nLnNwbGl0bGluZXMoVHJ1ZSksCiAgICAuLi4gICAgICAgJ3plcm9cbm9uZVxudHJlZVxuZm91clxuJy5zcGxpdGxpbmVzKFRydWUpLCAnT3JpZ2luYWwnLCAnQ3VycmVudCcpKSwKICAgIC4uLiAgICAgICBlbmQ9IiIpCiAgICAqKiogT3JpZ2luYWwKICAgIC0tLSBDdXJyZW50CiAgICAqKioqKioqKioqKioqKioKICAgICoqKiAxLDQgKioqKgogICAgICBvbmUKICAgICEgdHdvCiAgICAhIHRocmVlCiAgICAgIGZvdXIKICAgIC0tLSAxLDQgLS0tLQogICAgKyB6ZXJvCiAgICAgIG9uZQogICAgISB0cmVlCiAgICAgIGZvdXIKICAgICIiIgoKICAgIHByZWZpeCA9IGRpY3QoaW5zZXJ0PScrICcsIGRlbGV0ZT0nLSAnLCByZXBsYWNlPSchICcsIGVxdWFsPScgICcpCiAgICBzdGFydGVkID0gRmFsc2UKICAgIGZvciBncm91cCBpbiBTZXF1ZW5jZU1hdGNoZXIoTm9uZSxhLGIpLmdldF9ncm91cGVkX29wY29kZXMobik6CiAgICAgICAgaWYgbm90IHN0YXJ0ZWQ6CiAgICAgICAgICAgIHN0YXJ0ZWQgPSBUcnVlCiAgICAgICAgICAgIGZyb21kYXRlID0gJ1x0e30nLmZvcm1hdChmcm9tZmlsZWRhdGUpIGlmIGZyb21maWxlZGF0ZSBlbHNlICcnCiAgICAgICAgICAgIHRvZGF0ZSA9ICdcdHt9Jy5mb3JtYXQodG9maWxlZGF0ZSkgaWYgdG9maWxlZGF0ZSBlbHNlICcnCiAgICAgICAgICAgIHlpZWxkICcqKioge317fXt9Jy5mb3JtYXQoZnJvbWZpbGUsIGZyb21kYXRlLCBsaW5ldGVybSkKICAgICAgICAgICAgeWllbGQgJy0tLSB7fXt9e30nLmZvcm1hdCh0b2ZpbGUsIHRvZGF0ZSwgbGluZXRlcm0pCgogICAgICAgIGZpcnN0LCBsYXN0ID0gZ3JvdXBbMF0sIGdyb3VwWy0xXQogICAgICAgIHlpZWxkICcqKioqKioqKioqKioqKionICsgbGluZXRlcm0KCiAgICAgICAgZmlsZTFfcmFuZ2UgPSBfZm9ybWF0X3JhbmdlX2NvbnRleHQoZmlyc3RbMV0sIGxhc3RbMl0pCiAgICAgICAgeWllbGQgJyoqKiB7fSAqKioqe30nLmZvcm1hdChmaWxlMV9yYW5nZSwgbGluZXRlcm0pCgogICAgICAgIGlmIGFueSh0YWcgaW4geydyZXBsYWNlJywgJ2RlbGV0ZSd9IGZvciB0YWcsIF8sIF8sIF8sIF8gaW4gZ3JvdXApOgogICAgICAgICAgICBmb3IgdGFnLCBpMSwgaTIsIF8sIF8gaW4gZ3JvdXA6CiAgICAgICAgICAgICAgICBpZiB0YWcgIT0gJ2luc2VydCc6CiAgICAgICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gYVtpMTppMl06CiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHByZWZpeFt0YWddICsgbGluZQoKICAgICAgICBmaWxlMl9yYW5nZSA9IF9mb3JtYXRfcmFuZ2VfY29udGV4dChmaXJzdFszXSwgbGFzdFs0XSkKICAgICAgICB5aWVsZCAnLS0tIHt9IC0tLS17fScuZm9ybWF0KGZpbGUyX3JhbmdlLCBsaW5ldGVybSkKCiAgICAgICAgaWYgYW55KHRhZyBpbiB7J3JlcGxhY2UnLCAnaW5zZXJ0J30gZm9yIHRhZywgXywgXywgXywgXyBpbiBncm91cCk6CiAgICAgICAgICAgIGZvciB0YWcsIF8sIF8sIGoxLCBqMiBpbiBncm91cDoKICAgICAgICAgICAgICAgIGlmIHRhZyAhPSAnZGVsZXRlJzoKICAgICAgICAgICAgICAgICAgICBmb3IgbGluZSBpbiBiW2oxOmoyXToKICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcHJlZml4W3RhZ10gKyBsaW5lCgpkZWYgbmRpZmYoYSwgYiwgbGluZWp1bms9Tm9uZSwgY2hhcmp1bms9SVNfQ0hBUkFDVEVSX0pVTkspOgogICAgciIiIgogICAgQ29tcGFyZSBgYWAgYW5kIGBiYCAobGlzdHMgb2Ygc3RyaW5ncyk7IHJldHVybiBhIGBEaWZmZXJgLXN0eWxlIGRlbHRhLgoKICAgIE9wdGlvbmFsIGtleXdvcmQgcGFyYW1ldGVycyBgbGluZWp1bmtgIGFuZCBgY2hhcmp1bmtgIGFyZSBmb3IgZmlsdGVyCiAgICBmdW5jdGlvbnMgKG9yIE5vbmUpOgoKICAgIC0gbGluZWp1bms6IEEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYWNjZXB0IGEgc2luZ2xlIHN0cmluZyBhcmd1bWVudCwgYW5kCiAgICAgIHJldHVybiB0cnVlIGlmZiB0aGUgc3RyaW5nIGlzIGp1bmsuICBUaGUgZGVmYXVsdCBpcyBOb25lLCBhbmQgaXMKICAgICAgcmVjb21tZW5kZWQ7IGFzIG9mIFB5dGhvbiAyLjMsIGFuIGFkYXB0aXZlIG5vdGlvbiBvZiAibm9pc2UiIGxpbmVzIGlzCiAgICAgIHVzZWQgdGhhdCBkb2VzIGEgZ29vZCBqb2Igb24gaXRzIG93bi4KCiAgICAtIGNoYXJqdW5rOiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGFjY2VwdCBhIHN0cmluZyBvZiBsZW5ndGggMS4gVGhlCiAgICAgIGRlZmF1bHQgaXMgbW9kdWxlLWxldmVsIGZ1bmN0aW9uIElTX0NIQVJBQ1RFUl9KVU5LLCB3aGljaCBmaWx0ZXJzIG91dAogICAgICB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgKGEgYmxhbmsgb3IgdGFiOyBub3RlOiBiYWQgaWRlYSB0byBpbmNsdWRlIG5ld2xpbmUKICAgICAgaW4gdGhpcyEpLgoKICAgIFRvb2xzL3NjcmlwdHMvbmRpZmYucHkgaXMgYSBjb21tYW5kLWxpbmUgZnJvbnQtZW5kIHRvIHRoaXMgZnVuY3Rpb24uCgogICAgRXhhbXBsZToKCiAgICA+Pj4gZGlmZiA9IG5kaWZmKCdvbmVcbnR3b1xudGhyZWVcbicuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKSwKICAgIC4uLiAgICAgICAgICAgICAgJ29yZVxudHJlZVxuZW11XG4nLnNwbGl0bGluZXMoa2VlcGVuZHM9VHJ1ZSkpCiAgICA+Pj4gcHJpbnQoJycuam9pbihkaWZmKSwgZW5kPSIiKQogICAgLSBvbmUKICAgID8gIF4KICAgICsgb3JlCiAgICA/ICBeCiAgICAtIHR3bwogICAgLSB0aHJlZQogICAgPyAgLQogICAgKyB0cmVlCiAgICArIGVtdQogICAgIiIiCiAgICByZXR1cm4gRGlmZmVyKGxpbmVqdW5rLCBjaGFyanVuaykuY29tcGFyZShhLCBiKQoKZGVmIF9tZGlmZihmcm9tbGluZXMsIHRvbGluZXMsIGNvbnRleHQ9Tm9uZSwgbGluZWp1bms9Tm9uZSwKICAgICAgICAgICBjaGFyanVuaz1JU19DSEFSQUNURVJfSlVOSyk6CiAgICByIiIiUmV0dXJucyBnZW5lcmF0b3IgeWllbGRpbmcgbWFya2VkIHVwIGZyb20vdG8gc2lkZSBieSBzaWRlIGRpZmZlcmVuY2VzLgoKICAgIEFyZ3VtZW50czoKICAgIGZyb21saW5lcyAtLSBsaXN0IG9mIHRleHQgbGluZXMgdG8gY29tcGFyZWQgdG8gdG9saW5lcwogICAgdG9saW5lcyAtLSBsaXN0IG9mIHRleHQgbGluZXMgdG8gYmUgY29tcGFyZWQgdG8gZnJvbWxpbmVzCiAgICBjb250ZXh0IC0tIG51bWJlciBvZiBjb250ZXh0IGxpbmVzIHRvIGRpc3BsYXkgb24gZWFjaCBzaWRlIG9mIGRpZmZlcmVuY2UsCiAgICAgICAgICAgICAgIGlmIE5vbmUsIGFsbCBmcm9tL3RvIHRleHQgbGluZXMgd2lsbCBiZSBnZW5lcmF0ZWQuCiAgICBsaW5lanVuayAtLSBwYXNzZWQgb24gdG8gbmRpZmYgKHNlZSBuZGlmZiBkb2N1bWVudGF0aW9uKQogICAgY2hhcmp1bmsgLS0gcGFzc2VkIG9uIHRvIG5kaWZmIChzZWUgbmRpZmYgZG9jdW1lbnRhdGlvbikKCiAgICBUaGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gaW50ZXJhdG9yIHdoaWNoIHJldHVybnMgYSB0dXBsZToKICAgIChmcm9tIGxpbmUgdHVwbGUsIHRvIGxpbmUgdHVwbGUsIGJvb2xlYW4gZmxhZykKCiAgICBmcm9tL3RvIGxpbmUgdHVwbGUgLS0gKGxpbmUgbnVtLCBsaW5lIHRleHQpCiAgICAgICAgbGluZSBudW0gLS0gaW50ZWdlciBvciBOb25lICh0byBpbmRpY2F0ZSBhIGNvbnRleHQgc2VwYXJhdGlvbikKICAgICAgICBsaW5lIHRleHQgLS0gb3JpZ2luYWwgbGluZSB0ZXh0IHdpdGggZm9sbG93aW5nIG1hcmtlcnMgaW5zZXJ0ZWQ6CiAgICAgICAgICAgICdcMCsnIC0tIG1hcmtzIHN0YXJ0IG9mIGFkZGVkIHRleHQKICAgICAgICAgICAgJ1wwLScgLS0gbWFya3Mgc3RhcnQgb2YgZGVsZXRlZCB0ZXh0CiAgICAgICAgICAgICdcMF4nIC0tIG1hcmtzIHN0YXJ0IG9mIGNoYW5nZWQgdGV4dAogICAgICAgICAgICAnXDEnIC0tIG1hcmtzIGVuZCBvZiBhZGRlZC9kZWxldGVkL2NoYW5nZWQgdGV4dAoKICAgIGJvb2xlYW4gZmxhZyAtLSBOb25lIGluZGljYXRlcyBjb250ZXh0IHNlcGFyYXRpb24sIFRydWUgaW5kaWNhdGVzCiAgICAgICAgZWl0aGVyICJmcm9tIiBvciAidG8iIGxpbmUgY29udGFpbnMgYSBjaGFuZ2UsIG90aGVyd2lzZSBGYWxzZS4KCiAgICBUaGlzIGZ1bmN0aW9uL2l0ZXJhdG9yIHdhcyBvcmlnaW5hbGx5IGRldmVsb3BlZCB0byBnZW5lcmF0ZSBzaWRlIGJ5IHNpZGUKICAgIGZpbGUgZGlmZmVyZW5jZSBmb3IgbWFraW5nIEhUTUwgcGFnZXMgKHNlZSBIdG1sRGlmZiBjbGFzcyBmb3IgZXhhbXBsZQogICAgdXNhZ2UpLgoKICAgIE5vdGUsIHRoaXMgZnVuY3Rpb24gdXRpbGl6ZXMgdGhlIG5kaWZmIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBzaWRlIGJ5CiAgICBzaWRlIGRpZmZlcmVuY2UgbWFya3VwLiAgT3B0aW9uYWwgbmRpZmYgYXJndW1lbnRzIG1heSBiZSBwYXNzZWQgdG8gdGhpcwogICAgZnVuY3Rpb24gYW5kIHRoZXkgaW4gdHVybiB3aWxsIGJlIHBhc3NlZCB0byBuZGlmZi4KICAgICIiIgogICAgaW1wb3J0IHJlCgogICAgIyByZWd1bGFyIGV4cHJlc3Npb24gZm9yIGZpbmRpbmcgaW50cmFsaW5lIGNoYW5nZSBpbmRpY2VzCiAgICBjaGFuZ2VfcmUgPSByZS5jb21waWxlKCcoXCsrfFwtK3xcXispJykKCiAgICAjIGNyZWF0ZSB0aGUgZGlmZmVyZW5jZSBpdGVyYXRvciB0byBnZW5lcmF0ZSB0aGUgZGlmZmVyZW5jZXMKICAgIGRpZmZfbGluZXNfaXRlcmF0b3IgPSBuZGlmZihmcm9tbGluZXMsdG9saW5lcyxsaW5lanVuayxjaGFyanVuaykKCiAgICBkZWYgX21ha2VfbGluZShsaW5lcywgZm9ybWF0X2tleSwgc2lkZSwgbnVtX2xpbmVzPVswLDBdKToKICAgICAgICAiIiJSZXR1cm5zIGxpbmUgb2YgdGV4dCB3aXRoIHVzZXIncyBjaGFuZ2UgbWFya3VwIGFuZCBsaW5lIGZvcm1hdHRpbmcuCgogICAgICAgIGxpbmVzIC0tIGxpc3Qgb2YgbGluZXMgZnJvbSB0aGUgbmRpZmYgZ2VuZXJhdG9yIHRvIHByb2R1Y2UgYSBsaW5lIG9mCiAgICAgICAgICAgICAgICAgdGV4dCBmcm9tLiAgV2hlbiBwcm9kdWNpbmcgdGhlIGxpbmUgb2YgdGV4dCB0byByZXR1cm4sIHRoZQogICAgICAgICAgICAgICAgIGxpbmVzIHVzZWQgYXJlIHJlbW92ZWQgZnJvbSB0aGlzIGxpc3QuCiAgICAgICAgZm9ybWF0X2tleSAtLSAnKycgcmV0dXJuIGZpcnN0IGxpbmUgaW4gbGlzdCB3aXRoICJhZGQiIG1hcmt1cCBhcm91bmQKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZW50aXJlIGxpbmUuCiAgICAgICAgICAgICAgICAgICAgICAnLScgcmV0dXJuIGZpcnN0IGxpbmUgaW4gbGlzdCB3aXRoICJkZWxldGUiIG1hcmt1cCBhcm91bmQKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZW50aXJlIGxpbmUuCiAgICAgICAgICAgICAgICAgICAgICAnPycgcmV0dXJuIGZpcnN0IGxpbmUgaW4gbGlzdCB3aXRoIGFkZC9kZWxldGUvY2hhbmdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW50cmFsaW5lIG1hcmt1cCAoaW5kaWNlcyBvYnRhaW5lZCBmcm9tIHNlY29uZCBsaW5lKQogICAgICAgICAgICAgICAgICAgICAgTm9uZSByZXR1cm4gZmlyc3QgbGluZSBpbiBsaXN0IHdpdGggbm8gbWFya3VwCiAgICAgICAgc2lkZSAtLSBpbmRpY2UgaW50byB0aGUgbnVtX2xpbmVzIGxpc3QgKDA9ZnJvbSwxPXRvKQogICAgICAgIG51bV9saW5lcyAtLSBmcm9tL3RvIGN1cnJlbnQgbGluZSBudW1iZXIuICBUaGlzIGlzIE5PVCBpbnRlbmRlZCB0byBiZSBhCiAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCBwYXJhbWV0ZXIuICBJdCBpcyBwcmVzZW50IGFzIGEga2V5d29yZCBhcmd1bWVudCB0bwogICAgICAgICAgICAgICAgICAgICBtYWludGFpbiBtZW1vcnkgb2YgdGhlIGN1cnJlbnQgbGluZSBudW1iZXJzIGJldHdlZW4gY2FsbHMKICAgICAgICAgICAgICAgICAgICAgb2YgdGhpcyBmdW5jdGlvbi4KCiAgICAgICAgTm90ZSwgdGhpcyBmdW5jdGlvbiBpcyBwdXJwb3NlZnVsbHkgbm90IGRlZmluZWQgYXQgdGhlIG1vZHVsZSBzY29wZSBzbwogICAgICAgIHRoYXQgZGF0YSBpdCBuZWVkcyBmcm9tIGl0cyBwYXJlbnQgZnVuY3Rpb24gKHdpdGhpbiB3aG9zZSBjb250ZXh0IGl0CiAgICAgICAgaXMgZGVmaW5lZCkgZG9lcyBub3QgbmVlZCB0byBiZSBvZiBtb2R1bGUgc2NvcGUuCiAgICAgICAgIiIiCiAgICAgICAgbnVtX2xpbmVzW3NpZGVdICs9IDEKICAgICAgICAjIEhhbmRsZSBjYXNlIHdoZXJlIG5vIHVzZXIgbWFya3VwIGlzIHRvIGJlIGFkZGVkLCBqdXN0IHJldHVybiBsaW5lIG9mCiAgICAgICAgIyB0ZXh0IHdpdGggdXNlcidzIGxpbmUgZm9ybWF0IHRvIGFsbG93IGZvciB1c2FnZSBvZiB0aGUgbGluZSBudW1iZXIuCiAgICAgICAgaWYgZm9ybWF0X2tleSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKG51bV9saW5lc1tzaWRlXSxsaW5lcy5wb3AoMClbMjpdKQogICAgICAgICMgSGFuZGxlIGNhc2Ugb2YgaW50cmFsaW5lIGNoYW5nZXMKICAgICAgICBpZiBmb3JtYXRfa2V5ID09ICc/JzoKICAgICAgICAgICAgdGV4dCwgbWFya2VycyA9IGxpbmVzLnBvcCgwKSwgbGluZXMucG9wKDApCiAgICAgICAgICAgICMgZmluZCBpbnRyYWxpbmUgY2hhbmdlcyAoc3RvcmUgY2hhbmdlIHR5cGUgYW5kIGluZGljZXMgaW4gdHVwbGVzKQogICAgICAgICAgICBzdWJfaW5mbyA9IFtdCiAgICAgICAgICAgIGRlZiByZWNvcmRfc3ViX2luZm8obWF0Y2hfb2JqZWN0LHN1Yl9pbmZvPXN1Yl9pbmZvKToKICAgICAgICAgICAgICAgIHN1Yl9pbmZvLmFwcGVuZChbbWF0Y2hfb2JqZWN0Lmdyb3VwKDEpWzBdLG1hdGNoX29iamVjdC5zcGFuKCldKQogICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoX29iamVjdC5ncm91cCgxKQogICAgICAgICAgICBjaGFuZ2VfcmUuc3ViKHJlY29yZF9zdWJfaW5mbyxtYXJrZXJzKQogICAgICAgICAgICAjIHByb2Nlc3MgZWFjaCB0dXBsZSBpbnNlcnRpbmcgb3VyIHNwZWNpYWwgbWFya3MgdGhhdCB3b24ndCBiZQogICAgICAgICAgICAjIG5vdGljZWQgYnkgYW4geG1sL2h0bWwgZXNjYXBlci4KICAgICAgICAgICAgZm9yIGtleSwoYmVnaW4sZW5kKSBpbiBzdWJfaW5mb1s6Oi0xXToKICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0WzA6YmVnaW5dKydcMCcra2V5K3RleHRbYmVnaW46ZW5kXSsnXDEnK3RleHRbZW5kOl0KICAgICAgICAgICAgdGV4dCA9IHRleHRbMjpdCiAgICAgICAgIyBIYW5kbGUgY2FzZSBvZiBhZGQvZGVsZXRlIGVudGlyZSBsaW5lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdGV4dCA9IGxpbmVzLnBvcCgwKVsyOl0KICAgICAgICAgICAgIyBpZiBsaW5lIG9mIHRleHQgaXMganVzdCBhIG5ld2xpbmUsIGluc2VydCBhIHNwYWNlIHNvIHRoZXJlIGlzCiAgICAgICAgICAgICMgc29tZXRoaW5nIGZvciB0aGUgdXNlciB0byBoaWdobGlnaHQgYW5kIHNlZS4KICAgICAgICAgICAgaWYgbm90IHRleHQ6CiAgICAgICAgICAgICAgICB0ZXh0ID0gJyAnCiAgICAgICAgICAgICMgaW5zZXJ0IG1hcmtzIHRoYXQgd29uJ3QgYmUgbm90aWNlZCBieSBhbiB4bWwvaHRtbCBlc2NhcGVyLgogICAgICAgICAgICB0ZXh0ID0gJ1wwJyArIGZvcm1hdF9rZXkgKyB0ZXh0ICsgJ1wxJwogICAgICAgICMgUmV0dXJuIGxpbmUgb2YgdGV4dCwgZmlyc3QgYWxsb3cgdXNlcidzIGxpbmUgZm9ybWF0dGVyIHRvIGRvIGl0cwogICAgICAgICMgdGhpbmcgKHN1Y2ggYXMgYWRkaW5nIHRoZSBsaW5lIG51bWJlcikgdGhlbiByZXBsYWNlIHRoZSBzcGVjaWFsCiAgICAgICAgIyBtYXJrcyB3aXRoIHdoYXQgdGhlIHVzZXIncyBjaGFuZ2UgbWFya3VwLgogICAgICAgIHJldHVybiAobnVtX2xpbmVzW3NpZGVdLHRleHQpCgogICAgZGVmIF9saW5lX2l0ZXJhdG9yKCk6CiAgICAgICAgIiIiWWllbGRzIGZyb20vdG8gbGluZXMgb2YgdGV4dCB3aXRoIGEgY2hhbmdlIGluZGljYXRpb24uCgogICAgICAgIFRoaXMgZnVuY3Rpb24gaXMgYW4gaXRlcmF0b3IuICBJdCBpdHNlbGYgcHVsbHMgbGluZXMgZnJvbSBhCiAgICAgICAgZGlmZmVyZW5jaW5nIGl0ZXJhdG9yLCBwcm9jZXNzZXMgdGhlbSBhbmQgeWllbGRzIHRoZW0uICBXaGVuIGl0IGNhbgogICAgICAgIGl0IHlpZWxkcyBib3RoIGEgImZyb20iIGFuZCBhICJ0byIgbGluZSwgb3RoZXJ3aXNlIGl0IHdpbGwgeWllbGQgb25lCiAgICAgICAgb3IgdGhlIG90aGVyLiAgSW4gYWRkaXRpb24gdG8geWllbGRpbmcgdGhlIGxpbmVzIG9mIGZyb20vdG8gdGV4dCwgYQogICAgICAgIGJvb2xlYW4gZmxhZyBpcyB5aWVsZGVkIHRvIGluZGljYXRlIGlmIHRoZSB0ZXh0IGxpbmUocykgaGF2ZQogICAgICAgIGRpZmZlcmVuY2VzIGluIHRoZW0uCgogICAgICAgIE5vdGUsIHRoaXMgZnVuY3Rpb24gaXMgcHVycG9zZWZ1bGx5IG5vdCBkZWZpbmVkIGF0IHRoZSBtb2R1bGUgc2NvcGUgc28KICAgICAgICB0aGF0IGRhdGEgaXQgbmVlZHMgZnJvbSBpdHMgcGFyZW50IGZ1bmN0aW9uICh3aXRoaW4gd2hvc2UgY29udGV4dCBpdAogICAgICAgIGlzIGRlZmluZWQpIGRvZXMgbm90IG5lZWQgdG8gYmUgb2YgbW9kdWxlIHNjb3BlLgogICAgICAgICIiIgogICAgICAgIGxpbmVzID0gW10KICAgICAgICBudW1fYmxhbmtzX3BlbmRpbmcsIG51bV9ibGFua3NfdG9feWllbGQgPSAwLCAwCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgIyBMb2FkIHVwIG5leHQgNCBsaW5lcyBzbyB3ZSBjYW4gbG9vayBhaGVhZCwgY3JlYXRlIHN0cmluZ3Mgd2hpY2gKICAgICAgICAgICAgIyBhcmUgYSBjb25jYXRlbmF0aW9uIG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgZWFjaCBvZiB0aGUgNCBsaW5lcwogICAgICAgICAgICAjIHNvIHdlIGNhbiBkbyBzb21lIHZlcnkgcmVhZGFibGUgY29tcGFyaXNvbnMuCiAgICAgICAgICAgIHdoaWxlIGxlbihsaW5lcykgPCA0OgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChuZXh0KGRpZmZfbGluZXNfaXRlcmF0b3IpKQogICAgICAgICAgICAgICAgZXhjZXB0IFN0b3BJdGVyYXRpb246CiAgICAgICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKCdYJykKICAgICAgICAgICAgcyA9ICcnLmpvaW4oW2xpbmVbMF0gZm9yIGxpbmUgaW4gbGluZXNdKQogICAgICAgICAgICBpZiBzLnN0YXJ0c3dpdGgoJ1gnKToKICAgICAgICAgICAgICAgICMgV2hlbiBubyBtb3JlIGxpbmVzLCBwdW1wIG91dCBhbnkgcmVtYWluaW5nIGJsYW5rIGxpbmVzIHNvIHRoZQogICAgICAgICAgICAgICAgIyBjb3JyZXNwb25kaW5nIGFkZC9kZWxldGUgbGluZXMgZ2V0IGEgbWF0Y2hpbmcgYmxhbmsgbGluZSBzbwogICAgICAgICAgICAgICAgIyBhbGwgbGluZSBwYWlycyBnZXQgeWllbGRlZCBhdCB0aGUgbmV4dCBsZXZlbC4KICAgICAgICAgICAgICAgIG51bV9ibGFua3NfdG9feWllbGQgPSBudW1fYmxhbmtzX3BlbmRpbmcKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJy0/Kz8nKToKICAgICAgICAgICAgICAgICMgc2ltcGxlIGludHJhbGluZSBjaGFuZ2UKICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2xpbmUobGluZXMsJz8nLDApLCBfbWFrZV9saW5lKGxpbmVzLCc/JywxKSwgVHJ1ZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJy0tKysnKToKICAgICAgICAgICAgICAgICMgaW4gZGVsZXRlIGJsb2NrLCBhZGQgYmxvY2sgY29taW5nOiB3ZSBkbyBOT1Qgd2FudCB0byBnZXQKICAgICAgICAgICAgICAgICMgY2F1Z2h0IHVwIG9uIGJsYW5rIGxpbmVzIHlldCwganVzdCBwcm9jZXNzIHRoZSBkZWxldGUgbGluZQogICAgICAgICAgICAgICAgbnVtX2JsYW5rc19wZW5kaW5nIC09IDEKICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2xpbmUobGluZXMsJy0nLDApLCBOb25lLCBUcnVlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHMuc3RhcnRzd2l0aCgoJy0tPysnLCAnLS0rJywgJy0gJykpOgogICAgICAgICAgICAgICAgIyBpbiBkZWxldGUgYmxvY2sgYW5kIHNlZSBhIGludHJhbGluZSBjaGFuZ2Ugb3IgdW5jaGFuZ2VkIGxpbmUKICAgICAgICAgICAgICAgICMgY29taW5nOiB5aWVsZCB0aGUgZGVsZXRlIGxpbmUgYW5kIHRoZW4gYmxhbmtzCiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsdG9fbGluZSA9IF9tYWtlX2xpbmUobGluZXMsJy0nLDApLCBOb25lCiAgICAgICAgICAgICAgICBudW1fYmxhbmtzX3RvX3lpZWxkLG51bV9ibGFua3NfcGVuZGluZyA9IG51bV9ibGFua3NfcGVuZGluZy0xLDAKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJy0rPycpOgogICAgICAgICAgICAgICAgIyBpbnRyYWxpbmUgY2hhbmdlCiAgICAgICAgICAgICAgICB5aWVsZCBfbWFrZV9saW5lKGxpbmVzLE5vbmUsMCksIF9tYWtlX2xpbmUobGluZXMsJz8nLDEpLCBUcnVlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHMuc3RhcnRzd2l0aCgnLT8rJyk6CiAgICAgICAgICAgICAgICAjIGludHJhbGluZSBjaGFuZ2UKICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2xpbmUobGluZXMsJz8nLDApLCBfbWFrZV9saW5lKGxpbmVzLE5vbmUsMSksIFRydWUKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsaWYgcy5zdGFydHN3aXRoKCctJyk6CiAgICAgICAgICAgICAgICAjIGRlbGV0ZSBGUk9NIGxpbmUKICAgICAgICAgICAgICAgIG51bV9ibGFua3NfcGVuZGluZyAtPSAxCiAgICAgICAgICAgICAgICB5aWVsZCBfbWFrZV9saW5lKGxpbmVzLCctJywwKSwgTm9uZSwgVHJ1ZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiBzLnN0YXJ0c3dpdGgoJystLScpOgogICAgICAgICAgICAgICAgIyBpbiBhZGQgYmxvY2ssIGRlbGV0ZSBibG9jayBjb21pbmc6IHdlIGRvIE5PVCB3YW50IHRvIGdldAogICAgICAgICAgICAgICAgIyBjYXVnaHQgdXAgb24gYmxhbmsgbGluZXMgeWV0LCBqdXN0IHByb2Nlc3MgdGhlIGFkZCBsaW5lCiAgICAgICAgICAgICAgICBudW1fYmxhbmtzX3BlbmRpbmcgKz0gMQogICAgICAgICAgICAgICAgeWllbGQgTm9uZSwgX21ha2VfbGluZShsaW5lcywnKycsMSksIFRydWUKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsaWYgcy5zdGFydHN3aXRoKCgnKyAnLCAnKy0nKSk6CiAgICAgICAgICAgICAgICAjIHdpbGwgYmUgbGVhdmluZyBhbiBhZGQgYmxvY2s6IHlpZWxkIGJsYW5rcyB0aGVuIGFkZCBsaW5lCiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUgPSBOb25lLCBfbWFrZV9saW5lKGxpbmVzLCcrJywxKQogICAgICAgICAgICAgICAgbnVtX2JsYW5rc190b195aWVsZCxudW1fYmxhbmtzX3BlbmRpbmcgPSBudW1fYmxhbmtzX3BlbmRpbmcrMSwwCiAgICAgICAgICAgIGVsaWYgcy5zdGFydHN3aXRoKCcrJyk6CiAgICAgICAgICAgICAgICAjIGluc2lkZSBhbiBhZGQgYmxvY2ssIHlpZWxkIHRoZSBhZGQgbGluZQogICAgICAgICAgICAgICAgbnVtX2JsYW5rc19wZW5kaW5nICs9IDEKICAgICAgICAgICAgICAgIHlpZWxkIE5vbmUsIF9tYWtlX2xpbmUobGluZXMsJysnLDEpLCBUcnVlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHMuc3RhcnRzd2l0aCgnICcpOgogICAgICAgICAgICAgICAgIyB1bmNoYW5nZWQgdGV4dCwgeWllbGQgaXQgdG8gYm90aCBzaWRlcwogICAgICAgICAgICAgICAgeWllbGQgX21ha2VfbGluZShsaW5lc1s6XSxOb25lLDApLF9tYWtlX2xpbmUobGluZXMsTm9uZSwxKSxGYWxzZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIyBDYXRjaCB1cCBvbiB0aGUgYmxhbmsgbGluZXMgc28gd2hlbiB3ZSB5aWVsZCB0aGUgbmV4dCBmcm9tL3RvCiAgICAgICAgICAgICMgcGFpciwgdGhleSBhcmUgbGluZWQgdXAuCiAgICAgICAgICAgIHdoaWxlKG51bV9ibGFua3NfdG9feWllbGQgPCAwKToKICAgICAgICAgICAgICAgIG51bV9ibGFua3NfdG9feWllbGQgKz0gMQogICAgICAgICAgICAgICAgeWllbGQgTm9uZSwoJycsJ1xuJyksVHJ1ZQogICAgICAgICAgICB3aGlsZShudW1fYmxhbmtzX3RvX3lpZWxkID4gMCk6CiAgICAgICAgICAgICAgICBudW1fYmxhbmtzX3RvX3lpZWxkIC09IDEKICAgICAgICAgICAgICAgIHlpZWxkICgnJywnXG4nKSxOb25lLFRydWUKICAgICAgICAgICAgaWYgcy5zdGFydHN3aXRoKCdYJyk6CiAgICAgICAgICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB5aWVsZCBmcm9tX2xpbmUsdG9fbGluZSxUcnVlCgogICAgZGVmIF9saW5lX3BhaXJfaXRlcmF0b3IoKToKICAgICAgICAiIiJZaWVsZHMgZnJvbS90byBsaW5lcyBvZiB0ZXh0IHdpdGggYSBjaGFuZ2UgaW5kaWNhdGlvbi4KCiAgICAgICAgVGhpcyBmdW5jdGlvbiBpcyBhbiBpdGVyYXRvci4gIEl0IGl0c2VsZiBwdWxscyBsaW5lcyBmcm9tIHRoZSBsaW5lCiAgICAgICAgaXRlcmF0b3IuICBJdHMgZGlmZmVyZW5jZSBmcm9tIHRoYXQgaXRlcmF0b3IgaXMgdGhhdCB0aGlzIGZ1bmN0aW9uCiAgICAgICAgYWx3YXlzIHlpZWxkcyBhIHBhaXIgb2YgZnJvbS90byB0ZXh0IGxpbmVzICh3aXRoIHRoZSBjaGFuZ2UKICAgICAgICBpbmRpY2F0aW9uKS4gIElmIG5lY2Vzc2FyeSBpdCB3aWxsIGNvbGxlY3Qgc2luZ2xlIGZyb20vdG8gbGluZXMKICAgICAgICB1bnRpbCBpdCBoYXMgYSBtYXRjaGluZyBwYWlyIGZyb20vdG8gcGFpciB0byB5aWVsZC4KCiAgICAgICAgTm90ZSwgdGhpcyBmdW5jdGlvbiBpcyBwdXJwb3NlZnVsbHkgbm90IGRlZmluZWQgYXQgdGhlIG1vZHVsZSBzY29wZSBzbwogICAgICAgIHRoYXQgZGF0YSBpdCBuZWVkcyBmcm9tIGl0cyBwYXJlbnQgZnVuY3Rpb24gKHdpdGhpbiB3aG9zZSBjb250ZXh0IGl0CiAgICAgICAgaXMgZGVmaW5lZCkgZG9lcyBub3QgbmVlZCB0byBiZSBvZiBtb2R1bGUgc2NvcGUuCiAgICAgICAgIiIiCiAgICAgICAgbGluZV9pdGVyYXRvciA9IF9saW5lX2l0ZXJhdG9yKCkKICAgICAgICBmcm9tbGluZXMsdG9saW5lcz1bXSxbXQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICMgQ29sbGVjdGluZyBsaW5lcyBvZiB0ZXh0IHVudGlsIHdlIGhhdmUgYSBmcm9tL3RvIHBhaXIKICAgICAgICAgICAgd2hpbGUgKGxlbihmcm9tbGluZXMpPT0wIG9yIGxlbih0b2xpbmVzKT09MCk6CiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYgPSBuZXh0KGxpbmVfaXRlcmF0b3IpCiAgICAgICAgICAgICAgICBpZiBmcm9tX2xpbmUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgZnJvbWxpbmVzLmFwcGVuZCgoZnJvbV9saW5lLGZvdW5kX2RpZmYpKQogICAgICAgICAgICAgICAgaWYgdG9fbGluZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICB0b2xpbmVzLmFwcGVuZCgodG9fbGluZSxmb3VuZF9kaWZmKSkKICAgICAgICAgICAgIyBPbmNlIHdlIGhhdmUgYSBwYWlyLCByZW1vdmUgdGhlbSBmcm9tIHRoZSBjb2xsZWN0aW9uIGFuZCB5aWVsZCBpdAogICAgICAgICAgICBmcm9tX2xpbmUsIGZyb21EaWZmID0gZnJvbWxpbmVzLnBvcCgwKQogICAgICAgICAgICB0b19saW5lLCB0b19kaWZmID0gdG9saW5lcy5wb3AoMCkKICAgICAgICAgICAgeWllbGQgKGZyb21fbGluZSx0b19saW5lLGZyb21EaWZmIG9yIHRvX2RpZmYpCgogICAgIyBIYW5kbGUgY2FzZSB3aGVyZSB1c2VyIGRvZXMgbm90IHdhbnQgY29udGV4dCBkaWZmZXJlbmNpbmcsIGp1c3QgeWllbGQKICAgICMgdGhlbSB1cCB3aXRob3V0IGRvaW5nIGFueXRoaW5nIGVsc2Ugd2l0aCB0aGVtLgogICAgbGluZV9wYWlyX2l0ZXJhdG9yID0gX2xpbmVfcGFpcl9pdGVyYXRvcigpCiAgICBpZiBjb250ZXh0IGlzIE5vbmU6CiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgeWllbGQgbmV4dChsaW5lX3BhaXJfaXRlcmF0b3IpCiAgICAjIEhhbmRsZSBjYXNlIHdoZXJlIHVzZXIgd2FudHMgY29udGV4dCBkaWZmZXJlbmNpbmcuICBXZSBtdXN0IGRvIHNvbWUKICAgICMgc3RvcmFnZSBvZiBsaW5lcyB1bnRpbCB3ZSBrbm93IGZvciBzdXJlIHRoYXQgdGhleSBhcmUgdG8gYmUgeWllbGRlZC4KICAgIGVsc2U6CiAgICAgICAgY29udGV4dCArPSAxCiAgICAgICAgbGluZXNfdG9fd3JpdGUgPSAwCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgIyBTdG9yZSBsaW5lcyB1cCB1bnRpbCB3ZSBmaW5kIGEgZGlmZmVyZW5jZSwgbm90ZSB1c2Ugb2YgYQogICAgICAgICAgICAjIGNpcmN1bGFyIHF1ZXVlIGJlY2F1c2Ugd2Ugb25seSBuZWVkIHRvIGtlZXAgYXJvdW5kIHdoYXQKICAgICAgICAgICAgIyB3ZSBuZWVkIGZvciBjb250ZXh0LgogICAgICAgICAgICBpbmRleCwgY29udGV4dExpbmVzID0gMCwgW05vbmVdKihjb250ZXh0KQogICAgICAgICAgICBmb3VuZF9kaWZmID0gRmFsc2UKICAgICAgICAgICAgd2hpbGUoZm91bmRfZGlmZiBpcyBGYWxzZSk6CiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYgPSBuZXh0KGxpbmVfcGFpcl9pdGVyYXRvcikKICAgICAgICAgICAgICAgIGkgPSBpbmRleCAlIGNvbnRleHQKICAgICAgICAgICAgICAgIGNvbnRleHRMaW5lc1tpXSA9IChmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYpCiAgICAgICAgICAgICAgICBpbmRleCArPSAxCiAgICAgICAgICAgICMgWWllbGQgbGluZXMgdGhhdCB3ZSBoYXZlIGNvbGxlY3RlZCBzbyBmYXIsIGJ1dCBmaXJzdCB5aWVsZAogICAgICAgICAgICAjIHRoZSB1c2VyJ3Mgc2VwYXJhdG9yLgogICAgICAgICAgICBpZiBpbmRleCA+IGNvbnRleHQ6CiAgICAgICAgICAgICAgICB5aWVsZCBOb25lLCBOb25lLCBOb25lCiAgICAgICAgICAgICAgICBsaW5lc190b193cml0ZSA9IGNvbnRleHQKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGxpbmVzX3RvX3dyaXRlID0gaW5kZXgKICAgICAgICAgICAgICAgIGluZGV4ID0gMAogICAgICAgICAgICB3aGlsZShsaW5lc190b193cml0ZSk6CiAgICAgICAgICAgICAgICBpID0gaW5kZXggJSBjb250ZXh0CiAgICAgICAgICAgICAgICBpbmRleCArPSAxCiAgICAgICAgICAgICAgICB5aWVsZCBjb250ZXh0TGluZXNbaV0KICAgICAgICAgICAgICAgIGxpbmVzX3RvX3dyaXRlIC09IDEKICAgICAgICAgICAgIyBOb3cgeWllbGQgdGhlIGNvbnRleHQgbGluZXMgYWZ0ZXIgdGhlIGNoYW5nZQogICAgICAgICAgICBsaW5lc190b193cml0ZSA9IGNvbnRleHQtMQogICAgICAgICAgICB3aGlsZShsaW5lc190b193cml0ZSk6CiAgICAgICAgICAgICAgICBmcm9tX2xpbmUsIHRvX2xpbmUsIGZvdW5kX2RpZmYgPSBuZXh0KGxpbmVfcGFpcl9pdGVyYXRvcikKICAgICAgICAgICAgICAgICMgSWYgYW5vdGhlciBjaGFuZ2Ugd2l0aGluIHRoZSBjb250ZXh0LCBleHRlbmQgdGhlIGNvbnRleHQKICAgICAgICAgICAgICAgIGlmIGZvdW5kX2RpZmY6CiAgICAgICAgICAgICAgICAgICAgbGluZXNfdG9fd3JpdGUgPSBjb250ZXh0LTEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbGluZXNfdG9fd3JpdGUgLT0gMQogICAgICAgICAgICAgICAgeWllbGQgZnJvbV9saW5lLCB0b19saW5lLCBmb3VuZF9kaWZmCgoKX2ZpbGVfdGVtcGxhdGUgPSAiIiIKPCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgVHJhbnNpdGlvbmFsLy9FTiIKICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS10cmFuc2l0aW9uYWwuZHRkIj4KCjxodG1sPgoKPGhlYWQ+CiAgICA8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiCiAgICAgICAgICBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9SVNPLTg4NTktMSIgLz4KICAgIDx0aXRsZT48L3RpdGxlPgogICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4lKHN0eWxlcylzCiAgICA8L3N0eWxlPgo8L2hlYWQ+Cgo8Ym9keT4KICAgICUodGFibGUpcyUobGVnZW5kKXMKPC9ib2R5PgoKPC9odG1sPiIiIgoKX3N0eWxlcyA9ICIiIgogICAgICAgIHRhYmxlLmRpZmYge2ZvbnQtZmFtaWx5OkNvdXJpZXI7IGJvcmRlcjptZWRpdW07fQogICAgICAgIC5kaWZmX2hlYWRlciB7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfQogICAgICAgIHRkLmRpZmZfaGVhZGVyIHt0ZXh0LWFsaWduOnJpZ2h0fQogICAgICAgIC5kaWZmX25leHQge2JhY2tncm91bmQtY29sb3I6I2MwYzBjMH0KICAgICAgICAuZGlmZl9hZGQge2JhY2tncm91bmQtY29sb3I6I2FhZmZhYX0KICAgICAgICAuZGlmZl9jaGcge2JhY2tncm91bmQtY29sb3I6I2ZmZmY3N30KICAgICAgICAuZGlmZl9zdWIge2JhY2tncm91bmQtY29sb3I6I2ZmYWFhYX0iIiIKCl90YWJsZV90ZW1wbGF0ZSA9ICIiIgogICAgPHRhYmxlIGNsYXNzPSJkaWZmIiBpZD0iZGlmZmxpYl9jaGdfJShwcmVmaXgpc190b3AiCiAgICAgICAgICAgY2VsbHNwYWNpbmc9IjAiIGNlbGxwYWRkaW5nPSIwIiBydWxlcz0iZ3JvdXBzIiA+CiAgICAgICAgPGNvbGdyb3VwPjwvY29sZ3JvdXA+IDxjb2xncm91cD48L2NvbGdyb3VwPiA8Y29sZ3JvdXA+PC9jb2xncm91cD4KICAgICAgICA8Y29sZ3JvdXA+PC9jb2xncm91cD4gPGNvbGdyb3VwPjwvY29sZ3JvdXA+IDxjb2xncm91cD48L2NvbGdyb3VwPgogICAgICAgICUoaGVhZGVyX3JvdylzCiAgICAgICAgPHRib2R5PgolKGRhdGFfcm93cylzICAgICAgICA8L3Rib2R5PgogICAgPC90YWJsZT4iIiIKCl9sZWdlbmQgPSAiIiIKICAgIDx0YWJsZSBjbGFzcz0iZGlmZiIgc3VtbWFyeT0iTGVnZW5kcyI+CiAgICAgICAgPHRyPiA8dGggY29sc3Bhbj0iMiI+IExlZ2VuZHMgPC90aD4gPC90cj4KICAgICAgICA8dHI+IDx0ZD4gPHRhYmxlIGJvcmRlcj0iIiBzdW1tYXJ5PSJDb2xvcnMiPgogICAgICAgICAgICAgICAgICAgICAgPHRyPjx0aD4gQ29sb3JzIDwvdGg+IDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJkaWZmX2FkZCI+Jm5ic3A7QWRkZWQmbmJzcDs8L3RkPjwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJkaWZmX2NoZyI+Q2hhbmdlZDwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJkaWZmX3N1YiI+RGVsZXRlZDwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgIDwvdGFibGU+PC90ZD4KICAgICAgICAgICAgIDx0ZD4gPHRhYmxlIGJvcmRlcj0iIiBzdW1tYXJ5PSJMaW5rcyI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRoIGNvbHNwYW49IjIiPiBMaW5rcyA8L3RoPiA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZD4oZilpcnN0IGNoYW5nZTwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkPihuKWV4dCBjaGFuZ2U8L3RkPiA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZD4odClvcDwvdGQ+IDwvdHI+CiAgICAgICAgICAgICAgICAgIDwvdGFibGU+PC90ZD4gPC90cj4KICAgIDwvdGFibGU+IiIiCgpjbGFzcyBIdG1sRGlmZihvYmplY3QpOgogICAgIiIiRm9yIHByb2R1Y2luZyBIVE1MIHNpZGUgYnkgc2lkZSBjb21wYXJpc29uIHdpdGggY2hhbmdlIGhpZ2hsaWdodHMuCgogICAgVGhpcyBjbGFzcyBjYW4gYmUgdXNlZCB0byBjcmVhdGUgYW4gSFRNTCB0YWJsZSAob3IgYSBjb21wbGV0ZSBIVE1MIGZpbGUKICAgIGNvbnRhaW5pbmcgdGhlIHRhYmxlKSBzaG93aW5nIGEgc2lkZSBieSBzaWRlLCBsaW5lIGJ5IGxpbmUgY29tcGFyaXNvbgogICAgb2YgdGV4dCB3aXRoIGludGVyLWxpbmUgYW5kIGludHJhLWxpbmUgY2hhbmdlIGhpZ2hsaWdodHMuICBUaGUgdGFibGUgY2FuCiAgICBiZSBnZW5lcmF0ZWQgaW4gZWl0aGVyIGZ1bGwgb3IgY29udGV4dHVhbCBkaWZmZXJlbmNlIG1vZGUuCgogICAgVGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSBwcm92aWRlZCBmb3IgSFRNTCBnZW5lcmF0aW9uOgoKICAgIG1ha2VfdGFibGUgLS0gZ2VuZXJhdGVzIEhUTUwgZm9yIGEgc2luZ2xlIHNpZGUgYnkgc2lkZSB0YWJsZQogICAgbWFrZV9maWxlIC0tIGdlbmVyYXRlcyBjb21wbGV0ZSBIVE1MIGZpbGUgd2l0aCBhIHNpbmdsZSBzaWRlIGJ5IHNpZGUgdGFibGUKCiAgICBTZWUgdG9vbHMvc2NyaXB0cy9kaWZmLnB5IGZvciBhbiBleGFtcGxlIHVzYWdlIG9mIHRoaXMgY2xhc3MuCiAgICAiIiIKCiAgICBfZmlsZV90ZW1wbGF0ZSA9IF9maWxlX3RlbXBsYXRlCiAgICBfc3R5bGVzID0gX3N0eWxlcwogICAgX3RhYmxlX3RlbXBsYXRlID0gX3RhYmxlX3RlbXBsYXRlCiAgICBfbGVnZW5kID0gX2xlZ2VuZAogICAgX2RlZmF1bHRfcHJlZml4ID0gMAoKICAgIGRlZiBfX2luaXRfXyhzZWxmLHRhYnNpemU9OCx3cmFwY29sdW1uPU5vbmUsbGluZWp1bms9Tm9uZSwKICAgICAgICAgICAgICAgICBjaGFyanVuaz1JU19DSEFSQUNURVJfSlVOSyk6CiAgICAgICAgIiIiSHRtbERpZmYgaW5zdGFuY2UgaW5pdGlhbGl6ZXIKCiAgICAgICAgQXJndW1lbnRzOgogICAgICAgIHRhYnNpemUgLS0gdGFiIHN0b3Agc3BhY2luZywgZGVmYXVsdHMgdG8gOC4KICAgICAgICB3cmFwY29sdW1uIC0tIGNvbHVtbiBudW1iZXIgd2hlcmUgbGluZXMgYXJlIGJyb2tlbiBhbmQgd3JhcHBlZCwKICAgICAgICAgICAgZGVmYXVsdHMgdG8gTm9uZSB3aGVyZSBsaW5lcyBhcmUgbm90IHdyYXBwZWQuCiAgICAgICAgbGluZWp1bmssY2hhcmp1bmsgLS0ga2V5d29yZCBhcmd1bWVudHMgcGFzc2VkIGludG8gbmRpZmYoKSAodXNlZCB0byBieQogICAgICAgICAgICBIdG1sRGlmZigpIHRvIGdlbmVyYXRlIHRoZSBzaWRlIGJ5IHNpZGUgSFRNTCBkaWZmZXJlbmNlcykuICBTZWUKICAgICAgICAgICAgbmRpZmYoKSBkb2N1bWVudGF0aW9uIGZvciBhcmd1bWVudCBkZWZhdWx0IHZhbHVlcyBhbmQgZGVzY3JpcHRpb25zLgogICAgICAgICIiIgogICAgICAgIHNlbGYuX3RhYnNpemUgPSB0YWJzaXplCiAgICAgICAgc2VsZi5fd3JhcGNvbHVtbiA9IHdyYXBjb2x1bW4KICAgICAgICBzZWxmLl9saW5lanVuayA9IGxpbmVqdW5rCiAgICAgICAgc2VsZi5fY2hhcmp1bmsgPSBjaGFyanVuawoKICAgIGRlZiBtYWtlX2ZpbGUoc2VsZixmcm9tbGluZXMsdG9saW5lcyxmcm9tZGVzYz0nJyx0b2Rlc2M9JycsY29udGV4dD1GYWxzZSwKICAgICAgICAgICAgICAgICAgbnVtbGluZXM9NSk6CiAgICAgICAgIiIiUmV0dXJucyBIVE1MIGZpbGUgb2Ygc2lkZSBieSBzaWRlIGNvbXBhcmlzb24gd2l0aCBjaGFuZ2UgaGlnaGxpZ2h0cwoKICAgICAgICBBcmd1bWVudHM6CiAgICAgICAgZnJvbWxpbmVzIC0tIGxpc3Qgb2YgImZyb20iIGxpbmVzCiAgICAgICAgdG9saW5lcyAtLSBsaXN0IG9mICJ0byIgbGluZXMKICAgICAgICBmcm9tZGVzYyAtLSAiZnJvbSIgZmlsZSBjb2x1bW4gaGVhZGVyIHN0cmluZwogICAgICAgIHRvZGVzYyAtLSAidG8iIGZpbGUgY29sdW1uIGhlYWRlciBzdHJpbmcKICAgICAgICBjb250ZXh0IC0tIHNldCB0byBUcnVlIGZvciBjb250ZXh0dWFsIGRpZmZlcmVuY2VzIChkZWZhdWx0cyB0byBGYWxzZQogICAgICAgICAgICB3aGljaCBzaG93cyBmdWxsIGRpZmZlcmVuY2VzKS4KICAgICAgICBudW1saW5lcyAtLSBudW1iZXIgb2YgY29udGV4dCBsaW5lcy4gIFdoZW4gY29udGV4dCBpcyBzZXQgVHJ1ZSwKICAgICAgICAgICAgY29udHJvbHMgbnVtYmVyIG9mIGxpbmVzIGRpc3BsYXllZCBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjaGFuZ2UuCiAgICAgICAgICAgIFdoZW4gY29udGV4dCBpcyBGYWxzZSwgY29udHJvbHMgdGhlIG51bWJlciBvZiBsaW5lcyB0byBwbGFjZQogICAgICAgICAgICB0aGUgIm5leHQiIGxpbmsgYW5jaG9ycyBiZWZvcmUgdGhlIG5leHQgY2hhbmdlIChzbyBjbGljayBvZgogICAgICAgICAgICAibmV4dCIgbGluayBqdW1wcyB0byBqdXN0IGJlZm9yZSB0aGUgY2hhbmdlKS4KICAgICAgICAiIiIKCiAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbGVfdGVtcGxhdGUgJSBkaWN0KAogICAgICAgICAgICBzdHlsZXMgPSBzZWxmLl9zdHlsZXMsCiAgICAgICAgICAgIGxlZ2VuZCA9IHNlbGYuX2xlZ2VuZCwKICAgICAgICAgICAgdGFibGUgPSBzZWxmLm1ha2VfdGFibGUoZnJvbWxpbmVzLHRvbGluZXMsZnJvbWRlc2MsdG9kZXNjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0PWNvbnRleHQsbnVtbGluZXM9bnVtbGluZXMpKQoKICAgIGRlZiBfdGFiX25ld2xpbmVfcmVwbGFjZShzZWxmLGZyb21saW5lcyx0b2xpbmVzKToKICAgICAgICAiIiJSZXR1cm5zIGZyb20vdG8gbGluZSBsaXN0cyB3aXRoIHRhYnMgZXhwYW5kZWQgYW5kIG5ld2xpbmVzIHJlbW92ZWQuCgogICAgICAgIEluc3RlYWQgb2YgdGFiIGNoYXJhY3RlcnMgYmVpbmcgcmVwbGFjZWQgYnkgdGhlIG51bWJlciBvZiBzcGFjZXMKICAgICAgICBuZWVkZWQgdG8gZmlsbCBpbiB0byB0aGUgbmV4dCB0YWIgc3RvcCwgdGhpcyBmdW5jdGlvbiB3aWxsIGZpbGwKICAgICAgICB0aGUgc3BhY2Ugd2l0aCB0YWIgY2hhcmFjdGVycy4gIFRoaXMgaXMgZG9uZSBzbyB0aGF0IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgYWxnb3JpdGhtcyBjYW4gaWRlbnRpZnkgY2hhbmdlcyBpbiBhIGZpbGUgd2hlbiB0YWJzIGFyZSByZXBsYWNlZCBieQogICAgICAgIHNwYWNlcyBhbmQgdmljZSB2ZXJzYS4gIEF0IHRoZSBlbmQgb2YgdGhlIEhUTUwgZ2VuZXJhdGlvbiwgdGhlIHRhYgogICAgICAgIGNoYXJhY3RlcnMgd2lsbCBiZSByZXBsYWNlZCB3aXRoIGEgbm9uYnJlYWthYmxlIHNwYWNlLgogICAgICAgICIiIgogICAgICAgIGRlZiBleHBhbmRfdGFicyhsaW5lKToKICAgICAgICAgICAgIyBoaWRlIHJlYWwgc3BhY2VzCiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnJlcGxhY2UoJyAnLCdcMCcpCiAgICAgICAgICAgICMgZXhwYW5kIHRhYnMgaW50byBzcGFjZXMKICAgICAgICAgICAgbGluZSA9IGxpbmUuZXhwYW5kdGFicyhzZWxmLl90YWJzaXplKQogICAgICAgICAgICAjIHJlcGxhY2Ugc3BhY2VzIGZyb20gZXhwYW5kZWQgdGFicyBiYWNrIGludG8gdGFiIGNoYXJhY3RlcnMKICAgICAgICAgICAgIyAod2UnbGwgcmVwbGFjZSB0aGVtIHdpdGggbWFya3VwIGFmdGVyIHdlIGRvIGRpZmZlcmVuY2luZykKICAgICAgICAgICAgbGluZSA9IGxpbmUucmVwbGFjZSgnICcsJ1x0JykKICAgICAgICAgICAgcmV0dXJuIGxpbmUucmVwbGFjZSgnXDAnLCcgJykucnN0cmlwKCdcbicpCiAgICAgICAgZnJvbWxpbmVzID0gW2V4cGFuZF90YWJzKGxpbmUpIGZvciBsaW5lIGluIGZyb21saW5lc10KICAgICAgICB0b2xpbmVzID0gW2V4cGFuZF90YWJzKGxpbmUpIGZvciBsaW5lIGluIHRvbGluZXNdCiAgICAgICAgcmV0dXJuIGZyb21saW5lcyx0b2xpbmVzCgogICAgZGVmIF9zcGxpdF9saW5lKHNlbGYsZGF0YV9saXN0LGxpbmVfbnVtLHRleHQpOgogICAgICAgICIiIkJ1aWxkcyBsaXN0IG9mIHRleHQgbGluZXMgYnkgc3BsaXR0aW5nIHRleHQgbGluZXMgYXQgd3JhcCBwb2ludAoKICAgICAgICBUaGlzIGZ1bmN0aW9uIHdpbGwgZGV0ZXJtaW5lIGlmIHRoZSBpbnB1dCB0ZXh0IGxpbmUgbmVlZHMgdG8gYmUKICAgICAgICB3cmFwcGVkIChzcGxpdCkgaW50byBzZXBhcmF0ZSBsaW5lcy4gIElmIHNvLCB0aGUgZmlyc3Qgd3JhcCBwb2ludAogICAgICAgIHdpbGwgYmUgZGV0ZXJtaW5lZCBhbmQgdGhlIGZpcnN0IGxpbmUgYXBwZW5kZWQgdG8gdGhlIG91dHB1dAogICAgICAgIHRleHQgbGluZSBsaXN0LiAgVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHJlY3Vyc2l2ZWx5IHRvIGhhbmRsZQogICAgICAgIHRoZSBzZWNvbmQgcGFydCBvZiB0aGUgc3BsaXQgbGluZSB0byBmdXJ0aGVyIHNwbGl0IGl0LgogICAgICAgICIiIgogICAgICAgICMgaWYgYmxhbmsgbGluZSBvciBjb250ZXh0IHNlcGFyYXRvciwganVzdCBhZGQgaXQgdG8gdGhlIG91dHB1dCBsaXN0CiAgICAgICAgaWYgbm90IGxpbmVfbnVtOgogICAgICAgICAgICBkYXRhX2xpc3QuYXBwZW5kKChsaW5lX251bSx0ZXh0KSkKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgaWYgbGluZSB0ZXh0IGRvZXNuJ3QgbmVlZCB3cmFwcGluZywganVzdCBhZGQgaXQgdG8gdGhlIG91dHB1dCBsaXN0CiAgICAgICAgc2l6ZSA9IGxlbih0ZXh0KQogICAgICAgIG1heCA9IHNlbGYuX3dyYXBjb2x1bW4KICAgICAgICBpZiAoc2l6ZSA8PSBtYXgpIG9yICgoc2l6ZSAtKHRleHQuY291bnQoJ1wwJykqMykpIDw9IG1heCk6CiAgICAgICAgICAgIGRhdGFfbGlzdC5hcHBlbmQoKGxpbmVfbnVtLHRleHQpKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgIyBzY2FuIHRleHQgbG9va2luZyBmb3IgdGhlIHdyYXAgcG9pbnQsIGtlZXBpbmcgdHJhY2sgaWYgdGhlIHdyYXAKICAgICAgICAjIHBvaW50IGlzIGluc2lkZSBtYXJrZXJzCiAgICAgICAgaSA9IDAKICAgICAgICBuID0gMAogICAgICAgIG1hcmsgPSAnJwogICAgICAgIHdoaWxlIG4gPCBtYXggYW5kIGkgPCBzaXplOgogICAgICAgICAgICBpZiB0ZXh0W2ldID09ICdcMCc6CiAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgICAgIG1hcmsgPSB0ZXh0W2ldCiAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgZWxpZiB0ZXh0W2ldID09ICdcMSc6CiAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgICAgIG1hcmsgPSAnJwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaSArPSAxCiAgICAgICAgICAgICAgICBuICs9IDEKCiAgICAgICAgIyB3cmFwIHBvaW50IGlzIGluc2lkZSB0ZXh0LCBicmVhayBpdCB1cCBpbnRvIHNlcGFyYXRlIGxpbmVzCiAgICAgICAgbGluZTEgPSB0ZXh0WzppXQogICAgICAgIGxpbmUyID0gdGV4dFtpOl0KCiAgICAgICAgIyBpZiB3cmFwIHBvaW50IGlzIGluc2lkZSBtYXJrZXJzLCBwbGFjZSBlbmQgbWFya2VyIGF0IGVuZCBvZiBmaXJzdAogICAgICAgICMgbGluZSBhbmQgc3RhcnQgbWFya2VyIGF0IGJlZ2lubmluZyBvZiBzZWNvbmQgbGluZSBiZWNhdXNlIGVhY2gKICAgICAgICAjIGxpbmUgd2lsbCBoYXZlIGl0cyBvd24gdGFibGUgdGFnIG1hcmt1cCBhcm91bmQgaXQuCiAgICAgICAgaWYgbWFyazoKICAgICAgICAgICAgbGluZTEgPSBsaW5lMSArICdcMScKICAgICAgICAgICAgbGluZTIgPSAnXDAnICsgbWFyayArIGxpbmUyCgogICAgICAgICMgdGFjayBvbiBmaXJzdCBsaW5lIG9udG8gdGhlIG91dHB1dCBsaXN0CiAgICAgICAgZGF0YV9saXN0LmFwcGVuZCgobGluZV9udW0sbGluZTEpKQoKICAgICAgICAjIHVzZSB0aGlzIHJvdXRpbmUgYWdhaW4gdG8gd3JhcCB0aGUgcmVtYWluaW5nIHRleHQKICAgICAgICBzZWxmLl9zcGxpdF9saW5lKGRhdGFfbGlzdCwnPicsbGluZTIpCgogICAgZGVmIF9saW5lX3dyYXBwZXIoc2VsZixkaWZmcyk6CiAgICAgICAgIiIiUmV0dXJucyBpdGVyYXRvciB0aGF0IHNwbGl0cyAod3JhcHMpIG1kaWZmIHRleHQgbGluZXMiIiIKCiAgICAgICAgIyBwdWxsIGZyb20vdG8gZGF0YSBhbmQgZmxhZ3MgZnJvbSBtZGlmZiBpdGVyYXRvcgogICAgICAgIGZvciBmcm9tZGF0YSx0b2RhdGEsZmxhZyBpbiBkaWZmczoKICAgICAgICAgICAgIyBjaGVjayBmb3IgY29udGV4dCBzZXBhcmF0b3JzIGFuZCBwYXNzIHRoZW0gdGhyb3VnaAogICAgICAgICAgICBpZiBmbGFnIGlzIE5vbmU6CiAgICAgICAgICAgICAgICB5aWVsZCBmcm9tZGF0YSx0b2RhdGEsZmxhZwogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgKGZyb21saW5lLGZyb210ZXh0KSwodG9saW5lLHRvdGV4dCkgPSBmcm9tZGF0YSx0b2RhdGEKICAgICAgICAgICAgIyBmb3IgZWFjaCBmcm9tL3RvIGxpbmUgc3BsaXQgaXQgYXQgdGhlIHdyYXAgY29sdW1uIHRvIGZvcm0KICAgICAgICAgICAgIyBsaXN0IG9mIHRleHQgbGluZXMuCiAgICAgICAgICAgIGZyb21saXN0LHRvbGlzdCA9IFtdLFtdCiAgICAgICAgICAgIHNlbGYuX3NwbGl0X2xpbmUoZnJvbWxpc3QsZnJvbWxpbmUsZnJvbXRleHQpCiAgICAgICAgICAgIHNlbGYuX3NwbGl0X2xpbmUodG9saXN0LHRvbGluZSx0b3RleHQpCiAgICAgICAgICAgICMgeWllbGQgZnJvbS90byBsaW5lIGluIHBhaXJzIGluc2VydGluZyBibGFuayBsaW5lcyBhcwogICAgICAgICAgICAjIG5lY2Vzc2FyeSB3aGVuIG9uZSBzaWRlIGhhcyBtb3JlIHdyYXBwZWQgbGluZXMKICAgICAgICAgICAgd2hpbGUgZnJvbWxpc3Qgb3IgdG9saXN0OgogICAgICAgICAgICAgICAgaWYgZnJvbWxpc3Q6CiAgICAgICAgICAgICAgICAgICAgZnJvbWRhdGEgPSBmcm9tbGlzdC5wb3AoMCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZnJvbWRhdGEgPSAoJycsJyAnKQogICAgICAgICAgICAgICAgaWYgdG9saXN0OgogICAgICAgICAgICAgICAgICAgIHRvZGF0YSA9IHRvbGlzdC5wb3AoMCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdG9kYXRhID0gKCcnLCcgJykKICAgICAgICAgICAgICAgIHlpZWxkIGZyb21kYXRhLHRvZGF0YSxmbGFnCgogICAgZGVmIF9jb2xsZWN0X2xpbmVzKHNlbGYsZGlmZnMpOgogICAgICAgICIiIkNvbGxlY3RzIG1kaWZmIG91dHB1dCBpbnRvIHNlcGFyYXRlIGxpc3RzCgogICAgICAgIEJlZm9yZSBzdG9yaW5nIHRoZSBtZGlmZiBmcm9tL3RvIGRhdGEgaW50byBhIGxpc3QsIGl0IGlzIGNvbnZlcnRlZAogICAgICAgIGludG8gYSBzaW5nbGUgbGluZSBvZiB0ZXh0IHdpdGggSFRNTCBtYXJrdXAuCiAgICAgICAgIiIiCgogICAgICAgIGZyb21saXN0LHRvbGlzdCxmbGFnbGlzdCA9IFtdLFtdLFtdCiAgICAgICAgIyBwdWxsIGZyb20vdG8gZGF0YSBhbmQgZmxhZ3MgZnJvbSBtZGlmZiBzdHlsZSBpdGVyYXRvcgogICAgICAgIGZvciBmcm9tZGF0YSx0b2RhdGEsZmxhZyBpbiBkaWZmczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgIyBzdG9yZSBIVE1MIG1hcmt1cCBvZiB0aGUgbGluZXMgaW50byB0aGUgbGlzdHMKICAgICAgICAgICAgICAgIGZyb21saXN0LmFwcGVuZChzZWxmLl9mb3JtYXRfbGluZSgwLGZsYWcsKmZyb21kYXRhKSkKICAgICAgICAgICAgICAgIHRvbGlzdC5hcHBlbmQoc2VsZi5fZm9ybWF0X2xpbmUoMSxmbGFnLCp0b2RhdGEpKQogICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAgICAgIyBleGNlcHRpb25zIG9jY3VyIGZvciBsaW5lcyB3aGVyZSBjb250ZXh0IHNlcGFyYXRvcnMgZ28KICAgICAgICAgICAgICAgIGZyb21saXN0LmFwcGVuZChOb25lKQogICAgICAgICAgICAgICAgdG9saXN0LmFwcGVuZChOb25lKQogICAgICAgICAgICBmbGFnbGlzdC5hcHBlbmQoZmxhZykKICAgICAgICByZXR1cm4gZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0CgogICAgZGVmIF9mb3JtYXRfbGluZShzZWxmLHNpZGUsZmxhZyxsaW5lbnVtLHRleHQpOgogICAgICAgICIiIlJldHVybnMgSFRNTCBtYXJrdXAgb2YgImZyb20iIC8gInRvIiB0ZXh0IGxpbmVzCgogICAgICAgIHNpZGUgLS0gMCBvciAxIGluZGljYXRpbmcgImZyb20iIG9yICJ0byIgdGV4dAogICAgICAgIGZsYWcgLS0gaW5kaWNhdGVzIGlmIGRpZmZlcmVuY2Ugb24gbGluZQogICAgICAgIGxpbmVudW0gLS0gbGluZSBudW1iZXIgKHVzZWQgZm9yIGxpbmUgbnVtYmVyIGNvbHVtbikKICAgICAgICB0ZXh0IC0tIGxpbmUgdGV4dCB0byBiZSBtYXJrZWQgdXAKICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGxpbmVudW0gPSAnJWQnICUgbGluZW51bQogICAgICAgICAgICBpZCA9ICcgaWQ9IiVzJXMiJyAlIChzZWxmLl9wcmVmaXhbc2lkZV0sbGluZW51bSkKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAjIGhhbmRsZSBibGFuayBsaW5lcyB3aGVyZSBsaW5lbnVtIGlzICc+JyBvciAnJwogICAgICAgICAgICBpZCA9ICcnCiAgICAgICAgIyByZXBsYWNlIHRob3NlIHRoaW5ncyB0aGF0IHdvdWxkIGdldCBjb25mdXNlZCB3aXRoIEhUTUwgc3ltYm9scwogICAgICAgIHRleHQ9dGV4dC5yZXBsYWNlKCImIiwiJmFtcDsiKS5yZXBsYWNlKCI+IiwiJmd0OyIpLnJlcGxhY2UoIjwiLCImbHQ7IikKCiAgICAgICAgIyBtYWtlIHNwYWNlIG5vbi1icmVha2FibGUgc28gdGhleSBkb24ndCBnZXQgY29tcHJlc3NlZCBvciBsaW5lIHdyYXBwZWQKICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCcgJywnJm5ic3A7JykucnN0cmlwKCkKCiAgICAgICAgcmV0dXJuICc8dGQgY2xhc3M9ImRpZmZfaGVhZGVyIiVzPiVzPC90ZD48dGQgbm93cmFwPSJub3dyYXAiPiVzPC90ZD4nIFwKICAgICAgICAgICAgICAgJSAoaWQsbGluZW51bSx0ZXh0KQoKICAgIGRlZiBfbWFrZV9wcmVmaXgoc2VsZik6CiAgICAgICAgIiIiQ3JlYXRlIHVuaXF1ZSBhbmNob3IgcHJlZml4ZXMiIiIKCiAgICAgICAgIyBHZW5lcmF0ZSBhIHVuaXF1ZSBhbmNob3IgcHJlZml4IHNvIG11bHRpcGxlIHRhYmxlcwogICAgICAgICMgY2FuIGV4aXN0IG9uIHRoZSBzYW1lIEhUTUwgcGFnZSB3aXRob3V0IGNvbmZsaWN0cy4KICAgICAgICBmcm9tcHJlZml4ID0gImZyb20lZF8iICUgSHRtbERpZmYuX2RlZmF1bHRfcHJlZml4CiAgICAgICAgdG9wcmVmaXggPSAidG8lZF8iICUgSHRtbERpZmYuX2RlZmF1bHRfcHJlZml4CiAgICAgICAgSHRtbERpZmYuX2RlZmF1bHRfcHJlZml4ICs9IDEKICAgICAgICAjIHN0b3JlIHByZWZpeGVzIHNvIGxpbmUgZm9ybWF0IG1ldGhvZCBoYXMgYWNjZXNzCiAgICAgICAgc2VsZi5fcHJlZml4ID0gW2Zyb21wcmVmaXgsdG9wcmVmaXhdCgogICAgZGVmIF9jb252ZXJ0X2ZsYWdzKHNlbGYsZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0LGNvbnRleHQsbnVtbGluZXMpOgogICAgICAgICIiIk1ha2VzIGxpc3Qgb2YgIm5leHQiIGxpbmtzIiIiCgogICAgICAgICMgYWxsIGFuY2hvciBuYW1lcyB3aWxsIGJlIGdlbmVyYXRlZCB1c2luZyB0aGUgdW5pcXVlICJ0byIgcHJlZml4CiAgICAgICAgdG9wcmVmaXggPSBzZWxmLl9wcmVmaXhbMV0KCiAgICAgICAgIyBwcm9jZXNzIGNoYW5nZSBmbGFncywgZ2VuZXJhdGluZyBtaWRkbGUgY29sdW1uIG9mIG5leHQgYW5jaG9ycy9saW5rcwogICAgICAgIG5leHRfaWQgPSBbJyddKmxlbihmbGFnbGlzdCkKICAgICAgICBuZXh0X2hyZWYgPSBbJyddKmxlbihmbGFnbGlzdCkKICAgICAgICBudW1fY2hnLCBpbl9jaGFuZ2UgPSAwLCBGYWxzZQogICAgICAgIGxhc3QgPSAwCiAgICAgICAgZm9yIGksZmxhZyBpbiBlbnVtZXJhdGUoZmxhZ2xpc3QpOgogICAgICAgICAgICBpZiBmbGFnOgogICAgICAgICAgICAgICAgaWYgbm90IGluX2NoYW5nZToKICAgICAgICAgICAgICAgICAgICBpbl9jaGFuZ2UgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgbGFzdCA9IGkKICAgICAgICAgICAgICAgICAgICAjIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBjaGFuZ2UsIGRyb3AgYW4gYW5jaG9yIGEgZmV3IGxpbmVzCiAgICAgICAgICAgICAgICAgICAgIyAodGhlIGNvbnRleHQgbGluZXMpIGJlZm9yZSB0aGUgY2hhbmdlIGZvciB0aGUgcHJldmlvdXMKICAgICAgICAgICAgICAgICAgICAjIGxpbmsKICAgICAgICAgICAgICAgICAgICBpID0gbWF4KFswLGktbnVtbGluZXNdKQogICAgICAgICAgICAgICAgICAgIG5leHRfaWRbaV0gPSAnIGlkPSJkaWZmbGliX2NoZ18lc18lZCInICUgKHRvcHJlZml4LG51bV9jaGcpCiAgICAgICAgICAgICAgICAgICAgIyBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgY2hhbmdlLCBkcm9wIGEgbGluayB0byB0aGUgbmV4dAogICAgICAgICAgICAgICAgICAgICMgY2hhbmdlCiAgICAgICAgICAgICAgICAgICAgbnVtX2NoZyArPSAxCiAgICAgICAgICAgICAgICAgICAgbmV4dF9ocmVmW2xhc3RdID0gJzxhIGhyZWY9IiNkaWZmbGliX2NoZ18lc18lZCI+bjwvYT4nICUgKAogICAgICAgICAgICAgICAgICAgICAgICAgdG9wcmVmaXgsbnVtX2NoZykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGluX2NoYW5nZSA9IEZhbHNlCiAgICAgICAgIyBjaGVjayBmb3IgY2FzZXMgd2hlcmUgdGhlcmUgaXMgbm8gY29udGVudCB0byBhdm9pZCBleGNlcHRpb25zCiAgICAgICAgaWYgbm90IGZsYWdsaXN0OgogICAgICAgICAgICBmbGFnbGlzdCA9IFtGYWxzZV0KICAgICAgICAgICAgbmV4dF9pZCA9IFsnJ10KICAgICAgICAgICAgbmV4dF9ocmVmID0gWycnXQogICAgICAgICAgICBsYXN0ID0gMAogICAgICAgICAgICBpZiBjb250ZXh0OgogICAgICAgICAgICAgICAgZnJvbWxpc3QgPSBbJzx0ZD48L3RkPjx0ZD4mbmJzcDtObyBEaWZmZXJlbmNlcyBGb3VuZCZuYnNwOzwvdGQ+J10KICAgICAgICAgICAgICAgIHRvbGlzdCA9IGZyb21saXN0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBmcm9tbGlzdCA9IHRvbGlzdCA9IFsnPHRkPjwvdGQ+PHRkPiZuYnNwO0VtcHR5IEZpbGUmbmJzcDs8L3RkPiddCiAgICAgICAgIyBpZiBub3QgYSBjaGFuZ2Ugb24gZmlyc3QgbGluZSwgZHJvcCBhIGxpbmsKICAgICAgICBpZiBub3QgZmxhZ2xpc3RbMF06CiAgICAgICAgICAgIG5leHRfaHJlZlswXSA9ICc8YSBocmVmPSIjZGlmZmxpYl9jaGdfJXNfMCI+ZjwvYT4nICUgdG9wcmVmaXgKICAgICAgICAjIHJlZG8gdGhlIGxhc3QgbGluayB0byBsaW5rIHRvIHRoZSB0b3AKICAgICAgICBuZXh0X2hyZWZbbGFzdF0gPSAnPGEgaHJlZj0iI2RpZmZsaWJfY2hnXyVzX3RvcCI+dDwvYT4nICUgKHRvcHJlZml4KQoKICAgICAgICByZXR1cm4gZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0LG5leHRfaHJlZixuZXh0X2lkCgogICAgZGVmIG1ha2VfdGFibGUoc2VsZixmcm9tbGluZXMsdG9saW5lcyxmcm9tZGVzYz0nJyx0b2Rlc2M9JycsY29udGV4dD1GYWxzZSwKICAgICAgICAgICAgICAgICAgIG51bWxpbmVzPTUpOgogICAgICAgICIiIlJldHVybnMgSFRNTCB0YWJsZSBvZiBzaWRlIGJ5IHNpZGUgY29tcGFyaXNvbiB3aXRoIGNoYW5nZSBoaWdobGlnaHRzCgogICAgICAgIEFyZ3VtZW50czoKICAgICAgICBmcm9tbGluZXMgLS0gbGlzdCBvZiAiZnJvbSIgbGluZXMKICAgICAgICB0b2xpbmVzIC0tIGxpc3Qgb2YgInRvIiBsaW5lcwogICAgICAgIGZyb21kZXNjIC0tICJmcm9tIiBmaWxlIGNvbHVtbiBoZWFkZXIgc3RyaW5nCiAgICAgICAgdG9kZXNjIC0tICJ0byIgZmlsZSBjb2x1bW4gaGVhZGVyIHN0cmluZwogICAgICAgIGNvbnRleHQgLS0gc2V0IHRvIFRydWUgZm9yIGNvbnRleHR1YWwgZGlmZmVyZW5jZXMgKGRlZmF1bHRzIHRvIEZhbHNlCiAgICAgICAgICAgIHdoaWNoIHNob3dzIGZ1bGwgZGlmZmVyZW5jZXMpLgogICAgICAgIG51bWxpbmVzIC0tIG51bWJlciBvZiBjb250ZXh0IGxpbmVzLiAgV2hlbiBjb250ZXh0IGlzIHNldCBUcnVlLAogICAgICAgICAgICBjb250cm9scyBudW1iZXIgb2YgbGluZXMgZGlzcGxheWVkIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIGNoYW5nZS4KICAgICAgICAgICAgV2hlbiBjb250ZXh0IGlzIEZhbHNlLCBjb250cm9scyB0aGUgbnVtYmVyIG9mIGxpbmVzIHRvIHBsYWNlCiAgICAgICAgICAgIHRoZSAibmV4dCIgbGluayBhbmNob3JzIGJlZm9yZSB0aGUgbmV4dCBjaGFuZ2UgKHNvIGNsaWNrIG9mCiAgICAgICAgICAgICJuZXh0IiBsaW5rIGp1bXBzIHRvIGp1c3QgYmVmb3JlIHRoZSBjaGFuZ2UpLgogICAgICAgICIiIgoKICAgICAgICAjIG1ha2UgdW5pcXVlIGFuY2hvciBwcmVmaXhlcyBzbyB0aGF0IG11bHRpcGxlIHRhYmxlcyBtYXkgZXhpc3QKICAgICAgICAjIG9uIHRoZSBzYW1lIHBhZ2Ugd2l0aG91dCBjb25mbGljdC4KICAgICAgICBzZWxmLl9tYWtlX3ByZWZpeCgpCgogICAgICAgICMgY2hhbmdlIHRhYnMgdG8gc3BhY2VzIGJlZm9yZSBpdCBnZXRzIG1vcmUgZGlmZmljdWx0IGFmdGVyIHdlIGluc2VydAogICAgICAgICMgbWFya2t1cAogICAgICAgIGZyb21saW5lcyx0b2xpbmVzID0gc2VsZi5fdGFiX25ld2xpbmVfcmVwbGFjZShmcm9tbGluZXMsdG9saW5lcykKCiAgICAgICAgIyBjcmVhdGUgZGlmZnMgaXRlcmF0b3Igd2hpY2ggZ2VuZXJhdGVzIHNpZGUgYnkgc2lkZSBmcm9tL3RvIGRhdGEKICAgICAgICBpZiBjb250ZXh0OgogICAgICAgICAgICBjb250ZXh0X2xpbmVzID0gbnVtbGluZXMKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb250ZXh0X2xpbmVzID0gTm9uZQogICAgICAgIGRpZmZzID0gX21kaWZmKGZyb21saW5lcyx0b2xpbmVzLGNvbnRleHRfbGluZXMsbGluZWp1bms9c2VsZi5fbGluZWp1bmssCiAgICAgICAgICAgICAgICAgICAgICBjaGFyanVuaz1zZWxmLl9jaGFyanVuaykKCiAgICAgICAgIyBzZXQgdXAgaXRlcmF0b3IgdG8gd3JhcCBsaW5lcyB0aGF0IGV4Y2VlZCBkZXNpcmVkIHdpZHRoCiAgICAgICAgaWYgc2VsZi5fd3JhcGNvbHVtbjoKICAgICAgICAgICAgZGlmZnMgPSBzZWxmLl9saW5lX3dyYXBwZXIoZGlmZnMpCgogICAgICAgICMgY29sbGVjdCB1cCBmcm9tL3RvIGxpbmVzIGFuZCBmbGFncyBpbnRvIGxpc3RzIChhbHNvIGZvcm1hdCB0aGUgbGluZXMpCiAgICAgICAgZnJvbWxpc3QsdG9saXN0LGZsYWdsaXN0ID0gc2VsZi5fY29sbGVjdF9saW5lcyhkaWZmcykKCiAgICAgICAgIyBwcm9jZXNzIGNoYW5nZSBmbGFncywgZ2VuZXJhdGluZyBtaWRkbGUgY29sdW1uIG9mIG5leHQgYW5jaG9ycy9saW5rcwogICAgICAgIGZyb21saXN0LHRvbGlzdCxmbGFnbGlzdCxuZXh0X2hyZWYsbmV4dF9pZCA9IHNlbGYuX2NvbnZlcnRfZmxhZ3MoCiAgICAgICAgICAgIGZyb21saXN0LHRvbGlzdCxmbGFnbGlzdCxjb250ZXh0LG51bWxpbmVzKQoKICAgICAgICBzID0gW10KICAgICAgICBmbXQgPSAnICAgICAgICAgICAgPHRyPjx0ZCBjbGFzcz0iZGlmZl9uZXh0IiVzPiVzPC90ZD4lcycgKyBcCiAgICAgICAgICAgICAgJzx0ZCBjbGFzcz0iZGlmZl9uZXh0Ij4lczwvdGQ+JXM8L3RyPlxuJwogICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihmbGFnbGlzdCkpOgogICAgICAgICAgICBpZiBmbGFnbGlzdFtpXSBpcyBOb25lOgogICAgICAgICAgICAgICAgIyBtZGlmZiB5aWVsZHMgTm9uZSBvbiBzZXBhcmF0b3IgbGluZXMgc2tpcCB0aGUgYm9ndXMgb25lcwogICAgICAgICAgICAgICAgIyBnZW5lcmF0ZWQgZm9yIHRoZSBmaXJzdCBsaW5lCiAgICAgICAgICAgICAgICBpZiBpID4gMDoKICAgICAgICAgICAgICAgICAgICBzLmFwcGVuZCgnICAgICAgICA8L3Rib2R5PiAgICAgICAgXG4gICAgICAgIDx0Ym9keT5cbicpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzLmFwcGVuZCggZm10ICUgKG5leHRfaWRbaV0sbmV4dF9ocmVmW2ldLGZyb21saXN0W2ldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dF9ocmVmW2ldLHRvbGlzdFtpXSkpCiAgICAgICAgaWYgZnJvbWRlc2Mgb3IgdG9kZXNjOgogICAgICAgICAgICBoZWFkZXJfcm93ID0gJzx0aGVhZD48dHI+JXMlcyVzJXM8L3RyPjwvdGhlYWQ+JyAlICgKICAgICAgICAgICAgICAgICc8dGggY2xhc3M9ImRpZmZfbmV4dCI+PGJyIC8+PC90aD4nLAogICAgICAgICAgICAgICAgJzx0aCBjb2xzcGFuPSIyIiBjbGFzcz0iZGlmZl9oZWFkZXIiPiVzPC90aD4nICUgZnJvbWRlc2MsCiAgICAgICAgICAgICAgICAnPHRoIGNsYXNzPSJkaWZmX25leHQiPjxiciAvPjwvdGg+JywKICAgICAgICAgICAgICAgICc8dGggY29sc3Bhbj0iMiIgY2xhc3M9ImRpZmZfaGVhZGVyIj4lczwvdGg+JyAlIHRvZGVzYykKICAgICAgICBlbHNlOgogICAgICAgICAgICBoZWFkZXJfcm93ID0gJycKCiAgICAgICAgdGFibGUgPSBzZWxmLl90YWJsZV90ZW1wbGF0ZSAlIGRpY3QoCiAgICAgICAgICAgIGRhdGFfcm93cz0nJy5qb2luKHMpLAogICAgICAgICAgICBoZWFkZXJfcm93PWhlYWRlcl9yb3csCiAgICAgICAgICAgIHByZWZpeD1zZWxmLl9wcmVmaXhbMV0pCgogICAgICAgIHJldHVybiB0YWJsZS5yZXBsYWNlKCdcMCsnLCc8c3BhbiBjbGFzcz0iZGlmZl9hZGQiPicpLiBcCiAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2UoJ1wwLScsJzxzcGFuIGNsYXNzPSJkaWZmX3N1YiI+JykuIFwKICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZSgnXDBeJywnPHNwYW4gY2xhc3M9ImRpZmZfY2hnIj4nKS4gXAogICAgICAgICAgICAgICAgICAgICByZXBsYWNlKCdcMScsJzwvc3Bhbj4nKS4gXAogICAgICAgICAgICAgICAgICAgICByZXBsYWNlKCdcdCcsJyZuYnNwOycpCgpkZWwgcmUKCmRlZiByZXN0b3JlKGRlbHRhLCB3aGljaCk6CiAgICByIiIiCiAgICBHZW5lcmF0ZSBvbmUgb2YgdGhlIHR3byBzZXF1ZW5jZXMgdGhhdCBnZW5lcmF0ZWQgYSBkZWx0YS4KCiAgICBHaXZlbiBhIGBkZWx0YWAgcHJvZHVjZWQgYnkgYERpZmZlci5jb21wYXJlKClgIG9yIGBuZGlmZigpYCwgZXh0cmFjdAogICAgbGluZXMgb3JpZ2luYXRpbmcgZnJvbSBmaWxlIDEgb3IgMiAocGFyYW1ldGVyIGB3aGljaGApLCBzdHJpcHBpbmcgb2ZmIGxpbmUKICAgIHByZWZpeGVzLgoKICAgIEV4YW1wbGVzOgoKICAgID4+PiBkaWZmID0gbmRpZmYoJ29uZVxudHdvXG50aHJlZVxuJy5zcGxpdGxpbmVzKGtlZXBlbmRzPVRydWUpLAogICAgLi4uICAgICAgICAgICAgICAnb3JlXG50cmVlXG5lbXVcbicuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKSkKICAgID4+PiBkaWZmID0gbGlzdChkaWZmKQogICAgPj4+IHByaW50KCcnLmpvaW4ocmVzdG9yZShkaWZmLCAxKSksIGVuZD0iIikKICAgIG9uZQogICAgdHdvCiAgICB0aHJlZQogICAgPj4+IHByaW50KCcnLmpvaW4ocmVzdG9yZShkaWZmLCAyKSksIGVuZD0iIikKICAgIG9yZQogICAgdHJlZQogICAgZW11CiAgICAiIiIKICAgIHRyeToKICAgICAgICB0YWcgPSB7MTogIi0gIiwgMjogIisgIn1baW50KHdoaWNoKV0KICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCd1bmtub3duIGRlbHRhIGNob2ljZSAobXVzdCBiZSAxIG9yIDIpOiAlcicKICAgICAgICAgICAgICAgICAgICAgICAgICAgJSB3aGljaCkKICAgIHByZWZpeGVzID0gKCIgICIsIHRhZykKICAgIGZvciBsaW5lIGluIGRlbHRhOgogICAgICAgIGlmIGxpbmVbOjJdIGluIHByZWZpeGVzOgogICAgICAgICAgICB5aWVsZCBsaW5lWzI6XQoKZGVmIF90ZXN0KCk6CiAgICBpbXBvcnQgZG9jdGVzdCwgZGlmZmxpYgogICAgcmV0dXJuIGRvY3Rlc3QudGVzdG1vZChkaWZmbGliKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIF90ZXN0KCkK',
'/Lib/string.py':'IyBTb21lIHN0cmluZ3MgZm9yIGN0eXBlLXN0eWxlIGNoYXJhY3RlciBjbGFzc2lmaWNhdGlvbgp3aGl0ZXNwYWNlID0gJyBcdFxuXHJcdlxmJwphc2NpaV9sb3dlcmNhc2UgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonCmFzY2lpX3VwcGVyY2FzZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicKYXNjaWlfbGV0dGVycyA9IGFzY2lpX2xvd2VyY2FzZSArIGFzY2lpX3VwcGVyY2FzZQpkaWdpdHMgPSAnMDEyMzQ1Njc4OScKaGV4ZGlnaXRzID0gZGlnaXRzICsgJ2FiY2RlZicgKyAnQUJDREVGJwpvY3RkaWdpdHMgPSAnMDEyMzQ1NjcnCnB1bmN0dWF0aW9uID0gIiIiISIjJCUmJygpKissLS4vOjs8PT4/QFtcXV5fYHt8fX4iIiIKcHJpbnRhYmxlID0gZGlnaXRzICsgYXNjaWlfbGV0dGVycyArIHB1bmN0dWF0aW9uICsgd2hpdGVzcGFjZQoKIyBGdW5jdGlvbnMgd2hpY2ggYXJlbid0IGF2YWlsYWJsZSBhcyBzdHJpbmcgbWV0aG9kcy4KCiMgQ2FwaXRhbGl6ZSB0aGUgd29yZHMgaW4gYSBzdHJpbmcsIGUuZy4gIiBhQmMgIGRFZiAiIC0+ICJBYmMgRGVmIi4KZGVmIGNhcHdvcmRzKHMsIHNlcD1Ob25lKToKICAgICIiImNhcHdvcmRzKHMgWyxzZXBdKSAtPiBzdHJpbmcKCiAgICBTcGxpdCB0aGUgYXJndW1lbnQgaW50byB3b3JkcyB1c2luZyBzcGxpdCwgY2FwaXRhbGl6ZSBlYWNoCiAgICB3b3JkIHVzaW5nIGNhcGl0YWxpemUsIGFuZCBqb2luIHRoZSBjYXBpdGFsaXplZCB3b3JkcyB1c2luZwogICAgam9pbi4gIElmIHRoZSBvcHRpb25hbCBzZWNvbmQgYXJndW1lbnQgc2VwIGlzIGFic2VudCBvciBOb25lLAogICAgcnVucyBvZiB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgYXJlIHJlcGxhY2VkIGJ5IGEgc2luZ2xlIHNwYWNlCiAgICBhbmQgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBhcmUgcmVtb3ZlZCwgb3RoZXJ3aXNlCiAgICBzZXAgaXMgdXNlZCB0byBzcGxpdCBhbmQgam9pbiB0aGUgd29yZHMuCgogICAgIiIiCiAgICByZXR1cm4gKHNlcCBvciAnICcpLmpvaW4oeC5jYXBpdGFsaXplKCkgZm9yIHggaW4gcy5zcGxpdChzZXApKQo=',
'/Lib/genericpath.py':'IiIiDQpQYXRoIG9wZXJhdGlvbnMgY29tbW9uIHRvIG1vcmUgdGhhbiBvbmUgT1MNCkRvIG5vdCB1c2UgZGlyZWN0bHkuICBUaGUgT1Mgc3BlY2lmaWMgbW9kdWxlcyBpbXBvcnQgdGhlIGFwcHJvcHJpYXRlDQpmdW5jdGlvbnMgZnJvbSB0aGlzIG1vZHVsZSB0aGVtc2VsdmVzLg0KIiIiDQppbXBvcnQgb3MNCmltcG9ydCBzdGF0DQoNCl9fYWxsX18gPSBbJ2NvbW1vbnByZWZpeCcsICdleGlzdHMnLCAnZ2V0YXRpbWUnLCAnZ2V0Y3RpbWUnLCAnZ2V0bXRpbWUnLA0KICAgICAgICAgICAnZ2V0c2l6ZScsICdpc2RpcicsICdpc2ZpbGUnXQ0KDQoNCiMgRG9lcyBhIHBhdGggZXhpc3Q/DQojIFRoaXMgaXMgZmFsc2UgZm9yIGRhbmdsaW5nIHN5bWJvbGljIGxpbmtzIG9uIHN5c3RlbXMgdGhhdCBzdXBwb3J0IHRoZW0uDQpkZWYgZXhpc3RzKHBhdGgpOg0KICAgICIiIlRlc3Qgd2hldGhlciBhIHBhdGggZXhpc3RzLiAgUmV0dXJucyBGYWxzZSBmb3IgYnJva2VuIHN5bWJvbGljIGxpbmtzIiIiDQogICAgdHJ5Og0KICAgICAgICBvcy5zdGF0KHBhdGgpDQogICAgZXhjZXB0IG9zLmVycm9yOg0KICAgICAgICByZXR1cm4gRmFsc2UNCiAgICByZXR1cm4gVHJ1ZQ0KDQoNCiMgVGhpcyBmb2xsb3dzIHN5bWJvbGljIGxpbmtzLCBzbyBib3RoIGlzbGluaygpIGFuZCBpc2RpcigpIGNhbiBiZSB0cnVlDQojIGZvciB0aGUgc2FtZSBwYXRoIG9ubyBzeXN0ZW1zIHRoYXQgc3VwcG9ydCBzeW1saW5rcw0KZGVmIGlzZmlsZShwYXRoKToNCiAgICAiIiJUZXN0IHdoZXRoZXIgYSBwYXRoIGlzIGEgcmVndWxhciBmaWxlIiIiDQogICAgdHJ5Og0KICAgICAgICBzdCA9IG9zLnN0YXQocGF0aCkNCiAgICBleGNlcHQgb3MuZXJyb3I6DQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIHJldHVybiBzdGF0LlNfSVNSRUcoc3Quc3RfbW9kZSkNCg0KDQojIElzIGEgcGF0aCBhIGRpcmVjdG9yeT8NCiMgVGhpcyBmb2xsb3dzIHN5bWJvbGljIGxpbmtzLCBzbyBib3RoIGlzbGluaygpIGFuZCBpc2RpcigpDQojIGNhbiBiZSB0cnVlIGZvciB0aGUgc2FtZSBwYXRoIG9uIHN5c3RlbXMgdGhhdCBzdXBwb3J0IHN5bWxpbmtzDQpkZWYgaXNkaXIocyk6DQogICAgIiIiUmV0dXJuIHRydWUgaWYgdGhlIHBhdGhuYW1lIHJlZmVycyB0byBhbiBleGlzdGluZyBkaXJlY3RvcnkuIiIiDQogICAgdHJ5Og0KICAgICAgICBzdCA9IG9zLnN0YXQocykNCiAgICBleGNlcHQgb3MuZXJyb3I6DQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIHJldHVybiBzdGF0LlNfSVNESVIoc3Quc3RfbW9kZSkNCg0KDQpkZWYgZ2V0c2l6ZShmaWxlbmFtZSk6DQogICAgIiIiUmV0dXJuIHRoZSBzaXplIG9mIGEgZmlsZSwgcmVwb3J0ZWQgYnkgb3Muc3RhdCgpLiIiIg0KICAgIHJldHVybiBvcy5zdGF0KGZpbGVuYW1lKS5zdF9zaXplDQoNCg0KZGVmIGdldG10aW1lKGZpbGVuYW1lKToNCiAgICAiIiJSZXR1cm4gdGhlIGxhc3QgbW9kaWZpY2F0aW9uIHRpbWUgb2YgYSBmaWxlLCByZXBvcnRlZCBieSBvcy5zdGF0KCkuIiIiDQogICAgcmV0dXJuIG9zLnN0YXQoZmlsZW5hbWUpLnN0X210aW1lDQoNCg0KZGVmIGdldGF0aW1lKGZpbGVuYW1lKToNCiAgICAiIiJSZXR1cm4gdGhlIGxhc3QgYWNjZXNzIHRpbWUgb2YgYSBmaWxlLCByZXBvcnRlZCBieSBvcy5zdGF0KCkuIiIiDQogICAgcmV0dXJuIG9zLnN0YXQoZmlsZW5hbWUpLnN0X2F0aW1lDQoNCg0KZGVmIGdldGN0aW1lKGZpbGVuYW1lKToNCiAgICAiIiJSZXR1cm4gdGhlIG1ldGFkYXRhIGNoYW5nZSB0aW1lIG9mIGEgZmlsZSwgcmVwb3J0ZWQgYnkgb3Muc3RhdCgpLiIiIg0KICAgIHJldHVybiBvcy5zdGF0KGZpbGVuYW1lKS5zdF9jdGltZQ0KDQoNCiMgUmV0dXJuIHRoZSBsb25nZXN0IHByZWZpeCBvZiBhbGwgbGlzdCBlbGVtZW50cy4NCmRlZiBjb21tb25wcmVmaXgobSk6DQogICAgIkdpdmVuIGEgbGlzdCBvZiBwYXRobmFtZXMsIHJldHVybnMgdGhlIGxvbmdlc3QgY29tbW9uIGxlYWRpbmcgY29tcG9uZW50Ig0KICAgIGlmIG5vdCBtOiByZXR1cm4gJycNCiAgICBzMSA9IG1pbihtKQ0KICAgIHMyID0gbWF4KG0pDQogICAgZm9yIGksIGMgaW4gZW51bWVyYXRlKHMxKToNCiAgICAgICAgaWYgYyAhPSBzMltpXToNCiAgICAgICAgICAgIHJldHVybiBzMVs6aV0NCiAgICByZXR1cm4gczENCg0KIyBTcGxpdCBhIHBhdGggaW4gcm9vdCBhbmQgZXh0ZW5zaW9uLg0KIyBUaGUgZXh0ZW5zaW9uIGlzIGV2ZXJ5dGhpbmcgc3RhcnRpbmcgYXQgdGhlIGxhc3QgZG90IGluIHRoZSBsYXN0DQojIHBhdGhuYW1lIGNvbXBvbmVudDsgdGhlIHJvb3QgaXMgZXZlcnl0aGluZyBiZWZvcmUgdGhhdC4NCiMgSXQgaXMgYWx3YXlzIHRydWUgdGhhdCByb290ICsgZXh0ID09IHAuDQoNCiMgR2VuZXJpYyBpbXBsZW1lbnRhdGlvbiBvZiBzcGxpdGV4dCwgdG8gYmUgcGFyYW1ldHJpemVkIHdpdGgNCiMgdGhlIHNlcGFyYXRvcnMNCmRlZiBfc3BsaXRleHQocCwgc2VwLCBhbHRzZXAsIGV4dHNlcCk6DQogICAgIiIiU3BsaXQgdGhlIGV4dGVuc2lvbiBmcm9tIGEgcGF0aG5hbWUuDQoNCiAgICBFeHRlbnNpb24gaXMgZXZlcnl0aGluZyBmcm9tIHRoZSBsYXN0IGRvdCB0byB0aGUgZW5kLCBpZ25vcmluZw0KICAgIGxlYWRpbmcgZG90cy4gIFJldHVybnMgIihyb290LCBleHQpIjsgZXh0IG1heSBiZSBlbXB0eS4iIiINCiAgICAjIE5PVEU6IFRoaXMgY29kZSBtdXN0IHdvcmsgZm9yIHRleHQgYW5kIGJ5dGVzIHN0cmluZ3MuDQoNCiAgICBzZXBJbmRleCA9IHAucmZpbmQoc2VwKQ0KICAgIGlmIGFsdHNlcDoNCiAgICAgICAgYWx0c2VwSW5kZXggPSBwLnJmaW5kKGFsdHNlcCkNCiAgICAgICAgc2VwSW5kZXggPSBtYXgoc2VwSW5kZXgsIGFsdHNlcEluZGV4KQ0KDQogICAgZG90SW5kZXggPSBwLnJmaW5kKGV4dHNlcCkNCiAgICBpZiBkb3RJbmRleCA+IHNlcEluZGV4Og0KICAgICAgICAjIHNraXAgYWxsIGxlYWRpbmcgZG90cw0KICAgICAgICBmaWxlbmFtZUluZGV4ID0gc2VwSW5kZXggKyAxDQogICAgICAgIHdoaWxlIGZpbGVuYW1lSW5kZXggPCBkb3RJbmRleDoNCiAgICAgICAgICAgIGlmIHBbZmlsZW5hbWVJbmRleDpmaWxlbmFtZUluZGV4KzFdICE9IGV4dHNlcDoNCiAgICAgICAgICAgICAgICByZXR1cm4gcFs6ZG90SW5kZXhdLCBwW2RvdEluZGV4Ol0NCiAgICAgICAgICAgIGZpbGVuYW1lSW5kZXggKz0gMQ0KDQogICAgcmV0dXJuIHAsIHBbOjBdDQo=',
'/Lib/webbrowser.py':'X19hbGxfXyA9IFsiRXJyb3IiLCAib3BlbiIsICJvcGVuX25ldyIsICJvcGVuX25ld190YWIiXQoKY2xhc3MgRXJyb3IoRXhjZXB0aW9uKToKICAgIHBhc3MKCl90YXJnZXQgPSB7IDA6ICcnLCAxOiAnX2JsYW5rJywgMjogJ19uZXcnIH0gICMgaGFjay4uLgoKCmRlZiBvcGVuKHVybCwgbmV3PTAsIGF1dG9yYWlzZT1UcnVlKToKICAgICIiIiAKICAgIG5ldyB3aW5kb3cgb3IgdGFiIGlzIG5vdCBjb250cm9sbGFibGUKICAgIG9uIHRoZSBjbGllbnQgc2lkZS4gYXV0b3JhaXNlIG5vdCBhdmFpbGFibGUuCiAgICAiIiIKICAgIGlmIHdpbi5vcGVuKHVybCwgX3RhcmdldFtuZXddKToKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQoKZGVmIG9wZW5fbmV3KHVybCk6CiAgICByZXR1cm4gb3Blbih1cmwsIDEpCgpkZWYgb3Blbl9uZXdfdGFiKHVybCk6CiAgICByZXR1cm4gb3Blbih1cmwsIDIpCgoK',
'/Lib/this.py':'cyA9ICIiIkd1ciBNcmEgYnMgQ2xndWJhLCBvbCBHdnogQ3JncmVmCgpPcm5oZ3ZzaHkgdmYgb3JnZ3JlIGd1bmEgaHR5bC4KUmtjeXZwdmcgdmYgb3JnZ3JlIGd1bmEgdnpjeXZwdmcuCkZ2emN5ciB2ZiBvcmdncmUgZ3VuYSBwYnpjeXJrLgpQYnpjeXJrIHZmIG9yZ2dyZSBndW5hIHBiemN5dnBuZ3JxLgpTeW5nIHZmIG9yZ2dyZSBndW5hIGFyZmdycS4KRmNuZWZyIHZmIG9yZ2dyZSBndW5hIHFyYWZyLgpFcm5xbm92eXZnbCBwYmhhZ2YuCkZjcnB2bnkgcG5mcmYgbmVyYSdnIGZjcnB2bnkgcmFiaHR1IGdiIG9lcm54IGd1ciBlaHlyZi4KTnlndWJodHUgY2VucGd2cG55dmdsIG9ybmdmIGNoZXZnbC4KUmVlYmVmIGZ1Ymh5cSBhcmlyZSBjbmZmIGZ2eXJhZ3lsLgpIYXlyZmYgcmtjeXZwdmd5bCBmdnlyYXBycS4KVmEgZ3VyIHNucHIgYnMgbnpvdnRodmdsLCBlcnNoZnIgZ3VyIGdyemNnbmd2YmEgZ2IgdGhyZmYuCkd1cmVyIGZ1Ymh5cSBvciBiYXItLSBuYXEgY2Vyc3Jlbm95bCBiYXlsIGJhciAtLWJvaXZiaGYgam5sIGdiIHFiIHZnLgpOeWd1Ymh0dSBndW5nIGpubCB6bmwgYWJnIG9yIGJvaXZiaGYgbmcgc3ZlZmcgaGF5cmZmIGxiaCdlciBRaGdwdS4KQWJqIHZmIG9yZ2dyZSBndW5hIGFyaXJlLgpOeWd1Ymh0dSBhcmlyZSB2ZiBic2dyYSBvcmdncmUgZ3VuYSAqZXZ0dWcqIGFiai4KVnMgZ3VyIHZ6Y3lyenJhZ25ndmJhIHZmIHVuZXEgZ2IgcmtjeW52YSwgdmcnZiBuIG9ucSB2cXJuLgpWcyBndXIgdnpjeXJ6cmFnbmd2YmEgdmYgcm5mbCBnYiBya2N5bnZhLCB2ZyB6bmwgb3IgbiB0YmJxIHZxcm4uCkFuenJmY25wcmYgbmVyIGJhciB1YmF4dmF0IHRlcm5nIHZxcm4gLS0geXJnJ2YgcWIgemJlciBicyBndWJmciEiIiIKCmQgPSB7fQpmb3IgYyBpbiAoNjUsIDk3KToKICAgIGZvciBpIGluIHJhbmdlKDI2KToKICAgICAgICBkW2NocihpK2MpXSA9IGNocigoaSsxMykgJSAyNiArIGMpCgpwcmludCgiIi5qb2luKFtkLmdldChjLCBjKSBmb3IgYyBpbiBzXSkpCg==',
'/Lib/datetime.py':'IiIiQ29uY3JldGUgZGF0ZS90aW1lIGFuZCByZWxhdGVkIHR5cGVzIC0tIHByb3RvdHlwZSBpbXBsZW1lbnRlZCBpbiBQeXRob24uCgpTZWUgaHR0cDovL3d3dy56b3BlLm9yZy9NZW1iZXJzL2ZkcmFrZS9EYXRlVGltZVdpa2kvRnJvbnRQYWdlCgpTZWUgYWxzbyBodHRwOi8vZGlyLnlhaG9vLmNvbS9SZWZlcmVuY2UvY2FsZW5kYXJzLwoKRm9yIGEgcHJpbWVyIG9uIERTVCwgaW5jbHVkaW5nIG1hbnkgY3VycmVudCBEU1QgcnVsZXMsIHNlZQpodHRwOi8vd2ViZXhoaWJpdHMub3JnL2RheWxpZ2h0c2F2aW5nLwoKRm9yIG1vcmUgYWJvdXQgRFNUIHRoYW4geW91IGV2ZXIgd2FudGVkIHRvIGtub3csIHNlZQpmdHA6Ly9lbHNpZS5uY2kubmloLmdvdi9wdWIvCgpTb3VyY2VzIGZvciB0aW1lIHpvbmUgYW5kIERTVCBkYXRhOiBodHRwOi8vd3d3LnR3aW5zdW4uY29tL3R6L3R6LWxpbmsuaHRtCgpUaGlzIHdhcyBvcmlnaW5hbGx5IGNvcGllZCBmcm9tIHRoZSBzYW5kYm94IG9mIHRoZSBDUHl0aG9uIENWUyByZXBvc2l0b3J5LgpUaGFua3MgdG8gVGltIFBldGVycyBmb3Igc3VnZ2VzdGluZyB1c2luZyBpdC4KIiIiCgppbXBvcnQgdGltZSBhcyBfdGltZQppbXBvcnQgbWF0aCBhcyBfbWF0aAoKZGVmIF9zdGF0ZV9jbXAoeCwgeSk6CiAgICByZXR1cm4gMCBpZiB4ID09IHkgZWxzZSAxIGlmIHggPiB5IGVsc2UgLTEKCmRlZiBfdHVwbGVfY21wKHgsIHkpOgogICAgcmV0dXJuIDAgaWYgeCA9PSB5IGVsc2UgMSBpZiB4ID4geSBlbHNlIC0xCgpNSU5ZRUFSID0gMQpNQVhZRUFSID0gOTk5OQpfTUFYT1JESU5BTCA9IDM2NTIwNTkgIyBkYXRlLm1heC50b29yZGluYWwoKQoKIyBVdGlsaXR5IGZ1bmN0aW9ucywgYWRhcHRlZCBmcm9tIFB5dGhvbidzIERlbW8vY2xhc3Nlcy9EYXRlcy5weSwgd2hpY2gKIyBhbHNvIGFzc3VtZXMgdGhlIGN1cnJlbnQgR3JlZ29yaWFuIGNhbGVuZGFyIGluZGVmaW5pdGVseSBleHRlbmRlZCBpbgojIGJvdGggZGlyZWN0aW9ucy4gIERpZmZlcmVuY2U6ICBEYXRlcy5weSBjYWxscyBKYW51YXJ5IDEgb2YgeWVhciAwIGRheQojIG51bWJlciAxLiAgVGhlIGNvZGUgaGVyZSBjYWxscyBKYW51YXJ5IDEgb2YgeWVhciAxIGRheSBudW1iZXIgMS4gIFRoaXMgaXMKIyB0byBtYXRjaCB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgInByb2xlcHRpYyBHcmVnb3JpYW4iIGNhbGVuZGFyIGluIERlcnNob3dpdHoKIyBhbmQgUmVpbmdvbGQncyAiQ2FsZW5kcmljYWwgQ2FsY3VsYXRpb25zIiwgd2hlcmUgaXQncyB0aGUgYmFzZSBjYWxlbmRhcgojIGZvciBhbGwgY29tcHV0YXRpb25zLiAgU2VlIHRoZSBib29rIGZvciBhbGdvcml0aG1zIGZvciBjb252ZXJ0aW5nIGJldHdlZW4KIyBwcm9sZXB0aWMgR3JlZ29yaWFuIG9yZGluYWxzIGFuZCBtYW55IG90aGVyIGNhbGVuZGFyIHN5c3RlbXMuCgpfREFZU19JTl9NT05USCA9IFtOb25lLCAzMSwgMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXQoKX0RBWVNfQkVGT1JFX01PTlRIID0gW05vbmVdCmRibSA9IDAKZm9yIGRpbSBpbiBfREFZU19JTl9NT05USFsxOl06CiAgICBfREFZU19CRUZPUkVfTU9OVEguYXBwZW5kKGRibSkKICAgIGRibSArPSBkaW0KI2RlbCBkYm0sIGRpbQoKZGVmIF9pc19sZWFwKHllYXIpOgogICAgInllYXIgLT4gMSBpZiBsZWFwIHllYXIsIGVsc2UgMC4iCiAgICByZXR1cm4geWVhciAlIDQgPT0gMCBhbmQgKHllYXIgJSAxMDAgIT0gMCBvciB5ZWFyICUgNDAwID09IDApCgpkZWYgX2RheXNfYmVmb3JlX3llYXIoeWVhcik6CiAgICAieWVhciAtPiBudW1iZXIgb2YgZGF5cyBiZWZvcmUgSmFudWFyeSAxc3Qgb2YgeWVhci4iCiAgICB5ID0geWVhciAtIDEKICAgIHJldHVybiB5KjM2NSArIHkvLzQgLSB5Ly8xMDAgKyB5Ly80MDAKCmRlZiBfZGF5c19pbl9tb250aCh5ZWFyLCBtb250aCk6CiAgICAieWVhciwgbW9udGggLT4gbnVtYmVyIG9mIGRheXMgaW4gdGhhdCBtb250aCBpbiB0aGF0IHllYXIuIgogICAgYXNzZXJ0IDEgPD0gbW9udGggPD0gMTIsIG1vbnRoCiAgICBpZiBtb250aCA9PSAyIGFuZCBfaXNfbGVhcCh5ZWFyKToKICAgICAgICByZXR1cm4gMjkKICAgIHJldHVybiBfREFZU19JTl9NT05USFttb250aF0KCmRlZiBfZGF5c19iZWZvcmVfbW9udGgoeWVhciwgbW9udGgpOgogICAgInllYXIsIG1vbnRoIC0+IG51bWJlciBvZiBkYXlzIGluIHllYXIgcHJlY2VlZGluZyBmaXJzdCBkYXkgb2YgbW9udGguIgogICAgYXNzZXJ0IDEgPD0gbW9udGggPD0gMTIsICdtb250aCBtdXN0IGJlIGluIDEuLjEyJwogICAgcmV0dXJuIF9EQVlTX0JFRk9SRV9NT05USFttb250aF0gKyAobW9udGggPiAyIGFuZCBfaXNfbGVhcCh5ZWFyKSkKCmRlZiBfeW1kMm9yZCh5ZWFyLCBtb250aCwgZGF5KToKICAgICJ5ZWFyLCBtb250aCwgZGF5IC0+IG9yZGluYWwsIGNvbnNpZGVyaW5nIDAxLUphbi0wMDAxIGFzIGRheSAxLiIKICAgIGFzc2VydCAxIDw9IG1vbnRoIDw9IDEyLCAnbW9udGggbXVzdCBiZSBpbiAxLi4xMicKICAgIGRpbSA9IF9kYXlzX2luX21vbnRoKHllYXIsIG1vbnRoKQogICAgYXNzZXJ0IDEgPD0gZGF5IDw9IGRpbSwgKCdkYXkgbXVzdCBiZSBpbiAxLi4lZCcgJSBkaW0pCiAgICByZXR1cm4gKF9kYXlzX2JlZm9yZV95ZWFyKHllYXIpICsKICAgICAgICAgICAgX2RheXNfYmVmb3JlX21vbnRoKHllYXIsIG1vbnRoKSArCiAgICAgICAgICAgIGRheSkKCl9ESTQwMFkgPSBfZGF5c19iZWZvcmVfeWVhcig0MDEpICAgICMgbnVtYmVyIG9mIGRheXMgaW4gNDAwIHllYXJzCl9ESTEwMFkgPSBfZGF5c19iZWZvcmVfeWVhcigxMDEpICAgICMgICAgIiAgICAiICAgIiAgICIgMTAwICAgIgpfREk0WSAgID0gX2RheXNfYmVmb3JlX3llYXIoNSkgICAgICAjICAgICIgICAgIiAgICIgICAiICAgNCAgICIKCiMgQSA0LXllYXIgY3ljbGUgaGFzIGFuIGV4dHJhIGxlYXAgZGF5IG92ZXIgd2hhdCB3ZSdkIGdldCBmcm9tIHBhc3RpbmcKIyB0b2dldGhlciA0IHNpbmdsZSB5ZWFycy4KYXNzZXJ0IF9ESTRZID09IDQgKiAzNjUgKyAxCgojIFNpbWlsYXJseSwgYSA0MDAteWVhciBjeWNsZSBoYXMgYW4gZXh0cmEgbGVhcCBkYXkgb3ZlciB3aGF0IHdlJ2QgZ2V0IGZyb20KIyBwYXN0aW5nIHRvZ2V0aGVyIDQgMTAwLXllYXIgY3ljbGVzLgphc3NlcnQgX0RJNDAwWSA9PSA0ICogX0RJMTAwWSArIDEKCiMgT1RPSCwgYSAxMDAteWVhciBjeWNsZSBoYXMgb25lIGZld2VyIGxlYXAgZGF5IHRoYW4gd2UnZCBnZXQgZnJvbQojIHBhc3RpbmcgdG9nZXRoZXIgMjUgNC15ZWFyIGN5Y2xlcy4KYXNzZXJ0IF9ESTEwMFkgPT0gMjUgKiBfREk0WSAtIDEKCmRlZiBfb3JkMnltZChuKToKICAgICJvcmRpbmFsIC0+ICh5ZWFyLCBtb250aCwgZGF5KSwgY29uc2lkZXJpbmcgMDEtSmFuLTAwMDEgYXMgZGF5IDEuIgoKICAgICMgbiBpcyBhIDEtYmFzZWQgaW5kZXgsIHN0YXJ0aW5nIGF0IDEtSmFuLTEuICBUaGUgcGF0dGVybiBvZiBsZWFwIHllYXJzCiAgICAjIHJlcGVhdHMgZXhhY3RseSBldmVyeSA0MDAgeWVhcnMuICBUaGUgYmFzaWMgc3RyYXRlZ3kgaXMgdG8gZmluZCB0aGUKICAgICMgY2xvc2VzdCA0MDAteWVhciBib3VuZGFyeSBhdCBvciBiZWZvcmUgbiwgdGhlbiB3b3JrIHdpdGggdGhlIG9mZnNldAogICAgIyBmcm9tIHRoYXQgYm91bmRhcnkgdG8gbi4gIExpZmUgaXMgbXVjaCBjbGVhcmVyIGlmIHdlIHN1YnRyYWN0IDEgZnJvbQogICAgIyBuIGZpcnN0IC0tIHRoZW4gdGhlIHZhbHVlcyBvZiBuIGF0IDQwMC15ZWFyIGJvdW5kYXJpZXMgYXJlIGV4YWN0bHkKICAgICMgdGhvc2UgZGl2aXNpYmxlIGJ5IF9ESTQwMFk6CiAgICAjCiAgICAjICAgICBEICBNICAgWSAgICAgICAgICAgIG4gICAgICAgICAgICAgIG4tMQogICAgIyAgICAgLS0gLS0tIC0tLS0gICAgICAgIC0tLS0tLS0tLS0gICAgIC0tLS0tLS0tLS0tLS0tLS0KICAgICMgICAgIDMxIERlYyAtNDAwICAgICAgICAtX0RJNDAwWSAgICAgICAtX0RJNDAwWSAtMQogICAgIyAgICAgIDEgSmFuIC0zOTkgICAgICAgICAtX0RJNDAwWSArMSAgIC1fREk0MDBZICAgICAgNDAwLXllYXIgYm91bmRhcnkKICAgICMgICAgIC4uLgogICAgIyAgICAgMzAgRGVjICAwMDAgICAgICAgIC0xICAgICAgICAgICAgIC0yCiAgICAjICAgICAzMSBEZWMgIDAwMCAgICAgICAgIDAgICAgICAgICAgICAgLTEKICAgICMgICAgICAxIEphbiAgMDAxICAgICAgICAgMSAgICAgICAgICAgICAgMCAgICAgICAgICAgIDQwMC15ZWFyIGJvdW5kYXJ5CiAgICAjICAgICAgMiBKYW4gIDAwMSAgICAgICAgIDIgICAgICAgICAgICAgIDEKICAgICMgICAgICAzIEphbiAgMDAxICAgICAgICAgMyAgICAgICAgICAgICAgMgogICAgIyAgICAgLi4uCiAgICAjICAgICAzMSBEZWMgIDQwMCAgICAgICAgIF9ESTQwMFkgICAgICAgIF9ESTQwMFkgLTEKICAgICMgICAgICAxIEphbiAgNDAxICAgICAgICAgX0RJNDAwWSArMSAgICAgX0RJNDAwWSAgICAgIDQwMC15ZWFyIGJvdW5kYXJ5CiAgICBuIC09IDEKICAgIG40MDAsIG4gPSBkaXZtb2QobiwgX0RJNDAwWSkKICAgIHllYXIgPSBuNDAwICogNDAwICsgMSAgICMgLi4uLCAtMzk5LCAxLCA0MDEsIC4uLgoKICAgICMgTm93IG4gaXMgdGhlIChub24tbmVnYXRpdmUpIG9mZnNldCwgaW4gZGF5cywgZnJvbSBKYW51YXJ5IDEgb2YgeWVhciwgdG8KICAgICMgdGhlIGRlc2lyZWQgZGF0ZS4gIE5vdyBjb21wdXRlIGhvdyBtYW55IDEwMC15ZWFyIGN5Y2xlcyBwcmVjZWRlIG4uCiAgICAjIE5vdGUgdGhhdCBpdCdzIHBvc3NpYmxlIGZvciBuMTAwIHRvIGVxdWFsIDQhICBJbiB0aGF0IGNhc2UgNCBmdWxsCiAgICAjIDEwMC15ZWFyIGN5Y2xlcyBwcmVjZWRlIHRoZSBkZXNpcmVkIGRheSwgd2hpY2ggaW1wbGllcyB0aGUgZGVzaXJlZAogICAgIyBkYXkgaXMgRGVjZW1iZXIgMzEgYXQgdGhlIGVuZCBvZiBhIDQwMC15ZWFyIGN5Y2xlLgogICAgbjEwMCwgbiA9IGRpdm1vZChuLCBfREkxMDBZKQoKICAgICMgTm93IGNvbXB1dGUgaG93IG1hbnkgNC15ZWFyIGN5Y2xlcyBwcmVjZWRlIGl0LgogICAgbjQsIG4gPSBkaXZtb2QobiwgX0RJNFkpCgogICAgIyBBbmQgbm93IGhvdyBtYW55IHNpbmdsZSB5ZWFycy4gIEFnYWluIG4xIGNhbiBiZSA0LCBhbmQgYWdhaW4gbWVhbmluZwogICAgIyB0aGF0IHRoZSBkZXNpcmVkIGRheSBpcyBEZWNlbWJlciAzMSBhdCB0aGUgZW5kIG9mIHRoZSA0LXllYXIgY3ljbGUuCiAgICBuMSwgbiA9IGRpdm1vZChuLCAzNjUpCgogICAgeWVhciArPSBuMTAwICogMTAwICsgbjQgKiA0ICsgbjEKICAgIGlmIG4xID09IDQgb3IgbjEwMCA9PSA0OgogICAgICAgIGFzc2VydCBuID09IDAKICAgICAgICByZXR1cm4geWVhci0xLCAxMiwgMzEKCiAgICAjIE5vdyB0aGUgeWVhciBpcyBjb3JyZWN0LCBhbmQgbiBpcyB0aGUgb2Zmc2V0IGZyb20gSmFudWFyeSAxLiAgV2UgZmluZAogICAgIyB0aGUgbW9udGggdmlhIGFuIGVzdGltYXRlIHRoYXQncyBlaXRoZXIgZXhhY3Qgb3Igb25lIHRvbyBsYXJnZS4KICAgIGxlYXB5ZWFyID0gbjEgPT0gMyBhbmQgKG40ICE9IDI0IG9yIG4xMDAgPT0gMykKICAgIGFzc2VydCBsZWFweWVhciA9PSBfaXNfbGVhcCh5ZWFyKQogICAgbW9udGggPSAobiArIDUwKSA+PiA1CiAgICBwcmVjZWRpbmcgPSBfREFZU19CRUZPUkVfTU9OVEhbbW9udGhdICsgKG1vbnRoID4gMiBhbmQgbGVhcHllYXIpCiAgICBpZiBwcmVjZWRpbmcgPiBuOiAgIyBlc3RpbWF0ZSBpcyB0b28gbGFyZ2UKICAgICAgICBtb250aCAtPSAxCiAgICAgICAgcHJlY2VkaW5nIC09IF9EQVlTX0lOX01PTlRIW21vbnRoXSArIChtb250aCA9PSAyIGFuZCBsZWFweWVhcikKICAgIG4gLT0gcHJlY2VkaW5nCiAgICBhc3NlcnQgMCA8PSBuIDwgX2RheXNfaW5fbW9udGgoeWVhciwgbW9udGgpCgogICAgIyBOb3cgdGhlIHllYXIgYW5kIG1vbnRoIGFyZSBjb3JyZWN0LCBhbmQgbiBpcyB0aGUgb2Zmc2V0IGZyb20gdGhlCiAgICAjIHN0YXJ0IG9mIHRoYXQgbW9udGg6ICB3ZSdyZSBkb25lIQogICAgcmV0dXJuIHllYXIsIG1vbnRoLCBuKzEKCiMgTW9udGggYW5kIGRheSBuYW1lcy4gIEZvciBsb2NhbGl6ZWQgdmVyc2lvbnMsIHNlZSB0aGUgY2FsZW5kYXIgbW9kdWxlLgpfTU9OVEhOQU1FUyA9IFtOb25lLCAiSmFuIiwgIkZlYiIsICJNYXIiLCAiQXByIiwgIk1heSIsICJKdW4iLAogICAgICAgICAgICAgICAgICAgICAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiXQpfREFZTkFNRVMgPSBbTm9uZSwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0IiwgIlN1biJdCgoKZGVmIF9idWlsZF9zdHJ1Y3RfdGltZSh5LCBtLCBkLCBoaCwgbW0sIHNzLCBkc3RmbGFnKToKICAgIHdkYXkgPSAoX3ltZDJvcmQoeSwgbSwgZCkgKyA2KSAlIDcKICAgIGRudW0gPSBfZGF5c19iZWZvcmVfbW9udGgoeSwgbSkgKyBkCiAgICByZXR1cm4gX3RpbWUuc3RydWN0X3RpbWUoKHksIG0sIGQsIGhoLCBtbSwgc3MsIHdkYXksIGRudW0sIGRzdGZsYWcpKQoKZGVmIF9mb3JtYXRfdGltZShoaCwgbW0sIHNzLCB1cyk6CiAgICAjIFNraXAgdHJhaWxpbmcgbWljcm9zZWNvbmRzIHdoZW4gdXM9PTAuCiAgICByZXN1bHQgPSAiJTAyZDolMDJkOiUwMmQiICUgKGhoLCBtbSwgc3MpCiAgICBpZiB1czoKICAgICAgICByZXN1bHQgKz0gIi4lMDZkIiAlIHVzCiAgICByZXR1cm4gcmVzdWx0CgojIENvcnJlY3RseSBzdWJzdGl0dXRlIGZvciAleiBhbmQgJVogZXNjYXBlcyBpbiBzdHJmdGltZSBmb3JtYXRzLgpkZWYgX3dyYXBfc3RyZnRpbWUob2JqZWN0LCBmb3JtYXQsIHRpbWV0dXBsZSk6CiAgICB5ZWFyID0gdGltZXR1cGxlWzBdCiAgICBpZiB5ZWFyIDwgMTAwMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ5ZWFyPSVkIGlzIGJlZm9yZSAxMDAwOyB0aGUgZGF0ZXRpbWUgc3RyZnRpbWUoKSAiCiAgICAgICAgICAgICAgICAgICAgICAgICAibWV0aG9kcyByZXF1aXJlIHllYXIgPj0gMTAwMCIgJSB5ZWFyKQogICAgIyBEb24ndCBjYWxsIHV0Y29mZnNldCgpIG9yIHR6bmFtZSgpIHVubGVzcyBhY3R1YWxseSBuZWVkZWQuCiAgICBmcmVwbGFjZSA9IE5vbmUgIyB0aGUgc3RyaW5nIHRvIHVzZSBmb3IgJWYKICAgIHpyZXBsYWNlID0gTm9uZSAjIHRoZSBzdHJpbmcgdG8gdXNlIGZvciAlegogICAgWnJlcGxhY2UgPSBOb25lICMgdGhlIHN0cmluZyB0byB1c2UgZm9yICVaCgogICAgIyBTY2FuIGZvcm1hdCBmb3IgJXogYW5kICVaIGVzY2FwZXMsIHJlcGxhY2luZyBhcyBuZWVkZWQuCiAgICBuZXdmb3JtYXQgPSBbXQogICAgcHVzaCA9IG5ld2Zvcm1hdC5hcHBlbmQKICAgIGksIG4gPSAwLCBsZW4oZm9ybWF0KQogICAgd2hpbGUgaSA8IG46CiAgICAgICAgY2ggPSBmb3JtYXRbaV0KICAgICAgICBpICs9IDEKICAgICAgICBpZiBjaCA9PSAnJSc6CiAgICAgICAgICAgIGlmIGkgPCBuOgogICAgICAgICAgICAgICAgY2ggPSBmb3JtYXRbaV0KICAgICAgICAgICAgICAgIGkgKz0gMQogICAgICAgICAgICAgICAgaWYgY2ggPT0gJ2YnOgogICAgICAgICAgICAgICAgICAgIGlmIGZyZXBsYWNlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGZyZXBsYWNlID0gJyUwNmQnICUgZ2V0YXR0cihvYmplY3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWljcm9zZWNvbmQnLCAwKQogICAgICAgICAgICAgICAgICAgIG5ld2Zvcm1hdC5hcHBlbmQoZnJlcGxhY2UpCiAgICAgICAgICAgICAgICBlbGlmIGNoID09ICd6JzoKICAgICAgICAgICAgICAgICAgICBpZiB6cmVwbGFjZSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICB6cmVwbGFjZSA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAidXRjb2Zmc2V0Iik6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBvYmplY3QudXRjb2Zmc2V0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9mZnNldCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gJysnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgb2Zmc2V0LmRheXMgPCAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAtb2Zmc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ24gPSAnLScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLCBtID0gZGl2bW9kKG9mZnNldCwgdGltZWRlbHRhKGhvdXJzPTEpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBub3QgbSAlIHRpbWVkZWx0YShtaW51dGVzPTEpLCAid2hvbGUgbWludXRlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gLy89IHRpbWVkZWx0YShtaW51dGVzPTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgenJlcGxhY2UgPSAnJWMlMDJkJTAyZCcgJSAoc2lnbiwgaCwgbSkKICAgICAgICAgICAgICAgICAgICBhc3NlcnQgJyUnIG5vdCBpbiB6cmVwbGFjZQogICAgICAgICAgICAgICAgICAgIG5ld2Zvcm1hdC5hcHBlbmQoenJlcGxhY2UpCiAgICAgICAgICAgICAgICBlbGlmIGNoID09ICdaJzoKICAgICAgICAgICAgICAgICAgICBpZiBacmVwbGFjZSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBacmVwbGFjZSA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAidHpuYW1lIik6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gb2JqZWN0LnR6bmFtZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgc3RyZnRpbWUgaXMgZ29pbmcgdG8gaGF2ZSBhdCB0aGlzOiBlc2NhcGUgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFpyZXBsYWNlID0gcy5yZXBsYWNlKCclJywgJyUlJykKICAgICAgICAgICAgICAgICAgICBuZXdmb3JtYXQuYXBwZW5kKFpyZXBsYWNlKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwdXNoKCclJykKICAgICAgICAgICAgICAgICAgICBwdXNoKGNoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHVzaCgnJScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHVzaChjaCkKICAgIG5ld2Zvcm1hdCA9ICIiLmpvaW4obmV3Zm9ybWF0KQogICAgcmV0dXJuIF90aW1lLnN0cmZ0aW1lKG5ld2Zvcm1hdCwgdGltZXR1cGxlKQoKZGVmIF9jYWxsX3R6aW5mb19tZXRob2QodHppbmZvLCBtZXRobmFtZSwgdHppbmZvYXJnKToKICAgIGlmIHR6aW5mbyBpcyBOb25lOgogICAgICAgIHJldHVybiBOb25lCiAgICByZXR1cm4gZ2V0YXR0cih0emluZm8sIG1ldGhuYW1lKSh0emluZm9hcmcpCgojIEp1c3QgcmFpc2UgVHlwZUVycm9yIGlmIHRoZSBhcmcgaXNuJ3QgTm9uZSBvciBhIHN0cmluZy4KZGVmIF9jaGVja190em5hbWUobmFtZSk6CiAgICBpZiBuYW1lIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShuYW1lLCBzdHIpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigidHppbmZvLnR6bmFtZSgpIG11c3QgcmV0dXJuIE5vbmUgb3Igc3RyaW5nLCAiCiAgICAgICAgICAgICAgICAgICAgICAgICJub3QgJyVzJyIgJSB0eXBlKG5hbWUpKQoKIyBuYW1lIGlzIHRoZSBvZmZzZXQtcHJvZHVjaW5nIG1ldGhvZCwgInV0Y29mZnNldCIgb3IgImRzdCIuCiMgb2Zmc2V0IGlzIHdoYXQgaXQgcmV0dXJuZWQuCiMgSWYgb2Zmc2V0IGlzbid0IE5vbmUgb3IgdGltZWRlbHRhLCByYWlzZXMgVHlwZUVycm9yLgojIElmIG9mZnNldCBpcyBOb25lLCByZXR1cm5zIE5vbmUuCiMgRWxzZSBvZmZzZXQgaXMgY2hlY2tlZCBmb3IgYmVpbmcgaW4gcmFuZ2UsIGFuZCBhIHdob2xlICMgb2YgbWludXRlcy4KIyBJZiBpdCBpcywgaXRzIGludGVnZXIgdmFsdWUgaXMgcmV0dXJuZWQuICBFbHNlIFZhbHVlRXJyb3IgaXMgcmFpc2VkLgpkZWYgX2NoZWNrX3V0Y19vZmZzZXQobmFtZSwgb2Zmc2V0KToKICAgIGFzc2VydCBuYW1lIGluICgidXRjb2Zmc2V0IiwgImRzdCIpCiAgICBpZiBvZmZzZXQgaXMgTm9uZToKICAgICAgICByZXR1cm4KICAgIGlmIG5vdCBpc2luc3RhbmNlKG9mZnNldCwgdGltZWRlbHRhKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoInR6aW5mby4lcygpIG11c3QgcmV0dXJuIE5vbmUgIgogICAgICAgICAgICAgICAgICAgICAgICAib3IgdGltZWRlbHRhLCBub3QgJyVzJyIgJSAobmFtZSwgdHlwZShvZmZzZXQpKSkKICAgIGlmIG9mZnNldCAlIHRpbWVkZWx0YShtaW51dGVzPTEpIG9yIG9mZnNldC5taWNyb3NlY29uZHM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidHppbmZvLiVzKCkgbXVzdCByZXR1cm4gYSB3aG9sZSBudW1iZXIgIgogICAgICAgICAgICAgICAgICAgICAgICAgIm9mIG1pbnV0ZXMsIGdvdCAlcyIgJSAobmFtZSwgb2Zmc2V0KSkKICAgIGlmIG5vdCAtdGltZWRlbHRhKDEpIDwgb2Zmc2V0IDwgdGltZWRlbHRhKDEpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIiVzKCk9JXMsIG11c3QgYmUgbXVzdCBiZSBzdHJpY3RseSBiZXR3ZWVuIgogICAgICAgICAgICAgICAgICAgICAgICAgIiAtdGltZWRlbHRhKGhvdXJzPTI0KSBhbmQgdGltZWRlbHRhKGhvdXJzPTI0KSIKICAgICAgICAgICAgICAgICAgICAgICAgICUgKG5hbWUsIG9mZnNldCkpCgpkZWYgX2NoZWNrX2RhdGVfZmllbGRzKHllYXIsIG1vbnRoLCBkYXkpOgogICAgaWYgbm90IGlzaW5zdGFuY2UoeWVhciwgaW50KToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2ludCBleHBlY3RlZCcpCiAgICBpZiBub3QgTUlOWUVBUiA8PSB5ZWFyIDw9IE1BWFlFQVI6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigneWVhciBtdXN0IGJlIGluICVkLi4lZCcgJSAoTUlOWUVBUiwgTUFYWUVBUiksIHllYXIpCiAgICBpZiBub3QgMSA8PSBtb250aCA8PSAxMjoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdtb250aCBtdXN0IGJlIGluIDEuLjEyJywgbW9udGgpCiAgICBkaW0gPSBfZGF5c19pbl9tb250aCh5ZWFyLCBtb250aCkKICAgIGlmIG5vdCAxIDw9IGRheSA8PSBkaW06CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignZGF5IG11c3QgYmUgaW4gMS4uJWQnICUgZGltLCBkYXkpCgpkZWYgX2NoZWNrX3RpbWVfZmllbGRzKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWNyb3NlY29uZCk6CiAgICBpZiBub3QgaXNpbnN0YW5jZShob3VyLCBpbnQpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcignaW50IGV4cGVjdGVkJykKICAgIGlmIG5vdCAwIDw9IGhvdXIgPD0gMjM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignaG91ciBtdXN0IGJlIGluIDAuLjIzJywgaG91cikKICAgIGlmIG5vdCAwIDw9IG1pbnV0ZSA8PSA1OToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdtaW51dGUgbXVzdCBiZSBpbiAwLi41OScsIG1pbnV0ZSkKICAgIGlmIG5vdCAwIDw9IHNlY29uZCA8PSA1OToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdzZWNvbmQgbXVzdCBiZSBpbiAwLi41OScsIHNlY29uZCkKICAgIGlmIG5vdCAwIDw9IG1pY3Jvc2Vjb25kIDw9IDk5OTk5OToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdtaWNyb3NlY29uZCBtdXN0IGJlIGluIDAuLjk5OTk5OScsIG1pY3Jvc2Vjb25kKQoKZGVmIF9jaGVja190emluZm9fYXJnKHR6KToKICAgIGlmIHR6IGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZSh0eiwgdHppbmZvKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoInR6aW5mbyBhcmd1bWVudCBtdXN0IGJlIE5vbmUgb3Igb2YgYSB0emluZm8gc3ViY2xhc3MiKQoKZGVmIF9jbXBlcnJvcih4LCB5KToKICAgIHJhaXNlIFR5cGVFcnJvcigiY2FuJ3QgY29tcGFyZSAnJXMnIHRvICclcyciICUgKAogICAgICAgICAgICAgICAgICAgIHR5cGUoeCkuX19uYW1lX18sIHR5cGUoeSkuX19uYW1lX18pKQoKY2xhc3MgdGltZWRlbHRhOgogICAgIiIiUmVwcmVzZW50IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdHdvIGRhdGV0aW1lIG9iamVjdHMuCgogICAgU3VwcG9ydGVkIG9wZXJhdG9yczoKCiAgICAtIGFkZCwgc3VidHJhY3QgdGltZWRlbHRhCiAgICAtIHVuYXJ5IHBsdXMsIG1pbnVzLCBhYnMKICAgIC0gY29tcGFyZSB0byB0aW1lZGVsdGEKICAgIC0gbXVsdGlwbHksIGRpdmlkZSBieSBpbnQvbG9uZwoKICAgIEluIGFkZGl0aW9uLCBkYXRldGltZSBzdXBwb3J0cyBzdWJ0cmFjdGlvbiBvZiB0d28gZGF0ZXRpbWUgb2JqZWN0cwogICAgcmV0dXJuaW5nIGEgdGltZWRlbHRhLCBhbmQgYWRkaXRpb24gb3Igc3VidHJhY3Rpb24gb2YgYSBkYXRldGltZQogICAgYW5kIGEgdGltZWRlbHRhIGdpdmluZyBhIGRhdGV0aW1lLgoKICAgIFJlcHJlc2VudGF0aW9uOiAoZGF5cywgc2Vjb25kcywgbWljcm9zZWNvbmRzKS4gIFdoeT8gIEJlY2F1c2UgSQogICAgZmVsdCBsaWtlIGl0LgogICAgIiIiCiAgICBfX3Nsb3RzX18gPSAnX2RheXMnLCAnX3NlY29uZHMnLCAnX21pY3Jvc2Vjb25kcycKCiAgICBkZWYgX19uZXdfXyhjbHMsIGRheXM9MCwgc2Vjb25kcz0wLCBtaWNyb3NlY29uZHM9MCwKICAgICAgICAgICAgICAgIG1pbGxpc2Vjb25kcz0wLCBtaW51dGVzPTAsIGhvdXJzPTAsIHdlZWtzPTApOgogICAgICAgICMgRG9pbmcgdGhpcyBlZmZpY2llbnRseSBhbmQgYWNjdXJhdGVseSBpbiBDIGlzIGdvaW5nIHRvIGJlIGRpZmZpY3VsdAogICAgICAgICMgYW5kIGVycm9yLXByb25lLCBkdWUgdG8gdWJpcXVpdG91cyBvdmVyZmxvdyBwb3NzaWJpbGl0aWVzLCBhbmQgdGhhdAogICAgICAgICMgQyBkb3VibGUgZG9lc24ndCBoYXZlIGVub3VnaCBiaXRzIG9mIHByZWNpc2lvbiB0byByZXByZXNlbnQKICAgICAgICAjIG1pY3Jvc2Vjb25kcyBvdmVyIDEwSyB5ZWFycyBmYWl0aGZ1bGx5LiAgVGhlIGNvZGUgaGVyZSB0cmllcyB0byBtYWtlCiAgICAgICAgIyBleHBsaWNpdCB3aGVyZSBnby1mYXN0IGFzc3VtcHRpb25zIGNhbiBiZSByZWxpZWQgb24sIGluIG9yZGVyIHRvCiAgICAgICAgIyBndWlkZSB0aGUgQyBpbXBsZW1lbnRhdGlvbjsgaXQncyB3YXkgbW9yZSBjb252b2x1dGVkIHRoYW4gc3BlZWQtCiAgICAgICAgIyBpZ25vcmluZyBhdXRvLW92ZXJmbG93LXRvLWxvbmcgaWRpb21hdGljIFB5dGhvbiBjb3VsZCBiZS4KCiAgICAgICAgIyBYWFggQ2hlY2sgdGhhdCBhbGwgaW5wdXRzIGFyZSBpbnRzIG9yIGZsb2F0cy4KCiAgICAgICAgIyBGaW5hbCB2YWx1ZXMsIGFsbCBpbnRlZ2VyLgogICAgICAgICMgcyBhbmQgdXMgZml0IGluIDMyLWJpdCBzaWduZWQgaW50czsgZCBpc24ndCBib3VuZGVkLgogICAgICAgIGQgPSBzID0gdXMgPSAwCgogICAgICAgICMgTm9ybWFsaXplIGV2ZXJ5dGhpbmcgdG8gZGF5cywgc2Vjb25kcywgbWljcm9zZWNvbmRzLgogICAgICAgIGRheXMgKz0gd2Vla3MqNwogICAgICAgIHNlY29uZHMgKz0gbWludXRlcyo2MCArIGhvdXJzKjM2MDAKICAgICAgICBtaWNyb3NlY29uZHMgKz0gbWlsbGlzZWNvbmRzKjEwMDAKCiAgICAgICAgIyBHZXQgcmlkIG9mIGFsbCBmcmFjdGlvbnMsIGFuZCBub3JtYWxpemUgcyBhbmQgdXMuCiAgICAgICAgIyBUYWtlIGEgZGVlcCBicmVhdGggPHdpbms+LgogICAgICAgIGlmIGlzaW5zdGFuY2UoZGF5cywgZmxvYXQpOgogICAgICAgICAgICBkYXlmcmFjLCBkYXlzID0gX21hdGgubW9kZihkYXlzKQogICAgICAgICAgICBkYXlzZWNvbmRzZnJhYywgZGF5c2Vjb25kc3dob2xlID0gX21hdGgubW9kZihkYXlmcmFjICogKDI0LiozNjAwLikpCiAgICAgICAgICAgIGFzc2VydCBkYXlzZWNvbmRzd2hvbGUgPT0gaW50KGRheXNlY29uZHN3aG9sZSkgICMgY2FuJ3Qgb3ZlcmZsb3cKICAgICAgICAgICAgcyA9IGludChkYXlzZWNvbmRzd2hvbGUpCiAgICAgICAgICAgIGFzc2VydCBkYXlzID09IGludChkYXlzKQogICAgICAgICAgICBkID0gaW50KGRheXMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGF5c2Vjb25kc2ZyYWMgPSAwLjAKICAgICAgICAgICAgZCA9IGRheXMKICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShkYXlzZWNvbmRzZnJhYywgZmxvYXQpCiAgICAgICAgYXNzZXJ0IGFicyhkYXlzZWNvbmRzZnJhYykgPD0gMS4wCiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoZCwgaW50KQogICAgICAgIGFzc2VydCBhYnMocykgPD0gMjQgKiAzNjAwCiAgICAgICAgIyBkYXlzIGlzbid0IHJlZmVyZW5jZWQgYWdhaW4gYmVmb3JlIHJlZGVmaW5pdGlvbgoKICAgICAgICBpZiBpc2luc3RhbmNlKHNlY29uZHMsIGZsb2F0KToKICAgICAgICAgICAgc2Vjb25kc2ZyYWMsIHNlY29uZHMgPSBfbWF0aC5tb2RmKHNlY29uZHMpCiAgICAgICAgICAgIGFzc2VydCBzZWNvbmRzID09IGludChzZWNvbmRzKQogICAgICAgICAgICBzZWNvbmRzID0gaW50KHNlY29uZHMpCiAgICAgICAgICAgIHNlY29uZHNmcmFjICs9IGRheXNlY29uZHNmcmFjCiAgICAgICAgICAgIGFzc2VydCBhYnMoc2Vjb25kc2ZyYWMpIDw9IDIuMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlY29uZHNmcmFjID0gZGF5c2Vjb25kc2ZyYWMKICAgICAgICAjIGRheXNlY29uZHNmcmFjIGlzbid0IHJlZmVyZW5jZWQgYWdhaW4KICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShzZWNvbmRzZnJhYywgZmxvYXQpCiAgICAgICAgYXNzZXJ0IGFicyhzZWNvbmRzZnJhYykgPD0gMi4wCgogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHNlY29uZHMsIGludCkKICAgICAgICBkYXlzLCBzZWNvbmRzID0gZGl2bW9kKHNlY29uZHMsIDI0KjM2MDApCiAgICAgICAgZCArPSBkYXlzCiAgICAgICAgcyArPSBpbnQoc2Vjb25kcykgICAgIyBjYW4ndCBvdmVyZmxvdwogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHMsIGludCkKICAgICAgICBhc3NlcnQgYWJzKHMpIDw9IDIgKiAyNCAqIDM2MDAKICAgICAgICAjIHNlY29uZHMgaXNuJ3QgcmVmZXJlbmNlZCBhZ2FpbiBiZWZvcmUgcmVkZWZpbml0aW9uCgogICAgICAgIHVzZG91YmxlID0gc2Vjb25kc2ZyYWMgKiAxZTYKICAgICAgICBhc3NlcnQgYWJzKHVzZG91YmxlKSA8IDIuMWU2ICAgICMgZXhhY3QgdmFsdWUgbm90IGNyaXRpY2FsCiAgICAgICAgIyBzZWNvbmRzZnJhYyBpc24ndCByZWZlcmVuY2VkIGFnYWluCiAgICAgICAgCiAgICAgICAgaWYgaXNpbnN0YW5jZShtaWNyb3NlY29uZHMsIGZsb2F0KToKICAgICAgICAgICAgbWljcm9zZWNvbmRzICs9IHVzZG91YmxlCiAgICAgICAgICAgIG1pY3Jvc2Vjb25kcyA9IHJvdW5kKG1pY3Jvc2Vjb25kcywgMCkKICAgICAgICAgICAgc2Vjb25kcywgbWljcm9zZWNvbmRzID0gZGl2bW9kKG1pY3Jvc2Vjb25kcywgMWU2KQogICAgICAgICAgICBhc3NlcnQgbWljcm9zZWNvbmRzID09IGludChtaWNyb3NlY29uZHMpCiAgICAgICAgICAgIGFzc2VydCBzZWNvbmRzID09IGludChzZWNvbmRzKQogICAgICAgICAgICBkYXlzLCBzZWNvbmRzID0gZGl2bW9kKHNlY29uZHMsIDI0LiozNjAwLikKICAgICAgICAgICAgYXNzZXJ0IGRheXMgPT0gaW50KGRheXMpCiAgICAgICAgICAgIGFzc2VydCBzZWNvbmRzID09IGludChzZWNvbmRzKQogICAgICAgICAgICBkICs9IGludChkYXlzKQogICAgICAgICAgICBzICs9IGludChzZWNvbmRzKSAgICMgY2FuJ3Qgb3ZlcmZsb3cKICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UocywgaW50KQogICAgICAgICAgICBhc3NlcnQgYWJzKHMpIDw9IDMgKiAyNCAqIDM2MDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWNvbmRzLCBtaWNyb3NlY29uZHMgPSBkaXZtb2QobWljcm9zZWNvbmRzLCAxMDAwMDAwKQogICAgICAgICAgICBkYXlzLCBzZWNvbmRzID0gZGl2bW9kKHNlY29uZHMsIDI0KjM2MDApCiAgICAgICAgICAgIGQgKz0gZGF5cwogICAgICAgICAgICBzICs9IGludChzZWNvbmRzKSAgICAjIGNhbid0IG92ZXJmbG93CiAgICAgICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHMsIGludCkKICAgICAgICAgICAgYXNzZXJ0IGFicyhzKSA8PSAzICogMjQgKiAzNjAwCiAgICAgICAgICAgIG1pY3Jvc2Vjb25kcyA9IGZsb2F0KG1pY3Jvc2Vjb25kcykKICAgICAgICAgICAgbWljcm9zZWNvbmRzICs9IHVzZG91YmxlCiAgICAgICAgICAgIG1pY3Jvc2Vjb25kcyA9IHJvdW5kKG1pY3Jvc2Vjb25kcywgMCkKICAgICAgICBhc3NlcnQgYWJzKHMpIDw9IDMgKiAyNCAqIDM2MDAKICAgICAgICBhc3NlcnQgYWJzKG1pY3Jvc2Vjb25kcykgPCAzLjFlNgoKICAgICAgICAjIEp1c3QgYSBsaXR0bGUgYml0IG9mIGNhcnJ5aW5nIHBvc3NpYmxlIGZvciBtaWNyb3NlY29uZHMgYW5kIHNlY29uZHMuCiAgICAgICAgI2lzIHRoZSBiZWxvdyB0d28gc3RhdGVtZW50cyBldmVuIHBvc3NpYmxlPwogICAgICAgICNhc3NlcnQgaXNpbnN0YW5jZShtaWNyb3NlY29uZHMsIGZsb2F0KQogICAgICAgICNhc3NlcnQgaW50KG1pY3Jvc2Vjb25kcykgPT0gbWljcm9zZWNvbmRzCiAgICAgICAgdXMgPSBpbnQobWljcm9zZWNvbmRzKQogICAgICAgIHNlY29uZHMsIHVzID0gZGl2bW9kKHVzLCAxMDAwMDAwKQogICAgICAgIHMgKz0gc2Vjb25kcyAgICAjIGNhbnQndCBvdmVyZmxvdwogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHMsIGludCkKICAgICAgICBkYXlzLCBzID0gZGl2bW9kKHMsIDI0KjM2MDApCiAgICAgICAgZCArPSBkYXlzCgogICAgICAgIGFzc2VydCBpc2luc3RhbmNlKGQsIGludCkKICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShzLCBpbnQpIGFuZCAwIDw9IHMgPCAyNCozNjAwCiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UodXMsIGludCkgYW5kIDAgPD0gdXMgPCAxMDAwMDAwCgogICAgICAgIHNlbGYgPSBvYmplY3QuX19uZXdfXyhjbHMpCgogICAgICAgIHNlbGYuX2RheXMgPSBkCiAgICAgICAgc2VsZi5fc2Vjb25kcyA9IHMKICAgICAgICBzZWxmLl9taWNyb3NlY29uZHMgPSB1cwoKICAgICAgICBpZiBhYnMoZCkgPiA5OTk5OTk5OTk6CiAgICAgICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoInRpbWVkZWx0YSAjIG9mIGRheXMgaXMgdG9vIGxhcmdlOiAlZCIgJSBkKQoKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9taWNyb3NlY29uZHM6CiAgICAgICAgICAgIHJldHVybiAiJXMoJWQsICVkLCAlZCkiICUgKCdkYXRldGltZS4nICsgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RheXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX21pY3Jvc2Vjb25kcykKICAgICAgICBpZiBzZWxmLl9zZWNvbmRzOgogICAgICAgICAgICByZXR1cm4gIiVzKCVkLCAlZCkiICUgKCdkYXRldGltZS4nICsgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGF5cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZWNvbmRzKQogICAgICAgIHJldHVybiAiJXMoJWQpIiAlICgnZGF0ZXRpbWUuJyArIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBzZWxmLl9kYXlzKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIG1tLCBzcyA9IGRpdm1vZChzZWxmLl9zZWNvbmRzLCA2MCkKICAgICAgICBoaCwgbW0gPSBkaXZtb2QobW0sIDYwKQogICAgICAgIHMgPSAiJWQ6JTAyZDolMDJkIiAlIChoaCwgbW0sIHNzKQogICAgICAgIGlmIHNlbGYuX2RheXM6CiAgICAgICAgICAgIGRlZiBwbHVyYWwobik6CiAgICAgICAgICAgICAgICByZXR1cm4gbiwgYWJzKG4pICE9IDEgYW5kICJzIiBvciAiIgogICAgICAgICAgICBzID0gKCIlZCBkYXklcywgIiAlIHBsdXJhbChzZWxmLl9kYXlzKSkgKyBzCiAgICAgICAgaWYgc2VsZi5fbWljcm9zZWNvbmRzOgogICAgICAgICAgICBzID0gcyArICIuJTA2ZCIgJSBzZWxmLl9taWNyb3NlY29uZHMKICAgICAgICByZXR1cm4gcwoKICAgIGRlZiB0b3RhbF9zZWNvbmRzKHNlbGYpOgogICAgICAgICIiIlRvdGFsIHNlY29uZHMgaW4gdGhlIGR1cmF0aW9uLiIiIgogICAgICAgIHJldHVybiAoKHNlbGYuZGF5cyAqIDg2NDAwICsgc2VsZi5zZWNvbmRzKSoxMCoqNiArCiAgICAgICAgICAgICAgICBzZWxmLm1pY3Jvc2Vjb25kcykgLyAxMCoqNgoKICAgICMgUmVhZC1vbmx5IGZpZWxkIGFjY2Vzc29ycwogICAgQHByb3BlcnR5CiAgICBkZWYgZGF5cyhzZWxmKToKICAgICAgICAiIiJkYXlzIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX2RheXMKCiAgICBAcHJvcGVydHkKICAgIGRlZiBzZWNvbmRzKHNlbGYpOgogICAgICAgICIiInNlY29uZHMiIiIKICAgICAgICByZXR1cm4gc2VsZi5fc2Vjb25kcwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1pY3Jvc2Vjb25kcyhzZWxmKToKICAgICAgICAiIiJtaWNyb3NlY29uZHMiIiIKICAgICAgICByZXR1cm4gc2VsZi5fbWljcm9zZWNvbmRzCgogICAgZGVmIF9fYWRkX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgICMgZm9yIENQeXRob24gY29tcGF0aWJpbGl0eSwgd2UgY2Fubm90IHVzZQogICAgICAgICAgICAjIG91ciBfX2NsYXNzX18gaGVyZSwgYnV0IG5lZWQgYSByZWFsIHRpbWVkZWx0YQogICAgICAgICAgICByZXR1cm4gdGltZWRlbHRhKHNlbGYuX2RheXMgKyBvdGhlci5fZGF5cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZWNvbmRzICsgb3RoZXIuX3NlY29uZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmRzICsgb3RoZXIuX21pY3Jvc2Vjb25kcykKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBfX3JhZGRfXyA9IF9fYWRkX18KCiAgICBkZWYgX19zdWJfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgIyBmb3IgQ1B5dGhvbiBjb21wYXRpYmlsaXR5LCB3ZSBjYW5ub3QgdXNlCiAgICAgICAgICAgICMgb3VyIF9fY2xhc3NfXyBoZXJlLCBidXQgbmVlZCBhIHJlYWwgdGltZWRlbHRhCiAgICAgICAgICAgIHJldHVybiB0aW1lZGVsdGEoc2VsZi5fZGF5cyAtIG90aGVyLl9kYXlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMgLSBvdGhlci5fc2Vjb25kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZHMgLSBvdGhlci5fbWljcm9zZWNvbmRzKQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX3JzdWJfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIC1zZWxmICsgb3RoZXIKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19uZWdfXyhzZWxmKToKICAgICAgICAjIGZvciBDUHl0aG9uIGNvbXBhdGliaWxpdHksIHdlIGNhbm5vdCB1c2UKICAgICAgICAjIG91ciBfX2NsYXNzX18gaGVyZSwgYnV0IG5lZWQgYSByZWFsIHRpbWVkZWx0YQogICAgICAgIHJldHVybiB0aW1lZGVsdGEoLXNlbGYuX2RheXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAtc2VsZi5fc2Vjb25kcywKICAgICAgICAgICAgICAgICAgICAgICAgIC1zZWxmLl9taWNyb3NlY29uZHMpCgogICAgZGVmIF9fcG9zX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19hYnNfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9kYXlzIDwgMDoKICAgICAgICAgICAgcmV0dXJuIC1zZWxmCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19tdWxfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgaW50KToKICAgICAgICAgICAgIyBmb3IgQ1B5dGhvbiBjb21wYXRpYmlsaXR5LCB3ZSBjYW5ub3QgdXNlCiAgICAgICAgICAgICMgb3VyIF9fY2xhc3NfXyBoZXJlLCBidXQgbmVlZCBhIHJlYWwgdGltZWRlbHRhCiAgICAgICAgICAgIHJldHVybiB0aW1lZGVsdGEoc2VsZi5fZGF5cyAqIG90aGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMgKiBvdGhlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZHMgKiBvdGhlcikKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBmbG9hdCk6CiAgICAgICAgICAgIGEsIGIgPSBvdGhlci5hc19pbnRlZ2VyX3JhdGlvKCkKICAgICAgICAgICAgcmV0dXJuIHNlbGYgKiBhIC8gYgogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIF9fcm11bF9fID0gX19tdWxfXwoKICAgIGRlZiBfdG9fbWljcm9zZWNvbmRzKHNlbGYpOgogICAgICAgIHJldHVybiAoKHNlbGYuX2RheXMgKiAoMjQqMzYwMCkgKyBzZWxmLl9zZWNvbmRzKSAqIDEwMDAwMDAgKwogICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmRzKQoKICAgIGRlZiBfX2Zsb29yZGl2X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCAoaW50LCB0aW1lZGVsdGEpKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgdXNlYyA9IHNlbGYuX3RvX21pY3Jvc2Vjb25kcygpCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIHVzZWMgLy8gb3RoZXIuX3RvX21pY3Jvc2Vjb25kcygpCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgaW50KToKICAgICAgICAgICAgcmV0dXJuIHRpbWVkZWx0YSgwLCAwLCB1c2VjIC8vIG90aGVyKQoKICAgIGRlZiBfX3RydWVkaXZfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIChpbnQsIGZsb2F0LCB0aW1lZGVsdGEpKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgdXNlYyA9IHNlbGYuX3RvX21pY3Jvc2Vjb25kcygpCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIHVzZWMgLyBvdGhlci5fdG9fbWljcm9zZWNvbmRzKCkKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBpbnQpOgogICAgICAgICAgICByZXR1cm4gdGltZWRlbHRhKDAsIDAsIHVzZWMgLyBvdGhlcikKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBmbG9hdCk6CiAgICAgICAgICAgIGEsIGIgPSBvdGhlci5hc19pbnRlZ2VyX3JhdGlvKCkKICAgICAgICAgICAgcmV0dXJuIHRpbWVkZWx0YSgwLCAwLCBiICogdXNlYyAvIGEpCgogICAgZGVmIF9fbW9kX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHIgPSBzZWxmLl90b19taWNyb3NlY29uZHMoKSAlIG90aGVyLl90b19taWNyb3NlY29uZHMoKQogICAgICAgICAgICByZXR1cm4gdGltZWRlbHRhKDAsIDAsIHIpCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fZGl2bW9kX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHEsIHIgPSBkaXZtb2Qoc2VsZi5fdG9fbWljcm9zZWNvbmRzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXIuX3RvX21pY3Jvc2Vjb25kcygpKQogICAgICAgICAgICByZXR1cm4gcSwgdGltZWRlbHRhKDAsIDAsIHIpCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgIyBDb21wYXJpc29ucyBvZiB0aW1lZGVsdGEgb2JqZWN0cyB3aXRoIG90aGVyLgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID09IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSAhPSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA8PSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDwgMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA+PSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID4gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX2NtcChzZWxmLCBvdGhlcik6CiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSkKICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICNyZXR1cm4gX2NtcChzZWxmLl9nZXRzdGF0ZSgpLCBvdGhlci5fZ2V0c3RhdGUoKSkKICAgICAgICByZXR1cm4gX3N0YXRlX2NtcChzZWxmLl9nZXRzdGF0ZSgpLCBvdGhlci5fZ2V0c3RhdGUoKSkKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fZ2V0c3RhdGUoKSkKCiAgICBkZWYgX19ib29sX18oc2VsZik6CiAgICAgICAgcmV0dXJuIChzZWxmLl9kYXlzICE9IDAgb3IKICAgICAgICAgICAgICAgIHNlbGYuX3NlY29uZHMgIT0gMCBvcgogICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmRzICE9IDApCgogICAgIyBQaWNrbGUgc3VwcG9ydC4KCiAgICBkZWYgX2dldHN0YXRlKHNlbGYpOgogICAgICAgIHJldHVybiAoc2VsZi5fZGF5cywgc2VsZi5fc2Vjb25kcywgc2VsZi5fbWljcm9zZWNvbmRzKQoKICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYpOgogICAgICAgIHJldHVybiAoc2VsZi5fX2NsYXNzX18sIHNlbGYuX2dldHN0YXRlKCkpCgp0aW1lZGVsdGEubWluID0gdGltZWRlbHRhKC05OTk5OTk5OTkpCnRpbWVkZWx0YS5tYXggPSB0aW1lZGVsdGEoZGF5cz05OTk5OTk5OTksIGhvdXJzPTIzLCBtaW51dGVzPTU5LCBzZWNvbmRzPTU5LAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kcz05OTk5OTkpCnRpbWVkZWx0YS5yZXNvbHV0aW9uID0gdGltZWRlbHRhKG1pY3Jvc2Vjb25kcz0xKQoKY2xhc3MgZGF0ZToKICAgICIiIkNvbmNyZXRlIGRhdGUgdHlwZS4KCiAgICBDb25zdHJ1Y3RvcnM6CgogICAgX19uZXdfXygpCiAgICBmcm9tdGltZXN0YW1wKCkKICAgIHRvZGF5KCkKICAgIGZyb21vcmRpbmFsKCkKCiAgICBPcGVyYXRvcnM6CgogICAgX19yZXByX18sIF9fc3RyX18KICAgIF9fY21wX18sIF9faGFzaF9fCiAgICBfX2FkZF9fLCBfX3JhZGRfXywgX19zdWJfXyAoYWRkL3JhZGQgb25seSB3aXRoIHRpbWVkZWx0YSBhcmcpCgogICAgTWV0aG9kczoKCiAgICB0aW1ldHVwbGUoKQogICAgdG9vcmRpbmFsKCkKICAgIHdlZWtkYXkoKQogICAgaXNvd2Vla2RheSgpLCBpc29jYWxlbmRhcigpLCBpc29mb3JtYXQoKQogICAgY3RpbWUoKQogICAgc3RyZnRpbWUoKQoKICAgIFByb3BlcnRpZXMgKHJlYWRvbmx5KToKICAgIHllYXIsIG1vbnRoLCBkYXkKICAgICIiIgogICAgX19zbG90c19fID0gJ195ZWFyJywgJ19tb250aCcsICdfZGF5JwoKICAgIGRlZiBfX25ld19fKGNscywgeWVhciwgbW9udGg9Tm9uZSwgZGF5PU5vbmUpOgogICAgICAgICIiIkNvbnN0cnVjdG9yLgoKICAgICAgICBBcmd1bWVudHM6CgogICAgICAgIHllYXIsIG1vbnRoLCBkYXkgKHJlcXVpcmVkLCBiYXNlIDEpCiAgICAgICAgIiIiCiAgICAgICAgaWYgKGlzaW5zdGFuY2UoeWVhciwgYnl0ZXMpIGFuZCBsZW4oeWVhcikgPT0gNCBhbmQKICAgICAgICAgICAgMSA8PSB5ZWFyWzJdIDw9IDEyIGFuZCBtb250aCBpcyBOb25lKTogICMgTW9udGggaXMgc2FuZQogICAgICAgICAgICAjIFBpY2tsZSBzdXBwb3J0CiAgICAgICAgICAgIHNlbGYgPSBvYmplY3QuX19uZXdfXyhjbHMpCiAgICAgICAgICAgIHNlbGYuX19zZXRzdGF0ZSh5ZWFyKQogICAgICAgICAgICByZXR1cm4gc2VsZgogICAgICAgIF9jaGVja19kYXRlX2ZpZWxkcyh5ZWFyLCBtb250aCwgZGF5KQogICAgICAgIHNlbGYgPSBvYmplY3QuX19uZXdfXyhjbHMpCiAgICAgICAgc2VsZi5feWVhciA9IHllYXIKICAgICAgICBzZWxmLl9tb250aCA9IG1vbnRoCiAgICAgICAgc2VsZi5fZGF5ID0gZGF5CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICAjIEFkZGl0aW9uYWwgY29uc3RydWN0b3JzCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbXRpbWVzdGFtcChjbHMsIHQpOgogICAgICAgICJDb25zdHJ1Y3QgYSBkYXRlIGZyb20gYSBQT1NJWCB0aW1lc3RhbXAgKGxpa2UgdGltZS50aW1lKCkpLiIKICAgICAgICB5LCBtLCBkLCBoaCwgbW0sIHNzLCB3ZWVrZGF5LCBqZGF5LCBkc3QgPSBfdGltZS5sb2NhbHRpbWUodCkKICAgICAgICByZXR1cm4gY2xzKHksIG0sIGQpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgdG9kYXkoY2xzKToKICAgICAgICAiQ29uc3RydWN0IGEgZGF0ZSBmcm9tIHRpbWUudGltZSgpLiIKICAgICAgICB0ID0gX3RpbWUudGltZSgpCiAgICAgICAgcmV0dXJuIGNscy5mcm9tdGltZXN0YW1wKHQpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbW9yZGluYWwoY2xzLCBuKToKICAgICAgICAiIiJDb250cnVjdCBhIGRhdGUgZnJvbSBhIHByb2xlcHRpYyBHcmVnb3JpYW4gb3JkaW5hbC4KCiAgICAgICAgSmFudWFyeSAxIG9mIHllYXIgMSBpcyBkYXkgMS4gIE9ubHkgdGhlIHllYXIsIG1vbnRoIGFuZCBkYXkgYXJlCiAgICAgICAgbm9uLXplcm8gaW4gdGhlIHJlc3VsdC4KICAgICAgICAiIiIKICAgICAgICB5LCBtLCBkID0gX29yZDJ5bWQobikKICAgICAgICByZXR1cm4gY2xzKHksIG0sIGQpCgogICAgIyBDb252ZXJzaW9ucyB0byBzdHJpbmcKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgIiIiQ29udmVydCB0byBmb3JtYWwgc3RyaW5nLCBmb3IgcmVwcigpLgoKICAgICAgICA+Pj4gZHQgPSBkYXRldGltZSgyMDEwLCAxLCAxKQogICAgICAgID4+PiByZXByKGR0KQogICAgICAgICdkYXRldGltZS5kYXRldGltZSgyMDEwLCAxLCAxLCAwLCAwKScKCiAgICAgICAgPj4+IGR0ID0gZGF0ZXRpbWUoMjAxMCwgMSwgMSwgdHppbmZvPXRpbWV6b25lLnV0YykKICAgICAgICA+Pj4gcmVwcihkdCkKICAgICAgICAnZGF0ZXRpbWUuZGF0ZXRpbWUoMjAxMCwgMSwgMSwgMCwgMCwgdHppbmZvPWRhdGV0aW1lLnRpbWV6b25lLnV0YyknCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuICIlcyglZCwgJWQsICVkKSIgJSAoJ2RhdGV0aW1lLicgKyBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl95ZWFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX21vbnRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RheSkKICAgICMgWFhYIFRoZXNlIHNob3VsZG4ndCBkZXBlbmQgb24gdGltZS5sb2NhbHRpbWUoKSwgYmVjYXVzZSB0aGF0CiAgICAjIGNsaXBzIHRoZSB1c2FibGUgZGF0ZXMgdG8gWzE5NzAgLi4gMjAzOCkuICBBdCBsZWFzdCBjdGltZSgpIGlzCiAgICAjIGVhc2lseSBkb25lIHdpdGhvdXQgdXNpbmcgc3RyZnRpbWUoKSAtLSB0aGF0J3MgYmV0dGVyIHRvbyBiZWNhdXNlCiAgICAjIHN0cmZ0aW1lKCIlYyIsIC4uLikgaXMgbG9jYWxlIHNwZWNpZmljLgoKCiAgICBkZWYgY3RpbWUoc2VsZik6CiAgICAgICAgIlJldHVybiBjdGltZSgpIHN0eWxlIHN0cmluZy4iCiAgICAgICAgd2Vla2RheSA9IHNlbGYudG9vcmRpbmFsKCkgJSA3IG9yIDcKICAgICAgICByZXR1cm4gIiVzICVzICUyZCAwMDowMDowMCAlMDRkIiAlICgKICAgICAgICAgICAgX0RBWU5BTUVTW3dlZWtkYXldLAogICAgICAgICAgICBfTU9OVEhOQU1FU1tzZWxmLl9tb250aF0sCiAgICAgICAgICAgIHNlbGYuX2RheSwgc2VsZi5feWVhcikKCiAgICBkZWYgc3RyZnRpbWUoc2VsZiwgZm10KToKICAgICAgICAiRm9ybWF0IHVzaW5nIHN0cmZ0aW1lKCkuIgogICAgICAgIHJldHVybiBfd3JhcF9zdHJmdGltZShzZWxmLCBmbXQsIHNlbGYudGltZXR1cGxlKCkpCgogICAgZGVmIF9fZm9ybWF0X18oc2VsZiwgZm10KToKICAgICAgICBpZiBsZW4oZm10KSAhPSAwOgogICAgICAgICAgICByZXR1cm4gc2VsZi5zdHJmdGltZShmbXQpCiAgICAgICAgcmV0dXJuIHN0cihzZWxmKQoKICAgIGRlZiBpc29mb3JtYXQoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIHRoZSBkYXRlIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gSVNPLgoKICAgICAgICBUaGlzIGlzICdZWVlZLU1NLUREJy4KCiAgICAgICAgUmVmZXJlbmNlczoKICAgICAgICAtIGh0dHA6Ly93d3cudzMub3JnL1RSL05PVEUtZGF0ZXRpbWUKICAgICAgICAtIGh0dHA6Ly93d3cuY2wuY2FtLmFjLnVrL35tZ2syNS9pc28tdGltZS5odG1sCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuICIlMDRkLSUwMmQtJTAyZCIgJSAoc2VsZi5feWVhciwgc2VsZi5fbW9udGgsIHNlbGYuX2RheSkKCiAgICBfX3N0cl9fID0gaXNvZm9ybWF0CgogICAgIyBSZWFkLW9ubHkgZmllbGQgYWNjZXNzb3JzCiAgICBAcHJvcGVydHkKICAgIGRlZiB5ZWFyKHNlbGYpOgogICAgICAgICIiInllYXIgKDEtOTk5OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5feWVhcgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1vbnRoKHNlbGYpOgogICAgICAgICIiIm1vbnRoICgxLTEyKSIiIgogICAgICAgIHJldHVybiBzZWxmLl9tb250aAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGRheShzZWxmKToKICAgICAgICAiIiJkYXkgKDEtMzEpIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX2RheQoKICAgICMgU3RhbmRhcmQgY29udmVyc2lvbnMsIF9fY21wX18sIF9faGFzaF9fIChhbmQgaGVscGVycykKCiAgICBkZWYgdGltZXR1cGxlKHNlbGYpOgogICAgICAgICJSZXR1cm4gbG9jYWwgdGltZSB0dXBsZSBjb21wYXRpYmxlIHdpdGggdGltZS5sb2NhbHRpbWUoKS4iCiAgICAgICAgcmV0dXJuIF9idWlsZF9zdHJ1Y3RfdGltZShzZWxmLl95ZWFyLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwgMCwgMCwgLTEpCgogICAgZGVmIHRvb3JkaW5hbChzZWxmKToKICAgICAgICAiIiJSZXR1cm4gcHJvbGVwdGljIEdyZWdvcmlhbiBvcmRpbmFsIGZvciB0aGUgeWVhciwgbW9udGggYW5kIGRheS4KCiAgICAgICAgSmFudWFyeSAxIG9mIHllYXIgMSBpcyBkYXkgMS4gIE9ubHkgdGhlIHllYXIsIG1vbnRoIGFuZCBkYXkgdmFsdWVzCiAgICAgICAgY29udHJpYnV0ZSB0byB0aGUgcmVzdWx0LgogICAgICAgICIiIgogICAgICAgIHJldHVybiBfeW1kMm9yZChzZWxmLl95ZWFyLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5KQoKICAgIGRlZiByZXBsYWNlKHNlbGYsIHllYXI9Tm9uZSwgbW9udGg9Tm9uZSwgZGF5PU5vbmUpOgogICAgICAgICIiIlJldHVybiBhIG5ldyBkYXRlIHdpdGggbmV3IHZhbHVlcyBmb3IgdGhlIHNwZWNpZmllZCBmaWVsZHMuIiIiCiAgICAgICAgaWYgeWVhciBpcyBOb25lOgogICAgICAgICAgICB5ZWFyID0gc2VsZi5feWVhcgogICAgICAgIGlmIG1vbnRoIGlzIE5vbmU6CiAgICAgICAgICAgIG1vbnRoID0gc2VsZi5fbW9udGgKICAgICAgICBpZiBkYXkgaXMgTm9uZToKICAgICAgICAgICAgZGF5ID0gc2VsZi5fZGF5CiAgICAgICAgX2NoZWNrX2RhdGVfZmllbGRzKHllYXIsIG1vbnRoLCBkYXkpCiAgICAgICAgcmV0dXJuIGRhdGUoeWVhciwgbW9udGgsIGRheSkKCiAgICAjIENvbXBhcmlzb25zIG9mIGRhdGUgb2JqZWN0cyB3aXRoIG90aGVyLgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA9PSAwCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgZGF0ZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpICE9IDAKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPD0gMAogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA8IDAKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPj0gMAogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fY21wKG90aGVyKSA+IDAKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICBkZWYgX2NtcChzZWxmLCBvdGhlcik6CiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpCiAgICAgICAgeSwgbSwgZCA9IHNlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXkKICAgICAgICB5MiwgbTIsIGQyID0gb3RoZXIuX3llYXIsIG90aGVyLl9tb250aCwgb3RoZXIuX2RheQogICAgICAgICNmaXhtZSBicnl0aG9uCiAgICAgICAgI3JldHVybiBfY21wKCh5LCBtLCBkKSwgKHkyLCBtMiwgZDIpKQogICAgICAgIHJldHVybiBfc3RhdGVfY21wKCh5LCBtLCBkKSwgKHkyLCBtMiwgZDIpKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICAiSGFzaC4iCiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fZ2V0c3RhdGUoKSkKCiAgICAjIENvbXB1dGF0aW9ucwoKICAgIGRlZiBfX2FkZF9fKHNlbGYsIG90aGVyKToKICAgICAgICAiQWRkIGEgZGF0ZSB0byBhIHRpbWVkZWx0YS4iCiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgbyA9IHNlbGYudG9vcmRpbmFsKCkgKyBvdGhlci5kYXlzCiAgICAgICAgICAgIGlmIDAgPCBvIDw9IF9NQVhPUkRJTkFMOgogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGUuZnJvbW9yZGluYWwobykKICAgICAgICAgICAgcmFpc2UgT3ZlcmZsb3dFcnJvcigicmVzdWx0IG91dCBvZiByYW5nZSIpCiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgX19yYWRkX18gPSBfX2FkZF9fCgogICAgZGVmIF9fc3ViX18oc2VsZiwgb3RoZXIpOgogICAgICAgICIiIlN1YnRyYWN0IHR3byBkYXRlcywgb3IgYSBkYXRlIGFuZCBhIHRpbWVkZWx0YS4iIiIKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpOgogICAgICAgICAgICByZXR1cm4gc2VsZiArIHRpbWVkZWx0YSgtb3RoZXIuZGF5cykKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgZGF5czEgPSBzZWxmLnRvb3JkaW5hbCgpCiAgICAgICAgICAgIGRheXMyID0gb3RoZXIudG9vcmRpbmFsKCkKICAgICAgICAgICAgcmV0dXJuIHRpbWVkZWx0YShkYXlzMSAtIGRheXMyKQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgIGRlZiB3ZWVrZGF5KHNlbGYpOgogICAgICAgICJSZXR1cm4gZGF5IG9mIHRoZSB3ZWVrLCB3aGVyZSBNb25kYXkgPT0gMCAuLi4gU3VuZGF5ID09IDYuIgogICAgICAgIHJldHVybiAoc2VsZi50b29yZGluYWwoKSArIDYpICUgNwoKICAgICMgRGF5LW9mLXRoZS13ZWVrIGFuZCB3ZWVrLW9mLXRoZS15ZWFyLCBhY2NvcmRpbmcgdG8gSVNPCgogICAgZGVmIGlzb3dlZWtkYXkoc2VsZik6CiAgICAgICAgIlJldHVybiBkYXkgb2YgdGhlIHdlZWssIHdoZXJlIE1vbmRheSA9PSAxIC4uLiBTdW5kYXkgPT0gNy4iCiAgICAgICAgIyAxLUphbi0wMDAxIGlzIGEgTW9uZGF5CiAgICAgICAgcmV0dXJuIHNlbGYudG9vcmRpbmFsKCkgJSA3IG9yIDcKCiAgICBkZWYgaXNvY2FsZW5kYXIoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGEgMy10dXBsZSBjb250YWluaW5nIElTTyB5ZWFyLCB3ZWVrIG51bWJlciwgYW5kIHdlZWtkYXkuCgogICAgICAgIFRoZSBmaXJzdCBJU08gd2VlayBvZiB0aGUgeWVhciBpcyB0aGUgKE1vbi1TdW4pIHdlZWsKICAgICAgICBjb250YWluaW5nIHRoZSB5ZWFyJ3MgZmlyc3QgVGh1cnNkYXk7IGV2ZXJ5dGhpbmcgZWxzZSBkZXJpdmVzCiAgICAgICAgZnJvbSB0aGF0LgoKICAgICAgICBUaGUgZmlyc3Qgd2VlayBpcyAxOyBNb25kYXkgaXMgMSAuLi4gU3VuZGF5IGlzIDcuCgogICAgICAgIElTTyBjYWxlbmRhciBhbGdvcml0aG0gdGFrZW4gZnJvbQogICAgICAgIGh0dHA6Ly93d3cucGh5cy51dS5ubC9+dmdlbnQvY2FsZW5kYXIvaXNvY2FsZW5kYXIuaHRtCiAgICAgICAgIiIiCiAgICAgICAgeWVhciA9IHNlbGYuX3llYXIKICAgICAgICB3ZWVrMW1vbmRheSA9IF9pc293ZWVrMW1vbmRheSh5ZWFyKQogICAgICAgIHRvZGF5ID0gX3ltZDJvcmQoc2VsZi5feWVhciwgc2VsZi5fbW9udGgsIHNlbGYuX2RheSkKICAgICAgICAjIEludGVybmFsbHksIHdlZWsgYW5kIGRheSBoYXZlIG9yaWdpbiAwCiAgICAgICAgd2VlaywgZGF5ID0gZGl2bW9kKHRvZGF5IC0gd2VlazFtb25kYXksIDcpCiAgICAgICAgaWYgd2VlayA8IDA6CiAgICAgICAgICAgIHllYXIgLT0gMQogICAgICAgICAgICB3ZWVrMW1vbmRheSA9IF9pc293ZWVrMW1vbmRheSh5ZWFyKQogICAgICAgICAgICB3ZWVrLCBkYXkgPSBkaXZtb2QodG9kYXkgLSB3ZWVrMW1vbmRheSwgNykKICAgICAgICBlbGlmIHdlZWsgPj0gNTI6CiAgICAgICAgICAgIGlmIHRvZGF5ID49IF9pc293ZWVrMW1vbmRheSh5ZWFyKzEpOgogICAgICAgICAgICAgICAgeWVhciArPSAxCiAgICAgICAgICAgICAgICB3ZWVrID0gMAogICAgICAgIHJldHVybiB5ZWFyLCB3ZWVrKzEsIGRheSsxCgogICAgIyBQaWNrbGUgc3VwcG9ydC4KCiAgICBkZWYgX2dldHN0YXRlKHNlbGYpOgogICAgICAgIHloaSwgeWxvID0gZGl2bW9kKHNlbGYuX3llYXIsIDI1NikKICAgICAgICByZXR1cm4gYnl0ZXMoW3loaSwgeWxvLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5XSksCgogICAgZGVmIF9fc2V0c3RhdGUoc2VsZiwgc3RyaW5nKToKICAgICAgICBpZiBsZW4oc3RyaW5nKSAhPSA0IG9yIG5vdCAoMSA8PSBzdHJpbmdbMl0gPD0gMTIpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm5vdCBlbm91Z2ggYXJndW1lbnRzIikKICAgICAgICB5aGksIHlsbywgc2VsZi5fbW9udGgsIHNlbGYuX2RheSA9IHN0cmluZwogICAgICAgIHNlbGYuX3llYXIgPSB5aGkgKiAyNTYgKyB5bG8KCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCBzZWxmLl9nZXRzdGF0ZSgpKQoKX2RhdGVfY2xhc3MgPSBkYXRlICAjIHNvIGZ1bmN0aW9ucyB3LyBhcmdzIG5hbWVkICJkYXRlIiBjYW4gZ2V0IGF0IHRoZSBjbGFzcwoKZGF0ZS5taW4gPSBkYXRlKDEsIDEsIDEpCmRhdGUubWF4ID0gZGF0ZSg5OTk5LCAxMiwgMzEpCmRhdGUucmVzb2x1dGlvbiA9IHRpbWVkZWx0YShkYXlzPTEpCgpjbGFzcyB0emluZm86CiAgICAiIiJBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciB0aW1lIHpvbmUgaW5mbyBjbGFzc2VzLgoKICAgIFN1YmNsYXNzZXMgbXVzdCBvdmVycmlkZSB0aGUgbmFtZSgpLCB1dGNvZmZzZXQoKSBhbmQgZHN0KCkgbWV0aG9kcy4KICAgICIiIgogICAgX19zbG90c19fID0gKCkKICAgIGRlZiB0em5hbWUoc2VsZiwgZHQpOgogICAgICAgICJkYXRldGltZSAtPiBzdHJpbmcgbmFtZSBvZiB0aW1lIHpvbmUuIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoInR6aW5mbyBzdWJjbGFzcyBtdXN0IG92ZXJyaWRlIHR6bmFtZSgpIikKCiAgICBkZWYgdXRjb2Zmc2V0KHNlbGYsIGR0KToKICAgICAgICAiZGF0ZXRpbWUgLT4gbWludXRlcyBlYXN0IG9mIFVUQyAobmVnYXRpdmUgZm9yIHdlc3Qgb2YgVVRDKSIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJ0emluZm8gc3ViY2xhc3MgbXVzdCBvdmVycmlkZSB1dGNvZmZzZXQoKSIpCgogICAgZGVmIGRzdChzZWxmLCBkdCk6CiAgICAgICAgIiIiZGF0ZXRpbWUgLT4gRFNUIG9mZnNldCBpbiBtaW51dGVzIGVhc3Qgb2YgVVRDLgoKICAgICAgICBSZXR1cm4gMCBpZiBEU1Qgbm90IGluIGVmZmVjdC4gIHV0Y29mZnNldCgpIG11c3QgaW5jbHVkZSB0aGUgRFNUCiAgICAgICAgb2Zmc2V0LgogICAgICAgICIiIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoInR6aW5mbyBzdWJjbGFzcyBtdXN0IG92ZXJyaWRlIGRzdCgpIikKCiAgICBkZWYgZnJvbXV0YyhzZWxmLCBkdCk6CiAgICAgICAgImRhdGV0aW1lIGluIFVUQyAtPiBkYXRldGltZSBpbiBsb2NhbCB0aW1lLiIKCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZHQsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJmcm9tdXRjKCkgcmVxdWlyZXMgYSBkYXRldGltZSBhcmd1bWVudCIpCiAgICAgICAgaWYgZHQudHppbmZvIGlzIG5vdCBzZWxmOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkdC50emluZm8gaXMgbm90IHNlbGYiKQoKICAgICAgICBkdG9mZiA9IGR0LnV0Y29mZnNldCgpCiAgICAgICAgaWYgZHRvZmYgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZnJvbXV0YygpIHJlcXVpcmVzIGEgbm9uLU5vbmUgdXRjb2Zmc2V0KCkgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJyZXN1bHQiKQoKICAgICAgICAjIFNlZSB0aGUgbG9uZyBjb21tZW50IGJsb2NrIGF0IHRoZSBlbmQgb2YgdGhpcyBmaWxlIGZvciBhbgogICAgICAgICMgZXhwbGFuYXRpb24gb2YgdGhpcyBhbGdvcml0aG0uCiAgICAgICAgZHRkc3QgPSBkdC5kc3QoKQogICAgICAgIGlmIGR0ZHN0IGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImZyb211dGMoKSByZXF1aXJlcyBhIG5vbi1Ob25lIGRzdCgpIHJlc3VsdCIpCiAgICAgICAgZGVsdGEgPSBkdG9mZiAtIGR0ZHN0CiAgICAgICAgaWYgZGVsdGE6CiAgICAgICAgICAgIGR0ICs9IGRlbHRhCiAgICAgICAgICAgIGR0ZHN0ID0gZHQuZHN0KCkKICAgICAgICAgICAgaWYgZHRkc3QgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImZyb211dGMoKTogZHQuZHN0IGdhdmUgaW5jb25zaXN0ZW50ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInJlc3VsdHM7IGNhbm5vdCBjb252ZXJ0IikKICAgICAgICByZXR1cm4gZHQgKyBkdGRzdAoKICAgICMgUGlja2xlIHN1cHBvcnQuCgogICAgZGVmIF9fcmVkdWNlX18oc2VsZik6CiAgICAgICAgZ2V0aW5pdGFyZ3MgPSBnZXRhdHRyKHNlbGYsICJfX2dldGluaXRhcmdzX18iLCBOb25lKQogICAgICAgIGlmIGdldGluaXRhcmdzOgogICAgICAgICAgICBhcmdzID0gZ2V0aW5pdGFyZ3MoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFyZ3MgPSAoKQogICAgICAgIGdldHN0YXRlID0gZ2V0YXR0cihzZWxmLCAiX19nZXRzdGF0ZV9fIiwgTm9uZSkKICAgICAgICBpZiBnZXRzdGF0ZToKICAgICAgICAgICAgc3RhdGUgPSBnZXRzdGF0ZSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc3RhdGUgPSBnZXRhdHRyKHNlbGYsICJfX2RpY3RfXyIsIE5vbmUpIG9yIE5vbmUKICAgICAgICBpZiBzdGF0ZSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCBhcmdzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAoc2VsZi5fX2NsYXNzX18sIGFyZ3MsIHN0YXRlKQoKX3R6aW5mb19jbGFzcyA9IHR6aW5mbwoKY2xhc3MgdGltZToKICAgICIiIlRpbWUgd2l0aCB0aW1lIHpvbmUuCgogICAgQ29uc3RydWN0b3JzOgoKICAgIF9fbmV3X18oKQoKICAgIE9wZXJhdG9yczoKCiAgICBfX3JlcHJfXywgX19zdHJfXwogICAgX19jbXBfXywgX19oYXNoX18KCiAgICBNZXRob2RzOgoKICAgIHN0cmZ0aW1lKCkKICAgIGlzb2Zvcm1hdCgpCiAgICB1dGNvZmZzZXQoKQogICAgdHpuYW1lKCkKICAgIGRzdCgpCgogICAgUHJvcGVydGllcyAocmVhZG9ubHkpOgogICAgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pY3Jvc2Vjb25kLCB0emluZm8KICAgICIiIgoKICAgIGRlZiBfX25ld19fKGNscywgaG91cj0wLCBtaW51dGU9MCwgc2Vjb25kPTAsIG1pY3Jvc2Vjb25kPTAsIHR6aW5mbz1Ob25lKToKICAgICAgICAiIiJDb25zdHJ1Y3Rvci4KCiAgICAgICAgQXJndW1lbnRzOgoKICAgICAgICBob3VyLCBtaW51dGUgKHJlcXVpcmVkKQogICAgICAgIHNlY29uZCwgbWljcm9zZWNvbmQgKGRlZmF1bHQgdG8gemVybykKICAgICAgICB0emluZm8gKGRlZmF1bHQgdG8gTm9uZSkKICAgICAgICAiIiIKICAgICAgICBzZWxmID0gb2JqZWN0Ll9fbmV3X18oY2xzKQogICAgICAgIGlmIGlzaW5zdGFuY2UoaG91ciwgYnl0ZXMpIGFuZCBsZW4oaG91cikgPT0gNjoKICAgICAgICAgICAgIyBQaWNrbGUgc3VwcG9ydAogICAgICAgICAgICBzZWxmLl9fc2V0c3RhdGUoaG91ciwgbWludXRlIG9yIE5vbmUpCiAgICAgICAgICAgIHJldHVybiBzZWxmCiAgICAgICAgX2NoZWNrX3R6aW5mb19hcmcodHppbmZvKQogICAgICAgIF9jaGVja190aW1lX2ZpZWxkcyhob3VyLCBtaW51dGUsIHNlY29uZCwgbWljcm9zZWNvbmQpCiAgICAgICAgc2VsZi5faG91ciA9IGhvdXIKICAgICAgICBzZWxmLl9taW51dGUgPSBtaW51dGUKICAgICAgICBzZWxmLl9zZWNvbmQgPSBzZWNvbmQKICAgICAgICBzZWxmLl9taWNyb3NlY29uZCA9IG1pY3Jvc2Vjb25kCiAgICAgICAgc2VsZi5fdHppbmZvID0gdHppbmZvCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICAjIFJlYWQtb25seSBmaWVsZCBhY2Nlc3NvcnMKICAgIEBwcm9wZXJ0eQogICAgZGVmIGhvdXIoc2VsZik6CiAgICAgICAgIiIiaG91ciAoMC0yMykiIiIKICAgICAgICByZXR1cm4gc2VsZi5faG91cgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1pbnV0ZShzZWxmKToKICAgICAgICAiIiJtaW51dGUgKDAtNTkpIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX21pbnV0ZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHNlY29uZChzZWxmKToKICAgICAgICAiIiJzZWNvbmQgKDAtNTkpIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX3NlY29uZAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1pY3Jvc2Vjb25kKHNlbGYpOgogICAgICAgICIiIm1pY3Jvc2Vjb25kICgwLTk5OTk5OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5fbWljcm9zZWNvbmQKCiAgICBAcHJvcGVydHkKICAgIGRlZiB0emluZm8oc2VsZik6CiAgICAgICAgIiIidGltZXpvbmUgaW5mbyBvYmplY3QiIiIKICAgICAgICByZXR1cm4gc2VsZi5fdHppbmZvCgogICAgIyBTdGFuZGFyZCBjb252ZXJzaW9ucywgX19oYXNoX18gKGFuZCBoZWxwZXJzKQoKICAgICMgQ29tcGFyaXNvbnMgb2YgdGltZSBvYmplY3RzIHdpdGggb3RoZXIuCgogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID09IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgIT0gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIF9fbGVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDw9IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBfY21wZXJyb3Ioc2VsZiwgb3RoZXIpCgogICAgZGVmIF9fbHRfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgdGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDwgMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPj0gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19ndF9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCB0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPiAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfY21wKHNlbGYsIG90aGVyKToKICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShvdGhlciwgdGltZSkKICAgICAgICBteXR6ID0gc2VsZi5fdHppbmZvCiAgICAgICAgb3R0eiA9IG90aGVyLl90emluZm8KICAgICAgICBteW9mZiA9IG90b2ZmID0gTm9uZQoKICAgICAgICBpZiBteXR6IGlzIG90dHo6CiAgICAgICAgICAgIGJhc2VfY29tcGFyZSA9IFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBteW9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICAgICAgb3RvZmYgPSBvdGhlci51dGNvZmZzZXQoKQogICAgICAgICAgICBiYXNlX2NvbXBhcmUgPSBteW9mZiA9PSBvdG9mZgoKICAgICAgICBpZiBiYXNlX2NvbXBhcmU6CiAgICAgICAgICAgICNmaXhtZSBicnl0aG9uCiAgICAgICAgICAgICNyZXR1cm4gX2NtcCgoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICMgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpLAogICAgICAgICAgICAjICAgICAgICAgICAob3RoZXIuX2hvdXIsIG90aGVyLl9taW51dGUsIG90aGVyLl9zZWNvbmQsCiAgICAgICAgICAgICMgICAgICAgICAgICBvdGhlci5fbWljcm9zZWNvbmQpKQogICAgICAgICAgICByZXR1cm4gX3R1cGxlX2NtcCgoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZCksCiAgICAgICAgICAgICAgICAgICAgICAgKG90aGVyLl9ob3VyLCBvdGhlci5fbWludXRlLCBvdGhlci5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICBvdGhlci5fbWljcm9zZWNvbmQpKQogICAgICAgIGlmIG15b2ZmIGlzIE5vbmUgb3Igb3RvZmYgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYW5ub3QgY29tcGFyZSBuYWl2ZSBhbmQgYXdhcmUgdGltZXMiKQogICAgICAgIG15aGhtbSA9IHNlbGYuX2hvdXIgKiA2MCArIHNlbGYuX21pbnV0ZSAtIG15b2ZmLy90aW1lZGVsdGEobWludXRlcz0xKQogICAgICAgIG90aGhtbSA9IG90aGVyLl9ob3VyICogNjAgKyBvdGhlci5fbWludXRlIC0gb3RvZmYvL3RpbWVkZWx0YShtaW51dGVzPTEpCiAgICAgICAgI2ZpeG1lIGJyeXRob24KICAgICAgICAjcmV0dXJuIF9jbXAoKG15aGhtbSwgc2VsZi5fc2Vjb25kLCBzZWxmLl9taWNyb3NlY29uZCksCiAgICAgICAgIyAgICAgICAgICAgIChvdGhobW0sIG90aGVyLl9zZWNvbmQsIG90aGVyLl9taWNyb3NlY29uZCkpCiAgICAgICAgcmV0dXJuIF90dXBsZV9jbXAoKG15aGhtbSwgc2VsZi5fc2Vjb25kLCBzZWxmLl9taWNyb3NlY29uZCksCiAgICAgICAgICAgICAgICAgICAgKG90aGhtbSwgb3RoZXIuX3NlY29uZCwgb3RoZXIuX21pY3Jvc2Vjb25kKSkKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgIiIiSGFzaC4iIiIKICAgICAgICB0em9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBpZiBub3QgdHpvZmY6ICMgemVybyBvciBOb25lCiAgICAgICAgICAgIHJldHVybiBoYXNoKHNlbGYuX2dldHN0YXRlKClbMF0pCiAgICAgICAgaCwgbSA9IGRpdm1vZCh0aW1lZGVsdGEoaG91cnM9c2VsZi5ob3VyLCBtaW51dGVzPXNlbGYubWludXRlKSAtIHR6b2ZmLAogICAgICAgICAgICAgICAgICAgICAgdGltZWRlbHRhKGhvdXJzPTEpKQogICAgICAgIGFzc2VydCBub3QgbSAlIHRpbWVkZWx0YShtaW51dGVzPTEpLCAid2hvbGUgbWludXRlIgogICAgICAgIG0gLy89IHRpbWVkZWx0YShtaW51dGVzPTEpCiAgICAgICAgaWYgMCA8PSBoIDwgMjQ6CiAgICAgICAgICAgIHJldHVybiBoYXNoKHRpbWUoaCwgbSwgc2VsZi5zZWNvbmQsIHNlbGYubWljcm9zZWNvbmQpKQogICAgICAgIHJldHVybiBoYXNoKChoLCBtLCBzZWxmLnNlY29uZCwgc2VsZi5taWNyb3NlY29uZCkpCgogICAgIyBDb252ZXJzaW9uIHRvIHN0cmluZwoKICAgIGRlZiBfdHpzdHIoc2VsZiwgc2VwPSI6Iik6CiAgICAgICAgIiIiUmV0dXJuIGZvcm1hdHRlZCB0aW1lem9uZSBvZmZzZXQgKCt4eDp4eCkgb3IgTm9uZS4iIiIKICAgICAgICBvZmYgPSBzZWxmLnV0Y29mZnNldCgpCiAgICAgICAgaWYgb2ZmIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBvZmYuZGF5cyA8IDA6CiAgICAgICAgICAgICAgICBzaWduID0gIi0iCiAgICAgICAgICAgICAgICBvZmYgPSAtb2ZmCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzaWduID0gIisiCiAgICAgICAgICAgIGhoLCBtbSA9IGRpdm1vZChvZmYsIHRpbWVkZWx0YShob3Vycz0xKSkKICAgICAgICAgICAgYXNzZXJ0IG5vdCBtbSAlIHRpbWVkZWx0YShtaW51dGVzPTEpLCAid2hvbGUgbWludXRlIgogICAgICAgICAgICBtbSAvLz0gdGltZWRlbHRhKG1pbnV0ZXM9MSkKICAgICAgICAgICAgYXNzZXJ0IDAgPD0gaGggPCAyNAogICAgICAgICAgICBvZmYgPSAiJXMlMDJkJXMlMDJkIiAlIChzaWduLCBoaCwgc2VwLCBtbSkKICAgICAgICByZXR1cm4gb2ZmCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgICIiIkNvbnZlcnQgdG8gZm9ybWFsIHN0cmluZywgZm9yIHJlcHIoKS4iIiIKICAgICAgICBpZiBzZWxmLl9taWNyb3NlY29uZCAhPSAwOgogICAgICAgICAgICBzID0gIiwgJWQsICVkIiAlIChzZWxmLl9zZWNvbmQsIHNlbGYuX21pY3Jvc2Vjb25kKQogICAgICAgIGVsaWYgc2VsZi5fc2Vjb25kICE9IDA6CiAgICAgICAgICAgIHMgPSAiLCAlZCIgJSBzZWxmLl9zZWNvbmQKICAgICAgICBlbHNlOgogICAgICAgICAgICBzID0gIiIKICAgICAgICBzPSAiJXMoJWQsICVkJXMpIiAlICgnZGF0ZXRpbWUuJyArIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgcykKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGFzc2VydCBzWy0xOl0gPT0gIikiCiAgICAgICAgICAgIHMgPSBzWzotMV0gKyAiLCB0emluZm89JXIiICUgc2VsZi5fdHppbmZvICsgIikiCiAgICAgICAgcmV0dXJuIHMKCiAgICBkZWYgaXNvZm9ybWF0KHNlbGYpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZSBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIElTTy4KCiAgICAgICAgVGhpcyBpcyAnSEg6TU06U1MubW1tbW1tK3p6Onp6Jywgb3IgJ0hIOk1NOlNTK3p6Onp6JyBpZgogICAgICAgIHNlbGYubWljcm9zZWNvbmQgPT0gMC4KICAgICAgICAiIiIKICAgICAgICBzID0gX2Zvcm1hdF90aW1lKHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgc2VsZi5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpCiAgICAgICAgdHogPSBzZWxmLl90enN0cigpCiAgICAgICAgaWYgdHo6CiAgICAgICAgICAgIHMgKz0gdHoKICAgICAgICByZXR1cm4gcwoKICAgIF9fc3RyX18gPSBpc29mb3JtYXQKCiAgICBkZWYgc3RyZnRpbWUoc2VsZiwgZm10KToKICAgICAgICAiIiJGb3JtYXQgdXNpbmcgc3RyZnRpbWUoKS4gIFRoZSBkYXRlIHBhcnQgb2YgdGhlIHRpbWVzdGFtcCBwYXNzZWQKICAgICAgICB0byB1bmRlcmx5aW5nIHN0cmZ0aW1lIHNob3VsZCBub3QgYmUgdXNlZC4KICAgICAgICAiIiIKICAgICAgICAjIFRoZSB5ZWFyIG11c3QgYmUgPj0gMTAwMCBlbHNlIFB5dGhvbidzIHN0cmZ0aW1lIGltcGxlbWVudGF0aW9uCiAgICAgICAgIyBjYW4gcmFpc2UgYSBib2d1cyBleGNlcHRpb24uCiAgICAgICAgdGltZXR1cGxlID0gKDE5MDAsIDEsIDEsCiAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgc2VsZi5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAwLCAxLCAtMSkKICAgICAgICByZXR1cm4gX3dyYXBfc3RyZnRpbWUoc2VsZiwgZm10LCB0aW1ldHVwbGUpCgogICAgZGVmIF9fZm9ybWF0X18oc2VsZiwgZm10KToKICAgICAgICBpZiBsZW4oZm10KSAhPSAwOgogICAgICAgICAgICByZXR1cm4gc2VsZi5zdHJmdGltZShmbXQpCiAgICAgICAgcmV0dXJuIHN0cihzZWxmKQoKICAgICMgVGltZXpvbmUgZnVuY3Rpb25zCgogICAgZGVmIHV0Y29mZnNldChzZWxmKToKICAgICAgICAiIiJSZXR1cm4gdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaW51dGVzIGVhc3Qgb2YgVVRDIChuZWdhdGl2ZSB3ZXN0IG9mCiAgICAgICAgVVRDKS4iIiIKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBvZmZzZXQgPSBzZWxmLl90emluZm8udXRjb2Zmc2V0KE5vbmUpCiAgICAgICAgX2NoZWNrX3V0Y19vZmZzZXQoInV0Y29mZnNldCIsIG9mZnNldCkKICAgICAgICByZXR1cm4gb2Zmc2V0CgogICAgZGVmIHR6bmFtZShzZWxmKToKICAgICAgICAiIiJSZXR1cm4gdGhlIHRpbWV6b25lIG5hbWUuCgogICAgICAgIE5vdGUgdGhhdCB0aGUgbmFtZSBpcyAxMDAlIGluZm9ybWF0aW9uYWwgLS0gdGhlcmUncyBubyByZXF1aXJlbWVudCB0aGF0CiAgICAgICAgaXQgbWVhbiBhbnl0aGluZyBpbiBwYXJ0aWN1bGFyLiBGb3IgZXhhbXBsZSwgIkdNVCIsICJVVEMiLCAiLTUwMCIsCiAgICAgICAgIi01OjAwIiwgIkVEVCIsICJVUy9FYXN0ZXJuIiwgIkFtZXJpY2EvTmV3IFlvcmsiIGFyZSBhbGwgdmFsaWQgcmVwbGllcy4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBuYW1lID0gc2VsZi5fdHppbmZvLnR6bmFtZShOb25lKQogICAgICAgIF9jaGVja190em5hbWUobmFtZSkKICAgICAgICByZXR1cm4gbmFtZQoKICAgIGRlZiBkc3Qoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIDAgaWYgRFNUIGlzIG5vdCBpbiBlZmZlY3QsIG9yIHRoZSBEU1Qgb2Zmc2V0IChpbiBtaW51dGVzCiAgICAgICAgZWFzdHdhcmQpIGlmIERTVCBpcyBpbiBlZmZlY3QuCgogICAgICAgIFRoaXMgaXMgcHVyZWx5IGluZm9ybWF0aW9uYWw7IHRoZSBEU1Qgb2Zmc2V0IGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQgdG8KICAgICAgICB0aGUgVVRDIG9mZnNldCByZXR1cm5lZCBieSB1dGNvZmZzZXQoKSBpZiBhcHBsaWNhYmxlLCBzbyB0aGVyZSdzIG5vCiAgICAgICAgbmVlZCB0byBjb25zdWx0IGRzdCgpIHVubGVzcyB5b3UncmUgaW50ZXJlc3RlZCBpbiBkaXNwbGF5aW5nIHRoZSBEU1QKICAgICAgICBpbmZvLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIG9mZnNldCA9IHNlbGYuX3R6aW5mby5kc3QoTm9uZSkKICAgICAgICBfY2hlY2tfdXRjX29mZnNldCgiZHN0Iiwgb2Zmc2V0KQogICAgICAgIHJldHVybiBvZmZzZXQKCiAgICBkZWYgcmVwbGFjZShzZWxmLCBob3VyPU5vbmUsIG1pbnV0ZT1Ob25lLCBzZWNvbmQ9Tm9uZSwgbWljcm9zZWNvbmQ9Tm9uZSwKICAgICAgICAgICAgICAgIHR6aW5mbz1UcnVlKToKICAgICAgICAiIiJSZXR1cm4gYSBuZXcgdGltZSB3aXRoIG5ldyB2YWx1ZXMgZm9yIHRoZSBzcGVjaWZpZWQgZmllbGRzLiIiIgogICAgICAgIGlmIGhvdXIgaXMgTm9uZToKICAgICAgICAgICAgaG91ciA9IHNlbGYuaG91cgogICAgICAgIGlmIG1pbnV0ZSBpcyBOb25lOgogICAgICAgICAgICBtaW51dGUgPSBzZWxmLm1pbnV0ZQogICAgICAgIGlmIHNlY29uZCBpcyBOb25lOgogICAgICAgICAgICBzZWNvbmQgPSBzZWxmLnNlY29uZAogICAgICAgIGlmIG1pY3Jvc2Vjb25kIGlzIE5vbmU6CiAgICAgICAgICAgIG1pY3Jvc2Vjb25kID0gc2VsZi5taWNyb3NlY29uZAogICAgICAgIGlmIHR6aW5mbyBpcyBUcnVlOgogICAgICAgICAgICB0emluZm8gPSBzZWxmLnR6aW5mbwogICAgICAgIF9jaGVja190aW1lX2ZpZWxkcyhob3VyLCBtaW51dGUsIHNlY29uZCwgbWljcm9zZWNvbmQpCiAgICAgICAgX2NoZWNrX3R6aW5mb19hcmcodHppbmZvKQogICAgICAgIHJldHVybiB0aW1lKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWNyb3NlY29uZCwgdHppbmZvKQoKICAgIGRlZiBfX2Jvb2xfXyhzZWxmKToKICAgICAgICBpZiBzZWxmLnNlY29uZCBvciBzZWxmLm1pY3Jvc2Vjb25kOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIG9mZnNldCA9IHNlbGYudXRjb2Zmc2V0KCkgb3IgdGltZWRlbHRhKDApCiAgICAgICAgcmV0dXJuIHRpbWVkZWx0YShob3Vycz1zZWxmLmhvdXIsIG1pbnV0ZXM9c2VsZi5taW51dGUpICE9IG9mZnNldAoKICAgICMgUGlja2xlIHN1cHBvcnQuCgogICAgZGVmIF9nZXRzdGF0ZShzZWxmKToKICAgICAgICB1czIsIHVzMyA9IGRpdm1vZChzZWxmLl9taWNyb3NlY29uZCwgMjU2KQogICAgICAgIHVzMSwgdXMyID0gZGl2bW9kKHVzMiwgMjU2KQogICAgICAgIGJhc2VzdGF0ZSA9IGJ5dGVzKFtzZWxmLl9ob3VyLCBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgdXMxLCB1czIsIHVzM10pCiAgICAgICAgaWYgc2VsZi5fdHppbmZvIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiAoYmFzZXN0YXRlLCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gKGJhc2VzdGF0ZSwgc2VsZi5fdHppbmZvKQoKICAgIGRlZiBfX3NldHN0YXRlKHNlbGYsIHN0cmluZywgdHppbmZvKToKICAgICAgICBpZiBsZW4oc3RyaW5nKSAhPSA2IG9yIHN0cmluZ1swXSA+PSAyNDoKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJhbiBpbnRlZ2VyIGlzIHJlcXVpcmVkIikKICAgICAgICAoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgIHVzMSwgdXMyLCB1czMpID0gc3RyaW5nCiAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQgPSAoKCh1czEgPDwgOCkgfCB1czIpIDw8IDgpIHwgdXMzCiAgICAgICAgaWYgdHppbmZvIGlzIE5vbmUgb3IgaXNpbnN0YW5jZSh0emluZm8sIF90emluZm9fY2xhc3MpOgogICAgICAgICAgICBzZWxmLl90emluZm8gPSB0emluZm8KICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImJhZCB0emluZm8gc3RhdGUgYXJnICVyIiAlIHR6aW5mbykKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHRpbWUsIHNlbGYuX2dldHN0YXRlKCkpCgpfdGltZV9jbGFzcyA9IHRpbWUgICMgc28gZnVuY3Rpb25zIHcvIGFyZ3MgbmFtZWQgInRpbWUiIGNhbiBnZXQgYXQgdGhlIGNsYXNzCgp0aW1lLm1pbiA9IHRpbWUoMCwgMCwgMCkKdGltZS5tYXggPSB0aW1lKDIzLCA1OSwgNTksIDk5OTk5OSkKdGltZS5yZXNvbHV0aW9uID0gdGltZWRlbHRhKG1pY3Jvc2Vjb25kcz0xKQoKY2xhc3MgZGF0ZXRpbWUoZGF0ZSk6CiAgICAiIiJkYXRldGltZSh5ZWFyLCBtb250aCwgZGF5WywgaG91clssIG1pbnV0ZVssIHNlY29uZFssIG1pY3Jvc2Vjb25kWyx0emluZm9dXV1dXSkKCiAgICBUaGUgeWVhciwgbW9udGggYW5kIGRheSBhcmd1bWVudHMgYXJlIHJlcXVpcmVkLiB0emluZm8gbWF5IGJlIE5vbmUsIG9yIGFuCiAgICBpbnN0YW5jZSBvZiBhIHR6aW5mbyBzdWJjbGFzcy4gVGhlIHJlbWFpbmluZyBhcmd1bWVudHMgbWF5IGJlIGludHMgb3IgbG9uZ3MuCiAgICAiIiIKCiAgICAjZml4bWUgYnJ5dGhvbgogICAgI19fc2xvdHNfXyA9IGRhdGUuX19zbG90c19fICsgKAogICAgX19zbG90c19fID0gKCdfeWVhcicsICdfbW9udGgnLCAnX2RheScsIAogICAgICAgICAgICAgICAgICdfaG91cicsJ19taW51dGUnLCdfc2Vjb25kJywnX21pY3Jvc2Vjb25kJywnX3R6aW5mbycpCiAgICBkZWYgX19uZXdfXyhjbHMsIHllYXIsIG1vbnRoPU5vbmUsIGRheT1Ob25lLCBob3VyPTAsIG1pbnV0ZT0wLCBzZWNvbmQ9MCwKICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kPTAsIHR6aW5mbz1Ob25lKToKICAgICAgICAgICAgIAogICAgICAgIGlmIGlzaW5zdGFuY2UoeWVhciwgYnl0ZXMpIGFuZCBsZW4oeWVhcikgPT0gMTA6CiAgICAgICAgICAgICMgUGlja2xlIHN1cHBvcnQKICAgICAgICAgICAgc2VsZiA9IGRhdGUuX19uZXdfXyhjbHMsIHllYXJbOjRdKQogICAgICAgICAgICBzZWxmLl9fc2V0c3RhdGUoeWVhciwgbW9udGgpCiAgICAgICAgICAgIHJldHVybiBzZWxmCiAgICAgICAgX2NoZWNrX3R6aW5mb19hcmcodHppbmZvKQogICAgICAgIF9jaGVja190aW1lX2ZpZWxkcyhob3VyLCBtaW51dGUsIHNlY29uZCwgbWljcm9zZWNvbmQpCiAgICAgICAgI3ByaW50KGRpcihkYXRlKSkKICAgICAgICBzZWxmID0gZGF0ZS5fX25ld19fKGNscywgeWVhciwgbW9udGgsIGRheSkKICAgICAgICBzZWxmLl9ob3VyID0gaG91cgogICAgICAgIHNlbGYuX21pbnV0ZSA9IG1pbnV0ZQogICAgICAgIHNlbGYuX3NlY29uZCA9IHNlY29uZAogICAgICAgIHNlbGYuX21pY3Jvc2Vjb25kID0gbWljcm9zZWNvbmQKICAgICAgICBzZWxmLl90emluZm8gPSB0emluZm8KICAgICAgICByZXR1cm4gc2VsZgoKICAgICMgUmVhZC1vbmx5IGZpZWxkIGFjY2Vzc29ycwogICAgQHByb3BlcnR5CiAgICBkZWYgaG91cihzZWxmKToKICAgICAgICAiIiJob3VyICgwLTIzKSIiIgogICAgICAgIHJldHVybiBzZWxmLl9ob3VyCgogICAgQHByb3BlcnR5CiAgICBkZWYgbWludXRlKHNlbGYpOgogICAgICAgICIiIm1pbnV0ZSAoMC01OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5fbWludXRlCgogICAgQHByb3BlcnR5CiAgICBkZWYgc2Vjb25kKHNlbGYpOgogICAgICAgICIiInNlY29uZCAoMC01OSkiIiIKICAgICAgICByZXR1cm4gc2VsZi5fc2Vjb25kCgogICAgQHByb3BlcnR5CiAgICBkZWYgbWljcm9zZWNvbmQoc2VsZik6CiAgICAgICAgIiIibWljcm9zZWNvbmQgKDAtOTk5OTk5KSIiIgogICAgICAgIHJldHVybiBzZWxmLl9taWNyb3NlY29uZAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHR6aW5mbyhzZWxmKToKICAgICAgICAiIiJ0aW1lem9uZSBpbmZvIG9iamVjdCIiIgogICAgICAgIHJldHVybiBzZWxmLl90emluZm8KCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tdGltZXN0YW1wKGNscywgdCwgdHo9Tm9uZSk6CiAgICAgICAgIiIiQ29uc3RydWN0IGEgZGF0ZXRpbWUgZnJvbSBhIFBPU0lYIHRpbWVzdGFtcCAobGlrZSB0aW1lLnRpbWUoKSkuCgogICAgICAgIEEgdGltZXpvbmUgaW5mbyBvYmplY3QgbWF5IGJlIHBhc3NlZCBpbiBhcyB3ZWxsLgogICAgICAgICIiIgogICAgICAgIF9jaGVja190emluZm9fYXJnKHR6KQoKICAgICAgICBjb252ZXJ0ZXIgPSBfdGltZS5sb2NhbHRpbWUgaWYgdHogaXMgTm9uZSBlbHNlIF90aW1lLmdtdGltZQoKICAgICAgICB0LCBmcmFjID0gZGl2bW9kKHQsIDEuMCkKICAgICAgICB1cyA9IHJvdW5kKGZyYWMgKiAxZTYpCgogICAgICAgICMgSWYgdGltZXN0YW1wIGlzIGxlc3MgdGhhbiBvbmUgbWljcm9zZWNvbmQgc21hbGxlciB0aGFuIGEKICAgICAgICAjIGZ1bGwgc2Vjb25kLCB1cyBjYW4gYmUgcm91bmRlZCB1cCB0byAxMDAwMDAwLiAgSW4gdGhpcyBjYXNlLAogICAgICAgICMgcm9sbCBvdmVyIHRvIHNlY29uZHMsIG90aGVyd2lzZSwgVmFsdWVFcnJvciBpcyByYWlzZWQKICAgICAgICAjIGJ5IHRoZSBjb25zdHJ1Y3Rvci4KICAgICAgICBpZiB1cyA9PSAxMDAwMDAwOgogICAgICAgICAgICB0ICs9IDEKICAgICAgICAgICAgdXMgPSAwCiAgICAgICAgeSwgbSwgZCwgaGgsIG1tLCBzcywgd2Vla2RheSwgamRheSwgZHN0ID0gY29udmVydGVyKHQpCiAgICAgICAgc3MgPSBtaW4oc3MsIDU5KSAgICAjIGNsYW1wIG91dCBsZWFwIHNlY29uZHMgaWYgdGhlIHBsYXRmb3JtIGhhcyB0aGVtCiAgICAgICAgcmVzdWx0ID0gY2xzKHksIG0sIGQsIGhoLCBtbSwgc3MsIHVzLCB0eikKICAgICAgICBpZiB0eiBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmVzdWx0ID0gdHouZnJvbXV0YyhyZXN1bHQpCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHV0Y2Zyb210aW1lc3RhbXAoY2xzLCB0KToKICAgICAgICAiQ29uc3RydWN0IGEgVVRDIGRhdGV0aW1lIGZyb20gYSBQT1NJWCB0aW1lc3RhbXAgKGxpa2UgdGltZS50aW1lKCkpLiIKICAgICAgICB0LCBmcmFjID0gZGl2bW9kKHQsIDEuMCkKICAgICAgICB1cyA9IHJvdW5kKGZyYWMgKiAxZTYpCgogICAgICAgICMgSWYgdGltZXN0YW1wIGlzIGxlc3MgdGhhbiBvbmUgbWljcm9zZWNvbmQgc21hbGxlciB0aGFuIGEKICAgICAgICAjIGZ1bGwgc2Vjb25kLCB1cyBjYW4gYmUgcm91bmRlZCB1cCB0byAxMDAwMDAwLiAgSW4gdGhpcyBjYXNlLAogICAgICAgICMgcm9sbCBvdmVyIHRvIHNlY29uZHMsIG90aGVyd2lzZSwgVmFsdWVFcnJvciBpcyByYWlzZWQKICAgICAgICAjIGJ5IHRoZSBjb25zdHJ1Y3Rvci4KICAgICAgICBpZiB1cyA9PSAxMDAwMDAwOgogICAgICAgICAgICB0ICs9IDEKICAgICAgICAgICAgdXMgPSAwCiAgICAgICAgeSwgbSwgZCwgaGgsIG1tLCBzcywgd2Vla2RheSwgamRheSwgZHN0ID0gX3RpbWUuZ210aW1lKHQpCiAgICAgICAgc3MgPSBtaW4oc3MsIDU5KSAgICAjIGNsYW1wIG91dCBsZWFwIHNlY29uZHMgaWYgdGhlIHBsYXRmb3JtIGhhcyB0aGVtCiAgICAgICAgcmV0dXJuIGNscyh5LCBtLCBkLCBoaCwgbW0sIHNzLCB1cykKCiAgICAjIFhYWCBUaGlzIGlzIHN1cHBvc2VkIHRvIGRvIGJldHRlciB0aGFuIHdlICpjYW4qIGRvIGJ5IHVzaW5nIHRpbWUudGltZSgpLAogICAgIyBYWFggaWYgdGhlIHBsYXRmb3JtIHN1cHBvcnRzIGEgbW9yZSBhY2N1cmF0ZSB3YXkuICBUaGUgQyBpbXBsZW1lbnRhdGlvbgogICAgIyBYWFggdXNlcyBnZXR0aW1lb2ZkYXkgb24gcGxhdGZvcm1zIHRoYXQgaGF2ZSBpdCwgYnV0IHRoYXQgaXNuJ3QKICAgICMgWFhYIGF2YWlsYWJsZSBmcm9tIFB5dGhvbi4gIFNvIG5vdygpIG1heSByZXR1cm4gZGlmZmVyZW50IHJlc3VsdHMKICAgICMgWFhYIGFjcm9zcyB0aGUgaW1wbGVtZW50YXRpb25zLgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgbm93KGNscywgdHo9Tm9uZSk6CiAgICAgICAgIkNvbnN0cnVjdCBhIGRhdGV0aW1lIGZyb20gdGltZS50aW1lKCkgYW5kIG9wdGlvbmFsIHRpbWUgem9uZSBpbmZvLiIKICAgICAgICB0ID0gX3RpbWUudGltZSgpCiAgICAgICAgcmV0dXJuIGNscy5mcm9tdGltZXN0YW1wKHQsIHR6KQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHV0Y25vdyhjbHMpOgogICAgICAgICJDb25zdHJ1Y3QgYSBVVEMgZGF0ZXRpbWUgZnJvbSB0aW1lLnRpbWUoKS4iCiAgICAgICAgdCA9IF90aW1lLnRpbWUoKQogICAgICAgIHJldHVybiBjbHMudXRjZnJvbXRpbWVzdGFtcCh0KQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGNvbWJpbmUoY2xzLCBkYXRlLCB0aW1lKToKICAgICAgICAiQ29uc3RydWN0IGEgZGF0ZXRpbWUgZnJvbSBhIGdpdmVuIGRhdGUgYW5kIGEgZ2l2ZW4gdGltZS4iCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZGF0ZSwgX2RhdGVfY2xhc3MpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImRhdGUgYXJndW1lbnQgbXVzdCBiZSBhIGRhdGUgaW5zdGFuY2UiKQogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHRpbWUsIF90aW1lX2NsYXNzKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ0aW1lIGFyZ3VtZW50IG11c3QgYmUgYSB0aW1lIGluc3RhbmNlIikKICAgICAgICByZXR1cm4gY2xzKGRhdGUueWVhciwgZGF0ZS5tb250aCwgZGF0ZS5kYXksCiAgICAgICAgICAgICAgICAgICB0aW1lLmhvdXIsIHRpbWUubWludXRlLCB0aW1lLnNlY29uZCwgdGltZS5taWNyb3NlY29uZCwKICAgICAgICAgICAgICAgICAgIHRpbWUudHppbmZvKQoKICAgIGRlZiB0aW1ldHVwbGUoc2VsZik6CiAgICAgICAgIlJldHVybiBsb2NhbCB0aW1lIHR1cGxlIGNvbXBhdGlibGUgd2l0aCB0aW1lLmxvY2FsdGltZSgpLiIKICAgICAgICBkc3QgPSBzZWxmLmRzdCgpCiAgICAgICAgaWYgZHN0IGlzIE5vbmU6CiAgICAgICAgICAgIGRzdCA9IC0xCiAgICAgICAgZWxpZiBkc3Q6CiAgICAgICAgICAgIGRzdCA9IDEKICAgICAgICBlbHNlOgogICAgICAgICAgICBkc3QgPSAwCiAgICAgICAgcmV0dXJuIF9idWlsZF9zdHJ1Y3RfdGltZShzZWxmLnllYXIsIHNlbGYubW9udGgsIHNlbGYuZGF5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyLCBzZWxmLm1pbnV0ZSwgc2VsZi5zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3QpCgogICAgZGVmIHV0Y3RpbWV0dXBsZShzZWxmKToKICAgICAgICAiUmV0dXJuIFVUQyB0aW1lIHR1cGxlIGNvbXBhdGlibGUgd2l0aCB0aW1lLmdtdGltZSgpLiIKICAgICAgICBvZmZzZXQgPSBzZWxmLnV0Y29mZnNldCgpCiAgICAgICAgaWYgb2Zmc2V0OgogICAgICAgICAgICBzZWxmIC09IG9mZnNldAogICAgICAgIHksIG0sIGQgPSBzZWxmLnllYXIsIHNlbGYubW9udGgsIHNlbGYuZGF5CiAgICAgICAgaGgsIG1tLCBzcyA9IHNlbGYuaG91ciwgc2VsZi5taW51dGUsIHNlbGYuc2Vjb25kCiAgICAgICAgcmV0dXJuIF9idWlsZF9zdHJ1Y3RfdGltZSh5LCBtLCBkLCBoaCwgbW0sIHNzLCAwKQoKICAgIGRlZiBkYXRlKHNlbGYpOgogICAgICAgICJSZXR1cm4gdGhlIGRhdGUgcGFydC4iCiAgICAgICAgcmV0dXJuIGRhdGUoc2VsZi5feWVhciwgc2VsZi5fbW9udGgsIHNlbGYuX2RheSkKCiAgICBkZWYgdGltZShzZWxmKToKICAgICAgICAiUmV0dXJuIHRoZSB0aW1lIHBhcnQsIHdpdGggdHppbmZvIE5vbmUuIgogICAgICAgIHJldHVybiB0aW1lKHNlbGYuaG91ciwgc2VsZi5taW51dGUsIHNlbGYuc2Vjb25kLCBzZWxmLm1pY3Jvc2Vjb25kKQoKICAgIGRlZiB0aW1ldHooc2VsZik6CiAgICAgICAgIlJldHVybiB0aGUgdGltZSBwYXJ0LCB3aXRoIHNhbWUgdHppbmZvLiIKICAgICAgICByZXR1cm4gdGltZShzZWxmLmhvdXIsIHNlbGYubWludXRlLCBzZWxmLnNlY29uZCwgc2VsZi5taWNyb3NlY29uZCwKICAgICAgICAgICAgICAgICAgICBzZWxmLl90emluZm8pCgogICAgZGVmIHJlcGxhY2Uoc2VsZiwgeWVhcj1Ob25lLCBtb250aD1Ob25lLCBkYXk9Tm9uZSwgaG91cj1Ob25lLAogICAgICAgICAgICAgICAgbWludXRlPU5vbmUsIHNlY29uZD1Ob25lLCBtaWNyb3NlY29uZD1Ob25lLCB0emluZm89VHJ1ZSk6CiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IGRhdGV0aW1lIHdpdGggbmV3IHZhbHVlcyBmb3IgdGhlIHNwZWNpZmllZCBmaWVsZHMuIiIiCiAgICAgICAgaWYgeWVhciBpcyBOb25lOgogICAgICAgICAgICB5ZWFyID0gc2VsZi55ZWFyCiAgICAgICAgaWYgbW9udGggaXMgTm9uZToKICAgICAgICAgICAgbW9udGggPSBzZWxmLm1vbnRoCiAgICAgICAgaWYgZGF5IGlzIE5vbmU6CiAgICAgICAgICAgIGRheSA9IHNlbGYuZGF5CiAgICAgICAgaWYgaG91ciBpcyBOb25lOgogICAgICAgICAgICBob3VyID0gc2VsZi5ob3VyCiAgICAgICAgaWYgbWludXRlIGlzIE5vbmU6CiAgICAgICAgICAgIG1pbnV0ZSA9IHNlbGYubWludXRlCiAgICAgICAgaWYgc2Vjb25kIGlzIE5vbmU6CiAgICAgICAgICAgIHNlY29uZCA9IHNlbGYuc2Vjb25kCiAgICAgICAgaWYgbWljcm9zZWNvbmQgaXMgTm9uZToKICAgICAgICAgICAgbWljcm9zZWNvbmQgPSBzZWxmLm1pY3Jvc2Vjb25kCiAgICAgICAgaWYgdHppbmZvIGlzIFRydWU6CiAgICAgICAgICAgIHR6aW5mbyA9IHNlbGYudHppbmZvCiAgICAgICAgX2NoZWNrX2RhdGVfZmllbGRzKHllYXIsIG1vbnRoLCBkYXkpCiAgICAgICAgX2NoZWNrX3RpbWVfZmllbGRzKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWNyb3NlY29uZCkKICAgICAgICBfY2hlY2tfdHppbmZvX2FyZyh0emluZm8pCiAgICAgICAgcmV0dXJuIGRhdGV0aW1lKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kLCB0emluZm8pCgogICAgZGVmIGFzdGltZXpvbmUoc2VsZiwgdHopOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHR6LCB0emluZm8pOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInR6IGFyZ3VtZW50IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgdHppbmZvIikKCiAgICAgICAgbXl0eiA9IHNlbGYudHppbmZvCiAgICAgICAgaWYgbXl0eiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJhc3RpbWV6b25lKCkgcmVxdWlyZXMgYW4gYXdhcmUgZGF0ZXRpbWUiKQoKICAgICAgICBpZiB0eiBpcyBteXR6OgogICAgICAgICAgICByZXR1cm4gc2VsZgoKICAgICAgICAjIENvbnZlcnQgc2VsZiB0byBVVEMsIGFuZCBhdHRhY2ggdGhlIG5ldyB0aW1lIHpvbmUgb2JqZWN0LgogICAgICAgIG15b2Zmc2V0ID0gc2VsZi51dGNvZmZzZXQoKQogICAgICAgIGlmIG15b2Zmc2V0IGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImFzdGltZXpvbmUoKSByZXF1aXJlcyBhbiBhd2FyZSBkYXRldGltZSIpCiAgICAgICAgdXRjID0gKHNlbGYgLSBteW9mZnNldCkucmVwbGFjZSh0emluZm89dHopCgogICAgICAgICMgQ29udmVydCBmcm9tIFVUQyB0byB0eidzIGxvY2FsIHRpbWUuCiAgICAgICAgcmV0dXJuIHR6LmZyb211dGModXRjKQoKICAgICMgV2F5cyB0byBwcm9kdWNlIGEgc3RyaW5nLgoKICAgIGRlZiBjdGltZShzZWxmKToKICAgICAgICAiUmV0dXJuIGN0aW1lKCkgc3R5bGUgc3RyaW5nLiIKICAgICAgICB3ZWVrZGF5ID0gc2VsZi50b29yZGluYWwoKSAlIDcgb3IgNwogICAgICAgIHJldHVybiAiJXMgJXMgJTJkICUwMmQ6JTAyZDolMDJkICUwNGQiICUgKAogICAgICAgICAgICBfREFZTkFNRVNbd2Vla2RheV0sCiAgICAgICAgICAgIF9NT05USE5BTUVTW3NlbGYuX21vbnRoXSwKICAgICAgICAgICAgc2VsZi5fZGF5LAogICAgICAgICAgICBzZWxmLl9ob3VyLCBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwKICAgICAgICAgICAgc2VsZi5feWVhcikKCiAgICBkZWYgaXNvZm9ybWF0KHNlbGYsIHNlcD0nVCcpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZSBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIElTTy4KCiAgICAgICAgVGhpcyBpcyAnWVlZWS1NTS1ERCBISDpNTTpTUy5tbW1tbW0nLCBvciAnWVlZWS1NTS1ERCBISDpNTTpTUycgaWYKICAgICAgICBzZWxmLm1pY3Jvc2Vjb25kID09IDAuCgogICAgICAgIElmIHNlbGYudHppbmZvIGlzIG5vdCBOb25lLCB0aGUgVVRDIG9mZnNldCBpcyBhbHNvIGF0dGFjaGVkLCBnaXZpbmcKICAgICAgICAnWVlZWS1NTS1ERCBISDpNTTpTUy5tbW1tbW0rSEg6TU0nIG9yICdZWVlZLU1NLUREIEhIOk1NOlNTK0hIOk1NJy4KCiAgICAgICAgT3B0aW9uYWwgYXJndW1lbnQgc2VwIHNwZWNpZmllcyB0aGUgc2VwYXJhdG9yIGJldHdlZW4gZGF0ZSBhbmQKICAgICAgICB0aW1lLCBkZWZhdWx0ICdUJy4KICAgICAgICAiIiIKICAgICAgICBzID0gKCIlMDRkLSUwMmQtJTAyZCVjIiAlIChzZWxmLl95ZWFyLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwKSArCiAgICAgICAgICAgICAgICBfZm9ybWF0X3RpbWUoc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpKQogICAgICAgIG9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBpZiBvZmYgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIG9mZi5kYXlzIDwgMDoKICAgICAgICAgICAgICAgIHNpZ24gPSAiLSIKICAgICAgICAgICAgICAgIG9mZiA9IC1vZmYKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNpZ24gPSAiKyIKICAgICAgICAgICAgaGgsIG1tID0gZGl2bW9kKG9mZiwgdGltZWRlbHRhKGhvdXJzPTEpKQogICAgICAgICAgICBhc3NlcnQgbm90IG1tICUgdGltZWRlbHRhKG1pbnV0ZXM9MSksICJ3aG9sZSBtaW51dGUiCiAgICAgICAgICAgIG1tIC8vPSB0aW1lZGVsdGEobWludXRlcz0xKQogICAgICAgICAgICBzICs9ICIlcyUwMmQ6JTAyZCIgJSAoc2lnbiwgaGgsIG1tKQogICAgICAgIHJldHVybiBzCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgICIiIkNvbnZlcnQgdG8gZm9ybWFsIHN0cmluZywgZm9yIHJlcHIoKS4iIiIKICAgICAgICBMID0gW3NlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXksICMgVGhlc2UgYXJlIG5ldmVyIHplcm8KICAgICAgICAgICAgIHNlbGYuX2hvdXIsIHNlbGYuX21pbnV0ZSwgc2VsZi5fc2Vjb25kLCBzZWxmLl9taWNyb3NlY29uZF0KICAgICAgICBpZiBMWy0xXSA9PSAwOgogICAgICAgICAgICBkZWwgTFstMV0KICAgICAgICBpZiBMWy0xXSA9PSAwOgogICAgICAgICAgICBkZWwgTFstMV0KICAgICAgICBzID0gIiwgIi5qb2luKG1hcChzdHIsIEwpKQogICAgICAgIHMgPSAiJXMoJXMpIiAlICgnZGF0ZXRpbWUuJyArIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBzKQogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBub3QgTm9uZToKICAgICAgICAgICAgYXNzZXJ0IHNbLTE6XSA9PSAiKSIKICAgICAgICAgICAgcyA9IHNbOi0xXSArICIsIHR6aW5mbz0lciIgJSBzZWxmLl90emluZm8gKyAiKSIKICAgICAgICByZXR1cm4gcwoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgICJDb252ZXJ0IHRvIHN0cmluZywgZm9yIHN0cigpLiIKICAgICAgICByZXR1cm4gc2VsZi5pc29mb3JtYXQoc2VwPScgJykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBzdHJwdGltZShjbHMsIGRhdGVfc3RyaW5nLCBmb3JtYXQpOgogICAgICAgICdzdHJpbmcsIGZvcm1hdCAtPiBuZXcgZGF0ZXRpbWUgcGFyc2VkIGZyb20gYSBzdHJpbmcgKGxpa2UgdGltZS5zdHJwdGltZSgpKS4nCiAgICAgICAgaW1wb3J0IF9zdHJwdGltZQogICAgICAgIHJldHVybiBfc3RycHRpbWUuX3N0cnB0aW1lX2RhdGV0aW1lKGNscywgZGF0ZV9zdHJpbmcsIGZvcm1hdCkKCiAgICBkZWYgdXRjb2Zmc2V0KHNlbGYpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZXpvbmUgb2Zmc2V0IGluIG1pbnV0ZXMgZWFzdCBvZiBVVEMgKG5lZ2F0aXZlIHdlc3Qgb2YKICAgICAgICBVVEMpLiIiIgogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIG9mZnNldCA9IHNlbGYuX3R6aW5mby51dGNvZmZzZXQoc2VsZikKICAgICAgICBfY2hlY2tfdXRjX29mZnNldCgidXRjb2Zmc2V0Iiwgb2Zmc2V0KQogICAgICAgIHJldHVybiBvZmZzZXQKCiAgICBkZWYgdHpuYW1lKHNlbGYpOgogICAgICAgICIiIlJldHVybiB0aGUgdGltZXpvbmUgbmFtZS4KCiAgICAgICAgTm90ZSB0aGF0IHRoZSBuYW1lIGlzIDEwMCUgaW5mb3JtYXRpb25hbCAtLSB0aGVyZSdzIG5vIHJlcXVpcmVtZW50IHRoYXQKICAgICAgICBpdCBtZWFuIGFueXRoaW5nIGluIHBhcnRpY3VsYXIuIEZvciBleGFtcGxlLCAiR01UIiwgIlVUQyIsICItNTAwIiwKICAgICAgICAiLTU6MDAiLCAiRURUIiwgIlVTL0Vhc3Rlcm4iLCAiQW1lcmljYS9OZXcgWW9yayIgYXJlIGFsbCB2YWxpZCByZXBsaWVzLgogICAgICAgICIiIgogICAgICAgIG5hbWUgPSBfY2FsbF90emluZm9fbWV0aG9kKHNlbGYuX3R6aW5mbywgInR6bmFtZSIsIHNlbGYpCiAgICAgICAgX2NoZWNrX3R6bmFtZShuYW1lKQogICAgICAgIHJldHVybiBuYW1lCgogICAgZGVmIGRzdChzZWxmKToKICAgICAgICAiIiJSZXR1cm4gMCBpZiBEU1QgaXMgbm90IGluIGVmZmVjdCwgb3IgdGhlIERTVCBvZmZzZXQgKGluIG1pbnV0ZXMKICAgICAgICBlYXN0d2FyZCkgaWYgRFNUIGlzIGluIGVmZmVjdC4KCiAgICAgICAgVGhpcyBpcyBwdXJlbHkgaW5mb3JtYXRpb25hbDsgdGhlIERTVCBvZmZzZXQgaGFzIGFscmVhZHkgYmVlbiBhZGRlZCB0bwogICAgICAgIHRoZSBVVEMgb2Zmc2V0IHJldHVybmVkIGJ5IHV0Y29mZnNldCgpIGlmIGFwcGxpY2FibGUsIHNvIHRoZXJlJ3Mgbm8KICAgICAgICBuZWVkIHRvIGNvbnN1bHQgZHN0KCkgdW5sZXNzIHlvdSdyZSBpbnRlcmVzdGVkIGluIGRpc3BsYXlpbmcgdGhlIERTVAogICAgICAgIGluZm8uCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VsZi5fdHppbmZvIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgb2Zmc2V0ID0gc2VsZi5fdHppbmZvLmRzdChzZWxmKQogICAgICAgIF9jaGVja191dGNfb2Zmc2V0KCJkc3QiLCBvZmZzZXQpCiAgICAgICAgcmV0dXJuIG9mZnNldAoKICAgICMgQ29tcGFyaXNvbnMgb2YgZGF0ZXRpbWUgb2JqZWN0cyB3aXRoIG90aGVyLgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPT0gMAogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpICE9IDAKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpIDw9IDAKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPCAwCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgZGF0ZSk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbXAob3RoZXIpID49IDAKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX2NtcGVycm9yKHNlbGYsIG90aGVyKQoKICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NtcChvdGhlcikgPiAwCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgZGF0ZSk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9jbXBlcnJvcihzZWxmLCBvdGhlcikKCiAgICBkZWYgX2NtcChzZWxmLCBvdGhlcik6CiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uob3RoZXIsIGRhdGV0aW1lKQogICAgICAgIG15dHogPSBzZWxmLl90emluZm8KICAgICAgICBvdHR6ID0gb3RoZXIuX3R6aW5mbwogICAgICAgIG15b2ZmID0gb3RvZmYgPSBOb25lCgogICAgICAgIGlmIG15dHogaXMgb3R0ejoKICAgICAgICAgICAgYmFzZV9jb21wYXJlID0gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIG15dHogaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBteW9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICAgICAgaWYgb3R0eiBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIG90b2ZmID0gb3RoZXIudXRjb2Zmc2V0KCkKICAgICAgICAgICAgYmFzZV9jb21wYXJlID0gbXlvZmYgPT0gb3RvZmYKCiAgICAgICAgaWYgYmFzZV9jb21wYXJlOgogICAgICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICAgICAjcmV0dXJuIF9jbXAoKHNlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXksCiAgICAgICAgICAgICMgICAgICAgICAgICAgc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICMgICAgICAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQpLAogICAgICAgICAgICAjICAgICAgICAgICAob3RoZXIuX3llYXIsIG90aGVyLl9tb250aCwgb3RoZXIuX2RheSwKICAgICAgICAgICAgIyAgICAgICAgICAgIG90aGVyLl9ob3VyLCBvdGhlci5fbWludXRlLCBvdGhlci5fc2Vjb25kLAogICAgICAgICAgICAjICAgICAgICAgICAgb3RoZXIuX21pY3Jvc2Vjb25kKSkKICAgICAgICAgICAgcmV0dXJuIF90dXBsZV9jbXAoKHNlbGYuX3llYXIsIHNlbGYuX21vbnRoLCBzZWxmLl9kYXksCiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9ob3VyLCBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwKICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX21pY3Jvc2Vjb25kKSwKICAgICAgICAgICAgICAgICAgICAgICAob3RoZXIuX3llYXIsIG90aGVyLl9tb250aCwgb3RoZXIuX2RheSwKICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXIuX2hvdXIsIG90aGVyLl9taW51dGUsIG90aGVyLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyLl9taWNyb3NlY29uZCkpCiAgICAgICAgaWYgbXlvZmYgaXMgTm9uZSBvciBvdG9mZiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhbm5vdCBjb21wYXJlIG5haXZlIGFuZCBhd2FyZSBkYXRldGltZXMiKQogICAgICAgICMgWFhYIFdoYXQgZm9sbG93cyBjb3VsZCBiZSBkb25lIG1vcmUgZWZmaWNpZW50bHkuLi4KICAgICAgICBkaWZmID0gc2VsZiAtIG90aGVyICAgICAjIHRoaXMgd2lsbCB0YWtlIG9mZnNldHMgaW50byBhY2NvdW50CiAgICAgICAgaWYgZGlmZi5kYXlzIDwgMDoKICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgcmV0dXJuIGRpZmYgYW5kIDEgb3IgMAoKICAgIGRlZiBfX2FkZF9fKHNlbGYsIG90aGVyKToKICAgICAgICAiQWRkIGEgZGF0ZXRpbWUgYW5kIGEgdGltZWRlbHRhLiIKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgZGVsdGEgPSB0aW1lZGVsdGEoc2VsZi50b29yZGluYWwoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBob3Vycz1zZWxmLl9ob3VyLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXM9c2VsZi5fbWludXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM9c2VsZi5fc2Vjb25kLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kcz1zZWxmLl9taWNyb3NlY29uZCkKICAgICAgICBkZWx0YSArPSBvdGhlcgogICAgICAgIGhvdXIsIHJlbSA9IGRpdm1vZChkZWx0YS5zZWNvbmRzLCAzNjAwKQogICAgICAgIG1pbnV0ZSwgc2Vjb25kID0gZGl2bW9kKHJlbSwgNjApCiAgICAgICAgaWYgMCA8IGRlbHRhLmRheXMgPD0gX01BWE9SRElOQUw6CiAgICAgICAgICAgIHJldHVybiBkYXRldGltZS5jb21iaW5lKGRhdGUuZnJvbW9yZGluYWwoZGVsdGEuZGF5cyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUoaG91ciwgbWludXRlLCBzZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGEubWljcm9zZWNvbmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR6aW5mbz1zZWxmLl90emluZm8pKQogICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoInJlc3VsdCBvdXQgb2YgcmFuZ2UiKQoKICAgIF9fcmFkZF9fID0gX19hZGRfXwoKICAgIGRlZiBfX3N1Yl9fKHNlbGYsIG90aGVyKToKICAgICAgICAiU3VidHJhY3QgdHdvIGRhdGV0aW1lcywgb3IgYSBkYXRldGltZSBhbmQgYSB0aW1lZGVsdGEuIgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBkYXRldGltZSk6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZiArIC1vdGhlcgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICAgICAgZGF5czEgPSBzZWxmLnRvb3JkaW5hbCgpCiAgICAgICAgZGF5czIgPSBvdGhlci50b29yZGluYWwoKQogICAgICAgIHNlY3MxID0gc2VsZi5fc2Vjb25kICsgc2VsZi5fbWludXRlICogNjAgKyBzZWxmLl9ob3VyICogMzYwMAogICAgICAgIHNlY3MyID0gb3RoZXIuX3NlY29uZCArIG90aGVyLl9taW51dGUgKiA2MCArIG90aGVyLl9ob3VyICogMzYwMAogICAgICAgIGJhc2UgPSB0aW1lZGVsdGEoZGF5czEgLSBkYXlzMiwKICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3MxIC0gc2VjczIsCiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9taWNyb3NlY29uZCAtIG90aGVyLl9taWNyb3NlY29uZCkKICAgICAgICBpZiBzZWxmLl90emluZm8gaXMgb3RoZXIuX3R6aW5mbzoKICAgICAgICAgICAgcmV0dXJuIGJhc2UKICAgICAgICBteW9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBvdG9mZiA9IG90aGVyLnV0Y29mZnNldCgpCiAgICAgICAgaWYgbXlvZmYgPT0gb3RvZmY6CiAgICAgICAgICAgIHJldHVybiBiYXNlCiAgICAgICAgaWYgbXlvZmYgaXMgTm9uZSBvciBvdG9mZiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhbm5vdCBtaXggbmFpdmUgYW5kIHRpbWV6b25lLWF3YXJlIHRpbWUiKQogICAgICAgIHJldHVybiBiYXNlICsgb3RvZmYgLSBteW9mZgoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICB0em9mZiA9IHNlbGYudXRjb2Zmc2V0KCkKICAgICAgICBpZiB0em9mZiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gaGFzaChzZWxmLl9nZXRzdGF0ZSgpWzBdKQogICAgICAgIGRheXMgPSBfeW1kMm9yZChzZWxmLnllYXIsIHNlbGYubW9udGgsIHNlbGYuZGF5KQogICAgICAgIHNlY29uZHMgPSBzZWxmLmhvdXIgKiAzNjAwICsgc2VsZi5taW51dGUgKiA2MCArIHNlbGYuc2Vjb25kCiAgICAgICAgcmV0dXJuIGhhc2godGltZWRlbHRhKGRheXMsIHNlY29uZHMsIHNlbGYubWljcm9zZWNvbmQpIC0gdHpvZmYpCgogICAgIyBQaWNrbGUgc3VwcG9ydC4KCiAgICBkZWYgX2dldHN0YXRlKHNlbGYpOgogICAgICAgIHloaSwgeWxvID0gZGl2bW9kKHNlbGYuX3llYXIsIDI1NikKICAgICAgICB1czIsIHVzMyA9IGRpdm1vZChzZWxmLl9taWNyb3NlY29uZCwgMjU2KQogICAgICAgIHVzMSwgdXMyID0gZGl2bW9kKHVzMiwgMjU2KQogICAgICAgIGJhc2VzdGF0ZSA9IGJ5dGVzKFt5aGksIHlsbywgc2VsZi5fbW9udGgsIHNlbGYuX2RheSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5faG91ciwgc2VsZi5fbWludXRlLCBzZWxmLl9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzMSwgdXMyLCB1czNdKQogICAgICAgIGlmIHNlbGYuX3R6aW5mbyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKGJhc2VzdGF0ZSwpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIChiYXNlc3RhdGUsIHNlbGYuX3R6aW5mbykKCiAgICBkZWYgX19zZXRzdGF0ZShzZWxmLCBzdHJpbmcsIHR6aW5mbyk6CiAgICAgICAgKHloaSwgeWxvLCBzZWxmLl9tb250aCwgc2VsZi5fZGF5LCBzZWxmLl9ob3VyLAogICAgICAgICBzZWxmLl9taW51dGUsIHNlbGYuX3NlY29uZCwgdXMxLCB1czIsIHVzMykgPSBzdHJpbmcKICAgICAgICBzZWxmLl95ZWFyID0geWhpICogMjU2ICsgeWxvCiAgICAgICAgc2VsZi5fbWljcm9zZWNvbmQgPSAoKCh1czEgPDwgOCkgfCB1czIpIDw8IDgpIHwgdXMzCiAgICAgICAgaWYgdHppbmZvIGlzIE5vbmUgb3IgaXNpbnN0YW5jZSh0emluZm8sIF90emluZm9fY2xhc3MpOgogICAgICAgICAgICBzZWxmLl90emluZm8gPSB0emluZm8KICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImJhZCB0emluZm8gc3RhdGUgYXJnICVyIiAlIHR6aW5mbykKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCBzZWxmLl9nZXRzdGF0ZSgpKQoKI2ZpeG1lIGJyeXRob24KI2RhdGV0aW1lLm1pbiA9IGRhdGV0aW1lKDEsIDEsIDEpCiNkYXRldGltZS5tYXggPSBkYXRldGltZSg5OTk5LCAxMiwgMzEsIDIzLCA1OSwgNTksIDk5OTk5OSkKI2RhdGV0aW1lLnJlc29sdXRpb24gPSB0aW1lZGVsdGEobWljcm9zZWNvbmRzPTEpCgoKZGVmIF9pc293ZWVrMW1vbmRheSh5ZWFyKToKICAgICMgSGVscGVyIHRvIGNhbGN1bGF0ZSB0aGUgZGF5IG51bWJlciBvZiB0aGUgTW9uZGF5IHN0YXJ0aW5nIHdlZWsgMQogICAgIyBYWFggVGhpcyBjb3VsZCBiZSBkb25lIG1vcmUgZWZmaWNpZW50bHkKICAgIFRIVVJTREFZID0gMwogICAgZmlyc3RkYXkgPSBfeW1kMm9yZCh5ZWFyLCAxLCAxKQogICAgZmlyc3R3ZWVrZGF5ID0gKGZpcnN0ZGF5ICsgNikgJSA3ICMgU2VlIHdlZWtkYXkoKSBhYm92ZQogICAgd2VlazFtb25kYXkgPSBmaXJzdGRheSAtIGZpcnN0d2Vla2RheQogICAgaWYgZmlyc3R3ZWVrZGF5ID4gVEhVUlNEQVk6CiAgICAgICAgd2VlazFtb25kYXkgKz0gNwogICAgcmV0dXJuIHdlZWsxbW9uZGF5CgpjbGFzcyB0aW1lem9uZSh0emluZm8pOgogICAgX19zbG90c19fID0gJ19vZmZzZXQnLCAnX25hbWUnCgogICAgIyBTZW50aW5lbCB2YWx1ZSB0byBkaXNhbGxvdyBOb25lCiAgICBfT21pdHRlZCA9IG9iamVjdCgpCiAgICAjZml4bWUgYnJ5dGhvbgogICAgI2RlZiBfX25ld19fKGNscywgb2Zmc2V0LCBuYW1lPV9PbWl0dGVkKToKICAgIGRlZiBfX25ld19fKGNscywgb2Zmc2V0LCBuYW1lPU5vbmUpOgogICAgICAgIGlmIG5hbWUgaXMgTm9uZToKICAgICAgICAgICBuYW1lPV9PbWl0dGVkCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob2Zmc2V0LCB0aW1lZGVsdGEpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm9mZnNldCBtdXN0IGJlIGEgdGltZWRlbHRhIikKICAgICAgICBpZiBuYW1lIGlzIGNscy5fT21pdHRlZDoKICAgICAgICAgICAgaWYgbm90IG9mZnNldDoKICAgICAgICAgICAgICAgIHJldHVybiBjbHMudXRjCiAgICAgICAgICAgIG5hbWUgPSBOb25lCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShuYW1lLCBzdHIpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm5hbWUgbXVzdCBiZSBhIHN0cmluZyIpCiAgICAgICAgaWYgbm90IGNscy5fbWlub2Zmc2V0IDw9IG9mZnNldCA8PSBjbHMuX21heG9mZnNldDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigib2Zmc2V0IG11c3QgYmUgYSB0aW1lZGVsdGEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBzdHJpY3RseSBiZXR3ZWVuIC10aW1lZGVsdGEoaG91cnM9MjQpIGFuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIHRpbWVkZWx0YShob3Vycz0yNCkuIikKICAgICAgICBpZiAob2Zmc2V0Lm1pY3Jvc2Vjb25kcyAhPSAwIG9yCiAgICAgICAgICAgIG9mZnNldC5zZWNvbmRzICUgNjAgIT0gMCk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm9mZnNldCBtdXN0IGJlIGEgdGltZWRlbHRhIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgcmVwcmVzZW50aW5nIGEgd2hvbGUgbnVtYmVyIG9mIG1pbnV0ZXMiKQogICAgICAgIHJldHVybiBjbHMuX2NyZWF0ZShvZmZzZXQsIG5hbWUpCgogICAgI0BjbGFzc21ldGhvZAogICAgZGVmIF9jcmVhdGUoY2xzLCBvZmZzZXQsIG5hbWU9Tm9uZSk6CiAgICAgICAgc2VsZiA9IHR6aW5mby5fX25ld19fKGNscykKICAgICAgICBzZWxmLl9vZmZzZXQgPSBvZmZzZXQKICAgICAgICBzZWxmLl9uYW1lID0gbmFtZQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZ2V0aW5pdGFyZ3NfXyhzZWxmKToKICAgICAgICAiIiJwaWNrbGUgc3VwcG9ydCIiIgogICAgICAgIGlmIHNlbGYuX25hbWUgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIChzZWxmLl9vZmZzZXQsKQogICAgICAgIHJldHVybiAoc2VsZi5fb2Zmc2V0LCBzZWxmLl9uYW1lKQoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIHR5cGUob3RoZXIpICE9IHRpbWV6b25lOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gc2VsZi5fb2Zmc2V0ID09IG90aGVyLl9vZmZzZXQKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fb2Zmc2V0KQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICAiIiJDb252ZXJ0IHRvIGZvcm1hbCBzdHJpbmcsIGZvciByZXByKCkuCgogICAgICAgID4+PiB0eiA9IHRpbWV6b25lLnV0YwogICAgICAgID4+PiByZXByKHR6KQogICAgICAgICdkYXRldGltZS50aW1lem9uZS51dGMnCiAgICAgICAgPj4+IHR6ID0gdGltZXpvbmUodGltZWRlbHRhKGhvdXJzPS01KSwgJ0VTVCcpCiAgICAgICAgPj4+IHJlcHIodHopCiAgICAgICAgImRhdGV0aW1lLnRpbWV6b25lKGRhdGV0aW1lLnRpbWVkZWx0YSgtMSwgNjg0MDApLCAnRVNUJykiCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VsZiBpcyBzZWxmLnV0YzoKICAgICAgICAgICAgcmV0dXJuICdkYXRldGltZS50aW1lem9uZS51dGMnCiAgICAgICAgaWYgc2VsZi5fbmFtZSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gIiVzKCVyKSIgJSAoJ2RhdGV0aW1lLicgKyBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX29mZnNldCkKICAgICAgICByZXR1cm4gIiVzKCVyLCAlcikiICUgKCdkYXRldGltZS4nICsgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9vZmZzZXQsIHNlbGYuX25hbWUpCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYudHpuYW1lKE5vbmUpCgogICAgZGVmIHV0Y29mZnNldChzZWxmLCBkdCk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShkdCwgZGF0ZXRpbWUpIG9yIGR0IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9vZmZzZXQKICAgICAgICByYWlzZSBUeXBlRXJyb3IoInV0Y29mZnNldCgpIGFyZ3VtZW50IG11c3QgYmUgYSBkYXRldGltZSBpbnN0YW5jZSIKICAgICAgICAgICAgICAgICAgICAgICAgIiBvciBOb25lIikKCiAgICBkZWYgdHpuYW1lKHNlbGYsIGR0KToKICAgICAgICBpZiBpc2luc3RhbmNlKGR0LCBkYXRldGltZSkgb3IgZHQgaXMgTm9uZToKICAgICAgICAgICAgaWYgc2VsZi5fbmFtZSBpcyBOb25lOgogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX25hbWVfZnJvbV9vZmZzZXQoc2VsZi5fb2Zmc2V0KQogICAgICAgICAgICByZXR1cm4gc2VsZi5fbmFtZQogICAgICAgIHJhaXNlIFR5cGVFcnJvcigidHpuYW1lKCkgYXJndW1lbnQgbXVzdCBiZSBhIGRhdGV0aW1lIGluc3RhbmNlIgogICAgICAgICAgICAgICAgICAgICAgICAiIG9yIE5vbmUiKQoKICAgIGRlZiBkc3Qoc2VsZiwgZHQpOgogICAgICAgIGlmIGlzaW5zdGFuY2UoZHQsIGRhdGV0aW1lKSBvciBkdCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZHN0KCkgYXJndW1lbnQgbXVzdCBiZSBhIGRhdGV0aW1lIGluc3RhbmNlIgogICAgICAgICAgICAgICAgICAgICAgICAiIG9yIE5vbmUiKQoKICAgIGRlZiBmcm9tdXRjKHNlbGYsIGR0KToKICAgICAgICBpZiBpc2luc3RhbmNlKGR0LCBkYXRldGltZSk6CiAgICAgICAgICAgIGlmIGR0LnR6aW5mbyBpcyBub3Qgc2VsZjoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImZyb211dGM6IGR0LnR6aW5mbyAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJpcyBub3Qgc2VsZiIpCiAgICAgICAgICAgIHJldHVybiBkdCArIHNlbGYuX29mZnNldAogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZnJvbXV0YygpIGFyZ3VtZW50IG11c3QgYmUgYSBkYXRldGltZSBpbnN0YW5jZSIKICAgICAgICAgICAgICAgICAgICAgICAgIiBvciBOb25lIikKCiAgICAjX21heG9mZnNldCA9IHRpbWVkZWx0YShob3Vycz0yMywgbWludXRlcz01OSkKICAgICNfbWlub2Zmc2V0ID0gLV9tYXhvZmZzZXQKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgX25hbWVfZnJvbV9vZmZzZXQoZGVsdGEpOgogICAgICAgIGlmIGRlbHRhIDwgdGltZWRlbHRhKDApOgogICAgICAgICAgICBzaWduID0gJy0nCiAgICAgICAgICAgIGRlbHRhID0gLWRlbHRhCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2lnbiA9ICcrJwogICAgICAgIGhvdXJzLCByZXN0ID0gZGl2bW9kKGRlbHRhLCB0aW1lZGVsdGEoaG91cnM9MSkpCiAgICAgICAgbWludXRlcyA9IHJlc3QgLy8gdGltZWRlbHRhKG1pbnV0ZXM9MSkKICAgICAgICByZXR1cm4gJ1VUQ3t9ezowMmR9Ons6MDJkfScuZm9ybWF0KHNpZ24sIGhvdXJzLCBtaW51dGVzKQoKI2ZpeG1lIGJyeXRob24KI3RpbWV6b25lLnV0YyA9IHRpbWV6b25lLl9jcmVhdGUodGltZWRlbHRhKDApKQojdGltZXpvbmUubWluID0gdGltZXpvbmUuX2NyZWF0ZSh0aW1lem9uZS5fbWlub2Zmc2V0KQojdGltZXpvbmUubWF4ID0gdGltZXpvbmUuX2NyZWF0ZSh0aW1lem9uZS5fbWF4b2Zmc2V0KQoK',
'/Lib/colorsys.py':'IiIiQ29udmVyc2lvbiBmdW5jdGlvbnMgYmV0d2VlbiBSR0IgYW5kIG90aGVyIGNvbG9yIHN5c3RlbXMuCgpUaGlzIG1vZHVsZXMgcHJvdmlkZXMgdHdvIGZ1bmN0aW9ucyBmb3IgZWFjaCBjb2xvciBzeXN0ZW0gQUJDOgoKICByZ2JfdG9fYWJjKHIsIGcsIGIpIC0tPiBhLCBiLCBjCiAgYWJjX3RvX3JnYihhLCBiLCBjKSAtLT4gciwgZywgYgoKQWxsIGlucHV0cyBhbmQgb3V0cHV0cyBhcmUgdHJpcGxlcyBvZiBmbG9hdHMgaW4gdGhlIHJhbmdlIFswLjAuLi4xLjBdCih3aXRoIHRoZSBleGNlcHRpb24gb2YgSSBhbmQgUSwgd2hpY2ggY292ZXJzIGEgc2xpZ2h0bHkgbGFyZ2VyIHJhbmdlKS4KSW5wdXRzIG91dHNpZGUgdGhlIHZhbGlkIHJhbmdlIG1heSBjYXVzZSBleGNlcHRpb25zIG9yIGludmFsaWQgb3V0cHV0cy4KClN1cHBvcnRlZCBjb2xvciBzeXN0ZW1zOgpSR0I6IFJlZCwgR3JlZW4sIEJsdWUgY29tcG9uZW50cwpZSVE6IEx1bWluYW5jZSwgQ2hyb21pbmFuY2UgKHVzZWQgYnkgY29tcG9zaXRlIHZpZGVvIHNpZ25hbHMpCkhMUzogSHVlLCBMdW1pbmFuY2UsIFNhdHVyYXRpb24KSFNWOiBIdWUsIFNhdHVyYXRpb24sIFZhbHVlCiIiIgoKIyBSZWZlcmVuY2VzOgojIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvWUlRCiMgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9ITFNfY29sb3Jfc3BhY2UKIyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hTVl9jb2xvcl9zcGFjZQoKX19hbGxfXyA9IFsicmdiX3RvX3lpcSIsInlpcV90b19yZ2IiLCJyZ2JfdG9faGxzIiwiaGxzX3RvX3JnYiIsCiAgICAgICAgICAgInJnYl90b19oc3YiLCJoc3ZfdG9fcmdiIl0KCiMgU29tZSBmbG9hdGluZyBwb2ludCBjb25zdGFudHMKCk9ORV9USElSRCA9IDEuMC8zLjAKT05FX1NJWFRIID0gMS4wLzYuMApUV09fVEhJUkQgPSAyLjAvMy4wCgojIFlJUTogdXNlZCBieSBjb21wb3NpdGUgdmlkZW8gc2lnbmFscyAobGluZWFyIGNvbWJpbmF0aW9ucyBvZiBSR0IpCiMgWTogcGVyY2VpdmVkIGdyZXkgbGV2ZWwgKDAuMCA9PSBibGFjaywgMS4wID09IHdoaXRlKQojIEksIFE6IGNvbG9yIGNvbXBvbmVudHMKCmRlZiByZ2JfdG9feWlxKHIsIGcsIGIpOgogICAgeSA9IDAuMzAqciArIDAuNTkqZyArIDAuMTEqYgogICAgaSA9IDAuNjAqciAtIDAuMjgqZyAtIDAuMzIqYgogICAgcSA9IDAuMjEqciAtIDAuNTIqZyArIDAuMzEqYgogICAgcmV0dXJuICh5LCBpLCBxKQoKZGVmIHlpcV90b19yZ2IoeSwgaSwgcSk6CiAgICByID0geSArIDAuOTQ4MjYyKmkgKyAwLjYyNDAxMypxCiAgICBnID0geSAtIDAuMjc2MDY2KmkgLSAwLjYzOTgxMCpxCiAgICBiID0geSAtIDEuMTA1NDUwKmkgKyAxLjcyOTg2MCpxCiAgICBpZiByIDwgMC4wOgogICAgICAgIHIgPSAwLjAKICAgIGlmIGcgPCAwLjA6CiAgICAgICAgZyA9IDAuMAogICAgaWYgYiA8IDAuMDoKICAgICAgICBiID0gMC4wCiAgICBpZiByID4gMS4wOgogICAgICAgIHIgPSAxLjAKICAgIGlmIGcgPiAxLjA6CiAgICAgICAgZyA9IDEuMAogICAgaWYgYiA+IDEuMDoKICAgICAgICBiID0gMS4wCiAgICByZXR1cm4gKHIsIGcsIGIpCgoKIyBITFM6IEh1ZSwgTHVtaW5hbmNlLCBTYXR1cmF0aW9uCiMgSDogcG9zaXRpb24gaW4gdGhlIHNwZWN0cnVtCiMgTDogY29sb3IgbGlnaHRuZXNzCiMgUzogY29sb3Igc2F0dXJhdGlvbgoKZGVmIHJnYl90b19obHMociwgZywgYik6CiAgICBtYXhjID0gbWF4KHIsIGcsIGIpCiAgICBtaW5jID0gbWluKHIsIGcsIGIpCiAgICAjIFhYWCBDYW4gb3B0aW1pemUgKG1heGMrbWluYykgYW5kIChtYXhjLW1pbmMpCiAgICBsID0gKG1pbmMrbWF4YykvMi4wCiAgICBpZiBtaW5jID09IG1heGM6CiAgICAgICAgcmV0dXJuIDAuMCwgbCwgMC4wCiAgICBpZiBsIDw9IDAuNToKICAgICAgICBzID0gKG1heGMtbWluYykgLyAobWF4YyttaW5jKQogICAgZWxzZToKICAgICAgICBzID0gKG1heGMtbWluYykgLyAoMi4wLW1heGMtbWluYykKICAgIHJjID0gKG1heGMtcikgLyAobWF4Yy1taW5jKQogICAgZ2MgPSAobWF4Yy1nKSAvIChtYXhjLW1pbmMpCiAgICBiYyA9IChtYXhjLWIpIC8gKG1heGMtbWluYykKICAgIGlmIHIgPT0gbWF4YzoKICAgICAgICBoID0gYmMtZ2MKICAgIGVsaWYgZyA9PSBtYXhjOgogICAgICAgIGggPSAyLjArcmMtYmMKICAgIGVsc2U6CiAgICAgICAgaCA9IDQuMCtnYy1yYwogICAgaCA9IChoLzYuMCkgJSAxLjAKICAgIHJldHVybiBoLCBsLCBzCgpkZWYgaGxzX3RvX3JnYihoLCBsLCBzKToKICAgIGlmIHMgPT0gMC4wOgogICAgICAgIHJldHVybiBsLCBsLCBsCiAgICBpZiBsIDw9IDAuNToKICAgICAgICBtMiA9IGwgKiAoMS4wK3MpCiAgICBlbHNlOgogICAgICAgIG0yID0gbCtzLShsKnMpCiAgICBtMSA9IDIuMCpsIC0gbTIKICAgIHJldHVybiAoX3YobTEsIG0yLCBoK09ORV9USElSRCksIF92KG0xLCBtMiwgaCksIF92KG0xLCBtMiwgaC1PTkVfVEhJUkQpKQoKZGVmIF92KG0xLCBtMiwgaHVlKToKICAgIGh1ZSA9IGh1ZSAlIDEuMAogICAgaWYgaHVlIDwgT05FX1NJWFRIOgogICAgICAgIHJldHVybiBtMSArIChtMi1tMSkqaHVlKjYuMAogICAgaWYgaHVlIDwgMC41OgogICAgICAgIHJldHVybiBtMgogICAgaWYgaHVlIDwgVFdPX1RISVJEOgogICAgICAgIHJldHVybiBtMSArIChtMi1tMSkqKFRXT19USElSRC1odWUpKjYuMAogICAgcmV0dXJuIG0xCgoKIyBIU1Y6IEh1ZSwgU2F0dXJhdGlvbiwgVmFsdWUKIyBIOiBwb3NpdGlvbiBpbiB0aGUgc3BlY3RydW0KIyBTOiBjb2xvciBzYXR1cmF0aW9uICgicHVyaXR5IikKIyBWOiBjb2xvciBicmlnaHRuZXNzCgpkZWYgcmdiX3RvX2hzdihyLCBnLCBiKToKICAgIG1heGMgPSBtYXgociwgZywgYikKICAgIG1pbmMgPSBtaW4ociwgZywgYikKICAgIHYgPSBtYXhjCiAgICBpZiBtaW5jID09IG1heGM6CiAgICAgICAgcmV0dXJuIDAuMCwgMC4wLCB2CiAgICBzID0gKG1heGMtbWluYykgLyBtYXhjCiAgICByYyA9IChtYXhjLXIpIC8gKG1heGMtbWluYykKICAgIGdjID0gKG1heGMtZykgLyAobWF4Yy1taW5jKQogICAgYmMgPSAobWF4Yy1iKSAvIChtYXhjLW1pbmMpCiAgICBpZiByID09IG1heGM6CiAgICAgICAgaCA9IGJjLWdjCiAgICBlbGlmIGcgPT0gbWF4YzoKICAgICAgICBoID0gMi4wK3JjLWJjCiAgICBlbHNlOgogICAgICAgIGggPSA0LjArZ2MtcmMKICAgIGggPSAoaC82LjApICUgMS4wCiAgICByZXR1cm4gaCwgcywgdgoKZGVmIGhzdl90b19yZ2IoaCwgcywgdik6CiAgICBpZiBzID09IDAuMDoKICAgICAgICByZXR1cm4gdiwgdiwgdgogICAgaSA9IGludChoKjYuMCkgIyBYWFggYXNzdW1lIGludCgpIHRydW5jYXRlcyEKICAgIGYgPSAoaCo2LjApIC0gaQogICAgcCA9IHYqKDEuMCAtIHMpCiAgICBxID0gdiooMS4wIC0gcypmKQogICAgdCA9IHYqKDEuMCAtIHMqKDEuMC1mKSkKICAgIGkgPSBpJTYKICAgIGlmIGkgPT0gMDoKICAgICAgICByZXR1cm4gdiwgdCwgcAogICAgaWYgaSA9PSAxOgogICAgICAgIHJldHVybiBxLCB2LCBwCiAgICBpZiBpID09IDI6CiAgICAgICAgcmV0dXJuIHAsIHYsIHQKICAgIGlmIGkgPT0gMzoKICAgICAgICByZXR1cm4gcCwgcSwgdgogICAgaWYgaSA9PSA0OgogICAgICAgIHJldHVybiB0LCBwLCB2CiAgICBpZiBpID09IDU6CiAgICAgICAgcmV0dXJuIHYsIHAsIHEKICAgICMgQ2Fubm90IGdldCBoZXJlCg==',
'/Lib/traceback.py':'aW1wb3J0IHN5cwpkZWYgcHJpbnRfZXhjKGZpbGU9c3lzLnN0ZGVycik6CiAgICBleGMgPSBfX0JSWVRIT05fXy5leGNlcHRpb25fc3RhY2tbLTFdCiAgICBmaWxlLndyaXRlKGV4Yy5pbmZvKQogICAgZmlsZS53cml0ZSgnXG4nK2V4Yy5fX25hbWVfXykKICAgIGlmIGV4Yy5tZXNzYWdlOgogICAgICAgIGZpbGUud3JpdGUoJzogJytleGMubWVzc2FnZSkKICAgIGZpbGUud3JpdGUoJ1xuJykK',
'/Lib/_random.py':'aW1wb3J0IF9vcwpjbGFzcyBSYW5kb206CiAgICAiIiJSYW5kb20gbnVtYmVyIGdlbmVyYXRvciBiYXNlIGNsYXNzIHVzZWQgYnkgYm91bmQgbW9kdWxlIGZ1bmN0aW9ucy4KCiAgICBVc2VkIHRvIGluc3RhbnRpYXRlIGluc3RhbmNlcyBvZiBSYW5kb20gdG8gZ2V0IGdlbmVyYXRvcnMgdGhhdCBkb24ndAogICAgc2hhcmUgc3RhdGUuCgogICAgQ2xhc3MgUmFuZG9tIGNhbiBhbHNvIGJlIHN1YmNsYXNzZWQgaWYgeW91IHdhbnQgdG8gdXNlIGEgZGlmZmVyZW50IGJhc2ljCiAgICBnZW5lcmF0b3Igb2YgeW91ciBvd24gZGV2aXNpbmc6IGluIHRoYXQgY2FzZSwgb3ZlcnJpZGUgdGhlIGZvbGxvd2luZwogICAgbWV0aG9kczogIHJhbmRvbSgpLCBzZWVkKCksIGdldHN0YXRlKCksIGFuZCBzZXRzdGF0ZSgpLgogICAgT3B0aW9uYWxseSwgaW1wbGVtZW50IGEgZ2V0cmFuZGJpdHMoKSBtZXRob2Qgc28gdGhhdCByYW5kcmFuZ2UoKQogICAgY2FuIGNvdmVyIGFyYml0cmFyaWx5IGxhcmdlIHJhbmdlcy4KCiAgICAiIiIKICAgICNyYW5kb20KICAgICNzZWVkCiAgICAjZ2V0c3RhdGUKICAgICNzZXRzdGF0ZQoKCiAgICBWRVJTSU9OID0gMyAgICAgIyB1c2VkIGJ5IGdldHN0YXRlL3NldHN0YXRlCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHg9Tm9uZSk6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSBhbiBpbnN0YW5jZS4KCiAgICAgICAgT3B0aW9uYWwgYXJndW1lbnQgeCBjb250cm9scyBzZWVkaW5nLCBhcyBmb3IgUmFuZG9tLnNlZWQoKS4KICAgICAgICAiIiIKCiAgICAgICAgc2VsZi5fc3RhdGU9eAoKICAgIGRlZiBzZWVkKHNlbGYsIGE9Tm9uZSwgdmVyc2lvbj0yKToKICAgICAgICAiIiJJbml0aWFsaXplIGludGVybmFsIHN0YXRlIGZyb20gaGFzaGFibGUgb2JqZWN0LgoKICAgICAgICBOb25lIG9yIG5vIGFyZ3VtZW50IHNlZWRzIGZyb20gY3VycmVudCB0aW1lIG9yIGZyb20gYW4gb3BlcmF0aW5nCiAgICAgICAgc3lzdGVtIHNwZWNpZmljIHJhbmRvbW5lc3Mgc291cmNlIGlmIGF2YWlsYWJsZS4KCiAgICAgICAgRm9yIHZlcnNpb24gMiAodGhlIGRlZmF1bHQpLCBhbGwgb2YgdGhlIGJpdHMgYXJlIHVzZWQgaWYgKmEqIGlzIGEgc3RyLAogICAgICAgIGJ5dGVzLCBvciBieXRlYXJyYXkuICBGb3IgdmVyc2lvbiAxLCB0aGUgaGFzaCgpIG9mICphKiBpcyB1c2VkIGluc3RlYWQuCgogICAgICAgIElmICphKiBpcyBhbiBpbnQsIGFsbCBiaXRzIGFyZSB1c2VkLgoKICAgICAgICAiIiIKCiAgICAgICAgc2VsZi5fc3RhdGU9YQogICAgICAgIHNlbGYuZ2F1c3NfbmV4dCA9IE5vbmUKCiAgICBkZWYgZ2V0c3RhdGUoc2VsZik6CiAgICAgICAgIiIiUmV0dXJuIGludGVybmFsIHN0YXRlOyBjYW4gYmUgcGFzc2VkIHRvIHNldHN0YXRlKCkgbGF0ZXIuIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX3N0YXRlCgogICAgZGVmIHNldHN0YXRlKHNlbGYsIHN0YXRlKToKICAgICAgICAiIiJSZXN0b3JlIGludGVybmFsIHN0YXRlIGZyb20gb2JqZWN0IHJldHVybmVkIGJ5IGdldHN0YXRlKCkuIiIiCiAgICAgICAgc2VsZi5fc3RhdGU9c3RhdGUKCiAgICBkZWYgcmFuZG9tKHNlbGYpOgogICAgICAgICIiIkdldCB0aGUgbmV4dCByYW5kb20gbnVtYmVyIGluIHRoZSByYW5nZSBbMC4wLCAxLjApLiIiIgogICAgICAgIHJldHVybiBfb3MucmFuZG9tKCkKCiAgICBkZWYgZ2V0cmFuZGJpdHMoc2VsZiwgayk6CiAgICAgICAgIiIiZ2V0cmFuZGJpdHMoaykgLT4geC4gIEdlbmVyYXRlcyBhIGxvbmcgaW50IHdpdGggayByYW5kb20gYml0cy4iIiIKICAgICAgICBpZiBrIDw9IDA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ251bWJlciBvZiBiaXRzIG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8nKQogICAgICAgIGlmIGsgIT0gaW50KGspOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ251bWJlciBvZiBiaXRzIHNob3VsZCBiZSBhbiBpbnRlZ2VyJykKICAgICAgICBudW1ieXRlcyA9IChrICsgNykgLy8gOCAgICAgICAgICAgICAgICAgICAgICAgIyBiaXRzIC8gOCBhbmQgcm91bmRlZCB1cAogICAgICAgIHggPSBpbnQuZnJvbV9ieXRlcyhfdXJhbmRvbShudW1ieXRlcyksICdiaWcnKQogICAgICAgIHJldHVybiB4ID4+IChudW1ieXRlcyAqIDggLSBrKSAgICAgICAgICAgICAgICAjIHRyaW0gZXhjZXNzIGJpdHMK',
'/Lib/signal.py':'IiIiVGhpcyBtb2R1bGUgcHJvdmlkZXMgbWVjaGFuaXNtcyB0byB1c2Ugc2lnbmFsIGhhbmRsZXJzIGluIFB5dGhvbi4KCkZ1bmN0aW9uczoKCmFsYXJtKCkgLS0gY2F1c2UgU0lHQUxSTSBhZnRlciBhIHNwZWNpZmllZCB0aW1lIFtVbml4IG9ubHldCnNldGl0aW1lcigpIC0tIGNhdXNlIGEgc2lnbmFsIChkZXNjcmliZWQgYmVsb3cpIGFmdGVyIGEgc3BlY2lmaWVkCiAgICAgICAgICAgICAgIGZsb2F0IHRpbWUgYW5kIHRoZSB0aW1lciBtYXkgcmVzdGFydCB0aGVuIFtVbml4IG9ubHldCmdldGl0aW1lcigpIC0tIGdldCBjdXJyZW50IHZhbHVlIG9mIHRpbWVyIFtVbml4IG9ubHldCnNpZ25hbCgpIC0tIHNldCB0aGUgYWN0aW9uIGZvciBhIGdpdmVuIHNpZ25hbApnZXRzaWduYWwoKSAtLSBnZXQgdGhlIHNpZ25hbCBhY3Rpb24gZm9yIGEgZ2l2ZW4gc2lnbmFsCnBhdXNlKCkgLS0gd2FpdCB1bnRpbCBhIHNpZ25hbCBhcnJpdmVzIFtVbml4IG9ubHldCmRlZmF1bHRfaW50X2hhbmRsZXIoKSAtLSBkZWZhdWx0IFNJR0lOVCBoYW5kbGVyCgpzaWduYWwgY29uc3RhbnRzOgpTSUdfREZMIC0tIHVzZWQgdG8gcmVmZXIgdG8gdGhlIHN5c3RlbSBkZWZhdWx0IGhhbmRsZXIKU0lHX0lHTiAtLSB1c2VkIHRvIGlnbm9yZSB0aGUgc2lnbmFsCk5TSUcgLS0gbnVtYmVyIG9mIGRlZmluZWQgc2lnbmFscwpTSUdJTlQsIFNJR1RFUk0sIGV0Yy4gLS0gc2lnbmFsIG51bWJlcnMKCml0aW1lciBjb25zdGFudHM6CklUSU1FUl9SRUFMIC0tIGRlY3JlbWVudHMgaW4gcmVhbCB0aW1lLCBhbmQgZGVsaXZlcnMgU0lHQUxSTSB1cG9uCiAgICAgICAgICAgICAgIGV4cGlyYXRpb24KSVRJTUVSX1ZJUlRVQUwgLS0gZGVjcmVtZW50cyBvbmx5IHdoZW4gdGhlIHByb2Nlc3MgaXMgZXhlY3V0aW5nLAogICAgICAgICAgICAgICBhbmQgZGVsaXZlcnMgU0lHVlRBTFJNIHVwb24gZXhwaXJhdGlvbgpJVElNRVJfUFJPRiAtLSBkZWNyZW1lbnRzIGJvdGggd2hlbiB0aGUgcHJvY2VzcyBpcyBleGVjdXRpbmcgYW5kCiAgICAgICAgICAgICAgIHdoZW4gdGhlIHN5c3RlbSBpcyBleGVjdXRpbmcgb24gYmVoYWxmIG9mIHRoZSBwcm9jZXNzLgogICAgICAgICAgICAgICBDb3VwbGVkIHdpdGggSVRJTUVSX1ZJUlRVQUwsIHRoaXMgdGltZXIgaXMgdXN1YWxseQogICAgICAgICAgICAgICB1c2VkIHRvIHByb2ZpbGUgdGhlIHRpbWUgc3BlbnQgYnkgdGhlIGFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgIGluIHVzZXIgYW5kIGtlcm5lbCBzcGFjZS4gU0lHUFJPRiBpcyBkZWxpdmVyZWQgdXBvbgogICAgICAgICAgICAgICBleHBpcmF0aW9uLgoKCioqKiBJTVBPUlRBTlQgTk9USUNFICoqKgpBIHNpZ25hbCBoYW5kbGVyIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIHR3byBhcmd1bWVudHM6CnRoZSBmaXJzdCBpcyB0aGUgc2lnbmFsIG51bWJlciwgdGhlIHNlY29uZCBpcyB0aGUgaW50ZXJydXB0ZWQgc3RhY2sgZnJhbWUuIiIiCgpDVFJMX0JSRUFLX0VWRU5UPTEKQ1RSTF9DX0VWRU5UPTAKTlNJRz0yMwpTSUdBQlJUPTIyClNJR0JSRUFLPTIxClNJR0ZQRT04ClNJR0lMTD00ClNJR0lOVD0yClNJR1NFR1Y9MTEKU0lHVEVSTT0xNQpTSUdfREZMPTAKU0lHX0lHTj0xCgpkZWYgc2lnbmFsKHNpZ25hbG51bSwgaGFuZGxlcikgOgogICAgcGFzcwo=',
'/Lib/bisect.py':'IiIiQmlzZWN0aW9uIGFsZ29yaXRobXMuIiIiCgpkZWYgaW5zb3J0X3JpZ2h0KGEsIHgsIGxvPTAsIGhpPU5vbmUpOgogICAgIiIiSW5zZXJ0IGl0ZW0geCBpbiBsaXN0IGEsIGFuZCBrZWVwIGl0IHNvcnRlZCBhc3N1bWluZyBhIGlzIHNvcnRlZC4KCiAgICBJZiB4IGlzIGFscmVhZHkgaW4gYSwgaW5zZXJ0IGl0IHRvIHRoZSByaWdodCBvZiB0aGUgcmlnaHRtb3N0IHguCgogICAgT3B0aW9uYWwgYXJncyBsbyAoZGVmYXVsdCAwKSBhbmQgaGkgKGRlZmF1bHQgbGVuKGEpKSBib3VuZCB0aGUKICAgIHNsaWNlIG9mIGEgdG8gYmUgc2VhcmNoZWQuCiAgICAiIiIKCiAgICBpZiBsbyA8IDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbG8gbXVzdCBiZSBub24tbmVnYXRpdmUnKQogICAgaWYgaGkgaXMgTm9uZToKICAgICAgICBoaSA9IGxlbihhKQogICAgd2hpbGUgbG8gPCBoaToKICAgICAgICBtaWQgPSAobG8raGkpLy8yCiAgICAgICAgaWYgeCA8IGFbbWlkXTogaGkgPSBtaWQKICAgICAgICBlbHNlOiBsbyA9IG1pZCsxCiAgICBhLmluc2VydChsbywgeCkKCmluc29ydCA9IGluc29ydF9yaWdodCAgICMgYmFja3dhcmQgY29tcGF0aWJpbGl0eQoKZGVmIGJpc2VjdF9yaWdodChhLCB4LCBsbz0wLCBoaT1Ob25lKToKICAgICIiIlJldHVybiB0aGUgaW5kZXggd2hlcmUgdG8gaW5zZXJ0IGl0ZW0geCBpbiBsaXN0IGEsIGFzc3VtaW5nIGEgaXMgc29ydGVkLgoKICAgIFRoZSByZXR1cm4gdmFsdWUgaSBpcyBzdWNoIHRoYXQgYWxsIGUgaW4gYVs6aV0gaGF2ZSBlIDw9IHgsIGFuZCBhbGwgZSBpbgogICAgYVtpOl0gaGF2ZSBlID4geC4gIFNvIGlmIHggYWxyZWFkeSBhcHBlYXJzIGluIHRoZSBsaXN0LCBhLmluc2VydCh4KSB3aWxsCiAgICBpbnNlcnQganVzdCBhZnRlciB0aGUgcmlnaHRtb3N0IHggYWxyZWFkeSB0aGVyZS4KCiAgICBPcHRpb25hbCBhcmdzIGxvIChkZWZhdWx0IDApIGFuZCBoaSAoZGVmYXVsdCBsZW4oYSkpIGJvdW5kIHRoZQogICAgc2xpY2Ugb2YgYSB0byBiZSBzZWFyY2hlZC4KICAgICIiIgoKICAgIGlmIGxvIDwgMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdsbyBtdXN0IGJlIG5vbi1uZWdhdGl2ZScpCiAgICBpZiBoaSBpcyBOb25lOgogICAgICAgIGhpID0gbGVuKGEpCiAgICB3aGlsZSBsbyA8IGhpOgogICAgICAgIG1pZCA9IChsbytoaSkvLzIKICAgICAgICBpZiB4IDwgYVttaWRdOiBoaSA9IG1pZAogICAgICAgIGVsc2U6IGxvID0gbWlkKzEKICAgIHJldHVybiBsbwoKYmlzZWN0ID0gYmlzZWN0X3JpZ2h0ICAgIyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5CgpkZWYgaW5zb3J0X2xlZnQoYSwgeCwgbG89MCwgaGk9Tm9uZSk6CiAgICAiIiJJbnNlcnQgaXRlbSB4IGluIGxpc3QgYSwgYW5kIGtlZXAgaXQgc29ydGVkIGFzc3VtaW5nIGEgaXMgc29ydGVkLgoKICAgIElmIHggaXMgYWxyZWFkeSBpbiBhLCBpbnNlcnQgaXQgdG8gdGhlIGxlZnQgb2YgdGhlIGxlZnRtb3N0IHguCgogICAgT3B0aW9uYWwgYXJncyBsbyAoZGVmYXVsdCAwKSBhbmQgaGkgKGRlZmF1bHQgbGVuKGEpKSBib3VuZCB0aGUKICAgIHNsaWNlIG9mIGEgdG8gYmUgc2VhcmNoZWQuCiAgICAiIiIKCiAgICBpZiBsbyA8IDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbG8gbXVzdCBiZSBub24tbmVnYXRpdmUnKQogICAgaWYgaGkgaXMgTm9uZToKICAgICAgICBoaSA9IGxlbihhKQogICAgd2hpbGUgbG8gPCBoaToKICAgICAgICBtaWQgPSAobG8raGkpLy8yCiAgICAgICAgaWYgYVttaWRdIDwgeDogbG8gPSBtaWQrMQogICAgICAgIGVsc2U6IGhpID0gbWlkCiAgICBhLmluc2VydChsbywgeCkKCgpkZWYgYmlzZWN0X2xlZnQoYSwgeCwgbG89MCwgaGk9Tm9uZSk6CiAgICAiIiJSZXR1cm4gdGhlIGluZGV4IHdoZXJlIHRvIGluc2VydCBpdGVtIHggaW4gbGlzdCBhLCBhc3N1bWluZyBhIGlzIHNvcnRlZC4KCiAgICBUaGUgcmV0dXJuIHZhbHVlIGkgaXMgc3VjaCB0aGF0IGFsbCBlIGluIGFbOmldIGhhdmUgZSA8IHgsIGFuZCBhbGwgZSBpbgogICAgYVtpOl0gaGF2ZSBlID49IHguICBTbyBpZiB4IGFscmVhZHkgYXBwZWFycyBpbiB0aGUgbGlzdCwgYS5pbnNlcnQoeCkgd2lsbAogICAgaW5zZXJ0IGp1c3QgYmVmb3JlIHRoZSBsZWZ0bW9zdCB4IGFscmVhZHkgdGhlcmUuCgogICAgT3B0aW9uYWwgYXJncyBsbyAoZGVmYXVsdCAwKSBhbmQgaGkgKGRlZmF1bHQgbGVuKGEpKSBib3VuZCB0aGUKICAgIHNsaWNlIG9mIGEgdG8gYmUgc2VhcmNoZWQuCiAgICAiIiIKCiAgICBpZiBsbyA8IDA6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbG8gbXVzdCBiZSBub24tbmVnYXRpdmUnKQogICAgaWYgaGkgaXMgTm9uZToKICAgICAgICBoaSA9IGxlbihhKQogICAgd2hpbGUgbG8gPCBoaToKICAgICAgICBtaWQgPSAobG8raGkpLy8yCiAgICAgICAgaWYgYVttaWRdIDwgeDogbG8gPSBtaWQrMQogICAgICAgIGVsc2U6IGhpID0gbWlkCiAgICByZXR1cm4gbG8KCiMgZG9udCcgbmVlZCB0aGlzIGZvciBicnl0aG9uCiMgT3ZlcndyaXRlIGFib3ZlIGRlZmluaXRpb25zIHdpdGggYSBmYXN0IEMgaW1wbGVtZW50YXRpb24KI3RyeToKIyAgICBmcm9tIF9iaXNlY3QgaW1wb3J0ICoKI2V4Y2VwdCBJbXBvcnRFcnJvcjoKIyAgICBwYXNzCg==',
'/Lib/collections.py':'I19fYWxsX18gPSBbJ2RlcXVlJywgJ2RlZmF1bHRkaWN0JywgJ0NvdW50ZXInXQoKZnJvbSBfY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlLCBkZWZhdWx0ZGljdAoKI2Zyb20gaXRlcnRvb2xzIGltcG9ydCByZXBlYXQgYXMgX3JlcGVhdCwgY2hhaW4gYXMgX2NoYWluLCBzdGFybWFwIGFzIF9zdGFybWFwCgpfX2FsbF9fID0gWydkZXF1ZScsICdkZWZhdWx0ZGljdCcsICduYW1lZHR1cGxlJywgJ1VzZXJEaWN0JywgJ1VzZXJMaXN0JywKICAgICAgICAgICAgJ1VzZXJTdHJpbmcnLCAnQ291bnRlcicsICdPcmRlcmVkRGljdCddCiMgRm9yIGJvb3RzdHJhcHBpbmcgcmVhc29ucywgdGhlIGNvbGxlY3Rpb24gQUJDcyBhcmUgZGVmaW5lZCBpbiBfYWJjb2xsLnB5LgojIFRoZXkgc2hvdWxkIGhvd2V2ZXIgYmUgY29uc2lkZXJlZCBhbiBpbnRlZ3JhbCBwYXJ0IG9mIGNvbGxlY3Rpb25zLnB5LgoKIyBmaXhtZSBicnl0aG9uLi4gdGhlcmUgaXMgYW4gaXNzdWUgd2l0aCBfYWJjb2xsCiNmcm9tIF9hYmNvbGwgaW1wb3J0ICoKI2Zyb20gX2FiY29sbCBpbXBvcnQgU2V0CmZyb20gX2FiY29sbCBpbXBvcnQgTXV0YWJsZU1hcHBpbmcKI2ltcG9ydCBfYWJjb2xsCiNfX2FsbF9fICs9IF9hYmNvbGwuX19hbGxfXwoKZnJvbSBfY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlLCBkZWZhdWx0ZGljdCwgbmFtZWR0dXBsZQojZml4bWUsIGJyeXRob24uICBUaGlzIGNhdXNlcyBhIFJlZmVyZW5jZUVycm9yOiBpdGVtZ2V0dGVyIGlzIG5vdCBkZWZpbmVkCiNmcm9tIG9wZXJhdG9yIGltcG9ydCBpdGVtZ2V0dGVyIGFzIF9pdGVtZ2V0dGVyCmZyb20ga2V5d29yZCBpbXBvcnQgaXNrZXl3b3JkIGFzIF9pc2tleXdvcmQKaW1wb3J0IHN5cyBhcyBfc3lzCmltcG9ydCBoZWFwcSBhcyBfaGVhcHEKI2ZpeG1lIGJyeXRob24KI2Zyb20gd2Vha3JlZiBpbXBvcnQgcHJveHkgYXMgX3Byb3h5CmZyb20gaXRlcnRvb2xzIGltcG9ydCByZXBlYXQgYXMgX3JlcGVhdCwgY2hhaW4gYXMgX2NoYWluLCBzdGFybWFwIGFzIF9zdGFybWFwCiNmaXhtZSBicnl0aG9uIAojZnJvbSByZXBybGliIGltcG9ydCByZWN1cnNpdmVfcmVwciBhcyBfcmVjdXJzaXZlX3JlcHIKCmNsYXNzIFNldChzZXQpOgogICAgcGFzcwoKY2xhc3MgU2VxdWVuY2UobGlzdCk6CiAgICBwYXNzCgpkZWYgX3Byb3h5KG9iaik6CiAgICByZXR1cm4gb2JqCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgT3JkZXJlZERpY3QKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmNsYXNzIF9MaW5rKG9iamVjdCk6CiAgICBfX3Nsb3RzX18gPSAncHJldicsICduZXh0JywgJ2tleScsICdfX3dlYWtyZWZfXycKCmNsYXNzIE9yZGVyZWREaWN0KGRpY3QpOgogICAgJ0RpY3Rpb25hcnkgdGhhdCByZW1lbWJlcnMgaW5zZXJ0aW9uIG9yZGVyJwogICAgIyBBbiBpbmhlcml0ZWQgZGljdCBtYXBzIGtleXMgdG8gdmFsdWVzLgogICAgIyBUaGUgaW5oZXJpdGVkIGRpY3QgcHJvdmlkZXMgX19nZXRpdGVtX18sIF9fbGVuX18sIF9fY29udGFpbnNfXywgYW5kIGdldC4KICAgICMgVGhlIHJlbWFpbmluZyBtZXRob2RzIGFyZSBvcmRlci1hd2FyZS4KICAgICMgQmlnLU8gcnVubmluZyB0aW1lcyBmb3IgYWxsIG1ldGhvZHMgYXJlIHRoZSBzYW1lIGFzIHJlZ3VsYXIgZGljdGlvbmFyaWVzLgoKICAgICMgVGhlIGludGVybmFsIHNlbGYuX19tYXAgZGljdCBtYXBzIGtleXMgdG8gbGlua3MgaW4gYSBkb3VibHkgbGlua2VkIGxpc3QuCiAgICAjIFRoZSBjaXJjdWxhciBkb3VibHkgbGlua2VkIGxpc3Qgc3RhcnRzIGFuZCBlbmRzIHdpdGggYSBzZW50aW5lbCBlbGVtZW50LgogICAgIyBUaGUgc2VudGluZWwgZWxlbWVudCBuZXZlciBnZXRzIGRlbGV0ZWQgKHRoaXMgc2ltcGxpZmllcyB0aGUgYWxnb3JpdGhtKS4KICAgICMgVGhlIHNlbnRpbmVsIGlzIGluIHNlbGYuX19oYXJkcm9vdCB3aXRoIGEgd2Vha3JlZiBwcm94eSBpbiBzZWxmLl9fcm9vdC4KICAgICMgVGhlIHByZXYgbGlua3MgYXJlIHdlYWtyZWYgcHJveGllcyAodG8gcHJldmVudCBjaXJjdWxhciByZWZlcmVuY2VzKS4KICAgICMgSW5kaXZpZHVhbCBsaW5rcyBhcmUga2VwdCBhbGl2ZSBieSB0aGUgaGFyZCByZWZlcmVuY2UgaW4gc2VsZi5fX21hcC4KICAgICMgVGhvc2UgaGFyZCByZWZlcmVuY2VzIGRpc2FwcGVhciB3aGVuIGEga2V5IGlzIGRlbGV0ZWQgZnJvbSBhbiBPcmRlcmVkRGljdC4KCiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgJycnSW5pdGlhbGl6ZSBhbiBvcmRlcmVkIGRpY3Rpb25hcnkuICBUaGUgc2lnbmF0dXJlIGlzIHRoZSBzYW1lIGFzCiAgICAgICAgcmVndWxhciBkaWN0aW9uYXJpZXMsIGJ1dCBrZXl3b3JkIGFyZ3VtZW50cyBhcmUgbm90IHJlY29tbWVuZGVkIGJlY2F1c2UKICAgICAgICB0aGVpciBpbnNlcnRpb24gb3JkZXIgaXMgYXJiaXRyYXJ5LgoKICAgICAgICAnJycKICAgICAgICBpZiBsZW4oYXJncykgPiAxOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2V4cGVjdGVkIGF0IG1vc3QgMSBhcmd1bWVudHMsIGdvdCAlZCcgJSBsZW4oYXJncykpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLl9fcm9vdAogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgc2VsZi5fX2hhcmRyb290ID0gX0xpbmsoKQogICAgICAgICAgICBzZWxmLl9fcm9vdCA9IHJvb3QgPSBfcHJveHkoc2VsZi5fX2hhcmRyb290KQogICAgICAgICAgICByb290LnByZXYgPSByb290Lm5leHQgPSByb290CiAgICAgICAgICAgIHNlbGYuX19tYXAgPSB7fQogICAgICAgIHNlbGYuX191cGRhdGUoKmFyZ3MsICoqa3dkcykKCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICBkaWN0X3NldGl0ZW09ZGljdC5fX3NldGl0ZW1fXywgcHJveHk9X3Byb3h5LCBMaW5rPV9MaW5rKToKICAgICAgICAnb2QuX19zZXRpdGVtX18oaSwgeSkgPD09PiBvZFtpXT15JwogICAgICAgICMgU2V0dGluZyBhIG5ldyBpdGVtIGNyZWF0ZXMgYSBuZXcgbGluayBhdCB0aGUgZW5kIG9mIHRoZSBsaW5rZWQgbGlzdCwKICAgICAgICAjIGFuZCB0aGUgaW5oZXJpdGVkIGRpY3Rpb25hcnkgaXMgdXBkYXRlZCB3aXRoIHRoZSBuZXcga2V5L3ZhbHVlIHBhaXIuCiAgICAgICAgaWYga2V5IG5vdCBpbiBzZWxmOgogICAgICAgICAgICBzZWxmLl9fbWFwW2tleV0gPSBsaW5rID0gTGluaygpCiAgICAgICAgICAgIHJvb3QgPSBzZWxmLl9fcm9vdAogICAgICAgICAgICBsYXN0ID0gcm9vdC5wcmV2CiAgICAgICAgICAgIGxpbmsucHJldiwgbGluay5uZXh0LCBsaW5rLmtleSA9IGxhc3QsIHJvb3QsIGtleQogICAgICAgICAgICBsYXN0Lm5leHQgPSBsaW5rCiAgICAgICAgICAgIHJvb3QucHJldiA9IHByb3h5KGxpbmspCiAgICAgICAgZGljdF9zZXRpdGVtKHNlbGYsIGtleSwgdmFsdWUpCgogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGtleSwgZGljdF9kZWxpdGVtPWRpY3QuX19kZWxpdGVtX18pOgogICAgICAgICdvZC5fX2RlbGl0ZW1fXyh5KSA8PT0+IGRlbCBvZFt5XScKICAgICAgICAjIERlbGV0aW5nIGFuIGV4aXN0aW5nIGl0ZW0gdXNlcyBzZWxmLl9fbWFwIHRvIGZpbmQgdGhlIGxpbmsgd2hpY2ggZ2V0cwogICAgICAgICMgcmVtb3ZlZCBieSB1cGRhdGluZyB0aGUgbGlua3MgaW4gdGhlIHByZWRlY2Vzc29yIGFuZCBzdWNjZXNzb3Igbm9kZXMuCiAgICAgICAgZGljdF9kZWxpdGVtKHNlbGYsIGtleSkKICAgICAgICBsaW5rID0gc2VsZi5fX21hcC5wb3Aoa2V5KQogICAgICAgIGxpbmtfcHJldiA9IGxpbmsucHJldgogICAgICAgIGxpbmtfbmV4dCA9IGxpbmsubmV4dAogICAgICAgIGxpbmtfcHJldi5uZXh0ID0gbGlua19uZXh0CiAgICAgICAgbGlua19uZXh0LnByZXYgPSBsaW5rX3ByZXYKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgJ29kLl9faXRlcl9fKCkgPD09PiBpdGVyKG9kKScKICAgICAgICAjIFRyYXZlcnNlIHRoZSBsaW5rZWQgbGlzdCBpbiBvcmRlci4KICAgICAgICByb290ID0gc2VsZi5fX3Jvb3QKICAgICAgICBjdXJyID0gcm9vdC5uZXh0CiAgICAgICAgd2hpbGUgY3VyciBpcyBub3Qgcm9vdDoKICAgICAgICAgICAgeWllbGQgY3Vyci5rZXkKICAgICAgICAgICAgY3VyciA9IGN1cnIubmV4dAoKICAgIGRlZiBfX3JldmVyc2VkX18oc2VsZik6CiAgICAgICAgJ29kLl9fcmV2ZXJzZWRfXygpIDw9PT4gcmV2ZXJzZWQob2QpJwogICAgICAgICMgVHJhdmVyc2UgdGhlIGxpbmtlZCBsaXN0IGluIHJldmVyc2Ugb3JkZXIuCiAgICAgICAgcm9vdCA9IHNlbGYuX19yb290CiAgICAgICAgY3VyciA9IHJvb3QucHJldgogICAgICAgIHdoaWxlIGN1cnIgaXMgbm90IHJvb3Q6CiAgICAgICAgICAgIHlpZWxkIGN1cnIua2V5CiAgICAgICAgICAgIGN1cnIgPSBjdXJyLnByZXYKCiAgICBkZWYgY2xlYXIoc2VsZik6CiAgICAgICAgJ29kLmNsZWFyKCkgLT4gTm9uZS4gIFJlbW92ZSBhbGwgaXRlbXMgZnJvbSBvZC4nCiAgICAgICAgcm9vdCA9IHNlbGYuX19yb290CiAgICAgICAgcm9vdC5wcmV2ID0gcm9vdC5uZXh0ID0gcm9vdAogICAgICAgIHNlbGYuX19tYXAuY2xlYXIoKQogICAgICAgIGRpY3QuY2xlYXIoc2VsZikKCiAgICBkZWYgcG9waXRlbShzZWxmLCBsYXN0PVRydWUpOgogICAgICAgICcnJ29kLnBvcGl0ZW0oKSAtPiAoaywgdiksIHJldHVybiBhbmQgcmVtb3ZlIGEgKGtleSwgdmFsdWUpIHBhaXIuCiAgICAgICAgUGFpcnMgYXJlIHJldHVybmVkIGluIExJRk8gb3JkZXIgaWYgbGFzdCBpcyB0cnVlIG9yIEZJRk8gb3JkZXIgaWYgZmFsc2UuCgogICAgICAgICcnJwogICAgICAgIGlmIG5vdCBzZWxmOgogICAgICAgICAgICByYWlzZSBLZXlFcnJvcignZGljdGlvbmFyeSBpcyBlbXB0eScpCiAgICAgICAgcm9vdCA9IHNlbGYuX19yb290CiAgICAgICAgaWYgbGFzdDoKICAgICAgICAgICAgbGluayA9IHJvb3QucHJldgogICAgICAgICAgICBsaW5rX3ByZXYgPSBsaW5rLnByZXYKICAgICAgICAgICAgbGlua19wcmV2Lm5leHQgPSByb290CiAgICAgICAgICAgIHJvb3QucHJldiA9IGxpbmtfcHJldgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGxpbmsgPSByb290Lm5leHQKICAgICAgICAgICAgbGlua19uZXh0ID0gbGluay5uZXh0CiAgICAgICAgICAgIHJvb3QubmV4dCA9IGxpbmtfbmV4dAogICAgICAgICAgICBsaW5rX25leHQucHJldiA9IHJvb3QKICAgICAgICBrZXkgPSBsaW5rLmtleQogICAgICAgIGRlbCBzZWxmLl9fbWFwW2tleV0KICAgICAgICB2YWx1ZSA9IGRpY3QucG9wKHNlbGYsIGtleSkKICAgICAgICByZXR1cm4ga2V5LCB2YWx1ZQoKICAgIGRlZiBtb3ZlX3RvX2VuZChzZWxmLCBrZXksIGxhc3Q9VHJ1ZSk6CiAgICAgICAgJycnTW92ZSBhbiBleGlzdGluZyBlbGVtZW50IHRvIHRoZSBlbmQgKG9yIGJlZ2lubmluZyBpZiBsYXN0PT1GYWxzZSkuCgogICAgICAgIFJhaXNlcyBLZXlFcnJvciBpZiB0aGUgZWxlbWVudCBkb2VzIG5vdCBleGlzdC4KICAgICAgICBXaGVuIGxhc3Q9VHJ1ZSwgYWN0cyBsaWtlIGEgZmFzdCB2ZXJzaW9uIG9mIHNlbGZba2V5XT1zZWxmLnBvcChrZXkpLgoKICAgICAgICAnJycKICAgICAgICBsaW5rID0gc2VsZi5fX21hcFtrZXldCiAgICAgICAgbGlua19wcmV2ID0gbGluay5wcmV2CiAgICAgICAgbGlua19uZXh0ID0gbGluay5uZXh0CiAgICAgICAgbGlua19wcmV2Lm5leHQgPSBsaW5rX25leHQKICAgICAgICBsaW5rX25leHQucHJldiA9IGxpbmtfcHJldgogICAgICAgIHJvb3QgPSBzZWxmLl9fcm9vdAogICAgICAgIGlmIGxhc3Q6CiAgICAgICAgICAgIGxhc3QgPSByb290LnByZXYKICAgICAgICAgICAgbGluay5wcmV2ID0gbGFzdAogICAgICAgICAgICBsaW5rLm5leHQgPSByb290CiAgICAgICAgICAgIGxhc3QubmV4dCA9IHJvb3QucHJldiA9IGxpbmsKICAgICAgICBlbHNlOgogICAgICAgICAgICBmaXJzdCA9IHJvb3QubmV4dAogICAgICAgICAgICBsaW5rLnByZXYgPSByb290CiAgICAgICAgICAgIGxpbmsubmV4dCA9IGZpcnN0CiAgICAgICAgICAgIHJvb3QubmV4dCA9IGZpcnN0LnByZXYgPSBsaW5rCgogICAgZGVmIF9fc2l6ZW9mX18oc2VsZik6CiAgICAgICAgc2l6ZW9mID0gX3N5cy5nZXRzaXplb2YKICAgICAgICBuID0gbGVuKHNlbGYpICsgMSAgICAgICAgICAgICAgICAgICAgICAgIyBudW1iZXIgb2YgbGlua3MgaW5jbHVkaW5nIHJvb3QKICAgICAgICBzaXplID0gc2l6ZW9mKHNlbGYuX19kaWN0X18pICAgICAgICAgICAgIyBpbnN0YW5jZSBkaWN0aW9uYXJ5CiAgICAgICAgc2l6ZSArPSBzaXplb2Yoc2VsZi5fX21hcCkgKiAyICAgICAgICAgICMgaW50ZXJuYWwgZGljdCBhbmQgaW5oZXJpdGVkIGRpY3QKICAgICAgICBzaXplICs9IHNpemVvZihzZWxmLl9faGFyZHJvb3QpICogbiAgICAgIyBsaW5rIG9iamVjdHMKICAgICAgICBzaXplICs9IHNpemVvZihzZWxmLl9fcm9vdCkgKiBuICAgICAgICAgIyBwcm94eSBvYmplY3RzCiAgICAgICAgcmV0dXJuIHNpemUKCiAgICAjZml4bWUgYnJ5dGhvbi4uICBJc3N1ZSB3aXRoIF9hYmNvbGwsIHdoaWNoIGNvbnRhaW5zIE11dGFibGVNYXBwaW5nCiAgICB1cGRhdGUgPSBfX3VwZGF0ZSA9IE11dGFibGVNYXBwaW5nLnVwZGF0ZQogICAga2V5cyA9IE11dGFibGVNYXBwaW5nLmtleXMKICAgIHZhbHVlcyA9IE11dGFibGVNYXBwaW5nLnZhbHVlcwogICAgaXRlbXMgPSBNdXRhYmxlTWFwcGluZy5pdGVtcwogICAgX19uZV9fID0gTXV0YWJsZU1hcHBpbmcuX19uZV9fCgogICAgX19tYXJrZXIgPSBvYmplY3QoKQoKICAgIGRlZiBwb3Aoc2VsZiwga2V5LCBkZWZhdWx0PV9fbWFya2VyKToKICAgICAgICAnJydvZC5wb3Aoa1ssZF0pIC0+IHYsIHJlbW92ZSBzcGVjaWZpZWQga2V5IGFuZCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcKICAgICAgICB2YWx1ZS4gIElmIGtleSBpcyBub3QgZm91bmQsIGQgaXMgcmV0dXJuZWQgaWYgZ2l2ZW4sIG90aGVyd2lzZSBLZXlFcnJvcgogICAgICAgIGlzIHJhaXNlZC4KCiAgICAgICAgJycnCiAgICAgICAgaWYga2V5IGluIHNlbGY6CiAgICAgICAgICAgIHJlc3VsdCA9IHNlbGZba2V5XQogICAgICAgICAgICBkZWwgc2VsZltrZXldCiAgICAgICAgICAgIHJldHVybiByZXN1bHQKICAgICAgICBpZiBkZWZhdWx0IGlzIHNlbGYuX19tYXJrZXI6CiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSkKICAgICAgICByZXR1cm4gZGVmYXVsdAoKICAgIGRlZiBzZXRkZWZhdWx0KHNlbGYsIGtleSwgZGVmYXVsdD1Ob25lKToKICAgICAgICAnb2Quc2V0ZGVmYXVsdChrWyxkXSkgLT4gb2QuZ2V0KGssZCksIGFsc28gc2V0IG9kW2tdPWQgaWYgayBub3QgaW4gb2QnCiAgICAgICAgaWYga2V5IGluIHNlbGY6CiAgICAgICAgICAgIHJldHVybiBzZWxmW2tleV0KICAgICAgICBzZWxmW2tleV0gPSBkZWZhdWx0CiAgICAgICAgcmV0dXJuIGRlZmF1bHQKCiAgICAjZml4bWUsIGJyeXRob24gaXNzdWUKICAgICNAX3JlY3Vyc2l2ZV9yZXByKCkKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICAnb2QuX19yZXByX18oKSA8PT0+IHJlcHIob2QpJwogICAgICAgIGlmIG5vdCBzZWxmOgogICAgICAgICAgICByZXR1cm4gJyVzKCknICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCkKICAgICAgICByZXR1cm4gJyVzKCVyKScgJSAoc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIGxpc3Qoc2VsZi5pdGVtcygpKSkKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICAnUmV0dXJuIHN0YXRlIGluZm9ybWF0aW9uIGZvciBwaWNrbGluZycKICAgICAgICBpdGVtcyA9IFtbaywgc2VsZltrXV0gZm9yIGsgaW4gc2VsZl0KICAgICAgICBpbnN0X2RpY3QgPSB2YXJzKHNlbGYpLmNvcHkoKQogICAgICAgIGZvciBrIGluIHZhcnMoT3JkZXJlZERpY3QoKSk6CiAgICAgICAgICAgIGluc3RfZGljdC5wb3AoaywgTm9uZSkKICAgICAgICBpZiBpbnN0X2RpY3Q6CiAgICAgICAgICAgIHJldHVybiAoc2VsZi5fX2NsYXNzX18sIChpdGVtcywpLCBpbnN0X2RpY3QpCiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fLCAoaXRlbXMsKQoKICAgIGRlZiBjb3B5KHNlbGYpOgogICAgICAgICdvZC5jb3B5KCkgLT4gYSBzaGFsbG93IGNvcHkgb2Ygb2QnCiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKHNlbGYpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbWtleXMoY2xzLCBpdGVyYWJsZSwgdmFsdWU9Tm9uZSk6CiAgICAgICAgJycnT0QuZnJvbWtleXMoU1ssIHZdKSAtPiBOZXcgb3JkZXJlZCBkaWN0aW9uYXJ5IHdpdGgga2V5cyBmcm9tIFMuCiAgICAgICAgSWYgbm90IHNwZWNpZmllZCwgdGhlIHZhbHVlIGRlZmF1bHRzIHRvIE5vbmUuCgogICAgICAgICcnJwogICAgICAgIHNlbGYgPSBjbHMoKQogICAgICAgIGZvciBrZXkgaW4gaXRlcmFibGU6CiAgICAgICAgICAgIHNlbGZba2V5XSA9IHZhbHVlCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICAnJydvZC5fX2VxX18oeSkgPD09PiBvZD09eS4gIENvbXBhcmlzb24gdG8gYW5vdGhlciBPRCBpcyBvcmRlci1zZW5zaXRpdmUKICAgICAgICB3aGlsZSBjb21wYXJpc29uIHRvIGEgcmVndWxhciBtYXBwaW5nIGlzIG9yZGVyLWluc2Vuc2l0aXZlLgoKICAgICAgICAnJycKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBPcmRlcmVkRGljdCk6CiAgICAgICAgICAgIHJldHVybiBsZW4oc2VsZik9PWxlbihvdGhlcikgYW5kIFwKICAgICAgICAgICAgICAgICAgIGFsbChwPT1xIGZvciBwLCBxIGluIHppcChzZWxmLml0ZW1zKCksIG90aGVyLml0ZW1zKCkpKQogICAgICAgIHJldHVybiBkaWN0Ll9fZXFfXyhzZWxmLCBvdGhlcikKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjICBDb3VudGVyCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCmRlZiBfY291bnRfZWxlbWVudHMobWFwcGluZywgaXRlcmFibGUpOgogICAgJ1RhbGx5IGVsZW1lbnRzIGZyb20gdGhlIGl0ZXJhYmxlLicKICAgIG1hcHBpbmdfZ2V0ID0gbWFwcGluZy5nZXQKICAgIGZvciBlbGVtIGluIGl0ZXJhYmxlOgogICAgICAgIG1hcHBpbmdbZWxlbV0gPSBtYXBwaW5nX2dldChlbGVtLCAwKSArIDEKCiN0cnk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBMb2FkIEMgaGVscGVyIGZ1bmN0aW9uIGlmIGF2YWlsYWJsZQojICAgIGZyb20gX2NvbGxlY3Rpb25zIGltcG9ydCBfY291bnRfZWxlbWVudHMKI2V4Y2VwdCBJbXBvcnRFcnJvcjoKIyAgICBwYXNzCgpjbGFzcyBDb3VudGVyKGRpY3QpOgogICAgJycnRGljdCBzdWJjbGFzcyBmb3IgY291bnRpbmcgaGFzaGFibGUgaXRlbXMuICBTb21ldGltZXMgY2FsbGVkIGEgYmFnCiAgICBvciBtdWx0aXNldC4gIEVsZW1lbnRzIGFyZSBzdG9yZWQgYXMgZGljdGlvbmFyeSBrZXlzIGFuZCB0aGVpciBjb3VudHMKICAgIGFyZSBzdG9yZWQgYXMgZGljdGlvbmFyeSB2YWx1ZXMuCgogICAgPj4+IGMgPSBDb3VudGVyKCdhYmNkZWFiY2RhYmNhYmEnKSAgIyBjb3VudCBlbGVtZW50cyBmcm9tIGEgc3RyaW5nCgogICAgPj4+IGMubW9zdF9jb21tb24oMykgICAgICAgICAgICAgICAgIyB0aHJlZSBtb3N0IGNvbW1vbiBlbGVtZW50cwogICAgWygnYScsIDUpLCAoJ2InLCA0KSwgKCdjJywgMyldCiAgICA+Pj4gc29ydGVkKGMpICAgICAgICAgICAgICAgICAgICAgICAjIGxpc3QgYWxsIHVuaXF1ZSBlbGVtZW50cwogICAgWydhJywgJ2InLCAnYycsICdkJywgJ2UnXQogICAgPj4+ICcnLmpvaW4oc29ydGVkKGMuZWxlbWVudHMoKSkpICAgIyBsaXN0IGVsZW1lbnRzIHdpdGggcmVwZXRpdGlvbnMKICAgICdhYWFhYWJiYmJjY2NkZGUnCiAgICA+Pj4gc3VtKGMudmFsdWVzKCkpICAgICAgICAgICAgICAgICAjIHRvdGFsIG9mIGFsbCBjb3VudHMKICAgIDE1CgogICAgPj4+IGNbJ2EnXSAgICAgICAgICAgICAgICAgICAgICAgICAgIyBjb3VudCBvZiBsZXR0ZXIgJ2EnCiAgICA1CiAgICA+Pj4gZm9yIGVsZW0gaW4gJ3NoYXphbSc6ICAgICAgICAgICAjIHVwZGF0ZSBjb3VudHMgZnJvbSBhbiBpdGVyYWJsZQogICAgLi4uICAgICBjW2VsZW1dICs9IDEgICAgICAgICAgICAgICAgIyBieSBhZGRpbmcgMSB0byBlYWNoIGVsZW1lbnQncyBjb3VudAogICAgPj4+IGNbJ2EnXSAgICAgICAgICAgICAgICAgICAgICAgICAgIyBub3cgdGhlcmUgYXJlIHNldmVuICdhJwogICAgNwogICAgPj4+IGRlbCBjWydiJ10gICAgICAgICAgICAgICAgICAgICAgIyByZW1vdmUgYWxsICdiJwogICAgPj4+IGNbJ2InXSAgICAgICAgICAgICAgICAgICAgICAgICAgIyBub3cgdGhlcmUgYXJlIHplcm8gJ2InCiAgICAwCgogICAgPj4+IGQgPSBDb3VudGVyKCdzaW1zYWxhYmltJykgICAgICAgIyBtYWtlIGFub3RoZXIgY291bnRlcgogICAgPj4+IGMudXBkYXRlKGQpICAgICAgICAgICAgICAgICAgICAgIyBhZGQgaW4gdGhlIHNlY29uZCBjb3VudGVyCiAgICA+Pj4gY1snYSddICAgICAgICAgICAgICAgICAgICAgICAgICAjIG5vdyB0aGVyZSBhcmUgbmluZSAnYScKICAgIDkKCiAgICA+Pj4gYy5jbGVhcigpICAgICAgICAgICAgICAgICAgICAgICAjIGVtcHR5IHRoZSBjb3VudGVyCiAgICA+Pj4gYwogICAgQ291bnRlcigpCgogICAgTm90ZTogIElmIGEgY291bnQgaXMgc2V0IHRvIHplcm8gb3IgcmVkdWNlZCB0byB6ZXJvLCBpdCB3aWxsIHJlbWFpbgogICAgaW4gdGhlIGNvdW50ZXIgdW50aWwgdGhlIGVudHJ5IGlzIGRlbGV0ZWQgb3IgdGhlIGNvdW50ZXIgaXMgY2xlYXJlZDoKCiAgICA+Pj4gYyA9IENvdW50ZXIoJ2FhYWJiYycpCiAgICA+Pj4gY1snYiddIC09IDIgICAgICAgICAgICAgICAgICAgICAjIHJlZHVjZSB0aGUgY291bnQgb2YgJ2InIGJ5IHR3bwogICAgPj4+IGMubW9zdF9jb21tb24oKSAgICAgICAgICAgICAgICAgIyAnYicgaXMgc3RpbGwgaW4sIGJ1dCBpdHMgY291bnQgaXMgemVybwogICAgWygnYScsIDMpLCAoJ2MnLCAxKSwgKCdiJywgMCldCgogICAgJycnCiAgICAjIFJlZmVyZW5jZXM6CiAgICAjICAgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NdWx0aXNldAogICAgIyAgIGh0dHA6Ly93d3cuZ251Lm9yZy9zb2Z0d2FyZS9zbWFsbHRhbGsvbWFudWFsLWJhc2UvaHRtbF9ub2RlL0JhZy5odG1sCiAgICAjICAgaHR0cDovL3d3dy5kZW1vMnMuY29tL1R1dG9yaWFsL0NwcC8wMzgwX19zZXQtbXVsdGlzZXQvQ2F0YWxvZzAzODBfX3NldC1tdWx0aXNldC5odG0KICAgICMgICBodHRwOi8vY29kZS5hY3RpdmVzdGF0ZS5jb20vcmVjaXBlcy8yNTkxNzQvCiAgICAjICAgS251dGgsIFRBT0NQIFZvbC4gSUkgc2VjdGlvbiA0LjYuMwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVyYWJsZT1Ob25lLCAqKmt3ZHMpOgogICAgICAgICcnJ0NyZWF0ZSBhIG5ldywgZW1wdHkgQ291bnRlciBvYmplY3QuICBBbmQgaWYgZ2l2ZW4sIGNvdW50IGVsZW1lbnRzCiAgICAgICAgZnJvbSBhbiBpbnB1dCBpdGVyYWJsZS4gIE9yLCBpbml0aWFsaXplIHRoZSBjb3VudCBmcm9tIGFub3RoZXIgbWFwcGluZwogICAgICAgIG9mIGVsZW1lbnRzIHRvIHRoZWlyIGNvdW50cy4KCiAgICAgICAgPj4+IGMgPSBDb3VudGVyKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGEgbmV3LCBlbXB0eSBjb3VudGVyCiAgICAgICAgPj4+IGMgPSBDb3VudGVyKCdnYWxsYWhhZCcpICAgICAgICAgICAgICAgICAjIGEgbmV3IGNvdW50ZXIgZnJvbSBhbiBpdGVyYWJsZQogICAgICAgID4+PiBjID0gQ291bnRlcih7J2EnOiA0LCAnYic6IDJ9KSAgICAgICAgICAgIyBhIG5ldyBjb3VudGVyIGZyb20gYSBtYXBwaW5nCiAgICAgICAgPj4+IGMgPSBDb3VudGVyKGE9NCwgYj0yKSAgICAgICAgICAgICAgICAgICAjIGEgbmV3IGNvdW50ZXIgZnJvbSBrZXl3b3JkIGFyZ3MKCiAgICAgICAgJycnCiAgICAgICAgI3N1cGVyKCkuX19pbml0X18oKSAgI0JFIG1vZGlmaWVkIHNpbmNlIHN1cGVyIG5vdCBzdXBwb3J0ZWQKICAgICAgICBkaWN0Ll9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi51cGRhdGUoaXRlcmFibGUsICoqa3dkcykKCiAgICBkZWYgX19taXNzaW5nX18oc2VsZiwga2V5KToKICAgICAgICAnVGhlIGNvdW50IG9mIGVsZW1lbnRzIG5vdCBpbiB0aGUgQ291bnRlciBpcyB6ZXJvLicKICAgICAgICAjIE5lZWRlZCBzbyB0aGF0IHNlbGZbbWlzc2luZ19pdGVtXSBkb2VzIG5vdCByYWlzZSBLZXlFcnJvcgogICAgICAgIHJldHVybiAwCgogICAgZGVmIG1vc3RfY29tbW9uKHNlbGYsIG49Tm9uZSk6CiAgICAgICAgJycnTGlzdCB0aGUgbiBtb3N0IGNvbW1vbiBlbGVtZW50cyBhbmQgdGhlaXIgY291bnRzIGZyb20gdGhlIG1vc3QKICAgICAgICBjb21tb24gdG8gdGhlIGxlYXN0LiAgSWYgbiBpcyBOb25lLCB0aGVuIGxpc3QgYWxsIGVsZW1lbnQgY291bnRzLgoKICAgICAgICA+Pj4gQ291bnRlcignYWJjZGVhYmNkYWJjYWJhJykubW9zdF9jb21tb24oMykKICAgICAgICBbKCdhJywgNSksICgnYicsIDQpLCAoJ2MnLCAzKV0KCiAgICAgICAgJycnCiAgICAgICAgIyBFbXVsYXRlIEJhZy5zb3J0ZWRCeUNvdW50IGZyb20gU21hbGx0YWxrCiAgICAgICAgaWYgbiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gc29ydGVkKHNlbGYuaXRlbXMoKSwga2V5PV9pdGVtZ2V0dGVyKDEpLCByZXZlcnNlPVRydWUpCiAgICAgICAgcmV0dXJuIF9oZWFwcS5ubGFyZ2VzdChuLCBzZWxmLml0ZW1zKCksIGtleT1faXRlbWdldHRlcigxKSkKCiAgICBkZWYgZWxlbWVudHMoc2VsZik6CiAgICAgICAgJycnSXRlcmF0b3Igb3ZlciBlbGVtZW50cyByZXBlYXRpbmcgZWFjaCBhcyBtYW55IHRpbWVzIGFzIGl0cyBjb3VudC4KCiAgICAgICAgPj4+IGMgPSBDb3VudGVyKCdBQkNBQkMnKQogICAgICAgID4+PiBzb3J0ZWQoYy5lbGVtZW50cygpKQogICAgICAgIFsnQScsICdBJywgJ0InLCAnQicsICdDJywgJ0MnXQoKICAgICAgICAjIEtudXRoJ3MgZXhhbXBsZSBmb3IgcHJpbWUgZmFjdG9ycyBvZiAxODM2OiAgMioqMiAqIDMqKjMgKiAxNyoqMQogICAgICAgID4+PiBwcmltZV9mYWN0b3JzID0gQ291bnRlcih7MjogMiwgMzogMywgMTc6IDF9KQogICAgICAgID4+PiBwcm9kdWN0ID0gMQogICAgICAgID4+PiBmb3IgZmFjdG9yIGluIHByaW1lX2ZhY3RvcnMuZWxlbWVudHMoKTogICAgICMgbG9vcCBvdmVyIGZhY3RvcnMKICAgICAgICAuLi4gICAgIHByb2R1Y3QgKj0gZmFjdG9yICAgICAgICAgICAgICAgICAgICAgICAjIGFuZCBtdWx0aXBseSB0aGVtCiAgICAgICAgPj4+IHByb2R1Y3QKICAgICAgICAxODM2CgogICAgICAgIE5vdGUsIGlmIGFuIGVsZW1lbnQncyBjb3VudCBoYXMgYmVlbiBzZXQgdG8gemVybyBvciBpcyBhIG5lZ2F0aXZlCiAgICAgICAgbnVtYmVyLCBlbGVtZW50cygpIHdpbGwgaWdub3JlIGl0LgoKICAgICAgICAnJycKICAgICAgICAjIEVtdWxhdGUgQmFnLmRvIGZyb20gU21hbGx0YWxrIGFuZCBNdWx0aXNldC5iZWdpbiBmcm9tIEMrKy4KICAgICAgICByZXR1cm4gX2NoYWluLmZyb21faXRlcmFibGUoX3N0YXJtYXAoX3JlcGVhdCwgc2VsZi5pdGVtcygpKSkKCiAgICAjIE92ZXJyaWRlIGRpY3QgbWV0aG9kcyB3aGVyZSBuZWNlc3NhcnkKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9ta2V5cyhjbHMsIGl0ZXJhYmxlLCB2PU5vbmUpOgogICAgICAgICMgVGhlcmUgaXMgbm8gZXF1aXZhbGVudCBtZXRob2QgZm9yIGNvdW50ZXJzIGJlY2F1c2Ugc2V0dGluZyB2PTEKICAgICAgICAjIG1lYW5zIHRoYXQgbm8gZWxlbWVudCBjYW4gaGF2ZSBhIGNvdW50IGdyZWF0ZXIgdGhhbiBvbmUuCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigKICAgICAgICAgICAgJ0NvdW50ZXIuZnJvbWtleXMoKSBpcyB1bmRlZmluZWQuICBVc2UgQ291bnRlcihpdGVyYWJsZSkgaW5zdGVhZC4nKQoKICAgIGRlZiB1cGRhdGUoc2VsZiwgaXRlcmFibGU9Tm9uZSwgKiprd2RzKToKICAgICAgICAnJydMaWtlIGRpY3QudXBkYXRlKCkgYnV0IGFkZCBjb3VudHMgaW5zdGVhZCBvZiByZXBsYWNpbmcgdGhlbS4KCiAgICAgICAgU291cmNlIGNhbiBiZSBhbiBpdGVyYWJsZSwgYSBkaWN0aW9uYXJ5LCBvciBhbm90aGVyIENvdW50ZXIgaW5zdGFuY2UuCgogICAgICAgID4+PiBjID0gQ291bnRlcignd2hpY2gnKQogICAgICAgID4+PiBjLnVwZGF0ZSgnd2l0Y2gnKSAgICAgICAgICAgIyBhZGQgZWxlbWVudHMgZnJvbSBhbm90aGVyIGl0ZXJhYmxlCiAgICAgICAgPj4+IGQgPSBDb3VudGVyKCd3YXRjaCcpCiAgICAgICAgPj4+IGMudXBkYXRlKGQpICAgICAgICAgICAgICAgICAjIGFkZCBlbGVtZW50cyBmcm9tIGFub3RoZXIgY291bnRlcgogICAgICAgID4+PiBjWydoJ10gICAgICAgICAgICAgICAgICAgICAgIyBmb3VyICdoJyBpbiB3aGljaCwgd2l0Y2gsIGFuZCB3YXRjaAogICAgICAgIDQKCiAgICAgICAgJycnCiAgICAgICAgIyBUaGUgcmVndWxhciBkaWN0LnVwZGF0ZSgpIG9wZXJhdGlvbiBtYWtlcyBubyBzZW5zZSBoZXJlIGJlY2F1c2UgdGhlCiAgICAgICAgIyByZXBsYWNlIGJlaGF2aW9yIHJlc3VsdHMgaW4gdGhlIHNvbWUgb2Ygb3JpZ2luYWwgdW50b3VjaGVkIGNvdW50cwogICAgICAgICMgYmVpbmcgbWl4ZWQtaW4gd2l0aCBhbGwgb2YgdGhlIG90aGVyIGNvdW50cyBmb3IgYSBtaXNtYXNoIHRoYXQKICAgICAgICAjIGRvZXNuJ3QgaGF2ZSBhIHN0cmFpZ2h0LWZvcndhcmQgaW50ZXJwcmV0YXRpb24gaW4gbW9zdCBjb3VudGluZwogICAgICAgICMgY29udGV4dHMuICBJbnN0ZWFkLCB3ZSBpbXBsZW1lbnQgc3RyYWlnaHQtYWRkaXRpb24uICBCb3RoIHRoZSBpbnB1dHMKICAgICAgICAjIGFuZCBvdXRwdXRzIGFyZSBhbGxvd2VkIHRvIGNvbnRhaW4gemVybyBhbmQgbmVnYXRpdmUgY291bnRzLgoKICAgICAgICBpZiBpdGVyYWJsZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShpdGVyYWJsZSwgTWFwcGluZyk6CiAgICAgICAgICAgICAgICBpZiBzZWxmOgogICAgICAgICAgICAgICAgICAgIHNlbGZfZ2V0ID0gc2VsZi5nZXQKICAgICAgICAgICAgICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gaXRlcmFibGUuaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZltlbGVtXSA9IGNvdW50ICsgc2VsZl9nZXQoZWxlbSwgMCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc3VwZXIoKS51cGRhdGUoaXRlcmFibGUpICMgZmFzdCBwYXRoIHdoZW4gY291bnRlciBpcyBlbXB0eQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgX2NvdW50X2VsZW1lbnRzKHNlbGYsIGl0ZXJhYmxlKQogICAgICAgIGlmIGt3ZHM6CiAgICAgICAgICAgIHNlbGYudXBkYXRlKGt3ZHMpCgogICAgZGVmIHN1YnRyYWN0KHNlbGYsIGl0ZXJhYmxlPU5vbmUsICoqa3dkcyk6CiAgICAgICAgJycnTGlrZSBkaWN0LnVwZGF0ZSgpIGJ1dCBzdWJ0cmFjdHMgY291bnRzIGluc3RlYWQgb2YgcmVwbGFjaW5nIHRoZW0uCiAgICAgICAgQ291bnRzIGNhbiBiZSByZWR1Y2VkIGJlbG93IHplcm8uICBCb3RoIHRoZSBpbnB1dHMgYW5kIG91dHB1dHMgYXJlCiAgICAgICAgYWxsb3dlZCB0byBjb250YWluIHplcm8gYW5kIG5lZ2F0aXZlIGNvdW50cy4KCiAgICAgICAgU291cmNlIGNhbiBiZSBhbiBpdGVyYWJsZSwgYSBkaWN0aW9uYXJ5LCBvciBhbm90aGVyIENvdW50ZXIgaW5zdGFuY2UuCgogICAgICAgID4+PiBjID0gQ291bnRlcignd2hpY2gnKQogICAgICAgID4+PiBjLnN1YnRyYWN0KCd3aXRjaCcpICAgICAgICAgICAgICMgc3VidHJhY3QgZWxlbWVudHMgZnJvbSBhbm90aGVyIGl0ZXJhYmxlCiAgICAgICAgPj4+IGMuc3VidHJhY3QoQ291bnRlcignd2F0Y2gnKSkgICAgIyBzdWJ0cmFjdCBlbGVtZW50cyBmcm9tIGFub3RoZXIgY291bnRlcgogICAgICAgID4+PiBjWydoJ10gICAgICAgICAgICAgICAgICAgICAgICAgICMgMiBpbiB3aGljaCwgbWludXMgMSBpbiB3aXRjaCwgbWludXMgMSBpbiB3YXRjaAogICAgICAgIDAKICAgICAgICA+Pj4gY1sndyddICAgICAgICAgICAgICAgICAgICAgICAgICAjIDEgaW4gd2hpY2gsIG1pbnVzIDEgaW4gd2l0Y2gsIG1pbnVzIDEgaW4gd2F0Y2gKICAgICAgICAtMQoKICAgICAgICAnJycKICAgICAgICBpZiBpdGVyYWJsZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZl9nZXQgPSBzZWxmLmdldAogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGl0ZXJhYmxlLCBNYXBwaW5nKToKICAgICAgICAgICAgICAgIGZvciBlbGVtLCBjb3VudCBpbiBpdGVyYWJsZS5pdGVtcygpOgogICAgICAgICAgICAgICAgICAgIHNlbGZbZWxlbV0gPSBzZWxmX2dldChlbGVtLCAwKSAtIGNvdW50CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBmb3IgZWxlbSBpbiBpdGVyYWJsZToKICAgICAgICAgICAgICAgICAgICBzZWxmW2VsZW1dID0gc2VsZl9nZXQoZWxlbSwgMCkgLSAxCiAgICAgICAgaWYga3dkczoKICAgICAgICAgICAgc2VsZi5zdWJ0cmFjdChrd2RzKQoKICAgIGRlZiBjb3B5KHNlbGYpOgogICAgICAgICdSZXR1cm4gYSBzaGFsbG93IGNvcHkuJwogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXyhzZWxmKQoKICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXywgKGRpY3Qoc2VsZiksKQoKICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBlbGVtKToKICAgICAgICAnTGlrZSBkaWN0Ll9fZGVsaXRlbV9fKCkgYnV0IGRvZXMgbm90IHJhaXNlIEtleUVycm9yIGZvciBtaXNzaW5nIHZhbHVlcy4nCiAgICAgICAgaWYgZWxlbSBpbiBzZWxmOgogICAgICAgICAgICBzdXBlcigpLl9fZGVsaXRlbV9fKGVsZW0pCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmOgogICAgICAgICAgICByZXR1cm4gJyVzKCknICUgc2VsZi5fX2NsYXNzX18uX19uYW1lX18KICAgICAgICB0cnk6CiAgICAgICAgICAgIGl0ZW1zID0gJywgJy5qb2luKG1hcCgnJXI6ICVyJy5fX21vZF9fLCBzZWxmLm1vc3RfY29tbW9uKCkpKQogICAgICAgICAgICByZXR1cm4gJyVzKHslc30pJyAlIChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywgaXRlbXMpCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICAgICAgIyBoYW5kbGUgY2FzZSB3aGVyZSB2YWx1ZXMgYXJlIG5vdCBvcmRlcmFibGUKICAgICAgICAgICAgcmV0dXJuICd7MH0oezEhcn0pJy5mb3JtYXQoc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIGRpY3Qoc2VsZikpCgogICAgIyBNdWx0aXNldC1zdHlsZSBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBkaXNjdXNzZWQgaW46CiAgICAjICAgICAgIEtudXRoIFRBT0NQIFZvbHVtZSBJSSBzZWN0aW9uIDQuNi4zIGV4ZXJjaXNlIDE5CiAgICAjICAgICAgIGFuZCBhdCBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL011bHRpc2V0CiAgICAjCiAgICAjIE91dHB1dHMgZ3VhcmFudGVlZCB0byBvbmx5IGluY2x1ZGUgcG9zaXRpdmUgY291bnRzLgogICAgIwogICAgIyBUbyBzdHJpcCBuZWdhdGl2ZSBhbmQgemVybyBjb3VudHMsIGFkZC1pbiBhbiBlbXB0eSBjb3VudGVyOgogICAgIyAgICAgICBjICs9IENvdW50ZXIoKQoKICAgIGRlZiBfX2FkZF9fKHNlbGYsIG90aGVyKToKICAgICAgICAnJydBZGQgY291bnRzIGZyb20gdHdvIGNvdW50ZXJzLgoKICAgICAgICA+Pj4gQ291bnRlcignYWJiYicpICsgQ291bnRlcignYmNjJykKICAgICAgICBDb3VudGVyKHsnYic6IDQsICdjJzogMiwgJ2EnOiAxfSkKCiAgICAgICAgJycnCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENvdW50ZXIpOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKICAgICAgICByZXN1bHQgPSBDb3VudGVyKCkKICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gc2VsZi5pdGVtcygpOgogICAgICAgICAgICBuZXdjb3VudCA9IGNvdW50ICsgb3RoZXJbZWxlbV0KICAgICAgICAgICAgaWYgbmV3Y291bnQgPiAwOgogICAgICAgICAgICAgICAgcmVzdWx0W2VsZW1dID0gbmV3Y291bnQKICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gb3RoZXIuaXRlbXMoKToKICAgICAgICAgICAgaWYgZWxlbSBub3QgaW4gc2VsZiBhbmQgY291bnQgPiAwOgogICAgICAgICAgICAgICAgcmVzdWx0W2VsZW1dID0gY291bnQKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIF9fc3ViX18oc2VsZiwgb3RoZXIpOgogICAgICAgICcnJyBTdWJ0cmFjdCBjb3VudCwgYnV0IGtlZXAgb25seSByZXN1bHRzIHdpdGggcG9zaXRpdmUgY291bnRzLgoKICAgICAgICA+Pj4gQ291bnRlcignYWJiYmMnKSAtIENvdW50ZXIoJ2JjY2QnKQogICAgICAgIENvdW50ZXIoeydiJzogMiwgJ2EnOiAxfSkKCiAgICAgICAgJycnCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENvdW50ZXIpOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKICAgICAgICByZXN1bHQgPSBDb3VudGVyKCkKICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gc2VsZi5pdGVtcygpOgogICAgICAgICAgICBuZXdjb3VudCA9IGNvdW50IC0gb3RoZXJbZWxlbV0KICAgICAgICAgICAgaWYgbmV3Y291bnQgPiAwOgogICAgICAgICAgICAgICAgcmVzdWx0W2VsZW1dID0gbmV3Y291bnQKICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gb3RoZXIuaXRlbXMoKToKICAgICAgICAgICAgaWYgZWxlbSBub3QgaW4gc2VsZiBhbmQgY291bnQgPCAwOgogICAgICAgICAgICAgICAgcmVzdWx0W2VsZW1dID0gMCAtIGNvdW50CiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBfX29yX18oc2VsZiwgb3RoZXIpOgogICAgICAgICcnJ1VuaW9uIGlzIHRoZSBtYXhpbXVtIG9mIHZhbHVlIGluIGVpdGhlciBvZiB0aGUgaW5wdXQgY291bnRlcnMuCgogICAgICAgID4+PiBDb3VudGVyKCdhYmJiJykgfCBDb3VudGVyKCdiY2MnKQogICAgICAgIENvdW50ZXIoeydiJzogMywgJ2MnOiAyLCAnYSc6IDF9KQoKICAgICAgICAnJycKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgQ291bnRlcik6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJlc3VsdCA9IENvdW50ZXIoKQogICAgICAgIGZvciBlbGVtLCBjb3VudCBpbiBzZWxmLml0ZW1zKCk6CiAgICAgICAgICAgIG90aGVyX2NvdW50ID0gb3RoZXJbZWxlbV0KICAgICAgICAgICAgbmV3Y291bnQgPSBvdGhlcl9jb3VudCBpZiBjb3VudCA8IG90aGVyX2NvdW50IGVsc2UgY291bnQKICAgICAgICAgICAgaWYgbmV3Y291bnQgPiAwOgogICAgICAgICAgICAgICAgcmVzdWx0W2VsZW1dID0gbmV3Y291bnQKICAgICAgICBmb3IgZWxlbSwgY291bnQgaW4gb3RoZXIuaXRlbXMoKToKICAgICAgICAgICAgaWYgZWxlbSBub3QgaW4gc2VsZiBhbmQgY291bnQgPiAwOgogICAgICAgICAgICAgICAgcmVzdWx0W2VsZW1dID0gY291bnQKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIF9fYW5kX18oc2VsZiwgb3RoZXIpOgogICAgICAgICcnJyBJbnRlcnNlY3Rpb24gaXMgdGhlIG1pbmltdW0gb2YgY29ycmVzcG9uZGluZyBjb3VudHMuCiAgICAKICAgICAgICA+Pj4gQ291bnRlcignYWJiYicpICYgQ291bnRlcignYmNjJykKICAgICAgICBDb3VudGVyKHsnYic6IDF9KQoKICAgICAgICAnJycKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgQ291bnRlcik6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJlc3VsdCA9IENvdW50ZXIoKQogICAgICAgIGZvciBlbGVtLCBjb3VudCBpbiBzZWxmLml0ZW1zKCk6CiAgICAgICAgICAgIG90aGVyX2NvdW50ID0gb3RoZXJbZWxlbV0KICAgICAgICAgICAgbmV3Y291bnQgPSBjb3VudCBpZiBjb3VudCA8IG90aGVyX2NvdW50IGVsc2Ugb3RoZXJfY291bnQKICAgICAgICAgICAgaWYgbmV3Y291bnQgPiAwOgogICAgICAgICAgICAgICAgcmVzdWx0W2VsZW1dID0gbmV3Y291bnQKICAgICAgICByZXR1cm4gcmVzdWx0CgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyAgQ2hhaW5NYXAgKGhlbHBlciBmb3IgY29uZmlncGFyc2VyKQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmNsYXNzIENoYWluTWFwKE11dGFibGVNYXBwaW5nKToKICAgICcnJyBBIENoYWluTWFwIGdyb3VwcyBtdWx0aXBsZSBkaWN0cyAob3Igb3RoZXIgbWFwcGluZ3MpIHRvZ2V0aGVyCiAgICB0byBjcmVhdGUgYSBzaW5nbGUsIHVwZGF0ZWFibGUgdmlldy4KCiAgICBUaGUgdW5kZXJseWluZyBtYXBwaW5ncyBhcmUgc3RvcmVkIGluIGEgbGlzdC4gIFRoYXQgbGlzdCBpcyBwdWJsaWMgYW5kIGNhbgogICAgYWNjZXNzZWQgb3IgdXBkYXRlZCB1c2luZyB0aGUgKm1hcHMqIGF0dHJpYnV0ZS4gIFRoZXJlIGlzIG5vIG90aGVyIHN0YXRlLgoKICAgIExvb2t1cHMgc2VhcmNoIHRoZSB1bmRlcmx5aW5nIG1hcHBpbmdzIHN1Y2Nlc3NpdmVseSB1bnRpbCBhIGtleSBpcyBmb3VuZC4KICAgIEluIGNvbnRyYXN0LCB3cml0ZXMsIHVwZGF0ZXMsIGFuZCBkZWxldGlvbnMgb25seSBvcGVyYXRlIG9uIHRoZSBmaXJzdAogICAgbWFwcGluZy4KCiAgICAnJycKCiAgICBkZWYgX19pbml0X18oc2VsZiwgKm1hcHMpOgogICAgICAgICcnJ0luaXRpYWxpemUgYSBDaGFpbk1hcCBieSBzZXR0aW5nICptYXBzKiB0byB0aGUgZ2l2ZW4gbWFwcGluZ3MuCiAgICAgICAgSWYgbm8gbWFwcGluZ3MgYXJlIHByb3ZpZGVkLCBhIHNpbmdsZSBlbXB0eSBkaWN0aW9uYXJ5IGlzIHVzZWQuCgogICAgICAgICcnJwogICAgICAgIHNlbGYubWFwcyA9IGxpc3QobWFwcykgb3IgW3t9XSAgICAgICAgICAjIGFsd2F5cyBhdCBsZWFzdCBvbmUgbWFwCgogICAgZGVmIF9fbWlzc2luZ19fKHNlbGYsIGtleSk6CiAgICAgICAgcmFpc2UgS2V5RXJyb3Ioa2V5KQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIGZvciBtYXBwaW5nIGluIHNlbGYubWFwczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIG1hcHBpbmdba2V5XSAgICAgICAgICAgICAjIGNhbid0IHVzZSAna2V5IGluIG1hcHBpbmcnIHdpdGggZGVmYXVsdGRpY3QKICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgIHJldHVybiBzZWxmLl9fbWlzc2luZ19fKGtleSkgICAgICAgICAgICAjIHN1cHBvcnQgc3ViY2xhc3NlcyB0aGF0IGRlZmluZSBfX21pc3NpbmdfXwoKICAgIGRlZiBnZXQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOgogICAgICAgIHJldHVybiBzZWxmW2tleV0gaWYga2V5IGluIHNlbGYgZWxzZSBkZWZhdWx0CgogICAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGxlbihzZXQoKS51bmlvbigqc2VsZi5tYXBzKSkgICAgICMgcmV1c2VzIHN0b3JlZCBoYXNoIHZhbHVlcyBpZiBwb3NzaWJsZQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gaXRlcihzZXQoKS51bmlvbigqc2VsZi5tYXBzKSkKCiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGtleSk6CiAgICAgICAgcmV0dXJuIGFueShrZXkgaW4gbSBmb3IgbSBpbiBzZWxmLm1hcHMpCgogICAgZGVmIF9fYm9vbF9fKHNlbGYpOgogICAgICAgIHJldHVybiBhbnkoc2VsZi5tYXBzKQoKICAgICNmaXhtZSwgYnJ5dGhvbgogICAgI0BfcmVjdXJzaXZlX3JlcHIoKQojICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKIyAgICAgICAgcmV0dXJuICd7MC5fX2NsYXNzX18uX19uYW1lX199KHsxfSknLmZvcm1hdCgKIyAgICAgICAgICAgIHNlbGYsICcsICcuam9pbihtYXAocmVwciwgc2VsZi5tYXBzKSkpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAnLCcuam9pbihzdHIoX21hcCkgZm9yIF9tYXAgaW4gc2VsZi5tYXBzKQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZyb21rZXlzKGNscywgaXRlcmFibGUsICphcmdzKToKICAgICAgICAnQ3JlYXRlIGEgQ2hhaW5NYXAgd2l0aCBhIHNpbmdsZSBkaWN0IGNyZWF0ZWQgZnJvbSB0aGUgaXRlcmFibGUuJwogICAgICAgIHJldHVybiBjbHMoZGljdC5mcm9ta2V5cyhpdGVyYWJsZSwgKmFyZ3MpKQoKICAgIGRlZiBjb3B5KHNlbGYpOgogICAgICAgICdOZXcgQ2hhaW5NYXAgb3Igc3ViY2xhc3Mgd2l0aCBhIG5ldyBjb3B5IG9mIG1hcHNbMF0gYW5kIHJlZnMgdG8gbWFwc1sxOl0nCiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKHNlbGYubWFwc1swXS5jb3B5KCksICpzZWxmLm1hcHNbMTpdKQoKICAgIF9fY29weV9fID0gY29weQoKICAgIGRlZiBuZXdfY2hpbGQoc2VsZik6ICAgICAgICAgICAgICAgICAgICAgICAgIyBsaWtlIERqYW5nbydzIENvbnRleHQucHVzaCgpCiAgICAgICAgJ05ldyBDaGFpbk1hcCB3aXRoIGEgbmV3IGRpY3QgZm9sbG93ZWQgYnkgYWxsIHByZXZpb3VzIG1hcHMuJwogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXyh7fSwgKnNlbGYubWFwcykKCiAgICBAcHJvcGVydHkKICAgIGRlZiBwYXJlbnRzKHNlbGYpOiAgICAgICAgICAgICAgICAgICAgICAgICAgIyBsaWtlIERqYW5nbydzIENvbnRleHQucG9wKCkKICAgICAgICAnTmV3IENoYWluTWFwIGZyb20gbWFwc1sxOl0uJwogICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXygqc2VsZi5tYXBzWzE6XSkKCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWx1ZSk6CiAgICAgICAgc2VsZi5tYXBzWzBdW2tleV0gPSB2YWx1ZQoKICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZGVsIHNlbGYubWFwc1swXVtrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICByYWlzZSBLZXlFcnJvcignS2V5IG5vdCBmb3VuZCBpbiB0aGUgZmlyc3QgbWFwcGluZzogeyFyfScuZm9ybWF0KGtleSkpCgogICAgZGVmIHBvcGl0ZW0oc2VsZik6CiAgICAgICAgJ1JlbW92ZSBhbmQgcmV0dXJuIGFuIGl0ZW0gcGFpciBmcm9tIG1hcHNbMF0uIFJhaXNlIEtleUVycm9yIGlzIG1hcHNbMF0gaXMgZW1wdHkuJwogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHNlbGYubWFwc1swXS5wb3BpdGVtKCkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKCdObyBrZXlzIGZvdW5kIGluIHRoZSBmaXJzdCBtYXBwaW5nLicpCgogICAgZGVmIHBvcChzZWxmLCBrZXksICphcmdzKToKICAgICAgICAnUmVtb3ZlICprZXkqIGZyb20gbWFwc1swXSBhbmQgcmV0dXJuIGl0cyB2YWx1ZS4gUmFpc2UgS2V5RXJyb3IgaWYgKmtleSogbm90IGluIG1hcHNbMF0uJwogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHNlbGYubWFwc1swXS5wb3Aoa2V5LCAqYXJncykKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICNyYWlzZSBLZXlFcnJvcignS2V5IG5vdCBmb3VuZCBpbiB0aGUgZmlyc3QgbWFwcGluZzogeyFyfScuZm9ybWF0KGtleSkpCiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKCdLZXkgbm90IGZvdW5kIGluIHRoZSBmaXJzdCBtYXBwaW5nOiAlcycgJSBrZXkpCgogICAgZGVmIGNsZWFyKHNlbGYpOgogICAgICAgICdDbGVhciBtYXBzWzBdLCBsZWF2aW5nIG1hcHNbMTpdIGludGFjdC4nCiAgICAgICAgc2VsZi5tYXBzWzBdLmNsZWFyKCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgVXNlckRpY3QKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmNsYXNzIFVzZXJEaWN0KE11dGFibGVNYXBwaW5nKToKCiAgICAjIFN0YXJ0IGJ5IGZpbGxpbmctb3V0IHRoZSBhYnN0cmFjdCBtZXRob2RzCiAgICBkZWYgX19pbml0X18oc2VsZiwgZGljdD1Ob25lLCAqKmt3YXJncyk6CiAgICAgICAgc2VsZi5kYXRhID0ge30KICAgICAgICBpZiBkaWN0IGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLnVwZGF0ZShkaWN0KQogICAgICAgIGlmIGxlbihrd2FyZ3MpOgogICAgICAgICAgICBzZWxmLnVwZGF0ZShrd2FyZ3MpCiAgICBkZWYgX19sZW5fXyhzZWxmKTogcmV0dXJuIGxlbihzZWxmLmRhdGEpCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KToKICAgICAgICBpZiBrZXkgaW4gc2VsZi5kYXRhOgogICAgICAgICAgICByZXR1cm4gc2VsZi5kYXRhW2tleV0KICAgICAgICBpZiBoYXNhdHRyKHNlbGYuX19jbGFzc19fLCAiX19taXNzaW5nX18iKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fLl9fbWlzc2luZ19fKHNlbGYsIGtleSkKICAgICAgICByYWlzZSBLZXlFcnJvcihrZXkpCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCBpdGVtKTogc2VsZi5kYXRhW2tleV0gPSBpdGVtCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5KTogZGVsIHNlbGYuZGF0YVtrZXldCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGl0ZXIoc2VsZi5kYXRhKQoKICAgICMgTW9kaWZ5IF9fY29udGFpbnNfXyB0byB3b3JrIGNvcnJlY3RseSB3aGVuIF9fbWlzc2luZ19fIGlzIHByZXNlbnQKICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwga2V5KToKICAgICAgICByZXR1cm4ga2V5IGluIHNlbGYuZGF0YQoKICAgICMgTm93LCBhZGQgdGhlIG1ldGhvZHMgaW4gZGljdHMgYnV0IG5vdCBpbiBNdXRhYmxlTWFwcGluZwogICAgZGVmIF9fcmVwcl9fKHNlbGYpOiByZXR1cm4gcmVwcihzZWxmLmRhdGEpCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICBpZiBzZWxmLl9fY2xhc3NfXyBpcyBVc2VyRGljdDoKICAgICAgICAgICAgcmV0dXJuIFVzZXJEaWN0KHNlbGYuZGF0YS5jb3B5KCkpCiAgICAgICAgaW1wb3J0IGNvcHkKICAgICAgICBkYXRhID0gc2VsZi5kYXRhCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLmRhdGEgPSB7fQogICAgICAgICAgICBjID0gY29weS5jb3B5KHNlbGYpCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgc2VsZi5kYXRhID0gZGF0YQogICAgICAgIGMudXBkYXRlKHNlbGYpCiAgICAgICAgcmV0dXJuIGMKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZyb21rZXlzKGNscywgaXRlcmFibGUsIHZhbHVlPU5vbmUpOgogICAgICAgIGQgPSBjbHMoKQogICAgICAgIGZvciBrZXkgaW4gaXRlcmFibGU6CiAgICAgICAgICAgIGRba2V5XSA9IHZhbHVlCiAgICAgICAgcmV0dXJuIGQKCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIFVzZXJMaXN0CiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyBVc2VyU3RyaW5nCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCg==',
'/Lib/pyindexedDB.py':'Y2xhc3MgRXZlbnRMaXN0ZW5lcjoKICBkZWYgX19pbml0X18oc2VsZiwgZXZlbnRzPVtdKToKICAgICAgc2VsZi5fZXZlbnRzPWV2ZW50cwoKICBkZWYgYXBwZW5kKHNlbGYsIGV2ZW50KToKICAgICAgc2VsZi5fZXZlbnRzLmFwcGVuZChldmVudCkKCiAgZGVmIGZpcmUoc2VsZiwgZSk6CiAgICAgIGZvciBfZXZlbnQgaW4gc2VsZi5fZXZlbnRzOgogICAgICAgICAgX2V2ZW50KGUpCgpjbGFzcyBweWluZGV4ZWREQjoKICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgIGlmIG5vdCBfX0JSWVRIT05fXy5oYXNfaW5kZXhlZERCOgogICAgICAgICByYWlzZSBFeGNlcHRpb24oIk5vdEltcGxlbWVudGVkRXJyb3IiLCAiWW91ciBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBpbmRleGVkREIiKQogICAgICAgICByZXR1cm4KCiAgICAgIHNlbGYuX2luZGV4ZWREQj1fX0JSWVRIT05fXy5pbmRleGVkREIoKQogICAgICBzZWxmLl9kYj1Ob25lCiAgICAgIHNlbGYuX3ZlcnNpb249Tm9uZQoKICBkZWYgX29uc3VjY2VzcyhzZWxmLCBldmVudCk6CiAgICAgIHNlbGYuX2RiPWV2ZW50LnRhcmdldC5yZXN1bHQKCiAgZGVmIG9wZW4oc2VsZiwgbmFtZSwgb25zdWNjZXNzLCB2ZXJzaW9uPTEuMCwgb25lcnJvcj1Ob25lLCAKICAgICAgICAgICBvbnVwZ3JhZGVuZWVkZWQ9Tm9uZSk6CiAgICAgIHNlbGYuX3ZlcnNpb249dmVyc2lvbgogICAgICBfcmVzdWx0PXNlbGYuX2luZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pCiAgICAgIF9zdWNjZXNzPUV2ZW50TGlzdGVuZXIoW3NlbGYuX29uc3VjY2Vzcywgb25zdWNjZXNzXSkKICAgICAgX3Jlc3VsdC5vbnN1Y2Nlc3M9X3N1Y2Nlc3MuZmlyZQogICAgICBfcmVzdWx0Lm9udXBncmFkZW5lZWRlZD1vbnVwZ3JhZGVuZWVkZWQKCiAgICAgICNpZiBvbmVycm9yIGlzIE5vbmU6CiAgICAgIGRlZiBvbmVycm9yKGUpOgogICAgICAgICAgcHJpbnQoIm9uZXJyb3I6ICVzOiVzIiAlICAoZS50eXBlLCBlLnRhcmdldC5yZXN1bHQpKQoKICAgICAgZGVmIG9uYmxvY2tlZChlKToKICAgICAgICAgIHByaW50KCJibG9ja2VkOiAlczolcyIgJSAgKGUudHlwZSwgZS5yZXN1bHQpKQoKICAgICAgX3Jlc3VsdC5vbmVycm9yPW9uZXJyb3IKICAgICAgX3Jlc3VsdC5vbmJsb2NrZWQ9b25ibG9ja2VkCgogIGRlZiB0cmFuc2FjdGlvbihzZWxmLCBlbnRpdGllcywgbW9kZT0ncmVhZCcpOgogICAgICByZXR1cm4gVHJhbnNhY3Rpb24oc2VsZi5fZGIudHJhbnNhY3Rpb24oZW50aXRpZXMsIG1vZGUpKQoKY2xhc3MgVHJhbnNhY3Rpb246CiAgZGVmIF9faW5pdF9fKHNlbGYsIHRyYW5zYWN0aW9uKToKICAgICAgc2VsZi5fdHJhbnNhY3Rpb249dHJhbnNhY3Rpb24KCiAgZGVmIG9iamVjdFN0b3JlKHNlbGYsIG5hbWUpOgogICAgICByZXR1cm4gT2JqZWN0U3RvcmUoc2VsZi5fdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUobmFtZSkpCgpjbGFzcyBPYmplY3RTdG9yZToKICBkZWYgX19pbml0X18oc2VsZiwgb2JqZWN0U3RvcmUpOgogICAgICBzZWxmLl9vYmplY3RTdG9yZT1vYmplY3RTdG9yZQogICAgICBzZWxmLl9kYXRhPVtdCgogIGRlZiBjbGVhcihzZWxmLCBvbnN1Y2Nlc3M9Tm9uZSwgb25lcnJvcj1Ob25lKToKICAgICAgX3Jlc3VsdD1zZWxmLl9vYmplY3RTdG9yZS5jbGVhcigpCgogICAgICBpZiBvbnN1Y2Nlc3MgaXMgbm90IE5vbmU6CiAgICAgICAgIF9yZXN1bHQub25zdWNjZXNzPW9uc3VjY2VzcwoKICAgICAgaWYgb25lcnJvciBpcyBub3QgTm9uZToKICAgICAgICAgX3Jlc3VsdC5vbmVycm9yPW9uZXJyb3IKCiAgZGVmIF9oZWxwZXIoc2VsZiwgZnVuYywgb2JqZWN0LCBvbnN1Y2Nlc3M9Tm9uZSwgb25lcnJvcj1Ob25lKToKICAgICAgX3Jlc3VsdD1mdW5jKG9iamVjdCkKCiAgICAgIGlmIG9uc3VjY2VzcyBpcyBub3QgTm9uZToKICAgICAgICAgX3Jlc3VsdC5vbnN1Y2Nlc3M9b25zdWNjZXNzCgogICAgICBpZiBvbmVycm9yIGlzIG5vdCBOb25lOgogICAgICAgICBfcmVzdWx0Lm9uZXJyb3I9b25lcnJvcgoKICBkZWYgcHV0KHNlbGYsIG9iamVjdCwga2V5PU5vbmUsIG9uc3VjY2Vzcz1Ob25lLCBvbmVycm9yPU5vbmUpOgogICAgICBfcj1zZWxmLl9vYmplY3RTdG9yZS5wdXQob2JqZWN0LCBrZXkpCiAgICAgIF9yLm9uc3VjY2Vzcz1vbnN1Y2Nlc3MKICAgICAgX3Iub25lcnJvcj1vbmVycm9yCgogIGRlZiBhZGQoc2VsZiwgb2JqZWN0LCBvbnN1Y2Nlc3M9Tm9uZSwgb25lcnJvcj1Ob25lKToKICAgICAgc2VsZi5faGVscGVyKHNlbGYuX29iamVjdFN0b3JlLmFkZCwgb2JqZWN0LCBvbnN1Y2Nlc3MsIG9uZXJyb3IpCgogIGRlZiBkZWxldGUoc2VsZiwgaW5kZXgsIG9uc3VjY2Vzcz1Ob25lLCBvbmVycm9yPU5vbmUpOiAKICAgICAgc2VsZi5faGVscGVyKHNlbGYuX29iamVjdFN0b3JlLmRlbGV0ZSwgaW5kZXgsIG9uc3VjY2Vzcywgb25lcnJvcikKICAgICAKICBkZWYgcXVlcnkoc2VsZiwgKmFyZ3MpOgogICAgICBzZWxmLl9kYXRhPVtdCiAgICAgIGRlZiBvbnN1Y2Nlc3MoZXZlbnQpOgogICAgICAgICAgY3Vyc29yPWV2ZW50LnRhcmdldC5yZXN1bHQKICAgICAgICAgIGlmIGN1cnNvciBpcyBub3QgTm9uZToKICAgICAgICAgICAgIHNlbGYuX2RhdGEuYXBwZW5kKGN1cnNvci52YWx1ZSkKICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpCgogICAgICBzZWxmLl9vYmplY3RTdG9yZS5vcGVuQ3Vyc29yKGFyZ3MpLm9uc3VjY2Vzcz1vbnN1Y2Nlc3MKCiAgZGVmIGZldGNoYWxsKHNlbGYpOgogICAgICB5aWVsZCBzZWxmLl9kYXRhCgogIGRlZiBnZXQoc2VsZiwga2V5LCBvbnN1Y2Nlc3M9Tm9uZSwgb25lcnJvcj1Ob25lKToKICAgICAgc2VsZi5faGVscGVyKHNlbGYuX29iamVjdFN0b3JlLmdldCwga2V5LCBvbnN1Y2Nlc3MsIG9uZXJyb3IpCg==',
'/Lib/functools.py':'IiIiZnVuY3Rvb2xzLnB5IC0gVG9vbHMgZm9yIHdvcmtpbmcgd2l0aCBmdW5jdGlvbnMgYW5kIGNhbGxhYmxlIG9iamVjdHMKIiIiCiMgUHl0aG9uIG1vZHVsZSB3cmFwcGVyIGZvciBfZnVuY3Rvb2xzIEMgbW9kdWxlCiMgdG8gYWxsb3cgdXRpbGl0aWVzIHdyaXR0ZW4gaW4gUHl0aG9uIHRvIGJlIGFkZGVkCiMgdG8gdGhlIGZ1bmN0b29scyBtb2R1bGUuCiMgV3JpdHRlbiBieSBOaWNrIENvZ2hsYW4gPG5jb2dobGFuIGF0IGdtYWlsLmNvbT4KIyBhbmQgUmF5bW9uZCBIZXR0aW5nZXIgPHB5dGhvbiBhdCByY24uY29tPgojICAgQ29weXJpZ2h0IChDKSAyMDA2LTIwMTAgUHl0aG9uIFNvZnR3YXJlIEZvdW5kYXRpb24uCiMgU2VlIEMgc291cmNlIGNvZGUgZm9yIF9mdW5jdG9vbHMgY3JlZGl0cy9jb3B5cmlnaHQKCl9fYWxsX18gPSBbJ3VwZGF0ZV93cmFwcGVyJywgJ3dyYXBzJywgJ1dSQVBQRVJfQVNTSUdOTUVOVFMnLCAnV1JBUFBFUl9VUERBVEVTJywKICAgICAgICAgICAndG90YWxfb3JkZXJpbmcnLCAnY21wX3RvX2tleScsICdscnVfY2FjaGUnLCAncmVkdWNlJywgJ3BhcnRpYWwnXQoKZnJvbSBfZnVuY3Rvb2xzIGltcG9ydCBwYXJ0aWFsLCByZWR1Y2UKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgbmFtZWR0dXBsZQp0cnk6CiAgICBmcm9tIF90aHJlYWQgaW1wb3J0IGFsbG9jYXRlX2xvY2sgYXMgTG9jawpleGNlcHQ6CiAgICBmcm9tIF9kdW1teV90aHJlYWQgaW1wb3J0IGFsbG9jYXRlX2xvY2sgYXMgTG9jawoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyB1cGRhdGVfd3JhcHBlcigpIGFuZCB3cmFwcygpIGRlY29yYXRvcgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyB1cGRhdGVfd3JhcHBlcigpIGFuZCB3cmFwcygpIGFyZSB0b29scyB0byBoZWxwIHdyaXRlCiMgd3JhcHBlciBmdW5jdGlvbnMgdGhhdCBjYW4gaGFuZGxlIG5haXZlIGludHJvc3BlY3Rpb24KCldSQVBQRVJfQVNTSUdOTUVOVFMgPSAoJ19fbW9kdWxlX18nLCAnX19uYW1lX18nLCAnX19xdWFsbmFtZV9fJywgJ19fZG9jX18nLAogICAgICAgICAgICAgICAgICAgICAgICdfX2Fubm90YXRpb25zX18nKQpXUkFQUEVSX1VQREFURVMgPSAoJ19fZGljdF9fJywpCmRlZiB1cGRhdGVfd3JhcHBlcih3cmFwcGVyLAogICAgICAgICAgICAgICAgICAgd3JhcHBlZCwKICAgICAgICAgICAgICAgICAgIGFzc2lnbmVkID0gV1JBUFBFUl9BU1NJR05NRU5UUywKICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQgPSBXUkFQUEVSX1VQREFURVMpOgogICAgIiIiVXBkYXRlIGEgd3JhcHBlciBmdW5jdGlvbiB0byBsb29rIGxpa2UgdGhlIHdyYXBwZWQgZnVuY3Rpb24KCiAgICAgICB3cmFwcGVyIGlzIHRoZSBmdW5jdGlvbiB0byBiZSB1cGRhdGVkCiAgICAgICB3cmFwcGVkIGlzIHRoZSBvcmlnaW5hbCBmdW5jdGlvbgogICAgICAgYXNzaWduZWQgaXMgYSB0dXBsZSBuYW1pbmcgdGhlIGF0dHJpYnV0ZXMgYXNzaWduZWQgZGlyZWN0bHkKICAgICAgIGZyb20gdGhlIHdyYXBwZWQgZnVuY3Rpb24gdG8gdGhlIHdyYXBwZXIgZnVuY3Rpb24gKGRlZmF1bHRzIHRvCiAgICAgICBmdW5jdG9vbHMuV1JBUFBFUl9BU1NJR05NRU5UUykKICAgICAgIHVwZGF0ZWQgaXMgYSB0dXBsZSBuYW1pbmcgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIHdyYXBwZXIgdGhhdAogICAgICAgYXJlIHVwZGF0ZWQgd2l0aCB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGUgZnJvbSB0aGUgd3JhcHBlZAogICAgICAgZnVuY3Rpb24gKGRlZmF1bHRzIHRvIGZ1bmN0b29scy5XUkFQUEVSX1VQREFURVMpCiAgICAiIiIKICAgIHdyYXBwZXIuX193cmFwcGVkX18gPSB3cmFwcGVkCiAgICBmb3IgYXR0ciBpbiBhc3NpZ25lZDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHZhbHVlID0gZ2V0YXR0cih3cmFwcGVkLCBhdHRyKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNldGF0dHIod3JhcHBlciwgYXR0ciwgdmFsdWUpCiAgICBmb3IgYXR0ciBpbiB1cGRhdGVkOgogICAgICAgIGdldGF0dHIod3JhcHBlciwgYXR0cikudXBkYXRlKGdldGF0dHIod3JhcHBlZCwgYXR0ciwge30pKQogICAgIyBSZXR1cm4gdGhlIHdyYXBwZXIgc28gdGhpcyBjYW4gYmUgdXNlZCBhcyBhIGRlY29yYXRvciB2aWEgcGFydGlhbCgpCiAgICByZXR1cm4gd3JhcHBlcgoKZGVmIHdyYXBzKHdyYXBwZWQsCiAgICAgICAgICBhc3NpZ25lZCA9IFdSQVBQRVJfQVNTSUdOTUVOVFMsCiAgICAgICAgICB1cGRhdGVkID0gV1JBUFBFUl9VUERBVEVTKToKICAgICIiIkRlY29yYXRvciBmYWN0b3J5IHRvIGFwcGx5IHVwZGF0ZV93cmFwcGVyKCkgdG8gYSB3cmFwcGVyIGZ1bmN0aW9uCgogICAgICAgUmV0dXJucyBhIGRlY29yYXRvciB0aGF0IGludm9rZXMgdXBkYXRlX3dyYXBwZXIoKSB3aXRoIHRoZSBkZWNvcmF0ZWQKICAgICAgIGZ1bmN0aW9uIGFzIHRoZSB3cmFwcGVyIGFyZ3VtZW50IGFuZCB0aGUgYXJndW1lbnRzIHRvIHdyYXBzKCkgYXMgdGhlCiAgICAgICByZW1haW5pbmcgYXJndW1lbnRzLiBEZWZhdWx0IGFyZ3VtZW50cyBhcmUgYXMgZm9yIHVwZGF0ZV93cmFwcGVyKCkuCiAgICAgICBUaGlzIGlzIGEgY29udmVuaWVuY2UgZnVuY3Rpb24gdG8gc2ltcGxpZnkgYXBwbHlpbmcgcGFydGlhbCgpIHRvCiAgICAgICB1cGRhdGVfd3JhcHBlcigpLgogICAgIiIiCiAgICByZXR1cm4gcGFydGlhbCh1cGRhdGVfd3JhcHBlciwgd3JhcHBlZD13cmFwcGVkLAogICAgICAgICAgICAgICAgICAgYXNzaWduZWQ9YXNzaWduZWQsIHVwZGF0ZWQ9dXBkYXRlZCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgdG90YWxfb3JkZXJpbmcgY2xhc3MgZGVjb3JhdG9yCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWYgdG90YWxfb3JkZXJpbmcoY2xzKToKICAgICIiIkNsYXNzIGRlY29yYXRvciB0aGF0IGZpbGxzIGluIG1pc3Npbmcgb3JkZXJpbmcgbWV0aG9kcyIiIgogICAgY29udmVydCA9IHsKICAgICAgICAnX19sdF9fJzogWygnX19ndF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3QgKHNlbGYgPCBvdGhlciBvciBzZWxmID09IG90aGVyKSksCiAgICAgICAgICAgICAgICAgICAoJ19fbGVfXycsIGxhbWJkYSBzZWxmLCBvdGhlcjogc2VsZiA8IG90aGVyIG9yIHNlbGYgPT0gb3RoZXIpLAogICAgICAgICAgICAgICAgICAgKCdfX2dlX18nLCBsYW1iZGEgc2VsZiwgb3RoZXI6IG5vdCBzZWxmIDwgb3RoZXIpXSwKICAgICAgICAnX19sZV9fJzogWygnX19nZV9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3Qgc2VsZiA8PSBvdGhlciBvciBzZWxmID09IG90aGVyKSwKICAgICAgICAgICAgICAgICAgICgnX19sdF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBzZWxmIDw9IG90aGVyIGFuZCBub3Qgc2VsZiA9PSBvdGhlciksCiAgICAgICAgICAgICAgICAgICAoJ19fZ3RfXycsIGxhbWJkYSBzZWxmLCBvdGhlcjogbm90IHNlbGYgPD0gb3RoZXIpXSwKICAgICAgICAnX19ndF9fJzogWygnX19sdF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3QgKHNlbGYgPiBvdGhlciBvciBzZWxmID09IG90aGVyKSksCiAgICAgICAgICAgICAgICAgICAoJ19fZ2VfXycsIGxhbWJkYSBzZWxmLCBvdGhlcjogc2VsZiA+IG90aGVyIG9yIHNlbGYgPT0gb3RoZXIpLAogICAgICAgICAgICAgICAgICAgKCdfX2xlX18nLCBsYW1iZGEgc2VsZiwgb3RoZXI6IG5vdCBzZWxmID4gb3RoZXIpXSwKICAgICAgICAnX19nZV9fJzogWygnX19sZV9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiAobm90IHNlbGYgPj0gb3RoZXIpIG9yIHNlbGYgPT0gb3RoZXIpLAogICAgICAgICAgICAgICAgICAgKCdfX2d0X18nLCBsYW1iZGEgc2VsZiwgb3RoZXI6IHNlbGYgPj0gb3RoZXIgYW5kIG5vdCBzZWxmID09IG90aGVyKSwKICAgICAgICAgICAgICAgICAgICgnX19sdF9fJywgbGFtYmRhIHNlbGYsIG90aGVyOiBub3Qgc2VsZiA+PSBvdGhlcildCiAgICB9CiAgICAjIEZpbmQgdXNlci1kZWZpbmVkIGNvbXBhcmlzb25zIChub3QgdGhvc2UgaW5oZXJpdGVkIGZyb20gb2JqZWN0KS4KICAgIHJvb3RzID0gW29wIGZvciBvcCBpbiBjb252ZXJ0IGlmIGdldGF0dHIoY2xzLCBvcCwgTm9uZSkgaXMgbm90IGdldGF0dHIob2JqZWN0LCBvcCwgTm9uZSldCiAgICBpZiBub3Qgcm9vdHM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignbXVzdCBkZWZpbmUgYXQgbGVhc3Qgb25lIG9yZGVyaW5nIG9wZXJhdGlvbjogPCA+IDw9ID49JykKICAgIHJvb3QgPSBtYXgocm9vdHMpICAgICAgICMgcHJlZmVyIF9fbHRfXyB0byBfX2xlX18gdG8gX19ndF9fIHRvIF9fZ2VfXwogICAgZm9yIG9wbmFtZSwgb3BmdW5jIGluIGNvbnZlcnRbcm9vdF06CiAgICAgICAgaWYgb3BuYW1lIG5vdCBpbiByb290czoKICAgICAgICAgICAgb3BmdW5jLl9fbmFtZV9fID0gb3BuYW1lCiAgICAgICAgICAgIG9wZnVuYy5fX2RvY19fID0gZ2V0YXR0cihpbnQsIG9wbmFtZSkuX19kb2NfXwogICAgICAgICAgICBzZXRhdHRyKGNscywgb3BuYW1lLCBvcGZ1bmMpCiAgICByZXR1cm4gY2xzCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIGNtcF90b19rZXkoKSBmdW5jdGlvbiBjb252ZXJ0ZXIKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZiBjbXBfdG9fa2V5KG15Y21wKToKICAgICIiIkNvbnZlcnQgYSBjbXA9IGZ1bmN0aW9uIGludG8gYSBrZXk9IGZ1bmN0aW9uIiIiCiAgICBjbGFzcyBLKG9iamVjdCk6CiAgICAgICAgX19zbG90c19fID0gWydvYmonXQogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvYmopOgogICAgICAgICAgICBzZWxmLm9iaiA9IG9iagogICAgICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOgogICAgICAgICAgICByZXR1cm4gbXljbXAoc2VsZi5vYmosIG90aGVyLm9iaikgPCAwCiAgICAgICAgZGVmIF9fZ3RfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgICAgIHJldHVybiBteWNtcChzZWxmLm9iaiwgb3RoZXIub2JqKSA+IDAKICAgICAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopID09IDAKICAgICAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopIDw9IDAKICAgICAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopID49IDAKICAgICAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIG15Y21wKHNlbGYub2JqLCBvdGhlci5vYmopICE9IDAKICAgICAgICBfX2hhc2hfXyA9IE5vbmUKICAgIHJldHVybiBLCgp0cnk6CiAgICBmcm9tIF9mdW5jdG9vbHMgaW1wb3J0IGNtcF90b19rZXkKZXhjZXB0IEltcG9ydEVycm9yOgogICAgcGFzcwoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyBMUlUgQ2FjaGUgZnVuY3Rpb24gZGVjb3JhdG9yCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpfQ2FjaGVJbmZvID0gbmFtZWR0dXBsZSgiQ2FjaGVJbmZvIiwgWyJoaXRzIiwgIm1pc3NlcyIsICJtYXhzaXplIiwgImN1cnJzaXplIl0pCgpjbGFzcyBfSGFzaGVkU2VxKGxpc3QpOgogICAgX19zbG90c19fID0gJ2hhc2h2YWx1ZScKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdHVwLCBoYXNoPWhhc2gpOgogICAgICAgIHNlbGZbOl0gPSB0dXAKICAgICAgICBzZWxmLmhhc2h2YWx1ZSA9IGhhc2godHVwKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5oYXNodmFsdWUKCmRlZiBfbWFrZV9rZXkoYXJncywga3dkcywgdHlwZWQsCiAgICAgICAgICAgICBrd2RfbWFyayA9IChvYmplY3QoKSwpLAogICAgICAgICAgICAgZmFzdHR5cGVzID0ge2ludCwgc3RyLCBmcm96ZW5zZXQsIHR5cGUoTm9uZSl9LAogICAgICAgICAgICAgc29ydGVkPXNvcnRlZCwgdHVwbGU9dHVwbGUsIHR5cGU9dHlwZSwgbGVuPWxlbik6CiAgICAnTWFrZSBhIGNhY2hlIGtleSBmcm9tIG9wdGlvbmFsbHkgdHlwZWQgcG9zaXRpb25hbCBhbmQga2V5d29yZCBhcmd1bWVudHMnCiAgICBrZXkgPSBhcmdzCiAgICBpZiBrd2RzOgogICAgICAgIHNvcnRlZF9pdGVtcyA9IHNvcnRlZChrd2RzLml0ZW1zKCkpCiAgICAgICAga2V5ICs9IGt3ZF9tYXJrCiAgICAgICAgZm9yIGl0ZW0gaW4gc29ydGVkX2l0ZW1zOgogICAgICAgICAgICBrZXkgKz0gaXRlbQogICAgaWYgdHlwZWQ6CiAgICAgICAga2V5ICs9IHR1cGxlKHR5cGUodikgZm9yIHYgaW4gYXJncykKICAgICAgICBpZiBrd2RzOgogICAgICAgICAgICBrZXkgKz0gdHVwbGUodHlwZSh2KSBmb3IgaywgdiBpbiBzb3J0ZWRfaXRlbXMpCiAgICBlbGlmIGxlbihrZXkpID09IDEgYW5kIHR5cGUoa2V5WzBdKSBpbiBmYXN0dHlwZXM6CiAgICAgICAgcmV0dXJuIGtleVswXQogICAgcmV0dXJuIF9IYXNoZWRTZXEoa2V5KQoKZGVmIGxydV9jYWNoZShtYXhzaXplPTEyOCwgdHlwZWQ9RmFsc2UpOgogICAgIiIiTGVhc3QtcmVjZW50bHktdXNlZCBjYWNoZSBkZWNvcmF0b3IuCgogICAgSWYgKm1heHNpemUqIGlzIHNldCB0byBOb25lLCB0aGUgTFJVIGZlYXR1cmVzIGFyZSBkaXNhYmxlZCBhbmQgdGhlIGNhY2hlCiAgICBjYW4gZ3JvdyB3aXRob3V0IGJvdW5kLgoKICAgIElmICp0eXBlZCogaXMgVHJ1ZSwgYXJndW1lbnRzIG9mIGRpZmZlcmVudCB0eXBlcyB3aWxsIGJlIGNhY2hlZCBzZXBhcmF0ZWx5LgogICAgRm9yIGV4YW1wbGUsIGYoMy4wKSBhbmQgZigzKSB3aWxsIGJlIHRyZWF0ZWQgYXMgZGlzdGluY3QgY2FsbHMgd2l0aAogICAgZGlzdGluY3QgcmVzdWx0cy4KCiAgICBBcmd1bWVudHMgdG8gdGhlIGNhY2hlZCBmdW5jdGlvbiBtdXN0IGJlIGhhc2hhYmxlLgoKICAgIFZpZXcgdGhlIGNhY2hlIHN0YXRpc3RpY3MgbmFtZWQgdHVwbGUgKGhpdHMsIG1pc3NlcywgbWF4c2l6ZSwgY3VycnNpemUpCiAgICB3aXRoIGYuY2FjaGVfaW5mbygpLiAgQ2xlYXIgdGhlIGNhY2hlIGFuZCBzdGF0aXN0aWNzIHdpdGggZi5jYWNoZV9jbGVhcigpLgogICAgQWNjZXNzIHRoZSB1bmRlcmx5aW5nIGZ1bmN0aW9uIHdpdGggZi5fX3dyYXBwZWRfXy4KCiAgICBTZWU6ICBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NhY2hlX2FsZ29yaXRobXMjTGVhc3RfUmVjZW50bHlfVXNlZAoKICAgICIiIgoKICAgICMgVXNlcnMgc2hvdWxkIG9ubHkgYWNjZXNzIHRoZSBscnVfY2FjaGUgdGhyb3VnaCBpdHMgcHVibGljIEFQSToKICAgICMgICAgICAgY2FjaGVfaW5mbywgY2FjaGVfY2xlYXIsIGFuZCBmLl9fd3JhcHBlZF9fCiAgICAjIFRoZSBpbnRlcm5hbHMgb2YgdGhlIGxydV9jYWNoZSBhcmUgZW5jYXBzdWxhdGVkIGZvciB0aHJlYWQgc2FmZXR5IGFuZAogICAgIyB0byBhbGxvdyB0aGUgaW1wbGVtZW50YXRpb24gdG8gY2hhbmdlIChpbmNsdWRpbmcgYSBwb3NzaWJsZSBDIHZlcnNpb24pLgoKICAgICMgQ29uc3RhbnRzIHNoYXJlZCBieSBhbGwgbHJ1IGNhY2hlIGluc3RhbmNlczoKICAgIHNlbnRpbmVsID0gb2JqZWN0KCkgICAgICAgICAgIyB1bmlxdWUgb2JqZWN0IHVzZWQgdG8gc2lnbmFsIGNhY2hlIG1pc3NlcwogICAgbWFrZV9rZXkgPSBfbWFrZV9rZXkgICAgICAgICAjIGJ1aWxkIGEga2V5IGZyb20gdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cwogICAgUFJFViwgTkVYVCwgS0VZLCBSRVNVTFQgPSAwLCAxLCAyLCAzICAgIyBuYW1lcyBmb3IgdGhlIGxpbmsgZmllbGRzCgogICAgZGVmIGRlY29yYXRpbmdfZnVuY3Rpb24odXNlcl9mdW5jdGlvbik6CgogICAgICAgIGNhY2hlID0ge30KICAgICAgICBoaXRzID0gbWlzc2VzID0gY3VycnNpemUgPSAwCiAgICAgICAgZnVsbCA9IEZhbHNlCiAgICAgICAgY2FjaGVfZ2V0ID0gY2FjaGUuZ2V0ICAgICMgYm91bmQgbWV0aG9kIHRvIGxvb2t1cCBhIGtleSBvciByZXR1cm4gTm9uZQogICAgICAgIGxvY2sgPSBMb2NrKCkgICAgICAgICAgICAjIGJlY2F1c2UgbGlua2VkbGlzdCB1cGRhdGVzIGFyZW4ndCB0aHJlYWRzYWZlCiAgICAgICAgcm9vdCA9IFtdICAgICAgICAgICAgICAgICMgcm9vdCBvZiB0aGUgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0CiAgICAgICAgcm9vdFs6XSA9IFtyb290LCByb290LCBOb25lLCBOb25lXSAgICAgIyBpbml0aWFsaXplIGJ5IHBvaW50aW5nIHRvIHNlbGYKCiAgICAgICAgaWYgbWF4c2l6ZSA9PSAwOgoKICAgICAgICAgICAgZGVmIHdyYXBwZXIoKmFyZ3MsICoqa3dkcyk6CiAgICAgICAgICAgICAgICAjIG5vIGNhY2hpbmcsIGp1c3QgYSBzdGF0aXN0aWNzIHVwZGF0ZSBhZnRlciBhIHN1Y2Nlc3NmdWwgY2FsbAogICAgICAgICAgICAgICAgbm9ubG9jYWwgbWlzc2VzCiAgICAgICAgICAgICAgICByZXN1bHQgPSB1c2VyX2Z1bmN0aW9uKCphcmdzLCAqKmt3ZHMpCiAgICAgICAgICAgICAgICBtaXNzZXMgKz0gMQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgICAgICBlbGlmIG1heHNpemUgaXMgTm9uZToKCiAgICAgICAgICAgIGRlZiB3cmFwcGVyKCphcmdzLCAqKmt3ZHMpOgogICAgICAgICAgICAgICAgIyBzaW1wbGUgY2FjaGluZyB3aXRob3V0IG9yZGVyaW5nIG9yIHNpemUgbGltaXQKICAgICAgICAgICAgICAgIG5vbmxvY2FsIGhpdHMsIG1pc3NlcywgY3VycnNpemUKICAgICAgICAgICAgICAgIGtleSA9IG1ha2Vfa2V5KGFyZ3MsIGt3ZHMsIHR5cGVkKQogICAgICAgICAgICAgICAgcmVzdWx0ID0gY2FjaGVfZ2V0KGtleSwgc2VudGluZWwpCiAgICAgICAgICAgICAgICBpZiByZXN1bHQgaXMgbm90IHNlbnRpbmVsOgogICAgICAgICAgICAgICAgICAgIGhpdHMgKz0gMQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHVzZXJfZnVuY3Rpb24oKmFyZ3MsICoqa3dkcykKICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSByZXN1bHQKICAgICAgICAgICAgICAgIG1pc3NlcyArPSAxCiAgICAgICAgICAgICAgICBjdXJyc2l6ZSArPSAxCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgICAgIGVsc2U6CgogICAgICAgICAgICBkZWYgd3JhcHBlcigqYXJncywgKiprd2RzKToKICAgICAgICAgICAgICAgICMgc2l6ZSBsaW1pdGVkIGNhY2hpbmcgdGhhdCB0cmFja3MgYWNjZXNzZXMgYnkgcmVjZW5jeQogICAgICAgICAgICAgICAgbm9ubG9jYWwgcm9vdCwgaGl0cywgbWlzc2VzLCBjdXJyc2l6ZSwgZnVsbAogICAgICAgICAgICAgICAga2V5ID0gbWFrZV9rZXkoYXJncywga3dkcywgdHlwZWQpCiAgICAgICAgICAgICAgICB3aXRoIGxvY2s6CiAgICAgICAgICAgICAgICAgICAgbGluayA9IGNhY2hlX2dldChrZXkpCiAgICAgICAgICAgICAgICAgICAgaWYgbGluayBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgIyBtb3ZlIHRoZSBsaW5rIHRvIHRoZSBmcm9udCBvZiB0aGUgY2lyY3VsYXIgcXVldWUKICAgICAgICAgICAgICAgICAgICAgICAgbGlua19wcmV2LCBsaW5rX25leHQsIGtleSwgcmVzdWx0ID0gbGluawogICAgICAgICAgICAgICAgICAgICAgICBsaW5rX3ByZXZbTkVYVF0gPSBsaW5rX25leHQKICAgICAgICAgICAgICAgICAgICAgICAgbGlua19uZXh0W1BSRVZdID0gbGlua19wcmV2CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSByb290W1BSRVZdCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RbTkVYVF0gPSByb290W1BSRVZdID0gbGluawogICAgICAgICAgICAgICAgICAgICAgICBsaW5rW1BSRVZdID0gbGFzdAogICAgICAgICAgICAgICAgICAgICAgICBsaW5rW05FWFRdID0gcm9vdAogICAgICAgICAgICAgICAgICAgICAgICBoaXRzICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgICAgICAgICAgICAgcmVzdWx0ID0gdXNlcl9mdW5jdGlvbigqYXJncywgKiprd2RzKQogICAgICAgICAgICAgICAgd2l0aCBsb2NrOgogICAgICAgICAgICAgICAgICAgIGlmIGtleSBpbiBjYWNoZToKICAgICAgICAgICAgICAgICAgICAgICAgIyBnZXR0aW5nIGhlcmUgbWVhbnMgdGhhdCB0aGlzIHNhbWUga2V5IHdhcyBhZGRlZCB0byB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgIyBjYWNoZSB3aGlsZSB0aGUgbG9jayB3YXMgcmVsZWFzZWQuICBzaW5jZSB0aGUgbGluawogICAgICAgICAgICAgICAgICAgICAgICAjIHVwZGF0ZSBpcyBhbHJlYWR5IGRvbmUsIHdlIG5lZWQgb25seSByZXR1cm4gdGhlCiAgICAgICAgICAgICAgICAgICAgICAgICMgY29tcHV0ZWQgcmVzdWx0IGFuZCB1cGRhdGUgdGhlIGNvdW50IG9mIG1pc3Nlcy4KICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgICAgIGVsaWYgZnVsbDoKICAgICAgICAgICAgICAgICAgICAgICAgIyB1c2Ugcm9vdCB0byBzdG9yZSB0aGUgbmV3IGtleSBhbmQgcmVzdWx0CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RbS0VZXSA9IGtleQogICAgICAgICAgICAgICAgICAgICAgICByb290W1JFU1VMVF0gPSByZXN1bHQKICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVba2V5XSA9IHJvb3QKICAgICAgICAgICAgICAgICAgICAgICAgIyBlbXB0eSB0aGUgb2xkZXN0IGxpbmsgYW5kIG1ha2UgaXQgdGhlIG5ldyByb290CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QgPSByb290W05FWFRdCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbCBjYWNoZVtyb290W0tFWV1dCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RbS0VZXSA9IHJvb3RbUkVTVUxUXSA9IE5vbmUKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAjIHB1dCByZXN1bHQgaW4gYSBuZXcgbGluayBhdCB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSByb290W1BSRVZdCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSBbbGFzdCwgcm9vdCwga2V5LCByZXN1bHRdCiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSBsYXN0W05FWFRdID0gcm9vdFtQUkVWXSA9IGxpbmsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycnNpemUgKz0gMQogICAgICAgICAgICAgICAgICAgICAgICBmdWxsID0gKGN1cnJzaXplID09IG1heHNpemUpCiAgICAgICAgICAgICAgICAgICAgbWlzc2VzICs9IDEKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKCiAgICAgICAgZGVmIGNhY2hlX2luZm8oKToKICAgICAgICAgICAgIiIiUmVwb3J0IGNhY2hlIHN0YXRpc3RpY3MiIiIKICAgICAgICAgICAgd2l0aCBsb2NrOgogICAgICAgICAgICAgICAgcmV0dXJuIF9DYWNoZUluZm8oaGl0cywgbWlzc2VzLCBtYXhzaXplLCBjdXJyc2l6ZSkKCiAgICAgICAgZGVmIGNhY2hlX2NsZWFyKCk6CiAgICAgICAgICAgICIiIkNsZWFyIHRoZSBjYWNoZSBhbmQgY2FjaGUgc3RhdGlzdGljcyIiIgogICAgICAgICAgICBub25sb2NhbCBoaXRzLCBtaXNzZXMsIGN1cnJzaXplLCBmdWxsCiAgICAgICAgICAgIHdpdGggbG9jazoKICAgICAgICAgICAgICAgIGNhY2hlLmNsZWFyKCkKICAgICAgICAgICAgICAgIHJvb3RbOl0gPSBbcm9vdCwgcm9vdCwgTm9uZSwgTm9uZV0KICAgICAgICAgICAgICAgIGhpdHMgPSBtaXNzZXMgPSBjdXJyc2l6ZSA9IDAKICAgICAgICAgICAgICAgIGZ1bGwgPSBGYWxzZQoKICAgICAgICB3cmFwcGVyLmNhY2hlX2luZm8gPSBjYWNoZV9pbmZvCiAgICAgICAgd3JhcHBlci5jYWNoZV9jbGVhciA9IGNhY2hlX2NsZWFyCiAgICAgICAgcmV0dXJuIHVwZGF0ZV93cmFwcGVyKHdyYXBwZXIsIHVzZXJfZnVuY3Rpb24pCgogICAgcmV0dXJuIGRlY29yYXRpbmdfZnVuY3Rpb24K',
'/Lib/weakref.py':'IiIiV2VhayByZWZlcmVuY2Ugc3VwcG9ydCBmb3IgUHl0aG9uLg0KDQpUaGlzIG1vZHVsZSBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBQRVAgMjA1Og0KDQpodHRwOi8vd3d3LnB5dGhvbi5vcmcvZGV2L3BlcHMvcGVwLTAyMDUvDQoiIiINCg0KIyBOYW1pbmcgY29udmVudGlvbjogVmFyaWFibGVzIG5hbWVkICJ3ciIgYXJlIHdlYWsgcmVmZXJlbmNlIG9iamVjdHM7DQojIHRoZXkgYXJlIGNhbGxlZCB0aGlzIGluc3RlYWQgb2YgInJlZiIgdG8gYXZvaWQgbmFtZSBjb2xsaXNpb25zIHdpdGgNCiMgdGhlIG1vZHVsZS1nbG9iYWwgcmVmKCkgZnVuY3Rpb24gaW1wb3J0ZWQgZnJvbSBfd2Vha3JlZi4NCg0KZnJvbSBfd2Vha3JlZiBpbXBvcnQgKA0KICAgICBnZXR3ZWFrcmVmY291bnQsDQogICAgIGdldHdlYWtyZWZzLA0KICAgICByZWYsDQogICAgIHByb3h5LA0KICAgICBDYWxsYWJsZVByb3h5VHlwZSwNCiAgICAgUHJveHlUeXBlLA0KICAgICBSZWZlcmVuY2VUeXBlKQ0KDQpmcm9tIF93ZWFrcmVmc2V0IGltcG9ydCBXZWFrU2V0LCBfSXRlcmF0aW9uR3VhcmQNCg0KaW1wb3J0IGNvbGxlY3Rpb25zICAjIEltcG9ydCBhZnRlciBfd2Vha3JlZiB0byBhdm9pZCBjaXJjdWxhciBpbXBvcnQuDQoNClByb3h5VHlwZXMgPSAoUHJveHlUeXBlLCBDYWxsYWJsZVByb3h5VHlwZSkNCg0KX19hbGxfXyA9IFsicmVmIiwgInByb3h5IiwgImdldHdlYWtyZWZjb3VudCIsICJnZXR3ZWFrcmVmcyIsDQogICAgICAgICAgICJXZWFrS2V5RGljdGlvbmFyeSIsICJSZWZlcmVuY2VUeXBlIiwgIlByb3h5VHlwZSIsDQogICAgICAgICAgICJDYWxsYWJsZVByb3h5VHlwZSIsICJQcm94eVR5cGVzIiwgIldlYWtWYWx1ZURpY3Rpb25hcnkiLA0KICAgICAgICAgICAiV2Vha1NldCJdDQoNCg0KY2xhc3MgV2Vha1ZhbHVlRGljdGlvbmFyeShjb2xsZWN0aW9ucy5NdXRhYmxlTWFwcGluZyk6DQogICAgIiIiTWFwcGluZyBjbGFzcyB0aGF0IHJlZmVyZW5jZXMgdmFsdWVzIHdlYWtseS4NCg0KICAgIEVudHJpZXMgaW4gdGhlIGRpY3Rpb25hcnkgd2lsbCBiZSBkaXNjYXJkZWQgd2hlbiBubyBzdHJvbmcNCiAgICByZWZlcmVuY2UgdG8gdGhlIHZhbHVlIGV4aXN0cyBhbnltb3JlDQogICAgIiIiDQogICAgIyBXZSBpbmhlcml0IHRoZSBjb25zdHJ1Y3RvciB3aXRob3V0IHdvcnJ5aW5nIGFib3V0IHRoZSBpbnB1dA0KICAgICMgZGljdGlvbmFyeTsgc2luY2UgaXQgdXNlcyBvdXIgLnVwZGF0ZSgpIG1ldGhvZCwgd2UgZ2V0IHRoZSByaWdodA0KICAgICMgY2hlY2tzIChpZiB0aGUgb3RoZXIgZGljdGlvbmFyeSBpcyBhIFdlYWtWYWx1ZURpY3Rpb25hcnksDQogICAgIyBvYmplY3RzIGFyZSB1bndyYXBwZWQgb24gdGhlIHdheSBvdXQsIGFuZCB3ZSBhbHdheXMgd3JhcCBvbiB0aGUNCiAgICAjIHdheSBpbikuDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3cpOg0KICAgICAgICBkZWYgcmVtb3ZlKHdyLCBzZWxmcmVmPXJlZihzZWxmKSk6DQogICAgICAgICAgICBzZWxmID0gc2VsZnJlZigpDQogICAgICAgICAgICBpZiBzZWxmIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIGlmIHNlbGYuX2l0ZXJhdGluZzoNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGVuZGluZ19yZW1vdmFscy5hcHBlbmQod3Iua2V5KQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLmRhdGFbd3Iua2V5XQ0KICAgICAgICBzZWxmLl9yZW1vdmUgPSByZW1vdmUNCiAgICAgICAgIyBBIGxpc3Qgb2Yga2V5cyB0byBiZSByZW1vdmVkDQogICAgICAgIHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMgPSBbXQ0KICAgICAgICBzZWxmLl9pdGVyYXRpbmcgPSBzZXQoKQ0KICAgICAgICBzZWxmLmRhdGEgPSBkID0ge30NCiAgICAgICAgc2VsZi51cGRhdGUoKmFyZ3MsICoqa3cpDQoNCiAgICBkZWYgX2NvbW1pdF9yZW1vdmFscyhzZWxmKToNCiAgICAgICAgbCA9IHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMNCiAgICAgICAgZCA9IHNlbGYuZGF0YQ0KICAgICAgICAjIFdlIHNob3VsZG4ndCBlbmNvdW50ZXIgYW55IEtleUVycm9yLCBiZWNhdXNlIHRoaXMgbWV0aG9kIHNob3VsZA0KICAgICAgICAjIGFsd2F5cyBiZSBjYWxsZWQgKmJlZm9yZSogbXV0YXRpbmcgdGhlIGRpY3QuDQogICAgICAgIHdoaWxlIGw6DQogICAgICAgICAgICBkZWwgZFtsLnBvcCgpXQ0KDQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6DQogICAgICAgIG8gPSBzZWxmLmRhdGFba2V5XSgpDQogICAgICAgIGlmIG8gaXMgTm9uZToNCiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBvDQoNCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5KToNCiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpDQogICAgICAgIGRlbCBzZWxmLmRhdGFba2V5XQ0KDQogICAgZGVmIF9fbGVuX18oc2VsZik6DQogICAgICAgIHJldHVybiBsZW4oc2VsZi5kYXRhKSAtIGxlbihzZWxmLl9wZW5kaW5nX3JlbW92YWxzKQ0KDQogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBvID0gc2VsZi5kYXRhW2tleV0oKQ0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgcmV0dXJuIG8gaXMgbm90IE5vbmUNCg0KICAgIGRlZiBfX3JlcHJfXyhzZWxmKToNCiAgICAgICAgcmV0dXJuICI8V2Vha1ZhbHVlRGljdGlvbmFyeSBhdCAlcz4iICUgaWQoc2VsZikNCg0KICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXksIHZhbHVlKToNCiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpDQogICAgICAgIHNlbGYuZGF0YVtrZXldID0gS2V5ZWRSZWYodmFsdWUsIHNlbGYuX3JlbW92ZSwga2V5KQ0KDQogICAgZGVmIGNvcHkoc2VsZik6DQogICAgICAgIG5ldyA9IFdlYWtWYWx1ZURpY3Rpb25hcnkoKQ0KICAgICAgICBmb3Iga2V5LCB3ciBpbiBzZWxmLmRhdGEuaXRlbXMoKToNCiAgICAgICAgICAgIG8gPSB3cigpDQogICAgICAgICAgICBpZiBvIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIG5ld1trZXldID0gbw0KICAgICAgICByZXR1cm4gbmV3DQoNCiAgICBfX2NvcHlfXyA9IGNvcHkNCg0KICAgIGRlZiBfX2RlZXBjb3B5X18oc2VsZiwgbWVtbyk6DQogICAgICAgIGZyb20gY29weSBpbXBvcnQgZGVlcGNvcHkNCiAgICAgICAgbmV3ID0gc2VsZi5fX2NsYXNzX18oKQ0KICAgICAgICBmb3Iga2V5LCB3ciBpbiBzZWxmLmRhdGEuaXRlbXMoKToNCiAgICAgICAgICAgIG8gPSB3cigpDQogICAgICAgICAgICBpZiBvIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIG5ld1tkZWVwY29weShrZXksIG1lbW8pXSA9IG8NCiAgICAgICAgcmV0dXJuIG5ldw0KDQogICAgZGVmIGdldChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdyID0gc2VsZi5kYXRhW2tleV0NCiAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHQNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIG8gPSB3cigpDQogICAgICAgICAgICBpZiBvIGlzIE5vbmU6DQogICAgICAgICAgICAgICAgIyBUaGlzIHNob3VsZCBvbmx5IGhhcHBlbg0KICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0DQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHJldHVybiBvDQoNCiAgICBkZWYgaXRlbXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIGssIHdyIGluIHNlbGYuZGF0YS5pdGVtcygpOg0KICAgICAgICAgICAgICAgIHYgPSB3cigpDQogICAgICAgICAgICAgICAgaWYgdiBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgeWllbGQgaywgdg0KDQogICAgZGVmIGtleXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIGssIHdyIGluIHNlbGYuZGF0YS5pdGVtcygpOg0KICAgICAgICAgICAgICAgIGlmIHdyKCkgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgICAgIHlpZWxkIGsNCg0KICAgIF9faXRlcl9fID0ga2V5cw0KDQogICAgZGVmIGl0ZXJ2YWx1ZXJlZnMoc2VsZik6DQogICAgICAgICIiIlJldHVybiBhbiBpdGVyYXRvciB0aGF0IHlpZWxkcyB0aGUgd2VhayByZWZlcmVuY2VzIHRvIHRoZSB2YWx1ZXMuDQoNCiAgICAgICAgVGhlIHJlZmVyZW5jZXMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlICdsaXZlJyBhdCB0aGUgdGltZQ0KICAgICAgICB0aGV5IGFyZSB1c2VkLCBzbyB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIHJlZmVyZW5jZXMgbmVlZHMNCiAgICAgICAgdG8gYmUgY2hlY2tlZCBiZWZvcmUgYmVpbmcgdXNlZC4gIFRoaXMgY2FuIGJlIHVzZWQgdG8gYXZvaWQNCiAgICAgICAgY3JlYXRpbmcgcmVmZXJlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvDQogICAgICAgIGtlZXAgdGhlIHZhbHVlcyBhcm91bmQgbG9uZ2VyIHRoYW4gbmVlZGVkLg0KDQogICAgICAgICIiIg0KICAgICAgICB3aXRoIF9JdGVyYXRpb25HdWFyZChzZWxmKToNCiAgICAgICAgICAgIGZvciB3ciBpbiBzZWxmLmRhdGEudmFsdWVzKCk6DQogICAgICAgICAgICAgICAgeWllbGQgd3INCg0KICAgIGRlZiB2YWx1ZXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIHdyIGluIHNlbGYuZGF0YS52YWx1ZXMoKToNCiAgICAgICAgICAgICAgICBvYmogPSB3cigpDQogICAgICAgICAgICAgICAgaWYgb2JqIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICAgICB5aWVsZCBvYmoNCg0KICAgIGRlZiBwb3BpdGVtKHNlbGYpOg0KICAgICAgICBpZiBzZWxmLl9wZW5kaW5nX3JlbW92YWxzOg0KICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkNCiAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIGtleSwgd3IgPSBzZWxmLmRhdGEucG9waXRlbSgpDQogICAgICAgICAgICBvID0gd3IoKQ0KICAgICAgICAgICAgaWYgbyBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICByZXR1cm4ga2V5LCBvDQoNCiAgICBkZWYgcG9wKHNlbGYsIGtleSwgKmFyZ3MpOg0KICAgICAgICBpZiBzZWxmLl9wZW5kaW5nX3JlbW92YWxzOg0KICAgICAgICAgICAgc2VsZi5fY29tbWl0X3JlbW92YWxzKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbyA9IHNlbGYuZGF0YS5wb3Aoa2V5KSgpDQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgICAgIGlmIGFyZ3M6DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3NbMF0NCiAgICAgICAgICAgIHJhaXNlDQogICAgICAgIGlmIG8gaXMgTm9uZToNCiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBvDQoNCiAgICBkZWYgc2V0ZGVmYXVsdChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdyID0gc2VsZi5kYXRhW2tleV0NCiAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgICAgICBzZWxmLl9jb21taXRfcmVtb3ZhbHMoKQ0KICAgICAgICAgICAgc2VsZi5kYXRhW2tleV0gPSBLZXllZFJlZihkZWZhdWx0LCBzZWxmLl9yZW1vdmUsIGtleSkNCiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0DQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXR1cm4gd3IoKQ0KDQogICAgZGVmIHVwZGF0ZShzZWxmLCBkaWN0PU5vbmUsICoqa3dhcmdzKToNCiAgICAgICAgaWYgc2VsZi5fcGVuZGluZ19yZW1vdmFsczoNCiAgICAgICAgICAgIHNlbGYuX2NvbW1pdF9yZW1vdmFscygpDQogICAgICAgIGQgPSBzZWxmLmRhdGENCiAgICAgICAgaWYgZGljdCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgIGlmIG5vdCBoYXNhdHRyKGRpY3QsICJpdGVtcyIpOg0KICAgICAgICAgICAgICAgIGRpY3QgPSB0eXBlKHt9KShkaWN0KQ0KICAgICAgICAgICAgZm9yIGtleSwgbyBpbiBkaWN0Lml0ZW1zKCk6DQogICAgICAgICAgICAgICAgZFtrZXldID0gS2V5ZWRSZWYobywgc2VsZi5fcmVtb3ZlLCBrZXkpDQogICAgICAgIGlmIGxlbihrd2FyZ3MpOg0KICAgICAgICAgICAgc2VsZi51cGRhdGUoa3dhcmdzKQ0KDQogICAgZGVmIHZhbHVlcmVmcyhzZWxmKToNCiAgICAgICAgIiIiUmV0dXJuIGEgbGlzdCBvZiB3ZWFrIHJlZmVyZW5jZXMgdG8gdGhlIHZhbHVlcy4NCg0KICAgICAgICBUaGUgcmVmZXJlbmNlcyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgJ2xpdmUnIGF0IHRoZSB0aW1lDQogICAgICAgIHRoZXkgYXJlIHVzZWQsIHNvIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgcmVmZXJlbmNlcyBuZWVkcw0KICAgICAgICB0byBiZSBjaGVja2VkIGJlZm9yZSBiZWluZyB1c2VkLiAgVGhpcyBjYW4gYmUgdXNlZCB0byBhdm9pZA0KICAgICAgICBjcmVhdGluZyByZWZlcmVuY2VzIHRoYXQgd2lsbCBjYXVzZSB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IgdG8NCiAgICAgICAga2VlcCB0aGUgdmFsdWVzIGFyb3VuZCBsb25nZXIgdGhhbiBuZWVkZWQuDQoNCiAgICAgICAgIiIiDQogICAgICAgIHJldHVybiBsaXN0KHNlbGYuZGF0YS52YWx1ZXMoKSkNCg0KDQpjbGFzcyBLZXllZFJlZihyZWYpOg0KICAgICIiIlNwZWNpYWxpemVkIHJlZmVyZW5jZSB0aGF0IGluY2x1ZGVzIGEga2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHZhbHVlLg0KDQogICAgVGhpcyBpcyB1c2VkIGluIHRoZSBXZWFrVmFsdWVEaWN0aW9uYXJ5IHRvIGF2b2lkIGhhdmluZyB0byBjcmVhdGUNCiAgICBhIGZ1bmN0aW9uIG9iamVjdCBmb3IgZWFjaCBrZXkgc3RvcmVkIGluIHRoZSBtYXBwaW5nLiAgQSBzaGFyZWQNCiAgICBjYWxsYmFjayBvYmplY3QgY2FuIHVzZSB0aGUgJ2tleScgYXR0cmlidXRlIG9mIGEgS2V5ZWRSZWYgaW5zdGVhZA0KICAgIG9mIGdldHRpbmcgYSByZWZlcmVuY2UgdG8gdGhlIGtleSBmcm9tIGFuIGVuY2xvc2luZyBzY29wZS4NCg0KICAgICIiIg0KDQogICAgX19zbG90c19fID0gImtleSIsDQoNCiAgICBkZWYgX19uZXdfXyh0eXBlLCBvYiwgY2FsbGJhY2ssIGtleSk6DQogICAgICAgIHNlbGYgPSByZWYuX19uZXdfXyh0eXBlLCBvYiwgY2FsbGJhY2spDQogICAgICAgIHNlbGYua2V5ID0ga2V5DQogICAgICAgIHJldHVybiBzZWxmDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgb2IsIGNhbGxiYWNrLCBrZXkpOg0KICAgICAgICBzdXBlcigpLl9faW5pdF9fKG9iLCBjYWxsYmFjaykNCg0KDQpjbGFzcyBXZWFrS2V5RGljdGlvbmFyeShjb2xsZWN0aW9ucy5NdXRhYmxlTWFwcGluZyk6DQogICAgIiIiIE1hcHBpbmcgY2xhc3MgdGhhdCByZWZlcmVuY2VzIGtleXMgd2Vha2x5Lg0KDQogICAgRW50cmllcyBpbiB0aGUgZGljdGlvbmFyeSB3aWxsIGJlIGRpc2NhcmRlZCB3aGVuIHRoZXJlIGlzIG5vDQogICAgbG9uZ2VyIGEgc3Ryb25nIHJlZmVyZW5jZSB0byB0aGUga2V5LiBUaGlzIGNhbiBiZSB1c2VkIHRvDQogICAgYXNzb2NpYXRlIGFkZGl0aW9uYWwgZGF0YSB3aXRoIGFuIG9iamVjdCBvd25lZCBieSBvdGhlciBwYXJ0cyBvZg0KICAgIGFuIGFwcGxpY2F0aW9uIHdpdGhvdXQgYWRkaW5nIGF0dHJpYnV0ZXMgdG8gdGhvc2Ugb2JqZWN0cy4gVGhpcw0KICAgIGNhbiBiZSBlc3BlY2lhbGx5IHVzZWZ1bCB3aXRoIG9iamVjdHMgdGhhdCBvdmVycmlkZSBhdHRyaWJ1dGUNCiAgICBhY2Nlc3Nlcy4NCiAgICAiIiINCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkaWN0PU5vbmUpOg0KICAgICAgICBzZWxmLmRhdGEgPSB7fQ0KICAgICAgICBkZWYgcmVtb3ZlKGssIHNlbGZyZWY9cmVmKHNlbGYpKToNCiAgICAgICAgICAgIHNlbGYgPSBzZWxmcmVmKCkNCiAgICAgICAgICAgIGlmIHNlbGYgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgaWYgc2VsZi5faXRlcmF0aW5nOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLl9wZW5kaW5nX3JlbW92YWxzLmFwcGVuZChrKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLmRhdGFba10NCiAgICAgICAgc2VsZi5fcmVtb3ZlID0gcmVtb3ZlDQogICAgICAgICMgQSBsaXN0IG9mIGRlYWQgd2Vha3JlZnMgKGtleXMgdG8gYmUgcmVtb3ZlZCkNCiAgICAgICAgc2VsZi5fcGVuZGluZ19yZW1vdmFscyA9IFtdDQogICAgICAgIHNlbGYuX2l0ZXJhdGluZyA9IHNldCgpDQogICAgICAgIGlmIGRpY3QgaXMgbm90IE5vbmU6DQogICAgICAgICAgICBzZWxmLnVwZGF0ZShkaWN0KQ0KDQogICAgZGVmIF9jb21taXRfcmVtb3ZhbHMoc2VsZik6DQogICAgICAgICMgTk9URTogV2UgZG9uJ3QgbmVlZCB0byBjYWxsIHRoaXMgbWV0aG9kIGJlZm9yZSBtdXRhdGluZyB0aGUgZGljdCwNCiAgICAgICAgIyBiZWNhdXNlIGEgZGVhZCB3ZWFrcmVmIG5ldmVyIGNvbXBhcmVzIGVxdWFsIHRvIGEgbGl2ZSB3ZWFrcmVmLA0KICAgICAgICAjIGV2ZW4gaWYgdGhleSBoYXBwZW5lZCB0byByZWZlciB0byBlcXVhbCBvYmplY3RzLg0KICAgICAgICAjIEhvd2V2ZXIsIGl0IG1lYW5zIGtleXMgbWF5IGFscmVhZHkgaGF2ZSBiZWVuIHJlbW92ZWQuDQogICAgICAgIGwgPSBzZWxmLl9wZW5kaW5nX3JlbW92YWxzDQogICAgICAgIGQgPSBzZWxmLmRhdGENCiAgICAgICAgd2hpbGUgbDoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBkZWwgZFtsLnBvcCgpXQ0KICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgICAgIHBhc3MNCg0KICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXkpOg0KICAgICAgICBkZWwgc2VsZi5kYXRhW3JlZihrZXkpXQ0KDQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6DQogICAgICAgIHJldHVybiBzZWxmLmRhdGFbcmVmKGtleSldDQoNCiAgICBkZWYgX19sZW5fXyhzZWxmKToNCiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmRhdGEpIC0gbGVuKHNlbGYuX3BlbmRpbmdfcmVtb3ZhbHMpDQoNCiAgICBkZWYgX19yZXByX18oc2VsZik6DQogICAgICAgIHJldHVybiAiPFdlYWtLZXlEaWN0aW9uYXJ5IGF0ICVzPiIgJSBpZChzZWxmKQ0KDQogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgdmFsdWUpOg0KICAgICAgICBzZWxmLmRhdGFbcmVmKGtleSwgc2VsZi5fcmVtb3ZlKV0gPSB2YWx1ZQ0KDQogICAgZGVmIGNvcHkoc2VsZik6DQogICAgICAgIG5ldyA9IFdlYWtLZXlEaWN0aW9uYXJ5KCkNCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gc2VsZi5kYXRhLml0ZW1zKCk6DQogICAgICAgICAgICBvID0ga2V5KCkNCiAgICAgICAgICAgIGlmIG8gaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgbmV3W29dID0gdmFsdWUNCiAgICAgICAgcmV0dXJuIG5ldw0KDQogICAgX19jb3B5X18gPSBjb3B5DQoNCiAgICBkZWYgX19kZWVwY29weV9fKHNlbGYsIG1lbW8pOg0KICAgICAgICBmcm9tIGNvcHkgaW1wb3J0IGRlZXBjb3B5DQogICAgICAgIG5ldyA9IHNlbGYuX19jbGFzc19fKCkNCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gc2VsZi5kYXRhLml0ZW1zKCk6DQogICAgICAgICAgICBvID0ga2V5KCkNCiAgICAgICAgICAgIGlmIG8gaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgbmV3W29dID0gZGVlcGNvcHkodmFsdWUsIG1lbW8pDQogICAgICAgIHJldHVybiBuZXcNCg0KICAgIGRlZiBnZXQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOg0KICAgICAgICByZXR1cm4gc2VsZi5kYXRhLmdldChyZWYoa2V5KSxkZWZhdWx0KQ0KDQogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB3ciA9IHJlZihrZXkpDQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgcmV0dXJuIHdyIGluIHNlbGYuZGF0YQ0KDQogICAgZGVmIGl0ZW1zKHNlbGYpOg0KICAgICAgICB3aXRoIF9JdGVyYXRpb25HdWFyZChzZWxmKToNCiAgICAgICAgICAgIGZvciB3ciwgdmFsdWUgaW4gc2VsZi5kYXRhLml0ZW1zKCk6DQogICAgICAgICAgICAgICAga2V5ID0gd3IoKQ0KICAgICAgICAgICAgICAgIGlmIGtleSBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgeWllbGQga2V5LCB2YWx1ZQ0KDQogICAgZGVmIGtleXMoc2VsZik6DQogICAgICAgIHdpdGggX0l0ZXJhdGlvbkd1YXJkKHNlbGYpOg0KICAgICAgICAgICAgZm9yIHdyIGluIHNlbGYuZGF0YToNCiAgICAgICAgICAgICAgICBvYmogPSB3cigpDQogICAgICAgICAgICAgICAgaWYgb2JqIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgICAgICB5aWVsZCBvYmoNCg0KICAgIF9faXRlcl9fID0ga2V5cw0KDQogICAgZGVmIHZhbHVlcyhzZWxmKToNCiAgICAgICAgd2l0aCBfSXRlcmF0aW9uR3VhcmQoc2VsZik6DQogICAgICAgICAgICBmb3Igd3IsIHZhbHVlIGluIHNlbGYuZGF0YS5pdGVtcygpOg0KICAgICAgICAgICAgICAgIGlmIHdyKCkgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgICAgIHlpZWxkIHZhbHVlDQoNCiAgICBkZWYga2V5cmVmcyhzZWxmKToNCiAgICAgICAgIiIiUmV0dXJuIGEgbGlzdCBvZiB3ZWFrIHJlZmVyZW5jZXMgdG8gdGhlIGtleXMuDQoNCiAgICAgICAgVGhlIHJlZmVyZW5jZXMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlICdsaXZlJyBhdCB0aGUgdGltZQ0KICAgICAgICB0aGV5IGFyZSB1c2VkLCBzbyB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIHJlZmVyZW5jZXMgbmVlZHMNCiAgICAgICAgdG8gYmUgY2hlY2tlZCBiZWZvcmUgYmVpbmcgdXNlZC4gIFRoaXMgY2FuIGJlIHVzZWQgdG8gYXZvaWQNCiAgICAgICAgY3JlYXRpbmcgcmVmZXJlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvDQogICAgICAgIGtlZXAgdGhlIGtleXMgYXJvdW5kIGxvbmdlciB0aGFuIG5lZWRlZC4NCg0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIGxpc3Qoc2VsZi5kYXRhKQ0KDQogICAgZGVmIHBvcGl0ZW0oc2VsZik6DQogICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICBrZXksIHZhbHVlID0gc2VsZi5kYXRhLnBvcGl0ZW0oKQ0KICAgICAgICAgICAgbyA9IGtleSgpDQogICAgICAgICAgICBpZiBvIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIHJldHVybiBvLCB2YWx1ZQ0KDQogICAgZGVmIHBvcChzZWxmLCBrZXksICphcmdzKToNCiAgICAgICAgcmV0dXJuIHNlbGYuZGF0YS5wb3AocmVmKGtleSksICphcmdzKQ0KDQogICAgZGVmIHNldGRlZmF1bHQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOg0KICAgICAgICByZXR1cm4gc2VsZi5kYXRhLnNldGRlZmF1bHQocmVmKGtleSwgc2VsZi5fcmVtb3ZlKSxkZWZhdWx0KQ0KDQogICAgZGVmIHVwZGF0ZShzZWxmLCBkaWN0PU5vbmUsICoqa3dhcmdzKToNCiAgICAgICAgZCA9IHNlbGYuZGF0YQ0KICAgICAgICBpZiBkaWN0IGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgaWYgbm90IGhhc2F0dHIoZGljdCwgIml0ZW1zIik6DQogICAgICAgICAgICAgICAgZGljdCA9IHR5cGUoe30pKGRpY3QpDQogICAgICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBkaWN0Lml0ZW1zKCk6DQogICAgICAgICAgICAgICAgZFtyZWYoa2V5LCBzZWxmLl9yZW1vdmUpXSA9IHZhbHVlDQogICAgICAgIGlmIGxlbihrd2FyZ3MpOg0KICAgICAgICAgICAgc2VsZi51cGRhdGUoa3dhcmdzKQ0K',
'/Lib/linecache.py':'IiIiQ2FjaGUgbGluZXMgZnJvbSBmaWxlcy4KClRoaXMgaXMgaW50ZW5kZWQgdG8gcmVhZCBsaW5lcyBmcm9tIG1vZHVsZXMgaW1wb3J0ZWQgLS0gaGVuY2UgaWYgYSBmaWxlbmFtZQppcyBub3QgZm91bmQsIGl0IHdpbGwgbG9vayBkb3duIHRoZSBtb2R1bGUgc2VhcmNoIHBhdGggZm9yIGEgZmlsZSBieQp0aGF0IG5hbWUuCiIiIgoKaW1wb3J0IHN5cwppbXBvcnQgb3MKI2ZpeG1lIGJyeXRob24KI2ltcG9ydCB0b2tlbml6ZQoKX19hbGxfXyA9IFsiZ2V0bGluZSIsICJjbGVhcmNhY2hlIiwgImNoZWNrY2FjaGUiXQoKZGVmIGdldGxpbmUoZmlsZW5hbWUsIGxpbmVubywgbW9kdWxlX2dsb2JhbHM9Tm9uZSk6CiAgICBsaW5lcyA9IGdldGxpbmVzKGZpbGVuYW1lLCBtb2R1bGVfZ2xvYmFscykKICAgIGlmIDEgPD0gbGluZW5vIDw9IGxlbihsaW5lcyk6CiAgICAgICAgcmV0dXJuIGxpbmVzW2xpbmVuby0xXQogICAgZWxzZToKICAgICAgICByZXR1cm4gJycKCgojIFRoZSBjYWNoZQoKY2FjaGUgPSB7fSAjIFRoZSBjYWNoZQoKCmRlZiBjbGVhcmNhY2hlKCk6CiAgICAiIiJDbGVhciB0aGUgY2FjaGUgZW50aXJlbHkuIiIiCgogICAgZ2xvYmFsIGNhY2hlCiAgICBjYWNoZSA9IHt9CgoKZGVmIGdldGxpbmVzKGZpbGVuYW1lLCBtb2R1bGVfZ2xvYmFscz1Ob25lKToKICAgICIiIkdldCB0aGUgbGluZXMgZm9yIGEgZmlsZSBmcm9tIHRoZSBjYWNoZS4KICAgIFVwZGF0ZSB0aGUgY2FjaGUgaWYgaXQgZG9lc24ndCBjb250YWluIGFuIGVudHJ5IGZvciB0aGlzIGZpbGUgYWxyZWFkeS4iIiIKCiAgICBpZiBmaWxlbmFtZSBpbiBjYWNoZToKICAgICAgICByZXR1cm4gY2FjaGVbZmlsZW5hbWVdWzJdCiAgICBlbHNlOgogICAgICAgIHJldHVybiB1cGRhdGVjYWNoZShmaWxlbmFtZSwgbW9kdWxlX2dsb2JhbHMpCgoKZGVmIGNoZWNrY2FjaGUoZmlsZW5hbWU9Tm9uZSk6CiAgICAiIiJEaXNjYXJkIGNhY2hlIGVudHJpZXMgdGhhdCBhcmUgb3V0IG9mIGRhdGUuCiAgICAoVGhpcyBpcyBub3QgY2hlY2tlZCB1cG9uIGVhY2ggY2FsbCEpIiIiCgogICAgaWYgZmlsZW5hbWUgaXMgTm9uZToKICAgICAgICBmaWxlbmFtZXMgPSBsaXN0KGNhY2hlLmtleXMoKSkKICAgIGVsc2U6CiAgICAgICAgaWYgZmlsZW5hbWUgaW4gY2FjaGU6CiAgICAgICAgICAgIGZpbGVuYW1lcyA9IFtmaWxlbmFtZV0KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4KCiAgICBmb3IgZmlsZW5hbWUgaW4gZmlsZW5hbWVzOgogICAgICAgIHNpemUsIG10aW1lLCBsaW5lcywgZnVsbG5hbWUgPSBjYWNoZVtmaWxlbmFtZV0KICAgICAgICBpZiBtdGltZSBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZSAgICMgbm8tb3AgZm9yIGZpbGVzIGxvYWRlZCB2aWEgYSBfX2xvYWRlcl9fCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzdGF0ID0gb3Muc3RhdChmdWxsbmFtZSkKICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICNleGNlcHQgb3MuZXJyb3I6CiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBkZWwgY2FjaGVbZmlsZW5hbWVdCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgaWYgc2l6ZSAhPSBzdGF0LnN0X3NpemUgb3IgbXRpbWUgIT0gc3RhdC5zdF9tdGltZToKICAgICAgICAgICAgZGVsIGNhY2hlW2ZpbGVuYW1lXQoKCmRlZiB1cGRhdGVjYWNoZShmaWxlbmFtZSwgbW9kdWxlX2dsb2JhbHM9Tm9uZSk6CiAgICAiIiJVcGRhdGUgYSBjYWNoZSBlbnRyeSBhbmQgcmV0dXJuIGl0cyBsaXN0IG9mIGxpbmVzLgogICAgSWYgc29tZXRoaW5nJ3Mgd3JvbmcsIHByaW50IGEgbWVzc2FnZSwgZGlzY2FyZCB0aGUgY2FjaGUgZW50cnksCiAgICBhbmQgcmV0dXJuIGFuIGVtcHR5IGxpc3QuIiIiCgogICAgaWYgZmlsZW5hbWUgaW4gY2FjaGU6CiAgICAgICAgZGVsIGNhY2hlW2ZpbGVuYW1lXQogICAgaWYgbm90IGZpbGVuYW1lIG9yIChmaWxlbmFtZS5zdGFydHN3aXRoKCc8JykgYW5kIGZpbGVuYW1lLmVuZHN3aXRoKCc+JykpOgogICAgICAgIHJldHVybiBbXQoKICAgIGZ1bGxuYW1lID0gZmlsZW5hbWUKICAgIHRyeToKICAgICAgICBzdGF0ID0gb3Muc3RhdChmdWxsbmFtZSkKICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgIGJhc2VuYW1lID0gZmlsZW5hbWUKCiAgICAgICAgIyBUcnkgZm9yIGEgX19sb2FkZXJfXywgaWYgYXZhaWxhYmxlCiAgICAgICAgaWYgbW9kdWxlX2dsb2JhbHMgYW5kICdfX2xvYWRlcl9fJyBpbiBtb2R1bGVfZ2xvYmFsczoKICAgICAgICAgICAgbmFtZSA9IG1vZHVsZV9nbG9iYWxzLmdldCgnX19uYW1lX18nKQogICAgICAgICAgICBsb2FkZXIgPSBtb2R1bGVfZ2xvYmFsc1snX19sb2FkZXJfXyddCiAgICAgICAgICAgIGdldF9zb3VyY2UgPSBnZXRhdHRyKGxvYWRlciwgJ2dldF9zb3VyY2UnLCBOb25lKQoKICAgICAgICAgICAgaWYgbmFtZSBhbmQgZ2V0X3NvdXJjZToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBkYXRhID0gZ2V0X3NvdXJjZShuYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0IChJbXBvcnRFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBkYXRhIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICMgTm8gbHVjaywgdGhlIFBFUDMwMiBsb2FkZXIgY2Fubm90IGZpbmQgdGhlIHNvdXJjZQogICAgICAgICAgICAgICAgICAgICAgICAjIGZvciB0aGlzIG1vZHVsZS4KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdCiAgICAgICAgICAgICAgICAgICAgY2FjaGVbZmlsZW5hbWVdID0gKAogICAgICAgICAgICAgICAgICAgICAgICBsZW4oZGF0YSksIE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgIFtsaW5lKydcbicgZm9yIGxpbmUgaW4gZGF0YS5zcGxpdGxpbmVzKCldLCBmdWxsbmFtZQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVbZmlsZW5hbWVdWzJdCgogICAgICAgICMgVHJ5IGxvb2tpbmcgdGhyb3VnaCB0aGUgbW9kdWxlIHNlYXJjaCBwYXRoLCB3aGljaCBpcyBvbmx5IHVzZWZ1bAogICAgICAgICMgd2hlbiBoYW5kbGluZyBhIHJlbGF0aXZlIGZpbGVuYW1lLgogICAgICAgIGlmIG9zLnBhdGguaXNhYnMoZmlsZW5hbWUpOgogICAgICAgICAgICByZXR1cm4gW10KCiAgICAgICAgIyBUYWtlIGNhcmUgdG8gaGFuZGxlIHBhY2thZ2VzLgogICAgICAgIGlmIGJhc2VuYW1lID09ICdfX2luaXRfXy5weSc6CiAgICAgICAgICAgICMgZmlsZW5hbWUgcmVmZXJlcyB0byBhIHBhY2thZ2UKICAgICAgICAgICAgYmFzZW5hbWUgPSBmaWxlbmFtZQoKICAgICAgICBmb3IgZGlybmFtZSBpbiBzeXMucGF0aDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZnVsbG5hbWUgPSBvcy5wYXRoLmpvaW4oZGlybmFtZSwgYmFzZW5hbWUpCiAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBBdHRyaWJ1dGVFcnJvcik6CiAgICAgICAgICAgICAgICAjIE5vdCBzdWZmaWNpZW50bHkgc3RyaW5nLWxpa2UgdG8gZG8gYW55dGhpbmcgdXNlZnVsIHdpdGguCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzdGF0ID0gb3Muc3RhdChmdWxsbmFtZSkKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICNmaXhtZSBicnl0aG9uLCBpbnZhbGlkIHN5bnRheCAKICAgICAgICAgICAgI2V4Y2VwdCBvcy5lcnJvcjoKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICNmaXhtZSBicnl0aG9uIHVuZXhwZWN0ZWQgdG9rZW4gZWxzZQogICAgICAgICNlbHNlOgogICAgICAgICMgICAgcmV0dXJuIFtdCiAgICB0cnk6CiAgICAgICAgZnA9b3BlbihmdWxsbmFtZSkKICAgICAgICAjZml4bWUgYnJ5dGhvbgogICAgICAgICN3aXRoIHRva2VuaXplLm9wZW4oZnVsbG5hbWUpIGFzIGZwOgogICAgICAgIGxpbmVzID0gZnAucmVhZGxpbmVzKCkKICAgICAgICBmcC5jbG9zZSgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICByZXR1cm4gW10KICAgIGlmIGxpbmVzIGFuZCBub3QgbGluZXNbLTFdLmVuZHN3aXRoKCdcbicpOgogICAgICAgIGxpbmVzWy0xXSArPSAnXG4nCiAgICBzaXplLCBtdGltZSA9IHN0YXQuc3Rfc2l6ZSwgc3RhdC5zdF9tdGltZQogICAgY2FjaGVbZmlsZW5hbWVdID0gc2l6ZSwgbXRpbWUsIGxpbmVzLCBmdWxsbmFtZQogICAgcmV0dXJuIGxpbmVzCg==',
'/Lib/_abcoll.py':'IyBDb3B5cmlnaHQgMjAwNyBHb29nbGUsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KIyBMaWNlbnNlZCB0byBQU0YgdW5kZXIgYSBDb250cmlidXRvciBBZ3JlZW1lbnQuCgoiIiJBYnN0cmFjdCBCYXNlIENsYXNzZXMgKEFCQ3MpIGZvciBjb2xsZWN0aW9ucywgYWNjb3JkaW5nIHRvIFBFUCAzMTE5LgoKRE9OJ1QgVVNFIFRISVMgTU9EVUxFIERJUkVDVExZISAgVGhlIGNsYXNzZXMgaGVyZSBzaG91bGQgYmUgaW1wb3J0ZWQKdmlhIGNvbGxlY3Rpb25zOyB0aGV5IGFyZSBkZWZpbmVkIGhlcmUgb25seSB0byBhbGxldmlhdGUgY2VydGFpbgpib290c3RyYXBwaW5nIGlzc3Vlcy4gIFVuaXQgdGVzdHMgYXJlIGluIHRlc3RfY29sbGVjdGlvbnMuCiIiIgoKI2Zyb20gYWJjIGltcG9ydCBBQkNNZXRhLCBhYnN0cmFjdG1ldGhvZAppbXBvcnQgc3lzCgpfX2FsbF9fID0gWyJIYXNoYWJsZSIsICJJdGVyYWJsZSIsICJJdGVyYXRvciIsCiAgICAgICAgICAgIlNpemVkIiwgIkNvbnRhaW5lciIsICJDYWxsYWJsZSIsCiAgICAgICAgICAgIlNldCIsICJNdXRhYmxlU2V0IiwKICAgICAgICAgICAiTWFwcGluZyIsICJNdXRhYmxlTWFwcGluZyIsCiAgICAgICAgICAgIk1hcHBpbmdWaWV3IiwgIktleXNWaWV3IiwgIkl0ZW1zVmlldyIsICJWYWx1ZXNWaWV3IiwKICAgICAgICAgICAiU2VxdWVuY2UiLCAiTXV0YWJsZVNlcXVlbmNlIiwKICAgICAgICAgICAiQnl0ZVN0cmluZyIsCiAgICAgICAgICAgXQoKIiIiCiMjIyBjb2xsZWN0aW9uIHJlbGF0ZWQgdHlwZXMgd2hpY2ggYXJlIG5vdCBleHBvc2VkIHRocm91Z2ggYnVpbHRpbiAjIyMKIyMgaXRlcmF0b3JzICMjCiNmaXhtZSBicnl0aG9uCiNieXRlc19pdGVyYXRvciA9IHR5cGUoaXRlcihiJycpKQpieXRlc19pdGVyYXRvciA9IHR5cGUoaXRlcignJykpCiNmaXhtZSBicnl0aG9uCiNieXRlYXJyYXlfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoYnl0ZWFycmF5KCkpKQojY2FsbGFibGVfaXRlcmF0b3IgPSA/Pz8KZGljdF9rZXlpdGVyYXRvciA9IHR5cGUoaXRlcih7fS5rZXlzKCkpKQpkaWN0X3ZhbHVlaXRlcmF0b3IgPSB0eXBlKGl0ZXIoe30udmFsdWVzKCkpKQpkaWN0X2l0ZW1pdGVyYXRvciA9IHR5cGUoaXRlcih7fS5pdGVtcygpKSkKbGlzdF9pdGVyYXRvciA9IHR5cGUoaXRlcihbXSkpCmxpc3RfcmV2ZXJzZWl0ZXJhdG9yID0gdHlwZShpdGVyKHJldmVyc2VkKFtdKSkpCnJhbmdlX2l0ZXJhdG9yID0gdHlwZShpdGVyKHJhbmdlKDApKSkKc2V0X2l0ZXJhdG9yID0gdHlwZShpdGVyKHNldCgpKSkKc3RyX2l0ZXJhdG9yID0gdHlwZShpdGVyKCIiKSkKdHVwbGVfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoKCkpKQp6aXBfaXRlcmF0b3IgPSB0eXBlKGl0ZXIoemlwKCkpKQojIyB2aWV3cyAjIwpkaWN0X2tleXMgPSB0eXBlKHt9LmtleXMoKSkKZGljdF92YWx1ZXMgPSB0eXBlKHt9LnZhbHVlcygpKQpkaWN0X2l0ZW1zID0gdHlwZSh7fS5pdGVtcygpKQojIyBtaXNjICMjCmRpY3RfcHJveHkgPSB0eXBlKHR5cGUuX19kaWN0X18pCiIiIgoKZGVmIGFic3RyYWN0bWV0aG9kKHNlbGYpOgogICAgcmV0dXJuIHNlbGYKCiMjIyBPTkUtVFJJQ0sgUE9OSUVTICMjIwoKCiNjbGFzcyBJdGVyYWJsZShtZXRhY2xhc3M9QUJDTWV0YSk6CmNsYXNzIEl0ZXJhYmxlOgoKICAgIEBhYnN0cmFjdG1ldGhvZAogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHdoaWxlIEZhbHNlOgogICAgICAgICAgICB5aWVsZCBOb25lCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX19zdWJjbGFzc2hvb2tfXyhjbHMsIEMpOgogICAgICAgIGlmIGNscyBpcyBJdGVyYWJsZToKICAgICAgICAgICAgaWYgYW55KCJfX2l0ZXJfXyIgaW4gQi5fX2RpY3RfXyBmb3IgQiBpbiBDLl9fbXJvX18pOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCgojY2xhc3MgU2l6ZWQobWV0YWNsYXNzPUFCQ01ldGEpOgpjbGFzcyBTaXplZDoKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHJldHVybiAwCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX19zdWJjbGFzc2hvb2tfXyhjbHMsIEMpOgogICAgICAgIGlmIGNscyBpcyBTaXplZDoKICAgICAgICAgICAgaWYgYW55KCJfX2xlbl9fIiBpbiBCLl9fZGljdF9fIGZvciBCIGluIEMuX19tcm9fXyk6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKCiNjbGFzcyBDb250YWluZXIobWV0YWNsYXNzPUFCQ01ldGEpOgpjbGFzcyBDb250YWluZXI6CgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIHgpOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIF9fc3ViY2xhc3Nob29rX18oY2xzLCBDKToKICAgICAgICBpZiBjbHMgaXMgQ29udGFpbmVyOgogICAgICAgICAgICBpZiBhbnkoIl9fY29udGFpbnNfXyIgaW4gQi5fX2RpY3RfXyBmb3IgQiBpbiBDLl9fbXJvX18pOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiMjIyBNQVBQSU5HUyAjIyMKCgpjbGFzcyBNYXBwaW5nKFNpemVkLCBJdGVyYWJsZSwgQ29udGFpbmVyKToKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIHJhaXNlIEtleUVycm9yCgogICAgZGVmIGdldChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZltrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICByZXR1cm4gZGVmYXVsdAoKICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwga2V5KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGZba2V5XQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYga2V5cyhzZWxmKToKICAgICAgICByZXR1cm4gS2V5c1ZpZXcoc2VsZikKCiAgICBkZWYgaXRlbXMoc2VsZik6CiAgICAgICAgcmV0dXJuIEl0ZW1zVmlldyhzZWxmKQoKICAgIGRlZiB2YWx1ZXMoc2VsZik6CiAgICAgICAgcmV0dXJuIFZhbHVlc1ZpZXcoc2VsZikKCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgTWFwcGluZyk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJldHVybiBkaWN0KHNlbGYuaXRlbXMoKSkgPT0gZGljdChvdGhlci5pdGVtcygpKQoKICAgIGRlZiBfX25lX18oc2VsZiwgb3RoZXIpOgogICAgICAgIHJldHVybiBub3QgKHNlbGYgPT0gb3RoZXIpCgoKY2xhc3MgTXV0YWJsZU1hcHBpbmcoTWFwcGluZyk6CgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWx1ZSk6CiAgICAgICAgcmFpc2UgS2V5RXJyb3IKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIHJhaXNlIEtleUVycm9yCgogICAgX19tYXJrZXIgPSBvYmplY3QoKQoKICAgIGRlZiBwb3Aoc2VsZiwga2V5LCBkZWZhdWx0PV9fbWFya2VyKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHZhbHVlID0gc2VsZltrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBpZiBkZWZhdWx0IGlzIHNlbGYuX19tYXJrZXI6CiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlbCBzZWxmW2tleV0KICAgICAgICAgICAgcmV0dXJuIHZhbHVlCgogICAgZGVmIHBvcGl0ZW0oc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBrZXkgPSBuZXh0KGl0ZXIoc2VsZikpCiAgICAgICAgZXhjZXB0IFN0b3BJdGVyYXRpb246CiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yCiAgICAgICAgdmFsdWUgPSBzZWxmW2tleV0KICAgICAgICBkZWwgc2VsZltrZXldCiAgICAgICAgcmV0dXJuIGtleSwgdmFsdWUKCiAgICBkZWYgY2xlYXIoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgc2VsZi5wb3BpdGVtKCkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHBhc3MKCiAgICBkZWYgdXBkYXRlKCphcmdzLCAqKmt3ZHMpOgogICAgICAgIGlmIGxlbihhcmdzKSA+IDI6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidXBkYXRlKCkgdGFrZXMgYXQgbW9zdCAyIHBvc2l0aW9uYWwgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyZ3VtZW50cyAoe30gZ2l2ZW4pIi5mb3JtYXQobGVuKGFyZ3MpKSkKICAgICAgICBlbGlmIG5vdCBhcmdzOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInVwZGF0ZSgpIHRha2VzIGF0IGxlYXN0IDEgYXJndW1lbnQgKDAgZ2l2ZW4pIikKICAgICAgICBzZWxmID0gYXJnc1swXQogICAgICAgIG90aGVyID0gYXJnc1sxXSBpZiBsZW4oYXJncykgPj0gMiBlbHNlICgpCgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIE1hcHBpbmcpOgogICAgICAgICAgICBmb3Iga2V5IGluIG90aGVyOgogICAgICAgICAgICAgICAgc2VsZltrZXldID0gb3RoZXJba2V5XQogICAgICAgIGVsaWYgaGFzYXR0cihvdGhlciwgImtleXMiKToKICAgICAgICAgICAgZm9yIGtleSBpbiBvdGhlci5rZXlzKCk6CiAgICAgICAgICAgICAgICBzZWxmW2tleV0gPSBvdGhlcltrZXldCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gb3RoZXI6CiAgICAgICAgICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGt3ZHMuaXRlbXMoKToKICAgICAgICAgICAgc2VsZltrZXldID0gdmFsdWUKCiAgICBkZWYgc2V0ZGVmYXVsdChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZltrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBzZWxmW2tleV0gPSBkZWZhdWx0CiAgICAgICAgcmV0dXJuIGRlZmF1bHQKCiNNdXRhYmxlTWFwcGluZy5yZWdpc3RlcihkaWN0KQo=',
'/Lib/pydom.py':'Y2xhc3MgTm9kZUNvbGxlY3Rpb25TZWxlY3RvcihTZWxlY3Rvcik6CiAgZGVmIF9faW5pdF9fKHNlbGYsIHNlbGVjdG9yLCBjb2xsZWN0aW9uKToKICAgICAgU2VsZWN0b3IuX19pbml0X18oc2VsZiwgc2VsZWN0b3IpCiAgICAgIHNlbGYuX2NvbGxlY3Rpb249Y29sbGVjdGlvbgoKICAgICAgaWYgc2VsZi5fc2VsZWN0b3JfdHlwZSA9PSAnaWQnOgogICAgICAgICBzZWxmLl9tYXRjaD1zZWxmLl9tYXRjaF9pZAogICAgICBlbGlmIHNlbGYuX3NlbGVjdG9yX3R5cGUgPT0ndGFnJzoKICAgICAgICAgc2VsZi5fbWF0Y2g9c2VsZi5fbWF0Y2hfdGFnCiAgICAgIGVsaWYgc2VsZi5fc2VsZWN0b3JfdHlwZSA9PSAnY2xhc3NuYW1lJzoKICAgICAgICAgc2VsZi5fbWF0Y2g9c2VsZi5fbWF0Y2hfY2xhc3NuYW1lCgogIGRlZiBfbWF0Y2hfaWQoc2VsZiwgbm9kZSk6CiAgICAgIGlmIG5vZGUuaWQgaXMgTm9uZTogcmV0dXJuIEZhbHNlCiAgICAgIHJldHVybiBub2RlLmlkID09IHNlbGYuX3NlbGVjdG9yCgogIGRlZiBfbWF0Y2hfdGFnKHNlbGYsIG5vZGUpOgogICAgICByZXR1cm4gbm9kZS50YWdOYW1lID09IHNlbGYuX3NlbGVjdG9yCgogIGRlZiBfbWF0Y2hfY2xhc3NuYW1lKHNlbGYsIG5vZGUpOgogICAgICByZXR1cm4gc2VsZi5fc2VsZWN0b3IgaW4gbm9kZS5jbGFzc25hbWUKCiAgZGVmIGdldChzZWxmKToKICAgICAgX2MxPU5vZGVDb2xsZWN0aW9uKCkKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX2NvbGxlY3Rpb246CiAgICAgICAgICBpZiBzZWxmLl9tYXRjaChfbm9kZSk6CiAgICAgICAgICAgICBfYzEuYXBwZW5kKF9ub2RlKQoKICAgICAgcmV0dXJuIF9jMQoKY2xhc3MgU2VsZWN0b3I6CiAgdGFncz1bJ0EnLCdBQkJSJywnQUNST05ZTScsJ0FERFJFU1MnLCdBUFBMRVQnLCdCJywnQkRPJywnQklHJywnQkxPQ0tRVU9URScsCiAgICAgICAgJ0JVVFRPTicsJ0NBUFRJT04nLCdDRU5URVInLCdDSVRFJywnQ09ERScsJ0RFTCcsJ0RGTicsJ0RJUicsJ0RJVicsJ0RMJywKICAgICAgICAnRU0nLCdGSUVMRFNFVCcsJ0ZPTlQnLCdGT1JNJywnRlJBTUVTRVQnLCdIMScsJ0gyJywnSDMnLCdINCcsJ0g1JywnSDYnLAogICAgICAgICdJJywnSUZSQU1FJywnSU5TJywnS0JEJywnTEFCRUwnLCdMRUdFTkQnLCdNQVAnLCdNRU5VJywnTk9GUkFNRVMnLCAKICAgICAgICAnTk9TQ1JJUFQnLCdPQkpFQ1QnLCdPTCcsJ09QVEdST1VQJywnUFJFJywnUScsJ1MnLCdTQU1QJywnU0NSSVBUJywgCiAgICAgICAgJ1NFTEVDVCcsJ1NNQUxMJywnU1BBTicsJ1NUUklLRScsJ1NUUk9ORycsJ1NUWUxFJywnU1VCJywnU1VQJywnVEFCTEUnLAogICAgICAgICdURVhUQVJFQScsJ1RJVExFJywnVFQnLCdVJywnVUwnLCdWQVInLCdCT0RZJywnQ09MR1JPVVAnLCdERCcsJ0RUJywKICAgICAgICAnSEVBRCcsJ0hUTUwnLCdMSScsJ1AnLCdUQk9EWScsJ09QVElPTicsJ1REJywnVEZPT1QnLCdUSCcsJ1RIRUFEJywnVFInLAogICAgICAgICdBUkVBJywnQkFTRScsJ0JBU0VGT05UJywnQlInLCdDT0wnLCdGUkFNRScsJ0hSJywnSU1HJywnSU5QVVQnLAogICAgICAgICdJU0lOREVYJywnTElOSycsJ01FVEEnLCdQQVJBTScsICAjSFRNTCA1IGVsZW1lbnRzLi4uCiAgICAgICAgJ0FSVElDTEUnLCdBU0lERScsJ0FVRElPJywnQkRJJywnQ0FOVkFTJywnQ09NTUFORCcsJ0RBVEFMSVNUJywKICAgICAgICAnREVUQUlMUycsJ0RJQUxPRycsJ0VNQkVEJywnRklHQ0FQVElPTicsJ0ZJR1VSRScsJ0ZPT1RFUicsJ0hFQURFUicsCiAgICAgICAgJ0tFWUdFTicsJ01BUksnLCdNRVRFUicsJ05BVicsJ09VVFBVVCcsJ1BST0dSRVNTJywnUlAnLCdSVCcsCiAgICAgICAgJ1JVQlknLCdTRUNUSU9OJywnU09VUkNFJywnU1VNTUFSWScsJ1RJTUUnLCdUUkFDSycsJ1ZJREVPJywnV0JSJ10KCiAgZGVmIF9faW5pdF9fKHNlbGYsIHNlbGVjdG9yLCBzdGFydF9ub2RlPWRvYyk6CiAgICAgIHNlbGYuX2RvYz1zdGFydF9ub2RlCgogICAgICBpZiAoaXNpbnN0YW5jZShzZWxlY3Rvciwgc3RyKSk6CiAgICAgICAgIGlmIHNlbGVjdG9yLnN0YXJ0c3dpdGgoIi4iKTogICAjY2xhc3Mgc2VsZWN0b3IKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3I9c2VsZWN0b3JbMTpdCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yX3R5cGU9ImNsYXNzbmFtZSIKICAgICAgICAgZWxpZiBzZWxlY3Rvci5zdGFydHN3aXRoKCIjIik6ICAjaWQgc2VsZWN0b3IKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3I9c2VsZWN0b3JbMTpdCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yX3R5cGU9ImlkIgogICAgICAgICBlbGlmIHNlbGVjdG9yLnVwcGVyKCkgaW4gdGFnczoKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3I9c2VsZWN0b3IudXBwZXIoKQogICAgICAgICAgICBzZWxmLl9zZWxlY3Rvcl90eXBlPSJ0YWciCiAgICAgICAgIGVsc2U6ICAKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3I9c2VsZWN0b3IKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3JfdHlwZT0ic2VsZWN0b3IiCiAgICAgIGVsc2U6ICAjdGhpcyBpcyBhIGZ1bmN0aW9uCiAgICAgICAgIHNlbGYuX3NlbGVjdG9yX3R5cGU9InNlbGVjdG9yIgogICAgICAgICBzZWxmLl9mdW5jdGlvbj1zZWxlY3RvcgogICAgICAgICBzZWxmLmdldD1zZWxmLl9mdW5jdGlvbl9nZXQKCiAgZGVmIF9mdW5jdGlvbl9nZXQoc2VsZik6CiAgICAgIGRlZiByZWN1cnNlKG5vZGUpOgogICAgICAgICAgX2xpc3Q9W10KICAgICAgICAgIGlmIHNlbGYuX2Z1bmN0aW9uKG5vZGUpOgogICAgICAgICAgICAgX2xpc3QuYXBwZW5kKG5vZGUpCgogICAgICAgICAgZm9yIF9ub2RlIGluIG5vZGUuY2hpbGROb2RlczoKICAgICAgICAgICAgICBfbGlzdCs9cmVjdXJzZShfbm9kZSkKCiAgICAgICAgICByZXR1cm4gX2xpc3QKCiAgICAgIF9tYXRjaGVkX25vZGVzPXJlY3Vyc2Uoc2VsZi5fZG9jKQogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oX21hdGNoZWRfbm9kZXMpCgogIGRlZiBnZXQoc2VsZik6CiAgICAgIGlmIHNlbGYuX3NlbGVjdG9yX3R5cGU9PSJpZCI6CiAgICAgICAgIF9tYXRjaGVkX25vZGVzPXNlbGYuX2RvYy5nZXQoaWQ9c2VsZi5fc2VsZWN0b3IpCiAgICAgIGVsaWYgc2VsZi5fc2VsZWN0b3JfdHlwZT09ImNsYXNzbmFtZSI6CiAgICAgICAgIF9tYXRjaGVkX25vZGVzPXNlbGYuX2RvYy5nZXQoY2xhc3NuYW1lPXNlbGYuX3NlbGVjdG9yKQogICAgICBlbGlmIHNlbGYuX3NlbGVjdG9yX3R5cGUgPT0gInRhZyI6CiAgICAgICAgIF9tYXRjaGVkX25vZGVzPXNlbGYuX2RvYy5nZXQodGFnPXNlbGYuX3NlbGVjdG9yKQogICAgICBlbGlmIHNlbGYuX3NlbGVjdG9yX3R5cGU9PSJzZWxlY3RvciI6CiAgICAgICAgIF9tYXRjaGVkX25vZGVzPXNlbGYuX2RvYy5nZXQoc2VsZWN0b3I9c2VsZi5fc2VsZWN0b3IpCiAgICAgIGVsc2U6CiAgICAgICAgIF9tYXRjaGVkX25vZGVzPVtdCiAgICAgIHJldHVybiBOb2RlQ29sbGVjdGlvbihfbWF0Y2hlZF9ub2RlcykKCmNsYXNzIE5vZGVDb2xsZWN0aW9uOgogIGRlZiBfX2luaXRfXyhzZWxmLCBub2Rlcz1bXSk6CiAgICAgIHNlbGYuX25vZGVzPW5vZGVzCgogIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICByZXR1cm4gbGVuKHNlbGYuX25vZGVzKQoKICBkZWYgX19pdGVtX18oc2VsZiwgaSk6CiAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1tpXQoKICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaSk6CiAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1tpXQoKICBkZWYgX19hZGRfXyhzZWxmLCBub2Rlcyk6CiAgICAgIHNlbGYuX25vZGVzKz1ub2RlcwoKICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgX3N0cj1bXQogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfc3RyLmFwcGVuZChfbm9kZS5fX3N0cl9fKCkpCgogICAgICByZXR1cm4gJzxicj4nLmpvaW4oX3N0cikKCiAgZGVmIGFwcGVuZChzZWxmLCBub2RlKTogICAgICAgIAogICAgICBzZWxmLl9ub2Rlcy5hcHBlbmQobm9kZSkKCiAgZGVmIG5leHQoc2VsZik6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIHlpZWxkIF9ub2RlCgogIGRlZiBhZGQoc2VsZiwgc2VsZWN0b3IsIGNvbnRleHQpOgogICAgICBfbnM9Tm9kZUNvbGxlY3Rpb25TZWxlY3RvcihzZWxlY3Rvciwgc2VsZikKICAgICAgc2VsZi5fbm9kZXMrPV9ucy5nZXQoKQoKICBkZWYgYWRkQmFjayhzZWxmKToKICAgICAgcGFzcwoKICBkZWYgYWRkQ2xhc3Moc2VsZiwgY2xhc3NuYW1lKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuYWRkQ2xhc3MoY2xhc3NuYW1lKQoKICBkZWYgYWZ0ZXIoc2VsZiwgY29udGVudCk6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmFmdGVyKGNvbnRlbnQpCgogIGRlZiBhcHBlbmRfY29udGVudChzZWxmLCBjb250ZW50KToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuYXBwZW5kKGNvbnRlbnQpCgogIGRlZiBhcHBlbmRUbyhzZWxmLCBzZWxlY3Rvcik6CiAgICAgIF9zPVNlbGVjdG9yKHNlbGVjdG9yKQoKICAgICAgZm9yIF9ub2RlIGluIF9zLmdldCgpOgogICAgICAgICAgX25vZGUuYXBwZW5kKHNlbGYuX25vZGVbMF0uY2xvbmUoKSkKCiAgZGVmIGF0dHIoc2VsZiwgcHJvcGVydHksIHZhbHVlPU5vbmUpOgogICAgICBpZiB2YWx1ZSBpcyBOb25lOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF1bcHJvcGVydHldCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZVtwcm9wZXJ0eV09dmFsdWUKCiAgZGVmIGJlZm9yZShzZWxmLCBjb250ZW50KToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuYmVmb3JlKGNvbnRlbnQpCgogIGRlZiBiaW5kKHNlbGYsIGV2ZW50LCBoYW5kbGVyKToKICAgICAgaWYgJyAnIGluIGV2ZW50OgogICAgICAgICBfZXZlbnRzPScgJy5zcGxpdChldmVudCkKICAgICAgICAgZm9yIF9ldmVudCBpbiBfZXZlbnRzOgogICAgICAgICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgICAgICAgIF9ub2RlWydvbiVzJyAlIGV2ZW50XT1oYW5kbGVyCiAgICAgICAgIHJldHVybgoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGVbJ29uJXMnICUgZXZlbnRdPWhhbmRsZXIKCiAgZGVmIGJsdXIoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgY2hhbmdlKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGNoaWxkcmVuKHNlbGYsIHNlbGVjdG9yPU5vbmUpOgogICAgICBfYz1Ob2RlQ29sbGVjdGlvbigpCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIGZvciBfY2hpbGQgaW4gX25vZGUuZ2V0X2NoaWxkcmVuKCk6CiAgICAgICAgICAgICAgX2MuYXBwZW5kKF9jaGlsZCkKCiAgICAgIGlmIHNlbGVjdG9yIGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBfYwoKICAgICAgI3NlbGVjdG9yIGlzIG5vdCBOb25lCiAgICAgIF9ucz1Ob2RlQ29sbGVjdGlvblNlbGVjdG9yKHNlbGVjdG9yLCBfYykKICAgICAgcmV0dXJuIF9ucy5nZXQoKQoKICBkZWYgY2xpY2soc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgY2xvbmUoc2VsZik6CiAgICAgIHJldHVybiBOb2RlQ29sbGVjdGlvbihbX25vZGUuY2xvbmUoKSBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXNdKQoKICBkZWYgY2xvc2VzdChzZWxmLCBzZWxlY3Rvcik6CiAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZWN0b3IsIHN0cik6CiAgICAgICAgIF9ucz1TZWxlY3RvcihzZWxlY3RvcikKICAgICAgICAgc2VsZWN0b3I9X25zLmdldCgpCgogICAgICBfYz1Ob2RlQ29sbGVjdGlvbigpCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9jLmFwcGVuZChfbm9kZS5jbG9zZXN0KHNlbGVjdG9yKSkKCiAgICAgIHJldHVybiBfYwoKICBkZWYgY29udGFpbnMoc2VsZiwgdGV4dCk6CiAgICAgIHBhc3MKCiAgZGVmIGNvbnRlbnRzKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBjc3Moc2VsZiwgcHJvcGVydHksIHZhbHVlPU5vbmUpOgogICAgICBpZiB2YWx1ZSBpcyBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShwcm9wZXJ0eSwgZGljdCk6CiAgICAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1swXS5jc3MocHJvcGVydHkpCgogICAgICBpZiBpc2luc3RhbmNlKHByb3BlcnR5LCBkaWN0KToKICAgICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgICAgX25vZGUuY3NzKHByb3BlcnR5KQogICAgICBlbHNlOgogICAgICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICAgICBfbm9kZS5jc3MocHJvcGVydHksIHZhbHVlKQoKICBkZWYgZGF0YShzZWxmKToKICAgICAgcGFzcwoKICBkZWYgZGJsY2xpY2soc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgZGV0YWNoKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBlYWNoKHNlbGYsIGZ1bmMpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBmdW5jKF9ub2RlKQoKICBkZWYgZW1wdHkoc2VsZik6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmVtcHR5KCkKCiAgZGVmIGVxKHNlbGYsIGluZGV4KToKICAgICAgaWYgaW5kZXggPCBsZW4oc2VsZi5fbm9kZXMpOgogICAgICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb25zKHNlbGYuX25vZGVzW2luZGV4XSkKCiAgICAgIHJldHVybiBOb2RlQ29sbGVjdGlvbnMoKQoKICBkZWYgZXJyb3Ioc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgZmFkZUluKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBmYWRlT3V0KHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBmYWRlVG8oc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIGZhZGVUb2dnbGUoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIGZpbHRlcihzZWxmLCBzZWxlY3Rvcik6CiAgICAgIF9ucz1Ob2RlQ29sbGVjdGlvblNlbGVjdG9yKHNlbGVjdG9yLCBzZWxmKQogICAgICByZXR1cm4gX25zLmdldCgpCgogIGRlZiBmaW5kKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBmaXJzdChzZWxmKToKICAgICAgaWYgbGVuKHNlbGYuX25vZGVzKSA9PSAwOgogICAgICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oKQoKICAgICAgcmV0dXJuIE5vZGVDb2xsZWN0aW9uKFtzZWxmLl9ub2Rlc1swXV0pCgogIGRlZiBmb2N1cyhzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBmb2N1c2luKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGZvY3Vzb3V0KHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIGdldChzZWxmLCBpbmRleD1Ob25lKToKICAgICAgaWYgaW5kZXggaXMgTm9uZToKICAgICAgICAgcmV0dXJuIFtfbm9kZSBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXNdCgogICAgICByZXR1cm4gc2VsZi5fbm9kZXNbaW5kZXhdCgogIGRlZiBndChzZWxmLCBpbmRleCk6CiAgICAgIHJldHVybiBOb2RlQ29sbGVjdGlvbihbc2VsZi5fbm9kZXNbaW5kZXg6XV0pCgogIGRlZiBoYXMoc2VsZiwgc2VsZWN0b3IpOgogICAgICBwYXNzCiAgCiAgZGVmIGhhc0NsYXNzKHNlbGYsIG5hbWUpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBpZiBfbm9kZS5oYXNDbGFzcyhuYW1lKToKICAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICByZXR1cm4gRmFsc2UKCiAgZGVmIGhlaWdodChzZWxmLCB2YWx1ZT1Ob25lKToKICAgICAgaWYgdmFsdWUgaXMgTm9uZToKICAgICAgICAgcmV0dXJuIHNlbGYuX25vZGVzWzBdLmNzcygnaGVpZ2h0JykKCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J2hlaWdodCc6IHZhbHVlfSkKCiAgZGVmIGhpZGUoc2VsZik6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J2Rpc3BsYXknOiAnbm9uZSd9KQoKICBkZWYgaG92ZXIoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgaHRtbChzZWxmLCBjb250ZW50PU5vbmUpOgogICAgICBpZiBjb250ZW50IGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1swXS5nZXRfaHRtbCgpCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfaHRtbChjb250ZW50KQoKICBkZWYgaW5uZXJIZWlnaHQoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIGlubmVyV2lkdGgoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIGluc2VydEFmdGVyKHNlbGYsIHRhcmdldCk6CiAgICAgIHBhc3MKCiAgZGVmIGluc2VydEJlZm9yZShzZWxmLCB0YXJnZXQpOgogICAgICBwYXNzCgogICNkZWYgaXMoc2VsZiwgc2VsZWN0b3IpOgogICMgICAgcGFzcwoKICBkZWYga2V5ZG93bihzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBrZXlwcmVzcyhzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBrZXl1cChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBsYXN0KHNlbGYpOgogICAgICByZXR1cm4gc2VsZi5fbm9kZXNbLTFdCgogIEBwcm9wZXJ0eQogIGRlZiBsZW5ndGgoc2VsZik6CiAgICAgIHJldHVybiBsZW4oc2VsZi5fbm9kZXMpCgogIGRlZiBtb3VzZWRvd24oc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbW91c2VlbnRlcihzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBtb3VzZWxlYXZlKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIG1vdXNlbW92ZShzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBtb3VzZW91dChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBtb3VzZW92ZXIoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgbW91c2V1cChzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBuZXh0KHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBuZXh0QWxsKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBuZXh0VXRpbChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgb2ZmKHNlbGYsIGhhbmRsZXIpOgogICAgICBwYXNzCgogIGRlZiBvZmZzZXQoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIG9mZnNldFBhcmVudChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgb24oc2VsZiwgaGFuZGxlcik6CiAgICAgIHBhc3MKCiAgZGVmIG91dGVySGVpZ2h0KHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBvdXRlcldpZHRoKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBwYXJlbnQoc2VsZik6CiAgICAgIF9wPU5vZGVDb2xsZWN0aW9uKCkKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX3AuYXBwZW5kKF9ub2RlLmdldF9wYXJlbnQoKSkKCiAgZGVmIHBhcmVudHMoc2VsZiwgc2VsZWN0b3I9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHBhcmVudHNVbnRpbChzZWxmLCBzZWxlY3Rvcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgcG9zaXRpb24oc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIHByZXBlbmQoc2VsZiwgY29udGVudCk6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLnByZXBlbmQoY29udGVudCkKCiAgZGVmIHByZXBlbmRUbyhzZWxmLCB0YXJnZXQpOgogICAgICBwYXNzCgogIGRlZiBwcmV2KHNlbGYpOgogICAgICBfcDE9Tm9kZUNvbGxlY3Rpb24oKQogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfcGFyZW50PV9ub2RlLmdldF9wYXJlbnQoKQogICAgICAgICAgZm9yIF9pIGluIHJhbmdlKGxlbihfcGFyZW50LmNoaWxkTm9kZXMpKToKICAgICAgICAgICAgICBpZiBfcGFyZW50LmNoaWxkTm9kZXNbX2ldID09IF9ub2RlOgogICAgICAgICAgICAgICAgIGlmIF9pID4gMDoKICAgICAgICAgICAgICAgICAgICBfcDEuYXBwZW5kKF9wYXJlbnQuY2hpbGROb2Rlc1tfaS0xXSkKICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgcmV0dXJuIF9wMQoKICBkZWYgcHJldkFsbChzZWxmLCBzZWxlY3Rvcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgcHJldlVudGlsKHNlbGYsIHNlbGVjdG9yPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBwcm9wKHNlbGYsIHByb3BlcnR5LCB2YWx1ZT1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgcmVhZHkoc2VsZiwgZnVuYyk6CiAgICAgIHBhc3MKCiAgZGVmIHJlbW92ZShzZWxmKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuZ2V0X3BhcmVudCgpLnJlbW92ZUNoaWxkKF9ub2RlKSAKCiAgZGVmIHJlbW92ZUF0dHIoc2VsZiwgYXR0cik6CiAgICAgIHBhc3MKCiAgZGVmIHJlbW92ZUNsYXNzKHNlbGYsIG5hbWUpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5yZW1vdmVDbGFzcyhuYW1lKQoKICBkZWYgcmVtb3ZlUHJvcChzZWxmLCBwcm9wZXJ0eSk6CiAgICAgIHBhc3MKCiAgZGVmIHJlcGxhY2VBbGwoc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIHJlcGxhY2VXaXRoKHNlbGYsIGNvbnRlbnQpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5nZXRfcGFyZW50KCkucmVwbGFjZVdpdGgoY29udGVudCwgX25vZGUpCgogIGRlZiByZXNpemUoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgc2Nyb2xsKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHNjcm9sbExlZnQoc2VsZiwgdmFsdWU9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHNjcm9sbFRvcChzZWxmLCB2YWx1ZT1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgc2VsZWN0KHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHNob3coc2VsZik6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J2Rpc3BsYXknOiAnYmxvY2snfSkKCiAgZGVmIHNpYmxpbmdzKHNlbGYsIHNlbGVjdG9yPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiBzaXplKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBzbGljZShzZWxmLCBpbmRleDE9Tm9uZSwgaW5kZXgyPU5vbmUpOgogICAgICBpZiBpbmRleDEgaXMgTm9uZSBhbmQgaW5kZXgyIGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBOb2RlQ29sbGVjdGlvbigpCgogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oc2VsZi5fbm9kZXNbaW5kZXgxOmluZGV4Ml0pCgogIGRlZiBzbGlkZURvd24oc2VsZik6CiAgICAgIHBhc3MKCiAgZGVmIHNsaWRlVG9nZ2xlKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBzbGlkZVVwKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiBzdWJtaXQoc2VsZiwgaGFuZGxlcj1Ob25lKToKICAgICAgcGFzcwoKICBkZWYgdGV4dChzZWxmLCBjb250ZW50PU5vbmUpOgogICAgICBpZiBjb250ZW50IGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1swXS5nZXRfdGV4dCgpCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfdGV4dChjb250ZW50KSAKCiAgZGVmIHRvZ2dsZShzZWxmLCBGdW5jdGlvbj1Ob25lKToKICAgICAgaWYgRnVuY3Rpb24gaXMgTm9uZToKICAgICAgICAgX3Nob3c9VHJ1ZQogICAgICAgICBpZiBzZWxmLl9ub2Rlc1swXS5jc3MoJ2Rpc3BsYXknKSAhPSAnbm9uZSc6CiAgICAgICAgICAgIF9zaG93PUZhbHNlCiAgICAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgICAgIGlmIF9zaG93OgogICAgICAgICAgICAgICAgX25vZGUuc2V0X3N0eWxlKHsnZGlzcGxheSc6ICdibG9jayd9KQogICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J2Rpc3BsYXknOiAnbm9uZSd9KQogIAogICAgICAgICAgICAgX3Nob3c9bm90IF9zaG93CgogICAgICAgICByZXR1cm4KCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIGlmIEZ1bmN0aW9uKF9ub2RlKToKICAgICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J2Rpc3BsYXknOiAnYmxvY2snfSkKICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ25vbmUnfSkKCiAgZGVmIHRvZ2dsZUNsYXNzKHNlbGYpOgogICAgICBwYXNzCgogIGRlZiB0b0xpc3Qoc2VsZik6CiAgICAgIHJldHVybiBzZWxmLl9ub2RlcwoKICB0b0FycmF5PXRvTGlzdCAgICNmb3IgalF1ZXJ5IGNvbXBhdGliaWxpdHkKCiAgZGVmIHRvdWNoZW5kKHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHRvdWNobW92ZShzZWxmLCBoYW5kbGVyPU5vbmUpOgogICAgICBwYXNzCgogIGRlZiB0b3VjaHN0YXJ0KHNlbGYsIGhhbmRsZXI9Tm9uZSk6CiAgICAgIHBhc3MKCiAgZGVmIHRyaWdnZXIoc2VsZiwgZXZlbnRfdHlwZSk6CiAgICAgIHBhc3MKCiAgZGVmIHRyaWdnZXJIYW5kbGVyKHNlbGYsIGV2ZW50X3R5cGUpOgogICAgICBwYXNzCgoKICBkZWYgdW5iaW5kKHNlbGYsIGV2ZW50LCBoYW5kbGVyKToKICAgICAgaWYgJyAnIGluIGV2ZW50OgogICAgICAgICBfZXZlbnRzPScgJy5zcGxpdChldmVudCkKICAgICAgICAgZm9yIF9ldmVudCBpbiBfZXZlbnRzOgogICAgICAgICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgICAgICAgIHByaW50KCJmaXggbWUhIikKICAgICAgICAgcmV0dXJuCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICAjbG9vayBpbnRvIGhvdyB0byBkZXRhY2ggYW4gZXZlbnQKICAgICAgICAgIHByaW50KCJmaXggbWUiKQoKCiAgZGVmIHVubG9hZChzZWxmLCBoYW5kbGVyKToKICAgICAgcGFzcwoKICBkZWYgdW53cmFwKHNlbGYpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfcGFyZW50PV9ub2RlLmdldF9wYXJlbnQoKQogICAgICAgICAgX2dyYW5kcGFyZW50PV9wYXJlbnQuZ2V0X3BhcmVudCgpCiAgICAgICAgICBfZ3JhbmRwYXJlbnQucmVwbGFjZUNoaWxkKF9ub2RlLCBfcGFyZW50KQoKICAgICAgICAgIF9wYXJlbnQucmVtb3ZlKCkKCiAgZGVmIHZhbChzZWxmLCB2YWx1ZT1Ob25lKToKICAgICAgaWYgdmFsdWUgaXMgTm9uZToKICAgICAgICAgcmV0dXJuIHNlbGYuX25vZGVzWzBdWyd0ZXh0J10gICAjaXMgdGV4dCB0aGUgYmVzdCBoZXJlPwoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGVbJ3RleHQnXT12YWx1ZQoKICBkZWYgd2lkdGgoc2VsZiwgd2lkdGg9Tm9uZSk6CiAgICAgIGlmIHdpZHRoIGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1swXS5jc3MoJ3dpZHRoJykKCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J3dpZHRoJzogd2lkdGh9KQoKICBkZWYgd3JhcChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgd3JhcEFsbChzZWxmKToKICAgICAgcGFzcwoKICBkZWYgd3JhcElubmVyKHNlbGYpOgogICAgICBwYXNzCgpkZWYgYnlJZChpZCk6CiAgICBfcmVzdWx0PWRvYy5nZXQoaWQ9aWQpCiAgICByZXR1cm4gX3Jlc3VsdFswXQoKZGVmIGNyZWF0ZUNTU0NsYXNzKGNzc3RleHQpOgogICAgX3N0eWxlPWRvYy5jcmVhdGVFbGVtZW50KCdzdHlsZScpCiAgICBfc3R5bGUudHlwZT0ndGV4dC9jc3MnCiAgICBfc3R5bGUuaW5uZXJIVE1MID0gY3NzdGV4dAogICAgZG9jLmdldCh0YWc9J2hlYWQnKVswXS5hcHBlbmRDaGlsZChfc3R5bGUpCg==',
'/Lib/keyword.py':'a3dsaXN0ID0gWwojLS1zdGFydCBrZXl3b3Jkcy0tCiAgICAgICAgJ0ZhbHNlJywKICAgICAgICAnTm9uZScsCiAgICAgICAgJ1RydWUnLAogICAgICAgICdhbmQnLAogICAgICAgICdhcycsCiAgICAgICAgJ2Fzc2VydCcsCiAgICAgICAgJ2JyZWFrJywKICAgICAgICAnY2xhc3MnLAogICAgICAgICdjb250aW51ZScsCiAgICAgICAgJ2RlZicsCiAgICAgICAgJ2RlbCcsCiAgICAgICAgJ2VsaWYnLAogICAgICAgICdlbHNlJywKICAgICAgICAnZXhjZXB0JywKICAgICAgICAnZmluYWxseScsCiAgICAgICAgJ2ZvcicsCiAgICAgICAgJ2Zyb20nLAogICAgICAgICdnbG9iYWwnLAogICAgICAgICdpZicsCiAgICAgICAgJ2ltcG9ydCcsCiAgICAgICAgJ2luJywKICAgICAgICAnaXMnLAogICAgICAgICdsYW1iZGEnLAogICAgICAgICdub25sb2NhbCcsCiAgICAgICAgJ25vdCcsCiAgICAgICAgJ29yJywKICAgICAgICAncGFzcycsCiAgICAgICAgJ3JhaXNlJywKICAgICAgICAncmV0dXJuJywKICAgICAgICAndHJ5JywKICAgICAgICAnd2hpbGUnLAogICAgICAgICd3aXRoJywKICAgICAgICAneWllbGQnLAojLS1lbmQga2V5d29yZHMtLQogICAgICAgIF0KCmRlZiBpc2tleXdvcmQod29yZCk6CiAgICByZXR1cm4gd29yZCBpbiBrd2xpc3QK',
'/Lib/stat.py':'IiIiQ29uc3RhbnRzL2Z1bmN0aW9ucyBmb3IgaW50ZXJwcmV0aW5nIHJlc3VsdHMgb2Ygb3Muc3RhdCgpIGFuZCBvcy5sc3RhdCgpLg0KDQpTdWdnZXN0ZWQgdXNhZ2U6IGZyb20gc3RhdCBpbXBvcnQgKg0KIiIiDQoNCiMgSW5kaWNlcyBmb3Igc3RhdCBzdHJ1Y3QgbWVtYmVycyBpbiB0aGUgdHVwbGUgcmV0dXJuZWQgYnkgb3Muc3RhdCgpDQoNClNUX01PREUgID0gMA0KU1RfSU5PICAgPSAxDQpTVF9ERVYgICA9IDINClNUX05MSU5LID0gMw0KU1RfVUlEICAgPSA0DQpTVF9HSUQgICA9IDUNClNUX1NJWkUgID0gNg0KU1RfQVRJTUUgPSA3DQpTVF9NVElNRSA9IDgNClNUX0NUSU1FID0gOQ0KDQojIEV4dHJhY3QgYml0cyBmcm9tIHRoZSBtb2RlDQoNCmRlZiBTX0lNT0RFKG1vZGUpOg0KICAgICIiIlJldHVybiB0aGUgcG9ydGlvbiBvZiB0aGUgZmlsZSdzIG1vZGUgdGhhdCBjYW4gYmUgc2V0IGJ5DQogICAgb3MuY2htb2QoKS4NCiAgICAiIiINCiAgICByZXR1cm4gbW9kZSAmIDBvNzc3Nw0KDQpkZWYgU19JRk1UKG1vZGUpOg0KICAgICIiIlJldHVybiB0aGUgcG9ydGlvbiBvZiB0aGUgZmlsZSdzIG1vZGUgdGhhdCBkZXNjcmliZXMgdGhlDQogICAgZmlsZSB0eXBlLg0KICAgICIiIg0KICAgIHJldHVybiBtb2RlICYgMG8xNzAwMDANCg0KIyBDb25zdGFudHMgdXNlZCBhcyBTX0lGTVQoKSBmb3IgdmFyaW91cyBmaWxlIHR5cGVzDQojIChub3QgYWxsIGFyZSBpbXBsZW1lbnRlZCBvbiBhbGwgc3lzdGVtcykNCg0KU19JRkRJUiAgPSAwbzA0MDAwMCAgIyBkaXJlY3RvcnkNClNfSUZDSFIgID0gMG8wMjAwMDAgICMgY2hhcmFjdGVyIGRldmljZQ0KU19JRkJMSyAgPSAwbzA2MDAwMCAgIyBibG9jayBkZXZpY2UNClNfSUZSRUcgID0gMG8xMDAwMDAgICMgcmVndWxhciBmaWxlDQpTX0lGSUZPICA9IDBvMDEwMDAwICAjIGZpZm8gKG5hbWVkIHBpcGUpDQpTX0lGTE5LICA9IDBvMTIwMDAwICAjIHN5bWJvbGljIGxpbmsNClNfSUZTT0NLID0gMG8xNDAwMDAgICMgc29ja2V0IGZpbGUNCg0KIyBGdW5jdGlvbnMgdG8gdGVzdCBmb3IgZWFjaCBmaWxlIHR5cGUNCg0KZGVmIFNfSVNESVIobW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgZGlyZWN0b3J5LiIiIg0KICAgIHJldHVybiBTX0lGTVQobW9kZSkgPT0gU19JRkRJUg0KDQpkZWYgU19JU0NIUihtb2RlKToNCiAgICAiIiJSZXR1cm4gVHJ1ZSBpZiBtb2RlIGlzIGZyb20gYSBjaGFyYWN0ZXIgc3BlY2lhbCBkZXZpY2UgZmlsZS4iIiINCiAgICByZXR1cm4gU19JRk1UKG1vZGUpID09IFNfSUZDSFINCg0KZGVmIFNfSVNCTEsobW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgYmxvY2sgc3BlY2lhbCBkZXZpY2UgZmlsZS4iIiINCiAgICByZXR1cm4gU19JRk1UKG1vZGUpID09IFNfSUZCTEsNCg0KZGVmIFNfSVNSRUcobW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgcmVndWxhciBmaWxlLiIiIg0KICAgIHJldHVybiBTX0lGTVQobW9kZSkgPT0gU19JRlJFRw0KDQpkZWYgU19JU0ZJRk8obW9kZSk6DQogICAgIiIiUmV0dXJuIFRydWUgaWYgbW9kZSBpcyBmcm9tIGEgRklGTyAobmFtZWQgcGlwZSkuIiIiDQogICAgcmV0dXJuIFNfSUZNVChtb2RlKSA9PSBTX0lGSUZPDQoNCmRlZiBTX0lTTE5LKG1vZGUpOg0KICAgICIiIlJldHVybiBUcnVlIGlmIG1vZGUgaXMgZnJvbSBhIHN5bWJvbGljIGxpbmsuIiIiDQogICAgcmV0dXJuIFNfSUZNVChtb2RlKSA9PSBTX0lGTE5LDQoNCmRlZiBTX0lTU09DSyhtb2RlKToNCiAgICAiIiJSZXR1cm4gVHJ1ZSBpZiBtb2RlIGlzIGZyb20gYSBzb2NrZXQuIiIiDQogICAgcmV0dXJuIFNfSUZNVChtb2RlKSA9PSBTX0lGU09DSw0KDQojIE5hbWVzIGZvciBwZXJtaXNzaW9uIGJpdHMNCg0KU19JU1VJRCA9IDBvNDAwMCAgIyBzZXQgVUlEIGJpdA0KU19JU0dJRCA9IDBvMjAwMCAgIyBzZXQgR0lEIGJpdA0KU19FTkZNVCA9IFNfSVNHSUQgIyBmaWxlIGxvY2tpbmcgZW5mb3JjZW1lbnQNClNfSVNWVFggPSAwbzEwMDAgICMgc3RpY2t5IGJpdA0KU19JUkVBRCA9IDBvMDQwMCAgIyBVbml4IFY3IHN5bm9ueW0gZm9yIFNfSVJVU1INClNfSVdSSVRFID0gMG8wMjAwICMgVW5peCBWNyBzeW5vbnltIGZvciBTX0lXVVNSDQpTX0lFWEVDID0gMG8wMTAwICAjIFVuaXggVjcgc3lub255bSBmb3IgU19JWFVTUg0KU19JUldYVSA9IDBvMDcwMCAgIyBtYXNrIGZvciBvd25lciBwZXJtaXNzaW9ucw0KU19JUlVTUiA9IDBvMDQwMCAgIyByZWFkIGJ5IG93bmVyDQpTX0lXVVNSID0gMG8wMjAwICAjIHdyaXRlIGJ5IG93bmVyDQpTX0lYVVNSID0gMG8wMTAwICAjIGV4ZWN1dGUgYnkgb3duZXINClNfSVJXWEcgPSAwbzAwNzAgICMgbWFzayBmb3IgZ3JvdXAgcGVybWlzc2lvbnMNClNfSVJHUlAgPSAwbzAwNDAgICMgcmVhZCBieSBncm91cA0KU19JV0dSUCA9IDBvMDAyMCAgIyB3cml0ZSBieSBncm91cA0KU19JWEdSUCA9IDBvMDAxMCAgIyBleGVjdXRlIGJ5IGdyb3VwDQpTX0lSV1hPID0gMG8wMDA3ICAjIG1hc2sgZm9yIG90aGVycyAobm90IGluIGdyb3VwKSBwZXJtaXNzaW9ucw0KU19JUk9USCA9IDBvMDAwNCAgIyByZWFkIGJ5IG90aGVycw0KU19JV09USCA9IDBvMDAwMiAgIyB3cml0ZSBieSBvdGhlcnMNClNfSVhPVEggPSAwbzAwMDEgICMgZXhlY3V0ZSBieSBvdGhlcnMNCg0KIyBOYW1lcyBmb3IgZmlsZSBmbGFncw0KDQpVRl9OT0RVTVAgICAgPSAweDAwMDAwMDAxICAjIGRvIG5vdCBkdW1wIGZpbGUNClVGX0lNTVVUQUJMRSA9IDB4MDAwMDAwMDIgICMgZmlsZSBtYXkgbm90IGJlIGNoYW5nZWQNClVGX0FQUEVORCAgICA9IDB4MDAwMDAwMDQgICMgZmlsZSBtYXkgb25seSBiZSBhcHBlbmRlZCB0bw0KVUZfT1BBUVVFICAgID0gMHgwMDAwMDAwOCAgIyBkaXJlY3RvcnkgaXMgb3BhcXVlIHdoZW4gdmlld2VkIHRocm91Z2ggYSB1bmlvbiBzdGFjaw0KVUZfTk9VTkxJTksgID0gMHgwMDAwMDAxMCAgIyBmaWxlIG1heSBub3QgYmUgcmVuYW1lZCBvciBkZWxldGVkDQpVRl9DT01QUkVTU0VEID0gMHgwMDAwMDAyMCAjIE9TIFg6IGZpbGUgaXMgaGZzLWNvbXByZXNzZWQNClVGX0hJRERFTiAgICA9IDB4MDAwMDgwMDAgICMgT1MgWDogZmlsZSBzaG91bGQgbm90IGJlIGRpc3BsYXllZA0KU0ZfQVJDSElWRUQgID0gMHgwMDAxMDAwMCAgIyBmaWxlIG1heSBiZSBhcmNoaXZlZA0KU0ZfSU1NVVRBQkxFID0gMHgwMDAyMDAwMCAgIyBmaWxlIG1heSBub3QgYmUgY2hhbmdlZA0KU0ZfQVBQRU5EICAgID0gMHgwMDA0MDAwMCAgIyBmaWxlIG1heSBvbmx5IGJlIGFwcGVuZGVkIHRvDQpTRl9OT1VOTElOSyAgPSAweDAwMTAwMDAwICAjIGZpbGUgbWF5IG5vdCBiZSByZW5hbWVkIG9yIGRlbGV0ZWQNClNGX1NOQVBTSE9UICA9IDB4MDAyMDAwMDAgICMgZmlsZSBpcyBhIHNuYXBzaG90IGZpbGUNCg0KDQpfZmlsZW1vZGVfdGFibGUgPSAoDQogICAgKChTX0lGTE5LLCAgICAgICAgICJsIiksDQogICAgIChTX0lGUkVHLCAgICAgICAgICItIiksDQogICAgIChTX0lGQkxLLCAgICAgICAgICJiIiksDQogICAgIChTX0lGRElSLCAgICAgICAgICJkIiksDQogICAgIChTX0lGQ0hSLCAgICAgICAgICJjIiksDQogICAgIChTX0lGSUZPLCAgICAgICAgICJwIikpLA0KDQogICAgKChTX0lSVVNSLCAgICAgICAgICJyIiksKSwNCiAgICAoKFNfSVdVU1IsICAgICAgICAgInciKSwpLA0KICAgICgoU19JWFVTUnxTX0lTVUlELCAicyIpLA0KICAgICAoU19JU1VJRCwgICAgICAgICAiUyIpLA0KICAgICAoU19JWFVTUiwgICAgICAgICAieCIpKSwNCg0KICAgICgoU19JUkdSUCwgICAgICAgICAiciIpLCksDQogICAgKChTX0lXR1JQLCAgICAgICAgICJ3IiksKSwNCiAgICAoKFNfSVhHUlB8U19JU0dJRCwgInMiKSwNCiAgICAgKFNfSVNHSUQsICAgICAgICAgIlMiKSwNCiAgICAgKFNfSVhHUlAsICAgICAgICAgIngiKSksDQoNCiAgICAoKFNfSVJPVEgsICAgICAgICAgInIiKSwpLA0KICAgICgoU19JV09USCwgICAgICAgICAidyIpLCksDQogICAgKChTX0lYT1RIfFNfSVNWVFgsICJ0IiksDQogICAgIChTX0lTVlRYLCAgICAgICAgICJUIiksDQogICAgIChTX0lYT1RILCAgICAgICAgICJ4IikpDQopDQoNCmRlZiBmaWxlbW9kZShtb2RlKToNCiAgICAiIiJDb252ZXJ0IGEgZmlsZSdzIG1vZGUgdG8gYSBzdHJpbmcgb2YgdGhlIGZvcm0gJy1yd3hyd3hyd3gnLiIiIg0KICAgIHBlcm0gPSBbXQ0KICAgIGZvciB0YWJsZSBpbiBfZmlsZW1vZGVfdGFibGU6DQogICAgICAgIGZvciBiaXQsIGNoYXIgaW4gdGFibGU6DQogICAgICAgICAgICBpZiBtb2RlICYgYml0ID09IGJpdDoNCiAgICAgICAgICAgICAgICBwZXJtLmFwcGVuZChjaGFyKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwZXJtLmFwcGVuZCgiLSIpDQogICAgcmV0dXJuICIiLmpvaW4ocGVybSkNCg==',
'/Lib/_dummy_thread.py':'IiIiRHJvcC1pbiByZXBsYWNlbWVudCBmb3IgdGhlIHRocmVhZCBtb2R1bGUuCgpNZWFudCB0byBiZSB1c2VkIGFzIGEgYnJhaW4tZGVhZCBzdWJzdGl0dXRlIHNvIHRoYXQgdGhyZWFkZWQgY29kZSBkb2VzCm5vdCBuZWVkIHRvIGJlIHJld3JpdHRlbiBmb3Igd2hlbiB0aGUgdGhyZWFkIG1vZHVsZSBpcyBub3QgcHJlc2VudC4KClN1Z2dlc3RlZCB1c2FnZSBpczo6CgogICAgdHJ5OgogICAgICAgIGltcG9ydCBfdGhyZWFkCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgaW1wb3J0IF9kdW1teV90aHJlYWQgYXMgX3RocmVhZAoKIiIiCiMgRXhwb3J0cyBvbmx5IHRoaW5ncyBzcGVjaWZpZWQgYnkgdGhyZWFkIGRvY3VtZW50YXRpb247CiMgc2tpcHBpbmcgb2Jzb2xldGUgc3lub255bXMgYWxsb2NhdGUoKSwgc3RhcnRfbmV3KCksIGV4aXRfdGhyZWFkKCkuCl9fYWxsX18gPSBbJ2Vycm9yJywgJ3N0YXJ0X25ld190aHJlYWQnLCAnZXhpdCcsICdnZXRfaWRlbnQnLCAnYWxsb2NhdGVfbG9jaycsCiAgICAgICAgICAgJ2ludGVycnVwdF9tYWluJywgJ0xvY2tUeXBlJ10KCiMgQSBkdW1teSB2YWx1ZQpUSU1FT1VUX01BWCA9IDIqKjMxCgojIE5PVEU6IHRoaXMgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBlYXJseSBpbiB0aGUgZXh0ZW5zaW9uIGJ1aWxkaW5nIHByb2Nlc3MsCiMgYW5kIHNvIHRvcCBsZXZlbCBpbXBvcnRzIG9mIG90aGVyIG1vZHVsZXMgc2hvdWxkIGJlIGF2b2lkZWQuICBJbnN0ZWFkLCBhbGwKIyBpbXBvcnRzIGFyZSBkb25lIHdoZW4gbmVlZGVkIG9uIGEgZnVuY3Rpb24tYnktZnVuY3Rpb24gYmFzaXMuICBTaW5jZSB0aHJlYWRzCiMgYXJlIGRpc2FibGVkLCB0aGUgaW1wb3J0IGxvY2sgc2hvdWxkIG5vdCBiZSBhbiBpc3N1ZSBhbnl3YXkgKD8/KS4KCmVycm9yID0gUnVudGltZUVycm9yCgpkZWYgc3RhcnRfbmV3X3RocmVhZChmdW5jdGlvbiwgYXJncywga3dhcmdzPXt9KToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuc3RhcnRfbmV3X3RocmVhZCgpLgoKICAgIENvbXBhdGliaWxpdHkgaXMgbWFpbnRhaW5lZCBieSBtYWtpbmcgc3VyZSB0aGF0IGBgYXJnc2BgIGlzIGEKICAgIHR1cGxlIGFuZCBgYGt3YXJnc2BgIGlzIGEgZGljdGlvbmFyeS4gIElmIGFuIGV4Y2VwdGlvbiBpcyByYWlzZWQKICAgIGFuZCBpdCBpcyBTeXN0ZW1FeGl0ICh3aGljaCBjYW4gYmUgZG9uZSBieSBfdGhyZWFkLmV4aXQoKSkgaXQgaXMKICAgIGNhdWdodCBhbmQgbm90aGluZyBpcyBkb25lOyBhbGwgb3RoZXIgZXhjZXB0aW9ucyBhcmUgcHJpbnRlZCBvdXQKICAgIGJ5IHVzaW5nIHRyYWNlYmFjay5wcmludF9leGMoKS4KCiAgICBJZiB0aGUgZXhlY3V0ZWQgZnVuY3Rpb24gY2FsbHMgaW50ZXJydXB0X21haW4gdGhlIEtleWJvYXJkSW50ZXJydXB0IHdpbGwgYmUKICAgIHJhaXNlZCB3aGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zLgoKICAgICIiIgogICAgaWYgdHlwZShhcmdzKSAhPSB0eXBlKHR1cGxlKCkpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiMm5kIGFyZyBtdXN0IGJlIGEgdHVwbGUiKQogICAgaWYgdHlwZShrd2FyZ3MpICE9IHR5cGUoZGljdCgpKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoIjNyZCBhcmcgbXVzdCBiZSBhIGRpY3QiKQogICAgZ2xvYmFsIF9tYWluCiAgICBfbWFpbiA9IEZhbHNlCiAgICB0cnk6CiAgICAgICAgZnVuY3Rpb24oKmFyZ3MsICoqa3dhcmdzKQogICAgZXhjZXB0IFN5c3RlbUV4aXQ6CiAgICAgICAgcGFzcwogICAgZXhjZXB0OgogICAgICAgIGltcG9ydCB0cmFjZWJhY2sKICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkKICAgIF9tYWluID0gVHJ1ZQogICAgZ2xvYmFsIF9pbnRlcnJ1cHQKICAgIGlmIF9pbnRlcnJ1cHQ6CiAgICAgICAgX2ludGVycnVwdCA9IEZhbHNlCiAgICAgICAgcmFpc2UgS2V5Ym9hcmRJbnRlcnJ1cHQKCmRlZiBleGl0KCk6CiAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLmV4aXQoKS4iIiIKICAgIHJhaXNlIFN5c3RlbUV4aXQKCmRlZiBnZXRfaWRlbnQoKToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuZ2V0X2lkZW50KCkuCgogICAgU2luY2UgdGhpcyBtb2R1bGUgc2hvdWxkIG9ubHkgYmUgdXNlZCB3aGVuIF90aHJlYWRtb2R1bGUgaXMgbm90CiAgICBhdmFpbGFibGUsIGl0IGlzIHNhZmUgdG8gYXNzdW1lIHRoYXQgdGhlIGN1cnJlbnQgcHJvY2VzcyBpcyB0aGUKICAgIG9ubHkgdGhyZWFkLiAgVGh1cyBhIGNvbnN0YW50IGNhbiBiZSBzYWZlbHkgcmV0dXJuZWQuCiAgICAiIiIKICAgIHJldHVybiAtMQoKZGVmIGFsbG9jYXRlX2xvY2soKToKICAgICIiIkR1bW15IGltcGxlbWVudGF0aW9uIG9mIF90aHJlYWQuYWxsb2NhdGVfbG9jaygpLiIiIgogICAgcmV0dXJuIExvY2tUeXBlKCkKCmRlZiBzdGFja19zaXplKHNpemU9Tm9uZSk6CiAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLnN0YWNrX3NpemUoKS4iIiIKICAgIGlmIHNpemUgaXMgbm90IE5vbmU6CiAgICAgICAgcmFpc2UgZXJyb3IoInNldHRpbmcgdGhyZWFkIHN0YWNrIHNpemUgbm90IHN1cHBvcnRlZCIpCiAgICByZXR1cm4gMAoKY2xhc3MgTG9ja1R5cGUob2JqZWN0KToKICAgICIiIkNsYXNzIGltcGxlbWVudGluZyBkdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBfdGhyZWFkLkxvY2tUeXBlLgoKICAgIENvbXBhdGliaWxpdHkgaXMgbWFpbnRhaW5lZCBieSBtYWludGFpbmluZyBzZWxmLmxvY2tlZF9zdGF0dXMKICAgIHdoaWNoIGlzIGEgYm9vbGVhbiB0aGF0IHN0b3JlcyB0aGUgc3RhdGUgb2YgdGhlIGxvY2suICBQaWNrbGluZyBvZgogICAgdGhlIGxvY2ssIHRob3VnaCwgc2hvdWxkIG5vdCBiZSBkb25lIHNpbmNlIGlmIHRoZSBfdGhyZWFkIG1vZHVsZSBpcwogICAgdGhlbiB1c2VkIHdpdGggYW4gdW5waWNrbGVkIGBgbG9jaygpYGAgZnJvbSBoZXJlIHByb2JsZW1zIGNvdWxkCiAgICBvY2N1ciBmcm9tIHRoaXMgY2xhc3Mgbm90IGhhdmluZyBhdG9taWMgbWV0aG9kcy4KCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5sb2NrZWRfc3RhdHVzID0gRmFsc2UKCiAgICBkZWYgYWNxdWlyZShzZWxmLCB3YWl0ZmxhZz1Ob25lLCB0aW1lb3V0PS0xKToKICAgICAgICAiIiJEdW1teSBpbXBsZW1lbnRhdGlvbiBvZiBhY3F1aXJlKCkuCgogICAgICAgIEZvciBibG9ja2luZyBjYWxscywgc2VsZi5sb2NrZWRfc3RhdHVzIGlzIGF1dG9tYXRpY2FsbHkgc2V0IHRvCiAgICAgICAgVHJ1ZSBhbmQgcmV0dXJuZWQgYXBwcm9wcmlhdGVseSBiYXNlZCBvbiB2YWx1ZSBvZgogICAgICAgIGBgd2FpdGZsYWdgYC4gIElmIGl0IGlzIG5vbi1ibG9ja2luZywgdGhlbiB0aGUgdmFsdWUgaXMKICAgICAgICBhY3R1YWxseSBjaGVja2VkIGFuZCBub3Qgc2V0IGlmIGl0IGlzIGFscmVhZHkgYWNxdWlyZWQuICBUaGlzCiAgICAgICAgaXMgYWxsIGRvbmUgc28gdGhhdCB0aHJlYWRpbmcuQ29uZGl0aW9uJ3MgYXNzZXJ0IHN0YXRlbWVudHMKICAgICAgICBhcmVuJ3QgdHJpZ2dlcmVkIGFuZCB0aHJvdyBhIGxpdHRsZSBmaXQuCgogICAgICAgICIiIgogICAgICAgIGlmIHdhaXRmbGFnIGlzIE5vbmUgb3Igd2FpdGZsYWc6CiAgICAgICAgICAgIHNlbGYubG9ja2VkX3N0YXR1cyA9IFRydWUKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5sb2NrZWRfc3RhdHVzOgogICAgICAgICAgICAgICAgc2VsZi5sb2NrZWRfc3RhdHVzID0gVHJ1ZQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIHRpbWVvdXQgPiAwOgogICAgICAgICAgICAgICAgICAgIGltcG9ydCB0aW1lCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCh0aW1lb3V0KQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgX19lbnRlcl9fID0gYWNxdWlyZQoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCB0eXAsIHZhbCwgdGIpOgogICAgICAgIHNlbGYucmVsZWFzZSgpCgogICAgZGVmIHJlbGVhc2Uoc2VsZik6CiAgICAgICAgIiIiUmVsZWFzZSB0aGUgZHVtbXkgbG9jay4iIiIKICAgICAgICAjIFhYWCBQZXJoYXBzIHNob3VsZG4ndCBhY3R1YWxseSBib3RoZXIgdG8gdGVzdD8gIENvdWxkIGxlYWQKICAgICAgICAjICAgICB0byBwcm9ibGVtcyBmb3IgY29tcGxleCwgdGhyZWFkZWQgY29kZS4KICAgICAgICBpZiBub3Qgc2VsZi5sb2NrZWRfc3RhdHVzOgogICAgICAgICAgICByYWlzZSBlcnJvcgogICAgICAgIHNlbGYubG9ja2VkX3N0YXR1cyA9IEZhbHNlCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgbG9ja2VkKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmxvY2tlZF9zdGF0dXMKCiMgVXNlZCB0byBzaWduYWwgdGhhdCBpbnRlcnJ1cHRfbWFpbiB3YXMgY2FsbGVkIGluIGEgInRocmVhZCIKX2ludGVycnVwdCA9IEZhbHNlCiMgVHJ1ZSB3aGVuIG5vdCBleGVjdXRpbmcgaW4gYSAidGhyZWFkIgpfbWFpbiA9IFRydWUKCmRlZiBpbnRlcnJ1cHRfbWFpbigpOgogICAgIiIiU2V0IF9pbnRlcnJ1cHQgZmxhZyB0byBUcnVlIHRvIGhhdmUgc3RhcnRfbmV3X3RocmVhZCByYWlzZQogICAgS2V5Ym9hcmRJbnRlcnJ1cHQgdXBvbiBleGl0aW5nLiIiIgogICAgaWYgX21haW46CiAgICAgICAgcmFpc2UgS2V5Ym9hcmRJbnRlcnJ1cHQKICAgIGVsc2U6CiAgICAgICAgZ2xvYmFsIF9pbnRlcnJ1cHQKICAgICAgICBfaW50ZXJydXB0ID0gVHJ1ZQo=',
'/Lib/operator.py':'IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMw0KIiIiDQpPcGVyYXRvciBJbnRlcmZhY2UNCg0KVGhpcyBtb2R1bGUgZXhwb3J0cyBhIHNldCBvZiBmdW5jdGlvbnMgY29ycmVzcG9uZGluZyB0byB0aGUgaW50cmluc2ljIA0Kb3BlcmF0b3JzIG9mIFB5dGhvbi4gIEZvciBleGFtcGxlLCBvcGVyYXRvci5hZGQoeCwgeSkgaXMgZXF1aXZhbGVudCANCnRvIHRoZSBleHByZXNzaW9uIHgreS4gIFRoZSBmdW5jdGlvbiBuYW1lcyBhcmUgdGhvc2UgdXNlZCBmb3Igc3BlY2lhbCANCm1ldGhvZHM7IHZhcmlhbnRzIHdpdGhvdXQgbGVhZGluZyBhbmQgdHJhaWxpbmcgJ19fJyBhcmUgYWxzbyBwcm92aWRlZCANCmZvciBjb252ZW5pZW5jZS4NCg0KVGhpcyBpcyB0aGUgcHVyZSBQeXRob24gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1vZHVsZS4NCiIiIg0KDQojIGRvd25sb2FkZWQgZnJvbSBodHRwOi8vYnVncy5weXRob24ub3JnL2ZpbGUyODMyNy9vcGVyYXRvci5weQ0KDQojaW1wb3J0IGJ1aWx0aW5zIGFzIF9iaSAgI3RoZXJlIGlzIG5vIGJ1aWx0aW5zIG1vZHVsZQ0KDQpkZWYgbHQoYSwgYik6DQogICAgIlNhbWUgYXMgYSA8IGIuIg0KICAgIHJldHVybiBhIDwgYg0KX19sdF9fID0gbHQNCg0KZGVmIGxlKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPD0gYi4iDQogICAgcmV0dXJuIGEgPD0gYg0KX19sZV9fID0gbGUNCg0KZGVmIGVxKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPT0gYi4iDQogICAgcmV0dXJuIGEgPT0gYg0KX19lcV9fID0gZXENCg0KZGVmIG5lKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgIT0gYi4iDQogICAgcmV0dXJuIGEgIT0gYg0KX19uZV9fID0gbmUNCg0KZGVmIGdlKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPj0gYi4iDQogICAgcmV0dXJuIGEgPj0gYg0KX19nZV9fID0gZ2UNCg0KZGVmIGd0KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPiBiLiINCiAgICByZXR1cm4gYSA+IGINCl9fZ3RfXyA9IGd0DQoNCmRlZiBub3RfKGEpOg0KICAgICJTYW1lIGFzIG5vdCBhLiINCiAgICByZXR1cm4gbm90IGENCl9fbm90X18gPSBub3RfDQoNCmRlZiB0cnV0aChhKToNCiAgICAiUmV0dXJuIFRydWUgaWYgYSBpcyB0cnVlLCBGYWxzZSBvdGhlcndpc2UuIg0KICAgICNyZXR1cm4gX2JpLmJvb2woYSkNCiAgICByZXR1cm4gYm9vbChhKQ0KDQpkZWYgaXNfKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgaXMgYi4iDQogICAgcmV0dXJuIGEgaXMgYg0KDQojIGJyeXRob24gZG9lcyBub3QgbGlrZSAgKGNhdXNlcyBzeW50YXggZXJyb3IpDQojZGVmIGlzX25vdChhLCBiKToNCiMgICAgIlNhbWUgYXMgYSBpcyBub3QgYi4iDQojICAgIHJldHVybiBhIGlzIG5vdCBiDQoNCiNyZWN1cnNpb24gZXJyb3Igb3IganVzdCBjb21tZW50IG91dCBhbmQgYWRkIGNvZGUgYmVsb3cgZnVuY3Rpb24NCiNkZWYgYWJzKGEpOg0KIyAgICAiU2FtZSBhcyBhYnMoYSkuIg0KIyAgICAjcmV0dXJuIF9iaS5hYnMoYSkNCiMgICAgcmV0dXJuIGFicyhhKQ0KX19hYnNfXyA9IGFicw0KYWJzPWFicw0KDQoNCmRlZiBhZGQoYSwgYik6DQogICAgIlNhbWUgYXMgYSArIGIuIg0KICAgIHJldHVybiBhICsgYg0KX19hZGRfXyA9IGFkZA0KDQpkZWYgYW5kXyhhLCBiKToNCiAgICAiU2FtZSBhcyBhICYgYi4iDQogICAgcmV0dXJuIGEgJiBiDQpfX2FuZF9fID0gYW5kXw0KDQpkZWYgZmxvb3JkaXYoYSwgYik6DQogICAgIlNhbWUgYXMgYSAvLyBiLiINCiAgICByZXR1cm4gYSAvLyBiDQpfX2Zsb29yZGl2X18gPSBmbG9vcmRpdg0KDQpkZWYgaW5kZXgoYSk6DQogICAgIlNhbWUgYXMgYS5fX2luZGV4X18oKS4iDQogICAgcmV0dXJuIGEuX19pbmRleF9fKCkNCl9faW5kZXhfXyA9IGluZGV4DQoNCmRlZiBpbnYoYSk6DQogICAgIlNhbWUgYXMgfmEuIg0KICAgICNyZXR1cm4gfmEgICAgI2JyeXRob24gZG9lcyBub3QgbGlrZQ0KICAgIHJldHVybiBhXigyKiozMSkNCmludmVydCA9IF9faW52X18gPSBfX2ludmVydF9fID0gaW52DQoNCmRlZiBsc2hpZnQoYSwgYik6DQogICAgIlNhbWUgYXMgYSA8PCBiLiINCiAgICByZXR1cm4gYSA8PCBiDQpfX2xzaGlmdF9fID0gbHNoaWZ0DQoNCmRlZiBtb2QoYSwgYik6DQogICAgIlNhbWUgYXMgYSAlIGIuIg0KICAgIHJldHVybiBhICUgYg0KX19tb2RfXyA9IG1vZA0KDQpkZWYgbXVsKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgKiBiLiINCiAgICByZXR1cm4gYSAqIGINCl9fbXVsX18gPSBtdWwNCg0KZGVmIG5lZyhhKToNCiAgICAiU2FtZSBhcyAtYS4iDQogICAgcmV0dXJuIC1hDQpfX25lZ19fID0gbmVnDQoNCmRlZiBvcl8oYSwgYik6DQogICAgIlNhbWUgYXMgYSB8IGIuIg0KICAgIHJldHVybiBhIHwgYg0KX19vcl9fID0gb3JfDQoNCmRlZiBwb3MoYSk6DQogICAgIlNhbWUgYXMgK2EuIg0KICAgICNyZXR1cm4gK2EgICAgI2JyeXRob24gZG9lcyBub3QgbGlrZQ0KICAgIGlmIGEgPj0gMDogcmV0dXJuIGENCiAgICByZXR1cm4gLWENCl9fcG9zX18gPSBwb3MNCg0KZGVmIHBvdyhhLCBiKToNCiAgICAiU2FtZSBhcyBhICoqIGIuIg0KICAgIHJldHVybiBhICoqIGINCl9fcG93X18gPSBwb3cNCg0KZGVmIHJzaGlmdChhLCBiKToNCiAgICAiU2FtZSBhcyBhID4+IGIuIg0KICAgIHJldHVybiBhID4+IGINCl9fcnNoaWZ0X18gPSByc2hpZnQNCg0KZGVmIHN1YihhLCBiKToNCiAgICAiU2FtZSBhcyBhIC0gYi4iDQogICAgcmV0dXJuIGEgLSBiDQpfX3N1Yl9fID0gc3ViDQoNCmRlZiB0cnVlZGl2KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgLyBiLiINCiAgICByZXR1cm4gYSAvIGINCl9fdHJ1ZWRpdl9fID0gdHJ1ZWRpdg0KDQpkZWYgeG9yKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgXiBiLiINCiAgICByZXR1cm4gYSBeIGINCl9feG9yX18gPSB4b3INCg0KZGVmIGNvbmNhdChhLCBiKToNCiAgICAiU2FtZSBhcyBhICsgYiwgZm9yIGEgYW5kIGIgc2VxdWVuY2VzLiINCiAgICBpZiBub3QgKGhhc2F0dHIoYSwgJ19fZ2V0aXRlbV9fJykgYW5kIGhhc2F0dHIoYiwgJ19fZ2V0aXRlbV9fJykpOg0KICAgICAgICByYWlzZSBUeXBlRXJyb3IoJ2EgYW5kIGIgbXVzdCBiZSBzZXF1ZW5jZXMnKQ0KICAgIHJldHVybiBhICsgYg0KX19jb25jYXRfXyA9IGNvbmNhdA0KDQpkZWYgY29udGFpbnMoYSwgYik6DQogICAgIlNhbWUgYXMgYiBpbiBhIChub3RlIHJldmVyc2VkIG9wZXJhbmRzKS4iDQogICAgcmV0dXJuIGIgaW4gYQ0KX19jb250YWluc19fID0gY29udGFpbnMNCg0KZGVmIGNvdW50T2YoYSwgYik6DQogICAgIlJldHVybiB0aGUgbnVtYmVyIG9mIHRpbWVzIGIgb2NjdXJzIGluIGEuIg0KICAgIGNvdW50ID0gMA0KICAgIGZvciBpIGluIGE6DQogICAgICAgIGlmIGkgPT0gYjoNCiAgICAgICAgICAgIGNvdW50ICs9IDENCiAgICByZXR1cm4gY291bnQNCg0KZGVmIGRlbGl0ZW0oYSwgYik6DQogICAgIlNhbWUgYXMgZGVsIGFbYl0uIg0KICAgIGRlbCBhW2JdDQpfX2RlbGl0ZW1fXyA9IGRlbGl0ZW0NCg0KZGVmIGdldGl0ZW0oYSwgYik6DQogICAgIlNhbWUgYXMgYVtiXS4iDQogICAgcmV0dXJuIGFbYl0NCl9fZ2V0aXRlbV9fID0gZ2V0aXRlbQ0KDQojZml4bWUgIGJyeXRob24gZG9lc24ndCBsaWtlIHRoaXMgZnVuY3Rpb24NCiNkZWYgaW5kZXhPZihhLCBiKToNCiMgICAgIlJldHVybiB0aGUgZmlyc3QgaW5kZXggb2YgYiBpbiBhLiINCiMgICAgZm9yIGksIGogaW4gX2JpLmVudW1lcmF0ZShhKToNCiMgICAgICAgIGlmIGogPT0gYjoNCiMgICAgICAgICAgICByZXR1cm4gaQ0KIyAgICBlbHNlOg0KIyAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignYiBub3QgZm91bmQgaW4gYScpDQoNCmRlZiBzZXRpdGVtKGEsIGIsIGMpOg0KICAgICJTYW1lIGFzIGFbYl0gPSBjLiINCiAgICBhW2JdID0gYw0KX19zZXRpdGVtX18gPSBzZXRpdGVtDQoNCg0KDQpjbGFzcyBhdHRyZ2V0dGVyOg0KICAgICIiIg0KICAgIFJldHVybiBhIGNhbGxhYmxlIG9iamVjdCB0aGF0IGZldGNoZXMgdGhlIGdpdmVuIGF0dHJpYnV0ZShzKSBmcm9tIGl0cyBvcGVyYW5kLg0KICAgIEFmdGVyIGY9YXR0cmdldHRlcignbmFtZScpLCB0aGUgY2FsbCBmKHIpIHJldHVybnMgci5uYW1lLg0KICAgIEFmdGVyIGc9YXR0cmdldHRlcignbmFtZScsICdkYXRlJyksIHRoZSBjYWxsIGcocikgcmV0dXJucyAoci5uYW1lLCByLmRhdGUpLg0KICAgIEFmdGVyIGg9YXR0cmdldHRlcignbmFtZS5maXJzdCcsICduYW1lLmxhc3QnKSwgdGhlIGNhbGwgaChyKSByZXR1cm5zDQogICAgKHIubmFtZS5maXJzdCwgci5uYW1lLmxhc3QpLg0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhdHRyLCAqYXR0cnMpOg0KICAgICAgICBzZWxmLl9hdHRycyA9IChhdHRyLCkNCiAgICAgICAgc2VsZi5fYXR0cnMgKz0gYXR0cnMNCiAgICAgICAgaWYgYW55KG5vdCBpc2luc3RhbmNlKGF0dHIsIHN0cikgZm9yIGF0dHIgaW4gc2VsZi5fYXR0cnMpOg0KICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCdhdHRyaWJ1dGUgbmFtZSBtdXN0IGJlIGEgc3RyaW5nJykNCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgX3Jlc29sdmVfYXR0cihvYmosIGF0dHIpOg0KICAgICAgICBmb3IgbmFtZSBpbiBhdHRyLnNwbGl0KCcuJyk6DQogICAgICAgICAgICAjb2JqID0gX2JpLmdldGF0dHIob2JqLCBuYW1lKQ0KICAgICAgICAgICAgb2JqID0gZ2V0YXR0cihvYmosIG5hbWUpDQogICAgICAgIHJldHVybiBvYmoNCg0KICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBvYmopOg0KICAgICAgICBpZiBsZW4oc2VsZi5fYXR0cnMpID09IDE6DQogICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVzb2x2ZV9hdHRyKG9iaiwgc2VsZi5fYXR0cnNbMF0pDQogICAgICAgIHJldHVybiB0dXBsZShzZWxmLl9yZXNvbHZlX2F0dHIob2JqLCBhdHRyKSBmb3IgYXR0ciBpbiBzZWxmLl9hdHRycykNCg0KY2xhc3MgaXRlbWdldHRlcjoNCiAgICAiIiINCiAgICBSZXR1cm4gYSBjYWxsYWJsZSBvYmplY3QgdGhhdCBmZXRjaGVzIHRoZSBnaXZlbiBpdGVtKHMpIGZyb20gaXRzIG9wZXJhbmQuDQogICAgQWZ0ZXIgZj1pdGVtZ2V0dGVyKDIpLCB0aGUgY2FsbCBmKHIpIHJldHVybnMgclsyXS4NCiAgICBBZnRlciBnPWl0ZW1nZXR0ZXIoMiw1LDMpLCB0aGUgY2FsbCBnKHIpIHJldHVybnMgKHJbMl0sIHJbNV0sIHJbM10pDQogICAgIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZW0sICppdGVtcyk6DQogICAgICAgIHNlbGYuX2l0ZW1zID0gKGl0ZW0sKQ0KICAgICAgICBzZWxmLl9pdGVtcyArPSBpdGVtcw0KDQogICAgZGVmIF9fY2FsbF9fKHNlbGYsIG9iaik6DQogICAgICAgIGlmIGxlbihzZWxmLl9pdGVtcykgPT0gMToNCiAgICAgICAgICAgIHJldHVybiBvYmpbc2VsZi5faXRlbXNbMF1dDQogICAgICAgIHJldHVybiB0dXBsZShvYmpbaXRlbV0gZm9yIGl0ZW0gaW4gc2VsZi5faXRlbXMpDQoNCmNsYXNzIG1ldGhvZGNhbGxlcjoNCiAgICAiIiINCiAgICBSZXR1cm4gYSBjYWxsYWJsZSBvYmplY3QgdGhhdCBjYWxscyB0aGUgZ2l2ZW4gbWV0aG9kIG9uIGl0cyBvcGVyYW5kLg0KICAgIEFmdGVyIGYgPSBtZXRob2RjYWxsZXIoJ25hbWUnKSwgdGhlIGNhbGwgZihyKSByZXR1cm5zIHIubmFtZSgpLg0KICAgIEFmdGVyIGcgPSBtZXRob2RjYWxsZXIoJ25hbWUnLCAnZGF0ZScsIGZvbz0xKSwgdGhlIGNhbGwgZyhyKSByZXR1cm5zDQogICAgci5uYW1lKCdkYXRlJywgZm9vPTEpLg0KICAgICIiIg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsICphcmdzLCAqKmt3YXJncyk6DQogICAgICAgIHNlbGYuX25hbWUgPSBuYW1lDQogICAgICAgIHNlbGYuX2FyZ3MgPSBhcmdzDQogICAgICAgIHNlbGYuX2t3YXJncyA9IGt3YXJncw0KDQogICAgZGVmIF9fY2FsbF9fKHNlbGYsIG9iaik6DQogICAgICAgIHJldHVybiBnZXRhdHRyKG9iaiwgc2VsZi5fbmFtZSkoKnNlbGYuX2FyZ3MsICoqc2VsZi5fa3dhcmdzKQ0KDQoNCmRlZiBpYWRkKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgKz0gYi4iDQogICAgYSArPSBiDQogICAgcmV0dXJuIGENCl9faWFkZF9fID0gaWFkZA0KDQpkZWYgaWFuZChhLCBiKToNCiAgICAiU2FtZSBhcyBhICY9IGIuIg0KICAgIGEgJj0gYg0KICAgIHJldHVybiBhDQpfX2lhbmRfXyA9IGlhbmQNCg0KZGVmIGljb25jYXQoYSwgYik6DQogICAgIlNhbWUgYXMgYSArPSBiLCBmb3IgYSBhbmQgYiBzZXF1ZW5jZXMuIg0KICAgIGlmIG5vdCAoaGFzYXR0cihhLCAnX19nZXRpdGVtX18nKSBhbmQgaGFzYXR0cihiLCAnX19nZXRpdGVtX18nKSk6DQogICAgICAgIHJhaXNlIFR5cGVFcnJvcignYSBhbmQgYiBtdXN0IGJlIHNlcXVlbmNlcycpDQogICAgYSArPSBiDQogICAgcmV0dXJuIGENCl9faWNvbmNhdF9fID0gaWNvbmNhdA0KDQpkZWYgaWZsb29yZGl2KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgLy89IGIuIg0KICAgIGEgLy89IGINCiAgICByZXR1cm4gYQ0KX19pZmxvb3JkaXZfXyA9IGlmbG9vcmRpdg0KDQpkZWYgaWxzaGlmdChhLCBiKToNCiAgICAiU2FtZSBhcyBhIDw8PSBiLiINCiAgICBhIDw8PSBiDQogICAgcmV0dXJuIGENCl9faWxzaGlmdF9fID0gaWxzaGlmdA0KDQpkZWYgaW1vZChhLCBiKToNCiAgICAiU2FtZSBhcyBhICU9IGIuIg0KICAgIGEgJT0gYg0KICAgIHJldHVybiBhDQpfX2ltb2RfXyA9IGltb2QNCg0KZGVmIGltdWwoYSwgYik6DQogICAgIlNhbWUgYXMgYSAqPSBiLiINCiAgICBhICo9IGINCiAgICByZXR1cm4gYQ0KX19pbXVsX18gPSBpbXVsDQoNCmRlZiBpb3IoYSwgYik6DQogICAgIlNhbWUgYXMgYSB8PSBiLiINCiAgICBhIHw9IGINCiAgICByZXR1cm4gYQ0KX19pb3JfXyA9IGlvcg0KDQpkZWYgaXBvdyhhLCBiKToNCiAgICAiU2FtZSBhcyBhICoqPSBiLiINCiAgICBhICoqPWINCiAgICByZXR1cm4gYQ0KX19pcG93X18gPSBpcG93DQoNCmRlZiBpcnNoaWZ0KGEsIGIpOg0KICAgICJTYW1lIGFzIGEgPj49IGIuIg0KICAgIGEgPj49IGINCiAgICByZXR1cm4gYQ0KX19pcnNoaWZ0X18gPSBpcnNoaWZ0DQoNCmRlZiBpc3ViKGEsIGIpOg0KICAgICJTYW1lIGFzIGEgLT0gYi4iDQogICAgYSAtPSBiDQogICAgcmV0dXJuIGENCl9faXN1Yl9fID0gaXN1Yg0KDQpkZWYgaXRydWVkaXYoYSwgYik6DQogICAgIlNhbWUgYXMgYSAvPSBiLiINCiAgICBhIC89IGINCiAgICByZXR1cm4gYQ0KX19pdHJ1ZWRpdl9fID0gaXRydWVkaXYNCg0KZGVmIGl4b3IoYSwgYik6DQogICAgIlNhbWUgYXMgYSBePSBiLiINCiAgICBhIF49IGINCiAgICByZXR1cm4gYQ0KX19peG9yX18gPSBpeG9yDQoNCmRlZiBsZW5ndGhfaGludChvYmosIGRlZmF1bHQ9MCk6DQogICAgIiIiDQogICAgUmV0dXJuIGFuIGVzdGltYXRlIG9mIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gb2JqLg0KICAgIFRoaXMgaXMgdXNlZnVsIGZvciBwcmVzaXppbmcgY29udGFpbmVycyB3aGVuIGJ1aWxkaW5nIGZyb20gYW4gaXRlcmFibGUuDQoNCiAgICBJZiB0aGUgb2JqZWN0IHN1cHBvcnRzIGxlbigpLCB0aGUgcmVzdWx0IHdpbGwgYmUgZXhhY3QuIE90aGVyd2lzZSwgaXQgbWF5DQogICAgb3Zlci0gb3IgdW5kZXItZXN0aW1hdGUgYnkgYW4gYXJiaXRyYXJ5IGFtb3VudC4gVGhlIHJlc3VsdCB3aWxsIGJlIGFuDQogICAgaW50ZWdlciA+PSAwLg0KICAgICIiIg0KICAgIHRyeToNCiAgICAgICAgcmV0dXJuIGxlbihvYmopDQogICAgZXhjZXB0IFR5cGVFcnJvcjoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdmFsID0gb2JqLl9fbGVuZ3RoX2hpbnRfXygpDQogICAgICAgICAgICBpZiB2YWwgaXMgTm90SW1wbGVtZW50ZWQ6DQogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yDQogICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIFR5cGVFcnJvcik6DQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdA0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaWYgbm90IHZhbCA+IDA6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignZGVmYXVsdCBtdXN0IGJlID4gMCcpDQogICAgICAgICAgICByZXR1cm4gdmFsDQoNCiN0cnk6DQojICAgIGZyb20gX29wZXJhdG9yIGltcG9ydCAqDQojICAgIGZyb20gX29wZXJhdG9yIGltcG9ydCBfX2RvY19fDQojZXhjZXB0IEltcG9ydEVycm9yOg0KIyAgIHBhc3MNCg==',
'/Lib/sys.py':'X19zdGRvdXRfXz1nZXRhdHRyKGRvYywiJHN0ZG91dCIpCl9fc3RkZXJyX189Z2V0YXR0cihkb2MsIiRzdGRlcnIiKQoKc3Rkb3V0ID0gZ2V0YXR0cihkb2MsIiRzdGRvdXQiKQpzdGRlcnIgPSBnZXRhdHRyKGRvYywiJHN0ZGVyciIpCgpoYXNfbG9jYWxfc3RvcmFnZT1fX0JSWVRIT05fXy5oYXNfbG9jYWxfc3RvcmFnZQpoYXNfanNvbj1fX0JSWVRIT05fXy5oYXNfanNvbgoKbW9kdWxlcyA9IF9fQlJZVEhPTl9fLmltcG9ydGVkCgphcmd2ID0gWydfX21haW5fXyddCgpjbGFzcyBfX3ZlcnNpb25faW5mbyhvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHZlcnNpb25faW5mbyk6CiAgICAgICAgc2VsZi52ZXJzaW9uX2luZm8gPSB2ZXJzaW9uX2luZm8KICAgICAgICBzZWxmLm1ham9yID0gdmVyc2lvbl9pbmZvWzBdCiAgICAgICAgc2VsZi5taW5vciA9IHZlcnNpb25faW5mb1sxXQogICAgICAgIHNlbGYubWljcm8gPSB2ZXJzaW9uX2luZm9bMl0KICAgICAgICBzZWxmLnJlbGVhc2VsZXZlbCA9IHZlcnNpb25faW5mb1szXQogICAgICAgIHNlbGYuc2VyaWFsID0gdmVyc2lvbl9pbmZvWzRdCgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGluZGV4KToKICAgICAgICByZXR1cm4gc2VsZi52ZXJzaW9uX2luZm9baW5kZXhdCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHN0cihzZWxmLnZlcnNpb25faW5mbykKICAgICAKdmVyc2lvbl9pbmZvPV9fdmVyc2lvbl9pbmZvKF9fQlJZVEhPTl9fLnZlcnNpb25faW5mbykKcGF0aD1fX0JSWVRIT05fXy5wYXRoCmJ1aWx0aW5fbW9kdWxlX25hbWVzPVsncG9zaXgnXQoKYnl0ZW9yZGVyPSdsaXR0bGUnCm1heHNpemU9OTAwNzE5OTI1NDc0MDk5MiAgICNsYXJnZXN0IGludGVnZXIuLgptYXhpbnQ9OTAwNzE5OTI1NDc0MDk5MiAgICNsYXJnZXN0IGludGVnZXIuLgptYXh1bmljb2RlPTExMTQxMTEKCnBsYXRmb3JtPSJicnl0aG9uIgp3YXJub3B0aW9ucz1bXQoKY2xhc3MgZmxhZ19jbGFzczoKICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgIHNlbGYuZGVidWc9MAogICAgICBzZWxmLmluc3BlY3Q9MAogICAgICBzZWxmLmludGVyYWN0aXZlPTAKICAgICAgc2VsZi5vcHRpbWl6ZT0wCiAgICAgIHNlbGYuZG9udF93cml0ZV9ieXRlY29kZT0wCiAgICAgIHNlbGYubm9fdXNlcl9zaXRlPTAKICAgICAgc2VsZi5ub19zaXRlPTAKICAgICAgc2VsZi5pZ25vcmVfZW52aXJvbm1lbnQ9MAogICAgICBzZWxmLnZlcmJvc2U9MAogICAgICBzZWxmLmJ5dGVzX3dhcm5pbmc9MAogICAgICBzZWxmLnF1aWV0PTAKICAgICAgc2VsZi5oYXNoX3JhbmRvbWl6YXRpb249MQoKZmxhZ3M9ZmxhZ19jbGFzcygpCgo=',
'/Lib/io.py':'aW1wb3J0IGJ1aWx0aW5zCgpvcGVuID0gYnVpbHRpbnMub3BlbgoKY2xhc3MgU3RyaW5nSU86CgogICAgZGVmIF9faW5pdF9fKHNlbGYsaW5pdGlhbF92YWx1ZT0nJyxuZXdsaW5lPU5vbmUpOgogICAgICAgIHNlbGYudmFsdWUgPSBpbml0aWFsX3ZhbHVlCiAgICAgICAgc2VsZi5uZXdsaW5lID0gbmV3bGluZQogICAgICAgIHNlbGYuX3BvcyA9IGxlbihpbml0aWFsX3ZhbHVlKQogICAgCiAgICBkZWYgd3JpdGUoc2VsZixkYXRhKToKICAgICAgICBzZWxmLnZhbHVlICs9IGRhdGEKICAgIAogICAgZGVmIHJlYWQoc2VsZixuYj0tMSk6CiAgICAgICAgaWYgbmIhPS0xOgogICAgICAgICAgICByZXMgPSBzZWxmLnZhbHVlW3NlbGYuX3BvczpzZWxmLl9wb3MrbmJdCiAgICAgICAgICAgIHNlbGYuX3BvcyA9IG1pbihzZWxmLl9wb3MrbmIsbGVuKHNlbGYudmFsdWUpLTEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVzID0gc2VsZi52YWx1ZVtzZWxmLl9wb3M6XQogICAgICAgICAgICBzZWxmLl9wb3MgPSBsZW4oc2VsZi52YWx1ZSktMQogICAgICAgIHJldHVybiByZXMK',
'/Lib/os.py':'aW1wb3J0IF9vcwoKbmFtZT0iYnJ5dGhvbiIKCiNhbHRzZXA9Tm9uZQojY3VyZGlyPSIuIgoKZGVmIGRldm51bGwoKToKICAgIE9TRXJyb3IoJ0Z1bmN0aW9uIGRldm51bGwgbm90IHN1cHBvcnRlZCcpCgojZXh0c2VwPScuJwoKZGVmIGdldGxvYWRhdmcoKToKICAgIE9TRXJyb3IoJ0Z1bmN0aW9uIGdldGxvYWRhdmcgbm90IHN1cHBvcnRlZCcpCgojbGluZXNlcD0iXG4iCiNwYXRoc2VwPSI7IgojcGFyZGlyPSIuLiIKI3NlcD0nLycKCmRlZiB1cmFuZG9tKGxlbmd0aCk6CiAgICBfYz1bXQogICAgZm9yIF9pIGluIHJhbmdlKGxlbmd0aCk6CiAgICAgICAgX2MuYXBwZW5kKGNocihfb3MucmFuZGludCgwLDI1NSkpKQogICAgICAgIAogICAgcmV0dXJuICcnLmpvaW4oX2MpCgojaW1wb3J0IHBvc2l4cGF0aCBhcyBwYXRoCiNzeXMubW9kdWxlc1snb3MucGF0aCddID0gcGF0aAoKI2Zyb20gb3MucGF0aCBpbXBvcnQgKGN1cmRpciwgcGFyZGlyLCBzZXAsIHBhdGhzZXAsIGRlZnBhdGgsIGV4dHNlcCwgYWx0c2VwKQoKIyBQeXRob24gdXNlcyBmaXhlZCB2YWx1ZXMgZm9yIHRoZSBTRUVLXyBjb25zdGFudHM7IHRoZXkgYXJlIG1hcHBlZAojIHRvIG5hdGl2ZSBjb25zdGFudHMgaWYgbmVjZXNzYXJ5IGluIHBvc2l4bW9kdWxlLmMKU0VFS19TRVQgPSAwClNFRUtfQ1VSID0gMQpTRUVLX0VORCA9IDIKCmRlZiB3YWxrKHRvcCwgdG9wZG93bj1UcnVlLCBvbmVycm9yPU5vbmUsIGZvbGxvd2xpbmtzPUZhbHNlKToKICAgICNyZWNlaXZlIHNjb3BlIGVycm9yIGluIGJyeXRob24KICAgICMgd2h5IGhhdmUgb3Mud2FsayBpbiBicnl0aG9uPyAgc2VydmVyIHNpZGUgamF2YXNjcmlwdCAobm9kZWpzKQogICAgIyBpbW1lZGlhdGVseSBjYW4gdXNlIG9zLndhbGsgdG8gY29tcGlsZSBsaWJzIGFuZCBMaWIgbW9kdWxlcwogICAgIyB0byBqYXZhc2NyaXB0IGVxdWl2YWxlbnQuLgogICAgT1NFcnJvcignRnVuY3Rpb24gb3Mud2FsayBub3Qgc3VwcG9ydGVkIHlldCcpCiAgICByZXR1cm4KCiAgICAiIiJEaXJlY3RvcnkgdHJlZSBnZW5lcmF0b3IuCgogICAgRm9yIGVhY2ggZGlyZWN0b3J5IGluIHRoZSBkaXJlY3RvcnkgdHJlZSByb290ZWQgYXQgdG9wIChpbmNsdWRpbmcgdG9wCiAgICBpdHNlbGYsIGJ1dCBleGNsdWRpbmcgJy4nIGFuZCAnLi4nKSwgeWllbGRzIGEgMy10dXBsZQoKICAgICAgICBkaXJwYXRoLCBkaXJuYW1lcywgZmlsZW5hbWVzCgogICAgZGlycGF0aCBpcyBhIHN0cmluZywgdGhlIHBhdGggdG8gdGhlIGRpcmVjdG9yeS4gIGRpcm5hbWVzIGlzIGEgbGlzdCBvZgogICAgdGhlIG5hbWVzIG9mIHRoZSBzdWJkaXJlY3RvcmllcyBpbiBkaXJwYXRoIChleGNsdWRpbmcgJy4nIGFuZCAnLi4nKS4KICAgIGZpbGVuYW1lcyBpcyBhIGxpc3Qgb2YgdGhlIG5hbWVzIG9mIHRoZSBub24tZGlyZWN0b3J5IGZpbGVzIGluIGRpcnBhdGguCiAgICBOb3RlIHRoYXQgdGhlIG5hbWVzIGluIHRoZSBsaXN0cyBhcmUganVzdCBuYW1lcywgd2l0aCBubyBwYXRoIGNvbXBvbmVudHMuCiAgICBUbyBnZXQgYSBmdWxsIHBhdGggKHdoaWNoIGJlZ2lucyB3aXRoIHRvcCkgdG8gYSBmaWxlIG9yIGRpcmVjdG9yeSBpbgogICAgZGlycGF0aCwgZG8gb3MucGF0aC5qb2luKGRpcnBhdGgsIG5hbWUpLgoKICAgIElmIG9wdGlvbmFsIGFyZyAndG9wZG93bicgaXMgdHJ1ZSBvciBub3Qgc3BlY2lmaWVkLCB0aGUgdHJpcGxlIGZvciBhCiAgICBkaXJlY3RvcnkgaXMgZ2VuZXJhdGVkIGJlZm9yZSB0aGUgdHJpcGxlcyBmb3IgYW55IG9mIGl0cyBzdWJkaXJlY3RvcmllcwogICAgKGRpcmVjdG9yaWVzIGFyZSBnZW5lcmF0ZWQgdG9wIGRvd24pLiAgSWYgdG9wZG93biBpcyBmYWxzZSwgdGhlIHRyaXBsZQogICAgZm9yIGEgZGlyZWN0b3J5IGlzIGdlbmVyYXRlZCBhZnRlciB0aGUgdHJpcGxlcyBmb3IgYWxsIG9mIGl0cwogICAgc3ViZGlyZWN0b3JpZXMgKGRpcmVjdG9yaWVzIGFyZSBnZW5lcmF0ZWQgYm90dG9tIHVwKS4KCiAgICBXaGVuIHRvcGRvd24gaXMgdHJ1ZSwgdGhlIGNhbGxlciBjYW4gbW9kaWZ5IHRoZSBkaXJuYW1lcyBsaXN0IGluLXBsYWNlCiAgICAoZS5nLiwgdmlhIGRlbCBvciBzbGljZSBhc3NpZ25tZW50KSwgYW5kIHdhbGsgd2lsbCBvbmx5IHJlY3Vyc2UgaW50byB0aGUKICAgIHN1YmRpcmVjdG9yaWVzIHdob3NlIG5hbWVzIHJlbWFpbiBpbiBkaXJuYW1lczsgdGhpcyBjYW4gYmUgdXNlZCB0byBwcnVuZQogICAgdGhlIHNlYXJjaCwgb3IgdG8gaW1wb3NlIGEgc3BlY2lmaWMgb3JkZXIgb2YgdmlzaXRpbmcuICBNb2RpZnlpbmcKICAgIGRpcm5hbWVzIHdoZW4gdG9wZG93biBpcyBmYWxzZSBpcyBpbmVmZmVjdGl2ZSwgc2luY2UgdGhlIGRpcmVjdG9yaWVzIGluCiAgICBkaXJuYW1lcyBoYXZlIGFscmVhZHkgYmVlbiBnZW5lcmF0ZWQgYnkgdGhlIHRpbWUgZGlybmFtZXMgaXRzZWxmIGlzCiAgICBnZW5lcmF0ZWQuCgogICAgQnkgZGVmYXVsdCBlcnJvcnMgZnJvbSB0aGUgb3MubGlzdGRpcigpIGNhbGwgYXJlIGlnbm9yZWQuICBJZgogICAgb3B0aW9uYWwgYXJnICdvbmVycm9yJyBpcyBzcGVjaWZpZWQsIGl0IHNob3VsZCBiZSBhIGZ1bmN0aW9uOyBpdAogICAgd2lsbCBiZSBjYWxsZWQgd2l0aCBvbmUgYXJndW1lbnQsIGFuIG9zLmVycm9yIGluc3RhbmNlLiAgSXQgY2FuCiAgICByZXBvcnQgdGhlIGVycm9yIHRvIGNvbnRpbnVlIHdpdGggdGhlIHdhbGssIG9yIHJhaXNlIHRoZSBleGNlcHRpb24KICAgIHRvIGFib3J0IHRoZSB3YWxrLiAgTm90ZSB0aGF0IHRoZSBmaWxlbmFtZSBpcyBhdmFpbGFibGUgYXMgdGhlCiAgICBmaWxlbmFtZSBhdHRyaWJ1dGUgb2YgdGhlIGV4Y2VwdGlvbiBvYmplY3QuCgogICAgQnkgZGVmYXVsdCwgb3Mud2FsayBkb2VzIG5vdCBmb2xsb3cgc3ltYm9saWMgbGlua3MgdG8gc3ViZGlyZWN0b3JpZXMgb24KICAgIHN5c3RlbXMgdGhhdCBzdXBwb3J0IHRoZW0uICBJbiBvcmRlciB0byBnZXQgdGhpcyBmdW5jdGlvbmFsaXR5LCBzZXQgdGhlCiAgICBvcHRpb25hbCBhcmd1bWVudCAnZm9sbG93bGlua3MnIHRvIHRydWUuCgogICAgQ2F1dGlvbjogIGlmIHlvdSBwYXNzIGEgcmVsYXRpdmUgcGF0aG5hbWUgZm9yIHRvcCwgZG9uJ3QgY2hhbmdlIHRoZQogICAgY3VycmVudCB3b3JraW5nIGRpcmVjdG9yeSBiZXR3ZWVuIHJlc3VtcHRpb25zIG9mIHdhbGsuICB3YWxrIG5ldmVyCiAgICBjaGFuZ2VzIHRoZSBjdXJyZW50IGRpcmVjdG9yeSwgYW5kIGFzc3VtZXMgdGhhdCB0aGUgY2xpZW50IGRvZXNuJ3QKICAgIGVpdGhlci4KCiAgICBFeGFtcGxlOgoKICAgIGltcG9ydCBvcwogICAgZnJvbSBvcy5wYXRoIGltcG9ydCBqb2luLCBnZXRzaXplCiAgICBmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2FsaygncHl0aG9uL0xpYi9lbWFpbCcpOgogICAgICAgIHByaW50KHJvb3QsICJjb25zdW1lcyIsIGVuZD0iIikKICAgICAgICBwcmludChzdW0oW2dldHNpemUoam9pbihyb290LCBuYW1lKSkgZm9yIG5hbWUgaW4gZmlsZXNdKSwgZW5kPSIiKQogICAgICAgIHByaW50KCJieXRlcyBpbiIsIGxlbihmaWxlcyksICJub24tZGlyZWN0b3J5IGZpbGVzIikKICAgICAgICBpZiAnQ1ZTJyBpbiBkaXJzOgogICAgICAgICAgICBkaXJzLnJlbW92ZSgnQ1ZTJykgICMgZG9uJ3QgdmlzaXQgQ1ZTIGRpcmVjdG9yaWVzCiAgICAiIiIKICAgICIiIgogICAgCiAgICBpc2xpbmssIGpvaW4sIGlzZGlyID0gcGF0aC5pc2xpbmssIHBhdGguam9pbiwgcGF0aC5pc2RpcgoKICAgICMgV2UgbWF5IG5vdCBoYXZlIHJlYWQgcGVybWlzc2lvbiBmb3IgdG9wLCBpbiB3aGljaCBjYXNlIHdlIGNhbid0CiAgICAjIGdldCBhIGxpc3Qgb2YgdGhlIGZpbGVzIHRoZSBkaXJlY3RvcnkgY29udGFpbnMuICBvcy53YWxrCiAgICAjIGFsd2F5cyBzdXBwcmVzc2VkIHRoZSBleGNlcHRpb24gdGhlbiwgcmF0aGVyIHRoYW4gYmxvdyB1cCBmb3IgYQogICAgIyBtaW5vciByZWFzb24gd2hlbiAoc2F5KSBhIHRob3VzYW5kIHJlYWRhYmxlIGRpcmVjdG9yaWVzIGFyZSBzdGlsbAogICAgIyBsZWZ0IHRvIHZpc2l0LiAgVGhhdCBsb2dpYyBpcyBjb3BpZWQgaGVyZS4KICAgIHRyeToKICAgICAgICAjIE5vdGUgdGhhdCBsaXN0ZGlyIGFuZCBlcnJvciBhcmUgZ2xvYmFscyBpbiB0aGlzIG1vZHVsZSBkdWUKICAgICAgICAjIHRvIGVhcmxpZXIgaW1wb3J0LSouCiAgICAgICAgbmFtZXMgPSBsaXN0ZGlyKHRvcCkKICAgIGV4Y2VwdCBlcnJvciBhcyBlcnI6CiAgICAgICAgaWYgb25lcnJvciBpcyBub3QgTm9uZToKICAgICAgICAgICAgb25lcnJvcihlcnIpCiAgICAgICAgcmV0dXJuCiAgICAKICAgIGRpcnMsIG5vbmRpcnMgPSBbXSwgW10KICAgIGZvciBuYW1lIGluIG5hbWVzOgogICAgICAgIGlmIGlzZGlyKGpvaW4odG9wLCBuYW1lKSk6CiAgICAgICAgICAgIGRpcnMuYXBwZW5kKG5hbWUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbm9uZGlycy5hcHBlbmQobmFtZSkKICAgIAogICAgaWYgdG9wZG93bjoKICAgICAgICB5aWVsZCB0b3AsIGRpcnMsIG5vbmRpcnMKICAgIAogICAgZm9yIG5hbWUgaW4gZGlyczoKICAgICAgICBuZXdfcGF0aCA9IGpvaW4odG9wLCBuYW1lKQogICAgICAgIGlmIGZvbGxvd2xpbmtzIG9yIG5vdCBpc2xpbmsobmV3X3BhdGgpOgogICAgICAgICAgICBmb3IgeCBpbiB3YWxrKG5ld19wYXRoLCB0b3Bkb3duLCBvbmVycm9yLCBmb2xsb3dsaW5rcyk6CiAgICAgICAgICAgICAgICB5aWVsZCB4CiAgICBpZiBub3QgdG9wZG93bjoKICAgICAgICB5aWVsZCB0b3AsIGRpcnMsIG5vbmRpcnMKICAgICIiIgoKY2xhc3MgX3BhdGg6CgogICAgZGVmIGJhc2VuYW1lKHNlbGYsYXJnKToKICAgICAgICByZXR1cm4gYXJnCgpwYXRoID0gX3BhdGgoKQplbnZpcm9uID0ge30=',
'/Lib/browser/__init__.py':'ZnJvbSBfYnJvd3NlciBpbXBvcnQgKgppbXBvcnQgaHRtbAppbXBvcnQgYWpheAppbXBvcnQgd2Vic29ja2V0Cg==',
'/Lib/lib_migration/unittest/suite.py':'IiIiVGVzdFN1aXRlIiIiCgppbXBvcnQgc3lzCgpmcm9tIC4gaW1wb3J0IGNhc2UKZnJvbSAuIGltcG9ydCB1dGlsCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKCmRlZiBfY2FsbF9pZl9leGlzdHMocGFyZW50LCBhdHRyKToKICAgIGZ1bmMgPSBnZXRhdHRyKHBhcmVudCwgYXR0ciwgbGFtYmRhOiBOb25lKQogICAgZnVuYygpCgoKY2xhc3MgQmFzZVRlc3RTdWl0ZShvYmplY3QpOgogICAgIiIiQSBzaW1wbGUgdGVzdCBzdWl0ZSB0aGF0IGRvZXNuJ3QgcHJvdmlkZSBjbGFzcyBvciBtb2R1bGUgc2hhcmVkIGZpeHR1cmVzLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGVzdHM9KCkpOgogICAgICAgIHNlbGYuX3Rlc3RzID0gW10KICAgICAgICBzZWxmLmFkZFRlc3RzKHRlc3RzKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIjwlcyB0ZXN0cz0lcz4iICUgKHV0aWwuc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pLCBsaXN0KHNlbGYpKQoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBzZWxmLl9fY2xhc3NfXyk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJldHVybiBsaXN0KHNlbGYpID09IGxpc3Qob3RoZXIpCgogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIG5vdCBzZWxmID09IG90aGVyCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBpdGVyKHNlbGYuX3Rlc3RzKQoKICAgIGRlZiBjb3VudFRlc3RDYXNlcyhzZWxmKToKICAgICAgICBjYXNlcyA9IDAKICAgICAgICBmb3IgdGVzdCBpbiBzZWxmOgogICAgICAgICAgICBjYXNlcyArPSB0ZXN0LmNvdW50VGVzdENhc2VzKCkKICAgICAgICByZXR1cm4gY2FzZXMKCiAgICBkZWYgYWRkVGVzdChzZWxmLCB0ZXN0KToKICAgICAgICAjIHNhbml0eSBjaGVja3MKICAgICAgICBpZiBub3QgY2FsbGFibGUodGVzdCk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigie30gaXMgbm90IGNhbGxhYmxlIi5mb3JtYXQocmVwcih0ZXN0KSkpCiAgICAgICAgaWYgaXNpbnN0YW5jZSh0ZXN0LCB0eXBlKSBhbmQgaXNzdWJjbGFzcyh0ZXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNhc2UuVGVzdENhc2UsIFRlc3RTdWl0ZSkpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlRlc3RDYXNlcyBhbmQgVGVzdFN1aXRlcyBtdXN0IGJlIGluc3RhbnRpYXRlZCAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYmVmb3JlIHBhc3NpbmcgdGhlbSB0byBhZGRUZXN0KCkiKQogICAgICAgIHNlbGYuX3Rlc3RzLmFwcGVuZCh0ZXN0KQoKICAgIGRlZiBhZGRUZXN0cyhzZWxmLCB0ZXN0cyk6CiAgICAgICAgaWYgaXNpbnN0YW5jZSh0ZXN0cywgc3RyKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ0ZXN0cyBtdXN0IGJlIGFuIGl0ZXJhYmxlIG9mIHRlc3RzLCBub3QgYSBzdHJpbmciKQogICAgICAgIGZvciB0ZXN0IGluIHRlc3RzOgogICAgICAgICAgICBzZWxmLmFkZFRlc3QodGVzdCkKCiAgICBkZWYgcnVuKHNlbGYsIHJlc3VsdCk6CiAgICAgICAgZm9yIHRlc3QgaW4gc2VsZjoKICAgICAgICAgICAgaWYgcmVzdWx0LnNob3VsZFN0b3A6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB0ZXN0KHJlc3VsdCkKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3ZHMpOgogICAgICAgIHJldHVybiBzZWxmLnJ1bigqYXJncywgKiprd2RzKQoKICAgIGRlZiBkZWJ1ZyhzZWxmKToKICAgICAgICAiIiJSdW4gdGhlIHRlc3RzIHdpdGhvdXQgY29sbGVjdGluZyBlcnJvcnMgaW4gYSBUZXN0UmVzdWx0IiIiCiAgICAgICAgZm9yIHRlc3QgaW4gc2VsZjoKICAgICAgICAgICAgdGVzdC5kZWJ1ZygpCgoKY2xhc3MgVGVzdFN1aXRlKEJhc2VUZXN0U3VpdGUpOgogICAgIiIiQSB0ZXN0IHN1aXRlIGlzIGEgY29tcG9zaXRlIHRlc3QgY29uc2lzdGluZyBvZiBhIG51bWJlciBvZiBUZXN0Q2FzZXMuCgogICAgRm9yIHVzZSwgY3JlYXRlIGFuIGluc3RhbmNlIG9mIFRlc3RTdWl0ZSwgdGhlbiBhZGQgdGVzdCBjYXNlIGluc3RhbmNlcy4KICAgIFdoZW4gYWxsIHRlc3RzIGhhdmUgYmVlbiBhZGRlZCwgdGhlIHN1aXRlIGNhbiBiZSBwYXNzZWQgdG8gYSB0ZXN0CiAgICBydW5uZXIsIHN1Y2ggYXMgVGV4dFRlc3RSdW5uZXIuIEl0IHdpbGwgcnVuIHRoZSBpbmRpdmlkdWFsIHRlc3QgY2FzZXMKICAgIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IHdlcmUgYWRkZWQsIGFnZ3JlZ2F0aW5nIHRoZSByZXN1bHRzLiBXaGVuCiAgICBzdWJjbGFzc2luZywgZG8gbm90IGZvcmdldCB0byBjYWxsIHRoZSBiYXNlIGNsYXNzIGNvbnN0cnVjdG9yLgogICAgIiIiCgogICAgZGVmIHJ1bihzZWxmLCByZXN1bHQsIGRlYnVnPUZhbHNlKToKICAgICAgICB0b3BMZXZlbCA9IEZhbHNlCiAgICAgICAgaWYgZ2V0YXR0cihyZXN1bHQsICdfdGVzdFJ1bkVudGVyZWQnLCBGYWxzZSkgaXMgRmFsc2U6CiAgICAgICAgICAgIHJlc3VsdC5fdGVzdFJ1bkVudGVyZWQgPSB0b3BMZXZlbCA9IFRydWUKCiAgICAgICAgZm9yIHRlc3QgaW4gc2VsZjoKICAgICAgICAgICAgaWYgcmVzdWx0LnNob3VsZFN0b3A6CiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgaWYgX2lzbm90c3VpdGUodGVzdCk6CiAgICAgICAgICAgICAgICBzZWxmLl90ZWFyRG93blByZXZpb3VzQ2xhc3ModGVzdCwgcmVzdWx0KQogICAgICAgICAgICAgICAgc2VsZi5faGFuZGxlTW9kdWxlRml4dHVyZSh0ZXN0LCByZXN1bHQpCiAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVDbGFzc1NldFVwKHRlc3QsIHJlc3VsdCkKICAgICAgICAgICAgICAgIHJlc3VsdC5fcHJldmlvdXNUZXN0Q2xhc3MgPSB0ZXN0Ll9fY2xhc3NfXwoKICAgICAgICAgICAgICAgIGlmIChnZXRhdHRyKHRlc3QuX19jbGFzc19fLCAnX2NsYXNzU2V0dXBGYWlsZWQnLCBGYWxzZSkgb3IKICAgICAgICAgICAgICAgICAgICBnZXRhdHRyKHJlc3VsdCwgJ19tb2R1bGVTZXRVcEZhaWxlZCcsIEZhbHNlKSk6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIGlmIG5vdCBkZWJ1ZzoKICAgICAgICAgICAgICAgIHRlc3QocmVzdWx0KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdGVzdC5kZWJ1ZygpCgogICAgICAgIGlmIHRvcExldmVsOgogICAgICAgICAgICBzZWxmLl90ZWFyRG93blByZXZpb3VzQ2xhc3MoTm9uZSwgcmVzdWx0KQogICAgICAgICAgICBzZWxmLl9oYW5kbGVNb2R1bGVUZWFyRG93bihyZXN1bHQpCiAgICAgICAgICAgIHJlc3VsdC5fdGVzdFJ1bkVudGVyZWQgPSBGYWxzZQogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgZGVidWcoc2VsZik6CiAgICAgICAgIiIiUnVuIHRoZSB0ZXN0cyB3aXRob3V0IGNvbGxlY3RpbmcgZXJyb3JzIGluIGEgVGVzdFJlc3VsdCIiIgogICAgICAgIGRlYnVnID0gX0RlYnVnUmVzdWx0KCkKICAgICAgICBzZWxmLnJ1bihkZWJ1ZywgVHJ1ZSkKCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAgIGRlZiBfaGFuZGxlQ2xhc3NTZXRVcChzZWxmLCB0ZXN0LCByZXN1bHQpOgogICAgICAgIHByZXZpb3VzQ2xhc3MgPSBnZXRhdHRyKHJlc3VsdCwgJ19wcmV2aW91c1Rlc3RDbGFzcycsIE5vbmUpCiAgICAgICAgY3VycmVudENsYXNzID0gdGVzdC5fX2NsYXNzX18KICAgICAgICBpZiBjdXJyZW50Q2xhc3MgPT0gcHJldmlvdXNDbGFzczoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgcmVzdWx0Ll9tb2R1bGVTZXRVcEZhaWxlZDoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgZ2V0YXR0cihjdXJyZW50Q2xhc3MsICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRyeToKICAgICAgICAgICAgY3VycmVudENsYXNzLl9jbGFzc1NldHVwRmFpbGVkID0gRmFsc2UKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAjIHRlc3QgbWF5IGFjdHVhbGx5IGJlIGEgZnVuY3Rpb24KICAgICAgICAgICAgIyBzbyBpdHMgY2xhc3Mgd2lsbCBiZSBhIGJ1aWx0aW4tdHlwZQogICAgICAgICAgICBwYXNzCgogICAgICAgIHNldFVwQ2xhc3MgPSBnZXRhdHRyKGN1cnJlbnRDbGFzcywgJ3NldFVwQ2xhc3MnLCBOb25lKQogICAgICAgIGlmIHNldFVwQ2xhc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfc2V0dXBTdGRvdXQnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZXRVcENsYXNzKCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShyZXN1bHQsIF9EZWJ1Z1Jlc3VsdCk6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgICAgIGN1cnJlbnRDbGFzcy5fY2xhc3NTZXR1cEZhaWxlZCA9IFRydWUKICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IHV0aWwuc3RyY2xhc3MoY3VycmVudENsYXNzKQogICAgICAgICAgICAgICAgZXJyb3JOYW1lID0gJ3NldFVwQ2xhc3MgKCVzKScgJSBjbGFzc05hbWUKICAgICAgICAgICAgICAgIHNlbGYuX2FkZENsYXNzT3JNb2R1bGVMZXZlbEV4Y2VwdGlvbihyZXN1bHQsIGUsIGVycm9yTmFtZSkKICAgICAgICAgICAgZmluYWxseToKICAgICAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfcmVzdG9yZVN0ZG91dCcpCgogICAgZGVmIF9nZXRfcHJldmlvdXNfbW9kdWxlKHNlbGYsIHJlc3VsdCk6CiAgICAgICAgcHJldmlvdXNNb2R1bGUgPSBOb25lCiAgICAgICAgcHJldmlvdXNDbGFzcyA9IGdldGF0dHIocmVzdWx0LCAnX3ByZXZpb3VzVGVzdENsYXNzJywgTm9uZSkKICAgICAgICBpZiBwcmV2aW91c0NsYXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBwcmV2aW91c01vZHVsZSA9IHByZXZpb3VzQ2xhc3MuX19tb2R1bGVfXwogICAgICAgIHJldHVybiBwcmV2aW91c01vZHVsZQoKCiAgICBkZWYgX2hhbmRsZU1vZHVsZUZpeHR1cmUoc2VsZiwgdGVzdCwgcmVzdWx0KToKICAgICAgICBwcmV2aW91c01vZHVsZSA9IHNlbGYuX2dldF9wcmV2aW91c19tb2R1bGUocmVzdWx0KQogICAgICAgIGN1cnJlbnRNb2R1bGUgPSB0ZXN0Ll9fY2xhc3NfXy5fX21vZHVsZV9fCiAgICAgICAgaWYgY3VycmVudE1vZHVsZSA9PSBwcmV2aW91c01vZHVsZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYuX2hhbmRsZU1vZHVsZVRlYXJEb3duKHJlc3VsdCkKCgogICAgICAgIHJlc3VsdC5fbW9kdWxlU2V0VXBGYWlsZWQgPSBGYWxzZQogICAgICAgIHRyeToKICAgICAgICAgICAgbW9kdWxlID0gc3lzLm1vZHVsZXNbY3VycmVudE1vZHVsZV0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHNldFVwTW9kdWxlID0gZ2V0YXR0cihtb2R1bGUsICdzZXRVcE1vZHVsZScsIE5vbmUpCiAgICAgICAgaWYgc2V0VXBNb2R1bGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfc2V0dXBTdGRvdXQnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZXRVcE1vZHVsZSgpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocmVzdWx0LCBfRGVidWdSZXN1bHQpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICByZXN1bHQuX21vZHVsZVNldFVwRmFpbGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgZXJyb3JOYW1lID0gJ3NldFVwTW9kdWxlICglcyknICUgY3VycmVudE1vZHVsZQogICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NPck1vZHVsZUxldmVsRXhjZXB0aW9uKHJlc3VsdCwgZSwgZXJyb3JOYW1lKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgX2NhbGxfaWZfZXhpc3RzKHJlc3VsdCwgJ19yZXN0b3JlU3Rkb3V0JykKCiAgICBkZWYgX2FkZENsYXNzT3JNb2R1bGVMZXZlbEV4Y2VwdGlvbihzZWxmLCByZXN1bHQsIGV4Y2VwdGlvbiwgZXJyb3JOYW1lKToKICAgICAgICBlcnJvciA9IF9FcnJvckhvbGRlcihlcnJvck5hbWUpCiAgICAgICAgYWRkU2tpcCA9IGdldGF0dHIocmVzdWx0LCAnYWRkU2tpcCcsIE5vbmUpCiAgICAgICAgaWYgYWRkU2tpcCBpcyBub3QgTm9uZSBhbmQgaXNpbnN0YW5jZShleGNlcHRpb24sIGNhc2UuU2tpcFRlc3QpOgogICAgICAgICAgICBhZGRTa2lwKGVycm9yLCBzdHIoZXhjZXB0aW9uKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXN1bHQuYWRkRXJyb3IoZXJyb3IsIHN5cy5leGNfaW5mbygpKQoKICAgIGRlZiBfaGFuZGxlTW9kdWxlVGVhckRvd24oc2VsZiwgcmVzdWx0KToKICAgICAgICBwcmV2aW91c01vZHVsZSA9IHNlbGYuX2dldF9wcmV2aW91c19tb2R1bGUocmVzdWx0KQogICAgICAgIGlmIHByZXZpb3VzTW9kdWxlIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGlmIHJlc3VsdC5fbW9kdWxlU2V0VXBGYWlsZWQ6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW3ByZXZpb3VzTW9kdWxlXQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRlYXJEb3duTW9kdWxlID0gZ2V0YXR0cihtb2R1bGUsICd0ZWFyRG93bk1vZHVsZScsIE5vbmUpCiAgICAgICAgaWYgdGVhckRvd25Nb2R1bGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIF9jYWxsX2lmX2V4aXN0cyhyZXN1bHQsICdfc2V0dXBTdGRvdXQnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB0ZWFyRG93bk1vZHVsZSgpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocmVzdWx0LCBfRGVidWdSZXN1bHQpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBlcnJvck5hbWUgPSAndGVhckRvd25Nb2R1bGUgKCVzKScgJSBwcmV2aW91c01vZHVsZQogICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NPck1vZHVsZUxldmVsRXhjZXB0aW9uKHJlc3VsdCwgZSwgZXJyb3JOYW1lKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgX2NhbGxfaWZfZXhpc3RzKHJlc3VsdCwgJ19yZXN0b3JlU3Rkb3V0JykKCiAgICBkZWYgX3RlYXJEb3duUHJldmlvdXNDbGFzcyhzZWxmLCB0ZXN0LCByZXN1bHQpOgogICAgICAgIHByZXZpb3VzQ2xhc3MgPSBnZXRhdHRyKHJlc3VsdCwgJ19wcmV2aW91c1Rlc3RDbGFzcycsIE5vbmUpCiAgICAgICAgY3VycmVudENsYXNzID0gdGVzdC5fX2NsYXNzX18KICAgICAgICBpZiBjdXJyZW50Q2xhc3MgPT0gcHJldmlvdXNDbGFzczoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgZ2V0YXR0cihwcmV2aW91c0NsYXNzLCAnX2NsYXNzU2V0dXBGYWlsZWQnLCBGYWxzZSk6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGlmIGdldGF0dHIocmVzdWx0LCAnX21vZHVsZVNldFVwRmFpbGVkJywgRmFsc2UpOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBpZiBnZXRhdHRyKHByZXZpb3VzQ2xhc3MsICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRlYXJEb3duQ2xhc3MgPSBnZXRhdHRyKHByZXZpb3VzQ2xhc3MsICd0ZWFyRG93bkNsYXNzJywgTm9uZSkKICAgICAgICBpZiB0ZWFyRG93bkNsYXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBfY2FsbF9pZl9leGlzdHMocmVzdWx0LCAnX3NldHVwU3Rkb3V0JykKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdGVhckRvd25DbGFzcygpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocmVzdWx0LCBfRGVidWdSZXN1bHQpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSB1dGlsLnN0cmNsYXNzKHByZXZpb3VzQ2xhc3MpCiAgICAgICAgICAgICAgICBlcnJvck5hbWUgPSAndGVhckRvd25DbGFzcyAoJXMpJyAlIGNsYXNzTmFtZQogICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NPck1vZHVsZUxldmVsRXhjZXB0aW9uKHJlc3VsdCwgZSwgZXJyb3JOYW1lKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgX2NhbGxfaWZfZXhpc3RzKHJlc3VsdCwgJ19yZXN0b3JlU3Rkb3V0JykKCgpjbGFzcyBfRXJyb3JIb2xkZXIob2JqZWN0KToKICAgICIiIgogICAgUGxhY2Vob2xkZXIgZm9yIGEgVGVzdENhc2UgaW5zaWRlIGEgcmVzdWx0LiBBcyBmYXIgYXMgYSBUZXN0UmVzdWx0CiAgICBpcyBjb25jZXJuZWQsIHRoaXMgbG9va3MgZXhhY3RseSBsaWtlIGEgdW5pdCB0ZXN0LiBVc2VkIHRvIGluc2VydAogICAgYXJiaXRyYXJ5IGVycm9ycyBpbnRvIGEgdGVzdCBzdWl0ZSBydW4uCiAgICAiIiIKICAgICMgSW5zcGlyZWQgYnkgdGhlIEVycm9ySG9sZGVyIGZyb20gVHdpc3RlZDoKICAgICMgaHR0cDovL3R3aXN0ZWRtYXRyaXguY29tL3RyYWMvYnJvd3Nlci90cnVuay90d2lzdGVkL3RyaWFsL3J1bm5lci5weQoKICAgICMgYXR0cmlidXRlIHVzZWQgYnkgVGVzdFJlc3VsdC5fZXhjX2luZm9fdG9fc3RyaW5nCiAgICBmYWlsdXJlRXhjZXB0aW9uID0gTm9uZQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkZXNjcmlwdGlvbik6CiAgICAgICAgc2VsZi5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uCgogICAgZGVmIGlkKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmRlc2NyaXB0aW9uCgogICAgZGVmIHNob3J0RGVzY3JpcHRpb24oc2VsZik6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICI8RXJyb3JIb2xkZXIgZGVzY3JpcHRpb249JXI+IiAlIChzZWxmLmRlc2NyaXB0aW9uLCkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5pZCgpCgogICAgZGVmIHJ1bihzZWxmLCByZXN1bHQpOgogICAgICAgICMgY291bGQgY2FsbCByZXN1bHQuYWRkRXJyb3IoLi4uKSAtIGJ1dCB0aGlzIHRlc3QtbGlrZSBvYmplY3QKICAgICAgICAjIHNob3VsZG4ndCBiZSBydW4gYW55d2F5CiAgICAgICAgcGFzcwoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCByZXN1bHQpOgogICAgICAgIHJldHVybiBzZWxmLnJ1bihyZXN1bHQpCgogICAgZGVmIGNvdW50VGVzdENhc2VzKHNlbGYpOgogICAgICAgIHJldHVybiAwCgpkZWYgX2lzbm90c3VpdGUodGVzdCk6CiAgICAiQSBjcnVkZSB3YXkgdG8gdGVsbCBhcGFydCB0ZXN0Y2FzZXMgYW5kIHN1aXRlcyB3aXRoIGR1Y2stdHlwaW5nIgogICAgdHJ5OgogICAgICAgIGl0ZXIodGVzdCkKICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQoKCmNsYXNzIF9EZWJ1Z1Jlc3VsdChvYmplY3QpOgogICAgIlVzZWQgYnkgdGhlIFRlc3RTdWl0ZSB0byBob2xkIHByZXZpb3VzIGNsYXNzIHdoZW4gcnVubmluZyBpbiBkZWJ1Zy4iCiAgICBfcHJldmlvdXNUZXN0Q2xhc3MgPSBOb25lCiAgICBfbW9kdWxlU2V0VXBGYWlsZWQgPSBGYWxzZQogICAgc2hvdWxkU3RvcCA9IEZhbHNlCg==',
'/Lib/lib_migration/unittest/runner.py':'IiIiUnVubmluZyB0ZXN0cyIiIgoKaW1wb3J0IHN5cwppbXBvcnQgdGltZQppbXBvcnQgd2FybmluZ3MKCmZyb20gLiBpbXBvcnQgcmVzdWx0CmZyb20gLnNpZ25hbHMgaW1wb3J0IHJlZ2lzdGVyUmVzdWx0CgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKCmNsYXNzIF9Xcml0ZWxuRGVjb3JhdG9yKG9iamVjdCk6CiAgICAiIiJVc2VkIHRvIGRlY29yYXRlIGZpbGUtbGlrZSBvYmplY3RzIHdpdGggYSBoYW5keSAnd3JpdGVsbicgbWV0aG9kIiIiCiAgICBkZWYgX19pbml0X18oc2VsZixzdHJlYW0pOgogICAgICAgIHNlbGYuc3RyZWFtID0gc3RyZWFtCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHIpOgogICAgICAgIGlmIGF0dHIgaW4gKCdzdHJlYW0nLCAnX19nZXRzdGF0ZV9fJyk6CiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKGF0dHIpCiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5zdHJlYW0sYXR0cikKCiAgICBkZWYgd3JpdGVsbihzZWxmLCBhcmc9Tm9uZSk6CiAgICAgICAgaWYgYXJnOgogICAgICAgICAgICBzZWxmLndyaXRlKGFyZykKICAgICAgICBzZWxmLndyaXRlKCdcbicpICMgdGV4dC1tb2RlIHN0cmVhbXMgdHJhbnNsYXRlIHRvIFxyXG4gaWYgbmVlZGVkCgoKY2xhc3MgVGV4dFRlc3RSZXN1bHQocmVzdWx0LlRlc3RSZXN1bHQpOgogICAgIiIiQSB0ZXN0IHJlc3VsdCBjbGFzcyB0aGF0IGNhbiBwcmludCBmb3JtYXR0ZWQgdGV4dCByZXN1bHRzIHRvIGEgc3RyZWFtLgoKICAgIFVzZWQgYnkgVGV4dFRlc3RSdW5uZXIuCiAgICAiIiIKICAgIHNlcGFyYXRvcjEgPSAnPScgKiA3MAogICAgc2VwYXJhdG9yMiA9ICctJyAqIDcwCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbSwgZGVzY3JpcHRpb25zLCB2ZXJib3NpdHkpOgogICAgICAgIHN1cGVyKFRleHRUZXN0UmVzdWx0LCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5zdHJlYW0gPSBzdHJlYW0KICAgICAgICBzZWxmLnNob3dBbGwgPSB2ZXJib3NpdHkgPiAxCiAgICAgICAgc2VsZi5kb3RzID0gdmVyYm9zaXR5ID09IDEKICAgICAgICBzZWxmLmRlc2NyaXB0aW9ucyA9IGRlc2NyaXB0aW9ucwoKICAgIGRlZiBnZXREZXNjcmlwdGlvbihzZWxmLCB0ZXN0KToKICAgICAgICBkb2NfZmlyc3RfbGluZSA9IHRlc3Quc2hvcnREZXNjcmlwdGlvbigpCiAgICAgICAgaWYgc2VsZi5kZXNjcmlwdGlvbnMgYW5kIGRvY19maXJzdF9saW5lOgogICAgICAgICAgICByZXR1cm4gJ1xuJy5qb2luKChzdHIodGVzdCksIGRvY19maXJzdF9saW5lKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc3RyKHRlc3QpCgogICAgZGVmIHN0YXJ0VGVzdChzZWxmLCB0ZXN0KToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuc3RhcnRUZXN0KHRlc3QpCiAgICAgICAgaWYgc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZShzZWxmLmdldERlc2NyaXB0aW9uKHRlc3QpKQogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZSgiIC4uLiAiKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZFN1Y2Nlc3Moc2VsZiwgdGVzdCk6CiAgICAgICAgc3VwZXIoVGV4dFRlc3RSZXN1bHQsIHNlbGYpLmFkZFN1Y2Nlc3ModGVzdCkKICAgICAgICBpZiBzZWxmLnNob3dBbGw6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oIm9rIikKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoJy4nKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZEVycm9yKHNlbGYsIHRlc3QsIGVycik6CiAgICAgICAgc3VwZXIoVGV4dFRlc3RSZXN1bHQsIHNlbGYpLmFkZEVycm9yKHRlc3QsIGVycikKICAgICAgICBpZiBzZWxmLnNob3dBbGw6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oIkVSUk9SIikKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoJ0UnKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZEZhaWx1cmUoc2VsZiwgdGVzdCwgZXJyKToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuYWRkRmFpbHVyZSh0ZXN0LCBlcnIpCiAgICAgICAgaWYgc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCJGQUlMIikKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoJ0YnKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZFNraXAoc2VsZiwgdGVzdCwgcmVhc29uKToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuYWRkU2tpcCh0ZXN0LCByZWFzb24pCiAgICAgICAgaWYgc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCJza2lwcGVkIHswIXJ9Ii5mb3JtYXQocmVhc29uKSkKICAgICAgICBlbGlmIHNlbGYuZG90czoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoInMiKQogICAgICAgICAgICBzZWxmLnN0cmVhbS5mbHVzaCgpCgogICAgZGVmIGFkZEV4cGVjdGVkRmFpbHVyZShzZWxmLCB0ZXN0LCBlcnIpOgogICAgICAgIHN1cGVyKFRleHRUZXN0UmVzdWx0LCBzZWxmKS5hZGRFeHBlY3RlZEZhaWx1cmUodGVzdCwgZXJyKQogICAgICAgIGlmIHNlbGYuc2hvd0FsbDoKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbigiZXhwZWN0ZWQgZmFpbHVyZSIpCiAgICAgICAgZWxpZiBzZWxmLmRvdHM6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlKCJ4IikKICAgICAgICAgICAgc2VsZi5zdHJlYW0uZmx1c2goKQoKICAgIGRlZiBhZGRVbmV4cGVjdGVkU3VjY2VzcyhzZWxmLCB0ZXN0KToKICAgICAgICBzdXBlcihUZXh0VGVzdFJlc3VsdCwgc2VsZikuYWRkVW5leHBlY3RlZFN1Y2Nlc3ModGVzdCkKICAgICAgICBpZiBzZWxmLnNob3dBbGw6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oInVuZXhwZWN0ZWQgc3VjY2VzcyIpCiAgICAgICAgZWxpZiBzZWxmLmRvdHM6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlKCJ1IikKICAgICAgICAgICAgc2VsZi5zdHJlYW0uZmx1c2goKQoKICAgIGRlZiBwcmludEVycm9ycyhzZWxmKToKICAgICAgICBpZiBzZWxmLmRvdHMgb3Igc2VsZi5zaG93QWxsOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCkKICAgICAgICBzZWxmLnByaW50RXJyb3JMaXN0KCdFUlJPUicsIHNlbGYuZXJyb3JzKQogICAgICAgIHNlbGYucHJpbnRFcnJvckxpc3QoJ0ZBSUwnLCBzZWxmLmZhaWx1cmVzKQoKICAgIGRlZiBwcmludEVycm9yTGlzdChzZWxmLCBmbGF2b3VyLCBlcnJvcnMpOgogICAgICAgIGZvciB0ZXN0LCBlcnIgaW4gZXJyb3JzOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKHNlbGYuc2VwYXJhdG9yMSkKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbigiJXM6ICVzIiAlIChmbGF2b3VyLHNlbGYuZ2V0RGVzY3JpcHRpb24odGVzdCkpKQogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKHNlbGYuc2VwYXJhdG9yMikKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbigiJXMiICUgZXJyKQoKCmNsYXNzIFRleHRUZXN0UnVubmVyKG9iamVjdCk6CiAgICAiIiJBIHRlc3QgcnVubmVyIGNsYXNzIHRoYXQgZGlzcGxheXMgcmVzdWx0cyBpbiB0ZXh0dWFsIGZvcm0uCgogICAgSXQgcHJpbnRzIG91dCB0aGUgbmFtZXMgb2YgdGVzdHMgYXMgdGhleSBhcmUgcnVuLCBlcnJvcnMgYXMgdGhleQogICAgb2NjdXIsIGFuZCBhIHN1bW1hcnkgb2YgdGhlIHJlc3VsdHMgYXQgdGhlIGVuZCBvZiB0aGUgdGVzdCBydW4uCiAgICAiIiIKICAgIHJlc3VsdGNsYXNzID0gVGV4dFRlc3RSZXN1bHQKCiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RyZWFtPU5vbmUsIGRlc2NyaXB0aW9ucz1UcnVlLCB2ZXJib3NpdHk9MSwKICAgICAgICAgICAgICAgICBmYWlsZmFzdD1GYWxzZSwgYnVmZmVyPUZhbHNlLCByZXN1bHRjbGFzcz1Ob25lLCB3YXJuaW5ncz1Ob25lKToKICAgICAgICBpZiBzdHJlYW0gaXMgTm9uZToKICAgICAgICAgICAgc3RyZWFtID0gc3lzLnN0ZGVycgogICAgICAgIHNlbGYuc3RyZWFtID0gX1dyaXRlbG5EZWNvcmF0b3Ioc3RyZWFtKQogICAgICAgIHNlbGYuZGVzY3JpcHRpb25zID0gZGVzY3JpcHRpb25zCiAgICAgICAgc2VsZi52ZXJib3NpdHkgPSB2ZXJib3NpdHkKICAgICAgICBzZWxmLmZhaWxmYXN0ID0gZmFpbGZhc3QKICAgICAgICBzZWxmLmJ1ZmZlciA9IGJ1ZmZlcgogICAgICAgIHNlbGYud2FybmluZ3MgPSB3YXJuaW5ncwogICAgICAgIGlmIHJlc3VsdGNsYXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLnJlc3VsdGNsYXNzID0gcmVzdWx0Y2xhc3MKCiAgICBkZWYgX21ha2VSZXN1bHQoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucmVzdWx0Y2xhc3Moc2VsZi5zdHJlYW0sIHNlbGYuZGVzY3JpcHRpb25zLCBzZWxmLnZlcmJvc2l0eSkKCiAgICBkZWYgcnVuKHNlbGYsIHRlc3QpOgogICAgICAgICJSdW4gdGhlIGdpdmVuIHRlc3QgY2FzZSBvciB0ZXN0IHN1aXRlLiIKICAgICAgICByZXN1bHQgPSBzZWxmLl9tYWtlUmVzdWx0KCkKICAgICAgICByZWdpc3RlclJlc3VsdChyZXN1bHQpCiAgICAgICAgcmVzdWx0LmZhaWxmYXN0ID0gc2VsZi5mYWlsZmFzdAogICAgICAgIHJlc3VsdC5idWZmZXIgPSBzZWxmLmJ1ZmZlcgogICAgICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKToKICAgICAgICAgICAgaWYgc2VsZi53YXJuaW5nczoKICAgICAgICAgICAgICAgICMgaWYgc2VsZi53YXJuaW5ncyBpcyBzZXQsIHVzZSBpdCB0byBmaWx0ZXIgYWxsIHRoZSB3YXJuaW5ncwogICAgICAgICAgICAgICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKHNlbGYud2FybmluZ3MpCiAgICAgICAgICAgICAgICAjIGlmIHRoZSBmaWx0ZXIgaXMgJ2RlZmF1bHQnIG9yICdhbHdheXMnLCBzcGVjaWFsLWNhc2UgdGhlCiAgICAgICAgICAgICAgICAjIHdhcm5pbmdzIGZyb20gdGhlIGRlcHJlY2F0ZWQgdW5pdHRlc3QgbWV0aG9kcyB0byBzaG93IHRoZW0KICAgICAgICAgICAgICAgICMgbm8gbW9yZSB0aGFuIG9uY2UgcGVyIG1vZHVsZSwgYmVjYXVzZSB0aGV5IGNhbiBiZSBmYWlybHkKICAgICAgICAgICAgICAgICMgbm9pc3kuICBUaGUgLVdkIGFuZCAtV2EgZmxhZ3MgY2FuIGJlIHVzZWQgdG8gYnlwYXNzIHRoaXMKICAgICAgICAgICAgICAgICMgb25seSB3aGVuIHNlbGYud2FybmluZ3MgaXMgTm9uZS4KICAgICAgICAgICAgICAgIGlmIHNlbGYud2FybmluZ3MgaW4gWydkZWZhdWx0JywgJ2Fsd2F5cyddOgogICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzLmZpbHRlcndhcm5pbmdzKCdtb2R1bGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk9RGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT0nUGxlYXNlIHVzZSBhc3NlcnRcdysgaW5zdGVhZC4nKQogICAgICAgICAgICBzdGFydFRpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgICAgICBzdGFydFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0YXJ0VGVzdFJ1bicsIE5vbmUpCiAgICAgICAgICAgIGlmIHN0YXJ0VGVzdFJ1biBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHN0YXJ0VGVzdFJ1bigpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRlc3QocmVzdWx0KQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgc3RvcFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0b3BUZXN0UnVuJywgTm9uZSkKICAgICAgICAgICAgICAgIGlmIHN0b3BUZXN0UnVuIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHN0b3BUZXN0UnVuKCkKICAgICAgICAgICAgc3RvcFRpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgIHRpbWVUYWtlbiA9IHN0b3BUaW1lIC0gc3RhcnRUaW1lCiAgICAgICAgcmVzdWx0LnByaW50RXJyb3JzKCkKICAgICAgICBpZiBoYXNhdHRyKHJlc3VsdCwgJ3NlcGFyYXRvcjInKToKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGVsbihyZXN1bHQuc2VwYXJhdG9yMikKICAgICAgICBydW4gPSByZXN1bHQudGVzdHNSdW4KICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxuKCJSYW4gJWQgdGVzdCVzIGluICUuM2ZzIiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocnVuLCBydW4gIT0gMSBhbmQgInMiIG9yICIiLCB0aW1lVGFrZW4pKQogICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oKQoKICAgICAgICBleHBlY3RlZEZhaWxzID0gdW5leHBlY3RlZFN1Y2Nlc3NlcyA9IHNraXBwZWQgPSAwCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXN1bHRzID0gbWFwKGxlbiwgKHJlc3VsdC5leHBlY3RlZEZhaWx1cmVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC51bmV4cGVjdGVkU3VjY2Vzc2VzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5za2lwcGVkKSkKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBlbHNlOgogICAgICAgICAgICBleHBlY3RlZEZhaWxzLCB1bmV4cGVjdGVkU3VjY2Vzc2VzLCBza2lwcGVkID0gcmVzdWx0cwoKICAgICAgICBpbmZvcyA9IFtdCiAgICAgICAgaWYgbm90IHJlc3VsdC53YXNTdWNjZXNzZnVsKCk6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlKCJGQUlMRUQiKQogICAgICAgICAgICBmYWlsZWQsIGVycm9yZWQgPSBsZW4ocmVzdWx0LmZhaWx1cmVzKSwgbGVuKHJlc3VsdC5lcnJvcnMpCiAgICAgICAgICAgIGlmIGZhaWxlZDoKICAgICAgICAgICAgICAgIGluZm9zLmFwcGVuZCgiZmFpbHVyZXM9JWQiICUgZmFpbGVkKQogICAgICAgICAgICBpZiBlcnJvcmVkOgogICAgICAgICAgICAgICAgaW5mb3MuYXBwZW5kKCJlcnJvcnM9JWQiICUgZXJyb3JlZCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnN0cmVhbS53cml0ZSgiT0siKQogICAgICAgIGlmIHNraXBwZWQ6CiAgICAgICAgICAgIGluZm9zLmFwcGVuZCgic2tpcHBlZD0lZCIgJSBza2lwcGVkKQogICAgICAgIGlmIGV4cGVjdGVkRmFpbHM6CiAgICAgICAgICAgIGluZm9zLmFwcGVuZCgiZXhwZWN0ZWQgZmFpbHVyZXM9JWQiICUgZXhwZWN0ZWRGYWlscykKICAgICAgICBpZiB1bmV4cGVjdGVkU3VjY2Vzc2VzOgogICAgICAgICAgICBpbmZvcy5hcHBlbmQoInVuZXhwZWN0ZWQgc3VjY2Vzc2VzPSVkIiAlIHVuZXhwZWN0ZWRTdWNjZXNzZXMpCiAgICAgICAgaWYgaW5mb3M6CiAgICAgICAgICAgIHNlbGYuc3RyZWFtLndyaXRlbG4oIiAoJXMpIiAlICgiLCAiLmpvaW4oaW5mb3MpLCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUoIlxuIikKICAgICAgICByZXR1cm4gcmVzdWx0Cg==',
'/Lib/lib_migration/unittest/result.py':'IiIiVGVzdCByZXN1bHQgb2JqZWN0IiIiCgppbXBvcnQgb3MKaW1wb3J0IF9weWlvIGFzIGlvICAgCmltcG9ydCBzeXMKaW1wb3J0IHRyYWNlYmFjawoKI2hlbHAgbWUhCiNmcm9tIC4gaW1wb3J0IHV0aWwKZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHdyYXBzCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKZGVmIGZhaWxmYXN0KG1ldGhvZCk6CiAgICAjZml4bWUgYnJ5dGhvbgogICAgI0B3cmFwcyhtZXRob2QpCiAgICBkZWYgaW5uZXIoc2VsZiwgKmFyZ3MsICoqa3cpOgogICAgICAgIGlmIGdldGF0dHIoc2VsZiwgJ2ZhaWxmYXN0JywgRmFsc2UpOgogICAgICAgICAgICBzZWxmLnN0b3AoKQogICAgICAgIHJldHVybiBtZXRob2Qoc2VsZiwgKmFyZ3MsICoqa3cpCiAgICByZXR1cm4gaW5uZXIKClNURE9VVF9MSU5FID0gJ1xuU3Rkb3V0OlxuJXMnClNUREVSUl9MSU5FID0gJ1xuU3RkZXJyOlxuJXMnCgoKY2xhc3MgVGVzdFJlc3VsdChvYmplY3QpOgogICAgIiIiSG9sZGVyIGZvciB0ZXN0IHJlc3VsdCBpbmZvcm1hdGlvbi4KCiAgICBUZXN0IHJlc3VsdHMgYXJlIGF1dG9tYXRpY2FsbHkgbWFuYWdlZCBieSB0aGUgVGVzdENhc2UgYW5kIFRlc3RTdWl0ZQogICAgY2xhc3NlcywgYW5kIGRvIG5vdCBuZWVkIHRvIGJlIGV4cGxpY2l0bHkgbWFuaXB1bGF0ZWQgYnkgd3JpdGVycyBvZiB0ZXN0cy4KCiAgICBFYWNoIGluc3RhbmNlIGhvbGRzIHRoZSB0b3RhbCBudW1iZXIgb2YgdGVzdHMgcnVuLCBhbmQgY29sbGVjdGlvbnMgb2YKICAgIGZhaWx1cmVzIGFuZCBlcnJvcnMgdGhhdCBvY2N1cnJlZCBhbW9uZyB0aG9zZSB0ZXN0IHJ1bnMuIFRoZSBjb2xsZWN0aW9ucwogICAgY29udGFpbiB0dXBsZXMgb2YgKHRlc3RjYXNlLCBleGNlcHRpb25pbmZvKSwgd2hlcmUgZXhjZXB0aW9uaW5mbyBpcyB0aGUKICAgIGZvcm1hdHRlZCB0cmFjZWJhY2sgb2YgdGhlIGVycm9yIHRoYXQgb2NjdXJyZWQuCiAgICAiIiIKICAgIF9wcmV2aW91c1Rlc3RDbGFzcyA9IE5vbmUKICAgIF90ZXN0UnVuRW50ZXJlZCA9IEZhbHNlCiAgICBfbW9kdWxlU2V0VXBGYWlsZWQgPSBGYWxzZQogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbT1Ob25lLCBkZXNjcmlwdGlvbnM9Tm9uZSwgdmVyYm9zaXR5PU5vbmUpOgogICAgICAgIHNlbGYuZmFpbGZhc3QgPSBGYWxzZQogICAgICAgIHNlbGYuZmFpbHVyZXMgPSBbXQogICAgICAgIHNlbGYuZXJyb3JzID0gW10KICAgICAgICBzZWxmLnRlc3RzUnVuID0gMAogICAgICAgIHNlbGYuc2tpcHBlZCA9IFtdCiAgICAgICAgc2VsZi5leHBlY3RlZEZhaWx1cmVzID0gW10KICAgICAgICBzZWxmLnVuZXhwZWN0ZWRTdWNjZXNzZXMgPSBbXQogICAgICAgIHNlbGYuc2hvdWxkU3RvcCA9IEZhbHNlCiAgICAgICAgc2VsZi5idWZmZXIgPSBGYWxzZQogICAgICAgIHNlbGYuX3N0ZG91dF9idWZmZXIgPSBOb25lCiAgICAgICAgc2VsZi5fc3RkZXJyX2J1ZmZlciA9IE5vbmUKICAgICAgICBzZWxmLl9vcmlnaW5hbF9zdGRvdXQgPSBzeXMuc3Rkb3V0CiAgICAgICAgc2VsZi5fb3JpZ2luYWxfc3RkZXJyID0gc3lzLnN0ZGVycgogICAgICAgIHNlbGYuX21pcnJvck91dHB1dCA9IEZhbHNlCgogICAgZGVmIHByaW50RXJyb3JzKHNlbGYpOgogICAgICAgICJDYWxsZWQgYnkgVGVzdFJ1bm5lciBhZnRlciB0ZXN0IHJ1biIKCiAgICBkZWYgc3RhcnRUZXN0KHNlbGYsIHRlc3QpOgogICAgICAgICJDYWxsZWQgd2hlbiB0aGUgZ2l2ZW4gdGVzdCBpcyBhYm91dCB0byBiZSBydW4iCiAgICAgICAgc2VsZi50ZXN0c1J1biArPSAxCiAgICAgICAgc2VsZi5fbWlycm9yT3V0cHV0ID0gRmFsc2UKICAgICAgICBzZWxmLl9zZXR1cFN0ZG91dCgpCgogICAgZGVmIF9zZXR1cFN0ZG91dChzZWxmKToKICAgICAgICBpZiBzZWxmLmJ1ZmZlcjoKICAgICAgICAgICAgaWYgc2VsZi5fc3RkZXJyX2J1ZmZlciBpcyBOb25lOgogICAgICAgICAgICAgICAgc2VsZi5fc3RkZXJyX2J1ZmZlciA9IGlvLlN0cmluZ0lPKCkKICAgICAgICAgICAgICAgIHNlbGYuX3N0ZG91dF9idWZmZXIgPSBpby5TdHJpbmdJTygpCiAgICAgICAgICAgIHN5cy5zdGRvdXQgPSBzZWxmLl9zdGRvdXRfYnVmZmVyCiAgICAgICAgICAgIHN5cy5zdGRlcnIgPSBzZWxmLl9zdGRlcnJfYnVmZmVyCgogICAgZGVmIHN0YXJ0VGVzdFJ1bihzZWxmKToKICAgICAgICAiIiJDYWxsZWQgb25jZSBiZWZvcmUgYW55IHRlc3RzIGFyZSBleGVjdXRlZC4KCiAgICAgICAgU2VlIHN0YXJ0VGVzdCBmb3IgYSBtZXRob2QgY2FsbGVkIGJlZm9yZSBlYWNoIHRlc3QuCiAgICAgICAgIiIiCgogICAgZGVmIHN0b3BUZXN0KHNlbGYsIHRlc3QpOgogICAgICAgICIiIkNhbGxlZCB3aGVuIHRoZSBnaXZlbiB0ZXN0IGhhcyBiZWVuIHJ1biIiIgogICAgICAgIHNlbGYuX3Jlc3RvcmVTdGRvdXQoKQogICAgICAgIHNlbGYuX21pcnJvck91dHB1dCA9IEZhbHNlCgogICAgZGVmIF9yZXN0b3JlU3Rkb3V0KHNlbGYpOgogICAgICAgIGlmIHNlbGYuYnVmZmVyOgogICAgICAgICAgICBpZiBzZWxmLl9taXJyb3JPdXRwdXQ6CiAgICAgICAgICAgICAgICBvdXRwdXQgPSBzeXMuc3Rkb3V0LmdldHZhbHVlKCkKICAgICAgICAgICAgICAgIGVycm9yID0gc3lzLnN0ZGVyci5nZXR2YWx1ZSgpCiAgICAgICAgICAgICAgICBpZiBvdXRwdXQ6CiAgICAgICAgICAgICAgICAgICAgaWYgbm90IG91dHB1dC5lbmRzd2l0aCgnXG4nKToKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9ICdcbicKICAgICAgICAgICAgICAgICAgICBzZWxmLl9vcmlnaW5hbF9zdGRvdXQud3JpdGUoU1RET1VUX0xJTkUgJSBvdXRwdXQpCiAgICAgICAgICAgICAgICBpZiBlcnJvcjoKICAgICAgICAgICAgICAgICAgICBpZiBub3QgZXJyb3IuZW5kc3dpdGgoJ1xuJyk6CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yICs9ICdcbicKICAgICAgICAgICAgICAgICAgICBzZWxmLl9vcmlnaW5hbF9zdGRlcnIud3JpdGUoU1RERVJSX0xJTkUgJSBlcnJvcikKCiAgICAgICAgICAgIHN5cy5zdGRvdXQgPSBzZWxmLl9vcmlnaW5hbF9zdGRvdXQKICAgICAgICAgICAgc3lzLnN0ZGVyciA9IHNlbGYuX29yaWdpbmFsX3N0ZGVycgogICAgICAgICAgICBzZWxmLl9zdGRvdXRfYnVmZmVyLnNlZWsoMCkKICAgICAgICAgICAgc2VsZi5fc3Rkb3V0X2J1ZmZlci50cnVuY2F0ZSgpCiAgICAgICAgICAgIHNlbGYuX3N0ZGVycl9idWZmZXIuc2VlaygwKQogICAgICAgICAgICBzZWxmLl9zdGRlcnJfYnVmZmVyLnRydW5jYXRlKCkKCiAgICBkZWYgc3RvcFRlc3RSdW4oc2VsZik6CiAgICAgICAgIiIiQ2FsbGVkIG9uY2UgYWZ0ZXIgYWxsIHRlc3RzIGFyZSBleGVjdXRlZC4KCiAgICAgICAgU2VlIHN0b3BUZXN0IGZvciBhIG1ldGhvZCBjYWxsZWQgYWZ0ZXIgZWFjaCB0ZXN0LgogICAgICAgICIiIgoKICAgIEBmYWlsZmFzdAogICAgZGVmIGFkZEVycm9yKHNlbGYsIHRlc3QsIGVycik6CiAgICAgICAgIiIiQ2FsbGVkIHdoZW4gYW4gZXJyb3IgaGFzIG9jY3VycmVkLiAnZXJyJyBpcyBhIHR1cGxlIG9mIHZhbHVlcyBhcwogICAgICAgIHJldHVybmVkIGJ5IHN5cy5leGNfaW5mbygpLgogICAgICAgICIiIgogICAgICAgIHNlbGYuZXJyb3JzLmFwcGVuZCgodGVzdCwgc2VsZi5fZXhjX2luZm9fdG9fc3RyaW5nKGVyciwgdGVzdCkpKQogICAgICAgIHNlbGYuX21pcnJvck91dHB1dCA9IFRydWUKCiAgICBAZmFpbGZhc3QKICAgIGRlZiBhZGRGYWlsdXJlKHNlbGYsIHRlc3QsIGVycik6CiAgICAgICAgIiIiQ2FsbGVkIHdoZW4gYW4gZXJyb3IgaGFzIG9jY3VycmVkLiAnZXJyJyBpcyBhIHR1cGxlIG9mIHZhbHVlcyBhcwogICAgICAgIHJldHVybmVkIGJ5IHN5cy5leGNfaW5mbygpLiIiIgogICAgICAgIHNlbGYuZmFpbHVyZXMuYXBwZW5kKCh0ZXN0LCBzZWxmLl9leGNfaW5mb190b19zdHJpbmcoZXJyLCB0ZXN0KSkpCiAgICAgICAgc2VsZi5fbWlycm9yT3V0cHV0ID0gVHJ1ZQoKICAgIGRlZiBhZGRTdWNjZXNzKHNlbGYsIHRlc3QpOgogICAgICAgICJDYWxsZWQgd2hlbiBhIHRlc3QgaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkiCiAgICAgICAgcGFzcwoKICAgIGRlZiBhZGRTa2lwKHNlbGYsIHRlc3QsIHJlYXNvbik6CiAgICAgICAgIiIiQ2FsbGVkIHdoZW4gYSB0ZXN0IGlzIHNraXBwZWQuIiIiCiAgICAgICAgc2VsZi5za2lwcGVkLmFwcGVuZCgodGVzdCwgcmVhc29uKSkKCiAgICBkZWYgYWRkRXhwZWN0ZWRGYWlsdXJlKHNlbGYsIHRlc3QsIGVycik6CiAgICAgICAgIiIiQ2FsbGVkIHdoZW4gYW4gZXhwZWN0ZWQgZmFpbHVyZS9lcnJvciBvY2N1cmVkLiIiIgogICAgICAgIHNlbGYuZXhwZWN0ZWRGYWlsdXJlcy5hcHBlbmQoCiAgICAgICAgICAgICh0ZXN0LCBzZWxmLl9leGNfaW5mb190b19zdHJpbmcoZXJyLCB0ZXN0KSkpCgogICAgQGZhaWxmYXN0CiAgICBkZWYgYWRkVW5leHBlY3RlZFN1Y2Nlc3Moc2VsZiwgdGVzdCk6CiAgICAgICAgIiIiQ2FsbGVkIHdoZW4gYSB0ZXN0IHdhcyBleHBlY3RlZCB0byBmYWlsLCBidXQgc3VjY2VlZC4iIiIKICAgICAgICBzZWxmLnVuZXhwZWN0ZWRTdWNjZXNzZXMuYXBwZW5kKHRlc3QpCgogICAgZGVmIHdhc1N1Y2Nlc3NmdWwoc2VsZik6CiAgICAgICAgIlRlbGxzIHdoZXRoZXIgb3Igbm90IHRoaXMgcmVzdWx0IHdhcyBhIHN1Y2Nlc3MiCiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmZhaWx1cmVzKSA9PSBsZW4oc2VsZi5lcnJvcnMpID09IDAKCiAgICBkZWYgc3RvcChzZWxmKToKICAgICAgICAiSW5kaWNhdGVzIHRoYXQgdGhlIHRlc3RzIHNob3VsZCBiZSBhYm9ydGVkIgogICAgICAgIHNlbGYuc2hvdWxkU3RvcCA9IFRydWUKCiAgICBkZWYgX2V4Y19pbmZvX3RvX3N0cmluZyhzZWxmLCBlcnIsIHRlc3QpOgogICAgICAgICIiIkNvbnZlcnRzIGEgc3lzLmV4Y19pbmZvKCktc3R5bGUgdHVwbGUgb2YgdmFsdWVzIGludG8gYSBzdHJpbmcuIiIiCiAgICAgICAgcGFzcyAgICNmaXhtZSBicnl0aG9uCgogICAgICAgICNleGN0eXBlLCB2YWx1ZSwgdGIgPSBlcnIKICAgICAgICAjIyBTa2lwIHRlc3QgcnVubmVyIHRyYWNlYmFjayBsZXZlbHMKICAgICAgICAjd2hpbGUgdGIgYW5kIHNlbGYuX2lzX3JlbGV2YW50X3RiX2xldmVsKHRiKToKICAgICAgICAjICAgIHRiID0gdGIudGJfbmV4dAoKICAgICAgICAjaWYgZXhjdHlwZSBpcyB0ZXN0LmZhaWx1cmVFeGNlcHRpb246CiAgICAgICAgIyAgICAjIFNraXAgYXNzZXJ0KigpIHRyYWNlYmFjayBsZXZlbHMKICAgICAgICAjICAgIGxlbmd0aCA9IHNlbGYuX2NvdW50X3JlbGV2YW50X3RiX2xldmVscyh0YikKICAgICAgICAjICAgIG1zZ0xpbmVzID0gdHJhY2ViYWNrLmZvcm1hdF9leGNlcHRpb24oZXhjdHlwZSwgdmFsdWUsIHRiLCBsZW5ndGgpCiAgICAgICAgI2Vsc2U6CiAgICAgICAgIyAgICBtc2dMaW5lcyA9IHRyYWNlYmFjay5mb3JtYXRfZXhjZXB0aW9uKGV4Y3R5cGUsIHZhbHVlLCB0YikKCiAgICAgICAgI2lmIHNlbGYuYnVmZmVyOgogICAgICAgICMgICAgb3V0cHV0ID0gc3lzLnN0ZG91dC5nZXR2YWx1ZSgpCiAgICAgICAgIyAgICBlcnJvciA9IHN5cy5zdGRlcnIuZ2V0dmFsdWUoKQogICAgICAgICMgICAgaWYgb3V0cHV0OgogICAgICAgICMgICAgICAgIGlmIG5vdCBvdXRwdXQuZW5kc3dpdGgoJ1xuJyk6CiAgICAgICAgIyAgICAgICAgICAgIG91dHB1dCArPSAnXG4nCiAgICAgICAgIyAgICAgICAgbXNnTGluZXMuYXBwZW5kKFNURE9VVF9MSU5FICUgb3V0cHV0KQogICAgICAgICMgICAgaWYgZXJyb3I6CiAgICAgICAgIyAgICAgICAgaWYgbm90IGVycm9yLmVuZHN3aXRoKCdcbicpOgogICAgICAgICMgICAgICAgICAgICBlcnJvciArPSAnXG4nCiAgICAgICAgIyAgICAgICAgbXNnTGluZXMuYXBwZW5kKFNUREVSUl9MSU5FICUgZXJyb3IpCiAgICAgICAgI3JldHVybiAnJy5qb2luKG1zZ0xpbmVzKQoKCiAgICAjZGVmIF9pc19yZWxldmFudF90Yl9sZXZlbChzZWxmLCB0Yik6CiAgICAjICAgIHJldHVybiAnX191bml0dGVzdCcgaW4gdGIudGJfZnJhbWUuZl9nbG9iYWxzCgogICAgI2RlZiBfY291bnRfcmVsZXZhbnRfdGJfbGV2ZWxzKHNlbGYsIHRiKToKICAgICMgICAgbGVuZ3RoID0gMAogICAgIyAgICB3aGlsZSB0YiBhbmQgbm90IHNlbGYuX2lzX3JlbGV2YW50X3RiX2xldmVsKHRiKToKICAgICMgICAgICAgIGxlbmd0aCArPSAxCiAgICAjICAgICAgICB0YiA9IHRiLnRiX25leHQKICAgICMgICAgcmV0dXJuIGxlbmd0aAoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gKCI8JXMgcnVuPSVpIGVycm9ycz0laSBmYWlsdXJlcz0laT4iICUKICAgICAgICAgICAgICAgKHV0aWwuc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pLCBzZWxmLnRlc3RzUnVuLCBsZW4oc2VsZi5lcnJvcnMpLAogICAgICAgICAgICAgICAgbGVuKHNlbGYuZmFpbHVyZXMpKSkK',
'/Lib/lib_migration/unittest/__init__.py':'IiIiClB5dGhvbiB1bml0IHRlc3RpbmcgZnJhbWV3b3JrLCBiYXNlZCBvbiBFcmljaCBHYW1tYSdzIEpVbml0IGFuZCBLZW50IEJlY2sncwpTbWFsbHRhbGsgdGVzdGluZyBmcmFtZXdvcmsuCgpUaGlzIG1vZHVsZSBjb250YWlucyB0aGUgY29yZSBmcmFtZXdvcmsgY2xhc3NlcyB0aGF0IGZvcm0gdGhlIGJhc2lzIG9mCnNwZWNpZmljIHRlc3QgY2FzZXMgYW5kIHN1aXRlcyAoVGVzdENhc2UsIFRlc3RTdWl0ZSBldGMuKSwgYW5kIGFsc28gYQp0ZXh0LWJhc2VkIHV0aWxpdHkgY2xhc3MgZm9yIHJ1bm5pbmcgdGhlIHRlc3RzIGFuZCByZXBvcnRpbmcgdGhlIHJlc3VsdHMKIChUZXh0VGVzdFJ1bm5lcikuCgpTaW1wbGUgdXNhZ2U6CgogICAgaW1wb3J0IHVuaXR0ZXN0CgogICAgY2xhc3MgSW50ZWdlckFyaXRobWVudGljVGVzdENhc2UodW5pdHRlc3QuVGVzdENhc2UpOgogICAgICAgIGRlZiB0ZXN0QWRkKHNlbGYpOiAgIyMgdGVzdCBtZXRob2QgbmFtZXMgYmVnaW4gJ3Rlc3QqJwogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKCgxICsgMiksIDMpCiAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoMCArIDEsIDEpCiAgICAgICAgZGVmIHRlc3RNdWx0aXBseShzZWxmKToKICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgoMCAqIDEwKSwgMCkKICAgICAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgoNSAqIDgpLCA0MCkKCiAgICBpZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgICAgIHVuaXR0ZXN0Lm1haW4oKQoKRnVydGhlciBpbmZvcm1hdGlvbiBpcyBhdmFpbGFibGUgaW4gdGhlIGJ1bmRsZWQgZG9jdW1lbnRhdGlvbiwgYW5kIGZyb20KCiAgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3VuaXR0ZXN0Lmh0bWwKCkNvcHlyaWdodCAoYykgMTk5OS0yMDAzIFN0ZXZlIFB1cmNlbGwKQ29weXJpZ2h0IChjKSAyMDAzLTIwMTAgUHl0aG9uIFNvZnR3YXJlIEZvdW5kYXRpb24KVGhpcyBtb2R1bGUgaXMgZnJlZSBzb2Z0d2FyZSwgYW5kIHlvdSBtYXkgcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKaXQgdW5kZXIgdGhlIHNhbWUgdGVybXMgYXMgUHl0aG9uIGl0c2VsZiwgc28gbG9uZyBhcyB0aGlzIGNvcHlyaWdodCBtZXNzYWdlCmFuZCBkaXNjbGFpbWVyIGFyZSByZXRhaW5lZCBpbiB0aGVpciBvcmlnaW5hbCBmb3JtLgoKSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgVE8gQU5ZIFBBUlRZIEZPUiBESVJFQ1QsIElORElSRUNULApTUEVDSUFMLCBJTkNJREVOVEFMLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgQVJJU0lORyBPVVQgT0YgVEhFIFVTRSBPRgpUSElTIENPREUsIEVWRU4gSUYgVEhFIEFVVEhPUiBIQVMgQkVFTiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNICkRBTUFHRS4KClRIRSBBVVRIT1IgU1BFQ0lGSUNBTExZIERJU0NMQUlNUyBBTlkgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UCkxJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBClBBUlRJQ1VMQVIgUFVSUE9TRS4gIFRIRSBDT0RFIFBST1ZJREVEIEhFUkVVTkRFUiBJUyBPTiBBTiAiQVMgSVMiIEJBU0lTLApBTkQgVEhFUkUgSVMgTk8gT0JMSUdBVElPTiBXSEFUU09FVkVSIFRPIFBST1ZJREUgTUFJTlRFTkFOQ0UsClNVUFBPUlQsIFVQREFURVMsIEVOSEFOQ0VNRU5UUywgT1IgTU9ESUZJQ0FUSU9OUy4KIiIiCgojX19hbGxfXyA9IFsnVGVzdFJlc3VsdCcsICdUZXN0Q2FzZScsICdUZXN0U3VpdGUnLAojICAgICAgICAgICAnVGV4dFRlc3RSdW5uZXInLCAnVGVzdExvYWRlcicsICdGdW5jdGlvblRlc3RDYXNlJywgJ21haW4nLAojICAgICAgICAgICAnZGVmYXVsdFRlc3RMb2FkZXInLCAnU2tpcFRlc3QnLCAnc2tpcCcsICdza2lwSWYnLCAnc2tpcFVubGVzcycsCiMgICAgICAgICAgICdleHBlY3RlZEZhaWx1cmUnLCAnVGV4dFRlc3RSZXN1bHQnLCAnaW5zdGFsbEhhbmRsZXInLAojICAgICAgICAgICAncmVnaXN0ZXJSZXN1bHQnLCAncmVtb3ZlUmVzdWx0JywgJ3JlbW92ZUhhbmRsZXInXQoKIyBFeHBvc2Ugb2Jzb2xldGUgZnVuY3Rpb25zIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQojX19hbGxfXy5leHRlbmQoWydnZXRUZXN0Q2FzZU5hbWVzJywgJ21ha2VTdWl0ZScsICdmaW5kVGVzdENhc2VzJ10pCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKI2Zyb20gLnJlc3VsdCBpbXBvcnQgVGVzdFJlc3VsdAojZml4bWUgYnJ5dGhvbiBzeW50YXggZXJyb3IKZnJvbSAuY2FzZSBpbXBvcnQgVGVzdENhc2UKZnJvbSAubWFpbiBpbXBvcnQgVGVzdFByb2dyYW0sIG1haW4KI2Zyb20gLmNhc2UgaW1wb3J0IChUZXN0Q2FzZSwgRnVuY3Rpb25UZXN0Q2FzZSwgU2tpcFRlc3QsIHNraXAsIHNraXBJZiwKIyAgICAgICAgICAgICAgICAgICBza2lwVW5sZXNzLCBleHBlY3RlZEZhaWx1cmUpCiNmcm9tIC5zdWl0ZSBpbXBvcnQgQmFzZVRlc3RTdWl0ZSwgVGVzdFN1aXRlCmZyb20gLmxvYWRlciBpbXBvcnQgKFRlc3RMb2FkZXIsIGRlZmF1bHRUZXN0TG9hZGVyLCBtYWtlU3VpdGUsIGdldFRlc3RDYXNlTmFtZXMsCiAgICAgICAgICAgICAgICAgICAgIGZpbmRUZXN0Q2FzZXMpCiNmcm9tIC5tYWluIGltcG9ydCBUZXN0UHJvZ3JhbSwgbWFpbgojZnJvbSAucnVubmVyIGltcG9ydCBUZXh0VGVzdFJ1bm5lciwgVGV4dFRlc3RSZXN1bHQKI2Zyb20gLnNpZ25hbHMgaW1wb3J0IGluc3RhbGxIYW5kbGVyLCByZWdpc3RlclJlc3VsdCwgcmVtb3ZlUmVzdWx0LCByZW1vdmVIYW5kbGVyCgojIGRlcHJlY2F0ZWQKI19UZXh0VGVzdFJlc3VsdCA9IFRleHRUZXN0UmVzdWx0Cg==',
'/Lib/lib_migration/unittest/__main__.py':'IiIiTWFpbiBlbnRyeSBwb2ludCIiIgoKaW1wb3J0IHN5cwppZiBzeXMuYXJndlswXS5lbmRzd2l0aCgiX19tYWluX18ucHkiKToKICAgIHN5cy5hcmd2WzBdID0gInB5dGhvbiAtbSB1bml0dGVzdCIKCl9fdW5pdHRlc3QgPSBUcnVlCgpmcm9tIC5tYWluIGltcG9ydCBtYWluLCBUZXN0UHJvZ3JhbSwgVVNBR0VfQVNfTUFJTgpUZXN0UHJvZ3JhbS5VU0FHRSA9IFVTQUdFX0FTX01BSU4KCm1haW4obW9kdWxlPU5vbmUpCg==',
'/Lib/lib_migration/unittest/util.py':'IyAiVmFyaW91cyB1dGlsaXR5IGZ1bmN0aW9ucy4iCgojZml4bWUsIGJyeXRob24sIG5lZWQgdG8gZml4IG5hbWVkdHVwbGUKI2Zyb20gY29sbGVjdGlvbnMgaW1wb3J0IG5hbWVkdHVwbGUsIE9yZGVyZWREaWN0CmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE9yZGVyZWREaWN0CgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKX01BWF9MRU5HVEggPSA4MApkZWYgc2FmZV9yZXByKG9iaiwgc2hvcnQ9RmFsc2UpOgogICAgdHJ5OgogICAgICAgIHJlc3VsdCA9IHJlcHIob2JqKQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICByZXN1bHQgPSBvYmplY3QuX19yZXByX18ob2JqKQogICAgaWYgbm90IHNob3J0IG9yIGxlbihyZXN1bHQpIDwgX01BWF9MRU5HVEg6CiAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgcmV0dXJuIHJlc3VsdFs6X01BWF9MRU5HVEhdICsgJyBbdHJ1bmNhdGVkXS4uLicKCmRlZiBzdHJjbGFzcyhjbHMpOgogICAgcmV0dXJuICIlcy4lcyIgJSAoY2xzLl9fbW9kdWxlX18sIGNscy5fX25hbWVfXykKCmRlZiBzb3J0ZWRfbGlzdF9kaWZmZXJlbmNlKGV4cGVjdGVkLCBhY3R1YWwpOgogICAgIiIiRmluZHMgZWxlbWVudHMgaW4gb25seSBvbmUgb3IgdGhlIG90aGVyIG9mIHR3bywgc29ydGVkIGlucHV0IGxpc3RzLgoKICAgIFJldHVybnMgYSB0d28tZWxlbWVudCB0dXBsZSBvZiBsaXN0cy4gICAgVGhlIGZpcnN0IGxpc3QgY29udGFpbnMgdGhvc2UKICAgIGVsZW1lbnRzIGluIHRoZSAiZXhwZWN0ZWQiIGxpc3QgYnV0IG5vdCBpbiB0aGUgImFjdHVhbCIgbGlzdCwgYW5kIHRoZQogICAgc2Vjb25kIGNvbnRhaW5zIHRob3NlIGVsZW1lbnRzIGluIHRoZSAiYWN0dWFsIiBsaXN0IGJ1dCBub3QgaW4gdGhlCiAgICAiZXhwZWN0ZWQiIGxpc3QuICAgIER1cGxpY2F0ZSBlbGVtZW50cyBpbiBlaXRoZXIgaW5wdXQgbGlzdCBhcmUgaWdub3JlZC4KICAgICIiIgogICAgaSA9IGogPSAwCiAgICBtaXNzaW5nID0gW10KICAgIHVuZXhwZWN0ZWQgPSBbXQogICAgd2hpbGUgVHJ1ZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGUgPSBleHBlY3RlZFtpXQogICAgICAgICAgICBhID0gYWN0dWFsW2pdCiAgICAgICAgICAgIGlmIGUgPCBhOgogICAgICAgICAgICAgICAgbWlzc2luZy5hcHBlbmQoZSkKICAgICAgICAgICAgICAgIGkgKz0gMQogICAgICAgICAgICAgICAgd2hpbGUgZXhwZWN0ZWRbaV0gPT0gZToKICAgICAgICAgICAgICAgICAgICBpICs9IDEKICAgICAgICAgICAgZWxpZiBlID4gYToKICAgICAgICAgICAgICAgIHVuZXhwZWN0ZWQuYXBwZW5kKGEpCiAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICAgICAgICAgIHdoaWxlIGFjdHVhbFtqXSA9PSBhOgogICAgICAgICAgICAgICAgICAgIGogKz0gMQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaSArPSAxCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgZXhwZWN0ZWRbaV0gPT0gZToKICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAxCiAgICAgICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgICAgIGogKz0gMQogICAgICAgICAgICAgICAgICAgIHdoaWxlIGFjdHVhbFtqXSA9PSBhOgogICAgICAgICAgICAgICAgICAgICAgICBqICs9IDEKICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgbWlzc2luZy5leHRlbmQoZXhwZWN0ZWRbaTpdKQogICAgICAgICAgICB1bmV4cGVjdGVkLmV4dGVuZChhY3R1YWxbajpdKQogICAgICAgICAgICBicmVhawogICAgcmV0dXJuIG1pc3NpbmcsIHVuZXhwZWN0ZWQKCgpkZWYgdW5vcmRlcmFibGVfbGlzdF9kaWZmZXJlbmNlKGV4cGVjdGVkLCBhY3R1YWwpOgogICAgIiIiU2FtZSBiZWhhdmlvciBhcyBzb3J0ZWRfbGlzdF9kaWZmZXJlbmNlIGJ1dAogICAgZm9yIGxpc3RzIG9mIHVub3JkZXJhYmxlIGl0ZW1zIChsaWtlIGRpY3RzKS4KCiAgICBBcyBpdCBkb2VzIGEgbGluZWFyIHNlYXJjaCBwZXIgaXRlbSAocmVtb3ZlKSBpdAogICAgaGFzIE8obipuKSBwZXJmb3JtYW5jZS4iIiIKICAgIG1pc3NpbmcgPSBbXQogICAgd2hpbGUgZXhwZWN0ZWQ6CiAgICAgICAgaXRlbSA9IGV4cGVjdGVkLnBvcCgpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBhY3R1YWwucmVtb3ZlKGl0ZW0pCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIG1pc3NpbmcuYXBwZW5kKGl0ZW0pCgogICAgIyBhbnl0aGluZyBsZWZ0IGluIGFjdHVhbCBpcyB1bmV4cGVjdGVkCiAgICByZXR1cm4gbWlzc2luZywgYWN0dWFsCgojZGVmIHRocmVlX3dheV9jbXAoeCwgeSk6CiMgICAgIiIiUmV0dXJuIC0xIGlmIHggPCB5LCAwIGlmIHggPT0geSBhbmQgMSBpZiB4ID4geSIiIgojICAgIHJldHVybiAoeCA+IHkpIC0gKHggPCB5KQoKIyBmaXhtZSwgYnJ5dGhvbgojbmFtZWR0dXBsZSBpc3N1ZXMgaW4gY29sbGVjdGlvbnMucHkKI19NaXNtYXRjaCA9IG5hbWVkdHVwbGUoJ01pc21hdGNoJywgJ2FjdHVhbCBleHBlY3RlZCB2YWx1ZScpCgpkZWYgX2NvdW50X2RpZmZfYWxsX3B1cnBvc2UoYWN0dWFsLCBleHBlY3RlZCk6CiAgICAnUmV0dXJucyBsaXN0IG9mIChjbnRfYWN0LCBjbnRfZXhwLCBlbGVtKSB0cmlwbGVzIHdoZXJlIHRoZSBjb3VudHMgZGlmZmVyJwogICAgIyBlbGVtZW50cyBuZWVkIG5vdCBiZSBoYXNoYWJsZQogICAgcywgdCA9IGxpc3QoYWN0dWFsKSwgbGlzdChleHBlY3RlZCkKICAgIG0sIG4gPSBsZW4ocyksIGxlbih0KQogICAgTlVMTCA9IG9iamVjdCgpCiAgICByZXN1bHQgPSBbXQogICAgZm9yIGksIGVsZW0gaW4gZW51bWVyYXRlKHMpOgogICAgICAgIGlmIGVsZW0gaXMgTlVMTDoKICAgICAgICAgICAgY29udGludWUKICAgICAgICBjbnRfcyA9IGNudF90ID0gMAogICAgICAgIGZvciBqIGluIHJhbmdlKGksIG0pOgogICAgICAgICAgICBpZiBzW2pdID09IGVsZW06CiAgICAgICAgICAgICAgICBjbnRfcyArPSAxCiAgICAgICAgICAgICAgICBzW2pdID0gTlVMTAogICAgICAgIGZvciBqLCBvdGhlcl9lbGVtIGluIGVudW1lcmF0ZSh0KToKICAgICAgICAgICAgaWYgb3RoZXJfZWxlbSA9PSBlbGVtOgogICAgICAgICAgICAgICAgY250X3QgKz0gMQogICAgICAgICAgICAgICAgdFtqXSA9IE5VTEwKICAgICAgICBpZiBjbnRfcyAhPSBjbnRfdDoKICAgICAgICAgICAgZGlmZiA9IF9NaXNtYXRjaChjbnRfcywgY250X3QsIGVsZW0pCiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoZGlmZikKCiAgICBmb3IgaSwgZWxlbSBpbiBlbnVtZXJhdGUodCk6CiAgICAgICAgaWYgZWxlbSBpcyBOVUxMOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGNudF90ID0gMAogICAgICAgIGZvciBqIGluIHJhbmdlKGksIG4pOgogICAgICAgICAgICBpZiB0W2pdID09IGVsZW06CiAgICAgICAgICAgICAgICBjbnRfdCArPSAxCiAgICAgICAgICAgICAgICB0W2pdID0gTlVMTAogICAgICAgIGRpZmYgPSBfTWlzbWF0Y2goMCwgY250X3QsIGVsZW0pCiAgICAgICAgcmVzdWx0LmFwcGVuZChkaWZmKQogICAgcmV0dXJuIHJlc3VsdAoKZGVmIF9vcmRlcmVkX2NvdW50KGl0ZXJhYmxlKToKICAgICdSZXR1cm4gZGljdCBvZiBlbGVtZW50IGNvdW50cywgaW4gdGhlIG9yZGVyIHRoZXkgd2VyZSBmaXJzdCBzZWVuJwogICAgYyA9IE9yZGVyZWREaWN0KCkKICAgIGZvciBlbGVtIGluIGl0ZXJhYmxlOgogICAgICAgIGNbZWxlbV0gPSBjLmdldChlbGVtLCAwKSArIDEKICAgIHJldHVybiBjCgpkZWYgX2NvdW50X2RpZmZfaGFzaGFibGUoYWN0dWFsLCBleHBlY3RlZCk6CiAgICAnUmV0dXJucyBsaXN0IG9mIChjbnRfYWN0LCBjbnRfZXhwLCBlbGVtKSB0cmlwbGVzIHdoZXJlIHRoZSBjb3VudHMgZGlmZmVyJwogICAgIyBlbGVtZW50cyBtdXN0IGJlIGhhc2hhYmxlCiAgICBzLCB0ID0gX29yZGVyZWRfY291bnQoYWN0dWFsKSwgX29yZGVyZWRfY291bnQoZXhwZWN0ZWQpCiAgICByZXN1bHQgPSBbXQogICAgZm9yIGVsZW0sIGNudF9zIGluIHMuaXRlbXMoKToKICAgICAgICBjbnRfdCA9IHQuZ2V0KGVsZW0sIDApCiAgICAgICAgaWYgY250X3MgIT0gY250X3Q6CiAgICAgICAgICAgIGRpZmYgPSBfTWlzbWF0Y2goY250X3MsIGNudF90LCBlbGVtKQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGRpZmYpCiAgICBmb3IgZWxlbSwgY250X3QgaW4gdC5pdGVtcygpOgogICAgICAgIGlmIGVsZW0gbm90IGluIHM6CiAgICAgICAgICAgIGRpZmYgPSBfTWlzbWF0Y2goMCwgY250X3QsIGVsZW0pCiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoZGlmZikKICAgIHJldHVybiByZXN1bHQK',
'/Lib/lib_migration/unittest/loader.py':'IiIiTG9hZGluZyB1bml0dGVzdHMuIiIiCgppbXBvcnQgb3MKaW1wb3J0IHJlCmltcG9ydCBzeXMKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgdHlwZXMKaW1wb3J0IGZ1bmN0b29scwoKZnJvbSBmbm1hdGNoIGltcG9ydCBmbm1hdGNoCgpmcm9tIC4gaW1wb3J0IGNhc2UsIHN1aXRlLCB1dGlsCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKIyB3aGF0IGFib3V0IC5weWMgb3IgLnB5byAoZXRjKQojIHdlIHdvdWxkIG5lZWQgdG8gYXZvaWQgbG9hZGluZyB0aGUgc2FtZSB0ZXN0cyBtdWx0aXBsZSB0aW1lcwojIGZyb20gJy5weScsICcucHljJyAqYW5kKiAnLnB5bycKVkFMSURfTU9EVUxFX05BTUUgPSByZS5jb21waWxlKHInW19hLXpdXHcqXC5weSQnLCByZS5JR05PUkVDQVNFKQoKCmRlZiBfbWFrZV9mYWlsZWRfaW1wb3J0X3Rlc3QobmFtZSwgc3VpdGVDbGFzcyk6CiAgICBtZXNzYWdlID0gJ0ZhaWxlZCB0byBpbXBvcnQgdGVzdCBtb2R1bGU6ICVzXG4lcycgJSAobmFtZSwgdHJhY2ViYWNrLmZvcm1hdF9leGMoKSkKICAgIHJldHVybiBfbWFrZV9mYWlsZWRfdGVzdCgnTW9kdWxlSW1wb3J0RmFpbHVyZScsIG5hbWUsIEltcG9ydEVycm9yKG1lc3NhZ2UpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1aXRlQ2xhc3MpCgpkZWYgX21ha2VfZmFpbGVkX2xvYWRfdGVzdHMobmFtZSwgZXhjZXB0aW9uLCBzdWl0ZUNsYXNzKToKICAgIHJldHVybiBfbWFrZV9mYWlsZWRfdGVzdCgnTG9hZFRlc3RzRmFpbHVyZScsIG5hbWUsIGV4Y2VwdGlvbiwgc3VpdGVDbGFzcykKCmRlZiBfbWFrZV9mYWlsZWRfdGVzdChjbGFzc25hbWUsIG1ldGhvZG5hbWUsIGV4Y2VwdGlvbiwgc3VpdGVDbGFzcyk6CiAgICBkZWYgdGVzdEZhaWx1cmUoc2VsZik6CiAgICAgICAgcmFpc2UgZXhjZXB0aW9uCiAgICBhdHRycyA9IHttZXRob2RuYW1lOiB0ZXN0RmFpbHVyZX0KICAgIFRlc3RDbGFzcyA9IHR5cGUoY2xhc3NuYW1lLCAoY2FzZS5UZXN0Q2FzZSwpLCBhdHRycykKICAgIHJldHVybiBzdWl0ZUNsYXNzKChUZXN0Q2xhc3MobWV0aG9kbmFtZSksKSkKCmRlZiBfanl0aG9uX2F3YXJlX3NwbGl0ZXh0KHBhdGgpOgogICAgaWYgcGF0aC5sb3dlcigpLmVuZHN3aXRoKCckcHkuY2xhc3MnKToKICAgICAgICByZXR1cm4gcGF0aFs6LTldCiAgICByZXR1cm4gb3MucGF0aC5zcGxpdGV4dChwYXRoKVswXQoKCmNsYXNzIFRlc3RMb2FkZXIob2JqZWN0KToKICAgICIiIgogICAgVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgbG9hZGluZyB0ZXN0cyBhY2NvcmRpbmcgdG8gdmFyaW91cyBjcml0ZXJpYQogICAgYW5kIHJldHVybmluZyB0aGVtIHdyYXBwZWQgaW4gYSBUZXN0U3VpdGUKICAgICIiIgogICAgdGVzdE1ldGhvZFByZWZpeCA9ICd0ZXN0JwogICAgc29ydFRlc3RNZXRob2RzVXNpbmcgPSBzdGF0aWNtZXRob2QodXRpbC50aHJlZV93YXlfY21wKQogICAgc3VpdGVDbGFzcyA9IHN1aXRlLlRlc3RTdWl0ZQogICAgX3RvcF9sZXZlbF9kaXIgPSBOb25lCgogICAgZGVmIGxvYWRUZXN0c0Zyb21UZXN0Q2FzZShzZWxmLCB0ZXN0Q2FzZUNsYXNzKToKICAgICAgICAiIiJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgY29udGFpbmVkIGluIHRlc3RDYXNlQ2xhc3MiIiIKICAgICAgICBpZiBpc3N1YmNsYXNzKHRlc3RDYXNlQ2xhc3MsIHN1aXRlLlRlc3RTdWl0ZSk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVGVzdCBjYXNlcyBzaG91bGQgbm90IGJlIGRlcml2ZWQgZnJvbSBUZXN0U3VpdGUuIiBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBNYXliZSB5b3UgbWVhbnQgdG8gZGVyaXZlIGZyb20gVGVzdENhc2U/IikKICAgICAgICB0ZXN0Q2FzZU5hbWVzID0gc2VsZi5nZXRUZXN0Q2FzZU5hbWVzKHRlc3RDYXNlQ2xhc3MpCiAgICAgICAgaWYgbm90IHRlc3RDYXNlTmFtZXMgYW5kIGhhc2F0dHIodGVzdENhc2VDbGFzcywgJ3J1blRlc3QnKToKICAgICAgICAgICAgdGVzdENhc2VOYW1lcyA9IFsncnVuVGVzdCddCiAgICAgICAgbG9hZGVkX3N1aXRlID0gc2VsZi5zdWl0ZUNsYXNzKG1hcCh0ZXN0Q2FzZUNsYXNzLCB0ZXN0Q2FzZU5hbWVzKSkKICAgICAgICByZXR1cm4gbG9hZGVkX3N1aXRlCgogICAgZGVmIGxvYWRUZXN0c0Zyb21Nb2R1bGUoc2VsZiwgbW9kdWxlLCB1c2VfbG9hZF90ZXN0cz1UcnVlKToKICAgICAgICAiIiJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgY29udGFpbmVkIGluIHRoZSBnaXZlbiBtb2R1bGUiIiIKICAgICAgICB0ZXN0cyA9IFtdCiAgICAgICAgZm9yIG5hbWUgaW4gZGlyKG1vZHVsZSk6CiAgICAgICAgICAgIG9iaiA9IGdldGF0dHIobW9kdWxlLCBuYW1lKQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgdHlwZSkgYW5kIGlzc3ViY2xhc3Mob2JqLCBjYXNlLlRlc3RDYXNlKToKICAgICAgICAgICAgICAgIHRlc3RzLmFwcGVuZChzZWxmLmxvYWRUZXN0c0Zyb21UZXN0Q2FzZShvYmopKQoKICAgICAgICBsb2FkX3Rlc3RzID0gZ2V0YXR0cihtb2R1bGUsICdsb2FkX3Rlc3RzJywgTm9uZSkKICAgICAgICB0ZXN0cyA9IHNlbGYuc3VpdGVDbGFzcyh0ZXN0cykKICAgICAgICBpZiB1c2VfbG9hZF90ZXN0cyBhbmQgbG9hZF90ZXN0cyBpcyBub3QgTm9uZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIGxvYWRfdGVzdHMoc2VsZiwgdGVzdHMsIE5vbmUpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHJldHVybiBfbWFrZV9mYWlsZWRfbG9hZF90ZXN0cyhtb2R1bGUuX19uYW1lX18sIGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdWl0ZUNsYXNzKQogICAgICAgIHJldHVybiB0ZXN0cwoKICAgIGRlZiBsb2FkVGVzdHNGcm9tTmFtZShzZWxmLCBuYW1lLCBtb2R1bGU9Tm9uZSk6CiAgICAgICAgIiIiUmV0dXJuIGEgc3VpdGUgb2YgYWxsIHRlc3RzIGNhc2VzIGdpdmVuIGEgc3RyaW5nIHNwZWNpZmllci4KCiAgICAgICAgVGhlIG5hbWUgbWF5IHJlc29sdmUgZWl0aGVyIHRvIGEgbW9kdWxlLCBhIHRlc3QgY2FzZSBjbGFzcywgYQogICAgICAgIHRlc3QgbWV0aG9kIHdpdGhpbiBhIHRlc3QgY2FzZSBjbGFzcywgb3IgYSBjYWxsYWJsZSBvYmplY3Qgd2hpY2gKICAgICAgICByZXR1cm5zIGEgVGVzdENhc2Ugb3IgVGVzdFN1aXRlIGluc3RhbmNlLgoKICAgICAgICBUaGUgbWV0aG9kIG9wdGlvbmFsbHkgcmVzb2x2ZXMgdGhlIG5hbWVzIHJlbGF0aXZlIHRvIGEgZ2l2ZW4gbW9kdWxlLgogICAgICAgICIiIgogICAgICAgIHBhcnRzID0gbmFtZS5zcGxpdCgnLicpCiAgICAgICAgaWYgbW9kdWxlIGlzIE5vbmU6CiAgICAgICAgICAgIHBhcnRzX2NvcHkgPSBwYXJ0c1s6XQogICAgICAgICAgICB3aGlsZSBwYXJ0c19jb3B5OgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIG1vZHVsZSA9IF9faW1wb3J0X18oJy4nLmpvaW4ocGFydHNfY29weSkpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgICAgICBkZWwgcGFydHNfY29weVstMV0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgcGFydHNfY29weToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgcGFydHMgPSBwYXJ0c1sxOl0KICAgICAgICBvYmogPSBtb2R1bGUKICAgICAgICBmb3IgcGFydCBpbiBwYXJ0czoKICAgICAgICAgICAgcGFyZW50LCBvYmogPSBvYmosIGdldGF0dHIob2JqLCBwYXJ0KQoKICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgdHlwZXMuTW9kdWxlVHlwZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmxvYWRUZXN0c0Zyb21Nb2R1bGUob2JqKQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShvYmosIHR5cGUpIGFuZCBpc3N1YmNsYXNzKG9iaiwgY2FzZS5UZXN0Q2FzZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmxvYWRUZXN0c0Zyb21UZXN0Q2FzZShvYmopCiAgICAgICAgZWxpZiAoaXNpbnN0YW5jZShvYmosIHR5cGVzLkZ1bmN0aW9uVHlwZSkgYW5kCiAgICAgICAgICAgICAgaXNpbnN0YW5jZShwYXJlbnQsIHR5cGUpIGFuZAogICAgICAgICAgICAgIGlzc3ViY2xhc3MocGFyZW50LCBjYXNlLlRlc3RDYXNlKSk6CiAgICAgICAgICAgIG5hbWUgPSBvYmouX19uYW1lX18KICAgICAgICAgICAgaW5zdCA9IHBhcmVudChuYW1lKQogICAgICAgICAgICAjIHN0YXRpYyBtZXRob2RzIGZvbGxvdyBhIGRpZmZlcmVudCBwYXRoCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGdldGF0dHIoaW5zdCwgbmFtZSksIHR5cGVzLkZ1bmN0aW9uVHlwZSk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5zdWl0ZUNsYXNzKFtpbnN0XSkKICAgICAgICBlbGlmIGlzaW5zdGFuY2Uob2JqLCBzdWl0ZS5UZXN0U3VpdGUpOgogICAgICAgICAgICByZXR1cm4gb2JqCiAgICAgICAgaWYgY2FsbGFibGUob2JqKToKICAgICAgICAgICAgdGVzdCA9IG9iaigpCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodGVzdCwgc3VpdGUuVGVzdFN1aXRlKToKICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0CiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZSh0ZXN0LCBjYXNlLlRlc3RDYXNlKToKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnN1aXRlQ2xhc3MoW3Rlc3RdKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYWxsaW5nICVzIHJldHVybmVkICVzLCBub3QgYSB0ZXN0IiAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9iaiwgdGVzdCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJkb24ndCBrbm93IGhvdyB0byBtYWtlIHRlc3QgZnJvbTogJXMiICUgb2JqKQoKICAgIGRlZiBsb2FkVGVzdHNGcm9tTmFtZXMoc2VsZiwgbmFtZXMsIG1vZHVsZT1Ob25lKToKICAgICAgICAiIiJSZXR1cm4gYSBzdWl0ZSBvZiBhbGwgdGVzdHMgY2FzZXMgZm91bmQgdXNpbmcgdGhlIGdpdmVuIHNlcXVlbmNlCiAgICAgICAgb2Ygc3RyaW5nIHNwZWNpZmllcnMuIFNlZSAnbG9hZFRlc3RzRnJvbU5hbWUoKScuCiAgICAgICAgIiIiCiAgICAgICAgc3VpdGVzID0gW3NlbGYubG9hZFRlc3RzRnJvbU5hbWUobmFtZSwgbW9kdWxlKSBmb3IgbmFtZSBpbiBuYW1lc10KICAgICAgICByZXR1cm4gc2VsZi5zdWl0ZUNsYXNzKHN1aXRlcykKCiAgICBkZWYgZ2V0VGVzdENhc2VOYW1lcyhzZWxmLCB0ZXN0Q2FzZUNsYXNzKToKICAgICAgICAiIiJSZXR1cm4gYSBzb3J0ZWQgc2VxdWVuY2Ugb2YgbWV0aG9kIG5hbWVzIGZvdW5kIHdpdGhpbiB0ZXN0Q2FzZUNsYXNzCiAgICAgICAgIiIiCiAgICAgICAgZGVmIGlzVGVzdE1ldGhvZChhdHRybmFtZSwgdGVzdENhc2VDbGFzcz10ZXN0Q2FzZUNsYXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4PXNlbGYudGVzdE1ldGhvZFByZWZpeCk6CiAgICAgICAgICAgIHJldHVybiBhdHRybmFtZS5zdGFydHN3aXRoKHByZWZpeCkgYW5kIFwKICAgICAgICAgICAgICAgIGNhbGxhYmxlKGdldGF0dHIodGVzdENhc2VDbGFzcywgYXR0cm5hbWUpKQogICAgICAgIHRlc3RGbk5hbWVzID0gbGlzdChmaWx0ZXIoaXNUZXN0TWV0aG9kLCBkaXIodGVzdENhc2VDbGFzcykpKQogICAgICAgIGlmIHNlbGYuc29ydFRlc3RNZXRob2RzVXNpbmc6CiAgICAgICAgICAgIHRlc3RGbk5hbWVzLnNvcnQoa2V5PWZ1bmN0b29scy5jbXBfdG9fa2V5KHNlbGYuc29ydFRlc3RNZXRob2RzVXNpbmcpKQogICAgICAgIHJldHVybiB0ZXN0Rm5OYW1lcwoKICAgIGRlZiBkaXNjb3ZlcihzZWxmLCBzdGFydF9kaXIsIHBhdHRlcm49J3Rlc3QqLnB5JywgdG9wX2xldmVsX2Rpcj1Ob25lKToKICAgICAgICAiIiJGaW5kIGFuZCByZXR1cm4gYWxsIHRlc3QgbW9kdWxlcyBmcm9tIHRoZSBzcGVjaWZpZWQgc3RhcnQKICAgICAgICBkaXJlY3RvcnksIHJlY3Vyc2luZyBpbnRvIHN1YmRpcmVjdG9yaWVzIHRvIGZpbmQgdGhlbSBhbmQgcmV0dXJuIGFsbAogICAgICAgIHRlc3RzIGZvdW5kIHdpdGhpbiB0aGVtLiBPbmx5IHRlc3QgZmlsZXMgdGhhdCBtYXRjaCB0aGUgcGF0dGVybiB3aWxsCiAgICAgICAgYmUgbG9hZGVkLiAoVXNpbmcgc2hlbGwgc3R5bGUgcGF0dGVybiBtYXRjaGluZy4pCgogICAgICAgIEFsbCB0ZXN0IG1vZHVsZXMgbXVzdCBiZSBpbXBvcnRhYmxlIGZyb20gdGhlIHRvcCBsZXZlbCBvZiB0aGUgcHJvamVjdC4KICAgICAgICBJZiB0aGUgc3RhcnQgZGlyZWN0b3J5IGlzIG5vdCB0aGUgdG9wIGxldmVsIGRpcmVjdG9yeSB0aGVuIHRoZSB0b3AKICAgICAgICBsZXZlbCBkaXJlY3RvcnkgbXVzdCBiZSBzcGVjaWZpZWQgc2VwYXJhdGVseS4KCiAgICAgICAgSWYgYSB0ZXN0IHBhY2thZ2UgbmFtZSAoZGlyZWN0b3J5IHdpdGggJ19faW5pdF9fLnB5JykgbWF0Y2hlcyB0aGUKICAgICAgICBwYXR0ZXJuIHRoZW4gdGhlIHBhY2thZ2Ugd2lsbCBiZSBjaGVja2VkIGZvciBhICdsb2FkX3Rlc3RzJyBmdW5jdGlvbi4gSWYKICAgICAgICB0aGlzIGV4aXN0cyB0aGVuIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggbG9hZGVyLCB0ZXN0cywgcGF0dGVybi4KCiAgICAgICAgSWYgbG9hZF90ZXN0cyBleGlzdHMgdGhlbiBkaXNjb3ZlcnkgZG9lcyAgKm5vdCogcmVjdXJzZSBpbnRvIHRoZSBwYWNrYWdlLAogICAgICAgIGxvYWRfdGVzdHMgaXMgcmVzcG9uc2libGUgZm9yIGxvYWRpbmcgYWxsIHRlc3RzIGluIHRoZSBwYWNrYWdlLgoKICAgICAgICBUaGUgcGF0dGVybiBpcyBkZWxpYmVyYXRlbHkgbm90IHN0b3JlZCBhcyBhIGxvYWRlciBhdHRyaWJ1dGUgc28gdGhhdAogICAgICAgIHBhY2thZ2VzIGNhbiBjb250aW51ZSBkaXNjb3ZlcnkgdGhlbXNlbHZlcy4gdG9wX2xldmVsX2RpciBpcyBzdG9yZWQgc28KICAgICAgICBsb2FkX3Rlc3RzIGRvZXMgbm90IG5lZWQgdG8gcGFzcyB0aGlzIGFyZ3VtZW50IGluIHRvIGxvYWRlci5kaXNjb3ZlcigpLgogICAgICAgICIiIgogICAgICAgIHNldF9pbXBsaWNpdF90b3AgPSBGYWxzZQogICAgICAgIGlmIHRvcF9sZXZlbF9kaXIgaXMgTm9uZSBhbmQgc2VsZi5fdG9wX2xldmVsX2RpciBpcyBub3QgTm9uZToKICAgICAgICAgICAgIyBtYWtlIHRvcF9sZXZlbF9kaXIgb3B0aW9uYWwgaWYgY2FsbGVkIGZyb20gbG9hZF90ZXN0cyBpbiBhIHBhY2thZ2UKICAgICAgICAgICAgdG9wX2xldmVsX2RpciA9IHNlbGYuX3RvcF9sZXZlbF9kaXIKICAgICAgICBlbGlmIHRvcF9sZXZlbF9kaXIgaXMgTm9uZToKICAgICAgICAgICAgc2V0X2ltcGxpY2l0X3RvcCA9IFRydWUKICAgICAgICAgICAgdG9wX2xldmVsX2RpciA9IHN0YXJ0X2RpcgoKICAgICAgICB0b3BfbGV2ZWxfZGlyID0gb3MucGF0aC5hYnNwYXRoKHRvcF9sZXZlbF9kaXIpCgogICAgICAgIGlmIG5vdCB0b3BfbGV2ZWxfZGlyIGluIHN5cy5wYXRoOgogICAgICAgICAgICAjIGFsbCB0ZXN0IG1vZHVsZXMgbXVzdCBiZSBpbXBvcnRhYmxlIGZyb20gdGhlIHRvcCBsZXZlbCBkaXJlY3RvcnkKICAgICAgICAgICAgIyBzaG91bGQgd2UgKnVuY29uZGl0aW9uYWxseSogcHV0IHRoZSBzdGFydCBkaXJlY3RvcnkgaW4gZmlyc3QKICAgICAgICAgICAgIyBpbiBzeXMucGF0aCB0byBtaW5pbWlzZSBsaWtlbGlob29kIG9mIGNvbmZsaWN0cyBiZXR3ZWVuIGluc3RhbGxlZAogICAgICAgICAgICAjIG1vZHVsZXMgYW5kIGRldmVsb3BtZW50IHZlcnNpb25zPwogICAgICAgICAgICBzeXMucGF0aC5pbnNlcnQoMCwgdG9wX2xldmVsX2RpcikKICAgICAgICBzZWxmLl90b3BfbGV2ZWxfZGlyID0gdG9wX2xldmVsX2RpcgoKICAgICAgICBpc19ub3RfaW1wb3J0YWJsZSA9IEZhbHNlCiAgICAgICAgaWYgb3MucGF0aC5pc2Rpcihvcy5wYXRoLmFic3BhdGgoc3RhcnRfZGlyKSk6CiAgICAgICAgICAgIHN0YXJ0X2RpciA9IG9zLnBhdGguYWJzcGF0aChzdGFydF9kaXIpCiAgICAgICAgICAgIGlmIHN0YXJ0X2RpciAhPSB0b3BfbGV2ZWxfZGlyOgogICAgICAgICAgICAgICAgaXNfbm90X2ltcG9ydGFibGUgPSBub3Qgb3MucGF0aC5pc2ZpbGUob3MucGF0aC5qb2luKHN0YXJ0X2RpciwgJ19faW5pdF9fLnB5JykpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBzdXBwb3J0IGZvciBkaXNjb3ZlcnkgZnJvbSBkb3R0ZWQgbW9kdWxlIG5hbWVzCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIF9faW1wb3J0X18oc3RhcnRfZGlyKQogICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICBpc19ub3RfaW1wb3J0YWJsZSA9IFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRoZV9tb2R1bGUgPSBzeXMubW9kdWxlc1tzdGFydF9kaXJdCiAgICAgICAgICAgICAgICB0b3BfcGFydCA9IHN0YXJ0X2Rpci5zcGxpdCgnLicpWzBdCiAgICAgICAgICAgICAgICBzdGFydF9kaXIgPSBvcy5wYXRoLmFic3BhdGgob3MucGF0aC5kaXJuYW1lKCh0aGVfbW9kdWxlLl9fZmlsZV9fKSkpCiAgICAgICAgICAgICAgICBpZiBzZXRfaW1wbGljaXRfdG9wOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX3RvcF9sZXZlbF9kaXIgPSBzZWxmLl9nZXRfZGlyZWN0b3J5X2NvbnRhaW5pbmdfbW9kdWxlKHRvcF9wYXJ0KQogICAgICAgICAgICAgICAgICAgIHN5cy5wYXRoLnJlbW92ZSh0b3BfbGV2ZWxfZGlyKQoKICAgICAgICBpZiBpc19ub3RfaW1wb3J0YWJsZToKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoJ1N0YXJ0IGRpcmVjdG9yeSBpcyBub3QgaW1wb3J0YWJsZTogJXInICUgc3RhcnRfZGlyKQoKICAgICAgICB0ZXN0cyA9IGxpc3Qoc2VsZi5fZmluZF90ZXN0cyhzdGFydF9kaXIsIHBhdHRlcm4pKQogICAgICAgIHJldHVybiBzZWxmLnN1aXRlQ2xhc3ModGVzdHMpCgogICAgZGVmIF9nZXRfZGlyZWN0b3J5X2NvbnRhaW5pbmdfbW9kdWxlKHNlbGYsIG1vZHVsZV9uYW1lKToKICAgICAgICBtb2R1bGUgPSBzeXMubW9kdWxlc1ttb2R1bGVfbmFtZV0KICAgICAgICBmdWxsX3BhdGggPSBvcy5wYXRoLmFic3BhdGgobW9kdWxlLl9fZmlsZV9fKQoKICAgICAgICBpZiBvcy5wYXRoLmJhc2VuYW1lKGZ1bGxfcGF0aCkubG93ZXIoKS5zdGFydHN3aXRoKCdfX2luaXRfXy5weScpOgogICAgICAgICAgICByZXR1cm4gb3MucGF0aC5kaXJuYW1lKG9zLnBhdGguZGlybmFtZShmdWxsX3BhdGgpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgaGVyZSB3ZSBoYXZlIGJlZW4gZ2l2ZW4gYSBtb2R1bGUgcmF0aGVyIHRoYW4gYSBwYWNrYWdlIC0gc28KICAgICAgICAgICAgIyBhbGwgd2UgY2FuIGRvIGlzIHNlYXJjaCB0aGUgKnNhbWUqIGRpcmVjdG9yeSB0aGUgbW9kdWxlIGlzIGluCiAgICAgICAgICAgICMgc2hvdWxkIGFuIGV4Y2VwdGlvbiBiZSByYWlzZWQgaW5zdGVhZAogICAgICAgICAgICByZXR1cm4gb3MucGF0aC5kaXJuYW1lKGZ1bGxfcGF0aCkKCiAgICBkZWYgX2dldF9uYW1lX2Zyb21fcGF0aChzZWxmLCBwYXRoKToKICAgICAgICBwYXRoID0gX2p5dGhvbl9hd2FyZV9zcGxpdGV4dChvcy5wYXRoLm5vcm1wYXRoKHBhdGgpKQoKICAgICAgICBfcmVscGF0aCA9IG9zLnBhdGgucmVscGF0aChwYXRoLCBzZWxmLl90b3BfbGV2ZWxfZGlyKQogICAgICAgIGFzc2VydCBub3Qgb3MucGF0aC5pc2FicyhfcmVscGF0aCksICJQYXRoIG11c3QgYmUgd2l0aGluIHRoZSBwcm9qZWN0IgogICAgICAgIGFzc2VydCBub3QgX3JlbHBhdGguc3RhcnRzd2l0aCgnLi4nKSwgIlBhdGggbXVzdCBiZSB3aXRoaW4gdGhlIHByb2plY3QiCgogICAgICAgIG5hbWUgPSBfcmVscGF0aC5yZXBsYWNlKG9zLnBhdGguc2VwLCAnLicpCiAgICAgICAgcmV0dXJuIG5hbWUKCiAgICBkZWYgX2dldF9tb2R1bGVfZnJvbV9uYW1lKHNlbGYsIG5hbWUpOgogICAgICAgIF9faW1wb3J0X18obmFtZSkKICAgICAgICByZXR1cm4gc3lzLm1vZHVsZXNbbmFtZV0KCiAgICBkZWYgX21hdGNoX3BhdGgoc2VsZiwgcGF0aCwgZnVsbF9wYXRoLCBwYXR0ZXJuKToKICAgICAgICAjIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIHVzZSBhbHRlcm5hdGl2ZSBtYXRjaGluZyBzdHJhdGVneQogICAgICAgIHJldHVybiBmbm1hdGNoKHBhdGgsIHBhdHRlcm4pCgogICAgZGVmIF9maW5kX3Rlc3RzKHNlbGYsIHN0YXJ0X2RpciwgcGF0dGVybik6CiAgICAgICAgIiIiVXNlZCBieSBkaXNjb3ZlcnkuIFlpZWxkcyB0ZXN0IHN1aXRlcyBpdCBsb2Fkcy4iIiIKICAgICAgICBwYXRocyA9IG9zLmxpc3RkaXIoc3RhcnRfZGlyKQoKICAgICAgICBmb3IgcGF0aCBpbiBwYXRoczoKICAgICAgICAgICAgZnVsbF9wYXRoID0gb3MucGF0aC5qb2luKHN0YXJ0X2RpciwgcGF0aCkKICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUoZnVsbF9wYXRoKToKICAgICAgICAgICAgICAgIGlmIG5vdCBWQUxJRF9NT0RVTEVfTkFNRS5tYXRjaChwYXRoKToKICAgICAgICAgICAgICAgICAgICAjIHZhbGlkIFB5dGhvbiBpZGVudGlmaWVycyBvbmx5CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9tYXRjaF9wYXRoKHBhdGgsIGZ1bGxfcGF0aCwgcGF0dGVybik6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICMgaWYgdGhlIHRlc3QgZmlsZSBtYXRjaGVzLCBsb2FkIGl0CiAgICAgICAgICAgICAgICBuYW1lID0gc2VsZi5fZ2V0X25hbWVfZnJvbV9wYXRoKGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBtb2R1bGUgPSBzZWxmLl9nZXRfbW9kdWxlX2Zyb21fbmFtZShuYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2ZhaWxlZF9pbXBvcnRfdGVzdChuYW1lLCBzZWxmLnN1aXRlQ2xhc3MpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG1vZF9maWxlID0gb3MucGF0aC5hYnNwYXRoKGdldGF0dHIobW9kdWxlLCAnX19maWxlX18nLCBmdWxsX3BhdGgpKQogICAgICAgICAgICAgICAgICAgIHJlYWxwYXRoID0gX2p5dGhvbl9hd2FyZV9zcGxpdGV4dChtb2RfZmlsZSkKICAgICAgICAgICAgICAgICAgICBmdWxscGF0aF9ub2V4dCA9IF9qeXRob25fYXdhcmVfc3BsaXRleHQoZnVsbF9wYXRoKQogICAgICAgICAgICAgICAgICAgIGlmIHJlYWxwYXRoLmxvd2VyKCkgIT0gZnVsbHBhdGhfbm9leHQubG93ZXIoKToKICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlX2RpciA9IG9zLnBhdGguZGlybmFtZShyZWFscGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgbW9kX25hbWUgPSBfanl0aG9uX2F3YXJlX3NwbGl0ZXh0KG9zLnBhdGguYmFzZW5hbWUoZnVsbF9wYXRoKSkKICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfZGlyID0gb3MucGF0aC5kaXJuYW1lKGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gKCIlciBtb2R1bGUgaW5jb3JyZWN0bHkgaW1wb3J0ZWQgZnJvbSAlci4gRXhwZWN0ZWQgJXIuICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJcyB0aGlzIG1vZHVsZSBnbG9iYWxseSBpbnN0YWxsZWQ/IikKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IobXNnICUgKG1vZF9uYW1lLCBtb2R1bGVfZGlyLCBleHBlY3RlZF9kaXIpKQogICAgICAgICAgICAgICAgICAgIHlpZWxkIHNlbGYubG9hZFRlc3RzRnJvbU1vZHVsZShtb2R1bGUpCiAgICAgICAgICAgIGVsaWYgb3MucGF0aC5pc2RpcihmdWxsX3BhdGgpOgogICAgICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguaXNmaWxlKG9zLnBhdGguam9pbihmdWxsX3BhdGgsICdfX2luaXRfXy5weScpKToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIGxvYWRfdGVzdHMgPSBOb25lCiAgICAgICAgICAgICAgICB0ZXN0cyA9IE5vbmUKICAgICAgICAgICAgICAgIGlmIGZubWF0Y2gocGF0aCwgcGF0dGVybik6CiAgICAgICAgICAgICAgICAgICAgIyBvbmx5IGNoZWNrIGxvYWRfdGVzdHMgaWYgdGhlIHBhY2thZ2UgZGlyZWN0b3J5IGl0c2VsZiBtYXRjaGVzIHRoZSBmaWx0ZXIKICAgICAgICAgICAgICAgICAgICBuYW1lID0gc2VsZi5fZ2V0X25hbWVfZnJvbV9wYXRoKGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgICAgICBwYWNrYWdlID0gc2VsZi5fZ2V0X21vZHVsZV9mcm9tX25hbWUobmFtZSkKICAgICAgICAgICAgICAgICAgICBsb2FkX3Rlc3RzID0gZ2V0YXR0cihwYWNrYWdlLCAnbG9hZF90ZXN0cycsIE5vbmUpCiAgICAgICAgICAgICAgICAgICAgdGVzdHMgPSBzZWxmLmxvYWRUZXN0c0Zyb21Nb2R1bGUocGFja2FnZSwgdXNlX2xvYWRfdGVzdHM9RmFsc2UpCgogICAgICAgICAgICAgICAgaWYgbG9hZF90ZXN0cyBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgIGlmIHRlc3RzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAjIHRlc3RzIGxvYWRlZCBmcm9tIHBhY2thZ2UgZmlsZQogICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0ZXN0cwogICAgICAgICAgICAgICAgICAgICMgcmVjdXJzZSBpbnRvIHRoZSBwYWNrYWdlCiAgICAgICAgICAgICAgICAgICAgZm9yIHRlc3QgaW4gc2VsZi5fZmluZF90ZXN0cyhmdWxsX3BhdGgsIHBhdHRlcm4pOgogICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0ZXN0CiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgbG9hZF90ZXN0cyhzZWxmLCB0ZXN0cywgcGF0dGVybikKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIF9tYWtlX2ZhaWxlZF9sb2FkX3Rlc3RzKHBhY2thZ2UuX19uYW1lX18sIGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3VpdGVDbGFzcykKCmRlZmF1bHRUZXN0TG9hZGVyID0gVGVzdExvYWRlcigpCgoKZGVmIF9tYWtlTG9hZGVyKHByZWZpeCwgc29ydFVzaW5nLCBzdWl0ZUNsYXNzPU5vbmUpOgogICAgbG9hZGVyID0gVGVzdExvYWRlcigpCiAgICBsb2FkZXIuc29ydFRlc3RNZXRob2RzVXNpbmcgPSBzb3J0VXNpbmcKICAgIGxvYWRlci50ZXN0TWV0aG9kUHJlZml4ID0gcHJlZml4CiAgICBpZiBzdWl0ZUNsYXNzOgogICAgICAgIGxvYWRlci5zdWl0ZUNsYXNzID0gc3VpdGVDbGFzcwogICAgcmV0dXJuIGxvYWRlcgoKZGVmIGdldFRlc3RDYXNlTmFtZXModGVzdENhc2VDbGFzcywgcHJlZml4LCBzb3J0VXNpbmc9dXRpbC50aHJlZV93YXlfY21wKToKICAgIHJldHVybiBfbWFrZUxvYWRlcihwcmVmaXgsIHNvcnRVc2luZykuZ2V0VGVzdENhc2VOYW1lcyh0ZXN0Q2FzZUNsYXNzKQoKZGVmIG1ha2VTdWl0ZSh0ZXN0Q2FzZUNsYXNzLCBwcmVmaXg9J3Rlc3QnLCBzb3J0VXNpbmc9dXRpbC50aHJlZV93YXlfY21wLAogICAgICAgICAgICAgIHN1aXRlQ2xhc3M9c3VpdGUuVGVzdFN1aXRlKToKICAgIHJldHVybiBfbWFrZUxvYWRlcihwcmVmaXgsIHNvcnRVc2luZywgc3VpdGVDbGFzcykubG9hZFRlc3RzRnJvbVRlc3RDYXNlKAogICAgICAgIHRlc3RDYXNlQ2xhc3MpCgpkZWYgZmluZFRlc3RDYXNlcyhtb2R1bGUsIHByZWZpeD0ndGVzdCcsIHNvcnRVc2luZz11dGlsLnRocmVlX3dheV9jbXAsCiAgICAgICAgICAgICAgICAgIHN1aXRlQ2xhc3M9c3VpdGUuVGVzdFN1aXRlKToKICAgIHJldHVybiBfbWFrZUxvYWRlcihwcmVmaXgsIHNvcnRVc2luZywgc3VpdGVDbGFzcykubG9hZFRlc3RzRnJvbU1vZHVsZShcCiAgICAgICAgbW9kdWxlKQo=',
'/Lib/lib_migration/unittest/signals.py':'aW1wb3J0IHNpZ25hbAppbXBvcnQgd2Vha3JlZgoKZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHdyYXBzCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKCmNsYXNzIF9JbnRlcnJ1cHRIYW5kbGVyKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZGVmYXVsdF9oYW5kbGVyKToKICAgICAgICBzZWxmLmNhbGxlZCA9IEZhbHNlCiAgICAgICAgc2VsZi5kZWZhdWx0X2hhbmRsZXIgPSBkZWZhdWx0X2hhbmRsZXIKCiAgICBkZWYgX19jYWxsX18oc2VsZiwgc2lnbnVtLCBmcmFtZSk6CiAgICAgICAgaW5zdGFsbGVkX2hhbmRsZXIgPSBzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpCiAgICAgICAgaWYgaW5zdGFsbGVkX2hhbmRsZXIgaXMgbm90IHNlbGY6CiAgICAgICAgICAgICMgaWYgd2UgYXJlbid0IHRoZSBpbnN0YWxsZWQgaGFuZGxlciwgdGhlbiBkZWxlZ2F0ZSBpbW1lZGlhdGVseQogICAgICAgICAgICAjIHRvIHRoZSBkZWZhdWx0IGhhbmRsZXIKICAgICAgICAgICAgc2VsZi5kZWZhdWx0X2hhbmRsZXIoc2lnbnVtLCBmcmFtZSkKCiAgICAgICAgaWYgc2VsZi5jYWxsZWQ6CiAgICAgICAgICAgIHNlbGYuZGVmYXVsdF9oYW5kbGVyKHNpZ251bSwgZnJhbWUpCiAgICAgICAgc2VsZi5jYWxsZWQgPSBUcnVlCiAgICAgICAgZm9yIHJlc3VsdCBpbiBfcmVzdWx0cy5rZXlzKCk6CiAgICAgICAgICAgIHJlc3VsdC5zdG9wKCkKCl9yZXN1bHRzID0gd2Vha3JlZi5XZWFrS2V5RGljdGlvbmFyeSgpCmRlZiByZWdpc3RlclJlc3VsdChyZXN1bHQpOgogICAgX3Jlc3VsdHNbcmVzdWx0XSA9IDEKCmRlZiByZW1vdmVSZXN1bHQocmVzdWx0KToKICAgIHJldHVybiBib29sKF9yZXN1bHRzLnBvcChyZXN1bHQsIE5vbmUpKQoKX2ludGVycnVwdF9oYW5kbGVyID0gTm9uZQpkZWYgaW5zdGFsbEhhbmRsZXIoKToKICAgIGdsb2JhbCBfaW50ZXJydXB0X2hhbmRsZXIKICAgIGlmIF9pbnRlcnJ1cHRfaGFuZGxlciBpcyBOb25lOgogICAgICAgIGRlZmF1bHRfaGFuZGxlciA9IHNpZ25hbC5nZXRzaWduYWwoc2lnbmFsLlNJR0lOVCkKICAgICAgICBfaW50ZXJydXB0X2hhbmRsZXIgPSBfSW50ZXJydXB0SGFuZGxlcihkZWZhdWx0X2hhbmRsZXIpCiAgICAgICAgc2lnbmFsLnNpZ25hbChzaWduYWwuU0lHSU5ULCBfaW50ZXJydXB0X2hhbmRsZXIpCgoKZGVmIHJlbW92ZUhhbmRsZXIobWV0aG9kPU5vbmUpOgogICAgaWYgbWV0aG9kIGlzIG5vdCBOb25lOgogICAgICAgIEB3cmFwcyhtZXRob2QpCiAgICAgICAgZGVmIGlubmVyKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgICAgIGluaXRpYWwgPSBzaWduYWwuZ2V0c2lnbmFsKHNpZ25hbC5TSUdJTlQpCiAgICAgICAgICAgIHJlbW92ZUhhbmRsZXIoKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kKCphcmdzLCAqKmt3YXJncykKICAgICAgICAgICAgZmluYWxseToKICAgICAgICAgICAgICAgIHNpZ25hbC5zaWduYWwoc2lnbmFsLlNJR0lOVCwgaW5pdGlhbCkKICAgICAgICByZXR1cm4gaW5uZXIKCiAgICBnbG9iYWwgX2ludGVycnVwdF9oYW5kbGVyCiAgICBpZiBfaW50ZXJydXB0X2hhbmRsZXIgaXMgbm90IE5vbmU6CiAgICAgICAgc2lnbmFsLnNpZ25hbChzaWduYWwuU0lHSU5ULCBfaW50ZXJydXB0X2hhbmRsZXIuZGVmYXVsdF9oYW5kbGVyKQo=',
'/Lib/lib_migration/unittest/case.py':'IiIiVGVzdCBjYXNlIGltcGxlbWVudGF0aW9uIiIiCgppbXBvcnQgc3lzCmltcG9ydCBmdW5jdG9vbHMKaW1wb3J0IGRpZmZsaWIKaW1wb3J0IHBwcmludAppbXBvcnQgcmUKaW1wb3J0IHdhcm5pbmdzCmltcG9ydCBjb2xsZWN0aW9ucwoKZnJvbSAuIGltcG9ydCByZXN1bHQKZnJvbSAudXRpbCBpbXBvcnQgKHN0cmNsYXNzLCBzYWZlX3JlcHIsIHNvcnRlZF9saXN0X2RpZmZlcmVuY2UsCiAgICAgICAgICAgICAgICAgICB1bm9yZGVyYWJsZV9saXN0X2RpZmZlcmVuY2UsIF9jb3VudF9kaWZmX2FsbF9wdXJwb3NlLAogICAgICAgICAgICAgICAgICAgX2NvdW50X2RpZmZfaGFzaGFibGUpCgpfX3VuaXR0ZXN0ID0gVHJ1ZQoKCkRJRkZfT01JVFRFRCA9ICgnXG5EaWZmIGlzICVzIGNoYXJhY3RlcnMgbG9uZy4gJwogICAgICAgICAgICAgICAgICdTZXQgc2VsZi5tYXhEaWZmIHRvIE5vbmUgdG8gc2VlIGl0LicpCgpjbGFzcyBTa2lwVGVzdChFeGNlcHRpb24pOgogICAgIiIiCiAgICBSYWlzZSB0aGlzIGV4Y2VwdGlvbiBpbiBhIHRlc3QgdG8gc2tpcCBpdC4KCiAgICBVc3VhbGx5IHlvdSBjYW4gdXNlIFRlc3RSZXN1bHQuc2tpcCgpIG9yIG9uZSBvZiB0aGUgc2tpcHBpbmcgZGVjb3JhdG9ycwogICAgaW5zdGVhZCBvZiByYWlzaW5nIHRoaXMgZGlyZWN0bHkuCiAgICAiIiIKCmNsYXNzIF9FeHBlY3RlZEZhaWx1cmUoRXhjZXB0aW9uKToKICAgICIiIgogICAgUmFpc2UgdGhpcyB3aGVuIGEgdGVzdCBpcyBleHBlY3RlZCB0byBmYWlsLgoKICAgIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlsLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGV4Y19pbmZvKToKICAgICAgICBzdXBlcihfRXhwZWN0ZWRGYWlsdXJlLCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5leGNfaW5mbyA9IGV4Y19pbmZvCgpjbGFzcyBfVW5leHBlY3RlZFN1Y2Nlc3MoRXhjZXB0aW9uKToKICAgICIiIgogICAgVGhlIHRlc3Qgd2FzIHN1cHBvc2VkIHRvIGZhaWwsIGJ1dCBpdCBkaWRuJ3QhCiAgICAiIiIKCgpjbGFzcyBfT3V0Y29tZShvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuc3VjY2VzcyA9IFRydWUKICAgICAgICBzZWxmLnNraXBwZWQgPSBOb25lCiAgICAgICAgc2VsZi51bmV4cGVjdGVkU3VjY2VzcyA9IE5vbmUKICAgICAgICBzZWxmLmV4cGVjdGVkRmFpbHVyZSA9IE5vbmUKICAgICAgICBzZWxmLmVycm9ycyA9IFtdCiAgICAgICAgc2VsZi5mYWlsdXJlcyA9IFtdCgoKZGVmIF9pZChvYmopOgogICAgcmV0dXJuIG9iagoKZGVmIHNraXAocmVhc29uKToKICAgICIiIgogICAgVW5jb25kaXRpb25hbGx5IHNraXAgYSB0ZXN0LgogICAgIiIiCiAgICBkZWYgZGVjb3JhdG9yKHRlc3RfaXRlbSk6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodGVzdF9pdGVtLCB0eXBlKToKICAgICAgICAgICAgQGZ1bmN0b29scy53cmFwcyh0ZXN0X2l0ZW0pCiAgICAgICAgICAgIGRlZiBza2lwX3dyYXBwZXIoKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAgICAgICAgIHJhaXNlIFNraXBUZXN0KHJlYXNvbikKICAgICAgICAgICAgdGVzdF9pdGVtID0gc2tpcF93cmFwcGVyCgogICAgICAgIHRlc3RfaXRlbS5fX3VuaXR0ZXN0X3NraXBfXyA9IFRydWUKICAgICAgICB0ZXN0X2l0ZW0uX191bml0dGVzdF9za2lwX3doeV9fID0gcmVhc29uCiAgICAgICAgcmV0dXJuIHRlc3RfaXRlbQogICAgcmV0dXJuIGRlY29yYXRvcgoKZGVmIHNraXBJZihjb25kaXRpb24sIHJlYXNvbik6CiAgICAiIiIKICAgIFNraXAgYSB0ZXN0IGlmIHRoZSBjb25kaXRpb24gaXMgdHJ1ZS4KICAgICIiIgogICAgaWYgY29uZGl0aW9uOgogICAgICAgIHJldHVybiBza2lwKHJlYXNvbikKICAgIHJldHVybiBfaWQKCmRlZiBza2lwVW5sZXNzKGNvbmRpdGlvbiwgcmVhc29uKToKICAgICIiIgogICAgU2tpcCBhIHRlc3QgdW5sZXNzIHRoZSBjb25kaXRpb24gaXMgdHJ1ZS4KICAgICIiIgogICAgaWYgbm90IGNvbmRpdGlvbjoKICAgICAgICByZXR1cm4gc2tpcChyZWFzb24pCiAgICByZXR1cm4gX2lkCgoKZGVmIGV4cGVjdGVkRmFpbHVyZShmdW5jKToKICAgIEBmdW5jdG9vbHMud3JhcHMoZnVuYykKICAgIGRlZiB3cmFwcGVyKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmdW5jKCphcmdzLCAqKmt3YXJncykKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByYWlzZSBfRXhwZWN0ZWRGYWlsdXJlKHN5cy5leGNfaW5mbygpKQogICAgICAgIHJhaXNlIF9VbmV4cGVjdGVkU3VjY2VzcwogICAgcmV0dXJuIHdyYXBwZXIKCgpjbGFzcyBfQXNzZXJ0UmFpc2VzQmFzZUNvbnRleHQob2JqZWN0KToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgZXhwZWN0ZWQsIHRlc3RfY2FzZSwgY2FsbGFibGVfb2JqPU5vbmUsCiAgICAgICAgICAgICAgICAgIGV4cGVjdGVkX3JlZ2V4PU5vbmUpOgogICAgICAgIHNlbGYuZXhwZWN0ZWQgPSBleHBlY3RlZAogICAgICAgIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbiA9IHRlc3RfY2FzZS5mYWlsdXJlRXhjZXB0aW9uCiAgICAgICAgaWYgY2FsbGFibGVfb2JqIGlzIG5vdCBOb25lOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZWxmLm9ial9uYW1lID0gY2FsbGFibGVfb2JqLl9fbmFtZV9fCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgIHNlbGYub2JqX25hbWUgPSBzdHIoY2FsbGFibGVfb2JqKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYub2JqX25hbWUgPSBOb25lCiAgICAgICAgaWYgaXNpbnN0YW5jZShleHBlY3RlZF9yZWdleCwgKGJ5dGVzLCBzdHIpKToKICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXggPSByZS5jb21waWxlKGV4cGVjdGVkX3JlZ2V4KQogICAgICAgIHNlbGYuZXhwZWN0ZWRfcmVnZXggPSBleHBlY3RlZF9yZWdleAoKCmNsYXNzIF9Bc3NlcnRSYWlzZXNDb250ZXh0KF9Bc3NlcnRSYWlzZXNCYXNlQ29udGV4dCk6CiAgICAiIiJBIGNvbnRleHQgbWFuYWdlciB1c2VkIHRvIGltcGxlbWVudCBUZXN0Q2FzZS5hc3NlcnRSYWlzZXMqIG1ldGhvZHMuIiIiCgogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCBleGNfdHlwZSwgZXhjX3ZhbHVlLCB0Yik6CiAgICAgICAgaWYgZXhjX3R5cGUgaXMgTm9uZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZXhjX25hbWUgPSBzZWxmLmV4cGVjdGVkLl9fbmFtZV9fCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgIGV4Y19uYW1lID0gc3RyKHNlbGYuZXhwZWN0ZWQpCiAgICAgICAgICAgIGlmIHNlbGYub2JqX25hbWU6CiAgICAgICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24oInswfSBub3QgcmFpc2VkIGJ5IHsxfSIKICAgICAgICAgICAgICAgICAgICAuZm9ybWF0KGV4Y19uYW1lLCBzZWxmLm9ial9uYW1lKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbigiezB9IG5vdCByYWlzZWQiCiAgICAgICAgICAgICAgICAgICAgLmZvcm1hdChleGNfbmFtZSkpCiAgICAgICAgaWYgbm90IGlzc3ViY2xhc3MoZXhjX3R5cGUsIHNlbGYuZXhwZWN0ZWQpOgogICAgICAgICAgICAjIGxldCB1bmV4cGVjdGVkIGV4Y2VwdGlvbnMgcGFzcyB0aHJvdWdoCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICMgc3RvcmUgZXhjZXB0aW9uLCB3aXRob3V0IHRyYWNlYmFjaywgZm9yIGxhdGVyIHJldHJpZXZhbAogICAgICAgIHNlbGYuZXhjZXB0aW9uID0gZXhjX3ZhbHVlLndpdGhfdHJhY2ViYWNrKE5vbmUpCiAgICAgICAgaWYgc2VsZi5leHBlY3RlZF9yZWdleCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgICAgICBleHBlY3RlZF9yZWdleCA9IHNlbGYuZXhwZWN0ZWRfcmVnZXgKICAgICAgICBpZiBub3QgZXhwZWN0ZWRfcmVnZXguc2VhcmNoKHN0cihleGNfdmFsdWUpKToKICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKCciJXMiIGRvZXMgbm90IG1hdGNoICIlcyInICUKICAgICAgICAgICAgICAgICAgICAgKGV4cGVjdGVkX3JlZ2V4LnBhdHRlcm4sIHN0cihleGNfdmFsdWUpKSkKICAgICAgICByZXR1cm4gVHJ1ZQoKCmNsYXNzIF9Bc3NlcnRXYXJuc0NvbnRleHQoX0Fzc2VydFJhaXNlc0Jhc2VDb250ZXh0KToKICAgICIiIkEgY29udGV4dCBtYW5hZ2VyIHVzZWQgdG8gaW1wbGVtZW50IFRlc3RDYXNlLmFzc2VydFdhcm5zKiBtZXRob2RzLiIiIgoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgIyBUaGUgX193YXJuaW5ncmVnaXN0cnlfXydzIG5lZWQgdG8gYmUgaW4gYSBwcmlzdGluZSBzdGF0ZSBmb3IgdGVzdHMKICAgICAgICAjIHRvIHdvcmsgcHJvcGVybHkuCiAgICAgICAgZm9yIHYgaW4gc3lzLm1vZHVsZXMudmFsdWVzKCk6CiAgICAgICAgICAgIGlmIGdldGF0dHIodiwgJ19fd2FybmluZ3JlZ2lzdHJ5X18nLCBOb25lKToKICAgICAgICAgICAgICAgIHYuX193YXJuaW5ncmVnaXN0cnlfXyA9IHt9CiAgICAgICAgc2VsZi53YXJuaW5nc19tYW5hZ2VyID0gd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MocmVjb3JkPVRydWUpCiAgICAgICAgc2VsZi53YXJuaW5ncyA9IHNlbGYud2FybmluZ3NfbWFuYWdlci5fX2VudGVyX18oKQogICAgICAgIHdhcm5pbmdzLnNpbXBsZWZpbHRlcigiYWx3YXlzIiwgc2VsZi5leHBlY3RlZCkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCBleGNfdHlwZSwgZXhjX3ZhbHVlLCB0Yik6CiAgICAgICAgc2VsZi53YXJuaW5nc19tYW5hZ2VyLl9fZXhpdF9fKGV4Y190eXBlLCBleGNfdmFsdWUsIHRiKQogICAgICAgIGlmIGV4Y190eXBlIGlzIG5vdCBOb25lOgogICAgICAgICAgICAjIGxldCB1bmV4cGVjdGVkIGV4Y2VwdGlvbnMgcGFzcyB0aHJvdWdoCiAgICAgICAgICAgIHJldHVybgogICAgICAgIHRyeToKICAgICAgICAgICAgZXhjX25hbWUgPSBzZWxmLmV4cGVjdGVkLl9fbmFtZV9fCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICBleGNfbmFtZSA9IHN0cihzZWxmLmV4cGVjdGVkKQogICAgICAgIGZpcnN0X21hdGNoaW5nID0gTm9uZQogICAgICAgIGZvciBtIGluIHNlbGYud2FybmluZ3M6CiAgICAgICAgICAgIHcgPSBtLm1lc3NhZ2UKICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uodywgc2VsZi5leHBlY3RlZCk6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBmaXJzdF9tYXRjaGluZyBpcyBOb25lOgogICAgICAgICAgICAgICAgZmlyc3RfbWF0Y2hpbmcgPSB3CiAgICAgICAgICAgIGlmIChzZWxmLmV4cGVjdGVkX3JlZ2V4IGlzIG5vdCBOb25lIGFuZAogICAgICAgICAgICAgICAgbm90IHNlbGYuZXhwZWN0ZWRfcmVnZXguc2VhcmNoKHN0cih3KSkpOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIyBzdG9yZSB3YXJuaW5nIGZvciBsYXRlciByZXRyaWV2YWwKICAgICAgICAgICAgc2VsZi53YXJuaW5nID0gdwogICAgICAgICAgICBzZWxmLmZpbGVuYW1lID0gbS5maWxlbmFtZQogICAgICAgICAgICBzZWxmLmxpbmVubyA9IG0ubGluZW5vCiAgICAgICAgICAgIHJldHVybgogICAgICAgICMgTm93IHdlIHNpbXBseSB0cnkgdG8gY2hvb3NlIGEgaGVscGZ1bCBmYWlsdXJlIG1lc3NhZ2UKICAgICAgICBpZiBmaXJzdF9tYXRjaGluZyBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKCciJXMiIGRvZXMgbm90IG1hdGNoICIlcyInICUKICAgICAgICAgICAgICAgICAgICAgKHNlbGYuZXhwZWN0ZWRfcmVnZXgucGF0dGVybiwgc3RyKGZpcnN0X21hdGNoaW5nKSkpCiAgICAgICAgaWYgc2VsZi5vYmpfbmFtZToKICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKCJ7MH0gbm90IHRyaWdnZXJlZCBieSB7MX0iCiAgICAgICAgICAgICAgICAuZm9ybWF0KGV4Y19uYW1lLCBzZWxmLm9ial9uYW1lKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24oInswfSBub3QgdHJpZ2dlcmVkIgogICAgICAgICAgICAgICAgLmZvcm1hdChleGNfbmFtZSkpCgoKY2xhc3MgVGVzdENhc2U6CiNjbGFzcyBUZXN0Q2FzZShvYmplY3QpOgogICAgIiIiQSBjbGFzcyB3aG9zZSBpbnN0YW5jZXMgYXJlIHNpbmdsZSB0ZXN0IGNhc2VzLgoKICAgIEJ5IGRlZmF1bHQsIHRoZSB0ZXN0IGNvZGUgaXRzZWxmIHNob3VsZCBiZSBwbGFjZWQgaW4gYSBtZXRob2QgbmFtZWQKICAgICdydW5UZXN0Jy4KCiAgICBJZiB0aGUgZml4dHVyZSBtYXkgYmUgdXNlZCBmb3IgbWFueSB0ZXN0IGNhc2VzLCBjcmVhdGUgYXMKICAgIG1hbnkgdGVzdCBtZXRob2RzIGFzIGFyZSBuZWVkZWQuIFdoZW4gaW5zdGFudGlhdGluZyBzdWNoIGEgVGVzdENhc2UKICAgIHN1YmNsYXNzLCBzcGVjaWZ5IGluIHRoZSBjb25zdHJ1Y3RvciBhcmd1bWVudHMgdGhlIG5hbWUgb2YgdGhlIHRlc3QgbWV0aG9kCiAgICB0aGF0IHRoZSBpbnN0YW5jZSBpcyB0byBleGVjdXRlLgoKICAgIFRlc3QgYXV0aG9ycyBzaG91bGQgc3ViY2xhc3MgVGVzdENhc2UgZm9yIHRoZWlyIG93biB0ZXN0cy4gQ29uc3RydWN0aW9uCiAgICBhbmQgZGVjb25zdHJ1Y3Rpb24gb2YgdGhlIHRlc3QncyBlbnZpcm9ubWVudCAoJ2ZpeHR1cmUnKSBjYW4gYmUKICAgIGltcGxlbWVudGVkIGJ5IG92ZXJyaWRpbmcgdGhlICdzZXRVcCcgYW5kICd0ZWFyRG93bicgbWV0aG9kcyByZXNwZWN0aXZlbHkuCgogICAgSWYgaXQgaXMgbmVjZXNzYXJ5IHRvIG92ZXJyaWRlIHRoZSBfX2luaXRfXyBtZXRob2QsIHRoZSBiYXNlIGNsYXNzCiAgICBfX2luaXRfXyBtZXRob2QgbXVzdCBhbHdheXMgYmUgY2FsbGVkLiBJdCBpcyBpbXBvcnRhbnQgdGhhdCBzdWJjbGFzc2VzCiAgICBzaG91bGQgbm90IGNoYW5nZSB0aGUgc2lnbmF0dXJlIG9mIHRoZWlyIF9faW5pdF9fIG1ldGhvZCwgc2luY2UgaW5zdGFuY2VzCiAgICBvZiB0aGUgY2xhc3NlcyBhcmUgaW5zdGFudGlhdGVkIGF1dG9tYXRpY2FsbHkgYnkgcGFydHMgb2YgdGhlIGZyYW1ld29yawogICAgaW4gb3JkZXIgdG8gYmUgcnVuLgogICAgIiIiCgogICAgIyBUaGlzIGF0dHJpYnV0ZSBkZXRlcm1pbmVzIHdoaWNoIGV4Y2VwdGlvbiB3aWxsIGJlIHJhaXNlZCB3aGVuCiAgICAjIHRoZSBpbnN0YW5jZSdzIGFzc2VydGlvbiBtZXRob2RzIGZhaWw7IHRlc3QgbWV0aG9kcyByYWlzaW5nIHRoaXMKICAgICMgZXhjZXB0aW9uIHdpbGwgYmUgZGVlbWVkIHRvIGhhdmUgJ2ZhaWxlZCcgcmF0aGVyIHRoYW4gJ2Vycm9yZWQnCgogICAgZmFpbHVyZUV4Y2VwdGlvbiA9IEFzc2VydGlvbkVycm9yCgogICAgIyBUaGlzIGF0dHJpYnV0ZSBkZXRlcm1pbmVzIHdoZXRoZXIgbG9uZyBtZXNzYWdlcyAoaW5jbHVkaW5nIHJlcHIgb2YKICAgICMgb2JqZWN0cyB1c2VkIGluIGFzc2VydCBtZXRob2RzKSB3aWxsIGJlIHByaW50ZWQgb24gZmFpbHVyZSBpbiAqYWRkaXRpb24qCiAgICAjIHRvIGFueSBleHBsaWNpdCBtZXNzYWdlIHBhc3NlZC4KCiAgICBsb25nTWVzc2FnZSA9IFRydWUKCiAgICAjIFRoaXMgYXR0cmlidXRlIHNldHMgdGhlIG1heGltdW0gbGVuZ3RoIG9mIGEgZGlmZiBpbiBmYWlsdXJlIG1lc3NhZ2VzCiAgICAjIGJ5IGFzc2VydCBtZXRob2RzIHVzaW5nIGRpZmZsaWIuIEl0IGlzIGxvb2tlZCB1cCBhcyBhbiBpbnN0YW5jZSBhdHRyaWJ1dGUKICAgICMgc28gY2FuIGJlIGNvbmZpZ3VyZWQgYnkgaW5kaXZpZHVhbCB0ZXN0cyBpZiByZXF1aXJlZC4KCiAgICBtYXhEaWZmID0gODAqOAoKICAgICMgSWYgYSBzdHJpbmcgaXMgbG9uZ2VyIHRoYW4gX2RpZmZUaHJlc2hvbGQsIHVzZSBub3JtYWwgY29tcGFyaXNvbiBpbnN0ZWFkCiAgICAjIG9mIGRpZmZsaWIuICBTZWUgIzExNzYzLgogICAgX2RpZmZUaHJlc2hvbGQgPSAyKioxNgoKICAgICMgQXR0cmlidXRlIHVzZWQgYnkgVGVzdFN1aXRlIGZvciBjbGFzc1NldFVwCgogICAgX2NsYXNzU2V0dXBGYWlsZWQgPSBGYWxzZQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtZXRob2ROYW1lPSdydW5UZXN0Jyk6CiAgICAgICAgIiIiQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBjbGFzcyB0aGF0IHdpbGwgdXNlIHRoZSBuYW1lZCB0ZXN0CiAgICAgICAgICAgbWV0aG9kIHdoZW4gZXhlY3V0ZWQuIFJhaXNlcyBhIFZhbHVlRXJyb3IgaWYgdGhlIGluc3RhbmNlIGRvZXMKICAgICAgICAgICBub3QgaGF2ZSBhIG1ldGhvZCB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl90ZXN0TWV0aG9kTmFtZSA9IG1ldGhvZE5hbWUKICAgICAgICBzZWxmLl9vdXRjb21lRm9yRG9DbGVhbnVwcyA9IE5vbmUKICAgICAgICBzZWxmLl90ZXN0TWV0aG9kRG9jID0gJ05vIHRlc3QnCiAgICAgICAgdHJ5OgogICAgICAgICAgICB0ZXN0TWV0aG9kID0gZ2V0YXR0cihzZWxmLCBtZXRob2ROYW1lKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgaWYgbWV0aG9kTmFtZSAhPSAncnVuVGVzdCc6CiAgICAgICAgICAgICAgICAjIHdlIGFsbG93IGluc3RhbnRpYXRpb24gd2l0aCBubyBleHBsaWNpdCBtZXRob2QgbmFtZQogICAgICAgICAgICAgICAgIyBidXQgbm90IGFuICppbmNvcnJlY3QqIG9yIG1pc3NpbmcgbWV0aG9kIG5hbWUKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5vIHN1Y2ggdGVzdCBtZXRob2QgaW4gJXM6ICVzIiAlCiAgICAgICAgICAgICAgICAgICAgICAoc2VsZi5fX2NsYXNzX18sIG1ldGhvZE5hbWUpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX3Rlc3RNZXRob2REb2MgPSB0ZXN0TWV0aG9kLl9fZG9jX18KICAgICAgICBzZWxmLl9jbGVhbnVwcyA9IFtdCgogICAgICAgICMgTWFwIHR5cGVzIHRvIGN1c3RvbSBhc3NlcnRFcXVhbCBmdW5jdGlvbnMgdGhhdCB3aWxsIGNvbXBhcmUKICAgICAgICAjIGluc3RhbmNlcyBvZiBzYWlkIHR5cGUgaW4gbW9yZSBkZXRhaWwgdG8gZ2VuZXJhdGUgYSBtb3JlIHVzZWZ1bAogICAgICAgICMgZXJyb3IgbWVzc2FnZS4KICAgICAgICBzZWxmLl90eXBlX2VxdWFsaXR5X2Z1bmNzID0ge30KICAgICAgICBzZWxmLmFkZFR5cGVFcXVhbGl0eUZ1bmMoZGljdCwgJ2Fzc2VydERpY3RFcXVhbCcpCiAgICAgICAgc2VsZi5hZGRUeXBlRXF1YWxpdHlGdW5jKGxpc3QsICdhc3NlcnRMaXN0RXF1YWwnKQogICAgICAgIHNlbGYuYWRkVHlwZUVxdWFsaXR5RnVuYyh0dXBsZSwgJ2Fzc2VydFR1cGxlRXF1YWwnKQogICAgICAgIHNlbGYuYWRkVHlwZUVxdWFsaXR5RnVuYyhzZXQsICdhc3NlcnRTZXRFcXVhbCcpCiAgICAgICAgc2VsZi5hZGRUeXBlRXF1YWxpdHlGdW5jKGZyb3plbnNldCwgJ2Fzc2VydFNldEVxdWFsJykKICAgICAgICBzZWxmLmFkZFR5cGVFcXVhbGl0eUZ1bmMoc3RyLCAnYXNzZXJ0TXVsdGlMaW5lRXF1YWwnKQoKICAgIGRlZiBhZGRUeXBlRXF1YWxpdHlGdW5jKHNlbGYsIHR5cGVvYmosIGZ1bmN0aW9uKToKICAgICAgICAiIiJBZGQgYSB0eXBlIHNwZWNpZmljIGFzc2VydEVxdWFsIHN0eWxlIGZ1bmN0aW9uIHRvIGNvbXBhcmUgYSB0eXBlLgoKICAgICAgICBUaGlzIG1ldGhvZCBpcyBmb3IgdXNlIGJ5IFRlc3RDYXNlIHN1YmNsYXNzZXMgdGhhdCBuZWVkIHRvIHJlZ2lzdGVyCiAgICAgICAgdGhlaXIgb3duIHR5cGUgZXF1YWxpdHkgZnVuY3Rpb25zIHRvIHByb3ZpZGUgbmljZXIgZXJyb3IgbWVzc2FnZXMuCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHR5cGVvYmo6IFRoZSBkYXRhIHR5cGUgdG8gY2FsbCB0aGlzIGZ1bmN0aW9uIG9uIHdoZW4gYm90aCB2YWx1ZXMKICAgICAgICAgICAgICAgICAgICBhcmUgb2YgdGhlIHNhbWUgdHlwZSBpbiBhc3NlcnRFcXVhbCgpLgogICAgICAgICAgICBmdW5jdGlvbjogVGhlIGNhbGxhYmxlIHRha2luZyB0d28gYXJndW1lbnRzIGFuZCBhbiBvcHRpb25hbAogICAgICAgICAgICAgICAgICAgIG1zZz0gYXJndW1lbnQgdGhhdCByYWlzZXMgc2VsZi5mYWlsdXJlRXhjZXB0aW9uIHdpdGggYQogICAgICAgICAgICAgICAgICAgIHVzZWZ1bCBlcnJvciBtZXNzYWdlIHdoZW4gdGhlIHR3byBhcmd1bWVudHMgYXJlIG5vdCBlcXVhbC4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl90eXBlX2VxdWFsaXR5X2Z1bmNzW3R5cGVvYmpdID0gZnVuY3Rpb24KCiAgICBkZWYgYWRkQ2xlYW51cChzZWxmLCBmdW5jdGlvbiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAiIiJBZGQgYSBmdW5jdGlvbiwgd2l0aCBhcmd1bWVudHMsIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSB0ZXN0IGlzCiAgICAgICAgY29tcGxldGVkLiBGdW5jdGlvbnMgYWRkZWQgYXJlIGNhbGxlZCBvbiBhIExJRk8gYmFzaXMgYW5kIGFyZQogICAgICAgIGNhbGxlZCBhZnRlciB0ZWFyRG93biBvbiB0ZXN0IGZhaWx1cmUgb3Igc3VjY2Vzcy4KCiAgICAgICAgQ2xlYW51cCBpdGVtcyBhcmUgY2FsbGVkIGV2ZW4gaWYgc2V0VXAgZmFpbHMgKHVubGlrZSB0ZWFyRG93bikuIiIiCiAgICAgICAgc2VsZi5fY2xlYW51cHMuYXBwZW5kKChmdW5jdGlvbiwgYXJncywga3dhcmdzKSkKCiAgICBkZWYgc2V0VXAoc2VsZik6CiAgICAgICAgIkhvb2sgbWV0aG9kIGZvciBzZXR0aW5nIHVwIHRoZSB0ZXN0IGZpeHR1cmUgYmVmb3JlIGV4ZXJjaXNpbmcgaXQuIgogICAgICAgIHBhc3MKCiAgICBkZWYgdGVhckRvd24oc2VsZik6CiAgICAgICAgIkhvb2sgbWV0aG9kIGZvciBkZWNvbnN0cnVjdGluZyB0aGUgdGVzdCBmaXh0dXJlIGFmdGVyIHRlc3RpbmcgaXQuIgogICAgICAgIHBhc3MKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBzZXRVcENsYXNzKGNscyk6CiAgICAgICAgIkhvb2sgbWV0aG9kIGZvciBzZXR0aW5nIHVwIGNsYXNzIGZpeHR1cmUgYmVmb3JlIHJ1bm5pbmcgdGVzdHMgaW4gdGhlIGNsYXNzLiIKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiB0ZWFyRG93bkNsYXNzKGNscyk6CiAgICAgICAgIkhvb2sgbWV0aG9kIGZvciBkZWNvbnN0cnVjdGluZyB0aGUgY2xhc3MgZml4dHVyZSBhZnRlciBydW5uaW5nIGFsbCB0ZXN0cyBpbiB0aGUgY2xhc3MuIgoKICAgIGRlZiBjb3VudFRlc3RDYXNlcyhzZWxmKToKICAgICAgICByZXR1cm4gMQoKICAgIGRlZiBkZWZhdWx0VGVzdFJlc3VsdChzZWxmKToKICAgICAgICByZXR1cm4gcmVzdWx0LlRlc3RSZXN1bHQoKQoKICAgIGRlZiBzaG9ydERlc2NyaXB0aW9uKHNlbGYpOgogICAgICAgICIiIlJldHVybnMgYSBvbmUtbGluZSBkZXNjcmlwdGlvbiBvZiB0aGUgdGVzdCwgb3IgTm9uZSBpZiBubwogICAgICAgIGRlc2NyaXB0aW9uIGhhcyBiZWVuIHByb3ZpZGVkLgoKICAgICAgICBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBsaW5lIG9mCiAgICAgICAgdGhlIHNwZWNpZmllZCB0ZXN0IG1ldGhvZCdzIGRvY3N0cmluZy4KICAgICAgICAiIiIKICAgICAgICBkb2MgPSBzZWxmLl90ZXN0TWV0aG9kRG9jCiAgICAgICAgcmV0dXJuIGRvYyBhbmQgZG9jLnNwbGl0KCJcbiIpWzBdLnN0cmlwKCkgb3IgTm9uZQoKCiAgICBkZWYgaWQoc2VsZik6CiAgICAgICAgcmV0dXJuICIlcy4lcyIgJSAoc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pLCBzZWxmLl90ZXN0TWV0aG9kTmFtZSkKCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiB0eXBlKHNlbGYpIGlzIG5vdCB0eXBlKG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCgogICAgICAgIHJldHVybiBzZWxmLl90ZXN0TWV0aG9kTmFtZSA9PSBvdGhlci5fdGVzdE1ldGhvZE5hbWUKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2goKHR5cGUoc2VsZiksIHNlbGYuX3Rlc3RNZXRob2ROYW1lKSkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gIiVzICglcykiICUgKHNlbGYuX3Rlc3RNZXRob2ROYW1lLCBzdHJjbGFzcyhzZWxmLl9fY2xhc3NfXykpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAiPCVzIHRlc3RNZXRob2Q9JXM+IiAlIFwKICAgICAgICAgICAgICAgKHN0cmNsYXNzKHNlbGYuX19jbGFzc19fKSwgc2VsZi5fdGVzdE1ldGhvZE5hbWUpCgogICAgZGVmIF9hZGRTa2lwKHNlbGYsIHJlc3VsdCwgcmVhc29uKToKICAgICAgICBhZGRTa2lwID0gZ2V0YXR0cihyZXN1bHQsICdhZGRTa2lwJywgTm9uZSkKICAgICAgICBpZiBhZGRTa2lwIGlzIG5vdCBOb25lOgogICAgICAgICAgICBhZGRTa2lwKHNlbGYsIHJlYXNvbikKICAgICAgICBlbHNlOgogICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJUZXN0UmVzdWx0IGhhcyBubyBhZGRTa2lwIG1ldGhvZCwgc2tpcHMgbm90IHJlcG9ydGVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBSdW50aW1lV2FybmluZywgMikKICAgICAgICAgICAgcmVzdWx0LmFkZFN1Y2Nlc3Moc2VsZikKCiAgICBkZWYgX2V4ZWN1dGVUZXN0UGFydChzZWxmLCBmdW5jdGlvbiwgb3V0Y29tZSwgaXNUZXN0PUZhbHNlKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZ1bmN0aW9uKCkKICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgICAgIHJhaXNlCiAgICAgICAgZXhjZXB0IFNraXBUZXN0IGFzIGU6CiAgICAgICAgICAgIG91dGNvbWUuc3VjY2VzcyA9IEZhbHNlCiAgICAgICAgICAgIG91dGNvbWUuc2tpcHBlZCA9IHN0cihlKQogICAgICAgIGV4Y2VwdCBfVW5leHBlY3RlZFN1Y2Nlc3M6CiAgICAgICAgICAgIGV4Y19pbmZvID0gc3lzLmV4Y19pbmZvKCkKICAgICAgICAgICAgb3V0Y29tZS5zdWNjZXNzID0gRmFsc2UKICAgICAgICAgICAgaWYgaXNUZXN0OgogICAgICAgICAgICAgICAgb3V0Y29tZS51bmV4cGVjdGVkU3VjY2VzcyA9IGV4Y19pbmZvCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBvdXRjb21lLmVycm9ycy5hcHBlbmQoZXhjX2luZm8pCiAgICAgICAgZXhjZXB0IF9FeHBlY3RlZEZhaWx1cmU6CiAgICAgICAgICAgIG91dGNvbWUuc3VjY2VzcyA9IEZhbHNlCiAgICAgICAgICAgIGV4Y19pbmZvID0gc3lzLmV4Y19pbmZvKCkKICAgICAgICAgICAgaWYgaXNUZXN0OgogICAgICAgICAgICAgICAgb3V0Y29tZS5leHBlY3RlZEZhaWx1cmUgPSBleGNfaW5mbwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgb3V0Y29tZS5lcnJvcnMuYXBwZW5kKGV4Y19pbmZvKQogICAgICAgICNmaXhtZSBicnl0aG9uIFN5bnRheCBlcnJvcgogICAgICAgICNleGNlcHQgc2VsZi5mYWlsdXJlRXhjZXB0aW9uOgogICAgICAgICMgICAgb3V0Y29tZS5zdWNjZXNzID0gRmFsc2UKICAgICAgICAjICAgIG91dGNvbWUuZmFpbHVyZXMuYXBwZW5kKHN5cy5leGNfaW5mbygpKQogICAgICAgICMgICAgZXhjX2luZm8gPSBzeXMuZXhjX2luZm8oKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgb3V0Y29tZS5zdWNjZXNzID0gRmFsc2UKICAgICAgICAgICAgb3V0Y29tZS5lcnJvcnMuYXBwZW5kKHN5cy5leGNfaW5mbygpKQoKICAgIGRlZiBydW4oc2VsZiwgcmVzdWx0PU5vbmUpOgogICAgICAgIG9yaWdfcmVzdWx0ID0gcmVzdWx0CiAgICAgICAgaWYgcmVzdWx0IGlzIE5vbmU6CiAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYuZGVmYXVsdFRlc3RSZXN1bHQoKQogICAgICAgICAgICBzdGFydFRlc3RSdW4gPSBnZXRhdHRyKHJlc3VsdCwgJ3N0YXJ0VGVzdFJ1bicsIE5vbmUpCiAgICAgICAgICAgIGlmIHN0YXJ0VGVzdFJ1biBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHN0YXJ0VGVzdFJ1bigpCgogICAgICAgIHJlc3VsdC5zdGFydFRlc3Qoc2VsZikKCiAgICAgICAgdGVzdE1ldGhvZCA9IGdldGF0dHIoc2VsZiwgc2VsZi5fdGVzdE1ldGhvZE5hbWUpCiAgICAgICAgaWYgKGdldGF0dHIoc2VsZi5fX2NsYXNzX18sICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKSBvcgogICAgICAgICAgICBnZXRhdHRyKHRlc3RNZXRob2QsICJfX3VuaXR0ZXN0X3NraXBfXyIsIEZhbHNlKSk6CiAgICAgICAgICAgICMgSWYgdGhlIGNsYXNzIG9yIG1ldGhvZCB3YXMgc2tpcHBlZC4KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2tpcF93aHkgPSAoZ2V0YXR0cihzZWxmLl9fY2xhc3NfXywgJ19fdW5pdHRlc3Rfc2tpcF93aHlfXycsICcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgZ2V0YXR0cih0ZXN0TWV0aG9kLCAnX191bml0dGVzdF9za2lwX3doeV9fJywgJycpKQogICAgICAgICAgICAgICAgc2VsZi5fYWRkU2tpcChyZXN1bHQsIHNraXBfd2h5KQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgcmVzdWx0LnN0b3BUZXN0KHNlbGYpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIHRyeToKICAgICAgICAgICAgb3V0Y29tZSA9IF9PdXRjb21lKCkKICAgICAgICAgICAgc2VsZi5fb3V0Y29tZUZvckRvQ2xlYW51cHMgPSBvdXRjb21lCgogICAgICAgICAgICBzZWxmLl9leGVjdXRlVGVzdFBhcnQoc2VsZi5zZXRVcCwgb3V0Y29tZSkKICAgICAgICAgICAgaWYgb3V0Y29tZS5zdWNjZXNzOgogICAgICAgICAgICAgICAgc2VsZi5fZXhlY3V0ZVRlc3RQYXJ0KHRlc3RNZXRob2QsIG91dGNvbWUsIGlzVGVzdD1UcnVlKQogICAgICAgICAgICAgICAgc2VsZi5fZXhlY3V0ZVRlc3RQYXJ0KHNlbGYudGVhckRvd24sIG91dGNvbWUpCgogICAgICAgICAgICBzZWxmLmRvQ2xlYW51cHMoKQogICAgICAgICAgICBpZiBvdXRjb21lLnN1Y2Nlc3M6CiAgICAgICAgICAgICAgICByZXN1bHQuYWRkU3VjY2VzcyhzZWxmKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgb3V0Y29tZS5za2lwcGVkIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2FkZFNraXAocmVzdWx0LCBvdXRjb21lLnNraXBwZWQpCiAgICAgICAgICAgICAgICBmb3IgZXhjX2luZm8gaW4gb3V0Y29tZS5lcnJvcnM6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFkZEVycm9yKHNlbGYsIGV4Y19pbmZvKQogICAgICAgICAgICAgICAgZm9yIGV4Y19pbmZvIGluIG91dGNvbWUuZmFpbHVyZXM6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFkZEZhaWx1cmUoc2VsZiwgZXhjX2luZm8pCiAgICAgICAgICAgICAgICBpZiBvdXRjb21lLnVuZXhwZWN0ZWRTdWNjZXNzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIGFkZFVuZXhwZWN0ZWRTdWNjZXNzID0gZ2V0YXR0cihyZXN1bHQsICdhZGRVbmV4cGVjdGVkU3VjY2VzcycsIE5vbmUpCiAgICAgICAgICAgICAgICAgICAgaWYgYWRkVW5leHBlY3RlZFN1Y2Nlc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFVuZXhwZWN0ZWRTdWNjZXNzKHNlbGYpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybigiVGVzdFJlc3VsdCBoYXMgbm8gYWRkVW5leHBlY3RlZFN1Y2Nlc3MgbWV0aG9kLCByZXBvcnRpbmcgYXMgZmFpbHVyZXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJ1bnRpbWVXYXJuaW5nKQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYWRkRmFpbHVyZShzZWxmLCBvdXRjb21lLnVuZXhwZWN0ZWRTdWNjZXNzKQoKICAgICAgICAgICAgICAgIGlmIG91dGNvbWUuZXhwZWN0ZWRGYWlsdXJlIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIGFkZEV4cGVjdGVkRmFpbHVyZSA9IGdldGF0dHIocmVzdWx0LCAnYWRkRXhwZWN0ZWRGYWlsdXJlJywgTm9uZSkKICAgICAgICAgICAgICAgICAgICBpZiBhZGRFeHBlY3RlZEZhaWx1cmUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV4cGVjdGVkRmFpbHVyZShzZWxmLCBvdXRjb21lLmV4cGVjdGVkRmFpbHVyZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJUZXN0UmVzdWx0IGhhcyBubyBhZGRFeHBlY3RlZEZhaWx1cmUgbWV0aG9kLCByZXBvcnRpbmcgYXMgcGFzc2VzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSdW50aW1lV2FybmluZykKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFkZFN1Y2Nlc3Moc2VsZikKCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgcmVzdWx0LnN0b3BUZXN0KHNlbGYpCiAgICAgICAgICAgIGlmIG9yaWdfcmVzdWx0IGlzIE5vbmU6CiAgICAgICAgICAgICAgICBzdG9wVGVzdFJ1biA9IGdldGF0dHIocmVzdWx0LCAnc3RvcFRlc3RSdW4nLCBOb25lKQogICAgICAgICAgICAgICAgaWYgc3RvcFRlc3RSdW4gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgc3RvcFRlc3RSdW4oKQoKICAgIGRlZiBkb0NsZWFudXBzKHNlbGYpOgogICAgICAgICIiIkV4ZWN1dGUgYWxsIGNsZWFudXAgZnVuY3Rpb25zLiBOb3JtYWxseSBjYWxsZWQgZm9yIHlvdSBhZnRlcgogICAgICAgIHRlYXJEb3duLiIiIgogICAgICAgIG91dGNvbWUgPSBzZWxmLl9vdXRjb21lRm9yRG9DbGVhbnVwcyBvciBfT3V0Y29tZSgpCiAgICAgICAgd2hpbGUgc2VsZi5fY2xlYW51cHM6CiAgICAgICAgICAgIGZ1bmN0aW9uLCBhcmdzLCBrd2FyZ3MgPSBzZWxmLl9jbGVhbnVwcy5wb3AoKQogICAgICAgICAgICBwYXJ0ID0gbGFtYmRhOiBmdW5jdGlvbigqYXJncywgKiprd2FyZ3MpCiAgICAgICAgICAgIHNlbGYuX2V4ZWN1dGVUZXN0UGFydChwYXJ0LCBvdXRjb21lKQoKICAgICAgICAjIHJldHVybiB0aGlzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQogICAgICAgICMgZXZlbiB0aG91Z2ggd2Ugbm8gbG9uZ2VyIHVzIGl0IGludGVybmFsbHkKICAgICAgICByZXR1cm4gb3V0Y29tZS5zdWNjZXNzCgogICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3ZHMpOgogICAgICAgIHJldHVybiBzZWxmLnJ1bigqYXJncywgKiprd2RzKQoKICAgIGRlZiBkZWJ1ZyhzZWxmKToKICAgICAgICAiIiJSdW4gdGhlIHRlc3Qgd2l0aG91dCBjb2xsZWN0aW5nIGVycm9ycyBpbiBhIFRlc3RSZXN1bHQiIiIKICAgICAgICBzZWxmLnNldFVwKCkKICAgICAgICBnZXRhdHRyKHNlbGYsIHNlbGYuX3Rlc3RNZXRob2ROYW1lKSgpCiAgICAgICAgc2VsZi50ZWFyRG93bigpCiAgICAgICAgd2hpbGUgc2VsZi5fY2xlYW51cHM6CiAgICAgICAgICAgIGZ1bmN0aW9uLCBhcmdzLCBrd2FyZ3MgPSBzZWxmLl9jbGVhbnVwcy5wb3AoLTEpCiAgICAgICAgICAgIGZ1bmN0aW9uKCphcmdzLCAqKmt3YXJncykKCiAgICBkZWYgc2tpcFRlc3Qoc2VsZiwgcmVhc29uKToKICAgICAgICAiIiJTa2lwIHRoaXMgdGVzdC4iIiIKICAgICAgICByYWlzZSBTa2lwVGVzdChyZWFzb24pCgogICAgZGVmIGZhaWwoc2VsZiwgbXNnPU5vbmUpOgogICAgICAgICIiIkZhaWwgaW1tZWRpYXRlbHksIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuIiIiCiAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgYXNzZXJ0RmFsc2Uoc2VsZiwgZXhwciwgbXNnPU5vbmUpOgogICAgICAgICIiIkNoZWNrIHRoYXQgdGhlIGV4cHJlc3Npb24gaXMgZmFsc2UuIiIiCiAgICAgICAgaWYgZXhwcjoKICAgICAgICAgICAgbXNnID0gc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csICIlcyBpcyBub3QgZmFsc2UiICUgc2FmZV9yZXByKGV4cHIpKQogICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKICAgIGRlZiBhc3NlcnRUcnVlKHNlbGYsIGV4cHIsIG1zZz1Ob25lKToKICAgICAgICAiIiJDaGVjayB0aGF0IHRoZSBleHByZXNzaW9uIGlzIHRydWUuIiIiCiAgICAgICAgaWYgbm90IGV4cHI6CiAgICAgICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCAiJXMgaXMgbm90IHRydWUiICUgc2FmZV9yZXByKGV4cHIpKQogICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKICAgIGRlZiBfZm9ybWF0TWVzc2FnZShzZWxmLCBtc2csIHN0YW5kYXJkTXNnKToKICAgICAgICAiIiJIb25vdXIgdGhlIGxvbmdNZXNzYWdlIGF0dHJpYnV0ZSB3aGVuIGdlbmVyYXRpbmcgZmFpbHVyZSBtZXNzYWdlcy4KICAgICAgICBJZiBsb25nTWVzc2FnZSBpcyBGYWxzZSB0aGlzIG1lYW5zOgogICAgICAgICogVXNlIG9ubHkgYW4gZXhwbGljaXQgbWVzc2FnZSBpZiBpdCBpcyBwcm92aWRlZAogICAgICAgICogT3RoZXJ3aXNlIHVzZSB0aGUgc3RhbmRhcmQgbWVzc2FnZSBmb3IgdGhlIGFzc2VydAoKICAgICAgICBJZiBsb25nTWVzc2FnZSBpcyBUcnVlOgogICAgICAgICogVXNlIHRoZSBzdGFuZGFyZCBtZXNzYWdlCiAgICAgICAgKiBJZiBhbiBleHBsaWNpdCBtZXNzYWdlIGlzIHByb3ZpZGVkLCBwbHVzICcgOiAnIGFuZCB0aGUgZXhwbGljaXQgbWVzc2FnZQogICAgICAgICIiIgogICAgICAgIGlmIG5vdCBzZWxmLmxvbmdNZXNzYWdlOgogICAgICAgICAgICByZXR1cm4gbXNnIG9yIHN0YW5kYXJkTXNnCiAgICAgICAgaWYgbXNnIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZE1zZwogICAgICAgIHRyeToKICAgICAgICAgICAgIyBkb24ndCBzd2l0Y2ggdG8gJ3t9JyBmb3JtYXR0aW5nIGluIFB5dGhvbiAyLlgKICAgICAgICAgICAgIyBpdCBjaGFuZ2VzIHRoZSB3YXkgdW5pY29kZSBpbnB1dCBpcyBoYW5kbGVkCiAgICAgICAgICAgIHJldHVybiAnJXMgOiAlcycgJSAoc3RhbmRhcmRNc2csIG1zZykKICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yOgogICAgICAgICAgICByZXR1cm4gICclcyA6ICVzJyAlIChzYWZlX3JlcHIoc3RhbmRhcmRNc2cpLCBzYWZlX3JlcHIobXNnKSkKCgogICAgZGVmIGFzc2VydFJhaXNlcyhzZWxmLCBleGNDbGFzcywgY2FsbGFibGVPYmo9Tm9uZSwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAiIiJGYWlsIHVubGVzcyBhbiBleGNlcHRpb24gb2YgY2xhc3MgZXhjQ2xhc3MgaXMgdGhyb3duCiAgICAgICAgICAgYnkgY2FsbGFibGVPYmogd2hlbiBpbnZva2VkIHdpdGggYXJndW1lbnRzIGFyZ3MgYW5kIGtleXdvcmQKICAgICAgICAgICBhcmd1bWVudHMga3dhcmdzLiBJZiBhIGRpZmZlcmVudCB0eXBlIG9mIGV4Y2VwdGlvbiBpcwogICAgICAgICAgIHRocm93biwgaXQgd2lsbCBub3QgYmUgY2F1Z2h0LCBhbmQgdGhlIHRlc3QgY2FzZSB3aWxsIGJlCiAgICAgICAgICAgZGVlbWVkIHRvIGhhdmUgc3VmZmVyZWQgYW4gZXJyb3IsIGV4YWN0bHkgYXMgZm9yIGFuCiAgICAgICAgICAgdW5leHBlY3RlZCBleGNlcHRpb24uCgogICAgICAgICAgIElmIGNhbGxlZCB3aXRoIGNhbGxhYmxlT2JqIG9taXR0ZWQgb3IgTm9uZSwgd2lsbCByZXR1cm4gYQogICAgICAgICAgIGNvbnRleHQgb2JqZWN0IHVzZWQgbGlrZSB0aGlzOjoKCiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0UmFpc2VzKFNvbWVFeGNlcHRpb24pOgogICAgICAgICAgICAgICAgICAgIGRvX3NvbWV0aGluZygpCgogICAgICAgICAgIFRoZSBjb250ZXh0IG1hbmFnZXIga2VlcHMgYSByZWZlcmVuY2UgdG8gdGhlIGV4Y2VwdGlvbiBhcwogICAgICAgICAgIHRoZSAnZXhjZXB0aW9uJyBhdHRyaWJ1dGUuIFRoaXMgYWxsb3dzIHlvdSB0byBpbnNwZWN0IHRoZQogICAgICAgICAgIGV4Y2VwdGlvbiBhZnRlciB0aGUgYXNzZXJ0aW9uOjoKCiAgICAgICAgICAgICAgIHdpdGggc2VsZi5hc3NlcnRSYWlzZXMoU29tZUV4Y2VwdGlvbikgYXMgY206CiAgICAgICAgICAgICAgICAgICBkb19zb21ldGhpbmcoKQogICAgICAgICAgICAgICB0aGVfZXhjZXB0aW9uID0gY20uZXhjZXB0aW9uCiAgICAgICAgICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwodGhlX2V4Y2VwdGlvbi5lcnJvcl9jb2RlLCAzKQogICAgICAgICIiIgogICAgICAgIGNvbnRleHQgPSBfQXNzZXJ0UmFpc2VzQ29udGV4dChleGNDbGFzcywgc2VsZiwgY2FsbGFibGVPYmopCiAgICAgICAgaWYgY2FsbGFibGVPYmogaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQKICAgICAgICAjZml4bWUgYnJ5dGhvbiBzeW50YXggZXJyb3IKICAgICAgICAjd2l0aCBjb250ZXh0OgogICAgICAgICMgICAgY2FsbGFibGVPYmooKmFyZ3MsICoqa3dhcmdzKQoKICAgIGRlZiBhc3NlcnRXYXJucyhzZWxmLCBleHBlY3RlZF93YXJuaW5nLCBjYWxsYWJsZV9vYmo9Tm9uZSwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAiIiJGYWlsIHVubGVzcyBhIHdhcm5pbmcgb2YgY2xhc3Mgd2FybkNsYXNzIGlzIHRyaWdnZXJlZAogICAgICAgICAgIGJ5IGNhbGxhYmxlT2JqIHdoZW4gaW52b2tlZCB3aXRoIGFyZ3VtZW50cyBhcmdzIGFuZCBrZXl3b3JkCiAgICAgICAgICAgYXJndW1lbnRzIGt3YXJncy4gIElmIGEgZGlmZmVyZW50IHR5cGUgb2Ygd2FybmluZyBpcwogICAgICAgICAgIHRyaWdnZXJlZCwgaXQgd2lsbCBub3QgYmUgaGFuZGxlZDogZGVwZW5kaW5nIG9uIHRoZSBvdGhlcgogICAgICAgICAgIHdhcm5pbmcgZmlsdGVyaW5nIHJ1bGVzIGluIGVmZmVjdCwgaXQgbWlnaHQgYmUgc2lsZW5jZWQsIHByaW50ZWQKICAgICAgICAgICBvdXQsIG9yIHJhaXNlZCBhcyBhbiBleGNlcHRpb24uCgogICAgICAgICAgIElmIGNhbGxlZCB3aXRoIGNhbGxhYmxlT2JqIG9taXR0ZWQgb3IgTm9uZSwgd2lsbCByZXR1cm4gYQogICAgICAgICAgIGNvbnRleHQgb2JqZWN0IHVzZWQgbGlrZSB0aGlzOjoKCiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuYXNzZXJ0V2FybnMoU29tZVdhcm5pbmcpOgogICAgICAgICAgICAgICAgICAgIGRvX3NvbWV0aGluZygpCgogICAgICAgICAgIFRoZSBjb250ZXh0IG1hbmFnZXIga2VlcHMgYSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IG1hdGNoaW5nCiAgICAgICAgICAgd2FybmluZyBhcyB0aGUgJ3dhcm5pbmcnIGF0dHJpYnV0ZTsgc2ltaWxhcmx5LCB0aGUgJ2ZpbGVuYW1lJwogICAgICAgICAgIGFuZCAnbGluZW5vJyBhdHRyaWJ1dGVzIGdpdmUgeW91IGluZm9ybWF0aW9uIGFib3V0IHRoZSBsaW5lCiAgICAgICAgICAgb2YgUHl0aG9uIGNvZGUgZnJvbSB3aGljaCB0aGUgd2FybmluZyB3YXMgdHJpZ2dlcmVkLgogICAgICAgICAgIFRoaXMgYWxsb3dzIHlvdSB0byBpbnNwZWN0IHRoZSB3YXJuaW5nIGFmdGVyIHRoZSBhc3NlcnRpb246OgoKICAgICAgICAgICAgICAgd2l0aCBzZWxmLmFzc2VydFdhcm5zKFNvbWVXYXJuaW5nKSBhcyBjbToKICAgICAgICAgICAgICAgICAgIGRvX3NvbWV0aGluZygpCiAgICAgICAgICAgICAgIHRoZV93YXJuaW5nID0gY20ud2FybmluZwogICAgICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHRoZV93YXJuaW5nLnNvbWVfYXR0cmlidXRlLCAxNDcpCiAgICAgICAgIiIiCiAgICAgICAgY29udGV4dCA9IF9Bc3NlcnRXYXJuc0NvbnRleHQoZXhwZWN0ZWRfd2FybmluZywgc2VsZiwgY2FsbGFibGVfb2JqKQogICAgICAgIGlmIGNhbGxhYmxlX29iaiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gY29udGV4dAogICAgICAgICNmaXhtZSBicnl0aG9uIHN5bnRheCBlcnJvcgogICAgICAgICN3aXRoIGNvbnRleHQ6CiAgICAgICAgIyAgICBjYWxsYWJsZV9vYmooKmFyZ3MsICoqa3dhcmdzKQoKICAgIGRlZiBfZ2V0QXNzZXJ0RXF1YWxpdHlGdW5jKHNlbGYsIGZpcnN0LCBzZWNvbmQpOgogICAgICAgICIiIkdldCBhIGRldGFpbGVkIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIHRoZSB0eXBlcyBvZiB0aGUgdHdvIGFyZ3MuCgogICAgICAgIFJldHVybnM6IEEgY2FsbGFibGUgYWNjZXB0aW5nIChmaXJzdCwgc2Vjb25kLCBtc2c9Tm9uZSkgdGhhdCB3aWxsCiAgICAgICAgcmFpc2UgYSBmYWlsdXJlIGV4Y2VwdGlvbiBpZiBmaXJzdCAhPSBzZWNvbmQgd2l0aCBhIHVzZWZ1bCBodW1hbgogICAgICAgIHJlYWRhYmxlIGVycm9yIG1lc3NhZ2UgZm9yIHRob3NlIHR5cGVzLgogICAgICAgICIiIgogICAgICAgICMKICAgICAgICAjIE5PVEUoZ3JlZ29yeS5wLnNtaXRoKTogSSBjb25zaWRlcmVkIGlzaW5zdGFuY2UoZmlyc3QsIHR5cGUoc2Vjb25kKSkKICAgICAgICAjIGFuZCB2aWNlIHZlcnNhLiAgSSBvcHRlZCBmb3IgdGhlIGNvbnNlcnZhdGl2ZSBhcHByb2FjaCBpbiBjYXNlCiAgICAgICAgIyBzdWJjbGFzc2VzIGFyZSBub3QgaW50ZW5kZWQgdG8gYmUgY29tcGFyZWQgaW4gZGV0YWlsIHRvIHRoZWlyIHN1cGVyCiAgICAgICAgIyBjbGFzcyBpbnN0YW5jZXMgdXNpbmcgYSB0eXBlIGVxdWFsaXR5IGZ1bmMuICBUaGlzIG1lYW5zIHRlc3RpbmcKICAgICAgICAjIHN1YnR5cGVzIHdvbid0IGF1dG9tYWdpY2FsbHkgdXNlIHRoZSBkZXRhaWxlZCBjb21wYXJpc29uLiAgQ2FsbGVycwogICAgICAgICMgc2hvdWxkIHVzZSB0aGVpciB0eXBlIHNwZWNpZmljIGFzc2VydFNwYW1FcXVhbCBtZXRob2QgdG8gY29tcGFyZQogICAgICAgICMgc3ViY2xhc3NlcyBpZiB0aGUgZGV0YWlsZWQgY29tcGFyaXNvbiBpcyBkZXNpcmVkIGFuZCBhcHByb3ByaWF0ZS4KICAgICAgICAjIFNlZSB0aGUgZGlzY3Vzc2lvbiBpbiBodHRwOi8vYnVncy5weXRob24ub3JnL2lzc3VlMjU3OC4KICAgICAgICAjCiAgICAgICAgaWYgdHlwZShmaXJzdCkgaXMgdHlwZShzZWNvbmQpOgogICAgICAgICAgICBhc3NlcnRlciA9IHNlbGYuX3R5cGVfZXF1YWxpdHlfZnVuY3MuZ2V0KHR5cGUoZmlyc3QpKQogICAgICAgICAgICBpZiBhc3NlcnRlciBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYXNzZXJ0ZXIsIHN0cik6CiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0ZXIgPSBnZXRhdHRyKHNlbGYsIGFzc2VydGVyKQogICAgICAgICAgICAgICAgcmV0dXJuIGFzc2VydGVyCgogICAgICAgIHJldHVybiBzZWxmLl9iYXNlQXNzZXJ0RXF1YWwKCiAgICBkZWYgX2Jhc2VBc3NlcnRFcXVhbChzZWxmLCBmaXJzdCwgc2Vjb25kLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiVGhlIGRlZmF1bHQgYXNzZXJ0RXF1YWwgaW1wbGVtZW50YXRpb24sIG5vdCB0eXBlIHNwZWNpZmljLiIiIgogICAgICAgIGlmIG5vdCBmaXJzdCA9PSBzZWNvbmQ6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzICE9ICVzJyAlIChzYWZlX3JlcHIoZmlyc3QpLCBzYWZlX3JlcHIoc2Vjb25kKSkKICAgICAgICAgICAgbXNnID0gc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKQogICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKICAgIGRlZiBhc3NlcnRFcXVhbChzZWxmLCBmaXJzdCwgc2Vjb25kLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiRmFpbCBpZiB0aGUgdHdvIG9iamVjdHMgYXJlIHVuZXF1YWwgYXMgZGV0ZXJtaW5lZCBieSB0aGUgJz09JwogICAgICAgICAgIG9wZXJhdG9yLgogICAgICAgICIiIgogICAgICAgIGFzc2VydGlvbl9mdW5jID0gc2VsZi5fZ2V0QXNzZXJ0RXF1YWxpdHlGdW5jKGZpcnN0LCBzZWNvbmQpCiAgICAgICAgYXNzZXJ0aW9uX2Z1bmMoZmlyc3QsIHNlY29uZCwgbXNnPW1zZykKCiAgICBkZWYgYXNzZXJ0Tm90RXF1YWwoc2VsZiwgZmlyc3QsIHNlY29uZCwgbXNnPU5vbmUpOgogICAgICAgICIiIkZhaWwgaWYgdGhlIHR3byBvYmplY3RzIGFyZSBlcXVhbCBhcyBkZXRlcm1pbmVkIGJ5IHRoZSAnPT0nCiAgICAgICAgICAgb3BlcmF0b3IuCiAgICAgICAgIiIiCiAgICAgICAgaWYgbm90IGZpcnN0ICE9IHNlY29uZDoKICAgICAgICAgICAgbXNnID0gc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csICclcyA9PSAlcycgJSAoc2FmZV9yZXByKGZpcnN0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfcmVwcihzZWNvbmQpKSkKICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKG1zZykKCiAgICBkZWYgYXNzZXJ0QWxtb3N0RXF1YWwoc2VsZiwgZmlyc3QsIHNlY29uZCwgcGxhY2VzPU5vbmUsIG1zZz1Ob25lLAogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhPU5vbmUpOgogICAgICAgICIiIkZhaWwgaWYgdGhlIHR3byBvYmplY3RzIGFyZSB1bmVxdWFsIGFzIGRldGVybWluZWQgYnkgdGhlaXIKICAgICAgICAgICBkaWZmZXJlbmNlIHJvdW5kZWQgdG8gdGhlIGdpdmVuIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcwogICAgICAgICAgIChkZWZhdWx0IDcpIGFuZCBjb21wYXJpbmcgdG8gemVybywgb3IgYnkgY29tcGFyaW5nIHRoYXQgdGhlCiAgICAgICAgICAgYmV0d2VlbiB0aGUgdHdvIG9iamVjdHMgaXMgbW9yZSB0aGFuIHRoZSBnaXZlbiBkZWx0YS4KCiAgICAgICAgICAgTm90ZSB0aGF0IGRlY2ltYWwgcGxhY2VzIChmcm9tIHplcm8pIGFyZSB1c3VhbGx5IG5vdCB0aGUgc2FtZQogICAgICAgICAgIGFzIHNpZ25pZmljYW50IGRpZ2l0cyAobWVhc3VyZWQgZnJvbSB0aGUgbW9zdCBzaWduZmljYW50IGRpZ2l0KS4KCiAgICAgICAgICAgSWYgdGhlIHR3byBvYmplY3RzIGNvbXBhcmUgZXF1YWwgdGhlbiB0aGV5IHdpbGwgYXV0b21hdGljYWxseQogICAgICAgICAgIGNvbXBhcmUgYWxtb3N0IGVxdWFsLgogICAgICAgICIiIgogICAgICAgIGlmIGZpcnN0ID09IHNlY29uZDoKICAgICAgICAgICAgIyBzaG9ydGN1dAogICAgICAgICAgICByZXR1cm4KICAgICAgICBpZiBkZWx0YSBpcyBub3QgTm9uZSBhbmQgcGxhY2VzIGlzIG5vdCBOb25lOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInNwZWNpZnkgZGVsdGEgb3IgcGxhY2VzIG5vdCBib3RoIikKCiAgICAgICAgaWYgZGVsdGEgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIGFicyhmaXJzdCAtIHNlY29uZCkgPD0gZGVsdGE6CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzICE9ICVzIHdpdGhpbiAlcyBkZWx0YScgJSAoc2FmZV9yZXByKGZpcnN0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoc2Vjb25kKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoZGVsdGEpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIHBsYWNlcyBpcyBOb25lOgogICAgICAgICAgICAgICAgcGxhY2VzID0gNwoKICAgICAgICAgICAgaWYgcm91bmQoYWJzKHNlY29uZC1maXJzdCksIHBsYWNlcykgPT0gMDoKICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnJXMgIT0gJXMgd2l0aGluICVyIHBsYWNlcycgJSAoc2FmZV9yZXByKGZpcnN0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfcmVwcihzZWNvbmQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VzKQogICAgICAgIG1zZyA9IHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykKICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKICAgIGRlZiBhc3NlcnROb3RBbG1vc3RFcXVhbChzZWxmLCBmaXJzdCwgc2Vjb25kLCBwbGFjZXM9Tm9uZSwgbXNnPU5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGE9Tm9uZSk6CiAgICAgICAgIiIiRmFpbCBpZiB0aGUgdHdvIG9iamVjdHMgYXJlIGVxdWFsIGFzIGRldGVybWluZWQgYnkgdGhlaXIKICAgICAgICAgICBkaWZmZXJlbmNlIHJvdW5kZWQgdG8gdGhlIGdpdmVuIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcwogICAgICAgICAgIChkZWZhdWx0IDcpIGFuZCBjb21wYXJpbmcgdG8gemVybywgb3IgYnkgY29tcGFyaW5nIHRoYXQgdGhlCiAgICAgICAgICAgYmV0d2VlbiB0aGUgdHdvIG9iamVjdHMgaXMgbGVzcyB0aGFuIHRoZSBnaXZlbiBkZWx0YS4KCiAgICAgICAgICAgTm90ZSB0aGF0IGRlY2ltYWwgcGxhY2VzIChmcm9tIHplcm8pIGFyZSB1c3VhbGx5IG5vdCB0aGUgc2FtZQogICAgICAgICAgIGFzIHNpZ25pZmljYW50IGRpZ2l0cyAobWVhc3VyZWQgZnJvbSB0aGUgbW9zdCBzaWduZmljYW50IGRpZ2l0KS4KCiAgICAgICAgICAgT2JqZWN0cyB0aGF0IGFyZSBlcXVhbCBhdXRvbWF0aWNhbGx5IGZhaWwuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZGVsdGEgaXMgbm90IE5vbmUgYW5kIHBsYWNlcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJzcGVjaWZ5IGRlbHRhIG9yIHBsYWNlcyBub3QgYm90aCIpCiAgICAgICAgaWYgZGVsdGEgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIG5vdCAoZmlyc3QgPT0gc2Vjb25kKSBhbmQgYWJzKGZpcnN0IC0gc2Vjb25kKSA+IGRlbHRhOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzID09ICVzIHdpdGhpbiAlcyBkZWx0YScgJSAoc2FmZV9yZXByKGZpcnN0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoc2Vjb25kKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoZGVsdGEpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIHBsYWNlcyBpcyBOb25lOgogICAgICAgICAgICAgICAgcGxhY2VzID0gNwogICAgICAgICAgICBpZiBub3QgKGZpcnN0ID09IHNlY29uZCkgYW5kIHJvdW5kKGFicyhzZWNvbmQtZmlyc3QpLCBwbGFjZXMpICE9IDA6CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnJXMgPT0gJXMgd2l0aGluICVyIHBsYWNlcycgJSAoc2FmZV9yZXByKGZpcnN0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKHNlY29uZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlcykKCiAgICAgICAgbXNnID0gc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKQogICAgICAgIHJhaXNlIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbihtc2cpCgoKICAgIGRlZiBhc3NlcnRTZXF1ZW5jZUVxdWFsKHNlbGYsIHNlcTEsIHNlcTIsIG1zZz1Ob25lLCBzZXFfdHlwZT1Ob25lKToKICAgICAgICAiIiJBbiBlcXVhbGl0eSBhc3NlcnRpb24gZm9yIG9yZGVyZWQgc2VxdWVuY2VzIChsaWtlIGxpc3RzIGFuZCB0dXBsZXMpLgoKICAgICAgICBGb3IgdGhlIHB1cnBvc2VzIG9mIHRoaXMgZnVuY3Rpb24sIGEgdmFsaWQgb3JkZXJlZCBzZXF1ZW5jZSB0eXBlIGlzIG9uZQogICAgICAgIHdoaWNoIGNhbiBiZSBpbmRleGVkLCBoYXMgYSBsZW5ndGgsIGFuZCBoYXMgYW4gZXF1YWxpdHkgb3BlcmF0b3IuCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHNlcTE6IFRoZSBmaXJzdCBzZXF1ZW5jZSB0byBjb21wYXJlLgogICAgICAgICAgICBzZXEyOiBUaGUgc2Vjb25kIHNlcXVlbmNlIHRvIGNvbXBhcmUuCiAgICAgICAgICAgIHNlcV90eXBlOiBUaGUgZXhwZWN0ZWQgZGF0YXR5cGUgb2YgdGhlIHNlcXVlbmNlcywgb3IgTm9uZSBpZiBubwogICAgICAgICAgICAgICAgICAgIGRhdGF0eXBlIHNob3VsZCBiZSBlbmZvcmNlZC4KICAgICAgICAgICAgbXNnOiBPcHRpb25hbCBtZXNzYWdlIHRvIHVzZSBvbiBmYWlsdXJlIGluc3RlYWQgb2YgYSBsaXN0IG9mCiAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMuCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VxX3R5cGUgIT0gTm9uZToKICAgICAgICAgICAgc2VxX3R5cGVfbmFtZSA9IHNlcV90eXBlLl9fbmFtZV9fCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHNlcTEsIHNlcV90eXBlKToKICAgICAgICAgICAgICAgIHJhaXNlIHNlbGYuZmFpbHVyZUV4Y2VwdGlvbignRmlyc3Qgc2VxdWVuY2UgaXMgbm90IGEgJXM6ICVzJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJSAoc2VxX3R5cGVfbmFtZSwgc2FmZV9yZXByKHNlcTEpKSkKICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc2VxMiwgc2VxX3R5cGUpOgogICAgICAgICAgICAgICAgcmFpc2Ugc2VsZi5mYWlsdXJlRXhjZXB0aW9uKCdTZWNvbmQgc2VxdWVuY2UgaXMgbm90IGEgJXM6ICVzJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJSAoc2VxX3R5cGVfbmFtZSwgc2FmZV9yZXByKHNlcTIpKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZXFfdHlwZV9uYW1lID0gInNlcXVlbmNlIgoKICAgICAgICBkaWZmZXJpbmcgPSBOb25lCiAgICAgICAgdHJ5OgogICAgICAgICAgICBsZW4xID0gbGVuKHNlcTEpCiAgICAgICAgZXhjZXB0IChUeXBlRXJyb3IsIE5vdEltcGxlbWVudGVkRXJyb3IpOgogICAgICAgICAgICBkaWZmZXJpbmcgPSAnRmlyc3QgJXMgaGFzIG5vIGxlbmd0aC4gICAgTm9uLXNlcXVlbmNlPycgJSAoCiAgICAgICAgICAgICAgICAgICAgc2VxX3R5cGVfbmFtZSkKCiAgICAgICAgaWYgZGlmZmVyaW5nIGlzIE5vbmU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGxlbjIgPSBsZW4oc2VxMikKICAgICAgICAgICAgZXhjZXB0IChUeXBlRXJyb3IsIE5vdEltcGxlbWVudGVkRXJyb3IpOgogICAgICAgICAgICAgICAgZGlmZmVyaW5nID0gJ1NlY29uZCAlcyBoYXMgbm8gbGVuZ3RoLiAgICBOb24tc2VxdWVuY2U/JyAlICgKICAgICAgICAgICAgICAgICAgICAgICAgc2VxX3R5cGVfbmFtZSkKCiAgICAgICAgaWYgZGlmZmVyaW5nIGlzIE5vbmU6CiAgICAgICAgICAgIGlmIHNlcTEgPT0gc2VxMjoKICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgc2VxMV9yZXByID0gc2FmZV9yZXByKHNlcTEpCiAgICAgICAgICAgIHNlcTJfcmVwciA9IHNhZmVfcmVwcihzZXEyKQogICAgICAgICAgICBpZiBsZW4oc2VxMV9yZXByKSA+IDMwOgogICAgICAgICAgICAgICAgc2VxMV9yZXByID0gc2VxMV9yZXByWzozMF0gKyAnLi4uJwogICAgICAgICAgICBpZiBsZW4oc2VxMl9yZXByKSA+IDMwOgogICAgICAgICAgICAgICAgc2VxMl9yZXByID0gc2VxMl9yZXByWzozMF0gKyAnLi4uJwogICAgICAgICAgICBlbGVtZW50cyA9IChzZXFfdHlwZV9uYW1lLmNhcGl0YWxpemUoKSwgc2VxMV9yZXByLCBzZXEyX3JlcHIpCiAgICAgICAgICAgIGRpZmZlcmluZyA9ICclc3MgZGlmZmVyOiAlcyAhPSAlc1xuJyAlIGVsZW1lbnRzCgogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShtaW4obGVuMSwgbGVuMikpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGl0ZW0xID0gc2VxMVtpXQogICAgICAgICAgICAgICAgZXhjZXB0IChUeXBlRXJyb3IsIEluZGV4RXJyb3IsIE5vdEltcGxlbWVudGVkRXJyb3IpOgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmluZyArPSAoJ1xuVW5hYmxlIHRvIGluZGV4IGVsZW1lbnQgJWQgb2YgZmlyc3QgJXNcbicgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSwgc2VxX3R5cGVfbmFtZSkpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaXRlbTIgPSBzZXEyW2ldCiAgICAgICAgICAgICAgICBleGNlcHQgKFR5cGVFcnJvciwgSW5kZXhFcnJvciwgTm90SW1wbGVtZW50ZWRFcnJvcik6CiAgICAgICAgICAgICAgICAgICAgZGlmZmVyaW5nICs9ICgnXG5VbmFibGUgdG8gaW5kZXggZWxlbWVudCAlZCBvZiBzZWNvbmQgJXNcbicgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSwgc2VxX3R5cGVfbmFtZSkpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICBpZiBpdGVtMSAhPSBpdGVtMjoKICAgICAgICAgICAgICAgICAgICBkaWZmZXJpbmcgKz0gKCdcbkZpcnN0IGRpZmZlcmluZyBlbGVtZW50ICVkOlxuJXNcbiVzXG4nICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGksIGl0ZW0xLCBpdGVtMikpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIChsZW4xID09IGxlbjIgYW5kIHNlcV90eXBlIGlzIE5vbmUgYW5kCiAgICAgICAgICAgICAgICAgICAgdHlwZShzZXExKSAhPSB0eXBlKHNlcTIpKToKICAgICAgICAgICAgICAgICAgICAjIFRoZSBzZXF1ZW5jZXMgYXJlIHRoZSBzYW1lLCBidXQgaGF2ZSBkaWZmZXJpbmcgdHlwZXMuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICBpZiBsZW4xID4gbGVuMjoKICAgICAgICAgICAgICAgIGRpZmZlcmluZyArPSAoJ1xuRmlyc3QgJXMgY29udGFpbnMgJWQgYWRkaXRpb25hbCAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VsZW1lbnRzLlxuJyAlIChzZXFfdHlwZV9uYW1lLCBsZW4xIC0gbGVuMikpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgZGlmZmVyaW5nICs9ICgnRmlyc3QgZXh0cmEgZWxlbWVudCAlZDpcbiVzXG4nICUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsZW4yLCBzZXExW2xlbjJdKSkKICAgICAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBJbmRleEVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yKToKICAgICAgICAgICAgICAgICAgICBkaWZmZXJpbmcgKz0gKCdVbmFibGUgdG8gaW5kZXggZWxlbWVudCAlZCAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb2YgZmlyc3QgJXNcbicgJSAobGVuMiwgc2VxX3R5cGVfbmFtZSkpCiAgICAgICAgICAgIGVsaWYgbGVuMSA8IGxlbjI6CiAgICAgICAgICAgICAgICBkaWZmZXJpbmcgKz0gKCdcblNlY29uZCAlcyBjb250YWlucyAlZCBhZGRpdGlvbmFsICcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZWxlbWVudHMuXG4nICUgKHNlcV90eXBlX25hbWUsIGxlbjIgLSBsZW4xKSkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBkaWZmZXJpbmcgKz0gKCdGaXJzdCBleHRyYSBlbGVtZW50ICVkOlxuJXNcbicgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGxlbjEsIHNlcTJbbGVuMV0pKQogICAgICAgICAgICAgICAgZXhjZXB0IChUeXBlRXJyb3IsIEluZGV4RXJyb3IsIE5vdEltcGxlbWVudGVkRXJyb3IpOgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmluZyArPSAoJ1VuYWJsZSB0byBpbmRleCBlbGVtZW50ICVkICcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvZiBzZWNvbmQgJXNcbicgJSAobGVuMSwgc2VxX3R5cGVfbmFtZSkpCiAgICAgICAgc3RhbmRhcmRNc2cgPSBkaWZmZXJpbmcKICAgICAgICBkaWZmTXNnID0gJ1xuJyArICdcbicuam9pbigKICAgICAgICAgICAgZGlmZmxpYi5uZGlmZihwcHJpbnQucGZvcm1hdChzZXExKS5zcGxpdGxpbmVzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgcHByaW50LnBmb3JtYXQoc2VxMikuc3BsaXRsaW5lcygpKSkKCiAgICAgICAgc3RhbmRhcmRNc2cgPSBzZWxmLl90cnVuY2F0ZU1lc3NhZ2Uoc3RhbmRhcmRNc2csIGRpZmZNc2cpCiAgICAgICAgbXNnID0gc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKQogICAgICAgIHNlbGYuZmFpbChtc2cpCgogICAgZGVmIF90cnVuY2F0ZU1lc3NhZ2Uoc2VsZiwgbWVzc2FnZSwgZGlmZik6CiAgICAgICAgbWF4X2RpZmYgPSBzZWxmLm1heERpZmYKICAgICAgICBpZiBtYXhfZGlmZiBpcyBOb25lIG9yIGxlbihkaWZmKSA8PSBtYXhfZGlmZjoKICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UgKyBkaWZmCiAgICAgICAgcmV0dXJuIG1lc3NhZ2UgKyAoRElGRl9PTUlUVEVEICUgbGVuKGRpZmYpKQoKICAgIGRlZiBhc3NlcnRMaXN0RXF1YWwoc2VsZiwgbGlzdDEsIGxpc3QyLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiQSBsaXN0LXNwZWNpZmljIGVxdWFsaXR5IGFzc2VydGlvbi4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgbGlzdDE6IFRoZSBmaXJzdCBsaXN0IHRvIGNvbXBhcmUuCiAgICAgICAgICAgIGxpc3QyOiBUaGUgc2Vjb25kIGxpc3QgdG8gY29tcGFyZS4KICAgICAgICAgICAgbXNnOiBPcHRpb25hbCBtZXNzYWdlIHRvIHVzZSBvbiBmYWlsdXJlIGluc3RlYWQgb2YgYSBsaXN0IG9mCiAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMuCgogICAgICAgICIiIgogICAgICAgIHNlbGYuYXNzZXJ0U2VxdWVuY2VFcXVhbChsaXN0MSwgbGlzdDIsIG1zZywgc2VxX3R5cGU9bGlzdCkKCiAgICBkZWYgYXNzZXJ0VHVwbGVFcXVhbChzZWxmLCB0dXBsZTEsIHR1cGxlMiwgbXNnPU5vbmUpOgogICAgICAgICIiIkEgdHVwbGUtc3BlY2lmaWMgZXF1YWxpdHkgYXNzZXJ0aW9uLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICB0dXBsZTE6IFRoZSBmaXJzdCB0dXBsZSB0byBjb21wYXJlLgogICAgICAgICAgICB0dXBsZTI6IFRoZSBzZWNvbmQgdHVwbGUgdG8gY29tcGFyZS4KICAgICAgICAgICAgbXNnOiBPcHRpb25hbCBtZXNzYWdlIHRvIHVzZSBvbiBmYWlsdXJlIGluc3RlYWQgb2YgYSBsaXN0IG9mCiAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5hc3NlcnRTZXF1ZW5jZUVxdWFsKHR1cGxlMSwgdHVwbGUyLCBtc2csIHNlcV90eXBlPXR1cGxlKQoKICAgIGRlZiBhc3NlcnRTZXRFcXVhbChzZWxmLCBzZXQxLCBzZXQyLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiQSBzZXQtc3BlY2lmaWMgZXF1YWxpdHkgYXNzZXJ0aW9uLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBzZXQxOiBUaGUgZmlyc3Qgc2V0IHRvIGNvbXBhcmUuCiAgICAgICAgICAgIHNldDI6IFRoZSBzZWNvbmQgc2V0IHRvIGNvbXBhcmUuCiAgICAgICAgICAgIG1zZzogT3B0aW9uYWwgbWVzc2FnZSB0byB1c2Ugb24gZmFpbHVyZSBpbnN0ZWFkIG9mIGEgbGlzdCBvZgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLgoKICAgICAgICBhc3NlcnRTZXRFcXVhbCB1c2VzIGR1Y2t0eXBpbmcgdG8gc3VwcG9ydCBkaWZmZXJlbnQgdHlwZXMgb2Ygc2V0cywgYW5kCiAgICAgICAgaXMgb3B0aW1pemVkIGZvciBzZXRzIHNwZWNpZmljYWxseSAocGFyYW1ldGVycyBtdXN0IHN1cHBvcnQgYQogICAgICAgIGRpZmZlcmVuY2UgbWV0aG9kKS4KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRpZmZlcmVuY2UxID0gc2V0MS5kaWZmZXJlbmNlKHNldDIpCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvciBhcyBlOgogICAgICAgICAgICBzZWxmLmZhaWwoJ2ludmFsaWQgdHlwZSB3aGVuIGF0dGVtcHRpbmcgc2V0IGRpZmZlcmVuY2U6ICVzJyAlIGUpCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZmFpbCgnZmlyc3QgYXJndW1lbnQgZG9lcyBub3Qgc3VwcG9ydCBzZXQgZGlmZmVyZW5jZTogJXMnICUgZSkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBkaWZmZXJlbmNlMiA9IHNldDIuZGlmZmVyZW5jZShzZXQxKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3IgYXMgZToKICAgICAgICAgICAgc2VsZi5mYWlsKCdpbnZhbGlkIHR5cGUgd2hlbiBhdHRlbXB0aW5nIHNldCBkaWZmZXJlbmNlOiAlcycgJSBlKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlOgogICAgICAgICAgICBzZWxmLmZhaWwoJ3NlY29uZCBhcmd1bWVudCBkb2VzIG5vdCBzdXBwb3J0IHNldCBkaWZmZXJlbmNlOiAlcycgJSBlKQoKICAgICAgICBpZiBub3QgKGRpZmZlcmVuY2UxIG9yIGRpZmZlcmVuY2UyKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGxpbmVzID0gW10KICAgICAgICBpZiBkaWZmZXJlbmNlMToKICAgICAgICAgICAgbGluZXMuYXBwZW5kKCdJdGVtcyBpbiB0aGUgZmlyc3Qgc2V0IGJ1dCBub3QgdGhlIHNlY29uZDonKQogICAgICAgICAgICBmb3IgaXRlbSBpbiBkaWZmZXJlbmNlMToKICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChyZXByKGl0ZW0pKQogICAgICAgIGlmIGRpZmZlcmVuY2UyOgogICAgICAgICAgICBsaW5lcy5hcHBlbmQoJ0l0ZW1zIGluIHRoZSBzZWNvbmQgc2V0IGJ1dCBub3QgdGhlIGZpcnN0OicpCiAgICAgICAgICAgIGZvciBpdGVtIGluIGRpZmZlcmVuY2UyOgogICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKHJlcHIoaXRlbSkpCgogICAgICAgIHN0YW5kYXJkTXNnID0gJ1xuJy5qb2luKGxpbmVzKQogICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnRJbihzZWxmLCBtZW1iZXIsIGNvbnRhaW5lciwgbXNnPU5vbmUpOgogICAgICAgICIiIkp1c3QgbGlrZSBzZWxmLmFzc2VydFRydWUoYSBpbiBiKSwgYnV0IHdpdGggYSBuaWNlciBkZWZhdWx0IG1lc3NhZ2UuIiIiCiAgICAgICAgaWYgbWVtYmVyIG5vdCBpbiBjb250YWluZXI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIG5vdCBmb3VuZCBpbiAlcycgJSAoc2FmZV9yZXByKG1lbWJlciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKGNvbnRhaW5lcikpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnROb3RJbihzZWxmLCBtZW1iZXIsIGNvbnRhaW5lciwgbXNnPU5vbmUpOgogICAgICAgICIiIkp1c3QgbGlrZSBzZWxmLmFzc2VydFRydWUoYSBub3QgaW4gYiksIGJ1dCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIG1lbWJlciBpbiBjb250YWluZXI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIHVuZXhwZWN0ZWRseSBmb3VuZCBpbiAlcycgJSAoc2FmZV9yZXByKG1lbWJlciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKGNvbnRhaW5lcikpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnRJcyhzZWxmLCBleHByMSwgZXhwcjIsIG1zZz1Ob25lKToKICAgICAgICAiIiJKdXN0IGxpa2Ugc2VsZi5hc3NlcnRUcnVlKGEgaXMgYiksIGJ1dCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIGV4cHIxIGlzIG5vdCBleHByMjoKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnJXMgaXMgbm90ICVzJyAlIChzYWZlX3JlcHIoZXhwcjEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoZXhwcjIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0SXNOb3Qoc2VsZiwgZXhwcjEsIGV4cHIyLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiSnVzdCBsaWtlIHNlbGYuYXNzZXJ0VHJ1ZShhIGlzIG5vdCBiKSwgYnV0IHdpdGggYSBuaWNlciBkZWZhdWx0IG1lc3NhZ2UuIiIiCiAgICAgICAgaWYgZXhwcjEgaXMgZXhwcjI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJ3VuZXhwZWN0ZWRseSBpZGVudGljYWw6ICVzJyAlIChzYWZlX3JlcHIoZXhwcjEpLCkKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydERpY3RFcXVhbChzZWxmLCBkMSwgZDIsIG1zZz1Ob25lKToKICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoZDEsIGRpY3QsICdGaXJzdCBhcmd1bWVudCBpcyBub3QgYSBkaWN0aW9uYXJ5JykKICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoZDIsIGRpY3QsICdTZWNvbmQgYXJndW1lbnQgaXMgbm90IGEgZGljdGlvbmFyeScpCgogICAgICAgIGlmIGQxICE9IGQyOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICclcyAhPSAlcycgJSAoc2FmZV9yZXByKGQxLCBUcnVlKSwgc2FmZV9yZXByKGQyLCBUcnVlKSkKICAgICAgICAgICAgZGlmZiA9ICgnXG4nICsgJ1xuJy5qb2luKGRpZmZsaWIubmRpZmYoCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBwcmludC5wZm9ybWF0KGQxKS5zcGxpdGxpbmVzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBwcmludC5wZm9ybWF0KGQyKS5zcGxpdGxpbmVzKCkpKSkKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSBzZWxmLl90cnVuY2F0ZU1lc3NhZ2Uoc3RhbmRhcmRNc2csIGRpZmYpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnREaWN0Q29udGFpbnNTdWJzZXQoc2VsZiwgc3Vic2V0LCBkaWN0aW9uYXJ5LCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiQ2hlY2tzIHdoZXRoZXIgZGljdGlvbmFyeSBpcyBhIHN1cGVyc2V0IG9mIHN1YnNldC4iIiIKICAgICAgICB3YXJuaW5ncy53YXJuKCdhc3NlcnREaWN0Q29udGFpbnNTdWJzZXQgaXMgZGVwcmVjYXRlZCcsCiAgICAgICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcpCiAgICAgICAgbWlzc2luZyA9IFtdCiAgICAgICAgbWlzbWF0Y2hlZCA9IFtdCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gc3Vic2V0Lml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGtleSBub3QgaW4gZGljdGlvbmFyeToKICAgICAgICAgICAgICAgIG1pc3NpbmcuYXBwZW5kKGtleSkKICAgICAgICAgICAgZWxpZiB2YWx1ZSAhPSBkaWN0aW9uYXJ5W2tleV06CiAgICAgICAgICAgICAgICBtaXNtYXRjaGVkLmFwcGVuZCgnJXMsIGV4cGVjdGVkOiAlcywgYWN0dWFsOiAlcycgJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHNhZmVfcmVwcihrZXkpLCBzYWZlX3JlcHIodmFsdWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfcmVwcihkaWN0aW9uYXJ5W2tleV0pKSkKCiAgICAgICAgaWYgbm90IChtaXNzaW5nIG9yIG1pc21hdGNoZWQpOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc3RhbmRhcmRNc2cgPSAnJwogICAgICAgIGlmIG1pc3Npbmc6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJ01pc3Npbmc6ICVzJyAlICcsJy5qb2luKHNhZmVfcmVwcihtKSBmb3IgbSBpbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlzc2luZykKICAgICAgICBpZiBtaXNtYXRjaGVkOgogICAgICAgICAgICBpZiBzdGFuZGFyZE1zZzoKICAgICAgICAgICAgICAgIHN0YW5kYXJkTXNnICs9ICc7ICcKICAgICAgICAgICAgc3RhbmRhcmRNc2cgKz0gJ01pc21hdGNoZWQgdmFsdWVzOiAlcycgJSAnLCcuam9pbihtaXNtYXRjaGVkKQoKICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0U2FtZUVsZW1lbnRzKHNlbGYsIGV4cGVjdGVkX3NlcSwgYWN0dWFsX3NlcSwgbXNnPU5vbmUpOgogICAgICAgICIiIkFuIHVub3JkZXJlZCBzZXF1ZW5jZSBzcGVjaWZpYyBjb21wYXJpc29uLgoKICAgICAgICBSYWlzZXMgd2l0aCBhbiBlcnJvciBtZXNzYWdlIGxpc3Rpbmcgd2hpY2ggZWxlbWVudHMgb2YgZXhwZWN0ZWRfc2VxCiAgICAgICAgYXJlIG1pc3NpbmcgZnJvbSBhY3R1YWxfc2VxIGFuZCB2aWNlIHZlcnNhIGlmIGFueS4KCiAgICAgICAgRHVwbGljYXRlIGVsZW1lbnRzIGFyZSBpZ25vcmVkIHdoZW4gY29tcGFyaW5nICpleHBlY3RlZF9zZXEqIGFuZAogICAgICAgICphY3R1YWxfc2VxKi4gSXQgaXMgdGhlIGVxdWl2YWxlbnQgb2YgYGBhc3NlcnRFcXVhbChzZXQoZXhwZWN0ZWQpLAogICAgICAgIHNldChhY3R1YWwpKWBgIGJ1dCBpdCB3b3JrcyB3aXRoIHNlcXVlbmNlcyBvZiB1bmhhc2hhYmxlIG9iamVjdHMgYXMKICAgICAgICB3ZWxsLgogICAgICAgICIiIgogICAgICAgIHdhcm5pbmdzLndhcm4oJ2Fzc2VydFNhbWVFbGVtZW50cyBpcyBkZXByZWNhdGVkJywKICAgICAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGV4cGVjdGVkID0gc2V0KGV4cGVjdGVkX3NlcSkKICAgICAgICAgICAgYWN0dWFsID0gc2V0KGFjdHVhbF9zZXEpCiAgICAgICAgICAgIG1pc3NpbmcgPSBzb3J0ZWQoZXhwZWN0ZWQuZGlmZmVyZW5jZShhY3R1YWwpKQogICAgICAgICAgICB1bmV4cGVjdGVkID0gc29ydGVkKGFjdHVhbC5kaWZmZXJlbmNlKGV4cGVjdGVkKSkKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAjIEZhbGwgYmFjayB0byBzbG93ZXIgbGlzdC1jb21wYXJlIGlmIGFueSBvZiB0aGUgb2JqZWN0cyBhcmUKICAgICAgICAgICAgIyBub3QgaGFzaGFibGUuCiAgICAgICAgICAgIGV4cGVjdGVkID0gbGlzdChleHBlY3RlZF9zZXEpCiAgICAgICAgICAgIGFjdHVhbCA9IGxpc3QoYWN0dWFsX3NlcSkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZXhwZWN0ZWQuc29ydCgpCiAgICAgICAgICAgICAgICBhY3R1YWwuc29ydCgpCiAgICAgICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgICAgICAgICBtaXNzaW5nLCB1bmV4cGVjdGVkID0gdW5vcmRlcmFibGVfbGlzdF9kaWZmZXJlbmNlKGV4cGVjdGVkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWwpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBtaXNzaW5nLCB1bmV4cGVjdGVkID0gc29ydGVkX2xpc3RfZGlmZmVyZW5jZShleHBlY3RlZCwgYWN0dWFsKQogICAgICAgIGVycm9ycyA9IFtdCiAgICAgICAgaWYgbWlzc2luZzoKICAgICAgICAgICAgZXJyb3JzLmFwcGVuZCgnRXhwZWN0ZWQsIGJ1dCBtaXNzaW5nOlxuICAgICVzJyAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKG1pc3NpbmcpKQogICAgICAgIGlmIHVuZXhwZWN0ZWQ6CiAgICAgICAgICAgIGVycm9ycy5hcHBlbmQoJ1VuZXhwZWN0ZWQsIGJ1dCBwcmVzZW50OlxuICAgICVzJyAlCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9yZXByKHVuZXhwZWN0ZWQpKQogICAgICAgIGlmIGVycm9yczoKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnXG4nLmpvaW4oZXJyb3JzKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCgogICAgZGVmIGFzc2VydENvdW50RXF1YWwoc2VsZiwgZmlyc3QsIHNlY29uZCwgbXNnPU5vbmUpOgogICAgICAgICIiIkFuIHVub3JkZXJlZCBzZXF1ZW5jZSBjb21wYXJpc29uIGFzc2VydGluZyB0aGF0IHRoZSBzYW1lIGVsZW1lbnRzLAogICAgICAgIHJlZ2FyZGxlc3Mgb2Ygb3JkZXIuICBJZiB0aGUgc2FtZSBlbGVtZW50IG9jY3VycyBtb3JlIHRoYW4gb25jZSwKICAgICAgICBpdCB2ZXJpZmllcyB0aGF0IHRoZSBlbGVtZW50cyBvY2N1ciB0aGUgc2FtZSBudW1iZXIgb2YgdGltZXMuCgogICAgICAgICAgICBzZWxmLmFzc2VydEVxdWFsKENvdW50ZXIobGlzdChmaXJzdCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvdW50ZXIobGlzdChzZWNvbmQpKSkKCiAgICAgICAgIEV4YW1wbGU6CiAgICAgICAgICAgIC0gWzAsIDEsIDFdIGFuZCBbMSwgMCwgMV0gY29tcGFyZSBlcXVhbC4KICAgICAgICAgICAgLSBbMCwgMCwgMV0gYW5kIFswLCAxXSBjb21wYXJlIHVuZXF1YWwuCgogICAgICAgICIiIgogICAgICAgIGZpcnN0X3NlcSwgc2Vjb25kX3NlcSA9IGxpc3QoZmlyc3QpLCBsaXN0KHNlY29uZCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZpcnN0ID0gY29sbGVjdGlvbnMuQ291bnRlcihmaXJzdF9zZXEpCiAgICAgICAgICAgIHNlY29uZCA9IGNvbGxlY3Rpb25zLkNvdW50ZXIoc2Vjb25kX3NlcSkKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAjIEhhbmRsZSBjYXNlIHdpdGggdW5oYXNoYWJsZSBlbGVtZW50cwogICAgICAgICAgICBkaWZmZXJlbmNlcyA9IF9jb3VudF9kaWZmX2FsbF9wdXJwb3NlKGZpcnN0X3NlcSwgc2Vjb25kX3NlcSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBmaXJzdCA9PSBzZWNvbmQ6CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZGlmZmVyZW5jZXMgPSBfY291bnRfZGlmZl9oYXNoYWJsZShmaXJzdF9zZXEsIHNlY29uZF9zZXEpCgogICAgICAgIGlmIGRpZmZlcmVuY2VzOgogICAgICAgICAgICBzdGFuZGFyZE1zZyA9ICdFbGVtZW50IGNvdW50cyB3ZXJlIG5vdCBlcXVhbDpcbicKICAgICAgICAgICAgbGluZXMgPSBbJ0ZpcnN0IGhhcyAlZCwgU2Vjb25kIGhhcyAlZDogICVyJyAlIGRpZmYgZm9yIGRpZmYgaW4gZGlmZmVyZW5jZXNdCiAgICAgICAgICAgIGRpZmZNc2cgPSAnXG4nLmpvaW4obGluZXMpCiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gc2VsZi5fdHJ1bmNhdGVNZXNzYWdlKHN0YW5kYXJkTXNnLCBkaWZmTXNnKQogICAgICAgICAgICBtc2cgPSBzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpCiAgICAgICAgICAgIHNlbGYuZmFpbChtc2cpCgogICAgZGVmIGFzc2VydE11bHRpTGluZUVxdWFsKHNlbGYsIGZpcnN0LCBzZWNvbmQsIG1zZz1Ob25lKToKICAgICAgICAiIiJBc3NlcnQgdGhhdCB0d28gbXVsdGktbGluZSBzdHJpbmdzIGFyZSBlcXVhbC4iIiIKICAgICAgICBzZWxmLmFzc2VydElzSW5zdGFuY2UoZmlyc3QsIHN0ciwgJ0ZpcnN0IGFyZ3VtZW50IGlzIG5vdCBhIHN0cmluZycpCiAgICAgICAgc2VsZi5hc3NlcnRJc0luc3RhbmNlKHNlY29uZCwgc3RyLCAnU2Vjb25kIGFyZ3VtZW50IGlzIG5vdCBhIHN0cmluZycpCgogICAgICAgIGlmIGZpcnN0ICE9IHNlY29uZDoKICAgICAgICAgICAgIyBkb24ndCB1c2UgZGlmZmxpYiBpZiB0aGUgc3RyaW5ncyBhcmUgdG9vIGxvbmcKICAgICAgICAgICAgaWYgKGxlbihmaXJzdCkgPiBzZWxmLl9kaWZmVGhyZXNob2xkIG9yCiAgICAgICAgICAgICAgICBsZW4oc2Vjb25kKSA+IHNlbGYuX2RpZmZUaHJlc2hvbGQpOgogICAgICAgICAgICAgICAgc2VsZi5fYmFzZUFzc2VydEVxdWFsKGZpcnN0LCBzZWNvbmQsIG1zZykKICAgICAgICAgICAgZmlyc3RsaW5lcyA9IGZpcnN0LnNwbGl0bGluZXMoVHJ1ZSkKICAgICAgICAgICAgc2Vjb25kbGluZXMgPSBzZWNvbmQuc3BsaXRsaW5lcyhUcnVlKQogICAgICAgICAgICBpZiBsZW4oZmlyc3RsaW5lcykgPT0gMSBhbmQgZmlyc3Quc3RyaXAoJ1xyXG4nKSA9PSBmaXJzdDoKICAgICAgICAgICAgICAgIGZpcnN0bGluZXMgPSBbZmlyc3QgKyAnXG4nXQogICAgICAgICAgICAgICAgc2Vjb25kbGluZXMgPSBbc2Vjb25kICsgJ1xuJ10KICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnJXMgIT0gJXMnICUgKHNhZmVfcmVwcihmaXJzdCwgVHJ1ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlX3JlcHIoc2Vjb25kLCBUcnVlKSkKICAgICAgICAgICAgZGlmZiA9ICdcbicgKyAnJy5qb2luKGRpZmZsaWIubmRpZmYoZmlyc3RsaW5lcywgc2Vjb25kbGluZXMpKQogICAgICAgICAgICBzdGFuZGFyZE1zZyA9IHNlbGYuX3RydW5jYXRlTWVzc2FnZShzdGFuZGFyZE1zZywgZGlmZikKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydExlc3Moc2VsZiwgYSwgYiwgbXNnPU5vbmUpOgogICAgICAgICIiIkp1c3QgbGlrZSBzZWxmLmFzc2VydFRydWUoYSA8IGIpLCBidXQgd2l0aCBhIG5pY2VyIGRlZmF1bHQgbWVzc2FnZS4iIiIKICAgICAgICBpZiBub3QgYSA8IGI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIG5vdCBsZXNzIHRoYW4gJXMnICUgKHNhZmVfcmVwcihhKSwgc2FmZV9yZXByKGIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0TGVzc0VxdWFsKHNlbGYsIGEsIGIsIG1zZz1Ob25lKToKICAgICAgICAiIiJKdXN0IGxpa2Ugc2VsZi5hc3NlcnRUcnVlKGEgPD0gYiksIGJ1dCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIG5vdCBhIDw9IGI6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIG5vdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnICUgKHNhZmVfcmVwcihhKSwgc2FmZV9yZXByKGIpKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0R3JlYXRlcihzZWxmLCBhLCBiLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiSnVzdCBsaWtlIHNlbGYuYXNzZXJ0VHJ1ZShhID4gYiksIGJ1dCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIG5vdCBhID4gYjoKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnJXMgbm90IGdyZWF0ZXIgdGhhbiAlcycgJSAoc2FmZV9yZXByKGEpLCBzYWZlX3JlcHIoYikpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnRHcmVhdGVyRXF1YWwoc2VsZiwgYSwgYiwgbXNnPU5vbmUpOgogICAgICAgICIiIkp1c3QgbGlrZSBzZWxmLmFzc2VydFRydWUoYSA+PSBiKSwgYnV0IHdpdGggYSBuaWNlciBkZWZhdWx0IG1lc3NhZ2UuIiIiCiAgICAgICAgaWYgbm90IGEgPj0gYjoKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnJXMgbm90IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcycgJSAoc2FmZV9yZXByKGEpLCBzYWZlX3JlcHIoYikpCiAgICAgICAgICAgIHNlbGYuZmFpbChzZWxmLl9mb3JtYXRNZXNzYWdlKG1zZywgc3RhbmRhcmRNc2cpKQoKICAgIGRlZiBhc3NlcnRJc05vbmUoc2VsZiwgb2JqLCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiU2FtZSBhcyBzZWxmLmFzc2VydFRydWUob2JqIGlzIE5vbmUpLCB3aXRoIGEgbmljZXIgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIG9iaiBpcyBub3QgTm9uZToKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnJXMgaXMgbm90IE5vbmUnICUgKHNhZmVfcmVwcihvYmopLCkKICAgICAgICAgICAgc2VsZi5mYWlsKHNlbGYuX2Zvcm1hdE1lc3NhZ2UobXNnLCBzdGFuZGFyZE1zZykpCgogICAgZGVmIGFzc2VydElzTm90Tm9uZShzZWxmLCBvYmosIG1zZz1Ob25lKToKICAgICAgICAiIiJJbmNsdWRlZCBmb3Igc3ltbWV0cnkgd2l0aCBhc3NlcnRJc05vbmUuIiIiCiAgICAgICAgaWYgb2JqIGlzIE5vbmU6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJ3VuZXhwZWN0ZWRseSBOb25lJwogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0SXNJbnN0YW5jZShzZWxmLCBvYmosIGNscywgbXNnPU5vbmUpOgogICAgICAgICIiIlNhbWUgYXMgc2VsZi5hc3NlcnRUcnVlKGlzaW5zdGFuY2Uob2JqLCBjbHMpKSwgd2l0aCBhIG5pY2VyCiAgICAgICAgZGVmYXVsdCBtZXNzYWdlLiIiIgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG9iaiwgY2xzKToKICAgICAgICAgICAgc3RhbmRhcmRNc2cgPSAnJXMgaXMgbm90IGFuIGluc3RhbmNlIG9mICVyJyAlIChzYWZlX3JlcHIob2JqKSwgY2xzKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0Tm90SXNJbnN0YW5jZShzZWxmLCBvYmosIGNscywgbXNnPU5vbmUpOgogICAgICAgICIiIkluY2x1ZGVkIGZvciBzeW1tZXRyeSB3aXRoIGFzc2VydElzSW5zdGFuY2UuIiIiCiAgICAgICAgaWYgaXNpbnN0YW5jZShvYmosIGNscyk6CiAgICAgICAgICAgIHN0YW5kYXJkTXNnID0gJyVzIGlzIGFuIGluc3RhbmNlIG9mICVyJyAlIChzYWZlX3JlcHIob2JqKSwgY2xzKQogICAgICAgICAgICBzZWxmLmZhaWwoc2VsZi5fZm9ybWF0TWVzc2FnZShtc2csIHN0YW5kYXJkTXNnKSkKCiAgICBkZWYgYXNzZXJ0UmFpc2VzUmVnZXgoc2VsZiwgZXhwZWN0ZWRfZXhjZXB0aW9uLCBleHBlY3RlZF9yZWdleCwKICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYWJsZV9vYmo9Tm9uZSwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAiIiJBc3NlcnRzIHRoYXQgdGhlIG1lc3NhZ2UgaW4gYSByYWlzZWQgZXhjZXB0aW9uIG1hdGNoZXMgYSByZWdleC4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgZXhwZWN0ZWRfZXhjZXB0aW9uOiBFeGNlcHRpb24gY2xhc3MgZXhwZWN0ZWQgdG8gYmUgcmFpc2VkLgogICAgICAgICAgICBleHBlY3RlZF9yZWdleDogUmVnZXggKHJlIHBhdHRlcm4gb2JqZWN0IG9yIHN0cmluZykgZXhwZWN0ZWQKICAgICAgICAgICAgICAgICAgICB0byBiZSBmb3VuZCBpbiBlcnJvciBtZXNzYWdlLgogICAgICAgICAgICBjYWxsYWJsZV9vYmo6IEZ1bmN0aW9uIHRvIGJlIGNhbGxlZC4KICAgICAgICAgICAgYXJnczogRXh0cmEgYXJncy4KICAgICAgICAgICAga3dhcmdzOiBFeHRyYSBrd2FyZ3MuCiAgICAgICAgIiIiCiAgICAgICAgY29udGV4dCA9IF9Bc3NlcnRSYWlzZXNDb250ZXh0KGV4cGVjdGVkX2V4Y2VwdGlvbiwgc2VsZiwgY2FsbGFibGVfb2JqLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZF9yZWdleCkKICAgICAgICBpZiBjYWxsYWJsZV9vYmogaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQKICAgICAgICAjZml4bWUgYnJ5dGhvbiBzeW50YXggZXJyb3IKICAgICAgICAjd2l0aCBjb250ZXh0OgogICAgICAgICMgICAgY2FsbGFibGVfb2JqKCphcmdzLCAqKmt3YXJncykKCiAgICBkZWYgYXNzZXJ0V2FybnNSZWdleChzZWxmLCBleHBlY3RlZF93YXJuaW5nLCBleHBlY3RlZF9yZWdleCwKICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxhYmxlX29iaj1Ob25lLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgICIiIkFzc2VydHMgdGhhdCB0aGUgbWVzc2FnZSBpbiBhIHRyaWdnZXJlZCB3YXJuaW5nIG1hdGNoZXMgYSByZWdleHAuCiAgICAgICAgQmFzaWMgZnVuY3Rpb25pbmcgaXMgc2ltaWxhciB0byBhc3NlcnRXYXJucygpIHdpdGggdGhlIGFkZGl0aW9uCiAgICAgICAgdGhhdCBvbmx5IHdhcm5pbmdzIHdob3NlIG1lc3NhZ2VzIGFsc28gbWF0Y2ggdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbgogICAgICAgIGFyZSBjb25zaWRlcmVkIHN1Y2Nlc3NmdWwgbWF0Y2hlcy4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgZXhwZWN0ZWRfd2FybmluZzogV2FybmluZyBjbGFzcyBleHBlY3RlZCB0byBiZSB0cmlnZ2VyZWQuCiAgICAgICAgICAgIGV4cGVjdGVkX3JlZ2V4OiBSZWdleCAocmUgcGF0dGVybiBvYmplY3Qgb3Igc3RyaW5nKSBleHBlY3RlZAogICAgICAgICAgICAgICAgICAgIHRvIGJlIGZvdW5kIGluIGVycm9yIG1lc3NhZ2UuCiAgICAgICAgICAgIGNhbGxhYmxlX29iajogRnVuY3Rpb24gdG8gYmUgY2FsbGVkLgogICAgICAgICAgICBhcmdzOiBFeHRyYSBhcmdzLgogICAgICAgICAgICBrd2FyZ3M6IEV4dHJhIGt3YXJncy4KICAgICAgICAiIiIKICAgICAgICBjb250ZXh0ID0gX0Fzc2VydFdhcm5zQ29udGV4dChleHBlY3RlZF93YXJuaW5nLCBzZWxmLCBjYWxsYWJsZV9vYmosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXgpCiAgICAgICAgaWYgY2FsbGFibGVfb2JqIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0CiAgICAgICAgI2ZpeG1lIGJyeXRob24gc3ludGF4IGVycm9yCiAgICAgICAgI3dpdGggY29udGV4dDoKICAgICAgICAjICAgIGNhbGxhYmxlX29iaigqYXJncywgKiprd2FyZ3MpCgogICAgZGVmIGFzc2VydFJlZ2V4KHNlbGYsIHRleHQsIGV4cGVjdGVkX3JlZ2V4LCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiRmFpbCB0aGUgdGVzdCB1bmxlc3MgdGhlIHRleHQgbWF0Y2hlcyB0aGUgcmVndWxhciBleHByZXNzaW9uLiIiIgogICAgICAgIGlmIGlzaW5zdGFuY2UoZXhwZWN0ZWRfcmVnZXgsIChzdHIsIGJ5dGVzKSk6CiAgICAgICAgICAgIGFzc2VydCBleHBlY3RlZF9yZWdleCwgImV4cGVjdGVkX3JlZ2V4IG11c3Qgbm90IGJlIGVtcHR5LiIKICAgICAgICAgICAgZXhwZWN0ZWRfcmVnZXggPSByZS5jb21waWxlKGV4cGVjdGVkX3JlZ2V4KQogICAgICAgIGlmIG5vdCBleHBlY3RlZF9yZWdleC5zZWFyY2godGV4dCk6CiAgICAgICAgICAgIG1zZyA9IG1zZyBvciAiUmVnZXggZGlkbid0IG1hdGNoIgogICAgICAgICAgICBtc2cgPSAnJXM6ICVyIG5vdCBmb3VuZCBpbiAlcicgJSAobXNnLCBleHBlY3RlZF9yZWdleC5wYXR0ZXJuLCB0ZXh0KQogICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKICAgIGRlZiBhc3NlcnROb3RSZWdleChzZWxmLCB0ZXh0LCB1bmV4cGVjdGVkX3JlZ2V4LCBtc2c9Tm9uZSk6CiAgICAgICAgIiIiRmFpbCB0aGUgdGVzdCBpZiB0aGUgdGV4dCBtYXRjaGVzIHRoZSByZWd1bGFyIGV4cHJlc3Npb24uIiIiCiAgICAgICAgaWYgaXNpbnN0YW5jZSh1bmV4cGVjdGVkX3JlZ2V4LCAoc3RyLCBieXRlcykpOgogICAgICAgICAgICB1bmV4cGVjdGVkX3JlZ2V4ID0gcmUuY29tcGlsZSh1bmV4cGVjdGVkX3JlZ2V4KQogICAgICAgIG1hdGNoID0gdW5leHBlY3RlZF9yZWdleC5zZWFyY2godGV4dCkKICAgICAgICBpZiBtYXRjaDoKICAgICAgICAgICAgbXNnID0gbXNnIG9yICJSZWdleCBtYXRjaGVkIgogICAgICAgICAgICBtc2cgPSAnJXM6ICVyIG1hdGNoZXMgJXIgaW4gJXInICUgKG1zZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0W21hdGNoLnN0YXJ0KCk6bWF0Y2guZW5kKCldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZXhwZWN0ZWRfcmVnZXgucGF0dGVybiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0KQogICAgICAgICAgICByYWlzZSBzZWxmLmZhaWx1cmVFeGNlcHRpb24obXNnKQoKCiAgICBkZWYgX2RlcHJlY2F0ZShvcmlnaW5hbF9mdW5jKToKICAgICAgICBkZWYgZGVwcmVjYXRlZF9mdW5jKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgICAgICAnUGxlYXNlIHVzZSB7MH0gaW5zdGVhZC4nLmZvcm1hdChvcmlnaW5hbF9mdW5jLl9fbmFtZV9fKSwKICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsX2Z1bmMoKmFyZ3MsICoqa3dhcmdzKQogICAgICAgIHJldHVybiBkZXByZWNhdGVkX2Z1bmMKCiAgICAjIHNlZSAjOTQyNAogICAgZmFpbFVubGVzc0VxdWFsID0gYXNzZXJ0RXF1YWxzID0gX2RlcHJlY2F0ZShhc3NlcnRFcXVhbCkKICAgIGZhaWxJZkVxdWFsID0gYXNzZXJ0Tm90RXF1YWxzID0gX2RlcHJlY2F0ZShhc3NlcnROb3RFcXVhbCkKICAgIGZhaWxVbmxlc3NBbG1vc3RFcXVhbCA9IGFzc2VydEFsbW9zdEVxdWFscyA9IF9kZXByZWNhdGUoYXNzZXJ0QWxtb3N0RXF1YWwpCiAgICBmYWlsSWZBbG1vc3RFcXVhbCA9IGFzc2VydE5vdEFsbW9zdEVxdWFscyA9IF9kZXByZWNhdGUoYXNzZXJ0Tm90QWxtb3N0RXF1YWwpCiAgICBmYWlsVW5sZXNzID0gYXNzZXJ0XyA9IF9kZXByZWNhdGUoYXNzZXJ0VHJ1ZSkKICAgIGZhaWxVbmxlc3NSYWlzZXMgPSBfZGVwcmVjYXRlKGFzc2VydFJhaXNlcykKICAgIGZhaWxJZiA9IF9kZXByZWNhdGUoYXNzZXJ0RmFsc2UpCiAgICBhc3NlcnRSYWlzZXNSZWdleHAgPSBfZGVwcmVjYXRlKGFzc2VydFJhaXNlc1JlZ2V4KQogICAgYXNzZXJ0UmVnZXhwTWF0Y2hlcyA9IF9kZXByZWNhdGUoYXNzZXJ0UmVnZXgpCgoKCmNsYXNzIEZ1bmN0aW9uVGVzdENhc2UoVGVzdENhc2UpOgogICAgIiIiQSB0ZXN0IGNhc2UgdGhhdCB3cmFwcyBhIHRlc3QgZnVuY3Rpb24uCgogICAgVGhpcyBpcyB1c2VmdWwgZm9yIHNsaXBwaW5nIHByZS1leGlzdGluZyB0ZXN0IGZ1bmN0aW9ucyBpbnRvIHRoZQogICAgdW5pdHRlc3QgZnJhbWV3b3JrLiBPcHRpb25hbGx5LCBzZXQtdXAgYW5kIHRpZHktdXAgZnVuY3Rpb25zIGNhbiBiZQogICAgc3VwcGxpZWQuIEFzIHdpdGggVGVzdENhc2UsIHRoZSB0aWR5LXVwICgndGVhckRvd24nKSBmdW5jdGlvbiB3aWxsCiAgICBhbHdheXMgYmUgY2FsbGVkIGlmIHRoZSBzZXQtdXAgKCdzZXRVcCcpIGZ1bmN0aW9uIHJhbiBzdWNjZXNzZnVsbHkuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGVzdEZ1bmMsIHNldFVwPU5vbmUsIHRlYXJEb3duPU5vbmUsIGRlc2NyaXB0aW9uPU5vbmUpOgogICAgICAgIHN1cGVyKEZ1bmN0aW9uVGVzdENhc2UsIHNlbGYpLl9faW5pdF9fKCkKICAgICAgICBzZWxmLl9zZXRVcEZ1bmMgPSBzZXRVcAogICAgICAgIHNlbGYuX3RlYXJEb3duRnVuYyA9IHRlYXJEb3duCiAgICAgICAgc2VsZi5fdGVzdEZ1bmMgPSB0ZXN0RnVuYwogICAgICAgIHNlbGYuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24KCiAgICBkZWYgc2V0VXAoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fc2V0VXBGdW5jIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLl9zZXRVcEZ1bmMoKQoKICAgIGRlZiB0ZWFyRG93bihzZWxmKToKICAgICAgICBpZiBzZWxmLl90ZWFyRG93bkZ1bmMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuX3RlYXJEb3duRnVuYygpCgogICAgZGVmIHJ1blRlc3Qoc2VsZik6CiAgICAgICAgc2VsZi5fdGVzdEZ1bmMoKQoKICAgIGRlZiBpZChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fdGVzdEZ1bmMuX19uYW1lX18KCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgc2VsZi5fX2NsYXNzX18pOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKCiAgICAgICAgcmV0dXJuIHNlbGYuX3NldFVwRnVuYyA9PSBvdGhlci5fc2V0VXBGdW5jIGFuZCBcCiAgICAgICAgICAgICAgIHNlbGYuX3RlYXJEb3duRnVuYyA9PSBvdGhlci5fdGVhckRvd25GdW5jIGFuZCBcCiAgICAgICAgICAgICAgIHNlbGYuX3Rlc3RGdW5jID09IG90aGVyLl90ZXN0RnVuYyBhbmQgXAogICAgICAgICAgICAgICBzZWxmLl9kZXNjcmlwdGlvbiA9PSBvdGhlci5fZGVzY3JpcHRpb24KCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gbm90IHNlbGYgPT0gb3RoZXIKCiAgICBkZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2goKHR5cGUoc2VsZiksIHNlbGYuX3NldFVwRnVuYywgc2VsZi5fdGVhckRvd25GdW5jLAogICAgICAgICAgICAgICAgICAgICBzZWxmLl90ZXN0RnVuYywgc2VsZi5fZGVzY3JpcHRpb24pKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiAiJXMgKCVzKSIgJSAoc3RyY2xhc3Moc2VsZi5fX2NsYXNzX18pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fdGVzdEZ1bmMuX19uYW1lX18pCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAiPCVzIHRlYz0lcz4iICUgKHN0cmNsYXNzKHNlbGYuX19jbGFzc19fKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3Rlc3RGdW5jKQoKICAgIGRlZiBzaG9ydERlc2NyaXB0aW9uKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX2Rlc2NyaXB0aW9uIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fZGVzY3JpcHRpb24KICAgICAgICBkb2MgPSBzZWxmLl90ZXN0RnVuYy5fX2RvY19fCiAgICAgICAgcmV0dXJuIGRvYyBhbmQgZG9jLnNwbGl0KCJcbiIpWzBdLnN0cmlwKCkgb3IgTm9uZQo=',
'/Lib/lib_migration/unittest/main.py':'IiIiVW5pdHRlc3QgbWFpbiBwcm9ncmFtIiIiCgppbXBvcnQgc3lzCmltcG9ydCBvcwojaW1wb3J0IHR5cGVzICAgIDwtLSBpcyB0aGlzIG1vZHVsZSBuZWVkZWQgZm9yIHRoaXMgbW9kdWxlPwoKI2Zyb20gLiBpbXBvcnQgbG9hZGVyLCBydW5uZXIKZnJvbSAuc2lnbmFscyBpbXBvcnQgaW5zdGFsbEhhbmRsZXIKCl9fdW5pdHRlc3QgPSBUcnVlCgpGQUlMRkFTVCAgICAgPSAiICAtZiwgLS1mYWlsZmFzdCAgIFN0b3Agb24gZmlyc3QgZmFpbHVyZVxuIgpDQVRDSEJSRUFLICAgPSAiICAtYywgLS1jYXRjaCAgICAgIENhdGNoIGNvbnRyb2wtQyBhbmQgZGlzcGxheSByZXN1bHRzXG4iCkJVRkZFUk9VVFBVVCA9ICIgIC1iLCAtLWJ1ZmZlciAgICAgQnVmZmVyIHN0ZG91dCBhbmQgc3RkZXJyIGR1cmluZyB0ZXN0IHJ1bnNcbiIKClVTQUdFX0FTX01BSU4gPSAiIiJcClVzYWdlOiAlKHByb2dOYW1lKXMgW29wdGlvbnNdIFt0ZXN0c10KCk9wdGlvbnM6CiAgLWgsIC0taGVscCAgICAgICBTaG93IHRoaXMgbWVzc2FnZQogIC12LCAtLXZlcmJvc2UgICAgVmVyYm9zZSBvdXRwdXQKICAtcSwgLS1xdWlldCAgICAgIE1pbmltYWwgb3V0cHV0CiUoZmFpbGZhc3QpcyUoY2F0Y2hicmVhaylzJShidWZmZXIpcwpFeGFtcGxlczoKICAlKHByb2dOYW1lKXMgdGVzdF9tb2R1bGUgICAgICAgICAgICAgICAtIHJ1biB0ZXN0cyBmcm9tIHRlc3RfbW9kdWxlCiAgJShwcm9nTmFtZSlzIG1vZHVsZS5UZXN0Q2xhc3MgICAgICAgICAgLSBydW4gdGVzdHMgZnJvbSBtb2R1bGUuVGVzdENsYXNzCiAgJShwcm9nTmFtZSlzIG1vZHVsZS5DbGFzcy50ZXN0X21ldGhvZCAgLSBydW4gc3BlY2lmaWVkIHRlc3QgbWV0aG9kCgpbdGVzdHNdIGNhbiBiZSBhIGxpc3Qgb2YgYW55IG51bWJlciBvZiB0ZXN0IG1vZHVsZXMsIGNsYXNzZXMgYW5kIHRlc3QKbWV0aG9kcy4KCkFsdGVybmF0aXZlIFVzYWdlOiAlKHByb2dOYW1lKXMgZGlzY292ZXIgW29wdGlvbnNdCgpPcHRpb25zOgogIC12LCAtLXZlcmJvc2UgICAgVmVyYm9zZSBvdXRwdXQKJShmYWlsZmFzdClzJShjYXRjaGJyZWFrKXMlKGJ1ZmZlcilzICAtcyBkaXJlY3RvcnkgICAgIERpcmVjdG9yeSB0byBzdGFydCBkaXNjb3ZlcnkgKCcuJyBkZWZhdWx0KQogIC1wIHBhdHRlcm4gICAgICAgUGF0dGVybiB0byBtYXRjaCB0ZXN0IGZpbGVzICgndGVzdCoucHknIGRlZmF1bHQpCiAgLXQgZGlyZWN0b3J5ICAgICBUb3AgbGV2ZWwgZGlyZWN0b3J5IG9mIHByb2plY3QgKGRlZmF1bHQgdG8KICAgICAgICAgICAgICAgICAgIHN0YXJ0IGRpcmVjdG9yeSkKCkZvciB0ZXN0IGRpc2NvdmVyeSBhbGwgdGVzdCBtb2R1bGVzIG11c3QgYmUgaW1wb3J0YWJsZSBmcm9tIHRoZSB0b3AKbGV2ZWwgZGlyZWN0b3J5IG9mIHRoZSBwcm9qZWN0LgoiIiIKClVTQUdFX0ZST01fTU9EVUxFID0gIiIiXApVc2FnZTogJShwcm9nTmFtZSlzIFtvcHRpb25zXSBbdGVzdF0gWy4uLl0KCk9wdGlvbnM6CiAgLWgsIC0taGVscCAgICAgICBTaG93IHRoaXMgbWVzc2FnZQogIC12LCAtLXZlcmJvc2UgICAgVmVyYm9zZSBvdXRwdXQKICAtcSwgLS1xdWlldCAgICAgIE1pbmltYWwgb3V0cHV0CiUoZmFpbGZhc3QpcyUoY2F0Y2hicmVhaylzJShidWZmZXIpcwpFeGFtcGxlczoKICAlKHByb2dOYW1lKXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBydW4gZGVmYXVsdCBzZXQgb2YgdGVzdHMKICAlKHByb2dOYW1lKXMgTXlUZXN0U3VpdGUgICAgICAgICAgICAgICAgICAgLSBydW4gc3VpdGUgJ015VGVzdFN1aXRlJwogICUocHJvZ05hbWUpcyBNeVRlc3RDYXNlLnRlc3RTb21ldGhpbmcgICAgICAtIHJ1biBNeVRlc3RDYXNlLnRlc3RTb21ldGhpbmcKICAlKHByb2dOYW1lKXMgTXlUZXN0Q2FzZSAgICAgICAgICAgICAgICAgICAgLSBydW4gYWxsICd0ZXN0KicgdGVzdCBtZXRob2RzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gTXlUZXN0Q2FzZQoiIiIKCmRlZiBfY29udmVydF9uYW1lKG5hbWUpOgogICAgIyBvbiBMaW51eCAvIE1hYyBPUyBYICdmb28uUFknIGlzIG5vdCBpbXBvcnRhYmxlLCBidXQgb24KICAgICMgV2luZG93cyBpdCBpcy4gU2ltcGxlciB0byBkbyBhIGNhc2UgaW5zZW5zaXRpdmUgbWF0Y2gKICAgICMgYSBiZXR0ZXIgY2hlY2sgd291bGQgYmUgdG8gY2hlY2sgdGhhdCB0aGUgbmFtZSBpcyBhCiAgICAjIHZhbGlkIFB5dGhvbiBtb2R1bGUgbmFtZS4KICAgIGlmIG9zLnBhdGguaXNmaWxlKG5hbWUpIGFuZCBuYW1lLmxvd2VyKCkuZW5kc3dpdGgoJy5weScpOgogICAgICAgIGlmIG9zLnBhdGguaXNhYnMobmFtZSk6CiAgICAgICAgICAgIHJlbF9wYXRoID0gb3MucGF0aC5yZWxwYXRoKG5hbWUsIG9zLmdldGN3ZCgpKQogICAgICAgICAgICBpZiBvcy5wYXRoLmlzYWJzKHJlbF9wYXRoKSBvciByZWxfcGF0aC5zdGFydHN3aXRoKG9zLnBhcmRpcik6CiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZQogICAgICAgICAgICBuYW1lID0gcmVsX3BhdGgKICAgICAgICAjIG9uIFdpbmRvd3MgYm90aCAnXCcgYW5kICcvJyBhcmUgdXNlZCBhcyBwYXRoCiAgICAgICAgIyBzZXBhcmF0b3JzLiBCZXR0ZXIgdG8gcmVwbGFjZSBib3RoIHRoYW4gcmVseSBvbiBvcy5wYXRoLnNlcAogICAgICAgIHJldHVybiBuYW1lWzotM10ucmVwbGFjZSgnXFwnLCAnLicpLnJlcGxhY2UoJy8nLCAnLicpCiAgICByZXR1cm4gbmFtZQoKZGVmIF9jb252ZXJ0X25hbWVzKG5hbWVzKToKICAgIHJldHVybiBbX2NvbnZlcnRfbmFtZShuYW1lKSBmb3IgbmFtZSBpbiBuYW1lc10KCmNsYXNzIFRlc3RQcm9ncmFtKG9iamVjdCk6CiAgICAiIiJBIGNvbW1hbmQtbGluZSBwcm9ncmFtIHRoYXQgcnVucyBhIHNldCBvZiB0ZXN0czsgdGhpcyBpcyBwcmltYXJpbHkKICAgICAgIGZvciBtYWtpbmcgdGVzdCBtb2R1bGVzIGNvbnZlbmllbnRseSBleGVjdXRhYmxlLgogICAgIiIiCiAgICBVU0FHRSA9IFVTQUdFX0ZST01fTU9EVUxFCgogICAgIyBkZWZhdWx0cyBmb3IgdGVzdGluZwogICAgZmFpbGZhc3QgPSBjYXRjaGJyZWFrID0gYnVmZmVyID0gcHJvZ05hbWUgPSB3YXJuaW5ncyA9IE5vbmUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbW9kdWxlPSdfX21haW5fXycsIGRlZmF1bHRUZXN0PU5vbmUsIGFyZ3Y9Tm9uZSwKICAgICAgICAgICAgICAgICAgICB0ZXN0UnVubmVyPU5vbmUsIHRlc3RMb2FkZXI9bG9hZGVyLmRlZmF1bHRUZXN0TG9hZGVyLAogICAgICAgICAgICAgICAgICAgIGV4aXQ9VHJ1ZSwgdmVyYm9zaXR5PTEsIGZhaWxmYXN0PU5vbmUsIGNhdGNoYnJlYWs9Tm9uZSwKICAgICAgICAgICAgICAgICAgICBidWZmZXI9Tm9uZSwgd2FybmluZ3M9Tm9uZSk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShtb2R1bGUsIHN0cik6CiAgICAgICAgICAgIHNlbGYubW9kdWxlID0gX19pbXBvcnRfXyhtb2R1bGUpCiAgICAgICAgICAgIGZvciBwYXJ0IGluIG1vZHVsZS5zcGxpdCgnLicpWzE6XToKICAgICAgICAgICAgICAgIHNlbGYubW9kdWxlID0gZ2V0YXR0cihzZWxmLm1vZHVsZSwgcGFydCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLm1vZHVsZSA9IG1vZHVsZQogICAgICAgIGlmIGFyZ3YgaXMgTm9uZToKICAgICAgICAgICAgYXJndiA9IHN5cy5hcmd2CgogICAgICAgIHNlbGYuZXhpdCA9IGV4aXQKICAgICAgICBzZWxmLmZhaWxmYXN0ID0gZmFpbGZhc3QKICAgICAgICBzZWxmLmNhdGNoYnJlYWsgPSBjYXRjaGJyZWFrCiAgICAgICAgc2VsZi52ZXJib3NpdHkgPSB2ZXJib3NpdHkKICAgICAgICBzZWxmLmJ1ZmZlciA9IGJ1ZmZlcgogICAgICAgIGlmIHdhcm5pbmdzIGlzIE5vbmUgYW5kIG5vdCBzeXMud2Fybm9wdGlvbnM6CiAgICAgICAgICAgICMgZXZlbiBpZiBEcmVwcmVjYXRpb25XYXJuaW5ncyBhcmUgaWdub3JlZCBieSBkZWZhdWx0CiAgICAgICAgICAgICMgcHJpbnQgdGhlbSBhbnl3YXkgdW5sZXNzIG90aGVyIHdhcm5pbmdzIHNldHRpbmdzIGFyZQogICAgICAgICAgICAjIHNwZWNpZmllZCBieSB0aGUgd2FybmluZ3MgYXJnIG9yIHRoZSAtVyBweXRob24gZmxhZwogICAgICAgICAgICBzZWxmLndhcm5pbmdzID0gJ2RlZmF1bHQnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBoZXJlIHNlbGYud2FybmluZ3MgaXMgc2V0IGVpdGhlciB0byB0aGUgdmFsdWUgcGFzc2VkCiAgICAgICAgICAgICMgdG8gdGhlIHdhcm5pbmdzIGFyZ3Mgb3IgdG8gTm9uZS4KICAgICAgICAgICAgIyBJZiB0aGUgdXNlciBkaWRuJ3QgcGFzcyBhIHZhbHVlIHNlbGYud2FybmluZ3Mgd2lsbAogICAgICAgICAgICAjIGJlIE5vbmUuIFRoaXMgbWVhbnMgdGhhdCB0aGUgYmVoYXZpb3IgaXMgdW5jaGFuZ2VkCiAgICAgICAgICAgICMgYW5kIGRlcGVuZHMgb24gdGhlIHZhbHVlcyBwYXNzZWQgdG8gLVcuCiAgICAgICAgICAgIHNlbGYud2FybmluZ3MgPSB3YXJuaW5ncwogICAgICAgIHNlbGYuZGVmYXVsdFRlc3QgPSBkZWZhdWx0VGVzdAogICAgICAgIHNlbGYudGVzdFJ1bm5lciA9IHRlc3RSdW5uZXIKICAgICAgICBzZWxmLnRlc3RMb2FkZXIgPSB0ZXN0TG9hZGVyCiAgICAgICAgc2VsZi5wcm9nTmFtZSA9IG9zLnBhdGguYmFzZW5hbWUoYXJndlswXSkKICAgICAgICBzZWxmLnBhcnNlQXJncyhhcmd2KQogICAgICAgIHNlbGYucnVuVGVzdHMoKQoKICAgIGRlZiB1c2FnZUV4aXQoc2VsZiwgbXNnPU5vbmUpOgogICAgICAgIGlmIG1zZzoKICAgICAgICAgICAgcHJpbnQobXNnKQogICAgICAgIHVzYWdlID0geydwcm9nTmFtZSc6IHNlbGYucHJvZ05hbWUsICdjYXRjaGJyZWFrJzogJycsICdmYWlsZmFzdCc6ICcnLAogICAgICAgICAgICAgICAgICdidWZmZXInOiAnJ30KICAgICAgICBpZiBzZWxmLmZhaWxmYXN0ICE9IEZhbHNlOgogICAgICAgICAgICB1c2FnZVsnZmFpbGZhc3QnXSA9IEZBSUxGQVNUCiAgICAgICAgaWYgc2VsZi5jYXRjaGJyZWFrICE9IEZhbHNlOgogICAgICAgICAgICB1c2FnZVsnY2F0Y2hicmVhayddID0gQ0FUQ0hCUkVBSwogICAgICAgIGlmIHNlbGYuYnVmZmVyICE9IEZhbHNlOgogICAgICAgICAgICB1c2FnZVsnYnVmZmVyJ10gPSBCVUZGRVJPVVRQVVQKICAgICAgICBwcmludChzZWxmLlVTQUdFICUgdXNhZ2UpCiAgICAgICAgc3lzLmV4aXQoMikKCiAgICBkZWYgcGFyc2VBcmdzKHNlbGYsIGFyZ3YpOgogICAgICAgIGlmICgobGVuKGFyZ3YpID4gMSBhbmQgYXJndlsxXS5sb3dlcigpID09ICdkaXNjb3ZlcicpIG9yCiAgICAgICAgICAgIChsZW4oYXJndikgPT0gMSBhbmQgc2VsZi5tb2R1bGUgaXMgTm9uZSkpOgogICAgICAgICAgICBzZWxmLl9kb19kaXNjb3ZlcnkoYXJndlsyOl0pCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpbXBvcnQgZ2V0b3B0CiAgICAgICAgI2ZpeG1lIGJyeXRob24sIGV4Y2VwdCBzdGF0ZW1lbnQgYmVsb3cgZG9uJ3QgbGlrZSBnZXRvcHQuCiAgICAgICAgZ2V0b3B0X2Vycm9yPWdldG9wdC5lcnJvcgogICAgICAgIGxvbmdfb3B0cyA9IFsnaGVscCcsICd2ZXJib3NlJywgJ3F1aWV0JywgJ2ZhaWxmYXN0JywgJ2NhdGNoJywgJ2J1ZmZlciddCiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcHRpb25zLCBhcmdzID0gZ2V0b3B0LmdldG9wdChhcmd2WzE6XSwgJ2hIdnFmY2InLCBsb25nX29wdHMpCiAgICAgICAgI2ZpeG1lIGJyeXRob24gaW52YWxpZCBzeW50YXgKICAgICAgICAjZXhjZXB0IGdldG9wdC5lcnJvciBhcyBtc2c6CiAgICAgICAgZXhjZXB0IGdldG9wdF9lcnJvciBhcyBtc2c6CiAgICAgICAgICAgIHNlbGYudXNhZ2VFeGl0KG1zZykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGZvciBvcHQsIHZhbHVlIGluIG9wdGlvbnM6CiAgICAgICAgICAgIGlmIG9wdCBpbiAoJy1oJywnLUgnLCctLWhlbHAnKToKICAgICAgICAgICAgICAgIHNlbGYudXNhZ2VFeGl0KCkKICAgICAgICAgICAgaWYgb3B0IGluICgnLXEnLCctLXF1aWV0Jyk6CiAgICAgICAgICAgICAgICBzZWxmLnZlcmJvc2l0eSA9IDAKICAgICAgICAgICAgaWYgb3B0IGluICgnLXYnLCctLXZlcmJvc2UnKToKICAgICAgICAgICAgICAgIHNlbGYudmVyYm9zaXR5ID0gMgogICAgICAgICAgICBpZiBvcHQgaW4gKCctZicsJy0tZmFpbGZhc3QnKToKICAgICAgICAgICAgICAgIGlmIHNlbGYuZmFpbGZhc3QgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBzZWxmLmZhaWxmYXN0ID0gVHJ1ZQogICAgICAgICAgICAgICAgIyBTaG91bGQgdGhpcyByYWlzZSBhbiBleGNlcHRpb24gaWYgLWYgaXMgbm90IHZhbGlkPwogICAgICAgICAgICBpZiBvcHQgaW4gKCctYycsJy0tY2F0Y2gnKToKICAgICAgICAgICAgICAgIGlmIHNlbGYuY2F0Y2hicmVhayBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0Y2hicmVhayA9IFRydWUKICAgICAgICAgICAgICAgICMgU2hvdWxkIHRoaXMgcmFpc2UgYW4gZXhjZXB0aW9uIGlmIC1jIGlzIG5vdCB2YWxpZD8KICAgICAgICAgICAgaWYgb3B0IGluICgnLWInLCctLWJ1ZmZlcicpOgogICAgICAgICAgICAgICAgaWYgc2VsZi5idWZmZXIgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBzZWxmLmJ1ZmZlciA9IFRydWUKICAgICAgICAgICAgICAgICMgU2hvdWxkIHRoaXMgcmFpc2UgYW4gZXhjZXB0aW9uIGlmIC1iIGlzIG5vdCB2YWxpZD8KCiAgICAgICAgaWYgbGVuKGFyZ3MpID09IDAgYW5kIHNlbGYubW9kdWxlIGlzIE5vbmU6CiAgICAgICAgICAgICMgdGhpcyBhbGxvd3MgInB5dGhvbiAtbSB1bml0dGVzdCAtdiIgdG8gc3RpbGwgd29yayBmb3IKICAgICAgICAgICAgIyB0ZXN0IGRpc2NvdmVyeS4gVGhpcyBtZWFucyAtYyAvIC1iIC8gLXYgLyAtZiBvcHRpb25zIHdpbGwKICAgICAgICAgICAgIyBiZSBoYW5kbGVkIHR3aWNlLCB3aGljaCBpcyBoYXJtbGVzcyBidXQgbm90IGlkZWFsLgogICAgICAgICAgICBzZWxmLl9kb19kaXNjb3ZlcnkoYXJndlsxOl0pCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpZiBsZW4oYXJncykgPT0gMCBhbmQgc2VsZi5kZWZhdWx0VGVzdCBpcyBOb25lOgogICAgICAgICAgICAjIGNyZWF0ZVRlc3RzIHdpbGwgbG9hZCB0ZXN0cyBmcm9tIHNlbGYubW9kdWxlCiAgICAgICAgICAgIHNlbGYudGVzdE5hbWVzID0gTm9uZQogICAgICAgIGVsaWYgbGVuKGFyZ3MpID4gMDoKICAgICAgICAgICAgc2VsZi50ZXN0TmFtZXMgPSBfY29udmVydF9uYW1lcyhhcmdzKQogICAgICAgICAgICBpZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgICAgICAgICAgICAgIyB0byBzdXBwb3J0IHB5dGhvbiAtbSB1bml0dGVzdCAuLi4KICAgICAgICAgICAgICAgIHNlbGYubW9kdWxlID0gTm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYudGVzdE5hbWVzID0gKHNlbGYuZGVmYXVsdFRlc3QsKQogICAgICAgIHNlbGYuY3JlYXRlVGVzdHMoKQoKICAgIGRlZiBjcmVhdGVUZXN0cyhzZWxmKToKICAgICAgICBpZiBzZWxmLnRlc3ROYW1lcyBpcyBOb25lOgogICAgICAgICAgICBzZWxmLnRlc3QgPSBzZWxmLnRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU1vZHVsZShzZWxmLm1vZHVsZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnRlc3QgPSBzZWxmLnRlc3RMb2FkZXIubG9hZFRlc3RzRnJvbU5hbWVzKHNlbGYudGVzdE5hbWVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubW9kdWxlKQoKICAgIGRlZiBfZG9fZGlzY292ZXJ5KHNlbGYsIGFyZ3YsIExvYWRlcj1sb2FkZXIuVGVzdExvYWRlcik6CiAgICAgICAgIyBoYW5kbGUgY29tbWFuZCBsaW5lIGFyZ3MgZm9yIHRlc3QgZGlzY292ZXJ5CiAgICAgICAgc2VsZi5wcm9nTmFtZSA9ICclcyBkaXNjb3ZlcicgJSBzZWxmLnByb2dOYW1lCiAgICAgICAgaW1wb3J0IG9wdHBhcnNlCiAgICAgICAgcGFyc2VyID0gb3B0cGFyc2UuT3B0aW9uUGFyc2VyKCkKICAgICAgICBwYXJzZXIucHJvZyA9IHNlbGYucHJvZ05hbWUKICAgICAgICBwYXJzZXIuYWRkX29wdGlvbignLXYnLCAnLS12ZXJib3NlJywgZGVzdD0ndmVyYm9zZScsIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nVmVyYm9zZSBvdXRwdXQnLCBhY3Rpb249J3N0b3JlX3RydWUnKQogICAgICAgIGlmIHNlbGYuZmFpbGZhc3QgIT0gRmFsc2U6CiAgICAgICAgICAgIHBhcnNlci5hZGRfb3B0aW9uKCctZicsICctLWZhaWxmYXN0JywgZGVzdD0nZmFpbGZhc3QnLCBkZWZhdWx0PUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSdTdG9wIG9uIGZpcnN0IGZhaWwgb3IgZXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249J3N0b3JlX3RydWUnKQogICAgICAgIGlmIHNlbGYuY2F0Y2hicmVhayAhPSBGYWxzZToKICAgICAgICAgICAgcGFyc2VyLmFkZF9vcHRpb24oJy1jJywgJy0tY2F0Y2gnLCBkZXN0PSdjYXRjaGJyZWFrJywgZGVmYXVsdD1GYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nQ2F0Y2ggY3RybC1DIGFuZCBkaXNwbGF5IHJlc3VsdHMgc28gZmFyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPSdzdG9yZV90cnVlJykKICAgICAgICBpZiBzZWxmLmJ1ZmZlciAhPSBGYWxzZToKICAgICAgICAgICAgcGFyc2VyLmFkZF9vcHRpb24oJy1iJywgJy0tYnVmZmVyJywgZGVzdD0nYnVmZmVyJywgZGVmYXVsdD1GYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nQnVmZmVyIHN0ZG91dCBhbmQgc3RkZXJyIGR1cmluZyB0ZXN0cycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj0nc3RvcmVfdHJ1ZScpCiAgICAgICAgcGFyc2VyLmFkZF9vcHRpb24oJy1zJywgJy0tc3RhcnQtZGlyZWN0b3J5JywgZGVzdD0nc3RhcnQnLCBkZWZhdWx0PScuJywKICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJEaXJlY3RvcnkgdG8gc3RhcnQgZGlzY292ZXJ5ICgnLicgZGVmYXVsdCkiKQogICAgICAgIHBhcnNlci5hZGRfb3B0aW9uKCctcCcsICctLXBhdHRlcm4nLCBkZXN0PSdwYXR0ZXJuJywgZGVmYXVsdD0ndGVzdCoucHknLAogICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9IlBhdHRlcm4gdG8gbWF0Y2ggdGVzdHMgKCd0ZXN0Ki5weScgZGVmYXVsdCkiKQogICAgICAgIHBhcnNlci5hZGRfb3B0aW9uKCctdCcsICctLXRvcC1sZXZlbC1kaXJlY3RvcnknLCBkZXN0PSd0b3AnLCBkZWZhdWx0PU5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nVG9wIGxldmVsIGRpcmVjdG9yeSBvZiBwcm9qZWN0IChkZWZhdWx0cyB0byBzdGFydCBkaXJlY3RvcnkpJykKCiAgICAgICAgb3B0aW9ucywgYXJncyA9IHBhcnNlci5wYXJzZV9hcmdzKGFyZ3YpCiAgICAgICAgaWYgbGVuKGFyZ3MpID4gMzoKICAgICAgICAgICAgc2VsZi51c2FnZUV4aXQoKQoKICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gemlwKCgnc3RhcnQnLCAncGF0dGVybicsICd0b3AnKSwgYXJncyk6CiAgICAgICAgICAgIHNldGF0dHIob3B0aW9ucywgbmFtZSwgdmFsdWUpCgogICAgICAgICMgb25seSBzZXQgb3B0aW9ucyBmcm9tIHRoZSBwYXJzaW5nIGhlcmUKICAgICAgICAjIGlmIHRoZXkgd2VyZW4ndCBzZXQgZXhwbGljaXRseSBpbiB0aGUgY29uc3RydWN0b3IKICAgICAgICBpZiBzZWxmLmZhaWxmYXN0IGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuZmFpbGZhc3QgPSBvcHRpb25zLmZhaWxmYXN0CiAgICAgICAgaWYgc2VsZi5jYXRjaGJyZWFrIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuY2F0Y2hicmVhayA9IG9wdGlvbnMuY2F0Y2hicmVhawogICAgICAgIGlmIHNlbGYuYnVmZmVyIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuYnVmZmVyID0gb3B0aW9ucy5idWZmZXIKCiAgICAgICAgaWYgb3B0aW9ucy52ZXJib3NlOgogICAgICAgICAgICBzZWxmLnZlcmJvc2l0eSA9IDIKCiAgICAgICAgc3RhcnRfZGlyID0gb3B0aW9ucy5zdGFydAogICAgICAgIHBhdHRlcm4gPSBvcHRpb25zLnBhdHRlcm4KICAgICAgICB0b3BfbGV2ZWxfZGlyID0gb3B0aW9ucy50b3AKCiAgICAgICAgbG9hZGVyID0gTG9hZGVyKCkKICAgICAgICBzZWxmLnRlc3QgPSBsb2FkZXIuZGlzY292ZXIoc3RhcnRfZGlyLCBwYXR0ZXJuLCB0b3BfbGV2ZWxfZGlyKQoKICAgIGRlZiBydW5UZXN0cyhzZWxmKToKICAgICAgICBpZiBzZWxmLmNhdGNoYnJlYWs6CiAgICAgICAgICAgIGluc3RhbGxIYW5kbGVyKCkKICAgICAgICBpZiBzZWxmLnRlc3RSdW5uZXIgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi50ZXN0UnVubmVyID0gcnVubmVyLlRleHRUZXN0UnVubmVyCiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLnRlc3RSdW5uZXIsIHR5cGUpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB0ZXN0UnVubmVyID0gc2VsZi50ZXN0UnVubmVyKHZlcmJvc2l0eT1zZWxmLnZlcmJvc2l0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGZhc3Q9c2VsZi5mYWlsZmFzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyPXNlbGYuYnVmZmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz1zZWxmLndhcm5pbmdzKQogICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAgICAgIyBkaWRuJ3QgYWNjZXB0IHRoZSB2ZXJib3NpdHksIGJ1ZmZlciBvciBmYWlsZmFzdCBhcmd1bWVudHMKICAgICAgICAgICAgICAgIHRlc3RSdW5uZXIgPSBzZWxmLnRlc3RSdW5uZXIoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgaXQgaXMgYXNzdW1lZCB0byBiZSBhIFRlc3RSdW5uZXIgaW5zdGFuY2UKICAgICAgICAgICAgdGVzdFJ1bm5lciA9IHNlbGYudGVzdFJ1bm5lcgogICAgICAgIHNlbGYucmVzdWx0ID0gdGVzdFJ1bm5lci5ydW4oc2VsZi50ZXN0KQogICAgICAgIGlmIHNlbGYuZXhpdDoKICAgICAgICAgICAgc3lzLmV4aXQobm90IHNlbGYucmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkKCm1haW4gPSBUZXN0UHJvZ3JhbQo=',
'/Lib/ui/progressbar.py':'aW1wb3J0IFdpZGdldApmcm9tIGJyb3dzZXIgaW1wb3J0IGh0bWwKCmNsYXNzIFByb2dyZXNzQmFyKFdpZGdldC5XaWRnZXQpOgogIGRlZiBfX2luaXRfXyhzZWxmLCBpZD1Ob25lLCBsYWJlbD1GYWxzZSk6CiAgICAgIHNlbGYuX2Rpdl9zaGVsbD1odG1sLkRJVihDbGFzcz0idWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKQogICAgICBXaWRnZXQuV2lkZ2V0Ll9faW5pdF9fKHNlbGYsIHNlbGYuX2Rpdl9zaGVsbCwgJ3Byb2dyZXNzYmFyJywgaWQpCgogICAgICBzZWxmLl9zaG93X2xhYmVsPWxhYmVsCiAgICAgIGlmIGxhYmVsOgogICAgICAgICBzZWxmLl9sYWJlbD1odG1sLkRJVihDbGFzcz0ncHJvZ3Jlc3MtbGFiZWwnKQogICAgICAgICBzZWxmLl9kaXZfc2hlbGwgPD0gc2VsZi5fbGFiZWwKCiAgICAgIHNlbGYuX2Jhcj1odG1sLkRJVihDbGFzcz0idWktcHJvZ3Jlc3NiYXItdmFsdWUgdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItbGVmdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17J3dpZHRoJzogJzBweCd9KQogICAgICBzZWxmLl9kaXZfc2hlbGwgPD0gc2VsZi5fYmFyCgogIGRlZiBzZXRfcHJvZ3Jlc3Moc2VsZiwgcGVyY2VudCk6CiAgICAgIHNlbGYuX2Jhci5zdHlsZS53aWR0aD0nJXMlJScgJSBwZXJjZW50CiAgICAgIGlmIHNlbGYuX3Nob3dfbGFiZWw6CiAgICAgICAgIHNlbGYuX2xhYmVsLnRleHQ9JyVzJSUnICUgcGVyY2VudAo=',
'/Lib/ui/Widget.py':'aW1wb3J0IHJhbmRvbQpmcm9tIGJyb3dzZXIgaW1wb3J0IGRvYyBhcyBkb2N1bWVudCAgIyA6KCBkb2N1bWVudCBkb2Vzbid0IHdvcmsKCmRlZiBnZXRNb3VzZVBvc2l0aW9uKGUpOgogICAgaWYgZSBpcyBOb25lOgogICAgICAgZT13aW4uZXZlbnQKCiAgICBpZiBlLnBhZ2VYIG9yIGUucGFnZVk6CiAgICAgICByZXR1cm4geyd4JzogZS5wYWdlWCwgJ3knOiBlLnBhZ2VZfQoKICAgIGlmIGUuY2xpZW50WCBvciBlLmNsaWVudFk6CiAgICAgICBfcG9zeD1lLmNsaWVudFggKyBkb2MuYm9keS5zY3JvbGxMZWZ0ICsgZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0OwogICAgICAgX3Bvc3k9ZS5jbGllbnRZICsgZG9jLmJvZHkuc2Nyb2xsVG9wICsgZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgICByZXR1cm4geyd4JzogX3Bvc3gsICd5JzogX3Bvc3l9CiAgICAgIAogICAgcmV0dXJuIHsneCc6IDAsICd5JzogMH0KCmNsYXNzIFdpZGdldDoKICBkZWYgX19pbml0X18oc2VsZiwgZWxlbWVudCwgdHlwZSwgaWQ9Tm9uZSk6CiAgICAgIHNlbGYuX2VsZW1lbnQ9ZWxlbWVudAoKICAgICAgaWYgaWQgaXMgTm9uZToKICAgICAgICAgc2VsZi5fZWxlbWVudC5pZD0nJXNfJXMnICUgKHR5cGUsIGludCgxMDAwMDAqcmFuZG9tLnJhbmRvbSgpKSkKICAgICAgZWxzZToKICAgICAgICAgc2VsZi5fZWxlbWVudC5pZD1pZAoKICBkZWYgZ2V0X2lkKHNlbGYpOgogICAgICByZXR1cm4gc2VsZi5fZWxlbWVudC5pZAoKICBkZWYgYXR0YWNoKHNlbGYsIGVsZW1lbnRfaWQpOgogICAgICAiIiIgYXBwZW5kIHRoaXMgRE9NIGNvbXBvbmVudCB0byBET00gZWxlbWVudCBlbGVtZW50X2lkIiIiCiAgICAgICNkb2N1bWVudFtlbGVtZW50X2lkXSA8PSBzZWxmLl9lbGVtZW50ICAgI3RoaXMgZG9lc24ndCB3b3JrIDooCiAgICAgICNkb2MgaXMgYWN0dWFsbHkgdGhlIGdsb2JhbCAnZG9jJyBub3QgdGhlIG9uZSB3ZSBpbXBvcnRlZCBmcm9tIGJyb3dzZXIgOigKICAgICAgZG9jW2VsZW1lbnRfaWRdIDw9IHNlbGYuX2VsZW1lbnQKCiAgZGVmIHNob3coc2VsZik6CiAgICAgIHNlbGYuX2VsZW1lbnQuZGlzcGxheT0nYmxvY2snCgogIGRlZiBoaWRlKHNlbGYpOgogICAgICBzZWxmLl9lbGVtZW50LmRpc3BsYXk9J25vbmUnCgpjbGFzcyBEcmFnZ2FibGVXaWRnZXQoV2lkZ2V0KToKICBkZWYgX19pbml0X18oc2VsZiwgZWxlbWVudCwgdHlwZSwgaWQ9Tm9uZSk6CiAgICAgIFdpZGdldC5fX2luaXRfXyhzZWxmLCBlbGVtZW50LCB0eXBlLCBpZCkKCiAgICAgIGRlZiBkcmFnKGUpOgogICAgICAgICAgc2VsZi5fZWxlbWVudC5zdHlsZS50b3A9JyVzcHgnICUgKGUuY2xpZW50WSAtIHNlbGYuX2RlbHRhWSkKICAgICAgICAgIHNlbGYuX2VsZW1lbnQuc3R5bGUubGVmdD0nJXNweCcgJSAoZS5jbGllbnRYIC0gc2VsZi5fZGVsdGFYKQoKICAgICAgZGVmIG1vdXNlRG93bihlKToKICAgICAgICAgIHNlbGYuX2VsZW1lbnQuc3R5bGUucG9zaXRpb249J2Fic29sdXRlJwogICAgICAgICAgc2VsZi5fZGVsdGFYPWUuY2xpZW50WCAtIHNlbGYuX2VsZW1lbnQub2Zmc2V0TGVmdAogICAgICAgICAgc2VsZi5fZGVsdGFZPWUuY2xpZW50WSAtIHNlbGYuX2VsZW1lbnQub2Zmc2V0VG9wCiAgICAgICAgICBkb2MuYmluZCgnbW91c2Vtb3ZlJywgZHJhZykKCiAgICAgIGRlZiBtb3VzZVVwKGUpOgogICAgICAgICAgZG9jLnVuYmluZCgnbW91c2Vtb3ZlJykKCiAgICAgIHNlbGYuX2VsZW1lbnQuYmluZCgnbW91c2Vkb3duJywgbW91c2VEb3duKQogICAgICBzZWxmLl9lbGVtZW50LmJpbmQoJ21vdXNldXAnLCBtb3VzZVVwKQo=',
'/Lib/ui/slider.py':'aW1wb3J0IFdpZGdldApmcm9tIGJyb3dzZXIgaW1wb3J0IGh0bWwKCmNsYXNzIFNsaWRlcihXaWRnZXQuV2lkZ2V0KToKICBkZWYgX19pbml0X18oc2VsZiwgaWQ9Tm9uZSwgZG9jdW1lbnQ9ZG9jLCBsYWJlbD1GYWxzZSk6CiAgICAgIHNlbGYuX2Rpdl9zaGVsbD1odG1sLkRJVihDbGFzcz0idWktc2xpZGVyIHVpLXNsaWRlci1ob3Jpem9udGFsIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIikKCiAgICAgIFdpZGdldC5XaWRnZXQuX19pbml0X18oc2VsZiwgc2VsZi5fZGl2X3NoZWxsLCAnc2xpZGVyJywgaWQpCgogICAgICBzZWxmLl9oYW5kbGU9aHRtbC5BKENsYXNzPSJ1aS1zbGlkZXItaGFuZGxlIHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgSHJlZj0nIycsIHN0eWxlPXsnbGVmdCc6ICcwcHgnfSkKICAgICAgc2VsZi5fdmFsdWU9MAogICAgICBzZWxmLl9pc01vdXNlRG93bj1GYWxzZQoKICAgICAgZGVmIHN0YXJ0U2xpZGUoZSk6CiAgICAgICAgICBzZWxmLl9pc01vdXNlRG93bj1UcnVlCiAgICAgICAgICBzZWxmLl91cHBlckJvdW5kID0gc2VsZi5fZGl2X3NoZWxsLm9mZnNldFdpZHRoIC0gc2VsZi5faGFuZGxlLm9mZnNldFdpZHRoCgogICAgICAgICAgcG9zID0gV2lkZ2V0LmdldE1vdXNlUG9zaXRpb24oZSkKICAgICAgICAgIHNlbGYuX3N0YXJ0TW91c2VYPXBvc1sneCddCgogICAgICAgICAgc2VsZi5fbGFzdEVsZW1lbnRMZWZ0ID0gcGFyc2VJbnQoc2VsZi5faGFuZGxlLmVsdC5zdHlsZS5sZWZ0KSAjLSBwYXJzZUludChzZWxmLl9kaXZfc2hlbGwuZWx0LnN0eWxlLmxlZnQpCiAgICAgICAgICAjcHJpbnQoc2VsZi5fdXBwZXJCb3VuZCkKICAgICAgICAgIHVwZGF0ZVBvc2l0aW9uKGUpCgogICAgICBkZWYgdXBkYXRlUG9zaXRpb24oZSk6CiAgICAgICAgICBwb3MgPSBXaWRnZXQuZ2V0TW91c2VQb3NpdGlvbihlKQogICAgICAgICAgX25ld1BvcyA9IHNlbGYuX2xhc3RFbGVtZW50TGVmdCArIHBvc1sneCddIC0gc2VsZi5fc3RhcnRNb3VzZVgKICAgICAgICAgIAogICAgICAgICAgX25ld1BvcyA9IG1heCgwLCBfbmV3UG9zKQogICAgICAgICAgX25ld1BvcyA9IG1pbihfbmV3UG9zLCBzZWxmLl91cHBlckJvdW5kKQoKICAgICAgICAgICNwcmludChfbmV3UG9zKQogICAgICAgICAgc2VsZi5faGFuZGxlLmVsdC5zdHlsZS5sZWZ0ID0gJyVzcHgnICUgX25ld1BvcwogICAgICAgICAgc2VsZi5fbGFzdEVsZW1lbnRMZWZ0ID0gX25ld1BvcwoKICAgICAgZGVmIG1vdmluZyhlKToKICAgICAgICAgIGlmIHNlbGYuX2lzTW91c2VEb3duOgogICAgICAgICAgICAgdXBkYXRlUG9zaXRpb24oZSkKCiAgICAgIGRlZiBkcm9wQ2FsbGJhY2soZSk6CiAgICAgICAgICBzZWxmLl9pc01vdXNlRG93bj1GYWxzZQogICAgICAgICAgc2VsZi5faGFuZGxlLnVuYmluZCgnbW91c2Vtb3ZlJywgbW92aW5nKQoKCiAgICAgIHNlbGYuX2hhbmRsZS5iaW5kKCdtb3VzZW1vdmUnLCBtb3ZpbmcpCiAgICAgIHNlbGYuX2hhbmRsZS5iaW5kKCdtb3VzZXVwJywgZHJvcENhbGxiYWNrKQogICAgICAjc2VsZi5faGFuZGxlLmJpbmQoJ21vdXNlb3V0JywgZHJvcENhbGxiYWNrKQogICAgICBzZWxmLl9oYW5kbGUuYmluZCgnbW91c2Vkb3duJywgc3RhcnRTbGlkZSkKCiAgICAgIGRlZiBtb3VzZW92ZXIoZSk6CiAgICAgICAgICBfY2xhc3M9c2VsZi5faGFuZGxlLmdldEF0dHJpYnV0ZSgnY2xhc3MnKQogICAgICAgICAgc2VsZi5faGFuZGxlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnJXMgJXMnICUgKF9jbGFzcywgJ3VpLXN0YXRlLWhvdmVyJykpCgogICAgICBkZWYgbW91c2VvdXQoZSk6CiAgICAgICAgICBzZWxmLl9pc01vdXNlRG93bj1GYWxzZQogICAgICAgICAgX2NsYXNzPXNlbGYuX2hhbmRsZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykKICAgICAgICAgIHNlbGYuX2hhbmRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgX2NsYXNzLnJlcGxhY2UoJ3VpLXN0YXRlLWhvdmVyJywgJycpKQoKICAgICAgc2VsZi5faGFuZGxlLmJpbmQoJ21vdXNlb3ZlcicsIG1vdXNlb3ZlcikKICAgICAgc2VsZi5faGFuZGxlLmJpbmQoJ21vdXNlb3V0JywgbW91c2VvdXQpCgogICAgICBzZWxmLl9kaXZfc2hlbGwgPD0gc2VsZi5faGFuZGxlCgogIGRlZiBnZXRfdmFsdWUoc2VsZik6CiAgICAgIHJldHVybiBzZWxmLl92YWx1ZQoKICAjZGVmIHNldF92YWx1ZShzZWxmLCB2YWx1ZSk6CiAgIyAgICBzZWxmLl92YWx1ZT12YWx1ZQogICMgICBzZWxmLl9oYW5kbGUuc3R5bGUubGVmdD0nJXNweCcgJSB2YWx1ZQo=',
'/Lib/ui/__init__.py':'ZnJvbSBicm93c2VyIGltcG9ydCBodG1sLCBkb2MgYXMgZG9jdW1lbnQKZnJvbSBEaWFsb2cgaW1wb3J0ICoKZnJvbSBQcm9ncmVzc0JhciBpbXBvcnQgKgpmcm9tIFNsaWRlciBpbXBvcnQgKgoKZGVmIGFkZF9zdHlsZXNoZWV0KCk6CiAgICBfbGluaz1odG1sLkxJTksoSHJlZj0nL3NyYy9MaWIvdWkvY3NzL3Ntb290aG5lc3MvanF1ZXJ5LXVpLTEuMTAuMy5jdXN0b20ubWluLmNzcycpCiAgICBfbGluay5yZWw9J3N0eWxlc2hlZXQnCgogICAgZG9jIDw9IF9saW5rICAgICAjIGRvY3VtZW50IGRvZXNuJ3Qgd29yayBoZXJlLi4gOiggbXVzdCB1c2UgZG9jIAo=',
'/Lib/ui/dialog.py':'aW1wb3J0IFdpZGdldApmcm9tIGJyb3dzZXIgaW1wb3J0IGh0bWwsIGRvYyBhcyBkb2N1bWVudAoKY2xhc3MgRGlhbG9nKFdpZGdldC5EcmFnZ2FibGVXaWRnZXQpOgogIGRlZiBfX2luaXRfXyhzZWxmLCBpZD1Ob25lKToKICAgICAgc2VsZi5fZGl2X3NoZWxsPWh0bWwuRElWKAogICAgICAgICBDbGFzcz0idWktZGlhbG9nIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLWZyb250IHVpLWRyYWdnYWJsZSB1aS1yZXNpemFibGUiLAogICAgICAgICBzdHlsZT17J3Bvc2l0aW9uJzogJ2Fic29sdXRlJywgJ2hlaWdodCc6ICdhdXRvJywgJ3dpZHRoJzogJzMwMHB4JywKICAgICAgICAgICAgICAgICd0b3AnOiAnOThweCcsICdsZWZ0JzogJzE0MHB4JywgJ2Rpc3BsYXknOiAnYmxvY2snfSkKCiAgICAgIFdpZGdldC5EcmFnZ2FibGVXaWRnZXQuX19pbml0X18oc2VsZiwgc2VsZi5fZGl2X3NoZWxsLCAnZGlhbG9nJywgaWQpCgogICAgICBfZGl2X3RpdGxlYmFyPWh0bWwuRElWKElkPSJ0aXRsZWJhciIsCiAgICAgICAgICAgQ2xhc3M9InVpLWRpYWxvZy10aXRsZWJhciB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwgdWktaGVscGVyLWNsZWFyZml4IikKICAgICAgc2VsZi5fZGl2X3NoZWxsIDw9IF9kaXZfdGl0bGViYXIKCiAgICAgIHNlbGYuX2Rpdl90aXRsZT1odG1sLlNQQU4oSWQ9InRpdGxlIiwgQ2xhc3M9InVpLWRpYWxvZy10aXRsZSIpCiAgICAgICAgCiAgICAgIF9kaXZfdGl0bGViYXIgPD0gc2VsZi5fZGl2X3RpdGxlCgogICAgICBzZWxmLl90aXRsZV9idXR0b249aHRtbC5CVVRUT04oVGl0bGU9ImNsb3NlIiwKICAgICAgICAgICAgQ2xhc3M9InVpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIHVpLWJ1dHRvbi1pY29uLW9ubHkgdWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIikKCiAgICAgIGRlZiBkaWFsb2dfY2xvc2UoZSk6CiAgICAgICAgICAjZGVsIGRvY3VtZW50W3NlbGYuX2Rpdl9zaGVsbC5pZF0KICAgICAgICAgIGRlbCBkb2Nbc2VsZi5fZGl2X3NoZWxsLmlkXQoKICAgICAgc2VsZi5fdGl0bGVfYnV0dG9uLmJpbmQoJ2NsaWNrJywgZGlhbG9nX2Nsb3NlKQogICAgICBfc3Bhbj1odG1sLlNQQU4oQ2xhc3M9InVpLWJ1dHRvbi1pY29uLXByaW1hcnkgdWktaWNvbiB1aS1pY29uLWNsb3NldGhpY2siKQogICAgICBzZWxmLl90aXRsZV9idXR0b24gPD0gX3NwYW4KCiAgICAgIF9zcGFuPWh0bWwuU1BBTignY2xvc2UnLCBDbGFzcz0idWktYnV0dG9uLXRleHQiKQogICAgICBzZWxmLl90aXRsZV9idXR0b24gPD0gX3NwYW4KCiAgICAgIF9kaXZfdGl0bGViYXIgPD0gc2VsZi5fdGl0bGVfYnV0dG9uCgogICAgICBzZWxmLl9kaXZfZGlhbG9nPWh0bWwuRElWKENsYXNzPSJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudCIsCiAgICAgICAgICAgc3R5bGU9eyd3aWR0aCc6ICdhdXRvJywgJ21pbi1oZWlnaHQnOiAnMTA1cHgnLCAKICAgICAgICAgICAgICAgICAgJ21heC1oZWlnaHQnOiAnbm9uZScsICdoZWlnaHQnOiAnYXV0byd9KQoKICAgICAgc2VsZi5fZGl2X3NoZWxsIDw9IHNlbGYuX2Rpdl9kaWFsb2cKCiAgICAgIGZvciBfaSBpbiBbJ24nLCAnZScsICdzJywgJ3cnLCAnc2UnLCAnc3cnLCAnbmUnLCAnbncnXToKICAgICAgICAgIGlmIF9pID09ICdzZSc6CiAgICAgICAgICAgICBfY2xhc3M9InVpLXJlc2l6YWJsZS1oYW5kbGUgdWktcmVzaXphYmxlLSVzIHVpLWljb24gdWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtJXMiICUgKF9pLCBfaSkKICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICBfY2xhc3M9InVpLXJlc2l6YWJsZS1oYW5kbGUgdWktcmVzaXphYmxlLSVzIiAlIF9pCgogICAgICAgICAgc2VsZi5fZGl2X3NoZWxsIDw9IGh0bWwuRElWKENsYXNzPV9jbGFzcywgc3R5bGU9eyd6LWluZGV4JzogJzkwJ30pCgogICAgICBkb2MgPD0gc2VsZi5fZGl2X3NoZWxsCgogIGRlZiBzZXRfdGl0bGUoc2VsZiwgdGl0bGUpOgogICAgICBzZWxmLl9kaXZfdGl0bGUuc2V0X3RleHQodGl0bGUpCgogIGRlZiBzZXRfYm9keShzZWxmLCBib2R5KToKICAgICAgc2VsZi5fZGl2X2RpYWxvZy5zZXRfaHRtbChib2R5KQo=',
'/Lib/http/cookies.py':'CiMKCiMjIyMKIyBDb3B5cmlnaHQgMjAwMCBieSBUaW1vdGh5IE8nTWFsbGV5IDx0aW1vQGFsdW0ubWl0LmVkdT4KIwojICAgICAgICAgICAgICAgIEFsbCBSaWdodHMgUmVzZXJ2ZWQKIwojIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZCBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUKIyBhbmQgaXRzIGRvY3VtZW50YXRpb24gZm9yIGFueSBwdXJwb3NlIGFuZCB3aXRob3V0IGZlZSBpcyBoZXJlYnkKIyBncmFudGVkLCBwcm92aWRlZCB0aGF0IHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFwcGVhciBpbiBhbGwKIyBjb3BpZXMgYW5kIHRoYXQgYm90aCB0aGF0IGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbgojIG5vdGljZSBhcHBlYXIgaW4gc3VwcG9ydGluZyBkb2N1bWVudGF0aW9uLCBhbmQgdGhhdCB0aGUgbmFtZSBvZgojIFRpbW90aHkgTydNYWxsZXkgIG5vdCBiZSB1c2VkIGluIGFkdmVydGlzaW5nIG9yIHB1YmxpY2l0eQojIHBlcnRhaW5pbmcgdG8gZGlzdHJpYnV0aW9uIG9mIHRoZSBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljLCB3cml0dGVuCiMgcHJpb3IgcGVybWlzc2lvbi4KIwojIFRpbW90aHkgTydNYWxsZXkgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEggUkVHQVJEIFRPIFRISVMKIyBTT0ZUV0FSRSwgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZCiMgQU5EIEZJVE5FU1MsIElOIE5PIEVWRU5UIFNIQUxMIFRpbW90aHkgTydNYWxsZXkgQkUgTElBQkxFIEZPUgojIEFOWSBTUEVDSUFMLCBJTkRJUkVDVCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMKIyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsCiMgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1IgT1RIRVIgVE9SVElPVVMKIyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SCiMgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KIwojIyMjCiMKIyBJZDogQ29va2llLnB5LHYgMi4yOSAyMDAwLzA4LzIzIDA1OjI4OjQ5IHRpbW8gRXhwCiMgICBieSBUaW1vdGh5IE8nTWFsbGV5IDx0aW1vQGFsdW0ubWl0LmVkdT4KIwojICBDb29raWUucHkgaXMgYSBQeXRob24gbW9kdWxlIGZvciB0aGUgaGFuZGxpbmcgb2YgSFRUUAojICBjb29raWVzIGFzIGEgUHl0aG9uIGRpY3Rpb25hcnkuICBTZWUgUkZDIDIxMDkgZm9yIG1vcmUKIyAgaW5mb3JtYXRpb24gb24gY29va2llcy4KIwojICBUaGUgb3JpZ2luYWwgaWRlYSB0byB0cmVhdCBDb29raWVzIGFzIGEgZGljdGlvbmFyeSBjYW1lIGZyb20KIyAgRGF2ZSBNaXRjaGVsbCAoZGF2ZW1AbWFnbmV0LmNvbSkgaW4gMTk5NSwgd2hlbiBoZSByZWxlYXNlZCB0aGUKIyAgZmlyc3QgdmVyc2lvbiBvZiBuc2Nvb2tpZS5weS4KIwojIyMjCgpyIiIiCkhlcmUncyBhIHNhbXBsZSBzZXNzaW9uIHRvIHNob3cgaG93IHRvIHVzZSB0aGlzIG1vZHVsZS4KQXQgdGhlIG1vbWVudCwgdGhpcyBpcyB0aGUgb25seSBkb2N1bWVudGF0aW9uLgoKVGhlIEJhc2ljcwotLS0tLS0tLS0tCgpJbXBvcnRpbmcgaXMgZWFzeS4uLgoKICAgPj4+IGZyb20gaHR0cCBpbXBvcnQgY29va2llcwoKTW9zdCBvZiB0aGUgdGltZSB5b3Ugc3RhcnQgYnkgY3JlYXRpbmcgYSBjb29raWUuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKCk9uY2UgeW91J3ZlIGNyZWF0ZWQgeW91ciBDb29raWUsIHlvdSBjYW4gYWRkIHZhbHVlcyBqdXN0IGFzIGlmIGl0IHdlcmUKYSBkaWN0aW9uYXJ5LgoKICAgPj4+IEMgPSBjb29raWVzLlNpbXBsZUNvb2tpZSgpCiAgID4+PiBDWyJmaWciXSA9ICJuZXd0b24iCiAgID4+PiBDWyJzdWdhciJdID0gIndhZmVyIgogICA+Pj4gQy5vdXRwdXQoKQogICAnU2V0LUNvb2tpZTogZmlnPW5ld3RvblxyXG5TZXQtQ29va2llOiBzdWdhcj13YWZlcicKCk5vdGljZSB0aGF0IHRoZSBwcmludGFibGUgcmVwcmVzZW50YXRpb24gb2YgYSBDb29raWUgaXMgdGhlCmFwcHJvcHJpYXRlIGZvcm1hdCBmb3IgYSBTZXQtQ29va2llOiBoZWFkZXIuICBUaGlzIGlzIHRoZQpkZWZhdWx0IGJlaGF2aW9yLiAgWW91IGNhbiBjaGFuZ2UgdGhlIGhlYWRlciBhbmQgcHJpbnRlZAphdHRyaWJ1dGVzIGJ5IHVzaW5nIHRoZSAub3V0cHV0KCkgZnVuY3Rpb24KCiAgID4+PiBDID0gY29va2llcy5TaW1wbGVDb29raWUoKQogICA+Pj4gQ1sicm9ja3kiXSA9ICJyb2FkIgogICA+Pj4gQ1sicm9ja3kiXVsicGF0aCJdID0gIi9jb29raWUiCiAgID4+PiBwcmludChDLm91dHB1dChoZWFkZXI9IkNvb2tpZToiKSkKICAgQ29va2llOiByb2NreT1yb2FkOyBQYXRoPS9jb29raWUKICAgPj4+IHByaW50KEMub3V0cHV0KGF0dHJzPVtdLCBoZWFkZXI9IkNvb2tpZToiKSkKICAgQ29va2llOiByb2NreT1yb2FkCgpUaGUgbG9hZCgpIG1ldGhvZCBvZiBhIENvb2tpZSBleHRyYWN0cyBjb29raWVzIGZyb20gYSBzdHJpbmcuICBJbiBhCkNHSSBzY3JpcHQsIHlvdSB3b3VsZCB1c2UgdGhpcyBtZXRob2QgdG8gZXh0cmFjdCB0aGUgY29va2llcyBmcm9tIHRoZQpIVFRQX0NPT0tJRSBlbnZpcm9ubWVudCB2YXJpYWJsZS4KCiAgID4+PiBDID0gY29va2llcy5TaW1wbGVDb29raWUoKQogICA+Pj4gQy5sb2FkKCJjaGlwcz1haG95OyB2aWVubmE9ZmluZ2VyIikKICAgPj4+IEMub3V0cHV0KCkKICAgJ1NldC1Db29raWU6IGNoaXBzPWFob3lcclxuU2V0LUNvb2tpZTogdmllbm5hPWZpbmdlcicKClRoZSBsb2FkKCkgbWV0aG9kIGlzIGRhcm4tdG9vdGluIHNtYXJ0IGFib3V0IGlkZW50aWZ5aW5nIGNvb2tpZXMKd2l0aGluIGEgc3RyaW5nLiAgRXNjYXBlZCBxdW90YXRpb24gbWFya3MsIG5lc3RlZCBzZW1pY29sb25zLCBhbmQgb3RoZXIKc3VjaCB0cmlja2VyaWVzIGRvIG5vdCBjb25mdXNlIGl0LgoKICAgPj4+IEMgPSBjb29raWVzLlNpbXBsZUNvb2tpZSgpCiAgID4+PiBDLmxvYWQoJ2tlZWJsZXI9IkU9ZXZlcnlib2R5OyBMPVxcIkxvdmVzXFwiOyBmdWRnZT1cXDAxMjsiOycpCiAgID4+PiBwcmludChDKQogICBTZXQtQ29va2llOiBrZWVibGVyPSJFPWV2ZXJ5Ym9keTsgTD1cIkxvdmVzXCI7IGZ1ZGdlPVwwMTI7IgoKRWFjaCBlbGVtZW50IG9mIHRoZSBDb29raWUgYWxzbyBzdXBwb3J0cyBhbGwgb2YgdGhlIFJGQyAyMTA5CkNvb2tpZSBhdHRyaWJ1dGVzLiAgSGVyZSdzIGFuIGV4YW1wbGUgd2hpY2ggc2V0cyB0aGUgUGF0aAphdHRyaWJ1dGUuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKICAgPj4+IENbIm9yZW8iXSA9ICJkb3VibGVzdHVmZiIKICAgPj4+IENbIm9yZW8iXVsicGF0aCJdID0gIi8iCiAgID4+PiBwcmludChDKQogICBTZXQtQ29va2llOiBvcmVvPWRvdWJsZXN0dWZmOyBQYXRoPS8KCkVhY2ggZGljdGlvbmFyeSBlbGVtZW50IGhhcyBhICd2YWx1ZScgYXR0cmlidXRlLCB3aGljaCBnaXZlcyB5b3UKYmFjayB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKICAgPj4+IENbInR3aXgiXSA9ICJub25lIGZvciB5b3UiCiAgID4+PiBDWyJ0d2l4Il0udmFsdWUKICAgJ25vbmUgZm9yIHlvdScKClRoZSBTaW1wbGVDb29raWUgZXhwZWN0cyB0aGF0IGFsbCB2YWx1ZXMgc2hvdWxkIGJlIHN0YW5kYXJkIHN0cmluZ3MuCkp1c3QgdG8gYmUgc3VyZSwgU2ltcGxlQ29va2llIGludm9rZXMgdGhlIHN0cigpIGJ1aWx0aW4gdG8gY29udmVydAp0aGUgdmFsdWUgdG8gYSBzdHJpbmcsIHdoZW4gdGhlIHZhbHVlcyBhcmUgc2V0IGRpY3Rpb25hcnktc3R5bGUuCgogICA+Pj4gQyA9IGNvb2tpZXMuU2ltcGxlQ29va2llKCkKICAgPj4+IENbIm51bWJlciJdID0gNwogICA+Pj4gQ1sic3RyaW5nIl0gPSAic2V2ZW4iCiAgID4+PiBDWyJudW1iZXIiXS52YWx1ZQogICAnNycKICAgPj4+IENbInN0cmluZyJdLnZhbHVlCiAgICdzZXZlbicKICAgPj4+IEMub3V0cHV0KCkKICAgJ1NldC1Db29raWU6IG51bWJlcj03XHJcblNldC1Db29raWU6IHN0cmluZz1zZXZlbicKCkZpbmlzLgoiIiIKCiMKIyBJbXBvcnQgb3VyIHJlcXVpcmVkIG1vZHVsZXMKIwppbXBvcnQgcmUKaW1wb3J0IHN0cmluZwoKX19hbGxfXyA9IFsiQ29va2llRXJyb3IiLCAiQmFzZUNvb2tpZSIsICJTaW1wbGVDb29raWUiXQoKX251bGxqb2luID0gJycuam9pbgpfc2VtaXNwYWNlam9pbiA9ICc7ICcuam9pbgpfc3BhY2Vqb2luID0gJyAnLmpvaW4KCiMKIyBEZWZpbmUgYW4gZXhjZXB0aW9uIHZpc2libGUgdG8gRXh0ZXJuYWwgbW9kdWxlcwojCmNsYXNzIENvb2tpZUVycm9yKEV4Y2VwdGlvbik6CiAgICBwYXNzCgoKIyBUaGVzZSBxdW90aW5nIHJvdXRpbmVzIGNvbmZvcm0gdG8gdGhlIFJGQzIxMDkgc3BlY2lmaWNhdGlvbiwgd2hpY2ggaW4KIyB0dXJuIHJlZmVyZW5jZXMgdGhlIGNoYXJhY3RlciBkZWZpbml0aW9ucyBmcm9tIFJGQzIwNjguICBUaGV5IHByb3ZpZGUKIyBhIHR3by13YXkgcXVvdGluZyBhbGdvcml0aG0uICBBbnkgbm9uLXRleHQgY2hhcmFjdGVyIGlzIHRyYW5zbGF0ZWQKIyBpbnRvIGEgNCBjaGFyYWN0ZXIgc2VxdWVuY2U6IGEgZm9yd2FyZC1zbGFzaCBmb2xsb3dlZCBieSB0aGUKIyB0aHJlZS1kaWdpdCBvY3RhbCBlcXVpdmFsZW50IG9mIHRoZSBjaGFyYWN0ZXIuICBBbnkgJ1wnIG9yICciJyBpcwojIHF1b3RlZCB3aXRoIGEgcHJlY2VlZGluZyAnXCcgc2xhc2guCiMKIyBUaGVzZSBhcmUgdGFrZW4gZnJvbSBSRkMyMDY4IGFuZCBSRkMyMTA5LgojICAgICAgIF9MZWdhbENoYXJzICAgICAgIGlzIHRoZSBsaXN0IG9mIGNoYXJzIHdoaWNoIGRvbid0IHJlcXVpcmUgIidzCiMgICAgICAgX1RyYW5zbGF0b3IgICAgICAgaGFzaC10YWJsZSBmb3IgZmFzdCBxdW90aW5nCiMKX0xlZ2FsQ2hhcnMgICAgICAgPSBzdHJpbmcuYXNjaWlfbGV0dGVycyArIHN0cmluZy5kaWdpdHMgKyAiISMkJSYnKistLl5fYHx+OiIKX1RyYW5zbGF0b3IgICAgICAgPSB7CiAgICAnXDAwMCcgOiAnXFwwMDAnLCAgJ1wwMDEnIDogJ1xcMDAxJywgICdcMDAyJyA6ICdcXDAwMicsCiAgICAnXDAwMycgOiAnXFwwMDMnLCAgJ1wwMDQnIDogJ1xcMDA0JywgICdcMDA1JyA6ICdcXDAwNScsCiAgICAnXDAwNicgOiAnXFwwMDYnLCAgJ1wwMDcnIDogJ1xcMDA3JywgICdcMDEwJyA6ICdcXDAxMCcsCiAgICAnXDAxMScgOiAnXFwwMTEnLCAgJ1wwMTInIDogJ1xcMDEyJywgICdcMDEzJyA6ICdcXDAxMycsCiAgICAnXDAxNCcgOiAnXFwwMTQnLCAgJ1wwMTUnIDogJ1xcMDE1JywgICdcMDE2JyA6ICdcXDAxNicsCiAgICAnXDAxNycgOiAnXFwwMTcnLCAgJ1wwMjAnIDogJ1xcMDIwJywgICdcMDIxJyA6ICdcXDAyMScsCiAgICAnXDAyMicgOiAnXFwwMjInLCAgJ1wwMjMnIDogJ1xcMDIzJywgICdcMDI0JyA6ICdcXDAyNCcsCiAgICAnXDAyNScgOiAnXFwwMjUnLCAgJ1wwMjYnIDogJ1xcMDI2JywgICdcMDI3JyA6ICdcXDAyNycsCiAgICAnXDAzMCcgOiAnXFwwMzAnLCAgJ1wwMzEnIDogJ1xcMDMxJywgICdcMDMyJyA6ICdcXDAzMicsCiAgICAnXDAzMycgOiAnXFwwMzMnLCAgJ1wwMzQnIDogJ1xcMDM0JywgICdcMDM1JyA6ICdcXDAzNScsCiAgICAnXDAzNicgOiAnXFwwMzYnLCAgJ1wwMzcnIDogJ1xcMDM3JywKCiAgICAjIEJlY2F1c2Ugb2YgdGhlIHdheSBicm93c2VycyByZWFsbHkgaGFuZGxlIGNvb2tpZXMgKGFzIG9wcG9zZWQKICAgICMgdG8gd2hhdCB0aGUgUkZDIHNheXMpIHdlIGFsc28gZW5jb2RlICwgYW5kIDsKCiAgICAnLCcgOiAnXFwwNTQnLCAnOycgOiAnXFwwNzMnLAoKICAgICciJyA6ICdcXCInLCAgICAgICAnXFwnIDogJ1xcXFwnLAoKICAgICdcMTc3JyA6ICdcXDE3NycsICAnXDIwMCcgOiAnXFwyMDAnLCAgJ1wyMDEnIDogJ1xcMjAxJywKICAgICdcMjAyJyA6ICdcXDIwMicsICAnXDIwMycgOiAnXFwyMDMnLCAgJ1wyMDQnIDogJ1xcMjA0JywKICAgICdcMjA1JyA6ICdcXDIwNScsICAnXDIwNicgOiAnXFwyMDYnLCAgJ1wyMDcnIDogJ1xcMjA3JywKICAgICdcMjEwJyA6ICdcXDIxMCcsICAnXDIxMScgOiAnXFwyMTEnLCAgJ1wyMTInIDogJ1xcMjEyJywKICAgICdcMjEzJyA6ICdcXDIxMycsICAnXDIxNCcgOiAnXFwyMTQnLCAgJ1wyMTUnIDogJ1xcMjE1JywKICAgICdcMjE2JyA6ICdcXDIxNicsICAnXDIxNycgOiAnXFwyMTcnLCAgJ1wyMjAnIDogJ1xcMjIwJywKICAgICdcMjIxJyA6ICdcXDIyMScsICAnXDIyMicgOiAnXFwyMjInLCAgJ1wyMjMnIDogJ1xcMjIzJywKICAgICdcMjI0JyA6ICdcXDIyNCcsICAnXDIyNScgOiAnXFwyMjUnLCAgJ1wyMjYnIDogJ1xcMjI2JywKICAgICdcMjI3JyA6ICdcXDIyNycsICAnXDIzMCcgOiAnXFwyMzAnLCAgJ1wyMzEnIDogJ1xcMjMxJywKICAgICdcMjMyJyA6ICdcXDIzMicsICAnXDIzMycgOiAnXFwyMzMnLCAgJ1wyMzQnIDogJ1xcMjM0JywKICAgICdcMjM1JyA6ICdcXDIzNScsICAnXDIzNicgOiAnXFwyMzYnLCAgJ1wyMzcnIDogJ1xcMjM3JywKICAgICdcMjQwJyA6ICdcXDI0MCcsICAnXDI0MScgOiAnXFwyNDEnLCAgJ1wyNDInIDogJ1xcMjQyJywKICAgICdcMjQzJyA6ICdcXDI0MycsICAnXDI0NCcgOiAnXFwyNDQnLCAgJ1wyNDUnIDogJ1xcMjQ1JywKICAgICdcMjQ2JyA6ICdcXDI0NicsICAnXDI0NycgOiAnXFwyNDcnLCAgJ1wyNTAnIDogJ1xcMjUwJywKICAgICdcMjUxJyA6ICdcXDI1MScsICAnXDI1MicgOiAnXFwyNTInLCAgJ1wyNTMnIDogJ1xcMjUzJywKICAgICdcMjU0JyA6ICdcXDI1NCcsICAnXDI1NScgOiAnXFwyNTUnLCAgJ1wyNTYnIDogJ1xcMjU2JywKICAgICdcMjU3JyA6ICdcXDI1NycsICAnXDI2MCcgOiAnXFwyNjAnLCAgJ1wyNjEnIDogJ1xcMjYxJywKICAgICdcMjYyJyA6ICdcXDI2MicsICAnXDI2MycgOiAnXFwyNjMnLCAgJ1wyNjQnIDogJ1xcMjY0JywKICAgICdcMjY1JyA6ICdcXDI2NScsICAnXDI2NicgOiAnXFwyNjYnLCAgJ1wyNjcnIDogJ1xcMjY3JywKICAgICdcMjcwJyA6ICdcXDI3MCcsICAnXDI3MScgOiAnXFwyNzEnLCAgJ1wyNzInIDogJ1xcMjcyJywKICAgICdcMjczJyA6ICdcXDI3MycsICAnXDI3NCcgOiAnXFwyNzQnLCAgJ1wyNzUnIDogJ1xcMjc1JywKICAgICdcMjc2JyA6ICdcXDI3NicsICAnXDI3NycgOiAnXFwyNzcnLCAgJ1wzMDAnIDogJ1xcMzAwJywKICAgICdcMzAxJyA6ICdcXDMwMScsICAnXDMwMicgOiAnXFwzMDInLCAgJ1wzMDMnIDogJ1xcMzAzJywKICAgICdcMzA0JyA6ICdcXDMwNCcsICAnXDMwNScgOiAnXFwzMDUnLCAgJ1wzMDYnIDogJ1xcMzA2JywKICAgICdcMzA3JyA6ICdcXDMwNycsICAnXDMxMCcgOiAnXFwzMTAnLCAgJ1wzMTEnIDogJ1xcMzExJywKICAgICdcMzEyJyA6ICdcXDMxMicsICAnXDMxMycgOiAnXFwzMTMnLCAgJ1wzMTQnIDogJ1xcMzE0JywKICAgICdcMzE1JyA6ICdcXDMxNScsICAnXDMxNicgOiAnXFwzMTYnLCAgJ1wzMTcnIDogJ1xcMzE3JywKICAgICdcMzIwJyA6ICdcXDMyMCcsICAnXDMyMScgOiAnXFwzMjEnLCAgJ1wzMjInIDogJ1xcMzIyJywKICAgICdcMzIzJyA6ICdcXDMyMycsICAnXDMyNCcgOiAnXFwzMjQnLCAgJ1wzMjUnIDogJ1xcMzI1JywKICAgICdcMzI2JyA6ICdcXDMyNicsICAnXDMyNycgOiAnXFwzMjcnLCAgJ1wzMzAnIDogJ1xcMzMwJywKICAgICdcMzMxJyA6ICdcXDMzMScsICAnXDMzMicgOiAnXFwzMzInLCAgJ1wzMzMnIDogJ1xcMzMzJywKICAgICdcMzM0JyA6ICdcXDMzNCcsICAnXDMzNScgOiAnXFwzMzUnLCAgJ1wzMzYnIDogJ1xcMzM2JywKICAgICdcMzM3JyA6ICdcXDMzNycsICAnXDM0MCcgOiAnXFwzNDAnLCAgJ1wzNDEnIDogJ1xcMzQxJywKICAgICdcMzQyJyA6ICdcXDM0MicsICAnXDM0MycgOiAnXFwzNDMnLCAgJ1wzNDQnIDogJ1xcMzQ0JywKICAgICdcMzQ1JyA6ICdcXDM0NScsICAnXDM0NicgOiAnXFwzNDYnLCAgJ1wzNDcnIDogJ1xcMzQ3JywKICAgICdcMzUwJyA6ICdcXDM1MCcsICAnXDM1MScgOiAnXFwzNTEnLCAgJ1wzNTInIDogJ1xcMzUyJywKICAgICdcMzUzJyA6ICdcXDM1MycsICAnXDM1NCcgOiAnXFwzNTQnLCAgJ1wzNTUnIDogJ1xcMzU1JywKICAgICdcMzU2JyA6ICdcXDM1NicsICAnXDM1NycgOiAnXFwzNTcnLCAgJ1wzNjAnIDogJ1xcMzYwJywKICAgICdcMzYxJyA6ICdcXDM2MScsICAnXDM2MicgOiAnXFwzNjInLCAgJ1wzNjMnIDogJ1xcMzYzJywKICAgICdcMzY0JyA6ICdcXDM2NCcsICAnXDM2NScgOiAnXFwzNjUnLCAgJ1wzNjYnIDogJ1xcMzY2JywKICAgICdcMzY3JyA6ICdcXDM2NycsICAnXDM3MCcgOiAnXFwzNzAnLCAgJ1wzNzEnIDogJ1xcMzcxJywKICAgICdcMzcyJyA6ICdcXDM3MicsICAnXDM3MycgOiAnXFwzNzMnLCAgJ1wzNzQnIDogJ1xcMzc0JywKICAgICdcMzc1JyA6ICdcXDM3NScsICAnXDM3NicgOiAnXFwzNzYnLCAgJ1wzNzcnIDogJ1xcMzc3JwogICAgfQoKZGVmIF9xdW90ZShzdHIsIExlZ2FsQ2hhcnM9X0xlZ2FsQ2hhcnMpOgogICAgciIiIlF1b3RlIGEgc3RyaW5nIGZvciB1c2UgaW4gYSBjb29raWUgaGVhZGVyLgoKICAgIElmIHRoZSBzdHJpbmcgZG9lcyBub3QgbmVlZCB0byBiZSBkb3VibGUtcXVvdGVkLCB0aGVuIGp1c3QgcmV0dXJuIHRoZQogICAgc3RyaW5nLiAgT3RoZXJ3aXNlLCBzdXJyb3VuZCB0aGUgc3RyaW5nIGluIGRvdWJsZXF1b3RlcyBhbmQgcXVvdGUKICAgICh3aXRoIGEgXCkgc3BlY2lhbCBjaGFyYWN0ZXJzLgogICAgIiIiCiAgICBpZiBhbGwoYyBpbiBMZWdhbENoYXJzIGZvciBjIGluIHN0cik6CiAgICAgICAgcmV0dXJuIHN0cgogICAgZWxzZToKICAgICAgICByZXR1cm4gJyInICsgX251bGxqb2luKF9UcmFuc2xhdG9yLmdldChzLCBzKSBmb3IgcyBpbiBzdHIpICsgJyInCgoKX09jdGFsUGF0dCA9IHJlLmNvbXBpbGUociJcXFswLTNdWzAtN11bMC03XSIpCl9RdW90ZVBhdHQgPSByZS5jb21waWxlKHIiW1xcXS4iKQoKZGVmIF91bnF1b3RlKHN0cik6CiAgICAjIElmIHRoZXJlIGFyZW4ndCBhbnkgZG91YmxlcXVvdGVzLAogICAgIyB0aGVuIHRoZXJlIGNhbid0IGJlIGFueSBzcGVjaWFsIGNoYXJhY3RlcnMuICBTZWUgUkZDIDIxMDkuCiAgICBpZiBsZW4oc3RyKSA8IDI6CiAgICAgICAgcmV0dXJuIHN0cgogICAgaWYgc3RyWzBdICE9ICciJyBvciBzdHJbLTFdICE9ICciJzoKICAgICAgICByZXR1cm4gc3RyCgogICAgIyBXZSBoYXZlIHRvIGFzc3VtZSB0aGF0IHdlIG11c3QgZGVjb2RlIHRoaXMgc3RyaW5nLgogICAgIyBEb3duIHRvIHdvcmsuCgogICAgIyBSZW1vdmUgdGhlICJzCiAgICBzdHIgPSBzdHJbMTotMV0KCiAgICAjIENoZWNrIGZvciBzcGVjaWFsIHNlcXVlbmNlcy4gIEV4YW1wbGVzOgogICAgIyAgICBcMDEyIC0tPiBcbgogICAgIyAgICBcIiAgIC0tPiAiCiAgICAjCiAgICBpID0gMAogICAgbiA9IGxlbihzdHIpCiAgICByZXMgPSBbXQogICAgd2hpbGUgMCA8PSBpIDwgbjoKICAgICAgICBvX21hdGNoID0gX09jdGFsUGF0dC5zZWFyY2goc3RyLCBpKQogICAgICAgIHFfbWF0Y2ggPSBfUXVvdGVQYXR0LnNlYXJjaChzdHIsIGkpCiAgICAgICAgaWYgbm90IG9fbWF0Y2ggYW5kIG5vdCBxX21hdGNoOiAgICAgICAgICAgICAgIyBOZWl0aGVyIG1hdGNoZWQKICAgICAgICAgICAgcmVzLmFwcGVuZChzdHJbaTpdKQogICAgICAgICAgICBicmVhawogICAgICAgICMgZWxzZToKICAgICAgICBqID0gayA9IC0xCiAgICAgICAgaWYgb19tYXRjaDoKICAgICAgICAgICAgaiA9IG9fbWF0Y2guc3RhcnQoMCkKICAgICAgICBpZiBxX21hdGNoOgogICAgICAgICAgICBrID0gcV9tYXRjaC5zdGFydCgwKQogICAgICAgIGlmIHFfbWF0Y2ggYW5kIChub3Qgb19tYXRjaCBvciBrIDwgaik6ICAgICAjIFF1b3RlUGF0dCBtYXRjaGVkCiAgICAgICAgICAgIHJlcy5hcHBlbmQoc3RyW2k6a10pCiAgICAgICAgICAgIHJlcy5hcHBlbmQoc3RyW2srMV0pCiAgICAgICAgICAgIGkgPSBrICsgMgogICAgICAgIGVsc2U6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIE9jdGFsUGF0dCBtYXRjaGVkCiAgICAgICAgICAgIHJlcy5hcHBlbmQoc3RyW2k6al0pCiAgICAgICAgICAgIHJlcy5hcHBlbmQoY2hyKGludChzdHJbaisxOmorNF0sIDgpKSkKICAgICAgICAgICAgaSA9IGogKyA0CiAgICByZXR1cm4gX251bGxqb2luKHJlcykKCiMgVGhlIF9nZXRkYXRlKCkgcm91dGluZSBpcyB1c2VkIHRvIHNldCB0aGUgZXhwaXJhdGlvbiB0aW1lIGluIHRoZSBjb29raWUncyBIVFRQCiMgaGVhZGVyLiAgQnkgZGVmYXVsdCwgX2dldGRhdGUoKSByZXR1cm5zIHRoZSBjdXJyZW50IHRpbWUgaW4gdGhlIGFwcHJvcHJpYXRlCiMgImV4cGlyZXMiIGZvcm1hdCBmb3IgYSBTZXQtQ29va2llIGhlYWRlci4gIFRoZSBvbmUgb3B0aW9uYWwgYXJndW1lbnQgaXMgYW4KIyBvZmZzZXQgZnJvbSBub3csIGluIHNlY29uZHMuICBGb3IgZXhhbXBsZSwgYW4gb2Zmc2V0IG9mIC0zNjAwIG1lYW5zICJvbmUgaG91cgojIGFnbyIuICBUaGUgb2Zmc2V0IG1heSBiZSBhIGZsb2F0aW5nIHBvaW50IG51bWJlci4KIwoKX3dlZWtkYXluYW1lID0gWydNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCcsICdTdW4nXQoKX21vbnRobmFtZSA9IFtOb25lLAogICAgICAgICAgICAgICdKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsCiAgICAgICAgICAgICAgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ10KCmRlZiBfZ2V0ZGF0ZShmdXR1cmU9MCwgd2Vla2RheW5hbWU9X3dlZWtkYXluYW1lLCBtb250aG5hbWU9X21vbnRobmFtZSk6CiAgICBmcm9tIHRpbWUgaW1wb3J0IGdtdGltZSwgdGltZQogICAgbm93ID0gdGltZSgpCiAgICB5ZWFyLCBtb250aCwgZGF5LCBoaCwgbW0sIHNzLCB3ZCwgeSwgeiA9IGdtdGltZShub3cgKyBmdXR1cmUpCiAgICByZXR1cm4gIiVzLCAlMDJkICUzcyAlNGQgJTAyZDolMDJkOiUwMmQgR01UIiAlIFwKICAgICAgICAgICAod2Vla2RheW5hbWVbd2RdLCBkYXksIG1vbnRobmFtZVttb250aF0sIHllYXIsIGhoLCBtbSwgc3MpCgoKY2xhc3MgTW9yc2VsKGRpY3QpOgogICAgIiIiQSBjbGFzcyB0byBob2xkIE9ORSAoa2V5LCB2YWx1ZSkgcGFpci4KCiAgICBJbiBhIGNvb2tpZSwgZWFjaCBzdWNoIHBhaXIgbWF5IGhhdmUgc2V2ZXJhbCBhdHRyaWJ1dGVzLCBzbyB0aGlzIGNsYXNzIGlzCiAgICB1c2VkIHRvIGtlZXAgdGhlIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBrZXksdmFsdWUgcGFpci4KICAgIFRoaXMgY2xhc3MgYWxzbyBpbmNsdWRlcyBhIGNvZGVkX3ZhbHVlIGF0dHJpYnV0ZSwgd2hpY2ggaXMgdXNlZCB0byBob2xkCiAgICB0aGUgbmV0d29yayByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmFsdWUuICBUaGlzIGlzIG1vc3QgdXNlZnVsIHdoZW4gUHl0aG9uCiAgICBvYmplY3RzIGFyZSBwaWNrbGVkIGZvciBuZXR3b3JrIHRyYW5zaXQuCiAgICAiIiIKICAgICMgUkZDIDIxMDkgbGlzdHMgdGhlc2UgYXR0cmlidXRlcyBhcyByZXNlcnZlZDoKICAgICMgICBwYXRoICAgICAgIGNvbW1lbnQgICAgICAgICBkb21haW4KICAgICMgICBtYXgtYWdlICAgIHNlY3VyZSAgICAgIHZlcnNpb24KICAgICMKICAgICMgRm9yIGhpc3RvcmljYWwgcmVhc29ucywgdGhlc2UgYXR0cmlidXRlcyBhcmUgYWxzbyByZXNlcnZlZDoKICAgICMgICBleHBpcmVzCiAgICAjCiAgICAjIFRoaXMgaXMgYW4gZXh0ZW5zaW9uIGZyb20gTWljcm9zb2Z0OgogICAgIyAgIGh0dHBvbmx5CiAgICAjCiAgICAjIFRoaXMgZGljdGlvbmFyeSBwcm92aWRlcyBhIG1hcHBpbmcgZnJvbSB0aGUgbG93ZXJjYXNlCiAgICAjIHZhcmlhbnQgb24gdGhlIGxlZnQgdG8gdGhlIGFwcHJvcHJpYXRlIHRyYWRpdGlvbmFsCiAgICAjIGZvcm1hdHRpbmcgb24gdGhlIHJpZ2h0LgogICAgX3Jlc2VydmVkID0gewogICAgICAgICJleHBpcmVzIiAgOiAiZXhwaXJlcyIsCiAgICAgICAgInBhdGgiICAgICA6ICJQYXRoIiwKICAgICAgICAiY29tbWVudCIgIDogIkNvbW1lbnQiLAogICAgICAgICJkb21haW4iICAgOiAiRG9tYWluIiwKICAgICAgICAibWF4LWFnZSIgIDogIk1heC1BZ2UiLAogICAgICAgICJzZWN1cmUiICAgOiAic2VjdXJlIiwKICAgICAgICAiaHR0cG9ubHkiIDogImh0dHBvbmx5IiwKICAgICAgICAidmVyc2lvbiIgIDogIlZlcnNpb24iLAogICAgfQoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICAjIFNldCBkZWZhdWx0cwogICAgICAgIHNlbGYua2V5ID0gc2VsZi52YWx1ZSA9IHNlbGYuY29kZWRfdmFsdWUgPSBOb25lCgogICAgICAgICMgU2V0IGRlZmF1bHQgYXR0cmlidXRlcwogICAgICAgIGZvciBrZXkgaW4gc2VsZi5fcmVzZXJ2ZWQ6CiAgICAgICAgICAgIGRpY3QuX19zZXRpdGVtX18oc2VsZiwga2V5LCAiIikKCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwgSywgVik6CiAgICAgICAgSyA9IEsubG93ZXIoKQogICAgICAgIGlmIG5vdCBLIGluIHNlbGYuX3Jlc2VydmVkOgogICAgICAgICAgICByYWlzZSBDb29raWVFcnJvcigiSW52YWxpZCBBdHRyaWJ1dGUgJXMiICUgSykKICAgICAgICBkaWN0Ll9fc2V0aXRlbV9fKHNlbGYsIEssIFYpCgogICAgZGVmIGlzUmVzZXJ2ZWRLZXkoc2VsZiwgSyk6CiAgICAgICAgcmV0dXJuIEsubG93ZXIoKSBpbiBzZWxmLl9yZXNlcnZlZAoKICAgIGRlZiBzZXQoc2VsZiwga2V5LCB2YWwsIGNvZGVkX3ZhbCwgTGVnYWxDaGFycz1fTGVnYWxDaGFycyk6CiAgICAgICAgIyBGaXJzdCB3ZSB2ZXJpZnkgdGhhdCB0aGUga2V5IGlzbid0IGEgcmVzZXJ2ZWQgd29yZAogICAgICAgICMgU2Vjb25kIHdlIG1ha2Ugc3VyZSBpdCBvbmx5IGNvbnRhaW5zIGxlZ2FsIGNoYXJhY3RlcnMKICAgICAgICBpZiBrZXkubG93ZXIoKSBpbiBzZWxmLl9yZXNlcnZlZDoKICAgICAgICAgICAgcmFpc2UgQ29va2llRXJyb3IoIkF0dGVtcHQgdG8gc2V0IGEgcmVzZXJ2ZWQga2V5OiAlcyIgJSBrZXkpCiAgICAgICAgaWYgYW55KGMgbm90IGluIExlZ2FsQ2hhcnMgZm9yIGMgaW4ga2V5KToKICAgICAgICAgICAgcmFpc2UgQ29va2llRXJyb3IoIklsbGVnYWwga2V5IHZhbHVlOiAlcyIgJSBrZXkpCgogICAgICAgICMgSXQncyBhIGdvb2Qga2V5LCBzbyBzYXZlIGl0LgogICAgICAgIHNlbGYua2V5ID0ga2V5CiAgICAgICAgc2VsZi52YWx1ZSA9IHZhbAogICAgICAgIHNlbGYuY29kZWRfdmFsdWUgPSBjb2RlZF92YWwKCiAgICBkZWYgb3V0cHV0KHNlbGYsIGF0dHJzPU5vbmUsIGhlYWRlcj0iU2V0LUNvb2tpZToiKToKICAgICAgICByZXR1cm4gIiVzICVzIiAlIChoZWFkZXIsIHNlbGYuT3V0cHV0U3RyaW5nKGF0dHJzKSkKCiAgICBfX3N0cl9fID0gb3V0cHV0CgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAnPCVzOiAlcz0lcz4nICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYua2V5LCByZXByKHNlbGYudmFsdWUpKQoKICAgIGRlZiBqc19vdXRwdXQoc2VsZiwgYXR0cnM9Tm9uZSk6CiAgICAgICAgIyBQcmludCBqYXZhc2NyaXB0CiAgICAgICAgcmV0dXJuICIiIgogICAgICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KICAgICAgICA8IS0tIGJlZ2luIGhpZGluZwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IFwiJXNcIjsKICAgICAgICAvLyBlbmQgaGlkaW5nIC0tPgogICAgICAgIDwvc2NyaXB0PgogICAgICAgICIiIiAlIChzZWxmLk91dHB1dFN0cmluZyhhdHRycykucmVwbGFjZSgnIicsIHInXCInKSkKCiAgICBkZWYgT3V0cHV0U3RyaW5nKHNlbGYsIGF0dHJzPU5vbmUpOgogICAgICAgICMgQnVpbGQgdXAgb3VyIHJlc3VsdAogICAgICAgICMKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIGFwcGVuZCA9IHJlc3VsdC5hcHBlbmQKCiAgICAgICAgIyBGaXJzdCwgdGhlIGtleT12YWx1ZSBwYWlyCiAgICAgICAgYXBwZW5kKCIlcz0lcyIgJSAoc2VsZi5rZXksIHNlbGYuY29kZWRfdmFsdWUpKQoKICAgICAgICAjIE5vdyBhZGQgYW55IGRlZmluZWQgYXR0cmlidXRlcwogICAgICAgIGlmIGF0dHJzIGlzIE5vbmU6CiAgICAgICAgICAgIGF0dHJzID0gc2VsZi5fcmVzZXJ2ZWQKICAgICAgICBpdGVtcyA9IHNvcnRlZChzZWxmLml0ZW1zKCkpCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gaXRlbXM6CiAgICAgICAgICAgIGlmIHZhbHVlID09ICIiOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgaWYga2V5IG5vdCBpbiBhdHRyczoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGtleSA9PSAiZXhwaXJlcyIgYW5kIGlzaW5zdGFuY2UodmFsdWUsIGludCk6CiAgICAgICAgICAgICAgICBhcHBlbmQoIiVzPSVzIiAlIChzZWxmLl9yZXNlcnZlZFtrZXldLCBfZ2V0ZGF0ZSh2YWx1ZSkpKQogICAgICAgICAgICBlbGlmIGtleSA9PSAibWF4LWFnZSIgYW5kIGlzaW5zdGFuY2UodmFsdWUsIGludCk6CiAgICAgICAgICAgICAgICBhcHBlbmQoIiVzPSVkIiAlIChzZWxmLl9yZXNlcnZlZFtrZXldLCB2YWx1ZSkpCiAgICAgICAgICAgIGVsaWYga2V5ID09ICJzZWN1cmUiOgogICAgICAgICAgICAgICAgYXBwZW5kKHN0cihzZWxmLl9yZXNlcnZlZFtrZXldKSkKICAgICAgICAgICAgZWxpZiBrZXkgPT0gImh0dHBvbmx5IjoKICAgICAgICAgICAgICAgIGFwcGVuZChzdHIoc2VsZi5fcmVzZXJ2ZWRba2V5XSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhcHBlbmQoIiVzPSVzIiAlIChzZWxmLl9yZXNlcnZlZFtrZXldLCB2YWx1ZSkpCgogICAgICAgICMgUmV0dXJuIHRoZSByZXN1bHQKICAgICAgICByZXR1cm4gX3NlbWlzcGFjZWpvaW4ocmVzdWx0KQoKCiMKIyBQYXR0ZXJuIGZvciBmaW5kaW5nIGNvb2tpZQojCiMgVGhpcyB1c2VkIHRvIGJlIHN0cmljdCBwYXJzaW5nIGJhc2VkIG9uIHRoZSBSRkMyMTA5IGFuZCBSRkMyMDY4CiMgc3BlY2lmaWNhdGlvbnMuICBJIGhhdmUgc2luY2UgZGlzY292ZXJlZCB0aGF0IE1TSUUgMy4weCBkb2Vzbid0CiMgZm9sbG93IHRoZSBjaGFyYWN0ZXIgcnVsZXMgb3V0bGluZWQgaW4gdGhvc2Ugc3BlY3MuICBBcyBhCiMgcmVzdWx0LCB0aGUgcGFyc2luZyBydWxlcyBoZXJlIGFyZSBsZXNzIHN0cmljdC4KIwoKX0xlZ2FsQ2hhcnNQYXR0ICA9IHIiW1x3XGQhIyUmJ35fYD48QCw6L1wkXCpcK1wtXC5cXlx8XClcKFw/XH1ce1w9XSIKX0Nvb2tpZVBhdHRlcm4gPSByZS5jb21waWxlKHIiIiIKICAgICg/eCkgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFRoaXMgaXMgYSB2ZXJib3NlIHBhdHRlcm4KICAgICg/UDxrZXk+ICAgICAgICAgICAgICAgICAgICAgICAjIFN0YXJ0IG9mIGdyb3VwICdrZXknCiAgICAiIiIgKyBfTGVnYWxDaGFyc1BhdHQgKyByIiIiKz8gICAjIEFueSB3b3JkIG9mIGF0IGxlYXN0IG9uZSBsZXR0ZXIKICAgICkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIEVuZCBvZiBncm91cCAna2V5JwogICAgXHMqPVxzKiAgICAgICAgICAgICAgICAgICAgICAgICMgRXF1YWwgU2lnbgogICAgKD9QPHZhbD4gICAgICAgICAgICAgICAgICAgICAgICMgU3RhcnQgb2YgZ3JvdXAgJ3ZhbCcKICAgICIoPzpbXlxcIl18XFwuKSoiICAgICAgICAgICAgICAgICMgQW55IGRvdWJsZXF1b3RlZCBzdHJpbmcKICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgb3IKICAgIFx3ezN9LFxzW1x3XGRccy1dezksMTF9XHNbXGQ6XXs4fVxzR01UICAjIFNwZWNpYWwgY2FzZSBmb3IgImV4cGlyZXMiIGF0dHIKICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgb3IKICAgICIiIiArIF9MZWdhbENoYXJzUGF0dCArIHIiIiIqICAgICMgQW55IHdvcmQgb3IgZW1wdHkgc3RyaW5nCiAgICApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBFbmQgb2YgZ3JvdXAgJ3ZhbCcKICAgIFxzKjs/ICAgICAgICAgICAgICAgICAgICAgICAgICAjIFByb2JhYmx5IGVuZGluZyBpbiBhIHNlbWktY29sb24KICAgICIiIiwgcmUuQVNDSUkpICAgICAgICAgICAgICAgICAjIE1heSBiZSByZW1vdmVkIGlmIHNhZmUuCgoKIyBBdCBsb25nIGxhc3QsIGhlcmUgaXMgdGhlIGNvb2tpZSBjbGFzcy4gIFVzaW5nIHRoaXMgY2xhc3MgaXMgYWxtb3N0IGp1c3QgbGlrZQojIHVzaW5nIGEgZGljdGlvbmFyeS4gIFNlZSB0aGlzIG1vZHVsZSdzIGRvY3N0cmluZyBmb3IgZXhhbXBsZSB1c2FnZS4KIwpjbGFzcyBCYXNlQ29va2llKGRpY3QpOgogICAgIiIiQSBjb250YWluZXIgY2xhc3MgZm9yIGEgc2V0IG9mIE1vcnNlbHMuIiIiCgogICAgZGVmIHZhbHVlX2RlY29kZShzZWxmLCB2YWwpOgogICAgICAgICIiInJlYWxfdmFsdWUsIGNvZGVkX3ZhbHVlID0gdmFsdWVfZGVjb2RlKFNUUklORykKICAgICAgICBDYWxsZWQgcHJpb3IgdG8gc2V0dGluZyBhIGNvb2tpZSdzIHZhbHVlIGZyb20gdGhlIG5ldHdvcmsKICAgICAgICByZXByZXNlbnRhdGlvbi4gIFRoZSBWQUxVRSBpcyB0aGUgdmFsdWUgcmVhZCBmcm9tIEhUVFAKICAgICAgICBoZWFkZXIuCiAgICAgICAgT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBtb2RpZnkgdGhlIGJlaGF2aW9yIG9mIGNvb2tpZXMuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHZhbCwgdmFsCgogICAgZGVmIHZhbHVlX2VuY29kZShzZWxmLCB2YWwpOgogICAgICAgICIiInJlYWxfdmFsdWUsIGNvZGVkX3ZhbHVlID0gdmFsdWVfZW5jb2RlKFZBTFVFKQogICAgICAgIENhbGxlZCBwcmlvciB0byBzZXR0aW5nIGEgY29va2llJ3MgdmFsdWUgZnJvbSB0aGUgZGljdGlvbmFyeQogICAgICAgIHJlcHJlc2VudGF0aW9uLiAgVGhlIFZBTFVFIGlzIHRoZSB2YWx1ZSBiZWluZyBhc3NpZ25lZC4KICAgICAgICBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIG1vZGlmeSB0aGUgYmVoYXZpb3Igb2YgY29va2llcy4KICAgICAgICAiIiIKICAgICAgICBzdHJ2YWwgPSBzdHIodmFsKQogICAgICAgIHJldHVybiBzdHJ2YWwsIHN0cnZhbAoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbnB1dD1Ob25lKToKICAgICAgICBpZiBpbnB1dDoKICAgICAgICAgICAgc2VsZi5sb2FkKGlucHV0KQoKICAgIGRlZiBfX3NldChzZWxmLCBrZXksIHJlYWxfdmFsdWUsIGNvZGVkX3ZhbHVlKToKICAgICAgICAiIiJQcml2YXRlIG1ldGhvZCBmb3Igc2V0dGluZyBhIGNvb2tpZSdzIHZhbHVlIiIiCiAgICAgICAgTSA9IHNlbGYuZ2V0KGtleSwgTW9yc2VsKCkpCiAgICAgICAgTS5zZXQoa2V5LCByZWFsX3ZhbHVlLCBjb2RlZF92YWx1ZSkKICAgICAgICBkaWN0Ll9fc2V0aXRlbV9fKHNlbGYsIGtleSwgTSkKCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWx1ZSk6CiAgICAgICAgIiIiRGljdGlvbmFyeSBzdHlsZSBhc3NpZ25tZW50LiIiIgogICAgICAgIHJ2YWwsIGN2YWwgPSBzZWxmLnZhbHVlX2VuY29kZSh2YWx1ZSkKICAgICAgICBzZWxmLl9fc2V0KGtleSwgcnZhbCwgY3ZhbCkKCiAgICBkZWYgb3V0cHV0KHNlbGYsIGF0dHJzPU5vbmUsIGhlYWRlcj0iU2V0LUNvb2tpZToiLCBzZXA9IlwwMTVcMDEyIik6CiAgICAgICAgIiIiUmV0dXJuIGEgc3RyaW5nIHN1aXRhYmxlIGZvciBIVFRQLiIiIgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQoc2VsZi5pdGVtcygpKQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGl0ZW1zOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKHZhbHVlLm91dHB1dChhdHRycywgaGVhZGVyKSkKICAgICAgICByZXR1cm4gc2VwLmpvaW4ocmVzdWx0KQoKICAgIF9fc3RyX18gPSBvdXRwdXQKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgbCA9IFtdCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQoc2VsZi5pdGVtcygpKQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGl0ZW1zOgogICAgICAgICAgICBsLmFwcGVuZCgnJXM9JXMnICUgKGtleSwgcmVwcih2YWx1ZS52YWx1ZSkpKQogICAgICAgIHJldHVybiAnPCVzOiAlcz4nICUgKHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBfc3BhY2Vqb2luKGwpKQoKICAgIGRlZiBqc19vdXRwdXQoc2VsZiwgYXR0cnM9Tm9uZSk6CiAgICAgICAgIiIiUmV0dXJuIGEgc3RyaW5nIHN1aXRhYmxlIGZvciBKYXZhU2NyaXB0LiIiIgogICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgaXRlbXMgPSBzb3J0ZWQoc2VsZi5pdGVtcygpKQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGl0ZW1zOgogICAgICAgICAgICByZXN1bHQuYXBwZW5kKHZhbHVlLmpzX291dHB1dChhdHRycykpCiAgICAgICAgcmV0dXJuIF9udWxsam9pbihyZXN1bHQpCgogICAgZGVmIGxvYWQoc2VsZiwgcmF3ZGF0YSk6CiAgICAgICAgIiIiTG9hZCBjb29raWVzIGZyb20gYSBzdHJpbmcgKHByZXN1bWFibHkgSFRUUF9DT09LSUUpIG9yCiAgICAgICAgZnJvbSBhIGRpY3Rpb25hcnkuICBMb2FkaW5nIGNvb2tpZXMgZnJvbSBhIGRpY3Rpb25hcnkgJ2QnCiAgICAgICAgaXMgZXF1aXZhbGVudCB0byBjYWxsaW5nOgogICAgICAgICAgICBtYXAoQ29va2llLl9fc2V0aXRlbV9fLCBkLmtleXMoKSwgZC52YWx1ZXMoKSkKICAgICAgICAiIiIKICAgICAgICBpZiBpc2luc3RhbmNlKHJhd2RhdGEsIHN0cik6CiAgICAgICAgICAgIHNlbGYuX19wYXJzZV9zdHJpbmcocmF3ZGF0YSkKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIHNlbGYudXBkYXRlKCkgd291bGRuJ3QgY2FsbCBvdXIgY3VzdG9tIF9fc2V0aXRlbV9fCiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIHJhd2RhdGEuaXRlbXMoKToKICAgICAgICAgICAgICAgIHNlbGZba2V5XSA9IHZhbHVlCiAgICAgICAgcmV0dXJuCgogICAgZGVmIF9fcGFyc2Vfc3RyaW5nKHNlbGYsIHN0ciwgcGF0dD1fQ29va2llUGF0dGVybik6CiAgICAgICAgaSA9IDAgICAgICAgICAgICAjIE91ciBzdGFydGluZyBwb2ludAogICAgICAgIG4gPSBsZW4oc3RyKSAgICAgIyBMZW5ndGggb2Ygc3RyaW5nCiAgICAgICAgTSA9IE5vbmUgICAgICAgICAjIGN1cnJlbnQgbW9yc2VsCgogICAgICAgIHdoaWxlIDAgPD0gaSA8IG46CiAgICAgICAgICAgICMgU3RhcnQgbG9va2luZyBmb3IgYSBjb29raWUKICAgICAgICAgICAgbWF0Y2ggPSBwYXR0LnNlYXJjaChzdHIsIGkpCiAgICAgICAgICAgIGlmIG5vdCBtYXRjaDoKICAgICAgICAgICAgICAgICMgTm8gbW9yZSBjb29raWVzCiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAga2V5LCB2YWx1ZSA9IG1hdGNoLmdyb3VwKCJrZXkiKSwgbWF0Y2guZ3JvdXAoInZhbCIpCiAgICAgICAgICAgIGkgPSBtYXRjaC5lbmQoMCkKCiAgICAgICAgICAgICMgUGFyc2UgdGhlIGtleSwgdmFsdWUgaW4gY2FzZSBpdCdzIG1ldGFpbmZvCiAgICAgICAgICAgIGlmIGtleVswXSA9PSAiJCI6CiAgICAgICAgICAgICAgICAjIFdlIGlnbm9yZSBhdHRyaWJ1dGVzIHdoaWNoIHBlcnRhaW4gdG8gdGhlIGNvb2tpZQogICAgICAgICAgICAgICAgIyBtZWNoYW5pc20gYXMgYSB3aG9sZS4gIFNlZSBSRkMgMjEwOS4KICAgICAgICAgICAgICAgICMgKERvZXMgYW55b25lIGNhcmU/KQogICAgICAgICAgICAgICAgaWYgTToKICAgICAgICAgICAgICAgICAgICBNW2tleVsxOl1dID0gdmFsdWUKICAgICAgICAgICAgZWxpZiBrZXkubG93ZXIoKSBpbiBNb3JzZWwuX3Jlc2VydmVkOgogICAgICAgICAgICAgICAgaWYgTToKICAgICAgICAgICAgICAgICAgICBNW2tleV0gPSBfdW5xdW90ZSh2YWx1ZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJ2YWwsIGN2YWwgPSBzZWxmLnZhbHVlX2RlY29kZSh2YWx1ZSkKICAgICAgICAgICAgICAgIHNlbGYuX19zZXQoa2V5LCBydmFsLCBjdmFsKQogICAgICAgICAgICAgICAgTSA9IHNlbGZba2V5XQoKCmNsYXNzIFNpbXBsZUNvb2tpZShCYXNlQ29va2llKToKICAgICIiIgogICAgU2ltcGxlQ29va2llIHN1cHBvcnRzIHN0cmluZ3MgYXMgY29va2llIHZhbHVlcy4gIFdoZW4gc2V0dGluZwogICAgdGhlIHZhbHVlIHVzaW5nIHRoZSBkaWN0aW9uYXJ5IGFzc2lnbm1lbnQgbm90YXRpb24sIFNpbXBsZUNvb2tpZQogICAgY2FsbHMgdGhlIGJ1aWx0aW4gc3RyKCkgdG8gY29udmVydCB0aGUgdmFsdWUgdG8gYSBzdHJpbmcuICBWYWx1ZXMKICAgIHJlY2VpdmVkIGZyb20gSFRUUCBhcmUga2VwdCBhcyBzdHJpbmdzLgogICAgIiIiCiAgICBkZWYgdmFsdWVfZGVjb2RlKHNlbGYsIHZhbCk6CiAgICAgICAgcmV0dXJuIF91bnF1b3RlKHZhbCksIHZhbAoKICAgIGRlZiB2YWx1ZV9lbmNvZGUoc2VsZiwgdmFsKToKICAgICAgICBzdHJ2YWwgPSBzdHIodmFsKQogICAgICAgIHJldHVybiBzdHJ2YWwsIF9xdW90ZShzdHJ2YWwpCg==',
'/Lib/http/__init__.py':''
}


function readFromVFS(lib){
   //borrowed code from http://stackoverflow.com/questions/1119722/base-62-conversion-in-python
   if (window.atob === undefined) {
      // browser is not chrome, firefox or safari :(
      window.atob=function(s) {
        var e={},i,k,v=[],r='',w=String.fromCharCode;
        var n=[[65,91],[97,123],[48,58],[43,44],[47,48]];

        for(z in n){for(i=n[z][0];i<n[z][1];i++){v.push(w(i));}}
        for(i=0;i<64;i++){e[v[i]]=i;}

        for(i=0;i<s.length;i+=72){
           var b=0,c,x,l=0,o=s.substring(i,i+72);
           for(x=0;x<o.length;x++){
              c=e[o.charAt(x)];b=(b<<6)+c;l+=6;
              while(l>=8){r+=w((b>>>(l-=8))%256);}
           }
        }
        return r;
      }
   }

   if (__BRYTHON__.$py_VFS[lib] === undefined) return undefined
   //retrieve module from virutal file system and return contents
   return window.atob(__BRYTHON__.$py_VFS[lib])
}


function $import_pyj_module(module,alias,names,path,module_contents) {
    __BRYTHON__.$py_module_path[module]=path
    __BRYTHON__.$py_module_alias[module]=alias
    __BRYTHON__.scope[module+'.py']={}
    __BRYTHON__.scope[module+'.py'].__dict__={}

   try {
     eval(module_contents);
     // add names defined in the module as attributes of $module
     for(var attr in __BRYTHON__.scope[module].__dict__){
       $module[attr] = __BRYTHON__.scope[module].__dict__[attr]
     }
        
     // add class and __str__
     $module.__class__ = $type
     $module.__repr__ = function(){return "<module '"+module+"' from "+path+" >"}
     $module.__str__ = function(){return "<module '"+module+"' from "+path+" >"}
     $module.__file__ = path
     return $module
   } catch(err) {
     eval('throw '+err.name+'(err.message)')
   }
}

//define import procedure to look up module in VFS
$import_via_VFS=function(module,alias,names){
  var ext=['.js', '.pyj', '.py']
  var search_path=__BRYTHON__.path
  var root = __BRYTHON__.brython_path;
  if (root.endswith('/')) {
     root=root.substring(0,root.length-1); 
  }
  if (search_path.indexOf(root+'/libs') == -1) {
     search_path.unshift(root+'/libs')
  }

  if (search_path.indexOf(root+'/Lib') == -1) {
     search_path.unshift(root+'/Lib')
  }

  for(var i=0; i<search_path.length; i++) {
     for (var j=0; j<ext.length; j++) {
         var path=search_path[i].replace(root, '')
         path+='/'+module+ext[j]
         
         //console.log("searching for " + path + " in VFS");
         var module_contents=readFromVFS(path)
         if(module_contents !== undefined) {
           console.log("imported ("+module+") via VFS:" + path)
           if (ext[j] == '.js') {
              return $import_js_module(module,alias,names,path,module_contents)
           }
           if (ext[j] == '.pyj') {
              return $import_pyj_module(module,alias,names,path,module_contents)
           }
           return $import_py_module(module,alias,names,path,module_contents)
         }
     }
  }
  res = Error()
  res.name = 'NotFoundError'
  res.message = "No module named '"+module+"'"
  throw res
}

// since $import_funcs is now a local variable (import_funcs), we have
// to over write the $import_single function to get VFS to work
$import_single=function (module){
    var import_funcs = [$import_via_VFS, $import_js, $import_module_search_path]
    if(module.name.search(/\./)>-1){import_funcs = [$import_module_search_path]}
    for(var j=0;j<import_funcs.length;j++){
        try{
            return import_funcs[j](module)
        } catch(err){
            if(err.name==="NotFoundError"){
                if(j==import_funcs.length-1){
                    throw ImportError("no module named '"+module.name+"'")
                }else{
                    continue
                }
            }else{throw(err)}
        }
    }
}
  