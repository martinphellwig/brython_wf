__BRYTHON__.$py_VFS={
'/libs/svg.js':'JG1vZHVsZSA9IChmdW5jdGlvbigpewoKJHN2Z05TID0gImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgokeGxpbmtOUyA9ICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIgoKZnVuY3Rpb24gJFNWR1RhZyh0YWdfbmFtZSxhcmdzKXsKICAgIC8vIHJlcHJlc2VudHMgYW4gU1ZHIHRhZwogICAgdmFyICRpID0gbnVsbAogICAgdmFyICRvYmogPSB0aGlzCiAgICBlbHQgPSAkRE9NTm9kZShkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJHN2Z05TLHRhZ19uYW1lKSkKICAgIGlmKGFyZ3MhPXVuZGVmaW5lZCAmJiBhcmdzLmxlbmd0aD4wKXsKICAgICAgICAkc3RhcnQgPSAwCiAgICAgICAgJGZpcnN0ID0gYXJnc1swXQogICAgICAgIC8vIGlmIGZpcnN0IGFyZ3VtZW50IGlzIG5vdCBhIGtleXdvcmQsIGl0J3MgdGhlIHRhZyBjb250ZW50CiAgICAgICAgaWYoIWlzaW5zdGFuY2UoJGZpcnN0LCRLdykpewogICAgICAgICAgICAkc3RhcnQgPSAxCiAgICAgICAgICAgIGlmKGlzaW5zdGFuY2UoJGZpcnN0LFtzdHIsaW50LGZsb2F0XSkpewogICAgICAgICAgICAgICAgdHh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc3RyKCRmaXJzdCkpCiAgICAgICAgICAgICAgICBlbHQuYXBwZW5kQ2hpbGQodHh0KQogICAgICAgICAgICB9IGVsc2UgaWYoaXNpbnN0YW5jZSgkZmlyc3QsJEFic3RyYWN0VGFnKSl7CiAgICAgICAgICAgICAgICBmb3IoJGk9MDskaTwkZmlyc3QuY2hpbGRyZW4ubGVuZ3RoOyRpKyspewogICAgICAgICAgICAgICAgICAgIGVsdC5hcHBlbmRDaGlsZCgkZmlyc3QuY2hpbGRyZW5bJGldKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdHJ5e2VsdC5hcHBlbmRDaGlsZCgkZmlyc3QpfQogICAgICAgICAgICAgICAgY2F0Y2goZXJyKXskcmFpc2UoJ1ZhbHVlRXJyb3InLCd3cm9uZyBlbGVtZW50ICcrJGZpcnN0KX0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBhdHRyaWJ1dGVzCiAgICAgICAgZm9yKCRpPSRzdGFydDskaTxhcmdzLmxlbmd0aDskaSsrKXsKICAgICAgICAgICAgLy8ga2V5d29yZCBhcmd1bWVudHMKICAgICAgICAgICAgJGFyZyA9IGFyZ3NbJGldCiAgICAgICAgICAgIGlmKGlzaW5zdGFuY2UoJGFyZywkS3cpKXsKICAgICAgICAgICAgICAgIGlmKCRhcmcubmFtZS50b0xvd2VyQ2FzZSgpLnN1YnN0cigwLDIpPT0ib24iKXsgLy8gZXZlbnRzCiAgICAgICAgICAgICAgICAgICAgZXZhbCgnZWx0LicrJGFyZy5uYW1lLnRvTG93ZXJDYXNlKCkrJz1mdW5jdGlvbigpeycrJGFyZy52YWx1ZSsnfScpCiAgICAgICAgICAgICAgICB9ZWxzZSBpZigkYXJnLm5hbWUudG9Mb3dlckNhc2UoKT09InN0eWxlIil7CiAgICAgICAgICAgICAgICAgICAgZWx0LnNldF9zdHlsZSgkYXJnLnZhbHVlKQogICAgICAgICAgICAgICAgfWVsc2UgaWYoJGFyZy5uYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiaHJlZiIpICE9PSAtMSl7IC8vIHhsaW5rOmhyZWYKICAgICAgICAgICAgICAgICAgICBlbHQuc2V0QXR0cmlidXRlTlMoICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwiaHJlZiIsJGFyZy52YWx1ZSkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYoJGFyZy52YWx1ZSE9PWZhbHNlKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3B0aW9uLnNlbGVjdGVkPWZhbHNlIHNldHMgaXQgdG8gdHJ1ZSA6LSkKICAgICAgICAgICAgICAgICAgICAgICAgZWx0LnNldEF0dHJpYnV0ZU5TKG51bGwsJGFyZy5uYW1lLnJlcGxhY2UoJ18nLCctJyksJGFyZy52YWx1ZSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gZWx0Cn0KCi8vIFNWRwp2YXIgJHN2Z190YWdzID0gWydhJywKJ2FsdEdseXBoJywKJ2FsdEdseXBoRGVmJywKJ2FsdEdseXBoSXRlbScsCidhbmltYXRlJywKJ2FuaW1hdGVDb2xvcicsCidhbmltYXRlTW90aW9uJywKJ2FuaW1hdGVUcmFuc2Zvcm0nLAonY2lyY2xlJywKJ2NsaXBQYXRoJywKJ2NvbG9yX3Byb2ZpbGUnLCAvLyBpbnN0ZWFkIG9mIGNvbG9yLXByb2ZpbGUKJ2N1cnNvcicsCidkZWZzJywKJ2Rlc2MnLAonZWxsaXBzZScsCidmZUJsZW5kJywKJ2cnLAonaW1hZ2UnLAonbGluZScsCidsaW5lYXJHcmFkaWVudCcsCidtYXJrZXInLAonbWFzaycsCidwYXRoJywKJ3BhdHRlcm4nLAoncG9seWdvbicsCidwb2x5bGluZScsCidyYWRpYWxHcmFkaWVudCcsCidyZWN0JywKJ3N0b3AnLAonc3ZnJywKJ3RleHQnLAondHJlZicsCid0c3BhbicsCid1c2UnXQoKJHN2ZyA9IGZ1bmN0aW9uKCl7cmV0dXJuICRTVkdUYWcoJ1gnLGFyZ3VtZW50cyl9CiRzdmcgKz0gJycgLy8gc291cmNlIGNvZGUKCnZhciBvYmogPSBuZXcgT2JqZWN0KCkKZm9yKHZhciBpPTA7aTwkc3ZnX3RhZ3MubGVuZ3RoO2krKyl7CiAgICB2YXIgdGFnID0gJHN2Z190YWdzW2ldCiAgICBldmFsKCdvYmouJyt0YWcrJz0nKyRzdmcucmVwbGFjZSgnWCcsdGFnKSkKfQpvYmouX19nZXRhdHRyX18gPSBmdW5jdGlvbihhdHRyKXtyZXR1cm4gdGhpc1thdHRyXX0KcmV0dXJuIG9iagp9KSgp',
'/libs/json.js':'JG1vZHVsZSA9ICB7CgogICAgX19nZXRhdHRyX18gOiBmdW5jdGlvbihhdHRyKXtyZXR1cm4gdGhpc1thdHRyXX0sCgogICAgcGFyc2UgOiBmdW5jdGlvbihqc29uX29iail7CiAgICAgICAgdmFyIHJlcyA9IEpTT04ucGFyc2UoanNvbl9vYmopCiAgICAgICAgdmFyIF9jbGFzcyA9IHJlc1snY2xhc3MnXQogICAgICAgIGlmKF9jbGFzcz09PXVuZGVmaW5lZCl7cmV0dXJuICRKUzJQeShyZXMpfQogICAgICAgIGVsc2UgaWYoWydpbnQnLCdzdHInLCdsaXN0J10uaW5kZXhPZihfY2xhc3MpPi0xKXtyZXR1cm4gcmVzLm9ian0KICAgICAgICBlbHNlIGlmKF9jbGFzcz09PSdmbG9hdCcpe3JldHVybiByZXMub2JqLnZhbHVlfQogICAgICAgIGVsc2UgaWYoX2NsYXNzPT09J2RpY3QnKXsKICAgICAgICAgICAgdmFyIHJlczEgPSBkaWN0KCkKICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxyZXMub2JqLiRrZXlzLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgcmVzMS5fX3NldGl0ZW1fXyhyZXMub2JqLiRrZXlzW2ldLHJlcy5vYmouJHZhbHVlc1tpXSkKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzMQogICAgICAgIH1lbHNlIGlmKF9jbGFzcz09PSdzZXQnKXsKICAgICAgICAgICAgdmFyIHJlczEgPSBzZXQoKQogICAgICAgICAgICBmb3IodmFyIGk9MDtpPHJlcy5vYmouaXRlbXMubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICByZXMxLmFkZChyZXMub2JqLml0ZW1zW2ldKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXMxCiAgICAgICAgfWVsc2V7dGhyb3cgVmFsdWVFcnJvcigiY2FuJ3QgcGFyc2UgSlNPTiBvYmplY3QgIitqc29uX29iail9CiAgICB9LAoKICAgIHN0cmluZ2lmeSA6IGZ1bmN0aW9uKG9iail7CiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsnY2xhc3MnOm9iai5fX2NsYXNzX18uX19uYW1lX18sJ29iaic6b2JqfSkKICAgIH0sCn0=',
'/libs/datetime.js':'dmFyIG1zZWNQZXJNaW4gPSA2MDAwMDsKdmFyIG1zZWNQZXJIciA9IG1zZWNQZXJNaW4qNjA7CnZhciBtc2VjUGVyRGF5ID0gbXNlY1BlckhyKjI0Owp2YXIgbXNlY1BlcldrID0gbXNlY1BlckRheSoyNCo3OwoKdmFyIGZyb21fbXNlY3M9ZnVuY3Rpb24obXNlY3MpIHsKICAgIHZhciB3ZWVrcz0gfn4obXNlY3MvbXNlY1BlcldrKQogICAgbXNlY3MgJT0gbXNlY1BlcldrCgogICAgdmFyIGRheXM9IH5+KG1zZWNzL21zZWNQZXJEYXkpCiAgICBtc2VjcyAlPSBtc2VjUGVyRGF5CgogICAgdmFyIGhvdXJzID0gfn4obXNlY3MvbXNlY1BlckhyKQogICAgbXNlY3MgJT0gbXNlY1BlckhyCgogICAgdmFyIG1pbnV0ZXMgPSB+fihtc2Vjcy9tc2VjUGVyTWluKQogICAgbXNlY3MgJT0gbXNlY1Blck1pbgoKICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcihtc2Vjcy8xMDAwKSAgICAgICAgICAgIAogICAgbXNlY3MgJT0gMTAwMAoKICAgIHJldHVybiBbd2Vla3MsIGRheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBtc2Vjc10KfQoKdmFyIHRvX21zZWNzPWZ1bmN0aW9uKHdlZWtzLCBkYXlzLCBob3VycywgbWludXRlcywgc2Vjb25kcywgbXNlY3MpIHsKICAgIHJldHVybiB3ZWVrcyptc2VjUGVyV2srZGF5cyptc2VjUGVyRGF5K2hvdXJzKm1zZWNQZXJIcittaW51dGVzKm1zZWNQZXJNaW4rbXNlY3MKfQoKZnVuY3Rpb24gJFRpbWVEZWx0YUNsYXNzKCl7cmV0dXJuIG5ldyAkVGltZURlbHRhKGFyZ3VtZW50cyl9CiRUaW1lRGVsdGFDbGFzcy5fX2NsYXNzX18gPSAkdHlwZQokVGltZURlbHRhQ2xhc3MuX19zdHJfXyA9IGZ1bmN0aW9uKCl7cmV0dXJuICI8Y2xhc3MgJ2RhdGV0aW1lLnRpbWVkZWx0YSc+In0KCiRUaW1lRGVsdGFDbGFzcy5fX2dldGF0dHJfXz1mdW5jdGlvbihhdHRyKSB7CiAgICAgIGlmIChhdHRyID09ICdtaW4nKSByZXR1cm4gbmV3IHRpbWVkZWx0YSgtOTk5OTk5OTk5KQogICAgICBpZiAoYXR0ciA9PSAnbWF4JykgcmV0dXJuIG5ldyB0aW1lZGVsdGEoOTk5OTk5OTk5LCAyNCozNjAwLTEsIDFlNi0xKQogICAgICBpZiAoYXR0ciA9PSAncmVzb2x1dGlvbicpIHJldHVybiBuZXcgdGltZWRlbHRhKDAsMCwxKQp9CgpmdW5jdGlvbiAkVGltZURlbHRhKGFyZ3MpIHsKICAgdmFyICRucz0kTWFrZUFyZ3MoInRpbWVkZWx0YSIsYXJncyxbXSwKICAgICAgICB7J2RheXMnOjAsICdzZWNvbmRzJzowLCAnbWljcm9zZWNvbmRzJzowLCAnbWlsbGlzZWNvbmRzJzowLAogICAgICAgICAnbWludXRlcyc6MCwgJ2hvdXJzJzowLCAnd2Vla3MnOiAwfSwgbnVsbCwgbnVsbCkKCiAgIHRoaXMuZGF5cz0kbnNbJ2RheXMnXQogICB0aGlzLnNlY3M9JG5zWydzZWNvbmRzJ10KICAgdGhpcy51cz0kbnNbJ21pY3Jvc2Vjb25kcyddCgogICB2YXIgbXNlY3M9JG5zWydtaWxsaXNlY29uZHMnXQogICB0aGlzLnVzKz1tc2VjcyoxMDAwCgogICB2YXIgbWludXRlcz0kbnNbJ21pbnV0ZXMnXQogICB0aGlzLnNlY3MrPW1pbnV0ZXMqNjAKCiAgIHZhciBob3Vycz0kbnNbJ2hvdXJzJ10KICAgdGhpcy5zZWNzKz1ob3VycyozNjAwCgogICB2YXIgd2Vla3M9JG5zWyd3ZWVrcyddCiAgIHRoaXMuZGF5cys9d2Vla3MqNwoKICAgdGhpcy5zZWNzKz0gfn4odGhpcy51cy8xMDAwMDAwKQogICB0aGlzLnVzJT0xMDAwMDAwCgogICB0aGlzLmRheXMrPSB+fih0aGlzLnNlY3MvODY0MDApCiAgIHRoaXMuc2VjcyU9ODY0MDAKCiAgIGlmICh0aGlzLmRheXMgPCAtOTk5OTk5OTk5IHx8IHRoaXMuZGF5cyA+IDk5OTk5OTk5OSkgewogICAgICAkcmFpc2UoJ092ZXJmbG93RXJyb3InLCAnZGF5cyBpcyBhbiBpbnZhbGlkIHZhbHVlOiBkYXlzPScgKyB0aGlzLmRheXMpOwogICB9CgogICB0aGlzLl9fYWJzX18gPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIG5ldyB0aW1lZGVsdGEoYWJzKHRoaXMuZGF5cyksIGFicyh0aGlzLnNlY3MpLCBhYnModGhpcy51cykpCiAgIH0KCiAgIHRoaXMuX19jbGFzc19fID0gJFRpbWVEZWx0YUNsYXNzCgogICB0aGlzLl9fbXNlY3NfXyA9IGZ1bmN0aW9uKCkgewogICAgICAgcmV0dXJuIHRoaXMudXMvMTAwMCArIHRoaXMuc2VjcyoxMDAwICsgdGhpcy5kYXlzKm1zZWNQZXJEYXkKICAgfQoKICAgdGhpcy5fX2FkZF9fID0gZnVuY3Rpb24ob3RoZXIpIHsKICAgICAgaWYgKGlzaW5zdGFuY2Uob3RoZXIsICREYXRlKSB8fCBpc2luc3RhbmNlKG90aGVyLCAkRGF0ZVRpbWUpKSB7CiAgICAgICAgIHZhciBkPW5ldyBEYXRlKCk7CiAgICAgICAgIAogICAgICAgICBkLnNldHRpbWUodGhpcy5fX21zZWNzX18oKSArIG90aGVyLiRqc19kYXRlLmdldFRpbWUoKSkKICAgICAgICAgCiAgICAgICAgIHJldHVybiBuZXcgJERhdGVUaW1lKGQueWVhciwgZC5tb250aCwgZC5kYXksIGQuaG91ciwgZC5taW51dGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuc2Vjb25kLCBkLm1pbGxpc2Vjb25kcyoxMDAwKTsKICAgICAgfSBlbHNlIGlmIChpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpKSB7CiAgICAgICAgIHJldHVybiBuZXcgdGltZWRlbHRhKDAsMCwwLHRoaXMuX19tc2Vjc19fKCkgKyBvdGhlci5fX21zZWNzX18oKSkKICAgICAgfQogICAgICAkcmFpc2UoJ1R5cGVFcnJvcicsICJ1bnN1cHBvcnRlZCBvcGVyYW5kIHR5cGUocykgZm9yICs6ICdkYXRldGltZS50aW1lZGVsdGEnIGFuZCAnIiArIG90aGVyLl9fY2xhc3NfXyArICInIik7CiAgIH0KCiAgIHRoaXMuX19kaXZfXyA9IGZ1bmN0aW9uIChvdGhlcikgewogICAgICBpZiAoaXNpbnN0YW5jZShvdGhlciwgaW50KSB8fCBpc2luc3RhbmNlKG90aGVyLCBmbG9hdCkpIHsKICAgICAgICAgcmV0dXJuIG5ldyB0aW1lZGVsdGEoMCwwLDAsdGhpcy5fX21zZWNzX18oKSAvIG90aGVyLnZhbHVlT2YoKSkKICAgICAgfSBlbHNlIGlmIChpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpKSB7CiAgICAgICAgIHJldHVybiBuZXcgdGltZWRlbHRhKDAsMCwwLHRoaXMuX19tc2Vjc19fKCkgLyBvdGhlci5fX21zZWNzX18oKSkKICAgICAgfQogICAgICAkcmFpc2UoJ1R5cGVFcnJvcicsICJ1bnN1cHBvcnRlZCBvcGVyYW5kIHR5cGUocykgZm9yIC86ICdkYXRldGltZS50aW1lZGVsdGEnIGFuZCAnIiArIG90aGVyLl9fY2xhc3NfXyArICInIik7CiAgIH0KCiAgIHRoaXMuX19lcV9fID0gZnVuY3Rpb24ob3RoZXIpIHsKICAgICAgcmV0dXJuIHRoaXMuX19tc2Vjc19fKCkgPT0gb3RoZXIuX19tc2Vjc19fKCk7CiAgIH0KCiAgIHRoaXMuX19nZXRhdHRyX18gPSBmdW5jdGlvbihhdHRyKXsKICAgICAgaWYgKGF0dHIgPT0gJ21pY3Jvc2Vjb25kcycpIHJldHVybiAkZ2V0YXR0cih0aGlzLCAndXMnKQogICAgICBpZiAoYXR0ciA9PSAnc2Vjb25kcycpIHJldHVybiAkZ2V0YXR0cih0aGlzLCAnc2VjcycpCgogICAgICByZXR1cm4gJGdldGF0dHIodGhpcyxhdHRyKQogICB9CgogICB0aGlzLl9fZ3RfXyA9IGZ1bmN0aW9uKG90aGVyKSB7CiAgICAgIHJldHVybiB0aGlzLl9fbXNlY3NfXygpID4gb3RoZXIuX19tc2Vjc19fKCkKICAgfQoKICAgdGhpcy5fX2x0X18gPSBmdW5jdGlvbihvdGhlcikgewogICAgICByZXR1cm4gdGhpcy5fX21zZWNzX18oKSA8IG90aGVyLl9fbXNlY3NfXygpCiAgIH0KCiAgIHRoaXMuX19tdWxfXyA9IGZ1bmN0aW9uIChvdGhlcikgewogICAgICBpZiAoaXNpbnN0YW5jZShvdGhlciwgaW50KSB8fCBpc2luc3RhbmNlKG90aGVyLCBmbG9hdCkpIHsKICAgICAgICAgcmV0dXJuIG5ldyB0aW1lZGVsdGEoMCwwLDAsdGhpcy5fX21zZWNzX18oKSAqIG90aGVyLnZhbHVlT2YoKSkKICAgICAgfSBlbHNlIGlmIChpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpKSB7CiAgICAgICAgIHJldHVybiBuZXcgdGltZWRlbHRhKDAsMCwwLHRoaXMuX19tc2Vjc19fKCkgKiBvdGhlci5fX21zZWNzX18oKSkKICAgICAgfQogICAgICAkcmFpc2UoJ1R5cGVFcnJvcicsICJ1bnN1cHBvcnRlZCBvcGVyYW5kIHR5cGUocykgZm9yICo6ICdkYXRldGltZS50aW1lZGVsdGEnIGFuZCAnIiArIG90aGVyLl9fY2xhc3NfXyArICInIik7CiAgIH0KCiAgIHRoaXMuX19uZWdfXyA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gbmV3IHRpbWVkZWx0YSgtdGhpcy5kYXlzLCAtdGhpcy5zZWNzLCAtdGhpcy51cykKICAgfQoKICAgdGhpcy50b3RhbF9zZWNvbmRzPWZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9fbXNlY3NfXygpLzEwMDB9CgogICB0aGlzLl9fc3ViX18gPSBmdW5jdGlvbihvdGhlcikgewogICAgICBpZiAoaXNpbnN0YW5jZShvdGhlciwgdGltZWRlbHRhKSkgewogICAgICAgICByZXR1cm4gbmV3IHRpbWVkZWx0YSgwLDAsMCwgdGhpcy5fX21zZWNzX18oKSAtIG90aGVyLl9fbXNlY3NfXygpKQogICAgICB9CgogICAgICAkcmFpc2UoJ1R5cGVFcnJvcicsICJ1bnN1cHBvcnRlZCBvcGVyYW5kIHR5cGUocykgZm9yIC06ICdkYXRldGltZS50aW1lZGVsdGEnIGFuZCAnIiArIG90aGVyLl9fY2xhc3NfXyArICInIik7CiAgIH0KCiAgIHRoaXMuX19zdHJfXz0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciB3ZWVrcyxkYXlzLGhvdXJzLG1pbnV0ZXMsc2Vjb25kcyxtc2VjcwogICAgICAvL1t3ZWVrcyxkYXlzLGhvdXJzLG1pbnV0ZXMsc2Vjb25kcyxtc2Vjc109ZnJvbV9tc2Vjcyh0aGlzLl9fbXNlY3NfXygpKQogICAgICB2YXIgYT1mcm9tX21zZWNzKHRoaXMuX19tc2Vjc19fKCkpCiAgICAgIGNvbnNvbGUubG9nKGEpOwogICAgICB2YXIgYT1uZXcgQXJyYXkoZGF5cyxzZWNvbmRzLDAsbXNlY3MsbWludXRlcyxob3Vycyx3ZWVrcykKICAgICAgdmFyIHBvcz0wOwogICAgICBpZiAod2Vla3MgPiAwKSB7cG9zPTd9CiAgICAgIGVsc2UgaWYgKGhvdXJzID4gMCkge3Bvcz02fQogICAgICBlbHNlIGlmIChtaW51dGVzID4gMCkge3Bvcz01fQogICAgICBlbHNlIGlmIChtc2VjcyA+IDApIHtwb3M9NH0KICAgICAgZWxzZSBpZiAoc2Vjb25kcyA+IDApIHtwb3M9M30KICAgICAgZWxzZSBpZiAoZGF5cyA+IDApIHtwb3M9MX0KICAgICAgdmFyIG15YXJncz1hLnNwbGljZSgwLHBvcykKICAgICAgY29uc29sZS5sb2cobXlhcmdzKTsKICAgICAgcmV0dXJuICdkYXRldGltZS50aW1lZGVsdGEoJyArIG15YXJncy5qb2luKCcsJykgKyAnKSc7CiAgIH0KfQoKZnVuY3Rpb24gJERhdGVDbGFzcygpe3JldHVybiBuZXcgJERhdGUoYXJndW1lbnRzKX0KJERhdGVDbGFzcy5fX2NsYXNzX18gPSAkdHlwZQokRGF0ZUNsYXNzLl9fc3RyX18gPSBmdW5jdGlvbigpe3JldHVybiAiPGNsYXNzICdkYXRldGltZS5kYXRlJz4ifQoKZnVuY3Rpb24gJERhdGUoYXJncyl7CgogICAgaWYoYXJncy5sZW5ndGg+Myl7JHJhaXNlKCdUeXBlRXJyb3InLCJUb28gbWFueSBhcmd1bWVudHMgLSByZXF1aXJlZCAzLCBnb3QgIithcmdzLmxlbmd0aCl9CgogICAgdmFyIG9iaiA9IG5ldyAkRGF0ZVRpbWUoYXJncykKICAgIHRoaXMueWVhciA9IG9iai55ZWFyCiAgICB0aGlzLm1vbnRoID0gb2JqLm1vbnRoCiAgICB0aGlzLmRheSA9IG9iai5kYXkKICAgIHRoaXMuJGR0ID0gb2JqCgogICAgdGhpcy5fX2FkZF9fID0gZnVuY3Rpb24ob3RoZXIpIHsKICAgICAgICAgaWYgKGlzaW5zdGFuY2Uob3RoZXIsIHRpbWVkZWx0YSkpIHsKICAgICAgICAgICAgdmFyIGQ9bmV3IERhdGUoKTsKICAgICAgICAgICAgZC5zZXRUaW1lKG9iai4kanNfZGF0ZS5nZXRUaW1lKCkgKyBvdGhlci5fX21zZWNzX18oKSk7CiAgICAgICAgICAgIHJldHVybiBuZXcgZGF0ZXRpbWUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCkrMSwgZC5nZXREYXRlKCksIGQuZ2V0SG91cnMoKSwgZC5nZXRNaW51dGVzKCksIGQuZ2V0U2Vjb25kcygpLCBkLmdldE1pbGxpc2Vjb25kcygpKTsKICAgICAgICAgfQoKICAgICAgICAgJHJhaXNlKCdUeXBlRXJyb3InLCAidW5vcmRlcmFibGUgdHlwZXM6IGRhdGV0aW1lLmRhdGUoKSA8ICIgKyBvdGhlci5fX2NsYXNzX18gKyAiKCkiKTsKICAgIH0KICAgIAogICAgdGhpcy5fX2NsYXNzX18gPSAkRGF0ZUNsYXNzCgogICAgdGhpcy5fX2Rpdl9fID0gZnVuY3Rpb24ob3RoZXIpIHsKICAgICAgICAkcmFpc2UoJ1R5cGVFcnJvcicsICJ1bnN1cHBvcnRlZCBvcGVyYW5kIHR5cGUocykgZm9yIC86ICdkYXRldGltZS5kYXRlJyBhbmQgJyIgKyBvdGhlci5fX2NsYXNzX18gKyAiJyIpOwogICAgfQoKICAgIHRoaXMuX19nZXRhdHRyX18gPSBmdW5jdGlvbihhdHRyKXtyZXR1cm4gJGdldGF0dHIodGhpcyxhdHRyKX0KCiAgICB0aGlzLl9fZ3RfXyA9IGZ1bmN0aW9uKG90aGVyKSB7CiAgICAgICAgIGlmICghaXNpbnN0YW5jZShvdGhlciwgZGF0ZSkpIHsKICAgICAgICAgICAgJHJhaXNlKCdUeXBlRXJyb3InLCAidW5vcmRlcmFibGUgdHlwZXM6IGRhdGV0aW1lLmRhdGUoKSA8ICIgKyBvdGhlci5fX2NsYXNzX18gKyAiKCkiKTsKICAgICAgICAgfQogICAgICAgICByZXR1cm4gb2JqLiRqc19kYXRlLmdldFRpbWUoKSA+IG90aGVyLiRqc19kYXRlLmdldFRpbWUoKTsKICAgIH0KCiAgICB0aGlzLl9faGFzaF9fID0gZnVuY3Rpb24oKSB7cmV0dXJuIGhhc2godHVwbGUodGhpcy55ZWFyLHRoaXMubW9udGgsdGhpcy5kYXkpKX0KCiAgICB0aGlzLl9fbHRfXyA9IGZ1bmN0aW9uKG90aGVyKSB7CiAgICAgICAgIGlmICghaXNpbnN0YW5jZShvdGhlciwgJERhdGUpKSB7CiAgICAgICAgICAgICRyYWlzZSgnVHlwZUVycm9yJywgInVub3JkZXJhYmxlIHR5cGVzOiBkYXRldGltZS5kYXRlKCkgPCAiICsgb3RoZXIuX19jbGFzc19fICsgIigpIik7CiAgICAgICAgIH0KICAgICAgICAgcmV0dXJuIG9iai4kanNfZGF0ZS5nZXRUaW1lKCkgPCBvdGhlci4kanNfZGF0ZS5nZXRUaW1lKCk7CiAgICB9CgogICAgdGhpcy5fX211bF9fID0gZnVuY3Rpb24ob3RoZXIpIHsKICAgICAgICAkcmFpc2UoJ1R5cGVFcnJvcicsICJ1bnN1cHBvcnRlZCBvcGVyYW5kIHR5cGUocykgZm9yICo6ICdkYXRldGltZS5kYXRlJyBhbmQgJyIgKyBvdGhlci5fX2NsYXNzX18gKyAiJyIpOwogICAgfQoKICAgIHRoaXMuX19zdHJfXyA9IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyZnRpbWUoJyVZLSVtLSVkJyl9CgogICAgdGhpcy5fX3N1Yl9fID0gZnVuY3Rpb24ob3RoZXIpIHsKICAgICAgICAgaWYgKGlzaW5zdGFuY2Uob3RoZXIsIGRhdGUpKSB7CiAgICAgICAgICAgIHZhciBtc2Vjcz1vYmouJGpzX2RhdGUuZ2V0VGltZSgpIC0gb3RoZXIuJGpzX2RhdGUuZ2V0VGltZSgpOwoKICAgICAgICAgICAgdmFyIHdlZWtzLGRheXMsaG91cnMsbWludXRlcyxzZWNvbmRzLG1zZWNzPWZyb21fbXNlY3MobXNlY3MpCiAgICAgICAgICAgIHJldHVybiBuZXcgdGltZWRlbHRhKGRheXMsc2Vjb25kcywwLG1zZWNzLG1pbnV0ZXMsaG91cnMsd2Vla3MpOwogICAgICAgICB9CiAgICAgICAgIGlmIChpc2luc3RhbmNlKG90aGVyLCB0aW1lZGVsdGEpKSB7CiAgICAgICAgICAgIHZhciBkPW5ldyBEYXRlKCk7CiAgICAgICAgICAgIGQuc2V0VGltZShvYmouJGpzX2RhdGUuZ2V0VGltZSgpIC0gb3RoZXIuX19tc2Vjc19fKCkpOwogICAgICAgICAgICByZXR1cm4gbmV3IGRhdGV0aW1lKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKzEsIGQuZ2V0RGF0ZSgpLCBkLmdldEhvdXJzKCksIGQuZ2V0TWludXRlcygpLCBkLmdldFNlY29uZHMoKSwgZC5nZXRNaWxsaXNlY29uZHMoKSk7CiAgICAgICAgIH0KCiAgICAgICAgICRyYWlzZSgnVHlwZUVycm9yJywgInVub3JkZXJhYmxlIHR5cGVzOiBkYXRldGltZS5kYXRlKCkgPCAiICsgb3RoZXIuX19jbGFzc19fICsgIigpIik7CiAgICB9CgogICAgdGhpcy5zdHJmdGltZSA9IGZ1bmN0aW9uKGZtdCl7cmV0dXJuIHRoaXMuJGR0LnN0cmZ0aW1lKGZtdCl9CgogICAgdGhpcy53ZWVrZGF5ID0gZnVuY3Rpb24oZm10KXtyZXR1cm4gdGhpcy4kZHQud2Vla2RheShmbXQpfQp9CgpmdW5jdGlvbiAkRGF0ZVRpbWVDbGFzcygpe3JldHVybiBuZXcgJERhdGVUaW1lKGFyZ3VtZW50cyl9CiREYXRlVGltZUNsYXNzLl9fY2xhc3NfXyA9ICR0eXBlCiREYXRlVGltZUNsYXNzLl9fc3RyX18gPSBmdW5jdGlvbigpe3JldHVybiAiPGNsYXNzICdkYXRldGltZS5kYXRldGltZSc+In0KCmZ1bmN0aW9uICREYXRlVGltZShhcmdzKXsKCiAgICB0aGlzLl9fY2xhc3NfXyA9ICREYXRlVGltZUNsYXNzCgogICAgdmFyIGRheXNQZXJNb250aCA9IFszMSwyOCwzMSwzMCwzMSwzMCwzMSwzMSwzMCwzMSwzMCwzMV0KIAogICAgaWYoYXJncy5sZW5ndGg9PTApeyRyYWlzZSgnVHlwZUVycm9yJywiUmVxdWlyZWQgYXJndW1lbnQgJ3llYXInIChwb3MgMSkgbm90IGZvdW5kIil9CiAgICB5ZWFyID0gYXJnc1swXQogICAgaWYoYXJncy5sZW5ndGg9PTEpeyRyYWlzZSgnVHlwZUVycm9yJywiUmVxdWlyZWQgYXJndW1lbnQgJ21vbnRoJyAocG9zIDIpIG5vdCBmb3VuZCIpfQogICAgbW9udGggPSBhcmdzWzFdCiAgICBpZihhcmdzLmxlbmd0aD09Mil7JHJhaXNlKCdUeXBlRXJyb3InLCJSZXF1aXJlZCBhcmd1bWVudCAnZGF5JyAocG9zIDMpIG5vdCBmb3VuZCIpfQogICAgZGF5ID0gYXJnc1syXQogICAgaWYoYXJncy5sZW5ndGg+Nyl7JHJhaXNlKCdUeXBlRXJyb3InLCJUb28gbWFueSBhcmd1bWVudHMgLSByZXF1aXJlZCA2LCBnb3QgIithcmdzLmxlbmd0aCl9CiAgICBpZihhcmdzLmxlbmd0aD4zKXtob3VyPWFyZ3NbM119ZWxzZXtob3VyPTB9CiAgICBpZihhcmdzLmxlbmd0aD40KXttaW51dGU9YXJnc1s0XX1lbHNle21pbnV0ZT0wfQogICAgaWYoYXJncy5sZW5ndGg+NSl7c2Vjb25kPWFyZ3NbNV19ZWxzZXtzZWNvbmQ9MH0KICAgIGlmKGFyZ3MubGVuZ3RoPjYpe21pY3Jvc2Vjb25kPWFyZ3NbNl19ZWxzZXttaWNyb3NlY29uZD0wfQoKICAgIGlmKCFpc2luc3RhbmNlKHllYXIsaW50KSB8fCAhaXNpbnN0YW5jZShtb250aCxpbnQpCiAgICAgICAgfHwgIWlzaW5zdGFuY2UoZGF5LGludCkgfHwgIWlzaW5zdGFuY2UoaG91cixpbnQpCiAgICAgICAgfHwgIWlzaW5zdGFuY2UobWludXRlLGludCkgfHwgIWlzaW5zdGFuY2Uoc2Vjb25kLGludCkKICAgICAgICB8fCAhaXNpbnN0YW5jZShtaWNyb3NlY29uZCxpbnQpKXskcmFpc2UoJ1R5cGVFcnJvcicsImFuIGludGVnZXIgaXMgcmVxdWlyZWQiKX0KICAgIGlmKG1vbnRoPDEgfHwgbW9udGg+MTIpeyRyYWlzZSgnVmFsdWVFcnJvcicsIm1vbnRoIG11c3QgYmUgaW4gMS4uMTIiKX0KICAgIHZhciBuYl9kYXlzID0gZGF5c1Blck1vbnRoW21vbnRoLTFdCiAgICBpZihtb250aD09MiAmJiAoeWVhciU0PT0wICYmICh5ZWFyJTEwMD4wIHx8IHllYXIlNDAwPT0wKSkpe25iX2RheXM9Mjl9CiAgICBpZihkYXk8MSB8fCBkYXk+bmJfZGF5cyl7JHJhaXNlKCdWYWx1ZUVycm9yJywiZGF5IGlzIG91dCBvZiByYW5nZSBmb3IgbW9udGgiKX0KICAgIGlmKGhvdXI8MCB8fCBob3VyPjIzKXskcmFpc2UoJ1ZhbHVlRXJyb3InLCJob3VyIG11c3QgYmUgaW4gMC4uMjMiKX0KICAgIGlmKG1pbnV0ZTwwIHx8IG1pbnV0ZT41OSl7JHJhaXNlKCdWYWx1ZUVycm9yJywibWludXRlIG11c3QgYmUgaW4gMC4uNTkiKX0KICAgIGlmKHNlY29uZDwwIHx8IHNlY29uZD41OSl7JHJhaXNlKCdWYWx1ZUVycm9yJywic2Vjb25kIG11c3QgYmUgaW4gMC4uNTkiKX0KICAgIGlmKG1pY3Jvc2Vjb25kPDAgfHwgbWljcm9zZWNvbmQ+OTk5OTk5KXsKICAgICAgICAkcmFpc2UoJ1ZhbHVlRXJyb3InLCJtaWNyb3NlY29uZCBtdXN0IGJlIGluIDAuLjk5OTk5OSIpfQogICAgdGhpcy55ZWFyID0geWVhcgogICAgdGhpcy5tb250aCA9IG1vbnRoCiAgICB0aGlzLmRheSA9IGRheQogICAgdGhpcy5ob3VyID0gaG91cgogICAgdGhpcy5taW51dGUgPSBtaW51dGUKICAgIHRoaXMuc2Vjb25kID0gc2Vjb25kCiAgICB0aGlzLm1pY3Jvc2Vjb25kID0gbWljcm9zZWNvbmQKICAgIHRoaXMuJGpzX2RhdGUgPSBuZXcgRGF0ZSh5ZWFyLG1vbnRoLTEsZGF5LGhvdXIsbWludXRlLAogICAgICAgIHNlY29uZCxtaWNyb3NlY29uZC8xMDAwKQogICAgICAgIAogICAgdGhpcy5fX2dldGF0dHJfXyA9IGZ1bmN0aW9uKGF0dHIpe3JldHVybiAkZ2V0YXR0cih0aGlzLGF0dHIpfQogICAgCiAgICB0aGlzLl9faGFzaF9fID0gZnVuY3Rpb24oKSB7CiAgICAgICByZXR1cm4gaGFzaCh0dXBsZSh0aGlzLnllYXIsdGhpcy5tb250aCx0aGlzLmRheSx0aGlzLmhvdXIsdGhpcy5taW51dGUsdGhpcy5zZWNvbmQsdGhpcy5taWNyb3NlY29uZCkpOwogICAgfQoKICAgIHRoaXMuX19lcV9fPWZ1bmN0aW9uKG90aGVyKSB7CiAgICAgICByZXR1cm4gdGhpcy4kanNfZGF0ZS5nZXRUaW1lKCkgPT0gb3RoZXIuJGpzX2RhdGUuZ2V0VGltZSgpCiAgICB9CgogICAgdGhpcy5fX3N0cl9fID0gZnVuY3Rpb24oKXtyZXR1cm4gIXRoaXMubWljcm9zZWNvbmQ/CiAgICAgICAgdGhpcy5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKTp0aGlzLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUy4lZicpfQogICAgCiAgICB0aGlzLm5vcm1fc3RyID0gZnVuY3Rpb24oYXJnLG5iKXsKICAgICAgICAvLyBsZWZ0IHBhZGRpbmcgd2l0aCAwCiAgICAgICAgdmFyIHJlcyA9IHN0cihhcmcpCiAgICAgICAgd2hpbGUocmVzLmxlbmd0aDxuYil7cmVzID0gJzAnK3Jlc30KICAgICAgICByZXR1cm4gcmVzCiAgICB9CiAgICB0aGlzLnN0cmZ0aW1lID0gZnVuY3Rpb24oZm10KXsKICAgICAgICBpZighaXNpbnN0YW5jZShmbXQsc3RyKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigic3RyZnRpbWUoKSBhcmd1bWVudCBzaG91bGQgYmUgc3RyLCBub3QgIiskc3RyKGZtdC5fX2NsYXNzX18pKX0KICAgICAgICB2YXIgcmVzID0gZm10CiAgICAgICAgcmVzID0gcmVzLnJlcGxhY2UoJyVkJyx0aGlzLm5vcm1fc3RyKHRoaXMuZGF5LDIpKQogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKCclZicsdGhpcy5ub3JtX3N0cih0aGlzLm1pY3Jvc2Vjb25kLDYpKQogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKCclSCcsdGhpcy5ub3JtX3N0cih0aGlzLmhvdXIsMikpCiAgICAgICAgcmVzID0gcmVzLnJlcGxhY2UoJyVJJyx0aGlzLm5vcm1fc3RyKGludCh0aGlzLmhvdXIudmFsdWUlMTIpLDIpKQogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKCclbScsdGhpcy5ub3JtX3N0cih0aGlzLm1vbnRoLDIpKQogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKCclTScsdGhpcy5ub3JtX3N0cih0aGlzLm1pbnV0ZSwyKSkKICAgICAgICByZXMgPSByZXMucmVwbGFjZSgnJVMnLHRoaXMubm9ybV9zdHIodGhpcy5zZWNvbmQsMikpCiAgICAgICAgcmVzID0gcmVzLnJlcGxhY2UoJyV5Jyx0aGlzLm5vcm1fc3RyKHRoaXMueWVhciw0KS5zdWJzdHIoMikpCiAgICAgICAgcmVzID0gcmVzLnJlcGxhY2UoJyVZJyx0aGlzLm5vcm1fc3RyKHRoaXMueWVhciw0KSkKICAgICAgICByZXMgPSByZXMucmVwbGFjZSgnJXcnLHRoaXMuJGpzX2RhdGUuZ2V0RGF5KCkpCiAgICAgICAgcmV0dXJuIHN0cihyZXMpCiAgICB9CgogICAgdGhpcy53ZWVrZGF5ID0gZnVuY3Rpb24oKXsKICAgICAgICB2YXIgd2QgPSB0aGlzLiRqc19kYXRlLmdldERheSgpCiAgICAgICAgcmV0dXJuIHdkID09IDAgPyA2IDogd2QtMQogICAgfQp9CgpmdW5jdGlvbiAkVGltZUNsYXNzKCl7cmV0dXJuIG5ldyAkVGltZShhcmd1bWVudHMpfQokVGltZUNsYXNzLl9fY2xhc3NfXyA9ICR0eXBlCiRUaW1lQ2xhc3MuX19zdHJfXyA9IGZ1bmN0aW9uKCl7cmV0dXJuICI8Y2xhc3MgJ2RhdGV0aW1lLnRpbWUnPiJ9CgpmdW5jdGlvbiAkVGltZShhcmdzKXsKCiAgICB0aGlzLl9fY2xhc3NfXyA9ICRUaW1lQ2xhc3MKCiAgICBpZihhcmdzLmxlbmd0aD40KXskcmFpc2UoJ1R5cGVFcnJvcicsIlRvbyBtYW55IGFyZ3VtZW50cyAtIHJlcXVpcmVkIDQsIGdvdCAiK2FyZ3MubGVuZ3RoKX0KICAgIGlmKGFyZ3MubGVuZ3RoPjApe2hvdXI9YXJnc1swXX1lbHNle2hvdXI9MH0KICAgIGlmKGFyZ3MubGVuZ3RoPjEpe21pbnV0ZT1hcmdzWzFdfWVsc2V7bWludXRlPTB9CiAgICBpZihhcmdzLmxlbmd0aD4yKXtzZWNvbmQ9YXJnc1syXX1lbHNle3NlY29uZD0wfQogICAgaWYoYXJncy5sZW5ndGg+Myl7bWljcm9zZWNvbmQ9YXJnc1szXX1lbHNle21pY3Jvc2Vjb25kPTB9CgogICAgaWYoIWlzaW5zdGFuY2UoaG91cixpbnQpCiAgICAgICAgfHwgIWlzaW5zdGFuY2UobWludXRlLGludCkgfHwgIWlzaW5zdGFuY2Uoc2Vjb25kLGludCkKICAgICAgICB8fCAhaXNpbnN0YW5jZShtaWNyb3NlY29uZCxpbnQpKXskcmFpc2UoJ1R5cGVFcnJvcicsImFuIGludGVnZXIgaXMgcmVxdWlyZWQiKX0KICAgIGlmKGhvdXI8MCB8fCBob3VyPjIzKXskcmFpc2UoJ1ZhbHVlRXJyb3InLCJob3VyIG11c3QgYmUgaW4gMC4uMjMiKX0KICAgIGlmKG1pbnV0ZTwwIHx8IG1pbnV0ZT41OSl7JHJhaXNlKCdWYWx1ZUVycm9yJywibWludXRlIG11c3QgYmUgaW4gMC4uNTkiKX0KICAgIGlmKHNlY29uZDwwIHx8IHNlY29uZD41OSl7JHJhaXNlKCdWYWx1ZUVycm9yJywic2Vjb25kIG11c3QgYmUgaW4gMC4uNTkiKX0KICAgIGlmKG1pY3Jvc2Vjb25kPDAgfHwgbWljcm9zZWNvbmQ+OTk5OTk5KXsKICAgICAgICAkcmFpc2UoJ1ZhbHVlRXJyb3InLCJtaWNyb3NlY29uZCBtdXN0IGJlIGluIDAuLjk5OTk5OSIpfQogICAgdGhpcy5ob3VyID0gaG91cgogICAgdGhpcy5taW51dGUgPSBtaW51dGUKICAgIHRoaXMuc2Vjb25kID0gc2Vjb25kCiAgICB0aGlzLm1pY3Jvc2Vjb25kID0gbWljcm9zZWNvbmQKICAgIHRoaXMuJGpzX2RhdGUgPSBuZXcgRGF0ZShob3VyLG1pbnV0ZSxzZWNvbmQsbWljcm9zZWNvbmQvMTAwMCkKCiAgICB0aGlzLl9fZ2V0YXR0cl9fID0gZnVuY3Rpb24oYXR0cil7cmV0dXJuICRnZXRhdHRyKHRoaXMsYXR0cil9CgogICAgdGhpcy5fX2hhc2hfXyA9IGZ1bmN0aW9uKCkgewogICAgICAgcmV0dXJuIGhhc2godHVwbGUodGhpcy5ob3VyLHRoaXMubWludXRlLHRoaXMuc2Vjb25kLHRoaXMubWljcm9zZWNvbmQpKQogICAgfQoKICAgIHRoaXMuX19zdHJfXyA9IGZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5taWNyb3NlY29uZD90aGlzLnN0cmZ0aW1lKCclSDolTTolUy4lZicpOnRoaXMuc3RyZnRpbWUoJyVIOiVNOiVTJyl9CgogICAgdGhpcy5ub3JtX3N0ciA9IGZ1bmN0aW9uKGFyZyxuYil7CiAgICAgICAgLy8gbGVmdCBwYWRkaW5nIHdpdGggMAogICAgICAgIHZhciByZXMgPSBzdHIoYXJnKQogICAgICAgIHdoaWxlKHJlcy5sZW5ndGg8bmIpe3JlcyA9ICcwJytyZXN9CiAgICAgICAgcmV0dXJuIHJlcwogICAgfQogICAgdGhpcy5zdHJmdGltZSA9IGZ1bmN0aW9uKGZtdCl7CiAgICAgICAgaWYoIWlzaW5zdGFuY2UoZm10LHN0cikpe3Rocm93IG5ldyBUeXBlRXJyb3IoInN0cmZ0aW1lKCkgYXJndW1lbnQgc2hvdWxkIGJlIHN0ciwgbm90ICIrJHN0cihmbXQuX19jbGFzc19fKSl9CiAgICAgICAgdmFyIHJlcyA9IGZtdAogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKCclZicsdGhpcy5ub3JtX3N0cih0aGlzLm1pY3Jvc2Vjb25kLDYpKQogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKCclSCcsdGhpcy5ub3JtX3N0cih0aGlzLmhvdXIsMikpCiAgICAgICAgcmVzID0gcmVzLnJlcGxhY2UoJyVJJyx0aGlzLm5vcm1fc3RyKGludCh0aGlzLmhvdXIudmFsdWUlMTIpLDIpKQogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKCclTScsdGhpcy5ub3JtX3N0cih0aGlzLm1pbnV0ZSwyKSkKICAgICAgICByZXMgPSByZXMucmVwbGFjZSgnJVMnLHRoaXMubm9ybV9zdHIodGhpcy5zZWNvbmQsMikpCiAgICAgICAgcmV0dXJuIHN0cihyZXMpCiAgICB9Cn0KCmZ1bmN0aW9uICR0aW1lKGhvdXIsbWludXRlLHNlY29uZCxtaWNyb3NlY29uZCl7CiAgICByZXR1cm4gbmV3ICRUaW1lKGhvdXIsbWludXRlLHNlY29uZCxtaWNyb3NlY29uZCkKfQoKZnVuY3Rpb24gJGRhdGUoeWVhcixtb250aCxkYXkpewogICAgaWYoeWVhcj09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiUmVxdWlyZWQgYXJndW1lbnQgJ3llYXInIChwb3MgMSkgbm90IGZvdW5kIil9CiAgICBpZihtb250aD09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiUmVxdWlyZWQgYXJndW1lbnQgJ21vbnRoJyAocG9zIDIpIG5vdCBmb3VuZCIpfQogICAgaWYoZGF5PT09dW5kZWZpbmVkKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJSZXF1aXJlZCBhcmd1bWVudCAnZGF5JyAocG9zIDMpIG5vdCBmb3VuZCIpfQogICAgcmV0dXJuIG5ldyAkRGF0ZSh5ZWFyLG1vbnRoLGRheSkKfQpmdW5jdGlvbiAkZGF0ZXRpbWUoeWVhcixtb250aCxkYXksaG91cixtaW51dGUsc2Vjb25kLG1pY3Jvc2Vjb25kKXsKICAgIGlmKHllYXI9PT11bmRlZmluZWQpeyRyYWlzZSgnVHlwZUVycm9yJywiUmVxdWlyZWQgYXJndW1lbnQgJ3llYXInIChwb3MgMSkgbm90IGZvdW5kIil9CiAgICBpZihtb250aD09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiUmVxdWlyZWQgYXJndW1lbnQgJ21vbnRoJyAocG9zIDIpIG5vdCBmb3VuZCIpfQogICAgaWYoZGF5PT09dW5kZWZpbmVkKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJSZXF1aXJlZCBhcmd1bWVudCAnZGF5JyAocG9zIDMpIG5vdCBmb3VuZCIpfQogICAgcmV0dXJuIG5ldyAkRGF0ZVRpbWUoeWVhcixtb250aCxkYXksaG91cixtaW51dGUsc2Vjb25kLG1pY3Jvc2Vjb25kKQp9CgokbW9kdWxlID0gewogICAgX19nZXRhdHRyX18gOiBmdW5jdGlvbihhdHRyKXtyZXR1cm4gdGhpc1thdHRyXX0sCiAgICBkYXRlIDogJERhdGVDbGFzcywKICAgIGRhdGV0aW1lIDogJERhdGVUaW1lQ2xhc3MsCiAgICB0aW1lIDogJFRpbWVDbGFzcywKICAgIHRpbWVkZWx0YSA6ICRUaW1lRGVsdGFDbGFzcywKICAgIE1BWFlFQVIgOiA5OTk5LAogICAgTUlOWUVBUiA6IDEKfQoKJG1vZHVsZS5kYXRldGltZS5fX2dldGF0dHJfXz0gZnVuY3Rpb24oYXR0cil7CiAgICBpZihhdHRyPT0nbm93Jyl7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciBvYmogPSBuZXcgRGF0ZSgpCiAgICAgICAgICAgIHZhciBhcmdzID0gW2ludChvYmouZ2V0RnVsbFllYXIoKSksaW50KG9iai5nZXRNb250aCgpKzEpLAogICAgICAgICAgICAgICAgaW50KG9iai5nZXREYXRlKCkpLGludChvYmouZ2V0SG91cnMoKSksaW50KG9iai5nZXRNaW51dGVzKCkpLAogICAgICAgICAgICAgICAgaW50KG9iai5nZXRTZWNvbmRzKCkpLGludChvYmouZ2V0TWlsbGlzZWNvbmRzKCkqMTAwMCldCiAgICAgICAgICAgIHJldHVybiBuZXcgJERhdGVUaW1lKGFyZ3MpfQogICAgfQogICAgJHJhaXNlKCdBdHRyaWJ1dGVFcnJvcicsJ2RhdGV0aW1lLmRhdGV0aW1lIGhhcyBubyBhdHRyaWJ1dGUgJythdHRyKQp9CgokbW9kdWxlLmRhdGUuX19nZXRhdHRyX189IGZ1bmN0aW9uKGF0dHIpewogICAgaWYoYXR0cj09J3RvZGF5Jyl7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciBvYmogPSBuZXcgRGF0ZSgpCiAgICAgICAgICAgIHZhciBhcmdzID0gW2ludChvYmouZ2V0RnVsbFllYXIoKSksaW50KG9iai5nZXRNb250aCgpKzEpLAogICAgICAgICAgICAgICAgaW50KG9iai5nZXREYXRlKCkpXQogICAgICAgICAgICByZXR1cm4gbmV3ICREYXRlKGFyZ3MpCiAgICAgICAgfQogICAgfQogICAgJHJhaXNlKCdBdHRyaWJ1dGVFcnJvcicsJ2RhdGV0aW1lLmRhdGV0aW1lIGhhcyBubyBhdHRyaWJ1dGUgJythdHRyKQp9CgoKJG1vZHVsZS50aW1lLl9fZ2V0YXR0cl9fPSBmdW5jdGlvbihhdHRyKXsKICAgICRyYWlzZSgnQXR0cmlidXRlRXJyb3InLCdkYXRldGltZS5kYXRldGltZSBoYXMgbm8gYXR0cmlidXRlICcrYXR0cikKfSAK',
'/libs/sys.js':'Cm1vZHVsZV9kaWN0PWZ1bmN0aW9uKCkgewogIHZhciBkPWRpY3QoKQogIGZvciAodmFyIGtleSBpbiBfX0JSWVRIT05fXy5tb2R1bGVzKSB7CiAgICAgIGQuX19zZXRpdGVtX18oa2V5LCBfX0JSWVRIT05fXy5tb2R1bGVzW2tleV0pCiAgfQogIHJldHVybiBkCn0KCiRtb2R1bGUgPSB7CiAgICBfX2dldGF0dHJfXyA6IGZ1bmN0aW9uKGF0dHIpewogICAgICAgIGlmKGF0dHI9PT0ic3Rkb3V0Iil7cmV0dXJuIGRvY3VtZW50LiRzdGRvdXR9CiAgICAgICAgaWYoYXR0cj09PSJzdGRlcnIiKXtyZXR1cm4gZG9jdW1lbnQuJHN0ZGVycn0KICAgICAgICBpZihhdHRyPT09Im1vZHVsZXMiKXtyZXR1cm4gbW9kdWxlX2RpY3QoKX0KICAgICAgICBlbHNle3JldHVybiAkZ2V0YXR0cih0aGlzLGF0dHIpfQogICAgICAgIH0sCiAgICBfX3NldGF0dHJfXyA6IGZ1bmN0aW9uKGF0dHIsdmFsdWUpewogICAgICAgIGlmKGF0dHI9PT0ic3Rkb3V0Iil7ZG9jdW1lbnQuJHN0ZG91dD12YWx1ZX0KICAgICAgICBpZihhdHRyPT09InN0ZGVyciIpe2RvY3VtZW50LiRzdGRlcnI9dmFsdWV9CiAgICAgICAgfSwKICAgIGhhc19sb2NhbF9zdG9yYWdlOl9fQlJZVEhPTl9fLmhhc19sb2NhbF9zdG9yYWdlLAogICAgaGFzX2pzb246X19CUllUSE9OX18uaGFzX2pzb24sCiAgICB2ZXJzaW9uX2luZm86X19CUllUSE9OX18udmVyc2lvbl9pbmZvLAogICAgcGF0aDpfX0JSWVRIT05fXy5wYXRoCn0K',
'/libs/time.js':'JG1vZHVsZSA9ICB7CgogICAgX19nZXRhdHRyX18gOiBmdW5jdGlvbihhdHRyKXtyZXR1cm4gdGhpc1thdHRyXX0sCgogICAgY2xlYXJfaW50ZXJ2YWwgOiBmdW5jdGlvbihpbnRfaWQpe3dpbmRvdy5jbGVhckludGVydmFsKGludF9pZCl9LAogICAgCiAgICBzZXRfaW50ZXJ2YWwgOiBmdW5jdGlvbihmdW5jLGludGVydmFsKXsKICAgICAgICByZXR1cm4gaW50KHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jLGludGVydmFsKSkKICAgIH0sCgogICAgc2V0X3RpbWVvdXQgOiBmdW5jdGlvbihmdW5jLGludGVydmFsKXt3aW5kb3cuc2V0VGltZW91dChmdW5jLGludGVydmFsKX0sCgogICAgdGltZSA6IGZ1bmN0aW9uKCl7cmV0dXJuIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCl9LAogICAgCiAgICBzdHJmdGltZSA6IGZ1bmN0aW9uKGZvcm1hdCxhcmcpewoKICAgICAgICBmdW5jdGlvbiBucyhhcmcsbmIpewogICAgICAgICAgICAvLyBsZWZ0IHBhZGRpbmcgd2l0aCAwCiAgICAgICAgICAgIHZhciByZXMgPSBhcmcudG9TdHJpbmcoKQogICAgICAgICAgICB3aGlsZShyZXMubGVuZ3RoPG5iKXtyZXMgPSAnMCcrcmVzfQogICAgICAgICAgICByZXR1cm4gcmVzCiAgICAgICAgfQogICAgICAgIGlmKGFyZyl7dmFyIG9iaiA9IG5ldyBEYXRlKGFyZyl9ZWxzZXt2YXIgb2JqPW5ldyBEYXRlKCl9CiAgICAgICAgdmFyIHJlcyA9IGZvcm1hdAogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKC8lSC8sbnMob2JqLmdldEhvdXJzKCksMikpCiAgICAgICAgcmVzID0gcmVzLnJlcGxhY2UoLyVNLyxucyhvYmouZ2V0TWludXRlcygpLDIpKQogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKC8lUy8sbnMob2JqLmdldFNlY29uZHMoKSwyKSkKICAgICAgICByZXMgPSByZXMucmVwbGFjZSgvJVkvLG5zKG9iai5nZXRGdWxsWWVhcigpLDQpKQogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKC8leS8sbnMob2JqLmdldEZ1bGxZZWFyKCksNCkuc3Vic3RyKDIpKQogICAgICAgIHJlcyA9IHJlcy5yZXBsYWNlKC8lbS8sbnMob2JqLmdldE1vbnRoKCkrMSwyKSkKICAgICAgICByZXMgPSByZXMucmVwbGFjZSgvJWQvLG5zKG9iai5nZXREYXRlKCksMikpCiAgICAgICAgcmV0dXJuIHJlcwogICAgfQp9',
'/libs/random.js':'JG1vZHVsZSA9IHsKICAgIF9fZ2V0YXR0cl9fIDogZnVuY3Rpb24oYXR0cil7cmV0dXJuIHRoaXNbYXR0cl19LAogICAgcmFuZG9tOmZ1bmN0aW9uKCl7cmV0dXJuIGZsb2F0KE1hdGgucmFuZG9tKCkpfSwKICAgIHJhbmRpbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaW50KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooYi1hKSthKSl9Cn0KJG1vZHVsZS5fX2NsYXNzX18gPSAkbW9kdWxlIC8vIGRlZmluZWQgaW4gJHB5X3V0aWxzCiRtb2R1bGUuX19zdHJfXyA9IGZ1bmN0aW9uKCl7cmV0dXJuICI8bW9kdWxlICdyYW5kb20nPiJ9Cg==',
'/libs/math.js':'dmFyIGZsb2F0X2NoZWNrPWZ1bmN0aW9uKHgpIHsKICAgIGlmIChpc2luc3RhbmNlKHgsIGZsb2F0KSkgcmV0dXJuIHgudmFsdWU7CiAgICByZXR1cm4geDsKfQoKdmFyIGlzaW5mPWZ1bmN0aW9uKHgpIHsKICAgIHZhciB4MT1mbG9hdF9jaGVjayh4KTsKICAgIHJldHVybiB4MSA9PSAtSW5maW5pdHkgfHwgeDEgPT0gSW5maW5pdHkgfHwgeDEgPT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIHx8IHgxID09IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTsKfQoKJG1vZHVsZSA9IHsKICAgIF9fZ2V0YXR0cl9fIDogZnVuY3Rpb24oYXR0cil7CiAgICAgICAgdmFyIHJlcyA9IHRoaXNbYXR0cl0KICAgICAgICBpZihyZXM9PT11bmRlZmluZWQpeyRyYWlzZSgnQXR0cmlidXRlRXJyb3InLCdtb2R1bGUgbWF0aCBoYXMgbm8gYXR0cmlidXRlICcrYXR0cil9CiAgICAgICAgcmV0dXJuIHJlcwogICAgfSwKICAgIGFjb3M6IGZ1bmN0aW9uKHgpIHtyZXR1cm4gZmxvYXQoTWF0aC5hY29zKGZsb2F0X2NoZWNrKHgpKSl9LAogICAgYWNvc2g6IGZ1bmN0aW9uKHgpIHsgCiAgICAgICAgaWYgKGlzaW5mKHgpKSByZXR1cm4gZmxvYXQoJ2luZicpOwogICAgICAgIHZhciB5ID0gZmxvYXRfY2hlY2soeCk7CiAgICAgICAgcmV0dXJuIE1hdGgubG9nKHkgKyBNYXRoLnNxcnQoeSp5LTEpKTsKICAgIH0sCiAgICBhc2luOiBmdW5jdGlvbih4KSB7cmV0dXJuIGZsb2F0KE1hdGguYXNpbihmbG9hdF9jaGVjayh4KSkpfSwKICAgIGFzaW5oOiBmdW5jdGlvbih4KSB7CiAgICAgICAgaWYgKGlzaW5mKHgpKSByZXR1cm4gZmxvYXQoJ2luZicpOwogICAgICAgIHZhciB5ID0gZmxvYXRfY2hlY2soeCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIE1hdGgubG9nKHkgKyBNYXRoLnNxcnQoeSp5KzEpKQogICAgfSwKICAgIGF0YW46IGZ1bmN0aW9uKHgpIHsKICAgICAgICBpZiAoaXNpbmYoeCkpIHJldHVybiBmbG9hdChNYXRoLlBJLzIpOwogICAgICAgIHJldHVybiBmbG9hdChNYXRoLmF0YW4oZmxvYXRfY2hlY2soeCkpKX0sCiAgICBhdGFuMjogZnVuY3Rpb24oeSx4KSB7cmV0dXJuIGZsb2F0KE1hdGguYXRhbjIoeSx4KSl9LAogICAgYXRhbmg6IGZ1bmN0aW9uKHgpIHsgCiAgICAgICB2YXIgeT1mbG9hdF9jaGVjayh4KTsKICAgICAgIGlmICh5PT0wKSByZXR1cm4gMDsKICAgICAgIHJldHVybiAwLjUgKiBNYXRoLmxvZygoMS95KzEpLygxL3ktMSkpOwogICAgfSwKICAgIGNlaWw6IGZ1bmN0aW9uKHgpIHsKICAgICAgIHZhciB5PWZsb2F0X2NoZWNrKHgpOwogICAgICAgaWYgKCFpc05hTihwYXJzZUZsb2F0KHkpKSAmJiBpc0Zpbml0ZSh5KSkgcmV0dXJuIGludChNYXRoLmNlaWwoeSkpOwogICAgICAgaWYgKHkuX19jZWlsX18gIT09IHVuZGVmaW5lZCkge3JldHVybiB5Ll9fY2VpbF9fKCl9CiAgICAgICAKICAgICAgICRyYWlzZSgnVmFsdWVFcnJvcicsICdvYmplY3QgaXMgbm90IGEgbnVtYmVyIGFuZCBkb2VzIG5vdCBjb250YWluIF9fY2VpbF9fJykKICAgIH0sCiAgICBjb3B5c2lnbjogZnVuY3Rpb24oeCx5KSB7CiAgICAgICAgdmFyIHgxPWZsb2F0X2NoZWNrKHgpOwogICAgICAgIHZhciB5MT1mbG9hdF9jaGVjayh5KTsgCiAgICAgICAgdmFyIHNpZ249eTE/eTE8MD8tMToxOjEKICAgICAgICByZXR1cm4gTWF0aC5hYnMoeDEpICogc2lnbiAKICAgIH0sCiAgICBjb3MgOiBmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5jb3MoZmxvYXRfY2hlY2soeCkpKX0sCiAgICBkZWdyZWVzOiBmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXRfY2hlY2soeCkgKiAxODAvTWF0aC5QSX0sCiAgICBlOiBmbG9hdChNYXRoLkUpLAogICAgZXJmOiBmdW5jdGlvbih4KSB7CiAgICAgICAgLy8gaW5zcGlyZWQgZnJvbSAKICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ1NzQwOC9pcy10aGVyZS1hbi1lYXNpbHktYXZhaWxhYmxlLWltcGxlbWVudGF0aW9uLW9mLWVyZi1mb3ItcHl0aG9uCiAgICAgICAgdmFyIHkgPWZsb2F0X2NoZWNrKHgpOwogICAgICAgIHZhciB0ID0gMS4wIC8gKDEuMCArIDAuNSAqIE1hdGguYWJzKHkpKQogICAgICAgIHZhciBhbnMgPSAxIC0gdCAqIE1hdGguZXhwKCAteSp5IC0gMS4yNjU1MTIyMyArCiAgICAgICAgICAgICAgICAgICAgIHQgKiAoIDEuMDAwMDIzNjggKwogICAgICAgICAgICAgICAgICAgICB0ICogKCAwLjM3NDA5MTk2ICsgCiAgICAgICAgICAgICAgICAgICAgIHQgKiAoIDAuMDk2Nzg0MTggKyAKICAgICAgICAgICAgICAgICAgICAgdCAqICgtMC4xODYyODgwNiArIAogICAgICAgICAgICAgICAgICAgICB0ICogKCAwLjI3ODg2ODA3ICsgCiAgICAgICAgICAgICAgICAgICAgIHQgKiAoLTEuMTM1MjAzOTggKyAKICAgICAgICAgICAgICAgICAgICAgdCAqICggMS40ODg1MTU4NyArIAogICAgICAgICAgICAgICAgICAgICB0ICogKC0wLjgyMjE1MjIzICsgCiAgICAgICAgICAgICAgICAgICAgIHQgKiAwLjE3MDg3Mjc3KSkpKSkpKSkpCiAgICAgICAgaWYgKHkgPj0gMC4wKSByZXR1cm4gYW5zCgogICAgICAgIHJldHVybiAtYW5zCiAgICB9LAoKICAgIGVyZmM6IGZ1bmN0aW9uKHgpIHsKICAgICAgICAvLyBpbnNwaXJlZCBmcm9tIAogICAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDU3NDA4L2lzLXRoZXJlLWFuLWVhc2lseS1hdmFpbGFibGUtaW1wbGVtZW50YXRpb24tb2YtZXJmLWZvci1weXRob24KICAgICAgICB2YXIgeSA9IGZsb2F0X2NoZWNrKHgpOwogICAgICAgIHZhciB0ID0gMS4wIC8gKDEuMCArIDAuNSAqIE1hdGguYWJzKHkpKQogICAgICAgIHZhciBhbnMgPSAxIC0gdCAqIE1hdGguZXhwKCAteSp5IC0gMS4yNjU1MTIyMyArCiAgICAgICAgICAgICAgICAgICAgIHQgKiAoIDEuMDAwMDIzNjggKwogICAgICAgICAgICAgICAgICAgICB0ICogKCAwLjM3NDA5MTk2ICsgCiAgICAgICAgICAgICAgICAgICAgIHQgKiAoIDAuMDk2Nzg0MTggKyAKICAgICAgICAgICAgICAgICAgICAgdCAqICgtMC4xODYyODgwNiArIAogICAgICAgICAgICAgICAgICAgICB0ICogKCAwLjI3ODg2ODA3ICsgCiAgICAgICAgICAgICAgICAgICAgIHQgKiAoLTEuMTM1MjAzOTggKyAKICAgICAgICAgICAgICAgICAgICAgdCAqICggMS40ODg1MTU4NyArIAogICAgICAgICAgICAgICAgICAgICB0ICogKC0wLjgyMjE1MjIzICsgCiAgICAgICAgICAgICAgICAgICAgIHQgKiAwLjE3MDg3Mjc3KSkpKSkpKSkpCiAgICAgICAgaWYgKHkgPj0gMC4wKSByZXR1cm4gMS1hbnMKICAgICAgICByZXR1cm4gMSthbnMKICAgIH0sCiAgICBleHA6IGZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLmV4cChmbG9hdF9jaGVjayh4KSkpfSwKICAgIGV4cG0xOiBmdW5jdGlvbih4KXtyZXR1cm4gZmxvYXQoTWF0aC5leHAoZmxvYXRfY2hlY2soeCkpLTEpfSwKICAgIGZhYnM6IGZ1bmN0aW9uKHgpeyByZXR1cm4geD4wP2Zsb2F0KHgpOmZsb2F0KC14KX0sCiAgICBmYWN0b3JpYWw6IGZ1bmN0aW9uKHgpIHsKICAgICAgICAgLy91c2luZyBjb2RlIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zOTU5MjExL2Zhc3QtZmFjdG9yaWFsLWZ1bmN0aW9uLWluLWphdmFzY3JpcHQKICAgICAgICAgdmFyIHk9ZmxvYXRfY2hlY2soeCk7CiAgICAgICAgIHZhciByPTEKICAgICAgICAgZm9yICh2YXIgaT0yOyBpPD15OyBpKyspe3IqPWl9CiAgICAgICAgIHJldHVybiByCiAgICB9LAogICAgZmxvb3I6ZnVuY3Rpb24oeCl7cmV0dXJuIE1hdGguZmxvb3IoZmxvYXRfY2hlY2soeCkpfSwKICAgIGZtb2Q6ZnVuY3Rpb24oeCx5KXtyZXR1cm4gZmxvYXQoZmxvYXRfY2hlY2soeCklZmxvYXRfY2hlY2soeSkpfSwKICAgIGZyZXhwOmZ1bmN0aW9uKHgpewogICAgICAgdmFyIHgxPWZsb2F0X2NoZWNrKHgpOwogICAgICAgdmFyIGV4ID0gTWF0aC5mbG9vcihNYXRoLmxvZyh4MSkgLyBNYXRoLmxvZygyKSkgKyAxOwogICAgICAgZnJhYyA9IHgxIC8gTWF0aC5wb3coMiwgZXgpOwogICAgICAgcmV0dXJuIFtmcmFjLCBleF07CiAgICB9LAogICAgLy9mc3VtOmZ1bmN0aW9uKHgpe30sCiAgICBnYW1tYTogZnVuY3Rpb24oeCl7CiAgICAgICAgIC8vdXNpbmcgY29kZSBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk1OTIxMS9mYXN0LWZhY3RvcmlhbC1mdW5jdGlvbi1pbi1qYXZhc2NyaXB0CiAgICAgICAgIC8vIExhbmN6b3MgQXBwcm94aW1hdGlvbiBvZiB0aGUgR2FtbWEgRnVuY3Rpb24KICAgICAgICAgLy8gQXMgZGVzY3JpYmVkIGluIE51bWVyaWNhbCBSZWNpcGVzIGluIEMgKDJuZCBlZC4gQ2FtYnJpZGdlIFVuaXZlcnNpdHkgUHJlc3MsIDE5OTIpCiAgICAgICAgIHZhciB5PWZsb2F0X2NoZWNrKHgpOwogICAgICAgICB2YXIgeiA9IHkgKyAxOwogICAgICAgICB2YXIgZDEgPSBNYXRoLnNxcnQoMiAqIE1hdGguUEkpIC8gejsKCiAgICAgICAgIHZhciBkMiA9IDEuMDAwMDAwMDAwMTkwMDE1OwogICAgICAgICBkMiArPSAgNzYuMTgwMDkxNzI5NDcxNDYgLyAoeisxKTsKICAgICAgICAgZDIgKz0gLTg2LjUwNTMyMDMyOTQxNjc3IC8gKHorMik7CiAgICAgICAgIGQyICs9ICAyNC4wMTQwOTgyNDA4MzA5MSAvICh6KzMpOyAKICAgICAgICAgZDIgKz0gLTEuMjMxNzM5NTcyNDUwMTU1IC8gKHorNCk7IAogICAgICAgICBkMiArPSAgMS4yMDg2NTA5NzM4NjYxNzlFLTMgLyAoeis1KTsKICAgICAgICAgZDIgKz0gLTUuMzk1MjM5Mzg0OTUzRS02IC8gKHorNik7CgogICAgICAgICByZXR1cm4gZDEgKiBkMiAqIE1hdGgucG93KHorNS41LHorMC41KSAqIE1hdGguZXhwKC0oeis1LjUpKTsKICAgIH0sCiAgICBoeXBvdDogZnVuY3Rpb24oeCx5KXsKICAgICAgIHZhciB4MT1mbG9hdF9jaGVjayh4KTsKICAgICAgIHZhciB5MT1mbG9hdF9jaGVjayh5KTsKICAgICAgIHJldHVybiBNYXRoLnNxcnQoeDEqeDEgKyB5MSp5MSl9LAogICAgaXNmaW5pdGU6ZnVuY3Rpb24oeCkge3JldHVybiBpc0Zpbml0ZShmbG9hdF9jaGVjayh4KSl9LAogICAgaXNpbmY6ZnVuY3Rpb24oeCkgeyByZXR1cm4gaXNpbmYoeCk7fSwKICAgIGlzbmFuOmZ1bmN0aW9uKHgpIHtyZXR1cm4gaXNOYU4oZmxvYXRfY2hlY2soeCkpfSwKICAgIGxkZXhwOmZ1bmN0aW9uKHgsaSkge3JldHVybiBmbG9hdF9jaGVjayh4KSAqIE1hdGgucG93KDIsZmxvYXRfY2hlY2soaSkpfSwKICAgIGxnYW1tYTpmdW5jdGlvbih4KSB7CiAgICAgICAgIC8vIHNlZSBnYW1tYSBmdW5jdGlvbiBmb3Igc291cmNlcwogICAgICAgICB2YXIgeT1mbG9hdF9jaGVjayh4KTsKICAgICAgICAgdmFyIHogPSB5ICsgMTsKICAgICAgICAgdmFyIGQxID0gTWF0aC5zcXJ0KDIgKiBNYXRoLlBJKSAvIHo7CgogICAgICAgICB2YXIgZDIgPSAxLjAwMDAwMDAwMDE5MDAxNTsKICAgICAgICAgZDIgKz0gIDc2LjE4MDA5MTcyOTQ3MTQ2IC8gKHorMSk7CiAgICAgICAgIGQyICs9IC04Ni41MDUzMjAzMjk0MTY3NyAvICh6KzIpOwogICAgICAgICBkMiArPSAgMjQuMDE0MDk4MjQwODMwOTEgLyAoeiszKTsgCiAgICAgICAgIGQyICs9IC0xLjIzMTczOTU3MjQ1MDE1NSAvICh6KzQpOyAKICAgICAgICAgZDIgKz0gIDEuMjA4NjUwOTczODY2MTc5RS0zIC8gKHorNSk7CiAgICAgICAgIGQyICs9IC01LjM5NTIzOTM4NDk1M0UtNiAvICh6KzYpOwoKICAgICAgICAgcmV0dXJuIE1hdGgubG9nKE1hdGguYWJzKGQxICogZDIgKiBNYXRoLnBvdyh6KzUuNSx6KzAuNSkgKiBNYXRoLmV4cCgtKHorNS41KSkpKTsKICAgIH0sCiAgICBsb2c6IGZ1bmN0aW9uKHgsIGJhc2UpIHsKICAgICAgICAgdmFyIHgxPWZsb2F0X2NoZWNrKHgpOwogICAgICAgICBpZiAoYmFzZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gTWF0aC5sb2coeDEpOwogICAgICAgICByZXR1cm4gTWF0aC5sb2coeDEpL01hdGgubG9nKGZsb2F0X2NoZWNrKGJhc2UpKTsKICAgIH0sCiAgICBsb2cxcDogZnVuY3Rpb24oeCkge3JldHVybiBNYXRoLmxvZygxLjAgKyBmbG9hdF9jaGVjayh4KSl9LAogICAgbG9nMjogZnVuY3Rpb24oeCkge3JldHVybiBNYXRoLmxvZyhmbG9hdF9jaGVjayh4KSkvTWF0aC5MTjJ9LAogICAgbG9nMTA6IGZ1bmN0aW9uKHgpIHtyZXR1cm4gTWF0aC5sb2coZmxvYXRfY2hlY2soeCkpL01hdGguTE4xMH0sCiAgICBtb2RmOmZ1bmN0aW9uKHgpIHsKICAgICAgIHZhciB4MT1mbG9hdF9jaGVjayh4KTsKICAgICAgIHZhciBpPWZsb2F0KE1hdGguZmxvb3IoeDEpKTsKICAgICAgIHJldHVybiBuZXcgQXJyYXkoaSwgZmxvYXQoeDEtaSkpOwogICAgfSwKICAgIHBpIDogZmxvYXQoTWF0aC5QSSksCiAgICBwb3c6IGZ1bmN0aW9uKHgseSkge3JldHVybiBNYXRoLnBvdyhmbG9hdF9jaGVjayh4KSxmbG9hdF9jaGVjayh5KSl9LAogICAgcmFkaWFuczogZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0X2NoZWNrKHgpICogTWF0aC5QSS8xODB9LAogICAgc2luIDogZnVuY3Rpb24oeCl7cmV0dXJuIGZsb2F0KE1hdGguc2luKGZsb2F0X2NoZWNrKHgpKSl9LAogICAgc3FydCA6IGZ1bmN0aW9uKHgpe3JldHVybiBmbG9hdChNYXRoLnNxcnQoZmxvYXRfY2hlY2soeCkpKX0sCiAgICB0cnVuYzogZnVuY3Rpb24oeCkgewogICAgICAgdmFyIHgxPWZsb2F0X2NoZWNrKHgpOwogICAgICAgaWYgKCFpc05hTihwYXJzZUZsb2F0KHgxKSkgJiYgaXNGaW5pdGUoeDEpKSByZXR1cm4gaW50KE1hdGguZmxvb3IoeDEpKTsKICAgICAgIGlmICh4Ll9fdHJ1bmNfXyAhPT0gdW5kZWZpbmVkKSB7cmV0dXJuIHguX190cnVuY19fKCl9CiAgICAgICAKICAgICAgICRyYWlzZSgnVmFsdWVFcnJvcicsICdvYmplY3QgaXMgbm90IGEgbnVtYmVyIGFuZCBkb2VzIG5vdCBjb250YWluIF9fdHJ1bmNfXycpCiAgICB9Cn0KCiRtb2R1bGUuX19jbGFzc19fID0gJG1vZHVsZSAvLyBkZWZpbmVkIGluICRweV91dGlscwokbW9kdWxlLl9fc3RyX18gPSBmdW5jdGlvbigpe3JldHVybiAiPG1vZHVsZSAnbWF0aCc+In0K',
'/libs/html.js':'Ly8gY3JlYXRpb24gb2YgYW4gSFRNTCBlbGVtZW50CiRtb2R1bGUgPSAoZnVuY3Rpb24oKXsKZnVuY3Rpb24gJFRhZyh0YWdOYW1lLGFyZ3MpewogICAgLy8gY2wKICAgIHZhciAkaSA9IG51bGwKICAgIHZhciBlbHQgPSBudWxsCiAgICB2YXIgZWx0ID0gJERPTU5vZGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKSkKICAgIGVsdC5wYXJlbnQgPSB0aGlzCiAgICBpZihhcmdzIT11bmRlZmluZWQgJiYgYXJncy5sZW5ndGg+MCl7CiAgICAgICAgJHN0YXJ0ID0gMAogICAgICAgICRmaXJzdCA9IGFyZ3NbMF0KICAgICAgICAvLyBpZiBmaXJzdCBhcmd1bWVudCBpcyBub3QgYSBrZXl3b3JkLCBpdCdzIHRoZSB0YWcgY29udGVudAogICAgICAgIGlmKCFpc2luc3RhbmNlKCRmaXJzdCwkS3cpKXsKICAgICAgICAgICAgJHN0YXJ0ID0gMQogICAgICAgICAgICBpZihpc2luc3RhbmNlKCRmaXJzdCxbc3RyLGludCxmbG9hdF0pKXsKICAgICAgICAgICAgICAgIHR4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCRmaXJzdC50b1N0cmluZygpKQogICAgICAgICAgICAgICAgZWx0LmFwcGVuZENoaWxkKHR4dCkKICAgICAgICAgICAgfSBlbHNlIGlmKGlzaW5zdGFuY2UoJGZpcnN0LCRUYWdTdW0pKXsKICAgICAgICAgICAgICAgIGZvcigkaT0wOyRpPCRmaXJzdC5jaGlsZHJlbi5sZW5ndGg7JGkrKyl7CiAgICAgICAgICAgICAgICAgICAgZWx0LmFwcGVuZENoaWxkKCRmaXJzdC5jaGlsZHJlblskaV0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0cnl7ZWx0LmFwcGVuZENoaWxkKCRmaXJzdCl9CiAgICAgICAgICAgICAgICBjYXRjaChlcnIpe3Rocm93IFZhbHVlRXJyb3IoJ3dyb25nIGVsZW1lbnQgJyskZmlyc3QpfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIGF0dHJpYnV0ZXMKICAgICAgICBmb3IoJGk9JHN0YXJ0OyRpPGFyZ3MubGVuZ3RoOyRpKyspewogICAgICAgICAgICAvLyBrZXl3b3JkIGFyZ3VtZW50cwogICAgICAgICAgICAkYXJnID0gYXJnc1skaV0KICAgICAgICAgICAgaWYoaXNpbnN0YW5jZSgkYXJnLCRLdykpewogICAgICAgICAgICAgICAgaWYoJGFyZy5uYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyKDAsMik9PT0ib24iKXsgLy8gZXZlbnRzCiAgICAgICAgICAgICAgICAgICAgZXZhbCgnZWx0LicrJGFyZy5uYW1lLnRvTG93ZXJDYXNlKCkrJz1mdW5jdGlvbigpeycrJGFyZy52YWx1ZSsnfScpCiAgICAgICAgICAgICAgICB9ZWxzZSBpZigkYXJnLm5hbWUudG9Mb3dlckNhc2UoKT09InN0eWxlIil7CiAgICAgICAgICAgICAgICAgICAgZWx0LnNldF9zdHlsZSgkYXJnLnZhbHVlKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZigkYXJnLnZhbHVlIT09ZmFsc2UpewogICAgICAgICAgICAgICAgICAgICAgICAvLyBvcHRpb24uc2VsZWN0ZWQ9ZmFsc2Ugc2V0cyBpdCB0byB0cnVlIDotKQogICAgICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHQuc2V0QXR0cmlidXRlKCRhcmcubmFtZS50b0xvd2VyQ2FzZSgpLCRhcmcudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIH1jYXRjaChlcnIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVmFsdWVFcnJvcigiY2FuJ3Qgc2V0IGF0dHJpYnV0ZSAiKyRhcmcubmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBlbHQKfQoKLy8gdGhlIGNsYXNzZXMgdXNlZCBmb3IgdGFnIHN1bXMsICRUYWdTVW0gYW5kICRUYWdTdW1DbGFzcyAKLy8gYXJlIGRlZmluZWQgaW4gcHlfZG9tLmpzCgpmdW5jdGlvbiBBKCl7cmV0dXJuICRUYWcoJ0EnLGFyZ3VtZW50cyl9Cgp2YXIgJHNyYyA9IEErJycgLy8gc291cmNlIG9mIGZ1bmN0aW9uIEEKLy8gSFRNTDQgdGFncwokdGFncyA9IFsnQScsICdBQkJSJywgJ0FDUk9OWU0nLCAnQUREUkVTUycsICdBUFBMRVQnLAogICAgICAgICAgICAnQicsICdCRE8nLCAnQklHJywgJ0JMT0NLUVVPVEUnLCAnQlVUVE9OJywKICAgICAgICAgICAgJ0NBUFRJT04nLCAnQ0VOVEVSJywgJ0NJVEUnLCAnQ09ERScsCiAgICAgICAgICAgICdERUwnLCAnREZOJywgJ0RJUicsICdESVYnLCAnREwnLAogICAgICAgICAgICAnRU0nLCAnRklFTERTRVQnLCAnRk9OVCcsICdGT1JNJywgJ0ZSQU1FU0VUJywKICAgICAgICAgICAgJ0gxJywgJ0gyJywgJ0gzJywgJ0g0JywgJ0g1JywgJ0g2JywKICAgICAgICAgICAgJ0knLCAnSUZSQU1FJywgJ0lOUycsICdLQkQnLCAnTEFCRUwnLCAnTEVHRU5EJywKICAgICAgICAgICAgJ01BUCcsICdNRU5VJywgJ05PRlJBTUVTJywgJ05PU0NSSVBUJywgJ09CSkVDVCcsCiAgICAgICAgICAgICdPTCcsICdPUFRHUk9VUCcsICdQUkUnLCAnUScsICdTJywgJ1NBTVAnLAogICAgICAgICAgICAnU0NSSVBUJywgJ1NFTEVDVCcsICdTTUFMTCcsICdTUEFOJywgJ1NUUklLRScsCiAgICAgICAgICAgICdTVFJPTkcnLCAnU1RZTEUnLCAnU1VCJywgJ1NVUCcsICdUQUJMRScsCiAgICAgICAgICAgICdURVhUQVJFQScsICdUSVRMRScsICdUVCcsICdVJywgJ1VMJywKICAgICAgICAgICAgJ1ZBUicsICdCT0RZJywgJ0NPTEdST1VQJywgJ0REJywgJ0RUJywgJ0hFQUQnLAogICAgICAgICAgICAnSFRNTCcsICdMSScsICdQJywgJ1RCT0RZJywnT1BUSU9OJywgCiAgICAgICAgICAgICdURCcsICdURk9PVCcsICdUSCcsICdUSEVBRCcsICdUUicsCiAgICAgICAgICAgICdBUkVBJywgJ0JBU0UnLCAnQkFTRUZPTlQnLCAnQlInLCAnQ09MJywgJ0ZSQU1FJywKICAgICAgICAgICAgJ0hSJywgJ0lNRycsICdJTlBVVCcsICdJU0lOREVYJywgJ0xJTksnLAogICAgICAgICAgICAnTUVUQScsICdQQVJBTSddCgovLyBIVE1MNSB0YWdzCiR0YWdzID0gJHRhZ3MuY29uY2F0KFsnQVJUSUNMRScsJ0FTSURFJywnRklHVVJFJywnRk9PVEVSJywnSEVBREVSJywnTkFWJywKICAgICdTRUNUSU9OJywnQVVESU8nLCdWSURFTycsJ0NBTlZBUycsJ0NPTU1BTkQnLCdEQVRBTElTVCcsCiAgICAnREVUQUlMUycsJ09VVFBVVCcsJ1BST0dSRVNTJywnSEdST1VQJywnTUFSSycsJ01FVEVSJywnVElNRScsCiAgICAnUlAnLCdSVCcsJ1JVQlknXSkKCi8vIGNyZWF0ZSBjbGFzc2VzCnZhciBvYmogPSBuZXcgT2JqZWN0KCkKZm9yKCRpPTA7JGk8JHRhZ3MubGVuZ3RoOyRpKyspewogICAgJGNvZGUgPSAkc3JjLnJlcGxhY2UoL0EvZ20sJHRhZ3NbJGldKQogICAgZXZhbCgib2JqLiIrJHRhZ3NbJGldKyI9IiskY29kZSkKICAgIGV2YWwoIm9iai4iKyR0YWdzWyRpXSsnLm5hbWU9IicrJHRhZ3NbJGldKyciJykKfQpvYmouX19nZXRhdHRyX18gPSBmdW5jdGlvbihhdHRyKXtyZXR1cm4gdGhpc1thdHRyXX0KcmV0dXJuIG9iagp9KSgpCg==',
'/libs/hashlib.js':'JG1vZHVsZSA9IHsKICAgIF9fZ2V0YXR0cl9fIDogZnVuY3Rpb24oYXR0cil7CiAgICAgICAgaWYgKGF0dHIgPT0gJ25ldycpIHtyZXR1cm4gJGhhc2hsaWJfbmV3O30KICAgICAgICByZXR1cm4gdGhpc1thdHRyXQogICAgfSwKICAgIG1kNTogZnVuY3Rpb24oKSB7cmV0dXJuICRoYXNobGliX25ldygnbWQ1Jyl9LAogICAgc2hhMTogZnVuY3Rpb24oKSB7cmV0dXJuICRoYXNobGliX25ldygnc2hhMScpfSwKICAgIHNoYTIyNDogZnVuY3Rpb24oKSB7cmV0dXJuICRoYXNobGliX25ldygnc2hhMjI0Jyl9LAogICAgc2hhMjU2OiBmdW5jdGlvbigpIHtyZXR1cm4gJGhhc2hsaWJfbmV3KCdzaGEyNTYnKX0sCiAgICBzaGEzODQ6IGZ1bmN0aW9uKCkge3JldHVybiAkaGFzaGxpYl9uZXcoJ3NoYTM4NCcpfSwKICAgIHNoYTUxMjogZnVuY3Rpb24oKSB7cmV0dXJuICRoYXNobGliX25ldygnc2hhNTEyJyl9LAoKICAgIGFsZ29yaXRobXNfZ3VhcmFudGVlZDogWydtZDUnLCAnc2hhMScsICdzaGEyMjQnLCAnc2hhMjU2JywgJ3NoYTM4NCcsICdzaGE1MTInXSwKICAgIGFsZ29yaXRobXNfYXZhaWxhYmxlOiAgWydtZDUnLCAnc2hhMScsICdzaGEyMjQnLCAnc2hhMjU2JywgJ3NoYTM4NCcsICdzaGE1MTInXQp9CgoKLy90b2RvOiBldmVudHVhbGx5IG1vdmUgdGhpcyBmdW5jdGlvbiB0byBhICJ1dGlsaXR5IiBmaWxlIG9yIHVzZSBhamF4IG1vZHVsZT8KZnVuY3Rpb24gJGdldF9DcnlwdG9KU19saWIoYWxnKSB7CiAgIHZhciBpbXA9JGltcG9ydGVyKCkKICAgdmFyICR4bWxodHRwPWltcFswXSwgZmFrZV9xcz1pbXBbMV0sIHRpbWVyPWltcFsyXSwgcmVzPW51bGwKCiAgICR4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7CiAgICAgICAgaWYoJHhtbGh0dHAucmVhZHlTdGF0ZT09NCl7CiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIpCiAgICAgICAgICAgIGlmKCR4bWxodHRwLnN0YXR1cz09MjAwIHx8ICR4bWxodHRwLnN0YXR1cz09MCl7cmVzPSR4bWxodHRwLnJlc3BvbnNlVGV4dH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIC8vIGRvbid0IHRocm93IGFuIGV4Y2VwdGlvbiBoZXJlLCBpdCB3aWxsIG5vdCBiZSBjYXVnaHQgKGlzc3VlICMzMCkKICAgICAgICAgICAgICAgIHJlcyA9IEVycm9yKCkKICAgICAgICAgICAgICAgIHJlcy5uYW1lID0gJ05vdEZvdW5kRXJyb3InCiAgICAgICAgICAgICAgICByZXMubWVzc2FnZSA9ICJObyBDcnlwdG9KUyBsaWIgbmFtZWQgJyIrYWxnKyInIgogICAgICAgICAgICB9CiAgICAgICAgfQogICB9CgogICAkeG1saHR0cC5vcGVuKCdHRVQnLCBfX0JSWVRIT05fXy5icnl0aG9uX3BhdGgrJ2xpYnMvY3J5cHRvX2pzL3JvbGx1cHMvJythbGcrJy5qcycrZmFrZV9xcyxmYWxzZSkKICAgaWYoJ292ZXJyaWRlTWltZVR5cGUnIGluICR4bWxodHRwKXskeG1saHR0cC5vdmVycmlkZU1pbWVUeXBlKCJ0ZXh0L3BsYWluIil9CiAgICR4bWxodHRwLnNlbmQoKQogICBpZihyZXMuY29uc3RydWN0b3I9PT1FcnJvcil7dGhyb3cgcmVzfSAvLyBtb2R1bGUgbm90IGZvdW5kCgogICB0cnl7CiAgICAgIGV2YWwocmVzICsgIjsgX19CUllUSE9OX18uQ3J5cHRvSlM9Q3J5cHRvSlM7IikKICAgfSBjYXRjaCAoZXJyKSB7IAogICAgICB0aHJvdyBFcnJvcigiSlMgRXZhbCBFcnJvciIsICJDYW5ub3QgZXZhbCBDcnlwdG9KUyBhbGdvcml0aG0gJyIgKyBhbGcgKyAiJyA6IGVycm9yOiIgKyBlcnIpOwogICB9Cn0KCmZ1bmN0aW9uICRoYXNobGliX25ldyhhbGcpIHsKICAgIGlmIChhbGcgPT0gJ21kNScpIHsKICAgICAgIGlmIChfX0JSWVRIT05fXy5DcnlwdG8gPT09IHVuZGVmaW5lZCB8fCAKICAgICAgICAgICBfX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLk1ENSA9PT0gdW5kZWZpbmVkKSAkZ2V0X0NyeXB0b0pTX2xpYignbWQ1JykKICAgICAgIHRoaXMuaGFzaCA9IF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uTUQ1LmNyZWF0ZSgpCiAgICB9IGVsc2UgaWYgKGFsZyA9PSAnc2hhMScpIHsKICAgICAgIGlmIChfX0JSWVRIT05fXy5DcnlwdG8gPT09IHVuZGVmaW5lZCB8fCAKICAgICAgICAgICBfX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTEgPT09IHVuZGVmaW5lZCkgJGdldF9DcnlwdG9KU19saWIoJ3NoYTEnKQogICAgICAgdGhpcy5oYXNoID0gX19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEExLmNyZWF0ZSgpCiAgICB9IGVsc2UgaWYgKGFsZyA9PSAnc2hhMjI0JykgewogICAgICAgaWYgKF9fQlJZVEhPTl9fLkNyeXB0byA9PT0gdW5kZWZpbmVkIHx8IAogICAgICAgICAgIF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBMjI0ID09PSB1bmRlZmluZWQpICRnZXRfQ3J5cHRvSlNfbGliKCdzaGEyMjQnKQogICAgICAgdGhpcy5oYXNoID0gX19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEEyMjQuY3JlYXRlKCkKICAgIH0gZWxzZSBpZiAoYWxnID09ICdzaGEyNTYnKSB7CiAgICAgICBpZiAoX19CUllUSE9OX18uQ3J5cHRvID09PSB1bmRlZmluZWQgfHwgCiAgICAgICAgICAgX19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEEyNTYgPT09IHVuZGVmaW5lZCkgJGdldF9DcnlwdG9KU19saWIoJ3NoYTI1NicpCiAgICAgICB0aGlzLmhhc2ggPSBfX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTI1Ni5jcmVhdGUoKQogICAgfSBlbHNlIGlmIChhbGcgPT0gJ3NoYTM4NCcpIHsKICAgICAgIGlmIChfX0JSWVRIT05fXy5DcnlwdG8gPT09IHVuZGVmaW5lZCB8fCAKICAgICAgICAgICBfX0JSWVRIT05fXy5DcnlwdG9KUy5hbGdvLlNIQTM4NCA9PT0gdW5kZWZpbmVkKSAkZ2V0X0NyeXB0b0pTX2xpYignc2hhMzg0JykKICAgICAgIHRoaXMuaGFzaCA9IF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBMzg0LmNyZWF0ZSgpCiAgICB9IGVsc2UgaWYgKGFsZyA9PSAnc2hhNTEyJykgewogICAgICAgaWYgKF9fQlJZVEhPTl9fLkNyeXB0byA9PT0gdW5kZWZpbmVkIHx8IAogICAgICAgICAgIF9fQlJZVEhPTl9fLkNyeXB0b0pTLmFsZ28uU0hBNTEyID09PSB1bmRlZmluZWQpICRnZXRfQ3J5cHRvSlNfbGliKCdzaGE1MTInKQogICAgICAgdGhpcy5oYXNoID0gX19CUllUSE9OX18uQ3J5cHRvSlMuYWxnby5TSEE1MTIuY3JlYXRlKCkKICAgIH0gZWxzZSB7CiAgICAgICAkcmFpc2UoJ0F0dHJpYnV0ZUVycm9yJywgJ0ludmFsaWQgaGFzaCBhbGdvcml0aG06JyArIGFsZykKICAgIH0KIAogICAgdGhpcy5fX2NsYXNzX18gPSAkdHlwZQogICAgdGhpcy5fX2dldGF0dHJfXyA9IGZ1bmN0aW9uKGF0dHIpe3JldHVybiAkZ2V0YXR0cih0aGlzLGF0dHIpfQogICAgdGhpcy5fX3N0cl9fID0gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZXhkaWdlc3QoKX0KICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24obXNnKXt0aGlzLmhhc2gudXBkYXRlKG1zZyl9CiAgICB0aGlzLmNvcHkgPSBmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc2guY2xvbmUoKX0KCiAgICB0aGlzLmhleGRpZ2VzdCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciB0ZW1wPXRoaXMuaGFzaC5jbG9uZSgpOwogICAgICAgIHRlbXA9dGVtcC5maW5hbGl6ZSgpOwogICAgICAgIHJldHVybiB0ZW1wLnRvU3RyaW5nKCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7Cn0KCiRtb2R1bGUuX19jbGFzc19fID0gJG1vZHVsZQokbW9kdWxlLl9fc3RyX18gPSBmdW5jdGlvbigpIHtyZXR1cm4gIjxtb2R1bGUgJ2hhc2hsaWInPiJ9Cg==',
'/libs/crypto_js/rollups/sha1.js':'LyoKQ3J5cHRvSlMgdjMuMS4yCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwp2YXIgQ3J5cHRvSlM9Q3J5cHRvSlN8fGZ1bmN0aW9uKGUsbSl7dmFyIHA9e30saj1wLmxpYj17fSxsPWZ1bmN0aW9uKCl7fSxmPWouQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKGEpe2wucHJvdG90eXBlPXRoaXM7dmFyIGM9bmV3IGw7YSYmYy5taXhJbihhKTtjLmhhc093blByb3BlcnR5KCJpbml0Iil8fChjLmluaXQ9ZnVuY3Rpb24oKXtjLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2MuaW5pdC5wcm90b3R5cGU9YztjLiRzdXBlcj10aGlzO3JldHVybiBjfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dGVuZCgpO2EuaW5pdC5hcHBseShhLGFyZ3VtZW50cyk7cmV0dXJuIGF9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJih0aGlzW2NdPWFbY10pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LApuPWouV29yZEFycmF5PWYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGEsYyl7YT10aGlzLndvcmRzPWF8fFtdO3RoaXMuc2lnQnl0ZXM9YyE9bT9jOjQqYS5sZW5ndGh9LHRvU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybihhfHxoKS5zdHJpbmdpZnkodGhpcyl9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLndvcmRzLHE9YS53b3JkcyxkPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihkJTQpZm9yKHZhciBiPTA7YjxhO2IrKyljW2QrYj4+PjJdfD0ocVtiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NSk8PDI0LTgqKChkK2IpJTQpO2Vsc2UgaWYoNjU1MzU8cS5sZW5ndGgpZm9yKGI9MDtiPGE7Yis9NCljW2QrYj4+PjJdPXFbYj4+PjJdO2Vsc2UgYy5wdXNoLmFwcGx5KGMscSk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLndvcmRzLGM9dGhpcy5zaWdCeXRlczthW2M+Pj4yXSY9NDI5NDk2NzI5NTw8CjMyLTgqKGMlNCk7YS5sZW5ndGg9ZS5jZWlsKGMvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Zi5jbG9uZS5jYWxsKHRoaXMpO2Eud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKTtyZXR1cm4gYX0scmFuZG9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1bXSxiPTA7YjxhO2IrPTQpYy5wdXNoKDQyOTQ5NjcyOTYqZS5yYW5kb20oKXwwKTtyZXR1cm4gbmV3IG4uaW5pdChjLGEpfX0pLGI9cC5lbmM9e30saD1iLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgYj1bXSxkPTA7ZDxhO2QrKyl7dmFyIGY9Y1tkPj4+Ml0+Pj4yNC04KihkJTQpJjI1NTtiLnB1c2goKGY+Pj40KS50b1N0cmluZygxNikpO2IucHVzaCgoZiYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gYi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPWEubGVuZ3RoLGI9W10sZD0wO2Q8YztkKz0yKWJbZD4+PjNdfD1wYXJzZUludChhLnN1YnN0cihkLAoyKSwxNik8PDI0LTQqKGQlOCk7cmV0dXJuIG5ldyBuLmluaXQoYixjLzIpfX0sZz1iLkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgYj1bXSxkPTA7ZDxhO2QrKyliLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShjW2Q+Pj4yXT4+PjI0LTgqKGQlNCkmMjU1KSk7cmV0dXJuIGIuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1hLmxlbmd0aCxiPVtdLGQ9MDtkPGM7ZCsrKWJbZD4+PjJdfD0oYS5jaGFyQ29kZUF0KGQpJjI1NSk8PDI0LTgqKGQlNCk7cmV0dXJuIG5ldyBuLmluaXQoYixjKX19LHI9Yi5VdGY4PXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGcuc3RyaW5naWZ5KGEpKSl9Y2F0Y2goYyl7dGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIik7fX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGcucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKSl9fSwKaz1qLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09Zi5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgbi5pbml0O3RoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPXIucGFyc2UoYSkpO3RoaXMuX2RhdGEuY29uY2F0KGEpO3RoaXMuX25EYXRhQnl0ZXMrPWEuc2lnQnl0ZXN9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuX2RhdGEsYj1jLndvcmRzLGQ9Yy5zaWdCeXRlcyxmPXRoaXMuYmxvY2tTaXplLGg9ZC8oNCpmKSxoPWE/ZS5jZWlsKGgpOmUubWF4KChofDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1oKmY7ZD1lLm1pbig0KmEsZCk7aWYoYSl7Zm9yKHZhciBnPTA7ZzxhO2crPWYpdGhpcy5fZG9Qcm9jZXNzQmxvY2soYixnKTtnPWIuc3BsaWNlKDAsYSk7Yy5zaWdCeXRlcy09ZH1yZXR1cm4gbmV3IG4uaW5pdChnLGQpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKTsKYS5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCk7cmV0dXJuIGF9LF9taW5CdWZmZXJTaXplOjB9KTtqLkhhc2hlcj1rLmV4dGVuZCh7Y2ZnOmYuZXh0ZW5kKCksaW5pdDpmdW5jdGlvbihhKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQoYSk7dGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe2sucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbihhKXthJiZ0aGlzLl9hcHBlbmQoYSk7cmV0dXJuIHRoaXMuX2RvRmluYWxpemUoKX0sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsYil7cmV0dXJuKG5ldyBhLmluaXQoYikpLmZpbmFsaXplKGMpfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsZil7cmV0dXJuKG5ldyBzLkhNQUMuaW5pdChhLApmKSkuZmluYWxpemUoYil9fX0pO3ZhciBzPXAuYWxnbz17fTtyZXR1cm4gcH0oTWF0aCk7CihmdW5jdGlvbigpe3ZhciBlPUNyeXB0b0pTLG09ZS5saWIscD1tLldvcmRBcnJheSxqPW0uSGFzaGVyLGw9W10sbT1lLmFsZ28uU0hBMT1qLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBwLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OCwzMjg1Mzc3NTIwXSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihmLG4pe2Zvcih2YXIgYj10aGlzLl9oYXNoLndvcmRzLGg9YlswXSxnPWJbMV0sZT1iWzJdLGs9YlszXSxqPWJbNF0sYT0wOzgwPmE7YSsrKXtpZigxNj5hKWxbYV09ZltuK2FdfDA7ZWxzZXt2YXIgYz1sW2EtM11ebFthLThdXmxbYS0xNF1ebFthLTE2XTtsW2FdPWM8PDF8Yz4+PjMxfWM9KGg8PDV8aD4+PjI3KStqK2xbYV07Yz0yMD5hP2MrKChnJmV8fmcmaykrMTUxODUwMDI0OSk6NDA+YT9jKygoZ15lXmspKzE4NTk3NzUzOTMpOjYwPmE/YysoKGcmZXxnJmt8ZSZrKS0xODk0MDA3NTg4KTpjKygoZ15lXgprKS04OTk0OTc1MTQpO2o9aztrPWU7ZT1nPDwzMHxnPj4+MjtnPWg7aD1jfWJbMF09YlswXStofDA7YlsxXT1iWzFdK2d8MDtiWzJdPWJbMl0rZXwwO2JbM109YlszXStrfDA7Yls0XT1iWzRdK2p8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZj10aGlzLl9kYXRhLGU9Zi53b3JkcyxiPTgqdGhpcy5fbkRhdGFCeXRlcyxoPTgqZi5zaWdCeXRlcztlW2g+Pj41XXw9MTI4PDwyNC1oJTMyO2VbKGgrNjQ+Pj45PDw0KSsxNF09TWF0aC5mbG9vcihiLzQyOTQ5NjcyOTYpO2VbKGgrNjQ+Pj45PDw0KSsxNV09YjtmLnNpZ0J5dGVzPTQqZS5sZW5ndGg7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPWouY2xvbmUuY2FsbCh0aGlzKTtlLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKTtyZXR1cm4gZX19KTtlLlNIQTE9ai5fY3JlYXRlSGVscGVyKG0pO2UuSG1hY1NIQTE9ai5fY3JlYXRlSG1hY0hlbHBlcihtKX0pKCk7Cg==',
'/libs/crypto_js/rollups/sha3.js':'LyoKQ3J5cHRvSlMgdjMuMS4yCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwp2YXIgQ3J5cHRvSlM9Q3J5cHRvSlN8fGZ1bmN0aW9uKHYscCl7dmFyIGQ9e30sdT1kLmxpYj17fSxyPWZ1bmN0aW9uKCl7fSxmPXUuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKGEpe3IucHJvdG90eXBlPXRoaXM7dmFyIGI9bmV3IHI7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2IuaW5pdC5wcm90b3R5cGU9YjtiLiRzdXBlcj10aGlzO3JldHVybiBifSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dGVuZCgpO2EuaW5pdC5hcHBseShhLGFyZ3VtZW50cyk7cmV0dXJuIGF9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LApzPXUuV29yZEFycmF5PWYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGEsYil7YT10aGlzLndvcmRzPWF8fFtdO3RoaXMuc2lnQnl0ZXM9YiE9cD9iOjQqYS5sZW5ndGh9LHRvU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybihhfHx5KS5zdHJpbmdpZnkodGhpcyl9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGM9YS53b3JkcyxqPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihqJTQpZm9yKHZhciBuPTA7bjxhO24rKyliW2orbj4+PjJdfD0oY1tuPj4+Ml0+Pj4yNC04KihuJTQpJjI1NSk8PDI0LTgqKChqK24pJTQpO2Vsc2UgaWYoNjU1MzU8Yy5sZW5ndGgpZm9yKG49MDtuPGE7bis9NCliW2orbj4+PjJdPWNbbj4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsYyk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLndvcmRzLGI9dGhpcy5zaWdCeXRlczthW2I+Pj4yXSY9NDI5NDk2NzI5NTw8CjMyLTgqKGIlNCk7YS5sZW5ndGg9di5jZWlsKGIvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Zi5jbG9uZS5jYWxsKHRoaXMpO2Eud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKTtyZXR1cm4gYX0scmFuZG9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTA7YzxhO2MrPTQpYi5wdXNoKDQyOTQ5NjcyOTYqdi5yYW5kb20oKXwwKTtyZXR1cm4gbmV3IHMuaW5pdChiLGEpfX0pLHg9ZC5lbmM9e30seT14LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgYz1bXSxqPTA7ajxhO2orKyl7dmFyIG49YltqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NTtjLnB1c2goKG4+Pj40KS50b1N0cmluZygxNikpO2MucHVzaCgobiYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gYy5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGM9W10saj0wO2o8YjtqKz0yKWNbaj4+PjNdfD1wYXJzZUludChhLnN1YnN0cihqLAoyKSwxNik8PDI0LTQqKGolOCk7cmV0dXJuIG5ldyBzLmluaXQoYyxiLzIpfX0sZT14LkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgYz1bXSxqPTA7ajxhO2orKyljLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShiW2o+Pj4yXT4+PjI0LTgqKGolNCkmMjU1KSk7cmV0dXJuIGMuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPVtdLGo9MDtqPGI7aisrKWNbaj4+PjJdfD0oYS5jaGFyQ29kZUF0KGopJjI1NSk8PDI0LTgqKGolNCk7cmV0dXJuIG5ldyBzLmluaXQoYyxiKX19LHE9eC5VdGY4PXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGUuc3RyaW5naWZ5KGEpKSl9Y2F0Y2goYil7dGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIik7fX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGUucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKSl9fSwKdD11LkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09Zi5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgcy5pbml0O3RoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPXEucGFyc2UoYSkpO3RoaXMuX2RhdGEuY29uY2F0KGEpO3RoaXMuX25EYXRhQnl0ZXMrPWEuc2lnQnl0ZXN9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2RhdGEsYz1iLndvcmRzLGo9Yi5zaWdCeXRlcyxuPXRoaXMuYmxvY2tTaXplLGU9ai8oNCpuKSxlPWE/di5jZWlsKGUpOnYubWF4KChlfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1lKm47aj12Lm1pbig0KmEsaik7aWYoYSl7Zm9yKHZhciBmPTA7ZjxhO2YrPW4pdGhpcy5fZG9Qcm9jZXNzQmxvY2soYyxmKTtmPWMuc3BsaWNlKDAsYSk7Yi5zaWdCeXRlcy09an1yZXR1cm4gbmV3IHMuaW5pdChmLGopfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWYuY2xvbmUuY2FsbCh0aGlzKTsKYS5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCk7cmV0dXJuIGF9LF9taW5CdWZmZXJTaXplOjB9KTt1Lkhhc2hlcj10LmV4dGVuZCh7Y2ZnOmYuZXh0ZW5kKCksaW5pdDpmdW5jdGlvbihhKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQoYSk7dGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3QucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbihhKXthJiZ0aGlzLl9hcHBlbmQoYSk7cmV0dXJuIHRoaXMuX2RvRmluYWxpemUoKX0sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7cmV0dXJuKG5ldyBhLmluaXQoYykpLmZpbmFsaXplKGIpfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7cmV0dXJuKG5ldyB3LkhNQUMuaW5pdChhLApjKSkuZmluYWxpemUoYil9fX0pO3ZhciB3PWQuYWxnbz17fTtyZXR1cm4gZH0oTWF0aCk7CihmdW5jdGlvbih2KXt2YXIgcD1DcnlwdG9KUyxkPXAubGliLHU9ZC5CYXNlLHI9ZC5Xb3JkQXJyYXkscD1wLng2ND17fTtwLldvcmQ9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZixzKXt0aGlzLmhpZ2g9Zjt0aGlzLmxvdz1zfX0pO3AuV29yZEFycmF5PXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGYscyl7Zj10aGlzLndvcmRzPWZ8fFtdO3RoaXMuc2lnQnl0ZXM9cyE9dj9zOjgqZi5sZW5ndGh9LHRvWDMyOmZ1bmN0aW9uKCl7Zm9yKHZhciBmPXRoaXMud29yZHMscz1mLmxlbmd0aCxkPVtdLHA9MDtwPHM7cCsrKXt2YXIgZT1mW3BdO2QucHVzaChlLmhpZ2gpO2QucHVzaChlLmxvdyl9cmV0dXJuIHIuY3JlYXRlKGQsdGhpcy5zaWdCeXRlcyl9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBmPXUuY2xvbmUuY2FsbCh0aGlzKSxkPWYud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxwPWQubGVuZ3RoLHI9MDtyPHA7cisrKWRbcl09ZFtyXS5jbG9uZSgpO3JldHVybiBmfX0pfSkoKTsKKGZ1bmN0aW9uKHYpe2Zvcih2YXIgcD1DcnlwdG9KUyxkPXAubGliLHU9ZC5Xb3JkQXJyYXkscj1kLkhhc2hlcixmPXAueDY0LldvcmQsZD1wLmFsZ28scz1bXSx4PVtdLHk9W10sZT0xLHE9MCx0PTA7MjQ+dDt0Kyspe3NbZSs1KnFdPSh0KzEpKih0KzIpLzIlNjQ7dmFyIHc9KDIqZSszKnEpJTUsZT1xJTUscT13fWZvcihlPTA7NT5lO2UrKylmb3IocT0wOzU+cTtxKyspeFtlKzUqcV09cSs1KigoMiplKzMqcSklNSk7ZT0xO2ZvcihxPTA7MjQ+cTtxKyspe2Zvcih2YXIgYT13PXQ9MDs3PmE7YSsrKXtpZihlJjEpe3ZhciBiPSgxPDxhKS0xOzMyPmI/d149MTw8Yjp0Xj0xPDxiLTMyfWU9ZSYxMjg/ZTw8MV4xMTM6ZTw8MX15W3FdPWYuY3JlYXRlKHQsdyl9Zm9yKHZhciBjPVtdLGU9MDsyNT5lO2UrKyljW2VdPWYuY3JlYXRlKCk7ZD1kLlNIQTM9ci5leHRlbmQoe2NmZzpyLmNmZy5leHRlbmQoe291dHB1dExlbmd0aDo1MTJ9KSxfZG9SZXNldDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLl9zdGF0ZT0KW10sYj0wOzI1PmI7YisrKWFbYl09bmV3IGYuaW5pdDt0aGlzLmJsb2NrU2l6ZT0oMTYwMC0yKnRoaXMuY2ZnLm91dHB1dExlbmd0aCkvMzJ9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZT10aGlzLl9zdGF0ZSxmPXRoaXMuYmxvY2tTaXplLzIsaD0wO2g8ZjtoKyspe3ZhciBsPWFbYisyKmhdLG09YVtiKzIqaCsxXSxsPShsPDw4fGw+Pj4yNCkmMTY3MTE5MzV8KGw8PDI0fGw+Pj44KSY0Mjc4MjU1MzYwLG09KG08PDh8bT4+PjI0KSYxNjcxMTkzNXwobTw8MjR8bT4+PjgpJjQyNzgyNTUzNjAsZz1lW2hdO2cuaGlnaF49bTtnLmxvd149bH1mb3IoZj0wOzI0PmY7ZisrKXtmb3IoaD0wOzU+aDtoKyspe2Zvcih2YXIgZD1sPTAsaz0wOzU+aztrKyspZz1lW2grNSprXSxsXj1nLmhpZ2gsZF49Zy5sb3c7Zz1jW2hdO2cuaGlnaD1sO2cubG93PWR9Zm9yKGg9MDs1Pmg7aCsrKXtnPWNbKGgrNCklNV07bD1jWyhoKzEpJTVdO209bC5oaWdoO2s9bC5sb3c7bD1nLmhpZ2heCihtPDwxfGs+Pj4zMSk7ZD1nLmxvd14oazw8MXxtPj4+MzEpO2ZvcihrPTA7NT5rO2srKylnPWVbaCs1KmtdLGcuaGlnaF49bCxnLmxvd149ZH1mb3IobT0xOzI1Pm07bSsrKWc9ZVttXSxoPWcuaGlnaCxnPWcubG93LGs9c1ttXSwzMj5rPyhsPWg8PGt8Zz4+PjMyLWssZD1nPDxrfGg+Pj4zMi1rKToobD1nPDxrLTMyfGg+Pj42NC1rLGQ9aDw8ay0zMnxnPj4+NjQtayksZz1jW3hbbV1dLGcuaGlnaD1sLGcubG93PWQ7Zz1jWzBdO2g9ZVswXTtnLmhpZ2g9aC5oaWdoO2cubG93PWgubG93O2ZvcihoPTA7NT5oO2grKylmb3Ioaz0wOzU+aztrKyspbT1oKzUqayxnPWVbbV0sbD1jW21dLG09Y1soaCsxKSU1KzUqa10sZD1jWyhoKzIpJTUrNSprXSxnLmhpZ2g9bC5oaWdoXn5tLmhpZ2gmZC5oaWdoLGcubG93PWwubG93Xn5tLmxvdyZkLmxvdztnPWVbMF07aD15W2ZdO2cuaGlnaF49aC5oaWdoO2cubG93Xj1oLmxvd319LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSwKYj1hLndvcmRzLGM9OCphLnNpZ0J5dGVzLGU9MzIqdGhpcy5ibG9ja1NpemU7YltjPj4+NV18PTE8PDI0LWMlMzI7Ylsodi5jZWlsKChjKzEpL2UpKmU+Pj41KS0xXXw9MTI4O2Euc2lnQnl0ZXM9NCpiLmxlbmd0aDt0aGlzLl9wcm9jZXNzKCk7Zm9yKHZhciBhPXRoaXMuX3N0YXRlLGI9dGhpcy5jZmcub3V0cHV0TGVuZ3RoLzgsYz1iLzgsZT1bXSxoPTA7aDxjO2grKyl7dmFyIGQ9YVtoXSxmPWQuaGlnaCxkPWQubG93LGY9KGY8PDh8Zj4+PjI0KSYxNjcxMTkzNXwoZjw8MjR8Zj4+PjgpJjQyNzgyNTUzNjAsZD0oZDw8OHxkPj4+MjQpJjE2NzExOTM1fChkPDwyNHxkPj4+OCkmNDI3ODI1NTM2MDtlLnB1c2goZCk7ZS5wdXNoKGYpfXJldHVybiBuZXcgdS5pbml0KGUsYil9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXIuY2xvbmUuY2FsbCh0aGlzKSxiPWEuX3N0YXRlPXRoaXMuX3N0YXRlLnNsaWNlKDApLGM9MDsyNT5jO2MrKyliW2NdPWJbY10uY2xvbmUoKTtyZXR1cm4gYX19KTsKcC5TSEEzPXIuX2NyZWF0ZUhlbHBlcihkKTtwLkhtYWNTSEEzPXIuX2NyZWF0ZUhtYWNIZWxwZXIoZCl9KShNYXRoKTsK',
'/libs/crypto_js/rollups/sha224.js':'LyoKQ3J5cHRvSlMgdjMuMS4yCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwp2YXIgQ3J5cHRvSlM9Q3J5cHRvSlN8fGZ1bmN0aW9uKGcsbCl7dmFyIGY9e30saz1mLmxpYj17fSxoPWZ1bmN0aW9uKCl7fSxtPWsuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKGEpe2gucHJvdG90eXBlPXRoaXM7dmFyIGM9bmV3IGg7YSYmYy5taXhJbihhKTtjLmhhc093blByb3BlcnR5KCJpbml0Iil8fChjLmluaXQ9ZnVuY3Rpb24oKXtjLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2MuaW5pdC5wcm90b3R5cGU9YztjLiRzdXBlcj10aGlzO3JldHVybiBjfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dGVuZCgpO2EuaW5pdC5hcHBseShhLGFyZ3VtZW50cyk7cmV0dXJuIGF9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJih0aGlzW2NdPWFbY10pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LApxPWsuV29yZEFycmF5PW0uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGEsYyl7YT10aGlzLndvcmRzPWF8fFtdO3RoaXMuc2lnQnl0ZXM9YyE9bD9jOjQqYS5sZW5ndGh9LHRvU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybihhfHxzKS5zdHJpbmdpZnkodGhpcyl9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLndvcmRzLGQ9YS53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihiJTQpZm9yKHZhciBlPTA7ZTxhO2UrKyljW2IrZT4+PjJdfD0oZFtlPj4+Ml0+Pj4yNC04KihlJTQpJjI1NSk8PDI0LTgqKChiK2UpJTQpO2Vsc2UgaWYoNjU1MzU8ZC5sZW5ndGgpZm9yKGU9MDtlPGE7ZSs9NCljW2IrZT4+PjJdPWRbZT4+PjJdO2Vsc2UgYy5wdXNoLmFwcGx5KGMsZCk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLndvcmRzLGM9dGhpcy5zaWdCeXRlczthW2M+Pj4yXSY9NDI5NDk2NzI5NTw8CjMyLTgqKGMlNCk7YS5sZW5ndGg9Zy5jZWlsKGMvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bS5jbG9uZS5jYWxsKHRoaXMpO2Eud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKTtyZXR1cm4gYX0scmFuZG9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhO2QrPTQpYy5wdXNoKDQyOTQ5NjcyOTYqZy5yYW5kb20oKXwwKTtyZXR1cm4gbmV3IHEuaW5pdChjLGEpfX0pLHQ9Zi5lbmM9e30scz10LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxiPTA7YjxhO2IrKyl7dmFyIGU9Y1tiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NTtkLnB1c2goKGU+Pj40KS50b1N0cmluZygxNikpO2QucHVzaCgoZSYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gZC5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPWEubGVuZ3RoLGQ9W10sYj0wO2I8YztiKz0yKWRbYj4+PjNdfD1wYXJzZUludChhLnN1YnN0cihiLAoyKSwxNik8PDI0LTQqKGIlOCk7cmV0dXJuIG5ldyBxLmluaXQoZCxjLzIpfX0sbj10LkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxiPTA7YjxhO2IrKylkLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShjW2I+Pj4yXT4+PjI0LTgqKGIlNCkmMjU1KSk7cmV0dXJuIGQuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1hLmxlbmd0aCxkPVtdLGI9MDtiPGM7YisrKWRbYj4+PjJdfD0oYS5jaGFyQ29kZUF0KGIpJjI1NSk8PDI0LTgqKGIlNCk7cmV0dXJuIG5ldyBxLmluaXQoZCxjKX19LGo9dC5VdGY4PXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKG4uc3RyaW5naWZ5KGEpKSl9Y2F0Y2goYyl7dGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIik7fX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKSl9fSwKdz1rLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09bS5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgcS5pbml0O3RoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPWoucGFyc2UoYSkpO3RoaXMuX2RhdGEuY29uY2F0KGEpO3RoaXMuX25EYXRhQnl0ZXMrPWEuc2lnQnl0ZXN9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuX2RhdGEsZD1jLndvcmRzLGI9Yy5zaWdCeXRlcyxlPXRoaXMuYmxvY2tTaXplLGY9Yi8oNCplKSxmPWE/Zy5jZWlsKGYpOmcubWF4KChmfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1mKmU7Yj1nLm1pbig0KmEsYik7aWYoYSl7Zm9yKHZhciB1PTA7dTxhO3UrPWUpdGhpcy5fZG9Qcm9jZXNzQmxvY2soZCx1KTt1PWQuc3BsaWNlKDAsYSk7Yy5zaWdCeXRlcy09Yn1yZXR1cm4gbmV3IHEuaW5pdCh1LGIpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW0uY2xvbmUuY2FsbCh0aGlzKTsKYS5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCk7cmV0dXJuIGF9LF9taW5CdWZmZXJTaXplOjB9KTtrLkhhc2hlcj13LmV4dGVuZCh7Y2ZnOm0uZXh0ZW5kKCksaW5pdDpmdW5jdGlvbihhKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQoYSk7dGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3cucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbihhKXthJiZ0aGlzLl9hcHBlbmQoYSk7cmV0dXJuIHRoaXMuX2RvRmluYWxpemUoKX0sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7cmV0dXJuKG5ldyBhLmluaXQoZCkpLmZpbmFsaXplKGMpfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7cmV0dXJuKG5ldyB2LkhNQUMuaW5pdChhLApkKSkuZmluYWxpemUoYyl9fX0pO3ZhciB2PWYuYWxnbz17fTtyZXR1cm4gZn0oTWF0aCk7CihmdW5jdGlvbihnKXtmb3IodmFyIGw9Q3J5cHRvSlMsZj1sLmxpYixrPWYuV29yZEFycmF5LGg9Zi5IYXNoZXIsZj1sLmFsZ28sbT1bXSxxPVtdLHQ9ZnVuY3Rpb24oYSl7cmV0dXJuIDQyOTQ5NjcyOTYqKGEtKGF8MCkpfDB9LHM9MixuPTA7NjQ+bjspe3ZhciBqO2E6e2o9cztmb3IodmFyIHc9Zy5zcXJ0KGopLHY9Mjt2PD13O3YrKylpZighKGoldikpe2o9ITE7YnJlYWsgYX1qPSEwfWomJig4Pm4mJihtW25dPXQoZy5wb3cocywwLjUpKSkscVtuXT10KGcucG93KHMsMS8zKSksbisrKTtzKyt9dmFyIGE9W10sZj1mLlNIQTI1Nj1oLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBrLmluaXQobS5zbGljZSgwKSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj10aGlzLl9oYXNoLndvcmRzLGU9YlswXSxmPWJbMV0sZz1iWzJdLGs9YlszXSxoPWJbNF0sbD1iWzVdLG09Yls2XSxuPWJbN10scD0wOzY0PnA7cCsrKXtpZigxNj5wKWFbcF09CmNbZCtwXXwwO2Vsc2V7dmFyIGo9YVtwLTE1XSxyPWFbcC0yXTthW3BdPSgoajw8MjV8aj4+PjcpXihqPDwxNHxqPj4+MTgpXmo+Pj4zKSthW3AtN10rKChyPDwxNXxyPj4+MTcpXihyPDwxM3xyPj4+MTkpXnI+Pj4xMCkrYVtwLTE2XX1qPW4rKChoPDwyNnxoPj4+NileKGg8PDIxfGg+Pj4xMSleKGg8PDd8aD4+PjI1KSkrKGgmbF5+aCZtKStxW3BdK2FbcF07cj0oKGU8PDMwfGU+Pj4yKV4oZTw8MTl8ZT4+PjEzKV4oZTw8MTB8ZT4+PjIyKSkrKGUmZl5lJmdeZiZnKTtuPW07bT1sO2w9aDtoPWsranwwO2s9ZztnPWY7Zj1lO2U9aityfDB9YlswXT1iWzBdK2V8MDtiWzFdPWJbMV0rZnwwO2JbMl09YlsyXStnfDA7YlszXT1iWzNdK2t8MDtiWzRdPWJbNF0raHwwO2JbNV09Yls1XStsfDA7Yls2XT1iWzZdK218MDtiWzddPWJbN10rbnwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsZD1hLndvcmRzLGI9OCp0aGlzLl9uRGF0YUJ5dGVzLGU9OCphLnNpZ0J5dGVzOwpkW2U+Pj41XXw9MTI4PDwyNC1lJTMyO2RbKGUrNjQ+Pj45PDw0KSsxNF09Zy5mbG9vcihiLzQyOTQ5NjcyOTYpO2RbKGUrNjQ+Pj45PDw0KSsxNV09YjthLnNpZ0J5dGVzPTQqZC5sZW5ndGg7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPWguY2xvbmUuY2FsbCh0aGlzKTthLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKTtyZXR1cm4gYX19KTtsLlNIQTI1Nj1oLl9jcmVhdGVIZWxwZXIoZik7bC5IbWFjU0hBMjU2PWguX2NyZWF0ZUhtYWNIZWxwZXIoZil9KShNYXRoKTsKKGZ1bmN0aW9uKCl7dmFyIGc9Q3J5cHRvSlMsbD1nLmxpYi5Xb3JkQXJyYXksZj1nLmFsZ28saz1mLlNIQTI1NixmPWYuU0hBMjI0PWsuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGwuaW5pdChbMzIzODM3MTAzMiw5MTQxNTA2NjMsODEyNzAyOTk5LDQxNDQ5MTI2OTcsNDI5MDc3NTg1NywxNzUwNjAzMDI1LDE2OTQwNzY4MzksMzIwNDA3NTQyOF0pfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBmPWsuX2RvRmluYWxpemUuY2FsbCh0aGlzKTtmLnNpZ0J5dGVzLT00O3JldHVybiBmfX0pO2cuU0hBMjI0PWsuX2NyZWF0ZUhlbHBlcihmKTtnLkhtYWNTSEEyMjQ9ay5fY3JlYXRlSG1hY0hlbHBlcihmKX0pKCk7Cg==',
'/libs/crypto_js/rollups/sha512.js':'LyoKQ3J5cHRvSlMgdjMuMS4yCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwp2YXIgQ3J5cHRvSlM9Q3J5cHRvSlN8fGZ1bmN0aW9uKGEsbSl7dmFyIHI9e30sZj1yLmxpYj17fSxnPWZ1bmN0aW9uKCl7fSxsPWYuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKGEpe2cucHJvdG90eXBlPXRoaXM7dmFyIGI9bmV3IGc7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2IuaW5pdC5wcm90b3R5cGU9YjtiLiRzdXBlcj10aGlzO3JldHVybiBifSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dGVuZCgpO2EuaW5pdC5hcHBseShhLGFyZ3VtZW50cyk7cmV0dXJuIGF9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LApwPWYuV29yZEFycmF5PWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGEsYil7YT10aGlzLndvcmRzPWF8fFtdO3RoaXMuc2lnQnl0ZXM9YiE9bT9iOjQqYS5sZW5ndGh9LHRvU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybihhfHxxKS5zdHJpbmdpZnkodGhpcyl9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGQ9YS53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihjJTQpZm9yKHZhciBqPTA7ajxhO2orKyliW2Mraj4+PjJdfD0oZFtqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NSk8PDI0LTgqKChjK2opJTQpO2Vsc2UgaWYoNjU1MzU8ZC5sZW5ndGgpZm9yKGo9MDtqPGE7ais9NCliW2Mraj4+PjJdPWRbaj4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsZCk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLndvcmRzLGI9dGhpcy5zaWdCeXRlcztuW2I+Pj4yXSY9NDI5NDk2NzI5NTw8CjMyLTgqKGIlNCk7bi5sZW5ndGg9YS5jZWlsKGIvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bC5jbG9uZS5jYWxsKHRoaXMpO2Eud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKTtyZXR1cm4gYX0scmFuZG9tOmZ1bmN0aW9uKG4pe2Zvcih2YXIgYj1bXSxkPTA7ZDxuO2QrPTQpYi5wdXNoKDQyOTQ5NjcyOTYqYS5yYW5kb20oKXwwKTtyZXR1cm4gbmV3IHAuaW5pdChiLG4pfX0pLHk9ci5lbmM9e30scT15LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxjPTA7YzxhO2MrKyl7dmFyIGo9YltjPj4+Ml0+Pj4yNC04KihjJTQpJjI1NTtkLnB1c2goKGo+Pj40KS50b1N0cmluZygxNikpO2QucHVzaCgoaiYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gZC5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGQ9W10sYz0wO2M8YjtjKz0yKWRbYz4+PjNdfD1wYXJzZUludChhLnN1YnN0cihjLAoyKSwxNik8PDI0LTQqKGMlOCk7cmV0dXJuIG5ldyBwLmluaXQoZCxiLzIpfX0sRz15LkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxjPTA7YzxhO2MrKylkLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShiW2M+Pj4yXT4+PjI0LTgqKGMlNCkmMjU1KSk7cmV0dXJuIGQuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxkPVtdLGM9MDtjPGI7YysrKWRbYz4+PjJdfD0oYS5jaGFyQ29kZUF0KGMpJjI1NSk8PDI0LTgqKGMlNCk7cmV0dXJuIG5ldyBwLmluaXQoZCxiKX19LGZhPXkuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShHLnN0cmluZ2lmeShhKSkpfWNhdGNoKGIpe3Rocm93IEVycm9yKCJNYWxmb3JtZWQgVVRGLTggZGF0YSIpO319LHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybiBHLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhKSkpfX0sCmg9Zi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPWwuZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IHAuaW5pdDt0aGlzLl9uRGF0YUJ5dGVzPTB9LF9hcHBlbmQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1mYS5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlc30sX3Byb2Nlc3M6ZnVuY3Rpb24obil7dmFyIGI9dGhpcy5fZGF0YSxkPWIud29yZHMsYz1iLnNpZ0J5dGVzLGo9dGhpcy5ibG9ja1NpemUsbD1jLyg0KmopLGw9bj9hLmNlaWwobCk6YS5tYXgoKGx8MCktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKTtuPWwqajtjPWEubWluKDQqbixjKTtpZihuKXtmb3IodmFyIGg9MDtoPG47aCs9ail0aGlzLl9kb1Byb2Nlc3NCbG9jayhkLGgpO2g9ZC5zcGxpY2UoMCxuKTtiLnNpZ0J5dGVzLT1jfXJldHVybiBuZXcgcC5pbml0KGgsYyl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bC5jbG9uZS5jYWxsKHRoaXMpOwphLl9kYXRhPXRoaXMuX2RhdGEuY2xvbmUoKTtyZXR1cm4gYX0sX21pbkJ1ZmZlclNpemU6MH0pO2YuSGFzaGVyPWguZXh0ZW5kKHtjZmc6bC5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7aC5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKGEpe3RoaXMuX2FwcGVuZChhKTt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpfSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixkKXtyZXR1cm4obmV3IGEuaW5pdChkKSkuZmluYWxpemUoYil9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixkKXtyZXR1cm4obmV3IGdhLkhNQUMuaW5pdChhLApkKSkuZmluYWxpemUoYil9fX0pO3ZhciBnYT1yLmFsZ289e307cmV0dXJuIHJ9KE1hdGgpOwooZnVuY3Rpb24oYSl7dmFyIG09Q3J5cHRvSlMscj1tLmxpYixmPXIuQmFzZSxnPXIuV29yZEFycmF5LG09bS54NjQ9e307bS5Xb3JkPWYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGEscCl7dGhpcy5oaWdoPWE7dGhpcy5sb3c9cH19KTttLldvcmRBcnJheT1mLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihsLHApe2w9dGhpcy53b3Jkcz1sfHxbXTt0aGlzLnNpZ0J5dGVzPXAhPWE/cDo4KmwubGVuZ3RofSx0b1gzMjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLndvcmRzLHA9YS5sZW5ndGgsZj1bXSxxPTA7cTxwO3ErKyl7dmFyIEc9YVtxXTtmLnB1c2goRy5oaWdoKTtmLnB1c2goRy5sb3cpfXJldHVybiBnLmNyZWF0ZShmLHRoaXMuc2lnQnl0ZXMpfSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1mLmNsb25lLmNhbGwodGhpcykscD1hLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCksZz1wLmxlbmd0aCxxPTA7cTxnO3ErKylwW3FdPXBbcV0uY2xvbmUoKTtyZXR1cm4gYX19KX0pKCk7CihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gZy5jcmVhdGUuYXBwbHkoZyxhcmd1bWVudHMpfWZvcih2YXIgbT1DcnlwdG9KUyxyPW0ubGliLkhhc2hlcixmPW0ueDY0LGc9Zi5Xb3JkLGw9Zi5Xb3JkQXJyYXksZj1tLmFsZ28scD1bYSgxMTE2MzUyNDA4LDM2MDk3Njc0NTgpLGEoMTg5OTQ0NzQ0MSw2MDI4OTE3MjUpLGEoMzA0OTMyMzQ3MSwzOTY0NDg0Mzk5KSxhKDM5MjEwMDk1NzMsMjE3MzI5NTU0OCksYSg5NjE5ODcxNjMsNDA4MTYyODQ3MiksYSgxNTA4OTcwOTkzLDMwNTM4MzQyNjUpLGEoMjQ1MzYzNTc0OCwyOTM3NjcxNTc5KSxhKDI4NzA3NjMyMjEsMzY2NDYwOTU2MCksYSgzNjI0MzgxMDgwLDI3MzQ4ODMzOTQpLGEoMzEwNTk4NDAxLDExNjQ5OTY1NDIpLGEoNjA3MjI1Mjc4LDEzMjM2MTA3NjQpLGEoMTQyNjg4MTk4NywzNTkwMzA0OTk0KSxhKDE5MjUwNzgzODgsNDA2ODE4MjM4MyksYSgyMTYyMDc4MjA2LDk5MTMzNjExMyksYSgyNjE0ODg4MTAzLDYzMzgwMzMxNyksCmEoMzI0ODIyMjU4MCwzNDc5Nzc0ODY4KSxhKDM4MzUzOTA0MDEsMjY2NjYxMzQ1OCksYSg0MDIyMjI0Nzc0LDk0NDcxMTEzOSksYSgyNjQzNDcwNzgsMjM0MTI2Mjc3MyksYSg2MDQ4MDc2MjgsMjAwNzgwMDkzMyksYSg3NzAyNTU5ODMsMTQ5NTk5MDkwMSksYSgxMjQ5MTUwMTIyLDE4NTY0MzEyMzUpLGEoMTU1NTA4MTY5MiwzMTc1MjE4MTMyKSxhKDE5OTYwNjQ5ODYsMjE5ODk1MDgzNyksYSgyNTU0MjIwODgyLDM5OTk3MTkzMzkpLGEoMjgyMTgzNDM0OSw3NjY3ODQwMTYpLGEoMjk1Mjk5NjgwOCwyNTY2NTk0ODc5KSxhKDMyMTAzMTM2NzEsMzIwMzMzNzk1NiksYSgzMzM2NTcxODkxLDEwMzQ0NTcwMjYpLGEoMzU4NDUyODcxMSwyNDY2OTQ4OTAxKSxhKDExMzkyNjk5MywzNzU4MzI2MzgzKSxhKDMzODI0MTg5NSwxNjg3MTc5MzYpLGEoNjY2MzA3MjA1LDExODgxNzk5NjQpLGEoNzczNTI5OTEyLDE1NDYwNDU3MzQpLGEoMTI5NDc1NzM3MiwxNTIyODA1NDg1KSxhKDEzOTYxODIyOTEsCjI2NDM4MzM4MjMpLGEoMTY5NTE4MzcwMCwyMzQzNTI3MzkwKSxhKDE5ODY2NjEwNTEsMTAxNDQ3NzQ4MCksYSgyMTc3MDI2MzUwLDEyMDY3NTkxNDIpLGEoMjQ1Njk1NjAzNywzNDQwNzc2MjcpLGEoMjczMDQ4NTkyMSwxMjkwODYzNDYwKSxhKDI4MjAzMDI0MTEsMzE1ODQ1NDI3MyksYSgzMjU5NzMwODAwLDM1MDU5NTI2NTcpLGEoMzM0NTc2NDc3MSwxMDYyMTcwMDgpLGEoMzUxNjA2NTgxNywzNjA2MDA4MzQ0KSxhKDM2MDAzNTI4MDQsMTQzMjcyNTc3NiksYSg0MDk0NTcxOTA5LDE0NjcwMzE1OTQpLGEoMjc1NDIzMzQ0LDg1MTE2OTcyMCksYSg0MzAyMjc3MzQsMzEwMDgyMzc1MiksYSg1MDY5NDg2MTYsMTM2MzI1ODE5NSksYSg2NTkwNjA1NTYsMzc1MDY4NTU5MyksYSg4ODM5OTc4NzcsMzc4NTA1MDI4MCksYSg5NTgxMzk1NzEsMzMxODMwNzQyNyksYSgxMzIyODIyMjE4LDM4MTI3MjM0MDMpLGEoMTUzNzAwMjA2MywyMDAzMDM0OTk1KSxhKDE3NDc4NzM3NzksMzYwMjAzNjg5OSksCmEoMTk1NTU2MjIyMiwxNTc1OTkwMDEyKSxhKDIwMjQxMDQ4MTUsMTEyNTU5MjkyOCksYSgyMjI3NzMwNDUyLDI3MTY5MDQzMDYpLGEoMjM2MTg1MjQyNCw0NDI3NzYwNDQpLGEoMjQyODQzNjQ3NCw1OTM2OTgzNDQpLGEoMjc1NjczNDE4NywzNzMzMTEwMjQ5KSxhKDMyMDQwMzE0NzksMjk5OTM1MTU3MyksYSgzMzI5MzI1Mjk4LDM4MTU5MjA0MjcpLGEoMzM5MTU2OTYxNCwzOTI4MzgzOTAwKSxhKDM1MTUyNjcyNzEsNTY2MjgwNzExKSxhKDM5NDAxODc2MDYsMzQ1NDA2OTUzNCksYSg0MTE4NjMwMjcxLDQwMDAyMzk5OTIpLGEoMTE2NDE4NDc0LDE5MTQxMzg1NTQpLGEoMTc0MjkyNDIxLDI3MzEwNTUyNzApLGEoMjg5MzgwMzU2LDMyMDM5OTMwMDYpLGEoNDYwMzkzMjY5LDMyMDYyMDMxNSksYSg2ODU0NzE3MzMsNTg3NDk2ODM2KSxhKDg1MjE0Mjk3MSwxMDg2NzkyODUxKSxhKDEwMTcwMzYyOTgsMzY1NTQzMTAwKSxhKDExMjYwMDA1ODAsMjYxODI5NzY3NiksYSgxMjg4MDMzNDcwLAozNDA5ODU1MTU4KSxhKDE1MDE1MDU5NDgsNDIzNDUwOTg2NiksYSgxNjA3MTY3OTE1LDk4NzE2NzQ2OCksYSgxODE2NDAyMzE2LDEyNDYxODk1OTEpXSx5PVtdLHE9MDs4MD5xO3ErKyl5W3FdPWEoKTtmPWYuU0hBNTEyPXIuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGwuaW5pdChbbmV3IGcuaW5pdCgxNzc5MDMzNzAzLDQwODkyMzU3MjApLG5ldyBnLmluaXQoMzE0NDEzNDI3NywyMjI3ODczNTk1KSxuZXcgZy5pbml0KDEwMTM5MDQyNDIsNDI3MTE3NTcyMyksbmV3IGcuaW5pdCgyNzczNDgwNzYyLDE1OTU3NTAxMjkpLG5ldyBnLmluaXQoMTM1OTg5MzExOSwyOTE3NTY1MTM3KSxuZXcgZy5pbml0KDI2MDA4MjI5MjQsNzI1NTExMTk5KSxuZXcgZy5pbml0KDUyODczNDYzNSw0MjE1Mzg5NTQ3KSxuZXcgZy5pbml0KDE1NDE0NTkyMjUsMzI3MDMzMjA5KV0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oYSxmKXtmb3IodmFyIGg9dGhpcy5faGFzaC53b3JkcywKZz1oWzBdLG49aFsxXSxiPWhbMl0sZD1oWzNdLGM9aFs0XSxqPWhbNV0sbD1oWzZdLGg9aFs3XSxxPWcuaGlnaCxtPWcubG93LHI9bi5oaWdoLE49bi5sb3csWj1iLmhpZ2gsTz1iLmxvdywkPWQuaGlnaCxQPWQubG93LGFhPWMuaGlnaCxRPWMubG93LGJhPWouaGlnaCxSPWoubG93LGNhPWwuaGlnaCxTPWwubG93LGRhPWguaGlnaCxUPWgubG93LHY9cSxzPW0sSD1yLEU9TixJPVosRj1PLFc9JCxKPVAsdz1hYSx0PVEsVT1iYSxLPVIsVj1jYSxMPVMsWD1kYSxNPVQseD0wOzgwPng7eCsrKXt2YXIgQj15W3hdO2lmKDE2PngpdmFyIHU9Qi5oaWdoPWFbZisyKnhdfDAsZT1CLmxvdz1hW2YrMip4KzFdfDA7ZWxzZXt2YXIgdT15W3gtMTVdLGU9dS5oaWdoLHo9dS5sb3csdT0oZT4+PjF8ejw8MzEpXihlPj4+OHx6PDwyNCleZT4+Pjcsej0oej4+PjF8ZTw8MzEpXih6Pj4+OHxlPDwyNCleKHo+Pj43fGU8PDI1KSxEPXlbeC0yXSxlPUQuaGlnaCxrPUQubG93LEQ9KGU+Pj4xOXxrPDwxMyleCihlPDwzfGs+Pj4yOSleZT4+PjYsaz0oaz4+PjE5fGU8PDEzKV4oazw8M3xlPj4+MjkpXihrPj4+NnxlPDwyNiksZT15W3gtN10sWT1lLmhpZ2gsQz15W3gtMTZdLEE9Qy5oaWdoLEM9Qy5sb3csZT16K2UubG93LHU9dStZKyhlPj4+MDx6Pj4+MD8xOjApLGU9ZStrLHU9dStEKyhlPj4+MDxrPj4+MD8xOjApLGU9ZStDLHU9dStBKyhlPj4+MDxDPj4+MD8xOjApO0IuaGlnaD11O0IubG93PWV9dmFyIFk9dyZVXn53JlYsQz10JktefnQmTCxCPXYmSF52JkleSCZJLGhhPXMmRV5zJkZeRSZGLHo9KHY+Pj4yOHxzPDw0KV4odjw8MzB8cz4+PjIpXih2PDwyNXxzPj4+NyksRD0ocz4+PjI4fHY8PDQpXihzPDwzMHx2Pj4+MileKHM8PDI1fHY+Pj43KSxrPXBbeF0saWE9ay5oaWdoLGVhPWsubG93LGs9TSsoKHQ+Pj4xNHx3PDwxOCleKHQ+Pj4xOHx3PDwxNCleKHQ8PDIzfHc+Pj45KSksQT1YKygodz4+PjE0fHQ8PDE4KV4odz4+PjE4fHQ8PDE0KV4odzw8MjN8dD4+PjkpKSsoaz4+PjA8TT4+PgowPzE6MCksaz1rK0MsQT1BK1krKGs+Pj4wPEM+Pj4wPzE6MCksaz1rK2VhLEE9QStpYSsoaz4+PjA8ZWE+Pj4wPzE6MCksaz1rK2UsQT1BK3UrKGs+Pj4wPGU+Pj4wPzE6MCksZT1EK2hhLEI9eitCKyhlPj4+MDxEPj4+MD8xOjApLFg9VixNPUwsVj1VLEw9SyxVPXcsSz10LHQ9SitrfDAsdz1XK0ErKHQ+Pj4wPEo+Pj4wPzE6MCl8MCxXPUksSj1GLEk9SCxGPUUsSD12LEU9cyxzPWsrZXwwLHY9QStCKyhzPj4+MDxrPj4+MD8xOjApfDB9bT1nLmxvdz1tK3M7Zy5oaWdoPXErdisobT4+PjA8cz4+PjA/MTowKTtOPW4ubG93PU4rRTtuLmhpZ2g9citIKyhOPj4+MDxFPj4+MD8xOjApO089Yi5sb3c9TytGO2IuaGlnaD1aK0krKE8+Pj4wPEY+Pj4wPzE6MCk7UD1kLmxvdz1QK0o7ZC5oaWdoPSQrVysoUD4+PjA8Sj4+PjA/MTowKTtRPWMubG93PVErdDtjLmhpZ2g9YWErdysoUT4+PjA8dD4+PjA/MTowKTtSPWoubG93PVIrSztqLmhpZ2g9YmErVSsoUj4+PjA8Sz4+PjA/MTowKTtTPWwubG93PQpTK0w7bC5oaWdoPWNhK1YrKFM+Pj4wPEw+Pj4wPzE6MCk7VD1oLmxvdz1UK007aC5oaWdoPWRhK1grKFQ+Pj4wPE0+Pj4wPzE6MCl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxmPWEud29yZHMsaD04KnRoaXMuX25EYXRhQnl0ZXMsZz04KmEuc2lnQnl0ZXM7ZltnPj4+NV18PTEyODw8MjQtZyUzMjtmWyhnKzEyOD4+PjEwPDw1KSszMF09TWF0aC5mbG9vcihoLzQyOTQ5NjcyOTYpO2ZbKGcrMTI4Pj4+MTA8PDUpKzMxXT1oO2Euc2lnQnl0ZXM9NCpmLmxlbmd0aDt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXMuX2hhc2gudG9YMzIoKX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1yLmNsb25lLmNhbGwodGhpcyk7YS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGF9LGJsb2NrU2l6ZTozMn0pO20uU0hBNTEyPXIuX2NyZWF0ZUhlbHBlcihmKTttLkhtYWNTSEE1MTI9ci5fY3JlYXRlSG1hY0hlbHBlcihmKX0pKCk7Cg==',
'/libs/crypto_js/rollups/sha384.js':'LyoKQ3J5cHRvSlMgdjMuMS4yCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwp2YXIgQ3J5cHRvSlM9Q3J5cHRvSlN8fGZ1bmN0aW9uKGEsYyl7dmFyIGQ9e30saj1kLmxpYj17fSxmPWZ1bmN0aW9uKCl7fSxtPWouQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKGEpe2YucHJvdG90eXBlPXRoaXM7dmFyIGI9bmV3IGY7YSYmYi5taXhJbihhKTtiLmhhc093blByb3BlcnR5KCJpbml0Iil8fChiLmluaXQ9ZnVuY3Rpb24oKXtiLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2IuaW5pdC5wcm90b3R5cGU9YjtiLiRzdXBlcj10aGlzO3JldHVybiBifSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dGVuZCgpO2EuaW5pdC5hcHBseShhLGFyZ3VtZW50cyk7cmV0dXJuIGF9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJih0aGlzW2JdPWFbYl0pO2EuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWEudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LApCPWouV29yZEFycmF5PW0uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGEsYil7YT10aGlzLndvcmRzPWF8fFtdO3RoaXMuc2lnQnl0ZXM9YiE9Yz9iOjQqYS5sZW5ndGh9LHRvU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybihhfHx5KS5zdHJpbmdpZnkodGhpcyl9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndvcmRzLGc9YS53b3JkcyxlPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihlJTQpZm9yKHZhciBrPTA7azxhO2srKyliW2Uraz4+PjJdfD0oZ1trPj4+Ml0+Pj4yNC04KihrJTQpJjI1NSk8PDI0LTgqKChlK2spJTQpO2Vsc2UgaWYoNjU1MzU8Zy5sZW5ndGgpZm9yKGs9MDtrPGE7ays9NCliW2Uraz4+PjJdPWdbaz4+PjJdO2Vsc2UgYi5wdXNoLmFwcGx5KGIsZyk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLndvcmRzLGI9dGhpcy5zaWdCeXRlcztuW2I+Pj4yXSY9NDI5NDk2NzI5NTw8CjMyLTgqKGIlNCk7bi5sZW5ndGg9YS5jZWlsKGIvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bS5jbG9uZS5jYWxsKHRoaXMpO2Eud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKTtyZXR1cm4gYX0scmFuZG9tOmZ1bmN0aW9uKG4pe2Zvcih2YXIgYj1bXSxnPTA7ZzxuO2crPTQpYi5wdXNoKDQyOTQ5NjcyOTYqYS5yYW5kb20oKXwwKTtyZXR1cm4gbmV3IEIuaW5pdChiLG4pfX0pLHY9ZC5lbmM9e30seT12LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZz1bXSxlPTA7ZTxhO2UrKyl7dmFyIGs9YltlPj4+Ml0+Pj4yNC04KihlJTQpJjI1NTtnLnB1c2goKGs+Pj40KS50b1N0cmluZygxNikpO2cucHVzaCgoayYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gZy5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGc9W10sZT0wO2U8YjtlKz0yKWdbZT4+PjNdfD1wYXJzZUludChhLnN1YnN0cihlLAoyKSwxNik8PDI0LTQqKGUlOCk7cmV0dXJuIG5ldyBCLmluaXQoZyxiLzIpfX0sRj12LkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZz1bXSxlPTA7ZTxhO2UrKylnLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShiW2U+Pj4yXT4+PjI0LTgqKGUlNCkmMjU1KSk7cmV0dXJuIGcuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxnPVtdLGU9MDtlPGI7ZSsrKWdbZT4+PjJdfD0oYS5jaGFyQ29kZUF0KGUpJjI1NSk8PDI0LTgqKGUlNCk7cmV0dXJuIG5ldyBCLmluaXQoZyxiKX19LGhhPXYuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShGLnN0cmluZ2lmeShhKSkpfWNhdGNoKGIpe3Rocm93IEVycm9yKCJNYWxmb3JtZWQgVVRGLTggZGF0YSIpO319LHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybiBGLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhKSkpfX0sClo9ai5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPW0uZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IEIuaW5pdDt0aGlzLl9uRGF0YUJ5dGVzPTB9LF9hcHBlbmQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1oYS5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlc30sX3Byb2Nlc3M6ZnVuY3Rpb24obil7dmFyIGI9dGhpcy5fZGF0YSxnPWIud29yZHMsZT1iLnNpZ0J5dGVzLGs9dGhpcy5ibG9ja1NpemUsbT1lLyg0KmspLG09bj9hLmNlaWwobSk6YS5tYXgoKG18MCktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKTtuPW0qaztlPWEubWluKDQqbixlKTtpZihuKXtmb3IodmFyIGM9MDtjPG47Yys9ayl0aGlzLl9kb1Byb2Nlc3NCbG9jayhnLGMpO2M9Zy5zcGxpY2UoMCxuKTtiLnNpZ0J5dGVzLT1lfXJldHVybiBuZXcgQi5pbml0KGMsZSl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bS5jbG9uZS5jYWxsKHRoaXMpOwphLl9kYXRhPXRoaXMuX2RhdGEuY2xvbmUoKTtyZXR1cm4gYX0sX21pbkJ1ZmZlclNpemU6MH0pO2ouSGFzaGVyPVouZXh0ZW5kKHtjZmc6bS5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7Wi5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKGEpe3RoaXMuX2FwcGVuZChhKTt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpfSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixnKXtyZXR1cm4obmV3IGEuaW5pdChnKSkuZmluYWxpemUoYil9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixnKXtyZXR1cm4obmV3IGlhLkhNQUMuaW5pdChhLApnKSkuZmluYWxpemUoYil9fX0pO3ZhciBpYT1kLmFsZ289e307cmV0dXJuIGR9KE1hdGgpOwooZnVuY3Rpb24oYSl7dmFyIGM9Q3J5cHRvSlMsZD1jLmxpYixqPWQuQmFzZSxmPWQuV29yZEFycmF5LGM9Yy54NjQ9e307Yy5Xb3JkPWouZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGEsYyl7dGhpcy5oaWdoPWE7dGhpcy5sb3c9Y319KTtjLldvcmRBcnJheT1qLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihjLGQpe2M9dGhpcy53b3Jkcz1jfHxbXTt0aGlzLnNpZ0J5dGVzPWQhPWE/ZDo4KmMubGVuZ3RofSx0b1gzMjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLndvcmRzLGM9YS5sZW5ndGgsZD1bXSxqPTA7ajxjO2orKyl7dmFyIEY9YVtqXTtkLnB1c2goRi5oaWdoKTtkLnB1c2goRi5sb3cpfXJldHVybiBmLmNyZWF0ZShkLHRoaXMuc2lnQnl0ZXMpfSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1qLmNsb25lLmNhbGwodGhpcyksYz1hLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCksZD1jLmxlbmd0aCxmPTA7ZjxkO2YrKyljW2ZdPWNbZl0uY2xvbmUoKTtyZXR1cm4gYX19KX0pKCk7CihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gZi5jcmVhdGUuYXBwbHkoZixhcmd1bWVudHMpfWZvcih2YXIgYz1DcnlwdG9KUyxkPWMubGliLkhhc2hlcixqPWMueDY0LGY9ai5Xb3JkLG09ai5Xb3JkQXJyYXksaj1jLmFsZ28sQj1bYSgxMTE2MzUyNDA4LDM2MDk3Njc0NTgpLGEoMTg5OTQ0NzQ0MSw2MDI4OTE3MjUpLGEoMzA0OTMyMzQ3MSwzOTY0NDg0Mzk5KSxhKDM5MjEwMDk1NzMsMjE3MzI5NTU0OCksYSg5NjE5ODcxNjMsNDA4MTYyODQ3MiksYSgxNTA4OTcwOTkzLDMwNTM4MzQyNjUpLGEoMjQ1MzYzNTc0OCwyOTM3NjcxNTc5KSxhKDI4NzA3NjMyMjEsMzY2NDYwOTU2MCksYSgzNjI0MzgxMDgwLDI3MzQ4ODMzOTQpLGEoMzEwNTk4NDAxLDExNjQ5OTY1NDIpLGEoNjA3MjI1Mjc4LDEzMjM2MTA3NjQpLGEoMTQyNjg4MTk4NywzNTkwMzA0OTk0KSxhKDE5MjUwNzgzODgsNDA2ODE4MjM4MyksYSgyMTYyMDc4MjA2LDk5MTMzNjExMyksYSgyNjE0ODg4MTAzLDYzMzgwMzMxNyksCmEoMzI0ODIyMjU4MCwzNDc5Nzc0ODY4KSxhKDM4MzUzOTA0MDEsMjY2NjYxMzQ1OCksYSg0MDIyMjI0Nzc0LDk0NDcxMTEzOSksYSgyNjQzNDcwNzgsMjM0MTI2Mjc3MyksYSg2MDQ4MDc2MjgsMjAwNzgwMDkzMyksYSg3NzAyNTU5ODMsMTQ5NTk5MDkwMSksYSgxMjQ5MTUwMTIyLDE4NTY0MzEyMzUpLGEoMTU1NTA4MTY5MiwzMTc1MjE4MTMyKSxhKDE5OTYwNjQ5ODYsMjE5ODk1MDgzNyksYSgyNTU0MjIwODgyLDM5OTk3MTkzMzkpLGEoMjgyMTgzNDM0OSw3NjY3ODQwMTYpLGEoMjk1Mjk5NjgwOCwyNTY2NTk0ODc5KSxhKDMyMTAzMTM2NzEsMzIwMzMzNzk1NiksYSgzMzM2NTcxODkxLDEwMzQ0NTcwMjYpLGEoMzU4NDUyODcxMSwyNDY2OTQ4OTAxKSxhKDExMzkyNjk5MywzNzU4MzI2MzgzKSxhKDMzODI0MTg5NSwxNjg3MTc5MzYpLGEoNjY2MzA3MjA1LDExODgxNzk5NjQpLGEoNzczNTI5OTEyLDE1NDYwNDU3MzQpLGEoMTI5NDc1NzM3MiwxNTIyODA1NDg1KSxhKDEzOTYxODIyOTEsCjI2NDM4MzM4MjMpLGEoMTY5NTE4MzcwMCwyMzQzNTI3MzkwKSxhKDE5ODY2NjEwNTEsMTAxNDQ3NzQ4MCksYSgyMTc3MDI2MzUwLDEyMDY3NTkxNDIpLGEoMjQ1Njk1NjAzNywzNDQwNzc2MjcpLGEoMjczMDQ4NTkyMSwxMjkwODYzNDYwKSxhKDI4MjAzMDI0MTEsMzE1ODQ1NDI3MyksYSgzMjU5NzMwODAwLDM1MDU5NTI2NTcpLGEoMzM0NTc2NDc3MSwxMDYyMTcwMDgpLGEoMzUxNjA2NTgxNywzNjA2MDA4MzQ0KSxhKDM2MDAzNTI4MDQsMTQzMjcyNTc3NiksYSg0MDk0NTcxOTA5LDE0NjcwMzE1OTQpLGEoMjc1NDIzMzQ0LDg1MTE2OTcyMCksYSg0MzAyMjc3MzQsMzEwMDgyMzc1MiksYSg1MDY5NDg2MTYsMTM2MzI1ODE5NSksYSg2NTkwNjA1NTYsMzc1MDY4NTU5MyksYSg4ODM5OTc4NzcsMzc4NTA1MDI4MCksYSg5NTgxMzk1NzEsMzMxODMwNzQyNyksYSgxMzIyODIyMjE4LDM4MTI3MjM0MDMpLGEoMTUzNzAwMjA2MywyMDAzMDM0OTk1KSxhKDE3NDc4NzM3NzksMzYwMjAzNjg5OSksCmEoMTk1NTU2MjIyMiwxNTc1OTkwMDEyKSxhKDIwMjQxMDQ4MTUsMTEyNTU5MjkyOCksYSgyMjI3NzMwNDUyLDI3MTY5MDQzMDYpLGEoMjM2MTg1MjQyNCw0NDI3NzYwNDQpLGEoMjQyODQzNjQ3NCw1OTM2OTgzNDQpLGEoMjc1NjczNDE4NywzNzMzMTEwMjQ5KSxhKDMyMDQwMzE0NzksMjk5OTM1MTU3MyksYSgzMzI5MzI1Mjk4LDM4MTU5MjA0MjcpLGEoMzM5MTU2OTYxNCwzOTI4MzgzOTAwKSxhKDM1MTUyNjcyNzEsNTY2MjgwNzExKSxhKDM5NDAxODc2MDYsMzQ1NDA2OTUzNCksYSg0MTE4NjMwMjcxLDQwMDAyMzk5OTIpLGEoMTE2NDE4NDc0LDE5MTQxMzg1NTQpLGEoMTc0MjkyNDIxLDI3MzEwNTUyNzApLGEoMjg5MzgwMzU2LDMyMDM5OTMwMDYpLGEoNDYwMzkzMjY5LDMyMDYyMDMxNSksYSg2ODU0NzE3MzMsNTg3NDk2ODM2KSxhKDg1MjE0Mjk3MSwxMDg2NzkyODUxKSxhKDEwMTcwMzYyOTgsMzY1NTQzMTAwKSxhKDExMjYwMDA1ODAsMjYxODI5NzY3NiksYSgxMjg4MDMzNDcwLAozNDA5ODU1MTU4KSxhKDE1MDE1MDU5NDgsNDIzNDUwOTg2NiksYSgxNjA3MTY3OTE1LDk4NzE2NzQ2OCksYSgxODE2NDAyMzE2LDEyNDYxODk1OTEpXSx2PVtdLHk9MDs4MD55O3krKyl2W3ldPWEoKTtqPWouU0hBNTEyPWQuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IG0uaW5pdChbbmV3IGYuaW5pdCgxNzc5MDMzNzAzLDQwODkyMzU3MjApLG5ldyBmLmluaXQoMzE0NDEzNDI3NywyMjI3ODczNTk1KSxuZXcgZi5pbml0KDEwMTM5MDQyNDIsNDI3MTE3NTcyMyksbmV3IGYuaW5pdCgyNzczNDgwNzYyLDE1OTU3NTAxMjkpLG5ldyBmLmluaXQoMTM1OTg5MzExOSwyOTE3NTY1MTM3KSxuZXcgZi5pbml0KDI2MDA4MjI5MjQsNzI1NTExMTk5KSxuZXcgZi5pbml0KDUyODczNDYzNSw0MjE1Mzg5NTQ3KSxuZXcgZi5pbml0KDE1NDE0NTkyMjUsMzI3MDMzMjA5KV0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oYSxjKXtmb3IodmFyIGQ9dGhpcy5faGFzaC53b3JkcywKZj1kWzBdLGo9ZFsxXSxiPWRbMl0sZz1kWzNdLGU9ZFs0XSxrPWRbNV0sbT1kWzZdLGQ9ZFs3XSx5PWYuaGlnaCxNPWYubG93LCQ9ai5oaWdoLE49ai5sb3csYWE9Yi5oaWdoLE89Yi5sb3csYmE9Zy5oaWdoLFA9Zy5sb3csY2E9ZS5oaWdoLFE9ZS5sb3csZGE9ay5oaWdoLFI9ay5sb3csZWE9bS5oaWdoLFM9bS5sb3csZmE9ZC5oaWdoLFQ9ZC5sb3cscz15LHA9TSxHPSQsRD1OLEg9YWEsRT1PLFc9YmEsST1QLHQ9Y2EscT1RLFU9ZGEsSj1SLFY9ZWEsSz1TLFg9ZmEsTD1ULHU9MDs4MD51O3UrKyl7dmFyIHo9dlt1XTtpZigxNj51KXZhciByPXouaGlnaD1hW2MrMip1XXwwLGg9ei5sb3c9YVtjKzIqdSsxXXwwO2Vsc2V7dmFyIHI9dlt1LTE1XSxoPXIuaGlnaCx3PXIubG93LHI9KGg+Pj4xfHc8PDMxKV4oaD4+Pjh8dzw8MjQpXmg+Pj43LHc9KHc+Pj4xfGg8PDMxKV4odz4+Pjh8aDw8MjQpXih3Pj4+N3xoPDwyNSksQz12W3UtMl0saD1DLmhpZ2gsbD1DLmxvdyxDPShoPj4+MTl8bDw8CjEzKV4oaDw8M3xsPj4+MjkpXmg+Pj42LGw9KGw+Pj4xOXxoPDwxMyleKGw8PDN8aD4+PjI5KV4obD4+PjZ8aDw8MjYpLGg9dlt1LTddLFk9aC5oaWdoLEE9dlt1LTE2XSx4PUEuaGlnaCxBPUEubG93LGg9dytoLmxvdyxyPXIrWSsoaD4+PjA8dz4+PjA/MTowKSxoPWgrbCxyPXIrQysoaD4+PjA8bD4+PjA/MTowKSxoPWgrQSxyPXIreCsoaD4+PjA8QT4+PjA/MTowKTt6LmhpZ2g9cjt6Lmxvdz1ofXZhciBZPXQmVV5+dCZWLEE9cSZKXn5xJkssej1zJkdecyZIXkcmSCxqYT1wJkRecCZFXkQmRSx3PShzPj4+Mjh8cDw8NCleKHM8PDMwfHA+Pj4yKV4oczw8MjV8cD4+PjcpLEM9KHA+Pj4yOHxzPDw0KV4ocDw8MzB8cz4+PjIpXihwPDwyNXxzPj4+NyksbD1CW3VdLGthPWwuaGlnaCxnYT1sLmxvdyxsPUwrKChxPj4+MTR8dDw8MTgpXihxPj4+MTh8dDw8MTQpXihxPDwyM3x0Pj4+OSkpLHg9WCsoKHQ+Pj4xNHxxPDwxOCleKHQ+Pj4xOHxxPDwxNCleKHQ8PDIzfHE+Pj45KSkrKGw+Pj4wPApMPj4+MD8xOjApLGw9bCtBLHg9eCtZKyhsPj4+MDxBPj4+MD8xOjApLGw9bCtnYSx4PXgra2ErKGw+Pj4wPGdhPj4+MD8xOjApLGw9bCtoLHg9eCtyKyhsPj4+MDxoPj4+MD8xOjApLGg9QytqYSx6PXcreisoaD4+PjA8Qz4+PjA/MTowKSxYPVYsTD1LLFY9VSxLPUosVT10LEo9cSxxPUkrbHwwLHQ9Vyt4KyhxPj4+MDxJPj4+MD8xOjApfDAsVz1ILEk9RSxIPUcsRT1ELEc9cyxEPXAscD1sK2h8MCxzPXgreisocD4+PjA8bD4+PjA/MTowKXwwfU09Zi5sb3c9TStwO2YuaGlnaD15K3MrKE0+Pj4wPHA+Pj4wPzE6MCk7Tj1qLmxvdz1OK0Q7ai5oaWdoPSQrRysoTj4+PjA8RD4+PjA/MTowKTtPPWIubG93PU8rRTtiLmhpZ2g9YWErSCsoTz4+PjA8RT4+PjA/MTowKTtQPWcubG93PVArSTtnLmhpZ2g9YmErVysoUD4+PjA8ST4+PjA/MTowKTtRPWUubG93PVErcTtlLmhpZ2g9Y2ErdCsoUT4+PjA8cT4+PjA/MTowKTtSPWsubG93PVIrSjtrLmhpZ2g9ZGErVSsoUj4+PjA8Sj4+PjA/MTowKTsKUz1tLmxvdz1TK0s7bS5oaWdoPWVhK1YrKFM+Pj4wPEs+Pj4wPzE6MCk7VD1kLmxvdz1UK0w7ZC5oaWdoPWZhK1grKFQ+Pj4wPEw+Pj4wPzE6MCl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxjPWEud29yZHMsZD04KnRoaXMuX25EYXRhQnl0ZXMsZj04KmEuc2lnQnl0ZXM7Y1tmPj4+NV18PTEyODw8MjQtZiUzMjtjWyhmKzEyOD4+PjEwPDw1KSszMF09TWF0aC5mbG9vcihkLzQyOTQ5NjcyOTYpO2NbKGYrMTI4Pj4+MTA8PDUpKzMxXT1kO2Euc2lnQnl0ZXM9NCpjLmxlbmd0aDt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXMuX2hhc2gudG9YMzIoKX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1kLmNsb25lLmNhbGwodGhpcyk7YS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGF9LGJsb2NrU2l6ZTozMn0pO2MuU0hBNTEyPWQuX2NyZWF0ZUhlbHBlcihqKTtjLkhtYWNTSEE1MTI9ZC5fY3JlYXRlSG1hY0hlbHBlcihqKX0pKCk7CihmdW5jdGlvbigpe3ZhciBhPUNyeXB0b0pTLGM9YS54NjQsZD1jLldvcmQsaj1jLldvcmRBcnJheSxjPWEuYWxnbyxmPWMuU0hBNTEyLGM9Yy5TSEEzODQ9Zi5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgai5pbml0KFtuZXcgZC5pbml0KDM0MTgwNzAzNjUsMzIzODM3MTAzMiksbmV3IGQuaW5pdCgxNjU0MjcwMjUwLDkxNDE1MDY2MyksbmV3IGQuaW5pdCgyNDM4NTI5MzcwLDgxMjcwMjk5OSksbmV3IGQuaW5pdCgzNTU0NjIzNjAsNDE0NDkxMjY5NyksbmV3IGQuaW5pdCgxNzMxNDA1NDE1LDQyOTA3NzU4NTcpLG5ldyBkLmluaXQoMjM5NDE4MDIzMSwxNzUwNjAzMDI1KSxuZXcgZC5pbml0KDM2NzUwMDg1MjUsMTY5NDA3NjgzOSksbmV3IGQuaW5pdCgxMjAzMDYyODEzLDMyMDQwNzU0MjgpXSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9Zi5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTE2O3JldHVybiBhfX0pO2EuU0hBMzg0PQpmLl9jcmVhdGVIZWxwZXIoYyk7YS5IbWFjU0hBMzg0PWYuX2NyZWF0ZUhtYWNIZWxwZXIoYyl9KSgpOwo=',
'/libs/crypto_js/rollups/md5.js':'LyoKQ3J5cHRvSlMgdjMuMS4yCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwp2YXIgQ3J5cHRvSlM9Q3J5cHRvSlN8fGZ1bmN0aW9uKHMscCl7dmFyIG09e30sbD1tLmxpYj17fSxuPWZ1bmN0aW9uKCl7fSxyPWwuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKGIpe24ucHJvdG90eXBlPXRoaXM7dmFyIGg9bmV3IG47YiYmaC5taXhJbihiKTtoLmhhc093blByb3BlcnR5KCJpbml0Iil8fChoLmluaXQ9ZnVuY3Rpb24oKXtoLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2guaW5pdC5wcm90b3R5cGU9aDtoLiRzdXBlcj10aGlzO3JldHVybiBofSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmV4dGVuZCgpO2IuaW5pdC5hcHBseShiLGFyZ3VtZW50cyk7cmV0dXJuIGJ9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGIpe2Zvcih2YXIgaCBpbiBiKWIuaGFzT3duUHJvcGVydHkoaCkmJih0aGlzW2hdPWJbaF0pO2IuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPWIudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LApxPWwuV29yZEFycmF5PXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGIsaCl7Yj10aGlzLndvcmRzPWJ8fFtdO3RoaXMuc2lnQnl0ZXM9aCE9cD9oOjQqYi5sZW5ndGh9LHRvU3RyaW5nOmZ1bmN0aW9uKGIpe3JldHVybihifHx0KS5zdHJpbmdpZnkodGhpcyl9LGNvbmNhdDpmdW5jdGlvbihiKXt2YXIgaD10aGlzLndvcmRzLGE9Yi53b3JkcyxqPXRoaXMuc2lnQnl0ZXM7Yj1iLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihqJTQpZm9yKHZhciBnPTA7ZzxiO2crKyloW2orZz4+PjJdfD0oYVtnPj4+Ml0+Pj4yNC04KihnJTQpJjI1NSk8PDI0LTgqKChqK2cpJTQpO2Vsc2UgaWYoNjU1MzU8YS5sZW5ndGgpZm9yKGc9MDtnPGI7Zys9NCloW2orZz4+PjJdPWFbZz4+PjJdO2Vsc2UgaC5wdXNoLmFwcGx5KGgsYSk7dGhpcy5zaWdCeXRlcys9YjtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLndvcmRzLGg9dGhpcy5zaWdCeXRlcztiW2g+Pj4yXSY9NDI5NDk2NzI5NTw8CjMyLTgqKGglNCk7Yi5sZW5ndGg9cy5jZWlsKGgvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGI9ci5jbG9uZS5jYWxsKHRoaXMpO2Iud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKTtyZXR1cm4gYn0scmFuZG9tOmZ1bmN0aW9uKGIpe2Zvcih2YXIgaD1bXSxhPTA7YTxiO2ErPTQpaC5wdXNoKDQyOTQ5NjcyOTYqcy5yYW5kb20oKXwwKTtyZXR1cm4gbmV3IHEuaW5pdChoLGIpfX0pLHY9bS5lbmM9e30sdD12LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGIpe3ZhciBhPWIud29yZHM7Yj1iLnNpZ0J5dGVzO2Zvcih2YXIgZz1bXSxqPTA7ajxiO2orKyl7dmFyIGs9YVtqPj4+Ml0+Pj4yNC04KihqJTQpJjI1NTtnLnB1c2goKGs+Pj40KS50b1N0cmluZygxNikpO2cucHVzaCgoayYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gZy5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oYil7Zm9yKHZhciBhPWIubGVuZ3RoLGc9W10saj0wO2o8YTtqKz0yKWdbaj4+PjNdfD1wYXJzZUludChiLnN1YnN0cihqLAoyKSwxNik8PDI0LTQqKGolOCk7cmV0dXJuIG5ldyBxLmluaXQoZyxhLzIpfX0sYT12LkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKGIpe3ZhciBhPWIud29yZHM7Yj1iLnNpZ0J5dGVzO2Zvcih2YXIgZz1bXSxqPTA7ajxiO2orKylnLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShhW2o+Pj4yXT4+PjI0LTgqKGolNCkmMjU1KSk7cmV0dXJuIGcuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYT1iLmxlbmd0aCxnPVtdLGo9MDtqPGE7aisrKWdbaj4+PjJdfD0oYi5jaGFyQ29kZUF0KGopJjI1NSk8PDI0LTgqKGolNCk7cmV0dXJuIG5ldyBxLmluaXQoZyxhKX19LHU9di5VdGY4PXtzdHJpbmdpZnk6ZnVuY3Rpb24oYil7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGEuc3RyaW5naWZ5KGIpKSl9Y2F0Y2goZyl7dGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIik7fX0scGFyc2U6ZnVuY3Rpb24oYil7cmV0dXJuIGEucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGIpKSl9fSwKZz1sLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09ci5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgcS5pbml0O3RoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihiKXsic3RyaW5nIj09dHlwZW9mIGImJihiPXUucGFyc2UoYikpO3RoaXMuX2RhdGEuY29uY2F0KGIpO3RoaXMuX25EYXRhQnl0ZXMrPWIuc2lnQnl0ZXN9LF9wcm9jZXNzOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuX2RhdGEsZz1hLndvcmRzLGo9YS5zaWdCeXRlcyxrPXRoaXMuYmxvY2tTaXplLG09ai8oNCprKSxtPWI/cy5jZWlsKG0pOnMubWF4KChtfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7Yj1tKms7aj1zLm1pbig0KmIsaik7aWYoYil7Zm9yKHZhciBsPTA7bDxiO2wrPWspdGhpcy5fZG9Qcm9jZXNzQmxvY2soZyxsKTtsPWcuc3BsaWNlKDAsYik7YS5zaWdCeXRlcy09an1yZXR1cm4gbmV3IHEuaW5pdChsLGopfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBiPXIuY2xvbmUuY2FsbCh0aGlzKTsKYi5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCk7cmV0dXJuIGJ9LF9taW5CdWZmZXJTaXplOjB9KTtsLkhhc2hlcj1nLmV4dGVuZCh7Y2ZnOnIuZXh0ZW5kKCksaW5pdDpmdW5jdGlvbihiKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQoYik7dGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe2cucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbihiKXt0aGlzLl9hcHBlbmQoYik7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbihiKXtiJiZ0aGlzLl9hcHBlbmQoYik7cmV0dXJuIHRoaXMuX2RvRmluYWxpemUoKX0sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGEsZyl7cmV0dXJuKG5ldyBiLmluaXQoZykpLmZpbmFsaXplKGEpfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGEsZyl7cmV0dXJuKG5ldyBrLkhNQUMuaW5pdChiLApnKSkuZmluYWxpemUoYSl9fX0pO3ZhciBrPW0uYWxnbz17fTtyZXR1cm4gbX0oTWF0aCk7CihmdW5jdGlvbihzKXtmdW5jdGlvbiBwKGEsayxiLGgsbCxqLG0pe2E9YSsoayZifH5rJmgpK2wrbTtyZXR1cm4oYTw8anxhPj4+MzItaikra31mdW5jdGlvbiBtKGEsayxiLGgsbCxqLG0pe2E9YSsoayZofGImfmgpK2wrbTtyZXR1cm4oYTw8anxhPj4+MzItaikra31mdW5jdGlvbiBsKGEsayxiLGgsbCxqLG0pe2E9YSsoa15iXmgpK2wrbTtyZXR1cm4oYTw8anxhPj4+MzItaikra31mdW5jdGlvbiBuKGEsayxiLGgsbCxqLG0pe2E9YSsoYl4oa3x+aCkpK2wrbTtyZXR1cm4oYTw8anxhPj4+MzItaikra31mb3IodmFyIHI9Q3J5cHRvSlMscT1yLmxpYix2PXEuV29yZEFycmF5LHQ9cS5IYXNoZXIscT1yLmFsZ28sYT1bXSx1PTA7NjQ+dTt1KyspYVt1XT00Mjk0OTY3Mjk2KnMuYWJzKHMuc2luKHUrMSkpfDA7cT1xLk1ENT10LmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyB2LmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSwKX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGcsayl7Zm9yKHZhciBiPTA7MTY+YjtiKyspe3ZhciBoPWsrYix3PWdbaF07Z1toXT0odzw8OHx3Pj4+MjQpJjE2NzExOTM1fCh3PDwyNHx3Pj4+OCkmNDI3ODI1NTM2MH12YXIgYj10aGlzLl9oYXNoLndvcmRzLGg9Z1trKzBdLHc9Z1trKzFdLGo9Z1trKzJdLHE9Z1trKzNdLHI9Z1trKzRdLHM9Z1trKzVdLHQ9Z1trKzZdLHU9Z1trKzddLHY9Z1trKzhdLHg9Z1trKzldLHk9Z1trKzEwXSx6PWdbaysxMV0sQT1nW2srMTJdLEI9Z1trKzEzXSxDPWdbaysxNF0sRD1nW2srMTVdLGM9YlswXSxkPWJbMV0sZT1iWzJdLGY9YlszXSxjPXAoYyxkLGUsZixoLDcsYVswXSksZj1wKGYsYyxkLGUsdywxMixhWzFdKSxlPXAoZSxmLGMsZCxqLDE3LGFbMl0pLGQ9cChkLGUsZixjLHEsMjIsYVszXSksYz1wKGMsZCxlLGYsciw3LGFbNF0pLGY9cChmLGMsZCxlLHMsMTIsYVs1XSksZT1wKGUsZixjLGQsdCwxNyxhWzZdKSxkPXAoZCxlLGYsYyx1LDIyLGFbN10pLApjPXAoYyxkLGUsZix2LDcsYVs4XSksZj1wKGYsYyxkLGUseCwxMixhWzldKSxlPXAoZSxmLGMsZCx5LDE3LGFbMTBdKSxkPXAoZCxlLGYsYyx6LDIyLGFbMTFdKSxjPXAoYyxkLGUsZixBLDcsYVsxMl0pLGY9cChmLGMsZCxlLEIsMTIsYVsxM10pLGU9cChlLGYsYyxkLEMsMTcsYVsxNF0pLGQ9cChkLGUsZixjLEQsMjIsYVsxNV0pLGM9bShjLGQsZSxmLHcsNSxhWzE2XSksZj1tKGYsYyxkLGUsdCw5LGFbMTddKSxlPW0oZSxmLGMsZCx6LDE0LGFbMThdKSxkPW0oZCxlLGYsYyxoLDIwLGFbMTldKSxjPW0oYyxkLGUsZixzLDUsYVsyMF0pLGY9bShmLGMsZCxlLHksOSxhWzIxXSksZT1tKGUsZixjLGQsRCwxNCxhWzIyXSksZD1tKGQsZSxmLGMsciwyMCxhWzIzXSksYz1tKGMsZCxlLGYseCw1LGFbMjRdKSxmPW0oZixjLGQsZSxDLDksYVsyNV0pLGU9bShlLGYsYyxkLHEsMTQsYVsyNl0pLGQ9bShkLGUsZixjLHYsMjAsYVsyN10pLGM9bShjLGQsZSxmLEIsNSxhWzI4XSksZj1tKGYsYywKZCxlLGosOSxhWzI5XSksZT1tKGUsZixjLGQsdSwxNCxhWzMwXSksZD1tKGQsZSxmLGMsQSwyMCxhWzMxXSksYz1sKGMsZCxlLGYscyw0LGFbMzJdKSxmPWwoZixjLGQsZSx2LDExLGFbMzNdKSxlPWwoZSxmLGMsZCx6LDE2LGFbMzRdKSxkPWwoZCxlLGYsYyxDLDIzLGFbMzVdKSxjPWwoYyxkLGUsZix3LDQsYVszNl0pLGY9bChmLGMsZCxlLHIsMTEsYVszN10pLGU9bChlLGYsYyxkLHUsMTYsYVszOF0pLGQ9bChkLGUsZixjLHksMjMsYVszOV0pLGM9bChjLGQsZSxmLEIsNCxhWzQwXSksZj1sKGYsYyxkLGUsaCwxMSxhWzQxXSksZT1sKGUsZixjLGQscSwxNixhWzQyXSksZD1sKGQsZSxmLGMsdCwyMyxhWzQzXSksYz1sKGMsZCxlLGYseCw0LGFbNDRdKSxmPWwoZixjLGQsZSxBLDExLGFbNDVdKSxlPWwoZSxmLGMsZCxELDE2LGFbNDZdKSxkPWwoZCxlLGYsYyxqLDIzLGFbNDddKSxjPW4oYyxkLGUsZixoLDYsYVs0OF0pLGY9bihmLGMsZCxlLHUsMTAsYVs0OV0pLGU9bihlLGYsYyxkLApDLDE1LGFbNTBdKSxkPW4oZCxlLGYsYyxzLDIxLGFbNTFdKSxjPW4oYyxkLGUsZixBLDYsYVs1Ml0pLGY9bihmLGMsZCxlLHEsMTAsYVs1M10pLGU9bihlLGYsYyxkLHksMTUsYVs1NF0pLGQ9bihkLGUsZixjLHcsMjEsYVs1NV0pLGM9bihjLGQsZSxmLHYsNixhWzU2XSksZj1uKGYsYyxkLGUsRCwxMCxhWzU3XSksZT1uKGUsZixjLGQsdCwxNSxhWzU4XSksZD1uKGQsZSxmLGMsQiwyMSxhWzU5XSksYz1uKGMsZCxlLGYsciw2LGFbNjBdKSxmPW4oZixjLGQsZSx6LDEwLGFbNjFdKSxlPW4oZSxmLGMsZCxqLDE1LGFbNjJdKSxkPW4oZCxlLGYsYyx4LDIxLGFbNjNdKTtiWzBdPWJbMF0rY3wwO2JbMV09YlsxXStkfDA7YlsyXT1iWzJdK2V8MDtiWzNdPWJbM10rZnwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsaz1hLndvcmRzLGI9OCp0aGlzLl9uRGF0YUJ5dGVzLGg9OCphLnNpZ0J5dGVzO2tbaD4+PjVdfD0xMjg8PDI0LWglMzI7dmFyIGw9cy5mbG9vcihiLwo0Mjk0OTY3Mjk2KTtrWyhoKzY0Pj4+OTw8NCkrMTVdPShsPDw4fGw+Pj4yNCkmMTY3MTE5MzV8KGw8PDI0fGw+Pj44KSY0Mjc4MjU1MzYwO2tbKGgrNjQ+Pj45PDw0KSsxNF09KGI8PDh8Yj4+PjI0KSYxNjcxMTkzNXwoYjw8MjR8Yj4+PjgpJjQyNzgyNTUzNjA7YS5zaWdCeXRlcz00KihrLmxlbmd0aCsxKTt0aGlzLl9wcm9jZXNzKCk7YT10aGlzLl9oYXNoO2s9YS53b3Jkcztmb3IoYj0wOzQ+YjtiKyspaD1rW2JdLGtbYl09KGg8PDh8aD4+PjI0KSYxNjcxMTkzNXwoaDw8MjR8aD4+PjgpJjQyNzgyNTUzNjA7cmV0dXJuIGF9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9dC5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhfX0pO3IuTUQ1PXQuX2NyZWF0ZUhlbHBlcihxKTtyLkhtYWNNRDU9dC5fY3JlYXRlSG1hY0hlbHBlcihxKX0pKE1hdGgpOwo=',
'/Lib/pydoc.py':'IyEgL3Vzci9iaW4vcHl0aG9uMy4yCiIiIkdlbmVyYXRlIFB5dGhvbiBkb2N1bWVudGF0aW9uIGluIEhUTUwgb3IgdGV4dCBmb3IgaW50ZXJhY3RpdmUgdXNlLgoKSW4gdGhlIFB5dGhvbiBpbnRlcnByZXRlciwgZG8gImZyb20gcHlkb2MgaW1wb3J0IGhlbHAiIHRvIHByb3ZpZGUgb25saW5lCmhlbHAuICBDYWxsaW5nIGhlbHAodGhpbmcpIG9uIGEgUHl0aG9uIG9iamVjdCBkb2N1bWVudHMgdGhlIG9iamVjdC4KCk9yLCBhdCB0aGUgc2hlbGwgY29tbWFuZCBsaW5lIG91dHNpZGUgb2YgUHl0aG9uOgoKUnVuICJweWRvYyA8bmFtZT4iIHRvIHNob3cgZG9jdW1lbnRhdGlvbiBvbiBzb21ldGhpbmcuICA8bmFtZT4gbWF5IGJlCnRoZSBuYW1lIG9mIGEgZnVuY3Rpb24sIG1vZHVsZSwgcGFja2FnZSwgb3IgYSBkb3R0ZWQgcmVmZXJlbmNlIHRvIGEKY2xhc3Mgb3IgZnVuY3Rpb24gd2l0aGluIGEgbW9kdWxlIG9yIG1vZHVsZSBpbiBhIHBhY2thZ2UuICBJZiB0aGUKYXJndW1lbnQgY29udGFpbnMgYSBwYXRoIHNlZ21lbnQgZGVsaW1pdGVyIChlLmcuIHNsYXNoIG9uIFVuaXgsCmJhY2tzbGFzaCBvbiBXaW5kb3dzKSBpdCBpcyB0cmVhdGVkIGFzIHRoZSBwYXRoIHRvIGEgUHl0aG9uIHNvdXJjZSBmaWxlLgoKUnVuICJweWRvYyAtayA8a2V5d29yZD4iIHRvIHNlYXJjaCBmb3IgYSBrZXl3b3JkIGluIHRoZSBzeW5vcHNpcyBsaW5lcwpvZiBhbGwgYXZhaWxhYmxlIG1vZHVsZXMuCgpSdW4gInB5ZG9jIC1wIDxwb3J0PiIgdG8gc3RhcnQgYW4gSFRUUCBzZXJ2ZXIgb24gdGhlIGdpdmVuIHBvcnQgb24gdGhlCmxvY2FsIG1hY2hpbmUuICBQb3J0IG51bWJlciAwIGNhbiBiZSB1c2VkIHRvIGdldCBhbiBhcmJpdHJhcnkgdW51c2VkIHBvcnQuCgpSdW4gInB5ZG9jIC1iIiB0byBzdGFydCBhbiBIVFRQIHNlcnZlciBvbiBhbiBhcmJpdHJhcnkgdW51c2VkIHBvcnQgYW5kCm9wZW4gYSBXZWIgYnJvd3NlciB0byBpbnRlcmFjdGl2ZWx5IGJyb3dzZSBkb2N1bWVudGF0aW9uLiAgVGhlIC1wIG9wdGlvbgpjYW4gYmUgdXNlZCB3aXRoIHRoZSAtYiBvcHRpb24gdG8gZXhwbGljaXRseSBzcGVjaWZ5IHRoZSBzZXJ2ZXIgcG9ydC4KCkZvciBwbGF0Zm9ybXMgd2l0aG91dCBhIGNvbW1hbmQgbGluZSwgInB5ZG9jIC1nIiBzdGFydHMgdGhlIEhUVFAgc2VydmVyCmFuZCBhbHNvIHBvcHMgdXAgYSBsaXR0bGUgd2luZG93IGZvciBjb250cm9sbGluZyBpdC4gIFRoaXMgb3B0aW9uIGlzCmRlcHJlY2F0ZWQsIHNpbmNlIHRoZSBzZXJ2ZXIgY2FuIG5vdyBiZSBjb250cm9sbGVkIGRpcmVjdGx5IGZyb20gSFRUUApjbGllbnRzLgoKUnVuICJweWRvYyAtdyA8bmFtZT4iIHRvIHdyaXRlIG91dCB0aGUgSFRNTCBkb2N1bWVudGF0aW9uIGZvciBhIG1vZHVsZQp0byBhIGZpbGUgbmFtZWQgIjxuYW1lPi5odG1sIi4KCk1vZHVsZSBkb2NzIGZvciBjb3JlIG1vZHVsZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4KCiAgICAvdXNyL3NoYXJlL2RvYy9weXRob25YLlkvaHRtbC9saWJyYXJ5CgppZiB0aGUgcHl0aG9uWC5ZLWRvYyBwYWNrYWdlIGlzIGluc3RhbGxlZCBvciBpbgoKICAgIGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvWC5ZL2xpYnJhcnkvCgpUaGlzIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHNldHRpbmcgdGhlIFBZVEhPTkRPQ1MgZW52aXJvbm1lbnQgdmFyaWFibGUKdG8gYSBkaWZmZXJlbnQgVVJMIG9yIHRvIGEgbG9jYWwgZGlyZWN0b3J5IGNvbnRhaW5pbmcgdGhlIExpYnJhcnkKUmVmZXJlbmNlIE1hbnVhbCBwYWdlcy4KIiIiCl9fYWxsX18gPSBbJ2hlbHAnXQpfX2F1dGhvcl9fID0gIkthLVBpbmcgWWVlIDxwaW5nQGxmdy5vcmc+IgpfX2RhdGVfXyA9ICIyNiBGZWJydWFyeSAyMDAxIgoKX192ZXJzaW9uX18gPSAiJFJldmlzaW9uJCIKX19jcmVkaXRzX18gPSAiIiJHdWlkbyB2YW4gUm9zc3VtLCBmb3IgYW4gZXhjZWxsZW50IHByb2dyYW1taW5nIGxhbmd1YWdlLgpUb21teSBCdXJuZXR0ZSwgdGhlIG9yaWdpbmFsIGNyZWF0b3Igb2YgbWFucHkuClBhdWwgUHJlc2NvZCwgZm9yIGFsbCBoaXMgd29yayBvbiBvbmxpbmVoZWxwLgpSaWNoYXJkIENoYW1iZXJsYWluLCBmb3IgdGhlIGZpcnN0IGltcGxlbWVudGF0aW9uIG9mIHRleHRkb2MuCiIiIgoKIyBLbm93biBidWdzIHRoYXQgY2FuJ3QgYmUgZml4ZWQgaGVyZToKIyAgIC0gaW1wLmxvYWRfbW9kdWxlKCkgY2Fubm90IGJlIHByZXZlbnRlZCBmcm9tIGNsb2JiZXJpbmcgZXhpc3RpbmcKIyAgICAgbG9hZGVkIG1vZHVsZXMsIHNvIGNhbGxpbmcgc3lub3BzaXMoKSBvbiBhIGJpbmFyeSBtb2R1bGUgZmlsZQojICAgICBjaGFuZ2VzIHRoZSBjb250ZW50cyBvZiBhbnkgZXhpc3RpbmcgbW9kdWxlIHdpdGggdGhlIHNhbWUgbmFtZS4KIyAgIC0gSWYgdGhlIF9fZmlsZV9fIGF0dHJpYnV0ZSBvbiBhIG1vZHVsZSBpcyBhIHJlbGF0aXZlIHBhdGggYW5kCiMgICAgIHRoZSBjdXJyZW50IGRpcmVjdG9yeSBpcyBjaGFuZ2VkIHdpdGggb3MuY2hkaXIoKSwgYW4gaW5jb3JyZWN0CiMgICAgIHBhdGggd2lsbCBiZSBkaXNwbGF5ZWQuCgppbXBvcnQgYnVpbHRpbnMKaW1wb3J0IGltcAppbXBvcnQgaW5zcGVjdAppbXBvcnQgaW8KaW1wb3J0IG9zCmltcG9ydCBwa2d1dGlsCmltcG9ydCBwbGF0Zm9ybQppbXBvcnQgcmUKaW1wb3J0IHN5cwppbXBvcnQgdGltZQppbXBvcnQgdG9rZW5pemUKaW1wb3J0IHdhcm5pbmdzCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlCmZyb20gcmVwcmxpYiBpbXBvcnQgUmVwcgpmcm9tIHRyYWNlYmFjayBpbXBvcnQgZXh0cmFjdF90YiwgZm9ybWF0X2V4Y2VwdGlvbl9vbmx5CgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gY29tbW9uIHJvdXRpbmVzCgpkZWYgcGF0aGRpcnMoKToKICAgICIiIkNvbnZlcnQgc3lzLnBhdGggaW50byBhIGxpc3Qgb2YgYWJzb2x1dGUsIGV4aXN0aW5nLCB1bmlxdWUgcGF0aHMuIiIiCiAgICBkaXJzID0gW10KICAgIG5vcm1kaXJzID0gW10KICAgIGZvciBkaXIgaW4gc3lzLnBhdGg6CiAgICAgICAgZGlyID0gb3MucGF0aC5hYnNwYXRoKGRpciBvciAnLicpCiAgICAgICAgbm9ybWRpciA9IG9zLnBhdGgubm9ybWNhc2UoZGlyKQogICAgICAgIGlmIG5vcm1kaXIgbm90IGluIG5vcm1kaXJzIGFuZCBvcy5wYXRoLmlzZGlyKGRpcik6CiAgICAgICAgICAgIGRpcnMuYXBwZW5kKGRpcikKICAgICAgICAgICAgbm9ybWRpcnMuYXBwZW5kKG5vcm1kaXIpCiAgICByZXR1cm4gZGlycwoKZGVmIGdldGRvYyhvYmplY3QpOgogICAgIiIiR2V0IHRoZSBkb2Mgc3RyaW5nIG9yIGNvbW1lbnRzIGZvciBhbiBvYmplY3QuIiIiCiAgICByZXN1bHQgPSBpbnNwZWN0LmdldGRvYyhvYmplY3QpIG9yIGluc3BlY3QuZ2V0Y29tbWVudHMob2JqZWN0KQogICAgcmV0dXJuIHJlc3VsdCBhbmQgcmUuc3ViKCdeICpcbicsICcnLCByZXN1bHQucnN0cmlwKCkpIG9yICcnCgpkZWYgc3BsaXRkb2MoZG9jKToKICAgICIiIlNwbGl0IGEgZG9jIHN0cmluZyBpbnRvIGEgc3lub3BzaXMgbGluZSAoaWYgYW55KSBhbmQgdGhlIHJlc3QuIiIiCiAgICBsaW5lcyA9IGRvYy5zdHJpcCgpLnNwbGl0KCdcbicpCiAgICBpZiBsZW4obGluZXMpID09IDE6CiAgICAgICAgcmV0dXJuIGxpbmVzWzBdLCAnJwogICAgZWxpZiBsZW4obGluZXMpID49IDIgYW5kIG5vdCBsaW5lc1sxXS5yc3RyaXAoKToKICAgICAgICByZXR1cm4gbGluZXNbMF0sICdcbicuam9pbihsaW5lc1syOl0pCiAgICByZXR1cm4gJycsICdcbicuam9pbihsaW5lcykKCmRlZiBjbGFzc25hbWUob2JqZWN0LCBtb2RuYW1lKToKICAgICIiIkdldCBhIGNsYXNzIG5hbWUgYW5kIHF1YWxpZnkgaXQgd2l0aCBhIG1vZHVsZSBuYW1lIGlmIG5lY2Vzc2FyeS4iIiIKICAgIG5hbWUgPSBvYmplY3QuX19uYW1lX18KICAgIGlmIG9iamVjdC5fX21vZHVsZV9fICE9IG1vZG5hbWU6CiAgICAgICAgbmFtZSA9IG9iamVjdC5fX21vZHVsZV9fICsgJy4nICsgbmFtZQogICAgcmV0dXJuIG5hbWUKCmRlZiBpc2RhdGEob2JqZWN0KToKICAgICIiIkNoZWNrIGlmIGFuIG9iamVjdCBpcyBvZiBhIHR5cGUgdGhhdCBwcm9iYWJseSBtZWFucyBpdCdzIGRhdGEuIiIiCiAgICByZXR1cm4gbm90IChpbnNwZWN0LmlzbW9kdWxlKG9iamVjdCkgb3IgaW5zcGVjdC5pc2NsYXNzKG9iamVjdCkgb3IKICAgICAgICAgICAgICAgIGluc3BlY3QuaXNyb3V0aW5lKG9iamVjdCkgb3IgaW5zcGVjdC5pc2ZyYW1lKG9iamVjdCkgb3IKICAgICAgICAgICAgICAgIGluc3BlY3QuaXN0cmFjZWJhY2sob2JqZWN0KSBvciBpbnNwZWN0LmlzY29kZShvYmplY3QpKQoKZGVmIHJlcGxhY2UodGV4dCwgKnBhaXJzKToKICAgICIiIkRvIGEgc2VyaWVzIG9mIGdsb2JhbCByZXBsYWNlbWVudHMgb24gYSBzdHJpbmcuIiIiCiAgICB3aGlsZSBwYWlyczoKICAgICAgICB0ZXh0ID0gcGFpcnNbMV0uam9pbih0ZXh0LnNwbGl0KHBhaXJzWzBdKSkKICAgICAgICBwYWlycyA9IHBhaXJzWzI6XQogICAgcmV0dXJuIHRleHQKCmRlZiBjcmFtKHRleHQsIG1heGxlbik6CiAgICAiIiJPbWl0IHBhcnQgb2YgYSBzdHJpbmcgaWYgbmVlZGVkIHRvIG1ha2UgaXQgZml0IGluIGEgbWF4aW11bSBsZW5ndGguIiIiCiAgICBpZiBsZW4odGV4dCkgPiBtYXhsZW46CiAgICAgICAgcHJlID0gbWF4KDAsIChtYXhsZW4tMykvLzIpCiAgICAgICAgcG9zdCA9IG1heCgwLCBtYXhsZW4tMy1wcmUpCiAgICAgICAgcmV0dXJuIHRleHRbOnByZV0gKyAnLi4uJyArIHRleHRbbGVuKHRleHQpLXBvc3Q6XQogICAgcmV0dXJuIHRleHQKCl9yZV9zdHJpcGlkID0gcmUuY29tcGlsZShyJyBhdCAweFswLTlhLWZdezYsMTZ9KD4rKSQnLCByZS5JR05PUkVDQVNFKQpkZWYgc3RyaXBpZCh0ZXh0KToKICAgICIiIlJlbW92ZSB0aGUgaGV4YWRlY2ltYWwgaWQgZnJvbSBhIFB5dGhvbiBvYmplY3QgcmVwcmVzZW50YXRpb24uIiIiCiAgICAjIFRoZSBiZWhhdmlvdXIgb2YgJXAgaXMgaW1wbGVtZW50YXRpb24tZGVwZW5kZW50IGluIHRlcm1zIG9mIGNhc2UuCiAgICByZXR1cm4gX3JlX3N0cmlwaWQuc3ViKHInXDEnLCB0ZXh0KQoKZGVmIF9pc19zb21lX21ldGhvZChvYmopOgogICAgcmV0dXJuIGluc3BlY3QuaXNtZXRob2Qob2JqKSBvciBpbnNwZWN0LmlzbWV0aG9kZGVzY3JpcHRvcihvYmopCgpkZWYgYWxsbWV0aG9kcyhjbCk6CiAgICBtZXRob2RzID0ge30KICAgIGZvciBrZXksIHZhbHVlIGluIGluc3BlY3QuZ2V0bWVtYmVycyhjbCwgX2lzX3NvbWVfbWV0aG9kKToKICAgICAgICBtZXRob2RzW2tleV0gPSAxCiAgICBmb3IgYmFzZSBpbiBjbC5fX2Jhc2VzX186CiAgICAgICAgbWV0aG9kcy51cGRhdGUoYWxsbWV0aG9kcyhiYXNlKSkgIyBhbGwgeW91ciBiYXNlIGFyZSBiZWxvbmcgdG8gdXMKICAgIGZvciBrZXkgaW4gbWV0aG9kcy5rZXlzKCk6CiAgICAgICAgbWV0aG9kc1trZXldID0gZ2V0YXR0cihjbCwga2V5KQogICAgcmV0dXJuIG1ldGhvZHMKCmRlZiBfc3BsaXRfbGlzdChzLCBwcmVkaWNhdGUpOgogICAgIiIiU3BsaXQgc2VxdWVuY2UgcyB2aWEgcHJlZGljYXRlLCBhbmQgcmV0dXJuIHBhaXIgKFt0cnVlXSwgW2ZhbHNlXSkuCgogICAgVGhlIHJldHVybiB2YWx1ZSBpcyBhIDItdHVwbGUgb2YgbGlzdHMsCiAgICAgICAgKFt4IGZvciB4IGluIHMgaWYgcHJlZGljYXRlKHgpXSwKICAgICAgICAgW3ggZm9yIHggaW4gcyBpZiBub3QgcHJlZGljYXRlKHgpXSkKICAgICIiIgoKICAgIHllcyA9IFtdCiAgICBubyA9IFtdCiAgICBmb3IgeCBpbiBzOgogICAgICAgIGlmIHByZWRpY2F0ZSh4KToKICAgICAgICAgICAgeWVzLmFwcGVuZCh4KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG5vLmFwcGVuZCh4KQogICAgcmV0dXJuIHllcywgbm8KCmRlZiB2aXNpYmxlbmFtZShuYW1lLCBhbGw9Tm9uZSwgb2JqPU5vbmUpOgogICAgIiIiRGVjaWRlIHdoZXRoZXIgdG8gc2hvdyBkb2N1bWVudGF0aW9uIG9uIGEgdmFyaWFibGUuIiIiCiAgICAjIENlcnRhaW4gc3BlY2lhbCBuYW1lcyBhcmUgcmVkdW5kYW50LgogICAgX2hpZGRlbl9uYW1lcyA9ICgnX19idWlsdGluc19fJywgJ19fZG9jX18nLCAnX19maWxlX18nLCAnX19wYXRoX18nLAogICAgICAgICAgICAgICAgICAgICAnX19tb2R1bGVfXycsICdfX25hbWVfXycsICdfX3Nsb3RzX18nLCAnX19wYWNrYWdlX18nLAogICAgICAgICAgICAgICAgICAgICAnX19jYWNoZWRfXycsICdfX2F1dGhvcl9fJywgJ19fY3JlZGl0c19fJywgJ19fZGF0ZV9fJywKICAgICAgICAgICAgICAgICAgICAgJ19fdmVyc2lvbl9fJykKICAgIGlmIG5hbWUgaW4gX2hpZGRlbl9uYW1lczogcmV0dXJuIDAKICAgICMgUHJpdmF0ZSBuYW1lcyBhcmUgaGlkZGVuLCBidXQgc3BlY2lhbCBuYW1lcyBhcmUgZGlzcGxheWVkLgogICAgaWYgbmFtZS5zdGFydHN3aXRoKCdfXycpIGFuZCBuYW1lLmVuZHN3aXRoKCdfXycpOiByZXR1cm4gMQogICAgIyBOYW1lZHR1cGxlcyBoYXZlIHB1YmxpYyBmaWVsZHMgYW5kIG1ldGhvZHMgd2l0aCBhIHNpbmdsZSBsZWFkaW5nIHVuZGVyc2NvcmUKICAgIGlmIG5hbWUuc3RhcnRzd2l0aCgnXycpIGFuZCBoYXNhdHRyKG9iaiwgJ19maWVsZHMnKToKICAgICAgICByZXR1cm4gVHJ1ZQogICAgaWYgYWxsIGlzIG5vdCBOb25lOgogICAgICAgICMgb25seSBkb2N1bWVudCB0aGF0IHdoaWNoIHRoZSBwcm9ncmFtbWVyIGV4cG9ydGVkIGluIF9fYWxsX18KICAgICAgICByZXR1cm4gbmFtZSBpbiBhbGwKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIG5vdCBuYW1lLnN0YXJ0c3dpdGgoJ18nKQoKZGVmIGNsYXNzaWZ5X2NsYXNzX2F0dHJzKG9iamVjdCk6CiAgICAiIiJXcmFwIGluc3BlY3QuY2xhc3NpZnlfY2xhc3NfYXR0cnMsIHdpdGggZml4dXAgZm9yIGRhdGEgZGVzY3JpcHRvcnMuIiIiCiAgICByZXN1bHRzID0gW10KICAgIGZvciAobmFtZSwga2luZCwgY2xzLCB2YWx1ZSkgaW4gaW5zcGVjdC5jbGFzc2lmeV9jbGFzc19hdHRycyhvYmplY3QpOgogICAgICAgIGlmIGluc3BlY3QuaXNkYXRhZGVzY3JpcHRvcih2YWx1ZSk6CiAgICAgICAgICAgIGtpbmQgPSAnZGF0YSBkZXNjcmlwdG9yJwogICAgICAgIHJlc3VsdHMuYXBwZW5kKChuYW1lLCBraW5kLCBjbHMsIHZhbHVlKSkKICAgIHJldHVybiByZXN1bHRzCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIG1vZHVsZSBtYW5pcHVsYXRpb24KCmRlZiBpc3BhY2thZ2UocGF0aCk6CiAgICAiIiJHdWVzcyB3aGV0aGVyIGEgcGF0aCByZWZlcnMgdG8gYSBwYWNrYWdlIGRpcmVjdG9yeS4iIiIKICAgIGlmIG9zLnBhdGguaXNkaXIocGF0aCk6CiAgICAgICAgZm9yIGV4dCBpbiAoJy5weScsICcucHljJywgJy5weW8nKToKICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUob3MucGF0aC5qb2luKHBhdGgsICdfX2luaXRfXycgKyBleHQpKToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICByZXR1cm4gRmFsc2UKCmRlZiBzb3VyY2Vfc3lub3BzaXMoZmlsZSk6CiAgICBsaW5lID0gZmlsZS5yZWFkbGluZSgpCiAgICB3aGlsZSBsaW5lWzoxXSA9PSAnIycgb3Igbm90IGxpbmUuc3RyaXAoKToKICAgICAgICBsaW5lID0gZmlsZS5yZWFkbGluZSgpCiAgICAgICAgaWYgbm90IGxpbmU6IGJyZWFrCiAgICBsaW5lID0gbGluZS5zdHJpcCgpCiAgICBpZiBsaW5lWzo0XSA9PSAnciIiIic6IGxpbmUgPSBsaW5lWzE6XQogICAgaWYgbGluZVs6M10gPT0gJyIiIic6CiAgICAgICAgbGluZSA9IGxpbmVbMzpdCiAgICAgICAgaWYgbGluZVstMTpdID09ICdcXCc6IGxpbmUgPSBsaW5lWzotMV0KICAgICAgICB3aGlsZSBub3QgbGluZS5zdHJpcCgpOgogICAgICAgICAgICBsaW5lID0gZmlsZS5yZWFkbGluZSgpCiAgICAgICAgICAgIGlmIG5vdCBsaW5lOiBicmVhawogICAgICAgIHJlc3VsdCA9IGxpbmUuc3BsaXQoJyIiIicpWzBdLnN0cmlwKCkKICAgIGVsc2U6IHJlc3VsdCA9IE5vbmUKICAgIHJldHVybiByZXN1bHQKCmRlZiBzeW5vcHNpcyhmaWxlbmFtZSwgY2FjaGU9e30pOgogICAgIiIiR2V0IHRoZSBvbmUtbGluZSBzdW1tYXJ5IG91dCBvZiBhIG1vZHVsZSBmaWxlLiIiIgogICAgbXRpbWUgPSBvcy5zdGF0KGZpbGVuYW1lKS5zdF9tdGltZQogICAgbGFzdHVwZGF0ZSwgcmVzdWx0ID0gY2FjaGUuZ2V0KGZpbGVuYW1lLCAoTm9uZSwgTm9uZSkpCiAgICBpZiBsYXN0dXBkYXRlIGlzIE5vbmUgb3IgbGFzdHVwZGF0ZSA8IG10aW1lOgogICAgICAgIGluZm8gPSBpbnNwZWN0LmdldG1vZHVsZWluZm8oZmlsZW5hbWUpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmaWxlID0gdG9rZW5pemUub3BlbihmaWxlbmFtZSkKICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgIyBtb2R1bGUgY2FuJ3QgYmUgb3BlbmVkLCBzbyBza2lwIGl0CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgaWYgaW5mbyBhbmQgJ2InIGluIGluZm9bMl06ICMgYmluYXJ5IG1vZHVsZXMgaGF2ZSB0byBiZSBpbXBvcnRlZAogICAgICAgICAgICB0cnk6IG1vZHVsZSA9IGltcC5sb2FkX21vZHVsZSgnX190ZW1wX18nLCBmaWxlLCBmaWxlbmFtZSwgaW5mb1sxOl0pCiAgICAgICAgICAgIGV4Y2VwdDogcmV0dXJuIE5vbmUKICAgICAgICAgICAgcmVzdWx0ID0gKG1vZHVsZS5fX2RvY19fIG9yICcnKS5zcGxpdGxpbmVzKClbMF0KICAgICAgICAgICAgZGVsIHN5cy5tb2R1bGVzWydfX3RlbXBfXyddCiAgICAgICAgZWxzZTogIyB0ZXh0IG1vZHVsZXMgY2FuIGJlIGRpcmVjdGx5IGV4YW1pbmVkCiAgICAgICAgICAgIHJlc3VsdCA9IHNvdXJjZV9zeW5vcHNpcyhmaWxlKQogICAgICAgICAgICBmaWxlLmNsb3NlKCkKICAgICAgICBjYWNoZVtmaWxlbmFtZV0gPSAobXRpbWUsIHJlc3VsdCkKICAgIHJldHVybiByZXN1bHQKCmNsYXNzIEVycm9yRHVyaW5nSW1wb3J0KEV4Y2VwdGlvbik6CiAgICAiIiJFcnJvcnMgdGhhdCBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gaW1wb3J0IHNvbWV0aGluZyB0byBkb2N1bWVudCBpdC4iIiIKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmaWxlbmFtZSwgZXhjX2luZm8pOgogICAgICAgIHNlbGYuZmlsZW5hbWUgPSBmaWxlbmFtZQogICAgICAgIHNlbGYuZXhjLCBzZWxmLnZhbHVlLCBzZWxmLnRiID0gZXhjX2luZm8KCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICBleGMgPSBzZWxmLmV4Yy5fX25hbWVfXwogICAgICAgIHJldHVybiAncHJvYmxlbSBpbiAlcyAtICVzOiAlcycgJSAoc2VsZi5maWxlbmFtZSwgZXhjLCBzZWxmLnZhbHVlKQoKZGVmIGltcG9ydGZpbGUocGF0aCk6CiAgICAiIiJJbXBvcnQgYSBQeXRob24gc291cmNlIGZpbGUgb3IgY29tcGlsZWQgZmlsZSBnaXZlbiBpdHMgcGF0aC4iIiIKICAgIG1hZ2ljID0gaW1wLmdldF9tYWdpYygpCiAgICB3aXRoIG9wZW4ocGF0aCwgJ3JiJykgYXMgZmlsZToKICAgICAgICBpZiBmaWxlLnJlYWQobGVuKG1hZ2ljKSkgPT0gbWFnaWM6CiAgICAgICAgICAgIGtpbmQgPSBpbXAuUFlfQ09NUElMRUQKICAgICAgICBlbHNlOgogICAgICAgICAgICBraW5kID0gaW1wLlBZX1NPVVJDRQogICAgICAgIGZpbGUuc2VlaygwKQogICAgICAgIGZpbGVuYW1lID0gb3MucGF0aC5iYXNlbmFtZShwYXRoKQogICAgICAgIG5hbWUsIGV4dCA9IG9zLnBhdGguc3BsaXRleHQoZmlsZW5hbWUpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBtb2R1bGUgPSBpbXAubG9hZF9tb2R1bGUobmFtZSwgZmlsZSwgcGF0aCwgKGV4dCwgJ3InLCBraW5kKSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJhaXNlIEVycm9yRHVyaW5nSW1wb3J0KHBhdGgsIHN5cy5leGNfaW5mbygpKQogICAgcmV0dXJuIG1vZHVsZQoKZGVmIHNhZmVpbXBvcnQocGF0aCwgZm9yY2Vsb2FkPTAsIGNhY2hlPXt9KToKICAgICIiIkltcG9ydCBhIG1vZHVsZTsgaGFuZGxlIGVycm9yczsgcmV0dXJuIE5vbmUgaWYgdGhlIG1vZHVsZSBpc24ndCBmb3VuZC4KCiAgICBJZiB0aGUgbW9kdWxlICppcyogZm91bmQgYnV0IGFuIGV4Y2VwdGlvbiBvY2N1cnMsIGl0J3Mgd3JhcHBlZCBpbiBhbgogICAgRXJyb3JEdXJpbmdJbXBvcnQgZXhjZXB0aW9uIGFuZCByZXJhaXNlZC4gIFVubGlrZSBfX2ltcG9ydF9fLCBpZiBhCiAgICBwYWNrYWdlIHBhdGggaXMgc3BlY2lmaWVkLCB0aGUgbW9kdWxlIGF0IHRoZSBlbmQgb2YgdGhlIHBhdGggaXMgcmV0dXJuZWQsCiAgICBub3QgdGhlIHBhY2thZ2UgYXQgdGhlIGJlZ2lubmluZy4gIElmIHRoZSBvcHRpb25hbCAnZm9yY2Vsb2FkJyBhcmd1bWVudAogICAgaXMgMSwgd2UgcmVsb2FkIHRoZSBtb2R1bGUgZnJvbSBkaXNrICh1bmxlc3MgaXQncyBhIGR5bmFtaWMgZXh0ZW5zaW9uKS4iIiIKICAgIHRyeToKICAgICAgICAjIElmIGZvcmNlbG9hZCBpcyAxIGFuZCB0aGUgbW9kdWxlIGhhcyBiZWVuIHByZXZpb3VzbHkgbG9hZGVkIGZyb20KICAgICAgICAjIGRpc2ssIHdlIGFsd2F5cyBoYXZlIHRvIHJlbG9hZCB0aGUgbW9kdWxlLiAgQ2hlY2tpbmcgdGhlIGZpbGUncwogICAgICAgICMgbXRpbWUgaXNuJ3QgZ29vZCBlbm91Z2ggKGUuZy4gdGhlIG1vZHVsZSBjb3VsZCBjb250YWluIGEgY2xhc3MKICAgICAgICAjIHRoYXQgaW5oZXJpdHMgZnJvbSBhbm90aGVyIG1vZHVsZSB0aGF0IGhhcyBjaGFuZ2VkKS4KICAgICAgICBpZiBmb3JjZWxvYWQgYW5kIHBhdGggaW4gc3lzLm1vZHVsZXM6CiAgICAgICAgICAgIGlmIHBhdGggbm90IGluIHN5cy5idWlsdGluX21vZHVsZV9uYW1lczoKICAgICAgICAgICAgICAgICMgUmVtb3ZlIHRoZSBtb2R1bGUgZnJvbSBzeXMubW9kdWxlcyBhbmQgcmUtaW1wb3J0IHRvIHRyeQogICAgICAgICAgICAgICAgIyBhbmQgYXZvaWQgcHJvYmxlbXMgd2l0aCBwYXJ0aWFsbHkgbG9hZGVkIG1vZHVsZXMuCiAgICAgICAgICAgICAgICAjIEFsc28gcmVtb3ZlIGFueSBzdWJtb2R1bGVzIGJlY2F1c2UgdGhleSB3b24ndCBhcHBlYXIKICAgICAgICAgICAgICAgICMgaW4gdGhlIG5ld2x5IGxvYWRlZCBtb2R1bGUncyBuYW1lc3BhY2UgaWYgdGhleSdyZSBhbHJlYWR5CiAgICAgICAgICAgICAgICAjIGluIHN5cy5tb2R1bGVzLgogICAgICAgICAgICAgICAgc3VicyA9IFttIGZvciBtIGluIHN5cy5tb2R1bGVzIGlmIG0uc3RhcnRzd2l0aChwYXRoICsgJy4nKV0KICAgICAgICAgICAgICAgIGZvciBrZXkgaW4gW3BhdGhdICsgc3ViczoKICAgICAgICAgICAgICAgICAgICAjIFByZXZlbnQgZ2FyYmFnZSBjb2xsZWN0aW9uLgogICAgICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSBzeXMubW9kdWxlc1trZXldCiAgICAgICAgICAgICAgICAgICAgZGVsIHN5cy5tb2R1bGVzW2tleV0KICAgICAgICBtb2R1bGUgPSBfX2ltcG9ydF9fKHBhdGgpCiAgICBleGNlcHQ6CiAgICAgICAgIyBEaWQgdGhlIGVycm9yIG9jY3VyIGJlZm9yZSBvciBhZnRlciB0aGUgbW9kdWxlIHdhcyBmb3VuZD8KICAgICAgICAoZXhjLCB2YWx1ZSwgdGIpID0gaW5mbyA9IHN5cy5leGNfaW5mbygpCiAgICAgICAgaWYgcGF0aCBpbiBzeXMubW9kdWxlczoKICAgICAgICAgICAgIyBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBleGVjdXRpbmcgdGhlIGltcG9ydGVkIG1vZHVsZS4KICAgICAgICAgICAgcmFpc2UgRXJyb3JEdXJpbmdJbXBvcnQoc3lzLm1vZHVsZXNbcGF0aF0uX19maWxlX18sIGluZm8pCiAgICAgICAgZWxpZiBleGMgaXMgU3ludGF4RXJyb3I6CiAgICAgICAgICAgICMgQSBTeW50YXhFcnJvciBvY2N1cnJlZCBiZWZvcmUgd2UgY291bGQgZXhlY3V0ZSB0aGUgbW9kdWxlLgogICAgICAgICAgICByYWlzZSBFcnJvckR1cmluZ0ltcG9ydCh2YWx1ZS5maWxlbmFtZSwgaW5mbykKICAgICAgICBlbGlmIGV4YyBpcyBJbXBvcnRFcnJvciBhbmQgZXh0cmFjdF90Yih0YilbLTFdWzJdPT0nc2FmZWltcG9ydCc6CiAgICAgICAgICAgICMgVGhlIGltcG9ydCBlcnJvciBvY2N1cnJlZCBkaXJlY3RseSBpbiB0aGlzIGZ1bmN0aW9uLAogICAgICAgICAgICAjIHdoaWNoIG1lYW5zIHRoZXJlIGlzIG5vIHN1Y2ggbW9kdWxlIGluIHRoZSBwYXRoLgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgU29tZSBvdGhlciBlcnJvciBvY2N1cnJlZCBkdXJpbmcgdGhlIGltcG9ydGluZyBwcm9jZXNzLgogICAgICAgICAgICByYWlzZSBFcnJvckR1cmluZ0ltcG9ydChwYXRoLCBzeXMuZXhjX2luZm8oKSkKICAgIGZvciBwYXJ0IGluIHBhdGguc3BsaXQoJy4nKVsxOl06CiAgICAgICAgdHJ5OiBtb2R1bGUgPSBnZXRhdHRyKG1vZHVsZSwgcGFydCkKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6IHJldHVybiBOb25lCiAgICByZXR1cm4gbW9kdWxlCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZm9ybWF0dGVyIGJhc2UgY2xhc3MKCmNsYXNzIERvYzoKCiAgICBQWVRIT05ET0NTID0gb3MuZW52aXJvbi5nZXQoIlBZVEhPTkRPQ1MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vZG9jcy5weXRob24ub3JnLyVkLiVkL2xpYnJhcnkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJSBzeXMudmVyc2lvbl9pbmZvWzoyXSkKCiAgICBkZWYgZG9jdW1lbnQoc2VsZiwgb2JqZWN0LCBuYW1lPU5vbmUsICphcmdzKToKICAgICAgICAiIiJHZW5lcmF0ZSBkb2N1bWVudGF0aW9uIGZvciBhbiBvYmplY3QuIiIiCiAgICAgICAgYXJncyA9IChvYmplY3QsIG5hbWUpICsgYXJncwogICAgICAgICMgJ3RyeScgY2xhdXNlIGlzIHRvIGF0dGVtcHQgdG8gaGFuZGxlIHRoZSBwb3NzaWJpbGl0eSB0aGF0IGluc3BlY3QKICAgICAgICAjIGlkZW50aWZpZXMgc29tZXRoaW5nIGluIGEgd2F5IHRoYXQgcHlkb2MgaXRzZWxmIGhhcyBpc3N1ZXMgaGFuZGxpbmc7CiAgICAgICAgIyB0aGluayAnc3VwZXInIGFuZCBob3cgaXQgaXMgYSBkZXNjcmlwdG9yICh3aGljaCByYWlzZXMgdGhlIGV4Y2VwdGlvbgogICAgICAgICMgYnkgbGFja2luZyBhIF9fbmFtZV9fIGF0dHJpYnV0ZSkgYW5kIGFuIGluc3RhbmNlLgogICAgICAgIGlmIGluc3BlY3QuaXNnZXRzZXRkZXNjcmlwdG9yKG9iamVjdCk6IHJldHVybiBzZWxmLmRvY2RhdGEoKmFyZ3MpCiAgICAgICAgaWYgaW5zcGVjdC5pc21lbWJlcmRlc2NyaXB0b3Iob2JqZWN0KTogcmV0dXJuIHNlbGYuZG9jZGF0YSgqYXJncykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIGluc3BlY3QuaXNtb2R1bGUob2JqZWN0KTogcmV0dXJuIHNlbGYuZG9jbW9kdWxlKCphcmdzKQogICAgICAgICAgICBpZiBpbnNwZWN0LmlzY2xhc3Mob2JqZWN0KTogcmV0dXJuIHNlbGYuZG9jY2xhc3MoKmFyZ3MpCiAgICAgICAgICAgIGlmIGluc3BlY3QuaXNyb3V0aW5lKG9iamVjdCk6IHJldHVybiBzZWxmLmRvY3JvdXRpbmUoKmFyZ3MpCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICBwYXNzCiAgICAgICAgaWYgaXNpbnN0YW5jZShvYmplY3QsIHByb3BlcnR5KTogcmV0dXJuIHNlbGYuZG9jcHJvcGVydHkoKmFyZ3MpCiAgICAgICAgcmV0dXJuIHNlbGYuZG9jb3RoZXIoKmFyZ3MpCgogICAgZGVmIGZhaWwoc2VsZiwgb2JqZWN0LCBuYW1lPU5vbmUsICphcmdzKToKICAgICAgICAiIiJSYWlzZSBhbiBleGNlcHRpb24gZm9yIHVuaW1wbGVtZW50ZWQgdHlwZXMuIiIiCiAgICAgICAgbWVzc2FnZSA9ICJkb24ndCBrbm93IGhvdyB0byBkb2N1bWVudCBvYmplY3QlcyBvZiB0eXBlICVzIiAlICgKICAgICAgICAgICAgbmFtZSBhbmQgJyAnICsgcmVwcihuYW1lKSwgdHlwZShvYmplY3QpLl9fbmFtZV9fKQogICAgICAgIHJhaXNlIFR5cGVFcnJvcihtZXNzYWdlKQoKICAgIGRvY21vZHVsZSA9IGRvY2NsYXNzID0gZG9jcm91dGluZSA9IGRvY290aGVyID0gZG9jcHJvcGVydHkgPSBkb2NkYXRhID0gZmFpbAoKICAgIGRlZiBnZXRkb2Nsb2Moc2VsZiwgb2JqZWN0KToKICAgICAgICAiIiJSZXR1cm4gdGhlIGxvY2F0aW9uIG9mIG1vZHVsZSBkb2NzIG9yIE5vbmUiIiIKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmaWxlID0gaW5zcGVjdC5nZXRhYnNmaWxlKG9iamVjdCkKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICBmaWxlID0gJyhidWlsdC1pbiknCgogICAgICAgIGRvY2xvYyA9IG9zLmVudmlyb24uZ2V0KCJQWVRIT05ET0NTIiwgc2VsZi5QWVRIT05ET0NTKQoKICAgICAgICBiYXNlZGlyID0gb3MucGF0aC5qb2luKHN5cy5leGVjX3ByZWZpeCwgImxpYiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAicHl0aG9uJWQuJWQiICUgIHN5cy52ZXJzaW9uX2luZm9bOjJdKQogICAgICAgIGlmIChpc2luc3RhbmNlKG9iamVjdCwgdHlwZShvcykpIGFuZAogICAgICAgICAgICAob2JqZWN0Ll9fbmFtZV9fIGluICgnZXJybm8nLCAnZXhjZXB0aW9ucycsICdnYycsICdpbXAnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWFyc2hhbCcsICdwb3NpeCcsICdzaWduYWwnLCAnc3lzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ190aHJlYWQnLCAnemlwaW1wb3J0Jykgb3IKICAgICAgICAgICAgIChmaWxlLnN0YXJ0c3dpdGgoYmFzZWRpcikgYW5kCiAgICAgICAgICAgICAgbm90IGZpbGUuc3RhcnRzd2l0aChvcy5wYXRoLmpvaW4oYmFzZWRpciwgJ2Rpc3QtcGFja2FnZXMnKSkgYW5kCiAgICAgICAgICAgICAgbm90IGZpbGUuc3RhcnRzd2l0aChvcy5wYXRoLmpvaW4oYmFzZWRpciwgJ3NpdGUtcGFja2FnZXMnKSkpKSBhbmQKICAgICAgICAgICAgb2JqZWN0Ll9fbmFtZV9fIG5vdCBpbiAoJ3htbC5ldHJlZScsICd0ZXN0LnB5ZG9jX21vZCcpKToKICAgICAgICAgICAgaWYgZG9jbG9jLnN0YXJ0c3dpdGgoImh0dHA6Ly8iKToKICAgICAgICAgICAgICAgIGRvY2xvYyA9ICIlcy8lcyIgJSAoZG9jbG9jLnJzdHJpcCgiLyIpLCBvYmplY3QuX19uYW1lX18pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBkb2Nsb2MgPSBvcy5wYXRoLmpvaW4oZG9jbG9jLCBvYmplY3QuX19uYW1lX18gKyAiLmh0bWwiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRvY2xvYyA9IE5vbmUKICAgICAgICByZXR1cm4gZG9jbG9jCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEhUTUwgZG9jdW1lbnRhdGlvbiBnZW5lcmF0b3IKCmNsYXNzIEhUTUxSZXByKFJlcHIpOgogICAgIiIiQ2xhc3MgZm9yIHNhZmVseSBtYWtpbmcgYW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZiBhIFB5dGhvbiBvYmplY3QuIiIiCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgUmVwci5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYubWF4bGlzdCA9IHNlbGYubWF4dHVwbGUgPSAyMAogICAgICAgIHNlbGYubWF4ZGljdCA9IDEwCiAgICAgICAgc2VsZi5tYXhzdHJpbmcgPSBzZWxmLm1heG90aGVyID0gMTAwCgogICAgZGVmIGVzY2FwZShzZWxmLCB0ZXh0KToKICAgICAgICByZXR1cm4gcmVwbGFjZSh0ZXh0LCAnJicsICcmYW1wOycsICc8JywgJyZsdDsnLCAnPicsICcmZ3Q7JykKCiAgICBkZWYgcmVwcihzZWxmLCBvYmplY3QpOgogICAgICAgIHJldHVybiBSZXByLnJlcHIoc2VsZiwgb2JqZWN0KQoKICAgIGRlZiByZXByMShzZWxmLCB4LCBsZXZlbCk6CiAgICAgICAgaWYgaGFzYXR0cih0eXBlKHgpLCAnX19uYW1lX18nKToKICAgICAgICAgICAgbWV0aG9kbmFtZSA9ICdyZXByXycgKyAnXycuam9pbih0eXBlKHgpLl9fbmFtZV9fLnNwbGl0KCkpCiAgICAgICAgICAgIGlmIGhhc2F0dHIoc2VsZiwgbWV0aG9kbmFtZSk6CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0YXR0cihzZWxmLCBtZXRob2RuYW1lKSh4LCBsZXZlbCkKICAgICAgICByZXR1cm4gc2VsZi5lc2NhcGUoY3JhbShzdHJpcGlkKHJlcHIoeCkpLCBzZWxmLm1heG90aGVyKSkKCiAgICBkZWYgcmVwcl9zdHJpbmcoc2VsZiwgeCwgbGV2ZWwpOgogICAgICAgIHRlc3QgPSBjcmFtKHgsIHNlbGYubWF4c3RyaW5nKQogICAgICAgIHRlc3RyZXByID0gcmVwcih0ZXN0KQogICAgICAgIGlmICdcXCcgaW4gdGVzdCBhbmQgJ1xcJyBub3QgaW4gcmVwbGFjZSh0ZXN0cmVwciwgcidcXCcsICcnKToKICAgICAgICAgICAgIyBCYWNrc2xhc2hlcyBhcmUgb25seSBsaXRlcmFsIGluIHRoZSBzdHJpbmcgYW5kIGFyZSBuZXZlcgogICAgICAgICAgICAjIG5lZWRlZCB0byBtYWtlIGFueSBzcGVjaWFsIGNoYXJhY3RlcnMsIHNvIHNob3cgYSByYXcgc3RyaW5nLgogICAgICAgICAgICByZXR1cm4gJ3InICsgdGVzdHJlcHJbMF0gKyBzZWxmLmVzY2FwZSh0ZXN0KSArIHRlc3RyZXByWzBdCiAgICAgICAgcmV0dXJuIHJlLnN1YihyJygoXFxbXFxhYmZucnR2XCciXXxcXFswLTldLi58XFx4Li58XFx1Li4uLikrKScsCiAgICAgICAgICAgICAgICAgICAgICByJzxmb250IGNvbG9yPSIjYzA0MGMwIj5cMTwvZm9udD4nLAogICAgICAgICAgICAgICAgICAgICAgc2VsZi5lc2NhcGUodGVzdHJlcHIpKQoKICAgIHJlcHJfc3RyID0gcmVwcl9zdHJpbmcKCiAgICBkZWYgcmVwcl9pbnN0YW5jZShzZWxmLCB4LCBsZXZlbCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZi5lc2NhcGUoY3JhbShzdHJpcGlkKHJlcHIoeCkpLCBzZWxmLm1heHN0cmluZykpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICByZXR1cm4gc2VsZi5lc2NhcGUoJzwlcyBpbnN0YW5jZT4nICUgeC5fX2NsYXNzX18uX19uYW1lX18pCgogICAgcmVwcl91bmljb2RlID0gcmVwcl9zdHJpbmcKCmNsYXNzIEhUTUxEb2MoRG9jKToKICAgICIiIkZvcm1hdHRlciBjbGFzcyBmb3IgSFRNTCBkb2N1bWVudGF0aW9uLiIiIgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBIVE1MIGZvcm1hdHRpbmcgdXRpbGl0aWVzCgogICAgX3JlcHJfaW5zdGFuY2UgPSBIVE1MUmVwcigpCiAgICByZXByID0gX3JlcHJfaW5zdGFuY2UucmVwcgogICAgZXNjYXBlID0gX3JlcHJfaW5zdGFuY2UuZXNjYXBlCgogICAgZGVmIHBhZ2Uoc2VsZiwgdGl0bGUsIGNvbnRlbnRzKToKICAgICAgICAiIiJGb3JtYXQgYW4gSFRNTCBwYWdlLiIiIgogICAgICAgIHJldHVybiAnJydcCjwhRE9DVFlQRSBodG1sIFBVQkxJQyAiLS8vVzNDLy9EVEQgSFRNTCA0LjAgVHJhbnNpdGlvbmFsLy9FTiI+CjxodG1sPjxoZWFkPjx0aXRsZT5QeXRob246ICVzPC90aXRsZT4KPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgiPgo8L2hlYWQ+PGJvZHkgYmdjb2xvcj0iI2YwZjBmOCI+CiVzCjwvYm9keT48L2h0bWw+JycnICUgKHRpdGxlLCBjb250ZW50cykKCiAgICBkZWYgaGVhZGluZyhzZWxmLCB0aXRsZSwgZmdjb2wsIGJnY29sLCBleHRyYXM9JycpOgogICAgICAgICIiIkZvcm1hdCBhIHBhZ2UgaGVhZGluZy4iIiIKICAgICAgICByZXR1cm4gJycnCjx0YWJsZSB3aWR0aD0iMTAwJSUiIGNlbGxzcGFjaW5nPTAgY2VsbHBhZGRpbmc9MiBib3JkZXI9MCBzdW1tYXJ5PSJoZWFkaW5nIj4KPHRyIGJnY29sb3I9IiVzIj4KPHRkIHZhbGlnbj1ib3R0b20+Jm5ic3A7PGJyPgo8Zm9udCBjb2xvcj0iJXMiIGZhY2U9ImhlbHZldGljYSwgYXJpYWwiPiZuYnNwOzxicj4lczwvZm9udD48L3RkCj48dGQgYWxpZ249cmlnaHQgdmFsaWduPWJvdHRvbQo+PGZvbnQgY29sb3I9IiVzIiBmYWNlPSJoZWx2ZXRpY2EsIGFyaWFsIj4lczwvZm9udD48L3RkPjwvdHI+PC90YWJsZT4KICAgICcnJyAlIChiZ2NvbCwgZmdjb2wsIHRpdGxlLCBmZ2NvbCwgZXh0cmFzIG9yICcmbmJzcDsnKQoKICAgIGRlZiBzZWN0aW9uKHNlbGYsIHRpdGxlLCBmZ2NvbCwgYmdjb2wsIGNvbnRlbnRzLCB3aWR0aD02LAogICAgICAgICAgICAgICAgcHJlbHVkZT0nJywgbWFyZ2luYWxpYT1Ob25lLCBnYXA9JyZuYnNwOycpOgogICAgICAgICIiIkZvcm1hdCBhIHNlY3Rpb24gd2l0aCBhIGhlYWRpbmcuIiIiCiAgICAgICAgaWYgbWFyZ2luYWxpYSBpcyBOb25lOgogICAgICAgICAgICBtYXJnaW5hbGlhID0gJzx0dD4nICsgJyZuYnNwOycgKiB3aWR0aCArICc8L3R0PicKICAgICAgICByZXN1bHQgPSAnJyc8cD4KPHRhYmxlIHdpZHRoPSIxMDAlJSIgY2VsbHNwYWNpbmc9MCBjZWxscGFkZGluZz0yIGJvcmRlcj0wIHN1bW1hcnk9InNlY3Rpb24iPgo8dHIgYmdjb2xvcj0iJXMiPgo8dGQgY29sc3Bhbj0zIHZhbGlnbj1ib3R0b20+Jm5ic3A7PGJyPgo8Zm9udCBjb2xvcj0iJXMiIGZhY2U9ImhlbHZldGljYSwgYXJpYWwiPiVzPC9mb250PjwvdGQ+PC90cj4KICAgICcnJyAlIChiZ2NvbCwgZmdjb2wsIHRpdGxlKQogICAgICAgIGlmIHByZWx1ZGU6CiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArICcnJwo8dHIgYmdjb2xvcj0iJXMiPjx0ZCByb3dzcGFuPTI+JXM8L3RkPgo8dGQgY29sc3Bhbj0yPiVzPC90ZD48L3RyPgo8dHI+PHRkPiVzPC90ZD4nJycgJSAoYmdjb2wsIG1hcmdpbmFsaWEsIHByZWx1ZGUsIGdhcCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyAnJycKPHRyPjx0ZCBiZ2NvbG9yPSIlcyI+JXM8L3RkPjx0ZD4lczwvdGQ+JycnICUgKGJnY29sLCBtYXJnaW5hbGlhLCBnYXApCgogICAgICAgIHJldHVybiByZXN1bHQgKyAnXG48dGQgd2lkdGg9IjEwMCUlIj4lczwvdGQ+PC90cj48L3RhYmxlPicgJSBjb250ZW50cwoKICAgIGRlZiBiaWdzZWN0aW9uKHNlbGYsIHRpdGxlLCAqYXJncyk6CiAgICAgICAgIiIiRm9ybWF0IGEgc2VjdGlvbiB3aXRoIGEgYmlnIGhlYWRpbmcuIiIiCiAgICAgICAgdGl0bGUgPSAnPGJpZz48c3Ryb25nPiVzPC9zdHJvbmc+PC9iaWc+JyAlIHRpdGxlCiAgICAgICAgcmV0dXJuIHNlbGYuc2VjdGlvbih0aXRsZSwgKmFyZ3MpCgogICAgZGVmIHByZWZvcm1hdChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJGb3JtYXQgbGl0ZXJhbCBwcmVmb3JtYXR0ZWQgdGV4dC4iIiIKICAgICAgICB0ZXh0ID0gc2VsZi5lc2NhcGUodGV4dC5leHBhbmR0YWJzKCkpCiAgICAgICAgcmV0dXJuIHJlcGxhY2UodGV4dCwgJ1xuXG4nLCAnXG4gXG4nLCAnXG5cbicsICdcbiBcbicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyAnLCAnJm5ic3A7JywgJ1xuJywgJzxicj5cbicpCgogICAgZGVmIG11bHRpY29sdW1uKHNlbGYsIGxpc3QsIGZvcm1hdCwgY29scz00KToKICAgICAgICAiIiJGb3JtYXQgYSBsaXN0IG9mIGl0ZW1zIGludG8gYSBtdWx0aS1jb2x1bW4gbGlzdC4iIiIKICAgICAgICByZXN1bHQgPSAnJwogICAgICAgIHJvd3MgPSAobGVuKGxpc3QpK2NvbHMtMSkvL2NvbHMKICAgICAgICBmb3IgY29sIGluIHJhbmdlKGNvbHMpOgogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyAnPHRkIHdpZHRoPSIlZCUlIiB2YWxpZ249dG9wPicgJSAoMTAwLy9jb2xzKQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShyb3dzKmNvbCwgcm93cypjb2wrcm93cyk6CiAgICAgICAgICAgICAgICBpZiBpIDwgbGVuKGxpc3QpOgogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIGZvcm1hdChsaXN0W2ldKSArICc8YnI+XG4nCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArICc8L3RkPicKICAgICAgICByZXR1cm4gJzx0YWJsZSB3aWR0aD0iMTAwJSUiIHN1bW1hcnk9Imxpc3QiPjx0cj4lczwvdHI+PC90YWJsZT4nICUgcmVzdWx0CgogICAgZGVmIGdyZXkoc2VsZiwgdGV4dCk6IHJldHVybiAnPGZvbnQgY29sb3I9IiM5MDkwOTAiPiVzPC9mb250PicgJSB0ZXh0CgogICAgZGVmIG5hbWVsaW5rKHNlbGYsIG5hbWUsICpkaWN0cyk6CiAgICAgICAgIiIiTWFrZSBhIGxpbmsgZm9yIGFuIGlkZW50aWZpZXIsIGdpdmVuIG5hbWUtdG8tVVJMIG1hcHBpbmdzLiIiIgogICAgICAgIGZvciBkaWN0IGluIGRpY3RzOgogICAgICAgICAgICBpZiBuYW1lIGluIGRpY3Q6CiAgICAgICAgICAgICAgICByZXR1cm4gJzxhIGhyZWY9IiVzIj4lczwvYT4nICUgKGRpY3RbbmFtZV0sIG5hbWUpCiAgICAgICAgcmV0dXJuIG5hbWUKCiAgICBkZWYgY2xhc3NsaW5rKHNlbGYsIG9iamVjdCwgbW9kbmFtZSk6CiAgICAgICAgIiIiTWFrZSBhIGxpbmsgZm9yIGEgY2xhc3MuIiIiCiAgICAgICAgbmFtZSwgbW9kdWxlID0gb2JqZWN0Ll9fbmFtZV9fLCBzeXMubW9kdWxlcy5nZXQob2JqZWN0Ll9fbW9kdWxlX18pCiAgICAgICAgaWYgaGFzYXR0cihtb2R1bGUsIG5hbWUpIGFuZCBnZXRhdHRyKG1vZHVsZSwgbmFtZSkgaXMgb2JqZWN0OgogICAgICAgICAgICByZXR1cm4gJzxhIGhyZWY9IiVzLmh0bWwjJXMiPiVzPC9hPicgJSAoCiAgICAgICAgICAgICAgICBtb2R1bGUuX19uYW1lX18sIG5hbWUsIGNsYXNzbmFtZShvYmplY3QsIG1vZG5hbWUpKQogICAgICAgIHJldHVybiBjbGFzc25hbWUob2JqZWN0LCBtb2RuYW1lKQoKICAgIGRlZiBtb2R1bGVsaW5rKHNlbGYsIG9iamVjdCk6CiAgICAgICAgIiIiTWFrZSBhIGxpbmsgZm9yIGEgbW9kdWxlLiIiIgogICAgICAgIHJldHVybiAnPGEgaHJlZj0iJXMuaHRtbCI+JXM8L2E+JyAlIChvYmplY3QuX19uYW1lX18sIG9iamVjdC5fX25hbWVfXykKCiAgICBkZWYgbW9kcGtnbGluayhzZWxmLCBtb2Rwa2dpbmZvKToKICAgICAgICAiIiJNYWtlIGEgbGluayBmb3IgYSBtb2R1bGUgb3IgcGFja2FnZSB0byBkaXNwbGF5IGluIGFuIGluZGV4LiIiIgogICAgICAgIG5hbWUsIHBhdGgsIGlzcGFja2FnZSwgc2hhZG93ZWQgPSBtb2Rwa2dpbmZvCiAgICAgICAgaWYgc2hhZG93ZWQ6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmdyZXkobmFtZSkKICAgICAgICBpZiBwYXRoOgogICAgICAgICAgICB1cmwgPSAnJXMuJXMuaHRtbCcgJSAocGF0aCwgbmFtZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICB1cmwgPSAnJXMuaHRtbCcgJSBuYW1lCiAgICAgICAgaWYgaXNwYWNrYWdlOgogICAgICAgICAgICB0ZXh0ID0gJzxzdHJvbmc+JXM8L3N0cm9uZz4mbmJzcDsocGFja2FnZSknICUgbmFtZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRleHQgPSBuYW1lCiAgICAgICAgcmV0dXJuICc8YSBocmVmPSIlcyI+JXM8L2E+JyAlICh1cmwsIHRleHQpCgogICAgZGVmIGZpbGVsaW5rKHNlbGYsIHVybCwgcGF0aCk6CiAgICAgICAgIiIiTWFrZSBhIGxpbmsgdG8gc291cmNlIGZpbGUuIiIiCiAgICAgICAgcmV0dXJuICc8YSBocmVmPSJmaWxlOiVzIj4lczwvYT4nICUgKHVybCwgcGF0aCkKCiAgICBkZWYgbWFya3VwKHNlbGYsIHRleHQsIGVzY2FwZT1Ob25lLCBmdW5jcz17fSwgY2xhc3Nlcz17fSwgbWV0aG9kcz17fSk6CiAgICAgICAgIiIiTWFyayB1cCBzb21lIHBsYWluIHRleHQsIGdpdmVuIGEgY29udGV4dCBvZiBzeW1ib2xzIHRvIGxvb2sgZm9yLgogICAgICAgIEVhY2ggY29udGV4dCBkaWN0aW9uYXJ5IG1hcHMgb2JqZWN0IG5hbWVzIHRvIGFuY2hvciBuYW1lcy4iIiIKICAgICAgICBlc2NhcGUgPSBlc2NhcGUgb3Igc2VsZi5lc2NhcGUKICAgICAgICByZXN1bHRzID0gW10KICAgICAgICBoZXJlID0gMAogICAgICAgIHBhdHRlcm4gPSByZS5jb21waWxlKHInXGIoKGh0dHB8ZnRwKTovL1xTK1tcdy9dfCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByJ1JGQ1stIF0/KFxkKyl8JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHInUEVQWy0gXT8oXGQrKXwnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcicoc2VsZlwuKT8oXHcrKSknKQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIG1hdGNoID0gcGF0dGVybi5zZWFyY2godGV4dCwgaGVyZSkKICAgICAgICAgICAgaWYgbm90IG1hdGNoOiBicmVhawogICAgICAgICAgICBzdGFydCwgZW5kID0gbWF0Y2guc3BhbigpCiAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKGVzY2FwZSh0ZXh0W2hlcmU6c3RhcnRdKSkKCiAgICAgICAgICAgIGFsbCwgc2NoZW1lLCByZmMsIHBlcCwgc2VsZmRvdCwgbmFtZSA9IG1hdGNoLmdyb3VwcygpCiAgICAgICAgICAgIGlmIHNjaGVtZToKICAgICAgICAgICAgICAgIHVybCA9IGVzY2FwZShhbGwpLnJlcGxhY2UoJyInLCAnJnF1b3Q7JykKICAgICAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKCc8YSBocmVmPSIlcyI+JXM8L2E+JyAlICh1cmwsIHVybCkpCiAgICAgICAgICAgIGVsaWYgcmZjOgogICAgICAgICAgICAgICAgdXJsID0gJ2h0dHA6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYyVkLnR4dCcgJSBpbnQocmZjKQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoJzxhIGhyZWY9IiVzIj4lczwvYT4nICUgKHVybCwgZXNjYXBlKGFsbCkpKQogICAgICAgICAgICBlbGlmIHBlcDoKICAgICAgICAgICAgICAgIHVybCA9ICdodHRwOi8vd3d3LnB5dGhvbi5vcmcvZGV2L3BlcHMvcGVwLSUwNGQvJyAlIGludChwZXApCiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnPGEgaHJlZj0iJXMiPiVzPC9hPicgJSAodXJsLCBlc2NhcGUoYWxsKSkpCiAgICAgICAgICAgIGVsaWYgdGV4dFtlbmQ6ZW5kKzFdID09ICcoJzoKICAgICAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKHNlbGYubmFtZWxpbmsobmFtZSwgbWV0aG9kcywgZnVuY3MsIGNsYXNzZXMpKQogICAgICAgICAgICBlbGlmIHNlbGZkb3Q6CiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnc2VsZi48c3Ryb25nPiVzPC9zdHJvbmc+JyAlIG5hbWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZChzZWxmLm5hbWVsaW5rKG5hbWUsIGNsYXNzZXMpKQogICAgICAgICAgICBoZXJlID0gZW5kCiAgICAgICAgcmVzdWx0cy5hcHBlbmQoZXNjYXBlKHRleHRbaGVyZTpdKSkKICAgICAgICByZXR1cm4gJycuam9pbihyZXN1bHRzKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB0eXBlLXNwZWNpZmljIHJvdXRpbmVzCgogICAgZGVmIGZvcm1hdHRyZWUoc2VsZiwgdHJlZSwgbW9kbmFtZSwgcGFyZW50PU5vbmUpOgogICAgICAgICIiIlByb2R1Y2UgSFRNTCBmb3IgYSBjbGFzcyB0cmVlIGFzIGdpdmVuIGJ5IGluc3BlY3QuZ2V0Y2xhc3N0cmVlKCkuIiIiCiAgICAgICAgcmVzdWx0ID0gJycKICAgICAgICBmb3IgZW50cnkgaW4gdHJlZToKICAgICAgICAgICAgaWYgdHlwZShlbnRyeSkgaXMgdHlwZSgoKSk6CiAgICAgICAgICAgICAgICBjLCBiYXNlcyA9IGVudHJ5CiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyAnPGR0Pjxmb250IGZhY2U9ImhlbHZldGljYSwgYXJpYWwiPicKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIHNlbGYuY2xhc3NsaW5rKGMsIG1vZG5hbWUpCiAgICAgICAgICAgICAgICBpZiBiYXNlcyBhbmQgYmFzZXMgIT0gKHBhcmVudCwpOgogICAgICAgICAgICAgICAgICAgIHBhcmVudHMgPSBbXQogICAgICAgICAgICAgICAgICAgIGZvciBiYXNlIGluIGJhc2VzOgogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRzLmFwcGVuZChzZWxmLmNsYXNzbGluayhiYXNlLCBtb2RuYW1lKSkKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyAnKCcgKyAnLCAnLmpvaW4ocGFyZW50cykgKyAnKScKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArICdcbjwvZm9udD48L2R0PicKICAgICAgICAgICAgZWxpZiB0eXBlKGVudHJ5KSBpcyB0eXBlKFtdKToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArICc8ZGQ+XG4lczwvZGQ+XG4nICUgc2VsZi5mb3JtYXR0cmVlKAogICAgICAgICAgICAgICAgICAgIGVudHJ5LCBtb2RuYW1lLCBjKQogICAgICAgIHJldHVybiAnPGRsPlxuJXM8L2RsPlxuJyAlIHJlc3VsdAoKICAgIGRlZiBkb2Ntb2R1bGUoc2VsZiwgb2JqZWN0LCBuYW1lPU5vbmUsIG1vZD1Ob25lLCAqaWdub3JlZCk6CiAgICAgICAgIiIiUHJvZHVjZSBIVE1MIGRvY3VtZW50YXRpb24gZm9yIGEgbW9kdWxlIG9iamVjdC4iIiIKICAgICAgICBuYW1lID0gb2JqZWN0Ll9fbmFtZV9fICMgaWdub3JlIHRoZSBwYXNzZWQtaW4gbmFtZQogICAgICAgIHRyeToKICAgICAgICAgICAgYWxsID0gb2JqZWN0Ll9fYWxsX18KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIGFsbCA9IE5vbmUKICAgICAgICBwYXJ0cyA9IG5hbWUuc3BsaXQoJy4nKQogICAgICAgIGxpbmtzID0gW10KICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4ocGFydHMpLTEpOgogICAgICAgICAgICBsaW5rcy5hcHBlbmQoCiAgICAgICAgICAgICAgICAnPGEgaHJlZj0iJXMuaHRtbCI+PGZvbnQgY29sb3I9IiNmZmZmZmYiPiVzPC9mb250PjwvYT4nICUKICAgICAgICAgICAgICAgICgnLicuam9pbihwYXJ0c1s6aSsxXSksIHBhcnRzW2ldKSkKICAgICAgICBsaW5rZWRuYW1lID0gJy4nLmpvaW4obGlua3MgKyBwYXJ0c1stMTpdKQogICAgICAgIGhlYWQgPSAnPGJpZz48YmlnPjxzdHJvbmc+JXM8L3N0cm9uZz48L2JpZz48L2JpZz4nICUgbGlua2VkbmFtZQogICAgICAgIHRyeToKICAgICAgICAgICAgcGF0aCA9IGluc3BlY3QuZ2V0YWJzZmlsZShvYmplY3QpCiAgICAgICAgICAgIHVybCA9IHBhdGgKICAgICAgICAgICAgaWYgc3lzLnBsYXRmb3JtID09ICd3aW4zMic6CiAgICAgICAgICAgICAgICBpbXBvcnQgbnR1cmwycGF0aAogICAgICAgICAgICAgICAgdXJsID0gbnR1cmwycGF0aC5wYXRobmFtZTJ1cmwocGF0aCkKICAgICAgICAgICAgZmlsZWxpbmsgPSBzZWxmLmZpbGVsaW5rKHVybCwgcGF0aCkKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICBmaWxlbGluayA9ICcoYnVpbHQtaW4pJwogICAgICAgIGluZm8gPSBbXQogICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAnX192ZXJzaW9uX18nKToKICAgICAgICAgICAgdmVyc2lvbiA9IHN0cihvYmplY3QuX192ZXJzaW9uX18pCiAgICAgICAgICAgIGlmIHZlcnNpb25bOjExXSA9PSAnJCcgKyAnUmV2aXNpb246ICcgYW5kIHZlcnNpb25bLTE6XSA9PSAnJCc6CiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdmVyc2lvblsxMTotMV0uc3RyaXAoKQogICAgICAgICAgICBpbmZvLmFwcGVuZCgndmVyc2lvbiAlcycgJSBzZWxmLmVzY2FwZSh2ZXJzaW9uKSkKICAgICAgICBpZiBoYXNhdHRyKG9iamVjdCwgJ19fZGF0ZV9fJyk6CiAgICAgICAgICAgIGluZm8uYXBwZW5kKHNlbGYuZXNjYXBlKHN0cihvYmplY3QuX19kYXRlX18pKSkKICAgICAgICBpZiBpbmZvOgogICAgICAgICAgICBoZWFkID0gaGVhZCArICcgKCVzKScgJSAnLCAnLmpvaW4oaW5mbykKICAgICAgICBkb2Nsb2MgPSBzZWxmLmdldGRvY2xvYyhvYmplY3QpCiAgICAgICAgaWYgZG9jbG9jIGlzIG5vdCBOb25lOgogICAgICAgICAgICBkb2Nsb2MgPSAnPGJyPjxhIGhyZWY9IiUoZG9jbG9jKXMiPk1vZHVsZSBSZWZlcmVuY2U8L2E+JyAlIGxvY2FscygpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZG9jbG9jID0gJycKICAgICAgICByZXN1bHQgPSBzZWxmLmhlYWRpbmcoCiAgICAgICAgICAgIGhlYWQsICcjZmZmZmZmJywgJyM3Nzk5ZWUnLAogICAgICAgICAgICAnPGEgaHJlZj0iLiI+aW5kZXg8L2E+PGJyPicgKyBmaWxlbGluayArIGRvY2xvYykKCiAgICAgICAgbW9kdWxlcyA9IGluc3BlY3QuZ2V0bWVtYmVycyhvYmplY3QsIGluc3BlY3QuaXNtb2R1bGUpCgogICAgICAgIGNsYXNzZXMsIGNkaWN0ID0gW10sIHt9CiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gaW5zcGVjdC5nZXRtZW1iZXJzKG9iamVjdCwgaW5zcGVjdC5pc2NsYXNzKToKICAgICAgICAgICAgIyBpZiBfX2FsbF9fIGV4aXN0cywgYmVsaWV2ZSBpdC4gIE90aGVyd2lzZSB1c2Ugb2xkIGhldXJpc3RpYy4KICAgICAgICAgICAgaWYgKGFsbCBpcyBub3QgTm9uZSBvcgogICAgICAgICAgICAgICAgKGluc3BlY3QuZ2V0bW9kdWxlKHZhbHVlKSBvciBvYmplY3QpIGlzIG9iamVjdCk6CiAgICAgICAgICAgICAgICBpZiB2aXNpYmxlbmFtZShrZXksIGFsbCwgb2JqZWN0KToKICAgICAgICAgICAgICAgICAgICBjbGFzc2VzLmFwcGVuZCgoa2V5LCB2YWx1ZSkpCiAgICAgICAgICAgICAgICAgICAgY2RpY3Rba2V5XSA9IGNkaWN0W3ZhbHVlXSA9ICcjJyArIGtleQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGNsYXNzZXM6CiAgICAgICAgICAgIGZvciBiYXNlIGluIHZhbHVlLl9fYmFzZXNfXzoKICAgICAgICAgICAgICAgIGtleSwgbW9kbmFtZSA9IGJhc2UuX19uYW1lX18sIGJhc2UuX19tb2R1bGVfXwogICAgICAgICAgICAgICAgbW9kdWxlID0gc3lzLm1vZHVsZXMuZ2V0KG1vZG5hbWUpCiAgICAgICAgICAgICAgICBpZiBtb2RuYW1lICE9IG5hbWUgYW5kIG1vZHVsZSBhbmQgaGFzYXR0cihtb2R1bGUsIGtleSk6CiAgICAgICAgICAgICAgICAgICAgaWYgZ2V0YXR0cihtb2R1bGUsIGtleSkgaXMgYmFzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGtleSBpbiBjZGljdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNkaWN0W2tleV0gPSBjZGljdFtiYXNlXSA9IG1vZG5hbWUgKyAnLmh0bWwjJyArIGtleQogICAgICAgIGZ1bmNzLCBmZGljdCA9IFtdLCB7fQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGluc3BlY3QuZ2V0bWVtYmVycyhvYmplY3QsIGluc3BlY3QuaXNyb3V0aW5lKToKICAgICAgICAgICAgIyBpZiBfX2FsbF9fIGV4aXN0cywgYmVsaWV2ZSBpdC4gIE90aGVyd2lzZSB1c2Ugb2xkIGhldXJpc3RpYy4KICAgICAgICAgICAgaWYgKGFsbCBpcyBub3QgTm9uZSBvcgogICAgICAgICAgICAgICAgaW5zcGVjdC5pc2J1aWx0aW4odmFsdWUpIG9yIGluc3BlY3QuZ2V0bW9kdWxlKHZhbHVlKSBpcyBvYmplY3QpOgogICAgICAgICAgICAgICAgaWYgdmlzaWJsZW5hbWUoa2V5LCBhbGwsIG9iamVjdCk6CiAgICAgICAgICAgICAgICAgICAgZnVuY3MuYXBwZW5kKChrZXksIHZhbHVlKSkKICAgICAgICAgICAgICAgICAgICBmZGljdFtrZXldID0gJyMtJyArIGtleQogICAgICAgICAgICAgICAgICAgIGlmIGluc3BlY3QuaXNmdW5jdGlvbih2YWx1ZSk6IGZkaWN0W3ZhbHVlXSA9IGZkaWN0W2tleV0KICAgICAgICBkYXRhID0gW10KICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBpbnNwZWN0LmdldG1lbWJlcnMob2JqZWN0LCBpc2RhdGEpOgogICAgICAgICAgICBpZiB2aXNpYmxlbmFtZShrZXksIGFsbCwgb2JqZWN0KToKICAgICAgICAgICAgICAgIGRhdGEuYXBwZW5kKChrZXksIHZhbHVlKSkKCiAgICAgICAgZG9jID0gc2VsZi5tYXJrdXAoZ2V0ZG9jKG9iamVjdCksIHNlbGYucHJlZm9ybWF0LCBmZGljdCwgY2RpY3QpCiAgICAgICAgZG9jID0gZG9jIGFuZCAnPHR0PiVzPC90dD4nICUgZG9jCiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgJzxwPiVzPC9wPlxuJyAlIGRvYwoKICAgICAgICBpZiBoYXNhdHRyKG9iamVjdCwgJ19fcGF0aF9fJyk6CiAgICAgICAgICAgIG1vZHBrZ3MgPSBbXQogICAgICAgICAgICBmb3IgaW1wb3J0ZXIsIG1vZG5hbWUsIGlzcGtnIGluIHBrZ3V0aWwuaXRlcl9tb2R1bGVzKG9iamVjdC5fX3BhdGhfXyk6CiAgICAgICAgICAgICAgICBtb2Rwa2dzLmFwcGVuZCgobW9kbmFtZSwgbmFtZSwgaXNwa2csIDApKQogICAgICAgICAgICBtb2Rwa2dzLnNvcnQoKQogICAgICAgICAgICBjb250ZW50cyA9IHNlbGYubXVsdGljb2x1bW4obW9kcGtncywgc2VsZi5tb2Rwa2dsaW5rKQogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBzZWxmLmJpZ3NlY3Rpb24oCiAgICAgICAgICAgICAgICAnUGFja2FnZSBDb250ZW50cycsICcjZmZmZmZmJywgJyNhYTU1Y2MnLCBjb250ZW50cykKICAgICAgICBlbGlmIG1vZHVsZXM6CiAgICAgICAgICAgIGNvbnRlbnRzID0gc2VsZi5tdWx0aWNvbHVtbigKICAgICAgICAgICAgICAgIG1vZHVsZXMsIGxhbWJkYSB0OiBzZWxmLm1vZHVsZWxpbmsodFsxXSkpCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIHNlbGYuYmlnc2VjdGlvbigKICAgICAgICAgICAgICAgICdNb2R1bGVzJywgJyNmZmZmZmYnLCAnI2FhNTVjYycsIGNvbnRlbnRzKQoKICAgICAgICBpZiBjbGFzc2VzOgogICAgICAgICAgICBjbGFzc2xpc3QgPSBbdmFsdWUgZm9yIChrZXksIHZhbHVlKSBpbiBjbGFzc2VzXQogICAgICAgICAgICBjb250ZW50cyA9IFsKICAgICAgICAgICAgICAgIHNlbGYuZm9ybWF0dHJlZShpbnNwZWN0LmdldGNsYXNzdHJlZShjbGFzc2xpc3QsIDEpLCBuYW1lKV0KICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gY2xhc3NlczoKICAgICAgICAgICAgICAgIGNvbnRlbnRzLmFwcGVuZChzZWxmLmRvY3VtZW50KHZhbHVlLCBrZXksIG5hbWUsIGZkaWN0LCBjZGljdCkpCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIHNlbGYuYmlnc2VjdGlvbigKICAgICAgICAgICAgICAgICdDbGFzc2VzJywgJyNmZmZmZmYnLCAnI2VlNzdhYScsICcgJy5qb2luKGNvbnRlbnRzKSkKICAgICAgICBpZiBmdW5jczoKICAgICAgICAgICAgY29udGVudHMgPSBbXQogICAgICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBmdW5jczoKICAgICAgICAgICAgICAgIGNvbnRlbnRzLmFwcGVuZChzZWxmLmRvY3VtZW50KHZhbHVlLCBrZXksIG5hbWUsIGZkaWN0LCBjZGljdCkpCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIHNlbGYuYmlnc2VjdGlvbigKICAgICAgICAgICAgICAgICdGdW5jdGlvbnMnLCAnI2ZmZmZmZicsICcjZWVhYTc3JywgJyAnLmpvaW4oY29udGVudHMpKQogICAgICAgIGlmIGRhdGE6CiAgICAgICAgICAgIGNvbnRlbnRzID0gW10KICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZGF0YToKICAgICAgICAgICAgICAgIGNvbnRlbnRzLmFwcGVuZChzZWxmLmRvY3VtZW50KHZhbHVlLCBrZXkpKQogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBzZWxmLmJpZ3NlY3Rpb24oCiAgICAgICAgICAgICAgICAnRGF0YScsICcjZmZmZmZmJywgJyM1NWFhNTUnLCAnPGJyPlxuJy5qb2luKGNvbnRlbnRzKSkKICAgICAgICBpZiBoYXNhdHRyKG9iamVjdCwgJ19fYXV0aG9yX18nKToKICAgICAgICAgICAgY29udGVudHMgPSBzZWxmLm1hcmt1cChzdHIob2JqZWN0Ll9fYXV0aG9yX18pLCBzZWxmLnByZWZvcm1hdCkKICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgc2VsZi5iaWdzZWN0aW9uKAogICAgICAgICAgICAgICAgJ0F1dGhvcicsICcjZmZmZmZmJywgJyM3Nzk5ZWUnLCBjb250ZW50cykKICAgICAgICBpZiBoYXNhdHRyKG9iamVjdCwgJ19fY3JlZGl0c19fJyk6CiAgICAgICAgICAgIGNvbnRlbnRzID0gc2VsZi5tYXJrdXAoc3RyKG9iamVjdC5fX2NyZWRpdHNfXyksIHNlbGYucHJlZm9ybWF0KQogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBzZWxmLmJpZ3NlY3Rpb24oCiAgICAgICAgICAgICAgICAnQ3JlZGl0cycsICcjZmZmZmZmJywgJyM3Nzk5ZWUnLCBjb250ZW50cykKCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBkb2NjbGFzcyhzZWxmLCBvYmplY3QsIG5hbWU9Tm9uZSwgbW9kPU5vbmUsIGZ1bmNzPXt9LCBjbGFzc2VzPXt9LAogICAgICAgICAgICAgICAgICppZ25vcmVkKToKICAgICAgICAiIiJQcm9kdWNlIEhUTUwgZG9jdW1lbnRhdGlvbiBmb3IgYSBjbGFzcyBvYmplY3QuIiIiCiAgICAgICAgcmVhbG5hbWUgPSBvYmplY3QuX19uYW1lX18KICAgICAgICBuYW1lID0gbmFtZSBvciByZWFsbmFtZQogICAgICAgIGJhc2VzID0gb2JqZWN0Ll9fYmFzZXNfXwoKICAgICAgICBjb250ZW50cyA9IFtdCiAgICAgICAgcHVzaCA9IGNvbnRlbnRzLmFwcGVuZAoKICAgICAgICAjIEN1dGUgbGl0dGxlIGNsYXNzIHRvIHB1bXAgb3V0IGEgaG9yaXpvbnRhbCBydWxlIGJldHdlZW4gc2VjdGlvbnMuCiAgICAgICAgY2xhc3MgSG9yaXpvbnRhbFJ1bGU6CiAgICAgICAgICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICAgICAgICAgIHNlbGYubmVlZG9uZSA9IDAKICAgICAgICAgICAgZGVmIG1heWJlKHNlbGYpOgogICAgICAgICAgICAgICAgaWYgc2VsZi5uZWVkb25lOgogICAgICAgICAgICAgICAgICAgIHB1c2goJzxocj5cbicpCiAgICAgICAgICAgICAgICBzZWxmLm5lZWRvbmUgPSAxCiAgICAgICAgaHIgPSBIb3Jpem9udGFsUnVsZSgpCgogICAgICAgICMgTGlzdCB0aGUgbXJvLCBpZiBub24tdHJpdmlhbC4KICAgICAgICBtcm8gPSBkZXF1ZShpbnNwZWN0LmdldG1ybyhvYmplY3QpKQogICAgICAgIGlmIGxlbihtcm8pID4gMjoKICAgICAgICAgICAgaHIubWF5YmUoKQogICAgICAgICAgICBwdXNoKCc8ZGw+PGR0Pk1ldGhvZCByZXNvbHV0aW9uIG9yZGVyOjwvZHQ+XG4nKQogICAgICAgICAgICBmb3IgYmFzZSBpbiBtcm86CiAgICAgICAgICAgICAgICBwdXNoKCc8ZGQ+JXM8L2RkPlxuJyAlIHNlbGYuY2xhc3NsaW5rKGJhc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5fX21vZHVsZV9fKSkKICAgICAgICAgICAgcHVzaCgnPC9kbD5cbicpCgogICAgICAgIGRlZiBzcGlsbChtc2csIGF0dHJzLCBwcmVkaWNhdGUpOgogICAgICAgICAgICBvaywgYXR0cnMgPSBfc3BsaXRfbGlzdChhdHRycywgcHJlZGljYXRlKQogICAgICAgICAgICBpZiBvazoKICAgICAgICAgICAgICAgIGhyLm1heWJlKCkKICAgICAgICAgICAgICAgIHB1c2gobXNnKQogICAgICAgICAgICAgICAgZm9yIG5hbWUsIGtpbmQsIGhvbWVjbHMsIHZhbHVlIGluIG9rOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBnZXRhdHRyKG9iamVjdCwgbmFtZSkKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAjIFNvbWUgZGVzY3JpcHRvcnMgbWF5IG1lZXQgYSBmYWlsdXJlIGluIHRoZWlyIF9fZ2V0X18uCiAgICAgICAgICAgICAgICAgICAgICAgICMgKGJ1ZyAjMTc4NSkKICAgICAgICAgICAgICAgICAgICAgICAgcHVzaChzZWxmLl9kb2NkZXNjcmlwdG9yKG5hbWUsIHZhbHVlLCBtb2QpKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2goc2VsZi5kb2N1bWVudCh2YWx1ZSwgbmFtZSwgbW9kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3MsIGNsYXNzZXMsIG1kaWN0LCBvYmplY3QpKQogICAgICAgICAgICAgICAgICAgIHB1c2goJ1xuJykKICAgICAgICAgICAgcmV0dXJuIGF0dHJzCgogICAgICAgIGRlZiBzcGlsbGRlc2NyaXB0b3JzKG1zZywgYXR0cnMsIHByZWRpY2F0ZSk6CiAgICAgICAgICAgIG9rLCBhdHRycyA9IF9zcGxpdF9saXN0KGF0dHJzLCBwcmVkaWNhdGUpCiAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgaHIubWF5YmUoKQogICAgICAgICAgICAgICAgcHVzaChtc2cpCiAgICAgICAgICAgICAgICBmb3IgbmFtZSwga2luZCwgaG9tZWNscywgdmFsdWUgaW4gb2s6CiAgICAgICAgICAgICAgICAgICAgcHVzaChzZWxmLl9kb2NkZXNjcmlwdG9yKG5hbWUsIHZhbHVlLCBtb2QpKQogICAgICAgICAgICByZXR1cm4gYXR0cnMKCiAgICAgICAgZGVmIHNwaWxsZGF0YShtc2csIGF0dHJzLCBwcmVkaWNhdGUpOgogICAgICAgICAgICBvaywgYXR0cnMgPSBfc3BsaXRfbGlzdChhdHRycywgcHJlZGljYXRlKQogICAgICAgICAgICBpZiBvazoKICAgICAgICAgICAgICAgIGhyLm1heWJlKCkKICAgICAgICAgICAgICAgIHB1c2gobXNnKQogICAgICAgICAgICAgICAgZm9yIG5hbWUsIGtpbmQsIGhvbWVjbHMsIHZhbHVlIGluIG9rOgogICAgICAgICAgICAgICAgICAgIGJhc2UgPSBzZWxmLmRvY290aGVyKGdldGF0dHIob2JqZWN0LCBuYW1lKSwgbmFtZSwgbW9kKQogICAgICAgICAgICAgICAgICAgIGlmIGNhbGxhYmxlKHZhbHVlKSBvciBpbnNwZWN0LmlzZGF0YWRlc2NyaXB0b3IodmFsdWUpOgogICAgICAgICAgICAgICAgICAgICAgICBkb2MgPSBnZXRhdHRyKHZhbHVlLCAiX19kb2NfXyIsIE5vbmUpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgZG9jID0gTm9uZQogICAgICAgICAgICAgICAgICAgIGlmIGRvYyBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBwdXNoKCc8ZGw+PGR0PiVzPC9kbD5cbicgJSBiYXNlKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGRvYyA9IHNlbGYubWFya3VwKGdldGRvYyh2YWx1ZSksIHNlbGYucHJlZm9ybWF0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jcywgY2xhc3NlcywgbWRpY3QpCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYyA9ICc8ZGQ+PHR0PiVzPC90dD4nICUgZG9jCiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2goJzxkbD48ZHQ+JXMlczwvZGw+XG4nICUgKGJhc2UsIGRvYykpCiAgICAgICAgICAgICAgICAgICAgcHVzaCgnXG4nKQogICAgICAgICAgICByZXR1cm4gYXR0cnMKCiAgICAgICAgYXR0cnMgPSBbKG5hbWUsIGtpbmQsIGNscywgdmFsdWUpCiAgICAgICAgICAgICAgICAgZm9yIG5hbWUsIGtpbmQsIGNscywgdmFsdWUgaW4gY2xhc3NpZnlfY2xhc3NfYXR0cnMob2JqZWN0KQogICAgICAgICAgICAgICAgIGlmIHZpc2libGVuYW1lKG5hbWUsIG9iaj1vYmplY3QpXQoKICAgICAgICBtZGljdCA9IHt9CiAgICAgICAgZm9yIGtleSwga2luZCwgaG9tZWNscywgdmFsdWUgaW4gYXR0cnM6CiAgICAgICAgICAgIG1kaWN0W2tleV0gPSBhbmNob3IgPSAnIycgKyBuYW1lICsgJy0nICsga2V5CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHZhbHVlID0gZ2V0YXR0cihvYmplY3QsIG5hbWUpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICAjIFNvbWUgZGVzY3JpcHRvcnMgbWF5IG1lZXQgYSBmYWlsdXJlIGluIHRoZWlyIF9fZ2V0X18uCiAgICAgICAgICAgICAgICAjIChidWcgIzE3ODUpCiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICMgVGhlIHZhbHVlIG1heSBub3QgYmUgaGFzaGFibGUgKGUuZy4sIGEgZGF0YSBhdHRyIHdpdGgKICAgICAgICAgICAgICAgICMgYSBkaWN0IG9yIGxpc3QgdmFsdWUpLgogICAgICAgICAgICAgICAgbWRpY3RbdmFsdWVdID0gYW5jaG9yCiAgICAgICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgIHdoaWxlIGF0dHJzOgogICAgICAgICAgICBpZiBtcm86CiAgICAgICAgICAgICAgICB0aGlzY2xhc3MgPSBtcm8ucG9wbGVmdCgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0aGlzY2xhc3MgPSBhdHRyc1swXVsyXQogICAgICAgICAgICBhdHRycywgaW5oZXJpdGVkID0gX3NwbGl0X2xpc3QoYXR0cnMsIGxhbWJkYSB0OiB0WzJdIGlzIHRoaXNjbGFzcykKCiAgICAgICAgICAgIGlmIHRoaXNjbGFzcyBpcyBidWlsdGlucy5vYmplY3Q6CiAgICAgICAgICAgICAgICBhdHRycyA9IGluaGVyaXRlZAogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiB0aGlzY2xhc3MgaXMgb2JqZWN0OgogICAgICAgICAgICAgICAgdGFnID0gJ2RlZmluZWQgaGVyZScKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRhZyA9ICdpbmhlcml0ZWQgZnJvbSAlcycgJSBzZWxmLmNsYXNzbGluayh0aGlzY2xhc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Ll9fbW9kdWxlX18pCiAgICAgICAgICAgIHRhZyArPSAnOjxicj5cbicKCiAgICAgICAgICAgICMgU29ydCBhdHRycyBieSBuYW1lLgogICAgICAgICAgICBhdHRycy5zb3J0KGtleT1sYW1iZGEgdDogdFswXSkKCiAgICAgICAgICAgICMgUHVtcCBvdXQgdGhlIGF0dHJzLCBzZWdyZWdhdGVkIGJ5IGtpbmQuCiAgICAgICAgICAgIGF0dHJzID0gc3BpbGwoJ01ldGhvZHMgJXMnICUgdGFnLCBhdHRycywKICAgICAgICAgICAgICAgICAgICAgICAgICBsYW1iZGEgdDogdFsxXSA9PSAnbWV0aG9kJykKICAgICAgICAgICAgYXR0cnMgPSBzcGlsbCgnQ2xhc3MgbWV0aG9kcyAlcycgJSB0YWcsIGF0dHJzLAogICAgICAgICAgICAgICAgICAgICAgICAgIGxhbWJkYSB0OiB0WzFdID09ICdjbGFzcyBtZXRob2QnKQogICAgICAgICAgICBhdHRycyA9IHNwaWxsKCdTdGF0aWMgbWV0aG9kcyAlcycgJSB0YWcsIGF0dHJzLAogICAgICAgICAgICAgICAgICAgICAgICAgIGxhbWJkYSB0OiB0WzFdID09ICdzdGF0aWMgbWV0aG9kJykKICAgICAgICAgICAgYXR0cnMgPSBzcGlsbGRlc2NyaXB0b3JzKCdEYXRhIGRlc2NyaXB0b3JzICVzJyAlIHRhZywgYXR0cnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW1iZGEgdDogdFsxXSA9PSAnZGF0YSBkZXNjcmlwdG9yJykKICAgICAgICAgICAgYXR0cnMgPSBzcGlsbGRhdGEoJ0RhdGEgYW5kIG90aGVyIGF0dHJpYnV0ZXMgJXMnICUgdGFnLCBhdHRycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFtYmRhIHQ6IHRbMV0gPT0gJ2RhdGEnKQogICAgICAgICAgICBhc3NlcnQgYXR0cnMgPT0gW10KICAgICAgICAgICAgYXR0cnMgPSBpbmhlcml0ZWQKCiAgICAgICAgY29udGVudHMgPSAnJy5qb2luKGNvbnRlbnRzKQoKICAgICAgICBpZiBuYW1lID09IHJlYWxuYW1lOgogICAgICAgICAgICB0aXRsZSA9ICc8YSBuYW1lPSIlcyI+Y2xhc3MgPHN0cm9uZz4lczwvc3Ryb25nPjwvYT4nICUgKAogICAgICAgICAgICAgICAgbmFtZSwgcmVhbG5hbWUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdGl0bGUgPSAnPHN0cm9uZz4lczwvc3Ryb25nPiA9IDxhIG5hbWU9IiVzIj5jbGFzcyAlczwvYT4nICUgKAogICAgICAgICAgICAgICAgbmFtZSwgbmFtZSwgcmVhbG5hbWUpCiAgICAgICAgaWYgYmFzZXM6CiAgICAgICAgICAgIHBhcmVudHMgPSBbXQogICAgICAgICAgICBmb3IgYmFzZSBpbiBiYXNlczoKICAgICAgICAgICAgICAgIHBhcmVudHMuYXBwZW5kKHNlbGYuY2xhc3NsaW5rKGJhc2UsIG9iamVjdC5fX21vZHVsZV9fKSkKICAgICAgICAgICAgdGl0bGUgPSB0aXRsZSArICcoJXMpJyAlICcsICcuam9pbihwYXJlbnRzKQogICAgICAgIGRvYyA9IHNlbGYubWFya3VwKGdldGRvYyhvYmplY3QpLCBzZWxmLnByZWZvcm1hdCwgZnVuY3MsIGNsYXNzZXMsIG1kaWN0KQogICAgICAgIGRvYyA9IGRvYyBhbmQgJzx0dD4lczxicj4mbmJzcDs8L3R0PicgJSBkb2MKCiAgICAgICAgcmV0dXJuIHNlbGYuc2VjdGlvbih0aXRsZSwgJyMwMDAwMDAnLCAnI2ZmYzhkOCcsIGNvbnRlbnRzLCAzLCBkb2MpCgogICAgZGVmIGZvcm1hdHZhbHVlKHNlbGYsIG9iamVjdCk6CiAgICAgICAgIiIiRm9ybWF0IGFuIGFyZ3VtZW50IGRlZmF1bHQgdmFsdWUgYXMgdGV4dC4iIiIKICAgICAgICByZXR1cm4gc2VsZi5ncmV5KCc9JyArIHNlbGYucmVwcihvYmplY3QpKQoKICAgIGRlZiBkb2Nyb3V0aW5lKHNlbGYsIG9iamVjdCwgbmFtZT1Ob25lLCBtb2Q9Tm9uZSwKICAgICAgICAgICAgICAgICAgIGZ1bmNzPXt9LCBjbGFzc2VzPXt9LCBtZXRob2RzPXt9LCBjbD1Ob25lKToKICAgICAgICAiIiJQcm9kdWNlIEhUTUwgZG9jdW1lbnRhdGlvbiBmb3IgYSBmdW5jdGlvbiBvciBtZXRob2Qgb2JqZWN0LiIiIgogICAgICAgIHJlYWxuYW1lID0gb2JqZWN0Ll9fbmFtZV9fCiAgICAgICAgbmFtZSA9IG5hbWUgb3IgcmVhbG5hbWUKICAgICAgICBhbmNob3IgPSAoY2wgYW5kIGNsLl9fbmFtZV9fIG9yICcnKSArICctJyArIG5hbWUKICAgICAgICBub3RlID0gJycKICAgICAgICBza2lwZG9jcyA9IDAKICAgICAgICBpZiBpbnNwZWN0LmlzbWV0aG9kKG9iamVjdCk6CiAgICAgICAgICAgIGltY2xhc3MgPSBvYmplY3QuX19zZWxmX18uX19jbGFzc19fCiAgICAgICAgICAgIGlmIGNsOgogICAgICAgICAgICAgICAgaWYgaW1jbGFzcyBpcyBub3QgY2w6CiAgICAgICAgICAgICAgICAgICAgbm90ZSA9ICcgZnJvbSAnICsgc2VsZi5jbGFzc2xpbmsoaW1jbGFzcywgbW9kKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgb2JqZWN0Ll9fc2VsZl9fIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIG5vdGUgPSAnIG1ldGhvZCBvZiAlcyBpbnN0YW5jZScgJSBzZWxmLmNsYXNzbGluaygKICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Ll9fc2VsZl9fLl9fY2xhc3NfXywgbW9kKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBub3RlID0gJyB1bmJvdW5kICVzIG1ldGhvZCcgJSBzZWxmLmNsYXNzbGluayhpbWNsYXNzLG1vZCkKICAgICAgICAgICAgb2JqZWN0ID0gb2JqZWN0Ll9fZnVuY19fCgogICAgICAgIGlmIG5hbWUgPT0gcmVhbG5hbWU6CiAgICAgICAgICAgIHRpdGxlID0gJzxhIG5hbWU9IiVzIj48c3Ryb25nPiVzPC9zdHJvbmc+PC9hPicgJSAoYW5jaG9yLCByZWFsbmFtZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiAoY2wgYW5kIHJlYWxuYW1lIGluIGNsLl9fZGljdF9fIGFuZAogICAgICAgICAgICAgICAgY2wuX19kaWN0X19bcmVhbG5hbWVdIGlzIG9iamVjdCk6CiAgICAgICAgICAgICAgICByZWFsbGluayA9ICc8YSBocmVmPSIjJXMiPiVzPC9hPicgJSAoCiAgICAgICAgICAgICAgICAgICAgY2wuX19uYW1lX18gKyAnLScgKyByZWFsbmFtZSwgcmVhbG5hbWUpCiAgICAgICAgICAgICAgICBza2lwZG9jcyA9IDEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJlYWxsaW5rID0gcmVhbG5hbWUKICAgICAgICAgICAgdGl0bGUgPSAnPGEgbmFtZT0iJXMiPjxzdHJvbmc+JXM8L3N0cm9uZz48L2E+ID0gJXMnICUgKAogICAgICAgICAgICAgICAgYW5jaG9yLCBuYW1lLCByZWFsbGluaykKICAgICAgICBpZiBpbnNwZWN0LmlzZnVuY3Rpb24ob2JqZWN0KToKICAgICAgICAgICAgYXJncywgdmFyYXJncywga3dvbmx5YXJncywga3dkZWZhdWx0cywgdmFya3csIGRlZmF1bHRzLCBhbm4gPSBcCiAgICAgICAgICAgICAgICBpbnNwZWN0LmdldGZ1bGxhcmdzcGVjKG9iamVjdCkKICAgICAgICAgICAgYXJnc3BlYyA9IGluc3BlY3QuZm9ybWF0YXJnc3BlYygKICAgICAgICAgICAgICAgIGFyZ3MsIHZhcmFyZ3MsIGt3b25seWFyZ3MsIGt3ZGVmYXVsdHMsIHZhcmt3LCBkZWZhdWx0cywgYW5uLAogICAgICAgICAgICAgICAgZm9ybWF0dmFsdWU9c2VsZi5mb3JtYXR2YWx1ZSwKICAgICAgICAgICAgICAgIGZvcm1hdGFubm90YXRpb249aW5zcGVjdC5mb3JtYXRhbm5vdGF0aW9ucmVsYXRpdmV0byhvYmplY3QpKQogICAgICAgICAgICBpZiByZWFsbmFtZSA9PSAnPGxhbWJkYT4nOgogICAgICAgICAgICAgICAgdGl0bGUgPSAnPHN0cm9uZz4lczwvc3Ryb25nPiA8ZW0+bGFtYmRhPC9lbT4gJyAlIG5hbWUKICAgICAgICAgICAgICAgICMgWFhYIGxhbWJkYSdzIHdvbid0IHVzdWFsbHkgaGF2ZSBmdW5jX2Fubm90YXRpb25zWydyZXR1cm4nXQogICAgICAgICAgICAgICAgIyBzaW5jZSB0aGUgc3ludGF4IGRvZXNuJ3Qgc3VwcG9ydCBidXQgaXQgaXMgcG9zc2libGUuCiAgICAgICAgICAgICAgICAjIFNvIHJlbW92aW5nIHBhcmVudGhlc2VzIGlzbid0IHRydWx5IHNhZmUuCiAgICAgICAgICAgICAgICBhcmdzcGVjID0gYXJnc3BlY1sxOi0xXSAjIHJlbW92ZSBwYXJlbnRoZXNlcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFyZ3NwZWMgPSAnKC4uLiknCgogICAgICAgIGRlY2wgPSB0aXRsZSArIGFyZ3NwZWMgKyAobm90ZSBhbmQgc2VsZi5ncmV5KAogICAgICAgICAgICAgICAnPGZvbnQgZmFjZT0iaGVsdmV0aWNhLCBhcmlhbCI+JXM8L2ZvbnQ+JyAlIG5vdGUpKQoKICAgICAgICBpZiBza2lwZG9jczoKICAgICAgICAgICAgcmV0dXJuICc8ZGw+PGR0PiVzPC9kdD48L2RsPlxuJyAlIGRlY2wKICAgICAgICBlbHNlOgogICAgICAgICAgICBkb2MgPSBzZWxmLm1hcmt1cCgKICAgICAgICAgICAgICAgIGdldGRvYyhvYmplY3QpLCBzZWxmLnByZWZvcm1hdCwgZnVuY3MsIGNsYXNzZXMsIG1ldGhvZHMpCiAgICAgICAgICAgIGRvYyA9IGRvYyBhbmQgJzxkZD48dHQ+JXM8L3R0PjwvZGQ+JyAlIGRvYwogICAgICAgICAgICByZXR1cm4gJzxkbD48ZHQ+JXM8L2R0PiVzPC9kbD5cbicgJSAoZGVjbCwgZG9jKQoKICAgIGRlZiBfZG9jZGVzY3JpcHRvcihzZWxmLCBuYW1lLCB2YWx1ZSwgbW9kKToKICAgICAgICByZXN1bHRzID0gW10KICAgICAgICBwdXNoID0gcmVzdWx0cy5hcHBlbmQKCiAgICAgICAgaWYgbmFtZToKICAgICAgICAgICAgcHVzaCgnPGRsPjxkdD48c3Ryb25nPiVzPC9zdHJvbmc+PC9kdD5cbicgJSBuYW1lKQogICAgICAgIGlmIHZhbHVlLl9fZG9jX18gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGRvYyA9IHNlbGYubWFya3VwKGdldGRvYyh2YWx1ZSksIHNlbGYucHJlZm9ybWF0KQogICAgICAgICAgICBwdXNoKCc8ZGQ+PHR0PiVzPC90dD48L2RkPlxuJyAlIGRvYykKICAgICAgICBwdXNoKCc8L2RsPlxuJykKCiAgICAgICAgcmV0dXJuICcnLmpvaW4ocmVzdWx0cykKCiAgICBkZWYgZG9jcHJvcGVydHkoc2VsZiwgb2JqZWN0LCBuYW1lPU5vbmUsIG1vZD1Ob25lLCBjbD1Ob25lKToKICAgICAgICAiIiJQcm9kdWNlIGh0bWwgZG9jdW1lbnRhdGlvbiBmb3IgYSBwcm9wZXJ0eS4iIiIKICAgICAgICByZXR1cm4gc2VsZi5fZG9jZGVzY3JpcHRvcihuYW1lLCBvYmplY3QsIG1vZCkKCiAgICBkZWYgZG9jb3RoZXIoc2VsZiwgb2JqZWN0LCBuYW1lPU5vbmUsIG1vZD1Ob25lLCAqaWdub3JlZCk6CiAgICAgICAgIiIiUHJvZHVjZSBIVE1MIGRvY3VtZW50YXRpb24gZm9yIGEgZGF0YSBvYmplY3QuIiIiCiAgICAgICAgbGhzID0gbmFtZSBhbmQgJzxzdHJvbmc+JXM8L3N0cm9uZz4gPSAnICUgbmFtZSBvciAnJwogICAgICAgIHJldHVybiBsaHMgKyBzZWxmLnJlcHIob2JqZWN0KQoKICAgIGRlZiBkb2NkYXRhKHNlbGYsIG9iamVjdCwgbmFtZT1Ob25lLCBtb2Q9Tm9uZSwgY2w9Tm9uZSk6CiAgICAgICAgIiIiUHJvZHVjZSBodG1sIGRvY3VtZW50YXRpb24gZm9yIGEgZGF0YSBkZXNjcmlwdG9yLiIiIgogICAgICAgIHJldHVybiBzZWxmLl9kb2NkZXNjcmlwdG9yKG5hbWUsIG9iamVjdCwgbW9kKQoKICAgIGRlZiBpbmRleChzZWxmLCBkaXIsIHNoYWRvd2VkPU5vbmUpOgogICAgICAgICIiIkdlbmVyYXRlIGFuIEhUTUwgaW5kZXggZm9yIGEgZGlyZWN0b3J5IG9mIG1vZHVsZXMuIiIiCiAgICAgICAgbW9kcGtncyA9IFtdCiAgICAgICAgaWYgc2hhZG93ZWQgaXMgTm9uZTogc2hhZG93ZWQgPSB7fQogICAgICAgIGZvciBpbXBvcnRlciwgbmFtZSwgaXNwa2cgaW4gcGtndXRpbC5pdGVyX21vZHVsZXMoW2Rpcl0pOgogICAgICAgICAgICBtb2Rwa2dzLmFwcGVuZCgobmFtZSwgJycsIGlzcGtnLCBuYW1lIGluIHNoYWRvd2VkKSkKICAgICAgICAgICAgc2hhZG93ZWRbbmFtZV0gPSAxCgogICAgICAgIG1vZHBrZ3Muc29ydCgpCiAgICAgICAgY29udGVudHMgPSBzZWxmLm11bHRpY29sdW1uKG1vZHBrZ3MsIHNlbGYubW9kcGtnbGluaykKICAgICAgICByZXR1cm4gc2VsZi5iaWdzZWN0aW9uKGRpciwgJyNmZmZmZmYnLCAnI2VlNzdhYScsIGNvbnRlbnRzKQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB0ZXh0IGRvY3VtZW50YXRpb24gZ2VuZXJhdG9yCgpjbGFzcyBUZXh0UmVwcihSZXByKToKICAgICIiIkNsYXNzIGZvciBzYWZlbHkgbWFraW5nIGEgdGV4dCByZXByZXNlbnRhdGlvbiBvZiBhIFB5dGhvbiBvYmplY3QuIiIiCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgUmVwci5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYubWF4bGlzdCA9IHNlbGYubWF4dHVwbGUgPSAyMAogICAgICAgIHNlbGYubWF4ZGljdCA9IDEwCiAgICAgICAgc2VsZi5tYXhzdHJpbmcgPSBzZWxmLm1heG90aGVyID0gMTAwCgogICAgZGVmIHJlcHIxKHNlbGYsIHgsIGxldmVsKToKICAgICAgICBpZiBoYXNhdHRyKHR5cGUoeCksICdfX25hbWVfXycpOgogICAgICAgICAgICBtZXRob2RuYW1lID0gJ3JlcHJfJyArICdfJy5qb2luKHR5cGUoeCkuX19uYW1lX18uc3BsaXQoKSkKICAgICAgICAgICAgaWYgaGFzYXR0cihzZWxmLCBtZXRob2RuYW1lKToKICAgICAgICAgICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYsIG1ldGhvZG5hbWUpKHgsIGxldmVsKQogICAgICAgIHJldHVybiBjcmFtKHN0cmlwaWQocmVwcih4KSksIHNlbGYubWF4b3RoZXIpCgogICAgZGVmIHJlcHJfc3RyaW5nKHNlbGYsIHgsIGxldmVsKToKICAgICAgICB0ZXN0ID0gY3JhbSh4LCBzZWxmLm1heHN0cmluZykKICAgICAgICB0ZXN0cmVwciA9IHJlcHIodGVzdCkKICAgICAgICBpZiAnXFwnIGluIHRlc3QgYW5kICdcXCcgbm90IGluIHJlcGxhY2UodGVzdHJlcHIsIHInXFwnLCAnJyk6CiAgICAgICAgICAgICMgQmFja3NsYXNoZXMgYXJlIG9ubHkgbGl0ZXJhbCBpbiB0aGUgc3RyaW5nIGFuZCBhcmUgbmV2ZXIKICAgICAgICAgICAgIyBuZWVkZWQgdG8gbWFrZSBhbnkgc3BlY2lhbCBjaGFyYWN0ZXJzLCBzbyBzaG93IGEgcmF3IHN0cmluZy4KICAgICAgICAgICAgcmV0dXJuICdyJyArIHRlc3RyZXByWzBdICsgdGVzdCArIHRlc3RyZXByWzBdCiAgICAgICAgcmV0dXJuIHRlc3RyZXByCgogICAgcmVwcl9zdHIgPSByZXByX3N0cmluZwoKICAgIGRlZiByZXByX2luc3RhbmNlKHNlbGYsIHgsIGxldmVsKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBjcmFtKHN0cmlwaWQocmVwcih4KSksIHNlbGYubWF4c3RyaW5nKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcmV0dXJuICc8JXMgaW5zdGFuY2U+JyAlIHguX19jbGFzc19fLl9fbmFtZV9fCgpjbGFzcyBUZXh0RG9jKERvYyk6CiAgICAiIiJGb3JtYXR0ZXIgY2xhc3MgZm9yIHRleHQgZG9jdW1lbnRhdGlvbi4iIiIKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gdGV4dCBmb3JtYXR0aW5nIHV0aWxpdGllcwoKICAgIF9yZXByX2luc3RhbmNlID0gVGV4dFJlcHIoKQogICAgcmVwciA9IF9yZXByX2luc3RhbmNlLnJlcHIKCiAgICBkZWYgYm9sZChzZWxmLCB0ZXh0KToKICAgICAgICAiIiJGb3JtYXQgYSBzdHJpbmcgaW4gYm9sZCBieSBvdmVyc3RyaWtpbmcuIiIiCiAgICAgICAgcmV0dXJuICcnLmpvaW4oY2ggKyAnXGInICsgY2ggZm9yIGNoIGluIHRleHQpCgogICAgZGVmIGluZGVudChzZWxmLCB0ZXh0LCBwcmVmaXg9JyAgICAnKToKICAgICAgICAiIiJJbmRlbnQgdGV4dCBieSBwcmVwZW5kaW5nIGEgZ2l2ZW4gcHJlZml4IHRvIGVhY2ggbGluZS4iIiIKICAgICAgICBpZiBub3QgdGV4dDogcmV0dXJuICcnCiAgICAgICAgbGluZXMgPSBbcHJlZml4ICsgbGluZSBmb3IgbGluZSBpbiB0ZXh0LnNwbGl0KCdcbicpXQogICAgICAgIGlmIGxpbmVzOiBsaW5lc1stMV0gPSBsaW5lc1stMV0ucnN0cmlwKCkKICAgICAgICByZXR1cm4gJ1xuJy5qb2luKGxpbmVzKQoKICAgIGRlZiBzZWN0aW9uKHNlbGYsIHRpdGxlLCBjb250ZW50cyk6CiAgICAgICAgIiIiRm9ybWF0IGEgc2VjdGlvbiB3aXRoIGEgZ2l2ZW4gaGVhZGluZy4iIiIKICAgICAgICBjbGVhbl9jb250ZW50cyA9IHNlbGYuaW5kZW50KGNvbnRlbnRzKS5yc3RyaXAoKQogICAgICAgIHJldHVybiBzZWxmLmJvbGQodGl0bGUpICsgJ1xuJyArIGNsZWFuX2NvbnRlbnRzICsgJ1xuXG4nCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHR5cGUtc3BlY2lmaWMgcm91dGluZXMKCiAgICBkZWYgZm9ybWF0dHJlZShzZWxmLCB0cmVlLCBtb2RuYW1lLCBwYXJlbnQ9Tm9uZSwgcHJlZml4PScnKToKICAgICAgICAiIiJSZW5kZXIgaW4gdGV4dCBhIGNsYXNzIHRyZWUgYXMgcmV0dXJuZWQgYnkgaW5zcGVjdC5nZXRjbGFzc3RyZWUoKS4iIiIKICAgICAgICByZXN1bHQgPSAnJwogICAgICAgIGZvciBlbnRyeSBpbiB0cmVlOgogICAgICAgICAgICBpZiB0eXBlKGVudHJ5KSBpcyB0eXBlKCgpKToKICAgICAgICAgICAgICAgIGMsIGJhc2VzID0gZW50cnkKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIHByZWZpeCArIGNsYXNzbmFtZShjLCBtb2RuYW1lKQogICAgICAgICAgICAgICAgaWYgYmFzZXMgYW5kIGJhc2VzICE9IChwYXJlbnQsKToKICAgICAgICAgICAgICAgICAgICBwYXJlbnRzID0gKGNsYXNzbmFtZShjLCBtb2RuYW1lKSBmb3IgYyBpbiBiYXNlcykKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyAnKCVzKScgJSAnLCAnLmpvaW4ocGFyZW50cykKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArICdcbicKICAgICAgICAgICAgZWxpZiB0eXBlKGVudHJ5KSBpcyB0eXBlKFtdKToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIHNlbGYuZm9ybWF0dHJlZSgKICAgICAgICAgICAgICAgICAgICBlbnRyeSwgbW9kbmFtZSwgYywgcHJlZml4ICsgJyAgICAnKQogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgZG9jbW9kdWxlKHNlbGYsIG9iamVjdCwgbmFtZT1Ob25lLCBtb2Q9Tm9uZSk6CiAgICAgICAgIiIiUHJvZHVjZSB0ZXh0IGRvY3VtZW50YXRpb24gZm9yIGEgZ2l2ZW4gbW9kdWxlIG9iamVjdC4iIiIKICAgICAgICBuYW1lID0gb2JqZWN0Ll9fbmFtZV9fICMgaWdub3JlIHRoZSBwYXNzZWQtaW4gbmFtZQogICAgICAgIHN5bm9wLCBkZXNjID0gc3BsaXRkb2MoZ2V0ZG9jKG9iamVjdCkpCiAgICAgICAgcmVzdWx0ID0gc2VsZi5zZWN0aW9uKCdOQU1FJywgbmFtZSArIChzeW5vcCBhbmQgJyAtICcgKyBzeW5vcCkpCiAgICAgICAgYWxsID0gZ2V0YXR0cihvYmplY3QsICdfX2FsbF9fJywgTm9uZSkKICAgICAgICBkb2Nsb2MgPSBzZWxmLmdldGRvY2xvYyhvYmplY3QpCiAgICAgICAgaWYgZG9jbG9jIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBzZWxmLnNlY3Rpb24oJ01PRFVMRSBSRUZFUkVOQ0UnLCBkb2Nsb2MgKyAiIiIKClRoZSBmb2xsb3dpbmcgZG9jdW1lbnRhdGlvbiBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBmcm9tIHRoZSBQeXRob24Kc291cmNlIGZpbGVzLiAgSXQgbWF5IGJlIGluY29tcGxldGUsIGluY29ycmVjdCBvciBpbmNsdWRlIGZlYXR1cmVzIHRoYXQKYXJlIGNvbnNpZGVyZWQgaW1wbGVtZW50YXRpb24gZGV0YWlsIGFuZCBtYXkgdmFyeSBiZXR3ZWVuIFB5dGhvbgppbXBsZW1lbnRhdGlvbnMuICBXaGVuIGluIGRvdWJ0LCBjb25zdWx0IHRoZSBtb2R1bGUgcmVmZXJlbmNlIGF0IHRoZQpsb2NhdGlvbiBsaXN0ZWQgYWJvdmUuCiIiIikKCiAgICAgICAgaWYgZGVzYzoKICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgc2VsZi5zZWN0aW9uKCdERVNDUklQVElPTicsIGRlc2MpCgogICAgICAgIGNsYXNzZXMgPSBbXQogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGluc3BlY3QuZ2V0bWVtYmVycyhvYmplY3QsIGluc3BlY3QuaXNjbGFzcyk6CiAgICAgICAgICAgICMgaWYgX19hbGxfXyBleGlzdHMsIGJlbGlldmUgaXQuICBPdGhlcndpc2UgdXNlIG9sZCBoZXVyaXN0aWMuCiAgICAgICAgICAgIGlmIChhbGwgaXMgbm90IE5vbmUKICAgICAgICAgICAgICAgIG9yIChpbnNwZWN0LmdldG1vZHVsZSh2YWx1ZSkgb3Igb2JqZWN0KSBpcyBvYmplY3QpOgogICAgICAgICAgICAgICAgaWYgdmlzaWJsZW5hbWUoa2V5LCBhbGwsIG9iamVjdCk6CiAgICAgICAgICAgICAgICAgICAgY2xhc3Nlcy5hcHBlbmQoKGtleSwgdmFsdWUpKQogICAgICAgIGZ1bmNzID0gW10KICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBpbnNwZWN0LmdldG1lbWJlcnMob2JqZWN0LCBpbnNwZWN0Lmlzcm91dGluZSk6CiAgICAgICAgICAgICMgaWYgX19hbGxfXyBleGlzdHMsIGJlbGlldmUgaXQuICBPdGhlcndpc2UgdXNlIG9sZCBoZXVyaXN0aWMuCiAgICAgICAgICAgIGlmIChhbGwgaXMgbm90IE5vbmUgb3IKICAgICAgICAgICAgICAgIGluc3BlY3QuaXNidWlsdGluKHZhbHVlKSBvciBpbnNwZWN0LmdldG1vZHVsZSh2YWx1ZSkgaXMgb2JqZWN0KToKICAgICAgICAgICAgICAgIGlmIHZpc2libGVuYW1lKGtleSwgYWxsLCBvYmplY3QpOgogICAgICAgICAgICAgICAgICAgIGZ1bmNzLmFwcGVuZCgoa2V5LCB2YWx1ZSkpCiAgICAgICAgZGF0YSA9IFtdCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gaW5zcGVjdC5nZXRtZW1iZXJzKG9iamVjdCwgaXNkYXRhKToKICAgICAgICAgICAgaWYgdmlzaWJsZW5hbWUoa2V5LCBhbGwsIG9iamVjdCk6CiAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZCgoa2V5LCB2YWx1ZSkpCgogICAgICAgIG1vZHBrZ3MgPSBbXQogICAgICAgIG1vZHBrZ3NfbmFtZXMgPSBzZXQoKQogICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAnX19wYXRoX18nKToKICAgICAgICAgICAgZm9yIGltcG9ydGVyLCBtb2RuYW1lLCBpc3BrZyBpbiBwa2d1dGlsLml0ZXJfbW9kdWxlcyhvYmplY3QuX19wYXRoX18pOgogICAgICAgICAgICAgICAgbW9kcGtnc19uYW1lcy5hZGQobW9kbmFtZSkKICAgICAgICAgICAgICAgIGlmIGlzcGtnOgogICAgICAgICAgICAgICAgICAgIG1vZHBrZ3MuYXBwZW5kKG1vZG5hbWUgKyAnIChwYWNrYWdlKScpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG1vZHBrZ3MuYXBwZW5kKG1vZG5hbWUpCgogICAgICAgICAgICBtb2Rwa2dzLnNvcnQoKQogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBzZWxmLnNlY3Rpb24oCiAgICAgICAgICAgICAgICAnUEFDS0FHRSBDT05URU5UUycsICdcbicuam9pbihtb2Rwa2dzKSkKCiAgICAgICAgIyBEZXRlY3Qgc3VibW9kdWxlcyBhcyBzb21ldGltZXMgY3JlYXRlZCBieSBDIGV4dGVuc2lvbnMKICAgICAgICBzdWJtb2R1bGVzID0gW10KICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBpbnNwZWN0LmdldG1lbWJlcnMob2JqZWN0LCBpbnNwZWN0LmlzbW9kdWxlKToKICAgICAgICAgICAgaWYgdmFsdWUuX19uYW1lX18uc3RhcnRzd2l0aChuYW1lICsgJy4nKSBhbmQga2V5IG5vdCBpbiBtb2Rwa2dzX25hbWVzOgogICAgICAgICAgICAgICAgc3VibW9kdWxlcy5hcHBlbmQoa2V5KQogICAgICAgIGlmIHN1Ym1vZHVsZXM6CiAgICAgICAgICAgIHN1Ym1vZHVsZXMuc29ydCgpCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIHNlbGYuc2VjdGlvbigKICAgICAgICAgICAgICAgICdTVUJNT0RVTEVTJywgJ1xuJy5qb2luKHN1Ym1vZHVsZXMpKQoKICAgICAgICBpZiBjbGFzc2VzOgogICAgICAgICAgICBjbGFzc2xpc3QgPSBbdmFsdWUgZm9yIGtleSwgdmFsdWUgaW4gY2xhc3Nlc10KICAgICAgICAgICAgY29udGVudHMgPSBbc2VsZi5mb3JtYXR0cmVlKAogICAgICAgICAgICAgICAgaW5zcGVjdC5nZXRjbGFzc3RyZWUoY2xhc3NsaXN0LCAxKSwgbmFtZSldCiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIGNsYXNzZXM6CiAgICAgICAgICAgICAgICBjb250ZW50cy5hcHBlbmQoc2VsZi5kb2N1bWVudCh2YWx1ZSwga2V5LCBuYW1lKSkKICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgc2VsZi5zZWN0aW9uKCdDTEFTU0VTJywgJ1xuJy5qb2luKGNvbnRlbnRzKSkKCiAgICAgICAgaWYgZnVuY3M6CiAgICAgICAgICAgIGNvbnRlbnRzID0gW10KICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZnVuY3M6CiAgICAgICAgICAgICAgICBjb250ZW50cy5hcHBlbmQoc2VsZi5kb2N1bWVudCh2YWx1ZSwga2V5LCBuYW1lKSkKICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgc2VsZi5zZWN0aW9uKCdGVU5DVElPTlMnLCAnXG4nLmpvaW4oY29udGVudHMpKQoKICAgICAgICBpZiBkYXRhOgogICAgICAgICAgICBjb250ZW50cyA9IFtdCiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIGRhdGE6CiAgICAgICAgICAgICAgICBjb250ZW50cy5hcHBlbmQoc2VsZi5kb2NvdGhlcih2YWx1ZSwga2V5LCBuYW1lLCBtYXhsZW49NzApKQogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBzZWxmLnNlY3Rpb24oJ0RBVEEnLCAnXG4nLmpvaW4oY29udGVudHMpKQoKICAgICAgICBpZiBoYXNhdHRyKG9iamVjdCwgJ19fdmVyc2lvbl9fJyk6CiAgICAgICAgICAgIHZlcnNpb24gPSBzdHIob2JqZWN0Ll9fdmVyc2lvbl9fKQogICAgICAgICAgICBpZiB2ZXJzaW9uWzoxMV0gPT0gJyQnICsgJ1JldmlzaW9uOiAnIGFuZCB2ZXJzaW9uWy0xOl0gPT0gJyQnOgogICAgICAgICAgICAgICAgdmVyc2lvbiA9IHZlcnNpb25bMTE6LTFdLnN0cmlwKCkKICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgc2VsZi5zZWN0aW9uKCdWRVJTSU9OJywgdmVyc2lvbikKICAgICAgICBpZiBoYXNhdHRyKG9iamVjdCwgJ19fZGF0ZV9fJyk6CiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIHNlbGYuc2VjdGlvbignREFURScsIHN0cihvYmplY3QuX19kYXRlX18pKQogICAgICAgIGlmIGhhc2F0dHIob2JqZWN0LCAnX19hdXRob3JfXycpOgogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBzZWxmLnNlY3Rpb24oJ0FVVEhPUicsIHN0cihvYmplY3QuX19hdXRob3JfXykpCiAgICAgICAgaWYgaGFzYXR0cihvYmplY3QsICdfX2NyZWRpdHNfXycpOgogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBzZWxmLnNlY3Rpb24oJ0NSRURJVFMnLCBzdHIob2JqZWN0Ll9fY3JlZGl0c19fKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZpbGUgPSBpbnNwZWN0LmdldGFic2ZpbGUob2JqZWN0KQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgICAgIGZpbGUgPSAnKGJ1aWx0LWluKScKICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBzZWxmLnNlY3Rpb24oJ0ZJTEUnLCBmaWxlKQogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgZG9jY2xhc3Moc2VsZiwgb2JqZWN0LCBuYW1lPU5vbmUsIG1vZD1Ob25lLCAqaWdub3JlZCk6CiAgICAgICAgIiIiUHJvZHVjZSB0ZXh0IGRvY3VtZW50YXRpb24gZm9yIGEgZ2l2ZW4gY2xhc3Mgb2JqZWN0LiIiIgogICAgICAgIHJlYWxuYW1lID0gb2JqZWN0Ll9fbmFtZV9fCiAgICAgICAgbmFtZSA9IG5hbWUgb3IgcmVhbG5hbWUKICAgICAgICBiYXNlcyA9IG9iamVjdC5fX2Jhc2VzX18KCiAgICAgICAgZGVmIG1ha2VuYW1lKGMsIG09b2JqZWN0Ll9fbW9kdWxlX18pOgogICAgICAgICAgICByZXR1cm4gY2xhc3NuYW1lKGMsIG0pCgogICAgICAgIGlmIG5hbWUgPT0gcmVhbG5hbWU6CiAgICAgICAgICAgIHRpdGxlID0gJ2NsYXNzICcgKyBzZWxmLmJvbGQocmVhbG5hbWUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdGl0bGUgPSBzZWxmLmJvbGQobmFtZSkgKyAnID0gY2xhc3MgJyArIHJlYWxuYW1lCiAgICAgICAgaWYgYmFzZXM6CiAgICAgICAgICAgIHBhcmVudHMgPSBtYXAobWFrZW5hbWUsIGJhc2VzKQogICAgICAgICAgICB0aXRsZSA9IHRpdGxlICsgJyglcyknICUgJywgJy5qb2luKHBhcmVudHMpCgogICAgICAgIGRvYyA9IGdldGRvYyhvYmplY3QpCiAgICAgICAgY29udGVudHMgPSBkb2MgYW5kIFtkb2MgKyAnXG4nXSBvciBbXQogICAgICAgIHB1c2ggPSBjb250ZW50cy5hcHBlbmQKCiAgICAgICAgIyBMaXN0IHRoZSBtcm8sIGlmIG5vbi10cml2aWFsLgogICAgICAgIG1ybyA9IGRlcXVlKGluc3BlY3QuZ2V0bXJvKG9iamVjdCkpCiAgICAgICAgaWYgbGVuKG1ybykgPiAyOgogICAgICAgICAgICBwdXNoKCJNZXRob2QgcmVzb2x1dGlvbiBvcmRlcjoiKQogICAgICAgICAgICBmb3IgYmFzZSBpbiBtcm86CiAgICAgICAgICAgICAgICBwdXNoKCcgICAgJyArIG1ha2VuYW1lKGJhc2UpKQogICAgICAgICAgICBwdXNoKCcnKQoKICAgICAgICAjIEN1dGUgbGl0dGxlIGNsYXNzIHRvIHB1bXAgb3V0IGEgaG9yaXpvbnRhbCBydWxlIGJldHdlZW4gc2VjdGlvbnMuCiAgICAgICAgY2xhc3MgSG9yaXpvbnRhbFJ1bGU6CiAgICAgICAgICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICAgICAgICAgIHNlbGYubmVlZG9uZSA9IDAKICAgICAgICAgICAgZGVmIG1heWJlKHNlbGYpOgogICAgICAgICAgICAgICAgaWYgc2VsZi5uZWVkb25lOgogICAgICAgICAgICAgICAgICAgIHB1c2goJy0nICogNzApCiAgICAgICAgICAgICAgICBzZWxmLm5lZWRvbmUgPSAxCiAgICAgICAgaHIgPSBIb3Jpem9udGFsUnVsZSgpCgogICAgICAgIGRlZiBzcGlsbChtc2csIGF0dHJzLCBwcmVkaWNhdGUpOgogICAgICAgICAgICBvaywgYXR0cnMgPSBfc3BsaXRfbGlzdChhdHRycywgcHJlZGljYXRlKQogICAgICAgICAgICBpZiBvazoKICAgICAgICAgICAgICAgIGhyLm1heWJlKCkKICAgICAgICAgICAgICAgIHB1c2gobXNnKQogICAgICAgICAgICAgICAgZm9yIG5hbWUsIGtpbmQsIGhvbWVjbHMsIHZhbHVlIGluIG9rOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBnZXRhdHRyKG9iamVjdCwgbmFtZSkKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAjIFNvbWUgZGVzY3JpcHRvcnMgbWF5IG1lZXQgYSBmYWlsdXJlIGluIHRoZWlyIF9fZ2V0X18uCiAgICAgICAgICAgICAgICAgICAgICAgICMgKGJ1ZyAjMTc4NSkKICAgICAgICAgICAgICAgICAgICAgICAgcHVzaChzZWxmLl9kb2NkZXNjcmlwdG9yKG5hbWUsIHZhbHVlLCBtb2QpKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2goc2VsZi5kb2N1bWVudCh2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsIG1vZCwgb2JqZWN0KSkKICAgICAgICAgICAgcmV0dXJuIGF0dHJzCgogICAgICAgIGRlZiBzcGlsbGRlc2NyaXB0b3JzKG1zZywgYXR0cnMsIHByZWRpY2F0ZSk6CiAgICAgICAgICAgIG9rLCBhdHRycyA9IF9zcGxpdF9saXN0KGF0dHJzLCBwcmVkaWNhdGUpCiAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgaHIubWF5YmUoKQogICAgICAgICAgICAgICAgcHVzaChtc2cpCiAgICAgICAgICAgICAgICBmb3IgbmFtZSwga2luZCwgaG9tZWNscywgdmFsdWUgaW4gb2s6CiAgICAgICAgICAgICAgICAgICAgcHVzaChzZWxmLl9kb2NkZXNjcmlwdG9yKG5hbWUsIHZhbHVlLCBtb2QpKQogICAgICAgICAgICByZXR1cm4gYXR0cnMKCiAgICAgICAgZGVmIHNwaWxsZGF0YShtc2csIGF0dHJzLCBwcmVkaWNhdGUpOgogICAgICAgICAgICBvaywgYXR0cnMgPSBfc3BsaXRfbGlzdChhdHRycywgcHJlZGljYXRlKQogICAgICAgICAgICBpZiBvazoKICAgICAgICAgICAgICAgIGhyLm1heWJlKCkKICAgICAgICAgICAgICAgIHB1c2gobXNnKQogICAgICAgICAgICAgICAgZm9yIG5hbWUsIGtpbmQsIGhvbWVjbHMsIHZhbHVlIGluIG9rOgogICAgICAgICAgICAgICAgICAgIGlmIGNhbGxhYmxlKHZhbHVlKSBvciBpbnNwZWN0LmlzZGF0YWRlc2NyaXB0b3IodmFsdWUpOgogICAgICAgICAgICAgICAgICAgICAgICBkb2MgPSBnZXRkb2ModmFsdWUpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgZG9jID0gTm9uZQogICAgICAgICAgICAgICAgICAgIHB1c2goc2VsZi5kb2NvdGhlcihnZXRhdHRyKG9iamVjdCwgbmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsIG1vZCwgbWF4bGVuPTcwLCBkb2M9ZG9jKSArICdcbicpCiAgICAgICAgICAgIHJldHVybiBhdHRycwoKICAgICAgICBhdHRycyA9IFsobmFtZSwga2luZCwgY2xzLCB2YWx1ZSkKICAgICAgICAgICAgICAgICBmb3IgbmFtZSwga2luZCwgY2xzLCB2YWx1ZSBpbiBjbGFzc2lmeV9jbGFzc19hdHRycyhvYmplY3QpCiAgICAgICAgICAgICAgICAgaWYgdmlzaWJsZW5hbWUobmFtZSwgb2JqPW9iamVjdCldCgogICAgICAgIHdoaWxlIGF0dHJzOgogICAgICAgICAgICBpZiBtcm86CiAgICAgICAgICAgICAgICB0aGlzY2xhc3MgPSBtcm8ucG9wbGVmdCgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0aGlzY2xhc3MgPSBhdHRyc1swXVsyXQogICAgICAgICAgICBhdHRycywgaW5oZXJpdGVkID0gX3NwbGl0X2xpc3QoYXR0cnMsIGxhbWJkYSB0OiB0WzJdIGlzIHRoaXNjbGFzcykKCiAgICAgICAgICAgIGlmIHRoaXNjbGFzcyBpcyBidWlsdGlucy5vYmplY3Q6CiAgICAgICAgICAgICAgICBhdHRycyA9IGluaGVyaXRlZAogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiB0aGlzY2xhc3MgaXMgb2JqZWN0OgogICAgICAgICAgICAgICAgdGFnID0gImRlZmluZWQgaGVyZSIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRhZyA9ICJpbmhlcml0ZWQgZnJvbSAlcyIgJSBjbGFzc25hbWUodGhpc2NsYXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuX19tb2R1bGVfXykKCiAgICAgICAgICAgICMgU29ydCBhdHRycyBieSBuYW1lLgogICAgICAgICAgICBhdHRycy5zb3J0KCkKCiAgICAgICAgICAgICMgUHVtcCBvdXQgdGhlIGF0dHJzLCBzZWdyZWdhdGVkIGJ5IGtpbmQuCiAgICAgICAgICAgIGF0dHJzID0gc3BpbGwoIk1ldGhvZHMgJXM6XG4iICUgdGFnLCBhdHRycywKICAgICAgICAgICAgICAgICAgICAgICAgICBsYW1iZGEgdDogdFsxXSA9PSAnbWV0aG9kJykKICAgICAgICAgICAgYXR0cnMgPSBzcGlsbCgiQ2xhc3MgbWV0aG9kcyAlczpcbiIgJSB0YWcsIGF0dHJzLAogICAgICAgICAgICAgICAgICAgICAgICAgIGxhbWJkYSB0OiB0WzFdID09ICdjbGFzcyBtZXRob2QnKQogICAgICAgICAgICBhdHRycyA9IHNwaWxsKCJTdGF0aWMgbWV0aG9kcyAlczpcbiIgJSB0YWcsIGF0dHJzLAogICAgICAgICAgICAgICAgICAgICAgICAgIGxhbWJkYSB0OiB0WzFdID09ICdzdGF0aWMgbWV0aG9kJykKICAgICAgICAgICAgYXR0cnMgPSBzcGlsbGRlc2NyaXB0b3JzKCJEYXRhIGRlc2NyaXB0b3JzICVzOlxuIiAlIHRhZywgYXR0cnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW1iZGEgdDogdFsxXSA9PSAnZGF0YSBkZXNjcmlwdG9yJykKICAgICAgICAgICAgYXR0cnMgPSBzcGlsbGRhdGEoIkRhdGEgYW5kIG90aGVyIGF0dHJpYnV0ZXMgJXM6XG4iICUgdGFnLCBhdHRycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFtYmRhIHQ6IHRbMV0gPT0gJ2RhdGEnKQogICAgICAgICAgICBhc3NlcnQgYXR0cnMgPT0gW10KICAgICAgICAgICAgYXR0cnMgPSBpbmhlcml0ZWQKCiAgICAgICAgY29udGVudHMgPSAnXG4nLmpvaW4oY29udGVudHMpCiAgICAgICAgaWYgbm90IGNvbnRlbnRzOgogICAgICAgICAgICByZXR1cm4gdGl0bGUgKyAnXG4nCiAgICAgICAgcmV0dXJuIHRpdGxlICsgJ1xuJyArIHNlbGYuaW5kZW50KGNvbnRlbnRzLnJzdHJpcCgpLCAnIHwgICcpICsgJ1xuJwoKICAgIGRlZiBmb3JtYXR2YWx1ZShzZWxmLCBvYmplY3QpOgogICAgICAgICIiIkZvcm1hdCBhbiBhcmd1bWVudCBkZWZhdWx0IHZhbHVlIGFzIHRleHQuIiIiCiAgICAgICAgcmV0dXJuICc9JyArIHNlbGYucmVwcihvYmplY3QpCgogICAgZGVmIGRvY3JvdXRpbmUoc2VsZiwgb2JqZWN0LCBuYW1lPU5vbmUsIG1vZD1Ob25lLCBjbD1Ob25lKToKICAgICAgICAiIiJQcm9kdWNlIHRleHQgZG9jdW1lbnRhdGlvbiBmb3IgYSBmdW5jdGlvbiBvciBtZXRob2Qgb2JqZWN0LiIiIgogICAgICAgIHJlYWxuYW1lID0gb2JqZWN0Ll9fbmFtZV9fCiAgICAgICAgbmFtZSA9IG5hbWUgb3IgcmVhbG5hbWUKICAgICAgICBub3RlID0gJycKICAgICAgICBza2lwZG9jcyA9IDAKICAgICAgICBpZiBpbnNwZWN0LmlzbWV0aG9kKG9iamVjdCk6CiAgICAgICAgICAgIGltY2xhc3MgPSBvYmplY3QuX19zZWxmX18uX19jbGFzc19fCiAgICAgICAgICAgIGlmIGNsOgogICAgICAgICAgICAgICAgaWYgaW1jbGFzcyBpcyBub3QgY2w6CiAgICAgICAgICAgICAgICAgICAgbm90ZSA9ICcgZnJvbSAnICsgY2xhc3NuYW1lKGltY2xhc3MsIG1vZCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIG9iamVjdC5fX3NlbGZfXyBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBub3RlID0gJyBtZXRob2Qgb2YgJXMgaW5zdGFuY2UnICUgY2xhc3NuYW1lKAogICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuX19zZWxmX18uX19jbGFzc19fLCBtb2QpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG5vdGUgPSAnIHVuYm91bmQgJXMgbWV0aG9kJyAlIGNsYXNzbmFtZShpbWNsYXNzLG1vZCkKICAgICAgICAgICAgb2JqZWN0ID0gb2JqZWN0Ll9fZnVuY19fCgogICAgICAgIGlmIG5hbWUgPT0gcmVhbG5hbWU6CiAgICAgICAgICAgIHRpdGxlID0gc2VsZi5ib2xkKHJlYWxuYW1lKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIChjbCBhbmQgcmVhbG5hbWUgaW4gY2wuX19kaWN0X18gYW5kCiAgICAgICAgICAgICAgICBjbC5fX2RpY3RfX1tyZWFsbmFtZV0gaXMgb2JqZWN0KToKICAgICAgICAgICAgICAgIHNraXBkb2NzID0gMQogICAgICAgICAgICB0aXRsZSA9IHNlbGYuYm9sZChuYW1lKSArICcgPSAnICsgcmVhbG5hbWUKICAgICAgICBpZiBpbnNwZWN0LmlzZnVuY3Rpb24ob2JqZWN0KToKICAgICAgICAgICAgYXJncywgdmFyYXJncywgdmFya3csIGRlZmF1bHRzLCBrd29ubHlhcmdzLCBrd2RlZmF1bHRzLCBhbm4gPSBcCiAgICAgICAgICAgICAgaW5zcGVjdC5nZXRmdWxsYXJnc3BlYyhvYmplY3QpCiAgICAgICAgICAgIGFyZ3NwZWMgPSBpbnNwZWN0LmZvcm1hdGFyZ3NwZWMoCiAgICAgICAgICAgICAgICBhcmdzLCB2YXJhcmdzLCB2YXJrdywgZGVmYXVsdHMsIGt3b25seWFyZ3MsIGt3ZGVmYXVsdHMsIGFubiwKICAgICAgICAgICAgICAgIGZvcm1hdHZhbHVlPXNlbGYuZm9ybWF0dmFsdWUsCiAgICAgICAgICAgICAgICBmb3JtYXRhbm5vdGF0aW9uPWluc3BlY3QuZm9ybWF0YW5ub3RhdGlvbnJlbGF0aXZldG8ob2JqZWN0KSkKICAgICAgICAgICAgaWYgcmVhbG5hbWUgPT0gJzxsYW1iZGE+JzoKICAgICAgICAgICAgICAgIHRpdGxlID0gc2VsZi5ib2xkKG5hbWUpICsgJyBsYW1iZGEgJwogICAgICAgICAgICAgICAgIyBYWFggbGFtYmRhJ3Mgd29uJ3QgdXN1YWxseSBoYXZlIGZ1bmNfYW5ub3RhdGlvbnNbJ3JldHVybiddCiAgICAgICAgICAgICAgICAjIHNpbmNlIHRoZSBzeW50YXggZG9lc24ndCBzdXBwb3J0IGJ1dCBpdCBpcyBwb3NzaWJsZS4KICAgICAgICAgICAgICAgICMgU28gcmVtb3ZpbmcgcGFyZW50aGVzZXMgaXNuJ3QgdHJ1bHkgc2FmZS4KICAgICAgICAgICAgICAgIGFyZ3NwZWMgPSBhcmdzcGVjWzE6LTFdICMgcmVtb3ZlIHBhcmVudGhlc2VzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYXJnc3BlYyA9ICcoLi4uKScKICAgICAgICBkZWNsID0gdGl0bGUgKyBhcmdzcGVjICsgbm90ZQoKICAgICAgICBpZiBza2lwZG9jczoKICAgICAgICAgICAgcmV0dXJuIGRlY2wgKyAnXG4nCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZG9jID0gZ2V0ZG9jKG9iamVjdCkgb3IgJycKICAgICAgICAgICAgcmV0dXJuIGRlY2wgKyAnXG4nICsgKGRvYyBhbmQgc2VsZi5pbmRlbnQoZG9jKS5yc3RyaXAoKSArICdcbicpCgogICAgZGVmIF9kb2NkZXNjcmlwdG9yKHNlbGYsIG5hbWUsIHZhbHVlLCBtb2QpOgogICAgICAgIHJlc3VsdHMgPSBbXQogICAgICAgIHB1c2ggPSByZXN1bHRzLmFwcGVuZAoKICAgICAgICBpZiBuYW1lOgogICAgICAgICAgICBwdXNoKHNlbGYuYm9sZChuYW1lKSkKICAgICAgICAgICAgcHVzaCgnXG4nKQogICAgICAgIGRvYyA9IGdldGRvYyh2YWx1ZSkgb3IgJycKICAgICAgICBpZiBkb2M6CiAgICAgICAgICAgIHB1c2goc2VsZi5pbmRlbnQoZG9jKSkKICAgICAgICAgICAgcHVzaCgnXG4nKQogICAgICAgIHJldHVybiAnJy5qb2luKHJlc3VsdHMpCgogICAgZGVmIGRvY3Byb3BlcnR5KHNlbGYsIG9iamVjdCwgbmFtZT1Ob25lLCBtb2Q9Tm9uZSwgY2w9Tm9uZSk6CiAgICAgICAgIiIiUHJvZHVjZSB0ZXh0IGRvY3VtZW50YXRpb24gZm9yIGEgcHJvcGVydHkuIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX2RvY2Rlc2NyaXB0b3IobmFtZSwgb2JqZWN0LCBtb2QpCgogICAgZGVmIGRvY2RhdGEoc2VsZiwgb2JqZWN0LCBuYW1lPU5vbmUsIG1vZD1Ob25lLCBjbD1Ob25lKToKICAgICAgICAiIiJQcm9kdWNlIHRleHQgZG9jdW1lbnRhdGlvbiBmb3IgYSBkYXRhIGRlc2NyaXB0b3IuIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX2RvY2Rlc2NyaXB0b3IobmFtZSwgb2JqZWN0LCBtb2QpCgogICAgZGVmIGRvY290aGVyKHNlbGYsIG9iamVjdCwgbmFtZT1Ob25lLCBtb2Q9Tm9uZSwgcGFyZW50PU5vbmUsIG1heGxlbj1Ob25lLCBkb2M9Tm9uZSk6CiAgICAgICAgIiIiUHJvZHVjZSB0ZXh0IGRvY3VtZW50YXRpb24gZm9yIGEgZGF0YSBvYmplY3QuIiIiCiAgICAgICAgcmVwciA9IHNlbGYucmVwcihvYmplY3QpCiAgICAgICAgaWYgbWF4bGVuOgogICAgICAgICAgICBsaW5lID0gKG5hbWUgYW5kIG5hbWUgKyAnID0gJyBvciAnJykgKyByZXByCiAgICAgICAgICAgIGNob3AgPSBtYXhsZW4gLSBsZW4obGluZSkKICAgICAgICAgICAgaWYgY2hvcCA8IDA6IHJlcHIgPSByZXByWzpjaG9wXSArICcuLi4nCiAgICAgICAgbGluZSA9IChuYW1lIGFuZCBzZWxmLmJvbGQobmFtZSkgKyAnID0gJyBvciAnJykgKyByZXByCiAgICAgICAgaWYgZG9jIGlzIG5vdCBOb25lOgogICAgICAgICAgICBsaW5lICs9ICdcbicgKyBzZWxmLmluZGVudChzdHIoZG9jKSkKICAgICAgICByZXR1cm4gbGluZQoKY2xhc3MgX1BsYWluVGV4dERvYyhUZXh0RG9jKToKICAgICIiIlN1YmNsYXNzIG9mIFRleHREb2Mgd2hpY2ggb3ZlcnJpZGVzIHN0cmluZyBzdHlsaW5nIiIiCiAgICBkZWYgYm9sZChzZWxmLCB0ZXh0KToKICAgICAgICByZXR1cm4gdGV4dAoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gdXNlciBpbnRlcmZhY2VzCgpkZWYgcGFnZXIodGV4dCk6CiAgICAiIiJUaGUgZmlyc3QgdGltZSB0aGlzIGlzIGNhbGxlZCwgZGV0ZXJtaW5lIHdoYXQga2luZCBvZiBwYWdlciB0byB1c2UuIiIiCiAgICBnbG9iYWwgcGFnZXIKICAgIHBhZ2VyID0gZ2V0cGFnZXIoKQogICAgcGFnZXIodGV4dCkKCmRlZiBnZXRwYWdlcigpOgogICAgIiIiRGVjaWRlIHdoYXQgbWV0aG9kIHRvIHVzZSBmb3IgcGFnaW5nIHRocm91Z2ggdGV4dC4iIiIKICAgIGlmIG5vdCBoYXNhdHRyKHN5cy5zdGRvdXQsICJpc2F0dHkiKToKICAgICAgICByZXR1cm4gcGxhaW5wYWdlcgogICAgaWYgbm90IHN5cy5zdGRpbi5pc2F0dHkoKSBvciBub3Qgc3lzLnN0ZG91dC5pc2F0dHkoKToKICAgICAgICByZXR1cm4gcGxhaW5wYWdlcgogICAgaWYgJ1BBR0VSJyBpbiBvcy5lbnZpcm9uOgogICAgICAgIGlmIHN5cy5wbGF0Zm9ybSA9PSAnd2luMzInOiAjIHBpcGVzIGNvbXBsZXRlbHkgYnJva2VuIGluIFdpbmRvd3MKICAgICAgICAgICAgcmV0dXJuIGxhbWJkYSB0ZXh0OiB0ZW1wZmlsZXBhZ2VyKHBsYWluKHRleHQpLCBvcy5lbnZpcm9uWydQQUdFUiddKQogICAgICAgIGVsaWYgb3MuZW52aXJvbi5nZXQoJ1RFUk0nKSBpbiAoJ2R1bWInLCAnZW1hY3MnKToKICAgICAgICAgICAgcmV0dXJuIGxhbWJkYSB0ZXh0OiBwaXBlcGFnZXIocGxhaW4odGV4dCksIG9zLmVudmlyb25bJ1BBR0VSJ10pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGxhbWJkYSB0ZXh0OiBwaXBlcGFnZXIodGV4dCwgb3MuZW52aXJvblsnUEFHRVInXSkKICAgIGlmIG9zLmVudmlyb24uZ2V0KCdURVJNJykgaW4gKCdkdW1iJywgJ2VtYWNzJyk6CiAgICAgICAgcmV0dXJuIHBsYWlucGFnZXIKICAgIGlmIHN5cy5wbGF0Zm9ybSA9PSAnd2luMzInIG9yIHN5cy5wbGF0Zm9ybS5zdGFydHN3aXRoKCdvczInKToKICAgICAgICByZXR1cm4gbGFtYmRhIHRleHQ6IHRlbXBmaWxlcGFnZXIocGxhaW4odGV4dCksICdtb3JlIDwnKQogICAgaWYgaGFzYXR0cihvcywgJ3N5c3RlbScpIGFuZCBvcy5zeXN0ZW0oJyhsZXNzKSAyPi9kZXYvbnVsbCcpID09IDA6CiAgICAgICAgcmV0dXJuIGxhbWJkYSB0ZXh0OiBwaXBlcGFnZXIodGV4dCwgJ2xlc3MnKQoKICAgIGltcG9ydCB0ZW1wZmlsZQogICAgKGZkLCBmaWxlbmFtZSkgPSB0ZW1wZmlsZS5ta3N0ZW1wKCkKICAgIG9zLmNsb3NlKGZkKQogICAgdHJ5OgogICAgICAgIGlmIGhhc2F0dHIob3MsICdzeXN0ZW0nKSBhbmQgb3Muc3lzdGVtKCdtb3JlICIlcyInICUgZmlsZW5hbWUpID09IDA6CiAgICAgICAgICAgIHJldHVybiBsYW1iZGEgdGV4dDogcGlwZXBhZ2VyKHRleHQsICdtb3JlJykKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gdHR5cGFnZXIKICAgIGZpbmFsbHk6CiAgICAgICAgb3MudW5saW5rKGZpbGVuYW1lKQoKZGVmIHBsYWluKHRleHQpOgogICAgIiIiUmVtb3ZlIGJvbGRmYWNlIGZvcm1hdHRpbmcgZnJvbSB0ZXh0LiIiIgogICAgcmV0dXJuIHJlLnN1YignLlxiJywgJycsIHRleHQpCgpkZWYgcGlwZXBhZ2VyKHRleHQsIGNtZCk6CiAgICAiIiJQYWdlIHRocm91Z2ggdGV4dCBieSBmZWVkaW5nIGl0IHRvIGFub3RoZXIgcHJvZ3JhbS4iIiIKICAgIHBpcGUgPSBvcy5wb3BlbihjbWQsICd3JykKICAgIHRyeToKICAgICAgICBwaXBlLndyaXRlKHRleHQpCiAgICAgICAgcGlwZS5jbG9zZSgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwYXNzICMgSWdub3JlIGJyb2tlbiBwaXBlcyBjYXVzZWQgYnkgcXVpdHRpbmcgdGhlIHBhZ2VyIHByb2dyYW0uCgpkZWYgdGVtcGZpbGVwYWdlcih0ZXh0LCBjbWQpOgogICAgIiIiUGFnZSB0aHJvdWdoIHRleHQgYnkgaW52b2tpbmcgYSBwcm9ncmFtIG9uIGEgdGVtcG9yYXJ5IGZpbGUuIiIiCiAgICBpbXBvcnQgdGVtcGZpbGUKICAgIGZpbGVuYW1lID0gdGVtcGZpbGUubWt0ZW1wKCkKICAgIGZpbGUgPSBvcGVuKGZpbGVuYW1lLCAndycpCiAgICBmaWxlLndyaXRlKHRleHQpCiAgICBmaWxlLmNsb3NlKCkKICAgIHRyeToKICAgICAgICBvcy5zeXN0ZW0oY21kICsgJyAiJyArIGZpbGVuYW1lICsgJyInKQogICAgZmluYWxseToKICAgICAgICBvcy51bmxpbmsoZmlsZW5hbWUpCgpkZWYgdHR5cGFnZXIodGV4dCk6CiAgICAiIiJQYWdlIHRocm91Z2ggdGV4dCBvbiBhIHRleHQgdGVybWluYWwuIiIiCiAgICBsaW5lcyA9IHBsYWluKHRleHQpLnNwbGl0KCdcbicpCiAgICB0cnk6CiAgICAgICAgaW1wb3J0IHR0eQogICAgICAgIGZkID0gc3lzLnN0ZGluLmZpbGVubygpCiAgICAgICAgb2xkID0gdHR5LnRjZ2V0YXR0cihmZCkKICAgICAgICB0dHkuc2V0Y2JyZWFrKGZkKQogICAgICAgIGdldGNoYXIgPSBsYW1iZGE6IHN5cy5zdGRpbi5yZWFkKDEpCiAgICBleGNlcHQgKEltcG9ydEVycm9yLCBBdHRyaWJ1dGVFcnJvcik6CiAgICAgICAgdHR5ID0gTm9uZQogICAgICAgIGdldGNoYXIgPSBsYW1iZGE6IHN5cy5zdGRpbi5yZWFkbGluZSgpWzotMV1bOjFdCgogICAgdHJ5OgogICAgICAgIHIgPSBpbmMgPSBvcy5lbnZpcm9uLmdldCgnTElORVMnLCAyNSkgLSAxCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZSgnXG4nLmpvaW4obGluZXNbOmluY10pICsgJ1xuJykKICAgICAgICB3aGlsZSBsaW5lc1tyOl06CiAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJy0tIG1vcmUgLS0nKQogICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgYyA9IGdldGNoYXIoKQoKICAgICAgICAgICAgaWYgYyBpbiAoJ3EnLCAnUScpOgogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZSgnXHIgICAgICAgICAgXHInKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxpZiBjIGluICgnXHInLCAnXG4nKToKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1xyICAgICAgICAgIFxyJyArIGxpbmVzW3JdICsgJ1xuJykKICAgICAgICAgICAgICAgIHIgPSByICsgMQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgaWYgYyBpbiAoJ2InLCAnQicsICdceDFiJyk6CiAgICAgICAgICAgICAgICByID0gciAtIGluYyAtIGluYwogICAgICAgICAgICAgICAgaWYgciA8IDA6IHIgPSAwCiAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1xuJyArICdcbicuam9pbihsaW5lc1tyOnIraW5jXSkgKyAnXG4nKQogICAgICAgICAgICByID0gciArIGluYwoKICAgIGZpbmFsbHk6CiAgICAgICAgaWYgdHR5OgogICAgICAgICAgICB0dHkudGNzZXRhdHRyKGZkLCB0dHkuVENTQUZMVVNILCBvbGQpCgpkZWYgcGxhaW5wYWdlcih0ZXh0KToKICAgICIiIlNpbXBseSBwcmludCB1bmZvcm1hdHRlZCB0ZXh0LiAgVGhpcyBpcyB0aGUgdWx0aW1hdGUgZmFsbGJhY2suIiIiCiAgICBzeXMuc3Rkb3V0LndyaXRlKHBsYWluKHRleHQpKQoKZGVmIGRlc2NyaWJlKHRoaW5nKToKICAgICIiIlByb2R1Y2UgYSBzaG9ydCBkZXNjcmlwdGlvbiBvZiB0aGUgZ2l2ZW4gdGhpbmcuIiIiCiAgICBpZiBpbnNwZWN0LmlzbW9kdWxlKHRoaW5nKToKICAgICAgICBpZiB0aGluZy5fX25hbWVfXyBpbiBzeXMuYnVpbHRpbl9tb2R1bGVfbmFtZXM6CiAgICAgICAgICAgIHJldHVybiAnYnVpbHQtaW4gbW9kdWxlICcgKyB0aGluZy5fX25hbWVfXwogICAgICAgIGlmIGhhc2F0dHIodGhpbmcsICdfX3BhdGhfXycpOgogICAgICAgICAgICByZXR1cm4gJ3BhY2thZ2UgJyArIHRoaW5nLl9fbmFtZV9fCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuICdtb2R1bGUgJyArIHRoaW5nLl9fbmFtZV9fCiAgICBpZiBpbnNwZWN0LmlzYnVpbHRpbih0aGluZyk6CiAgICAgICAgcmV0dXJuICdidWlsdC1pbiBmdW5jdGlvbiAnICsgdGhpbmcuX19uYW1lX18KICAgIGlmIGluc3BlY3QuaXNnZXRzZXRkZXNjcmlwdG9yKHRoaW5nKToKICAgICAgICByZXR1cm4gJ2dldHNldCBkZXNjcmlwdG9yICVzLiVzLiVzJyAlICgKICAgICAgICAgICAgdGhpbmcuX19vYmpjbGFzc19fLl9fbW9kdWxlX18sIHRoaW5nLl9fb2JqY2xhc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgdGhpbmcuX19uYW1lX18pCiAgICBpZiBpbnNwZWN0LmlzbWVtYmVyZGVzY3JpcHRvcih0aGluZyk6CiAgICAgICAgcmV0dXJuICdtZW1iZXIgZGVzY3JpcHRvciAlcy4lcy4lcycgJSAoCiAgICAgICAgICAgIHRoaW5nLl9fb2JqY2xhc3NfXy5fX21vZHVsZV9fLCB0aGluZy5fX29iamNsYXNzX18uX19uYW1lX18sCiAgICAgICAgICAgIHRoaW5nLl9fbmFtZV9fKQogICAgaWYgaW5zcGVjdC5pc2NsYXNzKHRoaW5nKToKICAgICAgICByZXR1cm4gJ2NsYXNzICcgKyB0aGluZy5fX25hbWVfXwogICAgaWYgaW5zcGVjdC5pc2Z1bmN0aW9uKHRoaW5nKToKICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uICcgKyB0aGluZy5fX25hbWVfXwogICAgaWYgaW5zcGVjdC5pc21ldGhvZCh0aGluZyk6CiAgICAgICAgcmV0dXJuICdtZXRob2QgJyArIHRoaW5nLl9fbmFtZV9fCiAgICByZXR1cm4gdHlwZSh0aGluZykuX19uYW1lX18KCmRlZiBsb2NhdGUocGF0aCwgZm9yY2Vsb2FkPTApOgogICAgIiIiTG9jYXRlIGFuIG9iamVjdCBieSBuYW1lIG9yIGRvdHRlZCBwYXRoLCBpbXBvcnRpbmcgYXMgbmVjZXNzYXJ5LiIiIgogICAgcGFydHMgPSBbcGFydCBmb3IgcGFydCBpbiBwYXRoLnNwbGl0KCcuJykgaWYgcGFydF0KICAgIG1vZHVsZSwgbiA9IE5vbmUsIDAKICAgIHdoaWxlIG4gPCBsZW4ocGFydHMpOgogICAgICAgIG5leHRtb2R1bGUgPSBzYWZlaW1wb3J0KCcuJy5qb2luKHBhcnRzWzpuKzFdKSwgZm9yY2Vsb2FkKQogICAgICAgIGlmIG5leHRtb2R1bGU6IG1vZHVsZSwgbiA9IG5leHRtb2R1bGUsIG4gKyAxCiAgICAgICAgZWxzZTogYnJlYWsKICAgIGlmIG1vZHVsZToKICAgICAgICBvYmplY3QgPSBtb2R1bGUKICAgIGVsc2U6CiAgICAgICAgb2JqZWN0ID0gYnVpbHRpbnMKICAgIGZvciBwYXJ0IGluIHBhcnRzW246XToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9iamVjdCA9IGdldGF0dHIob2JqZWN0LCBwYXJ0KQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgIHJldHVybiBvYmplY3QKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGludGVyYWN0aXZlIGludGVycHJldGVyIGludGVyZmFjZQoKdGV4dCA9IFRleHREb2MoKQpwbGFpbnRleHQgPSBfUGxhaW5UZXh0RG9jKCkKaHRtbCA9IEhUTUxEb2MoKQoKZGVmIHJlc29sdmUodGhpbmcsIGZvcmNlbG9hZD0wKToKICAgICIiIkdpdmVuIGFuIG9iamVjdCBvciBhIHBhdGggdG8gYW4gb2JqZWN0LCBnZXQgdGhlIG9iamVjdCBhbmQgaXRzIG5hbWUuIiIiCiAgICBpZiBpc2luc3RhbmNlKHRoaW5nLCBzdHIpOgogICAgICAgIG9iamVjdCA9IGxvY2F0ZSh0aGluZywgZm9yY2Vsb2FkKQogICAgICAgIGlmIG5vdCBvYmplY3Q6CiAgICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKCdubyBQeXRob24gZG9jdW1lbnRhdGlvbiBmb3VuZCBmb3IgJXInICUgdGhpbmcpCiAgICAgICAgcmV0dXJuIG9iamVjdCwgdGhpbmcKICAgIGVsc2U6CiAgICAgICAgbmFtZSA9IGdldGF0dHIodGhpbmcsICdfX25hbWVfXycsIE5vbmUpCiAgICAgICAgcmV0dXJuIHRoaW5nLCBuYW1lIGlmIGlzaW5zdGFuY2UobmFtZSwgc3RyKSBlbHNlIE5vbmUKCmRlZiByZW5kZXJfZG9jKHRoaW5nLCB0aXRsZT0nUHl0aG9uIExpYnJhcnkgRG9jdW1lbnRhdGlvbjogJXMnLCBmb3JjZWxvYWQ9MCwKICAgICAgICByZW5kZXJlcj1Ob25lKToKICAgICIiIlJlbmRlciB0ZXh0IGRvY3VtZW50YXRpb24sIGdpdmVuIGFuIG9iamVjdCBvciBhIHBhdGggdG8gYW4gb2JqZWN0LiIiIgogICAgaWYgcmVuZGVyZXIgaXMgTm9uZToKICAgICAgICByZW5kZXJlciA9IHRleHQKICAgIG9iamVjdCwgbmFtZSA9IHJlc29sdmUodGhpbmcsIGZvcmNlbG9hZCkKICAgIGRlc2MgPSBkZXNjcmliZShvYmplY3QpCiAgICBtb2R1bGUgPSBpbnNwZWN0LmdldG1vZHVsZShvYmplY3QpCiAgICBpZiBuYW1lIGFuZCAnLicgaW4gbmFtZToKICAgICAgICBkZXNjICs9ICcgaW4gJyArIG5hbWVbOm5hbWUucmZpbmQoJy4nKV0KICAgIGVsaWYgbW9kdWxlIGFuZCBtb2R1bGUgaXMgbm90IG9iamVjdDoKICAgICAgICBkZXNjICs9ICcgaW4gbW9kdWxlICcgKyBtb2R1bGUuX19uYW1lX18KCiAgICBpZiBub3QgKGluc3BlY3QuaXNtb2R1bGUob2JqZWN0KSBvcgogICAgICAgICAgICAgIGluc3BlY3QuaXNjbGFzcyhvYmplY3QpIG9yCiAgICAgICAgICAgICAgaW5zcGVjdC5pc3JvdXRpbmUob2JqZWN0KSBvcgogICAgICAgICAgICAgIGluc3BlY3QuaXNnZXRzZXRkZXNjcmlwdG9yKG9iamVjdCkgb3IKICAgICAgICAgICAgICBpbnNwZWN0LmlzbWVtYmVyZGVzY3JpcHRvcihvYmplY3QpIG9yCiAgICAgICAgICAgICAgaXNpbnN0YW5jZShvYmplY3QsIHByb3BlcnR5KSk6CiAgICAgICAgIyBJZiB0aGUgcGFzc2VkIG9iamVjdCBpcyBhIHBpZWNlIG9mIGRhdGEgb3IgYW4gaW5zdGFuY2UsCiAgICAgICAgIyBkb2N1bWVudCBpdHMgYXZhaWxhYmxlIG1ldGhvZHMgaW5zdGVhZCBvZiBpdHMgdmFsdWUuCiAgICAgICAgb2JqZWN0ID0gdHlwZShvYmplY3QpCiAgICAgICAgZGVzYyArPSAnIG9iamVjdCcKICAgIHJldHVybiB0aXRsZSAlIGRlc2MgKyAnXG5cbicgKyByZW5kZXJlci5kb2N1bWVudChvYmplY3QsIG5hbWUpCgpkZWYgZG9jKHRoaW5nLCB0aXRsZT0nUHl0aG9uIExpYnJhcnkgRG9jdW1lbnRhdGlvbjogJXMnLCBmb3JjZWxvYWQ9MCwKICAgICAgICBvdXRwdXQ9Tm9uZSk6CiAgICAiIiJEaXNwbGF5IHRleHQgZG9jdW1lbnRhdGlvbiwgZ2l2ZW4gYW4gb2JqZWN0IG9yIGEgcGF0aCB0byBhbiBvYmplY3QuIiIiCiAgICB0cnk6CiAgICAgICAgaWYgb3V0cHV0IGlzIE5vbmU6CiAgICAgICAgICAgIHBhZ2VyKHJlbmRlcl9kb2ModGhpbmcsIHRpdGxlLCBmb3JjZWxvYWQpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG91dHB1dC53cml0ZShyZW5kZXJfZG9jKHRoaW5nLCB0aXRsZSwgZm9yY2Vsb2FkLCBwbGFpbnRleHQpKQogICAgZXhjZXB0IChJbXBvcnRFcnJvciwgRXJyb3JEdXJpbmdJbXBvcnQpIGFzIHZhbHVlOgogICAgICAgIHByaW50KHZhbHVlKQoKZGVmIHdyaXRlZG9jKHRoaW5nLCBmb3JjZWxvYWQ9MCk6CiAgICAiIiJXcml0ZSBIVE1MIGRvY3VtZW50YXRpb24gdG8gYSBmaWxlIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4iIiIKICAgIHRyeToKICAgICAgICBvYmplY3QsIG5hbWUgPSByZXNvbHZlKHRoaW5nLCBmb3JjZWxvYWQpCiAgICAgICAgcGFnZSA9IGh0bWwucGFnZShkZXNjcmliZShvYmplY3QpLCBodG1sLmRvY3VtZW50KG9iamVjdCwgbmFtZSkpCiAgICAgICAgZmlsZSA9IG9wZW4obmFtZSArICcuaHRtbCcsICd3JywgZW5jb2Rpbmc9J3V0Zi04JykKICAgICAgICBmaWxlLndyaXRlKHBhZ2UpCiAgICAgICAgZmlsZS5jbG9zZSgpCiAgICAgICAgcHJpbnQoJ3dyb3RlJywgbmFtZSArICcuaHRtbCcpCiAgICBleGNlcHQgKEltcG9ydEVycm9yLCBFcnJvckR1cmluZ0ltcG9ydCkgYXMgdmFsdWU6CiAgICAgICAgcHJpbnQodmFsdWUpCgpkZWYgd3JpdGVkb2NzKGRpciwgcGtncGF0aD0nJywgZG9uZT1Ob25lKToKICAgICIiIldyaXRlIG91dCBIVE1MIGRvY3VtZW50YXRpb24gZm9yIGFsbCBtb2R1bGVzIGluIGEgZGlyZWN0b3J5IHRyZWUuIiIiCiAgICBpZiBkb25lIGlzIE5vbmU6IGRvbmUgPSB7fQogICAgZm9yIGltcG9ydGVyLCBtb2RuYW1lLCBpc3BrZyBpbiBwa2d1dGlsLndhbGtfcGFja2FnZXMoW2Rpcl0sIHBrZ3BhdGgpOgogICAgICAgIHdyaXRlZG9jKG1vZG5hbWUpCiAgICByZXR1cm4KCmNsYXNzIEhlbHBlcjoKCiAgICAjIFRoZXNlIGRpY3Rpb25hcmllcyBtYXAgYSB0b3BpYyBuYW1lIHRvIGVpdGhlciBhbiBhbGlhcywgb3IgYSB0dXBsZQogICAgIyAobGFiZWwsIHNlZWFsc28taXRlbXMpLiAgVGhlICJsYWJlbCIgaXMgdGhlIGxhYmVsIG9mIHRoZSBjb3JyZXNwb25kaW5nCiAgICAjIHNlY3Rpb24gaW4gdGhlIC5yc3QgZmlsZSB1bmRlciBEb2MvIGFuZCBhbiBpbmRleCBpbnRvIHRoZSBkaWN0aW9uYXJ5CiAgICAjIGluIHB5ZG9jX2RhdGEvdG9waWNzLnB5LgogICAgIwogICAgIyBDQVVUSU9OOiBpZiB5b3UgY2hhbmdlIG9uZSBvZiB0aGVzZSBkaWN0aW9uYXJpZXMsIGJlIHN1cmUgdG8gYWRhcHQgdGhlCiAgICAjICAgICAgICAgIGxpc3Qgb2YgbmVlZGVkIGxhYmVscyBpbiBEb2MvdG9vbHMvc3BoaW54ZXh0L3B5c3BlY2lmaWMucHkgYW5kCiAgICAjICAgICAgICAgIHJlZ2VuZXJhdGUgdGhlIHB5ZG9jX2RhdGEvdG9waWNzLnB5IGZpbGUgYnkgcnVubmluZwogICAgIyAgICAgICAgICAgICAgbWFrZSBweWRvYy10b3BpY3MKICAgICMgICAgICAgICAgaW4gRG9jLyBhbmQgY29weWluZyB0aGUgb3V0cHV0IGZpbGUgaW50byB0aGUgTGliLyBkaXJlY3RvcnkuCgogICAga2V5d29yZHMgPSB7CiAgICAgICAgJ0ZhbHNlJzogJycsCiAgICAgICAgJ05vbmUnOiAnJywKICAgICAgICAnVHJ1ZSc6ICcnLAogICAgICAgICdhbmQnOiAnQk9PTEVBTicsCiAgICAgICAgJ2FzJzogJ3dpdGgnLAogICAgICAgICdhc3NlcnQnOiAoJ2Fzc2VydCcsICcnKSwKICAgICAgICAnYnJlYWsnOiAoJ2JyZWFrJywgJ3doaWxlIGZvcicpLAogICAgICAgICdjbGFzcyc6ICgnY2xhc3MnLCAnQ0xBU1NFUyBTUEVDSUFMTUVUSE9EUycpLAogICAgICAgICdjb250aW51ZSc6ICgnY29udGludWUnLCAnd2hpbGUgZm9yJyksCiAgICAgICAgJ2RlZic6ICgnZnVuY3Rpb24nLCAnJyksCiAgICAgICAgJ2RlbCc6ICgnZGVsJywgJ0JBU0lDTUVUSE9EUycpLAogICAgICAgICdlbGlmJzogJ2lmJywKICAgICAgICAnZWxzZSc6ICgnZWxzZScsICd3aGlsZSBmb3InKSwKICAgICAgICAnZXhjZXB0JzogJ3RyeScsCiAgICAgICAgJ2ZpbmFsbHknOiAndHJ5JywKICAgICAgICAnZm9yJzogKCdmb3InLCAnYnJlYWsgY29udGludWUgd2hpbGUnKSwKICAgICAgICAnZnJvbSc6ICdpbXBvcnQnLAogICAgICAgICdnbG9iYWwnOiAoJ2dsb2JhbCcsICdub25sb2NhbCBOQU1FU1BBQ0VTJyksCiAgICAgICAgJ2lmJzogKCdpZicsICdUUlVUSFZBTFVFJyksCiAgICAgICAgJ2ltcG9ydCc6ICgnaW1wb3J0JywgJ01PRFVMRVMnKSwKICAgICAgICAnaW4nOiAoJ2luJywgJ1NFUVVFTkNFTUVUSE9EUycpLAogICAgICAgICdpcyc6ICdDT01QQVJJU09OJywKICAgICAgICAnbGFtYmRhJzogKCdsYW1iZGEnLCAnRlVOQ1RJT05TJyksCiAgICAgICAgJ25vbmxvY2FsJzogKCdub25sb2NhbCcsICdnbG9iYWwgTkFNRVNQQUNFUycpLAogICAgICAgICdub3QnOiAnQk9PTEVBTicsCiAgICAgICAgJ29yJzogJ0JPT0xFQU4nLAogICAgICAgICdwYXNzJzogKCdwYXNzJywgJycpLAogICAgICAgICdyYWlzZSc6ICgncmFpc2UnLCAnRVhDRVBUSU9OUycpLAogICAgICAgICdyZXR1cm4nOiAoJ3JldHVybicsICdGVU5DVElPTlMnKSwKICAgICAgICAndHJ5JzogKCd0cnknLCAnRVhDRVBUSU9OUycpLAogICAgICAgICd3aGlsZSc6ICgnd2hpbGUnLCAnYnJlYWsgY29udGludWUgaWYgVFJVVEhWQUxVRScpLAogICAgICAgICd3aXRoJzogKCd3aXRoJywgJ0NPTlRFWFRNQU5BR0VSUyBFWENFUFRJT05TIHlpZWxkJyksCiAgICAgICAgJ3lpZWxkJzogKCd5aWVsZCcsICcnKSwKICAgIH0KICAgICMgRWl0aGVyIGFkZCBzeW1ib2xzIHRvIHRoaXMgZGljdGlvbmFyeSBvciB0byB0aGUgc3ltYm9scyBkaWN0aW9uYXJ5CiAgICAjIGRpcmVjdGx5OiBXaGljaGV2ZXIgaXMgZWFzaWVyLiBUaGV5IGFyZSBtZXJnZWQgbGF0ZXIuCiAgICBfc3ltYm9sc19pbnZlcnNlID0gewogICAgICAgICdTVFJJTkdTJyA6ICgiJyIsICInJyciLCAiciciLCAiYiciLCAnIiIiJywgJyInLCAnciInLCAnYiInKSwKICAgICAgICAnT1BFUkFUT1JTJyA6ICgnKycsICctJywgJyonLCAnKionLCAnLycsICcvLycsICclJywgJzw8JywgJz4+JywgJyYnLAogICAgICAgICAgICAgICAgICAgICAgICd8JywgJ14nLCAnficsICc8JywgJz4nLCAnPD0nLCAnPj0nLCAnPT0nLCAnIT0nLCAnPD4nKSwKICAgICAgICAnQ09NUEFSSVNPTicgOiAoJzwnLCAnPicsICc8PScsICc+PScsICc9PScsICchPScsICc8PicpLAogICAgICAgICdVTkFSWScgOiAoJy0nLCAnficpLAogICAgICAgICdBVUdNRU5URURBU1NJR05NRU5UJyA6ICgnKz0nLCAnLT0nLCAnKj0nLCAnLz0nLCAnJT0nLCAnJj0nLCAnfD0nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdePScsICc8PD0nLCAnPj49JywgJyoqPScsICcvLz0nKSwKICAgICAgICAnQklUV0lTRScgOiAoJzw8JywgJz4+JywgJyYnLCAnfCcsICdeJywgJ34nKSwKICAgICAgICAnQ09NUExFWCcgOiAoJ2onLCAnSicpCiAgICB9CiAgICBzeW1ib2xzID0gewogICAgICAgICclJzogJ09QRVJBVE9SUyBGT1JNQVRUSU5HJywKICAgICAgICAnKionOiAnUE9XRVInLAogICAgICAgICcsJzogJ1RVUExFUyBMSVNUUyBGVU5DVElPTlMnLAogICAgICAgICcuJzogJ0FUVFJJQlVURVMgRkxPQVQgTU9EVUxFUyBPQkpFQ1RTJywKICAgICAgICAnLi4uJzogJ0VMTElQU0lTJywKICAgICAgICAnOic6ICdTTElDSU5HUyBESUNUSU9OQVJZTElURVJBTFMnLAogICAgICAgICdAJzogJ2RlZiBjbGFzcycsCiAgICAgICAgJ1xcJzogJ1NUUklOR1MnLAogICAgICAgICdfJzogJ1BSSVZBVEVOQU1FUycsCiAgICAgICAgJ19fJzogJ1BSSVZBVEVOQU1FUyBTUEVDSUFMTUVUSE9EUycsCiAgICAgICAgJ2AnOiAnQkFDS1FVT1RFUycsCiAgICAgICAgJygnOiAnVFVQTEVTIEZVTkNUSU9OUyBDQUxMUycsCiAgICAgICAgJyknOiAnVFVQTEVTIEZVTkNUSU9OUyBDQUxMUycsCiAgICAgICAgJ1snOiAnTElTVFMgU1VCU0NSSVBUUyBTTElDSU5HUycsCiAgICAgICAgJ10nOiAnTElTVFMgU1VCU0NSSVBUUyBTTElDSU5HUycKICAgIH0KICAgIGZvciB0b3BpYywgc3ltYm9sc18gaW4gX3N5bWJvbHNfaW52ZXJzZS5pdGVtcygpOgogICAgICAgIGZvciBzeW1ib2wgaW4gc3ltYm9sc186CiAgICAgICAgICAgIHRvcGljcyA9IHN5bWJvbHMuZ2V0KHN5bWJvbCwgdG9waWMpCiAgICAgICAgICAgIGlmIHRvcGljIG5vdCBpbiB0b3BpY3M6CiAgICAgICAgICAgICAgICB0b3BpY3MgPSB0b3BpY3MgKyAnICcgKyB0b3BpYwogICAgICAgICAgICBzeW1ib2xzW3N5bWJvbF0gPSB0b3BpY3MKCiAgICB0b3BpY3MgPSB7CiAgICAgICAgJ1RZUEVTJzogKCd0eXBlcycsICdTVFJJTkdTIFVOSUNPREUgTlVNQkVSUyBTRVFVRU5DRVMgTUFQUElOR1MgJwogICAgICAgICAgICAgICAgICAnRlVOQ1RJT05TIENMQVNTRVMgTU9EVUxFUyBGSUxFUyBpbnNwZWN0JyksCiAgICAgICAgJ1NUUklOR1MnOiAoJ3N0cmluZ3MnLCAnc3RyIFVOSUNPREUgU0VRVUVOQ0VTIFNUUklOR01FVEhPRFMgJwogICAgICAgICAgICAgICAgICAgICdGT1JNQVRUSU5HIFRZUEVTJyksCiAgICAgICAgJ1NUUklOR01FVEhPRFMnOiAoJ3N0cmluZy1tZXRob2RzJywgJ1NUUklOR1MgRk9STUFUVElORycpLAogICAgICAgICdGT1JNQVRUSU5HJzogKCdmb3JtYXRzdHJpbmdzJywgJ09QRVJBVE9SUycpLAogICAgICAgICdVTklDT0RFJzogKCdzdHJpbmdzJywgJ2VuY29kaW5ncyB1bmljb2RlIFNFUVVFTkNFUyBTVFJJTkdNRVRIT0RTICcKICAgICAgICAgICAgICAgICAgICAnRk9STUFUVElORyBUWVBFUycpLAogICAgICAgICdOVU1CRVJTJzogKCdudW1iZXJzJywgJ0lOVEVHRVIgRkxPQVQgQ09NUExFWCBUWVBFUycpLAogICAgICAgICdJTlRFR0VSJzogKCdpbnRlZ2VycycsICdpbnQgcmFuZ2UnKSwKICAgICAgICAnRkxPQVQnOiAoJ2Zsb2F0aW5nJywgJ2Zsb2F0IG1hdGgnKSwKICAgICAgICAnQ09NUExFWCc6ICgnaW1hZ2luYXJ5JywgJ2NvbXBsZXggY21hdGgnKSwKICAgICAgICAnU0VRVUVOQ0VTJzogKCd0eXBlc3NlcScsICdTVFJJTkdNRVRIT0RTIEZPUk1BVFRJTkcgcmFuZ2UgTElTVFMnKSwKICAgICAgICAnTUFQUElOR1MnOiAnRElDVElPTkFSSUVTJywKICAgICAgICAnRlVOQ1RJT05TJzogKCd0eXBlc2Z1bmN0aW9ucycsICdkZWYgVFlQRVMnKSwKICAgICAgICAnTUVUSE9EUyc6ICgndHlwZXNtZXRob2RzJywgJ2NsYXNzIGRlZiBDTEFTU0VTIFRZUEVTJyksCiAgICAgICAgJ0NPREVPQkpFQ1RTJzogKCdibHRpbi1jb2RlLW9iamVjdHMnLCAnY29tcGlsZSBGVU5DVElPTlMgVFlQRVMnKSwKICAgICAgICAnVFlQRU9CSkVDVFMnOiAoJ2JsdGluLXR5cGUtb2JqZWN0cycsICd0eXBlcyBUWVBFUycpLAogICAgICAgICdGUkFNRU9CSkVDVFMnOiAnVFlQRVMnLAogICAgICAgICdUUkFDRUJBQ0tTJzogJ1RZUEVTJywKICAgICAgICAnTk9ORSc6ICgnYmx0aW4tbnVsbC1vYmplY3QnLCAnJyksCiAgICAgICAgJ0VMTElQU0lTJzogKCdibHRpbi1lbGxpcHNpcy1vYmplY3QnLCAnU0xJQ0lOR1MnKSwKICAgICAgICAnRklMRVMnOiAoJ2JsdGluLWZpbGUtb2JqZWN0cycsICcnKSwKICAgICAgICAnU1BFQ0lBTEFUVFJJQlVURVMnOiAoJ3NwZWNpYWxhdHRycycsICcnKSwKICAgICAgICAnQ0xBU1NFUyc6ICgndHlwZXMnLCAnY2xhc3MgU1BFQ0lBTE1FVEhPRFMgUFJJVkFURU5BTUVTJyksCiAgICAgICAgJ01PRFVMRVMnOiAoJ3R5cGVzbW9kdWxlcycsICdpbXBvcnQnKSwKICAgICAgICAnUEFDS0FHRVMnOiAnaW1wb3J0JywKICAgICAgICAnRVhQUkVTU0lPTlMnOiAoJ29wZXJhdG9yLXN1bW1hcnknLCAnbGFtYmRhIG9yIGFuZCBub3QgaW4gaXMgQk9PTEVBTiAnCiAgICAgICAgICAgICAgICAgICAgICAgICdDT01QQVJJU09OIEJJVFdJU0UgU0hJRlRJTkcgQklOQVJZIEZPUk1BVFRJTkcgUE9XRVIgJwogICAgICAgICAgICAgICAgICAgICAgICAnVU5BUlkgQVRUUklCVVRFUyBTVUJTQ1JJUFRTIFNMSUNJTkdTIENBTExTIFRVUExFUyAnCiAgICAgICAgICAgICAgICAgICAgICAgICdMSVNUUyBESUNUSU9OQVJJRVMnKSwKICAgICAgICAnT1BFUkFUT1JTJzogJ0VYUFJFU1NJT05TJywKICAgICAgICAnUFJFQ0VERU5DRSc6ICdFWFBSRVNTSU9OUycsCiAgICAgICAgJ09CSkVDVFMnOiAoJ29iamVjdHMnLCAnVFlQRVMnKSwKICAgICAgICAnU1BFQ0lBTE1FVEhPRFMnOiAoJ3NwZWNpYWxuYW1lcycsICdCQVNJQ01FVEhPRFMgQVRUUklCVVRFTUVUSE9EUyAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICdDQUxMQUJMRU1FVEhPRFMgU0VRVUVOQ0VNRVRIT0RTIE1BUFBJTkdNRVRIT0RTICcKICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05VTUJFUk1FVEhPRFMgQ0xBU1NFUycpLAogICAgICAgICdCQVNJQ01FVEhPRFMnOiAoJ2N1c3RvbWl6YXRpb24nLCAnaGFzaCByZXByIHN0ciBTUEVDSUFMTUVUSE9EUycpLAogICAgICAgICdBVFRSSUJVVEVNRVRIT0RTJzogKCdhdHRyaWJ1dGUtYWNjZXNzJywgJ0FUVFJJQlVURVMgU1BFQ0lBTE1FVEhPRFMnKSwKICAgICAgICAnQ0FMTEFCTEVNRVRIT0RTJzogKCdjYWxsYWJsZS10eXBlcycsICdDQUxMUyBTUEVDSUFMTUVUSE9EUycpLAogICAgICAgICdTRVFVRU5DRU1FVEhPRFMnOiAoJ3NlcXVlbmNlLXR5cGVzJywgJ1NFUVVFTkNFUyBTRVFVRU5DRU1FVEhPRFMgJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTUEVDSUFMTUVUSE9EUycpLAogICAgICAgICdNQVBQSU5HTUVUSE9EUyc6ICgnc2VxdWVuY2UtdHlwZXMnLCAnTUFQUElOR1MgU1BFQ0lBTE1FVEhPRFMnKSwKICAgICAgICAnTlVNQkVSTUVUSE9EUyc6ICgnbnVtZXJpYy10eXBlcycsICdOVU1CRVJTIEFVR01FTlRFREFTU0lHTk1FTlQgJwogICAgICAgICAgICAgICAgICAgICAgICAgICdTUEVDSUFMTUVUSE9EUycpLAogICAgICAgICdFWEVDVVRJT04nOiAoJ2V4ZWNtb2RlbCcsICdOQU1FU1BBQ0VTIERZTkFNSUNGRUFUVVJFUyBFWENFUFRJT05TJyksCiAgICAgICAgJ05BTUVTUEFDRVMnOiAoJ25hbWluZycsICdnbG9iYWwgbm9ubG9jYWwgQVNTSUdOTUVOVCBERUxFVElPTiBEWU5BTUlDRkVBVFVSRVMnKSwKICAgICAgICAnRFlOQU1JQ0ZFQVRVUkVTJzogKCdkeW5hbWljLWZlYXR1cmVzJywgJycpLAogICAgICAgICdTQ09QSU5HJzogJ05BTUVTUEFDRVMnLAogICAgICAgICdGUkFNRVMnOiAnTkFNRVNQQUNFUycsCiAgICAgICAgJ0VYQ0VQVElPTlMnOiAoJ2V4Y2VwdGlvbnMnLCAndHJ5IGV4Y2VwdCBmaW5hbGx5IHJhaXNlJyksCiAgICAgICAgJ0NPTlZFUlNJT05TJzogKCdjb252ZXJzaW9ucycsICcnKSwKICAgICAgICAnSURFTlRJRklFUlMnOiAoJ2lkZW50aWZpZXJzJywgJ2tleXdvcmRzIFNQRUNJQUxJREVOVElGSUVSUycpLAogICAgICAgICdTUEVDSUFMSURFTlRJRklFUlMnOiAoJ2lkLWNsYXNzZXMnLCAnJyksCiAgICAgICAgJ1BSSVZBVEVOQU1FUyc6ICgnYXRvbS1pZGVudGlmaWVycycsICcnKSwKICAgICAgICAnTElURVJBTFMnOiAoJ2F0b20tbGl0ZXJhbHMnLCAnU1RSSU5HUyBOVU1CRVJTIFRVUExFTElURVJBTFMgJwogICAgICAgICAgICAgICAgICAgICAnTElTVExJVEVSQUxTIERJQ1RJT05BUllMSVRFUkFMUycpLAogICAgICAgICdUVVBMRVMnOiAnU0VRVUVOQ0VTJywKICAgICAgICAnVFVQTEVMSVRFUkFMUyc6ICgnZXhwcmxpc3RzJywgJ1RVUExFUyBMSVRFUkFMUycpLAogICAgICAgICdMSVNUUyc6ICgndHlwZXNzZXEtbXV0YWJsZScsICdMSVNUTElURVJBTFMnKSwKICAgICAgICAnTElTVExJVEVSQUxTJzogKCdsaXN0cycsICdMSVNUUyBMSVRFUkFMUycpLAogICAgICAgICdESUNUSU9OQVJJRVMnOiAoJ3R5cGVzbWFwcGluZycsICdESUNUSU9OQVJZTElURVJBTFMnKSwKICAgICAgICAnRElDVElPTkFSWUxJVEVSQUxTJzogKCdkaWN0JywgJ0RJQ1RJT05BUklFUyBMSVRFUkFMUycpLAogICAgICAgICdBVFRSSUJVVEVTJzogKCdhdHRyaWJ1dGUtcmVmZXJlbmNlcycsICdnZXRhdHRyIGhhc2F0dHIgc2V0YXR0ciBBVFRSSUJVVEVNRVRIT0RTJyksCiAgICAgICAgJ1NVQlNDUklQVFMnOiAoJ3N1YnNjcmlwdGlvbnMnLCAnU0VRVUVOQ0VNRVRIT0RTJyksCiAgICAgICAgJ1NMSUNJTkdTJzogKCdzbGljaW5ncycsICdTRVFVRU5DRU1FVEhPRFMnKSwKICAgICAgICAnQ0FMTFMnOiAoJ2NhbGxzJywgJ0VYUFJFU1NJT05TJyksCiAgICAgICAgJ1BPV0VSJzogKCdwb3dlcicsICdFWFBSRVNTSU9OUycpLAogICAgICAgICdVTkFSWSc6ICgndW5hcnknLCAnRVhQUkVTU0lPTlMnKSwKICAgICAgICAnQklOQVJZJzogKCdiaW5hcnknLCAnRVhQUkVTU0lPTlMnKSwKICAgICAgICAnU0hJRlRJTkcnOiAoJ3NoaWZ0aW5nJywgJ0VYUFJFU1NJT05TJyksCiAgICAgICAgJ0JJVFdJU0UnOiAoJ2JpdHdpc2UnLCAnRVhQUkVTU0lPTlMnKSwKICAgICAgICAnQ09NUEFSSVNPTic6ICgnY29tcGFyaXNvbnMnLCAnRVhQUkVTU0lPTlMgQkFTSUNNRVRIT0RTJyksCiAgICAgICAgJ0JPT0xFQU4nOiAoJ2Jvb2xlYW5zJywgJ0VYUFJFU1NJT05TIFRSVVRIVkFMVUUnKSwKICAgICAgICAnQVNTRVJUSU9OJzogJ2Fzc2VydCcsCiAgICAgICAgJ0FTU0lHTk1FTlQnOiAoJ2Fzc2lnbm1lbnQnLCAnQVVHTUVOVEVEQVNTSUdOTUVOVCcpLAogICAgICAgICdBVUdNRU5URURBU1NJR05NRU5UJzogKCdhdWdhc3NpZ24nLCAnTlVNQkVSTUVUSE9EUycpLAogICAgICAgICdERUxFVElPTic6ICdkZWwnLAogICAgICAgICdSRVRVUk5JTkcnOiAncmV0dXJuJywKICAgICAgICAnSU1QT1JUSU5HJzogJ2ltcG9ydCcsCiAgICAgICAgJ0NPTkRJVElPTkFMJzogJ2lmJywKICAgICAgICAnTE9PUElORyc6ICgnY29tcG91bmQnLCAnZm9yIHdoaWxlIGJyZWFrIGNvbnRpbnVlJyksCiAgICAgICAgJ1RSVVRIVkFMVUUnOiAoJ3RydXRoJywgJ2lmIHdoaWxlIGFuZCBvciBub3QgQkFTSUNNRVRIT0RTJyksCiAgICAgICAgJ0RFQlVHR0lORyc6ICgnZGVidWdnZXInLCAncGRiJyksCiAgICAgICAgJ0NPTlRFWFRNQU5BR0VSUyc6ICgnY29udGV4dC1tYW5hZ2VycycsICd3aXRoJyksCiAgICB9CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGlucHV0PU5vbmUsIG91dHB1dD1Ob25lKToKICAgICAgICBzZWxmLl9pbnB1dCA9IGlucHV0CiAgICAgICAgc2VsZi5fb3V0cHV0ID0gb3V0cHV0CgogICAgaW5wdXQgID0gcHJvcGVydHkobGFtYmRhIHNlbGY6IHNlbGYuX2lucHV0IG9yIHN5cy5zdGRpbikKICAgIG91dHB1dCA9IHByb3BlcnR5KGxhbWJkYSBzZWxmOiBzZWxmLl9vdXRwdXQgb3Igc3lzLnN0ZG91dCkKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgaWYgaW5zcGVjdC5zdGFjaygpWzFdWzNdID09ICc/JzoKICAgICAgICAgICAgc2VsZigpCiAgICAgICAgICAgIHJldHVybiAnJwogICAgICAgIHJldHVybiAnPHB5ZG9jLkhlbHBlciBpbnN0YW5jZT4nCgogICAgX0dvSW50ZXJhY3RpdmUgPSBvYmplY3QoKQogICAgZGVmIF9fY2FsbF9fKHNlbGYsIHJlcXVlc3Q9X0dvSW50ZXJhY3RpdmUpOgogICAgICAgIGlmIHJlcXVlc3QgaXMgbm90IHNlbGYuX0dvSW50ZXJhY3RpdmU6CiAgICAgICAgICAgIHNlbGYuaGVscChyZXF1ZXN0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuaW50cm8oKQogICAgICAgICAgICBzZWxmLmludGVyYWN0KCkKICAgICAgICAgICAgc2VsZi5vdXRwdXQud3JpdGUoJycnCllvdSBhcmUgbm93IGxlYXZpbmcgaGVscCBhbmQgcmV0dXJuaW5nIHRvIHRoZSBQeXRob24gaW50ZXJwcmV0ZXIuCklmIHlvdSB3YW50IHRvIGFzayBmb3IgaGVscCBvbiBhIHBhcnRpY3VsYXIgb2JqZWN0IGRpcmVjdGx5IGZyb20gdGhlCmludGVycHJldGVyLCB5b3UgY2FuIHR5cGUgImhlbHAob2JqZWN0KSIuICBFeGVjdXRpbmcgImhlbHAoJ3N0cmluZycpIgpoYXMgdGhlIHNhbWUgZWZmZWN0IGFzIHR5cGluZyBhIHBhcnRpY3VsYXIgc3RyaW5nIGF0IHRoZSBoZWxwPiBwcm9tcHQuCicnJykKCiAgICBkZWYgaW50ZXJhY3Qoc2VsZik6CiAgICAgICAgc2VsZi5vdXRwdXQud3JpdGUoJ1xuJykKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXF1ZXN0ID0gc2VsZi5nZXRsaW5lKCdoZWxwPiAnKQogICAgICAgICAgICAgICAgaWYgbm90IHJlcXVlc3Q6IGJyZWFrCiAgICAgICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIHJlcXVlc3QgPSByZXBsYWNlKHJlcXVlc3QsICciJywgJycsICInIiwgJycpLnN0cmlwKCkKICAgICAgICAgICAgaWYgcmVxdWVzdC5sb3dlcigpIGluICgncScsICdxdWl0Jyk6IGJyZWFrCiAgICAgICAgICAgIHNlbGYuaGVscChyZXF1ZXN0KQoKICAgIGRlZiBnZXRsaW5lKHNlbGYsIHByb21wdCk6CiAgICAgICAgIiIiUmVhZCBvbmUgbGluZSwgdXNpbmcgaW5wdXQoKSB3aGVuIGFwcHJvcHJpYXRlLiIiIgogICAgICAgIGlmIHNlbGYuaW5wdXQgaXMgc3lzLnN0ZGluOgogICAgICAgICAgICByZXR1cm4gaW5wdXQocHJvbXB0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYub3V0cHV0LndyaXRlKHByb21wdCkKICAgICAgICAgICAgc2VsZi5vdXRwdXQuZmx1c2goKQogICAgICAgICAgICByZXR1cm4gc2VsZi5pbnB1dC5yZWFkbGluZSgpCgogICAgZGVmIGhlbHAoc2VsZiwgcmVxdWVzdCk6CiAgICAgICAgaWYgdHlwZShyZXF1ZXN0KSBpcyB0eXBlKCcnKToKICAgICAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3Quc3RyaXAoKQogICAgICAgICAgICBpZiByZXF1ZXN0ID09ICdoZWxwJzogc2VsZi5pbnRybygpCiAgICAgICAgICAgIGVsaWYgcmVxdWVzdCA9PSAna2V5d29yZHMnOiBzZWxmLmxpc3RrZXl3b3JkcygpCiAgICAgICAgICAgIGVsaWYgcmVxdWVzdCA9PSAnc3ltYm9scyc6IHNlbGYubGlzdHN5bWJvbHMoKQogICAgICAgICAgICBlbGlmIHJlcXVlc3QgPT0gJ3RvcGljcyc6IHNlbGYubGlzdHRvcGljcygpCiAgICAgICAgICAgIGVsaWYgcmVxdWVzdCA9PSAnbW9kdWxlcyc6IHNlbGYubGlzdG1vZHVsZXMoKQogICAgICAgICAgICBlbGlmIHJlcXVlc3RbOjhdID09ICdtb2R1bGVzICc6CiAgICAgICAgICAgICAgICBzZWxmLmxpc3Rtb2R1bGVzKHJlcXVlc3Quc3BsaXQoKVsxXSkKICAgICAgICAgICAgZWxpZiByZXF1ZXN0IGluIHNlbGYuc3ltYm9sczogc2VsZi5zaG93c3ltYm9sKHJlcXVlc3QpCiAgICAgICAgICAgIGVsaWYgcmVxdWVzdCBpbiBbJ1RydWUnLCAnRmFsc2UnLCAnTm9uZSddOgogICAgICAgICAgICAgICAgIyBzcGVjaWFsIGNhc2UgdGhlc2Uga2V5d29yZHMgc2luY2UgdGhleSBhcmUgb2JqZWN0cyB0b28KICAgICAgICAgICAgICAgIGRvYyhldmFsKHJlcXVlc3QpLCAnSGVscCBvbiAlczonKQogICAgICAgICAgICBlbGlmIHJlcXVlc3QgaW4gc2VsZi5rZXl3b3Jkczogc2VsZi5zaG93dG9waWMocmVxdWVzdCkKICAgICAgICAgICAgZWxpZiByZXF1ZXN0IGluIHNlbGYudG9waWNzOiBzZWxmLnNob3d0b3BpYyhyZXF1ZXN0KQogICAgICAgICAgICBlbGlmIHJlcXVlc3Q6IGRvYyhyZXF1ZXN0LCAnSGVscCBvbiAlczonLCBvdXRwdXQ9c2VsZi5fb3V0cHV0KQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShyZXF1ZXN0LCBIZWxwZXIpOiBzZWxmKCkKICAgICAgICBlbHNlOiBkb2MocmVxdWVzdCwgJ0hlbHAgb24gJXM6Jywgb3V0cHV0PXNlbGYuX291dHB1dCkKICAgICAgICBzZWxmLm91dHB1dC53cml0ZSgnXG4nKQoKICAgIGRlZiBpbnRybyhzZWxmKToKICAgICAgICBzZWxmLm91dHB1dC53cml0ZSgnJycKV2VsY29tZSB0byBQeXRob24gJXMhICBUaGlzIGlzIHRoZSBvbmxpbmUgaGVscCB1dGlsaXR5LgoKSWYgdGhpcyBpcyB5b3VyIGZpcnN0IHRpbWUgdXNpbmcgUHl0aG9uLCB5b3Ugc2hvdWxkIGRlZmluaXRlbHkgY2hlY2sgb3V0CnRoZSB0dXRvcmlhbCBvbiB0aGUgSW50ZXJuZXQgYXQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy8lcy90dXRvcmlhbC8uCgpFbnRlciB0aGUgbmFtZSBvZiBhbnkgbW9kdWxlLCBrZXl3b3JkLCBvciB0b3BpYyB0byBnZXQgaGVscCBvbiB3cml0aW5nClB5dGhvbiBwcm9ncmFtcyBhbmQgdXNpbmcgUHl0aG9uIG1vZHVsZXMuICBUbyBxdWl0IHRoaXMgaGVscCB1dGlsaXR5IGFuZApyZXR1cm4gdG8gdGhlIGludGVycHJldGVyLCBqdXN0IHR5cGUgInF1aXQiLgoKVG8gZ2V0IGEgbGlzdCBvZiBhdmFpbGFibGUgbW9kdWxlcywga2V5d29yZHMsIG9yIHRvcGljcywgdHlwZSAibW9kdWxlcyIsCiJrZXl3b3JkcyIsIG9yICJ0b3BpY3MiLiAgRWFjaCBtb2R1bGUgYWxzbyBjb21lcyB3aXRoIGEgb25lLWxpbmUgc3VtbWFyeQpvZiB3aGF0IGl0IGRvZXM7IHRvIGxpc3QgdGhlIG1vZHVsZXMgd2hvc2Ugc3VtbWFyaWVzIGNvbnRhaW4gYSBnaXZlbiB3b3JkCnN1Y2ggYXMgInNwYW0iLCB0eXBlICJtb2R1bGVzIHNwYW0iLgonJycgJSB0dXBsZShbc3lzLnZlcnNpb25bOjNdXSoyKSkKCiAgICBkZWYgbGlzdChzZWxmLCBpdGVtcywgY29sdW1ucz00LCB3aWR0aD04MCk6CiAgICAgICAgaXRlbXMgPSBsaXN0KHNvcnRlZChpdGVtcykpCiAgICAgICAgY29sdyA9IHdpZHRoIC8vIGNvbHVtbnMKICAgICAgICByb3dzID0gKGxlbihpdGVtcykgKyBjb2x1bW5zIC0gMSkgLy8gY29sdW1ucwogICAgICAgIGZvciByb3cgaW4gcmFuZ2Uocm93cyk6CiAgICAgICAgICAgIGZvciBjb2wgaW4gcmFuZ2UoY29sdW1ucyk6CiAgICAgICAgICAgICAgICBpID0gY29sICogcm93cyArIHJvdwogICAgICAgICAgICAgICAgaWYgaSA8IGxlbihpdGVtcyk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5vdXRwdXQud3JpdGUoaXRlbXNbaV0pCiAgICAgICAgICAgICAgICAgICAgaWYgY29sIDwgY29sdW1ucyAtIDE6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3V0cHV0LndyaXRlKCcgJyArICcgJyAqIChjb2x3IC0gMSAtIGxlbihpdGVtc1tpXSkpKQogICAgICAgICAgICBzZWxmLm91dHB1dC53cml0ZSgnXG4nKQoKICAgIGRlZiBsaXN0a2V5d29yZHMoc2VsZik6CiAgICAgICAgc2VsZi5vdXRwdXQud3JpdGUoJycnCkhlcmUgaXMgYSBsaXN0IG9mIHRoZSBQeXRob24ga2V5d29yZHMuICBFbnRlciBhbnkga2V5d29yZCB0byBnZXQgbW9yZSBoZWxwLgoKJycnKQogICAgICAgIHNlbGYubGlzdChzZWxmLmtleXdvcmRzLmtleXMoKSkKCiAgICBkZWYgbGlzdHN5bWJvbHMoc2VsZik6CiAgICAgICAgc2VsZi5vdXRwdXQud3JpdGUoJycnCkhlcmUgaXMgYSBsaXN0IG9mIHRoZSBwdW5jdHVhdGlvbiBzeW1ib2xzIHdoaWNoIFB5dGhvbiBhc3NpZ25zIHNwZWNpYWwgbWVhbmluZwp0by4gRW50ZXIgYW55IHN5bWJvbCB0byBnZXQgbW9yZSBoZWxwLgoKJycnKQogICAgICAgIHNlbGYubGlzdChzZWxmLnN5bWJvbHMua2V5cygpKQoKICAgIGRlZiBsaXN0dG9waWNzKHNlbGYpOgogICAgICAgIHNlbGYub3V0cHV0LndyaXRlKCcnJwpIZXJlIGlzIGEgbGlzdCBvZiBhdmFpbGFibGUgdG9waWNzLiAgRW50ZXIgYW55IHRvcGljIG5hbWUgdG8gZ2V0IG1vcmUgaGVscC4KCicnJykKICAgICAgICBzZWxmLmxpc3Qoc2VsZi50b3BpY3Mua2V5cygpKQoKICAgIGRlZiBzaG93dG9waWMoc2VsZiwgdG9waWMsIG1vcmVfeHJlZnM9JycpOgogICAgICAgIHRyeToKICAgICAgICAgICAgaW1wb3J0IHB5ZG9jX2RhdGEudG9waWNzCiAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICBzZWxmLm91dHB1dC53cml0ZSgnJycKU29ycnksIHRvcGljIGFuZCBrZXl3b3JkIGRvY3VtZW50YXRpb24gaXMgbm90IGF2YWlsYWJsZSBiZWNhdXNlIHRoZQptb2R1bGUgInB5ZG9jX2RhdGEudG9waWNzIiBjb3VsZCBub3QgYmUgZm91bmQuCicnJykKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgdGFyZ2V0ID0gc2VsZi50b3BpY3MuZ2V0KHRvcGljLCBzZWxmLmtleXdvcmRzLmdldCh0b3BpYykpCiAgICAgICAgaWYgbm90IHRhcmdldDoKICAgICAgICAgICAgc2VsZi5vdXRwdXQud3JpdGUoJ25vIGRvY3VtZW50YXRpb24gZm91bmQgZm9yICVzXG4nICUgcmVwcih0b3BpYykpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGlmIHR5cGUodGFyZ2V0KSBpcyB0eXBlKCcnKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuc2hvd3RvcGljKHRhcmdldCwgbW9yZV94cmVmcykKCiAgICAgICAgbGFiZWwsIHhyZWZzID0gdGFyZ2V0CiAgICAgICAgdHJ5OgogICAgICAgICAgICBkb2MgPSBweWRvY19kYXRhLnRvcGljcy50b3BpY3NbbGFiZWxdCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBzZWxmLm91dHB1dC53cml0ZSgnbm8gZG9jdW1lbnRhdGlvbiBmb3VuZCBmb3IgJXNcbicgJSByZXByKHRvcGljKSkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcGFnZXIoZG9jLnN0cmlwKCkgKyAnXG4nKQogICAgICAgIGlmIG1vcmVfeHJlZnM6CiAgICAgICAgICAgIHhyZWZzID0gKHhyZWZzIG9yICcnKSArICcgJyArIG1vcmVfeHJlZnMKICAgICAgICBpZiB4cmVmczoKICAgICAgICAgICAgaW1wb3J0IGZvcm1hdHRlcgogICAgICAgICAgICBidWZmZXIgPSBpby5TdHJpbmdJTygpCiAgICAgICAgICAgIGZvcm1hdHRlci5EdW1iV3JpdGVyKGJ1ZmZlcikuc2VuZF9mbG93aW5nX2RhdGEoCiAgICAgICAgICAgICAgICAnUmVsYXRlZCBoZWxwIHRvcGljczogJyArICcsICcuam9pbih4cmVmcy5zcGxpdCgpKSArICdcbicpCiAgICAgICAgICAgIHNlbGYub3V0cHV0LndyaXRlKCdcbiVzXG4nICUgYnVmZmVyLmdldHZhbHVlKCkpCgogICAgZGVmIF9nZXR0b3BpYyhzZWxmLCB0b3BpYywgbW9yZV94cmVmcz0nJyk6CiAgICAgICAgIiIiUmV0dXJuIHVuYnVmZmVyZWQgdHVwbGUgb2YgKHRvcGljLCB4cmVmcykuCgogICAgICAgIElmIGFuIGVycm9yIG9jY3VycyBoZXJlLCB0aGUgZXhjZXB0aW9uIGlzIGNhdWdodCBhbmQgZGlzcGxheWVkIGJ5CiAgICAgICAgdGhlIHVybCBoYW5kbGVyLgoKICAgICAgICBUaGlzIGZ1bmN0aW9uIGR1cGxpY2F0ZXMgdGhlIHNob3d0b3BpYyBtZXRob2QgYnV0IHJldHVybnMgaXRzCiAgICAgICAgcmVzdWx0IGRpcmVjdGx5IHNvIGl0IGNhbiBiZSBmb3JtYXR0ZWQgZm9yIGRpc3BsYXkgaW4gYW4gaHRtbCBwYWdlLgogICAgICAgICIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgaW1wb3J0IHB5ZG9jX2RhdGEudG9waWNzCiAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICByZXR1cm4oJycnClNvcnJ5LCB0b3BpYyBhbmQga2V5d29yZCBkb2N1bWVudGF0aW9uIGlzIG5vdCBhdmFpbGFibGUgYmVjYXVzZSB0aGUKbW9kdWxlICJweWRvY19kYXRhLnRvcGljcyIgY291bGQgbm90IGJlIGZvdW5kLgonJycgLCAnJykKICAgICAgICB0YXJnZXQgPSBzZWxmLnRvcGljcy5nZXQodG9waWMsIHNlbGYua2V5d29yZHMuZ2V0KHRvcGljKSkKICAgICAgICBpZiBub3QgdGFyZ2V0OgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdjb3VsZCBub3QgZmluZCB0b3BpYycpCiAgICAgICAgaWYgaXNpbnN0YW5jZSh0YXJnZXQsIHN0cik6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9nZXR0b3BpYyh0YXJnZXQsIG1vcmVfeHJlZnMpCiAgICAgICAgbGFiZWwsIHhyZWZzID0gdGFyZ2V0CiAgICAgICAgZG9jID0gcHlkb2NfZGF0YS50b3BpY3MudG9waWNzW2xhYmVsXQogICAgICAgIGlmIG1vcmVfeHJlZnM6CiAgICAgICAgICAgIHhyZWZzID0gKHhyZWZzIG9yICcnKSArICcgJyArIG1vcmVfeHJlZnMKICAgICAgICByZXR1cm4gZG9jLCB4cmVmcwoKICAgIGRlZiBzaG93c3ltYm9sKHNlbGYsIHN5bWJvbCk6CiAgICAgICAgdGFyZ2V0ID0gc2VsZi5zeW1ib2xzW3N5bWJvbF0KICAgICAgICB0b3BpYywgXywgeHJlZnMgPSB0YXJnZXQucGFydGl0aW9uKCcgJykKICAgICAgICBzZWxmLnNob3d0b3BpYyh0b3BpYywgeHJlZnMpCgogICAgZGVmIGxpc3Rtb2R1bGVzKHNlbGYsIGtleT0nJyk6CiAgICAgICAgaWYga2V5OgogICAgICAgICAgICBzZWxmLm91dHB1dC53cml0ZSgnJycKSGVyZSBpcyBhIGxpc3Qgb2YgbWF0Y2hpbmcgbW9kdWxlcy4gIEVudGVyIGFueSBtb2R1bGUgbmFtZSB0byBnZXQgbW9yZSBoZWxwLgoKJycnKQogICAgICAgICAgICBhcHJvcG9zKGtleSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLm91dHB1dC53cml0ZSgnJycKUGxlYXNlIHdhaXQgYSBtb21lbnQgd2hpbGUgSSBnYXRoZXIgYSBsaXN0IG9mIGFsbCBhdmFpbGFibGUgbW9kdWxlcy4uLgoKJycnKQogICAgICAgICAgICBtb2R1bGVzID0ge30KICAgICAgICAgICAgZGVmIGNhbGxiYWNrKHBhdGgsIG1vZG5hbWUsIGRlc2MsIG1vZHVsZXM9bW9kdWxlcyk6CiAgICAgICAgICAgICAgICBpZiBtb2RuYW1lIGFuZCBtb2RuYW1lWy05Ol0gPT0gJy5fX2luaXRfXyc6CiAgICAgICAgICAgICAgICAgICAgbW9kbmFtZSA9IG1vZG5hbWVbOi05XSArICcgKHBhY2thZ2UpJwogICAgICAgICAgICAgICAgaWYgbW9kbmFtZS5maW5kKCcuJykgPCAwOgogICAgICAgICAgICAgICAgICAgIG1vZHVsZXNbbW9kbmFtZV0gPSAxCiAgICAgICAgICAgIGRlZiBvbmVycm9yKG1vZG5hbWUpOgogICAgICAgICAgICAgICAgY2FsbGJhY2soTm9uZSwgbW9kbmFtZSwgTm9uZSkKICAgICAgICAgICAgTW9kdWxlU2Nhbm5lcigpLnJ1bihjYWxsYmFjaywgb25lcnJvcj1vbmVycm9yKQogICAgICAgICAgICBzZWxmLmxpc3QobW9kdWxlcy5rZXlzKCkpCiAgICAgICAgICAgIHNlbGYub3V0cHV0LndyaXRlKCcnJwpFbnRlciBhbnkgbW9kdWxlIG5hbWUgdG8gZ2V0IG1vcmUgaGVscC4gIE9yLCB0eXBlICJtb2R1bGVzIHNwYW0iIHRvIHNlYXJjaApmb3IgbW9kdWxlcyB3aG9zZSBkZXNjcmlwdGlvbnMgY29udGFpbiB0aGUgd29yZCAic3BhbSIuCicnJykKCmhlbHAgPSBIZWxwZXIoKQoKY2xhc3MgU2Nhbm5lcjoKICAgICIiIkEgZ2VuZXJpYyB0cmVlIGl0ZXJhdG9yLiIiIgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHJvb3RzLCBjaGlsZHJlbiwgZGVzY2VuZHApOgogICAgICAgIHNlbGYucm9vdHMgPSByb290c1s6XQogICAgICAgIHNlbGYuc3RhdGUgPSBbXQogICAgICAgIHNlbGYuY2hpbGRyZW4gPSBjaGlsZHJlbgogICAgICAgIHNlbGYuZGVzY2VuZHAgPSBkZXNjZW5kcAoKICAgIGRlZiBuZXh0KHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmLnN0YXRlOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5yb290czoKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIHJvb3QgPSBzZWxmLnJvb3RzLnBvcCgwKQogICAgICAgICAgICBzZWxmLnN0YXRlID0gWyhyb290LCBzZWxmLmNoaWxkcmVuKHJvb3QpKV0KICAgICAgICBub2RlLCBjaGlsZHJlbiA9IHNlbGYuc3RhdGVbLTFdCiAgICAgICAgaWYgbm90IGNoaWxkcmVuOgogICAgICAgICAgICBzZWxmLnN0YXRlLnBvcCgpCiAgICAgICAgICAgIHJldHVybiBzZWxmLm5leHQoKQogICAgICAgIGNoaWxkID0gY2hpbGRyZW4ucG9wKDApCiAgICAgICAgaWYgc2VsZi5kZXNjZW5kcChjaGlsZCk6CiAgICAgICAgICAgIHNlbGYuc3RhdGUuYXBwZW5kKChjaGlsZCwgc2VsZi5jaGlsZHJlbihjaGlsZCkpKQogICAgICAgIHJldHVybiBjaGlsZAoKCmNsYXNzIE1vZHVsZVNjYW5uZXI6CiAgICAiIiJBbiBpbnRlcnJ1cHRpYmxlIHNjYW5uZXIgdGhhdCBzZWFyY2hlcyBtb2R1bGUgc3lub3BzZXMuIiIiCgogICAgZGVmIHJ1bihzZWxmLCBjYWxsYmFjaywga2V5PU5vbmUsIGNvbXBsZXRlcj1Ob25lLCBvbmVycm9yPU5vbmUpOgogICAgICAgIGlmIGtleToga2V5ID0ga2V5Lmxvd2VyKCkKICAgICAgICBzZWxmLnF1aXQgPSBGYWxzZQogICAgICAgIHNlZW4gPSB7fQoKICAgICAgICBmb3IgbW9kbmFtZSBpbiBzeXMuYnVpbHRpbl9tb2R1bGVfbmFtZXM6CiAgICAgICAgICAgIGlmIG1vZG5hbWUgIT0gJ19fbWFpbl9fJzoKICAgICAgICAgICAgICAgIHNlZW5bbW9kbmFtZV0gPSAxCiAgICAgICAgICAgICAgICBpZiBrZXkgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhOb25lLCBtb2RuYW1lLCAnJykKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IF9faW1wb3J0X18obW9kbmFtZSkuX19kb2NfXyBvciAnJwogICAgICAgICAgICAgICAgICAgIGRlc2MgPSBuYW1lLnNwbGl0KCdcbicpWzBdCiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG1vZG5hbWUgKyAnIC0gJyArIGRlc2MKICAgICAgICAgICAgICAgICAgICBpZiBuYW1lLmxvd2VyKCkuZmluZChrZXkpID49IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKE5vbmUsIG1vZG5hbWUsIGRlc2MpCgogICAgICAgIGZvciBpbXBvcnRlciwgbW9kbmFtZSwgaXNwa2cgaW4gcGtndXRpbC53YWxrX3BhY2thZ2VzKG9uZXJyb3I9b25lcnJvcik6CiAgICAgICAgICAgIGlmIHNlbGYucXVpdDoKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAjIFhYWCBTa2lwcGluZyB0aGlzIGZpbGUgaXMgYSB3b3JrYXJvdW5kIGZvciBhIGJ1ZwogICAgICAgICAgICAjIHRoYXQgY2F1c2VzIHB5dGhvbiB0byBjcmFzaCB3aXRoIGEgc2VnZmF1bHQuCiAgICAgICAgICAgICMgaHR0cDovL2J1Z3MucHl0aG9uLm9yZy9pc3N1ZTkzMTkKICAgICAgICAgICAgIwogICAgICAgICAgICAjIFRPRE8gUmVtb3ZlIHRoaXMgb25jZSB0aGUgYnVnIGlzIGZpeGVkLgogICAgICAgICAgICBpZiBtb2RuYW1lIGluIHsndGVzdC5iYWRzeW50YXhfcGVwMzEyMCcsICdiYWRzeW50YXhfcGVwMzEyMCd9OgogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIGlmIGtleSBpcyBOb25lOgogICAgICAgICAgICAgICAgY2FsbGJhY2soTm9uZSwgbW9kbmFtZSwgJycpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgbG9hZGVyID0gaW1wb3J0ZXIuZmluZF9tb2R1bGUobW9kbmFtZSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBTeW50YXhFcnJvcjoKICAgICAgICAgICAgICAgICAgICAjIHJhaXNlZCBieSB0ZXN0cyBmb3IgYmFkIGNvZGluZyBjb29raWVzIG9yIEJPTQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBpZiBoYXNhdHRyKGxvYWRlciwgJ2dldF9zb3VyY2UnKToKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IGxvYWRlci5nZXRfc291cmNlKG1vZG5hbWUpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgb25lcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3IobW9kbmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBkZXNjID0gc291cmNlX3N5bm9wc2lzKGlvLlN0cmluZ0lPKHNvdXJjZSkpIG9yICcnCiAgICAgICAgICAgICAgICAgICAgaWYgaGFzYXR0cihsb2FkZXIsICdnZXRfZmlsZW5hbWUnKToKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IGxvYWRlci5nZXRfZmlsZW5hbWUobW9kbmFtZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gTm9uZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZSA9IGxvYWRlci5sb2FkX21vZHVsZShtb2RuYW1lKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgb25lcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3IobW9kbmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBkZXNjID0gKG1vZHVsZS5fX2RvY19fIG9yICcnKS5zcGxpdGxpbmVzKClbMF0KICAgICAgICAgICAgICAgICAgICBwYXRoID0gZ2V0YXR0cihtb2R1bGUsJ19fZmlsZV9fJyxOb25lKQogICAgICAgICAgICAgICAgbmFtZSA9IG1vZG5hbWUgKyAnIC0gJyArIGRlc2MKICAgICAgICAgICAgICAgIGlmIG5hbWUubG93ZXIoKS5maW5kKGtleSkgPj0gMDoKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhwYXRoLCBtb2RuYW1lLCBkZXNjKQoKICAgICAgICBpZiBjb21wbGV0ZXI6CiAgICAgICAgICAgIGNvbXBsZXRlcigpCgpkZWYgYXByb3BvcyhrZXkpOgogICAgIiIiUHJpbnQgYWxsIHRoZSBvbmUtbGluZSBtb2R1bGUgc3VtbWFyaWVzIHRoYXQgY29udGFpbiBhIHN1YnN0cmluZy4iIiIKICAgIGRlZiBjYWxsYmFjayhwYXRoLCBtb2RuYW1lLCBkZXNjKToKICAgICAgICBpZiBtb2RuYW1lWy05Ol0gPT0gJy5fX2luaXRfXyc6CiAgICAgICAgICAgIG1vZG5hbWUgPSBtb2RuYW1lWzotOV0gKyAnIChwYWNrYWdlKScKICAgICAgICBwcmludChtb2RuYW1lLCBkZXNjIGFuZCAnLSAnICsgZGVzYykKICAgIGRlZiBvbmVycm9yKG1vZG5hbWUpOgogICAgICAgIHBhc3MKICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKToKICAgICAgICB3YXJuaW5ncy5maWx0ZXJ3YXJuaW5ncygnaWdub3JlJykgIyBpZ25vcmUgcHJvYmxlbXMgZHVyaW5nIGltcG9ydAogICAgICAgIE1vZHVsZVNjYW5uZXIoKS5ydW4oY2FsbGJhY2ssIGtleSwgb25lcnJvcj1vbmVycm9yKQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gV2ViIGJyb3dzZXIgaW50ZXJmYWNlCgpkZWYgc2VydmUocG9ydCwgY2FsbGJhY2s9Tm9uZSwgY29tcGxldGVyPU5vbmUpOgogICAgaW1wb3J0IGh0dHAuc2VydmVyLCBlbWFpbC5tZXNzYWdlLCBzZWxlY3QKCiAgICBtc2cgPSAndGhlIHB5ZG9jLnNlcnZlKCkgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCcKICAgIHdhcm5pbmdzLndhcm4obXNnLCBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MikKCiAgICBjbGFzcyBEb2NIYW5kbGVyKGh0dHAuc2VydmVyLkJhc2VIVFRQUmVxdWVzdEhhbmRsZXIpOgogICAgICAgIGRlZiBzZW5kX2RvY3VtZW50KHNlbGYsIHRpdGxlLCBjb250ZW50cyk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuc2VuZF9yZXNwb25zZSgyMDApCiAgICAgICAgICAgICAgICBzZWxmLnNlbmRfaGVhZGVyKCdDb250ZW50LVR5cGUnLCAndGV4dC9odG1sOyBjaGFyc2V0PVVURi04JykKICAgICAgICAgICAgICAgIHNlbGYuZW5kX2hlYWRlcnMoKQogICAgICAgICAgICAgICAgc2VsZi53ZmlsZS53cml0ZShodG1sLnBhZ2UodGl0bGUsIGNvbnRlbnRzKS5lbmNvZGUoJ3V0Zi04JykpCiAgICAgICAgICAgIGV4Y2VwdCBJT0Vycm9yOiBwYXNzCgogICAgICAgIGRlZiBkb19HRVQoc2VsZik6CiAgICAgICAgICAgIHBhdGggPSBzZWxmLnBhdGgKICAgICAgICAgICAgaWYgcGF0aFstNTpdID09ICcuaHRtbCc6IHBhdGggPSBwYXRoWzotNV0KICAgICAgICAgICAgaWYgcGF0aFs6MV0gPT0gJy8nOiBwYXRoID0gcGF0aFsxOl0KICAgICAgICAgICAgaWYgcGF0aCBhbmQgcGF0aCAhPSAnLic6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgb2JqID0gbG9jYXRlKHBhdGgsIGZvcmNlbG9hZD0xKQogICAgICAgICAgICAgICAgZXhjZXB0IEVycm9yRHVyaW5nSW1wb3J0IGFzIHZhbHVlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VuZF9kb2N1bWVudChwYXRoLCBodG1sLmVzY2FwZShzdHIodmFsdWUpKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIGlmIG9iajoKICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbmRfZG9jdW1lbnQoZGVzY3JpYmUob2JqKSwgaHRtbC5kb2N1bWVudChvYmosIHBhdGgpKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbmRfZG9jdW1lbnQocGF0aCwKJ25vIFB5dGhvbiBkb2N1bWVudGF0aW9uIGZvdW5kIGZvciAlcycgJSByZXByKHBhdGgpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaGVhZGluZyA9IGh0bWwuaGVhZGluZygKJzxiaWc+PGJpZz48c3Ryb25nPlB5dGhvbjogSW5kZXggb2YgTW9kdWxlczwvc3Ryb25nPjwvYmlnPjwvYmlnPicsCicjZmZmZmZmJywgJyM3Nzk5ZWUnKQogICAgICAgICAgICAgICAgZGVmIGJsdGlubGluayhuYW1lKToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxhIGhyZWY9IiVzLmh0bWwiPiVzPC9hPicgJSAobmFtZSwgbmFtZSkKICAgICAgICAgICAgICAgIG5hbWVzID0gW3ggZm9yIHggaW4gc3lzLmJ1aWx0aW5fbW9kdWxlX25hbWVzIGlmIHggIT0gJ19fbWFpbl9fJ10KICAgICAgICAgICAgICAgIGNvbnRlbnRzID0gaHRtbC5tdWx0aWNvbHVtbihuYW1lcywgYmx0aW5saW5rKQogICAgICAgICAgICAgICAgaW5kaWNlcyA9IFsnPHA+JyArIGh0bWwuYmlnc2VjdGlvbigKICAgICAgICAgICAgICAgICAgICAnQnVpbHQtaW4gTW9kdWxlcycsICcjZmZmZmZmJywgJyNlZTc3YWEnLCBjb250ZW50cyldCgogICAgICAgICAgICAgICAgc2VlbiA9IHt9CiAgICAgICAgICAgICAgICBmb3IgZGlyIGluIHN5cy5wYXRoOgogICAgICAgICAgICAgICAgICAgIGluZGljZXMuYXBwZW5kKGh0bWwuaW5kZXgoZGlyLCBzZWVuKSkKICAgICAgICAgICAgICAgIGNvbnRlbnRzID0gaGVhZGluZyArICcgJy5qb2luKGluZGljZXMpICsgJycnPHAgYWxpZ249cmlnaHQ+Cjxmb250IGNvbG9yPSIjOTA5MDkwIiBmYWNlPSJoZWx2ZXRpY2EsIGFyaWFsIj48c3Ryb25nPgpweWRvYzwvc3Ryb25nPiBieSBLYS1QaW5nIFllZSAmbHQ7cGluZ0BsZncub3JnJmd0OzwvZm9udD4nJycKICAgICAgICAgICAgICAgIHNlbGYuc2VuZF9kb2N1bWVudCgnSW5kZXggb2YgTW9kdWxlcycsIGNvbnRlbnRzKQoKICAgICAgICBkZWYgbG9nX21lc3NhZ2Uoc2VsZiwgKmFyZ3MpOiBwYXNzCgogICAgY2xhc3MgRG9jU2VydmVyKGh0dHAuc2VydmVyLkhUVFBTZXJ2ZXIpOgogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwb3J0LCBjYWxsYmFjayk6CiAgICAgICAgICAgIGhvc3QgPSAnbG9jYWxob3N0JwogICAgICAgICAgICBzZWxmLmFkZHJlc3MgPSAoaG9zdCwgcG9ydCkKICAgICAgICAgICAgc2VsZi51cmwgPSAnaHR0cDovLyVzOiVkLycgJSAoaG9zdCwgcG9ydCkKICAgICAgICAgICAgc2VsZi5jYWxsYmFjayA9IGNhbGxiYWNrCiAgICAgICAgICAgIHNlbGYuYmFzZS5fX2luaXRfXyhzZWxmLCBzZWxmLmFkZHJlc3MsIHNlbGYuaGFuZGxlcikKCiAgICAgICAgZGVmIHNlcnZlX3VudGlsX3F1aXQoc2VsZik6CiAgICAgICAgICAgIGltcG9ydCBzZWxlY3QKICAgICAgICAgICAgc2VsZi5xdWl0ID0gRmFsc2UKICAgICAgICAgICAgd2hpbGUgbm90IHNlbGYucXVpdDoKICAgICAgICAgICAgICAgIHJkLCB3ciwgZXggPSBzZWxlY3Quc2VsZWN0KFtzZWxmLnNvY2tldC5maWxlbm8oKV0sIFtdLCBbXSwgMSkKICAgICAgICAgICAgICAgIGlmIHJkOiBzZWxmLmhhbmRsZV9yZXF1ZXN0KCkKICAgICAgICAgICAgc2VsZi5zZXJ2ZXJfY2xvc2UoKQoKICAgICAgICBkZWYgc2VydmVyX2FjdGl2YXRlKHNlbGYpOgogICAgICAgICAgICBzZWxmLmJhc2Uuc2VydmVyX2FjdGl2YXRlKHNlbGYpCiAgICAgICAgICAgIGlmIHNlbGYuY2FsbGJhY2s6IHNlbGYuY2FsbGJhY2soc2VsZikKCiAgICBEb2NTZXJ2ZXIuYmFzZSA9IGh0dHAuc2VydmVyLkhUVFBTZXJ2ZXIKICAgIERvY1NlcnZlci5oYW5kbGVyID0gRG9jSGFuZGxlcgogICAgRG9jSGFuZGxlci5NZXNzYWdlQ2xhc3MgPSBlbWFpbC5tZXNzYWdlLk1lc3NhZ2UKICAgIHRyeToKICAgICAgICB0cnk6CiAgICAgICAgICAgIERvY1NlcnZlcihwb3J0LCBjYWxsYmFjaykuc2VydmVfdW50aWxfcXVpdCgpCiAgICAgICAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCwgc2VsZWN0LmVycm9yKToKICAgICAgICAgICAgcGFzcwogICAgZmluYWxseToKICAgICAgICBpZiBjb21wbGV0ZXI6IGNvbXBsZXRlcigpCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGdyYXBoaWNhbCBpbnRlcmZhY2UKCmRlZiBndWkoKToKICAgICIiIkdyYXBoaWNhbCBpbnRlcmZhY2UgKHN0YXJ0cyBXZWIgc2VydmVyIGFuZCBwb3BzIHVwIGEgY29udHJvbCB3aW5kb3cpLiIiIgoKICAgIG1zZyA9ICgndGhlIHB5ZG9jLmd1aSgpIGZ1bmN0aW9uIGFuZCAicHlkb2MgLWciIG9wdGlvbiBhcmUgZGVwcmVjYXRlZFxuJywKICAgICAgICAgICAndXNlICJweWRvYy5icm93c2UoKSBmdW5jdGlvbiBhbmQgInB5ZG9jIC1iIiBvcHRpb24gaW5zdGVhZC4nKQogICAgd2FybmluZ3Mud2Fybihtc2csIERlcHJlY2F0aW9uV2FybmluZywgc3RhY2tsZXZlbD0yKQoKICAgIGNsYXNzIEdVSToKICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgd2luZG93LCBwb3J0PTc0NjQpOgogICAgICAgICAgICBzZWxmLndpbmRvdyA9IHdpbmRvdwogICAgICAgICAgICBzZWxmLnNlcnZlciA9IE5vbmUKICAgICAgICAgICAgc2VsZi5zY2FubmVyID0gTm9uZQoKICAgICAgICAgICAgaW1wb3J0IHRraW50ZXIKICAgICAgICAgICAgc2VsZi5zZXJ2ZXJfZnJtID0gdGtpbnRlci5GcmFtZSh3aW5kb3cpCiAgICAgICAgICAgIHNlbGYudGl0bGVfbGJsID0gdGtpbnRlci5MYWJlbChzZWxmLnNlcnZlcl9mcm0sCiAgICAgICAgICAgICAgICB0ZXh0PSdTdGFydGluZyBzZXJ2ZXIuLi5cbiAnKQogICAgICAgICAgICBzZWxmLm9wZW5fYnRuID0gdGtpbnRlci5CdXR0b24oc2VsZi5zZXJ2ZXJfZnJtLAogICAgICAgICAgICAgICAgdGV4dD0nb3BlbiBicm93c2VyJywgY29tbWFuZD1zZWxmLm9wZW4sIHN0YXRlPSdkaXNhYmxlZCcpCiAgICAgICAgICAgIHNlbGYucXVpdF9idG4gPSB0a2ludGVyLkJ1dHRvbihzZWxmLnNlcnZlcl9mcm0sCiAgICAgICAgICAgICAgICB0ZXh0PSdxdWl0IHNlcnZpbmcnLCBjb21tYW5kPXNlbGYucXVpdCwgc3RhdGU9J2Rpc2FibGVkJykKCiAgICAgICAgICAgIHNlbGYuc2VhcmNoX2ZybSA9IHRraW50ZXIuRnJhbWUod2luZG93KQogICAgICAgICAgICBzZWxmLnNlYXJjaF9sYmwgPSB0a2ludGVyLkxhYmVsKHNlbGYuc2VhcmNoX2ZybSwgdGV4dD0nU2VhcmNoIGZvcicpCiAgICAgICAgICAgIHNlbGYuc2VhcmNoX2VudCA9IHRraW50ZXIuRW50cnkoc2VsZi5zZWFyY2hfZnJtKQogICAgICAgICAgICBzZWxmLnNlYXJjaF9lbnQuYmluZCgnPFJldHVybj4nLCBzZWxmLnNlYXJjaCkKICAgICAgICAgICAgc2VsZi5zdG9wX2J0biA9IHRraW50ZXIuQnV0dG9uKHNlbGYuc2VhcmNoX2ZybSwKICAgICAgICAgICAgICAgIHRleHQ9J3N0b3AnLCBwYWR5PTAsIGNvbW1hbmQ9c2VsZi5zdG9wLCBzdGF0ZT0nZGlzYWJsZWQnKQogICAgICAgICAgICBpZiBzeXMucGxhdGZvcm0gPT0gJ3dpbjMyJzoKICAgICAgICAgICAgICAgICMgVHJ5aW5nIHRvIGhpZGUgYW5kIHNob3cgdGhpcyBidXR0b24gY3Jhc2hlcyB1bmRlciBXaW5kb3dzLgogICAgICAgICAgICAgICAgc2VsZi5zdG9wX2J0bi5wYWNrKHNpZGU9J3JpZ2h0JykKCiAgICAgICAgICAgIHNlbGYud2luZG93LnRpdGxlKCdweWRvYycpCiAgICAgICAgICAgIHNlbGYud2luZG93LnByb3RvY29sKCdXTV9ERUxFVEVfV0lORE9XJywgc2VsZi5xdWl0KQogICAgICAgICAgICBzZWxmLnRpdGxlX2xibC5wYWNrKHNpZGU9J3RvcCcsIGZpbGw9J3gnKQogICAgICAgICAgICBzZWxmLm9wZW5fYnRuLnBhY2soc2lkZT0nbGVmdCcsIGZpbGw9J3gnLCBleHBhbmQ9MSkKICAgICAgICAgICAgc2VsZi5xdWl0X2J0bi5wYWNrKHNpZGU9J3JpZ2h0JywgZmlsbD0neCcsIGV4cGFuZD0xKQogICAgICAgICAgICBzZWxmLnNlcnZlcl9mcm0ucGFjayhzaWRlPSd0b3AnLCBmaWxsPSd4JykKCiAgICAgICAgICAgIHNlbGYuc2VhcmNoX2xibC5wYWNrKHNpZGU9J2xlZnQnKQogICAgICAgICAgICBzZWxmLnNlYXJjaF9lbnQucGFjayhzaWRlPSdyaWdodCcsIGZpbGw9J3gnLCBleHBhbmQ9MSkKICAgICAgICAgICAgc2VsZi5zZWFyY2hfZnJtLnBhY2soc2lkZT0ndG9wJywgZmlsbD0neCcpCiAgICAgICAgICAgIHNlbGYuc2VhcmNoX2VudC5mb2N1c19zZXQoKQoKICAgICAgICAgICAgZm9udCA9ICgnaGVsdmV0aWNhJywgc3lzLnBsYXRmb3JtID09ICd3aW4zMicgYW5kIDggb3IgMTApCiAgICAgICAgICAgIHNlbGYucmVzdWx0X2xzdCA9IHRraW50ZXIuTGlzdGJveCh3aW5kb3csIGZvbnQ9Zm9udCwgaGVpZ2h0PTYpCiAgICAgICAgICAgIHNlbGYucmVzdWx0X2xzdC5iaW5kKCc8QnV0dG9uLTE+Jywgc2VsZi5zZWxlY3QpCiAgICAgICAgICAgIHNlbGYucmVzdWx0X2xzdC5iaW5kKCc8RG91YmxlLUJ1dHRvbi0xPicsIHNlbGYuZ290bykKICAgICAgICAgICAgc2VsZi5yZXN1bHRfc2NyID0gdGtpbnRlci5TY3JvbGxiYXIod2luZG93LAogICAgICAgICAgICAgICAgb3JpZW50PSd2ZXJ0aWNhbCcsIGNvbW1hbmQ9c2VsZi5yZXN1bHRfbHN0Lnl2aWV3KQogICAgICAgICAgICBzZWxmLnJlc3VsdF9sc3QuY29uZmlnKHlzY3JvbGxjb21tYW5kPXNlbGYucmVzdWx0X3Njci5zZXQpCgogICAgICAgICAgICBzZWxmLnJlc3VsdF9mcm0gPSB0a2ludGVyLkZyYW1lKHdpbmRvdykKICAgICAgICAgICAgc2VsZi5nb3RvX2J0biA9IHRraW50ZXIuQnV0dG9uKHNlbGYucmVzdWx0X2ZybSwKICAgICAgICAgICAgICAgIHRleHQ9J2dvIHRvIHNlbGVjdGVkJywgY29tbWFuZD1zZWxmLmdvdG8pCiAgICAgICAgICAgIHNlbGYuaGlkZV9idG4gPSB0a2ludGVyLkJ1dHRvbihzZWxmLnJlc3VsdF9mcm0sCiAgICAgICAgICAgICAgICB0ZXh0PSdoaWRlIHJlc3VsdHMnLCBjb21tYW5kPXNlbGYuaGlkZSkKICAgICAgICAgICAgc2VsZi5nb3RvX2J0bi5wYWNrKHNpZGU9J2xlZnQnLCBmaWxsPSd4JywgZXhwYW5kPTEpCiAgICAgICAgICAgIHNlbGYuaGlkZV9idG4ucGFjayhzaWRlPSdyaWdodCcsIGZpbGw9J3gnLCBleHBhbmQ9MSkKCiAgICAgICAgICAgIHNlbGYud2luZG93LnVwZGF0ZSgpCiAgICAgICAgICAgIHNlbGYubWlud2lkdGggPSBzZWxmLndpbmRvdy53aW5mb193aWR0aCgpCiAgICAgICAgICAgIHNlbGYubWluaGVpZ2h0ID0gc2VsZi53aW5kb3cud2luZm9faGVpZ2h0KCkKICAgICAgICAgICAgc2VsZi5iaWdtaW5oZWlnaHQgPSAoc2VsZi5zZXJ2ZXJfZnJtLndpbmZvX3JlcWhlaWdodCgpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWFyY2hfZnJtLndpbmZvX3JlcWhlaWdodCgpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN1bHRfbHN0LndpbmZvX3JlcWhlaWdodCgpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN1bHRfZnJtLndpbmZvX3JlcWhlaWdodCgpKQogICAgICAgICAgICBzZWxmLmJpZ3dpZHRoLCBzZWxmLmJpZ2hlaWdodCA9IHNlbGYubWlud2lkdGgsIHNlbGYuYmlnbWluaGVpZ2h0CiAgICAgICAgICAgIHNlbGYuZXhwYW5kZWQgPSAwCiAgICAgICAgICAgIHNlbGYud2luZG93LndtX2dlb21ldHJ5KCclZHglZCcgJSAoc2VsZi5taW53aWR0aCwgc2VsZi5taW5oZWlnaHQpKQogICAgICAgICAgICBzZWxmLndpbmRvdy53bV9taW5zaXplKHNlbGYubWlud2lkdGgsIHNlbGYubWluaGVpZ2h0KQogICAgICAgICAgICBzZWxmLndpbmRvdy50ay53aWxsZGlzcGF0Y2goKQoKICAgICAgICAgICAgaW1wb3J0IHRocmVhZGluZwogICAgICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKAogICAgICAgICAgICAgICAgdGFyZ2V0PXNlcnZlLCBhcmdzPShwb3J0LCBzZWxmLnJlYWR5LCBzZWxmLnF1aXQpKS5zdGFydCgpCgogICAgICAgIGRlZiByZWFkeShzZWxmLCBzZXJ2ZXIpOgogICAgICAgICAgICBzZWxmLnNlcnZlciA9IHNlcnZlcgogICAgICAgICAgICBzZWxmLnRpdGxlX2xibC5jb25maWcoCiAgICAgICAgICAgICAgICB0ZXh0PSdQeXRob24gZG9jdW1lbnRhdGlvbiBzZXJ2ZXIgYXRcbicgKyBzZXJ2ZXIudXJsKQogICAgICAgICAgICBzZWxmLm9wZW5fYnRuLmNvbmZpZyhzdGF0ZT0nbm9ybWFsJykKICAgICAgICAgICAgc2VsZi5xdWl0X2J0bi5jb25maWcoc3RhdGU9J25vcm1hbCcpCgogICAgICAgIGRlZiBvcGVuKHNlbGYsIGV2ZW50PU5vbmUsIHVybD1Ob25lKToKICAgICAgICAgICAgdXJsID0gdXJsIG9yIHNlbGYuc2VydmVyLnVybAogICAgICAgICAgICBpbXBvcnQgd2ViYnJvd3NlcgogICAgICAgICAgICB3ZWJicm93c2VyLm9wZW4odXJsKQoKICAgICAgICBkZWYgcXVpdChzZWxmLCBldmVudD1Ob25lKToKICAgICAgICAgICAgaWYgc2VsZi5zZXJ2ZXI6CiAgICAgICAgICAgICAgICBzZWxmLnNlcnZlci5xdWl0ID0gMQogICAgICAgICAgICBzZWxmLndpbmRvdy5xdWl0KCkKCiAgICAgICAgZGVmIHNlYXJjaChzZWxmLCBldmVudD1Ob25lKToKICAgICAgICAgICAga2V5ID0gc2VsZi5zZWFyY2hfZW50LmdldCgpCiAgICAgICAgICAgIHNlbGYuc3RvcF9idG4ucGFjayhzaWRlPSdyaWdodCcpCiAgICAgICAgICAgIHNlbGYuc3RvcF9idG4uY29uZmlnKHN0YXRlPSdub3JtYWwnKQogICAgICAgICAgICBzZWxmLnNlYXJjaF9sYmwuY29uZmlnKHRleHQ9J1NlYXJjaGluZyBmb3IgIiVzIi4uLicgJSBrZXkpCiAgICAgICAgICAgIHNlbGYuc2VhcmNoX2VudC5mb3JnZXQoKQogICAgICAgICAgICBzZWxmLnNlYXJjaF9sYmwucGFjayhzaWRlPSdsZWZ0JykKICAgICAgICAgICAgc2VsZi5yZXN1bHRfbHN0LmRlbGV0ZSgwLCAnZW5kJykKICAgICAgICAgICAgc2VsZi5nb3RvX2J0bi5jb25maWcoc3RhdGU9J2Rpc2FibGVkJykKICAgICAgICAgICAgc2VsZi5leHBhbmQoKQoKICAgICAgICAgICAgaW1wb3J0IHRocmVhZGluZwogICAgICAgICAgICBpZiBzZWxmLnNjYW5uZXI6CiAgICAgICAgICAgICAgICBzZWxmLnNjYW5uZXIucXVpdCA9IDEKICAgICAgICAgICAgc2VsZi5zY2FubmVyID0gTW9kdWxlU2Nhbm5lcigpCiAgICAgICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXNlbGYuc2Nhbm5lci5ydW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncz0oc2VsZi51cGRhdGUsIGtleSwgc2VsZi5kb25lKSkuc3RhcnQoKQoKICAgICAgICBkZWYgdXBkYXRlKHNlbGYsIHBhdGgsIG1vZG5hbWUsIGRlc2MpOgogICAgICAgICAgICBpZiBtb2RuYW1lWy05Ol0gPT0gJy5fX2luaXRfXyc6CiAgICAgICAgICAgICAgICBtb2RuYW1lID0gbW9kbmFtZVs6LTldICsgJyAocGFja2FnZSknCiAgICAgICAgICAgIHNlbGYucmVzdWx0X2xzdC5pbnNlcnQoJ2VuZCcsCiAgICAgICAgICAgICAgICBtb2RuYW1lICsgJyAtICcgKyAoZGVzYyBvciAnKG5vIGRlc2NyaXB0aW9uKScpKQoKICAgICAgICBkZWYgc3RvcChzZWxmLCBldmVudD1Ob25lKToKICAgICAgICAgICAgaWYgc2VsZi5zY2FubmVyOgogICAgICAgICAgICAgICAgc2VsZi5zY2FubmVyLnF1aXQgPSAxCiAgICAgICAgICAgICAgICBzZWxmLnNjYW5uZXIgPSBOb25lCgogICAgICAgIGRlZiBkb25lKHNlbGYpOgogICAgICAgICAgICBzZWxmLnNjYW5uZXIgPSBOb25lCiAgICAgICAgICAgIHNlbGYuc2VhcmNoX2xibC5jb25maWcodGV4dD0nU2VhcmNoIGZvcicpCiAgICAgICAgICAgIHNlbGYuc2VhcmNoX2xibC5wYWNrKHNpZGU9J2xlZnQnKQogICAgICAgICAgICBzZWxmLnNlYXJjaF9lbnQucGFjayhzaWRlPSdyaWdodCcsIGZpbGw9J3gnLCBleHBhbmQ9MSkKICAgICAgICAgICAgaWYgc3lzLnBsYXRmb3JtICE9ICd3aW4zMic6IHNlbGYuc3RvcF9idG4uZm9yZ2V0KCkKICAgICAgICAgICAgc2VsZi5zdG9wX2J0bi5jb25maWcoc3RhdGU9J2Rpc2FibGVkJykKCiAgICAgICAgZGVmIHNlbGVjdChzZWxmLCBldmVudD1Ob25lKToKICAgICAgICAgICAgc2VsZi5nb3RvX2J0bi5jb25maWcoc3RhdGU9J25vcm1hbCcpCgogICAgICAgIGRlZiBnb3RvKHNlbGYsIGV2ZW50PU5vbmUpOgogICAgICAgICAgICBzZWxlY3Rpb24gPSBzZWxmLnJlc3VsdF9sc3QuY3Vyc2VsZWN0aW9uKCkKICAgICAgICAgICAgaWYgc2VsZWN0aW9uOgogICAgICAgICAgICAgICAgbW9kbmFtZSA9IHNlbGYucmVzdWx0X2xzdC5nZXQoc2VsZWN0aW9uWzBdKS5zcGxpdCgpWzBdCiAgICAgICAgICAgICAgICBzZWxmLm9wZW4odXJsPXNlbGYuc2VydmVyLnVybCArIG1vZG5hbWUgKyAnLmh0bWwnKQoKICAgICAgICBkZWYgY29sbGFwc2Uoc2VsZik6CiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmV4cGFuZGVkOiByZXR1cm4KICAgICAgICAgICAgc2VsZi5yZXN1bHRfZnJtLmZvcmdldCgpCiAgICAgICAgICAgIHNlbGYucmVzdWx0X3Njci5mb3JnZXQoKQogICAgICAgICAgICBzZWxmLnJlc3VsdF9sc3QuZm9yZ2V0KCkKICAgICAgICAgICAgc2VsZi5iaWd3aWR0aCA9IHNlbGYud2luZG93LndpbmZvX3dpZHRoKCkKICAgICAgICAgICAgc2VsZi5iaWdoZWlnaHQgPSBzZWxmLndpbmRvdy53aW5mb19oZWlnaHQoKQogICAgICAgICAgICBzZWxmLndpbmRvdy53bV9nZW9tZXRyeSgnJWR4JWQnICUgKHNlbGYubWlud2lkdGgsIHNlbGYubWluaGVpZ2h0KSkKICAgICAgICAgICAgc2VsZi53aW5kb3cud21fbWluc2l6ZShzZWxmLm1pbndpZHRoLCBzZWxmLm1pbmhlaWdodCkKICAgICAgICAgICAgc2VsZi5leHBhbmRlZCA9IDAKCiAgICAgICAgZGVmIGV4cGFuZChzZWxmKToKICAgICAgICAgICAgaWYgc2VsZi5leHBhbmRlZDogcmV0dXJuCiAgICAgICAgICAgIHNlbGYucmVzdWx0X2ZybS5wYWNrKHNpZGU9J2JvdHRvbScsIGZpbGw9J3gnKQogICAgICAgICAgICBzZWxmLnJlc3VsdF9zY3IucGFjayhzaWRlPSdyaWdodCcsIGZpbGw9J3knKQogICAgICAgICAgICBzZWxmLnJlc3VsdF9sc3QucGFjayhzaWRlPSd0b3AnLCBmaWxsPSdib3RoJywgZXhwYW5kPTEpCiAgICAgICAgICAgIHNlbGYud2luZG93LndtX2dlb21ldHJ5KCclZHglZCcgJSAoc2VsZi5iaWd3aWR0aCwgc2VsZi5iaWdoZWlnaHQpKQogICAgICAgICAgICBzZWxmLndpbmRvdy53bV9taW5zaXplKHNlbGYubWlud2lkdGgsIHNlbGYuYmlnbWluaGVpZ2h0KQogICAgICAgICAgICBzZWxmLmV4cGFuZGVkID0gMQoKICAgICAgICBkZWYgaGlkZShzZWxmLCBldmVudD1Ob25lKToKICAgICAgICAgICAgc2VsZi5zdG9wKCkKICAgICAgICAgICAgc2VsZi5jb2xsYXBzZSgpCgogICAgaW1wb3J0IHRraW50ZXIKICAgIHRyeToKICAgICAgICByb290ID0gdGtpbnRlci5UaygpCiAgICAgICAgIyBUayB3aWxsIGNyYXNoIGlmIHB5dGhvbncuZXhlIGhhcyBhbiBYUCAubWFuaWZlc3QKICAgICAgICAjIGZpbGUgYW5kIHRoZSByb290IGhhcyBpcyBub3QgZGVzdHJveWVkIGV4cGxpY2l0bHkuCiAgICAgICAgIyBJZiB0aGUgcHJvYmxlbSBpcyBldmVyIGZpeGVkIGluIFRrLCB0aGUgZXhwbGljaXQKICAgICAgICAjIGRlc3Ryb3kgY2FuIGdvLgogICAgICAgIHRyeToKICAgICAgICAgICAgZ3VpID0gR1VJKHJvb3QpCiAgICAgICAgICAgIHJvb3QubWFpbmxvb3AoKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHJvb3QuZGVzdHJveSgpCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgcGFzcwoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGVuaGFuY2VkIFdlYiBicm93c2VyIGludGVyZmFjZQoKZGVmIF9zdGFydF9zZXJ2ZXIodXJsaGFuZGxlciwgcG9ydCk6CiAgICAiIiJTdGFydCBhbiBIVFRQIHNlcnZlciB0aHJlYWQgb24gYSBzcGVjaWZpYyBwb3J0LgoKICAgIFN0YXJ0IGFuIEhUTUwvdGV4dCBzZXJ2ZXIgdGhyZWFkLCBzbyBIVE1MIG9yIHRleHQgZG9jdW1lbnRzIGNhbiBiZQogICAgYnJvd3NlZCBkeW5hbWljYWxseSBhbmQgaW50ZXJhY3RpdmVseSB3aXRoIGEgV2ViIGJyb3dzZXIuICBFeGFtcGxlIHVzZToKCiAgICAgICAgPj4+IGltcG9ydCB0aW1lCiAgICAgICAgPj4+IGltcG9ydCBweWRvYwoKICAgICAgICBEZWZpbmUgYSBVUkwgaGFuZGxlci4gIFRvIGRldGVybWluZSB3aGF0IHRoZSBjbGllbnQgaXMgYXNraW5nCiAgICAgICAgZm9yLCBjaGVjayB0aGUgVVJMIGFuZCBjb250ZW50X3R5cGUuCgogICAgICAgIFRoZW4gZ2V0IG9yIGdlbmVyYXRlIHNvbWUgdGV4dCBvciBIVE1MIGNvZGUgYW5kIHJldHVybiBpdC4KCiAgICAgICAgPj4+IGRlZiBteV91cmxfaGFuZGxlcih1cmwsIGNvbnRlbnRfdHlwZSk6CiAgICAgICAgLi4uICAgICB0ZXh0ID0gJ3RoZSBVUkwgc2VudCB3YXM6ICglcywgJXMpJyAlICh1cmwsIGNvbnRlbnRfdHlwZSkKICAgICAgICAuLi4gICAgIHJldHVybiB0ZXh0CgogICAgICAgIFN0YXJ0IHNlcnZlciB0aHJlYWQgb24gcG9ydCAwLgogICAgICAgIElmIHlvdSB1c2UgcG9ydCAwLCB0aGUgc2VydmVyIHdpbGwgcGljayBhIHJhbmRvbSBwb3J0IG51bWJlci4KICAgICAgICBZb3UgY2FuIHRoZW4gdXNlIHNlcnZlcnRocmVhZC5wb3J0IHRvIGdldCB0aGUgcG9ydCBudW1iZXIuCgogICAgICAgID4+PiBwb3J0ID0gMAogICAgICAgID4+PiBzZXJ2ZXJ0aHJlYWQgPSBweWRvYy5fc3RhcnRfc2VydmVyKG15X3VybF9oYW5kbGVyLCBwb3J0KQoKICAgICAgICBDaGVjayB0aGF0IHRoZSBzZXJ2ZXIgaXMgcmVhbGx5IHN0YXJ0ZWQuICBJZiBpdCBpcywgb3BlbiBicm93c2VyCiAgICAgICAgYW5kIGdldCBmaXJzdCBwYWdlLiAgVXNlIHNlcnZlcnRocmVhZC51cmwgYXMgdGhlIHN0YXJ0aW5nIHBhZ2UuCgogICAgICAgID4+PiBpZiBzZXJ2ZXJ0aHJlYWQuc2VydmluZzoKICAgICAgICAuLi4gICAgaW1wb3J0IHdlYmJyb3dzZXIKCiAgICAgICAgVGhlIG5leHQgdHdvIGxpbmVzIGFyZSBjb21tZW50ZWQgb3V0IHNvIGEgYnJvd3NlciBkb2Vzbid0IG9wZW4gaWYKICAgICAgICBkb2N0ZXN0IGlzIHJ1biBvbiB0aGlzIG1vZHVsZS4KCiAgICAgICAgIy4uLiAgICB3ZWJicm93c2VyLm9wZW4oc2VydmVydGhyZWFkLnVybCkKICAgICAgICAjVHJ1ZQoKICAgICAgICBMZXQgdGhlIHNlcnZlciBkbyBpdHMgdGhpbmcuIFdlIGp1c3QgbmVlZCB0byBtb25pdG9yIGl0cyBzdGF0dXMuCiAgICAgICAgVXNlIHRpbWUuc2xlZXAgc28gdGhlIGxvb3AgZG9lc24ndCBob2cgdGhlIENQVS4KCiAgICAgICAgPj4+IHN0YXJ0dGltZSA9IHRpbWUudGltZSgpCiAgICAgICAgPj4+IHRpbWVvdXQgPSAxICAgICAgICAgICAgICAgICAgICAjc2Vjb25kcwoKICAgICAgICBUaGlzIGlzIGEgc2hvcnQgdGltZW91dCBmb3IgdGVzdGluZyBwdXJwb3Nlcy4KCiAgICAgICAgPj4+IHdoaWxlIHNlcnZlcnRocmVhZC5zZXJ2aW5nOgogICAgICAgIC4uLiAgICAgdGltZS5zbGVlcCguMDEpCiAgICAgICAgLi4uICAgICBpZiBzZXJ2ZXJ0aHJlYWQuc2VydmluZyBhbmQgdGltZS50aW1lKCkgLSBzdGFydHRpbWUgPiB0aW1lb3V0OgogICAgICAgIC4uLiAgICAgICAgICBzZXJ2ZXJ0aHJlYWQuc3RvcCgpCiAgICAgICAgLi4uICAgICAgICAgIGJyZWFrCgogICAgICAgIFByaW50IGFueSBlcnJvcnMgdGhhdCBtYXkgaGF2ZSBvY2N1cnJlZC4KCiAgICAgICAgPj4+IHByaW50KHNlcnZlcnRocmVhZC5lcnJvcikKICAgICAgICBOb25lCiAgICIiIgogICAgaW1wb3J0IGh0dHAuc2VydmVyCiAgICBpbXBvcnQgZW1haWwubWVzc2FnZQogICAgaW1wb3J0IHNlbGVjdAogICAgaW1wb3J0IHRocmVhZGluZwoKICAgIGNsYXNzIERvY0hhbmRsZXIoaHR0cC5zZXJ2ZXIuQmFzZUhUVFBSZXF1ZXN0SGFuZGxlcik6CgogICAgICAgIGRlZiBkb19HRVQoc2VsZik6CiAgICAgICAgICAgICIiIlByb2Nlc3MgYSByZXF1ZXN0IGZyb20gYW4gSFRNTCBicm93c2VyLgoKICAgICAgICAgICAgVGhlIFVSTCByZWNlaXZlZCBpcyBpbiBzZWxmLnBhdGguCiAgICAgICAgICAgIEdldCBhbiBIVE1MIHBhZ2UgZnJvbSBzZWxmLnVybGhhbmRsZXIgYW5kIHNlbmQgaXQuCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBpZiBzZWxmLnBhdGguZW5kc3dpdGgoJy5jc3MnKToKICAgICAgICAgICAgICAgIGNvbnRlbnRfdHlwZSA9ICd0ZXh0L2NzcycKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNvbnRlbnRfdHlwZSA9ICd0ZXh0L2h0bWwnCiAgICAgICAgICAgIHNlbGYuc2VuZF9yZXNwb25zZSgyMDApCiAgICAgICAgICAgIHNlbGYuc2VuZF9oZWFkZXIoJ0NvbnRlbnQtVHlwZScsICclczsgY2hhcnNldD1VVEYtOCcgJSBjb250ZW50X3R5cGUpCiAgICAgICAgICAgIHNlbGYuZW5kX2hlYWRlcnMoKQogICAgICAgICAgICBzZWxmLndmaWxlLndyaXRlKHNlbGYudXJsaGFuZGxlcigKICAgICAgICAgICAgICAgIHNlbGYucGF0aCwgY29udGVudF90eXBlKS5lbmNvZGUoJ3V0Zi04JykpCgogICAgICAgIGRlZiBsb2dfbWVzc2FnZShzZWxmLCAqYXJncyk6CiAgICAgICAgICAgICMgRG9uJ3QgbG9nIG1lc3NhZ2VzLgogICAgICAgICAgICBwYXNzCgogICAgY2xhc3MgRG9jU2VydmVyKGh0dHAuc2VydmVyLkhUVFBTZXJ2ZXIpOgoKICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgcG9ydCwgY2FsbGJhY2spOgogICAgICAgICAgICBzZWxmLmhvc3QgPSAoc3lzLnBsYXRmb3JtID09ICdtYWMnKSBhbmQgJzEyNy4wLjAuMScgb3IgJ2xvY2FsaG9zdCcKICAgICAgICAgICAgc2VsZi5hZGRyZXNzID0gKCcnLCBwb3J0KQogICAgICAgICAgICBzZWxmLmNhbGxiYWNrID0gY2FsbGJhY2sKICAgICAgICAgICAgc2VsZi5iYXNlLl9faW5pdF9fKHNlbGYsIHNlbGYuYWRkcmVzcywgc2VsZi5oYW5kbGVyKQogICAgICAgICAgICBzZWxmLnF1aXQgPSBGYWxzZQoKICAgICAgICBkZWYgc2VydmVfdW50aWxfcXVpdChzZWxmKToKICAgICAgICAgICAgd2hpbGUgbm90IHNlbGYucXVpdDoKICAgICAgICAgICAgICAgIHJkLCB3ciwgZXggPSBzZWxlY3Quc2VsZWN0KFtzZWxmLnNvY2tldC5maWxlbm8oKV0sIFtdLCBbXSwgMSkKICAgICAgICAgICAgICAgIGlmIHJkOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX3JlcXVlc3QoKQogICAgICAgICAgICBzZWxmLnNlcnZlcl9jbG9zZSgpCgogICAgICAgIGRlZiBzZXJ2ZXJfYWN0aXZhdGUoc2VsZik6CiAgICAgICAgICAgIHNlbGYuYmFzZS5zZXJ2ZXJfYWN0aXZhdGUoc2VsZikKICAgICAgICAgICAgaWYgc2VsZi5jYWxsYmFjazoKICAgICAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soc2VsZikKCiAgICBjbGFzcyBTZXJ2ZXJUaHJlYWQodGhyZWFkaW5nLlRocmVhZCk6CgogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCB1cmxoYW5kbGVyLCBwb3J0KToKICAgICAgICAgICAgc2VsZi51cmxoYW5kbGVyID0gdXJsaGFuZGxlcgogICAgICAgICAgICBzZWxmLnBvcnQgPSBpbnQocG9ydCkKICAgICAgICAgICAgdGhyZWFkaW5nLlRocmVhZC5fX2luaXRfXyhzZWxmKQogICAgICAgICAgICBzZWxmLnNlcnZpbmcgPSBGYWxzZQogICAgICAgICAgICBzZWxmLmVycm9yID0gTm9uZQoKICAgICAgICBkZWYgcnVuKHNlbGYpOgogICAgICAgICAgICAiIiJTdGFydCB0aGUgc2VydmVyLiIiIgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBEb2NTZXJ2ZXIuYmFzZSA9IGh0dHAuc2VydmVyLkhUVFBTZXJ2ZXIKICAgICAgICAgICAgICAgIERvY1NlcnZlci5oYW5kbGVyID0gRG9jSGFuZGxlcgogICAgICAgICAgICAgICAgRG9jSGFuZGxlci5NZXNzYWdlQ2xhc3MgPSBlbWFpbC5tZXNzYWdlLk1lc3NhZ2UKICAgICAgICAgICAgICAgIERvY0hhbmRsZXIudXJsaGFuZGxlciA9IHN0YXRpY21ldGhvZChzZWxmLnVybGhhbmRsZXIpCiAgICAgICAgICAgICAgICBkb2NzdnIgPSBEb2NTZXJ2ZXIoc2VsZi5wb3J0LCBzZWxmLnJlYWR5KQogICAgICAgICAgICAgICAgc2VsZi5kb2NzZXJ2ZXIgPSBkb2NzdnIKICAgICAgICAgICAgICAgIGRvY3N2ci5zZXJ2ZV91bnRpbF9xdWl0KCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvciA9IGUKCiAgICAgICAgZGVmIHJlYWR5KHNlbGYsIHNlcnZlcik6CiAgICAgICAgICAgIHNlbGYuc2VydmluZyA9IFRydWUKICAgICAgICAgICAgc2VsZi5ob3N0ID0gc2VydmVyLmhvc3QKICAgICAgICAgICAgc2VsZi5wb3J0ID0gc2VydmVyLnNlcnZlcl9wb3J0CiAgICAgICAgICAgIHNlbGYudXJsID0gJ2h0dHA6Ly8lczolZC8nICUgKHNlbGYuaG9zdCwgc2VsZi5wb3J0KQoKICAgICAgICBkZWYgc3RvcChzZWxmKToKICAgICAgICAgICAgIiIiU3RvcCB0aGUgc2VydmVyIGFuZCB0aGlzIHRocmVhZCBuaWNlbHkiIiIKICAgICAgICAgICAgc2VsZi5kb2NzZXJ2ZXIucXVpdCA9IFRydWUKICAgICAgICAgICAgc2VsZi5zZXJ2aW5nID0gRmFsc2UKICAgICAgICAgICAgc2VsZi51cmwgPSBOb25lCgogICAgdGhyZWFkID0gU2VydmVyVGhyZWFkKHVybGhhbmRsZXIsIHBvcnQpCiAgICB0aHJlYWQuc3RhcnQoKQogICAgIyBXYWl0IHVudGlsIHRocmVhZC5zZXJ2aW5nIGlzIFRydWUgdG8gbWFrZSBzdXJlIHdlIGFyZQogICAgIyByZWFsbHkgdXAgYmVmb3JlIHJldHVybmluZy4KICAgIHdoaWxlIG5vdCB0aHJlYWQuZXJyb3IgYW5kIG5vdCB0aHJlYWQuc2VydmluZzoKICAgICAgICB0aW1lLnNsZWVwKC4wMSkKICAgIHJldHVybiB0aHJlYWQKCgpkZWYgX3VybF9oYW5kbGVyKHVybCwgY29udGVudF90eXBlPSJ0ZXh0L2h0bWwiKToKICAgICIiIlRoZSBweWRvYyB1cmwgaGFuZGxlciBmb3IgdXNlIHdpdGggdGhlIHB5ZG9jIHNlcnZlci4KCiAgICBJZiB0aGUgY29udGVudF90eXBlIGlzICd0ZXh0L2NzcycsIHRoZSBfcHlkb2MuY3NzIHN0eWxlCiAgICBzaGVldCBpcyByZWFkIGFuZCByZXR1cm5lZCBpZiBpdCBleGl0cy4KCiAgICBJZiB0aGUgY29udGVudF90eXBlIGlzICd0ZXh0L2h0bWwnLCB0aGVuIHRoZSByZXN1bHQgb2YKICAgIGdldF9odG1sX3BhZ2UodXJsKSBpcyByZXR1cm5lZC4KICAgICIiIgogICAgY2xhc3MgX0hUTUxEb2MoSFRNTERvYyk6CgogICAgICAgIGRlZiBwYWdlKHNlbGYsIHRpdGxlLCBjb250ZW50cyk6CiAgICAgICAgICAgICIiIkZvcm1hdCBhbiBIVE1MIHBhZ2UuIiIiCiAgICAgICAgICAgIGNzc19wYXRoID0gInB5ZG9jX2RhdGEvX3B5ZG9jLmNzcyIKICAgICAgICAgICAgY3NzX2xpbmsgPSAoCiAgICAgICAgICAgICAgICAnPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iJXMiPicgJQogICAgICAgICAgICAgICAgY3NzX3BhdGgpCiAgICAgICAgICAgIHJldHVybiAnJydcCjwhRE9DVFlQRSBodG1sIFBVQkxJQyAiLS8vVzNDLy9EVEQgSFRNTCA0LjAgVHJhbnNpdGlvbmFsLy9FTiI+CjxodG1sPjxoZWFkPjx0aXRsZT5QeWRvYzogJXM8L3RpdGxlPgo8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCI+CiVzPC9oZWFkPjxib2R5IGJnY29sb3I9IiNmMGYwZjgiPiVzPGRpdiBzdHlsZT0iY2xlYXI6Ym90aDtwYWRkaW5nLXRvcDouNWVtOyI+JXM8L2Rpdj4KPC9ib2R5PjwvaHRtbD4nJycgJSAodGl0bGUsIGNzc19saW5rLCBodG1sX25hdmJhcigpLCBjb250ZW50cykKCiAgICAgICAgZGVmIGZpbGVsaW5rKHNlbGYsIHVybCwgcGF0aCk6CiAgICAgICAgICAgIHJldHVybiAnPGEgaHJlZj0iZ2V0ZmlsZT9rZXk9JXMiPiVzPC9hPicgJSAodXJsLCBwYXRoKQoKCiAgICBodG1sID0gX0hUTUxEb2MoKQoKICAgIGRlZiBodG1sX25hdmJhcigpOgogICAgICAgIHZlcnNpb24gPSBodG1sLmVzY2FwZSgiJXMgWyVzLCAlc10iICUgKHBsYXRmb3JtLnB5dGhvbl92ZXJzaW9uKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm0ucHl0aG9uX2J1aWxkKClbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm0ucHl0aG9uX2NvbXBpbGVyKCkpKQogICAgICAgIHJldHVybiAiIiIKICAgICAgICAgICAgPGRpdiBzdHlsZT0nZmxvYXQ6bGVmdCc+CiAgICAgICAgICAgICAgICBQeXRob24gJXM8YnI+JXMKICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9J2Zsb2F0OnJpZ2h0Jz4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyJz4KICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iaW5kZXguaHRtbCI+TW9kdWxlIEluZGV4PC9hPgogICAgICAgICAgICAgICAgICA6IDxhIGhyZWY9InRvcGljcy5odG1sIj5Ub3BpY3M8L2E+CiAgICAgICAgICAgICAgICAgIDogPGEgaHJlZj0ia2V5d29yZHMuaHRtbCI+S2V5d29yZHM8L2E+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGZvcm0gYWN0aW9uPSJnZXQiIHN0eWxlPSdkaXNwbGF5OmlubGluZTsnPgogICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9dGV4dCBuYW1lPWtleSBzaXplPTE1PgogICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSJHZXQiPgogICAgICAgICAgICAgICAgICAgIDwvZm9ybT4mbmJzcDsKICAgICAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb249InNlYXJjaCIgc3R5bGU9J2Rpc3BsYXk6aW5saW5lOyc+CiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT10ZXh0IG5hbWU9a2V5IHNpemU9MTU+CiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9IlNlYXJjaCI+CiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAiIiIgJSAodmVyc2lvbiwgaHRtbC5lc2NhcGUocGxhdGZvcm0ucGxhdGZvcm0odGVyc2U9VHJ1ZSkpKQoKICAgIGRlZiBodG1sX2luZGV4KCk6CiAgICAgICAgIiIiTW9kdWxlIEluZGV4IHBhZ2UuIiIiCgogICAgICAgIGRlZiBibHRpbmxpbmsobmFtZSk6CiAgICAgICAgICAgIHJldHVybiAnPGEgaHJlZj0iJXMuaHRtbCI+JXM8L2E+JyAlIChuYW1lLCBuYW1lKQoKICAgICAgICBoZWFkaW5nID0gaHRtbC5oZWFkaW5nKAogICAgICAgICAgICAnPGJpZz48YmlnPjxzdHJvbmc+SW5kZXggb2YgTW9kdWxlczwvc3Ryb25nPjwvYmlnPjwvYmlnPicsCiAgICAgICAgICAgICcjZmZmZmZmJywgJyM3Nzk5ZWUnKQogICAgICAgIG5hbWVzID0gW25hbWUgZm9yIG5hbWUgaW4gc3lzLmJ1aWx0aW5fbW9kdWxlX25hbWVzCiAgICAgICAgICAgICAgICAgaWYgbmFtZSAhPSAnX19tYWluX18nXQogICAgICAgIGNvbnRlbnRzID0gaHRtbC5tdWx0aWNvbHVtbihuYW1lcywgYmx0aW5saW5rKQogICAgICAgIGNvbnRlbnRzID0gW2hlYWRpbmcsICc8cD4nICsgaHRtbC5iaWdzZWN0aW9uKAogICAgICAgICAgICAnQnVpbHQtaW4gTW9kdWxlcycsICcjZmZmZmZmJywgJyNlZTc3YWEnLCBjb250ZW50cyldCgogICAgICAgIHNlZW4gPSB7fQogICAgICAgIGZvciBkaXIgaW4gc3lzLnBhdGg6CiAgICAgICAgICAgIGNvbnRlbnRzLmFwcGVuZChodG1sLmluZGV4KGRpciwgc2VlbikpCgogICAgICAgIGNvbnRlbnRzLmFwcGVuZCgKICAgICAgICAgICAgJzxwIGFsaWduPXJpZ2h0Pjxmb250IGNvbG9yPSIjOTA5MDkwIiBmYWNlPSJoZWx2ZXRpY2EsJwogICAgICAgICAgICAnYXJpYWwiPjxzdHJvbmc+cHlkb2M8L3N0cm9uZz4gYnkgS2EtUGluZyBZZWUnCiAgICAgICAgICAgICcmbHQ7cGluZ0BsZncub3JnJmd0OzwvZm9udD4nKQogICAgICAgIHJldHVybiAnSW5kZXggb2YgTW9kdWxlcycsICcnLmpvaW4oY29udGVudHMpCgogICAgZGVmIGh0bWxfc2VhcmNoKGtleSk6CiAgICAgICAgIiIiU2VhcmNoIHJlc3VsdHMgcGFnZS4iIiIKICAgICAgICAjIHNjYW4gZm9yIG1vZHVsZXMKICAgICAgICBzZWFyY2hfcmVzdWx0ID0gW10KCiAgICAgICAgZGVmIGNhbGxiYWNrKHBhdGgsIG1vZG5hbWUsIGRlc2MpOgogICAgICAgICAgICBpZiBtb2RuYW1lWy05Ol0gPT0gJy5fX2luaXRfXyc6CiAgICAgICAgICAgICAgICBtb2RuYW1lID0gbW9kbmFtZVs6LTldICsgJyAocGFja2FnZSknCiAgICAgICAgICAgIHNlYXJjaF9yZXN1bHQuYXBwZW5kKChtb2RuYW1lLCBkZXNjIGFuZCAnLSAnICsgZGVzYykpCgogICAgICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKToKICAgICAgICAgICAgd2FybmluZ3MuZmlsdGVyd2FybmluZ3MoJ2lnbm9yZScpICMgaWdub3JlIHByb2JsZW1zIGR1cmluZyBpbXBvcnQKICAgICAgICAgICAgTW9kdWxlU2Nhbm5lcigpLnJ1bihjYWxsYmFjaywga2V5KQoKICAgICAgICAjIGZvcm1hdCBwYWdlCiAgICAgICAgZGVmIGJsdGlubGluayhuYW1lKToKICAgICAgICAgICAgcmV0dXJuICc8YSBocmVmPSIlcy5odG1sIj4lczwvYT4nICUgKG5hbWUsIG5hbWUpCgogICAgICAgIHJlc3VsdHMgPSBbXQogICAgICAgIGhlYWRpbmcgPSBodG1sLmhlYWRpbmcoCiAgICAgICAgICAgICc8YmlnPjxiaWc+PHN0cm9uZz5TZWFyY2ggUmVzdWx0czwvc3Ryb25nPjwvYmlnPjwvYmlnPicsCiAgICAgICAgICAgICcjZmZmZmZmJywgJyM3Nzk5ZWUnKQogICAgICAgIGZvciBuYW1lLCBkZXNjIGluIHNlYXJjaF9yZXN1bHQ6CiAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKGJsdGlubGluayhuYW1lKSArIGRlc2MpCiAgICAgICAgY29udGVudHMgPSBoZWFkaW5nICsgaHRtbC5iaWdzZWN0aW9uKAogICAgICAgICAgICAna2V5ID0gJXMnICUga2V5LCAnI2ZmZmZmZicsICcjZWU3N2FhJywgJzxicj4nLmpvaW4ocmVzdWx0cykpCiAgICAgICAgcmV0dXJuICdTZWFyY2ggUmVzdWx0cycsIGNvbnRlbnRzCgogICAgZGVmIGh0bWxfZ2V0ZmlsZShwYXRoKToKICAgICAgICAiIiJHZXQgYW5kIGRpc3BsYXkgYSBzb3VyY2UgZmlsZSBsaXN0aW5nIHNhZmVseS4iIiIKICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKCclMjAnLCAnICcpCiAgICAgICAgd2l0aCB0b2tlbml6ZS5vcGVuKHBhdGgpIGFzIGZwOgogICAgICAgICAgICBsaW5lcyA9IGh0bWwuZXNjYXBlKGZwLnJlYWQoKSkKICAgICAgICBib2R5ID0gJzxwcmU+JXM8L3ByZT4nICUgbGluZXMKICAgICAgICBoZWFkaW5nID0gaHRtbC5oZWFkaW5nKAogICAgICAgICAgICAnPGJpZz48YmlnPjxzdHJvbmc+RmlsZSBMaXN0aW5nPC9zdHJvbmc+PC9iaWc+PC9iaWc+JywKICAgICAgICAgICAgJyNmZmZmZmYnLCAnIzc3OTllZScpCiAgICAgICAgY29udGVudHMgPSBoZWFkaW5nICsgaHRtbC5iaWdzZWN0aW9uKAogICAgICAgICAgICAnRmlsZTogJXMnICUgcGF0aCwgJyNmZmZmZmYnLCAnI2VlNzdhYScsIGJvZHkpCiAgICAgICAgcmV0dXJuICdnZXRmaWxlICVzJyAlIHBhdGgsIGNvbnRlbnRzCgogICAgZGVmIGh0bWxfdG9waWNzKCk6CiAgICAgICAgIiIiSW5kZXggb2YgdG9waWMgdGV4dHMgYXZhaWxhYmxlLiIiIgoKICAgICAgICBkZWYgYmx0aW5saW5rKG5hbWUpOgogICAgICAgICAgICByZXR1cm4gJzxhIGhyZWY9InRvcGljP2tleT0lcyI+JXM8L2E+JyAlIChuYW1lLCBuYW1lKQoKICAgICAgICBoZWFkaW5nID0gaHRtbC5oZWFkaW5nKAogICAgICAgICAgICAnPGJpZz48YmlnPjxzdHJvbmc+SU5ERVg8L3N0cm9uZz48L2JpZz48L2JpZz4nLAogICAgICAgICAgICAnI2ZmZmZmZicsICcjNzc5OWVlJykKICAgICAgICBuYW1lcyA9IHNvcnRlZChIZWxwZXIudG9waWNzLmtleXMoKSkKCiAgICAgICAgY29udGVudHMgPSBodG1sLm11bHRpY29sdW1uKG5hbWVzLCBibHRpbmxpbmspCiAgICAgICAgY29udGVudHMgPSBoZWFkaW5nICsgaHRtbC5iaWdzZWN0aW9uKAogICAgICAgICAgICAnVG9waWNzJywgJyNmZmZmZmYnLCAnI2VlNzdhYScsIGNvbnRlbnRzKQogICAgICAgIHJldHVybiAnVG9waWNzJywgY29udGVudHMKCiAgICBkZWYgaHRtbF9rZXl3b3JkcygpOgogICAgICAgICIiIkluZGV4IG9mIGtleXdvcmRzLiIiIgogICAgICAgIGhlYWRpbmcgPSBodG1sLmhlYWRpbmcoCiAgICAgICAgICAgICc8YmlnPjxiaWc+PHN0cm9uZz5JTkRFWDwvc3Ryb25nPjwvYmlnPjwvYmlnPicsCiAgICAgICAgICAgICcjZmZmZmZmJywgJyM3Nzk5ZWUnKQogICAgICAgIG5hbWVzID0gc29ydGVkKEhlbHBlci5rZXl3b3Jkcy5rZXlzKCkpCgogICAgICAgIGRlZiBibHRpbmxpbmsobmFtZSk6CiAgICAgICAgICAgIHJldHVybiAnPGEgaHJlZj0idG9waWM/a2V5PSVzIj4lczwvYT4nICUgKG5hbWUsIG5hbWUpCgogICAgICAgIGNvbnRlbnRzID0gaHRtbC5tdWx0aWNvbHVtbihuYW1lcywgYmx0aW5saW5rKQogICAgICAgIGNvbnRlbnRzID0gaGVhZGluZyArIGh0bWwuYmlnc2VjdGlvbigKICAgICAgICAgICAgJ0tleXdvcmRzJywgJyNmZmZmZmYnLCAnI2VlNzdhYScsIGNvbnRlbnRzKQogICAgICAgIHJldHVybiAnS2V5d29yZHMnLCBjb250ZW50cwoKICAgIGRlZiBodG1sX3RvcGljcGFnZSh0b3BpYyk6CiAgICAgICAgIiIiVG9waWMgb3Iga2V5d29yZCBoZWxwIHBhZ2UuIiIiCiAgICAgICAgYnVmID0gaW8uU3RyaW5nSU8oKQogICAgICAgIGh0bWxoZWxwID0gSGVscGVyKGJ1ZiwgYnVmKQogICAgICAgIGNvbnRlbnRzLCB4cmVmcyA9IGh0bWxoZWxwLl9nZXR0b3BpYyh0b3BpYykKICAgICAgICBpZiB0b3BpYyBpbiBodG1saGVscC5rZXl3b3JkczoKICAgICAgICAgICAgdGl0bGUgPSAnS0VZV09SRCcKICAgICAgICBlbHNlOgogICAgICAgICAgICB0aXRsZSA9ICdUT1BJQycKICAgICAgICBoZWFkaW5nID0gaHRtbC5oZWFkaW5nKAogICAgICAgICAgICAnPGJpZz48YmlnPjxzdHJvbmc+JXM8L3N0cm9uZz48L2JpZz48L2JpZz4nICUgdGl0bGUsCiAgICAgICAgICAgICcjZmZmZmZmJywgJyM3Nzk5ZWUnKQogICAgICAgIGNvbnRlbnRzID0gJzxwcmU+JXM8L3ByZT4nICUgaHRtbC5tYXJrdXAoY29udGVudHMpCiAgICAgICAgY29udGVudHMgPSBodG1sLmJpZ3NlY3Rpb24odG9waWMgLCAnI2ZmZmZmZicsJyNlZTc3YWEnLCBjb250ZW50cykKICAgICAgICBpZiB4cmVmczoKICAgICAgICAgICAgeHJlZnMgPSBzb3J0ZWQoeHJlZnMuc3BsaXQoKSkKCiAgICAgICAgICAgIGRlZiBibHRpbmxpbmsobmFtZSk6CiAgICAgICAgICAgICAgICByZXR1cm4gJzxhIGhyZWY9InRvcGljP2tleT0lcyI+JXM8L2E+JyAlIChuYW1lLCBuYW1lKQoKICAgICAgICAgICAgeHJlZnMgPSBodG1sLm11bHRpY29sdW1uKHhyZWZzLCBibHRpbmxpbmspCiAgICAgICAgICAgIHhyZWZzID0gaHRtbC5zZWN0aW9uKCdSZWxhdGVkIGhlbHAgdG9waWNzOiAnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnI2ZmZmZmZicsICcjZWU3N2FhJywgeHJlZnMpCiAgICAgICAgcmV0dXJuICgnJXMgJXMnICUgKHRpdGxlLCB0b3BpYyksCiAgICAgICAgICAgICAgICAnJy5qb2luKChoZWFkaW5nLCBjb250ZW50cywgeHJlZnMpKSkKCiAgICBkZWYgaHRtbF9nZXRvYmoodXJsKToKICAgICAgICBvYmogPSBsb2NhdGUodXJsLCBmb3JjZWxvYWQ9MSkKICAgICAgICBpZiBvYmogaXMgTm9uZSBhbmQgdXJsICE9ICdOb25lJzoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignY291bGQgbm90IGZpbmQgb2JqZWN0JykKICAgICAgICB0aXRsZSA9IGRlc2NyaWJlKG9iaikKICAgICAgICBjb250ZW50ID0gaHRtbC5kb2N1bWVudChvYmosIHVybCkKICAgICAgICByZXR1cm4gdGl0bGUsIGNvbnRlbnQKCiAgICBkZWYgaHRtbF9lcnJvcih1cmwsIGV4Yyk6CiAgICAgICAgaGVhZGluZyA9IGh0bWwuaGVhZGluZygKICAgICAgICAgICAgJzxiaWc+PGJpZz48c3Ryb25nPkVycm9yPC9zdHJvbmc+PC9iaWc+PC9iaWc+JywKICAgICAgICAgICAgJyNmZmZmZmYnLCAnIzc3OTllZScpCiAgICAgICAgY29udGVudHMgPSAnPGJyPicuam9pbihodG1sLmVzY2FwZShsaW5lKSBmb3IgbGluZSBpbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0X2V4Y2VwdGlvbl9vbmx5KHR5cGUoZXhjKSwgZXhjKSkKICAgICAgICBjb250ZW50cyA9IGhlYWRpbmcgKyBodG1sLmJpZ3NlY3Rpb24odXJsLCAnI2ZmZmZmZicsICcjYmIwMDAwJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudHMpCiAgICAgICAgcmV0dXJuICJFcnJvciAtICVzIiAlIHVybCwgY29udGVudHMKCiAgICBkZWYgZ2V0X2h0bWxfcGFnZSh1cmwpOgogICAgICAgICIiIkdlbmVyYXRlIGFuIEhUTUwgcGFnZSBmb3IgdXJsLiIiIgogICAgICAgIGNvbXBsZXRlX3VybCA9IHVybAogICAgICAgIGlmIHVybC5lbmRzd2l0aCgnLmh0bWwnKToKICAgICAgICAgICAgdXJsID0gdXJsWzotNV0KICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIHVybCBpbiAoIiIsICJpbmRleCIpOgogICAgICAgICAgICAgICAgdGl0bGUsIGNvbnRlbnQgPSBodG1sX2luZGV4KCkKICAgICAgICAgICAgZWxpZiB1cmwgPT0gInRvcGljcyI6CiAgICAgICAgICAgICAgICB0aXRsZSwgY29udGVudCA9IGh0bWxfdG9waWNzKCkKICAgICAgICAgICAgZWxpZiB1cmwgPT0gImtleXdvcmRzIjoKICAgICAgICAgICAgICAgIHRpdGxlLCBjb250ZW50ID0gaHRtbF9rZXl3b3JkcygpCiAgICAgICAgICAgIGVsaWYgJz0nIGluIHVybDoKICAgICAgICAgICAgICAgIG9wLCBfLCB1cmwgPSB1cmwucGFydGl0aW9uKCc9JykKICAgICAgICAgICAgICAgIGlmIG9wID09ICJzZWFyY2g/a2V5IjoKICAgICAgICAgICAgICAgICAgICB0aXRsZSwgY29udGVudCA9IGh0bWxfc2VhcmNoKHVybCkKICAgICAgICAgICAgICAgIGVsaWYgb3AgPT0gImdldGZpbGU/a2V5IjoKICAgICAgICAgICAgICAgICAgICB0aXRsZSwgY29udGVudCA9IGh0bWxfZ2V0ZmlsZSh1cmwpCiAgICAgICAgICAgICAgICBlbGlmIG9wID09ICJ0b3BpYz9rZXkiOgogICAgICAgICAgICAgICAgICAgICMgdHJ5IHRvcGljcyBmaXJzdCwgdGhlbiBvYmplY3RzLgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUsIGNvbnRlbnQgPSBodG1sX3RvcGljcGFnZSh1cmwpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlLCBjb250ZW50ID0gaHRtbF9nZXRvYmoodXJsKQogICAgICAgICAgICAgICAgZWxpZiBvcCA9PSAiZ2V0P2tleSI6CiAgICAgICAgICAgICAgICAgICAgIyB0cnkgb2JqZWN0cyBmaXJzdCwgdGhlbiB0b3BpY3MuCiAgICAgICAgICAgICAgICAgICAgaWYgdXJsIGluICgiIiwgImluZGV4Iik6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlLCBjb250ZW50ID0gaHRtbF9pbmRleCgpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUsIGNvbnRlbnQgPSBodG1sX2dldG9iaih1cmwpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUsIGNvbnRlbnQgPSBodG1sX3RvcGljcGFnZSh1cmwpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ2JhZCBweWRvYyB1cmwnKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdGl0bGUsIGNvbnRlbnQgPSBodG1sX2dldG9iaih1cmwpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleGM6CiAgICAgICAgICAgICMgQ2F0Y2ggYW55IGVycm9ycyBhbmQgZGlzcGxheSB0aGVtIGluIGFuIGVycm9yIHBhZ2UuCiAgICAgICAgICAgIHRpdGxlLCBjb250ZW50ID0gaHRtbF9lcnJvcihjb21wbGV0ZV91cmwsIGV4YykKICAgICAgICByZXR1cm4gaHRtbC5wYWdlKHRpdGxlLCBjb250ZW50KQoKICAgIGlmIHVybC5zdGFydHN3aXRoKCcvJyk6CiAgICAgICAgdXJsID0gdXJsWzE6XQogICAgaWYgY29udGVudF90eXBlID09ICd0ZXh0L2Nzcyc6CiAgICAgICAgcGF0aF9oZXJlID0gb3MucGF0aC5kaXJuYW1lKG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pKQogICAgICAgIGNzc19wYXRoID0gb3MucGF0aC5qb2luKHBhdGhfaGVyZSwgdXJsKQogICAgICAgIHdpdGggb3Blbihjc3NfcGF0aCkgYXMgZnA6CiAgICAgICAgICAgIHJldHVybiAnJy5qb2luKGZwLnJlYWRsaW5lcygpKQogICAgZWxpZiBjb250ZW50X3R5cGUgPT0gJ3RleHQvaHRtbCc6CiAgICAgICAgcmV0dXJuIGdldF9odG1sX3BhZ2UodXJsKQogICAgIyBFcnJvcnMgb3V0c2lkZSB0aGUgdXJsIGhhbmRsZXIgYXJlIGNhdWdodCBieSB0aGUgc2VydmVyLgogICAgcmFpc2UgVHlwZUVycm9yKCd1bmtub3duIGNvbnRlbnQgdHlwZSAlciBmb3IgdXJsICVzJyAlIChjb250ZW50X3R5cGUsIHVybCkpCgoKZGVmIGJyb3dzZShwb3J0PTAsICosIG9wZW5fYnJvd3Nlcj1UcnVlKToKICAgICIiIlN0YXJ0IHRoZSBlbmhhbmNlZCBweWRvYyBXZWIgc2VydmVyIGFuZCBvcGVuIGEgV2ViIGJyb3dzZXIuCgogICAgVXNlIHBvcnQgJzAnIHRvIHN0YXJ0IHRoZSBzZXJ2ZXIgb24gYW4gYXJiaXRyYXJ5IHBvcnQuCiAgICBTZXQgb3Blbl9icm93c2VyIHRvIEZhbHNlIHRvIHN1cHByZXNzIG9wZW5pbmcgYSBicm93c2VyLgogICAgIiIiCiAgICBpbXBvcnQgd2ViYnJvd3NlcgogICAgc2VydmVydGhyZWFkID0gX3N0YXJ0X3NlcnZlcihfdXJsX2hhbmRsZXIsIHBvcnQpCiAgICBpZiBzZXJ2ZXJ0aHJlYWQuZXJyb3I6CiAgICAgICAgcHJpbnQoc2VydmVydGhyZWFkLmVycm9yKQogICAgICAgIHJldHVybgogICAgaWYgc2VydmVydGhyZWFkLnNlcnZpbmc6CiAgICAgICAgc2VydmVyX2hlbHBfbXNnID0gJ1NlcnZlciBjb21tYW5kczogW2Jdcm93c2VyLCBbcV11aXQnCiAgICAgICAgaWYgb3Blbl9icm93c2VyOgogICAgICAgICAgICB3ZWJicm93c2VyLm9wZW4oc2VydmVydGhyZWFkLnVybCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHByaW50KCdTZXJ2ZXIgcmVhZHkgYXQnLCBzZXJ2ZXJ0aHJlYWQudXJsKQogICAgICAgICAgICBwcmludChzZXJ2ZXJfaGVscF9tc2cpCiAgICAgICAgICAgIHdoaWxlIHNlcnZlcnRocmVhZC5zZXJ2aW5nOgogICAgICAgICAgICAgICAgY21kID0gaW5wdXQoJ3NlcnZlcj4gJykKICAgICAgICAgICAgICAgIGNtZCA9IGNtZC5sb3dlcigpCiAgICAgICAgICAgICAgICBpZiBjbWQgPT0gJ3EnOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbGlmIGNtZCA9PSAnYic6CiAgICAgICAgICAgICAgICAgICAgd2ViYnJvd3Nlci5vcGVuKHNlcnZlcnRocmVhZC51cmwpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KHNlcnZlcl9oZWxwX21zZykKICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LCBFT0ZFcnJvcik6CiAgICAgICAgICAgIHByaW50KCkKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICBpZiBzZXJ2ZXJ0aHJlYWQuc2VydmluZzoKICAgICAgICAgICAgICAgIHNlcnZlcnRocmVhZC5zdG9wKCkKICAgICAgICAgICAgICAgIHByaW50KCdTZXJ2ZXIgc3RvcHBlZCcpCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBjb21tYW5kLWxpbmUgaW50ZXJmYWNlCgpkZWYgaXNwYXRoKHgpOgogICAgcmV0dXJuIGlzaW5zdGFuY2UoeCwgc3RyKSBhbmQgeC5maW5kKG9zLnNlcCkgPj0gMAoKZGVmIGNsaSgpOgogICAgIiIiQ29tbWFuZC1saW5lIGludGVyZmFjZSAobG9va3MgYXQgc3lzLmFyZ3YgdG8gZGVjaWRlIHdoYXQgdG8gZG8pLiIiIgogICAgaW1wb3J0IGdldG9wdAogICAgY2xhc3MgQmFkVXNhZ2UoRXhjZXB0aW9uKTogcGFzcwoKICAgICMgU2NyaXB0cyBkb24ndCBnZXQgdGhlIGN1cnJlbnQgZGlyZWN0b3J5IGluIHRoZWlyIHBhdGggYnkgZGVmYXVsdAogICAgIyB1bmxlc3MgdGhleSBhcmUgcnVuIHdpdGggdGhlICctbScgc3dpdGNoCiAgICBpZiAnJyBub3QgaW4gc3lzLnBhdGg6CiAgICAgICAgc2NyaXB0ZGlyID0gb3MucGF0aC5kaXJuYW1lKHN5cy5hcmd2WzBdKQogICAgICAgIGlmIHNjcmlwdGRpciBpbiBzeXMucGF0aDoKICAgICAgICAgICAgc3lzLnBhdGgucmVtb3ZlKHNjcmlwdGRpcikKICAgICAgICBzeXMucGF0aC5pbnNlcnQoMCwgJy4nKQoKICAgIHRyeToKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChzeXMuYXJndlsxOl0sICdiZ2s6cDp3JykKICAgICAgICB3cml0aW5nID0gRmFsc2UKICAgICAgICBzdGFydF9zZXJ2ZXIgPSBGYWxzZQogICAgICAgIG9wZW5fYnJvd3NlciA9IEZhbHNlCiAgICAgICAgcG9ydCA9IE5vbmUKICAgICAgICBmb3Igb3B0LCB2YWwgaW4gb3B0czoKICAgICAgICAgICAgaWYgb3B0ID09ICctZyc6CiAgICAgICAgICAgICAgICBndWkoKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGlmIG9wdCA9PSAnLWInOgogICAgICAgICAgICAgICAgc3RhcnRfc2VydmVyID0gVHJ1ZQogICAgICAgICAgICAgICAgb3Blbl9icm93c2VyID0gVHJ1ZQogICAgICAgICAgICBpZiBvcHQgPT0gJy1rJzoKICAgICAgICAgICAgICAgIGFwcm9wb3ModmFsKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGlmIG9wdCA9PSAnLXAnOgogICAgICAgICAgICAgICAgc3RhcnRfc2VydmVyID0gVHJ1ZQogICAgICAgICAgICAgICAgcG9ydCA9IHZhbAogICAgICAgICAgICBpZiBvcHQgPT0gJy13JzoKICAgICAgICAgICAgICAgIHdyaXRpbmcgPSBUcnVlCgogICAgICAgIGlmIHN0YXJ0X3NlcnZlciA9PSBUcnVlOgogICAgICAgICAgICBpZiBwb3J0ID09IE5vbmU6CiAgICAgICAgICAgICAgICBwb3J0ID0gMAogICAgICAgICAgICBicm93c2UocG9ydCwgb3Blbl9icm93c2VyPW9wZW5fYnJvd3NlcikKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIG5vdCBhcmdzOiByYWlzZSBCYWRVc2FnZQogICAgICAgIGZvciBhcmcgaW4gYXJnczoKICAgICAgICAgICAgaWYgaXNwYXRoKGFyZykgYW5kIG5vdCBvcy5wYXRoLmV4aXN0cyhhcmcpOgogICAgICAgICAgICAgICAgcHJpbnQoJ2ZpbGUgJXIgZG9lcyBub3QgZXhpc3QnICUgYXJnKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaWYgaXNwYXRoKGFyZykgYW5kIG9zLnBhdGguaXNmaWxlKGFyZyk6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gaW1wb3J0ZmlsZShhcmcpCiAgICAgICAgICAgICAgICBpZiB3cml0aW5nOgogICAgICAgICAgICAgICAgICAgIGlmIGlzcGF0aChhcmcpIGFuZCBvcy5wYXRoLmlzZGlyKGFyZyk6CiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlZG9jcyhhcmcpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVkb2MoYXJnKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBoZWxwLmhlbHAoYXJnKQogICAgICAgICAgICBleGNlcHQgRXJyb3JEdXJpbmdJbXBvcnQgYXMgdmFsdWU6CiAgICAgICAgICAgICAgICBwcmludCh2YWx1ZSkKCiAgICBleGNlcHQgKGdldG9wdC5lcnJvciwgQmFkVXNhZ2UpOgogICAgICAgIGNtZCA9IG9zLnBhdGguc3BsaXRleHQob3MucGF0aC5iYXNlbmFtZShzeXMuYXJndlswXSkpWzBdCiAgICAgICAgcHJpbnQoIiIicHlkb2MgLSB0aGUgUHl0aG9uIGRvY3VtZW50YXRpb24gdG9vbAoKe2NtZH0gPG5hbWU+IC4uLgogICAgU2hvdyB0ZXh0IGRvY3VtZW50YXRpb24gb24gc29tZXRoaW5nLiAgPG5hbWU+IG1heSBiZSB0aGUgbmFtZSBvZiBhCiAgICBQeXRob24ga2V5d29yZCwgdG9waWMsIGZ1bmN0aW9uLCBtb2R1bGUsIG9yIHBhY2thZ2UsIG9yIGEgZG90dGVkCiAgICByZWZlcmVuY2UgdG8gYSBjbGFzcyBvciBmdW5jdGlvbiB3aXRoaW4gYSBtb2R1bGUgb3IgbW9kdWxlIGluIGEKICAgIHBhY2thZ2UuICBJZiA8bmFtZT4gY29udGFpbnMgYSAne3NlcH0nLCBpdCBpcyB1c2VkIGFzIHRoZSBwYXRoIHRvIGEKICAgIFB5dGhvbiBzb3VyY2UgZmlsZSB0byBkb2N1bWVudC4gSWYgbmFtZSBpcyAna2V5d29yZHMnLCAndG9waWNzJywKICAgIG9yICdtb2R1bGVzJywgYSBsaXN0aW5nIG9mIHRoZXNlIHRoaW5ncyBpcyBkaXNwbGF5ZWQuCgp7Y21kfSAtayA8a2V5d29yZD4KICAgIFNlYXJjaCBmb3IgYSBrZXl3b3JkIGluIHRoZSBzeW5vcHNpcyBsaW5lcyBvZiBhbGwgYXZhaWxhYmxlIG1vZHVsZXMuCgp7Y21kfSAtcCA8cG9ydD4KICAgIFN0YXJ0IGFuIEhUVFAgc2VydmVyIG9uIHRoZSBnaXZlbiBwb3J0IG9uIHRoZSBsb2NhbCBtYWNoaW5lLiAgUG9ydAogICAgbnVtYmVyIDAgY2FuIGJlIHVzZWQgdG8gZ2V0IGFuIGFyYml0cmFyeSB1bnVzZWQgcG9ydC4KCntjbWR9IC1iCiAgICBTdGFydCBhbiBIVFRQIHNlcnZlciBvbiBhbiBhcmJpdHJhcnkgdW51c2VkIHBvcnQgYW5kIG9wZW4gYSBXZWIgYnJvd3NlcgogICAgdG8gaW50ZXJhY3RpdmVseSBicm93c2UgZG9jdW1lbnRhdGlvbi4gIFRoZSAtcCBvcHRpb24gY2FuIGJlIHVzZWQgd2l0aAogICAgdGhlIC1iIG9wdGlvbiB0byBleHBsaWNpdGx5IHNwZWNpZnkgdGhlIHNlcnZlciBwb3J0LgoKe2NtZH0gLWcKICAgIERlcHJlY2F0ZWQuCgp7Y21kfSAtdyA8bmFtZT4gLi4uCiAgICBXcml0ZSBvdXQgdGhlIEhUTUwgZG9jdW1lbnRhdGlvbiBmb3IgYSBtb2R1bGUgdG8gYSBmaWxlIGluIHRoZSBjdXJyZW50CiAgICBkaXJlY3RvcnkuICBJZiA8bmFtZT4gY29udGFpbnMgYSAne3NlcH0nLCBpdCBpcyB0cmVhdGVkIGFzIGEgZmlsZW5hbWU7IGlmCiAgICBpdCBuYW1lcyBhIGRpcmVjdG9yeSwgZG9jdW1lbnRhdGlvbiBpcyB3cml0dGVuIGZvciBhbGwgdGhlIGNvbnRlbnRzLgoiIiIuZm9ybWF0KGNtZD1jbWQsIHNlcD1vcy5zZXApKQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGNsaSgpCg==',
'/Lib/local_storage.py':'IyBsb2NhbCBzdG9yYWdlIGluIGJyb3dzZXIKCmNsYXNzIExvY2FsU3RvcmFnZToKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgaWYgbm90IF9fQlJZVEhPTl9fLmhhc19sb2NhbF9zdG9yYWdlOgogICAgICAgICAgICByYWlzZSBOYW1lRXJyb3IoJ2xvY2FsIHN0b3JhZ2UgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlcicpCiAgICAgICAgc2VsZi5zdG9yZSA9IF9fQlJZVEhPTl9fLmxvY2FsX3N0b3JhZ2UoKQogICAgICAgIAogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsa2V5KToKICAgICAgICBzZWxmLnN0b3JlLnJlbW92ZUl0ZW0oa2V5KQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLGtleSk6CiAgICAgICAgcmVzPXNlbGYuc3RvcmUuZ2V0SXRlbShrZXkpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgIHJldHVybiByZXMKCiAgICAgICAgcmFpc2UgS2V5RXJyb3Ioa2V5KQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLGtleSx2YWx1ZSk6CiAgICAgICAgc2VsZi5zdG9yZS5zZXRJdGVtKGtleSx2YWx1ZSkKCiAgICAjaW1wbGVtZW50ICJpbiIgZnVuY3Rpb25hbGl0eQogICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOgogICAgICAgIHJlcz1zZWxmLnN0b3JlLmdldEl0ZW0oa2V5KQogICAgICAgIGlmIHJlczoKICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgICAgICByZXR1cm4gRmFsc2UKCnN0b3JhZ2UgPSBMb2NhbFN0b3JhZ2UoKQoK',
'/Lib/re.py':'SSA9ICdpJwoKY2xhc3MgTWF0Y2hPYmplY3Q6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsanNtYXRjaCk6CiAgICAgICAgc2VsZi5fanNtYXRjaCA9IGpzbWF0Y2gKCiAgICBkZWYgZ3JvdXAoc2VsZiwgKmFyZ3MpOgogICAgICAgICMgRklYTUU6IFN1cHBvcnQgZm9yIGdyb3VwIG5hbWVzID8KICAgICAgICBpZiBsZW4oYXJncykgPT0gMDoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2pzbWF0Y2hbMF0KICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAxOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fanNtYXRjaFthcmdzWzBdXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiB0dXBsZShzZWxmLl9qc21hdGNoW3hdIGZvciB4IGluIGFyZ3MpCgogICAgZGVmIGdyb3VwcyhzZWxmLCBkZWZhdWx0Xz1Ob25lKToKICAgICAgICBpZiBkZWZhdWx0XyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gdHVwbGUoc2VsZi5fanNtYXRjaFsxOl0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHR1cGxlKHggaWYgeCBpcyBub3QgTm9uZSBlbHNlIGRlZmF1bHRfIAogICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gc2VsZi5fanNtYXRjaFsxOl0pCgpkZWYgc2VhcmNoKHBhdHRlcm4sc3JjLGZsYWdzPU5vbmUpOgogICAgIyBGSVhNRSA6IENoZWNrIHdoZXRoZXIgYGdgIGlzIGFwcHJvcHJpYXRlIGFzIHRoaXMgaXMgdXNlZCBmb3IgbWF0Y2ggdG9vCiAgICBmbGFnID0gJ2cnCiAgICBpZiBmbGFnczoKICAgICAgICBmbGFnICs9IGZsYWdzCiAgICBqc21hdGNoID0gX19CUllUSE9OX18ucmUocGF0dGVybixmbGFnKS5leGVjKHNyYykKICAgIGlmIG5vdCBqc21hdGNoOgogICAgICAgIHJldHVybiBOb25lCiAgICBlbHNlOgogICAgICAgIG1vID0gTWF0Y2hPYmplY3QoanNtYXRjaCkKICAgICAgICAjIEZJWE1FIDogbW92ZSB0byBNYXRjaE9iamVjdC5fX2luaXRfXwogICAgICAgIG1vLnN0cmluZyA9IHNyYwogICAgICAgIHJldHVybiBtbwoKZGVmIG1hdGNoKHBhdHRlcm4sIHNyYywgZmxhZ3M9Tm9uZSk6CiAgICBpZiBwYXR0ZXJuWzBdICE9ICdeJzoKICAgICAgICBwYXR0ZXJuID0gJ14nICsgcGF0dGVybgogICAgcmV0dXJuIHNlYXJjaChwYXR0ZXJuLCBzcmMsIGZsYWdzKQoKCg==',
'/Lib/dis.py':'ZGVmIGRpcyhzcmMpOgogICAgcmV0dXJuIEpTT2JqZWN0KF9fQlJZVEhPTl9fLnB5MmpzKHNyYykpLnRvX2pzKCkK',
'/Lib/string.py':'IyBTb21lIHN0cmluZ3MgZm9yIGN0eXBlLXN0eWxlIGNoYXJhY3RlciBjbGFzc2lmaWNhdGlvbgp3aGl0ZXNwYWNlID0gJyBcdFxuXHJcdlxmJwphc2NpaV9sb3dlcmNhc2UgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonCmFzY2lpX3VwcGVyY2FzZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicKYXNjaWlfbGV0dGVycyA9IGFzY2lpX2xvd2VyY2FzZSArIGFzY2lpX3VwcGVyY2FzZQpkaWdpdHMgPSAnMDEyMzQ1Njc4OScKaGV4ZGlnaXRzID0gZGlnaXRzICsgJ2FiY2RlZicgKyAnQUJDREVGJwpvY3RkaWdpdHMgPSAnMDEyMzQ1NjcnCnB1bmN0dWF0aW9uID0gIiIiISIjJCUmJygpKissLS4vOjs8PT4/QFtcXV5fYHt8fX4iIiIKcHJpbnRhYmxlID0gZGlnaXRzICsgYXNjaWlfbGV0dGVycyArIHB1bmN0dWF0aW9uICsgd2hpdGVzcGFjZQo=',
'/Lib/pydom.py':'Y2xhc3MgTm9kZUNvbGxlY3Rpb25TZWxlY3RvcihTZWxlY3Rvcik6CiAgZGVmIF9faW5pdF9fKHNlbGYsIHNlbGVjdG9yLCBjb2xsZWN0aW9uKToKICAgICAgU2VsZWN0b3IuX19pbml0X18oc2VsZiwgc2VsZWN0b3IpCiAgICAgIHNlbGYuX2NvbGxlY3Rpb249Y29sbGVjdGlvbgoKICAgICAgaWYgc2VsZi5fc2VsZWN0b3JfdHlwZSA9PSAnaWQnOgogICAgICAgICBzZWxmLl9tYXRjaD1zZWxmLl9tYXRjaF9pZAogICAgICBlbGlmIHNlbGYuX3NlbGVjdG9yX3R5cGUgPT0ndGFnJzoKICAgICAgICAgc2VsZi5fbWF0Y2g9c2VsZi5fbWF0Y2hfdGFnCiAgICAgIGVsaWYgc2VsZi5fc2VsZWN0b3JfdHlwZSA9PSAnY2xhc3NuYW1lJzoKICAgICAgICAgc2VsZi5fbWF0Y2g9c2VsZi5fbWF0Y2hfY2xhc3NuYW1lCgogIGRlZiBfbWF0Y2hfaWQoc2VsZiwgbm9kZSk6CiAgICAgIGlmIG5vZGUuaWQgaXMgTm9uZTogcmV0dXJuIEZhbHNlCiAgICAgIHJldHVybiBub2RlLmlkID09IHNlbGYuX3NlbGVjdG9yCgogIGRlZiBfbWF0Y2hfdGFnKHNlbGYsIG5vZGUpOgogICAgICByZXR1cm4gbm9kZS50YWdOYW1lID09IHNlbGYuX3NlbGVjdG9yCgogIGRlZiBfbWF0Y2hfY2xhc3NuYW1lKHNlbGYsIG5vZGUpOgogICAgICByZXR1cm4gc2VsZi5fc2VsZWN0b3IgaW4gbm9kZS5jbGFzc25hbWUKCiAgZGVmIGdldChzZWxmKToKICAgICAgX2MxPU5vZGVDb2xsZWN0aW9uKCkKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX2NvbGxlY3Rpb246CiAgICAgICAgICBpZiBzZWxmLl9tYXRjaChfbm9kZSk6CiAgICAgICAgICAgICBfYzEuYXBwZW5kKF9ub2RlKQoKICAgICAgcmV0dXJuIF9jMQoKY2xhc3MgU2VsZWN0b3I6CiAgdGFncz1bJ0EnLCdBQkJSJywnQUNST05ZTScsJ0FERFJFU1MnLCdBUFBMRVQnLCdCJywnQkRPJywnQklHJywnQkxPQ0tRVU9URScsCiAgICAgICAgJ0JVVFRPTicsJ0NBUFRJT04nLCdDRU5URVInLCdDSVRFJywnQ09ERScsJ0RFTCcsJ0RGTicsJ0RJUicsJ0RJVicsJ0RMJywKICAgICAgICAnRU0nLCdGSUVMRFNFVCcsJ0ZPTlQnLCdGT1JNJywnRlJBTUVTRVQnLCdIMScsJ0gyJywnSDMnLCdINCcsJ0g1JywnSDYnLAogICAgICAgICdJJywnSUZSQU1FJywnSU5TJywnS0JEJywnTEFCRUwnLCdMRUdFTkQnLCdNQVAnLCdNRU5VJywnTk9GUkFNRVMnLCAKICAgICAgICAnTk9TQ1JJUFQnLCdPQkpFQ1QnLCdPTCcsJ09QVEdST1VQJywnUFJFJywnUScsJ1MnLCdTQU1QJywnU0NSSVBUJywgCiAgICAgICAgJ1NFTEVDVCcsJ1NNQUxMJywnU1BBTicsJ1NUUklLRScsJ1NUUk9ORycsJ1NUWUxFJywnU1VCJywnU1VQJywnVEFCTEUnLAogICAgICAgICdURVhUQVJFQScsJ1RJVExFJywnVFQnLCdVJywnVUwnLCdWQVInLCdCT0RZJywnQ09MR1JPVVAnLCdERCcsJ0RUJywKICAgICAgICAnSEVBRCcsJ0hUTUwnLCdMSScsJ1AnLCdUQk9EWScsJ09QVElPTicsJ1REJywnVEZPT1QnLCdUSCcsJ1RIRUFEJywnVFInLAogICAgICAgICdBUkVBJywnQkFTRScsJ0JBU0VGT05UJywnQlInLCdDT0wnLCdGUkFNRScsJ0hSJywnSU1HJywnSU5QVVQnLAogICAgICAgICdJU0lOREVYJywnTElOSycsJ01FVEEnLCdQQVJBTScsICAjSFRNTCA1IGVsZW1lbnRzLi4uCiAgICAgICAgJ0FSVElDTEUnLCdBU0lERScsJ0ZJR1VSRScsJ0ZPT1RFUicsJ0hFQURFUicsJ05BVicsJ1NFQ1RJT04nLCdBVURJTycsCiAgICAgICAgJ1ZJREVPJywnQ0FOVkFTJywnQ09NTUFORCcsJ0RBVEFMSVNUJywnREVUQUlMUycsJ09VVFBVVCcsJ1BST0dSRVNTJywKICAgICAgICAnSEdST1VQJywnTUFSSycsJ01FVEVSJywnVElNRScsJ1JQJywnUlQnLCdSVUJZJ10KCiAgZGVmIF9faW5pdF9fKHNlbGYsIHNlbGVjdG9yLCBzdGFydF9ub2RlPWRvYyk6CiAgICAgIHNlbGYuX2RvYz1zdGFydF9ub2RlCgogICAgICBpZiAoaXNpbnN0YW5jZShzZWxlY3Rvciwgc3RyKSk6CiAgICAgICAgIGlmIHNlbGVjdG9yLnN0YXJ0c3dpdGgoIi4iKTogICAjY2xhc3Mgc2VsZWN0b3IKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3I9c2VsZWN0b3JbMTpdCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yX3R5cGU9ImNsYXNzbmFtZSIKICAgICAgICAgZWxpZiBzZWxlY3Rvci5zdGFydHN3aXRoKCIjIik6ICAjaWQgc2VsZWN0b3IKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3I9c2VsZWN0b3JbMTpdCiAgICAgICAgICAgIHNlbGYuX3NlbGVjdG9yX3R5cGU9ImlkIgogICAgICAgICBlbGlmIHNlbGVjdG9yLnVwcGVyKCkgaW4gdGFnczoKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3I9c2VsZWN0b3IudXBwZXIoKQogICAgICAgICAgICBzZWxmLl9zZWxlY3Rvcl90eXBlPSJ0YWciCiAgICAgICAgIGVsc2U6ICAKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3I9c2VsZWN0b3IKICAgICAgICAgICAgc2VsZi5fc2VsZWN0b3JfdHlwZT0ic2VsZWN0b3IiCiAgICAgIGVsc2U6ICAjdGhpcyBpcyBhIGZ1bmN0aW9uCiAgICAgICAgIHNlbGYuX3NlbGVjdG9yX3R5cGU9InNlbGVjdG9yIgogICAgICAgICBzZWxmLl9mdW5jdGlvbj1zZWxlY3RvcgogICAgICAgICBzZWxmLmdldD1zZWxmLl9mdW5jdGlvbl9nZXQKCiAgZGVmIF9mdW5jdGlvbl9nZXQoc2VsZik6CiAgICAgIGRlZiByZWN1cnNlKG5vZGUpOgogICAgICAgICAgX2xpc3Q9W10KICAgICAgICAgIGlmIHNlbGYuX2Z1bmN0aW9uKG5vZGUpOgogICAgICAgICAgICAgX2xpc3QuYXBwZW5kKG5vZGUpCgogICAgICAgICAgZm9yIF9ub2RlIGluIG5vZGUuY2hpbGROb2RlczoKICAgICAgICAgICAgICBfbGlzdCs9cmVjdXJzZShfbm9kZSkKCiAgICAgICAgICByZXR1cm4gX2xpc3QKCiAgICAgIF9tYXRjaGVkX25vZGVzPXJlY3Vyc2Uoc2VsZi5fZG9jKQogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oX21hdGNoZWRfbm9kZXMpCgogIGRlZiBnZXQoc2VsZik6CiAgICAgIF9tYXRjaGVkX25vZGVzPVtdCiAgICAgIAogICAgICBpZiBzZWxmLl9zZWxlY3Rvcl90eXBlPT0iaWQiOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KGlkPXNlbGYuX3NlbGVjdG9yKQogICAgICBlbGlmIHNlbGYuX3NlbGVjdG9yX3R5cGU9PSJjbGFzc25hbWUiOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KGNsYXNzbmFtZT1zZWxmLl9zZWxlY3RvcikKICAgICAgZWxpZiBzZWxmLl9zZWxlY3Rvcl90eXBlID09ICJ0YWciOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KHRhZz1zZWxmLl9zZWxlY3RvcikKICAgICAgZWxpZiBzZWxmLl9zZWxlY3Rvcl90eXBlPT0ic2VsZWN0b3IiOgogICAgICAgICBfbWF0Y2hlZF9ub2Rlcz1zZWxmLl9kb2MuZ2V0KHNlbGVjdG9yPXNlbGYuX3NlbGVjdG9yKQoKICAgICAgcmV0dXJuIE5vZGVDb2xsZWN0aW9uKF9tYXRjaGVkX25vZGVzKQoKY2xhc3MgTm9kZUNvbGxlY3Rpb246CiAgZGVmIF9faW5pdF9fKHNlbGYsIG5vZGVzPVtdKToKICAgICAgc2VsZi5fbm9kZXM9bm9kZXMKCiAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgIHJldHVybiBsZW4oc2VsZi5fbm9kZXMpCgogIGRlZiBfX2l0ZW1fXyhzZWxmLCBpKToKICAgICAgcmV0dXJuIHNlbGYuX25vZGVzW2ldCgogIGRlZiBfX2FkZF9fKHNlbGYsIG5vZGVzKToKICAgICAgc2VsZi5fbm9kZXMrPW5vZGVzCgogIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICBfc3RyPVtdCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9zdHIuYXBwZW5kKF9ub2RlLl9fc3RyX18oKSkKCiAgICAgIHJldHVybiAnPGJyPicuam9pbihfc3RyKQoKICBkZWYgYXBwZW5kKHNlbGYsIG5vZGUpOiAgICAgICAgCiAgICAgIHNlbGYuX25vZGVzLmFwcGVuZChub2RlKQoKICBkZWYgbmV4dChzZWxmKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgeWllbGQgX25vZGUKCiAgZGVmIGFkZChzZWxmLCBzZWxlY3RvciwgY29udGV4dCk6CiAgICAgIF9ucz1Ob2RlQ29sbGVjdGlvblNlbGVjdG9yKHNlbGVjdG9yLCBzZWxmKQogICAgICBzZWxmLl9ub2Rlcys9X25zLmdldCgpCgogIGRlZiBhZGRDbGFzcyhzZWxmLCBjbGFzc25hbWUpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5hZGRDbGFzcyhjbGFzc25hbWUpCgogIGRlZiBhZnRlcihzZWxmLCBjb250ZW50KToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuYWZ0ZXIoY29udGVudCkKCiAgZGVmIGFwcGVuZF9jb250ZW50KHNlbGYsIGNvbnRlbnQpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5hcHBlbmQoY29udGVudCkKCiAgZGVmIGJlZm9yZShzZWxmLCBjb250ZW50KToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuYmVmb3JlKGNvbnRlbnQpCgogIGRlZiBjaGlsZHJlbihzZWxmLCBzZWxlY3Rvcj1Ob25lKToKICAgICAgX2M9Tm9kZUNvbGxlY3Rpb24oKQogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBmb3IgX2NoaWxkIGluIF9ub2RlLmdldF9jaGlsZHJlbigpOgogICAgICAgICAgICAgIF9jLmFwcGVuZChfY2hpbGQpCgogICAgICBpZiBzZWxlY3RvciBpcyBOb25lOgogICAgICAgICByZXR1cm4gX2MKCiAgICAgICNzZWxlY3RvciBpcyBub3QgTm9uZQogICAgICBfbnM9Tm9kZUNvbGxlY3Rpb25TZWxlY3RvcihzZWxlY3RvciwgX2MpCiAgICAgIHJldHVybiBfbnMuZ2V0KCkKCiAgZGVmIGNsb25lKHNlbGYpOgogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oW19ub2RlLmNsb25lKCkgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzXSkKCiAgZGVmIGNsb3Nlc3Qoc2VsZiwgc2VsZWN0b3IpOgogICAgICBpZiBpc2luc3RhbmNlKHNlbGVjdG9yLCBzdHIpOgogICAgICAgICBfbnM9U2VsZWN0b3Ioc2VsZWN0b3IpCiAgICAgICAgIHNlbGVjdG9yPV9ucy5nZXQoKQoKICAgICAgX2M9Tm9kZUNvbGxlY3Rpb24oKQogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfYy5hcHBlbmQoX25vZGUuY2xvc2VzdChzZWxlY3RvcikpCgogICAgICByZXR1cm4gX2MKCiAgZGVmIGNzcyhzZWxmLCBwcm9wZXJ0eSwgdmFsdWU9Tm9uZSk6CiAgICAgIGlmIHZhbHVlIGlzIE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKHByb3BlcnR5LCBkaWN0KToKICAgICAgICAgcmV0dXJuIHNlbGYuX25vZGVzWzBdLmNzcyhwcm9wZXJ0eSkKCiAgICAgIGlmIGlzaW5zdGFuY2UocHJvcGVydHksIGRpY3QpOgogICAgICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICAgICBfbm9kZS5jc3MocHJvcGVydHkpCiAgICAgIGVsc2U6CiAgICAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgICAgIF9ub2RlLmNzcyhwcm9wZXJ0eSwgdmFsdWUpCiAgICAgIAogIGRlZiBlbXB0eShzZWxmKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuZW1wdHkoKQoKICBkZWYgZmlsdGVyKHNlbGYsIHNlbGVjdG9yKToKICAgICAgX25zPU5vZGVDb2xsZWN0aW9uU2VsZWN0b3Ioc2VsZWN0b3IsIHNlbGYpCiAgICAgIHJldHVybiBfbnMuZ2V0KCkKCiAgZGVmIGZpcnN0KHNlbGYpOgogICAgICBpZiBsZW4oc2VsZi5fbm9kZXMpID09IDA6CiAgICAgICAgIHJldHVybiBOb2RlQ29sbGVjdGlvbigpCgogICAgICByZXR1cm4gTm9kZUNvbGxlY3Rpb24oW3NlbGYuX25vZGVzWzBdXSkKCiAgZGVmIGdldChzZWxmLCBpbmRleD1Ob25lKToKICAgICAgaWYgaW5kZXggaXMgTm9uZToKICAgICAgICAgcmV0dXJuIFtfbm9kZSBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXNdCgogICAgICByZXR1cm4gc2VsZi5fbm9kZXNbaW5kZXhdCgogIGRlZiBoYXNDbGFzcyhzZWxmLCBuYW1lKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgaWYgX25vZGUuaGFzQ2xhc3MobmFtZSk6CiAgICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgICAgcmV0dXJuIEZhbHNlCgogIGRlZiBoZWlnaHQoc2VsZiwgdmFsdWU9Tm9uZSk6CiAgICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1swXS5jc3MoJ2hlaWdodCcpCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydoZWlnaHQnOiB2YWx1ZX0pCgogIGRlZiBoaWRlKHNlbGYpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ25vbmUnfSkKCiAgZGVmIGh0bWwoc2VsZiwgY29udGVudD1Ob25lKToKICAgICAgaWYgY29udGVudCBpcyBOb25lOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF0uZ2V0X2h0bWwoKQoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuc2V0X2h0bWwoY29udGVudCkKCiAgZGVmIGxhc3Qoc2VsZik6CiAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1stMV0KCiAgZGVmIHBhcmVudChzZWxmKToKICAgICAgX3A9Tm9kZUNvbGxlY3Rpb24oKQogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfcC5hcHBlbmQoX25vZGUuZ2V0X3BhcmVudCgpKQoKICBkZWYgcHJlcGVuZChzZWxmLCBjb250ZW50KToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUucHJlcGVuZChjb250ZW50KQoKICBkZWYgcHJldihzZWxmKToKICAgICAgX3AxPU5vZGVDb2xsZWN0aW9uKCkKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX3BhcmVudD1fbm9kZS5nZXRfcGFyZW50KCkKICAgICAgICAgIGZvciBfaSBpbiByYW5nZShsZW4oX3BhcmVudC5jaGlsZE5vZGVzKSk6CiAgICAgICAgICAgICAgaWYgX3BhcmVudC5jaGlsZE5vZGVzW19pXSA9PSBfbm9kZToKICAgICAgICAgICAgICAgICBpZiBfaSA+IDA6CiAgICAgICAgICAgICAgICAgICAgX3AxLmFwcGVuZChfcGFyZW50LmNoaWxkTm9kZXNbX2ktMV0pCiAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgIHJldHVybiBfcDEKCiAgZGVmIHJlbW92ZShzZWxmKToKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuZ2V0X3BhcmVudCgpLnJlbW92ZUNoaWxkKF9ub2RlKSAKCiAgZGVmIHJlbW92ZUNsYXNzKHNlbGYsIG5hbWUpOgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBfbm9kZS5yZW1vdmVDbGFzcyhuYW1lKQoKICBkZWYgcmVwbGFjZVdpdGgoc2VsZiwgY29udGVudCk6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLmdldF9wYXJlbnQoKS5yZXBsYWNlV2l0aChjb250ZW50LCBfbm9kZSkKCiAgZGVmIHNob3coc2VsZik6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J2Rpc3BsYXknOiAnYmxvY2snfSkKCiAgZGVmIHRleHQoc2VsZiwgY29udGVudD1Ob25lKToKICAgICAgaWYgY29udGVudCBpcyBOb25lOgogICAgICAgICByZXR1cm4gc2VsZi5fbm9kZXNbMF0uZ2V0X3RleHQoKQoKICAgICAgZm9yIF9ub2RlIGluIHNlbGYuX25vZGVzOgogICAgICAgICAgX25vZGUuc2V0X3RleHQoY29udGVudCkgCgogIGRlZiB0b2dnbGUoc2VsZiwgRnVuY3Rpb249Tm9uZSk6CiAgICAgIGlmIEZ1bmN0aW9uIGlzIE5vbmU6CiAgICAgICAgIF9zaG93PVRydWUKICAgICAgICAgaWYgc2VsZi5fbm9kZXNbMF0uY3NzKCdkaXNwbGF5JykgIT0gJ25vbmUnOgogICAgICAgICAgICBfc2hvdz1GYWxzZQogICAgICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICAgICBpZiBfc2hvdzoKICAgICAgICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J2Rpc3BsYXknOiAnYmxvY2snfSkKICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ25vbmUnfSkKICAKICAgICAgICAgICAgIF9zaG93PW5vdCBfc2hvdwoKICAgICAgICAgcmV0dXJuCgogICAgICBmb3IgX25vZGUgaW4gc2VsZi5fbm9kZXM6CiAgICAgICAgICBpZiBGdW5jdGlvbihfbm9kZSk6CiAgICAgICAgICAgICBfbm9kZS5zZXRfc3R5bGUoeydkaXNwbGF5JzogJ2Jsb2NrJ30pCiAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgX25vZGUuc2V0X3N0eWxlKHsnZGlzcGxheSc6ICdub25lJ30pCgogIGRlZiB1bndyYXAoc2VsZik6CiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9wYXJlbnQ9X25vZGUuZ2V0X3BhcmVudCgpCiAgICAgICAgICBfZ3JhbmRwYXJlbnQ9X3BhcmVudC5nZXRfcGFyZW50KCkKICAgICAgICAgIF9ncmFuZHBhcmVudC5yZXBsYWNlQ2hpbGQoX25vZGUsIF9wYXJlbnQpCgogICAgICAgICAgX3BhcmVudC5yZW1vdmUoKQoKICBkZWYgd2lkdGgoc2VsZiwgd2lkdGg9Tm9uZSk6CiAgICAgIGlmIHdpZHRoIGlzIE5vbmU6CiAgICAgICAgIHJldHVybiBzZWxmLl9ub2Rlc1swXS5jc3MoJ3dpZHRoJykKCiAgICAgIGZvciBfbm9kZSBpbiBzZWxmLl9ub2RlczoKICAgICAgICAgIF9ub2RlLnNldF9zdHlsZSh7J3dpZHRoJzogd2lkdGh9KQo=',
'/Lib/keyword.py':'a3dsaXN0ID0gWwojLS1zdGFydCBrZXl3b3Jkcy0tCiAgICAgICAgJ0ZhbHNlJywKICAgICAgICAnTm9uZScsCiAgICAgICAgJ1RydWUnLAogICAgICAgICdhbmQnLAogICAgICAgICdhcycsCiAgICAgICAgJ2Fzc2VydCcsCiAgICAgICAgJ2JyZWFrJywKICAgICAgICAnY2xhc3MnLAogICAgICAgICdjb250aW51ZScsCiAgICAgICAgJ2RlZicsCiAgICAgICAgJ2RlbCcsCiAgICAgICAgJ2VsaWYnLAogICAgICAgICdlbHNlJywKICAgICAgICAnZXhjZXB0JywKICAgICAgICAnZmluYWxseScsCiAgICAgICAgJ2ZvcicsCiAgICAgICAgJ2Zyb20nLAogICAgICAgICdnbG9iYWwnLAogICAgICAgICdpZicsCiAgICAgICAgJ2ltcG9ydCcsCiAgICAgICAgJ2luJywKICAgICAgICAnaXMnLAogICAgICAgICdsYW1iZGEnLAogICAgICAgICdub25sb2NhbCcsCiAgICAgICAgJ25vdCcsCiAgICAgICAgJ29yJywKICAgICAgICAncGFzcycsCiAgICAgICAgJ3JhaXNlJywKICAgICAgICAncmV0dXJuJywKICAgICAgICAndHJ5JywKICAgICAgICAnd2hpbGUnLAogICAgICAgICd3aXRoJywKICAgICAgICAneWllbGQnLAojLS1lbmQga2V5d29yZHMtLQogICAgICAgIF0KCg==',
'/Lib/os.py':'aW1wb3J0IHJhbmRvbQoKYWx0c2VwPU5vbmUKY3VyZGlyPSIuIgoKZGVmIGRldm51bGwoKToKICAgIE9TRXJyb3IoJ0Z1bmN0aW9uIGRldm51bGwgbm90IHN1cHBvcnRlZCcpCgpleHRzZXA9Jy4nCgpkZWYgZ2V0bG9hZGF2ZygpOgogICAgT1NFcnJvcignRnVuY3Rpb24gZ2V0bG9hZGF2ZyBub3Qgc3VwcG9ydGVkJykKCmxpbmVzZXA9IlxuIgpuYW1lPSJicnl0aG9uIgpwYXRoc2VwPSI7IgpwYXJkaXI9Ii4uIgpzZXA9Jy8nCgpkZWYgdXJhbmRvbShsZW5ndGgpOgogICAgX2M9W10KICAgIGZvciBfaSBpbiByYW5nZShsZW5ndGgpOgogICAgICAgIF9jLmFwcGVuZChvcmQocmFuZG9tLnJhbmRpbnQoMCwyNTUpKSkKICAgICAgICAKICAgIHJldHVybiAnJy5qb2luKF9jKQo='
}


function readFromVFS(lib){
   //borrowed code from http://stackoverflow.com/questions/1119722/base-62-conversion-in-python
   if (window.atob === undefined) {
      // browser is not chrome, firefox or safari :(
      window.atob=function(s) {
        var e={},i,k,v=[],r='',w=String.fromCharCode;
        var n=[[65,91],[97,123],[48,58],[43,44],[47,48]];

        for(z in n){for(i=n[z][0];i<n[z][1];i++){v.push(w(i));}}
        for(i=0;i<64;i++){e[v[i]]=i;}

        for(i=0;i<s.length;i+=72){
           var b=0,c,x,l=0,o=s.substring(i,i+72);
           for(x=0;x<o.length;x++){
              c=e[o.charAt(x)];b=(b<<6)+c;l+=6;
              while(l>=8){r+=w((b>>>(l-=8))%256);}
           }
        }
        return r;
      }
   }

   if (__BRYTHON__.$py_VFS[lib] === undefined) return undefined
   //retrieve module from virutal file system and return contents
   return window.atob(__BRYTHON__.$py_VFS[lib])
}

//define import procedure to look up module in VFS
$import_via_VFS=function(module,alias,names){
  var ext=['.js', '.py']
  var search_path=__BRYTHON__.path
  var root = __BRYTHON__.brython_path;
  if (root.endsWith('/')) {
     root=root.substring(0,root.length-1); 
  }
  if (search_path.indexOf(root+'/libs') == -1) {
     search_path.unshift(root+'/libs')
  }

  if (search_path.indexOf(root+'/Lib') == -1) {
     search_path.unshift(root+'/Lib')
  }

  for(var i=0; i<search_path.length; i++) {
     for (var j=0; j<ext.length; j++) {
         var path=search_path[i].replace(root, '')
         path+='/'+module+ext[j]
         
         //console.log("searching for " + path + " in VFS");
         var module_contents=readFromVFS(path)
         if(module_contents !== undefined) {
           console.log("imported " + module + " via VFS")
           if (ext[j] == '.js') {
              return $import_js_module(module,alias,names,path,module_contents)
           }
           return $import_py_module(module,alias,names,path,module_contents)
         }
     }
  }
  res = Error()
  res.name = 'NotFoundError'
  res.message = "No module named '"+module+"'"
  throw res
}
$import_funcs.unshift($import_via_VFS)
